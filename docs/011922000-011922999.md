# StackOverflow 问答 11922000-11922999

# java - 从多个数组对象创建一个数组。

> ID：11922002
> 
> 赞同：-3
> 
> 时间：2012-08-12T12:03:37.097
> 
> 标签：java, arrays

无法在任何地方找到它，但我想做的是编写一个函数，从文本文件中查找数组中的每 5 个字符串，并将它们转换为 8 个字符串。并执行此操作，直到文本文件中没有更多字符串为止。

或者

使用 split 分割线，但也使用 split 分割它们，例如我想：

```
name;type;body;due
lewis;homework;blahblahblah;12/12/12 
```

转换为：Array[name, type, body, due]; 数组[刘易斯，作业，blahblahblah，12/12/12]；

谢谢:)如果我解释得不好，问我，我会尽力解释得更好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:14:31.843

不知道我是否正确地跟着你。只是提出这个。

对于每一行 String [] strArr = lineStr.split(";");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:21:44.253

那这个呢 ？

```
public static String[][] toArrays(String text, String sep1, String sep2) {
    String[] lines = text.split(sep1);
    if (lines == null) {
        return null;
    }

    String[][] arrays = new String[lines.length][];

    for (int i = 0; i < lines.length; i++) {
        String[] words = lines[i].split(sep2);
        arrays[i] = words;
    }

    return arrays;
} 
```

你用它来称呼它：

```
 String[][] s = toArrays("name;type;body;due\nlewis;homework;blahblahblah;12/12/12", "\n", ";"); 
```

# php - mysql和php的错误构造？

> ID：11922005
> 
> 赞同：1
> 
> 时间：2012-08-12T12:04:03.490
> 
> 标签：php, mysql, sql

“这个 MySql 和 php 构造的宽度不对？

```
$zapytanie = "UPDATE Users 
              SET    usr_premium_expire = '$data' 
              WHERE  usr_login = '$login';
             "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:09:30.567

MySQL 语句中不需要分号。如果出现任何进一步的错误，请尝试

```
mysql_error(); 
```

执行完语句后。

要验证发送的数据，请尝试

```
echo $zapytanie; 
```

如有疑问，也可以转义变量：

```
"UPDATE Users SET usr_premium_expire='" . $data . "' WHERE usr_login='" . $login . "'" 
```

# objective-c - iOS：如何使用 NSSortDescriptor 对关系中的值进行排序？

> ID：11922006
> 
> 赞同：2
> 
> 时间：2012-08-12T12:04:12.080
> 
> 标签：objective-c, ios, ios5, sorting, nssortdescriptor

我的数据模型中有两个具有关系的对象...

1.  人{姓名、职位、职务}
2.  位置{位置，位置排序}

以上每个都有自己的类文件（NSManagedObject 的子类）。我正在尝试按上面的 PositionSort 进行排序。我目前可以使用以下代码按位置排序。

```
NSSortDescriptor *sortDescriptorPosition = [[NSSortDescriptor alloc] initWithKey:@"position" ascending:YES]; 
```

我不确定如何访问和使用 PositionSort。有任何想法吗？谢谢！

更新：添加了完整的功能...

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptorState = [[NSSortDescriptor alloc] initWithKey:@"position.positionSort" ascending:YES];

    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptorState, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSPredicate *searchPredicate = [NSPredicate predicateWithFormat:@"(companyID == %@)", company.companyID];
    [fetchRequest setPredicate:searchPredicate];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"position.positionDescription" cacheName:nil];

    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
} 
```

使用上面的代码，我在`Runtime`.

```
2012-08-12 10:29:45.499 College[269:707] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFString 0xd6bd310> valueForUndefinedKey:]: this class is not key value coding-compliant for the key positionDescription.' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T12:37:48.517

我不确定您是否要准确排序，但以下内容`NSSortDescriptor`可用于使用该值对`Person`对象进行排序。`PositionSort`

```
NSSortDescriptor *sortDescriptorPosition = [[NSSortDescriptor alloc] initWithKey:@"position.PositionSort" ascending:YES]; 
```

也许，你在找这个……

# jsf - JSF：c：设置按钮点击？

> ID：11922007
> 
> 赞同：0
> 
> 时间：2012-08-12T12:04:24.170
> 
> 标签：jsf, redirect, button, javabeans, backing-beans

`c:set`当按下某个按钮并发生重定向时，是否可以“执行”/“渲染”各种标签？

我不想以代码方式设置支持 bean 的属性，因为我用静态数据填充它们。由于我在这里不是在谈论一个按钮而是在谈论多个按钮，因此以代码方式执行此操作会产生大量样板代码。这就是我想使用`c:set`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:14:18.200

对于您心目中的工作来说，这`<c:set>`是错误的工具，因此不适合。它不会在提交表单期间运行，而是在构建视图期间运行。

改为使用[`<f:setPropertyActionListener>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/setPropertyActionListener.html)。例如

```
<h:commandButton value="Submit" action="#{bean.submit}">
    <f:setPropertyActionListener target="#{bean.property1}" value="value1" />
    <f:setPropertyActionListener target="#{bean.property2}" value="value2" />
</h:commandButton> 
```

* * *

一个完全不同的选择是只发送请求参数`<f:param>`。这允许您创建对用户体验和 SEO 更好的可收藏链接。

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)
*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)

# mysql - 从两个连接表中进行选择，其中表的一列由另一列中的两列引用

> ID：11922009
> 
> 赞同：0
> 
> 时间：2012-08-12T12:04:36.533
> 
> 标签：mysql, sql, join

我有两个表，Page 和 Hyperlink，分别存储网页 URL 和它们的连接（超链接）。在 Page 表中，我有一个 page_id 列，它是所有唯一条目的 AUTO_INCREMENT。在超链接表中，我将 page_id 用于超链接的源和目标。

表：页

```
page_id | page_url 
--------------------  
  1     |  a.com
  2     |  b.com
  3     |  c.com
  4     |  d.com 
```

表：超链接

```
hyperlink_id | source_id | destination_id
1            | 1         | 2
2            | 1         | 3
3            | 2         | 4
4            | 4         | 4 
```

在给定超链接 ID 的情况下，我想检索一个连续返回两个字符串 a.com 和 b.com 的 ResultSet。假设 hyperlink_id 为 1。

我尝试使用下面的查询，但似乎没有用。

```
SELECT Page.page_url, Page.page_url from Hyperlink 
JOIN Page
ON Page.page_id = Hyperlink.source_id
AND Page.page_id = Hyperlink.destination_id
where Hyperlink.hyperlink_id = 1 
```

这个查询给我返回了一个空的 ResultSet。

但是，此查询适用于 hyperlink_id = 4。我认为此查询在`source_id != destination_id`. 我的 SELECT 语句有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:09:59.930

您的查询可以重写为：

```
SELECT Page.page_url, Page.page_url 
  FROM Hyperlink 
  JOIN Page
    ON Page.page_id = Hyperlink.source_id
   AND Hyperlink.source_id = Hyperlink.destination_id
 WHERE Hyperlink.hyperlink_id = 1 
```

这意味着`Hyperlink.source_id`必须相等`Hyperlink.destination_id`，并且您的表中只有一行满足此条件。那个`hyperlink_id = 4`。

也许您的意思是以下？

```
SELECT p1.page_url, p2.page_url 
  FROM Hyperlink 
  JOIN Page p1
    ON p1.page_id = Hyperlink.source_id
  JOIN Page p2
   AND p2.page_id = Hyperlink.destination_id
 WHERE Hyperlink.hyperlink_id = 1 
```

这将访问该`Page`表两次以获取两个*不同*ID所需的信息

# jsf - 从 jsf / glassfish 运行外部进程

> ID：11922010
> 
> 赞同：1
> 
> 时间：2012-08-12T12:04:54.817
> 
> 标签：jsf, jakarta-ee, netbeans, primefaces, glassfish

这是一个基于 GlassFish 3.1.2 的 jsf 2.0 项目，由 Netbeans 开发。

在我的业务逻辑中，我需要启动一个返回 png 或 svg 的 perl 应用程序。该文件将在 UI 中显示或呈现为文件下载（我将使用 primefaces）。

**问题：如何从我的 jsf 应用程序启动像这个 perl 脚本这样的外部进程？**

（我在这里找到了一个关于这个问题的线程：[http](http://www.java.net/node/676943) ://www.java.net/node/676943但答案太技术性了，我听不懂）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:33:59.327

您可以使用`Runtime.getRuntime().exec("perl script.pl")`也可以使用[Process](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)类。

看`exitValue()`和`getInputStream()`。

# python - Python HttpConnection - 将请求标头写入文件

> ID：11922012
> 
> 赞同：0
> 
> 时间：2012-08-12T12:05:02.183
> 
> 标签：python, http

如果发生错误，我正在尝试记录一些连接信息。使用 httplib 的 HTTPConnection，我可以通过将调试级别设置为 1 来打印出请求标头：

```
 connection = httplib.HTTPConnection('www.example.com')
    connection.set_debuglevel(1) 
```

但是，这似乎只是无条件地直接打印到外壳。我需要能够将此信息作为字符串或存储在变量中的内容获取，以便仅在引发异常时将其打印出来。

我想要的特定信息是库正在生成的请求标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:50:32.367

我会使用[`requests`](http://docs.python-requests.org/en/latest/index.html)HTTP 库。

要获取响应标头，您只需要这段代码：

```
import requests

try:
    r = requests.get("http://www.example.com")
    # Raise an exception in case of "bad"
    # status code (non-200 response)
    r.raise_for_status()
    print r.headers
except Exception as e:
    print e.message 
```

输出：

```
{'connection': 'close',
 'content-encoding': 'gzip',
 'content-length': '1162',
 'content-type': 'text/html; charset=UTF-8',
 'date': 'Sun, 12 Aug 2012 12:49:44 GMT',
 'last-modified': 'Wed, 09 Feb 2011 17:13:15 GMT',
 'server': 'Apache/2.2.3 (CentOS)',
 'vary': 'Accept-Encoding'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:36:53.677

事实证明，诀窍是将 sys.stdout 重定向到 StringIO 对象，然后可以将其内容写入文件或您喜欢的任何内容，因为您可以访问字符串。查看 StringIO.StringIO。

# java - 自动处理依赖关系

> ID：11922017
> 
> 赞同：1
> 
> 时间：2012-08-12T12:05:30.040
> 
> 标签：java, netbeans

我正在 Netbeans 中开发两个 Java 应用程序，我需要在第一个应用程序中运行第二个应用程序。我使用以下代码执行此操作：

```
ProcessBuilder pb = new ProcessBuilder("java", "Second App Main Class Name");
pb.start(); 
```

问题是第二个应用程序有大量依赖项，我在 Netbeans 中添加了这些依赖项作为引用。但是当我使用上面的代码运行它时，Java 显然找不到它们。

由于我的项目使用了很多库，我可以`Classpath`以某种方式自动处理所有这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:58:04.890

好吧，这里的问题是您实际上并没有在环境中为您的第二个 Java 应用程序配置类路径，因此即使您可以调用主类本身（如您所说），也找不到其他依赖项。

我还猜想，即使您使用 Maven 或 Ant 之类的东西，如果您正在构建两个具有不同类路径的独立 Java 应用程序（但一个知道另一个的类路径，那么您可以这样做以便告诉 ProcessBuilder 如何为您的第二个应用程序找到正确的 JAR 和 Class 文件：

```
public int exec(Class<?> clazz) throws IOException,
                                           InterruptedException {
    String javaHome = System.getProperty("java.home");
    String javaBin = javaHome +
            File.separator + "bin" +
            File.separator + "java";

    /* This is where you want to set up your Classpath for the second app */
    String classpath = System.getProperty("java.class.path");
    String className = clazz.getCanonicalName();

    ProcessBuilder builder = new ProcessBuilder(
            javaBin, "-cp", classpath, className);

    Process process = builder.start();
    process.waitFor();
    return process.exitValue();
} 
```

但我质疑您为什么要从 NetBeans 启动应用程序 - 假设您最终需要从命令行启动这两个应用程序。如果您无法从命令行启动应用程序，那么您也无法从 Java 启动它们。ProcessBuilder 只是充当系统上其他程序的命令行启动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:08:55.483

我会直接运行第二个应用程序的`main`方法，而不是产生一个新进程。处理外部进程有些复杂，尤其是从控制台读取时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:03:18.897

您可以使用 Maven 或 Ant 之类的构建工具，并根据您的工具将项目导入为 Maven 或 Ant 项目。Maven 很好地处理传递依赖。查看此链接以获取 Maven 文档：[http ://maven.apache.org/](http://maven.apache.org/)

# php - Facebook getSignedRequest 不起作用

> ID：11922019
> 
> 赞同：0
> 
> 时间：2012-08-12T12:05:34.840
> 
> 标签：php, facebook, api, request

我的代码：

```
<?
session_start();
include('facebook.php');

$config['appid' ] = "xxxxxxxxx";
$config['secret'] = "xxxxxxxxx";

// Create our Application instance.
$facebook = new Facebook(array(
    'appId'  => $config['appid'],
    'secret' => $config['secret'],
    'cookie' => true
));

$signedRequest = $facebook->getSignedRequest();
if($signedRequest['page']['liked'] == 1) echo "LIKED";
?> 
```

代码在新创建的应用程序中不起作用，但它在旧应用程序中起作用。

我需要帮助。我究竟做错了什么？

谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:45:40.250

你能做 var_dump($signedRequest);

您的服务器有 SSL 证书吗？[禁用 Facebook 的 https -> https://www.facebook.com/settings?tab=security&edited=browsing](https://www.facebook.com/settings?tab=security&edited=browsing)后测试您的应用程序

# php - 使用 PDO 插入不插入值

> ID：11922020
> 
> 赞同：2
> 
> 时间：2012-08-12T12:05:48.493
> 
> 标签：php, pdo

我需要一种将新注册用户的数据插入数据库的机制。我使用 PDO 来执行此操作，这是我当前的代码：

```
$dbc = new PDO('mysql:host=localhost;dbname=*****', *****, *****);

$insert_query = $dbc->prepare('INSERT INTO members(name, gender, email, pass)   
VALUES(:name, :gender, :email, :pass) WHERE email = :email LIMIT 1');

$insert_query->execute(array(':name' => $name, ':gender' =>    
$gender, ':email' => $email,  ':pass' => $pass)); 
```

但是，当用户提交注册表单时，什么也没有发生。我尝试回显`$gender, $name, $email`and `$pass`，它们都显示了正确的值。我是 PDO 的新手，我不确定问题可能是什么。这是某种语法错误，还是其他原因？

我没有收到任何错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T12:10:02.517

我不认为`LIMIT`在声明中包含一个子句是有效的`INSERT`。 [不在MySQL](http://dev.mysql.com/doc/refman/5.5/en/insert.html)[语法参考](http://dev.mysql.com/doc/refman/5.5/en/insert.html)`LIMIT`中的可选子句中。 [`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

您还有一个`WHERE`子句，该子句在语句中也是无效的`INSERT`。

我怀疑您没有打开错误报告，因为如果语句`prepare()`由于语法错误而失败，这应该是致命错误或引发异常。你会得到一个类似的错误

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“LIMIT 1”附近使用的正确语法

```
$insert_query = $dbc->prepare('INSERT INTO members(name, gender, email, pass)   
VALUES(:name, :gender, :email, :pass) WHERE email = :email LIMIT 1');
//------------------------------------^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

根据定义，一条语句插入的行数与您的 中的组^* for`INSERT`完全相同，因此无论如何都不需要 a 。您可以在语句中使用 a，但在这种情况下，is 组件的子句而不是.`()`^(`VALUES ()``LIMIT``LIMIT``INSERT INTO...SELECT...``LIMIT``SELECT``INSERT`)

^* *显然忽略潜在的键违规或其他插入问题*

`WHERE,LIMIT`您将语句中的多个组件 ( )混为一谈这一事实`UPDATE`让我想知道您是否真的打算将其作为一个`UPDATE`而不是一个`INSERT`语句开始。 `INSERT`仅适用于*新行*。 `UPDATE`用于更改现有行，并且两者`WHERE`和`LIMIT`在`UPDATE`.

那看起来像：

```
$upd_query = $dbc->prepare('UPDATE members SET name = :name, gender = :gender, email = :email, pass = :pass) WHERE email = :email LIMIT 1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:16:44.947

正如“迈克尔”所说，您不能`LIMIT n`在`INSERT`查询中使用。

毕竟，您不能在准备好的语句中两次使用同名的命名参数标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T12:27:23.410

尝试切换到`UPDATE`查询语法。看起来是你需要的。

# c# - Northwind.sdf 的连接字符串

> ID：11922022
> 
> 赞同：0
> 
> 时间：2012-08-12T12:06:19.153
> 
> 标签：c#, ado.net, sql-server-ce, connection-string

我正在使用 Visual Studio 2010 和 SQL Server 精简版 3.5 制作一个小型 Windows 应用程序。我想在我的应用程序中访问 Northwind.sdf 数据库，但我无法创建连接字符串。

当我尝试在调试模式下运行应用程序时，我已经在我的应用程序以及调试文件夹中复制了数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:41:12.627

好吧，你必须给我们更多的东西。首先，您是否尝试使用 SqlConnetion 或 SqlCeConnection 连接到数据库？其次，您确定路径或数据库正确吗？您也可以参考以下链接了解更多信息。

[Sql Compact 2008 连接字符串问题](https://stackoverflow.com/questions/2990620/sql-compact-2008-connection-string-problem)

[Sql 紧凑连接字符串](http://www.connectionstrings.com/sql-server-2005-ce)

如果您需要任何进一步的帮助，请尝试发布您到目前为止所做的代码。

# android - 在 ImageView 中显示存储在内部存储器中的图像？我究竟做错了什么？

> ID：11922023
> 
> 赞同：2
> 
> 时间：2012-08-12T12:06:56.250
> 
> 标签：android, uri, android-imageview, android-file

我首先以这种方式将图像存储在内部存储器中：

```
FileOutputStream fos = context.openFileOutput("myimage.png", Context.MODE_PRIVATE);
bitmap.compress(CompressFormat.PNG, 100, fos);
fos.close(); 
```

然后我以`ImageView`这种方式显示它：

```
File filepath = context.getFileStreamPath("myimage.png");
Uri uri = Uri.parse(filepath.toString());
myImageView.setImageUri(uri); 
```

但该图像从未出现在`ImageView`. `setImageBitmap()`由于某些限制，我不能在这里使用。谁能告诉我我哪里出错了？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:18:49.680

您可以尝试以下方法：

而不是`context.getFileStreamPath("myimage.png");`你可以尝试`Uri uri = Uri.parse(getFilesDir().getPath() + "/myimage.png");`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-05T06:19:31.507

```
BitmapDrawable bitmapDrawable = new BitmapDrawable(getResources(), getFileStreamPath("myimage.png").getAbsolutePath());

imageView.setImageDrawable(bitmapDrawable); 
```

或者

```
Bitmap b = BitmapFactory.decodeFile(getFileStreamPath("myimage.png").getAbsolutePath()); 
```

# javascript - HTML数组乘以javascript

> ID：11922026
> 
> 赞同：0
> 
> 时间：2012-08-12T12:07:45.650
> 
> 标签：javascript, html

HTML 代码

```
<input name="itemCode[]" value="" class="tInput" id="itemCode" tabindex="1"/> </td>
<input name="itemDesc[]" value="" class="tInput" id="itemDesc"  readonly="readonly" /></td>
<input name="itemQty[]" value="" class="tInput" id="itemQty" tabindex="2" onchange="multiply(this)"/></td>
<input name="itemPrice[]" value="" class="tInput" id="itemPrice" readonly="readonly" /> </td> 
```

Javascript代码

```
function multiply(el) {
   var i= el.value * document.getElementById('itemPrice').value;
   document.getElementById('itemPrice').value =i;
} 
```

问题是这样的：表中的第一行正确相乘，但第二行不起作用....请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:15:00.643

问题是您无法`itemXxxxx`单独正确识别行。最好使用一些 id 来识别您所指的“行”。

例如（对于*每一*行，在这种情况下为第 23 行/项目）：

```
<input id="price23" .....>
<input id="qty23" ......>
<input id="total23" onchange="calc(23);" ...> 
```

功能`calc(id)`是：

```
function calc(id)
{

     var p = document.getElementById("price"+id).value;
     var q = document.getElementById("qty"+id).value;
     document.getElementById("total"+id).value = p * q;
} 
```

从某些服务器端代码中注入行号很容易。

编辑：另一种选择是使用 JQuery 在父母和兄弟姐妹之间进行一些 DOM 遍历以获得所需的值。

# c# - 将图像添加到 C# DataGridView

> ID：11922038
> 
> 赞同：1
> 
> 时间：2012-08-12T12:10:08.897
> 
> 标签：c#, datagridview

> 据我所知，DataGridView 控件及其相关类旨在成为一个灵活、可扩展的系统，用于显示和编辑表格数据。我们可以在DataGridView的一列中添加一个Image控件。设置列 Image 属性会导致该列中的所有单元格默认显示该图像。以下 C# 程序展示了如何在 DataGridView 控件的列中添加图像。

谁能给我一个将图像添加到 C# DataGridView 的示例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T12:11:49.287

希望这会有所帮助

```
private void button1_Click(object sender, EventArgs e)
{
    dataGridView1.ColumnCount = 3;
    dataGridView1.Columns[0].Name = "Product ID";
    dataGridView1.Columns[1].Name = "Product Name";
    dataGridView1.Columns[2].Name = "Product Price";

    string[] row = new string[] { "1", "Product 1", "1000" };
    dataGridView1.Rows.Add(row);
    row = new string[] { "2", "Product 2", "2000" };
    dataGridView1.Rows.Add(row);
    row = new string[] { "3", "Product 3", "3000" };
    dataGridView1.Rows.Add(row);
    row = new string[] { "4", "Product 4", "4000" };
    dataGridView1.Rows.Add(row);

    DataGridViewImageColumn img = new DataGridViewImageColumn();
    Image image = Image.FromFile("Image Path");
    img.Image = image;
    dataGridView1.Columns.Add(img);
    img.HeaderText = "Image";
    img.Name = "img";

} 
```

# backbone.js - 隧道式单页应用程序（例如 Backbone）

> ID：11922039
> 
> 赞同：0
> 
> 时间：2012-08-12T12:10:16.403
> 
> 标签：backbone.js, request

我想知道是否可以嵌套/隧道 javascript 呈现的站点。

我的意思是具体的：

我有一个站点 bugs.example.org，它提供基于主干路由器、视图和模型的错误跟踪器应用程序。

在 bugs.example.org/#/mybugs 上，我们可以列出所有的错误。

现在我有例如第二个项目worksuite.example.org。该项目提供路线图、演示文稿等。不幸的是，该工作套件应用程序不提供独立的错误跟踪器。相反，它与 bugs.example.org 建立了合资企业。现在 worksuite.example.org 希望在自己的应用程序中包含/嵌套 bugtracker 视图。

这可能看起来像：worksuite 客户端调用 worksuite.example.org/#/bugs 现在 worksuite 应用程序调用 GET 到 bugs.example.org/#/mybugs 并执行 $el.html(requestedContent)。这行得通吗？

另一个*可以*类似工作的应用程序，我知道是谷歌验证码服务，你用一些 js 嵌套

这种行为有关键字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:22:50.400

根据主干应用程序的架构情况，您可以让 worksuite.example.org 只提取所有 bugs.example.org 的 JS 文件，但使用它自己的基本 html/css：

```
<!-- on bugs.example.org -->
<script src="mybackbonestuff.js"></script>
<link href="mycss.css"></link>

<!-- on worksuite.example.org -->
<script src="http://bugs.example.org/mybackbonestuff.js"></script>
<link href="worksuite.css"></link> 
```

# c# - C# WPF 中的调用目标引发了异常

> ID：11922041
> 
> 赞同：0
> 
> 时间：2012-08-12T12:10:18.133
> 
> 标签：c#, wpf, multithreading, visual-studio-2008, exception

我正在用 C# VS2008 编写一个多线程应用程序。我使用此代码更改使用另一个线程创建的元素：

```
 m_OwnerPump.Dispatcher.Invoke(
              System.Windows.Threading.DispatcherPriority.Normal,
              new Action(
              delegate()
              {
                  m_OwnerPump.Name = textBoxPumpName.Text;
                  m_OwnerPump.Numbers = numbers.ToArray<string>();
                  //m_OwnerPump.City = tempInfo.City;
                  m_OwnerPump.EnergyConsumed = power;
              })); 
```

它曾经和平地工作，但我不知道为什么突然抛出这个异常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:17:41.587

我只是玩弄代码，终于找到了问题。我不知道确切的原因是什么，但它现在正在工作。

问题是在调用程序中请求另一个控件的属性，所以我将属性值放在一个字符串中并在调用程序中使用它，最终的代码片段是：

```
 string pname = textBoxPumpName.Text;
            m_OwnerPump.Dispatcher.Invoke(
              System.Windows.Threading.DispatcherPriority.Normal,
              new Action(
              delegate()
              {
                  m_OwnerPump.Name = pname;
                  m_OwnerPump.Numbers = numbers.ToArray<string>();
                  m_OwnerPump.EnergyConsumed = power;
              })); 
```

# database - 什么是“caHide, caNone”数据库等价物？

> ID：11922043
> 
> 赞同：1
> 
> 时间：2012-08-12T12:10:44.170
> 
> 标签：database, delphi

当我想确认表单退出时，我使用`DialogMsg`带有 if 的调用将`Action`参数设置为`caNone`(No) 或`caHide`(yes)。

当我将这种方法与数据库表行发布一起使用时，我遇到了一个问题。

如果我使用确认对话框创建一个保存按钮，我可以调用`Post`or `Cancel`，但是当我在表单中有一个数据库`Grid`时，当用户更改一行并稍后选择另一行时，问题就出现了，女巫会自动保存前一行。

我找到的解决方案是把保存确认对话框放在里面`OnBeforePost`，但是如果用户说不，我应该如何取消`Post`命令继续？我已经尝试过`Cancel`命令`Abort`，但它会继续保存该行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:00:52.960

您需要创建自己的后代（或您正在使用的其他数据集类型）`TMyQuery`。`TXxxQuery`并在您的类中覆盖`Post`方法并添加一个新事件，允许决定是否`Post`需要。然后注册新组件并`TXxxQuery`在您的应用程序中替换为`TMyQuery`. 并创建事件处理程序。

例如，`TMyQuery`：

```
interface

type
  TMyAllowPostEvent = procedure (ASender: TDataSet; var AAllow: Boolean) of object;
  TMyQuery = class (TXxxQuery)
  private
    FOnAllowPost: TMyAllowPostEvent;
  public
    procedure Post; override;
  published
    property OnAllowPost: TMyAllowPostEvent read FOnAllowPost write FOnAllowPost;
  end;

implementation

procedure TMyQuery.Post;
var
  lAllow: Boolean;
begin
  lAllow := True;
  if Assigned(OnAllowPost) then
    OnAllowPost(Self, lAllow);
  if lAllow then
    inherited Post;
end; 
```

以及事件处理程序的示例：

```
procedure TForm1.MyQuery1AllowPost(ASender: TDataSet; var AAllow: Boolean);
begin
  AAllow := MessageDlg('Would you like to save changes ?', mtConfirmation, mbYesNo, -1) = mrYes;
end; 
```

# android - Android 加速度计类

> ID：11922045
> 
> 赞同：2
> 
> 时间：2012-08-12T12:10:56.200
> 
> 标签：android, class, accelerometer

我尝试创建单独的加速度计类来保存加速度计的值，并且我可以随时从任何其他类中访问它们，但它似乎不起作用。

这是我的加速度计课程：

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;

public class Accelero implements SensorEventListener {

    private float xAxis;
    private float yAxis;
    private float zAxis;

    public float getX(){
        return this.xAxis;
    }

    public float getY(){
        return this.yAxis;
    }

    public float getZ(){
        return this.zAxis;
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    public void onSensorChanged(SensorEvent event) {
            xAxis = event.values[0];
            yAxis = event.values[1];
            zAxis = event.values[2];
    }

} 
```

如您所见，我正在尝试通过`get*();`我创建的方法获取值。但似乎总是要回来`0, 0, 0`。知道我的代码有什么问题吗？

这是使用它的活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.EditText;

public class MainActivity extends Activity {

    private EditText output;
    private static int DIS = 1;
    Accelero acc;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        output =(EditText) findViewById(R.id.editText1);
        handler.sendEmptyMessageDelayed(DIS, 1);
        acc = new Accelero(this);

    }

    private Handler handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            if (msg.what == DIS){
                refresh();
                handler.sendEmptyMessageDelayed(DIS, 1);     
            }
        }
    };

    public void refresh(){
        output.setText("X:"+acc.getX()+"\nY:"+acc.getY()+"\nZ:"+acc.getZ());
    }
} 
```

我在清单中也有这个前提：

```
<uses-feature android:name="android.hardware.sensor.accelerometer" android:required="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:18:29.243

您需要在活动中将传感器侦听器注册到传感器管理器

```
public class Main extends Activity implements SensorEventListener {
    private float mLastX, mLastY, mLastZ;
    private boolean mInitialized;

    private SensorManager mSensorManager;

    private Sensor mAccelerometer;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mSensorManager.registerListener(new Accelero(), mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    }
} 
```

有关详细教程，请参见[此处](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)（代码取自本教程）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:26:13.490

您必须注册您正在使用的传感器，在本例中为加速度计。我猜你想要所有与“Accelero”类中的加速度计相关的东西。

要从该类注册侦听器，您必须传递对您的活动的引用。所以你的构造函数应该是这样的：

```
SensorManager manager;
Sensor accelerometer;
Activity foo;

public Accelero(Activity foo) {
    this.foo = foo;
    manager = (SensorManager) this.foo.getSystemService(Context.SENSOR_SERVICE);
    accelerometer = manager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
    manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
 } 
```

当您创建一个`Accelero`对象时，您只需将`this`其作为参数传递。

我希望这有帮助。

# delphi - 如何制作一个带有 Office XP 主题的列表框，如选择矩形？

> ID：11922047
> 
> 赞同：9
> 
> 时间：2012-08-12T12:11:43.047
> 
> 标签：delphi, delphi-xe

以 Office XP 样式显示焦点/选定列表框项目的最简单和干净的方法是什么？

请参阅此示例图像以更清晰地显示该想法：

![在此处输入图像描述](../Images/8f780e87ae905bd230420aec33065dc4.png)

我想我需要将 Listbox Style 设置为`lbOwnerDrawFixed`or`lbOwnerDrawVariable`然后修改 OnDrawItem 事件？

这就是我卡住的地方，我不确定要在那里写什么代码，到目前为止我尝试过：

```
procedure TForm1.ListBox1DrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
begin
  with (Control as TListBox).Canvas do
  begin
    if odSelected in State then
    begin
      Brush.Color := $00FCDDC0;
      Pen.Color   := $00FF9933;
      FillRect(Rect);
    end;

    TextOut(Rect.Left, Rect.Top, TListBox(Control).Items[Index]);
  end;
end; 
```

我应该知道那是行不通的，我会遇到各种时髦的事情：

![在此处输入图像描述](../Images/29719eb4304b303691ba4d9d7fabc368.png)

我做错了什么，更重要的是我需要改变什么才能让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T13:39:57.073

您忘记为不同状态绘制项目。您需要确定该项目当前处于什么状态并根据该状态绘制它。

您可以通过这种方式获得图片上的内容。但是，如果您启用了多选并选择了多个项目，这看起来不太好：

```
procedure TForm1.ListBox1DrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
var
  Offset: Integer;
begin
  with (Control as TListBox) do
  begin
    Canvas.Font.Color := Font.Color;
    if (odSelected in State) then
    begin
      Canvas.Pen.Color := $00FF9932;
      Canvas.Brush.Color := $00FDDDC0;
    end
    else
    begin
      Canvas.Pen.Color := Color;
      Canvas.Brush.Color := Color;
    end;
    Canvas.Rectangle(Rect);
    Canvas.Brush.Style := bsClear;
    Offset := (Rect.Bottom - Rect.Top - Canvas.TextHeight(Items[Index])) div 2;
    Canvas.TextOut(Rect.Left + Offset + 2, Rect.Top + Offset, Items[Index]);
  end;
end; 
```

结果`ItemHeight`设置为 16：

![在此处输入图像描述](../Images/55ac3692cd449976c767bf6f704cc306.png)

***奖金 - 连续选择：***

这是一个实现连续选择的棘手解决方案。原理是像以前一样绘制项目，然后根据上一个项目和下一个项目的选择状态，用一种颜色的线覆盖项目的边框顶部和底部线。除此之外，还必须在当前项目之外渲染，因为项目选择不会自然地调用要重新绘制的相邻项目。因此，水平线画在当前项目边界上方一个像素和一个像素下方（这些线的颜色也取决于相对选择状态）。

这里比较奇怪的是使用 item 对象来存储每个 item 的选中状态。我这样做是因为在使用拖放项目选择时，该[`Selected`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TCustomListBox.Selected)属性在您释放鼠标按钮之前不会返回真实状态。幸运的是，[`OnDrawItem`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TCustomListBox.OnDrawItem)事件当然会以真实状态触发，因此作为一种解决方法，我使用了从[`OnDrawItem`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TCustomListBox.OnDrawItem)事件中存储这些状态。

***重要的：***

请注意，我正在使用项目对象来存储实际的选择状态，所以要小心，当您将项目对象用于其他用途时，请将此实际状态存储到布尔数组中。

```
procedure TForm1.ListBox1DrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
const
  SelBackColor = $00FDDDC0;
  SelBorderColor = $00FF9932;
var
  Offset: Integer;
  ItemSelected: Boolean;
begin
  with (Control as TListBox) do
  begin
    Items.Objects[Index] := TObject((odSelected in State));    

    if (odSelected in State) then
    begin
      Canvas.Pen.Color := SelBorderColor;
      Canvas.Brush.Color := SelBackColor;
      Canvas.Rectangle(Rect);
    end
    else
    begin
      Canvas.Pen.Color := Color;
      Canvas.Brush.Color := Color;
      Canvas.Rectangle(Rect);   
    end;

    if MultiSelect then
    begin
      if (Index > 0) then
      begin
        ItemSelected := Boolean(ListBox1.Items.Objects[Index - 1]);
        if ItemSelected then
        begin
          if (odSelected in State) then
          begin
            Canvas.Pen.Color := SelBackColor;
            Canvas.MoveTo(Rect.Left + 1, Rect.Top);
            Canvas.LineTo(Rect.Right - 1, Rect.Top);
          end
          else
            Canvas.Pen.Color := SelBorderColor;
        end
        else
          Canvas.Pen.Color := Color;
        Canvas.MoveTo(Rect.Left + 1, Rect.Top - 1);
        Canvas.LineTo(Rect.Right - 1, Rect.Top - 1);
      end;

      if (Index < Items.Count - 1) then
      begin
        ItemSelected := Boolean(ListBox1.Items.Objects[Index + 1]);
        if ItemSelected then
        begin
          if (odSelected in State) then
          begin
            Canvas.Pen.Color := SelBackColor;
            Canvas.MoveTo(Rect.Left + 1, Rect.Bottom - 1);
            Canvas.LineTo(Rect.Right - 1, Rect.Bottom - 1);
          end
          else
            Canvas.Pen.Color := SelBorderColor;
        end
        else
          Canvas.Pen.Color := Color;
        Canvas.MoveTo(Rect.Left + 1, Rect.Bottom);
        Canvas.LineTo(Rect.Right - 1, Rect.Bottom);
      end;
    end;

    Offset := (Rect.Bottom - Rect.Top - Canvas.TextHeight(Items[Index])) div 2;
    Canvas.Brush.Style := bsClear;
    Canvas.Font.Color := Font.Color;
    Canvas.TextOut(Rect.Left + Offset + 2, Rect.Top + Offset, Items[Index]);
  end;
end; 
```

结果：

![在此处输入图像描述](../Images/41427992416e10ee57ba780a68cde3b5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T12:24:35.063

您需要查看传递给函数的 State 变量的值。这会告诉您是否选择了该项目，然后您可以适当地设置画笔和笔。

# c# - 光标返回最多 2 行

> ID：11922052
> 
> 赞同：0
> 
> 时间：2012-08-12T12:12:45.067
> 
> 标签：c#, .net, sqlite, android-activity, cursor

我正在检查以将我最喜欢的自己的 Promotions 对象放入数组中。我试图这样做（来自我的 PromotionsBDD 类，该类控制我的 SQLite 数据库中的表促销）：

```
public ArrayList<Promotion> getListPromotionsFavorites()
    {
        String[] columns = new String[] {"ID", "RATING", "TITLE", "COMPANY_ID","AVAILABLEDATE", "DESCRIPTION", "SETONFAVORITE"};

        Cursor objCursor = bdd.query(TABLE_PROMOTIONS, columns,"SETONFAVORITE = ?",new String[]{"true"},null,null,null,null);

        int id = objCursor.getColumnIndex("ID");
        int rating = objCursor.getColumnIndex("RATING");
        int title = objCursor.getColumnIndex("TITLE");
        int companyid = objCursor.getColumnIndex("COMPANY_ID");
        int availabledate = objCursor.getColumnIndex("AVAILABLEDATE");
        int description = objCursor.getColumnIndex("DESCRIPTION");
        int setonfavorite = objCursor.getColumnIndex("SETONFAVORITE");

        ArrayList<Promotion> promoFavoriteArray = new ArrayList<Promotion>();
        objCursor.moveToFirst();// position sur la première ligne

        if (objCursor != null) 
        {
            if (objCursor.isFirst())
            {
                do 
                {
                    String resultid = objCursor.getString(id);
                    String resultrating = objCursor.getString(rating);
                    String resultitle = objCursor.getString(title);
                    int resultcompanyid = objCursor.getInt(companyid);
                    String resultavailbledate = objCursor.getString(availabledate);
                    String resultdescription = objCursor.getString(description);
                    String resultsetonfavorite = objCursor.getString(setonfavorite);

                    Promotion promo = new Promotion(resultid, resultrating, resultitle, resultcompanyid,resultavailbledate,resultdescription, resultsetonfavorite);
                    promoFavoriteArray.add(promo);
                    objCursor.moveToNext();//positionnement sur le suivant
                }
                while(objCursor.isLast());
            }
        }
        objCursor.deactivate();
        objCursor.close();
    return promoFavoriteArray;
} 
```

它为我的 promoFavoriteArray 使用 1 或 2 个条目工作正常，但我将 3 个条目放入此数组，它返回一个 1 到 3 的数组。

编辑：我试过这个：

```
ArrayList<Promotion> promoFavoriteArray = new ArrayList<Promotion>();
            objCursor.moveToFirst();
            if(objCursor != null)
            {
                do 
                {
                        String resultid = objCursor.getString(id);
                        String resultrating = objCursor.getString(rating);
                        String resultitle = objCursor.getString(title);
                        int resultcompanyid = objCursor.getInt(companyid);
                        String resultavailbledate = objCursor.getString(availabledate);
                        String resultdescription = objCursor.getString(description);
                        String resultsetonfavorite = objCursor.getString(setonfavorite);

                        Promotion promo = new Promotion(resultid, resultrating, resultitle, resultcompanyid,resultavailbledate,resultdescription, resultsetonfavorite);
                        promoFavoriteArray.add(promo);
                        objCursor.moveToNext();//positionnement sur le suivant
                }
                while(!objCursor.isLast());
            }
        objCursor.deactivate();
        objCursor.close();
        return promoFavoriteArray; 
```

但我得到了 CursorIndexOutOfBoundException ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:49:47.390

这是执行此操作的方法：

```
ArrayList<Promotion> promoFavoriteArray = new ArrayList<Promotion>();
        boolean hasMore = objCursor.moveToFirst();

        while(hasMore)
        {
                String resultid = objCursor.getString(id);
                String resultrating = objCursor.getString(rating);
                String resultitle = objCursor.getString(title);
                int resultcompanyid = objCursor.getInt(companyid);
                String resultavailbledate = objCursor.getString(availabledate);
                String resultdescription = objCursor.getString(description);
                String resultsetonfavorite = objCursor.getString(setonfavorite);

                Promotion promo = new Promotion(resultid, resultrating, resultitle, resultcompanyid,resultavailbledate,
                        resultdescription, resultsetonfavorite);
                promoFavoriteArray.add(promo);
                hasMore = objCursor.moveToNext();
        }
    objCursor.deactivate();
    objCursor.close();
    return promoFavoriteArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:21:28.093

你正在做（伪代码）：

```
first
        add(current)
        next
    repeat if last 
```

如果有 2 个项目，添加后，next 使其成为索引 2，您循环并再次添加。你有两个项目，太好了。

如果您添加了 3 个项目，则它不是最后一个，因此不会再次循环。你最终得到一个。

相反，请尝试类似（您不需要 isFirst 检查并且您需要 while *not* last）：

```
if (objCursor == null)
    return array; // empty

objCursor.moveToFirst();
do
{
    // read data
    array.Add(promo);

} while (!objCursor.isLast()) 
```

# uiviewcontroller - 进入 UINavigationController 之前的欢迎屏幕（故事板）

> ID：11922061
> 
> 赞同：3
> 
> 时间：2012-08-12T12:14:14.157
> 
> 标签：uiviewcontroller, uinavigationcontroller, uinavigationbar, uistoryboard

我试图在我的故事板中添加一个欢迎屏幕。我的主要故事板由 UINavigationContoller 组成。

我已经将第一页设置为空的初始视图控制器，然后设置了一个按钮来推送到我的 UINavigation 控制器。为什么这不起作用？

当然，在 UINavigationController 之前必须有一个简单的页面。

编辑：

我应该在这个空视图控制器中添加我需要多个图像，并且我需要为它们设置动画，这样一个简单的初始屏幕图像就无法工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:20:50.310

我不知道这是否有帮助，因为它显示得很短但有效：在您的目标中，您可以设置一个图标，也可以设置一个加载屏幕或加载屏幕，如果您制作图像并将其放置在那里，它会在加载故事板时出现。我不确定这是否会有所帮助，但我不太擅长目标 c。祝你好运！

-乔南吉

# python - 尝试在 ec2 上部署 django 时出错

> ID：11922065
> 
> 赞同：2
> 
> 时间：2012-08-12T12:14:32.527
> 
> 标签：python, django, ubuntu, amazon-ec2

我正在尝试部署现在在 ec2 ubuntu 服务器上本地运行的 django。我在尝试运行 python mange.py runserver 时遇到了这个问题，我搜索似乎没有解决这个问题

```
Traceback (most recent call last):
File "manage.py", line 14, in <module>
  execute_manager(settings)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 459, in execute_manager
  utility.execute()
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
  self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 261, in fetch_command
  klass = load_command_class(app_name, subcommand)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 69, in load_command_class
  module = import_module('%s.management.commands.%s' % (app_name, name))
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
  __import__(name)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/management/commands/runserver.py", line 4, in <module>
  from django.core.management.commands.runserver import BaseRunserverCommand
File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 8, in <module>
  from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
File "/usr/local/lib/python2.7/dist-packages/django/core/servers/basehttp.py", line 28, in <module>
  from django.contrib.staticfiles import handlers
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/handlers.py", line 8, in <module>
  from django.contrib.staticfiles.views import serve
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/views.py", line 15, in <module>
  from django.contrib.staticfiles import finders
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/finders.py", line 11, in <module>
  from django.contrib.staticfiles.storage import AppStaticStorage
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/storage.py", line 10, in <module>
  from django.core.cache import (get_cache, InvalidCacheBackendError,
File "/usr/local/lib/python2.7/dist-packages/django/core/cache/__init__.py", line 187, in <module>
  cache = get_cache(DEFAULT_CACHE_ALIAS)
File "/usr/local/lib/python2.7/dist-packages/django/core/cache/__init__.py", line 172, in get_cache
  backend, location, params = parse_backend_conf(backend, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/core/cache/__init__.py", line 125, in parse_backend_conf
  backend = args.pop('BACKEND')
KeyError: 'BACKEND' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:42:11.607

在 Settings.py 中设置后端

# java - webview中的空指针异常

> ID：11922066
> 
> 赞同：1
> 
> 时间：2012-08-12T12:14:41.517
> 
> 标签：java, android, webview, nullpointerexception

我在`setJavaScriptEnabled(true)`设置为 true 的行中收到空指针异常。当我在我的应用程序中实现与唯一活动相同的程序时，我没有得到异常，但现在我正在使用来自另一个活动的意图并进入这个（谷歌）活动，我得到空指针异常。请告诉我哪里出错了。

```
public class Google extends Activity {
    /** Called when the activity is first created. */
    WebView mWebView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl("http://www.google.com");
        mWebView.setWebViewClient(new HelloWebViewClient());

    }

    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:27:00.290

您可能在这里设置了错误的布局..

```
setContentView(R.layout.main); // < ------ You might have set a wrong layout here. 
```

确保您的 WebView 是`main.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:21:54.103

尝试调试：

```
if (mWebView == null) { System.out.print("mWebView is null"); }
else if (mWebView.getSettings() == null) { System.out.print("Settings is null"); } 
```

大概

```
findViewById(R.id.webview) 
```

不会像您期望的那样返回 WebView。

# android - 发送 gcm 消息的错误请求

> ID：11922070
> 
> 赞同：3
> 
> 时间：2012-08-12T12:16:09.440
> 
> 标签：android, google-cloud-messaging

我正在尝试通过发送 gcm 消息`C#`。

我尝试了几次，但我`http:400-Bad request`在尝试以 json 方法发送它时得到了。

当我尝试以文本形式发送它时，我无法阅读它（rtl 语言） - 这就是我尝试的原因`JSON`。

有谁知道是什么问题？谢谢！

 ````
 private static string SendNotificationJson2(string id, string msg)
    {
            var AuthString = "AIzaSyDAtmaqSdutBQemqmd4dQgf33B_6ssbvXA";
            var RegistrationID = id;
            var Message = msg;

        //-- Create GCM request insted of C2DM Web Request Object --//
        HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");

        Request.Method = "POST";
        Request.KeepAlive = false;

        //-- Create Query String --//
        Dictionary<String, String> dict = new Dictionary<string, string>();
        dict.Add("registration_ids", RegistrationID);
        dict.Add("data", Message);
        dict.Add("collapse_key", "1");

        string postData = GetPostStringFrom(dict);
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        Request.ContentType = "application/json";
        Request.ContentLength = byteArray.Length;

        Request.Headers.Add("Authorization", "key=" + AuthString);

        //-- Delegate Modeling to Validate Server Certificate --//
        ServicePointManager.ServerCertificateValidationCallback += delegate(
                    object
                    sender,
                    System.Security.Cryptography.X509Certificates.X509Certificate
                    pCertificate,
                    System.Security.Cryptography.X509Certificates.X509Chain pChain,
                    System.Net.Security.SslPolicyErrors pSSLPolicyErrors)
        {
            return true;
        };

        //-- Create Stream to Write Byte Array --// 
        Stream dataStream = Request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        //-- Post a Message --//
        WebResponse Response = Request.GetResponse();
        HttpStatusCode ResponseCode = ((HttpWebResponse)Response).StatusCode;
        if (ResponseCode.Equals(HttpStatusCode.Unauthorized) || ResponseCode.Equals(HttpStatusCode.Forbidden))
        {
            return "Unauthorized - need new token";

        }
        else if (!ResponseCode.Equals(HttpStatusCode.OK))
        {
            return "Response from web service isn't OK";
            //Console.WriteLine("Response from web service not OK :");
            //Console.WriteLine(((HttpWebResponse)Response).StatusDescription);
        }

        StreamReader Reader = new StreamReader(Response.GetResponseStream());
        string responseLine = Reader.ReadLine();
        Reader.Close();

        return "ok";
    }

    private static string GetPostStringFrom(Dictionary<string,string> postFieldNameValue)
    {
        // return Newtonsoft.Json.JsonConvert.SerializeObject(postFieldNameValue);
        return "\"data\": {\"Message\": \"" +  postFieldNameValue["data"] + "\"},\"registration_ids\":[\"" +  postFieldNameValue["registration_ids"] + "\"]}";
    }</code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-02T08:44:41.820

您忘记了 Json 数据中的第一个括号

利用

```
return "{\"data\": {\"Message\": \"" +  postFieldNameValue["data"] + "\"},\"registration_ids\":[\"" +  postFieldNameValue["registration_ids"] + "\"]}"; 
```

代替

```
return "\"data\": {\"Message\": \"" +  postFieldNameValue["data"] + "\"},\"registration_ids\":[\"" +  postFieldNameValue["registration_ids"] + "\"]}"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:52:07.807

您的注册 ID 需要是 JSON 数组，因此请使用列表而不是单个字符串。`

# javascript - 矩阵，距离，javascript

> ID：11922072
> 
> 赞同：1
> 
> 时间：2012-08-12T12:16:16.353
> 
> 标签：javascript, arrays, matrix, distance

```
function getDistance(lat1, lat2, lon1, lon2){
    var R = 6371; //KM
    var d = Math.acos(Math.sin(lat1) * Math.sin(lat2) +
            Math.cos(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1)) * R
        return d    
};

var items = [[1,2],[3,4],[5,6]];
alert(items[0][0]); // 1​​

document.write(getDistance(items[0][0],items[1][1],items[1][2],items[2][2]));
document.write(getDistance(45,35,41,35)); 
```

为什么我不能在函数中调用我的数组元素（项）`getDistance`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:18:44.000

没有内部维度具有 key 的数组元素`[2]`。您的 3 个子数组都只有两个元素，因此它们的可用键只有`[0],[1]`.

因此，您无法访问不存在的元素，例如`items[1][2]`或`items[2][2]`当这些子数组的最后一个键分别为`items[1][1]`和时`items[2][1]`。

你测试`items[0][0]`了，但是看看当你尝试时会发生什么`items[2][2]`

```
var items = [[1,2],[3,4],[5,6]];
console.log(items[0][0]); // 1​​
console.log(items[2][2]); // undefined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:21:27.403

```
getDistance(, ... items[1][2], items[2][2]); 
```

`item[1]`数组或中没有第三个元素`items[2]`。

# c# - 如何将 c# 字符串传递给 delphi .dll PChar 类型？

> ID：11922074
> 
> 赞同：2
> 
> 时间：2012-08-12T12:16:26.960
> 
> 标签：c#, delphi, pinvoke, delphi-2006

所以我学会了在这种情况下使用 IntPtr，

-delphi（delphi 2006版）代码

```
 function GetRequestResult(out code:integer):PChar; stdcall;
   begin
    LogMessage('GetRequestResult');
    code:=requestCode;
    result:=PChar(RequestResult);
    LogMessage('GetRequestResult done');
   end; 
```

然后，为了在 c# 中使用，我使用了喜欢，

```
IntPtr str = GetRequestResult(out code); 
string loginResult = Marshal.PtrToStringAnsi(str); 
```

这很好用。

那么，这个案子呢？

-德尔福代码

```
 procedure Login(login,password:PChar); stdcall;
...
... 
```

这个 PChar 在 () 里面。那么将字符串值传递给该 Login delphi 函数的确切方法是什么？

[DllImport ("ServerTool")]

1.  private static extern void Login([MarshalAs(UnmanagedType.LPStr)]string id, [MarshalAs(UnmanagedType.LPStr)]string pass);

2.  私有静态外部无效登录（IntPtr id，IntPtr pass）；// 这种情况下，后面如何使用这个 IntPtr？

3.  私有静态外部无效登录（字符串ID，字符串传递）；

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:57:43.417

您的选项 3 是执行此操作的正确方法。p/invoke marshaller 将一个C# 字符串映射到一个指向空终止字符数组的指针，即PChar。默认调用约定是stdcall，默认字符集是Ansi，所以你不需要指定这些。

您的选项 1 也有效，但不必要地冗长，因为您只是重新说明默认编组。选项 2 也可以工作，但您只会为自己创造额外的工作。一旦本机函数调用返回，您就有责任释放 IntPtr 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:00:48.550

您可以使用：Marshal.StringToHGlobalAnsi。[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtohglobalansi.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtohglobalansi.aspx)

# android - onbackpressed() 崩溃

> ID：11922075
> 
> 赞同：0
> 
> 时间：2012-08-12T12:16:43.650
> 
> 标签：android

我有这段代码，我想回到我以前的活动，我很困惑，因为我是 android 新手。请帮帮我，这是我的大学项目。这个应用程序在按钮触摸时播放声音，但现在我想回到我以前的主菜单活动。

```
ImageButton sol=(ImageButton)findViewById(R.id.e1);
sol.setOnClickListener(this);

ImageButton sol2=(ImageButton)findViewById(R.id.e2);
sol2.setOnClickListener(this);
}

/*protected void onResume()
{super.onResume();}*/

@Override
protected void onPause(){

    super.onPause();
    player.release();
    player=null;
    }

public void onClick(View v){

switch(v.getId()){
case R.id.e1:
    resId=R.raw.ambu;
    break;

case R.id.e2:
    resId=R.raw.pol;
    break;
}

if(player!=null)
    {player.release();}
player=MediaPlayer.create(this, resId);
player.start();}

public void onBackPressed(){
    Intent start = new Intent(emer.this,SprojectActivity.class);
     startActivity(start);
        finishActivity(0);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:19:20.500

我认为它崩溃是因为你没有检查你的方法`player`是否不在。尝试先检查，或发布您的 logcat。`null``onPause()``null`

# c# - 在 C# 中缩进未缩进代码的应用程序

> ID：11922079
> 
> 赞同：1
> 
> 时间：2012-08-12T12:17:08.307
> 
> 标签：c#, string, whitespace, indentation

我的应用程序应该读取一个**未缩进的****C# 代码**示例，然后以编程方式**缩进代码。**我这样做的方式可能不正确，但仍然可以取得部分结果。

 ****我可以在找到 a 时设置空格，`{`然后继续使用相同数量的空间来读取其余行。当再次`{`找到另一个时，添加空格并继续使用这个新的空间作为其余行。为此，这就是我所做的：

```
 private void btn_format_Click(object sender, EventArgs e)
    {
        string lineInfo = "";
        string fl = "";
        string ctab= char.ConvertFromUtf32(32)+char.ConvertFromUtf32(32)+char.ConvertFromUtf32(32);
        foreach (string line in txt_codepage.Lines) // text_codepage is a textbox with code
        {
            if (line.Contains("{"))
            {
                string l = line.Replace("{", ctab+"{");
                lineInfo = lineInfo + (l + "\n");
                fl = fl + ctab;
                ctab = ctab + ctab;
            }
            else
            {
                lineInfo = lineInfo + (char.ConvertFromUtf32(32)+fl+ line + "\n");
            } 
```

我可以达到我想要的正确缩进到这里。现在，当我找到一个`}`我应该做相反的过程但不幸的是，这是不可能的字符串。我的意思的相反过程是这样的：

```
 if (line.Contains("}"))
            {
                string l = line.Replace(ctab + "}", "}");
                lineInfo = lineInfo + (l + "\n");
                fl = fl - ctab;
                ctab = ctab - ctab;
            }
            else
            {
                lineInfo = lineInfo - (char.ConvertFromUtf32(32) + fl + line + "\n");

            }
        }
        MessageBox.Show(lineInfo.ToString()); 
```

我知道代码的上述部分是一个完整的错误，但让我知道如何以正确的方式实现它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:16:10.183

如果要解析字符串，则应使用 StringBuilder 代替字符串连接（连接会变慢）。我写了一些代码，来演示如何解析 CS 或其他代码。这不是一个完整的例子，只是一个基本概念。

如果您想了解有关解析器的更多信息，可以阅读[编译器：原理、技术和工具](https://rads.stackoverflow.com/amzn/click/com/0201100886)。

```
public static string IndentCSharpCode(string code)
{
    const string INDENT_STEP = "    ";

    if (string.IsNullOrWhiteSpace(code))
    {
        return code;
    }

    var result = new StringBuilder();
    var indent = string.Empty;
    var lineContent = false;
    var stringDefinition = false;

    for (var i = 0; i < code.Length; i++)
    {
        var ch = code[i];

        if (ch == '"' && !stringDefinition)
        {
            result.Append(ch);
            stringDefinition = true;
            continue;
        }

        if (ch == '"' && stringDefinition)
        {
            result.Append(ch);
            stringDefinition = false;
            continue;
        }

        if (stringDefinition)
        {
            result.Append(ch);
            continue;
        }

        if (ch == '{' && !stringDefinition)
        {
            if (lineContent)
            {
                result.AppendLine();
            }

            result.Append(indent).Append("{");

            if (lineContent)
            {
                result.AppendLine();
            }

            indent += INDENT_STEP;
            lineContent = false;

            continue;
        }

        if (ch == '}' && !stringDefinition)
        {
            if (indent.Length != 0)
            {
                indent = indent.Substring(0, indent.Length - INDENT_STEP.Length);
            }

            if (lineContent)
            {
                result.AppendLine();
            }

            result.Append(indent).Append("}");

            if (lineContent)
            {
                result.AppendLine();
            }

            lineContent = false;

            continue;
        }

        if (ch == '\r')
        {
            continue;
        }

        if ((ch == ' ' || ch == '\t') && !lineContent)
        {
            continue;
        }

        if (ch == '\n')
        {
            lineContent = false;
            result.AppendLine();

            continue;
        }

        if (!lineContent)
        {
            result.Append(indent);
            lineContent = true;
        }

        result.Append(ch);
    }

    return result.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:57:37.963

你可以去看看[codemaid](http://www.codemaid.net/)，一个用于清理代码的开源 VS 插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:41:58.910

使用 String.Trim() 从行中删除所有空格，然后仅添加所需的选项卡。此外，如果您可以避免使用 char.ConvertFromUtf32(32)，您的代码将更具可读性 - 为什么要写它而不是 " " 或 ' '？****

# iphone - 在iphone中的特殊字符后剪切nsstring

> ID：11922081
> 
> 赞同：3
> 
> 时间：2012-08-12T12:17:14.157
> 
> 标签：iphone, ios, ipad, nsstring

我是 iPhone 的新手，我想在一个特殊字符之后剪切一个字符串，让我们以这个例子 "works.php" 为例，我想从这个字符串中删除 ".php" 意味着我想删除 "." 之后的内容。这样做的代码是什么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T12:21:39.323

看来您想[使用`-stringByDeletingPathExtension`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html).

```
[@"works.php" stringByDeletingPathExtension]   // becomes @"works". 
```

请注意，此方法会删除路径扩展名，这与“删除点后的内容”并不完全相同。请阅读我上面链接的参考资料以获取详细信息。

如果真的只需要去掉最后一个点之后的字符串，就用常规算法（1）找到最后一个点（2）得到一个子串直到最后一个点：

```
NSString* input = @"works.php";
NSRange lastDotRange = [input rangeOfString:@"." options:NSBackwardsSearch];
if (lastDotRange.location != NSNotFound) {
    return [input substringToIndex:lastDotRange.location];
} else {
    return input;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T12:21:57.317

对于特定示例，您可以使用：

```
- (NSString *)stringByDeletingPathExtension 
```

做你想做的更一般的方法是：

```
NSString *originalString = @"works.php";  
NSString *finalString = 
[[originalString componentsSeparatedByString:@"."] objectAtIndex: 0]; 
```

您可以将点字符替换为您想要的任何字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T12:33:40.150

您可以使用：

```
myString = @"anything.php";
myString = [myString stringByReplacingOccurrencesOfString:@".php" withString:@""]; 
```

这样做的好处是您可以放置​​任何要删除的内容，而不仅仅是路径。例如：

```
myString = @"anything-123";
myString = [myString stringByReplacingOccurrencesOfString:@"-123" withString:@""]; 
```

另一种方法是`NSRange`，`substringWithRange`如果您想要其他删除选项..

# javascript - jQuery .html(' ') 在 FF 和 Opera 中不起作用

> ID：11922082
> 
> 赞同：3
> 
> 时间：2012-08-12T12:17:22.207
> 
> 标签：javascript, jquery, html, firefox

这条线

```
jq("#description" + tourId).html('<b>Opis: </b>  '+ data); 
```

在 IE、Firefox 和 Opera 中运行良好。

但是这个

```
jq("#images" + tourId).html('<img src=\"img\\gbflag.png\"/>'); 
```

仅适用于 IE。Firefox 和 Opera 不显示图像。你知道为什么吗？

这是我的代码的其余部分：

```
<script type="text/javascript">
var jq = jQuery.noConflict();
function showImages(tourId) {
    jq(function() {
        jq.post("/TourWebSpring/tourImages.html",
            {tourId: tourId},
        function(data) {
            ...
            ...
            jq("#images" + tourId).html('<img src=\"img\\gbflag.png\"/>');
        });
    });
}

function showDetails(tourId) {
    jq(function() {
        jq.post("/TourWebSpring/tourDetail.html",
            {tourId: tourId},
        function(data) {
            ... 
            jq("#description" + tourId).html('<b>Opis: </b>  '+ data);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T12:20:24.557

我相信问题可能是您在`img`目录后使用了错误的斜杠，并且我认为您不需要转义双引号，因为您使用单引号定义字符串。尝试：

```
jq("#images" + tourId).html('<img src="img/gbflag.png"/>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:21:25.620

```
jq("#images" + tourId).html('<img src=\"img\\gbflag.png\"/>'); 
```

应该

```
jq("#images" + tourId).html('<img src="img/gbflag.png" />'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T12:20:31.733

你不必逃避，所以它应该是：

```
jq("#images" + tourId).html('<img src="img\gbflag.png"/>'); 
```

**更新**

哎呀，没有注意到你正在使用反斜杠..斯科特很好地指出了这一点！

# c++ - 在 Windows 上开始分配失败之前检测内存不足

> ID：11922085
> 
> 赞同：5
> 
> 时间：2012-08-12T12:18:17.173
> 
> 标签：c++, windows, memory-management, mfc

我们有一个应用程序可能会分配大量小对象（取决于用户输入）。有时应用程序会耗尽内存并有效地崩溃。

但是，如果我们知道内存分配变得紧张，那么就会有一些优先级较低的对象可能被销毁，从而使我们能够优雅地降低用户结果。

在调用“new”实际失败之前检测进程内存不足的最佳方法是什么？我们可以调用 API 函数`GetProcessWorkingSetSize()`，`GetProcessMemoryInfo()`但是您如何知道何时达到给定机器的限制（例如，最大分配的 80%）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T14:21:46.477

*   在启动时，分配一个内存储备。
*   然后使用 set_new_handler() 安装一个检测分配失败的钩子。
*   当一种情况发生时：
    *   释放储备（这样你就有足够的可用内存来使用）。
    *   运行查找并释放低优先级对象的代码。
    *   当它完成它的工作时，尝试再次重新分配储备（下一次）。
    *   最后返回让原来的分配尝试重试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T12:45:36.767

如果它是 32 位进程，那么您需要确保使用的内存不超过 1.6GB，即 2.0GB 的 80%，即您的进程所允许的最大值。调用`GlobalMemoryStatusEx`将填写 struct `MEMORYSTATUSEX.ullAvailVirtual`，当这只有 400MB 可用（或更少）时，您就处于阈值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:29:00.723

检查这个答案[Win32/MFC: How to find free memory (RAM) available?](https://stackoverflow.com/questions/2522943/win32-mfc-how-to-find-free-memory-ram-available) .

您需要定期查找可用的空闲内存并在某个限制处停止分配。如上面提到的答案所述，您可以使用`GlobalMemoryStatusEx`, 和/或 `VirtualQueryEx`.

# .htaccess - 在 .htaccess 中设置和使用 owne 变量

> ID：11922089
> 
> 赞同：1
> 
> 时间：2012-08-12T12:18:56.153
> 
> 标签：.htaccess, variables, mod-rewrite, global-variables

我像这样在 .htaccess 中设置变量

```
SetEnv clubhub_path clubhub-ui 
```

我可以用 php 在 php 中访问它

```
$_SERVER['clubhub_path]; 
```

但我想在 Rewrite Cond 的 .htaccess 中使用它

```
RewriteCond %{REQUEST_URI} ^(?!/%{SERVER:clubhub_path}/media/).+ [NC] 
```

我在某个地方发现了 this(%{SERVER:clubhub_path}) 应该可以工作，但它没有。我尝试了 {}、%、$ 的所有组合。没有成功...

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:23:27.403

`SetEnv`设置环境变量，所以它应该可用，`%{ENV:clubhub_path}`但我已经尝试过了，似乎没有工作。

但是，由于您可以使用 s 设置环境变量，`RewriteRule`因此可以这样编写：

```
RewriteRule ^ - [E=clubhub_path:clubhub-ui] 
```

此规则匹配每个 url，但不会将其重写为 anyting 只是设置将在`RewriteCond`s 中可用的环境变量，例如：

```
RewriteCond %{ENV:clubhub_path} ^clubhub-ui$ 
```

一旦它进入 php，这应该看起来完全一样。（在`$_SERVER`超全局中，或`getenv()`）

## 更新

但是，您仍然无法`%{ENV:variable}`在`RewriteCond`. 我认为如果您使用的是 apache 2.4 并且可以使用[ap_expr](http://httpd.apache.org/docs/2.4/expr.html)

```
RewriteCond expr "! '%{REQUEST_URI}' -strcmatch '/%{ENV:clubhub_path}/media/*'" 
```

在我的测试环境中，这似乎在做你想做的事（'/clubhub-ui/media' urls 上的负匹配，但 apache2.4 仍然很新，如果你不是自己，你可能无法安装它托管。

也许[带有`prg`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#prg)参数和脚本的 RewriteMap 可以实现您的想法。

# php - 删除 ?img= 后的斜线

> ID：11922094
> 
> 赞同：1
> 
> 时间：2012-08-12T12:19:26.097
> 
> 标签：php

我有这个代码

```
<html>
<body background="http://newevolutiondesigns.com/images/freebies/abstract-background-22.jpg">
<br><br><br><br><br>
<DIV align="center">
<?php
$img = $_GET["img"];
?>
<?php
if($img=="") { echo ""; } else { echo "<img src='" . $img . "' />"; } ?>
<br>
</body></html> 
```

我将其用于屏幕快照，因此当我尝试查看带有它的图片时，`http://imagesnappper.co.cc/Images?img=`它会自动添加一个`/`之后`?img=` ，就像`http://imagesnappper.co.cc/Images?img=/8kd6lx.jpg`它不会显示图像如何删除该斜线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:22:27.100

尝试使用...

```
$img = ltrim($img, "/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:21:50.087

有很多方法，但想到的最简单和最讨厌的是[substr](http://php.net/manual/en/function.substr.php) ()：

```
$img=substr($_GET[img], 1); 
```

# css - CSS3：在填充元素中定位

> ID：11922097
> 
> 赞同：0
> 
> 时间：2012-08-12T12:19:43.603
> 
> 标签：css, positioning

这里给出了 JSfiddle[配方](http://jsfiddle.net/8xPay/2/)的链接。我想将设置为**#imgLine**的垂直线固定在底部作为UL 之间的分隔符。**我想将带圆圈的复选标记图像向右移动，在.rec**类中设置左侧或向左填充正在移动底线，我不知道该怎么做。期望的输出是将行固定在底部，我可以将内容向左移动。

谢谢

# hbase - 用于获取选择性数据的 Hbase REST Web 服务

> ID：11922105
> 
> 赞同：0
> 
> 时间：2012-08-12T12:21:13.777
> 
> 标签：hbase

我正在使用 H Base REST 将 H 基表公开为 Web 服务（Restful）。现在我正在使用 SAX 解析器解析此响应，因为由于大数据处理，XML 预计会很大。这是正确的方法吗。但是假设如果我不想要所有数据我只想要选择性数据怎么办？使用它，我们从 h-base 表中获取所有数据。假设我想要基于某些标准的数据，例如基于使用 rid 的表中的所有数据。我不知道该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:59:13.000

您可以使用 POP_HBase API 并查看其中的教程。

# java - JDBC mysql meta.getExportedKeys() 返回空结果集

> ID：11922116
> 
> 赞同：1
> 
> 时间：2012-08-12T12:21:48.350
> 
> 标签：java, mysql, jdbc

嗨，我正在尝试获取给定表的外键，我正在使用以下代码：

```
ResultSet rs = meta.getImportedKeys(_con.getCatalog(), null, _tableName);
        while (rs.next())
        {
            //get the foreignKeys
        }
ResultSet rs2 = meta.getExportedKeys(_con.getCatalog(), null, _tableName);
        while (rs2.next())
        {
            //get the foreignKeys
        } 
```

resultSet 是空的，虽然该表包含一个外键并且是另一个表的外键，

工作`getImportedKeys`正常。

感谢您的任何建议。

表：

```
CREATE TABLE `COMMANDE` (
  `COMMANDE_ID` int(11) NOT NULL,
  `CLIENT_ID` int(100) DEFAULT NULL,
  `TOURNEE_ID` int(100) DEFAULT NULL,
  PRIMARY KEY (`COMMANDE_ID`),
  KEY `CLIENT_ID` (`CLIENT_ID`),
  KEY `TOURNEE_ID` (`TOURNEE_ID`),
  CONSTRAINT `commande_ibfk_1` FOREIGN KEY (`CLIENT_ID`) REFERENCES `CLIENT` (`CLIENT_ID`),
  CONSTRAINT `commande_ibfk_2` FOREIGN KEY (`TOURNEE_ID`) REFERENCES `TOURNEE` (`TOURNEE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `CLIENT` (
  `CLIENT_ID` int(100) NOT NULL,
  `LIBELLE` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`CLIENT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我尝试了两个表的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:14:59.137

我认为问题在于 JDBC 中方法的相当奇怪的命名，以及难以理解的描述。

要获取表的主键，您应该使用[`getPrimaryKeys()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getPrimaryKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29), 来获取表的外键（以及它们引用的主键），使用[`getImportedKeys()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getImportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

还有一些额外的方法——[`getExportedKeys()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getExportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)暴露引用指定表的外键（所以 table 参数用**主键**指定表）——[`getCrossReference()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getCrossReference%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)是以上所有方法的组合：你需要在约束的两边指定表

# forms - 从 CakePHP 表单中的时间字段获取分钟？

> ID：11922121
> 
> 赞同：0
> 
> 时间：2012-08-12T12:22:02.583
> 
> 标签：forms, cakephp, cakephp-2.0

我正在使用 CakePHP 构建一个综合格斗 (MMA) 网站。我有一个表格来添加匹配项，其中一个字段是回合长度，以分钟为单位，我将其作为`TIME`值存储在我的数据库中。

在我的表单中，我只希望值的分钟部分可编辑。我尝试使用名称创建一个字段`Match.rounds_length`并将类型设置为`number`，但无法让它填充该`minutes`值。

这是我目前拥有的：

```
$this->Form->input('Match.rounds_length' => array('type' => 'time')); 
```

我确实在 CakePHP 在线文档中找到了这个页面：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/form.html#field-naming-conventions](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#field-naming-conventions)。但我似乎无法让它在我的设置中工作。

熟悉 CakePHP 的人能否告诉我如何创建一个开放的文本字段，用户可以指定一轮应该持续的分钟数，然后将其作为时间值保存在我的数据库中，并在我的编辑表单中正确填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:05:59.580

我尝试了以下。它奏效了。

```
echo date('i', strtotime('00:05:00')); 
```

[date() 格式说明符列表](http://php.net/manual/en/function.date.php)将帮助您实现与您在问题中提到的相同。

请询问它是否不适合您。

# c++ - 编译错误 - 必须定义目标架构

> ID：11922123
> 
> 赞同：0
> 
> 时间：2012-08-12T12:22:19.360
> 
> 标签：c++, visual-studio-2008, architecture, compilation

我有一个与 windows vista 一起使用的项目，现在我正在尝试在 win 7 上编译该项目。我收到编译错误：必须定义目标架构。

我查找了这个错误，发现我需要更改高级项目属性中的“为架构编译”。问题是我找不到这个选项。我正在使用 Visual Studio 2008。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:51:22.597

C/C++ 的编译结构如下：

```
///// Preproccessors ///// >  Object Files ///// >> Link with together and libraries //// >> executable file. 
```

当你改变拱门时，你应该`rebuild all`

# java - java的数据结构

> ID：11922129
> 
> 赞同：-5
> 
> 时间：2012-08-12T12:23:35.837
> 
> 标签：java, data-structures

在深入了解集合之后，我希望更多地使用 Java 探索数据结构，请告知哪本是使用 Java 探索数据结构的最佳书籍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:36:37.377

我想你可以喜欢这个：

Java 结构[http://www.cs.middlebury.edu/~schar/courses/cs201-s12/js/js.pdf](http://www.cs.middlebury.edu/~schar/courses/cs201-s12/js/js.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:41:44.417

这不是一个编程问题，但每个人都应该回答这种类型的问题：

**1：[http](http://shop.oreilly.com/product/9780596527754.do) ://shop.oreilly.com/product/9780596527754.do 2：我最喜欢的 Java Collections 书籍是：Thinking in Java** [Book Link：](http://mindview.net/Books/TIJ4/)

谢谢。

# php - 如何存储多个选定的值单个字段中的标签 我有一个带有多个 =“多个”的选择标签。并且用户可以选择多个值。 <select id="sel_aoi" name="aoi" multiple="multiple"><option value="hr-executive">人力资源主管</option> <option value="sr-manager">高级。 ID：11922130 赞同：1 时间：2012-08-12T12:23:39.207 标签：php, mysql, database, forms 回答 #1 赞同：6 时间：2012-08-12T12:34:45.427 将其存储到数组并使用逗号分隔将值保存到数据库。 <label for="aoi">Area of Interest:</label> <select id="sel_aoi" name="aoi[]" multiple="multiple"> <option value="hr-executive">HR Executives</option> <option value="sr-manager">Sr. Manager</option> <option value="service-advisor">Service Advisor</option> <option value="production">Production Engineer</option> <option value="mechanical">Mechanical Engineer</option> </select> 进程.php $aoi = implode(',', $_POST['aoi']); 回答 #2 赞同：1 时间：2012-08-12T12:26:30.277 当您从$_POST插入它们中获取值时，使用 mysql 插入多个值，如下所示： insert into myTable (someColumn, someOtherColumn) values (someValue1, someOtherValue1), (someValue2, someOtherValue2), (someValue3, someOtherValue3) 编辑：如果你想在一行中使用 PHP implode () 之类的东西： $qry="insert into mytable (someColumn) values (".implode(',',$myArray).") 并不是说您要确保该$myArray变量没有任何可能 SQJ 注入攻击您的数据库的内容。准备好的声明将是一个建议。 回答 #3 赞同：0 时间：2022-02-21T17:35:28.847 如果您的选项数量有限，您还可以尝试为数据库中的每个选项创建单独的列，而不是将它们保存在以逗号分隔的单个字段中。 例如 interest_executive: Boolean interest_manager: Boolean interest_service_advisor: Boolean 否则，我会采用逗号分隔的方法。另一种方法是创建一个单独的表，并在 user_id 和 interest_name_id 之间建立外键关系。</option></select>

# css - Rails Haml element styling

> ID：11922131
> 
> 赞同：1
> 
> 时间：2012-08-12T12:24:11.447
> 
> 标签：css, ruby-on-rails, styles, haml

I have a custom style in my css for a background image I want to apply:

```
.specialbg {

 background-image: url('http://i.imgur.com/XMuKF.jpg') no-repeat center center fixed;
 -webkit-background-size: cover;
 -moz-background-size: cover;
 -o-background-size: cover;
 background-size: cover;

 } 
```

I want to apply this style to my body element in HAML, but I'm not sure how the arguments are setup. I'm thinking that the following should work:

```
%html
 %head
  %body
   .specialbg 
```

But it doesn't. I've read the haml styling reference manual, but can't see where I'm wrong -- I've just adopted haml, and I'd appreciate any help or pointers!

**Stack Q's I've referenced:**

[scaml "illegal nesting" error](https://stackoverflow.com/questions/5918684/scaml-illegal-nesting-error)

[Background images do not render on Ruby on Rails application](https://stackoverflow.com/questions/11623251/background-images-do-not-render-on-ruby-on-rails-application)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:27:03.070

To add the class to your body element, you would just append the class to the tag like this:

```
%html
  %head
  %body.specialbg 
```

It could be a typo in your example, but the way your example is set up, you are putting your body tag *within* the head tag

If you put the `.specialbg` class on its own line, it will create a div inside of your body tag with `class='specialbg'`

# java - ECHONEST api 4 NULL 指针异常

> ID：11922132
> 
> 赞同：0
> 
> 时间：2012-08-12T12:24:11.623
> 
> 标签：java, api

下面是我的代码，我不明白“ECHONEST api 4 NULL 指针异常”的原因：

```
package com.main;

import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import  java.util.Map;
import com.echonest.api.v4.EchoNestAPI;
import com.echonest.api.v4.EchoNestException;
import com.echonest.api.v4.Track;
import com.echonest.api.v4.TrackAnalysis;

public class SongAnalysis {
    private static final String API_KEY = "14CPBOK0IFN0HRC0R";

    public String getTempo(String fileName){
        return null;
    }

    public static void main (String [] args)throws EchoNestException, IOException{

        EchoNestAPI echoNest = new EchoNestAPI(API_KEY);
        File file = new File("C:\\Users\\wooh\\workspace\\SongAnalysis\\songs\\b.mp3");
        Track track = echoNest.uploadTrack(file,false );
        track.waitForAnalysis(30000);
        TrackAnalysis a = track.getAnalysis();
        System.out.println("Tempo" + a.getTempo());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:09:10.380

您的 NPE 可能发生的情况是：

*   `echoNest`一片空白。
*   `track`一片空白。
*   `a`一片空白。

您需要查明发生的*具体*位置`NullPointerException`，然后确保在实例化对象时，返回所需的对象。

# java - NullPointerException 即使对象不为空

> ID：11922133
> 
> 赞同：0
> 
> 时间：2012-08-12T12:24:19.890
> 
> 标签：java, json, nullpointerexception

我正在开发一个应用程序，我正在使用 java 解码 JSON 响应。以下是我偶尔遇到 NullPointerException 的代码片段

```
JSONParser parser=new JSONParser();
URL url=new URL("http://api.yummly.com/v1/api/recipes?q="+
URLEncoder.encode(dish,"UTF-       8")+"&_app_id=APP_ID8&_app_key=APP_KEY");
HttpURLConnection conn=(HttpURLConnection)url.openConnection();
BufferedReader br=new BufferedReader(new InputStreamReader(conn.getInputStream()));
Object json=parser.parse(br);
JSONObject obj=(JSONObject)json;
if(obj!=null)
 count=(long)obj.get("totalMatchCount"); <--- Exception at this point 
```

此语句在循环中运行，并在随机迭代中给出 NullPointerException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:41:32.637

它告诉你 obj.get("totalMatchCount") 正在返回 null，并且在演员阵容中爆炸到很长。

就像是

```
Object countObj;
if(obj!=null) 
   countObj = obj.get("totalMatchCount");
if (countObj != null)
 count=(long)countObj 
```

现在为什么，是否以及是否应该为空，是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:27:02.197

`JSONObject#get`*如果对象不包含具有此名称的键，则*返回null。（javadoc）。所以很可能 Json 响应不包含 key `totalMatchCount`。

检查拼写，检查响应*是否应该*包含该键（以及它是否确实具有值）并检查实际响应是否确实具有该键（可能您收到一些错误响应或其他意外）。

使用调试器，捕获 NPE 并仔细检查 json 对象。

# haskell - 如何在函数式编程中增加变量？

> ID：11922134
> 
> 赞同：25
> 
> 时间：2012-08-12T12:24:26.100
> 
> 标签：haskell, functional-programming

如何在函数式编程语言中增加变量？

例如，我想做：

```
main :: IO ()
main = do
    let i = 0
    i = i + 1
    print i 
```

预期输出：

```
1 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-12T15:57:24.300

简单的方法是引入变量名的*阴影：*

```
main :: IO ()                  -- another way, simpler, specific to monads:
main = do                         main = do
    let i = 0                         let i = 0
    let j = i                         i <- return (i+1)
    let i = j+1                       print i
    print i                    -- because monadic bind is non-recursive 
```

打印`1`。

仅仅编写`let i = i+1`是行不通的，因为**`let`**在 Haskell 中进行*递归*定义——它实际上是 Scheme 的**`letrec`**. `i`右侧的是`let i = i+1`指`i`其左侧的 ——*而不是*`i`预期的上层。所以我们通过引入另一个变量来打破这个等式`j`。

另一种更简单的方法是 `<-`在`do`-notation 中使用一元绑定。这是可能的，因为一元绑定*不是*递归的。

在这两种情况下，我们都会以相同的名称引入*新*变量，从而“遮蔽”旧实体，即使其不再可访问。

## 如何*“思考功能”*

这里要理解的一件事是，具有纯的——*不可变的——值的函数***式**编程（就像我们在 Haskell 中一样）迫使我们在代码中**明确*时间。***

在命令式设置中，*时间*是隐含的。我们“改变”我们的变量——但任何改变都是*顺序*的。我们永远无法改变那个 var刚才的样子——只能***改变***从现在开始的***样子。***

 **在纯函数式编程中，这只是明确的。这可以采用的最简单的形式之一是使用值列表作为命令式编程***中顺序更改的记录。***更简单的是完全使用不同的变量来表示实体在不同时间点的不同值（参见[*单一赋值*](https://en.wikipedia.org/wiki/Assignment_(computer_science)#Single_assignment)和[*静态单一赋值形式*](https://en.wikipedia.org/wiki/Static_single_assignment_form)，或 SSA）。

因此，我们不是“改变”那些无论如何都无法真正改变的东西，而是制作它的增强副本，然后传递*它*，用它代替旧的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-12T16:53:30.460

作为一般规则，您不需要（而且您不需要）。但是，为了完整性。

```
import Data.IORef
main = do
    i <- newIORef 0       -- new IORef i
    modifyIORef i (+1)    -- increase it by 1
    readIORef i >>= print -- print it 
```

但是，任何说您需要使用 MVar、IORef、STRef 等的答案都是错误的。有一种纯粹的函数式方法可以做到这一点，在这个快速编写的小示例中，它看起来并不是很好。

```
import Control.Monad.State
type Lens a b = ((a -> b -> a), (a -> b))
setL = fst
getL = snd
modifyL :: Lens a b -> a -> (b -> b) -> a
modifyL lens x f = setL lens x (f (getL lens x))
lensComp :: Lens b c -> Lens a b -> Lens a c
lensComp (set1, get1) (set2, get2) =         -- Compose two lenses
    (\s x -> set2 s (set1 (get2 s) x)        -- Not needed here
     , get1 . get2)                          -- But added for completeness

(+=) :: (Num b) => Lens a b -> Lens a b -> State a ()
x += y = do
    s <- get
    put (modifyL x s (+ (getL y s)))

swap :: Lens a b -> Lens a b -> State a ()
swap x y = do
    s <- get
    let x' = getL x s
    let y' = getL y s
    put (setL y (setL x s y') x')

nFibs :: Int -> Int
nFibs n = evalState (nFibs_ n) (0,1)

nFibs_ :: Int -> State (Int,Int) Int
nFibs_ 0 = fmap snd get -- The second Int is our result
nFibs_ n = do
    x += y       -- Add y to x
    swap x y     -- Swap them
    nFibs_ (n-1) -- Repeat
  where x = ((\(x,y) x' -> (x', y)), fst)
        y = ((\(x,y) y' -> (x, y')), snd) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T12:24:26.100

有几种解决方案可以将命令式`i=i+1`编程转换为函数式编程。递归函数解决方案是函数式编程中推荐的方式，创建状态几乎不是您想要做的。

一段时间后，您将了解到，`[1..]`如果您需要索引，则可以使用它，但需要大量时间和练习才能以功能性而非命令性方式思考。

这是另一种执行类似操作的方法，`i=i+1`因为没有任何破坏性更新。请注意，State monad 示例仅用于说明，您可能想要`[1..]`：

```
module Count where
import Control.Monad.State

count :: Int -> Int
count c = c+1

count' :: State Int Int
count' = do
    c <- get
    put (c+1)
    return (c+1)

main :: IO ()
main = do
            -- purely functional, value-modifying (state-passing) way:
    print $ count . count . count . count . count . count $ 0
            -- purely functional, State Monad way
    print $ (`evalState` 0) $ do { 
            count' ; count' ; count' ; count' ; count' ; count' } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-29T01:16:20.517

注意：这不是一个理想的答案，但是嘿，有时提供任何东西可能有点好。

增加变量的简单函数就足够了。

例如：

```
incVal :: Integer -> Integer
incVal x = x + 1

main::IO()
main = do
   let i  = 1
   print (incVal i) 
```

甚至是一个匿名函数来做到这一点。**

# python - SqlAlchemy，AttributeError：“元组”对象没有属性“foreign_keys”

> ID：11922138
> 
> 赞同：10
> 
> 时间：2012-08-12T12:24:44.893
> 
> 标签：python, sqlalchemy

我有以下模型来描述我的数据库架构：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String, ForeignKey
from sqlalchemy.orm import relationship, backref
import sqlalchemy.dialects.mysql as mysql

Base = declarative_base()

class Country(Base):
    __tablename__ = 'countries'
    __table_args__ = {  
        'mysql_engine': 'InnoDB',  
        'mysql_charset': 'utf8'  
    }   

    id = Column(mysql.TINYINT(unsigned=True), primary_key=True)
    name = Column(mysql.VARCHAR(30), nullable=False)
    competitions = relationship('Competition', backref='country')

class Competition(Base):
    __tablename__ = 'competitions'
    __table_args__ = {  
        'mysql_engine': 'InnoDB',  
        'mysql_charset': 'utf8'  
    }   

    id = Column(mysql.INTEGER(unsigned=True), primary_key=True)
    name = Column(mysql.VARCHAR(30), nullable=False)
    country_id = Column(mysql.TINYINT(unsigned=True), ForeignKey('countries.id'))
    teams = relationship('Team', backref("competition") )

class Team(Base):
    __tablename__ = 'teams'
    __table_args__ = {  
        'mysql_engine': 'InnoDB',  
        'mysql_charset': 'utf8'  
    }   

    id = Column(mysql.INTEGER(unsigned=True), primary_key=True)
    name = Column(mysql.VARCHAR(30), nullable=False)
    competition_id = Column(mysql.INTEGER(unsigned=True), ForeignKey('competitions.id'), nullable=False) 
```

当我尝试创建一个团队时：

```
team = Team() 
```

在上面的命令之后，我得到以下回溯：

```
Traceback (most recent call last):
  File "/home/giorgos/apps/Aptana_Studio_3/plugins/org.python.pydev_2.6.0.2012062121/pysrc/pydevd.py", line 1392, in <module>
    debugger.run(setup['file'], None, None)
  File "/home/giorgos/apps/Aptana_Studio_3/plugins/org.python.pydev_2.6.0.2012062121/pysrc/pydevd.py", line 1085, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "/home/giorgos/Documents/Aptana Studio 3 Workspace/BetPick/tests/insert_models.py", line 21, in <module>
    team = Team()
  File "<string>", line 2, in __init__
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/instrumentation.py", line 309, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/util/langhelpers.py", line 485, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/instrumentation.py", line 157, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/event.py", line 291, in __call__
    fn(*args, **kw)
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/mapper.py", line 2342, in _event_on_first_init
    configure_mappers()
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/mapper.py", line 2258, in configure_mappers
    mapper._post_configure_properties()
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/mapper.py", line 1167, in _post_configure_properties
    prop.init()
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/interfaces.py", line 128, in init
    self.do_init()
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/properties.py", line 911, in do_init
    self._determine_joins()
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/properties.py", line 1034, in _determine_joins
    self.secondary)
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/orm/properties.py", line 1028, in _search_for_join
    a_subset=mapper.local_table)
  File "/home/giorgos/.virtualenvs/venv/local/lib/python2.7/site-packages/sqlalchemy/sql/util.py", line 262, in join_condition
    b.foreign_keys, 
AttributeError: 'tuple' object has no attribute 'foreign_keys' 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T12:29:57.220

`backref`应该是您声明中的关键字参数`Competition.teams`：

```
class Competition(Base):
    # ...
    teams = relationship('Team', backref="competition") 
```

请参阅 上的[文档`relationship`](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#sqlalchemy.orm.relationship)。您*可以*使用[`backref`可调](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#sqlalchemy.orm.backref)用来显式配置反向引用，但您仍必须使用`backref`关键字：

```
class Competition(Base):
    # ...
    teams = relationship('Team', backref=backref("competition", ... additional keywords ...)) 
```

# java - 机器人类，移动鼠标做圆周运动

> ID：11922139
> 
> 赞同：0
> 
> 时间：2012-08-12T12:24:46.827
> 
> 标签：java, awt, mouse, awtrobot

我想要做的是让我的鼠标围绕一个点（距离所述点 500 像素）以圆形方式移动。我希望鼠标逆时针执行此操作。

所以我想说的是......我希望鼠标使用Robot类方法mouseMove围绕500px的点移动。我只是不知道在数学方面我会怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:31:43.007

使用[圆方程](https://en.wikipedia.org/wiki/Circle#Equations)得到 x 值和 y 值之间的依赖关系。

现在遍历 -500 到 500 之间的每个 x（跳跃 1），计算 y 值，然后移动鼠标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:32:11.370

我认为一点点[三角法](http://relativity.net.au/gaming/java/Trigonometry.html)可以发挥作用。然后你可以通过以下方式连续移动：

```
Robot r = new Robot();
r.mouseMove(calculatedX,calculatedY); 
```

# php - symfony2 选择表单有效

> ID：11922140
> 
> 赞同：1
> 
> 时间：2012-08-12T12:25:19.717
> 
> 标签：php, forms, validation, symfony

我有一个带有一个选择元素的简单 smyfony2 表单。当我选择“kerosin”或“diesel”时，表格不会验证，什么是正确的。当我不选择这三个选项中的任何一个并将表单提交为空时，$form->validate() 将返回 true，但它不应该。有任何想法吗？使用所需的 HTML5 对我来说不是解决方案。

这是我的表单 AbstractType：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{

    // Form erzeugen
    $builder->add('treibstoff', 'choice', array(
            'choices' => array(
                    'kerosin' => 'form.quiz1.kerosin',
                    'benzin' => 'form.quiz1.benzin',
                    'diesel' => 'form.quiz1.diesel',
                ),
            'multiple' => false,
            'expanded' => true,
            'label' => ' '
        ))
        ->getForm();
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{

    // Validierung erzeugen
    $collectionConstraint = new Collection(array(
        'treibstoff' => array(
                new Choice(array(
                    'choices' => array('benzin'),
                    'message' => 'form.quiz.falscheantwort',
                    'strict' => true
                )
            )
        )
    ));

    $resolver->setDefaults(array(
        'validation_constraint' => $collectionConstraint
    ));
}

public function getName()
{ 
     ... 
```

验证工作如下：

```
 if($Request->getMethod() == "POST") {
        $form->bind($Request);
        if($form->isValid()) {
            echo "valid"; 
```

提前致谢。

编辑：

我像建议的那样更改了 setDefaultOptions 并添加了 NotBlank。这对我有用：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{

    // Validierung erzeugen
    $collectionConstraint = new Collection(array(
        'treibstoff' => array(
            new Choice(array(
                    'choices' => array('benzin'),
                    'message' => 'form.quiz.falscheantwort',
                    'strict' => true,
                )
            ),
            new NotBlank()
        )
    ));

    $resolver->setDefaults(array(
        'validation_constraint' => $collectionConstraint
    ));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:30:50.793

您仅将有效选项设置为`benzin`in `setDefaultOptions`，但未按要求指定字段。请注意，`required`在表单字段中仅设置[HTML5 验证](http://symfony.com/doc/current/book/forms.html#field-type-options)：

> 另请注意，将 required 选项设置为 true 不会导致应用服务器端验证。换句话说，如果用户为该字段提交了一个空白值（例如，使用旧的浏览器或 Web 服务），它将被接受为有效值，除非您使用 Symfony 的 NotBlank 或 NotNull 验证约束。

因此，您还必须向字段添加[`NotBlank`](http://symfony.com/doc/current/reference/constraints/NotBlank.html)约束。`treibstoff`

# javascript - 如何通过点击敌人或物体来进行简单的得分？

> ID：11922141
> 
> 赞同：0
> 
> 时间：2012-08-12T12:25:21.683
> 
> 标签：javascript, flash, actionscript-2, flash-cs5

我的游戏是什么痣。我在框架中使用此代码 `score=0;`

这是用于单击以获得分数的按钮

```
on (release) {
    score++;
} 
```

分数不显示。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:29:24.457

据我猜测，您只是在更新变量而不是显示它。如果你有一个 texfield 在某处显示分数，你可以设置`myTextfield.text = score;`. 无论如何，您使用的是非常非常古老的代码 (AS2)。我建议不要以这种方式学习 AS 并使用 AS3。

# caching - 一个对象作为另一个对象内部的私有数据成员，在父缓存时是否缓存？

> ID：11922146
> 
> 赞同：0
> 
> 时间：2012-08-12T12:26:13.767
> 
> 标签：caching, object

我有一个像这样的对象：class Obj_A{ private $_obj_child; public function child(){ return $this->_obj_child; 所以，如果我使用 $x= new Obj_A，

```
$x->_obj_child is not accessible. 
```

相反，我需要使用

```
$y= $x->child() can get all data in child object 
```

在我的缓存函数中，**我缓存了 $x。$_obj_child 是否被缓存？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:34:57.237

是的。如果不是，缓存有什么用。您的缓存对象要么具有默认状态，要么处于无效状态。

# java - JFileChooser 打开多个txt文件

> ID：11922152
> 
> 赞同：20
> 
> 时间：2012-08-12T12:27:37.170
> 
> 标签：java, swing, jfilechooser

如何使用 JFileChooser 打开两个文本文件，选择这些文件后，我想比较它们，在屏幕上显示等。这可能吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-12T12:30:54.503

您可以`JFileChooser`选择多个文件并返回一组 File 对象而不是一个

```
JFileChooser chooser = new JFileChooser();
chooser.setMultiSelectionEnabled(true);
chooser.showOpenDialog(frame);
File[] files = chooser.getSelectedFiles(); 
```

该方法`showOpenDialog(frame)`仅在您单击确定按钮后返回

**编辑**

所以这样做：

```
JFileChooser chooser = new JFileChooser();
chooser.setMultiSelectionEnabled(true);
chooser.showOpenDialog(frame);
File[] files = chooser.getSelectedFiles();
if(files.length >= 2) {
    compare(readFileAsList(files[0]), readFileAsList(files[1]));
} 
```

并将您的更改`readFileAsList`为：

```
private static List<String> readFileAsList(File file) throws IOException {
    final List<String> ret = new ArrayList<String>();
    final BufferedReader br = new BufferedReader(new FileReader(file));
    try {
        String strLine;
        while ((strLine = br.readLine()) != null) {
            ret.add(strLine);
        }
        return ret;
    } finally {
        br.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-12T12:31:02.790

您可以使用：

```
JFileChooser chooser = new JFileChooser();
chooser.setMultiSelectionEnabled(true);

// Show the dialog; wait until dialog is closed
chooser.showOpenDialog(frame);

// Retrieve the selected files.
File[] files = chooser.getSelectedFiles(); 
```

然后，您可以使用返回的文件句柄进行比较。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-19T11:06:09.477

在我的情况下，我解决了它将框架声明为设置为 null 的初始化局部变量：

```
JFileChooser chooser = new JFileChooser();
chooser.setMultiSelectionEnabled(true);

Component frame = null;

chooser.showOpenDialog(frame);
File[] files = chooser.getSelectedFiles(); 
```

# ruby-on-rails - Rails 模型验证条件 allow_nil？

> ID：11922154
> 
> 赞同：3
> 
> 时间：2012-08-12T12:27:54.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

所以我想知道我们是否可以有一个条件 allow_nil 选项来验证 Rails 模型。

我想要做的是能够根据某些逻辑（其他一些属性）allow_nil

所以我有一个可以保存为草稿的产品模型。当保存为草稿时，价格可以为零，但当不是草稿时，保存的价格应该是数字。我怎样才能做到这一点。以下似乎不起作用。它适用于草稿案例，但即使状态不是草稿也允许为零。

```
class Product<ActiveRecord::Base
   attr_accessible :status, price
   validates_numericality_of :price, allow_nil: :draft?

   def draft?
     self.status == "draft"
   end

end 
```

查看rails docs我看起来没有将方法传递给allow_nil的选项？

一种可能的解决方案是对两种情况进行单独验证

```
 with_options :unless => :draft? do |normal|
    normal.validates_numericality_of :price
 end

 with_options :if => :draft? do |draft|
   draft.validates_numericality_of :price, allow_nil: true
 end 
```

还有其他方法可以使它正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T12:34:57.060

您可以使用`if`和`unless`执行以下操作

```
class Product<ActiveRecord::Base
   attr_accessible :status, price
   validates_numericality_of :price, allow_nil: true, if: :draft?
   validates_numericality_of :price, allow_nil: false, unless: :draft?

   def draft?
     self.status == "draft"
   end

end 
```

使用上述内容，您将设置 2 个验证，一个适用于 when `draft? == true`，这将允许 nils，一个 where`draft? == false`将不允许 nils

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T22:34:32.947

你不需要`allow_nil`那么，只需使用`if`：

```
class Product < ActiveRecord::Base
   attr_accessible :status, price
   validates_numericality_of :price, if: -> { (draft? && !price.nil?) || !draft? }

   def draft?
     self.status == "draft"
   end
end 
```

# c# - startIndex 不能大于 C# 中字符串的长度

> ID：11922156
> 
> 赞同：0
> 
> 时间：2012-08-12T12:28:10.043
> 
> 标签：c#

我试图测试员工工作的月份是否等于从他们开始工作到现在的 3 个月。这就是我想要使用的：

```
int totalMonth = 3;
int totalYear = 0;
int mon = DateTime.Now.Month;
int yr = DateTime.Now.Year;
//block of code that I used LinQ to Entity to get staff start work date
result = result.Where(((s => mon - int.Parse(s.StartDate.Substring(3, 2).ToString()) == totalMonth && yr -int.Parse(s.StartDate.Substring(6, 4).ToString()) == totalYear))).ToList(); 
```

我的数据库中日期的格式是`07/05/2012`但我得到了错误：

```
startIndex cannot be larger than length of string. Parameter name: startIndex 
```

谁能告诉我，我在这里做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:31:54.317

> 我数据库中日期的格式是 07/05/2012

日期很可能以二进制形式存储并且没有格式。您在列出记录时看到的可能与 C# 中发生的不同。

使用调试器找出`result.First().StartDate`实际的样子。可能是`"5-7-12"`。

# javascript - node.js - facebook 连接 - 最新的库

> ID：11922159
> 
> 赞同：5
> 
> 时间：2012-08-12T12:28:57.097
> 
> 标签：javascript, facebook, node.js, facebook-graph-api

我已经开始玩一些 node.js 了。我来自更多的 php / java 背景。

我大量使用 facebook sdk for php，这非常好（对于 php）。node.js 缺乏这样的支持（如果我错了，facebook 的 JS SDK 完全不同，请纠正我）。再次，谈论支持和使用everyauth 并没有很好地提出......（也许更新的示例代码会帮助我）。例如，如何通过 SDK 进行分页？（您从 facebook 获得下一个链接作为响应）

面板 - 未更新（尝试了它的示例并从代码中看到）存在使用 FQL 且未打开图形的库

哪个是“最好的”？还是最新的“包装器”或它自己的SDK，但使用起来很简单？（不需要重型库）

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T18:59:55.317

经过搜索，等待一个没有来的答案，等等。最后答案来自节点的 IRC 频道。 [http://passportjs.org/guide/index.html](http://passportjs.org/guide/index.html)

[http://passportjs.org/guide/facebook.html](http://passportjs.org/guide/facebook.html)

# php - 如何从 html 表单更新 MySql 中表字段的值？

> ID：11922161
> 
> 赞同：0
> 
> 时间：2012-08-12T12:29:40.410
> 
> 标签：php, mysql

在过去的两天里，我正在尝试更新我的数据库中的一个表。但我无法让它工作。有人请帮助我。我可以连接到我的数据库，完美地查看我的表格字段。表单中的发布值可以从指定的 PHP 文件中完美读取。MySQL 查询没有看到返回任何错误。但我不明白为什么这些值没有更新到表中。

```
//form.html

        <form name="account" action="test.php" method="post">
    <td align="left" valign="top" class="labelstyle" width="25%">First Name</td>
                                          <td align="left" valign="top" class="labeltextstyle" width="75%"><input type="text" name="fname" value="" /></td>
    <td align="left" valign="top" class="labelstyle" width="25%">Last Name</td>
                                          <td align="left" valign="top" class="labeltextstyle" width="75%"><input type="text" name="lname" value="" /></td>
    <td align="left" valign="top" class="labelstyle" width="25%">Email</td>
                                          <td align="left" valign="top" class="labeltextstyle" width="75%"><input type="text" name="email" value="" /></td>

    <td  align="left" valign="top" class="labeltextstyle"><input type="submit" name="submit" value="Save" /></td>

    </form>

// test.php
    <?php

    $dbhost = "localhost"; 
    $dbname = "test"; 
    $dbuser = ""; 
    $dbpass = "";

    mysql_connect ( $dbhost, $dbuser, $dbpass)or die("Could not connect: ".mysql_error()); 
    mysql_select_db($dbname) or die(mysql_error()); 

    session_start();
    if(isset($_REQUEST['submit'])){

    // $query = "select * from form";
    // $result = mysql_query($query);
    // $numcolumn = mysql_num_fields($result);
    // for ( $i = 0; $i < $numcolumn; $i++ ) {
    // $columnnames = mysql_field_name($result, $i);
    // echo $columnnames;
    // }

    $fname = $_POST['fname']; 
    $lname = $_POST['lname'];  
    $email = $_POST['email'];

    echo $fname ;
    echo $lname ;
    echo $email ;

    $query = "update test set
               fname = $fname,
               lname = $lname,
               email = $email
               where 1 ";

    $result = mysql_query($query); 

    if ($query = 1) { 

    echo "IT WORKED"; 

    } else { 
    echo "DIDNT WORK";
    } 
    }else{
     echo "NOT SUBMITTED";
     }

?>

//form.html

<form name="account" action="test.php" method="post">
<td align="left" valign="top" class="labelstyle" width="25%">First Name</td>
                                      <td align="left" valign="top" class="labeltextstyle" width="75%"><input type="text" name="fname" value="" /></td>
<td align="left" valign="top" class="labelstyle" width="25%">Last Name</td>
                                      <td align="left" valign="top" class="labeltextstyle" width="75%"><input type="text" name="lname" value="" /></td>
<td align="left" valign="top" class="labelstyle" width="25%">Email</td>
                                      <td align="left" valign="top" class="labeltextstyle" width="75%"><input type="text" name="email" value="" /></td>

<td  align="left" valign="top" class="labeltextstyle"><input type="submit" name="submit" value="Save" /></td>

</form> 
```

当我用值 A、B 和 C 填写表单并提交表单时，我得到以下输出。

fnamelnameemailABCIT WORKED

请尽快帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:46:49.390

where 子句中没有 id 来指示必须更新哪一行。这将更新表中的所有行。它应该如下所示：

```
 $query = "update test set
               fname = $fname,
               lname = $lname,
               email = $email
               where id = 1"; 
```

我假设预先创建了一行，以便您知道要更新哪一行。如果不是，那么应该使用 INSERT 语句。

```
$query = "insert into test (fname,lname,email) VALUES ($fname,$lname,$email); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:41:05.187

fname、lname 和 email 是字符串，必须在 SQL 查询中进行转义：

```
 $query = "update test set
           fname = '$fname',
           lname = '$lname',
           email = '$email'
           where 1"; 
```

您可能也可以离开 where 1 。

# .net - .NET 异步 TAP 方法是否允许完全非异步？

> ID：11922162
> 
> 赞同：0
> 
> 时间：2012-08-12T12:29:48.343
> 
> 标签：.net, asynchronous, async-await

Stephen Toub 在他的文章“基于任务的异步模式”中描述了实现基于任务的异步模式 (TAP) 的异步方法甚至可以使用特定线程（例如 UI 线程）来执行它们的代码。这涉及允许异步方法使用调用线程。在这种情况下，异步方法并不是真正的异步并阻塞调用线程。真的允许吗？创建一个阻塞调用线程的异步方法是没有意义的，或者是吗？

这是斯蒂芬文章的相关条款：

> **目标环境**
> 
> 由 TAP 方法的实现来确定异步执行发生的位置。TAP 方法的开发人员可以选择在`ThreadPool`.需要，例如 UI 线程，或任何数量的其他潜在上下文。甚至可能出现 TAP 方法没有执行执行的情况，返回一个`Task`简单地表示系统中其他地方出现条件的 a（例如`Task<TData>`，表示`TData`到达排队数据结构的 a）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:13:08.420

方法（或其一部分）可能需要在 UI 线程上运行这一事实并不意味着它必须阻塞，无论您是否从 UI 线程调用它。

想象一下，你有一个方法`Task DownloadAndShowData()`，它异步下载一些数据，然后在 UI 中显示。为了在 UI 上显示下载的数据，它需要在 UI 线程上执行一些代码。你可以像这样实现它：

```
async Task DownloadAndShowData()
{
    var data = await DownloadData();
    await uiSchedulerFactory.StartNew(() => ShowData(data));
} 
```

在这里，`uiSchedulerFactory`是一个`TaskFactory`在 UI 线程上执行代码的（使用`SynchrnonizationContext`）。

在这段代码中，`Task`只有在数据显示在 UI 中后才完成返回，它使用了 UI 线程。但是该方法本身不会阻塞。如果你有这样的代码：

```
await DownloadAndShowData();
// some more code 
```

在 UI 线程上执行，当`await`到达时，当前方法“暂停”，UI 线程被释放。下载完成后，`ShowData()`从上面在 UI 线程上执行（它可以执行，没有任何东西阻塞线程）。完成后，调用方法“取消暂停”并`// some more code`执行。

总而言之，异步方法在 UI 线程（也可能是调用代码正在执行的位置）上执行一些代码，但异步方法不会阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:19:31.173

`await`对返回对象的方法的调用`Task`只是委托给该任务对象以开始对其任务的调用。从该任务对象的调用者的角度来看，该任务对象可能已经或可能尚未被调用。如果它已经被调用，它可能会在`await`到达它的时候完成，在这种情况下，从 await 的代码来看，任务是同步执行的。

这是一个例子。另一个是`Task`知道它需要做什么；如果它需要做的事情可以更快地同步完成，它将简单地同步完成。一个示例可能是从远程源接收数据。许多接收数据的方法都实现了 TAP，这是因为数据是由远程源发送的，并且正在由您的计算机在后台接收。调用“异步”接收字节的方法可能已经拥有该字节，并且同步返回该字节会更容易。如果尚未接收到任何字节，则该方法将异步运行，等待远程源发送一个字节。当接收到该字节时，它将通过延续或`await`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T15:19:09.577

您可能会发现 my [`async`/ `await`intro 很有帮助](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)，尤其是讨论“上下文”的部分。

一个常见的例子是下载一些信息，将其解析为数据结构，然后更新 UI，如下所示：

```
private async Task GetInfoAndUpdateUIAsync()
{
  var info = await GetInfoAsync();
  UpdateUI(info);
}

private async Task<MyInfo> GetInfoAsync()
{
  using (var client = new HttpClient())
  {
    var httpResponse = await client.GetStringAsync(...);
    return MyInfo.Parse(httpResponse);
  }
} 
```

**演练**

您可以`GetInfoAndUpdateUIAsync`从 UI 上下文（例如，`async void`事件处理程序）调用。

当`GetInfoAndUpdateUIAsync`开始执行时，它在 UI 线程上（同步）执行。它做的第一件事就是调用`GetInfoAsync`.

`GetInfoAsync`也开始在 UI 线程上执行（同步）。它创建一个`HttpClient`然后使用它开始从 URL 下载一些数据。当`GetInfoAsync`执行它的时候`await`，它保存它的状态并且返回一个不完整`Task<MyInfo>`的到`GetInfoAndUpdateUIAsync`。

`GetInfoAndUpdateUIAsync``await`对返回的 执行 an `Task<MyInfo>`，这是不完整的。所以它也保存*它的*状态并返回。这继续备份到原始调用者（例如，`async void`事件处理程序）。UI 线程现在可以自由地做其他工作。

当`HttpClient`完成下载数据时，它的返回`Task<string>`将完成。`GetInfoAsync`这将安排在 UI 线程上的延续。

`GetInfoAsync`然后将继续在 UI 线程上执行。它在 UI 线程上运行时将响应解析为数据结构 ( `MyInfo.Parse`)，然后到达方法的末尾，完成`Task<MyInfo>`它之前返回的任务。

完成后，它会安排UI 线程`Task<MyInfo>`的延续。然后在 UI 线程上调用（同步）。`GetInfoAndUpdateUIAsync``GetInfoAndUpdateUIAsync``UpdateUI(info)`

**结论**

这是一个示例，其中方法的各个部分`async`将在 UI 线程上（同步）执行，但 UI 线程没有*被阻塞*。

当`async`方法在它们`await`a之后`Task`继续时，默认情况下它们将在相同的上下文中恢复。如果该“上下文”不为空，则该“上下文”为当前`SynchronizationContext`（例如，UI 上下文），否则为当前`TaskScheduler`. 您可以通过等待 的结果来覆盖默认行为`ConfigureAwait(false)`，这将导致方法继续在线程池线程上运行。

**再注**

在这个例子中，我们在 UI 线程上做一些实际上不必在 UI 线程上做的事情。特别是，将 HTTP 响应解析为`MyInfo`结构。

我们可以`GetInfoAsync`通过覆盖默认的上下文捕获来提高效率：

```
private async Task<MyInfo> GetInfoAsync()
{
  using (var client = new HttpClient())
  {
    var httpResponse = await client.GetStringAsync(...).ConfigureAwait(false);
    return MyInfo.Parse(httpResponse);
  }
} 
```

现在，当 HTTP 响应进来并`GetInfoAsync`继续执行时，它将继续在线程池线程而不是 UI 线程上执行。因此`MyInfo.Parse`将在线程池而不是 UI 上执行。解析`Task<MyInfo>`完成后，将完成，`GetInfoAndUpdateUIAsync`并将继续在 UI 线程上执行。

我们不能对 做同样的事情`GetInfoAndUpdateUIAsync`，因为`UpdateUI`需要在 UI 线程上运行。

所以这导致了一个最佳实践：`ConfigureAwait(false)`在你的“库”`async`方法中使用。

# c++ - 从列表中删除特定对象（c++）

> ID：11922164
> 
> 赞同：0
> 
> 时间：2012-08-12T12:30:08.967
> 
> 标签：c++, list, object, element

我想从我的列表中删除一个特定的对象，`wielrennerslist`但是在编译时会出现一些错误。

```
cout << "Wielrenner" << endl;

list<Wielrenner> wielrennerslist = wielerploegOB.getWielrennersList();
cout << "Welke wielrenner wil je verwijderen?" << endl;

// Alle objecten afprinten in de lijst
for (list<Wielrenner>::iterator it = wielrennerslist.begin(); it != wielrennerslist.end(); it++) {
    Wielrenner wielrennerOB = *it;
    cout << teller << " - " << wielrennerOB.getVoornaam() << " " << wielrennerOB.getAchternaam() << endl;
    teller++;
}
cin >> inputID;

// Naar het object gaan
int N = inputID; /* index of the element you want to retrieve */
if (wielrennerslist.size() > N) {
    list<Wielrenner>::iterator iter = wielrennerslist.begin();
    std::advance(iter, N);

    // 'it' points to the element at index 'N'
    Wielrenner* wielrennerOB2;
    wielrennerOB2 = &*iter;

    wielrennerslist.remove(*wielrennerOB2); // something wrong with this?

    wielerploegOB.setWielrennerList(wielrennerslist);
}//if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:52:39.457

您可以使用迭代器和[std::list::erase](http://en.cppreference.com/w/cpp/container/list/erase)删除有问题的元素，如下所示：

```
wielrennerslist.erase(iter); 
```

否则，应该像这样使用 remove 方法：

```
wielrennerslist.remove(*iter); 
```

但是这种方法并没有做我认为你想做的事情。它将删除与位置元素的值相等的**所有**`N`元素。但是，如果这是您想要的，那么您需要对`Wielrenner`对象进行相等比较。见[std::list::remove](http://en.cppreference.com/w/cpp/container/list/remove)。

# css - 如何在css中显示块的前N个元素并隐藏其他元素？

> ID：11922165
> 
> 赞同：53
> 
> 时间：2012-08-12T12:30:10.713
> 
> 标签：css, pseudo-class, css-selectors

我试图隐藏在`.row`块内具有类的前 3 个元素`.container`。

我正在做的是隐藏所有第`.row`一个，然后我试图`.row`通过使用显示前 3 个`.row:nth-child(-n+3)`

jsfiddle在这里：http: [//jsfiddle.net/z8fMr/1/](http://jsfiddle.net/z8fMr/1/)

```
.row {
  display: none;
}

.row:nth-child(-n+3) {
  display: block;
}
```

```
<div class="content">

  <div class="notarow">I'm not a row and I must remain visible</div>
  <div class="row">Row 1</div>
  <div class="row">Row 2</div>
  <div class="row">Row 3</div>
  <div class="row">Row 4</div>
  <div class="row">Row 5</div>
  <div class="row">Row 6</div>

</div>
```

我这里有两个问题：

1.  第 3 行未显示，我是否以错误的方式使用 nth-child？
2.  有没有比隐藏所有内容然后创建特定规则来显示我想要的 n 个第一个元素更好的做法？css中有没有办法只显示前3个`.row`然后隐藏所有其他`.row`？

谢谢。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-12T12:34:54.800

1.  你有一个`.notarow`作为第一个孩子，所以你必须在你的`:nth-child()`公式中考虑到这一点。正因为如此`.notarow`，你的第一个`.row`成为父母的第二个孩子，所以你必须从第二个开始数到第四个：

    ```
     .row:nth-child(-n+4) {
         display: block;
     } 
    ```

    [更新的小提琴](http://jsfiddle.net/BoltClock/z8fMr/2)

    ```
    .row {
        display: none;
    }

    .row:nth-child(-n+4) {
        display: block;
    }
    ```

    ```
    <div class="content">
        <div class="notarow">I'm not a row and I must remain visible</div>
        <div class="row">Row 1</div>
        <div class="row">Row 2</div>
        <div class="row">Row 3</div>
        <div class="row">Row 4</div>
        <div class="row">Row 5</div>
        <div class="row">Row 6</div>
    </div>
    ```

2.  你在做什么很好。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-13T17:28:54.363

你甚至不需要 CSS3 选择器：

```
.row + .row + .row + .row {
    display: none;
} 
```

这甚至在 IE7 中也应该有效。
[更新的小提琴](http://jsfiddle.net/z8fMr/5/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-21T11:39:13.963

此外，就像乔瓦尼的解决方案一样，这样的事情也可以奏效。

```
.container > .row:nth-child(3) ~ .row {
    /* this rule targets the rows after the 3rd .row */
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-02T22:24:46.450

我通过谷歌搜索“css show first n elements”找到了这个答案，但现在的问题似乎是相反的（隐藏前 n 个元素）

```
:nth-child(n+4) 
```

^ 如果您正在寻找我正在寻找的东西，这将起作用

# css - MVC 3，Divs 和 CSS ids 问题

> ID：11922166
> 
> 赞同：0
> 
> 时间：2012-08-12T12:30:31.620
> 
> 标签：css, asp.net-mvc, razor

我有一个简单的局部视图，它显示操作的结果并显示使用成功或失败的消息。局部视图是从主视图内部渲染的。

但是，如果我想为 div 标签使用特定的 css ID，则 css 样式不起作用。如果我申请一个课程，那么这种风格就可以了。例如

部分视图看起来：

```
@Code
ViewData("Title") = "Results"

If Model.Result = True Then
    @<div id="success">@Model.Message</div>
Else
    @<div id="notsuccess">@Model.Message</div>
End If 
```

结束代码

@@Model.Message 行不知何故不起作用。CSS就像：

```
#success {
background-color:Lime;
font-style:italic;
font-size:larger; 
```

}

```
#notsuccess {
background-color:Red;
font-style:italic;
font-size:larger; 
```

}

但是，如果我将 css 更改为 .success 并将行更改为使用 .success 类而不是 id ，那么它会显示样式。谁能指出我的问题？

我正在使用 MVC 3 的默认 MVC 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:03:58.673

很可能还有另一个名为#success 的div。您需要粘贴/检查页面的完整 HTML 视图。

# javascript - 什么是 HTTP 请求标头？

> ID：11922171
> 
> 赞同：-2
> 
> 时间：2012-08-12T12:30:56.760
> 
> 标签：javascript, ajax

[使用 AJAX 发布表单](https://stackoverflow.com/questions/2999792/posting-a-form-using-ajax/2999946#2999946)

我的 AJAX 脚本以前不能正常工作（它不会发送数据），但设置请求标头可以解决问题。它工作得很好，但我想了解为什么需要它们才能工作。谢谢 ：-）

```
//Send the proper header information along with the request 
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
http.setRequestHeader("Content-length", params.length); 
http.setRequestHeader("Connection", "close"); 
```

javascript

```
function request(elm, type, url, str, fn) { 
var xhr = new XMLHttpRequest();
xhr.onreadystatechange=function()
{
    if (xhr.readyState==4 && xhr.status==200)
    {
        if (!fn) elm.innerHTML=xhr.responseText; 
        else fn(xhr);
    }
}
      xhr.open(type, url, true);
      //yay it works with this :-)
      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xhr.send(str);
}

var form = document.getElementById("form_login")
var btnLogin = form.getElementsByClassName("btn")[0];
addEvent(btnLogin, "click", function(e) 
{
    preventDefault(e);
    var post ="",input,inputs = form.getElementsByClassName("input");
    for (var i=0, l=inputs.length; i<l; i++) 
    {
        input = inputs[i].getElementsByTagName("input")[0];
        post += input.name + "=" + encodeURI(input.value) + "&";
    }
    post = post.substr(0,post.length-1);
    var help = form.getElementsByClassName("help")[0];
    request(help, "POST", "user/login-exe.php?dt='" + new Date() + "'", post);
}); 
```

如果它全部有效，它会将用户记录在该位中，但不会显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:36:51.773

这不是严格要求，PHP 只会`$_POST`在请求指定 content-type 时自动填充`"application/x-www-form-urlencoded"`.

您仍然可以访问这些值

```
file_get_contents("php://input"); 
```

事实上，任何服务器都应该允许您访问原始请求正文。

其他标题没有做任何事情，浏览器将不允许您按照指定的方式更改它们。如果您能够更改它们，您可能会`Content-Length`每次都报告错误。因为`.length`计算 UTF-16 代码单元，其中 as`Content-Length`必须以字节为单位。

参考：[http ://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)

> 如果标头与以下标头之一不区分大小写，则终止这些步骤：
> 
> *   接受字符集
> *   接受编码
> *   访问控制请求标头
> *   访问控制请求方法
> *   **联系**
> *   **内容长度**
> *   曲奇饼
> *   饼干2
> *   内容传输编码
> *   日期
> *   预计
> *   主持人
> *   活着
> *   起源
> *   推荐人
> *   TE
> *   预告片
> *   传输编码
> *   升级
> *   用户代理
> *   通过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:49:19.293

1.) a 的“Content-type”标头`<form>`：指定在`content-type`将表单数据提交到服务器时对表单数据集进行编码。

application/x-www-form-urlencoded：表示将表单的数据编码为a。）控件名称和值按它们出现的顺序列出；控件名称与它的值由“=”分隔，控件名称和值由“&”分隔 b) 控件名称和值被转义。空格字符被替换为“+”，其他保留字符被转义，如[RFC1738](http://www.ietf.org/rfc/rfc1738.txt)中所述。

2) “Content-length”：这个标头以十进制八位字节表示消息正文的大小 - [HTTP 标头中的“Content-Length”字段是什么？](https://stackoverflow.com/questions/2773396/whats-the-content-length-field-in-http-header)

3) 连接：连接的状态。

我认为不需要设置“连接[”](https://stackoverflow.com/questions/2954958/modifying-jquery-ajax-request-connection-header)。

# ios - 表格单元格中的像素化 UILabel

> ID：11922172
> 
> 赞同：0
> 
> 时间：2012-08-12T12:31:02.743
> 
> 标签：ios, ios5, uitableview, uilabel

要将**UILabel**添加到我使用的表格单元格

```
UILabel *timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(270, 10, 40, 12)];
timeLabel.text = @"2s";
timeLabel.backgroundColor = [UIColor clearColor];
timeLabel.font = [UIFont systemFontOfSize:12];
timeLabel.textColor = [UIColor lightGrayColor];
timeLabel.highlightedTextColor = [UIColor whiteColor];
timeLabel.textAlignment = UITextAlignmentRight;
timeLabel.frame = CGRectIntegral(timeLabel.frame);
[cell.contentView addSubview:timeLabel]; 
```

在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`.

这工作正常，直到我滚动表格或选择一个单元格。然后标签变得像素化。

负载时：![在此处输入图像描述](../Images/219e27f3703e55a8971390fd44fb74e4.png)

行动后：![在此处输入图像描述](../Images/25f4fe3515a1fee8609e6832ceb5bb66.png)

我还尝试通过子类化**UITableViewCell**来添加标签并将其加载到 `- (void) layoutSubviews`.

我已经在[这里](https://stackoverflow.com/questions/11383205/pixelated-text-in-uilabel-within-uiscrollview-both-with-transparent-background)和[这里](http://www.iphonedevsdk.com/forum/iphone-sdk-development/1161-over-anti-aliasing-in-uilabel.html)找到了相关的问题，但没有任何效果。

**编辑：不可能使用标准单元格标签，因为它们已经在使用中。我需要添加一个额外的标签。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:34:53.287

我终于得到了一个肮脏的修复。

在**- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath**

我设置

`cell.selectionStyle = UITableViewCellSelectionStyleNone;`.

在**UITableViewCell的子类中，我在****initWithStyle**中加载 timeLabel，如下所示：

```
timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(270, 10, 40, 12)];
timeLabel.text = @"2s";
timeLabel.backgroundColor = [UIColor whiteColor];
timeLabel.font = [UIFont systemFontOfSize:12];
timeLabel.textColor = [UIColor lightGrayColor];
timeLabel.highlightedTextColor = [UIColor whiteColor];
timeLabel.textAlignment = UITextAlignmentRight;
[self.contentView addSubview:timeLabel]; 
```

然后我覆盖这两个函数：

```
#define UIColorFromRGB(rgbValue) [UIColor colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 green:((float)((rgbValue & 0xFF00) >> 8))/255.0 blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0]

- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
    if(highlighted == YES){
        UIImage *image = [UIImage imageNamed:@"cellBg@2x.png"];
        //scale custom cell background to necessary height
        UIImage *scaledImage = [image scaleToSize:CGSizeMake(1,self.contentView.frame.size.height)];
        //set cell background
        self.backgroundColor = [UIColor colorWithPatternImage:scaledImage];
        //set textcolor for default labels
        self.textLabel.textColor = [UIColor whiteColor];
        self.detailTextLabel.textColor = [UIColor whiteColor];
        //set textcolor for custom label
        timeLabel.textColor = [UIColor whiteColor]; 
        //cope background for custom label background since timeLabel.backgroundColor = [UIColor clearColor] doesnt work
        CGImageRef ref = CGImageCreateWithImageInRect(scaledImage.CGImage, CGRectMake(0, 10, 12, 20));
        UIImage *img = [UIImage imageWithCGImage:ref];
        //set custom label background
        timeLabel.backgroundColor = [UIColor colorWithPatternImage:img];
    } else {
        //set unselected colors
        self.backgroundColor = [UIColor whiteColor];
        self.textLabel.textColor = [UIColor darkGrayColor];
        self.detailTextLabel.textColor = UIColorFromRGB(0x808080);
        timeLabel.textColor = UIColorFromRGB(0x808080);
        //white background works without the label pixelates
        timeLabel.backgroundColor = [UIColor whiteColor];
    }
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    if(selected == YES){
        UIImage *image = [UIImage imageNamed:@"cellBg@2x.png"];
        UIImage *scaledImage = [image scaleToSize:CGSizeMake(1,self.contentView.frame.size.height)];
        self.backgroundColor = [UIColor colorWithPatternImage:scaledImage];
        self.textLabel.textColor = [UIColor whiteColor];
        self.detailTextLabel.textColor = [UIColor whiteColor];
        timeLabel.textColor = [UIColor whiteColor];
        CGImageRef ref = CGImageCreateWithImageInRect(scaledImage.CGImage, CGRectMake(0, 10, 12, 20));
        UIImage *img = [UIImage imageWithCGImage:ref];  
        timeLabel.backgroundColor = [UIColor colorWithPatternImage:img];
    } else {
        self.backgroundColor = [UIColor whiteColor];
        self.textLabel.textColor = [UIColor darkGrayColor];
        self.detailTextLabel.textColor = UIColorFromRGB(0x808080);
        timeLabel.textColor = UIColorFromRGB(0x808080);
        timeLabel.backgroundColor = [UIColor whiteColor];
    }
} 
```

希望这可以帮助一些人！

# hardware - 创建虚拟监视器（显示设备）

> ID：11922174
> 
> 赞同：5
> 
> 时间：2012-08-12T12:31:14.567
> 
> 标签：hardware, virtual, monitor

[我在这里](https://stackoverflow.com/questions/11919175/java-robot-screenshot-beyond-visible)提出了一个问题，但意识到我走错了方向。我需要创建一个足以容纳网站的虚拟监视器（实际上只是内存中的空间），它通常会跨越多个屏幕。这可以用任何语言实现吗？我尝试了 Java，但到目前为止失败得很惨。我不希望这很容易，任何指针都会很感激。

我想操作系统和视频推车必须以某种方式告知有第三台显示器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T18:34:33.373

使用任何虚拟化工具（VirtualBox、VMWare 等）。创建一个 Windows（XP/更新）虚拟机，您可以附加任意数量（嗯，至少最多 64 个）虚拟监视器。当您启动 VM 时，所有这些虚拟监视器将作为单独的窗口打开，您可以在这些窗口之间拖放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T08:45:31.303

对于windows，查看： http: [//virtualmonitor.github.io/](http://virtualmonitor.github.io/) 目前只支持windows 2000 - windows 7，但是开发者正在寻求windows 7 - 8的帮助。

# ruby-on-rails - API 和 Rails - 最好的方法

> ID：11922180
> 
> 赞同：2
> 
> 时间：2012-08-12T12:31:25.740
> 
> 标签：ruby-on-rails, api, methods, flickr

目前我的应用程序使用 FlickRaw gem 从 Flickr 中提取数据。我想更多地重构和整理它的一部分并删除 FlickRaw 依赖。

所以，我现在使用的是 HttParty 并直接调用 Flickr API 方法。

我创建了一个 Flickr 类，其中有 self.collection、self.photoset 等方法来提取适当的内容。

我担心的是，从我的应用程序中实际需要使用这些方法与 Flickr 集成的位置，我必须调用 Flickr.collection(id)。如果 Flickr 突然存在，我将不得不去寻找所有对 Flickr 的引用并更改它们。我更愿意将我的 Flickr 类重命名为 PhotoHost 之类的名称，并在其中包含可以调用 Flickr 的方法，但由于 Flickr 的特定部分都在一起，因此如果需要，将来应该更容易更改。这听起来是一种明智的处理方式吗？你会怎么做？

此外，该类中的方法是否会直接与真正的 API 方法 1:1 映射，或者您是否会创建自己的方法并构建您真正想要的数据数组，然后再在应用程序的其他地方使用它，或者您只是发送flickr 响应那些其他领域并在那里处理它？- 实际上，在输入之后，似乎最好的方法是编写一个名为（例如）self.photos_for_album(album_id) 的方法，然后调用适当的 flickr api 方法来构建照片数组，然后使用该方法归还。我想这将允许我在应用程序周围编写其他代码以与照片交互，如果我从 Flickr 更改照片主机，那么只要新方法返回相同格式的数组，一切都应该是好的。

抱歉，这个问题有点脑残，但我很想听听其他人会如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T13:04:09.693

您真正想要使用的是类似`Strategy`或`Adapter`模式的东西。您应该创建一个`FlickrPhotoHost`模块来实现对您的应用有意义的方法（不一定是 1-1 与 Flickr 的 api）：

```
module FlickrPhotoHost
   def get_albums
      # fetch from flickr
   end

   def get_photo(album_id)
      # fetch from flickr
   end
end 
```

然后你应该有一个`PhotoHost`包含这个 Flickr 适配器的类：

```
class PhotoHost
  include FlickrPhotoHost
end 
```

然后在您的应用程序中任何有意义的地方使用它。

```
source = PhotoHost.new
album = source.get_albums.first
photos = source.get_albums(album.id)
# and so on... 
```

当 flickr 死机时，您可以将其替换为`InstagramPhotoHost`：

```
module InstagramPhotoHost
   def get_albums
      # fetch from instagram
   end

   def get_photo(album_id)
      # fetch from instagram
   end
end 
```

您需要更改的应用程序其余部分的唯一部分是`PhotoHost`：

```
class PhotoHost
  include InstagramPhotoHost
end 
```

对于一个主机来说，这可能有点矫枉过正，但想象一下你想同时实现 Instagram 和 Flickr？让 PhotoHost 决定运行时：

```
class PhotoHost
  def initialize type
    extend case type
      when :instagram then InstagramPhotoHost
      when :flickr then FlickrPhotoHost
    end 
  end
end 
```

在*实例化*上，您可以为 flickr 相册执行此操作：

```
PhotoHost.new(:flickr).get_albums 
```

然后是**BAM**，Instagram：

```
PhotoHost.new(:instagram).get_albums 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:31:43.867

抽象到更高层次的抽象通常是一个好主意。例如，您的应用程序将使用 PhotoHost 而不是 Flickr。

相反的观点是提防过早的优化。例如，您的应用程序是否有用替代品替换 Flickr 的积极需求？您还有什么可以花时间为您的应用程序及其用户提供更多功能/好处的事情？

另外：考虑一下您的抽象 PhotoHost 将如何使您的应用程序一次与多个实现进行对话（能够轻松地显示Flicker 和 InstaGram 照片）*。*

您还询问了 API 方法。

我会小心改变方法只是为了它的运动。希望一些想法进入了 Flickr api 方法。

但是您当然应该更改方法以添加您的应用程序可以使用的其他功能。例如，如果 Flickr api 是同步的，您可能希望添加一组异步方法，使您的最终用户能够在 PhotoHost 完成请求的操作时执行多任务（或至少获得反馈）。

# r - 在 R 中向 POSIXct 对象添加时间

> ID：11922181
> 
> 赞同：66
> 
> 时间：2012-08-12T12:31:32.820
> 
> 标签：r, datetime, posixct

我想为 POSIXct 对象添加 1 小时，但它不支持“+”。

这个命令：

```
as.POSIXct("2012/06/30","GMT") 
    + as.POSIXct(paste(event_hour, event_minute,0,":"), ,"%H:%M:$S") 
```

返回此错误：

```
Error in `+.POSIXt`(as.POSIXct("2012/06/30", "GMT"), as.POSIXct(paste(event_hour,  :
    binary '+' is not defined for "POSIXt" objects 
```

如何向 POSIXct 对象添加几个小时？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-12T12:35:03.583

`POSIXct`对象是从原点开始的秒数，通常是 UNIX 纪元（1970 年 1 月 1 日）。只需向对象添加必要的秒数：

```
x <- Sys.time()
x
[1] "2012-08-12 13:33:13 BST"
x + 3*60*60 # add 3 hours
[1] "2012-08-12 16:33:13 BST" 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2015-10-27T03:04:18.477

该`lubridate`包还通过便利功能等很好地实现了这`hours`一点`minutes`。

```
x = Sys.time()
library(lubridate)
x + hours(3) # add 3 hours 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-24T16:55:55.347

James 和 Gregor 的答案很棒，但他们处理夏令时的方式不同。这是对它们的详细说明。

```
# Start with d1 set to 12AM on March 3rd, 2019 in U.S. Central time, two hours before daylight saving
d1 <- as.POSIXct("2019-03-10 00:00:00", tz = "America/Chicago")
print(d1)  # "2019-03-10 CST"

# Daylight saving begins @ 2AM. See how a sequence of hours works. (Basically it skips the time between 2AM and 3AM)
seq.POSIXt(from = d1, by = "hour", length.out = 4)
# "2019-03-10 00:00:00 CST" "2019-03-10 01:00:00 CST" "2019-03-10 03:00:00 CDT" "2019-03-10 04:00:00 CDT"

# Now let's add 24 hours to d1 by adding 86400 seconds to it.
d1 + 24*60*60  # "2019-03-11 01:00:00 CDT"

# Next we add 24 hours to d1 via lubridate seconds/hours/days
d1 + lubridate::seconds(24*60*60)  # "2019-03-11 CDT" (i.e. 2019-03-11 00:00:00 CDT)
d1 + lubridate::hours(24)          # "2019-03-11 CDT" (i.e. 2019-03-11 00:00:00 CDT)
d1 + lubridate::days(1)            # "2019-03-11 CDT" (i.e. 2019-03-11 00:00:00 CDT) 
```

因此，任何一个答案都是正确的，具体取决于您想要什么。当然，如果您使用 UTC 或其他不遵守夏令时的时区，这两种方法应该是相同的。

# asp.net - asp.net mvc 中表单身份验证提供程序和成员资格提供程序之间的关系？

> ID：11922183
> 
> 赞同：0
> 
> 时间：2012-08-12T12:31:52.493
> 
> 标签：asp.net, asp.net-mvc-3

这两个提供商之间有什么区别。我是否必须同时实现它们才能进行自定义身份验证？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:42:33.667

一种用于身份验证，另一种用于基于角色的授权。

您不需要同时实现两者，这将取决于您自己的要求。如果您只需要让人们登录，则使用 FormsAuthentication。如果您需要更多，请同时实施。

# c# - 超时/结束日期事件的解决方案

> ID：11922186
> 
> 赞同：3
> 
> 时间：2012-08-12T12:32:30.650
> 
> 标签：c#, asp.net, .net, sql-server, vb.net

希望有人可以帮助我寻找正确的方向来解决我在系统设计过程中遇到的这个问题。

我正在创建一个拍卖网站，其中拍卖具有特定的结束日期/时间。

我有一个 .NET 计时器向用户显示剩余时间，当它倒计时时它会触发并更新后端 SQL 数据库以表示拍卖已经完成，它会通知获胜用户并触发 CLOSE 函数。

您如何建议对当时未在浏览器中实际打开的拍卖执行此操作，以便 Timer 事件永远不会创建此 CLOSE 事件。

理想情况下，我需要在拍卖结束时间过去的时间点运行一些东西？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:37:22.743

一种选择是将拍卖项目结束/结束的日期/时间存储在数据库中。然后，不要担心对它的关闭有反应（在你的情况下是客户端的计时器）并更新它关闭。决定它关闭的原因仅仅是现在 > 关闭日期/时间。

编辑：

在下面的评论中，您说您还需要在拍卖结束时发送邮件。如果是这种情况，您需要某种后台处理来选择所有关闭的事件并发送邮件。您仍然可以通过存储日期时间来定义关闭。该 bg 处理可以选择所有现在大于关闭日期且已处理位为假的事件。选择这些后，将它们放入持久队列（sql 中的表、azure 队列等......）。然后让后台处理排空队列。当它处理每个项目并发送邮件时，它会将事件更新为已处理。

您有多种后台处理选项：

1.  视窗服务
2.  在带有要处理的线程池的 proc 计时器中（仅当您有一个 AT 时才这样做）
3.  Azure 中的辅助角色
4.  Sql 代理作业

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T12:38:08.603

编写一个 Windows 服务，在设定的时间轮询数据库（我会说比拍卖的最短时间短一点。例如，说一天）。该服务将在内存中存储将在该时间内结束的动作，并每秒检查是否有结束的动作。对于已经结束的拍卖，触发您的 CLOSE 事件。

# iphone - 用户位置每 10 秒更新一次 wifi

> ID：11922187
> 
> 赞同：0
> 
> 时间：2012-08-12T12:33:02.337
> 
> 标签：iphone, gps, cllocationmanager

我试图从我的代码中每 10 秒更新一次用户位置。但是当我从 wifi 转移到 3G 时，我遇到了一个问题。每个备用请求都来自我的 wifi 所在的位置。可以做什么？

这是我的代码

NSNumber *n1; NSNumber *n2;

```
 if([ud boolForKey:@"applicationActive"])
    {

        n1 = [NSNumber numberWithDouble:[map.userLocation coordinate].latitude];
        n2 = [NSNumber numberWithDouble:[map.userLocation coordinate].longitude];
    }
    else
    {
        CLLocationManager *locationManager = [[CLLocationManager alloc] init];
        locationManager.delegate = self;
        [locationManager startUpdatingLocation];
        n1 = [NSNumber numberWithDouble:locationManager.location.coordinate.latitude];
        n2 = [NSNumber numberWithDouble:locationManager.location.coordinate.longitude];
        [locationManager stopUpdatingLocation];
    }

    [dict setObject:[ud objectForKey:@"CurrentDriverID"] forKey:@"DriverId"];
    [dict setObject:[n1 stringValue] forKey:@"Latitude"];
    [dict setObject:[n2 stringValue] forKey:@"Longitude"];

    [requestG SaveDriverlocationWS:dict delegate:self]; 
```

注意：发生这种情况时，应用程序将停留在前台。SaveDriverlocationWS 方法将当前位置保存到服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:41:50.033

您似乎没有为您的位置管理器设置准确度级别 - 我会尝试这样做，看看情况是否有所改善。从您的代码看来，您可能正在为驱动程序编写应用程序，在这种情况下，您可能希望使用`kCLLocationAccuracyBestForNavigation`准确度级别（如果您，您应该使用另一个更合适的级别，因为`BestForNavigation`过滤器会消耗*大量*功率并且经过精心设计适用于手机位于车载底座并通电的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:42:43.673

为了我的理解。使用 Wifi 或 3G 是系统级设置。CLLocationManager 使用当前系统的网络来获取设备的位置，而程序员无处可在 3G/Wifi 之间切换网络。

# nhibernate - Fluent NHibernate - 如何自定义“左连接”条件？

> ID：11922188
> 
> 赞同：0
> 
> 时间：2012-08-12T12:33:02.663
> 
> 标签：nhibernate, join, conditional-statements, fluent

有没有办法添加和自定义一些 LEFT JOIN 条件？我需要像下一个本机 SQL（Oracle 查询）一样生成它：

```
LEFT JOIN TableB B ON SomeStoredProc(MainTable.ColumnA || MainTable.ColumnB) = B.TableB_Key
LEFT JOIN TableC C ON C.Some_TableC_Column = B.Some_TableB_Column 
```

我需要两个 JOIN 在同一个查询中。

所以，我需要三点帮助：

*   如何添加 Storec 过程调用；
*   如何添加“||” （连接）运算符的使用；
*   如何将两个 LEFT JOIN 添加到同一个查询中？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:42:19.003

一些尝试的想法

*   `<bag property-ref="(SomeStoredProc( ColumnA || ColumnB))"`
*   `<bag where="(SomeStoredProc( ColumnA || ColumnB))"`
*   也许调整这个`<many-to-many formula="any SQL expression"`

# php - 如何根据 CodeIgniter 中 POST 方法中的值查询表

> ID：11922197
> 
> 赞同：0
> 
> 时间：2012-08-12T12:33:40.463
> 
> 标签：php, codeigniter

我对codeigniter相当陌生。

我的 views/check_availability/index.php 文件中有以下代码：

```
<?php $type = $_POST['type']; ?>

<a href="/reservation/check_availability/create">Create Reservation</a>

<?php foreach ($check_availability as $check_availability_item): ?>

    <h2><?php echo $check_availability_item['room_type'] ?></h2>
    <div id="main">
        <?php echo $check_availability_item['room_description'] ?>
    </div>
    <p><a href="check_availability/<?php echo $check_availability_item['id'] ?>">View article</a></p>

<?php endforeach ?> 
```

这是我在 models/check_availabiliy_model.php 文件下的代码

```
public function check_availability($type = FALSE)
{
    if ($type === FALSE)
    {
        $query = $this->db->get('lf_rooms');
        return $query->result_array();
    }

    $query = $this->db->get_where('lf_rooms', array('type' => $type));
    return $query->row_array();
} 
```

这是我的控制器/check_availability.php 文件中的代码

```
public function index()
{
    $data['check_availability'] = $this->check_availability_model->check_availability();
    $data['title'] = 'Available Roooms';

    $this->load->view('templates/header', $data);
    $this->load->view('check_availability/index', $data);
    $this->load->view('templates/footer');
} 
```

在views/check_availability/index.php 文件下，当我根据POST 方法（如$type = $_POST['type']）调用check_availability 函数时，我想过滤room_type 字段。

目前，这是我用来从 lf_rooms 表中查询所有记录的代码：

```
<?php foreach ($check_availability as $check_availability_item): ?> 
```

但是如何将 $type 变量的值传递给 check_availability 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:37:25.077

您应该`POST`在控制器中获取参数，相应地查询数据库并仅在视图中显示结果。该视图不应包含任何逻辑。

```
public function index()
{
    $type = $this->input->post('type', TRUE);

    $data['check_availability'] = $this->check_availability_model->
                                  check_availability($type);
} 
```

# matlab - matlab - 具有单位阶跃函数的图形绘图

> ID：11922198
> 
> 赞同：0
> 
> 时间：2012-08-12T12:33:44.777
> 
> 标签：matlab

我想`x=(a^n)*u(n)`在matlab中绘图。这是代码： `u(n)`这里表示单位阶跃函数。

```
clc;
clear all;
close all;
a = input('Enter variable:');
n=[-7:1:7];
for i=1:size(n,2)
    if(n(i) > 1)
       x(i)=a.^n(i);
    else
        x(i)=0;
    end
end
subplot(2,1,1);
plot(n(i),x(i));
title('function x(n)');
xlabel('n value');
ylabel('x value'); 
```

当我执行代码时，它没有显示所需的输出。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:38:41.150

它只绘制一个数据点：

```
plot(n(i),x(i)); 
```

将其替换为

```
plot(n,x); 
```

如您所见，这输入了整个向量`n`，`x`而不仅仅是第`i`th 个元素`x(i)`和`n(i)`。

# php - 在 codeIgniter 中使用 zend_soap_autoDiscover

> ID：11922200
> 
> 赞同：0
> 
> 时间：2012-08-12T12:34:00.900
> 
> 标签：php, web-services, zend-framework, codeigniter

我在我的 CodeIgniter 上安装 zend_framework 并加载“Zend/Soap/AutoDiscover”。现在我想向 autoDiscover 添加功能并为其生成 WSDL。这就是我所做的：

```
class Api extends CI_Controller {

public function update_profile() {

    $this->load->library('zend');
    $this->zend->load('Zend/Soap/AutoDiscover');

    $autodiscover = new Zend_Soap_AutoDiscover();
    $autodiscover->addFunction( 'hello' );
    $autodiscover->handle();
}

public function hello() {
    return "Hello world";
} 
```

}

我应该怎么做才能解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:50:14.027

这是因为在方法中`Zend_Soap_AutoDiscover`需要简单的全局函数而不是方法名称`addFunction`。如果您查看堆栈跟踪，您将看到您添加的参数将在下一行进行检查（就在抛出异常之前）：

```
if (!is_string($function) || !function_exists($function)) {
    // exception is thrown here
} 
```

您可以使用的是[`setClass`](http://framework.zend.com/manual/en/zend.soap.autodiscovery.html#zend.soap.autodiscovery.class)方法。有了这个，您可以公开一个类的每个公共方法。为此，您可能会发现定义一个不同的类而不是一个执行实际工作的构造函数更可行，如果您有一个控制器，那么只需从那里委托给服务类。

# html - SEO：摄影师名单，一张照片加标题： 或者 ?

> ID：11922203
> 
> 赞同：0
> 
> 时间：2012-08-12T12:34:27.740
> 
> 标签：html, seo

我有一份摄影师名单，每人一张照片和一个标题。结构如下所示：

```
<ul>
<li title='John Doe'>
    <div class='item' id='123'>
        <span class='left'>John Doe</span>
        <span class='right'>USA</span>
    </div>
    <div class='expand'>
        <img class='photo' src='' alt='John Doe'/>
        <p>The caption</p>
    </div>
</li>
</ul> 
```

（.expand是`display:none`CSS，点击上面的div设置图片源，图片一加载就用JS向下滑动内容。）

现在，就 SEO 而言，这样构建列表会更好吗？

```
<dl>
<dt title='John Doe' id='123'>
    <span class='left'>John Doe</span>
    <span class='right'>USA</span>
</dt>
<dd>
    <img class='photo' src='' alt='John Doe'/>
    <p>The caption</p>
</dd>
</dl> 
```

或者只要查询“John Doe”以某种方式出现一次或两次，谷歌就不会给予太多关注吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:42:37.927

在这种情况下，语义无关紧要。内容是一样的。

不过，我会说，在`dt`or`li`元素上使用标题标签是非常多余的。这实际上是在为用户提供服务吗？随着谷歌打击这样的过度优化，你最好问问自己它对谁有用。

如果您想利用摄影师对他们信息的“占有”，您应该使用微格式。具体来说，hCard：

[http://microformats.org/code/hcard/creator](http://microformats.org/code/hcard/creator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:17:23.777

语义很重要！！

要实现 100% 语义化并改善 SEO，您应该这样做：

使用 a `<dl>`，因为您有一个术语（*名称*）和该术语的定义（*照片*）

```
<dl>
<dt title='John Doe' id='123'>//id's can never be a number
    <span class='left'>John Doe</span>
    <span class='right'>USA</span>
</dt>
<dd>
  <figure>
    <img class='photo' src='' alt='John Doe'>// no closing slash needed
    <figcaption>The caption</figcaption>
  <figure>
</dd>
</dl> 
```

您应该在 id 属性中修复该数字

# c - 为什么这个简单的 c 代码片段不起作用

> ID：11922206
> 
> 赞同：0
> 
> 时间：2012-08-12T12:34:40.010
> 
> 标签：c, file-io

我只想创建一个小型**加密程序**，我想从文件中读取字符并将 i 的当前值添加到字符中并将其存储在一个新文件中。

> 示例：**abcd**应存储为**aceg**

这是代码片段：

```
main()
{
   int i=0,c;
   char filename[30],o_filename[30];
   FILE *file,*outfile;
   printf("\nEnter filename:");
   scanf("%s",&filename);
   printf("\nEnter output filename : ");
   scanf("%s",&o_filename);
   if( ( (file = fopen(filename,"a"))==NULL) || ((outfile = fopen(o_filename,"a+"))==NULL))
   printf("\nERROR - Cannot proceed");
   else
   {
       c = 0;
       while(c!=-1)
       {
                   c = getc(file);
                   putc((c+i),outfile);
                   i++;
       }
       printf("\nEncryption Successful!\n");
    }
    getch();
} 
```

上述程序有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:36:20.633

这个函数`getc`返回一个`int`，而不是一个`char`。`EOF`不能在 a 中表示`char`。

在循环中更改`c`to的类型`int`并进行测试。`EOF`

### 编辑

要纠正 marc 发现的一个错误，您可以尝试以下成语：

```
while ((c = getc(file)) != EOF) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:50:07.080

正如 cnicutar 所指出的，getc 返回一个 int，因此`c`应该声明为`int c`.

首先，正如 cnicutar 所指出的，您需要比较`c`,`EOF`即`while (c != EOF)`。另外，当你遍历文件并到达结尾时，会发生什么？在最后一次迭代中，`c = getc(file)`将是，`EOF`但您仍在使用它来`putc(EOF+i,outfile)`.

尝试以下两种方法之一来解决此问题：

```
 do {
        c = getc(file);
        putc(c+i, outfile);
        i++;
    } while (c != EOF); 
```

或者

```
 c = getc(file);
    while (c != EOF) {
        putc(c+i, outfile);
        i++;
        c = getc(file);
    } 
```

编辑

正如 cnicutar 所指出的，最后一个片段可以使用一个常见的`getc`成语进行压缩，如下所示：

```
 while ((c = getc(file)) != EOF) {
        putc(c+i, outfile);
        i++;
    } 
```

# frameworks - 如何在 Yii 框架的一个页面上使用多个控制器方法？

> ID：11922213
> 
> 赞同：2
> 
> 时间：2012-08-12T12:35:35.670
> 
> 标签：frameworks, yii

我想知道如何在仅访问一个控制器（在 Yii 框架中）的同时呈现多个控制器方法。因此，例如在浏览器中调用“controller/SiteController.php”（方法“actionIndex”）。

*   Witch 首先渲染“controller/UserController.php”的输出（方法“actionDetails”->“views/user/details.php”）。
*   之后还会为页面的其余部分呈现“controller/SiteController.php”（方法“actionIndex”->“views/site/index.php”）的输出。

希望有人可以帮忙？我对 Yii 还是有点陌生​​。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:20:08.500

可以做到，毕竟动作也是函数不是吗..所以我们可以调用它..

在渲染后的第一个操作中。创建所需控制器的实例，在您的情况下为 SiteController，在您的情况下调用它的成员函数`actionIndex()`。

```
Yii::import('application.controllers.SiteController');
$controller_instance = new SiteController("Site"); //string $id, CWebModule $module=NULL
$controller_instance->actionIndex(); 
```

[控制器构造文档](http://www.yiiframework.com/doc/api/1.1/CController#__construct-detail)

**理想情况下，作为 mvc 实践，您不应该这样做，而是从页面发出单独的 ajax 请求以从单独的操作中获取内容。**

# jquery - jQuery Mobile 重置下拉表单

> ID：11922215
> 
> 赞同：2
> 
> 时间：2012-08-12T12:36:03.740
> 
> 标签：jquery, forms, jquery-mobile

我正在尝试在我的表单上设置一个重置按钮。

该代码有效，但不会刷新下拉表单。所以它的值为 0，但它没有显示它的新值。

我怎么解决这个问题？

```
<script>
$('#btn-reset').live('click', function() {
$("select#Wiel").selectedIndex = 0;  //this works
    $("select#Wiel").selectmenu({'refresh': true});   /this doesn't work
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:38:54.553

```
$("select#Wiel").selectedIndex = 0;  // this works 
```

不，它不起作用，因为 jQuery 对象没有`selectedIndex`属性，你应该先将 jQuery 对象转换为 DOM 对象：

```
$("select#Wiel")[0].selectedIndex = 0;  // this does work 
```

或者：

```
document.getElementById('Wiel').selectedIndex = 0; 
```

# php - 我想在用户关闭浏览器并且单击浏览器的后退按钮时自动注销用户

> ID：11922217
> 
> 赞同：0
> 
> 时间：2012-08-12T12:36:14.940
> 
> 标签：php, session, cookies, login

**我的 logout.php 代码**

```
<?php 
 $past = time(0); 
 setcookie(ID_my_site, gone, $past); 
 setcookie(Key_my_site, gone, $past); 
 header("Location: index.php"); 
 ?> 
```

当他/她关闭浏览器并且他/她单击浏览器的后退按钮时，我需要在此代码中添加什么以便注销用户？

**我的 login.php 代码**

```
<?php 
$page = "login";
mysql_connect("localhost","root","");
mysql_select_db("nell");
 if(isset($_COOKIE['ID_my_site']))
 { 
    $username = $_COOKIE['ID_my_site']; 
    $pass = $_COOKIE['Key_my_site'];
        $check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error());
    while($info = mysql_fetch_array( $check ))  
        {
        if ($pass != $info['password']) 
            {                       }
        else
            {header("Location: members.php");}
        }
    }
 if (isset($_POST['submit'])) { 
    if(!$_POST['username'] | !$_POST['pass']) 

    { header("Location: error.php");}

    if (!get_magic_quotes_gpc()) {
        $_POST['email'] = addslashes($_POST['email']);
    }
    $check = mysql_query("SELECT * FROM users WHERE username = '".$_POST['username']."'")or die(mysql_error());
 $check2 = mysql_num_rows($check);
 if ($check2 == 0) 

    { header("Location: error2.php");}

 while($info = mysql_fetch_array( $check ))     
 {
 $_POST['pass'] = stripslashes($_POST['pass']);
    $info['password'] = stripslashes($info['password']);
    $_POST['pass'] = md5($_POST['pass']);
if ($_POST['pass'] != $info['password']) 

        { header("Location: error3.php");}

     else 
 { 
     $_POST['username'] = stripslashes($_POST['username']); 
     $hour = time() + 3600; 
 setcookie(ID_my_site, $_POST['username'], $hour); 
 setcookie(Key_my_site, $_POST['pass'], $hour);   
 header("Location: members.php"); 
 } 
 } 
 } 
 else 
{    }
 ?> 
```

请帮助，当他/她关闭浏览器并且他/她单击浏览器的后退按钮时，我想自动注销用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:39:59.827

您无法在 PHP 中确定用户何时关闭浏览器 - 就 PHP 而言，页面被发送给用户，PHP 完成了它。

*您可以*使用会话来更好地与用户机器联系，而不是使用 cookie 。您可以执行诸如将会话超时设置为仅几分钟之类的操作，但这会冒着阅读速度较慢或花时间在页面之间移动的人将被锁定的风险。

如果您想在用户注销时成为真正的吝啬鬼，您可能必须在常规“签入”中执行类似 javascript'ing 的操作，将数据发送到服务器以保持会话处于活动状态 - 这还有一个简短的会话时间可能会达到您正在寻找的结果。

编辑：您发布的代码还显示了旧`mysql_*`功能，以及访问数据库的 root 用户和无密码。请死神告诉我您刚刚将该用户插入为占位符。其次，请继续使用 PDO 或 mysqli 以避免让您的网站被第一个恼火的用户淹没。

您甚至没有检查`$_POST`包含用户名“bob; drop table users;”的数据。这意味着我可以将其弹出，您的网站是*kaput*。谷歌 SQL 注入，修复你的代码。马上。严重地。

编辑 2：正如 Adnan 指出的那样，您可以将 cookie 的到期日期设置为`0`只有在会话打开时才会保留。我通常认为将用户名保留在 cookie 中很好，但是让用户输入密码对安全性更好，您也可以采用这种方法。

编辑 3：根据您的代码：

```
<?php 
    $page="logout"; 
    $security=true; 
    session_start(); 
    if (!isset($_SESSION['EXPIRES']) || $_SESSION['EXPIRES'] < time()+3600) 
    { 
        session_destroy(); 
        $_SESSION = array(); 
    } 
    $_SESSION['EXPIRES'] = time() + 3600; 
    header("location: login_admin.php"); 
?> 
```

为什么不按照以下方式设置会话变量：

```
$_SESSION['isAdmin']=true; 
```

当他们登录管理功能并将其更改为`false`退出管理功能时？无需终止整个会话，只需更改其中保留的单个变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T12:48:35.363

您可以使用 javascript unload 事件作为触发器来回发到您的 PHP 代码。

[http://api.jquery.com/unload/](http://api.jquery.com/unload/)

# xcode - NSArray 对初学者的帮助。Cocos2s / 2d 平台游戏

> ID：11922220
> 
> 赞同：0
> 
> 时间：2012-08-12T12:36:34.757
> 
> 标签：xcode, cocos2d-iphone, nsmutablearray, collision

我正在努力解决问题`NSMutableArrays`，需要一些帮助。

我正在尝试测试散落在关卡中的“玩家”和“硬币”的碰撞，就像传统的马里奥一样。

我收到一个崩溃报告' *** Collection <__NSArrayM: 0x4bf6d0> 在被枚举时发生了变异。

我遵循了类似的精灵碰撞方法：http: [//geekanddad.wordpress.com/2010/06/22/enemies-and-combat-how-to-make-a-tile-based-game-with-cocos2d -第 3 部分/](http://geekanddad.wordpress.com/2010/06/22/enemies-and-combat-how-to-make-a-tile-based-game-with-cocos2d-part-3/)

出于某种原因，如果只产生 1 个硬币，一切正常 - 但是如果产生 > 1 个硬币，任何硬币碰撞都会引发崩溃。

我知道这是一个菜鸟问题，与 [delete addObject:nuCoin] 相关；- 我环顾四周并阅读了制作一个子数组来处理删除功能 - 但是我显然迷路了，希望能得到帮助，在此先感谢！

```
-(void) coinCollision {

    NSMutableArray *coinsToDelete = [[NSMutableArray alloc] init];
    NSMutableArray *delete = [[NSMutableArray alloc] init];

    for (CCSprite *nuCoin in _coins) {

        CGRect coinRect = CGRectMake((nuCoin.position.x+1) - (nuCoin.contentSize.width/4),
                                     (nuCoin.position.y+5) - (nuCoin.contentSize.height/4),
                                     nuCoin.contentSize.width/3.5,
                                     nuCoin.contentSize.height/7);

    for (CCSprite *Player in _player) {
        CGRect playerRect = CGRectMake(player.position.x - (player.contentSize.width/4),
                                    player.position.y - (player.contentSize.height*.05),
                                    player.contentSize.width*.05,
                                    player.contentSize.height/2);

            if (CGRectIntersectsRect(coinRect, playerRect)) {

                [coinsToDelete addObject:nuCoin];}

        }

    for (CCSprite *nuCoin in coinsToDelete) {

        [[SimpleAudioEngine sharedEngine] playEffect:@"Coin.mp3"];
        [_coins removeObject:nuCoin];

        [delete addObject:nuCoin];
        [map removeChild:nuCoin cleanup:YES];

    }

    }

    [delete release];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:42:57.577

您不能在快速枚举`for(...in...)`循环中向/从可变数组添加或删除对象。您需要开发一些其他逻辑来完成这项工作（例如，存储要删除的对象的索引，或者以其他方式将它们标记为可删除，并在完成 for 循环后，一步删除所有对象。）

例子：

```
NSMutableArray *markedAsDeletee = [NSMutableArray array];
for (CCSprite *sprite in array)
{
    if (/* decide wheteher this sprite should be deleted */)
        [markedAsDeletee addObject:sprite];
}

[array removeObjectsInArray:markedAsDeletee]; 
```

# strsep - 为什么strsep段错误

> ID：11922222
> 
> 赞同：2
> 
> 时间：2012-08-12T12:36:36.910
> 
> 标签：strsep

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() {
  char *buf = "2012/9/8";
  char sep[] = "/";
  char *token;
//  char *bp = strdup(buf);
  char *bp = buf;
  while ((token = strsep(&bp,sep))) {
    printf("tok = `%s'\n", token);
  }
  free(bp);
  return 0;
} 
```

如果我不使用 strdup。分配“char *bp = buf”。那么上面的程序就会出现段错误。gdb 输出如下：

```
Program terminated with signal 11, Segmentation fault.
#0  0x00007fcc949c13b5 in strsep () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) bt
#0  0x00007fcc949c13b5 in strsep () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00000000004005d5 in main () at str_split.c:11 
```

程序有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:39:00.167

> 如果我不使用 strdup。分配“char *bp = buf”。那么上面的程序就会出现段错误。

它可能必须`buf`指向无法合法写入的内存，在这种情况下是字符串文字。如果您使用`strdup`，您将写入自己的可写副本。

# xcode - Xcode 4.4.1 让自己感到困惑（我认为）

> ID：11922224
> 
> 赞同：2
> 
> 时间：2012-08-12T12:36:50.230
> 
> 标签：xcode

哇，这令人沮丧。

最近升级到 OS X 10.8 和 Xcode 4.4.1 当 Xcode 似乎忘记了符号和方法时，我工作得很好。它开始认为有很多东西没有定义、声明、合成等，而实际上它们都很好（项目构建得很好，在某些情况下，符号就在文件中）。此外，问题的数量也在跳跃。通常它会在一个文件（AppDelegate）中发现 4 个问题，但是如果您查看其中任何一个错误，它会迅速将问题提升到 13 或 14 个。这些较新的问题似乎主要是您在不导入头文件时遇到的类型但这从来都不是问题。

在 SO 中环顾四周，我发现有时人们会清除 DerivedData 文件夹或其他各种技巧。我创建了一个 DerivedData2 文件夹并指向它，但这并没有解决问题。

我正在使用 git，但并没有经常承诺退回到理想的点（工作会丢失/是的，吸取的教训）。我还在 SO 上读到，有时是 git 文件会让人感到困惑。

对不起，这太笼统了。关于重置什么/如何重置以消除 Xcode 的困惑有什么建议吗？我希望这不是 Xcode 4.4.1 的特性！我不排除这是我做过的事情……但我认为值得询问 Xcode 问题以及人们如何处理这些问题。

**编辑：** @Abizem 的把戏有很大帮助。现在我真的只剩下一个问题，所以我可以深入了解细节。请记住，这段代码运行良好，只是停止了。在 AppDelegate 中，我有 .h：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate> 
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tbc;
@end 
```

然后在.m

```
@implementation AppDelegate
@synthesize window = _window;
@synthesize tbc = _tbc; 
```

这几乎就像有一个错字，但我不这么认为。我得到的错误是`Property implementation must have its declaration in interface 'AppDelegate'`指向该`@synthesize tbc`行。没有比这更基本的了。为什么 Xcode 不能识别这个？

**编辑 2：** 在`@synthesize`for`window`和`tbc`注释掉的情况下，以下几行都抱怨`property tbc not found on object type AppDelegate *`. 顺便说一句，这些问题在我发表评论之前就已经存在，我认为它们与投诉有关`property declaration... interface`，并且在修复后会消失，但显然不是。Xcode 根本不再知道在哪里/什么`tbc`。没有覆盖这些对象的任何方法。我一定有一个恶作剧鬼！

```
self.tbc = [[UITabBarController alloc] init];       
self.tbc.viewControllers = [NSArray arrayWithObjects:gameVC, settingsVC, helpVC, nil];
self.window.rootViewController = self.tbc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:47:55.117

@Abizem @Mazyod 发现了问题。我的大部分`#import`陈述都在 pch 中。显然，新的 Xcode 对这种做法感到不满。我将它们移动到适当的文件中，它又可以工作了。我的电脑里只剩下苹果的东西了。我还删除了我的 Snapshots 和 DerivedData 文件夹，并清理了一大堆。我不确定删除文件夹是否真的是修复的一部分。

# java - 如何使用 php 'exec' 运行带有输入参数的 .jar

> ID：11922225
> 
> 赞同：0
> 
> 时间：2012-08-12T12:36:50.243
> 
> 标签：java, php, jar, command-line-arguments

我有一个运行“.jar”文件的 php 文件。代码如下

```
exec("java -Xmx1g -jar \"C:\Users\Roxy\Documents\NetBeansProjects\Entity Extraction\dist\Entity Extraction.jar",$output); 
```

这工作正常，没有任何错误
但是现在我需要使用这个命令将一个数组（比如说**$testArray**）传递给“Entity Extraction.jar”文件，并在我的 java 代码中的 main 方法中访问它。

谁能告诉我该怎么做？

**更新：**

在我的 php 文件中，我有

```
$testArr[0] = 'test1';
$testArr[1] = 'test2'; 

$str = "java -Xmx1g -jar \"C:\Users\Roxy\Documents\NetBeansProjects\Entity Extraction\dist\Entity Extraction.jar ";

foreach($testArr as $param){
 $str.=$param.' ';
}

exec($str,$output);
print_r($output); 
```

在我的java主类中，我有

```
public static void main(String[] args) {
     int length = args.length;
     for (int i = 0; i < length; i++) {
          System.out.println(args[i]);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:48:38.380

在命令行中运行 jar 时，`Extraction.jar`以空格分隔的每个参数都将自动进入 args 数组。

所以你需要在数组上运行并构建你想要传递的字符串：

```
 $str = "java -Xmx1g -jar \"C:\Users\Roxy\Documents\NetBeansProjects\Entity Extraction\dist\Entity Extraction.jar ";

foreach($testArr as $param){
 $str.=$param.' ';
}

exec($str,$output); 
```

这是假设数组只包含字符串或数字。如果它包含对象或其他数组，则需要稍微操作此代码，但您明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:39:44.077

您可以通过`print_r($testArray,true);`，也可以编写一个循环遍历数组并创建列表的函数。

# c++ - 多态性：运行时铸造指针

> ID：11922228
> 
> 赞同：1
> 
> 时间：2012-08-12T12:36:56.877
> 
> 标签：c++, inheritance, pointers, casting, void-pointers

我很好奇将指针转换为派生类和基类实际上是如何工作的。这是一个例子：

```
struct A {};
struct B : A {};

// Boxing a pointer to an instance of B
void* p = new B(); 
```

现在，假设我想通过指针 p 访问 A 的可能成员或方法。

```
A* a1 = (A*)p;
A* a2 = (A*)((B*)p); 
```

哪一个是正确的？有什么区别吗？
你能告诉我在哪里可以获得关于这个主题的更多信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:43:02.293

在这种情况下，实践上没有区别。

但是[如果有多重继承](http://ideone.com/sqyBm)可能会有区别：

```
#include <cstdio>

struct A { int x; };
struct B { int y; };

struct C : B, A {};

int main() {
    void* c = new C();
    printf("%p\n", c);             // 0x1000
    printf("%p\n", (A*) c);        // 0x1000
    printf("%p\n", (A*) ((C*) c)); // 0x1004
    return 0;
} 
```

或者子类有虚拟方法但父类没有^([1])，包括使用虚拟继承^([2])。

就标准而言，由于 OP 使用 C 风格转换，[在这种情况下相当于`static_cast`](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast).

转换序列`B*`→ `void*`→ `B*`→`A*`是有效的，其中前两个转换将返回与 §5.2.9[expr.static.cast]/13 要求的相同的指针，最后一个转换用作指针转换 §4.10[conv .ptr]/3。

但是，强制转换序列`B*`→ `void*`→`A*`实际上会给出*未定义*的结果，因为在 §5.2.9/13 ☺ 中没有定义结果。

* * *

[[1]](http://ideone.com/PizkU)：

```
#include <cstdio>

struct A { int x; };
struct C : A { virtual void g() {} };

int main() {
    void* c = new C();
    printf("%p\n", c);              // 0x1000
    printf("%p\n", (A*) c);         // 0x1000
    printf("%p\n", (A*) ((C*) c));  // 0x1008
    return 0;
} 
```

[[2]](http://ideone.com/4oCXu)：

```
#include <cstdio>

struct A { int x; };
struct C : virtual A {};

int main() {
    void* c = new C();
    printf("%p\n", c);              // 0x1000
    printf("%p\n", (A*) c);         // 0x1000
    printf("%p\n", (A*) ((C*) c));  // 0x1008
    return 0;
} 
```

# android - Android 微调器样式

> ID：11922230
> 
> 赞同：0
> 
> 时间：2012-08-12T12:37:10.693
> 
> 标签：android, styles, spinner

如何制作像[Spinner](http://developer.android.com/guide/topics/ui/controls/spinner.html)这样的微调器样式？我的意思不是在个人对话中。例如，我会很高兴。

我需要一些东西：

![例子](../Images/b47e105df9a028e33435f8e09593dc0f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:13:01.513

Spinner 的外观因用户运行的 android 版本而异。

这是 android 2.x 中 Spinner 的样子：

![Android 2.x 中的微调器 UI](../Images/be73e56a3ab9061c9ecff264c23f009e.png)

这是 Spinner 在运行 Android 4.x 的手机上的样子：

![Android 4.x 中的微调器 UI](../Images/30e737708c268b57a92e431f6b03ad4a.png)

第二张图片中的选项菜单不是 Spinner。它是 应用程序的[ActionBar中的](http://developer.android.com/guide/topics/ui/actionbar.html)[ListPopupWindow](http://developer.android.com/reference/android/widget/ListPopupWindow.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:48:12.207

只需将微调器添加到您的布局中，如下所示：

```
<Spinner
      android:id="@+id/spinner"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:prompt="@string/planet_prompt" /> 
```

# php - PayPal IPN 处理程序不再插入数据库

> ID：11922232
> 
> 赞同：1
> 
> 时间：2012-08-12T12:37:23.400
> 
> 标签：php, mysql, sql, paypal, paypal-ipn

我的 IPN 处理程序不再向“付款”表中插入任何值。交易仍在 PayPal 沙箱中完美进行。我也尝试过使用 IPN 模拟器，它显示“IPN 发送成功”，但表格中仍然没有插入任何内容。

上周我确实让它运行良好，但从那以后对网站进行了一些更改，我无法弄清楚哪些更改对此产生了影响。

非常感谢您对此的任何帮助。

这是我正在使用的表格

```
<form class="paypal" action="payments.php" method="post" id="paypal_form" target="_blank">    
    <input type="hidden" name="cmd" value="_xclick" /> 
    <input type="hidden" name="no_note" value="1" />
    <input type="hidden" name="currency_code" value="AUD" />
    <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynow_LG.gif:NonHostedGuest" />
    <input type="hidden" name="item_name" value="Membership" />
    <input type="hidden" name="item_number" value="Membership" />
    <input type="submit"  value="Submit Payment"/>
</form> 
```

这是我的 IPN 处理程序/侦听器 (payments.php)

```
<?php
// Database variables
$host = "localhost"; //database location
$user = "xxxx"; //database username
$pass = "xxxx"; //database password
$db_name = "xxxx"; //database name

// PayPal settings
$paypal_email = 'xxxx@xxxx.com';
$return_url = 'xxxx';
$cancel_url = 'xxxx';
$notify_url = 'xxxx';

$item_amount = $_POST["item_amount"];

// Include Functions
function check_txnid($tnxid){
    global $link;
    return true;
    $valid_txnid = true;
    //get result set
    $sql = mysql_query("SELECT * FROM `payments` WHERE txnid = '$tnxid'", $link);       
    if($row = mysql_fetch_array($sql)) {
        $valid_txnid = false;
    }
    return $valid_txnid;
}

function check_price($price, $id){
    $valid_price = false;
    //you could use the below to check whether the correct price has been paid for the product

    /* 
    $sql = mysql_query("SELECT amount FROM `products` WHERE id = '$id'");       
    if (mysql_numrows($sql) != 0) {
        while ($row = mysql_fetch_array($sql)) {
            $num = (float)$row['amount'];
            if($num == $price){
                $valid_price = true;
            }
        }
    }
    return $valid_price;
    */
    return true;
}

function updatePayments($data){ 
    global $link;
    if(is_array($data)){                
        $sql = mysql_query("INSERT INTO `payments` (txnid, payment_amount, payment_status, itemid, createdtime) VALUES (
                '".$data['txn_id']."' ,
                '".$data['payment_amount']."' ,
                '".$data['payment_status']."' ,
                '".$data['item_number']."' ,
                '".date("Y-m-d H:i:s")."' 
                )", $link);

    return mysql_insert_id($link);
    }
}

//Database Connection
$link = mysql_connect($host, $user, $pass);
mysql_select_db($db_name);

// Check if paypal request or response
if (!isset($_POST["txn_id"]) && !isset($_POST["txn_type"])){

    // Firstly Append paypal account to querystring
    $querystring .= "?business=".urlencode($paypal_email)."&";  

    // Append amount& currency (£) to quersytring so it cannot be edited in html

    //The item name and amount can be brought in dynamically by querying the $_POST['item_number'] variable.
    $querystring .= "item_name=".urlencode($item_name)."&";
    $querystring .= "amount=".urlencode($item_amount)."&";

    //loop for posted values and append to querystring
    foreach($_POST as $key => $value){
        $value = urlencode(stripslashes($value));
        $querystring .= "$key=$value&";
    }

    // Append paypal return addresses
    $querystring .= "return=".urlencode(stripslashes($return_url))."&";
    $querystring .= "cancel_return=".urlencode(stripslashes($cancel_url))."&";
    $querystring .= "notify_url=".urlencode($notify_url);

    // Append querystring with custom field
    //$querystring .= "&custom=".USERID;

    // Redirect to paypal IPN
    header('location:https://www.sandbox.paypal.com/cgi-bin/webscr'.$querystring);
    exit();

}else{

    // Response from Paypal

    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}',$value);// IPN fix
        $req .= "&$key=$value";
    }

    // assign posted variables to local variables
    $data['item_name']          = $_POST['item_name'];
    $data['item_number']        = $_POST['item_number'];
    $data['payment_status']     = $_POST['payment_status'];
    $data['payment_amount']     = $_POST['mc_gross'];
    $data['payment_currency']   = $_POST['mc_currency'];
    $data['txn_id']         = $_POST['txn_id'];
    $data['receiver_email']     = $_POST['receiver_email'];
    $data['payer_email']        = $_POST['payer_email'];
    $data['custom']             = $_POST['custom'];

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 

    if (!$fp) {
        // HTTP ERROR
    } else {    

        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            if (strcmp($res, "VERIFIED") == 0) {

                // Used for debugging
                //@mail("you@youremail.com", "PAYPAL DEBUGGING", "Verified Response<br />data = <pre>".print_r($post, true)."</pre>");

                // Validate payment (Check unique txnid & correct price)
                $valid_txnid = check_txnid($data['txn_id']);
                $valid_price = check_price($data['payment_amount'], $data['item_number']);
                // PAYMENT VALIDATED & VERIFIED!
                if($valid_txnid && $valid_price){               
                    $orderid = updatePayments($data);       
                    if($orderid){                   
                        // Payment has been made & successfully inserted into the Database                              
                    }else{                              
                        // Error inserting into DB
                        // E-mail admin or alert user
                    }
                }else{                  
                    // Payment made but data has been changed
                    // E-mail admin or alert user
                }                       

            }else if (strcmp ($res, "INVALID") == 0) {

                // PAYMENT INVALID & INVESTIGATE MANUALY! 
                // E-mail admin or alert user 

                // Used for debugging
                //@mail("you@youremail.com", "PAYPAL DEBUGGING", "Invalid Response<br />data = <pre>".print_r($post, true)."</pre>");
            }       
        }       
    fclose ($fp);
    }   
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:22:21.773

事实证明我的代码没有任何问题，调试后我发现 IPN 没有使用 PayPal 的沙盒进行验证（所以这显然是他们的问题）。但是当我通过真正的 PayPal 网站运行它时，它运行良好。

感谢 Michael 对 SQL 注入的提醒。

# spring - 如何从 JSF ManagedBean 的构造函数调用 BOC 代码？

> ID：11922246
> 
> 赞同：0
> 
> 时间：2012-08-12T12:39:33.993
> 
> 标签：spring, jsf-2, dependency-injection, managed-bean

我有一个 ManagedBean 说 clsA，在这个 clsA 里面有一个 BOC 对象，它将用 DI 填充。如果我想在 clsA 构造过程中调用 BOC，我将在 clsA 构造函数中进行。代码将如下所示：

```
@ManagedBean(name="clsA") 
public class ClsA {

    private BOC boc;

    public clsA(BOC theBoc) {
       theBoc.doFuncA();
    }

    public String doFuncD() { return ""; }       
 } 
```

Spring 配置将具有以下内容：

```
<bean id="theBoc" class="com.foo.BOC"/>

<bean id="clsA" class="com.foo.clsA">
   <constructor-arg value="theBoc"/>
</bean> 
```

现在我发现了一个问题，如果我`clsA`在 Spring 配置中声明了 bean，我的 JSF bean`clsA`与 Spring 配置中的声明同名，将无法工作。这意味着如果我`doFuncD()`从 JSF 调用，它不会被调用。如果我删除`clsA`Spring 声明，JSF bean`clsA`工作正常。

有没有更好的方法从 managedBean`ClsA`构造函数调用 BOC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:48:29.053

我在这个问题上的工作是：

1.  我将删除构造函数代码。不再有构造函数级别的依赖注入。
2.  将`theBoc.doFuncA();`from 构造函数移动到`ClsA`.
3.  `clsA`从 Spring 配置文件中删除 Spring bean声明。

这是修改后的代码：

```
@ManagedBean(name="clsA") 
public class ClsA {

  private BOC boc;

  public clsA(BOC theBoc) {
  }

  public String doFuncD() { return ""; }

  public void setBoc(BOC boc) {
    this.boc = boc;
    theBoc.doFuncA();
  }
} 
```

但是我如何确保 setter 只会被调用一次呢？

# node.js - Node.js：Nginx 不会提供静态内容

> ID：11922251
> 
> 赞同：2
> 
> 时间：2012-08-12T12:40:22.087
> 
> 标签：node.js, nginx

我正在尝试通过我的 node.js 应用程序上的 nginx 提供静态内容。对于看似简单明了的设置，我无法通过 nginx 路由静态内容。有了这条线：

```
 location ~* ^.+\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$ {
                    access_log off;
                    expires max;
    } 
```

nginx 不提供任何静态内容（js、css、图像） - 但在删除它时，我看到显示静态内容。在节点方面，我使用的是 express 和 jam。

nginx.conf： [https ://gist.github.com/3331669](https://gist.github.com/3331669)

默认： [https ://gist.github.com/3331674](https://gist.github.com/3331674)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:21:12.503

尝试以下操作：

```
location ~  \.(jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$ {
  access_log off;
  expires max;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:15:10.813

尝试以下

```
location ~*  .*\.(jpe?g|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html?)$ {
  access_log off;
  expires max;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T13:39:46.253

尝试

```
location ~* .*\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$ {
        access_log off;
        expires max;
        root /var/www/yoursitename/public;
    } 
```

# java - 在 Java 中读取 pgm 文件

> ID：11922252
> 
> 赞同：0
> 
> 时间：2012-08-12T12:40:31.610
> 
> 标签：java, pgm

我需要读取一个 pgm 文件并将其中包含的值数组存储在一个二维数组中。在 PGM 格式中，每个像素由 0 到 MaxVal 之间的灰度值指定。前三行给出了与图像相关的信息：幻数、高度、宽度和 maxVal。该文件还包括空格。以# 开头的行是注释。这是我写到现在的。

```
public class PGM{

public static void main(String args[]) throws Exception {
    FileInputStream f = new FileInputStream("C:\\......\\brain_001.pgm");
    DataInputStream d = new DataInputStream(f);
    d.readLine();//first line contains P5
    String line = d.readLine();//second line contains height and width
    Scanner s = new Scanner(line);
    int width = s.nextInt();
    int height = s.nextInt();
    line = d.readLine();//third line contains maxVal
    s = new Scanner(line);
    int maxVal = s.nextInt();
    byte[][] im = new byte[height][width];
    for (int i = 0; i < 258; i++) {
        for (int j = 0; j < 258; j++) {
            im[i][j] = -1;
        }
    }
    int count = 0;
    byte b;
    try {
        while (true) {
            b = (byte) (d.readUnsignedByte());
            if (b == '\n') { //do nothing if new line encountered
            } else if (b == '#') {
                d.readLine();
            } else if (Character.isWhitespace(b)) { // do nothing if whitespace encountered
            } else {
                im[count / width][count % width] = b;
                count++;
            }
        }
    } catch (EOFException e) {
    }
    System.out.println("Height=" + height);
    System.out.println("Width=" + height);
    System.out.println("Required elemnts=" + (height * width));
    System.out.println("Obtained elemnets=" + count);

}
} 
```

当程序运行时，我得到以下输出：

```
Height=258
Width=258
Required elemnts=66564
Obtained elemnets=43513 
```

元素的数量（每个对应一个灰度值）少于所需的数量。当我用 PGM 查看器打开文件时，一切都正确显示。此外，当我打印数组的内容时，我看到很多负值。但它们都必须大于或等于零。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:30:41.160

很可能是因为不推荐使用的方法`readLine()`。`DataInputStream`如其注释中所述

*此方法不能正确地将字节转换为字符。从 JDK 1.1 开始，读取文本行的首选方法是通过 BufferedReader.readLine() 方法。使用 DataInputStream 类读取行的程序可以通过替换以下形式的代码转换为使用 BufferedReader 类： DataInputStream d = new DataInputStream(in);

与： BufferedReader d = new BufferedReader(new InputStreamReader(in));*

当我根据此建议更改您的程序时，它对我有用（我还进行了其他一些更改：

（**已更新以处理 PGM 的 P2 和 P5 口味**）

```
 public static void main(String args[]) throws Exception {
        try {
            InputStream f = ClassLoader.getSystemClassLoader().getResourceAsStream("lena.pgm");
            BufferedReader d = new BufferedReader(new InputStreamReader(f));
            String magic = d.readLine();    // first line contains P2 or P5
            String line = d.readLine();     // second line contains height and width
            while (line.startsWith("#")) {
                line = d.readLine();
            }
            Scanner s = new Scanner(line);
            int width = s.nextInt();
            int height = s.nextInt();
            line = d.readLine();// third line contains maxVal
            s = new Scanner(line);
            int maxVal = s.nextInt();
            byte[][] im = new byte[height][width];

            int count = 0;
            int b = 0;
            try {
                while (count < height*width) {
                    b = d.read() ;
                    if ( b < 0 ) 
                        break ;

                    if (b == '\n') { // do nothing if new line encountered
                    } 
//                  else if (b == '#') {
//                      d.readLine();
//                  } 
//                  else if (Character.isWhitespace(b)) { // do nothing if whitespace encountered
//                  } 
                    else {
                        if ( "P5".equals(magic) ) { // Binary format
                            im[count / width][count % width] = (byte)((b >> 8) & 0xFF);
                            count++;
                            im[count / width][count % width] = (byte)(b & 0xFF);
                            count++;
                        }
                        else {  // ASCII format
                            im[count / width][count % width] = (byte)b ;
                            count++;
                        }
                    }
                }
            } catch (EOFException eof) {
                eof.printStackTrace(System.out) ;
            }
            System.out.println("Height=" + height);
            System.out.println("Width=" + height);
            System.out.println("Required elements=" + (height * width));
            System.out.println("Obtained elements=" + count);
        }
        catch(Throwable t) {
            t.printStackTrace(System.err) ;
            return ;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T00:05:51.450

以下代码适用于我：

```
FileInputStream f;
    try {
        f = new FileInputStream(fileLocation);
        BufferedReader br = new BufferedReader(new InputStreamReader(f));
        String magic = br.readLine();    // first line contains P2 or P5
        String line = br.readLine();     // second line contains height and width

        //-scan width and height
        Scanner s = new Scanner(line);
        int width = s.nextInt();
        int height = s.nextInt();
        s.close();

        //-scan max value
        line = br.readLine();// third line contains maxVal
        s = new Scanner(line);
        //          int maxVal = s.nextInt();
        //-close scanner
        s.close();
        //-close buffer
        br.close();
        f.close();

        xvec=new DenseMatrix64F(height*width, 1);

        int b=0;
        int counter=0;
        f = new FileInputStream(fileLocation);
        DataInputStream dis = new DataInputStream(f);
        //-move across unused lines
        dis.readLine();
        dis.readLine();
        dis.readLine();
        while ((b=dis.read()) >= 0) {
            xvec.set(counter, 0, b);
            counter++;
        }
        dis.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# php - 将外部 php 加载到工具提示 div 中

> ID：11922253
> 
> 赞同：0
> 
> 时间：2012-08-12T12:40:47.790
> 
> 标签：php, css, tooltip

我有一个带有简单联系表单的工具提示，我想将“发送的消息”int 加载到同一个工具提示 div，而不是加载外部 submit.php 页面。

```
<div id="contactform" >        
            <form method="post" action="submit.php">
            <label for="Name">name</label><br />
            <input type="text" name="Name" id="name" /><br />

            <label for="Email">email</label><br />
            <input type="text" name="Email" id="email" /><br />

            <input type="submit" name="submit" value="send" class="submit" id="submit"/>
            </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:44:41.910

如果我理解正确的话，你可能需要一个 AJAX 请求。您阻止提交按钮的默认操作，发送 Ajax 请求并在成功时将您的成功消息（“已发送消息”）插入表单 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:48:37.257

你可以通过两种方式做到这一点：

1）像这样使用你的表格`<form method="post" action="">`。然后在你的 php 中你必须捕获提交动作，所以你必须

```
if($_POST['submit'] == 'send') then write my html code into tooltip div
else show contact form 
```

当用户单击提交按钮时，此方法需要重新加载页面，我鼓励您使用第二种方法。

2）使用AJAX发送您的联系表格，提交后您可以执行javascript代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:58:35.163

将此添加到您的`header`：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

**jQuery**

```
$(document).ready(function()
{
    $('#contactform form').submit(function()
    {
        var dataString=$(this).serialize();

        $.post('/ajax/submit.php', dataString, function(txt)
        {
            $('#contactform').html(txt);
        });

        return false;
    });
}); 
```

**[jQuery.post()](http://api.jquery.com/jQuery.post/)**

**PHP (/ajax/submit.php)**

```
<?php

if($_POST['submit'] == 'send')
{
    /* your PHP code */

    echo 'Your message was sent.';
}

?> 
```

# ruby-on-rails - rspec工厂女孩协会

> ID：11922256
> 
> 赞同：2
> 
> 时间：2012-08-12T12:41:05.983
> 
> 标签：ruby-on-rails, rspec, associations, factory-bot

在测试属于作者的书籍列表时，我收到以下错误。

```
Failure/Error: visit books_path
     ActionView::Template::Error:
       undefined method `name' for nil:NilClass
     # ./app/views/books/_book.html.erb:5:in `_app_views_books__book_html_erb___3197212671375452820_30961180'
     # ./app/views/books/index.html.erb:8:in `_app_views_books_index_html_erb__3030997400964951224_38341240'
     # ./spec/requests/book_pages_spec.rb:13:in `block (3 levels) in <top (required)>' 
```

我一直在尝试调试它 2 天但没有成功，现在我正在向 SO 寻求帮助。

我必须指出 Book#index 正确显示所有书籍，错误可能只是在我的测试中。我认为工厂女孩没有正确创建关联，因为 book.author 返回 nil。

谢谢！

**书本.rb**

```
class Book < ActiveRecord::Base
  attr_accessible :title
  belongs_to :author    
  validates :author_id, presence: true
end 
```

**作者.rb**

```
class Author < ActiveRecord::Base
  attr_accessible :name
  has_many :books, dependent: :destroy
end 
```

**工厂.rb**

```
FactoryGirl.define do
  factory :author do
    sequence(:name) { |n| "Author #{n}" }
  end

  factory :book do
    sequence(:title) { |n| "Lorem ipsum #{n}" }
    author
  end
end 
```

**_book.html.erb**

```
<li>
  <span class="title"><%= link_to book.title, book_path(book) %></span>
    <span class="author"><%= link_to book.author.name, author_path(book.author) %></span>
</li> 
```

**book_pages_spec.rb**

```
require 'spec_helper'
describe "Book pages" do
  subject { page }
  describe "index" do
    let(:author) { FactoryGirl.create(:author) }
    before(:each) do
      visit books_path
    end
    before(:all) { 32.times {FactoryGirl.create(:book, author: author)} }
    after(:all) { Author.delete_all }
    it { should have_title_and_heading("All books") }
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-04T21:00:52.417

在您的`after(:all)`步骤中，您正在清除作者，但不是在该`before(:all)`步骤中创建的书籍。由于 before/after :all 钩子在测试中的任何事务之外运行，因此您的测试数据库中很可能会留下陈旧的数据。

# python - 在没有环境变量的配置文件中设置python搜索路径（即PYTHONPATH）

> ID：11922258
> 
> 赞同：2
> 
> 时间：2012-08-12T12:41:14.673
> 
> 标签：python, unix, pythonpath

有没有办法在配置文件中设置python的搜索路径*而不*设置`PYTHONPATH`，即python启动时读取的一些默认配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:47:08.047

你有两个选择：

*   [`.pth`在标准位置之一](http://docs.python.org/library/site.html)（通常是您的`site-packages`位置）中列出文件中的其他路径。请参阅[如何使用 .pth 文件添加 Python 导入路径](https://stackoverflow.com/questions/700375/how-to-add-a-python-import-path-using-a-pth-file)。

*   `sys.path`向in`sitecustomize`或`usercustomize`modules添加额外的路径（在[`site`模块文档](http://docs.python.org/library/site.html)中有详细说明）。您的`sitecustomize`or`usercustomize`可能看起来像：

    ```
    import sys
    sys.path[0:0] = [
        '/foo/bar',
        '/spam/eggs',
    ] 
    ```

    两个额外的条目将被插入到`sys.path`前面。

    您还可以`site.addsitedir`使用此类模块中的路径进行调用，这将添加该路径`sys.path` *并*处理在那里找到的任何`.pth`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T12:56:47.977

为了避免弄乱 Python 的系统安装，您可以列出目录中`.pth`文件的路径，[`USER_SITE`](http://docs.python.org/library/site.html#site.USER_SITE)例如`~/.local/lib/python2.7/site-packages`. 您也可以放在`usercustomize.py`那里并调用任意代码，例如`sys.path.insert(0, path)`, `site.addsitedir(path)`。

# c# - 如何强制应用程序不以管理员身份运行

> ID：11922260
> 
> 赞同：3
> 
> 时间：2012-08-12T12:41:30.587
> 
> 标签：c#, winapi, pinvoke, uac

是否可以禁用以管理员身份运行的应用程序，因为它只是以本地用户身份运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T13:43:21.567

我认为您不能阻止以管理员身份启动该过程；但是，您可以检查它是否以提升的权限执行，如果是，则退出。

```
 static bool IsRunningWithElevatedPrivileges()
    {
        IntPtr hToken;
        int sizeofTokenElevationType = Marshal.SizeOf(typeof(int));
        IntPtr pElevationType =
            Marshal.AllocHGlobal(sizeofTokenElevationType);

        if (OpenProcessToken(GetCurrentProcess(), TokenQuery, out hToken))
        {
            uint dwSize;
            if (GetTokenInformation(hToken,
                TokenInformationClass.TokenElevationType, pElevationType,
                (uint)sizeofTokenElevationType, out dwSize))
            {
                TokenElevationType elevationType = (TokenElevationType)Marshal.ReadInt32(pElevationType);
                Marshal.FreeHGlobal(pElevationType);

                switch (elevationType)
                {
                    case TokenElevationType.TokenElevationTypeFull:
                        return true;
                    default:
                        //case TokenElevationType.TokenElevationTypeLimited:
                        //case TokenElevationType.TokenElevationTypeDefault:
                        return false;
                }
            }
        }

        return false;
    }

    [DllImport("kernel32.dll")]
    static extern IntPtr GetCurrentProcess();

    [DllImport("advapi32.dll", SetLastError = true)]
    static extern bool OpenProcessToken(
        IntPtr processHandle,
        uint desiredAccess,
        out IntPtr tokenHandle);

    [DllImport("advapi32.dll", SetLastError = true)]
    static extern bool GetTokenInformation(
        IntPtr tokenHandle,
        TokenInformationClass tokenInformationClass,
        IntPtr tokenInformation,
        uint tokenInformationLength,
        out uint returnLength);

    const UInt32 TokenQuery = 0x0008;

    enum TokenElevationType
    {
        TokenElevationTypeDefault = 1,
        TokenElevationTypeFull,
        TokenElevationTypeLimited
    }

    enum TokenInformationClass
    {
        TokenUser = 1,
        TokenGroups,
        TokenPrivileges,
        TokenOwner,
        TokenPrimaryGroup,
        TokenDefaultDacl,
        TokenSource,
        TokenType,
        TokenImpersonationLevel,
        TokenStatistics,
        TokenRestrictedSids,
        TokenSessionId,
        TokenGroupsAndPrivileges,
        TokenSessionReference,
        TokenSandBoxInert,
        TokenAuditPolicy,
        TokenOrigin,
        TokenElevationType,
        TokenLinkedToken,
        TokenElevation,
        TokenHasRestrictions,
        TokenAccessInformation,
        TokenVirtualizationAllowed,
        TokenVirtualizationEnabled,
        TokenIntegrityLevel,
        TokenUIAccess,
        TokenMandatoryPolicy,
        TokenLogonSid,
        MaxTokenInfoClass
    } 
```

# c++ - 如果 shared_ptr 的构造函数失败会发生什么？

> ID：11922262
> 
> 赞同：8
> 
> 时间：2012-08-12T12:41:42.800
> 
> 标签：c++, memory-management, smart-pointers

如果我理解正确，当使用指向新分配对象的指针初始化 shared_ptr（来自 boost、tr1、std 等）时，shared_ptr 的构造函数会分配少量内存来保存它管理的指针的引用计数。如果分配失败会发生什么？在以下代码中：

```
class my_class {};
void my_func(shared_ptr<my_class> arg);

int main(int argc, char* argv[])
{
    my_func(shared_ptr<my_class>(new my_class()));
    return 0;
} 
```

...`my_class`如果 shared_ptr 未能为其引用计数分配内存，该对象是否会泄漏？还是 shared_ptr 的构造函数负责删除对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T12:47:34.277

`my_class`即使`shared_ptr`无法分配内存，您的代码也不会泄漏对象。

根据 C++11 标准（20.7.2.2.1），在`shared_ptr`构造函数中：

> 抛出：bad_alloc，或当无法获取内存以外的资源时的实现定义的异常。
> 
> 异常安全：如果抛出异常，则调用 delete p。

在采用用户定义的删除器的构造函数版本中，将使用删除器。

[Boost文档](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm#constructors)指定相同。

# c - [ansi c]传递位域作为参考

> ID：11922270
> 
> 赞同：2
> 
> 时间：2012-08-12T12:43:10.367
> 
> 标签：c, pointers, bit-fields, microchip

在微芯片 C30 编译器中，我可以通过这种方式使用 LAT 寄存器设置引脚 i/o 值：

```
LATBbits.LATB10=1; 
```

LATBbits 定义为：

```
typedef struct tagLATBBITS {
  unsigned LATB0:1;
  unsigned LATB1:1;
  unsigned LATB2:1;
  unsigned LATB3:1;
  unsigned LATB4:1;
  unsigned LATB5:1;
  unsigned LATB6:1;
  unsigned LATB7:1;
  unsigned LATB8:1;
  unsigned LATB9:1;
  unsigned LATB10:1;
  unsigned LATB11:1;
  unsigned LATB12:1;
  unsigned LATB13:1;
  unsigned LATB14:1;
  unsigned LATB15:1;
} LATBBITS;
extern volatile LATBBITS LATBbits __attribute__((__sfr__)); 
```

我的目标是编写一个可以使用 LAT 寄存器作为参数设置 i/o 值的函数，用伪代码：

```
void setPin(unsigned int* latReg, unsigned int value){
  (*latReg)=value;
}

setPin(&LATBbits.LATB10, 1); 
```

不幸的是，此代码无法编译，因为“无法获取位域 'LATB10' 的地址”。

我需要它是因为我想实现一个可以处理端口扩展器的类似类库。每个端口扩展器可以有不同的引脚，所以我需要配置它，我想这样做：

```
typedef struct sPortExpander{
  unsigned int* CS;
  unsigned int* SPBUFF;
  ecc...
} PortExpander

void PortExpander_setOutput(PortExpander p, unsigned char value){
  (*p.CS)=0;
  // Send SPI data
  (*p.CS=1);
} 
```

这样我可以管理多个端口扩展器。

那么，有一种方法可以做我尝试做的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:48:27.477

将结构声明为`__attribute__((packed))`，然后使用：

```
void function setPin(struct LATBBITS *reg, unsigned int fieldno, unsigned int value){
    if (value)
        *(uint16_t *)reg |= (1 << fieldno);
    else
        *(uint16_t *)reg &= ~(1 << fieldno);
} 
```

# mysql - MySQL 选择不同用户的最新传入或传出消息

> ID：11922275
> 
> 赞同：0
> 
> 时间：2012-08-12T12:44:12.783
> 
> 标签：mysql

我有一个表结构，其中记录了发送和接收的消息，如下所示；

![数据库表结构](../Images/fa778913145670b4ff7b931cc6fa7c3b.png)

member_id1 是发送者，member_id2 是接收者。

现在我想要实现的是获取具有 member_id 为 3 的用户的最新消息的行。结果应该只包含消息 id 为 2 和 4 的 2 行，因为 2 是最后一条消息在 member_id 为 3 的用户和 member_id 为 2 的用户之间，4 是 member_id 为 3 的用户和 member_id 为 1 的用户之间的唯一消息。

结果不应包含 message_id 为 3 的行，因为它与 member_id 为 3 的用户和 message_id 为 1 的用户无关，因为它已被 message_id 为 2 的消息过时。

希望我已经为那些可以帮助我解决这个问题的人明确了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:40:03.147

我想我已经为自己的问题找到了正确的答案。虽然我不太确定，但它似乎工作得很好。对于那些需要解决此类问题的人；试试这个：

```
SELECT m1.* 
  FROM table_name m1 
  INNER JOIN (SELECT MAX(senddate) AS senddate, 
                     IF(member_id2 = 3, member_id1, member_id2 ) AS user 
                FROM table_name 
               WHERE (member_id1 = 3 AND delete1=0) OR 
                     (member_id2 = 3 AND delete2=0) 
              GROUP BY user) m2 
         ON m1.senddate = m2.senddate AND 
           (m1.member_id1 = m2.user OR m1.member_id2 = m2.user) 
     WHERE (member_id1 = 3 AND delete1=0) OR 
           (member_id2 = 3 AND delete2=0) 
   ORDER BY m1.senddate DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:10:12.250

这个问题有点模糊，但据我所知，你在寻找这个？

```
 SELECT * FROM table_name WHERE member_id2 = 3 ORDER BY senddate DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:12:14.840

你可以使用 UNION 来组合它们

```
 (SELECT * FROM table_name WHERE member_id2 = 3  ORDER BY senddate DESC limit 1)
union 
 (SELECT * FROM table_name WHERE member_id1 = 3  ORDER BY senddate DESC limit 1) 
```

或者，如果您需要获取每个成员的最新发送/接收信息，您可以内部加入一个查询，获取每个成员的最大发送日期：

```
select * from table_name t1 inner join 
(
 select member_id1, null as member_id2, max(senddate) as senddate 
 from table_name group by member_id1
 UNION
 select null as member_id1, member_id2, max(senddate) as senddate 
 from table_name group by member_id2
) r ON (t1.member_id1 = r.member_id1 OR t1.member_id2 = r.member_id2) 
AND t1.senddate = r.senddate 
```

# javascript - 使用javascript向数据表添加行

> ID：11922276
> 
> 赞同：1
> 
> 时间：2012-08-12T12:44:16.600
> 
> 标签：javascript, jquery, google-visualization

我们正在使用谷歌表格图表，在`$("#loginsubmit")`函数中我循环 a`webservice`以获取`id`和。现在我想在函数中的[one row for each ] 中添加所有值。我该怎么办？任何帮助都将不胜感激。`firstName``lastName``DataTable``id``drawTable`

```
 $("#loginsubmit").live("click", function () {
     for (var i = 58; i < 63; i++) {
         var request = new Request();
         request.service = "http://88.80.223.163:8080/lumiin-service/lumiin/control/communication/" + i;
         RequestHandler(request, drawTable);
     }
 });

 function drawTable(data) {
     //alert(JSON.stringify(data.contents.id) + 'Eshan');
     var datat = new google.visualization.DataTable();
     //alert(a);
     datat.addColumn('string', 'Id');
     datat.addColumn('string', 'First Name');
     datat.addColumn('string', 'Last Name');
     datat.addColumn('string', 'Place');
     //alert(data.contents.id + 'Eshan1');
     datat.addRows([
         [JSON.stringify(data.contents.id), JSON.stringify(data.contents.prospectId.firstName), JSON.stringify(data.contents.prospectId.lastName), JSON.stringify(data.contents.place)], ]);
     var table = new google.visualization.Table(document.getElementById('table_div'));
     table.draw(datat, {
         showRowNumber: true
     });
 } 
```

# java - 不同 JFrame 之间的信息交换

> ID：11922283
> 
> 赞同：0
> 
> 时间：2012-08-12T12:45:43.050
> 
> 标签：java, swing, oop, user-interface, jframe

在用户单击按钮启动负责收集对象创建信息的不同 jframe 的程序中设计 gui 的最佳方法是什么？要与 OOP 原则保持一致？

例如，用户在启动时会看到一个**MainFrame**，其中包含对象列表和有关对象的信息。在用户需要添加新对象的情况下，他必须单击创建新对象按钮。单击该按钮将启动另一个 jframe，其中包含创建对象（建筑物）所需的字段。但是这个对象很复杂，并且在其中保存了另一个对象 - **Box**（要添加 Box，请单击 addBoxButton 和新框架，其中包含用于创建 Box 的字段）。**包含另一个对象 - Commutator**
的盒子。再次创建换向器，用户按下另一个按钮会产生新的框架，创建换向器，用户数据在框架中键入。然后我需要将 Commutator 放在 Box 和 Box 中，而不是在 Building 中。

 **现在 - 我在框架类之间进行信息交换时遇到了一些困难。例如，如果这些框架之一是在运行时创建的，我应该如何将从一个 jframe 收集的信息传输到另一个？

我的问题是 - **我的 GUI 是设计不良 GUI 的一个例子吗？将所有 gui 放在一个扩展 JFrame 的类中可能会更好？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:58:24.200

1.  永远不要以这种方式混淆 GUI...

2.  Swing 本身是基于 MVC 原则的，这就是为什么它被称为 PLAF（Pluggable Look and Feel）。在保持相同模型的同时，我们可以更改视图。

3.  尝试创建您的程序，牢记 MVC 原则。

    模型 - 处理业务逻辑和数据

    VIEW - 输出的表示

    CONTROLLER - 在其上完成操作。

4.  为模型和视图创建单独的包。

    例如：

    ```
    com.app.view;     // This stores all of your GUI stuffs

    com.app.mode;     // This stores your Business Logic and the Data 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:49:27.587

GUI设计的典型方法是使用MVC（模型-视图-控制器）模式，其中模型负责数据存储和操作，视图显示数据，控制器也在它们之间连接。有很多教程深入解释了这种模式。阅读其中的一些。我相信你会找到你的问题的答案。

通常，数据应该进入模型，视图负责尽可能多的 JFrame。**

# ruby-on-rails - Rails 没有呈现标准的 HAML 布局

> ID：11922284
> 
> 赞同：1
> 
> 时间：2012-08-12T12:45:44.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我使用 HAML 作为我的标记语言。我的视图只呈现自我视图，没有布局应用程序。如果我用我的方法写

> 渲染：布局=>真

我去拿

> HomesController 中没有默认布局
> 
> /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/app/views]>

但是，如果我将 application.html.haml 重命名为 application.html.erb，一切正常。但是脚手架可以毫无问题地生成 HAML。怎么了？

```
class HomesController < ApplicationController
  def index
    @manufacturers = Manufacturer.all
    #render :layout => 'application'
  end
end 
```

看法

```
%ul
  - @manufacturers.each do |manufacturer|
    %li      
      = link_to manufacturer.MFA_BRAND, vehiclemodel_url(:id => manufacturer.MFA_ID) 
```

布局

```
!!!
%html
  %head
    %title Title
    = stylesheet_link_tag    "application"
    = javascript_include_tag "application"
    = csrf_meta_tags
  %body
    - if current_user
      = "Signed in as #{current_user.email}. Not you?"
      = link_to "Sign out", logout_path
    - else
      = link_to "Sign in", new_user_session_path
    %p
      Hello!
    %h4
      =yield 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:57:41.710

我创立了解决方案：在 gemfile 中必须是

> 宝石'haml-rails'

所以，这里不需要 gem haml，只需要 haml-rails。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:56:59.490

你加了吗

```
gem 'haml' 
```

到您的 Gemfile？

# objective-c - 类层次结构——谁应该与谁交谈？

> ID：11922286
> 
> 赞同：0
> 
> 时间：2012-08-12T12:46:01.490
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我正在开发一个包含 Core Data 的游戏项目，我希望代码尽可能模块化。

现在我的核心数据“层次结构”链看起来像这样：

核心数据实体 -> SaveGame 类 -> GameLogic 类 -> Receiver

SaveGame 类处理与 Core Data 相关的所有内容，例如 managedObjectContext、各种实体、​​保存和覆盖操作等。

GameLogic 类处理游戏机制并使用从 Core Data 传递的数据做一些事情，例如计算收入、当前金额、处理级别变化等。

我对这个设置不满意，但有一个原因：如果接收器（例如 HUD）从 Core Data 请求数据，那么数据必须沿着该链传递，导致很多单行代码做得很好没什么，像这样：

```
+(NSArray *)passCoreDataInfo
{
return [CoreDataEntity fetchCoreDataEntityInfo] // ExecuteFetchRequest
} 
```

然后将在层次结构中较低的类中像这样使用它：

```
+(NSArray *)passCoreDataInfoAgain
{
return [HigherClass passCoreDataInfo]
} 
```

直到在链条的某个地方，我的 Receiver 用它做了一些有用的事情：

```
(...)
NSArray *coreDataInfo = [SomeClass passCoreDataInfoYetAgain];
(...) 
```

这可能会浪费大量内存和处理能力，但我也不想屈服于可怕的“每个人都与每个人交谈”模型。

你们能否给我一些提示，告诉我如何更好地建立层次结构并绕过相同数据的不断传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:08:40.323

为什么不让接收者订阅从 CoreDataEntities 发送的（通用）消息？与其说是“每个人都与每个人交谈”模型，不如说是“每个人都可以关注他们感兴趣的人的推文”模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:17:18.490

为什么不创建一个共享实例，就像`[CCDirector sharedDirector]`, `[CCSpriteFrameCache sharedSpriteFrameCache]`,`[CCTextureCache sharedTextureCache]`等一样`[SimpleAudioEngine sharedEngine]`？

只是命名它`[CoreDataEntity sharedEntity]`或其他东西：

```
static CoreDataEntity *instanceOfCoreDataEntity = nil;

@implementation CoreDataEntity

+ (CoreDataEntity *)sharedEntity {
    if (!instanceOfCoreDataEntity) {
        instanceOfCoreDataEntity = [[CoreDataEntity alloc] initWithSomething:@"something"];
    }
    return instanceOfCoreDataEntity;
}

.... 
```

然后你可以在任何地方使用它：

```
NSArray *coreDataInfo = [[CoreDataEntity sharedEntity] passCoreDataInfo]; 
```

# vim - 删除到行尾（不包括当前字母）

> ID：11922287
> 
> 赞同：6
> 
> 时间：2012-08-12T12:46:06.337
> 
> 标签：vim, intellij-idea, ideavim

我知道 d$ 或 D 将删除直到行尾，包括光标上的字母？有没有办法做到这一点，不包括光标上的字母？我在 vim 中做了 :hd 并浏览了一下，但找不到这是否可能。我正在尝试使用 IdeaVim 插件在 AppCode 中执行此操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T12:52:53.007

在正常模式下，您可以执行`lD`或`ld$`。

# jquery - jQuery SlidesJS 插件在 div 中调用时不显示

> ID：11922288
> 
> 赞同：1
> 
> 时间：2012-08-12T12:46:13.917
> 
> 标签：jquery, css, html, plugins, slideshow

我正在使用来自[http://slidesjs.com](http://slidesjs.com)的 SlideJS 插件。

`slideshow.htm`当页面在浏览器中打开时，它工作得很好。

但是，当我尝试将此页面加载到`div#main`我的主页上时，就会出现问题。仅显示幻灯片的外框以及左右滚动按钮。幻灯片中的实际幻灯片根本不显示。

但是，如果我尝试在其中显示任何其他网页`div#main`，则显示正常。

这是代码`slideshow.htm`：

```
<link rel="stylesheet" href="slidecss/global.css">

<script src="js/jquery.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/slides.min.jquery.js"></script>
<script>
    $(function(){
        $('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 5000,
            pause: 2500,
            hoverPause: true
        });
    }); 
</script>
</head>
<body>
<div id="container"> 
<div id="example"> 
<div id="slides"> 
  <div class="slides_container"> <img src="img/slide-1.jpg" width="570" height="270" alt="Slide 1"> 
    <img src="img/slide-2.jpg" width="570" height="270" alt="Slide 2"> <img src="img/slide-3.jpg" width="570" height="270" alt="Slide 3"> 
    <img src="img/slide-4.jpg" width="570" height="270" alt="Slide 4"> <img src="img/slide-5.jpg" width="570" height="270" alt="Slide 5"> 
    <img src="img/slide-6.jpg" width="570" height="270" alt="Slide 6"> <img src="img/slide-7.jpg" width="570" height="270" alt="Slide 7"> 
  </div>
  <!--slides_container -->
  <a href="#" class="prev"><img src="img/arrow-prev.png" width="24" height="43" alt="Arrow Prev"></a> 
  <a href="#" class="next"><img src="img/arrow-next.png" width="24" height="43" alt="Arrow Next"></a> 
</div>
<!--slides-->
<img src="img/example-frame.png" width="739" height="341" alt="Example Frame" id="frame"> 
</div>
<!--example -->
</div> 
```

这是使用的 CSS 代码`slideshow.htm`：

```
#container {
width:580px;
padding:10px;
margin:0 auto;
position:relative;
z-index:0;
}

#example {
width:600px;
height:350px;
position:relative;
}

#frame {
position:absolute;
z-index:0;
width:739px;
height:341px;
top:-3px;
left:-80px;
}

/*
Slideshow
*/

#slides {
position:absolute;
top:15px;
left:4px;
z-index:100;
}

/*
Slides container
Important:
Set the width of your slides container
Set to display none, prevents content flash
*/

.slides_container {
width:570px;
overflow:hidden;
position:relative;
display:none;

}

/*
Each slide
Important:
Set the width of your slides
If height not specified height will be set by the slide content
Set to display block
*/

.slides_container a {
width:570px;
height:270px;
display:block;
}

.slides_container a img {
display:block;
}

#slides .next,#slides .prev {
position:absolute;
top:107px;
left:-39px;
width:24px;
height:43px;
display:block;
z-index:101;
}

#slides .next {
left:585px;
} 
```

在这里，我将页面`loadHome()`加载到：`slideshow.htm``div#main`

```
<li class=""><a href="" id="home" onclick="return loadHome()">Home</a></li> 
```

这是`loadHome()`获取的代码`slideshow.htm`：

```
function loadHome() {
    var xmlhttp = createobject();
    xmlhttp.open("GET","slideshow.htm",true);
    xmlhttp.send();
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("main").innerHTML=xmlhttp.responseText;
        }
    }
    return false;
} 
```

这是的CSS `div#main`：

```
#main{
margin: auto;
padding: 20px;
    min-height: 500px;
    width: 900px;
    background-color: #95a5bf;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:25:14.547

Ive been having a similar problem with this, My slideshow sits inside a div wrapper which has display set to none.When faded in using jquery, images dont display as expected.

I've found out that if i change the div's display to block in the css then the slide show works fine.

No good for what im trying to do but maybe it might help someone else to find a solution

# iphone - 在 C 中分配内存的问题

> ID：11922289
> 
> 赞同：2
> 
> 时间：2012-08-12T12:46:21.473
> 
> 标签：iphone, objective-c, c, memory-management

**编辑 2**

[在我的其他SO question](https://stackoverflow.com/questions/12989172/what-causes-a-nan-error-result)中查找有关此问题的更多信息。

**编辑 1**

**我更新了这篇文章，因此内容可能与 Alexey、Hicham、Jonathan 和 Mat 的评论不一致。**

下面的代码使用[**这个 FFT**](http://courseware.ee.calpoly.edu/~jbreiten/C/)来辅助发病检测。当该方法被调用一次时，**一切正常**，我得到了一个很好的值日志。当第二次调用该方法时，我得到`nan`或垃圾。有任何想法吗？

```
{
    NSLog(@"Running onset.");
    NSMutableArray *mutableArrayOfFlags = [[NSMutableArray alloc] init];
    OnsetsDS  *ods = malloc(sizeof *ods); 
    float* odsdata = (float*) malloc(onsetsds_memneeded(ODS_ODF_RCOMPLEX, 512, 11));
    onsetsds_init(ods, odsdata, ODS_FFT_FFTW3_HC, ODS_ODF_RCOMPLEX, 512, 11, 44100);
    int i;
    int x;
    bool onset; 

    for (i = 0; i < vocalBuffer.numFrames; i=i+512){

        // convert vocal int to double 
        double (*vocalData)[2] =  malloc(2 * 512 * sizeof(double));
        for (x = 0; x < 512; x++){
            *vocalData[x] = (double)vocalBuffer.buffer[i+x]; 
        }

        // init malloc output double 
        double (*outPutDoubleFFTData)[2];
        outPutDoubleFFTData =  malloc(2 * 512 * sizeof(double)); 
        fft(512, vocalData, outPutDoubleFFTData);

        int z;
        // init malloc float fft data
        float *floatFFTData; 
        floatFFTData = malloc(512 * sizeof(float));
        for (z = 0; z < 512; z++){
            floatFFTData[z] = (float)*outPutDoubleFFTData[z];
            if (i==512*20) {
                // NSLog(@"PRE POST %f - %f",*vocalData[z], floatFFTData[z]);
                NSLog(@"PRE POST FLOAT %f - %f - %f",*vocalData[z], (*outPutDoubleFFTData)[z], floatFFTData[z]);

            }
        }

        onset = onsetsds_process(ods, floatFFTData);

        free((*outPutDoubleFFTData));
        free(floatFFTData);
        free(vocalData);

        if (onset){
            printf("onset --> %i\n", i);
            NSNumber *integer = [[NSNumber alloc] initWithInt:i];
            [mutableArrayOfFlags addObject:integer];
        }
    }

    free(ods->data); // Or free(odsdata), they point to the same thing in this case
    free(ods);
    return [[NSArray alloc] initWithArray:mutableArrayOfFlags];    
} 
```

**调用第一次方法的日志：**

```
2012-10-20 11:22:19.625 XX[4125:1903] PRE POST FLOAT 4.000000 - 7979.000000 - 7979.000000
2012-10-20 11:22:19.628 XX[4125:1903] PRE POST FLOAT 25.000000 - 0.000000 - 861.794861
2012-10-20 11:22:19.635 XX[4125:1903] PRE POST FLOAT 32.000000 - 861.794875 - 248.516144
2012-10-20 11:22:19.640 XX[4125:1903] PRE POST FLOAT 22.000000 - 92.284860 - -190.525833
2012-10-20 11:22:19.645 XX[4125:1903] PRE POST FLOAT 23.000000 - 248.516141 - 37.045593
2012-10-20 11:22:19.648 XX[4125:1903] PRE POST FLOAT 30.000000 - -33.565115 - 7.444437 
```

**调用第二次消息的日志。**

```
2012-10-20 11:22:36.353 XX[4125:3e07] PRE POST FLOAT 4.000000 - 7979.000000 - 7979.000000
2012-10-20 11:22:36.358 XX[4125:3e07] PRE POST FLOAT 25.000000 - 53979063281237364484736793729327605401034441222848177467876829146104162439787488863720409331484927794377967278456986000075570355992521879340404128702782598833969629491268820332191001022225312452183861587484411698307560976546539765760.000000 - inf
2012-10-20 11:22:36.364 XX[4125:3e07] PRE POST FLOAT 32.000000 - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:25:51.267

```
 OnsetsDS  *ods = malloc(sizeof *ods); 
```

这段代码对我来说有点奇怪。这可能会更好。

```
 OnsetsDS  *ods = malloc(sizeof OnsetsDS); 
```

我知道如果您使用 C 或 C++ 执行此操作，*ods 可能会做很多事情之一，这一切都取决于您的编译器。它可能还没有初始化，指向 NULL，指向带有垃圾数据的随机内存地址，甚至是其他东西。

你也可以做类似的事情

```
 OnsetsDS ods; 
```

并且在许多情况下只需将 &ods 与您的变量一起传递，至少在 C++ 中是这样。我承认，我仍在学习objective-C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:46:06.717

尝试使用 calloc(1, size) 而不是 malloc(size)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:38:13.920

`double (*doubleFFTData)[2]`定义`doubleFFTData`为指向 2 数组的指针`doubles`。

`*doubleFFTData[b]`被评估为先评估`[b]`然后评估`*`。

由于`doubleFFTData`作为指向 2 数组的指针`doubles`，`doubleFFTData[b]`是2 的第*b*个数组`doubles`。

2 的第*b*个数组`doubles`,`doubleFFTData[b]`衰减为一个指针，该指针指向 2 数组的第 0 个元素`doubles`。当您取消引用此指针时，`*`您将获得两者中的第一个`double`。

因此，`*doubleFFTData[b]`等价于`doubleFFTData[b][0]`，它获取表示复值 DFT 点的双精度对中的第一个双精度。

那部分似乎很好。

但是您并没有初始化分配给`malloc()`. `malloc()`不会将分配的内存设置为任何预定值，因为它不是 C 语言标准所要求的。因此，该内存可以包含以前执行的代码留下的任何数据，或者如果在 PC 开机后内存尚未使用，它可能只是纯粹的垃圾。

您不想使用未初始化的变量。除非，您正在为 SSL等实现[伪随机数生成器。](http://www.schneier.com/blog/archives/2008/05/random_number_b.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:54:28.580

您正在混合指针：`*doubleFFTData[b]`并且`double (*doubleFFTData)[2]`不匹配。

如果你想要两个 512 双精度数组：

```
int b; double (*doubleFFTData)[2]; 
doubleFFTData[0] =  calloc(1 , 2 * 512 * sizeof(double)); // initialize the array to 0       
doubleFFTData[1] = doubleFFTData[0] + 512;  

for (b = 0; b < 512;b++){    
    NSLog(@"results: %f", doubleFFTData[0][b]);
} 
/*and : */

for (b = 0; b < 512;b++){ 
    NSLog(@"results: %f", doubleFFTData[1][b]); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:05:00.197

我认为使用显式 2D 数组表示法来访问和操作您的数据更容易和更安全，就像您引用的 fft 代码示例中所做的那样。声明为`double (*x)[2]`然后分配为单个块 using`x = malloc(2 * N * sizeof(double))`旨在使这成为可能，同时保持数据最佳本地化以进行数值工作。

尝试以这种方式清除您的数组引用，您应该能够找到您所看到的未初始化内存问题。

此外，该行`free((*outPutDoubleFFTData))`显示了对分配的内容的一些混淆。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T23:36:41.237

```
/// my comments are with ///

- (void)objcMallocEx
{
    NSLog(@"Running onset.");
    // an obj-c allocation
    NSMutableArray *mutableArrayOfFlags = [[NSMutableArray alloc] init];

/// i would prefer to see this, followed by &ods in the call below, and get rid of the free at the bottom
/// OnsetsDS  *ods = malloc(sizeof *ods); 
    OnsetsDS    ods = NULL;

/// Q: is onsetsds_init() expecting odsdata as a buffer it can fill?
///   or is it expecting you to be providing it with the address to a pointer that it will fill?
///   if the former, then you've done the right thing below.  if the latter, then
///    what you really need is
///     float* odsdata = NULL;
///   and then pass the &odsdata as the 2nd arg to onsetsds_init() on the next line.
    float* odsdata = (float*) malloc(onsetsds_memneeded(ODS_ODF_RCOMPLEX, 512, 11));

/// onsetsds_init(ods, odsdata, ODS_FFT_FFTW3_HC, ODS_ODF_RCOMPLEX, 512, 11, 44100);
    onsetsds_init(&ods, odsdata, ODS_FFT_FFTW3_HC, ODS_ODF_RCOMPLEX, 512, 11, 44100);

    int i;
    int x;
    bool onset; 

    for (i = 0; i < vocalBuffer.numFrames; i=i+512){

/// in the assignment for the loop, you are declaring that you want an array
/// of 2 double* .  but the malloc assignment is more like a single array
/// of 1024 double items.  it seems like what you really want is 2 arrays of
/// 512 double items.
///     // convert vocal int to double 
///     double (*vocalData)[2] =  malloc(2 * 512 * sizeof(double));
        double vocalData[2][512];

/// if you absolutely insist on using allocation for this, the closest
/// semantically declaration would be
///     double* vocalData[2] = { malloc(512) * sizeof(double)), malloc(512) * sizeof(double) }
/// or
///     double* vocalData[] = (double*)malloc(2 * sizeof(double*));
///     vocalData[0] = malloc(512) * sizeof(double);
///     vocalData[1] = malloc(512) * sizeof(double);

/// THE FOLLOWING IS PART I OF WHAT'S LEADING TO THE DISPLAY OF "RANDOM" DATA
///
/// now, according to your original declaration, you have an array of two pointer-to-double,
/// but in the loop below, c++ operator precedence means it will operate on [x] first, and then on
/// * .  so ... you are getting what's at the xth pointer-to-double, and then getting the value of
/// of that.  if x is 100, and sizeof(double)==8 and sizeof(pointer-to-double)==4, then you the
/// code below is acting as though it wants to get what's at the memory 400 bytes from vocalData,
/// but if you want the 100th double, you should be getting what's at the memory 800 bytes from
/// vocalData.
///     for (x = 0; x < 512; x++){
///         *vocalData[x] = (double)vocalBuffer.buffer[i+x]; 
///     }
        for (x = 0; x < 512; x++)
            vocalData[0][x] = (double)vocalBuffer.buffer[i+x];
/// or      (*vocalData)[x] = (double)vocalBuffer.buffer[i+x];

/// if you absolutely insist on using pointer arithmetic for this, the closest 
/// semantically correct code would be
///     for (x = 0; x < 512; x++)
///         *(vocalData+(sizeof(double)*x)) = (double)vocalBuffer.buffer[i+x];

/// again, with outPutDoubleFFTData, you are declaring that you want an array
/// of 2 double*, but the malloc assignment is more like a single array of
/// 1024 double items.
/// some of what is correct depends upon what the arg signature of fft() is ...

        // init malloc output double 
///     double (*outPutDoubleFFTData)[2];
///     outPutDoubleFFTData =  malloc(2 * 512 * sizeof(double)); 

        double outPutDoubleFFTData[2][512];

/// if you absolutely insist on using allocation for this, the closest
/// semantically equivalent declaration would be
///     double* outPutDoubleFFTData[2] = { malloc(512) * sizeof(double), malloc(512) * sizeof(double) }
/// or
///     double* outPutDoubleFFTData[] = (double*)malloc(2 * sizeof(double*));
///     outPutDoubleFFTData[0] = malloc(512) * sizeof(double);
///     outPutDoubleFFTData[1] = malloc(512) * sizeof(double);

        fft(512, vocalData, outPutDoubleFFTData);

        int z;
        // init malloc float fft data
        float *floatFFTData; 
        floatFFTData = malloc(512 * sizeof(float));
        for (z = 0; z < 512; z++){

/// THE FOLLOWING IS PART II OF WHAT'S LEADING TO THE DISPLAY OF "RANDOM" DATA
/// and, again, according to the original declaration, below, if z == 100 and
/// sizeof(double)==8 and sizeof(double*)==4, then you'll be accessing the memory
/// at the location 400 away from outPutDoubleFFTData when what you really want is
/// the memory that's 800 away from outPutDoubleFFTData.
///
///         floatFFTData[z] = (float)*outPutDoubleFFTData[z];
///
            floatFFTData[z] = (float)((*outPutDoubleFFTData)[z]);

            if (i==512*20) {
                // NSLog(@"PRE POST %f - %f",*vocalData[z], floatFFTData[z]);
/// here, you got the pointer arithmetic into outPutDoubleFFTData correct !!
/// the trouble is, what you stored there is unknown because of the calculations above !!!
                NSLog(@"PRE POST FLOAT %f - %f - %f",*vocalData[z], (*outPutDoubleFFTData)[z], floatFFTData[z]);

            }
        }

        onset = onsetsds_process(ods, floatFFTData);

/// the following isn't going to free what you allocated
///     free((*outPutDoubleFFTData));
/// to do that, you should have
///     free(outPutDoubleFFTData);
/// but best of all is to use the 2-d array in the stack, and then you won't need the heep 

        free(floatFFTData);
/// also don't need the following if using the simple array declaration instead
///     free(vocalData);

        if (onset){
            printf("onset --> %i\n", i);
            NSNumber *integer = [[NSNumber alloc] initWithInt:i];
            [mutableArrayOfFlags addObject:integer];
        }
    }

/// here, since you did a malloc into odsdata, the best thing to do would be to free
/// the same variable as well.
    free(ods->data); // Or free(odsdata), they point to the same thing in this case

/// this isn't necessary if you use the code i've replaced above, rather than what
/// you had that is now commented out.
///  free(ods);

    return [[NSArray alloc] initWithArray:mutableArrayOfFlags];    
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T22:43:41.210

```
float *floatFFTData; 
 floatFFTData = malloc(512 * sizeof(float));
 for (z = 0; z < 512; z++){
   floatFFTData[z] = (float)*outPutDoubleFFTData[z];
   if (i==512*20) {
     // NSLog(@"PRE POST %f - %f",*vocalData[z], floatFFTData[z]);
     NSLog(@"PRE POST FLOAT %f - %f - %f",*vocalData[z], (*outPutDoubleFFTData)[z], floatFFTData[z]);
   }
 } 
```

好吧，您为 512 个浮点数分配了内存，但试图迭代大约 513 个浮点数，0 到 512 是 513，所以您遇到了段错误

# .htaccess - Java 脚本不工作。使用基于 php 的 MVC

> ID：11922291
> 
> 赞同：0
> 
> 时间：2012-08-12T12:46:45.550
> 
> 标签：.htaccess

我有一个小问题。
在我的网站中，我有两个 htaccess 文件。

htaccess（这是在根目录中）

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule    ^$    public/    [L]
RewriteRule    (.*) public/$1    [L]
</IfModule> 
```

这是在我有“图形”目录的公共目录中。htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
</IfModule> 
```

我的目录结构是这样的：

```
root/public/js/abc.js 
root/application/controller/abccontroller.php  
root/application/model/abc.php  
root/application/abc.view 
```

Java 脚本不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:27:57.360

> 响应正常，状态码 200 唯一的问题是响应的内容类型是 Content-Type:text/html 这是唯一的问题

听起来您的 php 脚本没有正确设置内容类型（如果这些 gifs/javascript 正在通过您的脚本进行路由）。或者，由于某种原因，您的 mime 类型设置不正确。您可以尝试在 htaccess 中添加一些[`AddType`指令：](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype)

```
AddType image/gif .gif
AddType image/jpeg .jpeg .jpg .jpe
AddType image/png .png
AddType text/plain .js 
```

# ajax - 使用 GAE 通道 API 优雅地处理封闭通道

> ID：11922295
> 
> 赞同：0
> 
> 时间：2012-08-12T12:47:19.870
> 
> 标签：ajax, google-app-engine, client-server, channel-api

我正在使用带有 Channel API 的 Google App Engine 创建一个 Web 应用程序。这是我第一次尝试做任何类似 Ajax 的事情，我怀疑有一种标准技术可以解决我的问题，但我一直找不到它。

我的客户端程序会将消息发布到服务器。如果消息无法发送，例如通道关闭，消息会发生什么？如果客户端在平板电脑上并且用户走出无线网络范围怎么办？对于我的应用程序，重新发送消息至关重要，但我不知道如何执行此操作。

当通道关闭时，我知道我应该从服务器请求一个新令牌，但我不知道我的客户端如何在不重新加载页面的情况下获取该令牌并打开连接（从而丢失数据）。[在此处](https://developers.google.com/appengine/docs/python/channel/overview)给出的演示中，客户端需要知道令牌。

```
var channel = new goog.appengine.Channel({{token}}); 
```

但我在别处读到客户端不需要知道令牌。——这将如何运作？

此外，onerror 和 onclose 回调函数似乎没有给我失败的消息，所以我怎么知道需要重新发送什么？

如果有人能把我推向正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:08:31.563

如果“重新发送消息至关重要”，那么您可能应该考虑使用本机客户端而不是浏览器。如果用户超出范围并关闭或重新加载浏览器窗口，则数据肯定会丢失。

1.  “我不知道我的客户如何在不重新加载页面的情况下获取该令牌并打开连接”。使用[AJAX 调用服务器](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)- 这不会重新加载页面。

2.  客户端需要令牌才能打开通道。没有办法解决它。

3.  `onclose`应该在套接字关闭时调用。`onclose`如果客户端失去连接，那么套接字超时并被调用可能需要一些时间。

# wordpress - 将 wordpress 模板更改为阿拉伯语

> ID：11922296
> 
> 赞同：2
> 
> 时间：2012-08-12T12:47:26.240
> 
> 标签：wordpress, templates, themes, arabic, right-to-left

> **可能重复：**
> [Wordpress 和 RTL](https://stackoverflow.com/questions/973216/wordpress-and-rtl)

我有一个适合英语的 wordpress 模板，我想让它适合东方语言，如阿拉伯语和希伯来语，这意味着将网站设计从左翻转到右，反之亦然。使我能够用我想要的东方语言写作……任何人都有答案，我会有所帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-13T20:44:41.383

你可能想看看这个： [http ://ar.wordpress.org](http://ar.wordpress.org)

或者甚至尝试安装阿拉伯语版本的 Wordpress： [http ://www.ar-wp.com](http://www.ar-wp.com)

您可以编辑 CSS 以将东方语言的文本方向更改为 ltr，反之亦然。您可以将此设置为有条件的。

还有这个插件：[http ://wordpress.org/extend/plugins/wp-rtl/](http://wordpress.org/extend/plugins/wp-rtl/)

# c# - 痣 0.94.51023.0 和 NCover 1.5.8

> ID：11922299
> 
> 赞同：1
> 
> 时间：2012-08-12T12:47:45.880
> 
> 标签：c#, moles, ncover

我一直在尝试从 NCover 生成带有痣和 NUnit 作为跑步者的覆盖率，但覆盖率为 0%

[用 Moles/Pex 和 NUnit](https://stackoverflow.com/questions/8593385/ncover-1-5-8-with-moles-pex-and-nunit)在 NCover 1.5.8 上尝试过帖子

[https://stackoverflow.com/questions/8385592/how-to-integrate-ncover-moles-mstest-to-get-the-coverage](https://stackoverflow.com/questions/8385592/how-to-integrate-ncover-moles-mstest-to-get-the-coverage)

[没有使用 Moles 的测试的代码覆盖率信息](https://stackoverflow.com/questions/7013990/no-code-coverage-information-for-tests-using-moles)

我想的问题是我无法获得所需的 CLSID。如何获得正确的 CLSID 以及什么？

Moles 是否仍然与 NCover 不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:11:21.120

启用 VS 测试影响（代码覆盖率）分析后，痣将不起作用。
我确信 Moles 也与 NCover 不兼容。

要分析代码覆盖率，必须检测目标代码。Instrumentation 是一个编译器进程，它基本上在开发人员编写的每一行代码之前插入对覆盖分析器的索引调用。

当索引报告给分析器时，该行代码被标记为被覆盖。复杂的逻辑评估可以分解为基本组件，以确保覆盖其部分，具体取决于所使用的分析工具。

当引入 Moles 时，这种方法就失效了。
Moles 本质上是在目标程序集符合 CLR 之后重新连接方法调用。

因此，代码覆盖率检测将报告错误的结果，因为一些被测代码被绕道给委托人。当绕道而行时，代码覆盖率将报告一个低得多的错误覆盖率，因为仪器下降被跳过。

# google-chrome - 关闭颜色框不适用于 chrome

> ID：11922300
> 
> 赞同：0
> 
> 时间：2012-08-12T12:48:10.143
> 
> 标签：google-chrome, colorbox

我有一个很大的问题，我正在开发一个网站，我正在使用`colorbox plugin`. 这非常好，但我有一个大问题，`Google Chrome browser`因为：

`parent.$.fn.colorbox.close()`在谷歌浏览器中不起作用

请帮助我找到解决此问题的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:21:37.270

我在以下操作系统上广泛使用了 ColorBox 和 Chrome：Windows、Linux (Ubuntu)，所以我怀疑浏览器是问题所在。

您是在本地开发还是使用服务器 Web 服务器？这很重要，因为 Chrome 可以更严格地执行跨站点脚本。

也许您可以多说一些“不起作用”的内容（例如您在 Chrome 控制台小程序中看到的内容？），或者更好的是，发布指向您的项目的链接。

问候， KJM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:06:56.363

这是 chrome v.21 的问题

[http://productforums.google.com/forum/#!topic/chrome/EuOiRG4Bdf8](http://productforums.google.com/forum/#!topic/chrome/EuOiRG4Bdf8)

自 las chrome 更新以来，许多彩盒功能都出现了问题。

# iphone - 应用程序进入后台后继续进行网络操作？

> ID：11922301
> 
> 赞同：0
> 
> 时间：2012-08-12T12:48:13.063
> 
> 标签：iphone, ios, xcode, nsurlconnection, uiapplicationdelegate

我正在查看我的应用程序在运行时创建的调试文件，并看到一个奇怪的行为：应用程序用于`NSURLConnction`从服务器检索一些数据。连接已启动，然后用户可能通过按下主页按钮将应用程序移动到后台（`application:willResignActive`并`application:didEnterBackground`调用了方法）。我可以看到`application:didEnterBackground`调用后在我的代码中处理了连接。（委托的被称为之后`connectionDidFinishLoading`）。在执行过程中我执行了一些操作，但此时应用程序可能已挂起并且未调用代码。然后在将近 12 小时后，用户再次启动应用程序（它没有终止，而只是在后台）并且代码从它停止的同一点继续运行，甚至在之前`NSURLConnection``application:didEnterBackground``connectionDidFinishLoading``application:willEnterForeground`并被`application:didBecomeActive`调用）。它会做场景吗？在应用程序进入前台之前运行的部分代码改变了我的应用程序内部状态并导致奇怪的行为。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:57:42.360

收到后，`application:didEnterBackground`您有大约 5 秒的时间来完成整理工作，之后您的应用程序将不再被安排在 cpu 上。

在您的情况下，最好的解决方案是通过宣布开始后台工作`beginBackgroundTaskWithExpirationHandler:`并完成下载和相关任务。

# python - python三元运算符行为

> ID：11922302
> 
> 赞同：1
> 
> 时间：2012-08-12T12:48:14.483
> 
> 标签：python, ternary-operator

当我评估以下操作时

```
0 if True else 1 + 1 if False else 1 
```

它评估为 0 但是当我用括号写时

```
( 0 if True else 1 ) + ( 0 if False else 1 ) 
```

它正确评估为 1 ，在第一种情况下发生了什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T12:50:42.017

```
0 if True else 1 + 1 if False else 1 
```

实际上是：

```
(0) if (True) else ((1 + 1) if (False) else (1)) 
```

这肯定与您想要的不同：

```
((0) if (True) else (1)) + ((1) if (False) else (1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T12:57:21.797

as`ternary operator`是从条件运算符中读取的`left to right` ，`+`其优先级低于条件运算符。所以，这两个是等价的：

```
>>> 0 if True else 1 + 1 if False else 1
0
>>> 0 if True else ( (1 + 1) if False else 1)
0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T14:27:55.287

三元运算符看起来像“condition ? value if true : value if false”，但python似乎不支持，但我们可以使用if-else来替换。stype类似于“condition if (b_1) else b_2 ，所以你可以依赖它来匹配。如果 b_1 为真，则值为条件，如果 b_2 为真，则值为 b_2。

# jquery - 通过父母的Jquery选择器？

> ID：11922307
> 
> 赞同：0
> 
> 时间：2012-08-12T12:48:52.840
> 
> 标签：jquery, jquery-selectors

我有这个简单的表（嵌套）

```
 <table border="1px">
            <tr>
                <th>kkkk</th>
                <th>mmmm</th>
            </tr>
            <tr>
                <td>a</td>
                <td>a</td>
            </tr>
            <tr>
                <td>a</td>
                <td>a</td>
            </tr>
            <tr>
                <td>a</td>
                <td>
                  <table border="1px" style="margin:10px">
                        <tr>
                            <th>xxxx</th>
                          <th style="background-color:yellow">yyyy</th>
                        </tr>
                        <tr>
                            <td>a</td>
                            <td>a</td>
                        </tr>
                        <tr>
                            <td>a</td>
                            <td>a</td>
                        </tr>
                        <tr>
                          <td >a</td>
                            <td  style="background-color:red;" class="theTd">a</td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table> 
```

![在此处输入图像描述](../Images/76f8ad670997c21939c1c99e183ff4e0.png)

*（这里没有任何表 ID）*

我想通过点击`red`区域，找到值所在的**行**`yellow`。

我没有获取`TH`.

问题是我只想通过`Parents()`方法来做到这一点 - 红框看到**2** `parents TR's`有`TH`.... xxx,yyy 行和 kkk,mmm 行...

就像是 ：

```
 alert( $(".theTd").parents("first tr  parent which contains th's").....); 
```

什么是正确的选择器语法？

[http://jsbin.com/udohum/1/edit](http://jsbin.com/udohum/1/edit)

# 编辑

*我不想要普通的 parent().parent().... 因为 `.theTd`可以在其中包含一个包装器 Div 等等...* - 所以这里的父级将是 DIV。（这损害了逻辑....）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:53:40.947

这样的事情呢？

```
$('.theTd').click(function(){
    alert($(this).parent().parent().find('tr > th:nth-child(2)').html());
}); 
```

（看到它在这里工作：http: [//jsfiddle.net/Te3QB/1/](http://jsfiddle.net/Te3QB/1/)）

**更新：**使用`.closest()`选择器可能会更好：

```
$('.theTd').click(function(){
    alert($(this).closest('table').find('tr > th:nth-child(2)').html());
}); 
```

> `.closest()`获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:59:42.617

`parents()`选择所选元素的所有父级，您可以使用`parentsUntil`：

```
$(".theTd").parentsUntil('table').find('th[style^=background]') 
```

[jsBin](http://jsbin.com/udohum/5/edit)

或`closest()`方法：

```
$(".theTd").closest('table').find('tr:has("th")').foo() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T13:09:32.890

要获得 tr，请尝试以下操作：

```
$(".theTd").closest("table").find("tr"); 
```

th 有点乱。我们将需要第 n 个孩子，为此我们需要索引：

```
$(this).closest('table').find('tr th:nth-child('+ ($(this).index()+1) +')'); 
```

# javascript - 图形在 THREE.js 中的 y 轴上的两侧对象旋转上消失

> ID：11922308
> 
> 赞同：1
> 
> 时间：2012-08-12T12:49:12.897
> 
> 标签：javascript, coffeescript, webgl, three.js

```
class Game extends backbone.View
    constructor: ->
        @scene = new THREE.Scene()
        @camera = new THREE.PerspectiveCamera 75, window.innerWidth/window.innerHeight, 1, 100000

        @camera.position.z = 300
        @scene.add @camera
        @imgText = imgText = THREE.ImageUtils.loadTexture "/images/health.png"
        imgText.wrapT = imgText.wrapS = THREE.RepeatWrapping
        sphereMat = new THREE.MeshBasicMaterial {map: imgText}
        @mesh = new THREE.Mesh new THREE.CylinderGeometry(100, 100, 200, 64, 1, true), sphereMat
        @mesh.doubleSided = @mesh.flipSided = true
        @mesh.frustumCulled = false
        @scene.add @mesh
        pl = new THREE.PointLight 0xFFFFFF
        [pl.position.x, pl.position.y, pl.position.z] = [10, 50, 130]
        @scene.add pl

        @el = $ "body"

    render: ->
        @renderer = new THREE.WebGLRenderer()
        @renderer.setSize window.innerWidth, window.innerHeight
        $(@el).append @renderer.domElement

        $(@el).mousewheel (event, delta) =>
            @camera.position.z += delta

    step: (delta) ->
        @mesh.rotation.y += 1*
        @renderer?.render @scene, @camera 
```

纹理消失/重新出现时遇到一些奇怪的问题。就像整个物体消失了一会儿，然后不知从何而来。我附上了一个 youtube 视频。

[http://www.youtube.com/watch?v=aHh25O6I5Vs](http://www.youtube.com/watch?v=aHh25O6I5Vs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:00:09.273

最有可能的是，您只需要设置`mesh.flipSided = false`and `mesh.doubleSided = true`。

# php - Storing a MySQL query in a MySQL database... Bad Idea?

> ID：11922318
> 
> 赞同：1
> 
> 时间：2012-08-12T12:51:09.207
> 
> 标签：php, mysql

I've got a shop where users can purchase virtual items, such as one time power-up's and permanent changes to the users account. These purchases potentially alter different fields in different tables, and there's the possibility for a lot of items so i don't want to code a new addition to a PHP file every time i want to add a new product.

I'm thinking of saving the query as a string into a MySQL database, then when an item is purchased i can fetch the string from the database and run it like that.

For example: A table `items` would contain a field `query_to_run` which would contain the string `UPDATE power_ups SET test = test WHERE test = 1` to be run when a user purchases an item.

Is this ever used or is there a better way to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:07:09.133

Storing queries in your database *may* be safer than you think. If the only way to insert the queries is through your own code, then you won't really be at risk of injection attacks (assuming that you write all the code yourself and you aren't including things like nasty where ID=$POST[...] in them.

So, on that note, yes, it is safe to keep SQL in your database.

Here's the *but* though.

But, I think you would be MUCH better off writing a simple object to handle these sorts of requests. You can very easily create a safe and secure object that takes a UserID and sends it in a query to the database - without the need for any stored SQL in the database (it seems like the only thing that will be changing is the user ID for example?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:06:34.053

If I were to tackle this problem myself I would use OOP PHP to define a power-up class with different types of power-up categorised by the type of database edits they must make.

What I think you are looking for is something that is quicker, and your solution is this (in the short-term) however what happens when you update the database structure or realise your old model doesn't fit when you wish to make improvements?

Because your SQL queries are [hard-coded](http://en.wikipedia.org/wiki/Hard_coding) you will have to rewrite each and every one, and each new power up takes longer than if you built a [soft-coded](http://en.wikipedia.org/wiki/Softcoding) framework around them.

So yes your method would work in practice as long as you don't mind sacrificing the extensibility and flexibility of your application in the future.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:58:20.857

I'd rather you do it through php since it's more efficient and less vulnerable.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T13:13:47.077

Your current method is **not flexible** at all. For example, when you add a new item, are you going to add a new table as well to store the information about the new item you have just added? If you have 10k different items, are you going to create 10k different tables? There are several other issues with this approach as well.

You should take a look at [Fundamentals of Relational Database Design](http://www.deeptraining.com/litwin/dbdesign/FundamentalsOfRelationalDatabaseDesign.aspx) to create a design that takes all the advantage of a relational database.

# dynamics-crm-2011 - 如何通过 Javascript 更新 Microsoft CRM Online 上的表单字段

> ID：11922319
> 
> 赞同：1
> 
> 时间：2012-08-12T12:51:11.023
> 
> 标签：dynamics-crm-2011, javascript, dynamics-crm-online

我刚刚在 Microsoft Dynamics CRM Online 上创建了一个自定义订单。

基本上，我想将总金额字段更新为数量和金额字段的乘积。我想我可以通过 Javascripts 做到这一点。我刚刚打开 Quantity Field Properties 菜单并到达 Events 菜单。它需要选择一个js库并编写正确的函数。我很确定这太容易了，但是，我不知道该怎么做。

基本上：

更新金额字段 X 数量字段应为 = 总金额字段值。我的脚本应该在 Quantity Field on Change 事件上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:45:21.347

以下是有关如何为您的表单设置 javascript 的信息：[microsoft 的表单编程参考](http://msdn.microsoft.com/en-us/library/gg328261.aspx)

您的计算代码将如下所示：

```
var amount = Xrm.Page.getAttribute("youramountfieldname").getValue();
var quantity = Xrm.Page.getAttribute("yourquantityfieldname").getValue();

var totalamount = amount * quantity;
Xrm.Page.getAttribute("yourtotalamountfieldname").setValue(totalamount); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:43:48.640

1.  代码需要封装为JS函数，然后需要创建为[Web Resource](http://msdn.microsoft.com/en-us/library/gg309473)
2.  Web 资源需要与您的表单相关联
3.  然后，您可以将函数名称分配给表单中的适当事件处理程序。

有用的演练：[http ://yazahmad.wordpress.com/2011/05/25/javascript-libraries-in-microsoft-dynamics-crm-2011/](http://ayazahmad.wordpress.com/2011/05/25/javascript-libraries-in-microsoft-dynamics-crm-2011/)

# php - OAuthException Facebook - 如何更改 PHP SDK 代码以确保解决此问题

> ID：11922321
> 
> 赞同：0
> 
> 时间：2012-08-12T12:51:20.143
> 
> 标签：php, facebook

当我尝试使用 PHP SDK 通过 Facebook 连接时出现以下错误。如何更改 PHP SDK 以解决此错误 - 使用户永远不会收到此错误：

> OAuthException：验证访问令牌时出错：会话已在 unix 时间 1344740400 过期。当前的 unix 时间为 1344752273。

有时我也无法访问 Facebook 会话，我该如何解决这个问题？这样人们就可以随时通过 facebook 联系？

我没有使用offline_access，而是使用新的Facebook PHP SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:04:32.423

看看这个官方博客文章的解决方案：[How-To: Handle expired access tokens](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-15T13:23:37.317

> 如何更改 PHP SDK 以解决此错误 - 使用户永远不会收到此错误

您根本不需要更改 SDK 代码……您所做的是，您去阅读 PHP 手册中的异常是什么以及如何处理它们：[http ://www.php.net/manual/en /language.exceptions.php](http://www.php.net/manual/en/language.exceptions.php)

# java - java.sql.SQLException：用户'root'@'localhost'的访问被拒绝（使用密码：是）

> ID：11922323
> 
> 赞同：59
> 
> 时间：2012-08-12T12:51:43.013
> 
> 标签：java, mysql, exception, jdbc, connection

以下代码：

```
Class.forName("com.mysql.jdbc.Driver");
Connection m_connection = DriverManager.getConnection("jdbc:mysql://localhost","root","root"); 
```

引发此异常`getConnection()`：

```
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919)
    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2397)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at db.Database.<init>(Database.java:91)
    at db.Main.main(Main.java:10) 
```

这是如何引起的，我该如何解决？

**编辑：**

```
 public static void main(String[] args) throws ClassNotFoundException, ServletException, SQLException 
    {

        try
        {
            Connection conn = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/?user=root&password=rootpassword"); 
            Statement   s = (Statement) conn.createStatement();
            int result = s.executeUpdate("CREATE DATABASE databasename");
        }

        catch ( Exception e)
        {
            e.printStackTrace();
        }
} 
```

生产：

```
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919)
    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2397)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at db.Main.main(Main.java:19) 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-12T13:23:18.930

这可以帮助您：

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY '%password%' WITH GRANT OPTION; 
```

使用命令行或一些 GUI 工具执行它。

不要忘记`%password%`用真实密码替换。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-09-23T04:41:30.820

[这特定于Ubuntu](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-18-04) 18.04 LTS 和 MySQL 5.x

```
sudo mysql_secure_installation

sudo mysql 
```

登录 MySQL 后，从 MySQL 提示符执行以下命令：

```
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';
FLUSH PRIVILEGES; 
```

现在验证该表是否具有 root 的密码

```
SELECT user,authentication_string,plugin,host FROM mysql.user; 
```

这解决了我的问题，现在我可以登录了。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-12T13:04:13.320

当您从头开始创建数据库时，您可以使用：

```
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/?user=root&password=rootpassword"); 
PreparedStatement ps = connection.prepareStatement("CREATE DATABASE databasename");
int result = ps.executeUpdate(); 
```

这是一个[相同的场景](http://forums.mysql.com/read.php?39,99321,102211#msg-102211)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-20T18:16:53.940

我遇到了类似的问题，但不同之处在于：我没有从 执行我的 JavaApp `localhost`，而是从远程 PC 执行。所以我得到了类似`java.sql.SQLException: Access denied for user 'root'@'a.remote.ip.adress' (using password: YES)` 解决这个问题的方法，您可以简单地登录到 phpMyAdmin，转到`Users`，单击`add user`并输入您要从中执行 JavaApp 的主机（或选择`Any Host`）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-13T13:43:02.670

你可以用这个

```
 static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
   static final String DB_URL = "jdbc:mysql://localhost:3306/YOUR_DB_NAME";

   static final String USER = "root";
   static final String PASS = "YOUR_ROOT_PASSWORD"; 

  Connection conn = DriverManager.getConnection(DB_URL,USER,PASS); 
```

您必须提供正确的 root 密码。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-08T20:41:49.477

我有同样的问题，如下所示

```
"java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)". Problem was "WRONG PASSWORD". 
```

将查询原样复制并粘贴到 shell 中以检查它是否提供所需的输出。小错误会消耗更多时间。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-29T13:17:40.407

这似乎主要发生在 MySQL 用户名和密码不正确时。检查您的 MySQL 用户名和密码。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-12T13:00:20.493

您应该指定要连接到的数据库：

```
jdbc:mysql://localhost:3306/mydb 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-12T13:00:07.913

试试这样......

```
public static Connection getConnection() throws SQLException{

    String driver = "com.mysql.jdbc.Driver";
    String url    = "jdbc:mysql://localhost:3306/test";
    String username = "root";
    String password = "vicky";            // Change it to your Password
    System.setProperty(driver,"");

    return DriverManager.getConnection(url,username,password);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-05T11:21:18.150

我遇到了同样的问题。新增mysql服务端口号(3307)，解决问题。

```
conn = DriverManager.getConnection("jdbc:mysql://localhost:3307/?" + "user=root&password=password"); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-21T20:00:34.773

虽然这可能不是您的问题的原因，但如果有两个 MySQL 服务在同一个端口上运行，您将收到相同的错误。您可以通过查看任务管理器的服务选项卡中的服务列表来检查 Windows。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-03T05:14:20.930

此异常也是由于 mysql db 和您的 pom.xml/jar 的版本不匹配引起的。

确保您的 pom.xml/jar 版本高于您的 mysql 数据库版本。因为较高版本与较低版本兼容，但反过来则不然。

java项目的解决方案

*   用合适的版本替换 Jar。

基于maven的解决方案

*   更改 pom.xml 中的依赖版本

spring boot 的解决方案 - 通过添加 5.1.5.Final 覆盖 spring boot 依赖项

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-16T06:39:47.277

我正在使用 Spring Boot 2.2.6(Windows) 并在尝试运行应用程序时遇到了同样的问题： ***java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)***

什么解决了我的问题：

1.  创建一个新用户（从 MySQL 工作台或您可能正在使用的类似 GUI）
2.  也从 GUI 授予 DBA 特权（勾选 DBA 复选框）
3.  运行弹簧启动应用程序。

或者按照@evg 解决方案从 Linux 环境中的命令行授予权限。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-08T16:37:44.347

我`application.properties`看起来像这样

```
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/mydb

spring.datasource.username=root

spring.datasource.password=root 
```

唯一对我有用的是 maven clean 然后 maven install 。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-11-16T02:18:44.033

我必须更改我的 SQL 设置（在我的主机中，在我的情况下为 Dreamhost）以允许用户名从其他主机访问数据库，而不仅仅是 Dreamhost，因为我正在我的计算机上从 IDE 运行程序。我现在通过在允许的主机列表中添加 % 来做到这一点。现在可以了！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-02T00:58:20.977

申报顺序：

*   司机
*   连接字符串
*   用户名
*   密码

如果我们按顺序声明

*   连接字符串
*   用户名
*   密码
*   司机

应用程序将失败

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-30T19:31:41.007

1.  使用正确的 jar（正确的版本）
2.  授予 root 用户独立于主机的访问权限或创建用户

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-03-13T18:23:31.897

对我来说，解决方案通过将 url 格式更改为： con=DriverManager.getConnection("jdbc:mysql://localhost/w3schools?user=###&password=###"); 确保将正确的 jar 添加到类路径并使用驱动程序 Class.forName("com.mysql.jdbc.Driver");

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-04T08:24:12.933

这为我解决了问题。

```
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'password';

GRANT ALL PRIVILEGES ON *.cfe TO 'root'@'%' IDENTIFIED BY 'password';

FLUSH PRIVILEGES; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-13T13:02:17.373

我也面临同样的问题，我的连接字符串有效，用户名和密码也有效，即使用户有足够的权限访问数据库。

我通过删除 MySQL 创建的临时文件夹解决了这个问题（**请在删除任何文件夹之前进行备份**，以防万一它不起作用，那么您可以再次放置该文件）。

Windows 中 MySQL 的临时文件和连接文件的默认文件夹位置是：

> C:\ProgramData\MySQL

我删除（备份）以下文件夹：

> C:\ProgramData\MySQL\MySQL 服务器\Data\sys

**注意：**在删除任何项目之前，请确保 MySQL 服务没有启动，否则它不允许删除任何文件

它对我有用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-13T13:49:55.893

我在运行springboot项目时，application.yml配置是这样的：</p>

```
server:
  port: 8080
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/lof?serverTimezone=GMT
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver 
```

请注意，密码周围没有引号。我可以在我的 Windows 系统中运行这个项目。

但是当我尝试部署到服务器时，我遇到了问题，我通过将 application.yml 更改为：

```
server:
  port: 8080
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/lof?serverTimezone=GMT
    username: root
    password: "root"
    driver-class-name: com.mysql.cj.jdbc.Driver 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-02-14T13:38:48.080

在以下位置添加端口号（类似于 3306）：

```
Connection c = DriverManager.getConnection("jdbc:mysql://localhost:urport","root","root"); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-09-05T12:02:58.413

在执行以下语句后使用相同的密码对我来说工作正常：

```
ALTER USER 'root'@'localhost' IDENTIFIED BY 'root'; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-12-05T13:20:45.250

```
spring.jpa.generate-ddl=true
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password=
spring.datasource.url=jdbc:mysql://localhost:3306/DATABASE_NAME? useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC 
```

**转到您的 phpmyadmin 数据库**

创建一个名为 DATABASE_NAME 的数据库并转到权限并检查数据库中具有权限的用户并使用它们，默认为“root”

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2017-12-18T03:42:26.363

我遇到了这个错误。问题是我的数据库名称错误。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2018-11-18T16:32:50.193

如果您使用 java 从本地计算机连接远程 mysql 服务器，请参阅以下步骤。错误：“java.sql.SQLException：用户'xxxxx'@'101.123.163.141'的访问被拒绝（使用密码：YES）”

远程访问可能是 cpanel 或其他人授予您本地 IP 地址的远程访问权限。

在上面的错误信息中：“101.123.163.141”是我的本地机器ip。因此，首先我们必须在 Cpanel-> Remote MySQL® 中提供远程访问权限。然后运行您的应用程序进行连接。

```
Class.forName("com.mysql.jdbc.Driver");  
Connection con=DriverManager.getConnection(  
    "jdbc:mysql://www.xyz.com/abc","def","ghi");  
//here abc is database name, def is username and ghi        
Statement stmt=con.createStatement();  
ResultSet rs=stmt.executeQuery("select * from employee");  
    while(rs.next())  
        System.out.println(rs.getInt(1)+" "+rs.getString(2)+"  
                          "+rs.getString(3));  
con.close(); 
```

希望它能解决您的问题。

谢谢

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2019-09-16T07:23:15.157

我也有这个问题，解决了。

更改：

``Sring url = "jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC&user=root&password=password";``

放：

`"serverTimezone=UTC"`是`"Unified standard world time"`。 `"useUnicode=true&characterEncoding=UTF-8"`是`"Solve Chinese garbled"`。

虽然我的数据库没有任何中文单词。但它正在工作。参考自[https://www.cnblogs.com/EasonJim/p/6906713.html](https://www.cnblogs.com/EasonJim/p/6906713.html)

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2020-01-03T18:04:26.237

如果您使用的是 MySql 工作台，请进入工作台主页，右键单击您的数据库，复制 JDBC 连接字符串，并将其粘贴到 Java 程序中。

# jquery - 如何从显示名称和以逗号分隔的电子邮件地址检查电子邮件地址是否有效？

> ID：11922326
> 
> 赞同：0
> 
> 时间：2012-08-12T12:52:29.347
> 
> 标签：jquery

**如何通过逗号分隔显示名称和电子邮件地址检查电子邮件地址是否有效...**

```
"a1 b.d"<a1@test.com>,  // this is valid
<a2@test.com>,   // this is valid
"a3 b.d"<a3@test.com> , // this is valid
a b.c a4@test.com ,   // this is not valid
"a1 b.d"<a1@test.com>,  // this is valid
<a2test.com>,   // this is not valid
"a3 b.d"<a3@testcom> , // this is not valid
" a b.c a4@test.com " ,   // this is not valid 
```

**整体是否有效？如何检查？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:03:10.730

创建一个包含所有电子邮件的数组，然后在循环时验证。检查列表语言结构。[http://php.net/manual/en/function.list.php](http://php.net/manual/en/function.list.php)

# php - 如何打印 SQL 语句？

> ID：11922330
> 
> 赞同：0
> 
> 时间：2012-08-12T12:53:20.750
> 
> 标签：php, sql

我有一个似乎不起作用的 SQL 语句，我花了一个多小时询问如何显示该语句的外观示例：

```
$result = mysql_query("SELECT * FROM myTable WHERE id=$my_id AND status=$active"); 
```

现在我需要做的就是查看实际传递的 SQL，所以我想它看起来像这样：

```
SELECT * FROM myTable WHERE id=2 AND status=4 
```

我知道这可能非常简单，但是我搜索的关键字并没有带回答案，我试过了，，，`print_r`等等`echo $result`，`mysql_fetch_array`但它并没有真正得到我需要的东西，有人可以让我摆脱痛苦并告诉我我该怎么做找回我刚刚浪费的生命？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:55:42.267

```
$sql = 'SELECT * FROM myTable WHERE id='.is_int($my_id).' AND status='.is_int($active);
$result = mysql_query($sql);
echo $sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:54:36.437

只是回应它。

```
echo "SELECT * FROM myTable WHERE id=$my_id AND status=$active"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:13:23.913

```
$sql = 'SELECT * FROM myTable WHERE id='.mysqli_escape_string($my_id).' AND status='.mysqli_escape_string($active);
$result = mysqli_query($sql) 或死 mysqli_error()。" 查询：".$sql;

```

使用`mysqli`而不是`mysql`因为`mysql`已弃用[Link](http://www.webmaster-source.com/2011/07/25/php-to-deprecate-mysql-extension-in-favor-of-mysqli-and-pdo/)。

# c++ - Visual C++ 10 - 不断尝试构建项目而不是文件？

> ID：11922331
> 
> 赞同：0
> 
> 时间：2012-08-12T12:53:28.050
> 
> 标签：c++, visual-studio-2010

因此，在创建了一个新项目，将其保存到我的桌面，然后在该项目中创建一个新的 cpp 文件之后，我尝试调试/运行该文件并立即收到一个错误，指出它找不到指定的项目（甚至cpp 文件）。

有人可以给我一个非常快速的解释，说明如何以不同的名称打开多个 cpp 文件，然后毫无问题地构建/运行它们吗？在过去的一个小时里，我一直试图弄清楚这一点，但对这个系统越来越感到沮丧。我会永远爱你。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:07:48.090

所有文件都必须是项目的一部分。就像所有男人“必须有父亲”一样。因此，您需要将 cpp 文件附加到一个空项目。您可以使用“新建项目”向导创建一个适合您的目标的新**空项目，并将“现有”文件附加到该项目中 - 您的 cpp 文件。**那时你应该能够构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:31:00.070

您必须将文件添加到您的项目中，如果它位于同一目录中是不够的。您需要打开项目，而不是 .cpp 文件。

您不能只运行单个 .cpp 文件，因为这将是一个可用的更改功能（不像您可以在任何其他环境中做的那样，但仍然如此）。

如果你讨厌 VS，我说你是在正确的轨道上。获取 MinGW，您可以使用 gcc 从命令行快速构建一个简单的 c++ 文件（真正的程序员从命令行构建）

```
g++.exe some-file.cpp -o some-file.exe
some-file.exe 
```

（你首先需要将mingw中的bin目录添加到你的路径中，当然）

最重要的是，如果你仍然可以没有它，你不应该开始使用 VS，它并没有更糟，但仍然很糟糕。而且它很慢，并且有非常烦人的“功能”。编写 c++ 代码只需要 notepad++。

# ruby-on-rails - Ruby on rails - # 奇怪的信息

> ID：11922335
> 
> 赞同：0
> 
> 时间：2012-08-12T12:54:10.557
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不知道为什么当我尝试分配变量时，我的视图中会出现一些奇怪的消息。

```
<%= column = local_assigns[:param] %> 
```

这是我的观点：

```
#<Resource:0x007f1004593600> 

#<Resource:0x007f1004592e08> 

#<Resource:0x007f1004889eb8> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:02:03.537

将代码更改为以下

```
<% column = local_assigns[:param] %> 
```

并且您不应该收到错误消息。我基本上删除了第一个 <%. “=”符号意味着“列”的值将被打印到屏幕上。

如果没有“=”符号，代码将在不打印任何输出的情况下执行。

# javascript - 在 node.js / socket.io - 哪些套接字（如果有）在“房间”中？

> ID：11922337
> 
> 赞同：0
> 
> 时间：2012-08-12T12:54:28.893
> 
> 标签：javascript, node.js, socket.io

在`socket.io`，如果我有一个房间`abc`，是否有办法知道房间里是否有人，例如，获得一个有`joined`房间的插座阵列？

例如，在梦幻足球中。管理员输入更改`Payton Manning`数据库中的记录。表触发器看到更改他的状态，因此向应用程序`Postgres`发送通知`node.js`。在收到应用程序级别的通知后，我们希望将 Manning 的统计数据显示给任何起草 Manning 并且在线（即`Peyton Manning`房间内）的人。

如果房间里没有人，就不要进行数据库查询，因为它非常昂贵。否则会查询数据库并将统计信息发送给房间里的每个人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:52:03.127

这就是我在我的聊天应用程序中所做的

```
var sockets = io.sockets.clients(channel); /*channel = room*/ 
```

# ruby-on-rails - url_for Rails 3 与 Rails 2 改变了吗？

> ID：11922339
> 
> 赞同：0
> 
> 时间：2012-08-12T12:54:56.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url-for

我已将 Rails 2 应用程序迁移到 Rails 3。但现在我遇到了以下问题。在我的一个视图文件中，我调用了以下 javascript（使用 JQuery）：

```
$.getJSON("<%= url_for(:controller => :visit_types, :action => :get_color)%>" + '/' + calEvent.visit_type_id, function(data) { calEvent.color = data;}); 
```

当它加载页面时，我收到错误：

> 没有路线匹配 {:controller=>"visit_types", :action=>"get_color"}

`rake routes`输出：

```
/visit_types/get_color/:id(.:format)    {:controller=>"visit_types",:action=>"get_color"} 
```

是真的。我没有通过`:id`电话`url_for()`。但在 Rails 2 中这是可能的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:30:56.393

我看到你在 javascript 中手动添加了 id。你应该写：

```
<%= url_for(:controller => :visit_types, :action => :get_color, :id => calEvent.visit_type_id)%> 
```

如果您运行`rake routes`，您通常还会在前面看到一个字符串，并且该字符串是您可以使用的名称而不是通用名称`url_for`（只需附加`_url`或`_path`），在您的情况下，这将类似于

```
get_color_visit_types_url(calEvent.visit_type_id) 
```

我发现这种形式更具表现力。另请注意，您可以在路由文件中提供更好或更具体的名称。

希望这可以帮助。

# iphone - 为 UITableViewCell 设置 ImageView

> ID：11922341
> 
> 赞同：0
> 
> 时间：2012-08-12T12:55:37.167
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试将此代码用于 cellForRowAtIndexPath 中的 UIImageView 没有结果：

```
cell.favImageView.image = [UIImage imageNamed:@"favoritedItem.png"]; 
```

图像在捆绑包中，拼写和格式都正确，只是不会显示。图像文件位于“图像”组中，但这无关紧要。我怎样才能显示这个图像？

另一个 ImageView 在 plist 字典中找到一个图像名称字符串，这工作正常：

```
cell.flagImageView.image = [UIImage imageNamed:[[sortedObjects objectAtIndex:indexPath.row] valueForKey:@"Flag"]]; 
```

附言。使用自定义原型单元和 Xcode 4/storyboard。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:14:18.517

这是我的应用程序外观。我使用动态原型表和自定义单元格。

![ss](../Images/6d6acd68933ea64a54f6993b01344e6d.png)

我的故事板如下所示。

![ss](../Images/50615ee58df1f37f21babba68413c506.png)

关键是您应该如下设置图像视图的**标签**。

![ss](../Images/ae7f1aafb8d823b51368580557109cfc.png)

不要忘记将**单元格标识符**设置为与代码中的相同。代码如下：

```
 UIImageView *imageView = (UIImageView *)[cell viewWithTag:5];
    imageView.image = [UIImage imageNamed:@"foo.jpg"]; 
```

# castle-windsor - 温莎城堡拦截器管道

> ID：11922343
> 
> 赞同：0
> 
> 时间：2012-08-12T12:55:55.053
> 
> 标签：castle-windsor, interceptor, pipeline

我想在一个名为 A 的类上创建一个拦截器管道。通过 pipleline i 意味着每个拦截器都可以在调用类方法之前或之后执行一些过程，而无需直接调用被拦截的方法，这与 Windsor 中拦截器的传统用法不同。假设以下示例我想在所有 A 类方法上应用两个拦截器 Interceptor1 和 Interceptor2。在未来的其他人中，也许会添加其他类型的拦截器。提供这些拦截器的顺序并不重要，谁应该调用调用。继续，应该在哪里发生被拦截的方法调用。

```
public class A
{
    public virtual void DoSomething()
    {

    }
}
public class Interceptor1 : IInterceptor
{
    public virtual void Intercept(IInvocation invocation)
    {

    }
}

public class Interceptor2 : IInterceptor
{
    public virtual void Intercept(IInvocation invocation)
    {

    }
} 
```

例如，假设我们要在进入类方法之前检查安全性、启动事务或类似的事情。应该提到的是，这些拦截器对于每个类都是不同的，并且在开发过程中可能会发生变化。我们可以在 wcf 中看到这样的模式，我们使用操作行为或服务行为来控制整个服务或每个服务操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:00:18.690

我一定是个老派的城堡人，但这不就是工厂的用途吗？在每个类上打一个接口，让工厂在那个接口上工作。

# php - imagettftext()、GD、TrueType 字体和字母“a”/“A”（奇怪）

> ID：11922350
> 
> 赞同：0
> 
> 时间：2012-08-12T12:57:22.187
> 
> 标签：php, gd, imagettftext

我正在使用以下代码生成基于文本的图像。一切正常，除了字母“a”和“A”分别显示为å和Å。为什么？

一切看起来都很好，但一个 / A。

```
 header('Content-Type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
//$text = @$_GET['text'];
$text = "qwertyuiopASDFGHJKLasdfghjklzxcvbnm";

// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
//imagettftext($im, 12, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 12, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im); 
```

谢谢！=)

编辑：img 的快照：![在此处输入图像描述](../Images/46f58e113da5f30780f1f44b394ef5c6.png)

**编辑2：** 这有什么结论吗？[http://en.wikipedia.org/wiki/%C3%85#On_computers](http://en.wikipedia.org/wiki/%C3%85#On_computers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:26:27.250

问题解决了：

字体 helonia.ttf 有一些奇怪的东西。不知道是什么，但它确实做到了。

我尝试了 arial.ttd 并解决了问题！

感谢所有帮助过的人！

# sql - 从命令行作为 mysql 的 SQL Server

> ID：11922351
> 
> 赞同：0
> 
> 时间：2012-08-12T12:57:34.150
> 
> 标签：sql, sql-server

如何查看从命令行创建的 SQL Server 数据库？在mysql中可以这样做

```
C:> mysql -u name -p(password) 
```

但我不知道我可以使用什么默认（root）用户名和密码来输入

```
C:> sqlcmd -U xxx -P xxx 
```

我应该使用什么 xxx ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:04:29.093

该`sqlcmd`实用程序应该适用于没有管理权限的用户。除了指定非管理员用户的用户名和密码之外，您还需要指定您的用户名有权访问的数据库：

```
C:> sqlcmd -U <non-admin-username> -P <non-admin-password> -d db_name 
```

或者，您可以通过指定选项在有权访问您的数据库的 Windows 登录上“搭载” `-E`：

```
C:> sqlcmd -E 
```

应该打开 Windows 身份验证以使其正常工作（试试这个，或询问您的 DBA）。

# qt - 蟒蛇谷歌地图

> ID：11922354
> 
> 赞同：1
> 
> 时间：2012-08-12T12:57:55.567
> 
> 标签：qt, location, pyqt, designer, geo

我目前正在使用 python 和 qt 设计器。**pyqt**

我正在寻找一种方法来可视化地图及其上的位置和标签。我必须使用 adreeses 查找位置，就像您在谷歌地图中搜索一样，在单个地图上需要多个标签。我已经搜索了一些模块并且知道什么是地理编码和反向编码。但是，在您使用一堆地址获得您的纬度和经度值后，您不知道该怎么做。假设一个列表包含 20 个地址，使用这些地址或使用它们的 lan 和 lon 值，我想显示一个地图，其中所有 20 个地址都固定在该地图上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:34:03.023

您可以为此使用谷歌地图吗？您可以使用 QWebView 作为接口组件和 te google python API 将数据提供给视图。无论如何，这将是我的建议。

# xcode - Mac OS X 中带有单文档应用程序的核心数据

> ID：11922362
> 
> 赞同：0
> 
> 时间：2012-08-12T12:58:42.713
> 
> 标签：xcode, macos, core-data

我正在尝试在基于非文档的（单协调器）应用程序中使用 CoreData。我已经到处搜索了一个很好的例子，并测试了几种不同的方法，但是——作为 Mac OS X 开发的新手——一直找不到任何可行的方法。

基本上我有一个应用程序，其中 NSTableView 列出了一些条目，每个条目都可以编辑并保存其相关数据。数据不是基于文档的，而是应该存储在某种“中央存储”中。我已经很好地设置了模型，并且可以手动填充表格中的项目。问题只是：如何使用 CoreData 持久保存数据，以便下次启动应用程序时可以再次加载数据。

我在这里寻找的内容有一个很好的单行摘要：“这些应用程序通常具有由单个控制器对象管理的单个核心数据堆栈（由单个持久存储协调器定义）。它们通常使用单个持久存储对于整个应用程序。”

[http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/stack.html](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/stack.html)

是否有任何好的教程或快速代码示例，我可以看到如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:14:41.300

Tim Isted有一个很棒的[示例项目](http://www.timisted.net/blog/archive/project-code-announcement/)。在该系列文章中，作者解释了如何使用 CoreData 构建鞋盒应用程序、如何支持 Undo、多个托管对象上下文等。您可能需要将源代码适应现代 Cocoa 环境，但这应该是完全值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:16:50.600

为什么不创建一个新的 xcode 项目，选择一个可可应用程序并检查*使用核心数据*标志而不是*基于文档的*标志，然后看看 xcode 生成了什么？

要么在项目中复制它，要么在新模板中移动现有代码。

# asp.net - ASP.NET 中根据登录名访问一组子目录的授权

> ID：11922364
> 
> 赞同：0
> 
> 时间：2012-08-12T12:58:45.610
> 
> 标签：asp.net

场景：Web 应用程序由一个根目录（打开，无授权）和许多子目录（我们称它们为 Sub1、Sub2 和 Sub3）组成。此外，当提供用户名时，有一种方法会联系 SP 并返回`IEnumerable<String>`由子目录名称组成的一个，该子目录的名称应该允许某个用户访问。以上是不可更改的。

我想知道解决这个问题的**最巧妙的方法是什么。**我不能依赖 AD，存储在 cookie 或会话变量中的简单授权不会允许可访问子目录的多样化。

*我非常有信心我可以让它发挥作用，但我想以夸夸其谈的方式做到这一点。*

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:40:15.787

对我来说，听起来你可以`web.config`在每个子文件夹中放一个

```
<authorization>
   <allow roles="SubfolderName" />
   <deny users="*" />
</authorization> 
```

然后，对于每个用户，将此`IEnumerable<string>`子文件夹列表的结果附加到角色管理器中的用户角色。

这样，每个尝试访问文件夹的用户都将在他/她的角色列表中拥有适当的角色，并且 url 授权模块将允许用户访问该文件夹。

# php - 在来自 php 的单个查询中将多条记录插入 mysql

> ID：11922366
> 
> 赞同：0
> 
> 时间：2012-08-12T12:59:15.543
> 
> 标签：php, html, mysql, forms

谁能帮我解决以下问题的代码。

```
Print "<th>Id no</th> <th>Name</th> <th>Maximum Marks</th><th>Marks Obtained</th></tr>"; 

while($data = mysql_fetch_array($sql)) { 
    Print "<tr><td>".$data['idno']." </td><td>".$data['name'] . " </td><td> <input type=text name=maxmarks></td><td> <input type=text name=obtmarks></td></tr>";
}

Print "</table><br><br><input type=submit value=submit></center>"; 
```

实际上，上面的代码显示了一个包含四列的表，其中前两列是从数据库中检索的，其余两列是文本框...

用户输入数据，点击提交按钮后，整个表必须存储在数据库中。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:04:55.907

可以在数据库中插入多个用逗号分隔的值，但您需要在表中循环并正确格式化查询。

例子

```
INSERT INTO tablename (colA, colB, colC) VALUES (valueA, valueB, valueC),
                                                (valueD, valueE, valueF),
                                                (valueG, valueH, valueI) 
```

# ruby - 无法执行实例变量

> ID：11922368
> 
> 赞同：0
> 
> 时间：2012-08-12T12:59:57.540
> 
> 标签：ruby

我正在尝试学习 Ruby 语言中的实例变量。所以如果这是一个愚蠢的问题，请原谅。

```
class Instance
  def method1
    @hello = "hello"
    p hello
  end
  Instance.new.method1()
end 
```

**当我尝试运行上述程序时，它给了我以下错误**

> > C:\Documents and Settings\Sai\Desktop\RubySamples>ruby Instance.rb
> > Instance.rb:4:in `method1': undefined local variable or method`hello' for # `<Instance:0xf09fa8 @hello="hello">`(NameError)
> > 
> > > 从 Instance.rb:6:in '`<class:Instance>'
> > > from Instance.rb:1:in`

如果我从 hello 中删除 @ 符号，则上述相同的程序对局部变量工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T13:12:02.897

没有问题是愚蠢的。您正在为实例变量赋值，但您正在调用下面的局部变量（或方法）。

`@hello`是在实例范围内可用的实例变量，与`hello`局部变量不同。

[这是关于实例](http://www.rubyist.net/~slagell/ruby/instancevars.html)和[局部](http://www.rubyist.net/~slagell/ruby/localvars.html)变量的不错的读物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:05:01.347

以下是两种可行的解决方案：

首先，对实例变量使用访问器（第二行）：

```
class Instance
  attr_accessor :hello
  def method1
    @hello = "hello"
    p hello
  end
  Instance.new.method1()
end 
```

二、直接使用实例变量：

```
class Instance
  def method1
    @hello = "hello"
    p @hello
  end
  Instance.new.method1()
end 
```

另一个想法：我会在类定义之外调用该方法：

```
class Instance
  def method1
    @hello = "hello"
    p @hello
  end
end
Instance.new.method1() 
```

# php - 将 .xml 文件自动发布到 REST API

> ID：11922372
> 
> 赞同：1
> 
> 时间：2012-08-12T07:35:20.527
> 
> 标签：php, xml, curl

我们需要将 .xml 文件发布到 API - REST API - BigCommerce。

这是一个比较基础的api..

我们已经尝试过这个 php curl 脚本将 xml 文件发布到 API，但是没有运气。

```
<?php

// test XML API POST
$filename = "test.xml"; 
$handle = fopen($filename, "r"); 
$XPost = fread($handle, filesize($filename));
fclose($handle);

$url = "https://urlofapi"; // set REST URL 
$api_token = "apihashkey";
$xml = urlencode($XPost);
$user_agent = "SoEasy REST API Client 0.1";

// Get the curl session object 
$session = curl_init($url);
// set url to post to curl_setopt($session, CURLOPT_URL,$url); 

curl_setopt($session, CURLOPT_POST, true); // Tell curl to use HTTP POST; 
curl_setopt($session, CURLOPT_POSTFIELDS, $XPost); // Tell curl that this is the body of the POST 
curl_setopt($session, CURLOPT_USERPWD, $api_token); // define userpassword api token
curl_setopt($session, CURLOPT_HTTPAUTH, CURLAUTH_ANY); // defining REST basic authentication 
curl_setopt($session, CURLOPT_HTTPHEADER, Array("Content-Type: application/xml")); // define header 
curl_setopt($session, CURLOPT_SSL_VERIFYPEER, false); // ignore ssl cert for debug purposes curl_setopt($session, CURLOPT_USERAGENT, $user_agent); // user agent so the api knows what for some unknown reason 
curl_setopt($session, CURLOPT_HEADER, 1); // Tell curl not to return headers, but do return the response 
curl_setopt($session, CURLOPT_RETURNTRANSFER, true); // allow redirects curl_setopt($session, CURLOPT_FOLLOWLOCATION, true);

$response = curl_exec($session);
print_r($response);
curl_close($session);
?> 
```

到目前为止已连接，但未成功 - 发生错误 -

```
Warning: fread() [function.fread]: Length parameter must be greater than 0 in /home/user/public_html/test/new.php on line 7

HTTP/1.1 405 Method Not Allowed Date: Sun, 12 Aug 2012 07:31:11 GMT 

Server: Apache Allow: GET, HEAD, OPTIONS
X-BC-ApiLimit-Remaining: 5000 X-BC-Store-Version: 7.3.37 
X-Powered-By: PleskLin Transfer-Encoding: chunked Content-Type: application/xml 
X-Pad: avoid browser bug 405 This resource does not support the requested method.
 Refer to the Allow response header for methods supported by this resource. 
```

我们需要做的只是将一个 .xml 文件发布到大型商业 API。.xml 来自帐户软件并生成正确的 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:20:51.647

该文件`test.xml`的长度为零或（可能更多）不存在。

您需要启用 PHP 错误日志，然后跟踪错误日志以了解您的案例中的此类问题或进行实际的错误检查。

此外，您正在向不支持它的服务器端点发送 POST 请求。您需要了解 HTTP 协议基础知识才能正确理解给定的错误消息以及提供的调试信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T17:30:19.500

我知道这是一篇较旧的帖子 - 问题是 OP 在检查文件长度时引用了文件名，而不是文件处理程序，因此每次都得到 0。

```
$XPost = fread($handle, filesize($filename)); 
```

本来应该：

```
$XPost = fread($handle, filesize($handle)); 
```

# iphone - Cocos2d,提交应用前

> ID：11922373
> 
> 赞同：0
> 
> 时间：2012-08-12T13:00:45.663
> 
> 标签：iphone, objective-c, ios, xcode4, cocos2d-iphone

我必须将图像放在项目的实际文件中还是可以将图像放在桌面上？另外，当您将文件存档以在管理器中具有空白图标时是否正常。感谢我得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:10:35.140

关于图像：当您构建应用程序时，所有资源（图像、声音等）都会复制到应用程序包中，因此它们在您的计算机/项目中的位置无关紧要。另一方面，将所有项目文件收集在一个地方（而不是桌面......）是一个很好的建议

通常，管理器中空白图标的问题来自使用您的应用程序 info.plist 中指定的“自定义”图标名称。这是良性的，但您可能希望通过在 Xcode 摘要窗格中为您的目标明确分配图标来修复它（见图）

![在此处输入图像描述](../Images/96b0082d1f67de18503f5f1ef5e9d35b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:08:14.460

您的图像应包含在项目文件夹中以进行良好的组织；当您知道项目中所需的所有内容都在这个文件夹中时，可以轻松备份文件夹和其他项目。

# objective-c - 子类化自定义 UIView - 如何初始化

> ID：11922376
> 
> 赞同：0
> 
> 时间：2012-08-12T13:00:59.517
> 
> 标签：objective-c, ios, uiview

所以假设我有两个视图，`MyView`并且`MySubview`，两个都是子类`UIView`。

视图.h：

```
@interface MyView : UIView <ProgressCallback>
@property (retain, nonatomic) IBOutlet UIProgressBar *progress;

- (id) initWithFrame: (CGRect) frame;
- (void) progressUpdated: (NSNumber) newProgress;

@end 
```

查看.m

```
@implementation MyView
@synthesize progress = _progress;

- (id)initWithFrame:(CGRect)frame;
{
    self = [super initWithFrame:frame];

    if (self){
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"MyViewNibFile"
                                                              owner:nil
                                                            options:nil];

        if ([arrayOfViews count] < 1){
            [self release];
            return nil;
        }

        View *newView = [[arrayOfViews objectAtIndex:0] retain];
        [newView setFrame:frame];

        [self release];
        self = newView;

        self.progress.progress = .25 // This will work and change it.
    }

    return self;
}

- (void) progressUpdated: (NSNumber) newProgress {
     self.progress.progress = newProgress.floatValue; // This also works!
} 
```

我通过浏览 Apple 的文档和 StackOverflow 找到了这种创建 UIView 子类的方法。它可以工作，我可以根据回调设置我的进度，它会出现等。我的问题是当我想子查看它时。

我的子视图.h

```
@interface MySubview : MyView
@property (retain, nonatomic) IBOutlet UIImageView *image;
@end 
```

我的子视图.m

@implementation MySubview

```
- (id)initWithLabel: (UIImageView *) image andWithFrame:(CGRect)frame;
{
    self = [super initWithFrame:frame];

    if (self){
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"MySubViewNibFile"
                                                              owner:nil
                                                            options:nil];

        if ([arrayOfViews count] < 1){
            [self release];
            return nil;
        }

        MySubbiew *newView = [[arrayOfViews objectAtIndex:0] retain];
        [newView setFrame:frame];

        [self release];
        self = newView;

        self.progress.progress = .25 // This will work and change it.
        self.image = image; // Also works
    }

    return self;
} 
```

无论我如何初始化我的子类，我都无法让进度条在子类中工作。我可以在init的时候设置它，它不是nil，但它显然与我认为init之后的不对应。我认为这与我正在释放自我这一事实有关，但如果我想返回 View 类型的类，我看不到任何其他选择。我使用相同风格的 init，只是将类名更改为 Subview。回调实际上被调用并更改了代码，但它不会更新显示。笔尖中的所有东西都正确连接，除了大小之外，它们都是相同的，在这种情况下，还有图像。

（我尽力让示例代码尽可能简单明了。如果我没有成功，请告诉我，我会更新它。）

你如何正确地继承 UIView？我阅读了文档，没有任何启发，但请随时为我指明正确的方向。具体来说，我必须覆盖什么才能让所有内容都指向正确的项目？也就是说，显示器上的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:40:54.080

调用方法后`initWithFrame:`，您将覆盖 self 的值`initWithLabel:andWithFrame:`

这一行：

```
self = newView; 
```

覆盖在 MyView 超类 init 方法中创建的 self 的值，因此您将丢失所有自定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:42:30.090

如果你也有这个问题，你可能做错了，因为我是。

一般来说：

如果您在弄乱内容，请覆盖`UIViewController`.

如果你在搞乱几何，覆盖`UIView`.

这解决了我的问题，尽管从技术上讲，我的代码有什么问题是 wattson12 所说的。

# objective-c - Retina 显示屏的字体大小

> ID：11922379
> 
> 赞同：3
> 
> 时间：2012-08-12T13:01:30.640
> 
> 标签：objective-c, macos, cocoa, font-size, retina-display

我的 Mac OS 应用程序使用如下代码绘制一些文本：

```
void drawString(NSString* stringToDraw)
{
    NSFontManager *fontManager = [NSFontManager sharedFontManager];
    NSString* fontName =  [NSString stringWithCString: "Helvetica" encoding: NSMacOSRomanStringEncoding];
    NSFont* font = [fontManager fontWithFamily:fontName traits:0 weight:5 size:9];
    NSMutableDictionary *attribs = [[NSMutableDictionary alloc] init];
    [attribs setObject:font forKey:NSFontAttributeName];
    [stringToDraw drawAtPoint:NSMakePoint (0, 0) withAttributes:attribs];
} 
```

由于文本绘图在应用程序中只占很小的一部分，因此这种简单的方法到目前为止效果很好。但是现在有了新的 Retina 显示屏，用户抱怨文本与其他图形相比显得太大了。似乎给出绝对字体大小（在我的情况下为 9）不再有效。

如何修复此代码以使其适用于视网膜和非视网膜显示器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:03:47.270

字体大小以磅为单位，而不是以像素为单位。所以任何值都应该独立于 Retina 分辨率。例如，这段代码可以正常工作：

```
- (void)drawRect:(NSRect)dirtyRect
{
    CGRect textRect = CGRectInset(self.bounds, 15.0, 15.0);

    [[[NSColor whiteColor] colorWithAlphaComponent:0.5] setFill];
    NSRectFillUsingOperation(textRect, NSCompositeSourceOver);

    NSFont *font = [[NSFontManager sharedFontManager] fontWithFamily:@"Helvetica"
                                                              traits:0.0
                                                              weight:5.0
                                                                size:30.0];
    [@"Hello\nWorld" drawInRect:textRect
                 withAttributes:@{ NSFontAttributeName : font }];
} 
```

结果：

![非视网膜](../Images/272691315ac8587fcf6a2db158c050ee.png)

![视网膜](../Images/713b0fd518cadd6dcdc9177f89bc2cab.png)

如果您有不同显示模式的精确像素大小，请尝试以下操作：

```
CGFloat contentsScale = self.window.backingScaleFactor;
CGFloat fontSize = (contentsScale > 1.0 ? RETINA_FONT_SIZE : STANDARD_FONT_SIZE);
NSFont *font = [[NSFontManager sharedFontManager] fontWithFamily:@"Helvetica"
                                                          traits:0.0
                                                          weight:5.0
                                                            size:fontSize]; 
```

它有效吗？

# javascript - 如何访问和处理嵌套对象、数组或 JSON？

> ID：11922383
> 
> 赞同：1049
> 
> 时间：2012-08-12T13:02:12.127
> 
> 标签：javascript, arrays, object, nested, data-manipulation

我有一个包含对象和数组的嵌套数据结构。如何提取信息，即访问特定或多个值（或键）？

例如：

```
var data = {
    code: 42,
    items: [{
        id: 1,
        name: 'foo'
    }, {
        id: 2,
        name: 'bar'
    }]
}; 
```

我怎样才能访问`name`中的第二项`items`？

* * *

## 回答 #1

> 赞同：1384
> 
> 时间：2012-08-12T13:02:12.127

## 预赛

JavaScript 只有一种可以包含多个值的数据类型：**Object**。**数组**是一种特殊形式的对象。

（普通）对象具有形式

```
{key: value, key: value, ...} 
```

数组有形式

```
[value, value, ...] 
```

数组和对象都公开了一个`key -> value`结构。数组中的键必须是数字，而任何字符串都可以用作对象中的键。键值对也称为**“属性”**。

可以使用**点符号访问属性**

```
const value = obj.someProperty; 
```

或**括号表示法**，如果属性名称不是有效的 JavaScript[标识符名称*^([spec])*](http://es5.github.com/#x7.6)，或者名称是变量的值：

```
// the space is not a valid character in identifier names
const value = obj["some Property"];

// property name as variable
const name = "some Property";
const value = obj[name]; 
```

因此，数组元素只能使用方括号表示法访问：

```
const value = arr[5]; // arr.5 would be a syntax error

// property name / index as variable
const x = 5;
const value = arr[x]; 
```

### 等等... JSON 呢？

JSON 是数据的文本表示，就像 XML、YAML、CSV 等一样。要使用此类数据，首先必须将其转换为 JavaScript 数据类型，即数组和对象（以及如何使用这些数据，刚刚解释过）。如何解析 JSON 在[Parse JSON in JavaScript?中进行了解释。](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript).

### 进一步阅读材料

如何访问数组和对象是基本的 JavaScript 知识，因此建议阅读[MDN JavaScript 指南](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)，尤其是章节

*   [使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)
*   [数组](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#Array_object)
*   [Eloquent JavaScript - 数据结构](http://eloquentjavascript.net/04_data.html)

* * *

* * *

## 访问嵌套数据结构

嵌套数据结构是引用其他数组或对象的数组或对象，即它的值是数组或对象。可以通过连续应用点或括号符号来访问此类结构。

这是一个例子：

```
const data = {
    code: 42,
    items: [{
        id: 1,
        name: 'foo'
    }, {
        id: 2,
        name: 'bar'
    }]
}; 
```

假设我们要访问`name`第二项的 。

以下是我们如何一步一步地做到这一点：

正如我们所见`data`，它是一个对象，因此我们可以使用点表示法访问它的属性。该`items`属性的访问方式如下：

```
data.items 
```

该值是一个数组，要访问它的第二个元素，我们必须使用括号表示法：

```
data.items[1] 
```

该值是一个对象，我们再次使用点符号来访问该`name`属性。所以我们最终得到：

```
const item_name = data.items[1].name; 
```

或者，我们可以对任何属性使用括号表示法，特别是如果名称包含的字符会使它对点表示法无效：

```
const item_name = data['items'][1]['name']; 
```

* * *

### 我试图访问一个属性，但我只能`undefined`回来？

大多数时候，当您获取 时`undefined`，对象/数组根本没有具有该名称的属性。

```
const foo = {bar: {baz: 42}};
console.log(foo.baz); // undefined 
```

使用[`console.log`](https://developer.mozilla.org/en-US/docs/DOM/console.log)或[`console.dir`](https://developer.mozilla.org/en-US/docs/DOM/console.dir)检查对象/数组的结构。您尝试访问的属性可能实际上是在嵌套对象/数组上定义的。

```
console.log(foo.bar.baz); // 42 
```

* * *

### 如果属性名称是动态的并且我事先不知道它们怎么办？

如果属性名称未知，或者我们想要访问对象/数组元素的所有属性，我们可以使用对象的[`for...in` *^[*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in) [`for` *^(MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)循环和数组的 [MDN] 循环来遍历所有属性/元素。

**对象**

要遍历 的所有属性`data`，我们可以像这样遍历**对象**：

```
for (const prop in data) {
    // `prop` contains the name of each property, i.e. `'code'` or `'items'`
    // consequently, `data[prop]` refers to the value of each property, i.e.
    // either `42` or the array
} 
```

根据对象的来源（以及您想要做什么），您可能必须在每次迭代中测试该属性是否真的是对象的属性，或者它是继承的属性。你可以用[`Object#hasOwnProperty` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)做到这一点。

作为`for...in`with 的替代方法`hasOwnProperty`，您可以使用[`Object.keys` *^([MDN])*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)获取*属性名称数组*：

```
Object.keys(data).forEach(function(prop) {
  // `prop` is the property name
  // `data[prop]` is the property value
}); 
```

**数组**

要遍历`data.items` **数组**的所有元素，我们使用`for`循环：

```
for(let i = 0, l = data.items.length; i < l; i++) {
    // `i` will take on the values `0`, `1`, `2`,..., i.e. in each iteration
    // we can access the next element in the array with `data.items[i]`, example:
    // 
    // var obj = data.items[i];
    // 
    // Since each element is an object (in our example),
    // we can now access the objects properties with `obj.id` and `obj.name`. 
    // We could also use `data.items[i].id`.
} 
```

也可以`for...in`用来迭代数组，但有一些原因应该避免这种情况：[为什么在 JavaScript 中使用数组的“for(var item in list)”被认为是不好的做法？](https://stackoverflow.com/questions/2265167/why-is-forvar-item-in-list-with-arrays-considered-bad-practice-in-javascript).

随着浏览器对 ECMAScript 5 的支持越来越多，数组方法[`forEach` *^([MDN])*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)也成为了一个有趣的替代方案：

```
data.items.forEach(function(value, index, array) {
    // The callback is executed for each element in the array.
    // `value` is the element itself (equivalent to `array[index]`)
    // `index` will be the index of the element in the array
    // `array` is a reference to the array itself (i.e. `data.items` in this case)
}); 
```

在支持 ES2015 (ES6) 的环境中，您还可以使用[*^([MDN])*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)循环，它不仅适用于数组，还适用于任何[*可迭代*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable)的：[*`for...of`*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)[](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable)

 *```
for (const item of data.items) {
   // `item` is the array element, **not** the index
} 
```

在每次迭代中，`for...of`直接给我们迭代的下一个元素，没有“索引”可以访问或使用。

* * *

### 如果我不知道数据结构的“深度”怎么办？

除了未知键之外，数据结构的“深度”（即有多少嵌套对象）也可能是未知的。如何访问深度嵌套的属性通常取决于确切的数据结构。

但是如果数据结构包含重复模式，例如二叉树的表示，则解决方案通常包括[**递归地** *^([维基百科])*](https://en.wikipedia.org/wiki/Recursion_%28computer_science%29)访问数据结构的每个级别。

这是获取二叉树的第一个叶节点的示例：

```
function getLeaf(node) {
    if (node.leftChild) {
        return getLeaf(node.leftChild); // <- recursive call
    }
    else if (node.rightChild) {
        return getLeaf(node.rightChild); // <- recursive call
    }
    else { // node must be a leaf node
        return node;
    }
}

const first_leaf = getLeaf(root); 
```

```
const root = {
    leftChild: {
        leftChild: {
            leftChild: null,
            rightChild: null,
            data: 42
        },
        rightChild: {
            leftChild: null,
            rightChild: null,
            data: 5
        }
    },
    rightChild: {
        leftChild: {
            leftChild: null,
            rightChild: null,
            data: 6
        },
        rightChild: {
            leftChild: null,
            rightChild: null,
            data: 7
        }
    }
};
function getLeaf(node) {
    if (node.leftChild) {
        return getLeaf(node.leftChild);
    } else if (node.rightChild) {
        return getLeaf(node.rightChild);
    } else { // node must be a leaf node
        return node;
    }
}

console.log(getLeaf(root).data);
```

访问具有未知键和深度的嵌套数据结构的更通用方法是测试值的类型并采取相应措施。

这是一个将嵌套数据结构内的所有原始值添加到数组中的示例（假设它不包含任何函数）。如果我们遇到一个对象（或数组），我们只需`toArray`再次调用该值（递归调用）。

```
function toArray(obj) {
    const result = [];
    for (const prop in obj) {
        const value = obj[prop];
        if (typeof value === 'object') {
            result.push(toArray(value)); // <- recursive call
        }
        else {
            result.push(value);
        }
    }
    return result;
} 
```

```
const data = {
  code: 42,
  items: [{
    id: 1,
    name: 'foo'
  }, {
    id: 2,
    name: 'bar'
  }]
};

function toArray(obj) {
  const result = [];
  for (const prop in obj) {
    const value = obj[prop];
    if (typeof value === 'object') {
      result.push(toArray(value));
    } else {
      result.push(value);
    }
  }
  return result;
}

console.log(toArray(data));
```

* * *

* * *

## 帮手

由于复杂对象或数组的结构不一定很明显，我们可以检查每一步的值来决定如何进一步移动。[`console.log` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/console.log)和[`console.dir` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/console.dir)帮助我们做到这一点。例如（Chrome 控制台的输出）：

```
> console.log(data.items)
 [ Object, Object ] 
```

在这里，我们看到这`data.items`是一个包含两个元素的数组，这两个元素都是对象。在 Chrome 控制台中，对象甚至可以立即展开和检查。

```
> console.log(data.items[1])
  Object
     id: 2
     name: "bar"
     __proto__: Object 
```

这告诉我们 that`data.items[1]`是一个对象，在展开它之后我们看到它具有三个属性`id`，`name`和`__proto__`。后者是用于对象原型链的内部属性。不过，原型链和继承超出了这个答案的范围。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-05-14T03:29:19.083

您可以通过这种方式访问​​它

```
data.items[1].name 
```

或者

```
data["items"][1]["name"] 
```

两种方式都是平等的。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2016-10-22T18:38:41.713

对象和数组有很多内置方法可以帮助您处理数据。

注意：在许多示例中，我使用的是[箭头函数](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions)。它们类似于[函数表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function)，但它们在`this`词法上绑定值。

## [`Object.keys()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys), [`Object.values()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values)(ES 2017) 和[`Object.entries()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)(ES 2017)

`Object.keys()`返回对象键`Object.values()`的数组，返回对象值`Object.entries()`的数组，并以格式返回对象的键和对应值的数组`[key, value]`。

```
const obj = {
  a: 1
 ,b: 2
 ,c: 3
}

console.log(Object.keys(obj)) // ['a', 'b', 'c']
console.log(Object.values(obj)) // [1, 2, 3]
console.log(Object.entries(obj)) // [['a', 1], ['b', 2], ['c', 3]]
```

### `Object.entries()`带有 for-of 循​​环和解构赋值

```
const obj = {
  a: 1
 ,b: 2
 ,c: 3
}

for (const [key, value] of Object.entries(obj)) {
  console.log(`key: ${key}, value: ${value}`)
}
```

`Object.entries()`使用[for-of 循​​环](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/for...of)和[解构赋值](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)来迭代结果非常方便。

For-of 循​​环可让您迭代数组元素。语法是`for (const element of array)`（我们可以`const`用`var`or代替`let`，但`const`如果我们不打算修改，最好使用`element`）。

解构赋值允许您从数组或对象中提取值并将它们分配给变量。在这种情况下`const [key, value]`，意味着我们不是将`[key, value]`数组分配给 ，而是将该数组`element`的第一个元素分配给`key`，将第二个元素分配给`value`。它等价于：

```
for (const element of Object.entries(obj)) {
  const key = element[0]
       ,value = element[1]
} 
```

如您所见，解构使这变得简单得多。

## [`Array.prototype.every()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every)和[`Array.prototype.some()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)

如果指定的回调函数为数组的*每个*元素返回，则该`every()`方法返回。如果指定的回调函数为*某个*（至少一个）元素返回，则该方法返回。`true``true`*`some()``true``true`*

 **```
const arr = [1, 2, 3]

// true, because every element is greater than 0
console.log(arr.every(x => x > 0))
// false, because 3^2 is greater than 5
console.log(arr.every(x => Math.pow(x, 2) < 5))
// true, because 2 is even (the remainder from dividing by 2 is 0)
console.log(arr.some(x => x % 2 === 0))
// false, because none of the elements is equal to 5
console.log(arr.some(x => x === 5))
```

## [`Array.prototype.find()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)和[`Array.prototype.filter()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)

这些`find()`方法返回满足提供的回调函数*的第一个*元素。该方法返回满足提供的回调函数的*所有*`filter()`元素的数组。

 *```
const arr = [1, 2, 3]

// 2, because 2^2 !== 2
console.log(arr.find(x => x !== Math.pow(x, 2)))
// 1, because it's the first element
console.log(arr.find(x => true))
// undefined, because none of the elements equals 7
console.log(arr.find(x => x === 7))

// [2, 3], because these elements are greater than 1
console.log(arr.filter(x => x > 1))
// [1, 2, 3], because the function returns true for all elements
console.log(arr.filter(x => true))
// [], because none of the elements equals neither 6 nor 7
console.log(arr.filter(x => x === 6 || x === 7))
```

## [`Array.prototype.map()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

该`map()`方法返回一个数组，其中包含对数组元素调用提供的回调函数的结果。

```
const arr = [1, 2, 3]

console.log(arr.map(x => x + 1)) // [2, 3, 4]
console.log(arr.map(x => String.fromCharCode(96 + x))) // ['a', 'b', 'c']
console.log(arr.map(x => x)) // [1, 2, 3] (no-op)
console.log(arr.map(x => Math.pow(x, 2))) // [1, 4, 9]
console.log(arr.map(String)) // ['1', '2', '3']
```

## [`Array.prototype.reduce()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)

该`reduce()`方法通过使用两个元素调用提供的回调函数将数组减少为单个值。

```
const arr = [1, 2, 3]

// Sum of array elements.
console.log(arr.reduce((a, b) => a + b)) // 6
// The largest number in the array.
console.log(arr.reduce((a, b) => a > b ? a : b)) // 3
```

该`reduce()`方法采用可选的第二个参数，即初始值。`reduce()`当您调用的数组可以包含零个或一个元素时，这很有用。例如，如果我们想创建一个`sum()`以数组为参数并返回所有元素之和的函数，我们可以这样写：

```
const sum = arr => arr.reduce((a, b) => a + b, 0)

console.log(sum([]))     // 0
console.log(sum([4]))    // 4
console.log(sum([2, 5])) // 7
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-06-29T09:15:00.060

如果您尝试通过or访问`item`示例结构中的an ，但不知道它在数组中的位置，最简单的方法是使用[underscore.js](http://underscorejs.org/)库：`id``name`

```
var data = {
    code: 42,
    items: [{
        id: 1,
        name: 'foo'
    }, {
        id: 2,
        name: 'bar'
    }]
};

_.find(data.items, function(item) {
  return item.id === 2;
});
// Object {id: 2, name: "bar"} 
```

根据我的经验，使用高阶函数而不是`for`or`for..in`循环会导致代码更容易推理，因此更易于维护。

只是我的2美分。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2014-08-18T19:20:05.977

有时，可能需要使用字符串访问嵌套对象。简单的方法是第一级，例如

```
var obj = { hello: "world" };
var key = "hello";
alert(obj[key]);//world 
```

但是对于复杂的 json，情况往往不是这样。随着 json 变得越来越复杂，在 json 中查找值的方法也变得复杂。用于导航 json 的递归方法是最好的，并且如何利用该递归将取决于正在搜索的数据类型。如果涉及条件语句，则[json 搜索](https://stackoverflow.com/a/11657379/1026459)可能是一个很好的工具。

如果正在访问的属性是已知的，但路径很复杂，例如在这个对象中

```
var obj = {
 arr: [
    { id: 1, name: "larry" },    
    { id: 2, name: "curly" },
    { id: 3, name: "moe" }
 ]
}; 
```

而且你知道你想得到对象中数组的第一个结果，也许你想使用

```
var moe = obj["arr[0].name"]; 
```

但是，这将导致异常，因为没有具有该名称的对象的属性。能够使用它的解决方案是展平对象的树方面。这可以递归地完成。

```
function flatten(obj){
 var root = {};
 (function tree(obj, index){
   var suffix = toString.call(obj) == "[object Array]" ? "]" : "";
   for(var key in obj){
    if(!obj.hasOwnProperty(key))continue;
    root[index+key+suffix] = obj[key];
    if( toString.call(obj[key]) == "[object Array]" )tree(obj[key],index+key+suffix+"[");
    if( toString.call(obj[key]) == "[object Object]" )tree(obj[key],index+key+suffix+".");   
   }
 })(obj,"");
 return root;
} 
```

现在，复杂的对象可以被展平

```
var obj = previous definition;
var flat = flatten(obj);
var moe = flat["arr[0].name"];//moe 
```

这是***[`jsFiddle Demo`](http://jsfiddle.net/73172hr0/)***正在使用的这种方法。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2018-02-15T10:06:43.897

要访问嵌套属性，您需要指定其名称，然后搜索对象。

如果您已经知道确切的路径，那么您可以在脚本中对其进行硬编码，如下所示：

```
data['items'][1]['name'] 
```

这些也有效 -

```
data.items[1].name
data['items'][1].name
data.items[1]['name'] 
```

当您事先不知道确切的名称时，或者用户是为您提供名称的人。然后需要动态搜索数据结构。这里有人建议可以使用`for`循环来完成搜索，但是有一种非常简单的方法可以使用[`Array.reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce).

```
const data = { code: 42, items: [{ id: 1, name: 'foo' }, { id: 2, name: 'bar' }] }
const path = [ 'items', '1', 'name']
let result = path.reduce((a,v) => a[v], data) 
```

路径是一种说法：首先获取带有 key 的对象`items`，它恰好是一个数组。然后取`1`-st 元素（0 索引数组）。最后取`name`那个数组元素中带有键的对象，它恰好是字符串`bar`。

如果你有很长的路，你甚至可以用它`String.split`来让这一切变得更容易——

```
'items.1.name'.split('.').reduce((a,v) => a[v], data) 
```

这只是纯 JavaScript，没有使用任何第三方库，如 jQuery 或 lodash。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2020-06-18T09:50:06.983

很简单的解释：

```
var data = {
    code: 42,
    items: [{
        id: 1,
        name: 'foo'
    }, {
        id: 2,
        name: 'bar'
    }]
};

/*
1\. `data` is object contain `items` object*/
console.log(data);

/*
2\. `items` object contain array of two objects as elements*/
console.log(data.items);

/*
3\. you need 2nd element of array - the `1` from `[0, 1]`*/
console.log(data.items[1]);

/*
4\. and you need value of `name` property of 2nd object-element of array)*/
console.log(data.items[1].name);
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2016-05-06T10:45:38.027

这个问题很老了，所以作为一个当代更新。随着 ES2015 的出现，有一些替代方法可以获取您需要的数据。现在有一个称为**对象解构**的功能，用于访问嵌套对象。

```
const data = {
  code: 42,
  items: [{
    id: 1,
    name: 'foo'
  }, {
    id: 2,
    name: 'bar'
  }]
};

const {
  items: [, {
    name: secondName
  }]
} = data;

console.log(secondName);
```

上面的例子创建了一个从名为 的数组`secondName`中的键调用的变量，孤独的说跳过数组中的第一个对象。`name``items``,`

值得注意的是，对于这个例子来说这可能有点过头了，因为简单的数组访问更容易阅读，但它在分解一般对象时很有用。

这是对您的特定用例的非常简短的介绍，解构可能是一种不寻常的语法，首先要习惯。我建议阅读[Mozilla 的 Destructuring Assignment 文档](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)以了解更多信息。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2017-07-02T19:08:07.363

你可以使用`lodash _get`功能：

```
var object = { 'a': [{ 'b': { 'c': 3 } }] };

_.get(object, 'a[0].b.c');
// => 3 
```

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2018-08-19T23:01:34.340

```
var ourStorage = {

"desk":    {
    "drawer": "stapler"
  },
"cabinet": {
    "top drawer": { 
      "folder1": "a file",
      "folder2": "secrets"
    },
    "bottom drawer": "soda"
  }
};
ourStorage.cabinet["top drawer"].folder2; // Outputs -> "secrets" 
```

或者

```
//parent.subParent.subsubParent["almost there"]["final property"] 
```

基本上，在其下方展开的每个后代之间使用一个点，并且当您的对象名称由两个字符串组成时，您必须使用 ["obj Name"] 表示法。否则，一个点就足够了；

资料来源： [https ://learn.freecodecamp.org/javascript-algorithms-and-data-structures/basic-javascript/accessing-nested-objects](https://learn.freecodecamp.org/javascript-algorithms-and-data-structures/basic-javascript/accessing-nested-objects)

除此之外，访问嵌套数组会像这样发生：

```
var ourPets = [
  {
    animalType: "cat",
    names: [
      "Meowzer",
      "Fluffy",
      "Kit-Cat"
    ]
  },
  {
    animalType: "dog",
    names: [
      "Spot",
      "Bowser",
      "Frankie"
    ]
  }
];
ourPets[0].names[1]; // Outputs "Fluffy"
ourPets[1].names[0]; // Outputs "Spot" 
```

来源：[https ://learn.freecodecamp.org/javascript-algorithms-and-data-structures/basic-javascript/accessing-nested-arrays/](https://learn.freecodecamp.org/javascript-algorithms-and-data-structures/basic-javascript/accessing-nested-arrays/)

描述上述情况的另一个更有用的文档： [https ://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics#Bracket_notation](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics#Bracket_notation)

通过点遍历访问属性：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors#Dot_notation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors#Dot_notation)

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2021-02-23T18:04:51.920

## 这里提到了 4 种不同的方法来获取[javascript 对象](https://www.tutorialstonight.com/js/js-objects.php)属性：

```
var data = {
  code: 42,
  items: [{
    id: 1,
    name: 'foo'
  }, {
    id: 2,
    name: 'bar'
  }]
};

// Method 1
let method1 = data.items[1].name;
console.log(method1);

// Method 2
let method2 = data.items[1]["name"];
console.log(method2);

// Method 3
let method3 = data["items"][1]["name"];
console.log(method3);

// Method 4  Destructuring
let { items: [, { name: second_name }] } = data;
console.log(second_name);
```

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2018-07-07T08:32:14.467

以防万一，任何人在 2017 年或之后访问这个问题并寻找一种**易于记忆的方式，这里有一篇关于**[在 JavaScript 中访问嵌套对象](https://dev.to/flexdinesh/accessing-nested-objects-in-javascript--9m4)而不被迷惑的详细博客文章

*无法读取未定义*错误的属性“foo”

## 1\. Oliver Steele 的嵌套对象访问模式

最简单和最干净的方法是使用 Oliver Steele 的嵌套对象访问模式

```
const name = ((user || {}).personalInfo || {}).name; 
```

使用此符号，您将永远不会遇到

*无法读取 undefined 的属性“名称”*。

您基本上检查用户是否存在，如果不存在，则动态创建一个空对象。这样，下一级键将**始终从存在的对象或空对象访问**，但永远不会从未定义的对象访问。

## 2\. 使用 Array Reduce 访问嵌套对象

为了能够访问嵌套数组，您可以编写自己的数组 reduce util。

```
const getNestedObject = (nestedObj, pathArr) => {
    return pathArr.reduce((obj, key) =>
        (obj && obj[key] !== 'undefined') ? obj[key] : undefined, nestedObj);
}

// pass in your object structure as array elements
const name = getNestedObject(user, ['personalInfo', 'name']);

// to access nested array, just pass in array index as an element the path array.
const city = getNestedObject(user, ['personalInfo', 'addresses', 0, 'city']);
// this will return the city from the first address item. 
```

还有一个出色的类型处理最小的库类型[，](https://www.npmjs.com/package/typy)可以为您完成所有这些工作。

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2018-01-25T10:24:48.710

动态访问多级对象。

```
var obj = {
  name: "john doe",
  subobj: {
    subsubobj: {
      names: "I am sub sub obj"
    }
  }
};

var level = "subobj.subsubobj.names";
level = level.split(".");

var currentObjState = obj;

for (var i = 0; i < level.length; i++) {
  currentObjState = currentObjState[level[i]];
}

console.log(currentObjState); 
```

工作小提琴：[https ://jsfiddle.net/andreitodorut/3mws3kjL/](https://jsfiddle.net/andreitodorut/3mws3kjL/)

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2014-06-26T12:43:46.673

如果您愿意包含一个库，那么 使用**JSONPath将是最灵活的解决方案之一：** [https](https://github.com/s3u/JSONPath) ://github.com/s3u/JSONPath （节点和浏览器）

对于您的用例，json 路径将是：

```
$..items[1].name 
```

所以：

```
var secondName = jsonPath.eval(data, "$..items[1].name"); 
```

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2016-02-24T15:55:02.000

我更喜欢 JQuery。它更干净且易于阅读。

```
$.each($.parseJSON(data), function (key, value) {
  alert(value.<propertyname>);
}); 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2015-06-17T12:16:08.833

如果您正在寻找一个或多个满足特定条件的对象，您可以使用[query-js进行一些选择](https://www.npmjs.com/package/query-js)

```
//will return all elements with an id larger than 1
data.items.where(function(e){return e.id > 1;});
//will return the first element with an id larger than 1
data.items.first(function(e){return e.id > 1;});
//will return the first element with an id larger than 1 
//or the second argument if non are found
data.items.first(function(e){return e.id > 1;},{id:-1,name:""}); 
```

还有 a`single`和 a`singleOrDefault`它们的工作方式很像`first`和`firstOrDefault`。*唯一的区别是，如果找到多个*匹配项，它们将抛出。

有关 query-js 的进一步解释，您可以从这篇[文章开始](http://runefs.com/2015/06/04/working-with-data-in-javascript/)

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2016-08-13T10:39:25.677

## 下划线js方式

这是一个 JavaScript 库，它提供了一大堆有用的`functional programming`帮助器，而无需扩展任何内置对象。

### 解决方案：

```
var data = {
  code: 42,
  items: [{
    id: 1,
    name: 'foo'
  }, {
    id: 2,
    name: 'bar'
  }]
};

var item = _.findWhere(data.items, {
  id: 2
});
if (!_.isUndefined(item)) {
  console.log('NAME =>', item.name);
}

//using find - 

var item = _.find(data.items, function(item) {
  return item.id === 2;
});

if (!_.isUndefined(item)) {
  console.log('NAME =>', item.name);
} 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2017-07-01T11:46:35.193

老问题，但没有人提到lodash（只是下划线）。

如果您已经在项目中使用了 lodash，我认为在一个复杂的示例中可以采用一种优雅的方式来执行此操作：

**选项 1**

```
_.get(response, ['output', 'fund', 'data', '0', 'children', '0', 'group', 'myValue'], '') 
```

如同：

**选项 2**

```
response.output.fund.data[0].children[0].group.myValue 
```

第一个和第二个选项之间的区别在于，在**Opt 1**中，如果路径中缺少某个属性（未定义），则不会出现错误，它会返回第三个参数。

对于数组过滤器 lodash 有`_.find()`，但我宁愿使用常规的`filter()`. 但我仍然认为上述方法`_.get()`在处理非常复杂的数据时非常有用。过去我遇到过非常复杂的 API，而且很方便！

我希望它对正在寻找操作标题所暗示的真正复杂数据的选项的人有用。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-02-22T09:00:32.450

我不认为提问者只关注一级嵌套对象，所以我提供以下演示来演示如何访问深度嵌套的 json 对象的节点。好的，让我们找到 id 为 '5' 的节点。

```
var data = {
  code: 42,
  items: [{
    id: 1,
    name: 'aaa',
    items: [{
        id: 3,
        name: 'ccc'
      }, {
        id: 4,
        name: 'ddd'
      }]
    }, {
    id: 2,
    name: 'bbb',
    items: [{
        id: 5,
        name: 'eee'
      }, {
        id: 6,
        name: 'fff'
      }]
    }]
};

var jsonloop = new JSONLoop(data, 'id', 'items');

jsonloop.findNodeById(data, 5, function(err, node) {
  if (err) {
    document.write(err);
  } else {
    document.write(JSON.stringify(node, null, 2));
  }
});
```

```
<script src="https://rawgit.com/dabeng/JSON-Loop/master/JSONLoop.js"></script>
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2019-06-26T05:01:17.647

## 动态方法

在下面`deep(data,key)`的函数中，您可以使用任意`key`字符串-在您的情况下`items[1].name`（您可以在任何级别使用数组表示法`[i]`）-如果键无效，则返回未定义。

```
let deep = (o,k) => k.split('.').reduce((a,c,i) => {
    let m=c.match(/(.*?)\[(\d*)\]/);
    if(m && a!=null && a[m[1]]!=null) return a[m[1]][+m[2]];
    return a==null ? a: a[c];
},o);

// TEST

let key = 'items[1].name' // arbitrary deep-key

let data = {
    code: 42,
    items: [{ id: 11, name: 'foo'}, { id: 22, name: 'bar'},]
};

console.log( key,'=', deep(data,key) );
```

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2020-01-08T06:51:29.160

在 2020 年，您可以使用 @babel/plugin-proposal-optional-chaining 非常容易地访问对象中的嵌套值。

```
 const obj = {
 foo: {
   bar: {
     baz: class {
   },
  },
 },
};

const baz = new obj?.foo?.bar?.baz(); // baz instance

const safe = new obj?.qux?.baz(); // undefined
const safe2 = new obj?.foo.bar.qux?.(); // undefined 
```

[https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining](https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining)

[https://github.com/tc39/proposal-optional-chaining](https://github.com/tc39/proposal-optional-chaining)

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2017-08-28T11:25:30.973

[jQuery 的 grep](https://api.jquery.com/jQuery.grep/)函数可让您过滤数组：

```
var data = {
    code: 42,
    items: [{
        id: 1,
        name: 'foo'
    }, {
        id: 2,
        name: 'bar'
    }]
};

$.grep(data.items, function(item) {
    if (item.id === 2) {
        console.log(item.id); //console id of item
        console.log(item.name); //console name of item
        console.log(item); //console item object
        return item; //returns item object
    }

});
// Object {id: 2, name: "bar"}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2020-01-17T16:19:48.940

您可以使用语法`jsonObject.key`来访问该值。如果要访问数组中的值，则可以使用语法`jsonObjectArray[index].key`.

以下是访问各种值的代码示例，为您提供思路。

```
var data = {
    code: 42,
    items: [{
        id: 1,
        name: 'foo'
    }, {
        id: 2,
        name: 'bar'
    }]
};

// if you want 'bar'
console.log(data.items[1].name);

// if you want array of item names
console.log(data.items.map(x => x.name));

// get the id of the item where name = 'bar'
console.log(data.items.filter(x => (x.name == "bar") ? x.id : null)[0].id);
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2019-12-03T22:50:24.220

```
// const path = 'info.value[0].item'
// const obj = { info: { value: [ { item: 'it works!' } ], randominfo: 3 }  }
// getValue(path, obj)

export const getValue = ( path , obj) => {
  const newPath = path.replace(/\]/g, "")
  const arrayPath = newPath.split(/[\[\.]+/) || newPath;

  const final = arrayPath.reduce( (obj, k) => obj ?  obj[k] : obj, obj)
  return final;
} 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2020-10-24T15:04:02.827

这是使用[object-scan](https://www.npmjs.com/package/object-scan)的答案。

访问单个条目时，这个答案并没有真正比 vanilla javascript 提供太多好处。但是同时与多个字段交互，这个答案可能会更高效。

这是您如何与单个字段进行交互的方法

```
// const objectScan = require('object-scan');

const data = { code: 42, items: [{ id: 1, name: 'foo' }, { id: 2, name: 'bar' }] };

const get = (haystack, needle) => objectScan([needle], {
  abort: true,
  rtn: 'value'
})(haystack);

const set = (haystack, needle, value) => objectScan([needle], {
  abort: true,
  rtn: 'bool',
  filterFn: ({ parent, property }) => {
    parent[property] = value;
    return true;
  }
})(haystack);

console.log(get(data, 'items[1].name'));
// => bar

console.log(set(data, 'items[1].name', 'foo2'));
// => true
console.log(data);
// => { code: 42, items: [ { id: 1, name: 'foo' }, { id: 2, name: 'foo2' } ] }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

这是您如何同时与多个字段进行交互的方法

```
// const objectScan = require('object-scan');

const data = { code: 42, items: [{ id: 1, name: 'foo' }, { id: 2, name: 'bar' }] };

const get = (haystack, ...needles) => objectScan(needles, {
  joined: true,
  rtn: 'entry'
})(haystack);

const set = (haystack, actions) => objectScan(Object.keys(actions), {
  rtn: 'count',
  filterFn: ({ matchedBy, parent, property }) => {
    matchedBy.forEach((m) => {
      parent[property] = actions[m];
    })
    return true;
  }
})(haystack);

console.log(get(data, 'items[0].name', 'items[1].name'));
// => [ [ 'items[1].name', 'bar' ], [ 'items[0].name', 'foo' ] ]

console.log(set(data, {
  'items[0].name': 'foo1',
  'items[1].name': 'foo2'
}));
// => 2
console.log(data);
// => { code: 42, items: [ { id: 1, name: 'foo1' }, { id: 2, name: 'foo2' } ] }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

* * *

这就是如何在通过 id 搜索的深层嵌套对象中找到实体（如评论中所要求的）

```
// const objectScan = require('object-scan');

const myData = { code: 42, items: [{ id: 1, name: 'aaa', items: [{ id: 3, name: 'ccc' }, { id: 4, name: 'ddd' }] }, { id: 2, name: 'bbb', items: [{ id: 5, name: 'eee' }, { id: 6, name: 'fff' }] }] };

const findItemById = (haystack, id) => objectScan(['**(^items$).id'], {
  abort: true,
  useArraySelector: false,
  rtn: 'parent',
  filterFn: ({ value }) => value === id
})(haystack);

console.log(findItemById(myData, 5));
// => { id: 5, name: 'eee' }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2021-07-20T19:22:48.403

如果您尝试在 JSON 字符串中查找路径，可以将数据转储到[https://jsonpathfinder.com](https://jsonpathfinder.com)并单击 GUI 元素。它将为元素的路径生成 JS 语法。

除此之外，对于您可能想要迭代的任何数组，将相关的数组偏移索引替换`[0]`为循环。

这是您可以在此处或在[https://ggorlen.github.io/json-dive/](https://ggorlen.github.io/json-dive/)运行的工具的更简单版本。单击要将路径复制到剪贴板的节点。

```
/* code minified to make the tool easier to run without having to scroll */                                                         let bracketsOnly=!1,lastHighlighted={style:{}};const keyToStr=t=>!bracketsOnly&&/^[a-zA-Z_$][a-zA-Z$_\d]*$/.test(t)?`.${toHTML(t)}`:`[&quot;${toHTML(t)}&quot;]`,pathToData=t=>`data-path="data${t.join("")}"`,htmlSpecialChars={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","\t":"\\t","\r":"\\r","\n":"\\n"," ":"&nbsp;"},toHTML=t=>(""+t).replace(/[&<>"'\t\r\n ]/g,t=>htmlSpecialChars[t]),makeArray=(t,e)=>`\n  [<ul ${pathToData(e)}>\n    ${t.map((t,a)=>{e.push(`[${a}]`);const n=`<li ${pathToData(e)}>\n        ${pathify(t,e).trim()},\n      </li>`;return e.pop(),n}).join("")}\n  </ul>]\n`,makeObj=(t,e)=>`\n  {<ul ${pathToData(e)}>\n    ${Object.entries(t).map(([t,a])=>{e.push(keyToStr(t));const n=`<li ${pathToData(e)}>\n        "${toHTML(t)}": ${pathify(a,e).trim()},\n      </li>`;return e.pop(),n}).join("")}\n  </ul>}\n`,pathify=(t,e=[])=>Array.isArray(t)?makeArray(t,e):"object"==typeof t&&t!=null?makeObj(t,e):toHTML("string"==typeof t?`"${t}"`:t),defaultJSON='{\n  "corge": "test JSON... \\n   asdf\\t asdf",\n  "foo-bar": [\n    {"id": 42},\n    [42, {"foo": {"baz": {"ba  r<>!\\t": true, "4quux": "garply"}}}]\n  ]\n}',$=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document),resultEl=$("#result"),pathEl=$("#path"),tryToJSON=t=>{try{resultEl.innerHTML=pathify(JSON.parse(t)),$("#error").innerText=""}catch(t){resultEl.innerHTML="",$("#error").innerText=t}},copyToClipboard=t=>{const e=document.createElement("textarea");e.innerText=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},flashAlert=(t,e=2e3)=>{const a=document.createElement("div");a.textContent=t,a.classList.add("alert"),document.body.appendChild(a),setTimeout(()=>a.remove(),e)},handleClick=t=>{t.stopPropagation(),copyToClipboard(t.target.dataset.path),flashAlert("copied!"),$("#path-out").textContent=t.target.dataset.path},handleMouseOut=t=>{lastHighlighted.style.background="transparent",pathEl.style.display="none"},handleMouseOver=t=>{pathEl.textContent=t.target.dataset.path,pathEl.style.left=`${t.pageX+30}px`,pathEl.style.top=`${t.pageY}px`,pathEl.style.display="block",lastHighlighted.style.background="transparent",(lastHighlighted=t.target.closest("li")).style.background="#0ff"},handleNewJSON=t=>{tryToJSON(t.target.value),[...$$("#result *")].forEach(t=>{t.addEventListener("click",handleClick),t.addEventListener("mouseout",handleMouseOut),t.addEventListener("mouseover",handleMouseOver)})};$("textarea").addEventListener("change",handleNewJSON),$("textarea").addEventListener("keyup",handleNewJSON),$("textarea").value=defaultJSON,$("#brackets").addEventListener("change",t=>{bracketsOnly=!bracketsOnly,handleNewJSON({target:{value:$("textarea").value}})}),handleNewJSON({target:{value:defaultJSON}});
```

```
/**/                                                                                       *{box-sizing:border-box;font-family:monospace;margin:0;padding:0}html{height:100%}#path-out{background-color:#0f0;padding:.3em}body{margin:0;height:100%;position:relative;background:#f8f8f8}textarea{width:100%;height:110px;resize:vertical}#opts{background:#e8e8e8;padding:.3em}#opts label{padding:.3em}#path{background:#000;transition:all 50ms;color:#fff;padding:.2em;position:absolute;display:none}#error{margin:.5em;color:red}#result ul{list-style:none}#result li{cursor:pointer;border-left:1em solid transparent}#result li:hover{border-color:#ff0}.alert{background:#f0f;padding:.2em;position:fixed;bottom:10px;right:10px}
```

```
<!-- -->                                                                                                    <div class="wrapper"><textarea></textarea><div id="opts"><label>brackets only: <input id="brackets"type="checkbox"></label></div><div id="path-out">click a node to copy path to clipboard</div><div id="path"></div><div id="result"></div><div id="error"></div></div>
```

未缩小（也可在[GitHub](https://github.com/ggorlen/json-dive)上找到）：

```
let bracketsOnly = false;
let lastHighlighted = {style: {}};

const keyToStr = k =>
  !bracketsOnly && /^[a-zA-Z_$][a-zA-Z$_\d]*$/.test(k) 
    ? `.${toHTML(k)}`
    : `[&quot;${toHTML(k)}&quot;]`
;
const pathToData = p => `data-path="data${p.join("")}"`;

const htmlSpecialChars = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#039;",
  "\t": "\\t",
  "\r": "\\r",
  "\n": "\\n",
  " ": "&nbsp;",
};
const toHTML = x => ("" + x)
  .replace(/[&<>"'\t\r\n ]/g, m => htmlSpecialChars[m])
;

const makeArray = (x, path) => `
  [<ul ${pathToData(path)}>
    ${x.map((e, i) => {
      path.push(`[${i}]`);
      const html = `<li ${pathToData(path)}>
        ${pathify(e, path).trim()},
      </li>`;
      path.pop();
      return html;
    }).join("")}
  </ul>]
`;
const makeObj = (x, path) => `
  {<ul ${pathToData(path)}>
    ${Object.entries(x).map(([k, v]) => {
      path.push(keyToStr(k));
      const html = `<li ${pathToData(path)}>
        "${toHTML(k)}": ${pathify(v, path).trim()},
      </li>`;
      path.pop();
      return html;
    }).join("")}
  </ul>}
`;

const pathify = (x, path=[]) => {
  if (Array.isArray(x)) {
    return makeArray(x, path);
  }
  else if (typeof x === "object" && x !== null) {
    return makeObj(x, path);
  }

  return toHTML(typeof x === "string" ? `"${x}"` : x);
};

const defaultJSON = `{
  "corge": "test JSON... \\n   asdf\\t asdf",
  "foo-bar": [
    {"id": 42},
    [42, {"foo": {"baz": {"ba  r<>!\\t": true, "4quux": "garply"}}}]
  ]
}`;

const $ = document.querySelector.bind(document);
const $$ = document.querySelectorAll.bind(document);
const resultEl = $("#result");
const pathEl = $("#path");

const tryToJSON = v => {
  try {
    resultEl.innerHTML = pathify(JSON.parse(v));
    $("#error").innerText = "";
  }
  catch (err) {
    resultEl.innerHTML = "";
    $("#error").innerText = err;
  }
};

const copyToClipboard = text => {
  const ta = document.createElement("textarea");
  ta.innerText = text;
  document.body.appendChild(ta);
  ta.select();
  document.execCommand("copy");
  document.body.removeChild(ta);
};

const flashAlert = (text, timeoutMS=2000) => {
  const alert = document.createElement("div");
  alert.textContent = text;
  alert.classList.add("alert");
  document.body.appendChild(alert);
  setTimeout(() => alert.remove(), timeoutMS);
};

const handleClick = e => {
  e.stopPropagation();
  copyToClipboard(e.target.dataset.path);
  flashAlert("copied!");
  $("#path-out").textContent = e.target.dataset.path;
};

const handleMouseOut = e => {
  lastHighlighted.style.background = "transparent";
  pathEl.style.display = "none";
};

const handleMouseOver = e => {
  pathEl.textContent = e.target.dataset.path;
  pathEl.style.left = `${e.pageX + 30}px`;
  pathEl.style.top = `${e.pageY}px`;
  pathEl.style.display = "block";
  lastHighlighted.style.background = "transparent";
  lastHighlighted = e.target.closest("li");
  lastHighlighted.style.background = "#0ff";
};

const handleNewJSON = e => {
  tryToJSON(e.target.value);
  [...$$("#result *")].forEach(e => {
    e.addEventListener("click", handleClick);
    e.addEventListener("mouseout", handleMouseOut);
    e.addEventListener("mouseover", handleMouseOver);
  });
};
$("textarea").addEventListener("change", handleNewJSON);
$("textarea").addEventListener("keyup", handleNewJSON);
$("textarea").value = defaultJSON;
$("#brackets").addEventListener("change", e => {
  bracketsOnly = !bracketsOnly;
  handleNewJSON({target: {value: $("textarea").value}});
});
handleNewJSON({target: {value: defaultJSON}});
```

```
* {
  box-sizing: border-box;
  font-family: monospace;
  margin: 0;
  padding: 0;
}

html {
  height: 100%;
}

#path-out {
  background-color: #0f0;
  padding: 0.3em;
}

body {
  margin: 0;
  height: 100%;
  position: relative;
  background: #f8f8f8;
}

textarea {
  width: 100%;
  height: 110px;
  resize: vertical;
}

#opts {
  background: #e8e8e8;
  padding: 0.3em;
}
#opts label {
  padding: 0.3em;
}

#path {
  background: black;
  transition: all 0.05s;
  color: white;
  padding: 0.2em;
  position: absolute;
  display: none;
}

#error {
  margin: 0.5em;
  color: red;
}

#result ul {
  list-style: none;
}

#result li {
  cursor: pointer;
  border-left: 1em solid transparent;
}
#result li:hover {
  border-color: #ff0;
}

.alert {
  background: #f0f;
  padding: 0.2em;
  position: fixed;
  bottom: 10px;
  right: 10px;
}
```

```
<div class="wrapper">
  <textarea></textarea>
  <div id="opts">
    <label>
      brackets only: <input id="brackets" type="checkbox">
    </label>
  </div>
  <div id="path-out">click a node to copy path to clipboard</div>
  <div id="path"></div>
  <div id="result"></div>
  <div id="error"></div>
</div>
```

这并不是为了替代[学习如何钓鱼](https://stackoverflow.com/a/11922384/6243352)，但一旦你知道了就可以节省时间。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2021-08-31T09:27:03.203

我就是这样做的。

```
 let groups = [
        {
            id:1,
            title:"Group 1",
            members:[
                {
                    id:1,
                    name:"Aftab",
                    battry:'10%'
                },
                {
                    id:2,
                    name:"Jamal",
                },
                {
                    id:3,
                    name:"Hamid",
                },
                {
                    id:4,
                    name:"Aqeel",
                },
            ]
        },
        {
            id:2,
            title:"Group 2",
            members:[
                {
                    id:1,
                    name:"Aftab",
                    battry:'10%'
                },
                {
                    id:2,
                    name:"Jamal",
                    battry:'10%'
                },
                {
                    id:3,
                    name:"Hamid",
                },

            ]
        },
        {
            id:3,
            title:"Group 3",
            members:[
                {
                    id:1,
                    name:"Aftab",
                    battry:'10%'
                },

                {
                    id:3,
                    name:"Hamid",
                },
                {
                    id:4,
                    name:"Aqeel",
                },
            ]
        }
    ]

    groups.map((item) => {
      //  if(item.id == 2){
        item.members.map((element) => {
             if(element.id == 1){
                 element.battry="20%"
             }
         })
        //}
    })

    groups.forEach((item) => {
        item.members.forEach((item) => {
            console.log(item)
    })
    }) 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2022-02-15T05:11:55.723

您需要做的非常简单，可以通过递归来实现：

```
const json_object = {
        "item1":{
            "name": "apple",
            "value": 2,
        },
        "item2":{
            "name": "pear",
            "value": 4,
        },
        "item3":{
            "name": "mango",
            "value": 3,
            "prices": {
                "1": "9$",
                "2": "59$",
                "3": "1$"
            }
        }
    }

    function walkJson(json_object){
        for(obj in json_object){
            if(typeof json_object[obj] === 'string'){
                console.log(`${obj}=>${json_object[obj]}`);
            }else{
                console.log(`${obj}=>${json_object[obj]}`);
                walkJson(json_object[obj]);
            }
        }           
    }

    walkJson(json_object); 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2016-12-28T19:53:36.323

一种解开任意 JSON 树的 Pythonic、递归和函数式方法：

```
handlers = {
    list:  iterate,
    dict:  delve,
    str:   emit_li,
    float: emit_li,
}

def emit_li(stuff, strong=False):
    emission = '<li><strong>%s</strong></li>' if strong else '<li>%s</li>'
    print(emission % stuff)

def iterate(a_list):
    print('<ul>')
    map(unravel, a_list)
    print('</ul>')

def delve(a_dict):
    print('<ul>')
    for key, value in a_dict.items():
        emit_li(key, strong=True)
        unravel(value)
    print('</ul>')

def unravel(structure):
    h = handlers[type(structure)]
    return h(structure)

unravel(data) 
```

其中*data*是一个 python 列表（从 JSON 文本字符串解析）：

```
data = [
    {'data': {'customKey1': 'customValue1',
           'customKey2': {'customSubKey1': {'customSubSubKey1': 'keyvalue'}}},
  'geometry': {'location': {'lat': 37.3860517, 'lng': -122.0838511},
               'viewport': {'northeast': {'lat': 37.4508789,
                                          'lng': -122.0446721},
                            'southwest': {'lat': 37.3567599,
                                          'lng': -122.1178619}}},
  'name': 'Mountain View',
  'scope': 'GOOGLE',
  'types': ['locality', 'political']}
] 
```

* * *

## 回答 #30

> 赞同：-5
> 
> 时间：2019-04-04T08:51:11.633

我`stringdata`来自 PHP 文件，但我仍然在`var`. 当我直接将我的 json 放入`obj`其中时，它不会显示这就是为什么我将我的 json 文件作为

`var obj=JSON.parse(stringdata);` 所以在那之后我得到`message`obj并显示在警报框中然后我得到`data`哪个是json数组并存储在一个变量中`ArrObj`然后我读取该数组的第一个对象，其键值如下`ArrObj[0].id`

```
 var stringdata={
        "success": true,
        "message": "working",
        "data": [{
                  "id": 1,
                  "name": "foo"
         }]
      };

                var obj=JSON.parse(stringdata);
                var key = "message";
                alert(obj[key]);
                var keyobj = "data";
                var ArrObj =obj[keyobj];

                alert(ArrObj[0].id); 
```

* * *

## 回答 #31

> 赞同：-6
> 
> 时间：2017-09-27T12:31:10.603

**使用 lodash 将是一个很好的解决方案**

前任：

```
var object = { 'a': { 'b': { 'c': 3 } } };                                                                                               
_.get(object, 'a.b.c');                                                                                             
// => 3 
```****

# ruby-on-rails - Rails 的 bundle --binstubs 在 Windows 上

> ID：11922386
> 
> 赞同：1
> 
> 时间：2012-08-12T13:02:50.193
> 
> 标签：ruby-on-rails, windows, bundle

我正在阅读有关 Ruby on Rails (http://ruby.railstutorial.org/chapters/static-pages#sec:binstubs) 的教程，[它](http://ruby.railstutorial.org/chapters/static-pages#sec:binstubs)建议使用. 但是，这似乎不适用于 Windows，因为从 bin 文件夹调用可执行文件而不首先对其进行 cd-ing 是不合法的。`bundle --binstubs``bundle exec`

这篇文章有一条评论： [http](http://blog.davidchelimsky.net/2011/07/18/stop-typing-bundle-exec/) ://blog.davidchelimsky.net/2011/07/18/stop-typing-bundle-exec/ 上面写着“......我希望它可以在 Windows 上运行。”。我想知道 - 真的不可能在 Windows 上使用它吗？

谢谢，

szm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:53:27.463

gem [ruby​​gems-bundler](https://github.com/mpapis/rubygems-bundler)是为此目的而明确制作的。引用他们的自述文件：

> 第一的，
> 
> `gem install rubygems-bundler`
> 
> 接下来，运行（一次）：
> 
> `gem regenerate_binstubs`
> 
> 你完成了！

它是这样工作的：

> 它修改 gem 包装器 shebang 以加载 ruby​​_noexec_wrapper。然后，当您运行 gem 二进制文件时，它会查看您的工作目录以及它上面的每个目录，直到找到 Gemfile。如果您正在运行的可执行文件存在于您的 Gemfile 中，它会切换到使用该 Gemfile（通过 Bundle.setup）。

# jquery - 使用 flash 或 jQuery 上传图片 NOT UPLOADIFY

> ID：11922388
> 
> 赞同：-2
> 
> 时间：2012-08-12T13:03:23.853
> 
> 标签：jquery, flash, html, file-upload, upload

我需要 jQuery 或 flash 之类的插件来让我上传图片。但我不想使用**Uploadify**。

我需要类似下图的东西：

![在此处输入图像描述](../Images/897852e5240f19ae23a1bf92248eb038.png)

**请不要向我建议** **Uploadify**。我知道，但它不适用于所有浏览器。还有其他插件或工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:05:33.243

我发现[Plupload](http://www.plupload.com/)很适合我。它具有良好的文档水平，可与 jQuery UI 配合使用，并提供多种选项。

# iphone - WebCore 的崩溃是否意味着它必然与 UIWebView 相关？

> ID：11922391
> 
> 赞同：2
> 
> 时间：2012-08-12T13:04:03.227
> 
> 标签：iphone, uiwebview

我的应用程序广泛使用 UIWebViews，因为它本质上是一个基于 WebView 的应用程序。

在应用程序的左侧，我有一个滑出菜单，类似于 Facebook 和 Path 应用程序。选择其中一个表格行会将主 web 视图滑回并加载 URL。

我从 Webthread 中看到了 WebCore 的随机崩溃，但我根本无法理解如何解决它。我测试了僵尸和内存分配，但应用程序始终保持在 3-4MB 的活动字节内。

我不知道它是否相关，但是当 webview 加载它的页面时有很大的“钩子”。例如，在 shouldStartLoad 中，我检查某些 URL，然后在页面上调用 JS 函数。我不知道这是否会导致崩溃。

崩溃日志显示 webcore 崩溃的不同区域。我在下面添加了一些最新的变体，但我不确定这些是所有可能的变体。

简而言之，什么是 WebCore 崩溃？它是 UIWebView 中的一个我无能为力的错误吗？谢谢！

```
Thread 2 name:  WebThread
Thread 2 Crashed:
0   WebCore                         0x32c540c0 WebCore::Document::body() const + 4
1   WebCore                         0x32d04052 WebCore::CachedResourceLoader::preload(WebCore::CachedResource::Type, WTF::String const&, WTF::String const&, bool) + 18
2   WebCore                         0x32d03ebe WebCore::HTMLPreloadScanner::processToken() + 1510
3   WebCore                         0x32d03872 WebCore::HTMLPreloadScanner::scan() + 42
4   WebCore                         0x32cebc24 WebCore::HTMLDocumentParser::append(WebCore::SegmentedString const&) + 92
5   WebCore                         0x32cbce20 WebCore::DecodedDataDocumentParser::appendBytes(WebCore::DocumentWriter*, char const*, int, bool) + 200
6   WebCore                         0x32ceb8d0 WebCore::DocumentWriter::addData(char const*, int, bool) + 48
7   WebCore                         0x32ce5c3e WebCore::DocumentLoader::commitData(char const*, int) + 122
8   WebKit                          0x358cbc9a -[WebHTMLRepresentation receivedData:withDataSource:] + 158
9   WebKit                          0x358cbb10 -[WebDataSource(WebInternal) _receivedData:] + 164
10  WebKit                          0x358cba48 WebFrameLoaderClient::committedLoad(WebCore::DocumentLoader*, char const*, int) + 100
11  WebCore                         0x32ce2a48 WebCore::DocumentLoader::commitLoad(char const*, int) + 120
12  WebCore                         0x32ce29b4 WebCore::DocumentLoader::receivedData(char const*, int) + 72
13  WebCore                         0x32ce25da WebCore::ResourceLoader::didReceiveData(char const*, int, long long, bool) + 34
14  WebCore                         0x32ce2566 WebCore::MainResourceLoader::didReceiveData(char const*, int, long long, bool) + 474
15  WebCore                         0x32ce22b2 WebCore::ResourceLoader::didReceiveData(WebCore::ResourceHandle*, char const*, int, int) + 42
16  WebCore                         0x32ce2234 WebCore::ResourceHandle::handleDataArray(__CFArray const*) + 212
17  WebCore                         0x32ce2156 WebCore::didReceiveDataArray(_CFURLConnection*, __CFArray const*, void const*) + 34
18  CFNetwork                       0x370dd058 URLConnectionClient::_clientDidReceiveData(__CFArray const*, URLConnectionClient::ClientConnectionEventQueue*) + 220
19  CFNetwork                       0x370434b0 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 436
20  CFNetwork                       0x3704319c URLConnectionClient::processEvents() + 100
21  CFNetwork                       0x370430d2 MultiplexerSource::perform() + 150
22  CoreFoundation                  0x3738aacc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
23  CoreFoundation                  0x3738a32e __CFRunLoopDoSources0 + 358
24  CoreFoundation                  0x3738903e __CFRunLoopRun + 646
25  CoreFoundation                  0x3730c49e CFRunLoopRunSpecific + 294
26  CoreFoundation                  0x3730c366 CFRunLoopRunInMode + 98
27  WebCore                         0x32cb5c9c RunWebThread(void*) + 396
28  libsystem_c.dylib               0x33c2b72e _pthread_start + 314
29  libsystem_c.dylib               0x33c2b5e8 thread_start + 0 
```

或者

```
Thread 2 name:  WebThread
Thread 2 Crashed:
0   WebCore                         0x32cbe120 WebCore::HTMLDocumentParser::pumpTokenizer(WebCore::HTMLDocumentParser::SynchronousMode) + 312
1   WebCore                         0x32cebc66 WebCore::HTMLDocumentParser::append(WebCore::SegmentedString const&) + 158
2   WebCore                         0x32cbce20 WebCore::DecodedDataDocumentParser::appendBytes(WebCore::DocumentWriter*, char const*, int, bool) + 200
3   WebCore                         0x32ceb8d0 WebCore::DocumentWriter::addData(char const*, int, bool) + 48
4   WebCore                         0x32ce5c3e WebCore::DocumentLoader::commitData(char const*, int) + 122
5   WebKit                          0x358cbc9a -[WebHTMLRepresentation receivedData:withDataSource:] + 158
6   WebKit                          0x358cbb10 -[WebDataSource(WebInternal) _receivedData:] + 164
7   WebKit                          0x358cba48 WebFrameLoaderClient::committedLoad(WebCore::DocumentLoader*, char const*, int) + 100
8   WebCore                         0x32ce2a48 WebCore::DocumentLoader::commitLoad(char const*, int) + 120
9   WebCore                         0x32ce29b4 WebCore::DocumentLoader::receivedData(char const*, int) + 72
10  WebCore                         0x32ce25da WebCore::ResourceLoader::didReceiveData(char const*, int, long long, bool) + 34
11  WebCore                         0x32ce2566 WebCore::MainResourceLoader::didReceiveData(char const*, int, long long, bool) + 474
12  WebCore                         0x32ce22b2 WebCore::ResourceLoader::didReceiveData(WebCore::ResourceHandle*, char const*, int, int) + 42
13  WebCore                         0x32ce2276 WebCore::ResourceHandle::handleDataArray(__CFArray const*) + 278
14  WebCore                         0x32ce2156 WebCore::didReceiveDataArray(_CFURLConnection*, __CFArray const*, void const*) + 34
15  CFNetwork                       0x370dd058 URLConnectionClient::_clientDidReceiveData(__CFArray const*, URLConnectionClient::ClientConnectionEventQueue*) + 220
16  CFNetwork                       0x370434b0 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 436
17  CFNetwork                       0x37043592 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 662
18  CFNetwork                       0x3704319c URLConnectionClient::processEvents() + 100
19  CFNetwork                       0x370430d2 MultiplexerSource::perform() + 150
20  CoreFoundation                  0x3738aacc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
21  CoreFoundation                  0x3738a298 __CFRunLoopDoSources0 + 208
22  CoreFoundation                  0x3738903e __CFRunLoopRun + 646
23  CoreFoundation                  0x3730c49e CFRunLoopRunSpecific + 294
24  CoreFoundation                  0x3730c366 CFRunLoopRunInMode + 98
25  WebCore                         0x32cb5c9c RunWebThread(void*) + 396
26  libsystem_c.dylib               0x33c2b72e _pthread_start + 314
27  libsystem_c.dylib               0x33c2b5e8 thread_start + 0 
```

或者

```
Thread 2 name:  WebThread
Thread 2 Crashed:
0   JavaScriptCore                  0x35653c7c WTF::fastFree(void*) + 80
1   WebCore                         0x32d064b4 WebCore::SegmentedString::prepend(WebCore::SegmentedSubstring const&) + 136
2   WebCore                         0x32d0640e WebCore::SegmentedString::prepend(WebCore::SegmentedString const&) + 66
3   WebCore                         0x32d047a8 WebCore::(anonymous namespace)::unconsumeCharacters(WebCore::SegmentedString&, WTF::Vector<unsigned short, 10ul> const&) + 188
4   WebCore                         0x32cf023e WebCore::consumeHTMLEntity(WebCore::SegmentedString&, WTF::Vector<unsigned short, 16ul>&, bool&, unsigned short) + 1850
5   WebCore                         0x32cef9e4 WebCore::HTMLTokenizer::processEntity(WebCore::SegmentedString&) + 40
6   WebCore                         0x32cbebe8 WebCore::HTMLTokenizer::nextToken(WebCore::SegmentedString&, WebCore::HTMLToken&) + 1232
7   WebCore                         0x32d03894 WebCore::HTMLPreloadScanner::scan() + 76
8   WebCore                         0x32cebc24 WebCore::HTMLDocumentParser::append(WebCore::SegmentedString const&) + 92
9   WebCore                         0x32cbce20 WebCore::DecodedDataDocumentParser::appendBytes(WebCore::DocumentWriter*, char const*, int, bool) + 200
10  WebCore                         0x32ceb8d0 WebCore::DocumentWriter::addData(char const*, int, bool) + 48
11  WebCore                         0x32ce5c3e WebCore::DocumentLoader::commitData(char const*, int) + 122
12  WebKit                          0x358cbc9a -[WebHTMLRepresentation receivedData:withDataSource:] + 158
13  WebKit                          0x358cbb10 -[WebDataSource(WebInternal) _receivedData:] + 164
14  WebKit                          0x358cba48 WebFrameLoaderClient::committedLoad(WebCore::DocumentLoader*, char const*, int) + 100
15  WebCore                         0x32ce2a48 WebCore::DocumentLoader::commitLoad(char const*, int) + 120
16  WebCore                         0x32ce29b4 WebCore::DocumentLoader::receivedData(char const*, int) + 72
17  WebCore                         0x32ce25da WebCore::ResourceLoader::didReceiveData(char const*, int, long long, bool) + 34
18  WebCore                         0x32ce2566 WebCore::MainResourceLoader::didReceiveData(char const*, int, long long, bool) + 474
19  WebCore                         0x32ce22b2 WebCore::ResourceLoader::didReceiveData(WebCore::ResourceHandle*, char const*, int, int) + 42
20  WebCore                         0x32ce2276 WebCore::ResourceHandle::handleDataArray(__CFArray const*) + 278
21  WebCore                         0x32ce2156 WebCore::didReceiveDataArray(_CFURLConnection*, __CFArray const*, void const*) + 34
22  CFNetwork                       0x370dd058 URLConnectionClient::_clientDidReceiveData(__CFArray const*, URLConnectionClient::ClientConnectionEventQueue*) + 220
23  CFNetwork                       0x370434b0 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 436
24  CFNetwork                       0x3704319c URLConnectionClient::processEvents() + 100
25  CFNetwork                       0x370430d2 MultiplexerSource::perform() + 150
26  CoreFoundation                  0x3738aacc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
27  CoreFoundation                  0x3738a32e __CFRunLoopDoSources0 + 358
28  CoreFoundation                  0x3738903e __CFRunLoopRun + 646
29  CoreFoundation                  0x3730c49e CFRunLoopRunSpecific + 294
30  CoreFoundation                  0x3730c366 CFRunLoopRunInMode + 98
31  WebCore                         0x32cb5c9c RunWebThread(void*) + 396
32  libsystem_c.dylib               0x33c2b72e _pthread_start + 314
33  libsystem_c.dylib               0x33c2b5e8 thread_start + 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:44:50.630

WebThread 由 WebKit 管理，没有开发者拥有的代码在其中运行。我想知道，它是否可以在较新的 iOS 固件上重现？你可以提交一份关于这个的雷达报告。

# linux - C#/MVC3 的任何真正的开源替代品？

> ID：11922396
> 
> 赞同：2
> 
> 时间：2012-08-12T13:04:25.190
> 
> 标签：linux, frameworks, web

我每天最常使用 C# 和 MVC3，我绝对喜欢整个体验。从启动 Visual Studio 到在 IIS 上部署它，再到在 MSSQL Studio 中工作。

现在当我回到家时，我倾向于做一些其他资金不太充足的项目，学习新的语言和风格也很有趣。所以我想知道 Visual Studio 是否有任何非常好的可行的开源替代品 - C#/MVC3 .

我精通 MySQL 和 Apache，但是对于坚如磐石的 IDE 和框架，我有哪些选择？

为了使建议更简单，这里有一些我认为的标准。

*   该框架需要经过验证，即在许多生产站点上使用并拥有一个大社区。

*   需要有一个 IDE 来支持有关框架的所有内容（自动完成、引用、断点、帮助、发布到服务器等）。

*   我不想编写任何类型的 SQL，在 MVC3 中我编写 lambda 或 LINQ，类似的东西会很好。

*   OO 语言，Java/Python 会很好。

*   快速合作。

*   如果它可以在 Apache 和 MySQL 上运行会更喜欢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:27:17.053

如果您愿意学习一门新语言，Ruby on Rails 是您的最佳选择。Rails 是一个大社区，Ruby 是一个大社区，我认为它可以符合你的规范：

*   Rails*很大*
*   试试 RubyMine、Aptana，或者用 Linux 的方式来做：vim！
*   ActiveRecord 应该用它的动态查询方法为你做到这一点
*   如果你问我，Ruby 是所有 OO 中的 OO。
*   Ruby 和 Rails 都以快速原型设计和开发而闻名
*   Rails 是为 MySQL 和 Apache 构建的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:38:54.280

与 Microsoft 企业堆栈最直接等效的是 Java 企业堆栈。两个人一直在争吵二十年！

Java 没有标准的 IDE，但我建议 Eclipse 是事实上的标准；我并不是说它是最好的，只是说它具有最广泛的采用。

Java 也没有标准的 MVC 框架。唯一的标准 Web 框架是 JSF，它更重量级。尽管如此，还是有一些非常流行和完善的框架来填补这个空白：最流行的是 Struts 2，我将推荐 Stripes。

Java 没有相当于 IIS 的标准服务器，但它有服务器标准，并且有很多实现：对于简单的 servlet 容器，有 Tomcat 和 Jetty，对于成熟的应用程序服务器，有JBoss、GlassFish 和各种商业产品。我个人的推荐是 JBoss AS7；它完成了传统应用程序服务器可以做的所有事情，但它具有简单 servlet 容器的启动速度、内存使用和易于配置。

要专门解决您的项目符号：

*   Java 用于许多生产站点，并且拥有一个庞大的社区。
*   Eclipse 为 Java 做了所有你能想象到的事情（自动完成、导航、调试、文档、重构——我的印象是它比 VS 做得更好），并且集成了 EE 堆栈的许多方面（比如构建和部署 Web 应用程序） ，加上体面的数据库开发模式。
*   如果您使用 JPA 进行持久性，那么您无需编写任何 SQL 即可。JPA 实现将生成用于设置数据库的 DDL，以及用于加载和存储对象的查询。如果你想做复杂的查询，你可以用 JPQL 编写它们（这就像一个对对象更友好的 SQL），或者使用 API 从对象构建查询。遗憾的是，我认为这不如 LINQ 好。
*   Java 是合理的面向对象的。
*   Java 在熟练的手中是高效的（我认为这就是您所说的“快速使用”的意思）。从历史上看，它从零到运行网站的速度并不像 Ruby on Rails 那样快，但我认为与当前这一代工具的差距已经缩小了很多，而且工具和库的深度惊人让您在应用程序生命周期的后期阶段保持高效。

它当然可以与 Apache 和 MySQL 一起使用，尽管您也需要一个 servlet 容器或应用程序服务器。例如，我的公司将 Apache、Tomcat 和 MySQL 用于我们的产品。我强烈建议你使用 PostgreSQL 而不是 MySQL，因为坦率地说，MySQL 很糟糕，但如果你真的想的话，你当然可以使用 MySQL！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T08:35:51.740

考虑到您是从业余爱好者的角度来看待这个问题的，您是否考虑过 Visual C# Express 和 Visual Web Developer Express？

它是 Microsoft 的一个免费使用包，它附带 MVC 和 ASP.NET，并免费提供您所追求的精致工作环境。您还将获得令人印象深刻的 IISExpress，它是完整 IIS 的轻量版。

# flash - 如何在 Flash 中创建文件管理器？

> ID：11922399
> 
> 赞同：-1
> 
> 时间：2012-08-12T13:04:35.520
> 
> 标签：flash, actionscript

我是闪光灯新手。我想在 Flash 中创建文件管理器。如何开始呢？我想在网页上嵌入该文件管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:59:19.083

您不能为 Flash 播放器创建（本地系统）文件管理器，因为它会违反许多安全标准。使用 Flash，您只能创建必须安装在本地计算机上的 Adob​​e AIR 应用程序（与任何其他软件一样）。

# mysql - MySQL 等效于 Oracle 的 SUBSTITUTE 函数 - 空格替换问题

> ID：11922404
> 
> 赞同：0
> 
> 时间：2012-08-12T13:05:52.270
> 
> 标签：mysql, function, substitution

我创建了这个小函数（类似于 oracle 的替换函数），它适用于大多数字符，但我不知道为什么它不能替换空格......

有人可以对此有所了解吗？

```
DROP FUNCTION IF EXISTS MPT_FUNC_SUBSTITUTE;
DELIMITER // 
CREATE FUNCTION MPT_FUNC_SUBSTITUTE
(
  p_in_str          VARCHAR(1000),
  p_substitute_from VARCHAR(100),
  p_substitute_to   VARCHAR(100)
) 
RETURNS VARCHAR(1000)
DETERMINISTIC
BEGIN
#--+==============================================================================+
#--| Name        : MPT_FUNC_SUBSTITUTE                                            |
#--|                                                                              |
#--| Description : Designed to search for platinum ads.                           |
#--|                                                                              |
#--| Parameters  : p_in_str          [Mandatory] - The string to modify.          |
#--|               p_substitute_from [Mandatory] - Susbtitute from string         |
#--|               p_substitute_to   [Mandatory] - Susbtitute to string           |
#--|                                                                              |
#--| Returns     : p_out_str                                                      |
#--|                                                                              |
#--| Author             Date        Version   Remarks                             |
#--| ------------------ ----------- --------- ----------------------------------- |
#--| Leo Coppens        12-Aug-2012 1.0       Created                             |
#--|                                                                              |
#--+==============================================================================+

#-- DECLARE statements
  DECLARE lc_api_name   VARCHAR(30)   DEFAULT 'MPT_PROC_SEARCHDEALERS';
  DECLARE i             INT           DEFAULT 1;
  DECLARE chr1,chr2     CHAR(1);
  DECLARE p_out_str     VARCHAR(1000) DEFAULT p_in_str;

#-- Program Logic

  #-- Do the replacement if the necessary values are provided
  IF     p_in_str          IS NOT NULL
     AND p_substitute_from IS NOT NULL
  THEN
    SET p_out_str = p_in_str;
    #-- Start the replacement loop
    WHILE i <= CHAR_LENGTH(p_substitute_from) 
    DO
      #-- Get the characters to replace from and to
      SET chr1 = SUBSTR(p_substitute_from, i, 1);
      SET chr2 = IFNULL(SUBSTR(p_substitute_to, i, 1),'');
      #-- Do the replacement now
      SET p_out_str = REPLACE(p_out_str, chr1, chr2);
      #-- Increase i to continue the loop
      SET i = i + 1;
    END WHILE; 

  RETURN p_out_str;
  END IF;

END //

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:09:40.527

在 MySql 中已经有一个 REPLACE 函数：

```
SELECT REPLACE('www.mysql.com', 'w', 'Ww'); 
```

这不是你想要的吗？

# php - 如何从字符串中删除第一个和最后一个字符

> ID：11922405
> 
> 赞同：0
> 
> 时间：2012-08-12T13:06:01.213
> 
> 标签：php, string, char

我需要处理一个包含订单注释的大 TXT 文件。
有些音符看起来像`Note for an order`，有些像`"Note for an order"`. 如果在字符串的开头和结尾，我需要`"`从相应的字符串中删除字符。

因为文件很大（±10MB），最快的方法是什么？你会推荐我什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:15:52.707

从文件中获取每一行时检查每一行。我假设您正在逐行阅读它 - 或者如果您正在逐块阅读它（或整个文件），那么您正在逐行处理它。在那种情况下，当你得到这条线并将它弹出到 a中时，你可以用[trim](http://www.php.net/manual/en/function.trim.php) ()`$var`做这样的事情：

```
$var=trim($yourLineOrColumn, '"'); 
```

然后`$var`改为处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:13:46.847

您可以一次读取一行，删除**"**并保存文件。
与一次加载所有文件相比，一次读取一行将占用更少的内存。因此，您可以处理任何大小的`.txt`文件，仅受您的计算机速度限制。

*注意：我假设您正在使用`Local Web Server`. 任何共享主机都可能不允许您超越 30 秒的最大执行时间限制。我建议在本地 XAMPP 服务器上使用此代码。*

```
<?php
set_time_limit(0); //To remove the max-execution time limit

$file_from = "foo.txt"; //File containing all the text
$file_to = "bar.txt"; //New File containing all the modified text

//open both files
$fp_source = fopen($file_from, "r") or die("Couldn't open ".$file_from);
$fp_dest = fopen($file_to, 'a+') or die("Couldn't open ".$file_to);

while (!feof($fp)) {          //Continue loading domains till the end of file
    $line = fgets($fp, 1024); //load one line at a time
    $line = trim($line, '"'); // remove the first & last "
    fwrite($file_to, $line);  // save text in new file.
}
fclose($file_from);           //close the handles
fclose($file_to);             //close the handles
?> 
```

上面的代码将替换字符串中出现在第一个和最后一个位置的所有**"**，其中每个字符串通过换行符与另一个字符串区分开来。

如果 " 出现在字符串的中间，那么您可以替换这一行

```
$line = trim($line, '"'); // remove the first & last " 
```

和：

```
$line = str_replace('"', "", $line); // remove all the " 
```

虽然您已将问题标记为`PHP`，但如果它只有一个文件或几个文件，我建议使用任何桌面文本编辑器的搜索和替换功能，如 Notepad++ 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T13:16:12.457

像您提到的那样处理一个较大的文件将是一个密集的过程-我认为您不会有很多方法可以优化它。也许将文件分成几个块可能会有所帮助...

在任何情况下，您所要做的就是遍历文件并为每一行使用该`trim()`函数。这是一篇处理按换行符拆分字符串的相关帖子- [如何将字符串放入数组中，按换行符拆分？](https://stackoverflow.com/questions/1483497/how-to-put-string-in-array-split-by-new-line)

通常（默认情况下）该`trim()`函数将从字符串的开头和结尾去除空白字符，但您可以指定要修剪的任何字符...

> [**trim** — 从字符串的开头和结尾去除空格（或其他字符）。](http://php.net/manual/en/function.trim.php)

这是一个从字符串的开头和结尾删除双引号字符的简单示例。-

```
$str = '"Hello "Stack" Overflow"';
$strippedStr = trim($str,'"');
echo $strippedStr;

// OUTPUT -> Hello "Stack" Overflow 
```

请注意，仅删除了周围的引号，而单词`stack`仍被引号包裹。

删除每行的字符后，只需使用该`implode()` 功能重新加入行。

# java - 直接登录的api

> ID：11922407
> 
> 赞同：0
> 
> 时间：2012-08-12T13:06:26.457
> 
> 标签：java, authentication, single-sign-on, box-api

我正在为组织中的管理员用户开发一个 java 应用程序。管理员用户有权访问组织主文件夹。我希望我的应用程序直接登录管理员（无需在您的盒子登录站点中输入他的用户名和密码）

我在某处读到您有一个 V1 身份验证 API，可以进行直接登录。我在哪里可以找到有关直接登录休息 url 的文档？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:54:06.500

不幸的是，目前没有官方支持的直接登录方法，所以你必须坚持[常规的身份验证系统](http://developers.box.com/get-started/)。

# php - 学说，应用级级联：[删除]不起作用

> ID：11922414
> 
> 赞同：1
> 
> 时间：2012-08-12T13:08:00.947
> 
> 标签：php, doctrine-1.2

我正在使用教义的 SoftDelete，删除后我想 SofDelete 相关记录。

这是我正在使用的架构文件。

```
detect_relations: true
User:
  actAs:
    Timestampable:
    SoftDelete:
    Sluggable:
      unique: true
      fields: [name]
      canUpdate: true
  tableName: user
  columns:
    name:
      type: string(50)
      notnull: true
    email:
      type: string(50)
      notnull: true
      unique: true
    password:
      type: string(50)
      notnull: true
    business_id: integer
  relations:
    Business:
      cascade: [delete]
Business:
  actAs:
    Timestampable:
    SoftDelete:
    Sluggable:
      unique: true
      fields: [name]
      canUpdate: true
  tableName: business
  columns:
    name:
      type: string(50)
      notnull: true
    website: string(100)
    address: string(100) 
```

当我尝试 SoftDelete 用户时，它不会从业务表中删除相关记录（即它不会更新`deleted_at`业务表中的标志）。仅`deleted_at`更新用户表中的标志。

我使用的 DQL 是。

```
$q = Doctrine_Query::create()
    ->delete('Model_User u')
    ->where('u.id = ?', $id);
$q ->execute(); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T04:52:36.843

经过一段时间的搜索，我终于自己找到了解决方案。希望这可以帮助与我有同样问题的人。

以下是应用程序级删除级联工作的几个条件。

*   **与 save() 操作不同，delete() 级联需要显式打开**

除了`cascade: [delete]`在您的模式中定义之外，重要的是要注意您还需要明确定义关系。
如果您依赖于`detect_relations: true`您生成所有关系，这将不适用于应用程序级删除级联。（至少它对我不起作用，在手动定义它工作的关系之后）。

*   **在执行 DQL 更新和删除语句时，应用程序级级联 save() 和 delete() 不适用，只有在对象上调用 save() 和 delete() 时才适用。**

学说文件对此并不清楚。我必须参考 symfony 文档才能理解。学说文件只说。

> 以下描述了通过**$record->delete()**删除记录时的通用过程：

对我来说，这很令人困惑。但是在阅读了 symfony 的教义文档之后，我很清楚如何去做。所以不要通过 DQL 删除。我不得不用这个。

```
$user = Doctrine_Core::getTable('User')->find(1)
$user->delete(); 
```

和繁荣，它的工作原理。:)

PS：如果有人想参考，这里是 symfony 文档的链接。

[http://www.symfony-project.org/doctrine/1_2/en/04-Schema-Files#chapter_04_sub_application_level](http://www.symfony-project.org/doctrine/1_2/en/04-Schema-Files#chapter_04_sub_application_level)

这是一个帖子的链接，它澄清了我的疑问，但它没有任何用处:)

[https://groups.google.com/forum/?fromgroups#!topic/doctrine-user/POq6ybO01lg%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/doctrine-user/POq6ybO01lg%5B1-25%5D)

# java - 为什么 xx 和 top 之间存在内存使用差异？

> ID：11922418
> 
> 赞同：2
> 
> 时间：2012-08-12T13:08:43.283
> 
> 标签：java, memory, jvm

我把jvm的xm设置为4G，但是运行一段时间后，用top查看内存，显示进程使用了​​12G内存。

那么 xxx 到底是什么意思呢？如果我想将 jvm 内存限制为 4 G 该怎么办？

命令行：-server -Xms4g -Xmx4g

还有另一个相关的问题:)

如果 gc 发生，年轻代中不再使用的对象空间是否会不可避免地被 JVM 释放？或者其中一些留给下一个 gc ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T14:06:05.813

JVM 的 -Xmx 选项指定`maximum size of the Java garbage collected heap`. 它不限制 JVM 使用的内存大小。ps 或 top 报告的进程大小将包括该大小，以及该进程使用的任何其他内存。以下是不属于垃圾收集堆但属于进程所需内存的一部分的示例：

*   实现JVM的代码
*   用于实现 JVM 的数据结构的 C 手动堆
*   系统中所有线程的堆栈（app + JVM）
*   缓存的 Java 字节码（用于库和应用程序）
*   JITed 机器代码（用于库和应用程序）
*   所有加载类的静态变量

# visual-c++ - Visual C++ 链接器错误“已在 OBJ 中定义”和“未解析的外部符号”(Mysql++)

> ID：11922419
> 
> 赞同：0
> 
> 时间：2012-08-12T13:08:43.707
> 
> 标签：visual-c++, linker, mysql++

我在 Visual C++ 2010 环境中有一个未来的命令行程序。我使用了正确构建和安装的 MySQL++ 库。

首先，我在 stdafx.h 中定义了一些全局变量（程序非常简单，所以我基本上使用该文件来满足我所有的头文件需求，并且不使用任何其他头文件。头文件通常具有“#if !defined”.. .“#endif”包装。链接器抱怨：

```
Error   2   error LNK2005: "__int64 last_local_time" (?last_local_time@@3_JA) already defined in coreprocessing.obj C:\Tsukasa\ilya\DataImporter\DataImporter\stdafx.obj
Error   3   error LNK2005: "bool debug" (?debug@@3_NA) already defined in coreprocessing.obj    C:\Tsukasa\ilya\DataImporter\DataImporter\stdafx.obj
Error   4   error LNK2005: "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > user" (?user@@3V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A) already defined in coreprocessing.obj   C:\Tsukasa\ilya\DataImporter\DataImporter\stdafx.obj
Error   5   error LNK2005: "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > server" (?server@@3V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A) already defined in coreprocessing.obj   C:\Tsukasa\ilya\DataImporter\DataImporter\stdafx.obj 
```

其他链接器错误与 Mysql++ 库有关。

```
Error   9   error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall mysqlpp::Query::`vbase destructor'(void)" (__imp_??_DQuery@mysqlpp@@QAEXXZ) referenced in function "class mysqlpp::Query * __cdecl connectToDb(void)" (?connectToDb@@YAPAVQuery@mysqlpp@@XZ)   C:\Tsukasa\ilya\DataImporter\DataImporter\coreprocessing.obj
Error   10  error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall mysqlpp::DateTime::operator __int64(void)const " (__imp_??BDateTime@mysqlpp@@QBE_JXZ) referenced in function "class mysqlpp::Query * __cdecl connectToDb(void)" (?connectToDb@@YAPAVQuery@mysqlpp@@XZ)  C:\Tsukasa\ilya\DataImporter\DataImporter\coreprocessing.obj 
```

而在“库目录”属性中包含 MySQL++ 的 LIB 文件夹路径，配置为 Debug，我在 LIB 文件夹中有以下文件：**mysqlpp_d.dll mysqlpp_d.lib **。

如果有人可以帮助了解我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:55:06.327

错误 9 和 10 是因为我忘记在 Project properties > Linker > Additional Dependencies 中添加库 mysqlpp.lib/mysqlpp_d.lib。

因此，将 VC 目录的路径添加到 Includes 和 Libraries 是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:28:44.093

奇怪，但将几个预定义的全局变量从 .h 移动到 .cpp 文件解决了其余的链接问题。.h 文件与 .cpp 文件的代码不一样吗？

# java - 如何通过 Box.net 中的 API 获取共享链接

> ID：11922420
> 
> 赞同：0
> 
> 时间：2012-08-12T13:09:02.220
> 
> 标签：java, authentication, box-api

我使用`get_account_tree`参数并循环输出以获取 shared_Link 值的值。但是，它不起作用。我也用过`get_collaboration_link`，但没有成功。如何将其存储`shared_Link`到 box.net？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:19:11.283

有关如何创建共享链接的信息可[在此处找到](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)。示例 cURL 请求如下所示：

```
curl https://api.box.com/2.0/files/FILE_ID \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-d '{"shared_link": {"access": "open"}}' \
-X PUT 
```

# php - 在 apache 2.2 中的虚拟主机上运行不同的 PHP 版本

> ID：11922425
> 
> 赞同：8
> 
> 时间：2012-08-12T13:09:40.823
> 
> 标签：php, apache, virtual, hosts

如何将 Apache 2.2 服务器配置为在所有虚拟主机中安装 PHP 5.3，除了一台运行 PHP 4.4 的虚拟主机？我有所有的 php 和 .dll 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T13:12:12.837

*解释解决方案的原始文章不再可用。替换为 Wayback Machine 条目（2020 年 12 月）* （[https://web.archive.org/web/20190922142848/http://gggeek.altervista.org/2007/07/21/running-multiple-php-versions-on- a-single-apache-install/](https://web.archive.org/web/20190922142848/http://gggeek.altervista.org/2007/07/21/running-multiple-php-versions-on-a-single-apache-install/) )

虚拟主机配置示例：

```
# Port-based virtual hosting: every php install uses a vhost on a different port
Listen 8447
Listen 8423

### BASE virtualhost
### set up the main php version we're using
<VirtualHost *:80>
    LoadModule php5_module "E:/php5/php5apache2_2.dll"
    PHPIniDir "E:/php5"
    php_value extension_dir "E:/php5/ext/"
    AddType application/x-httpd-php .php
    AddType application/x-httpd-php-source .phps
</VirtualHost>

<VirtualHost *:8447>
    # it would be handy to use php_value directives, but CGI versions of php     will not grok them,
    # so we rely on different php.ini
    SetEnv PHPRC "E:/php4/"
    ScriptAlias /php447/ "E:/php4/"
    Action application/x-httpd-php447 "/php447/php.exe"
    AddType application/x-httpd-php447 .php .inc
    # apache 2.2 denies access to the php cgi executable, unless it is explicitly granted
    <Directory "E:/php4/">
      <Files "php.exe">
        Allow from all
      </Files>
    </Directory>
</VirtualHost>

<VirtualHost *:8423>
    SetEnv PHPRC "E:/php423/"
    ScriptAlias /php423/ "E:/php423/"
    Action application/x-httpd-php423 "/php423/php.exe"
    AddType application/x-httpd-php423 .php .inc
    <Directory "E:/php423/">
      <Files "php.exe">
        Allow from all
      </Files>
    </Directory>
</VirtualHost> 
```

# c - 如何在 Turbo C++ 中不按 Ctrl+Break 退出无限循环

> ID：11922426
> 
> 赞同：2
> 
> 时间：2012-08-12T13:09:40.137
> 
> 标签：c, turbo-c++

我想在 C 中制作秒表（实时秒表），而不使用 Turbo C 中的内置函数“Timer”。我的代码如下：

```
 #include<stdio.h>
 #include<conio.h>
 #include<dos.h>

 int main()
 {
 int hh,mm,ss;
 hh=mm=ss=0;
 gotoxy(10,10);
 printf("\nSTOP - WATCH: ");
 gotoxy(20,18);
 printf("HH : MM : SS");
 _setcursortype(_NOCURSOR);
 for(;;ss++) //An infinite loop
 {
  if(ss==60)
  {
    mm++;
    ss=0;
  }

  if(mm==60)
  {
    hh++;
    mm=0;
  }

  gotoxy(20,20);
  delay(1000);
  printf("%02d : %02d : %02d",hh,mm,ss);

 }  
 return 0;
 } 
```

现在我想通过按下键盘上的按钮退出这个程序（让我们说'Q'）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:28:24.637

使用`kbhit()`and `getch()`from`<conio.h>`获取键盘输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:59:38.367

您的程序是使用`kbhit()`和`getch()`. 如果您忘记了，如果您错误地编译，那么您唯一的选择是`Ctrl`+ `Break`（这可能不起作用，但您可能会很幸运）。

# java - 我想在 JPanel 中放置一个 JApplet

> ID：11922429
> 
> 赞同：1
> 
> 时间：2012-08-12T13:10:18.450
> 
> 标签：java, swing, jpanel, japplet, html

正如标题所说，我想在 JPanel 中放置一个 JApplet，因为我正在制作一个应该显示生物图的插件。Applet 本身已经编写好了，我也已经制作了一个 HTML 标签，它也可以在浏览器中使用。但是，我不知道如何让小程序在 JPanel 中运行

HTML标签：

```
<applet name="Spectrum_a" code="org/openscience/nmrshiftdb/spectrumapplet/SpectrumViewNoRenderer.class"
                codebase="/home/rianne/workspace/org.pathvisio.MetaboliteInfo/lib/"
                archive="spectrumapplet-bin-1.1.jar" width="450" height="350">
                    <param name="spectrum" value="197.74d;0.0;1|143.55;0.0;0|27.36;0.0;2t|">
                    <param name="realisticLines" value="true">
                    <param name="showCoupling" value="true">
                    <param name="hideNavigation" value="false">
                    <param name="autoIntensity" value="false">
                    <param name="solvent" value="CDCL3">
            </applet> 
```

希望可以有人帮帮我：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T13:43:22.673

要将applet 嵌入Java 应用程序，我建议不要使用HTML。相反，将[小程序](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html)视为一个简单的[组件](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html)，并尝试像浏览器插件一样对待小程序。特别是，确保[设置一个存根](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#setStub%28java.applet.AppletStub%29)并适当地调用[`init`](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#init%28%29)和[`start`](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#start%28%29)方法。正是该[存根](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletStub.html)为小程序[提供参数](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletStub.html#getParameter%28java.lang.String%29)，因此通过适当地实现该[`getParameter`](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletStub.html#getParameter%28java.lang.String%29)方法，您可以传递所需的任何参数。

您可能必须为插件的 jar 创建一个单独的[类加载器](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)，并通过该类加载器实例化插件类。如果您的环境不允许您的插件创建新的类加载器，那么您应该将 applet jar 列为插件的依赖项，以便其类在您的插件使用的同一类路径中可用。即使允许自定义类加载器，这样做也可能是更简单的方法，因此请选择您喜欢的任何方法。

# node.js - NPM 获取失败

> ID：11922430
> 
> 赞同：4
> 
> 时间：2012-08-12T13:10:19.277
> 
> 标签：node.js, socket.io, npm

这是一个快速的：

```
npm install socket.io

npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/-/socket.io-0.9.10.tgz
npm http 404 https://registry.npmjs.org/-/socket.io-0.9.10.tgz
npm ERR! fetch failed https://registry.npmjs.org/-/socket.io-0.9.10.tgz
npm ERR! Error: 404 Not Found
npm ERR!     at null.<anonymous> (/usr/local/lib/node_modules/npm/lib/utils/fetch.js:47:16)
npm ERR!     at EventEmitter.emit (events.js:115:20)
npm ERR!     at WriteStream.flush (fs.js:1514:12)
npm ERR!     at fs.close (/usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:92:5)
npm ERR!     at Object.oncomplete (fs.js:297:15)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 11.4.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "socket.io"
npm ERR! cwd /Users/enrico/Documents/MMORPG
npm ERR! node -v v0.8.6
npm ERR! npm -v 1.1.48
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/enrico/Documents/MMORPG/npm-debug.log
npm ERR! not ok code 0 
```

这个 npm 安装有什么问题？服务器无法访问吗？任何解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-12T13:19:39.043

[https://twitter.com/addy_osmani/status/234565967101972481](https://twitter.com/addy_osmani/status/234565967101972481) <--见这个对话。我想今天很多人都遇到了麻烦：/

解决方案：[https](https://github.com/mmalecki/npm-proxy) ://github.com/mmalecki/npm-proxy <-- NPM 代理

或使用：`npm install <module> --registry http://165.225.128.50:8000`

# java - 解压过程使设备无响应

> ID：11922432
> 
> 赞同：0
> 
> 时间：2012-08-12T13:10:35.287
> 
> 标签：java, android, unzip

在运行下面的代码解压缩一个 70 mb 的 zip 文件（其中包含 750 个文件）时，设备变得无响应并且几乎崩溃。谁能告诉我它有什么问题：

```
boolean UNZipFiles() {
    float prev = -1; // to check if the percent changed and its worth updating the UI
    int finalSize = 0;
    float current = 0;

    try {
        final int BUFFER = 2048;
        String zipFilePath = PATH + FileName;

        BufferedOutputStream dest = null;
        BufferedInputStream is = null;
        ZipEntry entry;
        ZipFile zipfile = new ZipFile(zipFilePath);

        finalSize = (int) new File(zipFilePath).length();

        Enumeration<? extends ZipEntry> e = zipfile.entries();
        while (e.hasMoreElements()) {
            entry = e.nextElement();
            current += entry.getCompressedSize();

            if (entry.isDirectory())
                dirChecker(entry.getName());
            else {
                int count;
                byte data[] = new byte[BUFFER];

                is = new BufferedInputStream(zipfile.getInputStream(entry));
                FileOutputStream fos = new FileOutputStream(PATH + entry.getName());
                dest = new BufferedOutputStream(fos, BUFFER);
                while ((count = is.read(data, 0, BUFFER)) != -1)
                    dest.write(data, 0, count);

                if (prev != current / finalSize * 100) {
                    prev = current / finalSize * 100;

                    UpdatePercentNotificationBar((int) prev);
                }

                dest.flush();
                dest.close();
                is.close();
            }
        }

        DeleteZip(zipFilePath);

        success = true;
    } catch (Exception e) {
        NotificationBarFail("Error while Downloading");
        return false;
    }

    return true;

} 
```

通知管理：

```
public void onCreate() {        
    super.onCreate();
    mContext = this;

    Intent intent = new Intent(this, Main.class);
    pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
    notification = new Notification(R.drawable.icon, "Downloading files", System.currentTimeMillis());
    notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
    notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.background_service);
    notification.contentIntent = pendingIntent;
    notification.contentView.setImageViewResource(R.id.status_icon, R.drawable.icon);
    notification.contentView.setTextViewText(R.id.status_Percentage, "0%");
    notification.contentView.setProgressBar(R.id.status_progress, 100, progress, false);

    notificationManager = (NotificationManager) getApplicationContext().getSystemService(NOTIFICATION_SERVICE);

    notificationManager.notify(42, notification);
    FileName = Main.Main_File_Name;
} 
```

新代码：

```
boolean UNZipFiles() {
        byte[] buffer = new byte[4096];
        int length;
        float prev = -1; // to check if the percent changed and its worth updating the UI
        int finalSize = 0;
        float current = 0;

        try {

            String zipFile = PATH + FileName;

            FileInputStream fin = new FileInputStream(zipFile);
            ZipInputStream zin = new ZipInputStream(fin);

            finalSize = (int) new File(zipFile).length();

            ZipEntry ze = null;

            while ((ze = zin.getNextEntry()) != null) {
                current += ze.getCompressedSize();
                if (ze.isDirectory())
                    dirChecker(ze.getName());
                else {
                    FileOutputStream fout = new FileOutputStream(PATH + ze.getName());
                    while ((length = zin.read(buffer)) > 0)
                        fout.write(buffer, 0, length);
                    if (prev != current / finalSize * 100) {
                        prev = current / finalSize * 100;

                        UpdatePercentNotificationBar((int) prev);
                    }
                    zin.closeEntry();
                    fout.close();
                }

            }
            zin.close();
            DeleteZip(zipFile);

            success = true;
        } catch (Exception e) {
            NotificationBarFail("Error while downloading");
            return false;
        }

        return true;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:30:23.807

在您调用 UpdatePercentNotificationBar 超过 100 次的代码部分中，因为您对 prev 使用浮点值，因此每个循环都会生成一条新消息。

原来的：

```
float prev;
...
if (prev != current / finalSize * 100) {
  prev = current / finalSize * 100;
  UpdatePercentNotificationBar((int) prev);
} 
```

应该是这样的：

```
int prev;
...
if (prev != (int)(current / finalSize * 100)) {
  prev = (int)(current / finalSize * 100);
  UpdatePercentNotificationBar(prev);
} 
```

正如您通过更改此逻辑确认的那样，您不再用消息淹没 UI。

# django - Django：get_object_or_404 不是正确的解决方案，但它是什么？

> ID：11922433
> 
> 赞同：5
> 
> 时间：2012-08-12T13:11:12.793
> 
> 标签：django

我正在努力为我在这里尝试做的事情找出正确的解决方案，并且非常感谢一些帮助。

目前，我有一个工作系统，它从数据库中获取“特殊”并将其显示在浏览器中。用户可以在浏览器中编辑该“特殊”并将其提交到数据库。然后将该更改显示给用户。

问题是如果数据库中没有预先存在的“特殊”，则“特殊”将不会更新。在我的views.py中，我有：

```
def changeSpecialOffer(theRequest):
    myProductUuid = theRequest.POST['myProductUuid']
    myNewSpecialOffer = theRequest.POST['myNewSpecialOffer']
    myProduct = get_object_or_404(Product, uuid=myProductUuid)
    myActiveSpecial = get_object_or_404(SpecialOffer.objects.filter(product=myProduct).filter(
                                                            active=True))
    try:
        myActiveSpecial.special = myNewSpecialOffer
        myActiveSpecial.save()
    except:
        return HttpResponse(myActiveSpecial, mimetype='text/plain')
    myActiveSpecial = SpecialOffer.objects.filter(product=myProduct).filter(
                                                            active=True)
    return HttpResponse(myActiveSpecial, mimetype='text/plain') 
```

我知道“特殊”更新不起作用的原因是因为`get_object_or_404`数据库中没有预先存在的“特殊”，所以正确返回了 404 错误。

在数据库中存在现有“特殊”的情况下，我一直在尝试找出解决此问题的最佳方法，而不会破坏该功能。

到目前为止，我已经尝试用 and 替换`get_object_or_404`，`try`但是`except`我遇到了保存功能的问题，例如`'unicode' has no attribute 'save()'`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:18:42.287

尝试替换：

```
myActiveSpecial = get_object_or_404(SpecialOffer.objects.filter(product=myProduct).filter(
                                                    active=True)) 
```

和：

```
myActiveSpecial, just_created = SpecialOffer.objects.get_or_create(product=myProduct, active=True) 
```

或者你可以尝试这样的事情：

```
try:
    myActiveSpecial = SpecialOffer.objects.get(product=myProduct, active=True)
except SpecialOffer.DoesNotExist:
    myActiveSpecial = SpecialOffer.objects.create(product=myProduct, active=True, ...something.more...) 
```

如果您需要对刚刚创建的对象做更多的事情。

**编辑：**

只是一个想法......将模型发送到 有点令人费解`HttpResponse`。也许您会想要手动创建一个您希望在`HttpResponse`. 当然，当前的代码也可以。它隐式调用`__unicode__`模型的方法。

另一件事 - 重新获取`myActiveSpecial`之前的原因是`return`什么？我看不出这可能会产生什么影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:28:00.630

工作方式`get_object_or_404`是传入模型，然后进行一些查找。就像你说的一样，`SpecialOffer.objects.get()`但它不是引发异常，而是引发`404`.

您第一次正确使用它，但第二次没有正确使用它。

试试这个：

```
myProduct = get_object_or_404(Product, uuid=myProductUuid) # this is correct
myActiveSpecial = SpecialOffer.objects.filter(product=myProduct).filter(active=True))

if myActiveSpecial.count():
  # There is one or more active specials!
else:
  # There are no active specials for this product 
```

您还可以使用反向查找技巧（取决于模型的设置方式）。

```
myActiveSpecial = myProduct.specialoffer_set.filter(active=True) 
```

# javascript - 如何检查是否启用了 javascript 并将其纳入网页？

> ID：11922436
> 
> 赞同：0
> 
> 时间：2012-08-12T13:11:58.883
> 
> 标签：javascript, forms, button, anchor

如果此人未使用 JavaScript，我想使用按钮提交表单，如果此人使用 JavaScript，我想使用锚标记提交表单。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T13:15:23.940

我建议只用纯 HTML 构建页面。然后使用 JavaScript，将这些元素替换为启用 JavaScript 的版本。在您的情况下，使用提交按钮构建您的表单。然后使用 JavaScript，将该提交按钮替换为链接。

如果您还没有遇到这种方法，它被称为[*渐进增强*](http://en.wikipedia.org/wiki/Progressive_enhancement)，总而言之，它正在开发一个具有完整工作功能的产品（在您的情况下，提交按钮）并添加可选部分（链接，使用 JS）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:16:23.937

最初的 HTML 应该只包含按钮，但让您的 javascript 删除按钮并将其替换为锚标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T13:16:58.870

`<noscript>`默认情况下显示标签内的按钮。同样默认情况下，将锚点的 CSS 设置为`display: none;`. 在页面加载事件中，使用 JavaScript 显示您的锚点。如果不启用 JS，则不会发生这种情况，只会显示按钮。

```
 <a href="#" style="display: none;" id="JsVersion">click me</a>

    <noscript><input type="button" id="NoJsVersion" value="click me" /></noscript>

    <script>
    //Assuming you are using jQuery
    $("document").ready(
       function(){
          $("#JsVersion").show();
       }        
    );
    </script> 
```

# mysql - 一个查询中的多个计数

> ID：11922440
> 
> 赞同：2
> 
> 时间：2012-08-12T13:12:24.953
> 
> 标签：mysql, select, count

我有三个这样的表：

漫画

```
|   id  | sendby
------------------
|   1   |   1
|   2   |   1
|   3   |   1
|   4   |   1 
```

小伙子

```
|   id  | sendby    | translator | graphic
-------------------------------------------
|   1   |   1       |   admin    |  other
|   2   |   1       |   admin    |  other
|   3   |   1       |   admin    |  admin
|   4   |   1       |   other    |  admin 
```

用户

```
|   userid  | username  
-----------------------
|      1    |   admin 
```

我试图计算我发送过的内容，但结果不正确。

我试过以下查询：

```
SELECT username,
   SUM(
       CASE WHEN m.sendby = u.userid
       THEN 1 ELSE 0 END
   ) AS manga,
   SUM(
       CASE WHEN c.sendby = u.userid
       THEN 1 ELSE 0 END
   ) AS chapter,
   SUM(
       CASE WHEN c.translator = u.username
       THEN 1 ELSE 0 END
   ) AS translator,
   SUM(
       CASE WHEN c.graphic = u.username
       THEN 1 ELSE 0 END
   ) AS graphic
FROM user u
    left JOIN manga m 
        ON m.sendby = u.userid 
    left JOIN chapter c 
        ON c.sendby = u.userid 
where u.userid = '1' 
```

但它返回的是不正确的：

漫画：16，章节：16，翻译：12，图形：8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:27:39.683

这是对此的查询

```
select
  m.id,
  count(m.sendby) as Manga,
  lc.Chapter,
  rc.Translater,
  c.Grafix
from manga as m
  left join (select sendby, count(sendby) as Chapter from chaprer) as lc on lc.sendby  = m.sendby
  left join (select sendby, count(translater) as Translater from chaprer where translater = 'admin') as rc on rc.sendby  = m.sendby
  left join (select sendby, count(graphics) as Grafix from chaprer where translater = 'admin') as c on c.sendby  = m.sendby 
```

编辑
我已经测试了这个查询，这会获取这个结果

```
Query Result
id  Manga   Chapter Translater  Grafix
1   4       4       3           3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:23:09.917

你是`left JOIN`故意用的吗？你知道它是如何[工作](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)的吗？使用它两次使您的选择在 16 行结果表上运行。尝试首先选择所有结果 (*)，然后修复您的`FROM`子句以返回要从中选择的所需数据。

从您的评论来看，您似乎建议使用[Inner join](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:40:17.503

一个直接的方法是做这样的事情：

```
SELECT  username,
(SELECT COUNT(m.sendby) FROM manga m WHERE m.sendby= u.userid) AS manga,
(SELECT COUNT(c.sendby) FROM chapter c WHERE c.sendby= u.userid) AS chapter,
(SELECT COUNT(t.sendby) FROM chapter t WHERE t.translator= u.username) AS translator,
(SELECT COUNT(g.sendby) FROM chapter g WHERE g.graphic= u.username) AS graphic
FROM USER u
WHERE userid=1 
```

如果您运行，您将在原始查询中看到问题：

```
SELECT *
FROM USER u
    LEFT JOIN manga m 
        ON m.sendby = u.userid 
    LEFT JOIN chapter c 
        ON c.sendby = u.userid 
WHERE u.userid = '1' 
```

左连接返回重复的行。

# php - PHP提取不适用于数组

> ID：11922444
> 
> 赞同：2
> 
> 时间：2012-08-12T13:12:44.157
> 
> 标签：php, oop, extract

我正在尝试将我的 $viewData 放入局部变量中。这是我的功能：

```
function view($layout, $view, $var)
{

    extract($var);
    include($layout);

} 
```

这是我使用它的方式：

```
$viewData = array($hasImages->arr, $latest->arr, $mostViewed->arr, $all->arr, $this->error);

$this->view('/view/shared/layout.php', '/view/home.php', $viewData); 
```

extract 方法适用于 $this->error 字符串，但不适用于任何数组，例如 $hasImages->arr。它似乎没有在本地上下文中创建变量。

如何将数组放入我的函数中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T13:16:16.530

[`extract()`](http://us3.php.net/manual/en/function.extract.php)需要一个关联数组，因此它具有在它被调用的范围内派生变量名称的键。

```
// Pass in an associative array
$viewData = array(
  'hasImages' => $hasImages->arr,
  'latest' => $latest->arr,
  'mostViewed' => $mostViewed->arr,
  'all' => $all->arr, 
  'error' => $this->error
);

// After extract(), will produce
$hasImages
$latest
$mostViewed
$all
$error 
```

但是，我会质疑使用的效用`extract()`。相反，使用上面的关联数组可能更具可读性，并通过`$var['mostViewed']['something']`方法内部的键访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T13:16:27.543

`$viewData`需要是一个关联数组。一旦它们被“提取”，数组的键将是变量的名称。

# java - 关于java for android中日期格式的咨询

> ID：11922446
> 
> 赞同：0
> 
> 时间：2012-08-12T13:12:54.067
> 
> 标签：java, android

我有这个日期： `Date d = new Date(2012, 8, 1)`;

但在屏幕上我看到：`61304700000000`

我可以看到如何解决它：`01/08/2012`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:19:38.973

```
SimpleDateFormat dmy = new SimpleDateFormat("dd/MM/yyyy");
dmy.format(d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:20:21.460

使用`SimpleDateFormat`：

```
import java.util.*;
import java.text.*;
Date dNow = new Date( );
SimpleDateFormat ft = new SimpleDateFormat ("d/m/y");
System.out.println("Current Date: " + ft.format(dNow)); 
```

或使用`printf`：

```
System.out.printf("%n/%d/%y", dNow); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:40:41.470

`61304700000000`你在屏幕上看到的是从 1970 年 1 月 1 日开始的 64 位长值。

如果你这样做...

```
Date d = new Date(61304700000000L);
System.out.println(d); 
```

**输出：**

```
Mon Sep 02 08:50:00 IST 3912 
```

**这样做以获得** `day/Month/Year`（例如：00/00/0000）

`System.out.println(new SimpleDateFormat("dd/MM/YYYY").format(new Date()));`

# jquery - 如何为法语数字格式编写正则表达式？（空格作为千 位分隔符，逗号作为小数分隔符）

> ID：11922448
> 
> 赞同：0
> 
> 时间：2012-08-12T13:13:35.810
> 
> 标签：jquery, regex, separator

我有一个在文本输入字段中显示金额的 JQuery 函数。非常简单......但是这是一个法语应用程序，我正在尝试为法语数字格式构建一个正则表达式（空格作为千​​位分隔符，逗号作为小数分隔符）。

我尝试了几种方法......最后一次尝试是，`.replace(/(\d)(?=(?:\d{3})+(?:$))/g, '$1 ');`但它没有作为千位分隔符提供空格，也没有逗号小数分隔符。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:33:06.627

您可以反转字符串，然后尝试`replace(/(\d{3})/g, "$1 ")`然后再次反转。这是一个[jsFiddle](http://jsfiddle.net/3PRnS/1/)。

**注意：**`reverse`小提琴中使用的方法来自[这个问题](https://stackoverflow.com/questions/958908/how-do-you-reverse-a-string-in-place-in-javascript)。

**更新**

您可能必须首先将字符串分成整数和小数部分，执行上述转换，然后用逗号将其重新组合在一起（如有必要）。它可能比你要找的更丑，但我想不出一个纯粹的正则表达式解决方案。我已经相应地更新了 jsFiddle。

# android - 从 WallpaperService 调用加速度计

> ID：11922453
> 
> 赞同：0
> 
> 时间：2012-08-12T13:14:23.457
> 
> 标签：android, accelerometer, live-wallpaper

我得到了这个加速度计类，它保存加速度计的值，我可以随时从任何其他类访问它们。通常我会创建新对象`Accelerometer accelerometer = new Accelerometer(this);` ，但是当我在里面时`WallpaperService`，它不允许我`this`用作参数。

这是加速度计类：

```
import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class Accelero implements SensorEventListener {

    private float xAxis;
    private float yAxis;
    private float zAxis;

    SensorManager manager;
    Sensor accelerometer;
    Activity activity;

    public Accelero(Activity activity) {
        this.activity = activity;
        manager = (SensorManager) this.activity.getSystemService(Context.SENSOR_SERVICE);
        accelerometer = manager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
     }

    public float getX(){
        return this.xAxis;
    }

    public float getY(){
        return this.yAxis;
    }

    public float getZ(){
        return this.zAxis;
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    public void onSensorChanged(SensorEvent event) {
            xAxis = event.values[0];
            yAxis = event.values[1];
            zAxis = event.values[2];
    }

} 
```

例如，我尝试从 SDK 附带的示例代码 CubeWallpaper 中访问它

```
import com.example.android.livecubes.R;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Handler;
import android.os.SystemClock;
import android.service.wallpaper.WallpaperService;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

/*
 * This animated wallpaper draws a rotating wireframe cube.
 */
public class CubeWallpaper1 extends WallpaperService {

    private final Handler mHandler = new Handler();
    Accelero acc;

    @Override
    public void onCreate() {
        super.onCreate();
        acc = new Accelero(this);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    ...  // skipped to keep post short.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:49:14.060

您必须将 a 传递`Activity object`给 Accelerometer 类，而不是 a `WallpaperService object`。

初始化 Accelerometer 对象的选项：

1) 直接从您的活动类的 onCreate() 方法中执行此操作：

```
Accelerometer accelerometer = new Accelerometer(this); 
```

2）或者您可以从您的 WallpaperService 类中执行此操作，但您需要引用您的活动类。

```
Activity foo;

Accelerometer accelerometer = new Accelerometer(foo); 
```

您可以在 WallpaperService 中创建一个方法，以将活动对象的引用传递给 WallpaperService 对象。

```
public void setActivity(Activity foo) {
this.foo = foo;
} 
```

我希望这有帮助！

**更新：**

这里有一些代码可以让第二个选项更容易理解：

```
public class YourWallPaperService extends WallpaperService {
Activity foo;

// I'm guessing you create a WallpaperService object in your activity code? If so, call this method on that object with a parameter "this"
public void setActivity(Activity foo) {
this.foo = foo;
}

} 
```

# ruby-on-rails - Ruby 数组的方法 assoc 和 rassoc 的目的是什么？

> ID：11922454
> 
> 赞同：10
> 
> 时间：2012-08-12T13:14:25.080
> 
> 标签：ruby-on-rails, ruby, arrays

我已经阅读了方法`assoc`和`rassoc`Ruby的文档`array`。我明白他们在做什么。它们都适用于数组数组。`assoc`返回其第一个元素等于提供的参数的数组，并且`rassoc`执行相同的操作，但针对第二个元素。

我的问题是这些方法有什么用？此功能非常具体。我猜想创建这些方法是有原因的。它是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T13:30:34.717

有几个原因，但主要原因是数组可以像哈希一样工作。我认为因为哈希是未排序的，Ruby 设计者需要一种方法来以有序的方式表示哈希。我认为有很多`Enumerable`方法在散列上调用时会返回数组。

# vbscript - 从批处理文件到 vbsript 的相应命令

> ID：11922457
> 
> 赞同：1
> 
> 时间：2012-08-12T13:14:44.057
> 
> 标签：vbscript, batch-file

我试图在 MS 窗口 xp 中从 cmd 脚本转到 vbscript

cmd代码是的

```
set home_=%~dp0

set part001=part001
set part002=part002
set part003=part003
set part004=part004

::get the dir in part001
for /f "delims=" %%A in ('dir /s/b/o:n/a:d ^"%home%%part001%\^"') do (
echo show have dir path
echo %%A
pause
)
echo to the end
pause
goto :eof 
```

到 vbscript

我不知道要转换的部分是那些被格式化为**cmd{cmd 编码}**

```
dim strHome as strimg =cmd{[%~dp0]}

dim strPart001 as sting = part001
dim strPart002 as sting = part002
dim strPart003 as sting = part003
dim strPart004 as sting = part004

'get the dir in part001
Dim objFSo, objFile
Set objFSo = CreateObject("Scripting.FileSystemObject")

set objDirPart001list = objFS.getfolder(strHome&strPart001\)
set subDirPart001list = objDirPart001list.SubFolders
for each  subDirPart001Name in subDirPart001list
    WScript.Echo show dir path
    WScript.Echo part
    cmd{pause}
    )
cmd{pause} 
```

对应的 vbscript 命令是什么：

*   %~dp0
*   暂停

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:10:29.850

这`%~dp0`是一个所谓的魔术命令，但从技术上讲，这种方法称为变量替换。% *n*变量用于引用脚本的命令行参数。最常见的是，`%0`将返回正在执行的脚本的完整路径。d 和 p 是特殊修饰符，它们将分别返回该路径的驱动器和路径部分。还有 n 返回文件名部分以及[其他](http://technet.microsoft.com/en-us/library/bb490909.aspx)。可以根据需要组合这些修饰符。因此，该`%~dp0`命令将返回执行脚本所在目录的完整驱动器和路径。要在 VBScript 中执行此操作，您可以使用以下任何依赖于 WScript 对象的 ScriptFullName 方法的方法：

```
Set objShell = CreateObject("WScript.Shell")
Set objFso = CreateObject("Scripting.FileSystemObject")
strPath = objFso.GetParentFolderName(WScript.ScriptFullName) 
```

或者

```
strPath = Left(WScript.ScriptFullName, Len(WScript.ScriptFullName) - Len(WScript.ScriptName)) 
```

或者我最喜欢的：

```
Replace(WScript.ScriptFullName, WScript.ScriptName, "") 
```

该`pause`命令用于停止命令解释器并提示用户按任意键继续。这通常是为了让用户有时间在命令窗口关闭之前阅读命令窗口中的信息。这是在 CScript 中执行此操作的子例程。（对于 WScript，您只需使用一个简单的 MessageBox。）

```
Sub Pause
    WScript.StdOut.Write "Press any key to continue . . . "
    WScript.StdIn.Read(1)
End Sub 
```

# jquery - jQuery UI MultiSelect 小部件不会关闭

> ID：11922461
> 
> 赞同：2
> 
> 时间：2012-08-12T13:15:27.997
> 
> 标签：jquery, multi-select

我正在尝试在我的网站上使用 jQuery UI MultiSelect 小部件，使用[http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#basic上的演示](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#basic)

起初我以为这是我将它编码到我的网站的方式，但在访问 Firefox 和 Chrome 中的演示页面后，它似乎在使用演示网站的任何一个中都没有关闭。

如果它真的有问题，任何人都可以推荐一个多选 jquery 脚本，它像上面的例子一样使用 jquery ui 皮肤，但实际上在你点击关闭按钮时关闭？

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:56:40.580

同一个演示有一个打开/关闭动画的示例，并且在遇到与您相同的错误（Chrome/Firefox 不会关闭）时，当指定隐藏时，关闭按预期工作

如果您不想要动画，我会使用：

```
$("#test-1").multiselect({
    hide: ["blind", 1]
}); 
```

传递给 hide 的第二个值是动画的持续时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:56:04.880

您正在使用基本演示，它没有任何关闭或隐藏选项。 [http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#animations](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#animations) 在此示例的源代码中，他们正在传递显示和隐藏。尝试这个。

# java - 在 SDK 管理器中找不到 Google 市场许可包

> ID：11922462
> 
> 赞同：4
> 
> 时间：2012-08-12T13:15:39.727
> 
> 标签：java, android, android-lvl

我将根据此[设置开发环境](http://developer.android.com/guide/google/play/licensing/setting-up.html)并在下载 LVL 部分中显示“启动 Android SDK 管理器，然后选择 Google Market Licensing 包”。当我启动我的 SDK 并完成加载存储库时，它不会显示 Google Market Licensing 应用程序。帮助！

它确实显示了 Google Play Licensing Library，但 Google 网站上的说明清楚地提到了 Google Market Licensing 包。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T13:45:15.393

SDK 管理器中的名称似乎已更改为“Google Play 许可库”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T12:18:38.507

名称已更改为“Google Play 许可库”。打开Android SDK Manager并打开EXTRAS文件夹你可以找到“Google Play Licensing Library”

# php - 为 UPDATE 查询运行多次时，PDO 的 rowCount() 是否真的返回 0？

> ID：11922471
> 
> 赞同：1
> 
> 时间：2012-08-12T13:17:25.700
> 
> 标签：php, mysql, sql, pdo, sql-update

`UPDATE table SET foo = 'bar' WHERE id = 1`

如果你运行一次，`PDOStatement::rowCount()`返回`1`，但如果你再次运行（不止一次），后续运行返回`0`。

我想知道这是否真的是预期的行为？`1`由于您基本上是在更新/影响同一行，因此是否应该始终返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:21:00.197

`rowCount()`报告语句*实际修改*的行数。`UPDATE`如果您`UPDATE`两次调用相同的语句，第二次将不会有任何需要修改的行（因为它们第一次更改了）。所以第二次受影响的行数实际上是 0。

如果您在控制台中运行相同的操作，您会看到类似下面的内容，这表明尽管一行符合您的条件，但它的列值已经是您尝试将它们更改为的值，因此它们保持不变。

```
Rows matched: 1 Changed: 0 Warnings: 0 
```

# php - 致命错误：调用未定义的函数 logged_in()

> ID：11922472
> 
> 赞同：0
> 
> 时间：2012-08-12T13:17:32.940
> 
> 标签：php, function, session, login, undefined

我制作了一个登录脚本，当我想检查用户何时登录时，我使用了函数 logged_in()，它包括：

```
function logged_in()
{
    if(isset($_SESSION['id']))
    {
        return true;
    }
    else 
    {
        return false;
    }
} 
```

会话设置在这里：

```
else if ($login === true)
        {
            echo 'Login success.';
            include 'include/aside.php';
            include 'include/footer.php';
            $userid = id_from_username($username);
            $usernameforsession = username_from_id($userid);
            $_SESSION['id'] = $userid;
            $_SESSION['username'] = $usernameforsession;
            header( "refresh:2;url=index.php");
            exit();
        } 
```

这是我在'index.php'中使用它的一个例子：

```
if(logged_in() === true)
{
    echo 'Site content when user is logged in.';
} else if(logged_in() === false)
{
    include 'include/widgets/register.php'; //registration form
} 
```

是的，该功能包含在每个页面中。我做了这个功能，所以它应该可以工作......为什么它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:34:14.520

替换此代码：

```
if(logged_in() === true) 
```

使用此代码：

```
if(isset($_SESSION['id'])) 
```

这消除了所有中间商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:25:19.823

如果您绝对确定每个页面上都包含该声明，那么我建议您检查以确保该函数未声明为对象内的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T13:20:21.587

尽管您列出了相当多的代码，但您确定要包含`session_start();`在每一页的顶部吗？在对会话变量进行任何操作之前，您需要调用它。

第二件事是错误消息显示该函数未定义-您确定将其包含在页面的源代码中还是包含在每个页面上定义它的代码中？

如果您将它放在一个名为“functs.php”的文件中，则需要`include()`在将调用该函数的每个页面中都有它。

# java - 无法从 java 代码中获取系统属性

> ID：11922476
> 
> 赞同：0
> 
> 时间：2012-08-12T13:18:01.530
> 
> 标签：java, tomcat

我在 catalina.sh 中放置了以下代码以获取系统属性，这是 Apache Tomcat 服务器。

```
 JAVA_OPTS="$JAVA_OPTS -Dserver=https://8.7.198.4"
  JAVA_OPTS="$JAVA_OPTS -Dencoding=c3BhcmtDbGllbnQ6MGQ5YWJmMTdlYTiYWUyYWYyNzdhMzliOWZjNzk="
  JAVA_OPTS="$JAVA_OPTS -Dservice.url=/api/"
  JAVA_OPTS="$JAVA_OPTS -Dlogin.service=oauth7"
  JAVA_OPTS="$JAVA_OPTS -Ddomain.name=nms.mixwoorks.net"

Tomcat Version       JVM Version    JVM Vendor          OS Name OS Version      
Apache Tomcat/7.0.29    1.6.0_33-b04    Sun Microsystems Inc.   Linux   2.6.32-279.el6.x86_64 
```

在 Java 代码中，我`System.getProperty("server");`用来获取定义的属性。但我得到 null 作为价值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-13T11:26:19.990

如果您想要操作系统上的环境变量，请使用`System.getenv()`

我不确定我是否完全理解您在这里所做的事情，但是如果您尝试访问在 shell 脚本中定义的变量，那么您应该在脚本中正确配置环境变量。

如果你使用 tcsh / csh：

```
setenv PROP VALUE 
```

如果你使用 bash / sh：

```
PROP=VALUE
export PROP 
```

然后 PROP 将从您的 java 代码中获得。利用：

```
System.getenv("PROP"); 
```

希望能帮助到你..

# css - 正则表达式匹配线性梯度

> ID：11922477
> 
> 赞同：0
> 
> 时间：2012-08-12T13:18:05.087
> 
> 标签：css, regex

是否可以`background-image`使用唯一的正则表达式正确拆分线性梯度定义，即：

```
linear-gradient(hsl(200, 83%, 64%), hsl(200, 81%, 59%) 32%, rgb(22, 22, 22) 81%, red) 
```

我正在寻找的是获得多个这样的匹配项（在这种情况下为 4 个匹配项）：

```
$1:hsl(200, 83%, 64%)
$2:
$1:hsl(200, 81%, 59%)
$2:32%
$1:rgb(22, 22, 22)
$2:81%
$1:red
$2: 
```

我目前正在尝试类似的东西：

```
(hsl\([^\)]*\))\s*(\d+%)? 
```

但这仅适用于 hsl，必须有一些巧妙的方法来减少具体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:30:05.193

# .net - 间歇性地获取潜在危险的 Request.Path (?)

> ID：11922478
> 
> 赞同：2
> 
> 时间：2012-08-12T13:18:19.947
> 
> 标签：.net, asp.net-mvc

我有一个 mvc 应用程序，它有一个捕获所有路由设置，偶尔会在“？”上引发危险的请求路径异常。

我有像这样的路线设置

```
routes.MapRoute(
  "ImageResponse", // Route name
  "{*_*}", // Just cute
  new { controller = "ImageResponse", action = "RenderImage" } // Parameter defaults
); 
```

我在路径上遇到异常说“？” 是一个危险的请求，但我无法重现它（直接从事件日志中复制并粘贴它）。当我在机器上施加一点负载时，这似乎会发生。

例如，我在我的事件日志中发现了类似的内容（.jpg 的所有内容都已更改以保护无辜者，尽管有三个目录和一个文件名）。

`/an/example/path/image.jpg?Size=Thumb`

有没有人遇到过这个问题？似乎那里没有检测到我的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:19:19.610

您确定实际路径中没有特殊字符吗？你不是 URL 编码的？你是？这将导致它被解释为路径的一部分，而不是查询字符串的开头。

更多信息/示例在这里：

[为什么在重定向获得“潜在危险请求”时使用包含问号的 URL？](https://stackoverflow.com/questions/8547847/why-is-using-a-url-containing-a-questionmark-when-redirecting-gets-a-potentiall)

[有潜在危险的 Request.Path 值.... 仅包含字母数字和下划线？](https://stackoverflow.com/questions/7760137/a-potentially-dangerous-request-path-value-contains-only-alphanumerics-and-a)

# twitter - 如何从 Twitter api 好友列表中获取谁添加了我的应用程序？

> ID：11922480
> 
> 赞同：0
> 
> 时间：2012-08-12T13:18:34.127
> 
> 标签：twitter

我可以获取用户的好友列表。但我只对在我的网站上授权我的应用程序的用户朋友感兴趣。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:05:02.047

在身份验证过程结束时（我猜是使用 OAuth），Twitter 会为您提供应用程序的令牌、授权该应用程序的用户的 ID 和屏幕名称（用户名）。

所以你可以做这样的事情：

1.  在身份验证过程结束时：存储授权您的应用程序的用户 ID 和/或用户名（例如在您的数据库中）。
2.  当您检索用户的朋友列表时，您可以通过查看其 ID（和/或其用户名，取决于您保存的内容）是否在您保存有关授权您的应用程序的用户信息的存储中来查看用户的朋友是否授权了您的应用程序。

# xslt - xslt 元素上的组宽度 (xslt 1.0)

> ID：11922483
> 
> 赞同：0
> 
> 时间：2012-08-12T13:18:55.670
> 
> 标签：xslt, xslt-1.0

ХМL:

```
<?xml version="1.0" encoding="utf-8" ?> 
<page>
<elements>
<element>
<data>
<Styles Name="default">
<Style Url="/css.css" Browser="default" Version="default"/>
</Styles>
</data>
</element>
<element type="Digillect.WB.Web.Elements.Site.SiteStructureElement">
<config StartLevel="0" MaxDepth="3" UseItemVisibility="false">
<monikers>
<moniker store="asdasd"/>
</monikers>
</config>
<data ParentPath="/">
</data>
</element>

<element name="bids">
<config>
<Object Id="1b61995a-6e22-4b09-af5f-9a50cdaa7863"/>
<Object Id="baa1d3df-0510-4f68-8a41-1b9b22587134"/>
</config>
<data>

<Object Id="id2" Name="Paris">
<Property Name="COUNTRY">France</Property>
<Property Name="WWW" >http://france.fr</Property>
</Object>
<Object Id="id1" Name="Lion">
<Property Name="COUNTRY">France</Property>
<Property Name="WWW" >http://france.fr</Property>
</Object>
<Object Id="id3" Name="Berlin">
<Property Name="COUNTRY">Germany</Property>
<Property Name="WWW" >http://germany.gr</Property>
</Object>

</data>
</element>
</elements>
</page> 
```

有必要带上按名称排序的国家选择器并去掉重复项：

```
<select>
<option value="http://germany.gr">Germany</option>
<option value="france">France</option>
</select> 
```

也就是如果国家遇到几次，在value=中指定id。如果一次，则指定链接

说明分组如下：如果一个国家多次开会

代码：

```
<div id="france">
<p> <a href="/index.php?id=id1">Lion</a></p>
<p><a href="/index.php?id=id2">Paris</a></p>
</div> 
```

如果该国遇到一次-没有写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:10:53.273

使用 XSLT 1.0，您可以使用 Muechian 分组分别进行分组，以识别和消除重复；样式表

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html" indent="yes"/>

<xsl:key name="k1" match="data/Object" use="@Id"/>

<xsl:template match="data">
  <select>
    <xsl:apply-templates select="Object[generate-id() = generate-id(key('k1', @Id)[1])]"/>
  </select>
  <xsl:apply-templates select="Object[generate-id() = generate-id(key('k1', @Id)[1]) and key('k1', @Id)[2]]" mode="desc"/>
</xsl:template>

<xsl:template match="data/Object[key('k1', @Id)[2]]">
  <option value="{@Id}">
    <xsl:value-of select="Property[@Name = 'COUNTRY']"/>
  </option>
</xsl:template>

<xsl:template match="data/Object[not(key('k1', @Id)[2])]">
  <option value="{Property[@Name = 'WWW']}">
    <xsl:value-of select="Property[@Name = 'COUNTRY']"/>
  </option>
</xsl:template>

<xsl:template match="data/Object" mode="desc">
  <div id="city_{@Id}">
    <xsl:apply-templates select="key('k1', @Id)/Property[@Name = 'NAME']" mode="desc"/>
  </div>
</xsl:template>

<xsl:template match="data/Object/Property" mode="desc">
  <p>
    <xsl:value-of select="."/>
  </p>
</xsl:template>

</xsl:stylesheet> 
```

转换输入

```
<page>
<elements>
<element name="bids">
<data>

<Object Id="id1">
<Property Name="NAME" Order="0">Paris</Property>
<Property Name="COUNTRY">France</Property>
<Property Name="WWW" >http://france.fr</Property>
</Object>
<Object Id="id1">
<Property Name="NAME" Order="0">Lion</Property>
<Property Name="COUNTRY">France</Property>
<Property Name="WWW" >http://france.fr</Property>
</Object>
<Object Id="id2">
<Property Name="NAME" Order="0">Berlin</Property>
<Property Name="COUNTRY">Germany</Property>
<Property Name="WWW" >http://germany.gr</Property>
</Object>

</data>
</element>
</elements>
</page> 
```

进入

```
<select>
   <option value="id1">France</option>
   <option value="http://germany.gr">Germany</option></select><div id="city_id1">
   <p>Paris</p>
   <p>Lion</p>
</div> 
```

[编辑]

这是一个修改后的样式表，它使用不同的键来尝试实现更改的需求：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:strip-space elements="*"/>
<xsl:output method="html" indent="yes"/>

<xsl:key name="k1" match="data/Object" use="Property[@Name = 'COUNTRY']"/>

<xsl:template match="data[Object]">
  <select>
    <xsl:apply-templates select="Object[generate-id() = generate-id(key('k1', Property[@Name = 'COUNTRY'])[1])]"/>
  </select>
  <xsl:apply-templates select="Object[generate-id() = generate-id(key('k1', Property[@Name = 'COUNTRY'])[1]) and key('k1', Property[@Name = 'COUNTRY'])[2]]" mode="desc"/>
</xsl:template>

<xsl:template match="data/Object[key('k1', Property[@Name = 'COUNTRY'])[2]]">
  <option value="{Property[@Name = 'COUNTRY']}">
    <xsl:value-of select="Property[@Name = 'COUNTRY']"/>
  </option>
</xsl:template>

<xsl:template match="data/Object[not(key('k1', Property[@Name = 'COUNTRY'])[2])]">
  <option value="{Property[@Name = 'WWW']}">
    <xsl:value-of select="Property[@Name = 'COUNTRY']"/>
  </option>
</xsl:template>

<xsl:template match="data/Object" mode="desc">
  <div id="{Property[@Name = 'COUNTRY']}">
    <xsl:apply-templates select="key('k1', Property[@Name = 'COUNTRY'])" mode="link">
      <xsl:sort select="@Name"/>
    </xsl:apply-templates>
  </div>
</xsl:template>

<xsl:template match="data/Object" mode="link">
  <p>
    <a href="/index.php?id={@Id}">
      <xsl:value-of select="@Name"/>
    </a>
  </p>
</xsl:template>

</xsl:stylesheet> 
```

当我将该样式表应用于输入时

```
<?xml version="1.0" encoding="utf-8" ?> 
<page>
<elements>
<element>
<data>
<Styles Name="default">
<Style Url="/css.css" Browser="default" Version="default"/>
</Styles>
</data>
</element>
<element type="Digillect.WB.Web.Elements.Site.SiteStructureElement">
<config StartLevel="0" MaxDepth="3" UseItemVisibility="false">
<monikers>
<moniker store="asdasd"/>
</monikers>
</config>
<data ParentPath="/">
</data>
</element>

<element name="bids">
<config>
<Object Id="1b61995a-6e22-4b09-af5f-9a50cdaa7863"/>
<Object Id="baa1d3df-0510-4f68-8a41-1b9b22587134"/>
</config>
<data>

<Object Id="id2" Name="Paris">
<Property Name="COUNTRY">France</Property>
<Property Name="WWW" >http://france.fr</Property>
</Object>
<Object Id="id1" Name="Lion">
<Property Name="COUNTRY">France</Property>
<Property Name="WWW" >http://france.fr</Property>
</Object>
<Object Id="id3" Name="Berlin">
<Property Name="COUNTRY">Germany</Property>
<Property Name="WWW" >http://germany.gr</Property>
</Object>

</data>
</element>
</elements>
</page> 
```

结果是

```
<select>
   <option value="France">France</option>
   <option value="http://germany.gr">Germany</option></select><div id="France">
   <p><a href="/index.php?id=id1">Lion</a></p>
   <p><a href="/index.php?id=id2">Paris</a></p>
</div> 
```

所以`option`元素根据需要进行分组（尽管我无法弄清楚是什么决定了排序顺序）并且`p`元素包含包含`@Id`值的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:14:51.360

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kObjByCountry" match="Object" use="Property[@Name='COUNTRY']"/>

 <xsl:template match="/">
  <xsl:variable name="vCountries" select=
   "/*/*/*/data/Object
          [generate-id()
          = generate-id(key('kObjByCountry', Property[@Name='COUNTRY'])[1])
          ]"/>
  <select>
     <xsl:apply-templates select="$vCountries">
      <xsl:sort select="Property[@Name='COUNTRY']"/>
     </xsl:apply-templates>
    </select>

     <xsl:apply-templates select="$vCountries" mode="desc">
      <xsl:sort select="Property[@Name='COUNTRY']"/>
     </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Object">
   <xsl:variable name="v2nd"
        select="key('kObjByCountry', Property[@Name='COUNTRY'])[2]"/>
   <option value="{(@Id[$v2nd]|Property[@Name='WWW'])[1]}">
    <xsl:value-of select="Property[@Name='COUNTRY']"/>
   </option>
 </xsl:template>

 <xsl:template mode="desc" 
    match="Object[key('kObjByCountry', Property[@Name='COUNTRY'])[2]]">
   <div id="sity_{@Id}">
     <xsl:apply-templates select=
      "key('kObjByCountry', Property[@Name='COUNTRY'])
                                    /Property[@Name='NAME']">
        <xsl:sort/>
      </xsl:apply-templates>
   </div>
 </xsl:template>

 <xsl:template match="Property[@Name='NAME']">
  <p><xsl:value-of select="."/></p>
 </xsl:template>

  <xsl:template mode="desc"
    match="Object[not(key('kObjByCountry', Property[@Name='COUNTRY'])[2])]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<page>
    <elements>
        <element name="bids">
            <data>
                <Object Id="id1">
                    <Property Name="NAME" Order="0">Paris</Property>
                    <Property Name="COUNTRY">France</Property>
                    <Property Name="WWW" >http://france.fr</Property>
                </Object>
                <Object Id="id1">
                    <Property Name="NAME" Order="0">Lion</Property>
                    <Property Name="COUNTRY">France</Property>
                    <Property Name="WWW" >http://france.fr</Property>
                </Object>
                <Object Id="id2">
                    <Property Name="NAME" Order="0">Berlin</Property>
                    <Property Name="COUNTRY">Germany</Property>
                    <Property Name="WWW" >http://germany.gr</Property>
                </Object>
            </data>
        </element>
    </elements>
</page> 
```

**产生想要的、正确的结果——国家/城市在其中排序**：

```
<select>
   <option value="id1">France</option>
   <option value="http://germany.gr">Germany</option>
</select>
<div id="sity_id1">
   <p>Lion</p>
   <p>Paris</p>
</div> 
```

**说明**：

正确使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**和**[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)** s。

正确使用**[`xsl:sort`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-sort)**.

# c++ - C++ 我如何让这个向量函数接受任何分隔符

> ID：11922492
> 
> 赞同：-4
> 
> 时间：2012-08-12T13:20:23.043
> 
> 标签：c++

我有一个问题。

以前在我的问题之一。

位掩码编码为：

```
std::vector<std::string> split(std::string const& str, std::string const& delimiters = ":") {
  std::vector<std::string> tokens;

  // Skip delimiters at beginning.
  string::size_type lastPos = str.find_first_not_of(delimiters, 0);
  // Find first "non-delimiter".
  string::size_type pos = str.find_first_of(delimiters, lastPos);

  while (string::npos != pos || string::npos != lastPos) {
    // Found a token, add it to the vector.
    tokens.push_back(str.substr(lastPos, pos - lastPos));
    // Skip delimiters.  Note the "not_of"
    lastPos = str.find_first_not_of(delimiters, pos);
    // Find next "non-delimiter"
    pos = str.find_first_of(delimiters, lastPos);
  }
  return tokens;
}

std::vector<std::string> split(std::string const& str, char const delimiter) {
  return split(str,std::string(1,delimiter));
} 
```

我通过这种方法使用：

```
vector<string> x = split(receiveClient, '#'); 
```

但是，当我意识到分隔符固定为 # 时，在某个时间点，我需要使用“：”或其他分隔符来分割字符串，所以我的问题是，如何更改函数以便它可以接受我通过的分隔符在。

如

```
vector<string> x = split(receiveClient, ':'); 
```

我面临的一些问题是“分段核心转储错误”

不工作的版本

```
if(action=="auth")
{

 myfile.open("account.txt");
    while(!myfile.eof())
    {
        getline(myfile,sline);

    vector<string> check = split(sline, ':');

    logincheck = check[0] + ":" + check[3];
    cout << logincheck << endl;

    if (logincheck==actionvalue)
    {
    sendClient = "login done#Successfully Login.";
    break;
    }
    else
    {
    sendClient = "fail login#Invalid username/password.";
    }

    }
    myfile.close();

} 
```

运行上面的代码让我出错 - Segmentation Core Dump

这是我的 account.txt 文件

```
admin:PeterSmite:hr:password
cktang:TangCK:normal:password 
```

但是，如果我将代码更改为不使用矢量拆分的旧版本，则代码可以顺利运行。没有分段核心转储。不同的是上面使用向量将字符串 sline 拆分为向量，然后使用它分配给字符串 logincheck

工作版（无矢量分割）

```
if(action=="auth")
{

 myfile.open("account.txt");
    while(!myfile.eof())
    {
        getline(myfile,sline);
    //action value is in form of like demo:pass (user input)
    if (sline==actionvalue)
    {
    sendClient = "login done#Successfully Login.";
    break;
    }
    else
    {
    sendClient = "fail login#Invalid username/password.";
    }

    }
    myfile.close();

} 
```

我的问题是，我如何在没有分割核心转储的情况下分割它，以便使用向量分割的代码

```
 vector<string> check = split(sline, ':');

    logincheck = check[0] + ":" + check[3];
    cout << logincheck << endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:16:39.747

我只是说，你读错了文件。`eof()`仅在读取文件末尾后返回 true。您正在阅读的最后一行是空的（如果您记得在最后一个数据之后添加换行符，就像您应该的那样）。

并且您应该检查空字符串，这在 90% 中是写得不好的代码段错误的原因（在处理字符串时）。你应该开始使用调试器，比如 gdb 来找出问题所在，而不是仅仅发布整个代码。

# c++ - 使用 curl 下载文件时确定扩展名？

> ID：11922493
> 
> 赞同：1
> 
> 时间：2012-08-12T13:20:28.533
> 
> 标签：c++, curl

我创建了一个使用 curl 从 INTERNET 下载字幕的程序
如何知道我下载的文件的扩展名（.zip 或 .rar）？

这是我的代码（它是函数的一部分）

```
FILE* download=fopen("download.zip","wb");//i assume it's a zip
curl = curl_easy_init();
curl_easy_setopt(curl, CURLOPT_POST,1);
curl_easy_setopt(curl, CURLOPT_POSTFIELDS,post_data.c_str());
curl_easy_setopt(curl, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)");
curl_easy_setopt(curl, CURLOPT_URL,url.c_str());
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write2file);
curl_easy_setopt(curl, CURLOPT_WRITEDATA, download);
res = curl_easy_perform(curl);
if(res != CURLE_OK)
    std::cout<<"Download Failed "<<std::endl;
curl_easy_cleanup(curl);
fclose(download); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:26:19.333

您可以使用该[`curl_easy_getinfo()`](http://curl.haxx.se/libcurl/c/curl_easy_getinfo.html)功能，它具有内容类型信息：

> CURLINFO_CONTENT_TYPE
> 
> 将指针传递给 char 指针以接收下载对象的内容类型。这是从 Content-Type: 字段读取的值。如果你得到 NULL，这意味着服务器没有发送一个有效的 Content-Type 头或者使用的协议不支持这个。

使用这些信息，您可以通过在磁盘上重命名下载的文件来为其提供正确的扩展名。

# android - 在 View Pager 中成功滑动的默认最小距离是多少？

> ID：11922494
> 
> 赞同：4
> 
> 时间：2012-08-12T13:20:42.063
> 
> 标签：android, android-viewpager

我正在为我的论文做一个项目，我正在使用一个应用程序来分析滑动手势。有很多关于视图寻呼机的问题和信息，甚至是如何操作它的设置，但是直到现在，我还没有找到特定的默认值（手指向下和手指向上之间的距离）烘焙到寻呼机本身. 这对我来说非常有用，可以查看谷歌认为合适的值并将其与其他值进行比较。

帮助将不胜感激！:)

编辑：

好的，我自己找到了一些线索。这是 ViewPager 的代码：searchco.de/codesearch/view/10066260，并且有一个静态变量 namend MIN_DISTANCE_FOR_FLING，其值为 25（dip）。这个值乘以当前显示的密度，这是在 initViewPager() 中完成的。然后在确定目标页面中使用该值来检查用户是否滑动了比该值更大的距离。我没有得到什么：如果我将 25 乘以例如 160（作为示例密度），则值变得太大，所以我显然以某种方式错误地解释了代码。我真的很感激解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:27:14.097

总结一下，以防其他人需要这些信息（感谢@Luksprog）：

在 ViewPager 中成功滑动的最小阈值是 25dip 的非设备特定常量，通过将其乘以设备特定值（即设备显示的比例因子）来调整到当前设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-12T14:24:44.853

您需要在您的项目中导入 ViewPager.php（文件 -> 导入 -> 常规 -> 文件系统 -> 使用 path-to-SDK/extras/android/support/v4/src/）并在 initViewPager() 块中禁用 mTouchSlop 变量.

```
mTouchSlop = 0;//ViewConfigurationCompat.getScaledPagingTouchSlop(configuration); 
```

然后触摸拖动将立即工作。

# ios - 当触发时间可能发生变化时，如何使用要触发的自动计划动作？

> ID：11922496
> 
> 赞同：0
> 
> 时间：2012-08-12T13:21:27.407
> 
> 标签：ios, nstimer, nstimeinterval

在某个视图中，我希望在触发时间基于 NSTimeIntervals 数组（我将其保存为 NSArray 保存双值）时触发某个方法。

所以我有一个根据相关时间执行相关操作的方法，并且在这个方法中我调用相同的方法（递归）在下一个预定时间再次触发：

```
-(void) actionMethod:(int)someDataINeed {

    //do something and then...

    if (someDataINeed == someDefinitionIHaveToBreakTheLoop) {
        return;
    }

    double nextFire = [self aMethodThatCalculatesTheNextFiringTime];
    NSNumber * nextDataINeed = [NSNumber numberWithInt:someDataINeed+1];

    NSTimer * aTimer = [NSTimer scheduledTimerWithTimeInterval:nextFire 
                                        target:self 
                                        selector:@selector(actionMethod:)
                                        userInfo:nextDataINeed 
                                        repeats:NO];
} 
```

嗯......它不起作用（如果它起作用，我想我不会问它......）。当我 NSLog 它时，似乎时间根本没有运行，并且计时器在某种循环中被调用，而不是根据我定义的时间“被触发”。nextFire 双数据是正确的（根据我的定义）。

如果我错了，如果有人能指导我如何执行此类操作，我将不胜感激。

如果我做对了，但只是写错了，那么抓住我的“错误”的眼睛也会受到赞赏......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:13:54.650

我猜你正在使用ARC。您不会将计时器存储在强变量中，因此它会在触发之前被释放。创建一个 ivar“NSTimer * aTimer”，然后在实例化计时器时使用它而不是局部变量（我在这里胡扯，因为我不记得 runLoop 在计划时是否保留它 - 可能但为了完整性而将其留在这里，因为如果由于任何原因您被“弹出”等），您应该在计时器上调用无效）。

您的计时器也发送消息：actionMethod:(NSSTimer *) 本身，但您的操作方法需要一个 int。你需要调和这一点。

编辑：

将您的 actionMethod 更改为这种格式：

```
-(void)actionMethod:(id)something
{
  int foo = 0;
  if([something isKindOfClass:[NSNumber class]]) {
    foo = [foo intValue];
  } else
  if([something isKindOfClass:[NSTimer class]]) {
    foo = ... // however you get your value
  } else
     assert(!"Yikes! Wrong class");
  }
  ... 
```

然后你可以给它发送一个 NSNumber 或者让定时器用定时器调用它。您可以从 NSNumber 中取出 int，或者从计时器中获取值：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:33:24.977

### 这不是内存管理问题

当您安排 NSTimer 实例时，运行循环会保留计时器，因此无需担心自己保留它（ARC 与否）。

计时器还保留其目标，因此您不必担心首先释放目标的情况。但是，如果目标是一个视图，它可能会在从视图层次结构中删除后收到一条计时器消息。在这种情况下，您将希望忽略该消息。

您可以通过以下两种方式处理：

1.  在您的`actionMethod`中，请务必检查您是否仍要执行该操作。如果没有，请忽略该消息并清理所有内容。

2.  保留对计时器实例的引用，并`[timer invalidate]`在您不再希望接收计时器消息时调用。

如果您可以确定目标始终在附近，并且始终可以收到消息，则您无需执行任何操作。例如，您的应用程序委托对象将在您的应用程序的整个生命周期中存在。

### NSTimer 的目标动作

你不能设置一个定时器来调用任何对象的任何方法。timer 方法 *必须*只接受一个参数，即发送消息的 NSTimer 实例。您已经定义`actionMethod:`了一个`int`，它将实际编译和执行，但是当计时器触发并调用该方法时， 的值`someDataINeed`将是 NSTimer 对象的内存地址。这不是很有用。

您需要以这种方式定义您的方法：

```
- (void)actionMethod:(NSTimer *)timer 
```

要获取该`someDataINeed`值，您可以将其保存为计时器的 userInfo 中的 NSNumber。它的存在只是为了让您可以向计时器添加一些数据。

```
 NSNumber *number = [timer userInfo];
    int someDataINeed = [number intValue]; 
```

创建计时器时，您可以将其包装`nextDataINeed`成 NSNumber 并以这种方式设置 userInfo：

```
 currentTimer = [NSTimer scheduledTimerWithTimeInterval:nextFire 
                            target:self 
                            selector:@selector(actionMethod:)
                            userInfo:[NSNumber numberWithInt:nextDataINeed]
                            repeats:NO]; 
```

您需要使用 NSNumber 因为 userInfo 必须是一个对象。

### 可能的错误

如果应用上述方法不能解决问题，要检查的一件事`aMethodThatCalculatesTheNextFiringTime`是返回自*now*以来的时间间隔，而不是自参考日期以来的时间间隔。如果您希望计时器在三秒内触发，则 的值`nextFire`必须为`3.0`。如果你不小心打电话给`timeIntervalSinceReferenceDate`你，你会得到一个巨大的号码，并且计时器将被安排在几年后触发。

# php - 使用 PHP 获取 facebook 个人资料订阅者数量

> ID：11922498
> 
> 赞同：0
> 
> 时间：2012-08-12T13:21:31.507
> 
> 标签：php, facebook, function, count

> **可能重复：**
> [Facebook 个人资料订阅者计数](https://stackoverflow.com/questions/8945917/facebook-profile-subscriber-count)

有没有办法获得 Facebook 个人资料订阅者的数量，但没有任何访问令牌或类似的东西？例如，在我的 facebook 个人资料中，我有 500 个订阅者。我想用 PHP 返回这个数字，但没有任何访问令牌或类似的东西。这可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:41:25.627

如果没有至少具有`user_subscriptions`or`friends_subscriptions`权限的有效访问令牌，您将无法获得用户的订阅人数。

完成后，您可以使用以下代码获取用户的订阅人数：

```
<?php
$fburl = 'https://graph.facebook.com/USERNAME_OR_ID/subscribers/'
$fbac = 'ACCESS_TOKEN'
$result = json_decode( file_get_contents($fburl.'&access_token='.$fbac ) );
printf('You have %d subscribers', $result->summary->total_count ); 
```

# java - 获取网站的网络服务器

> ID：11922500
> 
> 赞同：0
> 
> 时间：2012-08-12T13:22:21.233
> 
> 标签：java, android, web, http-post

我已经接受了一个网站的任务，我正在为他们创建一个 android 应用程序。我是 android 编程新手，也是 web 编程新手（使用 xml、http post 和 get 等）。

我的怀疑是基本的。我正在尝试为该网站创建登录页面，但我不知道该网站的 url 是否足够，或者我需要一些其他数据，例如网站的服务器地址。如果我确实需要网络服务器地址，有没有办法从我的浏览器中获取？还是我要问那些为此制作网站的人？

PS如果这是一个非常基本的疑问，我深表歉意。忍受我。我是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:27:20.277

这取决于网站的结构。该网站是否有某种API？如果是这样使用它。否则，您必须将数据发布到通过浏览器发布数据的同一页面，并找到某种方法来捕获错误或成功。这种方法不是首选。也可能有某种中央身份验证服务器（例如 LDAP 或 AD）如果是这样，您将不得不直接与之交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:39:21.623

我不是 android 应用程序专家，但我认为您需要获取有关以下内容的详细信息：

1.  如何将身份验证详细信息传递给服务器，例如，如果您需要从任何 ID 服务器获取 SAML 令牌？或者它只是发送普通的用户名和密码。仅网站 url 可能还不够。

请查看针对 openID 或 SAML 技术进行身份验证的网络链接 [https://developers.google.com/accounts/docs/MobileApps](https://developers.google.com/accounts/docs/MobileApps)

# java - java无法连接到名称中带有下划线的数据库？

> ID：11922507
> 
> 赞同：0
> 
> 时间：2012-08-12T13:24:24.003
> 
> 标签：java, mysql, database

所以假设我有这个字符串作为我的 URL：
`final String DB_URL = "jdbc:mysql://localhost/test_0";`
然后我尝试运行这一行：
`conn = DriverManager.getConnection(DB_URL,USER,PASS);`

好吧，如果 URL 指向“test”数据库而不是“test_0”或“64_database”，它会起作用，但如果我尝试后面的名称，我会得到错误和东西。那么有没有办法让它处理一个带有下划线的 URL 呢？
还是它里面有数字的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:28:43.200

数据库名称中的下划线没有什么不好。数量上也没有。这不是您无法连接的问题。请发布堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:22:49.840

好吧，我是菜鸟，问题是我将服务器的端口从默认的 3306 更改为 3036，所以我将代码更改为：
`final String DB_URL="jdbc:mysql://localhost:3036/64_database";` 现在它可以工作了，奇怪的是在没有下划线的数据库上正在连接，我什至能够创建表，尽管我在 mysql 查询浏览器中找不到它们。

# c# - 高度定制的序列化

> ID：11922511
> 
> 赞同：0
> 
> 时间：2012-08-12T13:25:52.937
> 
> 标签：c#, .net, serialization, customization

我有一个我想序列化到内存缓冲区的对象，然后通过 UART 将其发送到嵌入式设备。我在 Windows 上的 C# 环境中工作。

我想做的是创建两个如下所示的类：

```
class StatusElement
{
    byte statusPart1;
    byte statusPart2;
}

class DeviceCommand
{
    byte Address;
    byte Length;
    StatusElement[] statusElements; // Can have an arbitrary number of elements in it
} 
```

我想使用序列化，最好是基于 c# 序列化的东西，将第二个类转换为字节流。

问题是嵌入式设备被硬编码以接受精确的序列（AddressByte、LengthByte .... ErrorCorrectionByte），所以我不能使用常规的 C# 序列化，它会在流中添加序列化元数据。这也排除了其他序列化，如 Protobuf。

所以我的问题是：是否可以自定义 c# 序列化以获得我需要的输出？如何？

- - 更新 - -

感谢大家的帮助。经过考虑，我决定使用反射和每个类型的处理程序来实现我自己的迷你序列化器。更复杂，但给了我更多的灵活性和自动化能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:41:26.450

使用 a`MemoryStream`手动序列化您的对象。

```
private byte[] Serialize()
{
    using (var ms = new MemoryStream())
    {
        ms.WriteByte(Address);
        ms.WriteByte(Length);
        foreach (var element in statusElements)
        {
            ms.WriteByte(element.statusPart1);
            ms.WriteByte(element.statusPart2);
        }
        return ms.ToArray();
    }
} 
```

同样对于反序列化：

```
private static DeviceCommand Deserialize(byte[] input)
{
    DeviceCommand result = new DeviceCommand();
    using (var ms = new MemoryStream(input))
    {
        result.Address = ms.ReadByte();
        result.Length = ms.ReadByte();

        //assuming .Length contains the number of statusElements:
        result.statusElemetns = new StatusElement[result.Length];
        for (int i = 0; i < result.Length; i++)
        {
            result.statusElements[i] = new StatusElement();
            result.statusElements[i].statusPart1 = ms.ReadByte();
            result.statusElements[i].statusPart2 = ms.ReadByte();
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:15:42.847

如果只需要写入字节或字节数组，可以直接使用 MemoryStream。如果您想使用其他 .NET 基本类型，请使用 System.IO.BinaryWriter / BinaryReader 访问您的 Stream。System.Runtime.Serialization.Formatters.Binary.BinaryFormatter 使用此类进行二进制序列化和反序列化。

# php - Magento，获取所有产品，不仅活跃

> ID：11922513
> 
> 赞同：1
> 
> 时间：2012-08-12T13:26:20.987
> 
> 标签：php, mysql, database, magento

我正在使用此代码从一个类别中获取所有 ID。

```
Mage::getResourceModel('catalog/product_collection')->setStoreId($storeid)->addCategoryFilter(Mage::getModel('catalog/category')->load($subcatid))->getAllIds(); 
```

但是，这只选择类别中活跃的产品，我需要所有产品，包括非活跃产品。

如何修改此代码以获取所有产品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T18:44:03.737

无论任何产品可见性或状态限制如何，将所有产品附加到特定类别的一种方法是……

```
$categoryId = 11;  //Replace with correct category id
$collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('*')  //Replace to select only the attributes required
    ->joinTable(
        'catalog/category_product',
        'product_id=entity_id',
        array(''),
        'category_id='.$categoryId ,
        'left'); 
```

# html - 保持整个网页的基本布局相同

> ID：11922514
> 
> 赞同：3
> 
> 时间：2012-08-12T13:26:34.900
> 
> 标签：html, css

我有一个网站，我在其中完成了基本布局、设计、字体、样式、css 等。

对于几乎整个网站，侧边栏、页脚、背景等布局将保持不变。还使用了自定义嵌入字体。

由于这个基本布局将在整个网站上保持不变，我想问我如何才能防止再次为用户下载这些内容（如侧边栏、字体或 javascript 等），以便之后的其他页面start 不需要与起始页一样多的时间。

我相信会有一些机制，因为大多数网站在页面之间都有页眉/页脚/侧边栏。我的网站是纯 html/css，并且没有使用后端。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:34:37.487

您的图像、字体、css 和其他内容很可能会在第一次点击时被客户端的浏览器缓存，因此只会下载一次。

对于html页面本身，由于您使用静态html内容，我能想到的唯一方法是使用AJAX请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:32:00.600

您可能想使用包含。因此，在每个页面上，您都会有一个页眉包含、一个页脚包含、一个侧边栏包含，甚至还有一个包含指向您的 css/js 文件的链接的包含。

最简单的方法是将您的页面更改为 .php 页面并使用 php 包含来拉入头文件、页脚文件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T13:33:12.323

您可以使用[Jekyll](http://jekyllrb.com/)等静态站点生成器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T13:37:38.230

您可以先设计一个基本布局。

*   避免`inline`和`embedded`CSS 最大值并添加一个`class`（可以分配给多个）或`id`（可以分配给单个）到常见的选择器。
*   制作一个主样式表`master.css`，并将其附加到每个页面。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T14:13:00.337

你可以通过两种方式做到这一点。您说您没有后端，但是托管您网站的服务器可以是后端。

**没有任何后端交互：** 如果你真的不想使用后端，你可以把它做成一个单页网站，用一些 javascript 来切换你在那里的内容。这个想法是你有你的网站结构，并且你的默认数据可以按照你通常正确的方式使用。但是您也有隐藏 div 中其他页面的 html。然后，当您想切换到关于链接时，您使用 javascript 从隐藏 div 中获取包含该内容的内容，并将该内容放在主 div 中。

```
 <!--First lets use jquery thought it can use some other framework-->
<script src="http://code.google.com/apis/ajaxlibs/documentation/index.html#jquery"></script>
<script>
    $('a[href=#myAboutPage]').on('click',function(){//Whenever link that points to #myAboutPage is clicked
         var getHTMLFROM = document.getElementById('myAboutPageHiddenContent').innerHTML;

         //And place it on main div
         document.getElementById('mainDivContent').innerHTML = getHTMLFROM
    });
</script> 
```

**如果您想使用一些 ajax 交互：** 除了 getHTMLFROM 内容实际上是您从服务器请求的 html 文件之外，该过程将是相同的。

这两种面向 javascript 的方法都可以使用，但如果您希望您的信息对 SEO 友好，则不建议这样做。话虽如此，重用一个外部 css，以最大限度地减少每次重新下载界面样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T16:07:06.183

肯定有很多方法可以做到这一点。我是动态包容的粉丝。这是一个很棒的教程的链接，它解释了如何非常简单地为您自己的页面设置它。[动态包含教程](http://inobscuro.com/tutorials/php-dynamic-includes-16/) **注意：**不要害怕 PHP，或者必须将文件扩展名更改为 PHP。它根本不会改变您的编码体验。它只会增强你的能力。

我还使用了 Javascript 功能来隐藏某些元素。根据您网站的大小，重新加载 CSS 和导航元素可能同样容易。但是，如果您真的不希望您的菜单和徽标在重新加载时瞬间闪烁，您可以使用一些 JS 非常简单地隐藏/显示元素。

这是我网站上的一个示例函数：

```
function toggleVisible(e){
var i = e.id;
if(e.className == 'collapsed')
{
    e.className = 'expanded';
    e.innerHTML = 'Hide'
    var hiddenArray = document.getElementsByClassName('hidden' + i);
    hiddenArray[0].setAttribute('class', 'expanded' + i);
}
else if (e.className == 'expanded')
{
    e.className = 'collapsed';
    e.innerHTML = 'Show More';
    var expandedArray = document.getElementsByClassName('expanded' + i);
    expandedArray[0].setAttribute('class', 'hidden' + i);
}

} 
```

单击以下链接时，将运行上述代码：

```
<a href="anywebsite.com">ANYWEBSITE.com</a>  ||  <a onClick="toggleVisible(this)" id="4" class="collapsed">Show More</a> || <a href="document.pdf">View PDF</a> 
```

此外，另一位用户提到了缓存。缓存似乎不可靠。查看以下链接了解更多信息：

*   [AJAX 缓存](http://www.w3schools.com/jsref/prop_meta_httpequiv.asp)
*   [HTML5 应用程序缓存](http://www.w3schools.com/html5/html5_app_cache.asp)
*   [2009 年有关来自 stackoverflow.com 问题的浏览器缓存的文章](https://stackoverflow.com/questions/460389/browser-caching-of-css-files)

# android - 如何将自定义 SurfaceView 添加到 XML 布局

> ID：11922516
> 
> 赞同：2
> 
> 时间：2012-08-12T13:26:50.477
> 
> 标签：android, surfaceview, android-xml

我尝试在 XML 中使用我自己的 SurfaceView，但我无法做到。我得到 NullPointerException。根据互联网，它应该如下所示：
活动：

```
package editor;

import android.app.Activity;
import android.os.Bundle;

import com.example.balls_menu_v1.R;

public class EditorActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editor);
    EditorView ev = (EditorView) findViewById(R.id.editorView);

}
} 
```

如果我发表评论`findViewById`，我会得到 NullPointerException。
表面视图：

```
package editor;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class EditorView extends SurfaceView {

    public EditorView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void onFinishInflate() {
        super.onFinishInflate();
        SurfaceHolder holder = getHolder();
        Canvas canvas = holder.lockCanvas();
        canvas.drawColor(Color.GREEN);
        holder.unlockCanvasAndPost(canvas);
    }
} 
```

布局：editor.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <editor.EditorView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/editorView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
    />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T14:09:54.873

我找到了答案：实现`SurfaceHolder.Callback`，添加 SurfaceView 的所有 3 个构造函数并添加`getHolder().addCallback(this);`到每个构造函数。
代码：

```
public class EditorView extends SurfaceView implements SurfaceHolder.Callback{

    public EditorView(Context context) {
        super(context);
        getHolder().addCallback(this);
        // TODO Auto-generated constructor stub
    }

    public EditorView(Context context, AttributeSet attrs) {
        super(context, attrs);
        getHolder().addCallback(this);
        // TODO Auto-generated constructor stub
    }

    public EditorView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        getHolder().addCallback(this);
        // TODO Auto-generated constructor stub
    }

    public void doDraw() {
        SurfaceHolder holder = getHolder();
        Canvas canvas = holder.lockCanvas();
        canvas.drawColor(Color.GREEN);
        holder.unlockCanvasAndPost(canvas);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {}

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        doDraw();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:13:01.657

你不能调用 Canvas canvas = holder.lockCanvas();`

在 oncreate 流程完成之前，

你应该在 oncreate 完成后调用它

# mysql - 在主键上使用 id 的坏习惯

> ID：11922519
> 
> 赞同：1
> 
> 时间：2012-08-12T13:27:07.150
> 
> 标签：mysql

我读过在主键上使用命名约定 id 是不好的做法。是不是这样。网上有人提到它在创建连接时可能会导致错误。其他人说过，只要您保持一致或可以-所以只要我一致，我就可以使用 id 来表示属性的 id 或 property_id 。

想知道你的想法/选项的人 1）property_id 或 id 可以作为主键，只要全面一致。2）应该使用property_id作为主键以避免在连接时出错 3）最好使用id-可以看到哪一侧是连接的主键，前缀id是不必要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:38:33.020

我觉得`id`还可以。反对它的唯一合法论点是在这样的情况下：

```
select * from foo, bar where id = 'blah'  # id is ambiguous 
```

通常，当您从多个表中进行选择时，无论如何您都应该限定每一列：

```
select * from foo, bar where foo.id = 'blah' # no ambiguity 
```

此外，我认为它比使用`model_id`主键更好，因为习惯上使用该语法作为外键。

# php - PHP/MYSQL : 动态 jquery 组灯箱图像

> ID：11922525
> 
> 赞同：-4
> 
> 时间：2012-08-12T13:27:57.647
> 
> 标签：php, jquery, mysql, smarty, adodb

单击按钮（静态图像）时，我有此 jquery 功能用于显示图像库。所以这对我来说 100% 有效：

```
<script type="text/javascript">
  jQuery(document).ready(function($){
    $("#gallery").click(function() {
      $.lightbox(["assets/4.jpg", "assets/3.jpg", "assets/6.jpg"]);
      return false;
    });
  });
</script> 
```

现在我有使用///的`PHP`动态图片库`MySQL`。`smarty``ADODB`

我的 PHP 代码是：

```
$aid        = intval($aid);
$sql            = "SELECT PID, caption FROM photos WHERE AID = " .$aid. " AND status = '1' LIMIT " .$limit;
$rs             = $conn->execute($sql);
$photos         = $rs->getrows();
$smarty->assign('photo', $photos);
// Other Smarty Engine Code 
```

我的 TPL smarty 是：

```
{if $photos}
{section name=i loop=$photos}
<img src="{$relative}/media/photos/tmb/{$photos[i].PID}.jpg" alt="{$photos[i].caption|escape:html}" width="160" height="120" id="album_photo_{$photos[i].PID}" />
{/section}
{/if} 
```

现在！我需要`function($lightbox(["dynamic.jpg","dynamic1.jpg","dynamic2.jpg"]);)`为动态 jquery 灯箱组生成/打印循环 img 地址到 jquery。

如何生成这个？！感谢您的任何想法和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:54:51.010

也许：

```
{if $photos}
$.lightbox(["{"\", \""|implode:$photos}"]);
{/if} 
```

# asp.net-mvc - 视图/控制器操作/路由/Gobal.asax

> ID：11922530
> 
> 赞同：1
> 
> 时间：2012-08-12T13:28:25.640
> 
> 标签：asp.net-mvc, asp.net-routing

我是 ASP.NET MVC 的新手，过去一年来自 Web 表单背景，最近我开始使用 MVC 3，并且有一些问题似乎没有很好的答案（目前我找不到）和想把它们贴在这里。任何帮助，将不胜感激。我的问题只关注控制器、控制器操作、视图和 global.asax。

1.  我了解与控制器中的视图、控制器和操作的关系。但是，在创建视图时，是否必须在 global.asax 中注册与创建的视图关联的每个操作？示例：当创建一个空项目时，global.asax 已经为 Home 控制器创建了一个默认路由，其中​​ Index 和 id 的操作是可选的。那么，如果我基于 Home 控制器创建另一个名为“AboutUs”的视图，我是否需要在 global.asax 中将其注册为 Home 控制器的一部分？

2.  在 global.asax 中路由的控制器/动作和注册方面是否存在一对一的关系？是否可以将多个控制器操作添加到以逗号分隔的同一语句中（例如在 global.asax 中使用示例 Home 控制器，然后将另一个操作添加到同一语句中，或者是否需要在外部添加新语句那？

3.  创建控制器/视图/路由时是否有“最佳实践”标准？

我之所以问这些问题，是因为我正在将一个 Web 表单站点转换为 MVC 3，但没有找到很多好的问题答案。期待任何和所有的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:41:44.857

Scott Gu在他的博客上发表了一篇关于 MVC 路由如何工作的[精彩文章](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)，您应该查看一下！

每个路由在 Global.asax 中都有一个匹配模式，但不一定是显式匹配。对于您的示例，如果您有一个名为“AboutUs”的视图，如果您有一个名为的控制器操作，它将由于模式匹配而工作：

```
 routes.MapRoute(
     "Default", // Route name
     "{controller}/{action}/{id}", // URL with parameters
     new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
 ); 
```

row:`"{controller}/{action}/{id}"`是路由引擎正在匹配的模式。它表示任何与上面匹配的 URL 路径都将被发送到正确的视图。对于您的示例，如果您要遵循 url: `Home/AboutUs`那么它将带您到 Home Controller，About us 视图，没有参数。

关于您的第二个问题，选择的控制器也是模式的一部分。如果您添加了第二个控制器，称为 Contact，然后添加了一个名为 email 的操作，则此 url 仍将遵循相同的模式： `Contact/Email`，因此您不需要添加额外的路由。

以下是其他一些关于 MVC 路由如何工作的精彩博客文章，它们将为您指明正确的方向。一个在[Asp.Net](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)、[一篇博](http://odetocode.com/blogs/scott/archive/2010/01/25/kiss-your-asp-net-mvc-routes.aspx)文和[MSDN上](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:57:33.927

1.  不，您不需要注册您在 Global.asax 中创建的每个视图。只要您遵循约定，路由就会解决这个问题（即为您定义的路由或您自己定义的路由，如果您采用此路径）

2.  不再。当您在控制器中创建新动作时，您通常需要为该动作创建一个视图以呈现它打算执行的操作（ajax/json 动作可以作为此规则的例外）。但同样，您不需要在 Global.asax 中注册任何内容。只要您遵循该全局文件中定义的路由约定。

3.  我会说它带有 MVC 的经验。一般来说，每个问题都有自己的解决方案，所以它取决于手头的任务，而不是一般的方法。但是，您可以从 MVC 3 为您定义的默认值开始：IE 重新定义路由和多个控制器，每个控制器具有多个操作。再次，遵循约定。

希望这可以帮助。

# ios - iOS：如何使用整数值对表格视图进行排序但想要显示字符串值？

> ID：11922531
> 
> 赞同：0
> 
> 时间：2012-08-12T13:28:26.453
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我有以下行来排序和划分我的表格视图。

```
NSSortDescriptor *sortDescriptorState = [[NSSortDescriptor alloc] initWithKey:@"positionSort" ascending:YES]; 
```

以上是一个整数值，通过它们各自的 positionSort 值对我的单元格进行排序。我还有下面的代码来显示部分名称；但是，这些部分仍然按字母顺序显示，而不是按 positionSort 顺序显示。我该如何纠正？

```
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"position" cacheName:@"Master"]; 
```

谢谢！

更新：感谢@MartinR，我能够得到答案。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];

    // Here I build up one of my Position objects using my unique position passed.
    // I had to cast the object as NSMutableString* to get rid of a warning
    Position * aPosition = [Position positionWithUniquePosition:(NSMutableString *)[[[sectionInfo objects] objectAtIndex: 0] position]
                                         inManagedObjectContext:self.managedObjectContext];

    // Once the above is done then I simply just accessed the attribute from my object
    return aPosition.positionDescription;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:06:37.957

从`initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:`文档中：

> sectionNameKeyPath
> 
> ...如果此键路径与 fetchRequest 中第一个排序描述符指定的不同，则它们必须生成相同的相对排序。例如， fetchRequest 中的第一个排序描述符可能会指定持久属性的键；sectionNameKeyPath 可能为从持久属性派生的瞬态属性指定一个键。

因此，您不能在排序描述符中使用“positionSort”，在 中使用“position” `sectionNameKeyPath`，因为排序数字和排序字符串不会生成相同的相对排序。

我将对两者都使用“positionSort”并进行更改`tableView:titleForHeaderInSection:`，以使其将职位名称作为部分标题而不是职位编号返回。

我自己没有尝试过，但这样的东西应该可以工作：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { 
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.controller sections] objectAtIndex:section];
    return [[[sectionInfo objects] objectAtIndex:0] position];
} 
```

# javascript - Django：随机函数调用导致管道中断

> ID：11922543
> 
> 赞同：2
> 
> 时间：2012-08-12T13:30:14.773
> 
> 标签：javascript, python, django, pipe, broken-pipe

我认为“document_delete”称为“is_draft owner”：

这是“is_draft_owner”：

```
def is_draft_owner(id = None, user = None):
    if id and user:
        return user.pk is Draft.objects.get(id = id).user_id
    else:
        return False

def document_delete(request):
    if is_draft_owner(request.POST['id'], request.user):
        draft = Draft.objects.get(id = request.POST['id'])
        draft.delete()
        return HttpResponse("done") 
```

这是页面的视图：

```
@login_required
def posting_draft(request):
    user = request.user
    user_drafts = Draft.objects.filter(user = user) # Order by date last oppened
    drafts = dict()
    for d in user_drafts:
        drafts[d.title] = d.id
    alertnum = get_alertnum(user)
    return render_to_response('Posting/Pages/posting_draft.html', {'STATIC_URL':STATIC_URL, 'draft_l' : drafts, 'selected':"dr", 'alertnum': alertnum}) 
```

不知何故，当我不调用“is_draft_owner”时，一切正常。当我调用它时，我得到了这个：

```
 [12/Aug/2012 00:53:45] "GET /posting/drafts HTTP/1.1" 200 2783
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 86, in run
    self.finish_response()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 127, in finish_response
    self.write(data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 210, in write
    self.send_headers()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 268, in send_headers
    self.send_preamble()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 192, in send_preamble
    'Date: %s\r\n' % format_date_time(time.time())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 324, in write
    self.flush()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 49948)
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/servers/basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
---------------------------------------- 
```

并且，以防万一，使用此代码的 javascript 文件：

```
function delete_draft(id, name) {
    var text = 'Are you sure you want to delete "' + name + '"?';
    var confirm = noty({
        text: text,
        layout: 'center',
        type: 'confirm',
        modal: true,
        buttons: [

        {addClass: 'btn btn-danger', text: 'Cancel', onClick: function($noty) {
            $noty.close();
        }
        },
            {addClass: 'btn btn-primary', text: 'Delete', onClick: function($noty) {
                $.post('/ajax/drafts/delete', {id:id}, function(data) {
                    document.location.reload(true);
                });
                document.location.reload(true);
            }
            }
    ]});
} 
```

我认为，但不知道，该页面正在调用删除文档，但随后在重新加载时中断。当我使用谷歌浏览器时，从日志中这似乎是有道理的（因为当我再次重新加载时，它已被删除），但对于 Firefox 来说似乎并非如此。我正在运行开发服务器，但这些问题仍然存在，我无法将它们关闭（有人说这是开发服务器的问题，但我什至不能在这样的情况下进行开发）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:16:41.703

我将对您的代码发表一些评论；但我认为您应该使用发送的确切错误来修改问题；正如我在评论中提到的。

我会编辑你的代码 - 希望评论就足够了：

```
# Here you mean to check for equality, `is` checks for identity
# Also, you want the return of the comparison; so you don't need
# an else.

def is_draft_owner(id = None, user = None):
    if id and user:
        return user.pk == Draft.objects.get(id = id).user_id

# You are POST-ing to this view, but
# you need to exempt it from csrf checks
# or edit your javascript to make sure it
# sends the csrf cookie.
def document_delete(request):
    if request.method == 'POST':
        if is_draft_owner(request.POST['id'], request.user):
            # Get raises an exception that you are not catching:
            try:
                 draft = Draft.objects.get(id = request.POST['id'])
            except Draft.DoesNotExist:
                 # Do something

            # OR you can do this
            draft = get_object_or_404(Draft,id=request.POST['id'])
            draft.delete()
            return HttpResponse("done")
    else:
         return HttpResponse('Not Allowed') 
```

# android - 以编程方式获取在android中运行的任务的快照

> ID：11922546
> 
> 赞同：0
> 
> 时间：2012-08-12T13:31:01.787
> 
> 标签：android

我想知道如何获取在后台运行的活动的快照，就像我们在最新的任务管理器中所拥有的一样。对此的任何意见都非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:42:06.207

您想要的方法`getRunningTasks`来自`ActivityManager`类。

[在这里](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)阅读。

从上面的链接：

```
public List<ActivityManager.RunningTaskInfo> getRunningTasks(int maxNum)

Return a list of the tasks that are currently running, with the most
recent being first and older ones after in order 
```

# objective-c - UIGestureRecognizer 导致“EXC_BAD_ACCESS”错误

> ID：11922548
> 
> 赞同：4
> 
> 时间：2012-08-12T13:31:14.630
> 
> 标签：objective-c, ios, uigesturerecognizer

使用附加到视图的 GestureRecognizer 会触发我的应用程序因**EXC_BAD_ACCESS**错误而崩溃。这是所涉及的课程

• **BoardViewController** - 显示在 AppDelegate 中设置为 rootViewController 的板（作为背景）。它实例化“TaskViewcontroller”的多个对象。

```
//BoardViewController.h
@interface BoardViewController : UIViewController {
    NSMutableArray* allTaskViews; //for storing taskViews to avoid having them autoreleased
} 
```

```
//BoardViewController.m - Rootviewcontroller, instantiating TaskViews    
- (void)viewDidLoad
{
    [super viewDidLoad];
    TaskViewController* taskA = [[TaskViewController alloc]init];
    [allTaskViews addObject:taskA];
    [[self view]addSubview:[taskA view]];
} 
```

• **TaskViewController** - 显示在板上的一个单独的框。它应该是可拖动的。因此，我将 UIPanGestureRecoginzer 附加到它的视图中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIPanGestureRecognizer* panRecognizer = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan:)];
    [[self view] addGestureRecognizer:panRecognizer];
}

- (void)handlePan:(UIPanGestureRecognizer *)recognizer {
    NSLog(@"PAN!");
} 
```

.xib 文件是一个简单的视图。

![在此处输入图像描述](../Images/2ebfb715736363ea8db7616d2c6ef849.png)

我更喜欢在代码中使用手势识别器进行所有编程。知道如何解决导致应用程序崩溃的错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T13:33:32.560

该方法`handlePan`在您的视图控制器上，而不是在您的视图上。您应该将目标设置为`self`：

```
UIPanGestureRecognizer* panRecognizer = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan:)]; 
```

**编辑**（响应问题的编辑）正如[omz](https://stackoverflow.com/users/573626/omz)正确指出的那样，您在'退出`TaskViewController`时被释放。有两种处理方法：`BoardViewController``viewDidLoad:`

*   将该方法折叠`handlePan`到父视图控制器中，连同`viewDidLoad:`, 或
*   为 制作一个实例变量`TaskViewController *taskA`，而不是使其成为局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:39:21.317

这是我使用手势识别器的方式。我认为这种方式很简单，风险也很低。

首先，您将 Gesture Recognizer 拖放到视图中。

![ss](../Images/03ba06fb96fe7a50348d2e9a16f1b0aa.png)

然后，将手势识别器图标连接到代码。

![ss](../Images/c8138e5e9cafdfdc455e22175ca2fbb6.png)

最后，您为此 IBAction 编写代码，如下所示：

```
- (IBAction)handlePan:(id)sender {
    NSLog(@"PAN!");
} 
```

您可以从 GitHub 下载此项目并运行它。

[https://github.com/weed/p120812_PanGesture](https://github.com/weed/p120812_PanGesture)

# entity-framework - 在 EF CodeFirst 中记录用户更改的历史记录

> ID：11922552
> 
> 赞同：1
> 
> 时间：2012-08-12T13:32:05.287
> 
> 标签：entity-framework, logging, ef-code-first

我想在数据库记录上保存用户更改的历史记录。编辑记录等更改（例如，用户 1 在 yyyy/dd/mm 中将 FirstName 字段的值从 'n' 更改为 'x'）、删除记录和...。

请建议一种在 EF codefirst 中实现此功能的方法。

**编辑后：**
哪个更好？
1.创建一张表保存所有表的日志
2.为数据库中的每张表创建一张表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:23:26.423

覆盖 SaveChanges 方法。

在 SaveChanges 方法中，使用 ObjectStateManager.GetObjectStateEntries 遍历条目

然后使用 ObjectStateEntry CurrentValues.DataRecordInfo.FieldMetadata[].FieldType.Name 和 entry.CurrentValues 获取名称值对

# c# - 如何使用 app.config 本身的 AppSettings

> ID：11922553
> 
> 赞同：0
> 
> 时间：2012-08-12T13:32:16.273
> 
> 标签：c#, configuration, app-config, appsettings

我在客户端有一个 wcf 配置。我需要在 AppSettings by `ServerIP`Name 中为 App.Config 中的其他部分使用一个键，而不是`localhost`，因为我的端点数量很多，而且我的服务器 ip 是可变的。我该怎么办？

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="ServerIP" value="localhost"/>
  </appSettings>

  <system.serviceModel>
    <bindings>
        ...
    </bindings>
    <client>

      <endpoint address="net.tcp://localhost:9000/WcfServices/Person/PersonService" 
        binding="netTcpBinding" bindingConfiguration="RCISPNetTcpBindingWpf"
        contract="Common.ServiceContract.IPersonService" name="BasicHttpBinding_IPersonService">
        <identity>
          <dns value="localhost" /> <!--How use ServerIP in appSettings instead of localhost-->
        </identity>
      </endpoint>           

    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:42:11.133

通常你不能这样做，但如果你使用 VisualStudio 2010，你也许可以使用[web.config 转换](http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx)。我认为你必须使用 web 部署，或者自己运行一个 MSBuild 任务来运行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:09:09.757

您不能在 app.config 本身中使用 appsettings。您有两种可能性：-通过代码使用 appsettings，例如制作我们的自定义部分 [http://haacked.com/archive/2007/03/12/custom-configuration-sections-in-3-easy-steps.aspx](http://haacked.com/archive/2007/03/12/custom-configuration-sections-in-3-easy-steps.aspx) -使用带有占位符的 nant build 或 msbuild [如何在 TransformXml 任务中使用 MSbuild 属性？](https://stackoverflow.com/questions/6958646/how-to-use-msbuild-property-in-transformxml-task)

# javascript - 错误：页面已被破坏，无法再使用

> ID：11922555
> 
> 赞同：5
> 
> 时间：2012-08-12T13:32:45.353
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我是第一次开发附加组件。它在状态栏中放置了一个小部件，显示未读谷歌阅读器项目的数量。为了适应这种情况，插件进程每分钟查询一次 Google Reader API 并将响应传递给小部件。当我运行时，`cfx test`我收到此错误：

> 错误：页面已被破坏，无法再使用。

我确保捕获小部件的`detach`事件并停止刷新计时器作为响应，但我仍然看到错误。我究竟做错了什么？以下是相关代码：

```
// main.js - Main entry point
const tabs = require('tabs');
const widgets = require('widget');
const data = require('self').data;
const timers = require("timers");
const Request = require("request").Request;

function refreshUnreadCount() {
    // Put in Google Reader API request
    Request({
        url: "https://www.google.com/reader/api/0/unread-count?output=json",
        onComplete: function(response) {
            // Ignore response if we encountered a 404 (e.g. user isn't logged in)
            // or a different HTTP error.
            // TODO: Can I make this work when third-party cookies are disabled?
            if (response.status == 200) {
                monitorWidget.postMessage(response.json);
            } else {
                monitorWidget.postMessage(null);
            }
        }
    }).get();
}

var monitorWidget = widgets.Widget({
    // Mandatory widget ID string
    id: "greader-monitor",

    // A required string description of the widget used for
    // accessibility, title bars, and error reporting.
    label: "GReader Monitor",
    contentURL: data.url("widget.html"),
    contentScriptFile: [data.url("jquery-1.7.2.min.js"), data.url("widget.js")],

    onClick: function() {
        // Open Google Reader when the widget is clicked.
        tabs.open("https://www.google.com/reader/view/");
    },

    onAttach: function(worker) {
        // If the widget's inner width changes, reflect that in the GUI
        worker.port.on("widthReported", function(newWidth) {
            worker.width = newWidth;
        });

        var refreshTimer = timers.setInterval(refreshUnreadCount, 60000);

        // If the monitor widget is destroyed, make sure the timer gets cancelled.
        worker.on("detach", function() {
            timers.clearInterval(refreshTimer);
        });

        refreshUnreadCount();
    }
}); 
```

* * *

```
// widget.js - Status bar widget script

// Every so often, we'll receive the updated item feed. It's our job
// to parse it.
self.on("message", function(json) {
    if (json == null) {
        $("span#counter").attr("class", "");
        $("span#counter").text("N/A");
    } else {
        var newTotal = 0;
        for (var item in json.unreadcounts) {
            newTotal += json.unreadcounts[item].count;
        }

        // Since the cumulative reading list count is a separate part of the
        // unread count info, we have to divide the total by 2.
        newTotal /= 2;
        $("span#counter").text(newTotal);

        // Update style
        if (newTotal > 0)
            $("span#counter").attr("class", "newitems");
        else
            $("span#counter").attr("class", "");
    }

    // Reports the current width of the widget
    self.port.emit("widthReported", $("div#widget").width());
}); 
```

**编辑**：我已经将整个项目上传到[这个 GitHub 存储库](https://github.com/pieterdd/GoogleReaderMonitor)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:55:22.867

我认为如果您使用该方法`monitorWidget.port.emit("widthReported", response.json);`，您可以触发该事件。这是与内容脚本和附加脚本进行通信的第二种方式。

*   [端口通讯参考](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html)
*   [与 postMessage 通信的参考](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-postmessage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:22:29.837

我刚刚在 irc 上看到了您的消息，感谢您报告您的问题。您在 SDK 中遇到了一些内部错误。我在这里打开了一个关于[此](http://blog.techno-barje.fr/)的错误。

您绝对应该保留您向小部件发送消息的第一个版本的代码，即`widget.postMessage`（而不是`worker.postMessage`）。然后我们将不得不修复我链接到的错误，以使您的代码正常工作！！

然后我建议您将 setInterval 移到顶层，否则您将触发多个间隔和请求，每个窗口一个。`attach`每个新的 firefox 窗口都会触发此事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:32:22.577

我想当你打电话时会出现这条`monitorWidget.postMessage()`消息`refreshUnreadCount()`。其明显的原因是：虽然您确保`refreshUnreadCount()`仅在工作人员仍处于活动状态时调用，但此函数将执行可能需要一段时间的异步请求。所以当这个请求完成时，worker 可能已经被销毁了。

一种解决方案是将工作者作为参数传递给`refreshUnreadCount()`. 然后，它可以添加自己的`detach`侦听器（在请求完成时将其删除），如果在执行请求时工作人员被分离，则忽略响应。

```
function refreshUnreadCount(worker) {
    var detached = false;
    function onDetach()
    {
        detached = true;
    }
    worker.on("detach", onDetach);

    Request({
        ...
        onComplete: function(response) {
            worker.removeListener("detach", onDetach);
            if (detached)
                return;  // Nothing to update with out data

            ...
        }
    }).get();
} 
```

再说一次，使用`try..catch`来检测这种情况并抑制错误可能会更简单 - 但不是一个干净的解决方案。

# azure - Azure Preview Portal 报错配置存储

> ID：11922557
> 
> 赞同：0
> 
> 时间：2012-08-12T13:32:49.140
> 
> 标签：azure, azure-storage

我正在尝试使用 Azure 预览版。当我尝试配置我的存储帐户时，我收到以下错误：

`Monitoring Failure: The server encountered an error while retrieving the metric selection. Retry the operation.`

从昨天开始就一直在发生这种情况。我在 ie10 和 Chrome 上都看到了错误。我尝试创建一个新的存储帐户并看到相同的错误。当我运行应用程序时，应用程序无法连接到存储帐户并出现以下错误（来自 node.js）：

```
`Config: C:\DWASFiles\Sites\mychild\VirtualDirectory0\site\wwwroot
Creating Blob Service profile
Creating Blob ...
Fail.{"code":"EACCES","errno":"EACCES","syscall":"connect"}` 
```

* * *

 `## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:00:03.797

由于您不是唯一一个看到这个[问题](https://stackoverflow.com/questions/11925453/the-server-encountered-an-error-while-retrieving-metrics-no-dashboard-metrics/11926777)的人（包括我自己），我认为这与您所做的没有任何关系。我怀疑这是微软遇到的普遍问题。如果您需要解决此问题，我建议您向 Azure 支持团队记录支持电话。`

# android - AndroidManifest.xml 无法在设备上运行，但可以正确编译

> ID：11922559
> 
> 赞同：0
> 
> 时间：2012-08-12T13:32:56.637
> 
> 标签：android, xml, manifest

我已经构建了一个 Android 应用程序`Unity3d`，使用`C#`. 我正在尝试集成 Inneractive (http://inner-active.com/) 广告，为了让它工作，我需要更改`Android Manifest.xml`，我对此一无所知，也无法通过谷歌找到答案。

当我编译我的应用程序时，XML 在 Unity 中没有返回错误，应用程序被推送到设备但无法运行......我试图合并 2`AndroidManifest.Xml`以让我的应用程序访问两者，我认为我没有这样做正确，据我所知，我不可能简单地拥有 2 `AndroidManifest.xml's`？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.unity3d.player"
    android:installLocation="preferExternal"
    android:versionCode="1"
    android:versionName="1.0">
    <supports-screens
        android:smallScreens="true"
        android:normalScreens="true"
        android:largeScreens="true"
        android:xlargeScreens="true"
        android:anyDensity="true"/>

    <application
        android:icon="@drawable/app_icon"
        android:label="@string/app_name"
        android:debuggable="true">
        <activity android:name="com.unity3d.player.UnityPlayerProxyActivity"
                  android:label="@string/app_name"
                  android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
        </activity>
        <activity android:name="com.unity3d.player.UnityPlayerActivity"
                  android:label="@string/app_name"
                  android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
        </activity>
        <activity android:name="com.unity3d.player.UnityPlayerNativeActivity"
                  android:label="@string/app_name"
                  android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
            <meta-data android:name="android.app.lib_name" android:value="unity" />
            <meta-data android:name="unityplayer.ForwardNativeEventsToDalvik" android:value="false" />
        </activity>
        <activity android:name="com.unity3d.player.VideoPlayer"
                  android:label="@string/app_name"
                  android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
        </activity>
        <activity android:name=".InneractivePluginActivity"
                  android:label="@string/app_name"
                  android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:09:19.843

您是否尝试过验证您的`AndroidManifest.xml`? 参考：[验证 AndroidManifest.xml 文件](https://stackoverflow.com/questions/10242929/validating-androidmanifest-xml-file)。

我会使用该`aapt`工具并查看您在编译应用程序时遇到的错误。这应该可以帮助您查明问题。

此外，检查 Manifest 中的不同标签和属性并验证它们是否存在于相应的 Android API 版本中可能会有所帮助，因为在较新版本的 Android 中添加了一些标签属性。

# .net - 访问 ControlTemplate 中的控件

> ID：11922561
> 
> 赞同：0
> 
> 时间：2012-08-12T13:33:07.470
> 
> 标签：.net, wpf, vb.net, controltemplate

我`ControlTemplate`在资源字典文件中定义了一个：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
 <ControlTemplate x:Key="ctlTemplate">
    <ControlTemplate.Resources>
        <StackPanel x:Key="sp" x:Name="sp">
                <TextBlock Name="tplTextBlock" HorizontalAlignment="Center"/>
                <DataGrid  Name="tableBlock" AutoGenerateColumns="False"/>
            </StackPanel>
    </ControlTemplate.Resources>
 </ControlTemplate>
</ResourceDictionary> 
```

我有一个派生自的类，`Thumb`我正在尝试将其`Template`属性设置为上述`ControlTemplate`：

```
Dim ct As ControlTemplate = CType(Application.Current.Resources("ctlTemplate"), ControlTemplate)
Dim tb As MovableTableBlock = New MovableTableBlock 'Derives from Thumb
tb.Template = ct
tb.UpdateLayout() 
```

问题是`Thumb`根本没有渲染。但是，如果我删除了`ControlTemplate.Resources`标签，结果也删除了 ,的`x:Key`属性。我设置属性的原因是因为我想访问和子项来分别设置文本和数据绑定。基本上我只想访问的孩子。我怎样才能访问它们？`StackPanel``Thumb``x:Key``StackPanel``TextBlock``DataGrid``StackPanel`

编辑：我已将其更改`ControlTemplate`为：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:VQ.Custom">
<Style TargetType="{x:Type local:MovableTableBlock}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MovableTableBlock}">
                <StackPanel x:Name="sp">
                    <TextBlock x:Name="tplTextBlock" HorizontalAlignment="Center"/>
                    <DataGrid  x:Name="tableBlock" AutoGenerateColumns="False"/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
</ResourceDictionary> 
```

所以现在，我不必像这样设置模板：

```
tb.Template = ct 
```

现在`Thumb`渲染了，但我仍然无法按照[这里](http://msdn.microsoft.com/en-us/library/bb613586.aspx)的建议访问内部控件。出于某种原因，`tb.Template`当`Nothing`我这样做时：

```
Dim txtBlock As TextBlock = CType(tb.Template.FindName("tplTextBlock", tb), TextBlock) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:59:48.813

您可以使用隐式样式来设置模板：

```
 <Application x:Class="WpfApplication1.App"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:local="clr-namespace:WpfCustomControlLibrary2;assembly=WpfCustomControlLibrary2"
                 StartupUri="MainWindow.xaml">
        <Application.Resources>
            <Style TargetType="local:MovableTableBlock">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="local:MovableTableBlock">
                            <StackPanel x:Name="sp">
                                <TextBlock Name="tplTextBlock" HorizontalAlignment="Center"/>
                                <DataGrid  Name="tableBlock" AutoGenerateColumns="False"/>
                            </StackPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Application.Resources>
    </Application>

    // No need to set Template or Style on MovableTableBlock, as it's done implicitly
    MovableTableBlock mtb = new MovableTableBlock();
    mtb.UpdateLayout(); // pointless to do...as not in visual tree yet

    .....your mtb needs to be added to the visual tree e.g. add as child of
    Grid or other element, so the style and template can be applied....your
    OnApplyTemplate won't be called till then.

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        TextBlock tb = Template.FindName("tplTextBlock", this) as TextBlock;
    } 
```

我已经尝试了上面的代码，它可以使用上面的方法访问模板中的 TextBlock。

您尝试更改模板的方式有点不合常规......下面有一些关于如何组织自定义控件的建议。

* * *

当您编写自定义控件时，您“期望”某些命名元素出现在模板中，那么约定将它们命名为“部件”并在自定义控件类上使用 [TemplatePart] 属性。这是为了让重新设计控件模板的人知道哪些部分对于重新设计的模板至关重要。

您还提到您正在访问 TextBlock 和 DataGrid，以便您可以设置文本和 DataBinding。

而不是这样做，考虑在您的自定义控件上公开一些属性......然后您的模板使用“ `{TemplateBinding ...}`”或“ `{Binding ...RelativeSource={RelativeSource TemplatedParent} ...}`”绑定到这些属性。

此外，通过从资源中查找模板并将其设置在后面的代码中，您将模板设置到自定义控件中的方式是非常规的......您应该让默认样式拾取它。

以下是一些有助于解释的链接：

*   [http://wpftutorial.net/HowToCreateACustomControl.html](http://wpftutorial.net/HowToCreateACustomControl.html)

*   [http://xamlcoder.com/cs/blogs/joe/archive/2007/12/13/building-custom-template-able-wpf-controls.aspx](http://xamlcoder.com/cs/blogs/joe/archive/2007/12/13/building-custom-template-able-wpf-controls.aspx)

# jquery - 在最初加载时隐藏 div 的层次结构

> ID：11922566
> 
> 赞同：0
> 
> 时间：2012-08-12T13:33:38.523
> 
> 标签：jquery, css, html

我正在尝试修改/优化[此模板](http://artboard.mdnw.net/galleries/)。除其他问题外，它首先加载与底部缩略图滚动条相关的所有 div 和图像。**然后**隐藏滚动条。至少在我的电脑上，这会产生令人不快的影响，即在隐藏它们之前向查看者显示所有 div。如果您想扫描代码，发生的事情是它为每个缩略图创建了大约 20 个 div，然后调用

```
$("#thumbnails_wrapper").stop().delay(2000).fadeTo("fast", 0); 
```

有人可以建议一种相当轻松的方法来在加载之前最初隐藏所有元素吗？我尝试使用该`hidden/visible`属性，但我感觉并没有通过 div 的所有元素向下级联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:36:00.333

也许只是为了在你的 CSS 中的 #thumbnails_wrapper 上显示：无？然后在需要时使用 JS 调用它？

在您的 CSS 文件中：

```
#thumbnails_wrapper {
 display:none;
} 
```

在您的 javascript 文件中（显然仅在需要时调用，因此您可以在函数中使用它）：

```
jQuery("#thumbnails_wrapper").show(); 
```

或者在一个函数中：

```
function showThumbs()
{
    jQuery("#thumbnails_wrapper").show();
} 
```

# ruby-on-rails - 从下拉菜单 Rails 发布到数据库

> ID：11922567
> 
> 赞同：0
> 
> 时间：2012-08-12T13:33:41.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我创建了一个下拉菜单，它从两个数据库表（名为城市和国家）中提取城市和国家。

我正在使用以下 collection_select 标签：

```
 <section class="field">     
      <%= f.label :city %>
      <%= f.collection_select(:id, Citie.all, :id, :city) %>
    </section> 
```

但是当我提交表单时，没有任何内容被发布到我的工作表中（该表单是为了生成新工作）。

我已经为此寻找解决方案，并且确定我只是遗漏了一小部分，但似乎无法弄清楚它是什么以及为什么它不起作用。

任何建议和解决方案将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:43:28.883

我对 collection_select 不是很熟悉，但您不应该将关联名称作为第一个参数吗？例如

```
<%= f.collection_select(:city, Citie.all, :id, :city) %> 
```

# linux - 如何将 FFTW 库连接到软件？

> ID：11922568
> 
> 赞同：1
> 
> 时间：2012-08-12T13:33:53.227
> 
> 标签：linux, dll, centos, maya, fftw

我已将 FFTW 库 (http://www.fftw.org/) 连接到我在 C++ 中创建的自定义 mentalray DLL（我在 Linux (CENTOS) 上使用 netbeans 编译的 DLL 文件。我将此 DLL 放入软件中（Autodesk Maya）在用于添加自定义插件的文件夹中。问题是我已经在计算机上安装了 FFTW，但我不知道如何将 Maya 链接到 FFTW 库。在 Windows 上，我会将 FFTW dll 放在包含 Maya 的文件夹中.exe 文件是应用程序启动 exe 文件。
基本上我对普通 LINUX 程序员的问题是，如果我在 linux 上安装 FFTW 库并为链接到它的软件创建一个 .dll，我如何让软件链接到FFTW 图书馆？如果您需要我提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:51:28.080

确保编译正确的版本：fftw 浮点数（即 fftwf）与 fftw 双精度数。例如，您应该有一个`libfftw3f.3.so`文件。

如果您使用`dlopen`在 fftw 中调用函数，请将`.so`您生成的文件放在`$PATH`.

如果mental ray“DLL”是一个静态库，你应该配置fftw`--enable-static --disable-shared`并运行`sudo make install`.

如果mental ray“DLL”是一个动态库，你应该配置fftw`--disable-static --enable-shared`并运行`sudo make install`.

为了安全起见，你可以同时做这两个。

`sudo make install`只要您的mental ray“DLL”按照惯例使用fftw（即导入`fftw.h`文件），就会将fftw“DLL”放置在正确的位置。

当您尝试构建“DLL”时检查链接器错误。如果您看到链接器错误，则说明您忽略了运行`sudo make install`，并且无论您使用 fftw 做什么，您的 DLL 都无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:04:25.777

您不需要做任何特别的事情——只要 FFTW 库位于预期的位置 ( `/usr/local/lib`)，那么您就可以正常链接到 then ( `gcc ... -lfftw3 ...`)。

# java - 我的 JDBC 连接可能有问题？

> ID：11922572
> 
> 赞同：0
> 
> 时间：2012-08-12T13:34:37.767
> 
> 标签：java, mysql, jakarta-ee, jdbc

我有以下Java类：

```
package web;
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import java.sql.*;

public class HelloWorld extends HttpServlet {
 public void doPost(HttpServletRequest request,HttpServletResponse response)throws   IOException, ServletException {
   response.setContentType("text/html");
   PrintWriter out = response.getWriter();
   out.println("Student Name<br>");

 try{  
   Connection conn=null;
       String url = "jdbc:mysql://localhost/test";
       PreparedStatement pre=null;

       Class.forName("com.mysql.jdbc.Driver").newInstance();
       conn=DriverManager.getConnection(url,"root","3324911");
       out.println("Database connected");
       pre = conn.prepareStatement("Insert INTO countries(COUNTRY,COUNTRY_ISO_CODE,REGION) VALUES (?,?,?)");
       pre.setString(1,"USA");
       pre.setString(2,"US");
       pre.setString(3,"North America");
       pre.executeUpdate();

   }catch (Exception e){//Catch exception if any
       System.err.println("Error: " + e.getMessage());
  }
 }
} 
```

不管什么原因，我在Tomcat中部署这个类后，程序只能到行

```
 Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

上线后会失败：

```
 conn=DriverManager.getConnection(url,"root","3324911"); 
```

这个 try/catch 块作为一个单独的方法工作，我从另一个类的 main 方法中获取它，它工作正常。

当我在 Tomcat 中插入这个 try/catch 块时，我不确定我在哪里搞砸了。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:42:11.860

JDBC驱动是在路径中配置还是复制到lib目录（即$CATALINA_HOME/lib或web-inf/lib）？

此外，如果您使用连接池会更好 - tomcat 附带一个比生成您自己的数据库连接更好的方法。

此外，如果您清理与数据库相关的资源可能会更好（除非您为了简单起见将其从上面的代码中省略）。

希望这可以帮助。

是的，我同意其他响应者的观点——获取更详细的错误日志记录可能是首选途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:39:41.107

不要使用 System.err.println，而是使用 e.printStackTrace()。由于错误流被缓冲，它可能没有机会被刷新。使用 printStacktrace 将保证您看到异常详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:04:14.547

也许你可以去tomcat日志文件夹，寻找stand-err日志文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T04:39:06.877

请更改您的代码；

```
 Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

到

```
 Class.forName("com.mysql.jdbc.Driver"); 
```

# iphone - 使用 stringWithContentsOfUrl 时，我在 html 源代码中丢失了 %

> ID：11922574
> 
> 赞同：0
> 
> 时间：2012-08-12T13:35:33.800
> 
> 标签：iphone, html, objective-c, xcode, nsstring

```
NSString *htmlSource = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:0x80000000 + kCFStringEncodingDOSKorean error:nil];
 NSLog(htmlSource); 
```

我得到像 (col width="16"/)~~~ 这样的 html 结果标签，但真正的 html 标签是 (col width="16%"/)

% 字符消失。什么是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:53:58.180

该字符串可能仍包含一个`%`; `NSLog()` *本身*赋予符号特殊的意义（考虑使用,等`%`会发生什么）。`%@``%d`

尝试这样做：`NSLog(@"%@", htmlSource)`; 这将只记录一个对象（字符串）并将其排除在格式化参数之外。

# c++ - Visual Studio：C++ 换行常量错误

> ID：11922575
> 
> 赞同：7
> 
> 时间：2012-08-12T13:35:34.847
> 
> 标签：c++, visual-studio-2010, qt

在 Qt 项目（带有 Qt 插件）上使用 Visual Studio，似乎总是抛出错误消息：

```
error C2001: newline in constant 
```

从以下行：

```
this->setApplicationVersion(QString(BUILD_VERSION)); 
```

或者每当我使用 QMake 文件中定义的编译器常量时。BUILD_VERSION 在我的 QMake 构建配方中定义，如果我使用不同的 IDE，编译项目会成功（即使我使用相同的 MSVC 编译器，一切正常）。

我想我要么在 Qt 插件中或在 Visual Studio 中缺少首选项，要么我需要在我的 QMake 文件等之外重新定义我的常量......

该常量由 Intellisense 定义和拾取为：

```
#define BUILD_VERSION \"0.1.0\" 
```

发现问题在于转义常量中的引号，在 Visual Studio 中这不起作用，但它可以与 Mingw 和命令行上的 MSVC 编译器一起使用。使用 Visual Studio 定义没有转义的常量：

```
#define BUILD_VERSION "0.1.0" 
```

问题是在 QMake 文件中定义常量，我需要像这样转义：

```
#define BUILD_VERSION \\\"0.1.0\\\" 
```

有没有办法在 QMake 文件中定义它们并让它们与 Visual Studio 一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:36:43.390

考虑写作

```
this->setApplicationVersion( QString( TO_STRING( BUILD_VERSION ) ) ); 
```

where`TO_STRING`将某事转换为字符串：

```
#include <iostream>
using namespace std;

#define TO_STRING_AUX( x )  #x
#define TO_STRING( x )      TO_STRING_AUX( x )

#define BUILD_VERSION 0.1.0

int main()
{
    cout << TO_STRING( BUILD_VERSION ) << endl;
} 
```

我没有 QMake，但我认为问题在于 QMake 执行类似`TO_STRING`操作，然后自己也这样做，正如我首先指出的那样，这是一个通用解决方案。

* * *

**编辑：** @sixones 在后续评论中询问，

> 这是使用 TO_STRING 引发的警告；警告 C4003：宏“TO_STRING_AUX”的实际参数不足，有什么解决办法吗？

问题显然是作为参数传递的宏被定义为空（不是未定义，而是定义为空）。

一种解决方案是使用 C99/C++11*可变参数宏定义*，如下所示：

```
#define TO_STRING_AUX( ... )    "" #__VA_ARGS__
#define TO_STRING( x )          TO_STRING_AUX( x ) 
```

# knockout.js - 简单的淘汰赛示例代码在 jsfiddle 上不起作用

> ID：11922576
> 
> 赞同：1
> 
> 时间：2012-08-12T13:35:45.223
> 
> 标签：knockout.js, jsfiddle

我是淘汰赛和使用 jsfiddle 的新手。请让我知道为什么这个示例代码不能在 jsfiddle 上运行。

[jsfiddle 示例](http://jsfiddle.net/qdzip/vwy7B/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:37:43.387

您没有有效的 javascript 代码，因此淘汰赛无法发挥其魔力。此外，您还遗漏了一些使其发挥作用的关键因素。

由于您要绑定到该属性，因此如果您希望能够看到更改`name`，则必须将其设置为。`observable`

```
name: ko.observable("knockout"), 
```

作为一个 observable，你必须用你的新值“调用”它来改变它。您在`changeName()`函数中拥有的只是无效的语句（您在函数的主体中，而不是在对象文字中）。

```
changeName: function () {
    this.name("jsfiddle");
} 
```

有了这些更改，它现在应该可以工作了。

[http://jsfiddle.net/vwy7B/12/](http://jsfiddle.net/vwy7B/12/)

# iphone - 使用 UIWebview 播放嵌入的 YouTube 视频

> ID：11922579
> 
> 赞同：0
> 
> 时间：2012-08-12T13:36:07.213
> 
> 标签：iphone, uiwebview, youtube

在 UIWebview 中嵌入 Youtube 视频。当按下 UIButton 时，我如何使用 UIWebview 播放这个你的视频。

```
- (void)viewDidLoad
 {
CGRect rect = [[UIScreen mainScreen] bounds];
CGSize screenSize = rect.size;

UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(0,0,screenSize.width,screenSize.height)];
webView.autoresizesSubviews = YES;
webView.autoresizingMask=(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);

NSString *videoUrl = @"http://http://www.youtube.com/v/oHg5SJYRHA0";
NSString *htmlString = [NSString stringWithFormat:@"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head><body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"320\" height=\"480\"><param name=\"movie\" value=\"%@\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"%@\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"320\" height=\"480\"></embed></object></div></body></html>",videoUrl,videoUrl]    ;

[webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com"]];

//[window addSubview:webView];
[webView release]; 

[super viewDidLoad];
// Do any additional setup after loading the view.
} 
```

当用户按下此 UIButton 时，它应该开始播放嵌入的 youtube 视频

```
UIButton *videoButton = [UIButton buttonWithType:UIButtonTypeCustom];
 [videoButton addTarget:self action:@selector(VideoAction:) forControlEvents:UIControlEventTouchUpInside];
videoButton.frame = CGRectMake(0, 0, 40, 40);
UIImage *icn = [UIImage imageNamed:@"Video_icon.png"];
[videoButton setImage:icn forState:UIControlStateNormal];
UIBarButtonItem *video = [[UIBarButtonItem alloc] initWithCustomView:videoButton]; 
```

我如何播放 youtube 视频。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:37:58.443

你为什么不试试这个：

```
 [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=oHg5SJYRHA0"]]]
            [self.view addSubview:webView]; 
```

# objective-c - 'if' 语句是否总是评估所有条件？

> ID：11922580
> 
> 赞同：0
> 
> 时间：2012-08-12T13:36:11.387
> 
> 标签：objective-c, cocoa, if-statement

> **可能重复：**
> [Objective-C 是否使用短路评估？](https://stackoverflow.com/questions/2060741/does-objective-c-use-short-circuit-evaluation)

如果一个对象属于某种类型，并且该对象的某个属性具有某个值，我想做一些事情。

我可以用吗：

```
if (objectIsOfType:x && object.property == y) 
```

还是我需要嵌套这些？假设如果对象不是 x 类型，则请求 object.property 将出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:37:57.050

不。Objective C（与 C 和许多其他语言一样）使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:08:52.993

Objective-C 支持短路评估（从左到右）。但无论如何，您需要在 nil 上检查对象 :))

# perl - Ncurses 使用 Perl 转义

> ID：11922581
> 
> 赞同：0
> 
> 时间：2012-08-12T13:36:14.287
> 
> 标签：perl, ansi, curses

编写 Perl 代码。我知道我可以使用 Term::ANSIColor 并做

```
print color('red') . 'hello world'; 
```

但是，在这种情况下，我正在使用一个 curses 库，我想创建一个标签，其中一些单词是红色的，一些是黄色的，等等。我可以操作的是一个字符串，我将把它传递给库用于渲染。如果我做

```
$string = color('red') . 'hello world' . color('yellow') . ' another word'; 
```

然后当我将 $string 传递给库进行打印时，它会逐字打印 ANSI 转义序列。有没有办法做我想做的事情，或者我必须用 attron() 和朋友手动管理标签的绘制？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:12:03.583

我在 Windows 上，它本身不支持 ANSI 颜色编码。您必须使用 Win32::Console::ANSI。没有它，以下代码将执行您的系统正在执行的操作。有了它，颜色就产生了。所以你要么在 Windows 上，要么你的终端不支持 ANSI 颜色。如果您在 Windows 上，只需添加 Win32 模块。

```
use strict;
use warnings;

use Win32::Console::ANSI;
use Term::ANSIColor;

my $string = color('red') . 'hello world' . color('yellow') . ' another word';
print $string;

exit 0; 
```

# python - Python 和正则表达式 - 如何找到 anytext_NUMBER_svm.pkl

> ID：11922584
> 
> 赞同：0
> 
> 时间：2012-08-12T13:37:27.287
> 
> 标签：python, regex

我有这种格式的文件名：

```
anytext_NUMBER_svm.pkl 
```

我需要遍历目录中的所有文件和看起来像这样的文件：

```
file1.txt
file2.txt
anytext_1_svm.pkl
anytext_2_svm.pkl
anytext_3_svm.pkl 
```

匹配的文件将是这样的：

```
anytext_1_svm.pkl
anytext_2_svm.pkl
anytext_3_svm.pkl 
```

如何使用 python 正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:02:14.310

一个选项：

*   不使用`re`
*   确保比较仅在文件名部分 - 而不是路径的一部分
*   限制文件名模式的数量以进一步验证使用`iglob`

代码：

```
from glob import iglob
import os.path
for fname in iglob('*_*_svm.pkl'):
    path, name = os.path.split(fname)
    anytext, digit, rest = name.split('_', 2) 
    if digit.isdigit(): # add criteria for anytext if required...
        # .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T13:47:36.623

这个正则表达式应该解决你的问题：

```
>>> import re
>>> regex = re.compile(r'.+_\d+_svm\.pkl')
>>> regex.search('anytext_1_svm.pkl') != None
True 
```

但你绝对应该看看文档：[http ://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T13:47:16.080

捕获“anytext_NUMBER_svm.pkl”的正则表达式非常简单。

```
r'.+_\d+_svm\.pkl' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T13:47:19.393

我建议对该页面进行审查：http: [//docs.python.org/py3k/library/re.html#module-re](http://docs.python.org/py3k/library/re.html#module-re)

它将帮助您了解如何编写正则表达式并确保您正确匹配事物。对于数字，使用 [0-9]*，使用 _ 分隔您的组，并编写一些匹配检查条件的东西，这将是一个快速的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T13:50:08.493

```
import glob
file_list = glob.glob('anytext_[0-9]_svm.pk1') 
```

# xcode - 不要在运行时显示 Xcode 导航器

> ID：11922589
> 
> 赞同：0
> 
> 时间：2012-08-12T13:38:15.187
> 
> 标签：xcode

我有一个用于在 iOS 上开发的 Xcode 的双头设置，每个屏幕上都有一个拆分窗格编辑器和对应的助手。当我运行一个项目时，它会丢弃它并使用调试导航器和控制台占据我的（活动）屏幕的一半——有没有办法让 Xcode在运行时*不*显示它们？或者，更好的是，总是在特定屏幕上显示它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:42:49.563

首选项-> 行为。“运行：生成输出”的默认行为是切换到调试器视图并显示控制台 - 将其关闭或将其配置为执行其他操作。

# actionscript-3 - 1120：访问未定义的属性

> ID：11922591
> 
> 赞同：1
> 
> 时间：2012-08-12T13:38:26.967
> 
> 标签：actionscript-3, apache-flex, actionscript, mxml

为什么我`1120: Access of undefined property arrMonth.`在线路上遇到错误`arrMonth.push`以及如何纠正它？

```
<fx:Script>
    <![CDATA[
        [Bindable]
        public var arrMonth:Array = new Array();

        arrMonth.push({label: "January"});
    ]]>
</fx:Script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T15:02:01.573

该错误的原因是您的逻辑（`push`语句）不在方法内部，因此它被认为是在类级别（即静态）而不是在实例级别。

这意味着有**两种方法可以修复它**：

1/ 也将变量设为静态（我怀疑这不是您想要的，但它会修复错误）。

```
<fx:Script>
<![CDATA[
    public static var arrMonth:Array = new Array();

    arrMonth.push({label: "January"});
]]>
</fx:Script> 
```

2/ 将逻辑放入方法中，例如：

```
<fx:Script>
<![CDATA[
    [Bindable]
    public var arrMonth:Array = new Array();

    override protected function initializationComplete():void {
        super.initializationComplete();
        arrMonth.push({label: "January"});
    }
]]>
</fx:Script> 
```

# scala - 如何在 REPL 中显示函数签名

> ID：11922594
> 
> 赞同：0
> 
> 时间：2012-08-12T13:38:36.817
> 
> 标签：scala

当我在 Scala REPL 中定义一个函数时，我可以看到创建的函数的类型，如下所示：

```
scala> def testing(a: Int) = a + 1
testing: (a: Int)Int 
```

`testing: (a:Int)Int`当我不在 REPL 中时如何查看函数？比如说，我想知道库在运行时使用的函数类型，这样我就可以使用相同的类型。

之前谢谢。

# mysql - 如果存在具有匹配名称的数据库，如何创建值为 +1 的 MySQL 数据库？

> ID：11922595
> 
> 赞同：0
> 
> 时间：2012-08-12T13:38:39.797
> 
> 标签：mysql, bash, ssh, cpanel

我正在编写一个 bash 脚本，需要一些帮助，这就是我目前所拥有的。

```
mysql -e "create database if not exists ${UN}_${SQLBASE}"
mysql -Be "GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, CREATE ROUTINE ON \`"$UN"\\_"$SQLBASE"\`.* TO '"$UN"_"$SQLUSER"'@'localhost' IDENTIFIED BY '$SQLPASS';FLUSH PRIVILEGES" 
```

差不多，我需要知道如何创建一个名为 cpanel_db1 的数据库，如果存在，则自动向上移动到数字。前 cpanel_db2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:14:43.803

可以这样做：

```
username="usernamedb"
password="passworddb"

database="cpanel_db"
databases=$(mysql -u $username -p$password -Bse 'show databases'|grep $database)

max=1

if [ -z "$databases" ];then
    mysql -u $username -p$password -Bse "create database ${database}$max"
else
    for cdatabase in $databases
    do
        cdatabasenumber=$(echo $cdatabase|awk -F"db" '{print $2}')
        if [ $cdatabasenumber -gt $max ]; then
            max=$cdatabasenumber
        fi
    done
    let max++

    mysql -u $username -p$password -Bse "create database ${database}$max"
fi 
```

~~

# objective-c - 如何使方法仅适用于 Obj-C 中的属性？

> ID：11922597
> 
> 赞同：0
> 
> 时间：2012-08-12T13:39:06.713
> 
> 标签：objective-c, properties, methods, private

我还是 Objective-C 的新手，我最近学会了如何创建属性，到目前为止一切都很好，但困扰我的一件事是，即使在创建了属性之后，setter 和 getter 方法仍然是公开可用的。
假设我有以下代码：

```
// myClass.h
@interface myClass : NSObject {
int _startPos;
}
@property (assign, readwrite, setter = setStartPos:, getter = getStartPos) int startPos;
-(void) setStartPos: (int) pos;
-(int) getStartPos;
@end 
```

实现文件应该是不言自明的，我不想做任何具体的事情。
现在，我在某处读到，并在实践中尝试过，如果您在实现文件中创建一个*类别*，并向其中添加一些方法，则可以使这些方法对 myClass.m 文件之外的东西不可见（又名*private ）。*

“好吧”我想，并决定尝试一下：

```
//myClass.m
#import <Foundation/Foundation.h>
#import "myClass.h"

@interface myClass (hidden)
-(void) setHiddenStartPos: (int) hPos;
-(int) getHiddenStartPos;
@end

@implementation myClass (hidden)
-(void) setHiddenStartPos: (int) hPos {
_startPos = hPos;
}

-(int) getHiddenStartPos {
return _startPos;
}
@end

@implementation myClass
-(void) setStartPos: (int) Pos {
[self setHiddenStartPos: Pos];
}

-(int) getStartPos {
return [self getHiddenStartPos]; //this is to see if I can get the value from the hidden methods through the non-hidden ones
}
@end 
```

没关系，在*main()*中测试它我可以看到名称中带有“隐藏”的方法实际上是不可访问的，因此它们就像是私有的一样。

然后我尝试将其添加到头文件中：

```
@property (assign, readwrite, setter = setHiddenStartPos:, getter = getHiddenStartPos) int 
```

看看我是否可以通过属性访问隐藏的方法，
但是当我这样做时，隐藏的方法在*main()*中变得可访问，并且使方法只能通过属性访问的整个计划付诸东流

所以我问你，有没有办法让除了属性和/或对象本身之外的任何东西都无法访问方法？

**编辑：**我意识到 getter 通常没有 get 的名字，所以请停止评论它？

还要强调我的意思：我想在 c# 中创建属性，其中 setter 和 getter 的内容对属性本身是私有的

```
public int exampleProperty
{
    set{...}
    get{...}
} 
```

它不使用方法作为 getter 和 setter，因此 setter 和 getter 中的代码只能由属性访问，**就像**方法中的代码是方法本身的本地代码一样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T13:44:47.990

在您的 .m 文件中添加一个类延续。IE：

```
@interface myClass ()
@property (assign, readwrite, setter = setHiddenStartPos:, getter = getHiddenStartPos) int hiddenStartPos;
@end

@implimentation myClass
@synthesize hiddenStartPos = _hiddenStartPos;
...
@end 
```

看看：[什么是Objective-C“类延续”？](https://stackoverflow.com/questions/10301661/what-is-an-objective-c-class-continuation)

PS：你的吸气剂应该只是`hiddenStartPos`而不是`getHiddenStartPos`......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:52:21.430

在我看来，您的困惑来自于对 @property 声明的确切含义的误解。它本质上是声明存在 setter 和 getter 方法。

所以这

```
@property int hiddenStartPos; 
```

和这个一样

```
- (int)hiddenStartPos;
- (void)setHiddenStartPos; 
```

所以，这两个方法的实现就是属性的实现。通过 decar .h 文件中的属性，您向任何导入 .h 的人宣传该类实现了这两种方法（分别为 getter 和 setter）。

我还想再次强调，在 Objective-C 中，getter 方法不应*以*“get”为前缀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T20:25:41.520

您过度思考“私人”的含义。在 ObjC 中，“private”只是意味着“不可见”。这并不意味着“不可调用”。将方法设为私有的方法是不要将其放入`.h`文件中，该文件声明了您的公共接口。

无法控制谁传递消息。这是 ObjC 的一个关键事实，不能（也不应该）改变。ObjC 是一种动态语言。在运行时，我可以自由地生成选择器并调用`performSelector:`我想要的任何对象。任何停止都会（a）引入显着的性能损失，或（b）破坏 ObjC 中许多非常有用和常见的技术（可能两者兼而有之）。ObjC 不是 Java 或 C#。它甚至不是 C 或 C++。它是基于 C 的 Smalltalk。它是一种高度动态的语言，并且有很多优点。[学习其他语言](http://robnapier.net/blog/learning-cocoa-2-467)是成为优秀 Cocoa 开发人员的第一步。

对方法进行编译器检查会很好`@private`（其中属性只是一种特殊情况），并且`@protected`对方法进行编译器检查会特别棒（这些存在于 ivars 中）。这些将使避免某些错误变得*稍微简单一些。*但这是你应该考虑的唯一方式。目标不是保护代码的一部分免受另一部分代码的影响。另一个代码不是敌人。这一切都是由希望程序运行的人编写的。目标是避免错误。正确的命名、一致性和绝对消除警告是您在 ObjC 中实现这一目标的方式。

所以是的，我希望能够偶尔`@protected`在我的声明前面。`@property`今天你不能，并且没有真正的等价物（我有时`+Protected`在单独的标题中使用一个类别，但它通常比它的价值更麻烦）。但话虽如此，拥有它不会有太大变化，我只发现我什至一年会使用几次的情况。不过，我想不出`@private`一种方法真正有用的情况。

# php - 库未在 codeigniter 中扩展

> ID：11922601
> 
> 赞同：2
> 
> 时间：2012-08-12T13:39:40.260
> 
> 标签：php, codeigniter

所以我试图扩展输入库（CI 2.1.1），当我调用我的自定义保存查询函数时，它说该函数不存在。

文件：MY_Input.php，在应用程序/库文件夹中：_

```
class MY_Input extends CI_Input {
 var $CI;

function __construct() {
    parent::__construct();
    $this->CI =& get_instance();
}

function save_query($query_array) {
    $this->CI->db->insert('ci_query', array('query_string' => http_build_query($query_array)));
 }
} 
```

在控制器中，我正在调用这样的函数

```
$query_id = $this->input->save_query($query_array); 
```

那么我到底做错了什么，它给了我这个错误：_

```
Fatal error: Call to undefined method CI_Input::save_query() in .... 
```

看不出为什么它不起作用，我什至检查了用户指南，根据它我想我做对了。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:43:53.867

该类`CI_Input`是一个核心库（CI2.0.0 中的新事物）。您必须将`MY_Input.php`文件放在下面`application/core/`才能使框架拾取它。

`system/core`如有疑问，请在or下查找原始类`system/libraries`并将其镜像到`application/`.

# html - 如何在表单之外制作单选按钮？

> ID：11922606
> 
> 赞同：3
> 
> 时间：2012-08-12T13:40:29.057
> 
> 标签：html, forms, dynamic, radio-button

我正在尝试编写一个动态表单，所以我不能使用正常的表单标签和东西。我使用普通按钮、JQuery 和 AJAX 调用来模拟传统表单。但是，我不知道如何做单选按钮。有什么帮助吗？

**编辑：**是的，我想我应该更具体。我试着做

```
<input type="radio" /> 
```

和东西，但是：

1.  它让我一次可以选择多个按钮（这会破坏单选按钮的意义）
2.  它不会让我在按下按钮后取消选择！

**编辑 2：**我不使用表单标签的原因是我也需要多个提交按钮，而我发现的唯一解决方案是不使用表单标签。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T14:03:43.477

为什么不能使用表单标签？没有什么能阻止你这样做。但是如果你不想使用表单标签，为什么不呢：

```
<input type='radio' name='test' value='1' checked>
<input type='radio' name='test' value='2'>
<input type='radio' name='test' value='3'>
<input type='radio' name='test' value='4'> 
```

对我来说很好。[演示](http://jsfiddle.net/morrow_brent/fV47K/)

**编辑：**

1：您需要为无线电组指定一个名称，否则每个输入都被视为自己的组。因此，为什么您在使用时可以一次选择多个按钮`<input type="radio" />`。看看我上面的代码。广播组是“测试”。

2：单选按钮应该有一个默认值。创建单选组时，您应该使用选中的属性指定默认值。这样做的结果是您无法取消选择单选按钮。您可以选择不同的值或坚持使用默认值。如果您希望能够取消选择，请考虑使用复选框。我已经更新了示例代码以反映这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-10T13:23:40.163

如果您能够选择多个单选按钮，则听起来您的名称属性不匹配。你想要结束的是如下所示：

```
<input type="radio" name="group-1" value="something-unique">
<input type="radio" name="group-1" value="something-else-unique">
<input type="radio" name="group-1" value="another-unique-something">

<input type="radio" name="group-2" value="something-unique">
<input type="radio" name="group-2" value="something-else-unique">
<input type="radio" name="group-2" value="another-unique-something"> 
```

请注意，选项组的名称属性相同，这意味着选项将相互替换。

此外，当纯粹使用 javascript 使用它们时，我没有在表单标签中包装收音机没有任何问题，但是如果你想做任何 html 帖子的东西，我希望它们是必需的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T14:11:34.693

你可以试试这个：

***HTML***

```
<div>
     <ul>
        <li><input type="radio" name="radio" value="value1" checked>Radio Button1</input></li>
        <li><input type="radio" name="radio" value="value1">Radio Button2</input></li>
        <li><input type="radio" name="radio" value="value1">Radio Button3</input></li>
     </ul>
</div> 
```

[演示](http://jsfiddle.net/7nD69/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:44:46.023

不应该有没有表单元素的输入元素。如果您没有正确使用它，您将无法让 HTML 以您希望的方式响应。多个提交按钮将表明需要多个表单。

如果无论出于何种原因，这不起作用，也许您应该重新考虑您要求用户提交信息的格式。

# css - Django 管理界面重叠

> ID：11922609
> 
> 赞同：0
> 
> 时间：2012-08-12T13:40:48.650
> 
> 标签：css, django

我有一个标准的 Django 管理站点。描述与输入小部件重叠。我该如何解决？这是 Django 中的错误还是我的错？

![http://i.stack.imgur.com/krDgt.png](../Images/aff34c9f5dba38b0ed9d1ac140c7ed34.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:53:38.653

尝试编辑和增加空白。您可以在相关的 CSS 文件中

```
"site-packages\django\contrib\admin\static\admin\css" 
```

**[更新]：**

您只能使用自定义模板为此页面增强它。

{% 扩展“admin/change_form.html”%}

```
{% block extrastyle %}
  {{ block.super }}
  <style type="text/css">

    .aligned label {
        display: block;
        padding: 3px 10px 0 0;
        float: left;
        width: 20em; /* updated */
    }
      </style>
{% endblock %} 
```

# android - 如何处理 uithread 中的循环，在 android 中？如 ios "NSRunLoop" 和 C#5.0 asyn...wait

> ID：11922614
> 
> 赞同：1
> 
> 时间：2012-08-12T13:41:28.557
> 
> 标签：android, ios, multithreading

ios可以启动一个异步方法，并在主线程中等待一个nsrunloop

```
while(!iterationDone) { 
    [runLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.5]]; 
    //do other stufff 
  } 
```

有了这个，uithread可以保持活跃，我可以保持调用许多异步方法的顺序。它很容易像同步方法一样调用。

```
 public int asyncmethod1{
        new Handler.post(new Runnable() { 
          @Override 
          public void run() { 
               // Do something on the UI-Thread 
             } 
          }); 
        //while(handler is end)
        //return the result 
 }
 public void main(){
    int i= asyncmethod1();
    i+=asyncmethod2();
 } 
```

但是这个方法一定会导致uithread没有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:41:01.697

在 Android 中有两个概念来处理异步任务和在 UI 线程上做一些事情。

1) 处理程序[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

```
new Handler.post(new Runnable() {
    @Override
    public void run() {
        // Do something on the UI-Thread
    }
}); 
```

2) 异步任务

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

AsyncTask 的使用示例位于 Android 的开发人员站点。

# javascript - Javascript：为什么是 Object.keys(someobject)，而不是 someobject.keys？

> ID：11922619
> 
> 赞同：11
> 
> 时间：2012-08-12T13:42:16.133
> 
> 标签：javascript, arrays, oop, language-design, javascript-objects

我经常使用以下方法获取对象键数组：

```
Object.keys(someobject) 
```

我很乐意这样做。我知道 Object 是 Object 构造函数，而 keys() 是它的一种方法，并且 keys() 将返回作为第一个参数给出的任何对象的键列表。我的**问题不是如何获取对象的密钥**- 请不要回复解释此问题的非答案。

我的问题是，**为什么 Object.prototype 上没有更可预测的 keys() 或 getKeys() 方法或 keys 实例变量**，所以我可以拥有：

```
someobject.keys() 
```

或作为实例变量：

```
someobject.keys 
```

并返回键数组？

同样，我的目的是了解 Javascript 的设计，以及获取密钥的有点不直观的机制的目的是什么。我不需要帮助来获取钥匙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T13:44:39.030

我想他们不希望有太多属性，`Object.prototype`因为您自己的属性可能会影响它们。

它们包含的越多，发生冲突的机会就越大。

* * *

如果`keys`在`prototype`...

```
var myObj: {
   keys: ["j498fhfhdl89", "1084jnmzbhgi84", "jf03jbbop021gd"]
};

var keys = Object.prototype.keys.call(myObj); 
```

* * *

***引入潜在阴影属性如何破坏代码的示例。***

对于为什么向`Object.prototype`.

想象一些看起来像这样的代码并不难......

```
if (someObject.keys) {
    someObject.keys.push("new value")
else
    someObject.keys = ["initial value"] 
```

显然，如果您将`keys`函数添加到`Object.prototype`. 现在将成为阴影属性的事实`someObject.keys`破坏了编写为假定它*不是*阴影属性的代码。

* * *

***后见之明是 20/20***

如果您想知道为什么`keys`它不是原始语言的一部分，那么人们至少会习惯于围绕它进行编码......好吧，我猜他们认为没有必要，或者根本没有想到它。

语言中不包含许多可能的方法和语法特性。这就是我们对规范进行修订以添加新功能的原因。例如，`Array.prototype.forEach`是后期添加。但他们可以将它添加到`Array.prototype`，因为它不会破坏`Array`.

一种语言应该在其`1.0`发行版中包含所有可能的功能并不是一个现实的期望。

由于`Object.keys`只是返回一个对象的可枚举自身属性的数组，因此这是一个非必要的添加，可以通过现有的语言特性来实现。它没有更早出现也就不足为奇了。

* * *

***结论***

添加`keys`到`Object.prototype`大多数肯定*会*破坏遗留代码。

在像 JavaScript 这样非常流行的语言中，向后兼容性肯定是一个重要的考虑因素。在这一点上添加新属性`Object.prototype`可能是灾难性的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-12T16:28:01.770

我想您的问题的答案是“因为委员会如此决定”，但我已经听到您问“为什么？” 在这句话结束之前。

我最近读到了这个，但我现在找不到来源。归结为，在许多情况下，您`Object.prototype.keys.call(myobject)`无论如何都必须使用，因为可能`myobject.keys`已经在对象中用于其他用途。

我想你会发现这个[归档邮件线程](http://www.mail-archive.com/es-discuss@mozilla.org/msg03982.html)很有趣，例如*Brendan Eich*讨论了 ECMAScript 5 中新方法的某些方面。

**更新：** 在挖掘[邮件档案](https://mail.mozilla.org/pipermail/es-discuss/)时，我发现[了这个](https://mail.mozilla.org/pipermail/es-discuss/2008-August/006828.html)：

> **主题**：是否应该将 Object.keys 重新定位为 Object.prototype.keys
> 
> **讨论**：Allen 认为这并不是真正的元层操作，因为它旨在用于应用程序层代码，作为 for..in 的替代方案，用于获取可枚举属性名称的列表。作为应用层方法，它属于 Object.prototype 而不是 Object 构造函数。原则上达成了普遍共识，但 Doug 和 Mark 务实地争辩说，用户定义的对象很可能会定义自己的名为“keys”的属性，这会影响 Object.prototype.keys 使其无法用于此类对象。
> 
> **行动：将其保留为 Object.keys。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T13:48:07.400

随意制作自己的，但添加到`Object`原型中的属性越多，碰撞的机会就越高。这些冲突很可能会破坏任何第三方 javascript 库以及任何依赖`for...in`循环的代码。

```
Object.prototype.keys = function () {
    return Object.keys(this);
};

for (var key in {}) {
    // now i'm getting 'keys' in here, wtf?
}

var something = {
    keys: 'foo'
};

something.keys(); // error 
```

# php - 在图表上显示来自外部网站抓取的 JSON

> ID：11922624
> 
> 赞同：1
> 
> 时间：2012-08-12T13:43:08.817
> 
> 标签：php, javascript, json, charts, scrape

因此，我一直在尝试将网站 data.asp 文件（似乎以 json 格式）抓取到我的网站中以显示为图表我似乎能够获取 json 数据但不会显示为图表googles 图表 API 或 fusioncharts 我不确定我做错了什么，尽管在 google 和 fusioncharts 的示例中，json 数据的格式不同，我是否必须更改我的数据才能满足这一要求？我将如何确保在外部网站上更新 data.asp 文件时，它也会在我的网站上更新？

**编辑：**有没有更简单的方法将数据（以及更新）放入图表？

```
 <meta charset="utf-8">
        <title>Olympic Results</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!--styles -->
        <link href="css/bootstrap.css" rel="stylesheet">
        <style type="text/css">
          body {
            padding-top: 60px;
            padding-bottom: 40px;
          }
          .sidebar-nav {
            padding: 9px 0;
          }
        </style>
        <link href="css/bootstrap-responsive.css" rel="stylesheet">

        <!--HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <?php
            if(!function_exists("curl_init")) die("cURL extension is not installed");
            $ch = curl_init("http://hosted.stats.com/olympics/medals_widget/data.asp?country=NZL");
            //Configuring curl options 
            $options=array(CURLOPT_RETURNTRANSFER => true, 
                           CURLOPT_HTTPHEADER => array('Content-type: application/json'));
            //Setting curl options
            curl_setopt_array($ch, $options);
            $pageData = curl_exec($ch);
            curl_close($ch); 
            //Cache the channel file 
            $cache_expire = 60*60*24*365;
            header("Pragma: public");
            header("Cache-Control: max-age=".$cache_expire);
            header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
        ?>
        <script type="text/javascript" src="Charts/FusionCharts.js"></script>

      </head>
      <body>
        <div class="navbar navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container-fluid">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a class="brand" href="#">Olympic Results</a>

              <div class="nav-collapse">
                <ul class="nav">
                  <li class="active"><a href="#">Home</a></li>
                </ul>
              </div><!--/.nav-collapse -->

            </div>
          </div>
        </div>

        <div class="container-fluid">
        <div id="chartContainer">FusionCharts XT will load here!</div>          
        <script type="text/javascript">

        <!--       
          var data = <?php echo $pageData; ?>;
          document.write(data);
          var myChart = new FusionCharts( "Charts/Column3D.swf", "myChartId", "400", "300", "0", "1" );
          myChart.setJSONData(data);
          myChart.render("chartContainer");

        // -->     
        </script> 
        <?php echo("$pageData"); ?>
            <footer style="padding-top:100px;">
            <hr>
            <p>&copy; Olympic Results 2012</p>
            </footer>

        </div><!--/.fluid-container-->

        <!-- javascript -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="js/jquery.js"></script>
        <script src="js/bootstrap-transition.js"></script>
        <script src="js/bootstrap-alert.js"></script>
        <script src="js/bootstrap-modal.js"></script>
        <script src="js/bootstrap-dropdown.js"></script>
        <script src="js/bootstrap-scrollspy.js"></script>
        <script src="js/bootstrap-tab.js"></script>
        <script src="js/bootstrap-tooltip.js"></script>
        <script src="js/bootstrap-popover.js"></script>
        <script src="js/bootstrap-button.js"></script>
        <script src="js/bootstrap-collapse.js"></script>
        <script src="js/bootstrap-carousel.js"></script>
        <script src="js/bootstrap-typeahead.js"></script>
      </body>
    </html> 
```

忘记添加 JSON 的样子 -

```
{"medals": { 
"Archery":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze":       "0", "total": "0" }], 
"Track & Field":[ { "stats_id": "83", "gold": "0", "silver": "1", "bronze": "0", "total": "1" }], 
"Badminton":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Basketball":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Beach Volleyball":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Boxing":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Diving":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Equestrian":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "1", "total": "1" }], 
"Soccer":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Fencing":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Handball":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Field Hockey":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Judo":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Modern Pentathlon":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }],
"Rowing":[ { "stats_id": "83", "gold": "3", "silver": "0", "bronze": "2", "total": "5" }],  
"Sailing":[ { "stats_id": "83", "gold": "1", "silver": "1", "bronze": "0", "total": "2" }], 
"Shooting":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Swimming":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Synchronized Swimming":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Tennis":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Taekwondo":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Triathlon":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Table Tennis":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Volleyball":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Weightlifting":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Water Polo":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Wrestling":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Cycling":[ { "stats_id": "83", "gold": "0", "silver": "1", "bronze": "2", "total": "3" }], 
"Gymnastics":[ { "stats_id": "83", "gold": "0", "silver": "0", "bronze": "0", "total": "0" }], 
"Canoe":[ { "stats_id": "83", "gold": "1", "silver": "0", "bronze": "0", "total": "1"     }] 
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:29:11.650

是的，您需要重新格式化您的数据。获取数据，将其转换为真正的 javascript 对象并对其进行迭代，并以您的 API 理解的方式重新创建结构。要将 JSON 转换为 Object，您可以使用 jQuery 库的 $.parseJSON 方法。

另一件事。这些数据是由您的服务器获取的，然后重定向到您的应用程序？

**编辑：**这是一个例子：

```
// this way, data is already an object
var data = { "medals": {
    "Archery":[{
        "stats_id": "83",
        "gold": "0",
        "silver": "0",
        "bronze":  "0",
        "total": "0"
    }],
    "Track & Field":[{
        "stats_id": "83",
        "gold": "0",
        "silver": "1",
        "bronze": "0",
        "total": "1"
    }] // more data here...
}};

// if data comes this way (a String), it needs to be parsed
var dataStr = "{ \"medals\": {" +
"    \"Archery\":[{" +
"        \"stats_id\": \"83\"," +
"        \"gold\": \"0\"," +
"        \"silver\": \"0\"," +
"        \"bronze\":  \"0\"," +
"        \"total\": \"0\"" +
"    }]," +
"    \"Track & Field\":[{" +
"        \"stats_id\": \"83\"," +
"        \"gold\": \"0\"," +
"        \"silver\": \"1\"," +
"        \"bronze\": \"0\"," +
"        \"total\": \"1\"" +
"    }]" + // more data here...
"}}";

console.log( data );

var obj = $.parseJSON( dataStr );
console.log( obj );

traverseObj(obj);

// traverses the object to see all its properties
function traverseObj( data ) {
    for ( var key in data ) {

        var value = data[key];

        if ( $.isPlainObject( value ) ) {

            console.log( "**key: " + key );
            traverseObj( value );

        } else if ( $.isArray( value ) ) {

            console.log( "key: " + key );
            var values = "";

            for ( var i = 0; i < value.length; i++ ) {
                var currValue = value[i];
                if ( $.isPlainObject( currValue ) ) {
                    traverseObj(currValue);
                } else {
                    values += currValue + ", ";
                }
                if ( values != "" ) {
                    console.log( " - value: " + value );
                }
            }

        } else {
            console.log( "key: " + key + " - value: " + value );
        }
    }
} 
```

这是小提琴：http: [//jsfiddle.net/davidbuzatto/MysPe/](http://jsfiddle.net/davidbuzatto/MysPe/)

# asp.net-web-api - 可空类型的 ModelState 验证失败

> ID：11922632
> 
> 赞同：3
> 
> 时间：2012-08-12T13:44:11.043
> 
> 标签：asp.net-web-api

无法在 WebApi 应用程序中为包含可空类型且具有空值的对象传递 ModelState 验证。错误消息是“值 'null' 对 DateProperty 无效。”

对象代码：

```
public class TestNull
{
    public int IntProperty { get; set; }
    public DateTime? DateProperty { get; set; }
} 
```

控制器：

```
public class TestNullController : ApiController
{
    public TestNull Get(int id)
    {
        return new TestNull() { IntProperty = 1, DateProperty = null };
    }

    public HttpResponseMessage Put(int id, TestNull value)
    {
        if(ModelState.IsValid)
            return Request.CreateResponse(HttpStatusCode.OK, value);
        else
        {
            var errors = new Dictionary<string, IEnumerable<string>>();
            foreach (var keyValue in ModelState)
            {
                errors[keyValue.Key] = keyValue.Value.Errors.Select(e => e.ErrorMessage);
            }

            return Request.CreateResponse(HttpStatusCode.BadRequest, errors);
        }
    }
} 
```

要求：

```
$.getJSON("api/TestNull/1",
function (data) {
    console.log(data);
    $.ajax({
        url: "api/TestNull/" + data.IntProperty,
        type: 'PUT',
        datatype: 'json',
        data: data
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T14:34:23.840

我刚刚在我自己的一个 WebAPI 项目中进行了快速测试，并将 null 作为可空值类型的值传递，效果很好。[我建议您使用Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具检查发送到服务器的实际数据

两个有效的场景是：

```
{ IntProperty: 1, DateProperty: null } 
{ IntProperty: 1 } // Yes, you can simply leave the property out 
```

**不起作用**的场景是：

```
{ IntProperty: 1, DateProperty: "null" } // Notice the quotes
{ IntProperty: 1, DateProperty: undefined } // invalid JSON
{ IntProperty: 1, DateProperty: 0 } // Will not be properly interpreted by the .NET JSON Deserializer 
```

如果这两个默认方案不起作用，那么我怀疑您的问题出在其他地方。即，您是否更改了 global.asax 中 JSON 序列化程序的任何默认设置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-19T17:03:34.840

差不多 9 年后，我在 ASP.NET Core 3.1 中仍然遇到类似的问题

但是我为我找到了一个可行的解决方法（只需从正在发送的数据中排除空值 - 而不是将值作为空值发送）。

见[https://stackoverflow.com/a/66712465/908608](https://stackoverflow.com/a/66712465/908608)

这不是一个真正的解决方案，因为后端仍然不能正确处理 null 值，但至少 ModelState 验证不会为可为空的属性失败。

# php - 使用静态类数组声明多维静态 PHP 类数组时出错

> ID：11922635
> 
> 赞同：1
> 
> 时间：2012-08-12T13:44:45.310
> 
> 标签：php, oop, static, multidimensional-array

我正在刷新我的 PHP 知识，但遇到了一个我自己无法解决的问题：

我有一个带有两个私有静态数组的类，我想将它们存储为另一个（多维）静态类数组的值，但我总是收到 *unexpected T_VARIABLE* 错误。这是我的简单示例代码（仅使用一个而不是两个静态数组来填充以下多维数组）失败：

```
class MyClass {
  private static $firstArr = array('a' => 'A', 'b' => 'B');

  private static $multiArr = array('a' => self::$firstArr);
} 
```

我真的不明白这里有什么问题。我可以轻松地将*self::$firstArr替换为**$firstArr*本身的数组声明，但无论如何我很想了解我在这里做错了什么。

所以欢迎任何评论！

干杯，罗曼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:49:32.037

声明类属性时，您不能进行任何类型的额外评估。

```
private static $multiArr = array('a' => self::$firstArr);
//                Can't do this    -----^ 
```

[文档中的链接](http://php.net/manual/en/language.oop5.properties.php)

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

避免复制/粘贴是对的 - 这种“运行时信息”通常在构造函数中完成。

# jsf-2 - 下载在对话框 jsf2 primefaces 中不起作用

> ID：11922637
> 
> 赞同：0
> 
> 时间：2012-08-12T13:45:04.167
> 
> 标签：jsf-2, hyperlink, download, primefaces

当我将下载链接放入对话框时遇到此问题，它不起作用，但是当我将它放入 panelgrid 时，它起作用是 primefaces 中的错误还是什么？你有什么主意吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:06:45.787

```
<h:form>
        <p:panel header="Query">
            <.......some come is here ........
                        <p:commandButton value="Export CSV" icon="ui-icon-document"
                            process="@this" rendered="#{xxx.showTable}"
                            oncomplete="exportConfirmationDialogShow.show()"></p:commandButton>
                    </h:panelGrid>
                </p:outputPanel>
            </h:panelGrid>              
        </p:panel>

    </h:form> 
```

对话框；

```
<p:dialog header="Choose Delimiter Type" id="dialogCSV"
        widgetVar="exportConfirmationDialogShow" resizable="false">
        <h:form id="csvForm">
            <h:panelGrid columns="2" style="margin-bottom:10px">
                <h:outputLabel value="Delimiter:" />
                <p:selectOneRadio id="delimiter" value="#{xxx.delimiterType}">
                    <f:selectItem itemLabel="Tab" itemValue="tab" />
                    <f:selectItem itemLabel="Pipe" itemValue="|"  />
                    <f:selectItem itemLabel="Comma" itemValue="," />                        
                </p:selectOneRadio>
            </h:panelGrid>

            <p:commandButton id="exportCsv" value="Export CSV"
                actionListener="#{xxx.export2CSV}" ajax="false"
                onclick="PrimeFaces.monitorDownload(hideStatus)">
                <p:fileDownload value="#{xxx.exportFile}"
                    contentDisposition="attachment" />
            </p:commandButton>

        </h:form>
        <script type="text/javascript">
            function showStatus() {
                exportConfirmationDialogShow.show();
            }

            function hideStatus() {
                exportConfirmationDialogShow.hide();
            }
        </script>
    </p:dialog> 
```

# iphone - 检测 Viewcontroller 何时被推送

> ID：11922638
> 
> 赞同：6
> 
> 时间：2012-08-12T13:45:05.370
> 
> 标签：iphone, ios, objective-c, delegates, uinavigationcontroller

我正在尝试检测何时推送 ViewController。所以我遵循了 Apple [http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBarDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBarDelegate_Protocol/Reference/Reference.html)的文档，关于 NavegationBar 委托，但我不知道如何制作它工作顺利。我在 ViewController 中的代码上放置了以下代码，但它没有检测到它正在推送。我做错了什么？

```
- (void)navigationBar:(UINavigationBar *)navigationBar didPushItem:(UINavigationItem *)item, {
    NSLog(@"didPushItem: %@", item);
    [self showimage];
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T15:49:31.417

不清楚您需要做什么，但有几种`UIViewController`方法可以识别其上下文。下面有两个，[文档中有几个](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    BOOL pushed = [self isMovingToParentViewController];

    printf("viewWillAppear     %d\n", pushed);

}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    BOOL popped = [self isMovingFromParentViewController];

    printf("viewWillDisappear     %d\n", popped);

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T15:19:39.217

您应该实施`UINavigationControllerDelegate`for`UIViewController`和`UINavigationController`相关的任务。

这是文档的链接：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationControllerDelegate_Protocol/Reference/Reference.html)

您想要的特定方法（类似于“ `navigationController:didPushViewController:animated:`”）在协议中不存在。

但是，我相信您可以使用`navigationController:willShowViewController:animated:`. 请注意，此方法在视图`UIViewController`显示之前和被推入`UINavigationController`堆栈之后被调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T20:53:30.557

该`-viewWillApear`方法是合理的，但是当视图即将插入视图层次结构时会调用它，这可能是也可能不是您想要的。

如果您想要更多地控制推/拉进度，您可以覆盖

```
- (void)willMoveToParentViewController:(UIViewController *)parent {
    if (nil == parent) {
        // Moving to nil parent means being removed from parent
    } else {
        // Will be inserted as a child view controller of <parent>
    }
}

- (void)didMoveToParentViewController:(UIViewController *)parent {
    if (nil == parent) {
        // Moving to nil parent means was just removed from parent
    } else {
        // Was just inserted as a child view controller of <parent>
    }
} 
```

这些将在导航控制器推送/弹出子视图控制器之前和之后调用。

从文档...

> **didMoveToParentViewController：**
> 
> 在从容器视图控制器中添加或删除视图控制器后调用。
> 
> `- (void)didMoveToParentViewController:(UIViewController *)parent`
> 
> **参数**
> 
> *父母*
> 
> 父视图控制器，如果没有父视图控制器，则为 nil。
> 
> **讨论**
> 
> 当您的视图控制器想要对添加到容器中做出反应时，它可以覆盖此方法。

和...

> **willMoveToParentViewController：**
> 
> 在从容器视图控制器中添加或删除视图控制器之前调用。
> 
> `- (void)willMoveToParentViewController:(UIViewController *)parent`
> 
> **参数**
> 
> *父母*
> 
> 父视图控制器，如果没有父视图控制器，则为 nil。
> 
> **讨论**
> 
> 当您的视图控制器需要知道它已被添加到容器中时，它可以覆盖此方法。

# sql - 寻找 SQL 错误：sp_executesql -- Msg 911, Level 16, State 1

> ID：11922640
> 
> 赞同：0
> 
> 时间：2012-08-12T13:45:29.763
> 
> 标签：sql, sql-server, sql-server-2008-r2

我需要在各种 SQL Server 实例上执行某些脚本。他们使用具有不同标识的数据库。但是，所有数据库都具有应处理的相同表（相同名称和结构）。因此，我想检测数据库的名称，将其设置为字符串变量，构造 SQL 语句，并通过`sp_executesql`. 正确执行的裸命令是：

```
USE [1000574];
SELECT TOP 10 temperature_1, UTC FROM dbo.Data; 
```

然后我尝试使用`@database_name`占位符执行等效字符串：

```
DECLARE @database_name nvarchar(100);
SET @database_name = '1000574';

EXEC sp_executesql N'USE [@database_name];
                     SELECT TOP 10 temperature_1, UTC FROM dbo.Data;',
                   N'@database_name nvarchar(100)',
                   @database_name = @database_name 
```

我得到的是以下错误消息：

> *消息 911，级别 16，状态 1，第 1 行
> 数据库“@database_name”不存在。确保输入的名称正确。*

错误在哪里？

谢谢，彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:56:49.553

您不能将参数参数化为`use`: 它需要一个文字。改为动态构造查询：

```
declare @sql nvarchar(max)
set @sql = 'USE [' + @database_name + '];' +
           'SELECT TOP 10 temperature_1, UTC FROM dbo.Data;';
exec (@sql) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:20:27.933

这样做的另一种方法：

```
DECLARE @database_name NVARCHAR(100),@sp_executesql NVARCHAR(100),@sql_cmd NVARCHAR(512);
SET @database_name = N'1000574';
SET @sp_executesql = @database_name + N'.dbo.sp_executesql';

SET @sql_cmd = N'SELECT TOP 10 temperature_1, UTC FROM dbo.Data;';
EXEC @sp_executesql @sql_cmd; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T14:44:10.753

为什么不：

```
DECLARE @sql NVARCHAR(MAX), @database_name SYSNAME;

SET @database_name = N'1000574';

SET @sql = N'SELECT TOP 10 temperature_1, UTC FROM '
    + QUOTENAME(@database_name) + '.dbo.Data;';

EXEC sp_executesql @sql; 
```

另外为什么没有 order by 告诉 SQL Server 你的意思是`TOP`什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T14:09:48.600

或者简单地使用限定名称，如此[处](http://msdn.microsoft.com/en-us/library/ms187879%28v=sql.105%29.aspx?ppud=4)所述：

```
SELECT TOP 10 1000574..temperature_1, UTC FROM dbo.Data 
```

当然，查询可以动态构建。

# c++ - Microsoft C++ 异常：长在内存位置

> ID：11922641
> 
> 赞同：1
> 
> 时间：2012-08-12T13:45:33.247
> 
> 标签：c++, visual-studio-2010, directx-9

我在这一行看到“Microsoft C++ 异常：在内存位置长”：
`pDev->DrawIndexedPrimitive(D3DPT_TRIANGLELIST, 0, 0, m_Size * m_Size, 0, m_TriangleCount);`

pDev 是 LPDIRECT3DDEVICE9，我使用的是 DirectX 9.0。
我不知道“长在内存位置”的确切含义。
为什么在这一行打印消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:19:38.887

您应该忽略在“输出”窗口中看到的任何“第一次机会异常”消息，该消息仅显示 DirectX 管道内部使用的异常来处理错误情况。异常只有在没有被捕获时才是致命的。

你**永远不**应该忽略的是 DrawIndexedPrimitive() 的返回值。它返回一个 HRESULT，一个指示函数调用是否成功的状态码。粗略的代码应该是这样的：

```
HRESULT hr = pDev->DrawIndexedPrimitive(...);
if (FAILED(hr)) {
    // Report error code stored in "hr" and terminate
    //...
} 
```

# google-chrome-extension - 无法解决 google-chrome-extension CSP 错误

> ID：11922642
> 
> 赞同：0
> 
> 时间：2012-08-12T13:45:34.693
> 
> 标签：google-chrome-extension

我正在尝试创建我的第一个 chrome 扩展，这是我的 manifest.json

```
{
    "name": "share2twitter",
    "version": "0.1",
    "manifest_version": 2,
    "browser_action":{
        "default_icon": "icon.png",
        "default_popup": "index.html"
    },
    "background": {"page": "index.html"},
    "permissions": [
        "https://www.googleapis.com/*",
        "tabs"
        ],
    "content_scripts": [{
        "matches": [ "http://*/*", "https://*/*" ],
        "js": [ "jquery.min.js","index.js" ]
    }],
    "content_security_policy": "script-src https://www.googleapis.com/urlshortener/ 'self'; object-src 'self'; connect-src https://www.googleapis.com/"

} 
```

[https://github.com/kracekumar/share2twitter/blob/master/manifest.json](https://github.com/kracekumar/share2twitter/blob/master/manifest.json)在调试模式下我收到以下错误。

```
Refused to load script from 'https://www.googleapis.com/urlshortener/v1/url?callback=jQuery17108621194534935057_1344774835421&{%22longUrl%22:%22https://groups.google.com/a/chromium.org/forum/?fromgroups' because of Content-Security-Policy. 
```

我查看了 mappy、stackoverflow.com 和谷歌官方文档的参考资料，没有任何结果。所以我在这里寻求帮助。

预期行为：当我点击扩展名时，它会尝试连接到 goo.gl url shortner 并显示警告框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:09:04.397

内容安全策略值中不允许源 URL 中的路径。您需要在清单中使用它：

`"content_security_policy": "script-src https://www.googleapis.com 'self'; object-src 'self'; connect-src https://www.googleapis.com"`

已经提交了[一个 Chromium 错误（并且正在进行一些工作），以便在这种情况下更好地发出警告。](http://code.google.com/p/chromium/issues/detail?id=128493)

# php - mysql db结构和关系

> ID：11922644
> 
> 赞同：0
> 
> 时间：2012-08-12T13:45:52.207
> 
> 标签：php, mysql, relationship

我需要有关如何在我的 mysql 数据库中设置表的帮助。

我有一个用户。用户可以根据需要获得 10 个令牌。令牌只能用于一件事。他们可以使用它来创建卡通页面、游戏页面、生物页面、问题页面等。令牌也可以重新分配到另一个页面。

我想看看构建我的数据库的最佳方式是什么以及关系。

我正在考虑有一个用户表、令牌表、卡通表、游戏表、生物表和问题表。但我如何与所有这些联系起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:42:02.350

关系数据库表设计不是一门硬科学。它是一种高度灵活的范例，可以并且将会根据您的应用程序的性质而改变。话虽如此，您通常应该遵守某些设计原则。参见例如[http://en.wikipedia.org/wiki/Database_design](http://en.wikipedia.org/wiki/Database_design)。

话虽如此，我将通过一种似乎高度动态的方法来解决这个问题，因为我不确定应用程序的细节。首先，您肯定需要一个如下所示的`users`表格：

用户：

*   名
*   姓
*   用户身份
*   n_tokens
    *   我把它放在这里以防用户的令牌数量是动态的

现在您有了一种指定用户的方法，您将希望了解该用户如何使用他/她的令牌：

代币：

*   token_id
    *   这用于指定此（或这些）令牌的用途。
*   用户身份
    *   这应该对 users.user_id 有一个重复的外键约束。
*   n_tokens
    *   这与 users.n_tokens 不同。从您的问题中不清楚您是否总是每个功能都有 1 个令牌。该值是对未来可能增强的前瞻性方法。
*   pagetype_id
    *   这是为了指定令牌用于什么类型的页面类型。它将对 pagetypes.pagetype_id 有一个外键约束（见下文）。

如上所述，您希望人们在此表定义的特定页面类型上使用令牌，例如卡通页面、简历页面等：

页面类型：

*   pagetype_id
    *   用于定义此类页面的唯一标识符
*   pagetype_name
    *   用于标记页面类型的字符串字段，例如“卡通”、“生物”等。

现在，您可能有多个表定义页面类型，因此我将只为其中一个指定布局：

生物页面：

*   pagetype_id
    *   这个 id 在 pagetypes.pagetype_id 上有一个重复的外键约束。该表的值将始终保持不变。这不是最规范的设计，因为您可能希望拥有一个更通用的“页面”表，但是一些复杂的连接可能会让一些开发人员感到困惑，更糟糕的是，查询速度很慢。
*   token_id
    *   tokens.token_id 上的外键约束。
*   其他
    *   其余字段是用户定义的，因为您希望指定生物页面上的内容。

概括

总结上述表格布局，您需要设计数据库，使自包含实体不跨越多个表格，多个实体不组合成一个表格。话虽如此，我将表格与不同表格`users`的表格分开。为了使设计更直观，我将做一些示例查询，这可能有助于您理解布局。`tokens``<pagetype>_pages`

1.  要获取用户创建的所有简历页面：

    ```
    SELECT    bio_pages.*
    FROM      bio_pages
    INNER
    JOIN      tokens
        ON    bio_pages.token_id=tokens.token_id
    INNER
    JOIN      users
        ON    tokens.user_id=users.user_id
    WHERE     users.first_name='john'
        AND   users.last_name='doe' 
    ```

2.  要获取用户使用的硬币总数，以及他们可以使用的最大硬币数量：

    ```
    SELECT    SUM(tokens.n_tokens) AS used_tokens,
              users.n_tokens       AS max_tokens
    FROM      tokens
    INNER
    JOIN      users
        ON    tokens.user_id=users.user_id
    WHERE     users.first_name='john'
        AND   users.last_name='doe'
    GROUP BY  users.user_id 
    ```

希望这一切都有意义且直观。如果有任何不清楚的地方，请告诉我。

# node.js - 每次测试前都无法获得所需的文件

> ID：11922649
> 
> 赞同：2
> 
> 时间：2012-08-12T13:46:47.183
> 
> 标签：node.js, coffeescript, mocha.js, chai

我尝试将 mocha 与 coffeescript 和 chai 结合使用。在每个包含测试的文件之前，我想包含以下文件：

测试/_helper.coffee

```
path = require 'path'

AppDir = path.resolve("#{__dirname}/../src/app")

chai = require('chai')
should = chai.should()
factories = require('chai-factories')
chai.use(factories) 
```

这样我就可以访问 AppDir 变量。这样当我需要一个文件时，我就不必指定应用程序目录的完整路径。

测试/应用程序/setup-test.coffee

```
describe 'Setup instance', ->
    it 'should be a object', ->
        setup = require "#{AppDir}/setup"
        setup.should.be.a('object') 
```

我尝试了以下设置：

将 _hellper.coffee 添加到 mocha 命令行选项，如下所示：

```
./node_modules/.bin/mocha --require coffee-script --require test/_helper.coffee --compilers coffee:coffee-script --recursive --reporter spec test 
```

所以：

```
./node_modules/.bin/mocha --require coffee-script --compilers coffee:coffee-script --recursive --reporter spec test/_helper.coffee test 
```

我在 setup-test.coffee 中尝试了一个正常的要求：

```
require '../_helper.coffee' 
```

无论我使用什么方法，如果我运行测试，我都会收到以下错误：

```
Setup instance
    1) should be a object

  ✖ 1 of 1 test failed:

  1) Setup instance should be a object:
     ReferenceError: AppDir is not defined
      at Context.<anonymous> (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/test/app/setup-test.coffee:8:28)
      at Test.Runnable.run (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runnable.js:184:32)
      at Runner.runTest (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runner.js:300:10)
      at Runner.runTests.next (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runner.js:346:12)
      at next (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runner.js:228:14)
      at Runner.hooks (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runner.js:237:7)
      at next (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runner.js:185:23)
      at Runner.hook (/Users/ivotrompert/Dropbox/projects/nodejs/getWallpapers/node_modules/mocha/lib/runner.js:205:5)
      at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

如果有人想知道我如何运行测试，这是我的 MAKE 文件：

生成文件

```
REPORTER = spec
DEFAULT_COMMAND = ./node_modules/.bin/mocha --require coffee-script --ui bdd --compilers coffee:coffee-script --recursive --growl --reporter
check: test

test:
    @NODE_ENV=test $(DEFAULT_COMMAND) $(REPORTER)
test-watch:
    @clear
    @NODE_ENV=test $(DEFAULT_COMMAND) $(REPORTER) --watch
coverage:
    @jscoverage --no-highlight src src-cov
    @SRC_COV=1 $(DEFAULT_COMMAND) html-cov > coverage.html
    @rm -rf src-cov
ifeq ($(shell uname), Darwin)
    @open coverage.html
else
    @xdg-open coverage.html &> /dev/null &
endif

.PHONY: test 
```

有人可以帮助我吗，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:33:27.797

这是一个解决方案。

_helper.coffee

```
path = require 'path'

exports.AppDir = path.resolve("#{__dirname}/../src/app")

chai = require('chai')
should = chai.should()
factories = require('chai-factories')
chai.use(factories) 
```

你的测试咖啡

```
{AppDir} = require "../helpers"

describe 'Setup instance', ->
    it 'should be a object', ->
        setup = require "#{AppDir}/setup"
        setup.should.be.a('object') 
```

我所做的是使用导出并要求返回多个对象，如果您的 _helper.coffee 中有更多导出，您可以用逗号分隔它们。该命令是相关的。

旁注：但是为什么您在测试中需要一个文件？我不希望在一个测试的外部文件中有一些隐藏的设置。这不会让以后或其他人更容易理解测试。

# c# - 以编程方式设置特定 IIS

> ID：11922650
> 
> 赞同：2
> 
> 时间：2012-08-12T13:46:54.703
> 
> 标签：c#, .net, iis-7

这张图片上的设置说明：

[![图片说明设置](../Images/d9dfc7486620baed08214c21a9a4e4be.png)](https://i.stack.imgur.com/cbKCk.png)

如何使用 C# 更改此 IIS 设置？

我尝试设置应用程序池凭据（在此 Web 应用程序上），但未应用此设置。如何使用 C# 以编程方式执行此操作？

# c++ - 将模板 typedef 作为参数传递给函数模板

> ID：11922657
> 
> 赞同：1
> 
> 时间：2012-08-12T13:47:26.590
> 
> 标签：c++, templates, typedef, function-templates

我正在尝试将模板 typedef 作为参数传递给函数模板。但是我收到以下错误：

> TestTemplates.cpp:11: 错误: '&' 之前的预期 unqualified-id 令牌
> 
> TestTemplates.cpp:11: 错误: '&' 之前的预期 unqualified-id 令牌
> 
> TestTemplates.cpp:11：错误：“&”之前的预期初始化程序 令牌
> 
> TestTemplates.cpp:25: 错误: 'func' 未在此范围内声明

```
#include <iostream>
#include <vector>

template<class T>
struct MyVector
{
    typedef std::vector<T> Type;
};

template<class T>
void func( const MyVector<T>::Type& myVec )
{
    for( MyVector<T>::Type::const_iterator p = myVec.begin(); p != myVec.end(); p++)
    {
        std::cout<<*p<<"\t";
    }
}

int main()
{
    MyVector<int>::Type myVec;
    myVec.push_back( 10 );
    myVec.push_back( 20 );

    func( myVec );
} 
```

谁能指出如何解决这个错误。我看过一些帖子，但找不到解决方案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:49:09.710

你需要告诉编译器它是一个类型名

```
void func( const typename MyVector<T>::Type& myVec ) 
```

然后你需要显式地帮助编译器推断函数的类型：

```
func<int>( myVec ); 
```

顺便说一句，这个问题被称为“**[两阶段查找](http://gcc.gnu.org/onlinedocs/gcc/Name-lookup.html)**”

# google-bigquery - 使用 Nexus 在 Maven 中访问 Java BigQuery 工具

> ID：11922658
> 
> 赞同：0
> 
> 时间：2012-08-12T13:47:30.050
> 
> 标签：google-bigquery

我刚开始用 Java 构建一个 bigquery 上传器。目标是下载完整的 twitter 流并将其上传到每小时存储桶中，然后在 Dremel 中处理这些流以用于主题检测和跟踪项目。这是 Eclipse Juno 中 MacOSX 上的所有 Java，以及带有本地 Nexus 代理的 Maven。

我被困在起跑门；查找并编译一个简单的 Java 示例，用于验证和上传 CSV 文件。我发现最接近的是 bigquery-appengine-sample，尽管我不明白为什么我需要 appengine 来完成 bigquery 项目。稍后将对此进行探索。

问题是，该项目不会在 Maven 中构建。eclipse 中没有显示错误标志，但通常 eclipse 错误标志是不可靠的。pom 在这个元素上显示了一个红色的日食标志：

> com.google.apis google-api-services-bigquery ${bigquery.version}

Maven 安装失败

> [错误] 无法在项目 bigquery-appengine-sample 上执行目标：无法解析项目 com.google.api.client:bigquery-appengi ne-sample:war:1.0.0-SNAPSHOT 的依赖项：无法生成以下工件已解决：com.google.apis-samples:shared-sample-appengine:jar:1.3.2, com.google.api s:google-api-services-bigquery:jar:v2-rev18-1.7.2-beta: 失败要在 ...SOF 不允许 URL... 中找到 com.google.apis-samples:shared-sample-appengine:jar:1.3.2... 已缓存在本地存储库中，直到更新间隔才会重新尝试解析已过期或强制更新 -> [帮助 1]

Nexus 代理是为[http://mavenrepo.google-api-java-client.googlecode.com/hg/](http://mavenrepo.google-api-java-client.googlecode.com/hg/)和[http://google-gson.googlecode.com/svn/mavenrepo/](http://google-gson.googlecode.com/svn/mavenrepo/)定义的（都设置为 SNAPSHOT）。这些似乎都不起作用。浏览存储和索引都是空的（只是一个原型目录）。但是 Browse Remote 似乎确实适用于 AFAICT；显示了一个看起来完整的 Maven 存储库树。

所以我的问题是：如何使用 maven 在 Java 中构建 bigquery 示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:39:46.617

这里有一些非 App Engine Java 示例：[http ://code.google.com/p/google-bigquery-tools/source/browse/samples/java/](http://code.google.com/p/google-bigquery-tools/source/browse/samples/java/)

我使用 Sonatype 的 Maven 插件，至少你的 pom.xml 应该是这样的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.google</groupId>
  <artifactId>google</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>google</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
     <dependency>
      <groupId>com.google.api-client</groupId>
      <artifactId>google-api-client</artifactId>
      <version>1.10.3-beta</version>
    </dependency>

    <dependency>
      <groupId>com.google.apis</groupId>
      <artifactId>google-api-services-bigquery</artifactId>
      <version>v2-rev19-1.7.2-beta</version>
    </dependency>

    <dependency>
      <groupId>com.google.oauth-client</groupId>
      <artifactId>google-oauth-client</artifactId>
      <version>1.8.0-beta</version>
    </dependency>
  </dependencies>

  <repositories>
      <repository>
      <id>google-api-services</id>
      <url>http://mavenrepo.google-api-java-client.googlecode.com/hg</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>    
  </repositories>

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:49:15.277

根据我从谷歌外部观察到的情况，所提出问题的答案是：

*   没有涵盖上传的 Java 示例（还没有？）。已发布答案中地址的示例仅涵盖查询帐户中已存在的示例数据。

*   最接近我需要的示例似乎是命令行和 python 示例。但是使用它们很复杂，因为每个示例都被硬连接到只能与特定的 maven 依赖版本一起使用，
    当新的 API 版本发布时，示例不会被更新，并且旧的 API 版本通常不能通过
    maven 获得。

*   maven 问题似乎源于使用了一个非常奇特的版本编号系统（例如
    上面的 v2beta1-rev17-1.7.1-beta-beta 示例）。Maven 依赖于严格遵守约定，而这样的
    版本号肯定不符合。对于快速变化的
    beta 代码，版本号应该是maven book 中记录的major#.minor#.micro-SNAPSHOT。如评论中所述，没有例外或 Maven 中断。

紧急请求：请提供涵盖所有 BigQuery 功能（尤其是第 1 步）的*有效Java 示例；*上传数据。请将示例与 API 代码捆绑在一起，以确保它们保持同步。并在整个过程中采用 Maven 约定，包括追溯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T01:53:10.537

在测试了这些库的 url [http://google-api-client-libraries.appspot.com/mavenrepo](http://google-api-client-libraries.appspot.com/mavenrepo)后，我能够让它工作。它不允许浏览，因此 nexus 将尝试索引此 repo 并失败。发生这种情况时，Nexus 会阻止访问此存储库，因此本地构建会由于缺少依赖项而失败。

为了缓解这个问题，我在 Nexus 中为此存储库更改了两个设置。

*   下载远程索引 = false
*   启用自动阻止 = 假

有了这个集合，我能够正确地构建和下载依赖项。

注意：我们还使用 GCM-Server Repo for Android，它也有同样的问题，应用了相同的解决方案，我们能够缓存新的依赖项。

# ssis - SSIS 并发连接

> ID：11922659
> 
> 赞同：1
> 
> 时间：2012-08-12T13:47:34.523
> 
> 标签：ssis

我们开发了一个简单的网络应用程序，允许用户上传 Excel 文件。我们的系统选择 excel 文件并触发 SSIS 简单任务来读取传入的 6 列 excel 文件并将数据推送到数据库中。

我们关心的是当多个用户尝试同时上传文件时会发生什么？SSIS 可以同时服务多个请求（应该这样）吗？

上限是多少，即它可以同时执行多少个请求？

您可以给我们什么建议和建议，以便我们配置我们的服务器，以便我们能够满足最大的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:36:09.790

同一个 SSIS 包可以同时运行多次。您必须担心的问题与同时运行 2 个插入语句的问题相同。SSIS 只是您用来插入数据的方式。当数据到达 SQL Server 引擎时会发生什么，无论它是如何到达那里的。

请记住 SSIS 使用批量插入

# javascript - 我的应用已经上线后，我可以更改我的 Facebook 应用托管服务器吗？

> ID：11922664
> 
> 赞同：-1
> 
> 时间：2012-08-12T13:48:26.400
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我需要更改我的 Facebook 应用程序的托管位置。URL 将相同，但 IP 地址将更改，因此我不需要更改 Canvas URL。经过一些测试，这似乎破坏了 Facebook 应用程序。我现在没有从 FB 请求中获得回调函数，例如 FB.getLoginStatus

以前有人改过这个吗？

下面的代码显示了我的`FB.getloginstatus()`调用，它正在旧服务器上执行回调，但现在在新服务器上，回调已停止工作。

```
FB.init({ 
  appId : 'XXXXXXXXXX',
  status : true,
  cookie : true,
  oauth : true, 
  xfbml : true 
}); 

FB.getLoginStatus(function(response) { 
  alert("login callback"); 
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:55:39.520

是的你可以。

用户从您的应用命名空间访问您的应用程序 -`https://apps.facebook.com/app_namespace`

您存储/托管应用程序的位置取决于您，您可以随时更改它。用户仍将通过该 URL 访问您的应用程序。

* * *

如果您遇到问题，请确保您的新托管服务支持 SSL，因为 Facebook 应用程序需要从安全位置托管。

# c - 如何使用 CreateProcess 识别崩溃的孩子

> ID：11922666
> 
> 赞同：1
> 
> 时间：2012-08-12T13:48:36.573
> 
> 标签：c, winapi

我有一个我调用的程序`CreateProcess`，然后等待它完成`WaitForSingleObject`，最后我抓住它的退出状态`GetExitCode`。（但是，对于崩溃的进程，状态变量包含 0。） <- 抱歉，这是不正确的。我打印的变量大小错误。

如何检测孩子何时坠毁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:03:45.010

如果您可以控制子进程，则使其在成功时返回不同的错误代码，而如果为 0，则表示程序崩溃。

# c# - 如何选择不在其他列表中的 int ？

> ID：11922670
> 
> 赞同：1
> 
> 时间：2012-08-12T13:49:19.487
> 
> 标签：c#, linq

我有一些列表包含 0 到 10 之间的 int 值，例如列表包含值 3, 8 ,9, 10

现在，我想使用 linq 创建新列表，该列表将包含不在第一个列表中的所有值......这意味着新列表将包含值 0,1,2,4,5,6,7

如何用 linq 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T13:52:18.397

```
var myNums = Enumerable.Range(0, 11).Except(yourList); 
```

而是因为这`11`是`10`您希望生成的数字的计数，并且 0-10 包含 11 个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T13:51:45.287

**如果**必须再次限制新列表`0-10`，您可以这样做

```
var myList =  new List<int>{3, 8 ,9, 10};
var resultList = Enumerable.Range(0, 11).Except(myList ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T13:52:48.100

```
int[] seq1={3,5,8},seq2={5,7,8};
seq2.Except(seq1);//7 
```

# jquery-masonry - 我在哪里可以找到 jQuery masonry 现场演示？

> ID：11922671
> 
> 赞同：0
> 
> 时间：2012-08-12T13:49:25.870
> 
> 标签：jquery-masonry

我是一名 UX 设计师，正在探索项目的 Masonry 界面。

我想上传我自己的块（各种尺寸的照片），并使用参数来查看它们如何影响布局。我一直在寻找带有“上传”选项的在线演示，但找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:29:19.907

如果您访问[http://masonry.desandro.com/](http://masonry.desandro.com/)，那里有许多演示以及要下载的代码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:01:29.893

你可以在这里找到一个版本：http: [//benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/](http://benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/)。还有 wookmark jquery 插件，它是免费的，重量更轻：[http](http://www.wookmark.com/jquery-plugin) ://www.wookmark.com/jquery-plugin 。这是 JS 中的 2d-bin-packing 示例：http: [//incise.org/2d-bin-packing-with-javascript-and-canvas.html](http://incise.org/2d-bin-packing-with-javascript-and-canvas.html)。还有来自同一开发商的包装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:52:22.310

我将使用 Visual Studio Web Developer 2010 Express 并使用 Desandro 的 masonry.js 创建一个本地主机站点。在[这里](http://masonry.desandro.com/)找到。它的使用非常简单。我必须将脚本代码放在结束`</body>`标记之前以使其正​​常运行，但在其他应用程序中可能会有所不同。你必须得到 jquery.js，Desandro，（砌体的编码器）告诉你如何在他的网站上实现它。

> Masonry.js 可以免费使用，但是 isotope 是非商业的，除非您支付 25 美元才能将其用于商业用途。

# django - 在 Django 中强制使用小写用户名

> ID：11922673
> 
> 赞同：3
> 
> 时间：2012-08-12T13:49:41.687
> 
> 标签：django

目前，在 django.contrib.auth 中，可以有两个用户名为“john”和“John”。我怎样才能防止这种情况发生。

最直接的方法是在 contib.auth.models 中添加一个干净的方法，并在保存之前将其转换为小写，但我不想编辑 contrib.auth 包。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T13:55:36.197

聆听模型，然后在那里进行检查[`pre_save`](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.pre_save)。`Users`最少侵入性和最便携的方式。

这是一个关于它的外观示例（改编自用户配置文件示例）：

```
def username_check(sender, instance, **kwargs):
    if User.objects.filter(username=instance.username.lower()).count():
       raise ValidationError('Duplicate username')

pre_save.connect(username_check, sender=User) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-23T17:31:37.953

如果您使用 Postgres，则有更好的选择。Postgres 有一个不区分大小写的字段类型，`citext`. 从 1.11 开始，Django 在`django.contrib.postgres.fields.citext`. 您可能还需要处理 url 正则表达式中的大小写敏感问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T04:26:47.220

将接受的答案更新为最新：

```
from django.db.models.signals import pre_save
from django.db.utils import IntegrityError
from django.dispatch import receiver

@receiver(pre_save, sender=User)
def username_check(instance, sender, **kwargs):
    """Ensure that username unique constraint is case insensitive"""
    if sender.objects.filter(username__iexact=instance.username.lower()):
        raise IntegrityError("Duplicate username") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-22T00:48:06.490

我可能会使用用户名的自定义字段在模型上解决这个问题。

```
from django.db import models

class LowercaseCharField(models.CharField):
    """
    Override CharField to convert to lowercase before saving.
    """
    def to_python(self, value):
        """
        Convert text to lowercase.
        """
        value = super(LowercaseCharField, self).to_python(value)
        # Value can be None so check that it's a string before lowercasing.
        if isinstance(value, str):
            return value.lower()
        return value 
```

然后在你的模型中..

```
from django.contrib.auth.models import AbstractUser
from django.contrib.auth.validators import UnicodeUsernameValidator
from django.utils.translation import gettext_lazy as _

# Assuming you saved the above in the same directory in a file called model_fields.py
from .model_fields import LowercaseCharField

class User(AbstractUser):
    username = LowercaseCharField(
        # Copying this from AbstractUser code
        _('username'),
        max_length=150,
        unique=True,
        help_text=_('Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.'),
        validators=[UnicodeUsernameValidator(),],
        error_messages={
            'unique': _("A user with that username already exists."),
        },
    )
    # other stuff... 
```

用户名将全部“自动”保存为小写字母。

# c# - 在第三方 WinForms 进程中定位 ToolStripStatusLabel

> ID：11922677
> 
> 赞同：0
> 
> 时间：2012-08-12T13:50:51.940
> 
> 标签：c#, winforms, statusstrip, toolstripstatuslabel

我被要求创建一个小工具来帮助自动化基本的 3rd 方 WinForms 应用程序。

到目前为止，我已经设法克服了许多障碍，但这是迄今为止最令人沮丧的障碍之一（花了 8 个小时研究才发现 LVM_GETITEMTEXT 正在返回一个带有 64 位指针的 LVITEM 结构非常令人沮丧） -我似乎根本找不到任何方法来获得对第三方应用程序 StatusStrip 中 ToolStrupStatusLabel 的任何类型的引用。

我知道应用程序已完成分配的任务的唯一迹象是 StatusStrip 何时更新以显示它已完成。如果我无法确定它何时完成一项工作并继续进行另一项工作，我就无法可靠地自动化它的操作。

是否有任何消息可以 SendMessage() 到应用程序？我可以调用任何函数吗？有什么可以帮助我找到此标签上的文本，以便我可以深入了解应用程序的状态？

自动化工具在 C#/Winforms 中使用 pInvoke 进行编程，以实现各种 Windows 功能。我还在 C++ 中创建了自己的 DLL，以帮助从 LVITEM 结构中获取数据，因此 C++ 变通办法也是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:08:15.960

这是行不通的。ToolStripItem 派生类是特殊的，它们不是从 Control 派生的。他们没有自己的窗口句柄，他们使用宿主的窗口来绘制自己。主机是控件，例如您的情况下的 ToolStrip 或 StatusStrip。

这使得它们无法从需要窗口句柄的传统 UI 自动化工具中使用。征服它们的唯一方法是注入一个使用反射来获取 ToolStripItem 引用的 DLL。这存在，[Managed Spy++ 工具](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)使用这种技术。提供了源代码，因此您可以将自己的源代码放在一起，您需要利用 ManagedSpyLib 来完成繁重的工作。

# spring - 实现 Spring 控制器时共享一个公共父路径

> ID：11922679
> 
> 赞同：8
> 
> 时间：2012-08-12T13:52:08.450
> 
> 标签：spring, api, rest, controller

我希望能够定义一个具有“/api”映射的父控制器类，然后用我的不同实现扩展该控制器。所以 ApiController 将有：

```
@Controller
@RequestMapping("/api") 
```

例如，我的用户控制器应该扩展基本 api 控制器，并将“/users”添加到路径中，因此它将响应“/api/users”请求。所以 UserController 将有：

```
@Controller
@RequestMapping("/users") 
```

但由于它扩展了 ApiController，它将有效地响应 /api/users。

当然，我可以在所有控制器前面加上“/api”，这样就可以在没有父类的情况下实现这一点，但如果可能的话，我更喜欢“以正确的方式”来做，这样我就可以用更清晰、更明显的方式定义我的 api 实现小路。

我尝试扩展 ApiController 基类，但这不起作用，UserController 仍然响应“/users”并忽略基类“/api”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:30:41.233

嗯。你可以试试这个，它对我有用：

```
@RequestMapping("/abstract")
public abstract class AbstractController {

}

@Controller
public class ExtendedAbstractController extends AbstractController {

   @RequestMapping("/another")
   public String anotherTest() {
       return "another";
   }

} 
```

请注意，您的基类必须没有`@Controller`注释并且必须是**abstract**。

如果您尝试扩展注释为控制器的非抽象类并且有`@RequestMapping`s 您在`RequestMappingHandlerMapping`初始化的步骤中会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T07:25:14.203

您可以通过以下方式实现：

1.  为具有相同路径前缀的控制器创建子上下文配置
2.  `DispatcherServlet`创建具有自己映射到某个路径的子上下文

看看[这个答案](https://stackoverflow.com/questions/32927937/how-to-set-base-url-for-rest-in-spring-boot/37672760#37672760)。这是类似的问题，但对于`@RestControllers`.

# java - “java -cp”和“java -jar”的区别？

> ID：11922681
> 
> 赞同：140
> 
> 时间：2012-08-12T13:52:11.220
> 
> 标签：java, jar, jvm, classpath

`java -cp CLASSPATH`使用和运行 Java 应用程序有什么区别`java -jar JAR_FILE_PATH`？在运行 Java 应用程序时，其中一个是否优于另一个？我的意思是这些方法中的哪一种对 JVM 来说更昂贵（根据它们的机器资源使用情况）？

哪一个会导致 JVM 在尝试运行应用程序时产生更多线程？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-12T13:59:00.693

我更喜欢第一个版本来启动 java 应用程序，因为它的陷阱更少（“欢迎来到类路径地狱”）。第二个需要一个可执行的 jar 文件，并且该应用程序的类路径必须在 jar 的清单中定义（所有其他类路径声明将被静默忽略......）。因此，对于第二个版本，您必须查看 jar，阅读清单并尝试找出类路径条目是否从 jar 的存储位置有效......这是可以避免的。

我不希望这两个版本有任何性能优势或劣势。它只是告诉 jvm 哪个类用于主线程以及它可以在哪里找到库。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-08-12T13:56:11.283

使用该`-cp`参数，您可以提供类路径，即程序在编译或运行时可能需要的其他类或库的路径。`-jar`指定要运行的可执行 JAR 文件。

您不能同时指定它们。如果您尝试运行，`java -cp folder/myexternallibrary.jar -jar myprogram.jar`那么它将无法正常工作。该 JAR 的类路径应在其清单中指定，而不是作为`-cp`参数。

[您可以在此处](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)和[此处](http://docs.oracle.com/javase/tutorial/deployment/jar/index.html)找到更多相关信息。

PS：`-cp`和`-classpath`都是同义词。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-12T13:57:31.500

使用时，`java -cp`您需要提供完全限定的主类名称，例如

`java -cp com.mycompany.MyMain`

使用`java -jar myjar.jar`jar 文件时，必须通过 manifest.mf 提供有关主类的信息，该文件包含在文件夹中的 jar 文件中`META-INF`：

`Main-Class: com.mycompany.MyMain`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-12T13:57:27.900

如果您希望在类路径中指定所有代码，则 java -cp CLASSPATH 是必需的。这对于调试代码很有用。

jarred 可执行格式：`java -jar JarFile`如果您希望使用单个短命令启动应用程序，可以使用该格式。您可以在类路径条目中使用空格分隔的 jar 在 MANIFEST 中指定其他依赖 jar 文件，例如：

```
Class-Path: mysql.jar infobus.jar acme/beans.jar 
```

两者在性能方面具有可比性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-03T07:21:40.933

就像已经说过的那样，-cp 只是为了在命令行中告诉 jvm 哪个类用于主线程以及它可以在哪里找到库（定义类路径）。在 -jar 中，它期望在 jar 文件清单中定义类路径和主类。所以其他的是在命令行中定义东西，而其他的是在 jar 清单中找到它们。性能上没有区别。您不能同时使用它们，-jar 将覆盖 -cp。

即使您使用 -cp，它仍然会检查清单文件。因此，您可以在清单中定义一些类路径，在命令行中定义一些。当您依赖于某个 3rd 方 jar 时，这特别有用，您可能不会在构建时提供或不想提供（例如，期望它已经在要安装的系统中找到）。所以你可以用它来提供外部罐子。它的位置可能因系统而异，甚至可能在不同系统上具有不同的版本（但具有相同的界面）。这样，您可以使用其他版本构建应用程序，并在不同系统上运行时将实际的 3rd 方依赖项添加到命令行上的类路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-12T15:57:52.957

在性能方面不会有任何差异。使用 java - cp 我们可以在类路径中指定运行 java 类文件所需的类和 jar。

如果是可执行的jar文件。当使用 java -jar 命令时，jvm 从 jar 文件中的 /META-INF/MANIFEST.MF 文件中找到它需要运行的类。

# objective-c - 如何在目标 c 中创建一个也是定制类的属性？

> ID：11922683
> 
> 赞同：0
> 
> 时间：2012-08-12T13:52:24.060
> 
> 标签：objective-c, properties, instantiation, lazy-evaluation

有谁知道如何在目标 c 中添加一个属性 - 但该属性也是一个定制的类？

例如，我做了这个类：

```
@interface Person : NSObject

@property NSString *personName;
@property NSNumber *personAge;

-(id)init;

@end 
```

在哪里...

```
@implementation Person

@synthesize personAge, personName;

-(id)init{
    self = [super init];

    if(self){
        self.personAge = [NSNumber numberWithInt:26];
        self.personName = @"Jamie";
    }
    return self;
}

@end 
```

所以基本上每当我初始化和分配 Person 类时，它都会设置 personAge 为 26，personName 设置为 Jamie。

现在我想创建一个包含 person 属性的银行账户类：

```
@interface BankAccount : NSObject

@property NSNumber *bankAccNumber;
@property (nonatomic) Person *thePerson;

-(id)init;

@end 
```

在哪里...

```
@implementation BankAccount

@synthesize thePerson = _thePerson;
@synthesize bankAccNumber;

    -(id)init{

        self = [super init];

        if(self){
            bankAccNumber = [NSNumber numberWithInt:999];
        }

        return self;
    }
    @end 
```

现在 - 我的问题是：

1) 在 BankAccount 类中，我在哪里分配和初始化 Person 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:21:18.957

坚持你的榜样

```
@implementation BankAccount

@synthesize thePerson = _thePerson;
@synthesize bankAccNumber;

-(id)init{

    self = [super init];

    if(self){
        bankAccNumber = [NSNumber numberWithInt:999];
        thePerson = [[Person alloc] init];  // <- **** HERE
    }

    return self;
}
@end 
```

当然，一般来说，您不希望每个人都成为 26 岁的 Jamies 并拥有 999 美元，但我想您计划稍后改进这些细节 :)

# scala - 是否有一种 Scala 方式来获取数字的长度？

> ID：11922686
> 
> 赞同：2
> 
> 时间：2012-08-12T13:52:58.227
> 
> 标签：scala, numbers

我想知道，是否有 Scala 内置方法来获取整数的十进制表示的长度？

示例：`45`有长度`2`；`10321`有长度`5`。

可以使用 来获取长度`10321.toString.length`，但是由于创建 String 对象时的开销，这有点难闻。有没有更好的方法或内置方法？

更新：

*   “更好”是指更快的解决方案
*   我只对正整数感兴趣

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T14:32:35.497

这绝对是个人喜好，但我认为对数方法没有分支看起来更好。仅对于正值，当`abs`​​然可以省略。

```
def digits(x: Int) = {
    import math._
    ceil(log(abs(x)+1)/log(10)).toInt
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T16:08:47.523

如果您想要速度，那么假设随机分布，以下内容非常好：

```
def lengthBase10(x: Int) =
  if      (x >= 1000000000) 10
  else if (x >= 100000000)   9
  else if (x >= 10000000)    8
  else if (x >= 1000000)     7
  else if (x >= 100000)      6
  else if (x >= 10000)       5
  else if (x >= 1000)        4
  else if (x >= 100)         3
  else if (x >= 10)          2
  else                       1 
```

如果你想要的只是地板，那么计算双精度的对数是没有效率的。

传统的递归方式是：

```
def len(x: Int, i: Int = 1): Int = 
  if (x < 10) i 
  else len(x / 10, i + 1) 
```

这比获取 0 到 10e8 范围内的整数的日志要快。

`lengthBase10`上面的速度比其他任何东西快大约 4 倍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T14:17:41.907

`toString`那么 get `length`of int 将不适用于负整数。此代码不仅适用于正数，也适用于负数。

```
def digits(n:Int) = if (n==0) 1 else math.log10(math.abs(n)).toInt + 1; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-28T16:43:38.240

像这样的东西应该可以完成这项工作：

```
def numericLength(n: Int): Int = BigDecimal(n).precision 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-12T14:09:13.817

将日志以 10 为底，在地板上加 1。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-12T15:30:16.460

最简单的方法是：

```
def numberLength(i : Int): Int = i.toString.length 
```

您可以添加一个保护条件，因为负数`Int`的长度为 abs + 1。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-04T11:40:05.613

大多数人给出了 (int) log(number)+1 的最有效答案，但我想更深入地了解为什么会这样。

设 N 为 3 位数字。这意味着 N 可以是 100 到 1000 之间的任何数字，或者：

100 < N < 1000 => 10^2 < N < 10^3

对数函数是连续的，因此：

日志(10^2) < 日志(N) < 日志(10^3)​​ => 2 < 日志(N) < 3

我们可以得出结论，N 的对数是 2 到 3 之间的数字，或者换句话说，任何 3 位数字的对数都在 2 到 3 之间。

因此，如果我们只取数字对数的整数部分（例如，2.567 的整数部分是 2）并加上 1，我们就得到了数字的数字长度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-18T16:06:13.510

另一种可能是：

```
private lazy val lengthList = (1 until 19).map(i => i -> math.pow(10, i).toLong)

def numberSize(x: Long): Int =
  if (x >= 0) positiveNumberSize(x)
  else positiveNumberSize(-x) + 1

private def positiveNumberSize(x: Long): Int =
  lengthList
    .collectFirst {
      case (l, p) if x < p => l
    }
    .getOrElse(19) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-05-20T07:10:30.197

这是解决方案：

```
number.toString.toCharArray.size 
```

输入输出

```
45   -   2
100  -   3 
```

# c++ - 纯 C++ 中的 Unicode 字符串

> ID：11922688
> 
> 赞同：2
> 
> 时间：2012-08-12T13:53:41.270
> 
> 标签：c++, string, unicode, cross-platform

如何使用纯 C++ 安排正确处理 Unicode 字符串？

我的意思是，当您将 unicode 字符串放入 std::string 并计算其长度时，有时您会得到 5 个字符长的字符串的 10 个字符。

他们如何在严肃的开源程序中做到这一点？他们如何以跨平台的方式做到这一点？你如何将它与文件 i/o 和 stdin/stdout 流联系起来？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T14:46:42.890

[Boost.Locale](http://www.boost.org/doc/libs/1_50_0/libs/locale/doc/html/index.html)是用 C++ 编写的，它封装了 ICU 库，并为它提供了一个不错的、非外来的接口。

对于 Unicode 工作，我的第一选择是 Boost.Locale，然后直接选择 ICU（如果 Boost.Locale 还没有包装一些东西）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T14:08:43.440

`std::[w]string`，与流行的看法相反，它没有任何 Unicode 支持。它们都只在`[w]char[_t]`单元上运行，以编码不可知的方式。

如果您只需要长度和转换以及编码验证形式的基本 Unicode 支持，那么有[utfcpp](http://utfcpp.sourceforge.net/)，它为这些操作提供了一个漂亮的 C++ 接口。

像 Qt 和 wxWdigets 这样的应用程序框架确实提供了它们自己的`string`类，它们提供了更好的 Unicode 支持，但通常会束缚您在整个代码中使用整个框架。

除此之外，还有[ICU](http://site.icu-project.org/)，它是*当今*标准的 Unicode 实现。

本网站上一位 C++ 大师正在进行的工作是[ogonek](https://bitbucket.org/martinhofernandes/ogonek)。您当然可以通过[`Lounge<C++>`](https://chat.stackoverflow.com/rooms/10/loungec)StackOverflow 聊天室联系作者，询问他的进度详情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T20:02:40.610

这是如何：[http ://www.utf8everywhere.org](http://www.utf8everywhere.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T14:07:47.933

你检查过[http://site.icu-project.org](http://site.icu-project.org)了吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T14:11:49.400

ICU 目前*是*Unicode 库。如果你想要跨平台的 Unicode 支持，ICU 基本上是唯一获得它的地方。

如果它的界面不比自动霰弹枪的错误末端更不友好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T14:24:23.347

我已经使用[wxWidgets](http://wxwidgets.org/)来做到这一点。它可以轻松地从 std::string 转换为它们的字符串类型 wxString。它并不理想，但效果很好，简单且便携。

# javascript - 每个文件的选择性 Rails 3.2 资产管道压缩

> ID：11922692
> 
> 赞同：3
> 
> 时间：2012-08-12T13:54:14.923
> 
> 标签：javascript, ruby-on-rails, asset-pipeline, angularjs

我想有选择地压缩 Rails 3.2 应用程序中的一些 javascript 文件，但仍然从生产环境中的单个捆绑文件提供所有 js 资产。

像这样的语法，在 app/assets/javascripts/application.js 文件中，使用传递给最后 3 个 sprockets**指令** 的虚构选项，我希望能解释我想要实现的目标。`:compress => false``require`

```
// Contents of app/assets/javascripts/application.js
//
//= require jquery
//= require jquery_ujs
//= require angular-1.0.1/angular, :compress => false
//= require angular-1.0.1/angular-resource, :compress => false
//= require products, :compress => false 
```

所以 jquery.js 和 jquery_ujs.js 文件会被压缩（通过 Rails 资产编译，默认使用 UglifierJS），剩下的 3 个文件不会被压缩，但是会被打包到 application.js 包中。

有没有办法做到这一点？

动机是 products.js 文件包含一个 angularjs 控制器，该控制器利用 angular 的依赖注入，该依赖注入需要特定的变量名称，例如`$scope`并且`$http`不会更改。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T18:06:37.550

我在我的**config/environment/production.rb**文件中使用了这一行

`config.assets.js_compressor = Sprockets::LazyCompressor.new { Uglifier.new(:mangle => false) }`

它压缩了我的控制器，但不会更改方法签名，因此 DI 仍然可以按预期工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T03:50:54.350

为了让它与 Rails 4 一起使用，因为它使用了我使用的更新版本的链轮：

`config.assets.js_compressor = Uglifier.new(mangle: false) if defined? Uglifier`

在环境/production.rb

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T12:46:32.147

请注意，出于这个特定原因，可以选择使用字符串而不是变量名来指定注入的服务。查看控制器下方的线。

```
var MyController = function(renamed$scope, renamedGreeter) {
  ...
}
MyController.$inject = ['$scope', 'greeter']; 
```

示例取自[http://docs.angularjs.org/guide/di](http://docs.angularjs.org/guide/di)

# php - PHP 使用爆炸

> ID：11922694
> 
> 赞同：0
> 
> 时间：2012-08-12T13:54:25.920
> 
> 标签：php, arrays, split, explode

我正在尝试将结果分解并分离为 2 个不同的数组

```
One One_x
Two Two_xx
Three Three_xxx
Four Four_xxxx 
```

我首先要分解断线（ \n ）..
然后分解空间以在数组中找到所有One **、**
2、3、4 和**One_x、Two_xx、Three_xxx、Four_xxxx**在不同的数组中

我试图炸开断线

```
$ex = explode("\n", $numbers); 
```

然后

```
foreach($ex as $number){
  $ex = explode(" ", $number);
} 
```

但对我来说似乎有点困惑，

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:01:45.840

```
$array1 = array();
$array2 = array();
foreach($ex as $number){
  $tmp = explode(" ", $number);
  $array1[] = $tmp[0];
  $array2[] = $tmp[1];
} 
```

我认为最简单的方法

编辑：关心你设置`$ex`循环......不是一个好主意。使用另一个变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:01:48.350

正则表达式可以一次拆分输入，并在其上声明结构，而不是 runnig 爆炸一次或两次：

```
 preg_match_all('/
         ^         # line start
         (\w+)     # One, Two, ...
         \s+       # spaces
         (\w+)     # Four_xxxxx
         $         # line end
      /smix',
      $input,
      $array
 );
 print_r($array); 
```

会给你：

```
[0] => Array
    (
        [0] => One One_x
        [1] => Two Two_xx
        [2] => Three Three_xxx
        [3] => Four Four_xxxx
    )

[1] => Array
    (
        [0] => One
        [1] => Two
        [2] => Three
        [3] => Four
    )

[2] => Array
    (
        [0] => One_x
        [1] => Two_xx
        [2] => Three_xxx
        [3] => Four_xxxx
    ) 
```

也可以使用`PREG_SET_ORDER`甚至提取尾随的 _xxxx (?) 数字。

# php - 会话变量值已更改

> ID：11922697
> 
> 赞同：0
> 
> 时间：2012-08-12T13:54:40.977
> 
> 标签：php, session

我正在使用 session 将一些数据存储在我的 php 网站中，但是在某些页面中，当我获取 session 中的数据时，有时会发生变化，有时会发生相同的变化。我搜索了很多并找到了一些答案

[会话 ID 值更改](https://stackoverflow.com/questions/5358442/session-id-value-changes)

" 如果你有注册全局变量，如果你在代码中使用变量 $id，你可能会看到类似的行为。作为测试，尝试：

```
<?php
session_start();
$_SESSION['testing'] = 'Foo';
$testing = 'bar';
die($_SESSION['testing']);
?> 
```

"

帮帮我，我在我的 php 文件中搜索，但我没有找到类似的变量，如会话变量，那么问题是什么？给我一些关于 php 会话的细节，如果可能的话，推荐好书。

> **编辑：**

我已经将 php.ini 设置为你们所有人都说它的 register_global 问题关闭，然后使用 `phpinfo();`函数进行 ckeck 并检查`register_global`是否关闭。但是一段时间后，我使用我的 ID 登录，而不是在我访问的 mypage menu.php 之后，它更改了会话记录 ID，并且我自动登录了另一个帐户。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:30:15.720

通过在 php.ini 文件中添加以下行来禁用 Register_Globals 可能会解决此问题。

`register_globals = Off`

如果您使用的是共享 Web 托管服务，请执行以下操作：

*   如果您有权访问 /cgi-bin 文件夹，则在其中创建自定义 php.ini 文件。
*   如果您没有访问权限，则在根文件夹中创建您的自定义 php.ini 文件。

然后在 php.ini 文件中添加上述行。

在文件中添加以下代码行`.htaccess`也可以解决您的问题。

`php_flag register_globals off`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:34:11.017

您不应该使用 register 全局变量，所以它不应该是一个问题。

如果您正在运行注册全局变量，请将此行添加到 .htaccess 以禁用：

```
php_flag register_globals off 
```

它不能在运行时使用 ini_set() 完成，因此您需要使用 htaccess 或 php.ini ，如上一个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:21:24.397

这些天， register_globals 不太可能是您的问题。更有可能与 a) 实际会话数据的存储位置有关；b) “会话 ID”如何从一个请求传输到下一个请求。

首先要查看的是[session_save_path()](http://uk.php.net/manual/en/function.session-save-path.php)，它告诉 PHP 在磁盘上的哪个位置存储您放入会话变量中的数据。

另一部分稍微复杂一些，但是关于如何设置 cookie，它让 PHP 知道加载相同的会话而不是创建一个新会话。您可能需要查看此 cookie 的生命周期或它适用的范围（域/子域/URL 路径）等内容。看一下[session_set_cookie_params()](http://uk.php.net/manual/en/function.session-set-cookie-params.php)，并且通常通读 PHP 手册的该部分以了解会话是如何工作的。

# php - php中的异常处理

> ID：11922699
> 
> 赞同：0
> 
> 时间：2012-08-12T13:55:19.457
> 
> 标签：php, exception-handling, try-catch

我有这种情况：

```
Interface ClassInterface 
{
  public function getContext();
}

Class A implements ClassInterface 
{
  public function getContext()
  {
     return 'CONTEXTA';
  }

  //Called in controller class
  public function Amethod1() 
  {
    try {
       //assuming that Helper is a property of this class
        $this->helper->helperMethod($this);
     } catch(Exception $ex) {
       throw $ex;
     }
  }
}

Class B implements ClassInterface 
{
  public function getContext()
  {
     return 'CONTEXTB';
  }

  //Called in controller class
  public function Bmethod1() 
  {
     try {
       //assuming that Helper is a property of this class
        $this->helper->helperMethod($this);
     } catch(Exception $ex) {
       throw $ex;
     }
  }

}

Class Helper {
 public function helperMethod(ClassInterface $interface) 
 {
   try {
      $this->verifyContext($interface->getContext());
      //dosomething
   } catch(\Exception $ex) {
     throw $ex;
   }

 }

 private function verifyContext($context) {
    if (condition1) {
       throw new \UnexpectedValueException('Invalid context.');
    }

    return true;
 } 
```

}

我希望调用 Amethod1 和 Bmethod1 的控制器类知道进程中抛出的异常类型。是否建议像呈现异常一样重新抛出异常？您认为这种情况下的**throw-catch-throw-catch-throw**结构合理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:07:02.847

是的，完全合理。但是：您的具体示例可以简化为：

```
public function Amethod1() 
{
   try {
      //assuming that Helper is a property of this class
      $this->helper->helperMethod($this);
   } catch(Exception $ex) {
      throw $ex;
   }
} 
```

到：

```
public function Amethod1() 
{

    //assuming that Helper is a property of this class
    $this->helper->helperMethod($this);
} 
```

# c++ - 尝试将我的项目与外部 opencv 一起使用

> ID：11922703
> 
> 赞同：2
> 
> 时间：2012-08-12T13:55:45.730
> 
> 标签：c++, opencv

我正在用 C++ 将一些外部库附加到我的项目中。这些库利用了 opencv2 库。

我已经将 opencv2 包含文件添加到我的 c/c++ 属性中。我还将所有相关的 lib 文件添加到链接器输入列表中。（我正在运行发布版本，但我也尝试了带有“d”扩展名的调试版本）。

*   opencv_core230.lib
*   opencv_highgui230.lib
*   opencv_objdetect230.lib
*   opencv_imgproc230.lib
*   opencv_ml230.lib
*   opencv_legacy230.lib
*   opencv_video230.lib

我遇到了这 4 个关于`setSVMDetector@HOGDescriptor`. 我到处寻找解决方案，但找不到。没有人真正在外部程序中使用 setSVM 函数。

以下是链接问题：

```
Error   14  error LNK2001: unresolved external symbol "public: virtual void __thiscall cv::HOGDescriptor::setSVMDetector(class cv::_InputArray const &)" (?setSVMDetector@HOGDescriptor@cv@@UAEXABV_InputArray@2@@Z)    C:\Users\idan\Documents\Visual Studio 2010\GraspTestingTool\GraspTestingTool\GraspTestingTool.obj   GraspTestingTool

Error   15  error LNK2001: unresolved external symbol "public: virtual void __thiscall cv::HOGDescriptor::setSVMDetector(class cv::_InputArray const &)" (?setSVMDetector@HOGDescriptor@cv@@UAEXABV_InputArray@2@@Z)    C:\Users\idan\Documents\Visual Studio 2010\GraspTestingTool\GraspTestingTool\htmlGenerator.obj  GraspTestingTool

Error   16  error LNK2001: unresolved external symbol "public: virtual void __thiscall cv::HOGDescriptor::setSVMDetector(class cv::_InputArray const &)" (?setSVMDetector@HOGDescriptor@cv@@UAEXABV_InputArray@2@@Z)    C:\Users\idan\Documents\Visual Studio 2010\GraspTestingTool\GraspTestingTool\sequenceTests.obj  GraspTestingTool

Error   17  error LNK2001: unresolved external symbol "public: virtual void __thiscall cv::HOGDescriptor::setSVMDetector(class cv::_InputArray const &)" (?setSVMDetector@HOGDescriptor@cv@@UAEXABV_InputArray@2@@Z)    C:\Users\idan\Documents\Visual Studio 2010\GraspTestingTool\GraspTestingTool\Utilities.obj  GraspTestingTool 
```

有谁知道如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:41:35.847

错误是由于未在调试或发布模式下添加特定库。根据您的目标机器使用 32 位或 64 库在发布模式下添加相应的 opencv 库 -

```
opencv_core242.lib opencv_highgui242.lib opencv_imgproc242.lib opencv_ml242.lib   
opencv_legacy242.lib opencv_video242.lib 
```

或者如果你想在调试模式下运行程序，那么使用 opencv 的调试库

```
opencv_core220d.lib
opencv_highgui220d.lib
opencv_video220d.lib
opencv_ml220d.lib
opencv_legacy220d.lib
opencv_imgproc220d.lib

opencv_objdetect242.lib

C:\opencv\build\x86\vc10\lib 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T00:44:07.340

添加库文件“opencv_objdetect248.lib; opencv_objdetect248d.lib;” 在项目roperties-->链接器-->输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T06:26:02.017

您需要添加 opencv_objdetect 库。如果您使用调试模式添加 objdetect(version)d.lib，但是，如果您使用发布模式添加 objdetect(version).lib

# python - 在 Python 上使用 JSON 文件

> ID：11922708
> 
> 赞同：1
> 
> 时间：2012-08-12T13:56:34.717
> 
> 标签：python, json, google-chrome, bookmarks

我有一个 Google Chrome 书签文件，它是 JSON 格式

```
{
   "checksum": "b884cbfb1a6697fa9b9eea9cb2054183",
   "roots": {
      "bookmark_bar": {
         "children": [ {
            "date_added": "12989159740428363",
            "id": "4",
            "name": "test2",
            "type": "url",
            "url": "chrome://bookmarks/#1"
         } ],
         "date_added": "12989159700896551",
         "date_modified": "12989159740428363",
         "id": "1",
         "name": "bookmark_bar",
         "type": "folder"
      },
      "other": {
         "children": [ {
            "date_added": "12989159740428363",
            "id": "4",
            "name": "test",
            "type": "url",
            "url": "chrome://bookmarks/#1"
         } ],
         "date_added": "12989159700896557",
         "date_modified": "0",
         "id": "2",
         "name": "aaa",
         "type": "folder"
      },
      "synced": {
         "children": [  ],
         "date_added": "12989159700896558",
         "date_modified": "0",
         "id": "3",
         "name": "bbb",
         "type": "folder"
      }
   },
   "version": 1
} 
```

并以 Python 格式：

```
{'checksum': 'b884cbfb1a6697fa9b9eea9cb2054183', 'version': 1, 'roots': {'synced': {'name': 'bbb', 'date_modified': '0', 'children': [], 'date_added': '12989159700896558', 'type': 'folder', 'id': '3'}, 'bookmark_bar': {'name': 'bookmark_bar', 'date_modified': '12989159740428363', 'children': [{'url': 'chrome://bookmarks/#1', 'date_added': '12989159740428363', 'type': 'url', 'id': '4', 'name': 'test2'}], 'date_added': '12989159700896551', 'type': 'folder', 'id': '1'}, 'other': {'name': 'aaa', 'date_modified': '0', 'children': [{'url': 'chrome://bookmarks/#1', 'date_added': '12989159740428363', 'type': 'url', 'id': '4', 'name': 'test'}], 'date_added': '12989159700896557', 'type': 'folder', 'id': '2'}}} 
```

我现在正在写一个书签管理器。我想按名称移动网页。例如： mv /bookmark_bar/test2 /other/test2

但是每个网页都是字典，它们都在一个列表中。所以，我必须使用索引来定位网页，**我无法通过名称定位它们**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:23:28.497

这是你需要的[https://gist.github.com/3332055](https://gist.github.com/3332055)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:19:06.400

```
# -*- coding: utf-8 -*-
import json
def hook(pairs):
    o = {}
    for k, v in pairs.iteritems():
        o[str(k)] = v
    return o

jsonString = """{"a":"a","b":"b","c":{"c1":"c1","c2":"c2"}}"""
r = json.loads(jsonString, object_hook=hook)

assert r['c']['c1'] == "c1"
del r['c']['c1']
assert not r['c'].has_key('c1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:28:43.620

如何迭代结构的一个例子——你想用它做什么，取决于你：

```
for root, val in bm['roots'].iteritems():
    print root, 'is named', val['name']
    for child in val['children']:
        print '\t', child['name'], 'is at', child['url'] 
```

# configuration - sass/scss/compass：如何设置默认项目文件结构

> ID：11922712
> 
> 赞同：4
> 
> 时间：2012-08-12T13:56:49.180
> 
> 标签：configuration, compass-sass, sass, directory-structure

起初，我是 sass/compass 的新手，我认为这是向前迈出的一大步。但我还有一个小问题。我尝试为新项目设置默认文件夹结构。

所以，如果我创建一个新项目：

```
compass create 
```

例如，它输出以下文件夹结构：

```
├───.sass-cache
├───sass
│   ├───ie.scss
│   ├───print.scss
│   └───screen.scss
└───stylesheets
    ├───ie.css
    ├───print.css
    └───screen.css 
```

我现在能做什么，说罗盘我想要一个这样的结构，**对于每个新项目**：

```
├───.sass-cache
├───css
│   ├───ie.css
│   ├───print.css
│   └───screen.css
├───img
│   ├───ico
│   ├───jpg
│   └───png
├───js
│   ├───jquery-1.7.2.min.js
│   └───scripts.js
└───sass
    ├───ie.scss
    ├───print.scss
    ├───screen.scss
    ├───_config.scss
    └───_mixins.scss 
```

是否有一个 default-config.rb 我可以在其中定义要加载的文件，或者我必须为每个新项目手动创建这个结构？

我提前谢谢你！

**编辑**

好的，我自己找到了最佳答案：

只需为指南针创建一个扩展名。因此，您可以构建自己的文件夹和文件结构。

这是一个不错的[起点](http://compass-style.org/help/tutorials/extensions/)。

要创建一个新项目，请将其输入`compass create <project-name> -r extension_name -u gem_name`到终端/控制台中。

对于需要入门工具包的每个人，请查看我的“Kube 框架”端口：[compass-kube](https://github.com/yckart/compass-kube)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:06:01.373

您喜欢的项目结构不是 Compass 应该处理的。相反，您应该拥有自己的骨架、准系统、引导、模板起点，您可以将其复制以开始新项目：

```
cp -r ~/barebones-project-starter . 
```

或从托管版本控制系统克隆：

```
git clone https://github.com/kumiau/default-project 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:18:50.703

我不认为指南针有这个特殊的功能。我认为您可以做的最接近的事情是在 GitHub 上分叉该项目并根据您的需要对其进行修改。

[https://github.com/chriseppstein/compass](https://github.com/chriseppstein/compass)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T17:44:58.793

只需在此处设置您需要的目录：

```
%Ruby_Folder%\lib\ruby\gems\2.2.0\gems\compass-1.0.3\lib\compass\app_integration\stand_alone\configuration_defaults.rb 
```

# c++ - C ++在While循环中这个向量拆分有什么问题

> ID：11922715
> 
> 赞同：0
> 
> 时间：2012-08-12T13:57:07.727
> 
> 标签：c++

这是我的部分代码：

```
if(action=="auth")
{

 myfile.open("account.txt");
    while(!myfile.eof())
    {
        getline(myfile,sline);

        vector<string> y = split(sline, ':');
    logincheck = "";
    logincheck = y[0] + ":" + y[3];

    if (sline==actionvalue)
    {
    sendClient = "login done#Successfully Login.";
    break;
    }
    else
    {
    sendClient = "fail login#Invalid username/password.";
    }

    y.clear();
    }
    myfile.close();

} 
```

如果我没有这个

```
 logincheck = y[0] + ":" + y[3]; 
```

该代码不会有任何分段核心转储错误，但是当我添加该行时，它会完全出错。

我的 account.txt 如下：

```
admin:PeterSmite:hr:password
cktang:TangCK:normal:password 
```

拆分功能：

```
std::vector<std::string> split(std::string const& str, std::string const& delimiters = "#") {
  std::vector<std::string> tokens;

  // Skip delimiters at beginning.
  string::size_type lastPos = str.find_first_not_of(delimiters, 0);
  // Find first "non-delimiter".
  string::size_type pos = str.find_first_of(delimiters, lastPos);

  while (string::npos != pos || string::npos != lastPos) {
    // Found a token, add it to the vector.
    tokens.push_back(str.substr(lastPos, pos - lastPos));
    // Skip delimiters.  Note the "not_of"
    lastPos = str.find_first_not_of(delimiters, pos);
    // Find next "non-delimiter"
    pos = str.find_first_of(delimiters, lastPos);
  }
  return tokens;
}

std::vector<std::string> split(std::string const& str, char const delimiter) {
  return split(str,std::string(1,delimiter));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:04:36.477

在你愉快地假设向量包含至少 4 个元素之前，你应该做一些基本的输入检查，否则`y[3]`当你解析一行没有三个冒号的输入时会爆炸：

```
if (y.size >= 4) {
   // Do login check
} else {
   // Invalid input
} 
```

我猜你的输入中可能有一个空行。

包装依赖读取“a：b：c：d”输入行的整个代码部分：

```
if(action=="auth") {
  myfile.open("account.txt");
  while(getline(myfile,sline))
  {
    vector<string> y = split(sline, ':');
    if (y.size >= 4) {
      logincheck = "";
      logincheck = y[0] + ":" + y[3];

      if (sline==actionvalue) {
        sendClient = "login done#Successfully Login.";
        break;
      } else {
        sendClient = "fail login#Invalid username/password.";
      }
    }
  }
  myfile.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:03:29.577

问题是循环的结构：

```
while(!myfile.eof())
    {
        getline(myfile,sline); 
```

`istream::eof()`除非您尝试*读取*流的末尾，否则不能保证返回 true。所以会发生什么是你读了 2 行`eof()`但仍然没有返回 true。然后你第三次进入循环。`getline`由于您在调用后不检查错误，因此您可以`sline`在其内容未指定时愉快地访问 - 它可能是空的，它仍然可以携带上一次迭代的内容，它可能包含其他内容。

`getline()`在尝试访问字符串之前，您总是需要检查调用是否成功。惯用的方法是把它放在循环的条件下：

```
while (getline(myfile, sline)) { /* do your stuff */ } 
```

这样你只有在读取成功时才进入循环体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:02:56.763

问题是拉最后一个可用行的 getline 调用没有设置 EOF，因此在获得最后一个可用行后，您需要进行一次额外的循环迭代。该循环操作在一条空线上运行，这会导致坏事发生，即 split 不会返回具有四个元素的向量，但随后您尝试访问这些元素。

你可以使用

```
while (getline(myfile,sline))
{
    // do stuff
} 
```

代替

```
while(!myfile.eof())
{
    getline(myfile,sline);
    // do stuff
} 
```

# objective-c - 在 appDelegate init 方法中启动 self.window

> ID：11922722
> 
> 赞同：2
> 
> 时间：2012-08-12T13:58:30.750
> 
> 标签：objective-c, xcode, cordova

我是一名创建 Apache Cordova 应用程序的 Web 开发人员，所以我对 Objective-C 的了解很少。一切都很好，直到我尝试用视频补充启动画面。它有点做，但不完全。它首先显示 Default.png，然后是 SplashScreenLoader。然后它实际上播放了视频，我知道这一点，因为发出了音频，但没有显示视频层。

我发现 self.window 或 self.viewController 都在 didFinishLaunchingWithOptions 中定义，因此它们不存在于 - (id) init 方法中。因此，我找不到将其放置在加载飞溅顶部的方法。

我的 init 方法目前在 AppDelegate.m 中如下所示：

```
- (id) init {   

NSString *moviePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Splash_v1.mp4"];
 NSURL *movieURL = [NSURL fileURLWithPath:moviePath];

 MPMoviePlayerController* moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL: movieURL];
 moviePlayer.controlStyle = MPMovieControlStyleNone;
 [moviePlayer.view setFrame: self.window.bounds];
 [self.window addSubview:moviePlayer.view];
 [self.window makeKeyAndVisible];
 [moviePlayer play];

NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage]; 
[cookieStorage setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];

[CDVURLProtocol registerURLProtocol];

return [super init]; 
```

}

这里 self.window 为空，我还尝试使用以下代码设置 self.window：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
self.window = [[[UIWindow alloc] initWithFrame:screenBounds] autorelease]; 
```

...没有占上风。它实际上设置了它，但是对于后续代码它不想这样做。

所以我想知道的是，在 didFinishLaunchingWithOptions 启动之前，我如何将此视频放在启动画面的内容之上？

提前致谢，//彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:06:48.760

> 所以我想知道的是，在 didFinishLaunchingWithOptions 启动之前，我如何将此视频放在启动画面的内容之上？

实际上，您在`didFinishLaunchingWithOptions`. 将这些语句放在那里（在 Xcode 为您生成的样板代码中，您应该已经调用了`makeKeyAndVisible`，所以只需对其进行补充）：

```
[self.window addSubview:moviePlayer.view];
[self.window makeKeyAndVisible]; 
```

之前已经实例化了你的moviePlayer。

避免空白屏幕的一种方法可能是：

1.  创建一个包含 Default.png 图像的 UIImageView；

2.  通过将 UIImageView 作为子视图添加到您的 self.window 来显示此类 UIImageView（这将不会产生黑屏效果）；

3.  初始化您的播放器（我认为这需要一些时间，因此会出现黑屏）并将其添加到 UIImageView 下方；

4.  当播放器准备好时 ( `viewDidLoad`) 将其推到 UIImageView 的顶部。

最后，我不知道您的播放器将如何发出视频播放结束的信号，但我假设您有一些委托方法；让您的 appDelegate 也成为您的播放器代表，然后从 self.window 中删除 UIImageView 和播放器，并将您的其他视图添加到 self.window。

希望这可以帮助。

编辑：

这是我将在您的应用程序委托 appDidFinishLaunching 中尝试和执行的粗略草图：

```
self.moviePlayer = <INIT MOVIEW PLAYER CONTROLLER>
self.backgroundImage = <INIT UIImageView with Default.png>

[self.window addSubview:self.moviePlayer.view];
[self.window addSubview:self.backgroundImage];
[self.window makeKeyAndVisible]; 
```

在您的电影播放器​​ viewDidLoad 中：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    ...
    [self.view.superview addSubview:self.view]; //-- this will just move the player view to the top
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:23:39.880

如果这对其他人有帮助，我遇到了同样的问题，通过移动 '[self.window makeKeyAndVisible];' 像这样在子视图上方，所以在 appdelegate.m 中：

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 300)];
myView.backgroundColor = [UIColor blueColor];

[self.window makeKeyAndVisible];
[self.window addSubview:myView]; 
```

这工作正常，但如果我交换最后两个语句，子视图不会显示。

# git - git pull 更改到子分支

> ID：11922725
> 
> 赞同：2
> 
> 时间：2012-08-12T13:59:24.530
> 
> 标签：git

我克隆了一个名为 A 的存储库并创建了一个名为 Li 的新分支。
现在有人更新了 A 的主分支，我使用以下方法将更改拉到我的主分支：

```
git checkout master
git pull origin master 
```

现在我想用这些更改来更新我的分支 (Li)。我该怎么做？

另外，在使用更改更新我的本地分支之后，我也需要使用更改更新远程 Li 分支，对吗？我是否使用：

```
git checkout Li
git push origin Li 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T14:02:47.163

要合并分支中的更改`master`，请`Li`使用以下命令：

```
git checkout Li
git merge master 
```

您将更改推送到原点是正确的，这将`Li`在`origin`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:03:52.550

您首先将分支 master 与分支 Li 合并

```
git checkout Li
git merge master 
```

然后你将本地的 Li 分支推送到远程仓库

```
git push origin Li 
```

# sorting - 按升序就地合并两个排序数组

> ID：11922730
> 
> 赞同：0
> 
> 时间：2012-08-12T14:01:04.810
> 
> 标签：sorting, merge

按升序就地合并两个排序数组。例如：

```
A[]=7,15,21
B[]=5,12 
```

输出

```
A[]=5,7,12
B[]=15,21 
```

除了少数变量外，您不能占用任何额外的内存空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T06:09:30.207

您可能需要检查[两个数组的就地合并](https://stackoverflow.com/q/4553090/133414)）和[http://www.dcs.kcl.ac.uk/technical-reports/papers/TR-04-05.pdf](http://www.dcs.kcl.ac.uk/technical-reports/papers/TR-04-05.pdf)。[如何将两个排序数组合并为一个排序数组？](https://stackoverflow.com/q/5958169/1334148)是它的一个更简单的版本。

# vim - 在 vimrc 中设置 servername 而不是命令行开关

> ID：11922732
> 
> 赞同：8
> 
> 时间：2012-08-12T14:01:20.207
> 
> 标签：vim

是否可以从我的 vimrc 设置 vim 的服务器名而不是使用`--servername`命令行开关？如果我尝试其中之一

```
set v:servername="TEX"
let v:servername="TEX" 
```

我收到未知选项错误，无法分别覆盖只读变量错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T14:20:21.563

根据文档 ( `:help v:servername`)，该`v:servername`变量是只读的。

并根据源代码`serverRegisterName()`从`if_xcmdsrv.c`三个地方调用：

*   `main()`功能
*   X11主窗口初始化
*   GTK+ 主窗口初始化

所以你的问题的答案是否定的，除了命令行参数，你不能在你的`.vimrc`或其他任何地方设置服务器名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-22T23:50:57.457

对于足够新的 vim 来说，有函数`remote_startserver`.

```
 *remote_startserver()* *E941* *E942*
remote_startserver({name})
        Become the server {name}.  This fails if already running as a
        server, when |v:servername| is not empty.

        Can also be used as a |method|: >
            ServerName()->remote_startserver() 
```

从 Vim 版本 8.0.475 开始可用。[根据 VimTeX 文档]

所以你可以简单地启动没有服务器名的 vim，然后在 vimrc 中启动一个。

**注意**：如果有多个正在运行的 Vim 实例，Vim 会自动更改服务器名（附加 1、2 等）以避免冲突。

# c - 防止 CreateProcess 上出现“程序停止工作”消息

> ID：11922741
> 
> 赞同：2
> 
> 时间：2012-08-12T14:02:41.190
> 
> 标签：c, winapi

我用 CreateProcess 创建了一个孩子并等待它完成。这个过程很可能会崩溃。是否可以防止孩子出现“%PROGRAMNAME% 停止工作”对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T15:22:15.207

孩子是您自己的代码（即，您可以修改源代码吗）？如果是，您可以捕获未处理的异常并退出 - 使用[SetUnhandledExceptionFilter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680634%28v=vs.85%29.aspx)函数。

如果不是，那么您可以作为调试器附加到进程（使用 DEBUG_ONLY_THIS_PROCESS 的 CreateFile）并运行一个简单的事件循环（参见[MSDN 上的主题](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681675%28v=vs.85%29.aspx)）。

我似乎记得有一个系统范围的注册表项来禁用默认的 SEH 对话框，但我找不到它，所以我可能弄错了。这对您的情况来说是否太粗糙了？

# asp.net - CKEDITOR ASP.NET 自定义属性

> ID：11922746
> 
> 赞同：1
> 
> 时间：2012-08-12T14:02:56.170
> 
> 标签：asp.net, editor, ckeditor

我在 ASP.NET 中使用 CKEDITOR，我想在按钮上创建自定义配置。这意味着当用户按下图像按钮时，图像对话框会自动弹出，诸如“样式表类”之类的一些字段已准备好写入。这意味着客户不必每次插入图像时都输入此类详细信息，但此类内容已在编辑器中预定义。

怎么可能做到这一点？

# jquery - Backbone.js + underscore.js + jQuery in requireJS ...这是正确的方法吗？

> ID：11922747
> 
> 赞同：1
> 
> 时间：2012-08-12T14:03:03.487
> 
> 标签：jquery, backbone.js, requirejs, underscore.js

我正在尝试更多地了解requireJS。所以，如果我理解正确，下面的代码应该是合法的。这是使我的应用程序模块化的正确方法吗？

这是`application.js`，其中`data-main`属性指向：

```
requirejs.config({
    baseUrl: 'scripts/vendor', // By default, load all from vendor folder
    shim: {
        'backbone' : { // Do not support module loading
            deps: ['underscore', 'jquery'], // Do not support module loading
            exports: 'Backbone' 
        },
    },
    paths: {
        models: '../application/models', // Load from this folder if starts with user
        views: '../application/views',   // As above...
    }
});

requirejs(['jquery', 'backbone', 'views/user'], function($, Backbone, UserView) {
}); 
```

我的视图/模型模块（现在非常没用）：

文件`application/views/user.js`：

```
// underscore should be loaded now
define(['jquery', 'backbone', 'models/user'], function($, Backbone, User) { 
    return Backbone.View.extend({
        model: User,

        el: $('tr'),    

        initialize: function() {}
    });
}); 
```

文件`application/models/user.js`：

```
define(['backbone'], function(Backbone) { // underscore should be loaded now
    return Backbone.Model.extend({
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T16:10:04.130

您还需要填充下划线，因为它不兼容 AMD。

```
 underscore: {
  exports: '_'
} 
```

我建议查看[https://github.com/tbranyen/backbone-boilerplate/](https://github.com/tbranyen/backbone-boilerplate/)，因为使用 RequireJS 会让人头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:22:13.040

使用 lodash 代替下划线，是一个优越的完全兼容的解决方案并且支持 AMD 负载。检查基准和文档；）

```
requirejs.config({
    appDir: ".",
    baseUrl: "js",
    paths: { 
        'jquery': ['//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min','libs/jquery-min'],
        'lodash': 'libs/lodash.min',
        'backbone': 'libs/backbone.min',
    },
    shim: {
        'backbone': {deps:['lodash','jquery'], exports: 'Backbone'}
    }
});

require([
    'jquery', 'lodash','backbone'
],
function($, _){
    return {};
}); 
```

# java - 从数据库加载顶点和边时，顶点绘制器遇到错误

> ID：11922748
> 
> 赞同：0
> 
> 时间：2012-08-12T14:03:11.127
> 
> 标签：java, render, jung, vertex, transformer

我正在构建简单的家谱应用程序并使用 Jung 来绘制图表。到目前为止，我可以使用 zentus 的 sqlitejdbc 绘制图表并将其保存到嵌入式数据库中。我还没有创建清除画布的函数，所以我必须重新启动应用程序来测试打开数据库。但是当我想重新加载它们时，应用程序只是冻结了，我遇到了这个错误。

> ```
>  path:C:\Users\PaLi\Desktop\psm things\chart4.db
>     Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
> at FamTree.vertexPainter.transform(vertexPainter.java:20)
> at FamTree.vertexPainter.transform(vertexPainter.java:1)
> at edu.uci.ics.jung.visualization.renderers.BasicVertexRenderer.paintShapeForVertex(BasicVertexRenderer.java:98)
> at edu.uci.ics.jung.visualization.renderers.BasicVertexRenderer.paintIconForVertex(BasicVertexRenderer.java:74)
> at edu.uci.ics.jung.visualization.renderers.BasicVertexRenderer.paintVertex(BasicVertexRenderer.java:37)
> at edu.uci.ics.jung.visualization.renderers.BasicRenderer.renderVertex(BasicRenderer.java:70)
> at edu.uci.ics.jung.visualization.renderers.BasicRenderer.render(BasicRenderer.java:55)
> at edu.uci.ics.jung.visualization.BasicVisualizationServer.renderGraph(BasicVisualizationServer.java:367)
>  at edu.uci.ics.jung.visualization.BasicVisualizationServer.paintComponent(BasicVisualizationServer.java:321)
> at javax.swing.JComponent.paint(JComponent.java:1054)
> at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
> at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
> at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
> at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
> at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
> at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
> at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
> at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
> at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
> at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
> at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
> at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
> at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
> at java.awt.EventQueue.access$000(EventQueue.java:101)
> at java.awt.EventQueue$3.run(EventQueue.java:666)
> at java.awt.EventQueue$3.run(EventQueue.java:664)
> at java.security.AccessController.doPrivileged(Native Method)
> at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
> at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
> at    java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
> at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
> at    java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
> at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
> at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
> at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
> ```

这是顶点画家转换器的代码。如果它不加载数据库部分，它工作得很好。

```
package FamTree;

import org.apache.commons.collections15.Transformer;

import java.awt.*;
import java.util.Map;

class vertexPainter implements Transformer<Integer, Paint>
{
private Map<Integer,Person> tempV;

public vertexPainter(Map<Integer,Person> passV)
{
    tempV = passV;
}
public Paint transform(Integer v) 
{

    if (tempV.get(v).getpSex().equalsIgnoreCase("male")) 
        return (Color.blue); 
    else
    return (Color.red);

}
} 
```

这是graph的初始化和vv的设置。

```
 public TCanvas(){

     graph = new SparseMultigraph<Integer,Number>();

     layout2 = new StaticLayout<Integer,Number>(graph,new Dimension(2000,2000));

     vv =  new VisualizationViewer<Integer,Number>(layout2);
     vv.setBackground(Color.white);
     vv.setVertexToolTipTransformer(new ToStringLabeller<Integer>());
     vv.getRenderContext().setVertexFillPaintTransformer(new vertexPainter(vertex));
vv.getRenderer().getVertexLabelRenderer().setPosition(Renderer.VertexLabel.Position.S);
     vv.getRenderContext().setVertexLabelTransformer(new vertexLabel(vertex));
     vv.getRenderContext().setEdgeDrawPaintTransformer(new edgePainter());

     Transformer<Number,String> stringer = new Transformer<Number,String>(){
         public String transform(Number e) {
             return "Edge:"+e+ "-"+graph.getEndpoints(e).toString();
         }
     };

     vv.getRenderContext().setEdgeLabelTransformer(stringer);

     EdgeLabelRenderer edgeLabelRenderer= vv.getRenderContext().getEdgeLabelRenderer();
     edgeLabelRenderer.setRotateEdgeLabels(false);

     gm = new DefaultModalGraphMouse<Integer, Number>();
     vv.setGraphMouse(gm);
     gm.add(new PopupGraphMousePlugin());

     GraphZoomScrollPane scrollPane2 = new GraphZoomScrollPane(vv);

     JPanel vvPanel = new JPanel();
     vvPanel.setLayout(new BorderLayout());
     vvPanel.add(scrollPane2);

     addBottomControls(vvPanel);

     Container content = getContentPane();
     content.add(vvPanel);  
     }//TCanvas() 
```

这是加载数据库的部分。

```
 menu.add(new AbstractAction("Open") {
        public void actionPerformed(ActionEvent e) {

            JFileChooser open  = new JFileChooser();
            final File file ;

            int vat = open.showOpenDialog(rootPane);

            if(vat==JFileChooser.APPROVE_OPTION){

                file = open.getSelectedFile();

                String fPath = file.getAbsolutePath();

                System.out.println("path:"+fPath);
                try{

                    Class.forName("org.sqlite.JDBC");
                    Connection conn = DriverManager.getConnection("jdbc:sqlite:"+fPath);

                     Statement stat = conn.createStatement();

                     ResultSet rs = stat.executeQuery("select * from Person;");
                     while (rs.next()) {

                        Integer pid = rs.getInt("pID");
                        String pname = rs.getString("pName");
                        String psex = rs.getString("pSex");
                        Integer fatherid = (Integer)rs.getInt("fatherID");
                        Integer motherid = (Integer)rs.getInt("motherID");
                        Integer spouseid = (Integer)rs.getInt("spouseID");

                        Person personInfo = new Person();

                        personInfo.setpID(pid);
                        personInfo.setpName(pname);
                        personInfo.setpSex(psex);
                        personInfo.setFatherID(fatherid);
                        personInfo.setMotherID(motherid);
                        personInfo.setSpouseID(spouseid);

                        vertex.put(pid,personInfo);
                        graph.addVertex(pid);
                        vv.repaint();

                        ResultSet rs2 = stat.executeQuery("select * from Location;");
                         while (rs2.next()) {

                             if(rs2.getInt("pID")==pid){

                                 Point2D.Double loc = new Point2D.Double();

                                 Double x = rs2.getDouble("pointX");
                                 Double y = rs2.getDouble("pointY");
                                 loc.setLocation(x, y);

                                 layout2.setLocation(pid, vv.getRenderContext().getMultiLayerTransformer().inverseTransform(loc));
                                 vv.repaint();
                             }
                         }
                         rs2.close();

                     }
                     rs.close();

                    ResultSet rs3 = stat.executeQuery("select * from Relation;");

                    while (rs3.next()) {

                         Point2D.Double loc2 = new Point2D.Double();

                         Number edgeid = (Number)rs3.getInt("edgeID");
                         Integer v1 = rs3.getInt("vertex1");
                         Integer v2 = rs3.getInt("vertex2");
                         String type = rs3.getString("RelationType");

                         Relation relation = new Relation(edgeid, v1, v2, type);
                         edge.put(edgeid, relation);
                         if(type.equalsIgnoreCase("DIRECTED")){
                             graph.addEdge(edgeid, v1, v2, EdgeType.DIRECTED);
                         }
                         if(type.equalsIgnoreCase("UNDIRECTED")){
                             graph.addEdge(edgeid, v1, v2, EdgeType.UNDIRECTED);
                         }
                        vv.repaint();

                    }
                    rs3.close();

                    conn.close();
                    vv.repaint();

                }
                catch (Exception ex) {
                    // TODO: handle exception
                    ex.printStackTrace();
                }

            }

        }}); 
```

我真的不知道这里发生了什么，因为我很确定打开和检索数据库部分没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:08:12.223

在`vertexPainter#transform`中，映射是`null`或没有整数键（“ `v`”）的值，或者一条记录的 value`pSex`属性为 null（可能未在数据库表上设置）。

调试器可以准确地告诉您实际问题是什么。

* * *

在`TCanvas`构造函数中，我看到了这行代码：

```
vv.getRenderContext().setVertexFillPaintTransformer(new vertexPainter(vertex)); 
```

那是您使用地图创建画家的地方，但我没有看到该地图的声明和初始化。所以很有可能，您将一个空地图传递给画家，因此画家找不到键的值（因为地图是空的）。这肯定会导致 NPE。

* * *

这与研究错误日志无关。在日食中：

1.  切换到调试视角
2.  找到“断点”视图（通常是右上角的选项卡）
3.  在该视图上有一个带有“J”和感叹号的按钮，工具提示显示“添加 Java 异常断点”
4.  单击该按钮并键入 NPE，然后选择 NullPointerException
5.  现在你有一个断点，它会在每个空指针异常时停止
6.  调试您的应用程序（如“运行”）
7.  最终应用程序将停止，您将在 Debug 视图中看到堆栈跟踪。一帧它是您的 vertexPainter，选择该行，它将带您到抛出 NPE 的代码行。现在您必须查看变​​量值并使用检查功能。

# c# - 自定义 DataGridViewColumn - 直到鼠标双击单元格才被绘制（可见）

> ID：11922750
> 
> 赞同：1
> 
> 时间：2012-08-12T14:03:34.840
> 
> 标签：c#, .net, datagridview, datagridviewcolumn

我需要为 datagridview 构建一个自定义 DataGridViewColumn 所以......想象以下场景（骨架）：

```
public class CustomColumn : DataGridViewColumn
{
        public CustomColumn(PropertyEditor propertyEditor)
            : base(new CustomCell(propertyEditor))
        {            
        }

        (...)
}

class CustomCell : DataGridViewTextBoxCell
{
        public PropertyEditor propertyEditor = null;

        public CustomCell() : base()
        {                
        }

        public CustomCell(PropertyEditor propertyEditor)
            : this()
        {                
            this.propertyEditor = propertyEditor;
        }

        (...)

        public override object DefaultNewRowValue
        {
            get
            {
                return this.propertyEditor.Source;
            }
        }          

        (...) 
}

class CustomEditingControl : PropertyEditor, IDataGridViewEditingControl
{
        (...)
} 
```

*PropertyEditor 是 National Instruments 的一个组件。这是单元格的内容。

所以我以编程方式创建一个列，然后添加：

```
PropertyEditor propertyEditor = new PropertyEditor();
propertyEditor.Source = new PropertyEditorSource(new ScatterPlot(), "LineStep");
propertyEditor.SourceValue = "XYStep"; // Default value for property LineStep

PropertyEditorColumn col = new PropertyEditorColumn(propertyEditor);
this.dataGridView1.Columns.Add(col); 
```

我的问题是在 DefaultNewRowValue 中，this.propertyEditor 为 null 而不是通过参数传递的，因为添加列后会自动调用不带参数的 CustomCell 构造函数。我想用默认值初始化单元格，并将其作为参数传递。我怎样才能做到这一点？

谢谢。

# sh - 没有 LD_PRELOAD LD_LIBRARY_PATH 不起作用

> ID：11922751
> 
> 赞同：0
> 
> 时间：2012-08-12T14:03:40.173
> 
> 标签：sh, ld, ld-preload

我正在设置 LD_LIBRARY_PATH 以使用较新的 Qt Mobility 而不是较旧的 Qt Mobility，以便非本机应用程序可以使用它。

```
export LD_LIBRARY_PATH=/opt/qtm12/lib 
```

其中一个库是 libQtSensors.so.1

但仍然，

```
/usr/lib/libQtSensors.so.1 
```

被用来代替

```
/opt/qtm12/lib/libQtSensors.so.1 
```

如果我 LD_PRELOAD 第二个库，一切正常，但我不能只预加载所有 qt 移动库，因为它不是一个总是使用的库。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:09:49.227

```
$echo "/opt/qtm12/lib/" > /etc/ld.so.conf.d/qtm12.txt

$ldconfig -v 
```

# combobox - 在 Combobox 上使用 Xtemplate 不要让我选择项目（项目在 html 上没有 internalId）

> ID：11922755
> 
> 赞同：2
> 
> 时间：2012-08-12T14:03:57.507
> 
> 标签：combobox

我不明白为什么使用 Xtemplate 组合框中的项目不再可选择。我可以在 html 代码中看到这些项目没有更多的 internalId。这是我的代码：

```
Ext.define('app.widget.search.PredictiveInput', {
extend: 'Ext.form.field.ComboBox',
alias: 'widget.predictiveinput',

store: 'SearchSyntax',
storeCriteriaSyntax: 'SearchPredictiveInput',
nodeField: 'is_node',
leafField: 'is_leaf',
lastLeafField: 'is_last_leaf',
levelField: 'level',
triggerAction: 'all',
flex: 1,
queryMode: 'local',
displayField: 'subject_display',
valueField: 'id',
pageSize: 10,

setCustomTpl: function() {
var me = this;
me.tpl = Ext.create('Ext.XTemplate',
'<tpl for=".">',
' <div class="x-combo-list-item-isNode-{nodeField}' + 
' x-combo-list-item-isLeaf-{leafField}' + 
' x-combo-list-item-isLastLeaf-{lastLeafField}' +
' x-combo-list-item-level-{levelField}" role="option">{displayField</div>', 
'</tpl>'           
);
},

initComponent: function() {
this.callParent();
this.setCustomTpl();
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:47:06.430

我认为您必须添加课程`x-boundlist-item`。

请参阅[此处的评论](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-tpl)。

```
// Template for the dropdown menu.
// Note the use of "x-boundlist-item" class,
// this is required to make the items selectable.
tpl: Ext.create('Ext.XTemplate',
    '<tpl for=".">',
        '<div class="x-boundlist-item">{abbr} - {name}</div>',
        '</tpl>'
    ), 
```

# xpath - 无法使用 HtmlUnit 通过 xpath 提取内容

> ID：11922757
> 
> 赞同：0
> 
> 时间：2012-08-12T14:04:29.520
> 
> 标签：xpath, htmlunit

我正在尝试从这个马耳他新闻页面中提取标题

[http://www.maltarightnow.com/Default.asp?module=news&at=Inawgurat+%26%23289%3Bnien+%26%23289%3Bdid+f%27Marsalforn&t=a&aid=99839603&cid=19](http://www.maltarightnow.com/Default.asp?module=news&at=Inawgurat+%26%23289%3Bnien+%26%23289%3Bdid+f%27Marsalforn&t=a&aid=99839603&cid=19)

使用以下 XPath

`html/body/table/tbody/tr[2]/td/table/tbody/tr[4]/td/table/tbody/tr[1]/td[1]/table/tbody/tr/td/table/tbody/tr/td[2]/table[3]/tbody/tr[1]/td/h1`

（不是很漂亮，但这个 Xpath 是由 Chrome 生成的，因为缺少元素 ID，所以很有意义）。

我正在使用 Java 中的[HTMLUnit](http://htmlunit.sourceforge.net/)以编程方式提取标题。这是代码。我使用相同的代码（显然使用不同的 xpath）提取了新闻内容和文章日期。

```
public static void main (String[] args) {
        WebClient webClient = new WebClient();
        HtmlPage page = null;
        try {
            page = webClient.getPage("http://www.maltarightnow.com/?module=news&at=Inawgurat+%26%23289%3Bnien+%26%23289%3Bdid+f%27Marsalforn&t=a&aid=99839603&cid=19");
        } catch (FailingHttpStatusCodeException | IOException e) {
        }

        String text = ((DomElement)page.getFirstByXPath("html/body/table/tbody/tr[2]/td/table/tbody/tr[4]/td/table/tbody/tr[1]/td[1]/table/tbody/tr/td/table/tbody/tr/td[2]/table[3]/tbody/tr[1]/td/h1")).asText();
        System.out.println(text);
    } 
```

但是它为提到的 xpath 提供了一个空指针

`((DomElement)page.getFirstByXPath("html/body/table/tbody/tr[2]/td/table/tbody/tr[4]/td/table/tbody/tr[1]/td[1]/table/tbody/tr/td/table/tbody/tr/td[2]/table[3]/tbody/tr[1]/td/h1")).asText();`

没有找到 DomElement，我确定它在那里，毕竟 Chrome 创建了 XPath。

这可能是什么原因？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:00:58.423

这并不容易。你应该：

1.  查看 HTMLUnit 实际创建的文本`Page.asXml()`
2.  更正您正在遍历的 XPath，以匹配上一步中输出的任何 HTMLUnit

# caching - Cassandra jconsole 的 Caches 节点不可扩展

> ID：11922761
> 
> 赞同：0
> 
> 时间：2012-08-12T14:05:15.703
> 
> 标签：caching, cassandra, jmx, jconsole

我在 Linux 上安装了 Cassandra 1.1.2 的 1 个节点，我想确定每个 CF 在缓存中占用的大小，以及每个 CF 在缓存中的百分比（对于行缓存和键缓存）

当我通过 jconsole 连接到该节点并在 jconsole 中扩展 org.apache.cassandra.db 节点时，“缓存”节点无法扩展，尽管根据：

[http://www.datastax.com/docs/1.1/operations/monitoring#monitoring-and-adjusting-cache-performance](http://www.datastax.com/docs/1.1/operations/monitoring#monitoring-and-adjusting-cache-performance)

它应该是可扩展的。

此外，nodetool 的输出也不包含 Key 缓存容量、Key 缓存大小和 Key 缓存命中率的属性：

```
 Column Family: io2
            SSTable count: 4
            Space used (live): 566387478
            Space used (total): 566387478
            Number of Keys (estimate): 3858816
            Memtable Columns Count: 0
            Memtable Data Size: 0
            Memtable Switch Count: 0
            Read Count: 0
            Read Latency: NaN ms.
            Write Count: 0
            Write Latency: NaN ms.
            Pending Tasks: 0
            Bloom Filter False Postives: 0
            Bloom Filter False Ratio: 0.00000
            Bloom Filter Space Used: 7238040
            Compacted row minimum size: 125
            Compacted row maximum size: 149
            Compacted row mean size: 149 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:12:45.400

Cassandra jconsole 的 Caches 节点在 Cassandra 1.1.2 中是不可扩展的，因为在 1.1 中单个 per cf 缓存被合并为一个全局缓存，因此在 1.1.2 中无法看到这些字段

[http://www.datastax.com/dev/blog/caching-in-cassandra-1-1](http://www.datastax.com/dev/blog/caching-in-cassandra-1-1)

# python - 如何为小部件添加轮廓边框？

> ID：11922769
> 
> 赞同：9
> 
> 时间：2012-08-12T14:06:23.800
> 
> 标签：python, wxpython, wxwidgets

如何在 wxpython 中为小部件添加轮廓边框？（任何小部件，例如 a `wx.Button`）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T14:52:41.783

对于面板，您可以使用

```
p = wx.Panel(....., style=wx.SUNKEN_BORDER) 
```

在那里你可以从常量中选择：

```
wx.SIMPLE_BORDER
wx.RAISED_BORDER
wx.SUNKEN_BORDER
wx.NO_BORDER 
```

如果你想在周围创建边框`wx.Button`，我会使用我的自定义位图`wx.BitmapButton`：

```
b = wx.BitmapButton(pane, -1, wx.Bitmap('buttons/my_beautiful_button.png')) 
```

对于任何小部件，我认为您始终可以创建`wx.Panel`带有一些边框的小部件并将小部件放入面板中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T14:44:44.257

没有简单的方法可以更改 wxPython 中“标准”小部件的外观（“标准”是指 wx.Button、wx.CheckBox 等），因为它们使用底层操作系统窗口管理器的本机控件，您无法更改那。

您的方法是深入`wx.lib`研究可以找到更好的通用控件和不使用本机控件但更喜欢自定义呈现的窗口的位置。

如果您想更好地控制按钮，请使用[`wx.lib.buttons`](http://wxpython.org/docs/api/wx.lib.buttons-module.html). 相同的规则适用于其他控件 - 看看`wx.lib`。

# java - 存在 JMenu 时 JPanel#paintChildren(Graphics) 的行为不正确？

> ID：11922771
> 
> 赞同：4
> 
> 时间：2012-08-12T14:06:45.680
> 
> 标签：java, swing, jpanel

我想要做的：
创建一个`JPanel`的子类以在包含的组件之上绘制一个简单的叠加层。

为什么我不用`JLayeredPane`？
见`JComponent#isOptimizedDrawingEnabled()`。

当 a`JMenu`出现在 a 中时，使用重写的方法`JFrame`添加 a时，在传递的 Graphics 对象中提供了不正确的坐标起点，如以下代码示例所示：`JPanel``paintChildren(Graphics)`

```
import java.awt.Color;
import java.awt.FontMetrics;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public final class Sscce {
    public static void main(String[] args) {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    // a normal frame
                    JFrame f = new JFrame();

                    // set up a simple menu
                    JMenuBar mb = new JMenuBar();
                    JMenu m = new JMenu("Test");
                    JMenuItem mi = new JMenu("Whatever");
                    m.add(mi);
                    mb.add(m);
                    f.setJMenuBar(mb);

                    // a panel with a simple text overlay over components.
                    // works much faster than JLayeredPane, which doesn't have
                    // isOptimizedDrawingEnabled()
                    JPanel p = new JPanel() {
                        @Override
                        public void paint(Graphics g) {
                            // I'm not so stupid to draw stuff here
                            super.paint(g);
                            // JavaDoc: delegates to paintComponent, paintBorder, paintChildren
                            // in that order
                        }

                        @Override
                        protected void paintComponent(Graphics g) {
                            super.paintComponent(g);

                            // it is common knowledge that children are painted after parent
                            Graphics tmp = g.create();
                            try {
                                tmp.setColor(Color.MAGENTA);
                                tmp.fillRect(0, 0, getWidth(), getHeight());
                            } finally {
                                tmp.dispose();
                            }
                        }

                        @Override
                        protected void paintChildren(Graphics g) {
                            super.paintChildren(g);

                            // draw some text
                            FontMetrics fm = g.getFontMetrics();
                            // will be drawn outside panel; under menu
                            g.drawString("TEST TOP/LEFT", 0 + getX(), 0 + getY());
                            final String s = "TEST BOTTOM/RIGHT";
                            // will be drawn noticeably above the bottom
                            g.drawString(s,
                                    getWidth() - fm.charsWidth(s.toCharArray(), 0, s.length()),
                                    getHeight() - fm.getHeight());
                        }
                    };
                    // add something to the panel
                    p.add(new JTextArea(10, 15));
                    f.add(p);

                    f.pack();
                    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    f.setVisible(true);
                }
            });
        } catch (Throwable t) {
            // this is a SSCCE
        }
    }
} 
```

第一个字符串绘制在 JPanel 之外（在 JMenu 下），即使两个坐标都是非负数。
第二个字符串不在右下角绘制。它被 JMenu 的高度向上推。

[图片](http://www.authsvc.eu/java/jpanel_paintchildren_override.png)

虽然：

当 AWT 调用此方法时，Graphics 对象参数会预先配置适当的状态以在此特定组件上绘图：

*   Graphics 对象的颜色设置为组件的前景属性。
*   Graphics 对象的字体设置为组件的字体属性。
*   **Graphics 对象的平移设置为坐标 (0,0) 表示组件的左上角。**
*   Graphics 对象的剪辑矩形设置为需要重新绘制的组件区域。

程序必须使用此 Graphics 对象（或从它派生的对象）来呈现输出。他们可以根据需要自由更改 Graphics 对象的状态。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T17:10:59.493

> 第一个字符串绘制在外部`JPanel`（在 下`JMenu`），即使两个坐标都是非负的。第二个字符串不在右下角绘制。它被`JMenu`.

在这两种情况下，请注意`drawString()`期望坐标[代表](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html). `String`字体的上升和下降在这种情况下很有用。这可能是一个巧合，`mb.getHeight()`并且`fm.getHeight()`具有可比性。

![在此处输入图像描述](../Images/df48ea791937358926b888768c40c368.png)

```
@Override
protected void paintChildren(Graphics g) {
    super.paintChildren(g);

    // draw some text
    FontMetrics fm = g.getFontMetrics();
    // will be drawn outside panel; under menu
    g.drawString("TEST TOP/LEFT", 0, fm.getAscent());
    final String s = "TEST BOTTOM/RIGHT";
    // will be drawn noticeably above the bottom
    g.drawString(s, getWidth() - fm.stringWidth(s),
        getHeight() - fm.getDescent());
} 
```

# javascript - node.js 样板 + 最佳实践

> ID：11922773
> 
> 赞同：15
> 
> 时间：2012-08-12T14:06:55.913
> 
> 标签：javascript, node.js, express, socket.io

我是 node.js 的新手，刚刚开始..

我追求一个好的node.js样板和最佳实践，例如编码设计模式（例如依赖注入等。我读过Douglas Crockford的JS设计模式一次......但想看看节点的差异) 名称间距 - 具有目录结构等。

据我所知，关于 node.js 堆栈：

*   快递 - 必须
*   async - 必须（流控制）
*   节点 - ?
*   socket.io - 网络套接字
*   nowjs - 很想使用它，但据我所知，缩放版本不会免费（“我们很快就会授权目前正在开发的 NowJS 的分布式版本。请通过 sales@nowjs.com 联系我们”）
*   下划线 + 主干 - ?
*   数据库层 - ?
*   模板 - 我使用 handleBars - jquery 是必须的
*   require.js - （我不想使用 commonJS...不确定服务器上的集成是如何工作的）

那么从库列表中添加/删除什么？我在哪里可以找到专业的样板？以及与之相关的任何其他提示。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T18:03:24.913

恕我直言，对于项目骨架，比包含哪些模块（无论如何，这些模块很容易使用 npm 安装）更重要的是如何构建项目，如何正确使用集群以及为生产中的开发 + 进程监控进行热重载。

您可以在以下位置看到其中一些技巧： http: ~~[//nodebootstrap.com](http://nodebootstrap.com)~~ [https://github.com/inadarei/nodebootstrap](https://github.com/inadarei/nodebootstrap)

^(编辑：截至 2014 年 12 月 3 日的死链接)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-08T05:14:06.823

我一直在寻找一个节点样板项目，并遇到了这个，它似乎是 GitHub 上最受欢迎的，几乎是其他任何一个项目的 10 倍

[https://github.com/sahat/hackathon-starter](https://github.com/sahat/hackathon-starter)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T12:18:34.400

我有点晚了，但希望这对其他人有帮助。

nodebootstrap（以及几乎所有其他节点样板项目）的缺点之一是它没有提供任何样板代码来开始使用 Backbone.js

类似地，还有一些很棒的 Backbone.js 样板项目，其中一些（参见[Yeoman.io](http://yeoman.io)），甚至包括小节点开发服务器，但这些很难扩展为用于构建 web 应用程序的完整的后端/前端解决方案。

因此，我启动了[webapp-boilerplate](https://github.com/skaapgif/webapp-boilerplate "节点/骨干网络应用程序样板")，它使用 grunt-tasks 进行编译，并在代码更改时重新加载服务器。它仍在进行中，但应该可以让您快速入门。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-25T01:52:20.867

我认为 Backbone-Require-Boilerplate 令人印象深刻。

[https://github.com/BoilerplateMVC/Backbone-Require-Boilerplate](https://github.com/BoilerplateMVC/Backbone-Require-Boilerplate)

包括 Backbone、Lodash、Require.js、Almond.js、jQuery、jQueryUI、jQuery Mobile、Twitter Bootstrap、Jasmine 和 Grunt。我在几分钟内就启动并运行了它，这是对 prod 与 dev 环境的差异的赞赏。

# dll - 我需要将哪些 DLL 文件添加到我的解决方案中才能使用 DbSet？

> ID：11922776
> 
> 赞同：0
> 
> 时间：2012-08-12T14:07:30.390
> 
> 标签：dll, reference

我正在尝试使用通用 DbSet 类。到目前为止，我已尝试将以下引用添加到我的解决方案中，因为[MSDN 文档](http://msdn.microsoft.com/en-us/library/gg696460%28v=vs.103%29.aspx)指出 DbSet 位于**System.Data.Entity**中：

![参考](../Images/42973f2f18fe44da14b5ade87f6c52ad.png)

但是，如下所示，我仍然无法添加对 System.Data.Entity 的引用，intellisense 的唯一建议是`EntityClient`不包含 DbSet：

![智能感知](../Images/c97cf5c530fbc0720e3c5255661e77ae.png)

Resharper/Intellisense 没有给我任何其他我可以添加的命名空间的建议。

我已经尝试清理和重建我的解决方案，并且我使用的是 .Net Framework 4 完整版（不是客户端版本）。

我尝试使用 NuGet 搜索**EntityFramework**并找到了一个我添加但无济于事的结果，如下所示：

![添加了实体框架](../Images/7f711ed2cbe2565203e789592a1afed0.png)

我需要将什么 DLL 文件添加到我的解决方案中以添加对**System.Data.Entity**的引用并使用**DbSet**类？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:11:16.777

您提到的同一个 MSDN 参考页面说您需要`EntityFramework.dll`在项目中参考。

请注意，命名空间和程序集不是一回事。以下语句有点过于简单，但您可以将命名空间视为驻留在程序集中（或通过引用变得可用）程序集。

因此，一旦您引用了程序集，您仍然需要该`using System.Data.Entity;`指令。

# windows - GetNativeSystemInfo() 和处理器组

> ID：11922777
> 
> 赞同：0
> 
> 时间：2012-08-12T14:07:40.030
> 
> 标签：windows, winapi, multiprocessing

GetNativeSystemInfo() 函数填充的 SYSTEM_INFO 的 dwNumberOfProcessors 成员是否计算所有逻辑内核，还是仅计算第一个处理器组中的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:24:09.587

GetNativeSystemInfo() 仅返回有关调用进程的处理器组的信息。:( 但看看 GetLogicalProcessorInformation：http: [//msdn.microsoft.com/en-us/library/ms683194.aspx](http://msdn.microsoft.com/en-us/library/ms683194.aspx)

# c# - 上传图片

> ID：11922786
> 
> 赞同：0
> 
> 时间：2012-08-12T14:08:35.723
> 
> 标签：c#, asp.net-mvc-3, image-processing

最近我对图像处理产生了兴趣。但我被困在漫长旅程的开始。

我在 asp.net mvc3(razor view) 项目中上传图像时遇到问题。任何人都可以建议我一个基本的示例/教程如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:49:22.327

要上传图像，只需在您的 html 中调用它。

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  <input type="file" name="file" />
  <input type="submit" value="Upload" /> 
```

}

请务必拥有`enctype = "multipart/form-data"`，否则您的文件将无法上传。然后从控制器直接处理 Request.Files 接受一个 HttpPostedFileBase

```
[HttpPost]
public ActionResult Index(HttpPostedFileBase file)
{
    if (file != null && file.ContentLength > 0) 
    {
        //file handling logic
        file.SaveAs(/* your path here */);
    }
    return RedirectToAction("Index");        
} 
```

另请记住，经典文件上传不适用于 ajax 调用。如果是这种情况，您必须使用像[这样的插件](http://blueimp.github.com/jQuery-File-Upload/)

# objective-c - 如何累积 NSTimer 值

> ID：11922792
> 
> 赞同：-1
> 
> 时间：2012-08-12T14:09:14.633
> 
> 标签：objective-c, nstimer

我有一个计时器，我可以多次启动和停止。每次计时器停止后，如何累积值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:20:33.050

我想通了...这是我的做法：

```
NSTimeInterval *accumulatedTime;
accumulatedTime += 1.0;  //  add one second 
```

这当然是假设您有支持代码来启动、暂停和停止计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:25:25.377

当计时器启动时，记下开始时间。每当计时器触发时，将当前时间和开始时间之间的差异添加到您的总数中。然后将开始时间重置为当前时间。当计时器停止时，您可以将当前时间和开始时间之间的差加到总数中，或者不根据您的应用程序，但您不会重置开始时间。当计时器重新启动时，不要在总数中添加任何内容，而是重置开始时间。

所以是这样的：

```
startTime = [[NSDate alloc] initWithTimeIntervalSinceNow]; // This is an NSDate* in your class 
```

然后当你的计时器触发时：

```
NSDate* currentTime = [NSDate dateWithTimeIntervalSinceNow];
accumulatedTime += [currentTime timeIntervalSinceDate:startTime]; // accumulatedTime is an NSTimeInterval in your class
[startTime release];
startTime = [currentTime retain]; 
```

等等

# rotation - 禁用 Z 轴旋转

> ID：11922794
> 
> 赞同：0
> 
> 时间：2012-08-12T14:09:17.363
> 
> 标签：rotation, registration, itk

我正在开发一个使用 VTK、ITK 和 QT 注册和显示 3D DICOM 图像的应用程序。

我在注册部分遇到了一些问题。

为此，我使用了 ScaleVersor3DTransform、VersorTransformOptimizer、NormalizedCorrelationImageToImageMetric 和 LinearInterpolateImageFunction。

问题是我需要锁定或禁用 Z 轴上的旋转。唯一可以旋转的轴是 X 和 Y。

我尝试从变换中获取 GetNumberOfParameters() 并将其所有值设置为 1.0（尽管我认为 Z 旋转是数组上的第三个位置），但这似乎不起作用。

我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:36:45.880

您可以通过为您不想优化的参数设置一个非常高的比例来最小化（或禁用）某个参数（在优化器上使用 SetScales）。在 ScaleVersor3DTransform 的情况下，没有单个参数代表 Z 旋转，所以恐怕它不适用于您的具体情况。

您可以考虑改用 Euler3DTransform，其中 Z 旋转是变换的特定参数。

# android - 图片未在脸书上发布

> ID：11922796
> 
> 赞同：0
> 
> 时间：2012-08-12T14:09:51.980
> 
> 标签：android, facebook

嘿，我正在使用这种代码技术在我的 fb 墙上发帖

```
 //      parameters.putString("description", "Muslim Baby Names");
            parameters.putString("picture","http://img208.imageshack.us/img208/4834/pic1qu.png"); 
```

它确实发了一个帖子，但没有发布图片颂歌。

请告诉我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:17:33.403

查看我们使用 Android SDK 的示例应用程序 Hackbook。 [这](https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/Hackbook.java#L290)是从远程 URL 将照片上传到用户墙上的相关代码。

对于您的示例，您将这样做：

```
Bundle params = new Bundle();
params.putString("url", "http://img208.imageshack.us/img208/4834/pic1qu.png");
params.putString("caption", "Muslim Baby Names");
mAsyncRunner.request("me/photos", params, "POST"); 
```

让我知道这是否有帮助！

# c# - 自定义数据注释 ( DataType )

> ID：11922799
> 
> 赞同：4
> 
> 时间：2012-08-12T14:09:58.517
> 
> 标签：c#, asp.net-mvc, data-annotations

是否可以向现有的 DataAnnotations 添加新的数据类型（我不是在寻找验证器，而是在寻找原始数据类型）。例如

目前你有

```
[DataType(DataType.Html)]
public string Footer {get; set;} 
```

您可以在混合物中添加`~Views/Shared/EditorTemplates/Html.cshtml`

我希望能够添加`[DataType(DataType.CSS)]`我知道理论上我可以使用 a`UIHint`添加特定视图，但如果可能的话，我想在更早的阶段执行此操作并指定数据类型，而不是依赖 UI 提示。

任何指针将不胜感激。快速搜索 SO 似乎有很多关于自定义元数据类型、自定义验证器和多种数据类型的答案，但我似乎找不到添加新核心数据类型的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T14:48:40.473

DataType 有[第二个构造函数](http://msdn.microsoft.com/en-us/library/cc679311.aspx)，它接受一个字符串。但是，在内部，**这实际上与使用 UIHint 属性相同**。

由于 DataType 枚举是 .NET 框架的一部分，因此无法添加新的核心 DataType。您可以做的最接近的事情是创建一个继承自 DataTypeAttribute 的新类。然后，您可以使用自己的 DataType 枚举添加一个新的构造函数。

```
public NewDataTypeAttribute(DataType dataType) : base(dataType) { }

public NewDataTypeAttribute(NewDataType newDataType) : base (newDataType.ToString()) { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:24:08.793

是的你可以。`DataTypeAttribute`有一个[接受](http://msdn.microsoft.com/en-us/library/cc679311)`string`.

# ios - coredata - 交付/设置默认数据

> ID：11922800
> 
> 赞同：2
> 
> 时间：2012-08-12T14:10:03.213
> 
> 标签：ios, core-data, app-store

我在我的 iOS 应用程序中使用 coreData。用户有可能将数据添加、删除到数据库中。我必须提供默认数据（一些不同的数据集）。目前，我正在通过第一次应用程序启动来创建数据库。我从 csv 文件中读取数据并用它创建数据库。csv 在应用程序沙箱中；coreData (managedDocument) 位于 ApplicationDocument 中（在运行时创建...）。

它非常适合我——但我问我，如果我将应用程序推送到 AppStore，Apple 会允许这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:41:00.907

这种方法没有任何问题，也不能成为拒绝的理由。还有另一种方法可以做到这一点。您可以按照现在的方式创建数据库，复制`.sqlite`文件并将其作为默认数据库提供。然后将其复制到应用程序首次运行。以下代码将执行此操作：

```
 NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent: @"YourDBName.sqlite"];
    if (![fileManager fileExistsAtPath:storeURL.path]) {
        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"YourDBName" ofType:@"sqlite"];
        if (defaultStorePath) {
            [fileManager copyItemAtPath:defaultStorePath toPath:storeURL.path error:NULL];
        }
    } 
```

使用这种方法，您无需将`csv`文件包含在您的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:39:50.767

是的，苹果确实允许发送默认填充的数据库。执行此操作的标准方法是在您的包中提供默认数据库，然后在启动时检查您的应用程序文档目录中是否有数据库，如果不存在，则将数据库从您的包复制到文档目录.

# android - 带有填充的android虚线边框

> ID：11922801
> 
> 赞同：10
> 
> 时间：2012-08-12T14:10:06.763
> 
> 标签：android, border, stroke

我有一个 RadioGroup![无线电集团](../Images/774b656692e6a87769d4a60985ac7900.png) 我想添加一个带有一些填充的虚线笔划（边框？）。

Radio Button的背景是

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/navigation"/>
    <item >
        <shape>
            <solid android:color="#00000000"/>
            <stroke android:color="#ffffff"
                    android:dashGap="5dp"
                    android:dashWidth="5dp"/>
        </shape>
    </item>
</layer-list> 
```

第二项 - 是我尝试绘制虚线。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-19T06:12:04.050

我想这会对你有所帮助。

尝试这个。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape>
            <solid android:color="#ffffff" />
            <stroke
                android:dashGap="5dp"
                android:dashWidth="5dp"
                android:width="1dp"
                android:color="#0000FF" />
            <padding
                android:bottom="5dp"
                android:left="5dp"
                android:right="5dp"
                android:top="5dp" />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-12T15:35:55.747

尝试添加`android:width="1dip"`到您的`<stroke>`标签。

# android - MediaPlayer 服务器死机

> ID：11922802
> 
> 赞同：3
> 
> 时间：2012-08-12T14:10:10.153
> 
> 标签：android, android-camera, android-videoview, audioflinger

我正在尝试循环播放 mp4 视频，但我的两台设备有问题（在所有其他设备上我的代码工作正常）*Motorola Defy 2.2.1*和*Motorola Atrix 4G 2.3*。

问题是在一次运行后媒体卡住了，我收到了这个错误：

```
08-12 17:04:15.031: W/MediaPlayer(4710): info/warning (1, 44)
08-12 17:04:15.031: I/MediaPlayer(4710): Info (1,44)
08-12 17:04:15.031: D/MediaPlayer(4710): getMetadata
08-12 17:04:30.742: W/AudioSystem(4710): AudioFlinger server died!
08-12 17:04:30.742: W/IMediaDeathNotifier(4710): media server died
08-12 17:04:30.742: E/MediaPlayer(4710): error (100, 0)
08-12 17:04:30.742: W/AudioSystem(4710): AudioPolicyService server died!
08-12 17:04:30.750: E/MediaPlayer(4710): Error (100,0)
08-12 17:04:30.750: D/VideoView(4710): Error: 100,0
08-12 17:04:30.750: E/MediaPlayer(4710): stop called in state 0
08-12 17:04:30.750: E/MediaPlayer(4710): error (-38, 0)
08-12 17:04:30.750: W/MediaPlayer(4710): mediaplayer went away with unhandled events
08-12 17:04:59.711: D/dalvikvm(4710): GC_FOR_MALLOC freed 9260 objects / 742128 bytes in 80ms 
```

这是我的代码：

```
protected void prepareVideoView(File video, String clipId) {

    // final Activity currentView = this;
    final VideoView vv = (VideoView) findViewById(R.id.video);

    vv.setOnErrorListener(Library_callHandler.getErrorHandler(video));
    vv.setVideoPath(video.getAbsolutePath());
    vv.setVisibility(View.VISIBLE);
    vv.setVerticalScrollBarEnabled(false);
    vv.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            try {
                int counter = 0;
                while (vv.isPlaying() && counter++ < 3) {
                    try {
                        Thread.currentThread();
                        Thread.sleep(100);
                    } catch (InterruptedException ignore) {
                    }
                }
                if (vv.isPlaying()) {

                    com.vringo.shared.Log
                            .log(com.vringo.shared.Log.LEVEL_INFO,
                                    "VmcRingerActivity onCompletion vv.isPlaying()--> finish()");
                    finishInstance();
                    return;
                }
                vv.start();
            } catch (IllegalStateException e) {
                // ResidentService.restoreRinger(currentView);
            }
        }
    });
    vv.start();

    Library_callHandler.track_info("CLIP_RINGTONE", clipId);
    // - tracker.trackEvent(VringoConstants.CAT_CLIPS,
    // VringoConstants.ACT_PLAY_RINGER,
    // String.valueOf(videoClip.getClipId()), 0);
    // - tracker.dispatch();

    // Library_callHandler.info("Ringer video playback started.");
} 
```

# xna - XNA WP7 加速度计控制

> ID：11922805
> 
> 赞同：0
> 
> 时间：2012-08-12T14:10:32.640
> 
> 标签：xna, accelerometer, xna-4.0

我正在将游戏移植到 XNA 4.0 WP7 项目，但在控制方面遇到了一些问题。我正在使用加速度计来控制运动，但有时船会完全跳到屏幕的另一个区域。我有下面的控件代码。

```
 Accelerometer _motion;
    Vector2 accelReading = new Vector2();
    private float speed = 50.0f;

    //Initialize
    _motion = new Accelerometer();

    _motion.ReadingChanged += new EventHandler<AccelerometerReadingEventArgs>(AccelerometerReadingChanged);

    _motion.Start();

    //Method for Changed Readings
    public void AccelerometerReadingChanged(object sender, AccelerometerReadingEventArgs e)
    {
        accelReading.X = (float)e.X;
        accelReading.Y = (float)e.Y;

        vel.X = accelReading.Y * speed;
        vel.Y = accelReading.X * speed;
    }

    //Update
     float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;

     pos += vel * elapsed;

     vel *= 1 - elapsed; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:45:58.850

`ReadingChanged`事件在 WP 7.1 中被标记为已弃用，这是有原因的，它可能是读取错误使用`CurrentValueChanged`.

如果这无助于使用`Motion`类尝试 WP7，则更准确

[http://msdn.microsoft.com/en-us/library/microsoft.devices.sensors.motion(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.devices.sensors.motion(v=vs.92).aspx)

# iphone - 正确清除对象“吸气剂不应用于副作用”

> ID：11922808
> 
> 赞同：0
> 
> 时间：2012-08-12T14:10:47.547
> 
> 标签：iphone, objective-c, ios, cocoa, xcode4

我正在关注著名的斯坦福在线课程 Objective C。

该课程建立在使用 Model:View:Controller 构建的 RPN 计算器上

`self.display.text=@"0";`

`self.display.history=@"";`

`self.brain.clear;`

在模型中（由对象“大脑”引用），唯一的实例变量是 NSMutableArray，其中包含计算器用户输入的各种内容。

我在模型中放入了一个名为“clear”的方法，该方法使用 removeAllObjects 方法清除数组。

我收到来自 Xcode 的警告“不应该将属性访问未使用的 getter 用于副作用”

我试过用像这样的线来删除大脑对象

self.brain 释放；无济于事。

我应该如何正确清除大脑对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:51:50.077

尝试使用

```
[self.brain clear]; // <-- Calls method 'clear' of object brain 
```

代替

```
self.brain.clear; // <-- Access property 'clear' of object brain 
```

**当你需要调用一个方法时，你应该使用括号 "[" , "]" 表示法。**

*[对象方法]；*

例如：*[人类 setAge:12]*；

**当您需要访问对象的属性时，您应该使用点表示法。**

*对象.属性；*

例如：*年龄=人类年龄；*

# iphone - 淹没/显示标签栏

> ID：11922810
> 
> 赞同：0
> 
> 时间：2012-08-12T14:11:01.847
> 
> 标签：iphone, ios, cocoa-touch

如何像[Groupon iPhone 应用程序](http://itunes.apple.com/us/app/groupon/id352683833?mt=8)那样在 iOS 中隐藏和显示标签栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:05:16.507

如果您不想弄乱实际的标签栏框架、子类化等，请使用伪标签栏。例如，将分段控制器放在不大于控制器的视图上，将视图和控制器的大小调整为一个标签栏，只是为这个自定义视图的原点设置动画。这将非常容易，您可以随时使用与标签栏类似的功能来打开和关闭屏幕。

只有一种选择...

# ruby-on-rails - 设计管理导轨

> ID：11922813
> 
> 赞同：1
> 
> 时间：2012-08-12T14:11:17.733
> 
> 标签：ruby-on-rails, devise, admin

我按照 Devise Wiki 创建了一个非常基本的管理设置，方法是以布尔格式向我的用户表添加一个管理列。

我进入了我的表（通过 SQlite 管理员）并分配了我的一个用户作为管理员。

然后我认为我有以下代码：

```
<% if user_signed_in? %>
  <% if current_user.admin? %>
    <%= link_to "Admin Job Post", new_user_job_path(current_user.id) %>
  <% else %>
    <%= link_to "Post a new job", new_user_job_path(current_user.id) %>
  <% end %>
<% else %>
  <%= link_to "Post a new job", new_user_session_path %>
<% end %> 
```

我遇到的问题是，`<%= link_to "Post a new job", new_user_job_path(current_user.id) %>`即使使用管理员用户登录，我的应用程序也只会返回我的应用程序。

获得解决方案会很棒，因为我尝试了几种变体但无法使其正常工作。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T19:49:10.970

你确定你让用户成为管理员吗？要使用户成为管理员，您应该运行以下命令

```
User.find(#id_of_user_you_want_to_make_admin)
User.admin = true
User.save! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T18:29:06.447

我不确定您的全部代码，但我有类似的设置，但是一旦用户以管理员身份登录，我使用以下内容显示链接（我使用“尝试”，因为它是在“user_logged_in”检查之外）。

```
<% if current_user.try(:admin?) %>
    <li><a href="#">AdminLink</a></li>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T04:13:00.813

```
<% if current_user.present? && current_user.has_role?(:admin) %>
    <li><%= link_to 'Some Cool Admin Feature', cool_admin_path %></li> 
```

如果您将 Rails 4 与 Devise 2.x 一起使用，这就是您要寻找的东西。注意 :admin 周围的 () 不是必需的，为了清楚起见，我将它们包括为 '?' 之后该方法似乎会抛出对 ruby​​ 不熟悉的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T11:14:22.537

授予管理员权限的另一种方法是简单地使用`<% if current_user.try (:email) == "admin@example.com" %>`That always works for me。这样您就不必担心整个系统。

# wordpress - 像来自 Wordpress 的 url 不正确

> ID：11922814
> 
> 赞同：0
> 
> 时间：2012-08-12T14:11:23.350
> 
> 标签：wordpress, facebook-likebox

我在 WordPress 网站上以管理员身份提供帮助，我们正在添加“喜欢”单个帖子和页面的功能，并使用以下代码；

`<div class="fb-like" data-href=”&lt;?php the_permalink(); ?>” data-send="false" data-width="450" data-show-faces="true"></div>`

Like 按钮显示正确，但由于某种原因，url 在最后添加了一个 "，使链接变得无效。如果我 "echo" the_permalink 的结果，它将显示正确的 url。

**例子;** *点击http://my.blog/is-cool/* 点赞，但我的时间轴上显示的 url 是*http://my.blog/is-cool/"*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:35:57.337

您周围的双引号`<?php the_permalink(); ?>`不正确-它们是“弯引号”。

# ruby-on-rails - 为现有控制器创建新操作

> ID：11922819
> 
> 赞同：12
> 
> 时间：2012-08-12T14:11:47.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我知道这可能是一个新手问题，但是是否可以从现有控制器上的命令行创建一个新操作（控制器和关联视图中的方法）？

例如，我已经有一个名为“Products”的控制器。我可以运行：

```
rails g controller products [new_action] 
```

然后rails会插入：

```
def [new_action]

end 
```

进入我的产品控制器并在 views/products/ 目录中创建一个名为“[new_action].html.erb”的新文件？我已经用谷歌搜索了这个，但没有得到满意的答案。另外，我会继续尝试，但我对当前应用程序的开发还很遥远，真的不想搞砸任何事情。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-12T14:25:22.990

我很确定您将无法以 100% 自动化的方式执行此操作。原因是 Rails 不知道你对路由或控制器做了什么，它需要一些逻辑来知道如何更新这些现有文件。您最好的选择是手动添加新操作。将新方法添加到您的控制器，更新您的路由文件，然后添加视图。最多可能需要1分钟。此外，如果您没有使用版本控制器（您的问题没有解决），那么您不必担心它会自动覆盖某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T12:36:09.467

我们可以在控制器和视图中手动创建动作，但您还应该添加测试语句，因为应该是很好的自动化过程，比如 rails generate controller NAME [action action] option m m = merge

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T07:48:36.437

Rails 提供了创建自定义生成器的可能性（但这是更高级的主题），可以根据您的需要进行定制。

更多信息：

[http://guides.rubyonrails.org/generators.html](http://guides.rubyonrails.org/generators.html)

# objective-c - 数字（CoreData）的正确格式？

> ID：11922820
> 
> 赞同：0
> 
> 时间：2012-08-12T14:11:47.967
> 
> 标签：objective-c, xcode

在 CoreData 我设置类型：

```
Integer 16 
```

并像这样插入int：

```
[NSNumber numberWithInt:9] 
```

问题是当我从 CoreData 结果不是 9 时，结果是：114726928

有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:18:09.200

尝试以下操作：

```
NSInteger number = 9;
NSNumber *numberObject = [NSNumber numberWithInteger:number];
NSInteger numberFromNSNumber = [numberObject integerValue]; // it will contains the 9 
```

应该没问题。

# android - 从构造函数中的自定义属性获取动画

> ID：11922822
> 
> 赞同：1
> 
> 时间：2012-08-12T14:11:57.390
> 
> 标签：android, animation, custom-attributes

我有一个自定义视图，扩展了 LinearLayout 并尝试添加一些自定义属性，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- other stuff -->
    <declare-styleable name="UIPlayer">
        <attr name="team" format="integer" />
        <attr name="playAnimation" format="reference" />
    </declare-styleable>
</resources> 
```

我的自定义视图是这样的：

```
public class UIPlayer extends LinearLayout
{    
    // . . .

    public UIPlayer(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        initAttrs(context, attrs);
    }

    public UIPlayer(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        initAttrs(context, attrs);
    }

    public void initAttrs(Context context, AttributeSet attrs)
    {
        TypedArray taPlayer = context.obtainStyledAttributes(attrs, R.styleable.UIPlayer);
        int team = taPlayer.getInt(R.styleable.UIPlayer_team, -1); 
        player.setTeam(team);

        int animPlayId = taPlayer.getResourceId(R.styleable.UIPlayer_playAnimation, -1);
        try
        {    
            animPlay = AnimationUtils.loadAnimation(context, animPlayId);
        }
        catch (NotFoundException e)
        {
            d("anim", "onPlay not found! " + animPlayId);
        }
        taPlayer.recycle();
    }
    // . . .
} 
```

我的布局文件是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:devn="http://schemas.android.com/apk/res/devN.games.mygame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="false"
    android:orientation="vertical"
    android:weightSum="3.0" >

    <devN.games.UIPlayer
        android:id="@+id/player"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:clipChildren="false"
        android:gravity="top"
        devn:playAnimation="@anim/play"
        devn:team="2" >
    </devN.games.UIPlayer>

    <!-- ... -->

</LinearLayout> 
```

我做错了什么，我无法从构造函数中检索动画？（“奇怪的事实”是 team 属性工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:59:22.693

经过对android源代码的大量研究，我尝试了重载方法：

```
obtainStyledAttributes(AttributeSet set, int[] attrs, int defStyleAttr, int defStyleRes) 
```

它就像一个魅力！:) 所以正确的代码是：

```
TypedArray taPlayer = context.obtainStyledAttributes(attrs, R.styleable.UIPlayer, 0, 0); 
```

# c# - Selenium Webdriver c#无需等待页面加载

> ID：11922823
> 
> 赞同：4
> 
> 时间：2012-08-12T14:12:08.787
> 
> 标签：c#, selenium, selenium-webdriver

我有以下情况：

我想导航到一个页面。然后在按钮出现后立即单击（不等待页面加载）。我不想等待初始页面加载，因为它需要很长时间。我的程序目前卡住了，直到页面加载然后单击按钮。

我基本上想导航到链接，然后无需等待页面并继续我的代码。

反正有这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:05:13.483

使用最新版本的 .NET 绑定，您可以设置页面加载超时。但是，您需要注意一些注意事项。首先，并非所有浏览器都实现了这一点。如果没记错的话，它应该适用于 IE 和 Firefox。其次，您需要捕获一个异常以使其正常工作，但这是可以完成的。

```
// WARNING! Completely untested code written without
// the benefit of an IDE!
IWebDriver driver = new InternetExplorerDriver();
driver.Manage().Timeouts().SetPageLoadTimeout(TimeSpan.FromSeconds(1));

try
{
    driver.Url = "http://your.long.loading.page.com";
}
catch (TimeoutException) 
{
    // NOTE: In 2.26 or later, this will be WebDriverTimeoutException
}

WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
IWebElement element = wait.Until<IWebElement>((d) => 
{
    return d.FindElement(By.Id("yourId"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:27:42.750

```
IWebDriver driver = new FirefoxDriver();
driver.Url = "http://somedomain/url_that_delays_loading";
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
IWebElement myDynamicElement = wait.Until<IWebElement>((d) =>
{
    return d.FindElement(By.Id("someDynamicElement"));
}); 
```

它完全符合您的要求。它查询页面以查找元素，如果没有找到元素则捕获异常，并在找到时返回一个元素。

之后，您可以操作按钮而忽略无法加载页面的事实

[http://seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:34:11.873

简短的回答：没有。

长答案：默认情况下，Selenium 试图模拟**真实用户**- 我知道它有点糟糕，特别是在你需要在部署后部署后测试部署的时候......

但是：如果真正的用户必须等待按钮出现，那么程序也必须这样做......

顺便说一句：如果按钮真的出现在页面的第一个，你可以试试这个：

1.  按 ID、xpath 搜索按钮...按您的方式搜索
2.  捕获异常（我是 Java 人，所以不要问我如何）
3.  如果出现错误，请稍等片刻（例如 200 毫秒）然后转到 1
4.  如果没有，请单击按钮
5.  如果经过一定的时间（10秒），循环也应该结束，如果是这样，抛出异常

如上所述：我选择的语言是 Java。在那里我可以做到。但我不知道如何用 C# 编写它

# r - ggplot 中的 geom_smooth 导致部分绘图背景改变颜色

> ID：11922825
> 
> 赞同：6
> 
> 时间：2012-08-12T14:12:13.410
> 
> 标签：r, ggplot2

如何避免绘制以下数据时出现的绘图区域的灰色阴影？

```
df <-data.frame(x = c(0,0.2,0.5), y = c(0.6,0.7,0.9))

p <-ggplot(df, aes(x, y, ymin=0, ymax=1, xmin=0, xmax=1))

p <- p + geom_point(alpha=2/10, shape=21, 
                fill="blue", colour="black", size=5)

p 
```

![在此处输入图像描述](../Images/58aca643fdc8a84ee9d5d87edf5142d9.png)

到目前为止还不错，但是使用 geom_smooth 添加线方程会导致部分背景变为灰色。

```
p <- p + geom_smooth(method="lm", se=FALSE, formula=y~x, colour="black")
p 
```

![在此处输入图像描述](../Images/b43d392545b710502b9ea65a11e4bbd5.png)

关于如何避免这种情况的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T14:16:55.067

添加`fill=NA`到您的`geom_smooth`通话中：

```
p + geom_smooth(method="lm", se=FALSE, formula=y~x,colour="black",fill=NA) 
```

# java - 如何通知消费者工作生产者工作已完成？

> ID：11922827
> 
> 赞同：0
> 
> 时间：2012-08-12T14:12:23.733
> 
> 标签：java, spring, quartz-scheduler, producer-consumer, job-scheduling

使用 Spring/Quartz，我有一个首先运行的 ProducerJob。然后我有一个必须等​​待 ProducerJob 的结果的 ConsumerJob（它在数据库中创建记录）。

将 ProducerJob 的结果通知 ConsumerJob 的最佳方式是什么？我是否应该让 ConsumerJob 不断检查数据库，如果 ProducerJob 尚未完成则休眠/等待？

我意识到我的问题可能类似于[Quartz 的 JobDataMap 中的 Pass BlockingQueue](https://stackoverflow.com/questions/10880926/pass-blockingqueue-in-jobdatamap-of-quartz)，尽管没有确定具体的实现。尽管如此，仍然没有得到如何实施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:00:12.007

在生产者/消费者模式中，消费者必须等待生产者生产的数据。如果您想使用数据库将两者解耦，则消费者必须轮询。是的。另一种解决方案是使用 BlockingQueue 并让消费者编写数据库条目。这将减少数据库负载并且可能更易于实现。而且生产者的速度更快，这通常是使用这种模式的一个原因。

# android - 通过短信控制安卓

> ID：11922828
> 
> 赞同：0
> 
> 时间：2012-08-12T14:12:28.593
> 
> 标签：android, sms, controls

我正在 Android 应用程序中做我的 fyp，我仍在学习整个交易，我很想学习它，我的问题是如何让基于 Android 的设备响应预定义的 SMS 代码来执行特定功能?

我将不胜感激任何相关信息，无论是与任务相关还是与编程相关。

到目前为止读了几本书，但没有找到任何关于用短信控制手机的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:18:26.737

您将不得不收听 SMS 并相应地执行。[本文](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)可能会帮助您入门。

# jquery - Jquery 动画滑动菜单

> ID：11922829
> 
> 赞同：1
> 
> 时间：2012-08-12T14:12:48.350
> 
> 标签：jquery, jquery-mobile, jquery-animate

我正在使用[jQuery Mobile](http://jquerymobile.com/)构建一个 Web 应用程序，它有一个像 Facebook 应用程序一样的滑出菜单。我的菜单运行良好，但我想在它滑出时添加反弹效果。

这是我所拥有的：

```
$("a.showMenu").click(function() {
    if (menuStatus != true) {
        $(".ui-page-active").animate({
            left: 250,
        }, 400, function() {
            menuStatus = true
        });
        return false;
    } else {
        $(".ui-page-active").animate({
            left: 0,
        }, 300, function() {
            menuStatus = false
        });
        return false;
    }
}); 
```

我的 jQuery 技能非常有限。任何人都可以帮助我实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:19:26.407

看看 George McGinley Smith 的[easing 插件](http://gsgd.co.uk/sandbox/jquery/easing/)。

试试这个例子（未经测试）：

```
$("a.showMenu").click(function(){
    if(menuStatus != true){             
    $(".ui-page-active").animate({
        left: 250,
      }, 400, 'easeOutBounce', function(){menuStatus = true});
      return false;
      } else {
        $(".ui-page-active").animate({
        left: 0,
      }, 300, function(){menuStatus = false});
        return false;
      }
}); 
```

# asp.net-mvc-2 - 使用asp.net mvc 2.0的ClientValidation时提交按钮不起作用

> ID：11922838
> 
> 赞同：0
> 
> 时间：2012-08-12T14:14:36.767
> 
> 标签：asp.net-mvc-2

我有一个带有文本框、提交按钮、下拉列表的表单.....我`<%Html.EnableClientValidation(); %>`用来验证表单中的所有元素。但问题是当我写`<% using (Html.BeginForm()){ }%>`的时候，验证工作，但是当我点击提交按钮时，即使我完成了每个元素的所有条件，它什么也没做。并且提交按钮正在提交，而我使用`<form method="post">`而不是`<% using (Html.BeginForm()){ }%>`.

我在我的视图中使用 jquery 选项卡，所以我有多个提交按钮来执行不同的任务（我在控制器中测试提交按钮的值）。 ![这是我的看法](../Images/b3a85772c7b73487eb68f2fe0a2511e4.png)

谁能告诉我，我在这里做错了什么？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:18:57.220

I'd make sure that you wrap your entire form in the braces when using the `<% using (Html.BeginForm()){ }%>`. If your submit button is not contained within those braces, then it will not cause the form to post.

```
<% using(Html.BeginForm()) { %>

... form elements here ...

<% } %> 
```

When you use this method, remove the other form tags on the page as this syntax is equivalent to writing:

```
 <form>

    ... form elements here ...

    </form> 
```

# c# - 我可以使用自己的扩展方法使对象为空吗？

> ID：11922839
> 
> 赞同：2
> 
> 时间：2012-08-12T14:14:43.077
> 
> 标签：c#, extension-methods

我为 Timer 类编写了扩展方法以在一定时间后将其销毁。似乎它实际上只在 timer.enable 字段中设置了 false，但并没有真正将整个设置为 false。有没有办法从它自己的扩展方法中取消一个对象？

还有一件事 - 以这种方式实现它是一种好习惯，还是我应该期待同步问题和更多惊喜？

timer.DestroyAfter(1.Hours()) ：

```
 public static void DestroyAfter(this Timer timer, TimeSpan timeSpan)
      {
        var killingTimer = new Timer(timeSpan.TotalMilliseconds)
            {
                AutoReset = false,
            };

        killingTimer.Elapsed += (sender, e) =>
            {
                timer.Stop();
                **timer = null;** //doesn't seem to work though line is executed
                killingTimer.Stop();
                killingTimer = null;
            };
        killingTimer.Start();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T14:18:16.073

这只有在“this”参数也是 ref 参数时才有可能，而事实并非如此。

所以答案是否定的（在当前的 C# 实现中）

关于您的另一个问题：您实现它的方式没有任何问题（停止计时器并清除对捕获的“killingTimer”变量的引用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T14:20:18.030

扩展方法没有什么特别之处。`this`修饰符所说的 call like应该`timer.DestroyAfter(time)`像你写的那样编译`DestroyAfter(timer, time)`。

而在普通方法中，对参数变量的更改不会影响原始变量。在普通方法中，有一种方法可以实现：使用`ref`参数。但是你不能用`this`扩展方法的参数来做到这一点。

此外，这将非常令人困惑：如果我写`timer.DestroyAfter(time)`，那么在未来的某个时间突然`timer`变成`null`? 我当然不会期待。

# jquery - 数据表中的可编辑与可编辑 - 有什么区别

> ID：11922840
> 
> 赞同：1
> 
> 时间：2012-08-12T14:14:48.187
> 
> 标签：jquery, mysql, datatable, jeditable

我很困惑我应该将哪个插件与数据表 jquery 一起使用。我的问题是我找不到任何可以解决我所有问题的答案（我现在已经忍受了 4 个多小时）。对不起，如果这个问题已经被解决了无数次......

我有一个来自 mysql 数据库的 >10000 行的表，我想在特定列上添加一个单元格内联编辑，所以我找到了两种现有方法。

1.  [http://datatables.net/examples/api/editable.html](http://datatables.net/examples/api/editable.html)
2.  [http://jquery-datatables-editable.googlecode.com/svn/trunk/inline-edit.html](http://jquery-datatables-editable.googlecode.com/svn/trunk/inline-edit.html)

我的问题是有什么区别？哪一个需要哪些 js 脚本作为输入（我感到困惑并在最后添加了所有这些脚本）......我觉得有些已经过时并且不再适用于最新版本。或者也许我正在混合它们，所以最后没有任何效果。

Jeditable（它在我手中不起作用。当我点击表格中的任何单元格时，什么都没有发生）

```
$("#example.", oTable.fnGetNodes()).editable( 'php/editable_ajax.php', {
                    "callback": function( sValue, y ) {
                        var aPos = oTable.fnGetPosition( this );
                        oTable.fnUpdate( sValue, aPos[0], aPos[1] );
                    },
                    "submitdata": function ( value, settings ) {
                        return {
                            "row_id": this.parentNode.getAttribute('id'),
                            "column": oTable.fnGetPosition( this )[2]
                        };
                    },
                    "height": "14px"
                }); 
```

可编辑（当我单击时，编辑事件有效，但数据库中的值未更新，除非 editable_ajax.php 包含完整的 mysql 查询，但页面未重新加载）

```
$('#example').dataTable().makeEditable({
                    sUpdateURL: "php/editable_ajax.php",
                    "aoColumns": [
                        null,
                        {
                            indicator: 'Saving CSS Grade...',
                            tooltip: 'Click to select CSS Grade',
                            loadtext: 'loading...',
                            type: 'select',
                            onblur: 'submit',
                            data: "{'':'Please select...', '1':'Yes','0':'No'}" 
                        }
                    ]
                }); 
```

PHP服务器端

```
<?php
    echo $_POST['value'].' (server updated)';
?> 
```

最后一个问题，其中是否有一个可以更有效地处理具有大量行的数据表？（加载它已经需要 30 秒）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:46:59.483

以下先决条件设置说明告诉我，您肯定需要 jeditable 和 dataTables 才能使 dataTables.editable 工作。[jquery-datatables-可编辑](http://code.google.com/p/jquery-datatables-editable/wiki/HTMLSource)

```
 <script src="/Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.DataTables.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.jeditable.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-ui.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.validate.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.DataTables.editable.js" type="text/javascript"></script> 
```

并且通过消除过程，我们可以假设您可以将 jeditable 仅与 dataTables 一起使用。查看[此示例的源代码，](http://www.datatables.net/examples/api/editable.html)您可以看到仅使用了 dataTables 和 jEditable。

我不太确定差异，但我相信 dataTables.editable 为可编辑和 dataTable（和 jValidate）之间的一些常用功能提供了接口，使其更易于实现。

> 该插件集成了多个插件，例如 JQuery DataTables、JQuery Editable、JQuery Validation 插件，并实现了常用的数据管理功能。

# java - 我如何让这些双打公开？

> ID：11922843
> 
> 赞同：2
> 
> 时间：2012-08-12T14:15:11.820
> 
> 标签：java, double

如何在我正在制作的整个应用程序中公开使用下面的双变量（周一、周二、周三等）？例如，如果我在最后一个大括号之后，则无法访问 mon 变量。有任何想法吗？

```
 finalize.addActionListener(new ActionListener(){
           public void actionPerformed(ActionEvent ae){

                double mon = Double.parseDouble(monday.getText());
                double tues = Double.parseDouble(tuesday.getText());
                double wed = Double.parseDouble(wednesday.getText());
                double thurs = Double.parseDouble(thursday.getText());
                double fri = Double.parseDouble(friday.getText());
                double sat = Double.parseDouble(saturday.getText());
                double sun = Double.parseDouble(sunday.getText());

                double sum = mon + tues + wed + thurs + fri + sat + sun;

           }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:18:53.053

一种方法是创建类成员变量，如下所示：

```
private double mon = 0.0;
private double tues = 0.0;
// etc. 
```

如果您希望从外部访问它们，请创建公共 getter 方法：

```
public double getMon() {
  return mon;
} 
```

getSum 可以用一个方法表示：

```
public double getSum() {
     return mon + tues + wed + thurs + fri + sat + sun;
} 
```

然后不要忘记删除 actionPerformed 方法中的本地声明：

```
mon = Double.parseDouble(monday.getText()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:17:29.527

您必须在类级别将它们声明为字段。

内部类可以访问封闭方法的最终局部变量，但是当您更改值时，这在您的情况下不起作用。

```
class MyClass {

    double mon = 0.;  // <- declare it as a field

    void myMethod() {
      finalize.addActionListener(new ActionListener(){
           public void actionPerformed(ActionEvent ae){
                mon = Double.parseDouble(monday.getText());  // <- accessible
           }
      });
      System.out.println(mon);  // <- accessible
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T14:19:53.083

在类级别上定义它们。例如，如果您的班级被命名`MyClass`，请执行以下操作：

```
class MyClass {
    public mon;
    //......
    public void actionPerformed(ActionEvent ae) {
    mon = Double.parseDouble(monday.getText());
    //......
    } 
} 
```

但从不定义公共变量。改用 bean 表示法：

```
class MyClass {
    private mon;
    //......
    public void actionPerformed(ActionEvent ae) {
    mon = Double.parseDouble(monday.getText());
    //......
    } 

    public double getMon() {
         return mon;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-27T20:32:59.763

您可以尝试在侦听器之外创建变量，并且只在侦听器中修改它。

# python - 更多pythonic方式来处理这个if条件？

> ID：11922845
> 
> 赞同：0
> 
> 时间：2012-08-12T14:15:43.600
> 
> 标签：python, if-statement

假设我有这个条件，假设 a 和 b 已经是布尔值

```
if not a and b:
    do something
if a and not b:
    do something different 
```

有什么方法可以进一步优化它，还有更多的pythonic方式来处理这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T14:23:42.700

两种情况相互排斥。您可以将其重写为：

```
if bool(a) != bool(b): # a xor b
    if a:
        print "a and not b"
    else:
        print "not a and b" 
```

但它看起来更加模糊。所以对我来说最好的方法是：

```
if not a and b:
  print "not a and b"
elif a and not b:
  print "a and not b" 
```

（注意`elif`而不是`if`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T14:21:26.113

好像您正在寻找一个异或（xor）。试试这个：

```
if a is not b:
    print "a xor b" 
```

# php - 如何将文件夹链接重定向到主页？

> ID：11922846
> 
> 赞同：0
> 
> 时间：2012-08-12T14:16:10.137
> 
> 标签：php, wordpress, apache

我正在使用 WordPress，并且我创建了一些用于通过 FTP 上传文件的文件夹。

我想将文件夹链接重定向到我设置的主页，例如：[此链接](http://www.zensabook.com/download/sample)显示端口 80 的 Apache 服务器，我需要将其重定向到主页。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T14:18:41.213

在文件夹的根目录中创建一个索引页

```
<?PHP
    header('location:location/to/homepage');
?> 
```

这将是最简单的事情。

您还可以考虑使用一些[`.htaccess`](http://httpd.apache.org/docs/2.2/howto/htaccess.html)文件来限制对页面的访问并将它们发送到 403 错误页面或将其发送到主页。

# c++ - std::ifstream 在将文本编辑器从 notepad++ 切换到 sublime text 2 以使用它正在读入的文件后没有读入？

> ID：11922847
> 
> 赞同：1
> 
> 时间：2012-08-12T14:16:16.907
> 
> 标签：c++, debugging, file-io

我从文件中为我的应用程序读取了一些数据，它最近停止工作。我觉得它停止工作的时间对应于我从 Notepad++ 切换到 Sublime Text 2 的时间......无论如何，这是我读取数据的代码：

```
 std::ifstream stream;
    stream.open("parsing_model.txt");

    char ignore_char;
    std::string model_class;
    int parsing_model;
    while (stream >> model_class >> ignore_char >> parsing_model)
    {
        // snip
        // doesn't even make it into a single run of this while loop.
    } 
```

我的数据组织为

```
Item1, 12
Item2, 4
foo, 42
bar, 1 
```

它是文本编码中的东西吗？我怎样才能使我的代码对此具有鲁棒性并解决我的问题？直到最近，这段代码绝对有效了几个月。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:42:53.813

在使用之前检查流是否处于良好状态。

```
stream.open("parsing_model.txt");
if (stream.good()) {
    //... read the stream
} else {
    std::cerr << "failed to open input file\n";
} 
```

如果出现故障，请确保当前工作目录与您保存输入文件的位置相同。看来您是在 Windows 上运行的，因此您应该可以使用此命令查看当前目录。

```
system("dir & pause"); 
```

# python - Django / Python - ImportError：无法导入设置'twitter.settings'（它在sys.path上吗？）：没有名为设置的模块

> ID：11922851
> 
> 赞同：2
> 
> 时间：2012-08-12T14:17:05.370
> 
> 标签：python, django, settings, importerror, python-twitter

我最近开始了我的第一个 Django 项目。我以前能够运行命令'python manage.py runserver'而不返回任何错误，但现在它返回一个我无法解决的长错误消息......

```
 File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/runserver.py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 26, in <module>
    from django.views import static
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/views/static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 48, in __getattr__
    if settings.USE_I18N:
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'twitter.settings' (Is it on sys.path?): No module named settings 
```

我不确定它为什么会返回此错误。我能想到的唯一可能会影响它的是我最近下载并安装了 python-twitter 库，因为我在我的项目中使用了 Twitter API。任何有关如何解决此问题的帮助将不胜感激！

谢谢，

杰斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:20:32.757

我不熟悉 python-twitter 库，但我猜该模块名为`twitter`. 因此，您可能正试图从您的 python-twitter 库中提取一个名为“设置”的属性。您可能想要更改您的项目名称。

# javascript - 确定 JavaScript 代码是否为表达式

> ID：11922856
> 
> 赞同：0
> 
> 时间：2012-08-12T14:17:43.350
> 
> 标签：javascript, expression, function-declaration, function-expression

我正在使用以下命名的函数**`isExpression`**来确定某些 JavaScript 代码是否是表达式：

```
function isExpression(code) {
    try {
        new Function("return " + code);
        return true;
    } catch (e) {
        return false;
    }
} 
```

它适用于除一个之外的所有测试用例 - 它错误地将 a**`FunctionDeclaration`**视为 a**`FunctionExpression`**并返回**`true`**而不是**`false`**. 有什么方法可以解决这个问题而无需编写解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:05:00.803

正如@FelixKling 指出的那样，确定函数是否是声明而不是表达式的唯一方法是检查函数的上下文。然而，在 REPL（该`isExpression`函数的目的）中没有上下文。这样事情就变得简单了。

输入到 REPL 中的`code`只能是函数声明，如果它以关键字`function`开头（在开始修剪空白之后）。因此它可以通过正则表达式进行测试`/^\s*function\s/`。

@FelixKling 指出，根据函数的上下文，这样的函数可能仍然是表达式而不是声明（即，如果函数[是非源元素](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope#Function_constructor_vs._function_declaration_vs._function_expression "功能和功能范围 |  Mozilla 开发者网络")，则函数是表达式）。然而，`code`传递给这个函数的保证是一个源元素。

如果将这样的函数构造用作使用条件运算符（例如`function f() {} ? x : y`）或逗号运算符（例如`function f() {}, x`）的表达式，那么`isExpression`仍然会返回`false`。但是这样的代码会引发`SyntaxError`. 因此，以下实现`isExpression`将正确测试某些代码是否是所有情况下的表达式：

```
var isExpression = function (functionDeclaration) {
    return function (code) {
        if (functionDeclaration.test(code)) return false;

        try {
            Function("return " + code);
            return true;
        } catch (error) {
            return false;
        }
    };
}(new RegExp(/^\s*function\s/)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T14:37:31.673

通过检查构造函数返回的值的类型，我们可以确定原始表达式是一个函数。

```
function isExpression(code) {
    try {
        return typeof (new Function("return " + code)) () !== 'function';
    } catch (e) {
        return false;
    }
} 
```

警告：将调用字符串中的调用。这可能会降低它的用处。

# python - 为 plone 4 实现一个简单的敏捷内容类型

> ID：11922857
> 
> 赞同：2
> 
> 时间：2012-08-12T14:17:43.883
> 
> 标签：python, plone, dexterity, zopeskel

我有一个非常令人沮丧的开始学习 Plone 开发。我想为 Plone 4 开发一个基于灵巧的内容类型。我是一位经验丰富的 python 开发人员，对 Zope 和 Grok 有一定的了解，对于构建来说相当陌生。也就是说，我读了 Martin Aspeli 的“Professional Plone 4 Development”，但书中的相当多的版本信息似乎已经过时了。

使用 buildout，我能够启动并运行一个 Plone 实例。ZopeSkel 已安装，但当我尝试创建新包时，出现如下错误：

```
**************************************************************************
**  Your new package supports local commands.  To access them, change
**  directories into the 'src' directory inside your new package.
**  From there, you will be able to run the command `paster add
**  --list` to see the local commands available for this package.
**************************************************************************

ERROR: No egg-info directory found (looked in ./domma.voucher/./domma.voucher.egg-info, ./domma.voucher/bootstrap.py/domma.voucher.egg-info, ./domma.voucher/bootstrap.pyo/domma.voucher.egg-info, ./domma.voucher/buildout.cfg/domma.voucher.egg-info, ./domma.voucher/CHANGES.txt/domma.voucher.egg-info, ./domma.voucher/CONTRIBUTORS.txt/domma.voucher.egg-info, ./domma.voucher/docs/domma.voucher.egg-info, ./domma.voucher/domma/domma.voucher.egg-info, ./domma.voucher/README.txt/domma.voucher.egg-info, ./domma.voucher/setup.cfg/domma.voucher.egg-info, ./domma.voucher/setup.py/domma.voucher.egg-info, ./domma.voucher/src/domma.voucher.egg-info) 
```

如果我尝试从给定目录中运行 paste，它会告诉我，命令“add”是未知的。我尝试了不同版本的 ZopeSkel，并尝试了原始 plone 模板和 zopeskel.dexterity。输出根据版本和模板略有变化，但结果保持不变。

Obvisouly Plone 开发似乎对版本更改非常敏感，这使得旧文档非常无用。[http://plone.org/products/dexterity/documentation/manual/developer-manual](http://plone.org/products/dexterity/documentation/manual/developer-manual)告诉我，它上次更新是在 1114 年前。

有人可以给我一个起点，为 Plone 4 开发一个非常简单的灵巧内容类型，它真的有效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:04:56.153

值得一提的是，虽然某些软件包有一些较新版本，但 Professional Plone 4 Development 是 Plone 4.1 的最新版本。我建议你使用它，并从它的示例代码开始。在你知道你有一个工作的起点之前，不要试图随意升级东西，你应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T14:34:18.037

[http://pigeonflight.blogspot.com/2012/01/dexterity-development-quickstart-using.html](http://pigeonflight.blogspot.com/2012/01/dexterity-development-quickstart-using.html)提供了一个不错的快速入门。最新的 Dexterity 文档位于[http://dexterity-developer-manual.readthedocs.org/en/latest/index.html](http://dexterity-developer-manual.readthedocs.org/en/latest/index.html)。是的，从文档角度来看，这有点移动目标，与其说是因为 Dexterity 是稳定的而且在生产中，但主要是因为 Zopeskel 目前正在大力开发/现代化。对于那个很抱歉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:16:59.457

来自 [https://github.com/collective/templer.plone/blob/master/README.txt][1]

Templer 不能与旧版 ZopeSkel 或 Python virtualenv 共存。

否则在尝试创建包时会遇到以下错误::

```
 IOError: No egg-info directory found (looked in ./mycompany.content/./mycompany.content.egg-info, .... 
```

Templer 是 ZopeSkel（版本 3）的最新版本。我不确定您拥有什么版本的 ZopeSkel，或者您是否在 buildout 或 virtualenv 中安装了混合版本。但是 ZopeSkel 的安装冲突可能是罪魁祸首。

我将从头开始并重新创建 vitualenv，然后通过 buildout 安装最新版本的 ZopeSkel 2。ZopeSkel 3 或 Templer 仍在大量开发中，并非所有模板都已迁移。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T17:47:20.767

我能够使用这个构建创建一个具有新的敏捷内容类型的新 Plone 4.1.4 站点。这不应该是官方的回答，但是将配置粘贴到像 pastebin 这样的易失性服务并不是永久文档的选项。

```
# buildout.cfg file for Plone 4 development work
# - for production installations please use http://plone.org/download
# Each part has more information about its recipe on PyPi
# http://pypi.python.org/pypi 
# ... just reach by the recipe name
[buildout]
parts =  
    instance
    zopepy
    i18ndude
    zopeskel
    test
#    omelette

extends = 
    http://dist.plone.org/release/4.1-latest/versions.cfg
    http://good-py.appspot.com/release/dexterity/1.2.1?plone=4.1.4

# Add additional egg download sources here. dist.plone.org contains archives
# of Plone packages.
find-links =
    http://dist.plone.org/release/4.1-latest
    http://dist.plone.org/thirdparty

extensions = 
    mr.developer
    buildout.dumppickedversions

sources = sources

versions = versions

auto-checkout = 
    nva.borrow

# Create bin/instance command to manage Zope start up and shutdown
[instance]
recipe = plone.recipe.zope2instance
user = admin:admin
http-address = 16080
debug-mode = off
verbose-security = on
blob-storage = var/blobstorage
zope-conf-additional = %import sauna.reload

eggs =
    Pillow
    Plone
    nva.borrow
    sauna.reload
    plone.app.dexterity

# Some pre-Plone 3.3 packages may need you to register the package name here in 
# order their configure.zcml to be run (http://plone.org/products/plone/roadmap/247)
# - this is never required for packages in the Products namespace (Products.*)
zcml =
#    nva.borrow
    sauna.reload

# zopepy commands allows you to execute Python scripts using a PYTHONPATH 
# including all the configured eggs
[zopepy]
recipe = zc.recipe.egg
eggs = ${instance:eggs}
interpreter = zopepy
scripts = zopepy

# create bin/i18ndude command
[i18ndude]
unzip = true
recipe = zc.recipe.egg
eggs = i18ndude

# create bin/test command
[test]
recipe = zc.recipe.testrunner
defaults = ['--auto-color', '--auto-progress']
eggs =
    ${instance:eggs}

# create ZopeSkel and paster commands with dexterity support
[zopeskel]
recipe = zc.recipe.egg
eggs =
    ZopeSkel<=2.99
    PasteScript
    zopeskel.dexterity<=2.99
    ${instance:eggs}

# symlinks all Python source code to parts/omelette folder when buildout is run
# windows users will need to install additional software for this part to build 
# correctly.  See http://pypi.python.org/pypi/collective.recipe.omelette for
# relevant details.
# [omelette]
# recipe = collective.recipe.omelette
# eggs = ${instance:eggs}

# Put your mr.developer managed source code repositories here, see
# http://pypi.python.org/pypi/mr.developer for details on the format of
# this part
[sources]
nva.borrow = svn https://novareto.googlecode.com/svn/nva.borrow/trunk

# Version pindowns for new style products go here - this section extends one 
# provided in http://dist.plone.org/release/
[versions] 
```

# ruby-on-rails - 部分表单渲染但不显示

> ID：11922858
> 
> 赞同：4
> 
> 时间：2012-08-12T14:17:43.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我一直在关注一个允许我创建登录帐户的教程。我很确定我已按照所有步骤操作，但不会显示创建新帐户的表格。

新的.html.erb：

```
 <% form_for @user, :url => account_path do |f| %>

  <%= f.error_messages %>

  <%= render :partial => 'form', :locals => { :f => f } %>

  <%= f.submit "Register" %>

  <% end %> 
```

_form.html.erb：

```
 <p><%= f.label :login %></p>

   <p><%= f.text_field :login %></p>

   <p><%= f.label :email %></p>

   <p><%= f.text_field :email %></p>

   <p><%= f.label :password, f.object.new_record? ? nil : "Change password" %></p>

   <p><%= f.password_field :password %></p>

   <p><%= f.label :password_confirmation %></p>

   <p><%= f.password_field :password_confirmation %></p> 
```

当我去时，调试器会吐出这个`/users/new`：

```
 ApplicationController::current_user_session
   Rendered users/_form.html.erb (3.0ms)
   Rendered users/new.html.erb within layouts/application (9.8ms)
   Completed 200 OK in 165ms (Views: 99.7ms | ActiveRecord: 0.0ms)

   Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-08-12 09:06:44 -0500 
```

因此，它告诉我它已成功渲染，但是当我访问该链接时，什么也没显示。有谁知道为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T14:29:12.440

您需要将`<%=`erb 标记与生成输出的任何辅助方法一起使用。这包括 form_for 和 input 标签。

```
<%= form_for ... %>

<% end %> 
```

# javascript - 无法使用 javascript 获取谷歌地图上显示的所有推文

> ID：11922859
> 
> 赞同：0
> 
> 时间：2012-08-12T14:17:45.673
> 
> 标签：javascript, google-maps, twitter

您好，我试图通过首先使用 js-placemaker（雅虎的用于从任何类型的数据中对文本进行地理定位的网络服务）从推文的文本中提取位置来将一些推文放在谷歌地图上。

问题是我在地图上放置了不同的标记，但我只从 twitter resutlts 回调中获得最后一条推文，并且在地图上的每个标记上看到相同的 profile_img_url。我也无法让 infowindows 工作。

```
 function codeAddress(){
    var geocoder = new google.maps.Geocoder();;
    var mapOptions = {
    center: new google.maps.LatLng(35.74651,-39.46289), 
    zoom: 2,
     mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    // added this 
    var bounds = new google.maps.LatLngBounds();
    // create the map
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            $.getJSON("http://search.twitter.com/search.json?q=%23euronews&rpp=10&include_entities=true&result_type=mixed&callback=?", function (data) {
    $.each(data.results, function (i, item) {
    var screen_name = item.screen_name;
    var contentString=screen_name;
    var img = item.profile_image_url;
    var text=item.text;
    var profile_img=item.profile_image_url;
    var url=(item.entities.urls.length > 0 ? item.entities.urls[0].url : '');
    //  var latitude,longitude;
    Placemaker.getPlaces(text,
    function(o){
    console.log(o);

    var latitude=o.match.place.centroid.latitude,
    longitude=o.match.place.centroid.longitude; 
    var myLatLng = new google.maps.LatLng(latitude, longitude);
    var marker = new google.maps.Marker({
      icon: img,
      title: screen_name,
      map: map,
      position: myLatLng
    });

    var infowindow = new google.maps.InfoWindow({
    content: contentString
        });
    google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map,marker);
        });
    bounds.extend(myLatLng);

    });
    });
    // map.fitBounds(bounds);
    });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:21:06.643

[与此类似问题](https://stackoverflow.com/questions/11916158/google-maps-api-v3-multiple-markers-infowindow)相同的根本问题。可以通过在异步回调上适当使用函数闭包来解决。

您对 infowindow 的问题是没有内容（screen_name 和 contentString 未定义）。

# android - 使用 WebView 在 Android 应用程序中对齐文本但呈现类似 TextView 的界面？

> ID：11922861
> 
> 赞同：11
> 
> 时间：2012-08-12T14:17:52.897
> 
> 标签：android, webview, textview, text-alignment

我正在寻找一种简单的方法来忘记我正在使用 a`WebView`在我的`TextView`. 有人为此制作了自定义视图吗？我很清楚我可以做这样的事情：

```
 WebView view = new WebView(this);    
         view.loadData("my html with text justification","text/html","utf-8"); 
```

但是当你想设置`TextView`. 必须有一种更方便的方法来做到这一点。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T14:17:52.897

这让我很紧张，我承认。我喜欢它在代码中的`TextViews`样子`TextViews`，即使我使用 a`WebView`作为实现 text-align:justified 格式的手段，我也不想那样看。

我创建了一个自定义视图（丑陋，可能很糟糕），它实现了我常用的方法，`TextView`并修改了 WebView 的内容以反映这些更改。无论它对其他人有用还是我真的不知道的潜在危险，对我来说它有效，我已经在几个项目中使用它并且没有遇到任何问题。唯一的小不便是，我认为它是一个更大的记忆损失，但如果它只是一两个（如果我错了，请纠正我）。

结果如下：

![在此处输入图像描述](../Images/f7625b61e2ad4c9e57931de8023f257a.png)

以编程方式设置它的代码就像这样简单：

```
 JustifiedTextView J = new JustifiedTextView();
                   J.setText("insert your text here"); 
```

当然，这样离开它会很愚蠢，所以我还添加了更改字体大小和字体颜色的方法，这些方法基本上都是我使用 TextViews 的。这意味着我可以做这样的事情：

```
 JustifiedTextView J = new JustifiedTextView();
                   J.setText("insert your text here");
                   J.setTextColor(Color.RED);
                   J.setTextSize(30); 
```

并获得以下结果（图像被裁剪）：

![在此处输入图像描述](../Images/2ac12ba0be2d1c9e02a6641af19e0d39.png)

**但是，这不是向我们展示它的外观，而是分享您是如何做到的！**

我知道我知道。这是完整的代码。它还解决了设置透明背景和将 UTF-8 字符串加载到视图中时出现的问题。有关详细信息，请参阅 reloadData() 中的注释。

```
public class JustifiedTextView extends WebView{
    private String core      = "<html><body style='text-align:justify;color:rgba(%s);font-size:%dpx;margin: 0px 0px 0px 0px;'>%s</body></html>";
    private String textColor = "0,0,0,255";
    private String text      = "";
    private int textSize     = 12;
    private int backgroundColor=Color.TRANSPARENT;

    public JustifiedTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.setWebChromeClient(new WebChromeClient(){});
    }

    public void setText(String s){
        this.text = s;
        reloadData();
    }

    @SuppressLint("NewApi")
    private void reloadData(){

        // loadData(...) has a bug showing utf-8 correctly. That's why we need to set it first.
        this.getSettings().setDefaultTextEncodingName("utf-8");

        this.loadData(String.format(core,textColor,textSize,text), "text/html","utf-8");

        // set WebView's background color *after* data was loaded.
        super.setBackgroundColor(backgroundColor);

        // Hardware rendering breaks background color to work as expected.
        // Need to use software renderer in that case.
        if(android.os.Build.VERSION.SDK_INT >= 11)
            this.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);
    }

    public void setTextColor(int hex){
        String h = Integer.toHexString(hex);
        int a = Integer.parseInt(h.substring(0, 2),16);
        int r = Integer.parseInt(h.substring(2, 4),16);
        int g = Integer.parseInt(h.substring(4, 6),16);
        int b = Integer.parseInt(h.substring(6, 8),16);
        textColor = String.format("%d,%d,%d,%d", r, g, b, a); 
        reloadData();
    }

    public void setBackgroundColor(int hex){
        backgroundColor = hex;
        reloadData();
    }

    public void setTextSize(int textSize){
        this.textSize = textSize;
        reloadData();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-04-15T06:29:40.567

只需三个步骤，您就可以证明 Web 视图文本的合理性。

**1)**

```
// Justify tag
String justifyTag = "<html><body style='text-align:justify;'>%s</body></html>"; 
```

**2)**

```
// Concatenate your string with the tag to Justify it
String dataString = String.format(Locale.US, justifyTag, "my html with text justification"); 
```

**3)**

```
// Load the data in the web view
webView.loadDataWithBaseURL("", dataString, "text/html", "UTF-8", ""); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-06T23:26:51.547

没有 webview 的解决方案是：[https ://github.com/merterhk/JustifiedTextView](https://github.com/merterhk/JustifiedTextView)

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.view.View;

public class JustifiedTextView extends View {
        String text;
        ArrayList<Line> linesCollection = new ArrayList<Line>();
        TextPaint textPaint;
        Typeface font;
        int textColor;
        float textSize = 42f, lineHeight = 57f, wordSpacing = 15f, lineSpacing = 15f;
        float onBirim, w, h;
        float leftPadding, rightPadding;

        public JustifiedTextView(Context context, String text) {
                super(context);
                this.text = text;
                init();
        }

        private void init() {
                textPaint = new TextPaint(Paint.ANTI_ALIAS_FLAG);
                textColor = Color.BLACK;
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                super.onMeasure(widthMeasureSpec, heightMeasureSpec);

                if (font != null) {
                        font = Typeface.createFromAsset(getContext().getAssets(), "font/Trykker-Regular.ttf");
                        textPaint.setTypeface(font);
                }
                textPaint.setColor(textColor);

                int minw = getPaddingLeft() + getPaddingRight() + getSuggestedMinimumWidth();
                w = resolveSizeAndState(minw, widthMeasureSpec, 1);
                h = MeasureSpec.getSize(widthMeasureSpec);

                onBirim = 0.009259259f * w;
                lineHeight = textSize + lineSpacing;
                leftPadding = 3 * onBirim + getPaddingLeft();
                rightPadding = 3 * onBirim + getPaddingRight();

                textPaint.setTextSize(textSize);

                wordSpacing = 15f;
                Line lineBuffer = new Line();
                this.linesCollection.clear();
                String[] lines = text.split("\n");
                for (String line : lines) {
                        String[] words = line.split(" ");
                        lineBuffer = new Line();
                        float lineWidth = leftPadding + rightPadding;
                        float totalWordWidth = 0;
                        for (String word : words) {
                                float ww = textPaint.measureText(word) + wordSpacing;
                                if (lineWidth + ww + (lineBuffer.getWords().size() * wordSpacing) > w) {// is
                                        lineBuffer.addWord(word);
                                        totalWordWidth += textPaint.measureText(word);
                                        lineBuffer.setSpacing((w - totalWordWidth - leftPadding - rightPadding) / (lineBuffer.getWords().size() - 1));
                                        this.linesCollection.add(lineBuffer);
                                        lineBuffer = new Line();
                                        totalWordWidth = 0;
                                        lineWidth = leftPadding + rightPadding;
                                } else {
                                        lineBuffer.setSpacing(wordSpacing);
                                        lineBuffer.addWord(word);
                                        totalWordWidth += textPaint.measureText(word);
                                        lineWidth += ww;
                                }
                        }
                        this.linesCollection.add(lineBuffer);
                }
                setMeasuredDimension((int) w, (int) ((this.linesCollection.size() + 1) * lineHeight + (10 * onBirim)));
        }

        @Override
        protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                canvas.drawLine(0f, 10f, getMeasuredWidth(), 10f, textPaint);
                float x, y = lineHeight + onBirim;
                for (Line line : linesCollection) {
                        x = leftPadding;
                        for (String s : line.getWords()) {
                                canvas.drawText(s, x, y, textPaint);
                                x += textPaint.measureText(s) + line.spacing;
                        }
                        y += lineHeight;
                }
        }

        public String getText() {
                return text;
        }

        public void setText(String text) {
                this.text = text;
        }

        public Typeface getFont() {
                return font;
        }

        public void setFont(Typeface font) {
                this.font = font;
        }

        public float getLineHeight() {
                return lineHeight;
        }

        public void setLineHeight(float lineHeight) {
                this.lineHeight = lineHeight;
        }

        public float getLeftPadding() {
                return leftPadding;
        }

        public void setLeftPadding(float leftPadding) {
                this.leftPadding = leftPadding;
        }

        public float getRightPadding() {
                return rightPadding;
        }

        public void setRightPadding(float rightPadding) {
                this.rightPadding = rightPadding;
        }

        public void setWordSpacing(float wordSpacing) {
                this.wordSpacing = wordSpacing;
        }

        public float getWordSpacing() {
                return wordSpacing;
        }

        public float getLineSpacing() {
                return lineSpacing;
        }

        public void setLineSpacing(float lineSpacing) {
                this.lineSpacing = lineSpacing;
        }

        class Line {
                ArrayList<String> words = new ArrayList<String>();
                float spacing = 15f;

                public Line() {
                }

                public Line(ArrayList<String> words, float spacing) {
                        this.words = words;
                        this.spacing = spacing;
                }

                public void setSpacing(float spacing) {
                        this.spacing = spacing;
                }

                public float getSpacing() {
                        return spacing;
                }

                public void addWord(String s) {
                        words.add(s);
                }

                public ArrayList<String> getWords() {
                        return words;
                }
        }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T17:46:03.880

这是 Juan 给出的同一个 JustifiedTextView 类（由我编辑），但扩展为使用您可以在布局 xml 文件中使用的自定义 xml 属性。甚至 Eclipse 布局编辑器也会在属性表中显示您的自定义属性，这很酷。我把它放在一个额外的答案中，以防你想保持干净并且不需要 xml 属性。

```
public class JustifiedTextView extends WebView{
    private String core      = "<html><body style='text-align:justify;color:rgba(%s);font-size:%dpx;margin: 0px 0px 0px 0px;'>%s</body></html>";
    private String text;
    private int textColor;
    private int backgroundColor;
    private int textSize;

    public JustifiedTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs);
    }

    public JustifiedTextView(Context context, AttributeSet attrs, int i) {
        super(context, attrs, i);
        init(attrs);
    }

    @SuppressLint("NewApi")
    public JustifiedTextView(Context context, AttributeSet attrs, int i, boolean b) {
        super(context, attrs, i, b);
        init(attrs);
    }

    private void init(AttributeSet attrs) { 
        TypedArray a=getContext().obtainStyledAttributes(
                 attrs,
                 R.styleable.JustifiedTextView);

        text = a.getString(R.styleable.JustifiedTextView_text);
        if(text==null) text="";
        textColor = a.getColor(R.styleable.JustifiedTextView_textColor, Color.BLACK);
        backgroundColor = a.getColor(R.styleable.JustifiedTextView_backgroundColor, Color.TRANSPARENT);
        textSize = a.getInt(R.styleable.JustifiedTextView_textSize, 12);

        a.recycle();

        this.setWebChromeClient(new WebChromeClient(){});
        reloadData();
    }

    public void setText(String s){
        if(s==null)
            this.text="";
        else
            this.text = s;
        reloadData();
    }

    @SuppressLint("NewApi")
    private void reloadData(){

        if(text!=null) {
            String data = String.format(core,toRgba(textColor),textSize,text);
            Log.d("test", data);
            this.loadDataWithBaseURL(null, data, "text/html","utf-8", null);
        }

        // set WebView's background color *after* data was loaded.
        super.setBackgroundColor(backgroundColor);

        // Hardware rendering breaks background color to work as expected.
        // Need to use software renderer in that case.
        if(android.os.Build.VERSION.SDK_INT >= 11)
            this.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);
    }

    public void setTextColor(int hex){
        textColor = hex; 
        reloadData();
    }

    public void setBackgroundColor(int hex){
        backgroundColor = hex;
        reloadData();
    }

    public void setTextSize(int textSize){
        this.textSize = textSize;
        reloadData();
    }

    private String toRgba(int hex) {
        String h = Integer.toHexString(hex);
        int a = Integer.parseInt(h.substring(0, 2),16);
        int r = Integer.parseInt(h.substring(2, 4),16);
        int g = Integer.parseInt(h.substring(4, 6),16);
        int b = Integer.parseInt(h.substring(6, 8),16);
        return String.format("%d,%d,%d,%d", r, g, b, a); 
    }
} 
```

将其作为**justified_text_view_attr.xml**添加到您的 res/values/ 文件夹中，或者将其合并到您现有的 attrs.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>                                                                               
<resources>                                                                                                          
    <declare-styleable name="JustifiedTextView">                                                                     
        <attr name="text" format="string" localization="suggested"/>                                                 
        <attr name="textColor" format="color|reference" />                                                           
        <attr name="backgroundColor" format="color|reference" />                                                     
        <attr name="textSize" format="integer" min="1" />                                                            
    </declare-styleable>
</resources> 
```

如果您发现任何错误，请随时编辑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-06T04:21:56.027

我相信这种最简单的形式。我工作得很好

```
package domo.suichbt.util;

import android.content.Context;
import android.text.Html;
import android.util.AttributeSet;
import android.widget.TextView;

public class JustifiedTextView extends TextView
{
    private final String CORE_TEMPLATE = "<html><body style='text-

align:justify;margin: 0px 0px 0px 0px;'>%s</body></html>";  

public JustifiedTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
    super(context, attrs, defStyleAttr, defStyleRes);
    setText(Html.fromHtml(String.format(CORE_TEMPLATE,getText())));
}

public JustifiedTextView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    setText(Html.fromHtml(String.format(CORE_TEMPLATE,getText())));
}

public JustifiedTextView(Context context) {
    super(context);
    setText(Html.fromHtml(String.format(CORE_TEMPLATE,getText())));
}

public JustifiedTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setText(Html.fromHtml(String.format(CORE_TEMPLATE,getText())));
}
} 
```

插入 xml 示例

```
 <domo.suichbt.util.JustifiedTextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/sw_titulo"
    android:singleLine="false">
</domo.suichbt.util.JustifiedTextView> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-26T19:16:22.527

看看这个链接。它使用 WebView 来完全证明 Android 中 CheckBox 的文本。它也可以在 TextView 中完全一样地使用，因为每个 CheckBox 实际上是一个 TextView 和一个 Button。 [http://www.collegemobile.com/2014/09/justify-text-android-checkbox/](http://www.collegemobile.com/2014/09/justify-text-android-checkbox/)

# css - 默认 JavaFX-CSS

> ID：11922869
> 
> 赞同：18
> 
> 时间：2012-08-12T14:18:45.427
> 
> 标签：css, javafx-8, fxml

有什么方法可以查看适用于 JavaFX 元素的 CSS 规则吗？或者有可用的默认 CSS 规则的已发布参考？

例如，我想知道工具栏边框的颜色。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-12T14:22:39.353

CSS 文件位于 jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.css 的 javafxrt.jar 中。

不幸的是，到目前为止，还没有 API 可以访问元素的 CSS 样式，尽管 JavaFX 2.2 显然正在讨论这一点。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-06T18:22:31.640

这是在 pastebin 上提取的 caspian.css - [http://pastebin.com/0PebD9nR](http://pastebin.com/0PebD9nR)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-04-04T13:56:59.963

# *摩德纳*主题

在 JavaFX 8 中，默认 CSS 是一个名为*Modena*的新主题。请参阅带有屏幕截图的[公告](http://fxexperience.com/2013/01/modena-new-theme-for-javafx-8/)。

[在 GitHub 上的 OpenJFX 站点上](https://github.com/openjdk/jfx)查看最新版本。

构建版本 Java8_91 的 modena.css 可以在这里找到：

[https://gist.github.com/maxd/63691840fc372f22f470](https://gist.github.com/maxd/63691840fc372f22f470)

如果您在不同的 JDK 版本中搜索 css 文件，这就是要走的路。

JDK 10.0 以下：`$JAVA_HOME/jre/lib/ext/jfxrt.jar --> com/sun/javafx/scene/control/skin/modena.`

JDK 10.0 及更高版本：`$JAVA_HOME/jmods/javafx.controls.jmod --> classes/com/sun/javafx/scene/control/skin/modena.`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-12T14:46:49.170

来自[Skinning JavaFX Applications with CSS: Default Style Sheet](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm#sthref4) ,

> JavaFX 应用程序的默认样式表是 caspian.css，可在 JavaFX 运行时 JAR 文件 jfxrt.jar 中找到

和

> 使用以下命令从 JAR 文件中提取样式表：
> 
> `jar -xf jfxrt.jar com/sun/javafx/scene/control/skin/caspian/caspian.css`

然后只需使用 css 查看器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-26T18:17:48.220

至于2019年底默认`modena.css`可以看jfx官方github repo：

[https://github.com/openjdk/jfx/tree/master/modules/javafx.controls/src/main/resources/com/sun/javafx/scene/control/skin/modena](https://github.com/openjdk/jfx/tree/master/modules/javafx.controls/src/main/resources/com/sun/javafx/scene/control/skin/modena)

Or you can look inside Maven [javafx-controls](https://mvnrepository.com/artifact/org.openjfx/javafx-controls). For example in `javafx-controls-13-win.jar` go to `/com/sun/javafx/scene/control/skin/modena/`

# c# - 列表视图中选定索引的问题

> ID：11922872
> 
> 赞同：1
> 
> 时间：2012-08-12T14:19:08.520
> 
> 标签：c#, winforms, listview, arraylist

我有一个数组列表，其中包含我自己的类的对象。我想从列表视图的 index = selectedindex 的数组列表中获取对象。

我试过这个：

```
TrackInformation t=(TrackInformation) SongList[listView1.SelectedIndices[0]]; 
```

`TrackInformation`是我的班级，`SongList`是一个 ArrayList 类型`TrackInformation`。

listview1 不允许选择多个索引，所以我想要`SelectedIndices`集合的第一个元素。

我得到`ArgumentOutOfRangeException`它说“0”的值对“索引”无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:30:54.090

将此行放在您的代码之前 -

```
if(listView1.SelectedIndices.Count > 0)
{
   TrackInformation t=(TrackInformation) SongList[listView1.SelectedIndices[0]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:31:10.990

ListView.SelectedIndexChanged 事件有一个会炸毁您的代码的怪癖。当您启动程序时，不会选择任何项目。单击一个项目并 SelectedIndexChanged 触发，没问题。现在单击另一个项目，事件会触发*两次*。首先让你知道，第一项是*unselected*。然后再次告诉你新项目被选中。第一个事件会让你索引一个空数组，kaboom。RV1987 的代码片段阻止了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T14:25:08.910

错误是因为 listView1.SelectedIndices 为空，您是否选择了一行？

您可能想要进行测试

```
ListView.SelectedIndexCollection selected=listView1.SelectedIndicies;

if (selected.Count==0) {
 // code for no items selected
} else {
  TrackInformation t=(TrackInformation) SongList[selected[0]]; 
  // rest of code to deal with t
} 
```

# wcf-data-services - 如何实现 IUpdatable 服务

> ID：11922873
> 
> 赞同：0
> 
> 时间：2012-08-12T14:19:23.140
> 
> 标签：wcf-data-services, odata

如果这是一个新手问题，我很抱歉，但我是 C# 编程的新手。

但是我正在尝试编写一个 WCF 数据服务，它可以读取数据并吐出一个 odata 提要。我在 VS 中添加了服务引用，它为我创建了服务类型和数据模型，但我似乎缺少一个`SaveChanges()`方法（我看到在一堆教程中被调用。）

这导致我`IUpdatable`，目前停止兔子洞。当有人说“您的服务不支持更新，因为它没有实现`IUpdatable`.”时，这是什么意思。如何实现这个接口？实现这个接口意味着什么？

此外，这适用于 Windows Phone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:19:07.120

如果问题不是客户端上缺少 SaveChanges 方法（上面马克的回答应该解决），并且您已经创建了一个应该支持读写访问的服务，那么您可能需要实现 IUpdatable 接口（在服务器上） .

如果您的服务使用 EF 提供程序，那么这应该已经可以工作，因为 EF 提供程序实现了开箱即用的 IUpdatable。

如果您的服务使用反射提供程序，那么您将需要在您的上下文中实现 IUpdatable。这里有一些描述：http: [//msdn.microsoft.com/en-us/library/dd723653.aspx](http://msdn.microsoft.com/en-us/library/dd723653.aspx)。

如果您使用的是自定义提供程序，那么您还需要实现 IUpdatable 并且也有示例，但我认为您不会走这条路 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:43:28.017

由于 Windows Phone 7 基于 Silverlight，因此需要异步，因此`SaveChanges`上下文中没有方法，而是一个`BeginSaveChanges`和`EndSaveChanges`方法对。你可以这样称呼他们：

```
private void SaveChanges_Click(object sender, RoutedEventArgs e)
{
    // Start the saving changes operation.
    svcContext.BeginSaveChanges(SaveChangesOptions.Batch, 
        OnChangesSaved, svcContext);
}

private void OnChangesSaved(IAsyncResult result)
{
    // Use the Dispatcher to ensure that the 
    // asynchronous call returns in the correct thread.
    Dispatcher.BeginInvoke(() =>
        {
            svcContext = result.AsyncState as NorthwindEntities;

            try
            {
                // Complete the save changes operation and display the response.
                WriteOperationResponse(svcContext.EndSaveChanges(result));
            }
            catch (DataServiceRequestException ex)
            {
                // Display the error from the response.
                WriteOperationResponse(ex.Response);
            }
            catch (InvalidOperationException ex)
            {
                messageTextBlock.Text = ex.Message;
            }
            finally
            {
                // Set the order in the grid.
                ordersGrid.SelectedItem = currentOrder;
            }
        }
    );
} 
```

该示例来自[http://msdn.microsoft.com/en-us/library/gg521146(VS.92).aspx](http://msdn.microsoft.com/en-us/library/gg521146(VS.92).aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T02:03:58.770

IUpdatable 在这里由它的设计者描述： [WCF 数据服务博客：IUpdatable & ADO.Net DataServices Framework](http://blogs.msdn.com/b/astoriateam/archive/2008/04/10/iupdatable-ado-net-data-services-framework.aspx)

# c - printf() 中的井号“#”有什么作用？

> ID：11922876
> 
> 赞同：4
> 
> 时间：2012-08-12T14:19:40.337
> 
> 标签：c, printf

```
int x = 0xff;
printf("%#x",x); 
```

输出：`0xff`

```
printf("%x",x); 
```

输出：`ff`

为什么输出有差异？`#`具体做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T14:21:14.423

标准说：

> 7.21.6 - 2
> 
> 结果将转换为“替代形式”。... 对于 x（或 X）转换，非零结果的前缀为 0x（或 0X）。

它还有其他有趣的东西（特别是对于花车），但我很少看到它被使用——我老实说我必须查一下才能记住。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-02T23:02:21.737

该`#`标志对于不同类型的行为不同。维基百科有一个很好的总结：

> 对于 g 和 G 类型，不删除尾随零。
> 
> 对于 f、F、e、E、g、G 类型，输出始终包含小数点。
> 
> 对于 o、x、X 类型，文本 0、0x、0X 分别被附加到非零数字之前。

来源：[https ://en.wikipedia.org/wiki/Printf_format_string#Flags_field](https://en.wikipedia.org/wiki/Printf_format_string#Flags_field)

# c++ - std:map 和 std:set 的线程安全

> ID：11922883
> 
> 赞同：1
> 
> 时间：2012-08-12T14:20:38.427
> 
> 标签：c++, map, set, readwritelock

> **可能重复：**
> [我是否需要在多线程环境中保护对 STL 容器的读取访问？](https://stackoverflow.com/questions/187583/do-i-need-to-protect-read-access-to-an-stl-container-in-a-multithreading-environ)

如果某个线程读取 :set 或 :map 而另一个线程写入该 set 或 map，会发生什么？例外？

现在我使用读写锁，但我想删除锁，因为写操作不经常，读操作很频繁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T14:25:04.703

竞态条件会发生：根据 CPU 所做的事情的顺序，您每次都会收到不同的结果。如果一个迭代器失效（例如，删除一个线程中的一个项目，而另一个线程有一个迭代器指向现在无效的内存）然后在另一个线程中使用，你将得到未定义的行为，所以要小心死婴儿，粘土golems 和 haunts，以及更可能的段错误、延迟段错误和运行时崩溃。

C++11 引入了`mutex`其他线程工具：如果必须，请使用这些工具保护您的读写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:40:55.010

mutexs,locks.... brrr 尝试使用免费的锁容器。例如英特尔“线程构建块”又名 TBB [http://threadingbuildingblocks.org/files/documentation/a00130.html](http://threadingbuildingblocks.org/files/documentation/a00130.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:42:23.817

标准容器不是线程安全的，并且没有指定它们具有 Java 意义上的“快速失败”迭代器。因此，无保护的并发访问至少有两件事会出错：

1.  容器上的数据竞争，这是未定义的行为
2.  一个线程使迭代器无效，随后另一个线程使用等值迭代器。这也是未定义的行为，但不一定是数据竞争，也可能是单线程程序中的错误。当它们在不同线程中使用时，在同一个容器上丢失多个迭代器会更容易一些。

有人可能会说 C++ 的哲学是“快速成功”，不要介意程序员失败时会发生什么;-)。因此，没有内置锁对许多用户来说是多余的。相反，这是你的问题——你宁愿不高兴锁正在减慢这个程序，而不是不高兴它们减慢了这个程序和你曾经写过的所有其他程序`set`，即使*没有*同时访问该集合。 .

> 写操作不经常，读操作非常频繁。

这正是读写器锁应该表现良好的情况。改善情况的唯一方法是，如果您可以将写操作从“不经常”减少到“从不”，这可能是您做不到的。

# vbscript - 如何在 VBScript 中不使用 WMI 查找操作系统名称？

> ID：11922885
> 
> 赞同：0
> 
> 时间：2012-08-12T14:20:52.180
> 
> 标签：vbscript

我需要一种不使用 winmgmts 来查找操作系统版本的方法。我需要一种独立于平台的方式来查找操作系统、vista、win7 等的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:31:52.353

我们必须解析在 2K/XP 上与 Vista/Win7 上不同的用户帐户中的路径。comspec 返回如下所示：Microsoft Windows [版本 6.1.7600]。2k/XP 是 5.x 版，Vista/Win7 是 6.x 版。

```
Set shell = CreateObject("WScript.Shell")
Set getOSVersion = shell.exec("%comspec% /c ver")
version = getOSVersion.stdout.readall
wscript.echo version
Select Case True
   Case InStr(version, "n 5.") > 1 : GetOS = "XP"
   Case InStr(version, "n 6.") > 1 : GetOS = "Vista"
   Case Else : GetOS = "Unknown"
End Select
wscript.echo GetOS` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:31:33.513

脚本：

```
Set oShell = CreateObject( "WScript.Shell" )
os_name=oShell.ExpandEnvironmentStrings("%OS%")
WScript.Echo os_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T21:27:21.477

此[页面](http://vbnet.mvps.org/index.html?code/system/getversionex.htm)提供了几个用于获取常规 Windows 操作系统信息的包装例程，所有这些都使用对 GetVersionEx API 的单个调用。

![GetVersionEx：Windows 版本、服务包和平台信息](../Images/82b9fc5a2d2f5b06a2ea4de0ad4f412c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:28:28.003

来自[VisualBasicScript.com](http://www.visualbasicscript.com/Short-Easy-way-to-determine-OS-m28386.aspx)：

```
Option Explicit 
Dim oShell 
Dim oShellExec, oStdOutputText, sText, iElement, aOS, sOS

Set oShell = CreateObject("Wscript.Shell") 
Set oShellExec = oShell.Exec("%comspec% /c ver") 
Set oStdOutputText = oShellExec.StdOut 

Do While Not oStdOutputText.AtEndOfStream 
    sText = oStdOutputText.ReadLine 
    aOS = Array("Windows 95", "Windows 98", "Windows NT", "Windows 2000", "Windows XP", "Microsoft Windows [Version") 
    For iElement = LBound(aOS) To UBound(aOS) 
      If InStr(sText, aOS(iElement)) <> 0 Then 
        If aOS(iElement) = "Microsoft Windows [Version" Then 
          If InStr(sText, "Version6.0") <> 0 Then
            sOS = "Windows Vista"
          ElseIf InStr(sText, "Version 6.1")<>0 Then
            sOS = "Windows 7"
          Else
            sOS = "Windows 2003" 
          End If
        Else 
         sOS = aOS(iElement) 
        End If 
      End If 
    Next 
Loop 
WScript.Echo sOS 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T13:07:23.427

```
Set dtmConvertedDate = CreateObject("WbemScripting.SWbemDateTime")
strComputer = "."
Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set oss = objWMIService.ExecQuery ("Select * from Win32_OperatingSystem")

For Each os in oss

    Wscript.Echo "Caption: " & os.Caption
    Wscript.Echo "Code Set: " & os.CodeSet
    Wscript.Echo "Country Code: " & os.CountryCode
    Wscript.Echo "Debug: " & os.Debug
    Wscript.Echo "Encryption Level: " & os.EncryptionLevel
    dtmConvertedDate.Value = os.InstallDate
    dtmInstallDate = dtmConvertedDate.GetVarDate
    Wscript.Echo "Install Date: " & dtmInstallDate 
    Wscript.Echo "Licensed Users: " & os.NumberOfLicensedUsers
    Wscript.Echo "Organization: " & os.Organization
    Wscript.Echo "OS Language: " & os.OSLanguage
    Wscript.Echo "OS Product Suite: " & os.OSProductSuite
    Wscript.Echo "OS Type: " & os.OSType
    Wscript.Echo "Primary: " & os.Primary

    Wscript.Echo "Serial Number: " & os.SerialNumber
    Wscript.Echo "Version: " & os.Version
Next 
```

# python - Jinja2 和 Json

> ID：11922893
> 
> 赞同：11
> 
> 时间：2012-08-12T14:21:40.517
> 
> 标签：python, json, jinja2

例如，我有一个 JSON 文件

```
{
    "Google":{
    "Web":"www.web.de",
    "Apps":{
        "Drive": "DriveLink",
        "Dropbox": "DropboxLink"
    },
    "Google Main":"http://mail.google.com",
    "G+":"http://plus.google.com"
    },  
    "Social":{
    "Facebook":"http://www.facebook.de",
    "G+":"https://plus.google.com",
    "Xing":"http://www.xing.de",
    "LinkedIn":"http://www.linkedin.com",
    "Tumblr":"http://www.tumblr.com"
    },
    "Fun":{
    "Reddit":"http://www.reddit.com"
    }
} 
```

如您所见，我在 Google 部分下有一个名为 Apps 的嵌套部分

使用 CherryPy，我交出这个 JSON 对象，名称如下：

```
@cherrypy.expose
def index(self):
    linksFile = open('links.json', 'r')
    linksList = json.load(linksFile) 

    template = jinjaEnv.get_template('index.html')
    return template.render(linksList=linksList) 
```

我想要的是呈现以下内容：

1.  谷歌
    *   网络（作为链接）
    *   谷歌主
    *   G+
    *   应用
        *   驾驶
        *   投递箱
2.  社会的
    *   Facebook
    *   G+
    *   邢

等等

我不明白的是要递归地渲染这个嵌套的对象，比如“Apps”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T16:42:54.403

[文档](http://jinja.pocoo.org/docs/templates)内容如下：

> 可以递归地使用循环。如果您正在处理诸如站点地图之类的递归数据，这将非常有用。要递归地使用循环，您基本上必须将递归修饰符添加到循环定义中，并使用要递归的新迭代调用循环变量。

在您的情况下，这将通过以下方式完成：

```
<ul>
{% for key, value in linksList.items() recursive %}
    <li>
    {% if value is string %}
        <a href="{{ value }}">{{ key }}</a>
    {% else %}
        {{ key }}
        <ul>{{ loop(value.items()) }}</ul>
    {% endif %}
    </li>
{% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-04T15:19:15.720

我的 2 美分，如果有人来这里寻找*使用 Jinja 渲染 JSON*并补充来自@Ryon Sherman 的响应:)

1.  由于 JSON 可能具有 int 值和字符串，因此您可以使用`if value is mapping`（并翻转 if 条件）
2.  如果您的输出必须感觉像 JSON，您可以使用`{{key|indent(width)}}`+`loop.depth`
3.  在我的情况下，模板是用于电子邮件的，`key|indent()`没有按预期工作，所以我最终使用了一个辅助`{% for %}`循环：

```
<div>
    <code>{
    {% for key, value in dic.items() recursive %}
    {% if value is mapping %}
    <p>
     {% for it in range(loop.depth) %}&nbsp;&nbsp;{% endfor %}{{key}}: {
    </p>
    {{ loop(value.items()) }}
    <p>
      {% for it in range(loop.depth) %}&nbsp;&nbsp;{% endfor %}}
    </p>
    {% else %}
    <p>
      {% for it in range(loop.depth) %}&nbsp;&nbsp;{% endfor %}{{key}}: {{value}},
    </p>
    {% endif %}
    {% endfor %}
    }</code>
</div> 
```

# php - FB.Event.subscribe - 没有事件被触发

> ID：11922894
> 
> 赞同：0
> 
> 时间：2012-08-12T14:21:42.307
> 
> 标签：php, javascript, facebook-javascript-sdk, xfbml

我正在尝试在我的网页中包含 facebook 登录/注册插件。每当我单击登录或单击注销时，应触发相应的**FB.Event.subscribe**。但就我而言，登录和注销成功发生。但这些事件都没有被触发。在代码下方找到，

```
<div id="fb-root"></div>
window.fbAsyncInit = function(){
    FB.init({
        appId   : 'xxxxxxxxxxxxxxxxxxxx',
        status  : true,
        cookie  : true,
        oauth   : true,
        xfbml   : true 
    });

    FB.Event.subscribe('auth.login', function(response) {
        FB.api('/me', function(response) {
        alert('You have successfully logged in, '+response.name+"!");
        });
    });     

    FB.Event.subscribe('auth.logout', function(response) {
        FB.api('/me', function(response) {
            alert('You have successfully logged out, '+response.name+"!");
        });
    });

    FB.getLoginStatus(function(response) {
        if (response.session) {
            alert('Hello');
        }
    });
};

(function() {
    var e = document.createElement('script');
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}()); 
```

如果有人能在这里帮助我，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:55:07.447

这些事件仅在用户状态更改时触发。

例如`auth.login`，当用户尚未授权您的页面然后给予授权时，就会发生此更改。在这第一次，用户没有您页面的 facebook cookie 值。当他或她授权您的页面时，cookie 值将由 FB JS SDK 写入，您的脚本将感知`auth.login`更改事件。下次，当您的用户再次回来时，cookie 值应该已经存在，并且该事件不会触发，因为状态没有更改。

`auth.login`当用户已经授权您的应用程序但清除了 cookie 时，该事件也会触发。在下一次访问中，FB JS SDK 将不得不再次写入 cookie，并且该事件将发生。

我不确定该`auth.logout`事件，因为我不使用它，但据我所知，它与您的应用程序无关，而是与您用户的 Facebook 帐户的会话状态有关。

我建议您在脚本执行期间监视页面上的 cookie 值更改，以便更好地了解事件何时发生。

# ruby - 使用共享数据库连接时我需要知道什么？

> ID：11922895
> 
> 赞同：0
> 
> 时间：2012-08-12T14:21:42.807
> 
> 标签：ruby, mongodb, heroku, sinatra

我正在使用 Ruby、Sinatra 和 Mongo 在 Heroku 上开发 FB 应用程序。我认为共享数据库连接是一个好主意，但我不知道它在生产中的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:42:17.017

我不确定你在哪里看过或研究过。

除了上面@Stennie 的链接，请查看以下链接 -

*   [在github](https://github.com/mongodb/mongo-ruby-driver/)上查看 ruby​​ 驱动程序的实际源代码。那里有足够的信息，包括一个部分和一个连接池的示例。

*   查看整体[ruby​​ 驱动程序信息](http://www.mongodb.org/display/DOCS/Ruby+Language+Center)

*   关于在驱动程序中进行池化的一些[说明](http://www.mongodb.org/display/DOCS/Notes+on+Pooling+for+Mongo+Drivers)。

*   另请参阅So 上原始 Ruby 驱动程序作者回答的这个[问题。](https://stackoverflow.com/questions/2327416/mongodb-what-is-connection-pooling-and-timeout)

如果您没有使用连接池，您可能会在日志中看到以下[消息](http://docs.mongodb.org/manual/faq/developers/?highlight=connection%20pooling#why-does-mongodb-log-so-many-connection-accepted-events)。

# jquery - 无法阻止滚动事件触发太多次

> ID：11922897
> 
> 赞同：1
> 
> 时间：2012-08-12T14:22:03.613
> 
> 标签：jquery, jquery-plugins, jquery-pagination

所以我一直在阅读这个问题，并看到了很多不同的解决方案。目前我的代码如下所示：

我正在使用这个插件：[http ://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

```
// Bind throttled scroll event to load new items when page is scrolled to the bottom.
$(window).data('loading', false).scroll($.throttle(800, Olemas.ScrollLoad));

Olemas.ScrollLoad = function()  {
  if ($(window).data('loading') == true) return;
  if ($(window).scrollTop() >= ($(document).height() - $(window).height())) {
      if (Olemas.NextPage <= Olemas.MaxPage) {
          $(window).unbind('scroll'); // I have tried unbinding the event to stop it from launching
          Olemas.LoadMoreItems(Olemas.DivToUpdate); // load the new items
          $(window).data('loading', false).scroll($.throttle(800, Olemas.ScrollLoad)); // rebind scroll event.
      }

  }
}; 
```

问题是即使事件每 800 毫秒触发一次。当我快速滚动到底部时，滚动事件触发太多次并且页面加载都错误。

```
if ($(window).scrollTop() >= ($(document).height() - $(window).height())) 
```

在我的项目加载到页面后，此语句不应该通过，但它仍然通过几次之后才意识到页面高度已更改。高度属性是否可能更新得不够快，或者滚动事件已经以某种方式加载到 DOM 中？

在 LoadMoreItems 函数扩展页面后，我能做些什么来阻止滚动事件触发。

编辑。

所以在这个函数中，警报运行 2 次，然后在 LoadMoreItems ajax 成功中发出警报。

```
Olemas.ScrollLoad = function()  {
/// <summary>
/// Loads more items when scrolled to the bottom.
/// </summary>
if ($(window).data('loading') == true) return;
if ($(window).scrollTop() >= ($(document).height() - $(window).height())) {
    if (Olemas.NextPage <= Olemas.MaxPage) {
        alert(Olemas.NextPage); // This runs 2 times, before the LoadMoreItems changes the NextPage value
        $(window).off('scroll', $.throttle(800, Olemas.ScrollLoad));

        Olemas.LoadMoreItems(Olemas.DivToUpdate);
        $(window).data('loading', false).on('scroll', $.throttle(800, Olemas.ScrollLoad)); // rebind scroll event.
    }

}
};

Olemas.LoadMoreItems = function () {
  $(window).data('loading', true);
  $.ajax({
      url: Olemas.ActionLink,
      data: { "page": Olemas.NextPage, "facId": Olemas.FacultyId },
      success: function (data) {
          $(".loadingImage").hide();
          $(data).appendTo(Olemas.DivToUpdate);
          alert("Done") // This is run after the previous alerts have fired 2 times.
          Olemas.NextPage++;
          Olemas.CheckPages();
      }
  });
  return false;

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:16:04.870

好的，所以我的问题如下：

```
// Bind throttled scroll event to load new items when page is scrolled to the bottom.
$(window).data('loading', false).scroll($.throttle(800, Olemas.ScrollLoad));

Olemas.ScrollLoad = function()  {
  if ($(window).data('loading') == true) return;
  if ($(window).scrollTop() >= ($(document).height() - $(window).height())) {
   if (Olemas.NextPage <= Olemas.MaxPage) {
      $(window).unbind('scroll'); // I have tried unbinding the event to stop it from launching
      Olemas.LoadMoreItems(Olemas.DivToUpdate); // load the new items
      $(window).data('loading', false).scroll($.throttle(800, Olemas.ScrollLoad)); // rebind scroll event.
      //The LoadMoreItems was an AJAX method and the rebinding was made before the ajax call had succeeded. 
      //That is why it fired the scroll event too many times.
  }

}
}; 
```

我通过将加载布尔检查移动到 LoadMoreItems 方法来解决它，这样该方法必须在重新绑定滚动之前完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:30:30.533

您可以随时尝试使用`on()`/ `off()`：

```
$(window).data('loading', false).on('scroll', doScroll);

Olemas.ScrollLoad = function() {
    if ($(window).data('loading') == true) return;
    if ($(window).scrollTop() >= ($(document).height() - $(window).height())) {
        if (Olemas.NextPage <= Olemas.MaxPage) {
            $(window).off('scroll', doScroll);
            Olemas.LoadMoreItems(Olemas.DivToUpdate); // load the new items
            $(window).data('loading', false).on('scroll', doScroll);
        }
    }
};

function doScroll() {
    $.throttle(800, Olemas.ScrollLoad);
}​ 
```

**编辑：**

你不能这样做：

```
$(window).on('scroll', $.throttle(800, Olemas.ScrollLoad)); 
```

它一定要是 ：

```
$(window).on('scroll', function() {
    $.throttle(800, Olemas.ScrollLoad));
}); 
```

或者简单地说：

```
$(window).on('scroll', doScroll);

function doScroll() {
    $.throttle(800, Olemas.ScrollLoad);
}​ 
```

调用一个单独的函数！

带有单独函数的最后一个选项可以更轻松地取消绑定该函数`off()`，或者您可以通过执行以下操作取消绑定任何函数：

```
$(window).off('scroll'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T08:23:06.080

这是我的时间戳和间隔的解决方案。滚动功能完成后最后一次触发事件需要间隔。出于性能原因，我将延迟设置为 50。这个例子每 2 秒触发一次函数，自定义有趣。

```
 var interval, timestamp = Date.now(),

    scrollFunction = function() {
        console.log('fire');
    },

    scrollHandler = function() {
        if(!interval) {
            interval = setInterval(() => {
                if((Date.now() - timestamp) > 2000) {
                    timestamp = Date.now();
                    scrollFunction();
                    clearInterval(interval);
                    interval = undefined;
                }
            }, 50);
        }
    }

window.addEventListener('scroll', scrollHandler);
scrollHandler(); 
```

# html - 达到最大宽度时的新表格行

> ID：11922898
> 
> 赞同：0
> 
> 时间：2012-08-12T14:22:04.427
> 
> 标签：html, css, tabular

我有一个带有图像的表格，我希望它在 500px 充满包含每个 250px 宽的图像的单元格时创建一个新行。就像图像的自动换行一样。无法使其与最大宽度一起使用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:30:46.803

不要使用桌子。表格仅用于显示表格数据。最好只使用div。

```
.wrapper {
 width:500px;
 overflow:auto;
}
.wrapper img {
 width:250px;
 float:left;
}

<div class="wrapper">

    <img src="image.jpg" alt="" />
    <img src="image.jpg" alt="" />
    <img src="image.jpg" alt="" />
    <img src="image.jpg" alt="" />

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:27:19.067

这不是块元素中图像的默认行为吗？（比如 div 或 p）你为什么需要一张桌子？

您还可以创建一个跨越所有列的表格单元格并将图像插入其中。当达到最大宽度时，它们将换行。

# html - 禁用鼠标悬停在 HTML 元素的信息上

> ID：11922903
> 
> 赞同：2
> 
> 时间：2012-08-12T14:23:03.877
> 
> 标签：html, firefox, google-chrome

在 Chrome 和 Firefox 中，当我将鼠标移到元素（即 div、img、按钮）上时，我会在右下角或左下角得到一个小工具提示，类似`example.com/11.jpg`. 我已经删除了所有标题，所以我知道这些与标题无关。这叫什么，我如何摆脱这个功能？

![奇怪的工具提示](../Images/e2cd00e234159ca5788f59c07df4d3fa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:39:48.067

工具提示只会在您将鼠标悬停在`<a href="">`元素上时出现。它们显示链接指向的 URL。

据我所知，它无法关闭。对于 Firefox，似乎有一个[插件（Status-4-Evar）](https://addons.mozilla.org/en-us/firefox/addon/status-4-evar/)来恢复旧功能，但当然要由用户自己决定是否安装它。

以下链接似乎支持我所说的：

*   [弹出状态栏。我该如何关闭该死的东西？- 谷歌组](http://productforums.google.com/forum/#!category-topic/chrome/discuss-chrome/FtD7qjochgw%5B1-25%5D)
*   [Firefox Bug Tracker 中的条目](https://bugzilla.mozilla.org/show_bug.cgi?id=645313)
*   [关闭 Google Chrome 中的链接悬停状态栏](https://superuser.com/questions/239202/turn-off-the-link-hover-statusbar-in-google-chrome)

如果用户无法禁用此功能，我相信网站也无法禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:49:48.193

我**不**建议这样做，**但**您可以将所有链接 ( `<a href=""></a>`) 更改为其他元素 (ie `<span></span>`) 以将 url 重定向行为与 jQuery 相关联。

这个[小提琴](http://jsfiddle.net/x6CrM/9/)展示了一种你可以做到的方式。

考虑到这将迫使客户端在**每次**加载页面时都处理页面中的所有链接，这会给加载带来一些开销。但是，如果这是您认为必须做的事情，那么这将是一种方法。

我会在所有浏览器中测试它以查看它的性能，因为在删除/替换 html 元素时我在旧版本的 IE 中遇到了一些问题，因为在操作 DOM 时该浏览器的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T15:06:27.830

对于 firefox，输入 url:about:config 搜索关键字：'toolips' 布尔值 = False 瞧！...不再有鼠标悬停的 url 弹出窗口

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T00:52:49.817

无法关闭此功能非常烦人。事实证明，Twitch 已经开始用链接覆盖整个视频，所以当你显示 Twitch Live 流时，屏幕底部会被这个弹出窗口覆盖。屏幕上没有地方可以将光标放在屏幕底部未被覆盖的地方。

我建议这是 twitch 滥用链接，但无论如何，让 twitch 这样做需要浏览器禁用此功能，以便我们可以看到血腥的视频。

好的。Twitch misbehavior 的正确答案是 browser.chrome.toolbar_tips false。

谢谢收听。

# python - 在 2 元组序列中测试与元组第一项匹配的最 Pythonic 方法是什么？

> ID：11922904
> 
> 赞同：4
> 
> 时间：2012-08-12T14:23:12.723
> 
> 标签：python

假设您有一个 2 元组序列：

```
seq_of_tups = (('a', 1), ('b', 2), ('c', 3)) 
```

并且您想测试是否`'a'`是序列中任何元组的第一项。

最Pythonic的方式是什么？

转换为字典并测试键，这似乎很容易理解？IE

```
'a' in dict(seq_of_tups) 
```

使用一个不是特别清楚的可爱拉链技巧，除非你知道这个技巧？IE

```
'a' in zip(*seq_of_tups)[0] 
```

还是对地图非常明确？IE

```
'a' in map(lambda tup: tup[0], seq_of_tups) 
```

还是有比这些选择更好的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T14:24:28.417

```
>>> seq_of_tups = (('a', 1), ('b', 2), ('c', 3))
>>> any(x == 'a' for x, y in seq_of_tups)
True 
```

对于任何大小的元组，您都可以使用它：

```
any(x[0] == 'a' for x in seq_of_tups) 
```

这里还有一些有趣的时间：

```
>python -m timeit -s "seq_of_tups = (('a', 1), ('b', 2), ('c', 3))" 
                 "any(x == 'a' for x, y in seq_of_tups)"
1000000 loops, best of 3: 0.564 usec per loop

>python -m timeit -s "seq_of_tups = (('a', 1), ('b', 2), ('c', 3))" 
                 "'a' in (x[0] for x in seq_of_tups)"
1000000 loops, best of 3: 0.526 usec per loop

>python -m timeit -s "seq_of_tups = (('a', 1), ('b', 2), ('c', 3)); 
                      from operator import itemgetter; from itertools import imap" 
                 "'a' in imap(itemgetter(0), seq_of_tups)"
1000000 loops, best of 3: 0.343 usec per loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T14:29:15.807

```
>>> tups = (('a', 1), ('b', 2), ('c', 3))

>>> 'a' in (x[0] for x in tups)
True
>>> 'd' in (x[0] for x in tups)
False 
```

上述解决方案一找到就会退出`a`，证明：

```
>>> tups = (('a', 1),('a',5), ('b', 2), ('c', 3))
>>> gen=(x[0] for x in tups)
>>> 'a' in gen
True
>>> list(gen)
['a', 'b', 'c']  #this result means generator stopped at first 'a' 
```

# c - 在以下程序中将产生多少个进程

> ID：11922909
> 
> 赞同：2
> 
> 时间：2012-08-12T14:23:49.090
> 
> 标签：c, unix

```
int main()
{
fork();
fork() && fork() || fork();
fork();

printf("forked\n");
return 0;
} 
```

当我们调用 fork 函数时，父进程得到一个**非零 pid**，而**子进程得到一个 0**作为回报基于这个逻辑，在第二个语句中，我们将不得不应用**短路**原理（afaik）......在第一个之后调用会有2个过程，

在第二行之后，有 8 个进程，[A parent 在 ( **fork() && fork()** ) 中被分叉了两次，第二个孩子也因为“ **fork()||fork()** ”而分叉了两次]

最后是16（根据我的推理）

请让我知道这是否正确或涉及其他逻辑

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T16:10:02.267

要计算 ( `fork() && fork() || fork()`) 之后的进程数，请记住：

*   In ( `&&`) 逻辑运算符：仅当左侧为**非零时才计算****右侧**

***   In ( `||`) 逻辑运算符：仅当左侧**为零时才计算****右侧**** 

 ****在运算符优先级的情况下，我们可以这样写：

`(fork() && fork()) || fork()`

还要记住，fork 将**NON ZERO**返回给*parent*并将**ZERO**返回给*child*

为了简化解释，我们重命名：

`fork() && fork()`操作**A**

和**最后的 fork()**操作 B，所以前面的行相当于：

( `fork() && fork()) || fork()`=> **A || B**

**第一行**( `fork`) ：

---> *2 个进程*（*父亲*和*孩子1*）

**第二行**：

*   **一个操作**：

第一个叉=>

父亲会给孩子 =>*父亲（Child2 的 PID）*和*Child2（零） Child1* 会给孩子 => Child1（ *Child3 的 PID）*和*Child3（零）*

我们有*4 个进程：父亲（Child2 的 PID）、Child2（零）、Child1（Child3 的 PID）和 Child3（零）*

( `&& fork()`) 将仅对返回 NON ZERO => *Father* and *Child1的最后一个操作执行*

父亲将给一个孩子 =>*父亲（Child4 的 PID）*和*Child4（零） Child1* 将给一个孩子 => Child1（ *Child5 的 PID）*和*Child5（零）*

我们总结一下：

我们有*6 个流程*：

*父亲（Child4 的 PID）、Child4（零）、Child1（Child5 的 PID）、Child5（零）、Child2（零）和 Child3（零）*

*   **B 操作**：

*仅对返回 ZERO =>从 A Operation 返回 ZERO*的最后一个命令执行，相关进程是：

*Child4（零）、Child5（零）、Child2（零）和 Child3（零）*

当分叉这 4 个进程时，我们以 4 个新进程结束 =>`Total number of process after second line = 10`

**第三行**：这只是一个简单的分叉

=>**进程总数 = 20**

为了证明这一点：使用 this ( `fork_quiz.c`)

```
#include <unistd.h>
#include <stdio.h>

int main(int argc, char **argv)
{
        fork();
        fork() && fork() || fork();
        fork();

        sleep(10);

        return 0;
} 
```

并编译它：

```
gcc -Wall fork_quiz.c -o fork_quiz 
```

并像这样运行它：

```
toc@UnixServer:~$ ./fork_quiz & (sleep 1; ps -o "%P%p%c")
[1] 15455
 PPID   PID COMMAND
15046 15047 bash
15047 15455 fork_quiz
15047 15456 bash
15455 15457 fork_quiz
15455 15458 fork_quiz
15455 15459 fork_quiz
15455 15460 fork_quiz
15457 15462 fork_quiz
15457 15463 fork_quiz
15457 15464 fork_quiz
15458 15465 fork_quiz
15458 15466 fork_quiz
15459 15467 fork_quiz
15459 15468 fork_quiz
15465 15469 fork_quiz
15467 15470 fork_quiz
15463 15471 fork_quiz
15463 15472 fork_quiz
15462 15473 fork_quiz
15462 15474 fork_quiz
15473 15475 fork_quiz
15471 15476 fork_quiz
15456 15477 ps 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:32:42.503

让我们稍微重写一下程序来计算产生的进程：

```
#include <stdio.h>

int my_fork(const char *c) {
    int r = fork();
    if (!r) {
        fprintf(stderr, "process spawned at %s\n", c);
    }
    return r;
}

int main()
{
my_fork("a");
my_fork("b") && my_fork("c") || my_fork("d");
my_fork("e");

return 0;
} 
```

启动后，您将看到 19 行代码`process spawned`，因此由于`fork()`调用而产生了 19 个进程：

```
~$ ./test
process spawned at a
process spawned at c
process spawned at c
process spawned at e
process spawned at e
process spawned at b
process spawned at d
process spawned at d
process spawned at e
process spawned at e
process spawned at e
process spawned at d
process spawned at e
process spawned at e
process spawned at b
process spawned at e
process spawned at d
process spawned at e
process spawned at e 
```

**UPD：考虑到**[C 中存在短路布尔评估，](http://en.wikipedia.org/wiki/Short-circuit_evaluation)可以轻松计算进程数。****

# php - 在调用控制器文件夹中包含文件的更好方法（根控制器有文件夹）

> ID：11922914
> 
> 赞同：-3
> 
> 时间：2012-08-12T14:24:32.600
> 
> 标签：php, model-view-controller, path, controller, include

在工作 PHP MVC 上，在 CONTROLLER 文件夹上我有一个文件控制器，但里面有必须在文件夹中调用控制器的文件夹。

下面有没有更好的方法和很好的代码实现？

我正在这样做，但我不确定这是调用控制器的最佳方式吗？

```
/*

STRUCTURE OF DIR FILES: controllers:
a/b/c/file.php
a/b/c <-- IS DIRECTORY
a/b/c <-- IS FILE

*/
$uri_result = false;
$controller_called = false;

/* called controllers */
$uri_segments[0] = 'a';
$uri_segments[1] = 'b';
$uri_segments[2] = 'c';
#$uri_segments[3] = 'file.php';
/* end called controllers */

$counted = count($uri_segments);

$filled = array();
$i = 0;
do {

    if ($i < $counted)
    {
        $z[] = $uri_segments[$i];
        $ez = implode('/', $z);
    }

    if (file_exists($ez))
    {
        $uri_result = $ez;
        $controller_called = $z[$i];    
    }
++$i;
} while ($i < $counted);

var_dump($uri_result,$controller_called);

/* RESULTS:

If called $uri_segments[0] to uri_segments[3]
string(14) "a/b/c/file.php" string(8) "file.php" 

If called $uri_segments[0] to uri_segments[2]
string(5) "a/b/c" string(1) "c" 

*/ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-12T15:56:19.607

基本方法似乎还可以，但是我需要整理一些东西，包括更好的变量名和范围，以及使用更合适的循环。

此外，据我所知，您希望找到URL 路径中*最长*的部分来充当控制器，因此可能希望从长开始变短，而不是从短开始变长。

```
/**
 * Find the most specific controller file to serve a particular URL path
 *
 * @param string $url_path Relative path passed through from URL handler
 * @return string $controller_file Relative path to controller file
 */
function find_controller_file($url_path)
{
    $url_parts = explode('/', $url_path);

    // Start with the full path, and remove sections until we find a controller file
    while ( count($url_parts) > 0 )
    {
        // Concatenate remaining parts of path; this will get shorter on each loop
        $test_path = implode('/', $url_parts) . '.php';

        if ( file_exists($test_path) )
        {
            // We've found a controller! Look no further!
            return $test_path;
        }
        else
        {
            // No controller there. Let's remove the last path part and try again
            array_pop($url_parts);
        }
    }

    // If we reach here, we never found a controller. This is probably an error.
    throw new Controller_Not_Found_Exception();
} 
```

**编辑**（接受后）根据 hakra 在下面的评论，要包含的文件大概总是具有扩展名“.php”，因此示例现在反映了这一点。

# iphone - iPhone UIButton 翻转和展开

> ID：11922915
> 
> 赞同：1
> 
> 时间：2012-08-12T14:24:36.143
> 
> 标签：iphone, objective-c, uibutton, uiviewanimation, uiviewanimationtransition

我正在尝试制作一个简单的按钮来更改大小并扩展，然后在随后的点击中缩小。

它有点工作，翻转后的最后一个按钮看起来是正确的 - 它是圆形的并且大小不同。问题是在过渡期间，我得到了这种奇怪的非圆形效果。请参阅此链接以了解此问题 -> [http://screencast.com/t/rJaSJ0nGq](http://screencast.com/t/rJaSJ0nGq)。

如何使过渡平滑并始终看起来是圆形的？我不想要截屏视频中出现的圆角矩形外观。

这是我的按钮单击方法：

```
// Handle when a user presses the button
- (IBAction)bubblePressed:(id)sender {

    // Expand the bubble if it's pressed or de-expand it if
    // already expanded
    if ( buttonResized ) {

        CGRect tempFrame=self.expandMe.frame;
        tempFrame.size.width=100;//change acco. how much you want to expand
        tempFrame.size.height=100;
        [UIView beginAnimations:@"" context:nil];
        [UIView setAnimationDuration:BUTTON_FLIP_TIME];
        self.expandMe.frame=tempFrame;

        // Round the buttons
        self.expandMe.clipsToBounds = YES;
        self.expandMe.layer.cornerRadius = self.expandMe.frame.size.width / 2;//half of the width
        self.expandMe.layer.borderColor=[UIColor clearColor].CGColor;
        self.expandMe.layer.borderWidth=2.0f;

        // Flip the button
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.expandMe cache:YES];

        [UIView commitAnimations];

    }
    else {

        CGRect tempFrame=self.expandMe.frame;
        tempFrame.size.width=200;//change acco. how much you want to expand
        tempFrame.size.height=200;
        [UIView beginAnimations:@"" context:nil];
        [UIView setAnimationDuration:BUTTON_FLIP_TIME];
        self.expandMe.frame=tempFrame;

        // Round the buttons
        self.expandMe.clipsToBounds = YES;
        self.expandMe.layer.cornerRadius = self.expandMe.frame.size.width / 2;//half of the width
        self.expandMe.layer.borderColor=[UIColor clearColor].CGColor;
        self.expandMe.layer.borderWidth=2.0f;

        // Flip the button
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.expandMe cache:YES];

        [UIView commitAnimations];

    }

    // Flip the variable that tracks flipping
    buttonResized = !buttonResized;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:08:31.117

最后我找到了这个-> [https://github.com/ole/OBShapedButton](https://github.com/ole/OBShapedButton)。这是一门很棒的课程，并且获得了麻省理工学院的许可。

# android - 对齐android listView行左或右

> ID：11922916
> 
> 赞同：2
> 
> 时间：2012-08-12T14:24:37.497
> 
> 标签：android, android-layout

我有一个聊天应用程序，我需要在 listView 中对齐左行或右行。我的问题是我无法将每一行左对齐或右对齐。它们保持左对齐。
我根据闲置代码膨胀每个布局

奇数行

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/userprofile_view"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:background="@drawable/odd" 
 android:layout_gravity="right">

 <TextView
  android:id="@+id/chat_message_odd"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:paddingLeft="10dp"  
  android:textColor="#66CD00"
   />
</FrameLayout> 
```

甚至

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/userprofile_view"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:background="@drawable/even" 
 android:layout_gravity="left">

 <TextView
  android:id="@+id/chat_message"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:paddingLeft="10dp"
  android:textColor="#000000"
   />
</FrameLayout> 
```

主要布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFFFF" >

    <ListView
    android:id="@+id/listMessages"
    android:layout_width="wrap_content"
    android:layout_height="0px"
    android:layout_weight="1"
    android:scrollbars="vertical"
    android:divider="@null"
    android:dividerHeight="0dp" />

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <EditText
        android:id="@+id/sendText"
        android:layout_width="253dp"
        android:layout_height="wrap_content"
        android:autoText="false"
        android:capitalize="none"
        android:ems="10"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:textSize="16sp"
        android:hint="Enter text"
        >       
    </EditText>
    <Button
        android:id="@+id/send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:text="Send" />

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:27:01.200

使 TextView 宽度 match_parent 并将其重力设置为正确。

所以让它：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/userprofile_view"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:background="@drawable/odd" 
 >

 <TextView
  android:id="@+id/chat_message_odd"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:gravity="right"
  android:textColor="#66CD00"
   />
</FrameLayout> 
```

或者，如果您想要一个整体位于其父级右侧的左对齐文本，我宁愿选择这样的 RelativeLayout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/userprofile_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/odd" >

    <TextView
        android:id="@+id/chat_message_odd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:paddingLeft="10dp"
        android:textColor="#66CD00" />

</RelativeLayout> 
```

*** 编辑所以模拟列表视图我只是在这里做了一个垂直的线性布局：

```
 <RelativeLayout
        android:id="@+id/userprofile_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/chat_message_odd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background"
            android:gravity="right"
            android:padding="10dp"
            android:text="foo bar"
            android:textColor="#66CD00" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/userprofile_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/chat_message_even"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@android:drawable/editbox_background"
            android:gravity="right"
            android:padding="10dp"
            android:text="foo fighters"
            android:textColor="#f400" />
    </RelativeLayout>

</LinearLayout> 
```

上面的代码创建了一个这样的视图：

![两行聊天](../Images/9d85cdc9432ebbc40a50be45026da147.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:31:37.497

好吧试试这个。

奇数行

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/userprofile_view"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:background="@drawable/odd"
  android:layout_gravity="right">

 <TextView
  android:id="@+id/chat_message_odd"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:paddingLeft="10dp"  
  android:textColor="#66CD00" />
</FrameLayout> 
```

甚至

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/userprofile_view"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:background="@drawable/even"
 android:layout_gravity="left">

 <TextView
  android:id="@+id/chat_message"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:paddingLeft="10dp"
  android:textColor="#000000"   />
</FrameLayout> 
```

它解决了你的问题吗？

# iphone - 如何响应 UISearchBar 和 SearchDisplayController iPhone 中的触摸

> ID：11922922
> 
> 赞同：0
> 
> 时间：2012-08-12T14:25:36.833
> 
> 标签：iphone, objective-c, action, uisearchbar, uisearchdisplaycontroller

我遵循了本教程：[http ://blog.patrickcrosby.com/2010/04/27/iphone-ipad-uisearchbar-uisearchdisplaycontroller-asynchronous-example.html](http://blog.patrickcrosby.com/2010/04/27/iphone-ipad-uisearchbar-uisearchdisplaycontroller-asynchronous-example.html)

为了得到我`UISearchBar`的 SearchDisplayController。它工作正常，但我不知道如何做到这一点，以便当您从下拉列表中按下建议时`UITableViewCells`，它就像一个动作并执行一个方法，我可以在其中执行以下操作：

```
NSString *Selected = [self SearchBar.selectedCell.text]; 
```

我是 iPhone 编程的新手，有时会发现它的怪癖有点令人困惑。

我有两个视图控制器，理想情况下，我希望将您从 searchDisplayController 中选择的结果返回到初始 ViewController，但是让它响应选择会很好。目前，当您选择它时，该单元格将变为蓝色。

到目前为止，这是我的项目：[https ://www.dropbox.com/s/m0zgookbwot05bo/Stocks%26Shares.zip](https://www.dropbox.com/s/m0zgookbwot05bo/Stocks%26Shares.zip)

单击“搜索公司”以查看当前状态的 UISearchBar 和 SearchDisplayController。

任何帮助都会很棒。如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:21:50.290

为了在表格单元格上执行操作，您需要在您的类中实现`UITableViewDelegate` [协议。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)然后用`didSelectRowAtIndexPath`做你的方法。如果您需要在视图控制器之间传递数据，则查找[委托模式](https://stackoverflow.com/a/626946/1487063)，或者，如果您的控制器“接近”到足以相互引用，那么您可以执行`[otherViewController someMethodThatDoesWhatYouWant]`.

# android - 我在 Google Play 上找不到我的应用程序名称，但我可以通过包名称找到它？

> ID：11922923
> 
> 赞同：0
> 
> 时间：2012-08-12T14:26:24.243
> 
> 标签：android

我开发了一个应用程序并将其上传到 Google Play。当我按名称搜索它时，它不会显示我的应用程序，但如果我按我的包名称搜索，如“com.percentage”，它会显示我的应用程序。谁能帮帮我吗。如何使我的应用程序可以按其名称而不是包名称进行搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:29:24.520

Google Play 可能需要几个小时来更新其搜索索引。

默认情况下，您的应用可以按标题搜索，并且从您的描述中提取关键词。所以最好的方法是充实你的描述，以拥有相当数量的关键词。但如果你做得过火，你可能会因为关键词垃圾邮件而被禁止。

至于现在不能搜索，就等着吧。我见过的最长延迟大约是 8 小时，尽管更新索引通常只需要几个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:28:48.313

从您上传列表开始，Google Play 通常需要三个小时才能更新他们的列表。您在描述页面上输入的产品名称就是要找到的应用程序的名称。在描述右侧“关键字：”+ 关键字来描述您的应用，以便更好地进行营销和查找。

# c++ - 有选择地编译框架 C++ 的方法？

> ID：11922928
> 
> 赞同：0
> 
> 时间：2012-08-12T14:27:06.680
> 
> 标签：c++, frameworks, compilation, dead-code

我想仅在使用元素时选择性地编译（非常臃肿和大）框架的一部分。

我对如何做到这一点有一些想法，但未能正确实施；

1.  使用与类或方法同名的定义宏来切换变量，该变量会导致框架的该部分被预处理器包含。我有一个实现这个的想法，但被卡住了。

2.  找到一种方法将我的所有函数定义为模板，以便编译器在需要它们之前不会生成它们。但是我不确定如何在多文件项目中完成这项工作。

有没有不使用第三方编译器或插件/工具的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:39:24.277

这是完全不可能的。即使您将每一段代码都定义为模板，它们仍然会被编译。此外，为什么你*的*代码库中还有你不使用的代码？只需删除它们并使用源代码管理来恢复它们。您正在尝试解决没有解决方案的非问题。

# php - 在 DIV 中定位表格单元格

> ID：11922929
> 
> 赞同：0
> 
> 时间：2012-08-12T14:27:15.847
> 
> 标签：php, javascript, html

我已经寻求帮助，但我似乎得到的只是如何在表格单元格中定位 DIV。我想在 DIV 中放置一个表格单元格。

在我的网站上，我有一个“时间线”，列出了事件、地点、飞机等。我用一张桌子来展示这个。该表非常宽（大约 14,000 像素），并显示在大约 900 像素宽的 DIV 中。这意味着查看器需要左右滚动以查看不同时间的事件——这就是我想要的。

该表是用 HTML 和一些基本的 PHP 混合编写的。

起初，每次查看者换页时，时间线视图都会“重置”，所以它总是显示最早的时间/最左边的单元格。我询问了一个修复程序，将表格最顶行的特定单元格的文本放在 DIV 的中心 - 也就是说，如果查看器切换到有关越南的页面，那么在时间轴中，顶部带有文本“越南”的行单元格将在 DIV 中居中。如果查看者切换到另一个页面，比如“1945 到 1950”，那么居中的单元格将是“1945 到 1950”。

有人帮助使用了一些 Javascript，使用了 focus()。这在某种程度上可行，但所需的文本现在位于 DIV 的右侧。

然后我想，最好将文本放在 DIV 的左侧，以便在视图中开始相应的时间段。使困惑？

这是我的页面之一：http: [//www.satans-kittens.net/korea.php](http://www.satans-kittens.net/korea.php)

如您所见，在时间线表/DIV 中，“韩国”一词位于 DIV 的右侧。我想把它放在左边。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:14:33.160

你可以使用这个功能。到 div 左侧的活动锚点。

看到它在这里工作

[http://jsfiddle.net/kL2js/](http://jsfiddle.net/kL2js/)

```
function adjustScrollBar(id){
        var pos = $("#"+id).position();
        while(pos.left >0){
            pos = $("#"+id).position();
            $("#TL").scrollLeft($("#TL").scrollLeft()+1);
        }
} 
```

编辑：可能这会帮助你。

```
/* jQuery required */

function adjustScrollBar(id,parentid){
    var pos = $("#"+id).position();
    while(pos.left >10){
        pos = $("#"+id).position();
        $("#"+parentid).scrollLeft($("#"+parentid).scrollLeft()+1);
    }
}
adjustScrollBar('tlKorea','TL'); 

/* jQuery not required */

function getOffset( el ) {
    var _x = 0;
    var _y = 0;
    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.parentNode;
    }
    return { top: _y, left: _x };
}

function adjustScrollBar2(id,parentid){
    while(getOffset( document.getElementById(id) ).left > 22 ){
     document.getElementById(parentid).scrollLeft += 1;
    }
}

adjustScrollBar2('tlKorea','TL'); // jQuery not required 
```

只需在您使用当前活动锚点的 id 调用焦点代码的地方调用这些函数之一。

我使用了来自 SO 问题的 getOffset -http://stackoverflow.com/questions/442404/dynamically-retrieve-html-element-xy-position-with-javascript

更新了 jsfiddle - [http://jsfiddle.net/kL2js/1/](http://jsfiddle.net/kL2js/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:37:01.423

首先我应该说我不完全确定我理解你的问题。但是，您似乎希望将指向韩国的链接显示在表格的左侧。这就是我打算回答的问题。

将包含韩国链接的标签放在文档树的前一个单元格中。

例如：

```
<tr id="period">
  <td colspan="7"><a id="tlWWII" href="http&#58;//www.satans-kittens.net/wwii.php#tlWWII">World War II</a></td>
  <td colspan="25"><a id="tl45250" href="http&#58;//www.satans-kittens.net/45to50.php#tl45250">1945 to 1950</a></td>
  <td colspan="64"><a id="tlKorea" href="http&#58;//www.satans-kittens.net/korea.php#tlKorea">Korea</a></td>
  <td colspan="24"><a id="tl53263" href="http&#58;//www.satans-kittens.net/53to63.php#tl53263">1953 to 1963</a></td>
  <td colspan="132"><a id="tlVietnam" href="http&#58;//www.satans-kittens.net/vietnam.php#tlVietnam">Vietnam</a></td>
  <td colspan="120"><a id="tlDisestab" href="http&#58;//www.satans-kittens.net/disestab.php#tlDisestab">The Last Crusade &amp; Phinal Phantoms</a></td>
  <td colspan="50"></td>
  <td colspan="10"></td>
</tr> 
```

其中我只是将您的每个链接移至上一个单元格。毫无疑问，你必须调整你的 colspan，但是......

另一种选择是尝试向右或向左浮动...

# php - 检查会话是否存在于另一个网站上

> ID：11922931
> 
> 赞同：1
> 
> 时间：2012-08-12T14:27:19.703
> 
> 标签：php, ajax, cross-domain

我有一个 PHP 项目，它的多个子域（a.domainone.com、b.domainone.com、c.domainone.com）托管在另一台服务器上，另一个主域 domaintwo.com 托管在另一台服务器上。

目的：用户必须登录 domaintwo.com 域才能访问第一个域的子域。

用户移动：用户访问 a.domainone.com > 用户被要求点击进入 > 现在进入有一个 ajax 功能来检查用户是否登录到 domaintwo.com（响应为需要登录或登录）> 如果不是domaintwo 的弹出窗口打开，成功登录时它关闭回显：loggin succesfull 继续并立即回车

问题：登录后，当用户按回车键 > 相同的弹出窗口打开 > 回显登录已经完成（已进行验证以检查会话是否已经存在）> 因此，当检查回显会话变量时，在 a.subdomain.com 上发现其空白，但直接转到在 domaintwo.com 登录处理程序的 php 页面上，它正确地回显了会话变量的值。

所以我检查了一下，ajax 响应总是'needlogin' ....!!!

只是一个想法会很感激。

感谢和问候

## 编辑

我已经完成了 < ? php header('Access-Control-Allow-Origin: *'); ? > 在 domaintwo.com 中，否则我什至不会在 ajax 调用中收到 if session as 'needLogin' 的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:35:32.267

您需要浏览器上会话 cookie 中的 session_id。幸运的是（不幸的是）客户端浏览器不允许访问来自不同域的 cookie。由于无法获取会话cookie，因此无法获取会话ID，因此无法跨域抓取会话。

如果两个站点都在同一台服务器上，并且您可以直接访问会话存储，并且您没有重新生成会话 ID，您可能会做一些阴暗的事情，例如在一个站点上读取 session_id 并将其传递给下一个站点站点，然后根据id手动打开会话文件并读取它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:35:19.070

如果您只需要了解正在发生的事情：您正在访问来自另一个域的数据，那么 Web 浏览器的跨域策略就会启动。

您可以在维基百科上开始您的研究：

*   [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)
*   [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

# php - PHP PDO 写入配置文件

> ID：11922934
> 
> 赞同：0
> 
> 时间：2012-08-12T14:28:06.823
> 
> 标签：php, pdo, fwrite

用户界面允许轻松设置 CMS。用户第一次以 Web 表单激活站点时，输入其数据库的主机、数据库、用户名和密码。

然后我想在配置文件中写入该信息，用用户值替换当前包含“temp”的 PHP 变量。

```
<?php
$host = 'temp';
$database = 'temp';
$username = 'temp';
$password = 'temp';

try { 
    $fdbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
    $fdbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
    }
catch(PDOException $fe) { 
    include('basic/create.php');
    }

?> 
```

所以我想把`$_POST`这里的值放在各自的位置，然后将它们物理地写入文档。可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:09:07.840

我想一种标准方法是使用带有占位符的模板文件：

```
<?php
$host = '#HOST#';
$database = '#DB#';
$username = '#USER#';
$password = '#PASS#'; 
```

然后使用 加载该模板`file_get_contents()`，使用 插入实际值`str_replace()`，然后使用 将结果写入最终文件`file_put_contents()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:38:29.033

您必须将数据库配置值放在另一个文件中并包含它们。'basic/create.php' 输出表单以输入配置值并在表单上提交使用用户输入的值重写数据库配置文件

# colorbox - android上的colorbox不适用于“弹性”过渡

> ID：11922940
> 
> 赞同：1
> 
> 时间：2012-08-12T14:29:03.883
> 
> 标签：colorbox

在颜色框示例页面上： [www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)

第一个示例使用图像之间的“弹性”过渡。

这不适用于带有股票浏览器的我的 android 手机（Android 版本 4.0.4）

弹出“框”但不显示图像。

第二个示例（使用 'fade' 过渡）在我的 Android 手机上运行良好。

这在其他版本的 Android 上是否存在问题？

有谁知道代码的修复，以便“弹性”过渡将在 Android 上工作？

# objective-c - 如何更改 MPVolumeView 中滑块的 tintcolor？

> ID：11922943
> 
> 赞同：2
> 
> 时间：2012-08-12T14:29:20.560
> 
> 标签：objective-c, cocoa, mpvolumeview

如何更改 MPVolumeView 中滑块的 tintcolor？我想显示不同的颜色而不是蓝色。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-13T09:22:48.443

分配后

```
volumeView = [[MPVolumeView alloc] initWithFrame:CGRectMake(40, 145, 270, 23)]; 
```

只需搜索 MPVolumeView 子视图并获取滑块

```
for (id current in volumeView.subviews) {
        if ([current isKindOfClass:[UISlider class]]) {
            UISlider *volumeSlider = (UISlider *)current;   
            volumeSlider.minimumTrackTintColor = [UIColor redColor];
            volumeSlider.maximumTrackTintColor = [UIColor lightGrayColor];
} 
```

把你喜欢的颜色放在 UIColor 中就完成了。如果您需要进一步自定义，请将 volumeSlider 视为标准 UISlider。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T17:34:54.547

您需要自定义`UISlider`. 你可以这样做：

```
[slider setMinimumTrackImage:[[UIImage imageNamed:@"redSlider.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal]; 
```

**结果：**

![截屏](../Images/6978dbc792f974629932325c0f715128.png)

以下是滑块的一些背景和它们的外观示例图像：

**滑块背景：**

![红色滑块 bg](../Images/db400e6ecc4830a48397ddc0a16d7aa8.png)

![蓝色滑块 bg](../Images/f57ff5c2fc1b3bd7c77a83ccdfbe1cc6.png)

![绿色滑块 bg](../Images/f6ff92726b1af4eee203168fa2ed31c5.png)

**例子：**

![例子](../Images/ee2b939964e0cdfb7e8d6a31ea613cfa.png)

更多信息[在这里](http://thinkitdifferently.wordpress.com/2010/01/26/customize-uislider-color/)。

# equation - 具有多个变量的有理方程的根？

> ID：11922956
> 
> 赞同：0
> 
> 时间：2012-08-12T14:31:09.027
> 
> 标签：equation, algebra, polynomial-math

假设我们在 k 个变量中有一个有理多项式。我们只对合理的解决方案感兴趣。如果 k = 1，将变量命名为 {x}，如果 k = 2，将它们命名为 {x,y}。

对于 k = 1，它可以非常快地完成。有理根定理给出了一组候选者，请参阅[http://en.wikipedia.org/wiki/Rational_root_theorem](http://en.wikipedia.org/wiki/Rational_root_theorem)。但是 k=2 怎么办？在这种情况下，如何将多项式拆分为因子？

示例：x^2-y^2 应拆分为 (xy)(x+y)。[也可以在https://math.stackexchange.com/questions/181699/roots-of-rational-equation-with-multiple-variables](https://math.stackexchange.com/questions/181699/roots-of-rational-equation-with-multiple-variables)上找到帖子。

# ruby-on-rails - 服务器初始化错误...每次都必须使用“ps aux | grep rails”

> ID：11922959
> 
> 赞同：0
> 
> 时间：2012-08-12T14:31:48.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3

每当我使用

```
rails s 
```

我收到这条消息：

```
=> Rails 3.1.0 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-08-12 19:57:32] INFO  WEBrick 1.3.1
[2012-08-12 19:57:32] INFO  ruby 1.9.3 (2012-04-20) [i686-linux]
[2012-08-12 19:57:32] WARN  TCPServer Error: Address already in use - bind(2)
Exiting
/home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:85:in        `initialize': Address already in use - bind(2) (Errno::EADDRINUSE)
from /home/abhishek/.rvm/rubies/ruby-1.9.3-    p194/lib/ruby/1.9.1/webrick/utils.rb:85:in `new'
from /home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:85:in `block in create_listeners'
from /home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:82:in `each'
from /home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:82:in `create_listeners'
from /home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:82:in `listen'
from /home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:70:in `initialize'
from /home/abhishek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:45:in `initialize'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/rack-    1.3.6/lib/rack/handler/webrick.rb:10:in `new'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.3.6/lib/rack/handler/webrick.rb:10:in `run'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.3.6/lib/rack/server.rb:265:in `start'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.0/lib/rails/commands/server.rb:70:in `start'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.0/lib/rails/commands.rb:54:in `block in <top (required)>'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.0/lib/rails/commands.rb:49:in `tap'
from /home/abhishek/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.0/lib/rails/commands.rb:49:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

然后我必须使用

```
ps aux | grep rails 
```

和

```
kill -9 <pid> 

rails s 
```

我的问题是：

有没有办法让我不必这样做，我可以使用轻松运行服务器

```
rails s 
```

每次..

即使..命令

```
rails s -p 4000 
```

作品..

我只是好奇是否有什么方法可以让我每次都使用同一个端口……这样我就不必每次启动服务器时都从不同的端口开始，因为这让我不得不重新输入特定的控制器和动作名称一次又一次...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:36:44.643

当您运行“rails s”时，默认情况下它将始终在端口 3000 上启动服务器。因此，如果您已经有一个服务器在运行，它可能在端口 3000 上运行。您可以通过指定一个启动第二个（第三个、第四个等）服务器通过传递'-p'选项来不同的端口。

```
rails s -p 4000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T21:43:58.327

每当您关闭终端时，我建议您先使用关闭服务器，`ctrl+c`然后再关闭终端

这将释放服务器正在使用的端口。

现在当你再次启动服务器时，你可以使用相同的端口，你不需要使用新的。

如果**有时**它没有正确释放，请杀死服务器并使用它。

杀死服务器使用`killall -9 rails`

这样你应该可以使用`rails s`每次启动服务器。

@Andrei 的回答是有用且正确的，但我认为当您需要一次启动多个服务器时应该使用它，您想要运行服务器以在另一个端口上显式运行。

# google-chrome - 如何查看已安装的 Chrome 扩展程序的存储空间？

> ID：11922964
> 
> 赞同：87
> 
> 时间：2012-08-12T14:32:33.763
> 
> 标签：google-chrome, google-chrome-extension, local-storage, google-chrome-devtools

似乎应该可以查看我的浏览器上安装的 Chrome 扩展程序的`localStorage`/ 。`chrome.storage`我已经玩过开发者工具了一点，但还没有找到一种方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-12-11T23:01:17.573

有一个非常有用的扩展可以与两者一起使用`localStorage`，`chrome.storage`而且我最近发现了它，它可以用作开发工具面板。

[存储区浏览器](https://chrome.google.com/webstore/detail/storage-area-explorer/ocfjjjjhkpapocigimmppepjgfdecjkb)

[![在此处输入图像描述](../Images/1bd67e9ed76f19a891302e0c21c8be26.png)](https://i.stack.imgur.com/imDGb.png)

我没有写这个，但是作者在其他一些 SO 问题上建议的。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-12-11T21:07:04.127

我将继续将几个答案中存在的现有知识合并为一个简单而全面的答案。**如果你投票赞成这个，请对来自@mwkwok 和@chaohuang 的投票做同样的事情。**

确实，使用保存的内容`chrome.storage`不会显示在开发人员工具中，您只能看到使用常规 localStorage API 保存的内容。做这个：

1.  通过转到（需要检查“开发者模式”以查看背景页面）打开扩展程序的**背景页面**`chrome://extensions/`

2.  转到`Console`选项卡并键入：

`chrome.storage.local.get(function(result){console.log(result)})`

这会将整个存储作为 JSON 对象吐到控制台中。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-04-02T21:13:26.887

没错，chrome.storage 没有出现在开发人员工具中。我发现查看所有内容的唯一方法是将其放入控制台：

```
chrome.storage.local.get(function(result){console.log(result)}) 
```

这会将 JSON 对象吐到控制台中。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-06-05T01:27:18.870

这其实是两个问题！

1.  如何查看已安装的 Chrome 扩展程序的**localStorage ？**

在 Chrome://extensions/ 中点击扩展的后台页面打开 Chrome Devtool（需要勾选开发者模式才能看到后台页面），然后在资源面板中可以看到左侧的本地存储。(by chaohuang and Kil)

2.  如何查看已安装的 Chrome 扩展程序的**chrome.storage ？**

在后台页面的同一个控制台中：

**首先打开背景页面**：

一个。去 chrome://extensions/

湾。确保您处于开发模式

C。然后在您的扩展程序上，单击“检查视图背景页面”或转到“详细信息”并单击背景页面。

**现在您在后台页面上，您可以继续**：

*   对于 storage.local (by mwkwok)

`chrome.storage.local.get(function(result){console.log(result)})`

*   对于 storage.sync

`chrome.storage.sync.get(function(result){console.log(result)})`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-08-12T15:23:32.770

在 Chrome Devtool 中点击扩展的背景页面`Chrome://extensions/`（`Developer mode`需要勾选才能看到背景页面），然后在资源面板中可以看到左侧的本地存储。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-23T09:56:20.807

使用输入控制台的提供的代码，我没有得到任何结果。但是这段代码在放入控制台时有效。

`chrome.storage.sync.get(null, function (data) { console.info(data) });`

这里的不同之处在于我们传递了一个空值，它将返回存储中的所有内容。要支持这一点并进行更多阅读，请查看[此 API 上的官方 chrome 页面。](https://developer.chrome.com/extensions/storage#property-sync)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-05T18:03:21.830

在 2022 年，我发现最好的方法仍然是使用 console.log，但你可以通过 currying 让它看起来更干净。打开扩展页面，打开后台工作人员的检查器，转到控制台，然后...

`chrome.storage.local.get(console.log)`

# python - Python os.path.join 对于网络路径不能正常工作

> ID：11922966
> 
> 赞同：3
> 
> 时间：2012-08-12T14:32:39.817
> 
> 标签：python

任何想法为什么这不会在 Python 2.6 Win 中正确加入？

```
import os

myPath = "\\\\192.168.1.50\\Shared"
myPath2 = "\\Folder2"
myFile = "1.txt"

print os.path.join(myPath, myPath2, myFile) 
```

**结果：**

```
\Folder2\1.txt 
```

**我期待结果是 "\\192.168.1.50\Shared\Folder2\1.txt" ！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:52:15.250

加入是一个方便的功能，它不是太智能。例如，它不验证路径的存在等。它只是遵循一些正式的规则。

`myPath2`根据您的问题，请删除定义中的多余斜线。

```
import os

myPath = "\\\\192.168.1.50\\Shared"
myPath2 = "Folder2"
myFile = "1.txt"

print os.path.join(myPath, myPath2, myFile) 
```

给`\\192.168.1.50\Shared\Folder2\1.txt`

普通路径也会有同样的问题：

```
import os

myPath = "C:\\Shared"
myPath2 = "\\Folder2"
myFile = "1.txt"

print os.path.join(myPath, myPath2, myFile) 
```

给`\Folder2\1.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:53:25.847

如果任何组件是绝对路径，则所有先前的组件（在 Windows 上，包括先前的驱动器号，如果有的话）都将被丢弃，并继续加入。

我需要从 myPath2 的开头删除斜杠，否则它将被树化为绝对路径，而 myPath 将被忽略！

```
import os

myPath = "\\\\192.168.1.50\\Shared"
myPath2 = "Folder2"
myFile = "1.txt"

print os.path.join(myPath, myPath2, myFile) 
```

**结果：**

```
\\192.168.1.50\Shared\Folder2\1.txt 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T14:47:01.487

也许它不支持这个，你可以正常使用它：

```
print myPath + myPath2 + myFile 
```

# entity-framework-4 - 实体框架，代码优先 3 类相同的属性

> ID：11922969
> 
> 赞同：0
> 
> 时间：2012-08-12T14:32:46.103
> 
> 标签：entity-framework-4

**让我们假设我有 3 种类型的 Html 类，它们具有相同的原语/导航属性：**

1.  公共虚拟字符串 HtmlTagName {get; 放;}
2.  公共虚拟ICollection<属性>属性{get; 放;}

    等等等等等等。

这 3 个类之间的唯一区别是：

1.  一个 Html 类可以有一组 Html 类（父 Html 类）
2.  一个类可以是一个 Html 类的子类（子 Html 类）
3.  一个类是独立的，即。它既不是另一个 html 类（单 Html 类）的父 html 类也不是子 html 类

在我看来，有 3 类相同的属性，除了它是父母，孩子还是单身，因为没有（再次，因为很多属性是相同的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:05:36.120

我想我找到了答案，如果我错了，有人纠正我：

```
public class HtmlElement : DelEntity
{
    // Primitives
    public virtual string DisplayName { get; set; }

    // Foreign Key
    public virtual long? ParentElementId { get; set; } // If it is a child

    //Navigation - Class
    [ForeignKey("ParentElementId")]
    public virtual HtmlElement ParentHtmlElement { get; set; }        

    //Navigation - Collections (if it is a parent)
    private ICollection<HtmlElement> _childElements;

    [InverseProperty("ParentHtmlElement")]
    public virtual ICollection<HtmlElement> ChildElements
    {
        get { return _childElements ?? (_childElements = new HashSet<HtmlElement>()); }
        set { _childElements = value; }
    } 
```

}

# http - 数据包如何通过代理服务器到达目的地？

> ID：11922979
> 
> 赞同：6
> 
> 时间：2012-08-12T14:34:26.583
> 
> 标签：http, networking, tcp, proxy, ip

我对来自我的机器的数据包如何通过代理服务器到达目的地感到困惑。我的机器有一个用于 Intranet 的私有 ip，我们有一个带有公共 ip 的代理服务器来与世界对话。

所以我们这里有三个地址。

```
1) my private ip address
2) proxy server address
3) destination address (google.com) 
```

现在在我发送的 tcp 数据包中，我有源端口和目标端口来区分我的机器和目标上的各种程序（如 mozilla 、 chrome 、 ie ）。

在 ip 网络层我有源地址和目标地址。

我不知道http是否也有地址。

所以当我的数据包离开我的机器时，它会包含什么地址。以便它通过中间的网关到达我的代理服务器。?

一旦它到达代理服务器，就可以使用 NAT 将其发送到目的地。但我对它如何到达代理服务器感到困惑。

编辑：我的数据包是否应该包含我的代理服务器（本地私有）的地址才能到达它？我可以通过配置浏览器来更改代理服务器。我的数据包离开我的机器后如何知道它会去哪个代理服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T00:05:29.593

*数据包*根本没有到达目标。它内部的*数据*作为代理和服务器之间新连接的一部分以全新数据包的形式到达目标，其大小和数量可能与下游连接中的不同。从服务器 TCP 的角度来看，它连接到代理，而不是下游客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:46:20.270

HTTP 位于 TCP/IP 之上（以及 FTP、SMTP 等）

您在 PC 上配置代理服务器，因此所有请求都通过代理发送（除非它们被识别为本地地址）。

当您从“www.google.com:80”请求页面时

*   您的计算机在 DNS 服务器中查找主机名的 IP 地址
*   您的计算机发现它不是本地 IP（它与默认网关位于不同的子网上）
*   然后它说“嘿，网关/代理，从 google 获取页面”（传递 google 的 IP 地址和端口。HTTP 层将包含诸如“method=GET”之类的标头、带有路径和参数的完整 URL 等）

# bash - Minecraft 服务器的世界边界修剪脚本

> ID：11922982
> 
> 赞同：2
> 
> 时间：2012-08-12T09:31:01.670
> 
> 标签：bash

我正在尝试创建一个脚本，每天早上 5 点修剪我的世界服务器的世界。到目前为止，它运行命令 /wb $NAME trim，其中 $NAME 是世界的名称，然后运行命令 /wb trim confirm，以初始化修剪过程。

```
#!/bin/bash
# /usr/local/bin/trim
# Title: World Border Trim Automator
# Author: Jonathan Bondhus

######### CONFIG STARTS HERE #########

# Location of the init script
INIT_SCRIPT="/etc/init.d/minecraft"

# Name to use for the screen instance
SCREEN="minecraft"

# User that should run the server
USERNAME="minecraft"

# Path to minecraft server directory 
MCPATH="/home/${USERNAME}/minecraft"

# Where the worlds are located on the disk
WORLDSTORAGE="${MCPATH}/worlds"

######### CONFIG ENDS HERE #########

## Start of script, don't edit anything below this line unless you know what you are doing

as_user() {
    if [ $ME == $USERNAME ] ; then
        bash -c "$1"
    else
        su $USERNAME -s /bin/bash -c "$1"
    fi
}

my_trim() {
    a=1
    for NAME in $(ls $WORLDSTORAGE)
    do
        if [ -d $WORLDSTORAGE/$NAME ]
        then
            WORLDNAME[$a]=$NAME
            a=$a+1
            # Run the /wb trim command
            echo "Running /wb $NAME trim..."
            as_user "screen -p 0 -S $SCREEN -X eval 'stuff \"wb $NAME trim\"\015'"
            sleep 2     # Wait 2 seconds
            echo "Running /wb trim confirm..."
            as_user "screen -p 0 -S $SCREEN -X eval 'stuff \"wb trim confirm\"\015'"
            echo "Waiting 10 minutes for trim to complete"
            sleep 600   # Wait 10 minutes (600 seconds)
        fi
    done
}

my_is_running(){
    # Checks for the minecraft servers screen session
    # returns true if it exists.
    if ps ax | grep -v grep | grep "$SCREEN $INVOCATION" > /dev/null
    then
        return 0
    fi
    return 1
}

my_main(){
    ME=`whoami`     # Sets $ME to equal the current user's username
    my_is_running
    if my_is_running
        then
            my_trim
        else
            echo "Server is not running... Starting..."
            my_as_user "$INIT_SCRIPT start"
            wait 100
    fi
}

my_as_user() {
    if [ $me == $username ] ; then
        bash -c "$1"
    else
        su $USERNAME -s /bin/bash -c "$1"
    fi
}

my_main
exit 0 
```

有一个问题。如果它在修剪过程仍在进行时再次尝试运行它，那么服务器将忽略该请求，并且脚本将继续运行，就好像没有出现任何问题一样。我想要它做的是检查日志，直到它发现修剪完成。整个修剪的日志文件将如下所示：

```
2012-08-12 03:58:08 [INFO] World trimming task is ready for world "world", trimming the map past 208 blocks beyond the border (default 208), and the task will try to process up to 5000 chunks per second (default 5000).
2012-08-12 03:58:08 [INFO] This process can take a while depending on the world's overall size. Also, depending on the chunk processing rate, players may experience lag for the duration.
2012-08-12 03:58:08 [INFO] You should now use wb trim confirm to start the process.
2012-08-12 03:58:08 [INFO] You can cancel at any time with wb trim cancel, or pause/unpause with wb trim pause.
2012-08-12 03:58:10 [INFO] WorldBorder map trimming task started.
2012-08-12 03:58:35 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 216 individual chunk(s) trimmed so far (11.8% done)
2012-08-12 04:00:04 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 1016 individual chunk(s) trimmed so far (25.5% done)
2012-08-12 04:01:55 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 1975 individual chunk(s) trimmed so far (36.6% done)
2012-08-12 04:03:18 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 2718 individual chunk(s) trimmed so far (45.2% done)
2012-08-12 04:03:58 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 3084 individual chunk(s) trimmed so far (52.7% done)
2012-08-12 04:04:12 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 3203 individual chunk(s) trimmed so far (61.1% done)
2012-08-12 04:05:07 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 3690 individual chunk(s) trimmed so far (73.5% done)
2012-08-12 04:05:53 [INFO] [WorldBorder] [Trim] 0 entire region(s) and 4080 individual chunk(s) trimmed so far (100.0% done)
2012-08-12 04:05:53 [INFO] [WorldBorder] [Trim] task successfully completed! 
```

当然，日志不仅包含世界边界信息，它还包含人们的聊天记录，以及记录所有其他发生的事情。因此，我不能只跟踪日志的最后 10 行并检查，因为一旦 10 行过去了（例如，在检查最后 10 行之前脚本等待的时间间隔内打印超过 10 行的错误） ，它永远无法找到任何能让它意识到它已经完成的东西，所以它会永远等待，用尽宝贵的资源并阻止世界被修剪，直到我注意到有问题为止，这可能由于它是自动化的，因此需要几天甚至几周的时间。

它不仅要在完成时停止，仅针对那个世界，而且还必须记录开始修剪世界时的小时和分钟，然后再检查，因为如果我更早修剪同一个世界，它会否则会导致问题，因为该世界的日志中已经存在“任务成功完成”，这将导致脚本几乎立即停止。有没有人看到这个解决方案？这让我想想就头疼...：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:32:42.117

您会发现在脚本/函数运行时使用“.lock”文件有什么好处，并在任何类型的完成（错误或其他）时将其删除？

锁定文件是一个 0 字节（空）文件，具有唯一名称（通常与文件名同名，末尾附加“.lock”）。运行脚本时，检查该文件是否存在。如果它不存在，请创建它（即`touch $MCPATH.lock`）然后运行您的修剪命令。

虽然该锁定文件*确实*存在，但只需`wait()`几秒钟（或更长，如您所愿），然后再次轮询。

修剪功能完成后（即使完成时出现错误），删除该`.lock`文件。然后像往常一样简单地处理错误（或成功）。

# ajax - Ajax 调用不显示响应 - Zend 框架

> ID：11922984
> 
> 赞同：0
> 
> 时间：2012-08-12T14:35:20.763
> 
> 标签：ajax, zend-framework

我对 Zend Ajax 有一些问题。那是我的js代码：

```
function deleteNewsCategory(cId) {
var conf = confirm("Are you sure you want to delete the item?");

if(conf) {
    $.ajax({
        dataType: 'json',
        url: '/ajax/deletenewscategory',
        type: 'POST',
        data: {
            cId : cId
        },

        success: function (response) {
            alert(response);
        }
    });
} 
```

}

那是我的 AjaxController：

```
public function init() {
    $this->_helper->ajaxContext->addActionContext('deletenewscategory', 'json')
            ->initContext();
}

public function deletenewscategoryAction() {
    if ($this->getRequest()->isPost()) {
        echo $this->_request->getPost('cId');
    }
} 
```

我在提交按钮中添加了 deleteNewsCategory 功能，但是当我单击此按钮并出现确认消息并单击确定时，我什么也没看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:48:45.950

要么存在阻止提交发生的 Javascript 错误，要么响应不包含 JSON 数据，因此您的处理程序没有被调用。

`ajax.phtml`由于您使用的是 Ajax 上下文，您是否有带有后缀的视图脚本？

查看是否`exit;`在您的 echo 语句之后添加`deletenewscategoryAction`结果中的警报显示。

接下来是使用 Firebug 或 Firefox 的 livehttpheaders 或 Wireshark 来嗅探 HTTP 请求和响应以查看您返回的数据。

编辑：由于您收到 404 错误，请尝试：

```
url: '<?php echo $this->url(array('controller' => 'ajax',
                                  'action'     => 'deletenewscategory'),
                            null, true) ?>', 
```

通过使用`url()`帮助程序，它将根据您的路由和基本路径构造一个 URL。

您的警报未显示的原因是因为 404 包含 HTML 而不是有效的 JSON，jQuery 没有调用您的成功处理程序。

# date - Grails：在 new Date() 中迭代这一天

> ID：11922985
> 
> 赞同：0
> 
> 时间：2012-08-12T14:35:20.597
> 
> 标签：date, grails, groovy

有人知道如何迭代日期吗？IE。就像是

```
 new Date()+1 
```

或者

```
 new Date().format('yyyy-MM-dd')++; 
```

或类似的东西？请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T17:49:14.840

Groovy 有一些优雅的方式来处理日期和时间值，例如您可以使用[TimeCategory](http://groovy.codehaus.org/api/groovy/time/TimeCategory.html)。

```
import groovy.time.TimeCategory

use (TimeCategory) {
    new Date() + 1.day
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T16:49:41.233

例如：

```
def date = new Date() 
```

您可以使用

```
date + 1
date.plus(1)
date.next() 
```

参考： http: [//groovy.codehaus.org/groovy-jdk/java/util/Date.html](http://groovy.codehaus.org/groovy-jdk/java/util/Date.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T07:58:50.213

您还可以像这样从日期构造范围：

```
Date now = new Date().clearTime()
Date twoDaysTime = now + 2

(now..twoDaysTime).each {
  println it
} 
```

这将打印：

```
Mon Aug 13 00:00:00 BST 2012
Tue Aug 14 00:00:00 BST 2012
Wed Aug 15 00:00:00 BST 2012 
```

# php - javascript中的聪明人

> ID：11922988
> 
> 赞同：0
> 
> 时间：2012-08-12T14:35:32.690
> 
> 标签：php, jquery, smarty

我将 smarty 代码放在 js/jquery 函数中，但不起作用，我看到空白页！如何解决这个问题？

```
{literal}
<script type="text/javascript">
  jQuery(document).ready(function($){
      $("#IsGroupGallery").click(function() {
      {literal} {if $photos} $.lightbox(["{"\", \""|implode:$photos}"]); {/if}{/literal}
      return false;
    });

  });
</script>
{/literal} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:42:31.027

你的内部文字标签是向后的，你试图在 {literal} 标签*内*嵌套额外的文字（这显然不起作用，因为 {literal} 告诉 Smarty 保持内容不变。）它应该看起来像这样：

```
{literal}
<script type="text/javascript">
  jQuery(document).ready(function($){
      $("#lbgallery").click(function() {
      {/literal} {if $photos} $.lightbox(["{"\", \""|implode:$photos}"]); {/if}{literal}
      return false;
    });
  });
</script>
{/literal} 
```

请注意，外部文字标签内的两个文字标签已被颠倒。您需要先结束文字，然后重新启动它，否则内部 {literal} 标记的内容也将被视为文字，而不是评估 - 这对您尝试的内容没有意义做 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:42:27.100

提示：Smarty3 解析`{ if`为文字字符串（“自动文字”）。因此，只要`{`被空格包围，Smarty3 就会忽略它。

如果这 - 无论出于何种原因 - 没有帮助，或者你被 Smarty 2 卡住了，请注意`{literal}`标签不会嵌套。

```
{literal}
<script type="text/javascript">
  jQuery(document).ready(function($){
      $("#lbgallery").click(function() {
{/literal}
      {if $photos} $.lightbox(["{"\", \""|implode:$photos}"]); {/if}
{literal}
      return false;
    });
  });
</script>
{/literal} 
```

# javascript - 如何通过模态“弹出”窗口将值插入文本字段？

> ID：11922989
> 
> 赞同：0
> 
> 时间：2012-08-12T14:35:43.107
> 
> 标签：javascript, jquery, html

我不知道这是否可能，而且我不确定如何准确地表达标题。

我有一个简单的 HTML 文本字段。在文本字段的右侧，我有一个“搜索项目”按钮。当我单击按钮时，我希望通过 jquery 弹出一个模式窗口。在那个模态窗口中，我有很多图像。每个图像都有一个特定的值，例如 img1、img2、img3 等。

我想要做的是当单击图像时，模式窗口应该关闭，并且图像的值应该插入到 HTML 文本字段中。

这甚至可能吗？如果是，这究竟是如何做到的？任何人都可以向我推荐一些网站或给我潜在的搜索关键字，甚至更好，一个简单的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:55:43.383

这不仅有可能，而且相当简单，这里有一个如何做类似事情的[**例子？**](http://jsfiddle.net/E23NM/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:56:25.030

初始对话框设置。

```
$('#element').dialog({
  'autoOpen' : false,
  'modal' : true
}); 
```

当您单击搜索图标时，打开模式窗口。

```
$('#searchIcon').click(function(){
  $('#element').dialog('open');
}); 
```

我假设图像位于我们刚刚设置为 MODAL 元素的容器中。

```
$(document).on('click', '#element img', function(){
  //how does each image have a value? value is not a property of <img>
  $('input').html($(this).prop('rel'));
  //assumed in the above the value is stored in the rel property
  $('#element').dialog('close');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:56:38.040

是的，很有可能。这是一个使用[jQuery UI 对话框小部件的](http://jqueryui.com/demos/dialog)[演示](http://codepen.io/anon/pen/enDig)。希望有帮助！

# objective-c - Objective C 编程 Kochan 第 3 章第 4 章练习 6

> ID：11922990
> 
> 赞同：-3
> 
> 时间：2012-08-12T14:35:47.817
> 
> 标签：objective-c

锻炼：

“复数是包含两个分量的数字：实部和虚部。如果 a 是实部，b 是虚部，则使用此符号表示数字：a + bi 编写一个 Objective-C 程序定义了一个名为 Complex 的新类。按照为 Fraction 类建立的范例，为您的新类定义以下方法：

```
-(void) setReal: (double) a;
-(void) setImaginary: (double) b;
-(void) print; // display as a + bi
-(double) real;
-(double) imaginary; 
```

编写一个测试程序来测试你的新类和方法。”

这是我不起作用的解决方案：

```
 #import <Foundation/Foundation.h>

@iterface Complex:NSObject
{
    double a, b;
}

-(void)setReal: (double) a;
-(void)setImaginary: (double) b;
-(void) print;
-(double) real;
-(double) imaginary;

@end

@implementation Complex
-(void)setReal
{
    scanf(@"Set real value %f",&a);
}
-(void)setImaginary
{
    scanf(@"Set imaginary value %f", &b);
}
-(void) print
{
    Nslog(@"Your number is %f",a+bi);
}
-(double)real
{
    Nslog(@"Real number is %f",a);
}
-(double)imaginary
{
    NSlog(@"Imaginary number is %f",b)
}

@end

int main (int argc, char *argv[])
{
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
    Complex*num=[[complex alloc] init];
    [num setReal:3];
    [num setImaginary:4];
    Nslog(@"The complex number is %i",[num print]);
    [num release];
    [pool drain];
    return 0;
} 
```

请问，有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:53:32.323

我可以看到一些明显的缺陷。首先，（这可能是复制/粘贴错误），您拼写错误`interface`为`iterface`.

其次，您的`print`方法没有正确写入 NSLog。您正在尝试将表达式`a+bi`作为格式说明符的结果强制执行`%f`。相反，您需要有两个参数，它们都`a`被`b`分别传递给 NSLog 调用。因此，您将拥有：

```
 NSLog(@"Your number is %f + %fi", a, b); 
```

最后，您的方法`real`应该`imaginary`是实例变量的“getter”，而不是打印到 NSLog 的函数。因此，您只希望函数体分别是`return a;`和`return b;`。对于前者（全部）：

```
 -(double)real
    {
        return a;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:22:23.953

修正后，答案是：

```
#import <Foundation/Foundation.h>

@interface Complex: NSObject
{
    double real, imaginary;
}

-(void)setReal: (double) a;

-(void)setImaginary: (double) b;

-(void) print;

-(double) real;

-(double) imaginary;

@end

@implementation Complex

-(void)setReal: (double) a
{
    real =a; 
}

-(void)setImaginary: (double) b

{
    imaginary = b;
}

-(void) print
{
    NSLog(@"Your number is %.2f+%.2fi", real, imaginary);
}

-(double)real
{
    return real;
}

-(double)imaginary
{
    return imaginary;
}

@end

int main (int argc, char *argv[])
{

     NSAutoreleasePool*pool=[[NSAutoreleasePool alloc] init];

Complex *myComplex=[[Complex alloc] init];

[myComplex setReal:3];
[myComplex setImaginary:4];
[myComplex print];

[myComplex release];
[pool drain];

    return 0;
} 
```

# vb.net - 保存按钮不保存所有内容

> ID：11922991
> 
> 赞同：0
> 
> 时间：2012-08-12T14:35:50.457
> 
> 标签：vb.net

我的项目中有一个保存按钮，它应该将我的 2 个列表框的内容保存到一个文本文件中，但它并没有保存所有内容。相反，它会删除其中一个列表框的最后 5 行。我的代码做错了什么？

```
Dim loops As Integer 'Declare variable
    Dim savefile As New SaveFileDialog
    savefile.FileName = ""
    savefile.Filter = "textfiles(*.txt)|*.txt|file(*)|*|All files('.')|'.')"
    savefile.Title = "save"
    savefile.ShowDialog()
    Try
        Dim write As New System.IO.StreamWriter(savefile.FileName) 'Write and save a new file
        For loops = 1 To itemcount - 1 'loop until no lines are left in listbox
            write.WriteLine(firstname(loops)) 'Write out firstname
            write.WriteLine(lastname(loops)) 'Write out lastname
            write.WriteLine(gender(loops)) 'Write out gender 
            write.WriteLine(applicationdate(loops)) 'Write out date of regestration
            write.WriteLine(address(loops)) 'Write out address
        Next
        write.Close() 'Close file
        MsgBox("File Saved") 'Display message box
    Catch ex As Exception
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:05:44.777

你需要在行上[设置一个断点](http://msdn.microsoft.com/en-us/library/15d1wtaf.aspx)`For loops = 1 To itemcount - 1`

然后按 F8 键并在`itemcount`代码执行时检查 的值。使用这篇关于[在 vb.net 中调试的](http://msdn.microsoft.com/en-us/library/aa290042%28v=vs.71%29.aspx)文章来帮助您。

从评论中听起来好像 的值`itemcount`在某种程度上是不正确的。

# cakephp - 如何组织我的蛋糕视图

> ID：11922992
> 
> 赞同：1
> 
> 时间：2012-08-12T14:35:55.670
> 
> 标签：cakephp

我是 CakePHP 的新手，并用它启动了一个应用程序。我面临一个问题，如何更好地组织我的观点。

我的应用程序有类别和类别有相关的产品。在头部我想显示所有可用的类别，当用户点击一个类别名称时，它的所有相关产品都将显示在类别列表下。

我应该在一个视图中同时定义类别和产品展示吗？或将这些扩展到视图的视图，我应该在哪里创建这些视图？因为这些属于 2 个不同的模型。

以及如何获取数据，因为我想访问仅选定类别的产品而不是所有类别的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:48:03.843

由于您是 cakePHP 新手，我建议您为您的类别和产品“烘焙”控制器、模型和视图。`belongs_to`当您烘焙它们时，您将能够定义两者（产品类别和产品类别）之间的一对多关系`has_many`。

结果将是，类别视图自动包含相关产品的列表。

（您必须先烘焙类别，然后再烘焙产品......）

# yii - 想要使用不同表的 ID 从不同模型中获取数据？

> ID：11922996
> 
> 赞同：1
> 
> 时间：2012-08-12T14:36:06.227
> 
> 标签：yii

> 我有两个表消息和用户的模型，其中包含字段：
> 
> 消息：id 消息 created_date 状态
> 
> 用户：id usr_name
> 
> 我有另一个没有模型的表 message_to：
> 
> message_to: id message_id user_id 状态
> 
> 现在，我的问题是我需要通过当前消息模型中 message_to 中的 user_id 从用户表中获取用户名。我怎样才能为此创建关系？我不想在这里使用查询生成器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:42:43.440

在消息模型中：

```
<?php

class Message extends CActiveRecord {
    // ...
    public function relations() {
        return array(
            'user' => array(
                self::BELONGS_TO,
                'User',
                '{{message_to}}(message_id, user_id)'
            ),
        );
    }
} 
```

然后像这样打电话`$message->user->usr_name;`

要能够获取用户的消息，您可以在用户模型中编写关系：

```
<?php

class User extends CActiveRecord {
    /...
    public function relations() {
        return array(
            'messages' => array(
                self::HAS_MANY,
                'Message',
                '{{message_to}}(user_id, message_id)'
            ),
        );
    }
} 
```

然后像这样打电话`foreach($user->messages as $message) { ...`

# wordpress - 带有子级和层次结构的 Wordpress 自定义分类下拉列表

> ID：11922998
> 
> 赞同：0
> 
> 时间：2012-08-12T14:36:11.800
> 
> 标签：wordpress, drop-down-menu

我正在为基于场地的项目使用 wordpress 的属性主题。在那里，我进行了基于自定义分类法的搜索，我需要帮助的是位置。

最初我有国家和城市 - 但在发现我似乎无法根据用户为国家选择的内容填充城市（虽然是 AJAX，但即使在网上冲浪几个小时后我也无法弄清楚如何做到这一点） . 我看到一篇帖子说要把它变成一个分类法，我称之为位置，现在这是一个分层分类法，它有一个城市作为孩子

我遇到的问题是，对于搜索，我现在有一个下拉列表，它显示了城市，但没有显示层次结构！

所以它看起来像（例如）

巴西
佛罗伦萨
意大利
墨西哥
美国

它应该显示在哪里

巴西
意大利
- 佛罗伦萨
墨西哥
美国

下拉菜单都被称为

```
<div class="left">
    <label for="ct_state"><?php _e('Location', 'contempo'); ?></label>
    <?php ct_search_form_select('country'); ?>
</div> 
```

被调用的函数是

```
function ct_search_form_select($name, $taxonomy_name = null) {
    global $search_values;

    if (!$taxonomy_name) {
        $taxonomy_name = $name;
    }
    ?>
    <select id="ct_<?php echo $name; ?>" name="ct_<?php echo $name; ?>">
        <option value="0"><?php _e('Any', 'contempo'); ?></option>
        <?php foreach( get_terms($taxonomy_name, 'hide_empty=0') as $t ) : ?>
            <?php if ($search_values[$name] == $t->slug) { $selected = 'selected="selected" '; } else { $selected = ''; } ?>
            <option <?php echo $selected; ?>value="<?php echo $t->slug; ?>"><?php echo $t->name; ?></option>
        <?php endforeach; ?>
    </select>
    <?php
} 
```

如您所见，它还提取了一个名为 $search_values 的变量，这就是我将所有选择编译成搜索查询的方式。有没有快速解决这个问题的地方？我试过做不同的功能，但我什么都做不了:(请有人帮我

非常感谢尼基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:10:42.130

有一个朋友帮我解决这个问题 - 以防其他人有这个问题，为这些下拉菜单创建一个新功能

```
function ct_location_form_select($name, $tax_name = null, $parent = null) {
    global $search_values;

    if (!$tax_name) {
        $tax_name = $name;
    }

    $tax_array['hide_empty'] = 0;
    $tax_array['parent'] = ( $parent ) ? $parent : 0;
    $tax_terms = get_terms( $tax_name, $tax_array );

    if ($parent) {
        foreach( $tax_terms as $t ) {
            if ( $search_values[$name] == $t->slug ) { $selected = 'selected="selected"'; } else { $selected = ''; }
            ?>
            <option value="<?php echo $t->slug; ?>" <?php echo $selected; ?>><?php echo get_option_spaces( $tax_name, $t->term_id ) . $t->name; ?></option>
            <?php
            if ( get_term_children( $t->term_id, $tax_name ) ) {
                ct_location_form_select( $name, $tax_name, $t->term_id );
            }
        }
    } else {
    ?>
    <select id='ct_<?php echo $name; ?>' name='ct_<?php echo $name; ?>'>
    <option value="0"><?php _e('Any', 'contempo'); ?></option>
    <?php foreach( $tax_terms as $t ) { ?>
    <?php if ( $search_values[$name] == $t->slug ) { $selected = 'selected="selected" '; } else { $selected = ''; } ?>
    <option <?php echo $selected; ?>value="<?php echo $t->slug; ?>"><?php echo $t->name; ?></option>
    <?php
            if ( get_term_children( $t->term_id, $tax_name ) ) {
                ct_location_form_select( $name, $tax_name, $t->term_id );
            }
        }
    ?>
    </select>
    <?php
    }
} 
```

干杯!