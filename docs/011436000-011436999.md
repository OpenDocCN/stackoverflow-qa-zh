# StackOverflow 问答 11436000-11436999

# javascript - 检查变量是否大于某个值但不是未定义

> ID：11436002
> 
> 赞同：0
> 
> 时间：2012-07-11T15:23:54.490
> 
> 标签：javascript, jquery, variables, if-statement

```
var ship = $("input[name=shippingamt]").length;
var counting1 = $(".submit-btn-1 li.checked:not(.title)").length;

if ((counting1 == 6)&&(ship >= 1)&&($('input[name=ideclare1]').is(":checked"))){ 
```

上面的代码片段是我到目前为止所拥有的，几乎我有 3 个基本字段，一个名为**Ship的变量，一个名为****counting1**的清单和一个复选框检查。

但是，如果**Ship**和**Checklist**都很好，并且名为**ideclare1**的复选框被选中和取消选中，那么值**ship**将变为 undefined 并且仍然是有效的类，因为长度是**>= 1**。

任何人都可以建议如何检查一个字段是否已定义并且长度是否大于 1？

问候，

唐纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:25:32.203

检查`.length`jQuery 对象的。

```
var ideclare = $('input[name=ideclare1]');

if ((counting1 == 6)&&(ship >= 1)&&(ideclare.length > 0 && ideclare.is(":checked"))){ 
```

*如果您只是检查常规变量，请*编辑*`undefined`好，只需将其与：*

 *```
if (counting1 == 6 && (ship !== undefined && ship >= 1) ... 
```*

# wordpress - 在 CakePHP 中使用 Wordpress 获取视图

> ID：11436007
> 
> 赞同：0
> 
> 时间：2012-07-11T15:24:12.500
> 
> 标签：wordpress, cakephp

我将最新版本的 Wordpress 用于我网站的公共部分，将 CakePHP 用于实际的 Web 应用程序。由于我想保持应用程序的一致性，我想在我的视图文件中使用 Wordpress 函数（例如 get_header()、get_sidebar() 和 get_footer()）来实现这一点。我可以只使用 require 语句并调用我需要的函数吗？有人做过吗？是否会有任何冲突（例如具有相同名称的函数），有没有办法避免它？

此外，我知道 CakePHP 通常假定路径是相对于 app/ 目录的。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:12:42.320

我不确定是否将 WordPress 的某些部分包含到 CakePHP 应用程序中，它可能会变得非常混乱，如果它被加载到与预期不同的路径中，WP 可能会失败。除非其他人在您完成之前完成了它，否则您可能会发现自己做了很多工作并发现根本无法完成。

有一些并排安装它们的指南，但似乎没有任何内容涵盖抓取帖子，以及来自 Cake 中的 WP 模板的部分内容。

以下是我会考虑的一些选项：

1) 将 WP 放在 /blog 中，并确保您的 WP 主题在视觉上与您的 CakePHP 布局相匹配。

2) 在您的 Cake 应用程序中构建一个简单的博客平台。

3) 将应用程序的 CakePHP 部分构建为 WordPress 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:13:41.397

我最近尝试了类似的东西。您将结合两个代码库，是的，存在名称冲突。PHP5 命名空间可以解决这个问题，但[它们仅计划用于 CakePHP 3.0。](http://cakephp.lighthouseapp.com/projects/42648/development-roadmap)

# javascript - 向 Fabric.js 元素添加 ID

> ID：11436008
> 
> 赞同：6
> 
> 时间：2012-07-11T15:24:13.477
> 
> 标签：javascript, html, canvas, html5-canvas, fabricjs

我正在使用 Fabric.js 库在 Canvas 中创建一个“类似地图”的应用程序。我基本上把图像放下，然后用正确的坐标在图像顶部放置圆圈。点位置和名称作为从 ajax 调用接收的 JSON 数据传入。我需要一种方法来引用任何单个圈子，以便我可以获取有关该圈子的更多信息（每个圈子都有一个包含更详细信息的弹出窗口）。

我在文档中找不到解释如何执行此操作的任何地方，我尝试将 ID 添加到这样的对象：

`tokens.add(new fabric.Circle({ radius: 25, fill: '#f55', top: 100, left: 70, id: "foo" }));`

没有运气检索它。任何帮助将不胜感激。这也是我与这个社区的第一次互动，所以如果我的问题不够详细，或者还有其他问题，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T09:26:36.840

您可以使用 fabric.object.prototype 添加属性。所以，添加：

```
fabric.Object.prototype.uid = ... ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T07:35:26.727

您可以扩展 fabric.Object 类并添加您自己的属性，但最简单的方法是使用`fabric.util.Object.extend()`. 您可以添加任意数量的自定义属性并使用`object.toObject().id`.

```
 extend(object, prop) {
        object.toObject = ((toObject) => {
            return function () {
                return fabric.util.object.extend(toObject.call(this), prop);
            };
        })(object.toObject);
    } 
```

接着

```
 this.extend(line , {
            customType:'ArrowLine',
            id:this.randomId(),
            CommentId:activeObject.toObject().id, extensionId
    }); 
```

# c - 写入已关闭的本地 TCP 套接字不会失败

> ID：11436013
> 
> 赞同：27
> 
> 时间：2012-07-11T15:24:28.203
> 
> 标签：c, linux, sockets, tcp, glibc

我的插座似乎有问题。下面，您将看到一些分叉服务器和客户端的代码。服务器打开一个 TCP 套接字，客户端连接到它然后关闭它。睡眠用于协调时间。在客户端 close() 之后，服务器尝试 write() 到它自己的 TCP 连接端。根据 write(2) 手册页，这*应该*给我一个 SIGPIPE 和一个 EPIPE errno。但是，我没有看到这一点。从服务器的角度来看，对本地关闭套接字的写入*成功*，并且没有 EPIPE 我看不到服务器应该如何检测客户端已关闭套接字。

在客户端关闭和服务器尝试写入之间的间隙，调用 netstat 会显示连接处于 CLOSE_WAIT/FIN_WAIT2 状态，因此服务器端应该可以拒绝写入。

作为参考，我在 Debian Squeeze 上，uname -r 是 2.6.39-bpo.2-amd64。

这里发生了什么？

* * *

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/socket.h>
#include <sys/select.h>
#include <netinet/tcp.h>
#include <errno.h>
#include <string.h>
#include <stdlib.h>
#include <fcntl.h>

#include <netdb.h>

#define SERVER_ADDRESS "127.0.0.7"
#define SERVER_PORT 4777

#define myfail_if( test, msg ) do { if((test)){ fprintf(stderr, msg "\n"); exit(1); } } while (0)
#define myfail_unless( test, msg ) myfail_if( !(test), msg )

int connect_client( char *addr, int actual_port )
{
    int client_fd;

    struct addrinfo hint;
    struct addrinfo *ailist, *aip;

    memset( &hint, '\0', sizeof( struct addrinfo ) );
    hint.ai_socktype = SOCK_STREAM;

    myfail_if( getaddrinfo( addr, NULL, &hint, &ailist ) != 0, "getaddrinfo failed." );

    int connected = 0;
    for( aip = ailist; aip; aip = aip->ai_next ) {
        ((struct sockaddr_in *)aip->ai_addr)->sin_port = htons( actual_port );
        client_fd = socket( aip->ai_family, aip->ai_socktype, aip->ai_protocol );

        if( client_fd == -1) { continue; }
        if( connect( client_fd, aip->ai_addr, aip->ai_addrlen) == 0 ) {
            connected = 1;
            break;
        }
        close( client_fd );
    }

    freeaddrinfo( ailist );

    myfail_unless( connected, "Didn't connect." );
    return client_fd;
}

void client(){
    sleep(1);
    int client_fd = connect_client( SERVER_ADDRESS, SERVER_PORT );

    printf("Client closing its fd... ");
    myfail_unless( 0 == close( client_fd ), "close failed" );
    fprintf(stdout, "Client exiting.\n");
    exit(0);
}

int init_server( struct sockaddr * saddr, socklen_t saddr_len )
{
    int sock_fd;

    sock_fd = socket( saddr->sa_family, SOCK_STREAM, 0 );
    if ( sock_fd < 0 ){
        return sock_fd;
    }

    myfail_unless( bind( sock_fd, saddr, saddr_len ) == 0, "Failed to bind." );
    return sock_fd;
}

int start_server( const char * addr, int port )
{
    struct addrinfo *ailist, *aip;
    struct addrinfo hint;
    int sock_fd;

    memset( &hint, '\0', sizeof( struct addrinfo ) );
    hint.ai_socktype = SOCK_STREAM;
    myfail_if( getaddrinfo( addr, NULL, &hint, &ailist ) != 0, "getaddrinfo failed." );

    for( aip = ailist; aip; aip = aip->ai_next ){
        ((struct sockaddr_in *)aip->ai_addr)->sin_port = htons( port );
        sock_fd = init_server( aip->ai_addr, aip->ai_addrlen );
        if ( sock_fd > 0 ){
            break;
        } 
    }
    freeaddrinfo( aip );

    myfail_unless( listen( sock_fd, 2 ) == 0, "Failed to listen" );
    return sock_fd;
}

int server_accept( int server_fd )
{
    printf("Accepting\n");
    int client_fd = accept( server_fd, NULL, NULL );
    myfail_unless( client_fd > 0, "Failed to accept" );
    return client_fd;
}

void server() {
    int server_fd = start_server(SERVER_ADDRESS, SERVER_PORT);
    int client_fd = server_accept( server_fd );

    printf("Server sleeping\n");
    sleep(60);

    printf( "Errno before: %s\n", strerror( errno ) );
    printf( "Write result: %d\n", write( client_fd, "123", 3 ) );
    printf( "Errno after:  %s\n", strerror( errno ) );

    close( client_fd );
}

int main(void){
    pid_t clientpid;
    pid_t serverpid;

    clientpid = fork();

    if ( clientpid == 0 ) {
        client();
    } else {
        serverpid = fork();

        if ( serverpid == 0 ) {
            server();
        }
        else {
            int clientstatus;
            int serverstatus;

            waitpid( clientpid, &clientstatus, 0 );
            waitpid( serverpid, &serverstatus, 0 );

            printf( "Client status is %d, server status is %d\n", 
                    clientstatus, serverstatus );
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-19T00:49:20.853

这就是 Linux 手册页中关于`write`and的内容`EPIPE`：

```
 EPIPE  fd is connected to a pipe or socket whose reading end is closed.
          When this happens the writing process will also receive  a  SIG-
          PIPE  signal.  (Thus, the write return value is seen only if the
          program catches, blocks or ignores this signal.) 
```

当 Linux 使用 a`pipe`或 a`socketpair`时，它可以并且将检查该对的*读取端*，这两个程序将演示：

```
void test_socketpair () {
    int pair[2];
    socketpair(PF_LOCAL, SOCK_STREAM, 0, pair);
    close(pair[0]);
    if (send(pair[1], "a", 1, MSG_NOSIGNAL) < 0) perror("send");
}

void test_pipe () {
    int pair[2];
    pipe(pair);
    close(pair[0]);
    signal(SIGPIPE, SIG_IGN);
    if (write(pair[1], "a", 1) < 0) perror("send");
    signal(SIGPIPE, SIG_DFL);
} 
```

Linux 能够这样做，因为内核对管道或连接对的另一端具有先天的知识。但是，在使用 时`connect`，有关套接字的状态由协议栈维护。您的测试演示了这种行为，但下面是一个在单个线程中完成所有操作的程序，类似于上面的两个测试：

```
int a_sock = socket(PF_INET, SOCK_STREAM, 0);
const int one = 1;
setsockopt(a_sock, SOL_SOCKET, SO_REUSEADDR, &one, sizeof(one));
struct sockaddr_in a_sin = {0};
a_sin.sin_port = htons(4321);
a_sin.sin_family = AF_INET;
a_sin.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
bind(a_sock, (struct sockaddr *)&a_sin, sizeof(a_sin));
listen(a_sock, 1);
int c_sock = socket(PF_INET, SOCK_STREAM, 0);
fcntl(c_sock, F_SETFL, fcntl(c_sock, F_GETFL, 0)|O_NONBLOCK);
connect(c_sock, (struct sockaddr *)&a_sin, sizeof(a_sin));
fcntl(c_sock, F_SETFL, fcntl(c_sock, F_GETFL, 0)&~O_NONBLOCK);
struct sockaddr_in s_sin = {0};
socklen_t s_sinlen = sizeof(s_sin);
int s_sock = accept(a_sock, (struct sockaddr *)&s_sin, &s_sinlen);
struct pollfd c_pfd = { c_sock, POLLOUT, 0 };
if (poll(&c_pfd, 1, -1) != 1) perror("poll");
int erropt = -1;
socklen_t errlen = sizeof(erropt);
getsockopt(c_sock, SOL_SOCKET, SO_ERROR, &erropt, &errlen);
if (erropt != 0) { errno = erropt; perror("connect"); }
puts("P|Recv-Q|Send-Q|Local Address|Foreign Address|State|");
char cmd[256];
snprintf(cmd, sizeof(cmd), "netstat -tn | grep ':%hu ' | sed 's/  */|/g'",
         ntohs(s_sin.sin_port));
puts("before close on client"); system(cmd);
close(c_sock);
puts("after close on client"); system(cmd);
if (send(s_sock, "a", 1, MSG_NOSIGNAL) < 0) perror("send");
puts("after send on server"); system(cmd);
puts("end of test");
sleep(5); 
```

如果你运行上面的程序，你会得到类似这样的输出：

```
P|Recv-Q|Send-Q|Local Address|Foreign Address|State|
before close on client
tcp|0|0|127.0.0.1:35790|127.0.0.1:4321|ESTABLISHED|
tcp|0|0|127.0.0.1:4321|127.0.0.1:35790|ESTABLISHED|
after close on client
tcp|0|0|127.0.0.1:35790|127.0.0.1:4321|FIN_WAIT2|
tcp|1|0|127.0.0.1:4321|127.0.0.1:35790|CLOSE_WAIT|
after send on server
end of test 
```

这表明`write`套接字转换到`CLOSED`状态需要一个时间。要找出发生这种情况的原因，事务的 TCP 转储可能很有用：

```
16:45:28 127.0.0.1 > 127.0.0.1
 .809578 IP .35790 > .4321: S 1062313174:1062313174(0) win 32792 <mss 16396,sackOK,timestamp 3915671437 0,nop,wscale 7>
 .809715 IP .4321 > .35790: S 1068622806:1068622806(0) ack 1062313175 win 32768 <mss 16396,sackOK,timestamp 3915671437 3915671437,nop,wscale 7>
 .809583 IP .35790 > .4321: . ack 1 win 257 <nop,nop,timestamp 3915671437 3915671437>
 .840364 IP .35790 > .4321: F 1:1(0) ack 1 win 257 <nop,nop,timestamp 3915671468 3915671437>
 .841170 IP .4321 > .35790: . ack 2 win 256 <nop,nop,timestamp 3915671469 3915671468>
 .865792 IP .4321 > .35790: P 1:2(1) ack 2 win 256 <nop,nop,timestamp 3915671493 3915671468>
 .865809 IP .35790 > .4321: R 1062313176:1062313176(0) win 0 
```

前三行代表 3 次握手。第四行是`FIN`客户端发送给服务器的数据包，第五行是`ACK`来自服务器的确认接收。第六行是服务器尝试向`PUSH`设置了标志的客户端发送 1 个字节的数据。最后一行是客户端`RESET`数据包，它导致连接的 TCP 状态被释放，这也是为什么第三个`netstat`命令在上面的测试中没有产生任何输出的原因。

因此，服务器不知道客户端将重置连接，直到它尝试向它发送一些数据。重置的原因是因为客户端调用了`close`，而不是其他东西。

服务器无法确定客户端实际发出了什么系统调用，它只能跟随 TCP 状态。例如，我们可以用`close`调用来`shutdown`代替调用。

```
//close(c_sock);
shutdown(c_sock, SHUT_WR); 
```

`shutdown`和之间的区别在于`close`，`shutdown`它只控制连接的状态，同时`close`也控制代表套接字的*文件描述符的状态。*A`shutdown`不会`close`是套接字。

输出将随着`shutdown`更改而有所不同：

```
P|Recv-Q|Send-Q|Local Address|Foreign Address|State|
before close on client
tcp|0|0|127.0.0.1:4321|127.0.0.1:56355|ESTABLISHED|
tcp|0|0|127.0.0.1:56355|127.0.0.1:4321|ESTABLISHED|
after close on client
tcp|1|0|127.0.0.1:4321|127.0.0.1:56355|CLOSE_WAIT|
tcp|0|0|127.0.0.1:56355|127.0.0.1:4321|FIN_WAIT2|
after send on server
tcp|1|0|127.0.0.1:4321|127.0.0.1:56355|CLOSE_WAIT|
tcp|1|0|127.0.0.1:56355|127.0.0.1:4321|FIN_WAIT2|
end of test 
```

TCP 转储也将显示不同的内容：

```
17:09:18 127.0.0.1 > 127.0.0.1
 .722520 IP .56355 > .4321: S 2558095134:2558095134(0) win 32792 <mss 16396,sackOK,timestamp 3917101399 0,nop,wscale 7>
 .722594 IP .4321 > .56355: S 2563862019:2563862019(0) ack 2558095135 win 32768 <mss 16396,sackOK,timestamp 3917101399 3917101399,nop,wscale 7>
 .722615 IP .56355 > .4321: . ack 1 win 257 <nop,nop,timestamp 3917101399 3917101399>
 .748838 IP .56355 > .4321: F 1:1(0) ack 1 win 257 <nop,nop,timestamp 3917101425 3917101399>
 .748956 IP .4321 > .56355: . ack 2 win 256 <nop,nop,timestamp 3917101426 3917101425>
 .764894 IP .4321 > .56355: P 1:2(1) ack 2 win 256 <nop,nop,timestamp 3917101442 3917101425>
 .764903 IP .56355 > .4321: . ack 2 win 257 <nop,nop,timestamp 3917101442 3917101442>
17:09:23
 .786921 IP .56355 > .4321: R 2:2(0) ack 2 win 257 <nop,nop,timestamp 3917106464 3917101442> 
```

请注意，最后的重置是在最后一个`ACK`数据包之后 5 秒发生的。此重置是由于程序在未正确关闭套接字的情况下关闭。`ACK`与之前不同的是重置之前从客户端到服务器的数据包。这表明客户端没有使用`close`. 在 TCP 中，该`FIN`指示实际上是没有更多数据要发送的指示。但是由于 TCP 连接是双向的，因此接收到的服务器`FIN`假定客户端仍然可以接收数据。在上述情况下，客户端实际上确实接受了数据。

无论客户端使用`close`还是`SHUT_WR`发出 a ，在任何一种情况下，您都可以通过轮询服务器套接字以获取可读事件`FIN`来检测 的到达。`FIN`如果调用后`read`的结果是`0`，那么您知道`FIN`已经到达，并且您可以使用该信息做您想做的事情。

```
struct pollfd s_pfd = { s_sock, POLLIN|POLLOUT, 0 };
if (poll(&s_pfd, 1, -1) != 1) perror("poll");
if (s_pfd.revents|POLLIN) {
    char c;
    int r;
    while ((r = recv(s_sock, &c, 1, MSG_DONTWAIT)) == 1) {}
    if (r == 0) { /*...FIN received...*/ }
    else if (errno == EAGAIN) { /*...no more data to read for now...*/ }
    else { /*...some other error...*/ perror("recv"); }
} 
```

现在，如果服务器在尝试写入之前出现问题，它实际上会得到`SHUT_WR`错误，这是非常真实的。`shutdown``EPIPE`

```
shutdown(s_sock, SHUT_WR);
if (send(s_sock, "a", 1, MSG_NOSIGNAL) < 0) perror("send"); 
```

相反，如果您希望客户端向服务器指示立即重置，您可以通过启用 linger 选项强制在大多数 TCP 堆栈上发生这种情况，并`0`在调用之前使用 linger timeout `close`。

```
struct linger lo = { 1, 0 };
setsockopt(c_sock, SOL_SOCKET, SO_LINGER, &lo, sizeof(lo));
close(c_sock); 
```

有了上面的改动，程序的输出变成了：

```
P|Recv-Q|Send-Q|Local Address|Foreign Address|State|
before close on client
tcp|0|0|127.0.0.1:35043|127.0.0.1:4321|ESTABLISHED|
tcp|0|0|127.0.0.1:4321|127.0.0.1:35043|ESTABLISHED|
after close on client
send: Connection reset by peer
after send on server
end of test 
```

在这种`send`情况下，会立即出现错误，但不是`EPIPE`，而是`ECONNRESET`。TCP 转储也反映了这一点：

```
17:44:21 127.0.0.1 > 127.0.0.1
 .662163 IP .35043 > .4321: S 498617888:498617888(0) win 32792 <mss 16396,sackOK,timestamp 3919204411 0,nop,wscale 7>
 .662176 IP .4321 > .35043: S 497680435:497680435(0) ack 498617889 win 32768 <mss 16396,sackOK,timestamp 3919204411 3919204411,nop,wscale 7>
 .662184 IP .35043 > .4321: . ack 1 win 257 <nop,nop,timestamp 3919204411 3919204411>
 .691207 IP .35043 > .4321: R 1:1(0) ack 1 win 257 <nop,nop,timestamp 3919204440 3919204411> 
```

数据包在 3次`RESET`握手完成后立即到来。但是，使用此选项有其危险。如果另一端在`RESET`到达时套接字缓冲区中有未读数据，则该数据将被清除，导致数据丢失。强制`RESET`发送 a 通常用于请求/响应样式协议。请求的发送者在收到对其请求的整个响应时可以知道不会丢失任何数据。然后，请求发送者强制`RESET`在连接上发送 a 是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T16:50:08.560

您有两个套接字 - 一个用于客户端，另一个用于服务器。现在您的客户端正在执行主动关闭。这意味着客户端已启动 TCP 连接终止（客户端发送已发送 tcp FIN 段）。

在这个阶段，您会看到客户端套接字处于 FIN_WAIT1 状态。现在服务器套接字的状态是什么？它处于 CLOSE_WAIT 状态。所以服务器套接字没有关闭。

来自服务器的 FIN 尚未发送。（为什么 - 因为应用程序没有关闭套接字）。在这个阶段，您正在通过服务器套接字进行写入，因此您不会收到错误。

现在，如果您想查看错误，只需在覆盖套接字之前写入 close(client_fd) 即可。

```
close(client_fd);
printf( "Write result: %d\n", write( client_fd, "123", 3 ) ); 
```

此处服务器套接字不再处于 CLOSE_WAIT 状态，因此您可以看到 write 的返回值为 -ve 以指示错误。我希望这可以澄清。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T11:16:52.233

在客户端编辑套接字之后调用`write()`一次（第一次）（如您的示例中的编码）之后`close()`，您将获得预期的`EPIPE`和`SIGPIPE`对 write() 的任何连续调用。

只需尝试添加另一个 write() 来引发错误：

```
...
printf( "Errno before: %s\n", strerror( errno ) );
printf( "Write result: %d\n", write( client_fd, "123", 3 ) );
printf( "Errno after:  %s\n", strerror( errno ) );

printf( "Errno before: %s\n", strerror( errno ) );
printf( "Write result: %d\n", write( client_fd, "A", 1 ) );
printf( "Errno after:  %s\n", strerror( errno ) );
... 
```

输出将是：

```
Accepting
Server sleeping
Client closing its fd... Client exiting.
Errno before: Success
Write result: 3
Errno after:  Success
Errno before: Success
Client status is 0, server status is 13 
```

最后两个`printf()`s 的输出丢失，因为进程因`SIGPIPE`第二次调用而终止`write()`。为避免进程终止，您可能希望使进程忽略`SIGPIPE`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:49:06.397

我怀疑正在发生的事情是服务器端套接字仍然有效，因此即使您的 TCP 会话处于关闭状态，您的 write 调用也会有效地尝试写入文件描述符。如果我完全错了，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:24:10.613

我猜您遇到了 TCP 堆栈，检测到发送失败并尝试重新传输。后续调用是否`write()`会静默失败？换句话说，尝试向已关闭的套接字写入五次，看看您是否最终获得了 SIGPIPE。当你说写“成功”时，你得到的返回结果是 3 吗？

# android - 屏幕到屏幕命令

> ID：11436017
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:24:38.360
> 
> 标签：android, xml, button, onclick, screen

嗨，我是 android 新手，花了 10 多个小时寻找这个答案，但我似乎无法找到并理解它。我在主 xml 页面。我正在尝试创建一个转到另一个页面的按钮。我需要最简单和最简单的方法来做到这一点。有人可以帮帮我吗？这是我的主要 xml 代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="66dp"
    android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:44:29.853

```
<Button 
    android:id="@+id/button1" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_below="@+id/textView1" 
    android:layout_centerHorizontal="true" 
    android:layout_marginTop="66dp" 
    android:text="Button" /> 
```

转到您的活动 初始化您的按钮

```
Button btn=(Button)findViewById(R.id.button1);
// Register listener to button btn
btn.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

            // your action

            Intent newActivityIntent= new Intent(currentActivity.this, NewClass.class);
            startActivity(newActivityIntent);       
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:29:31.857

此过程记录在有关按钮的网站上。谷歌搜索安卓按钮

```
<Button
 android:id="@+id/button1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_below="@+id/textView1"
 android:layout_centerHorizontal="true"
 android:layout_marginTop="66dp"
 android:text="Button"
 android:clickable="true"
 android:onClick"insertMethodNameHere"
 /> 
```

这将调用您在`onClick`标签中定义的方法，然后启动新活动或更新视图。无论您需要做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:36:10.250

你也可以做不同的...

您可以在 Activity中实例化一个[Button ：](http://developer.android.com/reference/android/widget/Button.html)

```
private Button button; 
```

在该`onCreate(Bundle bundle)`方法中，您可以找到您的按钮，如此 Activity XML 中定义的那样，这是您使用的`setContentView(R.layout.yourxml);`：

`button = (Button) findViewById(R.id.button);`

然后你使用[OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)：

```
button.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             // Perform action on click
         }
     }); 
```

在 onClick 方法中，您实例化了一个[Intent](http://developer.android.com/reference/android/content/Intent.html)

`Intent intent = new Intent(CurrentActivity.this, ActivityToGo.class);`

CurrentActivity = 你的那个，而 ActivityToGo 你想要加载的那个。

`startActivity();`

[在此处](http://developer.android.com/training/index.html)阅读 Android 基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:37:21.780

```
public class MyActivity extends Activity implements OnClickListener {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(this);
    }

    public void onClick(View v) {
        // Use a switch on v.getId() if you have multiple clickable views.
        // Since there's just one button, ...
        Intent intent = new Intent(this, TargetActivity.class;
        startActivity(intent);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T15:38:54.927

你必须学习**如何在 Android 中的活动/屏幕之间切换**，你可以在[这里](http://www.androidhive.info/2011/08/how-to-switch-between-activities-in-android/)找到一个很好的初学者教程

# android - 禁用搜索视图

> ID：11436018
> 
> 赞同：6
> 
> 时间：2012-07-11T15:24:42.900
> 
> 标签：android, search, android-widget

我正在尝试`SearchView`从我的`Activity`. 我尝试了以下代码：

```
 mSearchView.setEnabled(false);
    mSearchView.setFocusable(false);
    mSearchView.setClickable(false); 
```

但它不起作用。仍然可以单击 SearchView 并弹出键盘。我希望它变灰且不可点击。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-06-15T18:05:56.543

所陈述的答案都不足以满足我的需求，因此我想为处于相同情况的任何人提供另一个答案。

[![SearchView，有焦点，有搜索和清除按钮](../Images/345f1de0c4e969e46002927e78a3c794.png)](https://i.stack.imgur.com/Rt3mN.png)

SearchView 由不同的 View 组成，这些 View 可以——并且在这种情况下必须——单独处理。如果您希望您的 SearchView（支持 v7）在这样的状态下冻结和变灰，不响应任何类型的输入，包括搜索和清除按钮，您可以使用：

```
ImageView clearButton = (ImageView) searchView.findViewById(android.support.v7.appcompat.R.id.search_close_btn);
SearchView.SearchAutoComplete searchEditText = (SearchView.SearchAutoComplete) searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);

clearButton.setEnabled(false);
searchEditText.setEnabled(false);
searchView.setSubmitButtonEnabled(false); 
```

（此外，我遇到了 deeptis 答案的问题`searchView.setInputType(InputType.TYPE_NULL)`：如果您以这种方式禁用 SearchView 并在之后单击它，系统似乎希望打开键盘，但未显示键盘。因此，第一次单击后退按钮只会关闭- 未显示或实际上未打开 - 键盘。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-15T07:51:29.557

要禁用任何视图（例如`SearchView`），请将其设置`input-type`为`none`布局 XML 或`view.setInputType(InputType.TYPE_NULL)`从`Activity`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-08T09:33:00.950

您也可以完全隐藏 searchView。您可以通过执行以下操作隐藏搜索视图和搜索图标：

```
 searchItem.setVisible(false);
    searchView.setVisibility(View.GONE); 
```

然后，您可以通过以下方式将其带回：

```
 searchItem.setVisible(true);
    searchView.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:02:41.477

要清除 SearchView 焦点：

```
searchView.clearFocus(); 
```

隐藏搜索视图：

```
searchView.setVisibility(View.GONE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-09T09:14:29.090

从@outta Comfort 的回答来看，这是我的解决方案：

```
private void enableSearchView(View view, boolean enabled) {
    view.setEnabled(enabled);
    if (view instanceof ViewGroup) {
        ViewGroup viewGroup = (ViewGroup) view;
        for (int i = 0; i < viewGroup.getChildCount(); i++) {
            View child = viewGroup.getChildAt(i);
            enableSearchView(child, enabled);
        }
    }
} 
```

在其他地方，称之为：

```
enableSearchView(searchView, true/false); 
```

# objective-c - 如何获取文本字段字符？（Xcode）

> ID：11436019
> 
> 赞同：1
> 
> 时间：2012-07-11T15:24:45.270
> 
> 标签：objective-c, xcode

我开始学习 Xcode，作为第一个应用程序，我决定编写一个计算器。我做了一切，效果很好，但有一件事我找不到。我希望当用户写字母而不是数字并点击按钮时，会出现警告并阻止他输入字母。如果您能帮助我并为我的英语不好而感到抱歉，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:38:35.363

如果您根本不想让用户输入字母*，*那么最好使用*数字键盘*。十进制数字键盘在 iOS 4.1 及更高版本中可用，您可以从以下问题中了解更多信息：

[如何在 iOS 4.1 SDK 中使用新的 UIKeyboardTypeDecimalPad 功能](https://stackoverflow.com/questions/3742642/how-to-use-the-new-uikeyboardtypedecimalpad-feature-in-ios-4-1-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:39:02.090

正如评论所说，您最好只更改键盘的输入类型。

```
[myTextField setKeyBoardType:UIKeyboardTypeDecimalPad] // has a decimal, use UIKeyboardTypeNumberPad for no decimal 
```

[在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)查看所有可用类型的列表。

# java - 独立的 Java Glasshfish 客户端。参考 gf-client.jar

> ID：11436024
> 
> 赞同：1
> 
> 时间：2012-07-11T15:24:50.323
> 
> 标签：java, netbeans, glassfish, ejb

我正在部署一个使用 EJB 的应用程序。我已经编写了一个 EJB 和一个 Java 独立客户端来连接。一切正常。但是，我对 JAR 依赖项有疑问。我正在使用 Netbeans 7.1.2 和 Glassfish 3.1.2，我添加到客户端应用程序的罐子是：

1.  appserv-rt.jar
2.  javaee.jar
3.  gf-client.jar

我从这里读到：http: [//glassfish.java.net/javaee5/ejb/EJB_FAQ.html#StandaloneRemoteEJB](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#StandaloneRemoteEJB)，比 gf-client.jar 本身拥有很多依赖项。查看其中的 MANIFEST 文件后，我看到它提供了很多其他 jar 的亲属路径，然后，我必须直接在 glassfish 安装路径中引用这个 jar。如果我想将此应用程序分发给客户端，这是不可接受的，所有使用该应用程序（客户端）的客户端都需要下载 Glassfish？

所以我的问题是，我该如何处理？有没有办法避免从 glassfish 安装路径直接引用 gf-client.jar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:24:19.500

谢谢，

我通过将这些罐子添加到我的项目中解决了我的问题：

auto-depends.jar
部署-common.jar
glassfish-corba-internal-api.jar
internal-api.jar
management-api.jar
bean-validator.jar
dol.jar
glassfish-corba-newtimer.jar  
javax.ejb.jar
orb -connector.jar
common-util.jar
ejb-container.jar
glassfish-corba-omgapi.jar  
javax.jms.jar
orb-iiop.jar
config-api.jar
ejb.security.jar
glassfish-corba-orb.jar
javax。 resource.jar
security.jar
config-types.jar
glassfish-api.jar
glassfish-corba-orbgeneric.jar  
javax.servlet.jar
ssl-impl.jar
config.jar
glassfish-corba-asm.jar
glassfish-naming.jar
javax.transaction.jar
transaction-internal-api.jar
connector-internal-api.jar    
glassfish-corba-codegen.jar    
gmbal.jar
jta.jar
container-common.jar
glassfish-corba-csiv2-idl。 jar  
hk2-core.jar
kernel.jar

我认为在某些情况下不需要所有的罐子。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-24T16:24:27.643

在[应用程序开发指南](https://glassfish.java.net/docs/4.0/application-development-guide.pdf)中找到了这个：

> 将**as-install/lib/gf-client.jar**文件复制到客户端计算机并将其包含在客户端的类路径中。
> 
> gf-client.jar 文件在其 MANIFEST.MF 文件中引用 GlassFish Server JAR 文件。如果客户端计算机上没有安装 GlassFish Server，您还必须将**as-install/modules**目录复制到客户端计算机并保持其相对于 as-install /lib/gf-client.jar 文件的目录结构。或者你可以使用 package-appclient 脚本；请参阅使用 package-appclient 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T15:12:31.217

您可能需要考虑 Java Web Start 并让 GlassFish 自己决定客户端本地 ACC 必须使用哪些依赖项。这些将由客户端自动下载。

我写了一篇关于如何编写通过 Java Web Start 启动并使用依赖注入作为服务器端资源代理的 JavaFX 应用程序的教程：

[JavaFX 的企业方面：缺失的部分](http://blog.martinandersson.com/the-enterprise-side-of-javafx-the-missing-part/)。

# php - mysql 查询连接和速度/替代数据库解决方案有必要吗？

> ID：11436026
> 
> 赞同：0
> 
> 时间：2012-07-11T15:25:01.093
> 
> 标签：php, mysql, sql, pdo

我知道您可以在一个`mysql_query()`（或`mysqli_`...）内执行 10 个 SQL 查询，但这`mysql_query()`与在每个 SQL 查询中执行 10 个 SQL 查询有何不同？

如果它们不同并且第一个解决方案更有效，我将如何`mysql_fetch_assoc()`在其中的一个查询上使用函数？

如果第一个解决方案允许我将每页的连接数限制为 1 per `mysql_query()`，那么我认为我将有足够的 mysql 连接来处理我的流量，但如果没有，我可以使用什么 SQL 技术（或其他？）这将使我能够更有效地从 PHP 连接到我的数据库（这样我就可以处理更多用户）？

我正在使用 Apache 和 PHP 5.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:27:50.760

您一次只能发送一个查询...[查看文档](http://php.net/manual/en/function.mysql-query.php)

> mysql_query() 将唯一查询（**不支持多个查询**）发送到与指定链接标识符关联的服务器上当前活动的数据库。

您可以使用[`mysqli_mutli_query`](http://www.php.net/manual/en/mysqli.multi-query.php).. 文档中的示例：

```
$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli->multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli->store_result()) {
            while ($row = $result->fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result->free();
        }
        /* print divider */
        if ($mysqli->more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli->next_result());
}

/* close connection */
$mysqli->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:36:50.297

在一次调用 mysql_query() 中运行 10 个查询和运行 10 个 mysql_query() 之间的区别在于，在第一种情况下，您只能从最后一个查询中获得结果。但只要你不做一个新的 mysql_connect() 它不应该在查询之间重新连接。

另一种方法是使用[mysqli_multi_query](http://php.net/manual/en/mysqli.multi-query.php)，它可以让您并行运行多个查询，这将对其进行一些优化，但不是很多。

从它的声音来看，您不需要更有效的方法来连接到数据库，您要么需要优化查询、排序索引等，要么数据库机器可能只是配置不正确或硬件尺寸不足。我猜你的实际问题是你的数据库问题太慢了？

只需使用 mysql_query() 运行，每次调用一个查询，mysql 在与 PHP 不同的机器上运行，您仍然可以每秒执行数百个 MySQL 查询而不会出汗。

# java - awt 中的子组件是什么，您可以检索所有子组件吗？

> ID：11436028
> 
> 赞同：0
> 
> 时间：2012-07-11T15:25:03.600
> 
> 标签：java, awt

在该`java.awt.Component`方法的 java 文档中`getComponentAt`描述它可以返回一个组件或一个子组件。

什么是子组件？有没有办法从组件中检索所有子组件？

这里提到的子组件：http: [//docs.oracle.com/javase/7/docs/api/java/awt/Component.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:39:04.947

awt用作可以包含其他组件`Container`的特殊类。`Component`所以调用所有组件的枚举`Container.getComponents()`。为什么他们决定在`Component`类而不是`Container`类中访问子组件，我不知道，但就是这样。也许原因是`getComponentAt`，如果该位置没有子组件，并且它实际上包含给定的位置，它也会返回调用该方法的组件。

因此要查找所有子组件，请检查该组件是否为容器。如果不是，则它不能有子组件。如果是，则投射`Container`并访问它们。如果您还需要子子组件，请递归。

# syntax-highlighting - Visual Studio 反汇编语法荧光笔

> ID：11436031
> 
> 赞同：2
> 
> 时间：2012-07-11T15:25:08.833
> 
> 标签：syntax-highlighting

Visual Studio 是否有反汇编荧光笔？我这样说是因为看看这两个反汇编程序之间的区别：

视觉工作室：http: [//i.stack.imgur.com/9QPCk.png](http://i.stack.imgur.com/9QPCk.png)

IDA 专业版：http: [//i.stack.imgur.com/x1PfD.png](http://i.stack.imgur.com/x1PfD.png)

现在至少我想要 Visual Studio 的语法荧光笔，因为它实在是太丑了！另外，请不要说 ASMHighlighter，因为它只在编写汇编时支持，而不是在反汇编时支持。谢谢，史提夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-25T14:35:30.927

VS 扩展[AsmDude](https://github.com/HJLebbink/asm-dude)版本 1.9.0.0 为 Visual Studio 2015 和 2017 的反汇编窗口提供语法突出显示（以及更多）

# linux - 如何将 Linux 键码从 /dev/input/event* 转换为 ASCII

> ID：11436032
> 
> 赞同：6
> 
> 时间：2012-07-11T15:25:09.490
> 
> 标签：linux, embedded, ascii, keycode

我正在尝试将从 /dev/input/event0 读取的键盘事件从定义的值转换为未运行 X 或终端的嵌入式应用程序中的 ASCII 等效项。

我认为这应该通过在 Linux 中定义的键映射功能来完成，而不是仅仅创建我自己的 std::map<> 但我似乎找不到一个好的起点。到目前为止，我发现的大多数示例都假设我使用 X 窗口或终端运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:36:39.190

文本输入（除了非常简单的传统美式键盘和 7 位 ASCII 标准）是一个非常复杂的领域。我强烈建议您使用 X 客户端执行此操作，您可以在其中利用所有现有的输入法。

但是，如果您必须这样做，并且您对一种键盘和一种语言感到满意，您可以通过像终端一样解释事件来做到这一点。检查`/usr/include/linux/input.h`值的定义。跟踪 Shift 和 Ctrl 键的位置（当然，Alt、Fn 等非 ASCII 键由您来解释）并在按键事件中发出相应的字节。如果默认设置不适用于您的应用程序，也许您也想实现自动重复功能。

但基本上：不要。这是一个比您似乎意识到的要困难得多（！）的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T03:42:21.233

您可以从 /dev/input/event0 读取以下结构

```
struct input_event {
    struct timeval time;
    unsigned short type;
    unsigned short code;
    unsigned int value;
}; 
```

更多详情：[https ://www.kernel.org/doc/Documentation/input/input.txt](https://www.kernel.org/doc/Documentation/input/input.txt)

# bash - 命令是如何完成的查看菜单返回？

> ID：11436036
> 
> 赞同：0
> 
> 时间：2012-07-11T15:25:21.073
> 
> 标签：bash

命令是如何完成的（重启apache或mysql）查看菜单回来？

```
 VALUE=$(dialog --default-item "2" --stdout --menu "MENU" 50 160 50\
      "1" "Test-1" \
      "2" "Test-2")

 case $VALUE in
      1) /etc/init.d/apache2 restart 2>&1 | dialog --progressbox 16 80; sleep 1; ?????;;
      2) /etc/init.d/mysql restart 2>&1 | dialog --progressbox 16 80; sleep 1; ?????;;
 esac 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:31:44.057

将您发布的代码包装在一个`while`循环中，并添加一个“退出”选项来执行`break`.

```
while :

    VALUE=$(dialog --default-item "2" --stdout --menu "MENU" 50 160 50\
          "1" "Test-1" \
          "2" "Test-2" \
          "3" "quit")

    case $VALUE in
        1) /etc/init.d/apache2 restart 2>&1 | dialog --progressbox 16 80; sleep 1;;
        2) /etc/init.d/mysql restart 2>&1 | dialog --progressbox 16 80; sleep 1;;
        3) break;;
    esac

done 
```

# javascript - 将不同尺寸的图像很好地融入拼贴画中

> ID：11436042
> 
> 赞同：4
> 
> 时间：2012-07-11T15:25:38.780
> 
> 标签：javascript, jquery, html, image, photoshop

我正在寻找一个 javascript 库（或我可以实现的算法）以在单个页面上放置多个任意大小的图像，并且剩余的空白很少。类似于 Google Plus 显示图像的方式[[示例]](https://plus.google.com/photos/109813896768294978296/albums/5632065190489236417)。或者甚至更有趣（谷歌使它们的高度相同）

只要纵横比没有弄乱，并且看起来“适合”页面上的东西，可以稍微调整一下图像的缩放比例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T15:30:34.867

您可以使用流行的图书馆[Masonary](http://masonry.desandro.com/)。

> jQuery 的动态布局插件 CSS 浮动的另一面

这是一个代码[示例](http://masonry.desandro.com/demos/basic-single-column.html)...

```
$('#container').masonry({
  itemSelector: '.box'
}); 
```

这是[Github上的来源以及在 Shoptalk 播客上对](https://github.com/desandro/masonry)[David](http://shoptalkshow.com/episodes/024-with-david-desandro/) Desandro的采访。

**提示：**确保父容器具有 position:relative 以便所有内容都绑定到您的容器。

# tcl - 如何匹配正则表达式中的变量？

> ID：11436043
> 
> 赞同：0
> 
> 时间：2012-07-11T15:25:40.107
> 
> 标签：tcl

我正在尝试编写一个 Tcl 脚本，我需要在其中匹配正则表达式中的变量。例如，文件有一些包含“主要”的代码行。在所有这些行中，我需要确定一个特定的行：

```
major("major",0x32) 
```

我将变量 p1 用于“主要”（`set p1 major`）

如何使用变量 p1 ( `$p1`) 编写正则表达式来捕获该特定行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:41:18.463

```
regexp -- "$p1\\(\"$p1\",0x32\\)" $line match 
```

在 tclsh 中：

```
% set line {major("major",0x32)}
major("major",0x32)
% set p1 major
major
% regexp -- "$p1\\(\"$p1\",0x32\\)" $line match
1
% puts $match
major("major",0x32) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:53:55.583

### 使用字符串匹配

如果您只想知道单行是否匹配，您可以测试`string match`而不是正则表达式。这通常更快，更不挑剔。例如：

```
set fh [open /tmp/foo]
set lines [read $fh]
close $fh

set p1 major

set lines [split $lines "\n"]
foreach line $lines {
    if {[string match *$p1* $line]} {set match $line}
}
puts $match 
```

请注意，这会将整行存储在*match 中*，而不仅仅是搜索模式。这可能是您想要的，但您的里程可能会有所不同。

# salesforce - 在salesforce中的客户记录之间创建多对多关系

> ID：11436056
> 
> 赞同：0
> 
> 时间：2012-07-11T15:26:22.930
> 
> 标签：salesforce

有什么方法可以让我们在 Salesforce 中以多对多关系格式将 1 个客户记录与其他客户记录关联起来？按照标准方式，这是不可能的，因为我们无法在 Salesforce 中创建具有相同对象类型的多对多关系。谁能建议一些自定义方式/代码来做到这一点？我有一个需要链接的要求，例如：帐户 A 与帐户 B 和帐户 C，以便我可以在帐户 A 上看到帐户 B 和 C 的联系人。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:04:55.860

要在 salesforce 中创建多对多关系，您需要一个包含两个主详细信息的连接对象（实际上已经有一个称为 Partner 的标准对象可能适合您的需要）。

要查看相关客户的联系人，最简单的方法可能是创建一个简单的 visualforce 页面，该页面将查询相关客户的联系人并显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:22:03.183

您可以使用连接对象在两个帐户对象之间创建关系。您必须使用两种查找字段类型来关联对象 - 如果您尝试关联同一个对象，主从关系将不起作用。

根据@grigriforce 的评论，这也可以通过帐户和查找以及两个查找作为主详细信息来完成。

# varnish - Varnish 前端服务器，Litespeed 后端服务器

> ID：11436060
> 
> 赞同：1
> 
> 时间：2012-07-11T15:26:31.463
> 
> 标签：varnish, litespeed

我想知道是否有人可以建议我做错了什么。

我在前端服务器上设置了 Varnish，这是有效的。我可以把几个公共网站的IP地址（包括CNN）放到这个配置中，它们都被Varnish缓存了。

当我将我的站点 IP 地址之一放入 Varnish 时，我从 Litespeed 服务器收到 404 错误 - 这表明它正在连接到服务器，但显然没有选择正确的站点来显示 Varnish。我在 Litespeed 服务器上有几个域，每个域都有自己的 IP 地址。直接 URL 也是如此。

我猜这是 Litespeed 配置的问题 - 但我们将不胜感激。

作为参考，我正在使用 PageCache 的 VCL 配置文件，它是 Varnish 的 Magento 模块。

贾斯汀

```
# default backend definition.  Set this to point to your content server.
backend default {
  .host = "xxx.xxx.xxx.xxx";
  .port = "80";
}

# admin backend with longer timeout.
backend admin {
  .host = "xxx.xxx.xxx.xxx";
  .port = "80";
  .first_byte_timeout = 18000s;
  .between_bytes_timeout = 18000s;
}

# add your Magento server IP to allow purges from the backend
acl purge {
  "localhost";
  "127.0.0.1";
}

sub vcl_recv {
if (req.restarts == 0) {
    if (req.http.x-forwarded-for) {
        set req.http.X-Forwarded-For =
        req.http.X-Forwarded-For + ", " + client.ip;
    } else {
        set req.http.X-Forwarded-For = client.ip;
    }
}

if (req.request != "GET" &&
  req.request != "HEAD" &&
  req.request != "PUT" &&
  req.request != "POST" &&
  req.request != "TRACE" &&
  req.request != "OPTIONS" &&
  req.request != "DELETE" &&
  req.request != "PURGE") {
    /* Non-RFC2616 or CONNECT which is weird. */
    return (pipe);
}

# purge request
if (req.request == "PURGE") {
    if (!client.ip ~ purge) {
        error 405 "Not allowed.";
    }
    ban("obj.http.X-Purge-Host ~ " + req.http.X-Purge-Host + " && obj.http.X-Purge-URL ~ " + req.http.X-Purge-Regex + " && obj.http.Content-Type ~ " + req.http.X-Purge-Content-Type);
    error 200 "Purged.";
}

# switch to admin backend configuration
if (req.http.cookie ~ "adminhtml=") {
    set req.backend = admin;
}

# we only deal with GET and HEAD by default    
if (req.request != "GET" && req.request != "HEAD") {
    return (pass);
}

# normalize url in case of leading HTTP scheme and domain
set req.url = regsub(req.url, "^http[s]?://[^/]+", "");

# static files are always cacheable. remove SSL flag and cookie
if (req.url ~ "^/(media|js|skin)/.*\.(png|jpg|jpeg|gif|css|js|swf|ico)$") {
    unset req.http.Https;
    unset req.http.Cookie;
}

# not cacheable by default
if (req.http.Authorization || req.http.Https) {
    return (pass);
}

# do not cache any page from
# - index files
# - ...
if (req.url ~ "^/(index)") {
    return (pass);
}

# as soon as we have a NO_CACHE cookie pass request
if (req.http.cookie ~ "NO_CACHE=") {
    return (pass);
}

# normalize Aceept-Encoding header
# http://varnish.projects.linpro.no/wiki/FAQ/Compression
if (req.http.Accept-Encoding) {
    if (req.url ~ "\.(jpg|png|gif|gz|tgz|bz2|tbz|mp3|ogg|swf|flv)$") {
        # No point in compressing these
        remove req.http.Accept-Encoding;
    } elsif (req.http.Accept-Encoding ~ "gzip") {
        set req.http.Accept-Encoding = "gzip";
    } elsif (req.http.Accept-Encoding ~ "deflate" && req.http.user-agent !~ "MSIE") {
        set req.http.Accept-Encoding = "deflate";
    } else {
        # unkown algorithm
        remove req.http.Accept-Encoding;
    }
}

# remove Google gclid parameters
set req.url = regsuball(req.url,"\?gclid=[^&]+$",""); # strips when QS = "?gclid=AAA"
set req.url = regsuball(req.url,"\?gclid=[^&]+&","?"); # strips when QS = "?gclid=AAA&foo=bar"
set req.url = regsuball(req.url,"&gclid=[^&]+",""); # strips when QS = "?foo=bar&gclid=AAA" or QS = "?foo=bar&gclid=AAA&bar=baz"

return (lookup);
}

sub vcl_hash {
hash_data(req.url);
if (req.http.host) {
    hash_data(req.http.host);
} else {
    hash_data(server.ip);
}
if (!(req.url ~ "^/(media|js|skin)/.*\.(png|jpg|jpeg|gif|css|js|swf|ico)$")) {
    call design_exception;
}
return (hash);
}

sub vcl_fetch {
if (beresp.status == 500) {
   set beresp.saintmode = 10s;
   return (restart);
}
set beresp.grace = 5m;

# add ban-lurker tags to object
set beresp.http.X-Purge-URL = req.url;
set beresp.http.X-Purge-Host = req.http.host;

if (beresp.status == 200 || beresp.status == 301 || beresp.status == 404) {
    if (beresp.http.Content-Type ~ "text/html" || beresp.http.Content-Type ~ "text/xml")     {
        if ((beresp.http.Set-Cookie ~ "NO_CACHE=") || (beresp.ttl < 1s)) {
            set beresp.ttl = 0s;
            return (hit_for_pass);
        }

        # marker for vcl_deliver to reset Age:
        set beresp.http.magicmarker = "1";

        # Don't cache cookies
        unset beresp.http.set-cookie;
    } else {
        # set default TTL value for static content
        set beresp.ttl = 4h;
    }
    return (deliver);
}

return (hit_for_pass);
}

sub vcl_deliver {
# debug info
if (resp.http.X-Cache-Debug) {
    if (obj.hits > 0) {
        set resp.http.X-Cache = "HIT";
        set resp.http.X-Cache-Hits = obj.hits;
    } else {
       set resp.http.X-Cache = "MISS";
    }
    set resp.http.X-Cache-Expires = resp.http.Expires;
} else {
    # remove Varnish/proxy header
    remove resp.http.X-Varnish;
    remove resp.http.Via;
    remove resp.http.Age;
    remove resp.http.X-Purge-URL;
    remove resp.http.X-Purge-Host;
}

if (resp.http.magicmarker) {
    # Remove the magic marker
    unset resp.http.magicmarker;

    set resp.http.Cache-Control = "no-store, no-cache, must-revalidate, post-check=0, pre-check=0";
    set resp.http.Pragma = "no-cache";
    set resp.http.Expires = "Mon, 31 Mar 2008 10:00:00 GMT";
    set resp.http.Age = "0";
}
}

sub design_exception {
} 
```

和...

```
START=yes
NFILES=131072
MEMLOCK=82000
INSTANCE=$(uname -n)

## Alternative 2, Configuration with VCL
#
# Listen on port 6080, administration on localhost:6082, and forward to
# one content server selected by the vcl file, based on the request.  Use a 1GB
# fixed-size cache file.

DAEMON_OPTS="-a :80 \
         -T localhost:6082 \
         -f /etc/varnish/default.vcl \
         -S /etc/varnish/secret \
         -s malloc,256m" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:30:08.987

你的 Varnish 服务器绑定到哪个端口？Litespeed 使用什么端口？

如果您可以在此处发布您的配置文件为您提供进一步的建议，那将会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:27:38.630

这就是我需要的！[使用 Varnish 配置多个站点](https://stackoverflow.com/questions/3334023/configure-multiple-sites-with-varnish)

我需要将虚拟主机名放入配置文件中。遵循本指南并让它立即工作！

# ms-access - 使用参数的存储过程

> ID：11436061
> 
> 赞同：2
> 
> 时间：2012-07-11T15:26:32.793
> 
> 标签：ms-access, stored-procedures, vba

下面的代码返回一个带有硬值编码的存储过程。我需要允许 74 更改为从组合框中选择的任何内容。任何帮助是极大的赞赏。我在 Access 中使用直通查询。

```
Private Sub ok_Click()
    Dim objConnection As New ADODB.Connection    
    Dim objCom As ADODB.Command
    Dim provStr As String

    Set objCom = New ADODB.Command

    objConnection.Provider = "sqloledb"

    provStr = "Data Source=**;" & "Initial Catalog=IKB_QA;User Id=**;Password=**;"

    objConnection.Open provStr

    With objCom
        .ActiveConnection = objConnection
        .CommandText = "dbo.ix_spc_planogram_match 74"
        .CommandType = adCmdStoredProc

        .Execute
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:24:36.623

您可以使用命令对象的参数字段来获得更简洁的方法：

```
With objCom          
    .ActiveConnection = objConnection          
    .CommandText = "dbo.ix_spc_planogram_match"          
    .CommandType = adCmdStoredProc            

    .Parameters.Refresh
    .Parameters(1).Value = ComboBox1.Value

    .Execute      
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:21:08.060

以下代码从表单中获取参数并执行存储过程。

```
Dim Cmd1 As ADODB.Command
Dim lngRecordsAffected As Long
Dim rs1 As ADODB.Recordset
Dim intRecordCount As Integer
'-----
Dim cnnTemp As ADODB.Connection
Set cnnTemp = New ADODB.Connection
cnnTemp.ConnectionString = "DRIVER=SQL Server;SERVER=***;" & _
"Trusted_Connection=No;UID=***;PWD=***;" & _
"Initial Catalog=IKB_QA;"
cnnTemp.ConnectionTimeout = 400
'Open Connection
cnnTemp.Open
Set Cmd1 = New ADODB.Command
Cmd1.ActiveConnection = cnnTemp

'---

With Cmd1
Dim localv As Integer
Dim inputv

localv = [Forms]![start]![Selection]![cat_code]
.CommandText = "dbo.ix_spc_planogram_match " & inputv
.CommandType = adCmdStoredProc
Set inputv = Cmd1.CreateParameter("@catcode", 3, 1, 10000, localv)
Cmd1.Parameters.Append inputv
Set rs1 = Nothing
Set rs1 = Cmd1.Execute

localv = 0
Do While Not rs1.EOF

Debug.Print rs1.Fields.Item("POG_DBKEY").Value = "POG_DBKEY"
Debug.Print rs1.Fields.Item("COMP_POG_DBKEY").Value = "COMP_POG_DBKEY"
Debug.Print rs1.Fields.Item("CURR_SKU_CNT").Value = "CURR_SKU_CNT"
Debug.Print rs1.Fields.Item("COMP_SKU_CNT").Value = "COMP_SKU_CNT"
Debug.Print rs1.Fields.Item("SKU_TOTAL").Value = "SKU_TOTAL"
Debug.Print rs1.Fields.Item("MATCHD").Value = "MATCHD"
localv = localv + 1

rs1.MoveNext
Loop
localv = localv

rs1.Close
Set rs1 = Nothing
Set rs1 = Nothing

End With
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:32:36.157

你可以试试这个串联：

替换您的陈述：

```
.CommandText = "dbo.ix_spc_planogram_match 74" 
```

和：

```
.CommandText = "dbo.ix_spc_planogram_match " & yourComboBox.Text 
```

假设组合框名称是 yourComboBox

# c - C 枚举：未知类型名称

> ID：11436063
> 
> 赞同：6
> 
> 时间：2012-07-11T15:26:34.380
> 
> 标签：c, enums

我有这个简单的代码：

```
#include <stdio.h>
#include <time.h>

int main(){
    enum Days { asd=0,Lun,Mar,Mer,Gio,Ven,Sab,Dom };
    Days TheDay;
    time_t ltime;
    struct tm *Tm;

    ltime=time(NULL);
    Tm=localtime(&ltime);
    int j = Tm->tm_wday;
    TheDay = Days(j);

    printf("[%d] %d/%d/%d, %d:%d:%d\n",
            TheDay, /* Mon - Sun */
            Tm->tm_mday,
            Tm->tm_mon,
            Tm->tm_year+1900,
            Tm->tm_hour,
            Tm->tm_min,
            Tm->tm_sec);
} 
```

我不明白为什么会出现此错误：

> try.c:6:5: 错误：未知类型名称“天”</p>

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T15:27:37.513

这不是 C：

```
enum Days { asd=0,Lun,Mar,Mer,Gio,Ven,Sab,Dom };
Days TheDay; 
```

新类型的名称是`enum Days`而不是`Days`（这是枚举标记）。

你必须使用：

```
enum Days { asd=0,Lun,Mar,Mer,Gio,Ven,Sab,Dom };
enum Days TheDay; 
```

或使用 typedef：

```
typedef enum Days Days; 
```

能够`Days`用作类型名称。

# php - 无法计算表列中 NULL 单元的数量

> ID：11436067
> 
> 赞同：0
> 
> 时间：2012-07-11T15:26:41.447
> 
> 标签：php, mysql, sql

我有一个表`user`，`data`其中大部分字段为空，因此它基本上为 NULL。我想计算 no: 该列中存在数据的行。

一种方法：所以我想我可以计算 no: NULL 字段并从总行中减去。

另一种方式：我可以直接计算占用的字段（但我显然不知道）。所以我为第一种方法写了这个....但它给出的计数是 0。它无法识别 NULL 或其他什么。

```
$sql = "SELECT COUNT(CASE WHEN data = '' THEN 1 END) AS null_count, FROM users";
$real= mysql_query($sql);
while($row = mysql_fetch_assoc($real)) {
            echo "null Count: {$row['null_count']}". '<br />';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:35:39.760

```
SELECT SUM(IF(data IS NULL, 1, 0)) AS null_count FROM users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:28:14.330

您必须使用`IS NULL`因为`NULL`不等于空字符串。甚至不等于`NULL`！

```
SELECT  COUNT(CASE WHEN data IS_NULL THEN 1 END) AS null_count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:28:21.073

要找到非空的这样做：

```
SELECT
   COUNT(CASE WHEN len(data) > 0 THEN 1 else 0 END) AS not_empty_or_null_count,
FROM
    users 
```

如果您不想计算所有空格的项目，您可以在 len() 之前对数据调用 trunc()

类似的问题（对于 SQL Server）

[查找未使用的字段（全部为空）](https://stackoverflow.com/questions/11403665/sql-server-2005-find-fields-that-arent-used-have-all-nulls/11403688#11403688)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:29:41.983

任何理由

```
select count(field) from table where field is not null; 
```

不够？

# zend-framework - Zend 中的 URL 路由

> ID：11436068
> 
> 赞同：0
> 
> 时间：2012-07-11T15:26:44.210
> 
> 标签：zend-framework

所以，我刚刚开始使用 Zend，将我们公司内部的 CMS 转移到新的框架上，如果您看到现有代码，我相信您很快就会同意最好的方式来废弃整个事情并重新开始。

所以，这正是我正在做的。它相对较小，因此随着项目的进行，它不应该花费太长时间。无论如何，要直截了当：

**Zend 中的路由究竟是如何工作的？**

我创建了一个项目和两个模块，一个名为“default”，一个名为“admin”。如果您还没有猜到，我希望默认模块是站点的前端，而管理模块是站点的后端。当我导航到 ~/public/ 时，我可以看到“欢迎使用 Zend Framework”屏幕，但是当我导航到 ~/public/admin 时，我只得到 404。

为了让这个工作，我缺少什么？另外，我如何将 ~/ 映射到 ~/public/ 其中 ~/ 是域？

作为说明，我使用命令行上的 zf 工具使用以下命令在每个模块和索引控制器中制作了模块和索引控制器：

```
zf create Module default
zf create controller Index -m default
zf create Module admin
zf create controller Index -m admin 
```

感谢并提前为您提供任何帮助。

担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:32:57.970

'public' 不应出现在您的网址中。更改您的虚拟主机，使文档根目录指向公用文件夹，而不是应用程序根文件夹，这可能会解决您的问题。如果没有，请确保您有一个包含 mod_rewrite 规则的 .htaccess 文件，如手册中所述，但如果您使用命令行工具生成项目，则该部分可能没问题。

# mongodb - Mongoose 是否提供对 pre('save') 中属性的先前值的访问？

> ID：11436071
> 
> 赞同：26
> 
> 时间：2012-07-11T15:27:05.557
> 
> 标签：mongodb, mongoose

我想在`pre('save')`中间件中将属性的新/传入值与该属性的先前值（当前保存在数据库中的值）进行比较。

Mongoose 是否提供了执行此操作的工具？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-05-15T09:11:29.617

接受的答案非常有效。也可以使用另一种语法，将 setter 与 Schema 定义内联：

```
var Person = new mongoose.Schema({
  name: {
    type: String,
    set: function(name) {
      this._previousName = this.name;
      return name;
    }
});

Person.pre('save', function (next) {
  var previousName = this._previousName;
  if(someCondition) {
    ...
  }
  next();
}); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-18T17:19:06.333

Mongoose 允许您配置进行比较的自定义设置器。pre('save') 本身不会给你你需要的东西，但一起：

```
schema.path('name').set(function (newVal) {
  var originalVal = this.name;
  if (someThing) {
    this._customState = true;
  }
});
schema.pre('save', function (next) {
  if (this._customState) {
    ...
  }
  next();
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-15T04:26:26.110

我一直在寻找一种解决方案来检测多个领域中任何一个领域的变化。由于看起来您无法为完整架构创建设置器，因此我使用了虚拟属性。我只在几个地方更新记录，所以对于这种情况，这是一个相当有效的解决方案：

```
Person.virtual('previousDoc').get(function() {
  return this._previousDoc;
}).set(function(value) {
    this._previousDoc = value;
}); 
```

假设您的 Person 移动了，您需要更新他的地址：

```
const person = await Person.findOne({firstName: "John", lastName: "Doe"});
person.previousDoc = person.toObject();  // create a deep copy of the previous doc
person.address = "123 Stack Road";
person.city = "Overflow";
person.state = "CA";
person.save(); 
```

然后在您的预挂钩中，您只需要引用 _previousDoc 的属性，例如：

```
// fallback to empty object in case you don't always want to check the previous state
const previous = this._previousDoc || {};

if (this.address !== previous.address) {
    // do something
}

// you could also assign custom properties to _previousDoc that are not in your schema to allow further customization
if (previous.userAddressChange) {

} else if (previous.adminAddressChange) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-19T14:41:59.760

老实说，我尝试了此处发布的解决方案，但我必须创建一个函数，将旧值存储在数组中，保存值，然后查看差异。

```
// Stores all of the old values of the instance into oldValues
const oldValues = {};
for (let key of Object.keys(input)) {
    if (self[key] != undefined) {
        oldValues[key] = self[key].toString();
    }

    // Saves the input values to the instance
    self[key] = input[key];
}

yield self.save();

for (let key of Object.keys(newValues)) {
    if (oldValues[key] != newValues[key]) {
       // Do what you need to do
    }
} 
```

# f# - 抱怨值不是函数的编译错误

> ID：11436073
> 
> 赞同：0
> 
> 时间：2012-07-11T15:27:05.783
> 
> 标签：f#, compiler-errors, linqpad

我正在尝试在 F# 中试验我们需要的一种实用工具，其中我们想要在 xml 文件的文件夹中搜索并查找特定的标签。如果找到，则插入另一个类似的标签。最后，输出已插入此类附加标签的所有文件名。但是我得到一个编译错误，我无法理解。

```
let configFile = 
    Directory.GetFiles(Path.Combine("rootdir", "relativepath"), @"*.xml")    
    |> Seq.map(fun configFileName -> 
                let xmlNavigator = XPathDocument(configFileName).CreateNavigator()
                let node = xmlNavigator.SelectSingleNode(@"Product/ABc[@type='xyz']")
                match node with
                | null -> "not configuration present"
                | _ -> 
                    let nodeAppender() = node.InsertAfter("<Risk type=""abc1"" methodology=""xyz1""/>")
                    let parentNode = node.SelectAncestors(XPathNodeType.Root, false)
                    parentNode.Current.OuterXml)        
    |> Seq.iter (printfn "%s") 
```

编译错误如下：

```
This value is not a function and cannot be applied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:38:19.440

您的字符串转义不正确。它应该是：

```
node.InsertAfter("<Risk type=\"abc1\" methodology=\"xyz1\"/>") 
```

编辑：显然我在布赖恩发布他的答案时输入了这个。转义每个引号字符或按`@`原样添加前缀都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:36:26.413

这将有助于指出错误位置在哪一行/哪一列。

乍一看，在 nodeAppender 中，您似乎忽略`@`了字符串文字，这意味着它是连续五个字符串（而不是一个带有转义引号的字符串），这可能是错误的原因。

# c# - 如何将 if、else if 逻辑转换为三元运算符？

> ID：11436076
> 
> 赞同：15
> 
> 时间：2012-07-11T15:27:21.803
> 
> 标签：c#, ternary-operator

我只是想知道这是否可能，因为我开始使用三元运算符来减少代码行并且我很喜欢它。

```
if (x==y)
{
    z += x;
} else if (x==z)
{
    z += y;
} else {
   z += 1;
} 
```

如果只有一个这样的 if 语句，我现在可以这样做：

```
z = x == y ? z += x : z += 1; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-11T15:30:17.357

它会是这样的：

```
z =
  x == y ? z + x :
  x == z ? z + y :
  z + 1; 
```

如果你`z += x`用作操作数，它最终会做`z = (z += x)`. 虽然它在这种特殊情况下有效，因为表达式的结果`z += x`是 的最终值`z`，它在其他情况下可能不起作用。

但是，由于所有操作都有`z +=`共同点，您可以这样做：

```
z +=
  x == y ? x :
  x == z ? y :
  1; 
```

不过要小心使用。代码往往越简单，可读性和可维护性越高，嵌套条件操作的可读性也不是很高。此外，仅当您有一个*表达式*作为条件操作的结果时才使用它，它不是`if`语句的直接替换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T15:28:45.213

您可以使用

```
z += x == y ? x : x == z ? y : 1; 
```

但老实说，这并没有比你以前的更具可读性。您可以通过添加括号使其更清晰：

```
z += x == y ? x : (x == z ? y : 1); 
```

但通常我会远离嵌套的条件运算符，除非在打高尔夫球时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T15:31:26.613

四行代码，最易读的，IMO。这里不需要三元运算符：

```
if (x == y || x == z)
    z += y;
else 
   z++; 
```

如果我必须使用三元来编写它，我会这样做：

```
z += (x == y || x == z) ? y : 1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T15:34:01.910

你应该使用这样的括号来做到这一点：

```
(x==y)?(z+=x):((x==z)?(z+=y):(z+=1)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T11:12:40.007

这很容易继续使用三元运算符而不是 if else if 条件，即使在“：”之后也需要继续相同。下面是示例。

```
var result = a ? x : b ? y : z; 
```

[参考示例](http://www.fourthbottle.com/2017/04/if-else-if-condition-using-operator-in-csharp.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T15:32:12.370

要将`z`计算变成一行，我会这样做：

```
public int GetZBasedOnXY(int z, int x, int y)
{
    // Chose this solution, but any can go in here and work.
    if (x == y || x == z)
        return z + y;
    else 
        return z + 1;
} 
```

然后：

```
z = GetZBasedOnXY(z, x, y); 
```

更具可读性，如果命名好并且方法具有单元测试覆盖率，那就更好了。

# ruby-on-rails - Rails Paperclip 自定义文件路径

> ID：11436077
> 
> 赞同：0
> 
> 时间：2012-07-11T15:27:24.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，所以我有这个模型...

```
class Asset < ActiveRecord::Base
  attr_accessible :asset_file_name, :lesson_id, :attachment

  has_attached_file :attachment,
    :url => "/attachments/:id/:basename.:extension",
    :path => ":rails_root/public/attachments/:id/:basename.:extension"

  validates_presence_of :asset_file_name
  validates_attachment_presence :attachment
end 
```

（也有一个模型`Lesson`）

我想将附件保存到`/attachments/:lesson_id/:basename.:extension`. 这不是`:id`资产的，而是 :lesson_id。当我这样做时，目录实际上只是命名为`:lesson_id`. 有人知道如何获得实际的`lesson_id`吗？我也试过了`@asset.lesson_id`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:33:08.707

您必须在回形针中添加自定义插值器。这最好在初始化程序中或与模型分离的地方完成

```
Paperclip.interpolates('lesson_id') do |attachment, style|
  attachment.instance.lesson_id
end 
```

之后，您`:lesson_id`将成为实际的`object.lesson_id`

# java - 无法在 ErrorCollector 类 Junit 中给出 checkThat 方法的原因

> ID：11436083
> 
> 赞同：1
> 
> 时间：2012-07-11T15:27:38.183
> 
> 标签：java, junit4

当我尝试给出原因以防匹配器与值不匹配时，我会遇到编译错误。

```
@Rule
public ErrorCollector collector = new ErrorCollector();

@Test
public void textShouldMatch(){
    String expected ="Lebron James";
    String result ="Kobe Bryant";
    collector.checkThat("Doesn't match",result, is(expected));
    } 
```

javadoc 具有以下用于 checkThat 方法的语法：

```
checkThat

public <T> void checkThat(String reason,T value, Matcher<T> matcher) 
```

如果匹配器与值不匹配，则将具有给定原因的失败添加到表中。继续执行，但如果匹配失败，测试将在最后失败。

# visual-studio-2010 - 使用 xUnit 创建 ASP.NET MVC 3 项目时出错：找不到 xunit.targets

> ID：11436084
> 
> 赞同：0
> 
> 时间：2012-07-11T15:27:40.917
> 
> 标签：visual-studio-2010, xunit, xunit.net

我使用 xUnit.net 创建了一个 ASP.NET MVC 3 项目和一个单元测试项目。

[新项目 http://img841.imageshack.us/img841/38/newprojectsnt.png](http://img841.imageshack.us/img841/38/newprojectsnt.png)

但是我遇到了这样的错误，并且没有创建单元测试项目。

[错误 http://img15.imageshack.us/img15/4725/errordp.png](http://img15.imageshack.us/img15/4725/errordp.png)

有谁知道如何修理它？我在 Windows 8 Release Preview 上使用 Visual Studio 2010 Professional SP1。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:58:17.180

我在使用 1.9.1 版（2012 年 7 月 4 日发布）时遇到了同样的问题。我卸载了它并安装了 1.9 版（2012 年 7 月 4 日发布），现在它工作正常。我正在使用 Visual Studio 2010 Ultimate SP1 和带有 SP1 的 Windows 7 Ultimate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:11:04.423

对不起这个错误。无论如何，我们计划从 2.0 中删除模板支持，所以这个错误将会消失。

展望未来，我们建议人们只创建类库，并通过 NuGet 引入 xunit.dll。

# c# - 如何在列表中映射 ID？

> ID：11436096
> 
> 赞同：0
> 
> 时间：2012-07-11T15:28:34.757
> 
> 标签：c#, .net-2.0

```
Dictionary<int, string> lstSrc = new Dictionary<int, string>();
            Dictionary<int, string> lstDest = new Dictionary<int, string>();

        lstSrc.Add(1, "All");
        lstSrc.Add(2, "Weekday");
        lstSrc.Add(3, "WeekEnd");

        lstDest.Add(1, "All");
        lstDest.Add(2, "X1");
        lstDest.Add(3, "X2");
        lstDest.Add(4, "Weekday");
        lstDest.Add(5, "WeekEnd"); 
```

仅在源和目标中的名称匹配时进行比较

```
 var matchingItems = lstDest
                    .Where(l2 => lstSrc.Any(l1 => l1.Value.Equals(l2.Value))).ToList();
                matchingItems.AddRange(lstDest.Except(matchingItems)); 
```

此查询给出的结果如附图所示如何在不使用 LINQ 的情况下获得该结果？

我怎样才能做到这一点？

```
 [1]: http://i.stack.imgur.com/FLicZ.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:45:08.340

要获取匹配项，您可以使用如下查询：

```
var matchingItems = List2
    .Where(l2 => List1.Any(l1 => l1.TimeGroupName.Equals(l2.TimeGroupName));
matchingItems.AddRange(List2.Except(matchingItems))); 
```

已编辑：不使用 Linq 等效：（很容易忘记 Linq 为您节省了多少样板代码！）

```
// Get the matching items
List<TIMEGROUPINFO> matchingItems = new List<TIMEGROUPINFO>();
foreach (TIMEGROUPINFO l1 in List1)
{
    foreach (TIMEGROUPINFO l2 in List2)
    {
       if (l1.TimeGroupName.Equals(l2.TimeGroupName))
       {
            matchingItems.Add(l1);
            continue;
       }
    }
 }

 // Append the items from List2 which aren't already in the list:
 foreach (TIMEGROUPINFO l2 in List2)
 {
     bool exists = false;
     foreach (TIMEGROUPINFO match in matchingItems)
     {
         if (match.TimeGroupName.Equals(l2.TimeGroupName))
         {
             // This item is already in the list.
             exists = true;
             break;
         }
     }

     if (exists = false)
         matchingItems.Add(l2);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:41:06.067

我了解您想根据列表 1 对列表 2 执行查询。Linq 对此非常有用。

所以，如果你写了类似的东西

```
//List1Element is a single element in the first list.  
List1Element = List1[i];

List2.Where(l2 => l2.TimeGroupName == List1Element.TimeGroupName).ToList(); 
```

这可能会完成我认为你想要完成的事情。

如果您尝试一次匹配整个 List1，您可以遍历所有 list1 元素，或者您可以查看[Linq Join](http://code.msdn.microsoft.com/LINQ-Join-Operators-dabef4e9)操作

# asp.net-mvc - 在 HttpModule 中创建后在 MVC4 中消失的 Cookie

> ID：11436102
> 
> 赞同：3
> 
> 时间：2012-07-11T15:28:54.193
> 
> 标签：asp.net-mvc, cookies, persistence, httpmodule, healthvault

我创建了一个模块来处理 Microsoft HealthVault 的身份验证。在 BeginRequest 事件处理程序中，我正在检查 authToken，当它收到时，我正在创建一个新的 cookie 来保存用户的信息，以便稍后在控制器中使用。

我丢了饼干，但也许我找错地方了。

事件处理程序将 HttpApplication 作为唯一参数，因此我将 cookie 添加到 application.Response.Cookies 集合中。问题归结为：这个 HttpApplication 实例是单例吗？和 System.Web.HttpContext.Current.ApplicationInstance 一样吗？

不过，也许在生命周期的这一点设置的 cookie 稍后会被清除。那是我做错了吗？

任何帮助是极大的赞赏。

**更新**

自从我提出这个问题以来，我已经改变了一些事情。我现在在我的 HttpModule 中处理 PreRequestEventHandler。我让 HealthVault 的 WebApplicationUtilities 对象创建和存储 cookie，尽管从概念上来说并没有真正改变。*创建 cookie 或在创建 cookie 后第*一次读取它时我没有任何问题。

这是我在 HttpModule 事件处理程序中创建 cookie 的代码：

```
static void PreRequestHandlerExecute(Object sender, EventArgs e)
{
    HttpContext ctx = System.Web.HttpContext.Current;
        string authToken = ctx.Request.Params["wctoken"];
        if (!String.IsNullOrEmpty(authToken))
        {
            personInfo = WebApplicationUtilities.GetPersonInfo(authToken);
            WebApplicationUtilities.SavePersonInfoToCookie(ctx, personInfo);

            NameValueCollection query = HttpUtility.ParseQueryString(ctx.Request.Url.Query);
            query.Remove("wctoken");
            query.Remove("suggestedtokenttl");

            UriBuilder newUrl = new UriBuilder(ctx.Request.Url);
            newUrl.Query = query.ToString();
            //app.Response.Redirect(newUrl.Uri.OriginalString);
        }
} 
```

请注意，重定向已被注释。在第一个请求（经过身份验证后）创建 cookie，然后我的默认操作能够使用 LoadPersonInfoFromCookie() 读取它。我发现做重定向导致cookie没有被发送到客户端。

我还注意到，在后续请求中，cookie 不存在于 Request.Cookies 集合中，因此当 LoadPersonInfoFromCookie() 运行时，我最终得到一个空值。奇怪的是，我可以在 Response 对象中看到 cookie，但内容是空的。

这是操作代码，只是因为...

```
public HttpContext Context
{
    get { return System.Web.HttpContext.Current; }
}

public ActionResult Dashboard()
    {
        try
        {
            HealthVaultAccountModel model = new HealthVaultAccountModel();
            PersonInfo personInfo = WebApplicationUtilities.LoadPersonInfoFromCookie(Context);
            if (personInfo != null)
                model.PersonName = personInfo.Name;
            return View(model);
        }
        catch (Exception ex)
        {
            return RedirectToAction("Index", "Error");
        }
    } 
```

**更新**

这是来自即时窗口的 cookie。我什至将过期时间延长了 30 天。

**在创建后的默认操作中**

```
Context.Request.Cookies["_wcpage"]
{System.Web.HttpCookie}
    Domain: null
    Expires: {8/13/2012 5:24:02 PM}
    HasKeys: true
    HttpOnly: true
    Name: "_wcpage"
    Path: "/"
    Secure: true
    Shareable: false
    Value: "p=1:1234-pVTbctowEP0V..."
    Values: {p=1%3a1234-pVTbctowEP0V...} 
```

**在对下一个请求的操作中**

```
Context.Request.Cookies["_wcpage"]
null 
```

**有趣的是，cookie 是在响应对象中定义的，但是值消失了，并且过期时间被重置。**

```
Context.Response.Cookies["_wcpage"]
{System.Web.HttpCookie}
    Domain: null
    Expires: {1/1/0001 12:00:00 AM}
    HasKeys: false
    HttpOnly: false
    Name: "_wcpage"
    Path: "/"
    Secure: false
    Shareable: false
    Value: ""
    Values: {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:14:16.650

你是如何创建/获取 cookie 的？类上的`SavePersonInfoToCookie`and `LoadPersonInfoFromCookie`方法`WebApplicationUtilities`将为您完成。

开始请求：

```
// given an authToken from the querystring/post values
var personInfo = WebApplicationUtilities.GetPersonInfo(authToken);
WebApplicationUtilities.SavePersonInfoToCookie(application.Context, personInfo); 
```

控制器：

```
var personInfo = WebApplicationUtilities.LoadPersonInfoFromCookie(HttpContext); 
```

# python - 使用 Python 和 R 创建在线预测工具的有用软件包（提供示例）

> ID：11436103
> 
> 赞同：0
> 
> 时间：2012-07-11T15:28:54.253
> 
> 标签：python, r, statistics, tkinter, rpy2

我正在建立一个 Cox PH 统计模型来预测乳腺癌患者的复发概率。我想为患者或医生创建一个在线界面，让他们可以输入相关的患者特征，并计算复发的概率。这是一个完美的例子，尽管是针对前列腺癌： http: [//nomograms.mskcc.org/Prostate/PostRadicalProstatectomy.aspx](http://nomograms.mskcc.org/Prostate/PostRadicalProstatectomy.aspx)

我的基本计划是使用 python 创建工具，并根据用户的输入和我之前安装的 Cox PH 模型使用 R 计算概率。该工具需要下拉框和用户输入的数值。问题是我从来没有用 Python 做过任何网络编程或 GUI 编程。我的经验是 Python 的科学编程方面（例如 Pylab 等）。我的问题是：

1.  我需要哪些与 Python 和 R 相关的软件包？从我所做的一些谷歌搜索来看，RPy 和 Tkinter 似乎是明确的选择。
2.  我如何存储统计模型，这样工具就不必在每次有人使用它时都从我的数据集中计算模型？对于 Cox PH 模型，这将需要存储基线危害和模型公式。
3.  您的经验中有什么有用的提示吗？

我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:00:20.193

除了使用`R`through或等效程序之外， [statsmodels](https://pypi.python.org/pypi/statsmodels)（以前的）python 库`RPy`中还有许多生存分析例程。不过，它们在“沙盒”包中，这意味着它们现在不应该准备好投入生产。`sicpy.statsmodel`

[例如，您在此处](https://github.com/statsmodels/statsmodels/blob/master/statsmodels/sandbox/cox.py)编码了比例风险的 Cox 模型。

另请参阅CrossValidated 上的[这个问题](https://stats.stackexchange.com/questions/1736/survival-analysis-tools-in-python/62570#62570)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:07:57.593

基本上你需要学习 WebDev，这是一个相当庞大的话题。如果你真的想把它变成一个 web 应用程序，那么 Django 是最容易开始的地方之一，而且它的文档也很精彩。所以基本上我的答案是：

[http://djangobook.com/en/2.0/](http://djangobook.com/en/2.0/)

开始阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-13T15:14:36.940

我建议在 R 中安装您的模型并轻松使用“DynNom”包（“DNbuilder”功能）。它将为您的预测模型创建这样一个交互式工具，您可以轻松地将其作为网页共享，而无需任何 Web 编程或 GUI 编程技能。这将是拟合模型后的一行代码，例如：

```
fit1 <- coxph(Surv(time, status) ~ age + sex + ph.ecog, data = lung) 
library(DynNom)
DNbuilder(fit1) 
```

您可以轻松地在[http://shinyapps.io/](http://shinyapps.io/)的帐户上共享它，或将其托管在您的网站上（需要更多努力）。

# iphone - 我正在制作一个应用程序，涉及将数据保存到文本字段并将其加载回来。它在模拟器中工作，但不在我的实际 iPhone 上。为什么这样？

> ID：11436105
> 
> 赞同：0
> 
> 时间：2012-07-11T15:28:56.780
> 
> 标签：iphone, xcode, cocoa, ios-simulator, saving-data

在程序中，我使用此方法创建一个可以保存的文件：

```
-(NSString*) saveFilePath{
NSString* path = [NSString stringWithFormat:@"%@%@",
                  [[NSBundle mainBundle] resourcePath],
                  @"savingfile.plist"];
return path;} 
```

然后我使用一个按钮来启动将数据放入文件的过程（我首先将它们全部放入一个数组中，这样会更容易。）：

```
- (IBAction)save
{

NSMutableArray *myArray = [[NSMutableArray alloc] init];
[myArray addObject:name.text];
[myArray addObject:position.text];
[myArray addObject:cell.text];
[myArray addObject:office.text];
[myArray addObject:company.text];
[myArray writeToFile:[self saveFilePath] atomically:YES];

} 
```

最后，我将信息加载回 - (void)viewDidAppear 方法中的文本字段中。

```
- (void)viewDidAppear:(BOOL)animated
{
NSMutableArray* myArray = [NSMutableArray arrayWithContentsOfFile:[self saveFilePath]];
name.text = [myArray objectAtIndex:0];
position.text = [myArray objectAtIndex:1];
cell.text = [myArray objectAtIndex:2];
office.text = [myArray objectAtIndex:3];
company.text = [myArray objectAtIndex:4];
} 
```

出于某种原因，在模拟器上它在模拟器上完美运行，但当我尝试在我的物理 iPhone 上运行时根本无法运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:44:21.133

我认为您正在尝试保存到 iOS 上只读的位置。它可以在模拟器上运行，因为模拟器不会完全复制实际硬件上的沙盒环境。

而不是保存到`resourcesPath`您应该将文件保存到`Documents`目录（或缓存目录，如果合适的话）。

您可以获得文档目录的路径，如下所示：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

这里有更多关于这个问题的信息：[How to save file in an app of an app in Objective-c](https://stackoverflow.com/questions/8122912/how-to-save-file-in-resource-folder-of-an-app-in-objective-c)

# c++ - 如何在 C++ 中获取服务显示名称？

> ID：11436106
> 
> 赞同：0
> 
> 时间：2012-07-11T15:29:00.530
> 
> 标签：c++, winapi, visual-c++, windows-services

我正在尝试使用 c++ 获取正在运行的服务的显示名称。我试图使用 GetServiceDisplayName 函数，但它似乎不起作用，不知道为什么。

```
TTServiceBegin( const char *svcName, PFNSERVICE pfnService, bool *svc, PFNTERMINATE pfnTerm,
int flags, int argc, char *argv[], DWORD dynamiteThreadWaitTime )
{
SC_HANDLE serviceStatusHandle;
DWORD dwSizeNeeded = 0 ;
TCHAR* szKeyName = NULL ;

serviceStatusHandle=OpenSCManager(NULL, SERVICES_ACTIVE_DATABASE ,SC_MANAGER_ALL_ACCESS);

GetServiceDisplayName(serviceStatusHandle,svcName, NULL, &dwSizeNeeded);
if(dwSizeNeeded)
{
    szKeyName = new char[dwSizeNeeded+1];
    ZeroMemory(szKeyName,dwSizeNeeded+1);
    if(GetServiceDisplayName(serviceStatusHandle ,svcName,szKeyName,&dwSizeNeeded)!=0)
    {
        MessageBox(0,szKeyName,"Got the key name",0);
    }

} 
```

当我运行此代码时，我永远无法在调试器中看到 szKeyName 的值，它进入消息框的 if 块，但从不显示消息框。不知道为什么？

无论如何要让它工作以获取服务的显示名称或任何其他/更简单的方式来完成该任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:45:54.887

您需要使用 WTSSendMessage 而不是 MessageBox 来与活动会话进行交互。

```
WTS_SESSION_INFO* pSessionInfo = NULL;          
DWORD dwSessionsCount = 0;
if(WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1, &pSessionInfo, &dwSessionsCount))
{   
    for(int i=0; i<(int)dwSessionsCount; i++)
    {
        WTS_SESSION_INFO &si = pSessionInfo[i];
        if(si.State == WTSActive)
        {                                                       
            DWORD dwIdCurrentSession = si.SessionId;

            std::string strTitle = "Hello";
            std::string strMessage = "This is a message from the service";

            DWORD dwMsgBoxRetValue = 0;
            if(WTSSendMessage(
                WTS_CURRENT_SERVER_HANDLE,
                dwIdCurrentSession,
                (char*)strTitle.c_str(),
                strTitle.size(),
                (char*)strMessage.c_str(),
                strMessage.size(),
                MB_RETRYCANCEL | MB_ICONINFORMATION | MB_TOPMOST,
                60000,
                &dwMsgBoxRetValue,
                TRUE))
            {

                switch(dwMsgBoxRetValue)
                {
                    case IDTIMEOUT:
                        // Deal with TimeOut...
                        break;
                    case IDCANCEL:          
                        // Deal With Cancel....
                        break;
                }               
            }
            else
            {
                // Deal With Error
            }

            break;
        }
    }

    WTSFreeMemory(pSessionInfo);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:36:43.497

该消息框在 Windows Vista 和更高版本上将不可见，因为在单独的会话（[会话 0 隔离](http://msdn.microsoft.com/en-us/windows/hardware/gg463353.aspx)）中运行服务的更改无法访问桌面，因此消息框对您不可见，已记录在用户上。

在 Window XP 及更早版本上，您需要在服务属性对话框中勾选*登录*`Allow service to interact with desktop`选项卡下的复选框，以便您的服务显示消息框。

 *相反，您可以将服务名称写入文件或运行接受要查询的服务名称并让它查询并显示服务名称的用户应用程序（我刚刚尝试使用发布的代码，它可以正常工作，显示消息框）。*

# glassfish - 强制 Glassfish 绑定到网络接口

> ID：11436112
> 
> 赞同：2
> 
> 时间：2012-07-11T15:29:24.860
> 
> 标签：glassfish

我们在多宿主服务器上使用 Glassfish，我想强制 Glassfish 只使用一个界面。

我更新了 domain.xml

*   用 IP 地址替换每次出现的 0.0.0.0
*   在没有地址的情况下提到端口的任何地方`address=<IP>`都添加了
*   每个都`host=localhost`被替换为`host=<IP>`

启动 Glassfish 后，几个侦听器仍在侦听每个可用的 IP 地址：

*   3820：我试图指定一个地址，但该选项被忽略

    ```
     <iiop-listener port="3820" id="SSL" address="<IP>" security-enabled="true"> 
    ```

*   3920：同上

    ```
    <iiop-listener port="3920" id="SSL_MUTUALAUTH" address="127.0.0.1" security-enabled="true"> 
    ```

    没有效果

*   7776：不知道

下一个监听器使用一些动态生成的端口

*   53491
*   53495
*   53496
*   53497

现在我的问题：

*   有没有办法确保 Glassfish 将使用一个且仅一个网络接口？

*   如果这不能用 Glassfish 实现，那么 Linux 系统上是否有办法欺骗应用程序只看到一个界面？

# eclipse - 有没有办法在运行时从插件中添加 eclipse 中的快捷键？

> ID：11436121
> 
> 赞同：0
> 
> 时间：2012-07-11T15:29:48.797
> 
> 标签：eclipse, eclipse-plugin

我正在 eclipse 中开发一个插件。目前我们正在使用“org.eclipse.ui.bindings”扩展点来提供快捷键。但它是为 action 提供快捷键的静态选项。我们的用户在没有快捷键的情况下使用我的插件会遇到一些困难。是否有任何选项可以通过 eclipse 插件在运行时添加快捷键？

```
 <extension      
       point="org.eclipse.ui.commands">
       <category
             name="ZMedia Shortcuts Category"
             id="com.zmedia.viewer.commands.category">
       </category>

       <command
             name="Update Zmedia Deployable Instances"
             categoryId="com.zmedia.viewer.commands.category"
             id="com.zmedia.viewer.commands.UpdateZmediaDeployableInstances">
       </command>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="com.zmedia.viewer.handlers.UpdateZmediaDeployableInstances"
          commandId="com.zmedia.viewer.commands.UpdateZmediaDeployableInstances">
    </handler>
 </extension>
 <extension
       point="org.eclipse.ui.bindings">
    <key
        schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
        commandId="com.zmedia.viewer.commands.UpdateZmediaDeployableInstances"
        sequence="M1+M2+ESC">
    </key>      
 </extension> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:44:04.797

[扩展点描述](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_bindings.html)明确否认：

> API 信息： **没有用于定义绑定的公共 API**。为了尝试为用户实现稳定性，绑定仅通过扩展点定义。如果您是 RCP 应用程序，您应该能够在 WorkbenchAdvisor 中覆盖此行为。

# backbone.js - Backbone - isNew 属性设置为 false 的自举数据

> ID：11436122
> 
> 赞同：2
> 
> 时间：2012-07-11T15:29:48.857
> 
> 标签：backbone.js, bootstrapping

我正在使用主干并根据实践引导一些数据（http://documentcloud.github.com/backbone/#FAQ-bootstrap）。

但是，现在当我保存任何自举模型时，Backbone 会将模型视为服务器上不存在的模型（model.isNew === true，[http](http://backbonejs.org/#Model-isNew) ://backbonejs.org/#Model-isNew ），这反过来又调用 Backbone。与方法“create”而不是“update”同步。因此，调用的是 POST 而不是 PUT HTTP 方法。

如何将 isNew 设置为 false 的自举模型，即骨干网将它们视为服务器上存在的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:39:30.493

显然，model.isNew 取决于是否按照此处的说明设置了 id：http: [//backbonejs.org/#Model-isNew](http://backbonejs.org/#Model-isNew)。这意味着使用 id 集引导数据可以解决我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:53:28.227

我最近遇到了这个问题，我通过覆盖我的 Backbone 模型中的 parse()、initialize() 和 isNew() 函数克服了这个问题。

initialize() 函数将“loadedFromServer”属性初始化为 false。

```
 initialize: function () {
        this.loadedFromServer = false;
    }, 
```

parse() 函数将 'loadedFromServer' 属性设置为 true 并返回响应：

```
 parse: function (response) {
        this.loadedFromServer = true;
        return response;
    }, 
```

isNew() 函数然后检查 id（对于空白模型）或 id 是否已设置，但未同步到服务器：

```
 isNew: function () {
        return !this.id || !this.loadedFromServer;
    } 
```

这满足以下测试：

isNew() 获取时报告错误 isNew() 未设置 id 时报告 true isNew() 设置 id 时报告 true（用于 PUT），但从未获取

# jquery - jQuery datepicker 下一个/上一个图像

> ID：11436124
> 
> 赞同：3
> 
> 时间：2012-07-11T15:29:57.823
> 
> 标签：jquery, css, jquery-ui, datepicker

我正在尝试为下个月/上个月按钮设置自定义图像。我尝试使用 datepicker 的 prevText / nextText 选项将 span 与我自己的 css 类定义一起放置，但它会将其添加到链接标题中，因此它是无效的 HTML。

我不想更改 jQuery UI CSS 中的 .ui-icon-circle-triangle-w 和 .ui-widget-header .ui-icon 规则...我只想添加/更改渲染 span 元素的类是里面的一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T15:34:12.113

将您的日期选择器包含在自定义 ID 或类中，然后更改 .ui-icon 类的背景：

```
#my-calendar-id .ui-datepicker-next .ui-icon  {background:url('my_image'); } 
```

使用 jQuery UI CSS 堆栈时，特异性是关键。

# regex - 正则表达式匹配 Gmail 退回

> ID：11436133
> 
> 赞同：0
> 
> 时间：2012-07-11T15:30:27.800
> 
> 标签：regex, phpmailer, email-bounces

我正在尝试制作一个正则表达式来匹配一个不存在的地址的 gmail 反弹，以便将它与 PHPMailer-BHM 一起使用。

这是消息

```
<majsha77665251001@gmail.com>: host
gmail-smtp-in-v4v6.l.google.com[173.194.70.26] said: 550-5.1.1 The email
account that you tried to reach does not exist. Please try 550-5.1.1
double-checking the recipient's email address for typos or 550-5.1.1
unnecessary spaces. Learn more at 550 5.1.1
http://support.google.com/mail/bin/answer.py?answer=6596 n7si4762785wiy.46
(in reply to RCPT TO command) 
```

我希望规则匹配电子邮件和消息“您尝试访问的电子邮件帐户不存在”，或者至少“您尝试访问的帐户不存在”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:30:28.533

我自己找到的，php代码：

```
preg_match ("/<(\S+@\S+\w)>.*\n?.*\n?.*account that you tried to reach does not exist/i",$body,$match) 
```

# c# - 我应该将 Backgroundworker 传递给方法吗

> ID：11436135
> 
> 赞同：0
> 
> 时间：2012-07-11T15:30:29.907
> 
> 标签：c#, backgroundworker

我有一个应用程序，它有几种需要很长时间才能完成的方法。我正在使用后台工作人员来运行这些方法并保持我的 UI 响应。我的方法看起来像

```
public void DoSomething()
{
   while( HaveMoreWork )
   {
     // do work
   }
} 
```

现在我希望 UI 能够随时取消它，所以我改变了我的方法来像这样使用 Backgroundworker

```
public void DoSomething(Backgroundworker worker)
{

   while( HaveMoreWork && !worker.CancelationPending )
   {
     // do work
   }
} 
```

我的问题是，有没有更好的方法来做到这一点。似乎将 Backgroundwoker 作为参数传递给所有这些方法有点混乱。对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:48:22.130

我正在使用全局变量

```
private BackgroundWorker _bwSearch = new BackgroundWorker();

private void InitializeBackgroundWorker()
{
     _bwSearch = new BackgroundWorker();
     _bwSearch.WorkerSupportsCancellation = true;
     _bwSearch.DoWork += bwSearch_DoWork;
     _bwSearch.RunWorkerCompleted += bwSearch_RunWorkerCompleted;
} 
```

当点击停止按钮时

```
 private void btnCancel_Click(object sender, EventArgs e)
 {
      _bwSearch.Abort();
 } 
```

* * *

**更新：** 我也在使用从 BackgroundWorker 继承的这个简单的帮助类

```
public class AbortableBackgroundWorker : BackgroundWorker
    {
        private Thread _workerThread;

        protected override void OnDoWork(DoWorkEventArgs e)
        {
            _workerThread = Thread.CurrentThread;

            try
            {
                base.OnDoWork(e);
            }
            catch (ThreadAbortException)
            {
                e.Cancel = true;

                Thread.ResetAbort();
            }
        }

        public void Abort()
        {
            if (_workerThread != null)
            {
                _workerThread.Abort();

                _workerThread = null;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:44:27.497

```
public class DoSomethingService
{
    private volatile bool _stopped = false;

    public void Start(object socketQueueObject)
    {
        while (!_stopped)
        {
            ...
        }
    }

    public void Stop()
    {
        _stopped = true;
    }
}

...

var doSomethingService = DoSomethingService();
doSomethingService.Start();
...
doSomethingService.Stop(); 
```

# xslt - 在 xslt 中多次打印相同的值

> ID：11436138
> 
> 赞同：0
> 
> 时间：2012-07-11T15:30:40.930
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我有`x`一个数字变量。我有一条线。( `"<name>James</name>"`) 我需要打印这句话的`x`次数。我可以用简单的方法吗？不复杂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:43:14.533

如果您使用的是 XSLT 2.0，那么您可以这样做...

```
<xsl:for-each select="for $i in 1 to $x return $i">
 <name>James</name>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:33:59.123

以下内容未经测试...

```
<xsl:call-template name="show">
  <xsl:with-param name="text">&lt;name&gt;James&lt;/name&gt;</xsl:with-param>
  <xsl:with-param name="count">50</xsl:with-param>
</xsl:call-template>

<xsl:template name="show">
  <xsl:param name="text"/>
  <xsl:param name="count"/>
  <xsl:value-of select="$text"/>
  <xsl:if test="number($count)>0">
    <xsl:call-template name="show">
      <xsl:with-param name="text" select="$text"/>
      <xsl:with-param name="count" select="number($count)-1"/>
    </xsl:call-template>
  </xsl:if>
</xsl:template> 
```

更新为具有`<name>`和`</name>`。

这是[上述工作的 XmlPlayground](http://www.xmlplayground.com/Q7ChbQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T03:59:23.727

您可以在样式表的某处添加以下内容：

```
<mydata>
    <x/><x/><x/><x/> <!-- to print four times -->
</mydata> 
```

然后

```
<xsl:for-each select="document()//mydata/x">
    <name>James</name>
</xsl:for-each> 
```

这利用了在 XSLT 程序中包含您自己的数据并通过`document`函数访问它的能力（没有参数表示样式表本身）。

# c# - 关于网格视图

> ID：11436141
> 
> 赞同：1
> 
> 时间：2012-07-11T15:30:54.360
> 
> 标签：c#, .net, gridview, buttonclick

我有以下代码：

```
protected void BtnSave_Click(object sender, EventArgs e)
{
    DataTable dt = new DataTable();
    dt = (DataTable)ViewState["CurrentData"];

    int id = Convert.ToInt32(Session["id"]);

    dt.Rows[index: id + 1][0] = TextBox1.Text;
    dt.Rows[index: id + 1][1] = TextBox2.Text;
    dt.Rows[index: id + 1][2] = TextBox3.Text;
    dt.Rows[index: id + 1][3] = TextBox4.Text;

    dt.AcceptChanges();
    GridView2.DataSource = dt;
    GridView2.DataBind();
    TextBox1.Text = "";
    TextBox2.Text = "";
    TextBox3.Text = "";
    TextBox4.Text = "";
    BtnCancle.Visible = false;
    BtnSave.Visible = false;
} 
```

出于某种原因，当我编辑第四行时，第二行的更新更改效果。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:24:59.663

正确设置您的[DataKeyNames](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)。

确保该键只能唯一标识网格中的一行。

你在打电话`AcceptChanges()`。这会导致数据最终确定。如果有任何排序规则，您的数据将被重新排序。接受更改后，第 4 行可能不在同一位置。

# fullcalendar - 使 FullCalendar 从嵌套的 JSON 结构中获取事件数据

> ID：11436143
> 
> 赞同：0
> 
> 时间：2012-07-11T15:30:59.837
> 
> 标签：fullcalendar

我不是以 JSON 数组的形式发送事件，而是像这样：

```
{"result":"success",
                "events":[
                    {"end":"2012-07-14T11:00:00", "description":"1", "title":"2", "start":"2012-07-14T07:00:00"},
                    {"end":"2012-07-14T11:00:00", "description":"3", "title":"4", "start":"2012-07-14T07:00:00"}
                ]} 
```

[并以这种方式从FullCalendar](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/#options)接收它：

```
 events:{
            url:'/sweatiquette/calendar/events/',
            type:'POST',
            allDayDefault:false,
            data:{action:'get'}
        } 
```

如果我使用这种结构发送它，我想知道是否可以配置 FullCalendar 来处理来自“事件”字段的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:24:23.550

使用[http://arshaw.com/fullcalendar/docs/event_data/events_function/](http://arshaw.com/fullcalendar/docs/event_data/events_function/) “事件作为函数”。获取您的 JSON 对象并从那里解析事件数组。

# sql - SQL - 是否可以使用 Where Primary key = 'id_number'

> ID：11436144
> 
> 赞同：1
> 
> 时间：2012-07-11T15:31:00.760
> 
> 标签：sql, primary-key

我正在尝试为我的所有表格编写一个通用的“更新”功能。但是，每个主键的名称都不同。那么是否有可能，而不是使用主键列的名称，而是使用类似自动选择主键列的东西？

```
UPDATE .... WHERE PRIMARY KEY = 'id_number' 
```

谢谢！

编辑：对不起，我似乎不清楚，但我必须承认我真的不是专家。所以我的想法是，我希望它适用于所有只有一个 INT 类型主键列的表。如果可能的话，我希望避免进行两个查询（一个用于获取主键列的名称 + 查询本身）。起初，我想避免必须确保每个表都有正确的列名称（mo_id、rc_id 等...）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:50:02.643

我要说的是，您不能为所有表创建通用更新功能。实际上它需要是一个存储过程，就像我想的那样，但那是另一回事。正如@Martin Smith 指出的那样，PK 可以是复合的。我的 PK 绑定了四个字段以使其独一无二。你怎么能解释呢？此外，PK 可以是多种不同的类型。你打算在这个通用存储过程中为所有这些代码编写代码吗？您的代码段假定 PK 是 char 类型。这看起来不太合理。我确实找到了一些代码来让您识别任何表的 PK，但是在那之后您还有很多工作要做，而且您的全部要求还不清楚。

从保管库（这适用于 SQL Server）：

```
 SELECT KU.table_name as tablename,column_name as primarykeycolumn
 FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS AS TC
 INNER JOIN
 INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS KU
 ON TC.CONSTRAINT_TYPE = 'PRIMARY KEY' AND
 TC.CONSTRAINT_NAME = KU.CONSTRAINT_NAME
 and ku.table_name='yourTableName'
 ORDER BY KU.TABLE_NAME, KU.ORDINAL_POSITION; 
```

从[SQL Server：使用 sql 查询获取表主键](https://stackoverflow.com/questions/3930338/sql-server-get-table-primary-key-using-sql-query)

# c++ - 具有不同顶点输入类型的多个着色器可以使用相同的顶点缓冲区吗？

> ID：11436146
> 
> 赞同：2
> 
> 时间：2012-07-11T15:31:14.803
> 
> 标签：c++, direct3d11

假设我有一个模型。该模型具有位置、颜色、法线和 2 个纹理坐标的数据。现在假设我有一个输入类型仅为位置和颜色的着色器。但是，此模型的顶点缓冲区格式为：

```
struct Vertex_PCNT2
{
    D3DXVECTOR3 position;
    D3DXVECTOR4 color;
    D3DXVECTOR3 normal;
    D3DXVECTOR2 tex1;
    D3DXVECTOR2 tex2;
}; 
```

尽管这个模型中有关于获取位置和颜色的着色器的信息，但我不能使用它，因为有多余的数据。我能想到的唯一其他解决方案是拥有多个具有相同信息的顶点缓冲区减去几个字段，但这只是多余的。必须有更好的方法。这里有什么帮助吗？

**编辑：**我想我会在工作前的一段时间内详细说明我的问题。在谈论顶点缓冲区时，我指的是您使用 ID3D11Device::CreateBuffer 创建的 ID3D11Buffer *。在此之前，我用 Vertex_PCNT2 类型填充顶点数组。据我所知，该缓冲区现在永久采用这种格式，因此所有着色器都必须使用这种格式。当数据已经存在时，设置其他缓冲区只会对 ram 造成压力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:12:05.907

通常，这是通过为同一个顶点缓冲区创建不同的 InputLayout 来完成的。请记住，InputLayout 可以充当顶点输入数据和顶点着色器的预期输入之间的过滤视图。

InputLayout 正是针对这种场景完成的。它基本上是将原始数据的布局和绑定到顶点着色器输入的布局解耦。

例如，如果您只需要映射位置和颜色，则只需使用包含正确 AlignedByteOffset 集的两个[D3D11_INPUT_ELEMENT_DESC元素的数组来实例化输入布局。](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476180%28v=vs.85%29.aspx)

在仅选择“POSITION”（偏移量 0）和“COLOR”（字节偏移量：12）的情况下：

```
D3D11_INPUT_ELEMENT_DESC 布局[] =
{
{ "位置", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
{ "颜色", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
};

```

但您也可以只选择“POSITION”（偏移量 0）和“NORMAL”（偏移量 28）：

```
D3D11_INPUT_ELEMENT_DESC 布局[] =
{
{ "位置", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
{ "正常" , 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 28, D3D11_INPUT_PER_VERTEX_DATA, 0 },
};

```

# coldfusion - 从查询的查询中选择行范围

> ID：11436148
> 
> 赞同：4
> 
> 时间：2012-07-11T15:31:20.777
> 
> 标签：coldfusion, cfquery

如何使用查询查询选择特定范围的行？

例如

```
<cfquery name="myQuery" maxrows ="20" startrow="12">
 SELECT *
 FROM   previous_query
 WHERE  row_numer >= 12
</cfquery> 
```

之类的东西...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T19:27:45.657

这是一个棘手的问题，但你的问题引起了我的兴趣。我*想*我可能有一个解决方案

我写了一个函数，删除你想要的行之前的所有内容，然后删除你想要的行之后的所有内容。

函数 rowrange() 接受 3 个参数。1\. 您正在使用的查询名称。2.你想要的起始行 3.你想要的行数。

更新：我的朋友 John Whish 指出我实际上不需要循环来让它工作。删除循环使这更具可扩展性。

```
<cfquery name="myQuery">
 SELECT *
 FROM   previous_query
 WHERE  row_numer >= 12
</cfquery>

<cfset  rowRange(myQuery,7,4)>
<cfdump var="#myQuery#">

<cffunction name="rowRange" hint="return a range of rows from a given query">
    <cfargument name="qObj" type="query" required="true">
    <cfargument name="start" type="numeric" required="true" default="1" hint="The number of the first row to include">
    <cfargument name="range" type="numeric" required="true" default="1" hint="The number of rows">

    <cfset var i = arguments.start+arguments.range-1>
    <cfset arguments.qObj.removeRows(i,arguments.qObj.recordcount-i)>
    <cfset arguments.qObj.removeRows(0,arguments.start-1)>

    <cfreturn arguments.qObj>
</cffunction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:51:59.677

不支持在 CF 中本地执行此操作，因此您必须在原始记录集中添加一列来为您进行计数。

```
SELECT ..., row_num AS Counter 
```

Row_Num 可能因您的 DBMS 而异。

# javascript - 用 javascript 定位是一个好习惯吗

> ID：11436150
> 
> 赞同：3
> 
> 时间：2012-07-11T15:31:26.797
> 
> 标签：javascript, jquery

几周前我刚刚学习了 javascript 和 jquery，从那时起我总是使用它来通过知道屏幕的大小和我觉得非常有用的窗口来定位我的所有 div 和内容，但现在我没有'不知道这是否是一个好习惯，因为它使我的网页完全依赖于 jquery，我不知道这是否会导致不同浏览器出现一些问题。
我真的很想找到像“当然是一个很好的做法，使用你想要的所有脚本”这样的答案，因为我真的很喜欢这个 javascript 的东西，但只是告诉你你的想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T15:35:04.897

对行为使用 JavaScript，对样式使用 CSS。

使用 JavaScript 进行样式设计对于其他开发人员/设计师来说更慢且难以弄清楚你做了什么。

此外，如果您使用 Firebug 或 Chrome Web Inspector，您将看不到样式的来源。

可选地从 JavaScript 设置类，而不是特定的样式。您可以在类之间转换以创建良好的效果。但至少您的同事可以看到样式的定义位置并进行更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T15:34:30.783

我很抱歉，但我会在某种程度上打破你的泡沫。

这样做是可以的——只要您禁用 Javascript 后页面看起来还可以。我会说它看起来应该比OK更好。我还要说，只有当您的网站的*功能*也确实需要 Javascript 时，您才应该这样做。

请记住，一定比例的用户将禁用 Javascript。我见过这样看起来很*糟糕*的网站（我在 Firefox 上使用 NoScript，并有选择地启用 Javascript 作为我的浏览器），还有一些在没有启用 JS 的情况下*什么都不会出现的网站。*

坏的。

正如 Darin 所说，您可以（并且应该！）使用 CSS 进行定位和样式设置。这就是它的目的！随意使用 Javascript 增强页面，但请记住我上面所说的！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T15:33:06.397

您可以使用[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)来定位和设置元素样式。这就是它的设计目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T15:34:09.830

在某些情况下使用它来定位是可以的，但在适用的情况下使用 CSS 是更好的做法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T15:34:36.250

好吧，在我看来，您应该尽可能避免使用它。但我知道有时你别无选择。

是的，您可以使用脚本制作出色的 Web 应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T15:38:08.317

这要看你定位的是什么。

CSS 应该是您定位网页标准、普通部分和元素的首选。在这些情况下选择 JavaScript 表明对 CSS 缺乏了解。

同样，如果您发现自己使用 JS 为不同的设备定位东西。再一次，CSS 已经进化了。媒体查询随之而来。规则：总是先用尽 CSS 的可能性。

也就是说，建议永远不要使用 JavaScript 进行定位是过于简单化了。我们所有人，无论对错，都求助于 JS（仅此而已），以使跨浏览器看起来正确，尤其是在涉及对旧 IE 的支持时。

但到目前为止，JS 定位的最大用例是现代网络应用程序和游戏。如果您正在构建一个带有随机小行星的游戏，那么 JS 绝对是您的选择，因为位置是基于计算和计算的。

最后，请记住，当您在 JS 中定位时，您当然仍在使用 CSS。JS 没有自己的并发样式/定位系统——它只是设置 CSS 属性。它只是能够比平面 CSS 更动态和有条件地做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T15:34:08.467

这几乎可以肯定是不好的做法。使用 CSS 进行样式设置 - JavaScript 执行此操作更慢、工作量更大且更容易出错。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-11T15:34:08.513

如果您要绝对定位所有内容（固定坐标），那么它在不同分辨率的屏幕上看起来不会很好。这个问题没有真正的答案。脚本有它们的位置，你可以使用你想要的所有脚本。但是，定位布局的所有元素并不是 JS 的工作。为此使用 CSS。

我将从这里开始：[从 HTML + CSS 开始](http://www.w3.org/Style/Examples/011/firstcss.en.html)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-07-11T15:34:56.597

没有一种方法适用于所有情况。每个 Web 应用程序都需要使用正确的工具和实践来实现其目标。这在应用程序之间差异很大，以至于您的问题没有“正确”的答案。

# c# - Array.BinarySearch() 返回值

> ID：11436152
> 
> 赞同：7
> 
> 时间：2012-07-11T15:31:30.703
> 
> 标签：c#, .net

我有以下数组：

```
double[] list = new double[] {0,0,100,100} 
```

为什么如果我搜索`29.6`我得到`-3`？

```
Array.BinarySearch(list, 29.6) 
```

我预计`+1`或`-1`。

返回参数的 Array.BinarySearch() 文档说：

> 指定数组中指定值的索引（如果找到值）。如果未找到 value 并且 value 小于数组中的一个或多个元素，则为负数，它是大于 value 的第一个元素的索引的按位补码。如果未找到 value 并且 value 大于数组中的任何元素，则为一个负数，它是 (最后一个元素的索引加 1) 的按位补码。

但这对我来说并没有说太多。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T15:37:27.453

> 如果未找到 value 并且 value 小于数组中的一个或多个元素，则为负数，它是大于 value 的第一个元素的索引的按位补码。

大于 29.6 的第一个元素是`100`，其索引为`2`。

`~2`是`-3`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T15:37:43.223

您可以使用“~”进行按位补码，这将为您提供大于搜索项的第一项的索引。

> 如果 Array 不包含指定的值，则该方法返回一个负整数。您可以将按位补码运算符 (~) 应用于负结果（在 Visual Basic 中，将负结果与 -1 进行异或）以生成索引。如果此索引大于或等于数组的大小，则数组中没有大于 value 的元素。否则，大于 value 的是第一个元素的索引。

来自[MSDN](http://msdn.microsoft.com/en-us/library/2cy9f6wb.aspx)

因此，如果您有：

```
var pos = Array.BinarySearch(list, 29.6); 
```

您可以检查：

```
if (pos < 0)
{
     Console.WriteLine("Not found, the result was {0} which is index {1}", pos, ~pos);
} 
```

在您的情况下，这意味着您`-3`将指示索引`2`是比您的搜索目标大的第一个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:56:41.713

这是您的答案：“一个负数，它是大于值的第一个元素的索引的按位补码。”

因此，在您的情况下，您的搜索值 (29.6) 小于 100，这是数组列表中的第三个元素，3 的补码是 -3，这就是您得到的答案。

在这里，我扩展了您的示例并创建了另一个具有一些不同值的数组列表（list2），然后我搜索了与您相同的值 29.6，现在这个 29.6 值小于 100 但大于 25，并且在我的数组列表中，100 位于位置 4 和它的补码是-4。

所以我得到结果-4，如果我在我的数组列表中搜索了20，我会得到答案-3。

```
 double[] list = new double[] { 0, 0, 100, 100 };
        double[] list2 = new double[] { 10, 15, 25, 100 };

        int result = Array.BinarySearch(list, 29.6);
        int result2 = Array.BinarySearch(list2, 29.6);

        Response.Write("Your answer result:" + result.ToString() + "<br/>");
        Response.Write("Your answer result2:" + result2.ToString()); 
```

我的代码结果：

```
 Your answer result : -3
            Your answer result2: -4 
```

我希望这有帮助。

# recursion - 迭代或递归来实现二叉搜索树？

> ID：11436154
> 
> 赞同：5
> 
> 时间：2012-07-11T15:31:37.997
> 
> 标签：recursion, iteration, binary-tree

我现在正在学习数据结构和算法。

我的讲义有一个使用递归方法实现的二叉搜索树的实现。这是一种优雅的方式，但我的问题是在现实生活中的代码中，如果我递归地实现二叉搜索树，如果树的高度/深度数很大，它会生成大量调用堆栈吗？

我知道递归是理解许多数据结构概念的关键概念，但是您会选择在现实生活中的代码中使用递归吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:40:10.407

树本质上是递归的。树的每个节点代表一个子树，每个注释的每个子节点代表该子树的一个子树，因此递归是最好的选择，尤其是在其他人可能必须编辑和维护您的代码的实践中。

现在，如果深度成为您的调用堆栈的问题，我担心您的数据结构存在更深层次的问题（或者它非常巨大，或者非常不平衡）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:45:52.890

> “我知道递归是理解大量数据结构的关键概念，但你会选择在现实生活中的代码中使用递归吗？”

在第一次学习递归之后，我也有同样的感觉。但是，在软件行业工作了一年多，我可以说我已经使用递归的概念解决了几个问题。很多时候递归更干净，更容易理解/阅读，而且更好。为了强调上一个答案中的一点，树是一种递归数据结构。IMO，没有其他方法可以遍历 BST :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T15:37:52.623

很多时候，编译器可以优化您的代码，以避免为每个递归调用创建一个新的堆栈帧（例如，查找尾递归）。当然，这完全取决于算法和您的数据结构。如果树是合理平衡的，我认为递归算法不会引起任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-20T16:34:00.823

确实，递归是直观而优雅的，它产生的代码清晰简洁。某些方法（例如快速排序、DFS 等）确实很难迭代实现，这也是正确的。但实际上，由于所有函数调用，与迭代实现相比，递归实现几乎总是很慢（为了真正理解性能损失，我建议您了解汇编程序必须为单个函数调用做多少簿记工作）。

我们谈论的优化通常不适用于每种递归方法，许多编译器和解释器甚至不支持它们。

所以总而言之，如果您正在编写一些对性能至关重要的东西，例如数据结构，那么请远离递归（或者如果您确定您的编译器/解释器已经涵盖了您，则可以使用它）

PS：CLRS（算法简介，第 290 页，最后一行）表明 BST 的迭代搜索过程比递归搜索过程更快。

# java - VLCJ 无法正常工作

> ID：11436155
> 
> 赞同：1
> 
> 时间：2012-07-11T15:31:40.990
> 
> 标签：java, netbeans, jar, vlcj

这是我在 VLCJ 的第一天。[我从这里](https://github.com/caprica/vlcj/downloads)下载了完整的 zip ，并执行以下操作将其添加到我在 netbeans 中的项目中。

1.  创建新项目
2.  右键单击>属性
3.  在“库”部分中选择了 VLCJ 文件夹。
4.  复制并粘贴[此](http://www.capricasoftware.co.uk/vlcj/tutorial2.php)代码（第二个代码）

现在，它给出了很多编译器错误。说明所有导入的库都不可用！！！我究竟做错了什么？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:24:09.503

完毕。我不得不直接添加jar文件。但我添加了完整的文件夹。

# iphone - 强制通用应用在 iPad 上运行 iPhone 版本

> ID：11436159
> 
> 赞同：1
> 
> 时间：2012-07-11T15:31:48.883
> 
> 标签：iphone, ipad, configuration, ios-universal-app

我在 iTunes 上有一段时间的 iPhone 产品，并用一个通用应用程序取代了它，该应用程序已获得批准，除了一位想要在他的 iPad 上运行 iPhone 版本的客户，因为他更喜欢更大的输入和工作苹果手机。

有没有办法将应用程序配置为在运行时在 iPad 上作为原生 iPad 应用程序或 iPhone 应用程序运行？似乎是一个奇怪的要求，但客户非常坚持。

谢谢

/适合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:33:48.657

没有办法做到这一点，除了为 iPhone 和 iPad 制作单独的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:34:41.640

从理论上讲，您可以进行一些设置来在 iPad 上加载 iPhone 故事板，但它仍会显示全屏，而不是在兼容模式下，这可能是该特定用户想要的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T14:19:47.450

假设您正在运行某种源代码控制，您可以将项目更改为“仅限 iPhone”，然后在 iPad 上进行测试，然后恢复所做的更改以使其再次成为通用应用程序

# parallel-processing - 由具有不同延迟的操作组成的非常长的指令

> ID：11436162
> 
> 赞同：3
> 
> 时间：2012-07-11T15:31:55.897
> 
> 标签：parallel-processing, cpu-architecture, computer-architecture, vliw

考虑一个*问题宽度*等于*N*的 VLIW 处理器：这意味着它能够同时启动*N*个操作，因此每条*非常长的指令*最多可以包含*N*个操作。

假设 VLIW 处理器加载一个*很长的指令*，该指令由具有不同延迟的操作组成：属于同一*很长指令*的操作可能在不同的时间结束。如果一个操作在属于同一条*很长指令*的其他操作之前完成它的执行会发生什么？后续操作（即属于下一条*超长指令的操作）能否在当前**超长指令*的剩余操作执行之前开始执行？还是一条*很长的指令*等待属于当前*很长指令*的所有操作完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T19:45:59.300

我见过的大多数 VLIW 处理器都支持具有不同延迟的操作。

由编译器来安排这些指令，并确保操作数在操作执行之前可用。VLIW 处理器是愚蠢的，不会检查操作之间的任何依赖关系。当执行长指令字时，字中的每个操作只是从寄存器文件中读取其输入数据，并在同一周期结束时将其结果写回，或者如果操作需要两个或三个周期，则稍后再写回结果。

这仅在指令是确定性的并且总是采用相同数量的周期时才有效。我见过的所有 VLIW 架构都有需要固定周期数的操作，不多也不少。如果它们确实需要更长的时间，例如外部内存提取，整个机器就会停止。

现在有一个关键因素限制了具有不同延迟的指令的调度：寄存器文件的端口数量。端口是寄存器文件和操作执行单元之间的连接。在 VLIW 处理器中，每个操作都在一个发布槽中执行，并且每个发布槽都有自己的寄存器文件端口。端口在硬件方面很昂贵。端口越多，实现寄存器文件所需的芯片就越多。

现在考虑以下情况，其中一个两周期操作想要将其结果写入寄存器文件，同时又是一个安排在其后的单周期操作。现在发生了冲突，因为两个操作都想通过同一个端口写入同一个寄存器文件。同样，编译器的任务是确保不会发生这种情况。在许多 VLIW 架构中，在同一问题槽中执行的操作数都具有相同的延迟。这避免了这种冲突。

现在回答你的问题：

你说：“如果一个操作在属于同一条很长指令的其他操作之前完成执行，会发生什么？”

没有什么特别的事情发生。处理器只是继续执行下一个很长的指令字。

您说：“后续操作（即属于下一条超长指令的操作）是否可以在当前超长指令的剩余操作执行之前开始执行？”

是的，但这可能会在以后出现注册端口冲突。由编译器来防止这种情况。

你说：“或者一个很长的指令是否等待属于当前很长指令的所有操作完成？”

不。每个周期的处理器只是转到下一个很长的指令字。有一个例外，那就是当一个操作比正常时间花费更长的时间时，例如因为缓存未命中，然后管道停止，机器不会处理下一个长指令字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:02:41.283

VLIW 背后的想法是编译器计算出许多事情供处理器并行执行，并将它们打包成称为“超长指令字”的包。

Amhdahl 定律告诉我们并行程序的加速（例如，VLIW 指令的并行部分）受到最慢部分（例如，最长持续时间的子指令）的约束。

VLIW 和“长延迟”的简单答案是“不要混合具有不同延迟的子指令”。实际的答案是 VLIW 机器尽量不要有不同延迟的子指令；理想情况下，您需要“一个时钟”子指令。通常，即使内存*提取*也只需要一个时钟，因为它被划分为“内存提取开始（这里是要提取的地址）”，唯一的可变延迟子指令是“等待前一次提取到达”，其想法是编译器生成为尽可能多的其他计算，以便内存获取延迟由其他指令来解决。

# jquery - 需要帮助让 FadeTo 方法与窗口滚动事件一起使用

> ID：11436163
> 
> 赞同：0
> 
> 时间：2012-07-11T15:31:57.047
> 
> 标签：jquery, if-statement, scroll, fadeto

我试图让我的一页网站的每个“**部分**”根据滚动位置淡入和淡出。我希望该部分保留为 display:block，因此我使用**FadeTo**方法而不是 FadeIn/FadeOut。

这个想法是让每个部分在距离顶部一定距离时淡入，当它不满足某些要求时淡出。我目前的标记尝试如下，但努力找出我在哪里犯了错误

**功能：**

```
function scrollFadeDiv(element, navheight) {
    var offset = element.offset();
    var offsetTop = offset.top;
    var totalScroll = offsetTop - navheight;

    if (totalScroll > 0 ){
        $(element).fadeTo('slow', 0.0); 
    } else {
        $(element).fadeTo('slow', 1.0);
    }

} 
```

**和我的窗口滚动事件：**

```
$(window).on('scroll', function(){
    var elWrapped = $('section');
    scrollFadeDiv(elWrapped, 75);
}); 
```

我担心的是，由于**live()**已被弃用，并且**delegate()**不适用于滚动事件，因此在加载 DOM 后，totalScroll 变量不会不断更新/重新计算。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:42:42.157

我的建议是使用航点插件：

[https://github.com/imakewebthings/jquery-waypoints](https://github.com/imakewebthings/jquery-waypoints)

# javascript - 谷歌分析报告操纵

> ID：11436167
> 
> 赞同：1
> 
> 时间：2012-07-11T15:32:23.290
> 
> 标签：javascript, google-analytics

我需要一个修改过的 JavaScript，它会夸大浏览量、唯一身份访问者和访问者数量！

出于教育目的，因为我想看看在人为更改 G. Analytics 报告时是否存在某些模式

我对此进行了编码，但它不起作用：

```
 <script type="text/javascript">

var i=0;
 for (i=0;i<=10;i++) {

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-19629541-9']);
 _gaq.push(['_trackPageview']);

   _gaq.push([_setDomainName, '.domain.com']); 
   _gaq.push([_setDomainName, 'domain.com']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =   true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +         '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

}

</script>​​​​ 
```

并且此代码仅更改网页浏览量：

```
<script>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js'     type='text/javascript'%3E%3C/script%3E"));
</script>   
<script>
// Google Analytics
var pageTracker;
try {
    pageTracker = _gat._getTracker("UA-15064357-1"); // pour dystroy.org
    pageTracker._setDomainName("none");
    pageTracker._setAllowLinker(true);
    for (var i=10; i-->0;) pageTracker._trackPageview();
} catch(err) {console.log(err);}
</script>​ 
```

我之所以问，是因为我最近查看了一份分析报告，该报告与所有基础数​​据并不完全吻合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:36:07.497

只要您信任站点开发人员，就可以信任分析报告。

开发人员可以对其进行修改以注册他想要拥有的事件和页面浏览量。这是完全正常的。

它是开发人员和网站所有者的工具，而不是网站受欢迎程度的独立证明。

**编辑：**我只是试图在我的一个网站上添加一个循环（我真的不关心分析）：[http ://dystroy.org/re7210/](http://dystroy.org/re7210/)

```
<script>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>   
<script>
// Google Analytics
var pageTracker;
try {
        pageTracker = _gat._getTracker("UA-15064357-1"); // pour dystroy.org
        pageTracker._setDomainName("none");
        pageTracker._setAllowLinker(true);
        for (var i=10; i-->0;) pageTracker._trackPageview();
} catch(err) {console.log(err);}
</script> 
```

它有效：

![在此处输入图像描述](../Images/94f0e7d61da581cb6cae508540edf04b.png)

只能是 10 的倍数。

# authentication - Yii：会员区共享密码

> ID：11436169
> 
> 赞同：0
> 
> 时间：2012-07-11T15:32:29.580
> 
> 标签：authentication, yii

在 Yii 中设置共享密码保护区的最佳方法是什么？

我正在寻找一个组模型的视图，可以通过该组所有者创建的共享密码访问该模型-组成员不必登录，只需输入此密码即可。

这仍然应该使用 Yii 的内置身份验证工具来完成吗？- 或者是否有更简单的解决方案，请记住有人可能想要访问多个组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:48:16.123

您可以使用 PHP 中内置的标准会话机制来执行此操作。当有人试图查看受密码保护的区域时，请检查会话变量，如果用户尚未输入密码，则将他重定向到带有密码表单的某个页面（例如，您可以使用控制器过滤器进行检查）。

提交表单后，检查密码的正确性，如果一切正常，将其写入会话中。您可以按组 ID 区分会话密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:51:53.903

您可以使用 [Yii 过滤器](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)功能在执行控制器操作之前触发代码，并阻止您不想允许的操作。

我将为您的所有组页面创建一个通用控制器，并在需要时从该控制器继承其他控制器。

在过滤器中，我将设置代码来检查/提示密码，并将其保持在会话中。

例如，我们有一个过滤器设置来检测用户是否接受了我们修订的条款和条件。过滤器将检测并阻止对控制器的访问，直到用户不确认为止。

```
class TocConfirmFilter extends CFilter {

    /**
     * Initializes the filter.
     * This method is invoked after the filter properties are initialized
     * and before {@link preFilter} is called.
     * You may override this method to include some initialization logic.
     */
    public function init() {

    }

    /**
     * Performs the pre-action filtering.
     * @param CFilterChain the filter chain that the filter is on.
     * @return boolean whether the filtering process should continue and the action
     * should be executed.
     */
    protected function preFilter($filterChain) {

        // do not perform this filter on this action
        if ($filterChain->action->controller->id . '/' . $filterChain->action->id == 'public/onePublicPage') {
            return true;
        }

        if (isset(Yii::app()->user->id)) {
            $user = user::model()->findbyPk(Yii::app()->user->id);
            if ($user === null)
                throw new CHttpException(404, 'The requested user does not exist.');
            if ($user->tocconfirmed == 0) {
                Yii::app()->getRequest()->redirect(Yii::app()->createAbsoluteUrl('authorize/confirm'));
                return false;
            }
        }
        return true;
    }

    /**
     * Performs the post-action filtering.
     * @param CFilterChain the filter chain that the filter is on.
     */
    protected function postFilter($filterChain) {

    }

} 
```

# php - 新行 (\n) 是否在 xampp 中工作？

> ID：11436170
> 
> 赞同：2
> 
> 时间：2012-07-11T15:32:31.933
> 
> 标签：php, string, xampp

我正在使用 xampp 服务器来学习 php 和 mysql，我注意到 (\n) 换行不起作用？

有没有人在xampp之前注意到这一点？

这也适用于 \t,\r。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:41:18.647

来自[PHP 手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)：

> 指定字符串的最简单方法是将其括在**单引号**中 （字符 '）。
> 
> 要指定文字单引号，请使用反斜杠 (\) 对其进行转义。要指定文字反斜杠，请将其加倍 (\\)。所有其他反斜杠实例将被视为文字反斜杠：这意味着 您可能习惯的**其他转义序列，****例如 \r 或 \n**，**将按**指定的字面输出而不是具有任何特殊含义。

所以你必须使用[**双引号**](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)来获取`\n`,`\t`和其他转义字符（你可以在链接的手册页上找到一个列表）。

您的问题不是 XAMPP 特有的，而是一般的 PHP 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:36:41.697

他们在 xampp 中工作。

您需要使用双引号：`"\n"`

# java - 从过滤器列表中提取特定值（自动完成字段）

> ID：11436172
> 
> 赞同：0
> 
> 时间：2012-07-11T15:32:37.940
> 
> 标签：java, blackberry

在我的应用程序中，我试图从过滤器列表（自动完成字段）中提取值。在该字段中，我有 [ID, Name] ex [j342234, A,S]。我可以通过这样做来检索整个标准

```
Object Filterlistresult = fliterList.getCriteria(); 
```

但现在我只想从该字段中获取提取 ID 部分。有任何想法吗？

先感谢您。

```
// here I get the values from a web server and insert them to the work Vector
public void parseJSONResponceInWB(String jsonInStrFormat) {
    try {
        JSONObject json = new JSONObject(jsonInStrFormat);
        JSONArray jArray = json.getJSONArray("transport");

        for (int i = 1; i < jArray.length(); i++) {
            JSONObject j = jArray.getJSONObject(i);
            ID = j.getString("ID");
            Name = j.getString("Name");

            WBenchVector.addElement(ID + " " + Name);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
}

// adding the values to the filter list
private void RequestAutoComplete() {
    String[] returnValues = new String[WBenchVector.size()];
    System.out.print(returnValues);
    for (int i = 0; i < WBenchVector.size(); i++) {
        returnValues[i] = (String) WBenchVector.elementAt(i);
    }
    autoCompleteField(returnValues);
}

// creating the filter list field
private void autoCompleteField(String[] returnValues) {
    filterLst = new BasicFilteredList();
    filterLst.addDataSet(ID, returnValues, "",
            BasicFilteredList.COMPARISON_IGNORE_CASE);

    autoFld.setFilteredList(filterLst);
} 
```

最后我得到了用户使用这个选择的内容

```
AutoFieldCriteria = filterLst.getCriteria(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:26:13.673

谢谢内特。我实际上解决了这个问题。我将 filterField 对象转换为字符串，然后查找第一个空格的索引，并将第一个单词作为子字符串

```
 Object AutoFieldCriteria = filterLst.getCriteria();
 String AutoFieldString = AutoFieldCriteria.toString();
 int spacePos = AutoFieldString.indexOf(" ");
 String AutoFieldFirstWord = AutoFieldString.substring(0,spacePos); 
```

再次感谢。

# perl - 打开最新的日志文件并打印晚于某个时间戳的行

> ID：11436173
> 
> 赞同：2
> 
> 时间：2012-07-11T15:32:48.117
> 
> 标签：perl, logging, ssh, garbage-collection

我正在编写一个 Perl 脚本，我需要从垃圾收集日志中捕获一些行并将它们写入文件。

该日志位于远程主机上，我正在使用该[`Net::OpenSSH`](https://metacpan.org/module/Net::OpenSSH)模块进行连接。

我需要阅读可用的最新日志文件。

在 shell 中，我可以使用以下命令找到最新的日志：

```
cd builds/5.7.1/5.7.1.126WRF_B/jboss-4.2.3/bin
ls -lat | grep '.log$' | tail -1 
```

这将返回最新的日志：

```
-rw-r--r--   1 load     other    2406173 Jul 11 11:53 18156.stdout.log 
```

因此，在 Perl 中，我希望能够编写一些东西来定位并打开该日志以供阅读。

当我拥有该日志文件时，我想打印时间戳大于指定时间的所有行。指定的时间戳是`$Runtime`从最新的日志消息时间中减去的变量。

以下是垃圾收集日志的最后一条消息：

```
 ...

73868.629: [GC [PSYoungGen: 941984K->14720K(985216K)] 2118109K->1191269K(3065984K), 0.2593295 secs] [Times: user=0.62 sys=0.00, real=0.26 secs]
73873.053: [GC [PSYoungGen: 945582K->12162K(989248K)] 2122231K->1189934K(3070016K), 0.2329005 secs] [Times: user=0.60 sys=0.01, real=0.23 secs] 
```

因此，如果`$Runtime`值为 120 秒，我需要打印从时间戳 (73873.053 - 120) 秒开始的所有行。

最后我的脚本看起来像这样......

```
open GARB, ">", "./report/archive/test-$now/GC.txt" or die "Unable to create file: $!";

my $ssh2 = Net::OpenSSH->(
  $pathHost,
  user => $pathUser,
  password => $pathPassword
);
$ssh2->error and die "Couldn't establish SSH connection: ". $ssh2->error; 

# Something to find and open the log file.
print GARB #Something to return certain lines.
close GARB; 
```

[我意识到这与这个](https://stackoverflow.com/questions/3134882/how-to-search-for-lines-in-a-file-between-two-timestamps-using-perl)问题有些相似，但我想不出一种方法来定制它以适应我正在寻找的东西。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:05:58.767

找到最新的文件并将其提供给 perl：

```
 LOGFILE=`ls -t1 $DIR | grep '.log$' | head -1`
 if [ -z $LOGFILE ]; then
   echo "$0: No log file found - exiting"
   exit 1;
 fi

 perl myscript.pl $LOGFILE 
```

第一行中的管道列出了目录中的文件，仅名称，在一列中，最近的在前；过滤日志文件，然后只返回第一个。

我不知道如何将您的时间戳翻译成我可以理解并进行数学和比较的东西。但总的来说：

```
$threshold_ts = $time_specified - $offset;
while (<>) {
  my ($line_ts) = split(/\s/, $_, 2);
  print if compare_time_stamps($line_ts, $threshold_ts);
} 
```

编写阈值操作和比较留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:08:29.493

我认为该页面为此[`Net::OpenSSH`](http://search.cpan.org/perldoc?Net%3a%3aOpenSSH)提供了一个很好的基线：

```
my ($rout, $pid) = $ssh->pipe_out("cat /tmp/foo") or
  die "pipe_out method failed: " . $ssh->error;

while (<$rout>) { print }
close $rout; 
```

但相反，您想做一些丢弃工作：

```
my ($rout, $pid) = $ssh->pipe_out("cat /tmp/foo") or
  die "pipe_out method failed: " . $ssh->error;

my $line;
while (   $line = <$rout> 
      and substr( $line, 0, index( $line, ':' )) < $start 
      ) {}
while (   $line = <$rout> 
      and substr( $line, 0, index( $line, ':' )) <= $start + $duration 
      ) {
    print $line;
}
close $rout; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:07:02.613

这是一种**未经测试**的方法。我没有用过`Net::OpenSSH`，所以可能有更好的方法来做到这一点。我什至不确定它是否有效。起作用的是我测试过的解析部分。

```
use strict; use warnings;
use Net::OpenSSH;

my $Runtime = 120;
my $now = time;
open my $garb, '>', 
  "./report/archive/test-$now/GC.txt" or die "Unable to create file: $!";
my $ssh2 = Net::OpenSSH->(
$pathHost,
  user => $pathUser,
  password => $pathPassword
);
$ssh2->error and die "Couldn't establish SSH connection: ". $ssh2->error;   

# Something to find and open the log file.
my $fileCapture = $ssh2->capture(
  q~ls -lat builds/5.7.1/5.7.1.126WRF_B/jboss-4.2.3/bin |grep '.log$' |tail -1~
);
$fileCapture =~ m/\s(.+?)$/; # Look for the file name
my $filename = $1;           # And save it in $filename

# Find the time of the last log line 
my $latestTimeCapture = $ssh2->capture(
  "tail -n 1 builds/5.7.1/5.7.1.126WRF_B/jboss-4.2.3/bin/$filename");
$latestTimeCapture =~ m/^([\d\.]+):/;
my $logTime = $1 - $Runtime;

my ($in, $out, $pid) = $ssh2->open2(
  "builds/5.7.1/5.7.1.126WRF_B/jboss-4.2.3/bin/$filename");
while (<$in>) {
  # Something to return certain lines.
  if (m/^([\d\.]+):/ && $1 > $logTime) {
    print $garb $_; # Assume the \n is still in there
  }
}

waitpid($pid);

print $garb;
close $garb; 
```

它使用您的`ls`行通过该方法查找文件`capture`。然后它通过 SSH 隧道打开一个管道来读取该文件。`$in`是我们可以读取的那个管道的文件句柄。

由于我们要逐行处理文件，从顶部开始，我们需要先抓取最后一行以获得最后一个时间戳。`tail`再一次，方法是这样做的`capture`。

一旦我们有了它，我们就逐行从管道中读取。现在这是一个简单的正则表达式（与上面使用的相同）。获取时间戳并将其与我们之前设置的时间（减去 120 秒）进行比较。如果它更高，`print`则输出文件句柄的行。

[文档](http://search.cpan.org/~salva/Net-OpenSSH/lib/Net/OpenSSH.pm)说我们必须使用`waitpid`返回`$pid`的 from所以`$ssh2->open2`它会收获子进程，所以我们在关闭输出文件之前这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T16:07:29.713

您将需要保留一个包含所有行的累加器（更多内存）或多次遍历日志（更多时间）。

带蓄能器：

```
my @accumulated_lines;
while (<$log_fh>) {
    push @accumulated_lines, $_;

    # Your processing to get $Runtime goes here...

    if ($Runtime > $TOO_BIG) {
        my ($current_timestamp) = /^(\d+(?:\.\d*))/;
        my $start_timestamp = $current_timestamp - $Runtime;

        for my $previous_line (@accumulated_lines) {
            my ($previous_timestamp) = /^(\d+(?:\.\d*))/;
            next unless $previous_timestamp <= $current_timestamp;
            next unless $previous_timestamp >= $start_timestamp;
            print $previous_line;
        }
    }
} 
```

或者您可以遍历日志两次，这很相似，但没有嵌套循环。我假设您的日志中可能有多个这些跨度。

```
my @report_spans;
while (<$log_fh>) {
    push @accumulated_lines, $_;

    # Your processing to get $Runtime goes here...

    if ($Runtime > $TOO_BIG) {
        my ($current_timestamp) = /^(\d+(?:\.\d*))/;
        my $start_timestamp = $current_timestamp - $Runtime;

        push @report_spans, [ $start_timestamp, $current_timestamp ];
    }
}

# Don't bother continuing if there's nothing to report
exit 0 unless @report_spans;

# Start over
seek $log_fh, 0, 0;

while (<$log_fh>) {
    my ($previous_timestamp) = /^(\d+(?:\.\d*))/;
    SPAN: for my $span (@report_spans) {
        my ($start_timestamp, $current_timestamp) = @$span;

        next unless $previous_timestamp <= $current_timestamp;
        next unless $previous_timestamp >= $start_timestamp;
        print; # same as print $_;

        last SPAN; # don't print out the line more than once, if that's even possible
    }
} 
```

如果您可能有重叠的跨度，后者的优点是不会两次显示相同的日志行。如果您没有重叠跨度，则可以通过每次输出时重置累加器来优化顶部：

```
my @accumulator = (); 
```

这将节省内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T07:25:18.640

使用 SFTP 访问远程文件系统。您可以使用[Net::SFTP::Foreign](https://metacpan.org/module/Net%3a%3aSFTP%3a%3aForeign)（单独或通过 Net::OpenSSH）。

它将允许您列出远程文件系统的内容，选择您要处理的文件，打开它并将其作为本地文件进行操作。

您需要做的唯一棘手的事情是向后读取行，例如从末尾开始读取文件的块并将它们分成几行。

# javascript - Javascript：无法在 IE 中转义反斜杠

> ID：11436178
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:33:03.723
> 
> 标签：javascript, internet-explorer, escaping, backslash

很简单，我想为一个变量分配一个反斜杠字符的值。问题是：

```
var myVar = '\';     // breaks because the backslash escapes the closing quote
var myVar = '\\';    // now myVar has two backslashes 
```

我能找到的一切都表明你用反斜杠来逃避反斜杠，这是我一直知道的普遍正确的。但是，当我在 IE 中运行它时，我得到两个反斜杠而不是一个。

这是 IE 调试器尝试将 # 替换为 . 在我尝试使用字符串文字转义反斜杠的任何地方都会出现此问题 - string.replace() 函数会产生相同的错误。

![截屏](../Images/cd49202e906cdb92df454d6b449c8725.png)

**[编辑]**

感谢您的评论。在短期内，我可能会像几个人推荐的那样使用八进制或十六进制 ascii。但我真正想要的是理解为什么我不能逃避反斜杠。

这是没有 string.replace 函数的更好的屏幕截图。结果相同。

![在此处输入图像描述](../Images/6561cdd12e31b6bcf4d04e0259c0fbaf.png)

**[/编辑]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:37:39.837

好吧，如果它太困扰您，请使用八进制或十六进制 ascii 代码；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:40:55.973

尝试使用这个：

```
var backslash = String.fromCharCode(92); 
```

例如：http: [//jsfiddle.net/lbstr/Sjja3/](http://jsfiddle.net/lbstr/Sjja3/)

**编辑：** 我认为不需要该`replace`功能。你为什么不这样做呢？它在 IE 中对我来说很好用。

```
if( dirPath === "#" ) dirPath = '\\'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:37:17.327

事实证明@Prusse 是对的：转义反斜杠不是问题，问题是 IE 调试器呈现`'\'`为`'\\'`. 在我的情况下，我有一个潜在的问题，其行为方式与损坏的字符串相同，因此需要一段时间才能找到它。

解决方案：

> 你有没有尝试提醒它？（带有警报（myVar））-
> Prusse

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T15:57:54.807

对我来说，它显示了`\\`而不是`\`。看看它有引号的行。

因此，如果字符串`"\\nope"`与`"\nope"`. 现在，如果调试器在字符串周围没有引号，我希望只有一个斜杠。

# python - 如何在 pyLucene 中使用荧光笔？

> ID：11436180
> 
> 赞同：1
> 
> 时间：2012-07-11T15:33:06.267
> 
> 标签：python, pylucene

我已经阅读了一些关于在 Lucene 中突出显示搜索词的教程，并提出了如下代码：

```
(...)
query = parser.parse(query_string)

for scoreDoc in  searcher.search(query, 50).scoreDocs:
    doc = searcher.doc(scoreDoc.doc)
    filename = doc.get("filename")
    print filename
    found_paraghaph = fetch_from_my_text_library(filename)

    stream = lucene.TokenSources.getTokenStream("contents", found_paraghaph, analyzer);
    scorer = lucene.Scorer(query, "contents", lucene.CachingTokenFilter(stream))
    highligter = lucene.Highligter(scorer)
    fragment = highligter.getBestFragment(analyzer, "contents", found_paraghaph)
    print '>>>' + fragment 
```

但这一切都以错误结束：

```
Traceback (most recent call last):
  File "./search.py", line 76, in <module>
    scorer = lucene.Scorer(query, "contents", lucene.CachingTokenFilter(stream))
NotImplementedError: ('instantiating java class', <type 'Scorer'>) 
```

所以，我猜，Lucene 的这一部分还没有在 pyLucene 中实现。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:53:09.340

我也有类似的错误。我认为这个类的包装器还没有为 Pylucene v3.6 实现。

您可能想尝试以下方法：

```
analyzer = StandardAnalyzer(Version.LUCENE_CURRENT)

# Constructs a query parser.
queryParser = QueryParser(Version.LUCENE_CURRENT, FIELD_CONTENTS, analyzer)

# Create a query
query = queryParser.parse(QUERY_STRING)

topDocs = searcher.search(query, 50)

# Get top hits
scoreDocs = topDocs.scoreDocs
print "%s total matching documents." % len(scoreDocs)

HighlightFormatter = SimpleHTMLFormatter();
highlighter = Highlighter(HighlightFormatter, QueryScorer (query))

for scoreDoc in scoreDocs:
    doc = searcher.doc(scoreDoc.doc)
    text = doc.get(FIELD_CONTENTS)
    ts = analyzer.tokenStream(FIELD_CONTENTS, StringReader(text))
    print doc.get(FIELD_PATH)
    print highlighter.getBestFragments(ts, text, 3, "...")
    print "" 
```

请注意，我们为搜索结果中的每个项目创建令牌流。

# asp.net-mvc - Html.Actionlink 将空值传递给控制器

> ID：11436182
> 
> 赞同：1
> 
> 时间：2012-07-11T15:33:07.453
> 
> 标签：asp.net-mvc, parameters, null, actionlink

我的控制器中有这个方法，称为“DirectorySearchController”

```
public ActionResult PersonDetails(FoundPerson person) //for some reason person is null here
{
    DirectoryViewModel viewModel = new DirectoryViewModel();
    viewModel.person = person;
    return View(viewModel);
} 
```

当我使用 Html.Actionlink 从视图向它传递一些参数时，它返回一个空值

```
<ul data-role="listview">
    @if (ViewBag.Message == "NO RESULTS FOUND")
    {
        <li>@ViewBag.Message</li>
    }
    else
    {
            foreach (var employee in Model)
            {
                <li>
                    <div class="ui-grid-b">
                        <div class="ui-block-a" style="width:20%; vertical-align:middle"><img src="@employee.pictureURL" width="40px" height="40px"/></div>
                        <div class="ui-block-b" style="width:80%; vertical-align:middle">@Html.ActionLink(employee.name, "PersonDetails", "DirectorySearch", new { person = employee}, null)</div>
                    </div>
                </li>
            }
    }

</ul> 
```

但有趣的是，当我在不使用“new”关键字的情况下传递参数时，它传递了正确的值。但是，问题是我需要传递多个参数，所以我需要使用“new”关键字。

```
<div class="ui-block-b" style="width:80%; vertical-align:middle">@Html.ActionLink(employee.name, "PersonDetails", "DirectorySearch", employee, null)</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:08:41.333

我认为您没有使用正确的 ActionLink 重载。尝试其中任何一个

第一个应该主要根据您的情况工作：

```
<%=Html.ActionLink(employee.Name, "PersonalDetails", "DirectorySearch", new { person = employee }, null)%>

<%=Html.ActionLink(employee.Name, "PersonalDetails", new {person = employee})%> 
```

这里只是一个建议。理想情况下，我会使用输入提交将数据发布到控制器。您可以在控制器端使用模型类或 FormCollection 来检索您在视图中输入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:14:39.253

您不应将模型传递给控制器​​操作，如`new { person = employee }`. `Html.ActionLink`因为发生的情况是，当您生成操作链接时，您传递的对象将转换为`RouteValueDictionary`将传递给的对象，`UrlHelper`以将路由字典值附加到链接。

当您像在第一种情况下一样传递一个匿名对象时，`RouteValueDictionary`存储一个带有名称的参数`person`并设置它看到您传递了一个对象的值，它无法序列化完整的实例并将其设置为单个属性，所以它将模型的类型名称设置`Employee`为人员的值。因此，您将看到生成的链接为*http://someserver/DirectorySearch/PersonDetails?person=Models.Employee*

如果您像在第二种情况下那样传递一个实例，那么它会迭代所有属性并创建键/值对，而键是属性名称，值是属性值，最后它们都作为查询字符串附加到链接中。如果生成的 url 为*http://someserver/DirectorySearch/PersonDetails?Property1=Value1&Property2=Value2*

**正确的**

```
@Html.ActionLink(employee.name, "PersonDetails", "DirectorySearch", employee, null) 
```

**错误的**

```
@Html.ActionLink(employee.name, "PersonDetails", "DirectorySearch", new {person = employee }, null) 
```

您可以使用匿名对象将路由参数传递给操作链接，但此时您不应传递引用类型，而是传递整数、字符串等内置类型。

前任。

```
@Html.ActionLink(employee.name, "PersonDetails", "DirectorySearch", 
new { Id = 23, Name = "Mark" }, null) 
```

# python - python子进程中的rsync + ssh在目录名称中出现空格错误

> ID：11436183
> 
> 赞同：5
> 
> 时间：2012-07-11T15:33:08.203
> 
> 标签：python, ssh, rsync, quoting

当我运行我的 Python 应用程序（在本地同步远程目录）时，如果包含我的应用程序的目录的名称中有一个或多个空格，我会遇到问题。目录名称出现在 ssh 选项中，例如“ `-o UserKnownHostsFile=<path>`”和“ `-i <path>`”。我尝试在生成命令字符串的函数中使用双引号路径，但没有。我也尝试像这样替换空格：`path.replace(' ', '\\ ')`，但它不起作用。请注意，我的代码适用于不带空格的目录名。ssh 返回的错误是“行尾的垃圾”（代码 12） 生成的命令行似乎没问题..

```
rsync -rztv --delete --stats --progress --timeout=900 --size-only --dry-run \
    -e 'ssh -o BatchMode=yes \
    -o UserKnownHostsFile="/cygdrive/C/Users/my.user/my\ app/.ssh/known_hosts" \
    -i "/cygdrive/C/Users/my.user/my\ app/.ssh/id_rsa"'
    user@host:/home/user/folder/ "/cygdrive/C/Users/my.user/my\ app/folder/" 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:46:13.177

您是否尝试过将命令构建为参数列表 - 我在为 ssh 连接传递密钥文件时遇到了类似的问题：

```
command = [
  "rsync",
  "-rztv",
  "--delete",
  "--stats",
  "--progress",
  "--timeout=900",
  "--size-only",
  "--dry-run",
  "-e",
  "ssh -o BatchMode=yes -o UserKnownHostsFile='/cygdrive/C/Users/my.user/my\ app/.ssh/known_hosts' -i '/cygdrive/C/Users/my.user/my\ app/.ssh/id_rsa'",
  "user@host:/home/user/folder/",
  "/cygdrive/C/Users/my.user/my\ app/folder/"
]

sp = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output = sp.communicate()[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:42:56.863

为避免转义问题，请使用原始字符串，

```
raw_string = r'''rsync -rztv --delete --stats --progress --timeout=900 --size-only --dry-run -e 'ssh -o BatchMode=yes -o UserKnownHostsFile="/cygdrive/C/Users/my.user/my app/.ssh/known_hosts" -i "/cygdrive/C/Users/my.user/my app/.ssh/id_rsa"' user@host:/home/user/folder/ "/cygdrive/C/Users/my.user/my app/folder/"'''

sp = subprocess.Popen(raw_string, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output = sp.communicate()[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:39:58.557

子命令返回的数据包含空格作为分隔符。尝试更新内部字段分隔符 (IFS) 列表，例如：

```
# store a copy of the current IFS
SAVEIFS=$IFS;
# set IFS to be newline-only
IFS=$(echo -en "\n\b");

# execute your command(s)
rsync -rztv --delete --stats --progress --timeout=900 --size-only --dry-run -e 'ssh -o BatchMode=yes -o UserKnownHostsFile="/cygdrive/C/Users/my.user/my\ app/.ssh/known_hosts" -i "/cygdrive/C/Users/my.user/my\ app/.ssh/id_rsa"' user@host:/home/user/folder/ "/cygdrive/C/Users/my.user/my\ app/folder/"

# put the original IFS back
IFS=$SAVEIFS; 
```

我没有使用您的命令进行测试，尽管它在我过去尝试过的所有情况下都有效。

# ios - 从 Xcode iOS SDK 中的 SQLite 读取

> ID：11436186
> 
> 赞同：1
> 
> 时间：2012-07-11T15:33:24.393
> 
> 标签：ios, xcode, sqlite

我在 SQLite 中有一个包含大约 100 行和 6 个文本列（不超过一百个字符）的表的程序。每单击一个按钮，程序就会在视图中显示表格中一行的内容。

我的问题是我应该将整个表的内容复制到一个数组中，然后每次用户单击按钮时从数组中读取，还是每次用户单击按钮时访问数据库中的表？哪个效率更高？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:05:10.947

这一切都取决于，但是在需要数据时从数据库中检索（而不是将整个数据存储在数组中）通常是最有效地使用内存，这是一种非常宝贵的资源。我最奢侈的内存使用是存储一组表唯一标识符（即主键列表，以正确的顺序返回），这样我就不会每次都扫描数据库，但我的唯一标识符总是数字，所以它不会占用太多内存。所以，对于这种大小的东西，我通常：

*   打开数据库；
*   `ORDER BY`加载一个仅包含表的唯一标识符的数组（使用 SQL子句以正确的顺序为我的表视图返回）；
*   随着表格单元的构建，我将返回数据库并获取与我为该表格行跟踪的唯一标识符相对应的那一行所需的几个字段；
*   当我转到详细信息视图时，我将再次从数据库中获取那一行；和
*   完成后，我将关闭数据库

这会产生良好的性能，同时不会过多地消耗内存。如果表格不同（大得多或小得多），我可能会建议不同的方法，但鉴于您对数据的描述，这对我来说似乎是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:35:45.353

对我来说 - 为每个视图加载重新读取数据库并在完成后删除内容要容易得多。

将内容保存在内存中的开销太大，无法抵消小数据集的快速读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:51:06.313

100 行 6 列并不是很多数据。iOS 能够处理比这更大的数据并且非常有效。所以不用担心创建一个新数组。从数据库读取应该可以正常工作。

# ruby-on-rails - Rails 密码登录

> ID：11436193
> 
> 赞同：5
> 
> 时间：2012-07-11T15:33:57.617
> 
> 标签：ruby-on-rails, authentication, passwords

密码保护视图的最佳方法是什么？我已经在生成密码，但我不需要用户名和密码登录，只需要密码。我将密码当前作为属性存储在 File 类中，并且正在使用它：

```
before_filter :restrict, :only => :show    

authenticate_or_request_with_http_basic do |password|
  password == @file.password
end 
```

但是，它仍然会提示用户输入用户名，并且由于缺少用户名而无法正确登录。有没有办法使用这种方法，只有提示要求输入密码？如果不是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:35:04.450

authenticate_or_request_with_http_basic 使用 HTTP Basic Auth 实现，需要输入用户名和密码的组合。如果要启用仅密码身份验证，则必须编写自己的身份验证方法

```
before_filter :restrict, :only=>:show

def restrict(password)
  render :status=>401, :text=>"Unathorized" unless password == @file.password
end 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-11T15:37:35.910

为什么不只检查新活动的开头（onCreate），如果密码为假，则返回上一个活动？

就像是：

```
if (password.equals(password)){
contiue activity
}else{
//return to previous tread
finish()
} 
```

# ios - ios ShareKit 2.0 从 facebook 获取用户好友列表的方法？

> ID：11436197
> 
> 赞同：0
> 
> 时间：2012-07-11T15:34:08.420
> 
> 标签：ios, facebook, list, friend, sharekit

ShareKit 2.0 ios sdk 中是否有返回登录用户（facebook）朋友的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:21:49.867

不，不是的。但是您可以将 SHKFacebook 子类化并从 Facebook 请求它，只要可以通过 Graph API 获取此信息

# java - 在从独立相机捕获的图像上绘制文本（时间戳）

> ID：11436201
> 
> 赞同：3
> 
> 时间：2012-07-11T15:34:11.950
> 
> 标签：java, android, text, bitmap, timestamp

我在下面有我的代码，点击打开相机，拍照，从相机中获取照片，然后放入图像视图。但是我想拍摄图像并在图像上应用文本（某种时间戳，最好是图像中的时间戳，或者只是系统日期时间）并保存为 jpeg。

如果有人可以帮助我，那就太棒了。

```
public class PhotoIntentActivity extends Activity {

private static final int ACTION_TAKE_PHOTO_B = 1;

private static final String BITMAP_STORAGE_KEY = "viewbitmap";
private static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY =  "imageviewvisibility";
private ImageView mImageView;
private Bitmap mImageBitmap;

private String mCurrentPhotoPath;

private static final String JPEG_FILE_PREFIX = "IMG_";
private static final String JPEG_FILE_SUFFIX = ".jpg";

private AlbumStorageDirFactory mAlbumStorageDirFactory = null;

/* Photo album for this application */
private String getAlbumName() {
    return getString(R.string.album_name);
}

private File getAlbumDir() {
    File storageDir = null;

    if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {

        storageDir = mAlbumStorageDirFactory.getAlbumStorageDir(getAlbumName());

        if (storageDir != null) {
            if (! storageDir.mkdirs()) {
                if (! storageDir.exists()){
                    Log.d("CameraSample", "failed to create directory");
                    return null;
                }
            }
        }

    } else {
        Log.v(getString(R.string.app_name), "External storage is not mounted READ/WRITE.");
    }

    return storageDir;
}

private File createImageFile() throws IOException {
    // Create an image file name

    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
    File albumF = getAlbumDir();
    File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX, albumF);

    return imageF;
}

private File setUpPhotoFile() throws IOException {

    File f = createImageFile();
    mCurrentPhotoPath = f.getAbsolutePath();

    return f;
}

private void setPic() {

    /* There isn't enough memory to open up more than a couple camera photos */
    /* So pre-scale the target bitmap into which the file is decoded */

    /* Get the size of the ImageView */
    int targetW = mImageView.getWidth();
    int targetH = mImageView.getHeight();

    /* Get the size of the image */
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    /* Figure out which way needs to be reduced less */
    int scaleFactor = 1;
    if ((targetW > 0) || (targetH > 0)) {
        scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
    }

    /* Set bitmap options to scale the image decode target */
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

 /* NEWELY ADDED CODE */
    /* Decode the JPEG file into a Bitmap */
    Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions); 
    Bitmap replacedBitmap = timestampItAndSave(bitmap); 

    /* Associate the Bitmap to the ImageView */
    mImageView.setImageBitmap(replacedBitmap); 
    mImageView.setVisibility(View.VISIBLE);
 /* NEWELY ADDED CODE */
}

private void galleryAddPic() {
        Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
        File f = new File(mCurrentPhotoPath);
        Uri contentUri = Uri.fromFile(f);
        mediaScanIntent.setData(contentUri);
        this.sendBroadcast(mediaScanIntent);
}

private void dispatchTakePictureIntent(int actionCode) {

    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    switch(actionCode) {
    case ACTION_TAKE_PHOTO_B:
        File f = null;

        try {
            f = setUpPhotoFile();
            mCurrentPhotoPath = f.getAbsolutePath();
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
        } catch (IOException e) {
            e.printStackTrace();
            f = null;
            mCurrentPhotoPath = null;
        }
        break;

    default:
        break;          
    } // switch

    startActivityForResult(takePictureIntent, actionCode);
}

private void handleBigCameraPhoto() {

    if (mCurrentPhotoPath != null) {
        setPic();
        galleryAddPic();
        mCurrentPhotoPath = null;
    }

}

Button.OnClickListener mTakePicOnClickListener = 
    new Button.OnClickListener() {
    public void onClick(View v) {
        dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mImageView = (ImageView) findViewById(R.id.imageView1);
    mImageBitmap = null;

    Button picBtn = (Button) findViewById(R.id.btnIntend);
    setBtnListenerOrDisable( 
            picBtn, 
            mTakePicOnClickListener,
            MediaStore.ACTION_IMAGE_CAPTURE
    );

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
        mAlbumStorageDirFactory = new FroyoAlbumDirFactory();
    } else {
        mAlbumStorageDirFactory = new BaseAlbumDirFactory();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case ACTION_TAKE_PHOTO_B: {
        if (resultCode == RESULT_OK) {
            handleBigCameraPhoto();
        }
        break;
    } // ACTION_TAKE_PHOTO_B
  }
}

// Some lifecycle callbacks so that the image can survive orientation change
@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);
    outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);
    mImageView.setImageBitmap(mImageBitmap);
    mImageView.setVisibility(
            savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? 
                    ImageView.VISIBLE : ImageView.INVISIBLE
    );

}

/**
 * Indicates whether the specified action can be used as an intent. This
 * method queries the package manager for installed packages that can
 * respond to an intent with the specified action. If no suitable package is
 * found, this method returns false.
 * http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html
 *
 * @param context The application's environment.
 * @param action The Intent action to check for availability.
 *
 * @return True if an Intent with the specified action can be sent and
 *         responded to, false otherwise.
 */
public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
        packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
}

private void setBtnListenerOrDisable( 
        Button btn, 
        Button.OnClickListener onClickListener,
        String intentName
) {
    if (isIntentAvailable(this, intentName)) {
        btn.setOnClickListener(onClickListener);            
    } else {
        btn.setText( 
            getText(R.string.cannot).toString() + " " + btn.getText());
        btn.setClickable(false);
    }
}

  } 
```

在 4.0 模拟器上出现错误。日志猫。

```
 07-12 20:53:50.510: D/gralloc_goldfish(545): Emulator without GPU emulation detected.
 07-12 20:53:54.861: W/IInputConnectionWrapper(545): showStatusIcon on inactive      InputConnection
 07-12 20:54:00.700: D/dalvikvm(545): GC_FOR_ALLOC freed 114K, 3% free 10052K/10311K,      paused 217ms
 07-12 20:54:00.710: I/dalvikvm-heap(545): Grow heap (frag case) to 11.072MB for           1228816-byte allocation
 07-12 20:54:00.860: D/dalvikvm(545): GC_CONCURRENT freed 3K, 3% free 11249K/11527K,      paused 4ms+3ms
 07-12 20:54:00.960: D/AndroidRuntime(545): Shutting down VM
 07-12 20:54:00.960: W/dalvikvm(545): threadid=1: thread exiting with uncaught      exception (group=0x409961f8)
 07-12 20:54:01.000: E/AndroidRuntime(545): FATAL EXCEPTION: main
 07-12 20:54:01.000: E/AndroidRuntime(545): java.lang.RuntimeException: Failure      delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity      {com.example.android.photobyintent/com.example.android.photobyintent.PhotoIntentActivity}:      java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor
 07-12 20:54:01.000: E/AndroidRuntime(545):     at      android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at      android.app.ActivityThread.handleSendResult(ActivityThread.java:3019)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at      android.app.ActivityThread.access$1100(ActivityThread.java:122)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at      android.app.ActivityThread$H.handleMessage(ActivityThread.java:1176)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at android.os.Handler.dispatchMessage(Handler.java:99)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at android.os.Looper.loop(Looper.java:137)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at android.app.ActivityThread.main(ActivityThread.java:4340)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at java.lang.reflect.Method.invokeNative(Native Method)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at java.lang.reflect.Method.invoke(Method.java:511)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at dalvik.system.NativeStart.main(Native Method)
 07-12 20:54:01.000: E/AndroidRuntime(545): Caused by: java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor
 07-12 20:54:01.000: E/AndroidRuntime(545):     at android.graphics.Canvas.<init>  (Canvas.java:133)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at com.example.android.photobyintent.PhotoIntentActivity.timestampItAndSave(PhotoIntentActivity.java:103)
 07-12 20:54:01.000: E/AndroidRuntime(545):     at com.example.android.photobyinten 
```

t.PhotoIntentActivity.setPic(PhotoIntentActivity.java:154) 07-12 20:54:01.000: E/AndroidRuntime(545): at com.example.android.photobyintent.PhotoIntentActivity.handleBigCameraPhoto(PhotoIntentActivity.java:199) 07-12 20:54:01.000: E/AndroidRuntime(545): 在 com.example.android.photobyintent.PhotoIntentActivity.onActivityResult(PhotoIntentActivity.java:244) 07-12 20:54:01.000: E/AndroidRuntime(545): 在 android .app.Activity.dispatchActivityResult(Activity.java:4649) 07-12 20:54:01.000: E/AndroidRuntime(545): 在 android.app.ActivityThread.deliverResults(ActivityThread.java:2972) 07-12 20:54 :01.000: E/AndroidRuntime(545): ... 11 更多

使用绘制位图更新了代码。

```
 private Bitmap timestampItAndSave(Bitmap toEdit){
    Bitmap dest = Bitmap.createBitmap(toEdit.getWidth(), toEdit.getHeight(), Bitmap.Config.ARGB_8888);

       SimpleDateFormat sdf = new     SimpleDateFormat("YYYY-MM-DD HH:MM:SS");
      String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

    Canvas cs = new Canvas(dest);
    Paint tPaint = new Paint();
    tPaint.setTextSize(35);
    tPaint.setColor(Color.BLUE);
    tPaint.setStyle(Style.FILL);
    float height = tPaint.measureText("yY");
    cs.drawText(dateTime, 20f, height+15f, tPaint);
    cs.drawBitmap(dest,0 ,0,tPaint);
   try {
        dest.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/timestamped")));

    } catch (FileNotFoundException e) {
    e.printStackTrace();
    return null;
  }
    return dest;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:21:40.977

您不想将其放在 onDraw 方法中，因为只要 View 无效（您不想要）就会调用该方法。

只需创建一个方法并将该代码放入其中即可。获得图像后调用它，如下所示：

```
private Bitmap timestampItAndSave(Bitmap toEdit){
    Bitmap dest = Bitmap.createBitmap(toEdit.getWidth(), toEdit.getHeight(), Bitmap.Config.ARGB_8888);

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

    Canvas cs = new Canvas(dest);
    Paint tPaint = new Paint();
    tPaint.setTextSize(35);
    tPaint.setColor(Color.BLUE);
    tPaint.setStyle(Style.FILL);
    float height = tPaint.measureText("yY");
    cs.drawText(dateTime, 20f, height+15f, tPaint);
    try {
        dest.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/timestamped")));
    } catch (FileNotFoundException e) {
    e.printStackTrace();
    return null;
  }
    return dest;
} 
```

我还建议不要将其保存到“/sdcard/”，而是使用 Environment.getExternalStorageDirectory()（已经为您实现）

编辑：还注意到您正在从 myImageBitmap 创建第二个位图；有必要吗？

# ios - 更改主 nib 文件基本名称、可执行文件名称和更新应用程序

> ID：11436203
> 
> 赞同：2
> 
> 时间：2012-07-11T15:34:27.467
> 
> 标签：ios, ipad, nib

我的应用程序的 1.0 版本在 plist 文件中将“主 nib 文件基本名称”设置为 MainWindow。现在在 2.0 中，我已将其更改为 MyMainWindow 并将 MainWindow.xib 重命名为 MyMainWindow.xib。

当我们的用户将我们的应用更新到 2.0\. MainWindow.nib 是否仍将保留在应用程序包中，并且还将复制一个新文件 MyMainWindow.xib ？这有什么问题吗？我希望 iOS 现在会加载 MyMainWindow.xib 而不是 MainWindow.xib，即使它会在那里。

一般来说，我想知道应用程序包中的所有旧文件在更新后会保留在那里，还是所有东西都被替换了？当我从应用商店安装的 XCode 中执行我的应用 2.0 时，我可以在 .app 文件夹中看到两个 nib 文件。我使用[iExplorer](http://www.macroplant.com/iexplorer/)检查文件。

另一个变化是可执行文件（和包显示）名称。例如，在 1.0 app1 现在它是 app2。它会在更新时产生任何问题吗？

当我从 XCode 中执行我的应用程序 2.0 时更改应用程序 exe 名称后，从 App Store 安装的超过 1.0 的应用程序在启动时崩溃。这是控制台日志

> 7 月 12 日 16:17:36 未知 com.apple.launchd [1](http://www.macroplant.com/iexplorer/) : (UIKitApplication:com.myapp[0x8e12]) posix_spawn("/var/mobile/Applications/FFF6DFCF-F641-4E04-8774-71A2A3619BD9/myapp.app/app2 ", ...): Permission denied Jul 12 16:17:36 unknown SpringBoard[15] : Unable to get a task name port right for pid 2401: (os/kern) failure Jul 12 16:17:36 unknown com. apple.launchd [1](http://www.macroplant.com/iexplorer/) : (UIKitApplication:com.myapp[0x8e12]) Exited with code: 1 Jul 12 16:17:37 unknown SpringBoard[15] : Unable to send activation event to com.myapp animate statusBarOrientation = 2 activate: safe animationStart = 0 deactivate: : (ipc/send) invalid destination port Jul 12 16:17:37 unknown SpringBoard[15] : Application 'app2' 异常退出，退出状态为 1

虽然，如果我再次从 XCode 运行崩溃后，它会成功执行（不确定第二次运行或第三次运行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:56:07.613

因此，当我使用[testflight](https://testflightapp.com/dashboard/)更新应用程序时，一切都按预期正常工作。我已经更改了包显示名称以及可执行文件名称，更新后旧包 app1.app 被删除并且应用程序正常执行。

# sql - 如何将 2 个 Access 查询中的 4 列组合成 3 列单个查询？

> ID：11436204
> 
> 赞同：0
> 
> 时间：2012-07-11T15:34:28.237
> 
> 标签：sql, union

这个问题类似于[stackoverflow](https://stackoverflow.com/questions/5846064/sql-union-query-with-extra-field-in-results)的问题，但它确实不同。

我正在尝试将两个不同的查询组合成一个查询。每个查询有 2 列。这是一些示例数据。

```
Query #1
Country | Quantity
USA     | 312
Canada  | 513
Mexico  | 258

Query #2
Country | Quanity
USA     | 425
UK      | 394
Mexico  | 489 
```

然后最终的查询需要看起来像这样......

```
Country | Query#1 | Query #2
USA     | 312     | 425
Canada  | 513     | 0
UK      | 0       | 394
Mexico  | 258     | 489 
```

空的可以是空白的，也可以是 0 没关系。

似乎我需要使用完整的外部联接，或者有影响的东西，但是 Access 没有完整的外部联接。

我曾尝试使用联合查询，但我对它们的理解不足以完成此操作。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T15:37:25.000

您想要创建一个连接其他两个查询的查询。为了从两个查询中获取空值（或零），您需要有一个包含所有国家/地区的表和/或查询。然后，您可以像这样外部连接到其他两个表（假设 Country 表/查询称为 Country）：

```
SELECT Country.Country, Query1.Quantity, Query2.quantity 
FROM Country
LEFT OUTER JOIN Query1 ON Query1.Country = Country.Country
LEFT OUTER JOIN Query2 ON Country.Country = Query2.Country 
```

# ios - iOS 即将到期的分发配置文件问题

> ID：11436209
> 
> 赞同：8
> 
> 时间：2012-07-11T15:34:38.187
> 
> 标签：ios, provisioning-profile, in-house-distribution

我们有一个 iOS“内部”应用程序（分布式 OTA），它带有一个分发配置文件，如您所知，该应用程序将在 1 年内到期。去年我们经历了升级配置文件和分发的痛苦，所以我们熟悉使用新配置文件分发应用程序的过程，但我想问一些问题只是为了清楚起见。（我们目前距离到期还有 29 天，所以用户会收到通知）

去年，我们认为创建一个与过期配置文件同名的新分发配置文件会覆盖过期配置文件。我们错了，事实并非如此，并且该设备以 2 个同名配置文件结束。由于您无法覆盖旧配置文件，因此从维护和帮助台的角度来看，问题是当您使用新配置文件分发应用程序时，用户（在我们的例子中为数百人）仍会收到“配置文件将在 x 天后过期”的通知即使他们升级了包含新配置文件的应用程序。
可以想象，这会让用户感到困惑，也让技术部门的高层感到沮丧。据我了解，您有两种方法可以处理设备上不需要的过期配置文件（这两种方法都不是良好的用户体验）。任何一个：

1.  告诉用户忽略他们的个人资料即将到期的消息（我相信到期的个人资料通知会在第 29 天、第 15 天和每天从第 7 天开始......虽然不是积极的）并让他们使用新的升级应用程序轮廓。
    或者
2.  用户使用新配置文件升级应用程序后，让他们在“设置”>“配置文件”中手动删除即将到期的配置文件。啊！

除了引导个人用户完成整个过程之外，是否有任何解决方法可以删除过期的配置文件？我们错过了什么吗？

我不想撤销过期配置文件中包含的证书，因为这会带来更多问题 - 即应用程序不适用于不升级的用户。

简而言之，我们只想有一个流程来阻止过期警报，这样用户就永远不会看到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:33:36.663

我最近收到了来自 Apple 的关于过期配置文件对当前驻留在应用商店中的应用的影响的直接回复：

> 我了解您想知道您是否需要删除过期的证书和配置文件，以及在配置门户中采取的任何操作是否会影响当前在 App Store 上运行的应用程序。我很高兴在这件事上为您提供帮助。
> 
> 请注意，无需删除配置门户中的过期项目，所采取的任何操作也不会对商店中当前存在的应用程序产生任何影响。

不太确定这是否能回答您的整个问题，但当我想知道实时应用程序会发生什么时，它确实对我有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:58:03.093

如果我正确理解你的问题，我今年也遇到了同样的问题。

实际上，我必须等到个人资料过期才能续订。

当配置文件过期时，我会转到[Developer Portal](http://developer.apple.com/ios)的[Provisioning Profiles ，在配置文件的右侧，现在在](https://developer.apple.com/ios/manage/provisioningprofiles/index.action)*Edit Button*旁边会有一个名为*Re-new*的新按钮。

单击“*更新*”应更新当前配置文件。

更新配置文件后，我的团队将安装更新的配置文件。

（我通过邮件发送了更新的配置文件，从[供应配置文件](https://developer.apple.com/ios/manage/provisioningprofiles/index.action)页面下载配置文件）

如果该选项由于某种原因不起作用，您也可以创建一个新`Provisioning Profile`的 , 并将其`App ID`通过电子邮件发送给您的团队。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:34:57.563

如果您使您的应用成为应用商店的一部分，它们将不会过期。您可以为此收取很多费用，并向您的客户提供兑换代码，或者免费提供并进行某种授权。

我正在与一个私人分发 iPad 的企业客户合作。iPad 并没有连接计算机来同步应用程序，但在配置文件制作后的一年一天，所有远程销售团队都无法访问该应用程序。该应用程序的下载量为 1.6 GB。所以这只发生了一次，应用程序何时作为免费应用程序进入商店。

# git - 将未提交的更改从 master 移动到分支

> ID：11436211
> 
> 赞同：2
> 
> 时间：2012-07-11T15:34:48.510
> 
> 标签：git

我最近开始对我的主分支进行一些更改以添加 featureX。我创建了 1 个新文件并编辑了 6 个其他文件。我没有提交任何更改。目前，我想在一个单独的分支上处理 featureX 并保持 master 不变，直到我确定 featureX 正常工作。

我知道我应该在开始对 featureX 进行这些更改之前启动一个新分支，但是无论如何，是否可以将我对 master 分支所做的未提交更改放入 featureX 分支并将 master 恢复到其 pre featureX 状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:40:28.883

创建一个新分支 ( `git checkout -b your_new_feature`) 应该可以完成这项工作 - 否则，您可以尝试以下操作：

```
git stash
git checkout -b your_new_feature
git stash apply 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:39:33.813

您需要的是`stash`消除更改，然后将其应用到其他地方：

```
git stash
git checkout -b other_branch
git stash apply 
```

`git stash` [在此处](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)阅读更多信息。

* * *

正如我*刚刚*了解到（并尝试过）的那样，您实际上可以只签出到您的分支，git 会记住哪些文件被更改了。所以

```
git checkout -b other_branch 
```

应该足够了。

* * *

注意：学习也很重要`git stash`。在这种情况下，没有问题。但是，如果`other_branch`已经存在，它可能有自己的更改，因此可能存在合并冲突。在那种情况下，只需编写

```
git checkout other_branch 
```

可能会失败并显示如下消息：

> 错误：您对 'whatever' 进行了本地更改；不能切换分支。

在这种情况下，您应该使用上面和后面的方法`git stash apply`，解决可能的冲突。

# xml - 如何将 Subversion 日志导出到电子表格

> ID：11436214
> 
> 赞同：20
> 
> 时间：2012-07-11T15:34:54.990
> 
> 标签：xml, svn, logging, tortoisesvn, spreadsheet

有没有办法将 Subversion 日志消息导出为电子表格（excel、csv 等）格式？

从 TortoiseSVN 的日志消息窗口复制时，它会粘贴以下格式的文本：

```
Revision: 174
Author: CARDINALHEALTH\enrique.colon
Date: Wednesday, July 11, 2012 9:37:02 AM
Message: CR #58514
----
Modified : /trunk/ob_progs/utility/connect_peek 
```

如有必要，我可以创建一个脚本将其重新格式化为 CSV。但我真的不想:(

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-07-12T19:58:26.523

1.  使用以下 Subversion 命令从存储库的日志中创建一个 xml 文件：

    **svn log -v --xml > repository_log.xml**

2.  将 xml 文件导入**Excel**电子表格（不确定它是否适用于 LibreOffice/OpenOffice），例如从 cmd：

    **启动excel repository_log.xml**

3.  然后，您可以将其保存为电子表格。

**就是这样！**

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-11T17:37:50.937

由于您使用的是 TortoiseSVN，因此在 Windows 上，一个直接的方法是使用 PowerShell。从这个函数开始，将 svn 日志数据转换为 PowerShell 对象：

```
Function Get-SvnLogData()
{
    ([xml](svn log -v --xml)).log.logentry | % {
        $nestedEntry = $_
        $_.paths.path | % {
            $path = $_
            $nestedEntry | Select-Object -Property `
                Author, `
                @{n='Revision'; e={([int]$_.Revision)}}, `
                @{n='Date';     e={Get-Date $_.Date  }}, `
                @{n='Action';   e={$path.action      }}, `
                @{n='Path';     e={$path.InnerText   }}`
        }
    }
} 
```

默认输出是一个列表，例如：

```
author   : smith
Revision : 29091
Date     : 6/26/2012 7:30:44 AM
Action   : M
Path     : /Utility/trunk/Distribution/file1.txt

author   : jones
Revision : 28987
Date     : 6/21/2012 3:56:51 PM
Action   : M
Path     : /Utility/trunk/Distribution/file2.txt

author   : msorens
Revision : 28934
Date     : 6/21/2012 8:22:17 AM
Action   : M
Path     : /Utility/trunk/Distribution/file3.txt

author   : jones
Revision : 28835
Date     : 6/19/2012 8:56:08 AM
Action   : A
Path     : /Utility/trunk/DAL/stuff.txt
. . . 
```

* * *

但是，使用此命令...

```
Get-SvnLogData | Format-Table -AutoSize 
```

...您可以告诉 PowerShell 给您一个表格而不是列表，例如：

```
author     Revision Date                   Action Path
------     -------- ----                   ------ ----
smith         29091 6/26/2012 7:30:44 AM   M      /Utility/trunk/Distribution/file1.txt
jones         28987 6/21/2012 3:56:51 PM   M      /Utility/trunk/Distribution/file2.txt
msorens       28934 6/21/2012 8:22:17 AM   M      /Utility/trunk/Distribution/file3.txt
jones         28835 6/19/2012 8:56:08 AM   A      /Utility/trunk/DAL/stuff.txt
. . . 
```

* * *

要真正回答您的问题 :-) 您可以轻松地将输出转换为 CSV 并使用如下命令将其发送到文件：

```
Get-SvnLogData | Export-Csv -Path temp.csv 
```

双击生成的文件在 Excel 中打开它：

![SVN 转 Excel](../Images/96fb75184b9d988c82c058bcba127037.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T19:26:21.580

Chris West 提出了一个非常简单但有效的解决方案：http: ~~[//gotochriswest.com/blog/2012/10/02/svn-log-to-csv-converter/](http://gotochriswest.com/blog/2012/10/02/svn-log-to-csv-converter/)~~ 实际上页面似乎移到了这里： [http： //cwestblog.com/2012/10/02/svn-log-to-csv-converter/](http://cwestblog.com/2012/10/02/svn-log-to-csv-converter/)

他在该页面上列出了两个解决方案。第一个是输出 CSV 的 Java 程序。第二个是将粘贴的 SVN 日志转换为 CSV 的 JSBin 页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-12T13:38:50.113

Michael Sorens 的回答很棒，这就是我提取 SVN 日志数据的方式。我正在发布一个补充答案，向您展示如何将他的解决方案应用到可以立即运行的脚本文件中。

创建下面看到的脚本并将其保存到 .PS1 文件。在基本记事本程序中打开并查看文件。然后固定文件。现在您所要做的就是右键单击我的记事本任务栏图标，将文件悬停，右键单击该文件，从弹出窗口中选择“使用 PowerShell 运行”。在一个实例中，会弹出 CSV 数据文件，对我来说，它会在 Excel 中打开。

关于您可能要查看和修改的脚本文件。

*   我的仓库有大量提交，所以我只检索了最后 20 个
*   更新文件路径
*   使用 Invoke-Item cmdlet[自动打开输出文件](https://stackoverflow.com/questions/40163076/opening-the-output-file-automatically/40163845)
*   正如此线程中所建议的，您可以添加`@{n='Message'; e={$_.msg }}`

**获取-SvnLogData.ps1**

```
# Get-SvnLogData | sort-Object @{Expression="Date"; Descending=$true} | Select-Object -first 20 | Export-Csv -Path temp.csv

#############################################################
# <STEP 1: MUST FIRST CREATE THIS FUNCTION.....>
    Function Get-SvnLogData()
    {
        ([xml](svn log -v --xml)).log.logentry | % {
            $nestedEntry = $_
            $_.paths.path | % {
                $path = $_
                $nestedEntry | Select-Object -Property `
                    Author, `
                    @{n='Revision'; e={([int]$_.Revision)}}, `
                    @{n='Date';     e={Get-Date $_.Date  }}, `
                    @{n='Action';   e={$path.action      }}, `
                    @{n='Path';     e={$path.InnerText   }}`
            }
        }
    }
# <\STEP 1>

# <STEP 2: NAVIGATE TO THE DIRECTORY.....>
    cd \

    cd SVN\BusinessAnalysts\SSRSReports\ssrs2016_solution
# <\STEP 2>

# <STEP 3: EXTRACT THE LOGDATA TO CSV; OPEN THE FILE.....>    
    Get-SvnLogData | sort-Object @{Expression="Date"; Descending=$true} | Select-Object -first 20 | Export-Csv -Path temp.csv

    #REM https://social.technet.microsoft.com/Forums/windowsserver/en-US/399abe9a-195c-4362-9081-6fd9d79b88ad/need-help-converting-getlocation-info-to-string?forum=winserverpowershell 
    $CurrentDirectory= get-location
    $path = $CurrentDirectory.tostring() + "\"

    Invoke-Item $path"temp.csv"
# <\STEP 3>

############################################################# 
```

**补习：PS1 文件 - 使用 PowerShell 运行**

[![在此处输入图像描述](../Images/cdcc8f55f6b202496c63a35d002dcd34.png)](https://i.stack.imgur.com/vnHiK.png)

# jsp - JSP 在 https 后面显示源代码

> ID：11436217
> 
> 赞同：1
> 
> 时间：2012-07-11T15:35:02.320
> 
> 标签：jsp, tomcat, apache2

这是一个奇怪的问题。我有一个网站没有正确呈现它的代码。它是 Tomcat 5.0.27-2 服务器（我知道...旧）和 Apache 2.0.46-77 服务器。我们目前无法升级它们，因为这是一个比我们现在允许的更大的变化。

无论如何，这就是发生的事情：

```
Go to https://mysite.com/mysite and the JSP renders correctly
Go to https://www.mysite.com/mysite and the RAW JSP is displayed, no rendering
Go to https://1.2.3.4/mysite and you get the TomCat welcome page. 
```

不得不使用代码块，因为我无法发布无效的 IP url。

我确定这是一个配置设置，但我不知道它可能是什么。有一个问题是我们发布的 SSL 是针对 mysite.com 而不是 www.mysite.com，但我认为这不是导致它的原因。如果我可以将所有流量（www.mysite.com 和 IP）重定向到 mysite.com，我会很高兴。

我查看了 httpd.conf 文件。我目前在 VirtualHosts 中有以下内容：

```
<VirtualHost 1.2.3.4:80>
 ServerName mysite.com
 DocumentRoot /mysite_root/ROOT
 ServerAdmin me@me.com
<Location "/*.jsp">
  JkUriSet worker ajp13:localhost:8009
</Location>
<Location "/*/*.jsp">
  JkUriSet worker ajp13:localhost:8009
</Location>
<Location "/*/*/*/*/*/*.jsp">
  JkUriSet worker ajp13:localhost:8009
</Location>
  RewriteEngine on
  RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
  RewriteRule .* - [F]
</VirtualHost> 
```

我已将文件更新如下：

httpd.conf

```
<VirtualHost 1.2.3.4:80>
 ServerName mysite.com
 DocumentRoot /mysite_root/ROOT
 ServerAdmin me@me.com
 JkMount /*.jsp worker1
 JkMount /servlet/* worker1
 RewriteCond %{HTTP_HOST} ^www.mysite.com [nocase]
 RewriteRule ^(.*)         https://www.mysite.com/$1 [last,redirect=301]
</VirtualHost> 
```

ssl.conf

```
<VirtualHost 1.2.3.4:443>
 ServerName mysite.com
 DocumentRoot /mysite_root/ROOT
 ServerAdmin me@me.com
 JkMount /*.jsp worker1
 JkMount /servlet/* worker1
 RewriteCond %{HTTP_HOST} ^www.mysite.com [nocase]
 RewriteRule ^(.*)         https://www.mysite.com/$1 [last,redirect=301]
</VirtualHost> 
```

mod_jk.conf

```
LoadModule  jk_module   modules/mod_jk.so
<IfModule jk_module>
  JkWorkersFile /etc/httpd/conf/workers.properties
  JkShmFile     /var/log/httpd/mod_jk.shm
  JkLogFile     /var/log/httpd/mod_jk.log
  JkLogLevel    info
  JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "
  JkWatchdogInterval 60  
</IfModule> 
```

worker.properties

```
worker.list=worker1

worker.worker1.type=ajp13
worker.worker1.host=localhost
work.worker1.port=8009 
```

当我重新启动 httpd 时，没有错误，它会看到 java_home 和 catalina_home

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:23:01.863

您需要确保您的指令在您拥有`JkMount`的所有部分中重复。如果您没有针对其中一种情况，则 Apache httpd 将改为提供请求。`<VirtualHost>``httpd.conf``JkMount`

您的问题还表明您正在`Alias`为您的 web 应用程序的 docBase 设置 URI。这不是推荐的技术，因为它可以允许远程客户端请求`/META-INF/context.xml`或`/WEB-INF/web.xml`获取有关您的 web 应用程序的各种重要信息（数据库凭据等）。

此外，Tomcat 5.0 已经过时了，您真的需要使用该程序。

# html - 带有 Appcelerator Titanium 的 HTML5 应用程序

> ID：11436219
> 
> 赞同：0
> 
> 时间：2012-07-11T15:35:04.550
> 
> 标签：html, titanium, appcelerator

我是 IT 书籍的采编编辑。我正在考虑编写一本关于使用 Appcelerator Titanium 开发 HTML5 应用程序的书。有一本专门用于开发 HTML5 应用程序的书有意义吗？如果是，你想在书中看到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:56:47.487

如果您的目标是 iOS 或 Android，我建议您应该使用 JavaScript 并生成本机应用程序。您也可以在 Titanium Web View 组件中运行任何 HTML 代码，但我不推荐它。

但是，如果您想访问其他移动操作系统，您也可以使用 Titanium，但您需要创建一个 Web 应用程序。

看看这篇文章： http: [//developer.appcelerator.com/blog/2011/09/titanium-sdk-for-mobile-web-beta-1.html](http://developer.appcelerator.com/blog/2011/09/titanium-sdk-for-mobile-web-beta-1.html) 自从那篇文章发布以来，移动网络开发已经有了很大的改进张贴。查看[http://docs.appcelerator.com](http://docs.appcelerator.com)了解 Titanium 可以做什么的最新文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T12:22:51.800

这将是一本非常小众的书，对大多数人来说没有用。使用钛，您可以：

1.  再次针对 Ti api 编写 javascript 代码，在这种情况下，在运行时会调用本机 UI 元素。

2.  使用 web 视图加载一个普通的网站，其中可以包含一个 html5 应用程序。但是，您只是使用 Titanium 作为网站的包装器。这种方法有一些价值，因为您可以使用 Titanium 来调用设备的硬件功能以响应 Web 视图中的操作。

这样做可能会更好 1\. 当您只能渲染表格时，为什么要在 Web 浏览器中渲染表格？有些人可能已经使用了 2 中的方法，但我猜他们很少。

如果您想使用 html5 技术开发移动应用程序，您最好使用 Sencha Touch 2。

# maven - Maven与warpath的瘦身战争

> ID：11436228
> 
> 赞同：3
> 
> 时间：2012-07-11T15:35:21.900
> 
> 标签：maven, war, ear, appfuse, skinny-war

我有一个项目，其中 3 个战争模块被打包在一个耳模块中。我的问题是每个库 jar 都包含在每个 war-modules 以及 ear-module 中，这使得生成的 ear-file 非常大（目前大约 190MB）。

我在这里遵循了关于使用 maven 进行瘦身战争的教程：[http ://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html](http://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html)

有了这个，我设法将耳朵的大小缩小到 45MB 左右，这很好，但是当我尝试部署到 glassfish 时，它抱怨缺少一些类。

我发现这是由于对 appfuse-struts 的依赖，它被打包为一个 war 文件。这包括在其中一个战争项目中使用战争路径依赖。

由于制作瘦战争的教程指出，在战争中找到的所有依赖项也必须在耳朵中定义。我试过这个，但是 appfuse-struts 依赖是一个战争路径，这使它不起作用。（当只向 ear pom 添加战争依赖项时，它抱怨它没有找到某些类，并且当添加战争路径依赖项时，maven 抱怨它不知道战争路径是什么。）

当战争使用战争路径依赖项时，有谁知道用瘦战争创造耳朵的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:03:07.607

我想我可能已经找到了解决方案：

在skinny wars 教程中，应该将WEB-INF/lib/*.jar 添加到packagingExcludes。然后，所有依赖项都将添加到 ear-configuration 中，使其可用于 jars。

问题在于，war 打包的依赖项不会将其传递依赖项添加到 ear 的 lib 文件夹中，因此它们要么需要找到进入 ear lib 文件夹的方式，要么需要找到 war 包的 WEB-INF/lib 文件夹。

我选择使用最后一个，将它们添加到 war-file 的 WEB-INF/lib 中。

为此，首先通过执行`mvn dependency:tree`.

接下来，找到 warpath 依赖项。就我而言，它看起来像这样：

```
 +- org.appfuse:appfuse-struts:warpath:2.0.2:compile
      |  +- org.appfuse:appfuse-web-common:war:2.0.2:compile
      |  +- org.appfuse:appfuse-web-common:warpath:2.0.2:compile
      |  +- displaytag:displaytag:jar:1.1.1:compile
      |  |  \- org.slf4j:jcl104-over-slf4j:jar:1.4.2:compile
      |  +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
      |  +- org.apache.commons:commons-io:jar:1.3.2:compile
      |  +- org.appfuse:appfuse-service:jar:2.0.2:compile
      |  |  +- velocity:velocity:jar:1.4:compile
      |  |  |  \- velocity:velocity-dep:jar:1.4:runtime
      |  |  +- org.codehaus.xfire:xfire-java5:jar:1.2.6:compile
      |  |  |  +- org.codehaus.xfire:xfire-aegis:jar:1.2.6:compile
      |  |  |  |  \- net.java.dev.stax-utils:stax-utils:jar:20040917:compile
      |  |  |  +- org.codehaus.xfire:xfire-annotations:jar:1.2.6:compile
      |  |  |  +- xfire:xfire-jsr181-api:jar:1.0-M1:compile
      |  |  |  \- org.codehaus.xfire:xfire-core:jar:1.2.6:compile
      |  |  |     +- stax:stax-api:jar:1.0.1:compile
      |  |  |     +- org.codehaus.woodstox:wstx-asl:jar:3.2.0:compile
      |  |  |     \- commons-httpclient:commons-httpclient:jar:3.0:compile
      |  |  \- org.codehaus.xfire:xfire-spring:jar:1.2.6:compile
      |  |     +- org.apache.xbean:xbean-spring:jar:2.8:compile
      |  |     \- org.codehaus.xfire:xfire-xmlbeans:jar:1.2.6:compile
      |  |        \- xmlbeans:xbean:jar:2.2.0:compile
      |  +- commons-dbcp:commons-dbcp:jar:1.2.2:compile
      |  |  \- commons-pool:commons-pool:jar:1.3:compile
      |  +- org.directwebremoting:dwr:jar:2.0.1:compile
      |  +- javax.servlet:jstl:jar:1.1.2:compile
      |  +- taglibs:standard:jar:1.1.2:compile
      |  +- opensymphony:oscache:jar:2.3:compile
      |  +- opensymphony:sitemesh:jar:2.2.1:compile
      |  +- org.tuckey:urlrewritefilter:jar:3.0.4:compile
      |  \- commons-lang:commons-lang:jar:2.4:compile 
```

因此，我们需要确保这些可用。这可以通过将 WEB-INF/lib/* 的 packagingExclude 更改为不排除所有内容来完成，而是排除除我们想要保留的内容之外的所有内容。

这可以通过以下方式完成：

```
 <packagingExcludes>
       %regex[WEB-INF/lib/(?!clickstream|struts|appfuse|commons-fileupload|commons-dbcp|dwr|oscache|sitemesh|urlrewritefilter|commons-lang|velocity|xwork|commons-digester).*.jar]
      </packagingExcludes> 
```

这将使 glassfish 不再抱怨找不到类。我还没到那里，所以可能需要包括更多的罐子，但它越来越近了。

# django - 具有多个值的美味过滤

> ID：11436229
> 
> 赞同：15
> 
> 时间：2012-07-11T15:35:22.787
> 
> 标签：django, api, rest, tastypie

我有一个关于在美味派中过滤的简单问题。

我想过滤多个值。例如：

`/api/v1/message/?accountId=1,5,12`

这不起作用。知道我该怎么做吗？

我需要使用高级过滤吗？如果是，我该如何创建这样的过滤器？一个简单轻松的 puesdo 代码示例会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T16:52:11.687

唔，

你可以这样做：

`/api/v1/message/?accountId__in=1&accountId__in=5&accountId__in=12`

PS：在过滤元属性中，添加`{'accountId': ALL}`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-03T15:06:56.113

最新版本似乎很容易工作 - 只需使用“__in”：

```
/api/v1/message/?accountId__in=1,5,12 
```

（我假设您需要在资源 Meta 类中添加一个条目，filtering = { 'accountId' : ALL }）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-11T17:26:19.567

您必须构建并应用过滤器。这是一个小片段，最好在 build_filters 中构建过滤器，然后在 apply_filters 中应用它，但你会明白的

```
class Foo(ModelResource):

    # regular stuff goes here...

    def apply_filters(self, request, applicable_filters):
        base_object_list = super(Foo, self).apply_filters(request, applicable_filters)
        query = request.GET.get('query', None)
        ids = request.GET.get('ids', None)
        filters = {}
        if ids:
            ids = ids.replace('+', ' ').split(' ')
            filters.update(dict(id__in=ids))
        if query:
            qset = (
                Q(title__icontains=query, **filters) |
                Q(description__icontains=query, **filters)
            )
            base_object_list = base_object_list.filter(qset).distinct()
        return base_object_list.filter(**filters).distinct() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-26T05:48:26.000

`/api/v1/message/?accountId__in=1,5,12`
这对我来说是正确的方法，它简单明了。

`/api/v1/message/?accountId__in=1&accountId__in=5&accountId__in=12`
这种方式很奇怪，看起来很丑。

当然，您需要 `filtering = { 'accountId' : ALL }`在资源 META 中添加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-19T17:11:38.050

您必须在**Meta 类中声明****过滤**列。这是一个*默默无闻的安全*规则。

 ***因此，**accountId__in=[..]**规则就是其中之一。

``` 过滤 = { 'accountId' : ALL } 或过滤 = { 'accountId' : [ ..., 'in' ] }

```***

# object - Paint.net 轮廓对象不起作用

> ID：11436234
> 
> 赞同：0
> 
> 时间：2012-07-11T15:35:42.247
> 
> 标签：object, outline, paint.net

我最近不得不更换电脑中的硬盘并重新安装 Paint.net。我安装了最新版本 3.5。当我复制我的插件 dll 文件集合（包括大纲对象）时，对象选项不会显示在效果菜单中。任何建议表示赞赏。

杰瑞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:35:54.493

那很奇怪。你检查过“风格化”菜单吗？

如果不存在，请重新安装 Paint.net，不要复制您的插件，从 paint.net 论坛下载此插件的当前版本并再次检查。

# php - 是否可以强制新 CRUD 表单字段的值？

> ID：11436239
> 
> 赞同：0
> 
> 时间：2012-07-11T15:35:54.800
> 
> 标签：php, user-interface, frameworks, atk4

我正在使用敏捷工具包。我的 CRUD 中有一个下拉字段。

当单击“编辑”按钮时，如何使“新建”按钮在此下拉列表中显示不同的值集？

这是我的代码：

```
 class page_things extends Page {
    function init(){
        parent::init();
        $p = $this;

        $f = $p->add('Form');

        $idCat = ($f->get('idCat')?$f->get('idCat'):$this->api->getConfig('idCat','MASP2U03'));

        $dpUE = $f->addField('dropdown', 'Category');
        $dpUE->setModel('Category');
        $dpUE->js('change',$f->js()->submit());
        $dpUE->set($idCat);

        $f->addSubmit('OK');

        $c = $f->add('CRUD');

        $c->setModel('things',array('name', 'field1', 'field2', 'field3'))->setMasterField('idCat',$idCat);

        if($f->isSubmitted()){

            $c->js(true)->show()->execute()->reload()->execute();

            }

    }
} 
```

谢谢你的帮助 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:12:29.717

利用

```
$crud=$this->add('CRUD',array('allow_add'=>false)); 
```

禁用默认添加按钮，然后添加您自己的按钮：

```
if($crud->grid)$crud->grid->addButton('Add')->js('click')
    ->frameURL('Add',$this->api->url('./new')); 
```

在此之后，您需要创建一个新页面

```
class page_things_new extends Page { 
```

并在此页面内以您希望它出现的方式定义表单，而不是“添加”单击。我不完全理解您的问题，但是通过这些说明，您可以在向 crud 添加新条目时显示不同的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:39:57.857

这是我尝试过的罗马人的替代品。它使用 $this->api->memorize 将在下拉列表中选择的 GET 变量存储在会话变量中。然后在表单中，您可以通过在模型中使用召回来设置默认选择的值。

像这样的东西

在页面/事物中

```
 // load the javascript function (see later)
 $this->js()->_load('your_univ');

 /*****************************************************************/
 /* Code to populate drop down lists - amend where as required*/
            $catList=$this->api->db->dsql()->table('category c')
                     ->field('c.id')
                     ->field('c.name')
                     ->where('c.type',$cat_type)
                     ->order('c.id')
                     ->do_getAssoc();

    // Check if one is set on URL or default from config and memorize the value
    if ($_GET['cat']){
      $cat=$_GET['cat'];
    } else {
      $cat=$this->api-getConfig('idCat');
    }
    $this->api->memorize('category',$cat);

    $f=$p->add('Form',null,null,array('form_empty'))
         ->setFormClass('horizontal bottom-padded');
    $l1=$f->addField('dropdown','category')->setValueList($catList)->set($cat);

    // calls a bit of javascript described later to reload with the parameter
    $l1->js('change')->univ()->yourfunc($p->api->getDestinationURL(null), $l1);

    .. rest of your page code goes here .. 
```

然后在 /lib/Model/Category.php

为该字段添加以下召回

```
 $this->addField('idCat')->system(true)->visible(false)
       ->defaultValue($this->api->recall('category')); 
```

请注意 system(true) 和 visible(False) 意味着它不会在 CRUD 上显示并且不可更改，但您可以使用这些选项，使其显示在 CRUD 网格中而不是表单中。

最后，一点点 javascript 使重新加载工作（罗马人可能会建议一个更好的方法来做到这一点）。确保 yourfunc 在页面和 js 中匹配。

在 /templates/js/your_univ.js 添加以下内容

```
 $.each({
        yourfunc: function(url, name){
              document.location.href=url+'&cat='+$(name).val();
        },
    },$.univ._import); 
```

我在自己的页面中有类似的代码。如果您不希望猫在 URL 上显示，您可能可以将其作为 POST 以及下拉菜单作为表单。

# c# - 哪个 LINQ 查询从 1 个表中选择不在另一个表中的行

> ID：11436242
> 
> 赞同：5
> 
> 时间：2012-07-11T15:35:58.983
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我正在开发一个应用程序，其中有 2 个不同的实体、产品和 ShoppingCarts。每个产品都是唯一的，并且具有唯一的标识符。我想添加尚未在另一个购物车中且未出售到 ShoppingCart 的产品。

产品实体简化：

```
public class Products
{
    public int Id { get; set; }
    public string Name{ get; set; }
    public bool Sold { get; set; }
} 
```

购物车实体简化：

```
public class ShoppingCarts
{
    public int Guid Guid { get; set; }
    public int ProductId { get; set; }
} 
```

因此，首先我检索所有 Product.Id，然后将它们添加到我的购物车中。我的方法如下所示：

```
private IQueryable<Products> GetAvailableProductId(int quantity)
{
    var query = (from p in _context.Set<Products>()
                join sc in _context.Set<ShoppingCarts>() on p.Id equals sc.ProductId into subset
                from sc in subset.DefaultIfEmpty()
                where !p.Sold && sc == null
                select p).Take(quantity);
    return query;
} 
```

出于某种原因，每隔一段时间，就会将具有相同 ProductId 的 2 个实体添加到不同的购物车中。这使该应用程序能够销售 2 个相同的产品。我最终通过在进行交易之前在应用程序中执行另一次检查来解决此问题。

我最近重新访问了代码并遇到了这些帖子 [LINQ Query: Determining if object in one list exists in another based on key](https://stackoverflow.com/questions/4845604/linq-query-determining-if-object-in-one-list-exists-in-another-based-on-key) [LINQ to Entity, join on NOT IN tables](https://stackoverflow.com/questions/2587359/linq-to-entity-joining-on-not-in-tables)

我的问题是，如果将我的查询更改为这样的内容会阻止双重添加。

```
private IQueryable<Products> NewGetAvailableProductId(int quantity)
{
    var query = (from p in _context.Set<Products>()
                where !_context.Set<ShoppingCarts>().Any(x => x.ProductId == p.Id) &&  !p.Sold
                select p).Take(quantity);
    return query;
} 
```

如果有任何疑问，请告诉我，以便我更好地解释这一点。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T15:57:13.987

从原始查询中获取不同的记录应该会为您提供所需的结果。注意 Take() 之前的 Distinct()。

```
var query = (from p in _context.Set<Products>()
                join sc in _context.Set<ShoppingCarts>() on p.Id equals sc.ProductId into subset
                from sc in subset.DefaultIfEmpty()
                where !p.Sold && sc == null
                select p).Distinct().Take(quantity); 
```

您得到重复的原因是原始查询将为您提供产品表和购物车表之间的*匹配列表。*例如，如果您有`product1`并且`cart1`没有购物车`cart2`，`product2`您将从加入中获得以下结果。

```
product1, cart1
product1, cart2
product2, null 
```

然后你过滤掉空购物车

```
product1, cart1
product1, cart2 
```

然后您只选择产品对象

```
product1
product1 
```

此时，您只剩下重复的产品。然后，我添加的不同功能将获取此列表并删除除一个重复条目之外的所有条目。留给你，

```
product1 
```

值得检查每个查询生成的 sql，因为即使它们产生相似的结果，它们也可能完全不同。我怀疑您的第一个查询将使用 LEFT OUTER JOIN 而第二个查询将使用 IN 子句。我会使用 LEFT OUTER JOIN，因为根据我的经验，IN 子句相当慢，应尽可能避免使用。显然，您应该在自己的环境中进行测量。

此外，您的第二个查询缺少`where !p.Sold`第一个查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T16:29:55.740

我有一种感觉，你无意中在错误的树上吠叫。

这是简而言之的场景：

*   用户 1 想要购买该产品。该应用程序检查它是否在任何购物车中。不。
*   用户 2 想要购买该产品。该应用程序检查它是否在任何购物车中。不。
*   用户 1 的线程完成了将其添加到购物车的过程。
*   用户 2 的线程完成了将其添加到购物车的过程。它假定，由于先前的检查成功，因此这样做仍然是安全的。

基本上，您需要一个事务、临界区、单例或一些类似的设备，以确保只有一个人可以将其作为单个操作*检查*并*添加*到他们的购物车中——它必须作为单个工作单元成功或失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:13:18.250

请查看这个问题：[LINQ to Entity, join on NOT IN tables](https://stackoverflow.com/questions/2587359/linq-to-entity-joining-on-not-in-tables)。比上述解决方案更清洁的方法。

查看您的查询，没有什么可以防止重复记录出现。您需要使用这个：[如何使用 Linq 从对象列表中获取唯一的属性列表？](https://stackoverflow.com/questions/568347/how-do-i-use-linq-to-obtain-a-unique-list-of-properties-from-a-list-of-objects)

# asp.net - 为什么 DataGrid 排序不适用于 AutoGenerateColumns="False"？

> ID：11436247
> 
> 赞同：1
> 
> 时间：2012-07-11T15:36:15.577
> 
> 标签：asp.net

我的以下代码片段不允许在 DataGrid 上进行排序：

```
<asp:DataGrid ID="tubewell" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" OnSortCommand="sortColumn"
            >
        <Columns>
            <asp:BoundColumn DataField="tubeWell_ID" DataFormatString="#{0:c}" 
                HeaderText="Tubewell &lt;/br&gt; ID"></asp:BoundColumn>
            <asp:BoundColumn DataField="status" HeaderText="Status" Visible="False">
            </asp:BoundColumn>
        </Columns></asp:DataGrid> 
```

以下允许：

```
<asp:DataGrid ID="tubewell" runat="server" AllowSorting="True" 
        AutoGenerateColumns="True" OnSortCommand="sortColumn"
        >

    </asp:DataGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:43:03.530

当您有 AutoGenerateColumns="false" 时，您需要手动将 SortExpression 设置为列（SortExpression="myDataFieldInTheDb" ）

# asterisk - 如何使用 Asterisk 捕获 GTalk 数据？

> ID：11436248
> 
> 赞同：0
> 
> 时间：2012-07-11T15:36:20.837
> 
> 标签：asterisk, google-talk

我通过 Asterisk 和 gtalk 聊天（使用 gmail 中的聊天框）在 IVTR 中工作，gtalk 帐户和 jabber 的配置几乎可以完美运行，除非我想从聊天中捕获数据。

使用`JABBER_RECEIVE`方法我能够捕获聊天文本，但如果没有收到任何内容并且超时结束，Asterisk 崩溃。

我不知道发生了什么，是否有另一种方法（方法或 agi）可以在 Asterisk 中捕获 gtalk 聊天而不会崩溃？

我在 CentOS 6.2 中使用 Asterisk 1.8.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:26:12.267

我不确定“捕获 gtalk 聊天”是什么意思。

如果您想显示 - 仅用于调试目的 - 发送到/来自 GTalk 的 XMPP 消息，您可以使用“jabber set debug on”。这会将所有 XMPP 消息作为 DEBUG 消息转储到 Asterisk 日志/CLI。

崩溃是“坏事”。虽然 Asterisk 1.8 中的 res_jabber 是一个社区支持模块，但您可能仍希望向[公共问题跟踪器](https://issues.asterisk.org/jira)报告任何崩溃。由于这是一次崩溃，您将被要求提供正确生成的回溯 - 可以在[此处的此 wiki 页面上找到执行此操作的说明。](https://wiki.asterisk.org/wiki/display/AST/Getting+a+Backtrace)

# c# - System.speech 在数字上说“区号”

> ID：11436249
> 
> 赞同：7
> 
> 时间：2012-07-11T15:36:22.217
> 
> 标签：c#, text-to-speech

我正在使用简单的 C# 代码让程序说话

```
 if (checkBox1.Checked == true) {
            SpeechSynthesizer speaker = new SpeechSynthesizer();
            speaker.Rate = 1;
            speaker.Volume = 100;
            speaker.Speak(stringout); 
```

问题是字符串输出包含带数字的句子。Microsoft Speech 将这些识别为“区号”。所以例如而不是说

```
sample 90 123 40 
```

我听见：

```
sample *area code* 90 123 40 
```

如何制止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:43:28.520

尝试这个：

```
speaker.SpeakSsml("sample <say-as interpret-as=\"string\" format=\”digit string\” detail=\”string\”&gt;90 123 40<say-as>"); 
```

如果可行，请对您的字符串进行 RegEx 替换，以将数字包装在该字符串中。

# c++ - 没有下一行的标准控制台输出

> ID：11436257
> 
> 赞同：1
> 
> 时间：2012-07-11T15:36:58.293
> 
> 标签：c++, console, newline

我想在一行中写 80 个（标准 conole 宽度）字符，而光标不转到下一行。只有当我想在控制台的**最后一行打印 80 个字符时才有问题。**它会滚动我不想要的情况。

看一看：

![在此处输入图像描述](../Images/b39605b9bcf20428a9cf7fc9c863a5ad.png)

我不想要换行符。有什么办法吗？:/ 我在 Windows 上，DEV-C++，使用 WinApi 颜色和移动光标（窗口也调整大小）。

感谢任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:43:32.803

不使用标准输出函数，而是使用 Windows 控制台 API 来设置光标位置和绘制字符。具体来说，看看`WriteConsoleOutput`。

[MSDN 控制台 API 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:39:53.380

你在新线上的唯一原因是因为控制台不够大，无法支持八十颗星。

所以它将光标推到下一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:44:36.140

对于系统关键控制台窗口，光标应始终保持可见，并且在达到一行中的最大字符数后，它的唯一方法是在下一个可见行上弹出（实际上没有制作任何新线）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:41:51.143

最后通过一两个“\b”将光标向后移动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:16:59.070

在原始程序中或通过管道使用另一个程序过滤输出。当您在一行上输出了太多字符时，请执行您喜欢的任何操作（即删除字符、覆盖等....）。

# r - 在 RStudio 中使用 R Markdown 打印函数中生成的绘图

> ID：11436259
> 
> 赞同：9
> 
> 时间：2012-07-11T15:37:04.947
> 
> 标签：r, ggplot2, knitr, rstudio

我试图在 R Studio 中使用 R-Markdown 功能，我试图打印在函数内部生成的绘图。这是我正在尝试做的一个基本的失败示例。

```
**Test printing plots generated in a function**
================================================

``` {r  fig.width=8, fig.height=4, warning=FALSE, eval=TRUE, message=FALSE, tidy=TRUE, dev='png', echo=FALSE, fig.show='hold', fig.align='center'}
dat <- data.frame(x=c(1:10),y=c(11:20),z=c(21:30),name=rep(c("a","b"),each=5))
library(ggplot2)

ex <- function(data){

  plot(data[,1],data[,2])
  plot(data[,1],data[,3])
}

for (i in 1:10){
t1 <- rbind(i,ex(dat))
}
t1
``` 
```

测试此代码的人，请确保将其保存为“.Rmd”文件，然后在 RStudio 工具栏中运行*knithtml()*。上面的这段代码完全适用于我想要的那种 html 输出。但是，当我用基于 ggplot 的代码替换基本绘图功能时，我无法让*knithtml()*生成我之前得到的 10 个绘图的 ggplot 输出。上面的基本绘图代码现在替换为以下代码

```
 p1 <- ggplot(data=data, aes(x=data[,1],y=data[,2]))
  p1 <- p1+geom_point()
  p1 
```

我在这里错过了一些非常简单的东西吗？

主播

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T16:58:17.777

您的代码中有两个问题：

1.  ggplot 无法识别数据 x 和 y 数据，因为它在数据环境中工作。您应该直接给它列名。
2.  你循环中的代码没有意义。您不能将绘图与索引混合...（它与基本绘图一起使用的原因是通过副作用）我已将其替换为简单的绘图命令。

以下将起作用：

```
**Test printing plots generated in a function**
================================================

``` {r  fig.width=8, fig.height=4, warning=FALSE, eval=TRUE, message=FALSE, tidy=TRUE, dev='png', echo=FALSE, fig.show='hold', fig.align='center'}
dat <- data.frame(x=c(1:10),y=c(11:20),z=c(21:30),name=rep(c("a","b"),each=5))
library(ggplot2)

ex <- function(data){
  p1 <- ggplot(data=data, aes(x=x,y=y))
  p1 <- p1+geom_point()
  return(p1) 
}

for (i in 1:2){
plot(ex(dat))
}

``` 
```

# javascript - Google Maps Javascript API“未捕获的类型异常 - 未定义不是函数”

> ID：11436276
> 
> 赞同：0
> 
> 时间：2012-07-11T15:38:04.197
> 
> 标签：javascript, google-maps-api-3

我正在尝试使用 Google Maps Javascript API 显示自定义地图。特别是，我正在尝试使用几个 jquery 脚本来显示它以允许旋转地图。我不确定那部分是否相关。

当使用标准谷歌地图数据（即地球的瓦片）运行代码时，它运行良好。所以这是我的地图创建代码：

```
 // Standard google map
     var map = new google.maps.Map2(document.getElementById('map'));
     map.setCenter(new google.maps.LatLng(37.4419, -122.1419), 13); 
```

这工作正常。但是，当我尝试使用自定义地图并为其提供我自己的图块时（我已经在另一个项目中实现了这一点，没有地图旋转），我得到“未定义不是函数”。以下是已添加以使用自定义图块而不是标准 Google 地图数据的代码：

```
google.load("maps", "2.x");

var customTypeOptions = {
        getTileUrl: function (coord, zoom) {
            var normalizedCoord = getNormalizedCoord(coord, zoom);
            if (!normalizedCoord) {
                return null;
            }
            var bound = Math.pow(2, zoom);
            return "http://MYTILESURL/" + zoom + "/" + normalizedCoord.x + "/" + (bound - normalizedCoord.y - 1) + ".jpg";
        },
        tileSize: new google.maps.Size(256, 256),
        maxZoom: 3,
        minZoom: 0,
        radius: 1024,
        name: 'custom'
    };

var customMapType = new google.maps.ImageMapType(customTypeOptions); 
```

然后在我的 initialize() 函数中：

```
// Custom map
  var myLatlng = new google.maps.LatLng(0, 0);
  var myOptions = {
    center: myLatlng,
    zoom: 0,
    streetViewControl: false,
    mapTypeControlOptions: {
    mapTypeIds: ['custom']
    }
 };

 var map = new google.maps.Map(document.getElementById('map'), myOptions);
 map.mapTypes.set('custom', customMapType);
 map.setMapTypeId('custom'); 
```

我得到的错误是显示“第 46 行”，在我的代码中是“tileSize: new google.maps.Size(256, 256)”。但是，我不确定这里报告的 46 是否与我正在阅读的 46 相同，即文件的第 46 行。

有谁知道为什么我会收到这个“未定义不是函数”错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:56:43.847

这是因为`google.maps.Size`在 GMap 库完成加载之前被访问。只需移动`google.maps`初始化函数中引用的任何内容（或在调用中使用回调选项`google.load`来做同样的事情）。

# ms-access - MS Access 2007 事件的可视化显示

> ID：11436277
> 
> 赞同：0
> 
> 时间：2012-07-11T15:38:04.207
> 
> 标签：ms-access, ms-access-2007, scheduled-tasks, gantt-chart

我目前正在研究一个包含两个表的数据库：tblAuthor 和 tblBooks。我正在寻找一种方法来生成具有强烈视觉强调的时间线外观。我不知道在 Access 中创建报告的所有可能方法，欢迎任何建议（包括放弃这是不可能的）。我希望将其格式化为类似于甘特图。

如果有这样做的方法，或者如果您有任何其他建议，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:22:53.953

我在一家开发甘特图控件的公司工作。我们仍在开发、维护和支持 ActiveX 版本，它可以无缝集成到 Access 中。以下是通用控件的一些关键功能的概述： [http ://www.youtube.com/watch?v=gxc4-R1Kn_4&feature=plcp](http://www.youtube.com/watch?v=gxc4-R1Kn_4&feature=plcp)

如果这些功能符合您的甘特图功能，您可以从我们的网站下载免费试用版。然后，您还应该下载示例集合，因为这也将为您提供如何将控件直接嵌入 Access 的示例。但是，请确保您下载 ActiveX 版本（下载前必须先注册）： http: [//www.netronic.com/gantt/gantt-software/free-gantt-chart.html](http://www.netronic.com/gantt/gantt-software/free-gantt-chart.html)

希望这可以帮助。如果您有任何问题，请发送电子邮件至 support@netronic.de，并提及 Martin 的 stackoverflow 帖子。祝你的项目好运:-)

# asp.net-mvc-3 - 无法使用部分类创建带有 EF 生成的 DBContext 类的控制器

> ID：11436278
> 
> 赞同：0
> 
> 时间：2012-07-11T15:38:04.797
> 
> 标签：asp.net-mvc-3, entity-framework-4, dbcontext

我有一个接口定义为：

```
public interface ICMDBContext
{
    DBSet<Building> {get;}
    DBSet<Room> {get;}
    more DBSet methods...

    string Save()
 } 
```

我有名为 CMDB_DataModelContainer 的 DBContext 生成类。

我有一个部分类 CMDB_DataModelContainer 它实现了 ICMDBContext 看起来像这样（是的，两者都在同一个命名空间中）：

```
public partial class CMDB_DataModelContainer : ICMDBContext
{
    string Save() { implemenation... }
} 
```

一切都编译得很好而且花花公子，但是当我尝试创建一个控制器并使用 CMDB_ModelConatiner 作为上下文类（创建一个强类型控制器）时，我得到了错误

> 生成“CMDB.Domain.Models.CMDB_DataModelContainer”时出错。尝试重建您的项目。

我删除了部分类并能够创建控制器。任何想法为什么会发生这种情况？

此外，DBContext 类位于一个单独的项目中。

它在一个单独的项目中的事实并不重要。我在同一个项目中创建了一个带有 DBcontext 类和 MVC3 应用程序的测试项目，但仍然不行。

我想要问的一个问题是，是否有人在使用模型优先方法时实际设置了存储库。我发现自己在首次使用模型时尝试应用此模式后遇到问题。

如果您想重新创建问题，只需制作 MVC 3（或 4，我使用 3）。这就是我为自己重新创建它的测试所做的。

添加一个新的 ADO.Net 实体数据模型。

*   创建两个实体：Taco 和 Filling
*   为每个添加一个“名称”标量属性。
*   添加关联 m <---> m
*   在模型文件夹中创建一个名为“Partial”的新文件夹。
*   添加一个新类 - 该类的名称应与 Context 类相同（如果您保留默认名称，则它应为 Model1Container）并位于同一命名空间中。

例如

```
public partial class Model1Container
{

} 
```

- 添加一个新的控制器“TacoController”作为强类型，你猜对了，Taco，并使用 Model1Container 作为上下文类。瞧，转载。是的，我喜欢炸玉米饼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:47:57.643

正如您可能已经发现的那样，删除（/重命名）部分类，创建控制器然后恢复您的部分类似乎是一种适当的解决方法。至于为什么：

有一次我尝试过，我注意到一些奇怪的事情：我创建的部分类文件中出现了一个新声明：

```
public DbSet<Taco> Taco { get; set; } 
```

我只能推测 VS 被部分类文件弄糊涂了——它找到了你创建的部分类文件，没有看到声明的 DBSet，尝试添加它，然后因为玉米饼太多而感到头晕目眩。

克里斯

# r - R - 记录所有地块

> ID：11436282
> 
> 赞同：2
> 
> 时间：2012-07-11T15:38:14.903
> 
> 标签：r

我在 R 中进行了大量数据探索，我想保留我生成的每个图（来自交互式 R 控制台）。我正在考虑一个目录，我绘制的所有内容都会自动保存为带时间戳的 PDF。我也不希望这会干扰绘图的正常显示。

有什么我可以添加到我`~/.Rprofile`的可以做到这一点的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T15:56:13.900

一般的想法是编写一个*脚本*来生成情节以重新生成它。ESS 文档（在自述文件中）在“使用 ESS 的哲学”下很好地说明了这一点：

> 源代码是真实的。对象是源代码的实现。每个用户修改对象的源都放置在一个或多个特定目录中，以供以后编辑和检索。

使用任何允许逐步（或按区域）执行命令的编辑器，您都可以通过这种方式跟踪您的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T18:58:57.243

最好的方法是使用脚本文件（或 sweave 或 knitr 文件），以便您可以在需要时重新创建所有图形（到 pdf 文件或其他文件中）。

但这是一种方法的开始，它可以满足您所要求的基本功能：

```
savegraphs <- local({i <- 1; 
    function(){
      if(dev.cur()>1){
        filename <- sprintf('graphs/SavedPlot%03d.pdf', i)
        dev.copy2pdf( file=filename )
        i <<- i + 1
      }
    }
})

setHook('before.plot.new', savegraphs )

setHook('before.grid.newpage', savegraphs ) 
```

现在，在您创建新图形之前，当前图形将保存到当前工作文件夹的图形文件夹中（确保它存在）。这意味着如果您添加到绘图（`lines`、`points`、`abline`等），则将包含注释。但是，您需要运行`plot.new`才能保存最后一个绘图（如果您关闭当前图形设备而不运行另一个绘图设备`plot.new`，则不会保存最后一个绘图）。

此版本将覆盖从先前 R 会话保存在同一工作目录中的绘图。如果您使用基础或网格图形以外的其他东西（甚至可能使用一些复杂的绘图），它也会失败。如果偶尔出现一些额外的图，我不会感到惊讶（当在内部创建一个图来获取一些参数时，然后立即用感兴趣的图替换）。我可能还忽略了其他一些事情，但这可能会让你开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T18:07:26.807

您可以为常用的绘图函数编写自己的包装函数。此包装函数将调用屏幕显示和带时间戳的 pdf 版本。您可以`source()`在 ~/.Rprofile 中使用此功能，以便每次运行 R 时都可以使用它。

对于 latice 的 xyplot，使用该`windows`设备进行屏幕显示：

```
library(lattice)
my.xyplot <- function(...){
    dir.create(file.path("~","RPlots"))
    my.chart <- xyplot(...)
    trellis.device(device="windows",height = 8, width = 8)
    print(my.chart)
    trellis.device(device = "pdf",
                   file = file.path("~", "RPlots",
                   paste("xyplot",format(Sys.time(),"_%Y%m%d_%H-%M-%S"),
                         ".pdf", sep = "")),
                   paper = "letter", width = 8, height = 8)
    print(my.chart)
    dev.off()
}

my.data <- data.frame(x=-100:100)
my.data$y <- my.data$x^2

my.xyplot(y~x,data=my.data) 
```

正如其他人所说，您可能应该养成使用 R 脚本工作的习惯，而不是专门从交互式终端工作。如果您保存脚本，那么将来一切都可以重现和修改。尽管如此，“情节日志”是一个有趣的想法。

# java - Java EE部署中的Spring Classloading机制

> ID：11436294
> 
> 赞同：2
> 
> 时间：2012-07-11T15:38:54.330
> 
> 标签：java, spring, classloader

我想了解 Spring Container 的 ClassLoader 是如何实现的。

这是一个示例：部署一个包含所有必要 jar 的 WAR，以便在 tomcat 的 web 容器中启动 Spring Container。

我的问题：
1\. 我认为 Spring 容器类本身是由 web-container 创建的 WAR 的 ClassLoader 加载的是否正确？
2、WAR卸载时，spring容器加载的Class[]（java.lang.Class对象）如何卸载。spring 本身有一个类加载器吗？或者它使用 webcontainer 提供的类加载器？
3\. 如果我的 Spring Container 正在继承 bean（使用 web.xml 中的 parentContextKey），并且如果其中一个父 bean 具有lazy-init=true 并且被此部署的 WAR 请求，谁将加载和卸载所请求的 Class 对象豆 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:49:25.820

Your web-app can be based on Spring or simply on JSP&Servlets. And when you run Tomcat or other servlet container then it uses its ClassLoader that load classes and libraries from your WAR which is deployed to `webapp` folder (for Tomcat).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:21:05.430

所有这些生命周期都由容器维护，您可以通过在 web.xml 中声明它来使其知道

RequestContextListener 将“请求”范围暴露给上下文。
org.springframework.web.context.request.RequestContextListener

而这个从容器监听器扩展而来的监听器，容器能够处理生命周期。

如果你有任何惰性初始化的东西。Web 容器将调用委托给在类路径中搜索类的 spring 容器。

所以基本上生命周期得到处理。您还可以拥有自己的自定义侦听器来处理这些生命周期

看看有没有帮助

# facebook-graph-api - 我应该明确添加/删除添加到我的站点/从我的站点中删除的 OpenGraph 对象吗？

> ID：11436298
> 
> 赞同：0
> 
> 时间：2012-07-11T15:38:57.010
> 
> 标签：facebook-graph-api, facebook-like, rendering, facebook-opengraph

一些 OpenGraph 新手主义：

假设我在我的网站上放置了一个正确标记了 OpenGraph 元标记的页面，以表明它代表一个 OG“视频”对象。这是 OG Video 规范的简单实现；不涉及定制的东西。两个问题：

*   我应该对 Facebook 进行某种 POST 以告诉它页面/对象存在，还是我只是等待用户点击 Like 按钮或在页面上执行某种其他 Facebook-y 操作（因为它似乎，会导致 Facebook 抓取页面并对其进行任何处理）？

*   如果该页面已从我的站点中删除，我是否应该进行某种 POST 来告诉 Facebook 该页面已消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:31:44.177

无需明确告诉 Facebook Open Graph Page 的存在。当有人第一次点击“赞”按钮（或通过其他方式在 Facebook 上分享链接）时，Facebook 服务器会查询 URL 以读取 OG 标签，因此它知道新闻源故事应该是什么样子。

同样，无需通知 Facebook OG Page 已消失。话虽如此，如果可能的话，最好只允许您的 OG 页面继续存在，以确保它们继续为您的网站带来流量。

# ios - iOS Newsstand App - 如何实现免费订阅？

> ID：11436302
> 
> 赞同：4
> 
> 时间：2012-07-11T15:39:22.300
> 
> 标签：ios, newsstand-kit

假设我写了一个报亭应用程序，所有内容（所有问题）都可以免费下载。

Apple 要求 Newsstand 应用程序提供至少一项订阅，这将是一项不会过期的免费订阅。

我的问题：

*）我是否正确假设我不会打电话

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeNewsstandContentAvailability]; 
```

直到用户选择订阅？意思是，只有活跃订阅的用户才能收到报亭推送通知？

*）我是否正确假设我实际上必须在 iTunes Connect 中为此应用程序设置“真正的”免费订阅并在应用程序中使用 StoreKit 处理它，或者是否足以显示“立即免费订阅”按钮，只是调用上面的代码？

*) 用户在哪里以及如何取消订阅？我必须在应用程序中提供此功能，还是它（隐藏）在报亭（应用程序）商店的某个地方？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:38:41.350

1）你应该打电话

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeNewsstandContentAvailability]; 
```

这来自 didFinishLaunchingWithOptions: 方法。收到通知后，您应该将问题的资产（最好是一个 zip 文件）添加到报亭队列以供下载，前提是用户已订阅或您的问题是免费的。

2) 是的，您必须在 iTunes 中创建免费订阅类型。Apple 要求至少有一个订阅才能在 iTunes 中启用报亭。虽然在应用程序中您需要连接到 iTunes 以防用户购买免费订阅，但只需设置用户订阅的内容即可。

3) 用户可以从他们的 iTunes 帐户取消订阅。应用程序不需要提供任何取消订阅。应用程序负责将 iTunes 与购买收据连接，以检查订阅是否自动续订或取消。从此[链接查看 Apple 的文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html)

# php - 使用下拉菜单更改变量值

> ID：11436310
> 
> 赞同：2
> 
> 时间：2012-07-11T15:39:39.893
> 
> 标签：php, javascript

我创建了一个分页系统，显示来自数据库的 15 列。现在我想添加一个带有其他值的下拉菜单，所以我可以将分页变量更改为 50 或 100。

我已经做了一个 javascript，但它不会像我想要的那样工作；) 它只读取我给脚本的最后一个值，当我更改下拉列表时什么也没有发生。

部分剧本

```
$per_page = 15; // Shows how many colums it shows per page 
```

我的 javascript

```
<script type="text/javascript"> 
function addit(){ 
    if(document.getElementById("add").value=="<?php $per_page = 15; ?>") 
    { 
        document.getElementById("amount").value="10" 
    } 
    if(document.getElementById("add")."<?php $per_page = 25; ?>") 
    { 
        document.getElementById("amount").value="25" 
    } 
    if(document.getElementById("add").value=="<?php $per_page = 50; ?>") 
    { 
        document.getElementById("amount").value="50" 
    } 
} 
</script> 
```

和形式

```
<form action=" " method="get"> 
<select style="width: 60px; font-size: 17px;" name="add" id="add" onChange="addit()">
<option value="X"> views</option> 
<option value="10">10</option> 
<option value="25">25</option> 
<option value="50">50</option> 
</select> 
</td> 
</tr> 

</tbody> 
</table> 
</form> 
```

有小费吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:01:04.420

您需要了解执行 PHP Javascript 的不同点。*PHP在服务器上*构建一个 HTML 页面，然后将其发送到执行任何 Javascript 的浏览器。

让我们看一下您的代码的一行：

```
if(document.getElementById("add").value=="<?php $per_page = 15; ?>") 
```

服务器将执行 PHP 部分。但`$per_page = 15`不会向 HTML 结果输出任何内容。因此，如果您在浏览器中查看结果（使用“查看源代码”），它将如下所示：

```
if(document.getElementById("add").value=="") 
```

您的 Javascript 中的所有三个`if`语句都将看起来像这样，*都一样*。

从这里重新考虑您的代码。如果在 PHP 部分中确定了每页的元素数量，则需要重新加载页面，以某种方式将此参数传递给服务器，以告诉它要放入页面中的元素数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:46:29.707

在页面发送到浏览器的那一刻，PHP 已经完成了处理，因此您在 javascript 中的 php 分配不会做任何事情，除了在页面发送到浏览器之前分配一个数字。

你需要做的是：

*   将更改的 javascript 变量的值和您的分页变量发布回服务器/**提交表单**
*   使用新值重新生成页面
*   可选择使用 ajax 仅刷新页面的一部分，而不是完全重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:53:11.607

我建议您的 JS 函数确实加载带有`GET`附加参数的（相同？）页面，以传递`items per page`值。也许是这样的：

```
function addit(){
    var itemsPerPage = document.getElementById("add").value;
    location.href = 'url of your page' + '?ipp=' + itemsPerPage;
} 
```

然后在您的`php`部分中，捕获`$_GET['ipp']`并使用它根据查看者的意愿呈现您的页面。

然后你就可以摆脱`<form>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:19:44.557

我认为这里不需要 Javascript。你可以试试：

形式：

```
<form action="process.php" method="get"> 
   <select style="width: 60px; font-size: 17px;" name="add">
        <option value="X" disabled>Views</option>
        <option value="10">10</option> 
        <option value="25">25</option> 
        <option value="50">50</option> 
    </select> 
</form> 
```

`Process.php`可能：

```
$per_page = $_GET['add'];

//Code to display $per_page number of items.. 
```

确保在客户端分配的 PHP 变量永远不会起作用。因为 PHP 不能在客户端执行。此时它已经完成了执行并输出了 HTML。或者您可以使用一些 Javascript`Get`查询构建和重定向。

# node.js - TCP 和 Node.js 的实时多人游戏原理

> ID：11436311
> 
> 赞同：9
> 
> 时间：2012-07-11T15:39:40.380
> 
> 标签：node.js, networking, tcp, udp, game-engine

我一直在阅读[关于多人网络的 Valve 文章，](https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking)该文章改编自 Yahn Bernier 2001 年的论文，名为[Latency Compensating Methods in Client/Server In-game Protocol Design and Optimization](https://developer.valvesoftware.com/wiki/Latency_Compensating_Methods_in_Client/Server_In-game_Protocol_Design_and_Optimization)。我正在使用通过 socket.io 连接到客户端的 node.js 服务器制作实时多人游戏，我对下面详述的原则有一些疑问：

[实体插值](https://developer.valvesoftware.com/wiki/Interpolation)

> [插值] 通过缓冲服务器更新然后在播放它们之间平滑插值的间隙来防止通常会导致的抖动运动。它还可以防止因丢包引起的故障。

[客户端预测](https://developer.valvesoftware.com/wiki/Prediction)

> 预测是客户端预测本地玩家行为的效果而不等待服务器确认它们的概念。实体的预测状态在服务器命令到达时针对它们进行测试，直到检测到匹配或不匹配。

[滞后补偿](https://developer.valvesoftware.com/wiki/Lag_compensation)

> 延迟补偿是服务器在处理 [用户输入] 时使用玩家的延迟来回退时间的概念，以便查看玩家在发送命令时看到的内容。结合预测，延迟补偿可以帮助对抗网络延迟，从攻击者的角度来看几乎可以消除它。

*   这些原则是否适用于 TCP，就像它们适用于 UDP 一样，在实现上会有什么不同吗？我可以看到实体插值不需要防止数据包丢失，仅此而已。

*   我什至可以使用 UDP 和 Node.js 在服务器和 Web 浏览器之间进行通信，反之亦然吗？

*   由于这篇论文已有十多年的历史，这些原则是否仍在使用，还是出现了其他技术？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:50:05.603

*   这些原则是否适用于 TCP，就像它们适用于 UDP 一样，在实现上会有什么不同吗？我可以看到实体插值不需要防止数据包丢失，仅此而已。

虽然您不必处理丢包问题，但您将不得不处理更长的传输时间。TCP 比 UDP 慢，您必须在实时多人游戏中缓解这种情况。我认为这些原则仍然适用于基本层面。

*   我什至可以使用 UDP 和 Node.js 在服务器和 Web 浏览器之间进行通信，反之亦然吗？

一般来说，还没有。至少不是没有某种形式的浏览器扩展或插件——WebSockets 使用 TCP。也就是说，WebRTC（更具体地说，PeerConnection API）即将到来。当实现数据通道时，理论上应该可以进行 UDP 通信。

*   由于这篇论文已有十多年的历史，这些原则是否仍在使用，还是出现了其他技术？

听到它们不再使用，我会感到非常惊讶-您引用的文章实际上是游戏程序员的必读文章。新技术没有出现也是如此，尽管我已经好几年没有密切关注这个领域的发展了。

# excel - 使用 VBA 创建电子邮件后，重新回到 Excel

> ID：11436313
> 
> 赞同：2
> 
> 时间：2012-07-11T15:39:44.970
> 
> 标签：excel, email, vba

我有一个 VBA 宏，它执行以下操作：

1.  创建报告，将其保存到主目录。关闭报告
2.  创建各种电子邮件，将报告附加到每个电子邮件（不发送电子邮件）
3.  Msgbox 显示该过程已完成

问题是，一旦整个过程完成，我希望用户知道它已经完成，但是这段代码不会将焦点返回到 excel（我希望这会是问题）

```
Windows(the_current_window).Activate
Worksheets(currentQuoteSheet).Select 
```

最后创建的电子邮件是留在屏幕上的内容。只有当我单击菜单栏上的 excel 图标时才会出现 msgbox。所以用户只是在等待完成（事实上，当它完成时:()

任何想法如何确保在创建最后一封电子邮件后显示 msgbox 而无需用户单击 Excel？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T15:51:25.263

尝试

```
sub doSomething()
   'do something
   AppActivate "Microsoft Excel"
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-22T17:28:34.777

我在 MS Office 365 上，由于某种原因，我在尝试时遇到应用程序错误`AppActivate "Microsoft Excel"`，`AppActivate "Excel"`但是：

```
AppActivate Application.Caption 
```

为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T04:56:17.177

尽管这在一定程度上有效，但它不会激活 MSGbox 以允许人们按键盘上的 y/n（您可以使用鼠标）。

如果您重复执行任务并且不想抓住鼠标，这允许键盘交互。经过测试的 Office 2013（64 位）（如果您是 32 位，请删除 PtrSafe）

```
Private Declare PtrSafe Function MessageBox _
        Lib "User32" Alias "MessageBoxA" _
           (ByVal hWnd As Long, _
            ByVal lpText As String, _
            ByVal lpCaption As String, _
            ByVal wType As Long) _
        As Long
Sub Test
        'Call showwindow(ActiveWorkbook.Name)
        AppActivate "Excel"
        'I need this to retain the focus
        retval = MessageBox(&O0, "Do you want to process", "My Question", vbYesNo + vbSystemModal)
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:47:58.993

您是否尝试过按名称调用工作簿？就像是：

```
Workbooks("EXCEL WORKBOOK NAME.XLS").Activate 
```

# windows - 枚举 CDialog 中子控件的最快方法

> ID：11436314
> 
> 赞同：0
> 
> 时间：2012-07-11T15:39:45.280
> 
> 标签：windows, winapi, visual-c++, mfc, cdialog

列出可能在基于 CDialog 的窗体上的所有控件的最佳方法是什么？到目前为止我看到的唯一方法是`EnumChildWindows()`，但这涉及回调。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:48:02.590

回调几乎不会影响性能。影响性能的是回调中的代码。我认为您可以毫无问题地使用 EnumChildWindows。

# ruby-on-rails-3 - 为什么在 Rails 3.2.3 中批量分配 :id 不会引发错误？

> ID：11436318
> 
> 赞同：2
> 
> 时间：2012-07-11T15:39:54.063
> 
> 标签：ruby-on-rails-3

似乎 update_attributes 不允许我更改 id （因此它受到保护），但为什么 rails 不会抛出与其他受保护属性相同的错误？

```
> rails new mass_assignment_test
> cd mass_assignment_test
> rails g model User name:string
> rake db:migrate
> rails console
>> u = User.create(:name => "ben")
>> u.update_attributes(:id => 5)
=> true
>> u.id
=> 1
>> u.update_attributes(:created_at => Time.now)
ActiveModel::MassAssignmentSecurity:Error 
```

这是 rails 生成的模型（app/models/user.rb）：

```
class User < ActiveRecord::Base
  attr_accessible :name
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:31:38.973

记录的 id 由 Rails 本身保护：

```
# activerecord-3.1.3/lib/active_record/base.rb:1961
def self.attributes_protected_by_default
  default = [ primary_key, inheritance_column ]
  default << 'id' unless primary_key.eql? 'id'
  default
end 
```

您可以通过以下方式绕过它：

```
u.update_attributes!({:id => 5}, :without_protection => true) 
```

另外，请不要这样做。:) 这将使您的代码难以维护...

# tridion - SDL Tridion Tcm-id 渲染

> ID：11436319
> 
> 赞同：1
> 
> 时间：2012-07-11T15:39:54.843
> 
> 标签：tridion

任何人都可以帮助我。

1.  我在 tridion 功能区中创建了一个自定义按钮。（项目视图）

2.  在给定的页面中，我们将拥有“组件展示”和“目标组”

现在我需要通过单击按钮（在步骤 1 中创建）来获取组件表示的 tcm-id 和选定的目标组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:16:12.703

我想我已经在这里回答了这个问题：[限制用户插入相同的组件和模板](https://stackoverflow.com/questions/11446313/how-to-get-current-page-tcmid-selected-component-presentation-tcmid-for-a-tridi)

谢谢

约翰

# c - 带有 c 的 MacOS X 中一周的第一天

> ID：11436325
> 
> 赞同：1
> 
> 时间：2012-07-11T15:40:09.913
> 
> 标签：c, macos, glibc

在俄罗斯，一周的第一天是星期一。在美国 - 周日。在 Linux 上`nl_langinfo(_NL_TIME_FIRST_WEEKDAY)`，为 Sun 返回 0 或为 Mon 返回 1。我如何使用 c 代码进入 MacOS X？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:45:44.870

我的猜测是使用CoreFoundation 框架中`CFDateRef`的`CFLocaleRef`不透明类型和关联`CFDate*`函数`CFLocale*`。

**更新**

经过一番挖掘，我找到了您需要的功能。看来您必须为此使用`CFCalendar` 。从苹果的文档中：

`CFCalendarGetFirstWeekday` 返回指定日历的第一个工作日的索引。

```
CFIndex CFCalendarGetFirstWeekday (
   CFCalendarRef calendar
); 
```

**参数**

*日历*

要检查的日历。

*返回值*

指定日历的第一个工作日的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:48:38.447

我自己没有尝试过，但是通过浏览文档，您可以获得一个`CFLocale`实例（[参考](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFLocaleRef/Reference/reference.html)）并使用以下方法获取它的`CFCalendar`实例：

```
CFLocaleGetValue(locale, kCFLocaleCalendar) 
```

并使用( [reference](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFCalendarRef/Reference/reference.html#//apple_ref/c/func/CFCalendarGetFirstWeekday) )从`CFCalendar`实例中获取一周的第一天。`CFCalendarGetFirstWeekday()`

# powershell - 使用 powershell 选择特定的 IIS 网站

> ID：11436328
> 
> 赞同：1
> 
> 时间：2012-07-11T15:40:23.473
> 
> 标签：powershell, conditional

我目前有几个在 IIS 下运行的网站。为方便起见，我们称它们为`site1`, `site2`, 和`site3`

我的 powershell 脚本接受来自要使用哪个号码站点的用户的参数。我试图用简单的参数关闭site3`3`

我认为这将是类似的东西

```
stop-website | where-object {$_.name -like "*3*"} 
```

此行已执行，但会提示输入“名称”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:50:50.220

Name 属性似乎接受通配符（尽管帮助另有说明），因此您应该可以通过以下方式停止它：

```
Stop-Website -Name *3* 
```

# javascript - 最新版本中的 Ember.CollectionView API 是否有重大更改？

> ID：11436330
> 
> 赞同：2
> 
> 时间：2012-07-11T15:40:29.977
> 
> 标签：javascript, ember.js

我有两个示例在 9.8.1 和最新版本下运行相同的 CollectionView 代码。9.8.1 版本有效：http: [//jsfiddle.net/ethan_selzer/kcjzw/230/](http://jsfiddle.net/ethan_selzer/kcjzw/230/)。但最新版本没有：http: [//jsfiddle.net/kcjzw/232/](http://jsfiddle.net/kcjzw/232/)。

最新版本中的 Ember.CollectionView API 是否有重大更改？或者，CollectionView 的当前版本是否存在问题？

谢谢，伊桑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:34:30.397

您可以执行 Kristofor Selden 在此小提琴[http://jsfiddle.net/krisselden/6fAHZ/](http://jsfiddle.net/krisselden/6fAHZ/)中建议的操作（在 中绑定`content`数组`itemViewClass`），也可以按以下方式执行：

**小提琴**：http: [//jsfiddle.net/ppanagi/WhGjR/](http://jsfiddle.net/ppanagi/WhGjR/)

```
App = Ember.Application.create();

App.collectionView = Ember.CollectionView.create({

    content: [
      { key: 'value one' },
      { key: 'value two' }
    ],

    itemViewClass: Ember.View.extend({
      template: Ember.Handlebars.compile('{{view.content.key}}')
    })
});

App.collectionView.append();​ 
```

模板的默认上下文现在是控制器变量，因此`{{foo}}`将返回控制器变量的值`foo`。如果需要`bar`View 的变量值，请使用`{{view.bar}}`.

* * *

跟进：改变上下文的另一种方法是使用`{{with}}`：

```
App.collectionView = Ember.CollectionView.create({
  template: Ember.Handlebars.compile('{{#with view}} {{content.key}} {{/with}}')
}); 
```

# objective-c - 有没有办法以增量方式查询 Apple 系统日志？

> ID：11436336
> 
> 赞同：2
> 
> 时间：2012-07-11T15:40:58.717
> 
> 标签：objective-c, macos, syslog

我想使用 Apple System Log API 显示系统日志的一些内容。有没有办法增量查询日志数据库，即。只获取自上次查询以来的新消息？该`aslresponse_next`调用似乎只遍历查询时存在的消息。

我想我可以通过设置最小时间过滤器来伪造增量查询，但是这种方法似乎容易出现各种时间问题，所以如果可能的话，我宁愿有更正式的东西。

# c# - MoveFocus 跳过控件

> ID：11436345
> 
> 赞同：1
> 
> 时间：2012-07-11T15:41:28.083
> 
> 标签：c#, wpf, focus

我想允许用户使用箭头键在控件中导航。

用户应该仍然能够使用 Tab 和 Shift + Tab 控件进行水平导航，但我希望他们能够垂直导航（如果他们水平导航，这可能会跳过将聚焦的控件）。

如果我对似乎发生的事情使用该`MoveFocus`方法，则会跳过某些控件，例如按钮和可编辑的组合框。`UIElement`

有人知道为什么吗？这些控件通常使用 TAB 聚焦，但 Up/Down/Next 的 FocusDirections 似乎跳过了这些控件。如果我看一下，`PredictFocus`它似乎报告说按钮应该以这种方式聚焦，而不是可编辑的组合框。

下面的演示代码：XAML：

```
<Window x:Class="Focus.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="525"
        Height="350">
    <Window.Resources>
        <Style x:Key="FocusStyle">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle Stroke="CadetBlue" StrokeThickness="2" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="txtBox1" Width="75"/>
                <TextBox Width="200"
                         Name="txtBox1"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="button1" Width="75" />
                <Button Width="200"
                        Name="button1"
                        Height="25"
                        Margin="5"
                        Content="Hello"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="txtBox2" Width="75"/>
                <TextBox Width="200"
                         Name="text2"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="comboBox" Width="75"/>
                <ComboBox Width="200"
                         Margin="5"
                         Name="comboBox"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="txtBox4" Width="75"/>
                <TextBox Width="200"
                         Margin="5"
                         Name="txtBox4"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="comboBox2" Width="75"/>
                <ComboBox Width="200"
                         Margin="5"
                          IsEditable="True"
                         Name="comboBox2"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <TextBlock Margin="3" Text="{Binding FocussedControl.Name, StringFormat=Focused Control: {0}}" />
            <TextBlock Margin="3" Text="{Binding PredictedFocusControl.Name, StringFormat=Predicted Focus {0}}"/>
        </StackPanel>
    </Grid>
</Window> 
```

MainWindow.Xaml.cs：

```
using System.Windows;
using System.Windows.Input;

namespace Focus
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
        }

        public IInputElement FocussedControl
        {
            get { return (IInputElement)GetValue(FocussedControlProperty); }
            set { SetValue(FocussedControlProperty, value); }
        }

        public static readonly DependencyProperty FocussedControlProperty =
            DependencyProperty.Register("FocussedControl", typeof(IInputElement), typeof(MainWindow));

        public DependencyObject PredictedFocusControl
        {
            get { return (DependencyObject)GetValue(PredictedFocusControlProperty); }
            set { SetValue(PredictedFocusControlProperty, value); }
        }

        public static readonly DependencyProperty PredictedFocusControlProperty =
            DependencyProperty.Register("PredictedFocusControl", typeof(DependencyObject), typeof(MainWindow));

        protected override void OnPreviewLostKeyboardFocus(KeyboardFocusChangedEventArgs e)
        {
            FocussedControl = e.NewFocus;
        }

        protected override void OnPreviewKeyDown(KeyEventArgs e)
        {
            base.OnPreviewKeyDown(e);
            if (e.Key == Key.Down)
            {
                var success = (FocussedControl as UIElement).MoveFocus(new TraversalRequest(FocusNavigationDirection.Down));
                System.Diagnostics.Debug.Assert(success);
                PredictedFocusControl = (FocussedControl as UIElement).PredictFocus(FocusNavigationDirection.Down);
            }
            else if (e.Key == Key.Up)
            {
                var success = (FocussedControl as UIElement).MoveFocus(new TraversalRequest(FocusNavigationDirection.Up));
                PredictedFocusControl = (FocussedControl as UIElement).PredictFocus(FocusNavigationDirection.Up);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:15:12.930

我通过使用它解决了这个问题`FocusManager.IsFocusScope="True" Focusable="True"`：

```
 <Grid>
    <StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Content="txtBox1" Width="75"/>
            <TextBox Width="200"
                     Name="txtBox1"
                     Margin="5"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     FocusVisualStyle="{StaticResource FocusStyle}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal" Focusable="True"  FocusManager.IsFocusScope="True">
            <Label Content="button1" Width="75" />
            <Button Width="200" Focusable="True" IsTabStop="True" 
                    Name="button1"  FocusManager.IsFocusScope="True"
                    Height="25"
                    Margin="5"
                    Content="Hello"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    FocusVisualStyle="{StaticResource FocusStyle}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Content="txtBox2" Width="75"/>
            <TextBox Width="200"
                     Name="text2"
                     Margin="5"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     FocusVisualStyle="{StaticResource FocusStyle}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Content="comboBox" Width="75"/>
            <ComboBox Width="200" Focusable="True"
                     Margin="5"  IsTabStop="True" 
                     Name="comboBox"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     FocusVisualStyle="{StaticResource FocusStyle}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Content="txtBox4" Width="75"/>
            <TextBox Width="200"
                     Margin="5"
                     Name="txtBox4"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     FocusVisualStyle="{StaticResource FocusStyle}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal" FocusManager.IsFocusScope="True"  Focusable="True">
            <Label Content="comboBox2" Width="75"/>
            <ComboBox Width="200" Focusable="True"
                     Margin="5" IsTabStop="True" 
                      IsEditable="True"
                     Name="comboBox2"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     FocusVisualStyle="{StaticResource FocusStyle}" />
        </StackPanel>
        <TextBlock Margin="3" Text="{Binding FocussedControl.Name, StringFormat=Focused Control: {0}}" />
        <TextBlock Margin="3" Text="{Binding PredictedFocusControl.Name, StringFormat=Predicted Focus {0}}"/>
    </StackPanel>
</Grid> 
```

不能告诉你为什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:58:44.657

我通过在组合框中设置 IsTabStop=true 来修复它，即使 Tab 正在努力专注于控件：

```
<Window x:Class="Focus.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="525"
        Height="350">
    <Window.Resources>
        <Style x:Key="FocusStyle">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle Stroke="CadetBlue" StrokeThickness="2" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Width="75" Content="txtBox1" />
                <TextBox Name="txtBox1"
                         Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
                <TextBox Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Width="75" Content="button1" />
                <Button Name="button1"
                        Width="200"
                        Height="25"
                        Margin="5"
                        HorizontalAlignment="Left"
                        FocusVisualStyle="{StaticResource FocusStyle}"
                        VerticalAlignment="Top"
                        Content="Hello" />
                <TextBox Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Width="75" Content="txtBox2" />
                <TextBox Name="text2"
                         Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         FocusVisualStyle="{StaticResource FocusStyle}"
                         VerticalAlignment="Top" />
                <TextBox Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Width="75" Content="comboBox" />
                <ComboBox Name="comboBox"
                          Width="200"
                          Margin="5"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Top"
                          FocusVisualStyle="{StaticResource FocusStyle}">
                    <ComboBoxItem Content="Item1" />
                    <ComboBoxItem Content="Item2" />
                    <ComboBoxItem Content="Item3" />
                    <ComboBoxItem Content="Item4" />
                </ComboBox>
                <TextBox Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Width="75" Content="txtBox4" />
                <TextBox Name="txtBox4"
                         Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
                <TextBox Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"  >
                <Label Width="75" Content="comboBox2" />
                <ComboBox Name="comboBox2"
                          Width="200"
                          Margin="5"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Top"
                          IsTabStop="True"
                          FocusVisualStyle="{StaticResource FocusStyle}"
                          IsEditable="True" />
                <TextBox Width="200"
                         Margin="5"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         FocusVisualStyle="{StaticResource FocusStyle}" />
            </StackPanel>
            <TextBlock Margin="3" Text="{Binding FocussedControl.Name, StringFormat=Focused Control: {0}}" />
            <TextBlock Margin="3" Text="{Binding PredictedFocusControl.Name, StringFormat=Predicted Focus {0}}" />
        </StackPanel>
    </Grid>
</Window> 
```

# javascript - 在 AJAX 调用中使用 FOR 循环

> ID：11436347
> 
> 赞同：0
> 
> 时间：2012-07-11T15:41:34.753
> 
> 标签：javascript, ajax, jquery, loops, for-loop

所以，我想做的是发送一个 AJAX 请求，但正如你所见，我的表单中有很多字段，我使用数组进行验证，我想使用相同的数组来传递要通过 AJAX 发送的值：

我从未在 JS 中使用过 for 循环，但无论如何似乎很熟悉。

循环的方式，显然不会工作：

```
for (i=0;i<required.length;i++) {
        var required[i] = $('#'+required[i]).attr('value'); 
```

这将创建我想要的变量，如何使用它们？

希望你们能帮帮我！！！非常感谢！

```
required = ['nome','sobrenome','endereco','codigopostal','localidade','telemovel','email','codigopostal2','localidade2','endereco2','nif','entidade','codigopostal3','localidade3','endereco3','nserie','modelo'];              

function ajaxrequest() {
    for (i = 0; i < required.length; i++) {
        var required[i] = $('#' + required[i]).attr('value');
        var dataString = 'nome=' + required[0] + '&sobrenome=' + required[1];
    }
    $.ajax({
        type: "POST",
        url: "ajaxload/como.php",
        data: dataString,
        success: function() {
            $(".agendarleft").html("SUCESS");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:05:43.567

为帮助确保传递适当的元素 ID 和值，请遍历各种元素并首先将数据添加到对象。

**jQuery：**

```
required = ['nome', 'sobrenome', 'endereco', 'codigopostal', 'localidade', 'telemovel', 'email', 'codigopostal2', 'localidade2', 'endereco2', 'nif', 'entidade', 'codigopostal3', 'localidade3', 'endereco3', 'nserie', 'modelo'];

function ajaxrequest() {
    var params = {}; // initialize object

    //loop through input array
    for (var i=0; i < required.length; i++) {             
        // set the key/property (input element) for your object
        var ele = required[i]; 
        // add the property to the object and set the value
        params[ele] = $('#' + ele).val(); 
    }
    $.ajax({
        type: "POST",
        url: "ajaxload/como.php",
        data: params,
        success: function() {
            $(".agendarleft").html("SUCESS");
        }
    });
} 
```

**演示：http:** [//jsfiddle.net/kPR69/](http://jsfiddle.net/kPR69/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:00:40.383

更简洁的方法是在您希望保存的每个字段上放置一个类，并使用它来遍历它们。然后您也不需要指定输入名称，您可以直接向服务发送一个 json 对象；

```
var obj = {};

$('.save').each(function () {

       var key = $(this).attr('id');
       var val = $(this).val();

       if (typeof (val) == "undefined")
           val = "''"

       obj[key] = val;
} 
```

然后将 obj 作为 AJAX 调用的数据属性发送....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:59:41.477

您的代码存在一些问题。'required' 被覆盖，并且也在循环内重新声明。

我建议使用预先编写的库，我在下面包含了一些。

[http://jquery.malsup.com/form/#validation](http://jquery.malsup.com/form/#validation)

[https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

否则跟随会让你接近。您可能需要将数组转换为字符串。

```
var required = ['nome','sobrenome'];              

function ajaxrequest() {
  var values;
  for (i = 0; i < required.length; i++) {
    var values[i] = $('#' + required[i]).attr('value');
  }
  $.ajax({
    type: "POST",
    url: "ajaxload/como.php",
    data: values,
    success: function() {
        $(".agendarleft").html("SUCESS");
    }
}); 
```

}

# node.js - OAuth 2.0 - 何时应使用刷新令牌更新访问令牌？

> ID：11436351
> 
> 赞同：2
> 
> 时间：2012-07-11T15:41:52.853
> 
> 标签：node.js, mongodb, google-api, oauth-2.0, access-token

我目前正在使用 OAuth 2.0 来访问 Google API。据我了解，我应该使用返回的刷新令牌来更新访问令牌。应该在过期之前刷新还是应该在用户使用已过期的访问令牌从 api 请求数据时刷新？

如果应该在过期之前完成，我应该只运行一个 cron 作业来更新过期的令牌吗？

我正在使用 node.js 和 mongodb，如果这对推荐的解决方案有任何影响。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T15:47:00.860

它应该是无缝的。

当用户使用已过期的访问令牌从 API 请求数据时，这应该会触发您的框架失败、更新，然后重试。

在我创建的应用程序中不需要任何 cron 作业或类似的东西。

# unix - 控制台脚本使用配置文件的 Unix 方式是什么？

> ID：11436354
> 
> 赞同：2
> 
> 时间：2012-07-11T15:42:04.800
> 
> 标签：unix, console

假设我们有一些在 Linux 计算机上运行的脚本“m12”（我刚刚发明了这个名称）。如果它位于您的 $PATH 中，您可以像这样从控制台轻松运行它：

```
m12 
```

它将使用默认参数。但是你可以通过运行它来自定义这个脚本的工作：

```
m12 --enable_feature --select=3 
```

这很棒，而且会奏效。但是我想创建一个配置文件`~/.m12rc`，所以我不需要`--enable_feature --select=3`每次运行它时都指定。它可以很容易地完成。

困难的部分从这里开始。

所以，我有`~/.m12rc`配置文件，但是我要在`m12`没有存储在该配置文件中的参数的情况下开始。Unix 的方法是什么？我应该像这样运行脚本：

```
m12 --ignore_config 
```

还是有更好的解决方案？

下一个。假设我有一个配置文件`~/.m12rc`，我想从该文件中获取一些参数，但想稍微改变一下。我应该如何运行脚本以及脚本应该如何工作？

最后一个问题。`.m12rc` 脚本首先在当前目录中查找，然后在中`~/`查找，这是一个好主意`/etc`吗？

我问所有这些问题是因为我要在我的 [小脚本](https://metacpan.org/module/App%3a%3aIsGitSynced)中实现配置文件，并且我想对设计做出正确的决定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:40:13.673

ES Raymond[的“The Art of Unix Programming”](http://www.catb.org/~esr/writings/taoup/)一书讨论了这些[问题](http://catb.org/~esr/writings/taoup/html/ch10s05.html)。

您可以使用`--config-file=/dev/null`.

您通常会使用以下命令：

*   系统范围的配置（`/etc/m12/m12rc`或只是`/etc/m12`）。
*   用户个人配置 ( `~/.m12rc`)
*   本地目录配置 ( `./.m12rc`)
*   命令行选项

每个后面列出的项目都会覆盖前面列出的项目。您应该能够在命令行上指定要读取的配置文件；可以说，这应该优先于其他选项。想想`--no-system-config`或`--no-user-config`或`--no-local-config`。许多脚本不保证系统配置文件。我开发的大多数脚本不会同时使用本地配置和用户配置。但这就是我的思维方式。

我打包标准选项的方式是在`$HOME/bin`（比如说`m12a`）中有一个脚本为我做这件事：

```
#!/bin/sh
exec m12 --enable_feature --select=3 "$@" 
```

如果我想要这些选项，我会运行`m12a`. 如果我想要一些其他选项，我会`m12`使用必要的选项运行 raw。我的个人 bin 目录中有数百个文件（在我的主机 Mac 上大约有 500 个；其中一些是可执行文件，但很多是脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:10:25.193

让我分享一下我的经验。我通常在脚本开头提供配置文件。在配置文件中，我还处理所有参数开关：

```
 DEFAULT_USER=blabla
   while getopts ":u" do
      case $opt in
      u) 
        export APP_USER=$OPTARG
       ;;
      esac
   done
   export APP_USER=${APP_USER-$DEFAULT_USER} 
```

然后在脚本中我只使用变量，这让我有多个具有相同输入参数的脚本。

在您的情况下，我成像您会将“getopts”部分移动到脚本中，并在它获取配置文件之后（如果没有切换到跳过采购）。

你不应该把你的脚本配置文件放到 etc 中，它需要 root 权限才能做到这一点，你可以简单地在家中使用配置文件。如果你想把你的脚本与其他用户共享，它应该去 /usr/share...

另一种解决方案使用 thor（ruby gem），它处理输入参数的方式更简单，避免在 bash 中获得相同结果的工作，例如 getopts 仅支持单字母开关。

# objective-c - NSPrivateQueueConcurrencyType 上下文只能在 performBlock 内操作？

> ID：11436358
> 
> 赞同：2
> 
> 时间：2012-07-11T15:42:26.547
> 
> 标签：objective-c, ios, multithreading, core-data, concurrency

我想知道 NSPrivateQueueConcurrencyType 上下文是否仅在 -performBlock 和 -performBlockAndWait 内运行。从 NSPrivateQueueConcurrencyType 上下文返回的 NSManagedObject 不能在 performBlock 之外访问？

我从苹果文档“iOS 5.0 中的新功能”中找到了以下句子

> 将消息发送到使用队列关联创建的上下文时，如果您的代码尚未在该队列上（对于主队列类型）或在 performBlock... 调用的范围内执行，则必须使用 performBlock: 或 performBlockAndWait: 方法（对于私有队列类型）。在传递给这些方法的块中，您可以自由地使用 NSManagedObjectContext 的方法。

如果是这样，为什么 MagicalRecord 和 XMPPFramework 不操作块内的上下文和 NSManagedObject？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:42:37.663

我不知道 MagicalRecord 和 XMPPFramework 中的代码做什么或不做什么。您将需要通过他们的正常支持方式与他们联系。

但是，我可以告诉您，如果您使用 NSPrivateQueueConcurrencyType 创建一个 MOC，那么您应该访问该 MOC 或该 MOC 拥有的托管对象的唯一方法是通过 performBlock* API。

如果您使用 NSMainQueueConcurrencyType 创建 MOC，那么您可以在主线程中运行或通过 performBlock* API 访问它。

如果您使用 NSConfinementConcurrencyType 创建 MOC，那么您只能从创建 MOC 的线程访问 MOC。如果未指定并发，则默认使用限制。

这些是当前创建 MOC 的唯一方法，以及使用规则的摘要。

我相信 MagicalRecord 使用限制并为每个线程保留一个 MOC，但我从未使用过它，并且只查看了旧版本的代码库，因此它可能会随着嵌套上下文的出现而发生很大变化。

# css - >=Rails 3.1 如何在资产管道中包含 IE 特定的 YAML-CSS 文件

> ID：11436362
> 
> 赞同：5
> 
> 时间：2012-07-11T15:42:36.530
> 
> 标签：css, ruby-on-rails, asset-pipeline, conditional-statements, yaml-css

如何包含 Yaml-CSS 套装的 iehacks.css？yaml 文档指向类似于此条件语句的内容。

```
<!--[if lte IE 7]>         
<link rel="stylesheet" href="stylesheets/yaml/core/iehacks.css" type="text/css"/>
<![endif]--> 
```

如何在我的 Rails 3.1++ 应用程序中包含该 css 文件（取决于 IE 或不依赖于 IE；）并考虑到新的 rails 流水线功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:00:55.940

在您的**config/application.rb**中，添加这样的一行：

```
config.assets.precompile += %w(iehacks.css) 
```

只有“应用程序”清单中的文件会自动用于预编译。

额外文件必须手动声明。

我希望这对我的英语有所帮助和抱歉。

# javascript - iOS 上 Safari 中的 shiftKey

> ID：11436366
> 
> 赞同：9
> 
> 时间：2012-07-11T15:42:44.850
> 
> 标签：javascript, ios, safari

有没有办法在javascript中确定是否在移动键盘上按下了shift键，并将其与大写锁定区分开来（两次按下shift键）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:24:40.283

### 一些事实

首先，让我们看一下我假设您已经知道的有关 iOS 键盘的一些事实：

*   当您进入键盘模式时，该`shift`键始终处于激活状态
*   `Caps Lock`必须手动激活（我猜这个用的不是太广）

### iPhone Shift 键处理

我对这个问题进行了一些调查，这就是我的发现：

*   按键触发无`shift`按键事件

*   没有特殊的 iPhone 浏览器 API 来检测是否按下了 shift 键，除了在 iOS 应用程序中（duh）

*   iOS 触发的`keydown`, `keypress`,`keyup`事件看起来很正常，只是它们不表示 shiftKey 的使用，除了它们的时间戳和类型之外无法区分。

*   [由于这个问题](https://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-javascript)，您无法在 iOS 中手动调度键盘事件，`keyCode`并且`which`是只读的并且始终设置为`0`. 重新触发键盘事件以获取有关 shift 键仍处于打开状态的一些指示是不可能的。

*   实际上，iPhone 将`shift`按键视为某种`Short Term Caps Lock`按键。不同之处在于，通常，您激活它一次，它就会自动停用。

### 可以做什么

我假设您想在输入字段上指示用户是否应该小心按下 Shift/Caps Lock（例如密码字段）。我想出的是某种解决方法，但我认为总比没有好。

[您还可以在此处测试 jsfiddle](http://jsfiddle.net/JW6XC/)。

**DOM 设置**

```
<div id="wrapper">
  <label for="test">ENTER SOMETHING HERE</label>
  <input type="text" name="test" id="test"/>
</div>
<div id="warning"></div>​ 
```

**Javascript**

这会检查用户是否输入`caps lock`了大写字母，如果输入了两个大写字母，则假定用户正在使用。

```
var isCaps = false,
isUppercase = false,
str = '',
test = document.getElementById('test'),
warning = document.getElementById('warning');

function capsDetection(e) {

    // Since where on iOS, we at least don't have to care 
    // about cross-browser stuff
    var s = String.fromCharCode(e.which);
    isCaps = isUppercase;

    // if the char doesn't match its lower case friend, and the shift key is 
    // not pressed (which is always the case on iOS, but we leave it there 
    // for readability), we have uppercase input
    isUppercase = (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey);

    // if its the second uppercase input in a row, we may have caps lock input
    isCaps = isCaps && isUppercase;

    // set the warning
    if (isUppercase && !isCaps) {
        str = 'You where using the shift key';
    }
    else if (isCaps) {
        str = 'Caps lock seems to be activated';
    } else {
        str = '';
    }
    warning.innerHTML = str;
}

// the right event properties are only available on keypress
test.addEventListener('keypress', capsDetection); 
```

正如我所说，总比没有好，但如果您需要知道在没有用户进行任何输入的情况下按下了 shift 键，这不是一个解决方案。这在现在看来是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:35:13.407

我认为 Javascript 不可能做到这一点。不过，目标 C 是可能的。

[http://developer.apple.com/library/safari/#documentation/UserExperience/Reference/TouchEventClassReference/TouchEvent/TouchEvent.html](http://developer.apple.com/library/safari/#documentation/UserExperience/Reference/TouchEventClassReference/TouchEvent/TouchEvent.html)

# c++ - 如何在 xcode 4.3 中包含 C++ 标准库

> ID：11436369
> 
> 赞同：2
> 
> 时间：2012-07-11T15:42:48.543
> 
> 标签：c++, objective-c, ios, xcode

我正在尝试在我的 ios 应用程序中使用 C++ 代码（我真的不喜欢目标 C，我只会在必要时使用它[查看控件等]），虽然一切似乎都在工作，但我得到了一个错误在下面的测试文件中。

```
 #ifndef prueba3_GlobalStatic_h
 #define prueba3_GlobalStatic_h
 #include <string>

 using namespace std;

 class GlobalStatic
 {
 public:
     GlobalStatic();
     ~GlobalStatic();
     string foo();

 private:
     int integerValue;
 };

 #endif 
```

当我尝试构建项目时，IDE 给了我以下错误：“'string' file not found”我环顾四周，但找不到确凿的答案；任何帮助，将不胜感激。本质上，我如何让标准库工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:54:40.390

缺少 c++ 标头的一个原因是从objective-c 上下文中包含它们，而不是从objective-c++ 中包含它们——并且您不能使用c 中的c++ stl！更简单的解决方案是简单地将所有 .m 文件更改为 .mm，.mm 会将它们发送到 Objective-c++ 编译器。

# c# - 操纵列表

> ID：11436371
> 
> 赞同：-2
> 
> 时间：2012-07-11T15:42:54.093
> 
> 标签：c#

我编写了一个代码来操作时间序列数据的内容并输出到一个新创建的矩阵中。这是为了让我能够为时间序列数据构建相空间。

该列表是长度=N 的一维列表，称为“噪声”。

我想创建一个 MxN 矩阵，其中`m = N -5*tdelay1`和`n = 6`。当代码符合时，它会显示一个错误：

> 指数数组的边界之外。

代码如下：

```
float[,] phaseSpace6 = new float[(length-5*tdelay1-1), m];
for (int i = 0; i < (length-5* tdelay1-1); i++)
{
    int col1 = i + tdelay1;
    int col2 = i + 2 * tdelay1;
    int col3 = i + 3 * tdelay1;
    int col4 = i + 4 * tdelay1;
    int col5 = i + 5 * tdelay1;
    phaseSpace6[i, 1] = noise[i];
    phaseSpace6[i, 2] = noise[col1];
    phaseSpace6[i, 3] = noise[col2];
    phaseSpace6[i, 4] = noise[col3];
    phaseSpace6[i, 5] = noise[col4];
    phaseSpace6[i, 6] = noise[col5];
} 
```

作为编程新手，我不确定为什么会发生这种情况。如果有经验的人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:50:12.173

If the N dimension of your MxN array is 6 as stated then `[i, 6]` is going to be out of bounds. Numbering for arrays starts at 0 not 1.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:46:02.537

大概是因为

```
int col5 = i + 5 * tdelay1 
```

大于噪声维度

请显示用于 的测试值`tdelay1`，我假设这`length`是 的尺寸`noise`？(N==长度)

And, remember, the index of the arrays starts from zero to lenght-1\. (As @Mykroft said in its answer)

# java - Java 持久性和 Foxpro

> ID：11436372
> 
> 赞同：1
> 
> 时间：2012-07-11T15:42:54.807
> 
> 标签：java, persistence, eclipselink, foxpro

有没有人将 java 持久性与 foxpro 数据库一起使用？我正在使用 Eclipselink 2.3.2 和 JPA 2.0.3 连接到一个 foxpro 应用程序也使用的 foxpro 9 数据库。

我遇到的问题是我们的客户在我们的 Java 应用程序中不断收到“记录未锁定”异常。这会导致 foxpro 应用程序出现问题。我们找到修复它的唯一解决方案是重新启动 java 应用程序，一切正常。我们无法在内部复制它。

它们在虚拟服务器上的 Windows Server 2008R2 上运行。如果有人对持久性和 foxpro 有任何经验，那将是一个很大的帮助。

# javascript - 在正常和全屏模式之间切换窗口

> ID：11436376
> 
> 赞同：4
> 
> 时间：2012-07-11T15:43:13.467
> 
> 标签：javascript, css, html

是否可以通过 JavaScript（*无 jQuery* ）强制窗口在**正常**模式和**全屏**模式之间**切换**..？

 *****我知道如何全屏打开一个新窗口，但这不是我需要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T15:47:13.760

现在，Webkit (Safari 5.1+/Chrome 15+) 和 Firefox (10+) 已经实现 了适当的[全屏 API](http://johndyer.name/native-fullscreen-javascript-api-plus-jquery-plugin/) （最初[由 Mozilla 提出](https://wiki.mozilla.org/Gecko:FullScreenAPI)，后来作为[W3C 提案发布）。](http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html)[这里有一个简短的历史和使用示例。](http://johndyer.name/native-fullscreen-javascript-api-plus-jquery-plugin/) 请注意，据称 IE10 将**不**支持该 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:46:39.660

您可以尝试实验性的[FullScreen API](http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html#api)。

*   [在 MDN 上使用全屏模式](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)
*   [W3c 全屏生活规格](http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html)
*   [浏览器支持](http://caniuse.com/fullscreen)

如果您对浏览器支持不满意，还有另一种选择：向用户显示一条有关 F11 如何切换到全屏模式的消息。在我最近开发的一个 web 应用程序中将此用作后备选项，并且反馈令人满意。*****

# php - Magento：如果小部件参数更改，则从块/整页缓存中刷新小部件

> ID：11436380
> 
> 赞同：2
> 
> 时间：2012-07-11T15:43:20.557
> 
> 标签：php, magento, caching

我们商店的首页上有一个小部件。

该店使用FPC和块缓存。

如果管理员在后端更改了小部件设置，我们如何更新小部件内容？

是否可以在 CacheKey 中使用 Widget 的配置数据？

还是我们必须将缓存生命周期设置得非常小？

编辑：我自己的答案使用缓存生命周期。仅在编辑小部件实例时，从 FPC 中明确清除缓存块的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-28T09:46:44.780

# EE 全页缓存和小部件实例缓存

## （无重写，无限缓存寿命）

## 概述

**第一步**是创建前端小部件本身，但提供一些完整页面缓存可以使用的附加信息。**第二步**
是 在小部件的全页缓存中处理打孔。 第三**步**是仅在管理区域中更改此小部件时自动清理小部件缓存。

 ****## 第一步：创建小部件

首先，为您的模块创建*etc/widget.xml*文件：

```
<widgets>
    <netzarbeiter_test type="netzarbeiter_test/widget_test">
        <name>FPC Holepunch Cache Test</name>
        <description>Dummy test widget</description>
        <parameters>
            <!-- This is the important parameter here: -->
            <unique_id>
                <required>1</required>
            </unique_id>
            <example_text>
                <visible>1</visible>
                <label>Example Text Parameter</label>
                <type>text</type>
            </example_text>
        </parameters>
    </netzarbeiter_test>
</widgets> 
```

注意参数`<unique_id>`。我们不提供输入类型或值，它将通过以下`Mage_Widget_Block_Adminhtml_Widget_Options::_addField()`方法自动填充生成的值：

```
 // Excerpt from Mage_Widget_Block_Adminhtml_Widget_Options::_addField()

    if ($values = $this->getWidgetValues()) {
        $data['value'] = (isset($values[$fieldName]) ? $values[$fieldName] : '');
    }
    else {
        $data['value'] = $parameter->getValue();
        //prepare unique id value
        if ($fieldName == 'unique_id' && $data['value'] == '') {
            $data['value'] = md5(microtime(1));
        }
    } 
```

由于这个小宝石，我们**不必**重写`Mage_Widget_Model_Widget_Instance`类来将小部件 id 注入生成的布局 xml。

接下来，创建小部件类本身。这只是一个实现`Mage_Widget_Block_Interface`接口的常规块实例，除了`unique_id`在`cacheKeyInfo`方法中使用。

```
class Netzarbeiter_Test_Block_Widget_Test
    extends Mage_Core_Block_Abstract
    implements Mage_Widget_Block_Interface
{
    public function getCacheKeyInfo()
    {
        $info = parent::getCacheKeyInfo();
        if ($id = $this->getData('unique_id')) {
            // Because the array key is a string, it will be added to the FPC placeholder
            // parameters. That is how the FPC container can access it (see below).
            $info['unique_id'] =  (string) $id;
        }
        return $info;
    }

    protected function _toHtml()
    {
        // The FPC was completely cleared (or not created yet), 
        // recreate the widget parameter cache
        if (! $this->getFullPageCacheEnvironment() && $this->getUniqueId()) {
            $id = Netzarbeiter_Test_Model_Fpc_Container_Widget_Test::CACHE_PREFIX . $this->getUniqueId() . '_params';
            Enterprise_PageCache_Model_Cache::getCacheInstance()->save(serialize($this->getData()), $id);
        }
        // Just some dummy output to display the text parameter and the render time
        $time = now();
        $textParam = $this->escapeHtml($this->getExampleText());
        return <<<EOF
<p><b>Render Time:</b> {$time}<br/>
<b>Example Text:</b> {$textParam}<br/></p>
EOF;
    }
} 
```

当我们现在通过管理界面添加一个小部件实例时， *widget.xml*`unique_id`中指定的参数将被添加到布局 xml（为便于阅读而添加的格式：

 *```
SELECT layout_update_id, handle, xml FROM core_layout_update;
+------------------+--------------------------+----------------------------------------------------------------------------------------------------+
| layout_update_id | handle                   | xml                                                                                                |
+------------------+--------------------------+----------------------------------------------------------------------------------------------------+
|               17 | catalog_category_layered | <reference name="left">
|                  |                          |     <block type="netzarbeiter_test/widget_test" name="2a3b55e13549e176709fc6c67a4a7bd8">
|                  |                          |         <action method="setData">
|                  |                          |             <name>unique_id</name>
|                  |                          |             <value>7fa2574145ef204fb6d179cfc604ac76</value>
|                  |                          |         </action>
|                  |                          |         <action method="setData">
|                  |                          |             <name>example_text</name>
|                  |                          |             <value>This is a String!</value>
|                  |                          |         </action>
|                  |                          |     </block>
|                  |                          | </reference>
+------------------+--------------------------+----------------------------------------------------------------------------------------------------+ 
```

这意味着，每当通过布局 xml 渲染创建块实例时，`unique_id`块对象上的参数都是已知的。

## 第二步：整页缓存打孔

添加*etc/cache.xml*文件：

```
<config>
    <placeholders>
        <cms_block_widget>
            <block>netzarbeiter_test/widget_test</block>
            <placeholder>WIDGET_FPC_TEST</placeholder>
            <container>Netzarbeiter_Test_Model_Fpc_Container_Widget_Test</container>
        </cms_block_widget>
    </placeholders>
</config> 
```

接下来，创建容器类：

```
class Netzarbeiter_Test_Model_Fpc_Container_Widget_Test
    extends Enterprise_PageCache_Model_Container_Abstract
{
    const CACHE_PREFIX = 'TEST_WIDGET_';

    protected function _getCacheId()
    {
        return self::CACHE_PREFIX . $this->_placeholder->getAttribute('unique_id');
    }

    protected function _renderBlock()
    {
        $block = $this->_getPlaceHolderBlock();
        // Set any parameters from the placeholder on the block as needed.
        // See observer below where the current parameters are cached.
        $id = $this->_getCacheId() . '_params';
        if ($parameters = Enterprise_PageCache_Model_Cache::getCacheInstance()->load($id)) {
            $block->addData(unserialize($parameters));
            // Set environment information on block (used in _toHtml,
            // the params cache is recreated when not set)
            $block->setFullPageCacheEnvironment(true);
        }
        Mage::dispatchEvent('render_block', array('block' => $block, 'placeholder' => $this->_placeholder));
        return $block->toHtml();
    }
} 
```

这就是使我们的小部件成为完全缓存页面中的动态块所需的全部内容。但到目前为止，小部件块被无限期地缓存。我们仍然需要处理缓存刷新。

## 第三步：小部件保存时缓存刷新

`*_save_commit_after`对所有 Magento 模型提供的特定于小部件实例的自动事件使用事件观察器。每次在管理界面中保存小部件实例时都会触发它。

```
<adminhtml>
    <events>
        <widget_widget_instance_save_commit_after>
            <observers>
                <netzarbeiter_test>
                    <model>netzarbeiter_test/observer</model>
                    <method>widgetWidgetInstanceSaveCommitAfter</method>
                </netzarbeiter_test>
            </observers>
        </widget_widget_instance_save_commit_after>
    </events>
</adminhtml> 
```

最后一块拼图是观察者方法：

```
public function widgetWidgetInstanceSaveCommitAfter(Varien_Event_Observer $observer)
{
    /** @var $widget Mage_Widget_Model_Widget_Instance */
    $widget = $observer->getEvent()->getObject();
    $parameters = $widget->getWidgetParameters();
    $uniqueId = isset($parameters['unique_id']) ? $parameters['unique_id'] : '';
    if (strlen($uniqueId)) {
        $id = Netzarbeiter_Test_Model_Fpc_Container_Widget_Test::CACHE_PREFIX . $uniqueId;
        Enterprise_PageCache_Model_Cache::getCacheInstance()->remove($id);
        $id = Netzarbeiter_Test_Model_Fpc_Container_Widget_Test::CACHE_PREFIX . $uniqueId . '_params';
        Enterprise_PageCache_Model_Cache::getCacheInstance()->save(serialize($parameters), $id);
    }
} 
```

## 概括

现在，前端的实例每次保存时都会自动更新，即使是激活了全页缓存。在所有其他时间，将从缓存中获取动态块。

编辑：将缓存的小部件参数示例添加到代码中，因为正如 Alex 在下面的评论中指出的那样，只要 FPC 条目存在，占位符参数就不会被刷新。
使用缓存将小部件参数传递给块避免了重写它的小部件实例模型并在动态呈现块时加载小部件实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:56:05.790

您可以实现该方法`getCacheKeyInfo`并使用一些特定于块的值来生成唯一的哈希。

在 Magento EE 中你可以看到这个 ie in block`Enterprise_Banner_Block_Widget_Banner`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T12:27:10.877

我认为唯一的可能性是通过 cache_lifetime 参数来做到这一点。因此，我们将其设置为大约 30 秒，并且每 30 秒根据当前配置刷新小部件。

我没有找到解决方案来在参数更改时立即从缓存中删除该项目。

这就是我所做的：

1.  首先，小部件块需要知道小部件实例的 ID。为此，我不得不在我的一个模块中重写 Mage_Widget_Model_Widget_Instance::generateLayoutUpdateXml：

    ```
    public function generateLayoutUpdateXml($blockReference, $templatePath = '')
    {
        $xml = parent::generateLayoutUpdateXml($blockReference, $templatePath);
        $injectXml = '<action method="setData"><name>widget_instance_id</name><value>' .     
              $this->getId() . '</value></action>';
        $xml = str_replace('</block>', $injectXml . '</block>', $xml);
        return $xml;
    } 
    ```

2.  ~~在我的小部件块中，我将 cachelifetime 设置得非常小以避免双重缓存：~~编辑：不需要，因为 FPC 禁用了块缓存

    ```
    public function getCacheLifetime()
    {
        return 1;
    } 
    ```

3.  在缓存信息中包含当前模板和**小部件实例 ID 。**我发现那些带有字符串键的数组条目被映射到 FPC 占位符中的属性：

    ```
    public function getCacheKeyInfo()
    {
        $instanceId = $this->getWidgetInstanceId();

        return array(
            'MYBOX',
            Mage::app()->getStore()->getId(),
            (int)Mage::app()->getStore()->isCurrentlySecure(),
            Mage::getDesign()->getPackageName(),
            Mage::getDesign()->getTheme('template'),
            'widget_instance_id' => $instanceId,
            'template' => $this->getTemplate(),
        );
    } 
    ```

4.  现在我们必须为这个小部件创建一个自己的 FPC 占位符。此占位符加载小部件实例的当前配置并呈现小部件

    ```
    class MyCompany_PageCache_Model_Container_WidgetInstance
        extends Enterprise_PageCache_Model_Container_Abstract
    {
        protected function _renderBlock()
        {
            $instanceId = $this->_placeholder->getAttribute('widget_instance_id');
            $widgetInstance = Mage::getModel('widget/widget_instance')->load($instanceId);
            if($widgetInstance->getId()) {
                Mage::logException( new Exception('Widget Instance '.$instanceId.' not         found') );
            }
            $data = $widgetInstance->getWidgetParameters();

            $block = $this->_placeholder->getAttribute('block');

            $name = $this->_placeholder->getAttribute('name');
            $template = $this->_placeholder->getAttribute('template');

            $block = new $block;
            $block->setTemplate($template);
            if ($name !== null) {
                $block->setNameInLayout($name);
            }
            $block->setLayout(Mage::app()->getLayout());
            $block->setData($data);

            return $block->toHtml();
        }
        } 
    ```

5.  我们必须为这个占位符添加 cache.xml 配置：

    ```
    <mycompany_mybox>
        <block>mycompany_mybox/widget</block>
        <placeholder>MYCOMPANY_MYBOX_WIDGET</placeholder>
        <container>MyCompany_PageCache_Model_Container_WidgetInstance</container>
        <cache_lifetime>30</cache_lifetime>
    </mycompany_mybox> 
    ```

6.  最后，小部件必须在后端保存一次，以便生成新的布局 xml。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:59:32.563

尝试下一种方法：

1.  `Enterprise_PageCache_Model_Validator`在您的模块中覆盖。
2.  添加`Mage_Widget_Block_Interface`到`protected $_dataChangeDependency`此类中的数组中。

3.  `protected function _getObjectClasses($object)`用下一种方式重写：

* * *

```
/**
 * Get list of all classes related with object instance
 *
 * @param $object
 * @return array
 */
protected function _getObjectClasses($object)
{
    $classes = array();
    if (is_object($object)) {
        $classes[] = get_class($object);
        $classes = array_merge($classes, class_implements($object), class_parents    ($object));
    }
    return $classes;
} 
```*****

# vba - 将数据粘贴到新工作表

> ID：11436387
> 
> 赞同：0
> 
> 时间：2012-07-11T15:43:49.480
> 
> 标签：vba, excel

我是 VBA 的新手，所以可能会问一些非常基本的问题 - 抱歉！我有一个包含一系列记录的工作表，我想将这些记录移到另一个名为“July Archive”的工作表中。我正在使用这段代码，我知道这将覆盖“7 月存档”中的目标单元格。但我收到一条错误消息，提示 pasteValue 操作失败。

另外，我怎样才能附加单元格而不是覆盖。我尝试了 PasteAppend 但得到一个错误，说它不受对象支持。

```
Sub Selectweeklyreport()

    ActiveSheet.Range("a16", ActiveSheet.Range("f16").End(xlDown)).Cut
    ActiveSheet.Goto ("July Archive")
    Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _
    False, Transpose:=False

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:05:48.247

像这样？

```
Sub Selectweeklyreport()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim lRow As Long

    '~~> Replace this with the relevant sheet name
    Set wsI = Sheets("Sheet1")
    Set wsO = Sheets("July Archive")

    With wsI
        '~~> Get the last Row in Sheet1
        lRow = .Range("F" & .Rows.Count).End(xlUp).Row

        '~~> Copy the range from Sheet1
        .Range("A16:F" & lRow).Copy 'and not .Cut????

        '~~> Get the next available row in July Archive
        lRow = wsO.Range("A" & wsO.Rows.Count).End(xlUp).Row + 1

        '~~> Paste Special Values
        wsO.Range("A" & lRow).PasteSpecial Paste:=xlValues, _
        Operation:=xlNone, SkipBlanks:=False, Transpose:=False
    End With
End Sub 
```

# google-drive-api - Google Drive 图片 URL 缩略图在几个小时后过期

> ID：11436389
> 
> 赞同：4
> 
> 时间：2012-07-11T15:44:00.317
> 
> 标签：google-drive-api, google-picker

我正在使用 Google Picker 将 Google Drive 集成到我的网络 CMS 中。

一切看起来都很棒，用户可以选择他们想要链接到其内容的图像，然后抓取 Picker 提供的图像缩略图 url 以存储到数据库中。

问题是几个小时后，Picker 提供的缩略图 URL 过期导致 403 消息（您的客户端无权获取 URL ..）。从 PICASA (Google Photos) 提取的图像不会发生这种情况，其中图像链接持久或永不过期

有没有办法从 Google Picker 中获取固定/不易腐烂的 URL 以获取图像缩略图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:51:13.210

除非您自己上传缩略图并使用下载链接，否则 google drive 是不可能的。

# c# - foreach 循环中奇怪的 IEnumerable 行为

> ID：11436391
> 
> 赞同：2
> 
> 时间：2012-07-11T15:44:02.453
> 
> 标签：c#, foreach, iterator, ienumerable, yield-return

我有以下方法：

```
public IEnumerable<object> GetParameters(Context context)
{
    yield return new[] { 1, 2, 3 };
} 
```

当我遍历这个枚举时：

```
foreach (var parameter in GetParameters())
{
    // Do something here with parameter
} 
```

我希望参数`1`位于第一个循环，`2`第二个和`3`第三个循环，但事实并非如此:(

![在此处输入图像描述](../Images/e6b088e30d9f9b262bb1128aac6e87a7.png)

`parameter`是一个包含所有值的数组！

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:45:30.057

您将返回可枚举数组的单个实例。

你要：

```
yield return 1;
yield return 2;
yield return 3; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:45:31.987

将您的方法更改为

```
public IEnumerable GetParameters(Context context)
{
    return new[] { 1, 2, 3 };
} 
```

或者

```
public IEnumerable GetParameters(Context context)
{
    yield return 1;
    yield return 2;
    yield return 3;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T15:46:22.007

`yield return`返回单个对象。您似乎正在执行类似 a 的操作`yield foreach`，其中它会产生集合中的每个项目。（这是一个经常请求的功能，但不存在。）

您只需要执行以下操作：

```
foreach(int i in new[]{1, 2, 3})
  yield return i; 
```

在可能的情况下最好使用强类型`IEnumerable`，在这种情况下是`IEnumerable<int>`. 如果你这样做了，那么当你尝试产生一个集合而不是意外的运行时行为时，你会得到一个编译时错误。

# javascript - 如何根据迭代在 Rally 开发人员中查询团队成员姓名和能力？

> ID：11436392
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:02.623
> 
> 标签：javascript, rally

根据迭代，我尝试了几种方法来查询 Rally 开发人员中的团队成员姓名和能力。我遇到的挑战之一是团队成员的姓名和容量属于两种不同的类型。因此，将团队成员姓名与能力相匹配一直是一个挑战。

我失败的尝试之一如下：

```
 var queryConfig = { 
    key: "teamMember", 
    type: "User", 
    fetch: "UserName,Role", 
    query: '(TeamMemberships != "")'
 };

 var queryByUserName = {
    key: "teamDataByUser", type: "UserIterationCapacity", 
    fetch: "Capacity,ObjectID", 
    query: rally.sdk.util.Query.or(ownerQueries)
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:24:55.117

您应该能够使用依赖字段获取在一个查询中获取用户的容量和用户名。

```
 var queryByUserName = {
    key: "teamDataByUser", type: "UserIterationCapacity", 
    fetch: "Capacity,ObjectID,User,DisplayName", 
    query: rally.sdk.util.Query.or(ownerQueries)
 }; 
```

此查询将返回如下所示的数据：

```
{
  ObjectID: 64265714,
  Capacity: 6,
  User: {
    _ref: "https://rally1.rallydev.com/slm/webservice/x/user/1234.js",
    ObjectID: 1234,
    DisplayName: "Cindy"
  },
  _type: "UserIterationCapacity"
} 
```

# php - 从 php 中删除 git 分支的简单方法

> ID：11436395
> 
> 赞同：0
> 
> 时间：2012-07-11T15:44:16.280
> 
> 标签：php, git

我正在尝试创建一个用 php + js 制作的 GUI，以列出任何 repo 的所有本地 + 远程 git 分支。除了尝试运行 git branch -D 命令的部分之外，我一切正常。

基本上该命令永远不会被执行，并且响应是一个空数组。

我的看法是它试图用 apache 用户 _www 而不是我的用户来删除它。

我很想把这个开源，所以我认为将 ssh 密钥添加到我的 apache 将无济于事。

想法？建议？任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:47:30.053

您可能有兴趣研究 PHP Git（Git2 的 PHP 绑定）。

**参考**：[https ://github.com/libgit2/php-git](https://github.com/libgit2/php-git)

享受和好运！

# mysql - 使用 POINT 的 Mysql 空间距离 - 不工作

> ID：11436396
> 
> 赞同：6
> 
> 时间：2012-07-11T15:44:20.727
> 
> 标签：mysql, geolocation, geospatial, spatial

我的目标是使用 mysql POINT(lat,long) 在数据库中查找附近的实体。我正在尝试在本教程的底部做类似的事情[http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)。这是我得到的：

桌子：

```
CREATE TABLE mark (
id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(20) DEFAULT NULL,
loc POINT NOT NULL,
SPATIAL KEY loc (loc)
) ENGINE=MyISAM; 
```

插入一些测试数据：

```
 INSERT INTO mark (loc,name) VALUES (POINT(59.388433,10.415039), 'Somewhere 1');
 INSERT INTO mark (loc,name) VALUES (POINT(63.41972,10.39856), 'Somewhere 2'); 
```

声明距离函数：

```
 DELIMITER $$
 CREATE FUNCTION `distance`
 (a POINT, b POINT)
 RETURNS double DETERMINISTIC
 BEGIN
 RETURN
 round(glength(linestringfromwkb(linestring(asbinary(a),
 asbinary(b)))));
 END $$
 DELIMITER; 
```

尝试使用该功能搜索前：

```
 SELECT name, distance(mark.loc, GeomFromText( ' POINT(31.5 42.2) ' )) AS cdist
 FROM mark
 ORDER BY
 cdist limit 10; 
```

或者：

```
 SELECT DISTINCT
 dest.name,
 distance(orig.loc, dest.loc) as sdistance
 FROM
 mark orig,
 mark dest
 having sdistance < 10
 ORDER BY
 sdistance limit 10; 
```

我遇到的问题是： ERROR 1367 (22007): Illegal non geometry 'aswkb(a@0)' value found during paring, or ERROR 1416 (22003): Cannot get geometry object from data you sent to the GEOMETRY field

我似乎无法弄清楚如何解决这个问题。重要的是“距离”功能可以动态使用。

我也尝试过这个解决方案：[Find the distance between two points in MYSQL。（使用点数据类型）](https://stackoverflow.com/questions/2270181/find-the-distance-between-two-points-in-mysql-using-the-point-datatype)

这是我的 mysql 版本 mysql Ver 14.14 Distrib 5.5.23，适用于 Linux (x86_64)，使用 readline 5.1

希望有人的专业知识可以帮助我。干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T11:49:26.780

所以我最终将此作为计算距离的查询，例如：

```
 SELECT  glength(LineStringFromWKB(LineString(GeomFromText(astext(PointFromWKB(POINT(63.424818,10.402457)))),GeomFromText(astext(PointFromWKB(POINT(663.422238,10.398996)))))))*100 
 AS distance; 
```

我将它乘以 100 以获得以公里为单位的近似值。结果不准确，但“ok”。如果有人知道更好的方法，请随时发表评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T12:27:18.317

定义一个自定义函数

```
CREATE DEFINER=`test`@`%` FUNCTION `geoDistance`(`lon1` DOUBLE, `lat1` DOUBLE, `lon2` DOUBLE, `lat2` DOUBLE)
    RETURNS double
    LANGUAGE SQL
    DETERMINISTIC
    NO SQL
    SQL SECURITY DEFINER
    COMMENT ''
    BEGIN
    DECLARE v DOUBLE;
    SELECT cos(radians(lat1))
        * cos(radians(lat2))
        * cos(radians(lon2) - radians(lon1)) 
        + sin(radians(lat1)) 
        * sin(radians(lat2)) INTO v;
    RETURN IF(v > 1, 0, 6371000 * acos(v));
END 
```

然后打电话

```
SELECT geoDistance(X(point1), Y(point1), X(spoint2), Y(point2)) 
```

结果以米为单位

# cocos2d-iphone - 当来自不同类的精灵相遇时创建一个联系人监听器

> ID：11436398
> 
> 赞同：0
> 
> 时间：2012-07-11T15:44:22.297
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我想以这样一种方式创建一个联系人监听器，当来自不同类的精灵相遇时，我将能够创建一个关节。我找到了一个有用的问题和答案，它对我有所帮助——在 Box2D 中部分[获取世界上的contactListener 。](https://stackoverflow.com/questions/10866715/getting-the-worlds-contactlistener-in-box2d/10901407#10901407)推荐以下代码和说明：

```
std::vector< std::pair<b2Fixture*, b2Fixture*> > thingsThatTouched;

//in BeginContact
thingsThatTouched.push_back( make_pair(contact->GetFixtureA(), contact->GetFixtureB()) );

//after the time step
    for (int i = 0; i < thingsThatTouched.size(); i++) {
    b2Fixture* fixtureA = thingsThatTouched[i].first;
    b2Fixture* fixtureB = thingsThatTouched[i].second;
// ... do something clever ...
}
thingsThatTouched.clear(); //important!! 
```

*为此，您需要使 thingsThatTouched 列表在联系侦听器函数中可见，因此它可以是全局变量，也可以在联系侦听器类中设置指向它的指针，或者可能有一个全局函数返回一个指向列表的指针。*

我正在使用 Cocos2d 并且不太了解 C++。如何在 Cocos2d*中“使 thingsThatTouched 列表在联系人监听器函数中可见”*？应该

```
std::vector< std::pair<b2Fixture*, b2Fixture*> > thingsThatTouched; 
```

在 ContactListener.h 文件中？在 Cocos2d 中会有什么不同？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:03:18.057

您可以将此列表存储在单例类中，然后您可以从任何地方访问它，甚至是 C++ 代码。像这样的东西：

```
NSArray* things = [SomeSingleton sharedSingleton].thingsThatTouched; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:26:45.817

把它放在头文件中：

```
typedef std::pair<b2Fixture*, b2Fixture*> fixturePair;
typedef std::vector<fixturePair> fixturePairVector;

extern fixturePairVector g_touchingFixtures; 
```

然后在需要使用列表的任何地方包含标题。您还需要在某个源文件（.mm 或 .cpp）中包含它，只需一次：

```
fixturePairVector g_touchingFixtures; 
```

当然，typedef 不是必需的，但如果您不喜欢查看太多错误类型的括号，它们可能会有所帮助。

# java - OutOfMemoryError：Java 堆空间错误

> ID：11436400
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:22.147
> 
> 标签：java

我遇到了一个我不明白的内存问题。我有以下情况

## 情况1

```
public  byte[] getBytes(InputStream is) throws IOException {

            int len;
            int size = 1024;
            byte[] buf;

              ByteArrayOutputStream bos = new ByteArrayOutputStream();
              buf = new byte[size];
              while ((len = is.read(buf, 0, size)) != -1)
              {
                bos.write(buf, 0, len);
              }
              buf = bos.toByteArray();

            return buf;
          }

Public void dosomething()
{
 //instructions
InputStream is = new ByteArrayInputStream(getBytes(bodyPart.getInputStream()));

} 
```

工作正常没有错误

但是这个

## 案例2

```
Public void dosomething()
{
 //instructions
ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    int len;
                    int size = 1024;
                    byte[] bufferFichierEntree = new byte[size];
                     while ((len = bodyPart.getInputStream().read(bufferFichierEntree, 0, size)) != -1)
                     {
                         bos.write(bufferFichierEntree, 0, len);
                     }
InputStream is = new ByteArrayInputStream(bufferFichierEntree);

} 
```

返回一个 java.lang.OutOfMemoryError: Java heap space 和一个不知道为什么？唯一的区别是，在第一种情况下，我使用的功能与第二种情况不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:51:01.613

在

```
while ((len=bodyPart.getInputStream().read(bufferFichierEntree, 0, size)) != -1) 
```

您正在每个循环中创建新的 InputStream，因此您只读取每个循环中的第一个字节。

尝试在 while 之前创建输入流，并按照您在第一个示例中的方式使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:54:31.273

似乎是 getInputStream 的范围问题，在第一个示例中，您使用 1 个 InputStream，在第二个示例中使用无穷大，并且每次都读取前 1000 个字节。如果您将其更改为喜欢；

> ```
> InputStream is = bodyPart.getInputStream(); 
> while ((len = is.read(bufferFichierEntree, 0, size)) != -1) { 
> ```

它应该按预期运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:51:09.007

其原因可能是：

当您使用两种方法时，它们`ByteArrayOutputStream`会超出范围，并且可以由垃圾收集器 (GC) 清理。

仅使用一种方法，您的缓冲区无法被 GC 清理，因为它仍在范围内，除非您将其取消。

当然，另一个原因可能是您每次都在循环中创建一个新的 InputStream，因为我们不知道具体是做什么`bodyPart.getInputStream()`的。如果是这种情况，请像这样解决它：

```
InputStream in = bodyPart.getInputStream();
while ((len = in.read(bufferFichierEntree, 0, size)) != -1)
{
    bos.write(bufferFichierEntree, 0, len);
} 
```

# jquery - Fancybox 叠加层未扩展到高度

> ID：11436401
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:27.243
> 
> 标签：jquery, html, css, fancybox, fancybox-2

使用 JavaScript：

```
$(document).ready(function() {
    $(".fancybox").fancybox({
        helpers: {
            overlay: {
                opacity: 0.4,
                css: {
                    'background-color': '#FFF'
                }
            }
        }
    });
}); 
```

但是，叠加层上的背景高度保持在 0。[单击此处查看](http://lewesestates.propertylogic.net/index.php?option=com_propertysearch&view=full_details_adv_ricky&p_department=RS&propertyID=473658&Itemid=97)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:57:04.580

您的 fancybox **js**文件的版本是`2.0.6`，但您的 fancybox **css**文件是`v2.0.5`. 将您的 fancybox css 文件升级到 v2.0.6 并解决问题。

# android - ActionBarCompat 更改项目图标

> ID：11436405
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:31.897
> 
> 标签：android, android-actionbar, compatibility, android-actionbar-compat

我正在开发一个实现 ActionbarCompat 的 API 7+ 应用程序。

目前，我在 ActionBar 上有一个带有“收藏夹”图标的活动，我正在尝试找到一种在收藏夹和不收藏夹之间切换图形的方法。

我在 onCreateOptionsMenu、onPrepareOptionsMenu 和 onOptionsItemSelected 中进行的所有努力都失败了，看来图标只能在创建时更改，而不能在活动已经运行时更改。

有没有人遇到过在运行时更改其中一个 ActionBarCompat 项目图标的方法，同时使用 ActionBarCompat 可见活动，并且仍然保持与 API 11+ 上的本机 ActionBar 的兼容性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:01:41.583

您需要实现一些基本逻辑`onCreateOptionsMenu()`来检查项目是否被收藏并根据该逻辑更改图标。

在您的`setFavourite()`方法中，您需要：

```
setFavourite() {
    ....
    if (changedFavourite)
       invalidateOptionsMenu() 
```

请参阅此处的文档：http: [//developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu) ()

这应该会迫使 ABS 重新绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T20:54:04.457

受@mobinvent 评论的启发，我发现以下内容为使用 ActionBarCompat 的预 HoneyComb 设备提供了按照 HoneyComb 及更高版本上的 invalidateOptionsMenu() 的选项菜单生命周期排序。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) invalidateOptionsMenu();
else {
    supportInvalidateOptionsMenu();
    openOptionsMenu();
    closeOptionsMenu();
} 
```

请注意打开选项菜单并关闭它的 hacky 要求。在我的特定实例中，我从 onActivityResult 调用它，在这个阶段似乎没有引入任何难看的菜单闪烁。

很好地摆脱了前 ActionBar 操作系统/设备！

# jquery - 快速鼠标悬停时的jQuery滑动菜单抖动行为

> ID：11436407
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:42.123
> 
> 标签：jquery, slidedown, slideup

所以我设法为一个效果很好的菜单创建了一个 setTimout slideUp/Down 函数 - 但在某些情况下，当用户将鼠标悬停在链接上时，它会快速上下滑动 - 我知道这个问题很典型，但我有尝试不同的事情没有成功。

这是一个工作演示 - 您可以查看是否将鼠标悬停在链接上，该功能会发疯 [http://jsfiddle.net/eA2HL/2/](http://jsfiddle.net/eA2HL/2/)

```
jQuery('.nav.mainmenu > li').each(function() {
    var t = null;
    var $this = jQuery(this);
    var result = jQuery('#result');
    $this.hover(function() {
        t = setTimeout(function() {
            if($this.find('ul').length > 0) {
                result.slideDown(200, function() {
                    if($this.is(':visible')) {
                        $this.find('ul').show();
                    }
                });
            }
            t = null;
        }, 300);
    }, function() {
        if (t) {
            clearTimeout(t);
            t = null;
        } else {
            $this.find('ul').hide(0);
            result.slideUp(333, function() {
                $this.find('ul').hide(0);
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:54:08.100

使用`.stop(1,1)`(same as `.stop( true , true )`) 将有助于清除一些动画堆积：

```
jQuery('.nav.mainmenu > li').each(function() {
        var t = null;
        var $this = jQuery(this);
        var result = jQuery('#result');
        $this.hover(function() {
            t = setTimeout(function() {
                if($this.find('ul').length > 0) {
                    result.stop(1,1).slideDown(200, function() {  // HERE
                        if($this.is(':visible')) {
                            $this.find('ul').show();
                        }
                    });
                }
                t = null;
            }, 300);
        }, function() {
            if (t) {
                clearTimeout(t);
                t = null;
            } else {
                $this.find('ul').hide(0);
                result.slideUp(333, function() { 
                    $this.find('ul').hide(0);
                });
            }
        });
    }); 
```

**[小提琴演示](http://jsfiddle.net/roXon/eA2HL/13/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:03:35.727

您还可以检查“结果”是否像这样动画（如果动画不动画）：

```
 if($(result).is(':animated')){
  return false;
  } 
```

# php - 教义 2 - 奇怪的 findBy() 函数

> ID：11436409
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:44.313
> 
> 标签：php, database, doctrine-orm

我尝试使用 Doctrine 2 从数据库中获取数据，但是 findBy() 函数有问题。

我有实体**用户**：

```
/**
 * @ORM\id
 * @ORM\generatedValue
 * @ORM\column(type="integer")
 */
private $id;

/**
 * @ORM\column(type="string", length=32, unique=true)
 */
private $user; 
```

和实体**UserList**：

```
/**
 * @ORM\id
 * @ORM\generatedValue(strategy="NONE")
 * @ORM\oneToOne(targetEntity="User")
 * @ORM\joinColumn(name="user_id", referencedColumnName="id")
 */
private $id;

/**
 * @ORM\oneToOne(targetEntity="User")
 * @ORM\joinColumn(name="parent_id", referencedColumnName="id")
 */
private $parent = null; 
```

我有数据表：

```
Users:
 +----+------+
 | id | user |
 +----|------+
 | 1  | John |
 | 2  | Jane |
 | 3  | Doe  |
 +----+------+

UsersList (id 3 have two parents):
 +---------+-----------+
 | user_id | parent_id |
 +---------|-----------+
 |    1    |    NULL   |
 |    2    |    NULL   |
 |    3    |     1     |
 |    3    |     2     |
 +---------+-----------+ 
```

我想得到 Doe (id 3) 的父母：

```
 $user = $this->entityManager->getRepository('User')->findByUser('Doe');
 $user_parents = $this->entityManager->getRepository('UserList')->findById($user);

 foreach($user_parents as $parent)
 {
     var_dump($parent);
 } 
```

返回：

```
 UserList(2) {
    id private => 3
    parent private => 1
 }
 UserList(2) {
    id private => 3
    parent private => 1 //this should be 2
 } 
```

问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:27:25.797

您应该将`@Id`注释添加到您的`UserList::$parent`属性中。

# c++ - 快速查找 4 的倍数

> ID：11436411
> 
> 赞同：1
> 
> 时间：2012-07-11T15:44:50.270
> 
> 标签：c++, integer

有没有不使用 % 运算符（在 C++ 中）的快速方法来查找 32 位整数是否是 4 的倍数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T15:45:46.310

就在这里。

```
((i & 3) == 0) 
```

请注意，这可能不会更快。无论如何，一个好的优化编译器会将您的模数与常量 4 转换为最快的操作，因此它很可能会自动生成它。

如果您有兴趣，请检查生成的代码。

# css - 如何使用 Blend 为 Windows Metro 应用程序中的设置窗格设置样式？

> ID：11436413
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:45:01.313
> 
> 标签：css, windows-8, expression-blend

我想为一些 Windows 8 Metro 应用程序构建样式。

如何在 Blend 中显示设置窗格？

例如，`settings.html`如下`default.js`所述：

```
app.onsettings = function (eventObject) {
    eventObject.detail.applicationcommands = { "prefs": { title: "Preferences", href: "/pages/prefs/prefs.html" } };
    WinJS.UI.SettingsFlyout.populateSettings(eventObject);
}; 
```

另一个相关问题是：如何在 Blend 中显示搜索结果页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:44:37.720

一种解决方案是通过这样的代码以编程方式调用“设置窗格”：

```
function scenario5ShowSettingsFlyout() {
    WinJS.UI.SettingsFlyout.showSettings("prefs", "../../pages/prefs/prefs.html");
} 
```

[微软官方示例](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49)的场景 5 中提供了更多信息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T09:31:00.160

尝试 Blend 中的交互模式，它允许您直接在 Blend 中启动您的应用程序，否则只需将 CSS 文件（例如 pref.css）关联到您的 HTML 页面（pref.html），然后为您的元素设置样式。

希望这有帮助。

# c# - 隐藏除一个之外的所有控件

> ID：11436415
> 
> 赞同：0
> 
> 时间：2012-07-11T15:45:13.723
> 
> 标签：c#, wpf, xaml, mvvm, pixelsense

假设我有这个 XAML 代码：

```
<StackPanel>
    <s:SurfaceTextBox Name="A" />
    <s:SurfaceTextBox Name="B" />
</StackPanel>

<s:ScatterView>
    <s:SurfaceTextBox Name="C" />
    <s:SurfaceTextBox Name="D" />
</s:ScatterView> 
```

我怎样才能在后面的代码中隐藏所有这些文本框，除了名为 A.

我不是要求这个回应：

```
B.Visibility = Visibility.Hidden;
C.Visibility = Visibility.Hidden;
D.Visibility = Visibility.Hidden; 
```

我想要一些通用的东西，它可以为所有人做，而不知道他们的名字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:59:30.580

你可能会做这样的事情：

```
public void SetVisibility(UIElement parent)
{
    var childNumber = VisualTreeHelper.GetChildrenCount(parent);

    for (var i = 0; i <= childNumber - 1; i++)
    {
        var uiElement = VisualTreeHelper.GetChild(parent, i) as UIElement;
        var surfaceTextBox = uiElement as SurfaceTextBox;

        // Set your criteria here
        if (surfaceTextBox != null && surfaceTextBox.Name != "A")
        {
            uiElement.Visibility = Visibility.Collapsed;
        }

        if (uiElement != null && VisualTreeHelper.GetChildrenCount(uiElement) > 0)
        {
            SetVisibility(uiElement);
        }
    }
} 
```

给你的根元素一个名字：

```
<Grid x:Name="Root">
    <StackPanel>
        <s:SurfaceTextBox Name="A" />
        <s:SurfaceTextBox Name="B" />
    </StackPanel>

    <s:ScatterView>
        <s:SurfaceTextBox Name="C" />
        <s:SurfaceTextBox Name="D" />
    </s:ScatterView>
</Grid> 
```

然后这样称呼它：

```
SetVisibility(Root); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:46:34.690

您可以将想要隐藏的那些放在网格中并将网格设置为隐藏。另一种方法是将您的 Visibility 绑定到您的代码后面或（希望）您的视图模型中的布尔值。您需要一个 BooleanToVisibility 类型转换器来完成此操作，但它允许您隐藏绑定到该字段的无限数量的控件。这是一个例子： [可见性类型转换器](http://social.msdn.microsoft.com/Forums/en/wpf/thread/3c0bef93-9daf-462f-b5da-b830cdee23d9)

# cordova - Phonegap存储，db是否存在

> ID：11436417
> 
> 赞同：1
> 
> 时间：2012-07-11T15:45:22.810
> 
> 标签：cordova

好的，这是我第一个使用 phonegap 中的存储功能的 ios 应用程序。我以前用过phonegap，但从来没有用过存储。

当我开始深入研究时，我需要做的第一件事就是在准备好的设备上创建数据库。现在我开始之前的问题是，当我做 window.openDatabase 时，每次都会创建数据库吗？或者，如果我指定的名称的数据库存在，它是否只是跳过它？

哦，还有一个命令可以简单地检查数据库是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:47:44.887

如果提供的数据库版本是空字符串，或者如果数据库还不存在，或者如果数据库存在并且提供给 openDatabase() 方法的版本与与数据库关联的当前版本相同，则该方法必须返回一个表示具有给定名称的数据库的数据库对象。如果不存在这样的数据库，则必须先创建它。

这来自原始文档，并且如前所述 - [http://www.w3.org/TR/2009/WD-html5-20090212/structured-client-side-storage.html](http://www.w3.org/TR/2009/WD-html5-20090212/structured-client-side-storage.html)

因此没有直接的方法可以知道数据库是否存在，但是您可以检查表是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:01:04.497

Phonegap/Cordova 使用 WebView 提供的默认数据库（iOS SDK 提供的无铬浏览器实例：[https](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html) ://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html ） .

当你做一个`window.openDatabase("mydatabase", "1.0", "PhoneGap", 0);`

`0000000000000001.db`它在这个位置创建一个数据库（ ）

> ~/Library/Application Support/iPhone Simulator/4.3/Applications/E56D5D30-2F7F-4B28-A139-2FBE979C2B10/Library/WebKit/Databases/file__0

您的所有表格都将存储在这里。

# routing - Web api 路由：可选参数

> ID：11436418
> 
> 赞同：3
> 
> 时间：2012-07-11T15:45:27.350
> 
> 标签：routing, asp.net-web-api, url-template

我有这条路线：

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}/{myparam}",
                defaults: new { id = RouteParameter.Optional, myparam = RouteParameter.Optional }
            ); 
```

“id”应该是可选的，“myparam”也应该是可选的，但如果设置了“myparam”，则“id”不能是可选的。我该如何配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:53:51.890

我猜你可能需要为此定义两条路线：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

routes.MapHttpRoute(
            name: "DefaultApiWithMyParam",
            routeTemplate: "api/{controller}/{id}/{myparam}"
        ); 
```

第一个路由将匹配所有 URL，无论它们是否包含 ID，而第二个路由将匹配包含 id 和 myparam 值的 URL。请注意，第二条路线中没有任何段是可选的。

# java - 如何在另一个类上向 TreeMap 传递和获取值？

> ID：11436419
> 
> 赞同：1
> 
> 时间：2012-07-11T15:45:28.293
> 
> 标签：java

我正在尝试模拟生产系统，现在我无法获取值并将值传递给位于不同类的 TreeMap。

为了简要解释我打算做什么，我将创建一个面板，其中有一些文本面板来保存值（用于添加到系统中的零件数量）和一个表格，其中工作站的数量和参数系统将被设置。当我运行它时，应该存储这些值以供进一步处理。

在上一个问题上，建议我使用 TreeMaps 来存储这些值，例如：

```
Station[num][type][avg_time][posx][posy][state]
Part[num][type][state] 
```

这是我到目前为止编码的内容：

爪哇

```
import java.awt.*;
import javax.swing.*;    

public class L extends JFrame {

    public static void main(String[] args) {

      SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            L l = new L();

            TMap t = new TMap();
            t.Station("num", 127);
            t.Station("type", 3);
            //System.out.println("Entryset: " + t.keySet());
            //System.out.println("Entryset: " + t.Station() + "\n");
         }
      });

    }

 } 
```

TMap.java

```
import java.util.*;

public class TMap {
    //public TreeMap <String, Integer>St = new TreeMap<String, Integer>();
    public int num_atrib = 6;
    public static TreeMap<String, Integer> Station(String s,int i) {
        TreeMap <String, Integer>St = new TreeMap<String, Integer>();
        St.put(s,i);
        System.out.println("Now the tree map Keys: " + St.keySet());
        System.out.println("Now the tree map contain: " + St.values());
        return St;
    }
} 
```

这是输出：

```
Now the tree map Keys: [num]
Now the tree map contain: [127]
Now the tree map Keys: [type]
Now the tree map contain: [3] 
```

我有两个问题，首先，这是正确的方法吗，因为我看到输出的地图应该是 [num, type] 和键 [127, 3] 对吗？

其次，我以后如何从 L 类的 TMap 获取参数，因为 t.keySet() 例如到目前为止不会检索任何东西！

希望我说清楚了，在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:17:44.797

首先，每次调用 TMap.Station 时都会创建一个新的 TreeMap。尝试将 TreeMap 作为字段并在构造函数中对其进行初始化。那应该为您提供包含两个键/值对的地图。

回答你的第二个问题，你有什么理由不能让 TMap 成为一个字段而只是创建方法来访问和设置？如果您只在一个函数中实例化它，它会在该函数退出后立即消失（加上它的范围只会在该函数中）。

编辑：回应评论......怎么样

编辑编辑：为吸气剂添加粗略的轮廓。如果你想要一个 put() 之类的东西，它会以类似的方式工作。

```
import java.awt.*;
import javax.swing.*;
import java.util.Set;

public class L extends JFrame {
    private TMap t;

    public L() {
        t = new TMap();
    }

    public Set<String> getKeySet() {
        return t.getKeySet();
    }

    public Integer get(String s) {
        return t.get(s);
    }

    // your main method as before
} 
```

和

```
import java.util.*;

public class TMap {
    private TreeMap<String, Integer> St;
    private int num_atrib = 6;

    public TMap() {
        St = new TreeMap<String, Integer>();
    }

    public Set<String> getKeySet() {
        return St.keySet();
    }

    public Integer get(String s) {
        return St.get(s);
    }

    public static TreeMap<String, Integer> Station(String s,int i) {
        St.put(s,i);
        System.out.println("Now the tree map Keys: " + St.keySet());
        System.out.println("Now the tree map contain: " + St.values());
        return St;
    }
} 
```

# android - 安装应用程序的android详细信息

> ID：11436426
> 
> 赞同：0
> 
> 时间：2012-07-11T15:45:38.460
> 
> 标签：android, installed-applications

有没有办法获取有关设备中安装的应用程序的详细信息？我想实现一个至少可以包含已安装应用程序名称的应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:50:40.557

您可以使用 PackageManager：

```
final PackageManager pm = getPackageManager();
//get a list of installed apps.
    List<ApplicationInfo> packages = pm
            .getInstalledApplications(PackageManager.GET_META_DATA);

    for (ApplicationInfo packageInfo : packages) {

        Log.d(TAG, "Installed package :" + packageInfo.packageName);
        Log.d(TAG, "Launch Activity :"
                        + pm.getLaunchIntentForPackage(packageInfo.packageName));
        Log.d(TAG, "Application name :" + pm.getApplicationLabel(packageInfo));

    }// the getLaunchIntentForPackage returns an intent that you can use with startActivity() 
```

编辑：您可以使用[getApplicationLabel()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationLabel%28android.content.pm.ApplicationInfo%29)来获取名称，如上所示。

[http://qtcstation.com/2011/02/how-to-launch-another-app-from-your-app/](http://qtcstation.com/2011/02/how-to-launch-another-app-from-your-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:50:12.237

干得好：

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
final List appsList = context.getPackageManager().queryIntentActivities(intent, 0); 
```

# c# - C# 和 WPF 循环计数器值在调度程序中使用时不会改变

> ID：11436430
> 
> 赞同：2
> 
> 时间：2012-07-11T15:45:59.720
> 
> 标签：c#, wpf, multithreading, loops, dispatcher

我一直遇到这个奇怪的问题，我似乎无法找到解决它的方法。

我正在编写一个 WPF 应用程序，并且正在将值加载到 ListBox 中。具体来说，此列表框显示客户端计算机的引导顺序。所以列表框项目模板包含 4 个值。新序列号（用户更改后的引导顺序）当前（或分配的）序列号（机器现在的顺序）、设备名称以及设备是否启用。

此数据在单独的线程中加载，因此为了将其显示在列表框中，我使用了调度程序。

出于这个问题的目的，存在一个列表设备，其中设备是一个包含分配序列和设备名称的类。

bootOrderListBox 是 ListBox UI 元素。

当前循环是这样的：

```
for(int i=0;i<devices.Count();i++)
{
    Device device = devices.ElementAt(i);
    int newSeqNum = (device.AssignedSequence == 0) ? 0 : i + 1;
        bool isEnabled = (device.AssignedSequence == 0) ? false : true;                                    

    Console.WriteLine("\t" + newSeqNum 
                      + "\t" + 
                      device.AssignedSequence 
                      + "\t" + device.DeviceName);
    bootOrderListBox.Dispatcher.Invoke(DispatcherPriority.Normal, (ThreadStart)delegate
    {

        bootOrderListBox.Items.Add(new BootOrderDevice(device.AssignedSequence, 
                                                       newSeqNum,
                                                       device.DeviceName,
                                                       isEnabled));
    });
} 
```

现在由于这个应用程序的设置方式，我所有的调试都在与我开发的机器不同的机器上，但是所有控制台输出都被重定向到 UI 中的 TextBox（也使用 Dispatcher）。

我的问题是 newSeqNum 在“控制台”和 ListBox 中都是一个常量 1 值，但代码完美地通过了设备列表。

什么可能导致这种情况发生，我能做些什么来解决它？

我的想法使我相信，当 Dispatcher 运行时，它会在单独的线程上创建一个具有默认值的新 int 或类似的东西。

非常感谢。

=========================更新========================= ============================

列表框（和控制台）中的输出如下所示：

新序列分配的序列设备名称

1 2 软盘驱动器：1

1 1 USB 存储设备：3

1 3 板载网卡：5

1 4 内置硬盘：2

1 5 CD/DVD/CD-RW 驱动器：4

它肯定会从列表中获取不同的设备。

=========================更新2======================== ========================== ListBox XAML：

```
<ListBox Name="bootOrderListBox"
             Grid.Row="2"
             Grid.Column="1"
             Grid.ColumnSpan="4">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Name="newSequenceTextBlock"
                               Text="{Binding Path=NewSequence}"
                               Margin="10,2,2,2" />
                    <TextBlock Name="assignedSequenceTextBlock"
                               Text="{Binding Path=AssignedSequence}"
                               Margin="50,2,2,2" />
                    <TextBlock Name="deviceNameTextBlock"
                               Text="{Binding Path=DeviceName}"
                               Margin="30,2,2,2" />
                    <CheckBox Name="isEnabledCheckBox"
                              IsChecked="{Binding Path=IsEnabled}"
                              Margin="10,2,2,2" 
                              Checked="isEnabledCheckBox_Checked"
                              Unchecked="isEnabledCheckBox_Unchecked"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

它绑定到的 BootOrderDevice 类：

```
public class BootOrderDevice
{
        public int AssignedSequence { get; set; }

        public int NewSequence { get; set; }

        public string DeviceName { get; set; }

        public bool IsEnabled { get; set; }

        public BootOrderDevice(int assSequence, int newSequence, string deviceName, bool isEnabled)
        {
            AssignedSequence = assSequence;
            NewSequence = newSequence;
            DeviceName = deviceName;
            IsEnabled = isEnabled;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:57:41.077

我相信这与关闭和价值捕获有关。尝试将 newSeqNum 声明移到 for 循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:48:48.630

我可以看到 newSeqNum 为 1 的唯一方法是因为：

```
int newSeqNum = (device.AssignedSequence == 0) ? 0 : i + 1; 
```

编译器是否将其视为：

```
int newSeqNum = ((device.AssignedSequence == 0) ? 0 : i) + 1; 
```

如果分配的序列为 0，它总是会给你 1。

或者编译器是否将其视为：

```
int newSeqNum = (device.AssignedSequence == 0) ? 0 : (i + 1); 
```

# oracle - 如何检查程序包中是否存在程序？

> ID：11436432
> 
> 赞同：10
> 
> 时间：2012-07-11T15:46:17.040
> 
> 标签：oracle, plsql

我有程序包，在许多地方使用，在某些地方我需要稍微不同的程序，例如再更新一列。

我想我可以创建一个额外的包，其中包含一些但不是全部的过程。

有没有办法`if`直接在脚本中检查语句，如果额外包中不存在过程，则退回到标准包？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T15:53:19.063

您应该能够从 DBA_PROCEDURES 视图中获取此信息：

```
SELECT *
  FROM SYS.DBA_PROCEDURES
  WHERE OBJECT_TYPE = 'PACKAGE' AND
        OBJECT_NAME = '<your package name>' AND
        PROCEDURE_NAME = '<your procedure name>' 
```

如果这返回一行，则您感兴趣的过程存在于包中。如果您收到 NO_DATA_FOUND 异常，则表示程序包中不存在该过程。

分享和享受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-13T14:33:12.867

查询 SYS.DBA_PROCEDURES 的用户不需要特殊权限吗？也许查询 SYS.User_Objects 需要更少的权限？

```
select * from SYS.User_Objects where object_type = 'PACKAGE'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-19T20:39:47.713

你也可以试试

```
SELECT text FROM all_source WHERE name = 'PACKAGE' ORDER BY line; 
```

为我工作...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-26T13:09:07.250

如果您以*普通*用户身份执行代码，则根本看不到 SYS.DBA_PROCEDURES。

但是您可以从用户可访问的表中执行相同的操作`user_procedures`：

```
SELECT * 
  FROM USER_PROCEDURES 
  WHERE OBJECT_TYPE='PACKAGE' AND 
        OBJECT_NAME ='<your package name>' AND 
        PROCEDURE_NAME = '<your procedure name>'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-15T13:20:54.587

```
select * from USER_OBJECT where object_type='PACKAGE' AND OBJECT_NAME ='<YOUR PACKAGE NAME>' 
```

# c# - 为什么 c# 中的 lambdas 似乎以不同的方式处理布尔返回值？

> ID：11436433
> 
> 赞同：6
> 
> 时间：2012-07-11T15:46:20.323
> 
> 标签：c#, lambda

考虑这段代码：

```
Func<int, bool> TestGreaterThanOne = delegate(int a) {
                 if (a > 1) return (true);
                 else return(false);
                 }; 
```

在上面的代码中，我无法删除“else return(false)”语句——编译器警告说并非所有代码路径都返回一个值。但是在下面的代码中，它使用了一个 lambda...

```
Func<int, bool> TestGreaterThanOne = a => a > 1; 
```

我不必有“else”语句 - 没有编译器警告并且逻辑按预期工作。

这里有什么机制使我的 lambda 中没有“else”语句？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T15:47:31.897

因为在您的 lambda 速记中，也没有 if 语句。您的 lambda 速记相当于

```
Func<int, bool> TestGreaterThanOne = delegate(int a) { 
             return (a > 1);
             }; 
```

因此，所有代码路径都返回一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:50:04.550

为了稍微添加到其他响应，在您的 lambda 语句中，`a > 1`计算为一个布尔值，然后返回。

通常，写作`return true;`和`return false;`陈述被认为是多余的。只返回表达式的结果更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:53:58.180

作为重写委托的替代方法，您的 lambda 抽象相当于

```
Func<int, bool> TestGreaterThanOne = a => {
             if (a > 1) return (true);
             else return(false);
             }; 
```

在哪里也不能删除 else 分支。因为它也不会返回。当前版本有效，因为`a > 1`它是一个布尔值（始终存在）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:50:29.740

在您提到的情况下，我认为他们处理布尔值的方式并没有不同。代码只是做两件不同的事情。由于您定义了它`Func`，`Func<int, bool>`因此它需要一个布尔返回值。第二段代码总是返回一个布尔值。但是，除非您包含 else，否则第一段代码不会返回布尔值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T15:51:25.420

`a>1`本身是一个布尔值，这就是你的 lambda 工作的原因。您几乎可以将 if 语句视为一个接受布尔参数的函数，因此，您可以执行类似的操作

```
boolean b = true

if(b)
    doSomething(); 
```

它会编译并执行 doSomething

# c# - 同一页面中的多个自动完成

> ID：11436437
> 
> 赞同：0
> 
> 时间：2012-07-11T15:46:29.847
> 
> 标签：c#, jquery, asp.net, autocomplete

我想创建多个自动完成，但我只能创建一个。它必须与不同的查询一起使用。我的代码是这样的。

```
 $(document).ready(function(){
   $("#arama").keyup(function(){
    data_getir($(this).val());
   });
  });
  function data_getir(aranan)
  {
    $.ajax({
      type: "POST",
      url: "web.asmx/oku?aranan=" + aranan, //web service ve methodumuz
      data: "{adres:'complete.ascx'}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg){
        $("#goster").html(msg.d)
      }
    });
  }
  function sec(kontrol){$("#arama").val($(kontrol).html()); $("#goster").html("");}

<div>
  <input id="arama" type="text" style="width:150px; height:20px; font-size:11pt;" />
  <div id="goster"></div>
</div> 
```

和js：jquery-1.2.6.pack.js

如何将它与同一页面中的另一个查询一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:53:31.410

只需生成一个新函数并将其绑定到您要用作自动完成字段的其他输入，您可以在一个页面中拥有多少个自动完成没有限制。

```
$(document).ready(function(){
   $("#arama").keyup(function(){
    data_getir($(this).val());
   });

   $("#autocomplete_bis").keyup(function(){
    data_getautocomplete_bis($(this).val());
   });
  });
  function data_getir(aranan)
  {

  }

 function data_getautocomplete_bis(aranan){
 $.ajax({
      type: "POST",
      url: "web.asmx/oku?new_query=" + aranan, //web service ve methodumuz
      data: "{adres:'complete.ascx'}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg){
        $("#autocomplete_bis_goster").html(msg.d)
      }
    });
}
  function sec(kontrol){
$("#arama").val($(kontrol).html()); 
$("#goster").html("");
}

<div>
  <input id="arama" type="text" style="width:150px; height:20px; font-size:11pt;" />
  <div id="goster"></div>
  <input id="autocomplete_bis" type="text" style="width:150px; height:20px; font-size:11pt;" />
  <div id="autocomplete_bis_goster"></div>
</div> 
```

# python - sqlalchemy，从mysql读取并写入内存

> ID：11436439
> 
> 赞同：0
> 
> 时间：2012-07-11T15:46:30.227
> 
> 标签：python, mysql, sql, sqlalchemy

我有一个与 mysql 数据库通信的程序，我应该避免修改它，直到一切正常。

所以我已经有办法创建一个假的内存数据库（使用 sqlalchemy+sqlite），但问题是我必须一直创建模式并填充数据库。

例如

```
Table(
    'builddefinitions', meta,
    Column('idBuildDefinitions', String(20)),
    Column('BuildType', String(20)),
) 
```

是否可以改为

*   创建一个用于加载表和模式的 mysql 引擎
*   创建一个 sqlite 内存引擎并在其中加载所有模式和数据
*   使用该数据库安全地进行所有更新

有没有办法做到这一点是 sqlalchemy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:55:03.940

您没有直接的方法来做到这一点。看看这个转储器：[http ://www.tylerlesmann.com/2009/apr/27/copying-databases-across-platforms-sqlalchemy/](http://www.tylerlesmann.com/2009/apr/27/copying-databases-across-platforms-sqlalchemy/)

如果这是您想要的，我不知道如何保持两者的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:57:31.563

我会克隆数据库。这就是为什么一个人通常有一个生产环境和一个单独的开发环境（在某些情况下是测试和预生产）。

# c++ - 程序使用 TCHAR 类型和 TEXT 宏将 L 附加到变量名

> ID：11436445
> 
> 赞同：-3
> 
> 时间：2012-07-11T15:46:50.757
> 
> 标签：c++, windows, lpcstr

我正在尝试获取 Program Files 路径，将其附加到另一条路径，然后运行它。

```
TCHAR programsdir[MAX_PATH];
SHGetFolderPath(NULL,CSIDL_PROGRAM_FILESX86,NULL,NULL,programsdir);
PathAppend(programsdir, TEXT("\\bin\\program.exe"));
LPCSTR pokerpath = TEXT(programsdir);
WinExec(pokerpath ,SW_SHOW);
return pokerpath; 
```

尝试运行上述内容时收到此错误消息：

`error C2065: 'Lprogramsdir' : undeclared identifier`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:53:33.937

`TEXT`是一个宏，应该`L`在您使用 unicode 编译时使用，否则没有。

所以在你的情况下，`TEXT(programsdir)`变成`Lprogramsdir`. 这就是为什么你有这个错误。

当你使用 unicode 字符串时，你必须在它们的声明前加上一个`L`as in`L"My string content"`

通过编写`TEXT("My string content")`，您可以确保在使用 unicode 时它变为 L“我的字符串内容”，否则为“我的字符串内容”。此宏允许您使用不同的编码，而无需修改原始字符串。

它不用于复制或演员，如果那是你试图做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:08:08.387

`TCHAR`是一个`typedef`对于`char`。

`LPCSTR`是一个`typedef`对于`const char *`。

无需调用宏（显然每个@olchauvin 都会`TEXT`将一个附加到您的变量名）。`L`

你应该使用`strcpy(pokerpath, programsdir);`

或者只是返回`programsdir`。`char *`无论如何它都会衰减。

我不知道您是否使用 UNICODE，因此您可能需要使用特殊的 UNICODE 函数之一来复制字符串。否则，只能退货。

# google-apps-script - 该网址未被识别为有效的 Google 脚本

> ID：11436448
> 
> 赞同：1
> 
> 时间：2012-07-11T15:47:01.487
> 
> 标签：google-apps-script

我将 App Script 作为 Web 应用程序发布，当我使用 Web 应用程序 URL 时，一切运行良好。

https://script.google.com/a/macros/[mydomain]/s/[servicekey]/exec

当我进入 Google 站点并尝试插入“Google 脚本小工具”并选择我的网络应用程序的 URL 时，我不断收到一条消息，显示“该 URL 未被识别为有效的 Google 脚本”。但是，如果我在新的浏览器窗口中复制并粘贴 URL，那么 Web 应用程序就会正常运行。是否无法将已发布的网络应用程序插入 Google 网站？

[我什至尝试使用此处](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1415)描述的旧命名约定，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:43:16.177

您的脚本的原始“容器”是什么？你是从电子表格开发的吗？作为一个独立的脚本文件？或在您的站点脚本编辑器中？当托管在站点中时，生成的 webapp url 是不同的，下面是一个可以插入的示例：

```
`https://sites.google.com/macros/exec?service=keyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` 
```

请注意，如果站点中托管了脚本，则此 url 没有用，因为脚本可以直接通过其名称获得。我必须承认，界面并不清楚这一点，文档也不是很清楚，但这是我得出的结论，请不要认为这是绝对事实；-) 也许谷歌的某个人可以确认（或不确认）。

编辑：您提到的“旧符号”仍然适用于我作为独立脚本文件开发的脚本，该脚本使用与上面显示的 url 结构关联的密钥...我只是复制/粘贴了密钥，没有任何其他地方 keyxxx ... 站立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:15:10.160

确认以下 URL 格式在作为 Apps 脚本小工具 URL 插入 Google 协作平台时有效。

```
https://sites.google.com/macros/exec?service=keyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
```

# spring - Spring 3，在服务调用测试中使用 TransactionalTemplate？

> ID：11436450
> 
> 赞同：0
> 
> 时间：2012-07-11T15:47:10.003
> 
> 标签：spring, unit-testing, transactions

我无法获得一个非常简单的测试场景来工作。逻辑上（对我来说）它应该，但它没有

我有交易服务：

```
@Transactional(propagation = Propagation.REQUIRED)
public void addCustomer(Customer newCustomer)  {
    customerDAO.insert(newCustomer);
} 
```

因此，它设置为开始交易或重用现有交易。我已`tx:annotation-driven transaction-manager="transactionManager"`在应用程序上下文中设置，因此 Spring 将此服务视为事务性服务。

我有一个调用此代码的测试，效果很好。

但我想要另一个测试来验证回滚。所以我创建了一个调用 TranscationTemplate 块的测试，例如：

```
 final int preCount = service.getCustomerCount();;

    TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);
    transactionTemplate.execute(new TransactionCallback<Void>() {
        public Void doInTransaction(TransactionStatus status) {

                // adding another and rolling back
                Customer c = new Customer();
                                    .
                                    .
                  service.addCustomer(c);

                status.setRollbackOnly();
                throw new RuntimeException("rollback"); 
```

我假设这会回滚 addCustomer 服务调用，因为这个块和服务都应该（？）共享同一个事务。

但是回滚永远不会发生

任何人有任何想法为什么？您不能共享程序化和声明性事务吗？

**编辑**> 目标数据库是 H2。

Junit定义如下：

```
RunWith(SpringJUnit4ClassRunner.class)

ContextConfiguration(locations = {"/customer-application-context.xml"})

public class TestAddCustomer extends AbstractTransactionalJUnit4SpringContextTests 
```

transactionManager 在类中自动装配。

# vb.net - 如何通过名称而不是索引来引用列表视图子项？

> ID：11436454
> 
> 赞同：2
> 
> 时间：2012-07-11T15:47:26.047
> 
> 标签：vb.net, listview

我一直想知道下面的代码：

```
ListView1.View = View.Details   
ListView1.Columns.Add("c1")   
ListView1.Columns.Add("c2")  
Dim Item As New ListViewItem    
Item.Text = "1"
Item.SubItems.Add("2")
ListView1.Items.Add(Item) 
```

* * *

```
'MsgBox(ListView1.Items(0).SubItems("c1").Text) 'this is wrong  
MsgBox(ListView1.Items(0).SubItems(0).Text) 'this is right 
```

我想要一种通过名称引用列的方法，因为它更具可读性，并且减少了出错的机会。但是，该程序不会构建。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:59:15.500

您可以指定名称`ListViewSubItem`并通过该名称引用子项：

```
Dim subItem As New ListViewItem.ListViewSubItem
subItem.Name = "c1"
subItem.Text = "SubItem"
Item.SubItems.Add(subItem) 
```

如果您以这种方式添加子项，`MsgBox(ListView1.Items(0).SubItems("c1").Text)`将起作用。

**更新：**

不幸的是，这不适用于第一个子项。要解决此问题，您可能需要在之前创建所有子项（包括默认项）`ListViewItem`：

```
Dim subItems As ListViewItem.ListViewSubItem() = New ListViewItem.ListViewSubItem(2 - 1) {}
subItems(0) = New ListViewItem.ListViewSubItem()
subItems(0).Name = ListView1.Columns(0).Text
subItems(0).Text = "Default SubItem"
subItems(1) = New ListViewItem.ListViewSubItem()
subItems(1).Name = ListView1.Columns(1).Text
subItems(1).Text = "SubItem 1"
Dim Item As New ListViewItem(subItems, 0)
ListView1.Items.Add(Item) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:58:19.570

你可以使用一点 LINQ：

```
Dim c1Items = From subItem In ListView1.Items(0).SubItems.Cast(Of ListViewItem.ListViewSubItem)()
               Where subItem.Name = "c1"
MsgBox(c1Items.First.Text) 
```

[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/bb534803)根据谓词过滤一系列值。`First`取第一个元素。所以它需要第一个 subItem 的`Text`with `Name = "c1"`。

**编辑**：'对 Winform 控件不太熟悉。如果未设置 SubItem 名称，则可以使用此 LINQ 查询来查找具有给定`Text`. 然后您可以使用它来获取正确的 SubItem：

```
Dim c1ICol = (From col In ListView1.Columns.Cast(Of ColumnHeader)()
              Where col.Text = "c1").First
MsgBox(ListView1.Items(0).SubItems(c1ICol.Index).Text) 
```

# linq - 针对 SQLite 数据库的 LINQPad 查询中的 InvalidOperationException

> ID：11436457
> 
> 赞同：0
> 
> 时间：2012-07-11T15:47:28.963
> 
> 标签：linq, linqpad

我在应用程序中有以下 LINQ 查询。数据源是`List<Borehole>`在内存中构建的，用于测试目的。

```
var lq = from p in data
         group p by p.CostCenter into g
         select new {  CostCenter = g.Key, 
                       AverageDepth = g.Average(p => p.OriginalDepth),
                       NullDepthCount = g.Count(p => p.OriginalDepth == null) }; 
```

它运行完美，并给出了所需的选择结果。但是，当我在 LINQPad 中运行以下查询时，它会导致`InvalidOperationException`：

```
var lq = from p in Boreholes
          group p by p.CostCenter into g
          select new {  CostCenter = g.Key, 
                        AverageDepth = g.Average(p => p.OriginalDepth),
                        NullDepthCount = g.Count(p => p.OriginalDepth == null) }; 
```

这里的数据源是 SQLite 数据库中的一个表，使用 IQ 2.0.5.0 LINQPad 驱动程序链接到 LINQPad。错误信息是：

`No generic method 'Where' on type 'System.Linq.Queryable' is compatible with the supplied type arguments and arguments. No type arguments should be provided if the method is non-generic.`

我正在使用`LINQPad v4.42.01`. 应用程序示例是编译 vs `.NET Framework 4 Client Profile`。

该`OriginalDepth`属性的类型为`double?`。

为什么我的查询在 LINQPad 中不起作用/为什么它在我的应用程序中起作用？

我可以做些什么来修复 LINQPad 查询？

**更新**

如果我将我的应用程序代码（包括虚拟`Borehole`类的定义和虚拟`data`列表的创建）复制并粘贴到 LINQPad 中，它可以正常工作。因此，问题不在于 LINQPad 拒绝在应用程序中工作的查询格式。

*问题变成了：*为什么我可以`g.Count(p => p.OriginalDepth == null)`在一个`List<Borehole>`对象上使用，但是当我对 LINQPad 访问的 SQLite 表执行相同的查询时，我得到`InvalidOperationException`了如上所述的结果？

**更新 2**

`g.count`查询部分的谓词是什么并不重要。当对 SQLite 数据库表执行时，以下结果会导致相同的错误：

```
var lq2 = from p in Boreholes
          group p by p.CostCenter into g
          select new { NullDepthCount = g.Count(p => true )}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:57:22.203

并非每个 Linq 提供程序都会支持所有功能，因此可能您在这里遇到了 IQ 提供程序不支持的功能。

如果表的大小很小（通常是 sqlite 数据库），那么你可以这样做

```
var lq = from p in Boreholes.ToList()
      group p by p.CostCenter into g
      select new {  CostCenter = g.Key, 
                    AverageDepth = g.Average(p => p.OriginalDepth),
                    NullDepthCount = g.Count(p => p.OriginalDepth == null) }; 
```

显然，这会将整个钻孔表加载到内存中，因此查询现在是一个 Linq To 对象查询，然后可以工作。

更新。

看起来也只是简单地替换

```
 NullDepthCount = g.Count(p => p.OriginalDepth == null) 
```

在您的原始查询中

```
 NullDepthCount = g.Where(p => p.OriginalDepth == null).Count() 
```

将起作用，这意味着您不需要将数据带入内存。

# ios - 如何将所有联系人从 iphone（模拟器）传递到表格？

> ID：11436460
> 
> 赞同：2
> 
> 时间：2012-07-11T15:47:31.757
> 
> 标签：ios, abaddressbook

我是 IOS 上的菜鸟，我正在尝试将所有联系人从 iphone（模拟器）传递到一张桌子。我已经按照一些教程进行操作，但出现错误。

你能帮我解决这个问题吗？

我试过了：

```
#import <AddressBookUI/AddressBookUI.h>
.
.
.
ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

for ( int i = 0; i < nPeople; i++ )
{
    ABRecordRef ref = CFArrayGetValueAtIndex( allPeople, i );
     NSLog(@"%@",ref);
} 
```

我得到这个错误：

```
Undefined symbols for architecture i386:
  "_ABAddressBookCreate", referenced from:
      -[younifyTableViewController viewDidLoad] in younifyTableViewController.o
  "_ABAddressBookCopyArrayOfAllPeople", referenced from:
      -[younifyTableViewController viewDidLoad] in younifyTableViewController.o
  "_ABAddressBookGetPersonCount", referenced from:
      -[younifyTableViewController viewDidLoad] in younifyTableViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:14:30.783

您需要将您的项目与 AddressBook 框架链接。在 Xcode 中，导航到您的项目设置（文件浏览器中的顶级项目），转到“Build Phases”选项卡，展开“Link Binary With Libraries”部分，单击“+”图标，选择“<code >AddressBook.framework”，然后单击“确定”。这应该可以解决您的问题。

您看到的错误消息告诉您，在编译您的应用程序时，它找不到列出的符号。这些符号在您导入的地址簿标头中*声明，但它们在框架中**实现*，这就是您需要链接到它的原因。链接过程会填写这些符号。

# wolfram-mathematica - Mathematica 不能简化[Log[4]/Log[2]]？

> ID：11436464
> 
> 赞同：1
> 
> 时间：2012-07-11T15:47:36.637
> 
> 标签：wolfram-mathematica

当我`Simplify[Log[4]/Log[2]]`在 Mathematica 中时，它会原样返回。如何强制 Mathematica 回馈`2`？

`Log2[4]``Log2[x]`产出2 符合预期，但yield`Log[x]/Log[2]`表明 Mathematica 在这里做了一些不寻常的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:03:47.690

使用`FullSimplify`：

```
FullSimplify[Log[4]/Log[2]] 
```

> 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:11:45.717

或者：

```
Simplify[Log[4]/Log[2]] // N 
```

> 2.

# python - 无法弄清楚为什么 django 无法反转 URL

> ID：11436467
> 
> 赞同：0
> 
> 时间：2012-07-11T15:47:41.983
> 
> 标签：python, django

# 错误

```
Caught NoReverseMatch while rendering: Reverse for ''tazasabzii.tazasabzi.views.gallery'' with arguments '()' and keyword arguments '{}' not found. 
```

# 网址.py

```
urlpatterns = patterns('tazasabzii.tazasabzi',

    (r'^tazasabzi/gallery/$', 'views.gallery'), 
```

# 视图.py

```
def gallery(request):
    z = {'title':'TazaSabzi.com',
         'heading':'TazaSabzi.com',
         'viewName':'gallery',}
    fruits = Sabji.objects.filter(kind__contains="fruit")
    sfruits = Sabji.objects.filter(kind__contains="special fruit")
    svegetables = Sabji.objects.filter(kind__contains="special vegetable")
    vegetables = Sabji.objects.filter(kind__contains="vegetable")
    soffers = Sabji.objects.filter(kind__contains="special offer")
    saari_sabzi = {'fruits':fruits,
                                            'vegetables':vegetables,
                                            'special fruits':sfruits,
                                            'special vegetables':svegetables,
                                            'special offers':soffers,}
    return render_to_response('gallery.html',{'tz':z,
                                              'saari_sabzi':saari_sabzi.iteritems(),},context_instance=RequestContext(request)) 
```

# 错误

```
154     <a target="_blank" href="{% url 'tazasabzii.tazasabzi.views.gallery' %}">
155     <div class="gallery button" style="width:100px;">
156     <div style="color:white; margin-top:5px;">Gallery</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:02:35.720

尝试类似的东西`<a target="_blank" href="{% url 'appname.views.gallery' %}">`

或者

使用[命名 URL](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)

或者

可能您没有在主 url_conf 中包含应用程序 url

# sql - SQL 中 where 子句的顺序是否重要？

> ID：11436469
> 
> 赞同：146
> 
> 时间：2012-07-11T15:47:54.853
> 
> 标签：sql, performance, where-clause

假设我有一个名为*PEOPLE*的表，它具有三列*ID*、*LastName*和*FirstName*。这些列都没有被索引。 *LastName*更独特，*FirstName*不那么独特。

如果我进行两次搜索：

```
select * from PEOPLE where FirstName="F" and LastName="L"
select * from PEOPLE where LastName="L" and FirstName="F" 
```

我的信念是第二个更快，因为更独特的标准 ( `LastName`) 在`where`子句中首先出现，并且记录将被更有效地消除。我认为优化器不够聪明，无法优化第一个 SQL 查询。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-11T15:50:42.987

不，那个顺序无关紧要（或者至少：不应该重要）。

任何体面的查询优化器都会查看子句的**所有**部分`WHERE`并找出满足该查询的最有效方法。

我知道 SQL Server 查询优化器会选择一个合适的索引——不管你有两个条件的顺序。我假设其他 RDBMS 会有类似的策略。

重要的是你是否有一个合适的索引！

对于 SQL Server，如果您有以下情况，它可能会使用索引：

*   上的索引`(LastName, FirstName)`
*   上的索引`(FirstName, LastName)`
*   `(LastName)`just或 just `(FirstName)`（或两者）上的索引

另一方面 - 再次对于 SQL Server - 如果您使用从表`SELECT *`中获取**所有**列，并且表相当小，那么查询优化器很有可能只进行表（或聚集索引）扫描而不是使用一个索引（因为查找完整数据页面以获取**所有**其他列很快就会变得太昂贵）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-11T15:52:18.623

WHERE 子句的顺序不应该在符合 SQL 标准的数据库中产生影响。大多数数据库不保证评估的顺序。

不要认为 SQL 关心顺序。以下在 SQL Server 中生成错误：

```
select *
from INFORMATION_SCHEMA.TABLES
where ISNUMERIC(table_name) = 1 and CAST(table_name as int) <> 0 
```

如果首先执行此子句的第一部分，则只有数字表名将被转换为整数。但是，它失败了，提供了一个明确的示例，表明 SQL Server（与其他数据库一样）不关心 WHERE 语句中子句的顺序。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-11T15:55:45.480

ANSI SQL 草案 2003 5WD-01-Framework-2003-09.pdf

6.3.3.3 规则评估顺序

...

在优先级不是由格式或括号确定的情况下，表达式的有效评估通常从左到右执行。但是，表达式是否实际从左到右求值取决于实现，特别是当操作数或运算符可能导致引发条件或表达式的结果可以在不完全求值表达式的所有部分的情况下确定时。

[从这里](https://stackoverflow.com/questions/789231/is-the-sql-where-clause-short-circuit-evaluated)复制

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-11T15:51:32.563

不，所有 RDBM 首先从分析查询开始，然后通过重新排序 where 子句来优化它。

根据您使用的 RDBM 可以显示分析的结果（例如在 oracle 中搜索解释计划）

M。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T15:53:41.503

就目前而言，这是真的，假设名称没有被索引。不过，不同的数据会出错。为了找出每次都可能不同的方法，DBMS 必须对每一列运行不同的计数查询并比较数字，这不仅仅是耸耸肩并继续下去的成本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-14T10:40:19.453

原始操作声明

> 我的信念是第二个更快，因为更独特的标准（姓氏）首先出现在 >where 子句中，并且记录将被更有效地消除。我认为优化器不够聪明，无法优化第一个 sql。

我猜你在创建索引时选择列的顺序混淆了这一点，你必须将更具选择性的列放在第一位而不是第二位最有选择性的列，依此类推。

顺便说一句，对于上述两个查询，SQL 服务器优化器不会做任何优化，但只要计划的总成本小于并行度阈值成本，就会使用 Trivila 计划。

# java - Android：正弦波生成

> ID：11436472
> 
> 赞同：11
> 
> 时间：2012-07-11T15:48:04.663
> 
> 标签：java, android, waveform

我正在尝试使用 AudioTrack 来生成正弦波、方波和锯齿波。然而，这个创建的音频听起来不像是纯正弦波，而是像叠加了某种其他波。在使用第一个示例中的方法时，我将如何获得第二个代码示例中的纯正弦波？由于上面的例子只移动了第二个中使用的一些算术，它们不应该产生相同的波吗？

```
@Override
        protected Void doInBackground(Void... foo) {
            short[] buffer = new short[1024];
            this.track = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, minBufferSize, AudioTrack.MODE_STREAM);
            float samples[] = new float[1024];

            this.track.play();

            while (true) {
                for (int i = 0; i < samples.length; i++) {
                    samples[i] = (float) Math.sin( (float)i * ((float)(2*Math.PI) * frequency / 44100));    //the part that makes this a sine wave....
                    buffer[i] = (short) (samples[i] * Short.MAX_VALUE);
                }
                this.track.write( buffer, 0, samples.length );  //write to the audio buffer.... and start all over again!

            }           
        } 
```

注意：这确实给了我一个纯正弦波：

```
@Override
        protected Void doInBackground(Void... foo) {
            short[] buffer = new short[1024];
            this.track = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, minBufferSize, AudioTrack.MODE_STREAM);
            float increment = (float)(2*Math.PI) * frequency / 44100; // angular increment for each sample
            float angle = 0;
            float samples[] = new float[1024];

            this.track.play();

            while (true) {
                for (int i = 0; i < samples.length; i++) {
                    samples[i] = (float) Math.sin(angle);   //the part that makes this a sine wave....
                    buffer[i] = (short) (samples[i] * Short.MAX_VALUE);
                    angle += increment;
                }
                this.track.write( buffer, 0, samples.length );  //write to the audio buffer.... and start all over again!

            }           
        } 
```

感谢 Martijn：问题在于波在缓冲区中的波长之间被截断。增加缓冲区大小可以解决第二个示例中的问题。看起来 Math.PI * 2 算术是循环中最密集的，因此将该值移动到仅计算一次的外部变量可以解决所有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:46:35.040

尝试通过以下方式优化您的代码

1.  增加缓冲区大小
2.  准备一次缓冲区，然后继续将其重写到输出流（这将需要一些数学计算来计算缓冲区的完美大小，以确保整个正弦波完全适合其中）。

为什么？因为我怀疑缓冲区需要很长时间才能准备好，所以导致两个缓冲区之间的延迟变大的原因可能会导致噪音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:01:12.467

我在您的两个代码示例中可以看到的唯一实质性区别是您的第一个示例中的方程式包含一个整数 ( `I`)，因此您可能正在执行整数（而不是浮点）算术。这会导致阶梯效应，在波形中添加不需要的谐波。

我怀疑如果你只是`I`在你的方程中转换成一个浮点数，它会产生一个纯正弦波。

```
samples[i] 
    = (float) Math.sin( (float)i * ((float)(2*Math.PI) * frequency / 44100)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T04:25:03.590

这些答案都不能解决问题。缓冲区长度应该是采样率的倍数，或者至少是一圈的长度。让我们将其分解为大量变量以表明我们理解事物：

```
int sampleRate = 44100;
int bitsPerChannel = 16;
int bytesPerChannel = bitsPerChannel / 8;
int channelCount = 1;
int bytesPerSample = channelCount * bytesPerChannel;
int bytesPerRotation = sampleRate * bytesPerSample * (1d / (double) frequency); 
```

然后你可以把它乘以`bytesPerRotation`任何东西，它不会改变一个事实：声音中不会有毛刺。

# php - 无法在我的实时环境中在 PHP 中显示来自 MySQL 的图像 blob，适用于开发

> ID：11436476
> 
> 赞同：1
> 
> 时间：2012-07-11T15:48:12.597
> 
> 标签：php, mysql, image

我无法在我的实时托管环境中显示来自 MySQL 的 blob 图像，它适用于开发。我有一个 getimage.php 文件，我将图像的 id 传递给，我没有在页面上写出任何文本。
这两种方法都适用于我的开发环境。
简单代码：

### 方法一：

```
header("Content-type: image/jpeg");
$data   = mysql_result($result, 0,'documentfile');
echo $data; 
```

### 方法二：

```
header("Content-type: image/jpeg");
$data   = mysql_result($result, 0,'documentfile');
$bImage = imagecreatefromstring($data);
imagejpeg($bImage);
imagedestroy($bImage); 
```

我没有收到 php 错误我收到以下错误：

> 图片[http://www.mywebsite.com/getimage.php?id=15](http://www.mywebsite.com/getimage.php?id=15)无法显示，因为它包含错误`

如果我在我的实时环境中硬编码一个图像路径，它可以正常工作：

```
header("Content-type: image/jpeg");
$data = file_get_contents("../images/sunflowers.jpg");
echo $data; 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:54:56.017

将标题行进一步向下移动，以便可以将 php 错误作为文本发送

```
$data = mysql_result($result, 0,'documentfile');
header("Content-type: image/jpeg");
echo $data; 
```

这应该使您能够阅读错误，您也可以尝试保存图像并在文本编辑器中打开它，或者只使用浏览器`view source`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:50:14.030

我发现这与从 Dev 到 Live 的数据库上传有关，可能是编码之类的。当我将图像文件重新上传到 Live DB 时，它们显示正确。

# php - 定义在输出中打印的语句

> ID：11436477
> 
> 赞同：0
> 
> 时间：2012-07-11T15:48:15.073
> 
> 标签：php

我正在尝试为部署建议定义一个常量，以便我们知道我们处于开发环境中。

1.  我创建了一个 PHP 文件：

    ```
    define('LDEV', true); 
    ```

    并命名，例如：**devEnv.php**

    我放在某个地方：例如：*/home/user/Sites/devEnv.php*

2.  在`php.ini`中，我将 auto_prepend_file 属性设置为我的文件，如下所示：

    ```
    auto_prepend_file = "/Users/user/Sites/devEnv.php" 
    ```

3.  我重新启动 Apache 以查看更改

    ```
    sudo /etc/init.d/apache2 restart 
    ```

现在我看到这`define('LDEV', true);`在我的本地站点上得到了回应，它不应该在那里。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T15:49:18.197

您需要脚本中的 PHP 开始标记`devEnv.php`：

```
<?php
define('LDEV', true); 
```

# svn - SVN：即使更新后文件仍然存在冲突

> ID：11436480
> 
> 赞同：10
> 
> 时间：2012-07-11T15:48:17.713
> 
> 标签：svn

我不知道为什么我会从 SVN 收到这条消息。SVN 告诉我某个文件有冲突。所以我更新了文件……</p>

```
Daves-MacBook-Pro:didoclient davea$ svn up src/test/java/org/myco/myproject/dao/AccessCodeDAOTest.javaUpdating 'src/test/java/org/myco/myproject/dao/AccessCodeDAOTest.java':
At revision 27. 
```

但是，当我尝试之后立即提交时，我收到文件仍然存在冲突的消息......</p>

```
Daves-MacBook-Pro:didoclient davea$ svn commit -m "… my message ..."
svn: E155015: Commit failed (details follow):
svn: E155015: Aborting commit: '/Users/davea/Dropbox/workspace/didoclient/src/test/java/org/myco/myproject/dao/AccessCodeDAOTest.java' remains in conflict 
```

这是怎么回事？如何提交我的文件？- 戴夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-05T06:24:31.113

原因是上述文件中的合并冲突。

svn 已解决 [文件名或目录-给-麻烦]

最好的，

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T16:00:19.323

有人对此文件进行了与您的更改相冲突的更改。这些可能包括对相同代码行的更改。在大多数情况下（如果不是全部），SVN 无法合并更改，因为它们涉及代码的相同部分。在将任何文件提交到存储库之前，您**必须**至少将冲突标记为已解决，通常是通过修复它们。

您可以将更改的文件复制到其他地方，然后从存储库中获取最新版本（您可以通过删除本地副本并`svn up`再次运行来做到这一点），然后修改刚刚从存储库中获取的文件，将更改添加到它再次。

有一些工具可能会在这个过程中有所帮助，例如`tortoise-merge`Windows 平台上的 TortoiseSVN，但所使用的技术始终是将两种更改（已经在 repo 中的更改**和**您的更改）应用于原始文件。

# python - 如何保护python源代码并将其编译为.so库？

> ID：11436484
> 
> 赞同：5
> 
> 时间：2012-07-11T15:48:25.803
> 
> 标签：python, compilation, source-code-protection

我想**保护我的 python 源代码**，我知道没有绝对的保护是可能的，但仍然应该有一些方法让它很难做到或相当耗时。我想

**1)**自动删除所有文档、评论和

**2）**系统地更改模块内的变量和函数的名称（混淆？），以便我可以保留一个外部接口（具有有意义的名称），而变量和函数的内部名称是不可能发音的。

可能使 1) 和 2) 变得多余的最佳解决方案**如下**：

**3）**有没有一种简单的**方法可以将python模块编译为.so库**，界面清晰**，其他python模块可以使用**？它类似于使用 distutils 构建 C 和 C++ 扩展，只是源代码是 python 本身而不是 C/C++。这个想法是将所有“秘密代码”组织成模块，编译它们，然后将它们导入到不被认为是秘密的其余 python 代码中。

再次，我知道一切都可以逆向工程，我认为从务实的角度来看，大多数普通开发人员将无法对代码进行逆向工程，即使他们能够，道德/法律/时间原因也会使他们如果他们真的想在这方面工作，请三思而后行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:01:41.207

正如 mgilson 在评论中提到的那样，Cython 可能是您最好的选择。一般来说，您可以使用它来将您的纯 python 源代码转换为已编译的扩展模块。虽然 Cython 的主要目的是提高性能，但使用它来保护源代码不应该有任何障碍。它输出的扩展模块不受任何特殊方式的限制，因此您之前可以在 Python 中执行的任何操作，您应该可以从 Cython 生成的扩展模块中执行。Cython 在可能需要解决的受支持功能方面确实存在一些已知限制，但总体而言，它看起来非常适合您的目的。

# java - 如何设计在子项之间执行不同逻辑的复合对象

> ID：11436485
> 
> 赞同：0
> 
> 时间：2012-07-11T15:48:32.893
> 
> 标签：java, design-patterns, composite

我正在设计一个框架，并且我有复合对象，这些对象具有异步或同步执行的子对象。对于同步执行的，通常在某个子项完成后，必须在复合对象中运行某种类型的逻辑。

问题是有许多子项，对于每个子项，在每个子项之后可能会进行不同的处理，并且因为我的目标是简单，我将同步项放在队列中，而复合项只会弹出它们一个接一个地运行它们..现在跟踪子项目的最干净的方法是什么，这样我就可以说“在子项目 #2 完成后，获取它返回的数据并执行 xyz()”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:04:05.220

[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。这听起来像是一个 CompositeCommand，它维护着一个命令列表。每个Command 都有一个execute() 操作，CompositeCommand 的execute 操作遍历命令列表并调用每个Command 的execute。在 CompositeCommand 的 execute() 方法中，您可以在每次迭代后执行 xyz() 的逻辑。

您还提到每个命令可以以不同的方式处理，这可以通过策略来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:25:20.193

如果您的后处理选项数量有限，请考虑类似[访客模式。](http://en.wikipedia.org/wiki/Visitor_pattern)

组合将为可能需要的每种类型的后处理实现一个方法，子项将实现一个方法，该方法采用组合的实例并调用其中一个后处理方法，具体取决于它是哪种子项是。由于您已经在`execute`处理子项目，因此您可以让它们在该方法的末尾调用后处理方法。

一个示例，跳过接口定义：

```
class CompositeA implements Composite {
  public ? process() {
    for (Sub subItem : subItems) {
      subItem.execute();
      subItem.postProcess(this);
    }
  }

  public ? postProcessA(SubA subItem) {
    //do something with SubA
  }

  public ? postProcessB(SubB subItem) {
    //do something with SubB
  }
}

class CompositeB implements Composite {
  public ? process() {
    for (Sub subItem : subItems) {
      subItem.execute();
      subItem.postProcess(this);
    }
  }

  public ? postProcessA(SubA subItem) {
    //do something else with SubA
  }

  public ? postProcessB(SubB subItem) {
    //do something else with SubB
  }
}

class SubA implements Sub {
  public ? execute() {
    //doSomething
  }

  public ? postProcess(Composite composite) {
    comp.postProcessA(this);
  }
}

class SubB implements Sub {
  public ? execute() {
    //doSomething
  }

  public ? postProcess(Composite composite) {
    comp.postProcessB(this);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:10:41.353

我建议将任何依赖逻辑移到它自己的操作中。

```
abstract Operation
{
   abstract ? Execute(? arg);  // override in subclass to do work
}

abstract PostProcessOperation : Operation
{

   Operation _sourceOp;

   Operation(Operation sourceOp)
   {
      _sourceOp = sourceOp;
   }

   override ? Execute(? arg)
   {      
      ? sourceResult = _sourceOp.Execute(arg);
      return PostProcess(sourceResult);
   }   

   abstract ? PostProcess(? arg); // override in subclass to do work with results of the source op Execute

} 
```

然后，例如，将后处理控制台日志记录添加到您可以执行以下操作的操作：

```
class ResultLogOp : PostProcessOperation
{
   override ? PostProcess(? arg)
   {
      Console.Writeline(arg.ToString());
   }
} 
```

为了进一步举例，假设您有一个文件删除操作，并且您希望通过记录其成功来对其进行后处理：

```
DeleteFileOp deleteFile = DeleteFileOp(fileToDelete);

ResultLogOp loggedDeleteFile = new ResultLogOp(deleteFile);

operations.Enque(loggedDeleteFile); 
```

或者，如果您的用法不同，也许您的容器类可以包装某些关键操作，因为它们是根据它们的类型添加的：

```
void Add(Operation child)
{
   if (child is ImportantType)
   {
      _operations.Add(new ResultLogOp(child);  // add logging transparently on the fly
   }
} 
```

这个概念的变化是无穷无尽的。

# cron - Jenkins - 监控外部 cron 作业

> ID：11436486
> 
> 赞同：2
> 
> 时间：2012-07-11T15:48:33.473
> 
> 标签：cron, jenkins, monitoring, external, jobs

我想在外部服务器上收到有关 cron 作业失败的通知。我也想在它根本没有运行时得到通知。

我可以这样做： [https](https://wiki.jenkins-ci.org/display/JENKINS/Monitoring+external+jobs) ://wiki.jenkins-ci.org/display/JENKINS/Monitoring+external+jobs 但如果 cron 没有运行它就不会报告，例如。服务器宕机了。

有没有办法在不将工作转移到詹金斯的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:41:25.830

你可以试试[http://www.pushmon.com](http://www.pushmon.com)。它正在监视 cron 作业。您所要做的就是创建一个 PushMon URL 并在每次作业成功运行时调用该 URL。如果由于您的工作失败或服务器关闭而没有调用 URL，PushMon 将注意到丢失的调用并通知您问题。

注意我与 PushMon 相关联。

# python - 长不转换为字符串

> ID：11436494
> 
> 赞同：1
> 
> 时间：2012-07-11T15:49:12.823
> 
> 标签：python, google-app-engine, long-integer, cherrypy

我正在尝试使用 Python 在 Google App Engine 中使用此功能：

```
def textarea(id):
    variable = brfsscodegenerator.Variable.get_by_id(int(id))
    varID = variable.key().id()
    textarea = ("<tr><td>" + variable.name + "</td><td>" + variable.year + 
            "</td><td><textarea id='textarea' name='qtext_" + str(varID) + "'>" )
    return textarea 
```

但是我收到了这个错误（我正在使用 CherryPy）：

TypeError：强制转换为 Unicode：需要字符串或缓冲区，很早就找到了

我已经测试过 varID 实际上返回了一个数字，但它似乎仍然不想转换，而且我知道我的引号也是正确的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:52:06.897

确保`variable.year`是一个字符串或转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:26:59.487

当您尝试将字符串与一个连接时，Python 不会自动将数字格式化为字符串。这是一个深思熟虑的设计选择，因为 Python 的指导原则之一是“显式优于隐式”。您可以使用 转换数字`str(num)`，但更好的方法是在整个过程中使用字符串格式，如下所示：

```
textarea = "<tr><td>%s</td><td>%d</td><td><textarea id='textarea' name='qtext_%d'>" % (variable.name, variable.year, varID) 
```

另一个更好的方法是使用模板系统而不是自己插入字符串。以这种方式引入 XSS 错误的风险很高，并且您的代码的可读性要低得多。

# grails - Grails 资源插件——如何获取生成的 url？

> ID：11436495
> 
> 赞同：2
> 
> 时间：2012-07-11T15:49:14.717
> 
> 标签：grails, resources, cache-manifest

有谁知道我如何访问资源插件会吐出的确切网址？

我想使用资源插件来优化我的 javascript 文件的传输，但是，我正在编写的应用程序是一个使用缓存清单的 html5 离线应用程序。根据缓存清单的规则，缓存清单文件必须完全按照它在 html 页面中显示的方式引用文件。

资源插件在聚合文件中添加了一堆查询字符串信息和校验和。为了资源插件优化**和**缓存清单工作，我需要在我的缓存清单文件中吐出资源插件的确切 url。

以下是我所说的一些例子：

资源插件将在我的 html 输出中吐出以下内容：

```
<script src="/awesome-app/static/36wl8Nwm8L7ZZMSbV6NVQPfi6xCx6DcVV0wFDCYRyv5.js" type="text/javascript" ></script> 
```

如果我可以获取`36wl8Nwm8L7ZZMSbV6NVQPfi6xCx6DcVV0wFDCYRyv5.js`上述 url 的一部分，我可以将它包含在我的缓存清单文件中，如下所示：

```
CACHE MANIFEST

# rev 192

NETWORK:
*

CACHE:
static/36wl8Nwm8L7ZZMSbV6NVQPfi6xCx6DcVV0wFDCYRyv5.js  //<-- this would be the aggregated file! 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:14:12.653

我认为重命名是缓存资源插件的一部分，而不是基础资源插件。如果我们谈论的是同一件事，他们使用每个文件字节内容的 SHA256 哈希来生成哈希。请参阅 github 上的[HashAndCacheResourceMapper](https://github.com/Grailsrocks/grails-cached-resources/blob/master/grails-app/resourceMappers/org/grails/plugin/cachedresources/HashAndCacheResourceMapper.groovy)和[BASE62](https://github.com/Grailsrocks/grails-cached-resources/blob/master/src/groovy/org/grails/plugin/cachedresources/util/Base62.groovy)类，您将了解它们如何生成文件名。或者，如果您不依赖插件中的缓存机制，您可以禁用它并一起避免该问题。

# wpf - 如何自定义 ListBox 的 ItemsPanelTemplate 的布局？

> ID：11436499
> 
> 赞同：0
> 
> 时间：2012-07-11T15:49:21.550
> 
> 标签：wpf, expression-blend, itemspaneltemplate

我想为我的 指定多个列`ListBox`，但是我的谷歌搜索技能在这一列上失败了。

如何修改`ItemsPanelTemplate`a`ListBox`以自定义显示的列？

*编辑：忘记放我已经尝试过的东西*

我试过代码

```
<ItemsPanelTemplate x:Key="ItemsPanelTemplate1">
        <UniformGrid Columns="3" />
    </ItemsPanelTemplate> 
```

除了我失去垂直滚动条之外，哪个有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:00:23.663

它不应该那么困难，但这取决于 - 如果您对每个项目使用网格或类似的控件，并且您不介意列的宽度不同且其中包含可变宽度的项目，那么只需添加一个网格到 ItemTemplate 就可以了。

```
<ItemTemplate>
    <DataTemplate>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition>
                <ColumnDefinition>
                <ColumnDefinition>
            </Grid.ColumnDefinitions>
            <SomeControl Grid.Column="0" />
            <SomeControl Grid.Column="1" />
            <SomeControl Grid.Column="2" />
        </Grid>
    </DataTemplate>
</ItemTemplate> 
```

唯一的问题是，如果您希望网格列的大小都相同且内容大小可变 - 在这种情况下，它会涉及更多一点 - 否则您可以显式设置大小，或者让内容通过设置来决定大小列宽为`"Auto"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:14:03.180

这是我认为您正在寻找的一个简单示例，具有 3 列、项目换行和自动垂直滚动，这将取决于周围的布局。

```
<ListBox HorizontalContentAlignment="Stretch">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Columns="3"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border MinHeight="150" Margin="5" Background="Green" CornerRadius="4">
                <TextBlock Text="{Binding}" Foreground="White"/>
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>

    <System:String>One</System:String>
    <System:String>Two</System:String>
    <System:String>Three</System:String>
    <System:String>Four</System:String>
    <System:String>Five</System:String>
    <System:String>Six</System:String>
    <System:String>Seven</System:String>
    <System:String>Eight</System:String>
    <System:String>Nine</System:String>
    <System:String>Ten</System:String>
</ListBox> 
```

# objective-c - CoreFoundation 框架的目的是什么？

> ID：11436501
> 
> 赞同：22
> 
> 时间：2012-07-11T15:49:24.827
> 
> 标签：objective-c, cocoa, core-foundation

我已经在 Objective-C Cocoa 中使用 NSObjects 等进行了一段时间的编程。我看到还有另一个框架：**CoreFoundation**。当我仔细查看时，它似乎是一个 C 风格的框架。

所以我有一些好奇想澄清一下。我用谷歌搜索但没有找到直接的答案。

1.  CoreFoundation 框架的目的是什么？
2.  Cocoa 框架不是已经提供了所有需要的东西吗？
3.  CoreFoundation 框架是否提供了 CocoaFramework 没有提供的任何优势？

这些是我的一些问题。如果有人可以提供答案，或者为我提供阅读它的资源，那就太好了。我想知道它是否值得更多地了解该框架。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T16:09:51.003

CoreFoundation 不仅仅是 Foundation 的基于 C 的替代方案。用过于简单的术语来说，Foundation 本质上*就是*CoreFoundation，因为一个是建立在另一个之上的。Foundation 中的许多类只是围绕它们的 CoreFoundation 对应物的轻量级 Objective C 包装器，这就是免费桥接的工作原理（例如 CFString 和 NSString）。

有关更多历史和更技术性的解释，请参阅[这篇文章](http://ridiculousfish.com/blog/posts/bridge.html)。

[如果你真的想阅读 CoreFoundation 源代码，这里](http://www.opensource.apple.com/source/CF/)有几个版本的 Apple“CFLite”框架可供参考。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-11T16:40:01.740

历史：基金会的历史可以追溯到 1993/1994 年，其中的 API 是 NeXT 发布的 OpenStep API 的一部分。

> CoreFoundation 框架的目的是什么？

CF 是在 Mac OS 向 Mac OS X 过渡期间创建的，以帮助支持该过渡。最初，它是为了速度和允许编写纯粹的非 Objective-C 程序。随着时间的推移，这已被证明不是问题，并且 CF 有越来越多的位在 Objective-C 中实现（使用类似 otool 的工具查看 CoreFoundation 二进制文件）。

CFLite 是一种轻量级、便携的纯 C (IIRC) 变体。

> Cocoa 框架不是已经提供了所有需要的东西吗？

或多或少。而且，当然更适用于在 iOS 或 OS X 上构建 GUI 应用程序。

> CoreFoundation 框架是否提供了 CocoaFramework 没有提供的任何优势？

几个，但通常以降低简单性和增加脆弱性为代价。

例如，CF 集合允许您完全自定义管理内存和识别对象的方式；您可以提供自定义分配/免费/散列/比较挂钩。通过这个，您可以“轻松”地将非 Objective-C 类型封装在 CF 集合中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T15:56:08.837

Core Foundation 框架提供与 Foundation 框架相同的功能，但使用 C 而不是 Obj-C，因此它可以与 C 框架一起使用。

如果您环顾四周，您会发现 Apple 有一些 C 框架，例如 Core Graphics、Core Audio、Address book 等。

# python - 用键盘中断关闭所有线程

> ID：11436502
> 
> 赞同：42
> 
> 时间：2012-07-11T15:49:25.297
> 
> 标签：python, multithreading

我在这里尝试做的是使用键盘中断来退出程序中所有正在进行的线程。这是创建线程的代码的精简版本：

```
for i in taskDictionary:
    try:
        sleep(60)
        thread = Thread(target = mainModule.executeThread)
        thread.start()
    except KeyboardInterrupt:
        thread.__stop() 
```

程序本身要复杂得多，考虑到影响线程的大量不同变量，甚至可以选择以顺序模式启动，其中任务不是线程化的，而是一个接一个地启动，因此可能会出现一些问题有了这个小小的变化，我就想到了。我以产生 50/50 结果的方式做到了这一点。中断会起作用，但线程永远不会干净地退出。有时它们会继续运行，但会停止未来线程的执行，有时它们会因中断而出现大量错误而退出，有时中断什么也不做。上次我运行这个程序时，程序停止了任何未来线程的执行，但没有停止当前线程。有没有办法退出线程而不进入线程实际执行的模块？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-11T15:54:45.840

一个类似的问题是“你如何杀死一个线程？”

您在线程中创建一个退出处理程序，该处理程序由线程模块中的锁或事件对象控制。然后，您只需移除锁或向事件对象发出信号。这会通知线程它应该停止处理并正常退出。在主程序中向线程发出信号后，唯一要做的就是使用等待线程关闭的`thread.join()`方法。`main`

一个简短的例子：

```
import threading
import time

def timed_output(name, delay, run_event):
    while run_event.is_set():
        time.sleep(delay)
        print name,": New Message!"

def main():
    run_event = threading.Event()
    run_event.set()
    d1 = 1
    t1 = threading.Thread(target = timed_output, args = ("bob",d1,run_event))

    d2 = 2
    t2 = threading.Thread(target = timed_output, args = ("paul",d2,run_event))

    t1.start()
    time.sleep(.5)
    t2.start()

    try:
        while 1:
            time.sleep(.1)
    except KeyboardInterrupt:
        print "attempting to close threads. Max wait =",max(d1,d2)
        run_event.clear()
        t1.join()
        t2.join()
        print "threads successfully closed"

if __name__ == '__main__':
    main() 
```

如果您真的需要*杀死*线程的功能，请使用多处理。它允许您将 SIGTERM 发送到各个“进程”（它也非常类似于线程模块）。一般来说，线程适用于受 IO 限制的情况，而多处理适用于真正受处理器限制的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-23T20:59:14.017

有几个选项不需要在线程之间使用锁或其他信号。一种是将线程设置为[daemons](https://docs.python.org/3/library/threading.html#threading.Thread.daemon)，当主线程退出时将自动终止。另一种是使用[进程](https://stackoverflow.com/a/7752174/10826955)，如果需要终止它们并保持主程序运行，则可以从主进程调用终止方法。

如果您有线程阻塞输入，这两种方法都特别有用。虽然在大多数情况下使用超时和定期检查信号不会产生太多开销，但使用守护进程或进程消除了对任何繁忙循环或显着增加的复杂性的需求。

有关这些解决方案的更多详细信息以及关于杀死线程问题的讨论，请参阅[此问题](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread)的答案。

# javascript - jqGrid 根据先前的选择填充选择选项

> ID：11436505
> 
> 赞同：1
> 
> 时间：2012-07-11T15:49:28.673
> 
> 标签：javascript, jquery, jqgrid

以下是我用来创建 jqGrid 的一段代码 -

```
$("#list").jqGrid({
    url:'products.php?storeId=<?php echo $_SESSION["valid_store"]; ?>',
    datatype: 'xml',
    mtype: 'GET',
    colNames:['Product Id','Product Description','Department','Category','Price','Sale Price','Quantity','Extended Description','Image'],
    colModel :[ 
      {name:'ProductId', index:'ProductId', width:20}, 
      {name:'product_name', index:'product_name', width:50, editable:true, edittype:'text', search:true, stype:'text'},
      {name:'DepartmentName', index:'DepartmentName', width:40,sortable: false, editable: true, edittype: "select"},
      {name:'CategoryName', index:'CategoryName', width:40,sortable:false, editable:true, edittype:'select'}, 
```

当网格使用以下内容加载时，我正在动态填充“DepartmentName” -

```
var departments = $.ajax({
        url: "get_departments.php?storeId=<?php echo $_SESSION["valid_store"]; ?>",
        async: false,
        success:function(data, result){
            if(!result){
                alert("Failure to retrieve the Departments");
            }
        }

loadComplete:function(){
        $("#list").setColProp('DepartmentName', { editoptions: { value: departments} });
    }, 
```

基本上，我将大量“部门”分配为 JSON 格式，当网格加载后，“部门名称”将填充所有这些部门。这一切都很好。

我在做什么/理解上有困难。现在我有了这些值，这取决于我从中选择的“部门” `Select`，正在填充“类别名称”，仅使用所述“部门”引用的“类别”，数据之间的关系已经设置在`MySQL`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:10:05.110

使用另一个 ajax 函数。只需发送选择列表的值并获取与该选定值关联的 sql 值。然后返回它并在下一个 SELECT 项中仅显示这些选项。像这样的东西：

```
$.ajax({
   url:blah.html,
   data:{'something':'your select value'},
   success:function(data){$('#yourNextSelectItem').html(data)}
}); 
```

# java - 有人可以帮我做深拷贝吗？

> ID：11436507
> 
> 赞同：1
> 
> 时间：2012-07-11T15:49:36.230
> 
> 标签：java

自从我们的教授告诉我们这样做以来，我正在尝试进行深度复制。他给了我们一段代码，但是一旦我在netbeans中输入它，它就不起作用了......

有人可以通过这些代码帮我解释深拷贝的概念吗？

```
 int i;
    String [] original = {"Aref","Ali","Emad","Sami"};
    String [] result = new String(original.length);      
    for(i=0;i<original.length;i++){
        result[i] = (String) original[i].clone();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:53:38.383

深层副本是对象的副本，除了复制对象的各个字段外，还遍历这些字段引用的所有其他对象并复制它们。这确保了如果其中一个对象通过一个副本被修改，另一个副本不受影响。

这段代码`original`首先创建一个新数组，然后遍历它，复制数组中引用的每个字符串，并将对新复制的字符串的引用放入数组的新副本中，从而进行深层复制。或者至少，如果不是因为其他人提到的错字，它会这样做。

请注意，在这种特殊情况下这是没有意义的，因为 Java 字符串是不可变的，因此不存在修改引用对象的危险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:55:20.523

您的代码不起作用的原因是以下行：

```
String [] result = new String(original.length); 
```

`result`是一个`String`s 数组，但您试图实例化一个`String`. JVM 抛出的错误应该已将您指向这一行。

但是，这与深度复制无关。为此，请看

[深拷贝、浅拷贝、克隆](https://stackoverflow.com/questions/6182565/java-deep-copy-shallow-copy-clone)

# delphi - 从 Delphi 在 Word 中创建表格

> ID：11436524
> 
> 赞同：3
> 
> 时间：2012-07-11T15:50:36.803
> 
> 标签：delphi, ms-word

我有一些 Delphi 代码可以在 Word 中选择一个书签，然后创建一个表格。我的问题是页面顶部有一个标题，当我选择范围时，它也被选中，并且当我的表创建时，标题被覆盖。如何在我的书签之后选择范围来添加我的表格，以便保留我的标题？

```
R := WordApp.ActiveDocument.Bookmarks.Item('bmStartSecond').Range;
R.Select;
TableFormat(WordDoc, intCounter + 10);

function TableFormat(Adocument : variant; intNumRows : integer): variant;
var
wrdSelection: variant;
begin
  wrdSelection := WordApp.Selection;
  Adocument.Tables.Add(Range:=wrdSelection.Range, NumRows:=intNumRows, NumColumns:=3);
  Adocument.Tables.Item(1).Columns.Item(1).SetWidth(InchestoPoint(2.5),0);
  Adocument.Tables.Item(1).Columns.Item(2).SetWidth(InchestoPoint(2.25),0);
  Adocument.Tables.Item(1).Columns.Item(3).SetWidth(InchestoPoint(2.75),0);
  wordDoc.Tables.Item(1).Cell(Row:=1, Column:= 1).Range.Text := 'Offense:';
  wordDoc.Tables.Item(1).Cell(Row:=1, Column:= 2).Range.Text := 'Date & Place:';
  wordDoc.Tables.Item(1).Cell(Row:=1, Column:= 3).Range.Text := 'Disposition:';

  TableFormat := Adocument;
end; 
```

谢谢，莱斯利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T20:36:05.950

这会在命名书签之后添加一个表格。您应该能够使其适应您的需求。（您的代码来自几十年前，顺便说一句 - 现代 Delphi 使用`Result`来指示返回值而不是`FunctionName :=`.`Result`是为函数自动创建的适当类型的变量。）在 Windows 7 和 Office 上使用 Delphi 2007、Office XP 组件进行测试2007年安装。

```
procedure TForm1.AddTable;
const
  Line1 = 'January,February,March';
  Line2 = '31,28,31';
  Line3 = '31,59,90';
var
  R, Direction, Separator, BookmarkName, TableFormat, Cols: OleVariant;
begin
  BookMarkName := 'bmTest';
  R := WordApp.ActiveDocument.Bookmarks.Item(BookmarkName).Range;
  Direction := wdCollapseEnd;
  R.Collapse(Direction);
  R.InsertAfter(Line1);
  R.InsertParagraphAfter;
  R.InsertAfter(Line2);
  R.InsertParagraphAfter;
  R.InsertAfter(Line3);
  R.InsertParagraphAfter;
  Separator := ',';
  TableFormat := wdTableFormatGrid1;
  R.ConvertToTable(Separator);

  // Cleaner to grab a reference to the table columns, and use
  // it instead of the long reference every time.
  Cols := WordApp.ActiveDocument.Tables.Item(1).Columns;
  Cols.Item(1).SetWidth(WordApp.InchesToPoints(2.25), wdAdjustNone);
  Cols.Item(2).SetWidth(WordApp.InchesToPoints(3.5), wdAdjustNone);
  Cols.Item(3).SetWidth(WordApp.InchesToPoints(2.75), wdAdjustNone);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:51:04.557

创建表的函数

```
Function CreateTable(NumRows, NumColumns:integer;
var index:integer):boolean;
var sel_:variant;
begin
CreateTable:=true;
try
sel_:=W.selection;
W.ActiveDocument.Tables.Add (Range:=sel_.Range,NumRows: =NumRows,
  NumColumns:=NumColumns);
index:=W.ActiveDocument. Tables.Count;
except
CreateTable:=false;
end;
End; 
```

和其他大小表：

```
Function SetSizeTable(Table:integer; RowsHeight,
ColumnsWidth:real):boolean;
begin
SetSizeTable:=true;
try
W.ActiveDocument.Tables.Item (Table).Columns.Width:=ColumnsWidth;
W.ActiveDocument.Tables.Item(Table). Rows.Height:=RowsHeight;
except
SetSizeTable:=false;
end;
End; 
```

或设置行/列的大小

```
Function SetHeightRowTable(Table,Row:integer;
RowHeight:real):boolean;
begin
SetHeightRowTable:=true;
try
W.ActiveDocument.Tables.Item(Table).Rows.item(Row).Height:=RowHeight;
except
SetHeightRowTable:=false;
end;
End;
Function SetWidthColumnTable(Table,Column: integer;
ColumnWidth:real):boolean;
begin
SetWidthColumnTable:=true;
try
W.ActiveDocument.Tables.Item(Table).Columns.
  Item(Column).Width:=ColumnWidth;
except
SetWidthColumnTable:=false;
end;
End; 
```

这里有更多关于 word 的功能：http: [//delphimagic.blogspot.com.es/2013/03/funciones-para-trabajar-con-word.html](http://delphimagic.blogspot.com.es/2013/03/funciones-para-trabajar-con-word.html)

# c++ - Qt QGraphicsItem 中的 hoverLeaveEvent() 并不总是被调用

> ID：11436533
> 
> 赞同：1
> 
> 时间：2012-07-11T15:50:58.040
> 
> 标签：c++, qt, user-interface, graphics, qgraphicsitem

我在使用 Qt QGraphicsScene、QGraphicsItems 和 hoverLeaveEvent() 时遇到了一些问题。

在 hoverEnterEvent() 上，我正在向场景中绘制一个新图形，我想在 hoverLeaveEvent() 上删除它，但是如果用户将图形项悬停然后滚动离开它而不是将鼠标从项目上移开 hoverLeaveEvent( ) 永远不会被调用，并且新图形永久保留在场景中。

我没有看到任何从自定义 QGraphicsItem 中捕获滚动事件的方法，因此我不确定解决此问题的最佳方法。

我想我可以在新图形上附加一个计时器，但是我怎么知道鼠标是否仍然悬停在使它首先绘制的 QGraphicsItem 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:06:07.503

这很可能是一个 Qt 错误。请报告。测试用例即将发布。

# android - Nexus 相机——从不返回数据

> ID：11436535
> 
> 赞同：3
> 
> 时间：2012-07-11T15:50:58.947
> 
> 标签：android

在应用程序中，我允许用户将他们的头像图片更改为他们选择的一张。然后将图片（裁剪后）存储在应用程序的私有上下文中。我所做的事情取得了巨大的成功，但是，在 Nexus 上，相机永远不会返回数据，因此该方法可以继续前进。它只是坐下来等待，直到您必须手动强制关闭应用程序。它可以在其他 4.0 ICS 设备上运行，但不能在 Nexus 上运行。Nexus 允许用户从他们的图库中选择，它工作得很好，只是在拍摄新照片时不行。有什么诀窍可以让它工作吗？？？

下面是一段代码：

再次请注意，这可以在其他设备上正常工作：

final String [] items = new String [] {"从相机拍摄", "从图库中选择"};
ArrayAdapter 适配器 = 新的 ArrayAdapter (this, android.R.layout.select_dialog_item,items); AlertDialog.Builder builder = new AlertDialog.Builder(this);

```
 builder.setTitle("Select Image");
    builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
        public void onClick( DialogInterface dialog, int item ) { //take picture
            if (item == 0) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                try {
                    intent.putExtra("return-data", true);
                    startActivityForResult(intent, PICK_FROM_CAMERA);
                } catch (ActivityNotFoundException e) {
                    e.printStackTrace();
                }
            } else { //pick from file
                Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

                startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
            }
        }
    });

    final AlertDialog dialog = builder.create();
    mImageView = (ImageView) findViewById(R.id.me_photo);
    File file = new File(context.getCacheDir(), "Avatar"+".png");
    if (file.exists()) {

        //Log.i("CACHE_test", file.getPath());

        Bitmap bitmap = BitmapFactory.decodeFile(file.getPath());

        mImageView.setImageBitmap(bitmap);
    }

    mImageView.setOnClickListener(new View.OnClickListener(){
        public void onClick(View arg0) {
            dialog.show();
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_OK) return;
    switch (requestCode) {
        case PICK_FROM_CAMERA:
            mImageCaptureUri= data.getData();
            doCrop();
            break;
        case PICK_FROM_FILE: 
            mImageCaptureUri = data.getData();
            doCrop();
            break;          
        case CROP_FROM_CAMERA:          
            Bundle extras = data.getExtras();
            if (extras != null) {               
                Bitmap photo =(Bitmap) data.getExtras().get("data");
                        //extras.getParcelable("data");
                mImageView.setImageBitmap(photo);
               // FileOutputStream fos = null;
                File file = new File(context.getCacheDir(), "Avatar"+".png");

                    try {
                        file.createNewFile();
                        FileOutputStream fos = new FileOutputStream(file);

                        photo.compress(Bitmap.CompressFormat.PNG, 95, fos);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        Toast.makeText(this, "Sorry, Camera Crashed-Please Report as Crash A.", Toast.LENGTH_LONG).show();
                    } 
            }

            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T02:25:02.253

这是一个常见问题，某些型号的设备使用不同的额外密钥属性，

所以命令为
`Bitmap photo =(Bitmap) data.getExtras().get("data");`

可以指向空元素或小缩略图元素

看看[这篇文章](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)

# linux - Curl & Wget 返回响应，浏览器超时

> ID：11436537
> 
> 赞同：6
> 
> 时间：2012-07-11T15:51:04.077
> 
> 标签：linux, browser, timeout, wget, redhat

我正在向云上的特定服务器发送请求：

```
wget --header="Host: example.com" http://x.x.x.x:80/
curl -i -H"Host: example.com" http://x.x.x.x:80/ 
```

它完全按预期返回（一个简单的静态文件）。但是，当我尝试在浏览器中访问它时，请求超时。我无法想象这将是一个用户代理标头问题，但话又说回来，我真的不知道它还会是什么。

它不会去负载均衡器或任何东西，应该直接去网站。关于为什么会发生这种情况的任何想法？我将主机文件设置为转到该特定 IP 地址。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-24T22:11:26.313

看起来您在 wget/curl 中指定了 IP 地址，但在浏览器中指定了主机名。这会在测试中产生额外的变量，我们无法对结果进行故障排除。（您需要更好地[控制](https://en.wikipedia.org/wiki/Scientific_control)测试。）

尝试在命令行上复制您的浏览器逻辑：

```
wget http://example.com/ 
```

这将在您的浏览器中使用`wget`.

**如果它有效**，则您的浏览器存在配置问题（或者可能是从您的操作系统继承的任何代理设置）。

**如果它不起作用**，您的主机文件可能有问题。

您也可以反向尝试测试；找到一些浏览器插件，可以让您指定/更改任意标题，或者明确允许您将主机名与 URL 分开设置，然后`http://x.x.x.x:80/`像使用 wget/curl 一样转到。

# php - Symfony 2 Ajax 提交，令牌 CSRF 无效

> ID：11436540
> 
> 赞同：0
> 
> 时间：2012-07-11T15:51:15.990
> 
> 标签：php, jquery, symfony, symfony-forms

有我的问题，我需要分几个步骤提交表格。我有一个**应用程序表单**和一个**登录表单**

```
<form id="app_form" action="{{ path('app_create') }}" method="post" {{ form_enctype(formApp) }}>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.name, 'Name'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.name, { required : true }) }}</div>
            <div class="span2" id="error_app_name">{{ form_errors(formApp.name) }}</div>
        </div>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.description, 'Description'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.description, { required : true }) }}</div>
            <div class="span2">{{ form_errors(formApp.description) }}</div>
        </div>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.iosUrl, 'iOS'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.iosUrl) }}</div>
            <div class="span2">{{ form_errors(formApp.iosUrl) }}</div>
        </div>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.androidBundle, 'Android Bundle'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.androidBundle) }}</div>
            <div class="span2">{{ form_errors(formApp.androidBundle) }}</div>
        </div>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.wpUrl, 'Windows Phone'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.wpUrl) }}</div>
            <div class="span2">{{ form_errors(formApp.wpUrl) }}</div>
        </div>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.bbUrl, 'Blackberry'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.bbUrl) }}</div>
            <div class="span2">{{ form_errors(formApp.bbUrl) }}</div>
        </div>

        <div class="row-fluid">
            <div class="span2">{{ form_label(formApp.fallbackUrl, 'Fallback Url'|trans) }}</div>
            <div class="span4">{{ form_widget(formApp.fallbackUrl) }}</div>
            <div class="span2">{{ form_errors(formApp.fallbackUrl) }}</div>
        </div>

        {{ form_rest(formApp) }}

        <button type="submit" class="btn">{{ 'Next step'|trans }}</button>

    </form>

<form id="form_login">
        <input type="hidden" id="login_csrf_token" name="_csrf_token" value="{{ csrf_token }}" />

        <label for="login_username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
        <input type="text" id="login_username" name="_username" value="{{ last_username }}" required="true" />

        <label for="login_password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
        <input type="password" id="login_password" name="_password"  required="true" />

        <input type="checkbox" id="login_remember_me" name="_remember_me" value="on" />
        <label for="login_remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>

        <button type="submit" class="btn">{{ 'Login'|trans }}</button>

        <button class="btn" id="register_show" type="button">{{ 'Want to register ?'|trans }}</button>

        <div id="error_login"></div>

    </form> 
```

我想用 ajax 提交登录表单，然后提交应用程序表单，但是当我这样做时出现错误

> CSRF 令牌无效。请尝试重新提交表格

Javascript代码：

```
$('#form_login').submit(function(){
            event.preventDefault();

            $.post('./login_check', {   _csrf_token : $('#login_csrf_token').val() ,
                                        _username : $('#login_username').val() ,
                                        _password : $('#login_password').val(),
                                        _remember_me : $('#login_remember_me').val() },
                    function (data) {

                        console.log(data);
                        /**
                         * If the login was ok we submit the app form
                         */
                        if(data.success){
                            $('#app_form').submit();
                        }
                        /**
                         * Else we sow to the user the error
                         */
                        else{
                            $('#error_login').html(data.message);
                        }
                    }
            );
        }); 
```

登录表单返回成功，但是当我提交应用程序表单时**$('#app_form').submit();** 错误出现在下一页。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:16:14.720

我选择的解决方案是在每个 LoginAjax 操作中重新生成令牌，并将其发送到响应中（格式为 JSON）。然后我只需要更新所有具有令牌字段的表单（可以通过为每个令牌设置一个特定的类来使用。

第一步，实现定义为 this 的 AuthenticationSuccessHandler

```
acme.security.ajax_handler:
    class: Acme\UserBundle\Listener\AjaxAuthenticationListener
    arguments: ["@form.csrf_provider", "@router"] 
```

AjaxAuthenticationListener 类

```
 <?php

namespace Travelyo\UserBundle\Listener;
use Symfony\Component\HttpFoundation\Response;

use Symfony\Component\HttpFoundation\RedirectResponse;

use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\HttpFoundation\Request;

use Symfony\Component\Security\Http\Authentication\AuthenticationFailureHandlerInterface;
use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;

/**
 * Refere to http://stackoverflow.com/questions/8607212/symfony2-ajax-login
 * @author yoni
 *
 */
class AjaxAuthenticationListener implements AuthenticationSuccessHandlerInterface, AuthenticationFailureHandlerInterface {

    protected $csrf_provider;
    protected $router;
    /**
     * In case we have Failure I need to provide a new csrf token
     * @param unknown_type $csrf_provider
     * @author Yoni Alhadeff
     */
    public function __construct($csrf_provider, $router)
    {
        $this->csrf_provider = $csrf_provider;
        $this->router = $router;
    }
    /**
     * This is called when an interactive authentication attempt succeeds. This
     * is called by authentication listeners inheriting from
     * AbstractAuthenticationListener.
     *
     * @see SymfonyComponentSecurityHttpFirewallAbstractAuthenticationListener
     * @param Request        $request
     * @param TokenInterface $token
     * @return Response the response to return
     */
    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        if ($request->isXmlHttpRequest())
        {
            $result = array('success' => true, 'token'=>$this->csrf_provider->generateCsrfToken('unknown'));
            $response = new Response(json_encode($result));
            $response->headers->set('Content-Type', 'application/json');
            return $response;
        } else
        {
            // If the user tried to access a protected resource and was forces to login
            // redirect him back to that resource
            if ($targetPath = $request->getSession()->get('_security.account.target_path'))
            {
                $url = $targetPath;
            } else
            {
                // Otherwise, redirect him to wherever you want
                $url = $this->router->generate('homepage_route_name', array());
            }
            return new RedirectResponse($url);
        }
    }
    /**
     * This is called when an interactive authentication attempt fails. This is
     * called by authentication listeners inheriting from
     * AbstractAuthenticationListener.
     *
     * @param Request                 $request
     * @param AuthenticationException $exception
     * @return Response the response to return
     */
    public function onAuthenticationFailure(Request $request, AuthenticationException $exception)
    {
        if ($request->isXmlHttpRequest())
        {
            $result = array('success' => false, 'error'=>$exception->getMessage(),'token'=>$this->csrf_provider->generateCsrfToken('authenticate'));
            $response = new Response(json_encode($result));
            $response->headers->set('Content-Type', 'application/json');
            return $response;
        } else
        {
            // Create a flash message with the authentication error message
            $request->getSession()->setFlash('error', $exception->getMessage());
            $url = $this->router->generate('fos_frontend_security_login');

            return new RedirectResponse($url);
        }
    }
} 
```

在使用 AJAX 时的失败和成功登录中，我都在响应中添加了新令牌。

在javascript中的病房之后，在AJAX调用的Succes:function()中，我只需要更新字段

类似的东西。

```
var route = $('#loginUrl').val();
var data= '_username=' +       $("#username").val()+"&_password="+$('#password').val()+"&_csrf_token="+$('#csrf_token').val();
$.ajax( {
    type : "POST",
    url : route,
    data: data,
    dataType: 'json',
    cache : false,
    success : function(response, value){
        //Response.success came from the JSON defined in the AjaxAuthenticationListener, he's not linked to the AJAX call
        if(response.success==true)
        {
        }

        $('#csrf_token').val(response.token); //Token has to be regenerate
        $(".tokenField").val(response.token);
    }
}); 
```

我认为这是更简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:09:21.013

CSRF 令牌部分使用 cookie。当您在一个页面上生成两个 CSRF 并提交其中一个表单时，您就是在使 cookie 无效。

如果没有对框架本身进行一些扩展，我只能看到一种解决方法——而且它相当迂回：

您可以做的是设置一个控制器来生成您的应用程序表单。

在初始页面加载时，您的控制器将加载登录表单以及应用程序表单。通过 AJAX 提交登录表单后，您还将仅向控制器请求应用程序表单（这也会给用户一个新的 cookie）。使用 javascript，您可以从新表单中提取新的 csrf 令牌并将其注入到原始应用程序表单中。然后，当您提交应用程序表单时，它应该有一个新的、有效的 csrf 令牌。

为了显示：

获取应用程序表单和登录表单 -> 通过 AJAX 提交登录 -> 通过后台 AJAX 获取应用程序表单 -> 窃取新应用程序表单的 csrf 令牌并将其注入第一个应用程序表单 -> 提交应用程序表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T21:06:13.143

使用`$('form').serialize()`：

```
$('#form_login').submit(function(){
    $.ajax({
        url:    $(this).attr('action'),
        method: $(this).attr('method'),
        data:   $(this).serialize(),
        success: function(response){
            alert(response);
        }
    });
}); 
```

在控制器中使用以下：

*   `return new Response('ok')`为了获得良好的反响和
*   `return new Response('bad :(', 500)`对于不好的反应

# c# - 带圆角的 ListView

> ID：11436545
> 
> 赞同：2
> 
> 时间：2012-07-11T15:51:35.997
> 
> 标签：c#, .net, wpf

我想绕过 ListView 的角落。我曾尝试使用该`Template`属性，但似乎我必须重写整个模板。有什么办法可以到达边界以便我可以设置`CornerRadius`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T16:18:53.980

忽略 BorderThickness 和 CornerRadius 的值，您可以根据自己的要求进行设置。

```
 <ListView>
        <ListView.Template>
            <ControlTemplate>
                <Border CornerRadius="50" BorderThickness="50" BorderBrush="Red">
                    <ItemsPresenter></ItemsPresenter>
                </Border>
            </ControlTemplate>
        </ListView.Template>
        <ListViewItem Content="Harish"/>
        <ListViewItem Content="Harish"/>
        <ListViewItem Content="Harish"/>
        <ListViewItem Content="Harish"/>
    </ListView> 
```

我希望这个能帮上忙

# c# - 在 C# 中处理字符串需要一些帮助吗？

> ID：11436546
> 
> 赞同：0
> 
> 时间：2012-07-11T15:51:36.167
> 
> 标签：c#, xml, regex, c#-4.0, marc

我有一个非常大的字符串，我正在尝试将其从旧标准转换为 marc21 xml 标准。

以下代码行：

```
temp1 = inputString.Replace("<marc:controlfield tag=\"LDR\">", "<marc:leader>"); 
```

产生以下内容：

```
<marc:leader>^^^^^nam^a22^^^^^3a^4500</marc:controlfield> 
```

问题非常明显。

我对特定术语执行一揽子转换，并将其替换为“marc:controlfield”。在我的转换过程即将结束时，我开始处理领导者元素。这就是我现在的位置。精通xml的人知道：

```
</marc:controlfield> 
```

需要是：

```
</marc:leader> 
```

完成此操作后，可以测试我的字符串的格式和有效性等。我正在努力研究如何抓住前导元素的右括号并将其替换为 xml，如上所示。

最初的 Leader 元素如下所示：

```
<fixfield id="LDR">^^^^^nam^a22^^^^^3a^4500</fixfield> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:49:42.503

使用正则表达式：

```
strResult = Regex.Replace(inputString,
                          "<marc:controlfield tag=\"LDR\">([^<]*)</marc:controlfield>",
                          "<marc:leader>$1</marc:leader>"); 
```

解释：

```
[^<]*  

means any character except: '<' 
(0 or more times, matching the most amount possible) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:04:48.393

也许我只是没有正确理解你，但为什么不跑步

```
temp1 = temp1 .Replace("</marc:controlfield>", "</marc:leader>"); 
```

在您的第一次转换为您工作之后？

# javascript - 如何使用 Jquery mobile 解析/浏览历史记录？

> ID：11436547
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:51:39.350
> 
> 标签：javascript, jquery, jquery-mobile, browser-history

在 Windows 8 应用程序上，`history.back()`并且`history.forward()`无法执行，所以我想恢复阵列上的所有历史记录以使用`$.mobile.changePage();`

但是“如何解析/浏览历史？”

想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:58:35.300

为什么不创建一个客户端 javascript 数组并在每次页面加载事件在 jQuery 移动 api 中触发时添加一个新条目？

```
var myPageHistory = [];
$(document).bind('pageload', function( event, data ){
myPageHistory.push(data.url); // add the page to the history array
}) 
```

# mysql - Mac Os rake db:create through error with qt 和 mysql 依赖

> ID：11436549
> 
> 赞同：3
> 
> 时间：2012-07-11T15:51:49.863
> 
> 标签：mysql, ruby, macos, qt, rake

我有这样的问题，当我尝试创建数据库时，尽管出现错误，但我尝试重新安装 mysql 但通过 brew 设置版本卡住了

```
Aleksandrs-MacBook-Air:alfred_infocus sharkzp$ rake db:create --trace
:public is no longer used to avoid overloading Module#public, use :public_folder instead
    from /Users/sharkzp/.rvm/gems/ruby-1.9.3-p194/gems/resque-1.8.2/lib/resque/server.rb:11:in `<class:Server>'
** Invoke db:create (first_time)
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:create
rake aborted!
undefined method `values_at' for "brew install qt# MySQL.  Versions 4.1 and 5.0 are recommended.":String
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/railties/databases.rake:603:in `configs_for_environment'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/railties/databases.rake:40:in `block (2 levels) in <top (required)>'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/sharkzp/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/Users/sharkzp/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:create 
```

我有这样的版本 mysql - 5.5.25a qt - 4.8.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T11:12:59.380

我不确定 qt brew 包与 ruby​​、rails 和数据库有什么关系？

但从 ActiveRecord 3.2.11 开始：

```
ActiveRecord::Base.configurations.values_at(*environments).compact.reject { |config| config['database'].blank? } 
```

这看起来像是试图从配置中加载您的数据库，可能来自 config/database.yml。

你有没有留下文字“brew install qt# MySQL。建议使用 4.1 和 5.0 版本。” 在 yaml 内部使其无效？

否则，Ruby YAML 解析器可能会以某种方式损坏。

# c++ - 点积/w Neon Intrinsics

> ID：11436551
> 
> 赞同：1
> 
> 时间：2012-07-11T15:51:52.870
> 
> 标签：c++, optimization, floating-point, arm, neon

我正在尝试使用 Neon 内在函数为 ARM A8 处理器编写优化的点积，但我遇到了一些麻烦。首先，是否有任何库已经实现了这一点？我的代码似乎可以工作，但在运行时会导致一些安静的失败——我最好的猜测是因为与未优化的代码相比，精度略有下降。有没有更好的方法来完成我想要做的事情？如果有任何帮助或建议，我将不胜感激。提前致谢。

这个特殊的点积是一个 32 位浮点 * 32 位浮点复数。

这是未优化的代码：

```
 double sum_re = 0.0;
    double sum_im = 0.0;
    for(int i=0; i<len; i++, src1++, src2++)
    {
            sum_re += *src1 * src2->re;
            sum_im += *src1 * src2->im;
    } 
```

这是我的优化版本：

```
 float sum_re = 0.0;
    float sum_im = 0.0;

    float to_sum_re[4] = {0,0,0,0};
    float to_sum_im[4] = {0,0,0,0};

    float32x4_t tmp_sum_re, tmp_sum_im, source1;
    float32x4x2_t source2;
    tmp_sum_re = vld1q_f32(to_sum_re);
    tmp_sum_im = vld1q_f32(to_sum_im);

    int i = 0;

    while (i < (len & ~3)) {
            source1 = vld1q_f32(&src1[i]);
            source2 = vld2q_f32((const float32_t*)&src2[i]);

            tmp_sum_re = vmlaq_f32(tmp_sum_re, source1, source2.val[0]);
            tmp_sum_im = vmlaq_f32(tmp_sum_im, source1, source2.val[1]);

            i += 4;
    }
    if (len & ~3) {
            vst1q_f32(to_sum_re, tmp_sum_re);
            vst1q_f32(to_sum_im, tmp_sum_im);

            sum_re += to_sum_re[0] + to_sum_re[1] + to_sum_re[2] + to_sum_re[3];
            sum_im += to_sum_im[0] + to_sum_im[1] + to_sum_im[2] + to_sum_im[3];
    }

    while (i < len)
    {
            sum_re += src1[i] * src2[i].re;
            sum_im += src1[i] * src2[i].im;
            i++;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:50:46.387

如果您使用的是 iOS，请在 Accelerate 框架中使用 vDSP_zrdotpr。（vDSP_zrdotpr 返回实数向量与复数向量的点积。还有其他变体，例如实数到实数或复数到复数。）

当然会有精度损失；您的未优化代码会累积双精度和，而 NEON 代码会累积单精度和。

即使没有精度变化，结果也会有所不同，因为以不同的顺序进行浮点运算会产生不同的舍入误差。（整数也是如此；如果计算 7/3*5，则得到 10，但 5*7/3 为 11。）

有一些算法可以减少错误的浮点运算。然而，为了做一个高性能的点积，你通常会坚持你所得到的。

一种选择是使用双精度 NEON 指令进行算术运算。当然，这不会像单精度 NEON 那样快，但会比标量（非 NEON）代码快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T07:49:56.080

这是我做过的事情，目前在商业产品中。希望它有所帮助。唯一的要求是两个被乘数 (src1, srcs->re) 必须是四的倍数。

```
float dotProduct4 (const float *a, const float *b, int n) {
float net1D=0.0f;
assert(n%4==0);     // required floats 'a' & 'b' to be multiple of 4
#ifdef __ARM_NEON__
asm volatile (
              "vmov.f32 q8, #0.0          \n\t" // zero out q8 register
              "1:                         \n\t"
              "subs %3, %3, #4            \n\t" // we load 4 floats into q0, and q2 register
              "vld1.f32 {d0,d1}, [%1]!    \n\t" // loads q0, update pointer *a
              "vld1.f32 {d4,d5}, [%2]!    \n\t" // loads q2, update pointer *b
              "vmla.f32 q8, q0, q2        \n\t" // store four partial sums in q8
              "bgt 1b                     \n\t"   // loops to label 1 until n==0
              "vpadd.f32 d0, d16, d17     \n\t"   // pairwise add 4 partial sums in q8, store in d0
              "vadd.f32 %0, s0, s1        \n\t"   // add 2 partial sums in d0, store result in return variable net1D
              : "=w"(net1D)                 // output
              : "r"(a), "r"(b), "r"(n)      // input
              : "q0", "q2", "q8");          // clobber list
#else
for (int k=0; k < n; k++) {
    net1D += a[k] * b[k];
}
#endif
return net1D;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T14:33:43.600

至于其他实现，ARM 提供了 NEON OpenMAX DL 实现。[从http://www.arm.com/community/multimedia/standards-apis.php](http://www.arm.com/community/multimedia/standards-apis.php)链接到。

下载需要注册，格式是RVCT assembler，但是看一组NEON的使用例子（包括一个点积实现），还是不错的。

# c# - 从 BackgroundWorker 发布事件委托错误

> ID：11436558
> 
> 赞同：0
> 
> 时间：2012-07-11T15:52:19.707
> 
> 标签：c#, asynchronous, .net-3.5, backgroundworker, eventargs

我有一个接口，IDataQuery，当数据加载正在进行并完成时，它有一个事件给 nofity 侦听器。加载是通过 BackgroundWorker 完成的，并在 IDataQuery 的子类中适当地触发。

```
public interface IDataQuery : IDisposable
{
  event EventHandler<DataLoadCompletedEventArgs> LoadCompleted;
  event EventHandler<DataLoadProgressEventArgs> LoadProgressChanged;
} 
```

DataLoadCompletedEventArgs 和 DataLoadProgressEventArgs 派生自 EventArgs，并具有与之关联的数据/进度信息。

我目前没有捕获后台线程上可能发生的错误，并且 LoadCompleted EventHandler 被触发，并且我没有检查 RunWorkerCompletedEventArgs 以查看它是否有错误。我想优雅地通知消费者发生了错误。

处理这些后台任务中的错误的最佳设计是什么？我是不是该：

1.  将我自己的错误/异常属性添加到 LoadCompleted，并要求消费者检查它
2.  有一个新的 EventHandler / EventArgs 专门用于失败案例
3.  有 DataLoadCompletedEventArgs 派生自 AsyncCompletedEventArgs （它有一个 Error 属性），并保持捆绑“完成错误”和“成功完成”案例？
4.  还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:03:46.620

选项 3 似乎最适合微软为此模式推荐的最佳实践：

请参阅此 MSDN 页面的“错误和异常”部分：

[实现基于事件的异步模式的最佳实践](http://msdn.microsoft.com/en-us/library/ms228974)

# dependency-injection - IoC：使用静态 IoC 容器的依赖注入

> ID：11436559
> 
> 赞同：0
> 
> 时间：2012-07-11T15:52:20.887
> 
> 标签：dependency-injection, static, inversion-of-control

将例如 autofac/ninject 放在我可以访问的静态类中是一个好主意吗？来自不同的程序集/项目？

静态类 MyContainer { 静态 IoCContainer ContainerOfCurrentRuntimeContext; }

如果我使用它，我可以在不同的项目中使用相同的 IoC 上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:23:51.483

不，这种方法会增加两个新问题：*单例*模式和*服务定位器*模式（都算作反模式）。结果，您的代码将耦合到新的依赖项：*您的 DI contaner*。

通常您可以克服使用*服务定位器*的限制，但这不值得这样做，因为为 DI引入*组合根非常简单。*

顺便说一句，您可以拥有一种配置并在所有不同的项目中使用它。

# c# - 通过 C#.Net 发送时的 SFTP 或 FTPS

> ID：11436561
> 
> 赞同：3
> 
> 时间：2012-07-11T15:52:48.877
> 
> 标签：c#, sftp, ftps

我读了这篇文章：

> 尽管它们都旨在服务于相同的目的，但两者彼此非常不同。SFTP 使用单个通道来传输和接收所有相关数据，而 FTPS 使用另一个为数据动态决定的通道。FTPS 在通过防火墙时经常会出现问题，因为它不知道数据正在使用的端口，并且无法允许流量通过该端口。FTPS 以文本格式发送消息，允许人们阅读日志并确定会话期间发生的情况。这对于 SFTP 是不可能的，因为消息不是文本形式，而是二进制形式。
> 
> 阅读更多：FTPS 和 SFTP 之间的区别 | 之间的区别| FTPS 与 SFTP [http://www.differencebetween.net/technology/internet/difference-between-ftps-and-sftp/#ixzz20KUGWr00](http://www.differencebetween.net/technology/internet/difference-between-ftps-and-sftp/#ixzz20KUGWr00)

我不想假设任何事情，因为如果我错了，这只会让我的工作更加困难，但是当我通过 C#/.Net4 像这样发送文件时：

```
 var request = (FtpWebRequest) WebRequest.Create(FtpUrl + filename);
    request.Method = WebRequestMethods.Ftp.UploadFile;

    var secureString = new SecureString();
    foreach (var b in Encoding.Default.GetBytes(FtpPassword))
      secureString.AppendChar((char) b);
    request.Credentials = new NetworkCredential(FtpUsername, secureString);
    request.EnableSsl = true; 
```

那是SFTP还是FTPS？由于 EnableSsl，我假设 FTPS 如文章所示。

如果不是 SFTP，我可以将其改为 SFTP 吗？我在通过防火墙发送时遇到问题。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T16:00:51.127

SFTP 使用 SSH 传输文件。如果您在远程计算机上运行 ssh，则可以将其更改为此。我不确定 C# 是否支持它。据此：[http](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/817b4f71-7e88-4b62-b48a-8a5edca800fd/) ://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/817b4f71-7e88-4b62-b48a-8a5edca800fd/答案是否定的。

FTPS 正在将 SSL 添加到 FTP。有点像 HTTPS 是 HTTP 之上的 SSL。

您的代码肯定使用 FTPS。

您的防火墙问题可能在这里解释：[http ://en.wikipedia.org/wiki/Ftps#Firewall_incompatibilities](http://en.wikipedia.org/wiki/Ftps#Firewall_incompatibilities)

# r - 在ggplot2中向x轴添加文本

> ID：11436562
> 
> 赞同：3
> 
> 时间：2012-07-11T15:52:50.607
> 
> 标签：r, ggplot2, line, axis-labels

这是数据：

```
myd <- data.frame (X1 = rep (c("A0001", "B0002", "C0003", "D0004"), each = 2),
X2 = rep (c(1, 5.3, 8.2, 12.5), each = 2), X3 = rep (c("A", "B"), 4),
 Y = rnorm (8, 5, 2)) 
```

这是我可以绘制的情节：

```
 require(ggplot2)
 ggplot(myd, aes(x = X2, y = Y, group = X3)) + 
geom_point (aes(col = X3, pch = X3)) + geom_line (aes(col = X3)) 
```

除了 X2 值之外，我还希望 X1 文本到 x 轴上的相应位置。干草稿：

![在此处输入图像描述](../Images/36886b8ba6da95033fb4d8f25e56ba7b.png)

我该怎么做 ？编辑：

**注意：目的是在X轴上同时显示连续的刻度和文本：**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T16:54:30.113

创建两个新层：

*   `geom_rug`对于轴上的线
*   `geom_text`对于标签 - 但首先创建所需标签的摘要

编码：

```
ruglabels <- unique(myd[, 1:2])

require(ggplot2)
ggplot(myd, aes(x=X2, y=Y)) + 
  geom_point (aes(col = X3, pch = X3, col=X3)) + 
  geom_line (aes(col = X3, col=X3)) +
  geom_rug(sides="b") +
  geom_text(data=ruglabels, aes(x=X2, label=X1, y=2)) 
```

![在此处输入图像描述](../Images/0d03fbac3a27537a7a8f72ab0cd95b38.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:27:39.937

如果您只想要 X1 标签而不想要坐标，您可以执行以下操作：

```
require(ggplot2)

myd <- data.frame (X1 = rep (c("A0001", "B0002", "C0003", "D0004"), each = 2),
    X2 = rep (c(1, 5.3, 8.2, 12.5), each = 2), X3 = rep (c("A", "B"), 4),
    Y = rnorm (8, 5, 2))

ggplot(myd, aes(x = X2, y = Y, group = X3)) + 
    geom_point (aes(col = X3, pch = X3)) + geom_line (aes(col = X3))+
    scale_x_continuous( breaks = myd$X2, labels = myd$X1) 
```

![您的带有 x 轴标签的绘图。](../Images/4222981c5746f1652a00232004e614b1.png)

# javascript - 使用 Javascript，如何更改不同 HTML 页面上的 CSS 显示属性

> ID：11436564
> 
> 赞同：1
> 
> 时间：2012-07-11T15:52:59.547
> 
> 标签：javascript, html, css

所以，我想改变我的一个 div 的显示样式，这是我的 javascript 中的代码：

```
document.getElementById("header1").style.display='none'; 
```

现在的问题... header1 是不同页面上的 div id，但我想通过选择当前页面上的选项来影响它。我该如何去做，以便当我进入下一页时 header1 将被隐藏？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:55:47.087

您无法更改尚未加载到浏览器中的元素的属性。您必须使用 cookie 或查询字符串来告诉您在页面加载时隐藏元素。

**编辑**

您可以使用以下 javascript 重定向到新页面。注意：后面的所有内容`?`都是查询字符串的一部分。

```
// Redirect without querystring
window.location = "http://www.mySite.com/default.html"

// Redirect with querystring
window.location = "http://www.mySite.com/default.html?hide=true"

// Redirect with multiple values in querystring
window.location = "http://www.mySite.com/default.html?hide=true&test=1" 
```

查看[get-query-string-values-in-javascript](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)以了解如何通过 javascript 检索查询字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:56:26.123

您可以在隐藏的表单字段中或可能通过 url 将值传递到下一页，然后在该页面加载时使用该值在页面上设置所需的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:01:20.413

如果您有很多信息要携带或者您要跨多个页面携带，如何使用本地/会话存储甚至 indexDB 将值/选择携带到其他页面。节省不需要的 POSTS 并消除对任何服务器端代码的需要

# php - 如何在 MySQLi php 中使用 Join

> ID：11436568
> 
> 赞同：1
> 
> 时间：2012-07-11T15:53:16.933
> 
> 标签：php, mysql, mysqli

我有一个名为 Over_Pics 的数据库（有一个名为“Pic”的表，带有列 ID，PicID）和 Over_SeenPics（一个名为“Seen”的表，带有列文本，PicID）

如何为此正确编写连接函数？

```
$r = mysqli_query($link, "SELECT Pic.PicID FROM Pic LEFT JOIN Seen ON Pic.PicID=Seen.PicID"); 
```

mysql_connect 中的数据库名称是否也应该留空，因为我需要访问 dbs 而不是 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:55:49.310

我认为您只需要在表名之前指定数据库，如下所示：

```
$r = mysqli_query($link, "SELECT Over_Pics.Pic.PicID FROM Over_Pics.Pic LEFT JOIN Over_SeenPics.Seen ON Over_Pics.Pic.PicID=Over_SeenPics.Seen.PicID"); 
```

您可以使用以下命令遍历结果集的行：

```
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){
    foreach ($row as $key => $value){
        echo $key." - ".$value.", ";
    }
    echo "\n";
} 
```

这会将查询的结果输出到屏幕上。当然，您很可能想要更改格式。

# r - 编写循环以多次应用运算符“data.frame”

> ID：11436570
> 
> 赞同：0
> 
> 时间：2012-07-11T15:53:21.403
> 
> 标签：r, csv, for-loop, dataframe, lapply

我想编写一个循环来从一组已经存在的矩阵创建多个数据帧。我已经使用以下代码导入并创建了这些：

```
temp<-list.files(pattern="*.csv")
ddives <- lapply(temp, read.csv) 
```

所以“ddives”是我的一组 csv 文件。我现在想使用循环版本的代码从其中的每一个中创建一个数据框：

```
d.dives1<- data.frame(ddives[1]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:01:54.347

在我回答您的问题之前，先快速了解一下术语：

1.  结果`read.csv()`是一个`data.frame`。
2.  结果`lapply()`是一个`list`。

因此，您现在有一个数据框列表。

**如果**您可以安全地假设列表中的数据框具有相同的结构（即相同的列数和相同的类），那么您可以使用`rbind()`将您的数据框列表组合成一个`data.frame`.

为了使这更容易，您可以使用`do.call()`如下：

```
do.call(rbind, ddives) 
```

`do.call`使用列表元素作为参数从函数构造调用。如果它们被命名，它们将作为命名参数传递，否则按顺序传递（与 R 中一样）。在这种情况下，您将应用于`rbind`列表中的所有元素，从而创建一个`data.frame`.

* * *

这显然是未经测试的，因为我没有你的数据。但是，一般来说，`do.call`对于这种类型的操作来说，这是一个有用的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:06:05.890

由于这是您之前发布的问题的后续，请尝试以下操作：

```
for (i in 1:length(ddives)) assign(temp[i], ddives[[i]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:15:37.990

如果您真的想要代码的循环版本，这将是：

```
for (i in 1:length(ddives)){
  assign(paste("d.dives", i, sep =""), ddives[i])
} 
```

# c# - ASP.Net 快速按钮单击以在 UpdatePanel 中添加控件会产生并发问题

> ID：11436573
> 
> 赞同：2
> 
> 时间：2012-07-11T15:53:33.960
> 
> 标签：c#, asp.net, updatepanel

当我单击按钮并将控件添加到 UpdatePanel 内的占位符时，一切都很好，除非我非常快速地单击几次然后收到如下错误消息：

```
'Sys.WebForms.PageRequestManagerServerErrorException: Sys.WebForms.PageRequestManagerServerErrorException: Multiple controls with the same ID 'VehicleRegistrationEnhancedTextBox3_Label' were found. FindControl requires that controls have unique IDs.' when calling method: [nsIDOMEventListener::handleEvent]
[Break On This Error] 
```

我在隐藏字段中保存了一个整数，以创建唯一的 Id，当我点击非常快时，该方法执行了几次，但计数值尚未更新。我尝试使用 C# lock 关键字，但什么也没做。

代码如下：

```
protected void AddVehicleButton_Click(object sender, EventArgs e)
        {
            lock (this)
            {
                int count = Convert.ToInt32(VehicleRegistrationCountHiddenField.Value);

                var TBId = "VehicleRegistrationEnhancedTextBox" + count;
                IList<Panel> oldPanels = (IList<Panel>)Session["VehiclePanels"] ?? new List<Panel>();

                //Seperator
                Literal hr = new Literal { Text = "<hr/>" };

                //RemoveSpan
                Literal span = new Literal() { Text = "<span class=\"RemoveVehicleRegistration\">X</span>" };

                //Crop
                Control uc = LoadControl("~/Controls/ImageUploadAndCrop/ImageUploadAndCrop.ascx");
                uc.ID = "VehicleRegistrationImageUploadAndCrop" + count;

                //Vehicle Registration
                Label vehicleRegistration = new Label
                {
                    ID = TBId + "_Label",
                    AssociatedControlID = TBId,
                    Text = "Vehicle Registration:"
                };
                EnhancedTextBox vehicleTypeTextBox = new EnhancedTextBox
                {
                    ID = TBId,
                    Required = true,
                    RequiredErrorText = "Vehicle Registration is a required field."
                };

                //Add new controls to the form
                Panel newPanel = new Panel();

                newPanel.Controls.Add(hr);
                newPanel.Controls.Add(span);
                newPanel.Controls.Add(vehicleRegistration);
                newPanel.Controls.Add(uc);
                newPanel.Controls.Add(vehicleTypeTextBox);

                AddVehiclePlaceholder.Controls.Add(newPanel);

                //Increment the ID count
                count++;
                VehicleRegistrationCountHiddenField.Value = count.ToString();

                //Save the panel to the Session.
                oldPanels.Add(newPanel);
                Session["VehiclePanels"] = oldPanels;

                //Go back to the same wizard step.
                ShowStep2HiddenField.Value = "true";
                ShowStep3HiddenField.Value = "false";
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:56:26.027

问题是你用相同的请求踢了几个回发，然后最后一个响应是更新你的更新面板 div，导致你的问题。一种可能的解决方案是包含一些 javascript 以禁用单击按钮。

```
<asp:Button ID="myUpdatePanelPostBackButton" runat="server" OnClientClick="this.disabled=true; return true;" Text="Submit" /> 
```

假设您的按钮位于 UpdatePanel 中，当更新面板返回时，该按钮将重新启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:33:05.690

禁用按钮不会导致回发。因此，如果您只禁用 OnClientClick 中的按钮，则不会发生 PostBack。

Try `UseSubmitBehavior="false"`，它的意思是“无论如何都会导致回发”。

```
<asp:Button runat="server" ID="BtnSubmit" 
OnClientClick="this.disabled = true; this.value = 'Submitting...';" 
UseSubmitBehavior="false" 
OnClick="BtnSubmit_Click" 
Text="Submit Me!" /> 
```

参考这个博客，它对你有用。 [http://encosia.com/disable-a-button-control-during-postback/](http://encosia.com/disable-a-button-control-during-postback/)

# html - Flash 播放器覆盖绝对定位元素

> ID：11436579
> 
> 赞同：0
> 
> 时间：2012-07-11T15:53:44.667
> 
> 标签：html, css, flash, actionscript

flash 播放器覆盖了 div 绝对定位元素，我已将他的索引设置为 100-200-300，但它并没有改变任何东西，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:00:22.193

这可能有效：

```
<param name="wmode" value="opaque" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:04:16.897

您可以更改影响 Flash 在主机应用程序中绘图 的[wmode 属性。](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_)

更新：如果您希望在 Flash 之上制作 DIV，除了设置 Flash 的 wmode 之外，您还可以使用 jQuery 的 bgiframe 插件，它将您的 DIV 包装到 iframe 中。IFrame 通常会更好地覆盖在其他元素（如 Flash 和下拉列表）之上。

# asp.net - 多个数据库上的 LINQ to SQL - 故障转移合作伙伴？

> ID：11436580
> 
> 赞同：0
> 
> 时间：2012-07-11T15:53:47.027
> 
> 标签：asp.net, linq-to-sql

我有一个使用 LINQ to SQL 设置多个数据库的 ASP.NET 站点（通过更改其他/“辅助”服务器上的表的源）。[如此处](https://stackoverflow.com/questions/352949/linq-across-multiple-databases)所见。

如何为此设置故障转移合作伙伴？我在连接字符串中设置了它，但是我必须用服务器名称对 Source 进行硬编码，所以这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:15:45.127

我能找到/想出的最好方法是创建两个[LINQ External Mappings](http://msdn.microsoft.com/en-us/library/bb386907%28v=vs.100%29.aspx)。在启动时，我检查主服务器是否正在使用主映射运行。如果不是，我将连接设置为使用具有故障转移数据库的第二个 LINQ 映射：

```
var xmlPath = @"C:\myAppFailOver.map";
System.Data.Linq.Mapping.XmlMappingSource linqMapping = System.Data.Linq.Mapping.XmlMappingSource.FromReader(System.Xml.XmlReader.Create(xmlPath));
using (DataClassesDataContext db = new DataClassesDataContext(connString, linqMapping))
{
    //code
} 
```

# ios - 将视图从横向旋转到纵向

> ID：11436581
> 
> 赞同：0
> 
> 时间：2012-07-11T15:53:48.620
> 
> 标签：ios, uiview, rotation

我有一个视图 A 和一个视图控制器 B，当视图 A 退出时（设备处于横向，视图 A 覆盖在 B 上），我想将 B 转换为纵向（设备保持在横向，所以 B 在转换之前应该处于横向，但是我已经修复了B的框架，所以如果B出现在风景中，屏幕的一部分应该是黑暗的并且不负责任）。但是我在屏幕底部得到一个不负责任的黑色区域。视图 B 在此屏幕的一个较小窗口中显示，我可以滚动它。我的转换代码为：

```
 CGFloat r = 1.5 * M_PI;
    CGAffineTransform t;
    t = CGAffineTransformMakeRotation( r );
    UIApplication *application = [ UIApplication sharedApplication ];
   self.view.frame = frame;
   self.view.center = CGPointMake(frame.origin.x + ceil(frame.size.width/2), frame.origin.y + ceil(frame.size.height/2));
self.view.bounds = [[ UIScreen mainScreen ] bounds ];
    t = CGAffineTransformTranslate(t, 130, 105);
    [self.view setTransform:t];

    [ application setStatusBarOrientation: UIDeviceOrientationPortrait animated: YES ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:24:40.550

你的代码有点奇怪，我想这不是你的代码源的复制/粘贴：你用 double 初始化 t 而它的 CGAffineTransform r 没有声明 frame 没有声明

对于您的问题，不同点：如果在 UIScreen 的视图边界上应用转换包含 statusBar 的 20 点高度，请不要使用 UIView 的 frame 属性，而是使用 UIScreen 的 applicationFrame 方法为什么要设置中心然后应用翻译 ？

如果您的 viewController 是您的 rootViewController （因此它的视图是窗口的直接子视图），您可以尝试以下操作：

```
[self.view setTransform:CGAffineTransformIdentity];
[self.view setCenter:CGPointMake(160, 240)];
[self.view setBounds:CGRectMake(0, 0, 320, 460)]; 
```

如果您的 viewController 不是您的 rootViewController，您确实必须设置旋转，但中心取决于超级视图边界

# html - 将导航转换为垂直

> ID：11436582
> 
> 赞同：2
> 
> 时间：2012-07-11T15:53:49.790
> 
> 标签：html, css, asp.net-mvc-2

我只是测试一个 ASP.MVC 2 项目。请看图片。 ![图片](../Images/64b5ccf8bb03e411ebf3043c073ba935.png)

相关的CSS：

```
/* TAB MENU   
----------------------------------------------------------*/
ul#menu
{
    border-bottom: 1px #5C87B2 solid;
    padding: 0 0 2px;

    margin: 0;
    text-align: right;
}

ul#menu li
{

   list-style: none;

 }

 ul#menu li a
{
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #034af3;
}

 ul#menu li a:hover
 {
    background-color: #fff;
    text-decoration: none;
  }

  ul#menu li a:active
  {
    background-color: #a6e2a6;
    text-decoration: none;
  }

  ul#menu li.selected a
  {
     background-color: #fff;
    color: #000;
   } 
```

我想将它从水平转换为垂直，我尝试的是删除每个块并测试但没有幸运。

的HTML：

```
<body>
<div class="page">

    <div id="header">

        <div id="logindisplay">
            <% Html.RenderPartial("LogOnUserControl"); %>
        </div> 

        <div id="menucontainer">

            <ul id="menu">              
                <li><%: Html.ActionLink("Home", "Index", "Home")%></li>
                <li><%: Html.ActionLink("About", "About", "Home")%></li>
            </ul>
         <div id="title">
            <h1>WSTEST</h1>
        </div>
        </div>
    </div>

    <div id="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />

        <div id="footer">
        </div>
    </div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:11:59.700

尝试这个：

```
ul#menu li {
    display: block;
    list-style: none;
} 
```

原来是`display: inline`这样，改成就可以`display: block;`了

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:59:03.813

尝试删除 text-align:right;

我很惊讶您的代码中没有任何内容告诉 LI 元素它们是浮动的，因为这是创建水平菜单的正常方式。

我怀疑可能有一个 float:left 被添加到其他地方的 LI 元素中。

# freeze - 保存工作区时 MATLAB 挂起

> ID：11436583
> 
> 赞同：1
> 
> 时间：2012-07-11T15:53:50.627
> 
> 标签：freeze, matlab

我正在使用具有双屏设置的 MATLAB R2012a，因此我在一个屏幕上有命令窗口，在另一个屏幕上有 M 文件编辑器。有时当我对源代码进行更改时，我会在命令窗口（而不是编辑器）处于焦点时意外按下 Ctrl+S。这将加载一个文件选择器对话框，用于保存工作区的 MAT 文件。但是，无论我按“取消”还是“确定”，MATLAB 都会无限期挂起。有什么办法可以让保存工作区不会失败吗？

我并不真正关心能够保存工作区，我只需要它工作，这样 MATLAB 就不会在我不小心尝试时挂起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:11:05.557

作为临时修复，您可以取消定义`Ctrl+S`快捷方式以从设置中保存工作区。

前往`File > Preferences > Keyboard > shortcuts`：

![截屏](../Images/172001012ac0ef20486a14cf605589a8.png)

# iphone - UISwitch 设置为 ON 并且它不显示模态视图控制器转换

> ID：11436584
> 
> 赞同：0
> 
> 时间：2012-07-11T15:53:51.367
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, nsuserdefaults

我使用 NSUserDefaults 为我的 iPhone 应用程序创建了一个自定义 UISwitch，并添加了一个模式视图控制器 (PincodeSetupViewController) 用于设置 Pincode。以下是用户将看到的信息：

1.  当用户第一次在 mainViewController 上单击启动应用程序时，显示 UISwitch 已设置为 OFF，因为用户没有设置 Pincode。那是对的。

2.  下一步是当用户决定将开关打开时，它必须立即显示模态视图控制器 (PincodeSetupViewController)。它从下到上滑动。那是对的。

3.  现在用户关闭了应用程序并再次打开它。它显示开关已设置为 ON，因为用户这样做是为了设置 Pincode。那是对的。

4.  用户决定关闭开关并重新打开。当开关再次设置为 ON 时，它会立即显示模态视图控制器 (PincodeSetupViewController)。**我在这里遇到的问题是模态视图控制器不会从下到上转换幻灯片，它只是突然出现。这是不正确的。**我希望该模态视图控制器将幻灯片从底部过渡到顶部，而不是突然过渡。

有人知道它有什么问题吗？任何建议表示赞赏。

主视图控制器.m：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    customSwitch = [[RCSwitchOnOff alloc] initWithFrame:CGRectMake(1.0, 0.0, 74, 40)];  
    [customSwitchView addSubview:customSwitch];
    [customSwitch addTarget:self action:@selector(togglePincode:) forControlEvents:UIControlEventValueChanged];

} 
```

* * *

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"pincode"]) {
         NSLog(@"SWITCH MESSAGE: ON");
         [customSwitch setOn:YES];

    } else {
         NSLog(@"SWITCH MESSAGE: OFF");
         [customSwitch setOn:NO];
    }
} 
```

* * *

```
- (void)togglePincode:(UISwitch *)sender {

    if(sender.on){
         NSLog(@"Switch is ON");

         NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
         [userDefaults setBool:YES forKey:@"pincode"];
         [userDefaults synchronize];

         //Check to see if the user already setup the Pincode or not.
         if ([[NSUserDefaults standardUserDefaults] boolForKey:@"setupdone_status"]) {
               NSLog(@"Display Pincode Setup");

               [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"setupdone_status"];

               UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
               UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"PincodeSetupViewController"];
               [vc setModalPresentationStyle:UIModalPresentationFullScreen];

               [self presentModalViewController:vc animated:YES]; 

         } else {
               NSLog(@"No Pincode Setup");
         }

    } else {
         NSLog(@"Switch is OFF");
         NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
         [userDefaults setBool:NO forKey:@"pincode"];
         [userDefaults setBool:YES forKey:@"setupdone_status"];
         [userDefaults synchronize];
    }
} 
```

* * *

AppDelegate.m 我在 applicationDidEnterBackground 和 applicationWillTerminate 方法中添加了一些代码

```
 if ([[NSUserDefaults standardUserDefaults] boolForKey:@"pincode"]) {
         [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"setupdone_status"]; 

    } else {
         [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"setupdone_status"];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:02:59.263

我尽可能地重新创建了您的设置，并且没有出现错误。这是我使用的代码：

```
//  ViewController.h

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
- (IBAction)switchChange:(id)sender;
@property (nonatomic, retain) NSNumber *valueOfSwitchON;
@property (weak, nonatomic) IBOutlet UISwitch *theSwitch;

@end

//  ViewController.m

#import "ViewController.h"

@implementation ViewController
@synthesize valueOfSwitchON;
@synthesize theSwitch;

- (void)viewDidLoad
{
    [super viewDidLoad];
    valueOfSwitchON = [NSNumber numberWithBool:NO];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void) viewDidAppear:(BOOL)animated
{
    if ([valueOfSwitchON boolValue] == YES) [theSwitch setOn:YES];
    else [theSwitch setOn:NO];
}

- (void)viewDidUnload
{
    [self setTheSwitch:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (IBAction)switchChange:(id)sender 
{
    if ([self.valueOfSwitchON boolValue] == NO)
    {      
        [self performSegueWithIdentifier:@"modalSegue" sender:self];
        valueOfSwitchON = [NSNumber numberWithBool:YES];
    }
    else 
    {
        valueOfSwitchON = [NSNumber numberWithBool:NO];
    }
}
@end

//  ViewController2.h

#import <UIKit/UIKit.h>

@interface ViewController2 : UIViewController
- (IBAction)closething:(id)sender;

@end

//  ViewController2.m

#import "ViewController2.h"

@interface ViewController2 ()

@end

@implementation ViewController2

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)closething:(id)sender 
{
    [self dismissModalViewControllerAnimated:YES];
}
@end 
```

故事板： ![在此处输入图像描述](../Images/e94fc81f1efef4d4a7fd8e1874b38dbc.png)

我希望这会有所帮助（请注意，我只是在 IB 中设置了很多您以编程方式创建的东西）

# javascript - 如果 URL 包含单词，则隐藏 div

> ID：11436586
> 
> 赞同：5
> 
> 时间：2012-07-11T15:53:54.750
> 
> 标签：javascript, jquery, url, hide, contains

如果页面的 url 包含某个单词，我需要隐藏一个 div。感谢这个网站，我已经能够成功地找到网址是否包含这个词。此代码有效：

```
<script type="text/javascript">
if (window.location.href.indexOf("Bar-Ends") != -1) {
alert("your url contains bar ends");
}
</script> 
```

但由于某种原因，隐藏 div 不起作用，如下所示：

```
<script type="text/javascript">
if (window.location.href.indexOf("Bar-Ends") != -1) {
$("#notBarEnds").hide();
}
</script>

<div id="notBarEnds">this is not bar ends</div> 
```

有人知道这段代码有什么问题吗？非常感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T15:55:35.560

注意重新排序：

```
<div id="notBarEnds">this is not bar ends</div>

<script type="text/javascript">
if (window.location.href.indexOf("Bar-Ends") != -1) {
$("#notBarEnds").hide();
}
</script> 
```

或者

```
<script type="text/javascript">
$(document).ready(function () {
    if (window.location.href.indexOf("Bar-Ends") != -1) {
        $("#notBarEnds").hide();
    }
}
</script> 
```

等待整个文档“准备好”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:56:29.210

尝试：

```
$(document).ready(function () {
  if (window.location.href.indexOf("Bar-Ends") != -1) {
    $("#notBarEnds").hide();
  }
}); 
```

脚本运行时，您的 div 不一定已加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:57:09.243

您在构建 HTML 时正在运行内联脚本，在脚本运行时没有`div`命名`#notBarEnds`，您需要在文档加载后将其作为函数运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:58:31.590

我写它而不检查它，如果不起作用，请更改正则表达式：D

```
$(document).on('ready', function()
{
    if(window.location.href.match(/Bar\-Ends/i))
        $("#notBarEnds").hide();
}); 
```

# opengl - Opengl中的模板缓冲区

> ID：11436588
> 
> 赞同：0
> 
> 时间：2012-07-11T15:53:57.523
> 
> 标签：opengl, stencil-buffer, video-card

OpenGL 红皮书中的模板测试说：

> 仅当有模板缓冲区时才会进行模板测试。

我怎样才能知道我的 OpenGL / 显卡实现中是否有模板缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:00:55.150

所有现代显卡都会有一个模板缓冲区，红皮书指的是当前是否启用了模板测试（使用`glEnable(GL_STENCIL_TEST)`and `glDisable(GL_STENCIL_TEST)`）。

# php - Preg_match_all 和复杂的文本匹配正则表达式

> ID：11436590
> 
> 赞同：0
> 
> 时间：2012-07-11T15:54:04.590
> 
> 标签：php, regex, preg-match-all

例如我有来自这里的数据响应：http: [//www.facebook.com/ajax/shares/view/?target_fbid=410558838979218 &__a=1](http://www.facebook.com/ajax/shares/view/?target_fbid=410558838979218&__a=1)

有一个看起来像这样的模式：

`data-hovercard=\"\/ajax\/hovercard\/hovercard.php?id=655581307\">`

我如何用 PHP 中的 preg_match_all() 解析它？我知道我需要复杂的正则表达式，但我不知道如何为文本中的这种模式编写一个。感谢帮助

UPD：以下代码确实给出了 id：

```
$str = 'hovercard.php?id=655581307';
preg_match_all('/[0-9]{9}/', $str , $matches);
print_r($matches); 
```

但

这个没有

```
$url = 'http://www.facebook.com/ajax/shares/view/?target_fbid=410558838979218&__a=1';
$html = file_get_contents($url);
preg_match_all('/[0-9]{9}/', $html, $matches);
print_r($matches); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:12:59.917

由于反斜杠转义了东西，这有点混乱，但是要完全匹配该字符串，这个对 preg_match_all() 的调用应该可以工作：

```
preg_match_all('#(data-hovercard=\\\\"\\\\/ajax\\\\/hovercard\\\\/hovercard.php\?id=[0-9]+\\\\">)#', $str, $matches); 
```

这将为您提供您在 $matches 中发布的整个字符串。但是，如果您只想要 id 中的数字，您可以在其周围添加额外的括号，如下所示：

```
preg_match_all('#(data-hovercard=\\\\"\\\\/ajax\\\\/hovercard\\\\/hovercard.php\?id=([0-9]+)\\\\">)#', $str, $matches); 
```

并且数字将单独出现在 $matches 中（类似地，您可以删除包装整个正则表达式的括号以停止匹配整个字符串）。

**更新：**

现在我看到问题已更新。如果您的新示例失败，那是因为您获得的数据中没有 9 位数字序列。当我尝试自己时，我只是得到一个回复​​说我需要登录，所以也许你的匹配问题实际上是由于你没有得到你期望的数据？尝试转储 $html 以查看您要查找的内容是否确实存在。

# stored-procedures - 用 SP 插入多值

> ID：11436593
> 
> 赞同：0
> 
> 时间：2012-07-11T15:54:14.223
> 
> 标签：stored-procedures, sql-server-2008-r2

我有两张桌子。

1-学生表和2-分数表

我想在学生表中插入值并在带有 SP 的分数表中插入多个值到 SQL Server 2008。

对于 EX：

```
ALTER proc [dbo].[InsertIntoScore]
(
@DateReg datetime,
@stdLastName nvarchar(50),
@stdFirstName nvarchar(50),
@Description nvarchar(500),

multi value as score table...
)
AS
DECLARE @Id AS INT
BEGIN TRY
BEGIN TRANSACTION
    INSERT INTO Student(DateReg,stdLastName,stdFirstName,[Description])
    VALUES (@DateReg,@stdLastName,@stdFirstName,@Description)
set @Id = SCOPE_IDENTITY() 

    insert multi value at Score table...    
COMMIT
END TRY
BEGIN CATCH
IF @@TRANCOUNT > 0
    ROLLBACK
END CATCH 
```

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:01:06.273

您应该使用[表值参数](http://msdn.microsoft.com/en-us/library/bb675163%28v=vs.100%29.aspx)

为您将传入的表创建一个 Sql 类型

```
CREATE TYPE dbo.ScoreType AS TABLE ( ScoreID int, StudentID int, etc.... ) 
```

使用上面定义的类型将数据表从 C# 代码传递到存储过程

```
ALTER proc [dbo].[InsertIntoScore] 
( @DateReg datetime, @stdLastName nvarchar(50), @stdFirstName nvarchar(50), 
@Description nvarchar(500),  @tvpScore ScoreType) 
AS 
   .....
   INSERT INTO dbo.Score (ScoreID, StudentID, ....)     
   SELECT dt.ScoreID, @id, .... FROM @tvpScore AS dt; 
```

在c#中以这种方式传递数据表

```
SqlCommand insertCommand = new SqlCommand("InsertIntoScore", sqlConnection); 
SqlParameter p1 = insertCommand.Parameters.AddWithValue("@tvpScore", dtScore); 
p1.SqlDbType = SqlDbType.Structured; 
p1.TypeName = "dbo.ScoreType"; 
.....
insertCommand.ExecuteNonQuery(); 
```

# mysql - 如何修复双编码 UTF8 字符（在 utf-8 表中）

> ID：11436594
> 
> 赞同：61
> 
> 时间：2012-07-11T15:54:17.933
> 
> 标签：mysql, string, utf-8, character-encoding

前一个是在 CSV 文件是-encoded`LOAD DATA INFILE`的假设下运行的。`latin1`在此导入期间，多字节字符被解释为两个单个字符，然后使用 utf-8（再次）进行编码。

这种双重编码会产生异常，例如`ÃƒÂ±`而不是`ñ`.

如何更正这些字符串？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-11T15:56:26.280

以下 MySQL 函数将在双重编码后返回正确的 utf8 字符串：

```
CONVERT(CAST(CONVERT(field USING latin1) AS BINARY) USING utf8) 
```

它可以与`UPDATE`语句一起使用来更正字段：

```
UPDATE tablename SET
    field = CONVERT(CAST(CONVERT(field USING latin1) AS BINARY) USING utf8); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-10T15:12:35.870

上面的答案适用于我的一些数据，但运行后导致很多 NULL 列。我的想法是，如果转换不成功，它会返回 null。为了避免这种情况，我加了一张小支票。

```
UPDATE
    tbl

SET
    col =
    CASE
        WHEN CONVERT(CAST(CONVERT(col USING latin1) AS BINARY) USING utf8) IS NULL THEN col
        ELSE CONVERT(CAST(CONVERT(col USING latin1) AS BINARY) USING utf8)
    END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-16T09:58:40.143

我也遇到了这个问题，这里是 Oracle 的解决方案：

```
update tablename t set t.colname = convert(t.colname, 'WE8ISO8859P1', 'UTF8') where t.colname like '%Ã%' 
```

另一个用于 Java：

```
public static String fixDoubleEncoded(String text) {
    final Pattern pattern = Pattern.compile("^.*Ã[^0-9a-zA-Z\\ \t].*$");
    try {
        while (pattern.matcher(text).matches())
            text = new String(text.getBytes("iso-8859-1"), "utf-8");
    }
    catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
    return text;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-05T09:22:07.170

那么使用“utf8mb4”而不是“utf8”非常重要，因为mysql会在一个无法识别的字符之后删除所有数据。所以更安全的方法是；

```
UPDATE tablename SET
field = CONVERT(CAST(CONVERT(field USING latin1) AS BINARY) USING utf8mb4); 
```

小心这个。

# c++ - WinRT/Metro 风格应用程序中基于 ATL 的 COM 对象

> ID：11436595
> 
> 赞同：4
> 
> 时间：2012-07-11T15:54:17.993
> 
> 标签：c++, com, microsoft-metro, windows-runtime, atl

**场景：**
我正在尝试将 C++ 应用程序迁移到 WinRT/Metro 样式。此应用程序使用 ATL/COM 对象，该对象通过使用 IDispatchImpl 类来实现 IDispatch 接口[，](http://msdn.microsoft.com/en-us/library/494h01te%28v=vs.110%29.aspx)但是，根据 MSDN，IDispatchImpl 不适用于 Metro Style 应用程序。

我的 ATL/COM 类如下所示：

```
class MyATLClass :
    public IDispatchImpl<IMyDispInterface, &IID_IMyDispInterface, &LIBID_MYLIB, 1, 0>, 
    public CComObjectRoot,
    public CComCoClass<MyATLClass,&CLSID_MyATLClass>
{
    ...
} 
```

**问题：**
在 WinRT 中是否有 IDispatchImpl 的替代品？

例如，替换可能涉及从不同的类派生并丢弃我的 IDL 文件。我的最终目标只是能够在 MyATLClass 的实例上执行 QueryInterface 并通过 IMyDispInterface 获得引用。我还可以将我的所有文件（库和应用程序）包含在一个项目中，但如果可能的话，我确实希望避免更改使用 IMyDispInterface 引用的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:49:45.997

在这种情况下，将我的 COM/ATL 类重新实现为基于 WRL 的组件可能是最佳选择（感谢 Larry）。这些视频帖子提供了更多信息：

[将桌面应用程序移植到 Metro 风格应用程序](http://channel9.msdn.com/Events/Windows-Camp/Developing-Windows-8-Metro-style-apps-in-Cpp/Porting-a-desktop-app-to-a-Metro-style-app)

[Windows 运行时库 (WRL)](http://channel9.msdn.com/Events/Windows-Camp/Developing-Windows-8-Metro-style-apps-in-Cpp/The-Windows-Runtime-Library-WRL-)

# jsf-2 - 使用 Prime Faces 3.3.1 向导

> ID：11436596
> 
> 赞同：1
> 
> 时间：2012-07-11T15:54:27.037
> 
> 标签：jsf-2, primefaces

这是我第一次将 Prime 3.3.1 与 JSF 2.1 一起使用。我拥有所有主要面孔所需的罐子，我正在使用他们网站[https://www.primefaces.org/showcase/ui/panel/wizard.xhtml](https://www.primefaces.org/showcase/ui/panel/wizard.xhtml)中的向导。

这是我的代码：

**向导.xml：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui"
    lang="en" xml:lang="en" style="padding-bottom: 8px;">

    <h:form>

        <p:growl id="growl" sticky="true" showDetail="true" />

        <p:wizard widgetVar="wiz" flowListener="#{userWizard.onFlowProcess}">

            <p:tab id="personal" title="Personal">

                <p:panel header="Personal Details">

                    <h:messages errorClass="error" />

                    <h:panelGrid columns="2" columnClasses="label, value" styleClass="grid">
                        <h:outputText value="Firstname: *" />
                        <p:inputText required="true" label="Firstname" value="#{userWizard.user.firstname}" />

                        <h:outputText value="Lastname: *" />
                        <p:inputText required="true" label="Lastname" value="#{userWizard.user.lastname}" />

                        <h:outputText value="Age: " />
                        <p:inputText value="#{userWizard.user.age}" />

                        <h:outputText value="Skip to last: " />
                        <h:selectBooleanCheckbox value="#{userWizard.skip}" />
                    </h:panelGrid>
                </p:panel>
            </p:tab>

            <p:tab id="address" title="Address">
                <p:panel header="Adress Details">

                    <h:messages errorClass="error" />

                    <h:panelGrid columns="2" columnClasses="label, value">
                        <h:outputText value="Street: " />
                        <p:inputText value="#{userWizard.user.street}" />

                        <h:outputText value="Postal Code: " />
                        <p:inputText value="#{userWizard.user.postalCode}" />

                        <h:outputText value="City: " />
                        <p:inputText value="#{userWizard.user.city}" />

                        <h:outputText value="Skip to last: " />
                        <h:selectBooleanCheckbox value="#{userWizard.skip}" />
                    </h:panelGrid>
                </p:panel>
            </p:tab>

            <p:tab id="contact" title="Contact">
                <p:panel header="Contact Information">

                    <h:messages errorClass="error" />

                    <h:panelGrid columns="2" columnClasses="label, value">
                        <h:outputText value="Email: *" />
                        <p:inputText required="true" label="Email" value="#{userWizard.user.email}" />

                        <h:outputText value="Phone: " />
                        <p:inputText value="#{userWizard.user.phone}" />

                        <h:outputText value="Additional Info: " />
                        <p:inputText value="#{userWizard.user.info}" />
                    </h:panelGrid>
                </p:panel>
            </p:tab>

            <p:tab id="confirm" title="Confirmation">
                <p:panel header="Confirmation">

                    <h:panelGrid id="confirmation" columns="6">
                        <h:outputText value="Firstname: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.firstname}" />

                        <h:outputText value="Lastname: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.lastname}" />

                        <h:outputText value="Age: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.age}" />>  

                    <h:outputText value="Street: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.street}" />

                        <h:outputText value="Postal Code: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.postalCode}" />

                        <h:outputText value="City: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.city}" />

                        <h:outputText value="Email: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.email}" />

                        <h:outputText value="Phone " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.phone}" />

                        <h:outputText value="Info: " />
                        <h:outputText styleClass="outputLabel" value="#{userWizard.user.info}" />

                        <h:outputText />
                        <h:outputText />
                    </h:panelGrid>

                    <p:commandButton value="Submit" update="growl" actionListener="#{userWizard.save}" />

                </p:panel>
            </p:tab>

        </p:wizard>

    </h:form>

</div> 
```

**用户向导.java：**

```
package com.verisign.vcc.program.marketing.mbean;

import javax.faces.event.ActionEvent;

import org.primefaces.event.FlowEvent;

public class UserWizard
{
    private boolean skip;

    public void save(ActionEvent actionEvent)
    {
        // Persist user
    }

    public boolean isSkip()
    {
        return skip;
    }

    public void setSkip(boolean skip)
    {
        this.skip = skip;
    }

    public String onFlowProcess(FlowEvent event)
    {
        if (skip)
        {
            skip = false; // reset in case user goes back
            return "confirm";
        }
        else
        {
            return event.getNewStep();
        }
    }
} 
```

当我访问wizard.xhtml 时，我得到的向导没有样式。

![向导.xhtml](../Images/f4844fc9f8157c7f2a4757a52f213f83.png)

但这是 Prime Faces 网站上的情况：

![Prime Faces 网站wizard.xhtml](../Images/e89de3076e4ca1e6fdfa76c1cde82576.png)

你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:07:16.483

问题是您使用了无效的 Facelets 标记。您不应该使用普通的 html div 标签并在其中粘贴命名空间声明。

为此，您应该使用以包含和标签开头的页面或`html`用于模板。`h:head``h:body``ui:composition`

在下面的示例中，将正确添加 JSF 资源和 PrimeFaces 主题。

*   XHTML 页面

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:p="http://primefaces.org/ui"
          xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head>
    </h:head>

    <h:body>
    <!-- your code here -->
    </h:body>

    </html> 
    ```

我希望它有所帮助。

# spring - 单元测试 Spring @Around AOP 方法

> ID：11436600
> 
> 赞同：44
> 
> 时间：2012-07-11T15:54:35.910
> 
> 标签：spring, aop, aspectj

我可以对我的大部分 Spring 类进行单元测试，而无需执行 Spring “东西”。

我也可以在不使用 Spring 的情况下对 @Before 建议方法进行单元测试：

示例代码：

```
@Before("execution(* run(..)) && " + "" +
          "target(target) && " +
        "args(name)")
public void logName(Object target, String name) {
    logger.info("{} - run: {}", target, name);
} 
```

示例测试：

```
@Test
public void testLogName() {
    aspect.setLogger(mockLogger);
    aspect.logName(this,"Barry");
    assertTrue(mockLogger.hasLogged("TestAspect - run: Barry"));
} 
```

但是 @Around 建议处理 ProceedingJoinPoint 对象：

```
@Around("com.xyz.myapp.SystemArchitecture.businessService()")
public Object doBasicProfiling(ProceedingJoinPoint pjp) throws Throwable {
   // start stopwatch
   Object retVal = pjp.proceed();
   // stop stopwatch
   return retVal;
 } 
```

我不知道如何实例化 ProceedingJoinPoint 对象。如何在不启动整个 Spring 应用程序上下文的情况下测试此类？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-07-11T15:54:36.473

您可以通过以编程方式创建代理来测试 Spring Aspect：

```
MyInterface target = new MyClass();
AspectJProxyFactory factory = new AspectJProxyFactory(target);
MyAspect aspect = new MyAspect(arg);
factory.addAspect(aspect);
MyInterface proxy = factory.getProxy(); 
```

...然后您可以在 上调用方法，并对和`proxy`进行断言。`aspect``proxy``target`

# python - Python regex .match 无法匹配通过子进程从 C++ 进程返回的字符串

> ID：11436605
> 
> 赞同：0
> 
> 时间：2012-07-11T15:54:47.637
> 
> 标签：python, regex, subprocess

包含相关数据的字符串通过 Popen 函数和标准输出从子进程发送。

```
 run = subprocess.Popen('evo -x "' + folder+filename+'"', stdout = subprocess.PIPE, stderr = subprocess.PIPE, env={'LANG':'C++'})
 data, error = run.communicate() 
```

打印相关信息的字符串如下所示：

```
printf "height= %.15f \ntilt = %.15f (%.15f)\ncen_volume= %.15f\nr_volume= %.15f\n", height, abs(sin(tilt*pi/180)*ring_OR), abs(tilt), c_vol, r_vol; 
```

并输出到控制台`print data`（在标准输出中还有一些额外的东西）：

```
Evolver 2.40, May 8, 2072; Windows OpenGL, 32-bit

Converting to all named quantities...Done.
Enter command: QUIET
height=    0.000211813357854 
tilt=0.0 (0.0)
cen_volume= 0.000000000600000
r_volume= 0.000000003000000
bad 
```

我将它与：

```
dat = re.match("[\s]*height\s*=\s*([-]?[\.\d]*)[\s]*tilt\s*=\s*([-]?[\.\d]*)[\s]*\(([\s]*[-]?[\.\d]*)\)[\s]*cen_volume\s*=\s*([-]?[\.\d]*)[\s]*r_volume\s*=\s*([-]?[\.\d]*)[\s]*", data) 
```

但是，这将返回“无”。这个完全相同的 .match 用于在从 txt 文件而不是 stdout 读取后匹配完全相同信息的程序中，并且在这种情况下可以完美运行。当通过通信检索字符串时，处理字符串的方式是否存在异常，或者添加了一些不寻常的额外不可见字符？请注意， .findall 非常适合匹配`re.findall("[\s]*(bad)[\s]*", data)`，但即使尝试仅匹配一行与 .match 仍然失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:06:55.803

两个问题：

1.  使用`re.search`as`re.match`将要求字符串从第一个字符开始匹配
2.  为您想要的多行搜索类型添加`re.MULTILINE`和标记`re.DOTALL`

尝试：

```
>>> re.search("[\s]*height\s*=\s*([-]?[\.\d]*)[\s]*tilt\s*=\s*([-]?[\.\d]*)[\s]*\(([\s]*[-]?[\.\d]*)\)[\s]*cen_volume\s*=\s*([-]?[\.\d]*)[\s]*r_volume\s*=\s*([-]?[\.\d]*)[\s]*", v,re.MULTILINE|re.DOTALL).groups()
('0.000211813357854', '0.0', '0.0', '0.000000000600000', '0.000000003000000') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:32:54.323

在这种情况下使用 findall 可能更简单：

```
from pprint import pprint
pprint(dict(re.findall(r"(height|tilt|cen_volume|r_volume)\s*=\s*(.*\S)", data))) 
```

### 输出

```
{'cen_volume': '0.000000000600000',
 'height': '0.000211813357854',
 'r_volume': '0.000000003000000',
 'tilt': '0.0 (0.0)'} 
```

# asp.net - 为什么我的asp登录标签中的第一个字符是斜体？

> ID：11436610
> 
> 赞同：10
> 
> 时间：2012-07-11T15:54:58.753
> 
> 标签：asp.net, .net, italics

我无法弄清楚为什么我的 asp 登录表单上所有标签的第一个字符都以斜体显示：

![在此处输入图像描述](../Images/4537f27125797150d0a6f3b92fe773b8.png)

代码如下所示：

```
<asp:login DestinationPageUrl="blah.aspx" runat="server" usernamelabeltext="Email Address" ></asp:login> 
```

当我使用萤火虫检查它时，它显示第一个字符被包含在*标签，像这样：*

 *```
<label for="ctl00_ctl00_ctl00_ContentPlaceHolderDefault_wwContentArea_ctl03_UserName">
<em>E</em>
mail Address
</label>
...
<label for="ctl00_ctl00_ctl00_ContentPlaceHolderDefault_wwContentArea_ctl03_Password">
<em>P</em>
assword:
</label> 
```

有谁知道可能是什么原因造成的？我认为这可能与访问键有关（如果我按 alt+e 则它会聚焦到电子邮件文本框），但我不知道如何阻止它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T16:36:44.657

对我来说，这是因为我使用的是[CSS Friendly Control Adapters](http://cssfriendly.codeplex.com/)。由于我安装它们的主要动机是菜单控制适配器，因此我禁用了登录控制适配器。

*   打开 App_Browsers 文件夹中的 CSSFriendAdapters.browser。
*   注释掉 LoginAdapter，如下所示：

    ```
    <!--<adapter controlType="System.Web.UI.WebControls.Login" adapterType="CSSFriendly.LoginAdapter" />--> 
    ```

可能有一种方法可以在没有斜体的情况下获得 CSS 适配器的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:59:25.100

我无法回答它为什么这样做，但我已经设法解决了它。

代码行仍然如下：

```
<asp:login DestinationPageUrl="/schools/what-works/whatworkssearch.aspx" runat="server" usernamelabeltext="Email Address"></asp:login> 
```

这是控件在设计器视图中的样子：

![在此处输入图像描述](../Images/421260209cd01abeeb65dbbf48b6ce63.png)

虽然没有显示斜体，但正如我在问题中描述的那样，它是用斜体的第一个字符呈现的。为了解决这个问题，我将控件转换为模板，如下所示：

![在此处输入图像描述](../Images/8d6a56585bdf398ac39b002e23a7b451.png)

这创建了一个显示登录字段标签的模板，因此我可以删除斜体标签。

虽然这并不能解释为什么它对于单行代码的行为如此，但它显示了如何绕过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:23:19.547

您可能需要检查登录控件的**AccessKey**属性以及粘贴在登录部分中的各个控件，例如标签、文本框和按钮。通过删除 AccessKey 值应该可以解决问题。*

# vb.net - 将 Word 文档添加到 Word App 而不保存到文件系统

> ID：11436613
> 
> 赞同：0
> 
> 时间：2012-07-11T15:55:16.500
> 
> 标签：vb.net, ms-word

我正在尝试在 VB.NET 中动态创建 Word 文档，但我发现所有这些文档似乎都非常稀缺。现在我的程序通过循环遍历数据库表来工作，并且对于每一行它都提取变量。然后程序循环并解析一个模板word doc，用数据库中的变量替换该模板中的变量，然后保存为一个新的doc。

相反，对于我要创建的每个“新文档”，我只想将它附加到另一个文档中，这样当需要解析表中的 1000 行时，我不必创建和保存 1000 个不同的单词文件到文件系统。

我似乎找不到任何关于此的信息。一切都提到了合并文档（我实际上想追加，而不是合并）或者我可以追加（“插入”）文档的唯一方法是使用`WordApplication.Selection.InsertFile(newWordDocument.FullName)`. 这可行，但需要我`newWordDocument`在插入之前保存到文件系统。

有没有办法在内存中添加`newWordDocument`到我的`WordApplication`对象？

这是我现在拥有的伪代码

```
For each row in TableOfVariables
Dim WordApplication as New Word.Application
Dim tempDoc as New Word.Document
tempDoc = WordApplication.Documents.Add
tempDoc = fillVariablesOfTheDocument(tempDoc, row)
tempDoc.Save() 'This is the problem - it saves as a new file rather than appending into WordApplication
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:19:58.557

你没有做作业，只是一个声明

> objWordApp.Documents.Add(tempDoc) '这就是问题所在！

```
 Dim wordApp as new Microsoft.Office.Interop.Word.Application
 wordApp.Visible = true
 Dim doc as Word.Document
 doc = wordApp.Documents.Add 
```

在你准备好之前，你不必保存它。这也有效

```
 Dim Word As Word.Application
 Dim Doc As Word.Document
 'Start Word and open the document template.
 Word = CreateObject("Word.Application")
 Word.Visible = True
 Doc = Word.Documents.Add 
```

来自[http://support.microsoft.com/kb/316383](http://support.microsoft.com/kb/316383)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:27:39.793

花了一段时间，但不知何故我发现了`MailMerge`，我不知道存在。长话短说，我可以有一个带有变量的模板文档，也可以有一个输入的 excel 文档。excel 文档将有一个包含变量名称的标题行，并且 excel 文档的每个单独的单元格将代表将进入文档的变量。当我执行`MailMerge`时，模板将替换`n`为页数（其中`n`是 excel 行数）。这解决了我将多个文档添加到 1 个大 excel 文档的问题。我在我的 excel 文档中用 1,000 行对此进行了测试，它完美无缺。

这是我最终得到的代码：

```
 Dim wrdSelection As Word.Selection
        Dim wrdMailMerge As Word.MailMerge
        Dim wrdMergeFields As Word.MailMergeFields

        ' Create an instance of Word  and make it visible.
        wrdAppMailMrg = CreateObject("Word.Application")
        wrdAppMailMrg.Visible = True

        ' Add a new document.
        wrdDocMailMrg = wrdAppMailMrg.Documents.Open("Template.docx")
        wrdDocMailMrg.Select()

        wrdSelection = wrdAppMailMrg.Selection()
        wrdMailMerge = wrdDocMailMrg.MailMerge()

        'Open Data Source
        wrdDocMailMrg.MailMerge.OpenDataSource("InputVariables.xlsx", SQLStatement:="SELECT * FROM [Sheet1$]")

        ' Perform mail merge.
        wrdMailMerge.Destination = _
                   Word.WdMailMergeDestination.wdSendToNewDocument
        wrdMailMerge.Execute(False)

        ' Close the original form document.
        wrdDocMailMrg.Saved = True
        wrdDocMailMrg.Close(False)

        ' Release References.
        wrdSelection = Nothing
        wrdMailMerge = Nothing
        wrdMergeFields = Nothing
        wrdDocMailMrg = Nothing
        wrdAppMailMrg = Nothing 
```

现在我只需要对其进行调整以使其运行更快并清理 UI，但功能已经完全存在。

# python - PyGTK：制作一个行为类似于 OpenOffice 的 TextView

> ID：11436614
> 
> 赞同：4
> 
> 时间：2012-07-11T15:55:17.117
> 
> 标签：python, gtk, pygtk

我正在尝试制作一个“类似办公室”的 TextView。那是：

*   TextView 本身有一个固定的宽度（所以它有点显示文本在一张纸上的样子）
*   如果窗口（TextView 所在的窗口）小于固定宽度：TextView 应该是可滚动的
*   如果窗口较大，向左/右添加边距以保持固定宽度

这就是我想出的，它实际上表现得像它应该的那样，除了如果你的光标离开视口它不会滚动，例如当你写一个需要比窗口当前宽度更多空间的行时。

保持视口“同步”的最佳方法是什么？我必须创建自定义视口吗？

提前致谢！

```
#!/usr/bin/env python2
# encoding: utf-8

import gtk

class SheetTextView(gtk.TextView):
    WIDTH = 700

    def __init__(self):
        gtk.TextView.__init__(self)
        self.set_wrap_mode(gtk.WRAP_WORD)
        self.set_size_request(self.WIDTH, -1)
        self.connect('size-allocate', self._on_size_allocate)

    def _on_size_allocate(self, widget, event, data=None):
        # Reset left/right margin to simulate a fixed line width
        x, y, width, height = self.get_allocation()
        if width > self.WIDTH:
            margin = (width - self.WIDTH) / 2
            self.set_left_margin(margin)
            self.set_right_margin(margin)

if __name__ == "__main__":
    window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    window.connect('delete_event', gtk.main_quit)

    view = SheetTextView()

    scroll = gtk.ScrolledWindow()
    scroll.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
    scroll.add_with_viewport(view)

    window.add(scroll)
    window.show_all()
    gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:33:01.780

你的意思是这样的？

[Dropbox 链接](http://dl.dropbox.com/u/61466577/test)

请注意，这只是一个测试，它现在所做的只是在必要时更改大小，这是您的意思吗？

如果是这样，请告诉我，我会修复错误并改进。

编辑：请注意这只是临时代码，乱码......

# iphone - 在 TableView 中同时启用多编辑和单编辑样式

> ID：11436617
> 
> 赞同：3
> 
> 时间：2012-07-11T15:55:22.893
> 
> 标签：iphone, objective-c, ios, uitableview

在邮件应用程序中，您可以滑动以删除邮件。您还可以点击编辑，选择多条消息，然后删除它们。

我希望能够在我的表格视图中做同样的事情。

通过实现所需的委托方法，我已经滑动删除：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // squish it.
    }
} 
```

然后我发现了 iOS 5 中引入的这个很棒的新属性苹果，`tableView.allowsMultipleSelectionDuringEditing`. 所以，在我的`viewDidLoad`：

```
if ([self.tableView respondsToSelector:@selector(setAllowsMultipleSelectionDuringEditing:)]) {
    self.tableView.allowsMultipleSelectionDuringEditing = YES;
    // set up a little toolbar to commit edits
} 
```

它奏效了，这很有趣……直到我再次尝试滑动删除。

出于某种原因，多重编辑功能阻止了标准滑动删除样式编辑。我两个都想要。有谁知道如何让两者都工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:04:17.120

显然，您可以在 tableview 上启用编辑模式之前将 allowedMultipleSelectionDuringEditing 设置为 YES 。在 setEditing:animated 中执行此操作：

编辑：啊，看起来这个问题已经得到了回答：[当tableView的allowMultipleSelectionDuringEditing属性为YES时，如何让滑动删除工作？](https://stackoverflow.com/questions/9683516/how-do-i-get-swipe-to-delete-working-when-tableviews-allowsmultipleselectiondur)

# asp.net-mvc-3 - 是否有推荐的基础存储库类与 Entity Framework 一起使用？

> ID：11436623
> 
> 赞同：0
> 
> 时间：2012-07-11T15:55:51.310
> 
> 标签：asp.net-mvc-3, entity-framework, dependency-injection, ef-code-first, entity-framework-4.3

我在 ASP.NET MVC 3 应用程序中使用 EF Code First 方法，而不是重新创建轮子，我想知道是否已经存在一个可靠的基础 Repository 类，我的自定义 Repository 类可以扩展以便提供开箱即用的默认功能（例如基本 CRUD 等）。

所以像这样的东西......

```
public class CustomerRepository : BaseRepository { ... } 
```

...因此将提供一种默认方式来处理开箱即用的 Customer 对象。然后，我想将 ICustomerRepository 注入我的 MVC 控制器，并在那里为我提供可用的功能。

我确信这样的事情已经存在，因为我已经用 NHibernate 做了类似的事情。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:02:44.330

不，除了 EF 本身（它本身就是工作单元模式的实现，而 DbSet 基本上是存储库）之外，没有内置存储库。

目前，软件社区中存在关于通用存储库是否具有很大实际价值的争论。许多人认为，出于测试目的，它们提供了简单的单元测试。其他人说单元测试存储库没有帮助，因为模拟存储库的行为方式与真实存储库不同（因为 linq -> Sql 转换层，它不存在于模拟存储库中）。

许多人建议您使用 SqlLite 之类的内存数据库对 EF 进行集成测试，而不是对其进行单元测试。

尽管如此，如果您打算使用存储库，网络上仍有许多示例，它们具有不同的样式和方法。或者你可以自己滚动。MS 不提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:21:02.580

根据我的经验，编写自己的存储库是多余的，因为 EF 已经通过 DbSet 实现了这种模式。

我在最近的一个项目中使用了 MVC3 + EF Code Fisrt。我们在一些教程之后开始实现一个通用存储库，很快我们意识到我们正在编写大量不必要和冗余的代码。实际上，存储库除了隐藏了很多 DbSet 的功能外，什么都没有给我们。最后，我们决定删除它们并直接使用我们的 DbContext 和 DbSet。

**但是，除了简单的 CRUD 操作之外，复杂的业务逻辑又如何呢？**

好吧，我们通过服务层公开了所有复杂的功能，例如查询和多个 CRUD 操作。您可以按功能构建不同的服务类。例如，您可以编写一个 AccountService 来管理与用户帐户相关的所有功能。像这样的东西：

```
public class AccountService {

    private MyContext ctx;

    public AccountService(DbContext dbContext) {
        this.ctx = (MyContext)dbContext;
    }

    /// <summary>
    /// Gets the underlying DbContext object.
    /// </summary>
    public DbContext DbContext {
        get { return ctx; }
    }

    /// <summary>
    /// Gets the users repository.
    /// </summary>
    public DbSet<User> Users {
        get {return ctx.Users;}
    }

    public bool ValidateLogin(string username, string password) {
        return ctx.Users.Any(u => u.Username == username && u.Password == password);
    }

    public string[] GetRolesForUser(string username) {
        var qry = from u in ctx.Users
                  from r in u.Roles
                  where u.Username == username
                  select r.Code;

        return qry.ToArray<String>();
    }

    public User CreateUser(string username, string password) {
        if (String.IsNullOrWhiteSpace(username)) throw new ArgumentException("Invalid user name");
        if (String.IsNullOrWhiteSpace(password)) throw new ArgumentException("Invalid password");

        User u = new User {
            Username = username.Trim().ToLower(),
            Password = password.Trim().ToLower(),              
            Roles = new List<Role>()
        };

        ctx.Users.Add(u);
        ctx.SaveChanges();

        return u;
    } 
```

**依赖注入呢？**

使用这种方法，我们唯一需要注入的是 DbContext。服务类有一个采用 DbContext 的构造函数。因此，当您的控制器构造函数采用服务实例时，DbContext 将被注入其中。

**编辑：示例代码**
这是一个关于控制器外观的示例代码：

```
public class HomeController : Controller {

    private readonly AccountService accountService; 

    public AccountController(AccountService accountService) {
        this.accountService = accountService;
    }
} 
```

这可能是使用 NInject 的 DI 配置：

```
private static void RegisterServices(IKernel kernel) {
    kernel.Bind<MyContext>().ToSelf().InRequestScope();
    kernel.Bind<DbContext>().ToMethod(ctx => ctx.Kernel.Get<MyContext>());
} 
```

**单元测试怎么样？**

您可以为每个服务层类构建特定的接口，并在需要的地方模拟它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:01:31.967

我的一个朋友，Sacha Barber 写了一篇很好的文章，涵盖了其中的一些想法。

链接可以在这里找到。

[RESTful WCF / EF POCO / 工作单元 / 存储库 / MEF：1 of 2](http://www.codeproject.com/Articles/316068/Restful-WCF-EF-POCO-UnitOfWork-Respository-MEF-1-o)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:06:42.270

EF 有一个名为`DbContext`. 您可以添加类型的属性`DbSet<TEntity>`

这使您可以执行以下操作：

```
public class User {
    public int Id { get; set; }
    public string Name { get; set; }
}

public class DatabaseContext : DbContext {
    public DbSet<User> Users { get; set; }
} 
```

您现在可以像这样使用它：

```
using(var db = new DatabaseContext()) {
    User jon = new User {Name = "Jon Smith"};
    db.Users.Add(jon);
    db.SaveChanges();
    var jonById = db.Users.Single(x => x.Id == 1);
} 
```

[如果您想要更多抽象，请参阅这篇关于围绕 EF Entity Framework 4 CTP 4 / CTP 5 通用存储库模式和可单元测试](https://stackoverflow.com/questions/4442828/entity-framework-4-ctp-4-ctp-5-generic-repository-pattern-and-unit-testable/4458250#4458250)构建通用存储库的帖子请注意，并不总是需要这种抽象级别。您应该确定您的缩写是否真正受益于添加通用存储库而不是直接使用 DbContext。

# php - PHP 和类 - 在会话中写入会覆盖局部变量

> ID：11436624
> 
> 赞同：0
> 
> 时间：2012-07-11T15:55:53.873
> 
> 标签：php, class, session, variables, include

我有一个包含以下内容的***index.php ：***

```
include_once('includes/auth.php');
include_once('classes/class.DatabaseQuery.php');
include_once('classes/class.Project.php');
include_once('classes/class.User.php');

$project = new Project();
$user = new User();

// HTML, HEAD, BODY

$usergroup = $user->getUserGroup($_SESSION['user']);
// ... 
```

所以我在我的 index.php 中包含了所有需要的类。我还在这个文件中创建了一个类的实例。然后我有我的类文件（例如***class.Project***）：

```
class Project {

private $db;
private $evaluation;

public function __construct($id=null){
    $this->setPreferences();
}

private function setPreferences() {
    $this->db = new DatabaseQuery();
    $this->evaluation = new Evaluation();
}

public function getSomething(){
    if($this->evaluation->checkSomething(1)){
        echo "test";
    }
}
 // ...
} 
```

在这些文件中，我将其他类声明为私有变量。比我访问其他类的方法。

在其他类中包含和使用私有变量是否有任何问题？

现在我有一个奇怪的问题。如果我将值写入`$_SESSION['user']`私有变量`user`，则会被覆盖。在我在会话中写一些东西之前，会话值已经被填充了。这是我的***login.php***：

```
 include_once('classes/class.User.php');     
    session_start();

    $username = $_POST['username'];
    $password = $_POST['password'];

    $user = new User();
    if ($user->checkLoginData($username, $password)) {
        $_SESSION['userID'] = $user->getUserIDForName($username);
        // it is an object
        var_dump($user);
        $_SESSION['user'] = $username;
        // it is a string
        var_dump($user);
        // ...
    } 
```

如何`$_SESSION['user']=$username`改变局部变量的内容`$user`？也许你有一些想法我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:21:31.803

**解决方案：**

现在我听从了[这里](http://www.webmasterworld.com/forum88/12953.htm)`register_globals`的建议，应该转向哪里。例如`htaccess`：

`php_value register_globals 0`

似乎工作。

# facebook - *NOT* 在时间轴上对照片进行分组

> ID：11436626
> 
> 赞同：4
> 
> 时间：2012-07-11T15:56:01.500
> 
> 标签：facebook, image, fan-page

当我们通过 API 在短时间内发布多张单张照片时，粉丝专页时间线会自动将这些图像组合在一起。

您是否需要等待一段时间才能确保图像在页面中单独显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:25:16.037

这是增强 Facebook 新闻源用户体验的故意行为。这些照片会自动组合到一个漂亮的相册视图中，而不是在用户的新闻源中创建多个条目，这可能会出现垃圾邮件。

如果您想让照片分开显示，那么您需要在帖子之间等待一段时间。建议您不要过于频繁地在页面上发帖，否则用户可能会将帖子标记为垃圾邮件，这会对您未来帖子的可见性产生负面影响。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T21:29:46.297

i would wait 1 hr in between each post.

# java - 在收到 UDP 数据包之前不显示活动

> ID：11436629
> 
> 赞同：1
> 
> 时间：2012-07-11T15:56:22.800
> 
> 标签：java, android, udp, android-activity, android-networking

我正在制作一个接收 UDP 消息的应用程序。我遇到的问题是显示`Activity`，因为它仅在收到`UDP`消息后显示。在`onCreate`我有`startUdp()`which 开始收听`UDP`消息，我认为这是问题所在。

有没有办法知道何时`Activity`完成加载或我应该从哪里开始收听？

我的`Activity`代码：

```
public class UDPActivity extends Activity {
    private TextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_UDP);

        // Setup the UDP stuff
        startUDP();

        System.out.println( "Sent Response of ");

        TextView rowLetter = (TextView) findViewById(R.id.rowLetter);
        TextView seatNumber = (TextView) findViewById(R.id.seatNumber);
        Button btnClose = (Button) findViewById(R.id.btnClose);

        Intent i = getIntent();

        // Binding Click event to Button
        btnClose.setOnClickListener( new View.OnClickListener() {
            public void onClick(View arg0) {
                //Closing SecondScreen Activity
                finish();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_make_light, menu);
        return true;
    }

    private static final int UDP_SERVER_PORT = 12345;
    private static final int MAX_UDP_DATAGRAM_LEN = 1500;

    private void startUDP() {
        Log.d("UDP", "S: Connecting...");
        String lText;
        byte[] lMsg = new byte[MAX_UDP_DATAGRAM_LEN];

        DatagramSocket ds = null;
        while (true) {
            try {
                ds = new DatagramSocket(UDP_SERVER_PORT);
                //disable timeout for testing
                //ds.setSoTimeout(100000);
                DatagramPacket dp = new DatagramPacket(lMsg, lMsg.length);
                Log.d("UDP", "S: Receiving...");

                ds.receive(dp);
                lText = new String(lMsg, 0, dp.getLength());
                Log.i("UDP packet received", "S: Recieved '" + lText);
                textView = (TextView) findViewById(R.id.text1);

                textView.setText(lText);
            } catch (SocketException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if (ds != null) {
                    ds.close();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:17:18.193

不要在 UI 线程上进行联网，将其移动到诸如 AsyncTask 之类的东西上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:19:42.133

好吧，作为一个简单的解决方案，您可以直接调用`startUdp()`而`onResume()`不是“onCreate()”。

但如果它真的阻塞了网络 I/O，那么 Android 很可能会直接杀死你的应用程序，因为它阻塞了主 (UI) 线程。

您应该在单独的线程中运行 UDP 侦听器，或者使用 AsyncTask 并使用处理程序将任何接收到的 UDP 数据包数据传递给主线程以进行显示。

# ios - 如何一次删除多个核心数据对象？

> ID：11436630
> 
> 赞同：1
> 
> 时间：2012-07-11T15:56:23.407
> 
> 标签：ios, core-data

我正在编写一个 iOS 应用程序，我正在使用 Core Data 来存储一系列`Event`对象（想想生日、圣诞节或会议等）。每个`Event`对象都有一个与之关联的 date 类型的属性`NSDate`。

在整个程序过程中，我收集了一个 NSDate 对象的 NSArray，我想知道如何删除与这些日期关联的核心数据对象？例如，如果我有一个由日期 11/7 和 12/9 组成的数组，如何删除日期属性为 11/7 或 12/9 的任何 Event 对象？

我想到的一种可能性是`Event`使用谓词获取所有相应的对象并获取请求，然后转身将它们全部删除；但是，这似乎有点低效。如果我的一个`Event`对象真的非常大……那会不会花很长时间才能拿到它，只是为了让我可以转身删除它？

我只是想知道是否有更优雅的方式来处理这个......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:26:09.367

您可以通过一次 fetch 处理此问题 - 使用`IN`运算符构造一个谓词，使用您的 NSArray 日期作为集合，执行 fetch 请求（正如 Mike 上面所说，这仍然会相对较快），然后删除对象。有关详细信息，请参阅谓词编程指南中的[聚合运算符。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-CJBDBHCB)

# java - JSF2.0 buildView() 和 f:ajax 性能

> ID：11436635
> 
> 赞同：1
> 
> 时间：2012-07-11T15:56:32.050
> 
> 标签：java, jakarta-ee, jsf-2, facelets

JSF2.0 是一个了不起的 Web 框架；虽然 Rails/DJango/Play 基本上都使用带变量替换的模板（基本上是 JSP），但 JSF2.0 更倾向于成为基于*组件的*框架，如 Tapestry、GWT 和 Wicket。

然而，JSF 会随着页面的复杂性而线性降低性能。因此，在这里阅读了一篇引人入胜的文章后：http: [//industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead](http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead)我有几个问题。

首先，作者说 JSF 生命周期中的大部分时间都花在`buildView()`. 一个特定的应用程序，特别是在 Mojarra 中运行的应用程序，如何对其进行分析？

其次，自由使用是否`f:ajax execute=""`有助于`buildView()`提高绩效？该属性是否`execute`减少了必须完成的工作量`buildView()`？

最后，在全页导航上，是否有类似的`f:ajax`说法可以说“在恢复当前视图时只执行以下组件”？这是荒谬的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:14:46.780

1.  所以事实证明，在 Mojarra 中描述这一点有点困难。但是，MyFaces 非常简单……只需将您的分析器指向 LifeCycleImpl。

2.  在 MyFaces 上，正确设置执行结果会带来巨大的性能提升。在我的机器上，`buildView()`样板文件大约需要 8 毫秒。对于在`f:ajax execute=`. 我`h:outputText`在一个`ui:repeat`被`ui:fragment id="fragment"`. 当我添加`fragment`到`f:ajax execute=`响应时间时，我从 8 毫秒响应时间变为 45 毫秒响应时间。这里的教训是仅设置`f:ajax execute=`为仅执行您的输入组件并且`f:ajax render=`仅执行您的`h:message`组件。

3.  OmniFaces 缓存组件本质上就是这样做的，但范围更广一些。

我仍然希望有人能提出更科学的答案:)

# xml - 我需要一些东西来从命令行在 FileZilla（XML 设置文件）中创建用户

> ID：11436640
> 
> 赞同：-2
> 
> 时间：2012-07-11T15:56:50.490
> 
> 标签：xml, command-line, command-line-arguments, filezilla

老实说，我在这里寻求一些重要的帮助。我需要一个为 FileZilla 服务器创建用户/密码/文件夹名的应用程序（它是一个 XML 设置文件），但可以从命令行触发，因为它将从另一个应用程序获取这些变量（并启动）。顺便说一句，我没有代码访问权限的应用程序。我不是开发人员，但是如果有人可以帮助我（尽管大部分都可以！），我已经准备好尝试一下。

如果有人已经这样做了，那么快乐的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-05T20:25:54.587

我有同样的问题，但我想在 .Net 中管理用户。我发现这个库对我帮助很大。

[https://github.com/PolarbearDK/Miracle.FileZilla.Api](https://github.com/PolarbearDK/Miracle.FileZilla.Api)

我希望它也能帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:26:31.033

如果其他人需要帮助，我使用了 VBScript -[此处](http://allpinkynobrain.wordpress.com/2012/07/13/creating-filezilla-user-via-vbscript-in-a-troll-averse-world/)发布的完整脚本。

# android - 是否有识别 3D 图像并发送到视频的框架？

> ID：11436647
> 
> 赞同：1
> 
> 时间：2012-07-11T15:57:09.930
> 
> 标签：android, frameworks, augmented-reality

是否有可以在应用程序中使用的 android 框架来识别 3D 图像并将用户发送到视频。这应该属于增强现实，但到目前为止，我所查看的所有内容都使用 2D 图像和其他东西在屏幕上生成 3D 图像……我的情况与此相反。我尝试使用 vuforia，但无法让 sdk 工作，并且 unity 需要 android 许可证。DroidAr 似乎也不符合要求。或者有没有关于这个问题的教程？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:39:46.833

我没有使用该功能，但 Metaio 具有 3D 对象、“无标记”跟踪功能以及在 SDK 中进行视频播放的能力。我敢肯定，如果您宁愿简单地重定向到视频 (YouTube) 或其他不会特别困难的东西。

[http://www.metaio.com/software/mobile-sdk/features/](http://www.metaio.com/software/mobile-sdk/features/)

Metaio 的移动 SDK 与 Vuforia 类似，因此如果您遇到问题，您可能难以启动和运行它。如果你的编程技能达不到这个要求，你可以考虑研究一下由 Metaio 制作的 AR 浏览器 Junaio。使用 Junaio，您只需创建一个内容频道，而不必从头开始构建应用程序。同样，我还没有真正尝试过这个功能，但是文档似乎表明 Juniao 中可以使用 3D 跟踪：

[http://www.junaio.com/develop/quickstart/3d-tracking-and-junaio/](http://www.junaio.com/develop/quickstart/3d-tracking-and-junaio/)

祝你好运！

# jsf - 获取rich:calendar中不带所选值时间的日期

> ID：11436648
> 
> 赞同：0
> 
> 时间：2012-07-11T15:57:10.397
> 
> 标签：jsf, richfaces

使用时遇到问题`rich:calendar`：选择值后，我在日历类型的 bean 中设置值。在 bean 中它显示错误并且日期值与时间一起出现所以我们如何才能只获取日期值而不获取时间

这是我写的代码：

```
<rich:calendar value="#{editCustomerBean.person.demographic.dateOfBirth}"
  cellWidth="15px" cellHeight="22px" style="width:200px"
  datePattern="yyyy,dd,MM"/> 
```

错误消息说：

```
SEVERE: //C:/Workspace/Kumar/WebContent/satish/Main.xhtml @71,268 
value="#{editCustomerBean.person.demographic.dateOfBirth}":   
Can't set property 'dateOfBirth' on   
class 'com.customer.types.Information' to value '7/11/12   
12:00   AM'. 
```

当我在主页中设置值 2012,11,07 时，我得到一个额外 的值。`'7/11/12
12:00 AM'``12:00 AM`

我怎样才能只获得日期值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:40:35.413

您看到的值为 '7/11/12 12:00 AM' 的消息没有错，它只是`.toString()`对象 date create by 方法的结果`rich:calendar`。

您应该检查类`com.customer.types.Information`（从消息中，似乎是`editCustomerBean.person.demographic`属性的类型）实际上是否具有适当的`setDateOfBirth(Date dt)`方法。然后，相应地修复您的代码（指向正确的属性或创建适当的设置器）。

# mysql - 将 Xml 转换为 Mysql

> ID：11436649
> 
> 赞同：1
> 
> 时间：2012-07-11T15:57:11.677
> 
> 标签：mysql, sql, database

我有使用 netbeans 将 xml 数据转换为 mysql 的项目，反之亦然。我真的不太了解。请大家给点建议好吗？我需要你的帮助 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:00:56.663

XML 数据可能非常具体，并且对于当今的许多 XML 解析器来说可能不一致。我建议您研究`SimpleXML`,`XML_Parser`或`XMLReader`将您的数据检索到可读结构中的工具。然后，查看手动将其格式化为 MySQL。

**参考**： http: [//php.net/manual/en/book.xml.php](http://php.net/manual/en/book.xml.php)

**参考**： http: [//php.net/manual/en/book.xmlwriter.php](http://php.net/manual/en/book.xmlwriter.php)

**参考**： http: [//php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

享受和好运！

# android - 带有 JSON 的异步 HTTP 帖子使用 Android 4 解析结果？

> ID：11436650
> 
> 赞同：1
> 
> 时间：2012-07-11T15:57:12.053
> 
> 标签：android, json, http, http-post

我对Android很陌生。我一直在寻找一个关于如何通过网络执行 HTTP 发布请求的好例子，但我正在犹豫使用哪个，因为我只为 Android 4 开发。我想要一些异步、快速和简单的东西。非常感谢 JSON 结果解析的示例。有任何想法吗？我应该使用 Apache HTTP 客户端还是 HttpURLConnection？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:54:12.380

对我而言， [RestTemplate](http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html)是在 Android 上使用 REST 服务的最简单方法之一。

JSON 示例：

```
RestTemplate template = new RestTemplate();
        HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();

    //setting timeout
    requestFactory.getHttpClient().getParams().setIntParameter(CoreConnectionPNames.CONNECTION_TIMEOUT,
            HTTP_TIMEOUT);
    requestFactory.getHttpClient().getParams().setIntParameter(CoreConnectionPNames.SO_TIMEOUT,
            HTTP_TIMEOUT);

    template.setRequestFactory(requestFactory);

    //setting converter for JSON
    List<HttpMessageConverter<?>> converters = template.getMessageConverters();
    converters.add(new MappingJacksonHttpMessageConverter());
    template.setMessageConverters(converters);

    ResponseEntity<ResponseObject> response = template.postForEntity(URL, requestObject, ResponseObject.class);

    ResponseObject result = response.getBody(); 
```

为了使这项工作您需要在您的项目中使用 RestTemplate 和 jackson（我认为它应该是 jackson-all）jar。您可以在 RestTemplate 文档（上面的链接）中找到这些 jar 的链接。

为了使这个异步使用 Android SDK 中的 AsyncTask。

# dojo - 过滤道场树形网格

> ID：11436654
> 
> 赞同：1
> 
> 时间：2012-07-11T15:57:43.183
> 
> 标签：dojo, filtering, treegrid

是否可以归档道场树网格？

假设我的树有以下分层数据

a1
---b

```
 ---c
 ---d 
```

--- e

我需要过滤特定父节点的所有直接子节点并显示它

```
 eg : if i give criteria as a1 - it should fetch me b and e 
      if i give criteria as b it should fetch c and d 
```

# jquery - jQuery UI 对话框移除外发光并更改关闭按钮的文本

> ID：11436657
> 
> 赞同：0
> 
> 时间：2012-07-11T15:57:55.967
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在尝试自定义我的 jQuery UI 确认对话框窗口。找不到如何从按钮上移除浅蓝色外发光（悬停时），将关闭文本按钮从“关闭”更改为“x”并移除关闭按钮悬停背景。某处是否有关于所有对话框类的文档？

这是代码：

```
function fnComfirm(title, content, btnId) {
    $("#dialog:ui-dialog").dialog("destroy");
    $("#dialog-confirm p").text(content);
    $("#dialog-confirm").dialog({
        title: title,
        resizable: false,
        height: 200,
        width: 486,
        modal: true,
        buttons: {
            "OK": function() {
                $( this ).dialog("close");
                if (btnId) document.getElementById(btnId).click();                  
                return true;        
            },
            Cancel: function() {
                $( this ).dialog("close");
                return false;
            }
        }
    });
    $('body').css('overflow','hidden');
    $("div[role=dialog] button:contains('Cancel')").css("background-image", "none").css("border", "0px solid #FFF");
    $('.ui-dialog :button').blur();     
} 
```

HTML：

```
<div id="dialog-confirm" title="Are you sure?"><p></p></div> 
```

包括：

```
<h:outputScript library="js" name="jquery-ui-1.8.min.js" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-08T15:29:27.037

要更改关闭按钮文本，您可以传入一个选项，如标题（在对话框创建中），称为 closeText。

```
$("#dialog-confirm").dialog({
    title: title,
    closeText : 'hello' //Changes the text of the titlebar-close button to hello instead of default Close
    ...
    ...
}) 
```

并且要从关闭按钮中删除外发光（焦点），您可以进入 css 的 titlebar-close 并将轮廓属性标记为零，如下所示：

```
.ui-dialog .ui-dialog-titlebar-close {
   outline: 0;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T05:04:20.517

```
Div.dialog({
    autoOpen: true,
    closeOnEscape: false,
    closeText: '',
    modal: true,
    draggable: false,
    resizable: false,
    width: 640,
    height: 420,
    close: function(event, ui) {
        if (orderModifyFlag == true) {
            messageDisplay(1000);
        } else {
            messageDisplay(651);
        }
    }
}); 
```

# jquery-ui - 获取 jQuery 自动完成组合框的下拉部分

> ID：11436659
> 
> 赞同：1
> 
> 时间：2012-07-11T15:58:06.053
> 
> 标签：jquery-ui, combobox, jquery-autocomplete

我想获得与自动完成列表相对应的 html 元素，即在我输入 jQuery 组合框的输入元素时打开的下拉部分。我将如何使用 jQuery 获得这个下拉元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:21:13.787

如果您在谈论 jQueryUI 自动完成，您可以使用以下方法访问`menu`' 元素：

```
$('autocomplete_selector').data("autocomplete").menu.element; 
```

因此，在`open`事件的上下文中，您可以执行以下操作：

```
$("input").autocomplete({
    open: function (event, ui) {
        // menu is a jQuery object.
        var menu = $(this).data("autocomplete").menu.element;
    }
}); 
```

**示例：http:** [//jsfiddle.net/PvgGw/](http://jsfiddle.net/PvgGw/)

* * *

对于组合框小部件，您需要再跳几圈，因为它`input`是动态生成的：

```
$("combobox_selector")
    .data("combobox")
    .wrapper
    .find("input")
    .data("autocomplete")
    .menu
    .element; 
```

# tfs - 将 TFS 项目设为只读

> ID：11436662
> 
> 赞同：4
> 
> 时间：2012-07-11T15:58:14.907
> 
> 标签：tfs, tfs-2010

我想将 TFS 2010 项目设为只读，以便用户可以查看工作项中的信息，但不能添加任何详细信息或新工作项。我想我需要更改项目的安全权限，但不清楚我将从贡献者列表中更改哪个权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:57:33.980

我认为正确的方法是更改​​组成员身份。从贡献者和更高组中删除所有用户并将他们移动到读者组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:12:14.340

两种选择。

选择 1：如果这是一种常见模式，其中普遍的默认设置是限制人员，但有些人可以访问（即开发人员无法更改内容，但 Tech Leads 可以），修改贡献者并创建辅助组（例如，'Tech Leads ') 具有额外的读取权限。在这种情况下，Contributors 组将包含技术主管，但只有具有额外权限的特定个人才会在 Tech Leads 组中。

选择 2：如果普遍的默认设置是正常的贡献者访问，但特定个人（即外部承包商）需要被拒绝访问，并且您需要 100% 确保这会通过，无论是否有任何其他组成员身份，然后让贡献者保持原样，并添加一个名为（在此示例中）“承包商”的新组，并根据需要拒绝特定访问。

和以前一样，每个人都是贡献者，但是承包商对他们施加了一些绝对限制，并且承包商组中的“拒绝”覆盖了来自贡献者的“允许”。这种情况的一个用例是特定代码必须对外部供应商或其他子组隐藏并且需要 100% 坚如磐石的情况 - 只需小心拒绝，因为它们会胜过任何数量的允许您从其他人继承团体。

希望有帮助！

附录：为了限制或更改工作项的权限，您需要做两件事。首先，设置适当的组成员身份（如上所述），然后在项目中，在团队项目设置 -> 区域和迭代下，单击安全按钮以逐个节点进行设置（或者如果您想在根目录设置在项目范围内执行这些限制）。

# c++ - 操作字符串的函数 ("abcdef" -> "faebdc")

> ID：11436665
> 
> 赞同：0
> 
> 时间：2012-07-11T15:58:19.403
> 
> 标签：c++, string

大家好，我正在开发一个以以下方式操作任何字符串的函数。

“ABC”->“出租车”

“abcd”->“dacb”

“abcdef”->“faebdc”

“分歧”->“adtinveerg”

... 等等。

这是我到目前为止提出的代码。我认为它可以完成工作，但我认为代码和解决方案有点丑陋，我不确定它是否具有故障证明以及它是否适用于每个给定的案例。我非常感谢对此代码的任何输入或有关如何编写此函数的任何示例。我求你记住，我是一个非常n00b的人，所以不要对我**太**苛刻。

```
string transformer(string input) {

string temp;
int n = 0;
int m = (input.length() -1);

for( int i = 0; i < input.length(); i++) {

    temp += input[m];

    if (input[m] == input[n]) {
        break;
    }

    else {
        temp += input[n];
    }

    n += 1;
    m -= 1;

    if ( temp.length() == input.length() ) {
        break;
    }
}
return temp; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:09:30.723

你有三个问题。

用“abbba”试试。如果结果不是你想要的，那么这个条件：

```
if (input[m] == input[n]) {
break;
} 
```

完全错了。

看看另一个条件：

```
if ( temp.length() == input.length() ) {
  break;
} 
```

您一次将两个字符添加到`temp`. 如果`input`有奇数长度怎么办？

假设工作正常。考虑循环：

```
for( int i = 0; i < input.length(); i++) {

...

  if ( temp.length() == input.length() ) {
    break;
  }
} 
```

该循环*永远不会*在`for`语句中终止。你也可以这样做：

```
while( temp.length() < input.length() ) {
...
} 
```

一旦一切正常，您应该研究迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:27:26.953

这个函数只是将两个索引向中心移动，直到它们相遇或相互通过。最后一个`if`块处理奇数长度输入字符串的情况。它适用于[ideone.com上的所有测试用例](http://ideone.com/aRKjo)

```
std::string transformer(const std::string& input)
{
    std::string temp;
    int i = 0;
    int j = input.length() - 1;

    while (i < j) {
        temp += input[j--];
        temp += input[i++];
    }
    if (i == j) {
        temp += input[i];
    }
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:16:39.480

```
std::string transformer(const std::string& input) {

    std::string res(input.length(), '0');

    for (int i = 0; i < input.length(); ++i) {
        res[i] = input[ i % 2 == 0 ? input.length() - (i/2) - 1 : (i/2) ];
    }

    return res;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:29:04.220

我会使用指针而不是索引来做到这一点。

因此，您有一个指针来读取边缘，并且每次迭代都不断交换它们。

它也将使它更快。

我认为这应该可行，但我不记得如何制作一个 const char 指针数组。谁能帮我完成这一步？

```
string transformer(string input) {

     std::string temp;

     const char *front, *back;

     for (*front = input.c_str(), *back = front + input.length() - 1; front < back ; front++, back--) {
        temp += *back;
        temp += *front;
     }

     if (front == back)
        temp += *front;

     return temp;

} 
```

（使用与@Blastfurnace 相同的方法，但跳过了不必要的索引。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:08:37.643

不幸的是`if (input[m] == input[n])`，将确保如果第一个字符和最后一个字符相同，则在处理完第一个字符后立即退出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T16:17:17.903

我会用`std::string::iterator`and来做这个`std::string::reverse_iterator`：

```
auto it = input.begin();
auto rit = input.rbegin();
std::string temp;

for (size_t i = 0; i < input.length()/2; ++i) {
    temp += *rit++;
    temp += *it++;
} 
```

处理空的和奇数长度的输入的逻辑留给你做，应该不会太难。（长度为1的输入也是特例）

# mule - Mule 3 异步回复

> ID：11436667
> 
> 赞同：2
> 
> 时间：2012-07-11T15:58:24.190
> 
> 标签：mule

我有一个流程，我通过网络服务接收请求。我使用组件绑定将该请求转发到 JMS 队列。但是，我想从该队列中获取异步回复并将其用作对 Web 服务的响应。我需要在流程中使用 reply-to 和 async-reply-router 吗？或者在Mule 3中有没有其他方法可以做到这一点？任何指针？

```
<flow name="mviService">
    <http:inbound-endpoint address="http://localhost:62005/mvi"
        exchange-pattern="request-response">
        <cxf:jaxws-service serviceClass="com.xyz.services.mvi.MVIServicePortType" />
    </http:inbound-endpoint>
    <component class="com.pennmutual.services.mvi.MVIServiceImpl">
        <binding interface="com.pennmutual.mvi.helper.XMLReqProcessorInterface"
            method="process121Order">
            <jms:outbound-endpoint queue="mviq.121.order" />
        </binding>
            </component>

            <async-reply>

            </async-reply>

      </flow> 
```

============ 已编辑 - 请参阅下面的重新设计的问题 =================

我认为我在描述场景方面做得不好。让我再试一次。这是场景——

1.  客户端调用我们在此流程中描述的服务“mviService”。mviService 通过基于 HTTP/SOAP 的入站端点获取 XML 请求。我们将此请求称为 XML121Request.4
2.  MVI "com.xyz.services.mvi.MVIServiceImpl" 中定义的组件对 XML121Request 进行了一些更改。
3.  将此 XML121 转发到 JMS 队列“mviq.121.order”。它为此使用组件绑定。
4.  此 JMS 队列的出站端点是转发此请求的第三方 Web 服务。第三方确认收到 XML121 并返回同步 Web 服务调用。
5.  来自该第三方服务的响应在稍后的时间点出现，通常是几秒钟。响应是异步的。第三方调用 MVI 上的另一个 Web 服务端点并发送 XML121Response。
6.  MVI 将此响应放入名为“mviq.async.service.reply”的 JMS 队列中。
7.  “mviService”流程需要等待此响应并将此响应（经过一些修改）发送给调用者（在步骤 1 中）。

我能够从第三方获得响应，并且该响应被排入名为“mviq.async.service.reply”的队列中。我想使用/使用此消息并将其作为对第一次调用 MVI 的响应返回。

我正在尝试使用“请求-回复”。

```
 <request-reply timeout="60000">
        <vm:outbound-endpoint path="request" />
        <jms:inbound-endpoint queue="mviq.async.service.reply"
            exchange-pattern="one-way" />
    </request-reply> 
```

问题是，即使在这种情况下我不想有出站端点，我仍然必须放置一个，因为这是请求-回复标签所要求的。流程在该时间点等待 60 秒，但即使我将某些内容放入队列“mviq.async.service.reply”，相关 ID 也不匹配，因此服务超时并返回错误。

下面会提到流量。

```
<flow name="mviService">
    <http:inbound-endpoint address="http://localhost:62005/mvi"
        exchange-pattern="request-response">
        <cxf:jaxws-service serviceClass="com.xyz.services.mvi.MVIServicePortType" />
    </http:inbound-endpoint>
    <component class="com.pennmutual.services.mvi.MVIServiceImpl">
        <binding interface="com.xyz.mvi.helper.XMLReqProcessorInterface"
            method="process121Order">
            <jms:outbound-endpoint queue="mviq.121.order" />
        </binding>
    </component>

    <!-- <logger message="XML Correlation ID 1 is #[mule:message.headers(all)]" /> -->
    <request-reply timeout="60000">
        <vm:outbound-endpoint path="request" /> <!-- we don't care about this -->
        <jms:inbound-endpoint queue="mviq.async.service.reply"
            exchange-pattern="one-way" />
    </request-reply>
        <!-- <component class="com.xyz.mvi.CreateMVIServiceResponse"/> -->
</flow> 
```

===== 回复到 ==============

```
<flow name="mviService">
    <http:inbound-endpoint address="http://localhost:62005/mvi"
        exchange-pattern="request-response">
        <cxf:jaxws-service serviceClass="com.xyz.services.mvi.MVIServicePortType" />
    </http:inbound-endpoint>
    <component class="com.xyz.services.mvi.MVIServiceImpl">
        <binding interface="com.xyz.mvi.helper.XMLReqProcessorInterface"
            method="process121Order">
            <jms:outbound-endpoint queue="mviq.121.order" exchange-pattern="request-response">
                <message-properties-transformer scope="outbound">
                    <add-message-property key="MULE_REPLYTO" value="mviq.async.service.reply" />
                </message-properties-transformer>
            </jms:outbound-endpoint>
        </binding>
     </component>
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:28:05.630

我建议您不要创建服务组件类，而是使用`cxf:proxy-service`，这将使您可以直接访问 SOAP 信封，并有机会在 XML 级别以您想要的方式组装响应。

这将使您摆脱服务组件类强加给您的约束，因此无需使用绑定并打开使用`request-response`.

请参阅[此 SO 答案](https://stackoverflow.com/search?q=%5Bmule%5D%20proxy-service)并查看（瘦）[代理服务用户指南](http://www.mulesoft.org/documentation/display/MULE3USER/Proxying+Web+Services+with+CXF)以获取更多信息。

# jquery - Rails 3 是否应该将所有 Javascript 都存储在 Head 标签中？

> ID：11436669
> 
> 赞同：0
> 
> 时间：2012-07-11T15:58:26.633
> 
> 标签：jquery, ruby-on-rails-3, prototypejs, uploadify, head

我在 Ruby on Rails 中遇到了一个奇怪的错误。我正在尝试实现[Uploadify](http://www.uploadify.com/) JQuery 库以使用 flash 对象处理多个上传。我正在使用 Ajax 加载的选项卡上实现此功能。以前，我将我的 Uploadify js 文件的 javascript_include_tag 放在与 Uploadify 影响的相关 HTML 相同的 ajax 页面上。**然而**，这产生了一些非常奇怪的结果。有时在该页面上对我的 Uploadify 函数的调用会起作用，而有时它会完全失败。如果在这种情况下，通过在选项卡之间切换并第二次或第三次检索 Ajax 页面无法正常工作，它通常可以解决问题。奇怪的是，如果我使用 Firebug 检查 HTML，即使 Javascript 功能正常工作，也看不到 javascript 链接，尽管我确实看到了对该文件的网络请求。我尝试将用于 uploadify 的 javascript_include_tag 移动到我的应用程序布局中的 head 标签，但随后 Uploadify flatout 完全停止工作。

当我将 Ajax 页面上带有链接标签的 uploadify 功能推送到我的生产服务器时，问题仍然存在，但频率降低了很多。事实上，我只注意到它几次。此外，此功能不再适用于任何其他浏览器时期，只是 Firefox，但这可能是一个完全不同的问题，我会弄清楚（即使 Javascript 应该是独立于浏览器的......）。

当我尝试在其中包含 uploadify 调用时，我的 head 标签如下所示：

```
%head
    %title Virtual Robot Games
    = stylesheet_link_tag 'style.css','web_app_theme.css', 'events.css', :media => 'screen'    
    = csrf_meta_tag         
    = javascript_include_tag 'jquery'
    = javascript_include_tag 'prototype'
    = javascript_include_tag 'noconflict.js'
    = javascript_include_tag 'effects.js'
    = javascript_include_tag 'calendar_date_select'
    = javascript_include_tag 'highlight'
    = javascript_include_tag 'textcounter'
    = javascript_include_tag 'scriptaculous.js'
    = javascript_include_tag 'collapsible.js'
    = javascript_include_tag 'bbhelp.js'
    = javascript_include_tag 'swfobject'
    = javascript_include_tag 'application' 
    = javascript_include_tag 'uploadify' 
```

**额外信息：**

我同时使用 Prototype 和 JQuery，它们经常相互冲突，但我通常能够解决这个问题。我从来没有遇到过两个库发生冲突的情况，而且我的 JQuery 有时只能工作。通常，如果发生冲突，它完全不会起作用。

**编辑** 实际上我想我找到了问题，我正在使用[jquery-rails](https://github.com/indirect/jquery-rails/) gem，我忘记在我的 Uploadify js 文件中包含 JQuery 库。相反，我有一个指向 googleapi 的内联链接。用包含调用替换 google api 链接解决了问题。尽管我最初的问题是存在的，但我的 JavaScript 链接是否应该全部存储在我的 head 标签中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:13:38.767

“虽然我最初的问题是，我的 JavaScript 链接是否应该全部存储在我的 head 标签中？”

[javascript_include_tag](http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/javascript_include_tag)只是`<script></script>`在 html 标记中生成元素的助手。因此，您可以在页面结束之前`</body>`或页面中的任何位置添加它。您也可以在部分中使用它。另一种常见的做法是`content_for`在模板/部分和布局中使用关联的标签，例如在`<head>`部分中。它的目的是仅加载相关的 js，当站点只有一部分是 JavaScript 密集型（可能是图表/图形/报告等）并且其他站点模块根本不使用该 js 库（但所有模块共享通用布局）。

综上所述，放置的位置`javascript_include_tag`更多地取决于 html 页面上的 JavaScript 执行规则，而不是其他任何东西。将其用作`<script></script>`元素。

# iphone - 如何避免 gridView 现在覆盖我的 uilabel 的情况：iphone

> ID：11436672
> 
> 赞同：3
> 
> 时间：2012-07-11T15:58:31.777
> 
> 标签：iphone, gmgridview

我现在拥有的是

```
View :
    1.UILabel :  show a text 
    2.A GMGridView : show a grid of views 
```

代码是

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        gridViewHolder.itemSpacing      =   SPACING;
        gridViewHolder.dataSource       =   self;
        gridViewHolder.actionDelegate   =   self;
    }
#pragma mark - GMGridViewDataSource
- (CGSize)GMGridView:(GMGridView *)gridView sizeForItemsInInterfaceOrientation:(UIInterfaceOrientation)orientation {
    return CGSizeMake(WIDTH, HEIGT);     
}
- (NSInteger)numberOfItemsInGMGridView:(GMGridView *)gridView {
    return [needs count];
}
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index {
    cell                =   [gridView dequeueReusableCell];
    CGSize size         =   [self GMGridView:gridViewHolder sizeForItemsInInterfaceOrientation:UIInterfaceOrientationPortrait];

    if (!cell)
        cell            =   [[GMGridViewCell alloc] init];  

    UIView      *innerView                  =   [[UIView alloc] initWithFrame:CGRectMake(COOR_X, COOR_Y, size.width, size.height)];
    innerView.backgroundColor               =   [UIColor grayColor];

    cell.contentView                        =   innerView;
    return cell;
} 
```

![在此处输入图像描述](../Images/5876daa32d53aec1ea422c9f15a8dd61.png)

所以现在我可以成功地在 gridview 中显示一堆视图。但是，当我滚动网格视图时，网格视图的内容将覆盖标签。下面是图片，这样你就可以看到我现在的情况 ![在此处输入图像描述](../Images/c02ea6dd8c26402c07552d1fc47d1cc5.png)

如何避免这种情况，以便每当我向上滚动我的 gridview 时，它的内容不会与我的 uilabel 重叠

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T11:10:27.140

尝试这个：

```
gridview.clipsToBounds=TRUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:21:10.327

您可以使用视图上的 insertSubview 在标签下方插入 gridview。

[self.view insertSubview:gmGridView atIndex:0];

# ruby - 如何在没有 Xcode 的情况下在 Mac OS X Mountain Lion 中安装 Ruby 1.9.3？

> ID：11436674
> 
> 赞同：33
> 
> 时间：2012-07-11T15:58:35.617
> 
> 标签：ruby, osx-mountain-lion

我想知道在 OS X 10.8 Mountain Lion 上为 Ruby 1.9.3 构建开发机器的替代方法，不需要 Xcode。

在我写这个问题的时候，Mountain Lion 现在是 Golden Master，所以它可以被认为是最终版本。Xcode 不能这么说，那还是一个预览版。

RVM 建议在 Xcode 上安装 osx-gcc-installer，但我不想弄乱我的系统。

在没有 Xcode 的情况下在 Mountain Lion 上安装 Ruby 1.9.3 最干净的方法是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-11T15:58:35.943

osx-gcc-installer 是替换 Xcode 以安装 Ruby 1.9.3 的一个非常好的选择

这些是我遵循的步骤：

1.  在此处下载并安装最新版本的 osx-gcc-installer（GCC-10.7-v2 很好）：[https ://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)
2.  像往常一样安装 RVM 并选择 1.9.3-head 作为默认的 ruby​​ 安装：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)
3.  安装 Homebrew：[https ://github.com/mxcl/homebrew/wiki/installation](https://github.com/mxcl/homebrew/wiki/installation)
4.  安装 libksba 以解决 Ruby 1.9.3 的一些依赖关系：`brew install libksba`

**就是这样！**您现在应该已经在 Mountain Lion 上安装了 Ruby 1.9.3，并且运行良好。

如果您需要其他一些软件包，请立即通过 Homebrew 安装它们，例如 Imagemagick：`brew install imagemagick`

您可能需要 XQuartz for Homebrew 才能正常工作，因为自 Mountain Lion 以来，Apple 就不再发布 X11。你可以在这里下载：http: [//xquartz.macosforge.org/trac/wiki](http://xquartz.macosforge.org/trac/wiki)

**编辑：**

现在（自 7 月 29 日起）Xcode 4.4 的命令行工具可用。

因此，新的步骤如下：

1.  下载并安装 Xcode 4.4 的命令行工具（您不需要下载 Xcode）：[https ://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)
2.  安装 Homebrew：[https ://github.com/mxcl/homebrew/wiki/installation](https://github.com/mxcl/homebrew/wiki/installation)
3.  安装自动制作：`brew install automake`
4.  像往常一样安装 RVM 并选择 1.9.3-head 作为默认的 ruby​​ 安装：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

可选步骤：某些组件可能需要 XQuartz，例如 Imagemagick，因此下载并安装 XQuartz：http: [//xquartz.macosforge.org/trac/wiki](http://xquartz.macosforge.org/trac/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:54:50.503

我还必须添加这个：

导出 CC=/usr/bin/gcc-4.2

为了使 Apple 命令行工具与 rvm 一起工作。没有这个，我重复了 llvm 问题：

提供的 CC(gcc) 是基于 LLVM 的，它还没有被 ruby​​ 和 gems 完全支持，请阅读`rvm requirements`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T03:42:38.573

我不得不添加

```
export CPPFLAGS=-I/opt/X11/include 
```

也

```
export CC=/usr/local/bin/gcc-4.2 
```

由于 readline（`readline.c: In function ‘readline_s_vi_editing_mode_p’:`make.log 文件中的内容），我仍然遇到编译错误，并且[RVM readline 页面](https://rvm.io/packages/readline/)似乎没有帮助，所以我跑了

```
brew install readline 
```

其次是

```
rvm install 1.9.3 -C --with-readline-dir=/usr/local/Cellar/readline/6.2.4 
```

# php - 如何在 php 中使用 ssl 证书连接到 imap 服务器？

> ID：11436678
> 
> 赞同：1
> 
> 时间：2012-07-11T15:58:59.763
> 
> 标签：php, ssl-certificate, imap

我需要连接到具有 ssl 证书的邮件服务器。我可以使用以下代码连接到服务器：

```
imap_open ("{localhost:993/imap/ssl/novalidate-cert}", "user_id", "password"); 
```

但这会忽略或跳过证书的验证。如何启用证书验证？

根据 php 手册使用以下代码会给我一个无效的证书错误。

```
imap_open ("{localhost:993/imap/ssl}", "user_id", "password"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:08:23.633

您是否使用自签名证书？如果您是，那么验证将失败。如果您没有使用自签名证书，请确保已为您的主机/域正确配置了它。

# ios - 档案不再显示在管理器中

> ID：11436679
> 
> 赞同：0
> 
> 时间：2012-07-11T15:59:02.480
> 
> 标签：ios, xcode, xcode4.3

我正在尝试将我的应用的更新提交到应用商店。突然间，档案不再出现在管理器的档案部分。Xcode 说存档成功，没有错误，但它从不显示...

工作流程：

```
1\. Clean
2\. Build for Archive
3\. Archive 
```

![在此处输入图像描述](../Images/f4e5693716e7f4d12f9174e9bf234719.png)

这篇文章对我没有帮助：[存档没有出现在 xcode4 管理器中](https://stackoverflow.com/questions/5280914/archive-does-not-appear-in-xcode4-organizer)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:03:22.483

这可能看起来很愚蠢，但请确保在您的方案中检查了管理器中的显示存档。

[http://developer.apple.com/library/ios/#recipes/xcode_help-scheme_editor/Articles/SchemeArchive.html#//apple_ref/doc/uid/TP40010402-CH6](http://developer.apple.com/library/ios/#recipes/xcode_help-scheme_editor/Articles/SchemeArchive.html#//apple_ref/doc/uid/TP40010402-CH6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:32:07.457

好的，所以我已经解决了这个问题，但我真的不明白发生了什么。Xcode 曾问我是否想“升级到最新的推荐设置并执行项目清理”；听起来不错，对吧？错误的。

在那之后，我的问题开始了。值得庆幸的是，它在执行此操作之前创建了一个快照，并且我能够恢复到它。我现在可以存档就好了。

![在此处输入图像描述](../Images/50a18a2f4b4709f91f5e87c57c09b5a3.png)

# ruby - 将一个目录的内容复制到另一个目录

> ID：11436680
> 
> 赞同：42
> 
> 时间：2012-07-11T15:59:03.080
> 
> 标签：ruby

使用 Ruby，如何将一个目录的*内容*复制到另一个目录？例如，给定（非空）目录 A 和 B：

```
A/
  bar
  foo
B/
  jam
  jim 
```

我想将所有内容从 A 复制到 B 中，结果是：

```
A/
  bar
  foo
B/
  bar
  foo
  jam
  jim 
```

我不能使用[`FileUtils.cp_r`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-cp_r)，因为它会复制目录本身：

```
irb(main):001:0> require 'fileutils'
#=> true
irb(main):002:0> Dir['**/*']
#=> ["A", "A/bar", "A/foo", "B", "B/jam", "B/jim"]
irb(main):003:0> FileUtils.cp_r('A','B')
#=> nil
irb(main):004:0> Dir['**/*']
#=> ["A", "A/bar", "A/foo", "B", "B/A", "B/A/bar", "B/A/foo", "B/jam", "B/jim"] 
```

是否有比以下更好（更短，更有效）的答案？

```
Dir['A/*'].each{ |f| FileUtils.cp(f,"B") } 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-09-25T21:23:17.813

使用 FileUtil 的`cp_r`方法，只需`/.`在源目录参数的末尾添加即可。

下面的 Ruby 文档中的示例。假设当前工作目录具有 src 和 dest 目录。

```
 FileUtils.cp_r 'src/.', 'dest' 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-cp_r](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-cp_r)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-11T16:18:26.427

尝试：

```
FileUtils.cp_r(Dir['A/*'],'B') 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-11T16:26:00.140

使用时`FileUtils.cp_r`，请注意第一个参数也可以是文件列表。尝试类似：

```
FileUtils.cp_r(Dir.glob('A/*'), 'B') 
```

# javascript - 如何处理 knockout.js 中的本地化？

> ID：11436685
> 
> 赞同：14
> 
> 时间：2012-07-11T15:59:16.533
> 
> 标签：javascript, knockout.js, single-page-application

您如何使用 knockout.js 处理本地化？

似乎 knockback.js 有一个漂亮的实用程序来处理本地化，我想知道是否有任何第三方库可以与 knockout.js 一起使用来处理本地化，而不必实际切换到 knocback.js 来获得那些功能（因为我真的不需要这个简单应用程序的主干模型或路由）。像 Mapping 插件这样简单易用的东西是理想的。

谢谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T19:55:20.717

这是一个[简单的小提琴](http://jsfiddle.net/KRS2A/)，演示了两种语言之间的 Knockout 切换。它非常初级，但是您的问题缺乏任何细节，无法让您更加复杂。

HTML

```
<div data-bind="with: selectedLanguage">
    <h1 data-bind="text: header"></h1>
    <h2 data-bind="text: subHeader"></h2>
    <p data-bind="text: body"></p>
</div>
<select data-bind="options: languages, optionsText: 'name', value: selectedLanguage"></select>​ 
```

视图模型

```
var Language = function(language) {
    this.name = ko.observable(language.name);
    this.header = ko.observable(language.header);
    this.subHeader = ko.observable(language.subHeader);
    this.body = ko.observable(language.body);
};

var ViewModel = function(data) {
    var self = this;
    self.languages = ko.observableArray(
    ko.utils.arrayMap(data, function(i) {
        return new Language(i);
    }));
    self.selectedLanguage = ko.observable();
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-24T10:48:08.790

我认为没有必要进行映射，也不需要为每个标签使用 observables。

```
var ViewModel = function () {  
    this.l = ko.observable(spanish);
    this.chooseenglish = function () {
        this.l(english);
    };
  this.choosespanish = function () {
        this.l(spanish);
    };
};
var spanish = {
    header: "Bienvenidos",    
    body: "Esta es la demostración de idioma"
};
var english = {
    header: "Welcome",
     body: "This is the language demo"
}
    ko.applyBindings(new ViewModel()); 
```

在 html 代码中，您只需要调用 observable 和标签名称：

```
<h1 data-bind='text: l().header'></h1> 
<button data-bind='click: chooseenglish'>English</button>
<button data-bind='click:choosespanish'>Spanish</button>
<p data-bind='text: l().body'></p> 
```

[http://jsfiddle.net/runjep/3Lqsx/2094/](http://jsfiddle.net/runjep/3Lqsx/2094/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-13T18:02:23.040

有一个很棒的[i18next-ko](https://github.com/leMaik/i18next-ko)项目，它在底层使用了[i18next](http://i18next.com/)。

定义你的翻译：

```
var resourceStore = {
    en: {
      translation: {
        'testTranslation': 'Test translation',
        'testTranslation2': 'Test translation __param__'
      }
    },

    de: {
      translation: {
        'testTranslation': 'Test-Übersetzung',
        'testTranslation2': 'Test-Übersetzung __param__'
      }
    }
  } 
```

初始化 i18next-ko：

```
i18nextko.init(resourceStore, 'en', ko); 
```

随意切换语言：

```
i18nextko.setLanguage('de'); 
```

并绑定：

```
data-bind="i18n: 'testTranslation'" 
```

或者：

```
data-bind="i18n: { key: 'testTranslation2', options: { param: paramObservable } }" 
```

# javascript - 哈希更改后的Android浏览器没有apple-touch-icon-precomposed

> ID：11436689
> 
> 赞同：2
> 
> 时间：2012-07-11T15:59:34.637
> 
> 标签：javascript, android, apple-touch-icon

我在 Android Stock Browser 和 Mobile Chrome 上遇到了一个奇怪的事情（错误？），它们都安装在 Android ICS 4.0.3/4 上（我都测试过）。从可靠的消息来源我听说同样的问题出现在 Android 2.3 上。

**我想要实现的目标：** 我最近添加了 apple-touch-icon-precomposed 图标链接，如果将其保存到主屏幕，可以使我的移动网站看起来像一个应用程序。我还添加了一个书签气泡，通知用户他们现在可以将我的移动网站保存为“应用程序”。当然，我不想将气泡显示给从主屏幕上的类似应用程序的书签打开我的网站的任何人，因此我在加载时为任何还没有哈希的人添加了一个特殊的哈希。这样，当他们保存我的网站时，他们会将其与哈希一起保存，因此我可以检查他们是否通过正常链接 my.website.com/ 或通过他们的书签 my.website.com/#specialhash 打开了我的网站. 我通过使用一个很棒的库来简化整个过程：[https://github.com/okamototk/jqm-mobile-bookmark-bubble](https://github.com/okamototk/jqm-mobile-bookmark-bubble)

**问题：** 但是，在 Android 上，每当我通过 JS 更改哈希时，浏览器/操作系统将无法识别 apple-touch-icon-precomposed 图标链接，而只会保存常规 favicon.ico（看起来很糟糕，而不是都像一个应用程序）。

他们有什么我能做的吗？

PS。在移动 Chrome 中，正确的 apple-touch-icon-precomposed 会保存到书签库中，但每当我尝试将其保存到主屏幕时都不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:57:33.960

这是移动 Chrome 的问题。看到[这个错误](http://code.google.com/p/chromium/issues/detail?id=125076)。实验中，似乎 using`apple-touch-icon`将其保存在书签库中，并在添加到主屏幕时将其呈现为页面上的小图标，但 using`apple-touch-icon-precomposed`根本不会在主屏幕上呈现它 - 我在页面图标上得到了一个地球仪。除了通过股票浏览器添加书签并使用股票书签小部件将其添加到主屏幕之外，您现在实际上无能为力。这些图标的 Chrome 书签和小部件已损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:41:25.427

此解决方案适用于 Android 默认浏览器。

似乎在哈希更改后，android默认浏览器对书签链接感到困惑，可能是因为它不再识别url。我发现，如果在哈希更改后立即通过 JavaScript（在本例中为 jQuery）将书签图像链接标记插入 DOM，则问题得到解决。这是我用来解决此问题的解决方法：

```
// create the bookmark link 
MyObject.prototype.getBookmarkLink = function(imageName)
{
   var html = '';
   if (imageName) {
   html = '<link rel="apple-touch-icon-precomposed" href="' + PathToImages + '/' + imageName + '" />';
   }
   return html; 
};

MyObject.prototype.insertBookmarkImage = function(imageName)
{
   if (imageName) {
     // try to get the link that may already be there
     var existingBookmark = jQuery("link[rel='applfe-touch-icon-precomposed']");
     // if able to find it...
     if (existingBookmark.length) {
        // remove it...
        existingBookmark.remove(); 
        // ... then, put it back 
        jQuery('head').append(existingBookmark);
     } else {
        // we were not able to find it, so add a new one
        jQuery('head').append(this.getBookmarkLink(imageName)); 
     }
   }
}; 
```

# c# - DbPropertyEntry 获取原始值

> ID：11436691
> 
> 赞同：1
> 
> 时间：2012-07-11T15:59:49.573
> 
> 标签：c#, .net, entity-framework

我正在尝试记录对数据库的更改，以便用户可以看到谁更改了什么。我正在使用`DbEntityEntry`来查看并记录`DbPropertyEntity`已修改的内容。当我想记录对导航属性的更改时遇到了问题。我使用该`Reference()`方法来获取对导航属性的引用，但与 不同的是`DbPropertyEntity`， `DbReferenceEntry`它没有`OriginalValue`唯一的`CurrentValue`属性。你如何获得`OriginalValue`导航属性？

```
//Get the field that hold the id of the foreign key
var field = entry.Property(x => x.field);

//Check to see if the user changed the value
if (field.IsModified)
{
    //Get the reference property associated with the field
    var fieldRef = entry.Reference(x => x.fieldRef);

    //Log the id change
    Log(field.Name, field.CurrentValue, field.OriginalValue);

    //Can't get the OriginalValue
    Log(fieldRef.Name, fieldRef.CurrentValue, ???);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:43:05.403

您究竟希望记录什么以供参考？

如果要记录关系更改（= 外键更改），则应将外键映射为单独的属性，并将其记录为普通字段。如果您不映射外键，则您有一个[独立的关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)。DbContext API 中对独立关联的支持[是有限的](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/192f6f64-df77-4902-901b-c36e2b157ab6)。完全支持仅在 ObjectContext API 中（您可以从 DbContext API 使用它）但它仍然不能解决您的问题 - 独立关联不能处于修改状态。它可以处于未更改、已添加或已删除状态。如果您更改引用，旧关联将被标记为已删除并添加新关联 = 上下文跟踪两个单独的关联对象。

# msmq - MSMQ 应该在接收方机器的发送方上吗？

> ID：11436692
> 
> 赞同：0
> 
> 时间：2012-07-11T15:59:49.857
> 
> 标签：msmq

我想知道在一台机器（A）将发送消息，而另一台机器（B）将接收它们的情况下，是否有任何关于应该在哪台机器上安装 MSMQ 的指南。是否有任何因素表明最好将 MSMQ 安装在 A 上（在这种情况下，发送者在本地写入消息，但接收者在远程读取它们），或者安装在 B 上（在这种情况下，情况正好相反？）

（如果有什么不同，在我们的例子中，发送者是一个网站，而接收者是位于网站后面的应用服务器机器，网站向其发送消息。在没有任何其他建议的情况下，我会有倾向于在应用服务器上安装 MSMQ，基于安全理由在 Web 服务器上保留尽可能少的软件的模糊原则，因为该服务器处于任何攻击的第一线。更复杂的是，该网站位于负载平衡器 - 所以“机器 A”实际上是两台相同的机器，机器“B”也是如此）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:27:15.390

MSMQ 必须在所有发送或接收消息的机器上运行。无论您是“发送本地/读取远程”还是“发送远程/读取本地”都没有关系。

# powershell - 如何在 PowerShell 中从 Web 下载文件/子文件夹的整个文件夹

> ID：11436694
> 
> 赞同：6
> 
> 时间：2012-07-11T15:59:59.833
> 
> 标签：powershell, download, webclient

我可以使用以下方法从网络下载单个文件：

```
$wc = New-Object System.Net.WebClient
$wc.DownloadFile("http://blah/root/somefile.ext", "C:\Downloads\www\blah\root\somefile.ext") 
```

但是如何下载所有文件，包括子文件夹？像下面这样的东西会很好......

```
$wc.DownloadFile("http://blah/root/", "C:\Downloads\www\blah\root\") 
```

根文件夹本身在 IE 中显示为目录列表，您知道，例如：

```
[To Parent Directory]
                01 July 2012    09:00       1234 somefile.ext
                01 July 2012    09:01       1234 someotherfile.ext 
```

作为奖励，我如何只下载根文件夹中的文件，而忽略子文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T15:11:55.127

以下是我根据 Andy 的建议得出的结论（当然，在 Google 的大力帮助下）：

```
####################################################################################################
# This function copies a folder (and optionally, its subfolders)
#
# When copying subfolders it calls itself recursively
#
# Requires WebClient object $webClient defined, e.g. $webClient = New-Object System.Net.WebClient
#
# Parameters:
#   $source      - The url of folder to copy, with trailing /, e.g. http://website/folder/structure/
#   $destination - The folder to copy $source to, with trailing \ e.g. D:\CopyOfStructure\
#   $recursive   - True if subfolders of $source are also to be copied or False to ignore subfolders
#   Return       - None
####################################################################################################
Function Copy-Folder([string]$source, [string]$destination, [bool]$recursive) {
    if (!$(Test-Path($destination))) {
        New-Item $destination -type directory -Force
    }

    # Get the file list from the web page
    $webString = $webClient.DownloadString($source)
    $lines = [Regex]::Split($webString, "<br>")
    # Parse each line, looking for files and folders
    foreach ($line in $lines) {
        if ($line.ToUpper().Contains("HREF")) {
            # File or Folder
            if (!$line.ToUpper().Contains("[TO PARENT DIRECTORY]")) {
                # Not Parent Folder entry
                $items =[Regex]::Split($line, """")
                $items = [Regex]::Split($items[2], "(>|<)")
                $item = $items[2]
                if ($line.ToLower().Contains("&lt;dir&gt")) {
                    # Folder
                    if ($recursive) {
                        # Subfolder copy required
                        Copy-Folder "$source$item/" "$destination$item/" $recursive
                    } else {
                        # Subfolder copy not required
                    }
                } else {
                    # File
                    $webClient.DownloadFile("$source$item", "$destination$item")
                }
            }
        }
    }
} 
```

当然不能保证，但它适用于我感兴趣的网站

# php - Paypal 快速结帐会话已过期/令牌无效 - 错误 10411

> ID：11436698
> 
> 赞同：1
> 
> 时间：2012-07-11T16:00:05.810
> 
> 标签：php, api, paypal

我有一个大问题。

我建立了自己的商店，现在我正在尝试整合 Paypal。我成功地将 Paypal 与 Sandbox 集成。现在我正在更改为实时模式，出现错误：

API 错误 10411 - 此快速结帐会话已过期。令牌值不再有效。

这没有任何意义。如果客户需要很多时间来完成交易，通常会出现此错误，但我不需要超过 30 秒。实际上，在到达返回站点之前一切正常，这里出现了答案“FAILURE”和此错误消息。

奇怪的是，沙盒一切正常，但在实时模式下，我的令牌无效。我检查了 API 名称、密码和签名几乎一百次，它应该可以工作。

有人知道为什么会出现此错误吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-27T21:49:11.033

我有同样的问题。

我的错误是： - SetExpressCheckout 是针对 paypal 沙箱进行的 - GetExpressCheckoutDetails 是针对真正的 Prod Paypal 进行的

因此，请仔细检查您从 PaypalSandBox 获得的令牌是否与 PaypalSandbox 一起使用（对于真正的 Paypal 也是如此）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:10:30.807

我有同样的问题，我在检查令牌时处于沙盒模式。所以一定要针对 LIVE 系统而不是沙箱进行测试

# sql - SQL 错误：在使用现有数据插入新数据时无法插入重复的 id

> ID：11436699
> 
> 赞同：0
> 
> 时间：2012-07-11T16:00:09.430
> 
> 标签：sql, sql-server-2008

我的修改页面上有一个文本框，其中包含数据库中的现有数据。此数据在 SQL Server 表中是单独的行，但在文本框中显示为用逗号分隔的单行。

例如：表

```
keyid   name 
--------------
  101     ss
  105     hh
  109     tt 
```

在我的网络表单中，它显示在像 `ss,hh,tt`. 有一个桥接表 ( `Keysproducts`)，其中包含`keyid`and `productid`（与 相关的产品`keyid`）

我的问题是：

在我的文本框中添加更多条目以及现有条目时，我收到此错误消息，指出未插入重复值并显示我现有的 id。下面是我的存储过程。

我正在检查是否`keyname`存在，如果不存在我插入行，否则我更新它。如果我的方法是错误的，请指导我。

```
create PROCEDURE [dbo].[modify] 
      (
        @keyName nvarchar(256),
        @productdbid uniqueidentifier

      )
AS
Begin
  declare 
    @productid uniqueidentifier,
    @keyid uniqueidentifier,
    @id uniqueidentifier;

    declare @keydata table (keyid uniqueidentifier);

    set @productid =(select ProductID from Products where ProductID = @productdbid );

Begin

    if not exists(select keyname from keys where KeyName = @keyName)
    begin
       insert into Keys(KeyId, KeyName)
       output inserted.KeyId into @keydata(keyid)
       values (newid(), @keyName);

       select @keyid = keyid from @keydata;

       insert into KeysProducts(KeyId,productId)
        values (@keyid, @productid);
     end
     else
     begin
        set @id = (select keyid  from keys where KeyName = @keyName)

        update keywords 
        set KeyId = @id, KeyName = @keyName 
        where KeyName= @keyName;
    end

    if not exists(select * from Keysproducts where ProductID = @productid and KeyId= @id) 
     begin
        insert into Keysproducts(KeyId, ProductID)
        values (@id, @productid);       
     end
     else
     begin
         update Keysproducts 
         set KeyId = @id, productID = @productid;
     end
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:05:56.440

好吧，我想我们需要更多关于你如何使用这个存储过程的信息。如果您的文本框最初包含 ss,hh,tt ，并且我将其更改为 ss,hh,tt,zz 例如，我假设您仍然为每个值运行一次该过程？所以你会为 ss 运行它，然后分别为 hh、tt 和 zz 运行它？

您从哪里获得 productdbid 参数值？

您对表有哪些约束，违反了哪一个（PK 或某些唯一约束）？

你得到什么确切的错误？

我还想指出，您上次更新时没有 WHERE 子句，因此您正在尝试更新表中的每条记录。如果此 Keysproduct 表是您收到错误的表，这就是原因。

```
 begin          
    update Keysproducts   
    set KeyId = @id, productID = @productid;
 end 
```

# c# - 为什么数组在不同线程访问时表现不同

> ID：11436704
> 
> 赞同：0
> 
> 时间：2012-07-11T16:00:25.770
> 
> 标签：c#, multithreading, performance, semaphore

我需要解析类似于 XML 的大文本。因为它不在内存中的文本（我有一个 StreamReader 对象）将该流放在内存中是我花费最多时间的地方。所以在一个线程上，我将该流放入一个数组（内存）中。我有另一个线程来处理那个数组。但我有奇怪的行为。例如看看这张图片：

![在此处输入图像描述](../Images/ff8ba1f97e944cc653446e56aacebed3.png)

请注意，`listToProcess[counter] = buffer` 现在应该`listToProcess[10] = buffer`注意调试器说`listToProcess[10]=null`为什么！？. 另一个线程只是读取它不修改它们的项目。起初我认为也许另一个线程正在使 item = null 但事实并非如此。为什么我会遇到这种行为？

* * *

**如果你想在这里看到我的代码，它是：**

```
 Semaphore sem = new Semaphore(0, 1000000);
        bool w;
        bool done = false;

        // this task is responsible for parsing text created by main thread. Main thread
        // reads text from the stream and places chunks in listToProces[]
        var task1 = Task.Factory.StartNew(() =>
        {
            sem.WaitOne(); // wait so there are items on list (listToProcess) to work with                
                                // counter to identify which chunk of char[] in listToProcess we are ading to the dictionary
                int indexOnList = 0;

                while (true)
                {
                    if (listToProcess[indexOnList] == null)
                    {
                        if (done)
                            break;

                        w = true;
                        sem.WaitOne();
                        w = false;

                        if (done)
                            break;

                        if (listToProcess[indexOnList] == null)
                        {
                            throw new NotFiniteNumberException();
                        }
                    }

                    // add chunk to dictionary
                    ProcessChunk(listToProcess[indexOnList]);

                    indexOnList++;
                }

        }); // close task1

        bool releaseSem = false;

        // this main thread is responsible for placing the streamreader into chunks of char[] so that
        // task1 can start processing those chunks
        int counter = 0;
        while (true)
        {
            char[] buffer = new char[2048];

            // unparsedDebugInfo is a streamReader object
            var charsRead = unparsedDebugInfo.Read(buffer, 0, buffer.Length);

            if (charsRead < 1)
            {
                listToProcess[counter] = pattern;
                break;
            }

            listToProcess[counter] = buffer;
            counter++;

            if (releaseSem)
            {
                sem.Release();
                releaseSem = false;
            }

            if (counter == 10 || w)
            {
                releaseSem = true;
            }
        }

        done = true;

        sem.Release();
       task1.Wait(); 
```

* * *

## 编辑

换句话说，对不起，我为什么要达到这个断点：

![在此处输入图像描述](../Images/d6152bee42297344a0d27403f10cd697.png)

我认为计数器是问题所在，但也许我的信号量做错了......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:04:22.537

你有一个`counter++`所以你**之前更新的那个**是索引 9，而不是索引 10。

含义：您声称它设置

```
listToProcess[10] = buffer: 
```

不正确：它设置

```
listToProcess[9] = buffer: 
```

# algorithm - 全对最短路径，平局

> ID：11436716
> 
> 赞同：2
> 
> 时间：2012-07-11T16:01:17.717
> 
> 标签：algorithm, graph, shortest-path, tie

我正在创建一个程序，它将计算未加权图中所有节点的 Betwenness **Centrality**。为此，我必须找到 ASSSP（所有单源最短路径）。在创建程序时，我开始意识到最终我会建立联系（从源到目的地的距离相同，但路径不同）。这让我想到了这个问题。我应该如何解决这些关系？如果我使用随机分线器，那么对于相同的输入，中介中心性的每个输出可能会略有不同。让我做一个小的示例图：

```
 A
  / \
B    C
  \ /
   D 
```

现在假设 A 节点是我们希望找到 ASSSP 的源。可以清楚地看到存在两条路径（A->B->D 和 A->C->D），它们的 bot 长度相同，都是最短的。现在我应该选择哪一个，在什么条件下？

**随机决胜局（问题）**

如果我使用随机的决胜局，就像找到的第一个一样，被标记为最短路径（程序是分布式的，所以这个解决方案将以随机方式工作）。然后我会遇到中间中心性问题，因为节点 B 和 C 的值会有所不同；取决于哪个路径被标记为最短。

有谁知道如何解决这个问题，或者我只是错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:20:51.273

要正确计算介数中心性，您*必须*考虑图中的每条最短路径。如果两个节点 A 和 B 之间有*k*条最短路径，则每条最短路径将对路径通过的节点的总介数分数贡献*1/k 。*通常，您不应该通过实际查找（并存储）网络中的所有最短路径来计算中间中心性；有关更有效的算法，请参阅以下论文：

[一种更快的中介中心性算法](http://www.inf.uni-konstanz.de/algo/publications/b-fabc-01.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:47:49.523

很大程度上由于您注意到的问题，介数中心性实际上不是通过仅检查源和目标之间的单个路径来计算的，而是通过计算最短路径的数量来计算的。您需要为此修改合适的最短路径算法，例如 Floyd–Warshall 算法或 Johnson 算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:08:11.473

是的，SSSP 或单源最短路径是计算机科学中非常常见的问题。一个标准做法是，您遇到的第一条路径比其他相同距离的路径短。

例如，在您的示例中，如果在您之前处理`A->B->D`过的算法中`A->C->D`，那么`A->B->D`将是最短路径。

如果事情仍然不清楚，我相信 Dijkstra 的算法就是你所追求的。

# sql - PostgreSQL 索引查询速度不一致

> ID：11436721
> 
> 赞同：3
> 
> 时间：2012-07-11T16:01:38.133
> 
> 标签：sql, performance, postgresql

我们在同一张表上有 2 个相同的（双精度）列，有 2 个相同的索引运行 2 个相同的查询。然而，一个运行速度比另一个快近 10 倍。这是什么原因造成的？

```
1) SELECT MIN("reports"."longitude") AS min_id FROM "reports" WHERE (area2 = 18)

2) SELECT MIN("reports"."latitude") AS min_id FROM "reports" WHERE (area2 = 18) 
```

1 次在 28 毫秒内运行，2 次在 >300 毫秒内运行

以下是“解释”：
1）

```
Result  (cost=6.07..6.08 rows=1 width=0)"
InitPlan 1 (returns $0)"
  ->  Limit  (cost=0.00..6.07 rows=1 width=8)"
      ->  Index Scan using longitude on reports  (cost=0.00..139617.49 rows=22983 width=8)"
            Index Cond: (longitude IS NOT NULL)"
            Filter: (area2 = 18)" 
```

2)

```
Result  (cost=5.95..5.96 rows=1 width=0)"
InitPlan 1 (returns $0)"
  ->  Limit  (cost=0.00..5.95 rows=1 width=8)"
      ->  Index Scan using latitude on reports  (cost=0.00..136754.07 rows=22983 width=8)"
            Index Cond: (latitude IS NOT NULL)"
            Filter: (area2 = 18)" 
```

* * *

这里要求的是解释分析输出...

1)

```
Result  (cost=6.07..6.08 rows=1 width=0) (actual time=10.992..10.993 rows=1 loops=1)"
InitPlan 1 (returns $0)"
    ->  Limit  (cost=0.00..6.07 rows=1 width=8) (actual time=10.985..10.986 rows=1 loops=1)"
          ->  Index Scan using longitude on reports  (cost=0.00..139617.49 rows=22983 width=8) (actual time=10.983..10.983 rows=1 loops=1)"
                Index Cond: (longitude IS NOT NULL)"
                Filter: (area2 = 18)"
Total runtime: 11.033 ms" 
```

2)

```
 Result  (cost=5.95..5.96 rows=1 width=0) (actual time=259.749..259.749 rows=1 loops=1)"
InitPlan 1 (returns $0)"
    ->  Limit  (cost=0.00..5.95 rows=1 width=8) (actual time=259.740..259.740 rows=1 loops=1)"
          ->  Index Scan using latitude on reports  (cost=0.00..136754.07 rows=22983 width=8) (actual time=259.739..259.739 rows=1 loops=1)"
                Index Cond: (latitude IS NOT NULL)"
                Filter: (area2 = 18)"
Total runtime: 259.789 ms"
--------------------- 
```

到底是怎么回事？如何让第二个查询正常运行并快速运行？据我所知，这两种设置都是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:32:32.473

首先，不能保证索引会加快查询速度。其次，在进行性能考虑时，您需要多次运行每个查询。加载索引和将页面加载到缓存中会产生开销，这会影响查询的长度。

我不是 Postgres 的专家，但考虑到这一点，我并不感到惊讶。

查询计划循环遍历索引，找到与 area2 = 18 匹配的相应行，然后希望在第一个处停止（它正在使用索引，因此它可以从最低值开始向上移动）。这是对其工作方式的猜测；我不知道 Postgres 正在这样做。

在任何情况下，发生的情况是该区域更接近经度索引的起点，而不是纬度索引的起点。所以，它首先在那里找到第一个匹配的记录。如果这个解释是正确的，那么与数据库中的其他事物相比，这表明该区域相对西（经度低）和相对北（纬度高）。

顺便说一句，假设有很多区域，在 Area2 上使用索引可能会得到更好的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:13:17.737

您正在进行索引扫描，但检查的记录数取决于您必须在列表的多远才能匹配`area2`条件。

除非您的 area2 分布很奇怪，否则要优化此查询，您应该将复合索引放在`(area2, latitude)`and上`(area2, longitude)`。我怀疑你会得到<10毫秒。PG 还可以`area2`使用其位图堆扫描功能将单独的索引与现有索引组合，以代替复合索引。

# sql-server - 将 datetimeoffset 数据类型转换为 datetime 数据类型导致值超出范围

> ID：11436728
> 
> 赞同：5
> 
> 时间：2012-07-11T16:02:07.963
> 
> 标签：sql-server, datetimeoffset

`LastLogindata`使用 SQL Server 2008。我有一个名为 User 的表，其中有一列`datetimeoffset`数据类型

以下查询适用于生产服务器，但不适用于复制服务器。

```
select top 10 CAST(LastLoginDate AS DATETIME)  from User. 
```

我收到以下错误。将 datetimeoffset 数据类型转换为 datetime 数据类型导致值超出范围。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T13:36:38.660

检查 LastLoginDate 列的值，例如“0001-01-01”或“0001/01/01”。

如果你有办法得到这个错误..

试试这个

```
select top 10  CAST(CASE when cast(LastLoginDate  as varchar) = '0001-01-01 00:00:00' 
                         THEN NULL ELSE GETDATE() end AS DATETIME) from User 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-26T12:01:51.033

如果数据库中的字段是 type`datetimeoffset`类型，那么它应该包含 date 范围内`0001-01-01 through 9999-12-31`。我认为问题是数据库中的日期。

请查看SQL server的官方链接[点击这里](https://docs.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-2017)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-30T16:06:05.710

我是这样解决的。我将一个 nvarchar(max) 列转换为 xml，并使用 T-SQL 表达式[ISDATE()](https://docs.microsoft.com/sql/t-sql/functions/isdate-transact-sql)来排除 where 子句中的错误行。

```
where cast(DataObject as xml).value('(/DataObjects/@LastLoginDate)[1]', 'varchar(10)') is not null
and isdate(cast(DataObject as xml).value('(/DataObjects/@LastLoginDate)[1]', 'varchar(10)')) = 1 
```

# python - 使用 Perl TK 或 Python Tkinter 的自定义窗口

> ID：11436733
> 
> 赞同：1
> 
> 时间：2012-07-11T16:02:22.457
> 
> 标签：python, perl, user-interface, tkinter, tk

通过 Perl TK 或 Python Tkinter 制作的所有窗口看起来都像默认的 Windows 样式窗口，右上角有红色取消按钮，前面是最​​大化和最小化按钮，蓝色顶栏等。是否可以制作自定义窗口，就像我们看到的那样对于下载的软件，从颜色到按钮位置、样式等所有内容都是自定义的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T08:14:44.847

# php - Windows pgpass.conf 文件不适用于 PHP 的 shell_exec()

> ID：11436745
> 
> 赞同：0
> 
> 时间：2012-07-11T16:03:08.753
> 
> 标签：php, windows, postgresql, passwords

我安装了 windows/apache/php/postgres（php 5.3 和 Postgres 9） 我正在尝试从 PHP 执行“psql”命令行，所以为此我需要 psql 不要求输入密码。我已经在`%appdata%/postgresql`路径中有一个 pgpass.conf 文件

如果我从 Windows 命令行执行该行

```
"C:\Program Files\BitNami WAPPStack\postgresql\bin\psql.exe" -U postgres -w -d [DB] < "[SQL FILE]" 
```

它工作正常，但是当使用 shell_exec() 通过 PHP 完成时，它不起作用，apache 错误日志说`"psql: fe_sendauth: no password supplied"`

所以，我不知道为什么它可以从命令行运行，但不能从 PHP 运行`shell_exec()`

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:12:02.020

`%appdata%`apache 的执行环境和您正在测试的 windows 命令行之间可能不一样。通常在 Windows 上，apache 预计会在`LocalSystem`帐户下作为服务运行（请参阅[在 Microsoft Windows 上使用 Apache HTTP Server](http://httpd.apache.org/docs/2.2/platform/windows.html)）

但是您可以将文件存储在 apache 中的环境变量`pgpass.conf`指向的不同位置（应该在 apache 配置文件中或在 php 代码中声明）。`PGPASSFILE``SetEnv`

或者完全避免密码文件，并`PGPASSWORD`在执行之前将环境变量直接设置为密码的值`psql`。

# c++ - 完全与视图层无关的应用程序架构

> ID：11436748
> 
> 赞同：1
> 
> 时间：2012-07-11T16:03:24.987
> 
> 标签：c++, qt, architecture, backbone.js, web-frameworks

我想编写一个**完全**与视图无关的 C++ 应用程序框架。理想情况下，我希望能够使用以下任一作为“前端”

1.  Qt
2.  网页前端

我知道 Web 工具包 (wt) 等开发，但我想避免这些开发，至少有以下原因之一：

1.  他们使用 cgi/fastcgi 方法（使用 Apache 时）

2.  AFAIK，他们强加了一个“前端”框架给你——例如，我不能使用 CakePHP、Symfony、Django 等来创建网页，并且在页面绑定到服务器端 C++ 应用程序时只有“小部件”。我想自由地使用我想要的任何 Web 框架，这样我就可以从许多流行和成熟的模板框架（例如 Smarty 等）中受益。

我认为 MVC 模式的一些变体（不确定哪种变体）在这种情况下可以很好地工作。

这就是我打算继续的方式：

*   模型和控制器层用 C++ 实现
*   插件位于控制器和视图之间
*   该视图是使用 QT 或第三方 Web 框架实现的
*   视图（前端）和插件之间的通信使用以下任一方式完成：

    一世。QT 前端的事件

    ii. Web 前端的 AJAX/PUSH 机制（也许在这里可以使用backbone.js？）

我上面描述的模式是否有一个名称 - 以及（在我开始编码之前），我应该注意什么（如果有的话）有什么陷阱/性能问题（网络延迟除外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:45:26.910

从它的声音来看，它是一个 MVC，插件实现了控制器和视图之间的[桥梁。](http://en.wikipedia.org/wiki/Bridge_pattern)我找不到一个 MVC 变体，它专门有一个桥作为设计的参与者；但是，它们都没有阻止桥接器或其他模式协作或实现 MVC。

实现这一点的困难可能来自桥接抽象。可能很难：

*   Prevent implementation details from affecting the abstraction. For example, if implementation `A` has an error code that is only meaningful to implementation `A` and implementation `B` has an error code that is similar but occurs under different conditions, then how will the errors pass through the abstraction without losing too much meaning?
*   Account for behavioral differences between implementations. This generally requires a solid understanding of the implementation being abstracted so that pre-conditions and post-conditions can be met for the abstraction. For example, if implementation `A` supports asynchronous reads, and implementation `B` only supports synchronous reads, then some work will need to be done in the abstraction layer to to account for the threading.
*   在解耦和性能之间找到可接受的折衷方案。这将是一个平衡的行为。与往常一样，尽量避免过早的优化。通常，为了性能而引入一点耦合比解耦高性能代码更容易。

此外，考虑利用其他模式来帮助解耦。例如，如果具体类型`Foo`需要通过抽象层传递，实现`A`将其转换为`Foo_A`，而实现将其转换为`Foo_B`，则考虑让插件提供一个[Abstract Factory](http://en.wikipedia.org/wiki/Abstract_factory_pattern)。 `Foo`将成为 and 的抽象基类`Foo_A`，`Foo_B`并且插件将提供一个工厂来创建实现`Foo`的对象，从而允许控制器分配插件期望的确切类型。

# sql - 新手的 SQL 帮助

> ID：11436752
> 
> 赞同：1
> 
> 时间：2012-07-11T16:03:41.193
> 
> 标签：sql, database, connection, maintenance

我没有使用 SQL 的经验，但我的任务是构建一个工作报告，我需要创建一个自定义 sql 来获得我们需要的东西。我不知道是否有人可以在不需要更多信息的情况下提供帮助，但我正在创建一份报告，显示我们发送的客户调查结果。我摸索了一下，结果是：

```
SELECT SUR_response.WOPK, SUR_response.completed_YN,
    SUR_response.ip_address, SUR_response.response_end_date,
    SUR_response.response_start_date, SUR_Item.ITEM_TEXT,
    SUR_item_answer.Answer_text, SUR_response_answer.answer_text 
FROM SUR_Item, SUR_response, SUR_Response_Answer, sur_item_answer
JOIN:
WHERE:SUR_Response_Answer.ITEM_ID=100 
```

我试图这样做，`SELECT *`但我不想要`FROM`表格中的所有列。

它已经返回了结果，但是有很多问题，例如它返回了 117 页条目，而应该只有 1 页，最多 8 个条目。它似乎只是一遍又一遍地自我重复。其次，这些行不匹配或不相关。

同样，我刚刚从头开始完成所有这些工作，除了知道表和列之间的区别之外，我不知道我真正在做什么。因此，非常感谢任何帮助或更好的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:43:33.193

好吧，没有太多事情要做，但这是蓝图：

```
SELECT SUR_response.WOPK, SUR_response.completed_YN,
       SUR_response.ip_address, SUR_response.response_end_date,
       SUR_response.response_start_date, SUR_Item.ITEM_TEXT,
       SUR_item_answer.Answer_text, SUR_response_answer.answer_text 
FROM SUR_Item
JOIN SUR_response ON Sur_Item.Item_ID=SUR_response.Item_ID
JOIN SUR_Response_Answer ON Sur_Item.Item_ID=SUR_Answer.Item_ID
JOIN sur_item_answer ON Sur_Item.Item_ID=SUR_Answer.Item_ID
WHERE SUR_Response_Answer.ITEM_ID=100 
```

如果它仍然为您提供额外的行，则需要调整`JOIN`and/or语句以匹配正在连接的表和键。`ON`没有足够的信息告诉我这些表是如何相互关联的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:19:04.903

您很可能缺少必要的连接。连接表示一个表中的字段如何引用另一个表中的另一个字段。如果不知道您的数据结构的详细信息，我们无法告诉您缺少哪些连接。

此链接解释连接： [http ://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# c# - 如何转换泛型参数？

> ID：11436755
> 
> 赞同：7
> 
> 时间：2012-07-11T16:03:52.990
> 
> 标签：c#

这是我要写的内容：

```
public void Foo<T>(T parameter) {
  otherObject.Bar<T>(parameter);
} 
```

Bar() 方法的签名是：

```
public void Bar<T>(T parameter) where T: class 
```

所以我得到一个编译错误，因为 Foo 签名中的 T 没有相同的约束。不幸的是我不能写：

```
public void Foo<T>(T parameter) where T: class {
  otherObject.Bar<T>(parameter);
} 
```

因为 Foo 正在实现一个在外部接口中定义的方法。问题是：

我可以在调用 Bar 之前以某种方式在方法 Foo 中转置 T （注意，我可以确定 T 总是一个类——我只需要通过编译器）。

我发现的唯一方法是使用反射，但我想知道我是否缺少一个更简单的技巧。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T16:10:04.703

您可以像这样使用[`dynamic`关键字](http://msdn.microsoft.com/en-us/library/dd264741.aspx)：

```
public void Foo<T>(T parameter)
{
    dynamic p = parameter

    otherObject.Bar(p);
} 
```

发生的情况是调用的解析`otherObject.Bar`是在运行时进行的，因为其中一个参数的类型为`dynamic`. 假设这`T`是一个引用类型，解析会成功。

当然，这最终会使用反射（如您所指出的），但语法*可能*比您使用的更好。

当然，如果*不是*`T`类，这会给你一个运行时错误。

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T16:11:49.123

```
public void Foo<T>(T parameter)
{
    otherObject.Bar<object>(parameter);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T16:16:17.757

这是对 casperOne 的回答略有不同，使用隐式接口实现：

```
public void Foo<T>(T parameter) where T: class {
    otherObject.Bar<T>(parameter);
}

void IFoo.Foo<T>(T parameter){
    Foo((dynamic)parameter);
} 
```

这使您可以在任何知道它们`.Foo`在编译时调用的特定对象类型的任何东西上包含约束，同时仍然允许您实现`IFoo`接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:12:48.357

如果你是 otherObject.Bar 的所有者，你能不只是删除类约束吗？那个方法。或者创建一个没有约束的新的类似方法？

卡斯珀一。我不确定您的答案是否正确，因为您的 Foo 方法有类约束。该问题表明这是不可能的，因为 Foo 是外部接口的实现。例如，下面的代码不起作用。

```
public void Foo<T>(T param)
    {
        dynamic xx = param;

        this.Bar(param);
    }

    private void Bar<T>(T param) where T: class {

    } 
```

并显示为错误。*

# iphone - 如何绘制带有小标签的视图

> ID：11436756
> 
> 赞同：0
> 
> 时间：2012-07-11T16:03:54.393
> 
> 标签：iphone, uiviewanimation

下面是我想在 iPhone 中显示的图像

![在此处输入图像描述](../Images/830aee0fc47cef2eae2c443d0c6156d9.png)

如何在视图的右上角绘制一个浅绿色的小横幅？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:19:33.087

您需要做几件事。

1.  使用标签创建一个正常的绿色视图。（内部带有 UILabel 的 UIView）
2.  通过在绿色视图上应用设置 a 来旋转绿色视图`CGAffineTransform`。（`transform`财产）
3.  将视图定位在角落。
4.  掩盖绿色视图，使其看起来像包裹蓝色视图，您可以通过使用包含蓝色和绿色视图的视图来做到这一点`clipsToBounds=YES`。

# ruby-on-rails - Nil 的调用 ID - 实例方法

> ID：11436757
> 
> 赞同：0
> 
> 时间：2012-07-11T16:03:54.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, object, activerecord

我对 Rails 比较陌生，我认为我的问题可能部分是由于我对 Ruby 类的性质和范围以及它们产生的对象缺乏清晰的理解。

我收到以下错误：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id

Rails.root: /Users/rmcnairn/rails/search
Application Trace | Framework Trace | Full Trace

app/models/photo.rb:17:in `scanner'
app/controllers/suppliers_controller.rb:66:in `block in update'
app/controllers/suppliers_controller.rb:65:in `update' 
```

创建照片记录后。我想使用该新记录来引用关联记录（Fabric），并在该记录上调用实例方法（Scan）。扫描在 Fabric 类中定义。

我的记录已设置为**照片***has_many* **Fabrics**：*通过* **Fabric_Photos**

这是我的 Photo Class 的快照，我试图找到这个关联并在其上调用 scan 方法。

```
class Photo < ActiveRecord::Base

  has_many :fabrics, :through => :fabric_photos
  has_many :fabric_photos
  after_create :scanner
  accepts_nested_attributes_for :fabrics
  mount_uploader :image, ImageUploader

  def scanner
    if self.fabric == true    #fabric is a boolean column in the Photo table
      self.fabrics.first.scan
   else
    return
   end
  end
end 
```

编辑我添加了相关供应商控制器代码供应商有_很多面料，面料有很多照片

```
 def update
     @supplier = Supplier.find(params[:id])

     respond_to do |format| # line 65
       if @supplier.update_attributes(params[:supplier])
         format.html { redirect_to suppliers_url, notice: @supplier.name.to_s + ' was updated' }
         format.json { head :no_content }
       else
         format.html { render action: "edit", notice: @supplier.name.to_s + ' was NOT updated'  }
         format.json { render json: @supplier.errors, status: :unprocessable_entity }
       end
     end
   end 
```

您是否有可能帮助我更多地了解我正在调用的关联对象的性质和限制，如果有的话，在另一个类中调用它的方法。

我认为

```
self.fabrics.first 
```

正在返回无法调用 .scan 方法的东西。如果有人能向我解释 Active Record 在这里实际产生了什么，那就太好了。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:16:05.947

> 为 nil 调用 id，它会错误地为 4 - 如果你真的想要 nil 的 id，请使用 object_id

问题是`self.fabrics.first`返回零。在底层数据库中，这意味着 Rails 生成的 sql 查询返回 null。

我会查看控制器代码，或者您用于创建模型的任何内容。您可能不会保存/更新相关模型以连接所有内容。此外，查看每个表和那里的记录的 id，以亲自了解创建和未创建的内容。

在数据库中，您应该看到，如果您运行 rails 生成的 sql 代码（查看日志），那么在 fabrics 表中您没有满足查询条件的内容。

# android - ClassCastException：无法将 CustomFragment 强制转换为 android.app.Fragment / 使用 android.support.v4.app.Fragment

> ID：11436758
> 
> 赞同：8
> 
> 时间：2012-07-11T16:04:02.020
> 
> 标签：android, android-fragments, android-support-library

我正在开发一个应用程序，分为一个库和两个应用程序：一个用于手机，另一个用于平板电脑。库中定义了很多代码和布局，而应用程序中只定义了少数部分。

我在 an 中使用片段`Activity`，其中 a`ViewPager`用于电话版本（在库中定义的布局和活动，在电话应用程序中使用时没有更改）。对于平板电脑版本，我想并排显示我的片段 (2)，而不是在 a 中`ViewPager`，所以我尝试构建这样的 XML 布局：

```
<....>
    <LinearLayout
        android:id="@+id/fragmentsParent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <fragment
            android:id="@+id/f1"
            android:class="com.test.Fragment1"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="1" />

        <fragment
            android:id="@+id/f2"
            android:name="com.test.Fragment2"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="1"  />
    </LinearLayout>
</....> 
```

我的问题是代码在我的手机应用程序上运行，但不在我的平板电脑应用程序上运行。在这一点上，我得到了这个异常堆栈：

```
07-11 17:41:14.032: E/AndroidRuntime(14754):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
07-11 17:41:14.032: E/AndroidRuntime(14754):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
07-11 17:41:14.032: E/AndroidRuntime(14754):    ... 11 more

07-11 17:41:14.032: E/AndroidRuntime(14754): Caused by: java.lang.ClassCastException: com.test.Fragment1 cannot be cast to android.app.Fragment

07-11 17:41:14.032: E/AndroidRuntime(14754):    at android.app.Fragment.instantiate(Fragment.java:560)
07-11 17:41:14.032: E/AndroidRuntime(14754):    at android.app.Fragment.instantiate(Fragment.java:535)
07-11 17:41:14.032: E/AndroidRuntime(14754):    at android.app.Activity.onCreateView(Activity.java:4168)
07-11 17:41:14.032: E/AndroidRuntime(14754):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664) 
```

错误消息谈论`android.app.Fragment`我期望的位置`android.support.v4.app.Fragment`。

在网上搜索后，我检查了以下几点：

*   我的活动延伸`android.support.v4.app.FragmentActivity`，
*   我的碎片延伸`android.support.v4.app.Fragment`，
*   我的应用程序使用 support.v4 库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T17:33:44.020

您的 Activity 必须由 FragmentActivity 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:29:31.687

你可能弄错了（混合）进口和instad

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction; 
```

你有

```
import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction; 
```

因此演员表问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T12:07:24.330

我刚刚遇到了同样的问题，在我的情况下，在使用 setContentView(int) 设置布局之前调用 super.onCreate(Bundle) 解决了 ClassCastException

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T08:14:00.057

你有没有以任何方式解决这个问题？如果没有，你应该检查你的清单文件，如果有一个使用你的 Fragments 名称声明的 Activity。（如果是这样，删除它们）

# opengl - 未绘制OpenGL四边形

> ID：11436764
> 
> 赞同：0
> 
> 时间：2012-07-11T16:04:28.653
> 
> 标签：opengl, 3d, drawing

我正在尝试在屏幕上绘制一个四边形（正方形）。我将它插入到一个预先存在的绘制圆柱体的程序中。这是在正交模型视图矩阵中，我几乎肯定剪裁量是正确的（从原点的任何方向都是 200）。在我使用的显示函数中，我推了一个矩阵，向前平移 (0.0,0.0,-20.0)，称为四边形，然后弹出矩阵。我不知道人们使用的任何常见的openGL设置是否可能使其不可见？有没有办法获取当前的剪辑量并在控制台中打印出来？

```
void quadrilateral() 
{
    glLoadIdentity();
    glColor3f(0.5f,0.0f,0.8f);
    glBegin(GL_QUADS);

    glVertex3f(-10.0f,-10.0f,0.0f);
    glVertex3f(-10.0f,10.0f,0.0f);
    glVertex3f(10.0f,10.0f,0.0f);
    glVertex3f(10.0f,-10.0f,0.0f);

    glEnd();
}

//This is called from a main function elsewhere
void draw(void)
{
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(500, 500); 
    glutInitWindowPosition(100, 100);
    glutCreateWindow("Cylinder");
    glutReshapeFunc(CChangeSize);
    glutSpecialFunc(CSpecialKeys);
    glutKeyboardFunc(Ckeyboard);
    glutDisplayFunc(CRenderScene);
    CSetupRC();
    glPopMatrix();
}

void CSetupRC()
{
// Light values and coordinates
GLfloat  ambientLight[] = {0.4f, 0.4f, 0.4f, 1.0f };
GLfloat  diffuseLight[] = {0.7f, 0.7f, 0.7f, 1.0f };
GLfloat  specular[] = { 0.9f, 0.9f, 0.9f, 1.0f};
GLfloat  lightPos[] = { -50.0f, 200.0f, 200.0f, 1.0f };
GLfloat  specref[] =  { 0.6f, 0.6f, 0.6f, 1.0f };

glEnable(GL_DEPTH_TEST);    // Hidden surface removal
glEnable(GL_CULL_FACE);     // Do not calculate inside of solid object
glFrontFace(GL_CCW);

// Enable lighting
glEnable(GL_LIGHTING);

// Setup light 0
glLightModelfv(GL_LIGHT_MODEL_AMBIENT,ambientLight);
glLightfv(GL_LIGHT0,GL_AMBIENT,ambientLight);
glLightfv(GL_LIGHT0,GL_DIFFUSE,diffuseLight);
glLightfv(GL_LIGHT0,GL_SPECULAR,specular);

// Position and turn on the light
glLightfv(GL_LIGHT0,GL_POSITION,lightPos);
glEnable(GL_LIGHT0);

// Enable color tracking
glEnable(GL_COLOR_MATERIAL);

// Set Material properties to follow glColor values
glColorMaterial(GL_FRONT, GL_AMBIENT_AND_DIFFUSE);

// All materials hereafter have full specular reflectivity
// with a moderate shine
glMaterialfv(GL_FRONT, GL_SPECULAR,specref);
glMateriali(GL_FRONT,GL_SHININESS,64);

// Black background
glClearColor(0.0f, 0.0f, 0.0f, 0.0f );

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
glEnable(GL_TEXTURE_2D);

}

// Called to draw scene
void CRenderScene(void)
{
// Clear the window with current clearing color
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Save the matrix state
glMatrixMode(GL_MODELVIEW);
glPushMatrix();

// Rotate about x and y axes
glRotatef(CxRot, 1.0f, 0.0f, 0.0f);
glRotatef(CyRot, 0.0f, 1.0f, 0.0f);

// Draw the cylinder
cylinder();

glPopMatrix();

// CylinderTwo
glMatrixMode(GL_MODELVIEW);
glPushMatrix();

// Rotate about x and y axes
glRotatef(CxRot, 1.0f, 0.0f, 0.0f);
glRotatef(CyRot, 0.0f, 1.0f, 0.0f);

// Draw the cylinder
glRotatef(120.0f, 1.0f, 1.0f, 1.0f);
cylinderTwo();

glPopMatrix();

// Random square
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glTranslatef(-30.0f,20.0f,10.0f);
quadrilateral();
glPopMatrix();

// Swap buffers
glutSwapBuffers(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:24:56.430

看起来您的缠绕顺序不正确：

```
glEnable(GL_CULL_FACE); 
```

这条线意味着它将剔除背面。

```
glFrontFace(GL_CCW); 
```

这会将正面设置为逆时针方向。

```
 glVertex3f(-10.0f,-10.0f,0.0f);
    glVertex3f(-10.0f,10.0f,0.0f);
    glVertex3f(10.0f,10.0f,0.0f);
    glVertex3f(10.0f,-10.0f,0.0f); 
```

在这里，您的顶点按顺时针顺序排列，这意味着您正在背对相机进行绘制。要么禁用剔除：

```
 glDisable(GL_CULL_FACE); 
```

顺时针制作正面：

```
 glFrontFace(GL_CW); 
```

或将顶点的顺序更改为逆时针顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:23:25.367

在我看来，您的四边形向后缠绕。您已启用 GL_CULL_FACE，它会抛出任何顺时针缠绕的多边形，并且您的四边形具有顺时针缠绕。

禁用背面剔除，或将顶点的顺序切换为逆时针。

# web-services - 是否有用于创建和测试（欺骗）REST Web 服务的程序？

> ID：11436765
> 
> 赞同：0
> 
> 时间：2012-07-11T16:04:30.587
> 
> 标签：web-services, rest

我有一些需要测试的 REST Web 服务，我只是想知道是否有一个程序可以简单地创建 REST 请求并查看响应。例如，您输入 url 和 POST 参数并点击发送以查看响应的程序？

我一直在通过代码执行此操作，但我认为可能有更简单的解决方案 - 如果没有，我可能不得不写一个！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:07:25.210

试试这个[http://www.soapui.org/](http://www.soapui.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:09:56.440

*   [curl](/questions/tagged/curl "显示标记为“卷曲”的问题")用于低级 HTTP 访问
*   [SoapUI](http://www.soapui.org/)支持 REST
*   [Firefox 的海报](https://addons.mozilla.org/en-US/firefox/addon/poster/)插件

# facebook - Facebook 活动隐私

> ID：11436766
> 
> 赞同：3
> 
> 时间：2012-07-11T16:04:32.700
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph, privacy

我正在使用 FB Javascript SDK 创建一个活动，该活动发布得很好，但是关于如何设置活动隐私的文档并没有真正给我任何东西。我已关注此页面上的文档：[https ://developers.facebook.com/docs/opengraph/actions/](https://developers.facebook.com/docs/opengraph/actions/)

使用以下代码时出现错误：

```
var fb_privacy = '{"value":"PRIVATE"}';
fb_privacy = encodeURIComponent(fb_privacy);

Error: (#100) privacy must contains a valid privacy 'value' 
```

我也尝试过产生相同错误的值“SELF”。它说隐私应该是一个 JSON 编码的字符串，但我目前似乎无法得到任何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T02:46:37.803

试试这个[https://developers.facebook.com/docs/reference/api/privacy-parameter/](https://developers.facebook.com/docs/reference/api/privacy-parameter/)只有这个文本 {'value':'EVERYONE'} 我在 5 分钟前测试过 =)

使用'不是"

# lotus-notes - 在 XPages/Lotus 中处理多对多关系

> ID：11436769
> 
> 赞同：0
> 
> 时间：2012-07-11T16:04:54.870
> 
> 标签：lotus-notes, xpages, lotus

我有两种形式，公司和客户。一家公司可以有任意数量的客户，一个客户可以是任意数量的公司的客户。我希望能够做一些事情，比如列出给定公司的客户，或者列出给定客户雇用的公司。使用 Domino 数据库结构处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:13:00.517

那没问题。

为公司和客户创建分类视图。然后，将公司名称存储在每个客户文档上，并将客户名称存储在每个公司文档上。使用单类别嵌入式视图在每个表单上列出它们。单击嵌入视图中的名称会打开文档。

或者，为公司-客户关系创建第三种表单类型并使用它来填充嵌入式视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:55:31.767

首先一个问题：客户和公司之间有什么区别？一个关系可以简单地由一个多值字段 ClientOf 表示，该字段存储一个或多个其他公司的键。如果要查找公司 X 的所有客户，则需要在第一列中包含 ClientOf 字段的分类视图。

我想你的问题不是（将是）关系的创建以及维护。您必须自己维护所有内容，即当公司被删除时，您必须自己从 ClientOf 字段中删除对公司的所有引用。当您使用使用@Unique 创建的密钥时，您不必担心公司的名称更改。另一方面，您总是需要进行额外的查找才能找到它的真实名称。

# ruby-on-rails - 为 nil 调用 id，在控制器测试中会错误地为 4

> ID：11436773
> 
> 赞同：1
> 
> 时间：2012-07-11T16:05:05.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的两个测试中有这个错误：

```
test "should create question" do
  assert_difference('Question.count') do
    post :create, question: { question: 'apple', answer: "good", holder_id: 2}
  end
end

test "should not create question" do
  invalid_answer = "a" * 145 
  assert_difference('Question.count',0) do
    post :create, question: { answer: invalid_answer }
  end
  assert_template 'new'
end 
```

我的创建动作

```
#create action
def create
  @question = Question.new(params[:question])
  @holder = Holder.find_by_id(@question.holder.id)
  if @question.save
    flash[:success] = "Question Saved"
      redirect_to holder_path(@question.holder_id)
    else
        render 'new'
    end
end 
```

堆栈跟踪显示它两次都在创建行上。但是，我怎么会得到`Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id`错误？

我是否需要先创建一个对象，然后将其传递给 post create？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:32:47.890

```
 @question = Question.new(params[:question])
  @holder   = Holder.find_by_id(@question.holder.id) 
```

是的，您是对的，您需要在运行此测试之前创建 Holder 实例。

但是你为什么要创建所有的 ivars，你需要新的吗？

如果不是，似乎代码可以干涸到

```
def create
  question = Question.new(params[:question])
  if question.save
    flash[:success] = "Question Saved"
      redirect_to holder_path(question.holder) # but some checks are in order here, no?
    else
        render 'new'
    end
end 
```

HTH 罗伯特

# coldfusion - 如何使用 cfscript 从另一个 cfm 页面调用 cfc 中的 cffunction？

> ID：11436776
> 
> 赞同：11
> 
> 时间：2012-07-11T16:05:24.923
> 
> 标签：coldfusion, cfc

我有一个`test.cfm`页面，想从该页面（test.cfm）调用一个`<cffunction>`命名为`errorEmail`using的 cfc，`<cfscript>` 而不是

```
<cfinvoke component = "#cfcPath#" method = "errorEmail" returnVariable = "myReturn" 
    description = "get list of projman">
</cfinvoke> 
```

我努力了：

```
<cfscript>
   errorEmail(cfcPath);
</cfscript> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T16:22:08.890

我一直这样做。

1）创建对象：

```
<cfscript>
    // CREATE OBJECT 
    TheCFC = createObject("component", "thecfc");
</cfscript> 
```

2）调用函数：

```
<cfscript>
    // CALL THE FUNCTION
    SomeVariable = TheCFC .theFunction();
</cfscript> 
```

你的版本看起来像这样

```
<cfscript>
    // CREATE OBJECT 
    TheObject = createObject("component", "cfcPath");
    // CALL THE FUNCTION
    myReturn = TheObject.errorEmail();
</cfscript> 
```

# python - 有没有办法在 python 脚本中嵌入依赖项？

> ID：11436777
> 
> 赞同：31
> 
> 时间：2012-07-11T16:05:25.470
> 
> 标签：python

我有一个简单的脚本，它依赖于[dnspython](http://pypi.python.org/pypi/dnspython/)来解析区域文件。我想将此脚本作为单个 .py 分发，用户只要安装了 2.6/2.7 就可以运行该脚本。我不想让用户在站点范围内安装依赖项，因为可能与现有的包/版本发生冲突，我也不希望他们与 virtualenv 混在一起。我想知道是否有办法在脚本（gzip/base64）中嵌入像 dnspython 这样的包，并让该脚本在运行时访问该包。也许将其解压缩到 /tmp 中的目录并将其添加到 sys.path？我不关心启动开销，我只想要一个包含所有依赖项的单个 .py，我可以分发它。

此外，没有 C 依赖项可以构建，只有纯 python 包。

编辑：脚本不必是 .py。只要它是一个单一的可执行文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T16:43:53.533

您可以将多个 Python 文件打包成一个 .egg。Egg 文件本质上只是带有明确定义的元数据的 zip 存档 - 查看 setuptools 文档以了解如何执行此操作。根据[文档](http://peak.telecommunity.com/DevCenter/setuptools#eggsecutable-scripts)，您可以通过指定入口点使 egg 文件直接可执行。这将为您提供一个可执行文件，其中可以包含您的代码 + 任何其他依赖项。

编辑：现在我建议建立一个 pex 来做到这一点。pex 基本上是一个具有非 stdlib 依赖项的可执行 zip 文件。它不包含 python 发行版（如 py2app/py2exe），但包含其他所有内容，并且可以使用单个命令行调用来构建。[https://pex.readthedocs.org/en/latest/](https://pex.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T17:03:26.313

最简单的方法是将`__main__.py`使用纯 Python 依赖项命名的 Python 脚本放在一个 zip 存档中，[例如](https://stackoverflow.com/a/5356563/4279).

否则[PyInstaller](http://www.pyinstaller.org/)可用于生成独立的可执行文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:41:08.480

请不要这样做。如果你这样做，不要养成它的习惯。

*   pydns 已获得 BDS 许可，但如果您尝试以这种方式“嵌入”gpl 模块，您可能会遇到麻烦
*   你可以学习使用[setuptools](http://pypi.python.org/pypi/setuptools/)从长远来看你会更快乐
*   setuptools 将处理您确定的依赖项的安装（我不确定您使用的 pydns 是否是纯 python，因此如果您尝试在不了解他们的环境的情况下自己添加它，可能会给您的用户带来问题）
*   您可以设置一个 url 或 pypi，以便人们可以使用 easy_install -U 升级您的脚本

# mysql - 优化查询

> ID：11436779
> 
> 赞同：0
> 
> 时间：2012-07-11T16:05:35.733
> 
> 标签：mysql

我有一个从数据库中选择任何信息的查询。我将使用此信息来定义商品价格。问题是查询需要 3 秒才能执行。对于许多文章来说，这个时间必须是乘数。

如何优化此查询？在 articoli 表中有 16 330 行。

这是查询

```
SELECT ts_scon, AI_CODICIVA, 
       AI_LIS_EURO1, AI_LIS_EURO2, 
       AI_LIS_EURO3, AI_LIS_EURO4, 
       AI_LIS_EURO5, cl_tipocl
  FROM tabscon, articoli, clienti
 WHERE ts_azienda = 'SRL' 
   AND AI_AZIENDA = 'SRL'
   AND AI_CODIREST = $cod_articolo 
   AND cl_azienda = 'SRL' 
   AND cl_codice = $cod_cliente
   AND ts_codice IN (
        SELECT cl_tabsco 
          FROM clienti 
         WHERE cl_codice = $cod_cliente 
           AND CL_AZIENDA = 'SRL')
   AND ts_grusco IN (
        SELECT ai_grupscon 
          FROM articoli 
         WHERE ai_codirest = $cod_articolo  
           AND AI_AZIENDA = 'SRL') 
```

* * *

这是 EXPLAIN 结果。结果与没有索引的索引相同。

> id|select_type|table|type|possible_keys|key|key_len|ref|rows|Extra 1|PRIMARY|clienti|const|PRIMARY|PRIMARY|25|const,const|1
> 1|PRIMARY|tabscon|ref|PRIMARY,azie_grsco_codice| PRIMARY|15|const|505|使用 where 1|PRIMARY|articoli|ALL|PRIMARY,barcodeidx,StatoAidx,Statoidx|NULL|NULL|NULL|16333|使用 where; 使用连接缓冲区 3|DEPENDENT SUBQUERY|articoli|ref|PRIMARY,barcodeidx,StatoAidx,Statoidx StatoAidx|15|const|7311|使用 where 2|DEPENDENT|SUBQUERY|clienti|const|PRIMARY

抱歉，订单很少，但还不实用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:22:12.977

我这样解决了

```
SELECT ts_scon, AI_CODICIVA, AI_LIS_EURO1, AI_LIS_EURO2, AI_LIS_EURO3, AI_LIS_EURO4, AI_LIS_EURO5, cl_tipocl
FROM tabscon ts JOIN articoli a ON ts.ts_grusco = a.ai_grupscon, clienti
WHERE ts_azienda = 'SRL' AND AI_AZIENDA = 'SRL' AND AI_CODIREST = $cod_articolo AND cl_azienda = 'SRL' AND cl_codice = 1128
AND ts_codice IN (SELECT cl_tabsco FROM clienti WHERE cl_codice = 1128 AND CL_AZIENDA = 'SRL') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:49:27.467

查询明智的最好方法是。

```
SELECT ts_scon, a.AI_CODICIVA, 
  a.AI_LIS_EURO1, a.AI_LIS_EURO2, 
  a.AI_LIS_EURO3, a.AI_LIS_EURO4, 
  a.AI_LIS_EURO5, c.cl_tipocl
FROM tabscon t
JOIN articoli a ON ts_azienda = ai_azienda
JOIN articoli a2 ON ts_azienda = a2.ai_azienda AND a2.ai_codirest = $cod_articolo AND a2.ai_grusco = ts_grusco
JOIN clienti c ON ai_azienda = cl_azienda
JOIN clienti c2 ON ai_azienda = c2.cl_azienda AND c2.cl_codice = $cod_cliente AND c2.cl_tabsco = ts_codice
WHERE ts_azienda = 'SRL' 
AND AI_CODIREST = $cod_articolo 
```

也就是说，我不确定您要在这里获取什么信息；您可能不需要两次加入这些表，但如果不了解数据，我无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:51:17.217

如果您还没有索引，您肯定会需要一些索引。在不了解您的应用程序的情况下，要准确找出索引在哪里会有所帮助是一种猜测。话虽如此，尝试将索引放在

```
articoli.ai_azienda
articoli.ai_codirest

tabscon.ts_azienda
tabscon.ts_codice

clienti.cl_azienda
clienti.cl_codice 
```

在添加这些索引之前使用 EXPLAIN 命令，然后将它们一一添加并再次使用 EXPLAIN，看看哪些确实有所作为。

此外，您的查询似乎返回了 $cod_articolo 和 $cod_clienti 的单个值的结果。如果您的业务逻辑以这种方式工作，您可能会尝试处理您的查询，以便它返回特定 $cod_clienti 的所有文章。查询仍然可能需要一段时间，但它会返回一大堆行，而不仅仅是一行。

# c# - ITestCaseResult.Iterations.Count 为带有迭代的测试返回 0

> ID：11436780
> 
> 赞同：1
> 
> 时间：2012-07-11T16:05:40.577
> 
> 标签：c#, visual-studio-2010, .net-4.0, webtest, tfs-sdk

我有几个使用数据源的简单 Web 测试。每个 Web 测试只包含一个请求。

在它们运行之后，很难检测到它们失败的原因，因为它们有很多（80）并且每个都有许多在 1 到 150 之间变化的行。

因此，在将测试结果发布到 TFS 中的构建后，我使用 TFS SDK 以编程方式访问结果。

这是代码的相关部分：

```
foreach (var testRun in testRuns)
{
    Console.WriteLine(string.Format("{0}", testRun.Title));
    ITestCaseResultCollection testCases = testRun.QueryResults();
    foreach (ITestCaseResult testcase in testCases)
    {
        Console.WriteLine(string.Format("{0}: {1}", testcase.TestCaseTitle, testcase.Outcome));
        if (TestOutcome.Passed != testcase.Outcome)
        {
            Console.WriteLine(string.Format("\tNumber of iterations: {0}", testcase.Iterations.Count));
            foreach (ITestIterationResult iteration in testcase.Iterations)
            {
                Console.WriteLine(string.Format("\t{0}: {1}", iteration.IterationId, iteration.Outcome));
            }
        }
    }
} 
```

问题是 testcase.Iterations.Count 始终为 0。其他所有内容都正确显示。如果我从 Visual Studio 打开测试结果，我可以看到每个迭代和详细信息。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:53:46.117

在调查了更多之后，我意识到我找错了地方。

我感兴趣的是获取数据绑定测试所针对的所有行的详细信息，而 ITestCaseResult.Iterations 指向为某个测试用例定义的迭代。

通过访问测试用例结果的附件来检索我感兴趣的信息：

```
foreach (ITestAttachment att in testCaseResult.Attachments)
{
    Console.WriteLine(string.Format("{0}\t{1}", att.Name, att.AttachmentType));
} 
```

尤其是具有这些类型的那些： TmiTestResultDetail TmiTestRunReverseDeploymentFiles

如何提取这些附件中的信息是一个不同的问题。:)

# android - 带有 3.3 内核的 ICS Android 在初始化期间失败

> ID：11436783
> 
> 赞同：1
> 
> 时间：2012-07-11T16:05:48.230
> 
> 标签：android, kernel, android-source

我已经构建了 ICS，并希望使用 3.3 版 Linux 内核让它在我的硬件上运行。

当开发板启动时，Android 会启动 init 进程，但所有进程都会被终止，消息类似于：

```
[    7.600000] init: waitpid returned pid 2228, status = 0000000b
[    7.600000] init: process 'vold', pid 2228 exited
[    7.600000] init: process 'vold' killing any children in process group 
```

最后，董事会放弃了以下信息：

```
[   28.090000] init: critical process 'servicemanager' exited 4 times in 4 minutes; rebooting into recovery mode 
```

我曾尝试将 logcat 放入我的 init.rc，但它似乎永远无法到达或成功加载 logcat，因此我无法从设备中获取更详细的日志信息。

在我的内核配置中，我设置了 ANDROID_BINDER_IPC、ASHMEM、ANDROID_LOGGER、ANDROID_TIMES_OUTPUT、ANDROID_LOW_MEMORY_KILLER 和 ANDROID_SWITCH。还有什么我错过的吗。我希望在阅读[http://kernelnewbies.org/Linux_3.3#head-b733d694037e0b34ad47e1b5d38ebc4d1bd1d89f](http://kernelnewbies.org/Linux_3.3#head-b733d694037e0b34ad47e1b5d38ebc4d1bd1d89f)之后，使用 Kernel 3.3 可以更轻松地启动和运行 Android。

有没有人见过这个问题，或者任何人都可以帮助我获得更多的日志数据？

提前谢谢了，

马库斯

# packages - Linux 软件包存储库和通用软件工件存储库之间的差异

> ID：11436785
> 
> 赞同：2
> 
> 时间：2012-07-11T16:05:57.923
> 
> 标签：packages, repository, artifacts

我一直在研究[Artifactory](http://www.jfrog.com/)、[Nexus](http://www.sonatype.org/nexus/)和[Archiva](http://archiva.apache.org/)等软件工件存储库。像这样的工件存储库在具有依赖管理和自动构建工具的持续集成环境中表现良好。它们在很大程度上受到 Maven 的影响。

我也知道 Linux 软件包存储库，例如 Debian 或 RedHat 使用的。使用这些系统，下载和安装具有所有必要依赖项的软件非常容易。

类 Maven 存储库和 Linux 包存储库之间的主要区别是什么？是否有任何根本不同的设计目标？除了平台实现，它们可以互换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:37:10.980

Artifactory 有[YUM 插件](http://wiki.jfrog.org/confluence/display/RTF/YUM+Repositories)，这使它能够像任何标准的 HTTP 公开 YUM 服务器一样运行（用于部署和解析）。

对 Debian 软件包的支持也在路线图上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-14T16:32:02.983

那里的各种工件创建应用程序不会做任何 rpm 或 deb 不会做的事情，实际上它们通常的能力要差得多，而且要复杂得多。我怀疑避免使用 deb 或 rpm 的最大问题是无知。另一个是工件与操作系统无关（尽管构建肯定不是）并且与分发无关，所以有，但我认为没有任何显着优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:15:12.153

**Linux 软件包存储库**

*   主要服务于最终用户软件，但也可以服务于开发人员库
*   发布版本很流行，有时可以使用快照版本
*   通常自动安装或删除的传递依赖项
*   用于频繁安装包，不经常删除
*   软件包安装在单个系统范围的位置
*   仅提供特定于发行版的 Linux 软件
*   服务器在 Linux 上运行
*   用于浏览和下载的命令行或图形工具

**软件工件存储库**

*   主要服务于开发者库，但也可以服务于最终用户软件
*   发布和快照构建都很常见
*   传递依赖项以各种方式处理，具体取决于包
*   包本质上是缓存在用户的机器上，可能会经常被清除
*   包是按项目缓存的，而不是系统范围的
*   为任何操作系统提供软件
*   服务器在任何桌面或服务器操作系统上运行
*   用于浏览和下载的 Web 界面
*   支持多种协议（Maven、Ivy、NuGet、P2等）

# ubuntu - Ubuntu Upstart - 在 MySQL 启动之前运行脚本

> ID：11436790
> 
> 赞同：1
> 
> 时间：2012-07-11T16:06:10.310
> 
> 标签：ubuntu, upstart

在 Ubuntu 服务器上启动 mysql 之前，我需要运行另一个脚本来设置一些东西。mysql由Upstart系统启动。我从未听说过 Upstart，但我现在已经阅读了文档，并且我认为对于如何实现这一点有一些选择，但我会感谢更有经验的 Upstart 用户确认或以其他方式确认我的结论。

在下面的四个选项中，我更喜欢最后一个，因为它不涉及更改 mysql.conf 作业。

```
mysql.conf:
pre-start script
    mkdir -p /mnt/mysql
    [ -L /var/lib/mysql ] || ln -s /mnt/mysql /var/lib/mysql
    /usr/bin/mysql_install_db --user=mysql
chown mysql:mysql /var/lib/mysql/mysql/.
chown mysql:mysql /var/lib/mysql/mysql/*
end script

mysql.conf
pre-start exec /var/myscriptfile (where myscriptfile contains mkdir -p /mnt/mysql etc)

mysql.conf
start on started mysql-primer
(where mysql-primer is an Upstart job that does mkdir etc)

mything.conf
start on starting mysql
task
script
    mkdir -p /mnt/mysql
    [ -L /var/lib/mysql ] || ln -s /mnt/mysql /var/lib/mysql
    /usr/bin/mysql_install_db --user=mysql
chown mysql:mysql /var/lib/mysql/mysql/.
chown mysql:mysql /var/lib/mysql/mysql/*
end script 
```

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:49:58.230

你的最后一个想法是完全正确的：

神话.conf：

```
start on starting mysql
task
script
    mkdir -p /mnt/mysql
    [ -L /var/lib/mysql ] || ln -s /mnt/mysql /var/lib/mysql
    /usr/bin/mysql_install_db --user=mysql
    chown mysql:mysql /var/lib/mysql/mysql/.
    chown mysql:mysql /var/lib/mysql/mysql/*
end script 
```

启动事件会阻止任何在其上启动的任务，直到所述任务完成。

# java - 什么时候应该使用泛型来定义类型之间的关系？

> ID：11436792
> 
> 赞同：18
> 
> 时间：2012-07-11T16:06:21.507
> 
> 标签：java, generics

当使用泛型时，这里有点混乱。我看过[Java泛型？](https://stackoverflow.com/questions/1301826/java-generics?rq=1)但仍有几个问题。

说我有：

```
public class Honda implements ICar(){
}

public class Opel implements ICar(){
} 
```

我应该使用：

```
public class Person{
    ICar car;
    .
    .
    public Person (ICar c){
        car = c;
    }
} 
```

或者

```
public class Person<T extends ICar>{
    T car;
    .
    .
    public Person(T c){
        car = c;
    }
} 
```

还是取决于执行的任务？

仅用于聚合关系（容器等）的泛型；也就是说，它们只是用于收藏吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T16:18:56.660

一个人通常不会用一种汽车参数化。只有非常讨厌的人是由他们的汽车定义的。人们也（及时）更换汽车。所以我不会参数化类，如果只是为了语义。

在进入这些编程细节之前，想想你试图从现实世界中模仿什么。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-11T16:28:52.227

区别并不总是很明确，但这里有一些线索：

1.  尝试将它们视为“类型参数”（它们是。）它们与类相关联，但不一定与它相关。（以集合框架为例。）
2.  类型参数只有在对象的整个生命周期内都不会改变时才能使用。这听起来很明显，但它是决定何时不使用泛型的非常方​​便的规则。（例如可以换车的人。）
3.  另一方面，如果没有多少实例会使用类型参数，如果它太可选，那也不是一个好主意。（很多人可能根本没有汽车。）

最后，我发现一个非常有用的一般想法：如果您不确定，不要害怕制作原型。以两种方式编写代码，并检查哪一种看起来更简单、更容易理解。在没有任何解释的情况下将其展示给其他人，或者可能等待一两天，然后自己重​​新阅读代码。然后把另一个扔掉。丢弃代码是好的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-11T18:29:55.667

如果您有任何方法可以获取或返回任何涉及 T 的内容，或者其他人可以访问您的`car`字段，则您需要泛型版本。（由于您没有显示任何方法，因此我们无法确定。）

例如，使用泛型版本，您可以拥有类似 的方法`T someMethod();`，然后当有人拥有 时，他们知道他们可以在调用时`Person<Honda>`得到返回，而不是如果您没有泛型，则可以得到一些未知类型的汽车。`Honda``someMethod`

类似地，使用泛型版本，您可以拥有类似 的方法`void anotherMethod(T anotherCar);`，然后当有人拥有 a 时`Person<Honda>`，这会强制他们将 a 传递`Honda`给此方法，而不是任何汽车。

所以基本上，拥有一个泛型类可以让您在以后对对象的使用进行限制（方法调用等）。如果构造函数是您使用 T 的唯一地方，并且您不需要在任何方法或字段中使用 T，那么是的，没有意义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-11T16:12:53.397

这与使用继承与组合有关。

在不知道任何其他语义的情况下，组合似乎更相关。一个人可以换车，但不会变成另一个人。

[http://www.artima.com/objectsandjava/webuscript/CompoInherit1.html](http://www.artima.com/objectsandjava/webuscript/CompoInherit1.html) http://en.wikipedia.org/wiki/Composition_over_inheritance

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T16:11:55.343

我倾向于支持组合（你称之为动态绑定），特别是在你使用的情况下。一个人不是 ICar 的一种，所以在这里使用泛型有点奇怪（无论如何对我来说）。我会使用泛型来表示“ICar 的容器”，就像在 Garage 中一样，尽管在这种情况下，我可能只使用集合类型作为变量，或者如果真的需要扩展集合类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T16:33:52.310

我建议首先关注语义：

假设您可能有一个`Bmw`和一个`Toyota`实现`ICar`接口的类，然后提出这个问题：可以`Person`改变他的汽车还是如果他这样做会是一个不同的人？

`Person`如果出于某种原因您需要将现有人员实例中的`car`属性值从`Toyota`更改为，泛型方法将强制您创建一个新实例`Bmw`，因此，这个新人将与前一个不同。当然，您可以创建第一个`Person`实例，`Person<ICar>`而不是将其挂钩到特定的汽车类，但是，为什么要使用泛型呢？

# java - jstack 无法创建线程转储 - 线程 745：（状态 = BLOCKED）堆栈行走期间发生错误）

> ID：11436793
> 
> 赞同：2
> 
> 时间：2012-07-11T16:06:23.817
> 
> 标签：java, jboss-4.2.x, thread-dump, heap-dump, jstack

当我们在 Linux 上使用 $JAVA_HOME/bin/jstack 为 JBoss 4.2.3.GA 生成线程转储时......我们得到这个错误：

```
Can't create thread dump - Thread 745: (state = BLOCKED) Error occurred during stack walking) 
```

任何想法为什么会发生这种情况？我想也许有人在同时运行堆转储。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:50:32.257

那时 GC 正在运行时，线程转储失败。

手头的问题使 GC 运行，这也是首先进行线程转储的原因。

我们采取了多种方法来解决这个问题。

1.  cron 作业每 5 分钟生成一次线程转储（这样当问题发生时，我们总是有一个描述 JVM 正在做什么的最近的线程转储）
2.  在杀死进程时使用 kill -3。

# symfony - 使用 Symfony2 在一个控制器中处理两种表单

> ID：11436794
> 
> 赞同：0
> 
> 时间：2012-07-11T16:06:30.827
> 
> 标签：symfony, doctrine

嘿，我在我的网站上以两种不同的语言保存每一页。我想用我目前正在使用 symfony2 开发的管理区域来管理我的页面。

以下控制器代码能够在同一页面上显示两个表单，其中包含来自数据库的正确数据。一种管理 DE 语言的形式和另一种管理 EN 的形式：

看法：

```
<form action="{{ path('admin_about') }}" method="post" {{ form_enctype(formEN) }}>
            {{ form_widget(formEN) }}

            <button type="submit" class="btn btn btn-warning" naem="EN">Save</button>
        </form>

        <form action="{{ path('admin_about') }}" method="post" {{ form_enctype(formDE) }}>
            {{ form_widget(formDE) }}

            <button type="submit" class="btn btn btn-warning" name="DE">Save</button>
        </form> 
```

控制器：公共函数 aboutAction(Request $request) {

```
 $pageEN = $this->getDoctrine()
    ->getRepository('MySitePublicBundle:Page')
    ->findOneBy(array('idName' => 'about', 'lang' => 'EN'));

    $pageDE = $this->getDoctrine()
    ->getRepository('MySitePublicBundle:Page')
    ->findOneBy(array('idName' => 'about', 'lang' => 'DE'));

    if (!$pageDE) {
        throw $this->createNotFoundException('About page (DE) not found.');
    }

    if (!$pageEN) {
        throw $this->createNotFoundException('About page (EN) not found.');
    }

    $formDE = $this->createFormBuilder($pageDE)
        ->add('title', 'text')
        ->add('content', 'text')
        ->getForm();

    $formEN = $this->createFormBuilder($pageEN)
        ->add('title', 'text')
        ->add('content', 'text')
        ->getForm();

    //Save Form here

    return $this->render('MySitePublicBundle:Admin:about.html.twig', array(
        'aboutPageDE' => $pageDE, 'aboutPageEN' => $pageEN, 'formDE' => $formDE->createView(), 'formEN' => $formEN->createView(),
    ));
} 
```

**我的问题是：如何从一个控制器中保存已使用的表单？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:15:04.213

基于 Symfony2 Docs 的[Forms and Doctrine](http://symfony.com/doc/current/book/forms.html#forms-and-doctrine)部分（或者在您的情况下，因为您[没有使用 Form 类](http://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class)）-

所以你`//save form here`假设你已经设置`MySitePublicBundle:Page`保存`Title`and `Content`（并且有正常的getter/setter）。

```
if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);

    // data is an array with "title" and "content" keys
    $data = $form->getData();

    // You'll need to have some switch depending on which language you're dealing
    // with... (unless its both, then just repeat for $pageDE)

    $pageEn->setTitle($data['title']);
    $pageEn->setContent($data['content']);

    $em = $this->getDoctrine()->getEntityManager();
    $em->persist($pageEn);
    $em->flush();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:18:47.583

在您的控制器中，您可以测试请求是否包含表单，例如：

```
if($this->getRequest()->get('form1')) {
    //
} elseif($this->getRequest()->get('form2')) {
    //
} 
```

# ajax - 在单个 AJAX 调用上返回多个部分视图

> ID：11436796
> 
> 赞同：1
> 
> 时间：2012-07-11T16:06:32.630
> 
> 标签：ajax, asp.net-mvc-3, partial-views

我知道这个问题已经被问过很多次了，但我相信我的情况有点不同，我只是在寻找处理它的最佳方法。

我有 3 个局部视图和 3 个相应的视图模型。一个用于类别、部门和产品。

一个类别包含一个部门的集合。一个部门包含一个产品的集合。

在我的主视图中，我在 3 个局部视图上调用 RenderPartial ...

```
@{ Html.RenderPartial("_Categories", Model.Categories); }
@{ Html.RenderPartial("_Divisions", Model.Divisions); }
@{ Html.RenderPartial("_Products", Model.Products); } 
```

我使用 jQuery 来更新相应的部分视图作为所选类别、部门和产品的更改。

现在问题出在哪里......当我选择一个类别时，我使用该类别的部门更新部门部分。但我还想做的是根据第一个部门更新产品部分收集，因为最初没有选择任何部门。

我想出了几个不同的选择来处理这个问题，我不确定什么是最好的方法......

1.  我可以等到我的第一个 AJAX 调用返回并包含部门集合，然后再进行第二个 AJAX 调用来更新产品。但是出于明显的性能考虑，我不想这样做

2.  我可以构造我的局部视图，使 Category 局部视图包含 Division 局部视图，而 Division 局部视图包含 Products 局部视图。这样，当我的类别发生变化时，我可以通过一次 AJAX 调用更新产品。我遇到的问题是......将在我的部门和产品部分视图之间定义的所有静态 HTML 将在每个 AJAX 调用上传递。

3.  我可以修改我的 AJAX 调用以返回包含所有模型的 JSON 对象并更新视图客户端。但是，我非常喜欢能够修改视图在服务器中的呈现方式的灵活性。而不是连接一堆客户端的html。

如果我可以通过一个 AJAX 调用返回多个部分视图，那么这将解决我的问题。但是，如果我在架构上做错了什么，我很乐意改变它。有什么建议吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:41:28.667

第四个选项是返回一个 razor 视图，其中 ContentType 设置为 text/javascript 作为响应。Razor 将渲染部分视图，但随后浏览器将执行 javascript 来更新 DOM。

您必须确保您的 ajax 调用正确完成，以便它执行响应。

```
$("#Categories").html('@Html.RenderPartial("_Categories", Model.Categories)')
$("#Divisions").html('@Html.RenderPartial("_Divisions", Model.Divisions)')
$("#Products").html('@Html.RednerPartial("_Products", Model.Products)') 
```

# sql - 在 ORDER BY 之后插入空白行到结果

> ID：11436797
> 
> 赞同：7
> 
> 时间：2012-07-11T16:06:40.460
> 
> 标签：sql, oracle

我有 SQL 查询，我想在结果中添加插入空白行，以便轻松查看结果。我想在 ORDER BY 之后插入它。不知道能不能做到。

这是我的选择声明。

```
SELECT TableName.CREWACTIONFACTID
      ,TableName.CREWKEY as CrewKey
      ,TableName.EVENTKEY as EventID
      ,TableName.ACTIONSEQUENCE
      ,case TableName.ACTIONTYPE
            when 'DISPATCHED' then '2-Dispatched'
            when 'ASSIGNED' then '1-Assigned'
            when 'ENROUTE' then '3-Entoute'
            when 'ARRIVED' then '4-Arrived'
            else 'unknown'
            end  as Type
      ,TableName.STARTDATETIME as StartTime
      ,TableName.ENDDATETIME as EndTIme
      ,TableName.DURATION as Duration

  FROM DatabaseName.TableName TableName
  where 
    To_Date(to_char(TableName.STARTDATETIME, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY')
    AND To_Date(to_char(TableName.ENDDATETIME, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY')
   ORDER BY TableName.EVENTKEY, TableName.STARTDATETIME,TableName.ACTIONSEQUENCE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:14:58.430

你可以，就像 Michael 和 Gordon 所做的那样，在 上添加一个空行`union all`，但你需要在 之前有它`order by`：

```
...
and to_date(to_char(t.enddatetime, 'DD-MON-YYYY')) <=
    to_date('?DATE2::?','MM/DD/YYYY')
union all
select null, null, null, null, null, null, null, null
from dual
order by eventid, starttime, actionsequence; 
```

...并且您不能`case`直接使用 Gordon 在中的那个，`order by`因为它不是一个选定的值——您将得到一个 ORA-07185。（请注意， 中的列名是您在 中分配`order by`的*别名*`select`，而不是表中的别名；并且您不包括表名/别名；并且没有必要为`null`联合部分中的列设置别名，但为了清楚起见，您可能需要这样做）。

但这依赖于`null`在任何实际值之后进行排序，这可能并非总是如此（不确定，但可能会受到 NLS 参数的影响），并且不知道实际`eventkey`是否永远存在`null`。因此，在查询的两个部分中引入一个虚拟列并将其用于排序可能更安全，但通过嵌套查询将其从结果中排除：

```
select crewactionfactid, crewkey, eventid, actionsequence, type,
    starttime, endtime, duration
from (
    select 0 as dummy_order_field,
        t.crewactionfactid,
        t.crewkey,
        t.eventkey as eventid,
        t.actionsequence,
        case t.actiontype
            when 'DISPATCHED' then '2-Dispatched'
            when 'ASSIGNED' then '1-Assigned'
            when 'ENROUTE' then '3-Enroute'
            when 'ARRIVED' then '4-Arrived'
            else 'unknown'
        end as type,
        t.startdatetime as starttime,
        t.enddatetime as endtime,
        t.duration
    from schema_name.table_name t
    where to_date(to_char(t.startdatetime, 'DD-MON-YYYY')) >=
        to_date('?DATE1::?','MM/DD/YYYY')
    and to_date(to_char(t.enddatetime, 'DD-MON-YYYY')) <=
        to_date('?DATE2::?','MM/DD/YYYY')
    union all
    select 1, null, null, null, null, null, null, null, null
    from dual
)
order by dummy_order_field, eventid, starttime, action sequence; 
```

不过，日期处理很奇怪，尤其是`to_date(to_char(...))`零件。看起来您只是想丢失时间部分，在这种情况下，您可以`trunk`改用：

```
where trunc(t.startdatetime) >= to_date('?DATE1::?','MM/DD/YYYY')
and trunc(t.enddatetime) <= to_date('?DATE2::?','MM/DD/YYYY') 
```

但是将任何函数应用于日期列会阻止使用任何索引，所以最好不要管它，让变量部分处于正确的状态以进行比较：

```
where t.startdatetime >= to_date('?DATE1::?','MM/DD/YYYY')
and t.enddatetime < to_date('?DATE2::?','MM/DD/YYYY') + 1 
```

增加了`+ 1`一天，所以 id`DATE2`是`07/12/2012`，过滤器是`< 2012-07-13 00:00:00`，与 相同`<= 2012-07-12 23:59:59`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T16:14:50.867

你的问题比较复杂。SQL 仅通过 order by 保证结果的排序。它不保证之后会发生什么。因此，您必须放入空白行，然后添加信息后记：

```
<your select query minus the order by>
union all
select NULL as CrewActionFatId, . . .
order by (case when CrewActionFactId is NULL then 1 else 0 end),
         TableName.EVENTKEY, TableName.STARTDATETIME,TableName.ACTIONSEQUENCE 
```

在实践中，@Michael 的解决方案通常会起作用。但不能保证。

此外，您应该决定是否需要空白或 NULL。我猜第一个 id 是一个数字，所以我将它设置为 NULL。

通常，此类表示细节由调用应用程序处理。也许您需要更好的 SQL 查询工具来更清晰地查看数据。

这是完整查询的样子（所有字段都设置为 NULL，如果您愿意，可以将其更改为空白）：

```
SELECT TableName.CREWACTIONFACTID, TableName.CREWKEY as CrewKey,
       TableName.EVENTKEY as EventID, TableName.ACTIONSEQUENCE,
       (case TableName.ACTIONTYPE
            when 'DISPATCHED' then '2-Dispatched'
            when 'ASSIGNED' then '1-Assigned'
            when 'ENROUTE' then '3-Entoute'
            when 'ARRIVED' then '4-Arrived'
            else 'unknown'
        end) as Type,
       TableName.STARTDATETIME as StartTime,
       TableName.ENDDATETIME as EndTIme,
       TableName.DURATION as Duration
FROM DatabaseName.TableName TableName
where To_Date(to_char(TableName.STARTDATETIME, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY') AND
      To_Date(to_char(TableName.ENDDATETIME, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY')
union all
SELECT NULL AS CREWACTIONFACTID, NULL AS CrewKey, NULL AS EventID,
       NULL AS ACTIONSEQUENCE, NULL AS Type, NULL AS StartTime, NULL AS EndTime,
       NULL AS Duration
from dual
ORDER BY (case when CrewActionFactId is NULL then 1 else 0 end),
         TableName.EVENTKEY, TableName.STARTDATETIME, TableName.ACTIONSEQUENCE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T16:09:52.317

可以肯定的是，这是一个奇怪的请求，但是可以通过`UNION`对一行文字空白值进行 a 来完成。为确保 order-by 应用于实际查询，请将整个内容包含在`()`其中，然后将其与空白行合并。

```
SELECT * FROM
(SELECT TableName.CREWACTIONFACTID
  ,TableName.CREWKEY as CrewKey
  ,TableName.EVENTKEY as EventID
  ,TableName.ACTIONSEQUENCE
  ,case TableName.ACTIONTYPE
        when 'DISPATCHED' then '2-Dispatched'
        when 'ASSIGNED' then '1-Assigned'
        when 'ENROUTE' then '3-Entoute'
        when 'ARRIVED' then '4-Arrived'
        else 'unknown'
        end  as Type
  ,TableName.STARTDATETIME as StartTime
  ,TableName.ENDDATETIME as EndTIme
  ,TableName.DURATION as Duration
FROM DatabaseName.TableName TableName
where 
To_Date(to_char(TableName.STARTDATETIME, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY')
AND To_Date(to_char(TableName.ENDDATETIME, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY')
ORDER BY TableName.EVENTKEY, TableName.STARTDATETIME,TableName.ACTIONSEQUENCE
)
UNION ALL
SELECT 
  '' AS CREWACTIONFACTID,
  '' AS CrewKey,
  '' AS EventID,
  '' AS ACTIONSEQUENCE,
  '' AS Type,
  '' AS StartTime,
  '' AS EndTime,
  '' AS Duration
FROM dual 
```

*最后，根据您呈现此结果的方式，我会研究其他分隔结果的方法。将空白行附加到查询中以用于表示目的是在业务和表示逻辑分离的情况下进行的。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T19:17:26.090

结果将显示在 HTML 页面中。

因此，使用 SQL 来提取数据，而不是格式化输出。根据页面结构和布局，有很多解决方案。看看[这里](http://coding.smashingmagazine.com/2008/08/13/top-10-css-table-designs/)。

# spotify - 用户播放列表的 Spotify 播放按钮“抱歉，此播放列表为空”

> ID：11436799
> 
> 赞同：1
> 
> 时间：2012-07-11T16:06:43.900
> 
> 标签：spotify

我想为用户播放列表为 Spotify 创建一个播放按钮。由于某种原因，它返回一条错误消息：“抱歉，此播放列表为空”

这是我正在使用的代码：

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:robleach:playlist:5Cv2iMSoeJvFKgQeweFhFD" width="300" height="380" frameborder="0" allowtransparency="true"></iframe> 
```

它返回错误：“对不起，这个播放列表是空的”

但是，如果我使用 Spotify 网站上的示例代码，它本质上是相同的代码吗？我假设这可能是因为它是一个不同的用户？

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:erebore:playlist:788MOXyTfcUb1tdw4oC7KJ" width="250" height="80" frameborder="0" allowtransparency="true"></iframe> 
```

以前有人遇到过这个问题吗？有人有工作吗？

干杯罗布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:50:48.917

您的代码没有任何问题，是的，这是因为它是不同的用户。这是服务器问题。

1.  播放按钮服务出现问题，无法返回一些播放列表（不在其缓存中），因为底层播放列表系统出现问题。
2.  错误信息在说谎。

它以前发生过，没有好的解决方法。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:02:56.293

啊，原来是这么回事！您知道，如果您发布一首单独的歌曲，它会完美运行。我将单独发布播放列表中的所有歌曲（很痛苦），直到问题得到解决。

# javascript - 如何使用 javascript 为 graphviz 设置动画？

> ID：11436801
> 
> 赞同：1
> 
> 时间：2012-07-11T16:06:52.660
> 
> 标签：javascript, svg, graphviz

是否有一些库 javascript 可以为使用 graphviz 创建的图形设置动画（仅移动节点）？

我想在浏览器中显示一个 svg（用 graphviz 创建），但我希望节点可以移动（用它的边缘）类似于[dracula](http://www.graphdracula.net/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:26:11.990

我正在寻找这样的[东西](https://github.com/goinnn/jquery.graphviz)。我以为有人，有时，会需要它。但最后我不得不对其进行编码。

这个插件不完整，但这是第一步

# c# - C#泛型是如何实现的？

> ID：11436802
> 
> 赞同：12
> 
> 时间：2012-07-11T16:06:54.787
> 
> 标签：c#, generics, polymorphism, overriding

我曾认为 C# 中的泛型是这样实现的，以便在运行时或编译时生成一个新的类/方法/what-have-you，当使用新的泛型类型时，类似于 C++ 模板（我'从来没有真正调查过，我很可能是错的，对此我很乐意接受更正）。

但在我的编码中，我想出了一个确切的反例：

```
static class Program {
    static void Main()
    {
        Test testVar = new Test();

        GenericTest<Test> genericTest = new GenericTest<Test>();
        int gen = genericTest.Get(testVar);

        RegularTest regTest = new RegularTest();
        int reg = regTest.Get(testVar);

        if (gen == ((object)testVar).GetHashCode())
        {
            Console.WriteLine("Got Object's hashcode from GenericTest!");
        }
        if (reg == testVar.GetHashCode())
        {
            Console.WriteLine("Got Test's hashcode from RegularTest!");
        }
    }

    class Test
    {
        public new int GetHashCode()
        {
            return 0;
        }
    }

    class GenericTest<T>
    {
        public int Get(T obj)
        {
            return obj.GetHashCode();
        }
    }

    class RegularTest
    {
        public int Get(Test obj)
        {
            return obj.GetHashCode();
        }
    }
} 
```

这两条控制台线都会打印。

我知道发生这种情况的实际原因是对 Object.GetHashCode() 的虚拟调用没有解析为 Test.GetHashCode() 因为 Test 中的方法被标记为新的而不是覆盖。因此，我知道如果我在 Test.GetHashCode() 上使用“覆盖”而不是“新”，那么返回 0 将多态地覆盖对象中的 GetHashCode 方法，这不是真的，但根据我（以前）的理解对于 C# 泛型，这无关紧要，因为 T 的每个实例都将被替换为 Test，因此方法调用将静态（或在泛型解析时）被解析为“新”方法。

所以我的问题是：**泛型是如何在 C# 中实现的？**我不知道 CIL 字节码，但我知道 Java 字节码，所以我了解面向对象的 CLI 语言如何在低级别工作。随意在该级别进行解释。

顺便说一句，我认为 C# 泛型是这样实现的，因为与 Java 的类型擦除系统相比，每个人都将 C# 中的泛型系统称为“真正的泛型”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T16:24:56.833

在`GenericTest<T>.Get(T)`中，C# 编译器*已经*选择了`object.GetHashCode`应该调用的（实际上）。这不可能`GetHashCode`在运行时解析为“新”方法（它将在方法表中有自己的槽，而不是覆盖 的槽`object.GetHashCode`）。

来自 Eric Lippert 的[What's the difference, part of one: Generics are not templates](https://web.archive.org/web/20120621224458/http://blogs.msdn.com/b/ericlippert/archive/2009/07/30/generics-are-not-templates.aspx)，解释了问题（使用的设置略有不同，但课程很好地适用于您的场景）：

> 这说明 C# 中的泛型与 C++ 中的模板不同。您可以将模板视为一种花哨的搜索和替换机制。[...] 这不是泛型类型的工作方式；泛型类型是*泛型*的。我们执行**一次**重载解析并烘焙结果。[...] 我们为泛型类型生成的 IL 已经选择了它要调用的方法。抖动并不是说“好吧，我碰巧知道，如果我们要求 C# 编译器立即使用这些附加信息执行，那么它会选择不同的重载。让我重写生成的代码，忽略C#编译器最初生成的代码……” jitter对C#的规则一无所知。

以及您所需语义的解决方法：

> 现在，如果您确实希望根据参数的运行时类型在运行时重新执行重载决议，我们可以为您做到；这就是 C# 4.0 中新的“动态”特性所做的。只需将“object”替换为“dynamic”，当您进行涉及该对象的调用时，我们将在运行时运行重载解析算法并动态吐出调用编译器将选择的方法的代码，如果它知道所有运行时编译时的类型。

# asp.net - 如何找到丢失的全球资源记录？

> ID：11436805
> 
> 赞同：2
> 
> 时间：2012-07-11T16:06:59.807
> 
> 标签：asp.net, app-globalresources

我有 3 个全局资源文件：

```
WebResources.resx
WebResources.resx.es
WebResources.resx.it 
```

在对我的应用程序进行更改时，我总是将默认的全局资源记录（英语）添加到`WebResources.resx`文件中。但是，我当时并不总是有西班牙文和意大利文的版本，所以这些需要在以后添加。

我的项目经理建议，每当将记录添加到`WebResources.resx`文件中时，应将空白记录添加到`.es`和`.it`版本中。然后在找出哪些记录需要翻译时，我们可以按值排序并查看空白列表。

我喜欢使用全局资源的回退，如果指定的资源文件中没有记录，则返回默认记录。通过添加空白记录，可以防止回退。

有没有更好的方法来找出`.es`和`.it`资源文件中缺少哪些记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:41:17.013

有一些工具可以帮助你做你需要的事情。

[这是一个你可以尝试的例子](http://www.codeproject.com/Articles/16068/Zeta-Resource-Editor)

# php - 无法访问数组中的元素

> ID：11436808
> 
> 赞同：1
> 
> 时间：2012-07-11T16:07:11.257
> 
> 标签：php, arrays

我正在尝试访问关联数组中的元素。但是，我似乎无法理解这些元素。如果我使用`print_r()`它，它会说这是一个数组，并向我展示其中包含的内容。但是，`is_array()`返回 false。此外，当我回显数组中的第一个元素时，它返回一个值“a”而不是实际的数组值。这可能只是一些愚蠢的错误，但这让我感到困惑。有谁知道这里有什么问题？

在此先感谢您的帮助。

```
$sc2 = new ServiceCall($uri,null,false,false);
$sc2->makeCall();
$response = json_decode($sc2->getResponse(),true);
$tmp4 = var_export($response, true);
print_r($tmp4);
if(is_array($tmp4))
     echo "Tmp4 is an array";
else
     echo "Tmp4 is NOT an array"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:19:34.963

[`var_export()`](http://php.net/manual/en/function.var-export.php)用于将变量持久化到文件中，因此它返回一个字符串。

您可以只`$response`用作数组，而不是`$tmp4`.

# regex - PowerShell 正则表达式查找“ 版本 12.3”

> ID：11436812
> 
> 赞同：0
> 
> 时间：2012-07-11T16:07:28.790
> 
> 标签：regex, powershell, boolean

在一个字符串中，例如：

`CustomerDisplayVersionNumber : Version 12.3 (build 567.89)`

如果版本号完全正确，我如何使用正则表达式返回 true`12.3`

版本号可能包含服务包版本的可能性很小，但确实有可能。例如

`CustomerDisplayVersionNumber : Version 12.3.4 (build 567.89)`

这使我相信检查`[space]Version 12.3.nnnn[space]`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:36:19.697

正则表达式`"\sVersion (\d+\.\d+(\.\d+)?)\s"`将满足所有提供的示例

```
 @('CustomerDisplayVersionNumber : Version 12.3 (build 567.89)', 'CustomerDisplayVersionNumber : Version 12.3.4 (build 567.89)', 'CustomerDisplayVersionNumber : Version 12.3.9999 (build 567.89)') | % { [regex]::Match($_, "\sVersion (\d+\.\d+(\.\d+)?)\s").Success } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:10:00.427

使用这个正则表达式`\s+Version \d+\.\d+\.\d+\s+`

# mysql - MySQL 使用来自同一表的值更新表

> ID：11436814
> 
> 赞同：4
> 
> 时间：2012-07-11T16:07:31.653
> 
> 标签：mysql, join

我有一个 4 列的表，主键是 id、gameId 和 flag 的组合。

```
id | gameId | score | flag
--------------------------
1  | 1      | 10    | 1
1  | 1      | 20    | 0
2  | 1      | 1     | 0
1  | 2      | 10    | 1
3  | 2      | 1     | 0 
```

我需要更新表格，以便：

*   所有 gameId 2 分数都添加到 id 和 flag 相同的 gameId 1 中。（例如，将第 1 行和第 4 行的分数相加，第 1 行的分数为 20）

*   如果发生上述情况，则需要删除 gameId 2 行。

*   如果找不到上述内容（例如，有一行 gameId 为 2，但 id 和 flag 与另一行不匹配），则可以将 gameId 更改为 1。

所以SQL完成后我的表应该是这样的：

```
id | gameId | score | flag
--------------------------
1  | 1      | 20    | 1
1  | 1      | 20    | 0
2  | 1      | 1     | 0
3  | 1      | 1     | 0 
```

我怎样才能用 SQL 写这个？谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T16:24:36.517

认为这会起作用：

**试试 1**

```
UPDATE score_list AS t2
LEFT JOIN score_list AS t1 ON
  (t1.id = t2.id AND t1.flag = t2.flag AND t1.gameId = 1)
SET
  t1.score = t1.score + t2.score,
  t2.gameId = IF(t1.gameId IS NULL, 1, t2.gameId)
WHERE t2.gameId = 2;

DELETE FROM score_list WHERE gameId = 2; 
```

**试试 2**

```
# add scores to gameId = 1
UPDATE score_list AS t2
LEFT JOIN score_list AS t1 ON
  (t1.id = t2.id AND t1.flag = t2.flag AND t1.gameId = 1)
SET
  t1.score = t1.score + t2.score
WHERE t2.gameId = 2;

# try to move gameID 2 to gameId 1, using ignore to allow rows to fail, as gameId alredy exists
UPDATE IGNORE score_list SET gameId = 1 WHERE gameId = 2;

# delete all not updated rows from last query
DELETE FROM score_list WHERE gameId = 2; 
```

# c# - windows 7语音识别仅在word上

> ID：11436823
> 
> 赞同：0
> 
> 时间：2012-07-11T16:08:19.883
> 
> 标签：c#, speech-recognition

我正在使用 c# 和 windows 语音识别来与我的程序进行通信。唯一要识别的词是“是”，这在我的程序中运行良好唯一的问题是，由于语音识别被激活，它会输入我所说的内容有没有办法限制语音识别程序只识别一个词，在这种情况下是“是”这个词？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:15:33.510

您是什么意思“由于语音识别被激活，它会输入我所说的内容”？您是说桌面识别器继续运行和处理命令吗？也许您应该使用 inproc 识别器而不是共享识别器（请参阅[Using System.Speech.Recognition opens Windows Speech Recognition](https://stackoverflow.com/questions/6633521/using-system-speech-recognition-opens-windows-speech-recognition)）

你在使用听写语法吗？如果您只想识别有限的一组单词或命令，请不要使用听写语法。使用 GrammarBuilder（或类似的）并创建一个简单的语法。请参阅[http://msdn.microsoft.com/en-us/library/hh361596](http://msdn.microsoft.com/en-us/library/hh361596)

几年前在[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)上发表了一篇非常好的文章。这可能是迄今为止我发现的最好的介绍性文章。它有点过时了，但很有帮助。（AppendResultKeyValue 方法在 beta 之后被删除。）看看他们如何构建订购披萨的语法的示例。

要记住一件事，一个单词的语法可能会显示很多误报（因为识别器会尝试匹配您语法中的某些内容）。您可能希望至少输入 Yes 和 No，这样它就可以进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:42:42.307

如果您的代码类似于以下内容：

```
SpeechRecognitionEngine recognitionEngine = new SpeechRecognitionEngine();
recognitionEngine.SetInputToDefaultAudioDevice();
recognitionEngine.SpeechRecognized += (s, args) =>
{
    foreach (RecognizedWordUnit word in args.Result.Words)
    {
        Console.WriteLine(word.Text);
    }
};
recognitionEngine.LoadGrammar(new DictationGrammar()); 
```

只需使用 if 语句：

```
foreach (RecognizedWordUnit word in args.Result.Words)
{
    if (word.Text == "yes")
        Console.WriteLine(word.Text);
} 
```

请注意，recognitionEngine.SpeechRecognized 是一个事件处理程序，只要它识别一个单词就会发生，并且可以以其他方式使用，例如：

```
{
    recognitionEngine.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(recognizer_SpeechRecognized);
}
//this method is static because I called it from a console main method. It can be changed.
static void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
     Console.WriteLine(e.Result.Text);
} 
```

我的示例在控制台中，但它对 GUI 的工作方式相同。

# objective-c - 如何管理在辅助线程中运行的 NSRunLoop 的自动释放池？

> ID：11436826
> 
> 赞同：4
> 
> 时间：2012-07-11T16:08:26.827
> 
> 标签：objective-c, cocoa, nsrunloop

在 Apple 的[MVCNetworking](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html)示例代码中，`NetworkManager`该类包含此方法以在专用于网络活动的辅助线程中维护运行循环（以便`NSURLConnection`异步运行）：

```
- (void)networkRunLoopThreadEntry
{
    while(YES) {
        NSAutoreleasePool *pool;
        pool = [[NSAutorelease alloc] init];
        [[NSRunLoop currentRunLoop] run];
        [pool drain];
    }
} 
```

由于`run`如果没有附加到运行循环的源，该方法将立即退出，这看起来像一个无限`while`循环，如果当前没有附加到运行循环的 NSURLConnection ，它将无用地消耗 CPU 资源。

另一方面，为了保持运行循环处于活动状态，[有人](http://macsamurai.blogspot.fr/2008/03/nsoperation-madness.html) [建议](http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)在运行循环中安排一个空端口：

```
 - (void)networkRunLoopThreadEntry
 {
     NSAutoreleasePool *pool = [[NSAutorelease alloc] init];
     NSPort *port = [NSPort port];
     [[NSRunLoop currentRunLoop] addPort:port forMode:NSRunLoopCommonModes];
     [NSRunLoop run];
     [pool drain];
 } 
```

但是，在这种情况下，我担心该`run`方法永远不会退出，这意味着池永远不会被耗尽，这意味着在辅助线程中分配和自动释放的所有对象都会泄漏。

那该怎么走呢？

（对于上下文，和其他许多人一样，我正在尝试将异步封装`NSURLConnection`在 a`NSOperation`中，这意味着它可以在主线程之外触发。此外，MVCNetworking 示例代码以及 WWDC 2010 会话*Network Apps for iPhone OS*，似乎建议拥有一个专用于网络传输的唯一辅助线程以防止主线程延迟。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T21:01:52.710

[`CFRunLoopObserver`](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFRunLoopObserverRef/Reference/reference.html)您可以为活动创建一个`kCFRunLoopBeforeWaiting`并将其添加到运行循环。在观察者的标注中，释放旧池并创建一个新池。未经测试的例子：

```
static void resetPoolCallout(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info) {
    NSAutoreleasePool **poolPointer = (NSAutoreleasePool **)info;
    [*poolPointer release];
    *poolPointer = [[NSAutoreleasePool alloc] init];
}

- (void)networkRunLoopThreadEntry {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSPort *port = [NSPort port];
    [[NSRunLoop currentRunLoop] addPort:port forMode:NSRunLoopCommonModes];

    CFRunLoopObserverContext observerContext = {
        .version = 0,
        .info = (void*)&pool,
        .retain = NULL,
        .release = NULL,
        .copyDescription = NULL
    };
    CFRunLoopObserverRef observer = CFRunLoopObserverCreate(NULL, kCFRunLoopBeforeWaiting,
        true, 0, resetPoolCallout, &observerContext);
    CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopCommonModes);

    [[NSRunLoop currentRunLoop] run];

    CFRunLoopRemoveObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopCommonModes);
    CFRelease(observer);

    [pool release];
} 
```

# java - 如何显示来自网站的文本？

> ID：11436827
> 
> 赞同：0
> 
> 时间：2012-07-11T16:08:28.330
> 
> 标签：java, android, show

我正在尝试捕获页面的文本，然后将其显示在我的应用程序中。但是当我运行程序时不显示文本。该网站是 [http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1](http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1)

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_examplebackground);

    try {
        URL url = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1"); 
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));

        String inputLine="";
        String inputText = ""; 
        while ((inputLine = in.readLine()) != null) {
            inputText = inputText + inputLine;
        }

        System.out.println(inputText);
    }catch(MalformedURLException t){
        System.out.println("error de url");
    } catch(Throwable t){
        System.out.println("error de bufffer");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:43:36.983

`readLine`如果不提供换行符，请不要使用`InputStream`，否则它将在那里被阻塞（等待换行符）。

我建议使用[apache-commons-io](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)库从`InputStream`

```
String charset = "UTF-8";
inputText = org.apache.commons.io.IOUtils.toString (url, charset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:23:52.973

您的文本格式不同。您需要以`UTF`格式对它们进行编码。

将其编码为：

`String data = URLEncoder.encode("data", "UTF-8");`

# c# - gridview.Datasource 和 gridview.Datamember 我应该先设置哪个？

> ID：11436834
> 
> 赞同：0
> 
> 时间：2012-07-11T16:08:47.260
> 
> 标签：c#, gridview, devexpress, datasource, datamember

如果我想同时设置gridview.datasource和gridview.datamember，我应该先设置哪一个？这有什么标准顺序吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:16:23.757

我宁愿先设置`gridview.datasource`，然后再设置，因为在绑定到包含单个列表或表的数据源时`gridview.datamember`不需要设置属性。`gridview.datamember`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:17:34.113

通常我先设置数据成员。这样，当您设置数据源时，它将使用数据成员信息刷新网格。（如果数据源是数据集，则数据成员将是表。如果先设置数据源然后设置数据成员，则数据网格将保持为空，直到显式刷新。）

我对所有数据绑定控件都做同样的事情。对于列表框，我先设置 displaymember 和 valuemember，然后再设置数据源。然后列表框会自动显示正确的信息。

# c# - 如何在 Dynamics CRM 2011 中查询（使用 LINQ）FormattedValues

> ID：11436835
> 
> 赞同：4
> 
> 时间：2012-07-11T16:08:53.207
> 
> 标签：c#, dynamics-crm-2011

我正在使用 LINQ 从 Microsoft Dynamics CRM Online 中检索帐户类型实体。我无法过滤特定格式值的列表。我有正确的值，但收到的记录为零。我正在创建这样的连接：

```
var connection = new CrmConnection("CRMOnline");
connection.ProxyTypesEnabled = true;
CrmOrganizationServiceContext _context = new CrmOrganizationServiceContext(connection); 
```

我试过了：

```
List<Account> items = _context.CreateQuery<Account>()
                              .Where( c => ((OptionSetValue)c["new_accreditationstatus"]).Equals(7))
                              .ToList(); 
```

和

```
List<Account> items = _context.CreateQuery<Account>()
                              .Where( c => c.GetFormattedAttributeValue("new_accreditationstatus") == "7"
                              .ToList(); 
```

和

```
List<Account> items = _context.CreateQuery<Account>()
                              .Where( c => c["new_accreditationstatus"] == "7"
                              .ToList(); 
```

最后一个抛出 System.Format 异常。

过滤正常属性，即`.Where(c => c.AccountNumber.StartsWith("2010"))`工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T21:21:26.620

您只能`_____Set`在生成早期绑定 CRM 文件（查看`crmsvcutil.exe`/`Xrm.cs`在线）并创建早期绑定派生`CrmOrganizationServiceContext`（通常称为`XrmServiceContext`）时才能访问实体。您可以在早期绑定文件中看到可用的构造函数。

因此，如果您`OptionSetValue`事先知道 (int) 的值（在本例中为 7），则可以将此值用作`Where`子句中的参数之一，正如您在其他地方所述：

```
.Where( c => c.new_AccreditationStatus.Value == 7) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:15:28.973

编辑（试试这个）：

```
var list = _context.AccountSet.Where(c => 
                     c.FormattedValues["new_accreditationstatus"] == "7").ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T20:26:04.343

另一个很好的问题，但不幸的是，我认为这将代表[Linq provider 的另一个失败/“限制”](https://stackoverflow.com/questions/10820663/error-within-where-statement-in-linq/10821137#10821137 "LINQ 中的 Where 语句中的错误")，它没有提到任何关于`FormattedValues`该`Where`子句允许使用的内容，尽管它被允许作为该`Select`子句中的一个项目.

s的实际值`OptionSetValue`存储在`StringMap`实体中，顺便说一句，您*可以*`StringMap`通过 Linq访问实体。一个例子如下。

```
// This query gets one permissible value for this entity and field.
var actualValue = _context.CreateQuery("stringmap")
    .Where(x => x.GetAttributeValue<string>("attributename") == "new_accreditationstatus")
    .Where(x => x.GetAttributeValue<int>("value") == "7")
    .Where(x => x.GetAttributeValue<int>("objecttypecode") == Account.EntityTypeCode)
    .Select(x => x.GetAttributeValue<string>("value"))
    .Single(); 
```

但是，尝试使用子查询和原始查询的版本在此基础上进行构建，如下所示，会导致异常，如下所示。

```
var actualValues = _context.CreateQuery("stringmap")
    .Where(x => x.GetAttributeValue<string>("attributename") == "new_accreditationstatus")
    .Where(x => x.GetAttributeValue<int>("objecttypecode") == Xrm.Account.EntityTypeCode);

// This (modified) query uses the StringMap values from the previous query in
// a subquery, linking to the int (attributevalue) value that
// new_accreditationstatus represents.
List<Account> items = _context.CreateQuery<Account>()
    .Where(c => actualValues
        .Where(x => x.GetAttributeValue<int>("attributevalue") == c.new_accreditationstatus.Value)
        .Select(x => x.GetAttributeValue<string>("attributevalue"))
        .Single() == "7")
    .ToList(); 
```

...引发异常。

> > 实体“StringMap”上未定义权限类型读取。

这当然令人沮丧，因为不知何故，Linq 允许您在第一个查询中查询字符串映射。

因此，您必须首先查询对应于“7”的`StringMap`实体，然后在引用该值的*新*查询中使用该值，如下所示：`AttributeValue`

 *```
var actualValue = _context.CreateQuery("stringmap")
    .Where(x => x.GetAttributeValue<string>("attributename") == "new_accreditationstatus")
    .Where(x => x.GetAttributeValue<int>("value") == "7")
    .Where(x => x.GetAttributeValue<int>("objecttypecode") == Account.EntityTypeCode)
    .Select(x => x.GetAttributeValue<string>("attributevalue"))
    .Single();

List<Account> items = _context.CreateQuery<Account>()
    .Where(c => c.new_accreditationstatus = new OptionSetValue(actualValue)
    .ToList(); 
```

如果我能在一个查询中找到一种方法来完成所有这些，我一定会编辑并重新发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:07:13.590

你见过[会为选项集生成枚举的 crmsvcutil 扩展](http://msdn.microsoft.com/en-us/library/hh547384.aspx)吗？*

# perl - Perl 在文件中捕获文本

> ID：11436836
> 
> 赞同：0
> 
> 时间：2012-07-11T16:08:53.487
> 
> 标签：perl

好的，所以我正在读取一个看起来像这样的文件：

```
File: namehere

Category1<br>
Category2<br>
Category3<br>
Info1<br>
Info2<br>
Info3<br>

File: namehere

Category1<br>
Category2<br>
Category3<br>
Info1<br>
Info2<br>
Info3<br> 
```

等等。

总有相同数量的类别并且它们总是具有相同的名称，但是它们后面的信息不同。信息可能比类别少，并且信息将包含不同的东西。

我想捕获只是信息的东西，所以我最初的想法是将它设置为在`Category3`and之间捕获`File`。但是，这不起作用，可能是出于某些对我来说并不明显的明确原因。

这是我正在使用的

```
if ( /Category1([\s\S]+?)File/ ) {
  push(@files, $1);
  print @files; 
```

我什么也没得到`@files`，我*认为*这是因为我提供的代码只搜索包含这两个词的行并捕获它们之间的内容，而不是整个文件。有什么帮助/建议吗？

* * *

**编辑**：

如果我正在阅读这样的内容，我将如何更改它：

```
File: namehere

Category1<br>
Category2<br>
Category3<br>
Info1<br>
Info2<br>
Info3<br>

Info1<br>
Info2<br>
Info3<br>

Info1<br>
Info2<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:24:01.043

这看起来像是一份工作[`$RS`](http://perldoc.perl.org/perlvar.html#%24RS)！

太多的人发现很难从扫描线的角度切换到 Perl 的角度，其中线只是您可能想要扫描的*一种记录。*如果您更改记录分隔符，您将获得更多的逻辑记录。然后您可以指定要扫描的模式，找出它停止的位置并获取其余记录

```
use English qw<$RS>;
use English qw<@LAST_MATCH_END>;

local $RS = "\n\n"; 

while ( <$in> ) {
    next unless m/^Category3.*\n/m;
    push @data, substr( $_, $LAST_MATCH_END[0] );
} 
```

*   由于我们只使用了`m`开关（“multiline”），这个`.`字符仍然意味着除了换行符之外的任何东西。
*   由于我们匹配回车，我们应该将所有内容都保留在记录中。虽然我们可能不想要`"\n\n"`最后。

诚然，这种方法使它`File: filename`成为自己的“记录”，但无论如何它会让你更接近一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:48:19.563

很难准确说出您想要什么，但也许是在没有所有`Category`信息的情况下打印输入文件？

这个单行的 Perl 程序将为您做到这一点

```
perl -ne "print unless /^Category/" myfile 
```

**输出**

```
File: namehere

Info1<br>
Info2<br>
Infor3<br>

File: namehere

Info1<br>
Info2<br>
Info3<br> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:10:33.133

我发现这样的任务必须是“快速的”：

示例文件：

```
$ cat a.txt
File: namehere

Category1
Category2
Category3
Info1
Info2
Infor3

File: namehere

Category1
Category2
Category3
Info1
Info2
Infor3 
```

解决方案：

```
$ perl -le 'local $/= undef; $_ = <>; 
        @g = map {/^Category3$\s*(.*?)\s*\z/ms; $1} 
            grep{/Category3/} 
            split /^File:.*$/m; 
        print for @g' a.txt
Info1
Info2
Infor3
Info1
Info2
Infor3 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T16:20:11.247

```
#! /usr/bin/perl -w
use strict;

my %hoa;  # a hash of arrays: key = file name each array element is
          # the info1, info2 etc that is listed under the file name
my $key;

open(F, "$ARGV[0]");

while (<F>) {
  chomp;
  if (/File/) {
    my @line = split /:/;
    $key = $line[1];
  }

  if (/Info/) {
    push @{ $hoa{$key} }, $_;
  }
}

foreach my $k ( sort keys %hoa ) {
  my @list = @{ $hoa{$k} };
  foreach my $l (@list) {
    print $k, "\t", $l, "\n";
  }
} 
```

# python - python机械化奇数.read（）输出

> ID：11436837
> 
> 赞同：0
> 
> 时间：2012-07-11T16:09:08.343
> 
> 标签：python, mechanize

我正在寻求帮助调试 Mechanize。当我导航到一个页面并尝试调用 .read() 时，每 5 次左右的尝试中我会得到大约 1 次非 unicode 结果。非 unicode 结果如下所示：

> úRW!¤cêLÒ0T¸²ÖþF\<äs `+€²Ü@9‚ÈøMq1;=®}ÿ½8¹WP[ëæåñ±øþûÚc!ˆÍzòØåŸ¿þUüþf>àSÕ‹‚~é÷bÆª}Ãp#',®ˆâËýÊæÚ³­õµÊZñMyô‘;–sä„IWÍÞ·mwx¨|ýHåÀ½A ºÒòÀö QNqÒ4O{Žë+óZu"úÒ¸½vº³ÔP”º‘c`Ç—Êâ#<31{HiºF4N¨ÂÀ"Û´>•ŠÜÅò€U±§¶8ÑWEú(ƒ'cÀWÄ~‡ ‡—¯J$ÁvQìfj²a$DdªÐŠÐ5[ü(4` ŒÛ"–<‹eñƒ(‚¹=[U¤#íQhÉÔô6(î$M ²-Õ£›Œndû8mØïõ7;"¨zÒ€F°¬@Xˆ€*õäŠˆxŸÊ%úÅò= kôc¡¢ØyœÑy³í>ËÜ-¥ m+ßê¸ïmì Ycãa®-Ø•†ê¸îmq«x} i¥GEŽj]ÏëUÆËGS°êõ½AxwÕµêúR¶à|ôO¹ýüà:S¸S‡®U%}•Cî3ãg~QÛó´Ó]ïn[FwuCm6žš[«J ®™›Ý-£A~Ö€sµ1khí"”/\S~u£C7²Í#wÑ»@ç@sô,ÆQèÊôó®.ä(å*æ‡#÷»'õµ{à~Õ„SÒ%@ ^tL †¸±¹åI{„Õv#³ëŠUG…s‡•·Aíí»8¡Ò|Ö«à4€¼dˆ¸—áÐåqA'ï $Õ[NØÖ£o\s£Z_¾^ Äóo~?<Ú¿Ùÿ] À@@bÈ%¶Á$¦G oË·ò}[µ+>ðµ°ÍöÐµ?R1úQ–&PãýT¥¢ði+|óf«ú,â,ÛQã¤šÓ¢ÏìÙT£šÚAä¡³£

我已经尝试过正常的 Mechanize 解析器 ( `mechanize.Browser()`) 以及通常建议的替代方法 ( `factory=mechanize.RobustFactory()`)。

对下一步有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:33:56.520

问题解决了：

如果您得到类似的输出，请检查页面标题，因为它可能在实例化浏览器集后被压缩`set_handle_gzip(True)`

# c# - 从命令提示符打开注册的 url 类型，隐藏窗口样式

> ID：11436843
> 
> 赞同：0
> 
> 时间：2012-07-11T16:09:49.497
> 
> 标签：c#, windows, command-prompt, window-style

我想打开我在 regedit 中注册的 url 类型。即：

```
swap://server:port/handle 
```

我想在命令提示符下使用**WindowStyle = Hidden打开它。**如果我在 C# 中这样做很容易：

```
Process p = new Process();
p.StartInfo.WindowStyle = WindowStyle.Hidden;
p.StartInfo.FileName = @"url:swap://server:port/handle";
p.Start(); 
```

但是，正如我所说，我希望能够在命令提示符下做同样的事情。我知道如何在没有 WindowStyle = Hidden 的情况下做到这一点：

```
start url:swap://server:port/handle 
```

是否有任何标志*可以*设置以强制 WindowStyle = 隐藏？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:14:26.977

仅使用 cmd 无法执行此操作，但是您可以使用简单的 vbscript 使用您要运行的命令打开批处理文件来执行此操作

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("mybatchfile.bat swap://server:port/handle"), 0, True 
```

然后你的批处理文件看起来像这样

```
start url:%1 
```

# c# - 比较 C# 中的对象类型，以便仅访问数组中的某些对象

> ID：11436853
> 
> 赞同：0
> 
> 时间：2012-07-11T16:10:10.823
> 
> 标签：c#, object

我正在从一本书中学习 C#，并且我正在扩展一个示例以更好地理解语法。

我正在尝试使用以下代码循环遍历对象集合并仅挑选某些对象，以便将它们加载到单独的数组中。我现在正在为这条特定的线路苦苦挣扎：

```
if (animalCollection[i].Equals(Chicken)) 
```

这是 Program.cs 的完整代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Ch11Ex02
{
class Program
    {
    static void Main(string[] args)
        {
        Animals animalCollection = new Animals();
        animalCollection.Add(new Cow("Jack"));
        animalCollection.Add(new Chicken("Vera"));
        animalCollection.Add(new Chicken("Sally"));

        Animal[] birds = new Animal[2];
        for (int i = 0; i < animalCollection.Count; i++)
            {
            if (animalCollection[i].Equals(Chicken))
                birds[i] = animalCollection[i];
            }

        foreach (Animal myAnimal in animalCollection)
            {
            myAnimal.Feed();
            }
        Console.ReadKey();
        }
    }
} 
```

我的目标是仅将对象类型 Chicken 加载到一个名为 bird 的新数组中。

这是动物类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Ch11Ex02
{
public abstract class Animal
    {
    protected string name;

    public string Name
        {
        get
            {
            return name;
            }
        set
            {
            name = value;
            }
        }

    public Animal()
        {
        name = "The animal with no name";
        }

    public Animal(string newName)
        {
        name = newName;
        }

    public void Feed()
        {
        Console.WriteLine("{0} has been fed." , name);
        }

    internal bool equals()
        {
        throw new NotImplementedException();
        }
    }
} 
```

这是鸡类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Ch11Ex02
{
public class Chicken : Animal
    {
    public void LayEgg()
        {
        Console.WriteLine("{0} has laid an egg." , name);
        }
    public Chicken(string newName): base(newName)
        {
        }
    }
} 
```

这是动物类的代码：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Ch11Ex02
{
public class Animals : CollectionBase
    {
    public void Add(Animal newAnimal)
        {
        List.Add(newAnimal);
        }

    public void Remove(Animal newAnimal)
        {
        List.Remove(newAnimal);
        }

    public Animals()
        {
        }

    public Animal this[int animalIndex]
        {
        get
            {
            return (Animal)List[animalIndex];
            }
        set
            {
            List[animalIndex] = value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:13:17.210

**基础知识**

要确定对象是否属于给定类型，您可以使用`typeof`或`is`

```
if (typeof(someObject) == typeof(Chicken)) 
```

或者

```
 if (someObject is Chicken) 
```

所以特别是在你的情况下

```
if (animalCollection[i].Equals(Chicken)) 
```

变成

```
if (typeof(animalCollection[i]) == typeof(Chicken)) 
```

或者

```
if (animalCollection[i] is Chicken) 
```

您还可以像这样确定对象的类型

```
Type t = animalCollection[i].GetType(); 
```

**快捷方式**

现在我已经基本介绍了它的工作原理，这是一种使用 Linq 在一行中完成相同操作的方法

```
var chickens = animals.OfType<Chicken>().ToArray(); 
```

**顺便一提**

如果您想将类型名称作为字符串获取，您可以这样做

```
string typeName = t.FullName; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:15:18.273

Linq 可以在一个声明中为您做到这一点

```
var birds=animals.OfType<Chicken>().ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:15:25.063

您可以使用`is`运算符或`typeof`

```
 if (animalCollection[i] is Chicken)
            birds[i] = animalCollection[i]; 
```

或者`typeof`

```
 if (typeof(animalCollection[i]) == typeof(Chicken))
            birds[i] = animalCollection[i]; 
```

# silverlight - 使用 Esri 地图打开设计时出现 XamlParseException

> ID：11436854
> 
> 赞同：2
> 
> 时间：2012-07-11T16:10:10.933
> 
> 标签：silverlight, silverlight-5.0, esri, esri-maps

今天我将我的 VS2010SP1、Silverlight 4、Prism4.0、Esri ArcGis 2.4 应用程序转换为：VS2012RC 和 Silverlight 5、Prism4.1 和 Esri ArcGis api 3.0。

它使用 Esri 地图，打开 xaml 页面时出现奇怪的错误：

```
XamlParseException:  [Line: 0 Position: 0]

at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight) 
```

我不知道在哪里以及如何诊断此错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:30:40.123

固定的。有时在解析 XAML 时会出现严重错误。

在这种情况下，旧的 2.4 SDK 和新的 3.0 SDK 是问题所在。从 Esri 卸载 2.4 SDK、清理所有 obj 和 debug 文件夹并重建解决方案后，XAML 被正确解析。

# java - 从浏览器访问 Intranet 站点时需要 Java 身份验证对话框

> ID：11436860
> 
> 赞同：3
> 
> 时间：2012-07-11T16:10:19.663
> 
> 标签：java, browser

我们有一个已经存在多年的 Intranet 页面，它使用来自旧网站 www.AcuteApplets.com（不再存在）的小程序。该小程序称为 AcuteShifter。我认为这些细节并不重要。无论如何，IE 浏览器在 Java 7 安装之前的客户端站点上加载插件很好。在客户端计算机上安装 Java 7 时，会出现以下对话框提示用户：

![在此处输入图像描述](../Images/119e331b36ed129b68b3ba8d0d3c4577.png)

用户可以单击取消，或输入他们的凭据，然后无论他们如何关闭窗口，小程序都可以正常工作。当我们卸载 Java 7 时，身份验证对话框消失了，因为在客户端计算机上安装 Java 6x 时它可以正常运行。如何摆脱这个对话框？我解压了jar文件，似乎jar中的代码是预编译的，所以我不确定是否可以在没有原始源代码的情况下对其进行编辑。

请注意，如果 IE 尚未打开，则每次启动 IE 时都会发生这种情况。如果用户选择“将此密码保存在您的密码列表中”框，则在此页面上后续打开/关闭 IE 时仍会弹出对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:05:49.103

我在 Oracle 讨论板上找到了答案。虽然不是一个修复方法，但一个简单的解决方法是启用对 applet 所在目录的匿名访问。

[主题：需要身份验证的弹出问题](https://forums.oracle.com/forums/thread.jspa?messageID=9781772)

论坛上的第一篇文章列出了解决方法：

> 1.  在虚拟文件夹上启用匿名身份验证始终可以解决问题。
> 2.  有时，将安全区域从“受信任”更改为“本地 Intranet”可以解决方案（“需要身份验证”弹出窗口）问题。值得注意的是，如果页面 URL 包含点（例如，使用 IP 地址而不是服务器名称），则更改安全区域将无济于事。
> 3.  升级到 IE9 部分解决了场景 2 的问题：Java 只要求提供一次凭据。但是我们的客户将无法使用 IE9，因为它还没有经过他们的测试，并且这个过程至少需要一年的时间（大多数是银行和赌博公司，环境严格且安全）

# python - VLC Python 不播放 YouTube 视频

> ID：11436864
> 
> 赞同：2
> 
> 时间：2012-07-11T16:10:27.167
> 
> 标签：python, youtube, vlc, libvlc

当尝试通过 Python 绑定使用[VLC 媒体播放器播放](http://en.wikipedia.org/wiki/VLC_media_player)YouTube URL 时，视频实际上并没有播放。

这是我的播放代码：

```
 def play(self, mrl):

    self.instance = vlc.Instance()

    try:
        self.media = self.instance.media_new_location(mrl)
    except NameError:
        print('NameError: %s (%s vs LibVLC %s)' % (sys.exc_info()[1],
                                                   vlc.__version__,
                                                   vlc.libvlc_get_version()))

    self.player = self.instance.media_player_new()
    self.player.set_media(self.media)

    event_manager = self.player.event_manager()
    event_manager.event_attach(vlc.EventType.MediaPlayerEndReached, self.end_callback)

    self.player.play()

    while self.stillPlaying:
        #do nothing
        pass 
```

我这样称呼它：

```
 play("http://www.youtube.com/watch?v=2hP-UGqA1Ek") 
```

如果您确实使用 VLC 媒体播放器播放此类链接，它将“找到”视频并播放。但是我的代码所发生的只是页面的标准 HTTP GET，以及来自 YouTube 的页面内容的返回，但没有视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T15:54:22.220

那是因为您提供的链接不是视频的链接。VLC 媒体播放器可以获得 YouTube 视频的实际链接，但 libVLC 不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T11:00:02.137

我最近遇到了同样的问题，但 youtube.lua 文件似乎已经修复很久了。

感谢VLC 开发人员之一[Rémi Denis-Courmont 的提示](https://forum.videolan.org/viewtopic.php?f=2&t=99021&p=420693&hilit=youtube%20vlc.py#p420693)，我通过创建 MediaListPlayer 然后将媒体（本地文件或 YouTube URL）添加到 MediaList 然后将其与播放器关联来解决了这个问题。我不确定为什么需要这种复杂的方法，但至少它对我有用。

```
 #movie is the YouTube or a local URL
   media = instance.media_new(movie)
   media_list = instance.media_list_new([movie]) #A list of one movie

   player = instance.media_player_new()
   player.set_media(media)

   #Create a new MediaListPlayer instance and associate the player and playlist with it

   list_player =  instance.media_list_player_new()
   list_player.set_media_player(player)
   list_player.set_media_list(media_list) 
```

# php - PHP Pear - Windows - pear 命令无法识别（环境变量已设置）

> ID：11436865
> 
> 赞同：1
> 
> 时间：2012-07-11T16:10:27.657
> 
> 标签：php, pear

我尝试安装 Pear，我执行了 go-pear.bat 文件，然后执行了 PEAR_ENV.reg 来创建环境变量。

但是当我在 DOS 中输入“pear”时，我得到：“Pear 不被识别为内部或外部命令”

我看到很多人有同样的问题，因为没有设置环境变量，但它是给我的，看截图：

![截屏](../Images/41cf07c5b05b74bd703a2d58014f73a5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:25:44.470

您必须修改`%PATH%`环境变量以包含文件夹`pear.bat`

# ruby-on-rails - Ruby、RSVG 和 PNG 流

> ID：11436873
> 
> 赞同：5
> 
> 时间：2012-07-11T16:10:50.457
> 
> 标签：ruby-on-rails, png, rsvg

我正在尝试在 Rails 应用程序中进行从 SVG 到 PNG 的图像转换。ImageMagick 不适合我，因为 Heroku 目前无法/想要升级 IM。我正在测试一些在开发中使用 RSVG2 / Cairo 的想法，但遇到了障碍。

我可以像这样轻松地将 SVG 转换并保存为 PNG：

```
#svg_test.rb
require 'debugger'
require 'rubygems'
require 'rsvg2'

SRC = 'test.svg'
DST = 'test.png'

svg = RSVG::Handle.new_from_file(SRC)
surface = Cairo::ImageSurface.new(Cairo::FORMAT_ARGB32, 800, 800)
context = Cairo::Context.new(surface)
context.render_rsvg_handle(svg)
surface.write_to_png(DST) 
```

但这只能让我写出 PNG 文件。在应用程序中，我需要能够动态生成这些，然后将它们作为数据发送到客户端浏览器。而且我无法弄清楚如何做到这一点，或者即使它受支持。我知道我至少可以调用surface.data 来获取原始数据，但是我对图像格式的了解还不够，无法知道如何将其作为PNG。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:39:17.500

啊哈！我是如此接近，事后看来它非常明显。只需使用 StringIO 对象调用 surface.write_to_png 函数。这会填充字符串对象，然后您可以获取其字节。这是我编写的完成的 svg_to_png 函数，以及调用它的示例控制器。希望这可以帮助其他地方的人。

图像转换功能：

```
 def self.svg_to_png(svg)
    svg = RSVG::Handle.new_from_data(svg)
    surface = Cairo::ImageSurface.new(Cairo::FORMAT_ARGB32, 800, 800)
    context = Cairo::Context.new(surface)
    context.render_rsvg_handle(svg)
    b = StringIO.new
    surface.write_to_png(b)
    return b.string
  end 
```

测试控制器：

```
 def svg_img
    path = File.expand_path('../../../public/images/test.svg', __FILE__)
    f = File.open(path, 'r')
    t = ImageConvert.svg_to_png(f.read)
    send_data(t , :filename => 'test.png', :type=>'image/png')
  end 
```

# android - 本机开发选项卡未显示

> ID：11436876
> 
> 赞同：0
> 
> 时间：2012-07-11T16:11:00.370
> 
> 标签：android, eclipse, android-ndk

我不知道是怎么回事。我一直在关注一些教程，并使用 NDK 正确设置了我的项目。上周我确实搞砸了一些事情，但我的项目似乎仍然可以正常工作。我正在尝试查找 NDK 路径，但该选项卡不再存在... ![在此处输入图像描述](../Images/557a7fbb8df007cf43cccb07ee78c3f7.png)

Native Development 选项卡应该是红色条所在的位置。我知道它是上周的某个时候。是否有可能我从 eclipse 中删除了一些会删除此选项卡的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:11:40.260

加载 NDK 插件可能有问题。您可以做的一件事是打开错误日志视图（菜单窗口 > 显示视图 > 错误日志。）

这列出了 Eclipse 内部的所有错误。我建议删除整个日志并重新启动 Eclipse。然后您将看到与加载插件相关的错误。我敢打赌，问题就列在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:05:49.210

问题解决了。我解压缩 NDK 文件夹的地址未添加到计算机的 PATH 变量中。奇怪的是，我清楚地记得曾经这样做过，但是在将该地址添加到 PATH 变量之前，该选项不会出现在 Eclipse 中。

如果有人知道 PATH 变量不是通过用户所做的更改，请告诉我。我不记得编辑 PATH 变量，也不知道我为什么会这样做。

对于 Windows 7 专业版：

**开始**->**右键单击​​计算机**->**属性**->**高级系统设置**->**环境变量**

我已经有一个`Path`变量 under`System variables`和一个`PATH`变量 under`User variables...`

在这两个变量中，我将地址添加到我的 NDK 文件夹中。用分号将新地址与内部现有地址隔开。

帮助我解决这个问题的教程[在第 5 步](http://permadi.com/blog/2011/09/setting-up-android-jni-projects-in-windows-eclipse-and-sequoyah/)

# datetime - 将浮点数（秒）转换为字符串（日期）

> ID：11436880
> 
> 赞同：0
> 
> 时间：2012-07-11T16:11:17.220
> 
> 标签：datetime, time, python-2.7

我正在尝试将浮点数（在本例中为秒）转换为 YYMMDDHHMM 格式。我尝试了很多方法，要么得到一个错误处理我没有正确转换浮点数的事实，要么当我完成转换时它不在 UTC/GMT 时间。当我尝试使用函数“ctime”时发生这种情况。当我在使用 ctime 时为 s 输入 0 时，它会在 1970 年 1 月 1 日之前 6 小时打印时间。

这是我缺少转换的内容：

```
import time

s = 1226368439.04

#conversion of some sort here

print time.strftime(s) 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:38:43.503

试试这个

进口时间

t = 1226368439.04

time.strftime('%Y%m%d%H%M%S', time.localtime(t))

20081111072359

time.strftime('%Y%m%d%H%M%S', time.gmtime(t))

'20081111015359'

# c# - 我们如何检测到 MS Excel 安装在 Silverlight 4 和 C# 中

> ID：11436886
> 
> 赞同：1
> 
> 时间：2012-07-11T16:11:48.883
> 
> 标签：c#, silverlight-4.0

我们如何检测到**MS Excel**安装在**Silverlight 4**和**C#**中？

我可以以某种方式使用此代码吗？

```
 dynamic excelApp;
  excelApp = AutomationFactory.CreateObject("Excel.Application");
  if (excelApp != null)
   {
      // MS Excel is installed!
   } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:18:26.177

检查此注册表路径：

```
HKLM\Software\Microsoft\Office\12.0\Excel\InstallRoot::Path 
```

将 12.0（对于 Office 2007）替换为相应的版本号：

```
Office 2000 -  9.0
Office XP   - 10.0
Office 2003 - 11.0
Office 2007 - 12.0
Office 2010 - 14.0 
```

检查[此链接](http://office.microsoft.com/en-us/orkXP/HA011364611033.aspx)以获取更多信息。

# python - 通过 Python MySQLdb 连接表

> ID：11436888
> 
> 赞同：0
> 
> 时间：2012-07-11T16:11:51.993
> 
> 标签：python, mysql-python

我是 python 和 MySQLdb 的最新用户，我想知道为什么我无法通过在 python 中运行 sql 查询来接收结果。我运行的查询是：“从股息中选择股息，Avatar_recs WHERE Dividends.entityID=Avatar_recs.entityID，Avatar_recs.avatarID='1'”

当我知道我是否直接在数据库上执行此查询时，我收到一条错误消息，说我的查询有问题。

谁知道我哪里错了？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:18:34.600

你有这个：

```
SELECT dividend
    FROM Dividends, Avatar_recs
    WHERE
        Dividends.entityID=Avatar_recs.entityID , Avatar_recs.avatarID='1' 
```

我会试试这个 - where 子句中的逗号语法看起来不熟悉：

```
SELECT dividend
    FROM Dividends, Avatar_recs
    WHERE
        Dividends.entityID=Avatar_recs.entityID AND Avatar_recs.avatarID='1' 
```

# azure - 检测 SQL Azure 是否正在节流

> ID：11436892
> 
> 赞同：5
> 
> 时间：2012-07-11T16:12:21.880
> 
> 标签：azure, azure-sql-database, throttling

我有一个 Azure 辅助角色，可以将一批记录插入表中。昨天，插入记录最多需要 5 分钟，但今天已经花费了几个小时。我怀疑该过程正在受到限制，但我没有遇到任何异常。如果您受到限制，SQL Azure 是否总是返回错误，或者是否有其他方法可以检测您是否受到限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:57:04.740

在 CPU 节流的情况下，SQL 数据库不会抛出错误，但会减慢操作速度。目前没有任何机制可以确定这种形式的限制是否正在发生，除了可能查看查询统计信息，告诉您工作正在缓慢进行（如果您的 CPU 时间比平时低）。检查此链接以获取有关此行为的详细信息：[性能和弹性指南](http://social.technet.microsoft.com/wiki/contents/articles/3507.windows-azure-sql-database-performance-and-elasticity-guide.aspx)（查找“引擎节流监控的性能阈值”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T02:14:26.390

其中一项较新的功能是能够监控 SQL Azure 数据库具有的未完成请求的数量。您可以使用以下查询执行此操作：

从 sys.dm_exec_requests 中选择 count(*)

正如您将在本[文档](http://social.technet.microsoft.com/wiki/contents/articles/1541.windows-azure-sql-database-connection-management.aspx#Throttling_Limits)中看到的那样，达到工作线程的限制是被限制的一个关键原因。此处还记录了当您接近 180 个工作线程时，您可能会受到限制。

这是用于 SQL Azure的[Cotega监视服务中用于检测问题的东西之一。](http://www.cotega.com)[免责声明：我从事这项服务]

# c# - 测试目录复制何时完成

> ID：11436893
> 
> 赞同：0
> 
> 时间：2012-07-11T16:12:40.117
> 
> 标签：c#, windows, visual-studio-2010

我正在编写一个在文件服务器上运行并监视正在共享文件夹中的文件的应用程序。

我正在使用文件系统观察程序，它可以很好地处理文件，但是我也想处理文件夹，所以如果有人将文件夹放入共享中，那么它会被压缩并像文件一样处理。

但是我不知道如何检查目录（和子目录）中的所有文件何时完成复制。

到目前为止，我最好的想法是启动一个计时器并每 10 秒测试一次，以查看内容是否与前 10 秒不同，以及是否有任何文件仍处于锁定状态。然后当没有文件被锁定并且10秒后文件内容相同时，然后处理文件夹。

有没有更好的方法来做到这一点？

# python - Python：替换 Unicode 中的不间断空格

> ID：11436897
> 
> 赞同：5
> 
> 时间：2012-07-11T16:12:49.433
> 
> 标签：python, unicode

在 Python 中，我有一个 Unicode 编码的文本。此文本包含不间断空格，我想将其转换为“x”。不间断空格等于`chr(160)`。我有以下代码，当我使用 Localhost 通过 Eclipse 作为 Django 运行它时效果很好。没有错误和任何不间断的空格都会被转换。

```
my_text = u"hello"
my_new_text = my_text.replace(chr(160), "x") 
```

但是，当我以任何其他方式运行它时（Python 命令行，Django 通过 runserver 而不是 Eclipse）我得到一个错误：

```
'ascii' codec can't decode byte 0xa0 in position 0: ordinal not in range(128) 
```

我想这个错误是有道理的，因为它试图将 Unicode (my_text) 与非 Unicode 的东西进行比较。我的问题是：

1.  如果`chr(160)`不是 Unicode，那是什么？
2.  当我从 Eclipse 运行它时，它是如何工作的？了解这一点将帮助我确定是否需要更改代码的其他部分。我一直在从 Eclipse 测试我的代码。
3.  （最重要）如何解决我原来的删除不间断空格的问题？`my_text`肯定会是Unicode。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T16:17:16.347

1.  在 Python 2 中，`chr(160)`是长度为 1 的字节字符串，其唯一字节的值为 160，或十六进制 a0。除了特定编码的上下文之外，它没有任何意义。
2.  我不熟悉 Eclipse，但它可能在玩自己的编码技巧。
3.  如果你想要 Unicode 字符`NO-BREAK SPACE`，即代码点 160，那就是`unichr(160)`.

例如，

```
>>> u"hello\u00a0world".replace(unichr(160), "X")
u'helloXworld 
```

# android - 将 SQLite db 从 Android 复制到 PC（然后再返回）？

> ID：11436901
> 
> 赞同：1
> 
> 时间：2012-07-11T16:12:57.083
> 
> 标签：android, sqlite, android-emulator, sqliteopenhelper

我在我的 Android 设备（模拟器）中创建了一个数据库（SQLite），我想将它从设备复制到我的 PC 以便于编辑。

这可能吗？

应用程序将 db 文件放在哪里以及如何访问它？显然它存储在虚拟设备（模拟器）上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:20:47.187

在 Eclipse 中启动 DDMS 或独立启动。然后转到文件资源管理器选项卡。打开数据/数据/[应用名称]/数据库

在那里你会找到 [databasename].db

突出显示该文件，然后在 DDM 窗口的一角会有一个图标，显示带有红色箭头的老式软盘。单击它，您将看到一个文件浏览器窗口，以选择要将文件复制到硬盘驱动器的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:20:50.500

目前它将类似于 /data/data/your.package.name/databases

模拟器通常以 root 身份运行 adbd，因此您可以通过 adb pull 或 ddms 文件资源管理器访问它；设备通常不会，因此它变得更具挑战性（但您询问了模拟器）。

# ruby-on-rails - 如何确保只有一个带有 mongoid 的已保存模型实例？

> ID：11436903
> 
> 赞同：0
> 
> 时间：2012-07-11T16:13:05.473
> 
> 标签：ruby-on-rails, mongodb, mongoid

我遇到了一个问题，我认为我的解决方案目前非常难看，有什么更好的方法可以使用 rails/mongoid 执行以下操作？基本上，用户可以进来并提供一个“nil”的 answer_id，但是一旦他们回答了问题，我们就想锁定他们的第一个非 nil 答案。

```
controller.rb

r = Response.new(user: current_user, question_id: qid, answer_id: aid)
r.save_now! 
```

以及以下 response.rb 模型：

```
def save_now!
    user = self.user
    qid = self.question_id
    aid = self.answer_id
    resp = Response.where({user_id: user._id, question_id: qid}).first

    # We accept the first answer that is non-nil, 
    # so a user can skip the question (answer_id=nil)
    # And then return and update the answer_id from nil to 'xyz'
    if resp.nil?
      resp = Response.new(user: user, question_id: qid, answer_id: aid)
    else
      if resp.answer_id.nil? && aid.present?
         resp.answer_id = aid
      end    
    end    
    resp.save!
end 
```

所以我想允许 answer_id 最初为零（如果用户跳过了问题），然后取第一个非零的答案。

我真的不认为两次实例化 Response 对象是直观和干净的，一次在控制器中，一次在模型中，但我不确定最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:18:11.733

在`(user, question_id, answer_id)`. 这样只有第一次插入会成功。后续插入将失败并出现错误。这消除了在您的方法中`find`查询的需要。`save_now!`

记得在安全模式下运行这个插入，否则你不会得到异常，它只会默默地失败。

### 更新

似乎您的问题可以通过**重命名**方法来解决。：） 看一看：

```
class Response
  def self.save_answer(user, qid, aid)
      resp = Response.where({user_id: user._id, question_id: qid}).first

      if resp.nil?
        resp = Response.new(user: user, question_id: qid, answer_id: aid)
      else
        if resp.answer_id.nil? && aid.present?
           resp.answer_id = aid
        end    
      end    
      resp.save!
  end
end

# controller.rb
r = Response.save_answer(current_user, qid, aid) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T18:13:37.010

Mongoid 对您可以使用的唯一性进行了验证。在您的情况下，您可以在 user、question_id 和 answer_id 上创建一个复合索引，并且不需要编写 save_answer 方法。

例如，您可以将其放入响应模型中：

```
validates_uniqueness_of :user_id, :question_id 
```

确保您对每个用户的问题只能有一个响应。

# javascript - 如何使用 jquery 将所有正文内容包装在 div 中？

> ID：11436904
> 
> 赞同：3
> 
> 时间：2012-07-11T16:13:17.000
> 
> 标签：javascript, jquery, html, dom, jquery-plugins

在我正在编写的 JQuery 插件中，我想通过将`<body>`标记的所有内容包装在 div 中并调用`.hide()`. 将现有 DOM 元素包装到单个父元素中的最佳方法是什么？

例如：

我想转这个

```
<body>
    <h1>Hello World!</h1>
    <p>This is a sample document to be manipulated by a JQuery plugin!</p>
</body> 
```

进入这个

```
<body>
    <div id="originalBodyContents">
        <h1>Hello World!</h1>
        <p>This is a sample document to be manipulated by a JQuery plugin!</p>
    </div>
</body> 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T16:14:41.990

这个应该做...

```
$(document).ready(function() {
    $('body').wrapInner('<div class="new" />');
    $('.new').hide();
}); 
```

[这里有一个小小提琴来展示类似的东西。](http://jsfiddle.net/z7YdT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:16:22.233

您不想执行以下操作的任何具体原因？

```
$('body').hide();​​​​ 
```

# c++ - C++ 库的 Tcl/Tk GUI 界面

> ID：11436906
> 
> 赞同：1
> 
> 时间：2012-07-11T16:13:22.380
> 
> 标签：c++, user-interface, tcl, tk

我有一个 C++ 库，我们用它来覆盖一些测试函数。但是，我们只是将其设置为从命令行提示。

我正在寻找为其创建一个 GUI 以用作提示而不是命令行。

我一直在研究 Tcl/Tk，但我不太确定它是否能做我想做的事。是否可以使用 Tcl/Tk 包装器来风格化我的库函数？

我可以以某种方式在我的 C++ 代码中包含 Tcl/Tk，以便我在我的库中调用这些函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:33:45.310

可能最容易用 swig 包装 C++ 函数并从 Tcl 调用它们，请参阅 [此介绍](http://www.swig.org/papers/Tcl98/TclChap.html)，然后您可以使用 Tk 为您的输入参数创建一个 GUI 和/或显示您的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:04:20.013

为此要考虑的两种机制是 C++ 模式中的[SWIG](http://www.swig.org/Doc1.1/HTML/Tcl.html)和[critcl](http://www2.tcl.tk/8403)。前者可能更容易上手，因为您已经拥有 C++ 代码，而后者产生更自然（更“Tcl-ish”）的语言嵌入。

连接好库后，首先要做的可能是编写一个小测试套件（使用[`tcltest`](http://www.tcl.tk/man/tcl8.5/TclCmd/tcltest.htm)Tcl 提供的标准包），以便您知道一切正常。（这在以后省去了很多心痛和烦恼！）如果您的代码运行良好，那么您可能会在一两天内拥有一个足够好的测试套件。然后将它连接到您的 GUI（Tk 确实对此很有用），可以安全地编写它，因为它知道它正在使用运行良好的业务逻辑层。如果可以，我鼓励您避免将任何 GUI 代码放入 C++ 代码中；产生一个没有纠缠的干净界面要好得多。（好吧，这并不总是可以避免的，特别是如果你正在做大量的可视化，但它需要更多的工作......）

# java - 如何以毫秒为单位获取格式化日期？

> ID：11436913
> 
> 赞同：8
> 
> 时间：2012-07-11T16:13:52.273
> 
> 标签：java, android, date, java-time, datetime-parsing

我有一个来自 sqllite 数据库的格式化日期，要在图形视图中使用它，我需要将其格式化为一个长数字。

格式为：

2012-07-11 10:55:21

如何将其转换为毫秒？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:23:37.290

您可以使用以下代码将字符串转换为 Date 对象：-

`Date d = DateFormat.parse(String s)`

然后使用内置方法将其转换为毫秒

`long millisec = d.getTime();`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T16:22:43.453

采用`date.getTime()`

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd, HH:mm:ss");
formatter.setLenient(false);

String oldTime = "2012-07-11 10:55:21";
Date oldDate = formatter.parse(oldTime);
long oldMillis = oldDate.getTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:21:00.307

试试这个：

```
import java.util.*;

public class ConvertDateIntoMilliSecondsExample{

public static void main(String args[]){

//create a Date object  
Date date = new Date();
System.out.println("Date is : " + date);

//use getTime() method to retrieve milliseconds
System.out.println("Milliseconds since January 1, 1970, 00:00:00 GMT : "
                  + date.getTime());

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-10T10:57:49.327

# *java.time*

**使用[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*`java.time`的解决方案：**

```
import java.time.Instant;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        // Test
        System.out.println(toMillis("2012-07-11 10:55:21"));
    }

    public static long toMillis(String strDateTime) {
        // Replace the parameter, ZoneId.systemDefault() which returns JVM's default
        // timezone, as applicable e.g. to ZoneId.of("America/New_York")
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("u-M-d H:m:s", Locale.ENGLISH)
                                    .withZone(ZoneId.systemDefault());

        ZonedDateTime zdt = ZonedDateTime.parse(strDateTime, dtf);

        Instant instant = zdt.toInstant();

        return instant.toEpochMilli();
    }
} 
```

**输出：**

```
1342000521000 
```

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) *的更多信息。

* * *

[*无论出于何种原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和您的 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。]

# c++ - 在 C++ 的头文件中声明全局结构

> ID：11436914
> 
> 赞同：0
> 
> 时间：2012-07-11T16:14:01.507
> 
> 标签：c++, opengl, global-variables, declaration, structure

我在头文件中创建了一个结构，如下所示：

```
typedef struct
{
    GLfloat lgtR, lgtG, lgtB, lgtA;
    GLfloat x, y, z;
    bool islight;
    GLfloat width, height, depth;
    GLenum lightn;
    particle prt;
    int maxprt;
} emitter; 
```

这没有问题。

但是，在那个特定的头文件中，我想声明一个全局发射器，我可以在所有函数中使用它而不是主源文件的一部分：

```
// header.h global declaration

emmiter currentEmit;

GLvoid glSetEmitter(emitter emitter)
{
    currentEmit = emitter;
} 
```

但是，当我尝试这样做时，我得到了很多“错误 C2228：'.variable' 的左侧必须有类/结构/联合，所以我假设它根本没有在这里声明我的结构。

有没有办法在头文件中全局声明该结构，如果是这样，是否还有办法让它不成为其他 .cpp 文件的一部分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:15:39.960

`emitter`不一样`emmiter`。

此外，由于这是 C++ - 直接编写`struct {};`，不需要`typedef`.

您的整个标题是错误的，如果包含在多个翻译单元中，将给出多个定义：

```
// header.h global declaration
extern emitter currentEmit;   // <-- note extern

inline GLvoid glSetEmitter(emitter emitter)  // <-- note inline
{
    currentEmit = emitter;
} 
```

`currentEmit`需要在单个实现文件中定义，而不是头文件。该功能必须`inline`如此，所以它不是由所有 TU 定义的。

最后一件事：通过 const 引用传递参数：

```
inline GLvoid glSetEmitter(const emitter& emitter)  // <-- note inline
{
    currentEmit = emitter;
} 
```

否则将创建不必要的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:23:08.380

```
typedef struct
{
    GLfloat lgtR, lgtG, lgtB, lgtA;
    GLfloat x, y, z;
    bool islight;
    GLfloat width, height, depth;
    GLenum lightn;
    particle prt;
    int maxprt;
} emitter; 
```

应该更好

```
struct Emitter
{
    GLfloat lgtR, lgtG, lgtB, lgtA;
    GLfloat x, y, z;
    bool islight;
    GLfloat width, height, depth;
    GLenum lightn;
    particle prt;
    int maxprt;
}; 
```

> 有没有办法在头文件中全局声明该结构，

是的，有两种主要方法可以避免在每个编译单元中创建变量。

首先是 Meyers 的单身人士：

```
namespace g {
    inline Emitter& emitter()
    {
        static Emitter theEmitter;
        return theEmitter;
    }
}

void foo() { g::emitter().x = 666; } 
```

然后是模板化技巧：

```
namespace detail {
    template< class Dummy >
    struct EmitterVariable
    {
        static Emitter v;
    };

    template< class Dummy >
    Emitter EmitterVariable<Dummy>::v = {};
}

namespace g {
    static Emitter& emitter = EmitterVariable<void>::v;
}

void foo{ g::emitter.x = 666; } 
```

> 如果是这样，是否还有一种方法可以防止它也成为其他 .cpp 文件的一部分？

是的，上述两种解决方案都可以做到这一点。

然而，最后一个向每个编译单元注入了一个引用，这实际上是一个指针的大小。

也就是说，全局变量往往会产生非常混乱的数据流。你不知道代码的哪一部分放了一些东西。您不知道它是否或何时正确初始化。如果在这里更改数据，您不知道其他哪些部分会受到影响。或者什么时候。等等。所以这绝对不是一个好主意。全局*常量*，OK，但是全局*变量*，Just Say No™。

# ios - ACDOAuthSigner 连接出现意外错误

> ID：11436916
> 
> 赞同：2
> 
> 时间：2012-07-11T16:14:13.240
> 
> 标签：ios, ios5, acaccount

以前有人遇到过这个例外吗？如果是这样，那是什么意思？尝试将新帐户保存到 ACAccountStore 时，我偶尔会遇到此问题。到目前为止，我还没有找到任何关于问题所在的信息。

```
'Unexpected error on ACDOAuthSigner connection: Error Domain=XPCObjectsErrorDomain Code=2' 
```

# actionscript-3 - 随机化影片剪辑动画的某些值

> ID：11436917
> 
> 赞同：0
> 
> 时间：2012-07-11T16:14:17.887
> 
> 标签：actionscript-3, flash

比如说，我有一个从第 0 帧开始的补间动画，它的大小为 100x100。然后在第 20 帧，大小变为 100x500，因此影片剪辑将垂直拉伸。如果我希望该值介于 450 到 550 之间，那么当我快速播放时，动画看起来会不一样？我觉得它需要动作脚本（首选 3.0），但我尝试访问影片剪辑的变量，但找不到任何符合我要求的内容。

主要是我想随机化大小，位置，倾斜，如果可能的话，发光滤镜的颜色。（例如 R +- 10% 从 150 和绿色 +- 10% 从 64）

在批量生产此 MC 时会很有用，因此动画看起来不会那么重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:28:54.100

在您的情况下，您可能不想为动画“评分”，而是使用 ActionScript 3 编写调整大小动画的脚本。这可以通过使用 Flash 提供的 AS3 Tween 类来完成。

```
// import the namespaces
import fl.transitions.Tween;
import fl.transitions.easing.*;

var endHeight:Number = Math.random() * 100 + 450;
var startHeight:Number = 100;
var myTween:Tween = new Tween(your_movie_clip, "height", Elastic.easeOut, startHeight, endHeight, 20); 
```

有关 Tween 类的更多信息，请参见[Adob​​e](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)和[本教程](http://www.zedia.net/actionscript-3-tweens-tutorial/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:28:08.007

由于您要创建的补间是动态的，并且无法在编译期间由 flash 预先计算，因此您必须以编程方式创建它。

为此，您可以从头开始手动操作，也可以使用 Tween 类。

```
// myMC is the movie clip reference you want to resize
new Tween(myMC, "height", Bounce.easeIn, 100, 450 + Math.round(Math.random() * 100), 20, false); 
```

看看[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)

M。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:19:50.783

您想使用 Math.random() 函数。

```
//$mc is my movieclip
$mc.width = (Math.random()*100)+450; 
```

# objective-c - 在编辑模式下选择表格视图

> ID：11436919
> 
> 赞同：1
> 
> 时间：2012-07-11T16:14:29.420
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uitableview

我想推送两个不同的视图控制器：1）。当 tableView 处于“正常模式”时 2)。当表格视图处于编辑模式时。编辑按钮在我的导航栏上。当表格视图处于“正常模式”时，我可以选择一个单元格，它变成蓝色并推动我的视图控制器。我怎样才能使它能够在编辑模式下选择表格视图？这是我到目前为止所做的：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
DetailViewController *detailViewController = [[DetailViewController alloc] initForNewItem:NO];

[detailViewController setItem:selectedItem];

 //This doesnt work because i cant select the cell  
 if(aTableView.editing){

   [[self navigationController] pushViewController:detailViewController animated:YES];

} else {
//push something else     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:01:49.440

也许您应该将 UITableView 属性allowSelectionDuringEditing 设置为YES（默认为NO）。尝试在 LoadView 中设置它，而不是在 init 中。

# ruby-on-rails - Rspec：在路由规范中添加一些标头请求

> ID：11436924
> 
> 赞同：10
> 
> 时间：2012-07-11T16:14:46.187
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我正在开发一个 Rails 应用程序，它有一个 JSON 格式的 REST API 和版本（根据这个优秀的 Ryan 演员：[http](http://railscasts.com/episodes/350-rest-api-versioning) ://railscasts.com/episodes/350-rest-api-versioning ）。

例如，有一个规范/请求规范：

```
require 'spec_helper'

describe "My Friends" do
  describe "GET /my/friends.json" do
    it "should get my_friends_path" do
      get v1_my_friends_path, {}, {'HTTP_ACCEPT' => 'application/vnd.myapp+json; level=1'}
      response.status.should be(401)
    end
  end
end 
```

而且效果很好。但是（保持这个例子）我们如何编写路由规范？例如这个规范是不正确的：

```
require 'spec_helper'

describe "friends routing" do
  it "routes to #index" do
    get("/my/friends.json", nil, {'HTTP_ACCEPT' => 'application/vnd.myapp+json; level=1'}).
      should route_to({ action: "index",
                    controller: "api/v1/private/my/friends",
                        format: "json" })
  end
end 
```

我尝试了不同的方法（例如`request.headers['Accept']`and `@request.headers['Accept']`， where `request`is undefined and `@request`is nil）；我真的不知道该怎么做。

我正在使用 Ruby 1.9.3、Rails 3.2.6 和 rspec-rails 2.11.0。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-09T17:23:51.523

通过结合 Cristophe 和 Piotr 的答案中的想法，我想出了一个适合我的解决方案。我正在使用 rspec 和 rails 3.0。

```
it 'should route like i want it to' do 
  Rack::MockRequest::DEFAULT_ENV["HTTP_ACCEPT"] = "*/*"
  {get: "/foo/bar"}.
    should route_to(
    controller: 'foo',
    action: 'bar',
  )
  Rack::MockRequest::DEFAULT_ENV.delete "HTTP_ACCEPT"
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T11:48:12.163

目前您无法在路由规范中发送额外的标头，这是因为`line 608`它`actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb`说：

```
env = Rack::MockRequest.env_for(path, {:method => method}) 
```

`path`是您请求的路径`"/my/friends.json"`和方法是`:get` 结果`env`包含如下内容：

```
{
 "rack.version"=>[1, 1],
 "rack.input"=>#<StringIO:0xb908f5c>,
 "rack.errors"=>#<StringIO:0xb908fac>,
 "rack.multithread"=>true,
 "rack.multiprocess"=>true,
 "rack.run_once"=>false,
 "REQUEST_METHOD"=>"GET",
 "SERVER_NAME"=>"your-url.com", # if path was http://your-url.com/
 "SERVER_PORT"=>"80",
 "QUERY_STRING"=>"",
 "PATH_INFO"=>"/",
 "rack.url_scheme"=>"http",
 "HTTPS"=>"off",
 "SCRIPT_NAME"=>"",
 "CONTENT_LENGTH"=>"0"
} 
```

如果您能够模拟`Rack::MockRequest::env_for`，则应该可以注入除 env_for 生成的标头之外的其他标头（请参阅上面的哈希）。

除了您当前使用的 route_to 匹配器错误之外，您应该在指定方法和路径的 Hash 上调用它，如下所示：

```
{ get: '/' }.should route_to(controller: 'main', action: 'index') 
```

让我们知道您是否能够模拟该 env_for 并让它返回您的标头，很高兴知道。

问候克里斯托夫

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T12:09:50.577

```
before do
  ActionDispatch::TestRequest::DEFAULT_ENV["action_dispatch.request.accepts"] = "application/vnd.application-v1+json"
end

after do
  ActionDispatch::TestRequest::DEFAULT_ENV.delete("action_dispatch.request.accepts")
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-01T15:33:04.913

您可以使用 rspec`and_wrap_original`来模拟该`Rack::MockRequest.env_for`方法：

```
expect(Rack::MockRequest).to receive(:env_for).and_wrap_original do |original_method, *args, &block|
  original_method.call(*args, &block).tap { |hash| hash['HTTP_ACCEPT'] = 'application/vnd.myapp+json; level=1' }
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-30T18:03:32.643

对于 Rails 3 和 4，我在[RSpec 中围绕 hook](https://relishapp.com/rspec/rspec-core/v/3-7/docs/hooks/around-hooks)完成了以下操作：

```
around do |example|
  Rack::MockRequest::DEFAULT_ENV['HTTP_ACCEPT'] = 'application/vnd.vendor+json; version=1'

  example.run

  Rack::MockRequest::DEFAULT_ENV.delete 'HTTP_ACCEPT'
end 
```

由于`Rack >= 2.0.3`（[由 Rails 5 使用](https://rubygems.org/gems/actionpack/versions/5.0.0)）`Rack::MockRequest::DEFAULT_ENV` [哈希被冻结](https://github.com/rack/rack/commit/fd1fbab1ec8c7fc49ac805aac47b1f12d4cc5a99)。

您可以重新定义常量并使用[Kernel.silence_warnings](http://api.rubyonrails.org/v5.0/classes/Kernel.html#method-i-silence_warnings)使 Ruby 警告静音：

```
around do |example|
  silence_warnings do
    Rack::MockRequest::DEFAULT_ENV = Rack::MockRequest::DEFAULT_ENV.dup
  end

  Rack::MockRequest::DEFAULT_ENV['HTTP_ACCEPT'] = 'application/vnd.vendor+json; version=1'

  example.run

  Rack::MockRequest::DEFAULT_ENV.delete 'HTTP_ACCEPT'
end 
```

这有点骇人听闻，但它就像一个魅力。

# java - 从 Java 1.4 转换到 Java 1.6

> ID：11436926
> 
> 赞同：0
> 
> 时间：2012-07-11T16:14:51.113
> 
> 标签：java, jakarta-ee, migration, ibm-rad

我目前正在从 Java 1.4 转换到 Java 1.6。当我尝试在 Java 1.6 中重新编译我的代码时，我收到以下编译错误：

```
_getAgentInfoOperation0.setUse(com.ibm.ws.webservices.engine.enum.Use.LITERAL);
_getAgentInfoOperation0.setStyle(com.ibm.ws.webservices.engine.enum.Style.WRAPPED); 
```

我知道 enum 是 Java 1.6 中的保留字。有人告诉我，我可以将枚举更改为枚举**类型**，并且应该可以干净地编译。我将代码更改为枚举类型：

```
_getAgentInfoOperation0.setUse(com.ibm.ws.webservices.engine.enumtype.Use.LITERAL);
_getAgentInfoOperation0.setStyle(com.ibm.ws.webservices.engine.enumtype.Style.WRAPPED); 
```

当我更改为 enumtype 时，出现以下两个错误：

1) OperationDesc 类型中的方法 setUse(Use) 不适用于参数 (Use)。

2) OperationDesc 类型中的setStyle(Style) 方法不适用于参数(Style)。

有谁知道我需要做什么才能获得干净的编译？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:39:01.500

在我看来，它`OperationDesc`是您的代码，`com.ibm.ws...`是您正在使用的库。我怀疑，即使您切换到使用新`enumtype`版本的库，您的旧代码仍然需要该`enum`版本，因此它无法识别新版本`Use`或`Style`对象。

阅读[此论坛主题](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14800435)后，我想知道您是否还没有更新要使用的构建路径`com.ibm.ws.webservices.thinclient_7.0.0.jar`。

# ruby-on-rails - Ruby on Rails 的最佳托管（截至 2012 年）

> ID：11436930
> 
> 赞同：21
> 
> 时间：2012-07-11T16:15:04.483
> 
> 标签：ruby-on-rails, hosting

我想知道人们认为目前 Ruby on Rails 的最佳主机是什么。我在这里找到了一些关于这个主题的旧帖子，但我想知道当前的协议是什么。共享主机现在还可以，但我希望以后可以选择专用主机。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-11T16:19:00.953

尽管有些人会抱怨，但[Heroku](http://www.heroku.com/)仍然是我心目中最好的。超级容易设置，超级容易扩展。您可以在 2 分钟内部署到 Heroku。最重要的是，基本使用是免费的。

我喜欢 Heroku 的另一件事是它有一个无与伦比的社区使用它，这意味着对 StackOverflow ( [https://stackoverflow.com/questions/tagged/heroku](https://stackoverflow.com/questions/tagged/heroku) ) 的大量支持。

如果你需要知道你需要多少比例的网络/工人测功机，请看这里： [Heroku：网络测功机与工人测功机？我需要多少/什么比例？](https://stackoverflow.com/questions/8426244/heroku-web-dyno-vs-worker-dyno-how-many-what-ratio-do-i-need)

尽管请记住这一点：需要一段*时间*才能进行扩展。正如 37signals 所说，当您遇到问题时，请处理缩放问题。

* * *

如果您正在寻找更大的灵活性，[Amazon EC2](http://aws.amazon.com/ec2/)始终是一个不错的选择。你只需为你使用的东西付费，这总是很好的。

* * *

[Linode](http://www.linode.com/)仍然不错，而且也相当便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:17:42.617

我认为最好的选择是[AWS](http://aws.amazon.com/)或[Heroku](http://heroku.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:42:56.993

这完全取决于您正在构建什么以及如何构建它。如果您的应用程序是非常简单的 rails 应用程序，并且您没有在系统级别上做任何特别的事情（假设以 heroku 附加组件支持的方式处理转录视频），那么 heroku 可能是获得的最快方法之一开始行动。如果您正在系统级别构建某些东西，您的应用程序需要访问系统上的任何东西，您可能最好使用 linode 或 AWS 路由，这也很大程度上取决于您正在寻找的控制/责任级别。

现在也正在对这个主题进行调查，他们还没有公布 2012 年的结果，但 2009 年是可用的：

[http://rails-hosting.com/Results/Sur​​veySummary.html](http://rails-hosting.com/Results/SurveySummary.html)

# java - 使用 Java 进行多个 SQL 查询（效率）

> ID：11436933
> 
> 赞同：2
> 
> 时间：2012-07-11T16:15:14.470
> 
> 标签：java, sql, database, jdbc

我有一个连接到 SQL Server 2008 数据库并执行修改的 Java 程序。如果我要修改一百万条记录，那么执行以下操作是不好的做法：

```
for(all of the records I need to modify) {
    PreparedStatement pst = conn.prepareStatement(someQuery);
    // set record specific parameters for pst
    // execute pst
} 
```

或者我应该构建一个查询并执行它？它会有所作为吗？它是否取决于它是 UPDATE、INSERT 还是 DELETE？我的 SQL 知识非常基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:41:14.603

如果所有迭代的查询都相同，请在迭代之前创建，并按照建议`PreparedStatement`在迭代调用结束时创建。`PreparedStatemetn.executeBatch()``Jesse Webb`

我建议在几次迭代后提交您的事务（可能是在每 1000 次迭代之后），因为在不提交事务的情况下更新或删除记录时，变异记录会被锁定，这可能会给数据库的其他用户带来问题（如果您不是这些数据库对象的唯一客户！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:24:55.053

对于大量更新，最好使用[`Statement.executeBatch()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29).

尝试用 Google 搜索“java executebatch 示例”作为示例。

您很可能还希望确保正确使用事务，查询的许多开销来自隐式事务（每个查询一个），其中对许多语句使用单个事务可能会更有效。

# jquery - 富文本编辑器 niceEdit 上的 jQuery keyup 事件不起作用

> ID：11436938
> 
> 赞同：0
> 
> 时间：2012-07-11T16:15:23.313
> 
> 标签：jquery, plugins, textarea, nicedit, keyup

我正在使用不错的 Edit 文本编辑器作为我的富文本编辑器。

你可以在这里看到它：[niceedit](http://nicedit.com/)

我不知道如何，但 jQuery keyup 事件不适用于此文本编辑器。

我很确定我的代码是正确的

```
$(document).ready(function(){
    $("#question_input").keyup(function(){
        alert("Hello world");
    });
});

<textarea onkeyup="alert(54534)" id="question_input"></textarea> 
```

即使这个内联 javascript 也不起作用；

我实际上只是想在 keyup 事件上复制此文本编辑器的内容。但是这段简单的代码仍然不起作用。

我的一般猜测是开发人员可能出于某种原因禁用了这些事件。

有什么方法可以启用它吗？

注意：我已经测试了另一个运行流畅的 jQuery 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:20:13.050

RTE 通常将提供的 textarea 替换为 iframe，因此您将事件绑定到的对象可能不是您实际看到的对象。我对nicedit并不特别熟悉，所以我不知道它会是什么API调用，但是您需要获取生成的iframe（或者可能是iframe中的文档）并在其上绑定keyup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:39:38.137

```
$(function(){
  $('body').on('keyup', '.nicEdit-main', function(){
    alert("Hello World");
  });  
}); 
```

# php - 优化多数据库 Web 应用程序的正确方法

> ID：11436940
> 
> 赞同：4
> 
> 时间：2012-07-11T16:15:27.640
> 
> 标签：php, mysql, optimization, mysqli, query-optimization

我目前正在构建一个将同时使用两个数据库的 Web 应用程序。用户首先创建一个通用帐户，然后使用它在多个“服务器”上创建多个角色。（把它想象成在 Facebook 上创建一个帐户，然后用它在其他网站上注册）。

我当前的数据库设置如下：

*   `main_english`
*   `main_russian`
*   `server1`
*   `server2`
*   `server3`

`main_english`和`main_russian`数据库包含以适当语言注册的用户的**会话和一般帐户数据。**

和数据库处理英语用户创建的字符数据，同时`server1`处理俄语用户。`server2``server3`

用户将每 5-10 秒左右更新一次表格。我的问题是，我怎样才能有效地处理使用多个数据库？

**到目前为止，我已经有了几个选择：**

1.  打开两个数据库连接：一个 for `main_`，另一个 for `server`，但我读过打开它们相当昂贵。
2.  修改我的所有查询以明确说明要从哪个数据库更新/选择数据（该项目还很年轻，因此不会**那么** 痛苦）
3.  修改我的 $db 类以使`select_db()`每个查询都有语句，在我看来，这既混乱又低效。

你有*什么*建议？也许我对为`server`查询打开第二个连接反应过度了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:19:24.923

众所周知，MySQL 具有快速的连接处理能力，因此不太可能成为瓶颈。话虽如此，您可以查看`PDO`或`mysqli`扩展中的持久连接。

在服务器访问和数据建模方面，如果不了解您的应用程序，就很难说。DB 从站如何考虑？复制延迟可以吗？

# java - 在 Java Web Start 中检索地理位置

> ID：11436944
> 
> 赞同：0
> 
> 时间：2012-07-11T16:15:35.580
> 
> 标签：java, geolocation, gps, java-web-start

我正在帮助开发 Java Web Start* 应用程序，并且正在寻找检索用户位置的方法。[一个理想的解决方案是使用最好的可用硬件的JSR-179](http://en.wikipedia.org/wiki/Location_API_for_Java_ME)之类的东西，但如果失败，那么更直接地与 GPS 硬件（如果可用）接口是一种可能的选择。

**有没有人实施过这样的事情，如果是这样，你采取了什么方法？**

由于我无法找到任何类似 JSR-179 的 API，因此我正在研究几个潜在的解决方案，但它们都有缺点：

1.  从（虚拟）串行端口读取 GPS 数据。
    *   仅支持通过串行端口连接的硬件。
    *   据我所知，我们无法自动检测要使用的端口，因此必须允许用户配置它。这远非理想！
2.  利用 HTML 5 的[Geolocation API ，通过](http://dev.w3.org/geo/api/spec-source.html)[ScriptEngine API](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html)与之交互。
    *   我以前从未使用过其中任何一个，所以我不知道这在这一点上有多可行！

**任何人都可以提出其他潜在的方法，或者告诉我我的任何一个想法是否是死胡同吗？**

*尽管我们目前使用 Web Start，并且更愿意继续这样做，但我们可能会考虑放弃它，转而支持[getdown](http://code.google.com/p/getdown/)之类的东西，如果这样可以让我们实现地理定位。

**编辑：** 我最初没有说明的另一个要求是我们需要能够跟踪用户的*当前*位置，而不仅仅是他们启动应用程序时所在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:03:34.343

您可以将其部署为小程序，而不是将您的应用程序部署为 Java Web Start 应用程序。在这种情况下，可以通过[LiveConnect](http://docs.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/java_js.html)调用浏览器 API 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:04:19.377

ScriptEngine API 不会帮助您，因为它没有链接到支持 Geolocation API 的浏览器。此外，Java Web Start 完全独立于浏览器（您可以关闭浏览器，应用程序将继续工作，这与小程序不同），因此无法调用 Geolocation API。

一种解决方案是通过使用 HTML5 Geolocation API 的外部机制向 JWS 应用程序提供位置参数。例如，不是直接调用 JNLP 文件来启动应用程序，而是加载一个带有查询 Geolocation API 的 JavaScript 片段的页面，然后调用 JSP 文件的 URL：

```
http://www.example.com/myapp/launcher.jsp?latitude=....&longitude=.... 
```

该`launcher.jsp`页面将生成具有适当参数的 JNLP 文件：

```
<resources>
  <property name="jnlp.myapp.latitude"  value="<%= request.getParameter("latitude") %>"/>
  <property name="jnlp.myapp.longitude" value="<%= request.getParameter("longitude") %>"/>
</resources> 
```

然后您可以检索应用程序中的坐标作为系统属性。

如果您只对用户的静态位置感兴趣，这将起作用。如果用户移动，您将无法跟踪他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:44:05.650

一个问题和想法不仅仅是一个答案，但这里有。

您的用户在什么硬件上运行？我猜是笔记本电脑。
你能坚持让用户也有一部智能手机并编写一个小应用程序来查询他们的 GPS 位置并将其报告给你的主应用程序吗？
（他们可能已经有智能手机，所以这可能不是一个过度的要求）

该报告可以通过手机将位置上传到互联网上的中央数据库，然后应用程序下载该信息来完成，或者可以通过某种方式从手机无线发送到笔记本电脑。

# c# - MonthCalendar 粗体日期导致带有 DateChanged 事件的蜂鸣声

> ID：11436948
> 
> 赞同：0
> 
> 时间：2012-07-11T16:15:43.797
> 
> 标签：c#, beep, monthcalendar

我在 Visual Studio 2010 下的 C-Sharp 中的 MonthCalendar 控件的 DateChanged 事件中加粗日期。

通过单击上/下个月更改月份会发出哔声。不过，一切正常。

如何避免/静噪哔声？

这个问题非常容易复制。

1.  创建一个新的虚拟 WinForm 项目
2.  将 MonthCalendar 控件添加到表单
3.  添加一个 DateChanged 事件
4.  在 DateChanged 事件中，添加以下代码：

    ```
    DateTime[] dteBolded = { new DateTime(2012, 9, 28, 0, 0, 0), new DateTime(2012, 9, 21, 0, 0, 0) };

    this.monthCalendar1.RemoveAllBoldedDates();
    this.monthCalendar1.BoldedDates = dteBolded; 
    ```

5.  运行，在VS2010里面按play。

6.  单击上/下个月。您可以听到哔声。

我该如何解决这个问题？

提前致谢，

莎拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:56:43.383

加粗日期属性是特殊的。使用创建本机 Windows 控件时指定的样式标志 (MCS_DAYSTATE) 打开对它的支持。您的代码更改了强制重新创建本机控制窗口的属性。有一种明显的方法可以看到它，你会看到它非常明显地闪烁。

发出哔声是因为它现在是获取输入事件的*新控件。*它感到困惑并发出哔哔声。

解决方法是延迟更改属性，以便完成输入处理。您可以使用 Control.BeginInvoke() 方法优雅地做到这一点。像这样：

```
 private void monthCalendar1_DateChanged(object sender, DateRangeEventArgs e) {
        this.BeginInvoke(new Action(() => {
            DateTime[] dteBolded = { new DateTime(2012, 9, 28, 0, 0, 0), new DateTime(2012, 9, 21, 0, 0, 0) };

            this.monthCalendar1.RemoveAllBoldedDates();
            this.monthCalendar1.BoldedDates = dteBolded;
        }));
    } 
```

# git - Git 图形历史输出

> ID：11436949
> 
> 赞同：0
> 
> 时间：2012-07-11T16:15:45.073
> 
> 标签：git

目前我正在使用`git log --graph --all`可视化我的回购历史

我希望输出也包含提交完成的分支。我该怎么做？

电流输出：

```
* | commit 2da166d419c48555b1ce79784304632bf3f6e98f
| | Author: TechplexEngineer <techplex.engineer@>
| | Date:   Fri Jul 6 10:53:55 2012 -0400
| |
| |     Changed polled and exception mode to use the same logic to decide when t
| |     do a refresh/poll.
| |
* | commit b2b7a99931a917e697da3bc38be1636b33c1c44a
|/  Author: TechplexEngineer <techplex.engineer@>
|   Date:   Thu Jul 5 14:43:38 2012 -0400
|
|       Cleaned up comments and removed some old dead code
|
| * commit fb6d01eafca28aa3a84e72ed3f057486accd6532
|/  Author: cparent <Christopher.Parent@>
|   Date:   Fri Jul 6 10:38:28 2012 -0400
|
|       Got multiple reads and writes to happen in both
|       polled and exception mode 
```

期望的输出：

```
* | commit 2da166d419c48555b1ce79784304632bf3f6e98f on branch Master
| | Author: TechplexEngineer <techplex.engineer@>
| | Date:   Fri Jul 6 10:53:55 2012 -0400
| |
| |     Changed polled and exception mode to use the same logic to decide when t
| |     do a refresh/poll.
| |
* | commit b2b7a99931a917e697da3bc38be1636b33c1c44a on branch Master
|/  Author: TechplexEngineer <techplex.engineer@>
|   Date:   Thu Jul 5 14:43:38 2012 -0400
|
|       Cleaned up comments and removed some old dead code
|
| * commit fb6d01eafca28aa3a84e72ed3f057486accd6532 on branch chris
|/  Author: cparent <Christopher.Parent@>
|   Date:   Fri Jul 6 10:38:28 2012 -0400
|
|       Got multiple reads and writes to happen in both
|       polled and exception mode 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:23:18.270

这是不可能的，因为 git 没有记录进行提交的原始分支（如果有的话）。

如果提交当前由分支或标签指向，则使用`--decorate`which 将注释提交，这是您可以获得的最佳效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:23:54.177

这实际上是不可能的，因为分支只是*指向*单个提交的指针。因此，提交可以成为许多不同分支历史的一部分。充其量你可以得到类似于 gitk 输出的东西，其中分支或标签只是提交旁边的标记。

# java - ORA 000001 违反唯一约束

> ID：11436952
> 
> 赞同：0
> 
> 时间：2012-07-11T16:15:51.157
> 
> 标签：java, oracle, insert, ora-00001, batch-updates

我对具有 dep_id 和 emp_id 主键的表有一个插入语句。我的 java 程序为新记录生成一个新的 emp_id 并插入它。例如，如果我有 dep_id = 100 和 emp_id = 25，我无法插入 dep_id = 100 和 emp_id = 26 的记录，但我可以插入 dep_id = 100 和 emp_id = 27 的记录。我通过检查如果存在某种组合（dep_id = 100 和 emp_id = 26），则选择语句。没有那种东西。我仍然从 dep_id = 100 和 emp_id = 26 处删除并提交只是为了确定，然后尝试插入，但它仍然不起作用。可能有什么问题？以下是代码：修改后的 DDL 和 Insert 语句（从 Eclipse 控制台获得）

```
 CREATE  TABLE "TestDB"."table1" 
 (  "dep_id" NUMBER(20,0), 
"emp_id" NUMBER(20,0), 
"STATUS" VARCHAR2(10 BYTE), 
"PRO_LEVEL" VARCHAR2(14 BYTE), 
"new_sql_stmt" VARCHAR2(4000 BYTE), 
"DEL_TEM" VARCHAR2(500 BYTE), 
"tab_name" VARCHAR2(4000 BYTE), 
"COL_NAME" VARCHAR2(4000 BYTE), 
"QUERY_TYPE" VARCHAR2(4000 BYTE), 
"NAME" VARCHAR2(4000 BYTE), 
"DT_MODIFIED" DATE DEFAULT SYSDATE 
```

)

```
 CREATE UNIQUE INDEX "TestDB"."table1_PK" ON "TestDB"."table1" ("dep_id", "emp_id") 

     INSERT into table1            (dep_id,emp_id,status,new_sql_stmt,tab_name,col_name,query_type,NAME)values('100','26','Unlock','INSERT into testTab(id_some,nm_some,id_some_origin,flag,some_code,author,order) values  (''S11111111'',''trialSome00'','''',''y'','''',''100'',0)','testTab','nm_some','INSERT','trialSome00') 
```

请注意，Insert 语句本身有另一个 Insert 语句作为值。这个插入语句（主要的）在应用程序的许多其他地方使用。另外，我使用 100 的 dep_id 是一个测试 dep_id。除了我，没有人使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:16:11.840

创建一个 Oracle 序列：

```
CREATE SEQUENCE emp_id_seq MINVALUE 1 START WITH 1 INCREMENT BY 1; 
```

现在，您可以在代码中调用该序列上的“nextval”方法（这可以使用 JDBC 或几乎每个 ORM 来完成，如果不是全部的话），或者您可以在该列上放置一个触发器，自动从中获取 nextval序列并在您进行插入时将其插入表中（在 oracle 上的 IIRC，您将在触发器中使用“BEFORE INSERT”运算符）。

例如

```
create or replace trigger mytable_emp_id_trigger
before insert on mytable
for each row
begin
    select emp_id_seq.nextval into :emp.id from dual;
end;
/ 
```

这样做是线程安全的，你永远不会看到这样的冲突发生。

如果您坚持在 java 代码中执行此操作（假设 DBA 不会让您创建另一个序列，但是为什么 - 如果他们没有，我会感到惊讶），那么您必须使该方法线程安全. 可能最好使用同步方法创建单例（您可以创建单例 EJB）来提供下一个值。您从该单例类中获取您的 id，而不是任何其他类或 ejb 以避免像您现在遇到的问题（无论当前问题是否是因为这个，您现在遇到的是典型的多线程与非同步冲突多线程环境中的方法）。

同时，如果您真的想了解正在发生的事情，请使用您的调试器并观察您的变量以查看现有代码正在生成什么。调试器和手表是你的朋友。你的好朋友们。

# javascript - 数据表 jquery 分页和 colreorder

> ID：11436953
> 
> 赞同：1
> 
> 时间：2012-07-11T16:15:58.230
> 
> 标签：javascript, jquery, datatable, datatables

您好我正在使用 Dragtable jquery 库，我看到您可以通过修改 sDom 属性来自定义分页部分。

```
 $('#example').dataTable( {
                "sPaginationType": "four_button",
                "bFilter": false,
                "sDom": '<"top"lp<"clear">>rt<"bottom"i<"clear">>'
            } ); 
```

我希望在此表中也包含 colreorder 功能。我知道 sDom 是……

```
"sDom": 'Rlfrtip' 
```

我如何包括这个，以便我拥有两个 sDom 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:24:19.657

您可以将 R 放在 sDom 的起始位置：

```
$('#example').dataTable( {
    "sPaginationType": "four_button",
    "bFilter": false,
    "sDom": 'R<"top"lp<"clear">>rt<"bottom"i<"clear">>'
} ); 
```

[http://datatables.net/usage/options#sDom](http://datatables.net/usage/options#sDom)解释了如何使用 sDom 属性。要启用 colResorder，它只需在 (lfrtip) 是默认值的开始处放置一个 R。这也是我所做的，我保留了您在问题中的顺序。

这些是对其他字母的解释：

```
'l' - Length changing
'f' - Filtering input 
't' - The table!
'i' - Information
'p' - Pagination
'r' - pRocessing 
```

# firefox - 火狐媒体元素.js

> ID：11436955
> 
> 赞同：0
> 
> 时间：2012-07-11T16:16:04.957
> 
> 标签：firefox, drupal, mp3, mediaelement.js

我正在尝试将 mediaelement.js 库与 Drupal 一起使用。当我安装 mediaelement drupal 模块和 js 库时，我可以在除 Firefox 之外的所有浏览器上播放 MP3 文件。Flash Fallback 似乎存在问题。但在 mediaelement.js 页面上，我看到 MP3 播放器在 FF 中工作。

我该如何诊断这个问题？我可以谈谈哪些步骤来确定它是这个版本的 JS 库、Drupal 模块还是我正在做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:10:44.277

我遇到了同样的问题，我建议两件事：

1.  添加 MIME-Type：为您的媒体类型添加新的 mime 类型到您的服务器配置中或直接在`.htaccess` 例如我添加的情况下

    ```
    AddType video/mp4 .mp4 
    ```

    最后`.htaccess`让它在FF中工作

2.  确保媒体播放器已正确初始化并且所有路径均已正确设置。检查`pluginPath`和`flashName`属性。

检查[http://mediaelementjs.com/#installation](http://mediaelementjs.com/#installation)了解更多信息。

# javascript - 更改 RTE 中的类和样式属性（designMode on）

> ID：11436965
> 
> 赞同：2
> 
> 时间：2012-07-11T16:16:34.410
> 
> 标签：javascript, jquery, attributes, contenteditable, designmode

我正在使用 CLEditor 在我的 web 应用程序中自定义富文本编辑器。对于更改字体和字体大小，我更喜欢使用比默认 execCommand 更精细的控件，尤其是对于字体大小，因为据我所知，它只是将其设置为旧的 HTML 属性（1-7而不是 14pt 或类似的东西）。所以我想我可以设置样式属性，或者为 CLEditor 生成的 iframe 内的标签添加一个类。但是，我似乎找不到执行此操作所需的命令。

所以我希望能够做这样的事情（使用 jQuery 来帮助）：

```
$("#fontSelector").change(function() {
    editor.execCommand("style", "font-family: " + $(this).val() + ";");
}); 
```

我想这可能需要将选定的文本包装在一个跨度或其他东西中，然后设置样式属性。如果有办法使用 jQuery`addClass`或`css`方法，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:27:33.097

没有用于`document.execCommand()`执行此操作的命令标识符。为了处理 CSS 类的情况，您可以使用我的[Rangy](https://code.google.com/p/rangy/)库的[CSS 类应用程序模块。](https://code.google.com/p/rangy/wiki/CSSClassApplierModule)

# java - Java原始对象实例化：堆与否？

> ID：11436968
> 
> 赞同：0
> 
> 时间：2012-07-11T16:16:51.387
> 
> 标签：java, heap-memory, instantiation

所以我正在阅读这本书，它说如果我创建一个类 Point 然后通过执行实例化它，`Point p1 = new Point();`那么我将拥有：

*   堆上的 Point 对象（作为“new”关键字的结果）；
*   对该对象的引用（p1）；
*   当一个对象没有引用时，它可以被垃圾收集器处理掉。

我想我明白了意思，但它让我思考。原始类型和字符串在“内存方面”会发生什么，即：

```
 - int x1 = 100;
 - String s1 = "hello"; 
```

和

```
 - int x2 = new Integer(100);
 - String s2 = new String("hello"); 
```

在第一种情况下，'100' 和 'hello' 会被实例化并存储在堆上吗？否则，什么是 x1 和 s1 引用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:24:16.650

首先：

```
 int x2 = new Integer(100); 
```

这意味着一个`Integer`对象被创建、出箱（JVM 返回它的`intValue`）并`100`分配给一个`int`原语。该`Integer`对象不再被引用并且可以被释放（当然也许 JIT 可以将其优化为`int x2 = 100`）。

我假设您在谈论局部变量，因为属性是对象的一部分，因此位于堆中。

```
 int x1 = 100; 
```

在堆栈中声明一个 int 变量并赋值

```
 String s1 = "Hello"; 
```

一个 String 对象被创建（或被引用，参见`String.intern()`）并且一个指针被添加到堆栈中。

其他可能性完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:23:37.107

本地原语将被放入堆栈，但对象的成员字段将与该对象一起放入堆中（无论它是否是原始的）。更多信息[在这里](https://stackoverflow.com/questions/3646632/does-the-java-primitives-go-on-the-stack-or-the-heap)。

字符串是对象并且存在于堆上。不过，它们的工作方式确实有所不同，[这里](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)有一些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:29:27.050

S1 和 S2 都将在存储值的位置创建新的内存引用。根据具体情况，原始数据类型可能指的是堆栈或堆。你可以看看[这里](https://stackoverflow.com/questions/2099695/java-array-is-stored-in-stack-or-heap)

# java - Java/Android：解析 XML 以获取某个标签中的所有 xml

> ID：11436971
> 
> 赞同：0
> 
> 时间：2012-07-11T16:16:59.730
> 
> 标签：java, android, xml, string, parsing

我正在用 java 编程（最终在 Android 中），我有一个这样的设置

```
<A>
  <B>
    <C>stuff</C>
     <D>
       <E>other stuff</E>
       <F>more stuff</F>
     </D>
  </B>

  <B>
    <C>stuff</C>
  </B>

   <B>
     <C>some stuff</C>
     <D>
        <E>basic stuff</E>
        <F>even more stuff</F>
     </D>
  </B>
</A> 
```

我想解析它，以便我们得到（在我已经编码的其他东西中）两个 D 中的所有东西，所以我们会得到看起来像的字符串

```
<E>other stuff</E>
<F>more stuff</F> 
```

一个空字符串 ("") 和

```
<E>basic stuff</E>
<F>even more stuff</F> 
```

我一直在使用的解析器在遇到小于符号“<”时立即停止，所以它什么也没给我。有没有办法按照我在 Java 中描述的方式解析它？

编辑：我只是将它转换为字符串并使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:58:00.153

要将解析的 XML 转换回字符串，可以使用`javax.xml.transform.Transformer`. 我附上了解析您的示例 XML 并将所有`D`元素打印到控制台的代码 - 我认为您将能够将其变成您想要的 :)

```
// The below is simply to create a document to test the code with
String xml = "<A><B><C>stuff</C><D><E>other stuff</E><F>more stuff</F></D></B><B><C>stuff</C></B><B><C>some stuff</C><D><E>basic stuff</E><F>even more stuff</F></D></B></A>";

DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
InputSource docSource = new InputSource(new StringReader(xml));
Document document = documentBuilder.parse(docSource);
// The above is simply to create a document to test the code with

// Transformer takes a DOMSource pointed at a Node and outputs it as text
Transformer transformer = TransformerFactory.newInstance().newTransformer();
// Add new lines for every element
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
// Skip the <? xml ... ?> prolog
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");

NodeList elements = document.getElementsByTagName("D");
StringWriter sw = new StringWriter();
StreamResult res = new StreamResult(sw);
DOMSource source = new DOMSource();
for (int i = 0; i < elements.getLength(); i++) {
    Element element = (Element) elements.item(i);
    source.setNode(element);
    // Write the current element to the stringwriter via the streamresult
    transformer.transform(source, res); 
}
System.out.println(sw.toString()); 
```

如果你只想要元素的内容，你可以像这样替换 for 循环：

```
for (int i = 0; i < elements.getLength(); i++) {
    Element element = (Element) elements.item(i);
    NodeList childNodes = element.getChildNodes();
    for (int j = 0; j < childNodes.getLength(); j++) {
        Node childNode = childNodes.item(j);
        source.setNode(childNode);
        transformer.transform(source, res);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:11:17.513

您需要使用已经编写好的解析器。

不要使用您自己推出的产品，您只是要求为自己制造问题。

# python - Python3：当定义 __eq__ 时，从列表中断自动提供 __ne__ 继承？

> ID：11436977
> 
> 赞同：2
> 
> 时间：2012-07-11T16:17:17.507
> 
> 标签：python, inheritance, python-3.x, super

在 Python 3 中，如果您提供一个`__eq__`方法，通常还会提供一个明智的方法，该方法`__ne__`利用您的`__eq__`. 但是，我有（在 Python 3 中）：

```
class SomeOtherClassWhichInheritsFromList(list):
    def __init__(self):
        super().__init__()
        self.parval = 44

    def __eq__(self, other):
        print ("IN SomeOtherClassWhichInheritsFromList EQ")
        if isinstance(other, SomeOtherClassWhichInheritsFromList):
            return super().__eq__(other) and self.parval == other.parval
        return NotImplemented

class SomeClass(SomeOtherClassWhichInheritsFromList):
    def __init__(self, val):
        super().__init__()
        self.val = val

    def __eq__(self, other):
        print ("IN SomeClass EQ")
        if isinstance(other, SomeClass):
            return super().__eq__(other) and self.val == other.val
        return NotImplemented 
```

如果我这样做：

```
sc = SomeClass(99)
sc2 = SomeClass(104)

print (sc != sc2) 
```

我希望看到：

```
IN SomeClass EQ
IN SomeOtherClassWhichInheritsFromList EQ
True 
```

但我反而看到：

```
False 
```

表示`__eq__`默认提供的 my 没有被调用`__ne__`。如果我将 SomeOtherClassWhichInheritsFromList 更改为从对象而不是列表继承，它会按预期工作。

这是因为 list 似乎没有`__mro__`属性，因此`super()`我的`__eq__`方法中的所有内容都无法触发吗？

注意：我知道我可以添加自己的`__ne__`调用 my 的方法`__eq__`（我必须这样做，因为我确实想从列表中继承），但我在这里寻找的是为什么我必须这样做的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T20:08:49.240

如果您定义`__eq__`，您也必须`__ne__`始终定义。来自 Python 3.2 的“数据模型”文档：“”“比较运算符之间没有隐含关系。x==y 的真值并不意味着 x!=y 是假的。因此，在定义**eq** () 时，还应该定义**ne** () 以便运算符按预期运行。"""

[Python 3 数据模型](http://docs.python.org/release/3.2/reference/datamodel.html#object.__ne__)

您假设“在 Python 3 中，如果您提供一个方法，通常也会提供`__eq__`一个明智的方法来使用您的.”，这可能会发生什么 - 就是's方法做到了。没有提及您在数据模型文档中声明的行为 - 尽管没有显式超类（因此继承自）的类的行为与您描述的一样。`__ne__``__eq__``object``__ne__``object`

# facebook - 无法使用服务器端 OAuth Fow 获取长期存在的 Facebook 访问令牌

> ID：11436979
> 
> 赞同：0
> 
> 时间：2012-07-11T16:17:28.437
> 
> 标签：facebook, oauth, server-side, facebook-access-token

我正在尝试获得一个长期存在的 Facebook 访问令牌，以便我的 java servlet 应用程序可以监视和检索我的用户的消息等，而无需每隔一两个小时重新授权一次。

我正在使用服务器端 oauth 流程，并且一切正常，但无法获得超过一天的令牌。

第一个用户授权调用是：

`https://www.facebook.com/dialog/oauth?client_id=-----&client_secret=-----&scope=read_mailbox,manage_pages&force=true&state=-----&redirect_uri=http%3A%2F%2F127.0.0.1%3A7101%2FeStarGlobal-eStarGlobal-context-root%2FOAuthCallback%3BJSESSIONID%3DvS9lP9JcF3B86zD99KVNGXzn2snKRl4V48lkJQD51cvXhpnLsT06%21-281618363%211342018780176%3FAuthSource%3D1%26AuthType%3D1%26EmployeeId%3D`97

用户授权我的应用程序，我在回调 URL 上收到代码并调用我的访问令牌：

```
https://graph.facebook.com/oauth/access_token?client_id=-----&client_secret=-----&code=---code from above---&redirect_uri=http%3A%2F%2F127.0.0.1%3A7101%2FeStarGlobal-eStarGlobal-context-root%2FOAuthCallback%3BJSESSIONID%3DvS9lP9JcF3B86zD99KVNGXzn2snKRl4V48lkJQD51cvXhpnLsT06%21-281618363%211342018780176%3FAuthSource%3D1%26AuthType%3D1%26EmployeeId%3D97 
```

我收到一个有效令牌，有效期约为 6800 秒，并尝试将其换成寿命更长的令牌：

```
https://graph.facebook.com/oauth/access_token?client_id=-----&client_secret=-----&grant_type=fb_exchange_token&fb_exchange_token=---token from above--- 
```

我得到相同的令牌，但过期秒数略短。

我已启用：删除我的 Facebook 应用页面上的 offline_access 权限。我没有增强安全对话框设置。

我将应用程序类型从 Web 更改为 Native/Desktop，并将过期时间延长到大约 89000 秒或一天。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:25:36.193

您说“我没有增强的安全对话框设置。”

如果这意味着您没有使用增强的对话框 - 您需要获取长期存在的令牌。

如果这意味着您没有在增强版本和旧版本之间切换的选项，那么它可能不相关 - 您应该拥有新版本

# javascript - SVG 元素的“原样”边框

> ID：11436980
> 
> 赞同：0
> 
> 时间：2012-07-11T16:17:30.183
> 
> 标签：javascript, svg

我想创建一个小工具来编辑 SVG 对象。现在，我现在要解决的问题是下一个：我有一个对象。Gizmo 出现在对象周围，因此可以缩放、平移和旋转对象。我需要做的是按原样找到对象的边界，因为小玩意儿应该总是这样显示：[http](http://s16.postimage.org/kipdum2v9/example.png) ://s16.postimage.org/kipdum2v9/example.png （如果有人徘徊，粉红色是对象，黑色笔划是小发明）

PS 请不要建议使用现有的编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:38:08.030

我认为您正在寻找形状与边界框的*接触点*。一般来说，要解决您的问题似乎相当困难，也是因为 SVG 形状定义可能是*模糊*的（过滤器等）。

只要你的形状是*路径*，一种简单但近似的方法，可以利用接口[SVGPathElement](http://www.w3.org/TR/SVG11/paths.html#InterfaceSVGPathElement)的 getPointAtLength 方法。采样合理数量的点，并保留极值。这些应该接近要求的点。

也许您可以利用 getBBox() 返回的值来改进近似值。

# c# - 自定义服务器控件和通用 Web 处理程序

> ID：11436986
> 
> 赞同：1
> 
> 时间：2012-07-11T16:17:55.360
> 
> 标签：c#, asp.net

我正在创建一个自定义服务器控件，它将文件异步上传到服务器。此解决方案使用 Flash 元素将文件发布到通用 Web 处理程序（又名 ashx），然后将发布的文件保存在所需位置。

它工作得很好，但是通过这种方法，我确实需要在每个项目中创建 ashx 文件，可能会处理来自 flash 元素的帖子。

我想要实现的是完全封装的服务器控件，它将使用它自己的 ashx（或任何可以替换它的东西）处理程序来上传文件。

有可能吗？任何想法都会受到欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:21:07.793

您可以在包含控件的类库中包含处理程序，然后仅使用以下[`<httpHandlers>`](http://msdn.microsoft.com/en-us/library/aa903367.aspx)部分在 web.config 中注册它：

```
<configuration>
   <system.web>
      <httpHandlers>
         <add verb="*" 
              path="upload.ashx" 
              type="MyControl.MyUploadHandler.New, MyControl" />
     </httpHandlers>
   <system.web>
</configuration> 
```

如果您正在使用 IIS 7 集成管道模式到该`<handlers>`部分：

```
<system.webServer>
    <handlers>
        <add name="UploadHandler" 
             verb="*" 
             path="upload.ashx" 
             type="MyControl.MyUploadHandler.New, MyControl" />
    </handlers>
</system.webServer> 
```

如果您使用的是 ASP.NET 4.0，您可以[查看 PreApplicationStartMethod 基础](http://aboutcode.net/2012/01/15/zero-configuration-asp-net-modules-and-handlers.html)结构，它允许您动态注册处理程序：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(MyControl.StartUp), "PreApplicationStart")] 
```

# ruby - 如何仅在需要时使用引号转义 Ruby 符号？

> ID：11436988
> 
> 赞同：1
> 
> 时间：2012-07-11T16:17:56.320
> 
> 标签：ruby, symbols

IRB 和 Rails 控制台都有一个很好的输出符号的方法，只在必要时引用转义它们。一些例子：

```
1.9.3p194 :001 > "@test".to_sym
 => :@test 
1.9.3p194 :002 > "@Test".to_sym
 => :@Test 
1.9.3p194 :003 > "@123".to_sym
 => :"@123" 
1.9.3p194 :004 > "@@_test".to_sym
 => :@@_test 
1.9.3p194 :005 > "test?".to_sym
 => :test? 
1.9.3p194 :006 > "test!".to_sym
 => :test! 
1.9.3p194 :007 > "_test!".to_sym
 => :_test! 
1.9.3p194 :008 > "_test?".to_sym
 => :_test?
1.9.3p194 :009 > "A!".to_sym
 => :"A!" 
1.9.3p194 :010 > "@a!".to_sym
 => :"@a!" 
```

您将如何自己执行此操作，以便您可以执行以下操作：

```
puts "This is valid code: #{escape_symbol(some_symbol)}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:17:57.147

最简单和最好的方法是通过 Symbol 的检查方法：

```
1.9.3p194 :013 > puts "This is valid code: #{"@a!".to_sym.inspect}"
This is valid code: :"@a!"
 => nil 
1.9.3p194 :014 > puts "This is valid code: #{"a!".to_sym.inspect}"
This is valid code: :a! 
```

如果您好奇，可以查看 Ruby 1.9.3 中 string.c 中的[sym_inspect(VALUE sym) 方法。](http://rxr.whitequark.org/mri/source/string.c?v=1.9.3#7424)

因此，即使您不需要其他方法来调用检查，这也是最简单的实现：

```
def escape_symbol(sym)
  sym.inspect
end 
```

这是我尝试使用一些正则表达式实现的尝试，尽管如果可以的话，我建议您使用检查：

```
def escape_symbol(sym)
  sym =~ /^[@a-zA-Z_]@?[a-zA-Z_0-9]*$/ || sym =~ /^[a-z_][a-zA-Z_0-9]*[?!]?$/ ? ":#{sym}" : ":\"#{sym.gsub(/"/, '\\"')}\""
end 
```

# excel - 如何在 R 中安装 RDCOMEvent 和 SWinTypeLibs 包？

> ID：11436992
> 
> 赞同：1
> 
> 时间：2012-07-11T16:18:10.777
> 
> 标签：excel, r, installation, package

我一直在尝试使用 R 的`RDCOMClient`,`SWinTypeLibs`和`RDCOMServer`包运行一些代码。

代码可以在以下地址找到： [http](http://www.omegahat.org/RDCOMEvents/examples/excelButton.R) ://www.omegahat.org/RDCOMEvents/examples/excelButton.R 。

不幸的是，当我尝试加载`SWinTypeLibs`或`RDCOMServer`包时，我收到以下错误：

> “错误：包 'SWinTypeLibs' 是在 R 2.10.0 之前构建的：请重新安装它”
> 
> “错误：包 'RDCOMServer' 是在 R 2.10.0 之前构建的：请重新安装它”

目前正在使用的 RI 版本是 R 2.13.2。然后我尝试使用早期版本的 R 来解决这个问题（版本 R 2.9.2）。

这解决了问题，`SWinTypeLibs`但我收到以下错误`RDCOMServer`：

```
Error in .cacheClass(cl, cldef, is(cldef, "ClassUnionRepresentation"),  : 
  trying to get slot "package" from an object (class "classRepresentation") that is not an S4 object 
In addition: Warning messages:
1: '.__M__createCOMObject:RDCOMServer' looks like a pre-2.4.0 S4 object: please recreate it 
2: '.__M__getValueOf:RDCOMServer' looks like a pre-2.4.0 S4 object: please recreate it 
3: '.__M__QueryInterface:RDCOMServer' looks like a pre-2.4.0 S4 object: please recreate it 
4: '.__M__setValueOf:RDCOMServer' looks like a pre-2.4.0 S4 object: please recreate it 
5: 'createCOMObject' looks like a pre-2.4.0 S4 object: please recreate it 
6: 'getValueOf' looks like a pre-2.4.0 S4 object: please recreate it 
7: 'QueryInterface' looks like a pre-2.4.0 S4 object: please recreate it 
8: 'setValueOf' looks like a pre-2.4.0 S4 object: please recreate it 
Error: package/namespace load failed for 'RDCOMServer' 
```

`SWinRegistry`请注意，在此之前，我还安装`Ruuid`了`RDCOMServer`.

有谁知道我能做些什么来解决这个问题？

# vb.net - 使用线程数限制线程并使用参数执行 proc

> ID：11436994
> 
> 赞同：0
> 
> 时间：2012-07-11T16:18:15.660
> 
> 标签：vb.net, multithreading, parameters

我想要做的是，创建一个执行某些操作的应用程序。最多应该有 10 个线程在运行。

我有以下代码，它工作正常。我需要向“Somework”程序发送一个参数。我怎样才能做到这一点？

```
Module Module1
    Sub Main()
        Dim Task As New Action(AddressOf SomeWork)

        dim I as integer

        for i=1 to 20
        If RunningThread < 10 Then
            Task.BeginInvoke(AddressOf Callback, Nothing)
            Threading.Interlocked.Increment(RunningThread)
        Else
            SyncLock (Lock)
                tasks.Enqueue(Task)
            End SyncLock
        End If
        next

        Console.ReadLine()
    End Sub

    Private tasks As New Queue(Of action)
    Private RunningThread As Integer
    Private Lock As New Object

    Dim I As Integer = 0

    Private Sub SomeWork()
        I += 1
        Console.WriteLine(I & " doing some work - begin :: " & Now.ToString)
        Threading.Thread.Sleep(10000)
        Console.WriteLine(I & " doing some work - end :: " & Now.ToString)
    End Sub

    Private Sub Callback(ByVal o As Object)
        If tasks.Count > 0 Then
            Dim Task As Action
            SyncLock (Lock)
                Task = tasks.Dequeue
            End SyncLock
            Task.BeginInvoke(AddressOf Callback, Nothing)
        Else
            Threading.Interlocked.Decrement(RunningThread)
        End If
    End Sub
End Module 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:26:44.967

[您可以使用Parallel.ForEach使用](http://msdn.microsoft.com/en-us/library/dd460720.aspx#Y0)[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)(TPL)轻松实现您的要求。使用允许您指定[ParallelOptions](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)参数并将[MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)设置为线程限制的构造函数。

# java - NumberFormatExceptions

> ID：11436995
> 
> 赞同：0
> 
> 时间：2012-07-11T16:18:15.630
> 
> 标签：java, joptionpane

我正在尝试使用实用程序函数来获取 int 并检查错误的输入是否会导致
NumberFormat 异常，有没有办法为以下函数使用非十进制 Int

```
//--- Utility function to get int using a dialog.

public static int getInt(String mess) {
    int val;
    while (true) { // loop until we get a valid int
        String s = JOptionPane.showInputDialog(null, mess);
        try {
            val = Integer.parseInt(s);
            break;  // exit loop with valid int
        } catch (NumberFormatException nx) {
            JOptionPane.showMessageDialog(null, "Enter valid integer");
        }
    }
    return val;
}

//end getInt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:30:28.140

如果我理解你......也许你可以这样做：

```
public static int getInt(String mess) {
    int val;
    while (true) { // loop until we get a valid int
        String s = JOptionPane.showInputDialog(null, mess);
        try {
            if(mess.match("^\d+$")){   // Check if it's only numbers (no comma, no dot, only numeric characters)
               val = Integer.parseInt(s); // Check if it's in the range for Integer numbers.
               break;  // exit loop with valid int
            } else  {
               JOptionPane.showMessageDialog(null, "Enter valid integer");
            }
        } catch (NumberFormatException nx) {
            JOptionPane.showMessageDialog(null, "Enter valid integer");
        }
    }
    return val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:11:16.387

试试你想要的，一个用于十进制检查器，一个用于非十进制 int

// 对于十进制

```
 public static Boolean numberValidate(String text) {
    String expression = "^[+-]?(?:\\d+\\.?\\d*|\\d*\\.?\\d+)[\\r\\n]*$";
    CharSequence inputStr = text;
    Pattern pattern = Pattern.compile(expression);
    Matcher matcher = pattern.matcher(inputStr);
    if (matcher.find()) {
       MatchResult mResult = matcher.toMatchResult();
       String result = mResult.group();
       return true;
    }
    return false;
} 
```

// 非十进制整数

```
public static Boolean numberValidate(String text) {
    String expression = "[a-zA-Z]";
    CharSequence inputStr = text;
    Pattern pattern = Pattern.compile(expression);
    Matcher matcher = pattern.matcher(inputStr);
    if (matcher.find()) {
      MatchResult mResult = matcher.toMatchResult();
      String result = mResult.group();
      return true;
    }
    return false;
} 
```