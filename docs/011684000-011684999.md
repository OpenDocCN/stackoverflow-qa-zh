# StackOverflow 问答 11684000-11684999

# wordpress - Wordpress 默认日历更改

> ID：11684000
> 
> 赞同：0
> 
> 时间：2012-07-27T08:16:28.527
> 
> 标签：wordpress

在 wordpress 默认日历中，需要在所有周五、周六和周日日期周围都有蓝色方块……这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:25:17.033

```
<style type="text/css">

th[title="friday"],
th[title="saturday"],
th[title="sunday"]
{
    background: #09F;
}

</style> 
```

# iphone - 每次更改后 xCode 都会询问我的系统登录名和密码

> ID：11684003
> 
> 赞同：0
> 
> 时间：2012-07-27T08:16:36.527
> 
> 标签：iphone, objective-c, ios, xcode, ios5

> **可能重复：**
> [Mac OS X 在编译项目时想要使用系统钥匙串](https://stackoverflow.com/questions/10204320/mac-os-x-wants-to-use-system-keychain-when-compiling-the-project)

如果我在项目中进行任何更改，然后按“运行”，xCode 会在每次更改后询问我的系统登录名和密码。

如何关闭它？

![在此处输入图像描述](../Images/a1d075e3e6f4252f28822e740900af4a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:13:30.503

双击钥匙串中的 .p12 键 -> AccessControl -> （选择不在那里询问密码）

# magento - Magento 集合和资源集合的区别

> ID：11684007
> 
> 赞同：1
> 
> 时间：2012-07-27T08:16:45.030
> 
> 标签：magento

在 Mage_Core_Model_Abstract 中有`getCollection`一种被广泛使用的方法。

`getCollection`但是，直到现在我都没有看过这个方法。我可以看到它所做的只是调用`$this->getResourceCollection()`

拥有有什么意义，`getCollection`为什么不每个人都只使用 getResourceCollection 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:42:13.517

至于我的观点，它只是为我提供了更简洁的模型集合检索代码，而无需一直不必要地键入单词 Resource。此外，如果您查看 Order 模型或 Quote 模型，您会发现它还使用简化的方法名称来检索项目、地址、付款等。

如果将其命名为`getItemResourceCollection()`，`getAddressResourceCollection()`而不是`getAddressCollection()`or `getItemsCollection()`，则您在开发过程中键入的字符数量正在增加。当我在核心团队工作时，没有解释为什么`getCollection()`应该使用偏爱`getResourceCollection()`，但我使用较短的方法名称是很合乎逻辑的。

至少这些方法中没有一个被标记为已弃用，因此您可以同时使用它们。

# c++ - 你如何将 sockaddr 结构转换为 sockaddr_in - C++ 网络套接字 ubuntu UDP

> ID：11684008
> 
> 赞同：11
> 
> 时间：2012-07-27T08:16:47.823
> 
> 标签：c++, sockets, networking, ubuntu, client

我正在尝试获取客户端地址，但我不确定如何将 sockaddr 结构转换为 sockaddr_in？

```
struct sockaddr_in cliAddr, servAddr;

    n = recvfrom(sd, msg, MAX_MSG, 0,(struct sockaddr *) cliAddr,sizeof(cliAddr));

 //i tried this but it does not work
    struct sockaddr cliSockAddr = (struct sockaddr *) cliAddr; 
    char *ip = inet_ntoa(cliSockAddr.sin_addr); 
```

提前致谢！:)

* * *

我发现了让我走到这一步的问题： [Getting IPV4 address from a sockaddr structure](https://stackoverflow.com/questions/1276294/getting-ipv4-address-from-a-sockaddr-structure)

* * *

很抱歉避免混淆，这是我真正的实现，其中“ci”是一个存储指针的对象，例如 sockaddr_in。

```
 /* receive message */
    n = recvfrom(*(ci->getSd()), msg, MAX_MSG, 0,(struct sockaddr *) ci->getCliAddr(),ci->getCliLen());

    char *ip = inet_ntoa(ci->getCliAddr().sin_addr); 
```

我会收到以下错误：

```
udpserv.cpp:166: error: request for member ‘sin_addr’ in ‘ci->clientInfo::getCliAddr()’, which is of non-class type ‘sockaddr_in*’ 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-02T19:23:33.963

我会指出，如果这实际上是 C++，那么惯用的方法是：

```
sockaddr *sa = ...; // struct not needed in C++
char ip[INET6_ADDRSTRLEN] = {0};

switch (sa->sa_family) {
  case AF_INET: {
    // use of reinterpret_cast preferred to C style cast
    sockaddr_in *sin = reinterpret_cast<sockaddr_in*>(sa);
    inet_ntop(AF_INET, &sin->sin_addr, ip, INET6_ADDRSTRLEN);
    break;
  }
  case AF_INET6: {
    sockaddr_in6 *sin = reinterpret_cast<sockaddr_in6*>(sa);
    // inet_ntoa should be considered deprecated
    inet_ntop(AF_INET6, &sin->sin6_addr, ip, INET6_ADDRSTRLEN);
    break;
  }
  default:
    abort();
} 
```

此示例代码处理 IPv4 和 IPv6 地址，并且被认为比任何一个建议的实现都更符合 C++ 习惯。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-27T08:23:57.287

其实很简单！

```
struct sockaddr *sa = ...;

if (sa->sa_family == AF_INET)
{
    struct sockaddr_in *sin = (struct sockaddr_in *) sa;
    ip = inet_ntoa(sin->sin_addr);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T08:34:55.043

我认为这对你来说编译得很好，做你想做的事。

```
struct sockaddr_in cliAddr={}, servAddr={};

socklen_t cliAddrLength = sizeof(cliAddr);

n = recvfrom(sd, msg, MAX_MSG, 0,(struct sockaddr *)&cliAddr, &cliAddrLength); 
```

# android - Android中如何判断两个上下文是否相同？

> ID：11684013
> 
> 赞同：2
> 
> 时间：2012-07-27T08:16:57.557
> 
> 标签：android

比如要判断两个字符串，可以使用string1.equals(string2)...那么Android中如何判断两个上下文是否相同？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:05:07.890

你为什么这么做？

如果它们都是 Activity 实例，您可以这样对待它们并使用：

```
if ( activity instanceof MyClassActivityOne ) {
// do something 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:24:57.547

像这样检查

```
if(c1.getClass().equals(c2.getClass()))
{
//The context is the same
}
else
{
//Context is different
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:42:39.080

我不确定，但你可以试试这个：

```
 if(context1.getClass().getName().equals("com.xxx.sameclass"))&&context2.getClass().getName().equals("com.xxx.sameclass")))
{
    if(context1 == context2)
       //same condition
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:32:41.833

您可以检查每个的 getApplicationContext() 以查看它们是否相同。

# windows-phone-7 - 访问手机图库和相机

> ID：11684015
> 
> 赞同：1
> 
> 时间：2012-07-27T08:17:06.357
> 
> 标签：windows-phone-7, windows-phone-7.1

如何通过代码访问windows phone7中的手机图库和相机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:22:11.660

有启动器和选择器允许您调用这些选项，它们还允许您调用其他东西，例如地图、短信撰写、搜索等。

这是一个（相机）的例子

*   创建对象

`CameraCaptureTask cvt = new CameraCaptureTask();`

*   注册活动

`cvt.Completed += new EventHandler<PhotoResult>(cv_Completed);`

`cvt.Show();`

*   创建回调方法

`private void cv_Completed(object sender, PhotoResult r)` `{//Your Code Here }`

也在这里阅读 - [MSDN - 启动器和选择器](http://msdn.microsoft.com/en-us/library/ff769556%28v=vs.92%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:17:28.883

您希望在优秀的[诺基亚开发者 Windows Phone 网站](http://www.developer.nokia.com/Community/Wiki/Portal%3aWindows_Phone_Multimedia)上看到许多优秀的示例。他们是很好的教程，有很多样本。

# c# - 基于注释的 DI 与 Producers

> ID：11684022
> 
> 赞同：1
> 
> 时间：2012-07-27T08:17:49.057
> 
> 标签：c#, .net, dependency-injection, ioc-container

.Net 世界中是否有任何简单且不需要太多元数据配置的 DI 框架，例如。使用xml等？

Java 世界的一个很好的例子是 JBoss Weld。使用 Weld，可以有返回对象的生产者方法（可以用自定义注释标记的方法）。上面生成的对象可以在需要的地方注入。这节省了大量的元数据配置。当然 Weld 也需要一个 xml，但它不要求进行广泛的配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:28:17.417

ninject[可以](http://www.ninject.org/)让你在代码中像这样绑定你的类型：

```
Bind<IWarrior>().To<Ninja>(); 
```

对于使用属性的 ninject 的上下文绑定，请查看[此](https://github.com/ninject/ninject/wiki/Contextual-Binding)

创建一个属性来装饰你的类

```
class ClimberNeeded : Attribute{} 
```

将接口绑定到具有给定上下文的实现`WhenClassHas`

```
Bind<IWarrior>().To<Samurai>().WhenClassHas<ClimberNeeded>(); 
```

用属性装饰你的类。

```
[ClimberNeeded]
class MountainousAttack {
    [Inject]
    IWarrior StandardMountainWarrior { get; set; }
} 
```

这里`StandardMountainWarrior`将是 a`Samurai`而不是 a `Ninja`。

* * *

然后是[TinyIOC](https://github.com/grumpydev/TinyIoC)，它具有自动注册功能，更好 :) 或者您可以这样做：

```
container.Register<IMyInterface, MyImplementation>(); 
```

* * *

还有[funq](http://funq.codeplex.com/)，它可以让你编写聪明的委托来解析你的类型。这确实缺乏文档。但是有一个不错的[视频广播](http://www.clariusconsulting.net/blogs/kzu/archive/2009/02/02/116399.aspx)。

* * *

当然还有更多。例如[unity](http://unity.codeplex.com/)、[structuremap](http://docs.structuremap.net/)和[windsor](http://docs.castleproject.org/Default.aspx?Page=MainPage&NS=Windsor&AspxAutoDetectCookieSupport=1)，它们都具有“代码”配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:49:53.337

我也投票给[NInject](http://www.ninject.org/)。但现在几乎所有其他用于 .NET 的 IoC 容器都是代码可配置的。我确实建议避免使用注释，而是更喜欢构造函数注入。注释，或者因为我们在 .NET 世界中更好的属性，使您的代码与容器耦合，这听起来像是一种反模式，因为您使用容器主要是为了减少代码耦合。

# javascript - jQuery ajax 数据转换为字符串

> ID：11684024
> 
> 赞同：6
> 
> 时间：2012-07-27T08:18:01.960
> 
> 标签：javascript, jquery, ajax

我的 jquery ajax 有问题。我有这个代码：

```
$.ajax({
    url: '/users/validatepassword/'+current,
    success: function(data){
        status = data;
    },
    async: false
});

if(status == "Password correct")
{
    //do something
} 
```

基本上，我想捕获“成功”返回的“数据”。但是我无法让 if 语句起作用。我认为“数据”不是字符串，所以我无法进行比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:39:23.820

在 ajax 调用之外定义**状态。**然后随处访问。

```
var status = '';
$.ajax({
    url: '/users/validatepassword/'+current,
    async: false,
    dataType: "json",
    success: function(data){
        status = data;
    },

});

if(status == "Password correct")
{
    //do something
} 
```

在**users/validatepassword**使用**json_encode()**

```
echo json_encode("Password correct"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T08:29:31.063

在 ajax 代码中尝试状态检查条件。

```
$.ajax({
    url: '/users/validatepassword/'+current,
    success: function(data){
        status = data;
        if(status == "Password correct")
        {
         //do something
        }
    },
    async: false
}); 
```

如果条件在ajax之外，它将在ajax返回之前执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T08:33:25.367

你可以这样试试

```
 var response = $.ajax({
            url: '/users/validatepassword/'+current,
            async: false
        }).responseText;

        if(response == "Password correct")
        {
            //do something
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T09:00:53.903

您会看到您应该在成功函数中处理消息，而不是从外部处理消息。

```
var status = '';
$.ajax({
    url: '/users/validatepassword/'+current,
    async: false,
    success: function(data){
        status = data;
        if(status == "Password correct")
        {
            //do something
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T11:53:11.993

@Comebal：伙计，这是你需要做的：

首先删除 async:false

```
$.ajax({
    url: '/users/validatepassword/'+current,
    success: function(data){
       //alert(data); 
       if(data == "Password correct")
        {
                  //do something
        }
    }
}); 
```

然后，主要部分是确保来自 ajax 页面的数据是“密码正确”，否则你不能“做某事”...... :)

# google-apps-script - 净化后的 HTML 元素的 id

> ID：11684025
> 
> 赞同：1
> 
> 时间：2012-07-27T08:18:10.650
> 
> 标签：google-apps-script, google-caja

我一直在开发一个带有使用 Html 服务构建的 UI 的 Web 应用程序。众所周知，HtmlServices 在预处理中使用了 Caja Sanitization。因此，我看到 HTML 元素的 id 被破坏，'-caja-guest-0___' 被附加到原始 id。

我想知道两件事：

1）如果我需要能够通过他们的 id 获取元素，那么最佳实践是什么？

2）我可以相信那个后缀总是'-caja-guest-0___'吗？或者有什么规则吗？

非常感谢您的所有回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:37:00.533

您不应该依赖 Caja 所做的任何特定事情，因为我们正在并且将会对 Caja 进行大量改进，这可能会改变事情的实现方式。我会将任何 Caja 特定更改视为您正在使用的类中的私有变量：不要依赖它们保持不变。

使用元素 ID 时，$("#elementId") 应该在 jQuery 中按预期工作。我建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:19:00.953

我尝试使用 jQuery 的“$”函数通过原始未清理代码中分配的 id 选择元素，它按预期工作。我认为 CAJA 还将更改应用于您的代码，以便 ID 匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:02:45.367

是的，并且 document.getElementById 也应该可以正常工作。经验法则；不用担心卡哈。

# c# - 将未知类作为参数传递（C#）

> ID：11684041
> 
> 赞同：0
> 
> 时间：2012-07-27T08:19:06.547
> 
> 标签：c#, list, generics, delegates, unity3d

我编写了一个类来检测我的 UI 上的按钮按下，它什么也不做。当代码运行时，我编写的 UI 管理器类会查找按钮并将它们存储在列表中。

我遇到的问题是我希望不同的按钮具有不同的功能，但都可以从同一个 UI 管理器中执行。我有一个名为“按钮信息”的第三类，我想为按钮保存对函数类的引用，但我不知道该怎么做。

基本上，我希望按钮类是这样的：

```
using System.Collections;
using System.Collections.Generic;

public class ButtonInfo
{
    public int States;
    public int CurrentState;
    public int Animations;
    public void ButtonFunction<T>(); <--- This is the issue!
} 
```

这是在 Unity 引擎中，所以不能使用 C# 的最新功能，但我相信这一定是可能的。

我希望上面类中的“ButtonFunction”能够携带任何类而不是具体的。

可能吗？

干杯，

C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:40:12.787

不确定 Unity3d 是否支持此功能（目前无法测试），但您尝试过吗？

```
public class ButtonInfo<T>
{
    public Action<T> ButtonFunction;
} 
```

或者，如果`Action<T>`不支持，请尝试普通代表：

```
public class ButtonInfo<T>
{
    public delegate void ButtonHandler(T param);
    public ButtonHandler ButtonFunction;
} 
```

然后，您可以像这样分配 ButtonFunction（此处应支持 Lambda 表达式）：

```
var x = new ButtonInfo<string>();
x.ButtonFunction += s => { Debug.Log(s); }; 
```

# spring - 我可以使用 Spring Integration 作为守护进程来轮询目录吗？

> ID：11684045
> 
> 赞同：4
> 
> 时间：2012-07-27T08:19:17.743
> 
> 标签：spring, daemon, polling, spring-integration

我是 Spring Integration 的新手，我正在考虑使用它来轮询目录中的新文件以处理这些文件。

我的问题是：Spring Integration 是否可以启动**某种守护程序并且****可以用来轮询目录**？

这是否可能有人可以将我引导到有关如何启动 Spring Integration 的官方文档的相关部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:36:30.383

您只需要一个创建 Spring ApplicationContext（例如 new ClassPathXmlApplicationContext("file-poller.xml")）的 main 方法（或者，如果您想部署到 Tomcat 或另一个 servlet 容器，则需要一个 WAR 文件）

它可以使用 cron 触发器、固定速率或固定延迟触发器运行。

JMX 操作可以通过简单地添加单个配置元素（例如 <mbean-export>）在 Spring Integration 的文件适配器（或任何适配器）上公开。

底线：如果您只是希望文件轮询器连续运行，您真的不需要 ESB。您可以在 main 方法中有一个小的配置文件和一行代码。

访问示例以获取更多信息：[https](https://github.com/springsource/spring-integration-samples) ://github.com/springsource/spring-integration-samples （具体查看基本/文件）

希望有帮助，马克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:36:42.283

Spring Integration 是框架的一部分，它不是程序或守护进程。

你不能做的是配置 Spring Integration 来轮询一个目录，午餐 JVM 和 Spring 板载，轮询器会做你想做的事。

您可以从[这篇](http://blog.springsource.com/2009/02/13/982/)博文开始。 [更多样品](https://github.com/SpringSource/spring-integration-samples)

[文档的相关部分](http://static.springsource.org/spring-integration/docs/2.0.0.RELEASE/reference/html/files.html)

# c# - 自动发送电子邮件

> ID：11684046
> 
> 赞同：1
> 
> 时间：2012-07-27T08:19:26.510
> 
> 标签：c#, asp.net-mvc, database, email, razor

我正在开发一个**MVC .Net Web 应用程序**。我有一个数据库，其中有一个名为 Tasks 的表，每个任务都与一个用户相关联，每个任务都有延迟。我想在任务到期后两天（例如）之前**自动向与任务关联的用户发送电子邮件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:22:51.697

您可以编写一个 Windows 服务应用程序或一个控制台应用程序，它们将使用 Windows 调度程序定期运行（例如每天一次），它将查询您的数据库，提取与所需条件匹配的记录，是的，[SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx) .

我这么说的原因是因为这个任务不应该由你的 Web 应用程序来完成。它应该由单独的应用程序执行。重复的后台任务（例如您需要执行的任务）在 Web 应用程序中是不允许的。Haacked 讨论了为什么这是一个非常糟糕的主意：[http ://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:25:05.937

您可以使用 Windows 服务自动发送电子邮件。

请参考以下链接

[http://www.dotnetfunda.com/articles/article931-how-to-send-mail-automatically-for-every-five-minutes-using-csharp.aspx](http://www.dotnetfunda.com/articles/article931-how-to-send-mail-automatically-for-every-five-minutes-using-csharp.aspx)

您可以使用您的逻辑将计时器设置为 2 天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:37:11.367

小模型示例：

```
DateTime today = DateTime.Now;
TimeSpan diff = user.Tasks.ExpirationDate.Subtract(today);
int dateDiff = Convert.ToInt32(diff.TotalDays);

if (dateDiff == 2)
{
     //Send Email
} 
```

然后，您可以将其放在`Services/Email`mvc 应用程序的文件夹中，并创建一个单独的控制台应用程序来每天请求页面，因此运行查询，例如：

```
 HttpWebRequest req = (HttpWebRequest)WebRequest.Create("YOUR PAGE");
        string response = new System.IO.StreamReader(req.GetResponse()
            .GetResponseStream()).ReadToEnd(); 
```

您将使用 Windows 任务计划程序每天运行控制台应用程序，这将启动控制台应用程序 > 控制台应用程序请求页面 > 页面检查任务的到期日期 > 发送电子邮件

# jquery - 如果目标 url 不可用，Colorbox 是否可以停止弹出窗口

> ID：11684051
> 
> 赞同：0
> 
> 时间：2012-07-27T08:19:50.457
> 
> 标签：jquery, colorbox

我有一个链接到资源的锚点，并在其上应用了颜色框。

如果目标 url 返回诸如“404 不可用”之类的 http 错误代码，是否可以使 Colorbox 不显示弹出窗口？

内向的

我想避免编写导致两次加载相同目标的外部检查。

**编辑**

我检查了 API，但在渲染之前加载后没有回调：

```
onComplete  Callback that fires right after loaded content is displayed.
onCleanup   Callback that fires at the start of the close process. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:55:50.517

根本问题是 ColorBox*在*加载内容之前打开，因此 colorbox 本身不知道请求状态。

我担心您所能做的就是在调用彩盒之前发出 Ajax HEAD 请求，这应该很快，然后缓存请求状态。

```
$('a').click(function(e) {
    e.preventDefault();
    var self = $(this);
    var href = self.attr('href');
    if(self.data('success') == 'success') {
        $.colorbox({href:href});
    } else if (self.data('success') == 'error') {
        return;
    } else {
        $.ajax({
            type: "HEAD",
            async: true,
            url: href,
            success: function(message,text,response){
                $.colorbox({href:href});
                self.data('success', 'success');
            },
            error: function() {
                self.data('success', 'error');
            }
        });
    }
});​ 
```

在这里测试小提琴：http: [//jsfiddle.net/JS9Sc/](http://jsfiddle.net/JS9Sc/)

# javascript - 多次调用 HTML5 视频结束事件

> ID：11684056
> 
> 赞同：3
> 
> 时间：2012-07-27T08:20:31.757
> 
> 标签：javascript, html, events, video

我在播放 HTML5 视频和结束事件时遇到问题。我查看一些 HTML 内容，并在过期后播放视频。视频是否结束我将再次显示 HTML 内容。这应该循环。它的演示文稿。

我的问题是，第一次完整运行后，结束事件将重复触发，HTML 内容将显示为 false。

这是代码部分：

```
function playVideo() {
    var video = $('video')[0];
    video.addEventListener('ended', function () {
        $('video').hide();
        fadeShow();
    }, false);
    video.play();  
}

function fadeHide() {
    $('#content').fadeOut(1200, function () {
        $('div ul[id^=item]').each(function () {
            $(this).hide();
        });
        $('li[class^=visitor] span[id]').each(function () {
            $(this).hide();
        });
        playVideo();
    });
} 
```

该`fadeHide();`函数不会被调用两次，只是`video.addEventListener('ended', function () {};`填充被调用了几次。`fadeshow(); 将显示 HTML 内容。实际上我使用的是最新版本的 Chrome。

有谁知道出了什么问题？

**编辑** HTML 视频代码。我用css隐藏视频。

```
<video>
    <source src="video/mp4/xxx.mp4" type="video/mp4" />
    <source src="video/ogg/xxx.ogg" type="video/ogg" />
    <source src="video/webm/xxx.webm" type="video/webm" />
    Your browser does not support the video tag.
</video> 
```

格雷茨

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T08:27:55.500

您应该分配一次事件侦听器，或者在每次播放时分配它，您需要再次分离事件侦听器。

```
function playVideo() {
    var video = $('video')[0];
    video.addEventListener('ended', function () {
        $('video').hide();
        video.removeEventListener('ended'); <<<<<<<
        fadeShow();
    }, false);
    video.play();  
} 
```

**编辑**：我用这个[小提琴](http://jsfiddle.net/P9rt9/)在 chrome 中进行了测试，事实上，即使你删除了 eventlistener，它也会开始多次触发。似乎存在一个问题，即删除事件侦听器无法正常工作。

您应该将事件绑定/取消绑定更改为 jQuery，然后只有一个结束事件。

```
function playVideo() {
    var video = $('video')[0];
    $('video').bind('ended', function () {
        $('video').unbind('ended');
        $('video').hide();
        fadeShow();
    });
    video.play();  
} 
```

你[的小提琴](http://jsfiddle.net/Vupz2/27/)更新了（视频更短）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T07:21:01.163

不要添加事件侦听器然后手动删除它，而是尝试简单地使用名为“one”的内置命令（[https://github.com/videojs/video.js/blob/master/docs/api/vjs.Player。 md#one-first-second-third-](https://github.com/videojs/video.js/blob/master/docs/api/vjs.Player.md#one-first-second-third-) )

所以你的代码会变成这样：

```
function playVideo() {
    var video = $('video')[0];
    $('video').one('ended', function () {
        $('video').hide();
        fadeShow();
    });
    video.play();  
}
```

这有点简短，更依赖于 API 本身。我认为这通常是一种很好的做法，因为 API 中的功能已经由社区中的大量人员在多个浏览器和操作系统上进行了多次测试。

# c - 可以展开二次方程的C程序

> ID：11684058
> 
> 赞同：1
> 
> 时间：2012-07-27T08:20:38.277
> 
> 标签：c, algorithm, linked-list, algebra

我想要一个允许我输入 (x+1)(x+3) 和其他类似内容的 C 程序，包括 x^2。到目前为止，我有一个使用链表的非常复杂的系统，但我认为应该有一个更简单的解决方案。输入的输出 (x+1)(x+3) 将被打印出 x^2+4x+3。

到目前为止，我正在传递一个带有 int、char 和 int 的 struct _term，用于表示系数、pro 数字和幂。所以 2x^4 将被保存为 |2|'x'|3|。

我还应该提到，我只有 16 岁，还在上高中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:27:22.250

您需要为表达式编写一个解析器，然后遍历它的语法树，然后执行一些逻辑来制作多重图像，也许合并添加，然后输出它。您可能会发现[此链接](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)对如何在 C 中编写表达式解析器很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T18:20:56.767

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#define BUFFSIZE 128

typedef struct _exp { //Integral expression
    int n; //Max of order
    int *k;//coefficient list(array)# k[0] as constant, k[n] as x^n
} Exp;

void print(Exp *exp);
const char *extract(const char *str, char *outbuff);
Exp *makeExp(const char *str);
void freeExp(Exp *exp);
Exp *convert(const char *str);
Exp *mul(Exp *a, Exp *b);
Exp *calc(const char *expStr);

int main(){
    char buff[BUFFSIZE];
    Exp *exp;
    printf("input expression Eg.(x+1)(x+3)\n>");
    fgets(buff, sizeof(buff)/sizeof(char), stdin);
    exp=calc(buff);
    print(exp);
    freeExp(exp);

    return 0;
}

void print(Exp *exp){
    int i, n = exp->n;
    for(i=n;i>=0;--i){
        int k = exp->k[i];
        if(k==0)continue;
        if(k<0)
            printf("-");
        if(k>0 && i!=n)
            printf("+");
        if(k<0) k*=-1;//k=|k|
        if(i!=0){
            if(k!=1)
                printf("%dx", k);
            else
                printf("x");
        }
        if(i>1)
            printf("^%d", i);
        if(i==0)
            printf("%d", k);
    }
    printf("\n");
}

const char *extract(const char *str, char *outbuff){
//pull out in parenthesis to outbuff, and remove space
    while(isspace(*str))
        ++str;
    if(*str=='\0') return NULL;
    while(*str!='(')++str;
    while(*++str!=')')
        if(!isspace(*str))
            *outbuff++=*str;
    *outbuff='\0';
    return ++str;
}

Exp *makeExp(const char *str){
    Exp *exp;
    char buff[BUFFSIZE];
    exp = (Exp*)malloc(sizeof(Exp));
    exp->n = 0;
    exp->k = (int*)calloc(1,sizeof(int));
    while(*str){
        int k,n;
        char *p;
        k=(int)strtol(str, &p, 10);
        if(k==0){//never constant zero e.g(x+0)is invalid, valid E.g (x)
            if(p[0]=='-'){
                k = -1;
                ++p;
            } else if(p[0]=='+') {
                k = 1;
                ++p;
            } else 
                k = 1;
        }
        if(*p=='\0'){
            exp->k[0]=k;//constant part
            break;
        }
        if(*p=='x'){
            n = (p[1]=='^') ? (int)strtol(&p[2], &p, 10):1;
            if(exp->n < n){
                int i;
                exp->k = (int*)realloc(exp->k, (n+1)*sizeof(int));
                for(i=n;i>exp->n;--i)
                    exp->k[i]=0;
                exp->n = n;
            }
            exp->k[n] = k;
            if(*p=='\0' || p[1]=='\0')break;
            else{
                str = (n!=1)? p:p+1;
            }
        } else {
            exp->k[0]=k;
            str = p;
        }
    }
    return exp;
}

void freeExp(Exp *exp){
    free(exp->k);
    free(exp);
}

Exp *convert(const char *str){
    Exp *exp;
    exp=makeExp(str);
    return exp;
}

Exp *mul(Exp *a, Exp *b){
    Exp *ret;
    int i,j;
    ret=(Exp*)malloc(sizeof(Exp));
    ret->n = a->n + b->n;
    ret->k = (int*)calloc(ret->n + 1, sizeof(int));
    for(i=0;i<=a->n;++i){
        for(j=0;j<=b->n;++j){
            ret->k[i+j] += a->k[i] * b->k[j];
        }
    }
    return ret;
}

Exp *calc(const char *expStr){
    Exp *exp;
    char buff[BUFFSIZE];
    const char *p=expStr;
    exp = (Exp*)malloc(sizeof(Exp));
    exp->n = 0;
    exp->k = (int*)malloc(sizeof(int));
   *exp->k = 1;
    while(NULL!=(p=extract(p, buff))){
        Exp *e,*wk;
        wk=exp;
        e=convert(buff);
        exp=mul(wk, e);
        freeExp(wk);
        freeExp(e);
    }
    return exp;
} 
```

# objective-c - 未找到免费图片库

> ID：11684061
> 
> 赞同：0
> 
> 时间：2012-07-27T08:20:50.647
> 
> 标签：objective-c, xcode, macos, dynamic

通过 MacPorts 安装 FreeImage。一切看起来都很好，但是当我构建我的应用程序并尝试在没有安装 MacPorts 和 FreeImage 的其他计算机上启动时，它说

```
dyld: Library not loaded: /opt/local/lib/libfreeimage.3.dylib
  Referenced from: /Users/development/Library/Developer/Xcode/DerivedData/freeimage-dxsornyaxqlkyubqwsrlkgszvxhy/Build/Products/Debug/freeimage.app/Contents/MacOS/freeimage
  Reason: image not found 
```

它不应该将库文件与我的项目一起复制吗？我将它们添加到我的项目的构建阶段“复制文件”列表中。它们被复制到我的应用程序包中。但是当我尝试链接它们时，我得到了同样的错误。我不知道为什么，但应用程序仍在 /opt/local/lib 中寻找库。如何修复它以便我可以在我的项目中使用 FreeImage 并在任何计算机上运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:28:47.607

当您通过 MacPorts 安装时，该库安装在 /opt/local/lib 中，而不是您的项目路径中。即使复制整个项目，*dylib 库也不会被复制，因为它们通常位于 /opt/local/lib 中。

我相信您在这里有两个选择：在您要运行应用程序的每台计算机上安装 FreeImage，或者将 libfreeimage.3.dylib 复制到您的二进制文件所在的同一文件夹中，如果两个系统相似，那应该可以工作。如果两台计算机在操作系统版本、硬件架构等方面不同......那么您拥有的 .dylib 可能与另一台计算机不兼容。

您可能要考虑的另一件事是修改您的`DYLD_LIBRARY_PATH`变量，该变量指定操作系统在链接时将在其中查找库的路径。有关更多信息，请参阅[**此答案**](https://superuser.com/a/282451/148055)。

# android - 创建android自定义视图

> ID：11684066
> 
> 赞同：0
> 
> 时间：2012-07-27T08:21:18.117
> 
> 标签：android, events, custom-component

我正在尝试创建一个看起来像这样的自定义视图组件：一个组件将作为一个菜单工作 - 它有 4 个图像视图，它们对 onClick 事件作出反应。我用它们制作了一个单独的 .xml 并为它创建了一个类。比我从.xml“class ='myclass'”设置父节点类。在我的 .xml 中，imageview 声明了一个 onClick，但是当我尝试使用 myclass 处理它时 - 应用程序崩溃。怎么了？或者我想主要问题是：为自定义视图设置事件处理程序的正确方法是什么？在这个视图类定义中的处理程序。我应该在.xml 中写一个类似的视图吗

另外：那么，我如何才能从这个自定义视图中触发事件来处理将持有它的活动？

这是我的菜单.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
class="com.example.mtgesturestest.MTMenuViewController"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/main_layout" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <ImageView
            android:id="@+id/imageChannels"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:src="@drawable/channels"
            android:layout_marginBottom="10dp"           />
        <ImageView
            android:id="@+id/imageMessages"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:src="@drawable/messages"
            android:layout_marginBottom="10dp" />
        <ImageView
            android:id="@+id/imageTimeline"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:src="@drawable/timeline"
            android:onClick="yell"
            android:layout_marginBottom="10dp" />  

</RelativeLayout>
        <ImageView
            android:id="@+id/imageMenu"
            android:layout_width="70dp"
            android:layout_height="70dp"
            android:src="@drawable/menu"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="-15dp"
            android:onClick="maximizeMenu"/>

</RelativeLayout> 
```

应用程序说它找不到 onClick 处理程序（maximizeMenu），但它在我添加此视图而不是 com.mtgesturestest.MTMenuViewController 类的活动中搜索它。我希望这个菜单是独立的。它应该处理点击，播放一些动画，然后触发父活动的事件。所以你可以说这里的这个onClick是供我的自定义视图内部使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:01:53.080

为什么不尝试从 MTMenuViewController 类中添加 onClick 侦听器，例如

```
ImageView menu = (ImageView)this.findViewById(R.id.imageMenu);
menu.setOnClickListener(PUT THE LISTENER HERE); 
```

# c# - 如何集成正方体？

> ID：11684068
> 
> 赞同：-1
> 
> 时间：2012-07-27T08:21:28.757
> 
> 标签：c#, image-processing, ocr, tesseract, tessnet2

我开发了一个需要 OCR 引擎的 ANPR 应用程序。我正在尝试使用 tesseract 作为 OCR 引擎。但是我真的找不到关于如何将 tessnet2 包含在我的 C#.Net 项目中的正确分步教程或指南。我已经训练了 tesseract v3.01。有人可以帮忙解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:30:18.400

您不能将 3.01 数据与 Tesseract 2.04 引擎一起使用——正如[Tesseract Wiki](http://code.google.com/p/tesseract-ocr/wiki/ReadMe)所述，它们不兼容。你需要 Tesseract 3.0x 引擎。3.01 有一个 .NET 包装器：[tesseract-ocr-dotnet](https://github.com/charlesw/tesseract-ocr-dotnet)。

# windows - 我想在 Windows Batch 中使用通配符和 SET 命令，所以我不必确切知道字符串中的内容以匹配它

> ID：11684073
> 
> 赞同：2
> 
> 时间：2012-07-27T08:21:49.693
> 
> 标签：windows, command-line, batch-file

我想在 Windows Batch 中使用通配符和 SET 命令，因此我不必确切知道字符串中的内容以匹配它。

这可能吗？

如果这已经被问到并回答了，我很抱歉，我搜索了一段时间，但找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:21:49.693

答：是的。但它并没有应有的强大。

但首先，让我们回答一个您（还没有）问过的问题，因为这是一个自然的后续问题。

问：问号会匹配批处理字符串搜索中的任何单个字符并替换为 SET 吗？
A：不，它是一个常规字符，并且只会匹配它自己。

星号**是**通配符，将匹配多个字符，但只会**匹配**从**字符串开头开始的**所有内容。不是在中间，也不是从最后。

有用的搜索：

```
*x  
*how are you? 
```

上述两个搜索可以匹配。第一个将匹配所有内容，包括
它遇到的第一个“x”。第二个将匹配所有内容，包括第一个“你好吗？” 它发现。

合法但无用的搜索：

```
x*
Hello*
One*Three 
```

上述三个搜索永远无法匹配。奇怪的是，它们也是合法的，不会导致错误。
一个例外：Hello* 和 x* 将匹配自己，但前提是它们是字符串的开头。（谢谢杰布！）

您可以在命令提示符处键入或粘贴两个示例：

> REM 一次成功的搜索和替换。
> SET X=你好，我的朋友。你好吗？
> SET X=%X:*.=%
> ECHO 输出：“%X%”
> 
> 输出：“你好吗？”
> 
> REM 导致搜索和替换失败的意外操作。
> SET X=你好，我的朋友。你好吗？
> SET X=%X:.*=%
> ECHO 输出：“%X%”
> 
> 输出：“你好，我的朋友。你好吗？”

从逻辑上讲， .* 应该匹配从句号开始的所有内容，导致字符串被截断为“你好我的朋友”。但是由于 * 只匹配从字符串的开头开始，所以 .* 什么都不匹配，所以字符串保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T02:08:53.473

# 非常旧，但很有用

### 作为可执行文件[`set-ast`](https://gist.github.com/Ephellon/8a942ea4bf271cf880dccc4eade49091)

```
set string=abc*def*ghi
set-ast string "-dash-"
  :: -> "abc-dash-def-dash-ghi" 
```

参数给出为`set-ast <variable-name> <replacement-string>`

* * *

### 替换`*`为`-dash-`（仅一次）

*注意：**必须**启用延迟扩展*

```
set string=abc*def
  :: -> "abc*def"
set right=%string:**=%
  :: -> "def"
set left=!string:%right%=!
  :: -> "abc*"
set left=%left:~0,-1%
  :: -> "abc"

set new-string=%left%-dash-%right%
  :: -> "abc-dash-def" 
```

# ssl - Android 4.0 SSL 身份验证，401 未经授权的错误

> ID：11684075
> 
> 赞同：0
> 
> 时间：2012-07-27T08:21:55.843
> 
> 标签：ssl, ssl-certificate, android-4.0-ice-cream-sandwich

我一直在开发一个需要进行相互 ssl 身份验证的 rss 阅读器。我已经设法使用 Keychain API 获取用户证书，并且得到了似乎大部分工作的 SSLSocketFactory。但是每当我尝试与服务器建立连接时，我都会收到 401 Unauthorized 错误，我觉得这可能与我设置 SSL 连接和通用代码的方式有关。如果有人可以帮助指出我做错了什么以及我需要做什么，我将不胜感激。

主要活动：

```
public class AliasLoader extends AsyncTask<Void, Void, X509Certificate[]> 
{
    X509Certificate[] chain = null;

    @Override protected X509Certificate[] doInBackground(Void... params) {
        android.os.Debug.waitForDebugger();

        if(!SavedAlias.isEmpty())
        {
                try {
                    PrivateKey key2 = KeyChain.getPrivateKey(getApplicationContext(), SavedAlias);
                    setPrivateKey(key2);

                    chain = KeyChain.getCertificateChain(getApplicationContext(),SavedAlias);
                    setCertificate(chain);

                } catch (Exception e) {
                    Log.e(TAG, e.getMessage());
                }
        }
        else
        {
            this.cancel(true);
        }

        return chain;
    }

    @Override 
    protected void onPostExecute(X509Certificate[] chain) 
    {

        if(chain != null)
        {   
            HttpClient client = CustomSSLSocketFactory.getNewHttpClient(context, getAlias(), chain, key);
            String formDataServiceUrl = "https://android.diif.r.mil.uk";

            WebView wv = (WebView) findViewById(R.id.rssFeedItemView);

            HttpPost post = new HttpPost(formDataServiceUrl);
            final HttpGet request = new HttpGet(formDataServiceUrl);

            HttpResponse result = null;

            try {
                result = client.execute(post);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            wv.loadUrl(formDataServiceUrl);
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Certificate is Empty", Toast.LENGTH_LONG).show();
        }
    }
} 
```

自定义SSLSocketFactory：

```
 public class CustomSSLSocketFactory extends SSLSocketFactory {

public static KeyStore rootCAtrustStore = null;
public static KeyStore clientKeyStore = null;
SSLContext sslContext = SSLContext.getInstance("TLS");
Context context;

/**
 *  Constructor.
 */
 public CustomSSLSocketFactory(Context context, KeyStore keystore, String    keyStorePassword, KeyStore truststore)
        throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {

    super(keystore, keyStorePassword, truststore);
    this.context = context;

    // custom TrustManager,trusts all servers
    X509TrustManager tm = new X509TrustManager() {

        public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {
        }

        public X509Certificate[] getAcceptedIssuers() {
        return null;
        }
    };

Log.i("CLIENT CERTIFICATES", "Loaded client certificates: " + keystore.size());

// initialize key manager factory with the client certificate
KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
    keyManagerFactory.init(keystore,null);

sslContext.init(keyManagerFactory.getKeyManagers(), new TrustManager[] { tm }, null);
//sslContext.init(null, new TrustManager[]{tm}, null);
}

@Override
public Socket createSocket(Socket socket, String host, int port, boolean autoClose)  throws IOException, UnknownHostException {
   return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
}

@Override
public Socket createSocket() throws IOException {
   return sslContext.getSocketFactory().createSocket();
}

/**
 *  Create new HttpClient with CustomSSLSocketFactory.
 */
public static HttpClient getNewHttpClient(Context context, String alias,  X509Certificate[] chain, PrivateKey key) {
    try {
        // This is method from tutorial ----------------------------------------------------
        //The root CA Trust Store
        rootCAtrustStore = KeyStore.getInstance("BKS");
        rootCAtrustStore.load(null);

        //InputStream in = context.getResources().openRawResource(com.DII.RSS_Viewer.R.raw.rootca);
        //rootCAtrustStore.load(in, "PASSWORD".toCharArray());

        //The Keystore with client certificates.
        //clientKeyStore = KeyStore.getInstance(KeyStore.getDefaultType());
        clientKeyStore = KeyStore.getInstance("pkcs12");
        clientKeyStore.load(null);

        // client certificate is stored in android's keystore
        if((alias != null) && (chain != null))
        {
            Key pKey = key;
            clientKeyStore.setKeyEntry(alias, pKey, "password".toCharArray(), chain);
        }

        //SSLSocketFactory sf = new CustomSSLSocketFactory(context, clientKeyStore, "password", rootCAtrustStore);
        SSLSocketFactory sf = new SSLSocketFactory(clientKeyStore, "password");

        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", (SocketFactory) sf, 443));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

        return new DefaultHttpClient(ccm, params);
    } 
    catch (Exception e) 
    {
        return new DefaultHttpClient();
    }
    }
} 
```

# c# - 将项目添加到列表

> ID：11684078
> 
> 赞同：1
> 
> 时间：2012-07-27T08:22:16.027
> 
> 标签：c#, asp.net-mvc

当我遇到这个时，我正在阅读 MVC 教程：

```
public ActionResult Index()
{
    dynamic genres = new List<Genre> {
        new Genre { Name = "Disco" },
        new Genre { Name = "Jazz" },
        new Genre { Name = "Rock" }
    };
    return View(genres);
} 
```

`Genre.Add("Disco");`如果我使用...有什么区别。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:25:32.227

`dynamic`老实说，目前还不清楚你为什么要从这里开始。但是如果你用

```
List<Genre> genres = new List<Genre>();
genres.Add(new Genre { Name = "Disco" });
genres.Add(new Genre { Name = "Jazz" });
genres.Add(new Genre { Name = "Rock" }); 
```

它会产生同样的效果。

请注意，它是`genres.Add`，不是`Genre.Add`。

我还建议，如果您创建一个采用名称的 Genre 构造函数，它将使代码更简单 - 或者如果您仍想明确显示名称部分，您可以创建一个`Genre.FromName`静态方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T08:25:40.347

[`genres.Add`我认为您的意思是它和（`List<T>.Add`方法）之间的区别，`Genre.Add`可能是变量`Genre`上的静态方法或实例方法`Genre`，两者都没有发布。]

最终代码中没有*行为*差异，只是视觉上的差异。

不知道你为什么使用`dynamic`（也许你正在寻找`var`？），但不同的是这被称为[集合初始化语法](http://msdn.microsoft.com/en-us/library/bb384062.aspx)`.Add`，基本上是手动调用的糖：

```
var genres = new List<Genre> {
    new Genre { Name = "Disco" },
    new Genre { Name = "Jazz" },
    new Genre { Name = "Rock" }
}; 
```

相当于：

```
var genres = new List<Genre>();
genres.Add(new Genre { Name = "Disco" });
genres.Add(new Genre { Name = "Jazz" });
genres.Add(new Genre { Name = "Rock" }); 
```

根据您的情况，编译器会`.Add`为您输出。

[这三种在 C# 中创建新 List<string> 的方式有什么区别？](https://stackoverflow.com/questions/8695528/whats-the-difference-between-these-three-ways-of-creating-a-new-liststring-in)

同样在您的示例中，您会看到对象初始化器语法：

```
new Genre { Name = "Disco" } 
```

这相当于：

```
var g = new Genre();
g.Name = "Disco"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:25:10.160

在编译术语中没有。它实际上是语法糖

```
dynamic genres = new List<Genre();
genres.Add(new Genre... 
```

这就是我假设你的意思，因为`Genre.Add(string)`没有描述。

# asp.net - 如何处理或捕获服务器无响应错误？

> ID：11684080
> 
> 赞同：1
> 
> 时间：2012-07-27T08:22:31.333
> 
> 标签：asp.net, exception, timeout, webserver

我想捕捉服务器没有响应或超时错误。我`PageMethods`用于从 asp.net Web 应用程序中的 javascript 调用服务器端中的函数。有时服务器不会响应，所以当我从位于 aspx 文件中的 javascript调用*PageMethods时，我想处理该服务器没有响应。*

请做需要的，提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:49:38.183

我认为一个简单的 try catch 可以解决您的问题

```
try {
    PageMethods.MyMethod();
}
catch(exception){
    //error occured
}
finally {
    //some tidying up
} 
```

[javascript try catch 参考](https://developer.mozilla.org/en/JavaScript/Reference/Statements/try...catch)

# .net - 使用 Rx 同步两个流

> ID：11684082
> 
> 赞同：1
> 
> 时间：2012-07-27T08:22:36.247
> 
> 标签：.net, windows, system.reactive

我有一个来自主源的数据流，第二个流包含来自不同来源的丰富数据。不幸的是，丰富消息通常在原始数据之前到达。我想确保在原始消息首次发布之前缓冲丰富消息。我可以通过 Rx 实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:13:50.133

简短的回答，可能。正如@Enigmativity 也没有提及，这是一个有点开放式的问题。

1.  是否有一对一的消息（显然没有 - '可能没有丰富值'）
2.  扩充消息和主消息是否以相同的顺序到达。如果不是，那么我假设有某种 Id 可以将丰富内容与主消息相匹配
3.  似乎主消息可能不会延迟，并且必须在到达时推送。那么如何将丰富消息应用于主消息？我们是否推送了一个新信息，即大师+浓缩？我假设您不想改变状态，即在转发后修改主消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:32:56.813

我建议你`ReplaySubject`在这种情况下使用。您可以在此处找到工作示例：[How to subscribe to but buffer data from, an IObservable until another IObservable has published？](https://stackoverflow.com/questions/7480644/how-to-subscribe-to-but-buffer-data-from-an-iobservable-until-another-iobserva). 该代码对我很有用。

# oracle - PL/SQL如何检查是否存在并返回错误码

> ID：11684088
> 
> 赞同：0
> 
> 时间：2012-07-27T08:22:55.340
> 
> 标签：oracle, plsql

忽略在这种情况下使用 MERGE INTO 是否更好。我只是想知道是否可以检查该行是否存在。如果不是，则将返回码设置为 1 并立即返回。如果是，则继续执行其余代码，最后将返回码设置为 0。下面的代码不起作用，因为它总是执行到最后。我应该如何解决它？

```
 BEGIN

    -- check 
    SELECT CASE
      WHEN NOT EXISTS (SELECT 1 FROM s WHERE s.col1 = 1 AND s.col2 = 2)
      THEN 1
    END
    INTO ret FROM dual;

    -- update
    UPDATE s
    SET s.col3 = 3
    WHERE s.col1 = 1 AND s.col2 = 2;

    COMMIT;

    SELECT 0 INTO ret FROM dual;
    RETURN ret;

  END foo; 
```

如果我希望能够区分它`s.col1 = 1`不存在或`s.col2 = 2`不存在怎么办。并为它们提供 2 个不同的返回码。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:33:15.877

我想知道是否有必要首先检查该行是否存在以及为什么您不立即发出 UPDATE ？

你不能做这样的事情吗？

```
BEGIN

    -- update
    UPDATE s
    SET s.col3 = 3
    WHERE s.col1 = 1 AND s.col2 = 2;

    COMMIT;

    IF SQL%ROWCOUNT = 0 THEN
      RETURN 0;
    ELSE
      RETURN 1;
    END IF;

END foo; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T08:30:49.200

您没有对存储的值做任何事情`ret`。

`IF`UPDATE 语句周围没有检查 ret 是 1 还是 null（另一种选择）。并且因为没有 IF，所以程序的其余部分总是被执行。

需要这样的东西：

```
SELECT sum(case when col1 = 1 then 1 else 0 end) as col1_count, 
       sum(case when col2 = 2 then 1 else 0 end) as col2_count
    into ret1, ret2
FROM s 
WHERE s.col1 = 1
   or s.col2 = 2;

if ret1 > 0 and ret2 > 0 then
   update ...;
   commit;
   ret := 0;
elsif  (ret1 > 0 and ret2 = 0) then 
   ret := 1;
elsif (ret1 = 0 and ret2 > 0) then 
   ret := 2;
end if;

return ret; 
```

一种更有效的方法是简单地进行更新并检查是否有任何行被修改。如果行存在，则在执行更新之前运行 select 只会使工作加倍。当行不存在时仅运行更新与执行选择的工作相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T09:49:15.150

> What if I want be able to distinguish if it's s.col1 = 1 not exist or s.col2 = 2 not exist. And have 2 different return codes for them. How should I do in this case?

I've probably over-complicated it with a BULK COLLECT - especially if the update is for only one row at any one time - but you can of course modify the code accordingly - the principle remains the same. The code aims to return 1,2 or 3 depending on which UPDATE condition is met regarding col1 and col2.

```
DECLARE

    TYPE test_rec is record ( .... );

    TYPE result_tab IS TABLE OF test_rt%ROWTYPE;

    lt_results result_tab;

    lv_ret NUMBER(1) := 0;

BEGIN

    SELECT x.* FROM (
    SELECT s.*, 1 as ret
    FROM s
    WHERE s.col1 = 1 and s.col2 != 2
    UNION ALL
    (SELECT s.*, 2
    FROM s
    WHERE s.col1 =! 1 and s.col2 = 2)
    UNION ALL
    (SELECT s.*, 3
    FROM s
    WHERE s.col1 = 1 and s.col2 = 2))
    BULK COLLECT INTO lt_results;

    FOR i in lt_results.first .. lt_results.last LOOP
        <<DO YOUR UPDATE>>
        lv_ret := lt_results(i).ret;
    END LOOP;

    COMMIT;

    RETURN lv_ret;

END; 
```

# c# - 类 ObservableDictionary : 字典 作为数据合同

> ID：11684090
> 
> 赞同：0
> 
> 时间：2012-07-27T08:22:58.493
> 
> 标签：c#, wcf, datacontract, svcutil.exe, generic-collections

如何装饰

```
public class ObservableDictionary<TKey, TValue> : IDictionary<TKey, TValue>, INotifyCollectionChanged, INotifyPropertyChanged 
```

作为`DataContract`（或类似的东西）在`WCF`服务中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:19:37.340

据我记得，如果您的`ObservableDictionary<TKey, TValue>`类是可**序列化**的，那么自 WCF 3.5 SP1 起就无需将其标记为`DataContract`（请参阅问题：[WCF datacontract vs class serialize](https://stackoverflow.com/questions/4722136/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:45:57.277

你需要`CollectionDataContractAttribute`

> CollectionDataContractAttribute 还旨在与字典类型一起使用以处理键控集合。字典类型是实现 IDictionary 或 IDictionary 接口的类，例如 Dictionary。

查看更多详细信息[CollectionDataContractAttribute 类](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.collectiondatacontractattribute.aspx)

# ruby - FactoryGirl的麻烦

> ID：11684091
> 
> 赞同：6
> 
> 时间：2012-07-27T08:23:02.527
> 
> 标签：ruby, testing, rspec, factory-bot

我有一个在模块中定义的类。

```
module Mod
  class Zed
   include DataMapper::Resource
  end
end 
```

为了测试，我定义了工厂。

```
#/factories/zed.rb
FactoryGirl.define do
  factory :zed do
   #code 
  end
end 
```

但是当我开始测试时，我得到了一个错误。

```
describe 'Zed' do
  it "should have ..." do
    FactoryGirl.create(:zed)
  end
end 
```

错误：

```
 Failure/Error: FactoryGirl.create(:zed)
 NameError:
   uninitialized constant Zed 
```

如何测试模块中包含的类？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T08:31:04.993

您应该在定义这样的工厂时指定类：

```
FactoryGirl.define do
  factory :zed, class: Mod::Zed do
   #code 
  end
end 
```

# android - 编译android主源时的R.stamp分段错误

> ID：11684097
> 
> 赞同：0
> 
> 时间：2012-07-27T08:23:48.307
> 
> 标签：android, build, makefile, android-source

在我的旧笔记本电脑 DELL Latitude D620（带有 Ubuntu 11.10 的 Intel T5500）上编译 android 源代码时遇到一些问题

这是错误代码：

```
============================================
PLATFORM_VERSION_CODENAME=AOSP
PLATFORM_VERSION=4.0.9.99.999.9999.99999
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
HOST_ARCH=x86
HOST_OS=linux
HOST_OS_EXTRA=Linux-3.0.0-23-generic-x86_64-with-Ubuntu-11.10-oneiric
HOST_BUILD_TYPE=release
BUILD_ID=OPENMASTER
OUT_DIR=out
============================================

...
compile progress..
...

host Java: draw9patch (out/host/common/obj/JAVA_LIBRARIES/draw9patch_intermediates/classes)
host Java: hierarchyviewer (out/host/common/obj/JAVA_LIBRARIES/hierarchyviewer_intermediates/classes)
Note: sdk/draw9patch/src/com/android/draw9patch/ui/ImageTransferHandler.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
Install: out/host/linux-x86/framework/layoutlib_api.jar
Install: out/host/linux-x86/framework/layoutlib_create.jar
host Java: lint_api (out/host/common/obj/JAVA_LIBRARIES/lint_api_intermediates/classes)
host Java: signature-tools (out/host/common/obj/JAVA_LIBRARIES/signature-tools_intermediates/classes)
host Java: traceview (out/host/common/obj/JAVA_LIBRARIES/traceview_intermediates/classes)
target R.java/Manifest.java: ApplicationsProvider (out/target/common/obj/APPS/ApplicationsProvider_intermediates/src/R.stamp)
make: *** [out/target/common/obj/APPS/ApplicationsProvider_intermediates/src/R.stamp] Segmentation fault
make: *** Waiting for unfinished jobs.... 
```

如果我'make clean'并再次编译代码，它可能会在'CalendarProvider_intermediates'等其他模块中出错。

我在网上没有找到类似的问题，这是硬件问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-23T06:34:30.793

我有同样的问题，我终于解决了。

我的经验是查看网站[http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)

我的机器是 Ubuntu 14.04，安装完库后我按照建议进行了操作。希望它可以帮助你。

```
sudo apt-get install git-core gnupg flex bison gperf build-essential \
  zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 \
  lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev ccache \
  libgl1-mesa-dev libxml2-utils xsltproc 解压
```

# xml - 针对 XSD 验证 XML 是否有错误

> ID：11684098
> 
> 赞同：1
> 
> 时间：2012-07-27T08:23:50.287
> 
> 标签：xml, xsd, xmlreader, libxml2, xml-libxml

我想针对 XSD 文件验证 XML 并在有任何错误时获取错误。

当我将它与 DOM 但不是 XMLReader 一起使用时，它工作正常。据知道他们都使用 libxml 库，所以我尝试将它用于 XMLReader 但没有运气。

谢谢

**DOM（工作正常）**

```
libxml_use_internal_errors(true);

if (! $xml->schemaValidate($xsd_file))
{
    get_errors();
    exit;
}

function get_errors()
{
    $messages   = null;
    $errors     = libxml_get_errors();

    foreach ($errors as $error)
    {
        switch ($error->level)
        {
            case LIBXML_ERR_ERROR:
                $messages .= 'Error ' . $error->code . $error->message;
                break;

            case LIBXML_ERR_WARNING:
                $messages .= 'Warning ' . $error->code . $error->message;
                break;

            case LIBXML_ERR_FATAL:
                $messages .= 'Fatal ' . $error->code . $error->message;
                break;
        }

        echo $messages .= ($error->file) ? $error->file : $error->line;
    }
} 
```

**XMLREADER（不适用于上述相同的错误函数）**

```
libxml_use_internal_errors(true);

//This returns true all times whether XML has faults or not
if (! $reader->setSchema($xsd_file))
{
   //This echos nothing whether XML has faults or not
   get_errors();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:00:59.277

设置架构后，我看不到任何 read() 或 isValid() 正在进行，那么您将如何得到错误？看一下[文档](http://ca3.php.net/manual/en/xmlreader.isvalid.php)（我假设是 PHP），它应该可以帮助您了解。

# c# - 实体框架忽略算术溢出错误

> ID：11684100
> 
> 赞同：2
> 
> 时间：2012-07-27T08:23:55.637
> 
> 标签：c#, sql-server-2008, entity-framework, reporting-services

我在我的测试应用程序中使用实体框架调用存储过程：

```
using (CmsEntities context = new CmsEntities())
            {

                try
                {
                    var test = context.TestSPROC().;
                    MessageBox.Show(test.ToString());
                }
                catch (EntityException exc)
                {
                    MessageBox.Show(exc.Message);
                }
            } 
```

在我的存储过程中，我所做的只是将一个 int 转换为一个数字**，目的**是生成一个算术溢出异常。我尝试通过两种方式做到这一点：

a) 使用转换函数设置变量并选择该变量。

```
ALTER PROCEDURE [cms].[TestSPROC]
AS
BEGIN

DECLARE @Test INT 
SET @Test=CONVERT(NUMERIC(3,2),15)
    SELECT @Test AS Test
END 
```

b) 在选择期间执行转换

```
ALTER PROCEDURE [cms].[TestSPROC]
AS
BEGIN
    SELECT CONVERT(NUMERIC(3,2),15) AS Test
END 
```

它们都在 SQL Server Management Studio 中引发算术溢出异常，问题是在 Visual Studio 2010 中捕获异常。

使用方法 a) EntityException 被捕获并可以处理，但是使用方法 b) 异常被忽略并且应用程序继续运行，就好像没有问题一样。所以在我看来，实体框架似乎以某种方式隐藏了错误。

# jquery - 计算视口尺寸并使用 Jquery 动态显示

> ID：11684103
> 
> 赞同：0
> 
> 时间：2012-07-27T08:24:10.967
> 
> 标签：jquery

我有这个函数可以随着浏览器窗口大小的变化动态计算视口的宽度和高度。现在我想在屏幕上显示该值，但它不起作用。有任何想法吗？

JS：

```
<script type="text/javascript">
        var viewportWidth = $(window).width();
        var viewportHeight = $(window).height();
             $('viewport').html(viewportWidth);
             $('viewport').html(viewportHeight);
        $(window).resize(function() {
             $('viewport').html(viewportWidth);
             $('viewport').html(viewportHeight);
        });
</script> 
```

HTML：

```
<div id="viewport">width and height should be displayed here dynamically</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:30:53.043

问题：

*   您正在使用`.html`，它会覆盖元素的先前 html。你可以使用`.append`.

*   您正在使用最初设置的变量，而不是在窗口调整大小时获取新值。

*   你正在使用`"viewport"`，应该是`"#viewport"`

*   您还应该确保在代码运行时元素存在，这意味着 dom 准备好处理程序或将脚本元素放在元素之后

尝试这个：

```
$(document).ready(function() {
    $(window).resize(function() {
        $('#viewport').empty().append($(window).width(), "x", $(window).height())
    }).resize(); //Initial call
}); 
```

演示：http: [//jsfiddle.net/3Lbb7/2/](http://jsfiddle.net/3Lbb7/2/)

# windows-phone-7 - 将 Windows Phone 7.5 升级到 Windows Phone 8？

> ID：11684117
> 
> 赞同：0
> 
> 时间：2012-07-27T08:24:50.893
> 
> 标签：windows-phone-7, nokia, windows-phone-8

我本周想购买诺基亚 Lumia 900，它（显然）是 Windows Phone 7.5，但微软将在 10 月的某个地方发布 Windows 8/Windows Phone 8，我想知道 Lumia 是否会更新到 Windows Phone 8、如果没有更新，我可以自己安装Windows Phone 8吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:00:37.667

当前一代的 Windows Phone 将无法以受支持的方式更新到 Windows Phone 8。不过，谁知道您是否能够破解副本。当前的手机将收到 Windows Phone 7.8 的更新，该更新将具有类似的开始屏幕，但尚未发布有关该版本的其他信息。

# java - 如何在 Java 中判断泛型对象的类

> ID：11684130
> 
> 赞同：0
> 
> 时间：2012-07-27T08:25:46.760
> 
> 标签：java, generics

> **可能重复：**
> [如何确定泛型类型的类？](https://stackoverflow.com/questions/182636/how-to-determine-the-class-of-a-generic-type)
> [在运行时获取类的泛型类型](https://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime)
> [Java Generics: Accessing Generic Type at runtime](https://stackoverflow.com/questions/9548779/java-generics-accessing-generic-type-at-runtime)

对于方法的通用对象参数

```
void bar(Foo<?> foo) {

} 
```

您如何检索转换对象的类型，即 的类型**？**?

# c# - 无效的表达式术语“>”

> ID：11684132
> 
> 赞同：3
> 
> 时间：2012-07-27T08:25:49.707
> 
> 标签：c#, list, visual-studio-2005, c#-2.0

我正在使用带有 .NET 2.0 的 Microsoft Visual Studio 2005。我有一个用于选择产品的组合框。选择产品后，我在文本文件中搜索它——最后我想在文件中找到该产品的行。但是使用以下代码

```
int lineNo = lineList.IndexOf(lineList.Find(x => x.StartsWith(select))); 
```

编译器给出错误：

```
Invalid expression term '>' 
```

这是.NET 2.0 框架版本的问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T08:27:29.743

> 我使用 Microsoft Visual Studio 2005 和 2.0 Net。

这意味着您使用的是 C# 2。

但是您正在尝试使用 lambda 表达式 ( `=>`) - C# 3 中引入的功能。它不是您正在使用的*框架*版本- 您可以在 VS2008 或更高版本中编写相同的代码，仍然针对 .NET 2。这是您使用的*语言版本。*

不过，您可以在 C# 2 中使用匿名方法执行类似的操作：

```
int lineNo = lineList.IndexOf(lineList.Find(delegate(String x)
{ 
   return x.StartsWith(select);
})); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T08:28:15.577

`3.0`支持 Lambda 表达式的`C#`语言起始版本。这`framework 2.0 + Vs 2005`对使用`c# 2.0`.

# iphone - 无法从另一个视图的 NSMutable 数组填充 UITableView

> ID：11684137
> 
> 赞同：0
> 
> 时间：2012-07-27T08:26:19.000
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我有 2 个 VC，第一个是`BooksDetailViewController`NSString `myBookString`。另一个是`FavBooksViewController`有`favBookList`NSMutableArray。我想`myBookString`从第一个 VC 传递 NSString 以将其包含在`favBookList`NSMutableArray 中，然后填充表。

我已经包含`@class FavBooksViewController;`在`BooksDetailViewController.h`

进口`#import "FavBooksViewController.h"`于`BooksDetailViewController.m`

中的动作`BooksDetailViewController.m`如下所示：

```
- (IBAction)addToFav:(id)sender {
    FavBooksViewController *mdvc;
    [mdvc.self.favBookList addObject:myBookString];
} 
```

在`FavBooksViewController.h`我有

```
@interface FavBooksViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (strong, nonatomic) id delegate;
@property (nonatomic,strong) NSMutableArray *favBookList; 
```

在`FavBooksViewController.m`-`#import "FavBooksDetailViewController.h"` 在 ViewDidLoad 我试图包括这一行

```
self.favBookList = [[NSMutableArray alloc]initWithObjects:nil]; 
```

但是我已经注释掉了。有了它，没有它 UITableView 就无法工作。当然我有这个：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.favBookList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
           UITableViewCell *cell = [tableView 
                                 dequeueReusableCellWithIdentifier:@"favBooksCell"];

        cell.textLabel.text = [self.favBookList
                               objectAtIndex:indexPath.row];
        return cell;
} 
```

无论如何，UITableView 只是空的，没有单元格，什么都没有。这里可能的错误是什么？我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:36:53.680

您忘记在您的`cellForRowAtIndexPath`方法中启动单元格。

代码应该是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
        static NSString *identifier = @"favBooksCell";

        UITableViewCell *cell = [tableView 
                                 dequeueReusableCellWithIdentifier:identifier];
        if(!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
        }

        cell.textLabel.text = [self.favBookList
                               objectAtIndex:indexPath.row];
        return cell;
} 
```

试试这个 ;-）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:54:52.050

无需将字符串添加到**BooksDetailViewController**中的数组，只需将字符串传递给**FavBooksViewController**，然后将其添加到 FavBooksViewController 中的数组中。

```
- (IBAction)addToFav:(id)sender {
    FavBooksViewController *mdvc;
    [mdvc setFavBook:myBookString];  
    //favBook is a NSString member object in your FavBooksViewController class

     [self.navigationController pushViewController:mdvc animated:YES];
} 
```

试试这是否可行。

# appharbor - AppHarbor 可以从标签而不是分支部署吗？

> ID：11684141
> 
> 赞同：0
> 
> 时间：2012-07-27T08:26:26.887
> 
> 标签：appharbor

我想识别 AppHarbor 通过 Git 标签签出和部署的代码。

这将与我们的版本控制政策很好地结合在一起，让我们更清楚地*了解什么*是实时的。

它需要显式更新我想要部署在 AppHarbor 中的标签/版本这一事实是可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:55:17.400

AppHarbor 支持从默认分支以外的跟踪分支进行部署，请查看[文档](http://support.appharbor.com/kb/getting-started/managing-environments)中的“从非默认分支部署” 。

# php - pyroms 扩展核心插件

> ID：11684142
> 
> 赞同：2
> 
> 时间：2012-07-27T08:26:30.170
> 
> 标签：php, plugins, pyrocms

我将扩展分析插件。我想获得最流行的页面。我阅读了谷歌 api 文档。很棒的是，已经有一个 php 库可以从谷歌分析 api 获取数据（太棒了！），而且 pyro 核心文件中还有一个很好的插件。我的意思是 Plugin_Integration。

现在我想要为这个插件添加新方法。这也不是编辑核心文件的好主意。所以，有两种方法：

1-将插件重新实现为共享插件（复制已经存在的代码） 2-扩展核心插件。

但不幸的是，我不知道如何扩展核心插件。:(

核心是这样的：

```
<?php defined('BASEPATH') OR exit('No direct script access allowed');

/**
 * Integration Plugin
 *
 * Attaches a Google Analytics tracking piece of code.
 *
 * @author      PyroCMS Dev Team
 * @package     PyroCMS\Core\Plugins
 */
class Plugin_Integration extends Plugin
{

    /**
     * Partial
     *
     * Loads Google Analytic
     *
     * Usage:
     *   {{ integration:analytics }}
     *
     * @return string The analytics partial view.
     */
    function analytics()
    {
        return $this->load->view('fragments/google_analytics', NULL, TRUE);
    }

    /**
     * Visitors
     *
     * Uses Google Analytics data to show page views 
     * and visitors for a given time period
     *
     * Usage:
     *   {{ integration:visitors }}
     *
     * @return array The number of page views and visitors.
     */
    public function visitors()
    {
        $data       = array('visits' => 0, 'views' => 0);
        $start      = $this->attribute('start', '2010-01-01');
        $end        = $this->attribute('end', date('Y-m-d'));
        $refresh    = $this->attribute('refresh', 24); // refresh the cache every n hours

        if (Settings::get('ga_email') and Settings::get('ga_password') and Settings::get('ga_profile'))
        {
            // do we have it? Return it
            if ($cached_response = $this->pyrocache->get('analytics_plugin'))
            {
                return $cached_response;
            }

            else
            {
                try
                {
                    $this->load->library('analytics', array(
                        'username' => Settings::get('ga_email'),
                        'password' => Settings::get('ga_password')
                    ));

                    // Set by GA Profile ID if provided, else try and use the current domain
                    $this->analytics->setProfileById('ga:'.Settings::get('ga_profile'));

                    $this->analytics->setDateRange($start, $end);

                    $visits = $this->analytics->getVisitors();
                    $views  = $this->analytics->getPageviews();

                    if ($visits)
                    {
                        foreach ($visits as $visit)
                        {
                            if ($visit > 0) $data['visits'] += $visit;
                        }
                    }

                    if ($views)
                    {
                        foreach ($views as $view) 
                        {
                            if ($view > 0) $data['views'] += $view;
                        }
                    }

                    // Call the model or library with the method provided and the same arguments
                    $this->pyrocache->write($data, 'analytics_plugin', 60 * 60 * (int) $refresh); // 24 hours
                }

                catch (Exception $e)
                {
                    log_message('error', 'Could not connect to Google Analytics. Called from the analytics plugin');
                }
            }

            return $data;
        }
    }
} 
```

我需要添加这样的方法，但是**在一个单独的插件中，该插件在插件之上扩展**

```
public function most_viewed()
{//the logic} 
```

任何人都可以给一个建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:13:11.697

PyroCMS 没有扩展核心的任何功能，当然复制代码不是最好的主意。所以这就是我要做的：创建自己的库，但扩展前一个库。

因此，您在类定义之前包含旧库的文件，然后执行

`class My_lib extends The_lib`

不完美，但我想是最好的选择。

PS：如果你对你的 lib 扩展有信心，为什么不将它提交到 PyroCMS 存储库？

# java - Java 库重用

> ID：11684145
> 
> 赞同：5
> 
> 时间：2012-07-27T08:26:47.117
> 
> 标签：java

在软件开发中，我们都在使用软件提供商提供的库。考虑在 A 类中有四个函数，即 x,y,z。我只是希望我的开发团队避免使用函数 x。因此，我没有告诉他们不要使用，而是找到了一个想法。继承类并覆盖所有函数，对于函数 x 抛出一个不受支持的方法异常，其余的我调用超级方法。还有我发现一个问题，开发者可以直接使用基类A，如何避免直接使用A类。我在 OSGi 中发现了类似的功能，可以引入 lib 包然后不导出等等。有什么方法可以实现这个是java吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:48:53.947

我想出于这些原因存在代码审查。考虑无法编辑第三方源的情况，您会怎么做？就像 Siddharth 说的那样，对它进行子类化并抛出一个有意义的异常并用明确的理由记录它。如果有人在那之后仍然使用基类，那可能不是出于无知，而是出于好奇。这种事情可以个人欣赏和学习，但为了项目的缘故，开发人员必须遵循指导方针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:04:48.103

我认为简单地告诉您的开发人员该做什么比复杂的软件解决方案更可取。有时简单的事情会更好。

但是，如果您坚持走这条路，如果您是 Spring 用户，则可以使用方面强制执行您的架构标准。将有问题的方法与被调用时抛出异常的方面结合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:52:13.050

有多种工具可以检查源代码是否符合某些规则，例如格式化、死代码、变量命名约定等。Java 的流行工具包括[Maven Enforcer 插件](http://maven.apache.org/plugins/maven-enforcer-plugin/)、[checkstyle](http://checkstyle.sourceforge.net/)和[PMD](http://pmd.sourceforge.net/pmd-5.0.0/)。

这些可能允许您编写禁止某些方法调用的规则。然后你可以在编译时自动检查。据我所知，不幸的是，上述工具均不支持开箱即用的“非法方法调用”；但是，至少对于 PMD 而言，编写新检查相当简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:38:06.097

您可以在十六进制编辑器中编辑库类文件并将其访问修饰符从公共修改为包私有。你也可以重命名它，然后使用继承来包装这个类。[在这里](http://jcp.org/en/jsr/detail?id=202)您可以找到类文件规范。一旦我尝试过这种技术，用提供一些额外日志记录和其他有用技巧的包装类替换 jdbc 驱动程序类。

# clone - 在预制件中复制克隆

> ID：11684153
> 
> 赞同：0
> 
> 时间：2012-07-27T08:27:18.023
> 
> 标签：clone, unity3d

我有一个带有一些数据（整数，字符串......）的预制件，并且我有一个这个预制件的克隆。在这个克隆中，我修改了其中一些整数和字符串。
之后我想在预制件中复制我的克隆，我的意思是我希望我的预制件具有与我的克隆对象相同的属性。我发现：
`UnityEditor.PrefabUtility.ReplacePrefab`
但这仅在编辑器中起作用。你能帮助我吗 ？另一件事是我不想手动复制数据。
非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:08:35.167

也许[Component Copier](http://u3d.as/content/is3d/component-copier/2BZ)值得一看。虽然有一个小错误并且组件菜单消失了（转换中的右键菜单完成了这项工作）它帮助了我。不，我不是开发者，只是一个用户。

# java - 更新 Chrome JRe

> ID：11684157
> 
> 赞同：0
> 
> 时间：2012-07-27T08:27:34.060
> 
> 标签：java, google-chrome, applet

在阅读“Google chrome custom JRE/JDK/plugin”后，我决定发布，因为我没有得到想要的行为。

操作系统：Windows 7 64 位。浏览器：Chrome 20 版

我希望 Chrome 使用 C:\Program Files\Java\jre7\bin\plugin2\npjp2.dll （即 64 位 java 插件）。

我启动 regedit 并转到 wow6432Node/Mozilla ... 并将 @java.com/JavaPlugin 节点的路径属性更改为我的 npjp2。

我退出 chrome 并重新启动：Chrome 告诉我未安装 Java。

如果我放回以前的版本 C:\Program Files (x86)\Java\jdk1.6.0_10\jre\bin\new_plugin\npjp2.dll，Chrome 会告诉我我的版本已过时。

这证明我在正确的地方进行了破解，但我无法让它采用 JVM 64 位。

在谷歌搜索了一些之后，我发现了这个[http://www.java.com/en/download/manual.jsp#win](http://www.java.com/en/download/manual.jsp#win)并且这条信息很有趣：

我们检测到您可能正在 32 位浏览器中查看此页面。如果您交替使用 32 位和 64 位浏览器，则需要同时安装 32 位和 64 位 Java 才能为这两种浏览器安装 Java 插件。

这意味着我需要安装 32 位版本的 JRE 只是为了让 Chrome 开心:)

我把这个帖子留给未来的谷歌人:)

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:40:02.337

我认为只有 Internet Explorer 可以使用 64 位 Java，其他浏览器只能使用 32 位 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:25:55.463

最简单的方法是将 Chrome 视为 32 位应用程序并为其提供 32 位 JVM，甚至在 64 位 Windows 操作系统上也是如此。

有趣的是，在 MAC OS X Snow Leopard 的最新更新中，没有任何问题：它与本机 jvm 一起工作就像一个魅力。我想知道如果我也使用默认的 jvm 会发生什么......

# android - 在没有 Android Beam 的情况下使用 NFC 与两部 Android 手机通信

> ID：11684159
> 
> 赞同：3
> 
> 时间：2012-07-27T08:27:49.837
> 
> 标签：android, nfc, android-beam, nfc-p2p

我正在使用 Android 中的 NFC。我已经使用 NFC 标签和 Android Beam 做了一些事情，但我想知道是否可以在没有 Android Beam 的情况下通过 NFC 与两部 Android 手机进行通信。我的意思是，我想在两部 Android 手机中使用点对点传输一些信息，例如文本或 URL，就好像它们是两个 NFC 标签一样。我想在其他设备中读取和写入此信息，但我发现在 Android 中使用 P2P 通信和传输数据的唯一方法是使用 Android Beam。可能吗？

PS。对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:48:56.560

不，这是不可能的——如果你想使用 NFC 承载，只有 SNEP/NPP over LLCP 是可能的（即 peer2peer 模式）。

彼得

# plist - NSDictionary 和 plist

> ID：11684162
> 
> 赞同：0
> 
> 时间：2012-07-27T08:28:00.177
> 
> 标签：plist, nsdictionary, nslog

我有一个带有字符串键和数字值的 plist 文件。我想我设法用 plist 内容填充了一个 NSDictionary 对象，代码很好：

```
NSBundle* bun = [NSBundle mainBundle];
NSString* path = [bun pathForResource:@"Tempos" ofType:@"plist"];

tempos = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

现在，这是我不明白的部分。

```
id object = [tempos objectForKey:@"Allegro"];
NSLog(@"bpm: %@", object); 
```

输出所需的数字，`168`。

```
NSInteger beats = (NSInteger)[tempos objectForKey:@"Allegro"];
NSLog(@"bpm: %ld", beats); 
```

而是输出，`43203`.

更重要的是，当我尝试

```
bpm = (NSInteger)[tempos objectForKey:@"Allegro"]; 
```

我被`43203`分配到`bpm`. 我如何被`168`分配到呢`bpm`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:15:20.093

我认为使用它应该可以工作：

```
int beats = [[tempos objectForKey:@"Allegro"] intValue];
NSLog(@"bpm: %i", beats); 
```

# asp.net-mvc-3 - 在 MVC3 解决方案上调试

> ID：11684164
> 
> 赞同：0
> 
> 时间：2012-07-27T08:28:08.757
> 
> 标签：asp.net-mvc-3, firebug

这是一个 MVC3 项目，当我运行解决方案并通过 firebug 调查流程时，有一个重复 url 列表（请参见红色框）。

![在此处输入图像描述](../Images/afbe0f066e5beb885943255a109d3251.png)

我很困惑，重复的行是什么意思？起初，我怀疑同一个控制器+动作被多次调用，但经过调试，似乎控制器只被调用一次。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:18:07.637

这是一个萤火虫的事情。这很可能意味着您有多个内联 css stiles，并且它列出了它们，因此您可以通过单击菜单直接导航到它们。

# mysql - MySQL中的SQL Group By和Min

> ID：11684175
> 
> 赞同：-1
> 
> 时间：2012-07-27T08:28:46.570
> 
> 标签：mysql, sql, group-by, min

我在 MySQL DB 中有以下 SQL：

```
select code, distance from locations; 
```

输出如下：

```
CODE    DISTANCE            LOCATION
106     386.895834130068    New York, NY
80      2116.6747774121     Washington, DC
80      2117.61925131453    Alexandria, VA
106     2563.46708627407    Charlotte, NC
106     2030.5845606766     Atalanta, GA 
```

我希望能够只获得一个代码和最近的距离。所以我希望它返回这个：

```
CODE    DISTANCE            LOCATION
106     386.895834130068    New York, NY
80      2116.6747774121     Washington, DC 
```

我最初有这样的事情：

```
SELECT code, min(distance), location
GROUP BY code
HAVING distance > 0 
ORDER BY distance ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:35:18.517

`SELECT code, distance, location FROM locations GROUP BY code HAVING distance > 0
ORDER BY distance ASC LIMIT 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:31:42.740

```
 SELECT code, min(distance), location
GROUP BY code,location
  HAVING distance =min(distance) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:46:44.777

尝试这个：

```
select L.* from (
    SELECT code, min(distance) as min_distance 
    from places
    GROUP BY code)a
join places L
on L.CODE=a.CODE
and L.DISTANCE=a.min_distance 
```

# python - 如何填充 matplotlib 网格？

> ID：11684183
> 
> 赞同：6
> 
> 时间：2012-07-27T08:29:33.810
> 
> 标签：python, matplotlib

我想渲染一个 ggplot2 风格的填充网格，一个 la [（来源：][[had.co.nz](http://had.co.nz/ggplot2/graphics/b1d84765165d97b51c63c292bc638f0b.png)][）][![这](../Images/4e0cd08ff595c75a80ea96c84a343193.png)](https://i.stack.imgur.com/7y93K.png)

我还没有找到任何以这种方式处理网格样式的在线资源。我是否必须求助于绘制自己的矩形补丁？

编辑：在尝试了 Chris 的解决方案之后，我编写了一个脚本来帮助使 matplotlib 图形看起来像 ggplot2，如果有人感兴趣的话。

[http://messymind.net/making-matplotlib-look-like-ggplot/](http://messymind.net/making-matplotlib-look-like-ggplot/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:51:27.463

以下代码用于[`matplotlib.pyplot.grid`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.grid)打开网格并设置网格属性（线条颜色、样式和宽度），然后用于`plt.gca().patch.set_facecolor('0.8')`更改轴颜色（我不确定是否有，但必须有方便的功能才能做到这一点） . 的参数`patch.set_facecolor`是任何[matplotlib 颜色](http://matplotlib.sourceforge.net/api/colors_api.html)。

```
import numpy
import matplotlib.pyplot as plt

x = numpy.random.rand(10)
x = numpy.random.rand(10)

plt.plot(x, y, 'o')

plt.grid(True, color='w', linestyle='-', linewidth=2)
plt.gca().patch.set_facecolor('0.8')

plt.show() 
```

结果是

![上面代码生成的图](../Images/94340c2e7019e69f4b33add7597ef68d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T05:46:34.303

如果您只想更新单个图表的网格背景，您可以这样做：

```
from matplotlib import pyplot as plt

fig, ax = plt.subplots()
ax.set_facecolor('#EBEBEB')
# Plot something.. 
```

但是如果你想要所有图表的完整 ggplot 样式，Matplotlib 带有一个`ggplot`主题，所以最简单的方法是启用它：

```
from matplotlib import pyplot as plt

plt.style.use('ggplot') 
```

Seaborn 也有类似的主题：

```
import seaborn as sns

sns.set_style('darkgrid') 
```

最后，`rcParams`如果您愿意，还可以手动设置：

```
from matplotlib import pyplot as plt
from matplotlib.ticker import AutoMinorLocator
import numpy as np

# This isn't a full styling but gets you most of the way.
ggplot_styles = {
    'axes.edgecolor': 'white',
    'axes.facecolor': 'EBEBEB',
    'axes.grid': True,
    'axes.grid.which': 'both',
    'axes.spines.left': False,
    'axes.spines.right': False,
    'axes.spines.top': False,
    'axes.spines.bottom': False,
    'font.size': 12,
    'grid.color': 'white',
    'grid.linewidth': '1.4',
    'xtick.color': '555555',
    'xtick.major.bottom': True,
    'xtick.minor.bottom': False,
    'ytick.color': '555555',
    'ytick.major.left': True,
    'ytick.minor.left': False,
}

plt.rcParams.update(ggplot_styles)

# Plot an example chart.
fig, ax = plt.subplots(figsize=(9, 6))
x = np.linspace(0, 14, 100)
for i in range(1, 7):
    ax.plot(x, np.sin(x + i * .5) * (7 - i))

# Set minor ticks/gridline cadence.
ax.xaxis.set_minor_locator(AutoMinorLocator(2))
ax.yaxis.set_minor_locator(AutoMinorLocator(2))

# Turn minor gridlines on and make them thinner.
ax.grid(which='minor', linewidth=0.5) 
```

[![具有 ggplot 样式的 matplotlib 绘图](../Images/2556b91d72a5a07f6580e8ed418677dd.png)](https://i.stack.imgur.com/kKuXL.png)

# c++ - 如何在作为控制台一开始的应用程序中创建窗口？

> ID：11684185
> 
> 赞同：3
> 
> 时间：2012-07-27T08:29:41.030
> 
> 标签：c++, winapi, console, window

我知道当应用程序从一开始就窗口化时创建窗口的方式，即您调用

```
LRESULT CALLBACK WindowProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam);
int WinMain(HINSTANCE hInst,HINSTANCE,LPSTR,int nCmdShow); 
```

但是，如果我想让用户选择在结束时显示控制台应用程序输出，该怎么办。那就是在临时创建的窗口中以更易读的形式显示其数据，而不是控制台允许的纯文本模式。

在控制台应用程序中，我有一个监视用户按键的功能，当我的程序结束时，它显示 message: `press D to display result in a window instead of console`，并在代码中：

```
if (virtual_key == 0x44) {
  HWND myWindow = myCreateWindFunc(/* data */);
} 
```

那就是我需要将用于创建窗口的所有代码打包到一个函数中，然后只需在其上调用函数并使用数据填充它的控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:48:21.137

`MessageBox`控制台应用程序可以使用任何相关的 WinAPI 函数（等）创建子窗口或对话框`DialogBox`。

唯一需要注意的是 create 函数可能需要控制台窗口的句柄。要获取它，您可以使用此处的示例[如何获取控制台窗口句柄](http://support.microsoft.com/kb/124103)

# c# - C# Irony Parser - 尽管一切看起来都正确，但不会解析文件

> ID：11684189
> 
> 赞同：1
> 
> 时间：2012-07-27T08:29:55.110
> 
> 标签：c#, parsing, irony

我对 Irony 有一些棘手的问题，我不明白......

我在应用程序运行时执行的第一次解析成功。

```
string src = "" // this is the file to parse
Grammar g = new CSharpGrammar();
LanguageData language = new LanguageData(g);
Parser parser = new Parser(language);
ParseTree parseTree = parser.Parse(src);
ParseRoot = parseTree.Root; 
```

然后我按照一个提示将 LanguageData 变量移动到全局上下文。还是一切正常。但是现在我想在自定义函数中调用 Irony 解析器，使用 Irony 提供的 c# 语法 v3.5 解析多个文件（LINQ 查询对我来说并不重要，所以这似乎足够了）。相同的方法：

```
Parser parser = new Parser(language);
ParseTree parseTree = parser.Parse(file);
ParseRoot = parseTree.Root; 
```

但是现在 parseroot 是并且仍然是“null”。我完全不知道为什么。刚才我还检查了解析器错误，在那里我发现了一个我无法理解的错误。

```
"Syntax error, expected: statement, member declaration, namespace" 
```

但我的文件看起来像这样：

```
using System;
using Microsoft.SharePoint.WebControls;

namespace WebParts.Layouts.Ordering
{
    public partial class ConfirmDelete : LayoutsPageBase
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            lblMsg.Text = "Are you sure you want to delete the entry?";

            if (!IsPostBack)
            {
                BtnYes.Attributes.Add("onclick", "OnYes(); return false;");
                BtnNo.Attributes.Add("onclick", "OnNo(); return false;");
            }
        }
    }
} 
```

我希望你能看到我的代码有什么问题......我对这件事感到绝望......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:56:09.117

您必须提供一个文件名作为 parser.Parse 的第二个参数：

```
static void Main(string[] args)
{
    Grammar g = new CSharpGrammar();
    LanguageData language = new LanguageData(g);
    Parser parser = new Parser(language);
    ParseTree parseTree = parser.Parse("", "class1.cs");

    var r = parseTree.Root;
} 
```

# php - MySQL & Memcached - 简单的检索查询不起作用

> ID：11684191
> 
> 赞同：1
> 
> 时间：2012-07-27T08:29:58.393
> 
> 标签：php, mysql, memcached

基本上是我第一次使用 memcached ...我正在尝试运行一个简单的查询，但由于某种原因无法正常工作...有关 memcached 的教程不是很好，我不知道为什么我的查询不起作用

```
 <?php

    //connect to memcached server and MySQL
$db = new PDO('mysql:host=localhost;dbname=test', 'admin', '');
$memcache = new Memcache;
$memcache->connect('127.0.0.1', 11211) or die ("Could not connect"); 

 // Run the query and get the data from the database then cache it
 $category_querry = $db->query('SELECT * FROM category WHERE category_id=1');
 $category_querry->setFetchMode(PDO::FETCH_ASSOC);

while($row = $category_querry->fetch()) {

 $memcache->set(1, $row['category_name'], 30); // Store the result of the query for 20 seconds
  var_dump($memcache->get(1));
 echo "</br> Data Pulled from the Database </br>";
}

$get_result = $memcache->get(1);
var_dump($get_result);

if ($get_result) 
    {
echo "</br>" . $get_result['category_name'];
echo "</br>" .  "Data Pulled From Cache";
} 
```

**代码更新**现在不知何故我让它进入了 IF 语句，浏览器中显示的是

```
string(3) "one" 
Data Pulled from the Database 
string(3) "one" 
o
Data Pulled From Cache 
```

然后这向我展示了所有 var_dumps 工作....它到达 if 语句，但不知何故，`$get_result['category_name']`它只`o`在应该输出时输出`one`

为什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:38:37.693

在设置 memcache 时，您没有定义 $key 变量

```
$memcache->set($key, $row, TRUE, 60); 
```

您需要先定义 $key 才能在 memcache 中设置它

# javascript - 重新调整网页内容的大小

> ID：11684194
> 
> 赞同：0
> 
> 时间：2012-07-27T08:30:14.563
> 
> 标签：javascript, jquery

在我的项目中，我有一个网页，左右有 2 个 div 区域。左边的 div 占据了整个页面宽度的 60%，右边的 div 占据了页面的 36% 左右。当我从右侧或左侧缩小浏览器时，我想以适当的比例调整两个 div 区域的大小。UI 是从 Javascript 生成的。这是代码。

```
boardHolderPadding = $board.outerHeight() - $board.height();
$board.height(viewportHeight - siblingsHeight - boardHolderPadding);

this.$('#board .droptarget').setWidthAsRatioOfHeight(this.options.ratio);

$('#sidebar').width($(window).width() - $board.find('#board').width() - 50); 
```

我尝试使用 JQuery 调整大小插件，但无法获得我正在寻找的正确结果。有人有建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:50:41.480

请参阅[jsfiddle 示例](http://jsfiddle.net/UrE33)，但我认为您只需将宽度设置为百分比，而不是尝试计算它们 - 注意*显示*设置为*inline-block*

```
<div>
    <div class="small-left-column">this is the left column</div>
    <div class="large-right-column">this is the right column</div>
</div>

<style>
.small-left-column {
    width: 30%;
    background-color: #aeaeae;
    display: inline-block;
}
.large-right-column {
    width: 60%;
    background-color: #aeaeae;
    display: inline-block;
}
</style> 
```

所以我认为对于你的例子你会有这样的东西

```
$(document).ready(function () {
    $('#sidebar').addClass('small-left-column');
    $('#board').addClass('large-right-column');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:02:13.627

也许您正在寻找上述的纯 Javascript 版本：

```
$(document).ready(function () {
    $('#sidebar').css( {
        width: '30%'
        backgroundColor: '#aeaeae',
        display: 'inline-block'
    });
    $('#board').css({
        width: '60%',
        backgroundColor: '#aeaeae',
        display: 'inline-block'
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:48:48.903

我在Javascript中以不同的方式完成了它，我希望如果他们遇到这样的问题，这将有助于某人解决

```
relativeSize : function(width, height){
    var boardWidth = this.$("#board").width(),
            boardHeight = this.$("#board").height(), 
            newcard = this.$("#newCard").width(), 
            space = width - boardWidth - newcard;
            ratio = space / width * 3; //used to increment the ratio with 3 as the ratio is very tiny value, this will help to increase minimizing size
            bheight = boardHeight - 25; // used to reduce the height by 25px, u can use any amount to match ur ratio
        var relHeight = (space < ratio) ? bheight : height;
        return relHeight;
  } 
```

谢谢

# git - git 在签出旧版本后取回 sha-1

> ID：11684201
> 
> 赞同：0
> 
> 时间：2012-07-27T08:30:47.620
> 
> 标签：git, version-control, revision

我有一个这样的 git repo：

```
rev3
rev2
rev1
Init repo 
```

我结帐rev1，

然后我的`git log`样子：

```
rev1
Init repo 
```

那么我怎样才能回到rev3呢？在结帐之前，我是否总是必须复制粘贴 git 日志？这对我来说似乎是不可接受的。我通读了[Go to specific revision](https://stackoverflow.com/questions/7539130/git-go-to-particular-revision)但这不是我想要的答案，而且我相信一定有某种方法可以在没有复制粘贴的情况下做到这一点，就像 tortoiseHg 所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:34:29.917

如果您刚刚签出以返回 rev1，那么您提交时所在的分支仍应指向 rev3，因此只需签出该分支，您应该会很好。但是，如果您进行了硬重置，则必须检查 reflog (git reflog) 以获取 rev3 的 SHA。

# android - ListActivity标题栏中的Android自定义字体

> ID：11684204
> 
> 赞同：1
> 
> 时间：2012-07-27T08:30:52.740
> 
> 标签：android, listactivity, titlebar

我正在解决这个问题。我需要在标题栏中设置自定义字体，但我的活动正在使用动态生成的布局（因此`setContentView(R.layout.somtehing`不使用）。

我已经尝试过，要在标题栏中设置自定义字体，您可以通过以下代码来做到这一点：

```
 type = Typeface.createFromAsset(getAssets(),"fonts/verdanab.ttf");
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.something);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.gal_title);

    title = (TextView) findViewById(R.id.title);
    title.setText(R.string.Text);
    title.setTypeface(type); 
```

问题是，此代码不起作用，应用程序看不到`TextView`标题，因为没有`setContentView()`. 有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:33:00.513

`type = Typeface.createFromAsset(getAssets(),"fonts/verdanab.ttf");`在此行之后初始化此 行

```
 getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.gal_title); 
```

使用此代码，

```
 requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.something);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.gal_title);

    Typeface  type = Typeface.createFromAsset(getAssets(),"fonts/verdanab.ttf");
    title = (TextView) findViewById(R.id.title);
    title.setText(R.string.Text);
    title.setTypeface(type); 
```

# mysql - 在数据库的所有表中查找UserId的过程

> ID：11684211
> 
> 赞同：-1
> 
> 时间：2012-07-27T08:31:06.383
> 
> 标签：mysql, search, int, procedure

我想在 MySQL 中编写一个搜索我们编写示例的 UserId 的过程

```
call NEW_PROCEDURE(2) 
```

`where 2 = UserId`我们希望在所有表中搜索。我有一个想法，但我不知道怎么做。首先，我们必须搜索数据库中的所有列 where`column_name = UserId`和 其次，我们必须搜索我们在过程中调用的值，并且`UserId = our value`

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:43:15.237

这会给你一个想法[http://beyondrelational.com/modules/2/blogs/70/posts/10883/search-a-value-in-character-column-of-all-tables.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10883/search-a-value-in-character-column-of-all-tables.aspx)

```
1 Use concat instead of +
2 Use prepared statement to exeucte the query
3 Information_schema is supported in mysql too 
```

# wicket - 当我关闭模式窗口时，基本页面会过期

> ID：11684218
> 
> 赞同：1
> 
> 时间：2012-07-27T08:31:41.997
> 
> 标签：wicket, wicket-1.5, wicketstuff

我有这个页面的页面，我正在调用新的模态窗口页面。现在我在这个模式页面上有取消按钮。cancel.Onclick 只是说 -

window.close(AjaxRequestTarget)

然后基本页面保留片刻，然后页面过期。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:48:51.857

啊。我得到了解决办法。好吧，实际上我的基础没有正确序列化——</p>

# java - 没有一个可供选择的政策得到满足

> ID：11684220
> 
> 赞同：0
> 
> 时间：2012-07-27T08:31:42.193
> 
> 标签：java, wsdl, cxf, ws-security, apache-karaf

我在为我的 OSGi 包设置基本身份验证时遇到问题。Bundle 部署在 Apache Karaf 中。在这里，我的 WSDL 中有政策声明：

```
<service name="MyService">
    <port name="MyPortTypeBindingPort"
          binding="MyPortTypeBinding">
        <soap:address location="http://localhost:8009/MyEndpoint"/>  
            <wsp:PolicyReference URI="#HttpBasicAuthBindingBindingRealmPolicy"/>
    </port>
</service>

<wsp:Policy wsu:Id="HttpBasicAuthBindingBindingRealmPolicy">
    <mysp:MustSupportBasicAuthentication on="true">
        <mysp:BasicAuthenticationDetail>
            <mysp:Realm realmName="MyRealm"/>
        </mysp:BasicAuthenticationDetail>
    </mysp:MustSupportBasicAuthentication>
</wsp:Policy> 
```

问题是当我尝试从浏览器访问服务时，以下错误是我进入日志文件：

```
org.apache.cxf.interceptor.Fault: None of the policy alternatives can be satisfied.
    at org.apache.cxf.ws.policy.AbstractPolicyInterceptor.handleMessage(AbstractPolicyInterceptor.java:47)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)[105:org.apache.cxf.cxf-api:2.6.0]
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122)[105:org.apache.cxf.cxf-api:2.6.0]
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:344)[130:org.apache.cxf.cxf-rt-transports-http-jetty:2.6.0]
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:310)[130:org.apache.cxf.cxf-rt-transports-http-jetty:2.6.0]
    at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)[130:org.apache.cxf.cxf-rt-transports-http-jetty:2.6.0]
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:943)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:879)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.Server.handle(Server.java:349)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:919)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:582)[81:org.eclipse.jetty.http:7.5.4.v20111024]
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)[81:org.eclipse.jetty.http:7.5.4.v20111024]
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:51)[85:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)[80:org.eclipse.jetty.io:7.5.4.v20111024]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)[80:org.eclipse.jetty.io:7.5.4.v20111024]
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)[79:org.eclipse.jetty.util:7.5.4.v20111024]
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)[79:org.eclipse.jetty.util:7.5.4.v20111024]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_33]
Caused by: org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied.
    at org.apache.cxf.ws.policy.EffectivePolicyImpl.chooseAlternative(EffectivePolicyImpl.java:186)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.EffectivePolicyImpl.chooseAlternative(EffectivePolicyImpl.java:179)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.EffectivePolicyImpl.initialise(EffectivePolicyImpl.java:113)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.PolicyEngineImpl.getEffectiveServerRequestPolicy(PolicyEngineImpl.java:311)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.EndpointPolicyImpl.initializeInterceptors(EndpointPolicyImpl.java:295)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.EndpointPolicyImpl.getInterceptors(EndpointPolicyImpl.java:126)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.PolicyInInterceptor.handle(PolicyInInterceptor.java:119)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    at org.apache.cxf.ws.policy.AbstractPolicyInterceptor.handleMessage(AbstractPolicyInterceptor.java:45)[140:org.apache.cxf.cxf-rt-ws-policy:2.6.0]
    ... 21 more 
```

我一直在搜索互联网，但找不到解决方案。也许有人知道可能出了什么问题？

我在用：

```
Apache Karaf 2.2.8
CXF 2.6.1
JDK 1.6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:15:27.363

您是否注册了策略处理程序等来处理 mysp:MustSupportBasicAuthentication 策略？这是一个非标准的策略断言并且没有标记为可选因此，CXF 不知道如何处理它。

我假设这是一个玻璃鱼政策？不太确定。

# object - Icefaces - ace：具有超过 1 个值的数据表

> ID：11684224
> 
> 赞同：1
> 
> 时间：2012-07-27T08:31:54.167
> 
> 标签：object, datatable, row, icefaces, ace-editor

我想要一个 ace:datatable，我可以在其中将“旧”对象与“新”对象进行比较。不幸的是，我只能使用对象列表来处理每行一个对象。是否可以每行处理多个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:08:36.473

如果两个列表的大小始终相同，您可以尝试这样的事情。

```
 <ace:dataTable value="#{bean.oldList}" var="item" rowIndexVar="index">
                    <ace:column headerText="Old Value">
                        <h:outputText value="#{item.value}"/>
                    </ace:column>
                    <ace:column headerText="New Value">                            
                            <h:outputText value="#{bean.newList[index].value}"/>                              
                    </ace:column>                  
                </ace:dataTable> 
```

但是我不太喜欢这样，因为它可能导致索引超出范围异常也许您也可以尝试使用嵌套数据表。

# iphone - UIWebView 和视网膜显示

> ID：11684226
> 
> 赞同：1
> 
> 时间：2012-07-27T08:32:05.663
> 
> 标签：iphone, objective-c, xcode, uiwebview

嗨，伙计们遇到了 UIWebView 的问题，

它的基础是我正在尝试显示图像条。所以图像将是 5000x640（横向），因此它将在 UIWebView 中显示整个图像，可以滚动。

我遇到的问题是，如果我使用 scaleToFit，它会缩放整个页面（而不仅仅是高度）。在除视网膜显示器之外的所有其他显示器上，不会出现此问题。

我错过了什么，图像在任何第 4 代设备的 UIWebView 上都是 2 倍大。如何缩放内容（仅高度）或将 UIWebView 视为缩放 2 倍？

# jquery - JQuery cookie 使用数组中的项目来插入 html 列表项？

> ID：11684232
> 
> 赞同：1
> 
> 时间：2012-07-27T08:33:06.630
> 
> 标签：jquery, html, cookies, insert, arraylist

我希望使用 JQuery 在 ID 为“LogInsert”的 div 层插入 html（listItems），该 JQuery 访问包含键/值对数组的 cookie（LogSum）。数组 cookie 中的一些项目需要与插入的 html 结合到 DOM 中。

我有以下错误的函数脚本，它在各种事件中被调用：

```
 function SetLogSum() {
      var listItems = "";
      var Cooksplit = $.cookie('logSum').split(',');

      $.each(Cooksplit, function(key, val) {
      listItems += "<div class='loggedinDetail'>" +
        "<div class='loggedinImage'>" +
        "<img src=" + val.uPic + " alt=" + val.uFName + val.uLName + " /></div>" +
        "<div class='loggedinName'><span>" + val.uFName + "</span></div>" +
        "<div class='loggedinStatus'><span>" + val.uGroup + " • " + val.uContRev + "</span></div>" +
        "</div>" +
        "<div class='loggedinHistory'>" +
        "<div class='loggedinReviewCount' title='Reviews'><span>" + val.CntRev + " Reviews</span></div>" +
        "<div class='loggedinTripCount' title=''><span>" + val.CntBook + "</span></div>" +
        "</div>";
    }
    );
    $("#LogInsert").html(listItems);
    } 
```

logSum cookie 包含以下信息：

```
uPic=avatar-male&uContRev=Contributor&uName=thedon&uGroup=Admin&uOP=0&uOA=0&uOH=0&uOI=0&uV=1&uP=0&uRv=0&uF=0&uCb=1&uPEC=0&uS=0&uC=UK&uL=en-US&uFName=Martin&uLName=Sansone&CntRev=6&CntBook=2 
```

我知道 listItems 部分有效，并且 .html 插入，因为我在 AJAX 调用中经常使用相同的结构。所以我的问题是我如何处理 cookie 但我不知道为什么。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:40:05.470

在您的循环中，`val`将是一个字符串，而不是一个对象，但您将其视为一个对象。您必须在角色上拆分每个*部分*，然后`val`在角色上拆分每个部分，最后得到键和值。然后使用这些来构建您的 HTML 片段。`&`*`=`*

 *如果您使用调试器（在 2012 年[没有理由](http://blog.niftysnippets.org/2011/03/no-excuse.html)不使用客户端调试器 :-)），这在检查时应该很清楚`val`。

这是一个看起来如何的*草图，既没有调试也没有保证，但它应该让你走上正确的道路：*

```
$.each(Cooksplit, function(key, valStr) {
    var items = valStr.split("&"),
        val = {};

    // Build up an object in `val` using the keys and
    // values from this entry
    $.each(items, function(index, item) {
        var parts = item.split("=");
        val[parts[0]] = parts[1];
    });

    // ...use `val` as you were...
    listItems += /* ... */;
}); 
```

在那里，我使用内部循环使用字符串中的键和值构建对象`val`，因此您的 HTML 片段构建代码可以在很大程度上保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:46:29.753

您可以转换：

```
valueStr = "uPic=avatar-male&uContRev=Contributor&uName=thedon&uGroup=Admin&uOP=0&uOA=0&uOH=0&uOI=0&uV=1&uP=0&uRv=0&uF=0&uCb=1&uPEC=0&uS=0&uC=UK&uL=en-US&uFName=Martin&uLName=Sansone&CntRev=6&CntBook=2" 
```

字符串到一个对象，其中键是`uPic`, `uContRev`, `uName`, etc... 而值是`avatar-male`, `Contributor`, `thedon`, etc... 像这样：

```
var val = JSON.parse( '{"'+
                          valueStr.replace(/=/g,'":"')
                          .replace(/&/g,'","') + 
                       '"}'); 
```

然后这样做：

```
listItems += "<div class='loggedinDetail'>" +
    "<div class='loggedinImage'>" +
    "<img src=" + val.uPic + " alt=" + val.uFName + val.uLName + " /></div>" +
    "<div class='loggedinName'><span>" + val.uFName + "</span></div>" +
    "<div class='loggedinStatus'><span>" + val.uGroup + " • " + val.uContRev + "</span></div>" +
    "</div>" +
    "<div class='loggedinHistory'>" +
    "<div class='loggedinReviewCount' title='Reviews'><span>" + val.CntRev + " Reviews</span></div>" +
    "<div class='loggedinTripCount' title=''><span>" + val.CntBook + "</span></div>" +
    "</div>"; 
```

[**演示**](http://jsfiddle.net/N4ad5/)*

# vb.net - 将 JSON 数组反序列化为对象列表

> ID：11684237
> 
> 赞同：0
> 
> 时间：2012-07-27T08:33:25.303
> 
> 标签：vb.net, json, deserialization, javascriptserializer

我正在尝试使用 JavascriptSerializer 在 .NET 中反序列化一些 JSON。我正在使用的 JSON 示例如下：

```
[{
"dep_date": "2012-07-12", 
"tax": 141.53, 
"currency": "GBP", 
"vcr": "LX", 
"dst_apt": "PRG", 
"flight_in": [
    [
        {
            "depApt": "PRG", 
            "dstApt": "FRA", 
            "depTime": "2012-07-15 19:05:00", 
            "vcr": "LH", 
            "carrier": "LH", 
            "arrTime": "2012-07-15 20:15:00", 
            "ocr": "LH", 
            "flightNo": "1401"
        }, 
        {
            "depApt": "FRA", 
            "dstApt": "LHR", 
            "depTime": "2012-07-15 21:30:00", 
            "vcr": "LH", 
            "carrier": "LH", 
            "arrTime": "2012-07-15 22:10:00", 
            "ocr": "LH", 
            "flightNo": "922"
        }
    ]
], 
"price": 114.0, 
"dst_city": "PRG", 
"dep_apt": "LCY", 
"flight_out": [
    [
        {
            "depApt": "LCY", 
            "dstApt": "ZRH", 
            "depTime": "2012-07-12 08:25:00", 
            "vcr": "LX", 
            "carrier": "LX", 
            "arrTime": "2012-07-12 11:15:00", 
            "ocr": "LX", 
            "flightNo": "451"
        }, 
        {
            "depApt": "ZRH", 
            "dstApt": "PRG", 
            "depTime": "2012-07-12 12:35:00", 
            "vcr": "LX", 
            "carrier": "LX", 
            "arrTime": "2012-07-12 13:55:00", 
            "ocr": "2L", 
            "flightNo": "1486"
        }
    ]
], 
"ret_date": "2012-07-15", 
}] 
```

我正在使用的实际代码/类是：

```
<Serializable()> _
    Public Class FareResult

        Public Property dep_date As String
        Public Property tax As String
        Public Property currency As String
        Public Property vcr As String
        Public Property dst_apt As String
        Public Property flight_in As List(Of FlightResult)
        Public Property price As String
        Public Property dst_city As String
        Public Property dep_apt As String
        Public Property flight_out As List(Of FlightResult)
        Public Property ret_date As String

    End Class

    <Serializable()> _
    Public Class FlightResult

        Public Property depApt As String
        Public Property dstApt As String
        Public Property depTime As String
        Public Property vcr As String
        Public Property carrier As String
        Public Property arrTime As String
        Public Property ocr As String
        Public Property flightNo As String

    End Class

Dim jss As New JavaScriptSerializer
Dim oFareResults As Generic.List(Of FareResult) = jss.Deserialize(Of List(Of FareResult))(sJSON) 
```

但是，这只是给我一条消息，说不支持类型 FlightResults 用于数组的反序列化。我尝试创建一个继承 FlightResults 列表的类，我尝试将其设置为数组而不是列表，但它们都给出了相同的异常。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:52:45.297

更改`flight_in`和`flight_out`数组有效（`()`最后请注意）。

```
Public Property flight_in As List(Of FlightResult)()
Public Property flight_out As List(Of FlightResult)() 
```

您的 JSON 有一些解析错误（通过[验证器](http://jsonlint.com/)运行）。请注意删除了结尾附近的逗号。这是一个有效的固定副本。

```
[{
"dep_date": "2012-07-12", 
"tax": 141.53, 
"currency": "GBP", 
"vcr": "LX", 
"dst_apt": "PRG", 
"flight_in": [
    [
        {
            "depApt": "PRG", 
            "dstApt": "FRA", 
            "depTime": "2012-07-15 19:05:00", 
            "vcr": "LH", 
            "carrier": "LH", 
            "arrTime": "2012-07-15 20:15:00", 
            "ocr": "LH", 
            "flightNo": "1401"
        }, 
        {
            "depApt": "FRA", 
            "dstApt": "LHR", 
            "depTime": "2012-07-15 21:30:00", 
            "vcr": "LH", 
            "carrier": "LH", 
            "arrTime": "2012-07-15 22:10:00", 
            "ocr": "LH", 
            "flightNo": "922"
        }
    ]
], 
"price": 114.0, 
"dst_city": "PRG", 
"dep_apt": "LCY", 
"flight_out": [
    [
        {
            "depApt": "LCY", 
            "dstApt": "ZRH", 
            "depTime": "2012-07-12 08:25:00", 
            "vcr": "LX", 
            "carrier": "LX", 
            "arrTime": "2012-07-12 11:15:00", 
            "ocr": "LX", 
            "flightNo": "451"
        }, 
        {
            "depApt": "ZRH", 
            "dstApt": "PRG", 
            "depTime": "2012-07-12 12:35:00", 
            "vcr": "LX", 
            "carrier": "LX", 
            "arrTime": "2012-07-12 13:55:00", 
            "ocr": "2L", 
            "flightNo": "1486"
        }
    ]
], 
"ret_date": "2012-07-15"
}] 
```

# windows-phone-7 - 如何加快 Windows Phone 7 上的解压缩操作？

> ID：11684239
> 
> 赞同：2
> 
> 时间：2012-07-27T08:33:29.423
> 
> 标签：windows-phone-7, zip, unzip

当我使用[SharpZipLib](http://slsharpziplib.codeplex.com/)在 windows phone 7 上解压缩一个包含 5000 个文件的 zip 文件时。完成它花了超过 5 分钟。这是代码：

```
using (StreamReader httpwebStreamReader = new StreamReader(ea.Result))
            {
                //open isolated storage to save files
                using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    using (ZipInputStream s = new ZipInputStream(httpwebStreamReader.BaseStream))
                    {
                        //s.Password = "123456";//if archive is encrypted
                        ZipEntry theEntry;
                        while ((theEntry = s.GetNextEntry()) != null)
                        {
                            string directoryName = Path.GetDirectoryName(theEntry.Name);
                            string fileName = Path.GetFileName(theEntry.Name);

                            // create directory
                            if (directoryName.Length > 0)
                            {
                                isoStore.CreateDirectory(directoryName);
                            }

                            if (fileName != String.Empty)
                            {
                                //save file to isolated storage
                                using (BinaryWriter streamWriter =
                                        new BinaryWriter(new IsolatedStorageFileStream(theEntry.Name,
                                            FileMode.OpenOrCreate, FileAccess.Write, FileShare.Write, isoStore)))
                                {

                                    int size = 2048;
                                    byte[] data = new byte[2048];
                                    while (true)
                                    {
                                        size = s.Read(data, 0, data.Length);
                                        if (size > 0)
                                        {
                                            streamWriter.Write(data, 0, size);
                                        }
                                        else
                                        {
                                            break;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } 
```

为什么这么慢？如何加快解压缩操作？有谁知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:57:02.447

我认为您需要增加缓冲区大小。换行

```
int size = 2048;
byte[] data = new byte[2048]; 
```

并将其更改为（32 * 1024）之`2048`类的东西。`32768`

2KB 的块大小正在对闪存进行大量单独写入。以我的经验，这是一件有点慢的事情，并且可能因设备而异。32KB 的块大小应该减少 16 倍，但我不知道这是否会导致直接 16 倍的加速。我有兴趣听到回音。

# c# - 查询范围的类集合产品等

> ID：11684240
> 
> 赞同：1
> 
> 时间：2012-07-27T08:33:33.010
> 
> 标签：c#, linq

有没有一种很好的方法来写这样的东西：

```
foreach ((i,j) in PRODUCTOF(Range1, Range2)) 
```

或者

```
PRODUCTOF(Range1, Range2).Sum((i,j) => i+17*j) 
```

其中 PRODUCTOF 对我来说是未知的。

当然，您可以绕过它或为此编写一个函数，但也许有一种人们应该喜欢的内置语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:35:27.543

你的意思是这样的：

```
foreach (var pair in Range1.SelectMany(x => Range2, (x, y) => new { x, y }))
{
    // Use pair.x and pair.y
} 
```

或者对于您的`Sum`示例：

```
var sum = Range1.SelectMany(x => Range2, (x, y) => new { x, y })
                .Sum(pair => pair.x + pair.y * 17); 
```

作为查询表达式：

```
var query = from x in Range1
            from y in Range2
            select new { x, y };
var sum = query.Sum(pair => pair.x + pair.y * 17); 
```

这是假设您想要交叉产品 - 每个可能的对。如果你只是想形成对`{ Range1(0), Range2(0) }, { Range1(1), Range2(1) }`等，那么你应该使用`Zip`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:52:47.910

如果`SelectMany`太冗长，我想你总是可以写一个扩展，比如，

```
public static class Extensions
{
    public static IEnumerable<Tuple<T,T>> CartesianProduct<T>(
            this IEnumerable<T> source,
            IEnumerable<T> multiplier)
    {
        return source.SelectMany(s => multiplier, (s, m) => Tuple.Create(s, m));   
    }
} 
```

你可以像这样使用

```
Range1.CartesianProduct(Range2).Sum(p => p.item1+17*p.item2); 
```

但是，我不确定你会获得那么多。正如你所建议的，你可以更进一步，

```
public static class Extensions
{
    public static IEnumerable<TResult> CartesianProduct<T, TResult>(
            this IEnumerable<T> source,
            IEnumerable<T> multiplier,
            Func<T, T, TResult> combiner)
    {
        return source.SelectMany(s => multiplier, (s, m) => combiner(s, m));   
    }
} 
```

并像这样使用，

```
Range1.CartesianProduct(Range2, (x, y) => x+17*y).Sum(); 
```

看起来确实有点整洁。

* * *

不管怎样，这要归功于[Jon Skeet](https://stackoverflow.com/a/11684264/659190)提供了我已经穿好的窗户。

# python - 谷歌应用引擎字符串到实体

> ID：11684246
> 
> 赞同：1
> 
> 时间：2012-07-27T08:34:11.047
> 
> 标签：python, google-app-engine

我想将任何字符串转换为我现有的实体。是否可以编写如下的**convertToEntity** () 函数？

```
class Personel(db.Model):
  name=db.StringProperty()

class IsEntityExists(webapp.RequestHandler):
  def get(self):
    entity="Personal"
    Entity=entity.convertToEntity()
    Entity.all() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:35:13.840

我想知道这个问题是否只是要求以某种方式查找给定名称的模型类，当它已经被导入时。你可以很容易地做到这一点（但只有当它已经被导入时！），如下：

```
cls = db.class_for_kind("Personel")
... cls.all() ... 
```

NDB 中的等价物：

```
cls = ndb.Model._kind_map["Personel"]
... cls.query() ... 
```

祝你好运！

PS。不，它不会进行拼写校正。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:57:10.623

仅当您为模型构建加载器时...例如：

```
from app import model_loader

class IsEntityExists(webapp.RequestHandler):
  def get(self):
    Entity=model_loader("Personal")
    Entity.all() 
```

而 model_loader 函数将在文件夹结构（python 模块）中搜索定义的模型。例如，您有文件夹结构：

```
models/
personal.py
other_model.py
user.py 
```

因此 model_loader("Personal") 将导入personal.py 并从该模块中提取“Personal”类，允许您对该类执行任何您想要的操作——如果它找到并加载它。

当然，您必须编写加载程序。

但是，如果类（定义的模型）与代码在同一个文件中，您可以在 locals() 上搜索“个人”

```
def load_model(name):
    local = locals()
    try:
      return local[name]
    except KeyError:
      return None 
```

# android - 无法在android应用程序的loding视图中删除黑屏

> ID：11684247
> 
> 赞同：0
> 
> 时间：2012-07-27T08:34:18.270
> 
> 标签：android, android-intent, android-asynctask

我有这个问题，当我尝试加载新视图时，在我得到服务响应之前我得到黑屏。现在为了解决这个问题，我使用了 AsyncTask 并且我已经解决了这个问题，但问题是我没有从我的服务中获得输出。下面是我的代码。

```
class GetInfo extends AsyncTask<String, String, String> {
    /**
             * Before starting background thread Show Progress Dialog
             * */
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(NewHomeView.this);
                pDialog.setMessage("Loading...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(true);
                pDialog.show();
            }

            /**
             * Creating player
             * */
            protected String doInBackground(String... args) {

                        goal = MMBusinessFacade.baseURL;
                        goal = goal + "getGoal.jsp?acno=" + acnt;
                        goal = goal.replaceAll(" ", "%20");
                        res = MMBusinessFacade.getXML(goal, NewHomeView.this);
                        NewHomeView.res1 = gp.getOutput(res);
                        System.out.println("URL:" + goal);
                        System.out.println("Output:" + res1);

                        /********************************************************************************************/
                        spnrshi1 = MMBusinessFacade.baseURL;
                        spnrshi1 = spnrshi1 + "getFunds.jsp?acno=" + acnt;
                        spnrshi1 = spnrshi1.replaceAll(" ", "%20");
                        res = MMBusinessFacade.getXML(spnrshi1, NewHomeView.this);
                        System.out.println("URL" + spnrshi1);
                        list1 = fdp.getOutputOrg1(res);
                        list = fdp.getOutputOrg(res);

                        if (list1 != null && list1.size() > 0) {
                            for (int j = 0; j < list1.size(); j++) {
                                FundsAvailable prpobj = (FundsAvailable) list1.get(j);
                                FundDetail prpobj1 = (FundDetail) list.get(j);
                                ite = prpobj.getAmount() + "  " + prpobj.getCurrency();
                                System.out.println("Item:" + ite);
                                NewHomeView.favail = prpobj1.getAmount() + " " + prpobj1.getCurrency();
                                NewHomeView.cur = prpobj.getCurrency();
                            }
                        }

                return null;
      }
            /**
             * After completing background task Dismiss the progress dialog
             * **/
            protected void onPostExecute(String file_url) 
            {
                // dismiss the dialog once done
                pDialog.dismiss();
                gl.setText(NewHomeView.res1);
                avilfund.setText(NewHomeView.ite);
                fndraised.setText(NewHomeView.favail);
            }

        } 
```

请给您宝贵的建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:02:25.373

我认为：U 不应该在 doInBackground 函数中使用 runOnUiThread。否则，doInBackground 将立即返回。并且您将使用 onPostExecute(null) 获得 null。所以，失败了。正确的代码：

```
protected String doInBackground(String... args) {

                        goal = MMBusinessFacade.baseURL;
                        goal = goal + "getGoal.jsp?acno=" + acnt;
                        goal = goal.replaceAll(" ", "%20");
                        res = MMBusinessFacade.getXML(goal, NewHomeView.this);
                        NewHomeView.res1 = gp.getOutput(res);
                        System.out.println("URL:" + goal);
                        System.out.println("Output:" + res1);

                        /********************************************************************************************/
                        spnrshi1 = MMBusinessFacade.baseURL;
                        spnrshi1 = spnrshi1 + "getFunds.jsp?acno=" + acnt;
                        spnrshi1 = spnrshi1.replaceAll(" ", "%20");
                        res = MMBusinessFacade.getXML(spnrshi1, NewHomeView.this);
                        System.out.println("URL" + spnrshi1);
                        list1 = fdp.getOutputOrg1(res);
                        list = fdp.getOutputOrg(res);

                        if (list1 != null && list1.size() > 0) {
                            for (int j = 0; j < list1.size(); j++) {
                                FundsAvailable prpobj = (FundsAvailable) list1.get(j);
                                FundDetail prpobj1 = (FundDetail) list.get(j);
                                ite = prpobj.getAmount() + "  " + prpobj.getCurrency();
                                System.out.println("Item:" + ite);
                                NewHomeView.favail = prpobj1.getAmount() + " " + prpobj1.getCurrency();
                                NewHomeView.cur = prpobj.getCurrency();
                            }
                        }

           }
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:02:51.550

你不应该`runOnUiThread`在你的`doInBackground`中使用它，它会让你失去使用 AsyncTask 的兴趣。在 doInBackground 中与 UI 通信的最佳方式是使用进度更新过程：

只需在您的 asynTask 中实现：

```
@Override
protected void onProgressUpdate(MyProgressObject... mpo) {
    super.onProgressUpdate(mpo);
    //my UI update here
} 
```

当您需要从内部更新 UI 时，`doInBackground`只需调用`publishProgress(MyProgressObject mpo)`

# version-control - LiveCode 源代码控制

> ID：11684248
> 
> 赞同：5
> 
> 时间：2012-07-27T08:34:20.493
> 
> 标签：version-control, livecode

有人在多开发人员项目中使用 LiveCode 吗？

无论哪种方式，有人可以推荐一个好的源代码控制系统/插件来使用吗？

我们已经看过 MagicCarpet，但由于它不再开发，我们希望使用其他东西。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T02:06:16.033

我正在通过将堆栈文件导出为脚本、json 和图像文件的结构化目录来解决这个问题，这些文件将在大多数 VCS 中很好地区分和合并。它尚不可用，但目的是它将是开源的。我的目标是在 5 月的 RunRevLive 会议上展示它。

这是 lcVCS 的回购[https://github.com/montegoulding/lcVCS](https://github.com/montegoulding/lcVCS)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T00:50:36.150

我在 revOnline (libVersionControl) 上放置了一个 git 库堆栈，它导出到 git 可以处理的结构化 xml 文件。它尽其所能，但我希望蒙特的解决方案将取代这项努力。

[rev 堆栈的在线链接](http://revonline2.runrev.com/stack/686/libVersionControl)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T09:41:19.820

我们在一个带有 Subversion 的小团队中使用 LiveCode。

我们没有完美的解决方案，但它非常轻量级；我们都使用标准工具栏的自定义扩展，其中有一个“保存+备份”按钮。当我们开始将它与 Subversion 一起使用时，我们向此按钮添加了代码，该按钮为堆栈保存了一个 XML sidecar 文件。该文件包含所有脚本、自定义属性和可选字段（由每个堆栈中的用户属性控制）。在我们的例子中，我们几乎所有的工作都在脚本中，所以这对我们有用。

效果是每次我们提交到 SVN 时，我们总是提交两个文件，LiveCode 堆栈和随附的 sidecar 文件 - 后者适用于差异等。

这让我们失望的是，我们没有任何合并的解决方案。如果我们更积极地在更大的系统上工作，我们也会修改我希望将 sidecar 格式修改为完整的文件文件夹。然而，现在这使情况可行（并且生成边车文件不需要明显的时间）。

如果有用的话，很高兴分享代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T17:04:33.747

是的，我们的团队一直在与多个开发人员一起使用 LiveCode。由于 Livecode 社区还很年轻，因此获得好的源代码控制工具可能是一个挑战。我们的解决方案是将代码分解为模块（堆栈文件）。当有更新要合并到主代码库中时，我们会克隆现有的代码库，并在文本编辑器中使用逐行比较手动合并代码更改。这不是一个有趣的过程，但远没有听起来那么痛苦。

如果我要重新设计系统，我们会简单地使用 Git（Github.com 等）。没有理由这不适用于 Livecode 堆栈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T19:21:58.480

我知道正在开发的一个工具在这方面会很有帮助。当他向我展示它时，它看起来已经非常实用了。但我不确定他什么时候会与社区分享。

因此，关键是，人们齐心协力为此提供交钥匙解决方案只是时间问题。

# iis - 如何从命令提示符设置 IIS 网站的默认文档？

> ID：11684254
> 
> 赞同：0
> 
> 时间：2012-07-27T08:34:37.397
> 
> 标签：iis, web

我想从命令提示符设置 IIS 网站的默认文档。

我可以知道如何设置这个..

谢谢， 马赫什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:46:02.287

您可以使用 appcmd.exe：

```
 appcmd set config /section:defaultDocument /enabled:true|false

Check appcmd help at MSDN (or here) for more information. 
```

[http://learn.iis.net/page.aspx/114/getting-started-with-appcmdexe](http://learn.iis.net/page.aspx/114/getting-started-with-appcmdexe)

# c# - 如何在c#中创建一个只包含进度条的表单

> ID：11684258
> 
> 赞同：-7
> 
> 时间：2012-07-27T08:34:46.640
> 
> 标签：c#, progress-bar

我想创建一个带有进度条的表单。表单没有任何按钮。它只有一个进度条来显示进程进度的百分比。
抱歉，我无法发布表格的图片。
请告诉我我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:45:40.153

如果您想以编程方式创建它，那么您可以重新创建设计器为您预先构建的代码，并根据您的需要对其进行调整，如下所示；

```
this.progressLoadingBar = new System.Windows.Forms.ProgressBar();
this.progressLoadingBar.Location = new System.Drawing.Point(10, 227);
this.progressLoadingBar.Name = "progressLoadingBar";
this.progressLoadingBar.Size = new System.Drawing.Size(100, 23);
this.progressLoadingBar.TabIndex = 9;
this.Controls.Add(this.progressLoadingBar); 
```

这里。只需确保“this”是您表单的上下文。如果您想进一步调整，请使用智能感知并查看您的选项，否则 google 是您最好的朋友，可以在此处找到 MSDN 页面：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx)

# android - 检查 ZXing 支持的最简单方法是什么？

> ID：11684261
> 
> 赞同：3
> 
> 时间：2012-07-27T08:35:01.090
> 
> 标签：android, zxing

我想要一个使用[ZXing](http://code.google.com/p/zxing/)条码扫描器的应用程序。我认为[ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)是这个应用程序集成扫描的好方法。但是，我想在运行时知道用户是否能够使用这个应用程序。有没有一种简单的方法可以做到这一点？或者我应该不时检查他们的[AndroidManifest.xml](http://code.google.com/p/zxing/source/browse/trunk/android/AndroidManifest.xml)以查看设备所需的功能是什么 + 检查用户是否安装了 Play 商店？

编辑：只是为了说清楚；我想在**代码**中知道是否有**设备支持**。我知道 ScanningViaIntent 可以很好地处理未安装的应用程序。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:50:25.227

ZXing 团队提供了一个小型代码库来优雅地处理这种情况，包括提示用户在尚未安装 ZXing 条码扫描器时下载它。

详细信息和下载链接可以在[这里](http://code.google.com/p/zxing/wiki/ScanningViaIntent)找到：

我意识到这种链接在这里是不受欢迎的，但是除了完全复制链接站点的信息并发布所提供库的全部内容之外，我看不出还有什么方法可以充分回答这个问题。任何关于如何的建议将不胜感激

编辑：抱歉，我应该检查 OPs 问题中的链接，发现他已经知道 ZXing 的 IntentIntegrator 代码库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:50:33.143

也许您可以在客户端中执行类似`initiateScan`方法的操作`ZXing`

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)

如果没有安装，它会提示下载ZXing。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:45:39.507

是的，我认为您应该检查用户是否有相机，或者是否有其他东西，例如自动对焦。对于我的一些项目，我不得不将 ZXing 直接集成到项目中以避免此类问题。

但毕竟有些情况只是告诉用户他必须有最低要求才能使用扫描功能就足够了^^

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T08:55:23.233

这就是我最终的做法。至少在我找到更好的方法之前。:)

```
/**
 * Convenience method for checking for ZXing app support. Requirements found
 * in http://code.google.com/p/zxing/source/browse/trunk/android/AndroidManifest.xml 
 * and
 * http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java
 * .
 * 
 * @return boolean true if app is supported, false if not.
 */
protected boolean hasSupportForZxing() {
    PackageManager packageManager = getPackageManager();
    if(!packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA)){ // ZXing required away faced camera
        return false;
    }
    if(!packageManager.hasSystemFeature(PackageManager.FEATURE_SCREEN_LANDSCAPE)){ // ZXing requires landscape mode
        if(packageManager.hasSystemFeature(PackageManager.FEATURE_SCREEN_PORTRAIT)){ // PackageManager doc states that if both landscape and portrait support is missing then both are probably supported (compatibility reasons)
            return false;
        }
    }
    if(!isMarketUrisHandled()){
        return false;
    }
    return true;
}

protected boolean isMarketUrisHandled() {
    Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=dummy"));
    List<ResolveInfo> resolveInfos = getPackageManager().queryIntentActivities(marketIntent, 0);
    return resolveInfos.size() > 0;
} 
```

# python - GAE - {% trans %} 在 django 模板中不起作用，而 ugettext() 起作用

> ID：11684263
> 
> 赞同：1
> 
> 时间：2012-07-27T08:35:09.343
> 
> 标签：python, django, google-app-engine, internationalization

我已经使用 i18n 国际化支持设置了我的 python AppEngine 工作。从代码中的语言环境获取文本可以正常工作，而 django 模板中的 {% trans "x" %} 则不能。

这是我在示例模板中的内容：

```
{% load i18n %}
{% trans "Home" %}
Language: {{ LANGUAGE_CODE }} 
```

它总是输出“Home”并且语言是空的。当我在代码中编写 _("Home") 时，一切都很好，我得到了翻译。

我的文件夹结构：

```
/
/lib - third parties
/locale
/locale/en
/locale/en/LC_MESSAGES
/locale/ru_RU
/locale/ru_RU/LC_MESSAGES
/static - static files
/source - python files
/source/templates - django templates 
```

在我的 app.yaml

```
libraries:
    - name: django
    version: "1.2" 
```

有任何想法吗？

编辑：这是我的测试项目的链接，它说明了这个问题......那里只有几个文件。 [https://skydrive.live.com/redir?resid=C010011792A4B538!131](https://skydrive.live.com/redir?resid=C010011792A4B538!131)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:29:23.497

关于`{{ LANGUAGE_CODE }}`，您必须像这样`settings.py`在上下文处理器中进行配置`i18n`：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    ...
    'django.core.context_processors.i18n',
    ... 
```

但我认为您的问题与 templatetag 没有融洽的关系`{% trans %}`。

# android - 网格视图滚动问题

> ID：11684265
> 
> 赞同：2
> 
> 时间：2012-07-27T08:35:34.670
> 
> 标签：android, view, grid, scroll

我有一个包含图像的列表，每次用户单击图像然后在网格视图上，图像将显示在网格视图上，这部分我已经完成并且它正在工作。问题是当用户开始向上/向下滚动时，网格上所有以前的图像开始显示在不同的位置。我猜我的适配器内的 getView 函数有问题

```
public class GridAdapter extends BaseAdapter{

Context mContext;
public GridAdapter(Context con){
    mContext = con;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return Globals.obsImageMatrix.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup arg2) {

     if(convertView==null){
        LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.grid_image, null);
        Holder.image =(ImageView) convertView.findViewById(R.id.obsImage);
      //  Holder.image.setImageResource(R.drawable.blank);
     }
      Holder.image =(ImageView) convertView.findViewById(R.id.obsImage);
      Holder.image.setImageResource(Globals.obsImageMatrix.get(position));
    return convertView;
}

public static class Holder{
    public static ImageView image;
} 
```

}

Globals.obsImageMatrix 是一个矩阵，它的大小与网格本身一样，包含网格的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:45:04.850

您没有正确使用 ViewHolder。试试这个：

```
@Override
public View getView(final int position, View convertView, ViewGroup arg2) {

     ViewHolder holder = null;
     if(convertView==null){
        LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.grid_image, null);
        holder = new ViewHolder();
        holder.image =(ImageView) convertView.findViewById(R.id.obsImage);
        convertView.setTag(holder);
     }else{
        holder = (ViewHolder)convertView.getTag(); 
     }

      holder.image.setImageResource(Globals.obsImageMatrix.get(position));
    return convertView;
}

public static class Holder{
    public ImageView image;
} 
```

您必须阅读有关 viewHolders 的更多信息才能理解这种模式。SO和google上有很多帖子。

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:29:35.600

1.  findViewById 应该仅在您创建新的视图时完成。
2.  使用它作为你的 LayoutInflater 代替：

    ```
    Context mContext;

    Private LayoutInflater mInflater;

        public GridAdapter(Context con){
            mContext = con;
            mInflater = LayoutInflater.from(con);
    } 
    ```

在您的 getView() 中：

```
@Override
public View getView(final int position, View convertView, ViewGroup arg2) {

     ViewHolder holder;
     if(convertView==null){
        convertView = mInflater.inflate(R.layout.grid_image, null);                 
        holder = new ViewHolder();
        holder.image =(ImageView) convertView.findViewById(R.id.obsImage);
        convertView.setTag(holder);
     }else{
        holder = (ViewHolder)convertView.getTag(); 
     }

      holder.image.setImageResource(Globals.obsImageMatrix.get(position));
    return convertView;
}

static class Holder{
    ImageView image;
} 
```

# javascript - 如何使用javascript根据表中的月份对日期列进行排序？

> ID：11684267
> 
> 赞同：0
> 
> 时间：2012-07-27T08:35:45.473
> 
> 标签：javascript

如何在javascript中将日期dd mon yyyy转换为mon dd格式？我使用 javascript 创建了一个表。该表包含格式为 dd mon yyyy 的日期列。我想将该格式转换为 dd mon 并按月份对其进行排序。该怎么办？请帮助我。

这是我的代码...

```
<script>

var now = new Date();

now.format("dd mmm");
var allNums = false;
var allDates = false;
var lastSort = -1;
var absOrder = true;

function setDataType(inValue) {

    var isDate = new Date(inValue);
    if (isDate == "NaN") {
        if (isNaN(inValue)){

            inValue =  inValue.toUpperCase();
            allNums = false
            allDates = false
            return inValue;
          }
        else {

            allDates = false
            return parseFloat(1*inValue);
          }
        }
  else {

        allNums = false
        return inValue ;
      }
  }

function sortTable(col){
    if (lastSort == col){

        absOrder ? absOrder = false : absOrder = true
    }
    else{
        absOrder = true
    }
    lastSort = col
    allTR = document.getElementById("dataTable").childNodes[0].childNodes

    totalRows = allTR.length
    colToSort = new Array()
    colArr = new Array()
    copyArr = new Array()
    resultArr = new Array()

    allNums = true
    allDates = true

    for (x=1; x < totalRows; x++){
        colToSort[x-1] = setDataType(allTR[x].childNodes[col].innerText)
        colArr[x-1] = allTR[x]
    }

    for (x=0; x<colToSort.length; x++){
        copyArr[x] = colToSort[x]
    }

    if (allNums){
        colToSort.sort(numberOrder)
    }
    else if (allDates){
        colToSort.sort(dateOrder)
    }
    else{
        colToSort.sort(textOrder)
    }

    for(x=0; x<colToSort.length; x++){
        for(y=0; y<copyArr.length; y++){
            if (colToSort[x] == copyArr[y]){
                boolListed = false

                for(z=0; z<resultArr.length; z++){
                    if (resultArr[z]==y){
                        boolListed = true
                        break;
                    }
                }
                if (!boolListed){
                    resultArr[x] = y
                    break;
                }
            }
        }
    }

    for (x=0; x<resultArr.length; x++){
        allTR[x+1].swapNode(colArr[resultArr[x]])
    }
}

function numberOrder(a,b){
    absOrder ? rVal = b - a : rVal = a - b
    return rVal
}

function dateOrder(a,b){
    absOrder ? rVal = Date.parse(a) - Date.parse(b) : rVal = Date.parse(b) - Date.parse(a)
    return rVal;
}

function textOrder(a,b){
    if (a.toString() < b.toString()){
        absOrder ? rVal = -1 : rVal = 1
    }
    else{
        absOrder ? rVal = 1 : rVal = -1
    }
    return rVal
}
</script>
<body style="background-color:AliceBlue">
<h1 style="color:Blue" align="center"><div id="header" style="background-color:LightCyan;"> Employee Birthday Information </div></h1>

<br/>
<br/>

<h><b> Sort by : </b></h>

<input type="radio"  onclick="sortTable(0)" name=sort> Employee Id </input>
<input type="radio"  onclick="sortTable(1)" name=sort> Employee Name </input>
<input type="radio"  onclick="sortTable(2)" name=sort> Employee Birthdate </input>

</br>
</br>
<table id="dataTable"  align="center" cellpadding="10" cellspacing="10" bgcolor="LightCyan">
<tr>
<th>Employee Name</th>
<th>Employee Id</th>
<th>Employee Birthdate</th>
</tr>
<td> 1 </td>
<td> Smita </td>
<td> 4 Nov 1989</td>
</tr>
<tr>
<td> 26 </td>
<td> Julie </td>
<td> 29 Dec 1990 </td>
</tr>
<tr>
<td> 15 </td>
<td> Rashmi </td>
<td> 7 Mar 1987 </td>
</tr>
<td> 4 </td>
<td> Jack </td>
<td> 4 June 1986 </td>
</tr>
<td> 48 </td>
<td> Soniya </td>
<td> 3 July 1989 </td>
</tr>
<td> 32 </td>
<td> John </td>
<td> 3 June 1989 </td>
</tr>
<td> 45 </td>
<td> Prajakta </td>
<td> 9 Aug 1989 </td>
</tr>
<td> 7 </td>
<td> Apeksha </td>
<td> 6 Feb 1989 </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:43:16.097

您想按月份对日期进行排序吗？

```
Xmas95 = new Date("December 25, 1995 23:15:00")
month = Xmas95.getMonth() 
```

这会给你一个月。

查看 mdn 内容：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:46:03.910

```
var a = new Date;
a.getDate(); // will give u date
a.getMonth(); // will give u month
a.getYear(); // will give u year 
```

您还可以使用 .getHours() 等获取小时、秒、分钟的所有内容。

# javascript - javascript中有哪些树距离库？

> ID：11684270
> 
> 赞同：2
> 
> 时间：2012-07-27T08:36:05.257
> 
> 标签：javascript, node.js, data-structures, tree

我正在寻找一个库来实现任何看似有据可查的*策略来计算树之间的距离。

例如，库应该显示这两棵树

```
 a              a
 / \            / \
b   c          b   c
                    \
                     d 
```

比这两个更“相似”

```
 a              x
 / \            / \
b   c          y   z 
```

我正在使用 node.js，所以节点实现会很好。我知道“相似”似乎有些模棱两可，但无论您使用什么策略来计算这些树之间的差异，我假设您总是会得到一些最终的“分数”，如果代表编辑距离, 在第二种情况下比在第一种情况下更大。

哪些 node.js 库会做这样的事情？

编辑：关于我的具体案例的一些附加信息：这是用于检测 html 文档中的重复树结构，因此更专门针对该问题的库会更好。

EDIT2：即使是 node.js 的 levenshtein 距离库也会有所帮助，所以我至少可以对树的指纹文本进行比较。

*我是该领域的新手，但[scribd.com](http://www.scribd.com/doc/49451396/pattern-matching-algorithms-9780195113679-37394?in_collection=3724457)讨论了 Lu 和 Tai 使用的策略。

# php - 如何通过 POST 类型的 html 表单发送 PHP 数组

> ID：11684274
> 
> 赞同：0
> 
> 时间：2012-07-27T08:36:37.347
> 
> 标签：php, javascript, html, arrays, post

我正在尝试通过 POST 通过 html 表单发送 PHP 数组。我正在使用的代码如下：

```
<?php
    $content = array('111', '222' );
?>

    <html>
    <head>
    <title>PAGE TITLE</title>
    </head>
        <body>
            <form name="downloadexcel" action="downloadexcel.php" method="post">
                <input type="text" name="data" value="<?php echo $content; ?>"/>
                <a href="javascript: submitform()">Download</a>
            </form>
            <script type="text/javascript">
                function submitform()
                {
                  document.downloadexcel.submit();
                }
            </script>
        </body>
    </html> 
```

如何通过 html 表单发送 PHP 数组？

任何网络链接或源代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:39:47.700

```
<?php
$content = array('111', '222' );
?>

<html>
<head>
<title>PAGE TITLE</title>
</head>
    <body>
        <form name="downloadexcel" action="downloadexcel.php" method="post">
            <?php foreach($content as $c) { ?>
               <input type="text" name="data[]" value="<?php echo $c; ?>"/>
            <?php }  ?>
            <a href="javascript: submitform()">Download</a>
        </form>
        <script type="text/javascript">
            function submitform()
            {
              document.downloadexcel.submit();
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:40:44.783

你不能像这样发送数组。它会返回`Array`。你可以这样做

```
<form name="downloadexcel" action="downloadexcel.php" method="post">

<?php foreach ($content as $item): ?>
    <input type="text" name="data[]" value="<?php echo $item; ?>"/>
<?php endforeach ?>

<a href="javascript: submitform()">Download</a>
</form> 
```

这种变体在模板或代码中的任何地方使用是最优雅的。`HTML`将很容易被验证`IDE`并且`code assist`也将可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:42:29.930

这是一个简单的例子：

```
$content = array('111', '222');

foreach($content as $c)
{
    echo "<input name='arr[]' value='{$c}'>";
} 
```

您也可以使用[序列化](http://php.net/manual/en/function.serialize.php)和反[序列化](http://php.net/manual/en/function.unserialize.php)来发送值。

# android - 如果没有连接，则异步任务下载抛出空指针异常

> ID：11684276
> 
> 赞同：0
> 
> 时间：2012-07-27T08:36:49.817
> 
> 标签：android, multithreading, download, android-asynctask, nullpointerexception

先生，如果没有互联网连接，我正在尝试处理该消息。但是如果有任何网络连接，当我仍然继续下载时，就会发生空异常错误。起初，它显示网络连接错误的消息，但当我按下是时，弹出异常错误消息。我们在处理这个案子的时候还需要进一步处理什么？

```
 timer = new Timer();
    boolean isOnline = WebServiceHandler.isOnline(this);
    if (isOnline) {
        startDownloadTask();
     task = new TimerTask() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                int progress = downloadProgressBar.getProgress();
                notification.contentView.setProgressBar(R.id.pb, downloadProgressBar.getMax(), progress, false);
                nm.notify(notificationID, notification);
            }
        };

        timer.schedule(task, 10, 500);

    } else {
        connectionErrorDialog.show();
        onDestroy();

    }

}    

@Override
public void stopDownloadTask() {
    downloadGoodListTask.cancel(true);
    downloadGoodListTask.setActivityIsRunning(false);
    downloadGoodListTask = null;

}

 protected void onDestroy() {
    super.onDestroy();
    Log.i("Download Activity", "starting to destroy");
    //timer.cancel();

    wheelProgressBar.destroyDrawingCache();
    downloadProgressBar.destroyDrawingCache();
    finishDialog.dismiss();
    connectionErrorDialog.dismiss();

    downloadProgressBar = null; 
    wheelProgressBar = null;
    progressTextView = null;
    downloadingTextView = null;
    finishDialog = null;
    connectionErrorDialog = null;        
    //timer = null;     
    nm.cancel(notificationID);

    nm = null;
    notification = null;
    /*downloadTask.cancel(true);
    downloadTask.activityIsRunning = false;
    downloadTask = null;*/
    stopDownloadTask();
    timer.cancel();        
    System.gc();

    Log.i("Download Activity", "destroyed");
}

@Override
public void stopDownloadTask() {
    downloadGoodListTask.cancel(true);
    downloadGoodListTask.setActivityIsRunning(false);
    downloadGoodListTask = null;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:49:26.670

不要从 UI 线程外部访问 Android UI 工具包。使用 runOnUIThread 方法，向 Handler 发送消息或使用 AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:41:45.663

例外是因为，downloadGoodListTask 为空，存在。要么，您应该初始化为某个值，要么在 stopDownloadTask() 中处理异常。

# tsql - T-SQL 使用 CTE 初始化视图内的变量

> ID：11684279
> 
> 赞同：5
> 
> 时间：2012-07-27T08:37:01.013
> 
> 标签：tsql, variables, view, common-table-expression, declare

我需要创建一个视图 - 它由五个 UNION ALL 语句组成。每个语句之间的区别在于数据按不同时期过滤：

例如：

```
SELECT  RecordName
       ,CASE
        WHEN RecordDate > DATEADD(WEEK,-1,GETUTCDATE()) THEN 'This week'
        END
UNION ALL
SELECT  RecordName
       ,CASE
        WHEN RecordDate > DATEADD(WEEK,-2,GETUTCDATE()) THEN 'Previos week'
        END
SELECT  RecordName
       ,CASE
        WHEN RecordDate > DATEADD(Year,-1,GETUTCDATE()) THEN 'Year ago'
        END 
```

然后我正在使用视图创建一个枢轴。

无论如何，“日期”条件是以更复杂的方式计算的。我也在使用 GETUTCDATE() 函数，这将在任何毫秒内返回不同的值。

这就是为什么我想使用 CTE 表达式来初始化所有日期条件变量或只在 CTE 中进行一次计算，然后在 SELECT-UNION 子句中使用此日期条件。

问题是，我无法使用下面的 SELECT 语句加入来自 CTE 的信息，并且当我尝试直接使用日期条件（不加入）时，它不起作用（“错误 - 列名无效”）。

这是我正在尝试做的一个例子：

```
WITH DatePeriods(ThisWeek,LastWeek,MonthToDate,QuarterToDate,YearToDate) AS
(
    SELECT  DATEADD(WEEK,-1,GETUTCDATE())  AS ThisWeek
           ,...                            AS LastWeek
           ,...                            AS MonthToDate
           ,...                            AS QuarterToDate
           ,DATEADD(YEAR,-1,GETUTCDATE())  AS YearToDate
)

SELECT  RecordName
       ,CASE
        WHEN RecordDate > ThisWeek THEN 'This week'
        END
UNION ALL
SELECT  RecordName
       ,CASE
        WHEN RecordDate > LastWeek THEN 'Previos week'
        END
SELECT  RecordName
       ,CASE
        WHEN RecordDate >YearToDate THEN 'Year ago'
        END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T09:12:15.147

您必须在每个查询的 from 子句中使用 CTE。您可以使用`cross apply`.

```
WITH DatePeriods(ThisWeek,LastWeek,MonthToDate,QuarterToDate,YearToDate) AS
(
    SELECT  DATEADD(WEEK,-1,GETUTCDATE())  AS ThisWeek
           ,...                            AS LastWeek
           ,...                            AS MonthToDate
           ,...                            AS QuarterToDate
           ,DATEADD(YEAR,-1,GETUTCDATE())  AS YearToDate
)

SELECT  RecordName
       ,CASE
        WHEN RecordDate > ThisWeek THEN 'This week'
        END
FROM YourTable 
  CROSS APPLY DatePeriods 
UNION ALL
SELECT  RecordName
       ,CASE
        WHEN RecordDate > LastWeek THEN 'Previos week'
        END
FROM YourTable 
  CROSS APPLY DatePeriods 
SELECT  RecordName
       ,CASE
        WHEN RecordDate >YearToDate THEN 'Year ago'
        END
FROM YourTable 
  CROSS APPLY DatePeriods 
```

# bash - 排序文件列表 aix one liner

> ID：11684282
> 
> 赞同：1
> 
> 时间：2012-07-27T08:37:10.203
> 
> 标签：bash, unix, datetime, sorting, aix

好的，这让我发疯了...我有一个衬管来查找其中包含文本的文件..但是我无法正确排序日期和时间。它只是不会随着日期和时间的升序正确排序。有什么想法吗？

```
$find . -name "dm_rmc_mover*" -mtime -1  -exec grep -il "Error Message: " '{}' \; | xargs ls -ltr 
```

输出示例...

```
$-rw-rw-r--    1 root     d_prod       205166 26 Jul 09:35 ./dm_rmc_mover309030.log
$-rw-rw-r--    1 root     d_prod       209695 26 Jul 09:35 ./dm_rmc_mover309015.log
$-rw-rw-r--    1 root     d_prod       208945 27 Jul 01:37 ./dm_rmc_mover25405.log
$-rw-rw-r--    1 root     d_prod       210330 27 Jul 01:37 ./dm_rmc_mover22082.log
$-rw-rw-r--    1 root     d_prod       210273 27 Jul 01:37 ./dm_rmc_mover22048.log
$-rw-rw-r--    1 root     d_prod       210330 27 Jul 01:38 ./dm_rmc_mover22059.log
$....
$-rw-rw-r--    1 root     d_prod         3294 27 Jul 08:38 ./dm_rmc_mover310651.log
$-rw-rw-r--    1 root     d_prod         3358 27 Jul 08:38 ./dm_rmc_mover310954.log
$-rw-rw-r--    1 root     d_prod       177163 27 Jul 08:39 ./dm_rmc_mover276166.log
$-rw-rw-r--    1 root     d_prod       176643 27 Jul 08:39 ./dm_rmc_mover276577.log
$-rw-rw-r--    1 root     d_prod       106788 27 Jul 09:12 ./dm_rmc_mover311916.log
$-rw-rw-r--    1 root     d_prod         3189 20 Jul 02:22 ./dm_rmc_mover52860.log
$-rw-rw-r--    1 root     d_prod         3189 20 Jul 02:22 ./dm_rmc_mover52186.log
$-rw-rw-r--    1 root     d_prod       194825 20 Jul 11:24 ./dm_rmc_mover377215.log
$-rw-rw-r--    1 root     d_prod       180234 20 Jul 11:26 ./dm_rmc_mover375105.log
$-rw-rw-r--    1 root     d_prod       147975 20 Jul 12:24 ./dm_rmc_mover412600.log
$-rw-rw-r--    1 root     d_prod       208897 20 Jul 12:24 ./dm_rmc_mover411173.log
$-rw-rw-r--    1 root     d_prod       193887 20 Jul 12:24 ./dm_rmc_mover412596.log
$-rw-rw-r--    1 root     d_prod        76626 20 Jul 13:06 ./dm_rmc_mover446896.log
$-rw-rw-r--    1 root     d_prod       135722 20 Jul 13:06 ./dm_rmc_mover446895.log
$-rw-rw-r--    1 root     d_prod       145209 20 Jul 13:08 ./dm_rmc_mover446908.log
$-rw-rw-r--    1 root     d_prod         3272 23 Jul 14:48 ./dm_rmc_mover532883.log 
```

终于到了27号的最后三个文件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:01:57.580

很有可能，`xargs`正在将文件列表分成几个调用`ls -ltr`，因此您会获得按正确顺序列出的文件组，但作为一个整体的输出未按预期排序。`-t`您可以通过添加或参数来验证是否是这种情况，`--verbose`以便在`xargs`执行每个命令之前打印它。

为了完成你想要做的事情，假设所有日志文件都在同一个目录中，而不是在一个层次结构中，这样的事情可能会更好 - 未经测试，但想法是按照你的顺序生成文件列表想要，然后过滤那些匹配模式的，最后得到`ls -l`输出：

```
ls -tr | grep dm_rmc_mover | xargs grep -il "Error Message: " | xargs ls -l 
```

# c++ - c++程序无法在另一台PC上运行，出现libgcc错误

> ID：11684285
> 
> 赞同：0
> 
> 时间：2012-07-27T08:37:22.823
> 
> 标签：c++, build, codeblocks, libgcc

我用 C++ 编写了一些简单的代码，然后在我的笔记本电脑上构建并运行它，一切正常。当我试图在我兄弟的笔记本电脑上运行 .exe 文件时，它给了我这个错误`The program can't start because libgcc_s_sjlj-1.dll is missing from your computer. Try reinstalling the program to fix this problem.`我错过了我应该添加的东西还是什么？

注意：我不知道这是否重要，但我正在使用 Code::Blocks。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:40:51.727

您可以将该 DLL 放在与您的版本中的 .exe 相同的文件夹中，它应该可以工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:45:27.433

这很重要，因为您使用了 Code::Blocks。如果你不知道，你很可能使用了 Code::Blocks 和[MinGW](http://www.mingw.org/)。将其安装在该机器上，然后重新启动可能会修复它。

C++ 程序需要有一个*运行时库*——你可以认为它需要 .NET Framework 来运行 C# 或 JRE 来运行 Java 程序。Visual C++ 使用`msvcrt`（称为 Visual C++ 运行时）。许多 Windows 安装似乎默认附带`msvcrt`，这可以解释为什么使用 MSVC 的人不太可能遇到这样的问题。

如果您[静态链接](http://en.wikipedia.org/wiki/Static_library)CRT（C 运行时），您可以提高必须安装 DLL 文件的客户端的要求，但代价是`.exe`文件更大。

一个相关的答案：[程序无法启动，因为缺少 libgcc_s_dw2-1.dll](https://stackoverflow.com/questions/4702732/the-program-cant-start-because-libgcc-s-dw2-1-dll-is-missing)

# c# - 局部变量与实例变量

> ID：11684289
> 
> 赞同：7
> 
> 时间：2012-07-27T08:37:38.237
> 
> 标签：c#, .net, optimization, instance, local

我一直在为使用 XNA 构建的游戏进行 C# 优化方面的大量研究，但我仍然不太了解局部变量是否是实例变量，在不断更新和使用时会提供更好的性能。

根据[http://www.dotnetperls.com/optimization](http://www.dotnetperls.com/optimization)，您应该避免使用参数和局部变量，这意味着实例变量是性能方面的最佳选择。

但是不久前，我在另一篇 StackOverflow 帖子上读到（我似乎找不到它在哪里），局部变量存储在内存的一部分中，访问速度要快得多，并且每次设置实例变量时，在分配新值之前，必须先删除以前的值，这是一个繁琐的额外步骤。

我知道在设计方面，在这种情况下使用实例变量可能会破坏封装，但我对性能非常好奇。目前在我的游戏中，我将局部变量传递给类中 7 个方法中的 3 个，但我可以轻松地将变量提升为实例变量，并且能够完全避免参数传递和局部变量。

那么哪个会更好呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:17:24.577

您的变量是引用（类或字符串）还是值（结构）类型？

对于引用类型，将它们作为方法参数传递和将它们保存在对象实例上之间没有有意义的区别。在第一种情况下，当输入函数时，参数（对于具有少量参数的函数）最终会出现在寄存器中。在第二种情况下，引用作为“this”在内存中指向的数据的偏移量存在。任何一种情况都是快速获取内存地址，然后从内存中获取相关数据（这是昂贵的部分）。

*对于值类型，对于某些*类型（可以放入 CPU 寄存器的整数或浮点数），上述情况是正确的。对于那些特定的东西，按价值传递可能比从“这个”中提取它们要便宜一些。对于其他值类型（DateTime 或您可能自己创建的结构或具有多个成员的任何结构），当数据太大而无法通过寄存器传递时，这不再重要。

但是，这不太可能对您的应用程序（甚至是游戏）的性能很重要。最常见的 .NET 性能问题（不仅仅是低效的算法）将以某种形式来自垃圾生成。这可能通过意外装箱、字符串构建使用不当或对象生命周期管理不佳（您的对象的生命周期既不是很短也不是很长/永久）来表现出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:45:04.440

就个人而言，我不会将此视为性能问题的罪魁祸首（除非您不断通过大`struct`s）。我幼稚的理解是 GC 压力是 XNA 游戏的通常考虑因素，因此基本上对您的对象实例进行节俭。

如果变量是方法本地的，则值本身或引用（当引用类型时）将位于堆栈上。如果您将它们提升为类成员变量，它们将位于堆上的类内存中。

方法调用在技术上会变得更快，因为您不再在调用中复制引用或值（因为如果方法也是类的本地方法，您可能可以从方法中删除参数）。

我不确定相对性能，但在我看来，如果你需要保持这个值，那么这个值在课堂上是有意义的......

对我来说，两者之间的细微差异似乎超过了做一个有利于另一个的任何潜在收益 - 使它们大致相等或差异如此之小以至于不在乎。

当然，面对来自性能分析的硬数据，所有这些都将得到纠正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:46:46.017

不传递参数会稍微快一些，不初始化本地对象（如果它们是对象）会更快。

您在两篇文章中读到的内容并不矛盾，一篇提到传递参数需要时间，另一篇提到初始化对象（在本地对象中）也可能需要时间。

关于分配新对象，您可以做的一件事是重用对象而不是丢弃它们。例如，前段时间，我不得不为交易者编写一些代码，用 C/C++ 和 C# 实时计算一些产品的价格。通过不从头开始重新创建方程系统，而仅通过从以前的系统逐步更新系统，我获得了性能的重大提升。

这避免了为新对象分配内存、初始化新对象，而且系统通常几乎相同，因此我只需修改微小的位来更新它。

通常，在进行任何优化之前，您要确保您正在优化会显着影响整体性能的东西？

# ruby-on-rails - RSpec 中的夹具

> ID：11684300
> 
> 赞同：35
> 
> 时间：2012-07-27T08:38:38.713
> 
> 标签：ruby-on-rails, rspec, bdd, fixtures

我是使用 RSpec 在使用 MySQL 数据库的 Rails 应用程序中编写测试的新手。我已经定义了我的固定装置并将它们加载到我的规范中，如下所示：

```
before(:all) do
  fixtures :student
end 
```

此声明是否将我的夹具中定义的数据保存在学生表中，还是只是在测试运行时加载表中的数据并在所有测试运行后将其从表中删除？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-07-11T05:14:16.640

如果您想在 RSpec 中使用夹具，请在 describe 块中指定您的夹具，而不是在 before 块中：

```
describe StudentsController do
  fixtures :students

  before do
    # more test setup
  end
end 
```

您的学生设备将被加载到学生表中，然后在每次测试结束时使用数据库事务回滚。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-09-29T13:28:50.257

首先：您不能`fixtures`在`:all`//`:context`中使用方法`:suite hook`。不要尝试在这些钩子中使用固定装置（如`post(:my_post)`）。

正如 Infuse 之前写的那样，您只能在描述/上下文块中准备固定装置。

称呼

```
fixtures :students, :teachers 
```

不要将任何数据加载到数据库中！只需准备辅助方法`students`和`teachers`. 当您第一次尝试访问所需的记录时，它们会延迟加载。就在之前

```
dan=students(:dan) 
```

这会给学生和老师带来负担`delete all from table + insert fixtures`。

**所以如果你在 before(:context) 钩子里准备了一些学生，他们现在就消失了！！**

在测试套件中只插入一次记录。

测试套件结束时不会删除来自夹具的记录。它们在下一次测试套件运行时被删除并重新插入。

例子：

```
 #students.yml
   dan:
     name: Dan 
   paul:
     name: Paul

 #teachers.yml
    snape:
      name: Severus

describe Student do
  fixtures :students, :teachers

  before(:context) do
    @james=Student.create!(name: "James")
  end

  it "have name" do
   expect(Student.find(@james.id)).to be_present
   expect(Student.count).to eq 1
   expect(Teacher.count).to eq 0

   students(:dan)

   expect(Student.find_by_name(@james.name)).to be_blank
   expect(Student.count).to eq 2
   expect(Teacher.count).to eq 1

  end
end

#but when fixtures are in DB (after first call), all works as expected (by me)

describe Teacher do
  fixtures :teachers # was loaded in previous tests

  before(:context) do
    @james=Student.create!(name: "James")
    @thomas=Teacher.create!(name: "Thomas")
  end

  it "have name" do
   expect(Teacher.find(@thomas.id)).to be_present
   expect(Student.count).to eq 3 # :dan, :paul, @james
   expect(Teacher.count).to eq 2 # :snape, @thomas

   students(:dan)

   expect(Teacher.find_by_name(@thomas.name)).to be_present
   expect(Student.count).to eq 3
   expect(Teacher.count).to eq 2

  end
end 
```

**上述测试中的所有期望都将通过**

如果这些测试再次运行（在下一个套件中）并按此顺序运行，则超出预期

```
 expect(Student.count).to eq 1 
```

**将不会满足！**将有 3 名学生（:dan、:paul 和新的@james）。所有这些都将在之前被删除`students(:dan)`，只有 :paul 和 :dan 将再次插入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T12:10:44.970

`before(:all)`保留确切的数据，因为它被加载/创建一次。你做你的事，在测试结束时它会留下来。这就是为什么bui的链接必须`after(:all)`销毁或使用`before(:each); @var.reload!;end`才能从之前的测试中获取最新数据的原因。我可以看到在嵌套的 rspec 描述块中使用这种方法。

# asp.net - 如何在 jqueryui 上根据点击填充占位符

> ID：11684301
> 
> 赞同：1
> 
> 时间：2012-07-27T08:38:58.753
> 
> 标签：asp.net, jquery-ui

我在 jqueryui 上加载占位符时遇到问题点击。我已经从后端填充。我需要根据accordin 标题点击填充占位符。

这是我的html

```
<html>
<head>
    <script>

    $(function () {
        $('#login').button({ icons: { primary: "ui-icon-person"} });
        $('#showDataSource').button({ icons: { primary: "ui-icon-newwin"} });
        $('#logout').button({ icons: { primary: "ui-icon-locked"} });

        $('#login').click(function () {

            var panel = $('#loginPanel').dialog({ modal: true });
            panel.parent().appendTo($("form:first"));
        });

        $('#logout').click(function () {
            (function (event) {

            });
        });

        $('#showDataSource').click(function () {
            $('#dataSource').dialog({ modal: true, width: 1000, height: 700 });
            $('.accordion').accordion({ autoHeight: false, navigation: true, collapsible: true,
                active: false,
                changestart: function (event, ui) {
                    var dataSourceID = ui.newHeader.find('a').attr('id');
                    //var dataSourceColumn = EasyOutputWeb.Services.GetDataSourceColumns(dataSourceID, onsuccess, onError);
                    $.post(dataSourceID, function (data) {

                        //ui.newHeader.next("div").html(dataSourceID);
                        $('#columnPlaceHolder').html(dataSourceID);
                    });
                }
            });
        });
    });

    function onsuccess(msg) {
        alert(msg);
    }
    function onError(msg) {
        alert(msg);
    }

    </script>

</head>

<body>
        <div id="dataSource" runat="server">  
                <div class="divtable">  
                    <div class="headrow" id="#accordianHeight">  
                        <div class="divcol">  
                            Data Sources</div>  
                        <div class="divcol" >  
                            Columns</div>  
                        <div class="divcol">  
                            Strong Keys</div>  
                    </div>  
                    <div class="divrow">  
                        <div class="content">  
                            <div class="accordion" id="accordianHeight">  
                                <asp:PlaceHolder ID="dataPlaceHolder" runat="server" />  
                            </div>  
                        </div>  
                        <div class="content">  
                            <div id="dataColumn">  
                                test column  
                                <asp:PlaceHolder ID="columnPlaceHolder" runat="server" />  
                            </div>  
                        </div>  
                        <div class="content" >  
                            <div id="dataKey">  
                                Test key  
                                <asp:PlaceHolder ID="keyPlaceHolder" runat="server" />  
                            </div>  
                        </div>  
                    </div>  
                </div>  
            </div>  

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:59:19.347

这里的第一个错误是您使用`PlaceHolder`它们[没有与任何标签一起变形，](https://stackoverflow.com/questions/483352/asp-net-panel-vs-placeholder)因此 jQuery 无法抓取它们。`Panel`将该扭曲与 span 或 div 您的内容一起使用。

第二个错误是当asp.net渲染它们时，每一个的最终id都是从`.ClientID`属性中获取的，所以jQuery的代码将是：

```
$('#<%=columnPlaceHolder.ClientID%>').html(dataSourceID); 
```

还有一条评论，如果您实际上没有在`Panel`'s 后面的代码上添加任何控件，那么您只需放置一个`<div id="columnPlaceHolder"></div>`代码来编写它们，并像现在一样使用 jQuery 调用（不要添加 CliendID）

# xcode - Mac SDK：使用最新的 SDK，但确保向后兼容早期的部署目标

> ID：11684302
> 
> 赞同：14
> 
> 时间：2012-07-27T08:39:00.260
> 
> 标签：xcode, macos, cocoa, xcode4, sdk

一如既往，当 Apple 更新 OS X 时，最新的 XCode 4.4 转储了旧的 (10.6) SDK，我发现自己需要使用 10.7 SDK（或者我想是 10.8）并将我的部署目标设置为 10.6 以保持兼容性。

我更喜欢链接到较旧的 SDK，因为我知道我不能错误地引入对尚不存在的 API 的调用。当我上次尝试逆向方法时，我发现自己经常做的事情。

我发现自己在做的是，我使用 XCode 中的代码完成功能为像 NSWorkspace 这样的简单类选择“正确”调用，然后在开发过程中一切正常，我忘记了它，当我发布新版本时：Kaboum！整个应用程序在运行时在早期的 OS X 版本上爆炸；经常在那些难以到达的地方:-)

或者至少这是我几年前的情况。

当然，现在有一种方法可以：

*   确保不引入部署目标中尚不可用的 API 调用，即使它们已在 SDK 中定义

*   在构建或静态分析期间检测此类调用

我确定我错过了一些东西，沿线某处..请赐教！

最好的祝福，

坦率

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T14:22:36.013

> 当然，现在有一种方法可以：
> 
> *   确保不引入部署目标中尚不可用的 API 调用，即使它们已在 SDK 中定义
>     
>     
> *   在构建或静态分析期间检测此类调用

不，那里没有。是的，您应该针对它打开一个雷达 (bugreport.apple.com)。如果你喜欢，你可以欺骗我的：[rdar://11985733](http://openradar.appspot.com/radar?id=1850406)

是的，尽管 Apple 建议，唯一可行的解​​决方案是复制旧的 SDK 并链接它们。

我在 WWDC 2012 上花了很长时间与 Xcode 团队讨论这个问题。他们同意它已经坏了。目前没有修复它的计划。不断升级的雷达是我们在这些事情上影响苹果的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:07:43.167

我通常将 SDK 从旧版本复制到新版本，这样如果我使用不支持的东西，编译器就会责备我。

您也可以在调用一些您不确定的方法时简单地查看**快速帮助，例如在屏幕截图中您可以看到***launchApplicationAtURL*方法仅适用于 10.6

![在此处输入图像描述](../Images/aa60eea2d6fcecb3e3743fccfa40f54b.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:42:09.590

我在 iOS 上也遇到过这个烦人的问题。在 iOS 上实际上更烦人，因为用户必须在发送崩溃报告之前将他们的设备与 iTunes 同步并启用崩溃报告发送，这与 Mac OS X 不同的是，您不需要做所有这些。最近，我设法添加了一个编译时检查，用于检查 API 与旧版本的 SDK。我将首先解释我是如何在 iOS 上做到这一点的，然后尝试帮助你在 Mac OS X 上适应这种技术。我没有为 Mac atm 编写太多代码，所以我只能根据我的经验真正引导你朝着正确的方向前进使用 iOS，但我将在今天晚些时候测试我的建议，一旦我下班并给出明确的答案。

* * *

所以这就是我为 iOS 所做的：

我首先必须获得我想要获得的旧版**Simulator** SDK。我可以通过下载包含所需 SDK的旧 Xcode **3 （不是 4）版本轻松获得此功能。**

接下来我必须安装 SDK。这不是太难，所以我不会在这里解释太多。但是 SDK 存储在`Packages`文件夹中。此文件夹在早期 Xcode 3 版本中清晰可见，但在更高版本中隐藏。无论如何，您都可以通过终端轻松打开它。此外，在 Xcode 4.3 中`Developer`文件夹移动到 Xcode.app 中的更改之后，我不得不将 SDK 安装到 tmp 文件夹中，然后自己将 SDK 移动到 Xcode.app 中。如果我打开它，我将需要重新启动 Xcode。

之后，我`debug`在您的项目中复制了我的配置并将其命名，在我的情况下，类似`iOS 4.3 API Check`或类似的东西 - 并不重要。然后我将这个新配置的 Base SDK 更改为我安装的旧 SDK。虽然我安装的 SDK 没有列出，所以我不得不`other`再次选择并输入`iphonesimulator4.3`.

最后，当我需要检查旧版本的 SDK 时，我将`Run <appname>.app`项目方案中的配置更改为我的`iOS 4.3 API Check`配置。我们开始了，针对 iOS 4.3 的编译时检查。

* * *

至于 Mac OS X，我相信你可以用同样的方法达到同样的目标。Mac SDK 没有模拟器，所以我认为常规的 SDK 可以解决这个问题。至于获取旧版 SDK，如果您仍然安装了 Xcode 4.2（在 Xcode 4.3 更改它之后，该`Developer`文件夹位于 Xcode.app 中），那么您应该在那里找到 10.6 SDK。如果你不这样做，我想苹果有一个与 iOS 类似的东西，可以在开发中心或互联网上的某个地方下载 SDK ......

至于设置 Base SDK，如果它没有列出，那么我认为它的名称是`MacOSX10.6`或者你所追求的任何版本。

其他一切都应该相同，但如前所述，我将在今天晚些时候测试此方法并编辑我的答案以给出更明确的答案，但我想这种方法适用于 Mac SDK。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-22T19:08:48.683

我还假设编译器会警告我有关部署目标操作系统版本的“太新”API 使用情况。但事实证明，编译器默认情况下不会警告你。原因之一可能是您仍然可以通过在运行时使用“respondsToSelector:”检查可用性来使用新 API，例如，即使部署目标版本较旧，也可以在较新的操作系统版本上使用。您需要添加 Xcode 7.3+ 上可用的编译器选项**-Wpartial-availability**（待确认），以获得“警告：'某些东西'是部分的：在 macOS 10.x 中引入”警告消息。

在带有 Xcode 8.2.1 的 macOS 10.12.3 上：

```
$ cat foo.m
#include <Foundation/Foundation.h>

BOOL foo()
{
    return [@"foo" containsString:@"bar"];
}

$ cc -mmacosx-version-min=10.9 -Wpartial-availability foo.m -c -o foo.o
foo.m:5:20: warning: 'containsString:' is partial: introduced in macOS 10.10 [-Wpartial-availability]
    return [@"foo" containsString:@"bar"];
                   ^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:132:1: note: 
      'containsString:' has been explicitly marked partial here
- (BOOL)containsString:(NSString *)str NS_AVAILABLE(10_10, 8_0);
^
foo.m:5:20: note: explicitly redeclare 'containsString:' to silence this warning
    return [@"foo" containsString:@"bar"];
                   ^
1 warning generated. 
```

另请参阅：[XCode 有没有办法警告新的 API 调用？](https://stackoverflow.com/questions/4676000 "XCode 有没有办法警告新的 API 调用？")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T13:40:37.420

我通过修改 Availability.h 来检查我的代码，以使编译器将弱链接符号标记为警告/错误。在我当前的 (Xcode 5/llvm) 化身中，我使用下面的代码。每当我使用 iOS 6.0 或更高版本中引入的符号时，它都会发出警告。我认为这是不言自明的。宏似乎需要在每次 SDK 更新时进行更新，因此请谨慎行事。哦，你也放弃了弃用警告，所以我只偶尔使用它来仔细检查我的条件代码。

```
#undef __NSi_6_0
#define __NSi_6_0 deprecated=1.0
#undef __NSi_6_1
#define __NSi_6_1 deprecated=1.0
#undef __NSi_7_0
#define __NSi_7_0 deprecated=1.0

#undef __NSd_6_0
#define __NSd_6_0
#undef __NSd_6_1
#define __NSd_6_1
#undef __NSd_7_0
#define  __NSd_7_0 
```

另请参阅[http://iphone.m20.nl/wp/2013/10/xcode-5-and-flagging-weak-linked-unavailable-symbols-from-a-newer-sdk/](http://iphone.m20.nl/wp/2013/10/xcode-5-and-flagging-weak-linked-unavailable-symbols-from-a-newer-sdk/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-06T15:14:30.420

由于 Xcode 9 有一个构建设置可以做到这一点，打开警告`-Wunguarded-availability`和/或`-Wunguarded-availability-new`.

当使用比部署目标更新的 API 时，前者会发出警告。后者仅在以类似方式使用比 macOS 10.13 或 iOS 11 更新的 API 时发出警告。

对于现有项目，前者默认关闭，后者默认开启。

此设置在 Xcode 的构建设置窗格中称为“无保护可用性”，您可以从 GUI 中选择是、是所有版本或否。

有关更多详细信息，请参阅 WWDC17 会议 411，“LLVM 中的新功能”，[https://developer.apple.com/videos/play/wwdc2017/411/](https://developer.apple.com/videos/play/wwdc2017/411/)。

# java - 为 WebKit 浏览器创建插件

> ID：11684304
> 
> 赞同：1
> 
> 时间：2012-07-27T08:39:05.393
> 
> 标签：java, c++, .net, webkit, browser-plugin

> **可能重复：**
> [如何编写浏览器插件？](https://stackoverflow.com/questions/2649056/how-to-write-a-browser-plugin)

我需要使用 VS2010 为 Chrome、Firefox、Safari 等所有浏览器创建插件？我怎样才能做到这一点 ？

如果无法使用 .NET，那么使用 Java 或 C++ 的任何其他方式？

例如，当我们尝试播放 flash 文件时，它会给我们类似“缺少插件...”或安装 flash 播放器...

我想创造这样的东西。

请帮帮我，我该怎么做？

# javascript - HSV颜色的有效范围是多少

> ID：11684306
> 
> 赞同：1
> 
> 时间：2012-07-27T08:39:27.220
> 
> 标签：javascript, colors, hsv

我正在玩 HSV 颜色。从 rgb 颜色转换后，我有一个 hsv 数组：

```
//hsv[0], hsv[1], hsv[2]
var hsv = rgbToHsv(rgb[0], rgb[1], rgb[2]); 
```

我将添加或减去它

```
hsv[0] += ...
hsv[1] += ...
hsv[2] += ... 
```

我需要在将其转换回 rgb 之前验证该值。hsv 的有效范围是多少？

这是我用来将 rgb 转换为 hsv 的函数

```
function rgbToHsv(r, g, b) {  
    var r = (r / 255),  
         g = (g / 255),  
     b = (b / 255);   
    var min = Math.min(Math.min(r, g), b),  
        max = Math.max(Math.max(r, g), b),  
        delta = max - min;  
    var value = max,  
        saturation,  
        hue;  
    // Hue  
    if (max == min) {  
        hue = 0;  
    } else if (max == r) {  
        hue = (60 * ((g-b) / (max-min))) % 360;  
    } else if (max == g) {  
        hue = 60 * ((b-r) / (max-min)) + 120;  
    } else if (max == b) {  
        hue = 60 * ((r-g) / (max-min)) + 240;  
    }  
    if (hue < 0) {  
        hue += 360;  
    }  
    // Saturation  
    if (max == 0) {  
        saturation = 0;  
    } else {  
        saturation = 1 - (min/max);  
    }  
    return [(hue), (saturation * 100), (value * 100)];  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-26T04:31:47.227

大致相同的算法用于[此在线转换器](https://www.tlbx.app/color-converter)。您可以在相反的转换之后查看文章。

H 绝对在 0 到 360 之间，但对于 S 和 V，它是不同的。与颜色转换或颜色混合模式计算的大多数值一样，使用介于 0 和 1 之间的浮点数。我会说这更好，因为浮动意味着您可以拥有所需的所有精度级别。

现在将其乘以 100 以获得百分比并不少见（例如在此在线转换器和您当前的 javascript 上）。通常也是圆形的。了解这种舍入的重要一点是，如果您来回转换，显然它会增加您获得不同 RGB 颜色的机会`rgb > hsv > rgb`。如果这很重要，那么你最好使用花车。

既然你问什么是“有效的”，我想说它只取决于你想如何使用它或这些数字将在哪里使用。

# c# - 无法检索 perforce 客户端

> ID：11684307
> 
> 赞同：0
> 
> 时间：2012-07-27T08:39:35.553
> 
> 标签：c#, perforce, p4api.net

我正在尝试使用 p4api.net apis 开发基于 C# 的构建工具。我是 perforce p4api.net 的新手。我按照从他们的网站下载的 p4api.net 库中给出的说明进行操作，但从未成功在 perforce 上运行基本命令。我附上了一段应该从 Perforce 获取客户端的代码。如有错误请指正。代码在执行 GetClients() 时引发运行时错误（未处理的预期）。

```
static void Main(string[] args)
{
    string uri = "perforce:1666";
    string user = "User1";

    Server server = new Server(new ServerAddress(uri));
    Repository rep = new Repository(server);
    Connection con = rep.Connection;

    con.UserName = user;
    con.Client = new Client();

    // connect to the server
    con.Connect(null);

    // run the command against the current repository
    IList<Client> changes = rep.GetClients(null);
} 
```

任何有关执行 C# 文档/示例的有用指南将不胜感激。

谢谢，马杜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:17:22.223

票证通过 p4 登录授予用户。如果您使用 P4V 或其他客户端登录，除非您明确 p4 注销，否则票证在到期之前仍然有效。您可以在连接之后和运行命令之前在 P4API.NET 中创建此凭据：

```
 // connect to the server
        con.Connect(null);
        string password = "pw";
        Credential cred = con.Login(password, null, null);
        con.Credential = cred; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:40:17.090

您确定异常来自 GetClients 吗？我成功运行了您的代码，但是当我将 uri 更改为不存在的服务器：端口时，我在 con.Connect(null) 处得到未处理的异常。

确认您确实可以使用 User1 访问 perforce:1666 服务器，并且 User1 不需要该服务器上的密码。

# iphone - UIImagePickerController 崩溃

> ID：11684308
> 
> 赞同：2
> 
> 时间：2012-07-27T08:39:35.577
> 
> 标签：iphone, ios, xcode, ipad, uiimagepickercontroller

我正在尝试展示一个 UIImagePickerController。它在模拟器上运行良好，但经过几次演示后，我在控制台中收到错误消息。

> 尝试注册的已过滤专辑列表超过 5 个。这将失败。

这是代码：

```
- (IBAction)imageSelectorPressed:(id)sender 
{
    UIImagePickerController* picker = [[[UIImagePickerController alloc] init] autorelease];
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])
    {
        // Set source to the Photo Library
        picker.sourceType =UIImagePickerControllerSourceTypePhotoLibrary;

    }
    picker.delegate = self; 
    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker];
    self.imagePopOverController = popover;
    [self.imagePopOverController setDelegate:self];
    [self.imagePopOverController presentPopoverFromRect:[kepekBtn frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    [popover release]; 
}

-(void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    [popoverController dismissPopoverAnimated:YES];
    [self setImagePopOverController:nil];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [self.imagePopOverController dismissPopoverAnimated:NO];
    [image setImage:[info objectForKey:@"UIImagePickerControllerOriginalImage"]];
    picker = nil;
    [self setImagePopOverController:nil];
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [self.imagePopOverController dismissPopoverAnimated:NO];
    picker = nil;
    [self setImagePopOverController:nil];
} 
```

更新：我检查了 iPad 上的联系人应用程序。编辑了一个人，它在控制台日志中有同样的错误。但它并没有崩溃，而我的应用程序却是。所以正确的问题是：我该如何解决？

# javascript - 动画 jQuery UI 可拖动元素回到起始位置

> ID：11684310
> 
> 赞同：3
> 
> 时间：2012-07-27T08:39:41.353
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有一个元素，比如说一个 div，我希望能够拖放到另一个 div 中。如果元素没有被拖到另一个 div 中，我希望它动画回到它的初始位置。可拖动的 div 是相对定位的。所以，我的问题是最好的方法是什么？jQuery UI 中是否有一种方法可以让它返回动画？还是我必须写？如果我这样做，这是我的策略：

1.  在开始拖动时获取可拖动 div 的坐标`$('#draggableElement').css('left')`，以及`$('#draggableElement').css('top')`

2.  在拖动完成时，使用 jQuery .animate 将其放回原位。

这个策略正确吗？还是我可以做一些更有效的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:44:41.473

看看[这个](http://jqueryui.com/demos/droppable/#revert)

也许是 jquery [ui 可拖动](http://jqueryui.com/demos/draggable/)选项的助手-> 助手。

我认为这应该对你有所帮助。如果不是，请说明您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T13:59:15.820

你需要设置`revert: 'invalid'`

例子：

```
$( "#draggablediv" ).draggable({helper : "clone", revert: "invalid" }); 
```

当`helper:clone`您尝试拖动它时会创建一个克隆，当您不将其放在该区域时，`revert: "invalid"`会将克隆返回到他的起始位置。

**如果您希望可拖动对象返回他的位置，请使用`revert: "true"`**

请参阅[http://api.jqueryui.com/draggable/#option-revert](http://api.jqueryui.com/draggable/#option-revert)

# hibernate - Hibernate/JPA：合并时意外级联

> ID：11684315
> 
> 赞同：2
> 
> 时间：2012-07-27T08:39:55.360
> 
> 标签：hibernate, jpa-2.0

休眠版本：4.0.1.Final / JPA

你好，

我想合并一个分离表。执行 entityManager.merge() 后，从数据库中选择所有子表。

子表在 parentTable 中注释为：

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "parentTable") 
```

没有级联注释。我不想在合并时级联子表。如何禁用合并时的级联？

```
@Transactional
public void save() {
    entityManager.merge(parentTable); //cascades child´s here
} 
```

仅重新选择先前已获取的子表。

谢谢 tak3shi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:58:29.243

默认情况下禁用所有级联。如果您不想级联任何东西，只需不要将级联属性添加到 @OneToMany 注释。

另一方面，如果您想级联除合并之外的所有其他内容，请使用以下内容：

```
@OneToMany(fetch = FetchType.LAZY, 
           mappedBy = "parentTable" 
           cascade = {CascadeType.DETACH, CascadeType.PERSIST, 
                      CascadeType.REFRESH, CascadeType.REMOVE}) 
```

也许还有其他一些与级联合并操作无关的问题。在这种情况下，显示实体以及创建和合并它们的代码将很有用。

# haskell - 如何在 haskell 中使用 Control.Monad.Writer？

> ID：11684321
> 
> 赞同：101
> 
> 时间：2012-07-27T08:40:19.823
> 
> 标签：haskell, monads

我是函数式编程的新手，最近在[Learn You a Haskell](http://learnyouahaskell.com/)学习，但是当我读完[这一章](http://learnyouahaskell.com/for-a-few-monads-more)时，我被下面的程序卡住了：

```
import Control.Monad.Writer  

logNumber :: Int -> Writer [String] Int  
logNumber x = Writer (x, ["Got number: " ++ show x])  

multWithLog :: Writer [String] Int  
multWithLog = do  
    a <- logNumber 3  
    b <- logNumber 5  
    return (a*b) 
```

我将这些行保存在 .hs 文件中，但未能将其导入我的 ghci 中抱怨：

```
more1.hs:4:15:
    Not in scope: data constructor `Writer'
    Perhaps you meant `WriterT' (imported from Control.Monad.Writer)
Failed, modules loaded: none. 
```

我通过 ":info" 命令检查了类型：

```
Prelude Control.Monad.Writer> :info Writer
type Writer w = WriterT w Data.Functor.Identity.Identity
               -- Defined in `Control.Monad.Trans.Writer.Lazy' 
```

从我的角度来看，这应该类似于“newtype Writer wa ...”，所以我对如何提供数据构造函数并获取 Writer 感到困惑。

我想这可能是版本相关的问题，我的 ghci 版本是 7.4.1

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-27T08:56:07.363

该包`Control.Monad.Writer`不导出数据构造函数`Writer`。我想这在 LYAH 被写出来的时候是不同的。

## 在 ghci 中使用 MonadWriter 类型类

相反，您使用该`writer`函数创建编写器。例如，在 ghci 会话中，我可以做

```
ghci> import Control.Monad.Writer
ghci> let logNumber x = writer (x, ["Got number: " ++ show x]) 
```

Now`logNumber`是一个创建 writer 的函数。我可以询问它的类型：

```
ghci> :t logNumber
logNumber :: (Show a, MonadWriter [String] m) => a -> m a 
```

这告诉我推断的类型不是返回*特定*编写器的函数，而是实现`MonadWriter`类型类的任何东西。我现在可以使用它：

```
ghci> let multWithLog = do { a <- logNumber 3; b <- logNumber 5; return (a*b) }
    :: Writer [String] Int 
```

（输入实际上在一行上输入）。在这里，我指定了`multWithLog`to的类型`Writer [String] Int`。现在我可以运行它了：

```
ghci> runWriter multWithLog
(15, ["Got number: 3","Got number: 5"]) 
```

你会看到我们记录了所有的中间操作。

## 为什么代码是这样写的？

为什么要费心创建`MonadWriter`类型类呢？原因与单子变压器有关。正如您正确意识到的那样，最简单的实现方法`Writer`是作为一对顶部的新类型包装器：

```
newtype Writer w a = Writer { runWriter :: (a,w) } 
```

您可以为此声明一个 monad 实例，然后编写函数

```
tell :: Monoid w => w -> Writer w () 
```

它只是记录其输入。现在假设您想要一个具有日志记录功能的 monad，但还可以执行其他操作 - 假设它也可以从环境中读取。您将其实现为

```
type RW r w a = ReaderT r (Writer w a) 
```

现在因为 writer 在`ReaderT`monad 转换器中，如果你想记录你不能使用的输出`tell w`（因为它只与未包装的 writer 一起使用）但你必须使用`lift $ tell w`，它通过“提升”`tell`函数`ReaderT`以便它可以访问内心作家单子。如果您想要两层转换器（假设您还想添加错误处理），那么您需要使用`lift $ lift $ tell w`. 这很快变得笨拙。

相反，通过定义一个类型类，我们可以将编写器周围的任何 monad 转换器包装器变成编​​写器本身的实例。例如，

```
instance (Monoid w, MonadWriter w m) => MonadWriter w (ReaderT r m) 
```

也就是说，如果`w`是一个幺半群，并且`m`是一个`MonadWriter w`，那么`ReaderT r m`也是一个`MonadWriter w`。这意味着我们可以`tell`直接在转换后的 monad 上使用该函数，而不必费心通过 monad 转换器显式提升它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-18T01:27:22.743

一个名为“writer”的函数可以代替“Writer”构造函数。改变：

`logNumber x = Writer (x, ["Got number: " ++ show x])`

到：

`logNumber x = writer (x, ["Got number: " ++ show x])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T04:46:00.817

我在 repl.it中使用在线 Haskell 编辑器尝试[LYAH](https://repl.it) [“For a few Monads More”](http://learnyouahaskell.com/for-a-few-monads-more)时得到了类似的信息

我将导入更改为：

```
import Control.Monad.Writer 
```

到：

```
import qualified Control.Monad.Trans.Writer.Lazy as W 
```

所以我的代码现在看起来像这样（灵感来自[Kwang 的 Haskell 博客](http://kseo.github.io/posts/2017-01-21-writer-monad.html)）：

```
import Data.Monoid
import qualified Control.Monad.Trans.Writer.Lazy as W

output :: String -> W.Writer [String] ()
output x = W.tell [x]

gcd' :: Int -> Int -> W.Writer [String] Int  
gcd' a b  
    | b == 0 = do  
        output ("Finished with " ++ show a)
        return a  
    | otherwise = do  
        output (show a ++ " mod " ++ show b ++ " = " ++ show (a `mod` b))
        gcd' b (a `mod` b)

main :: IO()
main = mapM_ putStrLn $ snd $ W.runWriter (gcd' 8 3) 
```

[代码目前可在此处运行](https://repl.it/@dowdeswells/MoreMonads)

# git - 让 Cruisecontrol 自动选择新的 git 分支

> ID：11684323
> 
> 赞同：0
> 
> 时间：2012-07-27T08:40:29.813
> 
> 标签：git, continuous-integration, cruisecontrol.net

是否存在一些用于 Cruisecontrol 的插件，使其自动获取新的 git 分支并构建它们？这就是我想做的： [http ://entagen.github.com/jenkins-build-per-branch/](http://entagen.github.com/jenkins-build-per-branch/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:49:59.177

我知道没有插件，但我们自己手动完成了一个流程。我们使用 mercurial 而不是 git，但我们使用这个基本过程来做到这一点：

1.  我们创建了一个在 ChangeGroup 事件触发时触发的自定义可执行文件。看起来在 git 的情况下，您可以使用 post-receive 钩子。

2.  这个可执行文件向 mercurial 询问刚刚推送的更改集，然后解析它们以查看哪些存储库和分支受到了影响。

3.  对于每个新分支，它会找到我们为该存储库设置的模板，使用新分支信息格式化模板并将其添加到文件“ccnethg.config”中。然后它会触及主配置文件 (ccnet.config)，因此巡航控制将重新加载项目。

4.  主配置文件 (ccnet.config) 设置为使用这个方便的 xml 技巧查看此文件：

    这段代码位于 ccnet.config 的开头：

> <!DOCTYPE 巡航控制[
> 
> ```
>  <!ENTITY hgproject SYSTEM "file:ccnethg.config"> 
> ```
> 
> ]>

然后将此部分添加到您定义项目的主配置中

> &hg项目;

如果最后一点没有很好地通过，这里有一个描述它的文档。请参阅拆分 ccnet.config 文件部分：http: [//build.sharpdevelop.net/ccnet/doc/CCNET/Multiple%20Projects.html](http://build.sharpdevelop.net/ccnet/doc/CCNET/Multiple%20Projects.html)

我们将它拆分为一个单独的文件，因为如果文件中的所有内容都是分支构建，则在向文件添加/删除构建时更容易以编程方式处理。

如果您愿意，我可以提供更多详细信息。

# html - 打破在表内但保持行不变的表

> ID：11684325
> 
> 赞同：0
> 
> 时间：2012-07-27T08:40:39.103
> 
> 标签：html, css, pdf-generation, dompdf, page-break

我有以下 HTML> [jsfiddle](http://jsfiddle.net/dPZW4/)。
当我使用 DOMPDF 将其输出为 PDF 时，在第一页上我得到了 2 个第一行，而不是 10 个空页和 2 个包含其余内容的页面。

我怎样才能打破表格，使其分布在正确的页数上？
我试图`page-break-inside: avoid;`在主表上使用，但它破坏了断行。

![在此处输入图像描述](../Images/424d38234931afe7a298b32f740054e2.png)

我希望它像您期望的那样破裂，但我不知道如何...

任何帮助，将不胜感激。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:23:34.670

呈现问题是由于与单个实体相关的已知错误造成的，该实体太大而无法放入页面。在您的情况下，您的产品列表表（大于页面）包含在另一个表中，这会创建一个太大而无法放入页面的表格单元格。请参阅 dompdf 跟踪器，[第 91 期：dompdf 无法在页面之间拆分表格单元格](http://code.google.com/p/dompdf/issues/detail?id=91)。

幸运的是，您的布局使得解决方法相当简单。将产品列表移到容器外。[我更新了你原来的 jsfiddle](http://jsfiddle.net/dPZW4/1/)。

# magento - Magento 1.7 产品图像导入未将图像分配给产品

> ID：11684326
> 
> 赞同：0
> 
> 时间：2012-07-27T08:40:43.333
> 
> 标签：magento, magento-1.7

我已对我的产品进行了 CSV 导入，并使用[此演练](https://web.archive.org/web/20171112042856/http://www.meteorify.com:80/2012/05/importing-product-images-csv-magento-1-7-0-0)上传了每个产品的图像。我的问题是，虽然图像被识别为正确产品的图像，但产品并未将图像保存为要显示的图像（见下面的屏幕截图）。如何使用 CSV 上传（我正在使用数据流配置文件）导入和设置产品图片？

[![](../Images/840bc8c7ee1aeb3fad512dcf866c042f.png)](https://i.stack.imgur.com/vwulE.png)
[（来源：[i.imm.io](http://i.imm.io/y9GJ.png)）]

我的 CSV（针对单个产品）如下所示：

```
sku,image,small_image,thumbnail
TT010,/TT010-350x200.jpg,/TT010-350x200.jpg,/TT010-350x200.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:06:42.377

查看产品时，左上角有一个选项可以查看默认值或查看商店的值。我正在查看的是默认值。当我将此下拉列表更改为商店值时，我看到正在分配图像。

[![](../Images/99282e4dacc83ebd9a33a79731cfe814.png)](https://i.stack.imgur.com/eS6Gh.jpg)
[（来源：[i.imm.io](http://i.imm.io/ya8U.jpeg)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:38:41.807

您的问题似乎是由于图像定位而发生的。

所以请试试这个 -

**sku、图片、small_image、缩略图、_media_image、_media_attribute_id、_media_position、_media_is_disabled

123, /Agent700.jpg, /Agent700.jpg, /Agent700.jpg, /Agent700.jpg, 88, 1, 0**

按照上述规范制作您的 CSV，并根据您的要求更改列，但不要更改 88，即 _media_attribute_id。并为 _media_position 和 _media_is_disabled 保留 1,0。

我已经尝试过了，并且效果很好。

希望它对你也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:26:08.227

我使用了这个步骤并且它有效。

1.  在 database->eav_attribute 中查看“media_gallery”的 ID（在我的版本中是 703）

2.  在 csv 文件中，添加此列：_media_image、_media_attribute_id、_media_position、_media_is_disabled _media_image：与 image 或 small_image 的值相同 _media_attribute_id：是您在步骤 1 中看到的 ID。第一个图像的 _media_position 为：1 并将 _media_is_disabled 设置为 0

3.  在管理员中使用导入工具！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T14:18:28.117

MAGMI 是做到这一点的最佳方式。否则，根据我的经验，进口产品总是令人头疼。

在 MAGMI 中，为了将多个图像导入为媒体库，您只需要：

1) 在 CSV 中定义字段**media_gallery**并像这样填充它：

*/image1.jpg;/image2.png/image3.jpeg*

2) 安装 MAGMI 插件图像属性处理器

3) 将图像存储在您在 MAGMI 设置中定义为“媒体导入”文件夹的文件夹中，然后再导入

更多细节在这里： http: [//sourceforge.net/apps/mediawiki/magmi/index.php ?title=Image_attributes_processor](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Image_attributes_processor)

那些考虑付费扩展以轻松解决此任务的人，看看[这个](http://productuploader.magelynx.com)将 MAGMI 完全集成到 Magento 并允许更方便的功能的扩展。

# asp.net - 在当前页面上查找上一页控件

> ID：11684330
> 
> 赞同：1
> 
> 时间：2012-07-27T08:40:52.223
> 
> 标签：asp.net

> **可能重复：**
> [previouspage.findcontrol 从上一页获取变量](https://stackoverflow.com/questions/984883/previouspage-findcontrol-getting-variable-from-previous-page)

嗨，我是 asp 新手，我正在使用此代码从上一页获取文本框的值，这是我的代码

```
if (!IsPostBack)
        {
            name1 = (TextBox)PreviousPage.FindControl("name");
            Response.Write(name1.Text);
        } 
```

但此代码返回的值`textbox name1=""`

任何人都可以帮助我.....关于这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:51:09.320

您应该将第一页发布到第二页。

```
<asp:TextBox ID="txtLastName" runat="server"></asp:TextBox>
<br /><br />                                     
<asp:Button ID="BtnSubmit" runat="server" PostBackUrl="~/SecondPage.aspx" Text="Go To Second Page" /></div></form> 
```

secondPage.aspx.cs

```
if (Page.PreviousPage != null)
{    
    // Now we call the FindControl method to get the control
    TextBox name1 = (TextBox)Page.PreviousPage.FindControl("name");
    Label1.Text = name1.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:42:39.480

如果您不使用 Server.Transfer，则必须在离开上一页时将控件的值发送到下一页。您可以将其存储在查询字符串中吗？

当您离开前一页时，上一页的状态将清除，因此您必须将要保留的值存储在某处，例如查询字符串、会话..等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:53:25.840

您可以尝试会话将以前的页面文本框值放入会话中，例如..

```
 urtextbox.Text=Session["value"].ToString(); 
```

您在上一页中声明此会话，然后在当前页面中调用它，然后您可以在整个应用程序中使用此会话来获取该文本框值..

# c# - WPF在Visualtree中获取Itemscontrol的项目

> ID：11684336
> 
> 赞同：0
> 
> 时间：2012-07-27T08:41:22.413
> 
> 标签：c#, wpf, itemscontrol

我正在使用附加属性为 wpf 实现 DragAndDrop-manager。它工作得很好。但问题只有一个。要抓住拖动的项目，我正在使用可视化树。例如，我想要 listboxitem，但 originalsource 是 listboxitem 的边框。所以我只是使用我的一种辅助方法来搜索具有 ListBoxItem 类型的父项。如果我发现我得到它的数据并拖动它。

但我不想让我的 DragAndDrop-manager 仅在使用列表框时可用。不，我想在每个 Itemscontrol 上使用它。但是 DataGrid 使用 DataGridRows，listview 使用 ListViewItem ......那么有没有机会在不一次又一次地编写代码的情况下获取项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:35:40.477

好吧，您可以使用此功能（我更喜欢将其设置为静态）：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
    if (depObj != null)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
            if (child != null && child is T)
            {
                yield return (T)child;
            }

            foreach (T childOfChild in FindVisualChildren<T>(child))
            {
                yield return childOfChild;
            }
        }
    }
} 
```

并以某种方式使用它：
即您想在 yourDependencyObjectToSearchIn 容器中找到所有 TextBox 元素

```
foreach (TextBox txtChild in FindVisualChildren<TextBox>(yourDependencyObjectToSearchIn))
{
    // do whatever you want with child of type you were looking for
    // for example:
    txtChild.IsReadOnly = true;
} 
```

如果你想让我给你一些解释，我一起床就做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:04:05.370

您可以使用 FrameworkElement 或 UIElement 来标识控件。

控制继承层次结构..

系统对象

System.Windows.Threading.DispatcherObject

```
System.Windows.DependencyObject

  System.Windows.Media.Visual
    System.Windows.UIElement
      System.Windows.**FrameworkElement**
        System.Windows.Controls.Control
          System.Windows.Controls.ContentControl
            System.Windows.Controls.ListBoxItem
              System.Windows.Controls.**ListViewItem** 
```

系统对象

System.Windows.Threading.DispatcherObject

```
System.Windows.DependencyObject

  System.Windows.Media.Visual

    System.Windows.UIElement
      System.Windows.**FrameworkElement**
        System.Windows.Controls.Control
          System.Windows.Controls.**DataGridRow** 
```

# c++ - 向量上的运算符 += 失败

> ID：11684339
> 
> 赞同：0
> 
> 时间：2012-07-27T08:41:34.457
> 
> 标签：c++, operators, runtime-error

```
template <class ElementType,int Dimension=1>  
class Vector : public vector<ElementType> {  
    public:

    Vector & operator+= (const Vector & a){  
        cout << " a " << a << endl;  
        transform (this->begin(), this->end(), a.begin(), this->begin(), plus<ElementType>());  
        return *this;  
    };  

  friend ostream & operator<< (ostream & stream, Vector t) {
      stream << "(";
      copy (t.begin(), t.end()-1, ostream_iterator<ElementType>(stream,","));
      return stream << *(t.end()-1) << ")";
  };

}; 
```

1）在运行时我收到错误消息：

```
terminate called after throwing an instance of 'std::bad_alloc'  
what():  std::bad_alloc 
```

我发现这条消息是由`cout << " a " << a << endl;`

2) 如果该`cout << .....`操作未成功完成，但会添加一些垃圾`this`而不是 a 的内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:03:34.110

为此目的存在 std::valarray 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:07:36.073

此输出运算符

```
friend ostream & operator<< (ostream & stream, Vector t) 
```

可能会导致 a `bad_alloc`，因为它复制了 Vector 参数。

你可以试试这个

```
friend ostream & operator<< (ostream & stream, const Vector& t) 
```

为了避免这种情况。

为了避免空向量没有的问题，`end()-1`您可能希望将输出放在`if (!t.empty())`.

最后这个表达式`*(t.end()-1)`可以简化为`t.back()`。

# sql-server-2008 - 使用 SQL Server 存储过程搜索多个关键字

> ID：11684342
> 
> 赞同：1
> 
> 时间：2012-07-27T08:41:39.480
> 
> 标签：sql-server-2008, stored-procedures, keyword

我将使用存储过程搜索我的数据库 (SQL Server 2008)。我的用户可以在文本框中输入关键字（`,`例如，可以使用分隔关键字）。

目前我正在使用这样的东西：

```
keyword like N"%'+@SearchQuery%'%" 
```

（`keyword`是`nvarchar`我表中的一列，`@SearchQuery`是我的存储过程的输入）

它工作得很好，但如果用户输入几个关键字怎么办：苹果、橙子、香蕉

我应该限制关键字的数量吗？如果我有多个关键字，我应该如何编写存储过程？我应该如何将我的用户输入传递给存储过程？我应该作为一个完整的短语传递`apple, orange, banana`，然后我应该在我的存储过程中解析它们，或者我应该分开我的关键字并发送 3 个关键字？如何查询这 3 个关键字？一个for循环？

执行此类查询的最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:51:47.353

解析应用程序中的关键字。SQL 不是字符串操作的最佳场所。

将关键字作为表值参数发送（即：[http](http://www.mssqltips.com/sqlservertip/2112/table-value-parameters-in-sql-server-2008-and-net-c/) : //www.mssqltips.com/sqlservertip/2112/table-value-parameters-in-sql-server-2008-and-net-c/）然后你t 限于固定数量的关键字。

将通配符添加到存储过程中的参数

```
update @keywords set keyword = '%'+keyword+'%' 
```

通过将源数据连接到此表来过滤结果

例如：

```
SELECT result
FROM source 
    INNER JOIN @keywords keywords 
         ON source.keyword LIKE keywords.keyword 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:53:33.127

这取决于： * 你的数据库有多大。* 用户搜索某事的频率。* 用户结果如何精确除外。

`LIKE`不是性能守护进程，尤其是从`%`.

也许您应该尝试[完整的搜索文本](http://msdn.microsoft.com/en-us/library/ms142571.aspx)？

如果你想留下来`LIKE`（它只适用于小桌子）我会尝试这样的事情：

1.  按字符拆分输入（按照[podiluska](https://stackoverflow.com/a/11684503/1483)`,`的建议将它们插入表中是个好主意）。
2.  `UNION`为每个令牌和所有结果构建查询。或者为每个令牌循环运行它并将结果插入临时表。

如果您需要一些精确的结果（即只有记录匹配所有 3 个单词），您可以从上面构建的临时结果中选择最匹配的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T09:01:17.370

您可以使用 CTE 在临时表中拆分关键字字符串，然后随意使用它。关键字列表甚至可以有数字或任何字符，如 %$<> 或你想要的，只要记住逗号是字符串分隔符

```
DECLARE @CommaSeparatorString VARCHAR(MAX),
        @CommaSeparatorXML XML
DECLARE @handle INT
SELECT @CommaSeparatorString = 'apple,orange,banana'
SELECT @CommaSeparatorString = REPLACE(REPLACE(@CommaSeparatorString,'<','$^%'),'>','%^$')
SELECT @CommaSeparatorXML   =   CAST('<ROOT><i>' + REPLACE(@CommaSeparatorString, ',', '</i><i>') + '</i></ROOT>' AS XML) 

SELECT REPLACE(REPLACE(c.value('.', 'VARCHAR(100)'),'$^%','<'),'%^$','>') AS ID
  FROM (SELECT @CommaSeparatorXML AS CommaXML) a
 CROSS APPLY CommaXML.nodes('//i') x(c) 
```

结果：

```
 ID
------
apple
orange
banana 
```

# android - 如何在 Robotium 中从 Android 键盘（虚拟）键入字符

> ID：11684346
> 
> 赞同：1
> 
> 时间：2012-07-27T08:41:48.563
> 
> 标签：android, unit-testing, robotium

请给出除solo.clickOnText() 之外的任何建议。它不起作用。

而且我也不想使用 enterText() ，因为这不是一个好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:52:06.543

[1] 在文本框中输入“a”

[2] 独奏.sendKey(97); // 这里 97 是字符“a”的 ascii 键码。

这里我代表一个很好的例子。

```
public void testAutomation_typetext()
{

    solo.clickOnEditText(0);
    ch_array = "ashtemp123@gmail.com".toCharArray();
    for(int i=0;i<ch_array.length;i++) 
    {
      solo.sendKey( fun_get_android_keycode(ch_array[i]) );
    }
}

  public int fun_get_android_keycode(char ch)
  {  
       int keycode = ch;//String.valueOf(ch).codePointAt(0);
       Log.v(TAG,"in fun : "+ch+" : "+keycode + "");

       if(keycode>=97 && keycode <=122)
       {
           Log.v(TAG,"atoz : "+ch+" : "+keycode + " : " + (keycode-68));
           return keycode-68;   
       }
       else if(keycode>=65 && keycode <=90)
       {
           Log.v(TAG,"atoz : "+ch+" : "+keycode + " : " + (keycode-36));
           return keycode-36;   
       }
       else if(keycode>=48 && keycode <=57)
       {
           Log.v(TAG,"0to9"+ch+" : "+keycode + " : " + (keycode-41));
           return keycode-41;   
       }
       else if(keycode==64)
       {
           Log.v(TAG,"@"+ch+" : "+keycode + " : " + "77");
           return KeyEvent.KEYCODE_AT;
       }
       else if(ch=='.')
       {
           Log.v(TAG,"DOT "+ch+" : "+keycode + " : " + "158");
           return KeyEvent.KEYCODE_PERIOD;
       }
       else if(ch==',')
       {
           Log.v(TAG,"comma "+ch+" : "+keycode + " : " + "55");
           return KeyEvent.KEYCODE_COMMA;
       }
       return 62;
} 
```

我希望这将有助于您最好的自动化测试用例。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:53:51.940

你暂时不能这样做。请参阅[http://code.google.com/p/robotium/wiki/QuestionsAndAnswers](http://code.google.com/p/robotium/wiki/QuestionsAndAnswers)并查找键盘。

# javascript - 放下时使可拖动的对齐方式向左

> ID：11684347
> 
> 赞同：8
> 
> 时间：2012-07-27T08:41:57.893
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

******编辑* *******

 **我目前正在创建一个拖放拼写游戏，用户将字母拖到突出显示的单词上以拼写它并显示后面的图像。

当一个单词以“.spellword”样式突出显示时，它指示用户拼写该单词。当用户将字母拖到该区域时，他/她可以将字母拖到 3 个字母空间中的任何位置，但我需要将它们从“左”放到“右”以确保单词拼写正确.

基本上，当一个字母被放到单词上时，我需要它向左对齐（单词的第一个字母），然后下一个被丢弃的字母对齐单词的下一个字母等......所以它的拼写顺序正确

**我能做些什么来确保这一点？**

可拖放的脚本是...

```
$('.drag').draggable({
helper: 'clone',
snap: '.drop',
grid: [62, 62],
revert: 'invalid',
snapMode: 'corner',
start: function(){
    var validDrop = $('.drop-box.spellword');
    validDrop.addClass('drop');
    makeDroppables();
}
});

function makeDroppables(){   
$('.drop').droppable({
drop: function(event, ui) {
    word = $(this).data('word');
    guesses[word].push($(ui.draggable).attr('data-letter'));

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass('wordglow2');

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    }
},

activate: function(event, ui) {
    word = $(this).data('word');

    // try to remove the class
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
}

});

} 
```

可拖动的 HTML 是....

```
<div class="squares">

        <div id="drag1" class="drag ui-widget-content box-style2" tabindex="0" data-letter="a">
        <p>a</p>
        </div>

        <div id="drag2" class="drag ui-widget-content box-style" tabindex="0" data-letter="b">
        <p>b</p>
        </div>

        <div id="drag3" class="drag ui-widget-content box-style" tabindex="0" data-letter="c">
        <p>c</p>
        </div>

        <div id="drag4" class="drag ui-widget-content box-style" tabindex="0" data-letter="d">
        <p>d</p>
        </div>

        <div id="drag5" class="drag ui-widget-content box-style2" tabindex="0" data-letter="e">
        <p>e</p>
        </div>

        <div id="drag6" class="drag ui-widget-content box-style" tabindex="0" data-letter="f">
        <p>f</p>
        </div>

        <div id="drag7" class="drag ui-widget-content box-style" tabindex="0" data-letter="g">
        <p>g</p>
        </div>

        <div id="drag8" class="drag ui-widget-content box-style" tabindex="0" data-letter="h">
        <p>h</p>
        </div>

        <div id="drag9" class="drag ui-widget-content box-style2" tabindex="0" data-letter="i">
        <p>i</p>
        </div>

         <div id="drag10" class="drag ui-widget-content box-style" tabindex="0" data-letter="j">
        <p>j</p>
        </div>

        <div id="drag11" class="drag ui-widget-content box-style" tabindex="0" data-letter="k">
        <p>k</p>
        </div>

        <div id="drag12" class="drag ui-widget-content box-style" tabindex="0" data-letter="l">
        <p>l</p>
        </div>

        <div id="drag13" class="drag ui-widget-content box-style" tabindex="0" data-letter="m">
        <p>m</p>
        </div>

        <div id="drag14" class="drag ui-widget-content box-style" tabindex="0" data-letter="n">
        <p>n</p>
        </div>

        <div id="drag15" class="drag ui-widget-content box-style2" tabindex="0" data-letter="o">
        <p>o</p>
        </div>

        <div id="drag16" class="drag ui-widget-content box-style" tabindex="0" data-letter="p">
        <p>p</p>
        </div>

        <div id="drag17" class="drag ui-widget-content box-style" tabindex="0" data-letter="r">
        <p>r</p>
        </div>

        <div id="drag18" class="drag ui-widget-content box-style" tabindex="0" data-letter="s">
        <p>s</p>
        </div>

        <div id="drag19" class="drag ui-widget-content box-style" tabindex="0" data-letter="t">
        <p>t</p>
        </div>

        <div id="drag20" class="drag ui-widget-content box-style2" tabindex="0" data-letter="u">
        <p>u</p>
        </div>

     </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:36:26.387

您可以将 sortable ui 与 draggable 结合使用。然后`float:left`正如 user1555320 建议的那样......像这样：

```
$('.drop').sortable({revert:true, axis:'x'});

$('.drag').draggable({
connectToSortable:'.drop',
helper: 'clone',
snap: '.drop',
grid: [60, 60],
revert: function(droppable) {
    if (droppable === false) {
        return true;
    }

    else {

        return false;
    }
}
}); 
```

然后你的CSS

```
.drop div {
   float:left;           
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T08:09:52.437

Anz & malificent 的答案都很好，但是确保将字母排序为“最后一个原位”并将位置设置为相对将是一个更好的解决方案，因为它可以避免 CSS 中的一些跌落坑应该您想应用进一步的样式。

```
#mainlist {
    width: 20%;
    position: relative;
    padding: 2px;
    max-height: 65px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T07:11:44.393

您可以尝试使用 CSS float 来获得 DIV 上的捕捉效果。可能像下面这样。

```
#mainlist {
    width: 20%;
    float: left;
    padding: 2px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T00:19:38.830

就个人而言，我不喜欢使用 CSS 来实现这种效果的想法。为什么不让它好像字母实际上是放在单词的第一个空白处呢？这似乎达到了预期的效果：

[http://jsfiddle.net/nickaknudson/sYJwm/](http://jsfiddle.net/nickaknudson/sYJwm/)

```
$('.drop').droppable({
...
drop: function(event, ui) {
    word = $(this).data('word');
    //change context from this to that
    that = $('.spellword')[guesses[word].length];
    guesses[word].push($(ui.draggable).attr('data-letter'));

    if ($(that).text() == $(ui.draggable).text().trim()) {

        $(that).addClass('wordglow3');
    } else {
        $(that).addClass('wordglow');
    }

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass('wordglow2');

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    }
},
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:26:58.857

我认为你只需要一个 float:left 属性在你的 CSS 中，以便 div 在容器中以正确的顺序排列

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-28T19:18:16.123

我没有完全理解你的问题，但只是看看你的代码，这似乎是我会改变的：

```
revert: function(droppable) {
    return !droppable;
}); 
```

如果您的意思是您需要访问第一个元素，然后是第二个元素，然后是第三个元素，依此类推，您可以使用[伪选择器执行此操作](http://www.w3.org/TR/css3-selectors/#nth-child-pseudo)**

# javascript - 在扩展函数中使用魔法 e

> ID：11684348
> 
> 赞同：0
> 
> 时间：2012-07-27T08:42:00.823
> 
> 标签：javascript, javascript-events

我有一个基本的 Drop 事件处理程序，如下所示：

```
function Drop(e){
    e.preventDefault();
    var data=e.dataTransfer.getData("Text");
    var child = $('[target_id="'+data+'"]').get(0);
    e.target.appendChild(child);
}
function DropHandler(){}
DropHandler.prototype={
        ...
    Drop : Drop
} 
```

创建一个新对象并扩展基本的放置处理程序：

```
function AdminDropHandler(){}
//Extend the DropHandler
extend(AdminDropHandler,DropHandler);
//Override Drop method in AdminDropHandler
AdminDropHandler.prototype.Drop=function(){
    DropHandler.prototype.Drop.apply(this,arguments);
    var parent_id = e.target.id;// not defined error
    ...
} 
```

它可以扩展 DropHandler 的功能，但我使用的 e 似乎丢失了。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:45:54.830

您尚未`e`在任何地方的函数中定义。尝试定义它：

```
AdminDropHandler.prototype.Drop = function(e) {
    DropHandler.prototype.Drop.apply(this, arguments);
    var parent_id = e.target.id; // should work now
}; 
```

您也可以这样做，但不建议这样做，因为形式参数可以很好地完成这项工作：

```
AdminDropHandler.prototype.Drop = function() {
    var e = arguments[0];
    DropHandler.prototype.Drop.apply(this, arguments);
    var parent_id = e.target.id; // should work now
}; 
```

# ruby-on-rails - 如何将“选择一个...”添加到 options_from_collection_for_select

> ID：11684352
> 
> 赞同：24
> 
> 时间：2012-07-27T08:42:12.567
> 
> 标签：ruby-on-rails

下面是我的选择表单，它可以正常工作。

当用户加载页面时，它应显示初始“选择一个...”，值为 null 或“”。

我试图将它添加到对象中，但无法并且很高兴获得帮助！

非常感谢！

* * *

**在我看来：**

```
= select_tag 'incident[fault_id]' , options_from_collection_for_select( Fault.all, :id, :label) 
```

我使用 Rails 3.2 和 HAML

* * *

**更新：**

偶然我发现了一些非常甜蜜的东西：

```
include_blank: 'select one...' 
```

或完全

```
= f.collection_select :fault_id, Fault.order(:label), :id, :label, include_blank: 'select one...' 
```

万一有人也喜欢...

参考：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-27T09:09:37.330

[options_from_collection_for_select](http://apidock.com/rails/v3.2.3/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select)返回一个选项标记字符串，这些选项标记已通过迭代集合并将调用结果分配给 value_method 作为选项值和 text_method 作为选项文本来编译。

所以只需在它前面加上没有值的“select_one”选项字符串：

```
 = select_tag 'incident[fault_id]', content_tag(:option,'select one...',:value=>"")+options_from_collection_for_select( Fault.all, :id, :label) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-10-03T21:46:27.457

`:prompt``select_tag` *不是*`options_from_collect_for_select`这样的属性

```
select_tag("sales_rep[manufacturer_id]", options_from_collection_for_select(@manufacturers, "id", "name"), { :prompt => 'Select Manufacturer' }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T13:14:33.257

您可以尝试以下方法：

```
collection_select(:sales_rep, :manufacturer_id, @manufacturers, :id, :name, { :prompt => 'Select Manufacturer' }) 
```

# python - Python MySQL连接参数错误

> ID：11684354
> 
> 赞同：1
> 
> 时间：2012-07-27T08:42:24.693
> 
> 标签：python, mysql, arguments, database-connection, mysql-python

我正在尝试编写一个简单的程序来连接 MySQL 并执行一些操作

```
host = '10.0.106.40'
user = 'ddddd'
port = 3306
passwd = 'DDDDDD'
db = 'bbbbbbb'

''' Creates a MySQL connection and returns the cursor '''
def create_connection():
    connection = mysql.connect(host, user, passwd, db, port)
    cursor = connection.cursor()
    return connection, cursor

''' Close the connection '''
def close_connection(cursor, connection):
    cursor.close()
    connection.commit()
    connection.close() 
```

以上功能是我的骨架。现在，当我尝试这样做时

```
for user in users:
    connection, cursor = create_connection()
    ...
    close_connection(cursor, connection) 
```

我收到这个错误

```
TypeError: connect() argument 2 must be string, not long 
```

但是，当我这样做时

```
connection, cursor = create_connection()

for user in users:    
    ...

close_connection(cursor, connection) 
```

代码运行得很好！我不确定，但为什么会这样？我真的很想运行早期版本的代码，因为后者对我来说太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:28:23.690

我的猜测是`user`被传递给`create_connection()`来自该行

```
for user in users: 
```

这就是它在循环之外工作的原因，因为它正在访问正确的`user`，即具有 String 数据类型的那个。

另一种方法是使用`while`循环或将行更改为：

```
for u in users: 
```

否则你应该按照warwaruk的建议去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:47:34.113

`users`是一个整数列表？

这就是为什么处理全局变量不好的原因。最好将一些参数传递给`create_connection`而不是从全局变量中获取值：

```
def create_connection(host, user, passwd, db, port):
    connection = mysql.connect(host, user, passwd, db, port)
    cursor = connection.cursor()
    return connection, cursor 
```

# css - 徽标边距可点击

> ID：11684355
> 
> 赞同：0
> 
> 时间：2012-07-27T08:42:26.753
> 
> 标签：css, image

我希望我的徽标与中心对齐，并且可以在没有 html`img`标记的情况下在边缘之外单击 - 使用 css`background-image`或删除右键单击 > 查看图像的东西。

[http://jsfiddle.net/qhU5u/](http://jsfiddle.net/qhU5u/)

谢谢。

**解决了**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:46:41.433

你真的应该使用`img`标签。但是，如果您出于某种原因不想这样做：

[http://jsfiddle.net/qhU5u/1/](http://jsfiddle.net/qhU5u/1/)

我已经完全删除了 div 并只使用 tha`a`标签来显示徽标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:45:23.177

只需使用一个`img`元素。这对于可访问性目的要好得多。

例如，如果有人在未启用 CSS 的情况下查看您的页面，他们将能够看到您的徽标，如果它是. `img`，但如果它是`background-image`.

* * *

但是，如果您想使用 a `background-image`，我建议您使用`div`与您的图像相匹配的固定高度和宽度的 a 。

然后，在 中放置一个`a`元素，`div`使其具有与 相同的尺寸`div`。

`div`您在 an中嵌套的方式`a`是无效的 HTML。

见演示：http: [//jsfiddle.net/qhU5u/2/](http://jsfiddle.net/qhU5u/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:52:29.423

试试这个例子，看看它是否是你要找的：

[http://jsfiddle.net/qhU5u/8/](http://jsfiddle.net/qhU5u/8/)

# android - OpenCV for android 示例程序显示错误

> ID：11684356
> 
> 赞同：5
> 
> 时间：2012-07-27T08:42:28.437
> 
> 标签：android, opencv, android-ndk

我已经下载了适用于 android 的 OpenCV 项目，并且随附的示例项目包含几个错误.. 只有包含 NDK 代码的项目有错误.. 问题是 C++ 代码显示了很多错误.. .jstring之类的关键字无法识别..请帮我解决这个问题...提前感谢您的宝贵时间

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <vector>

using namespace std;
using namespace cv;

extern "C" {
JNIEXPORT void JNICALL Java_org_opencv_samples_tutorial3_Sample3View_FindFeatures(JNIEnv* env, jobject, jint width, jint height, jbyteArray yuv, jintArray bgra)
{
    jbyte* _yuv  = env->GetByteArrayElements(yuv, 0);
    jint*  _bgra = env->GetIntArrayElements(bgra, 0);

    Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv);
    Mat mbgra(height, width, CV_8UC4, (unsigned char *)_bgra);
    Mat mgray(height, width, CV_8UC1, (unsigned char *)_yuv);

    //Please make attention about BGRA byte order
    //ARGB stored in java as int array becomes BGRA at native level
    cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4);

    vector<KeyPoint> v;

    FastFeatureDetector detector(50);
    detector.detect(mgray, v);
    for( size_t i = 0; i < v.size(); i++ )
        circle(mbgra, Point(v[i].pt.x, v[i].pt.y), 10, Scalar(0,0,255,255));

    env->ReleaseIntArrayElements(bgra, _bgra, 0);
    env->ReleaseByteArrayElements(yuv, _yuv, 0);
}

} 
```

错误..

```
Unresolved inclusion: <vector>
Symbol 'std' could not be resolved 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:21:31.313

@Nolan 的回答和@Michael 的评论为我解决了这个问题。以下是合并的步骤：

1.  在 Eclipse 中，右键单击您的项目并选择属性（这是在 mac btw 上）
2.  展开**C/C++ 常规**
3.  选择**路径和符号**
4.  在**语言**下选择**GNU C++**
5.  **应在包含目录**下定义以下包含

     **```
    ${NDKROOT}/platforms/android-9/arch-arm/usr/include
    ${ProjDirPath}/../../sdk/native/jni/include
    ${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.4.3/libs/armeabi-v7a/include
    ${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.4.3/include 
    ```** 
***   确保将 ${NDKROOT} 定义为环境变量。如果没有继续，请在**C/C++ Build - Environment下添加它**

    *   现在继续并通过右键单击您的项目并选择索引来**重建索引 - 重建****

 **干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:45:24.193

我遇到了同样的问题，并且能够通过使用以下包含路径来解决在遵循 OpenCV 教程时遇到的这些错误和其他错误：

```
${NDKROOT}/platforms/android-9/arch-arm/usr/include
${ProjDirPath}/../../sdk/native/jni/include
${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.4.3/libs/armeabi-v7a/include
${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.4.3/include 
```**

# ios - NSFileManager removeItemAtPath：错误：实际上并没有释放磁盘空间

> ID：11684363
> 
> 赞同：1
> 
> 时间：2012-07-27T08:42:48.680
> 
> 标签：ios, nsfilemanager

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSURL* url = [[fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject];
NSString* directory = [url path];
NSString* filePath = [directory stringByAppendingPathComponent:FILE_NAME];
if ([fileManager fileExistsAtPath:filePath])
{
    [fileManager removeItemAtPath:filePath error:nil];
} 
```

这是我的代码。执行时，文件被删除，但空间仍然被占用。这是将某些内容存储到文件中的代码。

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSURL* url = [[fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject];
NSString* directory = [url path];
NSString* filePath = [directory stringByAppendingPathComponent:FILE_NAME];
NSArray* oldArray = nil;
if ([fileManager fileExistsAtPath:filePath])
{
    oldArray = [[NSArray alloc] initWithContentsOfFile:filePath];
    [fileManager removeItemAtPath:filePath error:nil];
}
NSMutableArray* mergeArray = [[NSMutableArray alloc] initWithArray:arrayOfPersons];
[mergeArray addObjectsFromArray:oldArray];
if ( [mergeArray writeToFile:filePath atomically:YES]) NSLog(@"Written"); 
```

顺便说一句，存储一个只有 1 个对象的数组（一个 NSDictionary 有 2 个键）需要 1 MB。有没有更便宜的存储方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:27:54.273

你需要对你的实验更加小心。unix 文件系统对文件做了很多事情。事实上，当你“删除”一个文件时，你所做的只是将它从文件系统中取消链接。如果该文件使用另一个文件描述符打开，则在操作系统的任何位置，它将保持打开状态。

此外，还有很多优化可以重用文件节点。仅仅因为您删除了一个文件，并不意味着空间会自动返回。它可能出于多种原因在您的应用程序中“保留”，以供其他文件使用。在文件系统需要它之前将其返回给文件系统是没有意义的。

`settings->general->usage`是对文件系统利用率的非常粗略的衡量。更好的测量方法是直接访问文件和文件系统的属性。

使用您的代码作为基础，请考虑以下事项：

```
- (NSString*)workingDirectory {
    NSFileManager* fileManager = [NSFileManager defaultManager];
    NSURL* url = [[fileManager URLsForDirectory:NSCachesDirectory
                                      inDomains:NSUserDomainMask] lastObject];
    return [url path];
}

- (NSString*)filePath {
    return [[self workingDirectory] stringByAppendingPathComponent:FILE_NAME];
} 
```

现在，您可以看到整个文件系统的所有属性：

```
NSDictionary *attributes = [[NSFileManager defaultManager]
    attributesOfFileSystemForPath:[self workingDirectory] error:0];
NSLog(@"file system attributes: %@", attributes); 
```

以及带有此特定文件的那些：

```
NSDictionary *attributes = [[NSFileManager defaultManager]
    attributesOfItemAtPath:[self filePath] error:0];
NSLog(@"file attributes: %@", attributes); 
```

注意`NSFileSystemFreeSize`和`NSFileSize`。

运行您的应用程序，并转储这两个值。创建您的文件，然后再次转储它们。删除文件，然后再次转储它们。

毕竟`NSFileSystemFreeSize`，即使在删除之后，您实际上也可能会看到 go UP。请记住，系统本身正在创建临时文件，并且可能正在缓存这些文件系统节点以供将来使用。

如果您退出所有其他应用程序，您可以获得更一致的结果。然后，退出你的（双击电源按钮，X 所有正在运行的应用程序）。在执行此操作之前删除文件。

1.  现在，在文件不存在的情况下启动您的应用程序。

2.  转储文件系统数据。

3.  创建文件。

4.  转储文件系统数据。

5.  转储文件数据。

您应该看到文件占用了大约 200-250 字节，并且文件系统可用大小应该下降 8192。

1.  删除文件。

2.  转储文件系统数据。可能至少与删除文件之前一样大。

3.  退出应用程序（不在 XCode 中——双击电源，X 应用程序）。

4.  运行应用程序。

5.  转储文件系统数据。您应该看到数据回到您之前开始时的状态。

* * *

总而言之，虽然看起来文件系统没有发布数据，但实际上已经发布了，但是您用来查询的工具可能只是不知道文件系统的详细信息。

另请注意，当应用程序运行时，它将使用大量文件系统资源来处理您未明确执行的操作。

我希望这是有道理的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:23:29.253

您删除文件的代码看起来是正确的，但是当您不需要时，您正在 URL 和路径之间切换。当您尝试删除文件时，您还应该检查错误，以便了解它为什么不起作用。尝试这个：

```
 NSFileManager   *fileManager    = [NSFileManager defaultManager];
    NSArray         *directoryURLs  = [fileManager URLsForDirectory:NSCachesDirectory 
                                                          inDomains:NSUserDomainMask];
    NSURL           *directoryURL   = [directoryURLs objectAtIndex:0];
    NSURL           *fileURL        = [directoryURL URLByAppendingPathComponent:FILE_NAME];
    if (!fileURL)
    {
        NSLog(@"Could not create URL for file.");
        return;
    }

    NSError *err = nil;
    if (![fileURL checkResourceIsReachableAndReturnError:&err])
    {
        NSLog(@"File is not reachable.\n"
               "Error: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    err = nil;
    [fileManager removeItemAtURL:fileURL error:&err];
    if (err)
    {
        NSLog(@"Unable to delete existing file.\n"
              "Error: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:30:52.303

可能是 ˚FILE_NAME` 的长度大于或等于 300 个字符？前段时间这让我遇到了与 NSFileManager 类似的问题......

# actionscript-3 - 如何从此类中调用其中一个函数？

> ID：11684364
> 
> 赞同：0
> 
> 时间：2012-07-27T08:42:51.963
> 
> 标签：actionscript-3, flash, class

我想从 Main.as 的这个类中调用函数“ **nextMenu** ”和“ **prevMenu** ”但我收到错误***1136：参数数量不正确。预期 1.*** 可以帮我看看我在代码上遗漏了什么吗？

**CategoryScroller.as**

```
package com.theflashfactor.carouselStackGallery.categoryMenu
{
    import com.greensock.TweenMax;
    import com.greensock.easing.Quint;
    import com.theflashfactor.utils.Ref;

    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.geom.Rectangle;

    /**
     * Scroller to switch view for category item if there are more than visibleItem available 
     * @author Rimmon Trieu
     */
    public class CategoryScroller extends Sprite
    {
        private var trackLength:int = 400;
        private var scrubber:Sprite;
        private var track:Shape;
        private var categoryMenu:CategoryMenu;
        private var trans:Sprite;
        private var center:Number;

        public function CategoryScroller(categoryMenu:CategoryMenu)
        {
            this.categoryMenu = categoryMenu;
            buttonMode = true;
            initialize();
        }

        /**
         * Draw elemnt scrubber and track 
         */
        private function initialize():void
        {
            trans = new Sprite();
            trans.graphics.beginFill(0, 0);
            trans.graphics.drawRect(0, 0, trackLength, 13);
            trans.graphics.endFill();
            trans.addEventListener(MouseEvent.MOUSE_DOWN, transMouseDown, false, 0, true);
            addChild(trans);

            // Draw track
            var color:uint = uint(Ref.getInstance().getRef("categoryCircleColor"));
            track = new Shape();
            track.graphics.lineStyle(1, color);
            track.graphics.lineTo(trackLength, 0);
            track.y = 6;
            addChild(track);

            // Draw scrubber
            scrubber = new Sprite();
            scrubber.graphics.beginFill(color);
            scrubber.graphics.drawRect(0, 0, 80, 13);
            scrubber.graphics.endFill();
            center = (trackLength - scrubber.width) >> 1; 
            scrubber.x = center;
            addChild(scrubber);

            // Add dragging functionality
            scrubber.addEventListener(MouseEvent.MOUSE_DOWN, scrubberMouseDown,false,0,true);
        }

        private function transMouseDown(event:MouseEvent):void
        {
            stage.addEventListener(MouseEvent.MOUSE_UP, stageMouseUpHandler,false,0,true);
            TweenMax.killTweensOf(scrubber);
            categoryMenu.preTransition();
            if (mouseX > width - scrubber.width) scrubber.x = (width - scrubber.width); else scrubber.x = mouseX;
        }

        /*private function transMouseUp(event:MouseEvent):void
        {
            stage.removeEventListener(MouseEvent.MOUSE_UP, stageMouseUpHandler);
            checkPosition();
        }*/

        private function scrubberMouseDown(event:MouseEvent):void
        {
            event.stopImmediatePropagation();
            TweenMax.killTweensOf(scrubber);
            scrubber.startDrag(false, new Rectangle(0, 0, trackLength - scrubber.width, 0));
            stage.addEventListener(MouseEvent.MOUSE_UP, stageMouseUpHandler,false,0,true);
            categoryMenu.preTransition();
        }

        private function stageMouseUpHandler(event:MouseEvent):void
        {
            stage.removeEventListener(MouseEvent.MOUSE_UP, stageMouseUpHandler);
            scrubber.stopDrag();
            checkPosition();
        }

        private function checkPosition():void
        {
            var targetX:Number = (trackLength - scrubber.width) >> 1; 
            if (scrubber.x > (center + 20)) categoryMenu.postTransition(1); 
                else
            if (scrubber.x < (center - 20)) categoryMenu.postTransition(-1);
                else 
                categoryMenu.postTransition(0);
            TweenMax.to(scrubber, .5, {x:targetX, ease:Quint.easeOut, overwrite:1});
        }

        public function nextMenu():void
        {
            categoryMenu.postTransition(1);
        }

        public function prevMenu():void
        {
            categoryMenu.postTransition(-1);
        }
    }
} 
```

我在我的 Main.as 中插入了下面的代码来调用我无法成功的函数。

```
import com.theflashfactor.carouselStackGallery.categoryMenu.CategoryScroller;
private var categoryScroller:CategoryScroller = new CategoryScroller();
categoryScroller.nextMenu(); 
```

**主文件**

```
package 
{
    import com.theflashfactor.carouselStackGallery.CarouselStackGallery;
    import com.theflashfactor.carouselStackGallery.categoryMenu.CategoryMenu;
    import com.theflashfactor.carouselStackGallery.categoryMenu.CategoryScroller;

    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.geom.Rectangle;

    import org.casalib.events.LoadEvent;
    import org.casalib.load.DataLoad;

    /**
     * Main document class 
     * @author Rimmon Trieu
     */
    [SWF(frameRate="60", backgroundColor="0", pageTitle="3D Carousel Stack Gallery")]
    public class Main extends Sprite 
    {
        private var xmlPath:String = "../xml/Main.xml";
        private var ts3:Sprite = new Sprite;
        private var categoryMenu:CategoryMenu = new CategoryMenu();
        private var categoryScroller:CategoryScroller = new CategoryScroller();

        public function Main()
        {
            stage.align = StageAlign.TOP_LEFT;
            stage.scaleMode = StageScaleMode.NO_SCALE;
            addEventListener(Event.ADDED_TO_STAGE, addToStage);
        }

        private function addToStage(event:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, addToStage);
            var xmlLoad:DataLoad = new DataLoad(xmlPath);
            xmlLoad.addEventListener(LoadEvent.COMPLETE, xmlLoaded);
            xmlLoad.start();

            ts3.graphics.beginFill(0x555555,1);
            ts3.graphics.drawCircle(0, 0, 50);
            ts3.graphics.endFill();
        }

        private function xmlLoaded(event:LoadEvent):void
        {
            event.target.removeEventListener(LoadEvent.COMPLETE, xmlLoaded);
            opaqueBackground = uint(event.target.dataAsXml.settings.@backgroundColor);
            var gallery:CarouselStackGallery = new CarouselStackGallery(event.target.dataAsXml);
            addChild(gallery);

            addChild(ts3);
            ts3.addEventListener(MouseEvent.MOUSE_DOWN, ts3MouseDown,false,0,true);
        }

        private function ts3MouseDown(event:MouseEvent):void
        {
            categoryScroller.nextMenu();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:18:52.710

如定义：

```
public function CategoryScroller(categoryMenu:CategoryMenu)
{
  ... 
```

类构造函数不应该期待一个参数吗？

```
private var categoryScroller:CategoryScroller = new CategoryScroller(); 
```

# java - 组合框 FXML 默认值

> ID：11684366
> 
> 赞同：19
> 
> 时间：2012-07-27T08:42:57.437
> 
> 标签：java, javafx, combobox, javafx-2, fxml

如何在`ComboBox`使用 FXML 中设置默认值？

```
<ComboBox fx:id="cbo_Bacteriologie_Aesculine" prefHeight="21.0" prefWidth="105.0" GridPane.columnIndex="1" GridPane.rowIndex="0">
    <items>
        <FXCollections fx:factory="observableArrayList">
            <String fx:value="NVT" />
            <String fx:value="Bezig" />
            <String fx:value="Positief" />
            <String fx:value="Negatief" />
        </FXCollections>
    </items>
</ComboBox> 
```

我想`NVT`被默认选中。我尝试添加`selected="selected"`等，但似乎找不到正确的语法。

是否可以使用 Scene Builder 编辑列出的项目？我似乎找不到它。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-21T10:11:56.720

用这个：

```
<ComboBox>
    <items>
        <FXCollections fx:factory="observableArrayList">
            <String fx:value="NVT" />
            <String fx:value="Bezig" />
            <String fx:value="Positief" />
            <String fx:value="Negatief" />
        </FXCollections>
    </items>
    <value>
        <String fx:value="NVT" />
    </value>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T14:36:45.083

我认为这在 FXML 中是不可能的。您将需要在控制器中的组件初始化中执行此操作，例如使用以下行`cbo_Bacteriologie_Aesculine.getSelectionModel().setSelectedIndex(1);`来选择元素 Bezig。

但是，如果您找到一种在 FXML 中执行此操作的方法，我很感兴趣。

编辑：在 FXML 中是可能的。您可以在 Guedolino 的回答 ( [https://stackoverflow.com/a/14436371/1344424](https://stackoverflow.com/a/14436371/1344424) ) 中看到它，这应该成为这个问题的正确答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T15:21:55.727

第一个建议的方法出现了一个奇怪的错误

> setSelectedItem(T) 在 SelectionModel 中具有受保护的访问权限，其中 T 是类型变量： T extends Object 在类 SelectionModel 中声明

为了我

```
getSelectionModel().select("NVT"); 
```

像魅力一样工作。

# java - 将 KML 文件导入 Google 地图时显示不正确的位置

> ID：11684367
> 
> 赞同：1
> 
> 时间：2012-07-27T08:43:04.393
> 
> 标签：java, maps, kml

我有一个自动生成 KML 文件的程序。但是，当将其导入 Google 地图时，它会将我带到其他地方。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Placemark>
<name>Google Maps - Evidence File</name>
<description>Cheltenham</description>
<Point>
<coordinates>51°54'51.94116", -2°6'8.12088"</coordinates>
</Point>
</Placemark>
</kml> 
```

我已经仔细检查了坐标。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:01:08.750

坐标格式错误，请参阅[http://en.wikipedia.org/wiki/Keyhole_Markup_Language](http://en.wikipedia.org/wiki/Keyhole_Markup_Language)或[https://developers.google.com/kml/documentation/kmlreference?hl=fi#coordinates](https://developers.google.com/kml/documentation/kmlreference?hl=fi#coordinates)了解正确格式。

您使用的格式度分秒，应该是十进制度。假设您的意思是[英国切尔滕纳姆，](https://maps.google.com/maps?q=Cheltenham&hl=en&ll=51.895775,-2.074184&spn=0.062288,0.14883&hnear=Cheltenham,+Gloucestershire,+United+Kingdom&t=m&z=13)它们需要按经度、纬度（无空格）的顺序排列。KML 中的正确格式是`<coordinates>-2.1022558,51.9144281</coordinates>`.

# unit-testing - 模拟对象中的 CakePHP “with” 方法返回空值

> ID：11684369
> 
> 赞同：0
> 
> 时间：2012-07-27T08:43:10.790
> 
> 标签：unit-testing, cakephp

我正面临这个问题的确切问题。 [模拟对象中的CakePHP“with”方法不起作用](https://stackoverflow.com/questions/11111383/cakephp-with-method-in-mock-object-dont-work)

但是提供的答案对我也不起作用。

这就是问题所在。控制器测试用例代码：

```
public function testCreate() {
$batches = $this->generate('ShippingBatches', array(
    'components' => array(
        'Session', 
        'Auth' => array('user', '_getUser')
        )
)); 

$batches->Auth->expects($this->once())->method('user') 
    ->with('id') 
    ->will($this->returnValue(1));

$batches->Session
    ->expects($this->once())
    ->method('setFlash');

$this->testAction('/shippingbatches/create', array('data' => '[3,6]', 'method' => 'post'));
} 
```

控制器代码：

```
public function create(){
//Some code here
$d['ShippingBatch']['user_id'] = $this->Auth->user('id');
$this->ShippingBatch->save($d);
//some code here
} 
```

错误： **SQLSTATE [23000]：完整性约束违规：1048 列'user_id'不能为空测试用例：ShippingBatchesControllerTestCase(testCreate)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:35:22.187

解决方案是使用 staticExpects() 而不是 expects() 因为 user 是一个静态函数。

```
$batches->Auth->staticExpects($this->once())->method('user') 
        ->with('id')
        ->will($this->returnValue(1)); 
```

# c# - 如何使`Defer`ed observable 仅订阅第一个订阅者？

> ID：11684370
> 
> 赞同：1
> 
> 时间：2012-07-27T08:43:13.307
> 
> 标签：c#, system.reactive

鉴于这个伪代码，我想做的是确保如果我有多个订阅者，我不会`remote`因为每个订阅者的额外轮询而使我的源饱和。

```
IObservable<data> RemoteObservable(Remote remote) 
{
   var onceonly = Observable.FromAsyncPattern(remote.Begin, remote.End);
   return Observable.Defer(() => onceonly())
                    .Repeat();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:43:13.307

答案是[`RefCount`](http://msdn.microsoft.com/en-us/library/ff707550%28VS.92%29.aspx)，（在[这里](http://nascentcode.wordpress.com/2010/12/12/creating-a-shared-refcounted-observable/)找到）：

```
 return Observable.Defer(() => onceonly())
                    .Repeat()
                    .Publish()
                    .RefCount(); 
```

# javascript - 数组中的 Javascript 数组丢失

> ID：11684374
> 
> 赞同：0
> 
> 时间：2012-07-27T08:43:16.160
> 
> 标签：javascript, arrays, reference, undefined

我在 JS 中创建了一个字符串数组。

```
arr1 = [];
for (...)
  arr1.push('aasfd'); 
```

现在我将此数组添加到另一个包含在其他对象中的数组中。

```
arr2 = [];
arr2.push(arr1);
console.log(arr2); 
```

最后一条日志语句显示了预期的数组。

```
[
 Array[3]
 0: "A"
 1: "B"
 2: "C"
 length: 3
 __proto__: Array[0]
] 
```

过了一会儿，某个事件处理程序被调用，结果发现 arr2 的内容是未定义的。我很确定在两个回调之间没有调用包含 arr2 的对象中的任何函数。

arr2 变成

```
[undefined x 1] 
```

不知道 arr2 中包含的数组 arr1 在哪里丢失了。我错过了什么吗？如何调试此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:25:52.380

我在 chrome 中遇到了一个错误，导致难以调试问题。

[https://bugs.webkit.org/show_bug.cgi?id=35801](https://bugs.webkit.org/show_bug.cgi?id=35801)

# javascript - JavaFX 1.x 到 JavaFX2 图表对数

> ID：11684376
> 
> 赞同：0
> 
> 时间：2012-07-27T08:43:23.707
> 
> 标签：javascript, charts, javafx, javafx-2

我正在寻找一个具有对数刻度的示例，我在这里找到了一些东西：

[http://blog.dooapp.com/javafx-chart-api-and-logarithmic-scale-tag-ja](http://blog.dooapp.com/javafx-chart-api-and-logarithmic-scale-tag-ja)

和这里：

[https://forums.oracle.com/forums/thread.jspa?threadID=2420118&stqc=true](https://forums.oracle.com/forums/thread.jspa?threadID=2420118&stqc=true)

但它是用 JavaScript 编写的：有没有人这么好心地在 JavaFX 2.x 中重写这两种方法？

```
var logUpperBound: Number = bind Math.log10(upperBound);
var logLowerBound: Number = bind Math.log10(lowerBound);

override public function getDisplayPosition(arg0: Object): Number {
    def delta = logUpperBound - logLowerBound;
    def deltaV = Math.log10((arg0 as Number)) - logLowerBound;
    if (orientationVertical) {
        return (1 -((deltaV) / delta)) * height;
    } else {
        return ((deltaV) / delta) * width;
    }
} 
```

* * *

```
override protected function updateTickMarks(): Void {
    if (tickMarks.size() == 0) {
        for (i in [0..Math.log10(upperBound)-1], j in [1..9]) {
            var v = j * Math.pow(10, i);
            insert CustomTickMark {
                customLabel: "{%6.0f v}"
                customPosition: getDisplayPosition(v)
                customValue: v
            } into tickMarks;
        }

    }
} 
```

我不能使用这些方法，因为我不懂 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:42:23.447

你可以在这里找到我关于如何做到这一点的文章：

[http://blog.dooapp.com](http://blog.dooapp.com)

凯文

# android - Android ArrayAdapter getActivity() 返回 null

> ID：11684377
> 
> 赞同：0
> 
> 时间：2012-07-27T08:43:33.600
> 
> 标签：android, android-fragments, android-activity, android-listfragment

我在从我的片段中获取活动时遇到问题。我在这里阅读了几个线程，我确信它应该工作，但我仍然从我的片段中的 onAttach() 方法中的 getActivity() 方法中得到 null。

我的代码：

```
public static class TabsAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final FragmentActivity mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    private Fragment mFragment;

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        FragmentTransaction ft=mContext.getSupportFragmentManager().beginTransaction();
        Fragment fragment=Fragment.instantiate(mContext, info.clss.getName(), info.args);
        if(mFragment==null || !mFragment.equals(fragment)){
            mFragment=fragment;
            ft.add(mViewPager.getId(), mFragment);  
            ft.commit();
        }else{
            ft.detach(mFragment);
            mFragment=fragment;
            ft.attach(mFragment);
            ft.commit();
        }           
        return mFragment;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);                   
            }
        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

我打电话。

```
setListAdapter(new CompaniesListAdapter(getActivity(), records)); 
```

来自我的片段中的 onAttach() 方法，因为它在多个线程中进行了描述。

我几乎尝试了一切，但我无法让它返回活动。非常感谢您的回答。

日志：

```
07-27 11:30:57.648: E/AndroidRuntime(18378): FATAL EXCEPTION: main
07-27 11:30:57.648: E/AndroidRuntime(18378): java.lang.NullPointerException
07-27 11:30:57.648: E/AndroidRuntime(18378):    at  com.citysmartgo.cheaptaxi.tabs.support.CompaniesListAdapter.getView(CompaniesListAdapter.java:59)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.AbsListView.obtainView(AbsListView.java:2033)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.ListView.makeAndAddView(ListView.java:1772)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.ListView.fillDown(ListView.java:672)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.ListView.fillFromTop(ListView.java:732)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.ListView.layoutChildren(ListView.java:1625)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.AbsListView.onLayout(AbsListView.java:1863)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.View.layout(View.java:11278)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.View.layout(View.java:11278)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.support.v4.view.ViewPager.onLayout(ViewPager.java:1388)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.View.layout(View.java:11278)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.View.layout(View.java:11278)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.View.layout(View.java:11278)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.View.layout(View.java:11278)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.os.Looper.loop(Looper.java:137)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at java.lang.reflect.Method.invokeNative(Native Method)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at java.lang.reflect.Method.invoke(Method.java:511)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-27 11:30:57.648: E/AndroidRuntime(18378):    at dalvik.system.NativeStart.main(Native Method)
07-27 11:30:58.874: I/Process(18378): Sending signal. PID: 18378 SIG: 9 
```

我的 getView 方法

```
@Override
public View getView(int position, View convertView, ViewGroup parrent){
    View rowView = convertView;
    TaxiCompanyQuoteView cqView = null;

    if(rowView == null) {
        LayoutInflater inflater = activity.getLayoutInflater();
        rowView = inflater.inflate(R.layout.companies_row_layout, null);

        cqView=new TaxiCompanyQuoteView();
        cqView.company=(TextView) rowView.findViewById(R.id.companies_name);
        cqView.company=(TextView) rowView.findViewById(R.id.companies_phone);
        cqView.company=(TextView) rowView.findViewById(R.id.companies_price_per_unit);
        cqView.company=(TextView) rowView.findViewById(R.id.companies_entering_price);
        cqView.company=(TextView) rowView.findViewById(R.id.companies_waiting_price);

        rowView.setTag(cqView);
    }else{
        cqView = (TaxiCompanyQuoteView) rowView.getTag();
    }

    TaxiCompany currentTaxiCompany = taxiCompanies.get(position);
    cqView.company.setText(currentTaxiCompany.getName());
    cqView.phone.setText(currentTaxiCompany.getNumber());
    cqView.pricePerUnit.setText(currentTaxiCompany.getPricePerUnit());
    cqView.waitingPrice.setText(currentTaxiCompany.getEnteringPrice());
    cqView.enteringPrice.setText(currentTaxiCompany.getWaitingPrice());

    return rowView;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:44:53.377

在`onAttach()`活动尚未准备好使用时..检查片段[生命周期](http://developer.android.com/guide/components/fragments.html)..
您可以将代码移至`onActivityCreated()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T00:42:55.947

我建议以下。在您的类中为您的上下文创建一个扩展片段的属性：

```
private FragmentActivity myContext; 
```

覆盖以下方法，该方法在片段附加到其上下文时调用。

```
@Override
public void onAttach(@NonNull Context context) {
    myContext = (FragmentActivity) context;
    super.onAttach(context);
} 
```

# php - 一个用户可以更新，而其他用户不能选择

> ID：11684382
> 
> 赞同：1
> 
> 时间：2012-07-27T08:43:43.040
> 
> 标签：php, mysql, sql

MySQL 和 PHP 中有没有办法只允许执行更新的人查看有关特定记录的信息？

例如，如果一个用户加载他们所看到的页面，必须更新一条记录，在该用户完成更新该记录之前，访问该页面的任何其他用户都不能查看该特定记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:48:14.853

向表中添加“锁定”列，一旦用户调用编辑表单，将“锁定”数据库值设置为 user_id，并在保存后将其设置回 false/null。在您的视图操作中，检查锁定的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:49:50.933

当有人请求编辑页面时，您必须手动锁定该行（通过添加一`IsLocked`列），因为一旦 PHP 脚本执行结束，与数据库的连接就会丢失（尽管池化等，脚本执行会停止，所以你无法再次从同一线程解锁，因为该连接可能会转到另一个脚本）。

不要忘记创建一种解锁脚本，例如由 cron 启动，以解锁已锁定超过给定时间的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:12:39.187

我不建议在有问题的数据表中添加任何列。我宁愿创建特殊`locks`表来保存信息：

```
create table locks (
    tablename varchar,
    primarykey int,
    userid int,
    locktime datetime); 
```

然后考虑以下原则：

*   每个 PHP 请求都是一个独立的 mysql 连接，这就是为什么像这样的解决方案`SELECT ... FOR UPDATE`不起作用的原因，这就是为什么你需要保留一个人的用户 ID——他实际上是第一个请求并执行了锁
*   每次对`locks`表的访问都必须将表锁定为一个整体（使用 MySQL 的`LOCK`语句）以避免锁定同一行的并发
*   如果无法知道，特定用途是否已通过关闭带有记录的窗口来放弃编辑行 - 那么`locktime`超时必须很短，或者您应该提供一些*ping*（即 AJAX）机制，`locktime`只要用户正在工作，该机制就会重置锁定记录
*   只要他/她拥有锁并且`locktime`没有过期，用户就可以将更改保存到记录
*   `tablename`当然是样本，`primarykey`你应该根据你的需要调整它们:-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T08:48:51.963

您可以添加一个名为`locked`您设置状态的字段。也许您还添加了一个字段`lockedtime`，例如保存时间戳的位置，锁处于活动状态。这取决于您的需求。

也有可能做到这一点。像

```
SELECT * FROM table WHERE primarykey = x FOR UPDATE; 
```

# c - 使用按位运算符的效率

> ID：11684384
> 
> 赞同：1
> 
> 时间：2012-07-27T08:43:55.080
> 
> 标签：c, bit-manipulation

要求如下：

```
/* length must be >= 18 */

int calcActualLength(int length) {
    int remainder = (length - 18) % 8;
    if (remainder == 0)
        return length;
    return length + 8 - remainder;
} 
```

使用按位运算符，我可以重构第一行

```
int remainder = (length - 2) & 7; 
```

能否进一步优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:18:36.280

`((length+5)&~7)+2`

```
int calcActualLength(int length) {
    int remainder = (length - 18) % 8;
    if (remainder == 0)
        return length;
    return length + 8 - remainder;
}
==>
int HELPER_calcActualLength(int length) {
    int remainder = length % 8;
    if (remainder == 0)
        return length;
    return length + 8 - remainder;
}
int calcActualLength(int length) {
    return 18 + HELPER_calcActualLength(length - 18);
} 
```

并且当参数 >= 0 时在语义上`HELPER_calcActualLength()`等于`ROUNDUP_8()`

更简单的 ROUNDUP_8() 可以是：

```
#define ROUNDUP_8(x) (((x)+7)&~7)

int calcActualLength(int length) {
    return 18 + ROUNDUP_8(length - 18);
}
==>    2 + ROUNDUP_8(length - 18 + 16);
==>    2 + ROUNDUP_8(length - 2);
==>    2 + (((length - 2)+7)&~7)
==>    ((length+5)&~7)+2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T10:34:55.363

使用以下代码编译时，原始代码会生成以下 64 位程序集`gcc -O3`：

```
 movl    %edi, %eax
        leal    -18(%rax), %ecx
        movl    %ecx, %edx
        sarl    $31, %edx
        shrl    $29, %edx
        addl    %edx, %ecx
        andl    $7, %ecx
        subl    %edx, %ecx
        je      .L2
        addl    $8, %eax
        subl    %ecx, %eax
.L2:
        rep 
```

正如对您问题的评论中所建议的，将参数更改为`unsigned int`允许更大的优化并导致以下程序集：

```
 leal    -18(%rdi), %edx
        movl    %edi, %eax
        andl    $7, %edx
        je      .L3
        leal    8(%rdi), %eax
        subl    %edx, %eax
.L3:
        rep 
```

`8`可以通过添加`7`和屏蔽来执行向上舍入到的倍数`~7`。它的工作原理是这样的：如果最后三位不全为零，则将`7`进位添加到第 4 位，否则不发生进位。所以你的功能可以简化为：

```
return (((length - 18) + 7) & ~7) + 18; 
```

或更简单：

```
return ((length - 11) & ~7) + 18; 
```

GCC 将最后一行简单地编译为：

```
 leal    -11(%rdi), %eax
        andl    $-8, %eax
        addl    $18, %eax 
```

请注意，`lea`（加载有效地址）指令经常被“滥用”，因为它能够计算简单的线性组合，如`reg1 + size*reg2 + offset`

# iphone - 在 iOS 中运行后台进程

> ID：11684385
> 
> 赞同：0
> 
> 时间：2012-07-27T08:43:57.533
> 
> 标签：iphone, ios5

我正在为 iPhone 开发应用程序，这里我需要一个后台进程，它应该检查当前系统时间并匹配变量中的设置时间，如果时间匹配，它应该发出一个命令连接到服务器，这个进程应该在每两小时运行一次，直到应用程序在设备中。

请向我提供任何示例代码或建议

提前致谢

# java - 更改 JTable 中某些行的颜色，但不是全部

> ID：11684386
> 
> 赞同：2
> 
> 时间：2012-07-27T08:44:04.530
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我创建了一个自定义单元格渲染器类来实现这一点。

```
public class MatchTableCellRenderer extends DefaultTableCellRenderer{

    public Component getTableCellRendererComponent (JTable table,
                                                    Object obj, boolean isSelected, boolean hasFocus, int row, int column) {
        Component cell;
        cell = super.getTableCellRendererComponent(
                table, obj, isSelected, hasFocus, row, column);
        if( ((String[]) ((MatchTableModel) table.getModel()).getRow(row)).length==7 ){
            System.out.println(((String[]) ((MatchTableModel) table.getModel()).getRow(row))[0]+" "+((String[]) ((MatchTableModel) table.getModel()).getRow(row))[6]);

            cell.setForeground(Color.green);

        }
        return cell;
    }

} 
```

我已将此渲染器设置为供我的表格列使用：

```
 tempColumn = table.getColumnModel().getColumn(0);
    tempColumn.setCellEditor(new MacColumnEditor());
    tempColumn.setCellRenderer(new MatchTableCellRenderer());

    tempColumn = table.getColumnModel().getColumn(1);
    tempColumn.setCellEditor(new IpColumnEditor());
    tempColumn.setCellRenderer(new MatchTableCellRenderer());

    tempColumn = table.getColumnModel().getColumn(2);
    DefaultCellEditor dfEditor=new DefaultCellEditor(new JTextField());
    dfEditor.setClickCountToStart(2);
    tempColumn.setCellEditor(dfEditor);
    tempColumn.setCellRenderer(new MatchTableCellRenderer()); 
```

我想要包含长度 = 7 绿色的字符串 [] 和其他具有默认颜色的行。但有趣的是，我所有的行都变成了绿色。如您所见，我有一条打印线。它打印了 4 次（我的表有 12 行），但所有行都变成绿色，而不是 4。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:51:02.690

您可以使用`XxxCellRenderer`，但更好和最简单的是使用`prepareRenderer()`

要获得正确的代码，您必须在 if-else 中覆盖或测试以下参数

*   被选中

*   有焦点

*   柱子

*   排

更多关于类似问题的[答案](https://stackoverflow.com/search?q=user:714968%20%5Bjava%5D%20prepareRenderer&submit=search)和[问题](https://stackoverflow.com/questions/7132400/jtable-row-hightlighter-based-on-value-from-tablecell)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T10:23:50.420

原因是 DefaultTableCellEditor 臭名昭著的颜色记忆 (TM)：您必须*始终*设置颜色，而不是仅在一个分支中设置颜色。

```
if (myCondition) {
   setBackground(...) {
} else {
   setBackground(...) 
} 
```

确切的细节在[最近的一个线程中进行了解释](https://stackoverflow.com/questions/9607670/how-do-i-correctly-use-custom-renderers-to-paint-specific-cells-in-a-jtable/9617446#9617446)

# javascript - 如何从另一个 div 中的 iframe 更改 div

> ID：11684389
> 
> 赞同：0
> 
> 时间：2012-07-27T08:44:25.503
> 
> 标签：javascript, html, iframe

我有两个 div

```
 <div id="leftdiv"><!--#exec cgi="test.cgi"--></div> 
        <div id="rigthdiv" >
            <iframe name="rigthdiv" class="contentiframe"allowTransparency="true" frameborder="0" src="iframebg.html"><body STYLE="background- color:transparent"></iframe>
        </div> 
```

我正在尝试从 iframe 更改 leftdiv。我从 iframe 调用了下面的 js，但没有任何改变。怎么了？谢谢

```
 function test() {
             parent.document.getElementById("leftdiv").innerHTML = 'Processing complete.';  
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:07:28.083

它不能在 chrome 上运行，但它可以在 firefox 或 IE 上运行。使用 javascript 时，Chrome 通常不支持 iframe。您可以尝试使用 JQuery。

# forms - 文本区域的浏览器不一致

> ID：11684390
> 
> 赞同：0
> 
> 时间：2012-07-27T08:44:37.170
> 
> 标签：forms, browser, textarea

在 FF 中查看我的文本区域时，它会显示正确的宽度（col=30），但在 IE 和 Chrome 中它要小得多。有任何解决这个问题的方法吗？显然，一旦我扩大宽度，它在 IE 和 Chrome 中看起来不错，但在 FF 中太宽了！

```
input, textarea
{
border: 1px solid #D8CAB8;
display:block;
}

.submit input, .submit textarea
{
color: #000;
background: #ffa20f;
border: 2px outset #d7b9c9;
} 
```

HTML

```
 <input type="image" value="submit" src="assets/images/submit_btn.png" width="85" height="26" border="0" alt="submit" name="submit"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:47:26.697

将宽度和高度设置为 CSS 属性而不是属性。这基本上是为了允许浏览器拒绝它遵循的标准并使用 CSS 的定义属性，这些属性是全局的。

# spring - 在 OSGI 参考中应用 AOP 方面

> ID：11684391
> 
> 赞同：1
> 
> 时间：2012-07-27T08:44:40.057
> 
> 标签：spring, reference, osgi, aop, aspect

是否可以在 OSGI 参考中应用 AOP 方面？

我有两个捆绑包，捆绑包 A 公开了捆绑包 B 能够使用它的服务。Bundle B 有一个 bean 引用，我想对这个引用应用 AOP 方面。我想使用 JMX 进行监控。

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:39:27.623

使用 Equinox OSGi 容器，您可以使用[Equinox Weaving](http://eclipse.org/equinox/weaving/)功能将 AspectJ AOP 应用于各种捆绑包。

# api - 如何从暴雪社区平台获取图片

> ID：11684395
> 
> 赞同：0
> 
> 时间：2012-07-27T08:44:58.340
> 
> 标签：api

我们可以通过json获取一些信息。但是如何通过 json 中的信息获取图像。例如“thumbnail”：“medivh/1/1-avatar.jpg”当我连接主机+请求后面的url时它不起作用。那么，还有其他获取图像的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:44:00.593

静态图片的 url 格式如下：

http:// 地区。战网/静态渲染/区域/缩略图

例子：

对于头像图片

```
http://eu.battle.net/static-render/eu/alexstrasza/57/51685945-avatar.jpg 
```

访问军械库资料时看到的图片

```
http://eu.battle.net/static-render/eu/alexstrasza/57/51685945-profilemain.jpg 
```

换个角度，不知道这个用在什么地方

```
http://eu.battle.net/static-render/eu/alexstrasza/57/51685945-inset.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-24T21:36:04.197

截至静态渲染器的最新更改，以下是正确的：

`http://render-<Region>.worldofwarcraft.com/character/<Thumbnail>`

例如：

`http://render-us.worldofwarcraft.com/character/kul-tiras/148/130814612-profilemain.jpg`

# java - Spring Hessian 异常

> ID：11684403
> 
> 赞同：2
> 
> 时间：2012-07-27T08:45:31.243
> 
> 标签：java, spring, hessian

我正在考虑处理从 Spring Hessian 连接中断的恢复。如果连接断开，hessian 代理可能会抛出哪些异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:16:18.283

这是一个示例堆栈跟踪，每次您尝试连接到不可用的 hessian 远程服务时都会得到：

线程“AWT-EventQueue-0”中的异常 org.springframework.remoting.RemoteConnectFailureException：无法连接到 [http://localhost:17026/remoting/TestService] 的 Hessian 远程服务；嵌套异常是 java.net.ConnectException: Connection denied: connect at org.springframework.remoting.caucho.HessianClientInterceptor.invoke(HessianClientInterceptor.java:235) ) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 在 org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 在 $Proxy1.getNameFromKassa(Unknown Source) ...< /p>

顺便说一句，粗麻布代理不会因为被关闭的简单原因而向您抛出任何异常；）

# php - PHP 数组 - 替代输出

> ID：11684410
> 
> 赞同：2
> 
> 时间：2012-07-27T08:45:46.190
> 
> 标签：php, arrays

我有一个基于 url 的简单数组，即 www.example.com/apple/ 它放置在我需要它的苹果文本中 - 但我还需要一个选项，根据品牌。

IE，所以我可以使用 $brand_to_use 来绘制它以放置在“apple”中，例如 $brandurl_to_use 在我需要的地方绘制在“apple.co.uk”中，但我不确定如何根据原创品牌。

谢谢

```
$recognised_brands = array( 
  "apple", 
  "orange", 
  "pear",
  // etc 
); 

$default_brand = $recognised_brands[0]; // defaults brand to apple

$brand_to_use = isset($_GET['brand']) && in_array($_GET['brand'], $recognised_brands) 
  ? $_GET['brand'] 
  : $default_brand; 
```

伪代码更新示例：

```
recognised brands = 
apple
orange
pear

default brand = recognised brand 0

recognised brandurl =
apple = apple.co.uk
orange = orange.net
pear = pear.com

the brandurl is found from the recognised brands so that in the page content I can reference

brand which will show the text apple at certain places +
brandurl will show the correct brand url related to the brand ie apple.co.uk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:51:30.287

将数组创建为键/值对并在数组中搜索键。如果您愿意，每对的值部分可以是一个对象。

```
$recognised_brands = array(  
  "apple" => "http://apple.co.uk/",  
  "orange" => "http://orange.co.uk/",  
  "pear" => "http://pear.co.uk/", 
  // etc  
);  

reset($recognised_brands);  // reset the internal pointer of the array
$brand = key($recognised_brands); // fetch the first key from the array

if (isset($_GET['brand'] && array_key_exists(strtolower($_GET['brand']), $recognised_brands))
    $brand = strtolower($_GET['brand']);

$brand_url = $recognised_brands[$brand]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:55:49.177

我*认为*你想要做的是这样的：

```
$recognised_brands = array( 
  "apple" => 'http://www.apple.co.uk/', 
  "orange" => 'http://www.orange.com/', 
  "pear" => 'http://pear.php.net/',
  // etc 
); 

$default_brand = each($recognised_brands);
$default_brand = $default_brand['key'];

$brand = isset($_GET['brand'], $recognised_brands[$_GET['brand']]) 
  ? $_GET['brand'] 
  : $default_brand;
$brand_url = $recognised_brands[$brand]; 
```

如果你想动态地将默认品牌设置为数组的第一个元素，它很快就会变得混乱。但是你可以这样做：

# html - 选择中的每个选项具有多个值的淘汰赛绑定

> ID：11684413
> 
> 赞同：3
> 
> 时间：2012-07-27T08:45:55.013
> 
> 标签：html, forms, knockout.js

在一个表单中，我有一个带有多个选项的选择框，每个选项代表一个包含影响表单其余部分的各种变量的报告。有些报告需要开始日期，有些需要结束日期，有些则需要两者。我已将每个报告的要求绑定到选项元素，如下所示：

```
<select data-bind="value: ReportId">
    <option value="ID" data-hasStartDate="BOOL" data-hasEndDate="BOOL">Report name</option>
</select>

<input data-bind="visible: hasStartDate" />
<input data-bind="visible: hasEndDate" /> 
```

ID 是报告的 ID，BOOL 为真或假。我使用敲除将选择框的值数据绑定到reportId。但是我不知道如何将 hasStartDate 和 hasEndDate-values 绑定到 Knockout observable 以显示适当的表单元素。

即使使用自定义绑定，我也需要一个普通的 jQuery onChange-event 来将值应用于 Knockout-values hasStartDate 和 hasEndDate。是否有可能完全用 Knockout 本身来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:48:58.480

您是否尝试过为选择框使用[选项绑定？](http://knockoutjs.com/documentation/options-binding.html)

您也不能使用`data-whatever="some value"`. 您总是使用**data-bind**，如下所示：`data-bind="bindingtype: value"`.

**编辑：** 话虽这么说...如果您想从`<select>`元素中的选定选项中获取数据，我将使用以下 jQuery：

```
$("select").on('change', function() {
   var selectedData = $(this).find(":selected").data("stuff");
}); 
```

然后，您可以使用 selectedData 并将其应用于剔除视图模型。

小提琴中的工作示例：http: [//jsfiddle.net/RZq6Q/4/](http://jsfiddle.net/RZq6Q/4/)

# ios - 从 Organizer 下载后，xcappdata 仅包含 AppData 文件夹

> ID：11684414
> 
> 赞同：5
> 
> 时间：2012-07-27T08:45:54.850
> 
> 标签：ios, xcode

我最近将我的 XCode 升级到了 4.4 版，我意识到当我从管理器下载包含我的应用程序的沙箱时，它只包含 AppData 文件夹和 AppDataInfo.plist。Documents 文件夹不见了，尽管我可以在 Organizer 的 Sandbox 列表中看到它。

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:56:10.473

这被报告为一个错误，并将作为版本 4.4.1 的一部分进行修复。

修复此问题的更新** xcode 4.4.1 于 8 月 7 日发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:26:34.577

我在 10.7 和 10.8 上使用 Xcode 4.4 时遇到了同样的问题，似乎唯一的选择是暂时继续使用 4.3 系列。

不幸的是，我有充分的理由尽快将我的开发机器更新到 Mountain Lion，它需要 Xcode 4.4 开始。在 Mountain Lion 上启动 Xcode 4.3 会出现一个错误对话框，要求升级到 4.4 或更高版本。

如果您使用的是 ML，请在启动 4.3 之前尝试运行以下命令作为临时修复：

```
defaults write com.apple.dt.Xcode DVTSkipAllowedVersionsCheck -bool YES 
```

并在稍后恢复它

```
defaults delete com.apple.dt.Xcode DVTSkipAllowedVersionsCheck 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:37:05.010

在 Xcode 4.4.1 中修复。现在工作正常。

# wsdl - 使用强制标头创建基于 WSDL 的 WSO2 代理

> ID：11684420
> 
> 赞同：0
> 
> 时间：2012-07-27T08:46:22.020
> 
> 标签：wsdl, wso2, soapheader, wso2esb

在我的场景中，有一个在 WSO2-AS 中运行的 Web 服务“SolverDummyWS”，并希望在 WSO2 ESB 中为该服务生成一个代理。

因此，我手动为代理创建了一个 wsdl，并添加了一些必需的标头字段。所以只有代理的 wsdl 应该有这个头。标头都应该是强制性的，并定义为 EXPLICIT HEADERS。

Proxy-WSDL 如下所示：

```
<wsdl:definitions name="SolverDummyProxy"
targetNamespace="http://de.unistuttgart.iaas" xmlns:tns="http://de.unistuttgart.iaas"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">

<wsdl:types>
    <schema targetNamespace="http://de.unistuttgart.iaas"
        xmlns="http://www.w3.org/2001/XMLSchema">
        <element name="createGrid">
            <complexType>
                <sequence>
                    <element minOccurs="0" name="milliseconds" type="long" />
                </sequence>
            </complexType>
        </element>
        <element name="createGridResponse">
            <complexType>
                <sequence>
                    <element minOccurs="0" name="return" type="string" />
                </sequence>
            </complexType>
        </element>
        <element name="requestHeader">
            <complexType>
                <sequence>
                    <element minOccurs="1" name="simulationId" type="long" />
                    <element minOccurs="1" name="activityId" type="long" />
                    <element minOccurs="1" name="requiredPolicy" type="anyType" />
                    <element minOccurs="1" name="requiredPortType" type="string" />
                    <element minOccurs="1" name="requiredScope" type="anyURI" />
                </sequence>
            </complexType>
        </element>
    </schema>
</wsdl:types>

<wsdl:message name="createGridRequest">
    <wsdl:part name="body" element="tns:createGrid" />
    <wsdl:part name="reqHeader" element="tns:requestHeader" />
</wsdl:message>

<wsdl:message name="createGridResponse">
    <wsdl:part name="body" element="tns:createGridResponse" />
</wsdl:message>

<wsdl:portType name="SolverDummyProxyWSPortType">
    <wsdl:operation name="createGrid">
        <wsdl:input message="tns:createGridRequest" />
        <wsdl:output message="tns:createGridResponse" />
    </wsdl:operation>
</wsdl:portType>

<wsdl:binding name="SolverDummyProxyWSSoap11Binding" type="tns:SolverDummyProxyWSPortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="createGrid">
        <wsdl:input>
            <soap:body parts="body" use="literal" />
            <soap:header message="tns:createGridRequest" part="reqHeader"
                use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap:body parts="body" use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>

<wsdl:binding name="SolverDummyProxyWSSoap12Binding" type="tns:SolverDummyProxyWSPortType">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="createGrid">
        <wsdl:input>
            <soap12:body parts="body" use="literal" />
            <soap12:header message="tns:createGridRequest" part="reqHeader"
                use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap12:body parts="body" use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>

<wsdl:service name="SolverDummyProxyWS">
    <wsdl:port name="SolverDummyProxyWSSoap11Endpoint" binding="tns:SolverDummyProxyWSSoap11Binding">
        <soap:address location="http://localhost:8280/services/SolverDummyProxyWS.SolverDummyProxyWSSoap11Endpoint" />
    </wsdl:port>
    <wsdl:port name="SolverDummyProxyWSSoap12Endpoint" binding="tns:SolverDummyProxyWSSoap12Binding">
        <soap12:address location="http://localhost:8280/services/SolverDummyProxyWS.SolverDummyProxyWSSoap12Endpoint" />
    </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

所以我使用 WSO2-ESB Web 界面创建了一个代理。如果我查看所创建代理的实际 WSDL，我会发现 WSO2-ESB 做了一些更改： - 添加了 HTTP 绑定 - 从 createGridRequest 消息中删除了标头部分 - 混乱的 soap:input 绑定（有两个标头定义，并且身体部分被移除）

由 WSO2-ESB 修改的 WSDL

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:tns="http://de.unistuttgart.iaas" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://de.unistuttgart.iaas">
<wsdl:types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://de.unistuttgart.iaas">
        <element name="createGrid">
            <complexType>
                <sequence>
                    <element minOccurs="0" name="milliseconds" type="long" />
                </sequence>
            </complexType>
        </element>
        <element name="createGridResponse">
            <complexType>
                <sequence>
                    <element minOccurs="0" name="return" type="string" />
                </sequence>
            </complexType>
        </element>
        <element name="requestHeader">
            <complexType>
                <sequence>
                    <element name="simulationId" type="long" />
                    <element name="activityId" type="long" />
                    <element name="requiredPolicy" type="anyType" />
                    <element name="requiredPortType" type="string" />
                    <element name="requiredScope" type="anyURI" />
                </sequence>
            </complexType>
        </element>
    </schema>
</wsdl:types>
<wsdl:message name="createGridRequest">
    <wsdl:part name="body" element="tns:createGrid" />
</wsdl:message>
<wsdl:message name="createGridResponse">
    <wsdl:part name="body" element="tns:createGridResponse" />
</wsdl:message>
<wsdl:portType name="SolverDummyProxyHWSPortType">
    <wsdl:operation name="createGrid">
        <wsdl:input message="tns:createGridRequest" wsaw:Action="http://de.unistuttgart.iaas/SolverDummyProxyWSPortType/createGridRequest" />
        <wsdl:output message="tns:createGridResponse" wsaw:Action="http://de.unistuttgart.iaas/SolverDummyProxyWSPortType/createGridResponse" />
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="SolverDummyProxyHWSSoap11Binding" type="tns:SolverDummyProxyHWSPortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <wsdl:operation name="createGrid">
        <soap:operation soapAction="" style="document" />
        <wsdl:input>
            <soap:body use="literal" />
            <soap12:header use="literal" part="reqHeader" message="tns:createGridRequest" />
            <soap12:header use="literal" part="reqHeader" message="tns:createGridRequest" />
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="SolverDummyProxyHWSSoap12Binding" type="tns:SolverDummyProxyHWSPortType">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <wsdl:operation name="createGrid">
        <soap12:operation soapAction="" style="document" />
        <wsdl:input>
            <soap12:body use="literal" />
            <soap12:header use="literal" part="reqHeader" message="tns:createGridRequest" />
            <soap12:header use="literal" part="reqHeader" message="tns:createGridRequest" />
        </wsdl:input>
        <wsdl:output>
            <soap12:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="SolverDummyProxyHWSHttpBinding" type="tns:SolverDummyProxyHWSPortType">
    <http:binding verb="POST" />
    <wsdl:operation name="createGrid">
        <http:operation location="createGrid" />
        <wsdl:input>
            <mime:content type="text/xml" part="parameters" />
        </wsdl:input>
        <wsdl:output>
            <mime:content type="text/xml" part="parameters" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="SolverDummyProxyHWS">
    <wsdl:port name="SolverDummyProxyHWSHttpSoap11Endpoint" binding="tns:SolverDummyProxyHWSSoap11Binding">
        <soap:address location="http://Tobiass-MacBook-Pro.local:8280/services/SolverDummyProxyHWS.SolverDummyProxyHWSHttpSoap11Endpoint" />
    </wsdl:port>
    <wsdl:port name="SolverDummyProxyHWSHttpsSoap11Endpoint" binding="tns:SolverDummyProxyHWSSoap11Binding">
        <soap:address location="https://Tobiass-MacBook-Pro.local:8243/services/SolverDummyProxyHWS.SolverDummyProxyHWSHttpsSoap11Endpoint" />
    </wsdl:port>
    <wsdl:port name="SolverDummyProxyHWSHttpSoap12Endpoint" binding="tns:SolverDummyProxyHWSSoap12Binding">
        <soap12:address location="http://Tobiass-MacBook-Pro.local:8280/services/SolverDummyProxyHWS.SolverDummyProxyHWSHttpSoap12Endpoint" />
    </wsdl:port>
    <wsdl:port name="SolverDummyProxyHWSHttpsSoap12Endpoint" binding="tns:SolverDummyProxyHWSSoap12Binding">
        <soap12:address location="https://Tobiass-MacBook-Pro.local:8243/services/SolverDummyProxyHWS.SolverDummyProxyHWSHttpsSoap12Endpoint" />
    </wsdl:port>
    <wsdl:port name="SolverDummyProxyHWSHttpsEndpoint" binding="tns:SolverDummyProxyHWSHttpBinding">
        <http:address location="https://Tobiass-MacBook-Pro.local:8243/services/SolverDummyProxyHWS.SolverDummyProxyHWSHttpsEndpoint" />
    </wsdl:port>
    <wsdl:port name="SolverDummyProxyHWSHttpEndpoint" binding="tns:SolverDummyProxyHWSHttpBinding">
        <http:address location="http://Tobiass-MacBook-Pro.local:8280/services/SolverDummyProxyHWS.SolverDummyProxyHWSHttpEndpoint" />
    </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

此代码没有强制标头，因此我创建初始标头的最初目的被 wso2-esb 搞砸了。

有人可以告诉我如何将强制标头添加到代理服务（如果我的初始 wsdl 文件有错误，就会出现这种情况）？

如果我最初的 wsdl 文件没问题，我怎么能强制 wso2-esb 使用这个文件，并且不修改它？！？

最后一个问题，对于对代理的请求，是否有另一种创建强制标头的方法？

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:47:05.247

<parameter name="useOriginalwsdl">true</parameter>

尝试将此参数放入您的代理服务以按原样显示 wsdl。应使用中介在代理服务级别处理soap 标头。

# javascript - 在javascript中获取命令参数

> ID：11684433
> 
> 赞同：-1
> 
> 时间：2012-07-27T08:47:22.787
> 
> 标签：javascript, commandargument

在网页中，我有一些代码，例如

```
<span commandArgument="a">A</span>
<span commandArgument="b">B</span> 
```

我想用javascript来获取span的commandArgument值，我写的代码是

```
var spans = document.getElementsByTagName("span");
var value = spans[0].commandArgument; 
```

它在 IE 中有效，但在 Firefox 中失败。
IE 得到 value = "a" 而 Firefox 得到 value = undefined。
有什么方法可以获取在两个浏览器中都有效的值吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:48:23.507

你试过`.getAttribute("commandArgument")`吗？

...必须提到它的丑表亲，`.setAttribute("commandArgument", "c")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:49:19.010

您可以使用[DOM 元素](https://developer.mozilla.org/en/DOM/element#Methods)[`getAttribute()`](https://developer.mozilla.org/en/DOM/element.getAttribute)的from方法。

根据quirskmode.org的[兼容性表](http://www.quirksmode.org/dom/w3c_core.html)，此方法也适用于旧浏览器

```
var value = spans[0].getAttribute('commandArgument'); 
```

# javascript - 将 jQuery Mobile 滑动事件绑定到 DIV

> ID：11684438
> 
> 赞同：1
> 
> 时间：2012-07-27T08:47:39.370
> 
> 标签：javascript, jquery, iphone, mobile, bind

我遇到了一个小问题，我确信来自 stackoverflow 社区的人可能会给出答案。

我正在尝试构建一个自定义滑动事件并将其绑定到 id="swipe" 的 div。我使用 jQuery Mobile 1.1.1。今天早上我用谷歌搜索了几个小时，但没有成功......

**我的代码**

```
<script>
  $('#swipe').bind('swipe', function () {
     alert('Hello!');
  });
<script>    

<div id="swipe">Swipe here</div> 
```

我试过用 .live() 代替 .bind() 但还是不行。奇怪的是，如果我使用

```
<script>
  $(document).bind('swipe', function () {
     alert('Hello!');
  });
<script> 
```

...它运行良好，但当然是在整个页面上，而不仅仅是#swipe DIV。

任何想法都受到高度赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:56:55.757

我猜 $('#swipe') 不会返回该元素，因为您在定义元素之前执行此代码。将脚本移动到底部或使用 onload 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:57:46.587

用div*后面*的script 标签试试。

# .htaccess - 如何使用 .htaccess 将所有流量重写到子目录（子域除外）？

> ID：11684439
> 
> 赞同：0
> 
> 时间：2012-07-27T08:47:55.703
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, subdomain

所以我使用的托管服务提供商不支持虚拟主机或任何类似的东西，所以我试图将我的主域重写为子目录。例如，我目前有：

example.com 重写为 example.com/sites/example.com/

使用 .htaccess 中的以下代码可以正常工作

```
Options +FollowSymLinks
RewriteEngine On 
RewriteBase /

RewriteCond %{REQUEST_URI} !^/sites/example.com/.*$
RewriteRule ^(.*)$ /sites/example.com/$1 
```

这样做的原因是在同一台服务器上有其他域，我不希望主域可以访问这些域并保持我的服务器井井有条。

所以我也有 example2.com 作为指向 /sites/example2.com 的附加域，并且工作正常。

但是，我也有指向不同子目录的子域，例如 projects.example.com 指向 /projects/ 但这些只是被重写到 /sites/example.com/ 目录。

我的问题是我如何（也有可能）解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:47:17.033

如果我真的理解，您应该添加主机条件，如果用户在主域上 - 他将被重定向。检查一下，我修改了一些代码：

```
Options +FollowSymLinks
RewriteEngine On 
RewriteBase /
#Here we're capturing host name, if it has only one point - this is not subdomain.
RewriteCond %{HTTP_HOST} ^([a-z0-9\-]+\.[a-z]{2,5})$
RewriteCond %{REQUEST_URI} !^/sites/%1/
#Redirecting to the current host name in folder sites
RewriteRule ^(.*)$ /sites/%1/$1 [L] 
```

**编辑：** 这不是为域添加正则表达式的优雅决定，它仅适用于二级域，如果您使用 .co.uk 之类的域 - 您必须在规则中手动添加它们，例如`RewriteCond %{HTTP_HOST} ^somesite.co.uk$`.

# c# - 站点地图外观不正确

> ID：11684440
> 
> 赞同：-2
> 
> 时间：2012-07-27T08:48:12.803
> 
> 标签：c#, asp.net, .net

我的项目中有一个站点地图，我做了一些更改，然后站点地图失去了它的外观并且看起来像这样。

[![意外](../Images/724cc398b2d6b8106b7cf4fcd721035d.png)](https://i.stack.imgur.com/TPKw1.jpg)

我在另一个网站上的内容是这样的..

[![预期的](../Images/3e308ac0e9345f0da699f926cd62b2fc.png)](https://i.stack.imgur.com/3imFx.jpg)

他们都使用相同的样式表。即使我尝试从一个复制到另一个，但是当我粘贴它时，它会失去它的设计颜色。我不知道怎么了。我检查了配置文件和其他项目属性，但似乎不起作用。

我在这两种情况下都使用 Visual Studio 2010 SP1 和 .Net framework 4.0

菜单控件的代码（两者相同）：

CSS : /* 选项卡菜单
-------------------------------------------- --------------*/

```
div.hideSkiplink
{
    background-color:white;
    width:100%;
}

div.menu
{
    padding: 4px 0px 4px 8px;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
}

div.menu ul li a, div.menu ul li a:visited
{
    background-color: #F87431;
    border: 1px #4e667d solid;
    color: #dde4ec;
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    background-color: #bfcbd6;
    color: #465c71;
    text-decoration: none;
}

div.menu ul li a:active
{
    background-color: #F87431;
    color: #cfdbe6;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:13:32.410

您的 CSS 以列表为目标，但旧版本的 .NET 将菜单呈现为表格 - 查看您的 Web.Config 中是否有此设置

```
controlRenderingCompatibilityVersion=3.5 
```

这告诉 .NET 通过表格以旧方式呈现控件，因此您的 CSS 将不会被应用 - 删除它，它应该呈现为 UL/LI 标记，您的样式现在可以工作。

# php - Json_encode() 在 PHP 5.1 中不起作用？

> ID：11684442
> 
> 赞同：5
> 
> 时间：2012-07-27T08:48:14.887
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 5.1 中解码 json？](https://stackoverflow.com/questions/2370968/how-can-i-decode-json-in-php-5-1)

我正在使用 json_encode 函数，它在我的本地主机中运行良好......当我移动到服务器时它不工作......我用谷歌搜索并发现它不支持 5.1 版本......我想使用这个函数。任何其他可能性？我是否需要升级到 5.2 或 wat？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T08:50:04.617

这是我成功用于 php 5.1 的内容（取自[http://www.php.net/json_encode](http://www.php.net/json_encode)下的评论）：

```
/**
 * Supplementary json_encode in case php version is < 5.2 (taken from http://gr.php.net/json_encode)
 */
if (!function_exists('json_encode'))
{
    function json_encode($a=false)
    {
        if (is_null($a)) return 'null';
        if ($a === false) return 'false';
        if ($a === true) return 'true';
        if (is_scalar($a))
        {
            if (is_float($a))
            {
                // Always use "." for floats.
                return floatval(str_replace(",", ".", strval($a)));
            }

            if (is_string($a))
            {
                static $jsonReplaces = array(array("\\", "/", "\n", "\t", "\r", "\b", "\f", '"'), array('\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'));
                return '"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $a) . '"';
            }
            else
            return $a;
        }
        $isList = true;
        for ($i = 0, reset($a); $i < count($a); $i++, next($a))
        {
            if (key($a) !== $i)
            {
                $isList = false;
                break;
            }
        }
        $result = array();
        if ($isList)
        {
            foreach ($a as $v) $result[] = json_encode($v);
            return '[' . join(',', $result) . ']';
        }
        else
        {
            foreach ($a as $k => $v) $result[] = json_encode($k).':'.json_encode($v);
            return '{' . join(',', $result) . '}';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:50:25.703

Yes`json_encode`在 PHP 5 >= 5.2.0 中可用，您必须升级（推荐）或找到实现该功能的库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T08:50:33.400

看看评论中的[http://de.php.net/json_encode](http://de.php.net/json_encode)。有些人提供了一个 PHP 编写的函数来做同样的事情。只有性能（很可能）不如原生性能好;-)。

# concurrency - Netty 文件传输代理在高并发下连接延迟大

> ID：11684445
> 
> 赞同：5
> 
> 时间：2012-07-27T08:48:32.940
> 
> 标签：concurrency, proxy, netty

我正在做一个使用 netty 构建文件传输代理的项目，它应该可以有效地处理高并发。

这是我的结构：

**Back Server**，一个普通的文件服务器，就像 netty.io 上的 Http(File Server) 示例一样，它接收并确认请求并使用 ChunkedBuffer 或零拷贝发送文件。

**Proxy**，同时具有 NioServerSocketChannelFactory 和 NioClientSocketChannelFactory ，都使用 cachedThreadPool，监听客户端的请求并将文件从**Back Server**获取回客户端。一旦一个新的客户端被接受，NioServerSocketChannelFactory 创建的新接受的 Channel(channel1) 并等待请求。一旦收到请求，**Proxy将使用 NioClientSocketChannelFactory 与****Back Server**建立新的连接，新的 Channel(channel2) 将向 Back Server 发送请求并将响应传递给客户端。每个通道 1 和通道 2 使用自己的管道。

更简单地说，程序是

1.  频道1已接受

2.  channel1 收到请求

3.  通道2连接到后台服务器

4.  channel2 向后端服务器发送请求

5.  channel2 从后端服务器接收响应（包括文件）

6.  通道 1 将从通道 2 得到的响应发送给客户端

7.  传输完成后，通道 2 关闭，通道 1 在刷新时关闭。（每个客户端只发送一个请求）

由于所需的文件可能很大（10M），因此当 channel1 不可写时，代理会停止 channel2.readable，就像 netty.io 上的示例代理服务器一样。

使用上述结构，每个客户端都有一个接受的 Channel，一旦发送请求，它也对应一个客户端 Channel，直到传输完成。

然后我使用 ab(apache bench) 向代理发起数千个请求并评估请求时间。代理、后端服务器和客户端是一个机架上的三个盒子，没有加载其他流量。

结果很奇怪：

1.  文件大小 10MB，并发为 1 时，连接延迟非常小，但是当并发从 1 增加到 10 时，top 1% 的连接延迟变得非常高，高达 3 秒。其他 99% 非常小。当并发增加到 20 时，1% 变为 8 秒。如果并发高于 100，它甚至会导致 ab 超时。 90% 的处理延迟通常与并发呈线性关系，但在随机数量的并发下，1% 可能异常高（因多次测试而异）。

2.  文件大小 1K，并发低于 100 时一切正常。

3.  将它们放在一台本地机器上，没有连接延迟。

谁能解释这个问题并告诉我哪一部分是错的？我在网上看到了许多基准测试，但它们是纯粹的乒乓测试，而不是这种大文件传输和代理的东西。希望这对你们感兴趣:)

谢谢！

==================================================== =======================================

今天阅读了一些源代码后，我发现有一个地方可能会阻止新套接字被接受。在 NioServerSocketChannelSink.bind() 中，boss 执行器将调用 Boss.run()，其中包含一个用于接受传入套接字的 for 循环。在此循环的每次迭代中，在获得接受的通道后，将调用 AbstractNioWorker.register() 假设将新套接字添加到在工作执行器中运行的选择器中。但是，在 register() 中，必须在调用 worker 执行器之前检查一个名为 startStopLock 的互斥锁。这个 startStopLock 也用在 AbstractNioWorker.run() 和 AbstractNioWorker.executeInIoThread() 中，它们在调用工作线程之前都会检查互斥锁。换句话说，startStopLock 用在 3 个函数中。如果在 AbstractNioWorker.register() 中被锁定，则 Boss 中的 for 循环。run() 将被阻止，这可能导致传入的接受延迟。希望这能有所帮助。

# html - 从 chrome 扩展获取当前页面的源 HTML

> ID：11684454
> 
> 赞同：95
> 
> 时间：2012-07-27T08:48:59.043
> 
> 标签：html, google-chrome-extension

我有一个 chrome 扩展。我需要从当前页面的 HTML 源代码分析。我在这里找到了各种带有背景页面和内容脚本的解决方案，但没有一个对我有帮助。这是我到目前为止所拥有的：

`manifest.json`

```
{
  "name": "Extension",
  "version": "1.0",
  "description": "Extension",
  "browser_action": {
    "default_icon": "bmarkred.ico",
    "popup": "Test.html"
  },
  "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["content.js"]
    }
  ],
  "background": {
    "page": "backgroundPage.html"
  },
  "permissions": [
    "cookies",
    "tabs",
    "http://*/*", 
    "https://*/*"
  ]
} 
```

`background.html`

```
<html>
<head>
<script type="text/javascript">
    try {
        chrome.tabs.getSelected(null, function (tab) {
            chrome.tabs.sendRequest(tab.id, {action: "getSource"}, function(source) {
                alert(source);
            });
        });
    }
    catch (ex) {
        alert(ex);
    }
</script>
</head>
</html> 
```

`content.js`

```
chrome.extension.onRequest.addListener(function(request, sender, callback) {
    if (request.action == "getSource") {
        callback(document.getElementsByTagName('html')[0].innerHTML);
    }
}); 
```

警报始终提醒未定义。即使我在 content.js 文件中将回调函数更改为：

```
callback('hello'); 
```

还是一样的结果。我究竟做错了什么？也许我走错了路。我真正需要的是：当用户打开扩展弹出窗口时（并且只有那时），我需要当前页面的 HTML 以便我可以分析它。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-07-27T21:54:20.547

将脚本注入您要从中获取源的页面并将其发送回弹出窗口......

**清单.json**

```
{
  "name": "Get pages source",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Get pages source from a popup",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": ["tabs", "<all_urls>"]
} 
```

**popup.html**

```
<!DOCTYPE html>
<html style=''>
<head>
<script src='popup.js'></script>
</head>
<body style="width:400px;">
<div id='message'>Injecting Script....</div>
</body>
</html> 
```

**popup.js**

```
chrome.runtime.onMessage.addListener(function(request, sender) {
  if (request.action == "getSource") {
    message.innerText = request.source;
  }
});

function onWindowLoad() {

  var message = document.querySelector('#message');

  chrome.tabs.executeScript(null, {
    file: "getPagesSource.js"
  }, function() {
    // If you try and inject into an extensions page or the webstore/NTP you'll get an error
    if (chrome.runtime.lastError) {
      message.innerText = 'There was an error injecting script : \n' + chrome.runtime.lastError.message;
    }
  });

}

window.onload = onWindowLoad; 
```

**getPagesSource.js**

```
// @author Rob W <http://stackoverflow.com/users/938089/rob-w>
// Demo: var serialized_html = DOMtoString(document);

function DOMtoString(document_root) {
    var html = '',
        node = document_root.firstChild;
    while (node) {
        switch (node.nodeType) {
        case Node.ELEMENT_NODE:
            html += node.outerHTML;
            break;
        case Node.TEXT_NODE:
            html += node.nodeValue;
            break;
        case Node.CDATA_SECTION_NODE:
            html += '<![CDATA[' + node.nodeValue + ']]>';
            break;
        case Node.COMMENT_NODE:
            html += '<!--' + node.nodeValue + '-->';
            break;
        case Node.DOCUMENT_TYPE_NODE:
            // (X)HTML documents are identified by public identifiers
            html += "<!DOCTYPE " + node.name + (node.publicId ? ' PUBLIC "' + node.publicId + '"' : '') + (!node.publicId && node.systemId ? ' SYSTEM' : '') + (node.systemId ? ' "' + node.systemId + '"' : '') + '>\n';
            break;
        }
        node = node.nextSibling;
    }
    return html;
}

chrome.runtime.sendMessage({
    action: "getSource",
    source: DOMtoString(document)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-14T19:25:37.777

这是我的解决方案：

```
chrome.runtime.onMessage.addListener(function(request, sender) {
        if (request.action == "getSource") {
            this.pageSource = request.source;
            var title = this.pageSource.match(/<title[^>]*>([^<]+)<\/title>/)[1];
            alert(title)
        }
    });

    chrome.tabs.query({ active: true, currentWindow: true }, tabs => {
        chrome.tabs.executeScript(
            tabs[0].id,
            { code: 'var s = document.documentElement.outerHTML; chrome.runtime.sendMessage({action: "getSource", source: s});' }
        );
    }); 
```

# c++ - 如何使用 GDI+ 绘制透明 BMP

> ID：11684455
> 
> 赞同：2
> 
> 时间：2012-07-27T08:49:04.220
> 
> 标签：c++, transparency, gdi+, bmp

我目前正在编辑一些旧的 GDI 代码以使用 GDI+，但在绘制具有透明背景的 BMP 文件时遇到了问题。旧的 GDI 代码没有使用任何明显的额外代码来绘制透明背景，所以我想知道如何使用 GDI+ 来实现这一点。

我当前的代码看起来像这样

```
HINSTANCE hinstance = GetModuleHandle(NULL);
bmp = Gdiplus::Bitmap::FromResource(hinstance, MAKEINTRESOURCEW(IDB_BMP));
Gdiplus::Graphics graphics(pDC->m_hDC);
graphics.DrawImage(&bmp, posX, posY); 
```

我还尝试通过使用克隆方法并将位图绘制到新创建的位图从资源中创建一个新位图，但都没有帮助。两次我都使用了 PixelFormat32bppPARRGB。

然后我尝试使用 alpha 混合，但这样整个图像变得透明，而不仅仅是背景：

```
Gdiplus::ColorMatrix clrMatrix = { 
    1.0f, 0.0f, 0.0f, 0.0f, 0.0f,
    0.0f, 1.0f, 0.0f, 0.0f, 0.0f,
    0.0f, 0.0f, 1.0f, 0.0f, 0.0f,
    0.0f, 0.0f, 0.0f, 0.5f, 0.0f,
    0.0f, 0.0f, 0.0f, 0.0f, 1.0f
};

Gdiplus::ImageAttributes imgAttr;
imgAttr.SetColorMatrix(&clrMatrix);

graphics.DrawImage(&bmp, destRect, 0, 0, width(), height(), Gdiplus::UnitPixel, &imgAttr); 
```

透明度信息已包含在图像中，但我不知道如何在绘制图像时应用它。如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-09T00:15:19.567

一个迟到的答案，但是：

```
ImageAttributes imAtt;    
imAtt.SetColorKey(Color(255,255,255), Color(255,255,255), ColorAdjustTypeBitmap); 
```

将使`white (255,255,255)`您使用此图像属性的任何位图透明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:32:16.123

最简单的解决方案是使用 BMP 以外的其他格式。

您需要这些位来包含 alpha 数据，并且您需要 Bitmap 采用具有 alpha 数据的格式。当您使用 GDI+ 加载 BMP 时，它将始终使用不带 alpha 的格式，即使 BMP 具有 alpha 通道。我相信数据存在于图像位中，但没有被使用。

克隆或绘制到 PixelFormat32bppPARGB 位图时的问题是 GDI+ 会将图像数据转换为新格式，这意味着丢弃 alpha 数据。

假设它正确加载位，您需要做的是将位直接复制到另一个具有正确格式的位图。您可以使用[Bitmap::LockBits](http://msdn.microsoft.com/en-us/library/ms536298%28v=vs.85%29.aspx)和[Bitmap::UnlockBits](http://msdn.microsoft.com/en-us/library/ms536301%28v=vs.85%29.aspx)来做到这一点。（确保使用其原始像素格式锁定每个位图，这样就不会进行任何转换。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T07:24:55.050

我有同样的问题。透明 BMP 没有正确显示，不幸的是，PNG 不能直接从资源中加载（除非添加相当多的代码，将它们复制到流中并从流中加载它们）。我想避免这段代码。
我使用的位图也只使用两种颜色（背景和徽标）。拥有一个 Alpha 通道意味着我需要用更高的颜色深度而不是只有 2 位颜色深度来保存它们。

埃文的回答正是我正在寻找的:-)

我使用左上角像素的颜色作为透明色，而不是白色：

```
Gdiplus::Color ColourOfTopLeftPixel;
Gdiplus::Status eStatus = m_pBitmap->GetPixel(0, 0, &ColourOfTopLeftPixel);
_ASSERTE(eStatus == Gdiplus::Ok);

// The following makes every pixel with the same colour as the top left pixel (ColourOfTopLeftPixel) transparent.
Gdiplus::ImageAttributes ImgAtt;
ImgAtt.SetColorKey(ColourOfTopLeftPixel, ColourOfTopLeftPixel, Gdiplus::ColorAdjustTypeBitmap); 
```

# visual-studio - 为整个团队设置 Visual Studio 格式选项

> ID：11684457
> 
> 赞同：27
> 
> 时间：2012-07-27T08:49:15.147
> 
> 标签：visual-studio, code-formatting

我们团队中的不同开发人员在这里有截然不同的复选框：

![Visual Studio 格式化选项](../Images/fb85dd3a6b1a12c5bfa27f63f322a87b.png)

因此，Visual Studio 不断重新格式化代码，这确实污染了我们的提交。

我想要的是在每个开发人员的计算机上运行一个*任何东西*（`.reg`文件或其他东西），以便这些设置保持一致。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-08-31T18:25:42.283

从 VS2017 开始，[考虑](https://devblogs.microsoft.com/dotnet/code-style-configuration-in-the-vs2017-rc-update/)[`.editorconfig`](http://editorconfig.org/)文件并允许覆盖本地首选项。将其置于项目解决方案的根目录（甚至更高），受源代码控制，以便将其与源代码一起分发给每个开发人员。

您可以通过 VS（自 v15.3 起）特定属性设置 .Net 编码约定，[此处](https://docs.microsoft.com/en-us/dotnet/fundamentals/code-analysis/code-style-rule-options)记录。

示例文件：

```
root = true

[*]
end_of_line = CRLF
insert_final_newline = true

[*.cs]
indent_style = tab
dotnet_sort_system_directives_first = true
csharp_space_after_cast = true

[*.xsd]
indent_style = tab

[*.json]
indent_style = space
indent_size = 2

[*.xml]
indent_style = space
indent_size = 2

[*.cshtml]
indent_style = space
indent_size = 4 
```

对于 VS2017，[IntelliCode](https://docs.microsoft.com/en-us/visualstudio/intellicode/intellicode-visual-studio)实验扩展具有生成编辑器配置文件的功能，请参阅此[博客文章](https://devblogs.microsoft.com/visualstudio/visual-studio-intellicode-inferring-coding-conventions-for-consistent-code/)了解更多信息。

从 VS2019 开始，VS 可以从[“新文件”模板](https://docs.microsoft.com/en-us/visualstudio/ide/create-portable-custom-editor-options?view=vs-2019#add-an-editorconfig-file-to-a-project)、[您的代码库](https://docs.microsoft.com/en-us/visualstudio/intellicode/code-style-inference)（右键单击项目 > Add > New EditorConfig）或[您当前的 VS 配置](https://docs.microsoft.com/en-us/visualstudio/ide/code-styles-and-code-cleanup?view=vs-2019#code-styles-in-editorconfig-files)（工具 > 选项 > 文本编辑器 > [C# 或基本] > 代码样式 > 常规）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-27T09:24:57.450

您可以使用“导入和导出设置”选项从工具菜单中的一个 Visual Studio 实例导出所需的设置。这会将设置保存到 .vssettings 文件（实际上是一个 xml 文件）中，其中包含类似

```
<PropertyValue name="TabSize">4</PropertyValue> 
```

然后，您可以通过用户界面（相同的菜单选项）在其他机器上导入这些设置，也可以使用命令行从命令行加载它们

```
devenv.exe /Resetsettings <your settingsfile> 
```

此命令行设置记录[在此处](http://msdn.microsoft.com/en-us/library/ms241273%28v=vs.80%29.aspx)

# android - Seekbar 在点击时的拇指

> ID：11684463
> 
> 赞同：9
> 
> 时间：2012-07-27T08:49:32.357
> 
> 标签：android, seekbar

我想在搜索栏的拇指上注册一个可点击事件，以便在用户点击它时触发一个事件。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-24T12:55:14.377

Combining zwebie and Nermeens answers to the proper solution:

```
seekbar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
    private int mProgressAtStartTracking;
    private final int SENSITIVITY;

    @Override
    public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
        // handle progress change
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        mProgressAtStartTracking = seekBar.getProgress();
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        if(Math.abs(mProgressAtStartTracking - seekBar.getProgress()) <= SENSITIVITY){
            // react to thumb click
        }
    }
}); 
```

So this really fires only on thumb click, not on thumb move and not on click on other parts of the seekbar.

You can adjust sensitivity, because sometimes a click already moves the thumb a little bit and allowing little changes while still clicking is less frustrating. A good value here depends on the size of the seekbar and the max value it can have. For me 3 worked well on a full-width seekbar with 50 max on a portrait layout.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:33:51.133

我能够通过以下方式实现这一目标：

```
seekBar.setOnTouchListener(new OnTouchListener() 
{
    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        if(event.getAction() == MotionEvent.ACTION_MOVE)
        {
            changedPosition = true;
            seekBar.setProgress(seekBar.getProgress());
            return false;
        }
        else if (event.getAction() == MotionEvent.ACTION_UP)
        {
            if(!changedPosition)
            {
                  //do action here
            }
        }
   } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T22:31:19.207

我以 Bijom 的回答为灵感。这将在拇指移动时触发，因此如果用户不点击拇指它就不会移动。希望这可以帮助。:)

如果您对它的工作原理有任何疑问，请随时发表评论。

```
 mSeekBarSpeed.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        int progress = mSeekBarSpeed.getProgress();

        boolean started = false; //use this variable to see whether the user clicked the right place

        @Override
        public void onProgressChanged(SeekBar seekBar, int progressValue, boolean fromUser) {
            if(!started){ //check to see if user clicks the right place
                //if the user clicks within a specific threshold
                float threshold = (float)seekBar.getMax() / seekBar.getWidth() * seekBar.getThumb().getIntrinsicWidth() / 2;
                if(Math.abs(progressValue - progress) < threshold){
                     if(fromUser){ //checks if user actually clicked it
                         started = true;
                     }

                }else{
                    seekBar.setProgress(progress); //set to original progress
                    onStopTrackingTouch(seekBar); //not really necessary, keep or delete based on your needs
                    return; //get out of method
                }
            }

            if(started) {

                progress = progressValue; //update progress variable
                System.out.println("onProgressChanged:" + progress + "/" + seekBar.getMax());

                //DO WHAT YOU NEED TO DO WHEN PROGRESS IS CHANGING

            }
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            System.out.println("onStartTracking:" + progress + "/" + seekBar.getMax());
        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            System.out.println("onStopTracking:" + progress + "/" + seekBar.getMax());
            //DO WHATEVER YOU NEED TO DO WHEN PROGRESS IS DONE CHANGING

            started = false; //remember to set variable to false
        }

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:52:26.940

我这样做：

```
pagesSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() { //listener
        @Override
        public void onStopTrackingTouch(final SeekBar seekBar) {
            //add your event here
        }

        @Override
        public void onStartTrackingTouch(final SeekBar seekBar) {
        }

        @Override
        public void onProgressChanged(final SeekBar seekBar, final int progress, final boolean fromUser) {
                updateControls(progress, false);
        }
    }); 
```

# c# - Match.Value 和国际字符

> ID：11684464
> 
> 赞同：6
> 
> 时间：2012-07-27T08:49:37.013
> 
> 标签：c#, regex, encoding, rtf

**更新**希望这篇文章对使用 RichTextBoxes 的编码人员有所帮助。匹配对于普通字符串是正确的，我没有看到这个并且我没有看到richTextBox.Rtf 中的“ä”转换为“\e4r”！所以 Match.Value 是正确的 - 人为错误。

RegEx 找到正确的文本，但 Match.Value 是错误的，因为它将德语“ä”替换为“\'e4”！

让 example_text = " *Primär-ABC* " 并让我们使用以下代码

```
String example_text = "<em>Primär-ABC</em>";
Regex em = new Regex(@"<em>[^<]*</em>" );
Match emMatch = em.Match(example_text); //Works!
Match emMatch = em.Match(richtextBox.RTF); //Fails!
while (emMatch.Success)
{
  string matchValue = emMatch.Value;
  Foo(matchValue) ...
} 
```

然后 emMatch.Value 返回“ *Prim\'e4r-ABC* ”而不是“ *Primär-ABC* ”。

德语 ä 转换为 \'e4! 因为我想使用确切的字符串，所以我需要将 emMatch.Value 设为*Primär-ABC* - 我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:54:47.400

你在什么情况下这样做？

```
string example_text = "<em>Ich bin ein Bärliner</em>";
Regex em = new Regex(@"<em>[^<]*</em>" );
Match emMatch = em.Match(example_text);
while (emMatch.Success)
{
    Console.WriteLine(emMatch.Value);
    emMatch = emMatch.NextMatch();
} 
```

这`<em>Ich bin ein Bärliner</em>`在我的控制台中输出

~~问题可能不是你得到了错误的*值*，而是你得到了一个没有正确*显示*的值的表示。这可能取决于很多事情。尝试使用 UTF8 编码将值写入文本文件，看看它是否仍然不正确。~~

**Edit:** Right. The thing is that you are getting the text from a WinForms `RichTextBox` using the `Rtf` property. This will not return the text as is, but will return the RTF representation of the text. RTF is not plain text, it's a markup format to display *rich* text. If you open an RTF document in e.g. Notepad you will see that it has a lot of weird codes in it - including `\'e4` for every 'ä' in your RTF document. If you would've used some markup (like bold text, color etc) in the RTF box, the `.Rtf` property would return that code as well, looking something like `{\rtlch\fcs1 \af31507 \ltrch\fcs0 \cf6\insrsid15946317\charrsid15946317 test}`

So use the `.Text` property instead. It will return the actual plain text.

# javascript - 我们可以在 XHTML 中使用 AJAX 吗？

> ID：11684466
> 
> 赞同：0
> 
> 时间：2012-07-27T08:49:43.820
> 
> 标签：javascript, ajax, xhtml

我们可以使用 AJAX 来更新 XHTML 页面吗？为了连接html页面，我们曾经这样写：

```
 xhr.onreadystatechange = function(){
        if(xhr.readyState == 4){
            document.getElementById("target").innerHTML=xhr.responseText;
        }
    } 
```

但是，我们不能更改`innerHTML`为`innerXHTML`，因为 AJAX 不接受它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:51:16.077

是的，您可以使用 ajax 更新 XHTML 页面。您仍然使用`innerHTML`（或 DOM 方法）。HTML5 规范中的[`innerHTML`](http://www.w3.org/TR/html5/embedded-content-0.html#dom-innerhtml)描述描述了如何处理 XML 与 HTML。

关于各种 DOM 方法，一些阅读/参考资料：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)（也适用于 XHTML 文档）
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:58:53.200

我的第一个想法是“当然！”。正如 TJ Crowder 指出的那样，[遵循规范](http://www.w3.org/TR/html5/embedded-content-0.html#dom-innerhtml)的标准浏览器应该没有问题。

但是，似乎确实有人在谈论在旧版本的 IE 中使用 innerHTML 和维护格式良好的 XHTML 标记的一些问题。

**请记住，这是旧信息。它可能不再是一个问题。**

[http://www.stainlessvision.com/jquery-html-vs-innerxhtml](http://www.stainlessvision.com/jquery-html-vs-innerxhtml)（使用innerHTML） [http://www.stevetucker.co.uk/page-innerxhtml.php](http://www.stevetucker.co.uk/page-innerxhtml.php)

我的经验恰恰相反，即使用`innerHTML`插入标记*不是*问题。

AJAX 部分在这里真的无关紧要；问题是是否`innerHTML`可以信任以保持插入到文档中的标记的完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:29:37.813

我的个人资料中链接的站点完全以 XHTML 的形式提供，即实际的 XHTML、application/xhtml+xml。例如，单击右上角的“站点选项”将通过 AJAX 加载内容。

*   代码不是文本，不要使用 responseText，使用 responseXML。
*   永远不要使用 innerHTML，它是一种与 DOM 不兼容的专有 Microsoft JScript 方法。使用它会给您的代码添加大量的歧义，JavaScript 可能会看到您通过 AJAX 加载的元素，但可能不会。
*   像我一样使用 importNode，这是两个不同的文档所有者，您必须使用 importNode 从不同的文档中加载内容。

# maven - 一个 maven 项目如何依赖另一个本地 maven 项目？

> ID：11684467
> 
> 赞同：3
> 
> 时间：2012-07-27T08:49:45.427
> 
> 标签：maven

我有两个 Maven 项目`project/foo/pom.xml`和`project/bar/pom.xml`. 我`foo`依赖于`bar, and I want that every time`foo/pom.xml `compiles, it'll automatically compile`bar`。

我怎么能用 Maven 做到这一点？

**更新：**我可以将它们都放入父项目中，但是，如果我想`mvn jetty:run`在子项目上运行，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:17:42.347

# 选项1

[在Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+maven2+project)中设置两个构建，它可以检测项目之间的依赖关系

> 从模块依赖项自动构建链接
> 
> Jenkins 从您的 POM 中读取项目的依赖项，如果它们也是在 Jenkins 上构建的，则触发器的设置方式是，其中一个依赖项中的新构建将自动启动项目的新构建。

# 选项 2

如果两个 Maven 项目密切相关（一起发布，共享相同的修订号），那么也许它们真的是同一个项目的两个模块？

如果是这种情况，请阅读以下文档以获取有关如何创建父 POM 的指南：

*   [http://maven.apache.org/guides/introduction/introduction-to-the-pom.html](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:29:42.250

您可以将它们组合成一个具有两个模块的项目。

一个示例项目结构：

```
父母（pom）
    |- 富（罐子）
    |- 条（罐）

```

在父 pom 中：

```
<groupId>org.me</groupId>
<artifactId>parent-project</artifactId>
<packaging>pom</packaging>

<modules>
    <module>foo</module>
    <module>bar</module>
</modules> 
```

在每个子 pom 中：

```
<artifactId>foo</artifactId>
<packaging>jar</packaging>

 <parent>
    <groupId>org.me</groupId>
    <artifactId>parent-project</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent> 
```

要使用 Maven 构建项目（两个模块），请从父目录执行：

```
$ mvn install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:01:31.703

单独使用 maven 是不可能的。您可以获得的最接近的方法是将两者都作为[聚合器 POM 的模块](http://maven.apache.org/pom.html#Aggregation)，因此您可以使用单个命令构建两者。请注意，a`mvn install`已经考虑自上次构建以来是否发生了更改，因此您在那里节省了一些 CPU 周期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T11:39:20.170

首先，设置一个多模块构建，如 Daniel 所示。然后切换到父 POM 所在的目录。然后，例如要安装 foo 并在之前自动安装 bar，请键入：

```
mvn --also-make --projects foo install 
```

这将检查反应器内的依赖关系，然后解析在 bar 上运行安装生命周期，然后再在 foo 上运行安装生命周期。

这适用于任何生命周期或目标。但是请注意，如果您指定 jetty:run，那么这个目标将在两个项目中运行，这可能不是您想要的。

您可以在此处找到有关此功能的更多信息：[http ://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

# c# - 方法隐含的参数解释

> ID：11684473
> 
> 赞同：1
> 
> 时间：2012-07-27T08:50:16.967
> 
> 标签：c#, visual-studio-2010

从 WinForms 运行以下命令

```
System.Windows.Forms.MessageBox.Show("A", "B"); 
```

第一个参数“A”是正文，“B”作为标题出现。

`Show`是一种重载方法 - VS IDE 显示 21 个重载，但带有 2 个参数的选项是

```
Show(IWin32Window owner,string text) 
```

我不明白`IWin32Window owner`与上面的“A”有什么关系……还是对提供的参数有隐含的解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:51:32.440

还有一个字符串，字符串[重载](http://msdn.microsoft.com/en-us/library/20stz12s.aspx)：

```
public static DialogResult Show(
    string text,
    string caption
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:52:29.273

在你的情况下[MessageBox.Show Method (String, String)](http://msdn.microsoft.com/en-us/library/20stz12s.aspx)被应用。

# html - 将变量从 HTML 传递到 Flash ActionScript 3.0

> ID：11684476
> 
> 赞同：0
> 
> 时间：2012-07-27T08:50:28.183
> 
> 标签：html, actionscript-3, actionscript, flash

我只想将一些参数从 HTML 传递给 ActionScript 3.0。当我搜索它时，我看到我可以使用 I CAN USE [ flashvars ]

```
 <param name="flashvars" value="serverUrl=rtmp://X.X.X.X/live&streamName=Camera.stream"> 
```

并且可以从 AS3 访问这些参数：

```
var serverUrl : String =  root.loaderInfo.parameters.serverUrl;
var serverStreamName : String = root.loaderInfo.parameters.serverStreamName; 
```

但是当我尝试这个时，我看到 serverUrl 和 serverStreamName 为空：

```
var txt:TextField = new TextField(); 
txt.text =" URL: " + serverUrl ;
addChild(txt) 
```

**我做错了什么？任何的想法？**

笔记：

我调用 SWF 文件的 HTML：

```
<noscript>
    <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="..."....>
    <param name="allowScriptAccess" value="sameDomain" />
    <param name="allowFullScreen" value="false" />
    <param name="movie" value="CustomVideoPlayer.swf" />
    <param name="flashvars" value="serverUrl=rtmp://X.X.X.X/live&streamName=Camera.stream">
    <param name="quality" value="high" /><param name="bgcolor" value="#ffffff" />   
    <embed src="CustomVideoPlayer.swf" quality="high" bgcolor="#ffffff" width="550" height="400" name="CustomVideoPlayer" ...>
    </object>
</noscript> 
```

并尝试像这样从 AS3 中获取这些参数：

```
var serverUrl : String =  root.loaderInfo.parameters.serverUrl;
var serverStreamName : String = root.loaderInfo.parameters.serverStreamName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:12:32.013

我会评论使用对象标签而不是嵌入，[EMBED vs. OBJECT](https://stackoverflow.com/questions/1244788/embed-vs-object)

但是现在有了对 HTML5 嵌入的所有支持，我不确定。

无论如何，我总是更喜欢使用像[swfobjectct](http://code.google.com/p/swfobject/)这样的流行库，只是为了方便和安全。

话虽如此，这就是您使用 swfobject 和 Javascript 的方式：

```
 var flashVars = {};
 flashVars.parameter1 = "abc";
 flashVars.parameter2 = "bbc";    

 swfobject.embedSWF("myMovie.swf", "myDIV", "720", "600", "9.0.0", "expressInstall.swf", flashVars, {}, {}, swfLoadComplete); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:37:55.340

可能导致参数丢失的一件事，即为空，是如果您还没有`flashvars`在`<embed>`标记中指定。

标签与标签`<param>`一起使用`<object>`，由渲染/执行`<object>`标签的浏览器读取，而不是由使用`<embed>`标签的浏览器读取。你的例子中的`<embed>`标签被缩短了，就像我的这里一样，所以也许你已经有了它，但你还需要包括`flashvars`那里，比如：

```
<embed src="CustomVideoPlayer.swf" flashvars="serverUrl=rtmp://X.X.X.X/live&streamName=Camera.stream" ...> 
```

换句话说，您需要将 flashvars 包含两次，一次 for`<object>`和一次 for `<embed>`，就像其他东西一样，例如`allowFullScreen`.

# svg - How to merge multiple SVGs files on a html page?

> ID：11684485
> 
> 赞同：5
> 
> 时间：2012-07-27T08:50:49.157
> 
> 标签：svg

I have been trying to merge two SVG files into single SVG file. Everywhere I found is using pageSet. Below code is to merge two SVG file to a single file.

```
<pageSet>
    <page>
        <circle cx="300" cy="150" r="90" fill="red" stroke="black"
                stroke-width="4" fill-opacity="0.7" />
    </page>
    <page>
        <circle cx="240" cy="250" r="90" fill="green" stroke="black"
                stroke-width="4" fill-opacity="0.7" />
    </page>
    <page>
        <circle cx="360" cy="250" r="90" fill="blue" stroke="black"
                stroke-width="4" fill-opacity="0.7" />
    </page>
</pageSet> 
```

I tried using the above code but, nothing is displaying.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T15:01:12.687

You can embed SVG files in an HTML document, one after another. For example, with either the SVG content inline:

```
<html><head>…&lt;/head><body>
  <svg xmlns="http://www.w3.org/2000/svg"><!-- SVG Data --></svg>
  <svg xmlns="http://www.w3.org/2000/svg"><!-- SVG Data --></svg>
  <svg xmlns="http://www.w3.org/2000/svg"><!-- SVG Data --></svg>
  <svg xmlns="http://www.w3.org/2000/svg"><!-- SVG Data --></svg>
</body></html> 
```

…or [referencing an external file](http://www.schepers.cc/svg/blendups/embedding.html):

```
<html><head>…&lt;/head><body>
  <object type="image/svg+xml" data="file1.svg"></object>
  <object type="image/svg+xml" data="file2.svg"></object>
  <object type="image/svg+xml" data="file3.svg"></object>
  <object type="image/svg+xml" data="file4.svg"></object>
</body></html> 
```

You can then use CSS to [control the page breaks when printing](https://developer.mozilla.org/en/CSS/page-break-before):

```
svg, object { page-break-before:always } 
```

# django - 先前在 FileField Django Form 中选择时如何取消选择某些内容？

> ID：11684488
> 
> 赞同：0
> 
> 时间：2012-07-27T08:51:06.980
> 
> 标签：django, django-forms, filefield, django-uploads

我有一个包含文件字段的表单来上传一些文件。有时会发生什么，一开始，我从浏览中选择一个文件来上传，但后来我意识到我不想再上传它了。我怎样才能让它再次为空？是不是这样一旦这个字段被填满就不能恢复为空？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:53:49.827

这可以用javascript来完成。

使用来自electrictoolbox.com[的 jQuery](http://www.electrictoolbox.com/clear-upload-file-input-field-jquery/)帖子引用清除上传文件输入字段：

> 函数 reset_html(id) { $('#'+id).html($('#'+id).html()); }
> 
> $(文档).ready(函数() {
> 
> ```
> var file_input_index = 0;
> $('input[type=file]').each(function() {
>     file_input_index++;
>     $(this).wrap('<div id="file_input_container_'+
>                   file_input_index+'"></div>');
>     $(this).after('<input type="button" value="Clear" 
>                    onclick="reset_html(\'file_input_container_'+
>                                          file_input_index+'\')"
>                    />');
> }); 
> ```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:16:41.987

如果您尝试发布未经验证的表单，当您重新呈现表单时，文件字段将为空。

有关更多解释，请参阅此问题。 [Django 表单文件字段在表单错误时消失](https://stackoverflow.com/questions/7893236/django-form-file-field-disappears-on-form-error)

以下对我有用。在您的 html 中添加一个清除按钮

```
<input type="submit" name = "submit-clear" value="clear file"> 
```

然后在您的视图中使用..处理此按钮

```
if 'submit-clear' in request.POST:
    return HttpResponseRedirect('') 
```

这应该清除所有文件字段，但也会删除用户所做的任何其他设置，如果您想保留其他设置并仅删除文件字段，请确保表单不会以某种方式验证以便再次呈现。

# ruby-on-rails - 使用 rails 中的 mechanize 删除类的实例

> ID：11684490
> 
> 赞同：1
> 
> 时间：2012-07-27T08:51:13.113
> 
> 标签：ruby-on-rails, mechanize

我正在使用 mechanize 处理表单。我已经使用 mechanize 解析了表单，输出如下：

```
{forms
 #<Mechanize::Form
 {name nil}
 {method "POST"}
 {action "/dashboard/checks/50114dbeae6f61b428000ad8"}
 {fields
  [hidden:0x60c476a type: hidden name: _method value: put]
  [text:0x60c4616 type: text name: check[name] value: Testing]
  [text:0x60c4512 type: text name: check[url] value: http://www.pintile.com]
  [text:0x60c445e type: text name: check[interval] value: 120]
  [text:0x60c435a type: text name: check[maxTime] value: 1500]
  [textarea:0x60c4116 type:  name: check[tags] value: ]}
 {radiobuttons}
 {checkboxes}
 {file_uploads}
 {buttons
  [button:0x60c3d88 type: submit name:  value: ]
  [button:0x60c3d24 type: submit name: delete value: ] 
```

此表单中有 2 个按钮 **保存更改**（第 1 个）、**删除**（第 2 个）、 **我使用以下代码来保存更改，它工作正常：**

 **```
form.field_with(:name => "check[name]").value = "Testing"
button = form.buttons.first
agent.submit(form, button) 
```

更改已成功保存。但是当我尝试使用下面的代码删除它不起作用：

```
button = form.buttons.first
agent.submit(form, button) 
```

它什么也不做。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:56:19.783

如果网站是典型的 Rails 表单，则删除按钮很可能是 JavaScript 操作。机械化不支持 JavaScript。你可能想使用像 capybara 这样的东西和 web kit 驱动程序，它有完整的 JavaScript 支持和你在 mechanize 中已经拥有的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:04:13.120

The code snippet below work well with link.Have you tried click

```
agent.get("http://your url")

agent.page.link_with(:text => "link name").click 
```

Give it a try.. Else as mentioned above you can use Capybara

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:20:26.627

Delete is the last button. Therefore you want:

```
button = form.buttons.last
agent.submit(form, button) 
```

or more simply:

```
form.submit form.buttons.last 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T09:30:42.680

If Mechanize is good enough for you and you do not require any javascript support that would bring Capybara, you should be able to emulate what the Javascript does. In this case, the source would be needed to better know what append, but I guess the value of the hidden field `_method` is replaced by `delete` prior the submit.**

# android - 海信设备上的 MediaStore.EXTRA_OUTPUT 错误，但在索尼设备上工作

> ID：11684494
> 
> 赞同：1
> 
> 时间：2012-07-27T08:51:18.947
> 
> 标签：android, android-intent, camera, mediastore

这是我的代码：

```
String folderPath = "/sdcard/BarcodePicture/";

File file = new File(folderPath + "image_" + UniqueID + ".jpg");
Uri outputFileUri = Uri.fromFile(file);

i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
startActivityForResult(i, cameraData); 
```

此代码适用于我的索尼设备，但在海信设备上，当我在提示时选择“确定”时，它什么也不做。索尼设备上没有提示。

我认为错误来自`i.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);`，当我评论它时，它可以工作，但我想要的是捕获的图像保存在 SDCard 文件夹中。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:48:53.420

看看这个答案：[https ://stackoverflow.com/a/8074193/1454719](https://stackoverflow.com/a/8074193/1454719)

我的 smasung 设备中的 SD 卡是 /mnt/sdcard :)

# bash - 用不同的模式在bash中提取字符串的某个部分

> ID：11684495
> 
> 赞同：1
> 
> 时间：2012-07-27T08:51:21.153
> 
> 标签：bash

我有这个文件：

```
CLUSTERS=SP1,SP2,SP3

FNAME_SP1="REWARDS_BTS_SP1_<GTS>.dat"
FNAME_SP2="DUMP_LOG_SP2_<GTS>.dat"
FNAME_SP3="TEST_CASE_TABLE_SP3_<GTS>.dat" 
```

我想从这些中得到的是：

```
REWARDS_BTS_SP1_
DUMP_LOG_SP2_
TEST_CASE_TABLE_SP3_ 
```

我遍历 CLUSTERS 字段，获取值，并使用它来查找适当的 FNAME_<CLUSTERNAME> 值。基本上， CLUSTERS 值总是在字符串的 _<GTS> 部分之前。任何字符串模式都可以，只要 CLUSTERS 值出现在字符串末尾的 _<GTS> 之前。

有什么建议么？这是脚本的一部分。

```
 function loadClusters() {
        for i in `echo ${!CLUSTER*}`
        do
            CLUSTER=`echo ${i} | grep $1`
            if [[ -n ${CLUSTER} ]]; then
                CLUSTER=${!i}
                break;
            fi
        done

        echo -e ${CLUSTER}
    }

    function loadClustersCampaign() {
        for i in `echo ${!BPOINTS*}`
            do
                BPOINTS=`echo ${i} | grep $1`
                if [[ -n ${BPOINTS} ]]; then
                    BPOINTS=${!i}
                    break;
                fi
        done

        for i in `echo ${!FNAME*}`
            do
                FNAME=`echo ${i} | grep $1`
                if [[ -n ${FNAME} ]]; then
                    FNAME=${!i}
                    break;
                fi
        done

        echo -e ${BPOINTS}"|"${FNAME}
    }

    #get clusters
    clusters=$(loadClusters $1)

    for i in `echo $clusters | sed 's/,/ /g'`
        do
            file=$(loadClustersCampaign ${i/-/_} | awk -F"|" '{print $2}') ;

            echo $file;

            #then get the part of the $file variable
        done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:16:10.243

### 有趣的壳参数扩展

您可以使用匹配前缀表示法和间接扩展来获取所需的变量，并在每个结果上使用“删除后缀”扩展来仅收集您想要的文件名部分。例如：

```
FNAME_SP1='REWARDS_BTS_SP1_<GTS>.dat'
FNAME_SP2='DUMP_LOG_SP2_<GTS>.dat'
FNAME_SP3='TEST_CASE_TABLE_SP3_<GTS>.dat'

for cluster in "${!FNAME_SP@}"; do
    echo ${!cluster%%<GTS>*}
done 
```

这将打印出以下内容：

```
REWARDS_BTS_SP1_
DUMP_LOG_SP2_
TEST_CASE_TABLE_SP3_ 
```

但是您可以在循环内发出任何有效的 shell 命令，而不是使用 echo。

### 也可以看看

[http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:23:19.477

如果你喜欢这个的 awk 解决方案，下面可能会有用。

```
> echo 'FNAME_SP1="REWARDS_BTS_SP1_<GTS>.dat"' | awk -F"<GTS>" '{split($1,a,"=\"");print substr(a[2],2)}'
REWARDS_BTS_SP1_ 
```

更多详情如下：

```
> cat temp
LUSTERS=SP1,SP2,SP3

    FNAME_SP1="REWARDS_BTS_SP1_<GTS>.dat"
    FNAME_SP2="DUMP_LOG_SP2_<GTS>.dat"
    FNAME_SP3="TEST_CASE_TABLE_SP3_<GTS>.dat"

> awk -F"<GTS>" '/FNAME_SP/{split($1,a,"=");print substr(a[2],2)}' temp
REWARDS_BTS_SP1_
DUMP_LOG_SP2_
TEST_CASE_TABLE_SP3_
> 
```

# rendering - 我应该在 Sitecore 中的子布局之间使用什么渲染进行多变量测试

> ID：11684496
> 
> 赞同：1
> 
> 时间：2012-07-27T08:51:21.327
> 
> 标签：rendering, sitecore, sitecore6, multivariate-testing, sublayout

我有许多子布局我想在 Sitecore 中执行 MVT。所以我无法找到我应该使用哪个渲染来执行测试。

我参考了这篇文章

[Sitecore 中子布局的多变量测试](https://stackoverflow.com/questions/5949560/multivariate-testing-for-sublayouts-in-sitecore)

但我想在子布局之间执行 MVT。

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:38:29.687

我不确定您使用的是 OMS 还是 DMS，因此确切的步骤可能会有所不同。SDN上有一个关于这个主题的快速线程：

[http://sdn.sitecore.net/Forum/ShowPost.aspx?postid=28776](http://sdn.sitecore.net/Forum/ShowPost.aspx?postid=28776)

您需要为子布局定义不同的数据源，并将数据源绑定到测试变量。从上面的链接：

> 本质上，您需要将 XSLT Rendering 或 Sublayout 的数据源属性从 Context 项目更改为您的促销项目。您可以使用或不使用 OMS 来执行此操作。但是要按照您描述的方式执行此操作并衡量测试变量的成功，请按照以下步骤操作：
> 
> 在 Marketing Center 中，创建多变量测试项。定义测试策略（除了随机或粘性之外，您还可以实现自己的）。
> 
> 接下来，创建多元测试变量。为每个变量定义一个数据源。这是您的促销文件夹下的一个项目。请记住命名每个测试变量（名称字段）。
> 
> 对于在演示布局详细信息设置中定义促销子布局的位置，编辑控件属性。在对话框中，选择您之前创建的多变量测试。
> 
> 发布您的更改。

# java - javax.net.ssl.SSLProtocolException：v2 证书中不允许扩展

> ID：11684500
> 
> 赞同：2
> 
> 时间：2012-07-27T08:51:32.510
> 
> 标签：java, ssl, certificate

我正在尝试创建一个连接到 Netgear WAG102（接入点）的 Java 软件，该软件必须获取我的 wifi 网络的连接日志。

我的软件已经可以与其他 Netgear 接入点（例如 WG302v2）一起使用，但我找不到让它与 WAG102 一起使用的方法。我不断收到一个

> javax.net.ssl.SSLProtocolException：v2 证书中不允许扩展

在尝试打开与 AP 的安全 SSL 连接时。

附加信息：从 AP 发送的证书在 1 年前过期，所以我实施了臭名昭著的“TrustAllCerts”技巧，但仅此一项似乎没有帮助。

谷歌浏览器说证书是 v4 版本，但我的 java 软件一直说它是 v2 版本，然后在检查证书扩展时给出异常（据我所知，版本 v2 不支持扩展）。

我的问题是：尽管有这个问题，有没有办法让它工作？

这是我的代码：

```
private HttpsURLConnection createConnection(URL url) throws IOException{
HttpsURLConnection con=(HttpsURLConnection) url.openConnection();
con.setRequestMethod("POST");
con.setDoOutput(true);
con.setRequestProperty("Authorization", "Basic " + "**********");
con.setHostnameVerifier(new HostnameVerifier(){public boolean verify(String hostname, SSLSession session){return true;}});
TrustManager[] trustAllCerts=null;
SSLContext sslContext=null;
SSLSocketFactory sslSocketFactory;
try{
    trustAllCerts = new TrustManager[]{ new X509TrustManager(){
        public X509Certificate[] getAcceptedIssuers(){return null;}
        public void checkClientTrusted(X509Certificate[] chain, String authType){}
        public void checkServerTrusted(X509Certificate[] chain, String authType){}
    }};
    sslContext = SSLContext.getInstance( "SSL" );
    sslContext.init( null, trustAllCerts, new java.security.SecureRandom() );
    sslSocketFactory = sslContext.getSocketFactory();
    con.setSSLSocketFactory( sslSocketFactory );
    System.out.println("Response Code : " + con.getResponseCode());
    System.out.println("Cipher Suite : " + con.getCipherSuite());
    Certificate[] certs = con.getServerCertificates();
    for(Certificate cert : certs){
        System.out.println("Cert ext : "+cert);
        System.out.println("Cert Type : " + cert.getType());
        System.out.println("Cert Hash Code : " + cert.hashCode());
        System.out.println("Cert Public Key Algorithm : " + cert.getPublicKey().getAlgorithm());
        System.out.println("Cert Public Key Format : " + cert.getPublicKey().getFormat());
        System.out.println("\n");
    }
} catch (Exception e){e.printStackTrace();}
//printHTTPSCert(con);
return con;
} 
```

我在调用时遇到了异常`con.getResponseCode()`，基本上是因为我认为是在打开连接的时候。

该程序可与 www.google.com 和所有其他具有良好证书的站点正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T11:54:17.890

这里似乎有两个问题：

*   首先，它不应该是 V4 证书。可以使用定制工具将此数字放在版本字段中，但没有与之匹配的规范。最新的[X.509 规范](http://www.itu.int/rec/T-REC-X.509-200811-I/en)仅升级到 V3：

    ```
    Version ::= INTEGER { v1(0), v2(1), v3(2) } 
    ```

*   其次，[读取证书的 Java 代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/x509/X509CertInfo.java)使用了一个`!=`条件：

    ```
    (version.compare(CertificateVersion.V3) != 0) 
    ```

    如果它不是 V3，则假定它是 V2（如果您认为不应该有 V4，这是有道理的）。我认为其他实现可能会让这个不正确的证书通过使用`>=`条件来代替。

如果可能，最简单的方法是在路由器上安装一个新的、正确的证书。（根据你的截图，它也使用了 MD5 签名，现在不推荐。）

**编辑：**似乎这个证书是用一个`www.netgear.com`主题备用名称颁发的（即它对该主机名有效），这在路由器上是没有意义的。如果您正在部署它，您应该真正安装自己的证书，即使它是自签名的。

无论如何，可能有一个解决方法。似乎 BouncyCastle 实现`CertificateFactory`（由 JSSE 使用）在版本方面更加灵活。如果您在 Sun 提供者之前使用 BC 提供者，这应该可以工作。您可以获取 BC 提供程序 jar 并使用它（在建立连接之前），例如：

```
Security.insertProviderAt(new BouncyCastleProvider(), 1); 
```

# android - 如何在其中使用列表视图制作全屏垂直滚动视图

> ID：11684502
> 
> 赞同：2
> 
> 时间：2012-07-27T08:51:38.260
> 
> 标签：android, listview

![我的屏幕图像](../Images/841cf3c9c64b018fa2c97a98a0a40db0.png)

我想在垂直滚动视图模式下制作此页面，但是您可以在下面看到一个列表视图，我有来自 Web 服务的列表视图项目

**主要问题：**

我的屏幕正在滚动，但列表视图项不可滚动我只能从 Web 服务中找到第一个结果

我在 xml 中使用了 fill_parent 属性，仍然列表视图项显示在小窗口中。任何人请告诉我如何创建这种类型的屏幕我已经在网上搜索过但没有得到任何正确的想法..谢谢

这是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/main"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/main_back_ground" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingBottom="50dp" >

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <include
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    layout="@layout/header_mf" />

                <ImageButton
                    android:id="@+id/imageButton"
                    android:layout_width="60dp"
                    android:layout_height="30dp"
                    android:layout_gravity="right|center"
                    android:layout_marginRight="15dp"
                    android:background="@drawable/cg_report_btn" />

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="fill_parent"
                    android:layout_height="30dp"
                    android:layout_gravity="top"
                    android:layout_marginTop="50dp"
                    android:src="@drawable/header_yellow_line" />
            </FrameLayout>

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="fill_parent"
                    android:layout_height="30dp"
                    android:layout_gravity="top"
                    android:src="@drawable/header_yellow_line" />

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="55dp"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/backkground_img_title"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_marginTop="15dp"
                        android:gravity="center_vertical"
                        android:text="Violin Genius takes the highschool championships"
                        android:textAppearance="?android:attr/textAppearanceLarge"
                        android:textSize="12dp" />

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:gravity="center"
                        android:text="@string/gallery_assignment_name"
                        android:textSize="10dp" />
                </LinearLayout>
            </FrameLayout>

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="200dp" >

                <ImageView
                    android:id="@+id/imgViewGalleryBackgroundPic"
                    android:layout_width="fill_parent"
                    android:layout_height="200dp"
                    android:layout_gravity="center"
                    android:background="@drawable/u15_normal"
                    android:scaleType="fitXY" />

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="45dp"
                    android:layout_gravity="bottom"
                    android:background="@drawable/app_feed"
                    android:orientation="horizontal" >

                    <ImageView
                        android:id="@+id/imgViewDetailTumbNail"
                        android:layout_width="30dp"
                        android:layout_height="30dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/u17_normal_small" />

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:orientation="vertical" >

                        <LinearLayout
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="5dp"
                            android:orientation="horizontal" >

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="10dp"
                                android:text="Vote  ."
                                android:textSize="12dp"
                                android:textStyle="bold" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="5dp"
                                android:text="Comment  ."
                                android:textSize="12dp"
                                android:textStyle="bold" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="5dp"
                                android:text="Share"
                                android:textSize="12dp"
                                android:textStyle="bold" />
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal" >

                            <TextView
                                android:id="@+id/gallery_detail_person_name"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="5dp"
                                android:layout_marginRight="3dp"
                                android:text="@string/gallery_person_name"
                                android:textSize="8dp" />

                            <TextView
                                android:id="@+id/gallery_detail_views"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:text="0"
                                android:textSize="8dp" />

                            <ImageView
                                android:id="@+id/imageButton"
                                android:layout_width="10dp"
                                android:layout_height="10dp"
                                android:layout_gravity="center"
                                android:layout_marginLeft="5dp"
                                android:background="@drawable/view_icon" />

                            <TextView
                                android:id="@+id/gallery_detail_comment"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:layout_marginRight="3dp"
                                android:textSize="8dp" />

                            <ImageView
                                android:id="@+id/imageButton"
                                android:layout_width="10dp"
                                android:layout_height="10dp"
                                android:layout_gravity="center"
                                android:layout_marginLeft="5dp"
                                android:background="@drawable/comment_icon" />

                            <TextView
                                android:id="@+id/gallery_detail_favorite"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:textSize="8dp" />

                            <ImageView
                                android:id="@+id/imageButton"
                                android:layout_width="10dp"
                                android:layout_height="10dp"
                                android:layout_gravity="center"
                                android:layout_marginLeft="5dp"
                                android:background="@drawable/heart_icon" />

                            <TextView
                                android:id="@+id/gallery_detail_distance"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:textSize="8dp" />

                            <ImageButton
                                android:id="@+id/imageButton"
                                android:layout_width="10dp"
                                android:layout_height="10dp"
                                android:layout_gravity="center"
                                android:background="@drawable/pin" />
                        </LinearLayout>
                    </LinearLayout>
                </LinearLayout>

                <View
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"
                    android:layout_marginTop="10dp"
                    android:background="@drawable/divider_line" />
            </FrameLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <ScrollView
                    android:layout_width="fill_parent"
                    android:layout_height="70dp"
                    android:fillViewport="true" >

                    <TextView
                        android:id="@+id/gallery_image_detail"
                        android:layout_width="fill_parent"
                        android:layout_height="70dp"
                        android:layout_marginLeft="10dp"
                        android:padding="5dp"
                        android:singleLine="false"
                        android:text="@string/gallery_assignment_detail"
                        android:textSize="8dp" >
                    </TextView>
                </ScrollView>
            </RelativeLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="3dp"
                android:orientation="vertical" >

                <com.google.android.maps.MapView
                    android:id="@+id/mapViewGallery"
                    android:layout_width="fill_parent"
                    android:layout_height="70dp"
                    android:apiKey="0X_Jyk3FLOVfS4dJSGin89ME-m3u3QBwVFkXpvQ"
                    android:clickable="true"
                    android:enabled="true" >
                </com.google.android.maps.MapView>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

<!--                     <ListView -->
<!--                         android:id="@+id/listViewGalleryDetail" -->
<!--                         android:layout_width="fill_parent" -->
<!--                         android:layout_height="wrap_content" -->
<!--                         android:cacheColorHint="#00000000" -->
<!--                         android:padding="5dp" > -->
<!--                     </ListView> -->
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T04:54:46.670

我已经解决了使用**listview.addHeaderView(view); 的问题；**通过使用这个属性，我在列表视图的顶部添加了我的第二个视图，它的工作就像魅力一样。

我们必须确保的一件事是，我们必须在调用 listview 的 setAdapter() 之前调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:26:48.307

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.6"
        android:orientation="vertical" >

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <RelativeLayout
                android:id="@+id/main"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/main_back_ground" >

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:paddingBottom="50dp" >

                    <FrameLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >

                        <include
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            layout="@layout/header_mf" />

                        <ImageButton
                            android:id="@+id/imageButton"
                            android:layout_width="60dp"
                            android:layout_height="30dp"
                            android:layout_gravity="right|center"
                            android:layout_marginRight="15dp"
                            android:background="@drawable/cg_report_btn" />

                        <ImageView
                            android:id="@+id/imageView1"
                            android:layout_width="fill_parent"
                            android:layout_height="30dp"
                            android:layout_gravity="top"
                            android:layout_marginTop="50dp"
                            android:src="@drawable/header_yellow_line" />
                    </FrameLayout>

                    <FrameLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >

                        <ImageView
                            android:id="@+id/imageView1"
                            android:layout_width="fill_parent"
                            android:layout_height="30dp"
                            android:layout_gravity="top"
                            android:src="@drawable/header_yellow_line" />

                        <LinearLayout
                            android:layout_width="fill_parent"
                            android:layout_height="55dp"
                            android:orientation="vertical" >

                            <TextView
                                android:id="@+id/backkground_img_title"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="10dp"
                                android:layout_marginTop="15dp"
                                android:gravity="center_vertical"
                                android:text="Violin Genius takes the highschool championships"
                                android:textAppearance="?android:attr/textAppearanceLarge"
                                android:textSize="12dp" />

                            <TextView
                                android:id="@+id/textView2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="10dp"
                                android:gravity="center"
                                android:text="@string/gallery_assignment_name"
                                android:textSize="10dp" />
                        </LinearLayout>
                    </FrameLayout>

                    <FrameLayout
                        android:layout_width="fill_parent"
                        android:layout_height="200dp" >

                        <ImageView
                            android:id="@+id/imgViewGalleryBackgroundPic"
                            android:layout_width="fill_parent"
                            android:layout_height="200dp"
                            android:layout_gravity="center"
                            android:background="@drawable/u15_normal"
                            android:scaleType="fitXY" />

                        <LinearLayout
                            android:layout_width="fill_parent"
                            android:layout_height="45dp"
                            android:layout_gravity="bottom"
                            android:background="@drawable/app_feed"
                            android:orientation="horizontal" >

                            <ImageView
                                android:id="@+id/imgViewDetailTumbNail"
                                android:layout_width="30dp"
                                android:layout_height="30dp"
                                android:layout_gravity="center"
                                android:layout_marginLeft="10dp"
                                android:background="@drawable/u17_normal_small" />

                            <LinearLayout
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:orientation="vertical" >

                                <LinearLayout
                                    android:layout_width="fill_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginBottom="5dp"
                                    android:orientation="horizontal" >

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_marginLeft="10dp"
                                        android:text="Vote  ."
                                        android:textSize="12dp"
                                        android:textStyle="bold" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_marginLeft="5dp"
                                        android:text="Comment  ."
                                        android:textSize="12dp"
                                        android:textStyle="bold" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_marginLeft="5dp"
                                        android:text="Share"
                                        android:textSize="12dp"
                                        android:textStyle="bold" />
                                </LinearLayout>

                                <LinearLayout
                                    android:layout_width="fill_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal" >

                                    <TextView
                                        android:id="@+id/gallery_detail_person_name"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_marginLeft="5dp"
                                        android:layout_marginRight="3dp"
                                        android:text="@string/gallery_person_name"
                                        android:textSize="8dp" />

                                    <TextView
                                        android:id="@+id/gallery_detail_views"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_gravity="center"
                                        android:text="0"
                                        android:textSize="8dp" />

                                    <ImageView
                                        android:id="@+id/imageButton"
                                        android:layout_width="10dp"
                                        android:layout_height="10dp"
                                        android:layout_gravity="center"
                                        android:layout_marginLeft="5dp"
                                        android:background="@drawable/view_icon" />

                                    <TextView
                                        android:id="@+id/gallery_detail_comment"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_gravity="center"
                                        android:layout_marginRight="3dp"
                                        android:textSize="8dp" />

                                    <ImageView
                                        android:id="@+id/imageButton"
                                        android:layout_width="10dp"
                                        android:layout_height="10dp"
                                        android:layout_gravity="center"
                                        android:layout_marginLeft="5dp"
                                        android:background="@drawable/comment_icon" />

                                    <TextView
                                        android:id="@+id/gallery_detail_favorite"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_gravity="center"
                                        android:textSize="8dp" />

                                    <ImageView
                                        android:id="@+id/imageButton"
                                        android:layout_width="10dp"
                                        android:layout_height="10dp"
                                        android:layout_gravity="center"
                                        android:layout_marginLeft="5dp"
                                        android:background="@drawable/heart_icon" />

                                    <TextView
                                        android:id="@+id/gallery_detail_distance"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_gravity="center"
                                        android:textSize="8dp" />

                                    <ImageButton
                                        android:id="@+id/imageButton"
                                        android:layout_width="10dp"
                                        android:layout_height="10dp"
                                        android:layout_gravity="center"
                                        android:background="@drawable/pin" />
                                </LinearLayout>
                            </LinearLayout>
                        </LinearLayout>

                        <View
                            android:layout_width="fill_parent"
                            android:layout_height="1dp"
                            android:layout_marginTop="10dp"
                            android:background="@drawable/divider_line" />
                    </FrameLayout>

                    <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical" >

                        <ScrollView
                            android:layout_width="fill_parent"
                            android:layout_height="70dp"
                            android:fillViewport="true" >

                            <TextView
                                android:id="@+id/gallery_image_detail"
                                android:layout_width="fill_parent"
                                android:layout_height="70dp"
                                android:layout_marginLeft="10dp"
                                android:padding="5dp"
                                android:singleLine="false"
                                android:text="@string/gallery_assignment_detail"
                                android:textSize="8dp" >
                            </TextView>
                        </ScrollView>
                    </RelativeLayout>

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="3dp"
                        android:orientation="vertical" >

                        <com.google.android.maps.MapView
                            android:id="@+id/mapViewGallery"
                            android:layout_width="fill_parent"
                            android:layout_height="70dp"
                            android:apiKey="0X_Jyk3FLOVfS4dJSGin89ME-m3u3QBwVFkXpvQ"
                            android:clickable="true"
                            android:enabled="true" >
                        </com.google.android.maps.MapView>
                    </LinearLayout>
                </LinearLayout>
            </RelativeLayout>
        </ScrollView>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="0.4" >

            <ListView
                android:id="@+id/listViewGalleryDetail"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:cacheColorHint="#00000000"
                android:padding="5dp" >
            </ListView>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:26:58.680

您可以使用此技巧滚动两个滚动视图。它对我有用。

假设您有两个滚动视图 L1 在 L2 内，然后在 JAVA 中使用此代码。

```
L1.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {

                if(arg1.getAction() == MotionEvent.ACTION_DOWN || arg1.getAction() == MotionEvent.ACTION_MOVE)
                {
                L2.requestDisallowInterceptTouchEvent(true);

                }
                return false;
            }
        }); 
```

有了这个，您可以滚动两个滚动视图

# javascript - nsIProcess 杀死

> ID：11684505
> 
> 赞同：0
> 
> 时间：2012-07-27T08:51:53.620
> 
> 标签：javascript, firefox, process, kill

我正在成功地从 Firefox 扩展启动一个可执行文件。当我试图杀死同一个进程时，它不起作用。

我究竟做错了什么？

```
var process;
var loadingMonitor = {
    launchExternalApp : function (jnlp) {
        process = Components.classes["@mozilla.org/process/util;1"].createInstance(Components.interfaces.nsIProcess);
        var env = Components.classes["@mozilla.org/process/environment;1"].createInstance(Components.interfaces.nsIEnvironment);
        var javaWebStart = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
        javaWebStart.initWithPath(env.get("JAVA_HOME"));
        javaWebStart.append("bin");
        javaWebStart.append("javaws.exe"); //TODO fix this for linux and others http://www.koders.com/javascript/fid08E6670AF783B7BD5703D3378E5C9BB039326190.aspx?s=checkbox

        process.init(javaWebStart);

        var arguments = ["-Xnosplash", jnlp];
        process.runwAsync(arguments, arguments.length);
   },

    exit : function() {
        process.kill();
    }
}

window.addEventListener("load", loadingMonitor.launchExternalApp, false);
window.addEventListener("unload", loadingMonitor.exit, false); 
```

我已经尝试过记录，所以我知道正在调用 exit，但是如果我尝试打印有关进程的任何信息，我会得到未定义、空值、0 等。

我一直在关注[API](https://developer.mozilla.org/en/nsIProcess)并一直在查看错误报告，但似乎已经走到了尽头。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:07:16.527

我设法通过打开我的 java 应用程序的套接字并让它自己杀死它然后 System.exit(1); 很容易地解决了这个问题；

# bash - 多次使用 shell 重命名文件

> ID：11684506
> 
> 赞同：1
> 
> 时间：2012-07-27T08:51:57.997
> 
> 标签：bash, shell, sh

我正在尝试将 *%3A*%3A*.xml 之类的文件重命名为*::* *.xml。

```
MODFILE=`echo $1 | tr -s '"%3A"' ':'`
mv $1 "${MODFILE}" 
```

只要我没有超过一次直接连续的％3A，就可以完成这项工作。我进行了很多搜索，发现有几个脚本可以重命名第一次出现或仅在我只有一次出现时才起作用。

例如，这只适用于一次出现：

```
for files in *%3A*.xml
do
  mv "$files" "${files/%3A/:}"
done 
```

有人可以帮我吗？我对 shellscripting 不太满意：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:57:13.063

你快到了，如果你使用：

```
mv "$files" "${files//%3A/:}" 
```

（两个斜杠而不是一个），那么所有出现的地方都将被替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:02:26.990

最简单的方法是使用重命名

```
 rename %3A : * 
```

它可能只需要第一次出现，但你必须再次执行它。

Rename 也可以接受正则表达式作为输入，但这取决于系统。

# entity-framework - Prism EntityFramework Mef Partial Class Context未生成表

> ID：11684510
> 
> 赞同：0
> 
> 时间：2012-07-27T08:52:05.990
> 
> 标签：entity-framework, prism, mef

我有一个包含多个模块的 Prism 项目。首先使用 EF 代码生成数据库。

我正在尝试使用部分类构建上下文。对于每个模块，都会有其部分类上下文（一个上下文整体解决方案）。

我为每个模块使用相同的命名空间来创建上下文。但是，在初始化数据库时，只会创建主模块中定义的表，而不会创建其他表。

有什么我可以寻找的还是有更好的方法？谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:55:10.173

部分类的所有部分必须在同一个程序集中（在您的情况下可能在同一个模块中），因为将单个文件（类）划分为多个部分只是语法糖，但这些部分在构建期间连接起来。部分类不会帮助您实现模块化（如果您希望向已部署的应用程序添加或删除模块）。

# javascript - 返回 $.getJSON-Function 的结果

> ID：11684513
> 
> 赞同：1
> 
> 时间：2012-07-27T08:52:21.717
> 
> 标签：javascript, jquery, ajax, json

我需要用 ajax 加载一个 php 脚本，它会创建一个 JSON 结果。getEvent.php 的一个示例是：

```
[{"id":"1","start":"Wed Jul 18 12:00:00 GMT+0200 2012","end":"Wed Jul 18 13:30:00 GMT+0200 2012","title":"leer"}] 
```

为了将此结果传输到另一个函数，我必须能够将它分配给一个变量。我尝试了很多方法，但从来没有成功过。

```
function loadEvents(){
   var cdata;

   $.getJSON({
     type: 'GET',
     url: 'getEvent.php',
     asynch:false,
     contentType: 'application/json; charset=utf-8',
     dataType: 'json',

     success: function(jsonData) {
        cdata = jsonData;
     },
     error: function() {
       alert('');
     }

   });
   return cdata;
 } 
```

***cdata = jsonData;*** 似乎不起作用

我只找到了将部分结果（jsonData）分配给变量的方法，但似乎无法返回整个 jsonData。

有人可以帮我解决我的问题吗？我必须将完整的 jsonData 返回到另一个函数...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:56:20.567

`getJSON`是一个异步函数（期望只是一个 url，没有设置对象（[Docu](http://api.jquery.com/jQuery.getJSON/)）），这意味着它会在服务器回答完成后立即返回结果。与此同时，您的函数继续执行。因此，在您返回的那一刻`cdata`，您的成功函数尚未执行。您需要使用回调或将函数设置为同步（您正在尝试这样做但在那里有错字 - 它`async`没有 h - 如果您想传递其他设置，您不能使用`getJSON()`但必须使用[`$.ajax()`](http://api.jquery.com/jQuery.ajax/).

而不是使调用同步，使用回调可能是更好的解决方案：

代替

```
 success: function(jsonData) {
    cdata = jsonData;
 }, 
```

写：

```
 success: function(jsonData) {
    workWithResult(jsonData);
 },

 // this is called the "callback" function, it is executed when the ajax-request
 // returned successfully
 function workWithResult(data){
     // now you can work with the data, which is guaranteed to exist
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:30:06.813

首先，为什么要使用 getJSON？$.ajax 似乎更适合您的要求。

其次，您返回 cdata 的那一刻是在服务器响应之前。一旦服务器响应，您的成功处理程序将被执行。在当前情况下，您将无法获得您正在寻找的数据。:)

要解决这个问题，您可以做的是使变量 cdata 成为全局变量。并且只需在成功处理程序中将值分配给 cdata （您已经完成了）

PS：使变量全局化不是一个好的编程习惯。（或者至少我不建议使用全局变量）

发布您的具体要求，例如您将以何种方式使用返回值。这样我们就可以看到我们如何才能避免这种全球性的野兽。

例如：

```
success: function(result){
yourTargetFunction(result); // call the target function with returned data as a paramenter to it
} 
```

# python - 它有内存泄漏吗？

> ID：11684516
> 
> 赞同：2
> 
> 时间：2012-07-27T08:52:27.730
> 
> 标签：python, memory-leaks, objgraph

我最近阅读[了 objgraph](http://mg.pov.lt/objgraph/#backreferences)文档，对以下代码感到困惑

```
>>> class MyBigFatObject(object):
...     pass
...
>>> def computate_something(_cache={}):
...     _cache[42] = dict(foo=MyBigFatObject(),
...                       bar=MyBigFatObject())
...     # a very explicit and easy-to-find "leak" but oh well
...     x = MyBigFatObject() # this one doesn't leak 
```

它表明“一个非常明确且易于发现的'泄漏'”。这有内存泄漏吗？是dict _cache吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T08:56:32.207

`_cache`是一个具有可变默认值的关键字参数，它确实在函数体中发生了变异。这会将`MyBigFatObjects`实例永久存储在该可变关键字参数中。

这与其说是泄漏，不如说是对可变关键字参数的寿命的误解。函数本身仍然可以调用`del _cache[42]`来删除这些对象。

有关该主题的更多信息，请参阅[“Least Astonishment”和可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:59:19.737

由于 dict 是可变的，其中所做的更改也会影响调用者，因此`MyBigFatObject`将保留对两个的引用。

您应该显式删除它 ( `del _cache[42]`)，或者更改自己的字典副本或任何其他可变对象（您可以使用[copy](http://docs.python.org/library/copy.html)模块）。

# android - android中的高效ListView

> ID：11684520
> 
> 赞同：4
> 
> 时间：2012-07-27T08:52:41.217
> 
> 标签：android, android-listview, memory-efficient

构建`ListView`使用最少内存的最佳方法是什么？这很重要，因为我遇到了一些实现，当我在低端设备上滚动时，它们中的大多数都是滞后的`ListView`，但是我看到了一些应用程序，即使在低端设备上滚动也非常流畅。如何做呢？从内存使用的角度来看，构造这样一个最有效的方法是`ListView`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T08:57:53.220

*   回收你的观点`getView()`
*   使用`ViewHolder`模式
*   如果您有大量数据要填充列表，请使用延迟加载
*   `Cursor`如果您的数据来自 ，则用作基础数据而不是从游标构建的对象列表，`database`您可以通过不创建其他对象来节省内存。
*   见[http://www.google.com/events/io/2010/sessions/world-of-listview-android.html](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)
*   见[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:58:10.593

您将不得不使用[ViewHolder](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T09:00:39.180

看[这段](http://animations.typepad.com/blog/2010/07/android-tutorial-73-efficient-listview-with-two-icons.html)带描述的代码，提高lisview的效率。

请记住，当您有大量数据要在列表视图中显示时，一次不要加载所有数据。首先加载 2o 数据，然后在 listview 到达末尾时加载另一个数据。

这也是提高listview效率的另一种方式。

# backbone.js - 如何使用backbone.js将视图附加到现有的html标记

> ID：11684522
> 
> 赞同：0
> 
> 时间：2012-07-27T08:52:51.287
> 
> 标签：backbone.js, backbone-events

任何人都可以举一个关于如何使用 Backbone.js 基于鼠标单击加载新 div 容器的小例子吗？我想将一个新的 div 容器添加到我已经存在的 html 内容中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T09:07:46.310

在视图类中：

```
events: { "click #myButton": "insertDiv" }

insertDiv: function(event) {
    this.$el.append("<div>...</div>");
} 
```

# sencha-touch - 如何在 sencha touch 中获取密码值？

> ID：11684525
> 
> 赞同：0
> 
> 时间：2012-07-27T08:53:04.983
> 
> 标签：sencha-touch, sencha-touch-2

我有一个 sencha touch 密码字段，如下所示：

```
xtype : 'passwordfield',
id : 'password',
name: 'password',
label : 'Password',
labelWidth : '40%', 
```

我想得到这个字段的值。我尝试使用 getValue() 方法。但它返回给我空值。

在控制器中：

```
merchantPwd : '#password', 
```

然后像这样：

```
 var pwd = this.getMerchantPwd().getValue();
alert("password:" +pwd); 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:51:00.663

与其他输入字段之间的唯一区别`passwordfield`是它的值通过仅显示无意义的字符（例如点或星号）来隐藏。除此之外，它就像其他输入字段一样。

例如，在 Sencha Touch 文档代码编辑器和实时预览中尝试这个，它可以工作。

```
Ext.create('Ext.form.Panel', {
    fullscreen: true,
    items: [
        {
            xtype: 'fieldset',
            title: 'Register',
            items: [
                {
                    xtype: 'emailfield',
                    label: 'Email',
                    name: 'email'
                },
                {
                    xtype: 'passwordfield',
                    label: 'Password',
                    name: 'password',
                    id: 'abc',
                    value: 'abc',
                }
            ]
        }
    ]
});
Ext.Msg.alert(Ext.getCmp('abc').getValue()); 
```

所以我认为可能存在一些问题，例如：

*   密码字段是空白的（实际上在这种情况下它什么都不显示，但不是空值）
*   您的控制器代码存在一些问题。注意`this`指针。

# windows-8 - 在后台跨越 Metro 应用程序的计时器

> ID：11684526
> 
> 赞同：1
> 
> 时间：2012-07-27T08:53:08.657
> 
> 标签：windows-8, microsoft-metro, winjs

当我的应用程序进入挂起状态时，我想在 METRO 应用程序中启动一个后台计时器。有什么办法可以做到这一点。根据 msdn 网站“如果应用程序在 5 秒内未从挂起事件中返回，Windows 将假定该应用程序已停止响应并终止它。” 在上述情况下，我将无法使用计时器执行任何任务。请让我知道当我的应用程序进入挂起状态时如何在后台生成计时器。我正在使用 WinJS 进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:35:30.890

您可能需要使用后台任务 API：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx)

您既可以启动后台任务的计时器，也可以在清单中声明工作的时间间隔。

如果您不希望在暂停时进行工作，则设置的间隔计时器将起作用，并在您退出暂停状态时以正确的间隔触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:33:21.737

我想我以前读过类似的东西。你想要的完全是不可能的，因为在应用程序暂停后，它的代码停止运行，所以它不能在暂停时在后台运行自己的计时器。但是，如果在挂起事件中，您应该能够获得相同的效果，您将应用程序关闭的系统时间保存到例如隔离存储/设置，然后在重新激活事件中，您可以获得此值（如果存在），并从那里通过将当前时间与存储时间进行比较来计算应用程序暂停了多长时间

# iphone - UIDocument 的缓慢关闭

> ID：11684528
> 
> 赞同：1
> 
> 时间：2012-07-27T08:53:13.027
> 
> 标签：iphone, ios5, uidocument

我有一个带有 UIDocument 子类的应用程序。但问题是有时方法`closeWithCompletionHandler`工作时间过长。我什至不能等到最后，这需要太多时间。问题是当我在`- (id)contentsForType:(NSString *)typeName error:(NSError **)outError`方法中设置断点时，一切正常。那么，问题是什么会导致这种影响？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:01:40.673

这段代码是在主线程上运行的吗？如果是这种情况，请尝试使用调度队列在后台线程中运行它。

请注意，主线程也为 UI 绘图提供动力，这就是当主线程有太多工作要做时，您的应用程序会卡住的原因。因此，始终建议将较大的操作放入后台线程。

# python - 如果 Python 中的正则表达式，则提取部分文本

> ID：11684529
> 
> 赞同：0
> 
> 时间：2012-07-27T08:53:13.813
> 
> 标签：python, regex

我有一个以前匹配的模式，例如：

```
<a href="somelink here something"> 
```

现在我希望只提取标签中特定属性的值，但这可能是标签中任何地方出现的任何东西。

```
regex_pattern=re.compile('href=\"(.*?)\"') 
```

现在我可以使用上面的来匹配属性和值部分，但我只需要提取`(.*?)`部分。（价值）

我当然可以剥离`href="`，`"`但我确信我可以正确使用正则表达式来仅提取所需的部分。

简单来说我想匹配

```
abcdef=\"______________________\" 
```

在模式中，但只想要

```
____________________ 
```

部分

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:57:10.633

只需`re.search('href=\"(.*?)\"', yourtext).group(1)`在匹配的字符串上使用`yourtext`，它就会产生匹配的组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:01:43.003

看一下正则表达式结果的[`.group()`方法。](http://docs.python.org/library/re.html#re.MatchObject.group)`MatchObject`

您的正则表达式有一个明确的组匹配组（括号中的部分`()`），并且该`.group()`方法使您可以直接访问在该组中匹配的字符串。`MatchObject`由多个`re`函数和方法返回，包括`.search()`and`.finditer()`函数。

示范：

```
>>> import re
>>> example = '<a href="somelink here something">'
>>> regex_pattern=re.compile('href=\"(.*?)\"') 
>>> regex_pattern.search(example)
<_sre.SRE_Match object at 0x1098a2b70>
>>> regex_pattern.search(example).group(1)
'somelink here something' 
```

从括号语法的[正则表达式语法文档](http://docs.python.org/library/re.html#regular-expression-syntax)中：`(...)`

> 匹配括号内的任何正则表达式，并指示组的开始和结束；组的内容可以在执行匹配后检索，并且可以稍后在字符串中使用 \number 特殊序列进行匹配，如下所述。要匹配文字 '(' 或 ')'，请使用 \( 或 \)，或将它们包含在字符类中：[(] [)]。

# c# - 我可以在一个表单中使用多个 DataGridViewRows 吗？

> ID：11684530
> 
> 赞同：1
> 
> 时间：2012-07-27T08:53:14.623
> 
> 标签：c#, .net, winforms, datagridview

我正在设计一个带有包含 2 个选项卡的 TabControl 的 Windows 窗体。我在每个选项卡中都有一个 DataGridView，两者都填充了相同的列（包括 DataGridViewCheckBoxColumn），但参数不同，以便最终用户更容易使用它们，而不是全部包含在 1 个网格中。

我以为我可以为每个 DatagridView 设置一个 DataGridViewRow，并且它只会在调用时将它们用作新实例，但似乎并非如此。

当用户选中或取消选中第一个选项卡的 DataGridView 中的复选框时，以下代码可以正常工作；

```
private void dgvChq_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        int column = e.ColumnIndex;
        int row = e.RowIndex;
        if (column == 5)
        {
            DataGridViewCheckBoxCell c = dgvChq[e.ColumnIndex, e.RowIndex] as DataGridViewCheckBoxCell;
            if (c != null)
            {
                string a = e.FormattedValue.ToString();
                if (a == "True")
                {
                    using (SqlCommand cmd = con.CreateCommand())
                    {
                        cmd.CommandText = "UPDATE Customer.OrderHeader SET DateApproved = @approved WHERE OrderNumber = @ordNo";

                        cmd.Parameters.AddWithValue("@approved", DateTime.Today);
                        cmd.Parameters.AddWithValue("@ordNo",dgvChq.Rows[row].Cells[0].Value.ToString());

                        con.Open();
                        cmd.ExecuteNonQuery();
                        con.Close();
                    }
                    DataGridViewRow dr = dgvChq.SelectedRows[0];
                    dr.Cells[4].Value = DateTime.Today.ToString();
                }
                else
                {
                    using (SqlCommand cmd = con.CreateCommand())
                    {
                        cmd.CommandText = "UPDATE Customer.OrderHeader SET DateApproved = NULL WHERE OrderNumber = @ordNo";

                        cmd.Parameters.AddWithValue("@ordNo", dgvChq.Rows[row].Cells[0].Value.ToString());

                        con.Open();
                        cmd.ExecuteNonQuery();
                        con.Close();
                    }
                    DataGridViewRow dr = dgvChq.SelectedRows[0];
                    dr.Cells[4].Value = "";
                }
            }
        }
    } 
```

所以我想我可以使用不同的 DataGridViewRow 并将此代码重新用于另一个选项卡中的另一个 DataGridView，但它失败了；

```
private void dgvCredit_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        int column = e.ColumnIndex;
        int row = e.RowIndex;
        if (column == 0)
        {
            DataGridViewCheckBoxCell c = dgvCredit[e.ColumnIndex, e.RowIndex] as DataGridViewCheckBoxCell;
            if (c != null)
            {
                string a = e.FormattedValue.ToString();
                if (a == "True")
                {
                    using (SqlCommand cmd = con.CreateCommand())
                    {
                        cmd.CommandText = "UPDATE Customer.OrderHeader SET DateApproved = @approved WHERE OrderNumber = @ordNo";

                        cmd.Parameters.AddWithValue("@approved", DateTime.Today);
                        cmd.Parameters.AddWithValue("@ordNo", dgvCredit.Rows[row].Cells[1].Value.ToString());

                        con.Open();
                        cmd.ExecuteNonQuery();
                        con.Close();
                    }
                    DataGridViewRow dgvr = dgvCredit.SelectedRows[0];
                    dgvr.Cells[4].Value = DateTime.Today.ToString();
                }
                else
                {
                    using (SqlCommand cmd = con.CreateCommand())
                    {
                        cmd.CommandText = "UPDATE Customer.OrderHeader SET DateApproved = NULL WHERE OrderNumber = @ordNo";

                        cmd.Parameters.AddWithValue("@ordNo", dgvCredit.Rows[row].Cells[1].Value.ToString());

                        con.Open();
                        cmd.ExecuteNonQuery();
                        con.Close();
                    }
                    DataGridViewRow dgvr = dgvCredit.SelectedRows[0];
                    dgvr.Cells[4].Value = "";
                }
            }
        }
    } 
```

我在这里错过了什么，还是不能以相同的形式使用多个 DataGridViewRows？

也许有一种更“动态”的方式我也可以这样做，这可能有助于解决我的问题？

PS：似乎是第二个datagridviewrow（dgvr）在单击复选框时仍显示为null，所以这是发生错误的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:56:22.633

@Keefa2011，问题不在于 DataGridViewRow 实例。同意它们是引用类型，因此在创建此类实例成员变量时应该小心。但是在您的代码中，它们的范围仅限于特定事件。

问题在于你提到的那条线。除非启用了[FullRowSelect](http://msdn.microsoft.com/en-us/library/3c89df86.aspx)`DataGridViewRow dgvr = dgvCredit.SelectedRows[0];` ，否则您总是会在“因为所选行数始终为零”时遇到异常。你需要处理它。您可以通过启用全行选择或更改错误的一行（如下所示）来实现。我不确定为什么您只收到第二个 dgv 的错误。也许为第一个 dgv 启用了全行选择？

此外，您的代码急需一些重构。您在两页中写的内容实际上就是这么多：

```
private void dgvChq_CellValidating(object sender, 
                                   DataGridViewCellValidatingEventArgs e)
{
    if (e.ColumnIndex != 5)
        return;

    HandleCheckedChanged(dgvChq, e, 
                         Convert.ToInt32(dgvChq.Rows[e.RowIndex].Cells[0].Value));
}

private void dgvCredit_CellValidating(object sender, 
                                      DataGridViewCellValidatingEventArgs e)
{
    if (e.ColumnIndex != 0)
        return;

    HandleCheckedChanged(dgvCredit, e, 
                         Convert.ToInt32(dgvCredit.Rows[e.RowIndex].Cells[1].Value));
}

private void HandleCheckedChanged(DataGridView dgv, 
                                  DataGridViewCellValidatingEventArgs e, int id)
{
    object toBeDisplayedDateValue = (bool)e.FormattedValue ? (DateTime?)DateTime.Today : null;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = @"UPDATE Customer.OrderHeader 
                            SET    DateApproved = @approvedDate 
                            WHERE  OrderNumber = @ordNo";

        cmd.Parameters.AddWithValue("@approvedDate", toBeDisplayedDateValue);
        cmd.Parameters.AddWithValue("@ordNo", id);

        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }

    dgv.Rows[e.RowIndex].Cells[4].Value = toBeDisplayedDateValue; //you could just do 
                                                                  //this much 
    //or

    //DataGridViewRow dgvr = dgv.SelectedRows[0]; //this line works only if there 
                                                  //is at least one selected row when 
                                                  //validating cell. For this you 
                                                  //require 
                                                  //dgv.SelectionMode = DataGridViewSelectionMode.FullRowSelect
} 
```

您实际上应该将数据库操作移至另一个类以获得更简洁的设计。您的代码最大的警告是您将 id 作为`"@ordNo"`. 我只将它移到函数之外，因为我不确定您是否应该从 UI 端获取该值。该逻辑应该从数据库端处理。换句话说，您应该将订单号保留在其他地方，可能作为 dgv 行的标签左右。如果您确定 gridview 单元格中的值实际上可以占数据库中的正确记录，那么继续，您只需将订单号列的列索引作为参数传递。

另一件事，我认为您实际上不需要单元格验证事件，因为每次您将焦点移出单元格时都会触发它。由于它的 db 操作可能很昂贵，因此您可以注册[单元格值更改事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)，该事件仅在单元格的值更改时才会执行操作。这里要注意的一件事是，您应该仅在完全加载所有单元格后注册事件。否则，即使最初填充记录，它也会被触发。

例如，

```
private void Form1_Load(object sender, EventArgs e)
{
    //---------------------------------------------
    // load dgv...
    //---------------------------------------------

    dgvChq.CellValueChanged += dgvChq_CellValueChanged;
    dgvCredit.CellValueChanged += dgvCredit_CellValueChanged;
}

private void dgvChq_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex != 5)
        return;

    HandleCheckedChanged(dgvChq, e, 0);
}

private void dgvCredit_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex != 0)
        return;

    HandleCheckedChanged(dgvCredit, e, 1);
}

private void HandleCheckedChanged(DataGridView dgv, DataGridViewCellEventArgs e, 
                                  int columnIndexOfOrderNo)
{
    DataGridViewCheckBoxCell c = dgv[e.ColumnIndex, e.RowIndex] as DataGridViewCheckBoxCell;
    object toBeDisplayedDateValue = (bool)c.EditedFormattedValue ? (DateTime?)DateTime.Today : null;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = @"UPDATE Customer.OrderHeader 
                            SET    DateApproved = @approvedDate 
                            WHERE  OrderNumber = @ordNo";

        cmd.Parameters.AddWithValue("@approvedDate", toBeDisplayedDateValue);
        cmd.Parameters.AddWithValue("@ordNo", 
                                    Convert.ToInt32(dgv.Rows[e.RowIndex].Cells[columnIndexOfOrderNo].Value));

        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }

    dgv.Rows[e.RowIndex].Cells[4].Value = toBeDisplayedDateValue;
} 
```

理想情况下，您应该将要更新的字段的列索引（在您的情况 4 中）传递给函数，因为这些东西在未来很容易对 dgvs 有所不同。

# c# - findcontrol in listview

> ID：11684538
> 
> 赞同：1
> 
> 时间：2012-07-27T08:53:45.450
> 
> 标签：c#, asp.net, vb.net

I want to use `FindControl` to find the value of the `HiddenField` i.e `hfBlogID`. I want to find the value on a `ButtonClick`

```
<asp:ListView ID="lvArticle" runat="server">
    <LayoutTemplate>
        <div runat="server" id="itemPlaceHolder">
        </div>
    </LayoutTemplate>
    <ItemTemplate>
        <asp:HiddenField ID="hfBlogID" Value='<%#Eval("BlogID")%>' runat="server" />
        <p>
            <%#Eval("BlogTitle")%></p>
        <p>
            <%#Eval("BlogDetails")%></p>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:01:54.327

In order to determine the correct *row index* you should place your button inside of your `ListView.ItemTemplate` and handle the `ListView.ItemCommand` event.

In order to implement this approach you would have to change your code as follows:

```
<asp:ListView ID="lvArticle" runat="server" OnItemCommand="lv_ItemCommand">
..
    <ItemTemplate>
        <asp:HiddenField ID="hfBlogID" Value='<%#Eval("BlogID")%>' runat="server" />
        <p>
            <%#Eval("BlogTitle")%></p>
        <p>
            <%#Eval("BlogDetails")%></p>
        <asp:Button runat="server" CommandName="find" CommandArgument='<%# Eval("yourIDField") %>' />
    </ItemTemplate>
... 
```

In code behind:

```
protected void lv_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "find":
            var hidden = e.Item.FindControl("your hidden id") as HiddenField;
            break;
    }
} 
```

If your button **is not inside your ListView**, then you would need a way to identify the row you want to extract the hidden value from.

For example, if you allow to select a row in your `ListView` then you could get the hidden value from the selected row as follows:

```
protected void find_Click(object sender, EventArgs e)
{
    var hidden = this.lv.Items[this.lv.SelectedIndex].FindControl("your hidden ID") as HiddenField;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:58:33.300

you can use if button is in your listview

```
var control = (HiddenField)e.Item.FindControl("hfBlogID"); 
```

or if button is not in your listvew

```
 var contorl = (HiddenField)this.lvArticle.Items[this.lvArticle.SelectedIndex].FindControl("hfBlogID"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:02:17.307

If the button is in the same item template then use ItemCommand event handler and in that handler you can fetch the hidden field directly.

If the button is outside of list view then you need to get the index of item whose hidden field'd value you want to get.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T09:10:34.023

Here you can access the hidden field for each item:

```
protected void Button1_Click(object sender,EventArgs e)
{
  foreach(ListViewDataItem item in lvArticle.Items)
   {
     HiddenField hf=(HiddenField)item.FindControl("hfBlogID");
   }

} 
```

if you have index of item already then you can get it directly like this

```
 HiddenField hf=(HiddenField)lvArticle.Items[index].FindControl("hfBlogID"); 
```

Hope this will help..

# php - 我正在尝试在我的网站中使用 dokuwiki 解析器引擎

> ID：11684543
> 
> 赞同：0
> 
> 时间：2012-07-27T08:54:22.970
> 
> 标签：php, wiki, dokuwiki

我正在开发一些网站，我想将 dokuwiki 引擎作为文本编辑器，而不是一些基于 javascript 的所见即所得引擎。

我从下面的链接中复制了代码并尝试使用它。 [http://www.dokuwiki.org/devel:parser#basic_invocation](http://www.dokuwiki.org/devel:parser#basic_invocation)

应该将文档“syntax.txt”编译成一些 xhtml 文档并回显编译后的文档的代码，但我得到的只是“meh”。

如果有人有这个问题的经验，请给我一些提示。

谢谢。

ps

*   我在代码中添加了`<?php`和。`?>`

*   我像 $ php example.php 一样执行

*   我将 DOKU_INC、DOKU_DATA 等路径更改为适当的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:50:58.227

我自己回答。

您可以使用[降价](http://en.wikipedia.org/wiki/Markdown)而不是使用 dokuwiki 引擎。它实际上是stackoverflow使用的工具。

# regex - (?=.*[^a-zA-Z]) 是什么意思

> ID：11684544
> 
> 赞同：1
> 
> 时间：2012-07-27T08:54:30.460
> 
> 标签：regex

(?=.*[^a-zA-Z]) 是什么意思

我是正则表达式的初学者，不明白这是什么意思。

是不是这样，点（。）表示任何字符，所以`.*`表示任何字符任意次数以及`[^a-zA-z]`除 az 和 AZ 之外的任何一个字符。什么字符串会匹配它？

谢谢，

普奈特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T08:56:34.230

这是积极的前瞻性断言。

这意味着至少有一个符号不`a-ZA-Z`正确。

例子：

```
$ echo 12abc | grep -P '2(?=.*[^a-zA-Z])'
$ echo 12abc. | grep -P '2(?=.*[^a-zA-Z])'
12abc. 
```

在第一行中没有`not a-zA-Z`after `2`。并且不会显示该行。

在第二行中，我在末尾添加了点。现在有一个`not a-zA-Z`后`2`。并且将找到并显示该行。

# css - twitter 引导轮播的边框半径在 Chrome 浏览器上不起作用

> ID：11684550
> 
> 赞同：3
> 
> 时间：2012-07-27T08:54:58.077
> 
> 标签：css, twitter-bootstrap

**twitter bootstrap carousel 的边框半径在 Firefox 和 IE9 上工作正常，但在 Chrome 浏览器上不起作用**

```
<style>
.carousel{
    -moz-border-radius: 10px; /* FF1+ */
    -webkit-border-radius: 10px; /* Saf3-4, iOS 1+, Android 1.5+ */
    border-radius: 10px; /* Opera 10.5, IE9, Saf5, Chrome, FF4 */
    overflow:hidden;
}
</style>

<div id="myCarousel" class="carousel slide" >
    <!-- Carousel items -->
    <div class="carousel-inner">
        <div class="active item">
            <img src="img/1.jpg"/>
        </div>
        <div class="item">
            <img src="img/2.jpg"/>
        </div>
        <div class="item">
            <img src="img/3.jpg"/>
        </div>
    </div>
    <!-- Carousel nav -->
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-01T10:45:59.040

我有同样的问题并解决了增加`z-index`的`.carousel`.

```
.carousel{
    -moz-border-radius: 10px; /* FF1+ */
    -webkit-border-radius: 10px; /* Saf3-4, iOS 1+, Android 1.5+ */
    border-radius: 10px; /* Opera 10.5, IE9, Saf5, Chrome, FF4 */
    overflow:hidden;
    z-index: 1000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T19:27:14.643

我有同样的问题。这是由于轮播控制（控制面板以查看下一张/上一张图片）。我有这个，它对我来说很好:-)

```
.carousel img{ border-radius: 55px; }
.carousel-control { background-image:none !important; } 
```

# facebook - BUG：推荐栏与 Facebook 评论位于同一页面

> ID：11684553
> 
> 赞同：0
> 
> 时间：2012-07-27T08:55:18.837
> 
> 标签：facebook, facebook-javascript-sdk

我刚刚在许多博客中添加了新的 Facebook 推荐栏（使用 HTML5 版本），并意识到其中一些不起作用。经过一番挖掘后，我设法将其确定为当我在同一站点上也有 Facebook 评论插件时。一旦我发表评论，一切都会再次起作用。

以下内容正在我的控制台“调用 FB.init() 之前调用的 FB.getLoginStatus()”中记录。

这些网站都没有我们开发的任何使用 FB.getLoginStatus 的前端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:20:26.397

Facebook 评论插件已经放置了 Facebook Javascript SDK。我猜你正在安装推荐栏和 Javascript - 这意味着它在页面上出现两次，因此给你这个错误。

尝试在没有 Javascript 的情况下添加推荐栏——也就是说，只在有 Facebook 评论插件的页面上放置一点。然后它应该可以正常工作。

# sql-server - 如何在 LINQ 中执行此 SQL

> ID：11684556
> 
> 赞同：2
> 
> 时间：2012-07-27T08:55:31.610
> 
> 标签：sql-server, linq

早上我想知道如何在 LINQ 中执行这一点（MS）SQL ......

```
 SELECT CONVERT(CHAR(10),orderDate,110)  AS OrderDate, 
 SUM(1) AS TotalOrders 
 FROM Orders
 WHERE OrderDate>getdate()-30
 GROUP BY CONVERT(CHAR(10),orderDate,110)
 ORDER BY OrderDate DESC 
```

提前谢谢了。

**更新** 我结束了使用和编辑下面提供的解决方案的版本，以为我会分享它......

```
 using (DataDataContext dc = new DataDataContext())
        {
            var query = from o in dc.Orders
                        where o.orderDate > DateTime.Now.AddDays(-30)
                        let dt = o.orderDate
                        group o by new DateTime(dt.Year, dt.Month, dt.Day) into g
                        select new OrderCounts
                        {
                            OrderDate = String.Format("{0:d}", g.Key.Date),
                            TotalOrders = g.Count()
                        };

            query.GroupBy(o => o.OrderDate);
            query.OrderBy(o => o.OrderDate);

            return query.ToList();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:03:00.533

```
var result =(from s in Orders
             where s.OrderDate > DateTime.Now.AddDays(-30)
             group s by new { date = s.OrderDate.ToString() } into g
             // or use ((DateTime)s.OrderDate).ToShortDateString() instead of s.OrderDate.ToString()
             select new
             {
                  OrderDate = g.Key.date,
                  TotalOrders = g.Count()
             }).OrderByDescending(x=>x.OrderDate);; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:45:03.717

查询将是

```
var query = from o in res
                        where o.OrderDate > DateTime.Now.AddDays(-30)
                        orderby o.OrderDate descending
                        group o by o.OrderDate into g                       
                        select new
                        {
                            OrderDate = g.Key.Date.ToString("MM/dd/yyyy")
                            ,
                            TotalOrders = g.Sum(i=> 1)
                        }; 
```

或通过 Lambda 表达式

```
var query= res
                        .Where(i => i.OrderDate > DateTime.Now.AddDays(-30))
                        .OrderByDescending(o => o.OrderDate)
                        .GroupBy(g => g.OrderDate)
                        .Select(s => new { OrderDate = s.Key.Date.ToString("MM/dd/yyyy"), TotalOrders = s.Sum(i => 1) }); 
```

# javascript - eval 和 setTimeout 执行字符串代码的区别

> ID：11684558
> 
> 赞同：7
> 
> 时间：2012-07-27T08:55:43.080
> 
> 标签：javascript

我知道这一点，`eval`并且`setTimeout`都可以接受一个字符串作为 (1 st) 参数，而且我知道我最好不要使用它。我只是好奇为什么会有区别：

```
!function() {
    var foo = 123;
    eval("alert(foo)");
}();

!function() {
    var foo = 123;
    setTimeout("alert(foo)", 0);
}(); 
```

第一个会起作用，第二个会出错：`foo is not defined`

他们是如何在幕后被处决的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:59:13.323

请参阅[MDN 上的](https://developer.mozilla.org/en/DOM/window.setTimeout#Passing_string_literals)[参考资料`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout#Passing_string_literals)。

> 字符串文字在全局上下文中进行评估，因此当字符串被评估为代码时，调用 setTimeout() 的上下文中的局部符号将不可用。

相反，传递给[eval()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval)的字符串文字是在调用 eval 的上下文中执行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:58:18.303

setTimeout`eval`额外在全局范围内执行，因此它不知道`foo`.

这是备份它的[参考：](https://developer.mozilla.org/en/DOM/window.setTimeout#Passing_string_literals)

> 字符串文字在全局上下文中进行评估，因此当字符串被评估为代码时，调用 setTimeout() 的上下文中的局部符号将不可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T13:24:52.673

setTimeout 接受的参数比函数引用和超时更多。在超时后输入的任何内容都将作为参数传递给您的函数。

```
setTimeout(myFunction(param1, param2), 0, param1, param2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:59:25.573

```
!function() {
    var foo = 123;
    eval("alert(foo)");
}(); 
```

执行此代码时，javascript 会假装第 3 行显示“alert(foo)”。Foo 是在函数的范围内定义的。

```
!function() {
    var foo = 123;
    setTimeout("alert(foo)", 0);
}(); 
```

执行这段代码时，javascript会进入一个新函数；即`function() {alert(foo)}`. 在那个“新”功能的范围内，`foo`没有定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-21T22:38:05.243

作为正确答案的补充，这里有一个调用，`eval`它会给你同样的行为，在这种情况下会出错：

```
!function() {
    var foo = 123;
    window.eval("alert(foo)"); // <- note the window.eval, this is important and changes the behavior of the `eval` function
}();

!function() {
    var foo = 123;
    setTimeout("alert(foo)", 0);
}(); 
```

这篇博文深入探讨了不同类型的`eval`： http: [//perfectkills.com/global-eval-what-are-the-options/](http://perfectionkills.com/global-eval-what-are-the-options/)

# python - 用于测试 highcharts 的 Python Selenium Webdriver

> ID：11684564
> 
> 赞同：0
> 
> 时间：2012-07-27T08:56:03.437
> 
> 标签：python, selenium, highcharts

[有什么方法可以在 python中](https://icok8q.blu.livefilestore.com/y1pQtqH6FUY7283ptbNSVs2hmXtc-nwhhcDpmfHc73yU7mlPh674cW98jqXm1n_nCjDjFrw14zAamnOGV0y04HFrw/disk_cap.html?download&psid=1)使用 selenium webdriver测试附件中给出的 highcharts ？

# cocoa - Core Data MagicalRecord 在线程中合并 MOC

> ID：11684567
> 
> 赞同：1
> 
> 时间：2012-07-27T08:56:07.557
> 
> 标签：cocoa, core-data, magicalrecord

我正在使用 MagicalRecord (https://github.com/magicalpanda)

这不起作用（不是对 MOC 进行保证金）

```
- (void) foo {
    NSBlockOperation * operation = [NSBlockOperation blockOperationWithBlock:^{

        NSManagedObjectContext * localContext = [NSManagedObjectContext MR_contextForCurrentThread];

        // parsing and core data operation on localContext here, savin objectIDs

        [localContext MR_saveNestedContexts];

        [[NSOperationQueue mainQueue] addOperationWithBlock:^(){

            onParseFinished(parsedItemObjectIDs);

        }];

    }];

    [self.operationQueue addOperation:operation];
} 
```

必须用这个替换它（也应用了修复[https://github.com/magicalpanda/MagicalRecord/pull/221](https://github.com/magicalpanda/MagicalRecord/pull/221)）

```
- (void) foo {
    __block NSMutableArray * parsedItemsObjectIDs;
    __block Class parsedItemsClass = [NSObject class]; 

    [MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){

        // parsing and core data operation on localContext here, savin objectIDs
        ...

    } completion:^(void){

        onParseFinished(parsedItemsObjectIDs);

    }];

} 
```

**第一个有什么问题？为什么它不起作用并且更改没有合并？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:09:16.320

不合并更改的简单事实是我的时间有限。我试图理解和验证所有的拉取请求，而作为一个人的商店意味着我在开源（免费、免费、不付费）工作上的时间更加有限。但是，我相信该修复程序最终会被合并，只是从提交历史中并不明显。

至于为什么它一开始就不起作用，我的直觉是 contextForCurrentThread 方法返回了一些没有用的东西。每次调用 saveInBackground 时都会创建一个新的上下文，以便为您提供一个新的工作区。这是我认为的主要区别。

# ios - 在 xcode 中创建通用 Segue

> ID：11684569
> 
> 赞同：0
> 
> 时间：2012-07-27T08:56:08.460
> 
> 标签：ios, xcode, storyboard

我的故事板如下所示：

![故事板](../Images/49032bcf2802556cd61ee29e4be42b1d.png)

最初，当用户点击其中一个方块时，场景会转到第二个方块。此时，当用户关闭应用程序并重新打开它时，我希望出现第二个场景。

我不介意第一个场景是否加载然后传递到第二个场景，但我希望第二个场景出现。

提前致谢..

编辑：我读到我可以使用通用segue，但即使我创建了一个通用segue，控制从第一个视图控制器拖动到第二个视图控制器并使用下面的代码也没有任何反应：

```
[self performSegueWithIdentifier: @"switch" sender: self]; 
```

解决方案：

你必须有一个导航控件:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:16:54.397

为了使用下面的代码：

```
[self performSegueWithIdentifier: @"switch" sender: self]; 
```

您需要有一个导航控件。

# c# - C#，如何仅获取 GET 参数？

> ID：11684571
> 
> 赞同：15
> 
> 时间：2012-07-27T08:56:08.193
> 
> 标签：c#, asp.net, get

`System.Web.HttpContext.Current.Request.Params`似乎返回的参数太多，包括标题等......我怎样才能有效地只检索 GET 或 POST 参数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-27T08:58:24.027

将 Request.QueryString 集合用于 GET 参数，将 Request.Form 集合用于 POST 参数。

例如

```
var someValueFromGet = Request.QueryString["YourGetPara"];
var someValueFromPost = Request.Form["YourPostPara"]; 
```

请参考[http://msdn.microsoft.com/en-us/library/ms524784(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524784(v=vs.90).aspx)和[http://msdn.microsoft.com/en-us/library/ms525985(v= vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525985(v=vs.90).aspx)

# entity-framework - 使用抽象实体

> ID：11684573
> 
> 赞同：1
> 
> 时间：2012-07-27T08:56:16.470
> 
> 标签：entity-framework, abstract

我想使用抽象基础实体在我的 EF 模型 (.edmx) 中使用泛化。

所以我做了以下

![抽象实体](../Images/217d2578f82dd1142829bb0f2a02128e.png)

我在基本实体上设置了抽象标志

![抽象设置](../Images/fd0e51345dd5a2df2585fbee93927f56.png)

预期的输出将类似于以下内容

![期望的结果](../Images/e05cee4974f894fc3db0036975a1aabc.png)

但是，当我查看生成的 SQL 时，我注意到它正在创建我不想要的抽象基表。问题是 ConcreteEntity_A 或 ConcreteEntity_B 中的 Id 可以相同，所以如果它也被添加到基本实体中，我就会遇到问题。

```
-- Creating table 'AbstractBaseSet'
CREATE TABLE [dbo].[AbstractBaseSet] (
    [Id] int NOT NULL
);
GO

-- Creating table 'AbstractBaseSet_ConcreteEntity_A'
CREATE TABLE [dbo].[AbstractBaseSet_ConcreteEntity_A] (
    [Id] int  NOT NULL
);
GO

-- Creating table 'AbstractBaseSet_ConcreteEntity_B'
CREATE TABLE [dbo].[AbstractBaseSet_ConcreteEntity_B] (
    [Id] int  NOT NULL
);
GO 
```

我是否误解了抽象实体的使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:03:22.263

不，您没有，但如果您使用与基本实体的关系，这只是 EF 的工作方式 - 实体必须有一个表（即使它是抽象的）才能创建关系。如果您想要预期的模型，则必须将关系移动到派生表。

# jsf - 将一个以编程方式选择的项目带到 JSF selectOneListbox 中的可见区域

> ID：11684574
> 
> 赞同：0
> 
> 时间：2012-07-27T08:56:18.503
> 
> 标签：jsf

我想以编程方式在 JSF selectOneListbox 中选择一个项目。由于物品数量多且高度受限，大部分物品都被隐藏了。如果我上下移动滑块，我可以看到选择，但看不到其他恶习。有没有办法将选择带到可见区域，比如在 VB 列表框中的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T09:47:11.357

我使用 h:selectOneMenu 以便选择一个始终可见。

# php - 带有重定向的 PHP 表单在页面上打印表单信息

> ID：11684577
> 
> 赞同：0
> 
> 时间：2012-07-27T08:56:26.777
> 
> 标签：php, forms, redirect

我已经设法在提交工作时使用重定向功能制作名称/电子邮件表单。现在唯一的问题是，当重定向页面加载时，我会在其顶部获得表单输入（姓名和电子邮件）。

有人知道我在哪里不及格了吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
 function submitForm() {
      var form = document.forms[0];
      if (form.name.value == '') { alert("Name?"); return; }
      if (form.email.value == '') { alert("Email?"); return; }

      apos = form.email.value.indexOf("@");
      dotpos = form.email.value.lastIndexOf(".");
      if (apos < 1 || dotpos - apos < 2) { alert("Correct email?"); return; }

      form.submit();
  }
</script>
<script src="fancybox/jquery.fancybox-1.3.1.pack.js" type="text/javascript"></script>
<link rel="stylesheet" href="fancybox/jquery.fancybox-1.3.1.css" type="text/css" media="screen"/>

<script type="text/javascript">
function PopIt() { 
    $("a#trigger").trigger('click');
    window.onbeforeunload = UnPopIt;
    return "Dont go."; 
}

function UnPopIt()  { /* nothing to return */ } 

$(document).ready(function() {
    window.onbeforeunload = PopIt;

    $("a#trigger").fancybox({
        'hideOnContentClick': false,
        'showCloseButton': false
    });

    $("a[id!=trigger]").click(function(){ window.onbeforeunload = UnPopIt; });
});
</script>

</head>
<body>

<div style="display: none;">
<a id="trigger" href="#popup">&nbsp;</a>
<div id="popup">
<div style="background-color:#ff3300;">
<form method="post" action="page2.php" name="popups" id="popups">
        <fieldset>
        <label for=name><span class="required">*</span> Name</label>
        <br />
        <input name="name" type="text" id="name" size="30" value="" /> 
        <br />
        <label for=email><span class="required">*</span> Email</label>
        <br />
        <input name="email" type="text" id="email" size="30" value="" />
        <br />
        <input type="button" value="Submit" class="btn" onclick="submitForm();">            
        </fieldset>  
        <br />
</form>
</div>        
</div>
</div>

<div id="content">Fa la la la la</div>
</div>
</body>
</html> 
```

当访问者输入数据时（在弹出窗口中，退出时触发），点击提交按钮后，表单重定向到这里；

```
<? 
if($_POST['name']!="" and $_POST['email']!=""){

$headers    = "From: Acme";
$message    = 
strtoupper($_POST['name'])."
".strtoupper($_POST['email'])."
";
echo str_replace("\n","<br />", $message);
$headers2    = "From: Acme <ceo@acme.com>\nContent-Type: text/plain; charset=UTF-8;             format=flowed\nMIME-Version: 1.0\nContent-Transfer-Encoding: 8bit\nX-Mailer: PHP\n";
$message2    = "
Hello ".($_POST['name'])."   

";

mail("ceo@acme.com", "Freebies", $message, $headers);        
mail("$_POST[email]", "Gesundheit!", $message2, $headers2);

$myFile = "free.txt";
$fh = fopen($myFile, 'a') or die("can't open file");
$stringData = "$_POST[name]*$_POST[email]*".$_SERVER['REMOTE_ADDR']."*".date("d-m-Y     H:i")."
";
fwrite($fh, $stringData);
fclose($fh);

}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){
setTimeout(function(){
$("div#md").fadeIn("slow", function () {
});

}, 1000);
});
</script>
</head>
<body>
<div id="top"><a href="index.html"><img src="top.png" /></a></div>
<div id="wrapper" style="height:900px;">
<div id="content">Whoo-eee</div>
</div>
</body>
</html> 
```

但我看不到此 page2.php 顶部显示的表单信息（姓名和电子邮件）如何或为何存在...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:58:42.450

你有这条线

```
 echo str_replace("\n","<br />", $message); 
```

靠近第 2 页的顶部，因此您正在回显由姓名和电子邮件组成的消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:00:54.793

```
echo str_replace("\n","<br />", $message); 
```

在 page2 上注释掉这一行

# sqlite - B 树的节点使用哪种数据结构？

> ID：11684578
> 
> 赞同：3
> 
> 时间：2012-07-27T08:56:27.463
> 
> 标签：sqlite, b-tree, ext3

> 根据 Knuth 的定义，**m 阶 B 树**（每个节点的最大子节点数）是一棵满足以下性质的树：
> 
> (1) 每个节点最多有 m 个子节点。
> 
> (2) 每个节点（根节点除外）至少有 ⌈m⁄2⌉ 个子节点。
> 
> (3) 如果根不是叶节点，则根至少有两个孩子。
> 
> (4) 具有 k 个子节点的非叶节点包含 k-1 个键。
> 
> (5) 所有叶子都出现在同一层次，并携带信息。

资料来源：[维基百科](http://en.wikipedia.org/wiki/B-tree#Definition)

B 树的一些可视化如下所示：

![在此处输入图像描述](../Images/ba7a65840b405e06bb6afd3c8065128e.png)

从这个可视化中，我认为每个节点都有一个数组数据结构（或至少类似的东西）。

其他看起来像这样： ![在此处输入图像描述](../Images/b369a5023d89cdc7cb6b424ba161aa94.png)

这看起来更像是一个类似列表的数据结构。

所以我的问题是：

**B树使用哪种数据结构？**

我的算法类中的使用示例是数据库和文件系统。有人知道[SQLite](http://en.wikipedia.org/wiki/SQLite)如何实现 B-tree 节点吗？还是[ext3](http://en.wikipedia.org/wiki/Ext3)？或者任何其他（众所周知的）现实世界的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-24T09:47:52.973

B-Tree 本身就是数据结构（也是一个索引结构）。这是一个伪代码示例（没有需要的方法和一些需要的定义，这是一个很好的 excersize！）：

节点的主体：

```
class BNode
{
    int keys[];
    BNode children[];

    public BNode() {}

    public BNode() {}

    public int getValue(int key) {}

    public BNode getChildren(int key) {}
} 
```

B树的主体：

```
class BTree
{
    BNode root;

    BTree()
    {
        root = new BNode(null);
    }

    BNode search(int key) {}

    void insert(int key) {}

    void delete(int key) {}
} 
```

* * *

在现实世界中：

这是用于索引数据库的 PostgreSQL[的 B-Tree 实现。](https://github.com/postgres/postgres/blob/master/src/backend/access/nbtree/nbtree.c)

# javascript - 在 jQuery 中对 IE8 上的方法或属性访问的意外调用

> ID：11684579
> 
> 赞同：3
> 
> 时间：2012-07-27T08:56:30.460
> 
> 标签：javascript, jquery, html, internet-explorer-8

我的网站上有一个错误：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)
Timestamp: Fri, 27 Jul 2012 08:54:50 UTC

Message: Unexpected call to method or property access.
Line: 5855
Char: 5
Code: 0
URI: http://garmonia-znakomstva.ru/js/jquery-1.7.2.js 
```

这是 jQuery 与 IE8 不兼容还是我的一些错误？

[打开http://garmonia-znakomstva.ru/](http://garmonia-znakomstva.ru/)时发生错误

**代码**

这是 jQuery 代码片段：

```
prepend: function() {
    return this.domManip(arguments, true, function( elem ) {
        if ( this.nodeType === 1 ) {
5855:           this.insertBefore( elem, this.firstChild );
        }
    });
}, 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T09:19:31.037

`<script>`当 jquery 遇到div#accordion 内的标签时会发生错误。尝试将标签`<script>`移出

# c# - 即使列允许 null，也无法插入值 NULL

> ID：11684581
> 
> 赞同：1
> 
> 时间：2012-07-27T08:56:31.950
> 
> 标签：c#, asp.net-mvc-4, scaffolding, entity-framework-5

我正在使用 Asp.Net MVC 4 中的 Entity Framework 测试脚手架（通过遵循[本文](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)）。我让它工作正常，除了即使我的域对象在字段中允许 null 并且数据库字段允许 null 我收到错误消息：

> 无法将值 NULL 插入列“IsSuccessful”、表“MyTestProject.Persistence.TestContext.dbo.Prediction”；列不允许空值。更新失败。该语句已终止。

我的域对象如下所示：

```
public class Prediction 
{
    [Key]
    public int Id { get; set; }
    [Required]
    public string Title { get; set; }
    [Required]
    public string Description { get; set; }
    public bool? IsSuccessful { get; set; }
} 
```

生成的网页将 IsSuccessful 显示为带有 NotSet、True 和 False 选项的下拉框。在数据库中，IsSuccessful 列允许为空。我仍然收到错误消息。如果我选择 True 或 False（它已正确保存在数据库中），一切正常，但当我选择 NotSet 时则不行。

肯定有办法解决这个问题吗？

一些细节：

*   视觉工作室 2012 RC
*   ASP.NET MVC 4
*   EntityFramework.dll 版本 5.0.0.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:06:19.503

该错误消息看起来像是直接来自 SQL Server。如果服务器说该列不可为空，则*该列不可为空*。毕竟，它最清楚。

高音检查该列在数据库中是否真的可以为空。还要考虑：

*   您是否正在查看具有略微不同架构的不同数据库？即没有应用正确的 DDL 脚本（真的很容易做到）
*   您是否正在查看同一数据库中的不同*对象？*特别是，您是否正在查看`Halvard.Prediction`代码正在查看的位置`dbo.Prediction`？

# algorithm - 我如何想象 Primal-Dual Hill 攀登？

> ID：11684586
> 
> 赞同：1
> 
> 时间：2012-07-27T08:57:01.897
> 
> 标签：algorithm

在 Jeff Edmonds 的 How to Think About Algorithms 一文中，网络流和线性规划一章中有一节解释了 Primal-Dual Hill Climbing。我无法想象屋顶的指数数量以及为什么“最低且因此最佳的屋顶高于最高且因此最佳的站立位置”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T23:46:23.750

我不是 100% 确定这是对的，但这是我的看法：给定您正在导航的特定丘陵拓扑，想象它的镜像漂浮在您上方的天空中。最高的山丘的顶部将向上延伸并与镜子最底部的山谷底部接触，该底部是从天空向下延伸的。相反，如果您向下导航到最低的山谷，您将最大化您与镜像中您正上方的点之间的距离。书中没有很好地解释，但这个镜像就是书中提到的“指数屋顶”。

无论如何，这个镜像被用作证明你已经达到全局最大值的基础。直观地说，证明是说，首先，镜像是原始问题的另一个实例，只是颠倒了。但是，天空中您上方镜像的存在使您可以区分局部最大值或全局最大值。如果你已经达到了一个特定的峰值，但你的头没有碰到它在天空中的“镜峰”，那么你已经达到了一个局部最大值。另一方面，如果由于峰顶撞到它的镜像而没有站立的空间，那么您知道您已经达到了全局最大值。

回到书中最初的描述，我认为这是有问题的，因为作者所描述的“指数屋顶”对我来说听起来像是一系列带有一堆凉亭的山丘，这是不对的。一个更好的描述将是一个完全相互镜像的石笋和钟乳石洞穴。

# java - 从 Java UUID 转换为 android UUID

> ID：11684591
> 
> 赞同：1
> 
> 时间：2012-07-27T08:57:17.613
> 
> 标签：java, android, uuid

我有一个这样的 UUID：

```
0xbb886aeb-36b5-4c85-8652-c823d300997e 
```

如果没记错的话，表示为十六进制。我想在我的 android 应用程序中使用这个 UUID，如下所示：

```
 tmp = adapter.listenUsingInsecureRfcommWithServiceRecord("My Profile", UUID.fromString("0xbb886aeb-36b5-4c85-8652-c823d300997e")); 
```

但这给了我以下错误

```
07-27 10:55:26.105: E/AndroidRuntime(5313): java.lang.NumberFormatException: Invalid long: "0xbb886aeb" 
```

我怎样才能设法将其“翻译”`UUID`为 a`String`以便我可以创建 a `ServerSocket`？我**需要**使用这个特定`UUID`的 .

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:59:33.280

从字符串前面删除 0x ，我相信你有你的解决方案。

IE：

```
tmp = adapter.listenUsingInsecureRfcommWithServiceRecord("My Profile", UUID.fromString("bb886aeb-36b5-4c85-8652-c823d300997e")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:00:00.210

x 不是十六进制值，因此无法转换为 UUID。

# c# - 搜索中的“and”和“or”问题

> ID：11684592
> 
> 赞同：0
> 
> 时间：2012-07-27T08:57:18.720
> 
> 标签：c#, sql, irony

我目前正在使用 Irony 作为我的搜索系统的一部分，我遇到了无数关于不正确语法的问题，我已经设法缩小了范围，但现在我被困在最后一个似乎与某些关键字有关的问题上。

如果您要搜索包含“或”或“和”的任何内容，则它会在 SQL 搜索字符串中返回语法错误。

对于其他问题，我只是简单地逃脱了流氓字符或完全从搜索中删除它们，但这似乎不是一个可行的解决方案，因为这些词可能是我们搜索的一部分。

Irony 链接：http: [//irony.codeplex.com/](http://irony.codeplex.com/)

```
 if (!string.IsNullOrEmpty(fTextSearch))
            {
                sql.AppendLine("UNION");
                sql.AppendLine(commonClause);
                sql.AppendLine(string.Format("AND CONTAINS(nt.text, '{0}', LANGUAGE 'English')", fTextSearch));
            }

        IList<Product> results = query.List<Product>(); 
```

当联合被添加到字符串中时，它会导致它崩溃并抛出错误，并且错误出现在最后一行。

实际错误是：

```
Syntax error near 'gum' in the full-text search condition 'orbit gum'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Syntax error near 'gum' in the full-text search condition 'orbit gum'. 
```

目前如何解决其他问题；

```
 private string[] syntaxErrorChars = { "{", "}", "[", "]", "and", "(", ")" };
    private string[] errorChars = { "'", "&", "/", "\\", "~", "@" };

        if (compiler.Parser.GetErrors().Count == 0)
        {
            AstNode root = compiler.Parse(phrase.ToLower());
            if (compiler.Parser.GetErrors().Count == 0)
            {
                try
                {

                    fTextSearch = SearchGrammar.ConvertQuery(root, SearchGrammar.TermType.Inflectional);
                }
                catch
                {
                    fTextSearch = phrase;
                }
            }
            else
            {
                fTextSearch = phrase;
            }
        }
        else
        {
            fTextSearch = phrase;
        }

        //Escape Search String
        StringBuilder sb = new StringBuilder();

        string[] splitString = fTextSearch.Split(errorChars, StringSplitOptions.None);

        int numNewCharactersAdded = 0;
        foreach (string itm in splitString)
        {
            sb.Append(itm); //append string
            if (fTextSearch.Length > (sb.Length - numNewCharactersAdded))
            {
                sb.Append(fTextSearch[sb.Length - numNewCharactersAdded]); //append splitting character
                sb.Append(fTextSearch[sb.Length - numNewCharactersAdded - 1]); //append it again
                numNewCharactersAdded++;
            }
        }

        if(!string.IsNullOrEmpty(sb.ToString()))
            fTextSearch = sb.ToString();
        //Escaping Finished

        //Remove Syntax breaking characters
        for (int i = 0; i < syntaxErrorChars.Count(); i++)
        {
            fTextSearch = fTextSearch.Replace(syntaxErrorChars[i], string.Empty);
        }
        //Finished Syntax breaking characters. 
```

给出错误时的实际查询是：

```
 SELECT DISTINCT prod.prod_id as node1_76_0_, prod.stock_code as stock2_95_0_, prod.supplier_part_number as supplier3_95_0_, prod.sold_in_multiple as sold4_95_0_, prod.free as free95_0_, prod.poa as poa95_0_, prod.allow_back_order as allow7_95_0_, prod.stock_threshold as stock8_95_0_, prod.low_stock_threshold as low9_95_0_, prod.tax_type as tax10_95_0_, prod.nominal_sale as nominal11_95_0_, prod.nominal_purchase as nominal12_95_0_, prod.commodity_code as commodity13_95_0_, prod.preferred_alternative as preferred14_95_0_, prod.role as role95_0_, prod.stock_type as stock16_95_0_, prod.weight as weight95_0_, prod.imported_by as imported18_95_0_, prod.import_code as import19_95_0_, prod.customisable as customi20_95_0_, prod.customisable_prompt as customi21_95_0_, prod.agent_only as agent22_95_0_, prod.sell_to_retail as sell23_95_0_, prod.sell_to_trade as sell24_95_0_, prod.sell_by_decimal as sell25_95_0_, prod.length as length95_0_, prod.breadth as breadth95_0_, prod.width as width95_0_, prod.hazardous as hazardous95_0_, prod.fragile as fragile95_0_, prod.liquid as liquid95_0_, prod.palletised as palletised95_0_, prod.attractive as attractive95_0_, prod.boxed as boxed95_0_, prod.charge_code as charge35_95_0_, prod.discount_code as discount36_95_0_, prod.floor_price as floor37_95_0_, prod.cost_price as cost38_95_0_, prod.crm as crm95_0_, prod.category as category95_0_, prod.sub_category as sub41_95_0_, prod_1_.version_number as version2_76_0_, prod_1_.[name] as name3_76_0_, prod_1_.visible_on_website as visible4_76_0_, prod_1_.url_part as url5_76_0_, prod_1_.parent as parent76_0_, prod_1_.bnd_id as bnd7_76_0_, prod_1_.template as template76_0_, prod_1_.custom_string_1 as custom9_76_0_, prod_1_.custom_string_2 as custom10_76_0_, prod_1_.custom_string_3 as custom11_76_0_, prod_1_.custom_string_4 as custom12_76_0_, prod_1_.custom_string_5 as custom13_76_0_, prod_1_.custom_bool_1 as custom14_76_0_, prod_1_.custom_bool_2 as custom15_76_0_, prod_1_.custom_bool_3 as custom16_76_0_, prod_1_.custom_bool_4 as custom17_76_0_, prod_1_.custom_bool_5 as custom18_76_0_, prod_1_.custom_decimal_1 as custom19_76_0_, prod_1_.custom_decimal_2 as custom20_76_0_, prod_1_.custom_decimal_3 as custom21_76_0_, prod_1_.custom_decimal_4 as custom22_76_0_, prod_1_.custom_decimal_5 as custom23_76_0_, prod_1_.created as created76_0_, prod_1_.updated as updated76_0_, prod_1_.created_by as created26_76_0_, prod_1_.updated_by as updated27_76_0_, prod_1_.flags as flags76_0_, prod_1_.active as active76_0_
FROM tbl_ecom_cat_product prod
   INNER JOIN tbl_ecom_cat_node prod_1_ ON prod_1_.node_id = prod.prod_id
   LEFT OUTER JOIN tbl_ecom_cat_node_text nt ON prod.prod_id = nt.node_id
   LEFT OUTER JOIN tbl_ecom_shipping_service AS s ON prod.role = s.shs_id
WHERE (
    s.shs_id IS NULL
)
AND ( prod_1_.visible_on_website = 1 )

AND ( prod_1_.name LIKE ?
    OR prod.stock_code LIKE ?
    OR prod.supplier_part_number LIKE ?
)
AND ( prod_1_.name LIKE ?
    OR prod.stock_code LIKE ?
    OR prod.supplier_part_number LIKE ?
)
UNION
SELECT DISTINCT prod.prod_id as node1_76_0_, prod.stock_code as stock2_95_0_, prod.supplier_part_number as supplier3_95_0_, prod.sold_in_multiple as sold4_95_0_, prod.free as free95_0_, prod.poa as poa95_0_, prod.allow_back_order as allow7_95_0_, prod.stock_threshold as stock8_95_0_, prod.low_stock_threshold as low9_95_0_, prod.tax_type as tax10_95_0_, prod.nominal_sale as nominal11_95_0_, prod.nominal_purchase as nominal12_95_0_, prod.commodity_code as commodity13_95_0_, prod.preferred_alternative as preferred14_95_0_, prod.role as role95_0_, prod.stock_type as stock16_95_0_, prod.weight as weight95_0_, prod.imported_by as imported18_95_0_, prod.import_code as import19_95_0_, prod.customisable as customi20_95_0_, prod.customisable_prompt as customi21_95_0_, prod.agent_only as agent22_95_0_, prod.sell_to_retail as sell23_95_0_, prod.sell_to_trade as sell24_95_0_, prod.sell_by_decimal as sell25_95_0_, prod.length as length95_0_, prod.breadth as breadth95_0_, prod.width as width95_0_, prod.hazardous as hazardous95_0_, prod.fragile as fragile95_0_, prod.liquid as liquid95_0_, prod.palletised as palletised95_0_, prod.attractive as attractive95_0_, prod.boxed as boxed95_0_, prod.charge_code as charge35_95_0_, prod.discount_code as discount36_95_0_, prod.floor_price as floor37_95_0_, prod.cost_price as cost38_95_0_, prod.crm as crm95_0_, prod.category as category95_0_, prod.sub_category as sub41_95_0_, prod_1_.version_number as version2_76_0_, prod_1_.[name] as name3_76_0_, prod_1_.visible_on_website as visible4_76_0_, prod_1_.url_part as url5_76_0_, prod_1_.parent as parent76_0_, prod_1_.bnd_id as bnd7_76_0_, prod_1_.template as template76_0_, prod_1_.custom_string_1 as custom9_76_0_, prod_1_.custom_string_2 as custom10_76_0_, prod_1_.custom_string_3 as custom11_76_0_, prod_1_.custom_string_4 as custom12_76_0_, prod_1_.custom_string_5 as custom13_76_0_, prod_1_.custom_bool_1 as custom14_76_0_, prod_1_.custom_bool_2 as custom15_76_0_, prod_1_.custom_bool_3 as custom16_76_0_, prod_1_.custom_bool_4 as custom17_76_0_, prod_1_.custom_bool_5 as custom18_76_0_, prod_1_.custom_decimal_1 as custom19_76_0_, prod_1_.custom_decimal_2 as custom20_76_0_, prod_1_.custom_decimal_3 as custom21_76_0_, prod_1_.custom_decimal_4 as custom22_76_0_, prod_1_.custom_decimal_5 as custom23_76_0_, prod_1_.created as created76_0_, prod_1_.updated as updated76_0_, prod_1_.created_by as created26_76_0_, prod_1_.updated_by as updated27_76_0_, prod_1_.flags as flags76_0_, prod_1_.active as active76_0_
FROM tbl_ecom_cat_product prod
   INNER JOIN tbl_ecom_cat_node prod_1_ ON prod_1_.node_id = prod.prod_id
   LEFT OUTER JOIN tbl_ecom_cat_node_text nt ON prod.prod_id = nt.node_id
   LEFT OUTER JOIN tbl_ecom_shipping_service AS s ON prod.role = s.shs_id
WHERE (
    s.shs_id IS NULL
)
AND ( prod_1_.visible_on_website = 1 )

AND CONTAINS(nt.text, 'orbit gum', LANGUAGE 'English')
 ]
  Name: wildcard1 - Value: %gum%
  Name: wildcard0 - Value: %orbit%
[SQL: SELECT DISTINCT prod.prod_id as node1_76_0_, prod.stock_code as stock2_95_0_, prod.supplier_part_number as supplier3_95_0_, prod.sold_in_multiple as sold4_95_0_, prod.free as free95_0_, prod.poa as poa95_0_, prod.allow_back_order as allow7_95_0_, prod.stock_threshold as stock8_95_0_, prod.low_stock_threshold as low9_95_0_, prod.tax_type as tax10_95_0_, prod.nominal_sale as nominal11_95_0_, prod.nominal_purchase as nominal12_95_0_, prod.commodity_code as commodity13_95_0_, prod.preferred_alternative as preferred14_95_0_, prod.role as role95_0_, prod.stock_type as stock16_95_0_, prod.weight as weight95_0_, prod.imported_by as imported18_95_0_, prod.import_code as import19_95_0_, prod.customisable as customi20_95_0_, prod.customisable_prompt as customi21_95_0_, prod.agent_only as agent22_95_0_, prod.sell_to_retail as sell23_95_0_, prod.sell_to_trade as sell24_95_0_, prod.sell_by_decimal as sell25_95_0_, prod.length as length95_0_, prod.breadth as breadth95_0_, prod.width as width95_0_, prod.hazardous as hazardous95_0_, prod.fragile as fragile95_0_, prod.liquid as liquid95_0_, prod.palletised as palletised95_0_, prod.attractive as attractive95_0_, prod.boxed as boxed95_0_, prod.charge_code as charge35_95_0_, prod.discount_code as discount36_95_0_, prod.floor_price as floor37_95_0_, prod.cost_price as cost38_95_0_, prod.crm as crm95_0_, prod.category as category95_0_, prod.sub_category as sub41_95_0_, prod_1_.version_number as version2_76_0_, prod_1_.[name] as name3_76_0_, prod_1_.visible_on_website as visible4_76_0_, prod_1_.url_part as url5_76_0_, prod_1_.parent as parent76_0_, prod_1_.bnd_id as bnd7_76_0_, prod_1_.template as template76_0_, prod_1_.custom_string_1 as custom9_76_0_, prod_1_.custom_string_2 as custom10_76_0_, prod_1_.custom_string_3 as custom11_76_0_, prod_1_.custom_string_4 as custom12_76_0_, prod_1_.custom_string_5 as custom13_76_0_, prod_1_.custom_bool_1 as custom14_76_0_, prod_1_.custom_bool_2 as custom15_76_0_, prod_1_.custom_bool_3 as custom16_76_0_, prod_1_.custom_bool_4 as custom17_76_0_, prod_1_.custom_bool_5 as custom18_76_0_, prod_1_.custom_decimal_1 as custom19_76_0_, prod_1_.custom_decimal_2 as custom20_76_0_, prod_1_.custom_decimal_3 as custom21_76_0_, prod_1_.custom_decimal_4 as custom22_76_0_, prod_1_.custom_decimal_5 as custom23_76_0_, prod_1_.created as created76_0_, prod_1_.updated as updated76_0_, prod_1_.created_by as created26_76_0_, prod_1_.updated_by as updated27_76_0_, prod_1_.flags as flags76_0_, prod_1_.active as active76_0_
FROM tbl_ecom_cat_product prod
   INNER JOIN tbl_ecom_cat_node prod_1_ ON prod_1_.node_id = prod.prod_id
   LEFT OUTER JOIN tbl_ecom_cat_node_text nt ON prod.prod_id = nt.node_id
   LEFT OUTER JOIN tbl_ecom_shipping_service AS s ON prod.role = s.shs_id
WHERE (
    s.shs_id IS NULL
)
AND ( prod_1_.visible_on_website = 1 )

AND ( prod_1_.name LIKE ?
    OR prod.stock_code LIKE ?
    OR prod.supplier_part_number LIKE ?
)
AND ( prod_1_.name LIKE ?
    OR prod.stock_code LIKE ?
    OR prod.supplier_part_number LIKE ?
)
UNION
SELECT DISTINCT prod.prod_id as node1_76_0_, prod.stock_code as stock2_95_0_, prod.supplier_part_number as supplier3_95_0_, prod.sold_in_multiple as sold4_95_0_, prod.free as free95_0_, prod.poa as poa95_0_, prod.allow_back_order as allow7_95_0_, prod.stock_threshold as stock8_95_0_, prod.low_stock_threshold as low9_95_0_, prod.tax_type as tax10_95_0_, prod.nominal_sale as nominal11_95_0_, prod.nominal_purchase as nominal12_95_0_, prod.commodity_code as commodity13_95_0_, prod.preferred_alternative as preferred14_95_0_, prod.role as role95_0_, prod.stock_type as stock16_95_0_, prod.weight as weight95_0_, prod.imported_by as imported18_95_0_, prod.import_code as import19_95_0_, prod.customisable as customi20_95_0_, prod.customisable_prompt as customi21_95_0_, prod.agent_only as agent22_95_0_, prod.sell_to_retail as sell23_95_0_, prod.sell_to_trade as sell24_95_0_, prod.sell_by_decimal as sell25_95_0_, prod.length as length95_0_, prod.breadth as breadth95_0_, prod.width as width95_0_, prod.hazardous as hazardous95_0_, prod.fragile as fragile95_0_, prod.liquid as liquid95_0_, prod.palletised as palletised95_0_, prod.attractive as attractive95_0_, prod.boxed as boxed95_0_, prod.charge_code as charge35_95_0_, prod.discount_code as discount36_95_0_, prod.floor_price as floor37_95_0_, prod.cost_price as cost38_95_0_, prod.crm as crm95_0_, prod.category as category95_0_, prod.sub_category as sub41_95_0_, prod_1_.version_number as version2_76_0_, prod_1_.[name] as name3_76_0_, prod_1_.visible_on_website as visible4_76_0_, prod_1_.url_part as url5_76_0_, prod_1_.parent as parent76_0_, prod_1_.bnd_id as bnd7_76_0_, prod_1_.template as template76_0_, prod_1_.custom_string_1 as custom9_76_0_, prod_1_.custom_string_2 as custom10_76_0_, prod_1_.custom_string_3 as custom11_76_0_, prod_1_.custom_string_4 as custom12_76_0_, prod_1_.custom_string_5 as custom13_76_0_, prod_1_.custom_bool_1 as custom14_76_0_, prod_1_.custom_bool_2 as custom15_76_0_, prod_1_.custom_bool_3 as custom16_76_0_, prod_1_.custom_bool_4 as custom17_76_0_, prod_1_.custom_bool_5 as custom18_76_0_, prod_1_.custom_decimal_1 as custom19_76_0_, prod_1_.custom_decimal_2 as custom20_76_0_, prod_1_.custom_decimal_3 as custom21_76_0_, prod_1_.custom_decimal_4 as custom22_76_0_, prod_1_.custom_decimal_5 as custom23_76_0_, prod_1_.created as created76_0_, prod_1_.updated as updated76_0_, prod_1_.created_by as created26_76_0_, prod_1_.updated_by as updated27_76_0_, prod_1_.flags as flags76_0_, prod_1_.active as active76_0_
FROM tbl_ecom_cat_product prod
   INNER JOIN tbl_ecom_cat_node prod_1_ ON prod_1_.node_id = prod.prod_id
   LEFT OUTER JOIN tbl_ecom_cat_node_text nt ON prod.prod_id = nt.node_id
   LEFT OUTER JOIN tbl_ecom_shipping_service AS s ON prod.role = s.shs_id
WHERE (
    s.shs_id IS NULL
)
AND ( prod_1_.visible_on_website = 1 )

AND CONTAINS(nt.text, 'orbit gum', LANGUAGE 'English') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:15:23.600

因为你的 sql 变量是 null 没有实例化

您必须添加此代码

```
if(sql != null)
{
 ....
} 
```

或在开始时创建此行

```
var sql = new StringBuilder(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:47:31.637

这部分：

```
AND CONTAINS(nt.text, 'orbit gum', LANGUAGE 'English')
 ]
  Name: wildcard1 - Value: %gum%
  Name: wildcard0 - Value: %orbit%
[SQL: 
```

看起来完全错误。看起来调试代码由于某种原因混入了查询中？不知道是什么原因造成的。

# cakephp - CakePHP 2.0 $this->Form->input()

> ID：11684596
> 
> 赞同：2
> 
> 时间：2012-07-27T08:57:45.870
> 
> 标签：cakephp, view

这是我的 add.tcp ...

```
<?php

echo $this->Form->create('Group');
echo $this->Form->input('group_id', array('label' => 'ID'));
echo $this->Form->input('group_desc', array('label' => 'Group Description'));
echo $this->Form->end('Save');

?> 
```

表名：groups 表字段：group_id、group_desc PK：group_id

这是我的控制器...

```
class GroupsController extends AppController {
  public $helper = array('Html', 'Form', 'Session');
  public $components = array('Session');

  public function add() {
    if ($this->request->is('post')) {
      if ($this->Group->save($this->request->data)) {
        $this->session.setFlash('');
        $this->redirect(array('action' => 'index'));
      }
    }
  }  
} 
```

当我在浏览器上显示此视图时，字段 group_id 没有任何内容，但 group_desc 有，看起来像这样的 HTML 源...

```
<form action="/cakephp/index.php/groups/add" id="GroupAddForm" method="post" accept-charset="utf-8" name="GroupAddForm">
    <div style="display:none;">
        <input type="hidden" name="_method" value="POST">
    </div><input type="hidden" name="data[Group][group_id]" id="GroupGroupId">
    <div class="input text">
        <label for="GroupGroupDesc">Group Description</label><input name="data[Group][group_desc]" maxlength="15" type="text" id="GroupGroupDesc">
    </div>
    <div class="submit">
        <input type="submit" value="บันทึก">
    </div>
</form> 
```

为什么被隐藏了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:09:19.233

CakePHP 自动确定您不希望用户手动输入 ID，因此会为您隐藏它。

如果您想强制显示 ID 字段，请将其设置`type`为`text`：

```
echo $this->Form->input('group_id', array('type' => 'text', 'label' => 'ID')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T09:10:52.930

因为默认情况下主键输入是隐藏的。CakePHP 在添加为自动增量 INT 或 uuid CHAR 时为您创建主键 不建议手动创建主键。

您可以将隐藏类型更改为文本：

```
echo $this->Form->input('group_id', array('label' => 'ID', 'type' => 'text')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T09:37:25.747

根据您的数据库结构，我想提出一些建议：

您的组表以 group_id 作为主键，使其成为数据库中的 auto_increment 并且无需手动将该 id 放在添加表单上，它将自动保存。表单字段根据模型结构生成。

# database - 如何在数据库中实现字段的排名？

> ID：11684602
> 
> 赞同：0
> 
> 时间：2012-07-27T08:57:53.267
> 
> 标签：database

试图找出实现字段排名的最佳方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:23:55.250

你的问题不是很清楚。

您可以尝试使用 DENSE_RANK 函数 SQL Server：'http://msdn.microsoft.com/en-us/library/ms173825.aspx' Oracle：[http ://www.techonthenet.com/oracle/functions/dense_rank.php](http://www.techonthenet.com/oracle/functions/dense_rank.php)

mysql:

```
set @sno:=0;
set @names:='';
select @sno:=case when @names=names then @sno else @sno+1 end as sno,@names:=names as names from test
order by names; 
```

# c# - 两个相同服务的问题

> ID：11684607
> 
> 赞同：0
> 
> 时间：2012-07-27T08:58:22.750
> 
> 标签：c#, linq, web-services

任何人都可以解决这个问题我有两个几乎相同的服务，但是在更新完成后一个在获取请求上失败了？

```
 public void UpdateCarType(string carregistration, CarType cartype)
        {
            var findcar = cartypes.Where(s => s.CarRegistration == carregistration).FirstOrDefault();

            if (findcar != null)
            {
                findcar.CarRegistration = cartype.CarRegistration;
                findcar.CarModel = cartype.CarModel;
                findcar.CarMake = cartype.CarMake;
                findcar.CarColour = cartype.CarColour;
                findcar.CarEngineSize = cartype.CarEngineSize;
                findcar.CarHireCostPerDay = cartype.CarHireCostPerDay;

            } 
```

这是运营合同：

```
 [OperationContract]
    [WebInvoke(Method = "PUT", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/UpdateCarType/{carregistration}")]
    void UpdateCarType(string carregistration, CarType cartype); 
```

这是客户端更新和获取请求：

更新：

```
 private void button29_Click(object sender, RoutedEventArgs e)
    {
        string uriupdatestaff = string.Format("http://localhost:8002/Service/UpdateCarType/{0}", textBox30.Text);
        StringBuilder sb = new StringBuilder();
        sb.Append("<CarType>");
        sb.AppendLine("<CarRegistration>" + textBox30.Text + "</CarRegistration>");
        sb.AppendLine("<CarColour>" + this.comboBox6.Text + "</CarColour>");
        sb.AppendLine("<CarEngineSize>" + this.comboBox7.Text + "</CarEngineSize>");
        sb.AppendLine("</CarType>");
        string NewStudent = sb.ToString();
        byte[] arr = Encoding.UTF8.GetBytes(NewStudent);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriupdatestaff);
        req.Method = "PUT";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        MessageBox.Show(resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    } 
```

得到：

```
 {
        string uriGetdates = "http://localhost:8002/Service/CarType";
        XDocument xDoc = XDocument.Load(uriGetdates);
        var dates = xDoc.Descendants("CarType")
            .Select(n => new
            {
                CarRegistration = n.Element("CarRegistration").Value,
                CarModel = n.Element("CarModel").Value,
                CarMake = n.Element("CarMake").Value,
                CarColour = n.Element("CarColour").Value,
                CarEngineSize = n.Element("CarEngineSize").Value,
                CostPerDay = n.Element("CarHireCostPerDay").Value,
            })
            .ToList();
        dataGrid10.ItemsSource = dates;
    } 
```

我的自动想法是因为我只定义汽车颜色和汽车发动机尺寸，其余字段为空，但完全相同的操作但与客户不这样做，即使我只更新一个字段，它也会将列表返回到数据网格中.

我得到的错误是`Object reference not set to an instance of an object.`当我尝试重新列出更新的车型时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:19:44.863

更新时，您不会为`CarModel`和设置任何内容`CarMake`...

所以我不明白你怎么能找回它们。

为了避免错误，而不管理真正的问题，您需要空检查：

```
CarRegistration = n.Element("CarRegistration")!= null ? n.element("CarRegistration").Value : string.Empty,
                //etc. 
```

顺便说一句，您可以使用 Xml.Linq 语法而不是 stringBuilder 来编写您的 Xml ！

```
var car = new XElement("CarType");
car.Add(new XElement("CarRegistration"), textBox30.Text);
//etc.
var NewStudent = car.ToString();//NewStudent for a car, weird ;) 
```

# ember.js - 在某些情况下，带有 args 的 Emberjs 路由会失败

> ID：11684615
> 
> 赞同：2
> 
> 时间：2012-07-27T08:58:43.543
> 
> 标签：ember.js, ember-old-router

在某些情况下，我遇到了路由 url 的问题。这是我的路由器：

```
contacts: Em.Route.extend({
    route: '/contacts',

    index: Em.Route.extend({
        route: '/',
        connectOutlets: function(router, context) {
            App.contactsController.populate()
            var appController = router.get('applicationController');
            appController.connectOutlet('contactsList');
        }
    }),

    show: Em.Route.extend({
        route: '/:contactid',
        connectOutlets: function(router, context) {
            alert('show contact');
        }
    }),

    doShowContact: function(router, event){
        router.transitionTo('show', {contactid: event.context.id});
    }
}), 
```

当我在 doShowContact 中输入时，如果我将**'contactid'**指定为上下文，并将**'/:contactid'**指定为 'show' 中的路由，我将在浏览器 url 中获得例如**'/contacts/3'**，一切正常。

但是在doShowContact 中，如果我指定**'contact_id'**而不是**'contactid'**作为上下文，**'/:contact_id'**而不是**'/:contactid'**作为路由。我将在浏览器 url 中获得**“/contacts/undefined” 。**

有没有办法解释它？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T10:52:43.070

您应该简单地传递联系人实例，而不是伪造具有`contactid`属性的对象：

```
doShowContact: function(router, event) {
  var contact = event.context;
  router.transitionTo('show', contact);
} 
```

您还应该`modelClass`在路线中指定属性：

```
show: Em.Route.extend({
  route: '/:contact_id',
  modelClass: App.Contact,

  // ...
}) 
```

# java - 可序列化类中的非瞬态不可序列化实例字段

> ID：11684616
> 
> 赞同：4
> 
> 时间：2012-07-27T08:58:45.897
> 
> 标签：java, serialization, findbugs

考虑以下代码：

```
public class LIMSGrid extends ClientEventSource implements Focusable, FramingBlockWrapper {

  //cell that is curently in edit mode
  private CellCoord editingCell = null;

  //framing block info
  private FramingBlock framingBlock;   

} 
```

现在`ClientEventSource`扩展一个实现`Serializable`接口的类。这些类`CellCoord`和`FramingBlock`是带有一堆 getter 和 setter 的 POJOS。FindBugs 抱怨`editingCell`and`framingBlock`字段说：

> 这个 Serializable 类定义了一个非原始实例字段，它既不是瞬态的、Serializable 也不是 java.lang.Object，并且似乎没有实现 Externalizable 接口或 readObject() 和 writeObject() 方法。如果此字段中存储了不可序列化的对象，则此类的对象将无法正确反序列化。

好的，所以一切都很好，除了为什么说实例字段不是 "java.lang.Object" 。这完全是误导，或者我在这里遗漏了一些基础知识？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T09:08:13.170

我的猜测（但这只是一个猜测）是，如果您引用实例，FindBugs 不会触发此警告`java.lang.object`，因为它认为在这种情况下，您的类是一个通用容器，它可以容纳任何类型的对象（如 Collection） .

在这种情况下，如果他希望容器是可序列化的，那么类的用户有责任确保存储在容器中的对象是可序列化的。（就像 ArrayList 是可序列化的，当且仅当您将可序列化对象存储在列表中时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:04:15.823

您应该使 CellCoord 和 FramingBlock 可序列化以避免该错误。如果您不想序列化它们，则应将它们设置为瞬态。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-13T11:00:21.630

如果在扩展可序列化的类中定义的任何一个对象将具有既不是瞬态的、可序列化的非原始实例字段，则类的对象将无法正确反序列化。因为如果类的任何对象想要保存它的状态，它就不能这样做，因为它有一个非原始实例字段，它既不是瞬态的，也不是可序列化的。

# android - 在其他方法中使用 setBackgroundResource？

> ID：11684618
> 
> 赞同：1
> 
> 时间：2012-07-27T08:58:48.263
> 
> 标签：android, eclipse

我的 onCreate 方法中有以下代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ImageView field1 = (ImageView) findViewById(R.id.field1);
    field1.setBackgroundResource(R.drawable.field0); 
```

如何在任何其他方法中设置 BackgroundResource，如下所示：

```
public void setBackground() {
    field1.setBackgroundResource(R.drawable.field2);
} 
```

它说， field1 无法解析为变量...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:03:17.770

将 field1 设置为类的 global，如下所示：

```
ImageView field1=null;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    field1 = (ImageView) findViewById(R.id.field1);
    field1.setBackgroundResource(R.drawable.field0);

}

public void setBackground() {
    field1.setBackgroundResource(R.drawable.field2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:01:50.627

您需要将视图放在函数的参数中：

```
public void setBackground(ImageView view) {
    view.setBackgroundResource(R.drawable.field2);
} 
```

现在你可以这样称呼它：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ImageView field1 = (ImageView) findViewById(R.id.field1);
    setBackground(field1); 
```

无论如何，您可能应该阅读一些代码教程以学习编码的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:04:54.467

```
ImageView field1; 
```

在 onCreate 方法之上设置 ImageView，因为它可以被整个班级使用

# android - 如何在指定位置的图像上放置文本框？

> ID：11684619
> 
> 赞同：0
> 
> 时间：2012-07-27T08:58:51.733
> 
> 标签：android, imageview, android-edittext

我想在 java 代码中动态地在图像上放置一个 TextBox。这是我的代码：

```
 ImageView image2 = new ImageView(this);       
    image2.setPadding(25, 25, 0, 0);  
    image2.setId(2001);
    image2.setImageResource(R.drawable.img);
    LayoutParams layoutParams = new   LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
    image2.setLayoutParams(layoutParams);  
    linear.addView(image2); 
```

这是我的形象：

![在此处输入图像描述](../Images/c5d9cdfa27b14fd1954109c7ee89078a.png)

我如何在这张图片上放置一个文本视图？？？请帮帮我..!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:48:35.430

你为什么要在java中这样做？认为您应该查看z-index 由添加项目的顺序定义`FrameLayout`：`z-index`

```
<FrameLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
>
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/my_drawable"
    android:scaleType="fitCenter"
    />
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|center"
    android:padding="5dp"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:02:29.597

将您的 ImageView 和 EditText 包装在 RelativeLayout 中（wrap_content 用于高度和宽度）。首先尝试使用布局编辑器并获取以编程方式设置的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:05:25.210

试试这个代码作为演示：

```
 //Main Rel_Layout
    RelativeLayout scrollHolder = new RelativeLayout(this);
    scrollHolder.setId(++myid);
    RelativeLayout.LayoutParams scrollHolderParams = new RelativeLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    scrollHolder.setLayoutParams(scrollHolderParams);
    scrollHolder.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);

    //  Image Holder Layout
    RelativeLayout imgHolder = new RelativeLayout(this);
    imgHolder.setId(++myid);
    RelativeLayout.LayoutParams imgHolderParams = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    imgHolder.setLayoutParams(imgHolderParams);
    imgHolder.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
    //imgHolder.setBackgroundColor(Color.BLUE);
    imgHolder.setLayoutParams(imgHolderParams);

        //  Image Object
    ImageView image2 = new ImageView(this);       
    image2.setId(++myid);
    image2.setBackgroundColor(Color.BLUE);
    //int resId = HomePage.this.getResources().getIdentifier("img2", "drawable", HomePage.this.getPackageName());
    image2.setImageResource(R.drawable.img2);
    //  set image to its holder
    imgHolder.addView(image2);
    //  set imgHolder to main Layout
    scrollHolder.addView(imgHolder);
    //   set main layout as content-view
    setContentView(scrollHolder);
// this will sure help you. 
```

* * *

OLDER **最简单的方法是：[1] 在您的****Relative-layout**中添加 EditText ，使用

布局中心水平=真和布局中心垂直=真

[2] 在 xml 中设置它的 Visibility=GONE

[3] 在代码文件中获取它的对象，并设置它的**“文本值”**和**Visibility = VIEW.Visible**

# android - 千兆像素图像 Android 应用

> ID：11684622
> 
> 赞同：1
> 
> 时间：2012-07-27T08:59:00.783
> 
> 标签：android, image, out-of-memory

我正在开发一个 Android 应用程序来显示图像。必备条件之一是显示千兆像素图像。

我发现内存显示正常图像（> = 1Mb）的问题，但我认为我已经解决了。对于千兆像素图像，管理此文件 (>=15Mb) 并防止 OutOfMemory 错误的最佳方法是什么？有人用过这种类型的图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:05:26.307

任何时候我都见过这样的事情（请记住，当我看到渲染引擎中应用了超大尺寸的纹理时，这更多）图像以瓷砖的形式引入，就像谷歌地图引入事物的方式一样。

根据缩放级别，使用不同的图像（mipmap），每个图像都有不同的细节级别，您只需加载必要的图块。这样（取决于您对应用程序的需求）您可以摆脱加载小图像但在放大时保持非常高水平的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:25:48.720

Android 对 App 有内存限制，一般为 48/64MB 左右。我是 PPV360HD 的作者，这是一款适用于 Android 的 Gigapixel Pano Viewer。我用过 C++，原生层没有这个限制。

# wcf - 从 JQuery Ajax 使用 wcf 服务应用程序

> ID：11684623
> 
> 赞同：0
> 
> 时间：2012-07-27T08:59:07.613
> 
> 标签：wcf, jquery, get, http-status-code-405

我已经构建了一个 WCF Web 应用程序，将它的方法公开到启用的方法中

```
[OperationContract]
[WebGet]
string getStatistics();

[OperationContract]
[WebGet]
string getVenues(string BrandName, int limit); 
```

并编辑了配置文件：

```
<endpoint address="json" binding="webHttpBinding"  contract="foursquare2RDF.IVenue2rdf" behaviorConfiguration="restBehavior"/> 
```

并在服务行为中：

```
 <endpointBehaviors>
<behavior name="restBehavior">
          <enableWebScript/>
        </behavior>
      </endpointBehaviors> 
```

我在 IIS 上托管了该服务，它在浏览器上运行良好，所以当你点击时：

```
http://localhost:83/venue2rdf.svc/json/getStatistics 
```

它返回了一个很好的结果

问题是如果显示这些错误，我无法使用这个宁静的服务：

```
OPTIONS http://localhost:83/venue2rdf.svc/json/getStatistics?{'venues':'100'} 405 (Method Not Allowed) 

XMLHttpRequest cannot load [http://localhost:83/venue2rdf.svc/json/getStatistics][1]. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我正在使用该代码来调用服务：

```
$.ajax({
    type: "get",
    url: statisticsURL,
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        eval("var x = " + msg.d);

        console.log(x);
    }
}); 
```

到目前为止我达到了什么：

*   我尝试用 $.getjson 替换 $.ajax，就像在类似问题中所述，错误 405 被删除，第二个错误刚刚出现
*   我找到了一个名为 Ajax enabled WCF service project 的东西，但我仍然不想迁移到新项目中
*   我知道有类似的问题，但都不适合，显示我的不同错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:09:17.507

您可能应该将其设为[JSONP](http://en.wikipedia.org/wiki/JSONP)请求，因为您要跨域，遇到[相同的源策略](http://en.wikipedia.org/wiki/Same_origin_policy)：

```
$.getJSON(stastatisticsURL + "?callback=?", success: function (msg) {
    eval("var x = " + msg.d);

    console.log(x);
}); 
```

该`?callback=?`部分 tels jquery 使其成为 JSONP。我建议您阅读 JSONP 是什么，因为它不是灵丹妙药。要在 WCF 服务上启用 JSONP，请阅读：

[C# WCF Web API + JSONP](https://stackoverflow.com/questions/6803264/c-sharp-wcf-web-api-jsonp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:23:54.960

为了让您使用 jQuery 使用跨域 WCF REST 服务，请在下面找到一个示例：

我的服务如下所示：

```
 [ServiceContract]
    public interface IJSONPService
    {
        [OperationContract]
        [WebGet]
        string GetDate();

        [OperationContract]
        [WebInvoke]
        string PostData(string name);
    } 
```

现在我的上述服务的配置条目如下所示：

```
<services>
    <service name="Service.JSONPService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="json" bindingConfiguration="defaultRestJsonp" contract="Service.IJSONPService">
        </endpoint>
    </service>
</services>
<behaviors>
      <endpointBehaviors>
         <behavior name="json">
             <enableWebScript />
         </behavior>
   </behaviors>
</endpointBehaviors>
<webHttpBinding>
        <binding name="defaultRestJsonp" crossDomainScriptAccessEnabled="true">
          <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="64" maxNameTableCharCount="2147483647" />
          <security mode="None" />
        </binding>
</webHttpBinding> 
```

您需要注意`crossDomainScriptAccessEnabled`绑定元素“defaultRestJsonp”中的属性，该属性负责确定针对 JSONP 的请求并适当地将响应转换为来自作为查询字符串的 URL 的回调方法

现在从您的页面执行以下调用上述 WCF REST 服务的 JavaScript，如下所示：

```
function TestingWCFRestWithJsonp() {
                $.ajax({
                    url: "http://domain.com/Service/JSONPService.svc/GetDate",
                    dataType: "jsonp",
                    type: "GET",
                    timeout: 10000,
                    jsonpCallback: "MyCallback",
                    success: function (data, textStatus, jqXHR) {
                        alert(data);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {alert('error');

                    },
                    complete: function (jqXHR, textStatus) {alert('complete');
                    }
                });
            }
            function MyCallback(data) {
                alert(data);
            } 
```

查看 $.ajax 方法调用中的 jsonpCallback 属性。

对 Web 服务调用的原始请求如下所示：

```
GET http://localhost/Service/JSONPService.svc/GetDate?callback=MyCallback&_=1343391683779 HTTP/1.1
Host: localhost
Connection: keep-alive 
```

WCF REST 服务的原始响应如下所示：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: application/x-javascript
Date: Fri, 27 Jul 2012 12:21:23 GMT
Content-Length: 27

MyCallback("27\/07\/2012"); 
```

注意：当您执行 JSONP 请求时，您的 $.ajax 方法错误/完成/成功不会被调用。

# python - Django 应用程序和子目录

> ID：11684626
> 
> 赞同：0
> 
> 时间：2012-07-27T08:59:14.953
> 
> 标签：python, django

在 Django 中，我试图将一个应用程序（所以只有应用程序在 installed_apps 中）分成几个子目录，结构如下：

```
app
    views.py
app\subdir1
    views.py
app\subdir2
    views.py 
```

文件 app\views.py 仅包含

```
from subdir1.views import * 
```

所以我将 app.subdir1.views 的命名空间折叠到 app.views 中。但是，这不是理想的解决方案，我宁愿使用

```
import subdir1.views 
```

并且不折叠命名空间，但是这种结构使 Django 抱怨错误“无法导入 app.views.subdir1.json。父模块 app.views.subdir1 不存在。” 这当然是正确的，因为该父模块不存在。

所以我想提出的问题是：这个目录结构是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:07:02.230

应该有可能，您可以使用`app.subdir1.views.foo`in `urls.py`then 并完全避免导入 in `app/views.py`。

也许`__init__.py`这些目录之一中缺少文件？

# android - Android：如何在 Android 4.0+ 的 WebView 中禁用文本选择？

> ID：11684632
> 
> 赞同：1
> 
> 时间：2012-07-27T08:59:24.667
> 
> 标签：android, webview, android-webview, copy-paste

> **可能重复：**
> [禁用文本选择](https://stackoverflow.com/questions/11820708/disabling-text-selection)

我正在构建一个基于 phonegap 的应用程序，我不想在长触摸发生时默认不允许文本选择。我在 SO 上找了好几天，答案都没有奏效，就像[这里](https://stackoverflow.com/questions/5107651/android-disable-text-selection-in-a-webview)或[这里](https://stackoverflow.com/questions/5995210/disabling-user-selection-in-uiwebview)一样。对我来说，自动文本选择只发生在 Android 4.0+ 上。

1.  设置 '-webkit-user-select: none;' 的最简单解决方案 没用（但它适用于 iOS UIWebview）
2.  我只想在保持触摸事件开启的情况下禁用这个单一功能，因此没有覆盖触摸事件。

对 Android 4.0+ 特有的这个问题有任何想法吗？提前致谢。

# php - 如何在 PHP 中获取类全局变量？

> ID：11684634
> 
> 赞同：0
> 
> 时间：2012-07-27T08:59:30.083
> 
> 标签：php, scope

> **可能重复：**
> [类中的访问变量](https://stackoverflow.com/questions/6058814/access-variable-in-class)

我正在为一个类构建一些缓存功能，并且想要一个“类全局”数组，即一个在所有实例中都相同但不是常量的数组。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:01:18.650

您可以使用静态变量来实现它。

但老实说，您不应该这样做，因为全局状态并不好。

如果必须，它看起来像：

```
class SomeClass
{
    static public $var = array();
} 
```

您可以使用`self::$var`或`static::$var`从类本身或子类中访问它，`SomeClass::$var`或者`instanceOfSomeClass::$var`从外部访问它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T09:06:06.430

您的解决方案是一个`static`变量！

```
<?php
// ...
class Foo {
  public static $array;

  public static function addValue($key, $value) {
    self::$array[$key] = $value;
  }

  public static function getArrayKey($key) {
    if(isset(self::$array[$key])) {
      return self::$array[$key];
    }
  }
}

Foo::addValue('foo', 'bar');
echo(Foo::getArrayKey('foo'));
// ...
?> 
```

# git - 关于多个远程存储库的 Git 状态

> ID：11684637
> 
> 赞同：3
> 
> 时间：2012-07-27T08:59:36.897
> 
> 标签：git, github

我有一个脚本，如果我忘记在我的 40 多个存储库中的每一个上提交或推送一些代码，它会通过电子邮件提醒我。

在我的两个项目中，我遵循了这些帖子中的答案，在那里我设置了“git-push”来推送到多个存储库：

> [从多个远程位置拉/推](https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations)
> 
> [git 同时推送到多个仓库](https://stackoverflow.com/questions/4255865/git-push-to-multiple-repositories-simultaneously)

所以我有一个 .git/config 文件：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[branch "master"]
    remote = origin
    merge = refs/heads/master
[remote "origin"]
    url = https://www.example.com/git/project/
    url = git@github.com:username/project.git
[remote "example"]
    url = https://www.example.com/git/project/
    fetch = +refs/heads/*:refs/remotes/example/*
[remote "github"]
    url = git@github.com:username/project.git
    fetch = +refs/heads/*:refs/remotes/github/* 
```

这在执行 git push/pull 时效果很好。

使用我使用的脚本：

```
git status --short 
```

但这仅显示未提交的更改...即使没有“--short”标志，它也不会显示只有 1 个遥控器通常会出现的内容：

```
Your branch is ahead of 'origin/master' by 1 commit. 
```

尝试运行以下任何“diff”命令似乎也不起作用......第一次就可以了，但它似乎记住了远程文件的设置日期/时间，所以当你进行更多更改，将它们与历史上的该版本进行比较：

```
git diff --name-status "origin";
git diff --name-status "origin/master";
git diff --name-status "example/master";
git diff --name-status "github/master"; 
```

有什么想法吗？我对 Git 相当陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:30:37.017

我相信这种方法可能有点错误，因为它似乎记住了每个遥控器的提交 ref，但是在进行推/拉时这不会更新......所以当通过差异检查时，它总是会查看旧的提交参考进行比较。

虽然它不是此设置的解决方案，但我已经回到了单个远程设置，但对其进行了编辑，使其具有 2 个 url……因此，虽然仅从一个远程进行拉取，但当我推送时，它变为两个：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[branch "master"]
    remote = origin
    merge = refs/heads/master
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = https://www.example.com/git/project/
    url = git@github.com:username/project.git 
```

注意：这仅适用于现在，因为我是唯一的提交者。

# box-api - Box V2 API 中的文件夹/文件智能链接启用/禁用调用

> ID：11684640
> 
> 赞同：0
> 
> 时间：2012-07-27T08:59:45.233
> 
> 标签：box-api

最近，box dev 博客上的一篇文章谈到了 V2 API 功能的更新。[http://developers.blog.box.com/2012/07/13/more-v2-updates/](http://developers.blog.box.com/2012/07/13/more-v2-updates/)。

我专门谈论文件/文件夹的共享链接。文章说该 API 可用于创建/删除共享链接并更改权限。但我在[http://developers.box.com/docs](http://developers.box.com/docs)页面上没有看到任何此类 API。

有人对这种差异有任何想法吗？现在在 V2 中是否可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:33:07.723

智能链接被视为文件夹或文件的属性，可以通过更新有关文件夹或文件的元数据来创建。这是通过 PUT 方法完成的。您可以[在此处查看文件](http://developers.box.com/docs/#files-update-a-files-information)和[此处查看文件夹](http://developers.box.com/docs/#folders-update-information-about-a-folder)。

例如，如果您想为文件启用共享链接，您可以使用 cURL 进行此调用：

```
curl https://api.box.com/2.0/files/FILE_ID \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-d {"shared_link": {"access": "open"}} \
-X PUT 
```

# javascript - 我如何知道通过 jquery 拖入了哪些元素？

> ID：11684641
> 
> 赞同：1
> 
> 时间：2012-07-27T08:59:49.567
> 
> 标签：javascript, jquery-ui, jquery

我正在使用 jquery draggable 并且我正在处理停止事件。我需要知道被拖入的 LI 元素的 ID。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:01:37.510

`ui`object 具有`.helper`属性，表示被拖动的`jQuery`对象。`id`您可以通过这种方式从中检索元素：

```
stop: function(event, ui) { 
    alert( ui.helper[0].id );         // here it is
} 
```

[**演示**](http://jsfiddle.net/HpUG7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:12:27.370

的`target`属性`event`应该是可拖动的：

```
stop: function(event, ui) { 
    console.log(event.target.id); // Assuming it has an ID
} 
```

[实例](http://jsbin.com/asevam)| [来源](http://jsbin.com/asevam/edit)

# jquery - cookie 在 symbian 中不起作用

> ID：11684644
> 
> 赞同：-1
> 
> 时间：2012-07-27T09:00:02.613
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova, phonegap-plugins

大家好，我正在使用phonegap 开发一个应用程序。我的应用程序在 android 和 blackberry 上运行良好，但在 symbian 上却无法运行。

在其中一个页面上，我设置了 cookie，例如：

```
 $.cookie("userName", userName, { path: '/' });
 $.cookie("currentTime", currentTime, { path: '/' }); 
```

在另一个页面上，我尝试像这样访问它：

```
alert($.cookie('userName')); 
```

但是警报显示为“null”，尽管相同的代码在 android 和 blackberry 上运行良好。
Symbian 是否支持 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:26:05.850

尝试另一种 JS 代码进行测试

```
// Function that create a cookie and set its value
function setCookie(name, value, expiryDate) {
document.cookie = escape(name) + "=" + escape(value) + "; path=/" +
    ((expiryDate == null) ? "" : "; expires=" + expiryDate.toGMTString());
}

// Function that gets the cookies value
function getCookie(name) {
var cookieName = name + "=";
var documentCookie = document.cookie;
var start, end;

if(documentCookie.length > 0) {
    start = documentCookie.indexOf(cookieName);
    if(start != -1) {
        start += cookieName.length;
        end = documentCookie.indexOf(";", start);
        if(end == -1) end = documentCookie.length;

        return unescape(documentCookie.substring(start, end));
    }
}
return null;
} 
```

您可以使用

```
setCookie('cookieName', value, cookieExpiry); 
```

并获得它的价值

```
getCookie('cookieName') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:24:12.587

Nokia 中的 WGZ 小部件不支持 cookie，但作为一种解决方法，我开始使用小部件，但好像它是一个 localStorage 对象；这是一个片段......我希望它有所帮助

干杯

```
if (!window.localStorage) {

if(typeof(widget)==='undefined')
{
//alert('working with an OS5 blackberry');
 window.localStorage = {
getItem: function (sKey) {
  if (!sKey || !this.hasOwnProperty(sKey)) { return null; }
  return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1"));
},
key: function (nKeyId) { return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/, "").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[nKeyId]); },
setItem: function (sKey, sValue) {
  if(!sKey) { return; }
  document.cookie = escape(sKey) + "=" + escape(sValue) + "; path=/";
  this.length = document.cookie.match(/\=/g).length;
},
length: 0,
removeItem: function (sKey) {
  if (!sKey || !this.hasOwnProperty(sKey)) { return; }
  var sExpDate = new Date();
  sExpDate.setDate(sExpDate.getDate() - 1);
  document.cookie = escape(sKey) + "=; expires=" + sExpDate.toGMTString() + "; path=/";
  this.length--;
},
hasOwnProperty: function (sKey) { return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie); }
};
window.localStorage.length = (document.cookie.match(/\=/g) || window.localStorage).length;
}
else
{ 
//alert('working with widgets');
window.localStorage={
 getItem: function (sKey) {
    return widget.preferenceForKey(sKey);
},

setItem: function (sKey, sValue) {
  widget.setPreferenceForKey(sValue, sKey);
},
length: 0,
removeItem: function (sKey) {
   widget.setPreferenceForKey(null,sKey );
},
hasOwnProperty: function (sKey) { 
     return widget.preferenceForKey(sKey)!==null;
}
};
}
} 
```

# grails - 如何在 Grails CRUD 动态脚手架的视图部分隐藏字段？

> ID：11684645
> 
> 赞同：8
> 
> 时间：2012-07-27T09:00:10.033
> 
> 标签：grails

我想知道是否有另一种方法可以使域的某个字段不出现在 Grails 的动态脚手架功能的视图页面中？

我可以`generate-all`在域上执行命令并自己编辑视图，但我只是想知道是否有办法让我仍然利用动态脚手架功能。

我只想不在我的用户域的`show`和`edit`视图上显示密码字段。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T00:51:34.947

我不同意格雷格上面的评论。脚手架对于减少不必要的代码非常有帮助。

在您的域类中添加一个调用该属性的约束`display:false`，即

```
static constraints { 
   password display: false
} 
```

这将在搭建脚手架时为您隐藏属性。

文档：[http ://www.grails.org/doc/latest/ref/Constraints/Usage.html](http://www.grails.org/doc/latest/ref/Constraints/Usage.html)

# javascript - 在树中移动 - 向导风格 (asp.net mvc)

> ID：11684649
> 
> 赞同：1
> 
> 时间：2012-07-27T09:00:52.083
> 
> 标签：javascript, jquery, asp.net-mvc

假设我有一个由节点组成的有根树。每个节点都包含一些数据。我想允许用户在树中移动，而（部分）视图显示当前节点的数据并允许用户前后移动（仅当节点不是根节点时才返回，仅当节点是不是终端节点）。

每次移动都会回发整个树以及当前节点（可能是 ajaxified）。

我只是想知道是否有人实现了类似的场景，如果是这样，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:48:44.310

I am still not sure exactly on the requirements, but perhaps this is what you are looking for:

[wizard forms in mvc](http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx)

# java - 将属性传递给 GWT 服务器的最佳方式

> ID：11684652
> 
> 赞同：3
> 
> 时间：2012-07-27T09:00:55.733
> 
> 标签：java, gwt

我有一个**GWT 服务器**，它将通过**RMI**或**CustomConnection**连接另一台服务器。我想有一种方法告诉**GWT 服务器**使用哪种连接类型。

我能想到的：

1.  添加自定义标签`web.xml`
2.  创建一个包含连接值的普通文件

哪一个更好？你知道任何其他最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:41:57.127

如果您在启动时知道，我会使用初始化参数：

[http://docs.oracle.com/cd/E11035_01/wls100/webapp/progservlet.html#wp159396](http://docs.oracle.com/cd/E11035_01/wls100/webapp/progservlet.html#wp159396)

例如，Java EE 标准 Web 应用程序部署描述符 web.xml 中的以下条目定义了两个初始化参数：greeting，其值为 Welcome 和 person，其值为 WebLogic Developer。

```
<servlet>
  ...
 <init-param>>
    <description>The salutation</description>
    <param-name>greeting</param-name>
    <param-value>Welcome</param-value>
  </init-param>
 <init-param>
    <description>name</description>
    <param-name>person</param-name>
    <param-value>WebLogic Developer</param-value>
  </init-param>
</servlet> 
```

要检索初始化参数，请从父 javax.servlet.GenericServlet 类调用 getInitParameter(String name) 方法。当传递参数的名称时，此方法将参数的值作为字符串返回。

重写 init() 方法

您可以通过覆盖 init() 方法让您的 servlet 在初始化时执行任务。以下代码片段读取在 J2EE 标准 Web 应用程序部署描述符 web.xml 中定义问候语和名称的标记：

```
 String defaultGreeting;
String defaultName;
 public void init(ServletConfig config) 
    throws ServletException {
  if ((defaultGreeting = getInitParameter("greeting")) == null)
    defaultGreeting = "Hello";
   if ((defaultName = getInitParameter("person")) == null)
    defaultName = "World";
} 
```

# java - Google Play 许可证检查 doCheck() 方法导致 nullPointerException 并强制关闭

> ID：11684656
> 
> 赞同：0
> 
> 时间：2012-07-27T09:01:15.000
> 
> 标签：java, android

下面的代码在运行时以 nullPointerException 结尾。

logcat 是第一位的，code 是第二位的。

日志猫：

```
 07-27 09:58:13.705: D/AndroidRuntime(18164): Shutting down VM
    0

        7-27 09:58:13

.705: W/dalvikvm(18164): threadid=1: thread exiting with uncaught exception (group=0x40a3c1f8)
    07-27 09:58:13.710: E/AndroidRuntime(18164): FATAL EXCEPTION: main
    07-27 09:58:13.710: E/AndroidRuntime(18164): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.liamwli.smsbusy/com.liamwli.smsbusy.Sms_busyActivity}: java.lang.NullPointerException
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.os.Handler.dispatchMessage(Handler.java:99)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.os.Looper.loop(Looper.java:137)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.ActivityThread.main(ActivityThread.java:4575)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at java.lang.reflect.Method.invoke(Method.java:511)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at dalvik.system.NativeStart.main(Native Method)
    07-27 09:58:13.710: E/AndroidRuntime(18164): Caused by: java.lang.NullPointerException
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at com.liamwli.smsbusy.Sms_busyActivity.doCheck(Sms_busyActivity.java:142)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at com.liamwli.smsbusy.Sms_busyActivity.onCreate(Sms_busyActivity.java:60)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.Activity.performCreate(Activity.java:4465)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
    07-27 09:58:13.710: E/AndroidRuntime(18164):    ... 11 more
    07-27 09:58:14.035: I/dalvikvm(18164): threadid=3: reacting to signal 3
    07-27 09:58:14.055: I/dalvikvm(18164): Wrote stack traces to '/data/anr/traces.txt'
    07-27 09:58:14.260: I/dalvikvm(18164): threadid=3: reacting to signal 3
    07-27 09:58:14.275: I/dalvikvm(18164): Wrote stack traces to '/data/anr/traces.txt'
    07-27 10:01:17.450: D/AndroidRuntime(18326): Shutting down VM
    07-27 10:01:17.455: W/dalvikvm(18326): threadid=1: thread exiting with uncaught exception (group=0x40a3c1f8)
    07-27 10:01:17.455: E/AndroidRuntime(18326): FATAL EXCEPTION: main
    07-27 10:01:17.455: E/AndroidRuntime(18326): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.liamwli.smsbusy/com.liamwli.smsbusy.Sms_busyActivity}: java.lang.NullPointerException
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.os.Handler.dispatchMessage(Handler.java:99)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.os.Looper.loop(Looper.java:137)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.ActivityThread.main(ActivityThread.java:4575)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at java.lang.reflect.Method.invoke(Method.java:511)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at dalvik.system.NativeStart.main(Native Method)
    07-27 10:01:17.455: E/AndroidRuntime(18326): Caused by: java.lang.NullPointerException
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at com.liamwli.smsbusy.Sms_busyActivity.doCheck(Sms_busyActivity.java:142)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at com.liamwli.smsbusy.Sms_busyActivity.onCreate(Sms_busyActivity.java:60)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.Activity.performCreate(Activity.java:4465)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
    07-27 10:01:17.455: E/AndroidRuntime(18326):    ... 11 more
    07-27 10:01:17.855: I/dalvikvm(18326): threadid=3: reacting to signal 3
    07-27 10:01:17.860: I/dalvikvm(18326): Wrote stack traces to '/data/anr/traces.txt'
    07-27 10:01:17.990: I/dalvikvm(18326): threadid=3: reacting to signal 3
    07-27 10:01:17.995: I/dalvikvm(18326): Wrote stack traces to '/data/anr/traces.txt'
    07-27 10:04:32.645: D/AndroidRuntime(18561): Shutting down VM
    07-27 10:04:32.645: W/dalvikvm(18561): threadid=1: thread exiting with uncaught exception (group=0x40a3c1f8)
    07-27 10:04:32.645: E/AndroidRuntime(18561): FATAL EXCEPTION: main
    07-27 10:04:32.645: E/AndroidRuntime(18561): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.liamwli.smsbusy/com.liamwli.smsbusy.Sms_busyActivity}: java.lang.NullPointerException
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.os.Handler.dispatchMessage(Handler.java:99)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.os.Looper.loop(Looper.java:137)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.ActivityThread.main(ActivityThread.java:4575)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at java.lang.reflect.Method.invoke(Method.java:511)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at dalvik.system.NativeStart.main(Native Method)
    07-27 10:04:32.645: E/AndroidRuntime(18561): Caused by: java.lang.NullPointerException
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at com.liamwli.smsbusy.Sms_busyActivity.doCheck(Sms_busyActivity.java:140)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at com.liamwli.smsbusy.Sms_busyActivity.onCreate(Sms_busyActivity.java:58)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.Activity.performCreate(Activity.java:4465)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
    07-27 10:04:32.645: E/AndroidRuntime(18561):    ... 11 more
    07-27 10:04:33.060: I/dalvikvm(18561): threadid=3: reacting to signal 3
    07-27 10:04:33.065: I/dalvikvm(18561): Wrote stack traces to '/data/anr/traces.txt'
    07-27 10:04:33.185: I/dalvikvm(18561): threadid=3: reacting to signal 3
    07-27 10:04:33.215: I/dalvikvm(18561): Wrote stack traces to '/data/anr/traces.txt'
    07-27 10:04:36.915: I/Process(18561): Sending signal. PID: 18561 SIG: 9 
```

第 140 行是最后一个括号下的 mChecker.checkAccess 行新行：

```
private void doCheck() {
        mChecker.checkAccess(mLicenseCheckerCallback);
    } 
```

第 58 行是对 doCheck 方法的调用：

```
doCheck(); 
```

其余的课程如下：

```
package com.liamwli.smsbusy;

import com.google.android.vending.licensing.LicenseChecker;
import com.google.android.vending.licensing.LicenseCheckerCallback;
import com.google.android.vending.licensing.Policy;
import com.google.android.vending.licensing.StrictPolicy;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.os.Handler;
import android.preference.PreferenceManager;
import android.provider.Settings.Secure;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;

public class Sms_busyActivity extends Activity {
    IntentFilter intentFilter;
    ToggleButton endis;
    EditText message;
    Button smessage;
    SharedPreferences getPrefs;
    SharedPreferences.Editor editor;
    private LicenseCheckerCallback mLicenseCheckerCallback;
    private LicenseChecker mChecker;
    private Handler mHandler;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String android_id = Secure.getString(getBaseContext()
                .getContentResolver(), Secure.ANDROID_ID);

        // if (!android_id.contentEquals("56d330123953677d")) {
        // Log.e("SMS Busy App", "Device ID not allowed. Exiting.");
        // finish();
        // } else {

        // Log.d("SMS Busy App", "Device ID Allowed");
        // }

        // Intent i = new Intent("com.liamwli.smsbusy.PREFS");
        // startActivity(i);
        setContentView(R.layout.def);

        doCheck();

        String KEY = "abcdefgijklmnopqrstuvqxyz"; //made up to post online

        endis = (ToggleButton) findViewById(R.id.enableddis);

        smessage = (Button) findViewById(R.id.savemess);

        message = (EditText) findViewById(R.id.message);

        getPrefs = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());

        editor = getPrefs.edit();

        mLicenseCheckerCallback = new MyLicenseCheckerCallback();

        final byte[] SALT = new byte[] { -46, 65, 30, -128, -103, -57, 74, -64,
                51, 88, -95, -45, 77, -117, -36, -113, -11, 32, -64, 89 };

        mChecker = new LicenseChecker(this, new StrictPolicy(), KEY);

        mHandler = new Handler();

        // ---intent to filter for SMS messages received---
        intentFilter = new IntentFilter();
        intentFilter.addAction("SMS_RECEIVED_ACTION");

        Boolean state = getPrefs.getBoolean("enabled", false);

        // String stext = getPrefs.getString("text", "");

        // message.setText(stext);
        message.setText(getPrefs.getString("text", ""));

        if (message.getText().toString().contentEquals("")) {
            Toast.makeText(this, "Unable to get saved message. Please resave.",
                    Toast.LENGTH_LONG).show();
        }

        endis.setChecked(state);

        endis.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

                Log.d("SMS Busy App", "onCheckedChanged Called");

                // Toast.makeText(Sms_busyActivity.this, "App state changed",
                // Toast.LENGTH_LONG).show();
                editor = getPrefs.edit();
                if (endis.isChecked()) {
                    editor.putBoolean("enabled", true);
                } else {
                    editor.putBoolean("enabled", false);
                }
                editor.putString("text", message.getText().toString());
                editor.commit();

            }
        });

        smessage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                editor = getPrefs.edit();
                editor.putString("text", message.getText().toString());
                editor.commit();
                Log.d("smessage", "Message saved & commited");
                Toast.makeText(Sms_busyActivity.this, "Message Saved",
                        Toast.LENGTH_SHORT).show();

            }
        });

    }

    private void doCheck() {
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    @SuppressWarnings("deprecation")
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (Integer.parseInt(android.os.Build.VERSION.SDK) < 5
                && keyCode == KeyEvent.KEYCODE_BACK
                && event.getRepeatCount() == 0) {
            Log.d("SMS Busy App", "onKeyDown Called");
            onBackPressed();
        }

        return super.onKeyDown(keyCode, event);
    }

    // public void onBackPressed() {
    // Log.d("SMS Busy App", "onBackPressed Called");
    // finish();

    // }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu);
        Log.d("SMS Busy App", "onCreateOptionsMenu Called");
        getMenuInflater().inflate(R.menu.mmenu, menu);
        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        super.onOptionsItemSelected(item);

        switch (item.getItemId()) {
        case R.id.aboutme:
            Intent i = new Intent(this, AboutMe.class);
            startActivity(i);
            break;

        }

        return true;
    }

    private void displayResult(final String result) {
        mHandler.post(new Runnable() {
            public void run() {
                Button mCheckLicenseButton = (Button) findViewById(R.id.button1);

                mCheckLicenseButton.setText("App Licenced. Click to continue.");
                mCheckLicenseButton.setEnabled(true);
                setContentView(R.layout.main);
                setProgressBarIndeterminateVisibility(false);

            }
        });
    }

    class MyLicenseCheckerCallback extends Activity implements
            LicenseCheckerCallback {
        public void allow(int reason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // Should allow user access.
            displayResult(getString(R.string.allow));
        }

        @SuppressWarnings("deprecation")
        public void dontAllow(int reason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }

            AlertDialog alert = new AlertDialog.Builder(Sms_busyActivity.this)
                    .create();
            if (reason == Policy.RETRY) {
                // If the reason received from the policy is RETRY, it was
                // probably
                // due to a loss of connection with the service, so we should
                // give the
                // user a chance to retry. So show a dialog to retry.
                alert.setTitle("Please retry license check");
                alert.setMessage("The connection to the licensing server was lost. Please click retry below");
                alert.setButton("Retry", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        // TODO Auto-generated method stub

                    }
                });
                alert.show();
            } else {
                // Otherwise, the user is not licensed to use this app.
                // Your response should always inform the user that the
                // application
                // is not licensed, but your behavior at that point can vary.
                // You might
                // provide the user a limited access version of your app or you
                // can
                // take them to Google Play to purchase the app.f
                setContentView(R.layout.def);
                alert.setTitle("Not Licensed");
                alert.setMessage("This app is not licensed. Please buy it off google play.");
                alert.setButton("Exit", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        // TODO Auto-generated method stub

                    }
                });
                alert.show();
            }
        }

        @Override
        public void applicationError(int errorCode) {
            // TODO Auto-generated method stub

        }
    }

} 
```

编辑：行号已关闭。生成了新的 logcat。请再看一遍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:04:52.140

使用 mChecker 后初始化它：

```
mChecker = new LicenseChecker(this, new StrictPolicy(), KEY);

mLicenseCheckerCallback = new MyLicenseCheckerCallback();

doCheck();

String KEY = "abcdefgijklmnopqrstuvqxyz"; //made up to post online

endis = (ToggleButton) findViewById(R.id.enableddis);

smessage = (Button) findViewById(R.id.savemess);

message = (EditText) findViewById(R.id.message);

getPrefs = PreferenceManager
        .getDefaultSharedPreferences(getBaseContext());

editor = getPrefs.edit();

final byte[] SALT = new byte[] { -46, 65, 30, -128, -103, -57, 74, -64,
        51, 88, -95, -45, 77, -117, -36, -113, -11, 32, -64, 89 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:04:39.560

`doCheck()`在调用方法之前放在下面的行

```
mChecker = new LicenseChecker(this, new StrictPolicy(), KEY); 
```

根据你的`onCreate()`，它应该看起来像

```
 setContentView(R.layout.def);
    String KEY = "abcdefgijklmnopqrstuvqxyz"; //Because u are using key in next line hence move Key before next line
    mChecker = new LicenseChecker(this, new StrictPolicy(), KEY);// <<<THIS LINE SHOULD COME BEFORE doCheck CALLED

    doCheck(); 
```

并且`setContentView(R.layout.def);`应该在超级调用 oncreate 之后移动。

# python - Tastypie NotFound：提供的资源查找数据无效（类型不匹配）

> ID：11684659
> 
> 赞同：4
> 
> 时间：2012-07-27T09:01:19.383
> 
> 标签：python, django, tastypie

是的，我很难理解这一点，

在我的本地环境中，我已经为 django User 对象集成了用户名查找：

```
class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        excludes = ['password', 'email', 'is_staff', 'is_active', 'is_superuser']
        resource_name = 'users'
        include_resource_uri = False
        filtering = {
            'username': ALL
        }

    def prepend_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/(?P<username>[\w\d_.-]+)/$" % self._meta.resource_name, self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
        ] 
```

在tastepie的源代码resources.py中，我在第1800行添加了两个打印语句

```
def obj_get(self, request=None, **kwargs):
    """
    A ORM-specific implementation of ``obj_get``.

    Takes optional ``kwargs``, which are used to narrow the query to find
    the instance.
    """
    try:
        print "1, ", kwargs
        base_object_list = self.get_object_list(request).filter(**kwargs)
        print "2, ", base_object_list
        # etcetera 
```

参观：

> /api/v1/users/foo/?format=json

这打印：

```
1,  {'username': foo'}
2,  [<User: foo>]
1,  {'id': 1}
2,  [<User: foo>] 
```

并返回正确的 JSON 对象。

但是，在我的远程（开发）服务器上，我有完全相同的设置（我仔细检查了所有文件），唯一的区别*似乎*是它运行的是 sweetpie python 2.7 egg 而不是 2.6，无论如何我得到这个打印：

```
1,  {'pk': u'foo'}
[27/Jul/2012 10:48:37] "GET /api/v1/users/foo/?format=json HTTP/1.0" 404 1219 
```

我也得到了这个堆栈跟踪：

```
{
error_message: "Invalid resource lookup data provided (mismatched type).",
traceback: "Traceback (most recent call last):

  File "...path.../resources.py", line 192, in wrapper
    response = callback(request, *args, **kwargs)

  File "...path.../resources.py", line 406, in dispatch_detail
    return self.dispatch('detail', request, **kwargs)

  File "...path.../resources.py", line 427, in dispatch
    response = method(request, **kwargs)

  File "...path.../resources.py", line 1051, in get_detail
    obj = self.cached_obj_get(request=request, **self.remove_api_resource_names(kwargs))

  File "...path.../resources.py", line 921, in cached_obj_get
    bundle = self.obj_get(request=request, **kwargs)

  File "/...path.../resources.py", line 1765, in obj_get
    raise NotFound("Invalid resource lookup data provided (mismatched type).")

NotFound: Invalid resource lookup data provided (mismatched type).
"

} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T09:07:08.410

对了，答案：

将 prepend_urls 更改为（将被弃用） override_urls 修复了该错误，我将在 github 上报告这个，似乎是 2.7 egg 问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-23T20:25:51.727

Tastypie 0.10.0 使用 prepend_urls 而不是 override_urls

[http://django-tastypie.readthedocs.org/en/latest/resources.html?highlight=prepend_urls#Resource.override_urls](http://django-tastypie.readthedocs.org/en/latest/resources.html?highlight=prepend_urls#Resource.override_urls)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:28:31.673

`prepend_urls`适用于 0.9.12a 版的美味派。

在 sweetpie v0.9.11 中，您应该`override_urls`改用。（据此[。](http://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#using-non-pk-data-for-your-urls)）

# c# - 实体框架：调用没有映射的存储过程

> ID：11684660
> 
> 赞同：2
> 
> 时间：2012-07-27T09:01:22.967
> 
> 标签：c#, entity-framework

有没有一种方法可以在不使用实体框架函数映射的情况下使用存储过程，这很好，但是当任何更改添加到存储过程时完全是垃圾负载，我知道你可以刷新存储过程映射，但它不是高效的。大多数情况下，当您更新映射时，它不会接收到非常烦人的更改。

到目前为止，我已经尝试了以下方法：

```
 var List = db.ExecuteStoreQuery<Business_Voucher_Top5_Result1>("exec usp_BusinessVoucher_Top5"); 
```

这很好用，但我可以在不创建映射并将参数传递给它的情况下做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:04:45.337

您不需要为它创建映射`ExecuteStoreQuery`- 您只需要使用具有与结果集中的列相同名称的属性的类型。

# objective-c - @synthesize 内存管理网

> ID：11684665
> 
> 赞同：3
> 
> 时间：2012-07-27T09:01:45.650
> 
> 标签：objective-c

假设我有这个成员：

```
@property (retain, nonatomic) Student *student;
@synthesize student; 
```

现在让我们在其他班级说，我正在设置学生，这意味着我正在将一些新创建的对象分配给学生。现在假设 student 之前已经引用了一个对象，所以我的问题是当我将新对象 ref 分配给 student 时，这个对象是否被释放？在这段代码中

```
someClassObjectRef.student = newStudent; //someClassObjectRef.student is already having one student object ref 
```

那么我必须在分配新对象之前明确释放旧对象还是@synthesize 在后面这样做？我希望你明白我想说什么。

注意：不使用 ARC。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:05:07.943

合成的 setter 将`release`在保留新对象之前将任何先前保留的对象；就像是：

```
- (void)setStudent:(Student *)student
{
    [student retain];
    [_student release];
    _student = student;
} 
```

请注意，它是旧对象**之前**`retain`传入的对象；这允许您将相同的对象传递给自身而无需释放它。 **`release`**

 **还有其他方法可以做到这一点，例如：

```
- (void)setStudent:(Student *)student
{
    if (student != _student)
    {
        [_student release];
       _student = [student retain];
    }
} 
```

释放学生对象的正确方法是`nil`在您的`dealloc`方法中设置：

```
- (void)dealloc
{
    [self setStudent:nil];    // or self.student = nil;
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:21:19.650

我希望你想要内存管理 `- (void)dealloc` 或 `- (void)viewDidUnload

```
- (void)dealloc {
   [student release]; or  [self setStudent:nil];
    [super dealloc];
 } 
```

这些是内存管理的最佳实践，或者您可以在使用时创建对象并在使用后释放。

```
Student *student = [[Student alloc]init];
// Do Some Work over here
[student release]; 
```**

# sql - plsql 中的错误。这里标志的值为 1 或没有数据。当没有数据我必须插入一些东西但错误来了。请提出建议

> ID：11684669
> 
> 赞同：-1
> 
> 时间：2012-07-27T09:01:52.270
> 
> 标签：sql, plsql

```
CREATE OR REPLACE PACKAGE BODY BAS_NUMB_UPD AS
PROCEDURE BAS_NUM_UPDN AS
CURSOR cur IS
    SELECT DISTINCT o.obj_id,LTRIM(substr(convert_171_to_711(cp.T_C_CP),1,7),'0')  bas_n
      FROM t_obj o, mat_tea_rel mpr, coorg_tea cp
     WHERE o.obj_type = 'Resin' 
       AND o.obj_id = mpr.obj_id
       AND mpr.p_k_id = cp.p_k_id;

    l_b_num_attr_id  number(10) := get_attribute_id('Ba Nu');
    flag1 VARCHAR2(10);

    BEGIN
        FOR x IN cur LOOP
            dbms_output.put_line(x.obj_id||'contains b n'||x.bas_n);
            SELECT flag INTO flag1
              FROM t_xc_s_values
             WHERE attr_id = l_b_num_attr_id 
               AND Obj_id = x.obj_id
               AND VALUE = x.bas_n;

            EXCEPTION 
               WHEN NO_DATA_FOUND THEN 
                  flag1 :='Nothing'; 
               WHEN OTHERS THEN
                   raise_application_error(-20011,'Unknown Exception in PROCEDURE');
            END;

            IF flag1 = 1 THEN 
                dbms_output.put_line('flag equal to one');
            ELSE
                INSERT INTO t_xc_s_values (obj_id, at_id, VALUE,)
                VALUES (x.obj_id, l_b_num_attr_id, x.bas_n);
            END IF;
        END LOOP;
    END;
    END BAS_NUM_UPDN;
END BAS_NUMB_UPD; 
```

这些是错误

> 错误（28,1）：PLS-00103：在预期以下情况之一时遇到符号“EXCEPTION”：begin case declare end exit for goto if loop mod null pragma raise return select update while with << close current delete fetch lock insert打开回滚
> 保存点设置 sql 执行提交 forall 合并管道
> 
> 错误（35,1）：PLS-00103：在预期以下情况之一时遇到符号“IF”：结束而不是编译指示最终实例化顺序覆盖静态成员构造函数映射
> 
> 错误（47,3）：PLS-00103：在预期以下情况之一时遇到符号“END”：；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:55:34.470

您的代码未正确嵌套：

*   如果你有一个 EXCEPTION 部分，你需要在同一级别上有三重 BEGIN / EXCEPTION / END。所以你可能需要在 LOOP 之后插入一个 BEGIN。

*   每个 END 必须匹配一个 BEGIN。除了前面提到的缺少 BEGIN 之外，最后还有太多 END 语句。删除倒数第三行的那个。

这些只是语法错误。我没有检查该程序是否符合您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:00:05.933

您得到的错误非常简单。您有一个`EXCEPTION ... END`但没有匹配的`BEGIN`. 你想为你的标志选择捕获 no_data_found ，所以用一个`BEGIN`

（为什么要使用WHEN OTHERS？为什么要捕获它然后说它是“未知”？错误永远不会未知。）

```
BEGIN
     FOR x IN cur LOOP
         dbms_output.put_line(x.obj_id||'contains b n'||x.bas_n);
         BEGIN -- added here
           SELECT flag INTO flag1
             FROM t_xc_s_values
            WHERE attr_id = l_b_num_attr_id
              AND Obj_id = x.obj_id
              AND VALUE = x.bas_n;
          EXCEPTION
             WHEN NO_DATA_FOUND THEN
                flag1 :='Nothing';
             WHEN OTHERS THEN
                raise_application_error(-20011,'Unknown Exception in PROCEDURE');
         END; 
```

下一个错误：您的插入语句有一个逗号太多：

```
INSERT INTO t_xc_s_values (obj_id, at_id, VALUE,) 
```

下一个错误：一个`END`太多

```
 END LOOP;
    END;  -- this will END your procedure block
    END BAS_NUM_UPDN; -- this will complain it has to match the procedure begin 
```

您的 PLSQL 代码也是不必要的。您可以将逻辑编写为 SQL 语句，从而提高性能。

```
PROCEDURE BAS_NUM_UPDN AS 
IS
   l_b_num_attr_id  number(10) := get_attribute_id('Ba Nu');
BEGIN
   INSERT INTO t_xc_s_values (obj_id, at_id, VALUE)
   SELECT DISTINCT o.obj_id,
                   l_b_num_attr_id,
                   LTRIM(substr(convert_171_to_711(cp.T_C_CP),1,7),'0') bas_n
     FROM t_obj o, mat_tea_rel mpr, coorg_tea cp
    WHERE o.obj_type = 'Resin'
      AND o.obj_id = mpr.obj_id
      AND mpr.p_k_id = cp.p_k_id;
      AND NOT EXISTS (SELECT flag
                        FROM t_xc_s_values
                       WHERE attr_id = l_b_num_attr_id
                         AND Obj_id = o.obj_id
                         AND VALUE = LTRIM(substr(convert_171_to_711(cp.T_C_CP),1,7),'0'));           
END; 
```

# java - spring-mongo-1.0.xsd 错误

> ID：11684673
> 
> 赞同：5
> 
> 时间：2012-07-27T09:02:00.870
> 
> 标签：java, spring, mongodb

我收到以下错误并且无法解决它，谷歌搜索也没有成果。请帮忙。

```
Referenced file contains errors (http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd). For more 
 information, right click on the message in the Problems View and select "Show Details..." 
```

这是我的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/data/mongo
    http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!--   replica-set="localhost:27017,localhost:27018" -->
    <context:annotation-config />
    <mongo:repositories base-package="com.kensho.dms.*" />
    <mongo:jmx/>
    <mongo:mongo host="192.168.55.2" port="27017" />
    <mongo:db-factory dbname="kenshodb" mongo-ref="mongo" />
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongo" ref="mongo"/>
        <constructor-arg name="databaseName" value="kenshodb"/>
     </bean>
     <bean id="mongoLoggedInUserDAO" class="com.kensho.nosql.MongoUserDAOImpl"  />

</beans> 
```

我厌倦了很多东西。我觉得它有一些依赖性问题。请帮忙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T12:43:09.240

几天前我遇到了同样的问题，我将 1.0 更改为 1.1 然后问题就消失了。看来他们已经更改了 xsd 文件。

```
http://www.springframework.org/schema/data/mongo/spring-mongo-1.1.xsd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:36:22.620

我也打这个。问题在于 Spring 数据 XSD 文件中的硬编码导入。我删除了 schemaLocation 中上下文和 bean 的导入，并使错误消失。

更多信息在这里

[http://forum.springsource.org/showthread.php?118643-xsd-validation-errors-in-Eclipse-when-using-spring-data](http://forum.springsource.org/showthread.php?118643-xsd-validation-errors-in-Eclipse-when-using-spring-data)

和这里

[https://jira.springsource.org/browse/DATAJPA-160](https://jira.springsource.org/browse/DATAJPA-160)

# android - 为 OpenCV Manager 下载打开 CV 示例提示

> ID：11684674
> 
> 赞同：5
> 
> 时间：2012-07-27T09:02:07.367
> 
> 标签：android, opencv, android-ndk

android的Open CV应用程序提示我下载并安装Open CV Manager...我只是想知道每个使用OpenCV库的应用程序中是否会有提示？如果是，有什么办法可以避免这种情况？预先感谢您的宝贵努力

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T13:29:46.463

是的，使用 opencv 2.4.2 如果您没有安装 opencv 管理器（还），它会提示您。

避免这种情况的方法在[这里](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)解释：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:48:51.113

您应该阅读 opencv.org 上的静态初始化

简介：您将本机库添加到项目的 libs 文件夹中。

在一般或 with_manager 样式库之后，使用 ..initAsync(...) 方法加载。您应该将其更改为 initDebug()。

您的项目无需管理器即可运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:42:48.887

我想你现在已经解决了这个问题，但是一旦你安装了管理器，你不应该得到很多（任何？）提示。看[这里](http://opencv.itseez.com/trunk/android/service/doc/Intro.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:19:29.043

要消除该消息，您需要在使用应用程序之前安装 OpenCV 管理器和相应的 OpenCV 二进制包。否则提示“未找到 OpenCV 管理器包！尝试安装它”。以下链接将帮助您“ [opencv 管理器包](http://opencv.itseez.com/trunk/doc/tutorials/introduction/android_binary_package/android_binary_package.html)”

# css - 如何在图像的一个角落添加一个“在”图像上的按钮？

> ID：11684675
> 
> 赞同：3
> 
> 时间：2012-07-27T09:02:10.003
> 
> 标签：css

我想**在图像顶部的**三个位置放置按钮

1.  图像的左下角
2.  图片的右下角
3.  图像的中心。（可选的）....

**如何将这些按钮放在图像的顶部。**

```
<img src="images/default_image.png" style="width:90%" id="mImage"  /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T09:21:32.300

这实际上与 jQuery 或 jQuery mobile 无关。可以用简单的 HTML 和 CSS 来完成。有关我将如何做到这一点的示例，请参见此小提琴：http: [//jsfiddle.net/rHaPH/22/](http://jsfiddle.net/rHaPH/22/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T09:35:00.000

尝试这个：

```
<div id="div-1">
  <img src="../img/logo.png" style="width:90%" id="mImage">
  <div id="div-1a" data-role="fieldcontain">
    <a href="index.html" data-role="button" data-icon="delete">Delete</a>
  </div>
  <div id="div-1b" data-role="fieldcontain">
    <a href="index.html" data-role="button" data-icon="delete">Delete</a>
  </div>
</div> 
```

有了这个：

```
#div-1 {
 position:relative;
}
#div-1a {
 position:absolute;
 bottom:0;
 left:0;
}
#div-1b {
 position:absolute;
 bottom:0;
 right:0;
} 
```

您可以将其复制到 JS fiddle 中，它将使用 JQMobile 工作。确保包含 JQM 的 css url，并确保在将 JQuery 添加到 JS 小提琴时勾选 JQMobile。

**更新：**

您还应该注意 JQMobile 会将 span 标签注入到 DOM 中，这将是您在运行时的按钮。这意味着我提供的 css 在概念上是可以的，但是选择器需要指向那些 span 标签（而不是使用 div 标签的 id）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T11:39:04.327

与今天一样，使用 jQuery mobile v1.3.2 我已经通过以下方式实现了它：

```
<div data-role="page">
   <div data-role="content">
      <div id="wrapper">
         <div id="button">
            <a href="#" data-role="button">Button</a>
         </div>
         <img src="i.jpg">
      </div>
   </div>
</div> 
```

并使用以下CSS：

```
#wrapper{ position:relative; }
#button{ position:absolute; top: 10px; left:0px; z-index:10; }
img{max-width:100%; } 
```

有些样式可能不需要您想要的，但我只是从我自己的代码中获取了代码示例。

包装器 div 是相对定位的，因此它的内容可以绝对定位。

按钮 div 中的 z-index 是为了确保它位于图像的顶部。

您可以根据需要添加任意数量的按钮，并更改其顶部、左侧、右侧和按钮的 css 属性以在图像周围移动它们

[jsFiddle](http://jsfiddle.net/P7QuH/)的工作示例

# php - Symfony2 回调使用许多 表单字段

> ID：11684677
> 
> 赞同：0
> 
> 时间：2012-07-27T09:02:12.200
> 
> 标签：php, forms, symfony, callback

我一直想知道是否可以使用 Symfony2 中的单个回调函数来验证许多表单字段。在我的项目中，我使用的是 REST API，我想发送用户名和密码字段以检查它们是否有效。我不想为此创建一个实体类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:25:17.827

See the [ValidatorInterface](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ValidatorInterface.php) definition — it has several methods you could use to validate particular properties or values using the `validator` service.

# java - java.util.logging：具有附加和计数属性的文件处理程序

> ID：11684678
> 
> 赞同：1
> 
> 时间：2012-07-27T09:02:12.690
> 
> 标签：java, logging

我可以同时使用**java.util.logging.FileHandler.count**和**java.util.logging.FileHandler.append**属性吗？

我的要求是，我想将日志消息附加到日志文件，直到达到限制，然后循环到下一个文件。

我尝试使用以下属性：

```
count = 3
append = true
pattern = xyz_%g.log 
```

但是对于每次运行，xyz_0.log 不是追加，而是被复制到 xyz_1.log 并且 xyz_0.log 获得全新的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:45:48.617

您应该能够将它们结合起来。只需查看[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/FileHandler.html中的构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/FileHandler.html)

# reporting-services - 如何正确对齐报告中的行？

> ID：11684686
> 
> 赞同：2
> 
> 时间：2012-07-27T09:02:37.367
> 
> 标签：reporting-services

我正在使用 SQL Server 2008 报告服务。我有一个带有页眉和 Tablix 的报告。Tablix 包含绑定到 DataSet 值的字段。

呈现报表时，它没有显示正确对齐的行。线条之间有间隙，如下图所示：

![在此处输入图像描述](../Images/80c988ee1d8c6b4ae5043c48751766f0.png)

虽然设计的线条从页眉到 Tablix 端显示为连续，但在渲染时，存在间隙且线条不连续。

# c++ - 如何使子小部件独立？

> ID：11684690
> 
> 赞同：6
> 
> 时间：2012-07-27T09:03:08.617
> 
> 标签：c++, qt

假设我有一个主 Widget，用于查看一些对象。这些对象的名称存储在 QListWidget 中。现在，当用户选择一个对象（QListWidget 的一项）时，我想在一个单独的窗口中打开另一个小部件，该窗口将对象的名称作为参数。

```
class MainWidget
{
Q_OBJECT

public slots:
    void openSelection();

};

class ChildWidget
{
public:
    ChildWidget(QString name, QWidget* parent = nullptr);
};

void MainWidget::openSelection()
{
    QString selectedObjectName = ui->objectsNamesList->selectedItem()->text();
    ChildWidget* detaildedWiew = new ChildWidget(selectedObjectName, this);
    detaildedWiew->show();
} 
```

当我这样做时，子小部件会打开，但它没有自己的空间。它被锁定在父区域中。我需要让孩子们自由，在屏幕上自由奔跑，独立于他们的父母。我怎样才能做到这一点？有一些 Qt 方法，还是我必须定义一些“伪子”关系并开发一个系统来正确删除伪子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:25:24.327

您可以使用`QWidget::setWindowFlags(Qt::Window)`使您的小部件成为一个单独的窗口。也看看[Qt::WindowFlags](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:24:38.060

不确定我的问题是否正确...

QWidget 的默认构造函数可以接受两个参数：

*   `QWidget *parent = 0`是新小部件的父级。如果它是 0（默认值），新的小部件将是一个窗口。如果不是，它将是父级的子级，并受父级几何形状的约束（除非您指定`Qt::Window`为窗口标志）。

*   `Qt::WindowFlags f = 0`（如果可用）设置窗口标志；默认值适用于几乎所有小部件，但要获得例如没有窗口系统框架的窗口，您必须使用特殊标志。

因此，如果您传递除以外`NULL`的任何内容`parent`，您的 wiget 将不会是一个单独的窗口，除非您将第二个参数设置为`QT::Window`。这就是你正在发生的事情。因此，您需要设置标志`QT::Window`，或者创建自己的类，从 派生它`QWidget`，并编写一个构造函数，该构造函数接受一个额外的参数，该参数将是您需要的指针，同时获得`NULL`as `parent`。

# c - 即使将 SO_REUSEADDR 与 IPv6 一起使用，套接字绑定也会失败

> ID：11684691
> 
> 赞同：2
> 
> 时间：2012-07-27T09:03:15.587
> 
> 标签：c, network-programming

我的应用程序需要在同一个端口上绑定一个具有相同 IPv6 地址的套接字。我正在使用下面的代码来实现相同的目的。但是第二次绑定会引发错误“地址已在使用中”。顺便说一句，只有当我包含第一个套接字的监听调用时，我才会收到此错误。没有监听调用，第二个套接字绑定就好了。

我做错了什么？请帮我理解。

谢谢

```
int fd1 = ::socket(AF_INET6, SOCK_STREAM, 0);
if (fd1 < 0)
{
    perror("fd1 socket()");
    return -1;
}

// Set SO_REUSEADDR for both sockets
int reuse = 1;
if (fcntl(fd1, F_SETFL, O_RDWR|O_NONBLOCK) <0)
{
    perror("fd1 fcntl64 failed");
    return -1;
}
if (::setsockopt(fd1, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(reuse)) < 0)
{
    perror("fd1 SO_REUSEADDR failed");
    return -1;
}
if (::setsockopt(fd1, SOL_IPV6, IPV6_V6ONLY, &reuse, sizeof(reuse)) < 0)
{
    perror("fd1 SO_REUSEADDR failed");
    return -1;
}

sockaddr_storage storage;
socklen_t addrlen = sizeof(storage);
memset(&storage, 0, addrlen);
sockaddr_in6& addr = reinterpret_cast<sockaddr_in6&>(storage);
addr.sin6_family = AF_INET6;
addr.sin6_port = 143;
addr.sin6_addr = in6addr_any;
sockaddr* pAddr = reinterpret_cast<sockaddr*>(&storage);

int val = 2;
socklen_t len = sizeof(val);

if (::getsockopt(fd1, SOL_SOCKET, SO_REUSEADDR, &val, &len) < 0)
{
    perror("fd1 getsock failed");
    return -1;
}

printf("Getsockopt returned %d at %d\n",val, __LINE__);

if (::bind(fd1, pAddr, sizeof(sockaddr_in6)) < 0)
{
    perror("bind fd1 failed");
    return -1;
}

if (::getsockopt(fd1, SOL_SOCKET, SO_REUSEADDR, &val, &len) < 0)
{
    perror("fd1 getsock failed");
    return -1;
}

printf("Getsockopt returned %d at %d\n",val, __LINE__);
if (listen(fd1, 128) < 0)
{
    perror("fd1, listen");
        return -1;
}
if (::getsockopt(fd1, SOL_SOCKET, SO_REUSEADDR, &val, &len) < 0)
{
    perror("fd1 getsock failed");
    return -1;
}

printf("Getsockopt returned %d at %d\n",val, __LINE__);
// Get the local address for fd1
addrlen = sizeof(storage);
if (::getsockname(fd1, pAddr, &addrlen))
{
    perror("getsockname for fd1 failed");
    return -1;
}
char straddr[INET6_ADDRSTRLEN];
if (!inet_ntop(AF_INET6, &addr.sin6_addr, straddr, sizeof(straddr)))
{
    perror("inet_ntop for fd1 failed");
    return -1;
}
printf("fd1=%d addr=%s:%d\n", fd1, straddr, addr.sin6_port);

addrlen = sizeof(storage);
addr.sin6_family = AF_INET6;
addr.sin6_port = 143;
int fd2 = ::socket(AF_INET6, SOCK_STREAM, 0);
if (fd2 < 0)
{
    perror("fd2 socket()");
    return -1;
}
if (::setsockopt(fd2, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(reuse)) < 0)
{
    perror("fd2 SO_REUSEADDR failed");
    return -1;
}
if (::setsockopt(fd2, SOL_IPV6, IPV6_V6ONLY, &reuse, sizeof(reuse)) < 0)
{
    perror("fd1 SO_REUSEADDR failed");
    return -1;
}

if (::bind(fd2, pAddr, sizeof(sockaddr_in6)) < 0)
{
    perror("bind fd2 failed");
    return -1;
}

// Get the local address for fd2
if (::getsockname(fd2, pAddr, &addrlen))
{
    perror("getsockname for fd2 failed");
    return -1;
}
if (!inet_ntop(AF_INET6, &addr.sin6_addr, straddr, sizeof(straddr)))
{
    perror("inet_ntop for fd2 failed");
    return -1;
}
printf("fd2=%d addr=%s:%d\n", fd2, straddr, addr.sin6_port);

return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T11:11:41.333

从`socket(7)`手册页：

> `SO_REUSEADDR`- 表示用于验证`bind(2)`调用中提供的地址的规则应允许重用本地地址。对于`AF_INET`套接字，这意味着套接字可以绑定，*除非有一个活动的侦听套接字绑定到该地址。当侦听套接字`INADDR_ANY`与特定端口绑定时，就不可能为任何本地地址绑定到该端口*。参数是一个整数布尔标志。

（强调我的）

您的第一个套接字绑定到 IPv6 等效端口 143 上`INADDR_ANY`，然后将其置于侦听状态。因此，只要第一个套接字保持打开状态，就不能在端口 143 上绑定其他套接字。

# java - 什么是实际可行的本地平台即服务实施？

> ID：11684692
> 
> 赞同：3
> 
> 时间：2012-07-27T09:03:17.210
> 
> 标签：java, cloud, paas

不确定这是否是提出此类问题的正确位置，也许可以告诉我在另一个 StackExchange 站点上将问题移到哪里。

我正在评估云平台，我有一些业务需求来评估它们，所以我正在尝试为我找到的产品构建小型 POC，但我不确定我包含和排除了哪些产品。

我需要的 PaaS 是：

*   内部部署：我有一个基于 VMWare 的私有基础架构
*   Java 支持：我有一个 IT 部门使用 Java 语言开发并支持 Spring
*   可以连接到本地遗留服务（DB2 通过 JDBC、IBM Queues 等）
*   完整：至少我需要一个全面的界面来自动扩展、监控、负载平衡
*   与 IDE 集成（可集成）：eclipse 或其他 Java IDE
*   与 CI 集成（可集成）：与 Jenkins 或其他 CI 一起运行的自动化（可编写脚本）部署

在我看来，产品报价之间存在很多混淆。例如，验证平台是否适用于私有数据中心并不总是那么简单。

现在我已经建立了两个 POC，我的注意力集中在这两个产品上：vFabric 和 Stackato，但是可能我遗漏了一些重要的东西，那么您认为哪些 PaaS 产品支持上述技术要求？

**更新**

我还在我的可行解决方案列表中添加了以下产品/项目：Cloudify 和 Cloudsoft AMP。
Cloudify 给我留下了深刻的印象，并开始在生产环境中为一组有限的应用程序部署它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T05:10:23.480

也可以参考cloudfoundry。由于它是一个 Open-PaaS，它对您和他们没有的东西非常有用，您可以创建它们并为它们做出贡献。所以这将是双方双赢的局面。

# java - Websphere Application Server 8.5 Java 7 题

> ID：11684698
> 
> 赞同：1
> 
> 时间：2012-07-27T09:03:25.040
> 
> 标签：java, websphere, websphere-8

关于 WAS 8.5 安装，我有以下问题：

1.  Java 7 可以安装在 {or}c:\IBM\Websphere\Appserver 之外吗
2.  Java 7 名称可以不是 Java1.7_64 吗？

还有如何获取信息。使用 IBM 的任何 bat/sh 文件

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:46:09.373

两者都否：无法更改 Java 安装目录。

要确定配置的 JDK，请获取 setupCmdLine 并使用 JAVA_HOME 变量。例如，在 UNIX 上：

```
. /path/to/profile/setupCmdLine.sh
echo $JAVA_HOME 
```

...在 Windows 上：

```
C:\path\to\profile\bin\setupCmdLine.bat
echo %JAVA_HOME% 
```

如果您需要自动发现，您可以编写一个包含以下内容的临时批处理文件，执行它（例如，使用 ProcessBuilder），然后解析结果输出：

```
@echo off
call "C:\path\to\profile\bin\setupCmdLine.bat"
echo JAVA_HOME=%JAVA_HOME% 
```

# asp.net-mvc-3 - 客户端验证正在工作，但将 Null 值传递给 MVC3 中的控制器？

> ID：11684699
> 
> 赞同：0
> 
> 时间：2012-07-27T09:03:26.980
> 
> 标签：asp.net-mvc-3

**客户端验证不起作用......** 我在另一个页面中完成了相同的过程，但没有使用 forloop。在这里，当我在不进行验证的情况下键入文本时，只需勾选图像正在显示...给我解决方案..

视图是

```
 @model IList<clientval.Models.ShoppingClass>
 @using (Html.BeginForm("Login", "Home"))
        {
            for (int i =0; i <1; i++)
            {

        <table>
        <tr>
        <td>@Html.Label("FirstName")</td>
        <td>@Html.TextBox("FirstName")<div>@Html.ValidationMessageFor(o => o[i].FirstName)</div></td>
        <td>@Html.Label("LastName")</td>
        <td>@Html.TextBox("LastName")<div>@Html.ValidationMessageFor(o => o[i].LastName)</div></td>
        <tr>
        }
        } 
```

脚本是

```
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script src="../../assets/js/ClientScript.js" type="text/javascript"></script> 
```

控制器是

```
[AcceptVerbs(HttpVerbs.Post)]
 public ActionResult Guestlogin(string firstname, string lastname)
        {

              ShoppingClass s = new ShoppingClass();
              var button = Request["button"];
              var ob = s.Newcustomer(customerfirstname, customerlastname);
             TempData["BN"] = ob;
            return RedirectToAction("Sucessfully", ob);

        } 
```

型号是

```
 [Required(ErrorMessage = "First Name is Required")]
    [RegularExpression(@"^[a-zA-Z ]*$", ErrorMessage = "First Name is Not valid")]
    public string FirstName { get; set; }

    [Required(ErrorMessage = "Last Name is Required")]
    [RegularExpression(@"^[a-zA-Z ]*$", ErrorMessage = "Last Name is Not valid")]
    public string LastName { get; set; }
    public List<ShoppingClass> Newcustomer(string firstname, string lastname)
        {

            List<ShoppingClass> list = new List<ShoppingClass>();
            ShoppingClass obj = new ShoppingClass();
.
.
.
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:06:18.143

不太确定你在用`for`-loop 做什么，但我猜这只是一个例子？

你不应该像这样使用 TextBoxFor 和 LabelFor ：

```
@using (Html.BeginForm("Login", "Home"))
        {
            for (int i =0; i <1; i++)
            {

        <table>
        <tr>
        <td>@Html.LabelFor(o => o[i].FirstName)</td>
        <td>@Html.TextBoxFor(o => o[i].FirstName)<div>@Html.ValidationMessageFor(o => o[i].FirstName)</div></td>
        <td>@Html.LabelFor(o => o[i].LastName)</td>
        <td>@Html.TextBoxFor(o => o[i].LastName)<div>@Html.ValidationMessageFor(o => o[i].LastName)</div></td>
        <tr>
        }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:07:02.803

尝试这个：

```
Html.Validate("FirstName"); 
```

在所有领域都这样

# php - 锂和验证登录表单（无模型） - 如何？

> ID：11684708
> 
> 赞同：1
> 
> 时间：2012-07-27T09:04:08.397
> 
> 标签：php, lithium

有什么方法可以在 Lithium教程中的[Simple Authentication 的登录表单上使用 Validator。](http://lithify.me/docs/manual/auth/simple-authentication.wiki)我知道最好在模型中使用验证，但是登录表单没有模型，所以，据我所知，我需要在 SessionsController 中使用验证器，但我不知道该怎么做（

我想做的是在 SessionsController 中：

```
<?php
namespace app\controllers;
use lithium\security\Auth;
use lithium\storage\Session;
use lithium\util\Validator;

class SessionsController extends \lithium\action\Controller {

private $rules = array(
    'password' => array(
        array('notEmpty', 'message' => 'password is empty'),
    ),
    'email' => array(
        array('notEmpty', 'message' => 'email is empty'),
        array('email', 'message' => 'email is not valid')
    )
);

public function add() {
    if ($this->request->data && Auth::check('default', $this->request)) {
        return $this->redirect('/');
    }
    // Handle failed authentication attempts
    $errors = Validator::check($this->request->data, $this->rules);
    return compact('errors');
}

public function delete() {
    Auth::clear('default');
    return $this->redirect('/');
}

/* ... */
} 
```

而且我希望在发送空表单后，它将呈现错误，例如在教程中的用户创建中。但是没有显示错误，只是再次登录表单。我可以在没有模型的情况下验证表单以及如何在 Lithium 中进行验证吗？

预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:48:21.893

表单中呈现的错误绑定到一个实体，当您使用`$this->form->create($user)`. 仅在这种情况下，由于表单助手会自动显示错误。

如果您需要在控制器中检查传入的数据，您可以`$this->request->data['password']`在表单视图中检查并返回您需要自己处理的错误（`if (!empty($errors))`例如）

# javascript - 我知道必须有一个更简单的方法来做到这一点：Javascript 函数模型返回日期

> ID：11684711
> 
> 赞同：0
> 
> 时间：2012-07-27T09:04:19.783
> 
> 标签：javascript, jquery, date, epoch, wijmo

我不得不说，我根本不是 Javascript 日期方面的专家……！例如，我查看了 DateJS，但是我的问题不仅仅是简单的日期转换（或者它应该是！）。

快速背景：我有一个服务调用，它返回一些 JSON 数据，其中包括来自 WCF/REST 的可怕的 Epoch 样式日期（我现在不能使用 Webapi - 这会给我原生 JSON.NET？）。

因此 JSON 对象的日期示例是：

开始日期：“/日期（1343378404560+0100）/”

现在，从我的调用返回的 JSON 包含我的 Wijmo 事件日历对象所需的更多信息，所以我认为可以，将为我的 Wijmo 事件对象创建一个 Javascript 函数/模型，并使用 jQuery MAP 函数仅选择我的字段需要。

我的 Javascript 事件模型如下所示：

```
function wijmoEventModel(in_id, in_calendar, in_subject, in_location, in_start, in_end, in_description, in_colour, in_allday, in_tag) {

    this._id = in_id;
    this._calendar = in_calendar;
    this._subject = in_subject;
    this._location = in_location;
    this._start = jsonDate(in_start);
    this._end = jsonDate(in_end);
    this._description = in_description;
    this._colour = in_colour;
    this._allday = in_allday;
    this._tag = in_tag;

    //  Public Properties/Methods
    return {
        id: this.id,
        calendar: this._calendar,
        subject: this._subject,
        location: this._location,
        start: this._start,
        end: this._end,
        description: this._description,
        color: this._colour,
        allday: this._allday,
        tag: this._tag
    }
}; 
```

所以，我有另一个使用 jQuery MAP 函数的小函数：

```
function returnWijmoCalendarObject(diaryEventData) {

    //  Using jQuery map, reduce our raw event data down to only the required wijmo calendar items
    var _calobj = $.map(diaryEventData, function (fld) {
        return new wijmoEventModel(fld.ID, fld.ResourceCalendarID, fld.EventTitle, fld.Location, fld.StartDate, fld.EndDate, fld.Description, fld.ResourceColour, fld.AllDay);
    });
    return {
        calendardata: _calobj
    }
}; 
```

所以上面的函数只是从我原始的完整 JSON 返回中选择所需的字段，并使用我的 Javascript 函数/模型返回一个新的“日历数据”JSON 对象，我可以将它与我的 Wijmo 事件日历一起使用。

还有一个小函数可以将 Epoch 样式的日期 "/Date(1343378404560+0100)/" 转换为（我认为！）一个真正的 Javascript Date 对象。像这样：

```
function jsonDate(rawDate) {

    var d = new Date();
    d.setMilliseconds = parseInt(rawDate.substr(6));
    return d;
} 
```

所以上面的第一个代码块当然使用了上面的小函数，希望将 Epoch 样式的原始日期转换为 Javascript 日期。

**所以我的问题/问题是：**

上面的模型和 jQuery 映射函数运行良好，我得到了一个完全符合我需要的结构的子集 JSON 对象，但是返回的日期（wijmoEventModel.start & end）不会作为 Javascript Date 对象返回？即使在那个 wijmoEventModel 中调试肯定有日期作为 JS 日期对象？

显然，我在这里缺少/不了解一些重要和基本的方面！！！

请！如果有人可以提供帮助，因为这让我发疯...

大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:28:54.403

在 jsonDate 函数中， d 的 setMilliseconds 属性（不是 d 本身）将是一个日期，您可以从`wijmoEventModel.start.d`. 你实际上想要`var d = new Date(parseInt(rawDate.substr(6)))`. （或者你想要`var d = new Date(parseInt(rawDate.split('+')[0]))`吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:48:14.413

设置毫秒只设置日期的毫秒部分，它不设置从纪元开始的日期。

javascript 日期对象的核心是自 1970-01-01 00:00:00 UTC 以来的毫秒数。因此，如果您拥有的“自纪元以来的时间”相同，则如果将其转换为数字，则可以执行以下操作：

```
var d = new Date( Number(millisecondsSinceEpoch) ); 
```

请参阅[ECMA-262 15.9.3.2](http://es5.github.com/#x15.9.3.2)

这将根据 UTC 中的“自纪元以来的时间”在本地时区创建一个日期对象。因此，在不同的时区，它将显示代表 UTC 同一时刻的不同时间。

例如

```
var millisecondsSinceEpoch = '1343378404560';
alert( new Date(Number(millisecondsSinceEpoch))); //Fri Jul 27 2012 18:40:04 GMT+1000 (EST) 
```

OP 中的时间是“1343378404560+0100”，这意味着我假设的偏移量是 hhmm。因此，在将其传递给 Date 之前，需要从数字中减去：

```
var s = '1343378404560+0100';
var t = s.split('+')[1];

if (t) {
  t = t.substring(0,2)*3600 + t.substring(2)*60;
} else {
  t = 0;
}

var d = new Date(parseInt(s) - t * 1000);  // Fri Jul 27 2012 17:40:04 GMT+1000 (EST) 
```

### 编辑

上面假设符号为“+”，字符串应该被拆分为“+”或“-”，然后检测到符号并稍后应用，例如

```
var t = s.split(/[-+]/)[1]; 
```

设置 t 的值后，应用符号：

```
t *= /-/.test(s)? -1000 : 1000;
var d = new Date(parseInt(s) - t); 
```

或上述的一些变化。

# iphone - 选择 TableRow 和 SelectionColor 应该是可见的，然后自动消失

> ID：11684713
> 
> 赞同：1
> 
> 时间：2012-07-27T09:04:29.453
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试什么 - 我有一个`UITableView`. 在选择任何特定行时，它应该显示一个 selectionColor(Blue 等)，然后它应该消失。任何属性/代码可以做到这一点？我实际上是在 MyCalender 视图中申请的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:14:38.057

您可以使用`[self.tableView deselectRowAtIndexPath:indexPath animated:YES];`

在你的 -`(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath` 方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:16:22.757

如果您正在使用 UITableView 并想要删除 UITableViewCell 的选择。然后你必须使用下面的代码来取消选择 tableview 单元格。

```
[tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T09:37:14.537

将此添加到您的 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

`

```
UIView *violetColor = [[[UIView alloc] init] autorelease];
        //violetColor.backgroundColor = [UIColor colorWithRed:0.824 green:0.749    blue:0.553 alpha:0.70];
        violetColor.backgroundColor = [UIColor colorWithRed:0.724 green:0.749    blue:0.953 alpha:0.70];
        cell.selectedBackgroundView = violetColor; 
```

`

然后将此添加到您的 didselect `

```
if (indexPath != nil) {
        [mTableView deselectRowAtIndexPath:indexPath animated:YES];

    }
`.i hope this will do the trick. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T09:41:56.363

您应该为此参考 tableview 中的代表和数据源

数据源将输入设置为表

委托为您提供对 tableview 操作的回调。

所以编写委托方法，将其包含在 classdef UITableViewDelegate 中，将其连接到 xib

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

如果您单击特定行，则会调用此委托方法。特定行是“indexpath”处的行，最后包括取消选择代码的这一行

```
[tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T09:56:24.620

在委托方法中 didSelectRowAtndexPath 使用此代码

```
[tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

# php - 使用 AJAX 调用下载文件

> ID：11684714
> 
> 赞同：1
> 
> 时间：2012-07-27T09:04:35.540
> 
> 标签：php, javascript, ajax, download

我正在尝试将一些详细信息附加到文件中并添加以供下载。

我为此目的使用 JavaScript 和 PHP。单击下载按钮，它将触发 AJAX 请求。

```
$.ajax({
  url:"php/test.php",
  type: 'POST',
  data: { totalQuery : test1, },

  success: function(finalEntityList){
  },
}); 
```

让我们假设`test.php`有一个单行代码

```
$html="Test"; 
```

现在我想将它添加到文件中并使其可供下载。我已经使用了代码

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');
$output = fopen('php://output', 'w');
fwrite($output, $html);
fclose($output); 
```

但是下载不会自动开始...我必须使用firebug打开POST请求链接，以便启动下载..可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:09:17.523

也许您需要做的只是通过 AJAX 调用返回文件的**路径**，然后使用 JavaScript 通过以下方式之一“启动”下载 -

*   `window.open`
*   `window.location.href`

```
$.ajax({
  url:"php/test.php",
  type: 'POST',
  dataType: 'json',
  data: { totalQuery : test1, },

  success: function(response){
    // initiate download using direct path to file
    window.location.href = response.URL;
  }
}); 
```

现在您的`test.php`文件只需要以 JSON 格式返回下载文件的 URL 路径 -

```
$filename = 'data.csv';
$path = $_SERVER['DOCUMENT_ROOT'].'/downloads/';
echo json_encode(array('URL'=>$path.$filename)); 
```

您可能会考虑将 URL 作为原始字符串返回 - 但我觉得使用 JSON 可能会更好，因为您可以轻松地将其他信息添加到响应中，而无需额外的解析函数。所有这一切使它成为一个更强大的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:24:30.243

它需要更多参数和 headerinfo：

```
$file = "data.csv";
$mime_type = "text/csv";
$size = filesize($file);
$name = rawurldecode($name);

@ob_end_clean(); //turn off output buffering to decrease cpu usage

// required for IE, otherwise Content-Disposition may be ignored
if(ini_get('zlib.output_compression'))
    ini_set('zlib.output_compression', 'Off');

header('Content-Type: ' . $mime_type);
header('Content-Disposition: attachment; filename="'.$name.'"');
header("Content-Transfer-Encoding: binary");
header('Accept-Ranges: bytes');

/* The three lines below basically make the
download non-cacheable */
header("Cache-control: private");
header('Pragma: private');
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");

// multipart-download and download resuming support
if(isset($_SERVER['HTTP_RANGE']))
{
    list($a, $range) = explode("=",$_SERVER['HTTP_RANGE'],2);
    list($range) = explode(",",$range,2);
    list($range, $range_end) = explode("-", $range);
    $range=intval($range);
    if(!$range_end)
    {
        $range_end=$size-1;
    } 
    else
    {
        $range_end=intval($range_end);
    }

    $new_length = $range_end-$range+1;
    header("HTTP/1.1 206 Partial Content");
    header("Content-Length: $new_length");
    header("Content-Range: bytes $range-$range_end/$size");
} 
else
{
    $new_length=$size;
    header("Content-Length: ".$size);
}

/* output the file itself */
$chunksize = 1*(1024*1024); //you may want to change this
$bytes_send = 0;
if ($file = fopen($file, 'r'))
{
    if(isset($_SERVER['HTTP_RANGE']))
        fseek($file, $range);

    while(!feof($file) && (!connection_aborted()) && ($bytes_send<$new_length))
    {
        $buffer = fread($file, $chunksize);
        print($buffer); //echo($buffer); // is also possible
        flush();
        $bytes_send += strlen($buffer);
    }
    fclose($file);
} 
else 
    die('Error - can not open file.'); 
```

# android - 如何在android中将数据库添加到手机？

> ID：11684726
> 
> 赞同：0
> 
> 时间：2012-07-27T09:05:08.520
> 
> 标签：android, database, sqlite

我目前正在使用 android 和 sqlite 数据库。我已将数据库附加到 Eclipse，例如**File explorer/data/data/mypackage/database。**. 这工作正常。但是当我将数据库附加到**data/sdcard**以在移动设备上运行应用程序时。

我得到了空指针异常。未找到表名 Abc。谁能告诉我？？为什么会发生这种情况，我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:08:30.630

如果您想使用 prebuilt 发布您的应用程序`database`，请将其放在您的`assets`目录中，并在第一次运行时将其复制到`/data/data/your.package/databases`目录中。

请参阅[https://stackoverflow.com/a/11601770/1300995](https://stackoverflow.com/a/11601770/1300995)如何`database`从`assets`目录复制。

# linux - Bash 'date -d' 错误？

> ID：11684728
> 
> 赞同：1
> 
> 时间：2012-07-27T09:05:23.683
> 
> 标签：linux, bash, date, ubuntu-10.04

我正在使用 Ubuntu 10.04 LTS。在 bash 中，我在将字符串转换为日期时遇到错误，如下所示：

```
date -d '20110327 02:00'
date: invalid date `20110327 02:00' 
```

但这些工作：

```
date -d '20110327 03:00'
Sun Mar 27 03:00:00 CEST 2011

date -d '20110326 02:00'
Sat Mar 26 02:00:00 CET 2011

date -d '20110328 02:00'
Mon Mar 28 02:00:00 CEST 2011 
```

有任何想法吗？谢谢，

简

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T09:10:17.673

这是夏天的时间！在 2011 年，我们在 3 月 27 日 2:00 获得了一个额外的时间，实际上是 3:00。所以 27/03/2011 2:00 不是有效日期 :-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T09:07:59.877

不，我确定那天 2:00 有夏令时 (DST) 的转换，所以没有 2:00 :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T09:08:25.897

好吧，没有这样的当地时间 - 切换到夏令时，时钟从 1:59 变为 3:00。

# delphi - dbExpress 与 ADO 连接

> ID：11684729
> 
> 赞同：4
> 
> 时间：2012-07-27T09:05:24.333
> 
> 标签：delphi, delphi-xe2, ado, dbexpress

对于此实例，使用 dbExpress 数据库是否比 ADO 连接和 Access db 更快/更好/更少编程？

*   应用程序不会始终如一地读取/写入数据库
*   数据库大小将非常小（1000-2000 行）（5 列）
*   数据库将与便携式应用程序一起存储/移动
*   DB 将仅通过本地连接与应用程序通信（不同网络上的计算机不会连接到数据库）

我从未使用过 dbExpress，而我在编写网站时使用过的唯一其他数据库是 MYSQL。谢谢

格伦

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T12:42:12.393

没有 dbExpress 数据库。dbExpress 是 Delphi 中数据库组件的名称。

使用 dbExpress 组件，您可以使用数据库系统的本机协议连接到目标数据库服务器（SQL Server、Oracle、MySQL 等）。

本地连接的优​​势之一大概是性能，因为您避免了 ADO 中间件。

第二个优势是您不必依赖于在 Windows 上运行，因为 ADO 是 Microsoft 产品。您可以在 FireMonkey 应用程序中使用 dbExpress 组件并拥有一个跨平台应用程序。

除非您拥有 Enterprise 或更高版本的 Delphi XE 2，否则使用 dbExpress 组件有[一些限制。](http://edn.embarcadero.com/article/41626)

专业包括（注意“本地”）：

> dbExpress 与 InterBase® 和 MySQL 的本地数据库连接

企业包括：

> 与 InterBase、Firebird、MySQL、Microsoft SQL Server、Oracle、DB2、Informix、Sybase ASE、SQL Anywhere 和 ODBC 的数据库服务器连接

有可用的第三方本地数据库组件（通常比专业和企业之间的成本差异便宜得多）。

就编程而言，我发现使用本机组件稍微容易一些，因为您不需要创建 ADO 连接字符串，但在 Internet 上也很容易找到主要数据库提供商的连接字符串。

# asp.net - 调整 ASP.Net 图像的大小以在 Visual Studio 中进行缩放

> ID：11684735
> 
> 赞同：2
> 
> 时间：2012-07-27T09:05:34.923
> 
> 标签：asp.net, visual-studio-2010, image-resizing

我正在处理 Visual Studio 母版页，并尝试添加公司徽标。

我已将 JPEG 导入到我的项目中，添加了一个`Image`控件并将`ImageUrl`属性设置为我的 JPEG。

问题是我的图像很大！我正在尝试通过按住 shift （在其他 MS 产品中有效）来调整它的大小，但它不能正常工作，并且在尝试手动调整大小时，我只是无法让它看起来正确。

所以我的问题是，如何使用 Visual Studio 2010 调整图像的大小以在 ASP.Net 中进行缩放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:17:15.623

Visual Studio 不适用于图像缩放。您可以在设计视图上缩放图像。在为图像指定图像 url 后，您可以像在 powerpoint 中一样重新调整它的大小。但这不是一个好习惯，因为这会在您的 html 中为图像添加具有特定值的高度和宽度标签。因此，根据您的需要使用任何工具重新调整图像大小并使用它，因为这将使页面更轻。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T09:15:17.703

如果我理解正确，您想在 Visual Studio 中更改图像的尺寸。

更改图像的尺寸只会使图像看起来更小；它实际上不会*重新采样*并*减少其大小*（以字节为单位）。由于这两个原因，请多花一两分钟来使用另一个程序来正确调整图像的大小。

*   重采样：根据算法对图像进行平滑处理并正确处理边缘等问题

*   以字节为单位减小大小：这是显而易见的。您的帖子带有 ASP.Net 标记；您不希望通过网络发送“大量”图像。

# asp.net -

> ID：11684736
> 
> 赞同：1
> 
> 时间：2012-07-27T09:05:35.213
> 
> 标签：asp.net, html, css

我有一个标记问题。

当我调整浏览器窗口大小时会发生这种情况。

这是我的代码（ASP.NET）：

```
<asp:Panel ID="PanelGrid" runat="server" CssClass="frame">
 <fieldset class="fs">                        
   <legend> 
     <asp:Label ID="Label" runat="server" Text="LALALA"></asp:Label>
   </legend>
  </fieldset>
</asp:Panel> 
```

结果如下所示：

![在此处输入图像描述](../Images/b93917bf630f438c3d9cba093241c6bd.png)

边界在专家组之外。

如果我使用此代码（不带`<fieldset>`）：

```
<asp:Panel ID="PanelGrid" runat="server" CssClass="frame">

   <legend> 
     <asp:Label ID="Label" runat="server" Text="LALALA"></asp:Label>
   </legend>

</asp:Panel> 
```

结果如下所示：

![在此处输入图像描述](../Images/6a90cbaa067a63e9d2414ff851a294a7.png)

如果我想使用，我该如何编写 CSS 类（“fs”）`<fieldset>`？谢谢！

PS我的课程代码：

```
.frame
{

    margin: 1px;
    padding: 3px;
    border: 1px solid Navy;

    background-color: White;
    font-size: 9pt;

    box-shadow: 0 0 5px 1px #1A3457; /* Валидное свойство CSS 3 тень*/
    -webkit-box-shadow: 0 0 5px 1px #1A3457; /* Safari, Chrome */
    -moz-box-shadow: 0 0 5px 1px #1A3457; /* Firefox */
    border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:09:59.627

该控件能够自行`Panel`呈现标签，您只需指定[属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.groupingtext.aspx)：`fieldset`[`GroupingText`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.groupingtext.aspx)

```
 <asp:Panel runat="server" GroupingText="your fieldset group">
    </asp:Panel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:11:57.407

试试这个CSS：

```
.fs {
    width: 100%;
    overflow: scroll;
} 
```

# android - 将图像存储在可绘制文件夹中并使用数据库中的 imagePath 获取要加载的图像

> ID：11684737
> 
> 赞同：0
> 
> 时间：2012-07-27T09:05:40.473
> 
> 标签：android, database, image, sqlite

我想知道如何获取存储在 eclipse 中可绘制文件夹中的图像的 imagePath。imagePath 将存储在 SQLite 数据库中。所以现在我想知道如何在数据库中检索 imagePath 的 Uri。任何帮助将不胜感激。谢谢你。

ImagePage.java

```
package main.page;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.content.Intent;
import android.content.res.TypedArray;
import android.database.Cursor;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.Gallery;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class ImagesPage extends Activity 
{
    Integer[] imageIDs = {R.drawable.pic1, R.drawable.pic2, R.drawable.pic3, R.drawable.pic4};
    ImageAdapter imgDB = new ImageAdapter(this);

    ArrayList<String> imageNames = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image);

        Button btnNext = (Button)findViewById(R.id.buttonNext);
        btnNext.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View arg0)
            {
            Intent i = new Intent(ImagesPage.this, ImagesSecondpage.class);
            startActivity(i);

            }
        });

        GridView gridView = (GridView)findViewById(R.id.gridview);
        gridView.setAdapter(new ImgAdapter(this));      

        gridView.setOnItemClickListener(new OnItemClickListener()
        {

                @Override
                public void onItemClick(AdapterView<?> parent, View v,
                        int position, long id)
                {
                    imgDB.open();
                    long _id = imgDB.insertImage("pic" + (position + 1)+ ".jpg");

                    imgDB.close();
                }
        }); 
    }

    public class ImgAdapter extends BaseAdapter
      {
          private Context context;

          public ImgAdapter(Context c)
          {
              context = c;

          }

        @Override
        public int getCount()
        {
        return imageIDs.length;
        }

        @Override
        public Object getItem(int position)
        {
            return position;
        }

        @Override
        public long getItemId(int position)
        {
            return position;
        }

        @Override
        public View getView(int position, View convertView ,ViewGroup parent)
        {
          ImageView imageView;
          if(convertView == null)
          {
              imageView = new ImageView(context);
              imageView.setImageResource(getResources().getIdentifier(imageNames.get(position), defType, defPackage))
              imageView.setLayoutParams(new GridView.LayoutParams(85,85));
              imageView.setScaleType(ImageView.ScaleType.FIT_XY);
              imageView.setPadding(5, 5, 5, 5);

          }else
          {
              imageView = (ImageView) convertView;
          }
            imageView.setImageResource(imageIDs[position]);
            return imageView;

        }

     }

} 
```

ImageAdapter.java

```
 package main.page;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class ImageAdapter
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "img_name";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "anniversary";
    private static final String DATABASE_TABLE = "image";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE = "create table image (_id integer primary key autoincrement, "+ "img_name text not null);";
    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public ImageAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
          try
          {
            db.execSQL(DATABASE_CREATE);
          }catch(SQLException e)
          {
              e.printStackTrace();
          }

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version" +oldVersion + "to" + newVersion +", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS image");
            onCreate(db);   
        }

    }

    public ImageAdapter open() throws SQLException
    {
        db = DBHelper.getReadableDatabase();
        return this;
    }

    public void close()
    {
        DBHelper.close();
    }

    public long insertImage(String img_name)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, img_name);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    public boolean deleteImage(long rowId)
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID +"="+ rowId, null) > 0;
    }

    public Cursor getAllImages()
    {
        return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME}, null, null, null, null, null);
    }

    public Cursor getImage(long rowId) throws SQLException
    {
        Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME}, KEY_ROWID +"="+ rowId, null, null, null, null, null);
        if(mCursor != null)
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public boolean updateImage(long rowId, String img_name)
    {
        ContentValues args = new ContentValues();
        args.put(KEY_NAME, img_name);
        return db.update(DATABASE_TABLE, args, KEY_ROWID +"="+ rowId, null) > 0;
    }

} 
```

我再次更新了 ImagePage.java 的编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:11:35.287

```
String path = getResources().getString(R.drawable.icon); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:14:23.350

任何图像资源都应该放在drawable中，因此它与路径无关，您只需要将图像名称保存在与某个实体相关的数据库中，通过从数据库中获取它，您可以通过下面的代码获取图像资源

```
Bitmap image = BitmapFactory.decodeResource(getResources(), getResources().getIdentifier( "imagename" , "drawable", getPackageName())); 
```

**更新：**

现在从您的代码中根据问题您试图通过名称（路径）获取图像意味着`Integer[] imageIDs = {R.drawable.pic1, R.drawable.pic2, R.drawable.pic3, R.drawable.pic4};` 您希望通过数据库指向图像资源而不是整数数组，因此首先您必须获取所有图像名称（名称与可绘制文件夹中的图像名称）一旦通过查询获得名称，您就保存在数据库中表的列中，而不是通过整数数组引用，仅数据库中的名称将允许您从可绘制对象访问图像资源，我假设图像名称通过以下方式存储`ArrayList<String> imageNames = new ArrayList<String>(); //hence in the while loop of cursor during retriving values from cursor imageNames.add(cursor.getString(columnIndex));`

所以更新的代码将如下所示

```
@Override
        public View getView(int position, View convertView ,ViewGroup parent)
        {
            ImageView imageView = new ImageView(context);
            imageView.setImageResource(getResources().getIdentifier(imageNames.get(position), "drawable", this.getPackageName()));
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 120));
            imageView.setBackgroundResource(itemBackground);

            return imageView;
        } 
```

如果您仍然感到困惑，那么我认为我没有其他解决方案

# facebook - 来自大型聚合的 Open Graph 引用 URL 极长

> ID：11684757
> 
> 赞同：3
> 
> 时间：2012-07-27T09:07:44.293
> 
> 标签：facebook, query-string, facebook-opengraph, aggregation

在单个用户执行的约 90 个 Open Graph 操作的大型聚合中，对象 URL 的查询字符串部分非常长（大约 8KB）。

这导致我们的服务器崩溃，因为它们没有配置为处理如此长的查询字符串，并且已经增加了我们允许的最大查询字符串长度，我们觉得进一步增加它是不可行的，因为我们不知道这些 URL 在 FB 之前会有多大做一些事情来限制他们。

最近使用的参数 fb_action_types 似乎消失了，取而代之的是 action_type_map 和 action_object_map 包含聚合中每个对象的映射。

为了处理这些 URL，我们希望增加服务器的**maxQueryStringLength多少？**当它们变得这么大时，它们是否应该在 POST 中交付？

我在 Facebook 开发人员网站上记录了一个错误，以便他们知道这个问题： http: [//developers.facebook.com/bugs/391678330885746 ?browse=search_50125698681389e40279519](http://developers.facebook.com/bugs/391678330885746?browse=search_50125698681389e40279519)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:52:51.530

根据 HTTP/1.1 的 RFC 2616，URL 不应超过 2000 个字符或 255 个字节（查看[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)）。

为什么你的查询字符串这么长？您是否将请求打包或嵌套到单个 url 中？也许使用强烈的字段扩展？

我建议批量处理您的请求：

[http://developers.facebook.com/docs/reference/api/batch/](http://developers.facebook.com/docs/reference/api/batch/)

它非常快，您可以一次发送 50 个请求。

举个例子：

```
var batch = new Array();
batch.push({ "method": "GET", "relative_url": "me/friends?limit=5"});
batch.push({ "method": "GET", "relative_url": "me/likes?limit=5"});
var batchData = { 'access_token': access_token, 'batch': JSON.stringify(batch) };
var BASEURL = 'https://graph.facebook.com/';
$.ajax({type: 'POST', url: BASEURL, data: batchData, success: requestSucceeded, error: requestFailed, dataType: 'JSON'}); 
```

# haskell - Data.Stream 的 Monad 实例的定义

> ID：11684759
> 
> 赞同：6
> 
> 时间：2012-07-27T09:07:46.913
> 
> 标签：haskell, monads

Data.Stream 的 monad 实例是这样定义的：

```
instance Monad Stream where
  return = repeat
  xs >>= f = join (fmap f xs)
    where
      join :: Stream (Stream a) -> Stream a
      join ~(Cons xs xss) = Cons (head xs) (join (map tail xss)) 
```

这意味着`join`采用第一个流的第一个元素，第二个流的第二个元素等，因此结果流可以被视为“主对角线”，丢弃所有其他元素。

现在有一种方法可以通过无限二维表，由 Georg Cantor 发现，他证明有理数与自然数一样多：[http ://www.jcu.edu/math/vignettes/infinity.htm](http://www.jcu.edu/math/vignettes/infinity.htm)

现在我的问题是，如果`join`使用沿所有次对角线的路径（访问每个流的每个元素）也是有效的实现。或者这会违反单子定律之一吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T09:15:28.447

会违反

```
return x >>= f === f x 
```

考虑

```
f k = Cons k (f (k+1)) 
```

现在`fmap f (return 1)`是`repeat (f 1)`，如果`join`遍历所有元素，在结果`Stream`中，元素会重复。

作为一个二维表，`fmap f (return 1)`看起来像

```
1 2 3 4 ...
1 2 3 4 ...
1 2 3 4 ... 
```

如果你沿着次对角线遍历它，你会得到

```
1 1 2 1 2 3 1 2 3 4 ... 
```

`1 2 3 4 5 ...`而不是`f 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:28:05.293

我最近为 list monad 实现了类似的东西：

```
diagonals :: [[(Integer, Integer)]]
diagonals =
    let diagonal index =
        do
            number <- [0..index]
            return (number, index - number)
    in map diagonal (enumFrom 0)

newtype Enumerable a = Enumerable { list :: [a] }

instance Monad Enumerable where
    return item = Enumerable [item]
    enumerable1 >>= getEnumerable2 =
        let
            list1 = list enumerable1
            diagonalItems diagonal =
                do
                    (index1, index2) <- diagonal
                    guard (containsIndex list1 index1)
                    let item1 = genericIndex list1 index1
                    let list2 = list (getEnumerable2 item1)
                    guard (containsIndex list2 index2)
                    let item2 = genericIndex list2 index2
                    return item2
        in Enumerable (concat (takeWhile (not . null) (map diagonalItems diagonals))) 
```

不幸的是，你必须做一些`newtype`恶作剧，因为你不能声明另一个实例`Monad []`，但除此之外，它工作正常。就像是

```
list
(
    do
        item1 <- Enumerable [0..]
        item2 <- Enumerable [1..]
        item3 <- Enumerable [2..]
        return (item1, item2, item3)
) 
```

为您提供所有自然数三元组的无限列表，其中第二项大于或等于 1，第三项大于或等于 2。

我检查了一下，如果我没有犯错，它应该遵守所有的单子定律。它也适用于有限列表，在遇到完全空的对角线后它将停止尝试查找新项目。

我不熟悉流单子，所以我不能告诉你如果你在那里做类似的事情会发生什么。

# ipa - 仅在技术许可的情况下创建和发送 ipa

> ID：11684771
> 
> 赞同：0
> 
> 时间：2012-07-27T09:08:30.537
> 
> 标签：ipa, ios-provisioning

我开发了一个应用程序并在模拟器中验证。现在我需要将构建发送给我的客户。我的客户在 Itunes connect 中为我提供了技术角色。

我可以用我的 ID 登录 Itunes 连接，并且可以在用户下看到我的名字作为技术许可。

请让我知道如何继续创建 ipa 。我确实有一部 iPhone 和我。我的目的是创建一个 Ipa。将它安装在我的 Iphone 中并测试并为客户端提供构建。

任何帮助将不胜感激 ！！

-mia

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:59:40.607

我刚刚想通了。通常它不是我们在 Itunes 连接中需要的访问权限。

客户必须在开发人员帐户中提供成员或管理员访问权限，然后只有我们才能使用客户帐户中的配置文件和证书从我们这边创建一个 ipa。

谢谢-米娅

# php - 带有文件附件和 PHP 作为客户端的 Delphi SOAP 服务器

> ID：11684775
> 
> 赞同：1
> 
> 时间：2012-07-27T09:08:38.020
> 
> 标签：php, delphi, soap

我正在寻找可以在 PHP 和 Delphi Soap Server 之间进行集成的解决方案。我想通过 PHP Soap Client 将文件发送到 Delphi SOAP Server。Delphi 服务器代码将使用 TSoapAttachment 调用，示例代码如下：-

```
Ttextminesvc = class(TInvokableClass, Itextminesvc)
  public
 .....
  protected
      function UploadFile(afilename: string; afile: TSoapAttachment): Boolean;
      stdcall;

....... 

function Ttextminesvc.UploadFile(afilename: string; afile: TSoapAttachment): Boolean;
var ffilename: string;
const pathdir = 'C:\tmp';
begin
  result := false;
  ffilename := pathdir + afilename;
  try
    if not directoryexists(pathdir) then
      ForceDirectories(pathdir);
  except
    raise Exception.Create('Unable to create repository directory on the server.');
  end;
  try
    if not fileexists(ffilename) then
    begin
      afile.SaveToFile(ffilename);
      result := true;
    end;
  except
    result := false;
  end;
end; 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T21:58:29.910

从另一个 SO 帖子（http://stackoverflow.com/questions/3663416/php-soap-file-upload）：
“您可以传输您喜欢的任何数据。您只需对二进制数据进行 base64 编码。它将转换为ascii字符。然后你可以像普通的字符串变量一样传输它。唯一需要注意的是服务器限制。

# css - IE8 比例过滤器

> ID：11684779
> 
> 赞同：0
> 
> 时间：2012-07-27T09:08:54.493
> 
> 标签：css, internet-explorer-8, stylesheet

我在我的网站上使用 CSS3 缩放技术，它在 Chome、IE9 和 Firefox 中运行良好，但我似乎无法让它在 IE8 上运行，我尝试查看过滤器，但我似乎无处可去.

这是我的 HTML

```
<div id="nav">
    <ul id="index_cards">
            <li id="card-1">
                <h3><strong>Home</strong></h3>

            </li>
            <li id="card-2">
                <h3><strong>About/Contact</strong></h3>

            </li>
            <li id="card-4">
                <h3><strong>Portfolio</strong></h3>

            </li>
            <li id="card-5">
                <h3><strong>Services</strong></h3>

            </li>
    </ul>
</div> 
```

这是我的 CSS

```
ul#index_cards {
  margin-top:50px;
  text-align:center;
}

ul#index_cards li {
  background:url(../images/card_bg.jpg) repeat;
  height:50px;
  width:145px;
  display:block;
  float:left;
  border:1px solid #666;
  padding:25px 10px;
  position:relative;
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  -moz-box-shadow: 2px 2px 10px #000;
  -ms-box-shadow: 2px 2px 10px #000;
  -webkit-box-shadow: 2px 2px 10px #000;
  -moz-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  -webkit-transition: all 0.5s ease-in-out;
}

#card-1 {
  -webkit-transform: rotate(-20deg);
  -moz-transform: rotate(-20deg);
  -ms-transform: rotate(-20deg);
  line-height:10px;  
  z-index:1;
  left:-110px;
  top:125px;
}

#card-2 {
  -webkit-transform: rotate(-10deg);
  -moz-transform: rotate(-10deg);
  -ms-transform: rotate(-10deg);
  line-height:10px;  
  z-index:2;
  left:-100px;
  top:80px;
}

#card-4 {
  -webkit-transform: rotate(10deg);
  -moz-transform: rotate(10deg);
  -ms-transform: rotate(10deg);
  line-height:10px;  
  z-index:2;
  right:-400px;
  top:80px;
}

#card-5 {
  -webkit-transform: rotate(20deg);
  -moz-transform: rotate(20deg);
  -ms-transform: rotate(20deg);
  line-height:10px;  
  z-index:1;
  right:-410px;
  top:125px;
}

/* Hover States */

ul#index_cards li:hover {
  z-index:4;
}

#card-1:hover {
  -moz-transform: scale(1.1) rotate(-18deg);
  -ms-transform: scale(1.1) rotate(-18deg);
     -webkit-transform: scale(1.1) rotate(-18deg); 
}

#card-2:hover {
  -moz-transform: scale(1.1) rotate(-8deg);
  -ms-transform: scale(1.1) rotate(-8deg);
   -webkit-transform: scale(1.1) rotate(-8deg); 
}

#card-3:hover {
  -moz-transform: scale(1.1) rotate(2deg);
  -ms-transform: scale(1.1) rotate(2deg);
   -webkit-transform: scale(1.1) rotate(2deg); 
}

#card-4:hover {
  -moz-transform: scale(1.1) rotate(12deg);
  -ms-transform: scale(1.1) rotate(12deg);
   -webkit-transform: scale(1.1) rotate(12deg); 
}

#card-5:hover {
  -moz-transform: scale(1.1) rotate(22deg);
  -ms-transform: scale(1.1) rotate(22deg);
   -webkit-transform: scale(1.1) rotate(22deg); 
}

/* Content Styling */

ul#index_cards li img {
  margin-top:7px;
  background:#eee;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-box-shadow: 0px 0px 5px #aaa;
  -webkit-box-shadow: 0px 0px 5px #aaa;
}

ul#index_cards li p {
  margin-top:4px;
  text-align:left;
  line-height:28px;  
} 
```

您可以在此处查看所需的前景；tubebackgrounds.co.uk/portfolio

谢谢大家。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T09:15:34.987

恐怕 IE8 不支持 CSS3。您必须寻找另一种方法来做您想做的事情，或者接受 IE 不会这样做但其他（更好的）浏览器会这样做的事实。

# ios - 初始比例是否会忽略固定的视口宽度？

> ID：11684780
> 
> 赞同：0
> 
> 时间：2012-07-27T09:08:57.847
> 
> 标签：ios, ipad, viewport

我正在优化一个网络应用程序以在 iPad 肖像模式下工作。该网络应用程序构建为宽度为 350 像素的 iFrame。

我使用以下元视口标签：

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=350" /> 
```

我希望它的行为如下：
- 我的可见视口的宽度将为 350 像素。
- 我的 Web 应用程序最初是按其原始大小缩放的，这意味着 350px iFrame 将在 350px 视口中完全呈现（可见视口的边界处没有空白。

但是，iPad Portrait 模式似乎忽略了 width=350 属性并将页面呈现为 width=device-width。

有人可以解释为什么会发生这种情况以及我必须如何解释这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:18:47.950

在 iOS 中，iframe 会忽略所有视口设置并呈现为设备默认值。很烦人。

请参阅 - [iOS Safari 扩展的框架集大于视口](https://stackoverflow.com/questions/4750833/ios-safari-expands-frameset-larger-than-viewport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T09:37:11.977

在我们的例子中，iPad 上的视口大小等于第一次渲染的内容。因此，如果您将主容器扩展到页面的整个宽度，iPad 会说“该 iframed 页面的视口与 devide-width 相同”。在我们的案例中，解决方案是使用`width`,`height`和`style`属性来设置 iframe 的严格大小。然后简单地应用`overflow: hidden`在主容器上。

# .htaccess - 阻止 htaccess 忽略

> ID：11684781
> 
> 赞同：0
> 
> 时间：2012-07-27T09:09:15.083
> 
> 标签：.htaccess, redirect, dns, subdirectory

我的 htaccess 文件做噩梦...我有一个停放的域名，我想将所有内容重定向到 public_html 内的子文件夹，所以我使用了这段代码

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?parked\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/foo/
RewriteRule ^(.*)$ /foo/$1 [L,NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
</IfModule> 
```

它现在工作完美，它重定向 `www.parked.com` *=它显示>* `public_html/foo`内容，但在**public_html**文件夹中我还有一个名为 admin 的文件夹，在文件夹**foo**中我也有一个名为 admin 的文件夹

*   public_html/admin
*   public_html/foo
*   public_html/foo/admin

问题是每次我尝试访问**`www.parked.com/admin`**它时都显示**`public_html/admin`**文件夹不**`public_html/admin`**

我想要它做的是将**www.parked.com**完全重定向到`public_html/foo`并忽略里面的文件**`public_html`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:34:23.727

你为什么要在规则的末尾加上条件？那应该工作：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?parked\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/foo/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /foo/$1 [L,NC]
</IfModule> 
```

# http - 是否可以创建代理作为浏览器插件？

> ID：11684786
> 
> 赞同：0
> 
> 时间：2012-07-27T09:09:37.913
> 
> 标签：http, proxy, reverse-proxy, browser-plugin

我有一个网站应用程序，用户将在其中执行将请求发送到其他服务器的任务。

我希望通过用户自己的 IP 执行这些请求，因此正在寻找解决此问题的方法，例如，确保其他服务器可见的不是我的服务器 IP。

解决这个问题的一种方法是用户安装一个浏览器插件，作为代理服务器，作为应用程序请求和其他服务器之间的中间人。

这是可能的还是我会偶然发现隐藏的安全块？我从哪里开始检查解决方案？

# objective-c - StoryBoard 2 导航控制器指向同一个视图

> ID：11684787
> 
> 赞同：2
> 
> 时间：2012-07-27T09:09:52.953
> 
> 标签：objective-c, xcode4, storyboard

有谁知道为什么这不起作用？

![](../Images/0952cf9e8d47173e8a345c5a59f7ded5.png)

有了这个，只有一个标签栏加载视图，另一个制作黑屏。我试过没有导航控制器，标签栏是正确的，另一个在运行模式下没有显示标签栏项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:04:39.927

如果有人感兴趣，我对这个问题的回答。

![添加两个视图来启动我们感兴趣的视图](../Images/11c304fb1d9222fbd42cdccb2473d5b4.png)

添加两个将启动我们感兴趣的视图的视图。这 2 个视图的相同文件：

```
@interface PushToAgenceViewController : UIViewController
@end

-(void) viewWillAppear:(BOOL)animated {
    [self performSegueWithIdentifier: @"pushName" sender: self];
} 
```

# c# - 我需要在开始和结束日期中验证 Entair 日期

> ID：11684790
> 
> 赞同：0
> 
> 时间：2012-07-27T09:10:10.410
> 
> 标签：c#, sql-server-2008

```
string queryStr = "SELECT * from Task_Report_Table where convert(varchar, date, 105) between '" + txtStartDate.Text.ToString() + "' and '" + txtEndDate.Text.ToString() + "'  "; 
```

这是我用于从数据库中检索值的查询。

在数据库表 Task_Report_Table 中有列日期、名称、任务和小时。这里的日期是日期时间数据类型，所以在查询中转换为字符串和我匹配 th

我有一个带有开始日期和结束日期的 UI。通过在 UI 中给出日期。上面提到的查询必须显示记录。

如果 Iam Giving 开始日期 07-07-2012 和结束日期为 12-07-2012。它显示的值介于 07-07-2012 和 12-07-2012 值之间。但问题是它显示下个月和上个月月记录和下一年和上一年的记录也如果记录存在于数据库中。

问题是它仅验证日期。而不是月份和年份。我需要在 UI 中验证 iam Giving 的日、月、年。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:13:57.797

你不想写这样的 SQL，不要将字符串连接在一起，用这种代码破解（使用 SQL 注入）一个网站是如此容易。

试试这个：

```
SELECT * from Task_Report_Table where date between @startdate and @enddate 
```

然后添加你正在使用`SqlParameter`的startdate 和 enddate ，如下所示：`SqlCommand`

```
SqlCommand command = new SqlCommand(yourSQL, connection);
command.Parameters.Add(new SqlParameter("startdate", DateTime.Parse(txtStartDate.Text)));
command.Parameters.Add(new SqlParameter("enddate", DateTime.Parse(txtEndDate.Text))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:20:06.530

> 问题是它仅验证日期。而不是月份和年份。我需要验证日、月、年

这`convert(varchar, date, 105)`将为您提供一个看起来不像`27-07-2012`日期的字符串。因此，您的查询比较的是字符串而不是日期。

使用[@SteenT](https://stackoverflow.com/a/11684835/569436)建议的日期参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:22:51.613

像这样尝试为文本框放置两个变量..

```
txtStatrdate.text=strdate;

txtEndDate.text=enddate  ; 

CONVERT(VARCHAR(10),date,101) BETWEEN CONVERT(DATETIME,strdate,101) AND
        CONVERT(DATETIME,enddate,101) 
```

# mysql - 从 SQL Server2008r2 迁移到 MySQL

> ID：11684792
> 
> 赞同：0
> 
> 时间：2012-07-27T09:10:17.423
> 
> 标签：mysql, sql-server, sql-server-2008, migration, mysql-workbench

我们正在使用 MSSQL 服务器 2008R2 中的 exp/imp 向导将 MSSQL 转换为 MySQL。

我已经关注了这个链接

[http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/826cd1e8-cce3-4c08-839d-f6931ac75ef5](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/826cd1e8-cce3-4c08-839d-f6931ac75ef5)

1.  我已经下载了 MySQL Connector/ODBC 3.51 并创建了名为“TestTAP”的 DSN

2.  然后我使用了 SQLServer --> TestDB --> 任务 --> 导出数据，我有 Imp 和 Exp 向导

请访问此链接......

[http://www.flickr.com/photos/83606059@N04/show/](http://www.flickr.com/photos/83606059@N04/show/)

我的 ODBC 驱动程序未出现在 IMP 和 Exp 向导目标列表中

哪里做错了？

请帮助我的人

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:35:09.190

实现数据迁移的最佳方法是使用 ETL 工具。这有助于：

1.  快速数据迁移
2.  精准数据迁移
3.  未来可重用的工作
4.  调度等

对于 MySql，我更喜欢使用开源的[Talend Open Studio ETL](http://www.talend.com/products/open-studio-di.php)工具，您可以免费下载。

或者您也可以使用 SQL 服务器 SSIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:45:13.153

MySQL 刚刚添加了一个迁移工具来迁移到他们的 Workbench 工具中。详细信息可以在[这里](http://dev.mysql.com/doc/workbench/en/wb-migration.html)找到。我看不出它会如何迁移除了最流行的数据库之外的任何东西，但它可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:13:32.600

[MySQl Workbench 5.2.41](http://www.mysql.com/products/workbench/)附带的新迁移向导将帮助您迁移表及其数据。您可以在此处概述其功能：

[操作方法：使用 MySQL Workbench 从 Microsoft SQL Server 迁移数据库的指南](http://mysqlworkbench.org/?p=1350)

# java - 春季休眠

> ID：11684794
> 
> 赞同：0
> 
> 时间：2012-07-27T09:10:29.430
> 
> 标签：java, hibernate, spring-mvc

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactService' defined in file [D:\SpringMVC_20July\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\DeccaSpringMVC\WEB-INF\classes\deccaWeb\DAO\ContactService.class]: Initialization of bean failed; nested exception is java.lang.VerifyError: class net.sf.cglib.core.DebuggingClassWriter overrides final method visit.(IILjava/lang/String;Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)V 
```

运行应用程序时出现上述错误。所有的罐子就位。配置文件有问题吗？请帮忙。我是春天和冬眠的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:13:28.803

我猜您的 CLASSPATH 中的两个 cfg JAR 之间存在冲突。看看是否是这种情况，并确保您保留 Spring 期望的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:42:53.930

您的 cglib 和 ASM 版本不匹配。例如[cglib 2.2.2 的 maven 依赖](http://mvnrepository.com/artifact/cglib/cglib/2.2.2)提取 asm 3.3.1，所以这是一个值得尝试的组合。

# python - wxpython 和 tkinter 的区别

> ID：11684796
> 
> 赞同：0
> 
> 时间：2012-07-27T09:10:33.103
> 
> 标签：python

谁能解释一下 wxpython 和 tkinter 之间的区别？哪一个最适合发展？我想使用 python 开发一个媒体播放器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:18:41.223

这是两个不同的小部件库。

TkInter 是内置的，但是，据我所知，它将 python 语句转换为 tcl 语句，这可能不会使其快速。它看起来也像所有平台上的 tcl/tk 应用程序。

wxpython 不是内置的，因此您必须将它与您的代码一起分发到所有平台，尽管它可能“混合”更多。

当然，这取决于您的需求。

我见过很多使用 XULRunner 和 python 的应用程序，例如 Miro 和 Songbird，但我猜也有使用 gnome/gtk 的应用程序。

取决于您要支持哪些平台...

# sqlite - 字符串上的 SQLite min() 和 max()（memcmp 比较）

> ID：11684799
> 
> 赞同：1
> 
> 时间：2012-07-27T09:10:50.257
> 
> 标签：sqlite

我正在检查[Graphserver](http://graphserver.github.com/graphserver/)的代码，并且有一些 SQLite 命令旨在查找两个字段的最小值和最大值：

`select min(start_date), max(end_date) from calendar`

start_date 和 end_date 的格式类似于 YYYYMMDD，这看起来不是 SQLite 在[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)中识别的格式之一。此处记录的 min() 和 max() [http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html)表示使用二进制整理函数进行比较。这里（[http://www.sqlite.org/datatype3.html#collat](http://www.sqlite.org/datatype3.html#collation) ​​ion ）它说 memcmp() 用于比较。所以它只是从字符串的开头逐字节比较ascii数字？我不确定 memcmp 是做什么的。所以 20120506 应该小于 20120507，因为 6 在 ascii 中是 54，7 是 55 是 ascii，所以 20120507 更大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:45:38.047

您的日期以 SQLite 日期和时间函数无法使用的格式存储这一事实与`min`and`max`函数将如何对其进行操作无关。

如果您的日期被 SQLite 视为字符串，那么您的问题的答案是肯定的。如果您将日期存储为`YYYYMMDD`，则根据您的列定义，您的日期实际上可能被视为数字，因此可以进行比较。

有关这方面的更多信息，请阅读[数据类型](http://www.sqlite.org/datatype3.html)，尤其是[类型亲和性](http://www.sqlite.org/datatype3.html#affinity)。

# maven - maven 不会在传递依赖的分类器上解析配置文件的属性

> ID：11684802
> 
> 赞同：5
> 
> 时间：2012-07-27T09:10:55.910
> 
> 标签：maven, maven-3

我正在尝试在看起来像的多模块项目上使用分类器

根项目
--ejb
--jar
--servlet
--ear

ejb 项目依赖于 jar 项目 war 项目依赖于 ejb 项目并通过传递方式依赖于 jar 项目

不幸的是，在我的servlet项目上，jar项目的分类器从未解析过

我还定义了一个配置文件

```
 <profile>
  <id>dev</id>
    <properties>
      <maven.deployment.suffix>dev</maven.deployment.suffix>       
      <envClassifier>dev</envClassifier>
      <exploded>true</exploded>
       ...
    </properties>
 </profile> 
```

当我尝试使用此配置文件和分类的工件打包项目时，我总是遇到以下错误：

> `mvn -P dev clean install`
> ...
> [错误] 无法在项目 servlet 上执行目标：无法解析 >> 项目 root.project.servlets:servlet:war:1.0 的依赖项：无法传输工件 root.project.projects:logging:jar:${ env Classifier}:1.0 from/to nexus ( [http://.../nexus/content/groups/public](http://.../nexus/content/groups/public) ): > IllegalArgumentException: IllegalArgumentException: IllegalArgumentException: Illegal character in path at index 102: .../nexus> /content/groups/public /root/project/projects/logging/1.0/logging-1.0-${envClassifier}.jar -> [Help 1]
> [ERROR]
> [ERROR] 要查看错误的完整堆栈跟踪，请使用 - e 开关。
> [错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。
> [错误] ...

我[将样本上传到 bitbucket](https://bitbucket.org/littlewing/bugreporting/src)

我尝试在我的 servlet 项目上执行以下命令

> $ mvn -P 开发帮助：有效-pom

我看到分类器很好解析。但它不适用于传递依赖。

唯一的解决方法是在 maven 启动时将属性注入为`-DenvClassifier=dev`

最后，我[在 jira 上看到了一些问题](http://jira.codehaus.org/browse/MNG-1388)但没有解决我该如何解决这个问题？我想我不是地球上唯一一个在多模块项目中使用 maven 和分类器的人......

# python - 为什么列表分配中的此列表会重复自身？课程

> ID：11684803
> 
> 赞同：0
> 
> 时间：2012-07-27T09:10:58.040
> 
> 标签：python, arrays, list, class

使用 Python 和类，我正在尝试制作像战舰这样的游戏，主要用于练习。所以我做了一个游戏板对象，你“看到”它，然后“改变”它。（稍后我会将“create”与 init 合并）

但是在我的“更改”应用于每一行的地方发生了一些奇怪的事情......这是代码：

```
class Board:
    'Game Board'
    topMarkers = list('ABCDEFGHIJKLMNOPQRSTUVWXYZ')
    sideMarkers = list(range(0, 26))

    def __init__(self,h,w): #Makes the map
        self.height = h
        self.width = w

    def create(self): #Makes a map for displaying
        wave = '~'
        self.row = []
        self.column = []
        #self.column = wave * self.width # If width is 4, column is now '~~~~'

        for c in range(self.width):
            self.column.append(wave)

        raw_input(self.column)

        for r in range(self.height): #
            self.row.append(self.column)

        raw_input(self.row)

    def showGrid(self):

        print self.row

    def changeRow(self, y, x):
        self.row[1][2] = "Test"

yourShipsMap = Board(4,3)

theirShipsMap = Board(4,7)

theirShipsMap.create()

theirShipsMap.changeRow(2,2)
theirShipsMap.showGrid() 
```

当我运行它时，它不仅在第一个列表，第二个索引，而且在每个列表，第二个索引中写入“测试”。知道为什么要这样做吗？

我讨厌当我停止一起编程一个月并忘记一切时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:14:10.193

您只创建一列，然后将其附加到您的行中。将列表附加到另一个列表不会生成新副本，而是会一遍又一遍地重复使用相同的列表。

通过使用`[:]`切片语法或`list()`调用来附加副本：

```
for r in range(self.height): #
    self.row.append(self.column[:]) 
```

以下是发生在您身上的示例：

```
>>> column = [1, 2]
>>> row = []
>>> row.append(column)
>>> row.append(column)
>>> column[0] = 'foobar'
>>> row
[['foobar', 2], ['foobar', 2]] 
```

另一方面，如果我们使用副本，则当我们更改原件时，副本不会更改：

```
>>> row = []
>>> row.append(list(column))
>>> row.append(column[:])
>>> row
[['foobar', 2], ['foobar', 2]]
>>> column[0] = 1
>>> row
[['foobar', 2], ['foobar', 2]] 
```

在上面的示例中，我使用了两种方法来创建原始列列表的（浅）副本。如果您需要创建*深层*副本（包含其他可变项的列表，例如列表或字典），请改用该[`copy.deepcopy`实用程序](http://docs.python.org/library/copy.html#copy.deepcopy)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:13:16.200

```
for r in range(self.height): #
    self.row.append(self.column) 
```

您继续附加相同的列表对象，如果更新为一个，则将在每一行中看到。

试试这个：

```
self.row = [['~'] * self.width for r in xrange(self.height)] 
```

这将创建一个列表列表，其中所有元素相互独立。

# c# - .NET Environment.NewLine - 如何以编程方式设置

> ID：11684804
> 
> 赞同：0
> 
> 时间：2012-07-27T09:11:00.817
> 
> 标签：c#, .net, newline, environment

我想更改当前环境的默认 Environment.NewLine 字符。

我有一个将消息写入控制台的独立应用程序。当核心框架在控制台环境中工作时，新行是 \r\n。当我将核心框架移动到 Windows 服务中时，Environment.NewLine 更改为“\n”。

我希望能够将控制台更改为始终使用“\r\n”，因为当我将控制台的输出重定向到文件时，从示例记事本读取时输出没有“windows 新行”。

我希望 Console.WriteLine 可以随时使用 \r\n 。

**编辑：**

我正在重定向 Console.out：

```
 ConsoleOut = File.AppendText(fileName);
        ConsoleOut.AutoFlush = true;

        Console.SetOut(ConsoleOut);
        Console.SetError(ConsoleOut); 
```

每个 Console.WriteLine 或 Console.Write 都会发送到一个文件，但正如我所说，我在 Windows 服务和独立 Windows 环境中遇到不同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:16:18.793

我不相信这一点：

> 当我将核心框架移动到 Windows 服务中时，Environment.NewLine 更改为“\n”

我已经检查了 IL `get_NewLine()`，它被硬编码为：

```
ldstr "\r\n"
ret 
```

所以基本上；问题不是你想的那样；改变`Environment.NewLine`不会做任何事情（并且：不可能）。

那么：你是如何重定向的？我倾向于做类似的事情：

```
if (!Environment.UserInteractive)
{
    var tw = new SlowWriter(Path.Combine(logPath,"{0}.log"));
    Console.SetError(tw);
    Console.SetOut(tw);
} 
```

哪里是确保文件不会保持打开状态`SlowWriter`的自定义类型（子类）；`TextWriter`较慢，但相当健壮：

```
class SlowWriter : TextWriter
{ // this opens and closs each time; slower, but doesn't lock the file
    private readonly string path;
    public SlowWriter(string path)
    {
        this.path = path;
    }
    public override System.Text.Encoding Encoding
    {
        get { return System.Text.Encoding.UTF8; }
    }
    private TextWriter Append()
    {
        var finalPath = string.Format(path, DateTime.UtcNow.ToString("yyyyMMdd"));
        return File.AppendText(finalPath);
    }
    public override void Write(string value)
    {
        lock (this)
        {
            using (var file = Append())
            {
                file.Write(value);
            }
        }
    }
    public override void Write(char[] buffer, int index, int count)
    {
        lock(this)
        {
            using (var file = Append())
            {
                file.Write(buffer, index, count);
            }
        }
    }
    public override void Write(char[] buffer)
    {
        lock (this)
        {
            using (var file = Append())
            {
                file.Write(buffer);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:17:42.843

您不能修改 System.Environment.NewLine

[MSDN 参考](http://msdn.microsoft.com/it-it/library/system.environment.newline.aspx)

这是一个只读属性

```
public static string NewLine { get; } 
```

[在这里](http://www.dotnetperls.com/newline)你可以读到 NewLine 总是返回“\r\n”。

> 接下来我们研究 get_NewLine，它是用这个 IL 实现的。您可以看到它只是返回“\r\n”字符串文字。

所以我认为你可以在你的应用程序中使用一个常量，比如

```
public const NEWLINE = "\r\n"; 
```

并且只需使用它而不是 Environment.NewLine。

Console.WriteLine 不要在内部使用 Environment.NewLine 而是使用回车后跟换行符。参考[这里](http://msdn.microsoft.com/en-us/library/zdf6yhx5.aspx)

> 默认行终止符是一个字符串，其值是一个回车后跟一个换行符（在 C# 中为“\r\n”，在 Visual Basic 中为 vbCrLf）。您可以通过将 Out 属性的 TextWriter.NewLine 属性设置为另一个字符串来更改行终止符。该示例提供了一个说明。

还有一个关于如何修改此属性的示例：

```
 // Redefine the newline characters to double space.
 Console.Out.NewLine = "\r\n\r\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T09:16:26.227

那么我认为你不应该使用`Environment.NewLine`. 您所看到的正是拥有它的确切原因。我认为你最好定义一个`appSettings`你使用的并将它设置为你的控制台应用程序和 Windows 服务应用程序的不同值。

*更新：* 另见 Marc Gravell 的回答。即使它是硬编码的，我也不会尝试用上述动机来改变它。

# wordpress - WordPress 21 主题和响应式支持

> ID：11684805
> 
> 赞同：0
> 
> 时间：2012-07-27T09:11:21.353
> 
> 标签：wordpress, responsive-design

我有一个关于 211 WordPress 主题的简单问题。我对 WordPress API 有足够的了解，可以从头开始开发一个主题，但是从互联网上搜索，似乎很多开发人员都使用 21 为基础，所以我决定使用它，主要是因为它具有响应式支持，而且看起来像一个相当扎实的主题。我唯一的问题是，在重新调整桌面浏览器窗口大小时，最大宽度似乎不起作用。我知道它被设计为跨浏览器/设备兼容，但必须有一种方法可以使用流畅的布局明确定义最大宽度。我想过只是删除响应式支持并转换为网格系统，但如果我走这条路，我最好从头开始开发一个。

有没有人对在保持响应式设计的同时定义最大宽度有任何想法，如果是这样，请您解释一下，因为我能看到在重新调整大小时防止元素溢出的唯一方法是完全删除响应式并将百分比转换为像素。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:37:35.473

```
@media (max-width: 650px)
{

/* @media (max-width: 650px) Reduce font-sizes for better readability on smaller devices */

} 
```

# wpf - 如何在 wpf 数据绑定中正确显示数字？

> ID：11684812
> 
> 赞同：3
> 
> 时间：2012-07-27T09:11:51.860
> 
> 标签：wpf, xaml, data-binding, floating-point, format

我正在使用 wpf，我的问题是显示浮点数。一般来说，当我将我的数据（浮点数）绑定到数据网格列时，它甚至在我的舍入数（3.00）之后显示两个零，但我想在我的值未四舍五入时显示这两个零。如何解决这个问题呢？

3 -> 3 不是 3.00

3.62 -> 3.62

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T09:29:11.010

StringFormat 是您所需要的。

```
<TextBlock Text="{Binding Path=MyFloat, StringFormat='0:0.##'}" /> 
```

如果这不起作用，请尝试“{0:0.##}”

# internationalization - 使用带有消息格式的选择

> ID：11684813
> 
> 赞同：1
> 
> 时间：2012-07-27T09:11:52.837
> 
> 标签：internationalization, icu, messageformat

我在 PHP 中使用[MessageFormat](http://php.net/manual/en/messageformatter.formatmessage.php)（`intl`扩展的一部分）。该扩展使用 ICU 4.6.1。

但是，问题不在于 PHP。

我想通过对第一个令牌做出决定来格式化一段字符串`{0}`：

*   什么时候，文本应该`{0}`是`0``a`
*   如果是`1`，文本应该是`b`
*   对于所有其他情况，文本应为`c`

我知道这可以用`plural`,`=0`来完成`0`，但是通过我的测试，它似乎不起作用，很可能是因为在 4.8 中引入了偏移量和自定义复数。

因此，我正在尝试使用`select`：

```
{0, select, 0 {a} other {{0,plural,one{b}other{c}}}} 
```

但是，由于某种原因，消息格式化程序无法格式化上述内容并返回`false`（无法格式化）。

为什么会这样？我的语法有问题吗？

* * *

快速更新：经过一番挖掘，似乎我无法使用 select 来匹配以数字开头的值。有没有办法解决这个问题？

另一个更新：更新到 ICU 49.1.2 和`intl`3.0.0a2。我现在可以使用`=0`,`=1`等，但这已停止工作（以前工作过）：

```
{0}{0, plural, one{a} other{b}} 
```

这在哪里起作用：

```
{0, plural, one{a} other{b}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:29:55.443

我最终升级到最新版本的`intl`ICU 49.1.2。

但是，一旦完成，这将不起作用：

```
{0}{0, plural, one{a} other{b}} 
```

但这有效：

```
{0, plural, =0{a} one{# b} other {# c}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T21:19:31.677

`select`参数类型是完全匹配的字符串。您需要确保您正在传递一个字符串参数值，然后有匹配的子句。避免使用复数进行精确的大小写匹配，因为每个语言环境都有自己的`one`含义规则。

下面*应该*给你你想要的，但我对格式的了解比 PHP 实现要多得多。

```
MessageFormatter::formatMessage($locale,
  '{0, select, _0 {a} _1 {b} other {c}}',
  array( "_$value" )) 
```

# c# - 如何通过模板在 TextBox 和 RichTextBox 之间切换

> ID：11684814
> 
> 赞同：0
> 
> 时间：2012-07-27T09:11:55.263
> 
> 标签：c#, .net, wpf, richtextbox, controltemplate

我想写一个TextBox控件，当它失焦时它是一个RichTextBox，当它聚焦时它变成一个TextBox。

我尝试了几种方法，但都没有奏效。几乎可以工作的唯一解决方案如下所示：

```
<RichTextBox x:Name="headText" Document="{Binding HeadDocument}" GotFocus="headText_GotFocus" LostFocus="headText_LostFocus">
        <Controls:HyperlinkRichTextBox.Resources>
            <ControlTemplate x:Key="headTemplate">
                <TextBox Text="{Binding Head}" />
            </ControlTemplate>
        </Controls:HyperlinkRichTextBox.Resources>
</RichTextBox> 
```

在后面的代码中：

```
private ControlTemplate oldTemplate;

private void headText_GotFocus(object sender, RoutedEventArgs e)
{
    var controlTemplate = headLineText.FindResource("headTemplate") as ControlTemplate;
    oldTemplate = headText.Template;
    headText.Template = controlTemplate;
    headText.Focus();
}

private void headText_LostFocus(object sender, RoutedEventArgs e)
{
    headText.Template = oldTemplate;
} 
```

问题是虽然文本框在两种状态之间切换，但我无法在文本框中写入任何内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:58:36.607

这篇文章应该让你开始：[http ://weblogs.asp.net/thomaslebrun/archive/2009/03/24/wpf-how-to-develop-and-editable-textblock.aspx](http://weblogs.asp.net/thomaslebrun/archive/2009/03/24/wpf-how-to-develop-and-editable-textblock.aspx)

这是一个改编，您需要添加 TextBox 和 RichTextBox 的值绑定部分：

XAML

```
<Grid>
    <Grid.Resources>
        <Style TargetType="{x:Type local:EditableTextBlock}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:EditableTextBlock}">
                        <Grid x:Name="PART_GridContainer">
                            <RichTextBox x:Name="PART_TbDisplayText" Visibility="Visible" />
                            <TextBox x:Name="PART_TbEditText" Visibility="Hidden" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="BorderBrush" Value="Red" />
        </Style>
        <Style TargetType="RichTextBox">
            <Setter Property="BorderBrush" Value="Blue" />
        </Style>
    </Grid.Resources>
    <StackPanel>
        <local:EditableTextBlock />
        <Button>Lose focus</Button>
    </StackPanel>
</Grid> 
```

代码：

```
[TemplatePart(Type = typeof(Grid), Name = EditableTextBlock.GRID_NAME)]
[TemplatePart(Type = typeof(RichTextBox), Name = EditableTextBlock.RICHTEXTBOX_DISPLAYTEXT_NAME)]
[TemplatePart(Type = typeof(TextBox), Name = EditableTextBlock.TEXTBOX_EDITTEXT_NAME)]
public class EditableTextBlock : Control
{
    private const string GRID_NAME = "PART_GridContainer";
    private const string RICHTEXTBOX_DISPLAYTEXT_NAME = "PART_TbDisplayText";
    private const string TEXTBOX_EDITTEXT_NAME = "PART_TbEditText";

    private Grid gridContainer;
    private RichTextBox richTextBox;
    private TextBox textBox;

    static EditableTextBlock()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(EditableTextBlock), new FrameworkPropertyMetadata(typeof(EditableTextBlock)));
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        this.gridContainer = this.Template.FindName(GRID_NAME, this) as Grid;

        if (this.gridContainer != null)
        {
            this.richTextBox = this.gridContainer.Children[0] as RichTextBox;
            this.richTextBox.GotFocus += new RoutedEventHandler(richTextBoxGotFocus);
            this.textBox = this.gridContainer.Children[1] as TextBox;
            this.textBox.LostFocus += this.textBoxLostFocus;
        }
    }

    private void richTextBoxGotFocus(object sender, RoutedEventArgs e)
    {
        this.richTextBox.Visibility = Visibility.Hidden;
        this.textBox.Visibility = Visibility.Visible;
        this.textBox.Focus();
    }

    private void textBoxLostFocus(object sender, RoutedEventArgs e)
    {
        this.richTextBox.Visibility = Visibility.Visible;
        this.textBox.Visibility = Visibility.Hidden;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:03:44.977

这只是一个猜测，但我会说它是因为您完全更改了富文本框的模板。请记住，ControlTemplate 是您的控件的组成方式。许多控件允许您完全修改它，但有时包含以“PART_XYZ”命名的元素，这些表示“如果您删除我，我的父模板化控件将无法正常运行”。我现在的猜测是，您似乎扩展的 RichtTextBox 找不到任何必要的 PART_ 控件并进入禁用模式，因此您包含的文本框也被禁用。

我的建议是，使用切换模板的 UserControl。提供 2 个模板，一个带有文本框，一个带有richtextbox。

# iphone - 按字符串值对字符串的 NSMutableArray 进行排序

> ID：11684816
> 
> 赞同：2
> 
> 时间：2012-07-27T09:12:10.980
> 
> 标签：iphone, objective-c, ios, xcode

我得到一个包含以下字符串的字符串数组，这些字符串有一定的模式

str1 str51 str3 str4 str10 str39 str31 str191

每个字符串都以 'str' 开头，并在其末尾附加一个数字。

有没有一种巧妙的方法来对数组进行排序，以便按值顺序列出字符串

str1 str3 str4 str10 str31 str39 str51 str191

我可以通过编写一些递归函数来看到一种方法

```
NSString * firstString = [[strArray objectAtIndex:i].substringFromIndex:3];
NSString * secondString = [[strArray objectAtIndex:i+1].substringFromIndex:3];

if ([firstString intValue] < [secondString intValue])
{
    //do nothing they order is correct
}
else
{
    //swap the order of the 2 strings in the array
} 
```

但那是非常基本的代码，Objective-C 中是否有一些机制或一个很好的代码技巧来更好地处理这种排序？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T09:30:58.163

如果它们都以相同的前缀开头，我相信默认排序会适当地处理它们。我的意思是：

```
[someArray sortUsingSelector:@selector(compare:)]; 
```

如果由于某种原因这不起作用，那么您可以使用块。尝试这个：

```
NSArray *sortedArray = [someArray sortedArrayUsingComparator:^NSComparisonResult(id a, id b) 
{
    //Default compare, to protect against cast
    if (![a isKindOfClass:[NSString class]] || ![b isKindOfClass:[NSString class]]) {
        return ([a compare:b]);
    }
    else {
        NSString *aString = (NSString*) a;
        NSString *bString = (NSString*) b;
        int aInt = [[a.substringFromIndex:3] intValue];
        int bInt = [[b.substringFromIndex:3] intValue];
        return [aInt < bInt];
    }
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:35:41.150

你可以这样排序

```
NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSString * str1 = [(NSString *)obj1 substringFromIndex:3];
    NSString * str2 = [(NSString *)obj2 substringFromIndex:3];
    return [str1 compare:str2 options:NSNumericSearch];
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T11:42:04.520

创建一个 NSSortDescriptor 并根据键对数组进行排序：“description”。像这样：

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:0]; //Your Array of NSStrings
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"description" ascending:YES];
array = [array sortedArrayUsingDescriptors:@[descriptor]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T09:29:36.963

您可以定义具有任何您想要的行为的比较器函数。下面的一个将模拟 Mac OS 中 Finder 的行为，忽略大小写并尊重字符串末尾出现的数字。但是，顺序将取决于提供的语言环境，因此如果您希望结果绝对一致，您应该选择一个语言环境并对其进行硬编码。

```
int finderSortWithLocale(id string1, id string2, void *locale)
{
    static NSStringCompareOptions comparisonOptions =
        NSCaseInsensitiveSearch | NSNumericSearch |
        NSWidthInsensitiveSearch | NSForcedOrderingSearch;

    NSRange string1Range = NSMakeRange(0, [string1 length]);

    return [string1 compare:string2
                    options:comparisonOptions
                    range:string1Range
                    locale:(__bridge NSLocale *)locale];
} 
```

您绝对应该阅读[有关每个选项的文档，](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSCaseInsensitiveSearch)以确保它符合您的要求。

要使用这样的比较器有效地对字符串数组进行排序，请使用以下`sortedArrayUsingFunction:context:`方法：

```
NSArray *sortedArray = [stringsArray sortedArrayUsingFunction:finderSortWithLocale context:(__bridge void *)[NSLocale currentLocale]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-01T06:37:08.513

```
NSSortDescriptor *sortByName = [NSSortDescriptor sortDescriptorWithKey:@"datetime"
                                                             ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortByName];
NSArray *sortedArray = [myArrayNonsort sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-27T09:31:48.397

sortedArray = [anArray sortedArrayUsingSelector: @selector(localizedCaseInsensitiveCompare:)];

输入：anArray 输出：sortedArray

[参考文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Arrays.html#//apple_ref/doc/uid/20000132-SW5)

# c# - OCS/Lync 网站存在指示

> ID：11684819
> 
> 赞同：2
> 
> 时间：2012-07-27T09:12:25.693
> 
> 标签：c#, javascript, sharepoint, lync, ocs

我正在为 Sharepoint 构建几个 webpart，我需要显示用户的存在（来自 Lync/OCS）。当我使用：

```
<img border=\"0\" height=\"12\" width=\"12\" src=\"/_layouts/images/blank.gif\" onload=\"IMNRC('" + user.Email + "')\" id=\"IMID_" + Guid.NewGuid() + "\" ShowOfflinePawn=1>&nbsp;" + user.Name + "</span> 
```

它工作正常，我可以通过许多功能（姓名、电子邮件、我可以给这个人打电话或发送任何消息等）获得很好的状态控制：

![在场](../Images/8219d31d3b5f62ce46c6423b7c254372.png)

问题是它只能在 IE 中工作，有什么办法可以在其他浏览器中具有相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:06:38.007

什么正在使用 ActiveX，并且只适用于 IE。

如果要支持多个浏览器，可以使用[Microsoft Lync Server 2010 的 HTML 状态控件。](http://htmlpresencecontrols.codeplex.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T07:29:23.407

看看这个：[http ://customsp.blogspot.com/2014/07/sharepoint-2013-lync-presence-using.html](http://customsp.blogspot.com/2014/07/sharepoint-2013-lync-presence-using.html)

使用这个 jquery 插件，您可以获得联系卡。

# objective-c - 当我从 Objective C 底部的 UIActionSheet 弹出窗口添加到收藏夹时，如何更新 UITableView？

> ID：11684826
> 
> 赞同：1
> 
> 时间：2012-07-27T09:13:06.643
> 
> 标签：objective-c, uitableview, uiactionsheet, favorites

**你好 ：）**

当我从 Objective C 底部的 UIActionSheet 弹出窗口添加到收藏夹时，如何更新 UITableView。

这是我的 UIActionSheet 弹出窗口：

```
// Jeg laver popup fra bunden med alle de ting du kan share med
shareSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:
              @"Add to favorites",@"Email",@"Facebook",@"Twitter",@"Google+",@"Linkedin", nil];
[shareSheet showInView:[self.view window]];
[shareSheet release]; 
```

当我推送添加到收藏夹时，我想在另一个 ViewController 中重新加载 UITableView

这是我的actionSheet clickedButtonAtIndex：

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex(NSInteger)buttonIndex
{
    if(buttonIndex == 0)
    {
       // I have some code here to add to favorite NSUserDefaults, and it work fine.
       // But how can i reload UITableView in my FavoritesViewController.m
    }
} 
```

我曾尝试在 clickedButtonAtIndex 中使用通知中心：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"UpdateTableViewsNotification" object:self]; 
```

并将其发送到 FavoritesViewController.m：

在我看来DidLoad：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateTableView) name:@"UpdateTableViewsNotification" object:nil]; 
```

和选择器：

```
-(void)updateTableView
{
    [self.tableView reloadData]; 
} 
```

但这不起作用。

任何人都可以帮助我:)

我需要知道如何从另一个文件重新加载表格视图。:)

* * *

我不知道如何更新表格单元格。

这是我保存收藏夹的功能：

```
// Nu arbejder jeg med favoritter
if(buttonIndex == 0)
{
    // Jeg opretter NSMutableArray for at kunne bruge det til at gemme i
    NSMutableArray *objectArray;
    // Jeg laver en NSUserDefaults for at kunne gemme alle mine data der i
    NSUserDefaults *favoritesDefaults = [NSUserDefaults standardUserDefaults];
    // Jeg opretter et oldArray for at gemme data hvis den ikke er tom
    NSArray *oldArray = [favoritesDefaults objectForKey:@"favorites"];
    // Den er ikke tom
    if (oldArray != nil) 
    {
        // Så gemmer jeg oldArray der i
        objectArray = [[NSMutableArray alloc] initWithArray:oldArray];
    } 
    else
    {
        // Ellers opretter jeg NSMutableArray
        objectArray = [[NSMutableArray alloc] init];
    }   
    // Jeg tilføjer object saveTip til objectArray
    [objectArray addObject:showTip];
    // Og derefter gemmer det i NSUserDefaults
    [favoritesDefaults setObject:objectArray forKey:@"favorites"];
    // Sender post notification til favorit om at opdatere sig
    [[NSNotificationCenter defaultCenter] postNotificationName:@"UpdateTableViewsNotification" object:self];
    [favoritesDefaults synchronize];
} 
```

我的收藏功能：

```
-(void)setFavorites
{
    // Tjekker om de er blevet sat
    if(favoriteArray == nil || favorite == nil || newfavoriteArray == nil)
    {
        // Jeg sætter favoriteArray
        favoriteArray    = [[NSMutableArray alloc] init];
        // Jeg sætter favorite
        favorite         = [NSUserDefaults standardUserDefaults];
        // Jeg sætter newfavoriteArray
        newfavoriteArray = [[NSMutableArray alloc] init];
    }

    // Den skal kun køre denne hvis favorites ikke er tom
    if([favorite objectForKey:@"favorites"] != nil)
    {
        // Smider data i favoriteArray fra NSUserDefaults
        [favoriteArray addObject:[favorite objectForKey:@"favorites"]];
        // Jeg skal pakke favoriteArray for at kunne tælle og trække data fra objektet
        for(NSDictionary *favoriteTip in favoriteArray)
        {
            // Pakker objektet ud igen
            for(NSDictionary *getTipFromFavorite in favoriteTip)
            {
            // Jeg pakker objekterne ud en gang til
                for(NSDictionary *getTipFromFavoriteNew in getTipFromFavorite)
                {
                    [newfavoriteArray addObject:getTipFromFavoriteNew];
                }
            }
        }
    }

    // Jeg tjekker om der er favoritter da jeg skal vise edit knappen
    if(newfavoriteArray.count != 0)
    {
        // Man skal kunne slette favoritter igen    
        self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Delete" style:UIBarButtonSystemItemTrash target:self action:@selector(switchDeleteForm)] autorelease];
    }
} 
```

但是当我添加一个收藏夹时，我向收藏夹控制器发送了一个 NSNotificationCenter 通知，它会正确接收它，NSNotificationCenter 在 vi​​ewDidLoad 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateTableView) name:@"UpdateTableViewsNotification" object:nil]; 
```

以及来自 NSNotificationCenter 的功能：

```
-(void)updateTableView
{
    [self.tableView reloadData];
} 
```

它可以工作，但我无法重新加载它，我可以写 NSLog(@"TEST"); 在 updateTableView 中，它说 TEST 但它没有重新加载。

我希望你能理解我 ：） ！我来自丹麦，英语不太好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:08:36.153

您只需要在更改用于填充它的数组后调用`reloadData`您的，所以添加到最后。`tableView``setFavorites`**`[self.tableView reloadData];`**

# magento - 在主页 magento 中创建新的引用

> ID：11684827
> 
> 赞同：0
> 
> 时间：2012-07-27T09:13:11.573
> 
> 标签：magento

![我想用红色做新的参考](../Images/edbdaf68e6dab1bb83f5b06bf49f0f57.png)

我想在红色区域做一个新的参考，我已经添加了xml代码`page.xml`：

```
<block type="core/text_list" name="newreference" as="newreference"/> 
```

然后我把这个脚本放到`2columns-left.phtml`：

```
<div><?php getChildHtml('newreference') ?></div> 
```

然后我也把这个xml放入`page.xml`：

```
<reference name="newreference">
  <block type="catalog/product_under_wasis" name="home.product.under_wasis" template="catalog/product/under_wasis.phtml" />
</reference> 
```

然后我放入`under_wasis.phtml`文件夹`catalog/product/`，结果还是报错，`can't read 'newreference'`怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:46:57.823

你的`getChildHtml()`电话不正确。

它应该是：

```
<?php echo $this->getChildHtml('newreference') ?> 
```

# jquery - 用户更改后如何获取真实的输入值（使用jQuery）？

> ID：11684832
> 
> 赞同：4
> 
> 时间：2012-07-27T09:13:37.307
> 
> 标签：jquery, input

例如，我们有 value="wally" 的 html 输入：

```
<input type="text" value="wally" /> 
```

用户更改后如何获取这个旧的“wally”值（使用 jQuery）？

我尝试使用 .attr()、.prop()、.val() 来获取它，但它们都返回用户输入的新值。

您可以[在 jsfiddle 上测试代码](http://jsfiddle.net/webvitaly/DA67p/3/)。尝试更改输入值并单击“获取”蓝色按钮。

PS jQuery 1.7.2 包含在 jsfiddle 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T09:20:11.627

[`defaultValue`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-26091157)底层 DOM 元素的使用：

```
var input = $(this).closest('form').find('input');
console.log(input[0].defaultValue); 
```

[更新的小提琴](http://jsfiddle.net/DA67p/5/)

当然，如果您使用的是 jQuery 1.6 或更高版本，您可以使用`prop('defaultValue')`它（在早期版本中，`attr('defaultValue')`可能有效）：

```
var input = $(this).closest('form').find('input');
console.log(input.prop('defaultValue')); 
```

[更新的小提琴](http://jsfiddle.net/DA67p/8/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T09:19:40.557

要记住更改之前的值..

```
$('input').focusin(function(){
   $(this).data('oldValue', $(this).val());
}); 
```

并使用..取回它

```
$('input').change(function(){
   var old = $(this).data('oldValue'); //old value
   var new = $(this).val(); //new value
}) 
```

**请参阅此处的工作[示例](http://jsfiddle.net/mrobin/uqFnA/)。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:16:49.440

使用 element.defaultValue; 其中元素当然是输入字段。如果首先使用 JavaScript 填充元素，只需添加一个新的数据属性。

例如 data-defaultValue='wallie'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T09:19:36.077

您可以将默认值存储在输入元素的数据容器中，然后在用户单击获取按钮时更新该数据值（除非您始终希望访问默认值而不仅仅是最后一个值）。

小提琴：http: [//jsfiddle.net/DA67p/4/](http://jsfiddle.net/DA67p/4/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T09:16:00.853

您可以使用另一个属性，例如：

```
<input type="text" value="wally" oldVal="wally" /> 
```

然后使用

```
input.attr('oldVal'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-27T09:25:31.810

这个问题有足够的答案。但是，如果您需要代码背后或服务器端的旧值，还有另一种解决方法会有所帮助。

将具有相同值的隐藏字段添加到您的页面。因此，如果您需要旧值，请使用隐藏字段的值。这样做，您将在客户端和服务器端都获得旧值。

# xslt - XSLT1.0：在等式右侧选择多个值？

> ID：11684833
> 
> 赞同：1
> 
> 时间：2012-07-27T09:13:42.110
> 
> 标签：xslt, xslt-1.0

有什么方法可以在等式的右侧放置一个以上的值？

```
<xsl:choose>
<xsl:when test="Properties/LabeledProperty[Label='Category Code']/Value = 600,605,610"> 
```

上面的代码返回：

```
XPath error : Invalid expression
Properties/LabeledProperty[Label='Category Code']/Value = 600,605,610
                                                             ^
compilation error: file adsml2adpay.xsl line 107 element when 
```

我不想使用“或”的原因是因为每个“何时”测试的正确部分应该有大约 20 个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:20:33.737

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:config="http://tempuri.org/config"
  exclude-result-prefixes="config"
>
  <config:categories>
    <value>600</value>
    <value>605</value>
    <value>610</value>
  </config:categories>

  <xsl:variable 
    name   = "vCategories" 
    select = "document('')/*/config:categories/value" 
  />

  <xsl:key
    name   = "kPropertyByLabel"
    match  = "Properties/LabeledProperty/Value"
    use    = "../Label"
  />

  <xsl:template match="/">
    <xsl:choose>
      <xsl:when test="key('kPropertyByLabel', 'Category Code') = $vCategories">
        <!-- ... -->
      </xsl:when>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

这是因为 XPath`=`运算符在处理节点集时将左侧的每个节点与右侧的每个节点进行比较（类似于 SQL `INNER JOIN`）。

因此，您需要做的就是根据您的个人值创建一个节点集。使用临时名称空间，您可以直接在 XSLT 文件中执行此操作。

另请注意，我已经介绍了一个`<xsl:key>`使通过标签选择属性值更有效的方法。

* * *

编辑：您还可以创建一个外部`config.xml`文件并执行以下操作：

```
<xsl:variable name="vConfig" select="document('config.xml')" /> 

<!-- ... -->

<xsl:when test="key('kPropertyByLabel', 'Category Code') = $vConfig/categories/value"> 
```

* * *

XSLT 2.0 添加了序列的概念。在那里做同样的事情更简单：

```
<xsl:when test="key('kPropertyByLabel', 'Category Code') = tokenize('600,605,610', ',')"> 
```

这意味着您可以轻松地将字符串`'600,605,610'`作为外部参数传递。

# javascript - 早午餐构建给出错误

> ID：11684834
> 
> 赞同：0
> 
> 时间：2012-07-27T09:13:48.407
> 
> 标签：javascript, brunch

我正在尝试为使用分支的 Web 应用程序设置环境。

后

```
npm install -d 
```

我愿意，

```
brunch build 
```

但是，收到以下错误：

```
27 Jul 12:08:28 - error: [Error: Cannot find module 'D:\Development\Projects\PathToProject/node_modules/brunch'] 
```

如果我只是创建一个新项目`brunch new proj`，构建工作正常。

我会很感激任何想法，为什么它可能不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:04:26.007

我不熟悉在 Win 机器上安装和运行，但这听起来有点像 brunch 是本地安装 - 有没有办法可以确定它是本地安装还是全局安装？PC环境中有这样的东西吗？

# java - 发布请求中的 Jsoup 编码

> ID：11684839
> 
> 赞同：0
> 
> 时间：2012-07-27T09:14:13.257
> 
> 标签：java, android, jsoup

向西里尔文发布 POST 请求时遇到此问题。我一直在使用 JSoup 并尝试了类似的东西，并且该站点使用 win1251 编码

. header ("Content-Type", "application / x-www-form-urlencoded; charset = UTF-8")

但它不工作？可能是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T07:15:25.247

我已经找到了一个解决方案，而无需更改 jsoup 代码（包括 XMLHttpRequest 调用）：

**注意**：站点是我自己的 bean，其中包含有关我正在包装的站点的信息

```
String postParams[]=null;
if (site.isPostRequest()) {
    String urlParams[]=url.split("\\?");
    url=urlParams[0];
    postParams=urlParams[1].split("[=|&]");
}
Integer timeout=site.getTimeout();
if (timeout==null)
    timeout=2*1000;
if (StringUtil.isEmpty(site.getEncoding()))
    site.setEncoding(UTF_8);
URL _url=new URL(url);
URLConnection con=_url.openConnection();
con.setConnectTimeout(timeout);
if (site.isPostRequest()) {
    Connection con2=Jsoup.connect(url);
    if (site.isXMLHttpRequest()) {
        con2.header("X-Requested-With", "XMLHttpRequest");
        con2.referrer(site.getProtocol()+site.getDomain());
    }
    con2.header("Accept-Charset", site.getEncoding());
    con2.data(postParams);
    doc=con2.post();
    doc.outputSettings(doc.outputSettings().charset(site.getEncoding()));
} else {
    if (site.isXMLHttpRequest()) {
        con.setRequestProperty("X-Requested-With", "XMLHttpRequest");
        con.setRequestProperty("referrer",site.getProtocol()+site.getDomain());
    }
    doc=Jsoup.parse(con.getInputStream() , site.getEncoding(), url);
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-28T09:24:27.420

问题解决了。我已经编辑了 jsoup 的源代码以使其工作。

# delphi - Delphi Datasnap 服务器用户认证

> ID：11684843
> 
> 赞同：0
> 
> 时间：2012-07-27T09:14:26.080
> 
> 标签：delphi, authentication, delphi-xe, datasnap

我们正在开发一个新的，也是我们的第一个 DataSnap 服务器和客户端应用程序。我已向服务器添加了身份验证，但我无法动态更改来自客户端的连接的登录详细信息。用户名和密码在

```
procedure TServerContainer1.DSAuthenticationManager1UserAuthenticate(
  Sender: TObject; const Protocol, Context, User, Password: string;
  var valid: Boolean; UserRoles: TStrings); 
```

保持空白。

在客户端中，我们将值设置为......

```
DSConnection := TSQLConnection.Create(nil);
DSConnection.DriverName := 'DATASNAP';
DSConnection.LoginPrompt := False;
DSConnection.Params.Values['port'] :=  Port;
DSConnection.Params.Values['HostName'] :=  HostName;
DSConnection.Params.Values['DSAuthUser'] :=  Username;
DSConnection.OnLogin := DSConnectionOnLogin;
DSProviderConnection1.SQLConnection := DSConnection;
MMLog.Log('DSConnection: ' + DSConnection.Params.Text);
DSConnection.Open; 
```

但是，如果我查看`DSConnectEventObject.ConnectProperties.Properties.Text`服务器`OnConnect`事件，我可以看到参数已传递。

我错过了什么吗？

谢谢，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:40:51.193

解决方案是使用正确的值描述符。

```
DSConnection.Params.Values['DSAuthUser'] :=  Username; 
```

变成

```
DSConnection.Params.Values['DSAuthenticationUser'] :=  Username;
DSConnection.Params.Values['DSAuthenticationPassword'] := Password; 
```

这样就`Authentication Manager`可以得到正确的用户名和密码。

# java - 为什么非静态内部类不能有静态成员（字段和方法）？

> ID：11684844
> 
> 赞同：12
> 
> 时间：2012-07-27T09:14:30.333
> 
> 标签：java, static, inner-classes, static-members, non-static

> **可能重复：**
> [为什么我们不能在内部类中有静态方法？](https://stackoverflow.com/questions/975134/why-cant-we-have-static-method-in-an-inner-class)

我知道创建非静态内部类对象需要一个外部类对象，并且创建的非静态内部类对象自动具有对外部类对象的隐藏引用。但是为什么非静态内部类不能有静态成员呢？Java 设计者只需要禁止访问内部类的静态方法中的非静态外部类字段，这会更有意义，不是吗？

如果内部类中有静态成员没有意义，为什么内部类可以通过继承具有静态成员的类来继承静态成员？

我也读过这篇[文章](https://stackoverflow.com/questions/2482327/why-can-we-have-static-final-members-but-cant-have-static-method-in-an-inner-cla)。如前所述：

> 内部类可以继承不是编译时常量的静态成员，即使它们可能没有声明它们。不是内部类的嵌套类可以按照 Java 编程语言的通常规则自由声明静态成员。

是公约吗？

这是我的代码：

```
public class OuterClass {

    private int outerClassField;

    public void doSomethingOuterClass() {
        outerClassField = 1;
    }

    public static void doSomethingStaticOuterClass() {
        // outerClassField = 2; // Error: Because static method cannot access an specific object's field
    }

    public class InnerClass extends ClassWithStaticField {

        // Error: Why a non-static inner class cannot have static fields ?
        // public static int innerClassStaticField = 1;

        public void doSomethingInnerClass() {
            outerClassField = 3;
            staticField = 1;
        }

        // Error: Why a non-static inner class cannot have static methods ?
        // public static void doSomethingStaticInnerClass() {
        // outerClassField = 4;
        // }
    }

    public static void main(final String[] args) {
        // If it does not make sense to have static members in an inner class, why inner class can inherit statis members by inheriting a class who has static
        // members?
        OuterClass.InnerClass.staticField = 1;
        OuterClass.InnerClass.staticMethod();
    }
}

class ClassWithStaticField {
    public static int staticField;

    public static void staticMethod() {
    };
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T09:57:42.947

**1.**`object` a 的一个`Non-static inner class`与`instance/object`它的一个`Outer Class`（即封闭类）相关联。

**2.** a的**整个主体** `Non-static inner class`不在**静态范围内**，因此您**不能在其中拥有静态成员。**

**3.** `Instance variables`与**封闭类的实例**`methods`相关`non-static inner class`，因此与对象相关，**静态对它们**（即内部类）不适用，

 ******4.** 当我们创建一个`Instance`of **non-static** `inner class`时，我们**需要**一个`Object of Outer enclosing class`. 内部有一个**对它的****隐式**引用。`non-static class`**`outer enclosing class`**

 ****例如：**

```
Outer o = new Outer();
Outer.Inner i = o.new Inner(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T11:11:35.240

从技术上讲，我不知道为什么该语言限制内部类使用静态元素的任何原因。可以通过使用将（以前）封闭实例作为构造函数的参数的普通类来模拟非静态内部类。当然，在可见性规则和可见性范围方面存在许多细微差别。

我认为这是一个语言设计决定，主要是因为非静态内部类中的静态变量令人困惑且访问起来不直观（Outer.Inner.StaticMember）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:24:56.293

在非静态内部类中提供静态方法是没有意义的。您可以在外部类中使用非静态方法吗？******

# excel - 自动创建文件夹和超链接

> ID：11684846
> 
> 赞同：0
> 
> 时间：2012-07-27T09:14:35.193
> 
> 标签：excel, vba

我正在尝试找出一种自动执行的方法

1.  创建一个文件夹，使用的名称 = A 列中的 excel 单元格值。
2.  自动创建指向此文件夹的超链接。

我的excel工作表上的过程如下

1.  在 C 列输入标题（例如：C1 值为 NAME）
2.  然后根据 A1 和 B1 的 CONCATENATE（固定内容列）自动填充单元格 A1（例如 NAME_1）

此时，我想实现上述目标 1 和 2，而不必每次都运行宏，并提供以下可交付成果：

1.  位于与我的工作簿所在目录相同的目录中的新文件夹。
2.  在 G 列中生成一个超链接（在我们的示例中，它将在 G1 中）。

到目前为止，我已经达到了

1.  我可以运行一个宏（在 A 列中的单元格上，或 A 列内的范围内），这将在正确的位置生成文件夹（和子文件夹）。这有效:-)
2.  然后，基于我的文件夹的名称 = 同一行/列 A 中的单元格值这一事实 - 我只需键入 =A(x) （在我们的示例 A1 中）并且我有一个宏可以自动将其转换为超链接正确的位置（组合 didcellchange --> 转换为超链接）。这也有效。

我无法将其提升到一个新的水平 - 我真正想做的是，一旦我在 C 列中输入标题，工作簿就会自动检测到 C 列的更改/数据输入，并且

1.  根据 COLUMN A 的连接条目创建一个文件夹
2.  创建到该文件夹​​的超链接。

可选的“锦上添花”是

1.  该宏实际上提供了一个选项来导航到应安装文件夹的位置。
2.  超链接自动更新到正确的位置（现在始终指向当前工作簿所在的位置 - Activeworkbook.path）/或者如果链接回复找不到指定位置的文件夹，则会打开浏览器窗口以更新到正确的文件夹位置

我怀疑这可能太复杂而无法实现。
如果有人可以提供帮助，我将非常感激 - 或者如果您确实认为我在这方面过于雄心勃勃，请告诉我。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:06:50.403

尝试这个：

1.  打开 VBA 编辑器
2.  双击 VBAProject 窗口中的 Sheet(Sheet1)（一直到左侧） - 或 - 选择 Sheet(WhateverYourSheetNameIsJustSelectIt)
3.  将以下所有代码粘贴到

    ```
    Public blnFolderFound As Boolean
    Option Explicit

    Private Declare Function GetUserName Lib "advapi32.dll" Alias "GetUserNameA" (ByVal lpBuffer As String, nSize As Long) As Long
    Function gUsername() As String
    Dim lngLen As Long
    Dim strBuffer As String
    Const dhcMaxUserName = 255
    strBuffer = Space(dhcMaxUserName)
    lngLen = dhcMaxUserName
       If CBool(GetUserName(strBuffer, lngLen)) Then gUsername = Left$(strBuffer, lngLen - 1)
    End Function

    Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    Dim endRow As Long
    Dim rng As Range, c As Range
    Dim currPath As String

    endRow = Cells(ActiveSheet.Rows.Count, 3).End(xlUp).Row ''Find end row in column C

    Set rng = Range(Cells(1, 3), Cells(endRow, 3)) ''check each used cell in column C
     For Each c In rng '' For each cell in range
       If c.Value <> vbNullString And c.Hyperlinks.Count = 0 Then  ''test to see if cell not empty and no hyperlink to speed loop up
     Cells(c.Row, 1).Value = Cells(c.Row, 3).Value & "_" & Cells(c.Row, 2).Value ''concatenate the two values

     ''Test to see if file exists and create on if it doesn't
      currPath = ThisWorkbook.Path
      If currPath = vbNullString Then currPath = "C:\Users\" & gUsername & "\Desktop" ''save folder to desktop if file isn't saved
        folderExists currPath, Cells(c.Row, 1).Value

       ''if the folder is found, move on to the next cell to check
       If blnFolderFound = True Then GoTo nextCellToCheck

       ''if the folder wasn't found and one was created in the folderExists function, add a hyperlink
        ActiveSheet.Hyperlinks.Add Anchor:=c, Address:=currPath & "\" & Cells(c.Row, 1).Value, TextToDisplay:=c.Value

        Else: End If
        nextCellToCheck:
        blnFolderFound = False
    Next c

    Set rng = Nothing

    End Sub

    Function folderExists(s_directory As String, s_folderName As String)
    Dim obj_fso As Object, obj_dir As Object, obj_folder As Object

    Set obj_fso = CreateObject("Scripting.FileSystemObject") '' create a filesystem object
    Set obj_dir = obj_fso.GetFolder(s_directory) ''create a folder object

    For Each obj_folder In obj_dir.SubFolders '' for each folder in the active workbook's folder
       If obj_fso.folderExists(s_directory & "\" & s_folderName) = True Then blnFolderFound = True: Exit For    ''see if the file exists
    Next

    If blnFolderFound = False Then obj_fso.CreateFolder (s_directory & "\" & s_folderName) ''if it doesn't exist create one

    Set obj_fso = Nothing
    Set obj_dir = Nothing

    End Function 
    ```

如果文件尚未保存，我添加了保存到用户桌面的条件。在 b 列中输入要连接的值，然后在 c 列中输入另一个值。您可能需要稍微修改一下以满足您的需求，但它应该让您指向正确的方向。

# php - PHP Regex 提取公制尺寸

> ID：11684848
> 
> 赞同：0
> 
> 时间：2012-07-27T09:14:49.077
> 
> 标签：php, regex, extract

我正在尝试从字符串示例中提取一些度量大小：

例子：

```
$s1=" foobar 10mm bar"              // 10mm
$s2=" foobar 10-300ml barbr"        // 10-300ml
$s3=" foobar 25 - 70 cm foo"        // 25-70cmm 
```

我该怎么做？

我试过这样：

```
$sizes_volume_distance_markers = array('mm','ml','l','cm');
static  $pattern_final_voldist;
    if(!$pattern_final_voldist)
    {
        $pattern_final_voldist =   implode("|",self::$sizes_volume_distance_markers);
    }

if(preg_match_all("/([\d.-]{1,4}[\s.-]{0,2}($pattern_final_voldist) {1,2})+/i",$str,$vvalues))
       {
              var_dump($vvalues);
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:18:02.320

它应该可以工作，在最后一个括号中添加其他后缀：

```
/(\d+\s+?\-\s+?)?(\d+)\s+?(mm|ml|cm)/gi 
```

用法：

```
$source=" foobar 10mm bar   foobar 10-300ml barbr  foobar 25 - 70 cm foo" 
preg_match_all("/(\d+\s+?\-\s+?)?(\d+)\s+?(mm|ml|cm)/i",$source, $results); 
```

如果您需要匹配浮点数，请改用：

```
/(\d+(\.\d+)?\s+?\-\s+?)?(\d+(\.\d+)?)\s+?(mm|ml|cm)/gi 
```

# java - 如何在java中停止客户端套接字以侦听服务器套接字

> ID：11684851
> 
> 赞同：0
> 
> 时间：2012-07-27T09:15:14.737
> 
> 标签：java, sockets, client-server

我正在通过在 java 中使用套接字来实现客户端服务器程序。我需要检查客户端是否在特定时间（例如：1 分钟）内连接到服务器。如果客户端套接字没有及时连接到服务器，我需要将消息显示为“服务器现在无法连接......请重试！” 给用户。

在这种情况下，我观​​察到客户端 scoket 正在侦听服务器套接字一段时间。那么您能否帮我设置客户端套接字等待服务器套接字的时间。

问候迷你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:30:05.480

要检查连接超时，请使用 Socket.connect(SocketAddress endpoint, int timeout) 要检查读取超时，请使用 Socket.setSoTimeout(int timeout)

# tfs - 我如何从 TFS2010 和 VS2010 开始？

> ID：11684857
> 
> 赞同：-1
> 
> 时间：2012-07-27T09:15:23.897
> 
> 标签：tfs

我这几天在学习TFS2010，有人说你可以创建区域和迭代来开始一个项目，我是否需要将解决方案放入这些区域以及如何做？有VS2010+TFS2010开发的源码吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:17:46.870

正如您在 MSDN 的链接中所见，[区域和迭代与解决方案没有直接关系（我认为您的意思是 VS - 解决方案）。](http://msdn.microsoft.com/en-us/library/dd997576.aspx)它们是组织你工作的方式。

[在这里你可以开始](http://blogs.msdn.com/b/jasonz/archive/2009/10/21/tutorial-getting-started-with-tfs-in-vs2010.aspx)[或在这里](http://msdn.microsoft.com/en-us/library/dd286491%28v=VS.100%29.aspx)

[在这里](http://coolthingoftheday.blogspot.de/2010/02/team-foundation-server-2010-work-item.html) 您可以找到 TFS 2010 工作项基本用户指南

[在这里，](http://www.codefest.at/post/2011/07/01/MSDN-Videos-uber-Visual-Studio-und-Team-Foundation-Server-2010.aspx)您可以找到大量不同类别的视频。

# java - 如何使用 Java 代码列出 JQuery 函数？

> ID：11684860
> 
> 赞同：-1
> 
> 时间：2012-07-27T09:15:30.443
> 
> 标签：java, jquery, jsf

我必须**使用 java 代码将我的列表传递给 JQuery 函数**，并且我们使用**JSF**作为框架那么如何传递列表？？？

谁能告诉我……提前谢谢……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:12:14.837

只需输入

```
#{yourBeanName.yourListVariableName} 
```

将此代码写入您不想通过列表的位置..

# ruby-on-rails - 向数据库添加新数据的最具可扩展性的方法？

> ID：11684862
> 
> 赞同：0
> 
> 时间：2012-07-27T09:15:37.290
> 
> 标签：ruby-on-rails, database, database-design, scalability

我有一个包含三个表的 Rails 网站：用户、任务和任务实例。Task 表就像任务的主列表，不与任何特定用户耦合，而 TaskInstance 表包含指示用户完成特定任务的记录。换句话说，TaskInstance 有一个 User id、一个 Task id 和一个完成状态（布尔值）。一个用户有许多任务实例。

我想允许管理员添加新任务。这样做应该为每个用户的该任务创建一个新的任务实例。然而，这听起来并不像它会很好地扩展。假设我有五万个用户，创建一个新任务需要立即在现场创建五万个 TaskInstance。

如果可以进行某种延迟加载会很好，但我不知道我会在哪里做。我可以在登录时进行，例​​如当用户登录时，检查是否创建了新任务；如果是这样，则仅为该特定用户创建一个新的 TaskInstance。但是，当新任务创建时已经登录的用户呢？

我想我只是想知道解决这类问题的首选方法是什么。

*如果需要，请将其移至社区 wiki。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:40:19.363

不要`TaskInstance`预先创建 s，而仅在需要时创建。由于`Task`无论如何都会创建一个新的，它可以显示给任何用户，无论是否有一个`TaskInstance`。一旦用户决定从 a 开始`Task`， 就`TaskInstance`应该被实例化。

# knockout.js - 淘汰赛：如果方法已被调用，则可见

> ID：11684863
> 
> 赞同：1
> 
> 时间：2012-07-27T09:15:41.603
> 
> 标签：knockout.js

我的 viewModel 上有一个方法，如下所示：

```
self.search = function () {
    $.ajax({
        url: "/api/SearchCustomers",
        data: { id: self.custTerm },
        type: "GET",
        success: function (data) {
            self.customers(data);
        }
    });
} 
```

如果该方法已使用 knockout`visible`属性调用，我想做的是显示一个元素。那可能吗？

我已经将该方法附加到一个按钮上，如下所示：

```
$(document).ready(function () {
    var viewModel = new SearchCustomerViewModel();
    ko.applyBindings(viewModel);
    $("#btnSearch").click({ handler: viewModel.search });
}); 
```

我试过了，但没有用：

```
<div data-bind="visible: search">
    <strong><span data-bind="text: customersToShow().length"></span></strong>
    <span data-bind="">customers</span> found.
    <p>
        <label>
            Exclude Closed Accounts:
            <input data-bind="checked: excludeClosedAccs" type="checkbox" /></label>
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:21:26.203

添加一个可观察的布尔值，并使用它来指示该方法是否已被调用：

```
self.methodTouched = ko.observable(false);
self.search = function () {
    $.ajax({
        url: "/api/SearchCustomers",
        data: { id: self.custTerm },
        type: "GET",
        success: function (data) {
            self.customers(data);
        }
    });
    self.methodTouched(true);
} 
```

进而：

```
<div data-bind="visible: methodTouched">
    <strong><span data-bind="text: customersToShow().length"></span></strong>
    <span data-bind="">customers</span> found.
    <p>
        <label>
            Exclude Closed Accounts:
            <input data-bind="checked: excludeClosedAccs" type="checkbox" /></label>
    </p>
</div> 
```

# javascript - 在 Wordpress 图像滑块中导致 JavaScript 冲突的插件

> ID：11684864
> 
> 赞同：0
> 
> 时间：2012-07-27T09:15:42.273
> 
> 标签：javascript, css, wordpress

我正在尝试在 Wordpress 网站上实现 cookie 警告插件。站点主题在主页上使用滑块，但激活插件会以三种方式破坏滑块：

1) 几秒钟后，它会在页面上弹出滑块图像，从而遮挡主导航菜单。

2) 过渡效果消失

3) 图片标题消失

这是它的外观：[http ://www.drivestart.co.uk](http://www.drivestart.co.uk)

这是一个显示冲突的模型： http: [//samcampsall.co.uk/DriveStart/](http://samcampsall.co.uk/DriveStart/)

我为 .nivoSlider 类隔离了一条规则，该规则`top: -74px;`可能是在 JScript 启动之后。我已将其设置为 0px，因此当页面加载时，图像滑块会出现在它应该在的位置下方，然后上升到“正确”的空间——不理想，但宜居。但是，这并不能解决其他更严重的问题。

我注意到，当它确实出现时，图像标题的样式规则会从`display:block`变为`display:none`。当正常运行时，JavaScript 会在幻灯片转换时隐藏标题，但随后会变回`display:block`. 它卡住的事实`display:none`可能是为什么过渡效果也不起作用并且整个东西同时跳到页面上的线索？

感谢对此的任何建议，我对 JavaScript 的了解基本上为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:21:12.863

您的 JavaScript 中有错误：

> jQuery.easing[jQuery.easing.def] 不是一个函数

```
 return jQuery.easing[jQuery.easing.def](x, t, b, c, d); 
```

修复此错误并查看您是否仍有问题是值得的。

# facebook - 如何在 FQL 查询中使用用户表的设备字段？

> ID：11684865
> 
> 赞同：1
> 
> 时间：2012-07-27T09:15:50.567
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我希望 FQL 查询的结果仅返回其设备列表中有 iOS 设备的用户的朋友。以下查询：

```
SELECT uid, first_name, devices 
FROM user 
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
ORDER BY profile_update_time DESC 
LIMIT 0, 100 
```

返回一个这样的列表：

```
{
  "data": [
    {
      "uid": 12345678, 
      "first_name": "John", 
      "devices": [
        {
          "os": "iOS", 
          "hardware": "iPhone"
        }
      ]
    },
    {
      "uid": 1234345678, 
      "first_name": "Pete", 
    }
} 
```

现在我只想检索至少拥有一台操作系统为“iOS”的设备的用户。我试过包括

```
devices.os = "iOS" 
```

在查询中，但这返回了错误。

这可以通过 FQL 查询实现吗？还是应该在客户端解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T12:24:23.470

刚刚发现这**是**可能的！您可以`IN`仅将运算符与`devices`列一起使用。无需限制操作系统或硬件。

*示例：所有拥有 iPhone 的朋友：* [试试看](https://developers.facebook.com/tools/explorer?fql=SELECT%20uid,%20name,%20devices%20FROM%20user%0AWHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29%0A%20%20AND%20%22iPhone%22%20IN%20devices%0AORDER%20BY%20profile_update_time%20DESC%20%0ALIMIT%200,%20100%0A%0A)

```
SELECT uid, name, devices FROM user
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
  AND "iPhone" IN devices
ORDER BY profile_update_time DESC 
LIMIT 0, 100 
```

*示例：所有拥有 iOS 设备（例如 iPhone 或 iPad）的朋友：* [试用](https://developers.facebook.com/tools/explorer?fql=SELECT%20uid,%20name,%20devices%20FROM%20user%0AWHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29%0A%20%20AND%20%22iOS%22%20IN%20devices%0AORDER%20BY%20profile_update_time%20DESC%20%0ALIMIT%200,%20100%0A%0A)

```
SELECT uid, name, devices FROM user
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
  AND "iOS" IN devices
ORDER BY profile_update_time DESC 
LIMIT 0, 100 
```

提示：如果您想使用此查询来构建自定义好友选择器，以向尚未安装您的 iOS 应用但拥有 iOS 设备的 Facebook 好友发送邀请，您希望在`WHERE`子句中包含以下内容：

```
AND is_app_user = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:26:04.427

这在服务器端似乎是不可能的。该`devices`字段作为数组返回，FQL 似乎没有任何可以搜索数组的方法。据我所知，探索这一点的唯一方法是在客户端。

# html - 画布图表填充线条之间的空间

> ID：11684869
> 
> 赞同：1
> 
> 时间：2012-07-27T09:16:06.470
> 
> 标签：html, canvas

我正在使用 html5 Canvas 开发一个简单的图表。这个想法是画两条线 - 一条用于最小值，另一条用于最大值，我设法做到并用一些颜色填充这两条线之间的空间。想知道最后一部分怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:06:40.800

填补你必须的空间：

```
//get the context of the canvas
var context = canvas.getContext("2d");
//begin to draw
context.beginPath();
//draw all the lines you need to do the path....
context.moveTo(x, y);
context.lineTo(x1,y1);
context.lineTo(x2,y2);
//end of draw
context.closePath();

//to fill the space in the shape
context.fillStyle = "#FF00FF";
context.fill(); 
//to draw a border
context.lineWidth = 5;     
context.strokeStyle = "#FF0000";
context.stroke(); 
```

更新：填充两行之间的空间，绘制一个正方形：

我假设这些行定义为：

```
line1: from (x1,y1) to (x2,y2)
line2: from (x3,y3) to (x4,y4) 
```

然后绘制正方形以填充空间：

> 从 (x1,y1) -> (x2,y2) -> (x3,y3) -> (x4,y4) 和 closepath()；

然后：

```
context.beginPath();
context.moveTo(x1,y1); //go to first point
context.lineTo(x2,y2); //draw to second point
context.lineTo(x3,y3); //draw to third point
context.lineTo(x4,y4); //draw to last point
context.closePath();  //draw to first point
context.fill(); //fill the area 
```

# google-maps - 目的 ＃ 没有方法“setCapture”

> ID：11684871
> 
> 赞同：5
> 
> 时间：2012-07-27T09:16:10.447
> 
> 标签：google-maps

在对某些 Google 地图代码进行更改后，每当我尝试单击并拖动地图时，都会出现以下错误：

> 未捕获的类型错误：对象 # 没有方法 'setCapture'

谷歌没有出现这个错误的结果，所以我想创建这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:33:24.520

你能显示你的代码吗？

最近我遇到了一个可能是你的错误。我正在这样做，在我的 javascript 代码中：

```
var components = $(".comp-div");

for ( var i = 0; i <= components .size(); i++) {
    components[i].css("width"));
} 
```

当您使用 [] 访问 jQuery 数组中的项目时，您得到的 DOM 元素不是 jQuery 对象，可能您正在执行此操作或类似的操作，因此它没有任何 jQuery 方法或任何`google-maps`方法。

我改为使用[.eq()](http://api.jquery.com/eq/)函数，请参见下一个示例：

```
var components = $(".comp-div");

for ( var i = 0; i <= components .size(); i++) {
    components.eq(i).css("width"));
} 
```

# c# - XML文档处理无法加载文件

> ID：11684875
> 
> 赞同：0
> 
> 时间：2012-07-27T09:16:39.367
> 
> 标签：c#, xml

我正在编写一个应用程序，我需要从 XML 文档中提取信息。

我的 XML 文档存储在我的项目 bin/Debug 文件中。

我无法让它工作。

名为 informationData 的 XML 文档：

```
<xml>
<information>
<name >stian</name>
<surname>Kruger</surname>
<tel>0825514302</tel>
<photo>1234JLJ.jpg</photo>
</information>
</xml> 
```

我的通话代码：

```
private void btnReadXML_Click(object sender, EventArgs e)
        {
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load("informationData.xml");

            XmlNodeList dataNodes = xmlDoc.SelectNodes("/information");

            foreach (XmlNode node in dataNodes)
            {
                Name = node.SelectSingleNode("name").InnerText;
                Surname = node.SelectSingleNode("surname").InnerText;
                TelNumber = Convert.ToInt32(node.SelectSingleNode("tel").InnerText);

            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T09:22:59.613

您的 XPath 选择器是错误的。代替：

```
XmlNodeList dataNodes = xmlDoc.SelectNodes("/information"); 
```

和：

```
XmlNodeList dataNodes = xmlDoc.SelectNodes("//information"); 
```

或与：

```
XmlNodeList dataNodes = xmlDoc.DocumentElement.SelectNodes("information"); 
```

还要确保 XML 文件与正在运行的可执行文件位于同一文件夹中（您说过`bin/Debug/informationData.xml`）。如果 XML 文件是 Visual Studio 项目的一部分，您可以选择它并在属性中设置`Copy to Output Directory`为`Copy if newer`. 这样，每次编译项目时，VS 都会自动将 XML 文件复制到此输出文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:19:05.827

您可以使用此代码

```
<?xml version="1.0" encoding="utf-8" ?> 
<information>
 <name >stian</name>
 <surname>Kruger</surname>
 <tel>0825514302</tel>
 <photo>1234JLJ.jpg</photo>
</information>

 var xmlDoc = XDocument.Load("informationData.xml");
 var name = xmlDoc.Element("name").Value;
 var surname = xmlDoc.Element("surname").Value;
 var telNumber = Convert.ToInt32(xmlDoc.Element("tel").Value); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T09:22:16.747

`<?xml version="1.0" encoding="utf-8"?>`在 XML 文件中添加为第一行

# playn - 如何为 PlayN HTML/DOM 渲染文本字符串

> ID：11684877
> 
> 赞同：1
> 
> 时间：2012-07-27T09:16:51.747
> 
> 标签：playn

我正在尝试使用 PlayN Showcase 应用程序中的方法绘制一些 txt：

```
`protected static Layer createTextLayer(TextLayout layout, int color) {
    CanvasImage image = graphics().createImage((int) Math.ceil(layout.width()), (int) Math.ceil(layout.height()));
    image.canvas().setFillColor(color);
    image.canvas().fillText(layout, 0, 0);
    return graphics().createImageLayer(image);
}` 
```

`它适用于 HTML/Canvas，但不适用于 HTML/Dom。`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:21:53.503

Try to use tripleplay (https://github.com/threerings/tripleplay). Maybe it will help.

```
Label label = new Label("MY LABEL");
Interface iface = new Interface();
Stylesheet rootSheet = Stylesheet.builder().create();
Root nameroot = iface.createRoot(AxisLayout.horizontal().gap(300), rootSheet);
nameroot.add(label);
nameroot.setSize(100, 30);
nameroot.setStyles(Styles.make(Style.HALIGN.left));
PlayN.graphics().rootLayer().add(nameroot.layer); 
````

# dynamics-crm-2011 - CRM 2011 过滤相关记录类型的视图

> ID：11684878
> 
> 赞同：1
> 
> 时间：2012-07-27T09:17:08.960
> 
> 标签：dynamics-crm-2011

我想为活动实体创建一个新视图。我的目标是只显示与某种类型的记录相关的活动，例如帐户。但是当我创建它时，我看到除了说它是否包含数据以及特定记录之外，没有实体类型的选项。

我可以理解为什么这不是列表中的一个选项，因为这不是人们真正需要做的事情，但这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:14:14.753

创建高级查找并指定以下条件：

*   寻找：活动
*   相关 > 关于（账户）

这将为您提供与帐户相关的所有活动。

# php - 如何在使用 phpunit-selenium 进行测试时获取全局变量

> ID：11684883
> 
> 赞同：1
> 
> 时间：2012-07-27T09:17:16.140
> 
> 标签：php, phpunit, selenium-ide

我在functions.php（phpbb）中有我的自定义函数testfunction_phpbb（），我想测试它。

```
function testfunction_phpbb()
{
global $user
...
...
...
//if valid user
return 1;
//else
return 0
} 
```

当我执行以下测试用例时，我发现 $user 总是为空（我没有得到全局上下文）。问题是当我在 phpbb、drupal、joomla 等中测试函数时。通过 phpunit+selenium 进行测试时如何获取上下文？

```
<?php
require_once './includes/functions.php';
class globaltest extends PHPUnit_Extensions_SeleniumTestCase
{
protected function setUp()
{
$this->setBrowser("*chrome");
$this->setBrowserUrl("http://localhost/");
}
public function testMyTestCase()
{
$this->open("/");
$this->click("link=phpBB3");
$this->waitForPageToLoad("30000");
$this->click("link=Login");
$this->waitForPageToLoad("30000");
$this->type("id=username", "admin");
$this->type("id=password", "admin123");
$this->click("name=login");
$this->waitForPageToLoad("30000");
$returnvalue = testfunction_phpbb();
PHPUnit_Framework_Assert::assertEquals('1',$returnvalue);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:48:26.360

正如您所发现的，全局变量会破坏单元测试。因此，它们不是一个好主意，普遍接受的解决方案是：

*   重写您的代码以使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，以便将 $user 变量作为参数传入（然后您可以传入一个假变量作为测试的一部分）
*   使用[PHPUnit 支持备份和模拟全局变量](http://sebastian-bergmann.de/archives/797-Global-Variables-and-PHPUnit.html)。

我通常会选择依赖注入方法，因为你会更容易使用它。但是，如果您使用的是框架，则可能会被全局变量卡住，因此第二个选项是您最好的选择。

# excel - 使用excel vba的函数的当前时间

> ID：11684888
> 
> 赞同：5
> 
> 时间：2012-07-27T09:17:26.387
> 
> 标签：excel, datetime, time, vba

在谷歌上搜索我找到了一个。是否可以使用 VBA 以 [h]:mm 格式格式化时间？

```
Dim currentTime As Date
currentTime = TimeOfDay 
```

当我转储数据时，我传入`currentTime`了数据库 - 显示 put put`00.00.00.000000` 不明白为什么它的显示不同？是否有任何其他功能可以调用当前时间`00.00 AM/PM`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T09:48:01.013

要将当前时间格式化为您的规格，请尝试

```
MsgBox Format(Now(), "hh:mm AMPM") 
```

# ruby-on-rails - 启动应用程序时的 Bundler::GitError

> ID：11684890
> 
> 赞同：0
> 
> 时间：2012-07-27T09:17:30.277
> 
> 标签：ruby-on-rails, ruby, rvm, bundler, rack-pow

在我的开发机器（mac）中，我正在运行

`pow 0.3.2` `rvm 1.14.5` `ruby 1.9.2p290` `Bundler version 1.0.21`

我最近将 rvm 升级到 1.14.5。当我尝试在[http://myapp.dev](http://myapp.dev)启动我的应用程序时，它给了我这个错误。

```
Bundler::GitError: git://github.com/collectiveidea/delayed_job.git (at v2.1.4) is not checked out. Please run bundle install 
```

delay_job 安装在 gemset 中。我不知道错误是来自 rvm 还是 pow

这是`Gemfile`声明依赖关系的行。

```
gem 'devise', :git => "git://github.com/plataformatec/devise.git", :ref => "v1.2.rc2" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:59:49.360

将 pow 更新到 0.4.0 并在 rails 项目中添加这个 .powrc 解决了这个问题。

```
if [ -f "$rvm_path/scripts/rvm" ] && [ -f ".rvmrc" ]; then
  source "$rvm_path/scripts/rvm"
  source ".rvmrc"
fi 
```

# c# - 如何将 ormlite 与 SQL Server 和 Mars 一起使用？

> ID：11684891
> 
> 赞同：3
> 
> 时间：2012-07-27T09:17:38.700
> 
> 标签：c#, dapper, sql-server-mars, ormlite-servicestack

ServiceStack 爱好者，你好！

我们是军团（我希望如此），所以请帮助兄弟:)

我正在尝试使用一个返回两个结果集的 SQL Server 2008 存储过程调用来填充两个集合。我的连接字符串中有“MultipleActiveResultSets=True”，但我仍然收到此错误：

> “r.NextResult()”引发了“System.InvalidOperationException”类型的异常

这是我的代码：

```
IList<ProjectMember> projectMembers = null;

IList<Project> projects = DbFactory.Run(dbCnx =>
{
     using (var dbCmd = dbCnx.CreateCommand())
     {
          dbCmd.CommandType = CommandType.StoredProcedure;
          dbCmd.CommandText = "mySchema.myStoredProc";
          dbCmd.Parameters.Add(new SqlParameter("@categoryId", categoryId));

          using (profiler.Step("ProjectService.myStoredProc"))
          {
              var r = dbCmd.ExecuteReader();
              projectMembers = r.ConvertToList<ProjectMember>();
              return r.NextResult() ? r.ConvertToList<Project>() : null;
          }
      }
 }); 
```

这可能吗？如果是这样，有人可以告诉我一个如何做到这一点的例子吗？

谢谢，

萨米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:24:02.010

我找到了一种方法，但我不得不用 Dapper 替换 ormLite：

```
 using(var cnx = DbFactory.CreateConnection(Global.ConnectionString))
            {
                using (var multi = cnx.QueryMultiple("mySchema.myStoredProc", new { communityId, categoryId }, commandType: CommandType.StoredProcedure))
                {
                    var projectMembers = multi.Read<ProjectMember>().ToList();
                    var projects = multi.Read<Project>().ToList();
                    BindProjectMembers(projects, projectMembers);

                    return projects;
                }
            } 
```

它运行良好，速度是 MARS 改进之前的两倍（从 40 毫秒到 20 毫秒）。

# xmpp - Facebook 聊天 (XMPP) XEP 0080 支持

> ID：11684892
> 
> 赞同：0
> 
> 时间：2012-07-27T09:17:39.963
> 
> 标签：xmpp, facebook-chat, x-facebook-platform

我正在使用原型测试程序检查 XMPP Facebook 聊天 X-FACEBOOK 的功能。使用带有 Gmail 服务器的 geoloc 消息 XEP 0080 效果很好，但是当我尝试通过 X-FACEBOOK 发送相同的 XML 结构时，它会修剪消息并删除 GeoLoc 节点。我想问是否有人知道是否可以在 X-FACEBOOK 中发送 XEP 0080 消息，如果可以，我应该使用什么结构，以便 Facebook Chat XMPP 服务器不会修剪 GeoLoc 信息。

发送 XMPP geoloc 消息：

```
<message to="-100002578491827@chat.facebook.com" from="4yony4@chat.facebook.com/19256ca9_4C5CC12947646" type="chat" xml:lang="en">
<event xmlns="http://jabber.org/protocol/pubsub#event">
     <items node="http://jabber.org/protocol/geoloc">
          <item id="">
              <geoloc xmlns="http://jabber.org/protocol/geoloc">
                   <lat>40.488137</lat>
                   <lon>-3.397623</lon>
                   <timestamp>2012-07-27 09:09:50 GMT</timestamp>
                   <msgType>0</msgType>
              </geoloc>
          </item>
      </items>
</event>
<body> 

</body> 
```

客户端收到的消息：

```
<message xmlns="jabber:client" from="-1177157556@chat.facebook.com" to="" type="chat">
    <active xmlns="http://jabber.org/protocol/chatstates"/>
 <body></body>
</message> 
```

任何解决方案或意见将不胜感激。

* * *

好吧，将 XML 更改为类似于您发布的那个，没有 pub sub，但仍然是同样的问题，接收者收到的消息缺少 GeoLoc 节点下的所有命名空间，我认为这是服务器不支持的结果格式。我可以尝试使用 IQ 订阅者选项，事情是我更喜欢找到一个可以直接将信息发送给用户的解决方案。如果有可能，即使是很小的一个，我也可以在 Facebook 服务器中从用户 A 向用户 B 发送有关 GeoLoc 的信息，这可能会有很大帮助，如果不是很好，我想我将不得不接受它。顺便说一句，谢谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:33:23.587

当我测试 facebook XMPP 连接时，它几乎不支持任何扩展并阻止服务器上的任何自定义标签。它能够发送基本的存在、基本的消息、电子名片，这就是它所能做的一切。

Pubsub 事件应该发送到服务。现代 XMPP 服务器也支持 PEP 扩展，您可以将 pubsub 发送到服务器本身。在其他情况下，请按照 Robin 的建议使用与目标用户的消息。

我不认为 facebook 有任何带有 pubsub 的服务器。另外我认为它仍然会过滤任何不受支持的命名空间。随意证明我错了，距离我上次测试它已经一年多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:08:56.177

这些不是同一个消息。

收到的消息只是用户聊天状态的指示器，如[XEP-0085](http://xmpp.org/extensions/xep-0085.html)中所定义，与您发送的消息没有直接关系。这并不意味着第一个没有潜在地触发第二个，您使用的任何库都可能在您发送消息时发送了聊天状态。这种类型的消息通常用于聊天客户端，表示您正在与之聊天的人正在输入消息。

问题可能在于您发送的消息实际上是[PEP 消息](http://xmpp.org/extensions/xep-0163.html)。这意味着由服务器中的 PEP 服务发送，而不是从客户端发送。我不知道 Facebook 是否支持 PEP，但我猜想由于您对已知名称空间的错误使用，它被过滤掉了。PEP 或 Pubsub 是发布地理位置信息的推荐方式，但要使用这些方式，您必须向服务发送 IQ 数据包，而不是向其他客户端发送消息。

试试这个（不是说它会起作用，但至少 pubsub 的东西被剥离了）：

```
<message to="-100002578491827@chat.facebook.com" from="4yony4@chat.facebook.com/19256ca9_4C5CC12947646" type="chat" xml:lang="en">
   <geoloc xmlns="http://jabber.org/protocol/geoloc">
      <lat>40.488137</lat>
      <lon>-3.397623</lon>
      <timestamp>2012-07-27 09:09:50 GMT</timestamp>
      <msgType>0</msgType>
   </geoloc>
   <body> 
   </body>
</message> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T21:37:57.053

我想要第二个 Pihhan。Facebook XMPP 服务器似乎将消息重组为仅包含消息正文、日期和时间戳。我认为他们这样做是为了使其与评论图对象保持一致。

这很烦人，但我怀疑这是故意的。毕竟，他们的 Graph 是主要问题，而不是 XMPP。

# css - CSS 过渡 - 仅在悬停时淡入淡出元素

> ID：11684895
> 
> 赞同：6
> 
> 时间：2012-07-27T09:17:45.633
> 
> 标签：css, css-transitions

是否有可能有一个 css 过渡，在悬停时淡入元素，但在鼠标离开时简单地隐藏元素。

即悬停在=淡入淡出0.5秒| 悬停=没有淡入淡出和瞬间

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T09:22:27.173

是的，您可以使用 CSS3 过渡来实现这一点。本质上，您的 CSS 应该如下所示：

```
#myLink {
    opacity: 0;
}

#myLink:hover {
    opacity: 1;
    -webkit-transition: all 0.2s ease-in-out;
    -moz-transition: all 0.2s ease-in-out;
    -o-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
} 
```

这是一个 jsFiddle 来演示：[Fiddle](http://jsfiddle.net/gqnGN/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T09:23:51.553

是的，只需`:hover`在链接而不是链接上设置转换 - [http://jsfiddle.net/spacebeers/X4ZqE/](http://jsfiddle.net/spacebeers/X4ZqE/)

（在小提琴中，链接位于“结果”框的左上角）

```
#main-menu li a {
    opacity: 0;
}

#main-menu li a:hover{
    opacity: 1;    
            transition: opacity 0.5s ease-in; /* vendorless fallback */
         -o-transition: opacity 0.5s ease-in; /* opera */
        -ms-transition: opacity 0.5s ease-in; /* IE 10 betas, not needed in final build. */
       -moz-transition: opacity  0.5s ease-in; /* Firefox */
    -webkit-transition: opacity 0.5s ease-in; /*safari and chrome */
}​ 
```

# android - Android Fragment 和方向更改导致：IllegalStateException: Can not perform this action after onSaveInstanceState

> ID：11684896
> 
> 赞同：11
> 
> 时间：2012-07-27T09:17:45.673
> 
> 标签：android, fragment, illegalstateexception

每当我加载了一个片段的主要活动并且用户启动一个新活动、切换设备的方向并返回到主要活动时，我都会收到此错误。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.home_layout);
    super.onCreate(savedInstanceState);
    fragmentManager = getSupportFragmentManager();
    fragment = fragmentManager.findFragmentById(R.id.layFragment);

    initialize();
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    setContentView(R.layout.home_layout);
    initialize();
    super.onConfigurationChanged(newConfig);
}

private void initialize() {
    layStatus = (LinearLayout) findViewById(R.id.layStatus);
    txtStatus = (TextView) findViewById(R.id.txtStatus);
    ....
    handleFragments(lastFragmentId);
}

public void handleFragments(int fragmentId) {
        if (fragment == null) {
            FragmentTransaction ft = fragmentManager.beginTransaction();
            if (fragmentId==someFragmentId){
                ft.replace(R.id.layFragment, new FragmentSomeFragment());
            }
            else
            ....

            ft.commit();
        }
} 
```

在我的 android 清单中，活动声明为：

```
 <activity
        android:name=".HomeActivity"
        android:configChanges="keyboardHidden|orientation" />
<activity 
```

在关于 SO 的另一个问题中，我发现这可能是由 Support 库中的一个错误引起的，我是否添加了任何运气：

```
// needed as a workaround for a bug in the Support library
@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putString("WORKAROUND_FOR_BUG_19917_KEY", "WORKAROUND_FOR_BUG_19917_VALUE");
    super.onSaveInstanceState(outState);
} 
```

我的应用程序从 android 2.2 运行，并且我正在使用 android-support-v4.jar 支持库来获取片段。

日志如下所示：

```
07-27 11:56:20.399: E/AndroidRuntime(16021): FATAL EXCEPTION: main
07-27 11:56:20.399: E/AndroidRuntime(16021): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1299)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1310)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:541)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:525)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at com.rightcab.driver.core.HomeActivity.handleFragments(HomeActivity.java:341)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at com.rightcab.driver.core.HomeActivity.initialize(HomeActivity.java:128)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at com.rightcab.driver.core.HomeActivity.onConfigurationChanged(HomeActivity.java:153)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3618)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.app.ActivityThread.handleActivityConfigurationChanged(ActivityThread.java:3771)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1328)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.os.Looper.loop(Looper.java:137)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at android.app.ActivityThread.main(ActivityThread.java:4745)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at java.lang.reflect.Method.invokeNative(Native Method)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at java.lang.reflect.Method.invoke(Method.java:511)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
07-27 11:56:20.399: E/AndroidRuntime(16021):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T09:47:59.620

首先，正如我所见，您想自己处理配置更改。为了让 API Level 13+ 正常工作，您必须向参数添加一个值，如此[处](https://stackoverflow.com/a/11631017/716075)`configChanges`所述。

接下来，当用户离开您的主要活动时，`onSaveInstanceState`会`onPause`为其调用方法。当用户旋转设备并回到您的主要活动时。`onConfigurationChanged`方法**之前** `onResume()`被调用。因此，您的活动仍处于暂停状态，您无法执行`FragmentTransaction`。

此外，如果我们查看源代码，我们可以看到以下`onResume`方法注释：

> 将 onResume() 分派到片段。请注意，为了更好地与旧版本的平台互操作，在此调用时，附加到活动的片段*不会* 恢复。这意味着在某些情况下，之前的状态可能仍然被保存，不允许修改状态的片段事务。要正确与处于正确状态的片段交互，您应该改写 {@link #onResumeFragments()}。

因此，在您的活动中操作片段的正确位置是覆盖`onResumeFragments`方法，正如我们可以在源代码中此方法的注释中看到的那样：

> 这是 {@link #onResume()} 的面向片段的版本，您可以覆盖它以在恢复其片段的同一点在 Activity 中执行操作。一定要经常打电话给超班。

```
protected void onResumeFragments() {
    super.onResumeFragments();

    // YOUR STUFF IS HERE
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T12:59:01.357

如果像[StenaviN](https://stackoverflow.com/a/11685339/726954)建议`onConfigurationChange()`的那样在 resume() 之前返回您的活动：

这是生命周期：

```
onCreate()
onResume()
// Move away from you're Activity
onPause()
// Move back to your Activity
onConfigurationChange()
onResume() 
```

但重要的部分是：

如果你恢复一个`Activity`或你改变`Orientation`一个`Activity`你`Fragments`会没事的！您不需要用新副本替换旧副本，事实上您不应该！如果您只是删除此行，则不会有问题：

```
handleFragments(lastFragmentId); 
```

**但是，**如果您这样做是因为您需要`Fragment`加载新的布局资源（`layout/frag.xml`=> `layout-land/frag.xml`），那么您将需要执行以下操作：

```
boolean mResumed = false;
onPause() {
    mResumed = false;
}

onResume() {
    mResumed = true;
} 

...

    if(mResumed) handleFragments(lastFragmentId); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:01:02.367

如果您坚持使用支持库的 r7 版本（例如，因为您正在使用 maven 并且急切地等待更新.. ;)），那么您可以使用`onPostResume`来避免这个问题。如果您的版本是 r11 或更高版本，则可以切换到`onResumeFragements`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T09:47:00.250

您使用的是最新版本的 support-v4 库吗？它解决了我的类似问题。

# c# - c# 日期范围之间的退款

> ID：11684897
> 
> 赞同：2
> 
> 时间：2012-07-27T09:17:47.717
> 
> 标签：c#, .net, sql, sql-server, linq

基本上我有一个以下帐户的发票行，如下所示：

```
BillID     AccountID     BilledFrom        BillTo      Days     Price
 38         3456         10/10/2012       10/11/2012    30       86p
 39         3456         11/11/2012       11/12/2012    30       87p
 40         3456         12/12/2012       30/12/2012    18       81p 
```

用户想为部分日期范围向客户退款，因此用户需要输入一个日期从和日期到日期：

```
Date From: 18/10/2012     DateTo: 14/12/2012 
```

这将导致信用额度在计算出每条线路的天数和价格后退还给客户。我需要返回每一行并显示截止点。如您所见，输入的范围跨越 3 个发票行。

需要的结果是：

```
BillID  AccountID  BilledFrom    BillTo     RangeStart  RangeEnd    Days  Price
 38       3456     10/10/2012   10/11/2012  18/10/2012  10/11/2012   22    86p
 39       3456     11/11/2012   11/12/2012  11/11/2012  11/12/2012   30    87p
 40       3456     12/12/2012   30/12/2012  11/11/2012  11/12/2012    2    81p 
```

结果基本上会带回最初的适用发票行，但会计算出该范围如何适合并根据输入日期范围的账单起始日期和账单截止日期计算天数。

我需要 SQL 中的一个函数来提供这个结果。任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:38:33.063

试试这个：

```
 declare @DateFrom date='10/18/2012'     
 declare @DateTo date='12/14/2012'

 select T.BillID,T.AccountID,T.BilledFrom,T.BillTo,
     case when BilledFrom<@DateFrom then @DateFrom else BilledFrom end [RangeStart], 
     case when BillTo<@DateTo then BillTo else @DateTo end [RangeEnd],DATEDIFF(D,case when BilledFrom<@DateFrom then @DateFrom else BilledFrom end ,case when BillTo<@DateTo then BillTo else @DateTo end ) [Days],Price
     from t_account  T 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/fcc7c/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:49:12.553

一个纯 T-SQL 答案如下（假设一个名为 InvoiceLine 的表具有文本中指定的列）：

```
declare @from datetime
declare @to datetime

set @from = '2012-10-18'
set @to = '2012-12-14'

select
    BillID, AccountID, BilledFrom, BillTo,
    case when datediff(d, @from, BilledFrom)>0 then BilledFrom else @from end [RangeStart],
    case when datediff(d, BillTo, @to)>0 then BillTo else @to end [RangeEnd],

    [days]
        +case when datediff(d, @from, BilledFrom)>0 then 0 else datediff(d, @from, BilledFrom) end
        +case when datediff(d, BillTo, @to)>0 then 0 else datediff(d, BillTo, @to) end [Days],
    Price
From InvoiceLine 
```

请注意，我在这里做了一些假设：

1.  示例输出中的最后一行是错误的 - 范围是 12/12/2012 到 14/12/2012（示例中的天数是正确的，但是 (2)。

2.  @from 必须小于 @to 才能使此代码正常工作 - 但无论如何您都应该检查一下。

3.  您希望这在 T-SQL 中完成。它不是很整洁，C# 在这方面要好得多（最小、最大方法和日期操作）。

# linux - 在 linux shell 中，如何按时间 cp/rm 文件？

> ID：11684898
> 
> 赞同：5
> 
> 时间：2012-07-27T09:17:53.990
> 
> 标签：linux, shell, time, cp, rm

在 linux shell 中，当我运行时

```
ls -al -t 
```

显示文件的时间。

如何按时间 cp/rm 文件？就像复制今天或昨天创建的所有文件一样。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T09:32:41.867

根据您实际想要执行的操作，`find`提供`-[acm]time`按访问、创建或修改日期查找文件的选项，以及`-newer`和`-min`。您可以将它们与`-exec`复制、删除或任何您想做的结合起来。例如：

`find -maxdepth 1 -mtime +1 -type f -exec cp '{}' backup \;`

将当前目录中超过 1 天的所有常规文件复制到该目录`backup`（假设该目录`backup`存在）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T09:30:44.343

简单示例

```
find /path/to/folder/ -mtime 1 -exec rm {} \; // Deletes all Files modified yesterday 
```

有关 bash 的更多示例，请谷歌查找时间 [或查看此处](http://www.linux.ie/newusers/beginners-linux-guide/find.php)

# java - 如何从Java中的soap响应中获取错误消息

> ID：11684899
> 
> 赞同：1
> 
> 时间：2012-07-27T09:18:00.603
> 
> 标签：java, web-services, jax-ws

我使用 Jax-ws Web 服务并使用来自 wsdl 的**wsimport (Java API) 生成客户端代码。**当我使用**SAOP UI**执行一个请求时，我得到了以下输出。

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://schemas.xmlsoap.org/soap/envelope/">
 <SOAP-ENV:Header/>
 <SOAP-ENV:Body>
  <SOAP-ENV:Error>Cannot create a new Goal for Receiver with Id : 3,as a Goal already exists </SOAP-ENV:Error>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我想使用**java**获取上述错误消息，因为它**没有出现在响应对象**中。我尝试使用**Binding Provider 但没有运气**。获得此消息的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:39:39.513

根据您使用的 WS 引擎，当发生 SOAP 故障时您将收到异常。然后，您将能够从该异常对象中获取消息。

# java - 如何将下拉菜单添加到 JTable 单元格

> ID：11684903
> 
> 赞同：15
> 
> 时间：2012-07-27T09:18:21.673
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

这可能是之前提出的问题。在这里发帖之前我搜索了很多，但找不到任何可以接受的。

有人可以告诉我如何做到这一点。当我单击单元格时，我只需要获得一个下拉菜单，以便我必须从中选择一个值（作为限制用户选择的一种方式）。

如果有人可以提供帮助，我相信它会帮助很多人。有很多类似的问题，但没有任何明确的答案。请回答更多细节。一个例子将不胜感激..

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T10:16:35.957

*   如果所有在具体的 TableColumn 中都具有相同的值，则将DefaultCellEditor[与 DefaultTableModel 一起用于 JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)`JComboBoxes`

*   如果将具有不同的值，则与自定义`DefaultCellEditor`一起使用`JComboBoxes``AbstractTableModel`

# sorting - extjs网格中的混合排序

> ID：11684905
> 
> 赞同：0
> 
> 时间：2012-07-27T09:18:25.857
> 
> 标签：sorting, extjs, types, grid

我想根据文本和数字对列进行排序。

我拥有的值是这样排序的：

```
- List:010
 - List:100
 - List:134
 - List:2
 - List:204 
```

但我需要的是

```
- List:2
 - List:010
 - List:100
 - List:134
 - List:204 
```

我使用的列类型是字符串。我尝试使用 sortType 但这不起作用。

```
{
            name: 'listItems',
            type: 'string',
            mapping: 'listItems'
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:56:59.243

如果您使用 ExtJS 4.x，您可以利用 SortTypes 类。

```
Ext.apply(Ext.data.SortTypes, {
    asPerson: function(person){
        // expects an object with a first and last name property
        return person.lastName.toUpperCase() + person.firstName.toLowerCase();
    }    
});

Ext.define('Employee', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'person',
        sortType: 'asPerson'
    }]
}); 
```

[有关SortTypes 文档页面的](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.data.SortTypes)更多信息。

# c# - 鼠标移动停止时显示工具提示

> ID：11684906
> 
> 赞同：0
> 
> 时间：2012-07-27T09:18:27.827
> 
> 标签：c#, .net, winforms, .net-4.0, tooltip

我有一个`grid-view`合并的单元格和行，看起来像这样。

![在此处输入图像描述](../Images/671b3e67ae5357b1a06b9573797a91d0.png)

我正在使用网格视图`mouse enter cell`和`mouse leave cell`事件来调用`tool-tip` `show`和`hide`方法。

我遇到的问题是，因为当我在网格上移动时，单元格非常接近工具提示。我想要实现的是仅在鼠标停止移动时才显示工具提示。

是否可以捕获鼠标的当前状态，我可以捕获鼠标移动与否。

我已经查看了[Control.MouseMove Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousemove%28v=vs.71%29.aspx)，但我可以使用它找到鼠标的当前状态。

***更新***

我确实尝试过这样的事情

在`MouseMove`gridview的情况下`tooltip.Hide()`

在 `MouseHoverCell` `tooltip.Show()`但没有运气

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:26:04.230

您在这里需要的是利用[`OnMouseHover`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onmousehover)和[`OnMouseMove`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onmousemove.aspx)事件。

`OnMouseHover`当鼠标停止移动时触发该事件。因此，在您的情况下，您可以在鼠标停止时触发此事件，拿起包含的单元格并显示您的工具提示。当`OnMouseMove`事件触发时，拆除工具提示并重新开始。

我希望这有帮助。

# android - 使用 WebIntent 插件发送电子邮件

> ID：11684907
> 
> 赞同：0
> 
> 时间：2012-07-27T09:18:29.973
> 
> 标签：android, cordova

我正在尝试使用 WebIntent 插件发送电子邮件，但发送失败。你能给我一个完整的例子，用 Android 发送带有 WebIntent 的电子邮件吗？

我还发现stackoverflow链接 [Phonegap webintent](https://stackoverflow.com/questions/11406917/phonegap-webintent)

在此之后，当我单击发送按钮时，它会显示一个选项来选择我喜欢如何发送电子邮件。然后我从选项中选择我的应用程序名称，然后我发现“不幸的是 app_name 已停止”。

有什么帮助吗？

-Arefin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:43:46.240

您必须使用 ACTION_SEND 从 Android 设备发送电子邮件。我向您展示一个发送电子邮件的示例：

```
Button btnSend = (Button) findViewById(R.id.btnSend);
btnSend.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        //obtenemos los datos para el envío del correo 
        EditText etEmail = (EditText) findViewById(R.id.etEmail);
        EditText etSubject = (EditText) findViewById(R.id.etSubject);
        EditText etBody = (EditText) findViewById(R.id.etBody);
        CheckBox chkAttachment = (CheckBox) findViewById(R.id.chkAttachment);
        Intent itSend = new Intent(android.content.Intent.ACTION_SEND);
        itSend.setType("plain/text");
        itSend.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ etEmail.getText().toString()});
        itSend.putExtra(android.content.Intent.EXTRA_SUBJECT, etSubject.getText().toString());
        itSend.putExtra(android.content.Intent.EXTRA_TEXT, etBody.getText());

        if (chkAttachment.isChecked()) {
            itSend.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.icon));

            itSend.setType("image/png");
        }

        startActivity(itSend);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T20:28:21.127

使用 Cordova 的 inappBrowser 制定意图[https://github.com/apache/cordova-plugin-inappbrowser](https://github.com/apache/cordova-plugin-inappbrowser)

我首先使用了 Webintent 插件，但我对此并不满意（仅适用于 android 并且非常慢），因此我使用了 inappbrowser。

电子邮件“Webintent”示例：

```
var strMailUriFormat= "mailto:<Mail>?subject=<Subject>&body=<BodyContent>  
window.open(strMailUriFormat,"_system","location=no"); 
```

它适用于 iOS 和其他操作系统。你可以做出其他意图来喜欢“tel”等。

玩得开心！

# java - 将 XML 从 Java 发送到 MSMQ - bodyType 从 VT_EMPTY 到 VT_BSTR

> ID：11684910
> 
> 赞同：0
> 
> 时间：2012-07-27T09:18:39.230
> 
> 标签：java, xml, msmq

我们在 Java (Java EE) 应用程序上工作，我们生成 XML 文件，以便将它们发送到远程 .NET 应用程序，同时读取 MSMQ。XML 文件由 JDom 生成，如下所示：

```
// add elements...

Document doc = new Document(root);      
String XmlData = new XMLOutputter(Format.getPrettyFormat().setOmitEncoding(true)).outputString(doc);

try {
        SendFile( XmlData, "title" , "path");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (MessageQueueException e) {
        e.printStackTrace();
    } 
```

然后我们使用这个函数，使用[MsmqJava 库](http://msmqjava.codeplex.com/)发送文件：

```
private void SendFile(String data, String title, String outputPath) throws UnsupportedEncodingException, MessageQueueException{
    String qname="name_of_the_queue";
    String fullname= "server_path" + qname;
    String body = data;
    String label = title;
    String correlationId= "L:none";

    try {
        Queue queue= new Queue(fullname);
        Message msg= new Message(body, label, correlationId);
        queue.send(msg);
            } catch (MessageQueueException ex1) {
           System.out.println("Put failure: " + ex1.toString());
       }
} 
```

他们正确接收了文件，但他们告诉我们 bodyType 设置为“VT_EMPTY”，而他们想要“VT_BSTR”，我们还没有找到有关如何解决此问题的线索。如果您知道另一个可以完成这项工作的库，或者该库的解决方法，我们可以毫无问题地进行更改。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:32:43.957

查看您使用的库的文档，无法使用该库。

Jmsmqqueue 也没有提供您需要的功能。

似乎 sun 也有一个适配器：[https ://wikis.oracle.com/display/JavaCAPS/Sun+Adapter+for+MSMQ](https://wikis.oracle.com/display/JavaCAPS/Sun+Adapter+for+MSMQ)

# recursion - mako 模板递归：AttributeError：“未定义”对象没有属性“id”

> ID：11684912
> 
> 赞同：1
> 
> 时间：2012-07-27T09:18:47.910
> 
> 标签：recursion, undefined, mako, python-3.2

我制作了一个表示树结构的模板。树的每个节点都有一个 id、一个名称、一个子节点列表 (tree_children) 和一个扩展属性。

我在树结构中排列了几个节点，然后用根节点调用以下函数：

```
def print_tree_info(oCat, iOffset=0):
    """
    just for testing purposes. print to console
    """
    sOffset = '   '*iOffset
    if oCat.expanded:
        sButton = '-'
    else:
        if oCat.tree_children:
            sButton = '+'
        else:
            sButton = '.'
    print("{0}{1}{2}".format(sOffset,sButton,oCat.name))
    if oCat.expanded:
        for oChild in oCat.tree_children:
            print_tree_info(oChild,iOffset+1) 
```

它打印了

```
-ROOT_NODE
   +major1
   .base2 
```

这很棒。

现在，将相同的节点结构传递给 mako 模板（连同 mako 模板本身）的渲染函数，我得到属性错误。

这是我渲染模板的方式：

```
template = Template(..........)
html = template.render(category=root_node, item_template=template) 
```

这是模板

```
%if category is UNDEFINED:
ERROR
%elif category:
<div class="tree_item"  category_id="${category.id}">
%if category.expanded:
    <a class="collapse_tree_item"  category_id="${category.id}">-</a>
%elif category.tree_children:
    <a class="expand_tree_item" category_id="${oCategory.id}">+</a>
%endif
<a class="select_tree_item">${category.name}</a>
%if category.expanded:
    %for oChild in category.tree_children:
          ${item_template.render(category=oChild,item_template=item_template)}
    %endfor
%endif
</div>
%endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:16:01.130

```
<a class="expand_tree_item" category_id="${oCategory.id}">+</a> 
```

应该

```
<a class="expand_tree_item" category_id="${category.id}">+</a> 
```

经验教训：在命名约定中保持一致。

# c# - 在 Child 中声明一个可以接受任意类型参数的基类方法

> ID：11684917
> 
> 赞同：0
> 
> 时间：2012-07-27T09:19:11.303
> 
> 标签：c#, initialization

在 C#...

我正在设计一个基类（不能为此使用构造函数），并且我想强制任何继承类实现一个方法来初始化它们各自的对象。我可以预期他们的初始化方法可以采用**任意**数量和类型的参数。

我将如何在基础中声明这个抽象方法，以便孩子可以实现它的任何参数变体？如果不可能，您能否提出替代方案？谢谢你。

更新细节：基类应该是抽象的，我需要一个方法来充当构造函数（但我不能使用构造函数来做）。子类需要一种方法来初始化自己，我希望用我自己的（抽象？）方法强制实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:51:11.820

我认为可以在您的基类中尝试此代码

```
 public abstract void Test(params object[] list); 
```

现在它将强制在子类中声明方法。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:53:32.230

In addition, you can use [new Modifier](http://msdn.microsoft.com/en-us/library/435f1dw2%28v=vs.80%29.aspx) to hide explicitly the same name methods, fields, ... of derived class

.NET framework 4.0 provide optional parameters and name arguments to deal with a various type of parameters [Named and Optional Arguements](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

# javascript - 在荧光笔 jqplot 中显示点标签

> ID：11684919
> 
> 赞同：2
> 
> 时间：2012-07-27T09:19:27.020
> 
> 标签：javascript, hover, label, jqplot, jqplot-highlighter

我在图表上有很多只有两个点的系列来模拟时间线。这些点有一个点标签。我想在荧光笔中显示该点标签的名称。我怎么做？

请看我的 JsFiddle [http://jsfiddle.net/NVbjv/8/](http://jsfiddle.net/NVbjv/8/)

我试图为每个系列添加一个荧光笔对象，并给它一个格式字符串。但是我怎样才能让它更有活力呢？

我也喜欢只在右下角的悬停框里显示时间。如何删除“,1”和“,2”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:44:49.243

我想到的唯一想法是使用荧光笔和光标工具提示的自定义处理。与此处介绍的内容类似[。](https://stackoverflow.com/a/11435487/613495)

在您的情况下，您将应用以下代码：

```
$("#container").bind('jqplotMouseMove', function(ev, gridpos, datapos, neighbor, plot) {
    var date = new Date(datapos.xaxis);
    var time = "" + (date.getHours() < 10 ? "0" + date.getHours() : date.getHours()) + ":" + (date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes());
    $(".jqplot-cursor-tooltip").html(time + "  Oi");
    if (neighbor) {
        $(".jqplot-highlighter-tooltip").html("Label name= " + neighbor.data[2] + ";  time= " + time);
    }
}); 
```

[工作代码示例可在此处获得。](http://jsfiddle.net/NVbjv/15/)

* * *

**编辑：** 在 Chrome 中，我注意到 null 被打印出来，`pointLabels`因此使用空字符串代替它们的值。

# java - 在多线程中分别杀死线程，尽管 cpuutilization 更大

> ID：11684928
> 
> 赞同：-2
> 
> 时间：2012-07-27T09:19:50.053
> 
> 标签：java, multithreading, cpu-usage

我已经创建了具有 tcp/ip 协议和 http 的计费接口，因此对于 tcp/ip 协议，我创建了多线程并在要求结束后安全地杀死线程，但由于这个原因，我认为 cpu 利用率要高得多任何人都可以指导我。cpu使用率高的原因是什么？提前致谢，如何解决？我是新手！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:28:40.817

如果您想调查高 CPU 使用率，我建议您使用 CPU 分析器。VisualVM 中有一个免费的。在了解应用程序的使用情况时，您必须对其进行测量，否则您只是在猜测。

# java - 根据 vcard 3.0 格式，用于 75 个字符行的 java base64 编码器

> ID：11684931
> 
> 赞同：4
> 
> 时间：2012-07-27T09:20:02.363
> 
> 标签：java, base64, vcf-vcard

根据 VCard 3 格式的 RFC 2426，[http](http://www.ietf.org/rfc/rfc2426.txt) ://www.ietf.org/rfc/rfc2426.txt （第 2.4.1 节）

> 长行的编码二进制数据应该使用 [MIME-DIR] 中定义的折叠方法折叠为 75 个字符。

但是，根据 mime 规范（即 commons、migbase64 等），我看到的每个编码器都折叠为 76 个字符，并且我发现允许指定行长的编码器提到“行长应该是 4 的倍数”。

是否有允许以 75 个字符折叠的 java 库？老实说，我应该担心“应该”而不是“必须”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:26:49.603

看了一圈base64编码器后，我又回到了rfc，经过一番重新思考，我认为base64编码器不需要折叠线。

当它谈到数据的 base64 编码时，它提到了折叠：

```
2.4.1 BINARY
[...]Long lines of encoded binary data SHOULD BE folded to 75 characters
using the folding method defined in [MIME-DIR] 
```

*然后在 2.6 中再次*提到折叠

 *```
2.6 Line Delimiting and Folding
[...]   After generating a content line,
lines longer than 75 characters SHOULD be folded according to the
folding procedure described in [MIME DIR]. 
```

内容行定义为

```
contentline  = [group "."] name *(";" param ) ":" value CRLF 
```

（重要的是它是“全线”而不仅仅是折叠的值）

在查看 2.4.1 时，它暗示二进制编码应该折叠行，但这似乎与内容行折叠本身（2.6）竞争。

*如果同时*应用了二进制数据折叠和行折叠，那么会发生“双重折叠” *，我认为这不是有意的*。（因为我知道有些人会提到这些例子不是 75 个字符长.. 假装它们是 .. 谢谢）即

```
PHOTO;ENCODING=b;TYPE=JPEG:MIICajCCAdOgAwIBAgICBEUwDQY <= line folded
MIICajCCAdOgAwI   <=folded at 75 binary chars as per binary folding
kU6NuaJR+E9lJd8ux9JpuV8QS+w3wNThZJ9Tb2HNBr1B+GNO9fi75e  <= line folded
[...] 
```

更合理的解释是预期的输出是：

```
PHOTO;ENCODING=b;TYPE=JPEG:MIICajCCAdOgAwIBAgICBEUwDQY <=folded as per line folding
MIICajCCAdOgAwIkU6NuaJR+E9lJd8ux9JpuV8QS+w3wNThZJ9Tb2H <=folded as per line folding
NBr1B+GNO9fi75e[...] 
```

我相信 2.4.1 基本上只是重申了 2.6 的文件夹要求，如果正确则意味着不需要 75 行的 base64 编码器，因为 vcard 本身的基本行折叠将达到预期的结果。

因此，除非被证明是错误的，否则我现在将采用这种解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:47:09.283

我不认为折叠线长度真的很重要。你可能完全不折叠你的线条而侥幸逃脱。但是规范推荐了它，因此可能有一些应用程序期望这些线被折叠。

如果您不想使用默认的 75 个字符，[ez-vcard允许您手动定义每行的最大长度。](http://code.google.com/p/ez-vcard)

```
VCard vcard = new VCard();

byte[] photoBytes = ...
PhotoType photo = new PhotoType(photoBytes, ImageTypeParameter.JPEG);
vcard.addPhoto(photo);

Writer writer = ...
VCardVersion version = VCardVersion.V3_0;
FoldingScheme foldingScheme = new FoldingScheme(76, " ");
VCardWriter vcr = new VCardWriter(writer, version, foldingScheme);
vcr.write(vcard);
vcr.close(); 
```

关于您提到的“双重折叠”，您的假设是正确的。这不是二进制数据的折叠方式。首先，将二进制数据转换为base64，然后折叠base64字符串。

此外，请记住所有折叠行必须以至少一个空格字符开头。在下面的示例中，请注意第二行和第三行如何以空格开头。

```
PHOTO;ENCODING=b;TYPE=JPEG:MIICajCCAdOgAwIBAgICBEUwDQY
 MIICajCCAdOgAwIkU6NuaJR+E9lJd8ux9JpuV8QS+w3wNThZJ9Tb2
 NBr1B+GNO9fi75e 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:28:45.577

我为 XML-RPC 客户端编写了 base64 编码/解码。你可以在[github](https://github.com/timroes/aXMLRPC/blob/master/src/main/java/de/timroes/base64/Base64.java)上找到它。它在 MIT 下获得许可，所以你可以把这个类拿出来并在你的项目中使用它。要调整线宽，您只需编辑[第 111 行](https://github.com/timroes/aXMLRPC/blob/master/src/main/java/de/timroes/base64/Base64.java#L111)。

我不知道你是否必须或应该坚持线路长度，但既然你可以坚持，我会这样做:)*

# c++ - 将向量中的 wchar 字符串与其他指定的 wchar 字符串进行比较

> ID：11684933
> 
> 赞同：0
> 
> 时间：2012-07-27T09:20:08.260
> 
> 标签：c++, c, vector, bluetooth, wchar

**@pmr**：看下面的代码

**@singeroftheall**：我对这两件事都有问题。插入和搜索。我认为搜索部分已经完成。现在如何在向量中插入我的 mac 地址？我的地址保存在变量 m_device_info.Adress.rgBytes[]; 见下文。

```
 wprintf(L"\t\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\r\n", m_device_info.Address.rgBytes[0], m_device_info.Address.rgBytes[1], m_device_info.Address.rgBytes[2], m_device_info.Address.rgBytes[3], m_device_info.Address.rgBytes[4], m_device_info.Address.rgBytes[5]); 
```

可以混合使用 C 和 C++ 语言吗？因为向量输出是在 c++ 中？

==================================================== ================================ 我写了一个代码，它显示了所有可用的蓝牙设备。我只想`wchar`将可用设备的所有 MAC 地址（类型：）保存在向量列表中。之后我想搜索一个指定的`wchar`，如果它在向量列表中。

我不是 c/c++ 的专业程序员，只需要这个来比较东西进行演示，看看我的想法是否有效。如果有人可以帮助我，我会非常高兴和高兴。我还搜索了谷歌并写了其他常见问题解答，但没有找到对我有帮助的好的解决方案。

**搜索设备的代码：**

```
#include "stdafx.h"
#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <winsock2.h>
#include <bthdef.h>
#include <BluetoothAPIs.h>
#include <iostream>
#include <vector>

using namespace std;
#pragma comment(lib, "Irprops.lib")

BLUETOOTH_FIND_RADIO_PARAMS m_bt_find_radio = {
    sizeof(BLUETOOTH_FIND_RADIO_PARAMS)
};

BLUETOOTH_RADIO_INFO m_bt_info = {
    sizeof(BLUETOOTH_RADIO_INFO),
    0
};

BLUETOOTH_DEVICE_SEARCH_PARAMS m_search_params = {
    sizeof(BLUETOOTH_DEVICE_SEARCH_PARAMS),
    1,
    0,
    1,
    1,
    1,
    15,
    NULL
};

BLUETOOTH_DEVICE_INFO m_device_info = {
    sizeof(BLUETOOTH_DEVICE_INFO),
    0
};

HANDLE m_radio = NULL;
HBLUETOOTH_RADIO_FIND m_bt = NULL;
HBLUETOOTH_DEVICE_FIND m_bt_dev = NULL;

int wmain(int argc, wchar_t **args) {
    while(true) {
        m_bt = BluetoothFindFirstRadio(&m_bt_find_radio, &m_radio);
        int m_radio_id = 0;
        do {
            m_radio_id++;

            BluetoothGetRadioInfo(m_radio, &m_bt_info);

            wprintf(L"Radio %d:\r\n", m_radio_id);
            wprintf(L"\tName: %s\r\n", m_bt_info.szName);
            wprintf(L"\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\r\n", m_bt_info.address.rgBytes[1], m_bt_info.address.rgBytes[0], m_bt_info.address.rgBytes[2], m_bt_info.address.rgBytes[3], m_bt_info.address.rgBytes[4], m_bt_info.address.rgBytes[5]);
            wprintf(L"\tClass: 0x%08x\r\n", m_bt_info.ulClassofDevice);
            wprintf(L"\tManufacturer: 0x%04x\r\n", m_bt_info.manufacturer);

            m_search_params.hRadio = m_radio;

            ::ZeroMemory(&m_device_info, sizeof(BLUETOOTH_DEVICE_INFO));
            m_device_info.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);

            m_bt_dev = BluetoothFindFirstDevice(&m_search_params, &m_device_info);

            vector <string> macadresse;
            int n;
            int m_device_id = 0;
            do {
                m_device_id++;
                wprintf(L"\tDevice %d:\r\n", m_device_id);
                wprintf(L"\t\tName: %s\r\n", m_device_info.szName);
                wprintf(L"\t\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\r\n", m_device_info.Address.rgBytes[0], m_device_info.Address.rgBytes[1], m_device_info.Address.rgBytes[2], m_device_info.Address.rgBytes[3], m_device_info.Address.rgBytes[4], m_device_info.Address.rgBytes[5]);
                wprintf(L"\t\tClass: 0x%08x\r\n", m_device_info.ulClassofDevice);

                //devicemc[m_device_id]= m_device_info.Address.rgBytes[0], m_device_info.Address.rgBytes[1], m_device_info.Address.rgBytes[2], m_device_info.Address.rgBytes[3], m_device_info.Address.rgBytes[4], m_device_info.Address.rgBytes[5];
                //macadresse.push_back(string (&m_device_info.Address.rgBytes[0], &m_device_info.Address.rgBytes[1], &m_device_info.Address.rgBytes[2], &m_device_info.Address.rgBytes[3], &m_device_info.Address.rgBytes[4], &m_device_info.Address.rgBytes[5]));

            } while(BluetoothFindNextDevice(m_bt_dev, &m_device_info));
            BluetoothFindDeviceClose(m_bt_dev);

        } while(BluetoothFindNextRadio(&m_bt_find_radio, &m_radio));
        BluetoothFindRadioClose(m_bt);
        Sleep(10000);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:34:11.343

首先： a 中的字符`string`不是类型`wchar`，而是`char`。你可能需要一个`vector<wstring>`. `wstring`在 a 中搜索一些`vector`：

```
#include <algorithm>
#include <vector>
#include <string>
using namespace std;

vector<wstring> vec;
// insert something
vec.push_back(wstring("my_string"));

// search something
vector<wstring>::iterator it = std::find(vec.begin(), vec.end(), wstring("needle"));
if(it != vec.end()) {
  cout << "Found it" << '\n';
} else {
  cout << "Not found" << '\n';
} 
```

# c# - 在返回视图之前获取 NancyResponse 内容正文

> ID：11684935
> 
> 赞同：2
> 
> 时间：2012-07-27T09:20:12.330
> 
> 标签：c#, nancy

是否可以在返回视图之前获取 NancyResponse 主体？

我的意思是：

```
Get["/"] = x => {
                var x = _repo.X();
                var view = View["my_view", x];
                **//here I want to send the response body by mail**
                return view;
            }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:26:01.850

> **小心！**这个答案基于 nancy 版本**0.11**，从那时起发生了很多变化。路线中的版本应该仍然有效。如果您使用内容协商，则不是后续管道中的那个。

您可以将内容写入路由中的内存流，也可以将委托添加到 After Pipeline：

```
public class MyModule: NancyModule
{
    public MyModule()
    {
        Get["/"] = x => {
            var x = _repo.X();
            var response = View["my_view", x];
            using (var ms = new MemoryStream())
            {
                response.Contents(ms);
                ms.Flush();
                ms.Position = 0;
                //now ms is a stream with the contents of the response.
            }
            return view;
        };

        After += ctx => {
           if (ctx.Request.Path == "/"){
               using (var ms = new MemoryStream())
               {
                   ctx.Response.Contents(ms);
                   ms.Flush();
                   ms.Position = 0;
                   //now ms is a stream with the contents of the response.
               }
           }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:20:26.983

`View[]`返回一个`Response`对象并具有`Content`该类型的属性，`Action<Stream>`因此您可以将 a 传递`MemoryStream`给委托，它将在该流中呈现视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T09:20:14.000

我使用 Nancy 0.17 版，@albertjan 解决方案基于 0.11。感谢@TheCodeJunkie，他向我介绍了`IViewRenderer`

```
public class TheModule : NancyModule
{
    private readonly IViewRenderer _renderer;

    public TheModule(IViewRenderer renderer)
    {
           _renderer = renderer;

           Post["/sendmail"] = _ => {

                string emailBody;
                var model = this.Bind<MyEmailModel>();
                var res = _renderer.RenderView(this.Context, "email-template-view", model);

                using ( var ms = new MemoryStream() ) {
                  res.Contents(ms);
                  ms.Flush();
                  ms.Position = 0;
                  emailBody = Encoding.UTF8.GetString( ms.ToArray() );
                }

                //send the email...

           };

    }
} 
```

# javascript - 如何将 jquerymobile Web 应用程序方向修复为横向

> ID：11684937
> 
> 赞同：0
> 
> 时间：2012-07-27T09:20:32.660
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

如何将我的 jquerymobile Web 应用程序方向修复为横向。我的应用程序在横向模式下看起来很完美，所以我非常想以横向模式显示应用程序。如果用户旋转设备，则应用程序显示模式不应更改为纵向。

我该怎么做。任何网络链接或源代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:29:09.010

你可以试试这个。希望它是有用的。没试过。

[链接到其他主题](https://stackoverflow.com/questions/4806938/is-there-a-way-to-force-horizontal-landscape-layout-on-mobile-devices)

# .net - 是否有可能 包含设置并参考另一个 部分在不同的文件？

> ID：11684940
> 
> 赞同：10
> 
> 时间：2012-07-27T09:20:39.007
> 
> 标签：.net, visual-studio-2010, app-config

我是否可以`<appSettings />`在我的 app.config 中有一个包含许多设置的部分，但它也引用`<appSettings />`了不同文件中的一个部分？

这将允许我保留只有开发人员应该感兴趣的配置选项，例如在主窗口上显示调试输出的选项（非常混乱但对我有用）或将某些文件保存到特定位置。

具体来说，这就是我想要实现的目标：

```
<!-- this is the appSettings section of the normal app.config file,
     which also contains everything else that app.config would -->
<appSettings configSource="AppSettings.config"> <!-- references another file -->
  <add key="deployment_config_option1" value="1"/>
  <add key="deployment_config_option2" value="2"/>
</appSettings>

<!-- this a new appSettings section of another file called DevSettings.Config
     which only contains settings us developers are interested in
     by keeping these settings in a different file, 
     I can ensure it's never deployed -->
<appSettings> <!-- references another file -->
  <add key="show_debug_on_screen" value="true"/>
  <add key="save_copy_to_desktop" value="false"/>
</appSettings> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T21:06:52.517

**是的。**考虑到可能的场景数量，该[文档](http://msdn.microsoft.com/en-us/library/ms228154%28v=vs.85%29.aspx)有些薄，但根据下面的引用，仅在 appSettings 标签的情况下存在合并。

> [由于对 Web.config 文件的任何更改都会导致应用程序重新启动，因此使用单独的文件允许用户修改 appSettings 部分中的值，而不会导致应用程序重新启动。**单独文件的内容**与 Web.config 文件中的 appSettings 部分合并。此功能仅限于 appSettings 属性。]

在 ASP.NET 的情况下对此（如下）的测试表明它可以使用`<add>`标签。在从属文件中使用诸如标签之类的更高级的东西`<clear>`显然会出现问题，尽管我没有测试这种边缘情况。不会说 ASP 以外的部署技术；Machine.Config 也没有经过测试。

在 web.config 文件中：

```
 <appSettings file="_config\AppSettings.Config">
            <add key="testing-1" value="Web.Config" />
    </appSettings> 
```

在“_config\AppSettings.config”文件中：

```
 <appSettings>
            <add key="testing-2" value="_config/AppSettings.config" />
    </appSettings> 
```

# html - 如何根据 Web SQL 中的搜索条件返回表的行数？

> ID：11684943
> 
> 赞同：0
> 
> 时间：2012-07-27T09:20:59.133
> 
> 标签：html, web-sql

我创建了一个名为 todo 的数据库，其表名 todo 具有标题、日期等字段。该表现在是空的。

我定义了一个以标题为参数的函数，并检查表是否包含该标题。

它应该返回行数。

获取标题功能：

```
todo.webdb.GetTitle = function(title) {
    var db = todo.webdb.db;
    db.transaction(function(tx){
      tx.executeSql("SELECT title FROM todo WHERE title=?", [title],
          loadTitle,
          todo.webdb.onError);
      });
  } 
```

加载标题功能：

```
function loadTitle(tx, rs) {
    return rs.rows.length;
  } 
```

调用 GetTitle 函数：

```
row=todo.webdb.GetTitle("Hello");
alert(row); 
```

我得到警报`'undefined'`它应该返回`0`

我现在很困惑如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:43:49.677

我认为事务是异步的，所以你需要回调函数来接收值。

```
todo.webdb.GetTitle = function(title, callback) {
    var db = todo.webdb.db;
    db.transaction(function(tx){
          tx.executeSql("SELECT title FROM todo WHERE title=?", [title],
              (function loadTitle(tx, rs){
                    callback( rs.rows.length );
              }),
              todo.webdb.onError);
      });
} 
todo.webdb.GetTitle( "Hello", function(count){
    alert( "count = " + count );
}); 
```

这是一个很好的教程以获取更多信息。

[http://blog.darkcrimson.com/2010/05/local-databases/](http://blog.darkcrimson.com/2010/05/local-databases/)

## 更新

出于这个主要原因，不要在循环内创建函数。

两者`i`和`title`都引用了在本地范围之外创建的值。`i`因此分配给两者的最后一个值`title`将显示出来。

```
for (i = 0; i < itemcount; i++) {
    alert('i outside if:' + i);
    var title = x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue;

    todo.webdb.GetTitle( title, function (count) {
        if (!count) {
            alert('i inside if:' + i);
            alert( title ); 
        }
    });
} 
```

修复：生成一个将值锁定在闭包中的函数。

```
var createTitleCallBack = function( i, title ){
    return function (count) {
        if (!count) {
            alert('i inside if:' + i);
            alert( title ); 
        }
    };
};
for (i = 0; i < itemcount; i++) {
    alert('i outside if:' + i);
    var title = x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue;

    todo.webdb.GetTitle( title, createTitleCallBack( i, title ) );
} 
```

# sql-server - SQL Server：内部联接和分组依据

> ID：11684948
> 
> 赞同：1
> 
> 时间：2012-07-27T09:21:23.847
> 
> 标签：sql-server, tsql

我有一个查询，计算电话接线员每天的查询次数

```
SELECT 
   [OperatorID],
   DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate,
   COUNT(*) AS EnquiryCount
FROM 
   [Enquiries] AS e
GROUP BY 
   [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) 
```

但是，我想将`Operator`表添加到此查询中，以便检索操作员名称

```
SELECT [OperatorID]
  ,[FirstName]
  ,[LastName]
FROM [Operators] 
```

如果我在 group by 子句之前内部加入 2 个表：

```
SELECT [OperatorID]
  , DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate
  , COUNT(*) AS EnquiryCount
  , st.FullName
FROM [Enquiries] AS e

INNER JOIN

(SELECT     OperatorID, FirstName + ' ' + LastName AS FullName 
FROM          dbo.Operators
WHERE      (Role = 'Operator')) AS o ON e.OperatorID = o.OperatorID

GROUP BY [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) 
```

我收到以下错误：

> 列 'o.FullName' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:24:12.857

As比您可以安全地添加到 group by 子句`OperatorID`更独特：`FullName``FullName`

```
SELECT [OperatorID]
  , DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate
  , COUNT(*) AS EnquiryCount
  , st.FullName
FROM [Enquiries] AS e

INNER JOIN

(SELECT     OperatorID, FirstName + ' ' + LastName AS FullName 
FROM          dbo.Operators
WHERE      (Role = 'Operator')) AS o ON e.OperatorID = o.OperatorID

GROUP BY [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0), st.FullName 
```

**更新**如评论中所述，我建议首先按所需的最少列数进行聚合，然后装饰结果。

```
SELECT si.[OperatorID], si.CreationDate, si.EnquiryCount, st.FullName
FROM

(
    SELECT [OperatorID]
      , DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate
      , COUNT(*) AS EnquiryCount
    FROM [Enquiries]
    GROUP BY [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0)
) AS si

INNER JOIN

(
    SELECT     OperatorID, FirstName + ' ' + LastName AS FullName 
    FROM          dbo.Operators
    WHERE      (Role = 'Operator')
) AS st

   ON si.OperatorID = st.OperatorID 
```

其实我不确定，为什么你需要 subquery `Operators`。如果没有必要，则可以简化解决方案：

```
SELECT si.[OperatorID], si.CreationDate, si.EnquiryCount,
    st.FirstName + ' ' + st.LastName AS FullName
FROM

(
    SELECT [OperatorID]
      , DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate
      , COUNT(*) AS EnquiryCount
    FROM [Enquiries]
    GROUP BY [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0)
) AS si

INNER JOIN

Operators AS st
  ON si.OperatorID = st.OperatorID and st.Role = 'Operator' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:26:22.880

请尝试，我没有测试过！希望这能解决错误

`SELECT [OperatorID], CONCAT(FirstName,LastName) AS FullName , DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate , COUNT(*) AS EnquiryCount , st.FullName FROM [Enquiries] AS e INNER JOIN dbo.Operators ON dbo.Operators.OperatorID = e.OperatorID AND (Role = 'Operator') GROUP BY [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:23:55.970

只需添加`st.FullName`到`Group by`：

```
GROUP BY 
   [OperatorID], 
   DATEADD(day, DATEDIFF(day, 0, CreationDate), 0), 
   st.FullName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T09:27:40.057

您可以使用带有`ROW_NUMBER`函数和的公用表表达式`COUNT(*)OVER`：

```
WITH cte AS
(
   SELECT e.[OperatorID]
  , DATEADD(day, DATEDIFF(day, 0, e.CreationDate), 0) AS CreationDate
  , o.FirstName + ' ' + o.LastName AS FullName 
  , RN = ROW_NUMBER()OVER(PARTITION BY [o.OperatorID], DATEADD(day, DATEDIFF(day, 0, e.CreationDate), 0) ORDER BY e.CreationDate DESC)
  , EnquiryCount = COUNT(*)OVER(PARTITION BY [o.OperatorID], DATEADD(day, DATEDIFF(day, 0, e.CreationDate), 0))
   FROM [Enquiries] AS e
   INNER JOIN  dbo.Operators o ON e.OperatorID = o.OperatorID
   WHERE Role = 'Operator'
)
SELECT * FROM cte
WHERE RN = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T09:53:22.567

使用公用表表达式，您可以做到

```
with cte as (
SELECT  
   [OperatorID], 
   DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) AS CreationDate, 
   COUNT(*) AS EnquiryCount 
FROM  
   [Enquiries] AS e 
GROUP BY  
   [OperatorID], DATEADD(day, DATEDIFF(day, 0, CreationDate), 0) 
)
SELECT
 cte.OperatorI,cte.CreationDate,o.FirstName + ' ' + o.LastName AS FullName   
FROM
 cte inner join dbo.Operators o
 on o.Role = 'Operator' and e.OperatorID = o.OperatorID 
```

# python - 一个似乎不是 '' 或 "\r\n" 的字符串的列表理解错误

> ID：11684951
> 
> 赞同：1
> 
> 时间：2012-07-27T09:21:34.423
> 
> 标签：python, string, list-comprehension

我读了一个文件，其中包含一个数字列表（这是我以后需要的一些标识符）。

如果我的文件末尾有一个空行，我在以下代码中有一个错误：

```
return [ int(x)  for x in lines if not x == '' and not x == "\r\n"] 
```

使用以下 python 输出：

```
 [...]
File "Z:\Projects\PyIntegrate\perforceIntegration.py", line 453, in readChange
ListNumbers
    self.changeListNumbers = loadChangeListNumbers()
  File "Z:\Projects\PyIntegrate\perforceIntegration.py", line 88, in loadChangeL
istNumbers
    return [ int(x)  for x in lines if not x == '' and not x == "\r\n"]
ValueError: invalid literal for int() with base 10: '' 
```

显然我的测试`if not x == '' and not x == "\r\n"`不足以处理这种情况。

我做错了什么？

（如果我取消文件的最后一个空行，即如果我让文件的最后一行包含真正的数字，一切都很好）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T09:24:34.360

试试这个：

```
return [ int(line) for line in lines if line.strip() ] 
```

这将`strip`来自 的所有空格和换行符`line`，如果它不为空（即它包含一些字符，最好是数字），它将把它转换为`int`.

`ValueError`但是，如果您的文件包含数字以外的其他字符或数字之间包含空格，它将失败（并 raise ）。

# tomcat - 使用 Tomcat 7 的 tomcat-maven-plugin - tomcat:deploy 有效，tomcat:undeploy 无效

> ID：11684952
> 
> 赞同：3
> 
> 时间：2012-07-27T09:21:36.810
> 
> 标签：tomcat, maven, plugins, pom.xml

我有一个 tomcat:deploy 的工作配置，但是当我取消部署 WAR 时，我收到以下错误，这让我很困惑：

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com:DocBookScratchProject:war:0.1.0.BUILD-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:tomcat-maven-plugin is missing. @ line 166, column 12
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building DocBookScratchProject 0.1.0.BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- tomcat-maven-plugin:1.1:undeploy (default-cli) @ DocBookScratchProject ---
[INFO] Undeploying application at http://localhost:8080/DocBookScratchProject
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.769s
[INFO] Finished at: Fri Jul 27 10:17:24 BST 2012
[INFO] Final Memory: 11M/110M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:undeploy (default-cli) on project DocBookScratchProject: Cannot invoke Tomcat manager: <html>
[ERROR] <head>
[ERROR] <style>
[ERROR] H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}
[ERROR] table {
[ERROR] width: 100%;
[ERROR] }
[ERROR] td.page-title {
[ERROR] text-align: center;
[ERROR] vertical-align: top;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] font-weight: bold;
[ERROR] background: white;
[ERROR] color: black;
[ERROR] }
[ERROR] td.title {
[ERROR] text-align: left;
[ERROR] vertical-align: top;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] font-style:italic;
[ERROR] font-weight: bold;
[ERROR] background: #D2A41C;
[ERROR] }
[ERROR] td.header-left {
[ERROR] text-align: left;
[ERROR] vertical-align: top;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] font-weight: bold;
[ERROR] background: #FFDC75;
[ERROR] }
[ERROR] td.header-center {
[ERROR] text-align: center;
[ERROR] vertical-align: top;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] font-weight: bold;
[ERROR] background: #FFDC75;
[ERROR] }
[ERROR] td.row-left {
[ERROR] text-align: left;
[ERROR] vertical-align: middle;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] color: black;
[ERROR] }
[ERROR] td.row-center {
[ERROR] text-align: center;
[ERROR] vertical-align: middle;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] color: black;
[ERROR] }
[ERROR] td.row-right {
[ERROR] text-align: right;
[ERROR] vertical-align: middle;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] color: black;
[ERROR] }
[ERROR] TH {
[ERROR] text-align: center;
[ERROR] vertical-align: top;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] font-weight: bold;
[ERROR] background: #FFDC75;
[ERROR] }
[ERROR] TD {
[ERROR] text-align: center;
[ERROR] vertical-align: middle;
[ERROR] font-family:sans-serif,Tahoma,Arial;
[ERROR] color: black;
[ERROR] }
[ERROR] form {
[ERROR] margin: 1;
[ERROR] }
[ERROR] form.inline {
[ERROR] display: inline;
[ERROR] }
[ERROR] </style>
[ERROR] <title>/manager</title>
[ERROR] </head>
[ERROR] 
[ERROR] <body bgcolor="#FFFFFF">
[ERROR] 
[ERROR] <table cellspacing="4" border="0">
[ERROR] <tr>
[ERROR] <td colspan="2">
[ERROR] <a href="http://www.apache.org/">
[ERROR] <img border="0" alt="The Apache Software Foundation" align="left"
[ERROR] src="/manager/images/asf-logo.gif">
[ERROR] </a>
[ERROR] <a href="http://tomcat.apache.org/">
[ERROR] <img border="0" alt="The Tomcat Servlet/JSP Container"
[ERROR] align="right" src="/manager/images/tomcat.gif">
[ERROR] </a>
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <hr size="1" noshade="noshade">
[ERROR] <table cellspacing="4" border="0">
[ERROR] <tr>
[ERROR] <td class="page-title" bordercolor="#000000" align="left" nowrap>
[ERROR] <font size="+2">Tomcat Web Application Manager</font>
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <br>
[ERROR] 
[ERROR] <table border="1" cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td class="row-left" width="10%"><small><strong>Message:</strong></small>&nbsp;</td>
[ERROR] <td class="row-left"><pre>FAIL - Tried to use command /undeploy via a GET request but POST is required</pre></td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <br>
[ERROR] 
[ERROR] <table border="1" cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td colspan="4" class="title">Manager</td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-left"><a href="/manager/html/list;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">List Applications</a></td>
[ERROR] <td class="row-center"><a href="/manager/../docs/html-manager-howto.html?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">HTML Manager Help</a></td>
[ERROR] <td class="row-center"><a href="/manager/../docs/manager-howto.html?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">Manager Help</a></td>
[ERROR] <td class="row-right"><a href="/manager/status;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">Server Status</a></td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <br>
[ERROR] 
[ERROR] <table border="1" cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td colspan="6" class="title">Applications</td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="header-left"><small>Path</small></td>
[ERROR] <td class="header-left"><small>Version</small></td>
[ERROR] <td class="header-center"><small>Display Name</small></td>
[ERROR] <td class="header-center"><small>Running</small></td>
[ERROR] <td class="header-left"><small>Sessions</small></td>
[ERROR] <td class="header-left"><small>Commands</small></td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small><a href="/">/</a></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small><i>None specified</i></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small>Welcome to Tomcat</small></td>
[ERROR] <td class="row-center" bgcolor="#FFFFFF" rowspan="2"><small>true</small></td>
[ERROR] <td class="row-center" bgcolor="#FFFFFF" rowspan="2"><small><a href="/manager/html/sessions;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">0</a></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF">
[ERROR] &nbsp;<small>Start</small>&nbsp;
[ERROR] <form class="inline" method="POST" action="/manager/html/stop;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Stop"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/reload;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Reload"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/undeploy;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Undeploy"></small>  </form>
[ERROR] </td>
[ERROR] </tr><tr>
[ERROR] <td class="row-left" bgcolor="#FFFFFF">
[ERROR] <form method="POST" action="/manager/html/expire;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <small>
[ERROR] &nbsp;<input type="submit" value="Expire sessions">&nbsp;with idle &ge;&nbsp;<input type="text" name="idle" size="5" value="30">&nbsp;minutes&nbsp;
[ERROR] </small>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-left" bgcolor="#C3F3C3" rowspan="2"><small><a href="/DocBookScratchProject">/DocBookScratchProject</a></small></td>
[ERROR] <td class="row-left" bgcolor="#C3F3C3" rowspan="2"><small><i>None specified</i></small></td>
[ERROR] <td class="row-left" bgcolor="#C3F3C3" rowspan="2"><small>&nbsp;</small></td>
[ERROR] <td class="row-center" bgcolor="#C3F3C3" rowspan="2"><small>true</small></td>
[ERROR] <td class="row-center" bgcolor="#C3F3C3" rowspan="2"><small><a href="/manager/html/sessions;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/DocBookScratchProject&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">0</a></small></td>
[ERROR] <td class="row-left" bgcolor="#C3F3C3">
[ERROR] &nbsp;<small>Start</small>&nbsp;
[ERROR] <form class="inline" method="POST" action="/manager/html/stop;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/DocBookScratchProject&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Stop"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/reload;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/DocBookScratchProject&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Reload"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/undeploy;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/DocBookScratchProject&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Undeploy"></small>  </form>
[ERROR] </td>
[ERROR] </tr><tr>
[ERROR] <td class="row-left" bgcolor="#C3F3C3">
[ERROR] <form method="POST" action="/manager/html/expire;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/DocBookScratchProject&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <small>
[ERROR] &nbsp;<input type="submit" value="Expire sessions">&nbsp;with idle &ge;&nbsp;<input type="text" name="idle" size="5" value="30">&nbsp;minutes&nbsp;
[ERROR] </small>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small><a href="/help">/help</a></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small><i>None specified</i></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small>&nbsp;</small></td>
[ERROR] <td class="row-center" bgcolor="#FFFFFF" rowspan="2"><small>true</small></td>
[ERROR] <td class="row-center" bgcolor="#FFFFFF" rowspan="2"><small><a href="/manager/html/sessions;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/help&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">0</a></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF">
[ERROR] &nbsp;<small>Start</small>&nbsp;
[ERROR] <form class="inline" method="POST" action="/manager/html/stop;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/help&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Stop"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/reload;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/help&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Reload"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/undeploy;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/help&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Undeploy"></small>  </form>
[ERROR] </td>
[ERROR] </tr><tr>
[ERROR] <td class="row-left" bgcolor="#FFFFFF">
[ERROR] <form method="POST" action="/manager/html/expire;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/help&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <small>
[ERROR] &nbsp;<input type="submit" value="Expire sessions">&nbsp;with idle &ge;&nbsp;<input type="text" name="idle" size="5" value="30">&nbsp;minutes&nbsp;
[ERROR] </small>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-left" bgcolor="#C3F3C3" rowspan="2"><small><a href="/host%2Dmanager">/host-manager</a></small></td>
[ERROR] <td class="row-left" bgcolor="#C3F3C3" rowspan="2"><small><i>None specified</i></small></td>
[ERROR] <td class="row-left" bgcolor="#C3F3C3" rowspan="2"><small>Tomcat Host Manager Application</small></td>
[ERROR] <td class="row-center" bgcolor="#C3F3C3" rowspan="2"><small>true</small></td>
[ERROR] <td class="row-center" bgcolor="#C3F3C3" rowspan="2"><small><a href="/manager/html/sessions;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/host%2Dmanager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">0</a></small></td>
[ERROR] <td class="row-left" bgcolor="#C3F3C3">
[ERROR] &nbsp;<small>Start</small>&nbsp;
[ERROR] <form class="inline" method="POST" action="/manager/html/stop;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/host%2Dmanager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Stop"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/reload;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/host%2Dmanager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Reload"></small>  </form>
[ERROR] <form class="inline" method="POST" action="/manager/html/undeploy;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/host%2Dmanager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">  <small><input type="submit" value="Undeploy"></small>  </form>
[ERROR] </td>
[ERROR] </tr><tr>
[ERROR] <td class="row-left" bgcolor="#C3F3C3">
[ERROR] <form method="POST" action="/manager/html/expire;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/host%2Dmanager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <small>
[ERROR] &nbsp;<input type="submit" value="Expire sessions">&nbsp;with idle &ge;&nbsp;<input type="text" name="idle" size="5" value="30">&nbsp;minutes&nbsp;
[ERROR] </small>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small><a href="/manager">/manager</a></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small><i>None specified</i></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF" rowspan="2"><small>Tomcat Manager Application</small></td>
[ERROR] <td class="row-center" bgcolor="#FFFFFF" rowspan="2"><small>true</small></td>
[ERROR] <td class="row-center" bgcolor="#FFFFFF" rowspan="2"><small><a href="/manager/html/sessions;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/manager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">9</a></small></td>
[ERROR] <td class="row-left" bgcolor="#FFFFFF">
[ERROR] <small>
[ERROR] &nbsp;Start&nbsp;
[ERROR] &nbsp;Stop&nbsp;
[ERROR] &nbsp;Reload&nbsp;
[ERROR] &nbsp;Undeploy&nbsp;
[ERROR] </small>
[ERROR] </td>
[ERROR] </tr><tr>
[ERROR] <td class="row-left" bgcolor="#FFFFFF">
[ERROR] <form method="POST" action="/manager/html/expire;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?path=/manager&amp;org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <small>
[ERROR] &nbsp;<input type="submit" value="Expire sessions">&nbsp;with idle &ge;&nbsp;<input type="text" name="idle" size="5" value="30">&nbsp;minutes&nbsp;
[ERROR] </small>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <br>
[ERROR] <table border="1" cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td colspan="2" class="title">Deploy</td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td colspan="2" class="header-left"><small>Deploy directory or WAR file located on server</small></td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td colspan="2">
[ERROR] <form method="post" action="/manager/html/deploy;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <table cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td class="row-right">
[ERROR] <small>Context Path (required):</small>
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <input type="text" name="deployPath" size="20">
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-right">
[ERROR] <small>XML Configuration file URL:</small>
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <input type="text" name="deployConfig" size="20">
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-right">
[ERROR] <small>WAR or Directory URL:</small>
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <input type="text" name="deployWar" size="40">
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-right">
[ERROR] &nbsp;
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <input type="submit" value="Deploy">
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td colspan="2" class="header-left"><small>WAR file to deploy</small></td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td colspan="2">
[ERROR] <form method="post" action="/manager/html/upload;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98" enctype="multipart/form-data">
[ERROR] <table cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td class="row-right">
[ERROR] <small>Select WAR file to upload</small>
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <input type="file" name="deployWar" size="40">
[ERROR] </td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-right">
[ERROR] &nbsp;
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <input type="submit" value="Deploy">
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] </form>
[ERROR] </table>
[ERROR] <br>
[ERROR] 
[ERROR] <table border="1" cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td colspan="2" class="title">Diagnostics</td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td colspan="2" class="header-left"><small>Check to see if a web application has caused a memory leak on stop, reload or undeploy</small></td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td colspan="2">
[ERROR] <form method="post" action="/manager/html/findleaks;jsessionid=724F30BC8ED2E6CE4F8A1EC4CB1E5B50?org.apache.catalina.filters.CSRF_NONCE=D9447A84FBF3B6DCC2C067BAA2539F98">
[ERROR] <table cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td class="row-left">
[ERROR] <input type="submit" value="Find leaks">
[ERROR] </td>
[ERROR] <td class="row-left">
[ERROR] <small>This diagnostic check will trigger a full garbage collection. Use it with extreme caution on production systems.</small>
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] </form>
[ERROR] </td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <br><table border="1" cellspacing="0" cellpadding="3">
[ERROR] <tr>
[ERROR] <td colspan="8" class="title">Server Information</td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="header-center"><small>Tomcat Version</small></td>
[ERROR] <td class="header-center"><small>JVM Version</small></td>
[ERROR] <td class="header-center"><small>JVM Vendor</small></td>
[ERROR] <td class="header-center"><small>OS Name</small></td>
[ERROR] <td class="header-center"><small>OS Version</small></td>
[ERROR] <td class="header-center"><small>OS Architecture</small></td>
[ERROR] <td class="header-center"><small>Hostname</small></td>
[ERROR] <td class="header-center"><small>IP Address</small></td>
[ERROR] </tr>
[ERROR] <tr>
[ERROR] <td class="row-center"><small>Apache Tomcat/7.0.28</small></td>
[ERROR] <td class="row-center"><small>1.6.0_29-b11</small></td>
[ERROR] <td class="row-center"><small>Sun Microsystems Inc.</small></td>
[ERROR] <td class="row-center"><small>Windows 7</small></td>
[ERROR] <td class="row-center"><small>6.1</small></td>
[ERROR] <td class="row-center"><small>amd64</small></td>
[ERROR] <td class="row-center"><small>Mat-PC</small></td>
[ERROR] <td class="row-center"><small>10.201.113.100</small></td>
[ERROR] </tr>
[ERROR] </table>
[ERROR] <br>
[ERROR] 
[ERROR] <hr size="1" noshade="noshade">
[ERROR] <center><font size="-1" color="#525D76">
[ERROR] <em>Copyright &copy; 1999-2012, Apache Software Foundation</em></font></center>
[ERROR] 
[ERROR] </body>
[ERROR] </html>
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

**Tomcat-users.xml：**

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
  <role rolename="tomcat"/>
  <role rolename="manager"/>
  <role rolename="manager-script"/>
  <role rolename="manager-gui"/>
  <role rolename="standard"/>
  <role rolename="admin"/>
  <user username="admin" password="password" roles="tomcat,manager,manager-script,manager-gui,standard,admin"/>
</tomcat-users> 
```

**Maven settings.xml 片段：**

```
<servers>
  <server>
    <id>TomcatServer</id>
    <username>admin</username>
    <password>password</password>
  </server>
</servers> 
```

**POM 片段：**

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>tomcat-maven-plugin</artifactId>
  <configuration>
    <url>http://localhost:8080/manager/html</url>
    <server>TomcatServer</server>
    <path>/${project.build.finalName}</path>
  </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T07:31:56.110

我最终使用 tomcat7:deploy 进行部署（或重新部署 update=true）

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0-SNAPSHOT</version>
    <configuration>
            <url>http://localhost:8080/manager/html</url>
            <username>admin</username>
            <password>pass</password>
            <path>/App</path>
            <update>true</update>
    </configuration>
    </plugin> 
```

并取消部署

```
curl -d "path=/App" "http://admin:pass@localhost:8080/manager/html/undeploy" 
```

我需要这个给詹金斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:46:59.017

该日志表明您的 pom.xml 中存在未定义版本的问题：

```
[WARNING] Some problems were encountered while building the effective model for com:DocBookScratchProject:war:0.1.0.BUILD-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:tomcat-maven-plugin is missing. @ line 166, column 12 
```

我会先解决这个问题。

如果取消部署失败，通常与未关闭的资源（如连接池）有关。通常您可以尝试取消部署，让它失败并查看哪些文件仍然存在。这通常有助于确定问题的根源。

有一些与部署/取消部署相关的 tomcat 选项：

*   antiJARLocking
*   反资源锁定

见：http: [//tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

希望这里有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T08:58:57.993

这里只是一个旁注：您必须使用**tomcat7:deploy**目标而**不是**tomcat:deploy 目标才能使其工作。

# ldap - 删除ldap中树/子树下的特定用户？

> ID：11684953
> 
> 赞同：0
> 
> 时间：2012-07-27T09:21:37.110
> 
> 标签：ldap

这里我想删除`"omc,system,ruimadmin`子树下除了say等之外的用户`"ou=people,ou=accounts,dc=moga_cluster,dc=oesblr,dc=nsn-rdnet,dc"`。我想要这里的 ldap 命令....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:28:22.220

*可分辨名称`ou=people,ou=accounts,dc=moga_cluster,dc=oesblr,dc=nsn-rdnet,dc`是非法的，`=`后面的字符`AttributeValue`丢失。*

### 使用复合否定过滤器

假设所讨论的条目直接从属于`ou=people,ou=accounts,dc=moga_cluster,dc=oesblr,dc=nsn-rdnet,dc=something`并且每个条目的命名属性为`cn`，则向服务器发送一个搜索请求，指定：

*   的基础对象`ou=people,ou=accounts,dc=moga_cluster,dc=oesblr,dc=nsn-rdnet,dc=something`
*   搜索范围`one`
*   筛选`(&(!(cn=omc))(!(cn=system))(!(cn=riumadmin)))`
*   属性列表`1.1`

来自服务器的搜索响应将包含除过滤器中的名称之外的所有可分辨名称。然后，分别为每个条目发出删除请求。

`ldapsearch`考虑使用该工具测试搜索。一种可能的语法，假设使用旧版 OpenLDAP`ldapsearch`工具：

```
ldapsearch -H ldap://hostname:port \
 -b 'ou=people,ou=accounts,dc=moga_cluster,dc=oesblr,dc=nsn-rdnet,dc=something' \
 -s one \
 '(&(!(cn=omc))(!(cn=system))(!(cn=riumadmin)))' 1.1 
```

### 也可以看看

*   [使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)

# c++ - 函数默认模板参数可以放在非默认参数之前吗？

> ID：11684954
> 
> 赞同：10
> 
> 时间：2012-07-27T09:21:44.517
> 
> 标签：c++, templates, c++11

以下代码在 gcc-4.7.1 上编译：

```
struct X {};

template <class T = X, typename U>
void f(const U& m) {
}

int main() {
    f<>(0);
} 
```

但是，这个没有：

```
struct X {};

template <class T = X, typename U>
void f(const U& m) {
    auto g = [] () {};
}

int main() {
    f<>(0);
} 
```

gcc-4.7.1 抱怨：

```
c.cpp: In function 'void f(const U&)':
c.cpp:5:15: error: no default argument for 'U' 
```

所以我的问题是：在函数模板中将默认参数放在非默认参数之前是否正确？如果是，为什么第二个不编译？如果不是，为什么第一个编译？C++11 标准如何描述这种语法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T09:27:19.507

明确禁止类和别名。n3290 § 14.1.11 规定：

> 如果类模板或别名模板的模板参数具有默认模板参数，则每个后续模板参数应提供默认模板参数或模板参数包

对于函数，唯一的限制似乎与参数包有关：

> 函数模板的模板形参包后面不应有另一个模板形参，除非该模板形参可以推导出来或具有默认实参

但显然这与本案无关。

鉴于 § 14 中没有任何内容禁止它用于功能，我们似乎不得不假设它是允许的。

[工作组报告](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#226)的一份说明似乎证实了这就是意图。该部分的原始提议措辞是：

> 如果类模板的模板参数具有默认模板参数，则所有后续模板参数都应提供默认模板参数。[注意：**这不是函数模板的要求，因为可能会推导出模板参数**(14.8.2 [temp.deduct])。]

不过，我看不到该注释在最终版本中的位置。

# mysql - 我需要从其他数据库连接表，有时也需要从其他服务器连接表

> ID：11684956
> 
> 赞同：5
> 
> 时间：2012-07-27T09:22:01.193
> 
> 标签：mysql, database

我的项目有自己的数据库。另外，我使用其他数据库上的用户表。两个办公室的数据在同一台服务器上，但第三个办公室在另一台服务器上拥有自己的用户表。

所以，在很多查询中，我需要加入表 some_db.users 或 other_server.some_db.users

对于这种情况，您会建议什么解决方案？

我使用 MySQL。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T10:51:54.120

MySQL中有[联合表：](http://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html)

> FEDERATED 存储引擎允许您访问远程 MySQL 数据库中的数据，而无需使用复制或集群技术。查询本地 FEDERATED 表会自动从远程（联合）表中提取数据。本地表上不存储任何数据。

首先，您必须在远程服务器上有一个要使用 FEDERATED 表访问的表。假设远程表在 sakila 数据库中，定义如下：

```
CREATE TABLE test_table (
    id     INT(20) NOT NULL AUTO_INCREMENT,
    name   VARCHAR(32) NOT NULL
    PRIMARY KEY  (id)
)
ENGINE=MyISAM
DEFAULT CHARSET=latin1; 
```

接下来，在本地服务器上创建一个 FEDERATED 表，用于访问远程表：

```
CREATE TABLE federated_table (
    id     INT(20) NOT NULL AUTO_INCREMENT,
    name   VARCHAR(32) NOT NULL
    PRIMARY KEY  (id)
)
ENGINE=FEDERATED
DEFAULT CHARSET=latin1
CONNECTION='mysql://fed_user:fed_user@197.186.1.199:3306/sakila/test_table'; 
```

示例连接字符串：

```
CONNECTION='mysql://username:password@hostname:port/database/tablename'
CONNECTION='mysql://username@hostname/database/tablename'
CONNECTION='mysql://username:password@hostname/database/tablename' 
```

此表的基本结构应与远程表的基本结构相匹配，但 ENGINE 表选项应为 FEDERATED。

执行：

```
show variables like '%federated%'; 
```

检查本地服务器上是否有 FEDERATED 存储引擎。

本地主机中的表`federated_table`成为`test_table`远程服务器中的虚拟表。

现在，您可以在 localhost 服务器中的数据库中的表之间使用 JOIN。如果`test`在您的 localhost 服务器中调用了一个表，并且您想与远程服务器中的前 sakila.test_table 连接，请编写如下所示的查询：

```
SELECT * FROM `federated_table` JOIN `test`; 
```

查询中的`federated_table`实际将引用远程服务器中的 test_table。

* * *

***关于启用联合存储引擎***

运行的服务器默认不启用 FEDERATED 存储引擎；要启用 FEDERATED，您必须使用该`--federated`选项启动 MySQL 服务器二进制文件。

注意：可选的存储引擎需要权限，并且在指定
时将无法加载。`--skip-grant-tables`

结果整个数据库加载失败，日志中会出现如下错误：

```
110318 21:37:23 [ERROR] /usr/local/libexec/mysqld: unknown option '--federated' 
```

这反过来意味着如果您有联合表，则需要分两步从 5.x 升级。一旦有`--skip-grant-tables`和没有`--federated`，一旦没有`--skip-grant-tables` 和有`--federated`。

资料来源：[联邦存储引擎](http://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:42:21.683

也请提及数据库。在 SQLServer 中，您可以使用链接服务器。[http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:59:08.223

在 MySQL 中，您可以使用完全限定名称连接来自不同数据库的表，例如

```
`database_name1`. `table_name1` JOIN `database_name2`.`table_name2` 
```

但我担心，您不能连接来自不同服务器的表，因为为此您需要有两个不同的连接，而且据我所知，查询中没有完全限定的连接名称。

或者，您可以在其中一台服务器上创建本地临时表并在那里运行查询。但在这种情况下，您需要将数据从一台服务器传输到另一台服务器。您可以使用 MySQL GUI 工具（如[SQLyog](http://www.webyog.com/en/downloads.php)或 MySQL admin）将数据从一台服务器传输到另一台服务器并同步两台服务器上的数据库。

希望能帮助到你....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-06T15:55:35.673

联合表是其他服务器上表的解决方案。但是，如果您对它们执行连接，它们会非常慢。如果您只想从同一服务器上的另一个数据库读取数据，您可以使用视图。这样，您就可以在一个数据库中虚拟地拥有所有表，并且您只需在应用程序中打开一个连接。

```
CREATE
    VIEW `my_db`.`table_name` 
    AS
(SELECT * FROM `other_db`.`table_name`); 
```

# php - 如何编写 OSClass 自定义查询以从数据库中获取结果

> ID：11684957
> 
> 赞同：2
> 
> 时间：2012-07-27T09:22:11.253
> 
> 标签：php, osclass

我是 OSClass（开源分类广告）的新手。

我知道它类似于 wordpress。但我不确定如何编写自己的查询，就像我在 wordpress 中所做的那样。

右侧栏将城市/地区作为链接显示来自该城市/地区的广告。

城市/地区名称通过 URL 传递，根据要求，我需要将 URL 更改为虚拟子域。

例如，如果用户单击 city1，则 URL 应为[http://city1.domainname.com/](http://city1.domainname.com/)并且结果正常。

我使用 htaccess 更改了虚拟子域重定向，但停留在城市和地区。

要确定它是城市还是地区，我需要检查数据库，为此我需要编写自定义查询以将值与表匹配..

这样我就可以显示有关城市/地区的结果。

我面临的这个问题的任何想法..

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T08:45:05.617

我建议你看看里面的模型`./oc-includes/osclass/models/`来搜索地区和城市以及其他常见的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-29T21:51:35.547

这是我在我的一个插件中所做的：

```
$conn = DBConnectionClass::newInstance();
$data = $conn->getOsclassDb();
$comm = new DBCommandClass($data);
$db_prefix = DB_TABLE_PREFIX;

$query = "SELECT * FROM `{$db_prefix}t_item` WHERE b_active=1 AND b_enabled=1";

$result = $comm->query($query);

if ($result) {
    $items = $result->result();
    foreach ($items as $item) {
       var_dump($item);
    }
} 
```

# android - 不能在不同方法中定义的内部类中引用非最终变量

> ID：11684961
> 
> 赞同：0
> 
> 时间：2012-07-27T09:22:22.970
> 
> 标签：android

```
new Thread(new Runnable() 
                {
                    public void run() {
                        while ( statusStr==null)
                        {
                            progressBarHandler.post(new Runnable() {
                                public void run() {
                                    progressBar.setProgress(progressBarStatus);
                                }
                            });
                        }

                    }
                    }).start(); 
```

朋友们，我已经提到了其他问题，但我仍然很困惑，所以请帮助我解决这个问题。我无法将 statusStr 保留为 final，因为它的值在应用程序运行时正在更新，所以请给我一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T09:25:55.513

您可以全局声明变量，这样您就不会被迫将其更改为 final。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:26:58.150

将progressBar 声明为final 或将其声明为GlobalVariable。

像声明最终变量一样，请执行以下操作：

```
final ProgressBar progressBar= ProgressBar.show(this, "title", "message");
    new Thread(new Runnable() 
                    {
                        public void run() {
                            while ( statusStr==null)
                            {
                                progressBarHandler.post(new Runnable() {
                                    public void run() {
                                        progressBar.setProgress(progressBarStatus);
                                    }
                                });
                            }

                        }
                        }).start(); 
```

# cloud-foundry - 离线模式下增加 Micro Cloud Foundry 1.2 的容量

> ID：11684964
> 
> 赞同：0
> 
> 时间：2012-07-27T09:22:35.250
> 
> 标签：cloud-foundry

我想在微云代工上做一些真实世界的数据测试，但是 postgres 数据库的容量限制为 256MB，这对于我的测试来说是不够的。有没有办法在离线模式下临时增加数据库容量以进行测试？

如果没有，有人能告诉我在 Ubuntu Server 12.04 上设置私有云代工厂服务器的最新说明吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:02:55.713

您可以通过 ssh 进入实例，更改 mysql 的配置并重新启动服务。

SSH 到 MCF 实例：

```
$ ssh vcap@api.<your-mcf-instance-name-here>.cloudfoundry.me 
```

*注意 - 如果您不记得 vcap 用户的密码，您可以通过 vm 控制台菜单选择选项 3 来更改此密码。

编辑 mysql-node 配置文件：

```
$ vi /var/vcap/jobs/mysql_node/config/mysql_node.yml 
```

该文件应该看起来像这样或完全像这样：

```
---
local_db: sqlite3:/var/vcap/store/mysql_node.db
base_dir: /var/vcap/store/mysql
mbus: nats://nats:f5dc63f74be5e38f@127.0.0.1:4222
index: 0
logging:
  level: debug
  file: /var/vcap/sys/log/mysql_node/mysql_node.log

pid: /var/vcap/sys/run/mysql_node/mysql_node.pid
available_storage: 2048
node_id: mysql_node_1
max_db_size: 256
max_long_query: 3
mysql:
  host: localhost
  port: 3306
  socket: /var/vcap/sys/run/mysqld/mysqld.sock
  user: root
  pass: dc64fad710976ea5
migration_nfs: /var/vcap/services_migration
max_long_tx: 0
max_user_conns: 20
mysqldump_bin: /var/vcap/packages/mysql/bin/mysqldump
mysql_bin: /var/vcap/packages/mysql/bin/mysql
gzip_bin: /bin/gzip

ip_route: 127.0.0.1

z_interval: 30
max_nats_payload: 1048576 
```

您感兴趣的两行是；

```
available_storage: 2048 
```

和

```
max_db_size: 256 
```

第一行是 MySQL 可用的最大可用磁盘存储量，第二行是每个 mysql db 实例的最大大小。将这些设置为您想要的值，显然 available_storage 必须大于 max_db_size 并且也是该值的倍数。

保存文件，然后重新启动 VM（通过 VM 控制台中的菜单将其关闭或通过 SSH 执行），您应该一切顺利！

# c# - 显示来自 SQL Server 2008 的多个图像

> ID：11684967
> 
> 赞同：0
> 
> 时间：2012-07-27T09:22:57.963
> 
> 标签：c#, asp.net, sql-server-2008

我需要显示数据库表中的多个图像并将其绑定到转发器，我该怎么做呢？

这是我当前的代码，但我不知道如何继续显示图像

以下是我将数据加载到中继器的方法：

```
public void loadNoofNewJobsCompany()
{
        DateTime lastlogged = Convert.ToDateTime(Session["LastLoginstaff"]);

        string sqlStr = "SELECT * FROM Job ";
        sqlStr += "WHERE ";
        sqlStr += "UpdatedDateCmpRep <= @loggedin";

        SqlCommand cmd = new SqlCommand(sqlStr, cnn);
        cmd.Parameters.AddWithValue("@loggedin", lastlogged);

        try
        {
            cnn.Open();

            SqlDataAdapter da = new SqlDataAdapter(cmd);

            DataTable dt = new DataTable();
            da.Fill(dt);

            Label2.Text = dt.Rows.Count.ToString();

            PagedDataSource pgdsc = new PagedDataSource();
            pgdsc.DataSource = dt.DefaultView;

            repeater1.DataSource = pgdsc;
            repeater1.DataBind();
        }
        catch (Exception ex)
        {
            Response.Write("Error: " + ex.Message);
        }
        finally
        {
            if (cnn != null)
            {
                cnn.Close();
            }
        }
    } 
```

这是中继器：

```
<asp:Repeater ID="repeater1" runat="server">
    <ItemTemplate>
        <div class="boxgrid caption">
            <%--<img src="../../img/google.png"  style="text-align:center"/>--%>
            <div class="cover boxcaption">
               <p>
                   <a href='../Job/ViewJobDetail.aspx?ID=<%# DataBinder.Eval(Container.DataItem, "JobID")%>' class="headerlink">
                   <%# getTitle(Eval("JobName").ToString()) %>
                   </a>
               </p>
               <p>
                   Salary Range:
                   <%# DataBinder.Eval(Container.DataItem, "JobSalaryRange")%>
               </p>
               ... (more stuff - not relevant here) .....
            </div>
         </div>
     </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:43:54.417

为了在 gridview 中显示图像，我们需要创建一个 Handler 来从数据库中读取二进制数据。

[这](http://csharpdotnetfreak.blogspot.com/2009/07/display-images-gridview-from-database.html)是一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:04:00.120

我假设图像存储在数据库中。
写入`.ashx(Http handler)`以显示图像。
您可以直接从数据库中使用 .ashx 文件中的 Response Header 渲染图像，并在转发器中使用该 .ashx 文件，如下所示，图像将被显示。

```
<img src="displayImage.ashx?id=111"  style="text-align:center"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:39:00.280

[在 ASP.NET GridView 中使用 HttpHandler 查看从数据库中显示图像的](http://technico.qnownow.com/display-images-from-database-in-asp-net-gridview-using-httphandler)另一个很好的例子

# asp.net - 需要保留值才能添加到另一个表

> ID：11684969
> 
> 赞同：0
> 
> 时间：2012-07-27T09:23:04.283
> 
> 标签：asp.net

我有一个带有 2 个视图的 MultiView，其中有 EmpID。在 View2 中：我有技能（下拉菜单）作为添加到表 dbo.Emp_Skills 中的员工的技能

企业ID | 技能ID

如何保留 EmpID 的值，以便在下一个视图中可以将其添加到其他表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:26:33.850

By default it should retain selected value but if it is not doing so, you can manually place the value in `ViewState` object like `ViewState["EmpId"]=EmpId;` and then in next view you can access it like `int empId = Convert.ToInt32( ViewState["EmpId"])`

consider using asp.net wizard control in place of multiview in case of wizard kind of functionality.

# jquery - jQuery替换一个在我的表单中，不提交新数据所以我从我的代码开始： $(function() { $("#employeeName").keyup(function() { var dataString = 'find='+ $("#employeeName" ).val(); //alert (dataString);return false; $.ajax({ type: "POST", url: "finduser.php", data: dataString, success:

> ID：11684970
> 
> 赞同：3
> 
> 时间：2012-07-27T09:23:04.813
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:44:17.173

如果`$_POST['id']`不存在，那么您的选项可能没有`value`.

如果`$('#search').val()`产生一个整数，但在您提交表单时它不存在，那么您`<select>`不是表单的一部分，或者值在提交时更新，或者您正在提交`GET`请求，以便您的值可用通过`$_GET['id']`.

1.  验证您的表单是否具有以下属性：`method="POST"`
2.  验证`$('#the-form').serialize()`包含“id=5”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:48:20.233

在响应中尝试以下代码：它对我有用

```
 $("#search option").remove(); // Remove all <option> child tags.
            $("#search").append($("<option></option>").text("All").val(""));
            $.each(responset, function(index, item) { // Iterates through a
                // collection

                $("#search").append($("<option></option>").text(item).val(item)); 
```

# c# - 从子节点的子节点中选择一个树节点

> ID：11684971
> 
> 赞同：0
> 
> 时间：2012-07-27T09:23:05.127
> 
> 标签：c#, visual-studio-2008, treeview

我有下面的树视图并想选择子节点的子节点：

*   班级
    *   A节
        *   A1组
        *   A2组
    *   B节
        *   B1组
        *   B2组

我想选择节点组 B2。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:35:24.393

你想做类似的事情

```
TreeNode nodeSectionB = this.TreeView.Nodes["Section B"]; // Or .Nodes[1];
TreeNode node = nodeSectionB.Nodes["Group B2"]; // Or .Nodes[1];
this.TreeView.SelectedNode = node; 
```

请注意，当使用字符串引用节点时，假定您已经提供了这样做的引用。否则，您将不得不使用节点索引。以上假设树是静态的，并且您之后的节点的位置不会改变。

如果树是动态的，即所需节点的位置确实发生了变化，您可能必须遍历树才能找到所需的节点。为此，请使用类似

```
private void SelectTreeNode(TreeView treeView, string nodeText)
{
    TreeNodeCollection nodes = treeView.Nodes;
    foreach (TreeNode n in nodes)
        CheckRecursive(n, nodeText);
}

private void CheckRecursive(TreeNode treeNode, string nodeText)
{
    foreach (TreeNode tn in treeNode.Nodes)
        if (String.Compare(tn.Text, nodeText, true) == 0)
            this.TreeView.SelectedNode = tn;
} 
```

假设`this.TreeView`是您的树视图的访问器。`nodeText`这是要查找的所需节点文本 - 对于具有相同文本值的节点，可能必须对其进行修改。

我希望这有帮助。

# objective-c - 将从 coreData 中检索到的值相加并在部分中显示

> ID：11684972
> 
> 赞同：4
> 
> 时间：2012-07-27T09:23:05.953
> 
> 标签：objective-c, ios, xcode, uitableview, core-data

我想在给定部分中添加所有金额标签并在部分标题中显示总数。我的表格视图看起来像这样。

部分标题 - 2012 年 12 月 7 日

```
categoryName  Amount
 Groceries     100
  Social       100 
```

部分标题 - 2012 年 10 月 4 日

```
categoryName  Amount
  Gas          500
  Social       600 
```

现在我想在第一节标题中显示总共 200 个。在下一个标题中显示 1100 个

```
-(IBAction)bydate:(id)sender
{
[self.expenseArray removeAllObjects];
[self.expenseArrayCount removeAllObjects];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];

for(NSManagedObject *records in self.listOfExpenses){
    NSString *compareDates = [dateFormatter stringFromDate:[records valueForKey:@"date"]];
    BOOL isAvail = NO;
    for (int i = 0; i<[self.expenseArray count]; i++){
        if([compareDates isEqualToString:[self.expenseArray objectAtIndex:i]])
            isAvail = YES;
    }
    if(!isAvail)
        [self.expenseArray addObject:compareDates];
}
int count = 0;
for (int i = 0 ; i < [self.expenseArray count] ; i ++){
    NSString *compareDates = [self.expenseArray objectAtIndex:i];
    for(NSManagedObject *info in self.listOfExpenses){
        if([compareDates isEqualToString:[dateFormatter stringFromDate:[info valueForKey:@"date"]]])
            count++;
    }
    [self.expenseArrayCount addObject:[NSNumber numberWithInt:count]];
    count = 0;
}
[self.byDateTab reloadData];
[dateFormatter release];
}

 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   //not posting un necessary code.

    else if (tableView == self.byDateTab)
{
    for(int i = 0; i < [self.expenseArrayCount count];i++)
    {
        if(indexPath.section == 0)
        {
            NSManagedObject *records = nil;
            records = [self.listOfExpenses objectAtIndex:indexPath.row];
            self.firstLabel.text = [records valueForKey:@"category"];
            self.secondLabel.text = [records valueForKey:@"details"];
            NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
            self.thirdLabel.text = amountString;
        }
        else if (indexPath.section == i)
        {
            int rowCount = 0;
            for(int j=0; j<indexPath.section; j++)
            {
                rowCount = rowCount + [[self.expenseArrayCount objectAtIndex:j]intValue];
            }
            NSManagedObject *records = nil;
            records = [self.listOfExpenses objectAtIndex:(indexPath.row + rowCount) ];
            self.firstLabel.text = [records valueForKey:@"category"];
            self.secondLabel.text = [records valueForKey:@"details"];
            NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
            self.thirdLabel.text = amountString;

        }
    }
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
NSString *title = [[[NSString alloc]init]autorelease];
if(tableView == self.byDateTab)
    title =  [self.expenseArray objectAtIndex:section];
return title;
}

-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
UIView *headerView = [[[UIView alloc]init] autorelease];
if(tableView == self.byDateTab){
    headerView.frame = CGRectMake(310, 0, tableView.bounds.size.width, 30);
    [headerView setBackgroundColor:[UIColor colorWithRed:149.0/255 green:163.0/255 blue:173.0/255 alpha:1]];
    UILabel *leftLabel = [[[UILabel alloc]initWithFrame:CGRectMake(10, 3, tableView.bounds.size.width-10, 18)]autorelease];
    leftLabel.text = [self tableView:tableView titleForHeaderInSection:section];
    leftLabel.textColor = [UIColor whiteColor];
    leftLabel.font = [UIFont fontWithName:@"AmericanTypewriter" size:17.0];
    leftLabel.backgroundColor = [UIColor clearColor];
    [headerView addSubview:leftLabel];

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc]init];
    NSString *a = [formatter currencySymbol];

    UILabel *rightLabel = [[[UILabel alloc]initWithFrame:CGRectMake(250, 3, tableView.bounds.size.width-10, 18)]autorelease];
    rightLabel.text = [NSString stringWithFormat:@"(%@)",a];
    rightLabel.textColor = [UIColor whiteColor];
    rightLabel.font = [UIFont fontWithName:@"AmericanTypewriter" size:17.0];
    rightLabel.backgroundColor = [UIColor clearColor];
    [headerView addSubview:rightLabel];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:37:28.027

您需要实现此方法：
`- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section`
它返回给定部分的标题。因此，您需要确定哪些记录与节号匹配并遍历记录以计算总金额。
您可能需要考虑在上述方法之外执行此操作，以便在每次调用此方法时不计算每个部分的总量。
您可以在加载数据后立即创建一组“预计算”标题，并且只执行以下操作：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section  
{  
    return [titles objectAtIndex:section];  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:38:05.113

逻辑很简单。我真的不想深入你的代码，所以这个块会给你一个你需要的解释

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
  NSArray *sectionArray = [mySectionsDictionary objectForKey:[NSString stringWithFormat:@"%d", section]];
  int total = 0;
  for (MyCustomCoreDataObject *object in sectionArray) {
    total += object.amount.intValue;
  }
  return [NSString stringWithFormat:@"%d", total];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:50:47.913

**注意** （我看到您没有使用 fetchResultController，我建议您使用它，因为它可以帮助您完成此任务和其他使用显示核心数据实体的表格视图的任务）。

**使用 fetchResultController：**

您应该将`totalAmount`NSString 添加到您获取的实体（您在 fetchResultController 中获取的实体）类。

然后将添加操作添加到类中。在里面创建你的计算，这样你就会得到一个字符串的总量。

```
-(NSString*)totalAmount{
   NSInteger amount = 0;
   //do your calculation here
   return [NSString stringWithFormat:@"amount = %i",amount];
} 
```

然后在获取结果控制器中传递`totalAmount`您的部分名称键路径，这将返回`totalAmount`每个部分的字符串：

```
NSFetchedResultsController *fetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:request
                                    managedObjectContext:managedObjectContext
                                      sectionNameKeyPath:@"totalAmount" cacheName:nil]; 
```

然后编辑您的部分标题方法，以便表格视图正确运行：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
     return ([[fetchedResultsController sections] count]);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
      id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section]; 
```

最后，从获取结果控制器中为每个部分设置金额文本：

```
 - (NSString *)controller:(NSFetchedResultsController *)controller sectionIndexTitleForSectionName:(NSString *)sectionName {
      return sectionName;
 } 
```

# android - 非源代码类包含在 emma xml 覆盖率报告中

> ID：11684975
> 
> 赞同：0
> 
> 时间：2012-07-27T09:23:23.643
> 
> 标签：android, code-coverage, emma

我正在使用 Robotium 在 Android Emulator 上运行 UI 测试并尝试使用 emma 进行覆盖。xml 覆盖率报告创建成功。但是我发现覆盖率报告中有一些类不是真实代码的一部分。如。

```
<class name="CalculatorData$Message">
        <coverage type="class, %" value="0%   (0/1)"/>
        <coverage type="method, %" value="0%   (0/5)"/>
        <coverage type="block, %" value="0%   (0/43)"/>
        <coverage type="line, %" value="0%   (0/3)"/>

        <method name="&lt;static initializer&gt;">
          <coverage type="method, %" value="0%   (0/1)"/>
          <coverage type="block, %" value="0%   (0/24)"/>
          <coverage type="line, %" value="0%   (0/3)"/>
        </method>
        <method name="CalculatorData$Message (String, int): void">
          <coverage type="method, %" value="0%   (0/1)"/>
          <coverage type="block, %" value="0%   (0/5)"/>
          <coverage type="line, %" value="0%   (0/1)"/>
        </method>
        <method name="CalculatorData$Message (String, int, CalculatorData$1): void">
          <coverage type="method, %" value="0%   (0/1)"/>
          <coverage type="block, %" value="0%   (0/5)"/>
          <coverage type="line, %" value="0%   (0/1)"/>
        </method>
        <method name="valueOf (String): CalculatorData$Message">
          <coverage type="method, %" value="0%   (0/1)"/>
          <coverage type="block, %" value="0%   (0/5)"/>
          <coverage type="line, %" value="0%   (0/1)"/>
        </method>
        <method name="values (): CalculatorData$Message []">
          <coverage type="method, %" value="0%   (0/1)"/>
          <coverage type="block, %" value="0%   (0/4)"/>
          <coverage type="line, %" value="0%   (0/1)"/>
        </method>
      </class> 
```

我们在 CalculatorData 中根本没有名为 Message 的内部类。它看起来与内部类覆盖率数据相同，因此我无法使用 emma 过滤器对其进行过滤。有谁知道如何摆脱覆盖报告中的这些数据？

这是我相关的蚂蚁脚本。

```
<property name="emma.filter" value="-com.example.coverage.R, -com.example.coverage.R$*, -com.example.coverage.BuildConfig" />   
<property name="emma.default.filter" value="com.example.coverage.R, com.example.coverage.R$*, com.example.coverage.BuildConfig" />  
<import file="${sdk.dir}/tools/ant/build.xml" />

<!-- use com.zutubi.android.junitreport.JUnitReportTestRunner for getting junit report -->
<property name="test.runner.with.report" value="com.zutubi.android.junitreport.JUnitReportTestRunner" />

<!-- refer to run-tests-helper in ${sdk.dir}/tools/ant/build.xml -->
<macrodef name="run-tests-helper-with-report">
    <attribute name="emma.enabled" default="false" />
    <element name="extra-instrument-args" optional="yes" />
    <sequential>
        <echo>Running tests ...</echo>
        <exec executable="${adb}" failonerror="true">
            <arg line="${adb.device.arg}" />
            <arg value="shell" />
            <arg value="am" />
            <arg value="instrument" />
            <arg value="-w" />
            <arg value="-e" />
            <arg value="coverage" />
            <arg value="@{emma.enabled}" />
            <extra-instrument-args />
            <arg value="${manifest.package}/${test.runner.with.report}" />
        </exec>
    </sequential>
</macrodef>

<!-- customize system test target using run-tests-helper-with-report for getting junit report -->
<target name="test-with-report" depends="-test-project-check" description="Runs tests from the package defined in test.package property">

    <property name="tested.project.absolute.dir" location="${tested.project.dir}" />

    <!-- Application package of the tested project extracted from its manifest file -->
    <xpath input="${tested.project.absolute.dir}/AndroidManifest.xml" expression="/manifest/@package" output="tested.manifest.package" />
    <xpath input="AndroidManifest.xml" expression="/manifest/@package" output="manifest.package" />

    <property name="emma.dump.file" value="/data/data/${tested.manifest.package}/coverage.ec" />
    <property name="reports.dir" value="${out.dir}/reports" />
    <property name="files.dir" value="/data/data/${manifest.package}/files" />

    <echo>Cleaning up previous test reports...</echo>
    <delete dir="${reports.dir}" />
    <delete dir="${basedir}/coverage" />

    <if condition="${emma.enabled}">
        <then>
            <echo>WARNING: Code Coverage is currently only supported on the emulator and rooted devices.</echo>
            <run-tests-helper-with-report emma.enabled="true">
                <extra-instrument-args>
                    <arg value="-e" />
                    <arg value="coverageFile" />
                    <arg value="${emma.dump.file}" />
                </extra-instrument-args>
            </run-tests-helper-with-report>
            <echo>Downloading coverage file into project directory...</echo>
            <exec executable="${adb}" failonerror="true">
                <arg line="${adb.device.arg}" />
                <arg value="pull" />
                <arg value="${emma.dump.file}" />
                <arg value="coverage.ec" />
            </exec>
            <echo>Extracting coverage report...</echo>
            <emma>
                <report sourcepath="${tested.project.absolute.dir}/${source.dir}" verbosity="${verbosity}">
                    <!-- TODO: report.dir or something like should be introduced if necessary -->
                    <infileset dir=".">
                        <include name="coverage.ec" />
                        <include name="coverage.em" />
                    </infileset>
                    <!-- TODO: reports in other, indicated by user formats -->
                    <html outfile="ui-test-coverage.html" encoding="UTF-8"/>
                    <xml outfile="ui-test-coverage.xml" encoding="UTF-8"/>
                </report>
            </emma>
            <echo>Saving the report file in ${basedir}/coverage/coverage.html</echo>
        </then>
        <else>
            <run-tests-helper-with-report />
        </else>
    </if>

    <echo>Downloading XML test report...</echo>
    <mkdir dir="${reports.dir}" />
    <exec executable="${adb}" failonerror="true">
        <arg line="${adb.device.arg}" />
        <arg value="pull" />
        <arg value="/data/data/${tested.manifest.package}/files/junit-report.xml" />
        <arg value="${reports.dir}/ui-test-report.xml" />
    </exec>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:44.903

这些看起来你可能`Message`在你的`CalculatorData`类中调用了一个枚举。这能解释吗？

# javascript - 使用 PowerShell 将 VS2010 附加到 IE9 以调试 javascript

> ID：11684976
> 
> 赞同：0
> 
> 时间：2012-07-27T09:23:25.343
> 
> 标签：javascript, visual-studio-2010, powershell, visual-studio-debugging

问题（来自 nuget PowerShell）：

*   启动 IIS Express（网站在文件夹中）[完成]
*   启动 IE9 到 URL [完成]
*   将当前 VisualStudio 实例附加到 IIS 以调试 .net 代码 [完成]
*   将当前 VisualStudio 实例附加到 IE9 以调试 Javascript 代码 [问题]

地位：

目前，我可以从 powershell（使用 $DTE 对象）将 VS 附加到 IIS 和 IE9 选项卡进程。但是我无法调试 javascript 代码（我认为 VS 默认只调试 .net 代码而不是脚本）。

我看到了 EnvDTE80.Transport，但我不知道如何在 nuget PowerShell 中使用它。你有调试js的想法吗？还是完全不同的解决问题的方法？

**更新（8 月 8 日）：** 我可以附加到 IE9 调试 js 但我发现我的问题完全不同：

*   我用 powershell 运行 IIS Express
*   我用 powershell 运行 IE9
*   我可以得到“进程”对象

但是我过早地将调试器附加到进程并且调试不起作用。

*   我尝试（即）启动 IIS Express，启动 IE9，首先连接到 IIS，然后连接到 IE9。现在我可以调试脚本但不能调试 IIS Express。
*   在将 DTE 附加到进程之前，我尝试停止脚本 5 秒（Start-Sleep -s 5），现在我可以调试 IE js 和 IIS。但我不喜欢睡眠解决方案（多少秒？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:16:35.380

我没有通过 VS 对象模型而是通过 GUI 完成此操作，当您附加到 IE9 等正在运行的进程时，您可以选择所需的调试器类型。在这种情况下，您需要“脚本”调试器。如果这可以通过 GUI 完成，那么我怀疑它可以通过对象模型完成。VS 中的宏记录器非常适合解决此类问题。我在执行通过 GUI 附加的步骤时打开了它并得到了这个：

```
Sub TemporaryMacro()
    Try
        Dim dbg2 As EnvDTE80.Debugger2 = DTE.Debugger
        Dim trans As EnvDTE80.Transport = dbg2.Transports.Item("Default")
        Dim dbgeng(1) As EnvDTE80.Engine
        dbgeng(0) = trans.Engines.Item("Script")
        Dim proc2 As EnvDTE80.Process2 = dbg2.GetProcesses(trans, "HILLR1").Item("iexplore.exe")
        proc2.Attach2(dbgeng)
    Catch ex As System.Exception
        MsgBox(ex.Message)
    End Try

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:20:59.293

我使用 firebug 在 Firefox 中调试 Javascript。Chrome 有它的等价物。从未在 IE 中尝试过，但我认为 IE 有一个 Firebug 版本。

检查这个问题：[Internet Explorer 的 Firebug 等效项](https://stackoverflow.com/questions/4395135/firebug-equivalent-for-internet-explorer)

# python - Django：测试中的一般帮助

> ID：11684982
> 
> 赞同：1
> 
> 时间：2012-07-27T09:24:16.790
> 
> 标签：python, django

我知道这更像是一个学习的东西，而不是编程中的一个问题，但我仍然需要问它。请不要投反对票，如果我知道任何其他合适的地方，我不会在这里问它。我有一个看法如下：

```
def takedown(request,aid):
    approveobj = get_object_or_404(approve,pk=aid)

    # fetching mapping
    map = mapping.objects.get(appval=approveobj)

    try:
        # deleting option from main database
        map.optval.delete()

        # changing the status of the appval
        map.appval.status = 'Pending'
        map.appval.save()

        # finally deleting the map
        map.delete()

    except:
        print("Error in taking down the entry")

    redirect_url = "/wars/configure/"+str(map.appval.warval.id)+"/"
    return HttpResponseRedirect(redirect_url) 
```

我想为上述视图设计一些测试。目前我正在检查它是否重定向到适当的url。我还能测试什么？我需要彻底测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:31:17.217

查看您的视图，我可以看到其他三个可能的测试：

*   测试视图是否返回`aid`不存在的状态码 404
*   检查地图对象是否存在于数据库中。在测试中获取视图，然后检查地图对象是否已按预期删除。
*   当 try except 块中出现异常时，测试您的视图是否按预期工作。目前尚不清楚您预计会出现什么问题。请注意，因为您只打印错误，所以不会向用户显示任何内容，因此测试它很棘手。

# c#-4.0 - C# 与表达式的逆变

> ID：11684984
> 
> 赞同：0
> 
> 时间：2012-07-27T09:24:22.467
> 
> 标签：c#-4.0

```
public interface IMasterService<out T> : IDisposable
{
        T GetByID(int id);
        IEnumerable<T> GetAll();
        IEnumerable<T> Where(Expression<Func<T, bool>> func);
        int AddNew(T newEntity);
} 
```

无效方差：类型参数“T”必须在“IMasterService.Where(System.Linq.Expressions.Expression>)”上逆变有效。“T”是协变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:55:47.083

简而言之：如果你想使用`<out T>`那么你应该返回`T`，如果你想使用`<in T>`你需要`T`作为参数传递。不可能在一个界面上`out`同时使用。`in`现在我不能说为什么你不能使用`Expression<Func<T, bool>>`，但我会试着找出一些关于它的东西。

# java - 调试时如何进入Android OS的源代码？

> ID：11684992
> 
> 赞同：3
> 
> 时间：2012-07-27T09:24:40.710
> 
> 标签：java, android, eclipse, debugging, operating-system

在eclipse上调试Android应用程序时，有没有办法进入系统调用？

也许类似于在 Eclipse 中指向 JAR 库的源代码并在库代码上进行调试的方式。不同之处在于 Android 的系统库不是使用 Android 应用程序编译的，所以我不确定如何以及在哪里告诉 eclipse：“这是 Android 的源代码。在其中找到自己的方式。”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T09:39:25.950

1.  在您的 Android SDK 管理器中，检查并下载您正在使用的目标平台的“SDK 源”。
2.  当您在 Eclipse 中遇到错误并弹出调试透视图时，单击“附加源”并选择“外部文件夹”。导航到你的 android-sdk/sources/ 并选择与平台对应的文件夹。

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:44:34.380

你绝对可以做到这一点。

[http://android.opensourceror.org/2010/01/18/android-source/](http://android.opensourceror.org/2010/01/18/android-source/)

[http://www.mkyong.com/android/attach-android-source-code-to-eclipse-ide/](http://www.mkyong.com/android/attach-android-source-code-to-eclipse-ide/)

# javascript - 当我快速移动鼠标时，为什么我的 jQuery 会中断？

> ID：11684993
> 
> 赞同：0
> 
> 时间：2012-07-27T09:24:54.127
> 
> 标签：javascript, jquery, jquery-animate, break

我做了一些悬停状态，在元素悬停时显示 div。它工作得非常好，尽管如果我在它上面快速移动鼠标几次，它似乎会中断，并且 div 不再显示，直到我刷新页面。

任何可能导致这种情况的想法，因为它让我感到困惑。

```
$('#s2_coffeetable').hover(function() {
    $('#popup1').stop().animate({
        opacity: 'toggle'
    }, 5)
}, function() {
    $('#popup1').stop().animate({
        opacity: 'toggle'
    }, 5)
});
$('#s2_drinks').hover(function() {
    $('#popup2').stop().animate({
        opacity: 'toggle'
    }, 100)
}, function() {
    $('#popup2').stop().animate({
        opacity: 'toggle'
    }, 100)
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:32:46.180

试试这个`.stop( [clearQueue] [, jumpToEnd] )` [jQuery 参考](http://api.jquery.com/stop/)...

```
.stop(true, true) 
```

将这两个参数传递给停止功能。

# java - Solaris sparcv9 中的 JAVA_HOME

> ID：11684994
> 
> 赞同：1
> 
> 时间：2012-07-27T09:24:54.860
> 
> 标签：java, solaris, java-7, solaris-10

我正在尝试安装一个`Solaris 10 (Sparc)`请求`JAVA_HOME`路径的基于 java 的应用程序。我注意到`JAVA_HOME`Solaris Sparc 中的文件与 Solaris Intel 不同。当我将 JDK 安装目录设置为`JAVA_HOME`时，应用程序不会检测到这是一个有效的 JAVA_HOME。

您是否注意到任何类似的行为？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:31:01.587

你必须检查这个链接

1.  [在 Solaris 平台上设置 JAVA_HOME 和 PATH](http://docs.oracle.com/cd/E19062-01/sun.mgmt.ctr36/819-5418/system-prep-proc-3/index.html)
2.  [如何设置 JAVA_HOME 以及 Solaris 上的 whereis 在哪里？](http://www.geekality.net/2011/02/02/how-to-set-java_home-and-where-is-whereis-on-solaris/)

愿它帮助你...！

# python - Python 计算给定日期范围内的记录数

> ID：11684997
> 
> 赞同：0
> 
> 时间：2012-07-27T09:24:57.013
> 
> 标签：python, mysql

我们有一个后端表，它存储事务的详细信息，包括自纪元以来的秒数。我正在创建一个 UI，我在其中收集从日期到显示日期之间发生的交易计数。

假设日期范围是从 2012 年 7 月 1 日到 2012 年 7 月 30 日，我无法建立一个逻辑来增加该时间段内发生的记录的计数器。我应该只打一次数据库，因为每天打一次会导致性能不佳。

我陷入了一个逻辑：

```
Convert 07/01/2012 & 07/30/2012 to seconds since epoch.
Get the records for start date - end date [as converted to seconds since epoch] 
   For each record get the month / date 
     -- now how will we add counters for each date in between 07/01/2012 - 07/30/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:29:41.850

MySQL具有[`FROM_UNIXTIME`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)将自纪元以来的秒数转换为日期时间的功能，然后您可以提取`DATE`它的一部分（`YYYY-MM-DD`格式）并根据它进行分组。

```
SELECT DATE(FROM_UNIXTIME(timestamp_column)), COUNT(*)
FROM table_name
GROUP BY DATE(FROM_UNIXTIME(timestamp_column)) 
```

这将返回类似

```
2012-07-01  2
2012-07-03  4
… 
```

（没有交易的日子没有条目）

# android - Facebook 应用 android 贴在墙上

> ID：11684998
> 
> 赞同：1
> 
> 时间：2012-07-27T09:25:05.760
> 
> 标签：android, facebook

我在 Facebook 注册了一个 Android 应用程序，但我很难在用户的墙上和用户的朋友墙上发帖。例如，当我从应用程序发布到自己的墙上时，我是唯一可以看到该帖子的人。当我在我朋友的任何一个墙上发帖时，我没有收到任何错误，但帖子没有出现在他的墙上。该应用程序要求“publish_stream”权限，所以一开始我应该可以做到。我已经在 Facebook 文档和网络上进行了彻底的搜索，但我没有找到任何解决问题的方法。这是我执行发布的代码：

//我

`facebook.dialog(Activity, "feed", new PostDialogListener());`

//我的朋友

`Bundle params = new Bundle();`

`params.putString("to", "id_friend");`

`facebook.dialog(Activity, "feed", params new PostDialogListener());`

任何意见将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:03:00.453

我找到了。问题是在应用程序设置**中启用了沙盒。**一旦我禁用它，我就可以完美地发布在我的朋友墙上，也可以自己发布。

# javascript - 2个Firefox扩展之间的通信

> ID：11684999
> 
> 赞同：1
> 
> 时间：2012-07-27T09:25:11.693
> 
> 标签：javascript, firefox-addon

我正在开发一个 Firefox 扩展，我想知道是否可以从另一个扩展调用事件。

我想做的是使用 Firefox 扩展“MultiFox”中的功能。它允许用户使用新的会话设置打开一个新窗口，这意味着他可以同时打开同一站点的两个不同会话。

我在 Multifox 源代码中找到该函数没有问题，我想知道是否可以使用我的扩展程序调用此函数。我对Javascript不是很熟练，也没有找到方法......

我希望我足够清楚。有人知道怎么做这个吗？