# StackOverflow 问答 000495000-000495999

# .net - 网格不再调整大小

> ID：495001
> 
> 赞同：0
> 
> 时间：2009-01-30T09:56:11.843
> 
> 标签：.net, wpf, grid, resize

我将两个控件放在一个网格列中，并使第一个或第二个控件可见。由于网格列的宽度设置为自动，它将根据可见子项的宽度调整自身大小......除非我使用网格拆分器更改列的宽度。
现在，如果我切换子控件的可见性，该列不会再根据其内容调整自身大小。如何建立原始行为？

谢谢！

**编辑：**
该列的 width 属性是绑定到再次设置为 GridLength.Auto 的属性的数据（归功于 Martin Moser），但 Snoop 告诉我这将被忽略。所以（新）问题是如何将列的宽度设置回自动。

**编辑：**
一个例子

*   启动应用程序
*   使用复选框切换红色面板的可见性
*   => 正确调整第一列的大小
*   使用拆分器调整列大小
*   选中/取消选中复选框
*   => 不再调整第一列的大小

XAML：

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="Window1" Height="300"
        Width="300">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="CONV_KEY"></BooleanToVisibilityConverter>
    </Window.Resources>
    <Grid ShowGridLines="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <DockPanel Grid.Column="0" Width="100" Background="Red"
                Visibility="{Binding ElementName=_checkBox,Path=IsChecked,Converter={StaticResource CONV_KEY}}">
        </DockPanel>
        <DockPanel Grid.Column="0" Width="10" Background="Green" HorizontalAlignment="Left"></DockPanel>
        <GridSplitter Grid.Column="1" Width="10" ResizeBehavior="PreviousAndNext"></GridSplitter>
        <CheckBox x:Name="_checkBox" Grid.Column="3" VerticalAlignment="Top">Toggle</CheckBox>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T09:59:41.073

您是否尝试在需要时再次将 columndefinition 的 Width 设置为 GridLength.Auto？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T10:50:26.993

这是一个相当黑客，但尝试将宽度设置为某个固定值，然后返回自动，这应该会触发更改，并且该值不应该被忽略，也许它正在工作......

# c# - 密封类中的受保护成员

> ID：495004
> 
> 赞同：1
> 
> 时间：2009-01-30T09:58:04.087
> 
> 标签：c#, .net

我正在编写一个 WebPart，这意味着我继承`System.Web.UI.WebControls.WebParts.WebPart`并覆盖了方法`protected override void CreateChildControls()`。

但是，如果可能的话，我想创建这个类`sealed`，但这会带来两个问题：只是密封类会发出警告“在密封类中声明的新受保护成员”。

将访问修饰符从更改`protected`为`private`或`internal`给出编译器错误，告诉我在继承时无法更改修饰符。

这让我想知道：密封它并忽略警告有什么问题吗？或者这会导致进一步的负面影响吗？它*似乎*工作得很好，但魔鬼通常在细节中。

**编辑：**我只是愚蠢。“新受保护成员”错误是针对一个确实没有被覆盖的函数，只是意外地被声明为`protected`. 感谢您的 Pragma-Tip！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-04-16T15:35:41.717

子类可以看到受保护的成员，因此您稍微更改了类的接口；如果您将其声明为“私有”，则它只会在本地看到，因此不会影响界面。

声明您的方法私有不受保护，警告应该消失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T10:05:08.347

你确定你覆盖正确吗？就我个人而言，我无法重现这种行为。但如果你担心，你可以使用

```
#pragma warning disable 0628
// Offending code
#pragma warning restore 0628 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-30T10:02:41.363

它说在类中声明了一个*新*的受保护成员这一事实有点令人担忧。

嗯......我无法在简单的测试代码中重现这一点：

```
using System;

public class Base
{
    protected virtual void Foo()
    {
    }
}

public sealed class Derived : Base
{
    protected override void Foo()
    {
    }
} 
```

使用 .NET 3.5SP1 编译时不会出现警告。您*确定*要覆盖基本方法吗？检查你是否真的得到了`override`修饰符。（对不起，如果这听起来很傲慢——我并不是要指责你松懈或任何事情。否则我只是难住了......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T10:16:18.823

在我看来，这听起来很愚蠢。我会忽略这个警告，毕竟它只是说明你正在做的事情是不合逻辑的，就像在抽象类型上有一个公共 ctor 一样。最坏的情况是有点混乱。

我想我也有这个，但只是在紧凑框架代码中，在这种情况下是完整框架吗？

# .net - 强制 ActionLinks 呈现为小写

> ID：495006
> 
> 赞同：8
> 
> 时间：2009-01-30T09:59:31.510
> 
> 标签：.net, asp.net-mvc

在不创建我自己的 ActionLink HtmlHelper 的情况下，有没有办法强制将任何 ActionLink 呈现为小写？

**更新：** 查看以下链接以扩展 RouteCollection 以添加 LowecaseRoutes ~~[ [http://www.makiwa.com/index.php/2008/05/31/lowercase-mvc-route-urls/]](http://www.makiwa.com/index.php/2008/05/31/lowercase-mvc-route-urls/])~~ ~~[ [http://goneale .wordpress.com/2008/12/19/lowercase-route-urls-in-aspnet-mvc/]](http://goneale.wordpress.com/2008/12/19/lowercase-route-urls-in-aspnet-mvc/])~~

**更新 - 2011 年 2 月 3 日：** 由于上面的两个链接现在不再有效，我不久前就用我的解决方案发表了一篇文章

[http://blog.lukesmith.net/2009/02/01/generating-and-enforcing-that-any-link-and-request-is-lowercase-with-aspnet-mvc/](http://blog.lukesmith.net/2009/02/01/generating-and-enforcing-that-any-link-and-request-is-lowercase-with-aspnet-mvc/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-30T12:17:39.330

处理此问题的最佳方法是在路由级别。强制所有路由路径为小写，它将正确传播到您的操作链接等。

我解决这个问题的方法是创建一个继承`Route`并简单地覆盖该`GetVirtualPath`方法的新路由类；

```
public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
{
    var virtualPath = base.GetVirtualPath(requestContext, values);

    if (virtualPath != null)
        virtualPath.VirtualPath = virtualPath.VirtualPath.ToLowerInvariant();

    return virtualPath;
} 
```

我还创建了一些扩展方法，`RouteCollection`以便于使用这个新的路由类。

# ftp - ftp连接问题

> ID：495011
> 
> 赞同：0
> 
> 时间：2009-01-30T10:01:51.770
> 
> 标签：ftp, download, backgroundworker, connect

我有一个使用 BackgroundWorker 实现的应用程序，它使用 LumiSoft 库定期连接到 ftp（用于下载和上传）。它工作得很好，但过了一段时间（比如说 2 - 3 小时）线程（后台工作人员）在 Connect 方法下阻塞（女巫不会抛出任何异常）。这是失败的代码部分：try {

```
 ftp = new FTP_Client();
            logMessages = "";
            logMessages += Utils.FormatLogMessage("Ftp wants to connect " +
                seData.host, Utils.MessageType.Info);
            worker.ReportProgress(0);

            ftp.Connect(seData.host, 21);
            ftp.Authenticate(seData.userName, seData.password);

            logMessages = "";
            logMessages += Utils.FormatLogMessage("Ftp connected to " +
                seData.host, Utils.MessageType.Info);
            error = false;
            worker.ReportProgress(0);
            System.Threading.Thread.Sleep(200);
            logMessages = "";
        }
        catch (Exception ex)
        {
            logMessages = "";
            if (ftp.IsConnected)
            {
                ftp.Disconnect();
            }
            ftp.Dispose();
            logMessages += Utils.FormatLogMessage(ex.Message,  Utils.MessageType.Error);
            logMessages += Utils.FormatLogMessage("Trying to reconnect in " +
                seData.recTime.ToString() + " seconds", Utils.MessageType.Info);
            worker.ReportProgress(0);
            Beep(500, 500);
            System.Threading.Thread.Sleep(seData.recTime * 1000);
            error = true;
        } 
```

假设每 2 分钟执行一次。所以它会阻止“ftp.Connect(seData.host, 21);” 这只会在一段时间后发生。知道为什么会这样吗？如果您有任何建议，请告诉我。谢谢。达纳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T10:06:37.470

除非捕获到异常，否则您似乎不会处理 FTP_Client 对象？还是你遗漏了一些代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T10:36:44.743

@Mitch Wheat 我每次都在尝试/捕获之前处理 FTP_Client 。我只是省略了那部分代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T10:38:38.203

@jhornnes 我认为不是这样。有时它甚至会运行 2 天（连接和断开连接）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T10:04:28.070

它会自行关闭端口吗？如果没有，可能它超过了最大可用网络端口。

# asp.net - 删除未使用的 ASP.NET 成员表是否安全？

> ID：495017
> 
> 赞同：8
> 
> 时间：2009-01-30T10:05:45.337
> 
> 标签：asp.net, sql, asp.net-membership

我将在我的网站上使用 ASP.NET Membership 模型。但是，我不打算使用多个表，例如： aspnet *Paths aspnet* PersonalizationAllUsers aspnet *PersonalizationPerUser aspnet* Profile aspnet *WebEvent* Events

删除这些表是否安全，或者我会导致 ASP.NET 的成员资格框架的工作方式出现问题（在 System.Web.Security 中）？

我真的很喜欢保持清洁，这些桌子让我很困扰。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-30T10:21:11.623

使用[aspnet_regsql.exe](http://msdn.microsoft.com/en-us/library/ms229862(VS.80).aspx)并选择要删除的部分：

```
-R all|m|r|p|c|w 
```

> all - 所有服务，包括服务共享的公用表和存储过程
> 
> m - 会员资格
> 
> r - 角色管理器
> 
> p - 简介
> 
> c - Web 部件个性化
> 
> w - 网络事件

将来，使用参数运行该工具`-A mr`以仅添加成员资格和角色管理器。

# c++ - 为什么模板只能在头文件中实现？

> ID：495021
> 
> 赞同：2055
> 
> 时间：2009-01-30T10:06:50.997
> 
> 标签：c++, templates, undefined-reference, c++-faq

引用[C++ 标准库：教程和手册](http://books.google.com/books?id=n9VEG2Gp5pkC&pg=PA10&lpg=PA10&dq=%22The%20only%20portable%20way%20of%20using%20templates%20at%20the%20moment%20is%20to%20implement%20them%20in%20header%20files%20by%20using%20inline%20functions.%22&source=bl&ots=Ref8pl8dPX&sig=t4K5gvxtBblpcujNxodpwMfei8I&hl=en&ei=qkR6TvbiGojE0AHq4IzqAg&sa=X&oi=book_result&ct=result&resnum=3&ved=0CC8Q6AEwAg#v=onepage&q=%22The%20only%20portable%20way%20of%20using%20templates%20at%20the%20moment%20is%20to%20implement%20them%20in%20header%20files%20by%20using%20inline%20functions.%22&f=false)：

> 目前使用模板的唯一可移植方式是通过使用内联函数在头文件中实现它们。

为什么是这样？

（澄清：头文件不是*唯一*的可移植解决方案。但它们是最方便的可移植解决方案。）

* * *

## 回答 #1

> 赞同：1808
> 
> 时间：2009-01-30T10:26:41.987

警告：*没有*必要将实现放在头文件中，请参阅此答案末尾的替代解决方案。

无论如何，您的代码失败的原因是，在实例化模板时，编译器会使用给定的模板参数创建一个新类。例如：

```
template<typename T>
struct Foo
{
    T bar;
    void doSomething(T param) {/* do stuff using T */}
};

// somewhere in a .cpp
Foo<int> f; 
```

读到这一行时，编译器会新建一个类（我们称之为`FooInt`），相当于如下：

```
struct FooInt
{
    int bar;
    void doSomething(int param) {/* do stuff using int */}
} 
```

因此，编译器需要访问方法的实现，以使用模板参数（在本例中`int`）实例化它们。如果这些实现不在标头中，它们将无法访问，因此编译器将无法实例化模板。

一个常见的解决方案是在头文件中编写模板声明，然后在实现文件（例如 .tpp）中实现该类，并将该实现文件包含在头文件的末尾。

Foo.h

```
template <typename T>
struct Foo
{
    void doSomething(T param);
};

#include "Foo.tpp" 
```

文件.tpp

```
template <typename T>
void Foo<T>::doSomething(T param)
{
    //implementation
} 
```

这样，实现仍然与声明分离，但编译器可以访问。

# 替代解决方案

另一种解决方案是保持实现分离，并显式实例化您需要的所有模板实例：

Foo.h

```
// no implementation
template <typename T> struct Foo { ... }; 
```

Foo.cpp

```
// implementation of Foo's methods

// explicit instantiations
template class Foo<int>;
template class Foo<float>;
// You will only be able to use Foo with int or float 
```

如果我的解释不够清楚，您可以查看[有关此主题的 C++ Super-FAQ](https://isocpp.org/wiki/faq/templates#templates-defn-vs-decl)。

* * *

## 回答 #2

> 赞同：311
> 
> 时间：2013-05-11T03:54:29.680

这是因为需要单独编译并且因为模板是实例化风格的多态性。

让我们更接近具体的解释。假设我有以下文件：

*   foo.h
    *   声明接口`class MyClass<T>`
*   foo.cpp
    *   定义了实现`class MyClass<T>`
*   酒吧.cpp
    *   用途`MyClass<int>`

单独编译意味着我应该能够独立于**bar.cpp编译****foo.cpp**。编译器完全独立地对每个编译单元进行分析、优化和代码生成的所有艰苦工作；我们不需要做整个程序分析。只有链接器需要一次处理整个程序，而链接器的工作要容易得多。

 ******编译foo.cpp时****bar.cpp**甚至不需要存在，但是我仍然应该能够将我已经拥有的**foo.o**与我刚刚生成的 bar.o 链接在一起，而无需**重新**编译**foo .cpp**。**foo.cpp**甚至可以编译成动态库，在没有**foo.cpp**的情况下分发到其他地方，并与他们在我编写**foo.cpp**多年后编写的代码链接。**

 **“实例化风格的多态性”意味着模板`MyClass<T>`并不是一个真正的泛型类，它可以编译为可以用于任何值的代码`T`。这会增加诸如装箱之类的开销，需要将函数指针传递给分配器和构造函数等。C++ 模板的目的是避免编写几乎相同`class MyClass_int`的 ,`class MyClass_float`等，但仍然能够以编译后的代码结束大部分情况下，就好像我们*分别*编写了每个版本一样。所以一个模板*实际上就是*一个模板。类模板*不是*`T`类，它是为我们遇到的每个创建新类的秘诀。模板不能编译成代码，只能编译模板实例化的结果。

所以当**foo.cpp**被编译时，编译器看不到**bar.cpp**就知道它`MyClass<int>`是需要的。它可以看到模板`MyClass<T>`，但不能为此发出代码（它是模板，而不是类）。并且当**bar.cpp**被编译时，编译器可以看到它需要创建 a `MyClass<int>`，但是它看不到模板`MyClass<T>`（只有它在**foo.h**中的接口）所以它不能创建它。

如果**foo.cpp**本身使用，则在编译**foo.cpp**`MyClass<int>`时将生成该代码，因此当**bar.o**链接到**foo.o**时，它们可以连接并工作。我们可以利用这一事实，通过编写单个模板，在 .cpp 文件中实现一组有限的模板实例化。但是**bar.cpp**无法将模板*用作模板*并在它喜欢的任何类型上实例化它；它只能使用**foo.cpp**的作者认为提供的模板类的预先存在版本。

 *******您可能会认为在编译模板时，编译器应该“生成所有版本”，在链接期间将那些从未使用过的版本过滤掉。除了巨大的开销和这种方法将面临的极端困难之外，因为像指针和数组这样的“类型修饰符”特性甚至允许内置类型产生无限数量的类型，当我现在扩展我的程序时会发生什么通过增加：

*   baz.cpp
    *   声明、实现`class BazPrivate`和使用`MyClass<BazPrivate>`

除非我们

1.  每次我们更改*程序中的任何其他文件*时都必须重新编译**foo.cpp**，以防它添加了一个新的新实例*`MyClass<T>`*
**   要求**baz.cpp**包含（可能通过标头包含）的完整模板`MyClass<T>`，以便编译器可以`MyClass<BazPrivate>`在编译**baz.cpp**期间生成。*

 *没有人喜欢（1），因为整个程序分析编译系统需要很*长时间*才能编译，并且因为它使得在没有源代码的情况下分发编译的库是不可能的。所以我们有（2）。

* * *

## 回答 #3

> 赞同：265
> 
> 时间：2009-08-13T13:49:17.290

这里有很多正确的答案，但我想添加这个（为了完整性）：

如果您在实现 cpp 文件的底部对模板将使用的所有类型进行显式实例化，则链接器将能够像往常一样找到它们。

编辑：添加显式模板实例化的示例。在定义了模板并且定义了所有成员函数后使用。

```
template class vector<int>; 
```

这将实例化（并因此使链接器可用）类及其所有成员函数（仅）。类似的语法适用于函数模板，因此如果您有非成员运算符重载，您可能需要对它们执行相同的操作。

上面的例子是相当无用的，因为向量是在头文件中完全定义的，除非一个通用的包含文件（预编译的头文件？）使用`extern template class vector<int>`它以防止它在所有*其他*（1000 个？）使用向量的文件中实例化它。

* * *

## 回答 #4

> 赞同：90
> 
> 时间：2009-01-30T10:23:36.627

在将模板实际编译为目标代码之前，需要由编译器对其进行*实例化。*只有在模板参数已知的情况下才能实现此实例化。现在想象一个模板函数在 中声明`a.h`、定义`a.cpp`和使用的场景`b.cpp`。编译时`a.cpp`，不一定知道即将进行的编译`b.cpp`将需要模板的一个实例，更不用说那是哪个特定实例了。对于更多的头文件和源文件，情况很快就会变得更加复杂。

有人可能会争辩说，编译器可以变得更智能，以便为模板的所有用途“向前看”，但我确信创建递归或其他复杂的场景并不难。AFAIK，编译器不会做这样的展望。正如 Anton 所指出的，一些编译器支持模板实例化的显式导出声明，但并非所有编译器都支持它（还没有？）。

* * *

## 回答 #5

> 赞同：68
> 
> 时间：2009-01-30T13:38:59.820

实际上，在 C++11 之前，该标准定义了*可以*在头文件中声明模板并在其他地方实现它们的`export`关键字。（从某种意义上说。并非如此，正如唯一*实现*该功能的人[指出的那样](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1426.pdf)。）

 **没有一个流行的编译器实现了这个关键字。该功能的唯一实现是在 Edison Design Group 编写的前端中，Comeau C++ 编译器使用该前端。所有其他人都要求您在头文件中编写模板，因为编译器需要模板定义才能正确实例化（正如其他人已经指出的那样）。

因此，ISO C++ 标准委员会决定在`export`C++11 中移除模板的特性。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2009-01-30T10:15:20.730

尽管标准 C++ 没有这样的要求，但一些编译器要求所有函数和类模板都需要在它们使用的每个翻译单元中可用。实际上，对于那些编译器，模板函数的主体必须在头文件中可用。重复一遍：这意味着那些编译器不允许在非头文件（如 .cpp 文件）中定义它们

有一个*export*关键字应该可以缓解这个问题，但它离可移植还差得很远。

* * *

## 回答 #7

> 赞同：35
> 
> 时间：2013-05-12T16:42:41.627

模板经常用在头文件中，因为编译器需要实例化不同版本的代码，具体取决于模板参数给定/推导的参数，并且（作为程序员）更容易让编译器重新编译相同的代码多次并在以后进行重复数据删除. 请记住，模板并不直接代表代码，而是该代码的多个版本的模板。当你在一个文件中编译一个非模板函数时`.cpp`，你正在编译一个具体的函数/类。模板不是这样，它可以用不同的类型实例化，即用具体类型替换模板参数时必须发出具体代码。

有一个带有`export`关键字的功能，旨在用于单独编译。该`export`功能已被弃用，`C++11`并且，AFAIK，只有一个编译器实现了它。你不应该使用`export`. 单独编译是不可能的，`C++`或者`C++11`，但也许是`C++17`，如果有概念，我们可以有一些单独编译的方法。

为了实现单独的编译，必须可以进行单独的模板主体检查。似乎可以通过概念解决问题。看看最近在标准委员会会议上提交的这篇[论文。](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3629.pdf)我认为这不是唯一的要求，因为您仍然需要在用户代码中为模板代码实例化代码。

模板的单独编译问题我猜这也是迁移到模块时出现的问题，目前正在解决这个问题。

编辑：截至 2020 年 8 月，C++ 模块已经成为现实：[https ://en.cppreference.com/w/cpp/language/modules](https://en.cppreference.com/w/cpp/language/modules)

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2016-05-12T14:02:10.633

尽管上面有很多很好的解释，但我还是缺少一种将模板分成标题和正文的实用方法。
当我更改其定义时，我主要关心的是避免重新编译所有模板用户。
在模板主体中包含所有模板实例对我来说不是一个可行的解决方案，因为模板作者可能不知道所有模板的用法，并且模板用户可能无权修改它。
我采用了以下方法，它也适用于较旧的编译器（gcc 4.3.4，aCC A.03.13）。

对于每个模板用法，在其自己的头文件中都有一个 typedef（从 UML 模型生成）。它的主体包含实例化（最终在最后链接的库中）。
模板的每个用户都包含该头文件并使用 typedef。

示意图示例：

我的模板.h：

```
#ifndef MyTemplate_h
#define MyTemplate_h 1

template <class T>
class MyTemplate
{
public:
  MyTemplate(const T& rt);
  void dump();
  T t;
};

#endif 
```

我的模板.cpp：

```
#include "MyTemplate.h"
#include <iostream>

template <class T>
MyTemplate<T>::MyTemplate(const T& rt)
: t(rt)
{
}

template <class T>
void MyTemplate<T>::dump()
{
  cerr << t << endl;
} 
```

MyInstantiatedTemplate.h：

```
#ifndef MyInstantiatedTemplate_h
#define MyInstantiatedTemplate_h 1
#include "MyTemplate.h"

typedef MyTemplate< int > MyInstantiatedTemplate;

#endif 
```

MyInstantiatedTemplate.cpp：

```
#include "MyTemplate.cpp"

template class MyTemplate< int >; 
```

主.cpp：

```
#include "MyInstantiatedTemplate.h"

int main()
{
  MyInstantiatedTemplate m(100);
  m.dump();
  return 0;
} 
```

这样，只有模板实例需要重新编译，而不是所有模板用户（和依赖项）。

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2009-01-30T10:53:32.400

这意味着定义模板类的方法实现的最可移植的方式是在模板类定义中定义它们。

```
template < typename ... >
class MyClass
{

    int myMethod()
    {
       // Not just declaration. Add method implementation here
    }
}; 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2016-07-19T01:10:05.473

当您在编译步骤中使用模板时，编译器将为每个模板实例化生成代码。在编译和链接过程中，.cpp 文件被转换为纯对象或机器代码，其中包含引用或未定义的符号，因为 main.cpp 中包含的 .h 文件还没有实现。这些已准备好与另一个定义模板实现的目标文件链接，因此您拥有完整的 a.out 可执行文件。

但是，由于模板需要在编译步骤中进行处理，以便为您定义的每个模板实例化生成代码，所以简单地编译一个与其头文件分开的模板是行不通的，因为它们总是手牵手，原因很简单从字面上看，每个模板实例化都是一个全新的类。在常规类中，您可以将 .h 和 .cpp 分开，因为 .h 是该类的蓝图，而 .cpp 是原始实现，因此可以定期编译和链接任何实现文件，但是使用模板 .h 是如何使用模板的蓝图类的外观不应是对象的外观，这意味着模板 .cpp 文件不是类的原始常规实现，它只是类的蓝图，因此 .h 模板文件的任何实现都可以

因此，模板永远不会单独编译，并且只会在您在其他源文件中有具体实例的地方编译。但是具体的实例化需要知道模板文件的实现，因为简单的修改`typename T`在 .h 文件中使用具体类型不会完成这项工作，因为有什么 .cpp 可以链接，我以后找不到它，因为记住模板是抽象的，无法编译，所以我被迫现在给出实现，所以我知道要编译和链接什么，现在我有了实现，它被链接到封闭的源文件中。基本上，当我实例化一个模板时，我需要创建一个全新的类，如果我不知道在使用我提供的类型时该类应该是什么样子，除非我通知编译器模板实现，所以现在编译器可以`T`用我的类型替换并创建一个可以编译和链接的具体类。

总而言之，模板是类外观的蓝图，类是对象外观的蓝图。我不能将模板与具体实例分开编译，因为编译器只编译具体类型，换句话说，至少在 C++ 中的模板是纯语言抽象。可以这么说，我们必须对模板进行去抽象化，我们通过给它们一个具体的类型来处理它们，这样我们的模板抽象就可以转换为一个常规的类文件，进而可以正常编译它。将模板 .h 文件和模板 .cpp 文件分开是没有意义的。这是荒谬的，因为 .cpp 和 .h 的分离仅是 .cpp 可以单独编译和单独链接的地方，因为我们不能单独编译它们，因为模板是一种抽象，

意思`typename T`是 get 在编译步骤而不是链接步骤中被替换，所以如果我尝试编译模板而不`T`被替换为对编译器完全没有意义的具体值类型，因此无法创建目标代码，因为它没有知道是什么`T`。

在技​​术上可以创建某种功能来保存 template.cpp 文件并在它在其他来源中找到它们时切换类型，我认为该标准确实有一个关键字`export`可以让您将模板放在单独的cpp 文件，但实际上并没有多少编译器实现这一点。

附带说明一下，在对模板类进行特化时，您可以将标头与实现分开，因为定义上的特化意味着我专门针对可以单独编译和链接的具体类型。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2018-07-19T00:49:05.703

只是在这里添加一些值得注意的东西。当它们不是函数模板时，可以在实现文件中定义模板类的方法。

* * *

我的队列.hpp：

```
template <class T> 
class QueueA {
    int size;
    ...
public:
    template <class T> T dequeue() {
       // implementation here
    }

    bool isEmpty();

    ...
} 
```

* * *

我的队列.cpp：

```
// implementation of regular methods goes like this:
template <class T> bool QueueA<T>::isEmpty() {
    return this->size == 0;
}

main()
{
    QueueA<char> Q;

    ...
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2011-09-17T03:40:18.877

这是完全正确的，因为编译器必须知道分配的类型。因此，模板类、函数、枚举等必须在头文件中实现，如果它要公开或作为库的一部分（静态或动态），因为头文件不像 c/cpp 文件那样编译是。如果编译器不知道类型是无法编译的。在 .Net 中它可以，因为所有对象都派生自 Object 类。这不是.Net。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2016-07-27T05:01:10.433

如果担心将 .h 编译为使用它的所有 .cpp 模块的一部分而产生的额外编译时间和二进制大小膨胀，在许多情况下，您可以做的是使模板类从非模板化基类下降接口的非类型相关部分，并且该基类可以在 .cpp 文件中实现。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2017-05-13T01:42:11.993

一种单独实现的方法如下。

```
//inner_foo.h

template <typename T>
struct Foo
{
    void doSomething(T param);
};

//foo.tpp
#include "inner_foo.h"
template <typename T>
void Foo<T>::doSomething(T param)
{
    //implementation
}

//foo.h
#include <foo.tpp>

//main.cpp
#include <foo.h> 
```

inner_foo 具有前向声明。foo.tpp 有实现并包含 inner_foo.h；并且 foo.h 将只有一行，包括 foo.tpp。

在编译时，将 foo.h 的内容复制到 foo.tpp，然后将整个文件复制到 foo.h，然后编译。这样就没有任何限制，而且命名一致，换来一个额外的文件。

我这样做是因为代码的静态分析器在看不到 *.tpp 中的类的前向声明时会中断。在任何 IDE 中编写代码或使用 YouCompleteMe 或其他人时，这很烦人。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-02-17T20:30:55.853

我建议查看这个 gcc 页面，该页面讨论了模板实例化的“cfront”和“borland”模型之间的权衡。

[https://gcc.gnu.org/onlinedocs/gcc-4.6.4/gcc/Template-Instantiation.html](https://gcc.gnu.org/onlinedocs/gcc-4.6.4/gcc/Template-Instantiation.html)

“borland”模型对应于作者的建议，提供完整的模板定义，并多次编译。

它包含有关使用手动和自动模板实例化的明确建议。例如，“-repo”选项可用于收集需要实例化的模板。或者另一种选择是使用“-fno-implicit-templates”禁用自动模板实例化以强制手动模板实例化。

根据我的经验，我依赖于为每个编译单元实例化的 C++ 标准库和 Boost 模板（使用模板库）。对于我的大型模板类，我会为我需要的类型进行一次手动模板实例化。

这是我的方法，因为我提供的是工作程序，而不是用于其他程序的模板库。这本书的作者 Josuttis 在模板库方面做了很多工作。

如果我真的担心速度，我想我会探索使用预编译头 [https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html](https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html)

这在许多编译器中获得了支持。但是，我认为模板头文件很难预编译头文件。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2019-03-19T19:33:46.653

在头文件中编写声明和定义是个好主意的另一个原因是为了便于阅读。假设 Utility.h 中有这样一个模板函数：

```
template <class T>
T min(T const& one, T const& theOther); 
```

在 Utility.cpp 中：

```
#include "Utility.h"
template <class T>
T min(T const& one, T const& other)
{
    return one < other ? one : other;
} 
```

这要求这里的每个 T 类都实现小于运算符 (<)。当您比较两个未实现“<”的类实例时，它将引发编译器错误。

因此，如果您将模板声明和定义分开，您将无法仅读取头文件以查看此模板的来龙去脉，以便在您自己的类上使用此 API，尽管编译器会在此告诉您关于需要覆盖哪个运算符的情况。

* * *

## 回答 #17

> 赞同：-9
> 
> 时间：2019-03-11T18:38:08.177

您实际上可以在 .template 文件而不是 .cpp 文件中定义模板类。谁说你只能在头文件中定义它是错误的。这一直可以追溯到 c++ 98。

不要忘记让您的编译器将您的 .template 文件视为 c++ 文件以保持智能感知。

这是一个动态数组类的示例。

```
#ifndef dynarray_h
#define dynarray_h

#include <iostream>

template <class T>
class DynArray{
    int capacity_;
    int size_;
    T* data;
public:
    explicit DynArray(int size = 0, int capacity=2);
    DynArray(const DynArray& d1);
    ~DynArray();
    T& operator[]( const int index);
    void operator=(const DynArray<T>& d1);
    int size();

    int capacity();
    void clear();

    void push_back(int n);

    void pop_back();
    T& at(const int n);
    T& back();
    T& front();
};

#include "dynarray.template" // this is how you get the header file

#endif 
```

现在在您的 .template 文件中，您可以按照通常的方式定义函数。

```
template <class T>
DynArray<T>::DynArray(int size, int capacity){
    if (capacity >= size){
        this->size_ = size;
        this->capacity_ = capacity;
        data = new T[capacity];
    }
    //    for (int i = 0; i < size; ++i) {
    //        data[i] = 0;
    //    }
}

template <class T>
DynArray<T>::DynArray(const DynArray& d1){
    //clear();
    //delete [] data;
    std::cout << "copy" << std::endl;
    this->size_ = d1.size_;
    this->capacity_ = d1.capacity_;
    data = new T[capacity()];
    for(int i = 0; i < size(); ++i){
        data[i] = d1.data[i];
    }
}

template <class T>
DynArray<T>::~DynArray(){
    delete [] data;
}

template <class T>
T& DynArray<T>::operator[]( const int index){
    return at(index);
}

template <class T>
void DynArray<T>::operator=(const DynArray<T>& d1){
    if (this->size() > 0) {
        clear();
    }
    std::cout << "assign" << std::endl;
    this->size_ = d1.size_;
    this->capacity_ = d1.capacity_;
    data = new T[capacity()];
    for(int i = 0; i < size(); ++i){
        data[i] = d1.data[i];
    }

    //delete [] d1.data;
}

template <class T>
int DynArray<T>::size(){
    return size_;
}

template <class T>
int DynArray<T>::capacity(){
    return capacity_;
}

template <class T>
void DynArray<T>::clear(){
    for( int i = 0; i < size(); ++i){
        data[i] = 0;
    }
    size_ = 0;
    capacity_ = 2;
}

template <class T>
void DynArray<T>::push_back(int n){
    if (size() >= capacity()) {
        std::cout << "grow" << std::endl;
        //redo the array
        T* copy = new T[capacity_ + 40];
        for (int i = 0; i < size(); ++i) {
            copy[i] = data[i];
        }

        delete [] data;
        data = new T[ capacity_ * 2];
        for (int i = 0; i < capacity() * 2; ++i) {
            data[i] = copy[i];
        }
        delete [] copy;
        capacity_ *= 2;
    }
    data[size()] = n;
    ++size_;
}

template <class T>
void DynArray<T>::pop_back(){
    data[size()-1] = 0;
    --size_;
}

template <class T>
T& DynArray<T>::at(const int n){
    if (n >= size()) {
        throw std::runtime_error("invalid index");
    }
    return data[n];
}

template <class T>
T& DynArray<T>::back(){
    if (size() == 0) {
        throw std::runtime_error("vector is empty");
    }
    return data[size()-1];
}

template <class T>
T& DynArray<T>::front(){
    if (size() == 0) {
        throw std::runtime_error("vector is empty");
    }
    return data[0];
    } 
```

# c# - C#：如何防止主窗体显示得太早

> ID：495026
> 
> 赞同：2
> 
> 时间：2009-01-30T10:12:48.067
> 
> 标签：c#, winforms

在我的 main 方法中，我照常启动主窗体：

```
 Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm()); 
```

在主要表单中加载我有以下内容，它将要求用户登录和内容。

```
 using (loginForm)
        {
            DialogResult r = loginForm.ShowDialog();
            switch (r)
            {
                case DialogResult.OK:
                    break;
                default:
                    Application.Exit();
                    return;

            }
        } 
```

我的问题是主窗体显示在后台，我希望它，嗯......不是。直到登录正常。我该怎么做？Application.Run() 方法说它会自动显示表单。是否有另一种方法可以在不显示主窗体的情况下启动它？或者我是否必须在主窗体的构造函数中将可见设置为 false，然后在登录完成后返回 true，或者类似的东西？做这样的事情的推荐方法是什么？登录表单意图就像一个组合的闪屏和登录。所以首先它加载并设置了一些不同的东西，然后它告诉用户登录。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-30T10:18:41.893

代替：

```
Application.Run(new MainForm()); 
```

尝试：

```
LoginDialog // the class that handles login UI
  login = new LoginDialog ();

if (login.ShowDialog () == DialogResult.OK)
{
   // check credentials
   // if credentials OK
   Application.Run(new MainForm());
} 
```

该`ShowDialog`方法是一个阻塞调用，程序将停止，直到对话框响应用户输入而关闭 - 通过按下“确定”按钮或“取消”按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T10:15:27.517

最简单的方法是使用 Application.Run 启动登录表单。当登录正常并设置其他内容时，只需显示“主”表单。

```
Application.Run(new LoginForm()); 
```

并在“确定”按钮上的登录表单中：

```
this.Visible = false;
this.ShowInTaskbar = false;
MainForm mainForm = new MainForm();
mainForm.Show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T11:46:34.460

我喜欢 Skizz 的回答，但如果这对您没有帮助，您也可以在 MainForm 的事件加载中执行此操作。只需将代码放在那里即可显示登录对话框。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-01-30T11:26:12.053

`sleep`在调用 mainForm 之前大约有一点？还是 OnLoadComplet？

# php - 选择元素应返回 2 个值

> ID：495037
> 
> 赞同：1
> 
> 时间：2009-01-30T10:17:09.587
> 
> 标签：php, jquery, html, html-select

我有一个带有选项的选择框。选项的值获取每个选项中显示的项目的 ID。
我确实有其他值应该与此选项相关联。是否有捷径可寻？

```
<select id="category" name="data[cat]">
<option value="12" label="0">A</option>
<option value="7" label="0">B</option>
</select> 
```

我尝试通过将第二个值输入标签属性来做到这一点，但问题是我不知道获取所选选项的标签值的正确方法。这是用 jQuery 编写的。

要获得我使用的选定选项：

```
$("#category").livequery('change', function () {            
      var catId = ($(this)[0].value); 
}); 
```

这很好用，但我只是不知道如何获取所选选项的标签值。或者也许是解决这个问题的更好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T10:26:44.170

某些浏览器使用该`label`属性来显示选项的内容，因此您的列表框可能会显示两个`0`选项。

更好的解决方案可能是执行以下操作：

```
<select id="category" name="data[cat]">
    <option value="12,0">A</option>
    <option value="7,0">B</option>
</select> 
```

并拆分事件处理程序中的值，例如

```
$("#category").livequery('change', function () {            
    var values = ($(this)[0].value).split(",");
    var catId = values[0];
    var otherId = values[1];
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-30T10:30:35.473

一种方法是将选项的值设置为 JSON 字符串，例如

```
<select id="category" name="data[cat]">
    <option value="{value1:10, value2:20}" label="0">A</option>
    <option value="{value1:30, value2:40}" label="0">B</option>
</select> 
```

然后将值解析为 JSON 对象。获得 JSON 对象后，您可以从中提取单个值。通过这种方式，您可以添加任意数量的值。

# c# - 我可以为 Dictionary 使用集合初始化程序吗 条目？

> ID：495038
> 
> 赞同：94
> 
> 时间：2009-01-30T10:18:00.443
> 
> 标签：c#, .net, generics, collections, c#-3.0

我想为下一段代码使用集合初始化器：

```
public Dictionary<int, string> GetNames()
{
    Dictionary<int, string> names = new Dictionary<int, string>();
    names.Add(1, "Adam");
    names.Add(2, "Bart");
    names.Add(3, "Charlie");
    return names;
} 
```

所以通常它应该是这样的：

```
return new Dictionary<int, string>
{ 
   1, "Adam",
   2, "Bart"
   ... 
```

但是，正确的语法是什么？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2009-01-30T10:25:38.057

```
var names = new Dictionary<int, string> {
  { 1, "Adam" },
  { 2, "Bart" },
  { 3, "Charlie" }
}; 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-01-30T10:24:39.323

语法略有不同：

```
Dictionary<int, string> names = new Dictionary<int, string>()
{
    { 1, "Adam" },
    { 2, "Bart" }
} 
```

请注意，您实际上是在添加值的元组。

作为旁注：集合初始化器包含参数，这些参数基本上是任何*Add()*函数的参数，这些函数在编译时参数类型方面派上用场。也就是说，如果我有一个集合：

```
class FooCollection : IEnumerable
{
    public void Add(int i) ...

    public void Add(string s) ...

    public void Add(double d) ...
} 
```

以下代码是完全合法的：

```
var foos = new FooCollection() { 1, 2, 3.14, "Hello, world!" }; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-30T10:24:14.503

```
return new Dictionary<int, string>
{ 
   { 1, "Adam" },
   { 2, "Bart" },
   ... 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-09-25T19:52:04.300

问题已标记`c#-3.0`为 ，但为了完整起见，如果您使用 Visual Studio 2015（或 Mono 4.0），我将提及 C# 6 可用的新语法：

```
var dictionary = new Dictionary<int, string>
{
   [1] = "Adam",
   [2] = "Bart",
   [3] = "Charlie"
}; 
```

注意：如果您更喜欢，其他答案中提到的旧语法仍然有效。同样，为了完整起见，这里是旧语法：

```
var dictionary = new Dictionary<int, string>
{
   { 1, "Adam" },
   { 2, "Bart" },
   { 3, "Charlie" }
}; 
```

需要注意的另一种很酷的事情是，无论使用哪种语法，您都可以根据需要保留最后一个逗号，这样可以更轻松地复制/粘贴其他行。例如，下面的编译就好了：

```
var dictionary = new Dictionary<int, string>
{
   [1] = "Adam",
   [2] = "Bart",
   [3] = "Charlie",
}; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-22T05:29:22.133

如果您正在寻找稍微不那么冗长的语法，您可以创建一个子类`Dictionary<string, object>`（或任何您的类型），如下所示：

```
public class DebugKeyValueDict : Dictionary<string, object>
{

} 
```

然后像这样初始化

```
var debugValues = new DebugKeyValueDict
                  {
                       { "Billing Address", billingAddress }, 
                       { "CC Last 4", card.GetLast4Digits() },
                       { "Response.Success", updateResponse.Success }
                  }); 
```

这相当于

```
var debugValues = new Dictionary<string, object>
                  {
                       { "Billing Address", billingAddress }, 
                       { "CC Last 4", card.GetLast4Digits() },
                       { "Response.Success", updateResponse.Success }
                  }); 
```

好处是你得到了你可能想要的所有编译类型的东西，比如能够说

`is DebugKeyValueDict`代替`is IDictionary<string, object>`

或在以后更改键或值的类型。如果你在 razor cshtml 页面中做这样的事情，看起来会更好看。

除了不那么冗长之外，您当然可以根据需要向此类添加额外的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-15T13:57:03.977

在下面的代码示例中， a`Dictionary<TKey, TValue>`使用 type 的实例进行初始化`StudentName`。

```
 Dictionary<int, StudentName> students = new Dictionary<int, StudentName>()
  {
      { 111, new StudentName {FirstName="Sachin", LastName="Karnik", ID=211}},
      { 112, new StudentName {FirstName="Dina", LastName="Salimzianova", ID=317}},
      { 113, new StudentName {FirstName="Andy", LastName="Ruth", ID=198}}
  }; 
```

来自[msdn](http://msdn.microsoft.com/en-us/library/bb531208.aspx)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2017-05-16T15:04:16.330

是的，我们可以在字典中使用集合初始化器。如果我们有这样的字典-

```
Dictionary<int,string> dict = new Dictionary<int,string>();  
            dict.Add(1,"Mohan");  
            dict.Add(2, "Kishor");  
            dict.Add(3, "Pankaj");  
            dict.Add(4, "Jeetu"); 
```

我们可以如下初始化它。

```
Dictionary<int,string> dict = new Dictionary<int,string>  
            {  

                {1,"Mohan" },  
                {2,"Kishor" },  
                {3,"Pankaj" },  
                {4,"Jeetu" }  

            }; 
```

# .net - 我应该使用 Spring.Net AOP Throws 建议吗？

> ID：495042
> 
> 赞同：0
> 
> 时间：2009-01-30T10:20:26.883
> 
> 标签：.net, aop, spring.net

背景

我有一个提供某些 CRM 服务的组件 - specificCRM。我有一个实现我的 IGeneralCRM 接口的特定CRMAdapter。

另一个组件 generalCRM 通过 IGeneralCRM 公开 CRM 功能，并使用 Spring.Net 注入 specificCRMAdapter 以提供此类功能。

问题

如果特定 CRM 组件失败，我希望能够捕获异常。我是否应该实施 Spring.Net AOP 抛出建议来完成此任务，或者我是否过度设计问题，因为我需要做的只是捕获异常。

一种或另一种方式有什么好处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T10:44:48.860

如果您已经在使用 Spring AOP.Net，并且您不需要扩展所有性能，我说使用建议 - 稍后您可以将建议用于其他内容，使用新建议来捕获更多异常并很好地集成所有内容.

否则，只需捕获异常。无论如何，您都应该有异常代码，无论是在建议还是在 try/catch 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T01:26:53.180

这实际上取决于您打算对异常做什么。AOP 很棒，但会导致复杂的配置，而且通常是矫枉过正。

AOP 的亮点在于它能够为处理多个对象上的相同业​​务横切提供逻辑。在你的情况下，你似乎暗示你正在处理一个单一的实现，所以我想说现在只是试着抓住它。

如果您认为可以在多个方法和对象中重用相同的逻辑，那么 AOP 是一个更好的解决方案。

# svn - 是否可以将单个项目拆分为多个重叠的 SVN？

> ID：495047
> 
> 赞同：0
> 
> 时间：2009-01-30T10:23:07.297
> 
> 标签：svn, tortoisesvn

以下可以吗？？...

## 结帐“核心”

CORE / INTERFACE / corefile
CORE / APP / corefile

## 结帐'plugin_1'

PLUGIN_1 / INTERFACE / PLUGIN_1 / pluginfile
PLUGIN_1 / APP / PLUGIN_1 / pluginfile

## 结帐'plugin_2'

PLUGIN_2 / INTERFACE / PLUGIN_2 / pluginfile
PLUGIN_2 / APP / PLUGIN_2 / pluginfile

## 结帐“核心”+“插件_1”+“插件_2”

ALL / INTERFACE / corefile
ALL / INTERFACE / PLUGIN_1 / pluginfile
ALL / INTERFACE / PLUGIN_2 / pluginfile
ALL / APP / corefile
ALL / APP / PLUGIN_1 / pluginfile
ALL / APP / PLUGIN_2 / pluginfile

我从下面的评论中看到 svn:externals 是答案，我想我现在可以正常工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T10:31:20.137

事实上，你可以。您必须创建这两个不同的存储库，并且在主要（第三个）存储库中，只需使用 svn:externals 指向它们。您可以通过编辑要从不同存储库添加文件夹的文件夹的属性来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T10:27:14.263

是的。你甚至可以在另一个“内部”拥有一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T11:11:39.010

这可能是[svn:externals](http://svnbook.red-bean.com/en/1.0/ch07s03.html)的情况吗？

# css - IE6 不支持的 CSS 功能列表

> ID：495050
> 
> 赞同：11
> 
> 时间：2009-01-30T10:24:18.573
> 
> 标签：css, internet-explorer-6

我刚刚为我的网站完成了一个非常漂亮的无表格 css 模板的切片和编码，我一直在使用 IE7 和 Chrome 进行测试。

然后我有了用 IE6 测试这个模板的绝妙主意，我在 Virtual PC 上安装了 Windows XP，然后我在 IE6 上打开了我的网站。

**它看起来非常糟糕！**

我的页面格式看起来像垃圾，没有像在 IE7 和 Chrome 中那样正确显示。我知道 IE6 不支持某些东西，但我不认为我的页面会像它那样呈现。

所以我想知道是否有一个地方我可以看到 IE6 不支持的内容，这样我就可以修复我的 CSS 甚至为 IE6 创建一个新的。

任何信息都会非常有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-30T10:33:53.580

IE6 有很多 CSS 错误，这将有助于您的页面呈现。[支持和不支持的官方列表在这里](http://msdn.microsoft.com/en-us/library/cc351024(VS.85).aspx)。

[positioniseverything.net](http://positioniseverything.net/)也可能对您有所帮助，他们有一个完整的 IE 错误列表及其修复程序。

如果您仍然在努力获得正确的信息，请发布指向您页面的链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-30T10:35:27.070

我**强烈** 建议您查看此站点**http://quirksmode.org/dom/compatibility.html ：**[它对](http://quirksmode.org/dom/compatibility.html)大多数东西、css 和 javascript 都有很好的编译和测试用例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-30T10:37:16.693

我想你的机器上安装了 Firefox。如果是这样安装 Firebug 附加组件（这本身就很棒），但如果您还从 Sitepoint 安装新的附加组件 FireScope，它将允许您右键单击 Firebug 中的元素并拉出浏览器兼容性图表你的 CSS 和 HTML（加上额外的代码示例）

使用 Firebug，您还可以编辑 CSS 并实时查看生成的效果，这可以节省大量时间！

一旦您确定了网站的哪些区域出现问题，请使用以下方法使用 IE6 特定样式表来更正它们，以便您的设计在更现代的浏览器中保持正常工作

```
<!--[if IE 6]>
<link rel="stylesheet" type="text/css" href="/Css/IE6.css" media="all" />
<![endif]--> 
```

作为一个额外的提示，不透明度和具有透明背景的 PNG 或 GIF 在 IE6 中往往不能很好地播放，如果您使用 JavaScript，我强烈建议您使用 JavaScript 库，例如 Prototype 或 JQuery

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-30T10:32:12.240

一些例子是：

*   子选择器：`a>b {}`
*   相邻选择器：`a + b {}`
*   属性选择器：`[id="my_id"] {}`

有关使用不兼容性的令人印象深刻的示例，请查看[Gemination](http://www.csszengarden.com/062) at CSS zen garden design with IE6 and Firefox。

此外，您可以浏览[A 列表](http://www.alistapart.com/)网站以获取有关该主题的资源（以及许多其他有关 Web 设计的资源）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-30T10:36:02.483

我最偶然发现的那些：

```
- li:hover (or on any element except a)
- min/max-width
- min/max-height 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-30T10:36:15.040

首先，我建议您使用[Eric Meyer 的重置样式](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)，这将确保尽可能多的正确性以实现跨浏览器支持。其次，我会修改[Yadyn](https://stackoverflow.com/questions/83696/strategy-for-fixing-layout-bugs-in-ie6/83742#83742)关于“了解你的敌人”的帖子。虽然这可能是一场噩梦，但必须完成，因为[统计数据表明](http://www.w3schools.com/browsers/browsers_stats.asp)，即使 IE6 不再积极开发并已被 IE7 接管，但它仍然被广泛使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-02T12:46:47.240

除了提到的事情，确保你使用的文档类型使 IE6+ 使用标准模式。在标准模式下，bug 和 hack 几乎是可以管理的，而不必拥有完全不同的样式表。

否则 IE6 将恢复到 Quirks 模式，而你基本上必须支持 IE5，以及所有的盒子模型黑客可怕性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-31T16:13:19.120

对我来说永远不起作用的是`visibility`属性。而且它也很烦人（不，它不一样`display`！）

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-01-31T16:01:05.977

如果您查看[`W3Schools`](http://www.w3schools.com/CSS/)网站，它会告诉您哪些属性在哪个浏览器中支持。

# c# - 枚举和匹配属性的 C# 命名约定

> ID：495051
> 
> 赞同：97
> 
> 时间：2009-01-30T10:24:28.760
> 
> 标签：c#, .net, enums, naming-conventions

我经常发现自己实现了一个类，它维护某种自己的状态属性作为枚举：我有一个 Status 枚举和一个 Status 类型的 Status 属性。我应该如何解决这个名称冲突？

```
public class Car
{
  public enum Status
  {
    Off,
    Starting,
    Moving
  };

  Status status = Status.Off;

  public Status Status // <===== Won't compile =====
  {
    get { return status; }
    set { status = value; DoSomething(); }
  }
} 
```

如果 Status 枚举对不同类型是通用的，我会把它放在课堂之外，问题就会得到解决。但 Status 仅适用于 Car，因此在类之外声明枚举没有意义。

在这种情况下，您使用什么命名约定？

[注意：在对此问题](https://stackoverflow.com/questions/211567/enum-and-property-naming-conflicts)的答案的评论中对该问题进行了部分辩论。由于这不是*主要*问题，因此没有引起太多关注。

编辑：Filip Ekberg 针对“状态”的特定情况提出了一个 IMO 极好的解决方法。然而，我会很高兴阅读有关枚举/属性名称不同的解决方案，如 Michael Prewecki 的*回答*。

EDIT2（2010 年 5 月）：我最喜欢的解决方案是将枚举类型名称复数，正如 Chris S 所建议的那样。根据 MS 指南，这应该仅用于标志枚举。但我越来越喜欢它了。我现在也将它用于常规枚举。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-01-30T10:28:16.243

“关闭”、“开始”和“移动”的定义就是我所说的“状态”。当您暗示您正在使用“状态”时，它就是您的“状态”。所以！

```
public class Car
{
  public enum State
  {
    Off,
    Starting,
    Moving
  };

  State state = State.Off;

  public State Status
  {
    get { return state ; }
    set { state= value; DoSomething(); }
  }
} 
```

如果我们从您想在这种情况下使用“类型”一词的说明中再举一个例子：

```
public class DataReader
{
    public enum Type
    {
        Sql,
        Oracle,
        OleDb
    }

    public Type Type { get; set; } // <===== Won't compile =====

} 
```

你真的需要看到枚举和枚举之间有区别，对吧？但是在创建框架或谈论架构时，您需要关注相似之处，好的，让我们找到它们：

**当某物被设置为状态时，它被定义为“事物”状态**

示例：汽车的状态为运行状态、停止状态等。

你想在第二个例子中实现的有点像这样：

```
myDataReader.Type = DataReader.Database.OleDb 
```

你可能会认为这与我一直在向其他人宣讲的内容背道而驰，你需要遵循一个标准。但是，您遵循的是标准！Sql-case 也是一个特定的案例，因此需要一个特定的解决方案。

但是，枚举可以在您的`System.Data`空间内重复使用，这就是模式的全部意义所在。

使用“类型”查看的另一种情况是“动物”，其中类型定义了物种。

```
public class Animal
    {
        public enum Type
        {
            Mammal,
            Reptile,
            JonSkeet
        }

        public Type Species{ get; set; }

    } 
```

这是遵循一种模式，您不需要特别“了解”对象，并且您没有指定“AnimalType”或“DataReaderType”，您可以在您选择的命名空间中重复使用枚举。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-01-31T11:23:18.643

我会在讨论中添加我的 1 欧元，但它可能不会添加任何新内容。

显而易见的解决方案是将 Status 移出嵌套枚举。大多数 .NET 枚举（可能除了 Windows.Forms 命名空间中的一些枚举）都不是嵌套的，这使得使用 API 的开发人员很烦人，必须为类名添加前缀。

*没有提到的一件事*是，根据 MSDN 指南，标志枚举应该[是您可能已经知道的复数名词](http://msdn.microsoft.com/en-us/library/ms229058.aspx)（状态是一个简单的枚举，所以应该使用单数名词）。

State（枚举称为States）是呼格，“Status”是名词的主格，英语喜欢我们的大多数语言从拉丁语中吸收。呼格是您根据其条件命名的名词，而主格是动词的主语。

所以换句话说，当汽车*在移动*时，就是动词——移动就是它的状态。但是汽车不会熄火，它的引擎会。它也不会启动，引擎会启动（您可能在这里选择了一个示例，因此这可能无关紧要）。

```
public class Car
{
  VehicleState _vehicleState= VehicleState.Stationary;

  public VehicleState VehicleState 
  {
    get { return _vehicleState; }
    set { _vehicleState = value; DoSomething(); }
  }
}

public enum VehicleState
{
    Stationary, Idle, Moving
} 
```

状态是一个广义名词，描述它所指的状态不是更好吗？就像我在上面做的那样

在我看来，类型示例也不是指阅读器类型，而是它的数据库。如果您描述的阅读器数据库产品不一定与阅读器的类型相关（例如阅读器的类型可能是仅转发、缓存等），我会更喜欢它。所以

```
reader.Database = Databases.Oracle; 
```

实际上，这永远不会发生，因为它们被实现为驱动程序和继承链，而不是使用枚举，这就是为什么上面的行看起来不自然的原因。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-30T11:00:41.090

我认为这里真正的问题是枚举状态被封装在你的类中，这对于属性和枚举`Car.Status`都是模棱两可的`Status``Status`

更好的是，将您的枚举放在课堂之外：

```
public enum Status
{
    Off,
    Starting,
    Moving
}

public class Car
{
    public Status Status
    { ... }
} 
```

**更新**

由于下面的评论，我将在上面解释我的设计。

我不相信枚举或类或任何其他对象应该驻留*在*另一个类中，除非它在该类中完全是私有的。以上面的例子为例：

```
public class Car
{
    public enum Status
    {...}
    ...
    public Status CarStatus { get; set;}
} 
```

虽然一些评论者会争辩说 Status 在 Car 类的范围之外没有任何意义，但您设置*公共*属性的事实意味着程序的其他部分*将*使用该枚举：

```
public Car myCar = new Car();
myCar.CarStatus = Car.Status.Off; 
```

这*对*我来说是一种代码味道。如果我要在*之外*查看该状态，`Car`我不妨也将其定义在*外部*。

因此，我可能会将其重命名为：

```
public enum CarStatus
{...}

public class Car
{
    ...
    public CarStatus Status { get; set; }
} 
```

但是，如果该枚举将在汽车类内*且仅在*汽车类内使用，那么我可以在那里声明该枚举。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-09-07T20:23:40.283

我知道我的建议违反了 .NET 命名约定，但我个人在枚举前加上“E”前缀，在枚举标志前加上“F”（类似于我们在接口前加上“I”前缀的方式）。我真的不明白为什么这不是惯例。枚举/标志是一种特殊情况，例如永远不会改变其类型的接口。它不仅清楚地说明了它是什么，而且很容易输入智能感知，因为前缀将过滤大多数其他类型/变量/等，并且您不会遇到这些命名冲突。

这也将解决另一个问题，对于 WPF 中的示例，它们使用静态类，例如具有预定义类型实例的枚举（例如 FontWeights），但如果不搜索它，您将不知道。如果他们只是在它们前面加上'E'，那么你所要做的就是在字符上键入以找到这些特殊的静态类。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-29T01:40:03.260

讨厌匈牙利符号及其变体的人该死。我使用带有后缀枚举的约定 - 等待它 - `Enum`。因此，我从来没有遇到过您描述的问题，浪费时间担心如何调用它们，并且代码是可读且自描述的引导。

```
public class Car
{
  public enum StatusEnum
  {
    Off,
    Starting,
    Moving
  };

  public StatusEnum Status { get; set; }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-30T10:28:54.523

我会将属性名称更改为“CurrentStatus”之类的名称。快速简单:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-08-30T22:37:10.130

我建议在类型名称中添加“选项”（如果包含位标志，则添加标志），即类型为 Car.StatusOption，属性为 Car.Status。

与复数相比，这避免了在创建枚举类型的集合时出现命名冲突，您通常希望将集合*属性*复数，而不是枚举*类型*。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T10:27:54.543

我通常在枚举前加上前缀，例如 CarStatus。我想这一切都取决于您正在与之合作的团队（如果他们对这类事情有任何规则/流程）和对象的使用。只是我的 2 美分（：

# linux - 如何在 linux 中协调“top”和“free -m”的内存使用报告？

> ID：495068
> 
> 赞同：5
> 
> 时间：2009-01-30T10:30:05.303
> 
> 标签：linux, memory, process, free-command

从*free -m*我可以看到机器上使用了 377MB 的内存和 1649MB 的空闲空间（其中 1567 被 ubuntu 缓存）。实际输出见下图：

```
caz@riskvm:~$ free -m
             total       used       free     shared    buffers     cached
Mem:          2026       1975         51          0         30       1567
-/+ buffers/cache:        377       1649
Swap:         3153         87       3065 
```

但是，当我查看*top*的输出时，我可以在 RES 列中看到使用 1GB 和 273MB 的进程。RES 表示驻留在顶层手册页中的非交换物理内存中。

```
top - 11:45:26 up 1 day, 38 min,  3 users,  load average: 0.27, 0.21, 0.23
Tasks: 125 total,   1 running, 123 sleeping,   0 stopped,   1 zombie
Cpu(s):  0.2%us,  6.6%sy,  0.0%ni, 92.8%id,  0.5%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   2075560k total,  2023796k used,    51764k free,    31264k buffers
Swap:  3229024k total,    89764k used,  3139260k free,  1605400k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 6689 root      20   0 1242m 1.0g 1.0g S   13 51.1 292:59.21 vmware-vmx
 6658 root      20   0  492m 273m 262m S    2 13.5  41:16.75 vmware-vmx
    1 root      20   0  2844  536  484 S    0  0.0   0:01.50 init
    2 root      15  -5     0    0    0 S    0  0.0   0:00.00 kthreadd
    3 root      RT  -5     0    0    0 S    0  0.0   0:00.02 migration/0 
```

我知道其中一些是由其他进程（共享对象等）共享的。但是，如果有 1GB 的内存被其他进程共享，那么肯定至少必须使用这么多吗？

*free*如何报告已使用的 377MB 内存，当我查看顶部时，我看到进程使用 1GB 和更多 RES 内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T10:43:33.090

报告的常驻内存`top`包括图形卡中的映射帧缓冲区、网卡和其他“非 RAM”内存。所报告的内存`free`严格来说是 ram + swap。

# visual-studio-2008 - 如何将 windows 2000 中的常用控件更新到版本 6

> ID：495069
> 
> 赞同：0
> 
> 时间：2009-01-30T10:30:21.277
> 
> 标签：visual-studio-2008, mfc

如何在 windows 2000 上将常用控件 dll 更新到版本 6。我已经使用 windows 常用控件版本 6 中提供的新功能构建了一个 MFC 应用程序。windows 2000 中 dll 的默认版本是 5.80。我需要支持windows 2000，我找不到更新公共控件dll的方法。Microsoft 网站提到通用控件版本 6 不可再分发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T10:55:25.657

正如您已经发现的那样，公共控件库是不可再分发的。因此，虽然您在技术上可能能够找到一种方法来做到这一点，但它仍然是不合法的。您要么必须从应用程序中删除 V6 功能，要么找到可以提供相同功能的替代第三方供应商，或者自己编写。抱歉，如果这不是您想听到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-31T21:02:21.843

忘掉它。Common Controls 6 是 XP+ 的一项功能。它涉及在 XP 中引入的清单。

# web-services - Compact Framework - WebRequest sometimes fails for no reason?

> ID：495073
> 
> 赞同：0
> 
> 时间：2009-01-30T10:31:39.450
> 
> 标签：web-services, windows-mobile, compact-framework, c#-2.0

I've got a web service that I talk to from a PDA. In the same directory as the webservice asmx file, I have an html file that I pull a web request from in order to see if the directory is available.

I use the following code:

```
 /// <summary>
    /// Holds the web request for checking the connectivity.
    /// </summary>
    private static WebRequest m_WebRequest;

    /// <summary>
    /// Tests the connection to the provided URL.
    /// </summary>
    /// <param name="url">The URL to test.</param>
    /// <returns>True if the URL was resolved.</returns>
    public static bool TestUrl(string url)
    {

        try
        {

            // Ensure the url is valid
            url = url.Replace("http:\\", "http://");
            url = url.Replace("\\", "/");

            // Create the request
            m_WebRequest = WebRequest.Create(url);
            m_WebRequest.Timeout = 30000;

            // Get the request
            HttpWebResponse response = (HttpWebResponse)m_WebRequest.GetResponse();
            return true;

        }
        catch
        {
            m_WebRequest.Abort();
            return false;
        }

    } 
```

The file I am getting the response for is always the same and is always accessible from my PC. It only seems to fail when the web service (in the same directory as the html file) errors. Could that be related?

Alternatively, is there a better way of seeing if that file exists over the web?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T10:52:35.070

I exeperienced something like that when the link between PDA and internet fails. The WebRequest opens automatically the GPRS/HSDPA connection, maybe there's a problem at that level.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T10:14:01.760

The error I am getting is just a timeout. I.e. it sits there until the 30seconds elapses, then falls over. What's annoying is it only happens when the web service fails or times out. It's like the web service failing is locking out the virtual directory.

There's no problem with the network link between the pda and the network. The webservice is locally on my network, so the internet doesn't come into play. I am just using the ActiveSync connection to let my PDA talk to the network.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T20:52:44.467

I find that half the problem is the device data connection. Try to manually type in the url into pocket IE on the device. If that works then your application *should* work. If it doesn't then you need to sort out your device data connection setup first. If your connected via ActiveSync (or WMDC) try to change the connection settings between Auto / Work / Internet, that sometimes helps.

As for how to test to see if the URL exists. Use a HEAD request instead of a GET request. That way you don't get all the data just the headers returned. I'm not a C# guy so I can't help with how to do the HEAD request instead of a GET request.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T21:59:25.660

the URL always works for IE on the mobile - it just doesn't work from the application. So its as though the application is locked out from making requests, or there's something wrong in my test code (as per my original post).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-03T18:55:09.540

Yes, get rid of the catch-all and get a specific exception message so you can tell more about what's going on.

I find I get errors a lot in System.Net.HttpWebRequest.finishGetResponse() when working in CF.NET, and they are most likely interruptions in the data connection due to poor signal.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T11:53:26.670

I used the Ping component of SDF 2.3 instead. The error was always a timeout and only happened when the webservice errored. Still unexplained, but I guess the check I was doing was a bad way of doing it anyway.

# database - 在 Mac OS X 上寻找数据库架构绘图工具

> ID：495076
> 
> 赞同：5
> 
> 时间：2009-01-30T10:33:27.823
> 
> 标签：database, drawing

我正在寻找一个易于使用的 Mac 数据库模式绘图工具。

不需要逆向工程或数据库模式生成，只需一个简单的绘图工具，带有预先设计的与 DB 相关的图形组件（框、关系箭头、PK/FK 符号......）。

你知道任何（非商业）好工具吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T10:52:48.017

Argo UML [http://argouml.tigris.org/](http://argouml.tigris.org/)非常好，虽然它的真正目的是生成 UML 图，但它也可以制作看起来合理的模式图。

如果您考虑商业产品，我会使用非常出色的OmniGraffle [Omni Group 。](http://www.omnigroup.com/applications/omnigraffle/)

# html - RC 错误中的 BeginForm？

> ID：495079
> 
> 赞同：0
> 
> 时间：2009-01-30T10:35:01.890
> 
> 标签：html, asp.net-mvc

我认为新的RC有问题。当我写

```
Html.BeginForm("Item", "Newsletter", FormMethod.Post, new { enctype = "multipart/form-data" }) 
```

方法必须在输出中呈现如下内容：

```
<form action="/Newsletter/Item" enctype="multipart/form-data" method="POST"> 
```

但我得到的是：

```
<form action="Item" enctype="multipart/form-data" method="POST"> 
```

我的完整行动路径在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T12:26:07.173

您是否在任何地方都看到了这种情况，或者只是在您查看“Newsletter”控制器的其他操作结果时？如果是后者，则此行为按预期工作。

例如，如果您当前导航到 ，则不需要绝对路径**`http://yourwebsite.com/newsletter/`**。在这种情况下，相对路径**`item`**将带您到**`http://yourwebsite.com/newsletter/item/`**.

# eclipse - 如何更改 Eclipse 编辑器模板中的日期格式？

> ID：495084
> 
> 赞同：3
> 
> 时间：2009-01-30T10:36:03.963
> 
> 标签：eclipse

除了重建 JDT 之外，还有*什么*`{$date}`方法可以在 Eclipse 编辑器模板中配置变量的日期格式？或者甚至创建一个新变量来匹配我想要的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T14:00:49.603

从我所见，不，没有办法（仅使用当前的模板机制）

只有某种[宏机制](https://stackoverflow.com/a/3623732/6309)允许记录某种自定义日期生成（通过打开剪贴簿，以`System.out.println`您想要的格式评估日期，复制结果并将其粘贴到您的代码中（！）

![剪贴簿](https://i.stack.imgur.com/M7Y3Y.jpg)

# asp.net - 制作文章网站

> ID：495089
> 
> 赞同：1
> 
> 时间：2009-01-30T10:37:12.107
> 
> 标签：asp.net, content-management-system

[编辑版本]

注意：我不想使用开源CMS，想在这里写我自己的，这是一个设计问题

[一开始问题不是这样含糊的，因为我写了一个编号，样式，一步一步的问题，但我不知道为什么网站没有添加问题，我震惊了！, 这个问题是一个模糊的、简单的版本，用于测试或遵循的路径，]

在这里我以其他形式解释这个问题，我真的想同时针对这两个问题，首先是想法（一般算法），其次是更详细和更高级的战利品进入这个案例，

我想创建一个站点，其中包含提供的文章，例如 DeveloperFusion.com 的文章部分的一些信息

数据库：Sql Server

统一码：是的

图片：是的

款式：是的

步骤和问题

1.  通过网络编辑器插入新文章后，如何存储新项目，例如：使用 Server.HtmlEncode 方法将其作为新记录添加到 html 格式版本的文章表中

2a。这样，数据格式应该是NCLOB - Text - NVarChar(Max) 还是...

2b。我不知道这是一种常见的模式还是愚蠢的模式，但不要将其传递给数据库，而是使用所需页面的名称创建一个网页并将文章内容添加到其中

3.客户端到达地址的方式例如domain.com/articles/6643/ 如果存储选项是SQL 我们如何传递本文的代码并显示为网页

这个问题不是为了获取代码，是专门为了了解策略，算法和格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T10:47:37.390

编写 Web 应用程序。

*（说真的，这个问题有多广泛？）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T20:30:12.560

那么首先你必须设计你的数据库。为文章制作一个表，其中应包含 article_ID、article_Title、article_Content、article_Author 等列。通过这种方式，您可以获取每个信息并为除 id（整数）之外的所有数据类型采用 varchar(Max) 数据类型。用于存储新项目（文章），您必须分别添加文章的每个组件，如文章标题、内容和作者，这可以在单个 SQL 查询中完成。请为此学习一些基本的 ADO.NET 教程。

不要对 html 格式的版本存储选项感到困惑。看看[这个网络编辑器](http://ckeditor.com/download)。它可以像控件一样集成在您的网页上。只需下载**CKEditor for ASP.NET**，您就可以使用它的**Text**属性来获取文章内容并将其保存在您的数据库中，并会处理您的格式。您必须阅读其文档以进行集成。

对于您的第三个问题，只需为文章制作一个 asp.net 网页并在其上放置**ListView**控件，将此控件绑定到您的文章数据库。您可以根据需要修改此控件，将**HyperLink**控件插入此控件，该控件将代表您的文章标题并将链接到其他页面（例如 ReadPage），为**ListView**控件设置一个称为**SelectedIndexChanged**的​​事件 ，其中**ListView**将给出文章表的主键（即文章 ID），您可以将其保存到任何整数变量中。**为超链接**设置点击事件**控件将导航到其他页面（例如 ReadPage），但在导航之前只需在 URL 内添加查询字符串（在此查询字符串内将是文章 ID），此超链接将导航到带有查询字符串的 ReadPage。此 ReadPage 将读取查询字符串并从数据库中获取该特定文章。**

 **如果您有任何问题，您可以在网上搜索这些术语。

希望这个答案能帮到你...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T11:54:44.133

这个问题一开始并没有像这样模糊，因为我写了一个编号，样式，逐步的问题，但我不知道为什么该网站没有添加问题，我震惊了！, 这个问题是一个模糊的, 简单的版本, 用于测试或遵循的路径,

在这里我以其他形式解释这个问题，我真的想同时针对这两个问题，首先是想法（一般算法），其次是更详细和更高级的战利品进入这个案例，

我想创建一个站点，其中包含提供的文章，例如 *DeveloperFusion.com 的文章部分*

## **一些信息**

数据库：Sql Server

统一码：是的

图片：是的

款式：是的

**步骤和问题**

1.  通过网络编辑器插入新文章后，如何存储新项目，例如：使用 Server.HtmlEncode 方法将其作为新记录添加到 html 格式版本的文章表中

2a。这样，数据格式应该是NCLOB - Text - NVarChar(Max) 还是...

2b。我不知道这是一种常见的模式还是愚蠢的模式，但不要将其传递给数据库，而是使用所需页面的名称创建一个网页并将文章内容添加到其中

3.客户端到达地址的方式例如domain.com/articles/6643/ 如果存储选项是SQL 我们如何传递本文的代码并显示为网页

这个问题不是为了获取代码，是专门为了了解策略，算法和格式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T11:59:03.000

似乎您需要一个 CMS 解决方案，为什么不尝试现有的开源 CMS 解决方案，例如 Dotnet Nuke 或 Umbraco？

很有可能，它们具有您正在寻找的功能（以及更多）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T12:40:44.120

好吧，我还提出了问题以显示保存在 sql 数据库中的文章，并且也被表述为含糊不清。我也在做一个文章阅读网站。

好吧，您对 2a 的回答是 varchar(max)，因为它最多可以存储 2GB 而且我正在存储文章而不制作网页

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T10:59:15.977

正如 annakata 所说，您的问题范围非常广泛。从您指定的标签中可以看出，您使用了某种 cms 解决方案。也许看看这个问题，以选择可能适合您需求的开源选项：

[选择哪个CMS？](https://stackoverflow.com/questions/490899/which-cms-to-chose)

# cocoa-touch - 上传图片问题（UIImageJPEGRepresentation vs UIImagePNGRepresentation）

> ID：495096
> 
> 赞同：11
> 
> 时间：2009-01-30T10:40:21.257
> 
> 标签：cocoa-touch, ios-simulator

我已经使用 Safari 的“按住 + 保存图像”选项将一些图片存储到了我在模拟器中的照片库中。当我从库中选择图像时，我必须将其转换为 JPEG 或 PNG，以便将其上传到服务器。问题是原始图像的大小约为 200 KB，但转换为 PNG 后的图像约为 2 MB。我正在使用`UIImagePNGRepresentation`将`UIImage`对象转换为`NSData`然后发布图像。

1.  我在这里想念什么？为什么图片的大小比原来的大？我怎样才能防止这种情况？

2.  `UIImageJPEGRepresentation`和有什么区别`UIImagePNGRepresentation`？应该使用哪一个（推荐）？

3.  我可以确定从照片库加载的图像类型吗？

4.  iPhone 相机拍摄的默认图像类型是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-30T11:03:57.433

我猜原始图像存储为JPEG。

PNG旨在存储屏幕截图和线条图等内容。它不是为存储照片之类的东西而设计的。

这一切都归结为使用的压缩类型，PNG 使用无损压缩，因此图像将与原始图像完全相同。JPEG 使用有损压缩，生成的图像是原始图像的近似值。

如果您采用有损 JPEG，然后将其另存为 PNG，那么它的大小会增加，通常会增加很多，如您所见。

解决您的问题的方法是在上传图片之前不对图片执行任何操作。它们已经是 PNG、GIF 或 JPEG 图像。那是你应该上传的。

iPhone相机保存的图像格式为JPEG。

听起来您可能需要对[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)和[JPEG](http://en.wikipedia.org/wiki/JPEG)进行一些阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-03T18:45:18.017

关于第三点，您可以在图像选择器委托方法中确定从库中加载的图像类型，如下所示：

```
- (void)imagePickerController:(UIImagePickerController *)picker 
didFinishPickingMediaWithInfo:(NSDictionary *)info {

    // Get the image reference URL
    NSURL *referenceURL = [info objectForKey:UIImagePickerControllerReferenceURL];

    // The path extension contains the image type: JPG, PNG, GIF, etc.
    NSString *originalImageType = referenceURL.pathExtension; 

} 
```

# sql - 用较少的查询检索具有相关标签的博客文章列表

> ID：495098
> 
> 赞同：0
> 
> 时间：2009-01-30T10:41:01.083
> 
> 标签：sql, query-optimization

想象这两个表：

```
Table: Item
Columns: ItemID, Title

Table: Tag
Columns: TagID, ItemID, Title 
```

哪个是最好的方法（不改变表结构（是的，我不介意它们是否没有标准化））使用不太可能的查询检索带有所有标签的项目列表（即不执行 11 个查询来检索 10 个项目)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T10:59:41.593

这是一个简单的外部连接。这就是你所追求的吗？

```
SELECT
  It.ItemID,
  It.Title [ItemTitle],
  Tg.TagID,
  Tg.Title [TagTitle]
FROM Item It
LEFT OUTER JOIN Tag Tg
ON It.ItemID = Tg.ItemID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T11:00:57.080

我不完全确定你在追求什么，但这有帮助吗？

```
select Item.ItemID, Item.Title, Tag.TagID, Tag.Title from Item, Tag 
  where Item.ItemID=Tag.ItemID 
```

当您说您不想执行 11 次查询时，您的意思是您不想执行 11 次 SQL 查询，还是您不想在 10 行中收到您的结果？如果是后者，那么我认为这实际上只是意味着您需要以您用来调用 SQL 的任何语言遍历结果。例如，在 PHP 中：

```
$query = "select Item.ItemID as i, Item.Title as t1, Tag.TagID as t, Tag.Title as t2 from Item, Tag where Item.ItemID=Tag.ItemID";
$dataset = mysql_query($query) or die(mysql_error());

$items = Array();

while ($data = mysql_fetch_assoc($dataset))
{
  $items[$data['i']] = Array($data['t1'], $data['t'], $data['t2']);
} 
```

# joomla - Moodle / Joomla / JFusion - 电子学习、交流和信息门户的最佳开发平台？

> ID：495100
> 
> 赞同：3
> 
> 时间：2009-01-30T10:41:14.873
> 
> 标签：joomla

我被要求开发一个信息和电子学习网站，重点是社区方面，也包括许多其他领域。这个项目的预算很紧，所以我希望尽可能使用现成的产品——但我需要确保从一开始就选择最好的平台。

我是一名 php 开发人员，拥有丰富的数据库知识，因此我正在设想一定程度的积极开发。

主要要求是：

*   用户贡献/社区建设
*   一般内容
*   电子学习
*   论坛
*   博客
*   文章
*   电子商务
*   房源目录
*   维基

该组织讨论的未来领域包括社交网络，因此明确强调社区和用户贡献方面。

我知道 Moodle 在开发电子学习解决方案方面被认为是领导者，但我担心它会在该网站需要的许多其他领域中有所不足（我知道 Moodle 有可用的插件/模块，但我不确定这些领域是否有足够的发展）。

一个对我来说很有希望的解决方案是[JFusion](http://www.jfusion.org)，它是一个开源桥梁，可以结合几个不同的系统（在结构和用户身份验证方面）——它是围绕 Joomla 构建的，但支持 Moodle 和几个论坛软件产品，以及 Magento电子商务。这也将打开 Joomla 扩展的巨大世界，我认为这将涵盖上述所有要求。

所以，总而言之，**我的问题是——我应该尝试坚持 Moodle 的范围，还是应该寻找其他解决方案来涵盖所有角度？**

我很想听听使用过这两个平台的开发人员的意见——或者可能知道更合适的平台作为基础。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T10:54:23.553

您的主要任务是提供特色 LMS、围绕 LMS 的自定义社交类型扩展，还是仅仅提供内容？

Moodle 是一款出色的产品，我认为您可能可以围绕它做您需要的事情，但是您概述的 JFusion 解决方案从表面上看对我来说听起来很有希望。那时，我会选择更适合您团队的技术技能和舒适度的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-15T22:21:20.327

我相信，在[我的公司](http://www.health-e-learning.com)，我已经能够实现您所描述的一点点。我们在 Joomla 1.5 上运行我们的公司主页，其中包含营销、注册和社区（阅读：论坛），这已链接到我们的 Moodle 网站以获取课件。稍作修改的 Moodle 身份验证“外部数据库”插件允许用户在两​​个站点之间进行单点登录。

虽然看起来 Moodle 一直在推动成为一个“门户”解决方案（能够涵盖通用主页和社区功能以及课件），但目前它似乎有点不成熟和笨重。Joomla 1.5 向前迈出了一大步，Joomla 更加活跃的插件社区将为您提供良好的服务。

不过，我很想知道您如何使用 JFusion..？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-15T23:02:18.260

将 Moodle 与其他解决方案集成是可行的方法 - Joomla，正如您所建议的那样，还可以看看[ELGG](http://elgg.org/)（刚刚发布的 1.5 版）。Moodle 正在努力开发某种存储库 API——尤其是开放大学，目前正在为此编写代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T11:24:32.443

Moodle 可以很好地集成到 Joomla 中。即使是像[Joomla-Builder](http://Joomla-Builder.com)这样的通用门户生成器也可以依赖 JFusion 集成并将其包含在生产中的构建中。我个人知道至少有一家严肃的公司依赖 Joomla+Moodle 解决方案来完成他们的远程学习项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-22T13:29:14.280

Efront (www.efrontlearning.net) 将满足您的需求。它在 UI 和社交功能方面击败了 Moodle。您还可以查看使用 JFusion 的 efront 插件集成 Efront 和 Joomla 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-25T18:53:53.533

好吧，这两个平台都有普通意义上的论坛功能。除此之外，moodle 中的论坛可以评分，并且成绩会自动添加到学习者 C/A 中。

# c# - 用于多单位转换的 C# 数据结构

> ID：495110
> 
> 赞同：4
> 
> 时间：2009-01-30T10:45:52.743
> 
> 标签：c#, data-structures, units-of-measurement

我有一个 C# 应用程序，我需要在 3 个不同的单位之间进行转换（例如：升、加仑和品脱）。

该应用程序需要了解特定体积的液体，例如：1 品脱、10 品脱、20 品脱和 100 品脱。我打算进行计算并对值进行硬编码（不理想但必要），

我正在寻找一种数据结构，它可以让我轻松地从一个单位转换为另一个单位。

有什么建议么？

请注意：我*实际上*并没有使用大量的液体，它只是一个例子！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-30T10:55:14.737

您可以存储转换因子矩阵，其中

*   a: 是升
*   b：是品脱
*   c: 加仑

你有（不准确，但假设一升有两品脱，一加仑有 4 升）

```
 a     b       c
a  1     2     0.25
b  0.5   1     0.125
c  4     8       1 
```

或者，您可以决定在转换为另一种类型之前将所有内容转换为基值（升），然后您只需要第一行。

将其包装在一个方法中，该方法采用多个单位和“from”类型和“two”类型进行转换。

希望这可以帮助

**编辑：**一些代码，根据要求

```
 public enum VolumeType
    {
        Litre = 0,
        Pint = 1,
        Gallon = 2
    }

    public static double ConvertUnits(int units, VolumeType from, VolumeType to)
    {
        double[][] factor = 
            {
                new double[] {1, 2, 0.25},
                new double[] {0.5, 1, 0.125},
                new double[] {4, 8, 1}
            };
        return units * factor[(int)from][(int)to];
    }

    public static void ShowConversion(int oldUnits, VolumeType from, VolumeType to)
    {
        double newUnits = ConvertUnits(oldUnits, from, to);
        Console.WriteLine("{0} {1} = {2} {3}", oldUnits, from.ToString(), newUnits, to.ToString());
    }

    static void Main(string[] args)
    {
        ShowConversion(1, VolumeType.Litre, VolumeType.Litre);  // = 1
        ShowConversion(1, VolumeType.Litre, VolumeType.Pint);   // = 2
        ShowConversion(1, VolumeType.Litre, VolumeType.Gallon); // = 4
        ShowConversion(1, VolumeType.Pint, VolumeType.Pint);    // = 1
        ShowConversion(1, VolumeType.Pint, VolumeType.Litre);   // = 0.5
        ShowConversion(1, VolumeType.Pint, VolumeType.Gallon);  // = 0.125
        ShowConversion(1, VolumeType.Gallon, VolumeType.Gallon);// = 1
        ShowConversion(1, VolumeType.Gallon, VolumeType.Pint);  // = 8
        ShowConversion(1, VolumeType.Gallon, VolumeType.Litre); // = 4
        ShowConversion(10, VolumeType.Litre, VolumeType.Pint);  // = 20
        ShowConversion(20, VolumeType.Gallon, VolumeType.Pint); // = 160
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T10:53:27.597

我通过提供正确的访问方法（属性）以另一种语言完成了这项工作：

```
for the class Volume:
  AsLitre
  AsGallon
  AsPint

for the class Distance:
  AsInch
  AsMeter
  AsYard
  AsMile 
```

另一个优点是内部格式无关紧要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T10:49:21.597

请看一下[Explicit Interface Implementation](http://msdn.microsoft.com/en-us/library/aa288461(VS.71).aspx)，我认为它可以帮助你，示例是关于你需要的。

编辑：从 MSDN 复制的示例

```
interface IEnglishDimensions 
{
   float Length();
   float Width();
}
// Declare the metric units interface:
interface IMetricDimensions 
{
   float Length();
   float Width();
}
// Declare the "Box" class that implements the two interfaces:
// IEnglishDimensions and IMetricDimensions:
class Box : IEnglishDimensions, IMetricDimensions 
{
   float lengthInches;
   float widthInches;
   public Box(float length, float width) 
   {
      lengthInches = length;
      widthInches = width;
   }
// Explicitly implement the members of IEnglishDimensions:
   float IEnglishDimensions.Length() 
   {
      return lengthInches;
   }
   float IEnglishDimensions.Width() 
   {
      return widthInches;      
   }
// Explicitly implement the members of IMetricDimensions:
   float IMetricDimensions.Length() 
   {
      return lengthInches * 2.54f;
   }
   float IMetricDimensions.Width() 
   {
      return widthInches * 2.54f;
   }
   public static void Main() 
   {
      // Declare a class instance "myBox":
      Box myBox = new Box(30.0f, 20.0f);
      // Declare an instance of the English units interface:
      IEnglishDimensions eDimensions = (IEnglishDimensions) myBox;
      // Declare an instance of the metric units interface:
      IMetricDimensions mDimensions = (IMetricDimensions) myBox;
      // Print dimensions in English units:
      System.Console.WriteLine("Length(in): {0}", eDimensions.Length());
      System.Console.WriteLine("Width (in): {0}", eDimensions.Width());
      // Print dimensions in metric units:
      System.Console.WriteLine("Length(cm): {0}", mDimensions.Length());
      System.Console.WriteLine("Width (cm): {0}", mDimensions.Width());
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-10T15:24:16.697

In case it is helpfull, you might want to use a nuget package that's doing conversions between various units:

UnitConversion on:

*   [nuget](https://www.nuget.org/packages/UnitConversion)
*   [Github](https://github.com/gkampolis/UnitConversion)

Full disclosure: I'm currently maintaining this package.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T10:55:52.020

这是完整的源代码：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;

namespace UnitConversion
{
    internal delegate double Converter(double value);

    class UnitConverter
    {
        private readonly IDictionary<string, IDictionary<string, Converter>> converters =
            new Dictionary<string, IDictionary<string, Converter>>();
        private readonly NumberFormatInfo numberFormatInfo;

        public UnitConverter()
        {
            numberFormatInfo = (NumberFormatInfo)NumberFormatInfo.InvariantInfo.Clone();
            numberFormatInfo.NumberDecimalSeparator = ".";
            numberFormatInfo.NumberGroupSeparator = String.Empty;
        }

        public void ParseConverterDefinition(string converterDefinition)
        {
            string[] parts = converterDefinition.Split(' ');
            double sourceUnitsValue = double.Parse(parts[0], NumberFormatInfo.InvariantInfo);
            double targetUnitsValue = double.Parse(parts[3], NumberFormatInfo.InvariantInfo);

            AddConverters(parts[1], sourceUnitsValue, parts[4], targetUnitsValue);
            AddConverters(parts[4], targetUnitsValue, parts[1], sourceUnitsValue);
        }

        private void AddConverters(string sourceUnits, double sourceUnitsValue, string targetUnits, double targetUnitsValue)
        {
            if (!converters.ContainsKey(sourceUnits))
                converters.Add(sourceUnits, new Dictionary<string, Converter>());

            converters[sourceUnits][targetUnits] =
                delegate(double value)
                { return value * targetUnitsValue / sourceUnitsValue; };
        }

        public double? Convert(double value, string sourceUnits, string targetUnits, params string[] skipUnits)
        {
            if (!converters.ContainsKey(sourceUnits))
                return null;

            if (converters[sourceUnits].ContainsKey(targetUnits))
                return converters[sourceUnits][targetUnits](value);

            foreach (KeyValuePair<string, Converter> pair in converters[sourceUnits])
            {
                if (Array.IndexOf(skipUnits, pair.Key) != -1)
                    continue;

                List<string> skip = new List<string>(skipUnits);
                skip.Add(sourceUnits);

                double? result = Convert(converters[sourceUnits][pair.Key](value), pair.Key, targetUnits, skip.ToArray());
                if (result != null)
                    return result;
            } // foreach

            return null;
        }

        public string Convert(string conversionRequest)
        {
            string[] parts = conversionRequest.Split(' ');
            return ConvertFormatted(double.Parse(parts[0], NumberFormatInfo.InvariantInfo), parts[1], parts[4]);
        }

        public string ConvertFormatted(double value, string sourceUnits, string targetUnits)
        {
            double? convertedValue = Convert(value, sourceUnits, targetUnits);
            if (convertedValue == null)
                return "No conversion is possible.";

            return string.Format("{0} {1} = {2} {3}", value.ToString("N6", numberFormatInfo), sourceUnits,
                convertedValue < 0.01 || convertedValue > 1000000 ?
                    convertedValue.Value.ToString("#.######e+00", numberFormatInfo) :
                    convertedValue.Value.ToString("N6", numberFormatInfo),
                targetUnits);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {

            UnitConverter unitConverter = new UnitConverter();

            foreach (string s in File.ReadAllLines("Conversions.txt"))
            {
                if (s.IndexOf("?") == -1)
                    unitConverter.ParseConverterDefinition(s);
                else
                    Console.WriteLine(unitConverter.Convert(s));
            } // foreach
        }
    }
} 
```

它以以下格式处理文件

```
7200.0 second = 2 hour
10.0 glob = 1 decaglob
1 day = 24.0 hour
1 minute = 60 second
1 glob = 10 centiglob
1 day = 24 hour
1 year = 365.25 day
50 centiglob = ? decaglob
5.6 second = ? hour
3 millisecond = ? hour
5.6 second = ? day
1 day = ? glob
1 hour = ? second
1 year = ? second 
```

并计算例如 50 centiglobs in decaglobs。

此代码能够进行链式转换（例如年 -> 日 -> 小时 -> 秒）。

# html - 连续文本字符串的文本换行

> ID：495114
> 
> 赞同：2
> 
> 时间：2009-01-30T10:48:13.660
> 
> 标签：html

当我以固定宽度“td”插入连续的文本字符串时，文本不会换行。请让我知道为什么？以下是 html 页面的链接。

[带空格](http://shivanand.in/tmp/textstring_withspace.html)
[的文本字符串 不带空格的文本字符串](http://shivanand.in/tmp/textstring_withoutspace.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T11:03:28.807

您可以添加软连字符：`&shy;`. 把它们放在长词中。

看看它：

```
This&shy;Texthasno&shy;SpacesThis&shy;Texthasno&shy;Spaces&shy;This&shy;Texthasno&shy;Spaces&shy;ThisText&shy;hasno&shy;Spaces&shy;This&shy;Texthasno&shy;Spaces 
```

（故意过度使用`&shy;`）

这是[hyphenator](http://code.google.com/p/hyphenator/)，您可能会发现它有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T11:06:08.367

我想知道这是否有帮助：

```
<p style="width: 100em; word-wrap: break-word">ThisTexthasnoSpacesThisTexthasnoSpacesThisTexthasnoSpacesThisTexthasnoSpacesThisTexthasnoSpaces</p> 
```

不幸的是，这需要您知道您希望列的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T11:18:51.413

你会注意到，如果你把它写得太长，很多流行的网站（比如 Facebook）会在你的单词中插入一个空格。这是常见的解决方案，所以不要害怕这样做。

# java - Java中的继承和强制转换

> ID：495118
> 
> 赞同：5
> 
> 时间：2009-01-30T10:49:41.457
> 
> 标签：java, inheritance, casting

我有一个关于 Java 中的继承和强制转换的问题。我有以下两个示例类和一个测试类，我在课后陈述我的问题：

```
public class Automobile {
    public int var;

    public Automobile () {
        var = 1;
    }

    public String toString () {
        return "AUTOMOBILE: " + var;
    }
}

public class Porsche extends Automobile {
    public int var;

    public Porsche () {
        var = 2;
    }

    public String toString () {
        return "PORSCHE: " + var;
    }
}

public class Test {
    public static void main (String [] args) {
        Porsche p = new Porsche();
        Automobile a = new Automobile();

        System.out.println ("(Automobile) p = " + (Automobile)p);

        System.out.println ("(Automobile) p.var = " + ((Automobile)p).var); 
    }
} 
```

输出是：

```
(Automobile) p = PORSCHE: 2
(Automobile) p.var = 1 
```

我不明白为什么在第二个语句中我们有 1。不应该是 2 吗？因为在第一个语句中将 p 转换为 Automobile 之后，我仍然得到`PORSCHE: 2`代表`p`- 我通过以下方式理解这一点：

尽管如此，我已经`p`对汽车进行了转换，`p`保持了它的“本性”——`p`是保时捷类的对象，但是因为保时捷扩展了汽车，我们可以说 p 也是汽车。因此，当我们将它显式转换为汽车时，它会继续使用它的方法——在我们的例子`toString()`中是保时捷中定义的方法。

另一方面，如果我写的是正确的，那么第二个打印语句应该给出 2 而不是 1。

现在这对我来说似乎是一个矛盾，但由于这在 Java 中有效，我似乎不明白在转换和继承过程中发生了什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-30T10:55:49.713

我相信你实际上不能覆盖 Java 中的变量。子类实际上“隐藏”了变量`var`。

当您转换为 时`Automobile`，您将获得`var`变量的超类版本。但是，该`toString()`方法仍在查看`var`变量的实例版本。

如果您`public int var`从 Porsche 子类中删除 ，它应该可以按预期工作。

应该注意的是，使用公共实例变量不是一个好习惯，您应该始终创建 getter / setter 以进行适当的[封装](http://home.cogeco.ca/~ve3ll/jatutor4.htm)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T10:55:52.177

变量的阴影`var`。

您`Porche.var`的变量与`Automobile.var`.

该`Porsche.toString()`方法使用`Porsche.var`，而强制转换告诉编译器使用`Automobile`版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T10:58:01.113

对字段的访问不是多态的——它仅取决于表达式的编译时类型。

表达式 ((Automobile)p) 具有编译时类型汽车，因此使用它的字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T18:57:13.457

在两个类中声明变量“var”实际上在内存中创建了两个字段。

“Porsche”的一个实例将在内存中有两个“var”字段，一个是“Porsche”类，一个是超类“Automobile”。当您从已知的“保时捷”实例中引用“var”时，超类的“var”字段被隐藏。如果将此实例转换为“Automobile”并引用“var”字段，则引用“Automobile”的 var 字段。

字段中没有覆盖。具有相同名称的新字段使超类的字段黯然失色。

要获得预期的结果，您根本不应该在“Porsche”类中声明“var”字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-26T20:09:02.773

然而 ：

如果您有一个返回父类 A 对象的方法，它可以返回任何对象类型和扩展它的类（工厂示例）。现在，如果此方法返回一个子类 B 对象，并且您不将其转换为 B，则它的所有属性都将是父属性。如果你将它转换为 B 那么它的属性将是 A 和 B 属性。

```
class A {
int a1,a2;
public A(){}

  public static A getInstance () {
  return new B() ;
  }
}
class B {
int b1,b2;
  public B() {}

}
 class Test{

 public static void main (String [] args) {

  A theA = A.getInstance() ; //here theA has only a1,a2 as attributes
  B theB = (B)theA    // here theB has b1,a2 and a1,a2 as attributes 
  }

} 
```

# .net - 如何重定向到 ASP.NET MVC 中的调用页面？

> ID：495124
> 
> 赞同：9
> 
> 时间：2009-01-30T10:51:48.533
> 
> 标签：.net, asp.net-mvc

假设我有一个控制器操作，可以从用户的购物篮中删除一个项目。此控制器操作是通过对 url ~/delete/{id} 执行 POST 来触发的。如果我的应用程序中有多个页面将发布到此 url，我如何构造控制器操作以重定向回发布到它的页面？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-30T11:27:10.927

您应该从发布页面提供一个 RedirectToUrl 参数。

依赖引荐来源标头不是一个好习惯。

相反，请执行以下操作：

```
public ActionResult Delete(int id, string RedirectToUrl)
{
  // check if RedirectToUrl is null or empty and redirect accordingly
} 
```

在发布视图或部分视图上，您​​可以通过多种方式提供参数：

```
<%= Html.Hidden("RedirecToUrl","/my/lovely/url") %> 
```

或者

```
<form action="/item/delete/22?RedirectToUrl=/my/lovely/url"> 
```

我更喜欢第一个选项。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-06T19:47:51.307

我就是做这个的：

```
 public ActionResult ResendActivationEmail()
    {
        // Do other things here
        return new RedirectResult(Request.UrlReferrer.AbsoluteUri);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T11:48:41.663

我要做的第一件事是使用 Ajax.ActionLink，然后如果用户打开了 Javascript，您将永远不会真正离开页面。这是最好的解决方案。如果您不想要链接，也可以使用 Ajax 表单。其中任何一个都可以使用 DELETE 或 POST 方法。

为了处理关闭 Javascript 的情况，当您在控制器中检测到 POST 未使用 Ajax 完成时（Request.IsAjaxRequest 为 false），您可以查看 Request.UrlReferer 属性以获取引用的 Url页。如果这不为空，您可以使用 RedirectResult 返回此页面。如果为空，请选择默认登录页面——可能类似于“您的商品已被删除，请单击此处继续购物”。后者可能很少会受到打击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T11:07:10.517

我从未尝试过，但您可以使用 Referer 标头来了解帖子或获取的来源，并尝试将 URL 与路由匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-12T13:57:10.253

如果您使用 WCSF（Web 客户端软件工厂）来实现 MVC 模式，您可以使用 PageFlow 来完成所有导航。

例如：-

PageFlow.Next(); 或 PageFlow.Previous();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-12T13:49:58.447

只需使用 URL Referer [sic] 标头即可。

```
var requestFrom = Request.UrlReferrer 
```

您可以在以下位置找到文档：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)

唯一不起作用的情况是直接请求页面时，但在这种情况下，无论如何您都没有任何地方可以重定向到。

还可以选择使用 AJAX 执行唯一的异步操作，以便您的 Delete 操作仅执行其描述的操作，而不负责执行超出其预期删除目的的操作。

# php - 乱码 php

> ID：495129
> 
> 赞同：1
> 
> 时间：2009-01-30T10:53:48.857
> 
> 标签：php

我想打乱所有的 a-zA-Z 所以一个像这样的世界

hello 变成 shrxs 或 bhidf

其余的应该保持不变。例如。“你好，世界！”=“ksgii 鱼！”

等等

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-30T10:59:18.363

目前尚不清楚这是否是可逆的，所以这里有两个替代答案。

“你好”变成“shrxs”意味着一种超越简单替换（[凯撒密码](http://en.wikipedia.org/wiki/Caesar_cipher)）的方案，也许类似于多字母密码。

但是对于一个简单的凯撒密码，您可以使用[strtr](http://php.net/strtr)

```
$plain="hello";
$cipher = strtr($plain, 
    "abcdefghijklmnopqrstuvwxyz", 
    "tuvhijkcwxyzldefgsmnopqrab");
echo $cipher; 
```

会显示“cizze”；

如果您不需要反转加扰，并且想要一些真正随机的东西，试试这个

```
function random_char($matches)
{
   return chr(rand(ord('a'),ord('z')));
}

$plain="hello";

$random=preg_replace_callback(
           "{[a-z]}i",
           "random_char",
           $plain);

echo $random; 
```

在这里，我们使用[preg_replace_callback](http://php.net/preg_replace_callback)将每个 char 替换为 random_char 回调的随机替代项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T11:13:37.693

您可能还想查看[str_rot13](http://www.php.net/str_rot13)函数，它也具有可逆的优点。

```
<?php
  var $foo = "hello world!";
  var $bar = str_rot13($foo); // $bar equals "uryyb jbeyq!"
  var $baz = str_rot13($bar); // $baz equals "hello world!"
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T11:02:35.877

你说的炒作到底是什么意思？我可以看到您没有通过字母表重新排列或计数字母。

听起来您只是想知道如何仅替换 a-zA-Z 字符。因此，无论您的转换功能是什么，这都是您可以做到的一种方式：

```
$result = preg_replace_callback('/[a-zA-Z]/', 'charTransform', $oldstring); 
```

然后将转换定义为回调：

```
function charTransform($matches) {
   $oldchar = $matches[0];
   return strtolower($oldchar); // replace with whatever you want
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T11:05:16.620

问题是，您希望文本加扰还是加密，即文本是否可以解密？如果您只想将所有字母替换为其他随机字母，您可以尝试以下操作：

```
$text = "Hello world!\n";
$text = preg_replace_callback(
        '/[a-zA-Z]/',
        create_function('$matches', 'return chr(rand(97,122));'),
        $text
    ); 
```

# web-services - Web 服务客户端作为单例？

> ID：495131
> 
> 赞同：2
> 
> 时间：2009-01-30T10:54:20.120
> 
> 标签：web-services

上周，我开始为在 Singleton 上实现的 Web 服务客户端编写现有代码。我自己从来没有考虑过这样做，所以我开始寻找对请求处理等有更深入了解的人的意见。我找不到一致的答案。任何有想法的人：Singleton 解决方案是否存在呼叫被阻止的危险？考虑内存使用会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T07:36:59.767

类似的东西。ASP.NET 运行时是这样工作的。

您收到一个请求...假设这是您的 ASP.NET 应用程序收到的第一个请求。现在根据映射，IHttpHandlers 和 IHttpModules 会发生一些事情。

运行时将使用所需处理程序和模块的唯一实例为第一个请求提供服务。如果这是第一个请求，并且任何 IHttpModule 或您的 Global.asax 都有一个 OnStart 事件，现在甚至会触发。然后将处理该请求。伴随着所有的 IHttpMoudles 和 IHttpHandler。

现在，如果在处理第一个请求时收到第二个请求，则没有空闲的 IHttpHandler 或 IHttpModules，ASP.NET 运行时会创建新实例来为这些请求提供服务。我不能 100% 确定 IHttpHandler 和 HttpModules 的生命周期是多少，但你可以在 MSDN 上查找。

如果您在请求期间有想要维护的对象和事物，那么您应该将其放入执行请求的上下文中。有几种方法可以做到这一点，但我建议您尽早开始研究 IHttpModules。他们非常强大。

此外，如果您继承 HttpApplication 类并在 Global.asax 文件中使用它，您将拥有由 ASP.NET 运行时维护并通过 HttpContext 类型上的 ApplicationInstance 属性访问的 HttpApplication 对象的可访问实例。

所以，是的，通过池化它通常意味着你周围有一个对象池。每当请求需要这种类型的实例时，它都会从池中获取一个实例并为请求提供服务。一旦请求得到服务，该对象就会返回到池中以供重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T10:56:46.200

作为一般规则，“单例”很方便，仅此而已。这是不好的做法。我还没有遇到过 Singleton 是唯一解决方案的情况，它只是碰巧是一个可访问的解决方案。

你正在使用什么框架？ASP.NET？有几种方法可以连接到 ASP.NET 管道……它自身的运行时依赖于对象池来同时为请求提供服务，这对你有用吗？

我认为您最好让您拥有的任何 DBMS 后端处理原子性问题。

# java - 复制文件期间可能发生的异常是什么？

> ID：495155
> 
> 赞同：0
> 
> 时间：2009-01-30T11:02:58.607
> 
> 标签：java, file-io

我的程序必须将文件从一个文件夹复制到另一个文件夹。我已经使用 InputStream 和 OutputStream 来做同样的事情。文件大小约为 5GB。在此过程中可能会发生哪些异常以及如何发生？正如我需要在单元测试用例文档中提到的一样......请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T11:05:46.337

查看[java 文档](http://java.sun.com/javase/6/docs/api/)以了解您正在使用的方法。任何 Sun Java 文档都会提到可以由方法抛出的异常。

我猜是 FileNotFoundException、NullPointerException、IOException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T11:23:20.390

还可以考虑使用 NIO 进行文件复制，因为您可能会获得更好的性能，这对于这么大的文件应该是显而易见的：

看看JavaLobby 的[这篇文章](http://www.javalobby.org/java/forums/t17036.html)，它展示了一个使用`java.io.FileChannel`s 来完成繁重工作的静态文件复制方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T11:23:58.220

作为一般规则，检查异常不会凭空出现。它们被明确声明为由您使用的方法抛出（检查[Java API](http://java.sun.com/javase/6/docs/api/)）。一个好的 IDE（例如[NetBeans](http://www.netbeans.org/)）甚至会在遇到异常时自动提示您捕获或声明这些异常。此外，如果您不处理这些异常，您甚至无法编译您的代码。您一直在用[Javadoc](http://java.sun.com/j2se/javadoc/writingdoccomments/)记录所有这些异常，对吗？=)

# hashtable - 基于磁盘的快速哈希表？

> ID：495161
> 
> 赞同：27
> 
> 时间：2009-01-30T11:04:46.510
> 
> 标签：hashtable

我有一组散列（MD5 的前 64 位，所以它们的分布非常随机），我希望能够查看一个新的散列是否在一个集合中，并将其添加到一个集合中。

集合不是太大，最大的元素有几百万，但有数百个集合，所以我无法将它们全部保存在内存中。

到目前为止我的一些想法：

*   我尝试将其全部保存在 sqlite 表中，但是一旦它无法将所有内容都放入内存中，它就会变得非常慢。
*   布隆过滤器听起来像它们会有非常高的错误率。我不介意微小的错误率（64 位哈希已经在 4G 元素集上产生了 1 次冲突），但是像 1% 这样的错误率太高了。
*   在文件中保留带有间隙的散列排序列表，并在我没有足够的间隙时调整大小。哈希是均匀分布的，所以即使是这样非常简单的方案也应该可以工作。

我错过了一些非常明显的东西吗？任何提示如何实现良好的基于​​磁盘的哈希表？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-03T22:23:10.290

这是我最终使用的解决方案：

*   每组一个文件
*   文件包含 2^k 个桶，每个 256 字节或 32 个 8 字节的条目
*   空条目只是被清零（000... 是一个有效的哈希，但我不关心 2^-64 的碰撞机会，如果所有内容都可以与其他所有内容发生冲突，由于哈希的性质）。
*   每个哈希都驻留在通过其前 k 位猜测的桶中
*   如果任何桶溢出，文件大小加倍并拆分每个桶
*   一切都通过 mmap() 访问，而不是 read()/write()

它比 sqlite 快得令人难以置信，尽管它是低级 Perl 代码，而且 Perl 真的不适合高性能数据库。它不适用于比 MD5 分布更不均匀的任何东西，它假设一切都将非常统一以保持实现简单。

我一开始用 seek()/sysread()/syswrite() 试过，很慢，mmap() 版本真的快很多。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-03T22:32:51.597

我在描绘您的确切问题/需求时遇到了一些麻烦，但它仍然让我想到了 Git 以及它如何在磁盘上存储 SHA1 引用：

取给定哈希的十六进制字符串表示，例如“ `abfab0da6f4ebc23cb15e04ff500ed54`”。将散列中的前两个字符（`ab`在我们的例子中为“”）切掉，并将其放入一个目录中。然后，使用其余的（“ `fab0da6f4ebc23cb15e04ff500ed54`”），创建文件，并将内容放入其中。

这样，您可以通过自动索引获得相当不错的磁盘性能（自然取决于您的 FS）。此外，您可以直接访问任何已知的哈希，只需在前两个字符（“ `./ab/fab0da`[..]”）之后插入目录分隔符

如果我完全错过了球，我很抱歉，但如果运气好的话，这可能会给你一个想法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-30T11:07:15.867

听起来像是[Berkeley DB](http://en.wikipedia.org/wiki/Berkeley_DB)的工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-12-22T03:11:16.893

其他基于磁盘的散列算法/数据结构包括线性散列和可扩展散列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T11:11:44.937

我首先想到了两种算法：

*   使用[b-tree](http://en.wikipedia.org/wiki/B-tree)。
*   通过使用散列的前 10 位索引到 1024 个单独文件中的一个来分离散列本身，每个文件都包含从这 10 位开始的所有散列的排序列表。这使您可以恒定时间跳转到应该适合内存的块，并在加载该块后进行 log(n) 搜索。（或者您可以使用 8 位散列成 256 个文件等）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T13:01:40.800

由于对于散列，您必须使用随机访问，我怀疑任何数据库都会为您提供不错的性能。您最好的选择可能是增加磁盘缓存（更多 RAM），并获得具有非常高随机访问速度的硬盘（可能是固态磁盘）。

# jstl - 在 JSTL 中打印格式化日期

> ID：495163
> 
> 赞同：0
> 
> 时间：2009-01-30T11:05:23.657
> 
> 标签：jstl

我正在从数据库中提取一个包含日期的列。在 DB 中它是字符值。我想以格式化的方式打印日期。我使用以下代码以格式化方式打印日期。

其中 ${Po[1]} 包含日期值。

但上面的语句打印空值。

任何建议

提前致谢

萨斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T11:10:48.870

使用 JSTL 格式标记，当然：

```
<fmt:date etc.> 
```

[http://www.java2s.com/Code/Java/JSTL/JSTLFormatDate.htm](http://www.java2s.com/Code/Java/JSTL/JSTLFormatDate.htm)

为什么你的值为 null 是另一回事。 `Po[1]`没有正确设置。该值如何输入到页面中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T11:30:43.213

Po[1] 由 SQL 语句填充。当我通常打印此值 ${Po[1]} 时，它正在正确打印日期。我想格式化此日期。

谢谢

萨斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T11:44:48.083

JSTL 库需要 Date 数据类型 (java.util.Date) 的对象。您必须使用 java.sql.Date.valueOf 或 java.util.Date.parse 函数将字符串数据解析为 java.util.Date。

如果您出于任何原因不喜欢创建 java.util.Date 的对象，那么您可以使用 JavaScript 函数来格式化 Date 字符串

# c# - 在 .NETCF 中包装凭据管理器 API

> ID：495170
> 
> 赞同：0
> 
> 时间：2009-01-30T11:09:07.500
> 
> 标签：c#, compact-framework, windows-ce, credentials, pocketpc

[认为我成功地为这里](http://msdn.microsoft.com/en-us/library/aa922921.aspx)提到的 Credential API 函数创建了一个托管包装类，并得到了一些帮助[至少](http://blogs.msdn.com/peerchan/pages/487834.aspx)从该函数返回的 Win32-Errorcodes 是零或其他但预期的（即，如果调用两次，则来自 CredDelete 的[1168](http://help.netop.com/support/errorcodes/win32_error_codes.htm) ）和适当的值存储在注册表中的正确位置 (HKLM/Comm/Security/Credman/1..)。

现在，我正在使用嵌入在 PPC 上的 WindowsForm 中的 Webbrowser-Control 对使用 NTLM-Authentication 的网站进行身份验证。我不想让弹出对话框出现，用户必须在其中输入他的凭据。相反，我让用户可以将他的凭据存储在他首先在 Optiondialog-Form 中输入的设备上（实习生调用 CredWrite/CredUpdate）。

但是 PIE 对我使用 API 所做的事情感到非常厌恶，CredWrite、-Update 或 -Delete 都没有真正起作用。那么我在这里错过了什么？

CredWrite 的示例代码：

```
[DllImport("coredll.dll", CharSet = CharSet.Unicode, SetLastError = true)]
static extern int CredWrite([In]IntPtr pCred, [In]CREDWRITE_FLAGS dwflags);

public enum CREDWRITE_FLAGS : int
{
    CRED_FLAG_FAIL_IF_EXISTING = 0x00000400
}

    public struct CRED
    {
        public int dwVersion;
        public CRED_TYPE dwType;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string wszUser;
        public int dwUserLen;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string wszTarget;
        public int dwTargetLen;
        public IntPtr pBlob;
        public int dwBlobSize;
        public CRED_FLAGS dwFlags;
    }
    public enum CRED_TYPE
    {
        CRED_TYPE_NTLM = 0x00010002,
        CRED_TYPE_KERBEROS = 0x00010004,
        CRED_TYPE_PLAINTEXT_PASSWORD = 0x00010006,
        CRED_TYPE_CERTIFICATE = 0x00010008,
        CRED_TYPE_GENERIC = 0x0001000a,
        CRED_TYPE_DOMAIN_PASSWORD = 0x00010001,
    }
    public enum CRED_FLAGS : int
    {
        CRED_FLAG_PERSIST = 0x00000001,
        CRED_FLAG_DEFAULT = 0x00000002,
        CRED_FLAG_SENSITIVE = 0x00000008,
        CRED_FLAG_TRUSTED = 0x00000010
    }

public static void WriteCredentials(string target, string userName, string password)
{
    CRED cred = new CRED();
    cred.dwVersion = 1;
    cred.dwType = CRED_TYPE.CRED_TYPE_NTLM;
    cred.wszTarget = target;
    cred.dwTargetLen = target.Length + 1;
    cred.wszUser = userName;
    cred.dwUserLen = userName.Length + 1; 

    cred.dwBlobSize = (Encoding.Unicode.GetBytes(password).Length + 1) * 2;
    //cred.pBlob = Marshal.StringToCoTaskMemUni(password); //<--not in CF
    //cred.pBlob = Marshal2.StringToHGlobalUni(password); //<--from OpenNETCF, the same?
    cred.pBlob = Marshal.StringToBSTR(password); //<--not sure of that, but tried the other one also
    cred.dwFlags = CRED_FLAGS.CRED_FLAG_PERSIST | CRED_FLAGS.CRED_FLAG_SENSITIVE | CRED_FLAGS.CRED_FLAG_TRUSTED; //<-- results in 25 which is also used in creds read which are stored by the IE-UI-CredMan-dialog

    IntPtr credPtr = Marshal.AllocHGlobal(Marshal.SizeOf(cred));
    Marshal.StructureToPtr(cred, credPtr, true);

    int ret = -1;
    ret = CredWrite(credPtr, CREDWRITE_FLAGS.CRED_FLAG_FAIL_IF_EXISTING); //returns zero, unless called twice with the same target/username-tuple.

    Marshal.FreeHGlobal(credPtr);
} 
```

顺便说一句，所谓的“MS-Experts”提到 PIE 有自己的凭据缓存机制，这就是为什么 PIE 忽略 CredUpdate 上的更改。但我怀疑这是 100% 正确的，因为当我在根本没有凭据的设备上调用 CredWrite 时，PIE 也会忽略它们（弹出窗口 cred-inputdialog）。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T14:02:13.063

我要检查的是

1.  如果您使用该对话框手动登录，它是否在预期的凭据注册表项 (HKLM/Comm/Security/Credman/1..) 中存储任何内容？如果不是，那么我会说它没有使用 Cred Manager 是非常有力的证据。
2.  如果您进行手动 NTLM 身份验证（例如使用资源管理器），浏览器是否会弹出凭据对话框？

我之前用设备完成了 NTLM 身份验证，只是没有使用浏览器控件，我使用了[Authentication Services APIs](http://msdn.microsoft.com/en-us/library/aa924676.aspx)。 [这是 native 中的一个示例](http://blog.opennetcf.com/ctacke/2005/02/08/NTLMDomainAuthenticationInCE.aspx)。我一直想把它移植到托管，只是还没有找到时间。

**编辑 1**：在进一步查看您的代码时，我不喜欢 blob。是什么让你认为它应该作为 BSTR 加入？那是一种 COM 类型，我非常怀疑它是否是您想要的。我倾向于只发送带有密码的字节数组。我会先尝试 Unicode，因为 CE 严重偏向于 Unicode，如果失败了，那就是 ASCII。

我还认为您对 CRED 结构的封送处理是可疑的，但这仅仅是因为我从 1.0 之前的日子开始就一直在使用 CF，并且我已经学会了“信任但验证”封送处理程序所做的一切。我至少会在内存视图中查看 CRED 实例，并确保这些字符串确实只是 4 字节指针，并且它们指向的地址实际上包含您的字符串数据（仅此而已，并且以 null 结尾）。

# ruby - 跨棋盘算法改进

> ID：495172
> 
> 赞同：4
> 
> 时间：2009-01-30T11:10:07.420
> 
> 标签：ruby, algorithm

感谢 David Kahn 的书[The Codebreakers](http://www.amazon.co.uk/Codebreakers-Comprehensive-History-Communication-Internet/dp/0684831309/ref=sr_1_1?ie=UTF8&s=books&qid=1233313339&sr=8-1)，古代密码学成为我的爱好之一，我正在尝试在 Ruby 类中实现以处理旧密码，例如[Nihilist 密码](http://en.wikipedia.org/wiki/Nihilist_cipher)和[ADFGVX](http://en.wikipedia.org/wiki/ADFGVX)。对于这些，一个有用的项目是[跨界棋盘](http://en.wikipedia.org/wiki/Straddling_checkerboard)。我在 Ruby 中有以下实现，欢迎任何改进。

`class Key`是基类（如果需要，可以使用虚拟类）。`Key#condensed`是一种从给定单词中删除重复字母的方法。

```
class SKey < Key
  attr_reader :full_key
  attr_reader :alpha, :ralpha

  def initialize(key)
    super(key)
    @alpha = Hash.new
    @ralpha = Hash.new
    @full_key = checkboard()
    gen_rings()
  end

  # === checkboard
  #
  # Shuffle the alphabet a bit to avoid sequential allocation of the
  # code numbers
  #
  # Regular rectangle
  # -----------------
  # Key is ARABESQUE condensed into ARBESQU (len = 7) (height = 4)
  # Let word be ARBESQUCDFGHIJKLMNOPTVWXYZ/-
  #
  # First passes will generate
  #
  # A  RBESQUCDFGHIJKLMNOPTVWXYZ/-   c=0  0 x 6
  # AC  RBESQUDFGHIJKLMNOPTVWXYZ/-   c=6  1 x 6
  # ACK  RBESQUDFGHIJLMNOPTVWXYZ/-   c=12 2 x 6
  # ACKV  RBESQUDFGHIJLMNOPTWXYZ/-   c=18 3 x 6
  # ACKVR  BESQUDFGHIJLMNOPTWXYZ/-   c=0  0 x 5
  # ACKVRD  BESQUFGHIJLMNOPTWXYZ/-   c=5  1 x 5
  # ...
  # ACKVRDLWBFMXEGNYSHOZQIP/UJT-
  #
  # Irregular rectangle
  # -------------------
  # Key is SUBWAY condensed info SUBWAY (len = 6) (height = 5)
  #
  # S  UBWAYCDEFGHIJKLMNOPQRTVXZ/-   c=0  0 x 5
  # SC  UBWAYDEFGHIJKLMNOPQRTVXZ/-   c=5  1 x 5
  # SCI  UBWAYDEFGHJKLMNOPQRTVXZ/-   c=10 2 x 5
  # SCIO  UBWAYDEFGHJKLMNPQRTVXZ/-   c=15 3 x 5
  # SCIOX  UBWAYDEFGHJKLMNPQRTVZ/-   c=20 4 x 5
  # SCIOXU  BWAYDEFGHJKLMNPQRTVZ/-   c=0  0 x 4
  # ...
  # SCIOXUDJPZBEKQ/WFLR-AG  YHMNTV   c=1  1 x 1
  # SCIOXUDJPZBEKQ/WFLR-AGM  YHNTV   c=2  2 x 1
  # SCIOXUDJPZBEKQ/WFLR-AGMT  YHNV   c=3  3 x 1
  # SCIOXUDJPZBEKQ/WFLR-AGMTYHNV
  #
  def checkboard
    word = (@key + BASE).condensed.dup
    len = @key.condensed.length
    height = BASE.length / len

    # Odd rectangle
    #
    if (BASE.length % len) != 0
      height = height + 1
    end

    print "\ncheckboard size is #{len} x #{height}\n"
    res = ""
    (len - 1).downto(0) do |i|
      0.upto(height - 1) do |j|
        if word.length <= (height - 1) then
          return res + word
        else
          c = word.slice!(i * j)
          if not c.nil? then
            res = res + c.chr
          end
        end
      end
    end
    return res
  end 

  # == gen_rings
  #
  # Assign a code number for each letter. Each code number is
  # sequentially allocated from two pools, one with 0..7 and
  # the other with 80..99.
  #
  # Allocation is made on the following criterias
  # - if letter is one of ESANTIRU assign a single code number
  # - else assign of of the two letters ones
  #
  # Generate both the encoding and decoding rings.
  #
  # XXX FIXME Use of 80-99 is hardcoded
  #
  def gen_rings
    ind_u = 0
    ind_d = 80

    word = @full_key.dup
    word.scan(/./) do |c|
      if c =~ /[ESANTIRU]/
        @alpha[c] = ind_u
        @ralpha[ind_u] = c
        ind_u = ind_u + 1
      else
        @alpha[c] = ind_d
        @ralpha[ind_d] = c
        ind_d = ind_d + 1
      end
    end
  end # -- gen_rings 
```

Ruby/Python/Perl 或伪代码对我来说很好。感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T03:49:29.820

也许您应该尝试[重构 :my => 代码](http://refactormycode.com/)？那里有很多乐于助人的人。

# reporting-services - Reporting Services - 确定矩阵中显示的列数

> ID：495174
> 
> 赞同：4
> 
> 时间：2009-01-30T11:11:15.173
> 
> 标签：reporting-services

是否可以确定 Reporting Services 报表中显示的列数，并在单独文本框的可见性表达式中使用它？

我面临以下情况：

我的客户有一个 Reporting Services 2005 报表，其中包含一个矩阵，该矩阵根据所选参数显示可变数量的列。有时，某些用户会生成包含大量列的报告。当他们随后尝试导出到 Excel 时，这会导致服务器错误，因为 Excel 97-2003 格式限制为 256 列。

因此，当矩阵中显示超过 256 列时，我想在报告顶部显示一条消息，建议用户注意此限制并建议导出到 CSV 的解决方法（如果他们有的话，可以在 Excel 2007 中查看）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T16:02:36.237

您能否对数据集进行计数以获取列数？

```
Count(Fields!FieldUsedAsColumnGrouping.Value,"DatasetName") 
```

不确定您的数据和矩阵是如何设置的，我做了类似的事情，我必须知道列数，以便绘制适当的边界线。但是我认为您应该能够对数据集或分组进行计数以获取所需的内容。（如果需要，我可以在星期一粘贴一些代码。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T17:00:04.297

这是可以做到的，我只是创建了一个测试来证明我的理论；这是基础知识。

我在我的数据集上创建了一个简单值为 1 的计算列。我将此列添加到矩阵中最低的粒度列分组（层次结构中的最低列）。然后，我在矩阵中添加了另一列，并使用我从数据集中计算的列对该列执行了 RunningValue。RunningValue 可以采用 Scope 参数，在这种情况下，范围是层次结构中最低级别 Grouping 的名称。这给了我一个等于矩阵中列数的值。

可能有更好的方法可以做到这一点，我会为你研究它，但这是我脑海中出现的第一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T02:53:16.673

解决这个问题（大量列）的方法是在这么多列之后“包装”矩阵。您可以通过检查数据源中的“指针”或分组编号将矩阵放在表或另一个矩阵中，外部表/矩阵控制换行。为此，您还需要递增此指针，该指针控制每 n 行的分组，其中 n 是您希望出现在矩阵报告中的最大列数。

转换为矩阵的数据源示例：[Group Pointer]、[Matrix Columnn Dimension]、[Matrix Row Dimension]、[Measure/Data]

每次 [Group Pointer] 中断时，例如 20 [Matrix Column Dimensions]，外部表/矩阵将包裹内部矩阵。

# .net - 哪种类型的密钥 .NET 程序集用于签名以及如何创建它？

> ID：495175
> 
> 赞同：2
> 
> 时间：2009-01-30T11:11:31.303
> 
> 标签：.net, assemblies, signing

我已经阅读了许多[关于程序集签名的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms247123.aspx)，但我没有发现任何关于创建密钥的信息，只是关于创建文件，但是列出的 3 种创建文件的方法需要预先生成的密钥。你能给我一个指向这个教程的链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T11:14:38.443

[以下是](http://msdn.microsoft.com/en-us/library/6f05ezxy.aspx)创建新公钥/私钥对的方法。您可以在 VS UI 中执行相同的操作 - 请参阅项目属性中的签名选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T11:19:01.477

正如 Anton 所建议的，您可以使用 sn.exe 轻松生成一个。这样做的问题是，验证您作为发布者的身份没有好处，因为没有为自生成密钥建立信任链。如果您想对您的程序集进行签名以便验证您的身份，那么您需要从受信任的供应商处获得证书，例如[Verisign](http://www.verisign.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T11:17:31.370

您可以使用微软提供的 Sn.exe 来生成 à Key pair。

之后，您必须执行以下操作：

```
[assembly: AssemblyKeyFileAttribute(@"..\..\key.snk")] 
```

希望这可以帮助:)

# mysql - 当未设置某些列时，如何使mysql无法插入行？

> ID：495189
> 
> 赞同：0
> 
> 时间：2009-01-30T11:16:01.963
> 
> 标签：mysql, insert, constraints

我遇到了一个问题，可以在没有专门设置 INT NOT NULL 列的情况下将行插入表中（默认为 0，这对我的目的无效）

我以这种方式创建表：

```
CREATE TABLE inventorycontrol (
     ID                         INT NOT NULL UNIQUE AUTO_INCREMENT
    ,nodeID                     INT NOT NULL CHECK (nodeID > 0)
    ,custom1                    VARCHAR(128) NOT NULL DEFAULT ''
    ,custom2                    VARCHAR(128) NOT NULL DEFAULT ''
    ,custom3                    VARCHAR(128) NOT NULL DEFAULT ''
    ,custom4                    VARCHAR(128) NOT NULL DEFAULT ''
    ,articlekey                 VARCHAR(32) NOT NULL 
    ,amount                     INT NOT NULL
    ,orderID                    INT NULL
    ,supplierID                 INT NULL
    ,customerID                 INT NULL
    ,datecreated                DATETIME NOT NULL
    ,expectedcompletion         DATETIME NOT NULL
    ,datecompleted              DATETIME NULL

    ,PRIMARY KEY (articlekey, datecreated)
)
GO

CREATE INDEX ix_InventoryArticle ON inventorycontrol ( articlekey )
GO

CREATE INDEX ix_InventoryArticle_Custom ON inventorycontrol ( nodeID, custom1, custom2, custom3, custom4 )
GO

CREATE INDEX ix_InventoryAmount ON inventorycontrol ( amount ) 
GO

CREATE INDEX ix_InventoryCreated ON inventorycontrol ( datecreated )
GO

CREATE INDEX ix_InventoryCompleted  ON inventorycontrol ( datecompleted )
GO

ALTER TABLE inventorycontrol
    ADD FOREIGN KEY fk_nodeID (nodeID) REFERENCES node(ID)
GO 
```

我希望这个插入失败：

```
INSERT INTO inventorycontrol ( articlekey, amount, datecreated, expectedcompletion, datecompleted )
VALUES
     ( 'abc', -10, '2009-01-27', '2009-01-27', NULL ) 
GO 
```

不幸的是，这行得通。（没有节点 WHERE ID=0）

有什么办法可以强制这个插入失败，而不是为插入创建触发器？

提前致谢，

克里斯

PS我正在使用mysql Ver 14.12 Distrib 5.0.45，用于redhat-linux-gnu（x86_64），使用readline 5.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T11:40:06.223

您需要将 MySQL 置于[**严格模式**](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_strict_all_tables)

在您的配置文件中：

```
sql-mode="STRICT_ALL_TABLES" 
```

编辑：

您还可以使用以下查询在本地设置（并将其放回）：

```
SET @mode = @@SESSION.sql_mode;
SET sql_mode = "STRICT_ALL_TABLES";

INSERT...;

SET sql_mode = @mode; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-30T11:20:11.503

将值设置为 NOT NULL，如果这不起作用并且您无法在插入行之前通过代码检查值，则应该放置新的触发器，当数据库上有插入或修改调用时查找值。

希望这可以帮助！

# html - 我可以创建一个 HTML 表格宽度百分比高度但像素精确的行高吗？

> ID：495194
> 
> 赞同：3
> 
> 时间：2009-01-30T11:17:52.100
> 
> 标签：html, css

我需要在有两行的网页上创建一个表格。表格需要填满整个页面，所以我在 CSS 样式表中将表格的高度和宽度设置为 100%，并将 HTML 和正文的高度也设置为 100%。

但是，我需要表格的第一行高度正好为 100 像素，第二行展开以适合表格的其余部分。当我设置顶行的高度时，它不起作用。

这种行为可能吗？我尝试了以下但它不起作用。

```
<table style="border-collapse:collapse;height:100%;width:100%;">
  <tr>
    <td style="border:solid 1px black;height:100px">1</td>
    <td style="border:solid 1px black">2</td>
  </tr>
  <tr>
    <td style="border:solid 1px black">3</td>
    <td style="border:solid 1px black">4</td>
  </tr>
</table> 
```

编辑：我正在使用表格数据，特别想使用表格，而不是 div。上面的示例是为了简化一个包含大约 20 列的表格。

编辑2：我发现了问题。它是 HTML 中的 doctype 定义（由 Visual Studio 添加）。删除后...

...它完美地工作。所以我的新问题是，**这样做是否可以，或者是否有使用 DOCTYPE 的正确方法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T11:26:06.813

没有 CSS 这可以工作：

```
<html>
  <body>
    <table height="100%" width="100%" border="1">
      <tr height="100">
        <td>This is item text.</td>
      </tr>

      <tr>
        <td>This is item text 2.</td>
      </tr>
    </table>
  </body>
</html> 
```

所以这是可能的，我现在用 CSS 试试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-30T11:34:27.107

可以使用 CSS。

HTML：

```
<html>
  <head>
    <link href="table.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <table>
      <tr class="fixed">
        <td>This is item text.</td>
      </tr>

      <tr>
        <td>This is item text 2.</td>
      </tr>
    </table>

  </body>
</html> 
```

CSS：

```
table
{
 border: 1px solid black;
 height: 100%;
 width: 100%;
}

tr.fixed
{
 border: 1px solid black;
 height: 100px;
}

td
{
 border: 1px solid black;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T11:29:49.800

好的，根据新信息（即表格数据），这是一个解决方案：

```
<html>
<head>
<style type="text/css">
    #wrap { position: absolute; height: 100%; top: 0; right: 0; bottom: 0; left: 0; }
    table { width: 100%; height: 100%; }
    tr { margin: 0; }
    td { text-align: center; font-size: 80px; font-weight: bold; color: white; }
    #top { height: 100px; }
    #bottom { height: 100%; }
    #topleft { background-color: red; border: 3px solid black; }
    #topright { background-color: green; border: 3px solid yellow; }
    #bottomleft { background-color: yellow; border: 3px solid green; }
    #bottomright { background-color: blue; border: 3px solid red; }
</style>
</head>
<body>
<div id="wrap"> 
    <table>
    <tr id="top">
        <td id="topleft">1</td>
        <td id="topright">2</td>
    </tr>
    <tr id="bottom">
        <td id="bottomleft">3</td>
        <td id="bottomright">4</td>
    </tr>
  </table>
</div>  
</body>
</html> 
```

如果你想要一个非表格的解决方案，我会保留下面的完整性。没有理由不能通过使用浮动或定位将其扩展到 2x2 网格：

```
<html>
<head>
  <style type="text/css" media="screen">
    #wrap {
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      bottom: 0;
    }

    #top {
      width: 100%;
      height: 100px;
      position: relative;
      top: 0;
      background-color: #CCC;
    }

    #bottom {
      position: relative;
      height: 100%;
      bottom: 0;
      width: 100%;
      background-color: yellow;
    }
  </style>
</head>
<body>
  <div id="wrap">
    <div id="top">Top</div>
    <div id="bottom">Bottom</div>
  </div>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T12:14:34.967

好吧，我想我知道该怎么做，所以我用完了代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <style type="text/css">
    html, body 
    {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    table 
    {
        height: 100%;
        width: 100%;
        background-color: blue;
        border-collapse:collapse;
    }
    tr#fixed
    {
        background: silver; 
        height: 100px;
    }
    tr#expand
    {
        background: gray;
    }
    td 
    {
        text-align: center;
    }
    </style>
</head>
<body>
    <table>
        <tbody>
            <tr id="fixed">
                <td>100</td>
            </tr>
            <tr id="expand">
                <td>*</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

*（注意，严格 + CSS）*

我发现虽然这适用于 Firefox、Chrome 和任何我喜欢的 IE，但 IE 在这里有一些***非常***不寻常的行为。长话短说 IE 不考虑像素尺寸，而是比较相对高度！它在 IE 开发工具栏中误报了这一点，但如果您添加和更改高度，您可以清楚地看到它`tr#expand`

如果您将高度设置为 100 像素，您会发现两个 tr 的实际渲染率为 50%。在 200 像素时，您将获得 33/66 分割，在 50 像素时，您将获得 66/33 分割！对于像 em 这样的其他单位，这似乎是正确的，我怀疑它可能与内容有关，因为它在 5px 等低单位具有边缘行为。据我所见，IE在这里彻底坏了。这不是我以前见过的错误，也不是我能够谷歌搜索的错误。在解决方法出现之前，在我看来，您是严格解决方案的 SOL。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-30T17:17:05.900

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style type="text/css" media="screen">
        html, body {
            height:100%;
            margin:0;
        }
        table {
            background-color:#ccc;
            width:100%;
            height:100%;
        }
        th {
            height:100px;
            background-color:#fcfcfc;
        }
    </style>

    <title>TableTest</title>

</head>

<body>

<table>
    <tr>
        <th>Header1</th>
        <th>Header2</th>
    </tr>
    <tr>
        <td>Data1</td>
        <td>Data2</td>
    </tr>
</table>

</body>
</html> 
```

我认为这是一种更语义化的方法，无需在表格标签中使用类属性的 id，而是利用 <th> 标签来区分两行。此代码在 IE6/7 中无法按预期工作，它可能在 IE8 中工作，我对其进行了测试，并在 Firefox 3、Safari 3.1.2、Opera 9.50 和 Camino 1.6.6 中正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T11:29:54.450

您只在第一行的一列中给出了高度。尝试在两列或行级别给出高度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T11:23:34.210

是的，您可以组合所有测量值。只需在不同的浏览器中尝试一下。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T11:28:20.100

在 IE7、Mozilla 2、Chrome 1、Opera 9.5、Safari 3.2 中尝试了以下代码，它可以工作

```
<html>
<head>

</head>
 <body>
  <table height="100%" border="1">
<tr height="100px"><td>Some</td></tr>
<tr><td>Other</td></tr>
 </table>
 </body>
</html> 
```

# java - 如何在java中读取xls图表？

> ID：495199
> 
> 赞同：3
> 
> 时间：2009-01-30T11:20:05.980
> 
> 标签：java, excel, charts

我正在使用 POI API 读取模板 n 以通过 java 创建 XLS 文件。

我想从模板中获取图表。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-18T11:50:02.743

您可以使用 JFree 图表 API 在 excel 中创建图表。[http://www.programming-free.com/2012/12/create-charts-in-excel-using-java.html](http://www.programming-free.com/2012/12/create-charts-in-excel-using-java.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T12:56:52.057

也许[Andy Khan 的 JExcel](http://jexcelapi.sourceforge.net/resources/faq/)可以帮助你。这是一个很棒的工具。我更喜欢它而不是 POI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T12:52:47.947

如果您将图表构建到模板中，它将在您将数据插入电子表格时自动更新。

如果您想从头开始创建图表，我相信 POI 中尚不提供此功能。

来自 POI 网站：

> 您目前无法创建图表。但是，您可以在 Excel 中创建图表，使用 HSSF 修改图表数据值并编写新的电子表格。这是可能的，因为 POI 会尽可能地保持现有记录的完整性。

[POI 限制](http://poi.apache.org/spreadsheet/limitations.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T12:25:13.447

您的意思是获取 GIF 或 JPEG 的方法吗？Actuate e.Spreadsheet 可以从 Excel 图表和范围创建图像，但它很昂贵（我在那里工作到 2002 年，但现在没有隶属关系）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T14:17:58.663

```
// officetools.jar available at http://www.dancrintea.ro/xls-to-pdf/

import officetools.OfficeFile;

FileInputStream fis = new FileInputStream(new File(”test.xls”));

OfficeFile f = new OfficeFile(fis, ”localhost”, ”8100″, false);

// read a column
for (int i=0; i<=99; i++)
    System.out.println(f.getCell(1,i)); 
```

# 3d - Xna 相机放置

> ID：495203
> 
> 赞同：1
> 
> 时间：2009-01-30T11:22:06.837
> 
> 标签：3d, xna

你好，

我试图在 Xna GameStudio 中做一个 3D 查看器。

此刻我知道如何移动相机矢量位置和 CameraView 矢量位置，但我的问题是关于旋转（当我使用鼠标时如何移动相机）。就像 3D 射击游戏一样。

任何想法，网址或代码有一些帮助？

非常感谢。亲切的问候。何塞马。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T11:44:20.003

试试[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Mouse_camera.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Mouse_camera.php)
但是任何关于鼠标移动检测的教程都会给你一个好的开始。

# java - 如何外部化 Maven 构建文件？

> ID：495208
> 
> 赞同：2
> 
> 时间：2009-01-30T11:25:53.053
> 
> 标签：java, maven-2, refactoring, maven-plugin

我遇到了如何以 XML 格式对配置文件进行版本控制的问题。最简单的方法是编写 XSLT 更新。应用程序的每个版本都有自己的 XSLT 更新。所有这些更新文件都足够小，可以由 IDE 管理，尤其是它的*DIFF*工具。

由于该项目已经开发为 Maven2，Java 逻辑解决方案是通过 maven 构建文件触发这些更新。

这是应用一组更新的部分今天的样子：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>xml-maven-plugin</artifactId>
  <executions>
    <execution>
    <phase>compile</phase>
      <goals>
        <goal>transform</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <transformationSets>
      <transformationSet>
        <dir>config/xsltUpdates/input</dir>
        <stylesheet>config/xsltUpdates/update1-8-3.xsl</stylesheet>
        <outputDir>config/xsltUpdates/update1-8-3</outputDir>
      </transformationSet>
      <transformationSet>
         <dir>config/xsltUpdates/update1-8-3</dir>
         <stylesheet>config/xsltUpdates/update1-8-9.xsl</stylesheet>
         <outputDir>config/xsltUpdates/update1-8-9</outputDir>
      </transformationSet>
      <transformationSet>
        <dir>config/xsltUpdates/update1-8-9</dir>
        <stylesheet>config/xsltUpdates/update1-9-0.xsl</stylesheet>
        <outputDir>config/xsltUpdates/update1-9-0</outputDir>
      </transformationSet>
      <transformationSet>
        <dir>config/xsltUpdates/update1-9-0</dir>
        <stylesheet>config/xsltUpdates/update1-10-0.xsl</stylesheet>
        <outputDir>config/xsltUpdates/update1-10-0</outputDir>
      </transformationSet>
      <transformationSet>
        <dir>config/xsltUpdates/update1-10-0</dir>
        <stylesheet>config/xsltUpdates/update1-10-0-1.xsl</stylesheet>
        <outputDir>config/xsltUpdates/update1-10-0-1</outputDir>
      </transformationSet>
      <transformationSet>
        <dir>config/xsltUpdates/update1-10-0-1</dir>
        <stylesheet>config/xsltUpdates/update1-10-0-2.xsl</stylesheet>
        <outputDir>config/xsltUpdates/update1-10-0-2</outputDir>
      </transformationSet>
      <transformationSet>
        <dir>config/xsltUpdates/update1-10-0-2</dir>
        <stylesheet>config/xsltUpdates/updateCurrent.xsl</stylesheet>
        <outputDir>config/xsltUpdates/output</outputDir>
      </transformationSet>
    </transformationSets>
  </configuration>
  <dependencies>
    <dependency>
      <groupId>net.sf.saxon</groupId>
      <artifactId>saxon</artifactId>
      <version>8.7</version>
    </dependency>
  </dependencies>
</plugin> 
```

我想在某些属性/xml 文件导入中外部化有关 transformationSet 的信息。我的 pom.xml 文件将更清晰，更易于维护的外部化信息。

我怎样才能做到这一点？

我可以在构建文件中使用一些迭代控制语句吗？有没有办法从某个外部文件导入数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-03T14:02:53.123

一些插件允许您使用外部描述符（例如[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/examples/sharing-descriptors.html)）。不幸的是，xml-maven-plugin 还不是其中之一。

一种选择是从 xml-maven-plugin 复制相关目标，并将处理从 maven-shared-io 硬塞到目标中。我一直在寻求自己这样做，以期针对各种插件提出请求以使用描述符文件和 LocatorStrategy 方法来查找描述符。这是一些将修改 xml-maven-plugin 以允许使用描述符的处理。请注意，所涉及的文件几乎没有验证，因此它有点脆弱，但它确实有效。

1) 使用以下依赖项创建一个新的 maven-plugin 项目（比如称为 xml-ext-maven-plugin）：

```
<dependencies>
  <dependency>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>xml-maven-plugin</artifactId>
    <version>1.0-beta-2</version>
  </dependency>
  <dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2-beta-2</version>
  </dependency>
</dependencies> 
```

2) 从 xml-maven-plugin 复制 TransformMojo 和 AbstractXmlMojo .java 文件（您需要父 mojo 从其 javadoc 继承属性）。

3)向 TransformMojo添加一个*描述符属性：*

```
/**
 * A list of descriptor files to obtain the transformation sets from
 * 
 * @parameter
 */
private String[] descriptors; 
```

4) 修改execute()方法读取transformationSets的描述符

```
public void execute() throws MojoExecutionException, MojoFailureException {
    //insert at start of method to resolve transformationSets fronm descriptors
    if (descriptors != null && descriptors.length > 0) {
        transformationSets = readDescriptors(descriptors);
    }

    ... 
```

5) 实现*readDescriptors()*以允许您在类路径或项目内定位描述符（读取器处理主要从程序集插件的 DefaultAssemblyReader 提升）。请注意，此实现中几乎没有验证，适当的插件会检查是否设置了值等。

```
private TransformationSet[] readDescriptors(String[] descriptors)
        throws MojoExecutionException {

    List descriptorSets = new ArrayList();
    // add all the existing transformationSets
    if (transformationSets != null && transformationSets.length != 0) {
        descriptorSets.addAll(Arrays.asList(transformationSets));
    }

    for (int i = 0; i < descriptors.length; i++) {
        getLog().info(
                "Reading transformation descriptor: " + descriptors[i]);

        Location location = getLocation(descriptors[i]);

        Reader reader = null;
        try {
            reader = new InputStreamReader(location.getInputStream(),
                    "UTF-8");

            Xpp3Dom dom = Xpp3DomBuilder.build(reader);

            descriptorSets.addAll(parseTransformationSets(dom));
        } catch (IOException e) {
            throw new MojoExecutionException(
                    "Error reading transformation descriptor: "
                            + descriptors[i], e);
        } catch (XmlPullParserException e) {
            throw new MojoExecutionException(
                    "Error parsing transformation descriptor: "
                            + descriptors[i], e);
        } finally {
            IOUtil.close(reader);
        }
    }

    return (TransformationSet[]) descriptorSets
            .toArray(new TransformationSet[descriptorSets.size()]);
}

/**
 * Create transformationSets from the Xpp3Dom.
 * TODO use plexus utilities to resolve these elegantly?
 */
private List parseTransformationSets(Xpp3Dom dom) {
    // TODO validation of the input files!
    Xpp3Dom[] setDoms = dom.getChildren("transformationSet");

    List sets = new ArrayList();
    for (int i = 0; i < setDoms.length; i++) {
        TransformationSet set = new TransformationSet();
        set.setDir(new File(setDoms[i].getChild("dir").getValue()));
        set.setStylesheet(new File(setDoms[i].getChild("stylesheet")
                .getValue()));

        Xpp3Dom outDom = setDoms[i].getChild("outputDir");

        if (outDom != null) {
            set.setOutputDir(new File(outDom.getValue()));
        }

        sets.add(set);
    }
    return sets;
} 
```

6) 实现*getLocation()*以使用各种策略以相对路径、url 或类路径来发现文件。

```
private Location getLocation(String path) {
    List strategies = new ArrayList();
    strategies.add(new RelativeFileLocatorStrategy(getBasedir()));
    strategies.add(new ClasspathResourceLocatorStrategy());
    strategies.add(new FileLocatorStrategy());
    strategies.add(new URLLocatorStrategy());

    List refStrategies = new ArrayList();
    refStrategies.add(classpathStrategy);

    Locator locator = new Locator();

    locator.setStrategies(strategies);

    Location location = locator.resolve(path);
    return location;
} 
```

7) 覆盖*asAbsoluteFile()*以使用定位器策略解析文件（也允许我们在描述符项目中定义 xsl 文件）。

```
protected File asAbsoluteFile(File f) {
    String path = f.getPath();

    // ensure we're getting a path in the form that URL can handle
    if (path != null) {
        path = path.replaceAll("\\\\", "/");
    }
    Location location = getLocation(path);

    if (location == null) {
        //can't find the file, let the parent implementation have a try
        return super.asAbsoluteFile(f);
    }
    try {
        return location.getFile();
    } catch (IOException e) {
        throw new RuntimeException("unable to read file " + f.getPath(), e);
    }
} 
```

8) 将插件安装到您的存储库。

9) 创建一个新的 maven 项目来托管您的 transformationSets（比如称为 xml-ext-test-descriptor）。过程与assembly-plugin的[共享描述符](http://maven.apache.org/plugins/maven-assembly-plugin/examples/sharing-descriptors.html)相同，即创建一个工程，在src/main/resources下添加一些xml文件，然后安装工程。xml 文件采用标准 transformationSets 配置的形式。例如，在 src/main/resources/transformations1.xml 中放置几个​​转换：

```
<transformationSets>
  <transformationSet>
    <!--the config directory is in the root of the project -->
    <dir>config/xsltUpdates/input</dir>
    <!-- the stylesheet can be in the descriptor project-->
    <stylesheet>/stylesheets/update1-8-3.xsl</stylesheet>       
    <outputDir>config/xsltUpdates/update1-8-3</outputDir>
  </transformationSet>
  <transformationSet>
     <dir>config/xsltUpdates/update1-8-3</dir>
     <stylesheet>/stylesheets/update1-8-9.xsl</stylesheet>
     <outputDir>config/xsltUpdates/update1-8-9</outputDir>
  </transformationSet>
</transformationSets> 
```

10) 将您的 xsl 文件放入描述符项目中，例如 src/main/resources/stylesheets/update1-8-3.xsl

11）在你的项目中配置新插件，将描述符项目作为依赖引用，将xml文件作为描述符引用：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>xml-maven-plugin</artifactId>
  <executions>
    <execution>
      <phase>compile</phase>
      <goals>
        <goal>transform</goal>
      </goals>
    </execution>
  </executions>
  <dependencies>
    <dependency>
      <groupId>name.seller.rich</groupId>
      <artifactId>xml-ext-test-descriptor</artifactId>
      <version>0.0.1</version>
    </dependency>
  </dependencies>
  <configuration>
   <descriptors>
     <!-- will be resolved from xml-ext-test-descriptor -->
     <descriptor>/transformationSet1.xml</descriptor>
   </descriptors>
 </plugin> 
```

如果上述所有步骤都有效，则执行自定义插件时，将从 xml-ext-test-descriptor 依赖项解析 transformationSet1.xml 和您的 xsl 文件，并正常处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T12:59:04.223

可能有其他方法可以做到这一点，但你可以[`pluginManagement`](http://maven.apache.org/pom.html)在父 pom.xml 中有一个部分。

> pluginManagement：是一个在侧面插件中可见的元素。插件管理以几乎相同的方式包含插件元素，除了不是为这个特定的项目构建配置插件信息，它旨在配置从这个项目继承的项目构建。但是，这仅配置子级的 plugins 元素中实际引用的插件。孩子们有权覆盖 pluginManagement 定义。

例如：

父项目 POM（需要运行 mvn install 以确保这对您的子项目可见）

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.nkl</groupId>
  <artifactId>parent</artifactId>
  <packaging>pom</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>xml-maven-plugin</artifactId>
          <executions>
            <execution>
              <phase>compile</phase>
              <goals>
                <goal>transform</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <transformationSets>
              <transformationSet>
                <dir>config/xsltUpdates/input</dir>
                <stylesheet>config/xsltUpdates/update1-8-3.xsl</stylesheet>
                <outputDir>config/xsltUpdates/update1-8-3</outputDir>
              </transformationSet>
              <transformationSet>
                <dir>config/xsltUpdates/update1-8-3</dir>
                <stylesheet>config/xsltUpdates/update1-8-9.xsl</stylesheet>
                <outputDir>config/xsltUpdates/update1-8-9</outputDir>
              </transformationSet>
              <transformationSet>
                <dir>config/xsltUpdates/update1-8-9</dir>
                <stylesheet>config/xsltUpdates/update1-9-0.xsl</stylesheet>
                <outputDir>config/xsltUpdates/update1-9-0</outputDir>
              </transformationSet>
              <transformationSet>
                <dir>config/xsltUpdates/update1-9-0</dir>
                <stylesheet>config/xsltUpdates/update1-10-0.xsl</stylesheet>
                <outputDir>config/xsltUpdates/update1-10-0</outputDir>
              </transformationSet>
              <transformationSet>
                <dir>config/xsltUpdates/update1-10-0</dir>
                <stylesheet>config/xsltUpdates/update1-10-0-1.xsl</stylesheet>
                <outputDir>config/xsltUpdates/update1-10-0-1</outputDir>
              </transformationSet>
              <transformationSet>
                <dir>config/xsltUpdates/update1-10-0-1</dir>
                <stylesheet>config/xsltUpdates/update1-10-0-2.xsl</stylesheet>
                <outputDir>config/xsltUpdates/update1-10-0-2</outputDir>
              </transformationSet>
              <transformationSet>
                <dir>config/xsltUpdates/update1-10-0-2</dir>
                <stylesheet>config/xsltUpdates/updateCurrent.xsl</stylesheet>
                <outputDir>config/xsltUpdates/output</outputDir>
              </transformationSet>
            </transformationSets>
          </configuration>
          <dependencies>
            <dependency>
              <groupId>net.sf.saxon</groupId>
              <artifactId>saxon</artifactId>
              <version>8.7</version>
            </dependency>
          </dependencies>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project> 
```

子项目 POM

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org/maven-v4_0_0.xsd">
  <parent>
    <artifactId>parent</artifactId>
    <groupId>org.nkl</groupId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.nkl</groupId>
  <artifactId>child</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>xml-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project> 
```

# rest - 限制资源属性是 RESTful 吗？

> ID：495212
> 
> 赞同：1
> 
> 时间：2009-01-30T11:26:49.697
> 
> 标签：rest

我们的资源由几十个领域（属性）组成。我们的一些客户不需要所有资源的属性。为了节省网络负载，我们实现了一个查询字符串参数来限制资源属性。例如，下一个 URL 将返回一个包含所有字段的资源集合：

[http://myapp/myresources](http://myapp/myresources)

但是当客户只需要特定字段时，他可以通过调用来做到这一点：

[http://myapp/myresources?fields=f1,f2,f13,f22](http://myapp/myresources?fields=f1,f2,f13,f22)

我们的架构师认为这种方法不是 RESTful。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T11:47:46.877

如果您将其实现为同一资源的新媒体类型（表示），那将是 RESTful。这将是一个不完整的表示，但仍然是一个表示。假设你有这个资源：

/myapp/myresources

它是某种资源的完整表示的集合。对同一个集合有不同的表示是完全可以的。但是，如果您希望它与 REST 兼容，则应将其实现为新的媒体类型（格式）。

然后，您可以查询将 Accept 标头设置为所需媒体类型的集合，或者您可以使用“扩展样式中的媒体类型” - 例如。/myapp/myresources.f1_f2_f3。

您的情况有点棘手，因为您的媒体类型将在飞行中发明，但我认为这并非不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T00:34:23.633

如果您停止区分资源和字段，问题就会消失。

如果资源`/myresource`有两个“子资源”`/myresource/f1`和`/myresource/f2`，那么通过指定一个列表来一次获取它们是有意义的：`/myresource/f1,f2`。

# vmware - XenServer 与 VMware 基础架构

> ID：495214
> 
> 赞同：6
> 
> 时间：2009-01-30T11:28:14.827
> 
> 标签：vmware, xen, esx

有没有人有比较 Xen Server 5 和 VMWare Infrastructure 3 的经验。我正在计划一个虚拟化项目并查看两者的企业版。它们似乎都提供了非常相似的功能，因此不确定哪个是最佳选择。

有谁知道比较这些产品的好网站或文章？

或者，任何人都可以回答以下任何问题：

1) 是否存在显着的性能差异？
2) 任何一个包是否有任何安全风险或漏洞。
3) Xen Server SDK 似乎比 VMware SDK 更容易理解。有谁有这两个方面的经验，可以比较一下吗？任何一个SDK都缺乏吗？
4) 对客户端工具有何评论？对我来说，它们似乎都相当相似，但是其中任何一个都缺少什么吗？

或任何其他一般性评论和意见将不胜感激。

谢谢，

杰米

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T12:36:26.157

1) 是否存在显着的性能差异？XenServer 是本机 64 位并使用半虚拟化，因此速度更快。如果您考虑 XenApp os TS 工作负载，您将能够在每台服务器上增加大约 50% 的用户

2) 任何一个包是否有任何安全风险或漏洞。XS 没有已知的安全问题，并且由于它的管理程序更小，没有遗留代码，XS 4.0 在一年内只有 4 次更新或修复，而 VMware 每周有一次。

3) Xen Server SDK 似乎比 VMware SDK 更容易理解。有谁有这两个方面的经验，可以比较一下吗？任何一个SDK都缺乏吗？未使用 SDK，但 AFAIK 比 VMWare 更易于使用且更开放，此外您还拥有强大的 CLI 和 PowerShell。

4) 对客户端工具有何评论？对我来说，它们似乎都相当相似，但是其中任何一个都缺少什么吗？XenServer 更简单，不需要管理服务器

......而且......它更便宜

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T03:29:51.670

最近在这方面做了很多。

1.  XenServer 速度更快，因为它采用了虚拟化技术，而且它拥有更轻的虚拟机管理程序。此外，如果您更喜欢其中的某些功能，您可以更换 Xen 虚拟机管理程序并使用 Hyper-V，同时仍利用 XenCenter 功能。

2.  XenCenter 5 的补丁很少，VI 的补丁很多。

3.  查看了两个 SDK。VMWare 有很好的文档，但从代码的角度来看非常不透明。根据您的客户端语言，它可能不太受支持。我们使用的是 .NET，而且很痛苦。Xen SDK 要容易得多。

4.  XenCenter 是一个非常好的客户端，可以满足您的一切需求。池管理等一些东西很棒。也很喜欢存储集成。VMWare 客户端也很好，尽管两者之间没有太多选择。

你要创建一个主机池吗？如果您要使用单服务器解决方案，您可能会使用免费的 XenServer Express - 稍后可通过许可证密钥进行升级。Xen 也比 VMWare 便宜很多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-11-25T10:48:42.037

我们在 Xen Server（23HW 机器）hypervizor 上为 3500 个用户运行 XenApp（170VM）环境大约 3 年。

当您尝试比较价格时，它在 WMware 上的表现如何——别无选择——Citrix 的价格要好得多。

操作 XS 很容易，性能对于 Win 2003 XenAps 很好，对于 Win 2008 很好。我运行了太多 (12) 个非 XenApp Win2003 和 Win2008 服务器，并且没有性能问题。

Xen 服务器对我们的优势：

*   PowerShell 命令支持 - 轻松管理和迁移。
*   与 XenDesktop 映像的兼容性
*   XenApp 优化 - 它允许更多用户使用 xen ap 服务器...
*   轻松实现其他 citrix 技术，例如：

    *   配置（从一个映像/虚拟磁盘启动多台计算机）
    *   xenEdge 性能和会话监控
    *   Workflow Studio - 规划和自动化您的基础设施。

        ```
         - most of them are FREE! 
        ```

Xen 服务器对我们不利：

WMware 可能在单个 Windows 机器上具有更好的性能，但不适用于 XenApp 服务器……因此，如果您正在寻找没有 XenApp 或 XenDesktop 的不容易的云基础架构，WMware 非常适合您。

最好的问候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-27T08:17:05.220

从两者*用户*端的个人经验来看，如果您打算仅使用 Linux，我会说 Xen 是一个不错的选择。

如果您想要一个混合环境，我会选择 VMware，因为我发现他们对非 Linux 平台的支持更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-28T13:08:13.057

XenServer 现在是免费的，这对我们来说是一个**很大**的卖点 :-) XenServer v5.5 是一个很好的产品，我们正在更换 ESX Server - 首先是作为我们 XenApp 终端服务器的主机。XenServer 针对运行这些进行了优化。

Citrix 的产品现在使 VMware ESX Server 看起来价格过高。

# java - NetBeans 中 JFrame 中的 JPanel

> ID：495217
> 
> 赞同：5
> 
> 时间：2009-01-30T11:28:33.203
> 
> 标签：java, swing, netbeans, jframe, jpanel

我在 NetBeans 中创建了一个 Java 应用程序（项目），其中我设计了一个`JFrame`带有菜单栏的和不同的`JPanels`. 我希望这些`JPanels`出现在`JFrame`不同菜单项的 on 操作中，因此每当单击菜单项时，`JPanels`应该在`JFrame`. 我已经分别设计了两者`JFrame`，`JPanel`但我无法将它们链接在一起。

请朋友们帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-30T12:00:29.317

您可以为此使用卡片布局。卡片布局可以包含许多组件（在您的情况下为 JPanel），您可以在它们之间切换。在 netbeans 调色板中添加卡片布局很容易。

文件：

[http://java.sun.com/j2se/1.4.2/docs/api/java/awt/CardLayout.html](http://java.sun.com/j2se/1.4.2/docs/api/java/awt/CardLayout.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-10T11:54:01.517

从您的一条评论中可以看出，您希望在单击按钮时动态创建 JPanel。如果是这种情况，那么 CardLayout 并不理想。自己实现同样的效果相对容易。代码将如下所示：

```
public void actionPerformed(ActionEvent event) {
    Container contentPane = frame.getContentPane();
    contentPane.removeAll();
    contentPane.add(new YourPanel());
    contentPane.invalidate();
    contentPane.repaint();
} 
```

假设更换面板是框架中的唯一组件。如果不是，则将带有 BorderLayout 的 JPanel 添加到 Matisse 的内容窗格中，然后将新面板添加到该内容窗格中，而不是内容窗格中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-08T00:28:08.410

Matisse GUI 构建器对“JTabbedPane”控件有很好的支持，如果那是您正在寻找的。您可以将 TabbedPane 容器拖到表单中，然后将其他容器拖到其上以创建新选项卡。

如果您正在寻找更高级的行为，例如当用户按下不同的按钮时隐藏/显示不同的容器，您将需要编写一些代码；GUI 构建器没有能力处理这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-20T11:52:43.940

首先，您将其保存为`.java`文件。这是主要的 jframe 类。你先运行它。然后您会看到外部面板由构造函数添加到它。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * MainFrame.java
 *
 * Created on Apr 20, 2010, 5:20:26 PM
 */

package game;

import javax.swing.SwingUtilities;

/**
 *
 * @author S.M. Mahmudul hasan
 */
public class MainFrame extends javax.swing.JFrame {

    /** Creates new form MainFrame */
    public MainFrame() {
        initComponents();
        addPanel();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        firstPanel = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout firstPanelLayout = new javax.swing.GroupLayout(firstPanel);
        firstPanel.setLayout(firstPanelLayout);
        firstPanelLayout.setHorizontalGroup(
            firstPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 457, Short.MAX_VALUE)
        );
        firstPanelLayout.setVerticalGroup(
            firstPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 398, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(firstPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(firstPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new MainFrame().setVisible(true);
            }
        });
    }

    private void addPanel() {
        MainPanel m=new MainPanel();
        this.getContentPane().remove(0);
        firstPanel.removeAll();
        javax.swing.GroupLayout firstPanelLayout = new javax.swing.GroupLayout(firstPanel);
        firstPanel.setLayout(firstPanelLayout);
        firstPanelLayout.setHorizontalGroup(
            firstPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(firstPanelLayout.createSequentialGroup()
                .addGap(78, 78, 78)
                .addComponent(m, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(79, Short.MAX_VALUE))

        );
        firstPanelLayout.setVerticalGroup(
            firstPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(firstPanelLayout.createSequentialGroup()
                .addGap(25, 25, 25)

                .addComponent(m, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(23, 23, 23))
        );
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(firstPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(firstPanel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        SwingUtilities.updateComponentTreeUI(this.getContentPane());
    }

    // Variables declaration - do not modify
    private javax.swing.JPanel firstPanel;
    // End of variables declaration

} 
```

面板类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * MainPanel.java
 *
 * Created on Apr 20, 2010, 5:21:03 PM
 */

package game;

import java.awt.Graphics;

/**
 *
 * @author S.M. Mahmudul hasan
 */
public class MainPanel extends javax.swing.JPanel {

    /** Creates new form MainPanel */
    public MainPanel() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();

        setBorder(javax.swing.BorderFactory.createTitledBorder("paintable area"));

        jLabel1.setText("Paintable area");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(86, 86, 86)
                .addComponent(jLabel1)
                .addContainerGap(128, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(103, 103, 103)
                .addComponent(jLabel1)
                .addContainerGap(119, Short.MAX_VALUE))
        );
    }// </editor-fold>

  @Override public void paintComponent(Graphics g) {
         super.paintComponent(g);    // paints background
         g.drawString("shohan", 50, 100);
    }

    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    // End of variables declaration

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T06:37:40.803

更改 JFrame 中的面板后，执行 frameObj.pack();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-07T23:18:33.483

If you want the menus to react to clicks, you need to add Listeners to the menu items, Which in response will show the correct panel.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-23T10:33:46.357

如果您真的想让您的 GUI 更具吸引力，请使用[JDesktopPane](http://www.tutorialdata.com/example/Swing.html)并查看结果。

# unicode - 小写和大写字母的unicode

> ID：495228
> 
> 赞同：4
> 
> 时间：2009-01-30T11:33:54.877
> 
> 标签：unicode

从a到z的小写和大写字母对应的unicode值是多少

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-30T11:36:01.177

与 ASCII 相同（但带有前导 0 :)

AZ = U+0041 - U+005A = 65-90 十进制

az = U+0061 - U+007A = 97-122 十进制

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-30T11:36:14.607

与 ASCII 相同。所有 ASCII 字符在 Unicode 中具有相同的值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-30T11:37:09.567

[Unicode 代码表](http://unicode.org/charts/PDF/U0000.pdf)可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-01-30T11:41:21.367

答案很大程度上取决于您的语言。这里的答案对英语很好，但有些语言包含额外的字符，有时甚至会根据大小写变为两个字符（或相反的二比一） - 土耳其语浮现在脑海。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T11:39:03.917

这里有十六进制表： [http ://www.tamasoft.co.jp/en/general-info/unicode.html](http://www.tamasoft.co.jp/en/general-info/unicode.html)

但无论如何，它们与 ASCII 相同。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-11-29T00:29:51.290

AZ:65-90(小写字符) az:97-122(大写字符)

# .net - 列出所有可用的 .NET 程序集

> ID：495236
> 
> 赞同：11
> 
> 时间：2009-01-30T11:38:39.877
> 
> 标签：.net, assemblies, legacy

列出所有可用的 .NET 2.0 程序集的最佳方式是什么？

所需列表的一个示例是当您在 .NET 选项卡中执行“添加引用...”时 MS Visual Studio 显示的一个。

我已经阅读了 Visual Studio 使用它自己的目录配置和 GAC 另一个和 .NET 安装另一个。关于如何以计算机可移植方式知道该目录在哪里的任何想法（例如，另一台计算机可能在 D: 驱动器中安装了 Windows）？

从列出的信息来看，它必须可以使用 Assembly.Loadxxxx() 。

注意：它应该以编程方式完成，而不是例如使用 gacutil（除非它提供 C# API）。所有这些的目的是创建一个自定义动态脚本编辑器，以便您了解获取此信息的必要性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-30T19:50:11.787

首先，参考程序集和 GAC 中的程序集之间有一个重要区别。要编译代码，您需要一个参考程序集。要运行代码，您需要与 .exe 位于同一文件夹中的程序集副本或 GAC 中的程序集。

通常，当您安装 .NET 应用程序时，其安装程序将复制它在 GAC 中使用的程序集。这些程序集*不能*用作参考程序集，您无法找到它存储在哪个文件夹中，因此您无法告诉编译器其 /reference 命令行参数的正确值。好吧，你可以找到，但微软试图通过 shell 加载项尽可能地提高它的难度。

当您安装一个允许您在自己的程序中使用其程序集的 .NET 应用程序时，会发生一些不同的事情。就像 .NET 框架一样。它将为每个程序集制作两份副本。一个进入 GAC，另一个进入“知名”位置。对于 .NET 框架，这些众所周知的位置是 c:\windows\microsoft.net\ 和 c:\program files\reference 程序集。.NET 3.0 及更高版本开始使用后一个文件夹。

Visual Studio 的“添加引用”对话框使用列出这些已知位置的注册表项。有一对，但重要的是`HKLM\Software\Microsoft\.NETFramework\AssemblyFolders`。

长话短说：您可以使用该注册表项来生成“添加引用”对话框生成的相同列表。但它不是 100% 可靠的，您可能会错过某些产品在其他地方复制的参考程序集。您必须使用 VS 中的“浏览”选项卡来添加对它们的引用。并搜索整个磁盘以自己找到它们。

# windows - 如何测试 Windows DLL 文件以确定它是 32 位还是 64 位？

> ID：495244
> 
> 赞同：275
> 
> 时间：2009-01-30T11:42:31.553
> 
> 标签：windows, dll, 32bit-64bit

我想编写一个测试脚本或程序，断言给定目录中的所有 DLL 文件都是特定的构建类型。

我会在 SDK 的构建过程结束时使用它作为健全性检查，以确保 64 位版本没有以某种方式在其中包含一些 32 位 DLL 文件，反之亦然。

有没有一种简单的方法可以查看 DLL 文件并确定其类型？

该解决方案应该适用于 xp32 和 xp64。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2009-01-30T12:30:50.097

一种粗略的方法是使用每个 DLL 上的 Visual Studio 工具中的 headers 选项调用 dumpbin 并查找适当的输出：

```
dumpbin /headers my32bit.dll

找到 PE 签名

文件类型：DLL

文件头值
             14C机（x86）
               1 节数
        45499E0A 时间日期戳 Thu Nov 02 03:28:10 2006
               0 指向符号表的文件指针
               0 符号数
              E0 可选标头大小
            2102特点
                   可执行文件
                   32位字机
                   动态链接库

可选标题值
             10B魔术#(PE32)

```

您可以在该输出中看到一些线索，即它是一个 32 位 DLL，包括 Paul 提到的 14C 值。应该很容易在脚本中查找。

* * *

## 回答 #2

> 赞同：128
> 
> 时间：2009-01-30T12:30:01.847

如果您安装了[Cygwin](http://www.cygwin.com)（或 MobaXTerm，或适用于 Windows 的 Git Bash，或 WSL，或...）（出于各种原因，我强烈建议您这样做），您可以使用 DLL 上的“文件”实用程序

```
file <filename> 
```

这将给出这样的输出：

```
icuuc36.dll: MS-DOS executable PE  for MS Windows (DLL) (GUI) Intel 80386 32-bit 
```

* * *

## 回答 #3

> 赞同：113
> 
> 时间：2009-01-30T12:06:36.607

## 血腥细节

DLL 使用 PE 可执行格式，从文件中读取该信息并不难。

有关概述，请参阅[有关 PE 文件格式的 MSDN 文章。](http://reversingproject.info/wp-content/uploads/2009/05/an_in-depth_look_into_the_win32_portable_executable_file_format_part_1.pdf)您需要读取 MS-DOS 标头，然后读取[IMAGE_NT_HEADERS](http://msdn.microsoft.com/en-us/library/ms680336(VS.85).aspx)结构。这包含[IMAGE_FILE_HEADER](http://msdn.microsoft.com/en-us/library/ms680313(VS.85).aspx)结构，其中包含您在 Machine 成员中需要的信息，其中包含以下值之一

*   IMAGE_FILE_MACHINE_I386 (0x014c)
*   IMAGE_FILE_MACHINE_IA64 (0x0200)
*   IMAGE_FILE_MACHINE_AMD64 (0x8664)

此信息应该在文件中的固定偏移量处，但我仍然建议遍历文件并检查 MS-DOS 标头和 IMAGE_NT_HEADERS 的签名，以确保您应对任何未来的变化。

## 使用 ImageHelp 读取标题...

您也可以使用[ImageHelp](http://msdn.microsoft.com/en-us/library/ms680209(VS.85).aspx) [API](http://msdn.microsoft.com/en-us/library/ms680321(VS.85).aspx)来执行此操作 - 使用 LoadImage 加载 DLL，您将获得一个[LOADED_IMAGE](http://msdn.microsoft.com/en-us/library/ms680349(VS.85).aspx)结构，该结构将包含一个指向 IMAGE_NT_HEADERS 结构的指针。使用 ImageUnload 解除分配 LOADED_IMAGE。

## ...或改编这个粗略的 Perl 脚本

这是完成工作的粗略 Perl 脚本。它检查文件是否有 DOS 头，然后将 IMAGE_DOS_HEADER 60 字节的 PE 偏移量读取到文件中。

然后它寻找 PE 部分的开头，读取签名并检查它，然后提取我们感兴趣的值。

```
#!/usr/bin/perl
#
# usage: petype <exefile>
#
$exe = $ARGV[0];

open(EXE, $exe) or die "can't open $exe: $!";
binmode(EXE);
if (read(EXE, $doshdr, 64)) {

   ($magic,$skip,$offset)=unpack('a2a58l', $doshdr);
   die("Not an executable") if ($magic ne 'MZ');

   seek(EXE,$offset,SEEK_SET);
   if (read(EXE, $pehdr, 6)){
       ($sig,$skip,$machine)=unpack('a2a2v', $pehdr);
       die("No a PE Executable") if ($sig ne 'PE');

       if ($machine == 0x014c){
            print "i386\n";
       }
       elsif ($machine == 0x0200){
            print "IA64\n";
       }
       elsif ($machine == 0x8664){
            print "AMD64\n";
       }
       else{
            printf("Unknown machine type 0x%lx\n", $machine);
       }
   }
}

close(EXE); 
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2011-01-27T03:35:13.147

Dependency Walker 告诉了所有（几乎）。 [http://www.dependencywalker.com/](http://www.dependencywalker.com/)

它不会“安装” - 只是获取它，提取它并运行 exec。它适用于任何 x32 或 x64 Windows 模块|应用程序。

我记得很容易看到所有依赖项，即 dll 模块，并且因为 appl. 是一个可以确定它是完整的 x64、x32(x86) 还是每个的位的依赖项的总和。

构建模块的 CPU 类型在“CPU”列中。大多数 64 位应用程序仍然是每个应用程序的一部分，但 32 位应用程序 w/b all x86。

极客/程序员的漂亮程序，它是免费的......

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2012-03-01T23:21:48.623

我已经编写了一个非常简单的工具来完成这个任务——它叫做 PE Deconstructor。

只需启动它并加载您的 DLL 文件：

![在此处输入图像描述](https://i.stack.imgur.com/0idju.png)

在上面的示例中，加载的 DLL 是 32 位的。

你可以在这里下载（我只有64位版本编译的ATM）：
[https ://files.quickmediasolutions.com/exe/pedeconstructor_0.1_amd64.exe](https://files.quickmediasolutions.com/exe/pedeconstructor_0.1_amd64.exe)

此处提供了较旧的 32 位版本：
[https ://dl.dropbox.com/u/31080052/pedeconstructor.zip](https://dl.dropbox.com/u/31080052/pedeconstructor.zip)

# c# - 如何从 App_Code 引用 ASP.net MasterPage

> ID：495245
> 
> 赞同：4
> 
> 时间：2009-01-30T11:42:32.193
> 
> 标签：c#, asp.net, master-pages

我正在开发一个 .net 3.5 网站，标准网站项目。

我在站点 App_Code 文件夹 (MyPage) 中编写了一个自定义页面类。

我还有一个带有属性的母版页。

```
public partial class MyMaster : System.Web.UI.MasterPage
{
...
    private string pageID = "";

    public string PageID
    {
        get { return pageID; }
        set { pageID = value; }
    }
} 
```

我正在尝试从 MyPage 中的属性中引用此属性。

```
public class MyPage : System.Web.UI.Page
{
...
        public string PageID
        {
            set
            {
                ((MyMaster)Master).PageID = value;
            }
            get
            {
                return ((MyMaster)Master).PageID;
            }
        }
} 
```

我最终得到“找不到类型或命名空间名称‘MyMaster’。我已经通过使用 FindControl() 而不是 MyMaster 页面上的属性使其工作，但母版页中的 ID 可能会更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T12:20:25.627

我倾向于对网站项目执行以下操作：

在 App_Code 中创建以下内容：

**BaseMaster.cs**

```
using System.Web.UI;

public class BaseMaster : MasterPage
{
    public string MyString { get; set; }
} 
```

**BasePage.cs：**

```
using System;
using System.Web.UI;

public class BasePage : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (null != Master && Master is BaseMaster)
        {
            ((BaseMaster)Master).MyString = "Some value";
        }
    }
} 
```

然后我的母版页从 BaseMaster 继承：

```
using System;

public partial class Masters_MyMasterPage : BaseMaster
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!string.IsNullOrEmpty(MyString))
        {
            // Do something.
        }
    }
} 
```

我的页面继承自 BasePage：

```
public partial class _Default : BasePage 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T13:01:24.857

我找到了一些背景知识，它的发生是因为事物的构建和引用方式。

App_Code 中的所有内容都编译为程序集。

其余的，aspx 文件、背后的代码、母版页等，编译成另一个引用 App_Code 的程序集。

因此，单向街。

还有为什么 Ben 的解决方案有效。谢谢本。

现在我都清楚了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T01:17:46.043

我意识到已经有公认的解决方案，但我只是偶然发现了这个线程。

最简单的解决方案是 Microsoft 网站 ( [http://msdn.microsoft.com/en-us/library/c8y19k6h.ASPX](http://msdn.microsoft.com/en-us/library/c8y19k6h.ASPX) )中列出的解决方案

基本上它说，如果您在子页面 aspx 中包含一个额外的指令，您的代码将按原样工作：

`<%@ MasterType VirtualPath="~/MyMaster.Master" %>`

然后您可以通过以下方式直接引用基础 MyPage 中的属性：

```
 public string PageID
  {
        set
        {
            Master.PageID = value;
        }
        get
        {
            return Master.PageID;
        }
    } 
```

# asp.net - 如何停止调用 500 错误页面创建的 500 .net 错误

> ID：495246
> 
> 赞同：8
> 
> 时间：2009-01-30T11:42:33.923
> 
> 标签：asp.net, iis

这是一个对你来说很有趣的。

我有我的自定义 500.aspx 设置，当我的应用程序中发生 500 错误时调用它。500.aspx 还会向我发送一封包含错误详细信息的电子邮件。

我注意到一个小问题。

如果您尝试对 500.aspx 本身进行 xss 攻击，则不会调用 500 页面。

这显然是某种逻辑问题。

事实上，微软自己也遇到了同样的问题。

在此处查看实际操作

[http://www.microsoft.com/500.aspx?aspxerrorpath=%3Cscript%3Ealert(%22XSS%22)%3C/script%3E](http://www.microsoft.com/500.aspx?aspxerrorpath=%3Cscript%3Ealert(%22XSS%22)%3C/script%3E)

我怎样才能防止这种情况？

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T14:45:01.480

If you attempt an xss attack **on any page**, the custom error page will not be called (here's [another random page on Microsoft.com](http://www.microsoft.com/windows/windows-7/default.aspx?aspxerrorpath=%3Cscript%3Ealert(%22XSS%22)%3C/script%3E) with xss in the querystring).

The behavior appears to be intentional to stop the attack dead in its tracks. Even the error message indicates this behavior:

> Request Validation has detected a potentially dangerous client input value, **and processing of the request has been aborted**.

The only workaround appears to be to disable validation or to capture and handle the error in your global on Application_Error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T14:30:39.980

看来，一旦您定义了一个页面来处理特定（或非特定？）错误，它就不再可以直接通过其 url 获得，类似于 Web.Config 不能通过浏览器调用。

我会设置一个 500Test.aspx，它会引发一个导致 500 错误的异常（并因此触发 500.aspx）

那可能行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T14:45:14.040

`You` might want to think about handling your errors in the Application_Error event in Global.asax.cs instead of the 500.aspx page. You could put the email code there, then redirect the user to an error page after you've done your error handling (this is how we do it where I work).

# vb.net - 将现有类型转换为匿名类型并添加新属性

> ID：495248
> 
> 赞同：4
> 
> 时间：2009-01-30T11:42:50.303
> 
> 标签：vb.net, clone, anonymous-types

是否可以采用现有类型并从中创建具有附加属性的匿名类型？例如（在 VB 中）

```
Public Class Person
  Public Name As String
  Public Age As Integer
End Class

Dim p As New Person With {.Name = "James", .Age = 100}

Dim n = New With {.ShoeSize = 10} 
```

我想要的是第二个对象（n）来克隆 p 的所有属性，然后添加一个新属性（ShoeSize）。

这可能吗？

非常感谢

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T11:45:16.070

在 C# 中没有语法可以做到这一点。您必须自己构造匿名类型，以及所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T08:34:19.177

如果您需要定期执行此操作，则对[此处](https://stackoverflow.com/a/28937187/256431)列出的我的扩展进行修改可以节省一些输入。

也就是说，如果他们返回`string.Join(", " , from p in ps select "." + p.Name + " = " + VarName + "." + p.Name)`，您至少可以节省一些打字。

OP 中的变量示例：`p.AllFieldsVb("p")`返回`".Name = p.Name, .Age = p.Age"`.

# wpf - WPF 图层控制

> ID：495249
> 
> 赞同：3
> 
> 时间：2009-01-30T11:43:16.810
> 
> 标签：wpf, controls, layer, codeplex

我需要执行以下操作的 WPF 层控件

1) 有多层内容相互叠加。

2）能够在设计和运行时打开/关闭图层，即我们需要一个 UI 可能类似于选项卡式控件

3) 将图层向上/向下移动堆栈

4) 改变图层的不透明度

现在我知道在 Xaml/WPF 中所有这些都是可能的。我使用网格编写了一个简单的版本，在设计时有多个单元格，1 个单元格 = 1 层，在运行时只有一个单元格，所有单元格都合并为一个。事情是一个杂物，没有给我我需要的设计时控制，所有的控制最终都有一个单亲，丑陋。任何人都有现成的或部分工作的例子——如果没有，我会编写一个合适的代码并在 CodePlex 上分享。

我确定我不是唯一需要此功能的人，是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-30T15:38:07.537

对于我以前的客户，我们使用 Canvases 完成了这项工作。该应用程序本质上是一个“CAD”，因此我们的层负责域的图形表示。

我目前不知道有任何 3rd 方工具可以做到这一点。

我认为这样做的原因是，当您正在寻找此功能时，它非常特定于域和应用程序。

如果您要构建自己的控件，我会鼓励构建用于管理逻辑的自定义控件，然后允许其他人设置外观样式。这将是解决问题的更多 Wpf 方式。

这样，如果一位消费者想要使用画布，他们可以。如果你想使用网格，那么你也可以。

如果您有任何您想做的伪代码，我可以查看是否可以修改我的任何旧 POC 以满足您的需求。或者，如果您想启动 CodePlex 项目，我不介意贡献。

那只是我的2美分。

# javascript - 在 Javascript 中的包含输入类的表中添加一行

> ID：495256
> 
> 赞同：2
> 
> 时间：2009-01-30T11:44:59.240
> 
> 标签：javascript

我基本上尝试这样做：

```
 var tr = document.createElement("tr");
    var td = document.createElement("td");
    td.appendChild(document.createTextNode('<input class="param" type="text" name="dummy" value="fred"/>'));
    tr.appendChild(td); 
```

但它只是显示输入......作为普通文本，我如何插入它以便它按我的需要工作......？

我猜它的 createTextNode 需要更改？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T11:48:11.993

你也可以

```
td.innerHTML = '<input class="param" type="text" name="dummy" value="fred"/>'; 
```

或者

```
var ip = document.createElement( 'input' );
ip.className = 'param';
ip.type = 'text';
ip.name = 'dummy';
ip.value = 'fred';

td.appendChild( ip ); 
```

编辑

即不允许动态更改表单元素的类型。我很确定这仅适用于元素已经具有类型并且已经插入到 DOM 中的情况。不过最好检查一下。如果它不起作用，请使用方法 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T11:47:01.887

尝试使用元素的 innerHtml 属性。

那就是尝试使用`td.innerHtml = "<input ...../>"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T12:08:46.930

Meouw 的想法是正确的。您在示例中创建了一个文本节点，需要做的是创建一个 dom 元素。

这也是 jQuery 可以简化代码的另一种情况。您尝试通过将元素添加为 html 字符串来执行的操作可以使用 jQuery html( val ) 函数来完成：

[http://docs.jquery.com/Attributes/html#val](http://docs.jquery.com/Attributes/html#val)

基本上，要将这种技术应用到您给定的示例中，您需要在页面中包含 jQuery 库并编写以下行：

```
$("#someTable").html('<tr><td><input class="param" type="text" name="dummy" value="fred"/></td></tr>'); 
```

您还可以动态创建任何 html 元素，并将属性和事件处理程序串在一行中，如下例所示：

[http://www.peterbe.com/plog/creating-dom-element-with-jquery](http://www.peterbe.com/plog/creating-dom-element-with-jquery)

```
var textbox = $("<input type='text'></input>").attr('name','dummy').addClass('param').val('fred');
$("#someTableCell").append(textbox); 
```

# linux - 在 Linux 上将符号链接到固定地址

> ID：495262
> 
> 赞同：10
> 
> 时间：2009-01-30T11:47:58.157
> 
> 标签：linux, gcc, linker, gnu, ld

如何使用 GNU ld 将（某些）符号链接到特定的固定地址，以便二进制文件仍然可以在 Linux（x86）中正常执行？不会对这些符号进行任何访问，但它们的地址很重要。

例如，我将具有以下结构：

```
struct FooBar {
    Register32 field_1;
    Register32 field_2;
    //...
};

struct FooBar foobar; 
```

我想链接`foobar`到地址 0x76543210，但要正常链接标准库和应用程序的其余部分。然后应用程序将使用 foobar 的地址，但不会引用它后面的（可能不存在的）内存。

这个请求的基本原理是这个相同的源可以在两个平台上使用：在本机平台上，`Register32`可以简单地是 a `volatile uint32_t`，但在 Linux 上是一个与定义 eg`Register32`的 a 大小相同的 C++ 对象，然后它将使用地址对象并使用该地址（和数据）向通信框架发送请求，以执行对远程硬件的实际访问。因此，链接器将确保结构的字段引用正确的“地址”。`uint32_t``operator=``Register32`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-30T14:19:08.257

litb 的使用建议`--defsym symbol=address`确实有效，但是当您要映射几十个这样的实例时会有点麻烦。然而，`--just-symbols=symbolfile`这只是把戏。我花了一段时间才找出 的语法`symbolfile`，即

```
symbolname1 = address;
symbolname2 = address;
... 
```

空间似乎是必需的，否则`ld`报告`file format not recognized; treating as linker script`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-30T12:10:39.950

试试看

```
--defsym symbol=expression 
```

与此一样：

```
gcc -Wl,--defsym,foobar=0x76543210 file.c 
```

并在您的代码中使 foobar 成为外部声明：

```
extern struct FooBar foobar; 
```

这看起来很有希望。然而，做这样的事情是个坏主意（除非你*真的*知道你在做什么）。你为什么需要它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T12:07:19.287

我会给你一个热点提示...... GNU LD 可以做到这一点（假设系统库不需要你想要的地址）。您只需要构建自己的链接器脚本，而不是使用编译器自动生成的。阅读 ld 的手册页。此外，当您也涉及 GLIBC 时，为复杂的软件构建链接器脚本并非易事。

# java - 如何为特定的 O/S 平台指定 Eclipse .classpath 条目？

> ID：495264
> 
> 赞同：8
> 
> 时间：2009-01-30T11:48:21.260
> 
> 标签：java, eclipse, swt, classpath

作为团队的一员，我正在从事一个 SWT 项目。我们不断地破坏彼此的构建环境，因为 Eclipse 的 .classpath 文件被检入到版本控制中，并且我们为我们的机器包含了不同的 SWT 库。

根据最后提交的人，.classpath 条目可以是：

```
<classpathentry kind="lib" path="lib/swt/swt-win32.jar"/> 
```

或者

```
<classpathentry kind="lib" path="lib/swt/swt-carbon.jar"/> 
```

或者

```
<classpathentry kind="lib" path="lib/swt/swt-gtk.jar"/> 
```

看起来这些库是相互排斥的，即您不能一次将它们全部包含在内并让 SWT 解决。所以我们需要以某种方式为每个平台过滤它们......

有人对如何做到这一点有任何想法吗？我最初的想法是将其拆分为自己的“.classpath-swt”文件（被 VCS 忽略），使用 Ant 自动生成它并将其包含在主 .classpath 中，但似乎 Eclipse 不支持拆分.classpath 文件。

我们目前的解决方法是避免提交 .classpath ，除非我们确实更改了依赖项，但这仍然意味着每次更改 .classpath 时，许多人都必须修复他们的开发环境。

任何建议都将不胜感激，只要它不是“不要使用 Eclipse”，因为这不是该项目的选项:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-30T12:05:46.420

Eclipse 将允许您定义类路径变量，因此您可以保持 .classpath 相同，但每个开发人员都会根据平台配置她的 Eclipse。您至少可以对 .classpath 文件进行版本控制。您将不得不将存储 SWT jar 的目录结构更改为每个平台的 jar 名称不会更改的目录结构。该菜单位于：“ **Window->Preferences->Java->Build Path** ”

```
SWTJARDIRECTORY/
    WIN32/
        SWT.JAR
    CARBON/
        SWT.JAR
    GTK/
        SWT.JAR 
```

前任。

```
 SWT_PLATFORM="SWTJARDIRECTORY/GTK", set by developer in Eclipse 
```

.classpath

```
 SWT_PLATFORM/SWT.JAR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T12:56:52.697

您应该将这些库放在一个单独的、易于识别的项目中，而不是放在每个项目中。

例如，创建一个名为“00-swt-provider”的项目（因此它位于顶部）并让它引用“00-swt-provider-carbon”、“00-swt-provider-win32”或“00-swt-”之一提供者-gtk”。

其中任何一个都为给定平台导出适当的本机库，并且唯一的链接在 00-swt-provider 中。实际项目仅引用此元项目。

我们在内部使用它的一个变体——它对我们很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T12:17:20.407

简单地配置您自己的实例，并且对于您环境的这一组件，您不将其保存在源代码管理中怎么样？

或者，您可以为每个环境存储一个类路径文件，也许在另一个目录和一个 ant 文件（即 build-setup-env.xml 文件）中，您可以简单地为每个环境复制一个正确的目标。至于在源代码管理中保留一份副本，您必须确保在更新时将其复制回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-10T20:56:31.633

SWT 通过*不对*.classpath 文件进行版本控制，而是通过附加操作系统和窗口系统的多个单独的 .classpath_* 文件来实现这一点，例如 .classpath_win32_win32。因此，当您从存储库中签出源代码时，您应该将适当的类路径文件复制到 .classpath 并重新编译您的项目。

# java - 从 eclipse 迁移到 vim 有什么好的教程吗？

> ID：495268
> 
> 赞同：20
> 
> 时间：2009-01-30T11:50:39.273
> 
> 标签：java, eclipse, vim, editor

目前我正在使用 Eclipse 进行 JAVA 项目。我一直想在我的项目中使用 VIM。有什么好的资源或教程可以帮助我吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-01-30T12:30:14.840

多年来，我一直是 vim 的顽固分子（现在仍然如此）。然而，我最终屈服于 Eclipse 的诱惑，我不会回头（我不得不向 Intellij 转移，但那是另一回事了）。

[话虽如此，我用这个Vim 插件](http://www.satokar.com/viplugin/)运行 Eclipse （注意：其他可用），效果很好。我保留了 Vi/Vim 的基于键盘的强大功能，并获得了 Eclipse 的 Java 感知功能。我强烈推荐这种方法。尽管 Vim 的插件众多，但没有什么能比得上现代 IDE 的语言感知重构和编码功能。

更新：20/01/2015。该插件已移至[http://www.viplugin.com](http://www.viplugin.com)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-30T12:02:08.300

恕我直言，vim 的内置教程是一个很好的开始。我从那里开始并在几个小时内习惯了基本的键绑定。在那之后，这是一个经验和不断学习的问题，从在线文章、博客、监视等，最终内置 :help 命令。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-30T12:08:09.113

我的书签中有一些：

*   [http://www.viemu.com/a-why-vi-vim.html](http://www.viemu.com/a-why-vi-vim.html)（在这里学到了一些我不知道的东西，非常好）
*   [http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)
*   [http://www.tuxfiles.org/linuxhelp/vimcheat.html](http://www.tuxfiles.org/linuxhelp/vimcheat.html)
*   [http://www.linux.com/articles/55316](http://www.linux.com/articles/55316)

C”，）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-30T13:16:12.690

作为一个使用 vi/vim 已经有 20 年的大部分时间，并且仍然在做很多事情的人，我可以告诉你，一旦我“得到”了 Eclipse，我就再也没有回到过使用 vi/vim 来做重要的事情了爪哇工作。虽然 vi/vim 仍然有一些我觉得更自然、更高效的方式（可能是由于多年的使用在我的脑海中留下的凹槽），但当代 IDE 的重构和单元测试能力（包括 Eclipse、IntelliJ 和 NetBeans）足以弥补 ' `/`'、' `n`'、' `N`'、' `.`'、' `s///`' 和它们的表亲的损失。（是的，在激烈的跨平台/跨语言会话之后，我偶尔会发现我的手指指向“ `j`”而不是向下箭头。;-)

我仍然相信命令行和 shell 脚本对于某些任务来说是极好的工具（就像我相信*真正的*书在页面上有文字，而不是 Dick、Jane 和 Spot 的图片 ;-)，我也相信每个*真正的*程序员应该精通 vi 或 emacs（或[TECO](http://catb.org/jargon/html/T/TECO.html)，才能[***真正***](http://c2.com/cgi/wiki?TecoEditor)成为[真正的程序员](http://catb.org/jargon/html/R/Real-Programmer.html);-)。

您的问题意味着您还不太了解 vi/vim，我鼓励您追求自己的兴趣。两个很好的资源是[*Learning the vi and Vim Editors*](https://rads.stackoverflow.com/amzn/click/com/059652983X)和[*VI Editor Pocket Reference*](https://rads.stackoverflow.com/amzn/click/com/1565924975)。无论如何，学习 vi/vim 并从中获得乐趣，但我恭敬地建议它们可能不会取代一个好的 IDE 作为您的主要 Java 编程环境。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-30T11:58:04.080

除了对尝试 vim 的强烈渴望之外，还有什么特别的原因吗？我不是要阻止你，只是好奇。

通过这个（或类似的）[Eclipse 插件](http://vimplugin.org/)进行转换可能更容易。这样，您将在启动真正的 VIM 之前学习许多键绑定，甚至不知道如何编辑或删除文本。

我不是 vim 专家，因为我只用它来编辑老化的 linux/solaris 服务器上的系统配置，但你真的确定要这样做吗？Eclipse 提供了许多非常有用的工具，这些工具要么不存在，要么需要 vim 的脚本/配置。Eclipse 有一些非常好的重构支持、基于语法的搜索和集成的 Ant 支持（仅举几例）。

vim 专家：vim 可以重构 Java 代码吗？vim shell/run 可以吗？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-30T12:02:54.833

[Vincent Liu 的博客](http://blog.vinceliu.com/2007/08/vim-tips-for-java-1-build-java-files.html)中有很多不错的文章。

您也可以尝试[Eclim](http://eclim.sourceforge.net/)，它将把 Eclipse 的一些更高级的特性引入 Vim。

如果您还没有完成，您应该先阅读 Vim 的在线教程。它通常作为一个名为“vimtutor”的程序与 Vim 捆绑在一起。这将帮助您在开始开发之前掌握 Vim 的基础知识。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-30T14:02:21.927

[学习vi编辑器](https://rads.stackoverflow.com/amzn/click/com/1565924266)是一本好书。

我从那本书中学到了大部分的 vi 编辑技巧，强烈推荐。它没有向您展示从 Eclipse 到 VIM 的路径，但它是一本非常好的入门书籍。它有很好的章节帮助你从基本的 vi 编辑器开始，最后它有 1 章专门用于 VIM。

如果您想将它用于您的 Java 项目，您应该[使用 VIM for Java 在 cscope 上](http://www.google.com/search?hl=en&fkt=621&fsdt=6271&q=cscope+java+vim&btnG=Google+Search&aq=f&oq=)搜索更多内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-30T14:53:42.790

正如其他人所说，我建议您通过遵循基本教程开始熟悉 Vim（**vimtutor**是让我首先进入 Vim 世界的原因）。

我个人使用 Eclipse 而不是 Vim 进行 Java 开发，但我仍然有很多方法可以增强我的 Vim 设置以进行快速 Java 编辑：

*   Vim有大量可用于 Java 开发[的插件。](http://www.vim.org/scripts/)其中之一是[Vim JDE](http://www.vim.org/scripts/script.php?script_id=1213) ，它为 Vim带来了类似 IDE 的功能。
*   一定要看看[这篇](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-5054618.html)关于**为 Java 开发配置 vi 的**文章。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-05-31T04:44:11.767

viemu 对您在 vim 中使用 eclipse 的功能有好处 但我想推荐[vrapper](http://vrapper.sourceforge.net/home/)对于非 vim 重度用户，它在 eclipse 中轻量级地提供了类似 Vim 的输入方案。如果你尝试 intellij idea，我推荐ideavim。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-30T13:46:40.850

不要过度学习 Vim；尝试一个简单的介绍教程，看看你是如何进行的（这是我使用的一个不错的教程：[http](http://www-acs.ucsd.edu/info/vi_tutorial.shtml) ://www-acs.ucsd.edu/info/vi_tutorial.shtml ）。

大多数 Vim 用户不会涉足复杂的东西——你只需要保持简单......

# session - 如何从会话变量中获取内容？

> ID：495269
> 
> 赞同：0
> 
> 时间：2009-01-30T11:51:18.633
> 
> 标签：session, javabeans

我的情况：

在我的 jsp 网站上，我展示了一张表格。例如，当有人单击一行时，该行必须用其他背景颜色标记。也可以标记多于一行。有两件事很重要。首先：我记住标记了哪些行。第二：按什么顺序。

我的想法是：

我有一个 ArrayList 并将所有行 ID 放入其中。所以我解决了这两个问题。现在，我将此 ArrayList 放入会话中以供下次单击和 jsp 文件的行 ID（ req.getSession().setAttribute(req.getParameter("rowID") , ""+arrayList.size()); ）。

我在jsp文件中的问题：

我现在不知道所谓的会话变量名。

如果这个 rowId 已经点击了？..

我只有 bean 名称。如果必须准确地标记此行，我如何从会话中获取内容？

通常我设置一个会话变量： req.getSession.setAttribut("printView", Boolean.TRUE) 并获得一个会话变量：

我使用 struts、formbeans 和 jsp。

对不起，我的英语不好，这个问题对我来说太难了。所以我现在不能更好地宣布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T13:12:00.110

存储在 JavaScript 地图上单击的行的 ID 怎么样，您可以在那里更改其背景颜色。然后，要将这些数据提交给动作，只需使用 struts + ajax（参见 Struts2InAction 书籍第 8 章）。

此外，如果您已经在会话上下文中上传数据，请在您的操作中实施 SessionAware 以便能够访问会话值。

希望这有帮助。

# c# - 打开不属于项目的 cs 文件时，有什么方法可以使 Intellisense 工作？

> ID：495270
> 
> 赞同：5
> 
> 时间：2009-01-30T11:52:23.157
> 
> 标签：c#, visual-studio, visual-studio-2008, xaml, vsx

理想情况下，我们需要了解 Microsoft 如何处理 XAML 生成的代码（那些 *.g.cs 文件）。如果您使用 XAML 代码，即使 *.g.cs 文件不是项目的一部分，intellisense 也可以工作！！

* * *

**语境：**

在自定义 VS 包中，我们需要有一些逻辑来在 VS IDE 中打开一个 CS 文件（不使其成为项目的一部分），以允许用户对其进行编辑。

我们正在使用 IVSRunningDocumentTable 将文档连接到 Running 文档表并接收保存、关闭等事件。效果很好。

现在的问题是，当打开文档时，Intellisense 无法工作，原因很简单，打开的文档不是项目的一部分（遗憾的是，我们不能这样做，我们不能让它后面的代码） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T13:50:58.063

Intellisense 由标识符和类型的内存缓存驱动。这些类型根据您所在的项目和该项目具有的引用进行缓存。如果您正在编辑的代码文件不是项目的一部分，Visual Studio 将不得不加载所有可能的程序集并为整个 .NET 框架中的每种类型创建智能感知数据，因为它无法知道您的代码文件是否需要它。

我猜 Visual Studio*可以*根据文件的内容加载智能感知，但这不是它目前的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T18:58:49.767

Whole Tomato 的 Visual Assist X 是我多年来一直使用的 VS 的插件。当你打开它时，它会给你智能感知等等。

# installation - 使用 Asterisk 设置 IVR

> ID：495271
> 
> 赞同：11
> 
> 时间：2009-01-30T11:52:43.637
> 
> 标签：installation, voip, asterisk, ivr

我需要为朋友的公司设置一个简单的 IVR 系统，让呼叫者通过按电话键浏览菜单。它有点像公共汽车时刻表。

> 今天的日程按“1”，明天的日程按“2”，以此类推。

它只是一个信息系统，即没有导航路线以真人结束，而只会播放音频消息。

现在，我以前从未设置过这样的东西，并在 Google 上做了一些挖掘。似乎我可以使用 Asterisk 来实现这一点。

*   在硬件方面我还需要什么？
*   一个简单的 Linux 服务器和一个德国供应商的 VOIP 帐户就足够了吗？
*   VPS 会处理这个任务吗？
*   多个并发来电怎么样？
*   那些是由 Asterisk 处理的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-30T12:16:04.480

这是完全可能的。

你需要知道的：

1.  Asterisk 有一些问题`H323`。如果您的供应商提供`SIP`，请向他们索取`SIP`。

2.  `IVR`您可以在您的拨号计划上构建一个整体`extensions.conf`，但对于复杂的任务，最好使用`AGI`. 这些是`Perl`或`Python`实现您的`IVR`逻辑的任何语言脚本。如果您期望频繁连接，则每个`AGI`会话都跨越一个子进程、使用`FastAGI`和网络守护进程。

3.  多个并发呼叫不是问题，我在一台简单的 PC 上安装的 Asterisk 可以处理*数百个*并发呼叫。

4.  唯一可能**真正**影响性能的是**声音转换**和**音调检测**。

    为了提高性能，您应该：

    1.  坚持使用一个编解码器（`µLaw`是我使用的），强制所有`SIP`连接使用该编解码器，并使用`sox -t ul`. 完成后，所有 Asterisk 操作都相当于从磁盘读取文件字节并通过网络发送它们，只需基本包装即可。没有数学，除了简单的读取-包装-发送操作。

    2.  **请您的提供商检测他身边的**音调，并使用`RFC 2833`. 音调检测是一个相当消耗 CPU 的操作，让他们自己做吧。

    `2,66 MHz Celeron IV`我个人在with `2048 MB RAM`, under上运行 Asterisk `Fedora 10 X86_64`。一次 150 个连接可以正常工作，没有延迟。

    总流量约为`9.6 KByte/sec`每个连接。对于现代 VPS 来说应该完全没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T12:01:47.037

星号岩石。对于几行简单的 P3 或更好的就可以了。不要虚拟化 PBX；Asterisk 依赖于非常准确的时间。

[FreePBX](http://www.freepbx.org)使设置 IVR 变得非常容易 - 拥有一个不错的基于 Web 的前端，并支持一些很酷的 Asterisk 工具。

编辑：FreePBX 不是 Asterisk - 它是一个漂亮的界面，可以为您生成配置。如果您想要一个简单的傻瓜相机解决方案，Trixbox 默认包含它。

如果您的 VoIP 帐户支持多条输入线路，那么 Asterisk 会很好地使用它们。您还需要足够的 Internet 带宽和良好的 QoS。对于业务系统上的多条线路，我会坚持使用专用连接，这样您就不会在用户访问网络时遇到掉线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-12T19:25:53.100

构建 IVR 应用程序的最佳方式是使用 W3C.org (http://www.w3.org/TR/voicexml21/) 设计的 VoiceXML。Asterisk 不附带 VoiceXML 浏览器，但有一些公司为 Asterisk 提供该浏览器，例如 SoftSyl Technologies (http://www.softsyl.com)。

Cisco 和 Avaya 等公司也提供 VoiceXML 浏览器，但它们不适用于 Asterisk。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T14:46:37.887

如果您是新手，我建议您学习 FreeSWITCH 而不是 Asterisk。它的结构更好，还附带了一些预构建的示例，包括 IVR 菜单，而且 IVR 语法非常简单： [http ://wiki.freeswitch.org/wiki/IVR_Menu](http://wiki.freeswitch.org/wiki/IVR_Menu)

我在 Xen 虚拟服务器上运行一个 FreeSWITCH 实例，它可以完美地运行多个同时调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T22:13:33.580

对于更复杂的 IVR，您可以尝试[Astive Toolkit](http://astivetoolkit.org)，尤其是在您需要数据库或 Web 服务迭代时。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T15:46:22.773

在 Asterisk 中进行 IVR 设计并不难，但是在启动和运行您的第一台 Asterisk 服务器时存在一些“学习悬崖”。

正如其他人所说，通话质量就是一切。付费为您的 IVR 提示和公告完成专业级录音。确保您使用的是 64k 代码，例如 uLaw 和 aLaw；GSM（手机）的带宽可能很便宜，但它打破了客户对质量的期望。

我强烈建议您将 IVR 放入它自己的拨号计划上下文中，然后直接调用它。这使得管理菜单选择等事情变得更加容易。对于每个选项子集，使用不同的拨号计划上下文。

尽量保持你的菜单“浅”。如果需要三个以上的菜单选项来获取您的客户正在寻找的信息，他们很可能会挂断电话，或者只需按“0”与人交谈。这违背了您的 IVR 的意义。

如果您打算通过数据库查找或帐户身份验证等做一些相当酷的事情，我建议您使用“AGI” - Asterisk Gateway Interface - 应用程序。我个人最喜欢的是“ [Adhearsion](http://adhearsion.com/) ”，它在 DB/Web 端与 Ruby/Rails 很好地融合在一起。

如果您需要帮助或更多信息，请告诉我。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T11:59:46.930

我过去使用过 IVR，但主要使用大型系统，从未使用过 Asterisk。不过，我快速浏览了他们的网站（[http://www.asterisk.org/](http://www.asterisk.org/)），看起来信息量很大，你在那里检查过吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T12:05:10.197

它与编程无关，但...

看看[trixbox.org](http://trixbox.org/)，它支持从 cisco 到...的配置...

我在澳大利亚有一家供应商将它们添加为 gsm 中继，花了 3 小时来设置 4 部电话。支持 IVR

唯一的问题可能是......录音的语音质量

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-30T13:47:00.693

它很简单。我使用 sipgate.de 作为星号的提供者。你需要设置一个拨号方案。

这也很简单。看看[这里](http://www.voip-info.org/tiki-index.php?page=Asterisk%20config%20extensions.conf)。你也应该看看 extensions.conf。里面有一些样品。这也是适合您问题的示例。要连接到 sipgate，请查看他们的知识库。有一些用于星号配置的示例。

sipgate 是免费的，除非您正在拨打电话。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-03-26T02:17:43.493

您可以在拨号计划中执行此操作...

```
[menu-main]
exten => s,1,Noop()
exten => s,n(msg),Background(ForTodayPress1TomorrPress2)
exten => s,1,Goto(menu-today)
exten => s,2,Goto(menu-tomorrow)
exten => i,1,Playback(invalid)
exten => i,n,Goto(msg)
exten => t,1,Goto(msg)

[menu-today]
etc...

[menu-tomorrow]
etc... 
```

或者正如其他人建议的那样，您可以使用任何可以写入标准输入并从标准输出读取的语言来执行此操作。phpagi 实现是我特别喜欢的风格。它可能适合此示例，例如 PHP 在单独的盒子上运行，因此它不会在任何类型的负载下影响 PBX。

```
[menu-main]
exten => s,1,Noop()
exten => s,n(msg),Background(ForTodayPress1TomorrPress2)
exten => s,1,Goto(menu-today,s,1)
exten => s,2,Goto(menu-tomorrow,s,1)
exten => i,1,Playback(invalid)
exten => i,n,Goto(msg)
exten => t,1,Goto(msg)

[menu-today]
exten => s,1,Noop()
exten => s,n,agi(http://myapache/agi/readschedule.php)
exten => s,n,Hangup() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-02T17:52:11.960

如果您想设置 Asterisk IVR，您还可以使用一些基于 Web 的拖放工具来制作简单的自动助理（如您的示例中）或复杂的 IVR（管理脚本或数据库驱动的 IVR）。一种选择是**Cally Square**。看看这里： http: [//www.callysquare.com/](http://www.callysquare.com/)

# c# - C# 和 Java 应该合并彼此的语法吗？

> ID：495273
> 
> 赞同：1
> 
> 时间：2009-01-30T11:54:30.250
> 
> 标签：c#, java, .net, language-agnostic

我已经从 C# 跳到 Java 了很多次，两者之间的“差异”有点令人烦恼。

是否有可能编写一组扩展/插件来合并两种语言的语法。

我说的是添加 IDE 支持或使用语言结构，例如：

1.  同等对待这两行：

    `System.out.println("Blah");`

    `Console.out.writeline("Blah");`

2.  自动注意到当你输入**s**字符串时，你的意思是**S**字符串

3.  识别常见的 API 调用并在后台进行翻译。

最终目标是能够编写一个 java/C# 程序并在编译时选择您所针对的 VM/运行时。

如果你能做到这一点，这会是一个好主意吗？

如果不是为什么不呢？

这两种语言非常相似，在某些方面令人痛苦，但在其他方面却截然不同。

我已经看到将 C# 项目转换为 Java 的代码，我假设可能是相反的，我提出的是中间立场，所以我们都可以“相处”。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-30T11:57:59.477

不，绝对不是。当然不是语言本身（如标题所暗示的那样），最好是（IMO）不在IDE中（如正文中所要求的那样）。

它们是不同的语言。习语和惯例略有不同。当我编写 C# 时，我不想在*Java*中思考，反之亦然。我认为应该积极鼓励开发人员分开他们的想法。在两者之间切换并不难，但应该存在这种切换，IMO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T12:03:56.097

虽然我完全同意 Jon Skeet 的观点，但如果你必须拥有这个，为什么不创建你自己的 Java API 库，这样你就可以创建 System.out 命名空间，它有一个调用方法调用 printLn，它调用 Console.Writeline()？

这让你接近你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T12:06:42.703

仅仅因为 Java 和 C# 共享一些相似的语法，您需要超越这一点并从 Java 平台和 .NET 平台的角度进行思考。两者明显不同，所以我的答案肯定不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T12:17:50.670

实际上已经有一种用于 .NET 框架的 Java 语言，由微软开发：**J#**

通过这种方式，您可以获得 java 语法，但您仍在使用 .NET 框架进行开发。

但我不建议任何人使用它。我在了解 C# 之前就了解 Java，所以我尝试了 J#，因为我认为它会更容易过渡。起初我喜欢它，但在我尝试了 C# 之后，我再也不会回去了。首先，没有人使用 J#，所以很难找到示例和教程。其次，C# 有（IMO）更方便的语法，特别是对于事件、属性、lambda、匿名方法和许多其他的东西，它也时不时地更新，甚至更多的语法糖，我不认为 J# 是。

也许如果您经常编写 Java 并且有时必须编写一个 .net 应用程序，这可能是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T12:19:08.997

我想不是。我也从java切换到c#。但是，如果语法相同，就是阻止某人尝试在 Java 编译器中编译 c#，反之亦然。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T12:30:03.563

Visual Studio 实际上附带了一个 Java 到 C# 转换器，它试图做你提到的一些事情。不幸的是，对于简单的 hello world 应用程序之外的任何东西，它都失败了（1）。

尽管表面上非常相似，但 Java 和 C# 之间存在许多显着差异，因此按照 imo 的建议执行操作将收效甚微。

(1) 公平地说，如果考虑到为此类任务提供的限制，它实际上做得相当好，但实际上生成的代码用途有限，转换后必须进行大量清理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T12:38:41.690

首先，您所描述的不是语言语法的差异，而是类库的差异。两种语言在关键字和功能方面都相对简单，但理解或了解库以及它们的操作方式需要大量学习。

您所描述的错误是开发人员不应该从一开始就犯的错误 - IDE 不应该猜测。在很多情况下，您无法轻松/琐碎地在 java 或 dotnet 之间进行转换。最后，熟练的开发人员会学习并知道何时以及使用哪些类库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T12:54:09.427

实际上一开始没有 dotnet - 微软落后于 java。然而，他们继续以与 java plstform 标准不兼容的方式更改 java。套用孙起诉微软并赢得了我的法庭。之后，ms 开始创建 dotnet，尤其是 c#，它成为了微软的 VM 平台。当然，一路上一大堆事情都发生了变化。微软引入了许多破坏 Java 在任何地方运行的东西等。他们对 dotnet 做了同样的事情，这给单声道团队带来了问题，无法忠实地为其他非 Windows 平台重新实现一切。

• 字符串与字符串。• 小写方法名(java) v 大写方法名(dotnet)。• 为java 关键字赋予新名称-“包”。

最后 dotnet 是微软的回应，因此他们可以控制平台并做自己的事情，而不是遵循标准

# workflow-foundation - 多次执行 WorkflowInstance

> ID：495275
> 
> 赞同：0
> 
> 时间：2009-01-30T11:54:42.993
> 
> 标签：workflow-foundation

如果我有，`WorkflowInstance`我可以连续执行两次吗？

```
WorkflowInstance instance = workflowRuntime.CreateWorkflow(typeof(...));
instance.start();
instance.start(); 
```

当我这样做时，我得到一个异常告诉我我没有配置持久性服务。但是我的问题是：在我执行`WorkflowInstance`一次之后，可以再次运行一个实例，还是它变得不可用？每次我想执行时都必须创建另一个实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T12:05:54.283

根据 WorkflowInstance 的规范，您只能启动一次实例

看看[http://msdn.microsoft.com/en-us/library/system.workflow.runtime.workflowinstance.start.aspx](http://msdn.microsoft.com/en-us/library/system.workflow.runtime.workflowinstance.start.aspx)

如果实例已在运行，则会引发 InvalidOperationException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T12:53:57.260

是的，我看到我无法启动实例两次。但是，我想要的是创建一次实例并能够多次运行工作流。

我的问题是 WorkflowInstance 创建有点重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T15:31:50.467

工作流实例一旦启动，就会在工作流定义中向前移动，然后终止。不能像缓存和重用对象那样“重用”执行另一个工作流。

根据工作流程的构建方式，您可以采取多种措施来提高工作流程的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T16:59:31.803

根据 Rutesh 的回答，您不能两次启动同一个实例。如果工作流已被卸载（即持久化），您可以使用 WorkflowInstance.Load() 再次加载工作流。

# python - 重构此 Python 代码以迭代容器

> ID：495294
> 
> 赞同：3
> 
> 时间：2009-01-30T12:02:34.087
> 
> 标签：python, django, refactoring, iterator

当然有更好的方法来做到这一点？

```
results = []
if not queryset is None:
    for obj in queryset:
        results.append((getattr(obj,field.attname),obj.pk)) 
```

问题是有时查询集是 None ，当我尝试迭代它时会导致异常。在这种情况下，我只想将结果设置为一个空列表。这段代码来自 Django 视图，但我认为这并不重要——这似乎是一个更普遍的 Python 问题。

**编辑：**我发现是我的代码将一个空的查询集变成了一个“无”而不是返回一个空列表。能够假设查询集始终是可迭代的，通过允许删除“if”语句来简化代码。下面的答案可能对遇到相同问题但无法修改其代码以保证查询集不是“无”的其他人有用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-30T12:22:05.390

```
results = [(getattr(obj, field.attname), obj.pk) for obj in queryset or []] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-30T12:44:35.670

怎么样

```
for obj in (queryset or []):
    # Do your stuff 
```

它与 JF Sebastians 的建议相同，只是没有作为列表理解实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-06T23:23:36.170

对于它的价值，Django 管理器有一个“无”查询集，您可以使用它来避免无缘无故的无检查。使用它来确保您没有空查询集可以简化您的代码。

```
if queryset is None:
    queryset = MyModel.objects.none() 
```

参考：

*   [关于 none() 的 Django 文档](http://docs.djangoproject.com/en/dev/ref/models/querysets/#none)
*   [空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T12:16:41.873

你可以使用列表推导，但除此之外我看不出你可以改进什么

```
result = []
 if queryset:
     result = [(getattr(obj, field.attname), obj.pk) for obj in queryset] 
```

# persistence - C# ASMX webservice 半永久存储需求

> ID：495310
> 
> 赞同：0
> 
> 时间：2009-01-30T12:08:10.550
> 
> 标签：persistence, asmx, isolatedstorage

我正在编写一个第三方 Web 服务的模拟，以允许我们开发和测试我们的应用程序。

我需要模拟允许用户提交数据的功能，然后在将来的某个时候检索服务上的处理结果。我需要做的是将提交的数据保存在某处，稍后再检索（不在同一个会话中）。我想做的是将数据保存到数据库中（最简单的解决方案），但是托管模拟服务的环境不允许这样做。

我尝试使用 IsolatedStorage（应用程序范围），但这在我的实例中似乎不起作用。（我正在使用以下内容来获取商店...

```
IsolatedStorageFile.GetStore(IsolatedStorageScope.Application | 
    IsolatedStorageScope.Assembly, null, null); 
```

我想我的问题是（考虑到我了解IsolatedStorage 的局限性这一事实）我将如何让它发挥作用？如果没有一致的方法来做到这一点，我想我将不得不退回到坚持到文件系统上的特定文件位置，以及我们环境中需要的权限设置的所有痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T14:33:35.403

自答。

为了开发和测试的目的，我意识到限制持久对象的生命周期是最容易的，并使用

```
HttpRuntime.Cache 
```

来存储对象。这有足够的灵活性来应对我的情况。

# maven - 在 Maven 中自动激活父插件

> ID：495314
> 
> 赞同：9
> 
> 时间：2009-01-30T12:12:20.977
> 
> 标签：maven, inheritance

是否可以在已停用的父 POM 中定义一个插件，并且当孩子继承此插件时它会自动激活？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-10T14:44:36.740

我猜你想在你的父 pom 中配置插件，但只在继承的项目中使用它。Maven 对此有一个部分 - 在 pluginManagement 中配置您的插件，但仅在需要时将它们绑定到阶段，例如在 pluginManagement 中省略阶段标记，但在继承的 pom 中指定它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-08-10T18:06:23.397

所以'siddhadev'是完全正确的。您可以使用给定的 id 在父 pom 中定义插件配置：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <id>child-caller</id>
                        <!-- 'phase' omitted -->
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <tasks>
                                <echo message="called from child!" />
                            </tasks>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

而且，在子 POM 中，您可以明确列出应该调用它的阶段：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>child-caller</id>
                    <phase>compile</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

我用它来定位各种 JRE。不幸的是，因为您不能将 maven-compiler-plugin 用于不同的目标目录（我认为这是插件中的一个错误），所以您必须使用 Ant。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-07-30T22:20:22.427

这不完全是你所追求的，但我认为它对你来说足够好。

如果您在父项的 pluginManagement 标记中声明插件，则配置将由声明该插件的任何子项目继承。

例如，在父声明中编译插件使用 Java 5 进行测试编译。

```
<pluginManagement>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <executions>
        <execution>
          <id>test-compile</id>
          <goals>
            <goal>testCompile</goal>
          </goals>
          <configuration>
            <source>1.5</source>
            <target>1.5</target>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
</pluginManagement> 
```

然后在一个孩子中，您简单地声明编译器插件，并且将继承父级的配置：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-16T18:08:01.610

您可以在顶级 pom 中声明一个插件并告诉它被跳过，然后告诉它不要在子级别被跳过。它不是完全自动的，但覆盖冗长程度非常小。

父 Pom，禁用插件，但声明所有配置：

```
<plugin>
    <groupid>org.apache.maven.plugins</groupid>
    <artifactid>maven-surefire-plugin</artifactid>
    <configuration>
        <skip>true</skip>
        ...lots more config...
        ...lots more config...
        ...lots more config...
    </configuration>
</plugin> 
```

Child Pom，启用插件：

```
<plugin>
    <groupid>org.apache.maven.plugins</groupid>
    <artifactid>maven-surefire-plugin</artifactid>
    <configuration>
        <skip>false</skip>
    </configuration>
</plugin> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-08-18T10:03:17.093

我采用了以下解决方案：

*   在 pluginManagement-section 的 parent-pom 中配置插件。将插件绑定到现有阶段。

*   通过将其绑定到不存在的阶段来停用父 pom 的插件：覆盖插件部分中的阶段。

*   通过在插件部分中包含插件来激活每个子 pom 中的插件。

示例父-pom：

```
<defaultGoal>install</defaultGoal>
    <pluginManagement>
        <plugins>
            ...
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-install-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install-ejb-client</id>
                        <phase>install</phase>
                        <goals>
                        <goal>install-file</goal>
                        </goals>
                        <configuration>
                            <file>${ejb-client-file}</file>
                            <groupId>${project.groupId}</groupId>
                            <artifactId>${project.artifactId}</artifactId>
                            <version>${project.version}</version>
                            <packaging>jar</packaging>
                            <classifier>client</classifier>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
                    ...                 
        </plugins>
    </pluginManagement>
    <plugins>
            <plugin>
                <!-- deactivate the plugin for this project, only child-projects do generate ejb-clients -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-install-plugin</artifactId>
                <inherited>false</inherited>
                <executions>
                    <execution>
                        <id>install-ejb-client</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            ...
    </plugins>
</build> 
```

示例子 pom：

```
<build>
    <plugins>
            ...
        <plugin>
            <!-- Install the generated client-jar. Property 'ejb-client-file' has to be set! Plugin configuration is in the parent pom -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-install-plugin</artifactId>
        </plugin>       
            ... 
    </plugins>
</build> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T12:17:27.240

据我所知，没有通用的解决方案。至少目前...

一个想法（我没有尝试过，但它可能有效）是在父 pom.xml 中定义一个不存在的执行目标，例如：

```
<executions>
    <execution>
        <goals>
            <goal>noGoal</goal>
        </goals>
    </execution>
</executions> 
```

在每个孩子身上，你重新定义了一个正确的目标。

这个解决方案的问题（如果它有效，当然；））是您必须为每个孩子重新定义插件配置。否则，它不会被执行。

# c# - 从 Windows 服务调用 Web 服务

> ID：495315
> 
> 赞同：3
> 
> 时间：2009-01-30T12:12:28.043
> 
> 标签：c#, .net, web-services, windows-services

我确信这个问题有一个优雅的解决方案，但我就是无法理解它。我正在尝试从 Windows 服务中调用 Web 服务。Web 服务是安全的（使用 Windows 身份验证）。运行 Windows 服务的帐户确实有权调用 Web 服务，但我不知道如何获取这些凭据并将它们发送到 Web 服务。Web 服务是 WCF，与 Windows 服务托管在同一台机器上（在 IIS 中）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T12:22:03.593

你应该能够使用这样的东西：

```
var myService = new myThing.Service();
myService.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T12:28:15.440

您是否尝试过为 IIS 启用集成身份验证 (NTLM)？在我看来，如果 Windows 服务用户帐户有权调用该服务，则应该允许您调用 Web 服务。您无需显式提取凭据。

# ruby-on-rails - 在 Rails 视图中循环遍历对象数组：意外行为

> ID：495319
> 
> 赞同：1
> 
> 时间：2009-01-30T12:14:44.437
> 
> 标签：ruby-on-rails, views, models

我有一个显示一些事件的简单日历，这并没有给我预期的结果。这是代码：

```
<!-- Begin Calendar -->
<%= calendar(:year => @year, :month => @month, :first_day_of_week => 1) do |d|

    output = []
    output << render_calendar_cell(d.mday)

    if d.wday == 1
        @garden.plants.collect do |p| 
            if p.needs_sowing? (d.cweek)
                output << "This week sow: #{p.name}"
            end
        end
    end

    end
%>
<!-- end calendar--> 
```

这是需要播种吗？块内调用的方法：

```
def needs_sowing? (week)
      if !sow_out_week_min.blank? && !sow_out_week_max.blank?
        (sow_out_week_min..sow_out_week_max).include? (week)
      end 
end 
```

当循环中只检查一个工厂时，这给了我正确的行为，但如果有不止一个，那么除了初始之外不会显示任何输出

```
output << render_calendar_cell(d.mday) 
```

（它只输出一个月中的哪一天）。

谁能伸出援助之手让我知道我可能哪里出错了？或者得到一些关于在循环中处理这种行为的更好方法的提示？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T14:01:47.247

您应该使用`@garden.plants.each`而不是`collect`. 收集应该用于过滤数组结果而不是循环它们。

# architecture - 系统架构图中的“云架构”概念

> ID：495320
> 
> 赞同：6
> 
> 时间：2009-01-30T12:14:46.760
> 
> 标签：architecture, distributed, diagram, cloud, visio

如果您设计一个易于横向扩展的分布式应用程序，或者您只想利用 Amazon、Google 或 Microsoft 提供的任何新的“云计算”产品，那么您通常最终会使用一些典型的概念或组件：

*   分布式 blob 存储（又名 S3）
*   异步、持久的消息队列（又名 SQS）
*   非关系型/非事务型数据库（如 SimpleDB、Google BigTable、Azure SQL 服务）
*   分布式后台工作池
*   负载平衡的边缘服务进程处理用户请求（通常是虚拟化的）
*   分布式缓存（如 memcached）
*   CDN（内容交付网络，如 Akamai）

现在，当涉及到设计和绘制使用这种模式的架构时，我可以使用任何常用的符号吗？或者甚至下载一些很酷的 Visio 模具？:)

它不必是像 UML 这样的正式系统，但我认为如果有每个人都知道和理解的符号会很棒，例如我们有数据库或文档常用的形状。我认为重要的是不要将其与普通文件系统（本地或网络服务器/SAN）或关系数据库等传统概念混为一谈。

简单来说，我希望能够通过看系统架构概览图，就一个应用程序的可扩展性或数据一致性问题得出一些结论。

**更新：**非常感谢您的回答。我喜欢在传统符号上放置一个小的“云符号”的想法。但是我让这个线程保持打开状态，以防有人会找到特定的符号（可能在一本书左右） - 或者上传了一些拉皮条的 Visio 模板；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:53:56.077

这里有两组符号可以很好地映射到云平台中的概念。

对于 Windows Azure： [http](http://davidpallmann.blogspot.com/2011/07/windows-azure-design-patterns-part-1.html) ://davidpallmann.blogspot.com/2011/07/windows-azure-design-patterns-part-1.html （[在此处](http://neudesic.blob.core.windows.net/webpatterns/AzureDesignPatternIcons.zip)下载）

**编辑 2014 年 2 月**==> 这是 Microsoft 最近发布的更完整的集合：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=41937) **41937 现在这是用于 Windows Azure 的最佳选择.**

亚马逊网络服务： [http ://aws.typepad.com/aws/2011/12/introducing-aws-simple-icons-for-your-architecture-diagrams.html](http://aws.typepad.com/aws/2011/12/introducing-aws-simple-icons-for-your-architecture-diagrams.html)

并且@markus 显然远远领先于曲线，因为他在这些问题可用之前就发布了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T15:01:20.120

我不知道任何独特的符号，但如果你需要一些 - 我会选择传统的，并为每个符号添加一个小云符号。所以每个人都知道传统的含义——在抽象层上，它是否是云并不重要——云符号添加了它在云环境中运行的信息。

但是，如果您想向客户展示这些符号，请解释这些符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-18T04:37:28.397

有兴趣查看 visio 模板。从非常高级的角度来看，在传统数据库上放置一个云是可行的，但是表达云组件的完整导入是不够的，特别是当需要将它们包含在图表中时——例如异步消息巴士欢呼 - kalyan

# visual-studio-2005 - TFS vs2005总是访问文件

> ID：495321
> 
> 赞同：0
> 
> 时间：2009-01-30T12:15:05.963
> 
> 标签：visual-studio-2005, tfs

在 vs2005 中打开一个文件会导致一个对话框弹出“联系服务器以获取要更新的项目列表”......每次......我没有检查/编辑......只是打开查看。

重置vs2005设置等...但无济于事...没有设置似乎是差异。在我的和其他开发者盒子之间。在谷歌上似乎什么都没有。没有插件等

让我发疯 - 每当服务器上发生变化时，我都会得到变化......更不用说中断了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T12:52:56.793

这显然不是正常行为，您可以通过查看其他开发人员的机器来判断。我个人会怀疑某种插件。您可以尝试在“工具”、“加载项管理器”中查看是否有任何内容。如果这不起作用，请关闭 Visual Studio 并启动 Visual Studio 2005 命令提示符，然后键入

```
devenv /SafeMode 
```

并查看问题是否仍然存在。如果是这样，您可以尝试通过在 Visual Studo 2005 命令提示符处键入以下内容来重置 Visual Studio（警告它将重置您的所有首选项等）

```
devenv /ResetSettings 
```

但所有这些都是在黑暗中拍摄的——我从未见过你所描述的行为......

# macos - Quit All Applications using Applescript?

> ID：495323
> 
> 赞同：13
> 
> 时间：2009-01-30T12:15:47.540
> 
> 标签：macos, applescript

How would I quit all running user applications using Applescript?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-30T12:23:53.467

It's okay... I think I found my answer:

```
tell application "System Events" to set the visible of every process to true

set white_list to {"Finder"}

try
    tell application "Finder"
        set process_list to the name of every process whose visible is true
    end tell
    repeat with i from 1 to (number of items in process_list)
        set this_process to item i of the process_list
        if this_process is not in white_list then
            tell application this_process
                quit
            end tell
        end if
    end repeat
on error
    tell the current application to display dialog "An error has occurred!" & return & "This script will now quit" buttons {"Quit"} default button 1 with icon 0
end try 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-30T17:23:23.680

After some googling, I found a better approach:

*   It uses `background only` to build the initial app list, rather than `visible is true`. The difference is that the other scripts will fail to quit an app that's been hidden with ⌘H.
*   It provides an exclusions list so that, for example, you can prevent your script editor from quitting each time you test the script.

*Adapted from [a thread on MacScripter](http://macscripter.net/viewtopic.php?id=32758).*

```
-- get list of open apps
tell application "System Events"
  set allApps to displayed name of (every process whose background only is false) as list
end tell

-- leave some apps open 
set exclusions to {"AppleScript Editor", "Automator", "Finder", "LaunchBar"}

-- quit each app
repeat with thisApp in allApps
  set thisApp to thisApp as text
  if thisApp is not in exclusions then
    tell application thisApp to quit
  end if
end repeat 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-04T04:30:41.457

```
tell application "System Events" to set the visible of every process to true

set white_list to {"Finder"}

try   
    tell application "Finder"   
        set process_list to the name of every process whose visible is true   
    end tell   
    repeat with i from 1 to (number of items in process_list)   
        set this_process to item i of the process_list   
        if this_process is not in white_list then   
            tell application this_process   
                quit   
            end tell   
        end if   
    end repeat   
on error   
    tell the current application to display dialog "An error has occurred!" & return & "This script will now quit" buttons {"Quit"} default button 1 with icon 0   
end try 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T05:32:43.140

```
 tell application "System Events" to set quitapps to name of every application process whose visible is true and name is not "Finder"

repeat with closeall in quitapps

quit application closeall

end repeat 
```

# plugins - 插件依赖最佳实践

> ID：495335
> 
> 赞同：2
> 
> 时间：2009-01-30T12:18:29.063
> 
> 标签：plugins, dependencies

我们有一个通过接口支持插件的应用程序。另一方面，插件本身包含大量逻辑和代码。除了应用程序公开的接口之外，插件对应用程序库具有依赖项（项目和 dll 引用）。

应用程序核心库有许多可以在插件中使用的可重用组件。但是，如果这些组件中的任何一个发生了变化，插件和应用程序都会受到影响，因为它们都有依赖关系。

是否可以接受包含对系统的依赖项的插件，插件扩展？关于这个问题的最佳实践是什么？

请分享您的想法和经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T12:53:54.577

看看[Mono.Addins](http://www.mono-project.com/Mono.Addins)，即使你不是用 C# 开发，它也会给你一些很棒的想法。

简单的解决方案是为插件和核心定义一个版本系统，这样核心就可以读取插件需要的自身版本。这种方式很容易防止插件的加载，该插件旨在与先前版本的核心一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-12T17:55:10.237

我认为您的问题有两个答案，具体取决于我们正在谈论的级别：

*   是的，插件主机上的插件依赖关系很好。主机正在协调插件的使用/执行，但主机没有理由不提供帮助插件执行此操作的功能。进一步扩展一点，主机的依赖关系可能是也可能不是插件使用的公平游戏（这进入了“它取决于......”的领域）。
*   不，插件不应该直接依赖于主机可以提供的代码，除了那些插件直接传入的对象。这更多的是对全局状态的不信任，而不是对循环依赖的恐惧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T12:34:46.860

我认为让你的插件引用你的核心是完全可以的。现在您正在谈论项目和 dll 引用，因此您必须使用 c#、vb 或 c++，这些解决方案都应该可以使用。

我通常有两个项目来绕过循环依赖。

1.  项目基础、接口、异常
2.  逻辑/配置/插件加载器

我通常加载插件的三种方式

1.  使用循环和文件系统观察程序退出目录（缓慢但有效）
2.  使用命名类型在 .net 中使用您自己的配置部分（推荐且最快）
3.  从数据库加载它们（有利于可扩展性）

# css - 免费工具来加速 Web 开发

> ID：495339
> 
> 赞同：29
> 
> 时间：2009-01-30T12:20:47.793
> 
> 标签：css

作为一个小项目，我开始为我所属的某个组织建立一个新网站，而当前的网站已经过时了。

我经常是一名 Java 开发人员，上一次我真正做一些 Web 开发是在 90 年代后期，当时`<p>`仍然比 Javascript 更流行，`<div>`而且 Javascript 是尖端技术（JQuery 现在是为懒惰的流浪汉准备的 :)）。

反正我觉得真的过时了。该网站基本上将是：

*   基于 Django
*   **主要提供静态信息页面**
*   它将有一个动态的新闻和更新页面（基于 Django 管理功能）
*   以及一些我将自己开发的基本应用程序（投票、小型注册应用程序等...）

我的问题是**设计**整个事情。我发现了一些不错的基于 Web 的 CSS 布局生成器，它们让我继续前进，但我仍然觉得我在浪费时间平滑 CSS 文件和对齐`<div>`s。

有没有什么工具——越简单、越快越好——你推荐我可以用来加速网站的设计部分，这样我就可以专注于*真正的*工作？

我不需要任何花哨的东西，只需要一个漂亮的布局和设计，我可以稍微调整一下，这样网站就会看起来像样的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-02-05T05:51:00.557

我赞同 Brandon 使用 CSS 框架的建议。它不会给你 100% 的自由来设计你喜欢的任何东西，但它可以大大加快你的设计过程，让你腾出双手去做你*真正*想要的编码。

**2013 年 7 月更新**的建议：

*   **Twitter Bootstrap** [http://twitter.github.io/bootstrap/](http://twitter.github.io/bootstrap/) - 完整的网格、错字、UI 小部件原型设计框架
*   **ZURB Foundation** [http://foundation.zurb.com/](http://foundation.zurb.com/) - 响应式网格、类型、UI 小部件原型框架（范围类似于 Twitter Bootstrap，但在某些方面感觉“更干净”）
*   **960** [http://960.gs/](http://960.gs/) - 网格布局系统
*   **的黎波里** [http://devkick.com/lab/tripoli/](http://devkick.com/lab/tripoli/) - 非常好的排版，但没有网格系统
*   **YUI Grids** [http://developer.yahoo.com/yui/grids/](http://developer.yahoo.com/yui/grids/) - 非常可定制（到了矫枉过正的程度）网格系统
*   **蓝图** [http://www.blueprintcss.org/](http://www.blueprintcss.org/) - 网格系统和基本排版
*   **BlueTrip** [http://www.bluetrip.org](http://www.bluetrip.org) - 一个混合系统，将最好的蓝图网格与最好的的黎波里排版相结合

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-02-06T09:04:16.623

我不会骗你的。如果您正在寻找可靠的网页设计建议，这个网站不是最好的去处。Stack Overflow 是一个编程社区，程序员很少对设计一无所知。如果您想获得一些真正的建议，那么我强烈推荐 Internet 上的主要网页设计/开发论坛，尤其是[SitePoint](http://www.sitepoint.com)。

话虽如此，作为一名~~前~~自由网页设计师/开发者，我将就这个问题提供我的意见。当然，并不是说你应该重视它。毕竟，这是一个编程网站。

**再也不要说 CSS 布局生成器了！**如果您打算认真设计网页，那么您首先需要学习语义 XHTML 和 CSS。虽然许多人吹捧 W3Schools 是权威资源，但我认为它是程序员的答案（即不是很好），并且希望您使用...谷歌阅读该主题。有无数优秀网站的例子来学习网页设计/开发的基础知识，谷歌可能是最适合这项工作的网站。此外，随着大量提供此信息的新网站，您知道它将比 W3Schools 得到更多改进。你会非常想了解如何编写你的设计，因为在项目的后期修复问题会更加困难。

如果您要设计网页，那么了解什么才是好的设计是个好主意。查看[CSS Vault](http://cssvault.com/)以获取一些设计最佳的网页的绝佳资源，当然所有源代码都完好无损，因此您可以玩弄他们的代码，看看他们是如何管理他们的一些精彩效果的'已经产生。我从 CSS Vault 中精选的网站中学到了不止一两件事。最重要的是，您应该阅读大型网页设计/开发网站的网页设计。我最喜欢的两个是[SitePoint](http://www.sitepoint.com)和[A List Apart](http://www.alistapart.com)，当您听到人们谈论资源时，您会一次又一次地接近这两个名称。浏览那些网站，查看他们的论坛，看看什么是**真实的**网页设计师/开发人员正在使用，而不是程序员正在使用什么。

关于 CSS 框架的主题；他们确实有帮助！使用它们的问题在于，您经常会花费大量时间寻找有价值的框架，以至于您可以自己完成网站的大部分 CSS。你要么爱他们，要么恨他们，但很多人会说他们没有必要。

一旦你确定了一个好的设计是什么样的，并且你拥有了制作有价值的东西所需的资源，我建议你开始工作！实际上，当您设计网页时，您真正需要的只是一个具有保存功能的文本编辑器、一个图像处理程序、一个浏览器窗口和[FireBug](http://www.getfirebug.com)。IDE 可以帮助很多人，但是如果您确实使用了一个，那么您肯定会希望在它的文本模式下工作。我只使用 NotePad++ 或 Emacs，但很多人喜欢使用 Aptana Studio，所以可能值得一看。

当您开始实际构建网站背后的代码时，您最喜欢的 IDE/文本编辑器和源代码控制工具真的不能再糟糕了。作为一名 Java 程序员，您更适合谈论编程，所以我不会就您已经知道的主题向您讲授。

最后，网页设计将需要时间，我们选择使用的许多我们声称会*“节省时间”*的工具实际上节省的很少。如果您不是设计大师，那么您将花费大量时间来创建一个漂亮的网站。这是生活中的事实。称我为老式（来自 21 岁的一个有趣的词），但我仍然认为最快的方法是在一张纸上画出一个设计草图（如果真的有必要的话，一个图像程序）然后走出去做那该死的东西！同样，我必须将这种*寻找银弹的*心态作为程序员的特质，这在设计时真的没有太大帮助，因为设计网页与编写 Java 程序有很大不同。

简而言之，**忽略您在此处阅读的所有内容，阅读真正的设计师在做什么，然后做些该死的事情！**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-30T13:56:21.407

在快速开发 CSS 样式的网站时，有一条建议比其他任何建议都节省更多时间，那就是**保持简单**

使用一个有吸引力的简单布局，它不需要完美的像素，并且可以在不太兼容的浏览器 (IE6) 中“优雅地”降级。尽量减少 CSS 的数量并修复上面 meouw 提到的基本错误。然后专注于内容和功能......*真正的*工作

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-01-30T12:53:35.090

在我之前的工作中，我为网站创建了数十个模板。
我发现的最有用的也是 Firefox Web Developer Toolbar。
它有很多有用的小工具。我最喜欢的功能是能够编辑 CSS 并实时查看结果。这节省了整个编辑 - 上传 - 刷新周期。不过要注意 ie CSS 的不一致！在我的脑海中，这些是最重要的问题。

双边距错误 [google: double margin bug]
不正确（但更直观）框模型 [google: 框模型]
不正确（但更直观）浮动清除 [google: clearfix]

FireBug 是另一个非常有用的 Firefox 插件，可以进行更深入的分析。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-30T12:36:41.943

- [http://patterntap.com/](http://patterntap.com/)
- [http://www.dotemplate.com/](http://www.dotemplate.com/) （自定义模板的有趣概念）
- [http://www.templatemonster.com/](http://www.templatemonster.com/)
- [http://www.freelayouts.com/websites /html-模板](http://www.freelayouts.com/websites/html-templates)
- [http://www.templateyes.com/](http://www.templateyes.com/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-05T05:57:00.030

当我开始尝试设计一些东西时，我一直发现[开源网页设计是一个很好的资源。](http://www.oswd.org/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-30T12:26:08.330

不知道该站点将是什么，但是您是否考虑过使用预构建的 CMS，例如 Drupal、Joomla 等？然后，您可以调整模板等，而不必担心从头开始制作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-30T13:35:15.070

这个问题已经很老了，但是因为我们是在 2012 年，所以我只能在 2009 年用我正在寻找的东西来回答我自己的问题。

[**推特引导**](http://twitter.github.com/bootstrap/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-02T17:01:26.603

您是否研究过任何[CSS 框架](http://nettuts.com/html-css-techniques/which-css-grid-framework-should-you-use-for-web-design/)？如果你对 CSS 有足够的能力，那么框架之类的东西可以帮助加快速度。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-06T08:36:24.137

不要忘记萤火虫 :) 如果您担心调整设计，那真的很棒。使用检查功能，您可以实时编辑页面的 CSS。

[https://addons.mozilla.org/en-US/firefox/addon/1843](https://addons.mozilla.org/en-US/firefox/addon/1843)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-07T01:05:58.990

我[支持 Jens Roland 的](https://stackoverflow.com/questions/495339/free-tools-to-speed-up-web-development/514741#514741)CSS 框架列表。

但我也建议你看看[Smashing Magazine](http://www.smashingmagazine.com/category/css/)等网站。在许多其他文章中，您可能会发现[这篇文章很有趣。](http://www.smashingmagazine.com/2007/01/12/free-css-layouts-and-templates/)他们倾向于为 web 开发人员做很多漂亮而冗长的混搭，如果不是直接的解决方案，至少会给你灵感。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-01T15:08:36.440

我的一位同事整个星期都在试图说服我**Dreamweaver**，在我最后一次被迫在枪口下使用它 5 年后，实际上现在值得快速、轻松地完成设计，并且现在也能胜任 HTML对于那个设计。

根据我以前的经验，我拒绝花费 10 分钟来找出答案，但你可能想快速浏览一下这个演示 :)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-02T04:38:20.253

我建议您找到一个 CMS 包，因为您使用的是 Django，请查看[django-cms](http://django-cms.org/)。它具有 TinyMCE 和 Markdown 支持，因此更新您的页面应该很容易。django-cms 也与 Django 管理界面很好地集成。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-06T09:43:05.470

*   一张纸来勾勒你的设计
*   用于编写初始 HTML/CSS 的文本编辑器（最好设置为直接保存到本地或其他开发服务器）
*   FireBug/IEDeveloperToolbar 检查每个看起来错误的元素并直接在浏览器中编辑其 CSS 直到看起来正常，然后使用文本编辑器提交

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-02-14T13:12:51.240

如果您正在进行任何 JavaScript 开发，请使用高级编辑器，该编辑器会在您键入时突出显示错误和警告。这种功能直到最近还只是静态语言编辑器的领域，但免费的 NetBeans 6 实现了这一惊人的壮举。传统上，您在第一次将父页面加载到浏览器时首先发现 JavaScript 拼写错误和简单的错误。能够缩短这些迭代的捷径所获得的加速是深远的。

NetBeans 6 还突出显示 CSS 错误，并且对于 Web 开发人员目前可能使用的大多数语言来说，它是一个功能强大的编辑器。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-09-02T12:41:28.010

您也可以使用[www.zbugs.com](http://www.zbugs.com) - 它可以帮助您加快压缩和 gzip 压缩 CSS 和 Javascript 文件的过程

# service - asp.net web service和Ihttphandler的区别

> ID：495344
> 
> 赞同：5
> 
> 时间：2009-01-30T12:22:23.297
> 
> 标签：service, ihttphandler

简单的任务，比如发出 AJAX 请求，传递一个参数并返回结果，可以通过 Web Service 和 IHttpHandler 完成，那么区别在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-30T12:45:25.387

ASP.NET Web 服务实际上是一种 HttpHandler，它提供基于 W3C 标准 (SOAP/WSDL) 的基于 XML 的通信基础结构。这意味着非 .NET 客户端可以与 ASP.NET Web 服务进行互操作。在您发出非常简单的单个 ajax 请求以返回简单结果的情况下，ASP.NET/XML Web 服务可能会过大。

实现一个简单的自定义 HttpHandler 比调用与 ASP.NET Web 服务相关的所有管道和开销可能更有益/更有效。使用自定义 HttpHandler，您可以只发送您需要的参数并准确返回您希望看到的结果，而无需使用 XML Web 服务时创建的任何支持 SOAP xml。

# git - 如何在保留更改的同时从 Git 存储库中删除选定的提交日志条目？

> ID：495345
> 
> 赞同：246
> 
> 时间：2009-01-30T12:23:01.237
> 
> 标签：git, commit

我想从线性提交树中删除选定的提交日志条目，以便这些条目不会显示在提交日志中。

我的提交树看起来像：

```
R--A--B--C--D--E--HEAD 
```

我想删除 B 和 C 条目，以便它们不会显示在提交日志中，但应该保留从 A 到 D 的更改。也许通过引入一个单一的提交，使 B 和 C 成为 BC 并且树看起来像。

```
R--A--BC--D--E--HEAD 
```

或者，理想情况下，在 A 之后直接是 D。D' 代表从 A 到 B、B 到 C 和 C 到 D 的变化。

```
R--A--D'--E--HEAD 
```

这可能吗？如果是，如何？

这是一个相当新的项目，因此到目前为止还没有分支，因此也没有合并。

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2009-01-30T12:26:03.353

[git-rebase(1)](http://schacon.github.com/git/git-rebase.html)正是这样做的。

```
$ git rebase -i HEAD~5 
```

[git awsome-ness [git rebase --interactive]](http://web.archive.org/web/20100213104931/http://blog.madism.org/index.php/2007/09/09/138-git-awsome-ness-git-rebase-interactive)包含一个示例。

1.  不要`git-rebase`在公共（远程）提交上使用。
2.  确保您的工作目录是干净的（`commit`或`stash`您当前的更改）。
3.  运行上面的命令。它启动您的`$EDITOR`.
4.  替换`pick`之前`C`和`D`之前`squash`。它将 C 和 D 融合到 B 中。如果你想删除一个提交，那么只需删除它的行。

如果您迷路了，请输入：

```
$ git rebase --abort 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2009-01-30T13:45:48.293

```
# detach head and move to D commit
git checkout <SHA1-for-D>

# move HEAD to A, but leave the index and working tree as for D
git reset --soft <SHA1-for-A>

# Redo the D commit re-using the commit message, but now on top of A
git commit -C <SHA1-for-D>

# Re-apply everything from the old D onwards onto this new place 
git rebase --onto HEAD <SHA1-for-D> master 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2010-09-13T23:32:01.567

这是一种删除特定提交 id 的方法，只知道您要删除的提交 id。

```
git rebase --onto commit-id^ commit-id 
```

请注意，这实际上删除了提交引入的更改。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2010-03-27T00:23:57.387

要扩展 JF Sebastian 的答案：

您可以使用 git-rebase 轻松地对您的提交历史进行各种更改。

运行 git rebase --interactive 后，您会在 $EDITOR 中获得以下信息：

```
pick 366eca1 This has a huge file
pick d975b30 delete foo
pick 121802a delete bar
# Rebase 57d0b28..121802a onto 57d0b28
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit 
```

您可以移动行以更改提交的顺序并删除行以删除该提交。或者，您可以添加一个命令以将两个提交合并（压缩）为一个提交（先前的提交是上述提交）、编辑提交（更改的内容）或改写提交消息。

我认为选择只是意味着您想不理会该提交。

（示例来自[这里](https://stackoverflow.com/questions/2327050/git-push-after-removing-large-file/2327928#2327928)）

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-05-09T19:49:26.680

您可以在示例中以非交互方式**删除**B 和 C：

```
git rebase --onto HEAD~5 HEAD~3 HEAD 
```

或象征性地，

```
git rebase --onto A C HEAD 
```

注意B和C的变化*不会*在D；他们会*消失*的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-17T23:24:07.507

通过从 A 的 SHA1 创建另一个分支并挑选所需的更改，我发现这个过程更安全、更容易理解，因此我可以确保我对这个新分支的外观感到满意。之后，很容易删除旧分支并重命名新分支。

```
git checkout <SHA1 of A>
git log #verify looks good
git checkout -b rework
git cherry-pick <SHA1 of D>
....
git log #verify looks good
git branch -D <oldbranch>
git branch -m rework <oldbranch> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-04-17T16:59:08.947

还有一种方式，

```
git rebase -i ad0389efc1a79b1f9c4dd6061dca6edc1d5bb78a (C's hash)
and
git push origin master  -f 
```

选择你想用它作为基础的散列，上面的命令应该让它交互，这样你就可以压缩所有**最重要**的消息（你需要留下最旧的）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-05T14:55:58.033

刚刚收集了所有人的答案：（我是git新手，仅供参考）

## git rebase 删除任何提交

混帐日志

```
-first check from which commit you want to rebase 
```

git rebase -i HEAD~1

```
-Here i want to rebase on the second last commit- commit count starts from '1')
-this will open the command line editor (called vim editor i guess) 
```

然后屏幕将如下所示：

> 选择 0c2236d 添加新行。
> 
> # 将 2a1cd65..0c2236d 变基为 2a1cd65（1 个命令）
> 
> #
> 
> # 命令：
> 
> # p, 选择 = 使用提交
> 
> # r, reword = 使用提交，但编辑提交信息
> 
> # e、编辑=使用提交，但停止修改
> 
> # s, squash = 使用提交，但融合到之前的提交中
> 
> # f, fixup = like "squash", 但丢弃这个提交的日志信息
> 
> # x, exec = 使用 shell 运行命令（该行的其余部分）
> 
> # d, drop = 删除提交
> 
> #
> 
> # 这些行可以重新排序；它们是从上到下执行的。
> 
> #
> 
> # 如果您在此处删除一行，则 COMMIT 将丢失。
> 
> #
> 
> # 但是，如果您删除所有内容，rebase 将被中止。
> 
> #
> 
> # 注意空提交被注释掉了~~
> 
> ～～～～～～～～～
> _
> _
> _
> _
> _
> _
> _
> _

在这里根据您的需要更改第一行（使用上面列出的命令，即“drop”删除提交等）一旦完成编辑按“：x”保存并退出编辑器（这仅适用于 vim 编辑器）

进而

git 推送

如果它显示问题，那么您需要强制将更改推送到远程（非常关键：如果您在团队中工作，请不要强制推送）

git push -f 原点

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-02-02T23:47:42.350

您可以为此使用 git cherry-pick 。'cherry-pick' 会将提交应用到您现在所在的分支上。

然后做

```
git rebase --hard <SHA1 of A> 
```

然后应用 D 和 E 提交。

```
git cherry-pick <SHA1 of D>
git cherry-pick <SHA1 of E> 
```

这将跳过 B 和 C 提交。话虽如此，如果没有 B，可能无法将 D 提交应用到分支，所以 YMMV。

# wpf - 需要使用 LINQ 将 WPF 对象绑定到列表框的简单示例

> ID：495347
> 
> 赞同：3
> 
> 时间：2009-01-30T12:24:46.367
> 
> 标签：wpf, linq, xaml, data-binding, listbox

以下示例成功地将对象与 a 绑定`ListBox`以显示它们。但是，我想在一个类中创建所有对象，然后从另一个类中使用 LINQ 查询它们以填充我的 XAML `ListBox`，我需要添加这个示例：

XAML：

```
<Window x:Class="WpfApplication15.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="300" Width="300"
        xmlns:local="clr-namespace:WpfApplication15">
    <Window.Resources>
        <ObjectDataProvider x:Key="customers" ObjectType="{x:Type local:Customers}"/>
        <DataTemplate x:Key="LastNameFirst" DataType="WpfApplication15.Customer">
            <StackPanel Margin="10 10 10 0" Orientation="Horizontal">
                <TextBlock Text="{Binding Path=LastName}" FontWeight="bold"/>
                <TextBlock Text=", "/>
                <TextBlock Text="{Binding Path=FirstName}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <ListBox ItemsSource="{Binding Source={StaticResource customers}}"
                 ItemTemplate="{StaticResource LastNameFirst}"/>
    </Grid>
</Window> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication15
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
        }
    }

    public class Customer
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }

        public Customer(string firstName, string lastName)
        {
            this.FirstName = firstName;
            this.LastName = lastName;
        }
    }

    public class Customers : List<Customer>
    {
        public Customers()
        {
            this.Add(new Customer("Jim", "Thompson"));
            this.Add(new Customer("Julie", "Watson"));
            this.Add(new Customer("John", "Walton"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-30T17:54:57.353

*编辑：将 ToList 调用添加到 LINQ 查询*

为此，您可以使用 LINQ 在代码隐藏中分配 ListBox 的 ItemsSource。假设你给你的 ListBox 一个名字：

```
<Window x:Class="WpfApplication15.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:local="clr-namespace:WpfApplication15"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Width="300" Height="300" Title="Window1">
    <Window.Resources>
        <DataTemplate x:Key="LastNameFirst" DataType="WpfApplication15.Customer">
            <StackPanel Margin="10 10 10 0" Orientation="Horizontal">
                <TextBlock FontWeight="bold" Text="{Binding Path=LastName}"/>
                <TextBlock Text=", "/>
                <TextBlock Text="{Binding Path=FirstName}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <ListBox x:Name="lstCustomers"
                 ItemTemplate="{StaticResource LastNameFirst}"/>
    </Grid>
</Window> 
```

您可以在 Loaded 事件中分配给 ItemsSource：

```
public partial class Window1 : Window 
{
    public Window1()
    {
        this.Loaded += new RoutedEventHandler(Window1_Loaded);
        InitializeComponent(); 
    }

    void Window1_Loaded(object sender, RoutedEventArgs e)
    {
        Customers customers = new Customers();
        lstCustomers.ItemsSource = customers.Where(customer => customer.LastName.StartsWith("W")).ToList();
    }
} 
```

假设您的 LINQ 查询将根据某些逻辑而改变，您可以在适当的点重新分配 ItemsSource。

如果您想在查询逻辑发生更改时绑定而不深入到代码隐藏中，则最好使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)，因为它具有[排序](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.sortdescriptions.aspx)和[过滤](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.filter.aspx)功能（假设这是您使用 LINQ 所追求的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T12:30:35.713

看看@ [http://www.codeplex.com/bindablelinq](http://www.codeplex.com/bindablelinq)，你应该找到一堆很好的例子。

# vba - 根据名称将文本框值分配给相应的单元格

> ID：495348
> 
> 赞同：0
> 
> 时间：2009-01-30T12:24:52.263
> 
> 标签：vba, loops, excel, textbox

我在表单上有一组文本框，称为 sm1、sm2 等，我想将它们分配给单元格 A1、A2 等。有没有办法把它放在一个循环中，即：

```
For i = 1 to 100
  Cells(i, 1).Value = ("sm" & c).Value
Next i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T12:28:03.207

不确定 VBA，但表单上应该有“控件”集合，您可以通过控件名称访问它的元素，如上所示。

```
cells(i,1).Value = Controls("sm"&c).Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T02:01:58.743

另一种方法是使用`ControlSource`每个文本框的属性将它们绑定到相关单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T12:47:38.893

通过表单上的文本框，您可以使用 Controls 集合。

```
For Each oControl In Me.Controls
    If Typename(oControl) = "TextBox" Then
        iCellNumber = Val(Mid$(oControl.Name, 3)) 'Assumes all textboxes have two letter names
        cells(iCellNumber ,1).Value = val(oControl.Text)
    End If
Next oControl 
```

如果控件在工作表上，您可以使用该工作表上的形状集合

```
For Each oControl In Me.Shapes
    If InStr(oControl.Name, "TextBox") = 1 Then
        iCellNumber = Val(Mid$(oControl.Name, 3))
        cells(iCellNumber ,1).Value = val(oControl.Text)
    End If
Next oControl 
```

# c# - asp.net MVC RC1 RenderPartial ViewDataDictionary

> ID：495351
> 
> 赞同：22
> 
> 时间：2009-01-30T12:25:14.960
> 
> 标签：c#, .net, asp.net-mvc

我正在尝试`ViewData`使用`ViewDataDictionary`.

问题是`ViewDataDictionary`无论我尝试哪种方式，都不会在视图用户控件中返回任何值。

下面的示例代码使用匿名对象仅用于演示，尽管此方法或传递`ViewData`对象都不起作用。

以下是`RenderPartial`我尝试使用的辅助方法：

```
<% Html.RenderPartial("/Views/Project/Projects.ascx", ViewData.Eval("Projects"), new ViewDataDictionary(new { Test = "Mark" })); %> 
```

在我看来，用户控件我执行以下操作：

```
<%= Html.Encode(ViewData["Test"]) %> 
```

为什么这不返回任何东西？

谢谢你的帮助。

编辑：

我能够毫无问题地传递和访问强类型模型。这是`ViewDataDictionary`我试图用来传递模型之外的单个值的方法...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2010-04-12T02:25:57.423

这是我见过的最简洁的方法：

```
<% Html.RenderPartial("/Views/Project/Projects.ascx", Model, new ViewDataDictionary{{"key","value"}});%> 
```

这可能有点骇人听闻，但它可以让您通过和一些额外的数据发送模型。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2010-02-16T21:47:44.103

不知道是否还有人关心，但我使用 KeyValuePair 作为 ViewDataDictionary。

```
 <% Html.RenderPartial("ItemRow", item, new ViewDataDictionary{
        new KeyValuePair<string, object>("url", url),
        new KeyValuePair<string, object>("count", count),
        new KeyValuePair<string, object>("className", className)
 }); %> 
```

这样您就可以在一个语句中编写所有内容。可以通过以下方式在视图中访问 KVP：

```
<%= ViewData["url"] %>
<%= ViewData["count"] %>
<%= ViewData["className"] %> 
```

虽然我通过模型传递的内容可以通过模型访问。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-23T23:51:06.267

我正在使用 ASP.Net MVC 的 RTM 版本，但是：

```
<% Html.RenderPartial("~/Views/Project/Projects.ascx", new ViewDataDictionary(new {Key = "Some value"})); %> 
```

在局部视图中引用值时尝试以下操作：

```
<%= ViewData.Eval("Key") %> 
```

这似乎对我有用。如果您这样做，它也将起作用：

```
<% Html.RenderPartial("~/Views/Project/Projects.ascx", new {Key = "Some value"}); %> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-30T12:54:14.933

你有没有尝试过：

```
<% Html.RenderPartial("~/Views/Project/Projects.ascx", ViewData); %> 
```

在您通过之前，您是否已验证 ViewData["Test"] 是否在 ViewData 中？另请注意，将 ViewData 传递给 Partial Control 时，保持模型相同很重要。

缺口

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T15:25:32.663

在您的主视图中：

```
<% Html.RenderPartial("~/Views/Project/Projects.ascx", ViewData["Projects"]); %> 
```

在您的控制器或您的主视图中：

```
ViewData["Test"] = "Mark"; 
```

如果您没有在 RenderParttail 中指定模型或视图数据字典，它会使用包含视图中的那些。

# cocoa-touch - 如何从应用程序中的联系人应用程序访问电子邮件？

> ID：495361
> 
> 赞同：1
> 
> 时间：2009-01-30T12:28:20.803
> 
> 标签：cocoa-touch

我需要从我的应用程序向联系人应用程序的 ID 列表发送电子邮件。有没有办法访问联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T13:02:57.130

[这里](http://iphone.zcentric.com/2008/09/19/access-the-address-book/)有基本上做这个的示例代码。该示例是访问电话号码而不是电子邮件地址。

在示例使用 kABPersonPhoneProperty 的地方，您将希望改用 kABPersonEmailProperty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T06:10:27.977

嗨thanx的链接，该示例说要添加AddressBook.framework和AddressBookUI.framework框架，虽然我添加了AddressBook.framework，但AddressBookUI.framework在框架文件夹中不可用..我尝试在/Platforms/iPhoneOS中搜索它.platform/Developer/SDKs/iPhoneOS2.0.sdk/System/Library/Frameworks/AddressBookUI.framework ，但平台文件夹也是空的......

# winforms - 在不验证事件的情况下将数据从控件推送回源

> ID：495373
> 
> 赞同：0
> 
> 时间：2009-01-30T12:32:46.397
> 
> 标签：winforms, validation, data-binding, textbox, bindingsource

我对绑定到 a有`TextBox`控制。如果我在这些控件上设置它不会更新方法上的数据源。我知道该事件会进行此保存，但是如果禁用，我该如何更新源？`WinForm``BindingSource``CausesValidation = false``tableAdapter.Update()``Control.Validating``CausesValidation`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-31T11:45:53.603

使用 Binding 中的 DataSourceUpdateMode.OnPropertyChanged 解决了问题。

# java - 验证数据库如您所愿

> ID：495376
> 
> 赞同：1
> 
> 时间：2009-01-30T12:33:14.990
> 
> 标签：java, database, oracle, verification

我一直在我的机器上编写一个 java 应用程序，它可以使用我设置的数据库完美运行，但是当我在现场安装它时它会爆炸，因为数据库略有不同。

所以我正在编写一些代码来验证：

*   A: 我的数据库详细信息是正确的

*   B：数据库有我期望的所有表，并且它们有正确的列。

我有A下来，但我不知道从哪里开始B，有什么建议吗？

目标数据库适用于当前客户端是 Oracle，但该应用程序也可以配置为在 SQL Server 上运行。所以一个通用的解决方案将不胜感激，但不是必要的，因为我确信我可以弄清楚如何从另一个做一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T12:38:18.397

你会想要查询数据库的 information_schema，这里有一些 Oracle 的例子，我知道的每个平台都有类似的东西。

[http://www.alberton.info/oracle_meta_info.html](http://www.alberton.info/oracle_meta_info.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T12:38:23.407

您可能可以为此使用像 LiquiBase 这样的数据库迁移工具——这些工具中的大多数都有某种检查数据库的方法。我没有使用它的第一手经验，所以这是一个猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T12:40:25.273

我使用[DbUnit](http://www.dbunit.org/)来测试数据库。它是一个基于 Java 的解决方案，可以与[Junit](http://www.junit.org/)很好地集成。几乎没有 Java 就可以使用它。我没有在与您描述的完全相同的情况下使用它，但它应该足够接近才能工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T12:39:13.450

最通用的解决方案是在 try catch 块中使用具有预期列的 select 子句和具有表名的 from 子句执行查询。您可以将 where 子句设置为 1=2 以免获取任何数据。如果查询执行时没有抛出异常，那么您就得到了预期的表和列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T12:48:38.893

首先编写数据库创建脚本可能会更好地处理略有不同的部分。自动化过程使您有更好的机会使两者相同。

另一点值得一提的是，您可以通过使您的 devl 和 prod 环境相同来最小化您的风险 - 相同的数据库架构和供应商。改变使两者不同的环境。

最后，你没有说什么是“稍微”不同的，但有时这些是不可避免的（例如，Oracle 使用序列，SQL Server 使用标识）。也许 Hibernate 可以帮助您更可靠地在供应商之间切换。它以这样一种方式抽象细节，即更改数据库可能意味着修改配置文件中的单个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T12:53:00.100

您需要的基本上是数据库的单元测试。“必须存在名为 FOOBAR 的列，类型必须是整数。不能存在外键等。”

这对于普通的 JUnit 和 JDBC（向表询问其元数据）是可行的，因为您可能希望确保您绝对确定正在做什么，而使用 dbUnit 时可能会更难。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T13:20:16.723

您可以使用 Oracle 中的这些表来检查表、列、视图等是否存在

USER_TABLES USER_VIEWS USER_PROCEDURE

（或所有）USER_OBJECTS WHERE OBJECT_TYPE = '??'

继续... USER_TAB_COLS 用于表列

问候 K

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T13:31:14.080

如果您使用的是普通 JDBC，则应尝试使用此方法：[DatabaseMetadata.getTables](http://download.oracle.com/javase/1.4.2/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String[]%29)和元数据类中可用的其他类似方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-30T15:46:54.507

我为此使用[MigrateDB](http://migratedb.sourceforge.net/)。它使您可以构建查询来执行诸如检查给定数据库的给定表、列、行、索引等是否存在，并将它们用作“测试”。如果测试失败，它会触发一个“动作”（这只是另一个知道如何解决问题的查询。）

MigrateDB 支持多种数据库平台（例如，您可以为每个平台指定“检查表是否存在查询”），完全可配置的测试（您可以自己制作），带有相当完整的 Oracle 测试，并且可以在“仅审核”模式，以便它只告诉您差异是什么。

这是一个不错的、强大的解决方案。

# c# - C#：如何让表单记住它的边界和窗口状态（考虑双显示器设置）

> ID：495380
> 
> 赞同：9
> 
> 时间：2009-01-30T12:36:05.813
> 
> 标签：c#, winforms, persistence

我创建了一个表单可以继承的类，它处理表单位置、大小和状态。而且效果很好。除了一件事：

当您在与主屏幕不同的屏幕上最大化应用程序时，位置和大小（在您最大化之前）会正确存储，但是当它被最大化时（根据其先前的状态），它会在我的主监视器上最大化。然后当我将它恢复到正常状态时，它会转到之前的另一个屏幕。当我再次最大化它时，它当然会在正确的屏幕上最大化。

所以我的问题是......我怎样才能制作一个表格，当它最大化时，记住它是在哪个屏幕上最大化的？当表单再次打开时，我该如何恢复？

* * *

## 问题的完整解决方案

我接受了答案，该答案对如何在屏幕上显示有很好的提示。但这只是我的问题的一部分，所以这是我的解决方案：

**负载**

1.  首先存储`Bounds`并`WindowState`从任何存储中获取。
2.  然后设置`Bounds`.
3.  确保`Bounds`通过`Screen.AllScreens.Any(ø => ø.Bounds.IntersectsWith(Bounds))`或可见`MdiParent.Controls.OfType<MdiClient>().First().ClientRectangle.IntersectsWith(Bounds)`。
    *   如果没有，那就做吧`Location = new Point();`。
4.  然后设置窗口状态。

**关闭时**

1.  存储`WindowState`。
2.  如果`WindowState`是`FormWindowState.Normal`，则存储`Bounds`，否则存储`RestoreBounds`。

就是这样！=)

## 一些示例代码

所以，正如[Oliver](https://stackoverflow.com/users/57488/oliver)所建议的，这里有一些代码。它需要充实，但这可以作为任何想要的人的开始：

### 持久表单处理程序

负责在某处存储和获取数据。

```
public sealed class PersistentFormHandler
{
    /// <summary>The form identifier in storage.</summary>
    public string Name { get; private set; }

    /// <summary>Gets and sets the window state. (int instead of enum so that it can be in a BI layer, and not require a reference to WinForms)</summary>
    public int WindowState { get; set; }

    /// <summary>Gets and sets the window bounds. (X, Y, Width and Height)</summary>
    public Rectangle WindowBounds { get; set; }

    /// <summary>Dictionary for other values.</summary>
    private readonly Dictionary<string, Binary> otherValues;

    /// <summary>
    /// Instantiates new persistent form handler.
    /// </summary>
    /// <param name="windowType">The <see cref="Type.FullName"/> will be used as <see cref="Name"/>.</param>
    /// <param name="defaultWindowState">Default state of the window.</param>
    /// <param name="defaultWindowBounds">Default bounds of the window.</param>
    public PersistentFormHandler(Type windowType, int defaultWindowState, Rectangle defaultWindowBounds)
        : this(windowType, null, defaultWindowState, defaultWindowBounds) { }

    /// <summary>
    /// Instantiates new persistent form handler.
    /// </summary>
    /// <param name="windowType">The <see cref="Type.FullName"/> will be used as base <see cref="Name"/>.</param>
    /// <param name="id">Use this if you need to separate windows of same type. Will be appended to <see cref="Name"/>.</param>
    /// <param name="defaultWindowState">Default state of the window.</param>
    /// <param name="defaultWindowBounds">Default bounds of the window.</param>
    public PersistentFormHandler(Type windowType, string id, int defaultWindowState, Rectangle defaultWindowBounds)
    {
        Name = string.IsNullOrEmpty(id) 
            ? windowType.FullName 
            : windowType.FullName + ":" + id;

        WindowState = defaultWindowState;
        WindowBounds = defaultWindowBounds;

        otherValues = new Dictionary<string, Binary>();
    }

    /// <summary>
    /// Looks for previously stored values in database.
    /// </summary>
    /// <returns>False if no previously stored values were found.</returns>
    public bool Load()
    {
        // See Note 1
    }

    /// <summary>
    /// Stores all values in database
    /// </summary>
    public void Save()
    {
        // See Note 2
    }

    /// <summary>
    /// Adds the given <paramref key="value"/> to the collection of values that will be
    /// stored in database on <see cref="Save"/>.
    /// </summary>
    /// <typeparam key="T">Type of object.</typeparam>
    /// <param name="key">The key you want to use for this value.</param>
    /// <param name="value">The value to store.</param>
    public void Set<T>(string key, T value)
    {
        // Create memory stream
        using (var s = new MemoryStream())
        {
            // Serialize value into binary form
            var b = new BinaryFormatter();
            b.Serialize(s, value);

            // Store in dictionary
            otherValues[key] = new Binary(s.ToArray());
        }
    }

    /// <summary>
    /// Same as <see cref="Get{T}(string,T)"/>, but uses default(<typeparamref name="T"/>) as fallback value.
    /// </summary>
    /// <typeparam name="T">Type of object</typeparam>
    /// <param name="key">The key used on <see cref="Set{T}"/>.</param>
    /// <returns>The stored object, or the default(<typeparamref name="T"/>) object if something went wrong.</returns>
    public T Get<T>(string key)
    {
        return Get(key, default(T));
    }

    /// <summary>
    /// Gets the value identified by the given <paramref name="key"/>.
    /// </summary>
    /// <typeparam name="T">Type of object</typeparam>
    /// <param name="key">The key used on <see cref="Set{T}"/>.</param>
    /// <param name="fallback">Value to return if the given <paramref name="key"/> could not be found.
    /// In other words, if you haven't used <see cref="Set{T}"/> yet.</param>
    /// <returns>The stored object, or the <paramref name="fallback"/> object if something went wrong.</returns>
    public T Get<T>(string key, T fallback)
    {
        // If we have a value with this key
        if (otherValues.ContainsKey(key))
        {
            // Create memory stream and fill with binary version of value
            using (var s = new MemoryStream(otherValues[key].ToArray()))
            {
                try
                {
                    // Deserialize, cast and return.
                    var b = new BinaryFormatter();
                    return (T)b.Deserialize(s);
                }
                catch (InvalidCastException)
                {
                    // T is not what it should have been
                    // (Code changed perhaps?)
                }
                catch (SerializationException)
                {
                    // Something went wrong during Deserialization
                }
            }
        }

        // Else return fallback
        return fallback;
    }
} 
```

**注意 1：**在加载方法中，您必须查找先前存储`WindowState`的`WindowBounds`和其他值。我们使用 SQL Server，并有一个包含, , (for ), , , , , ,`Window`列的表。因此，对于每个窗口，对于每个用户和机器，您都会有一行带有, , ,和。此外，我们有一个表，它只有一个外键，一个type列和一个type 列。如果有没有找到的东西，我只保留默认值并返回 false。`Id``Name``MachineName``Environment.MachineName``UserId``WindowState``X``Y``Height``Width``WindowState``X``Y``Height``Width``WindowValues``WindowId``Key``String``Value``Binary`

**注意 2：**在 save 方法中，当然与在 Load 方法中所做的相反。为当前用户和机器创建行`Window`，`WindowValues`如果它们不存在。

### 持久表单库

这个类使用前一个类并为其他形式形成了一个方便的基类。

```
// Should have been abstract, but that makes the the designer crash at the moment...
public class PersistentFormBase : Form
{
    private PersistentFormHandler PersistenceHandler { get; set; }

    private bool handlerReady;

    protected PersistentFormBase()
    {
        // Prevents designer from crashing
        if (LicenseManager.UsageMode != LicenseUsageMode.Designtime)
        {
            Load += persistentFormLoad;
            FormClosing += persistentFormFormClosing;
        }
    }

    protected event EventHandler<EventArgs> ValuesLoaded;
    protected event EventHandler<EventArgs> StoringValues;

    protected void StoreValue<T>(string key, T value)
    {
        if (!handlerReady)
            throw new InvalidOperationException();
        PersistenceHandler.Set(key, value);
    }

    protected T GetValue<T>(string key)
    {
        if (!handlerReady)
            throw new InvalidOperationException();
        return PersistenceHandler.Get<T>(key);
    }

    protected T GetValue<T>(string key, T fallback)
    {
        if (!handlerReady)
            throw new InvalidOperationException();
        return PersistenceHandler.Get(key, fallback);
    }

    private void persistentFormLoad(object sender, EventArgs e)
    {
        // Create PersistenceHandler and load values from it
        PersistenceHandler = new PersistentFormHandler(GetType(), (int) FormWindowState.Normal, Bounds);
        PersistenceHandler.Load();
        handlerReady = true;

        // Set size and location
        Bounds = PersistenceHandler.WindowBounds;

        // Check if we have an MdiParent
        if(MdiParent == null)
        {
            // If we don't, make sure we are on screen
            if (!Screen.AllScreens.Any(ø => ø.Bounds.IntersectsWith(Bounds)))
                Location = new Point();
        }
        else
        {
            // If we do, make sure we are visible within the MdiClient area
            var c = MdiParent.Controls.OfType<MdiClient>().FirstOrDefault();
            if(c != null && !c.ClientRectangle.IntersectsWith(Bounds))
                Location = new Point();
        }

        // Set state
        WindowState = Enum.IsDefined(typeof (FormWindowState), PersistenceHandler.WindowState) ? (FormWindowState) PersistenceHandler.WindowState : FormWindowState.Normal;

        // Notify that values are loaded and ready for getting.
        var handler = ValuesLoaded;
        if (handler != null)
            handler(this, EventArgs.Empty);
    }

    private void persistentFormFormClosing(object sender, FormClosingEventArgs e)
    {
        // Set common things
        PersistenceHandler.WindowState = (int) WindowState;
        PersistenceHandler.WindowBounds = WindowState == FormWindowState.Normal ? Bounds : RestoreBounds;

        // Notify that values will be stored now, so time to store values.
        var handler = StoringValues;
        if (handler != null)
            handler(this, EventArgs.Empty);

        // Save values
        PersistenceHandler.Save();
    }
} 
```

差不多就是这样。要使用它，表单只需从 PersistentFormBase 继承。这将自动处理边界和状态。如果应该存储其他任何内容，例如拆分器距离，您将侦听`ValuesLoaded`and`StoringValues`事件并在这些事件中使用`GetValue`and`StoreValue`方法。

希望这可以帮助某人！如果有，请告诉我。另外，如果您认为有什么可以做得更好或什么的，请提供一些反馈。我想学=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T12:41:37.783

没有内置的方法可以做到这一点 - 你必须自己编写逻辑。原因之一是您必须决定如何处理上次显示窗口的监视器不再可用的情况。例如，这在笔记本电脑和投影仪中很常见。[Screen](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen(VS.80).aspx)类具有一些有用的功能来帮助解决此问题，尽管可能难以唯一且一致地识别显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-29T00:30:10.323

我通过编写一个小函数找到了解决您问题的方法，该函数可以测试某个点是否在连接的屏幕上。主要思想来自 [http://msdn.microsoft.com/en-us/library/system.windows.forms.screen(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen(VS.80).aspx) ，但需要进行一些修改。

```
public static bool ThisPointIsOnOneOfTheConnectedScreens(Point thePoint)
    {
        bool FoundAScreenThatContainsThePoint = false;

        for(int i = 0; i < Screen.AllScreens.Length; i++)
        {
            if(Screen.AllScreens[i].Bounds.Contains(thePoint))
                FoundAScreenThatContainsThePoint = true;
        }
        return FoundAScreenThatContainsThePoint;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-13T13:18:54.150

上述解决方案存在一些问题。

在多个屏幕上以及还原屏幕较小时。

It should use **Contains**(...), rather than **IntersectsWith** as the control part of the form might otherwise be outside the screen-area.

I will suggest something along these lines

```
bool TestBounds(Rectangle R) {
    if (MdiParent == null) return Screen.AllScreens.Any(ø => ø.Bounds.Contains(R)); // If we don't have an MdiParent, make sure we are entirely on a screen
    var c = MdiParent.Controls.OfType<MdiClient>().FirstOrDefault(); // If we do, make sure we are visible within the MdiClient area
    return (c != null && c.ClientRectangle.Contains(R));
} 
```

and used like this. (Note that I let Windows handle it if the saved values does not work)

```
bool BoundsOK=TestBounds(myBounds);
if (!BoundsOK) {
    myBounds.Location = new Point(8,8); // then try (8,8) , to at least keep the size, if other monitor not currently present, or current is lesser
    BoundsOK = TestBounds(myBounds);
}
if (BoundsOK) { //Only change if acceptable, otherwise let Windows handle it
    StartPosition = FormStartPosition.Manual;
    Bounds = myBounds;
    WindowState = Enum.IsDefined(typeof(FormWindowState), myWindowState) ? (FormWindowState)myWindowState : FormWindowState.Normal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T13:07:17.590

尝试以恢复（非最大化）状态在其保存的位置生成主窗体，如果最后一个状态已最大化，则将其最大化。

正如 Stu 所说，在这种情况下要小心移除监视器。由于保存的位置可能包含屏幕外坐标（甚至是负坐标），因此您可能会有效地结束和不可见（实际上是屏幕外）的窗口。我认为在加载以前的状态之前检查桌面边界应该可以防止这种情况。

# sql - ORM 或其他东西可以有效地处理带有 order 列的 SQL 表

> ID：495390
> 
> 赞同：6
> 
> 时间：2009-01-30T12:38:59.270
> 
> 标签：sql, list, orm, persistence

我有一个使用 SQL 表的 Java 应用程序，其中包含按顺序列排序的实体的有序列表。我想在列表中间添加/删除内容。现在，我想知道一些持久性框架/orm/you-name-it 是否可以通过批量更新订单列来提供这种功能。

在基本情况下，Hibernate（可能还有其他）提供此功能。问题是对象一次只处理一个，当列表足够大时就会出现问题。另一种解决方案是使用批量 SQL 更新来完成此操作，例如如下所示：

```
UPDATE table SET order_col = order_col + 1 WHERE order_col > 47
INSERT TO table VALUES ('new_id', 'new_description, ..., 47) 
```

数据库引擎可以很快完成，但不受支持。

现在，我知道这种批量更新在考虑对象及其版本控制、脏检查等时不太适合。我仍然会问是否有人有一些好主意，或者是否有一些持久性框架/ORM/你的名字- 它会提供一些帮助。当然，我可以使用自定义 SQL/HQL/... 来做这件事，但想知道是否已经有一些解决方案（我认为其他人之前可以做过类似的事情，甚至将其置于开源之下）。也欢迎与该问题相关的其他好主意=）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T12:43:48.543

我的建议是做两件事：

1.  在你的项目之间选择非常大的增量，比如一百万。这样，您可以将 8,000,000 的项目移动到 7,000,000 之前，只需将其更改为 6,500,000；和
2.  不时地将项目重新排序为批处理作业。

大增量并不能消除进行大量重新订购的问题，但需要进行大量重新订购的可能性极小，并且批处理作业可以根据需要每天/每周/每月重新订购一次。

一次更换一大堆项目只是混乱和自找麻烦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T14:10:51.393

如果你真的想得到一个连续的顺序，你可以这样做：

首先，乘以`sortorder`1000

```
UPDATE testtable SET sortorder = sortorder * 1000 
```

现在进行插入并插入合适`sortorder`的值以将新条目放在正确的位置。

现在使用[ROW_NUMBER](http://en.wikipedia.org/wiki/Select_(SQL)#ROW_NUMBER.28.29_window_function)函数进行表更新并更新值

```
UPDATE testtable
SET sortorder = subq.newsortorder
FROM
  (
  SELECT
    ID as innerID,
    ROW_NUMBER() OVER(ORDER BY sortorder ASC) as newsortorder
  FROM testtable
  ) subq
WHERE subq.innerID = ID 
```

选择 ID 是`innerID`因为更新后的表不能使用别名，否则 ID 列会变得不明确。

这是`sortorder`在按 排序时使用行号更新`sortorder`。

# java - Java 安全 - MSCAPI 提供程序：如何在不弹出密码的情况下使用？

> ID：495392
> 
> 赞同：7
> 
> 时间：2009-01-30T12:39:38.660
> 
> 标签：java, security, cryptography, cryptoapi

我设法在我的应用程序中使用了[Sun 的 MSCAPI 提供](http://java.sun.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunMSCAPI)程序。我现在遇到的问题是它总是弹出一个窗口，要求输入密码，即使我已经在代码中提供了密码。这是一个问题，因为我需要 Web 服务中的加密功能。

这是我现在拥有的代码：

```
String alias = "Alias to my PK";
char[] pass = "MyPassword".toCharArray();

KeyStore ks = KeyStore.getInstance("Windows-MY");
ks.load(null, pass);
Provider p =  ks.getProvider();

Signature sig = Signature.getInstance("SHA1withRSA",p);
PrivateKey key = (PrivateKey) ks.getKey(alias, pass)

sig.initSign(key);
sig.update("Testing".getBytes());
sig.sign(); 
```

这很好用，但是在运行最后一行时，我会弹出一个询问密码的窗口。我该如何防止呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-30T15:00:27.550

MSCAPI 提供程序不支持向 CAPI 提供密码：

> 假定必须提供密码的应用程序支持兼容模式。它允许（但忽略）非空密码。该模式默认启用。[(1)](http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Platform/windows/sun/security/mscapi/KeyStore.java.htm)

要通过 CAPI 设置密码，您必须使用未记录的 KP_KEYEXCHANGE_PIN 或 KP_SIGNATURE_PIN调用[CryptSetKeyParam ，并希望您的底层硬件令牌提供程序支持它。](http://msdn.microsoft.com/en-us/library/aa380272(VS.85).aspx)（它们并非完全没有文档记录——Windows CE 和 Windows Mobile 的文档中提到了它们[(2)](http://msdn.microsoft.com/en-us/library/aa923647.aspx)，它们包含在头文件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T13:31:59.007

我的猜测是Windows正在弹出弹出窗口。

使用证书导入向导再次导入您的密钥，但请确保您没有选中“密码”屏幕上的以下选项。

> [_] 启用强大的私钥保护。如果启用此选项，则每次应用程序使用私钥时都会提示您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-30T18:12:47.820

我解决了这个问题，设置提供者如下：

`signeData = gen.generate(content, ks.getProvider());`

在哪里

`ks`是一个`KeyStore`和

`gen`是一个`CMSSignedDataGenerator`

# jsp - 如何从会话变量中获取内容？

> ID：495412
> 
> 赞同：0
> 
> 时间：2009-01-30T12:53:28.553
> 
> 标签：jsp, session, struts, javabeans

我的情况：

在我的 jsp 网站上，我展示了一张表格。例如，当有人单击一行时，该行必须用其他背景颜色标记。也可以标记多于一行。有两件事很重要。首先：我记住标记了哪些行。第二：按什么顺序。

我的想法是：

我有一个 ArrayList 并将所有行 ID 放入其中。所以我解决了这两个问题。现在我将此 ArrayList 放入会话中以供下次单击和 jsp 文件的行 ID（ req.getSession().setAttribute(req.getParameter("rowID") , ""+arrayList.size()); ）。

我在jsp文件中的问题：

我现在不知道所谓的会话变量名。

如果这个 rowId 已经点击了？..

我只有 bean 名称。如果必须准确地标记此行，我如何从会话中获取内容？

通常我设置一个会话变量： req.getSession.setAttribut("printView", Boolean.TRUE) 并获得一个会话变量：

我使用 struts、formbeans 和 jsp。

对不起，我的英语不好，这个问题对我来说太难了。所以我现在不能更好地宣布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T13:26:30.140

让我们首先分析一下您在会话中存储的内容：

```
req.getSession().setAttribute(req.getParameter("rowID") , ""+arrayList.size()); 
```

**req.getParameter("rowID")**返回请求参数的字符串值。如果您的页面链接是**yourPage.jsp?rowID=3**它的值将是**"3"**。该值将用作调用方法**HttpSession#setAttribute(String, Object)**的键。

**""+arrayList.size()**只是您尝试在其中存储单击行的 ID 的**arrayList大小的字符串表示形式**

回答您的问题“我现在不知道所谓的会话变量名称。” 无法给出，因为它取决于**rowID**请求参数的值。

如果要检查会话中的内容，只需遍历其属性：

```
for (Enumeration elem : req.getSession().getAttributeNames()) {
    String name = elem.nextElement();
    System.out.println(name + " : " + req.getSession().getAttribute(name));
} 
```

如果您不将 arrayList 存储在会话中，则之前的代码可能会返回如下内容：

```
1 : 0
5 : 0
1 : 0 
```

正如 Vinegar 建议的那样，我接下来会做：

```
String clickedRowId = req.getParameter("rowID");
List<String> arrayList = (List)req.getSession().getAttribute("clickedRows");
if (!arrayList.contains(clickedRowId)) {
    arrayList.add(clickedRowId);
}
req.getSession().setAttribute("clickedRows", arrayList); 
```

您的 arrayList 将保存单击行 ID 的列表，它们的索引将告诉您它们的时间顺序。

注意：当然有更好和更可扩展的方法来实现这一点。无论如何，实施您的解决方案然后寻找更好的解决方案是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T13:47:04.937

非常感谢。如何评估会话中的jsp文件中的arryList？

```
<datagrid:tableEx ...>
<c:if test="${ arrayList.contains(bean.rowID)}">
    <div id="tableheader">
                 <datagrid:column property="bean.rowID" ... bgcolor="#BDC6DD"/>
                 <datagrid:column ... bgcolor="#BDC6DD" />
                 <datagrid:column ... bgcolor="#BDC6DD" />
                  ...
    </div>
</c:if>
<c:if test="${!arrayList.contains(bean.rowID)}">
    <div id="tableheader">
                 <datagrid:column property="bean.rowID"/>
                 <datagrid:column ... />
                 <datagrid:column ... /> 
            </div>
</c:if> 
```

# eclipse - 为什么我不能在eclipse中搜索maven项目

> ID：495418
> 
> 赞同：2
> 
> 时间：2009-01-30T12:55:00.423
> 
> 标签：eclipse, maven-2, eclipse-plugin, m2eclipse

我正在使用 m2Eclipse 插件 ( [http://m2eclipse.sonatype.org/](http://m2eclipse.sonatype.org/) ) 来处理 Eclipse 中的 maven 模块。在为依赖管理和嵌套模块启用项目后，我无法再对项目进行“文件搜索”。搜索立即结束，搜索窗口显示“0 个匹配项在空范围内”。

有什么想法可以让搜索再次工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T13:03:11.607

看起来插件会将任何非 java 文件夹标记为“派生”，这就是它被搜索忽略的原因。右键单击非 java 文件夹并取消选中复选框修复了此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T15:23:44.220

@slashnick 回答的小补充：

在 Eclipse 的“文件搜索”对话框中，您还可以使用“考虑派生资源”复选框来搜索那些“派生”资源。如果您不想仅仅为了搜索而更改多个资源的属性，这可能会更方便。

# python - 关于python中全局变量的困惑

> ID：495422
> 
> 赞同：11
> 
> 时间：2009-01-30T12:56:57.707
> 
> 标签：python, global-variables, python-import

我是 python 新手，所以请原谅可能是一个非常愚蠢的问题。

基本上，我有一个名为 _debug 的全局变量，用于确定脚本是否应该输出调试信息。我的问题是，我不能在与使用它的脚本不同的 python 脚本中设置它。

我有两个脚本：

```
one.py:
-------

def my_function():
  if _debug:
    print "debugging!"

two.py:
-------

from one import *
_debug = False

my_function() 
```

运行 two.py 会产生错误：

```
NameError: global name '_debug' is not defined 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-30T14:01:27.200

恐怕除了前导下划线之外还有更多问题。

当您调用 时`my_function()`，它仍然不会`debug`在其命名空间中包含您的变量，除非您从`two.py`.

当然，这样做意味着你最终会得到循环依赖（`one.py -> two.py -> one.py`），`NameError`除非你重构各种东西的导入和声明位置，否则你会得到 s。

一种解决方案是创建一个简单的第三个模块，它定义这样的“常量”，可以从任何地方安全地导入，例如：

```
constants.py
------------
debug = True

one.py
------
from constants import debug
#...

two.py
------
from constants import debug
#... 
```

但是，我建议只为此使用内置的[日志记录](http://docs.python.org/library/logging.html#module-logging)模块 - 为什么不呢？它易于配置、使用更简单、可靠、灵活且可扩展。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T13:07:48.340

以下划线开头的名称不导入

```
from one import * 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-30T13:57:06.023

您还可以使用该`__debug__`变量进行调试。如果解释器不是以 -O 选项启动的，则它是正确的。assert 语句也可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T14:45:32.323

A bit more explanation: The function `my_function`'s namespace is always in the module `one`. This means that when the name `_debug` is not found in `my_function`, it looks in `one`, not the namespace from which the function is called. Alabaster's answer provides a good solution.

# python - 摆脱 Python 中的 '\n'

> ID：495424
> 
> 赞同：0
> 
> 时间：2009-01-30T12:58:46.267
> 
> 标签：python

如何摆脱行尾的 '\n' ？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-01-30T13:00:09.273

```
"string \n".strip(); 
```

或者

```
"string \n".rstrip(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-30T13:10:51.123

如果正如 Rolf 在他的评论中建议的那样，您想要打印文本而不自动附加换行符，请使用

```
print "foo", 
```

注意结尾的逗号。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-30T15:03:03.410

去掉行尾的“\n”：

```
>>> "string \n".rstrip("\n")
'string ' 
```

去掉行尾的所有空格：

```
>>> "string \n".rstrip()
'string' 
```

按行拆分文本，去除尾随换行符：

```
>>> "line 1\nline 2 \nline 3\n".splitlines()
['line 1', 'line 2 ', 'line 3'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-30T23:59:16.777

在 Python 3 中，要打印不带换行符的字符串，请将结尾设置为空字符串：

```
print("some string", end="") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-30T14:25:59.617

如果您想要一种稍微复杂和明确的输出方式：

```
import sys
sys.stdout.write("string") 
```

然后，您将负责自己的换行符。

# rest - RESTful URL 设计 - 如何在参数之间使用 OR 进行查询

> ID：495426
> 
> 赞同：13
> 
> 时间：2009-01-30T12:59:32.100
> 
> 标签：rest

您将如何设计一个 RESTful 查询来支持参数之间的 OR 操作数。假设我的资源有两个字段 field1 和 field2。您将如何设计 URL 以启用以下查询：

“获取我的资源，其中 field1=x 或 field2=y”

在 REST 中设计查询非常简单，但我只看到支持查询字段之间的 AND 的查询。例如 /myresource?field1=x&field2=y

一种可能的解决方案是提供一个带有自由文本 where 部分的单个查询参数，例如：

获取 /myresource?q={field1=x 或 field2=y}

但这会使客户端解析、扩展或减少过滤字段变得更加复杂。

你有什么建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-30T13:19:12.870

查询参数与定义无关，它们只是惰性参数——如何处理它们取决于你。对于 OR 搜索，我建议：

```
GET /myresources?field1=x&field2=y&inclusive=true 
```

*如果*您想默认为 AND 关系（合理），您想要的任何其他扩展当然是可能的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T17:30:53.263

对于它的价值，SO 使用以下格式来查找具有多个标签的问题：

`http://stackoverflow.com/questions/tagged?tagnames=jquery or css or asp.net or php or web-development or svn`

将它们与标签本身的有效字符分开`,`或`;`假设它们不是有效字符是完全合理的。搜索引擎通常使用关键字本身`q=keyword1+keyword2`并对其进行 url 编码`+`，如果这是针对搜索 URI，我建议您这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-30T18:09:49.870

这取决于

如果您希望始终使用 condition1 或 condition2 访问您的资源，您可以这样对待它们...

但是如果你想同时拥有这两种可能性（使用 AND 或 OR），你将不得不实现类似 annakata 所说的东西，一个指示如何将条件添加到 que 查询的参数......

如果您想采用更灵活的方法（ cond1 和 cond2 或 cond3 ），我认为除了用自由文本实现您自己的查询之外别无选择，就像您说的那样......

另一方面，如果您总是查询同一个字段（我认为不是这种情况，因为您指定了 field1，field2），您可以使用 allemb 的方法，只需使用一些字符（“，”或“;”）来分隔价值观...

就个人而言，我开发了某种微查询语言，比如

field1 = val1..val2（field1 在 val1 和 val2 之间） field1 = >val2（field1 > val2） field1 = val1;val2（field1 = val1 或 field1 = val2） filed1 = *val1*（field1 包含 val1）

field1 = val1..val2&>val3 ( val1 和 val2 之间的 field1 和 field1 > val3...

反正你懂这个意思

但是然后我将每个条件都与 and 结合起来，所以这只是 waht aleemb 所说的扩展示例......

# qa - 您的 QA 团队有效吗？

> ID：495443
> 
> 赞同：6
> 
> 时间：2009-01-30T13:07:46.140
> 
> 标签：qa

您的 QA 团队是否有效。我发现我遇到的许多 QA 人员更多是验证者和软件破解专家。

我所说的验证者的意思是，他们逐步完成所提供的所有场景，基本上是遍历应用程序并确保它完成预期的工作。

我所说的破坏者的意思是，他们验证但他们也努力寻找破坏软件并发现缺陷的场景。

你的发现相似吗？

关于破解软件的历史记录 在 80 年代 IBM 内部有一个名为 Black Team 的团队。他们有一种文化，当他们破坏软件以鼓励识别缺陷时，他们会说他们已经“成功”了。当他们未能发现/识别软件中的任何故障时，他们认为他们的工作是“失败的”。另一方面，他们“失败”的结果是非常可靠的软件......

还有一本书：James Whittaker 的《如何破解软件：测试实用指南》

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-30T13:19:50.013

在许多情况下，如果 QA 这样做，我会很高兴。我的经验是，如果质量保证存在，它通常由对业务最了解的低薪代理招聘组成。做好 QA 很难，就像编程很难一样，它很少作为开发过程的关键部分来获得资源或管理。

另一方面，我合作过的最好的 QA 有 20 多张 PC 幽灵图像，并且知道如何处理它们，他们是 DB 忍者，他们也可以与最终用户交流。有一个具有广泛硬件的机器测试平台。领导力很强，知道什么时候该推，什么时候该放手，她了解客户，她知道开发人员的想法。我们很快了解到，我们的足够好标准与客户不同。不幸的是，该产品仍然是一堆破旧的垃圾，这是生意，但它很少崩溃并且客户喜欢它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-30T13:13:20.980

我实际上在一个测试团队中，我们所做的很多事情都是验证和软件破解，但这只是其中的一部分。我们还维护产品的自动化测试，以便在开发周期的早期发现错误，并与开发合作运行大型可扩展性测试，以突破我们产品的极限并找到可以更新的区域以允许进一步的可扩展性未来。

我认为我们在将最好的产品尽可能交到用户手中的目标方面非常有效，简单的验证是该过程的重要组成部分。

另外......我认为质量保证在很多方面都受到他们提供的资源的限制，我们很幸运能够大量使用开发工具、大型虚拟环境（以及体面的基于硬件的机器） )，我们有足够的自由来实际试验产品。

一些测试必然是“运行这些测试用例”类型的交易，但这只是其中的一部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-17T18:19:19.600

我相信我们的 QA 团队是有效的。但是，我们不雇佣测试人员，我们雇佣 QA 分析师

*   利用为项目提供的业务需求和技术设计文档编写他们自己的测试用例。QA 尽可能早地参与开发周期。
*   对业务有深入的了解。
*   了解单元测试、功能测试、系统集成测试、回归测试等之间的区别。换句话说，他们已经努力研究 QA 方法。
*   定期对系统进行回归测试。这确保了新项目不会在工作代码中引入错误。
*   得到开发团队的尊重，以及与开发工资相当的薪水。因为 QA 尊重开发团队，所以开发人员会很快就某些代码更改向 QA 征求意见，特别是因为 QA 比特定开发人员对整个业务有更好的一般知识，后者几乎总是专注于某个领域。

由一组使用开发人员提供的测试用例并且不掌握 QA 方法或业务领域的手动测试人员组成的 QA 团队可能不会那么有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-30T13:25:59.487

我认为这是一个广泛的概括（并且有点反作用于在 QA 工作的人）。我会问你对 QA 有什么期望和要求？

恕我直言，软件验证是您想要从 QA 团队获得的，包括：

0) 验证所有需求均已实现 1) 验证所有需求均已正确实现 2) 报告与需求的任何偏差 3) 提供文档以重现与需求的偏差 4) 为产品提供可扩展性、压力和容量、容错支持

Sf 这意味着称该组为“软件破坏者”和“验证者”，就这样吧。在我的工作中，运行不良的软件可能会导致人类健康后果。这与我、我的团队或 QA 团队无关，它与使用我编写的软件的人有关。这真的是关于态度。

关于“打破”事情的历史记录。80 年代 IBM 内部有一个团队，叫做 Black Team。他们有一种文化，当他们破坏软件以鼓励识别缺陷时，他们会说他们已经“成功”了。当他们未能发现/识别软件中的任何故障时，他们认为他们的工作是“失败的”。另一方面，他们“失败”的结果是非常可靠的软件......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-30T13:13:56.500

我不想成为一名测试员。

QA 与销售和技术支持有很多共同点，因为如果你知道的足够多，能够真正擅长你的工作，你就不会再做那份工作了。

想一想：您曾经拨打过技术支持热线吗？这是一份不值得羡慕的工作（我很久以前做过一次）。基本上你花 90% 的时间为你无法控制的事情道歉（或者只是浪费你的时间试图让一些东西在 8 岁的硬件上工作，因为有人太便宜了，不能花几百美元买一台新电脑，但是那是另一个故事）。

在我上一份工作中，我们的 QA 人员流动率很高。老实说，他们至少要在那里待上 6 个月，我才可能费心得知他们的名字。在此之前，他们很可能会继续前进，根本不值得投入时间来培训他们（作为开发人员而言）。

不要误会我的意思：有些很好，但它们之间的差距很小，因为如果它们很好，他们就会继续成为 BA 或其他人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-30T13:14:37.607

在破解软件没有。我们的大多数质量检查人员都不擅长这一点。是的，在有效时，他们会发现我们错过的错误，并就我们如何能够在对他们没有意义的情况下改进 UI 提出建议。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-30T13:16:56.387

我们的 QA 团队做了一些破坏和大量验证，我认为这两者都是 QA 的基本点。它们是您的代码和生产环境或 RTM 之间的最终严格测试点。

虽然他们不会主动尝试破坏应用程序，但他们非常擅长做用户会尝试做的事情。在某些时候，这确实会破坏应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T13:17:19.287

我在一个 3 人开发小组工作。我们每个人都必须进行测试，并且通常留给我们自己的测试设备（我们主要做网络应用工作）。这不是我满意的解决方案。有时用户会参与测试。我有几个非常敏锐和可靠的用户，但我从不打算从其他人那里获得意见。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-30T13:41:38.223

有效的？你怎么衡量呢？# 发现了多少个错误？如果代码真的很可靠怎么办？如果他们只发现一个错误，但这是一个非常重要的错误怎么办？您是否将它们归咎于确实从裂缝中溜走的虫子？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-17T18:25:58.523

在我们这里，这些只是通过预先描述的场景点击应用程序的学生。没有主动测试，没有兴趣，除了给定的东西之外什么都没有。事实上，做最终测试的是我（开发人员）、我们的产品经理和可悲的客户。

我发现我可能是唯一一个愿意做一些非标准的事情只是为了看看会发生什么的人。我碰巧通过做一些几年来没有人想过要做的事情，在相当使用的软件部分中发现错误。我在公司里只待了几个月。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-17T17:29:53.230

我们组织只有大约一年半的正式质量保证团队。现在我们正在尝试建立一个配置管理组（我们现在只有一个人）。对于一个人来说，所有的开发经理都希望我们能有更多的 QA 人员而不是配置管理人员，因为我们发现 QA 对我们来说非常有价值，而配置管理只会导致项目在我们等待有人发布新代码时落后在发布时间表上而不是在它准备好时。开发人员在测试自己的代码时存在盲点（我们知道它应该如何工作），优秀的 QA 人员总能找到开发人员遗漏的东西。

我认为获得优秀 QA 人员的最大问题是薪水往往偏低。如果技术人员的收入已经超过了 QA 人员的收入，那么他或她就没有理由转向该职业道路。因此，他们最终选择的是刚毕业或没有技术背景的人。这些人正是没有知识来建立良好的自动化测试或商业头脑来理解用户需要软件如何工作的人。（我也看到业务分析师对最终产品的质量也很重要。我刚刚看到其中一个年薪 30K 的职位空缺。很抱歉，但要确定的人对公司功能至关重要的软件的要求需要比接待员获得更多报酬。经理们想知道为什么软件质量会这么低。糟糕的需求 = 几乎 100% 的时候都是糟糕的软件。）

# javascript - jquery确认框

> ID：495447
> 
> 赞同：7
> 
> 时间：2009-01-30T13:09:49.350
> 
> 标签：javascript, jquery, popup, dialog

我正在寻找一个可以由多个小部件轻松使用的通用确认框，但我遇到了范围问题，并希望有一种更清晰的方式来做我想做的事情。

目前我有以下 -

```
(function() {

    var global = this;
    global.confirmationBox = function() {
    config = {
        container: '<div>',
        message:''
    }
    return {
        config: config,
        render: function(caller) {
            var jqContainer = $(config.container);
            jqContainer.append(config.message);
            jqContainer.dialog({
                buttons: {
                    'Confirm': caller.confirm_action,
                     Cancel: caller.cancel_action
                }
            });
        }
    }
} //end confirmationBox
global.testWidget = function() {
    return {
        create_message: function(msg) {
            var msg = confirmationBox();
            msg.message = msg;
            msg.render(this);
        },
        confirm_action: function() {
            //Do approved actions here and close the confirmation box
            //Currently not sure how to get the confirmation box at
            //this point
        },
        cancel_action: function() {
            //Close the confirmation box and register that action was 
            //cancelled with the widget. Like above, not sure how to get
            //the confirmation box  back to close it
        }
    }
}//end testWidget
})();
//Create the widget and pop up a test message
var widget = testWidget();
widget.create_message('You need to confirm this action to continue'); 
```

目前我只是想做一些简单的事情，比如从小部件内关闭盒子，但我认为我已经把自己的大脑圈在了圈子里，知道什么。有没有人想帮我清理一下我困惑的大脑？

干杯，山姆

**结果代码：**

我认为它可能对那些在以后找到这个线程并寻找类似问题的解决方案的人有用，以查看我在这里得到的有用答案所产生的代码。

事实证明，最终它非常简单（就像大多数令人沮丧的思维纠葛一样）。

```
 /**
 * Confirmation boxes are used to confirm a request by a user such as
 * wanting to delete an item
 */
 global.confirmationBox = function() {
    self = this;
    config = {
        container: '<div>',
        message: '', 
    }
    return {
        set_config:config,
        render_message: function(caller) {
            var jqContainer = $(config.container);
            jqContainer.attr('id', 'confirmation-dialog');
            jqContainer.append(config.message);
            jqContainer.dialog({
               buttons: {
                   'Confirm': function() {
                       caller.confirm_action(this);
                    },
                   Cancel: function() {
                       caller.cancel_action(this);
                   }
               }
           });
        }
    }
 } // end confirmationBox

 global.testWidget = function() {
    return {
        create_message: function(msg) {
            var msg = confirmationBox();
            msg.message = msg;
            msg.render(this);
        },
        confirm_action: function(box) {
            alert('Success');
            $(box).dialog('close'); 
        },
        cancel_action: function(box) {
            alert('Cancelled');
            $(box).dialog('close'); 
        }
    }
}//end testWidget 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-31T13:32:37.447

您可以将 jqContainer 传递给确认/取消函数。

或者，将 jqContainer 分配为调用者的属性。由于确认/取消函数是作为调用者的方法调用的，因此它们可以通过`this`. 但这限制了您只能跟踪每个小部件的一个对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T13:32:43.717

尝试这样的事情：

```
(function() {

    var global = this;
    /*****************This is new****************/
    var jqContainer;

    global.confirmationBox = function() {
    config = {
        container: '<div>',
        message:''
    }
    return {
        config: config,
        render: function(caller) { 

            // store the container in the outer objects scope instead!!!!
            jqContainer = $(config.container);

            jqContainer.append(config.message);
            jqContainer.dialog({
                buttons: {
                    'Confirm': caller.confirm_action,
                     Cancel: caller.cancel_action
                }
            });
        }
    }
} //end confirmationBox
global.testWidget = function() {
    return {
        create_message: function(msg) {
            var msg = confirmationBox();
            msg.message = msg;
            msg.render(this);
        },
        confirm_action: function() {
            //Do approved actions here and close the confirmation box
            //Currently not sure how to get the confirmation box at this point

            /*******Hopefully, you would have access to jqContainer here now *****/

        },
        cancel_action: function() {
            //Close the confirmation box and register that action was 
            //cancelled with the widget. Like above, not sure how to get
            //the confirmation box  back to close it
        }
    }
}//end testWidget
})();
//Create the widget and pop up a test message
var widget = testWidget();
widget.create_message('You need to confirm this action to continue'); 
```

如果这不起作用，请尝试将回调（confirm_action、cancel_action）定义为对象的私有成员。但他们应该能够访问您的主要对象的外部范围。

# c++ - 取消 DeferWindowPos

> ID：495452
> 
> 赞同：5
> 
> 时间：2009-01-30T13:12:21.107
> 
> 标签：c++, windows, mfc

我正在使用 DeferWindowPos 功能进行一系列窗口大小调整。假设我已经打开了 DeferWindowPos 句柄，并调用了几次 DeferWindowPos，现在我想取消一切：不调用 EndDeferWindowPos。我尝试了 CloseHandle(hDWP)，但它不起作用（崩溃）。如果我只是从我的函数返回，我认为它会泄漏一个句柄。是否可以在不调用 EndDeferWindowPos 的情况下终止 DeferWindowPos？

```
// Initialize
HDWP hDWP = BeginDeferWindowPos( ... )

for( ... )
{  
   // Calculate new rectangle
   CRect dcNew;
   ...
   // Oh,now I want to return from my function, I want to cancel everything

   // Accumulate
   hDWP = DeferWindowPos( hDWP, hWnd, 0, 
                rcNew.left, 
                rcNew.top, 
                rcNew.Width(), 
                rcNew.Height(),
                SWP_NOZORDER );
}

// Finally
BOOL bResult = EndDeferWindowPos( hDWP ); 
```

如果这不可能，我将简单地将它们累积在一个临时向量中，并在最后调用 Defer 的东西，当我确定我想要全部完成它们时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T13:28:24.460

我看到的对任何类型的“中止”功能的唯一引用是：

> 如果多窗口位置结构中的任何窗口设置了 SWP_HIDEWINDOW 或 SWP_SHOWWINDOW 标志，则不会重新定位任何窗口。

这是从[这里来](http://msdn.microsoft.com/en-us/library/ms632672(VS.85).aspx)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T15:10:48.780

*“如果这不可能，我会简单地将它们累积在一个临时向量中，并在最后调用 Defer 的东西，当我确定我想要全部完成时。”*

**这将是正确的解决方案。**您对在和`BeginDeferWindowPos`之间重新定位哪些窗口犹豫不决的论据是什么？这似乎更多地与线程问题有关，您可以使用适当的锁定来解决该问题。`DeferWindowPos``EndDeferWindowPos`

[Arkadiy](https://stackoverflow.com/a/495486/590790)的回答并没有“取消”任何事情。据我了解[Win32 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632672(v=vs.85).aspx)，*您根本无法将显示/隐藏操作与重新定位操作结合起来*。换句话说，**您不取消操作**，显示/隐藏操作只是优先，而这些操作将被执行。

我将显示/隐藏和重新定位封装在一个托管库中：[框架类库扩展](https://github.com/Whathecode/Framework-Class-Library-Extension)。

具体`RepositionWindows()`函数位于[Whathecode.System.Windows.WindowManager](https://github.com/Whathecode/Framework-Class-Library-Extension/blob/master/Whathecode.System/Windows/WindowManager.cs)中，它负责显示/隐藏和重新定位。

```
/// <summary>
///   Reposition a set of windows in one operation.
///   TODO: Handle any scenarios where repositioning windows fails.
/// </summary>
/// <param name="toPosition">The windows to reposition.</param>
/// <param name="changeZOrder">
///   When true, the windows's Z orders are changed to reflect the order of the toPosition list.
///   The first item in the list will appear at the top, while the last item will appear at the bottom.
/// </param>
public static void RepositionWindows( List<RepositionWindowInfo> toPosition, bool changeZOrder = false )
{
    bool changeVisibility = toPosition.Any( w => w.HasVisibilityChanged() );
    if ( changeVisibility )
    {
        RepositionWindows( toPosition, false, true );
    }
    RepositionWindows( toPosition, changeZOrder, false );
} 
```

# tomcat - Windows 下的 Apache Tomcat：更改 webapps 默认目录

> ID：495457
> 
> 赞同：12
> 
> 时间：2009-01-30T13:14:37.700
> 
> 标签：tomcat, web-applications

我正在使用 Ant 部署我的 Java 应用程序。不幸的是，由于 Vista，我在本地机器上的测试部署不起作用。Program Files 方向受保护，我不想以管理员身份启动 Ant 或 Eclipse。所以我有了将我的 webapps 文件夹移动到工作区子文件夹的想法，这样我也可以在 Ant 中使用相对路径。

解决方案似乎是修改 server.xml 中的 Host 元素。对于 Linux，这不是一个交易：

```
 <Host name="localhost"  appBase="/path/to/webapps"
        unpackWARs="true" autoDeploy="true"
        xmlValidation="false" xmlNamespaceAware="false"> 
```

但是对于 Windows，我做错了。我尝试了我能想象到的所有可能的组合，比如：

```
 C://Users//maerch//Workspaces//Tomcat6.0_webapps
      C:/Users/maerch/Workspaces/Tomcat6.0_webapps
      C:\Users\maerch\Workspaces\Tomcat6.0_webapps
      C:\\Users\\maerch\\Workspaces\\Tomcat6.0_webapps
      C://Users//maerch//Workspaces//Tomcat6.0_webapps\\
      C:/Users/maerch/Workspaces/Tomcat6.0_webapps/
      C:\Users\maerch\Workspaces\Tomcat6.0_webapps\
      C:\\Users\\maerch\\Workspaces\\Tomcat6.0_webapps\\ 
```

路径也是正确的，但它不起作用。日志文件中也没有错误消息，浏览器也没有显示 404 消息或其他任何内容。只是一个没有标题的白页等等。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-30T16:15:01.860

我与 Vista 有非常相同的安全问题，我通过在“Program Files\Apache Software Foundation\Tomcat XYZ”文件夹中为“用户”组提供“完全控制”访问级别来解决它。

它为我解决了 tomcat 的部署问题以及关于启动 tomcat 作为服务的问题。当然，您可以更严格地分配权限（每个部署用户组或每个用户）。IMO 它比重新配置 tomcat 更快。

**关于您的原始问题如何在 Windows 下更改 ${catalina.home} 之外的路径：**

这与您必须在 *nix 上完成它非常相同：

```
 <Host name="localhost"  appBase="/c:/webapps2"
        unpackWARs="true" autoDeploy="true"
        xmlValidation="false" xmlNamespaceAware="false"> 
```

appBase 中提到的文件夹中有 ROOT 文件夹吗？该方法在Tomcat 6.0下测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T13:51:14.367

以下应该在 Windows 中工作：

```
C:/Users/maerch/Workspaces/Tomcat6.0_webapps/
/Users/maerch/Workspaces/Tomcat6.0_webapps/ 
```

Windows 还支持 Unix 的斜杠 (/)，因此最好使用它而不是 Windows 的 (\)。此外，Windows 的“默认根”是 C:，因此您不需要在绝对路径中使用它。

我不认为这是路径的问题。也许您可以尝试使用相对路径：

```
"../../../Users/..." 
```

将 Tomcat 安装在您具有完全访问权限的目录中也可能是个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-09T13:17:27.627

用于窗户

appBase="c://webapps2"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-20T06:27:44.153

如果您将相同的 webapps 目录复制到另一个位置并更改 server.xml 文件中的路径会怎样。如果我们这样做，那么我绝对相信我们不会有任何问题，因为每当 webapps 需要部署应用程序时，它都会有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-21T10:34:24.030

我在 Apache tomcat 8.5 版中尝试过，并且简单地使用`appBase="c:\path\to\webapps"`无缝工作

# sharepoint - 对象模型权限

> ID：495459
> 
> 赞同：2
> 
> 时间：2009-01-30T13:15:14.937
> 
> 标签：sharepoint, sharepoint-2007

我正在尝试确认我对权限的发现。

为了从控制台应用程序或 WinForm 应用程序访问 SharePoint 对象模型，运行该应用程序的用户必须对相关 Web 应用程序的内容数据库具有 db_admin 权限。

为了在 ASP.NET 应用程序中使用 Microsoft.SharePoint.Administration（如调用 SPFarm.Local.Solutions.Add），必须满足以下条件：

*   调用必须使用 RunWithElevatedPrivileges 包装，如下所示：

SPSecurity.RunWithElevatedPrivileges(delegate() { 运行代码 } );

*   访问 ASP.NET 页面的用户必须是 Farm Adminstrators Group 的一部分（该页面在 _layouts 下运行）

*   相关 Web 应用程序的应用程序池身份中的用户也必须在农场管理员组中

**这些信息看起来正确吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T13:29:42.273

*编辑：与迈克尔的评论相反，我假设这个应用程序不会在 SP 场内运行。*

我根本不推荐这种方法，因为它是一种不受支持的使用 SharePoint OM 的方法。

您最好编写一个位于 SP 场并使用 OM 的 Web 服务，然后访问 Web 服务方法以执行您所需的功能。

您还可以查看开箱即用的共享点 Web 服务。

RunWithElevatedPrivileges 在您的场景中不起作用我不认为因为它需要一个基本的 indetity 来回退，在 SP 场上执行的代码的情况下是 SP 应用程序池标识，通常是一个场管理员帐户。

我很高兴在所有这些问题上得到纠正，但在我的环境中，投资于非标准和不受支持的问题解决方法当然是不明智的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T16:40:34.727

是的，但是在 Web 服务代码中，您使用 RunWithElevated Privileges 调用功能代码，这会绕过您运行 Web 服务的身份，而是使用 SPFarmAdmin 用户来执行代码。

或者，将 Web 服务托管在使用与中央管理站点相同的域帐户的应用程序池中，并允许匿名访问 Web 服务。这仅对内部使用是安全的，并且意味着 Web 服务始终具有提升的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T13:48:48.270

是的，Web 服务需要适当的访问权限，但是使用本地运行的 Web 服务更容易控制。

但是，如果您说应用程序始终在服务器上运行，那么使用 RunWithElevatedPrivileges 将解决任何权限问题，因为您实际上是以 SPFarmAdmin 运行该代码（只要正确配置了应用程序池标识）。

注意：您可以将此方法与定制的 Web 服务或客户端应用程序（例如控制台应用程序或 Windows 窗体）一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T15:05:56.863

抱歉，业余爱好者，我从未见过你回复。

如果您使用 RunWithElevatedPermissions，那么 Web 服务以哪个用户身份运行并不重要，因为您实际上是在模拟场管理员帐户。

您还可以在 Web 服务中进行自己的模拟，并模拟您希望的任何用户。

Essentially if the web service is running within a given application pool then the web service will run under the indentity which the app pool runs as. Does this clarify things?

# sql - 通过数据库链接描述？

> ID：495465
> 
> 赞同：12
> 
> 时间：2009-01-30T13:18:13.467
> 
> 标签：sql, oracle

我试图`DESCRIBE`通过数据库链接执行命令，但这是返回消息：

```
DESCRIBE <table>@<database>;
ERROR:                               
------------------------------------ 
ERROR: object <table> does not exist 

1 rows selected 
```

这张桌子上的 A`SELECT`效果很好。

**Oracle 是否允许`DESCRIBE`通过数据库链接？**

我正在使用 Oracle SQL Developer 1.5.1。

编辑：

还有另一种描述表格的选项吗？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-30T13:28:48.093

你可以对[all_tab_columns](http://download.oracle.com/docs/cd/B28359_01/server.111/b28320/statviews_2091.htm)表做一些事情来获取一些表信息。

```
select column_name, data_type from all_tab_columns where table_name = 'TABLE_NAME'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T13:22:46.593

我认为 DESCRIBE 是一个 SQL*Plus 功能。见[这里](http://www.ss64.com/ora/desc.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-30T21:41:24.340

获取远程服务器上表的描述的最简单方法是：

```
CREATE OR REPLACE VIEW TMP_VIEW AS SELECT * FROM TABLE_A@SERVER
/
DESCRIBE TMP_VIEW
/ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-01T08:02:23.490

如果您从 all_tab_columns 中为 DBLink 上存在的该表选择元数据，它将提供该表的描述。例如：

select * from all_tab_Columns@dblink where table_name='ASDF' and owner='XYZ';

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T13:42:43.260

您似乎正在使用`PL/SQL Developer`.

`DESCRIBE`不是 SQL 命令，它是一个查询工具别名，可以转换为对系统表的一系列查询。

`PL/SQL Developer`不能描述来自远程数据库的表，而本机`SQL*Plus`可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T13:32:11.910

我现在无法检查它，但也许 select * from v$tables@remotedb 没有提供类似的信息？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-01-13T16:42:03.533

在 PL/SQL Developer 中，您可以右键单击表文件夹中的表名，然后单击 describe...，这与本机 SQL plus 中的 describe 命令的结果相同。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-12-17T22:36:10.477

使用 Oracle SQL Developer 我能够使用 DESCRIBE 来显示远程表的定义。但是，我不得不使用符号

描述 schema.table@database

# ruby-on-rails - 使用 Rails 让事情在特定时间发生

> ID：495467
> 
> 赞同：1
> 
> 时间：2009-01-30T13:19:37.177
> 
> 标签：ruby-on-rails, asynchronous, backgroundworker

就像浏览器游戏一样。用户建造建筑物，并为特定日期/时间设置计时器以完成建造并生成建筑物。

我想象有一个像恶魔这样的东西，但那会如何工作呢？对我来说，旋转+轮询似乎不是要走的路。我查看了[async_observer](http://async-observer.rubyforge.org/)，但这适合这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T16:53:23.623

如果您只需要拥有的玩家可以看到该事件，那么模型可以按需报告其更新状态，我们完成了，继续前进，这里没有什么可看的。

另一方面，如果它需要在计划创建时对任何人都可见，那么问题就更有趣了。

我会说你需要两件事。一个队列，您可以在其中放置定时事件（数据库表会很好）和一个后台进程，无论是连续运行还是频繁重新启动，它都会提取自上次执行以来计划发生的事件（或者那些即将发生的事件，我想）和行动他们。

查看Rails wiki 上[的选项列表](http://wiki.rubyonrails.org/rails/pages/HowToRunBackgroundJobsInRails)，似乎还没有一个真正的解决方案。让我们希望其中一个符合要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T21:35:28.807

我刚刚为我正在开发的 PBBG 做了这件事（Big Villain，你可以在 MadGamesLab.com 上看到正在进行的工作）。无论如何，我使用了一个命令表，其中每个用户命令只生成一个条目，以及一个事件表，每个命令包含一个或多个条目（链接回命令）。使用脚本/运行程序运行的辅助守护程序启动它会定期轮询事件表并运行时间已过的事件。

到目前为止，它似乎工作得很好，除非我在大量用户使用它时发现一些问题，否则我不打算更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T13:52:21.353

在一定程度上，这取决于您的前端有多少逻辑，以及您的模型中有多少。如果您知道在某件事发生之前将经过多少时间，您可以将大部分逻辑保留在前端。

我会使用您的模型来确定事物的状态，并且根据特定请求，您可以检查它是否已构建。我不明白为什么你需要一个后台工作人员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T16:47:24.933

我会使用 AJAX 来启动一个计时器（参见[Periodical Executor](http://www.prototypejs.org/api/periodicalExecuter)）来更新你的 UI。在模型方面，只需跟踪您的建筑物的 created_at 列，并且仅在其构建时间已过时才允许使用它。这样你就不必每隔几秒钟就去你的数据库看看你的建筑是否完成了。

# c# - 如何覆盖泛型方法？（C#）

> ID：495471
> 
> 赞同：2
> 
> 时间：2009-01-30T13:21:28.780
> 
> 标签：c#, .net, collections

我正在创建一个名为的类`TetraQueue`，它继承`System.Collections.Generic.Queue`了覆盖该`Dequeue`方法的类，代码如下：

```
public class TetraQueue : Queue<Tetrablock>
{
   public override Tetrablock Dequeue()
   {
       return base.Dequeue();
   }
 } 
```

但是当我尝试编译它时，我得到：

> 错误 TetraQueue.Dequeue()'：找不到合适的方法来覆盖 TetraQueue.cs

提前致谢。

我如何知道一个方法是否是虚拟的（以避免这种情况）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-30T13:27:18.953

判断一个方法是否为虚方法的两种方法：

*   在 Visual Studio 中输入“覆盖”——它将为您提供所有允许覆盖的方法。
*   [查看文档](http://msdn.microsoft.com/en-us/library/1c8bzx97.aspx)- Dequeue 并没有说它是虚拟的，所以你不能覆盖它。

编辑：其他人建议隐藏该方法。我强烈建议你*不*要这样做，除非你真的，真的必须这样做。当继承*似乎*有时有效而有时无效时，根据引用的编译时类型，这是一个困难的调试会话和挫折的秘诀。布鲁格。如果您不打算专门研究行为，请使用组合而不是继承。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T13:23:23.907

不幸的是，该`Dequeue`方法不是虚拟的，因此您无法覆盖它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-30T13:26:34.277

你必须使用**新**的关键字。这将告诉编译器您希望将此方法放在另一个方法之上。不过只是一个警告，如果您使用的是基类（例如 Queue），您将无法使用这种新方法。

```
public class TetraQueque : Queue<Tetrablock>
{
   public new Tetrablock Dequeque()
   {
       return base.Dequeue();
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T13:26:08.503

添加新关键字以隐藏基类上的方法。

一篇关于 .net 中多态性的好文章：[http ://www.akadia.com/services/dotnet_polymorphism.html](http://www.akadia.com/services/dotnet_polymorphism.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T13:33:13.980

Queue 没有 Deque **que**方法，但有 Dequeue 方法。那将是第一个编译错误，如果您修复它，您仍然无法编译，因为它不是虚拟方法。

使用 new 关键字可以重新引入此方法，但请记住将函数名拼写正确，否则将有一个`.Dequeue`和一个`.Dequeque`方法。

问题本身也包含此拼写错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T14:01:42.630

重写一个只调用父级的方法是没有意义的，所以如果你发布的代码就是你所做的一切，那么不要重写它。

通过使您的 TetraQueue 成为 Queue<TetraBlock> 您是说它可以在 Queue<TetraBlock> 可以使用的任何时候使用。如果调用者知道它的 TetraQueue，那么通过向它添加一个隐藏原始方法的新方法，那么你就搞砸了那个合同。

如果我想要与 Queue 相同的行为，我会使用 Queue<TetraBlock>; 如果我想要不同的东西，我会使用组合而不是继承。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-30T15:09:11.930

如前所述，您不能覆盖该方法，因为它是非虚拟的。但是，我强烈建议您不要隐藏该方法。考虑以下：

```
class Program
    {
        static void Main(string[] args)
        {
            A a = new A();
            B b = new B();
            A c = new B();

            // Straight A
            a.MyVirtualMethod();
            a.MyNonVirtualMethod();

            // Straight B
            b.MyVirtualMethod();
            b.MyNonVirtualMethod();

            // Polymorphic
            c.MyVirtualMethod();
            c.MyNonVirtualMethod();

            Console.ReadLine();
        }
    }

    public class A
    {
        public virtual void MyVirtualMethod()
        {
            Console.WriteLine("Hello world!");
        }

        public void MyNonVirtualMethod()
        {
            Console.WriteLine("Hello world!");
        }
    }

    public class B : A
    {
        public override void MyVirtualMethod()
        {
            Console.WriteLine("Good bye universe!");
        }

        public new void MyNonVirtualMethod()
        {
            Console.WriteLine("Good bye universe!");
        }
    }
```

对于不了解实现的人来说，这段代码的输出并不明显。

```
你好世界！
你好世界！
再见宇宙！
再见宇宙！
再见宇宙！
你好世界！
```

# php - 如何重定向到 Wordpress 中的不同管理页面？

> ID：495478
> 
> 赞同：10
> 
> 时间：2009-01-30T13:23:57.353
> 
> 标签：php, redirect, wordpress

我正在写一个 Wordpress 插件。

我想执行重定向（在从 POST 数据等创建数据库记录之后）到其他 ADMIN 页面。

header("Location: ...) 和 wp_redirect() 都不起作用 - 我明白了

警告：无法修改标头信息 - 标头已由

这来自明显的原因。

如何在 Wordpress 中正确执行重定向？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2011-01-26T20:10:27.887

在您的表单操作中，将“noheader=true”添加到操作 URL。这将防止在重定向之前输出管理区域的标题。例如：

```
<form name="post" action="<?php echo admin_url('admin.php?page=your-admin-page&noheader=true'); ?>" method="post" id="post"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-01-04T13:53:48.150

如果您在使用 WP add_page* 函数时仍想从插件管理页面重定向到另一个管理页面，那么在处理您的请求后，您可以回显如下内容：

```
<script type="text/javascript">
window.location = '/whatever_page.php';
</script> 
```

这只是将基于 javascript 的重定向呈现到“/whatever_page.php”，从而确保 WP 已经发送的标头没有问题，正如 Chris Ballance 已经说过的那样。

将“/whatever_page.php”更改为“/wp-admin/admin.php?page=whatever_page”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T18:56:49.057

对于使用 add_submenu_page（或相关函数）添加的链接，使用返回的 $hook_suffix 将操作添加到“load-$hook_suffix”并在那里进行重定向。这是在输出开始之前挂钩页面加载的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T14:29:01.513

我想我做错了。

我的代码在 add_action('admin_menu', ...) 调用中的 add_menu_page() 内

这可能会在请求期间稍后调用（在创建和显示页眉之后）。

将我的代码移到插件句柄之外，进入主范围 - 它需要一些清理和修复，但重定向有效。

无论如何，谢谢你的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T13:28:48.313

您需要确保在重定向发生之前没有任何内容发送到 http 输出。

您可以设置“window.location('newlocation');” 并且在将输出发送到浏览器后仍然可以重定向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T13:28:54.317

我想你只需要确保 wp_redirect() 在发送任何输出之前出现。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-11T05:16:29.980

将其加载到 template_redirect。

```
add_action('template_redirect', 'myplugin_template_redirect');

function myplugin_template_redirect() {  
   wp_redirect('http://www.example.com/', 301);
} 
```

# flex3 - Flex 3 使用嵌套状态

> ID：495485
> 
> 赞同：2
> 
> 时间：2009-01-30T13:28:03.353
> 
> 标签：flex3, states

我在我的弹性表单应用程序中使用状态。

基本状态是常规形式。然后我有一个高级表单按钮，它调用高级状态。一旦进入高级状态表单，如果用户输入无效数据，将使用另一个错误状态显示错误，该错误状态只是将文本字段添加到高级状态的 lastChild 元素，

我遇到的问题是，当错误状态被启动时，它不会在高级表单下方显示错误，而是返回到基本状态。

是否可以从另一个状态中调用一个状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T15:41:38.263

我不熟悉状态，但是从[文档](http://livedocs.adobe.com/flex/2/langref/mx/states/State.html)来看，这不是对象的`basedOn`属性吗？`State`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-29T17:38:46.270

你可以在这里查看弹性状态教程：

[http://askmeflash.com/tutorial/0/how-to-create-website-in-flex-tutorial-my-first-flex-website](http://askmeflash.com/tutorial/0/how-to-create-website-in-flex-tutorial-my-first-flex-website)

# php - mysqli 绑定变量

> ID：495496
> 
> 赞同：0
> 
> 时间：2009-01-30T13:32:05.263
> 
> 标签：php, mysql, mysqli

我有这个部分代码：

```
if ($getRecords = $con->prepare("SELECT * FROM AUCTIONS WHERE ARTICLE_NO = ?"))

{

$getHtml = $con->prepare("SELECT ARTICLE_DESC FROM AUCTIONS WHERE ARTICLE_NO = ?");

$getHtml->bind_param("i", $pk);

$getHtml->execute();

$getHtml->bind_result($ARTICLE_DESC);

$getRecords->bind_param("i", $pk); 

$getRecords->execute(); 

$getRecords->bind_result($ARTICLE_NO, $ARTICLE_NAME, $SUBTITLE, $CURRENT_BID, $START_PRICE, $BID_COUNT, $QUANT_TOTAL, $QUANT_SOLD, $ACCESSSTARTS, $ACCESSENDS, $ACCESSORIGIN_END, $USERNAME, $BEST_BIDDER_ID, $FINISHED, $WATCH, $BUYITNOW_PRICE, $PIC_URL, $PRIVATE_AUCTION, $AUCTION_TYPE, $ACCESSINSERT_DATE, $ACCESSUPDATE_DATE, $CAT_DESC, $CAT_PATH, $COUNTRYCODE, $LOCATION, $CONDITIONS, $REVISED, $PAYPAL_ACCEPT, $PRE_TERMINATED, $SHIPPING_TO, $FEE_INSERTION, $FEE_FINAL, $FEE_LISTING, $PIC_XXL, $PIC_DIASHOW, $PIC_COUNT, $ITEM_SITE_ID); 
```

否则运行正常，但是我收到一个错误：

绑定变量的数量与准备好的语句中的字段数量不匹配

在我发布的最后一行。

我不确定问题是什么。我想单独使用一些列，例如 ARTICLE_DESC。这是否意味着我不能使用 select *，并且必须在查询中输入每个列名？

编辑：有必要绑定吗？是否可以获得安全或性能优势？我可以不用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T13:37:47.887

实际上，您应该设置列的名称，而不是使用 *.

这样，您将确切知道要传递给 bind_result 方法的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T13:41:37.490

如果要绑定结果，则不应在 SQL 查询中使用通配符来执行此操作。想想如果从您要绑定的表中添加或删除列会发生什么。

# c# - 关闭 SOAP 连接

> ID：495502
> 
> 赞同：0
> 
> 时间：2009-01-30T13:33:33.387
> 
> 标签：c#, soap

我已经与服务器建立了肥皂连接，并且服务器似乎没有丢弃该连接，在 netstat 中，连接的状态被列为 CLOSE WAIT。

我被告知创建soap连接的客户端必须向服务器发送命令以关闭连接。谁能告诉我在 C# 中执行此操作的正确方法？下面是一段示例代码。

```
SOAPServer.Service Soap = new SOAPServer.Service(); // SOAPServer is a web reference
Soap.Timeout = 30000;
string[] SOAPReturnResult = Soap.DepotData(100, "Test");
Soap.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T13:35:52.103

将其包装在 using 块中。

```
using (SOAPServer.Service Soap = new SOAPServer.Service())
{
Soap.Timeout = 30000;
string[] SOAPReturnResult = Soap.DepotData(100, "Test");
} 
```

请注意，这仅将连接标记为已关闭。即使在连接关闭后的一段时间内，它仍可能通过 netstat 显示为打开状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T13:49:41.077

CLOSE WAIT 状态意味着服务器从您的客户端接收到 TCP-FIN（即被动关闭），服务器必须关闭其套接字（向客户端发送 TCP-FIN）才能使服务器套接字脱离 CLOSE WAIT 状态. 因此，这可能不是客户端的问题，而是服务器套接字未正确关闭的服务器端。

它在客户端是什么样子的？FIN-WAIT-1 或 FIN-WAIT-2 可能表明这可能是问题所在。

# visual-studio - 始终复制到输出目录不起作用

> ID：495505
> 
> 赞同：56
> 
> 时间：2009-01-30T13:34:34.307
> 
> 标签：visual-studio, debugging

我有一个简单的控制台项目，我正在读取两个 Excel 文件。Excel 文件包含在项目中（“添加现有项目”），我已将它们标记为“复制到输出目录”。但是，在调试/运行代码时，它们不会复制到调试目录。

我觉得我忘记了一些琐碎的事情。我还需要做什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-09-12T21:15:31.827

在 Visual Studio 的文件属性中，设置：

**构建操作**：无

**复制到输出目录**：始终复制

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-02-01T09:32:11.033

对非源代码文件的更改不会导致重建发生 - 当编译器*进行过期*检查时不会考虑它们。

尝试通过完全删除输出目录来强制完全重建（有时在 Visual Studio 中执行此操作并不完整）。

可能是因为尚未运行完整构建，因此尚未复制文件。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-02-26T18:05:45.317

这些都不适用于我的 WPF 项目。您需要将其标记为**内容**+ 始终复制。

有关不同 Visual Studio 文件属性的详细信息，请参阅[此页面](http://msdn.microsoft.com/en-us/library/0c6xyb66%28v=vs.90%29.aspx)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-30T13:40:18.507

您是否将它们标记为内容？

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-03T23:33:13.340

当一些 png 文件被重命名 - 排除 - 再次添加到项目时，我遇到了问题。VS2015 似乎失去了跟踪如何处理这些文件：虽然在 VS 中“复制到输出目录：始终复制”设置为有问题的文件，但 csproj 文件中不存在 CopyToOutputDirectory 键。我不得不手动更改 csproj

```
<Content Include="xxx.png"/> 
```

对此：

```
<Content Include="xxx.png">
    <CopyToOutputDirectory>Always</CopyToOutputDirectory>
</Content> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-30T13:36:46.237

愚蠢的问题，但您是否在调试模式下运行？我犯了同样的错误，并意识到我处于发布模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-08T15:33:19.610

我总是把**内容**和**复制**放在一边，它奏效了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-12T23:00:51.127

我刚遇到这个问题，出于某种原因，在项目属性下选择“创建没有清单的应用程序”最终将链接的内容文件复制到构建目录。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-13T19:48:12.363

VS 2015 的行为类似，没有使用内容文件正确更新输出目录。 **奇怪的是，*似乎*可行**的方法是将文本文件放入包含内容文件的文件夹中，并使其也成为内容文件。文本文件将被复制到目录中，所有其他内容文件也将如此。更奇怪的是，如果您随后删除文本文件，即使不再有要复制的原始文件，它也会继续显示在输出目录中。

# .net - 导入或长类格式？

> ID：495514
> 
> 赞同：0
> 
> 时间：2009-01-30T13:40:29.910
> 
> 标签：.net, vb.net, import

我应该使用这个。

```
Imports System.IO

Dim myStream As New Stream 
```

或这个..

```
Dim myStream As New System.IO.Stream 
```

它对性能/内存使用有什么影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T13:42:36.037

没有任何区别 - 这只是品味问题，仅影响可读性。

顺便说一句，CLR 甚至不知道“命名空间”的概念：命名空间名称成为类型名称的前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T13:46:14.640

在 VB.Net 中，您有第三种选择：

```
Dim myStream As New IO.Stream 
```

你不能在 C# 中做到这一点。对于 IO 命名空间，我几乎总是使用该快捷方式，因为“IO”。没有那么多额外的类型。对于大多数其他名称空间，我倾向于在文件顶部添加 using 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T13:47:05.653

什么对您来说更具可读性？我总是发现最好导入您需要的名称空间，以便您在代码中键入的名称更短。

命名空间对内存或性能没有影响——它们只是为了防止全局空间中类型之间的歧义而存在。

# sharepoint - 将 SharePoint Designer 工作流迁移到 Visual Studio 工作流

> ID：495519
> 
> 赞同：2
> 
> 时间：2009-01-30T13:42:07.753
> 
> 标签：sharepoint, workflow, sharepoint-designer

在正常情况下，您无法将在 SharePoint Designer 中设计的工作流移动到另一个站点，或移动到 Visual Studio 中以进行进一步的自定义/开发。

我相信这是可能的，但正在寻找有关方法/技术的一些指示，也许还有一些指向更多信息的链接。

我知道一些 MVP（Todd Bleeker 和其他人）过去一直在研究这个问题，但我还没有找到一个明确的解决方案。

还有人知道 MS 是否正在考虑在下一版本的 SharePoint Designer 中改进工作流设计器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T15:03:35.920

[这是一个](http://blogs.msdn.com/sharepointdesigner/archive/2007/07/06/porting-sharepoint-designer-workflows-to-visual-studio.aspx)可以帮助您入门的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T13:45:50.167

Sharepoint Designer 工作流程的问题在于，它们基本上将所有列表（和其他）GUID 硬编码到其中，这使得概括它们变得不切实际。

据我所知，您可以“只是”将 XOML 文件移动到新的 Visual Studio 工作流中，然后添加 .cs 和 .rules 文件，但我也听到了关于此的冲突信息。

我不知道微软是否计划改进，但我也认为 SharePoint Designer 仍有很大的改进空间。

# javascript - JScript 参数集合 - .Net 等效项

> ID：495528
> 
> 赞同：0
> 
> 时间：2009-01-30T13:45:58.370
> 
> 标签：javascript, vb.net, error-handling, arguments

在用 JScript 编写代码时，我不会这样做，因为我从来都不是 ASP.Net 的粉丝，而且 Jscript 比 VBScript 更加优雅，你可以调用参数集合。这对于传递给错误处理程序非常有用，因为您可以向开发团队输出消息，这些消息可以准确地告诉他们应用程序在错误发生时的状态，包括传递给出错的过程的内容。因为它是内在的，所以没有必要搞砸，只需将它作为参数传递给你的中央异常处理程序。

我的问题是：.Net 中是否有类似的东西，特别是 VB？我们继承了一个我们一直在稳步改进的笨拙的应用程序（其中大部分没有错误处理可言），但我觉得非常烦人的一件事是没有错误中函数参数的详细信息会将应用程序电子邮件报告给开发组和 mroe foten，而不是此信息是错误本身的关键。

祝大家欢呼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-26T16:41:20.483

这里有两个问题。首先是如何将参数集合传递给 VB 中的 Sub。答案是你没有。VB 是一种强类型语言，而 JScript 中的参数集合不是。但是，您可以使用 Array 作为参数来实现相同的效果。

如果你有这样的功能：

```
Function Sum(ByVal ParamArray nums As Integer()) As Integer 
  Sum = 0  
  For Each i As Integer In nums 
    Sum += i 
  Next 
End Function 
```

然后你可以这样称呼它：

```
Dim total As Integer = Sum(4, 3, 2, 1) 
```

你的第二个问题是关于建立一个好的错误处理系统。事实证明，.Net 在使用异常时有一个很好的错误处理架构。查看[这个站点，了解有关设置异常处理系统的一些详细信息](http://www.vbdotnetheaven.com/UploadFile/rajeshvs/dotnetException04162005022135AM/dotnetException.aspx)。

# hibernate - 休眠 ID 生成器

> ID：495536
> 
> 赞同：9
> 
> 时间：2009-01-30T13:49:00.987
> 
> 标签：hibernate, jpa, primary-key, id-generation

任何人都知道一些关于如何为休眠创建自定义 ID 生成器的好教程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-04T02:46:17.793

粗略地在 Google 上搜索“休眠自定义 ID 生成器教程”发现了以下可能性。我已经排除了那些看起来没用的，并总结了每个的内容。

*   [http://www.devx.com/Java/Article/30396](http://www.devx.com/Java/Article/30396) - 涵盖在数据持久化之前生成 ID 的问题（因此还没有业务密钥）。
*   [http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration) - 整个文档非常有用，但与其说是教程，不如说是参考。查看其他教程时的理想选择。
*   [http://www.javaworld.com/javaworld/jw-08-2008/jw-08-hibernate-annotations.html](http://www.javaworld.com/javaworld/jw-08-2008/jw-08-hibernate-annotations.html)展示了如何使用注释来设置您的架构（包括自动生成的值）。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T13:57:44.383

[http://resource.visual-paradigm.com/vpsuite2.3sp1/custom_id_generator.html](http://resource.visual-paradigm.com/vpsuite2.3sp1/custom_id_generator.html)

虽然此链接演示了用于生成自定义 ID 生成器的 Visual-Paradigm 工具，但可以从中学习 Hibernate 自定义 ID 生成器的思想

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-02T12:55:02.773

我找到了郭佳琪的[这个：](http://blog.cyclopsgroup.org/2007/04/custom-idgenerator-for-jpa-gap-between.html)

[http://blog.cyclopsgroup.org/2007/04/custom-idgenerator-for-jpa-gap-between.html](http://blog.cyclopsgroup.org/2007/04/custom-idgenerator-for-jpa-gap-between.html)

# c++ - 每次调用 C++ 函数时，如何防止变量重新初始化？

> ID：495540
> 
> 赞同：0
> 
> 时间：2009-01-30T13:49:53.370
> 
> 标签：c++, visual-c++, global

如何解决这个变量初始化问题？如果我只能弄清楚如何只初始化它们一次......

```
*   Main.cpp : main project file.

/**************************   Begin Header **************************/
#include "stdafx.h" //Required by Visual C ++
#include <string>   //Required to use strings
#include <iostream> //Required for a bunch of important things
#include <iomanip>  //Required for manipulation of text and numbers

using namespace System; // Automatically uses System namespace
using namespace std;    // Automatically uses std namespace

#pragma hdrstop // Stops header here
/***************************  End Header ***************************/

//* Begin Function Headers *//
void inputData(); // This will be used to organize class member calls when setting and getting new data.
int getData(); // Will get user data, input in character string, convert to an integer and then perform data validation.
void createReport(int place, int number, string type); // Will organize commands to create the report and display it on the screen.
//* End Function Headers *//

class JarsSold // Begin Class -- JarsSold
{
    /* Begin Initialization & Creation of important resources */
private:
    static const int MaxArray = 5; // Value for the size of array JARS_SOLD
    int JARS_SOLD[MaxArray]; // Creation of array with size of MaxArray
    /* End Initialization & Creation of important resources */
public: // Makes underlining elements Public instead of the default Private
    JarsSold() // Begin Constructor
    { // Put something in num array
      JARS_SOLD[0] = 0; // [1]
      JARS_SOLD[1] = 0; // [2]
      JARS_SOLD[2] = 0; // [3]
      JARS_SOLD[3] = 0; // [4]
      JARS_SOLD[4] = 0; // [5] 
    } // End Constructor
    ~JarsSold(){}; // Destructor

/* Put all members for JarsSold class below here */

    void setNumber(int num, int value) // Set the number of jars sold with number placement in array and value to replace it with
    {
        JARS_SOLD[num] = value; // Stores value into JARS_SOLD at whatever num is at the time
    }; // End setNumber class member

    int getNumber(int num) // Get the current number held for jars sold with number placement in array
    {
        return JARS_SOLD[num]; // Returns whatever is in JARS_SOLD depending on what num is at the time
    } // End getNumber class member

/* Put all members for JarsSold class above here */

}; // End Class -- JarsSold

class SalsaTypes // Begin Class -- SalsaTypes
{
    /* Begin Initialization & Creation of important resources */
private:
    static const int MaxArray = 5; // Value for the size of array JARS_SOLD
    string SALSA_TYPES[MaxArray]; // Creation of array with size of MaxArray
    /* End Initialization & Creation of important resources */

public: // Makes underlining elements public instead of the default Private
    SalsaTypes() // Begin Constructor
    { // Add default strings to str array
      SALSA_TYPES[0] = "Mild";   // [1] Stores Mild into SALSA_TYPES at 0 spot
      SALSA_TYPES[1] = "Medium"; // [2] Stores Medium into SALSA_TYPES at 1 spot
      SALSA_TYPES[2] = "Sweet";  // [3] Stores Sweet into SALSA_TYPES at 2 spot
      SALSA_TYPES[3] = "Hot";    // [4] Stores Hot into SALSA_TYPES at 3 spot
      SALSA_TYPES[4] = "Zesty";  // [5] Stores Zesty into SALSA_TYPES at 4 spot
    } // End Constructor
    ~SalsaTypes(){}; // Destructor

/* Put all members for SalsaTypes class below here */
    void setType(int num, string type) // Set salsa type with number placement in array and string value to replace with
    {
        SALSA_TYPES[num] = type; // Stores the string type into SALSA_TYPES at whatever num is at the time
    }; // End setType class member

    string getType(int num) // Get the Salsa Type with number placement in array
    {
        return SALSA_TYPES[num]; // Returns SALSA_TYPES depending on what is in num at the time
    }; // End getType class member
/* Put all members for SalsaTypes class above here */

};// End Class -- SalsaTypes

void main( void ) // Begin Main Program
{

cout << fixed << setprecision(1) << setw(2); // Do a little customization with IoManip, might as well, we just might need it

    // Main Program Contents Begin Here //

    // Opening Credits for Program
    cout << "Welcome to the /Professional Edition\\ of the Chip and Salsa Sale Tool EXPRESS." << endl;
    cout << "This handy-dandy tool will make a chip and salsa manufacturer's job much easier!" << endl;
    cout << endl << endl << endl;
    cout << "Press any key to begin inputing the number of jars sold for these salsa flavors: " << endl << endl;
    cout << "-Mild" << endl << "-Medium" << endl<< "-Sweet" << endl << "-Hot" << endl << "-Zesty" << endl << endl << endl;

    system("pause"); // Pause here. After this begin data input
    cout << endl << endl << endl;

    inputData(); // Will deal with data input, validation, and reports

    // Main Program Contents End Here //

} //End Main Program

// All Content for Functions Begin Here //
void inputData() // Begin inputData Function
{
    // Begin Create Class Obects //
    SalsaTypes salsa;
    JarsSold jars;
    // End Create Class Objects //
    // Variable Creation Begin //
    // Variable Creation End //
    // All Content for Functions Begin Here //

    for (int i = 0 ; i < 5 ; i++) // Start For Loop
    {
        cout << "Input how many Jars were sold for \"" << salsa.getType(i) << "\"" << ": "; // Displays which Salsa we are reffering to

        jars.setNumber(i,getData()); // Will use getData() to determine what value to send to the JarsSold class.
        createReport(i,jars.getNumber(i),salsa.getType(i)); // Send these numbers to another function so it can make a report later

        cout << endl << endl; // Using this as a spacer
    }

    // All Content for Functions End Here //

}; // End inputData Function

int getData() // Begin getData Function
{
    // Variable Creation Begin //
    char charData[40]; // Will be used to store user data entry
    int numTest; // Will be used for Data Validation methods
    // Variable Creation End //

    // Main Contents of Function Begin Here //
retry: // Locator for goto command

    cin >> charData; // Ask user for input. Will store in character string then convert to an integer for data validation using 'Atoi'

    numTest = atoi ( charData ); // Convert charData to integer and store in numTest

    if (numTest < 0) { numTest = 0; cout << endl << endl << "You can't enter negative numbers! Try Again." << endl << endl << "Re-enter number: "; goto retry;} // Filter out negative numbers

    // Main Contents of Function End Here //

    return numTest; // If it makes it this far, it passed all the tests. Send this value back.
}; // End getData Function

void createReport(int place, int number, string type) // Begin createReport Function
{
    // Variable Creation Begin //

    int const MAX = 5;  // Creat array size variable
    int lowest; // The integer it will use to store the place of the lowest jar sales in the array
    int highest; // The integer it will use to store the place of the highest jar sales in the array
    int total; // The integer it will use to store total sales
    int numArray[MAX];  // Create array to store jar sales (integers)
    string typeArray[MAX];  // Create array to store types of salsa (strings)

    // Variable Creation End //
    // Main Contents of Function Begin Here //

    numArray[place] = number; // Store number into new array
    typeArray[place] = type;    // Store type into new array

    if (place = 4) // If the array is full it means we are done getting data and it is time to make the report.
    { // Begin making report, If statement start

        for ( int i = 0 ; i < 5 ; i++ ) // Using a for-loop to find the highest and lowest value in the array
        { // For Loop to find high and low values BEGIN
            if ( lowest < numArray[i]) // Keep setting lowest to the lowest value until it finds the lowest one
            { // Start If
            lowest = numArray[i]; // Lowest equals whatever is in numArray at i spot
            } // End If

            if ( highest > numArray[i]) // Keep setting highest to the highest value until it finds the highest one
            { // Start If
            highest = numArray[i]; // Highest equals whatever is in numArray at i spot
            } // End If
            total += numArray[i]; // Will continually add numArray at i spot until it has the total sales
        } // For Loop to find high and low values END

    // Main Contents of Function End Here //

} // END creatReport Function
// All Content for Functions Ends Here // 
```

那么我的问题是......我需要将我的数据从一个函数传递到另一个函数。我以为我可以弄清楚如何创建全局类对象，但我做不到。所以我想我可以绕过只是将参数传递给另一个函数，然后将它们恢复到它自己的数组中，然后继续这样做，直到我完全复制了所有数字数组和字符串数组。嗯......是的，除了 createReport() 中的这一部分之外，它确实有效：

```
// Variable Creation Begin //

    int const MAX = 5;  // Create array size variable
    int lowest; // The integer it will use to store the place of the lowest jar sales in the array
    int highest; // The integer it will use to store the place of the highest jar sales in the array
    int total; // The integer it will use to store total sales
    int numArray[MAX];  // Create array to store jar sales (integers)
    string typeArray[MAX];  // Create array to store types of salsa (strings)

// Variable Creation End // 
```

发生的事情是，我想我太累了以至于错过了它，每次我调用该函数时，它都会再次重新初始化那些相同的变量。我会将变量放入另一个变量中，然后将其重新初始化为默认值。

我尝试使用一个计数器变量，它在初始化后计数为 1，然后在它为 1 之后它不会再次初始化。不，这不起作用，因为变量没有在 if 语句的范围之外初始化。然后我尝试了一个 GOTO 语句，它会在它发生一次后跳过初始化。不，第一个初始化阶段出了点问题，没有编译。

我需要弄清楚我该怎么做

1.  防止这些变量被重新分配或初始化，以便它们可以保持其值。或者
2.  弄清楚如何创建全局类对象（是的，我已经尝试了带有多个源文件的外部类。没有运气，只是有很多错误）

我还不太擅长编程。但我向你保证，我已经为这件作品工作了好几个小时，而且我彻夜未眠，只是不断地试错。我真的为自己感到自豪，因为这段代码对我来说非常先进。我看过谷歌上的每一个教程，我很不走运——你们是我最后的希望！！再次对不起各位。我知道这是一个愚蠢的问题...

最后一个快速问题。你如何创建全局类对象？例如

```
MyClass
{
  MyClass(){};
  ~MyClass(){};
}

MyClass MyClassObject; 
```

如何在整个程序中使用 MyClassObject？

我可以使用它的唯一方法是每次使用我使用的每个函数都创建一个新对象。这意味着我丢失了存储在课堂上的所有数据？

我读过虽然拥有全局对象并不是一个好主意。我很想不必使用它们，但我不知道我能真正理解的任何替代方案。

非常感谢任何其他批评或提示。我喜欢这个东西，我只是没有很多人可以问问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T13:59:06.877

你做的真好！简单的答案是在变量前面写静态：

```
static int const MAX = 5;  // Creat array size variable
static int lowest; // The integer it will use to store the place of the lowest jar sales in the array
static int highest; // The integer it will use to store the place of the highest jar sales in the array
static int total; // The integer it will use to store total sales
static int numArray[MAX];  // Create array to store jar sales (integers)
static string typeArray[MAX];      // Create array to store types of salsa (strings 
```

我想我可以给你更好的建议，我会看你的代码更长的时间。至于全局变量，你用 MyClassObject 在那里写的东西可以正常工作。你会这样使用它：

```
MyClass { 
public:
  MyClass(){}; 
  ~MyClass(){}; 
  int variable;
};
MyClass MyClassObject;

// in a method you'd do this
void whateverMethod() {
  MyClassObject.variable = 5;
  std::cout << MyClassObject.variable << std::endl;
} 
```

那种事。有一些风格问题可以解决，但老实说，我说先让它工作，然后我们可以讨论这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T13:58:47.550

1）使它们成为静态的，例如

```
static string typeArray[MAX]; 
```

初始化它们一次，它们将保持不变，直到您更改它们。不要尝试从两个线程同时使用它们。

2）您可以通过在文件范围内声明它来创建一个全局对象：

```
class CFoo;

CFoo s_foo;

class CFoo 
{
    public:
    CFoo();
    ~CFoo();
} 
```

然后 s_foo 将成为 CFoo 的一个实例，可以在任何可以看到 s_foo 的地方使用（这个文件和其他有 extern CFoo s_foo;）

# sql - 用于菜单系统的递归 SQL

> ID：495544
> 
> 赞同：3
> 
> 时间：2009-01-30T13:51:16.457
> 
> 标签：sql, recursion

我有一个具有以下结构的菜单系统表和一些数据。

```
ID、文本、ParentID、DestinationID
1、应用程序，（空），（空）
2、游戏，（空），（空）
3，办公室，1，（空）
4、文本编辑、1、（空）
5，媒体，（空），（空）
6、字、3、1
7、Excel、3、2
8、孤岛危机、2、3

```

我需要的是一个查询，我可以将菜单 ID 传递给该查询，它将返回具有该 ID 作为子项的项目列表。但是，我需要它只返回具有到达目的地的有效路径的孩子。所以在上面的例子中，用户最初会看到（应用程序，游戏），当他选择应用程序时，他会看到（办公室）。文本编辑和媒体应该被省略，因为它们下面没有有效的目的地。

最棘手的是，任何给定菜单都没有预先确定的深度。

**编辑**：

今天，MS SQL 2008 出现了问题，但在过去的两周里，我需要 SQLite 和 SQL CE 的类似解决方案。理想的解决方案不应与任何特定的 SQL 引擎绑定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T14:06:11.963

仅限 SQL 服务器，但听起来像是[Common Table Expressions](http://blogs.msdn.com/simonince/archive/2007/10/17/hierarchies-with-common-table-expressions.aspx)的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T13:56:57.553

在甲骨文中：

```
SELECT m.*, level
FROM my_table m
START WITH
  Id = :startID
CONNECT BY
  ParentID = PRIOR Id
  AND DestinationID IS NOT NULL 
```

没有办法通过`ANSI SQL`单个查询来完成。您可以为您的表创建一个附加列`AccessPath`：

```
ID, Text, ParentID, DestinationID AccessPath
1, Applications, (null), (null), "1"
2, Games, (null), (null), "2"
3, Office, 1, (null), "1.3"
4, Text Editing, 1, (null), "1.4"
5, Media, (null), (null), "5"
6, Word, 3, 1, "1.3.6"
7, Excel, 3, 2, "1.3.7"
8, Crysis, 2, 3, "1.2.8" 
```

, 和查询：

```
SELECT mp.Id, mp.Text
FROM my_table mp, my_table mc
WHERE mp.parentID = @startingParent
 AND mc.Id <> mp.Id
 AND SUBSTR(mc.AccessPath, LENGTH(mp.AccessPath)) = mp.AccessPath
GROUP BY
 mp.Id, mp.Text 
```

从 开始是一个坏主意，因为在这种情况下不能使用`NULL`索引。`ParentID`首先，使用假`parentID`的 of`0`代替`NULL`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-02T17:25:55.633

If the hierarchy/tree that you are stroing in your database does not change very often, I would recommend to use the **modified preorder tree traversal (MPTT) algorithm**. That would require a different table schema, but would allow you to request a whole subtree with a simple SQL statement (no recursion, etc.).

The article on [Storing Hierarchical Data in a Database](http://www.sitepoint.com/article/hierarchical-data-database/) describes this method in detail.

In your example you would get the following tree, where I call the red numbers the *left* value and the *green* right value of a node.

![alt text](https://farm4.static.flickr.com/3493/3248268020_f9843fa557.jpg)

Now, if you want to select the *Office* subtree, you can do this with:

```
SELECT * FROM tree WHERE left BETWEEN 10 AND 15 AND destination IS NOT NULL 
```

If your DB does not support the BETWEEN statement, you can of course write left > 10 AND left < 15 instead.

Your table would look like this:

```
name         | left | right | destination
------------------------------------------ 
root         | 1    | 17    | NULL
Applications | 7    |  16   |  ...
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T14:09:27.870

如果这是您感兴趣（或困扰您）的问题，您可能需要查看：[Joe Celko 为 Smarties 编写的 SQL 中的树和层次结构](http://www.elsevier.com/wps/find/bookdescription.cws_home/702605/description#description)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-31T06:12:52.997

正如其他人指出的那样，标准的 ANSI SQL 没有办法做你想做的事。对于这样的事情，我曾经在 SQL 2000 上实现了一个系统，用于跟踪前雇主制造的产品的组件——每个“产品”都可以是原子组件，比如螺丝 A500。该组件可用于“复合”组件：一些 A500 螺钉加上 6 个 B120 木板符合 C90“时尚工具箱”。那个盒子，加上更多的螺丝和一个马达“M500”可以符合地毯工具。

我设计了一个这样的表格“产品”：

```
ID, PartName, Description
1, A500, "Screw A500"
2, B120, "Wood panel B120"
3, C90, "Stylish tool box C90"
4, M500, "Wood cutter M500" 
```

和一个“ProductComponent”表如下：

```
Hierarchy, ComponentID, Amount
0301, 1, 24
0302, 2, 6
0401, 1, 3
0402, 3, 1
0403, 4, 1
040201, 1, 24
040202, 2, 6 
```

诀窍是：字段层次结构是一个 VARCHAR，前 2 个字符代表每个产品的 ID，接下来的每个字符对标识树中的一个节点。所以我们看到产品 3 依赖于其他 2 个产品。产品 4 依赖于另外 2 个，其中一个依赖于它的部分依赖于另外两个。

此模型有很多冗余，但可以轻松计算特定产品需要多少螺钉，快速确定哪些零件需要木板或获取产品最终依赖的所有组件列表（包括间接依赖关系）等。而扫描某一层以下的树就是一个简单的 LIKE 查询！

通过在十六进制表示中使用 2 个字符，我将产品限制为直接依赖于最多 256 个其他 prod（这反过来又可以依赖于其他东西）。如果您需要更多，您可以将其更改为使用 base 36（26 个字母加 10 个数字）或 base-64。

此外，这个表模型在 Access 和 mySQL 上也能很好地工作。你不能拥有的是任何方式的循环依赖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T14:16:15.783

SQL 不太擅长遍历任意深度的层次结构。

如果这些记录少于 1000 条，我会将它们全部抓取到应用程序中并在那里构建图表。

如果这些记录超过 1000 条，我会将它们分组为大约 1000 个的原始子树（通过添加 SubtreeID 外键）并获取每个子树......然后在应用程序中构建子树的图形。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T21:43:58.670

我要做的第一件事是去掉目标列——它在层次结构方面没有意义（它实际上似乎是一种第二主键，以你表示的方式表示一个活动的子行）

这会给

```
ID, Item, parentID
1, Applications, (null)
2, Games, (null)
3, Office, 1
4, Text Editing, 1
5, Media, (null)
6, Word, 3
7, Excel, 3
8, Crysis, 2 
```

例如..

单词 > 办公室 > 应用程序和...

excel > 办公 > 应用程序

...大概应该在同一个菜单项上（父 ID 3）

我不确定您是如何选择菜单的，但我将按照以下原则工作，即有一个初始菜单按钮设置为 (null) 作为它的参数，并且每次后续单击都会动态地按顺序保存下一个参数（这似乎匹配你的评论）

例如

单击顶级菜单：- 值为（空）

单击应用程序：- 值为 1

单击办公室：- 值为 3

等等

假设 destinationID 除了显示一个活动的子链接（允许您删除它）之外什么都不做，那么代码将如下所示：

```
with items (nodeID, PID, list) as
  (select id, ParentID, item
    from menu
    where id = 9
    union all
  select id, ParentID, item
    from menu
    inner join items on nodeID = menu.ParentID
  )
select *
from items 
where (pid = 9)
and nodeID in (select parentid from menu) 
```

这适用于 MSSQL 2005+

如果您出于其他原因需要目标 ID，则可以按如下方式修改代码（例如，如果您需要返回未将节点 ID 设置为父 ID 的最低级别）：

```
with items (nodeID, PID, list, dest) as
  (select id, ParentID, item, destinationID
    from menu
    where id = 9
    union all
  select id, ParentID, item, destinationID
    from menu
    inner join items on nodeID = menu.ParentID
)
select *
from items 
where (pid = 9)
and (nodeID in (select parentid from menu) 
  or dest is not null) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-29T14:27:16.130

[https://geeks.ms/jirigoyen/2009/05/22/recursividad-con-sql-server/](https://geeks.ms/jirigoyen/2009/05/22/recursividad-con-sql-server/)

```
ALTER PROCEDURE [dbo].[Usuarios_seguridad_seleccionar]
AS
BEGIN    

    DECLARE @minClave int
    SELECT @minClave = MIN(Clave) FROM dbo.Usuarios_seguridad;

    WITH UsuariosAccesos AS(

        SELECT top 1 us1.Padre,us1.Clave,us1.Variable,us1.Modulo,us1.Contenido,us1.Acceso,us1.Imagen 
        FROM dbo.Usuarios_seguridad us1 
        WHERE us1.Clave = @minClave
        UNION ALL
        SELECT top 100 percent us2.Padre,us2.Clave,us2.Variable,us2.Modulo,us2.Contenido,us2.Acceso,us2.Imagen 
        FROM dbo.Usuarios_seguridad us2 
        INNER JOIN UsuariosAccesos AS us3 ON us3.Clave = us2.Padre  
        WHERE us2.Clave <> @minClave 
    )

    SELECT TOP 100 PERCENT ia.Padre,ia.Clave,ia.Variable,ia.Modulo,ia.Contenido,ia.Acceso,ia.Imagen 
    FROM UsuariosAccesos ia
    ORDER BY padre, clave
END
GO 
```

# cloud - 云计算和我公司的数据

> ID：495551
> 
> 赞同：7
> 
> 时间：2009-01-30T13:54:45.747
> 
> 标签：cloud, data-security

我正在为我的公司研究云计算。我似乎无法摆脱的一个问题是；如果云计算公司倒闭，我的数据和使用数据的能力会怎样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-30T14:08:20.743

显然，您应该选择一个您认为可靠且不太可能倒闭的供应商，但真正的答案是您应该安排一个替代供应商，并制定一个计划，如果主要供应商破产，您将如何切换. 该计划的关键部分是：

*   确保您拥有和控制域名，并使用完全独立的提供商来运行您的 DNS
*   建立一个完全自动化的备份系统，将所有数据移出您的主要提供商。
*   只需一个 DNS 开关，即可随时运行备份提供商
*   定期测试您的切换过程

外包服务器场实际上与任何其他外包功能没有什么不同。您只需要确保您没有被锁定在单一供应商中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T14:10:18.493

选择一个可靠的提供商，并定期在云之外备份您的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T13:59:22.557

我会说这取决于公司。如果公司倒闭，我不会假设您能够取回它。即使您有这样做的合法权利，在公司倒闭后，您也可能需要数月的时间通过法院命令和程序才能得到它。

公司破产后，我也不认为会有任何安全协议来保护它。即使他们说会有，当一家公司倒闭时，所有的赌注都没有了。

还要记住的一个想法是，即使是最“知名”的公司也可能在心跳中失败（安然任何人）。在发布财务报表（如果有的话）之前，您永远不会真正知道一家公司的经营状况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T14:07:47.140

为什么不保留某种本地备份？此外，您可能希望坚持使用亚马逊等知名公司，因为它们可能不会倒闭。

编辑：正如评论中所述，即使亚马逊停止提供他们的云计算服务，他们也不太可能不给用户足够的时间将他们的数据从他们的服务器上移走。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T15:50:35.263

你并不孤单。有很多人问同样的问题。一些建议，以确保您不会被冷落。

1) 仔细检查服务条款。甚至像亚马逊这样的大公司也保留在不超过 30 天通知的情况下终止服务的权利。如果您的整个网络基础架构都在特定的云上，那么 30 天的时间来构建一个新的数据中心或迁移到另一个提供商并不是很长的时间。这将我们带到我的第二点......

2) 提供者之间的可移植性很重要。专有的云解决方案（Microsoft Azure、Google NetApps 以及在较小程度上的 Amazon AWS）使得在被迫时很难轻松地过渡到另一个提供商。即将出现的一个有前途的选择是 VMWare，它正在采取提供云软件并让合作伙伴托管它的方法。从理论上讲，这将为您提供很多提供程序之间的可移植性，甚至可能让您一次使用多个提供程序，以便您进行故障转移。此外，由于它们可能使用标准 VMDK 映像，因此如果您有 ESX 服务器，如果绝对必要，您总是可以将虚拟机拉回本地。

3) 备份。希望云提供商提供一些创建备份的方法，但建议也有一个离线版本。只有部分基础架构位于云上的较新的混合云架构对此很有吸引力。也就是说，您可以从云本地备份。

这是一篇好文章，其中作者预测云市场的崩溃和 GoGrid.com 的反驳。非常有趣的阅读，因为你得到了问题的两面性。

“不要购买云计算炒作：商业模式将会蒸发” Chuck Goolsbee – 2008 年 12 月 [http://searchdatacenter.techtarget.com/news/article/0,289142,sid80_gci1343864,00.html?track=sy540#](http://searchdatacenter.techtarget.com/news/article/0,289142,sid80_gci1343864,00.html?track=sy540#)

GoGrid.com 的反驳 Michael Sheehan – 2009 年 1 月 [http://blog.gogrid.com/2008/12/31/dissecting-searchdatacentercoms-dont-buy-cloud-computing-hype-post/](http://blog.gogrid.com/2008/12/31/dissecting-searchdatacentercoms-dont-buy-cloud-computing-hype-post/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-21T23:55:38.560

亚马逊和微软不会在一夜之间关门大吉。

# c# - 使用 C# 的可用 TCP 端口探测

> ID：495552
> 
> 赞同：5
> 
> 时间：2009-01-30T13:55:10.507
> 
> 标签：c#

如何探测可用的 TCP 端口以便以编程方式配置 WCF 服务端点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T14:02:13.127

如果您动态选择服务器端口，您的客户端将如何了解端点？

反正，

这是探测开放端口的一种肮脏方式

```
 for (int port = 2000; port < 65535; port++) 
                   {
                   IPEndPoint ep = new IPEndPoint(IPAddress.Any, port);
                   Socket socket = new Socket(AddressFamily.InterNetwork, st, pt);

                   try { 
                         socket.Bind(ep);
                         socket.Close();  
                         //Port available
                        } 
                   catch (SocketException)
                        {
                        Debug.WriteLine("Port not available {0}", port);
                        } 

                   } 
```

然后，尝试创建自定义服务主机..

[http://msdn.microsoft.com/en-us/library/aa395224.aspx](http://msdn.microsoft.com/en-us/library/aa395224.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-24T09:42:33.297

不是一种特别优雅的方式，但您可以尝试打开主机并捕获`AddressAlreadyInUseException`异常。这消除了`Socket`amazedsaint 方法中的使用和竞争条件：在检查和您尝试打开服务之间没有任何东西可以占用端口。

所以，基本上：

```
ServiceHost host;

for(int port = 2000; port < 65535; port++) {
    var address = GetBaseAddress(port);
    host = new ServiceHost(typeof(MyService), address);
    try {
        host.Open();
        break;
    }
    catch(AddressAlreadyInUseException) {

    }
} 
```

该`GetBaseAddress`方法只是创建一个地址，`String.Format`将端口号放在地址模式中的正确位置。

我想它现在更相关，因为我们在 .NET 4 中有[WCF 发现。](http://msdn.microsoft.com/en-us/library/dd456782.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-24T09:54:46.797

您正在寻找的是： [`Socket.Select`](http://msdn2.microsoft.com/en-us/library/system.net.sockets.socket.select)

# firefox - 切换 firefox 以使用与 windows.host 文件中不同的 DNS

> ID：495553
> 
> 赞同：34
> 
> 时间：2009-01-30T13:55:12.457
> 
> 标签：firefox, dns

例如，我在不同的服务器上有一个开发站点，但我试图从实时站点复制内容，因此将实时站点放在 IE 中，将开发站点放在 FF 中会很方便。

我试过 FoxyProxy 但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-12-02T10:30:18.660

我使用它在 about:config 中 使用 localserver 覆盖系统的 DNS
更改此值：

*   `network.dns.forceResolve`*   `network.dns.ipv4OnlyDomains`*   `network.dns.localDomains`

带有本地 DNS 服务器的 IP 地址（例如 192.168.1.88）
对不起我的英语

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-02-04T14:13:23.843

现在可以使用以下`DNS over HTTPS`功能：

打开选项，常规，滚动到最底部并打开网络设置，

在最底部，您可以找到基于 HTTPS 的 DNS：

[![dnsOverHttps](https://i.stack.imgur.com/Vv43o.png)](https://i.stack.imgur.com/Vv43o.png)

* * *

您必须使用`about:config`之前更改此设置，这是文档：

输入`about:config`火狐地址栏。

搜索： `network.trr.uri`

您可以使用以下 DNS 服务器之一：

```
Cloudflare: https://cloudflare-dns.com/dns-query
Google: https://dns.google/dns-query
Secure DNS EU: https://doh.securedns.eu/dns-query
Quad 9: https://dns.quad9.net/dns-query 
```

并设置`network.trr.mode`为 1

从这里劫持： [https ://www.ghacks.net/2018/04/02/configure-dns-over-https-in-firefox/](https://www.ghacks.net/2018/04/02/configure-dns-over-https-in-firefox/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-31T11:06:53.713

从您的问题看来，您已经有第二组可用的 DNS 服务器引用开发站点而不是实时站点。

我建议您只需在该 DNS 服务器系统或低端备用系统上运行标准 SOCKS 代理，并将该系统配置为使用开发 DNS 服务器。然后，您可以告诉 Firefox 使用该代理而不是直接下载页面。

这样做，实际的 DNS 查找将在代理机器上完成，而不是在运行 Web 浏览器的机器上完成。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-30T14:32:20.960

DNS解析通常在系统级别而不是在应用程序级别完成，因此您通常不能让一个程序使用一个dns而另一个程序使用不同的dns。我不知道任何允许您使用不同 dns 的 Firefox 扩展。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-30T14:22:48.360

为您的开发和生产服务器使用不同的名称怎么样？这应该避免任何混淆，您不必每次都编辑主机文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-30T14:34:43.843

我想知道你是否可以为 Fiddler 编写一个自定义规则来做你想做的事？IE 不使用代理，Firefox 指向 Fiddler，Fiddler 使用自定义规则将请求定向到开发服务器...

[http://www.fiddlertool.com/fiddler/](http://www.fiddlertool.com/fiddler/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-01-31T21:43:45.797

我正在使用 SwitchHost 扩展来解决这个问题： [https ://addons.mozilla.org/en-US/firefox/addon/14258](https://addons.mozilla.org/en-US/firefox/addon/14258)

它易于配置，更易于切换主机。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-01-28T22:38:41.197

由于 http 代理协议类似于原始 http 协议，您可以通过告诉 firefox 它是代理服务器来将所需流量重定向到您的开发服务器。

两个限制：

A. 这不会让你使用 https 连接。

B. 一些框架（例如：wordpress）不喜欢这种方法并以错误的方式重定向请求

只需将以下代码复制到 .pac 文件中（当然，请输入您的站点域和 IP 地址），然后只需更改代理配置即可切换开发/生产。

```
function FindProxyForURL(url, host) {
    var prox4site = {
        "mysite.com":"PROXY 10.0.1.100:80",
        "www.mysite.com":"PROXY 10.0.1.100:80"
    }

    return prox4site[host] || "DIRECT";
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-03-18T02:52:04.467

转到选项->高级->网络->设置->自动代理配置 url 并输入 8.8.8.8 All you Mozilla 流量现在使用 Google dns。

# sharepoint - Sharepoint：如何确定真实 URL 是否可用或已被站点使用

> ID：495554
> 
> 赞同：2
> 
> 时间：2009-01-30T13:55:39.897
> 
> 标签：sharepoint, url, moss

如何确定 URL 是否可用于在网站集中创建新网站，或者它是否已被其他网站、列表或库使用？

假设相对 URL "/newUrl/ 尚未使用，在您尝试访问任何 SPWeb 属性之前，以下代码实际上不会引发异常。

```
using(SPSite site = new Site("http://portal/")) 
{    
    SPWeb web = site.OpenWeb("/newUrl/"); // no exception

    string title = web.Title;  // throws exception
} 
```

当然，可以通过这种方式检查 URL 的可用性，但它更像是一种 hack，而不是好的代码。

那么有人知道如何解决这个问题吗？

再见，弗洛

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T14:09:25.860

正常的答案是

```
if(web.Exists) 
```

但是...您可能希望将此 SPWeb 包装到 using 中。

```
using(SPWeb web = site.OpenWeb("/newUrl/"))
{
   if(web.Exists)
   {
       string title = web.Title;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T14:06:53.210

```
if (web.Exists) 
```

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.exists.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.exists.aspx)

# c# - 如何从 C# 中的 INI 文件中读取值？

> ID：495557
> 
> 赞同：0
> 
> 时间：2009-01-30T13:56:51.657
> 
> 标签：c#, .net

我有一个ini文件，我想从`[DEVICE]`选项卡和下一行中读取一行`DeviceName=PHJ01444-MC35`并将值分配给一个字符串。

```
[BEGIN-DO NOT CHANGE/MOVE THIS LINE]
[ExecList]
Exec4=PilotMobileBackup v1;Ver="1.0";NoUninst=1
Exec3=MC35 108 U 02;Ver="1.0.8";NoUninst=1
Exec2=FixMGa;Ver="1.0";Bck=1
Exec1=Clear Log MC35;Ver="1.0";Bck=1
[Kiosk]
Menu8=\Program Files\PilotMobile\Pilot Mobile Backup.exe
MenuCount=8
AdminPwd=D85F72A85AE65A71BF3178CC378B260E
MenuName8=Pilot Mobile Backup
Menu7=\Windows\SimManager.exe
MenuName7=Sim Manager
UserPwd=AF2163B24AF45971
PasswordPolicy=C34B3DE916AA052DCB2A63D7DCE83F17
DisableBeam=0
DisableBT=0
DisableSDCard=0
EnableAS=1
ActionCount=0
Url=file://\Application\MCPortal.htz
AutoLaunch=0
Menu6=\Windows\solitare.exe
MenuName6=Solitare
Menu5=\Windows\bubblebreaker.exe
MenuName5=Bubble Breaker
Menu4=\Windows\wrlsmgr.exe
MenuName4=Communications
Menu3=\Windows\Calendar.exe
MenuName3=Calendar
Menu2=\Windows\tmail.exe
MenuName2=Text Messaging
Menu1=\Program Files\PilotMobile\Pilot.Mobile.exe
MenuName1=Pilot Mobile
ShowStartMenu=1
CustomTaskBar=0
IdleTimeout=0
NoTaskbar=0
PPCKeys=1111111111111111
On=1
[Status]
MCLastConn=2006/10/01 00:50:56
[Connection]
DeploySvr1=********
[Locations]
Backup=Backup
Install=\Application
[Comm]
RetryDelay=60000
NoInBoundConnect=0
TLS=0
Broadcast=1
[Info]
LID=090128-117
PWDID=081212-10
TimeSyncID={249CEE72-5918-4D18-BEA8-11E8D8D972BF}
TimeSyncErrorInterval=5
TimeSyncInterval=120
AutoTimeSync=1
SecondarySNTPServer=ntp1.uk.uu.net
DefaultSNTPServer=ntp0.uk.uu.net
DepServerTimeSyncType=4
TimeSyncServerType=1
DFID=080717-8
Platform=PPC
Method=39
SiteName=*****
[Device]
SyncTimer=4
Ver=1
DeviceID={040171BD-3603-6106-A800-FFFFFFFFFFFF}
ShowTrayIcon=1
DeviceIDType=2
DeviceClass=AADE7ECE-DF8C-4AFC-89D2-DE7C73B579D0
DeviceName=PHJ01444-MC35
NameType=2

[END-DO NOT CHANGE/MOVE THIS LINE] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-30T14:02:16.917

您可以为此使用 Windows API。见[http://jachman.wordpress.com/2006/09/11/how-to-access-ini-files-in-c-net/](http://jachman.wordpress.com/2006/09/11/how-to-access-ini-files-in-c-net/)

**编辑**：如评论中所述，该页面在原始站点上不再可用，但仍可在[Wayback Machine](https://web.archive.org/web/20061120014725/http://jachman.wordpress.com/2006/09/11/how-to-access-ini-files-in-c-net/)上访问。

[此外，MSDN 上](https://code.msdn.microsoft.com/windowsdesktop/Reading-and-Writing-Values-85084b6a)还有一篇关于访问所需功能的最新文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-30T14:12:46.040

因为将所有内容写在一行中使我成为比您更好的人：

```
string s = File.ReadAllText("inifile.ini").Split('\r', '\n').First(st => st.StartsWith("DeviceName")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T14:06:58.657

如果您想要一个非常简单但不是很干净的答案：

```
using System.IO;

StreamReader reader = new StreamReader(filename);
while(reader.ReadLine() != "[DEVICE]") { continue; }

const string DeviceNameString = "DeviceName=";
while(true) {
    string line = reader.ReadLine();
    if(line.Length < DeviceNameString.Length) { continue; }
    else if(line.Substring(0, DeviceNameString.Length) != DeviceNameString) { continue; }
    return line.Substring(DeviceNameString.Length);
} 
```

如果您只想从文件中读取一个值，这是一个合理的选择。如果您认真使用此代码，我可能会合并循环并添加一些文件检查结尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T14:12:24.387

```
string line;
string deviceName = string.Empty;
// Read the file and display it line by line.
using (System.IO.StreamReader file =
   new System.IO.StreamReader("c:\\file.ini"))
{
    while ((line = file.ReadLine()) != null)
    {
        if (line.ToLower().StartsWith("devicename"))
        {
            string[] fullName = line.Split('=');
            deviceName = fullName[1];
            break;
        }
    }
}

Console.WriteLine("Device Name =" + deviceName);
Console.ReadLine(); 
```

我相信还有其他方法。

# unit-testing - 失败的测试是否应该使连续构建失败？

> ID：495560
> 
> 赞同：9
> 
> 时间：2009-01-30T13:57:22.530
> 
> 标签：unit-testing, testing, continuous-integration

如果一个项目的测试在构建机器上作为构建过程的一部分执行，如果一组测试失败，整个构建是否会失败？
回答这个问题时应该考虑什么？哪些测试失败重要吗？

* * *

提示此问题的背景信息：

目前我正在开发一个项目，该项目具有作为构建过程的一部分完成的[NUnit](http://www.nunit.org/)测试，并在我们的[巡航控制 .net](http://ccnet.thoughtworks.com/)构建机器上执行。

该项目曾经被设置，因此如果任何测试失败，则构建失败。原因是如果测试失败，这意味着产品不工作/不完整/这是一个项目的失败，因此构建应该失败。

我们添加了一些测试，尽管它们失败了，但它们对项目并不重要（更多详细信息请参见下文）。因此，如果这些测试失败，该项目并非完全失败，我们仍然希望它能够构建。

通过的测试之一验证不正确的参数会导致异常，但未通过的测试是检查所有允许的参数都*不会*导致异常。因此，该类拒绝所有无效案例，但也拒绝一些有效案例。这对项目来说不是问题，因为被拒绝的有效参数是边缘案例，应用程序不会依赖这些案例。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-30T14:05:02.467

如果它以任何方式可行，那就去做吧。它大大减少了[破窗问题](http://www.pragprog.com/the-pragmatic-programmer/extracts/software-entropy)：

在没有（可见）缺陷的系统中，引入一个小缺陷通常被视为一个非常糟糕的主意。因此，如果您有一个绿色状态的项目（没有单元测试失败）并且您介绍了第一个失败的测试，那么您（和/或您的同行）将有动力解决问题。

另一方面，如果存在已知失败的测试，那么仅添加另一个损坏的测试被视为保持现状。

因此，您应该始终努力保持*所有*测试运行（而不仅仅是“大多数测试”）。并且将每一个失败的测试都视为构建失败的原因，这对实现这一目标有很长的路要走。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T14:00:48.823

如果单元测试失败，则某些代码的行为与预期不符。所以代码不应该被发布。

尽管您可以出于测试/修复错误的目的进行构建。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T14:05:16.193

如果您认为一个案例足够重要，可以为其编写测试，那么如果该测试失败，那么软件就失败了。仅基于此，是的，它应该认为构建失败而不是继续。如果您不使用这种推理，那么谁来决定哪些测试不重要？“如果失败了没关系，但如果失败了就不行”之间的界限在哪里？失败就是失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T14:05:47.130

我认为像您这样的良好设置应该始终成功构建，包括所有通过的单元测试。

就像 Gamecat 说的，构建本身是成功的，但是这段代码永远不应该投入生产。

想象一下，您的团队成员之一在代码中引入了一个单元测试（总是失败）涵盖的错误。它不会被测试发现，因为你允许一个测试总是失败。

在我们的团队中，我们有一个简单的政策：如果所有测试都没有通过，我们就不会将代码投入生产。这对于我们的项目经理来说也是很容易理解的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T14:06:26.910

在我看来，这实际上取决于您的单元测试，...如果您的单元测试真的是单元测试（就像它们应该是 =>“参考无尽的书籍；）”）那么构建应该会失败，因为某些东西的行为不像应该...

但大多数情况下（不幸的是经常看到），在这么多项目中，这些单元测试只涵盖一些“边缘”和/或集成测试，然后构建应该继续（是的，这是一个主观的答案；）

简而言之：你知道单元测试很好吗：失败；其他：建立在

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T14:13:04.183

真正的问题在于你失败的测试。你不应该有一个可以失败的单元测试，因为它是一个边缘案例。决定边缘情况是否重要——如果不重要，则删除单元测试；如果是，则修复代码。

就像暗示的其他一些答案一样，当单元测试失败时，这绝对是一种代码味道。如果你忍受这种气味，那么你就不太可能发现下一个问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T14:55:21.227

所有的答案都很好，这就是我决定做的：

让 NUnit 忽略不重要的测试（或者如果需要拆分失败的测试）（我在提出问题后记得这个功能）。这允许：

*   如果任何测试失败，构建可能会失败，从而减少臭味
*   被忽略的测试必须向项目经理（谁负责）进行辩护
*   任何被忽略的测试都以特殊方式标记

我认为这是最好的妥协，迫使人们修复测试，但不一定马上（但他们必须捍卫他们现在不修复它的决定，因为每个人都知道他们做了什么）。

* * *

我实际上做了什么：修复了损坏的测试。

# python - 在 Google App Engine 上构建应用程序的最佳开源 IDE？

> ID：495579
> 
> 赞同：15
> 
> 时间：2009-01-30T14:03:52.577
> 
> 标签：python, google-app-engine, ide

希望涉足 GAE 和 python，我想知道什么是最好的工具 - 谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-30T14:15:13.070

我会花时间学习诸如***emacs***之类的东西。学习曲线有点高，但是一旦习惯了，就可以从任何终端进行开发。它对 python 和许多其他库提供了极好的支持。

您必须记住 Python 是一种动态类型的语言，因此传统的 IDE 并不是真正的答案，因为它们主要是为静态类型的语言设计的。基本上你想要一些具有语法高亮、编译以及一些快捷方式和宏来让你的生活更轻松的东西...... emacs 拥有所有这些:)

我会谷歌“Emacs Python”来开始。

如果你真的不想使用 emacs，我会看看[PyDev](http://pydev.sourceforge.net/)。它是 Eclipse IDE 的扩展，可让您编写 python 代码。我的一些从事 Django 工作的朋友对此很幸运。

希望这可以帮助。

祝 GAE 好运。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-30T14:57:24.687

Netbeans 有一些非常好的 Python 开发工具

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-31T08:12:29.637

我在 Eclipse 上使用 pydev，也适用于 django！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T17:21:50.947

VIM（有足够多的插件使其类似于 IDE）

科莫多 IDE($$)

带有 Pydev 的 Eclipse

支持 Python 的 Net Bean

翼IDE($$)

SPE（Stani 的 Python 编辑器）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-30T08:49:17.633

[打开科莫多](http://www.openkomodo.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T22:14:09.157

我一直在使用 gedit 并且对它非常满意，有几个很好的插件可以让生活更轻松（例如 Class Browser）。我尝试了 eclipse，但它与您使用 Java 获得的体验不同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-31T03:46:24.697

对于我最近的 GAE 项目，我尝试了使用 pydev 的 eclipse 和使用其 python 插件的 intellij。我将 intellij 用于我的“真实”工作，因此我个人认为它是最自然且易于使用的。它不是开源的，但如果您已经拥有许可证，则无需额外费用。

我发现eclipse插件也非常好。你不会像使用 java 那样获得那么多智能感知，但我对你从动态类型语言中得到的东西印象深刻。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-03T03:36:28.647

如果您在 Mac 上，我强烈推荐[TextMate](http://macromates.com/)。IDE 非常适合在 Python、PHP、Ruby on Rails、HTML 等项目上进行编码。

价格为 52 美元，有 30 个试用版可供您自己试用。强烈推荐我最喜欢的 Mac 开发人员。

此外，如果您[在 Google Campfire 观看演示，](http://www.youtube.com/watch?v=tcbpTQXNwac)您会注意到他们正在使用 TextMate！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-14T22:21:04.313

我使用 ulipad 是快速简单的[在这里下载](http://code.google.com/p/ulipad/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-02-01T14:05:46.157

你可以试试 appengine-emacs-toolkit。[http://code.google.com/p/appengine-emacs-toolkit/](http://code.google.com/p/appengine-emacs-toolkit/)

该工具包包含两个emacs主要模式，有助于用python开发GoogleAppEngine和SinaAppEngine。

它提供了*创建新项目*、*启动本地服务器*、*打开浏览器查看项目*、*上传项目*的支持。

该工具包在 WindowsXP/7、Ubuntu 和 GoogleAppEngine-1.6.1、saepythondevguide 上进行了测试。

# .net - 我可以在 COM+ 中托管 WCF 服务吗？

> ID：495583
> 
> 赞同：1
> 
> 时间：2009-01-30T14:05:51.637
> 
> 标签：.net, wcf, com+

WCF 新手，但熟悉 COM+ - 我可以将 WCF 服务包装在 COM+ 应用程序中吗？

我意识到很多人可能会忽略这个问题并质疑我的动机（这很好），但我实际上想知道这是否从根本上也是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T14:12:26.460

是的，您可以，优秀的 Christian Weyer 可以向您展示如何：

[http://blogs.thinktecture.com/cweyer/archive/2006/07/01/414626.aspx](http://blogs.thinktecture.com/cweyer/archive/2006/07/01/414626.aspx)

更多关于 MSDN 的细节：

[http://msdn.microsoft.com/en-us/library/ms733094.aspx](http://msdn.microsoft.com/en-us/library/ms733094.aspx)

# visual-studio - 如何在单元测试仪器性能会话中分析依赖程序集中的方法？

> ID：495588
> 
> 赞同：1
> 
> 时间：2009-01-30T14:07:31.650
> 
> 标签：visual-studio, visual-studio-2008, unit-testing

我有一个 Visual Studio 2008 单元测试项目，它依赖于同一解决方案中的一个 dll 项目。通过此设置，我想使用 Visual Studio 性能会话分析单个单元测试。所述测试调用位于 dll 项目中的方法，我想查看该 dll 中的性能瓶颈在哪里。

到目前为止，一切都很好。起初看起来很简单：在 Visual Studio 测试视图中，我右键单击相关测试并选择“创建性能会话...”。在接下来的向导中，我选择了检测。但是，在运行生成的性能会话后，仅显示了位于单元测试 dll 中的方法的数据。然后我在 perf 会话中右键单击“Targets”文件夹并选择“Add Target Binary...”来添加 dll（我选择了 dll 项目文件夹中 bin/release 下的 dll）。这是因为现在也检测了 dll，但我一直缺少该 dll 中方法的性能数据。我试图从不同的位置添加 dll ...

*   dll项目文件夹下的bin/release
*   dll项目文件夹下的obj/release
*   单元测试dll项目文件夹下的bin/release

...都没有奏效。

我很感激有关如何收集依赖 dll 的性能数据的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-26T10:42:19.577

我遇到了和你完全相同的问题，但是我可以像你一样添加目标来解决它，但是有一个细微的差别：我选择了“添加目标项目”而不是“添加目标二进制文件”。然后它工作正常。

也许这是您选择的二进制文件的问题，或者可能是 VS2008 中的错误。如果可能的话，我建议您将尝试分析的二进制文件添加为解决方案中的项目。

希望这可以帮助。

# .net - 与 .NET 2.0+ 中的 List(Of T) 相比，集合有什么优势

> ID：495591
> 
> 赞同：8
> 
> 时间：2009-01-30T14:08:58.183
> 
> 标签：.net, generics, collections

我让另一位开发人员问我为什么到处使用 List ......我想了一会儿......但无法得出一个明确的答案。

如果你从集合基类继承来扩展而不是使用 List(Of T) - 你会得到什么好处？或者 - List 没有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T14:17:17.713

通用列表为您提供性能提升。

看到这个问题：

[C# 泛型是否有性能优势？](https://stackoverflow.com/questions/116988/do-c-generics-have-a-perfomance-benefit)

引用[MSDN](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)：

> **使用 List<(Of <(T>)>) 类的特定于类型的实现而不是使用 ArrayList 类或自己编写强类型包装器集合对您有利**。原因是您的实现必须完成 .NET Framework 已经为您完成的工作，并且公共语言运行时可以共享 Microsoft 中间语言代码和元数据，而您的实现则不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T14:17:33.610

List 不是线程安全的，也不打算公开。您可以使用 Collection(Of T) 代替（注意这与 CollectionBase 不同），或者简单地公开 IList(Of T) 或 IEnumerable(Of T)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:26:37.747

为速度和内部使用而设计了一个通用的 List<>。另一方面，通用 Collection<> 是为可扩展性而设计的。

Collection<> 类的优点之一是您可以覆盖一些不同的方法（ClearItems()、InsertItem()、RemoveItem() 和 SetItem()）。另一方面，泛型 List<> 类型不提供可以被覆盖的方法。

为什么这很重要？例如，未来的要求要求您在将项目添加到集合时引发 ItemAdded 事件。如果您使用了 List<> 类型，那么您没有太多选择。但是，如果您使用了 Collection<> 类，则可以公开一个新的 ItemAdded 事件并覆盖 InsertItem() 方法，以便在添加项目时引发 ItemAdded 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T15:28:04.780

类型转换会花费时间，并且在您使用泛型时会被阻止。如果您使用 List(Of T) 则不需要类型转换，因为它将是一个强类型集合。如果您使用 ArrayList ，您将从 Object 转换为您自己的类型，反之亦然，这会导致额外的开销。

除此之外，您还可以防止在编译时无法检测到的类型转换问题。（例如，当您使用数组列表时，在应该包含字符串的数组列表中添加一个 int 不是问题，但是当您在运行时不期望一个 int 时，可能会导致一个 invalidcastexception。使用泛型列表或集合可以防止这种情况，因为代码不会编译。）

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T14:20:10.097

Microsoft 推荐从 Collection(Of T) 继承。不保证 List(Of T) API 在不同版本之间保持相同。因此，如果您在公共接口中使用 List(Of T)，则在新版本的 CLR 上运行时，您的代码可能会中断。

BCL 的设计者之一 Krzysztof Cwalina 对 List<T> 有这样的看法：

> 为什么我们不建议在公共 API 中使用 List<T>
> 
> 我们不建议在公共 API 中使用 List<T> 有两个原因。
> 
> *   List<T> 不是为扩展而设计的。即你不能覆盖任何成员。例如，这意味着从属性返回 List<T> 的对象将无法在修改集合时收到通知。Collection<T> 允许您覆盖 SetItem 受保护的成员，以便在添加新项目或更改现有项目时获得“通知”。
> *   List<T> 有许多在许多情况下不相关的成员。我们说 List<T> 对于公共对象模型来说太“忙”了。想象一下 ListView.Items 属性返回 List<T> 的所有内容。现在，看看实际的 ListView.Items 返回类型；它更简单，类似于 Collection<T> 或 ReadOnlyCollection<T>。

[来源](http://blogs.msdn.com/kcwalina/archive/2005/09/26/474010.aspx)

# python - PHP 的 time() 函数的 Python 版本

> ID：495595
> 
> 赞同：4
> 
> 时间：2009-01-30T14:09:29.493
> 
> 标签：python, time

我查看了[Python Time 模块](http://docs.python.org/library/time.html)，但找不到任何能给出自 1970 年以来多少秒的整数的东西，就像 PHP 对 time() 所做的那样。

我只是在这里遗漏了一些东西，还是有一种常见的方法来做到这一点，而那里根本没有列出？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-30T14:13:19.033

```
import time
print int(time.time()) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-30T14:14:05.320

[time.time()](http://docs.python.org/library/time.html#time.time)做到了，但它可能是 float 而不是我假设你期望的 int。也就是说，在某些系统上精度可以高于 1 秒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-01T08:41:58.797

我建议阅读[“Python 中的日期和时间表示”](http://seehuhn.de/pages/pdate)。我发现它很有启发性。

# asp.net - 为什么Repeater.Items 中不包含页脚项？

> ID：495597
> 
> 赞同：5
> 
> 时间：2009-01-30T14:09:59.820
> 
> 标签：asp.net, repeater, footer

我需要从按钮的 OnClick 事件中的 FooterTemplate 内的文本框中获取值。我的第一个想法是遍历转发器上的 items-property，但正如您在此示例中看到的那样，它仅包括实际的数据绑定项，而不包括页脚项。

ASPX：

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        Item<br />
    </ItemTemplate>
    <FooterTemplate>
        Footer<br />
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </FooterTemplate>
</asp:Repeater>
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

代码隐藏.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    ListItemCollection items = new ListItemCollection();
    items.Add("value1");
    items.Add("value2");
    Repeater1.DataSource = items;
    Repeater1.DataBind();
}

protected void Button1_Click(object sender, EventArgs e)
{
    System.Diagnostics.Debug.WriteLine(Repeater1.Items.Count);
} 
```

此代码只会输出“2”作为计数，那么如何在页脚模板中引用我的文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T14:17:46.373

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.items.aspx)中，项目只是一组基于您绑定到的 DataSource 的 RepeaterItems，并且不包括 Header 或 FooterTemplates 中的项目。

如果要引用文本框，可以从转发器获取 ItemDataBound 事件的引用，您可以在其中测试页脚。

例如

```
private void Repeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
{

  if (e.Item.ItemType == ListItemType.Footer) 
  {
    TextBox textBox = e.Item.FindControl("TextBox1") as TextBox;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-11T16:19:42.820

您可以在中继器中找到控件。`RepeaterItems`这将为您提供转发器（集合）中的所有控件。现在您可以执行以下操作：

```
RepeaterItem footerItem=null;
foreach(Control cnt in Repeater1.Controls)
{
if(cnt.GetType() == typeof(RepeaterItem) && ((RepeaterItem)cnt).ItemType == ListItemType.Footer)
{
footerItem = cnt;
break;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-25T02:05:39.653

页脚应该是中继器的最后一个子控件，因此您可以执行类似的操作。

```
RepeaterItem riFooter = Repeater1.Controls[Repeater1.Controls.Count - 1] as RepeaterItem;
if (riFooter != null && riFooter.ItemType == ListItemType.Footer) {
    TextBox TextBox1 = riFooter.FindControl("TextBox1") as TextBox;
    if (TextBox1 != null) {
        TextBox1.Text = "Test";
    }
} 
```

# makefile - GNU Make 中 CPPFLAGS 和 CXXFLAGS 的区别

> ID：495598
> 
> 赞同：148
> 
> 时间：2009-01-30T14:10:03.673
> 
> 标签：makefile, gnu-make

GNU Make 中的 CPPFLAGS 和 CXXFLAGS 有什么区别？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2009-01-30T14:23:40.387

`CPPFLAGS`应该用于**C** **P** re **P**处理器的标志；`CXXFLAGS`用于 C++ 编译器的标志。

make 中的默认规则（无论如何在我的机器上）传递`CPPFLAGS`给几乎所有内容，`CFLAGS`仅在编译和链接 C 时`CXXFLAGS`传递，并且仅在编译和链接 C++ 时传递。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-01-30T14:16:03.303

默认情况下，`CPPFLAGS`将提供给 C 预处理器，而`CXXFLAGS`将提供给 C++ 编译器。

[GNU Make Manual](http://www.gnu.org/software/make/manual/)是解决此类问题的好资源（请参阅[隐式变量](http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html#Implicit-Variables)）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-01-30T14:17:39.697

CPPFLAGS 用于 C 预处理器，而 CXXFLAGS 用于 C++ 编译器。

见[这里](https://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T21:27:50.847

默认情况下，它们被设置为某些东西。

在实践中，您需要知道每个项目的作用。几乎没有人使用 make 内置的那些默认值，如果你依赖于，例如，CPPFLAGS 意思是“C 预处理器的标志”，你会发现你关心的项目已经用它来表示“C++ 编译器的标志”反而。CFLAGS 标志是否被传递给 C++ 编译行？有时。不总是。等等等等等等。

# oracle - 删除许多带有子表的记录

> ID：495603
> 
> 赞同：1
> 
> 时间：2009-01-30T14:12:15.930
> 
> 标签：oracle, parent-child

情况：

*   表 TBL 有大约 10k 个要删除的条目，
*   表 TBL 有 14 个子表，删除规则为“无操作”，
*   我想删除子表中的 10k 个条目和引用的条目。

程序：

*   删除子表中的记录，
*   禁用约束（如果没有禁用约束，则下一步中的删除需要永远），
*   删除 TBL 表中的记录，
*   启用约束。

有没有更优雅的方法来做到这一点？

问题是第三步耗时太长，因为它正在检查 14 个大表是否存在不存在的记录。我的程序有很好的执行时间，但我认为有更优雅的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T14:45:36.580

听起来您需要在子表上索引外键。每次删除子表上没有索引的父记录时，它必须对子表进行全表扫描以检查外键约束是否被破坏。

使用索引，最坏的情况是索引范围扫描。

**编辑**：更多信息和一个脚本来确定这是否是你的问题可以在这里找到。 [http://asktom.oracle.com/tkyte/unindex/index.html](http://asktom.oracle.com/tkyte/unindex/index.html)

# .net - 使用对象初始化器语法的操作顺序

> ID：495616
> 
> 赞同：30
> 
> 时间：2009-01-30T14:14:56.300
> 
> 标签：.net, syntax, object-initializers

我使用对象初始化器语法设置属性的顺序是否以完全相同的顺序执行？

例如，如果我这样做：

```
var s = new Person { FirstName = "Micah",
                     LastName = "Martin",
                     IsLoaded = true
                   } 
```

每个属性都会以相同的顺序设置吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-01-30T14:16:27.297

是的。

很抱歉被打扰（我实际上必须经常做一些工作）。规范没有*明确*说明，但它在第 7.6.10.2 节中清楚地说明了 IMO：

* * *

对象初始化器由一系列成员初始化器组成，由 { 和 } 标记括起来并用逗号分隔。

*（注意这里的“序列”一词，而不是“集合”。我个人认为这很重要，因为序列是有序的。）*

以下类表示具有两个坐标的点：

```
public class Point
{
    int x, y;
    public int X { get { return x; } set { x = value; } }
    public int Y { get { return y; } set { y = value; } }
} 
```

可以按如下方式创建和初始化 Point 的实例：

```
Point a = new Point { X = 0, Y = 1 }; 
```

具有相同的效果

```
Point __a = new Point();
__a.X = 0;
__a.Y = 1; 
Point a = __a; 
```

其中 __a 是一个不可见且不可访问的临时变量。

* * *

编辑：我收到了 Mads Torgersen 的回应，他基本上说现在可以做的任何事情都会保持秩序。将来可能会出现一些奇怪的情况，在奇怪的情况下，如果您正在做一些事情*而*不是设置属性/字段，那么订单不会被保留，但这将取决于语言的去向。

值得指出的是，这里实际上有很多步骤——参数求值的执行顺序（即 RHS 位）和赋值的执行顺序。例如，如果您有：

```
new Foo
{
    A = X,
    B = Y
} 
```

以下所有顺序都是可能的，同时仍保持实际属性执行的顺序（A 和 B）：

*   评估 X，分配给 A，评估 Y，分配给 B
*   评估 X，评估 Y，分配给 A，分配给 B
*   评估 Y，评估 X，分配给 A，分配给 B

我相信第一个选项是实际采用的选项，但这只是为了证明它的作用远不止眼前所见。

我也会*非常*警惕实际编写依赖于此的代码......

# powershell - 如何规范化 PowerShell 中的路径？

> ID：495618
> 
> 赞同：109
> 
> 时间：2009-01-30T14:15:34.053
> 
> 标签：powershell, path

我有两条路：

```
fred\frog 
```

和

```
..\frag 
```

我可以像这样在 PowerShell 中将它们连接在一起：

```
join-path 'fred\frog' '..\frag' 
```

这给了我这个：

```
fred\frog\..\frag 
```

但我不想那样。我想要一个没有双点的标准化路径，如下所示：

```
fred\frag 
```

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2009-01-31T16:25:10.000

您可以使用 resolve-path 将 ..\frag 扩展到其完整路径：

```
PS > resolve-path ..\frag 
```

尝试使用 combine() 方法规范化路径：

```
[io.path]::Combine("fred\frog",(resolve-path ..\frag).path) 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-12-12T19:39:35.883

您可以使用`$pwd`,`Join-Path`和的组合`[System.IO.Path]::GetFullPath`来获得完全限定的扩展路径。

由于`cd`( `Set-Location`) 不会更改进程的当前工作目录，因此只需将相对文件名传递给不理解 PowerShell 上下文的 .NET API，可能会产生意想不到的副作用，例如解析为基于初始工作的路径目录（不是您当前的位置）。

你要做的是首先限定你的路径：

```
Join-Path (Join-Path $pwd fred\frog) '..\frag' 
```

这产生（给定我当前的位置）：

```
C:\WINDOWS\system32\fred\frog\..\frag 
```

有了绝对基础，现在可以安全地调用 .NET API `GetFullPath`：

```
[System.IO.Path]::GetFullPath((Join-Path (Join-Path $pwd fred\frog) '..\frag')) 
```

这为您提供了完全合格的路径，并`..`正确解析：

```
C:\WINDOWS\system32\fred\frag 
```

就个人而言，这也不复杂，我不屑于为此依赖外部脚本的解决方案，这是一个简单的问题，而通过`Join-Path`and `$pwd`(`GetFullPath`只是为了让它漂亮) 解决了这个问题。如果您只想保留*相关部分*，您只需添加`.Substring($pwd.Path.Trim('\').Length + 1)`并瞧！

```
fred\frag 
```

# 更新

感谢@Dangph 指出了极端`C:\`情况。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2009-01-30T15:22:06.447

您也可以使用[Path.GetFullPath](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)，尽管（与 Dan R 的回答一样）这将为您提供整个路径。用法如下：

```
[IO.Path]::GetFullPath( "fred\frog\..\frag" ) 
```

或者更有趣的是

```
[IO.Path]::GetFullPath( (join-path "fred\frog" "..\frag") ) 
```

两者都会产生以下结果（假设您的当前目录是 D:\）：

```
D:\fred\frag 
```

请注意，此方法不会尝试确定 fred 或 frag 是否实际存在。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-06-06T14:18:24.543

接受的答案是一个很大的帮助，但是它也不能正确地“规范化”绝对路径。在下面找到我的衍生作品，它标准化了绝对和相对路径。

```
function Get-AbsolutePath ($Path)
{
    # System.IO.Path.Combine has two properties making it necesarry here:
    #   1) correctly deals with situations where $Path (the second term) is an absolute path
    #   2) correctly deals with situations where $Path (the second term) is relative
    # (join-path) commandlet does not have this first property
    $Path = [System.IO.Path]::Combine( ((pwd).Path), ($Path) );

    # this piece strips out any relative path modifiers like '..' and '.'
    $Path = [System.IO.Path]::GetFullPath($Path);

    return $Path;
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2011-02-13T02:51:55.270

任何非 PowerShell 路径操作函数（例如 System.IO.Path 中的那些）在 PowerShell 中都不可靠，因为 PowerShell 的提供程序模型允许 PowerShell 的当前路径与 Windows 认为的进程工作目录不同。

此外，您可能已经发现，PowerShell 的 Resolve-Path 和 Convert-Path cmdlet 对于将相对路径（包含 '..' 的那些）转换为驱动器限定的绝对路径很有用，但如果引用的路径不存在，它们会失败。

以下非常简单的 cmdlet 应该适用于不存在的路径。即使找不到“fred”或“frag”文件或文件夹（并且当前的 PowerShell 驱动器为“d:”），它也会将“fred\frog\..\frag”转换为“d:\fred\frag” .

```
function Get-AbsolutePath {
    [CmdletBinding()]
    param (
        [Parameter(Mandatory = $true, ValueFromPipeline = $true, ValueFromPipelineByPropertyName = $true)]
        [string[]]
        $Path
    )

    process {
        $Path | ForEach-Object {
            $PSCmdlet.SessionState.Path.GetUnresolvedProviderPathFromPSPath($_)
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-09-04T02:15:54.317

如果路径包含限定符（驱动器号），那么[x0n 对 Powershell 的回答：解析可能不存在的路径？](https://stackoverflow.com/a/3040982/44515)将规范化路径。如果路径不包含限定符，它仍然会被规范化，但会返回相对于当前目录的完全限定路径，这可能不是您想要的。

```
$p = 'X:\fred\frog\..\frag'
$ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p)
X:\fred\frag

$p = '\fred\frog\..\frag'
$ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p)
C:\fred\frag

$p = 'fred\frog\..\frag'
$ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p)
C:\Users\WileCau\fred\frag 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-28T05:05:50.457

这个库很好：[NDepend.Helpers.FileDirectoryPath](http://www.codeplex.com/FileDirectoryPath)。

**编辑：**这就是我想出的：

```
[Reflection.Assembly]::LoadFrom("path\to\NDepend.Helpers.FileDirectoryPath.dll") | out-null

Function NormalizePath ($path)
{
    if (-not $path.StartsWith('.\'))  # FilePathRelative requires relative paths to begin with '.'
    {
        $path = ".\$path"
    }

    if ($path -eq '.\.')  # FilePathRelative can't deal with this case
    {
        $result = '.'
    }
    else
    {
        $relPath = New-Object NDepend.Helpers.FileDirectoryPath.FilePathRelative($path)
        $result = $relPath.Path
    }

    if ($result.StartsWith('.\')) # remove '.\'. 
    {
        $result = $result.SubString(2)
    }

    $result
} 
```

像这样称呼它：

```
> NormalizePath "fred\frog\..\frag"
fred\frag 
```

请注意，此代码段需要 DLL 的路径。您可以使用一个技巧来查找包含当前正在执行的脚本的文件夹，但在我的情况下，我有一个可以使用的环境变量，所以我只是使用了它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-31T01:46:27.417

这给出了完整路径：

```
(gci 'fred\frog\..\frag').FullName 
```

这给出了相对于当前目录的路径：

```
(gci 'fred\frog\..\frag').FullName.Replace((gl).Path + '\', '') 
```

出于某种原因，它们仅`frag`在文件而不是`directory`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-20T22:57:03.023

创建一个函数。此功能将规范化系统上不存在的路径以及不添加驱动器号。

```
function RemoveDotsInPath {
  [cmdletbinding()]
  Param( [Parameter(Position=0,  Mandatory=$true)] [string] $PathString = '' )

  $newPath = $PathString -creplace '(?<grp>[^\n\\]+\\)+(?<-grp>\.\.\\)+(?(grp)(?!))', ''
  return $newPath
} 
```

前任：

```
$a = 'fooA\obj\BusinessLayer\..\..\bin\BusinessLayer\foo.txt'
RemoveDotsInPath $a
'fooA\bin\BusinessLayer\foo.txt' 
```

感谢 Oliver Schadlich 在 RegEx 方面的帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-30T14:37:06.927

如果您需要摆脱 .. 部分，您可以使用 System.IO.DirectoryInfo 对象。在构造函数中使用“fred\frog..\frag”。FullName 属性将为您提供规范化的目录名称。

唯一的缺点是它会给你完整的路径（例如c:\test\fred\frag）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-23T18:52:03.243

此处注释的权宜之计部分结合在一起，使它们统一了相对路径和绝对路径：

```
[System.IO.Directory]::SetCurrentDirectory($pwd)
[IO.Path]::GetFullPath($dapath) 
```

一些样本：

```
$fps = '.', 'file.txt', '.\file.txt', '..\file.txt', 'c:\somewhere\file.txt'
$fps | % { [IO.Path]::GetFullPath($_) } 
```

输出：

```
C:\Users\thelonius\tests
C:\Users\thelonius\tests\file.txt
C:\Users\thelonius\tests\file.txt
C:\Users\thelonius\file.txt
c:\somewhere\file.txt 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-01-30T14:26:08.960

好吧，一种方法是：

```
Join-Path 'fred\frog' '..\frag'.Replace('..', '') 
```

等等，也许我误解了这个问题。在您的示例中，frag 是青蛙的子文件夹吗？

# delphi - 支持 UTF-8 或 Unicode 的 Delphi SMTP 组件

> ID：495619
> 
> 赞同：1
> 
> 时间：2009-01-30T14:15:38.967
> 
> 标签：delphi, unicode, smtp, delphi-2009, indy

Delphi 2009 附带的 Indy 10 SMTP 组件似乎不能正确支持主题和正文中的 unicode [。](https://forums.codegear.com/thread.jspa?messageID=43720)

有谁知道一个好的替代方案，或者是否有人对 Indy10 进行了必要的更改来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T16:34:45.753

我还要注意，大多数邮件服务器可能无法在邮件主题行中正确处理 Unicode。我还没有看到任何关于此的真实统计数据，但我的猜测是邮件服务器的一个非常健康的百分比仍然期望 ascii 主题行，因为我相信这是 RFC 的定义。

（当然可以对消息正文进行编码以确保它通过。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T20:54:25.227

您可以使用 Indy 10 查看此解决方案（在俄罗斯字符集上测试）

[http://dev-doc.blogspot.com/2012/08/delphi-indy-10-ssl-and-encoding-issues.html](http://dev-doc.blogspot.com/2012/08/delphi-indy-10-ssl-and-encoding-issues.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T18:41:58.540

Indy 10 自 D2009 的初始版本以来已经更新，现在可以更好地处理 Unicode。查看 Indy 的 SVN 中当前的 Tiburon 快照。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T16:28:09.790

我肯定会从 nSoftware.com 看 IPWorks。他们的最新版本应该完全兼容 Delphi 2009。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T17:33:32.123

我会看一下[Synapse](http://synapse.ararat.cz/doku.php/download)，它确实可以正确处理主题和正文中的 unicode。您需要通过[SVN](https://synalist.svn.sourceforge.net/svnroot/synalist/trunk/)存储库下载存储库，该存储库比网站上列出的可供下载的版本更新。SVN 版本包括对 Delphi 2009 的支持。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-31T04:51:09.307

EasyMail 说它支持 Rob 提到的 RFC 2047 处理非 ascii 主题行：

[http://www.componentsource.com/products/easymail-objects/summary.html](http://www.componentsource.com/products/easymail-objects/summary.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-02T01:43:49.700

最近在 Indy 10 的 IdHeaderoderUTF 类中发现了一个错误，该错误会阻止 UTF-7 和 UTF-8 在对包含 Unicode 字符的电子邮件标头进行编码时正常工作。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2009-02-05T16:15:50.823

感谢大家的建议，我想我找到了一个真正有效的组件。它是一个 ActiveX 而不是 Delphi 组件，但可以解决问题。很好很简单。

该组件是 [Chilkat SMTP 组件](http://www.chilkatsoft.com/email-activex.asp)。这里的[代码示例](http://www.example-code.com/delphi/delphi-japanese-email.asp)完全符合我的要求，并且可以正常工作！！！

# sql - MSSQL：禁用一个 INSERT 的触发器

> ID：495629
> 
> 赞同：16
> 
> 时间：2009-01-30T14:18:51.660
> 
> 标签：sql, sql-server, insert, triggers

这个问题与 SQL Server 2005 非常相似[：T-SQL to temporary disable a trigger](https://stackoverflow.com/questions/123558/sql-server-2005-t-sql-to-temporarily-disable-a-trigger)

但是，我不想禁用所有触发器，甚至不想禁用一批命令，而只想禁用一个 INSERT。

我必须处理原始作者将一些应用程序逻辑放入触发器的商店系统（坏主意！）。只要您不尝试以不同于原始“管理前端”的方式插入数据，该应用程序逻辑就可以正常工作。我的工作是编写一个“从暂存系统导入”工具，所以我已经准备好所有数据。当我尝试插入它时，触发器会用生成的产品代码（不是 IDENTITY 数字 ID！）覆盖现有的产品代码。为了生成代码，它使用自动生成的插入到另一个表的 ID，因此我什至无法使用 @@IDENTITY 来查找我刚刚插入的列并使用实际的产品代码更新插入的行。

我可以采取任何方式来避免极其尴尬的代码（在产品名称中插入一些随机字符，然后尝试找到带有随机字符的行来更新它）。

那么：有没有办法为**一个**INSERT 禁用触发器（甚至只是一个）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-30T14:51:30.720

您可能会发现这很有帮助：

[禁用特定 SQL 语句或会话的触发器](http://www.mssqltips.com/tip.asp?tip=1591)

但是，您也可能面临另一个问题。如果我正确理解您的情况，您的系统默认会自动插入产品代码（通过生成值）。现在您需要插入由某个登台系统创建的产品，并且该产品的产品代码是由登台系统创建的，您希望手动将其插入实时系统。

如果你真的必须这样做，你需要确保你的实时应用程序生成的代码不会与你手动插入的代码冲突——我假设它们是唯一的。

其他方法是允许系统生成新代码并在需要时覆盖任何相应的数据。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-30T14:39:25.610

您可以使用以下方法禁用表上的触发器：

```
ALTER TABLE MyTable DISABLE TRIGGER ALL 
```

但这适用于所有会话，而不仅仅是您当前的连接..这显然是一件非常糟糕的事情:-)

最好的方法是更改​​触发器本身，以便它决定是否需要运行，无论是在表上使用“插入类型”标志还是其他方式，如果您已经存储了某种类型。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-30T14:36:14.633

而不是禁用触发器，您可以不更改触发器的行为。在有问题的表中添加一个新的可空列，称为“insertedFromImport”。

在触发器中更改代码，以便触发器的违规位仅在“insertedFromImport”为空的行上运行。当您将记录集“insertedFromImport”插入非空值时。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-04-21T19:39:33.830

禁用触发器、插入、提交。

```
SET IDENTITY_INSERT Test ON
GO

BEGIN TRAN

DISABLE TRIGGER trg_Test ON Test

INSERT INTO Test (MyId, MyField) 
    VALUES (999, 'foo')

ENABLE TRIGGER trg_Test ON Test

COMMIT TRAN

SET IDENTITY_INSERT Test OFF
GO 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T14:26:52.780

您可以检查 SUSER_SNAME() 并仅在管理前端的上下文中运行吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T15:27:06.000

我看到很多可能会造成问题的事情。首先更改触发器以考虑多个记录导入。这可能会解决您的问题。不要关闭触发器，因为它对所有人都关闭，而不仅仅是您。如果您必须在执行此操作之前将数据库置于单用户用户模式，并在非工作时间执行您的任务。

接下来，在任何情况下都不要使用@@identity 来获取刚刚插入的值！请改用 scope_identity。如果表上的触发器也插入到具有标识字段的其他表中，@@identity 将返回错误的值。如果您现在通过您的系统使用@@identity（因为我们知道您的系统有触发器），那么您绝对的首要任务必须是立即找到并更改代码中@@identity 的所有实例。如果不这样做，您可能会遇到严重的数据完整性问题。这是一个“停止所有工作，直到解决这个问题”的问题。

至于获取刚刚插入的信息，请考虑在插入过程中创建一个 batchid，然后将一个名为 batchid 的列（可以为空，因此不会影响其他插入）添加到表中。然后你可以回调你通过batchid插入的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T15:08:01.480

如果您使用 BULK INSERT 插入，则可以仅为插入禁用触发器。

我很确定批量插入需要文件系统上的数据文件才能导入，因此您不能只使用 T-SQL。

要使用 BULK INSERT，您需要 INSERT 和 ADMINISTRATOR BULK OPERATION 权限。如果您禁用触发器或约束，您还需要 ALTER TABLE 权限。

如果您使用的是 windows 身份验证，您的 windows 用户将需要从文件中读取访问权限。如果使用混合模式身份验证，则 SQl 服务器服务帐户需要从文件中读取访问权限。

使用 BULK IMPORT 导入时，默认情况下禁用触发器。

更多信息：http: [//msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

# .net - 使用 ASP.NET MVC 的 jQuery 表单身份验证

> ID：495634
> 
> 赞同：24
> 
> 时间：2009-01-30T14:19:42.000
> 
> 标签：.net, jquery, asp.net-mvc, forms-authentication

是否可以使用 jQuery ajax 调用通过 ASP.NET MVC 执行表单身份验证？我一直找不到任何这样的例子。

更具体地说，如何在页面上设置 auth cookie（没有重定向），以便我可以发出连续的经过身份验证的 ajax 请求？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-30T14:25:21.600

是的，这是可能的。[只需使用mike bosch 在此处描述](http://weblogs.asp.net/mikebosch/archive/2008/02/15/asp-net-mvc-submitting-ajax-form-with-jquery.aspx)的方法提交登录表单，并返回带有 returnUrl 的 json 数据结构（如果有）。

我创建了一个轻量级的 LoginResultDTO 类，我以 json 的形式返回：

```
public class LoginResultDTO
{
  public bool Success {get;set;}
  public string Message {get;set;}
  public string ReturnUrl {get;set;}
} 
```

这是我的登录视图中的一个脚本块：

```
<script type="text/javascript">
        $(document).ready(function() {
            var form = $($("form")[0]);
            form.submit(function() {
                var data = form.serialize();
                $.post(form.attr("action"), data, function(result, status) {
                    if (result.Success && result.ReturnUrl) {
                            location.href = result.ReturnUrl;
                    } else {
                        alert(result.Message);
                    }
                }, "json");
                return false;
            });
        });
</script> 
```

这将 ajax 包装登录表单。请注意，这是可能的 javascript 代码的最简单实现，但它是一个开始的地方。

然后我在 AccountController 中修改了我的 LogOn 操作，并在相关位置放置了如下内容：

```
if(Request.IsAjaxRequest())
{
  return Json(new LoginResultDTO{Success=true,Message="Successfully logged in"});
}else
{
  return View();
} 
```

所以这是一个超轻量但相当完整的 jquery 身份验证如何在 asp.net mvc 中完成的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T16:52:26.747

看看[xVal](http://xval.codeplex.com/)。它可以使用任何客户端验证库，但默认使用[jQuery](http://docs.jquery.com/Plugins/Validation)验证。

# javascript - 如何使用 JavaScript 从特定日期获取日期

> ID：495644
> 
> 赞同：8
> 
> 时间：2009-01-30T14:22:41.713
> 
> 标签：javascript, date

我是 JavaScript 新手。我的要求是 T 想要在特定日期（如星期日、星期一...）弹出一条消息，直到选择日期。

我尝试`getday()`了功能，但它没有用。请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-30T14:26:36.883

```
var date = new Date();
var day = date.getDay(); 
```

`day`现在拥有一个从零到六的数字；零是星期日，一是星期一，依此类推。

所以剩下的就是将该数字翻译成英文（或任何其他语言）字符串作为日期名称：

```
var name = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][day]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T14:30:14.960

```
var days= ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
var today = new Date();
document.write(days[today.getDay()]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T14:27:56.540

[这个页面](http://javascript.about.com/library/bldatenames.htm)似乎为您提供了您所需要的。

> 我们要做的是在所有日期中添加 getMonthName() 和 getDayName() 方法，这样我们就可以通过直接调用这些新方法来获取月份名称或日期名称，而不必调用 getMonth() 或 getDay()然后进行相应名称的数组查找。

然后你可以这样做：

```
var today = new Date;
alert(today.getDayName()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-11T22:02:31.293

使用 ECMAScript 国际化 API，它是 ECMA 402 的一部分，它的第二版是与 ECMAScript 2015，又名第 6 版，又名 ES6 一起引入的。

```
const knownMonday = new Date(Date.UTC(2000, 0, 3, 0, 0, 0));
const mondayName = new Intl.DateTimeFormat([], {
  weekday: 'long',
  timeZone: 'UTC'
}).format(knownMonday);
console.log(`Name of Monday in current "locale": "${mondayName}"`);
```

请注意，虽然这需要更多代码，但它使您不必在您编写的每个应用程序中以您想要支持的每种语言输入日期的名称。

另请注意，我曾经`Date.UTC(year, month, day)`初始化`Date`and `timeZone: 'UTC'`while 格式化。这是因为不知道读者可能在哪个时区；鉴于此，我在声明和格式中都使用 UTC，`Date`以确保不会因时区差异而发生任何变化。

# c# - 序列化包含字典成员的类

> ID：495647
> 
> 赞同：151
> 
> 时间：2009-01-30T14:23:46.470
> 
> 标签：c#, .net, serialization, dictionary

扩展我[之前的问题](https://stackoverflow.com/questions/489173/writing-xml-with-c)，我决定（反）序列化我的配置文件类，效果很好。

我现在想存储要映射的驱动器号的关联数组（键是驱动器号，值是网络路径）并尝试使用`Dictionary`,`HybridDictionary`和`Hashtable`为此，但在调用`ConfigFile.Load()`or时总是出现以下错误`ConfigFile.Save()`：

> 反映类型“App.ConfigFile”的错误。[snip] System.NotSupportedException：无法序列化成员 App.Configfile.mappedDrives [snip]

从我读过的字典和哈希表可以序列化，那么我做错了什么？

```
[XmlRoot(ElementName="Config")]
public class ConfigFile
{
    public String guiPath { get; set; }
    public string configPath { get; set; }
    public Dictionary<string, string> mappedDrives = new Dictionary<string, string>();

    public Boolean Save(String filename)
    {
        using(var filestream = File.Open(filename, FileMode.OpenOrCreate,FileAccess.ReadWrite))
        {
            try
            {
                var serializer = new XmlSerializer(typeof(ConfigFile));
                serializer.Serialize(filestream, this);
                return true;
            } catch(Exception e) {
                MessageBox.Show(e.Message);
                return false;
            }
        }
    }

    public void addDrive(string drvLetter, string path)
    {
        this.mappedDrives.Add(drvLetter, path);
    }

    public static ConfigFile Load(string filename)
    {
        using (var filestream = File.Open(filename, FileMode.Open, FileAccess.Read))
        {
            try
            {
                var serializer = new XmlSerializer(typeof(ConfigFile));
                return (ConfigFile)serializer.Deserialize(filestream);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message + ex.ToString());
                return new ConfigFile();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2009-11-13T12:40:10.610

[Paul Welter 的博客](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)有一个解决方案- XML Serializable Generic Dictionary

> 出于某种原因，.net 2.0 中的通用 Dictionary 不是 XML 可序列化的。以下代码片段是一个可序列化的 xml 通用字典。通过实现 IXmlSerializable 接口，字典是可序列化的。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Xml.Serialization;

[XmlRoot("dictionary")]
public class SerializableDictionary<TKey, TValue>
    : Dictionary<TKey, TValue>, IXmlSerializable
{
    public SerializableDictionary() { }
    public SerializableDictionary(IDictionary<TKey, TValue> dictionary) : base(dictionary) { }
    public SerializableDictionary(IDictionary<TKey, TValue> dictionary, IEqualityComparer<TKey> comparer) : base(dictionary, comparer) { }
    public SerializableDictionary(IEqualityComparer<TKey> comparer) : base(comparer) { }
    public SerializableDictionary(int capacity) : base(capacity) { }
    public SerializableDictionary(int capacity, IEqualityComparer<TKey> comparer) : base(capacity, comparer) { }

    #region IXmlSerializable Members
    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));
        XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));

        bool wasEmpty = reader.IsEmptyElement;
        reader.Read();

        if (wasEmpty)
            return;

        while (reader.NodeType != System.Xml.XmlNodeType.EndElement)
        {
            reader.ReadStartElement("item");

            reader.ReadStartElement("key");
            TKey key = (TKey)keySerializer.Deserialize(reader);
            reader.ReadEndElement();

            reader.ReadStartElement("value");
            TValue value = (TValue)valueSerializer.Deserialize(reader);
            reader.ReadEndElement();

            this.Add(key, value);

            reader.ReadEndElement();
            reader.MoveToContent();
        }
        reader.ReadEndElement();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));
        XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));

        foreach (TKey key in this.Keys)
        {
            writer.WriteStartElement("item");

            writer.WriteStartElement("key");
            keySerializer.Serialize(writer, key);
            writer.WriteEndElement();

            writer.WriteStartElement("value");
            TValue value = this[key];
            valueSerializer.Serialize(writer, value);
            writer.WriteEndElement();

            writer.WriteEndElement();
        }
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2009-01-30T14:42:48.350

您不能序列化实现 IDictionary 的类。看看这个[链接](http://msdn.microsoft.com/en-us/library/ms950721.aspx)。

> 问：为什么我不能序列化哈希表？
> 
> A：XmlSerializer 不能处理实现 IDictionary 接口的类。这部分是由于进度限制，部分是由于哈希表在 XSD 类型系统中没有对应的事实。唯一的解决方案是实现一个不实现 IDictionary 接口的自定义哈希表。

所以我认为你需要为此创建自己的字典版本。检查这个[其他问题](https://stackoverflow.com/questions/67959/c-xml-serialization-gotchas)。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-02-15T23:05:23.930

而不是使用`XmlSerializer`，您可以使用`System.Runtime.Serialization.DataContractSerializer`. 这可以毫不费力地序列化字典和接口。

这是一个完整示例的链接，[http ://theburningmonk.com/2010/05/net-tips-xml-serialize-or-deserialize-dictionary-in-csharp/](http://theburningmonk.com/2010/05/net-tips-xml-serialize-or-deserialize-dictionary-in-csharp/)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-10-25T22:04:21.197

创建一个序列化代理。

例如，您有一个具有 Dictionary 类型的公共属性的类。

要支持这种类型的 Xml 序列化，请创建一个通用键值类：

```
public class SerializeableKeyValue<T1,T2>
{
    public T1 Key { get; set; }
    public T2 Value { get; set; }
} 
```

将 XmlIgnore 属性添加到您的原始属性：

```
 [XmlIgnore]
    public Dictionary<int, string> SearchCategories { get; set; } 
```

公开一个数组类型的公共属性，该属性包含一个 SerializableKeyValue 实例数组，这些实例用于序列化和反序列化到 SearchCategories 属性中：

```
 public SerializeableKeyValue<int, string>[] SearchCategoriesSerializable
    {
        get
        {
            var list = new List<SerializeableKeyValue<int, string>>();
            if (SearchCategories != null)
            {
                list.AddRange(SearchCategories.Keys.Select(key => new SerializeableKeyValue<int, string>() {Key = key, Value = SearchCategories[key]}));
            }
            return list.ToArray();
        }
        set
        {
            SearchCategories = new Dictionary<int, string>();
            foreach (var item in value)
            {
                SearchCategories.Add( item.Key, item.Value );
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2011-06-01T17:39:04.020

您应该探索 Json.Net，它非常易于使用，并允许直接在 Dictionary 中反序列化 Json 对象。

[james_newtonking](http://james.newtonking.com)

例子：

```
string json = @"{""key1"":""value1"",""key2"":""value2""}";
Dictionary<string, string> values = JsonConvert.DeserializeObject<Dictionary<string, string>>(json); 
Console.WriteLine(values.Count);
// 2
Console.WriteLine(values["key1"]);
// value1 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-01-30T14:34:22.203

字典和哈希表不能用`XmlSerializer`. 因此，您不能直接使用它们。一种解决方法是使用该`XmlIgnore`属性对序列化程序隐藏这些属性，并通过可序列化的键值对列表公开它们。

PS：构建一个`XmlSerializer`非常昂贵，所以如果有机会重用它，请始终缓存它。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-04-08T22:54:07.197

我想要一个使用 xml 属性作为键/值的 SerializableDictionary 类，所以我改编了 Paul Welter 的类。

这会产生如下 xml：

```
<Dictionary>
  <Item Key="Grass" Value="Green" />
  <Item Key="Snow" Value="White" />
  <Item Key="Sky" Value="Blue" />
</Dictionary>" 
```

代码：

```
using System.Collections.Generic;
using System.Xml;
using System.Xml.Linq;
using System.Xml.Serialization;

namespace DataTypes {
    [XmlRoot("Dictionary")]
    public class SerializableDictionary<TKey, TValue>
        : Dictionary<TKey, TValue>, IXmlSerializable {
        #region IXmlSerializable Members
        public System.Xml.Schema.XmlSchema GetSchema() {
            return null;
        }

        public void ReadXml(XmlReader reader) {
            XDocument doc = null;
            using (XmlReader subtreeReader = reader.ReadSubtree()) {
                doc = XDocument.Load(subtreeReader);
            }
            XmlSerializer serializer = new XmlSerializer(typeof(SerializableKeyValuePair<TKey, TValue>));
            foreach (XElement item in doc.Descendants(XName.Get("Item"))) {
                using(XmlReader itemReader =  item.CreateReader()) {
                    var kvp = serializer.Deserialize(itemReader) as SerializableKeyValuePair<TKey, TValue>;
                    this.Add(kvp.Key, kvp.Value);
                }
            }
            reader.ReadEndElement();
        }

        public void WriteXml(System.Xml.XmlWriter writer) {
            XmlSerializer serializer = new XmlSerializer(typeof(SerializableKeyValuePair<TKey, TValue>));
            XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
            ns.Add("", "");
            foreach (TKey key in this.Keys) {
                TValue value = this[key];
                var kvp = new SerializableKeyValuePair<TKey, TValue>(key, value);
                serializer.Serialize(writer, kvp, ns);
            }
        }
        #endregion

        [XmlRoot("Item")]
        public class SerializableKeyValuePair<TKey, TValue> {
            [XmlAttribute("Key")]
            public TKey Key;

            [XmlAttribute("Value")]
            public TValue Value;

            /// <summary>
            /// Default constructor
            /// </summary>
            public SerializableKeyValuePair() { }
        public SerializableKeyValuePair (TKey key, TValue value) {
            Key = key;
            Value = value;
        }
    }
}
} 
```

单元测试：

```
using System.IO;
using System.Linq;
using System.Xml;
using System.Xml.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace DataTypes {
    [TestClass]
    public class SerializableDictionaryTests {
        [TestMethod]
        public void TestStringStringDict() {
            var dict = new SerializableDictionary<string, string>();
            dict.Add("Grass", "Green");
            dict.Add("Snow", "White");
            dict.Add("Sky", "Blue");
            dict.Add("Tomato", "Red");
            dict.Add("Coal", "Black");
            dict.Add("Mud", "Brown");

            var serializer = new System.Xml.Serialization.XmlSerializer(dict.GetType());
            using (var stream = new MemoryStream()) {
                // Load memory stream with this objects xml representation
                XmlWriter xmlWriter = null;
                try {
                    xmlWriter = XmlWriter.Create(stream);
                    serializer.Serialize(xmlWriter, dict);
                } finally {
                    xmlWriter.Close();
                }

                // Rewind
                stream.Seek(0, SeekOrigin.Begin);

                XDocument doc = XDocument.Load(stream);
                Assert.AreEqual("Dictionary", doc.Root.Name);
                Assert.AreEqual(dict.Count, doc.Root.Descendants().Count());

                // Rewind
                stream.Seek(0, SeekOrigin.Begin);
                var outDict = serializer.Deserialize(stream) as SerializableDictionary<string, string>;
                Assert.AreEqual(dict["Grass"], outDict["Grass"]);
                Assert.AreEqual(dict["Snow"], outDict["Snow"]);
                Assert.AreEqual(dict["Sky"], outDict["Sky"]);
            }
        }

        [TestMethod]
        public void TestIntIntDict() {
            var dict = new SerializableDictionary<int, int>();
            dict.Add(4, 7);
            dict.Add(5, 9);
            dict.Add(7, 8);

            var serializer = new System.Xml.Serialization.XmlSerializer(dict.GetType());
            using (var stream = new MemoryStream()) {
                // Load memory stream with this objects xml representation
                XmlWriter xmlWriter = null;
                try {
                    xmlWriter = XmlWriter.Create(stream);
                    serializer.Serialize(xmlWriter, dict);
                } finally {
                    xmlWriter.Close();
                }

                // Rewind
                stream.Seek(0, SeekOrigin.Begin);

                XDocument doc = XDocument.Load(stream);
                Assert.AreEqual("Dictionary", doc.Root.Name);
                Assert.AreEqual(3, doc.Root.Descendants().Count());

                // Rewind
                stream.Seek(0, SeekOrigin.Begin);
                var outDict = serializer.Deserialize(stream) as SerializableDictionary<int, int>;
                Assert.AreEqual(dict[4], outDict[4]);
                Assert.AreEqual(dict[5], outDict[5]);
                Assert.AreEqual(dict[7], outDict[7]);
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-10-03T10:24:25.040

您可以使用[ExtendedXmlSerializer](https://github.com/wojtpl2/ExtendedXmlSerializer)。如果你有一堂课：

```
public class ConfigFile
{
    public String guiPath { get; set; }
    public string configPath { get; set; }
    public Dictionary<string, string> mappedDrives {get;set;} 

    public ConfigFile()
    {
        mappedDrives = new Dictionary<string, string>();
    }
} 
```

并创建此类的实例：

```
ConfigFile config = new ConfigFile();
config.guiPath = "guiPath";
config.configPath = "configPath";
config.mappedDrives.Add("Mouse", "Logitech MX Master");
config.mappedDrives.Add("keyboard", "Microsoft Natural Ergonomic Keyboard 4000"); 
```

您可以使用 ExtendedXmlSerializer 序列化此对象：

```
ExtendedXmlSerializer serializer = new ExtendedXmlSerializer();
var xml = serializer.Serialize(config); 
```

输出 xml 将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ConfigFile type="Program+ConfigFile">
    <guiPath>guiPath</guiPath>
    <configPath>configPath</configPath>
    <mappedDrives>
        <Item>
            <Key>Mouse</Key>
            <Value>Logitech MX Master</Value>
        </Item>
        <Item>
            <Key>keyboard</Key>
            <Value>Microsoft Natural Ergonomic Keyboard 4000</Value>
        </Item>
    </mappedDrives>
</ConfigFile> 
```

您可以从[nuget](https://www.nuget.org/packages/ExtendedXmlSerializer/)安装 ExtendedXmlSerializer或运行以下命令：

```
Install-Package ExtendedXmlSerializer 
```

这是[在线示例](https://dotnetfiddle.net/SBwUfy)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-05T04:42:29.730

Dictionary 类实现 ISerializable。下面给出了类字典的定义。

```
[DebuggerTypeProxy(typeof(Mscorlib_DictionaryDebugView<,>))]
[DebuggerDisplay("Count = {Count}")]
[Serializable]
[System.Runtime.InteropServices.ComVisible(false)]
public class Dictionary<TKey,TValue>: IDictionary<TKey,TValue>, IDictionary, IReadOnlyDictionary<TKey, TValue>, ISerializable, IDeserializationCallback 
```

我不认为这是问题所在。请参阅下面的链接，该链接表示，如果您有任何其他不可序列化的数据类型，则 Dictionary 将不会被序列化。 [http://forums.asp.net/t/1734187.aspx?Is+Dictionary+serializable+](http://forums.asp.net/t/1734187.aspx?Is+Dictionary+serializable+)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-02T06:44:15.713

这篇文章准确地解释了如何处理这个问题： [当应用程序需要它时，我如何......在 C# 中序列化哈希表？](https://web.archive.org/web/1/http://blogs.techrepublic%2ecom%2ecom/howdoi/?p=143)

我希望这是有帮助的

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-08T06:06:31.247

您可以使用 System.Runtime.Serialization 的 DataContractSerialize。这将能够序列化 IDictionary 和 Dictionary 成员。

[https://docs.microsoft.com/en-us/dotnet/framework/wcf/samples/datacontractserializer-sample](https://docs.microsoft.com/en-us/dotnet/framework/wcf/samples/datacontractserializer-sample)

找到下面的代码片段。

```
public  ConfigFile ExtractConfigFileFromXml(string xmlPath)
{
    var serializer = new DataContractSerializer(typeof(ConfigFile));
    XmlReaderSettings settings = new XmlReaderSettings();
    settings.DtdProcessing = DtdProcessing.Parse;
    XmlReader reader = XmlReader.Create(xmlPath, settings);
    var confile = (ConfigFile)serializer.ReadObject(reader);
    return confile;
 } 
```

# c++ - Windows Mobile 上的 setsockopt TCP_NODELAY 问题

> ID：495658
> 
> 赞同：2
> 
> 时间：2009-01-30T14:26:23.890
> 
> 标签：c++, windows-mobile

我在 Windows Mobile 6.0 上遇到问题。我想创建一个不使用 Nagle 算法的 TCP 连接，因此当我调用“发送”函数时它会发送我的数据，并且不会缓冲调用，因为数据量太少。

我尝试了以下方法：

布尔 b = 真；setsockopt(socketfd, IPPROTO_TCP, TCP_NODELAY, (char*)(&b), sizeof(BOOL));

它在桌面上运行良好。但是在 Windows Mobile 上，如果我设置了这个值，然后查询它，返回值是 8。网络流量分析表明没有任何变化。

有什么办法可以强制冲洗我的插座？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-21T21:18:54.603

在我看来，Windows 移动版不支持 TCP_NODELAY 选项。检查 MSDN 文档，它可能有这样的效果，但我记得前段时间在设置几个套接字选项（包括 TCP_NODELAY 和设置发送和接收缓冲区）时遇到了困难，而 setsockopt 调用将失败。检查 setsockopt 是否返回 false，如果不是，请获取 ::WSAGetLastError() 并查看它是否会引导您到任何地方。在我的情况下，我记得必须不使用这些选项，因为它们不受支持。我在 Windows Mobile 5 上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-31T01:01:39.707

您是否在连接的两端和建立连接后设置选项？我刚刚让某人对其进行了测试，它通过 ActiveSync 与 TCP 一起运行良好，显着改善了测试应用程序中的命令响应周期时间（实际上大约提高了 4 倍）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T09:19:29.653

给定服务器我无法修改它，但即：使用此选项，我们的 Symbian 客户端可以正常工作。我尝试在创建连接之前和之后设置此选项，但没有任何改变。我在 Windows Mobile Device Center 上使用 TCP（因为我使用 Vista）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-19T19:42:03.157

我突然想到，（这是一个疯狂的猜测，可能不太可能）但由于您的发送缓冲区小于您正在写入的数据的大小，您可能遇到延迟确认问题。Nagle可能与它无关。

接收方是否立即发回任何数据？如果没有，您的对等方将延迟它的 ack 最多 200 毫秒，以等待它对某些数据的 ack 以更好地利用带宽。

在这种情况下，当套接字上的发送缓冲区小于数据时，对 write 的调用将阻塞，直到收到 ack 并发送所有数据。

例如，如果您的发送缓冲区是 8192 字节并且您发送了 8193 字节并且您的对等方没有发送任何数据，那么您的写入将阻塞 200 毫秒（或者无论您的对等方实现延迟 ack 的时间有多长），有效地使它看起来像 Nagle 正在杀死您，即使它被禁用了。

如果是这种情况，您可以增加发送缓冲区大小或让您的对等方始终向您发送一个空字节以强制立即发送 ack。

否则，我可能会尝试使用[NTttcp_x86](http://www.gilham.org/Blog/Lists/Posts/Post.aspx?List=aab85845-88d2-4091-8088-a6bbce0a4304&ID=242)来模拟您的应用程序发送/接收模式，看看是否可能发生其他事情。

# tfs - TFS 构建代理，与团队服务器相同的端口？

> ID：495660
> 
> 赞同：0
> 
> 时间：2009-01-30T14:26:46.073
> 
> 标签：tfs, build

我的团队基础设置为使用端口 8080，当我创建新的构建代理时，它默认使用端口 9191。

我应该使用哪一个？

当我尝试运行构建时出现错误，它说构建代理无法访问。

我在我的驱动器 c:\tfsbuilds 上创建了一个共享，我添加了 TFSService 帐户并授予它完全权限。

我使用 \computername\tfsbuilds 作为构建文件夹的路径。

还有什么可能是错的？

**错误信息**

计算机 TFSBUILDS.MyServer1.local（端口 9191）上的 Team Foundation Build 没有响应。（详细信息：无法连接到远程服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T14:34:46.900

构建服务是否已启动？这可能是最常见的问题，因为需要先启动服务。是的，9191 是构建代理的默认端口。你也可以检查你的防火墙吗？

# algorithm - 将任意字符串映射到 RGB 值

> ID：495662
> 
> 赞同：8
> 
> 时间：2009-01-30T14:27:36.727
> 
> 标签：algorithm, colors, string-metric

我有大量任意自然语言字符串。为了让我的工具分析它们，我需要将每个字符串转换为唯一的颜色值（RGB 或其他）。我需要颜色对比来取决于字符串的相似性（字符串与其他字符串不同，它们各自的颜色应该越不同）。如果我总是为相同的字符串获得相同的颜色值，那将是完美的。

关于如何解决这个问题的任何建议？

## 更新字符串之间的距离

我可能需要将“相似性”定义为类似 Levenstein 的距离。不需要自然语言解析。

那是：

```
"I am going to the store" and 
"We are going to the store" 
```

相似的。

```
"I am going to the store" and 
"I am going to the store today" 
```

也类似（但略少）。

```
"I am going to the store" and 
"J bn hpjoh up uif tupsf" 
```

很不相似。

（谢谢，[韦尔博格](https://stackoverflow.com/questions/495662/mapping-arbitrary-strings-to-rgb-values/495717#495717)！）

只有当我看到程序输出时，我才可能*确切地知道我需要什么距离函数。*所以让我们从更简单的事情开始。

## 任务简化更新

我已经删除了我自己将任务分成两部分的建议——绝对距离计算和颜色分布。这不会很好，因为起初我们将维度信息减少到单个维度，然后尝试将其合成到三个维度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T14:42:25.060

You need to elaborate more on what you mean by "similar strings" in order to come up with an appropriate conversion function. Are the strings

```
 "I am going to the store" and 
"We are going to the store" 
```

considered similar? What about the strings

```
 "I am going to the store" and 
"J bn hpjoh up uif tupsf" 
```

(all of the letters in the original +1), or

```
 "I am going to the store" and 
"I am going to the store today" 
```

? Based on what you mean by "similar", you might consider different functions.

If the difference can be based solely on the values of the characters (in Unicode or whatever space they are from), then you can try summing the values up and using the result as a hue for HSV space. If having a longer string should cause the colours to be more different, you might consider weighing characters by their position in the string.

If the difference is more complex, such as by the occurrences of certain letters or words, then you need to identify this. Maybe you can decide red, green and blue values based on the number of Es, Ss and Rs in a string, if your domain has a lot of these. Or pick a hue based on the ratio of vowels to consonents, or words to syllables.

There are many, many different ways to approach this, but the best one really depends on what you mean by "similar" strings.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T14:47:11.943

It sounds like you want a hash of some sort. It doesn't need to be secure (so nothing as complicated as MD5 or SHA) but something along the lines of:

```
char1 + char2 + char3 + ... + charN % MAX_COLOUR_VALUE 
```

would work as a simple first step. You could also do fancier things along the lines of having each character act as an 'amplitude' for R,G and B (e could be +1R, +2G and -4B, etc.) and then simply add up all the values in a string... clamp them at the end and you have a method of turning arbitrary length strings into colours as a 'colour hash' sort of process.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T14:47:24.643

First, you'll need to pick a way to measure string similarity. [Minimal edit distance](http://en.wikipedia.org/wiki/Levenshtein_distance) is traditional, but is not sufficient to well-order the strings, which is what you will need if you want to allocate the same colours to the same strings every time - perhaps you could weight the edit costs by alphabetic distance. Also minimal edit distance by itself may not be very useful if what you are after is similarity in speech rather than in written form (if so, consider a stemming/soundex pass first), or some other sense of "similarity".

Then you need to pick a way of traversing the visible colour space based on that metric. It may be helpful to consider using [HSL or HSV colour representation](http://en.wikipedia.org/wiki/HSL_color_space) - the algorithm could then become as simple as picking a starting hue and walking the sorted corpus, assigning the current hue to each string before offsetting it by the string's difference from the previous one.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-25T20:39:24.273

How important is it that you never end up with two dissimilar strings having the same colour?

If it's not that important then maybe this could work?

You could pick a 1 dimensional color space that is "homotopic" to the circle: Say the color function `c(x)` is defined for `x` between `0` and `1`. Then you'd want `c(0) == c(1)`.

Now you take the sum of all character values modulo some scaling factor and wrap this back to the color space:

`c( (SumOfCharValues(word) modulo ScalingFactor) / ScalingFactor )`

This might work even better if you defined a "wrapping" color space of higher dimensions and for each dimension pick different `SumOfCharValues` function; someone suggested alternating sum and length.

Just a thought... HTH

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T22:23:03.810

您可以使用[MinHash](http://en.wikipedia.org/wiki/MinHash)或其他一些[LSH 方法，并将相似性定义为由](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)[Jaccard 系数](http://en.wikipedia.org/wiki/Jaccard_index)测量的[带状疱疹](http://en.wikipedia.org/wiki/W-shingling)集之间的交集。Rajaraman 和 Ullman在[Mining of Massive data sets, Ch.3](http://infolab.stanford.edu/~ullman/mmds/ch3.pdf)中有很好的描述。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-25T21:30:24.660

这是我的建议（我觉得这个算法有个通用的名字，但是我太累了记不住了）：

您希望将每个字符串转换为 3D 点 node(r, g, b) （您可以缩放这些值以使其适合您的范围），从而最大限度地减少以下错误：

```
Error = \sum_i{\sum_j{(dist(node_i, node_j) - dist(str_i, str_j))^2}} 
```

你可以这样做：

1.  首先为每个字符串分配一个随机颜色（r，g，b）
2.  重复直到你认为合适（例如，误差调整小于 \epsilon = 0.0001）：
    1.  选择一个随机节点
    2.  调整它的位置 (r, g, b) 使误差最小化
3.  缩放坐标系，使每个节点坐标在 [0., 1.) 或 [0, 256] 范围内

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-30T14:36:15.163

I would maybe define some delta between two strings. I don't know what you define as the difference (or "unequality") of two strings, but the most obvious thing I could think about would be string length and the number of occurences of particular letters (and their index in the string). It should not be tricky to implement it such that it returns the same color code in equal strings (if you do an equal first, and return before further comparison).

When it comes to the actual RGB value, I would try to convert the string data into 4 bytes (RGBA), or 3 bytes if you only use the RGB. I don't know if every string would fit into them (as that may be language specific?).

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-16T11:30:14.627

对不起，但你不能用 levenshtein distance 或类似的方法做你正在寻找的东西。RGB 和 HSV 是 3 维几何空间，但 levenshtein 距离描述了一个度量空间 - 一组更宽松的约束，没有固定的维数。无法将度量空间映射到固定数量的维度，同时始终保持局部性。

但是，就近似而言，对于单个术语，您可以使用诸如 soundex 或 metaphone 之类的算法的修改来选择颜色；例如，对于多个术语，您可以将 soundex 或 metaphone 分别应用于每个单词，然后将它们相加（使用溢出）。

# c# - C# 从列表框拖放到树视图

> ID：495666
> 
> 赞同：11
> 
> 时间：2009-01-30T14:30:03.617
> 
> 标签：c#, .net, winforms, drag-and-drop

我有一个带有列表框和树视图的 winform。

一旦我的列表框充满了项目，我想从列表框中拖动它们（多个或单个）并将它们放在树视图中的一个节点中。

如果有人在 C# 中有一个很好的例子，那就太好了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-30T14:58:30.097

自从我搞砸了 Drag/Drop 已经有一段时间了，所以我想我会写一个快速的示例。

基本上，我有一个表单，左侧有一个列表框，右侧有一个树视图。然后我在上面放了一个按钮。单击按钮时，它只是将接下来十天的日期放入列表框中。它还使用 2 个父节点和两个子节点填充 TreeView。然后，您只需处理所有后续的拖放事件即可使其工作。

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.treeView1.AllowDrop = true;
            this.listBox1.AllowDrop = true;
            this.listBox1.MouseDown += new MouseEventHandler(listBox1_MouseDown);
            this.listBox1.DragOver += new DragEventHandler(listBox1_DragOver);

            this.treeView1.DragEnter += new DragEventHandler(treeView1_DragEnter);
            this.treeView1.DragDrop += new DragEventHandler(treeView1_DragDrop);

        }

        private void button1_Click(object sender, EventArgs e)
        {
            this.PopulateListBox();
            this.PopulateTreeView();
        }

        private void PopulateListBox()
        {
            for (int i = 0; i <= 10; i++)
            {
                this.listBox1.Items.Add(DateTime.Now.AddDays(i));
            }
        }

        private void PopulateTreeView()
        {
            for (int i = 1; i <= 2; i++)
            {
                TreeNode node = new TreeNode("Node" + i);
                for (int j = 1; j <= 2; j++)
                {
                    node.Nodes.Add("SubNode" + j);
                }
                this.treeView1.Nodes.Add(node);
            }
        }

        private void treeView1_DragDrop(object sender, DragEventArgs e)
        {

            TreeNode nodeToDropIn = this.treeView1.GetNodeAt(this.treeView1.PointToClient(new Point(e.X, e.Y)));
            if (nodeToDropIn == null) { return; }
            if(nodeToDropIn.Level > 0)
            {
                nodeToDropIn = nodeToDropIn.Parent;
            }

            object data = e.Data.GetData(typeof(DateTime));
            if (data == null) { return; }
            nodeToDropIn.Nodes.Add(data.ToString());
            this.listBox1.Items.Remove(data);
        }

        private void listBox1_DragOver(object sender, DragEventArgs e)
        {
            e.Effect = DragDropEffects.Move;
        }

        private void treeView1_DragEnter(object sender, DragEventArgs e)
        {
            e.Effect = DragDropEffects.Move;
        }

        private void listBox1_MouseDown(object sender, MouseEventArgs e)
        {
            this.listBox1.DoDragDrop(this.listBox1.SelectedItem, DragDropEffects.Move);
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T14:42:10.707

您想使用 GetItemAt(Point point) 函数将 X、Y 位置转换为列表视图项。

这是一篇非常好的文章：[Drag and Drop Using C#](http://www.c-sharpcorner.com/UploadFile/mgold/DoingDragandDropUsingCSharp11302005020610AM/DoingDragandDropUsingCSharp.aspx)。

要使被拖动的项目在拖动时可见，您需要使用 COM ImageList，这在下面的文章[Custom Drag-Drop Images Using ImageLists](http://www.vbaccelerator.com/home/vb/Code/Controls/ImageList/Custom_Drag-Drop_Images_Using_ImageLists/article.asp)中有很好的描述。

# java - Remove last character/line

> ID：495674
> 
> 赞同：5
> 
> 时间：2009-01-30T14:32:47.963
> 
> 标签：java, swing

I have a snippet of code that prints text from a file to a JTextArea called textArea.

Unfortunately the method I'm using goes line by line (not ideal) and so I have to append each line with a \n

This is fine for now but a new line is created at the end.

The code I have is as follows:

```
class menuOpen implements ActionListener {
    public void actionPerformed(ActionEvent e)
        {
        try {
            File filePath = new File("c:\\test.txt");
            FileInputStream file = new FileInputStream(filePath);
            BufferedReader br = new BufferedReader(new InputStreamReader(file));
            String displayText;

            while ((displayText = br.readLine()) != null) {
                textArea.append(displayText + "\n");
            }

        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    }
} 
```

Can anyone help me get rid of that last line?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-31T01:06:01.930

怎么样：

```
text.substring(0,text.lastIndexOf('\n')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-30T14:37:38.750

```
(...)
FileReader r= new FileReader(filePath);
StringBuilder b=new StringBuilder();
int n=0;
char array[]=new char[1024];
while((n=r.read(array))!=-1) b.append(array,0,n);
r.close();
String content=b.toString();
textArea.setText(content.substring(0,content.lengt()-1);
(...) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-30T14:39:50.120

Another idea:

```
boolean firstLine = true;
while ((displayText = br.readLine()) != null) {
    if (firstLine) {
        firstLine = false;
    } else {
        textArea.append("\n");
    }
    textArea.append(displayText);
} 
```

The idea is to append a line break **before** the new line to display, except for the first line of the file.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-31T00:40:00.657

最简单的方法是不使用`BufferedReader.readLine()`. 例如：

```
BufferedReader in = new BufferedReader(new FileReader(filePath));
char[] buf = new char[4096];
for (int count = in.read(buf); count != -1; count = in.read(buf)) {
    textArea.append(new String(buf, 0, count));
} 
```

**编辑**

我以前应该看过这个，但更好的方法是让 JTextArea 读取文件：

```
BufferedReader in = new BufferedReader(new FileReader(filePath));
textArea.read(in, null); 
```

这仍然会在末尾读入换行符，但它将规范化文本中的所有行尾（有关如何处理行尾的解释，请参阅[javadocs ）。`DefaultEditorKit`](http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/text/DefaultEditorKit.html)所以你可以用这样的东西摆脱尾随的换行符：

```
// line endings are normalized, will always be "\n" regardless of platform
if (textArea.getText().endsWith("\n")) {
    Document doc = ta.getDocument();
    doc.remove(doc.getLength() - 1, 1);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T15:32:32.757

在你的循环中：

```
while ((displayText = br.readLine()) != null) {
    if (textArea.length() > 0)
        textArea.append("\n");
    textArea.append(displayText);
} 
```

即，如果您的文本区域中已经有一些文本，请插入换行符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T14:35:00.237

How about

```
if (textArea.length > 0) textArea.Text = textArea.Text.Substring(0 ,textArea.Text.Length - 1) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-30T14:41:50.753

Apparently you want a newline *between* two lines, not *after each* line. This means you should have at least two lines:

```
if (d = br.readLine()) != null ) {
    textArea.append(displayText);
    while (d = br.readLine()) != null ) {
        textArea.append( "\n" + displayText);
    }
} 
```

Of course, it looks more complex. That's because 'between' *is* more complex than 'after'.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-19T08:16:24.307

它很容易..你只需要稍微调整你的代码。

```
String displayText = br.readLine(); 
textArea.append(displayText);
while ((displayText = br.readLine()) != null) {
    textArea.append("\n" + displayText);
} 
```

我相信这段代码以最低的成本产生你想要的功能。

# .net - 通过 .NET 对文件进行数字签名的标准化方法

> ID：495675
> 
> 赞同：5
> 
> 时间：2009-01-30T14:33:06.560
> 
> 标签：.net, digital-certificate

我正在构建一个用于分发由不同组织创建的包（.zip 档案）的系统。我想要一种方法来验证一个包的发布者确实是他们声称的那个人，并且该文件没有被篡改。

为了验证发布者，需要一个类似于 Web 浏览器使用的系统 - 例如，我的应用程序联系根证书颁发机构，后者验证身份。换句话说，“绿条”:)

我猜包创建会像这样工作：

1.  作者创建 zip 包
2.  作者哈希包并签名哈希
3.  它被重新包装，带有：
    *   包含签名哈希和公共证书的标头
    *   包含 zip 文件内容的正文

包装打开将像这样工作：

1.  获取数据主体
2.  使用相同的算法对其进行散列
3.  使用证书中的公钥解密包的哈希
4.  比较两个哈希 - 我们现在有完整性
5.  联系根 CA 以验证身份

这样，我验证了身份，也验证了内容（内容本身不需要加密——目的是验证，不是隐私）。

所以我的问题是：

1.  以上是处理它的正确方法吗？
2.  人们通常使用什么哈希算法？我认为它应该是单向的。你会选择一个（MD5、SHA1、SHA2？）还是更正常的支持多种，让包作者告诉你他们使用的是哪一个（例如，文档的标题包含散列函数的名称）。
3.  您如何使用根 CA？这是 X509Store 类的工作，还是涉及其他步骤？
4.  这里涉及什么样的证书？用于签署 .NET 程序集的相同类型的证书？（代码签名证书？）

最后，如果一个组织没有付费证书，而是决定使用自行颁发的证书，我假设我仍然可以验证哈希（为了数据完整性），而无需将东西安装到计算机的证书存储中或任何类似的魔法（在这些情况下，我只会显示：“由 XYZ 公司发布（未验证）”。这是正确的吗？

我找到了很多关于如何使用 X509 和 RSACryptoServiceProvider 的链接，所以我大概可以弄清楚代码，我想我对这个过程更感兴趣，并且知道我正在使用正确的技术。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-30T17:18:41.110

我尝试了**aku**对 System.IO.Packaging 的建议并且非常喜欢它，尽管让签名工作非常困难且不直观（无论如何，对于我的小脑袋来说）。这是我采取的步骤，以防其他人需要这样做。

主要问题是文档只是说“证书”，但我必须创建一个受密码保护的 PFX 才能使其工作。两个有用的链接是：

1.  MSDN：[开放打包约定的数字签名框架](http://msdn.microsoft.com/en-us/library/aa905326.aspx)
2.  [创建自签名 PFX](http://www.source-code.biz/snippets/vbasic/3.htm)

如第二个链接所示，您有两个用于创建 PFX 的选项。您可以创建一个 .cer，安装它，然后使用 GUI 将其导出，或者您可以从 Microsoft下载[pvkimport 。](http://office.microsoft.com/downloads/2000/pvkimprt.aspx)

这是我使用的命令（编辑：您可以使用 OpenSSL 来执行此操作 - 见底部）：

```
makecert -r -n "CN=Paul Stovell" -b 01/01/2000 -e 01/01/2099 -eku 1.3.6.1.5.5.7.3.3 -sv PaulStovell.pvk PaulStovell.cer
cert2spc PaulStovell.cer PaulStovell.spc
pvkimprt -pfx PaulStovell.spc PaulStovell.pvk 
```

在最后一个命令中，会出现一个向导。系统会询问您是否要导出私钥，这需要 PFX 受密码保护。选择“是”。然后在下一页有一个复选框询问是否“导出所有扩展属性”，我也选择了“是”。

这将为您留下一个受密码保护的自签名 PFX 文件，您可以使用它来签署文档和包。

下面是一些用于创建、签名和保存包，然后重新打开并验证它的代码。

```
private const string _digitalSignatureUri = "/package/services/digital-signature/_rels/origin.psdsor.rels";

static void Main(string[] args)
{
    var certificate = new X509Certificate2(@"T:\Sample\Input\PaulStovell.pfx", "password");
    using (var package = Package.Open("T:\\Sample\\MyPackage.zip", FileMode.Create, FileAccess.ReadWrite, FileShare.None))
    {
        CreatePart(package, @"/Files/File2.dll", @"T:\Sample\Input\File2.dll");
        CreatePart(package, @"/Files/File2.pdb", @"T:\Sample\Input\File2.pdb");
        CreatePart(package, @"/Files/File2.xml", @"T:\Sample\Input\File2.xml");
        package.PackageProperties.Creator = "Paul Stovell";
        package.PackageProperties.Title = "Paul Stovell's Package";
        package.PackageProperties.Description = "My First Package";
        package.PackageProperties.Identifier = "MyPackage";
        package.PackageProperties.Version = "1.0.0.0";

        // Sign the package
        var toSign = package.GetParts().Select(part => part.Uri).ToList();
        var uriPartSignatureOriginRelationship = PackUriHelper.CreatePartUri(new Uri(_digitalSignatureUri, UriKind.Relative));
        toSign.Add(uriPartSignatureOriginRelationship);

        var dsm = new PackageDigitalSignatureManager(package);
        dsm.CertificateOption = CertificateEmbeddingOption.InSignaturePart;
        dsm.Sign(toSign, certificate);

        package.Close();
    }

    Console.WriteLine("Package written");
    Console.WriteLine("Reading package");

    using (var package = Package.Open("T:\\Sample\\MyPackage.zip", FileMode.Open, FileAccess.Read, FileShare.Read))
    {
        Console.WriteLine("  Package name: {0}", package.PackageProperties.Title);
        var dsm = new PackageDigitalSignatureManager(package);
        if (dsm.IsSigned)
        {
            var verificationResult = dsm.VerifySignatures(false);
            var signature = dsm.Signatures[0];
            Console.WriteLine("  Signed by: {0}", signature.Signer.Subject);
            Console.WriteLine("  Issued by: {0}", signature.Signer.Issuer);
            Console.WriteLine("  Verification: {0}", verificationResult);
        }
        else
        {
            Console.WriteLine("  Not signed.");
        }
    }
    Console.ReadKey();
}

private static void CreatePart(Package package, string relativePath, string file)
{
    var packagePartUri = new Uri(relativePath, UriKind.Relative);
    var packagePart = package.CreatePart(packagePartUri, "part/" + Path.GetExtension(file));
    using (var fileContent = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.Read))
    {
        CopyStream(fileContent, packagePart.GetStream());
    }
}

private static void CopyStream(Stream source, Stream target)
{
    // It is .NET 3.5, surely this kind of thing has gotten easier by now?
    var bufferSize = 0x1000;
    var buf = new byte[bufferSize];
    int bytesRead = 0;
    while ((bytesRead = source.Read(buf, 0, bufferSize)) > 0)
    {
        target.Write(buf, 0, bytesRead);
    }
} 
```

在我的机器上，输出是：

```
Package written
Reading package
  Package name: Paul Stovell's Package
  Signed by: CN=Paul Stovell
  Issued by: CN=Paul Stovell
  Verification: Success 
```

最后一行很有趣。它是 PackageDigitalSignatureManager.VerifySignatures() 的输出。这表明该文件未被篡改。如果我在签名后更改或删除文件，它不再返回“成功”。

我将 .exe、示例文件和 .pfx 复制到新机器上并得到完全相同的输出，这似乎表明“验证”只检查签名的作者，而不询问任何证书颁发机构。我没有在测试机器上安装任何证书，它在自己的域上运行。

**编辑**：上面的代码仅验证文档本身，它不使用根 CA 权限验证证书。为此，请使用以下命令：

当针对我的自签名证书调用此调用时，此调用返回*false ：*

```
var verified = ((X509Certificate2) dsm.Signatures[0].Signer).Verify(); 
```

然后我双击用于创建 .pfx 的 .cer，并将其安装到默认位置，使其成为受信任的证书颁发机构。完成后，上面的调用将返回*true*。所以这似乎是验证签名者身份的正确方法。

**编辑 2**：一个有用的注释。要查看和使用计算机上的证书，请执行以下操作：

1.  开始->运行并输入“mmc”
2.  在 MMC 窗口中，单击 File->Add/Remove SnapIn...
3.  点击证书，添加->
4.  选择其中一个帐户
5.  点击确定

就我而言，当我双击上面的 .cer 进行安装时，它被放置在*当前用户*存储下，在*受信任的根证书颁发机构*文件夹下。然后，您可以删除它以撤消您的更改。

**我的最终验证逻辑如下所示：**

```
if (dsm.IsSigned)
{
    var verificationResult = dsm.VerifySignatures(false);
    var signature = dsm.Signatures[0];
    var trusted = ((X509Certificate2)dsm.Signatures[0].Signer).Verify();

    Console.WriteLine("  Signed by: {0}", signature.Signer.Subject);
    Console.WriteLine("  Issued by: {0}", signature.Signer.Issuer);
    Console.WriteLine("  Verified: {0}", verificationResult == VerifyResult.Success);
    Console.WriteLine("  Trusted: {0}", trusted);
}
else
{
    Console.WriteLine("  Not signed.");
} 
```

它总是经过验证（除非我篡改了内容），但只有当证书在商店中时才受信任。

**编辑3**：我做了更多的阅读。PFX 文件实际上是[PKCS 12](http://en.wikipedia.org/wiki/PKCS12)文件，是 RSA 组规范的一部分。创建它们的一种更简单的方法，而不是我上面展示的方法，是使用开源[OpenSSL ，它具有](http://www.openssl.org/)[可用于 Windows](http://www.slproweb.com/products/Win32OpenSSL.html)的二进制文件。

安装 OpenSSL 后，创建一个公钥/私钥对文件。我发现我必须以管理员身份运行下面的第二个命令，因此以管理员身份启动这个命令可能会有所帮助。

```
openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout PaulStovell.pem -out PaulStovell.cer 
```

它将询问有关您和您的组织的另外 7 个问题以创建证书。接下来，创建 PKCS 12。它会要求您输入密码：

```
openssl pkcs12 -export -out PaulStovell.pfx -in PaulStovell.pem -name "Paul Stovell" 
```

出现提示时输入并重新输入您的密码。

此时，System.IO.Packaging 可以使用您的 PFX 并验证包签名，但它不会信任证书。要创建 .cer 证书以便您可以将其安装到受信任的证书颁发机构存储中，请执行以下操作：

```
openssl x509 -in PaulStovell.pem -out PaulStovell.cer 
```

现在您可以双击证书并安装它，它将被视为受信任的证书。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-30T14:45:22.043

有一个标准 API 可以创建签名的 ZIP 包。

[System.IO.Packaging](http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx)命名空间包含必要的类来创建符合 OPS（开放包装规范）的带有[数字签名](http://msdn.microsoft.com/en-us/library/system.io.packaging.packagedigitalsignaturemanager.aspx)的 ZIP 包。

# java - How to remove default theme from Java Faces application?

> ID：495676
> 
> 赞同：0
> 
> 时间：2009-01-30T14:33:20.320
> 
> 标签：java, jsf, themes

I've never used Java before (C# is my domain), but now I have a task that I must apply a specific style to for a tiny Java webpage. The style is from another ASP.NET application that we're rolling out and that I've helped to develop. Seems that this style is on the way to become our new company web-style. :P

The webpage is really tiny - it has only a login form and an action form with a dozen textboxes and a button. When you click the button, a file is generated and available for download.

This application has already been made by a colleague of mine, who has good experience with Java, but nearly no experience with the web. So he's no help anymore. For now the application has NO style at all. Just a bunch of textboxes.

The application is made in NetBeans and Java Faces - as far as I understand. Or maybe it's "Visual Faces". Not sure - can't make heads or tails with all these names from the Java world. Anyway, it's this ASP.NET look-alike where you have an XML page with tags like `<ui:textField>` and `<ui:passwordField>`, and then a code-behind file with all your Java code. (Actually I suspect that ASP.NET was created after this, but that's besides the point)

I've successfully converted the HTML layout to the one I need and set my own CSS/JavaScript files in the header. There's just one problem - the Faces thing is hell-bent on including its own CSS stylesheets as well. Sounds reasonable of course, but for some mind-boggling reason these stylesheets also deem it necessary to override styles on all the common tags - `<body>`, `<div>`, `<span>`, etc. Which is annoying, because that breaks my design. Now, I could change my own stylesheets to over-override these default Faces stylesheets, but that seems... well, not the right solution. It's like a workaround, not a "correct" solution. Why should I redefine font attributes for every tag, when it should easily cascade down from the "body" tag?

Is there any way how I can tell Faces not to include its own stylesheets? I won't be using any of their controls anyway - just textboxes and buttons. And labels, when I find them. :P

Oh, yes, and I tried to re-create it all in simple [JSP](http://en.wikipedia.org/wiki/JavaServer_Pages) (no Faces), but that failed, because the code-behind (there's some big library there) is dependent on it... This is also the reason why I can't move it to the ASP.NET I'm so familiar with.

* * *

**Added:** Since it seems there are many Java Faces frameworks out there, here's a snippet of code that might help:

```
<jsp:root version="1.2" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:ui="http://www.sun.com/web/ui">
    <jsp:directive.page contentType="text/html;charset=UTF-8" pageEncoding="UTF-8"/>
        <f:view>
            <ui:page id="page1">
                <ui:html id="html1">
                    <ui:head id="head1"> 
```

Also I forgot to mention that there is a folder in NetBeans called "Sun Web UI Components Themes" which has three items under it - "Gray Theme", "Green Theme" and "Default Theme". I can choose one of them as the active one, and that also changes the CSS which is included by default. Unfortunately I cannot choose none.

OK, I already changed my style to override these stylesheets. Still it would be nice to hear more about what I'm dealing here with. I don't even know where I should look for documentation...

**Added 2:** Also, the namespace for say, TextField, is `com.sun.rave.web.ui.component`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T14:56:47.370

这是使用哪个 JSF（JavaServer Faces）库？我的脸？富脸？有些不同？
我不知道你是否找到了这个资源：[JSF Tag lib](http://java.sun.com/javaee/javaserverfaces/1.2_MR1/docs/tlddocs/index.html)。如果它使用`<ui:`类型标签，那么它也使用 Facelets，它是 JSF 的模板系统。但是，您可能正在寻找的标签参数是 styleClass 和 Style。

标准 JSF 确实没有默认样式，我认为可能还有另一个 JSF 库正在使用。WEB-INF 目录下可能是一个名为 lib 的目录，jar 文件就在其中。这些应该给你一个关于正在使用什么库的线索。

RichFaces 有自己的样式，并且是完全可主题化的。在您的特定情况下，对于您的情况而言，这将比它的价值更痛苦。其他 JSF 库也可以这样做。

不幸的是，我只能指出问题可能出在哪里的地方和想法。鉴于 JSF 有大量的选择，这是我能做的最好的事情。

# sql-server - SQL Server - 事务复制（仅限部分数据）

> ID：495680
> 
> 赞同：1
> 
> 时间：2009-01-30T14:34:38.693
> 
> 标签：sql-server, database, sql-server-2005, tsql

我有 6 个月的数据，如何仅将最新的 3 个月数据复制给订阅者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T15:08:01.577

您可以使用过滤复制。当您阅读有关过滤复制的示例时，您可能会看到它指的是分支机构场景，其中一个中央办公室为多个分支机构存储数据，每个分支机构只想复制自己的数据。它涉及在键上创建过滤器，在您的情况下，您需要使用日期范围作为键。

这是[一篇关于使用事务复制进行过滤复制](http://sqlserverpedia.com/wiki/Creating_Transactional_Replication_Publications)的文章，还有一篇关于[使用合并复制进行过滤](http://sqlserverpedia.com/wiki/Creating_Merge_Replication_Publications)的文章。

# ruby-on-rails - Rails 中的 A/B 拆分测试有哪些资源？

> ID：495698
> 
> 赞同：21
> 
> 时间：2009-01-30T14:37:24.663
> 
> 标签：ruby-on-rails, ruby, ab-testing

关于 A/B 拆分测试的一些信息：

*   [http://startuplessonslearned.blogspot.com/2008/09/one-line-split-test-or-how-to-ab-all.html](http://www.startuplessonslearned.com/2008/09/one-line-split-test-or-how-to-ab-all.html)
*   [http://www.37signals.com/svn/posts/1525-writing-decisions-headline-tests-on-the-highrise-signup-page](http://www.37signals.com/svn/posts/1525-writing-decisions-headline-tests-on-the-highrise-signup-page)

我可以在 Rails 应用程序中使用简单的`case`or`if`语句在我的视图中执行此操作，但这会产生很多重复。有宝石支持吗？任何有帮助的设计模式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-08-17T03:14:26.860

我刚刚发布了[A/Bingo](http://www.bingocardcreator.com/abingo/)，这是一个 OSS Rails 插件来做到这一点。

您可以查看[与七分钟绝对值的比较以](http://www.bingocardcreator.com/abingo/compare)了解详细信息，但我认为它在很大程度上更易于使用。

*   它支持将任何事件作为转化进行跟踪。七分钟绝对值仅跟踪您当前正在查看的页面的点击次数。
*   它会记住用户看到的替代方案，并仅向他们显示。
*   它有很多语法糖，旨在最大限度地提高程序员的生产力。
*   它将为您进行统计显着性检验。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-05-05T20:09:38.130

[虚荣心](http://vanity.labnotes.org "虚荣")值得一提。一些 GA 集成、自定义指标、干净的代码。Github[在这里](http://github.com/assaf/vanity "这里")。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-31T00:27:04.380

在`ApplicationController`：

```
options = ["option1", "option2", "option3"]
session[:option] ||= option.rand 
```

在您的视图中，根据您想要的部分和选择的选项呈现部分：

```
<%= render :partial => "foo#{session[:option]} %> 
```

这样，您就可以保证用户在整个站点的整个会话中获得相同的选项。另外，您只需将选项设置为空字符串即可返回默认部分。您甚至可以在数组中放置一个空字符串，或复制条目以更改每个条目的选择频率的权重。

您可以使用 Google 网站优化器来确定哪个选项的转换效果最好。[在他们的文档Quick Start Guide - Website Optmizer Help](http://www.google.com/support/websiteoptimizer/bin/answer.py?answer=61149)中查看他们的分步演练。这有一些你需要添加的 JavaScript。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-25T15:21:02.883

你见过 7 Minute ABs，一个用于 Rails 的 A/B 测试插件吗？

[http://github.com/paulmars/seven_minute_abs/tree/master](http://github.com/paulmars/seven_minute_abs/tree/master)

# sql - Can we write a sub function or procedure inside another stored procedure

> ID：495700
> 
> 赞同：21
> 
> 时间：2009-01-30T14:37:41.310
> 
> 标签：sql, sql-server-2005

I want to check if SQL Server(2000/05/08) has the ability to write a nested stored procedure, what I meant is - WRITING a Sub Function/procedure inside another stored procedure. NOT calling another SP.

Why I was thinking about it is- One of my SP is having a repeated lines of code and that is specific to only this SP.So if we have this nested SP feature then I can declare another sub/local procedure inside my main SP and put all the repeating lines in that. and I can call that local sp in my main SP. I remember such feature is available in Oracle SPs.

If SQL server is also having this feature, can someone please explain some more details about it or provide a link where I can find documentation.

Thanks in advance Sai

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T14:58:01.033

我不建议这样做，因为每次创建新的执行计划时都必须计算，但是是的，它绝对可以完成（一切皆有可能，但并不总是推荐）。

这是一个例子：

```
CREATE PROC [dbo].[sp_helloworld]
AS
BEGIN
    SELECT 'Hello World'
    DECLARE @sSQL VARCHAR(1000)
    SET @sSQL = 'CREATE PROC [dbo].[sp_helloworld2]
            AS
            BEGIN
                SELECT ''Hello World 2''
            END'
    EXEC (@sSQL)

    EXEC [sp_helloworld2];
    DROP PROC [sp_helloworld2];
END 
```

你会收到警告

```
The module 'sp_helloworld' depends on the missing object 'sp_helloworld2'.
The module will still be created; however, it cannot run successfully until
the object exists. 
```

您可以使用上面的 EXEC('sp_helloworld2') 绕过此警告。

但是如果你调用 EXEC [sp_helloworld] 你会得到结果

```
Hello World
Hello World 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-30T16:28:59.213

Oracle 的 PL/SQL 是一种特殊情况，它是一种严重基于 Ada 的语言，而不是带有一些过程结构的简单 DML。您是否认为这是一个好主意可能取决于您对 DBMS 中的过程代码的兴趣以及您对学习复杂的新语言的喜好。

根据我的经验（主要是 Oracle、MS SQL、Sybase、MySQL、SQLite），为了减少重复或其他原因而使用子例程的想法在很大程度上与其他数据库平台不同。

虽然 SQL 构建过程会起作用，但我认为约翰建议您不要使用他的正确答案是正确的！

你没有说你的重复行采用什么形式，所以我将提供三种可能的替代方案，从最简单的开始：

1.  没做什么。接受过程 SQL 是一种原始语言，它缺乏如此多的“基本”结构，如果它不是唯一的选择，你根本不会使用它。

2.  将您的程序操作移到 DBMS 之外，并以更复杂的语言编写的代码执行它们。考虑调整架构以从数据存储平台中提取业务逻辑的方式（嘿，为什么不重新设计整个东西！）

3.  如果在 DML（尤其是 SELECT）中发生重复，请考虑引入视图以减少查询。

4.  编写代码以生成存储过程，作为构建过程的一部分。这样，如果重复的行需要更改，您可以在一个地方更改它们并自动生成重复。

那是[四个](http://people.csail.mit.edu/paulfitz/spanish/script.html)。我在打字时想到了另一个；把它当作奖金。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-30T14:39:32.180

It does not have that feature. It is hard to see what real benefit such a feature would provide, apart from stopping the code in the nested SPROC from being called from elsewhere.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-10T10:29:55.750

```
CREATE TABLE #t1 (digit INT, name NVARCHAR(10));  
GO

CREATE PROCEDURE #insert_to_t1  
(  
    @digit INT  
,    @name NVARCHAR(10)  
)  
AS  
BEGIN  
    merge #t1 AS tgt  
    using (SELECT @digit, @name) AS src (digit,name)  
    ON    (tgt.digit = src.digit)  
    WHEN matched THEN  
          UPDATE SET name = src.name  
    WHEN NOT matched THEN  
          INSERT (digit,name) VALUES (src.digit,src.name);  
END;  
GO  

EXEC #insert_to_t1 1,'One';  
EXEC #insert_to_t1 2,'Two';  
EXEC #insert_to_t1 3,'Three';  
EXEC #insert_to_t1 4,'Not Four';  
EXEC #insert_to_t1 4,'Four'; --update previous record!  

SELECT    * FROM #t1; 
```

我们在这里所做的是创建一个过程，该过程在连接的生命周期内存在，然后用于将一些数据插入到表中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-30T15:06:32.717

John 的 sp_helloworld 确实有效，但这就是您不经常看到此操作的原因。

编译存储过程时会对性能产生非常大的影响。微软有一篇关于解决大量重新编译导致的性能问题的文章，因为这确实会大大降低您的系统速度：

[http://support.microsoft.com/kb/243586](http://support.microsoft.com/kb/243586)

与其创建存储过程，不如只使用要调用的 T-SQL 创建一个字符串变量，然后重复执行该字符串变量。

不要误会我的意思——这也是一个非常糟糕的性能想法，但它比动态创建存储过程要好。如果您可以将此代码持久保存在永久存储过程或函数中并消除重新编译延迟，SQL Server 可以为该代码构建一个单一的执行计划，然后非常快速地重用该计划。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-24T05:39:43.053

我刚刚在 SQL 触发器（类似于 SQL 过程）中遇到了类似的情况，其中我基本上有相同的插入语句最多执行 13 次，因为 13 个可能的键值导致 1 个事件。我使用了一个计数器，使用 DO WHILE 循环了 13 次，并对每个键值处理使用了 CASE，同时保留了一个标志来确定何时需要插入以及何时跳过。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-03-25T16:53:54.980

如果MS在GOTO之外开发GOSUB就太好了，很简单的事情！

为“内部例程”创建过程或函数会污染对象结构。

我这样“实施”它

身体1：

转到 HEADER HEADER_RET1：

```
insert into body ...

goto BODY1_RET 
```

身体2：

转到 HEADER HEADER_RET2：

```
INSERT INTO body....

goto BODY2_RET 
```

标题：

```
insert into header

if @fork=1 goto HEADER_RET1

if @fork=2 goto HEADER_RET2

select 1/0 --flow check! 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-14T22:15:18.460

我也需要这个。我有两个函数可以将案例计数带回存储过程，该存储过程正在提取所有用户的列表及其案例计数。

沿着

```
select name, userID, fnCaseCount(userID), fnRefCount(UserID)
  from table1 t1
  left join table2 t2
    on t1.userID = t2.UserID 
```

对于一个相对较小的集合（400 个用户），它会调用这两个函数中的每一个。总共有 800 个来自存储过程的调用。不漂亮，但人们不会期望 sql server 有这么几个调用的问题。

这需要 4 多分钟才能完成。

单独地，函数调用几乎是瞬时的。即使是 800 个近乎瞬时的呼叫也应该是近乎瞬时的。

所有索引都已就位，当分析存储过程和函数的执行计划时，SSMS 建议没有新索引。

我从函数中复制代码，并将其放入存储过程中的 SQL 查询中。但似乎 sp 和 function 之间的转换占用了时间。

18 秒的执行时间仍然太长，但允许查询在我们的 30 秒超时窗口内完成。

如果我可以有一个子过程，它会使代码更漂亮，但仍然可能增加开销。

接下来我可能会尝试将相同的功能移动到可以在连接中使用的视图中。

```
select t1.UserID, t2.name, v1.CaseCount, v2.RefCount
  from table1 t1
  left join table2 t2
    on t1.userID = t2.UserID
  left join vwCaseCount v1
    on v1.UserID = t1.UserID
  left join vwRefCount v2
    on v2.UserID = t1.UserID 
```

好的，我刚刚从函数创建了视图，所以我的执行时间从 4 多分钟到 18 秒再到 8 秒。我会继续玩它的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-30T14:58:16.603

我同意 andynormancx 的观点，这样做似乎没有多大意义。

[如果您真的希望将共享代码包含在 SP 中，那么您可能会使用GOTO](http://msdn.microsoft.com/en-us/library/ms180188.aspx)或动态 SQL拼凑一些东西，但是使用单独的 SP 或 UDF 正确地完成几乎在所有方面都会更好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-30T15:16:33.790

谢谢大家的回复！我最好用重复的代码再创建一个 SP 并调用它，这是性能和外观方面的最佳方式。

# c# - 动态数据站点上的下拉列表中的分层数据

> ID：495704
> 
> 赞同：5
> 
> 时间：2009-01-30T14:38:32.493
> 
> 标签：c#, asp.net, dynamic-data

我正在进入动态数据站点（非常强大），并享受它。但是，我有一个似乎无法满足的要求。我有一个自联接的类别表（Id、Name、ParentId）来创建一个层次类别结构（例如，具有空 id 的类别是顶级的，通常是这样的）。然后我有一个产品表，其中包含该类别的外键。

在动态数据站点中，我自动生成了类别下拉列表；但是它只是按数字顺序列出了所有类别。我想要的（以及我之前编码的，预动态数据）是一个缩进列表，按层次排列的类别列表。

是否替换现有的 FilterUserControl？我可以在任何地方覆盖 PopulateListControl 方法吗？有没有人有任何提取自连接分层数据的 LINQ 语法？

只是指针和建议就可以了，感谢您提供的任何帮助。

亲切的问候，

迈克·金斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T14:54:46.080

在甲骨文中：

```
SELECT  LEVEL, Id, Name, LPAD(' ', LEVEL) || Name AS IndentedName
FROM    Categories
START WITH
        ParentID IS NULL
CONNECT BY
        ParentID = PRIOR Id
ORDER SIBLINGS BY
        Name 
```

您可以使用`IndentedName`或根据`LEVEL`伪列自定义格式（它显示每个类别的深度）

PS 最好`bad`用作`NULL`顶级父 ID，因为您不能使用索引来访问它。改用 a `0`。

**更新：**

在`SQL Server`：

```
WITH    q (id, parentid, name, level, bc) AS
        (
        SELECT  id, parentid, name, 1, CAST(ROW_NUMBER() OVER (ORDER BY name) AS VARCHAR(MAX))
        FROM    Categories
        WHERE   ParentID IS NULL
        UNION ALL
        SELECT  c.id, c.parentid, c.name, q.level + 1, q.bc + '.' + CAST(ROW_NUMBER() OVER (ORDER BY c.name) AS VARCHAR(MAX))
        FROM    q
        JOIN    Categories c
        ON      c.parentId = q.id
        )
SELECT  *
FROM    q
ORDER BY
        bc 
```

与`Oracle`,`SQL Server`索引`NULL`值不同，因此可以使用 a`NULL`来标记最终祖先。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-20T23:20:13.493

SQL Server 具有分层数据类型。没用过，但看起来很有趣。 [http://msdn.microsoft.com/en-us/magazine/cc794278.aspx](http://msdn.microsoft.com/en-us/magazine/cc794278.aspx)。

在这些情况下，我经常使用的是左右树。这些对于查询数据非常有效。最重要的是，我有一个特定的层来加载和持久化我的树。这将从数据库中获取所有子节点并将树加载到内存中。该层还将负责在树中移动节点、删除节点等。一旦你在内存中组织了一棵树，你就可以从那里做任何事情。希望对您有所帮助，如果您想要一些通用左/右树的代码示例，请告诉我。

# iis-7 - 如何创建 IIS 7 模块接口？

> ID：495705
> 
> 赞同：3
> 
> 时间：2009-01-30T14:39:23.490
> 
> 标签：iis-7, windows-server-2008

我在一个项目中收到了很多请求，包括一个 IIS 7 模块接口。

有人知道创建 IIS 7.0 模块接口的任何资源吗？

我搜索了[http://www.iis.net](http://www.iis.net)并没有真正找到关于如何创建 IIS 7.0 模块接口的基础知识的好文章。

它可以是关于如何为 IIS 7.0 (Windows 2008) 或 IIS 7.5 (Windows 2008 R2) 创建模块接口的任何编程文章。

我找到了几个来源，有没有人在编程方面找到更好或更描述性的东西？

*   [模块概述](http://learn.iis.net/page.aspx/121/iis-7-modules-overview/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T15:54:14.743

这可能有助于开始：

[http://learn.iis.net/page.aspx/121/iis-7-modules-overview/#Getting](http://learn.iis.net/page.aspx/121/iis-7-modules-overview/#Getting)
[http://www.iis.net/ConfigReference/system.webServer/globalModules](http://www.iis.net/ConfigReference/system.webServer/globalModules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-29T22:50:52.047

向下滚动到本文的“第 3 步 - 创建图像版权 UI 模块”： [http ://learn.iis.net/page.aspx/168/an-end-to-end-extensibility-example-for-iis- 70-开发者/](http://learn.iis.net/page.aspx/168/an-end-to-end-extensibility-example-for-iis-70-developers/)

它提供了创建用于配置自定义 IIS 7 模块的 GUI 的分步操作。

# java - 如何在 Restlet 中为 Jetty 使用 ThrottlingFilter

> ID：495710
> 
> 赞同：0
> 
> 时间：2009-01-30T14:40:14.813
> 
> 标签：java, jetty, restlet, http-status-code-503

我想配置一个 web 服务，以便一旦接受队列已满，服务返回 503。目前，这些请求似乎刚刚超时。

我确实设置了maxThreads和**acceptQueuesize****之类**的参数（如此处所述：[http://www.restlet.org/documentation/1.1/ext/com/noelios/restlet/ext/jetty/JettyServerHelper](http://www.restlet.org/documentation/1.1/ext/com/noelios/restlet/ext/jetty/JettyServerHelper)）。

但是一旦acceptQueue 已满，服务就不会响应503。

看来码头的 ThrottlingFilter ([http://www.mortbay.org/jetty/jetty-6/apidocs/index.html?index-all.html](http://www.mortbay.org/jetty/jetty-6/apidocs/index.html?index-all.html)）是我正在寻找的，但我不知道如何在我的restlet服务中申请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T18:27:25.243

除非您将应用程序作为 WAR 文件部署到 Jetty 中，否则您将无法利用 ThrottlingFilter。JettyServerHelper 将 Restlet 引导为使用 Jetty 接受 HTTP 连接的独立服务器，因此无法使用 Servlet 过滤器。我不确定是否可以在 Servlet 世界之外使用来自 Jetty 中的 ThrottlingFilter 的类似处理逻辑。

# sql-server - Querying a linked sql server

> ID：495719
> 
> 赞同：25
> 
> 时间：2009-01-30T14:42:58.850
> 
> 标签：sql-server, linked-server

I added a linked server, which is showing in the linked server list, but when I query it, it throws an error with the db server name.

```
EXEC sp_helpserver
EXEC sp_addlinkedserver 'aa-db-dev01'
Select * from openquery('aa-db-dev01','Select * from TestDB.dbo.users') 
```

> Msg 102, Level 15, State 1, Line 1
> Incorrect syntax near 'aa-db-dev01'.

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-01-30T14:47:54.720

```
SELECT * FROM [server].[database].[schema].[table] 
```

This works for me. SSMS intellisense may still underline this as a syntax error, but it should work if your linked server is configured and your query is otherwise correct.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-02-06T13:14:39.690

您需要删除链接服务器名称周围的引号。它应该是这样的：

**Select * from openquery(aa-db-dev01,'Select * from TestDB.dbo.users')**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-14T06:11:00.713

您可以使用：

```
SELECT * FROM [aa-db-dev01].[TestDB].[dbo].[users]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-11T14:09:51.700

我使用开放查询来执行此任务，如下所示：

```
select top 1 *
INTO [DATABASE_TO_INSERT_INTO].[dbo].[TABLE_TO_SELECT_INTO]
from openquery(
    [LINKED_SERVER_NAME],
    'select * from [DATABASE_ON_LINKED_SERVER].[dbo].[TABLE_TO_SELECT_FROM]'
) 
```

上面的示例使用开放查询从链接服务器上的数据库中选择数据到您选择的数据库中。

注意：为了参考的完整性，您可以执行简单的选择，如下所示：

```
select top 1 * from openquery(
    [LINKED_SERVER_NAME],
    'select * from [DATABASE_ON_LINKED_SERVER].[dbo].[TABLE_TO_SELECT_FROM]'
) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-12T23:35:25.497

接受的答案对我有用。

此外，在 MSSQLMS 中，您可以浏览对象资源管理器中的树到要查询的表。

[服务器] -> 服务器对象 -> 链接服务器 -> [链接服务器] -> 目录 -> [数据库] -> [表]

然后右键单击，将表编写为，选择到，新建查询窗口

并且将使用正确的 FROM 为您生成查询，您可以在 JOIN 中使用它

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-11T05:50:26.037

试试看`Select * from openquery("aa-db-dev01",'Select * from users')`，数据库连接应该在链接服务器配置中定义

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-12T13:00:32.413

如果链接服务器名称是 IP 地址，则以下代码为真：

```
select * from [1.2.3.4,1433\MSSQLSERVER].test.dbo.Table1 
```

只是，请注意 IP 地址部分周围的 []。

# ms-access - Unused forms/objects MS Access

> ID：495723
> 
> 赞同：4
> 
> 时间：2009-01-30T14:44:02.497
> 
> 标签：ms-access

Is there any way I can identify unused forms/reports/queries in a compiled Access (2003) project?

* * *

Edit : There is no check for unused objects menu item in my database window.

[AccessContextMenu http://f.imagehost.org/0551/AcessContextMenu.jpg](http://f.imagehost.org/0551/AcessContextMenu.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-30T15:37:13.403

是的，在“数据库”窗口中，右键单击对象（表单/报告/等）并选择“对象依赖关系”。如果它没有出现在任何地方，它可能没有被使用。

尽管这并不能告诉您它是否在某处的 VBA 代码中被调用。但是，您几乎可以通过在查看 VBA 时搜索对象名称来完全消除这种可能性，并确保您选择了“当前项目”而不是“当前模块”。它并不能阻止一些邪恶的编码人员在某处将对象名称连接在一起；但这不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-31T23:33:38.527

尝试使用来自 fms 的 SpeedFerret（它具有可能对开发人员有用的附加功能，并且它支持 .mde 文件）。

可在此处获得演示： [http ://www.moshannon.com/downloads.html](http://www.moshannon.com/downloads.html)

其他有用的 MSAccess 实用程序：http: [//www.granite.ab.ca/access/thirdparty.htm](http://www.granite.ab.ca/access/thirdparty.htm)

# wcf - 基于事件和基于回调/委托的异步方法之间的区别？

> ID：495733
> 
> 赞同：5
> 
> 时间：2009-01-30T14:45:48.623
> 
> 标签：wcf

在使用 svcutil.exe 时，我注意到了这个开关，/tcv:Version35。文档是这样说的：

> Version35：如果要为使用 .NET Framework 3.5 的客户端生成代码，请使用 /tcv:Version35。通过使用此值，SvcUtil.exe 工具会生成引用 .NET Framework 3.5 和以前版本中的功能的代码。将 /tcv:Version35 与 /async 开关一起使用时，会生成基于事件和基于回调/委托的异步方法。此外，还启用了对启用 LINQ 的数据集和 DateTimeOffset 的支持。

基于事件和基于回调/委托的异步模型有什么区别？

编辑：一种方式更新/更好？当我不使用 /tcv:Version35 开关时，我只获得 BeginXXX 和 EndXXX 方法。Silverlight 使用 XXXAsync，它告诉我应该使用基于事件的 (XXXAsync) 方法并使用此开关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T16:09:30.920

让我们像这样定义一个 WCF 服务：

```
namespace StackOverflow
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string GetName();
    }

    public class Test : ITest
    {
        public string GetName()
        {
            return "Joel Spolsky";
        }
    }
} 
```

如果对此运行 svcutil，您将获得以下客户端定义：

```
public partial class TestClient : System.ServiceModel.ClientBase<ITest>, ITest
{
    // Other details elided...    

    public string GetData(int value)
    {
        return base.Channel.GetData(value);
    }
} 
```

如果您使用 /async 标志再次运行 svcutil，您将获得以下客户端定义：

```
public partial class TestClient : System.ServiceModel.ClientBase<ITest>, ITest
{
    // Other details elided...

    public event System.EventHandler<GetDataCompletedEventArgs> GetDataCompleted;

    public string GetData(int value)
    {
        return base.Channel.GetData(value);
    }

    [EditorBrowsableAttribute(EditorBrowsableState.Advanced)]
    public System.IAsyncResult BeginGetData(int value, System.AsyncCallback callback, object asyncState)
    {
        return base.Channel.BeginGetData(value, callback, asyncState);
    }

    [EditorBrowsableAttribute(EditorBrowsableState.Advanced)]
    public string EndGetData(System.IAsyncResult result)
    {
        return base.Channel.EndGetData(result);
    }

    public void GetDataAsync(int value, object userState)
    {
        if ((this.onBeginGetDataDelegate == null))
        {
            this.onBeginGetDataDelegate = new BeginOperationDelegate(this.OnBeginGetData);
        }
        if ((this.onEndGetDataDelegate == null))
        {
            this.onEndGetDataDelegate = new EndOperationDelegate(this.OnEndGetData);
        }
        if ((this.onGetDataCompletedDelegate == null))
        {
            this.onGetDataCompletedDelegate = new System.Threading.SendOrPostCallback(this.OnGetDataCompleted);
        }
        base.InvokeAsync(this.onBeginGetDataDelegate, new object[] {value}, this.onEndGetDataDelegate, this.onGetDataCompletedDelegate, userState);
    }
} 
```

因此 /async 标志只是为您提供了一种与服务进行异步交互的方法，而不是默认的仅同步行为。

GetDataAsync() 方法异步调用 GetData() 方法，并在完成时通过 GetDataCompleted 事件通知您。

BeginGetData() 和 EndGetData() 方法使用委托的异步行为来异步调用 GetData() 方法。这类似于 System.Windows.Forms.Control 类上的 BeginInvoke() 和 EndInvoke() 方法或 System.IO.Stream 类上的 BeginRead() 和 EndRead() 方法。

# android - 有什么方法可以防止 Android 应用程序被删除？

> ID：495734
> 
> 赞同：13
> 
> 时间：2009-01-30T14:46:15.817
> 
> 标签：android

有谁知道是否有办法阻止用户从 Android 手机上卸载应用程序或在删除时重新安装它？在你激怒我之前，请知道我有一个打算由父母/雇主/等人安装在手机上的应用程序。并具有受密码保护的设置屏幕；用户需要输入密码才能删除应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T14:51:11.033

如果您让它在卸载时向注册的电子邮件地址发送电子邮件警报怎么办？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-30T20:58:12.397

不是没有修改内核，或者减少设备上的用户权限。把它想象成一台 Linux 计算机，手机用户拥有 root 权限。

你能阻止他们删除你的应用吗？不。

但是你*可以*让它变得非常痛苦和困难以至于它不值得，并包括表明它已被删除的警报。

首先，我会修改软件，使其定期从远程服务器请求并成功回答加密挑战/响应 - 每天应该足够了，并且不会影响电池使用。这样您的服务器就会知道它何时被禁用（可以作为额外的 10 美元/年服务费出售）并且您可以提醒购买者。

其次，我会在驱动程序级别将软件绑定到系统中，以便删除也删除文本服务。短信应用程序使用的某些驱动程序或服务可以替换为您的自定义版本，并且在删除时会使短信应用程序无用。很有可能您已经以类似的方式绑定到系统，以在旅行过快时阻止短信应用程序（和其他应用程序）。

第三，我会考虑安装一个作为单独进程运行的监控程序（查看最新病毒如何运行以获取线索）。它会检查以确保应用程序不仅仍在运行，而且还在运行最新版本，并且没有 GPS 模拟器或其他程序阻止您的应用程序获取正确的 GPS 数据。

不过，我很好奇你如何区分司机发短信和乘客座位上的朋友在司机手机上发短信。

-亚当

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-10T00:52:28.863

关于卸载服务时的邮件通知——

许多安全软件运行多个进程，相互监控，因此更难以关闭系统。您可以通过安装两个服务来执行类似的操作，每个服务都监视以查看是否安装了另一个。如果出现问题，他们可以发送电子邮件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-02-12T10:40:34.967

好吧，解决方案是将 /system/apps/ 挂载为可写并将您的应用程序放在那里一次。

当您重新启动手机时，它会自动安装它并阻止用户卸载（作为该文件夹中的每个应用程序，列出它以查看它）。这就是移动提供商强迫用户使用他们的应用程序的方式。

但是，用户始终可以通过 root + 挂载 /system/app/ 以可写然后删除来删除此应用程序。但是“普通父母”不能这样做:)

问候

PS这个问题是两年前的问题，我刚刚注意到它......：S

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-30T14:50:00.800

我非常怀疑这是可能的。Android 的权限结构将让用户（在某种程度上）完全控制手机上发生的事情，并且无法卸载应用程序将是一个相当大的安全风险。

如果您修改了 Android 核心，这可能是可能的，但如果您试图将某些东西强加给最终用户，那是个坏主意。

也许对你正在做的事情有更好的方法？如果应用程序中有一些必需的功能来阻止用户卸载它，那将是保留应用程序的一个小动机，但没有办法阻止用户删除他们真正不想要的东西。您可以让应用程序向单独的服务器报告正常运行时间，这样您就可以在应用程序被删除时收到通知，但我认为这是您所能得到的。

# java - 在 Scala 中迭代 Java 集合

> ID：495741
> 
> 赞同：116
> 
> 时间：2009-01-30T14:47:48.433
> 
> 标签：java, scala, collections, scala-java-interop

我正在编写一些使用[Apache POI](http://en.wikipedia.org/wiki/Apache_POI) API 的 Scala 代码。我想遍历`java.util.Iterator`从 Sheet 类中获得的行中包含的行。我想在`for each`样式循环中使用迭代器，所以我一直在尝试将它转换为原生 Scala 集合，但不会成功。

我查看了 Scala 包装器类/特征，但看不到如何正确使用它们。如何在不使用冗长`while(hasNext()) getNext()`的循环样式的情况下迭代 Scala 中的 Java 集合？

这是我根据正确答案编写的代码：

```
class IteratorWrapper[A](iter:java.util.Iterator[A])
{
    def foreach(f: A => Unit): Unit = {
        while(iter.hasNext){
          f(iter.next)
        }
    }
}

object SpreadsheetParser extends Application
{
    implicit def iteratorToWrapper[T](iter:java.util.Iterator[T]):IteratorWrapper[T] = new IteratorWrapper[T](iter)

    override def main(args:Array[String]):Unit =
    {
        val ios = new FileInputStream("assets/data.xls")
        val workbook = new HSSFWorkbook(ios)
        var sheet = workbook.getSheetAt(0)
        var rows = sheet.rowIterator()

        for (val row <- rows){
            println(row)
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2009-10-26T14:45:34.197

从 Scala 2.8 开始，您所要做的就是导入 JavaConversions 对象，该对象已经声明了适当的转换。

```
import scala.collection.JavaConversions._ 
```

不过，这在以前的版本中不起作用。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-05-31T17:25:21.627

**编辑**：Scala 2.13.0 已弃用`scala.collection.JavaConverters`，因此从 2.13.0 开始，您需要使用`scala.jdk.CollectionConverters`.

Scala 2.12.0 deprecates `scala.collection.JavaConversions`，所以从 2.12.0 开始，这样做的一种方法是：

```
import scala.collection.JavaConverters._

// ...

for(k <- javaCollection.asScala) {
    // ...
} 
```

（注意导入，new 是 JavaConverters，deprecated 是 JavaConversions）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-08-03T16:24:41.310

有一个包装类 ( `scala.collection.jcl.MutableIterator.Wrapper`)。所以如果你定义

```
implicit def javaIteratorToScalaIterator[A](it : java.util.Iterator[A]) = new Wrapper(it) 
```

那么它将充当 Scala 迭代器的子类，因此您可以执行`foreach`.

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-01-30T15:48:24.723

这里的正确答案是定义从 Java`Iterator`到某些自定义类型的隐式转换。这种类型应该实现一个`foreach`委托给底层的方法`Iterator`。这将允许您在`for`任何 Java中使用 Scala 循环`Iterator`。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-02-21T18:01:26.733

对于 Scala 2.10：

```
// Feature warning if you don't enable implicit conversions...
import scala.language.implicitConversions
import scala.collection.convert.WrapAsScala.enumerationAsScalaIterator 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-05-16T20:09:09.643

使用 Scala 2.10.4+（可能更早），可以通过导入 scala.collection.JavaConversions.asScalaIterator 将 java.util.Iterator[A] 隐式转换为 scala.collection.Iterator[A]。这是一个例子：

```
object SpreadSheetParser2 extends App {

  import org.apache.poi.hssf.usermodel.HSSFWorkbook
  import java.io.FileInputStream
  import scala.collection.JavaConversions.asScalaIterator

  val ios = new FileInputStream("data.xls")
  val workbook = new HSSFWorkbook(ios)
  var sheet = workbook.getSheetAt(0)
  val rows = sheet.rowIterator()

  for (row <- rows) {
    val cells = row.cellIterator()
    for (cell <- cells) {
      print(cell + ",")
    }
    println
  }

} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-01-01T00:43:51.373

如果您正在遍历大型数据集，那么您可能不想通过`.asScala`隐式转换将整个集合加载到内存中。在这种情况下，一种方便的方法是实现`scala.collection.Iterator`trait

```
import java.util.{Iterator => JIterator}

def scalaIterator[T](it: JIterator[T]) = new Iterator[T] {
  override def hasNext = it.hasNext
  override def next() = it.next()
} 

val jIterator: Iterator[String] = ... // iterating over a large dataset
scalaIterator(jIterator).take(2).map(_.length).foreach(println)  // only first 2 elements are loaded to memory 
```

它有类似的概念，但不太冗长的 IMO :)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-30T15:58:31.317

您可以将 Java 集合转换为数组并使用它：

```
val array = java.util.Arrays.asList("one","two","three").toArray
array.foreach(println) 
```

或者继续将数组转换为 Scala 列表：

```
val list = List.fromArray(array) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-07T06:59:28.983

如果您想避免 scala.collection.JavaConversions 中的隐含，*您*可以使用**scala.collection.JavaConverters**进行显式转换。

```
scala> val l = new java.util.LinkedList[Int]()
l: java.util.LinkedList[Int] = []

scala> (1 to 10).foreach(l.add(_))

scala> val i = l.iterator
i: java.util.Iterator[Int] = java.util.LinkedList$ListItr@11eadcba

scala> import scala.collection.JavaConverters._
import scala.collection.JavaConverters._

scala> i.asScala.mkString
res10: String = 12345678910 
```

请注意使用该`asScala`方法将 Java 转换`Iterator`为 Scala `Iterator`。

JavaConverters 从 Scala 2.8.1 开始可用。

# r - 以 08:00-08:15 等时间间隔运行

> ID：495744
> 
> 赞同：3
> 
> 时间：2009-01-30T14:48:19.883
> 
> 标签：r, time-series

我想导入一个时间序列，其中第一个字段表示一个时期：

```
08:00-08:15
08:15-08:30
08:30-08:45 
```

R 是否有任何功能可以巧妙地做到这一点？

谢谢！

* * *

**更新：**

正如 Godeke 所建议的那样，我发现的最有希望的解决方案是 cron 包并使用 substring() 来提取间隔的开始。

我仍在处理相关问题，所以当我到达那里时，我会更新解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T15:16:50.420

CRAN 显示了一个主动更新的包，称为“chron”，用于处理日期。您可能想检查一下以及此处找到的其他一些模块：http: [//cran.r-project.org/web/views/TimeSeries.html](http://cran.r-project.org/web/views/TimeSeries.html)

xts 和 zoo 在此之上处理不规则的时间序列数据。我对这些包不熟悉，但快速浏览一下就知道你应该能够通过拆分连字符并加载到它们提供的结构中来相当容易地使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-03T05:39:57.710

所以你得到了一个字符向量`c("08:00-08:15",08:15-08:30)`，你想转换为内部 R 数据类型以保持一致性？查看 POSIXt 和 strftime 的帮助文件。
像这样的功能怎么样：

```
importTimes <- function(t){
    t <- strsplit(t,"-")
    return(lapply(t,strptime,format="%H:%M:%S"))
} 
```

这将采用您所描述的字符向量，并返回一个相同长度的列表，其中每个元素都是一个 POSIXt 2 向量，给出开始和结束时间（在今天的日期）。如果你愿意，你可以`paste("1970-01-01",x)`在函数内添加一个地方来标准化你正在查看的日期，如果它是一个问题。

这些帮助有用？

# flash - 为什么补间动画会改变我的影片剪辑的大小/比例？

> ID：495746
> 
> 赞同：2
> 
> 时间：2009-01-30T14:48:49.710
> 
> 标签：flash, resize, movieclip

我在使用 Flash CS4 时遇到了一个非常奇怪的问题。我有一个尺寸为 652x400 的 MovieClip。当我为包含剪辑的图层创建补间动画并将播放头移动到补间的最后一帧时，我检查了同一个 MovieClip 的尺寸，它已更改为 660x408，尽管我没有甚至在补间结束时放入关键帧。更奇怪的是，对象在补间结束时看起来与开始时完全相同，尽管它每边都增加了 8 个像素。Flash 似乎在任意调整我的 MovieClips 的大小。以前有没有人遇到过这个问题，任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T17:12:38.920

好的，所以我做了一些实验，并找出了导致尺寸差异的原因。MovieClip 上有一个模糊滤镜，从第一个补间帧到最后一个补间帧。奇怪的是，即使这个滤镜在整个补间中设置为 0px x 0px 模糊，最后一帧仍然是 660x408。从本质上讲，无论您是否选择实际使用模糊，它仍然会改变尺寸，事实上它甚至在 MovieClip 上就足以改变它。任何人都知道发生了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T05:27:57.657

MovieClip 中是否有任何子剪辑？你完全确定它是一个影片剪辑而不是一个图形吗？时间线上的动画图形可能会产生奇怪的效果。

# c# - 按位或组合

> ID：495761
> 
> 赞同：1
> 
> 时间：2009-01-30T14:54:29.467
> 
> 标签：c#, .net, bit-manipulation

这是最常用的正则表达式函数之一

```
Regex.IsMatch("Test text for regex test.", "(test)",
RegexOptions.IgnoreCase | RegexOptions.Multiline); 
```

你能解释一下 Regex.IsMatch 方法是如何工作的吗？我的意思是它如何处理按位 OR RegexOptions 参数？它如何定义方法参数？

感谢您的回复！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T14:56:58.023

`RegexOptions``[Flags]`是一个应用了属性的枚举。这允许将按位运算应用于各种值。

你也可以做类似的事情：

```
[Flags]
enum MyOptions {
   UpperCase = 1,
   Reverse   = 2,
   Trim      = 4
}

public static void DoTransform(MyOptions options) {
    if ((options & MyOptions.UpperCase) == MyOptions.UpperCase) {
        /* Do Upper case transform */
    }
    if ((options & MyOptions.Reverse) == MyOptions.Reverse) {
        /* Do Reverse transform */
    }
    /* etc, ... */
}

DoTransform(MyOptions.UpperCase | MyOptions.Reverse); 
```

我刚刚根据弗兰克的评论做了更多的挖掘，他是正确的，无论有没有`[Flags]`属性，上面的代码都会编译和运行。

关于`[Flags]`属性*没有*做什么，还有其他评论，但除了“它影响`ToString()`结果”之外，似乎没有人知道或想要解释它*的作用*。在我编写的代码中，我修饰了打算用作`[Flags]`属性位域的枚举，因此在这种情况下，它至少在某种程度上是自记录的。不然我就亏大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T14:59:00.440

RegexOptions 是一个枚举，这意味着在内部，它表示为一个整数。它的值看起来像这样：

```
// note the powers of 2
enum RegexOptions {
    IgnoreCase = 1,      MultiLine = 2,
    SomeOtherOption = 4, YetAnotherThing = 8 } 
```

这些值的设计使得如果你用二进制表示它们，每个值都有一个位。

因此，如果您对两个值进行按位或运算并得到结果，您可以通过评估 (result AND IgnoreCase) 来确定是否设置了其中一个值（例如 IgnoreCase）。

# email - Sendmail 在后台运行 smtp 服务器（守护进程）？

> ID：495762
> 
> 赞同：1
> 
> 时间：2009-01-30T14:54:33.660
> 
> 标签：email, smtp, sysadmin, sendmail

我对电子邮件领域比较陌生。只是逐个学习有关电子邮件内部结构的教程。我的要求是我需要从我的虚拟主机发送电子邮件和接收电子邮件。为此，我需要一个运行正确的 smtp 服务器（守护进程）？我最近研究了 MTA，它负责将电子邮件从一台主机传输到另一台主机。所以这个 smtp 服务器（守护进程）充当 MTA。而且我还研究了sendmail是一个MTA，归结为sendmail在后台运行一个smtp守护进程。对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T14:57:35.107

您需要运行守护程序来**接收**电子邮件并在由于某种原因无法**发送电子邮件时重新发送电子邮件。**

要发送它们，您只需调用`sendmail`将连接到目的地的`sendmail`（当然，它作为守护程序运行），向您发送邮件并退出。

如果您从网站发送此邮件，则可以使用脚本语言的邮件功能，因为在繁重的负载下生成进程是非常昂贵的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T15:05:06.387

说 sendmail*是*一个 SMTP 守护进程可能比说它运行一个守护进程更公平，因为 sendmail 是相当单一的。但基本上你做对了——为了接收电子邮件，当传入连接到来时，你需要一个 MTA 在端口 25 上侦听。MTA 有很多选择。我更喜欢 postfix，因为它不是单片的，它有一个非常容易阅读的配置文件，而且它有一个很好的安全模型。其他不错的选择是 exim 和 qmail。

对于外发邮件，您需要一个程序来确定邮件应该去往哪里，并与该收件人的端口 25 建立连接。再一次，几乎任何 MTA 都会为您执行此操作，但有些程序想要发送mail 将尝试直接执行此操作，而不是调用本地 MTA。这样做的问题是，他们必须复制 MTA 提供给您的所有内容，例如知道如何在无法联系到邮件接收者时回退并重试。

# javascript - 为什么从 Javascript 数组中删除不会改变它的长度？

> ID：495764
> 
> 赞同：12
> 
> 时间：2009-01-30T14:54:43.070
> 
> 标签：javascript

我有一个数组：

```
data.Dealer.car[0]
data.Dealer.car[1]
data.Dealer.car[2] 
```

如果我这样做：

```
alert(data.Dealer.car.length);
delete data.Dealer.car[1];
alert(data.Dealer.car.length); 
```

它每次都给我相同的计数。删除的元素是否仍然存在？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-30T15:05:17.993

如果要删除项目，请使用以下`splice`方法：

```
alert(data.Dealer.car.length);
data.Dealer.car.splice(1, 1);
alert(data.Dealer.car.length); 
```

但请注意，指数已发生变化。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-30T14:57:15.763

JavaScript 数组不是稀疏的，如果你有一个 0 和一个 2，那么元素 1 必须存在。这意味着`length`它将是3。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-30T15:07:12.247

Array.shift() 将从数组中删除第一项并使其更短。Array.pop() 将删除最后一项。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-11T15:40:33.917

基于@Ray Hidayat 发布的内容：

JavaScript 数组**是**稀疏的。如果您有一个长度为 3 的数组，则删除 [1] 处的引用只会“取消设置”该项目，而不是将其从数组中删除，或更新该数组的长度。你可以用

```
myArray = [0, , 2, , , , ];  // length 6; last three items undefined 
```

这是一个小提琴：http: [//jsfiddle.net/WYKDz/](http://jsfiddle.net/WYKDz/)

注意：从大型数组的中间删除项目可能是计算密集型的。有关更多信息，请参阅此帖子： [从 Array() 中间删除一个条目的最快方法](https://stackoverflow.com/questions/638381/fastest-way-to-delete-one-entry-from-the-middle-of-array)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-30T15:12:12.517

我想你正在寻找这个：

```
var arr = [0,1,2,3,4];

alert( arr.splice( 2, 1 ) ); // alerts 2, the element you're removing
alert( arr ) // alerts 0,1,3,4  - the remaining elements 
```

这是[MDC 参考](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/splice)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T15:53:33.387

好的..现在修复了这个问题，因为数组仍然被分配。

我需要基本上做：

```
var newCar = new Array();
for (i = 0 ; i < tblSize -2; i ++)
{
    newCar[i]=data.Dealer.car[i];
}
data.Dealer.car = newCar; 
```

# html - 触发弹出窗口阻止程序的 IE 和下拉菜单

> ID：495767
> 
> 赞同：11
> 
> 时间：2009-01-30T14:54:59.510
> 
> 标签：html, internet-explorer-8, internet-explorer-7, popup, html-select

我不知道为什么会这样。我有一些非常简单的代码，在下面复制，它在除 IE 7 和 8 之外的所有浏览器中都能正常工作。在这些浏览器中，尝试在选择中展开选项列表会触发内置的弹出窗口阻止栏。

是什么赋予了？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
        Test
    </title>
</head>
<body>
    <form action="/dynamic/main.4d?Support&amp;demo2004_01&amp;RD" method="post" id="signup" name="signup">
        <fieldset id="selects">
            <select name="bedrooms">
                <option selected="selected" value="">
                    Bedrooms *
                </option>
                <option value="0">
                    Studio
                </option>
                <option value="1">
                    1 Bedroom
                </option>
                <option value="1.5">
                    Flex 2 Bedrooms
                </option>
                <option value="2">
                    2 Bedrooms
                </option>
                <option value="2.5">
                    Flex 3 Bedrooms
                </option>
                <option value="3">
                    3 Bedrooms
                </option>
            </select>
        </fieldset>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-03T05:28:58.963

你说“我正在使用 TredoSoft MultipleIEs”

我遇到了完全相同的问题，我正在使用 Internet Explorer Collection 在一台电脑上运行多个版本。因此，我得出结论，问题在于一台机器上有多个 IE！

希望这对人们有所帮助，因为您的回答对我有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T09:59:40.697

已经找到解决方案。此问题已在最新版本的 Internet Explorer 集合（2009 年 5 月 1 日发布）中得到修复

[http://finalbuilds.edskes.net/iecollection.htm](http://finalbuilds.edskes.net/iecollection.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T13:58:58.810

嗯……奇怪。似乎是您的浏览器/弹出窗口阻止程序内部的问题...在其他网站上选择呢？它们是否按预期工作？您是否尝试过进一步剥离它：

```
<form>
<select>
<option>blah</option>
</select>
</form> 
```

只是为了查明问题？

# .net - 使用 .NET 控制 Office 2007：哪个方向？

> ID：495768
> 
> 赞同：0
> 
> 时间：2009-01-30T14:55:09.807
> 
> 标签：.net, com, interop, sourcegear-fortress

我想通过它的 .NET API 从[Fortress](http://www.sourcegear.com/fortress)检索项目并将它们的描述加载到 Project 2007 中。我正在考虑这样做的“最佳”方法，所以我想我会把它交给我的堆垛机伙伴：

我应该编写一个 .NET 程序集并将其包装在 COM 中以便 Project 2007 从 VBA 调用吗？

还是应该编写一个通过 COM 调用 Project 2007 的 .NET 程序集？

从性能的角度来看，哪个更好？你会**怎么**做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T15:36:38.397

我倾向于使用 .NET 程序集的解决方案，但是，这实际上取决于您的需求。如果您只是拉文件，加载它，这就是我将采用 .NET 组装路线的全部内容，因为您可以简单地使用 Process.Start() 将其展示给用户。

但是，如果您要进行大量修改，您可能会通过 VBA 进行修改并使用包装在 COM 中的 .NET 程序集来实际获取文件，从而获得一些性能优势。

这取决于您正在寻找的最终解决方案。

# asp.net-mvc - 打开不同页面时MVC调用默认页面？

> ID：495774
> 
> 赞同：0
> 
> 时间：2009-01-30T14:56:11.927
> 
> 标签：asp.net-mvc, html-helper

我设置了一个简单的 MVC (RC1) 应用程序，但我看到了一些奇怪的行为。Home/Index 页面使用 ListView 显示项目列表。这是 HomeController 代码：

```
Function Index()
    ViewData("results") = From m In context.MyTable
    Return View()
End Function 
```

Home/Index.aspx 页面上只有一个 ListView，后面的代码是这样的：

```
Private Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    MyListView.DataSource = ViewData("results")
    MyListView.DataBind()
End Sub 
```

这在导航到主页/索引时工作正常。但是，我有另一个名为 Form 的视图和控制器。它现在只是一个存根，所以这里是 FormController：

```
Function Index()
    Return View()
End Function 
```

Form/Index.aspx 后面没有代码 - 再次，只是一个存根。

我看到的问题是，当我尝试导航到表单/索引时，我得到“对象引用未设置为对象的实例”。在 Home/Index.aspx.vb 后面的代码上。为什么是这样？我正试图离开该页面 - 为什么它试图执行后面的代码？如果我像这样包装代码：

```
If ViewData("results") IsNot Nothing Then
    MyListView.DataSource = ViewData("results")
    MyListView.DataBind()
End If 
```

一切正常，但似乎我不应该这样做。我错过了什么吗？

更新：根据请求，这是 Form/Index.aspx 的内容：

```
<%@ Page Title="" Language="VB" MasterPageFile="~/Views/Shared/Site.Master" AutoEventWireup="false" CodeBehind="Index.aspx.vb" Inherits="ProviderFeedback.Index" %>
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
    <h3>
        Enter Provider Feedback
    </h3>
    <form method="post" action="/Form/CreateNew">
        <%=Html.TextBox("member")%>
        <input type="submit" value="Submit" />
    </form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T15:44:29.037

这是正确的吗？

```
Inherits="ProviderFeedback.Index" 
```

那不应该是Form.Index吗？

# java - 我应该将 java.text.MessageFormat 用于没有占位符的本地化消息吗？

> ID：495776
> 
> 赞同：11
> 
> 时间：2009-01-30T14:56:41.490
> 
> 标签：java, localization, messageformat

我们正在本地化运行在 Java 5 上的 Web 应用程序的用户界面文本，并且对于如何输出属性文件中定义的消息（[java.util.Properties](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Properties.html)使用的那种类型）存在两难境地。

一些消息包含将使用[java.text.MessageFormat](http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html)填充的占位符。例如：

```
search.summary = Your search for {0} found {1} items. 
```

MessageFormat 很烦人，因为单引号是一个特殊字符，尽管在英文文本中很常见。您必须为文字单引号键入两个：

```
warning.item = This item''s {0} is not valid. 
```

但是，应用程序的大约 1000 条消息中有四分之三不包含占位符。这意味着我们可以直接输出它们，避免使用 MessageFormat，并且不理会单引号：

```
help.url = The web page's URL 
```

**问题：**我们应该对所有消息使用 MessageFormat，以保持语法一致，还是尽可能避免使用 MessageFormat，以便大多数消息不需要转义？

无论哪种方式，都有明显的利弊。

请注意，MessageFormat 的 API 文档承认了该问题并提出了非解决方案：

> 不幸的是，在消息格式模式中使用引号的规则有些令人困惑。特别是，对于本地化人员来说，单引号是否需要加倍并不总是显而易见的。确保将规则告知本地化人员，并告诉他们（例如，通过在资源包源文件中使用注释）MessageFormat 将处理哪些字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T15:07:40.593

只需编写您自己的 MessageFormat 实现，而无需使用这个烦人的功能。您可以查看[SLF4J Logger](http://www.slf4j.org/api/org/slf4j/Logger.html)的代码。

他们有自己的消息格式化程序版本，可以按如下方式使用：

```
logger.debug("Temperature set to {}. Old temperature was {}.", t, oldT); 
```

空占位符可以与默认排序一起使用，并为不同语言对单词或句子部分进行排列的某些本地化情况进行编号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-03T10:11:04.850

最后，我们决定通过始终使用“卷曲”引号来回避单引号问题：

```
warning.item = This item\u2019s {0} is not valid. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T16:09:19.283

使用 ` 字符而不是 ' 进行引用。我们一直使用它没有问题。

仅在需要时才使用 MessageFormat，否则它们只会使代码膨胀并且没有额外的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T16:54:00.723

在我看来，一致性对于这类事情很重要。属性文件和 MessageFormat 已经有很多限制。如果您发现这些麻烦，您可以“编译”您的属性文件以生成格式正确的文件。但我想说随处使用 MessageFormat 。这样，当您维护代码时，您无需担心哪些字符串已格式化，哪些未格式化。处理起来变得更简单，因为您可以将消息处理交给库，而不必担心高层的细节。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-30T16:04:42.100

另一种选择...加载属性文件时，只需将输入流包装在 FilterInpuStream 中，它将每个单引号加倍。

# java - 使用 XMLUnit RecursiveElementNameAndTextQualifier 比较 XML

> ID：495779
> 
> 赞同：0
> 
> 时间：2009-01-30T14:57:09.007
> 
> 标签：java, xml, unit-testing, junit

我正在尝试使用 XMLUnit 1.2 比较 2 个 XML 文件。我正在使用 RecursiveElementNameAndTextQualifier() 限定符。

在我的 XML 中更改某些实体 order 的 order 时，它会导致 XMLUnit 在某些情况下传递而在其他情况下失败。

我的 XML 文件看起来像这样，我将它与一个类似的副本进行比较，其中一个属性对等点的简单位置交换。

```
<root> 
  <ent> 
   <value> 
     <int>1</int>  
   </value> 
   <value> 
    <int>2</int>  
   </value> 
  </ent>  
  <ent> 
   <value> 
     <int>3</int>  
   </value> 
   <value> 
     <int>4</int>  
   </value> 
  </ent> 
</root> 
```

在其中一个 XML 文件中将 int: 1 与 int: 2 交换时，测试失败。但是当用 int:3 交换 int:4 时，它会一直通过。

这是我的测试代码：

```
public void testRecursiveElement() throws Exception {  

InputSource xml1 = new InputSource("xml1.xml"); 
InputSource xml2 = new InputSource("xml2.xml"); 

Diff myDiff = new Diff(xml1, xml2); 
myDiff.overrideElementQualifier(new RecursiveElementNameAndTextQualifier() ); 

assertXMLEqual("Not similar", myDiff, true); 
} 
```

您能建议问题是什么，以及为什么 XMLUnit 在第一种情况下检测到差异而不是在第二种情况下检测到差异。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-10T09:42:07.560

我试图重现您描述的行为，但没有成功。使用 RecursiveElementNameAndTextQualifier 时，元素的顺序似乎并不重要。因此，无论是交换 int:1 和 int:2，还是交换 int:3 和 int:4，都不会在我的测试中导致断言错误。

我不知道您会期望哪种行为，但是将 RecursiveElementNameAndTextQualifier 更改为 ElementNameAndTextQualifier 会导致两种交换情况的断言错误。

# visual-studio - 在 VisualStudio 设计器中显示 Control.Text

> ID：495782
> 
> 赞同：0
> 
> 时间：2009-01-30T14:57:21.113
> 
> 标签：visual-studio

我正在使用 VisualStudio 2005，我想在表单上设置控件的文本。由于各种原因，这不应在 VisualStudio 设计器中完成。我可以编写如下代码：

```
 public Form1( )
    {
        InitializeComponent( );
        button1.Text = "Test";
    } 
```

但是现在我在设计器中看不到文本，按钮是空的（或具有“button1”的默认文本）。有没有办法在设计器之外设置控件的文本并在 Visual Studio 设计器中查看文本？文本不应该是可编辑的，它只能是可见的。这将是非常好的，因为可以为常用短语使用常量，并且仍然可以在设计器中看到它们来调整 ui。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T15:32:44.130

这有点 hacky，但你可以继承你想要的控件并覆盖 Text 属性：

```
public class MyTest : Button
{
    public override string Text
    {
        get
        {
            return @"test";
        }
        set
        {
        }
    }
} 
```

这会显示在设计器中，但是当您尝试更改它时，Visual Studio 会忽略您。您可能想要做的不仅仅是返回一个硬编码的字符串文字，但我相信您明白了 :-)

# delphi - 如何使用第二个客户端重用（Delphi）OLE 服务器？

> ID：495785
> 
> 赞同：1
> 
> 时间：2009-01-30T14:57:52.203
> 
> 标签：delphi, com, automation, service, ole

我写了一个 OLE 自动化服务器（使用 Delphi）。我通常手动启动 OLE 服务器并将其用作普通应用程序。我不时启动一个客户端，它会自动连接到现有的 OLE 服务器。

当我终止客户端时，服务器不会终止（至少在客户端之前手动启动它时），但它不会接受任何其他 OLE 连接。启动另一个客户端将触发一个新服务器，而不是重用第一个。

如何与第二个客户端重用同一台服务器？

（问题已编辑以正确重新表述。在原始版本中，我问的是如何防止服务器终止，这不是一个好的表述）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-02T08:55:20.857

Delphi 的 COM 对象向导中有一个设置“实例化”。允许的值为“内部”、“多实例”、“单实例”。

我想用多个客户端重用同一个 COM 服务器。这就是我选择“单一实例”的原因，尽管我将为所有客户端提供我的服务器应用程序的单一实例。但是我错了。“单一实例”意味着我的服务器中只有一个 COM 连接实例。我应该选择“多实例”以允许同一服务器中的多个 COM 连接（但一个接一个，而不是同时）。

我认为Delphi中COM Object Wizard中使用的单词并不是很清楚。而不是“多实例”，“单实例”，最好像[这篇关于 OLE Server 和 VB](http://www.vbi.org/Items/article.asp?id=34)的文章中那样有“多用”和“单用” 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T15:22:22.107

在客户端，使用

`ConnectKind := ckRunningOrNew`

并且应该使用现有服务器而不是启动新服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T15:07:34.290

当您将服务器作为普通应用程序启动时，您应该能够增加自动化服务器的引用计数器。您要实现的目标有两个：让服务器在客户端退出时不终止，并且在客户端仍在运行时关闭主窗体时让服务器不终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T15:13:49.833

将 COM 对象创建为 Singleton。并且即使在客户端离开后也保持对象运行，请添加额外的引用计数。为此，请在 COM 对象内调用一次 QI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-12T10:28:20.330

关于上一篇文章“在 Delphi 的 COM 对象向导中有一个设置“实例化”。：至少在 C++ builder 中，此选项可以在项目设置项“ATL”*之后简单地更改。*此项目仅在您添加第一个自动化对象后出现在 EXE-ole-server 中。

（我还要求[这个精美页面](http://www.techvanguards.com/com/tutorials/tips.htm#Understand%20the%20class%20factory%20Instancing%20property)的作者在第18 项中提及这一点。）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-12T22:56:53.063

您还可以尝试通过运行 dcomcnfg 并选择 Component Services/Computers/My Computer/DCOM Config 并选择您的服务器来更改启动 OLE 服务器的用户的身份（如果它是 Exe 而不是 dll）。

您可能不得不玩弄它，我不记得它们之间的区别，但我认为“交互式用户”应该这样做。

# testing - 将所有邮件保存到文件夹的 SMTP 服务器？

> ID：495790
> 
> 赞同：21
> 
> 时间：2009-01-30T14:58:39.473
> 
> 标签：testing, smtp

是否有任何免费的 SMTP 服务器只接受通过它们发送的邮件，并将其保存到您的硬盘，而不将其发送给收件人。我想用它来测试我的应用程序。与其只是等待邮件通过，不如将所有电子邮件都放在一个文件夹中，这样我就可以查看它们。我可以在我的程序中添加一些挂钩来保存而不是发送消息，但如果代码遵循不同的路径，我认为这不是一个完整的测试。有没有这样的现有应用程序？

我认为这将非常有帮助，因为您可以测试邮件功能而无需等待邮件服务器发送它，这样您就可以在离线时进行编码，并且无法访问实际的邮件服务器.

[编辑]

我专门使用 .Net，但我没有使用 .Net 中的默认 SMTP 邮件处理类，因为它们在 .Net 1.1 中的局限性很大。我们正在使用第三方库（chilkat）。我知道从那时起事情已经发生了变化，但是代码是稳定的并且可以工作，所以现在重写 .Net API 没有意义。

我想要一个专门用作 SMTP 服务器的东西，因为我将来可以将它用于我从事的任何项目，无论语言如何。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-30T15:02:50.150

您可以在您的应用程序或 web.config 中使用标准 smtp 设置，并指定您希望电子邮件进入的文件夹。

```
<smtp
  deliveryMethod="specifiedPickupDirectory" 
  from="from address">
  <specifiedPickupDirectory>Your folder here</specifiedPickupDirectory>
</smtp> 
```

这使您可以在没有 smtp 服务器的情况下简单地存储电子邮件

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-08-31T19:50:43.100

*   [剪纸](https://github.com/changemakerstudios/papercut)
*   [海王星](http://www.donovanbrown.com/post/2008/10/20/Neptune.aspx)
*   [SMTP4Dev](https://github.com/rnwood/smtp4dev)
*   [笨蛋](http://quintanasoft.com/dumbster/)
*   [DevNull SMTP](http://www.aboutmyip.com/AboutMyXApp/DevNullSmtp.jsp)

取自[这个问题](https://stackoverflow.com/questions/1006650/dummy-smtp-server-for-testing-apps-that-send-email/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-30T15:05:08.540

在 Windows 上，您可以使用 IIS 服务器的默认 SMTP 服务器。为 *（通配符）为其域添加别名应该会导致它将转发给它的所有邮件丢弃到其投递文件夹中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-30T15:06:43.713

在 sendmail 或 postfix 中执行此操作相当容易 - 只需将本地传递代理配置为“cat >> 文件”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-08-31T19:25:04.680

这个有点晚了，但你试过[ssfd](http://ssfd.codeplex.com/)吗？

你可以把它放在你的机器或网络服务器上，捕获电子邮件并将它们弹出到一个目录中

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T15:03:28.183

不知道这种“假”的 SMTP 服务器，但在 .NET 中，您可以强制 SmtpClient 类将外发邮件保存到指定目录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-08-31T19:30:29.863

有 python DebuggingServer 以及标准库的一部分：

[http://docs.python.org/library/smtpd.html#debuggingserver-objects](http://docs.python.org/library/smtpd.html#debuggingserver-objects)

它将在标准输出上打印所有内容。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-06-05T07:27:40.057

我迟到了几年，但这对我很有用。

[http://emailrelay.sourceforge.net/](http://emailrelay.sourceforge.net/)

如果您的代码有效，拥有 .net 电子邮件客户端只是保存电子邮件而不发送它并不能回答问题。要判断它是否有效，您必须实际发送它。

# java - 使用 Spring Pitchfork 让 Java EE 兼容代码在非 Java EE 容器中运行

> ID：495792
> 
> 赞同：4
> 
> 时间：2009-01-30T14:59:55.507
> 
> 标签：java, spring, jakarta-ee, containers

我正面临放弃 Java EE 5 容器转而使用 Web 容器（使用 Spring）的决定。根据 Interface21，Spring Pitchfork 允许在 Spring 中使用 Java EE 编程模型的元素。因此，我在 Spring 容器内获得了 Java EE 注释的子集。因为我更喜欢保持与 Java EE 的兼容性，所以这对我来说是一个很有吸引力的选择。您对 Pitchfork 的体验是什么？您通过使用它完成了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T18:27:31.343

没有使用 Pitchfork 的经验，但有很多使用 Spring 的经验。之前的 EJB 不是问题。POJO 已经绰绰有余。

需要考虑的另外两个替代方案：

如果您需要 EJB、想要坚持使用 Tomcat 并且不想切换到购买的或开源的 Java EE 应用程序服务器，则可以将 OpenEJB 与 Tomcat 一起使用。

您可以尝试使用 OSGi 的 Spring dm Server。吃壳和鸡蛋 - 一路走下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-27T06:34:20.043

我使用干草叉在容器外对 EJB3 和 JPA 组件进行单元测试，它工作得非常好。我可以连接我需要的一切，包括事务管理器、二级缓存提供程序等。

# c# - c# 日志文件截断

> ID：495794
> 
> 赞同：1
> 
> 时间：2009-01-30T15:00:29.953
> 
> 标签：c#

我想创建一个创建和管理日志文件的类。我希望日志文件在超过一定数量的文本行时被截断。是否有人对从文本文件开头删除行的最佳实践有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T15:05:17.417

除非这是为了课堂作业，否则为什么不使用可用的开源替代品呢？Log4net 允许您在指定数量的日志文件之间滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:03:06.077

简而言之：不要

长版

当达到行数限制时，创建一个新的日志文件，保留之前的日志文件，但删除之前的日志文件。

您现在可以保证在任何给定时间至少有 n 行日志文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-21T12:24:41.610

我在[http://www.blackbeltcoder.com/Articles/files/a-convenient-logfile-class](http://www.blackbeltcoder.com/Articles/files/a-convenient-logfile-class)用 C# 创建了一个简单的 Logfile 类。

但是，文件在末尾被截断 - 而不是开头。因此，如果您截断文件，您将保留旧数据并丢失新数据。这可能不是你想要的。

我建议要么经常删除文件，要么创建一个新文件。例如，您可以写入基于当前日期的文件名，或基于每周仅更改一次的日期的名称等。

# c++ - 如何在 Visual Studio C++ 中使用第三方 DLL 文件？

> ID：495795
> 
> 赞同：80
> 
> 时间：2009-01-30T15:00:33.680
> 
> 标签：c++, visual-studio, winapi, dll

我知道我需要使用 LoadLibrary()。但是我还需要采取哪些其他步骤才能使用第三方 DLL 文件？

我只是跳入了 C++，这是我唯一没有得到的部分（作为 Java 程序员）。我只是在研究如何使用[Qt](https://en.wikipedia.org/wiki/Qt_%28software%29)库和 tesseract-ocr，但这个过程对我来说毫无意义，而且很难用谷歌搜索。

如何告诉编译器我正在使用的函数？是否应该有来自第三方供应商的包含文件？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-01-30T15:26:24.563

正如其他人所说，LoadLibrary 是很难做到的，而且几乎没有必要。

DLL 应该带有一个用于链接的 .lib 文件，以及一个或多个头文件以 #include 到您的源代码中。头文件将定义您可以从 DLL 中使用的类和函数原型。即使您使用 LoadLibrary，您也将需要它。

要与库链接，您可能必须将 .lib 文件添加到链接器/输入/附加依赖项下的项目配置中。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-12-05T21:11:13.820

要将第三方 DLL 合并到我的 VS 2008 C++ 项目中，我执行了以下操作（您应该能够翻译成 2010、2012 等）...

我将头文件与其他头文件一起放入我的解决方案中，对我的代码进行了更改以调用 DLL 的函数（否则我们为什么要这样做？）。:^) 然后我更改了构建以将 LIB 代码链接到我的 EXE，将 DLL 复制到位，并在我执行“清理”时清理它们 - 我将在下面解释这些更改。

假设您有 2 个第三方 DLL，A.DLL 和 B.DLL，并且每个都有一个存根 LIB 文件（A.LIB 和 B.LIB）和头文件（AH 和 BH）。

*   在您的解决方案目录下创建一个“lib”目录，例如使用 Windows 资源管理器。
*   将您的第三方 .LIB 和 .DLL 文件复制到此目录

（您必须为您使用的每个源构建目标（调试、发布）进行下一组更改。）

1.  使您的 EXE 依赖于 LIB 文件

    *   转到 Configuration Properties -> Linker -> Input -> Additional Dependencies，然后一次列出一个 .LIB 文件，用*空格*分隔： `A.LIB B.LIB`
    *   转到配置属性 -> 常规 -> 附加库目录，然后将您的“lib”目录添加到您已有的任何目录中。条目用*分号分隔*。例如，如果您已经`$(SolutionDir)fodder`有，则将其更改`$(SolutionDir)fodder;$(SolutionDir)lib`为添加“lib”。
2.  强制将 DLL 复制到输出目录

    *   转到配置属性 -> 构建事件 -> 构建后事件
    *   将以下内容放入命令行（有关开关含义，请参见 DOS 窗口中的“XCOPY /？”）：

    `XCOPY "$(SolutionDir)"\lib\*.DLL "$(TargetDir)" /D /K /Y`

    *   您可以将类似这样的内容用于描述：

    `Copy DLLs to Target Directory`

    *   从构建中排除应该是`No`. 单击`OK`。
3.  告诉 VS 在清理输出文件夹时清理 DLL：

    *   转到配置属性 -> 常规 -> 清除时要删除的扩展，然后单击“...”；添加`*.dll`到列表末尾并单击`OK`。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-01-30T15:08:47.003

这是在 Windows 中使用 DLL 文件的两种方法：

1.  有一个带有相关头文件的存根库 (.lib)。当您将可执行文件与 lib 文件链接时，它会在启动程序时自动加载 DLL 文件。

2.  手动加载 DLL。如果您正在开发一个插件系统，其中有许多实现公共接口的 DLL 文件，这通常是您想要做的。查看[LoadLibrary](http://msdn.microsoft.com/en-us/library/ms684175.aspx)和[GetProcAddress](http://msdn.microsoft.com/en-us/library/ms683212.aspx)的文档以获取更多信息。

对于 Qt，我怀疑有可用的标题和静态库，您可以在项目中包含和链接。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-30T15:22:04.120

为了将 Qt 与动态链接一起使用`lib`，您`qtmaind.lib`必须在.`QtCored4.lib``QtGuid4.lib`
`Properties » Linker » Input » Additional Dependencies`

您还必须**指定库所在的路径**，即在
`Properties » Linker » General » Additional Library Directories`.

并且您需要使相应`.dll`的 s 在运行时可访问，方法是将它们存储在与您相同的文件夹中或存储**在您的路径上**`.exe`的文件夹中。

 *** * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-30T15:09:26.127

如果你想后期绑定并且只在运行时解析导入的函数，你只需要使用 LoadLibrary。使用第三方 dll 的最简单方法是链接到 .lib。

* * *

回复您的编辑：

是的，第三方 API 应该包含一个 dll 和/或一个 lib，其中包含声明所需类型的实现和头文件。无论您使用哪种方法，您都需要知道类型定义 - 对于 LoadLibrary，您需要定义函数指针，因此您可以轻松地编写自己的头文件。基本上，如果你想要后期绑定，你只需要使用 LoadLibrary。如果您不确定 dll 是否在目标 PC 上可用，则一个有效的原因是。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-30T15:08:50.653

如果您希望能够使用它，那么第 3 方库应该有一个 *.lib 文件和一个 *.dll 文件。您只需将 *.lib 添加到项目的“链接器”选项中的输入文件列表中。

这个 *.lib 文件不一定是“静态”库（包含代码）：相反，*.lib 可以只是一个将可执行文件链接到 DLL 的文件。

# c# - 自动完成并防止新输入 - 组合框

> ID：495798
> 
> 赞同：5
> 
> 时间：2009-01-30T15:01:08.280
> 
> 标签：c#, .net, winforms, combobox, autocomplete

我怎样才能让我的程序的用户输入一个值并让它自动完成，但是，我还有什么可以阻止他们输入新数据，因为这会导致数据无法找到（除非你可以直接访问数据库）。

有谁知道如何做到这一点？

不使用下拉式组合框的原因是因为通过键入数据输入数据然后拒绝不属于列表选项的字符是因为它对用户来说更容易。

如果您使用过 Quickbook 的 Timer，那就是我想要的组合框样式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T17:57:08.863

感谢 BFree 的帮助，但这是我一直在寻找的解决方案。ComboBox 使用 DataSet 作为源，因此它不是自定义源。

```
 protected virtual void comboBoxAutoComplete_KeyPress(object sender, KeyPressEventArgs e) {
        if (Char.IsControl(e.KeyChar)) {
            //let it go if it's a control char such as escape, tab, backspace, enter...
            return;
        }
        ComboBox box = ((ComboBox)sender);

        //must get the selected portion only. Otherwise, we append the e.KeyChar to the AutoSuggested value (i.e. we'd never get anywhere)
        string nonSelected = box.Text.Substring(0, box.Text.Length - box.SelectionLength);

        string text = nonSelected + e.KeyChar;
        bool matched = false;
        for (int i = 0; i < box.Items.Count; i++) {
            if (((DataRowView)box.Items[i])[box.DisplayMember].ToString().StartsWith(text, true, null)) {
                matched = true;
                break;
            }
        }

        //toggle the matched bool because if we set handled to true, it precent's input, and we don't want to prevent
        //input if it's matched.
        e.Handled = !matched;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T17:25:52.310

这是我的解决方案，我遇到了同样的问题，并使用文本框而不是组合框修改您的代码以适合我的解决方案，也为了避免在比较第一个字符串后出现否定响应，必须在再次与自动完成列表比较之前取消选择文本，在这个代码是一个 AutoCompleteStringCollection shiper，我希望这个解决方案会有所帮助

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
  String text = ((TextBox)sender).Text.Substring(
    0, ((TextBox)sender).SelectionStart) + e.KeyChar;
  foreach(String s in this.shippers)
    if (s.ToUpperInvariant().StartsWith(text.ToUpperInvariant()) ||
      e.KeyChar == (char)Keys.Back || e.KeyChar == (char)Keys.Delete)
        return;                    

  e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:39:10.733

好的，这就是我想出的。黑客？也许吧，但是，嘿，它有效。我只是用一周中的几天填充组合框（嘿，我需要一些东西），然后处理按键事件。每次按键时，我都会检查该单词是否与 AutoCompleteSourceCollection 中任何单词的开头相匹配。如果没有，我将 e.Handled 设置为 true，因此不会注册密钥。

```
 public Form5()
    {
        InitializeComponent();

        foreach (var e in Enum.GetValues(typeof(DayOfWeek)))
        {
            this.comboBox1.AutoCompleteCustomSource.Add(e.ToString());
        }

        this.comboBox1.KeyPress += new KeyPressEventHandler(comboBox1_KeyPress);

    }

    private void comboBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        string text = this.comboBox1.Text + e.KeyChar;
        e.Handled =  !(this.comboBox1.AutoCompleteCustomSource.Cast<string>()
           .Any(s => s.ToUpperInvariant().StartsWith(text.ToUpperInvariant()))) && !char.IsControl(e.KeyChar);
    } 
```

**编辑：**如果您使用的是 .Net 3.5，则需要参考 System.Linq。如果您使用的是 .NET 2.0，请改用它：

```
 private void comboBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        string text = this.comboBox1.Text + e.KeyChar;
       foreach (string s in this.comboBox1.AutoCompleteCustomSource)
        {
            if (s.ToUpperInvariant().StartsWith(text.ToUpperInvariant()))
            {
                return;
            }
        }
        e.Handled = true;

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-22T08:33:42.627

我知道我迟到了大约六年，但也许这可以帮助某人。

```
 private void comboBox1_Leave(object sender, EventArgs e)
    {
        if (comboBox1.Items.Contains(comboBox1.Text)) { MessageBox.Show("YE"); }
        else { MessageBox.Show("NE"); }

        OR

        if (comboBox1.FindStringExact(comboBox1.Text) > -1) { MessageBox.Show("YE"); }
        else { MessageBox.Show("NE"); }
    } 
```

# iphone - 在 iPhone 上设置退格键

> ID：495801
> 
> 赞同：1
> 
> 时间：2009-01-30T15:01:48.233
> 
> 标签：iphone, cocoa-touch

在 iPhone 上，我试图找到一种方法来捕获并根据退格键按下事件采取行动。但找不到办法做到这一点！SDK中肯定必须记录一种这样的方式，对吗？

/约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T19:20:58.897

对于接受输入的 UITextField，将控制器对象设置为文本字段的委托并实现

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

控制器中的委托方法。

应该为每个编辑事件（按键）调用此方法。我相信您应该能够寻找一个空白替换字符串来告诉退格键正在删除字符。

# java-me - JavaME 国际化 (i18n)

> ID：495808
> 
> 赞同：3
> 
> 时间：2009-01-30T15:03:32.007
> 
> 标签：java-me, internationalization

有人对 JavaME 的国际化有一些了解吗？我正在寻找尽可能多的信息，例如示例、经验和一些最佳实践。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T19:50:04.190

一些想法。J2ME 不支持 i18n，因为它没有 api 支持（不能使用资源包）。但是我们可以在有限的范围内做到这一点。这是我发现的。

1.  对于给定的 J2ME 应用程序，即使不是不可能，也很难支持英语和说中文（印刷字符）。但是更容易支持英语和说西班牙语（我忘记了谈论 i18n 支持的正确命名法，但你明白了）。
2.  我们可以在一个配置类中包含所有字符串，这样您就可以将它换成不同的语言。
3.  我们可以在应用程序初始启动时从服务器下载文本/字符串，从而能够将其从服务器中换出。
4.  由于屏幕尺寸不同，最好使用自定义字体，以便编写代码以在显示时计算文本长度。这将使多语言支持更容易。
5.  图像资产也可以根据不同的语言从服务器下载。但我不认为我们可以改变 midlet 图标，所以它应该是通用的。

考虑到这一点，可以设计多语言支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T21:00:36.183

omemuhammed 的回答是对移动领域本地化的出色报道。

我只需要支持 EFIGS（英语、法语、意大利语、德语和西班牙语）。我们将所有字符串存储在 XML 中，每种语言都有一个 XML 包。然后，我们将这些 XML 包编译成专有的二进制数据，并且能够将所有 5 种语言构建到一个构建中，在应用程序大小紧张的情况下只有一种语言用于构建，或者从服务器下载二进制文件。

本地化的其他考虑因素是屏幕布局。我还推荐自定义字体，以便更好地控制许多不同设备的显示。您将需要一些自动包装代码来适应不同的屏幕分辨率和纵横比，并且您将需要一种方法来处理在某些设备上超出屏幕的字符串。分页或滚动都是一个很好的解决方案。

最后，只要知道德语会搞砸你的格式。尝试允许 20-30% 的英语填充用于菜单和其他 UI 元素，因为德语翻译将比其他语言长得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T11:59:34.840

请参阅 JavaME 的实际国际化规范：[http ://www.jcp.org/en/jsr/detail?id=238](http://www.jcp.org/en/jsr/detail?id=238)

最近的 Symbian 手机应该支持这一点。

一个明显的建议是在本地化手机上实际试用您的应用程序：从瑞士购买一部手机（它应该至少支持 4 种语言），从香港购买一部手机（带有 3 种不同版本的“中文”）。东欧/前苏联也可能值得研究。

当实际字符不是您通常的 ascii 字符时，您确实需要使用 TextBox 或 TextField 以便在屏幕上拥有本地化的本机控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-13T19:32:36.857

请记住，当您使用 RTL（从右到左）语言时，例如阿拉伯语，您应该反转屏幕上几乎所有内容的位置，就像拉丁语中的列表看起来像这样

*   清单项目 1
*   清单项目 2
*   清单项目 3

但是子弹会在阿拉伯语屏幕的另一侧（尝试在这里制作，但我无法生成倒排列表：P）

另一件事是将字符串存储在类中比纯文本属性更好，因为这可能会导致一些错误解释某些语言的 unicode，具体取决于您使用的操作系统和文本编辑器。

我通常做的是有一个 I18nManager 类，它将语言存储在 startApp 中，通过这个类我得到了我需要的所有字符串。

# sql-server - 如何编写一些 SQL 来返回显示每个小时内发生的行数的结果？

> ID：495814
> 
> 赞同：2
> 
> 时间：2009-01-30T15:04:27.447
> 
> 标签：sql-server, tsql, select

我需要生成一个 SQL 报告，显示一天中每个小时内特定事件发生的次数。我的表上有一个日期/时间列，其中包含事件发生的时间。

如何计算一天中每个小时内的行数？

所以我需要看到这样的输出......

10:00 - 11:00 12 次

11.00 - 12:00 53 次

12:00 - 13:00 5 次等

我猜这将是一个分组依据，但你如何按小时分组？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T15:05:56.960

```
SELECT DATEPART(hh, DateTimeColumn), COUNT(*)
FROM
    TableName
GROUP BY
    DATEPART(hh, DateTimeColumn)
ORDER BY
    DATEPART(hh, DateTimeColumn) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:16:54.537

Seans 解决方案仅适用于 24 小时的数据，因为 datepart dd 仅返回 0-23。

如果您需要处理更多，您也需要在当天添加。

就像是：

```
SELECT CAST(DateTimeColumn AS INT) [day],DATEPART(hh, DateTimeColumn), COUNT(*)
FROM
    TableName
GROUP BY
    CAST(DateTimeColumn AS INT),
    DATEPART(hh, DateTimeColumn)
ORDER BY
    CAST(DateTimeColumn AS INT),
    DATEPART(hh, DateTimeColumn 
```

# grails - 如何在现有的 Java EE 应用程序上开始使用 GRAILS？

> ID：495823
> 
> 赞同：1
> 
> 时间：2009-01-30T15:06:21.140
> 
> 标签：grails, jakarta-ee

我是 grails 的新手。我想通过在现有的 Java EE 应用程序中实现一两个新特性来试一试。当前的 Java EE 应用程序是在 Tomcat 上运行的相当标准的 Spring MVC/Hibernate 应用程序。浏览文档，看起来我应该能够利用所有当前用 Java 编写的业务逻辑。

我只能找到有关创建新 grails 应用程序的教程。有谁知道与现有 Java EE 应用程序集成的教程？如果不是教程，关于从哪里开始的任何建议或建议？

这些功能是否上线将取决于我对 Grails 的体验以及我是否认为值得继续使用它。目标是：

1.  决定 Grails 不适合我（而不是部署 grails）。
2.  决定它适合我，并且这个应用程序的所有未来开发都将在 Grails 中完成，最终完成完整的移植。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T15:22:23.027

恐怕我不知道任何这样的教程，但我的直接想法是移植应用程序同时结合学习 Grails 可能是一个很大的困难。

我以前没有做过这种事情，所以这些只是对我如何做这件事的思考。

由于 GSP 与 JSP 不同，并且 Java 中的控制器是静态类型的，而 Grails 控制器具有连接到它们的魔术方法，我可能想从头开始在 Grails 中重新编写它们，因为它们的可转移性并不明显 - 逻辑应该转移，但旧代码的样板在大多数情况下并不是完全必要的。

也许拿一个简单的故事/功能，保留它使用的现有服务，并通过 Grails 中的 Spring 将它们连接起来。然后尝试用相应的控制器/GSP 和域制作你在 Java 中所拥有的内容的一对一副本。这应该让您了解为港口起步需要哪些东西。

从我听说过的人那里，您最大的困难可能是尝试在 Grails 中重用您现有的休眠内容。

只是我的 tuppence，而不是一个完整的答案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T09:14:11.347

将 Grails 插入 Spring 应用程序并不容易，您可以尝试将旧的 Spring 应用程序插入 Grails 应用程序，然后继续。

[在这里](http://www.ibm.com/developerworks/java/library/j-grails07158/index.html?S_TACT=105AGX02&S_CMP=EDU)，您有一些关于使用休眠映射和 java 类的信息。

您还必须将 Sprint 应用程序的 bean 添加到 Grails 应用程序。您可以将它们直接插入 ApplicationContext 或使用 resources.xml 或 resources.groovy。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T15:45:47.520

这取决于您编写 Java EE 应用程序的方式。您不能将其放入 Grails 运行时并期望它无需调整即可工作，尤其是应用程序的“控制器”部分（因为 grails 使用它自己的约定）。UI，如果它的 jsp，可能会好一点，因为您可以将它们重命名为 gsp，并让它工作。标记库可以立即工作，而普通的 Java 类显然可以立即工作。Hibernate 对象可能需要调整——尽管我认为使用 grails 重做那些对象可能更容易。

-我的 2cents

# c# - 如何以编程方式调用事件？

> ID：495826
> 
> 赞同：4
> 
> 时间：2009-01-30T15:07:01.843
> 
> 标签：c#, windows-mobile

我正在创建一个 C# Windows Mobile 应用程序，我需要以编程方式调用按钮上的单击事件。

我查看了 Button 类，但没有看到这样做的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-30T15:09:28.360

您可能会考虑更改您的设计：至少将逻辑从 button1_Click 处理程序移到其他地方，以便您可以从任何您想要的地方调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T15:10:51.430

你可以这样做：

```
 private void button1_Click(object sender, EventArgs e)
    {
        OnButtonClick();
    }

    private void OnButtonClick()
    {

    } 
```

然后，您可以在`OnButtonClick()`任何需要的地方拨打您的电话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:11:22.787

不完全是您可能正在寻找的答案:::

您可能只是调用要运行的代码，将代码的核心移到 OnClick 处理方法之外。OnClick 方法可以像您的代码一样触发该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-10T11:52:17.310

Button 继承自的 Control 类具有调用 Click 事件的 OnClick 方法。使用反射，您可以调用此方法，即使它被声明为受保护。例如，我创建了以下扩展方法：

```
public static void PerformClick(this Control value)
    {
        if (value == null)
            throw new ArgumentNullException();

        var methodInfo = value.GetType().GetMethod("OnClick", BindingFlags.NonPublic | BindingFlags.Instance);
        methodInfo.Invoke(value, new object[] { EventArgs.Empty });
    } 
```

虽然，这可能被视为一个肮脏的黑客......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T15:10:05.830

有什么阻止您简单地调用处理 onClick 事件的方法？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-08T11:52:27.713

您可以将添加的事件处理函数调用为：

```
someControl_EventOccured(someControl, new EventArgs()); 
```

当控件的事件参数`e`未在处理函数内部使用时，此方法有效，并且大多数情况下未使用。

# label - 有没有办法检查标签是否已经在 LaTeX 中定义？

> ID：495841
> 
> 赞同：4
> 
> 时间：2009-01-30T15:10:05.517
> 
> 标签：label, latex

我在大卫哈纳克的回答之后编辑了这个问题（谢谢顺便说一句！）。他帮助了语法，但似乎我一开始就没有使用正确的函数。

基本上我想要的是让编译器忽略某个标签的多个定义并只使用第一个。为了做到这一点，我想我会做这样的事情：

```
    \makeatletter
    \newcommand{\mylabel}[1]{
        \@ifundefined{#1}{\label{#1}}{X}
    }
    \makeatother

```

但这不起作用，因为总是选择第一个选项（标签是否定义无关紧要）。我认为 \@ifundefined（和建议的 \ifundefined）只适用于命令而不适用于标签，但我对 LaTeX 知之甚少。对此的任何帮助都会很棒！谢谢！

很久以后的更新：我将 David Hanak 的回答标记为对我的问题的正确答案，但这不是一个完整的解决方案，尽管它确实帮助了我。问题是，我认为但我不是专家，即使 David 的代码检查是否定义了标签，它也仅在之前的运行中定义了标签时才有效（即在 .aux 文件中）。如果在同一运行中定义了两个具有相同名称的 \mylabels，则仍将定义第二个。此外，即使您设法解决此问题，它也会使 LaTeX 使用您按时间顺序定义的第一个标签，而不一定是文本中的第一个标签。无论如何，下面是我快速而肮脏的解决方案。它使用了计数器似乎立即被定义的事实。

```
\newcommand{\mylabel}[1]{%
    \@ifundefined{c@#1}{%
        \newcounter{#1}%
        \setcounter{#1}{0}%
    }{}%
    \ifthenelse{\value{#1} > 0}{}{%
        \标签{#1}%
        \addtocounter{#1}{1}%
    }%
}

```

我不确定是否有必要将计数器初始化为 0，因为这似乎是一个默认值，但我找不到是否是这种情况，所以我只是为了安全。此外，这使用了“ifthen”包，我不确定它是否必要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:39:15.730

我也不是 LaTeX 专家，但是经过一天的尝试和搜索互联网后，以下内容对我有用。我使用了一个虚拟计数器来解决这个问题。希望这会有所帮助，显然没有多少人在寻找这个。

```
\newcommand{\mylabel}[1]{
    \ifcsname c@#1\endcsname%
    \else%
        \newcounter{#1}\label{#1}%
    \fi%
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T15:20:52.470

`@`是 LaTeX 中的一个特殊字符。为了使您的声明在语法上正确，您必须再添加两行：

```
\makeatletter
\newcommand{\mylabel}[1]{
    \@ifundefined{#1}{\label{#1}}{X}
}
\makeatother 
```

第一行变成`@`一个普通的字母，最后一行反转了它的效果。

**更新：**您可能还想看看“普通” [`\ifundefined`LaTeX 宏](http://www.tug.org/docs/html/eplain/_005cifundefined.html)。

**更新 2**

好的，我做了一些研究来找出*真正*问题的答案。问题是定义一个标签不会用那个名字创建一个宏。它在前面加上一个“r@”。所以尝试以下方法：

```
\makeatletter
\newcommand{\mylabel}[1]{
    \@ifundefined{r@#1}{\label{#1}}{X}
}
\makeatother 
```

有关更多技术细节，请参阅您的 LaTeX 发行版中 latex.ltx 的第 3863 行（其中显示`\def\newlabel{\@newl@bel r}`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T10:28:12.900

Victor Eijkhout，“TeX by Topic”，第 143 页：

```
\def\ifUnDefinedCs#1{\expandafter\ifx\csname#1\endcsname\relax} 
```

这可以用来检查一个标签是否被定义；如果没有，则打印标签：

```
\newcommand{\myautoref}[1]{\ifUnDefinedCs{r@#1}{\color{magenta}\IDontKnow\{#1\}}\else\autoref{#1}\fi} 
```

# c# - 为什么（string）int32总是抛出：无法将类型'int'转换为'string'

> ID：495852
> 
> 赞同：4
> 
> 时间：2009-01-30T15:14:36.757
> 
> 标签：c#, compilation

为什么（string）int32总是抛出：无法将类型'int'转换为'string'

```
public class Foo
    {   
        private int FooID;
        public Foo()
        {
            FooID = 4;
            string s = (string)FooID; //throws compile error
            string sss = FooID.ToString(); //no compile error
        }
    } 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-30T15:16:00.390

因为没有定义从 Int32 到字符串的类型转换。这就是 ToString 方法的用途。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-01-30T15:45:25.493

如果你这样做：

```
string s = (string)70; 
```

你希望在 s 中有什么？

A. “70”这个数字以人类阅读的方式书写。
B.“+70”前面有正数指示符的数字。
C. “F” [ASCII 码 70](http://www.asciitable.com/)表示的字符。
D. "\x00\x00\x00F" int 的四个字节，每个字节分别转换为它们的 ASCII 表示。
E. "\x0000F" int 分成两组，每组两个字节，每组代表一个 Unicode 字符。
F. "1000110" 70 的二进制表示。
G. "$70" 转换为货币的整数
H. 其他。

编译器无法判断，所以它会让你做很长的路要走。

有两条“长路”。第一种是使用 Convert.ToString() 重载之一，如下所示：

```
string s = Convert.ToString(-70, 10); 
```

这意味着它将使用以 10 为底的表示法将数字转换为字符串。如果数字为负数，则在开头显示“-”，否则仅显示数字。但是，如果您转换为二进制、八进制或十六进制，负数将以[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)显示，因此 Convert.ToString(-7, 16) 变为“ffffffba”。

另一个“漫长的道路”是将 ToString 与这样的字符串格式化程序一起使用：

```
string s2 = 70.ToString("D"); 
```

D 是格式化程序代码，告诉 ToString 方法如何转换为字符串。下面列出了一些有趣的代码：

"D" 十进制格式，即数字 0-9，如果需要，开头带有“-”。例如 -70 变成“-70”。
“D8”我显示了 8，但可以是任何数字。与十进制相同，但它用零填充到所需的长度。例如 -70 变成“-00000070”。
"N" 插入千位分隔符，并在末尾添加 ".00"。例如 -1000 变为“-1,000.00”。
“C” 在开头的“-”之后添加一个货币符号，然后与“N”相同。例如，使用 en-Gb 文化 -1000 变为“-£1,000.00”。
“X”十六进制格式。例如 -70 变成“46”。

**注意：**这些格式取决于当前的文化设置，因此如果您使用 en-Us，则在使用格式代码“C”时，您将获得“$”而不是“£”。

有关格式代码的更多信息，请参阅[MSDN - 标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-30T15:22:34.777

在执行类似的转换操作时`(string)30`，您基本上是在告诉计算机“这个对象与我要转换的对象足够相似，我不会丢失太多（或任何）数据/功能”。

将数字转换为字符串时，数据会“丢失”。字符串不能进行数学运算，也不能做与数字相关的事情。

这就是为什么你可以这样做：

```
int test1 = 34;
double test2 = (double)test1; 
```

但不是这个：

```
int test1 = 34;
string test2 = (string)test1; 
```

这个例子并不完美，因为（IIRC）这里的转换是隐式的，但是这个想法是当转换为双精度时，您不会丢失任何信息。无论是 a`double`还是 ，该数据类型基本上仍然可以发挥相同的作用`int`。不能`int`对 a说同样的话`string`。

（通常）只有在转换完成后不会丢失太多功能时才允许进行强制转换。

该`.ToString()`方法与强制转换不同，因为它只是一个返回`string`数据类型的方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-30T15:16:13.540

Int 没有明确的字符串运算符。但是，它们有 Int32.ToString();。*如果你真的*想的话，也许你可以用扩展方法创建一个。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-30T15:57:51.397

**只是另一个注意事项：**一般来说，如果你想进行这样的显式转换（我同意这里的许多其他答案，为什么它需要显式转换）**不要忽视[Convert](http://msdn.microsoft.com/en-us/library/system.convert(VS.71).aspx) type**。它是为这些类型的原始/简单类型转换而设计的。

我知道从 C# 开始（并且来自 C++）时，我发现自己遇到了看起来应该有效的类型转换。C++ 在这类事情上稍微自由一些，所以在 C# 中，设计者希望你知道什么时候你的类型转换是模棱两可的或不明智的。然后 Convert 类型通过允许您*显式转换和理解副作用*来填补空白。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-30T15:16:38.080

因为 C# 不知道如何将 int 转换为字符串，所以库 (.ToString) 知道。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-30T15:33:51.930

Int32 无法转换为字符串，因为 C# 编译器不知道如何从一种类型转换为另一种类型。

为什么会这样，你会问原因很简单，int32 是整数/数字类型，而字符串是，哦，好吧，类型是字符串/字符。您可能能够从数值类型转换为另一种数值类型（例如，浮点数转换为整数，但请注意可能会丢失准确性）。如果在编译器中编码的所有可能的转换，编译器将变得太慢，并且肯定会错过为用户定义的类型创建的许多可能的转换，这是一个主要的 NO NO。

所以解决方法是 C# 中的任何对象都有一个继承的函数 .ToString() 知道如何处理每种类型，因为 .ToString() 是针对特定类型专门编码的，并且正如您现在所猜测的那样返回一个字符串。

毕竟 Int32 类型是内存中的一些位（确切地说是 32 位），而字符串类型是另一堆位（多少位取决于分配了多少位），编译器/运行时本身不知道任何事情到现在为止的数据。.ToString() 函数访问从一种转换到另一种所需的特定元数据。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-08-24T10:40:35.390

我刚刚找到了答案。ToString 在 int 变量上工作正常。您只需要确保添加括号即可。

IE...

```
int intMyInt=32;

string strMyString = intMyInt.ToString(); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2010-08-24T10:34:35.670

VB .net 完全能够从 int 转换为 string……事实上 Java 也是如此。为什么 C# 会有问题呢？有时需要在计算中使用数字值，然后以字符串格式显示结果。您还能如何在 TextBox 中显示计算结果？

这里给出的回答毫无意义。必须有一种方法可以将 int 转换为字符串。

# c# - yield 方法中的垃圾回收

> ID：495853
> 
> 赞同：1
> 
> 时间：2009-01-30T15:14:56.523
> 
> 标签：c#, .net, garbage-collection, yield

假设我有这样的方法（从 Jon Skeet 之前的 SO 回答中窃取）：

```
public static IEnumerable<TSource> DuplicatesBy<TSource, TKey>
    (this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
{
    HashSet<TKey> seenKeys = new HashSet<TKey>();
    foreach (TSource element in source)
    {
        // Yield it if the key hasn't actually been added - i.e. it
        // was already in the set
        if (!seenKeys.Add(keySelector(element)))
        {
            yield return element;
        }
    }
} 
```

在这种方法中，我有一个 HashSet 用于保存已看到的键。如果我在这样的事情中使用这种方法。

```
List<string> strings = new List<string> { "1", "1", "2", "3" };
List<string> somewhatUniques = strings.DuplicatesBy(s => s).Take(2); 
```

这只会枚举字符串列表中的前两项。但是垃圾收集如何收集 seenKeys 哈希集。由于 yield 只是暂停了方法的执行，如果方法很昂贵，我怎么能确保我正确地处理东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-30T19:27:52.363

编译器生成一个隐藏类来实现此代码。它有一个超级秘密名称：“d__0`2”。您的 seenKeys 和源变量成为该类的字段，确保除非收集类对象，否则它们不会被垃圾收集。

该类实现了 IEnumerator<> 接口，使用迭代器的客户端代码使用该接口调用 MoveNext() 方法。正是该接口引用使类对象保持活动状态。这使其领域保持活力。一旦客户端代码完成 foreach 循环，接口引用就会消失，从而允许 GC 清理所有内容。

使用 Ildasm.exe 或 Reflector 亲自查看。它还将使您对语法糖的隐藏成本有所了解。迭代器并不便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:23:51.153

好吧，垃圾收集不会*立即*收集它。显然不能。

在内部，当您对方法执行诸如 foreach 之类的操作时，它会多次调用 GetEnumerator() 和 MoveNext() 以获取每件事。枚举器是一次性的，当枚举器被释放时——foreach 在循环结束时为你释放它——垃圾收集将随意清理迭代器中的任何对象。

因此，如果您的迭代器中有很多昂贵的状态，并且您要迭代很长时间，那么您可能不想使用 yield return，或者通过调用类似 ToArray() 的方法立即评估整个枚举然后看着那个。

**编辑**：所以，为了回答你的最后一个问题——你如何确保它被处理——如果你在上面使用 LINQ 或 foreach 构造，你不需要做任何特别的事情，因为他们自己通过他们的平常的魔法。如果您手动获取枚举器，请确保在完成后调用 Dispose() 或将其放入 using 块中。

# c# - 获取部分财产的逻辑。好习惯？

> ID：495864
> 
> 赞同：9
> 
> 时间：2009-01-30T15:16:56.423
> 
> 标签：c#, wpf, data-binding, properties

在将我的 xaml 数据绑定到某些数据时，我经常使用属性的“获取”部分来执行一些逻辑。就像给出一个列表的总和或检查某件事是否是积极的。

例如：

```
public List<SomeClass> ListOfSomeClass{get;set;}

public double SumOfSomeClass
{
  get
  {
    return ListOfSomeClass.Sum(s => s.Totals);
  }
}

public bool SumPositive
{
  get
  {
    if(SumOfSomeClass >= 0)
      return true;
    else
      return false;
  }
} 
```

这样我可以绑定到 SumPositive 和 SumOfSomeClass。这被认为是好的做法吗？即使它变得比这更复杂？还是调用一个方法并返回结果会更好？调用另一个类甚至数据库呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-30T15:23:55.210

属性 getter 应该是快速且幂等的（即不应在那里执行破坏性操作）。*尽管迭代内存中的对象集合非常好，但我不建议在get*或*set*部分中进行任何繁重的工作。说到迭代，我仍然会缓存结果以节省几毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T15:32:01.917

是的，除非它是可能对性能产生影响的操作。在这种情况下，您应该改用方法（因为最终用户更直观地认为方法可能很慢，而属性会很快）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:20:18.697

我说是的，但尝试将结果存储在 ListOfSomeClass.Sum(s => s.Totals) 的私有变量中。特别是如果您多次使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T15:23:33.917

在 getter/setter 中有复杂的逻辑不是一个好习惯。我建议将复杂的逻辑移动到单独的方法（如 GetSumOfXYZ()）并在属性访问器中使用[记忆](http://en.wikipedia.org/wiki/Memoization)。

您可以通过使用[ObjectDataProvider](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.aspx)来避免复杂的属性- 它允许您定义提取一些数据的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T15:24:50.120

我没有看到任何直接的问题（除非列表非常庞大），但`myInstance.SomeList.Sum()`如果可能的话，我会亲自使用该方法（.net >= 2.0）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T15:27:27.137

对于集合中的字段或其他属性的基本计算，可以在 Get 属性中执行此操作。正如其他人所说，真正的逻辑永远不应该在 getter 中完成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-30T15:33:52.553

请将该吸气剂更改为：

```
public bool SumPositive
{
  get
  {
     return SumOfSomeClass >= 0;
  }
} 
```

您已经在使用布尔表达式，无需显式返回 true 或 false

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-30T15:48:26.923

我喜欢您的命名约定，并且我完全同意在属性获取器中使用诸如您的示例之类的内容，如果您要提供用于绑定的 API。

我不同意其他人关于将代码移动到方法中的观点，因为它的计算量很大——这不是我曾经做过的区别，也没有听说过其他人认为在方法中意味着比属性慢.

我确实相信属性在调用它们的对象上应该没有副作用。要保证它们对更广泛的环境没有影响要困难得多——即使是相对微不足道的属性也可能会将数据拉入内存或至少更改处理器缓存或虚拟机状态。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-30T15:29:15.557

取决于...如果这是在域实体上，那么我不赞成在 getter 中使用复杂的逻辑，尤其是在 setter 中。使用方法（对我而言）向实体的消费者发出信号表明正在执行操作，而 getter 发出简单的检索信号。

现在，如果这个逻辑在 ViewModel 中，那么我认为 getter 方面更容易被原谅/预期。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-30T15:29:15.963

我认为在 Getters 和 Setters 中存在某种程度的逻辑，否则你只有一种复杂的方式来将你的成员声明为 public。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-30T16:22:19.693

我会小心地将任何逻辑放在属性的 Getter 中。做的越贵，就越危险。其他开发人员希望 getter 立即返回值，就像从成员变量中获取值一样。我见过很多例子，开发人员在循环的每次迭代中都使用一个属性，认为他们只是在取回一个值，而该属性实际上做了很多工作。这可能是代码执行速度的主要放缓。

# c# - ToString() 不返回预期的字符串

> ID：495867
> 
> 赞同：3
> 
> 时间：2009-01-30T15:19:17.997
> 
> 标签：c#, .net, generics

```
 using System;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication3Generics
{
    class Program
    {
        static void Main(string[] args)
        {
            ScheduleSelectedItems sitems = new ScheduleSelectedItems("Yusuf");
            ScheduleSelectedItemsList slist = new ScheduleSelectedItemsList();
            slist.Items.Add(sitems);
            Console.Write(slist.Items[0].ToString());
            Console.ReadKey();
        }
    }
    public class ScheduleSelectedItems
    {
        private string Ad;

        public ScheduleSelectedItems(string ad)
        {
            Ad = ad;
        }
    }

    public class ScheduleSelectedItemsList
    {
        public List Items;

        public ScheduleSelectedItemsList()
        {
            Items = new List();
        }
    }
}
```

如何在我的控制台上添加“yusuf”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-30T15:21:18.723

```
public class ScheduleSelectedItems
    {
        private string Ad;

        public ScheduleSelectedItems(string ad)
        {
            Ad = ad;
        }

        public override string ToString()
        {
            return this.Ad;
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T15:24:47.330

BFree 所说的，稍加修改以使其成为单数而不是复数：

```
public class ScheduleSelectedItem
{
    private string Ad;

    public ScheduleSelectedItem(string ad)
    {
        Ad = ad;
    }
    public override string ToString()
    {
        return this.Ad;
    }
} 
```

此外，您需要为您的列表添加一个“添加”方法。当您使用它时，为什么不直接从列表类继承：

```
public class ScheduleSelectedItemsList : List<ScheduleSelectedItem>
{

} 
```

或者你可以创建一个类型别名：

```
using ScheduleSelectedItemsList = List<ScheduleSelectedItem>; 
```

无论哪种方式，您都可以像这样使用新代码：

```
class Program
{
    static void Main(string[] args)
    {
        var slist = new ScheduleSelectedItemsList() 
        { 
            new ScheduleSelectedItem("Yusuf") 
        };

        //write every item to the console, not just the first
        slist.All(item => Console.Write(item.ToString()) );
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-30T15:23:19.313

将此添加到您的`ScheduleSelectedItems`课程中：

```
 public override string ToString() {
        return Ad;
    } 
```

这告诉系统应该如何格式化这样的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T15:22:36.193

您需要覆盖 ScheduleSelectedItems 的 toString() 方法以返回“广告”。

# silverlight - 使用 WebClient() 从 Silverlight 访问 RSS 提要时出错

> ID：495868
> 
> 赞同：3
> 
> 时间：2009-01-30T15:19:33.300
> 
> 标签：silverlight, rss, webclient, cross-domain-policy

我从 John Papa 的书中下载了代码：http: [//silverlight-data.com/](http://silverlight-data.com/)

并成功运行第 7 章示例，该示例允许您按

一个按钮，它从 digg.com 读取 RSS，然后显示它。

所以，然后我替换了digg URL

[http://services.digg.com/stories/topic/microsoft/?appkey=http%3A%2F%2Fwww.silverlight-data.com&count=20]](http://services.digg.com/stories/topic/microsoft/?appkey=http%3A%2F%2Fwww.silverlight-data.com&count=20])

使用我的 RSS 提要：

[http://tanguay.info/web/rss](http://tanguay.info/web/rss)

但我在 DownloadStringCompleted 事件中收到此错误：

结果“e.Result”引发了“System.Reflection.TargetInvocationException”类型的异常错误 = {System.Security.SecurityException ---> System.Security.SecurityException: 安全错误 bei System.Net.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)在 System.Net.BrowserHttpWebRequest.<>c__DisplayClass5.

我尝试了其他 RSS 提要，例如： [http ://news.google.com/nwshp?hl=en&tab=wn&output=rss](http://news.google.com/nwshp?hl=en&tab=wn&output=rss)

我得到了同样的安全错误。

我可以做些什么来避免出现这些错误，以便我可以使用 Silverlight 的这些提要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T15:27:24.517

如果您尝试访问与运行 silverlight 应用程序的 url 不同的网站/url，则需要设置跨站点策略文件或访问允许访问的站点。

*   [Silverlight 跨域策略文件检查器](http://franksworld.com/blog/archive/2008/04/17/10907.aspx)
*   [Silverlight 跨域策略文件帮助程序](http://timheuer.com/blog/archive/2008/04/06/silverlight-cross-domain-policy-file-snippet-intellisense.aspx)

[编辑添加 Tim Heuer 的链接]

*   [如何在 Silverlight 中使用跨域策略文件](http://silverlight.net/learn/learnvideo.aspx?video=47174)
*   [使用联合数据](http://silverlight.net/learn/learnvideo.aspx?video=65672)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:38:11.780

另请参阅[http://silverlight.net/learn/learnvideo.aspx?video=65672](http://silverlight.net/learn/learnvideo.aspx?video=65672)和[http://silverlight.net/learn/learnvideo.aspx?video=47174](http://silverlight.net/learn/learnvideo.aspx?video=47174)

# python - Django Admin 应用程序还是我自己的？

> ID：495879
> 
> 赞同：21
> 
> 时间：2009-01-30T15:22:27.210
> 
> 标签：python, django, django-admin

我刚刚开始将 Django 用于个人项目。

使用内置管理应用程序与将我的管理功能集成到应用程序本身（通过检查 request.user.is_staff）有什么优缺点？

这是一个社区 wiki，因为它可以被视为一项民意调查。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-30T16:24:45.540

这真的取决于我猜的项目。虽然您可以在管理员中完成所有操作，但当您的应用程序变得更加复杂时，使用管理员也会变得更加复杂。如果您想让您的应用程序真正易于管理，您需要控制每一个小细节，而这对于管理应用程序来说是不可能的。

我想你应该看到它是这样的：

使用 django admin：节省编写时间，浪费时间使用它。
滚动您自己的管理员：浪费时间编写它，节省使用它的时间。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-01-31T02:13:45.927

出于多种原因，我会使用 Django 的管理应用程序。首先，编写一个管理应用程序可能会非常棘手，如果你想把它做好的话需要一些时间，而且它`django.contrib.admin`是免费的并且开箱即用。其次，它的设计非常好，使用起来非常好（即使对于非技术用户也是如此）。第三，它涵盖了很多常见的情况，在你真的确定你不能这样做之前，浪费时间重写它似乎是不明智的。第四，定制并不难。例如，添加 akismet 标记为垃圾邮件和标记为火腿按钮真的是小菜一碟。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-31T18:59:23.573

在不同程度上选择性地覆盖部分管理员非常容易。

你可以：

1.  逐个应用程序甚至逐个模型地覆盖应用程序上的管理模板。

2.  通过继承和子类化覆盖管理视图

3.  通过在 urls.py 中将您的网址放在您的前面来捕获管理员网址，并提供您自己的基于管理员外观的界面

...还有更多。

所以从管理员开始，然后在你需要的地方插入你需要的任何自定义功能。

有很多应用程序可以与管理员一起做一些聪明的事情。例如：

*   [django-reversion](http://code.google.com/p/django-reversion/)接管管理日志并将其扩展为完整的历史记录。
*   [Tusk CMS](http://www.ohloh.net/p/tusk)以一种简洁的方式将 django-mptt 应用程序与 JQuery 嵌套可排序小部件结合在一起。

还可以在 django-snippets 中搜索与管理相关的片段，[这个页面](http://code.djangoproject.com/wiki/NewformsHOWTO)有很多信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-31T02:19:30.003

我很遗憾地发现，虽然 django 管理应用程序一开始可以节省大量时间，但后来它变成了障碍，因为您的客户需要更多不易与默认管理界面集成的功能。您最终可能会使用两种管理工具：django admin（用于需要简单数据输入的应用程序），以及用于需要更丰富界面的其他应用程序的自定义滚动管理界面。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-01T02:46:36.983

考虑使用 Django 管理员，但为特定字段使用您自己的手工制作的小部件。您可以创建复杂的表单部分，并告诉管理员将您的代码用于任何特定字段或某个类型的所有字段的输入和显示。

Jannis 做了一些很酷的事情，他的工作向您展示了它是多么容易：http: [//jannisleidel.com/2008/11/wysiwym-editor-widget-django-admin-interface/](http://jannisleidel.com/2008/11/wysiwym-editor-widget-django-admin-interface/)

我正在处理的一个项目最近合并了一个时间选择器，该选择器使用下拉列表显示各个时间部分，（h，m，s）另一个字段将指示一周中的哪几天重复......它将使用 7 个复选框一周中的几天，并将其作为腌制的 dateutil.rruleset 存储在数据库中。然后，您只需向管理员提示将哪些小部件用于各个字段。

它涉及定义您的数据类、您自己的子类 forms.Widget 的小部件、您自己的子类 forms.Field 的 Field，以及一个 model.Field。这三个类中的每一个都很好、简单、干净，并且负责从数据库到模型、模型到小部件的转换，并通过这两个步骤返回。这真是一件美丽的事情。

您创建的字段将是您可以积累的一些最可重用、最复杂的知识产权……您不必从头开始编写自己的管理员。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-01T03:10:18.620

我建议在几乎所有类型的项目中启用管理站点。设置它的成本非常低，它为您提供了一种相当方便的机制来检查和修改您的站点。

如果您的网站主要是单向信息流，从网站管理员到访问者，那么管理网站可能就是您所需要的。

但是，如果您的站点在其用户之间具有更丰富的交互，您将需要编写 django 视图，以启用该交互，同时限制对用户真正可以做的事情的访问。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-10-01T18:52:27.583

我会使用 Django 管理功能，而不是自己编写。您可以通过为管理员添加自己的模板、您自己的小部件等来自定义 Django 管理员。我正在使用一个非常自定义的 Django 管理员进行项目。如果我们决定手写它，完成它需要 4 倍的时间。我只是看不到您想要自己编写的场景。

# java - 在命令行运行java程序，我做错了什么？

> ID：495893
> 
> 赞同：8
> 
> 时间：2009-01-30T15:25:14.007
> 
> 标签：java, classpath

**注意** 我正在运行 Windows，路径看起来就像是 linus，因为我手动输入了它，这就是我对路径的看法。

我正在尝试运行我为诊断与数据库的连接而构建的 java 类，它引用了 oracle jdbc 适配器。

当我在没有类路径的情况下运行它时：

```
%> java DBDiagnostics <connectionString> 
```

当它到达以下代码行时出现异常：

```
Class.forName("oracle.jdbc.pool.OracleDataSource").newInstance(); 
```

除了以下例外：

```
java.lang.ClassNotFoundException: oracle.jdbc.pool.OracleDataSource
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at DBDiagnostics.GetConnection(DBDiagnostics.java:43)
        at DBDiagnostics.runDiagnostic(DBDiagnostics.java:29)
        at DBDiagnostics.main(DBDiagnostics.java:18)
Creating connection.
java.sql.SQLException: No suitable driver found for lskd
        at java.sql.DriverManager.getConnection(DriverManager.java:602)
        at java.sql.DriverManager.getConnection(DriverManager.java:207)
        at DBDiagnostics.GetConnection(DBDiagnostics.java:55)
        at DBDiagnostics.runDiagnostic(DBDiagnostics.java:29)
        at DBDiagnostics.main(DBDiagnostics.java:18)
Veryfying connectivity to Database
Exception in thread "main" java.lang.NullPointerException
        at DBDiagnostics.verifyTable(DBDiagnostics.java:86)
        at DBDiagnostics.verifyTable(DBDiagnostics.java:76)
        at DBDiagnostics.verifyDatabseConnectivity(DBDiagnostics.java:68)
        at DBDiagnostics.runDiagnostic(DBDiagnostics.java:36)
        at DBDiagnostics.main(DBDiagnostics.java:18) 
```

我认为这是因为我需要将它包含在类路径中。

所以，我尝试将它添加到类路径中，如下所示：

```
%> java -classpath .:ojdbc6.jar DBDiagnostics <connectionString> 
```

虚拟机只是说它找不到类：

```
Exception in thread "main" java.lang.NoClassDefFoundError: DBDiagnostics
Caused by: java.lang.ClassNotFoundException: DBDiagnostics
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: DBDiagnostics.  Program will exit. 
```

我知道这是一个我应该知道答案的问题，但我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-30T15:31:45.473

用分号替换冒号：

```
java -classpath .;ojdbc6.jar DBDiagnostics <connectionString> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:28:41.253

是否有错字：

```
%> java -classpath .:ojdbc6.jar DBDiagnostics <connectionString> 
```

如果您键入以下内容，它可能会起作用：

```
%> java -classpath ./ojdbc6.jar DBDiagnostics <connectionString> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:28:44.530

DBDiagnostics.class 文件是否出现在您启动 Java 的目录中？如果没有，类加载器将找不到它。

DBDiagnostics 类有包吗？如果是这样，您必须引用完全解析的类名，并且包层次结构的根必须出现在您启动 Java 的目录中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T15:34:55.327

Mike Sickler 的答案看起来适合 Windows 平台。Windows 的路径分隔符是“;”，但 Unix 和 Linux 的路径分隔符是“:”，因此请确保始终使用正确的分隔符！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T15:35:51.300

远射，但这是 Unix 还是 Windows？如果在 Windows 上，类路径分隔符应该是分号：-

```
%> java -classpath .;ojdbc6.jar DBDiagnostics <connectionString> 
```

当然，如果您不指定任何路径，则需要在当前目录中拥有 ojdbc6.jar 文件。（也可能是依赖项......）

# asp.net-mvc - 操作和视图约定的命名（重新访问）

> ID：495894
> 
> 赞同：0
> 
> 时间：2009-01-30T15:25:17.483
> 
> 标签：asp.net-mvc, model-view-controller, conventions

我是 MVC 的新手，作为学习练习，我正在尝试将旧应用程序重写为 ASP.NET MVC 应用程序。我有点不清楚[动作命名约定](https://stackoverflow.com/questions/118474/action-naming-convention)问题仅部分涵盖的一些约定。

假设我有两个控制器：JobController 和 ClientController。两个控制器将具有相同的操作：列表、详细信息、新建、更新和删除。

这些动作的视图是否应该与动作同名？在这种情况下，JobController 的 List 操作应该有一个名为“List.aspx”的视图，而不是类似于“JobList.aspx”的视图。

我想到这个问题的原因是我不确定是否适合拥有多个具有相同名称的视图（例如“List.aspx”）。随着我继续添加控制器，这将变得越来越相关，因为我系统中的几乎每个业务对象都需要某种“List.aspx”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T16:05:02.770

他们不会真的有相同的名字。如果给我们所有的文件不同的名称很重要，为什么我们需要文件夹？您实际上有一个 Job/List.aspx 和一个 Client/List.aspx。

# amazon-ec2 - 关于 Amazon EC2 的几个问题

> ID：495903
> 
> 赞同：7
> 
> 时间：2009-01-30T15:27:06.700
> 
> 标签：amazon-ec2, multicore, cloud

亚马逊根据虚拟核心和 EC2 计算单元来衡量他们的 CPU 分配。EC2 计算单元定义为：

> 分配给特定实例的 CPU 量以这些 EC2 计算单元表示。我们使用多个基准和测试来管理 EC2 计算单元性能的一致性和可预测性。一个 EC2 计算单元可提供相当于 1.0-1.2 GHz 2007 Opteron 或 2007 Xeon 处理器的 CPU 容量。这也相当于我们原始文档中提到的 2006 年初 1.7 GHz Xeon 处理器。

我的问题是，假设我有一个“大型实例”，它带有“4 个 EC2 计算单元（2 个虚拟核心，每个核心有 2 个 EC2 计算单元）”。这是否意味着我在逻辑上基本上有 4 个核心？我想生成 4 个 CPU 绑定线程吗？还是计算单元只是功率的衡量标准，而我有 2 个内核？

另外，考虑到服务器的可扩展性，将单个机器的计算能力提高一倍并将数据库和服务器托管在同一个机器上会更好吗？还是我应该有 2 个单独的、较弱的盒子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-31T15:49:08.310

nicholaides 是正确的，小实例相当于一个核心，大的两个核心。测量的其余部分表示为计算单位，其定义如下：

> 一个 EC2 计算单元 (ECU) 提供相当于 1.0-1.2 GHz 2007 Opteron 或 2007 Xeon 处理器的 CPU 容量。

我在一个小型实例上运行[我的小型网站，Web 服务器和数据库都托管在一个虚拟机上。](http://www.sunsetlakesoftware.com/)性能给我留下了深刻的印象，但再次没有太多的负载。

如果您所关心的只是物超所值，我会尝试您的设置，两台服务器都运行在一个小型实例上（1 个核心，1 个 EC2 单元，每小时 0.10 美元），看看它是如何叠加的。下一步将是一个高 CPU 的中型实例（2 个内核，总共 5 个 EC2 单元，每小时 0.20 美元）。除非您真的在锤击您的服务器，否则我必须相信您将能够在该单个介质实例上运行它们。只需小实例两倍的价格，即可获得五倍的性能，这比运行两个小实例要好得多。

需要注意的一件事是，小型和高 CPU 中型实例是 32 位的，而所有其他实例（大型、超大型和高 CPU 超大型）都是 64 位。您不能在 64 位实例上运行 32 位 Amazon 系统映像，反之亦然。如果您使用的是库存 AMI，这不是问题，因为您通常可以找到它的两个版本，但对于自定义图像，它可能会让您做一些额外的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-03T01:20:37.127

“4 个 EC2 计算单元（2 个虚拟核心，每个有 2 个 EC2 计算单元）”仅仅意味着您获得 2 个虚拟 CPU，每个 CPU 的速度是基本小型实例的两倍。

总的来说，您获得了 Small 实例 4 倍的功率，但由于您只有 2 个内核，因此只启动两个线程是有意义的。

至于你的第二个问题，我认为布拉德·拉尔森回答得很好。Medium 实例具有很大的性价比。我们在同一台主机上运行我们的 db en web 服务器，令人惊讶的是，您可以在一台机器上运行多少个 db-heavy 站点。但是，由于它取决于您自己的应用程序，因此最好的办法是对其进行基准测试以查看它可以处理多少负载。

如果您必须扩大规模，我建议将这两个服务分成不同的服务器，而不是运行更大的服务器，因为它更容易针对特定服务优化每个主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T22:20:09.097

我记得，“计算单元”不是测量核心，而是简单的“功率”测量。

> 另外，考虑到服务器的可扩展性，将单个机器的计算能力提高一倍并将数据库和服务器托管在同一个机器上会更好吗？还是我应该有 2 个单独的、较弱的盒子？

这真的取决于应用程序。尝试一下并获取硬数据可能是您最好的选择。

# css - CSS - 颜色和位置的分离

> ID：495908
> 
> 赞同：20
> 
> 时间：2009-01-30T15:28:17.027
> 
> 标签：css, themes, color-scheme, dynamic-css

我只是想知道其他人在这方面做了什么：

您是否尝试将位置 CSS（布局）与颜色/风味 CSS（颜色、背景颜色、背景图像、字体大小和系列）分开？

使用两个样式表？在服务器端合并两个样式表？CSS的抽象层？或者你甚至不尝试？

我知道有时在同一个 Web 项目工作六个月后，我通常可以使用位置 CSS，但最终想要更改颜色/图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-30T15:37:31.250

我倾向于将所有 CSS 放在一起，而不将“颜色样式”与“位置样式”或“布局样式”分开。我发现当我经常尝试调试特定的“模块”时，将所有 CSS 规则应用于一个选择器会更容易，而不是分散在样式表上。

但是，我建议您在 thinkvitamin.com 上阅读[创建性感样式表。](http://blog.teamtreehouse.com/creating-sexy-stylesheets)我要做的一件事是每次都按特定顺序列出规则，这样我就知道在声明块中可以在哪里找到我想要的东西。

更多信息在 Jina Bolton 的[http://creatingsexystylesheets.com/](http://creatingsexystylesheets.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T15:49:13.113

你会发现在大型项目中，布局和颜色/风格 CSS（如果你很聪明的话）通常恰好是分开的。首先，如果您发现自己一遍又一遍地设置颜色/字体大小/字体系列样式规则，那么您就是在浪费时间。通常你应该在一个地方定义你的字体：body 标签。任何额外的字体都应该在它们各自的标签中定义...... h1、h2、p 等。在我看来，给这些标签提供位置指令不是一个好习惯；它们应该放置在负责布局的 div 中。颜色和字体大小也是如此。我认为该规则的唯一例外通常是背景材料，如果你有很多渐变和类似的东西，尤其如此。

真正归结为计划；一个精心策划的项目只需要很少的颜色/风味风格规则。所以要回答你的问题，是的，我通常有一个“Global.css”文件，它为 h1-h5、a、p 和任何其他包含文本的标签定义了我的所有字体和颜色。

编辑：

通常，由于我从事的项目规模相当大，并且有许多不同的模块，因此我们将样式以某种层次结构分开；这是有道理的，因为 CSS 的工作方式——只要你不改变放置在“base”（或者在我们的例子中，global.css）中的样式规则，样式就会戳。这很有帮助，因为当我们想要修改网站的字体时，我们只需更改“body”标签处的字体系列规则，它就会传播到整个网站。

所以，我们的样式表布局是这样的：

```
Global.css (Fonts/Text/Primary font colors)
--> genericBase.css (basic page structures such as columns that are used throughout the site)
--> nav.css (left-hand nav and/or top nav bar)
--> formLayout.css (labels, inputs, fieldsets, any other form stuff)
-----> forums.css (individual modules' styles that may deviate a bit from the usual structures, or simply things specific to those pages)
-----> blogs.css
-----> messages.css (etc etc etc) 
```

此处的箭头表示层次结构中文件的“顺序”。如果我们将所有样式放入一个文件中，箭头越长，这些文件包含的规则在样式表中的位置就越靠下。

所以你看，整个想法是从非常一般的风格开始，然后逐步发展到最具体的风格。请记住，加载 CSS 文件的顺序**对浏览器很重要**。你可以利用它来发挥你的优势。有趣的是，当我们获得特定模块的 css 文件时，我们几乎没有样式可写，因为大多数其他重要的东西实际上已经在这个过程中自行解决了。

所以就像我说的，计划非常重要。我发现这种方法可以更轻松地“调试”我的样式，而且我几乎不使用任何技巧，通常只用于愚蠢的 ie6 东西。

如果您需要更多信息，请与我们联系。我很高兴这对你有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-30T16:36:08.840

我曾经将它们分开，但更难维护。问题是许多“格式”属性会对布局产生影响，许多“布局”属性实际上可能是设计的。

一些例子：

虽然“边框”可能被认为是“格式”属性，但它们确实占用了一些空间，因此在设置或删除边框时需要调整布局。

“line-height” 与 font-size 相关联，可能被视为“格式”属性，但它对元素的大小以及它们如何垂直对齐有很大的影响。

布局有时需要边距和填充，有时仅用于格式化。

如果您仔细考虑一下，实际上很少有属性是纯格式或纯布局的。

将所有内容保存在同一个文件中并尝试通过将声明顺序、相关属性分组等来保持它的整洁通常更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T15:42:36.670

我将所有内容放在一个文件中，并使用[CSSEdit](http://macrabbit.com/cssedit/)中的文件夹功能使其井井有条。[网页设计公司 Viget 在这里](http://www.viget.com/inspire/organizing-your-stylesheet-using-css-edit/)有一篇关于这种技术的博文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-30T16:07:58.287

我最近分离了我的布局和颜色样式，现在我有几个 css 文件，我导入如下：

```
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
<link rel="stylesheet" type="text/css" href="style-default.css" title="Default Style" media="screen" />
<link rel="alternate stylesheet" type="text/css" href="style-bw.css" title="Black and White" media="screen" /> 
```

所有布局都在 style.css 中，然后颜色在 style-default.css 中。这样我就有了标准样式，但用户也可以选择更改颜色。这不仅为用户提供了选项，而且可以在不触及布局的情况下轻松更改颜色（我倾向于更频繁地更改颜色）。

在 Firefox 中，我的颜色选项显示在“页面样式”下的视图菜单中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-30T16:55:52.107

我陷入了将我的 CSS 分成以下内容的模式：

*   布局（页眉、页脚、徽标 - 通用 chrome）
*   排版（字体、大小、可重复使用的内联字体样式）
*   小部件

后一类通常由我在项目之间重复使用的 CSS 代码组成，并且通常将其自身拆分为：

*   表单（左对齐、右对齐、必填字段的样式等）
*   网格（2-col、4-col 等 - 大约 20 种左右）
*   黑客（IE/其他 CSS 黑客）
*   其他东西（AJAX 小部件、工具栏、评论框等 - 任何可重复使用的东西）

对于颜色，我只保留一个备忘单文本文件。将它们保存在单独的样式表中可能只有在您非常非常自律的情况下才有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-30T17:01:19.227

我已经开始使用类来专门处理颜色。

.element{margin, padding, layout stuff}

.ourcolor{#一些颜色}

它虽然延长了类属性：< div class="element ourcolor">

但是，我可以重复使用颜色：< span class="ourcolor" >Some text

到目前为止，我更喜欢它，因为调整颜色要容易得多。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-30T18:23:58.887

正如 Mark W 所指出的，[Creating Sexy Stylesheets](http://thinkvitamin.com/features/design/creating-sexy-stylesheets/)是一本很棒的读物。他们提倡的一件事是通过框架分离样式问题：

> *   screen.css - 屏幕 CSS 文件可以包含您想要在屏幕上使用的所有样式，和/或可以导入其他样式，例如：
>     *   reset.css - 重置 CSS 文件可用于“重置”所有默认浏览器样式，这有助于更轻松地实现跨浏览器兼容性。
>     *   Typography.css - 排版 CSS 文件可以定义您的字体、大小、前导、字距，甚至可能是颜色。
>     *   grid.css - 网格 CSS 文件可以具有您的布局结构（并通过定义基本的页眉、页脚和列设置来充当您网站的线框）。
> *   print.css - 打印 CSS 文件将包含您希望在打印页面时使用的样式。

如果你遵循这个模式，颜色会在你的typography.css 中，而布局会在你的grid.css 中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-30T15:38:56.147

我将所有内容保存在一个文件中，并且只为替代样式（例如打印）提供不同的文件。

在该文件中，我将整体布局（列、页眉和页脚）与实际内容（段落、标题、列表...）分开

我习惯于思考面向对象，所以我将不同对象（菜单、博客文章）的样式组合在一起。从这个角度来看，颜色和位置都属于同一个对象，因此保持在一起。

我希望能够在样式表中定义颜色一次，为它们分配一个声明性名称（例如“HeadingColour”），然后在将颜色分配给选择器时使用该名称......

# c# - .net 的替代 Oracle 驱动程序

> ID：495909
> 
> 赞同：7
> 
> 时间：2009-01-30T15:28:26.697
> 
> 标签：c#, oracle, database-connection

我必须在 C# 中开发一个从 Oracle DB 检索一些数据的工具。由于我们的 IT 支持在安装 Oracle 客户端时遇到了一些问题，我希望能够在不安装客户端的情况下连接到数据库。这个想法是与应用程序一起安装（并可能注册）一个附加库。

存在哪些 Oracle 客户端的替代方案，它们的优缺点是什么？

这是针对小型应用程序（1 个表单，2 或 3 个查询，结果显示在 DataGrid 中，可能不超过 10-20 个数据集），但我也对可伸缩性问题感兴趣，因为我们也可能远离具有更大未来项目的 Oracle 客户。

当然，免费软件解决方案会很好，但我们不仅限于此。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-03T18:57:21.580

无需任何第三方软件即可完成您的任务：

1.  在您的开发框中安装[Oracle Data Access Components 11g](http://www.oracle.com/technology/software/tech/windows/odpnet/utilsoft.html)。ODAC 11g 向后兼容 9i 和 10g
2.  在 .NET 项目 (Oracle.DataAccess.dll) 中添加对 ODAC 库的引用。
3.  允许您的应用程序在不使用 TNSNAMES.ORA 的情况下进行连接。为此，您必须在连接字符串中包含连接描述符：

    "user id=scott;password=tiger;data source=" + "(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)" + "(HOST=sales-server)(PORT=1521))(CONNECT_DATA="+ "( SERVICE_NAME=sales.us.acme.com)))"

由于您在连接字符串中包含连接描述符，因此目标计算机中不需要瘦客户端。

愉快的部署。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-30T15:42:09.667

[Oracle ODP.Net 驱动程序](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)有几种不同的风格。您要使用哪个版本？

听起来您想要带有 Xcopy 部署的 Oracle 11g ODAC 11.1.0.6.21，它允许您通过复制几个 DLL 并注册它们来部署 Oracle Instant Client 和 ODP.Net 驱动程序。这不需要完整的 Oracle 客户端安装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T15:50:52.587

Oracle 目前有一个完全托管的 ODP.NET 版本，允许开发人员连接到 Oracle 数据库，同时只引用一个 DLL。[这里](http://www.oracle.com/technetwork/topics/dotnet/whatsnew/index.html)有更多信息。

当前版本可以在[这里](http://www.oracle.com/technetwork/database/windows/downloads/index.html)找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T15:33:16.250

企业库客户端 System.Data.OracleClient 是 Oracle 的 ODP.NET 提供程序的可行替代方案。不过，您应该知道一些警告，使用 Microsoft 客户端将使处理任何类型的大型对象变得极其困难，无论它们是 XML 字符串、CLOB、LOB 还是 BLOB。此外，不支持 Oracle XmlType 列，必须将其转换为 CLOB 才能返回到 OracleClient。

# c# - 如何将值写入 Windows Mobile 5 设备上的注册表？

> ID：495910
> 
> 赞同：1
> 
> 时间：2009-01-30T15:28:34.920
> 
> 标签：c#, windows, string, windows-mobile, ipc

我有一个字符串值，我想将它作为 Dword 写入注册表以通过另一个程序读取。如何使用 c# .net 创建新的键/字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T15:34:40.913

您需要使用 Microsoft.Win32.Registry 添加到移动设备注册表。所有方法都有移动支持：http: [//msdn.microsoft.com/en-us/library/microsoft.win32.registry_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry_members.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:34:59.663

使用 Microsoft.Win32.Registry 类，[就像在桌面上一样](http://www.csharphelp.com/archives2/archive430.html)。有一个警告：如果您使用的是 CF 1.0，那么这些类不存在。在这种情况下，我建议从[旧的 SDF 1.4 源](http://www.opennetcf.com/FreeSoftware/SDF14/tabid/91/Default.aspx)中提取实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T15:37:52.590

你可以使用这个类：

[Microsoft.Win32.Registry](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)

它在 .NET Compact Framework 3.5 和 2.0 中受支持

以下链接可能对您有所帮助：

[如何：在注册表中创建一个键 (Visual C#)](http://msdn.microsoft.com/en-us/library/h5e7chcf.aspx)

[http://www.codeproject.com/KB/mobile/PocketRegistry.aspx](http://www.codeproject.com/KB/mobile/PocketRegistry.aspx)

# c++ - 在 C++ 中实现心跳以检查套接字连接的最佳方法是什么？

> ID：495922
> 
> 赞同：10
> 
> 时间：2009-01-30T15:32:26.907
> 
> 标签：c++, sockets, heartbeat

嘿，伙计。我刚刚使用 sys/socket 用 C++ 编写了一个客户端和服务器。我需要处理客户端仍处于活动状态但服务器已关闭的情况。一种建议的方法是使用心跳来定期断言连接性。如果没有尝试在 Y 时间段内每 X 秒重新连接一次，然后超时。

这种“心跳”是检查连接的最佳方式吗？

我正在使用的套接字可能有关于它的信息，有没有办法检查是否存在连接而不会弄乱缓冲区？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-30T15:39:42.400

如果您在 IP 网络上使用 TCP 套接字，则可以使用 TCP 协议的 keepalive 功能，该功能将定期检查套接字以确保另一端仍然存在。（这也有一个好处，就是让你的套接字的转发记录在你的客户端和你的服务器之间的任何 NAT 路由器中都有效。）

这是[TCP keepalive 概述](http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html)，概述了您可能想要使用 TCP keepalive 的一些原因；[这个 Linux-specific HOWTO](http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/programming.html)描述了如何配置你的套接字以在运行时使用 TCP keepalive。

看起来您可以通过`SIO_KEEPALIVE_VALS`使用[WSAIoctl()](http://msdn.microsoft.com/en-us/library/ms741621(VS.85).aspx)函数进行设置来在 Windows 套接字中启用 TCP keepalive。

如果您在 IP 上使用 UDP 套接字，则需要在协议中构建自己的心跳。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T18:24:03.867

是的，这种心跳是最好的方式。您必须将其构建到服务器和客户端用于通信的协议中。

最简单的解决方案是让客户端定期发送数据，如果服务器在特定时间段内没有收到来自客户端的任何数据，则服务器关闭连接。这非常适用于客户端发送查询和服务器发送响应的查询/响应协议。

例如，您可以使用以下方案：

1.  服务器响应每个查询。如果服务器在两分钟内没有收到查询，它将关闭连接。

2.  客户端发送查询并在每次查询后保持连接打开。

3.  如果客户端一分钟内没有发送查询，它会发送“你在吗”查询。服务器响应“是的，我是”。这将重置服务器的两分钟计时器并向客户端确认连接仍然可用。

如果过去一分钟不需要发送查询，让客户端关闭连接可能更简单。由于所有操作都是由客户端发起的，所以如果它需要执行新的操作，它总是可以打开一个新的连接。这将其简化为：

1.  如果服务器在两分钟内没有收到查询，则关闭连接。

2.  如果客户端在一分钟内不需要发送查询，则关闭连接。

但是，这并不能确保客户端始终存在服务器并准备好接受查询。如果您需要此功能，则必须在您的协议中实现“你在吗”“是的，我在”查询/响应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-30T15:42:39.133

如果对方已经离开（即进程死亡、机器宕机等），尝试从套接字接收数据应该会导致错误。但是，如果另一侧只是挂起，则套接字将保持打开状态。在这种情况下，心跳很有用。确保您使用的任何协议（在 TCP 之上）都支持某种“无所事事”请求或数据包 - 每一方都可以使用它来跟踪他们最后一次从另一方收到东西的时间，然后可以如果数据包之间的时间过长，请关闭连接。

请注意，这是假设您使用的是 TCP/IP。如果您使用的是 UDP，那就是另一回事了，因为它是无连接的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T15:52:07.790

好的，我不知道您的程序做了什么或什么，所以也许这不可行，但我建议您避免尝试始终保持套接字打开。它应该只在您使用时打开，在您不使用时应关闭。

如果您在等待用户输入的读取和写入之间，请关闭套接字。设计您的客户端/服务器协议（假设您是手动执行此操作而不使用任何标准协议，如 http 和/或 SOAP）来处理此问题。

如果连接断开，套接字将出错；编写程序，以便在写入套接字期间发生此类错误时不会丢失任何信息，并且在从套接字读取期间发生错误时不会获得任何信息。事务性和原子性应该被纳入您的客户端/服务器协议（同样，假设您自己设计它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T15:42:35.483

也许这会对你有所帮助，[TCP Keepalive HOWTO](http://tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/) 或这个[SO_SOCKET](http://www.unixguide.net/network/socketfaq/4.7.shtml)

# asp.net - 在 Web 场中的 IIS 服务器之间同步外部配置

> ID：495953
> 
> 赞同：1
> 
> 时间：2009-01-30T15:40:58.887
> 
> 标签：asp.net, iis, deployment, configuration, web-farm

我一直在努力寻找确保某些 XML 配置文件在 Web Farm 中的多个服务器之间保持同步的最佳方法。我不一定关心 Web.Config，就像我关心应用程序中存在的其他一些配置文件一样。

例如，我们将缓存策略存储在一个外部 XML 文件中，它有自己的模式，并且很快就会有自己的工具来维护这些值。应用更改后，它们应该在整个场中迁移。

到目前为止我考虑过的一些场景：

*   RoboCopy、复制或等效。这要求只在场的特定节点上完成工作。（推送到应用程序。）
*   配置服务器。所有外部配置及其工具都存储在 IIS 的物理实例上。应用程序将在应用程序启动时检索这些配置文件并定期轮询更改。（应用程序投票。）
*   团队建设。我们可以在内部托管这些工具并设置一个后期构建流程来部署文件。（应用程序投票。）
*   数据库存储。应用程序可以读取和轮询数据库以进行配置。（应用程序投票。）

所有这些场景都有其优点和缺点。我不确定最好的解决方案是什么，尽管我认为让应用程序轮询更改可能是最干净的方法。不过，问题是您认为哪种方式最好完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T16:14:52.953

我有运行 Windows Server 2008 的 Web 集群。为了保持一切同步，我使用了每个成员上的 DFS 共享。对任何成员所做的任何更改都会复制到其他成员。我还使用 IIS“共享配置”功能将我的元数据库存储在此 DFS 共享中。这样一来，所有 IIS 设置也会被复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T15:50:48.867

在我参与的一个项目中，我们使用了一个名为[ServerSync](http://www.syncserverfiles.com/)的产品来复制场中的文件。它工作得很好，而且速度很快。

# asp.net - 简明的 ASP.NET 验证摘要

> ID：495955
> 
> 赞同：13
> 
> 时间：2009-01-30T15:41:52.927
> 
> 标签：asp.net, validation

有没有办法让 ASP.NET 验证摘要控件在出现验证错误时只显示 HeaderText？

基本上，我想要的只是一条简单的消息，例如“请填写所有标记为 * 的字段”，以显示在提交按钮旁边。因为我在验证器上使用“*”作为错误消息，所以我不希望这些出现在摘要中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-30T16:06:13.547

将每个验证器**Text**设置为“*”，将**ErrorMessage**设置为空字符串。

```
<form id="form2" runat="server">
Name:<br />
<asp:TextBox ID="NameTextBox" runat="server" />
<asp:RequiredFieldValidator 
    ID="NameTextBoxRequiredValidator" 
    ControlToValidate="NameTextBox"
    ErrorMessage="" 
    Text="*" 
    runat="server" />
<br />
City:<br />
<asp:TextBox ID="CityTextBox" runat="server" />
<asp:RequiredFieldValidator 
    ID="CityTextBoxRequiredValidator" 
    ControlToValidate="CityTextBox"
    ErrorMessage="" 
    Text="*" 
    runat="server" />
<br />
<asp:Button ID="SubmitButton" Text="Submit" runat="server" />
<hr />
<asp:ValidationSummary 
    ID="valSum" 
    DisplayMode="SingleParagraph" 
    HeaderText="Please complete all fields marked *"
    runat="server" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T16:05:16.000

如果您只使用验证器控件的 Text 属性并将 ErrorMessage 属性留空，那么应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T15:56:00.870

您可以使用 CustomValidator 并设置 ClientValidationFunction 属性来执行 JavaScript 函数，该函数将填充标签以显示您的消息。

ASPX：

```
 <asp:CustomValidator ID="validator" runat="server" ErrorMessage="*" ClientValidationFunction="Validate" ControlToValidate="controltovalidate" ValidateEmptyText="true"></asp:CustomValidator> 
```

JavaScript：

```
function Validate(sender,args)
{
    args.IsValid = true;
    if(args.Value == "")
    {
        document.getElementById('YourCustomMessageLabel').innerText = "Please complete all fields marked *"
        args.IsValid = false;    
    }
} 
```

# .net - 通用列表（类型）和集合的优点/缺点是什么

> ID：495963
> 
> 赞同：0
> 
> 时间：2009-01-30T15:43:35.997
> 
> 标签：.net

正如问题所说，我一直认为强类型列表比使用集合更好。然而，在今天与一位同事讨论后，我想要一个比“因为我喜欢他们”更好的答案。谁能解释一下 a) 每种方法的主要区别和优缺点。

编辑：类似于[.NET 2.0+ 中的 List(Of T) 集合有什么优势](https://stackoverflow.com/questions/495591/what-advantage-do-you-get-with-a-collection-over-listof-t-in-net-2-0/495626#495626)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-30T15:49:13.817

基于泛型的强类型集合（包括列表）允许您进行编程，而无需检查从列表中检索到的对象的类型。它使代码更简洁，因为您不必强制转换对象来使用它，并且您不必担心枚举器会由于包含错误类型的对象的集合而引发强制转换异常。当然，您也可以通过单元测试获得很多这些，但是使用泛型可以让编译器在编译时进行检查，而不是您必须在运行时进行检查。这效率更高。您仍然可以通过不恰当地强制转换来绕过编译时错误来搞砸事情，但是如果您在没有适当检查的情况下这样做，您将得到应得的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T17:42:17.707

我会在 tvanfosson 的回复中补充一点，即当您存储值类型时，通用集合的效率会大大提高。例如，与放入整数的 ArrayList 相比，List 将占用更少的内存并提供更快的访问。

如果您绝对必须在集合中存储多种类型的对象，您始终可以使用 List 并像使用 ArrayList 一样进行转换。

除了向后兼容之外，我想不出任何理由来使用旧式（即非通用）集合来支持通用集合。

# svn - subversion server vs. 通过乌龟访问网络仓库

> ID：495968
> 
> 赞同：6
> 
> 时间：2009-01-30T15:45:45.133
> 
> 标签：svn, networking, sharing

我的团队目前有 5 名开发人员，我们都通过我们网络上的计算机 X 上的共享驱动器访问存储库。由于我们都可以访问计算机 X，并且我们可以管理谁可以访问计算机 X，谁不能访问计算机 X，因此我们可以管理谁可以访问我们的存储库。

我的问题是：如果我设置了一个颠覆服务器，我是否获得了任何我还没有的功能？存储库已经内置了用户/密码控制。

1.  我是否能够跟踪当前已签出文件的人员？
2.  我是否能够为多个人提供锁定（只有
    用户 a 和 b 锁定了文件，其他用户不能签出该文件）？
3.  我有什么安全感吗？

似乎我没有，因为我已经有了没有服务器的用户/组/密码控制。

请告诉我。我正在决定创建服务器是否有任何优势。

谢谢，jbu

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-30T16:05:29.277

是的，您会收获很多：您降低了丢失所有数据的风险！

请参阅有关[访问网络共享上的存储库](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-repository.html#tsvn-repository-local-share)的文档（和警告） 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T21:14:52.177

当您通过 file:/// URL 访问存储库时，subversion 库将假定存储库在本地磁盘上可用，并且不会尝试（甚至无法）最小化网络 I/O。因此，通过 svn:/// URL 访问存储库对于某些需要读取大量数据以确定需要发送到客户端的部分的操作**要快得多**[`svn switch`](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.switchwc.html)，命令就是这种情况。

我不敢对 http:// 访问说同样的话。http 协议在 svn 1.5 中比较繁琐且效率低下。有[计划](http://blog.red-bean.com/sussman/?p=139)改进 svn 1.7

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:54:36.223

通常，您不会在 SVN 中“签出”文件。也就是说，您在处理它们时不会锁定它们。

但是，您获得了几件事（这些只是我的想法）：

*   提交历史记录（每个文件和整个存储库）
*   分支/合并选项
*   标记版本的能力（通常是正式版本）
*   将更改回滚到某个版本的能力（例如，如果最近引入了严重的错误）
*   还有更多

但是请注意，这些好处中的大部分或全部并不是 subversion 所独有的，而是可以从大多数现代版本控制系统中获得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T15:55:10.043

是的，你可以做几件额外的事情：

*   其他身份验证机制（基于 HTTP/S 的基本身份验证、ssh 共享密钥身份验证）
*   使用 Apache+mod_dav_svn，您可以逐个路径配置更细粒度的访问控制

编辑：不确定您当前是通过文件共享使用颠覆，还是仅使用普通文件共享。（SVN 也可以使用 file:/// URI）。

# mysql - 实现 MySQL 哈希表的最佳方法？

> ID：495970
> 
> 赞同：3
> 
> 时间：2009-01-30T15:46:43.090
> 
> 标签：mysql, caching, hash, memcached

**背景**

我目前正在开发一个在线社区，我想将一些临时信息存储在哈希表中。目前，此信息存储在 memcached 中，但是，如果 memcached 服务需要重新启动或失败，我想求助于磁盘上的哈希/缓存。

**问题**

在 MySql 中实现磁盘上的 Hash 或 Cache 表的最有效方法是什么？有没有什么技术可以用来摆脱一个包含以下字段的简单表格：

*   哈希值
*   储值
*   到期日

任何帮助或见解将不胜感激。

**明晰**

*   我不会存储任何复杂的数据对象，只是简单的文本字符串。
*   我目前的计划是实现一个 InnoDB 表。
*   任何指向类似主题的文章的链接都将是一个奖励。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T20:19:46.703

您现在已经布置了大部分解决方案：一张表，三列（可能第四列是主键的无意义整数 ID），以及哈希值列上的索引。当您有可测试/可修复的问题需要克服时，请稍后再询问。

“......过早的优化是万恶之源” - [Knuth](http://en.wikipedia.org/wiki/Optimization_(computer_science)#cite_note-0)

# .net - 让程序集显示在添加引用的 .NET 选项卡中

> ID：495973
> 
> 赞同：5
> 
> 时间：2009-01-30T15:47:44.570
> 
> 标签：.net, reference, add-references-dialog

使用 Visual Studio 并添加对项目的引用时，您会看到一个带有多个选项卡的窗口；.NET、项目、最近和浏览。获得 .NET 列表下列出的项目需要什么？

我们认为GAC 中有一些项目可以将它们列在此处，但事实并非如此。我们正在寻找能够为我们的应用程序中的程序集在一个非常大的开发团队中获得更一致的参考路径的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-30T16:03:32.930

您需要创建一个注册表项来告诉 Visual Studio 显示程序集的文件夹。这篇文章解释了如何做到这一点：

[http://www.platinumbay.com/blogs/dotneticated/archive/2008/09/02/add-reference-and-the-gac.aspx](http://www.platinumbay.com/blogs/dotneticated/archive/2008/09/02/add-reference-and-the-gac.aspx)

我们不再使用 GAC，因为它是一个繁琐的流程，并没有给我们的团队成员带来好处。我们使用我们自己的程序集的项目引用来解决一致的路径问题。第三方程序集位于解决方案中的一个文件夹中，我们从那里引用项目中的程序集。这样，每个人都可以毫无后顾之忧地让他们走在同一条路上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-30T16:03:58.593

您需要添加一个注册表项，例如：

[HKEY_CURRENT_USER\SOFTWARE\Microsoft.NETFramework\AssemblyFolders\MyAssemblies]@="C:\MyAssemblies"

您可以在以下位置查看更多信息：http: [//support.microsoft.com/kb/306149](http://support.microsoft.com/kb/306149)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T16:06:54.000

这可能是一个 VFAQ，即使我在这里很新。这里的基本概念是根据注册表中的设置加载程序集列表。

您需要做的就是添加一个注册表子项，该子项指向以下项下的程序集位置：

```
HKEY_CURRENT_USER\SOFTWARE\Microsoft\.NETFramework\AssemblyFolders\ 
```

如果 MyAssemblyFolder 是要添加的程序集所在的文件夹的名称，请创建一个具有任何名称的子项，并在其中添加一个带有 MyAssemblyFolder 完整路径的字符串键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-29T09:44:03.677

我创建了一个完全免费的工具，它将帮助您实现目标。[Muse VSReferences](http://visualstudiogallery.msdn.microsoft.com/en-us/36a6eb45-a7b1-47c3-9e85-09f0aef6e879)将允许您从“**添加 GAC 引用**”菜单项添加对项目的全局程序集缓存引用。

问候，

Muse VSExtensions

# grails - 在 Bootstrap.groovy 中设置 Grails 域 id

> ID：495979
> 
> 赞同：3
> 
> 时间：2009-01-30T15:49:54.220
> 
> 标签：grails, grails-orm

是否可以在 Grails 的 Bootstrap.groovy（或任何地方）中显式设置域对象的 id？

我尝试了以下方法：

```
new Foo(id: 1234, name: "My Foo").save() 
```

和：

```
def foo = new Foo()
foo.id = 1234
foo.name = "My Foo"
foo.save() 
```

但是在这两种情况下，当我在运行时打印出结果`Foo.list()`时，我看到我的对象的 id 为 1，或者序列中的下一个 id 是什么。

**编辑：** 这是在 Grails 1.0.3 中，当我使用内置 HSQL 数据库在“开发”中运行我的应用程序时。

**编辑：** chanwit 在下面提供了[一个很好的解决方案](https://stackoverflow.com/questions/495979/setting-grails-domain-id-in-bootstrap-groovy/498145#498145)。但是，我实际上是在寻找一种在不更改域的 id 生成方法的情况下设置 id 的方法。这主要用于测试：我希望能够在我的测试引导程序中将某些东西设置为已知的 id 值`setUp()`，但仍然能够在生产中使用 auto_increment 或序列。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-31T03:17:19.310

是的，使用手动 GORM 映射：

```
class Foo {
  String name
  static mapping = {
    id generator:'assigned'
  }
} 
```

并且您的第二个片段（不是第一个片段）将完成这项工作（通过构造函数传递它时不会分配 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T17:07:07.990

我最终使用的解决方法是不尝试通过对象的 ID 检索对象。因此，对于问题中给出的示例，我更改了域对象：

```
class Foo {
  short code /* new field */
  String name

  static constraints = {
    code(unique: true)
    name()
  }
} 
```

然后我使用 an`enum`来保存代码的所有可能值（它们是静态的），并通过使用适当的枚举值`Foo`执行 a 来检索对象（而不是像我之前想要的那样使用 id）。`Foo.findByCode()``Foo.get()`

这不是最优雅的解决方案，但它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-25T18:26:11.140

作为替代方案，假设您正在***从现有应用程序导入数据或迁移数据***，出于测试目的，您可以在 Bootstrap 文件中使用本地地图。把它想象成一个有好处的 import.sql ;-)

使用这种方法：

1.  你不需要仅仅为了测试而改变你的域约束，
2.  您将从现有数据中获得经过测试的迁移路径，并且
3.  您将有一个很好的数据切片（或完整切片）用于未来的集成测试

干杯!

```
def init = { servletContext ->

    addFoos()
    addBars()

}

def foosByImportId = [:]
private addFoos(){
    def pattern = ~/.*\{FooID=(.*), FooCode=(.*), FooName=(.*)}/
    new File("import/Foos.txt").eachLine {
        def matcher = pattern.matcher(it)
        if (!matcher.matches()){
            return;
        }

        String fooId = StringUtils.trimToNull(matcher.group(1))
        String fooCode = StringUtils.trimToNull(matcher.group(2))
        String fooName = StringUtils.trimToNull(matcher.group(3))

        def foo = Foo.findByFooName(fooName) ?: new Foo(fooCode:fooCode,fooName:fooName).save(faileOnError:true)
        foosByImportId.putAt(Long.valueOf(fooId), foo) // ids could differ
    }
}

private addBars(){
    ...
    String fooId = StringUtils.trimToNull(matcher.group(5))
    def foo = foosByImportId[Long.valueOf(fooId)]
    ...
} 
```

# django - Web 应用程序监控最佳实践

> ID：495985
> 
> 赞同：77
> 
> 时间：2009-01-30T15:52:03.653
> 
> 标签：django, deployment, web-applications, monitoring

我们正在完成我们的 Web 应用程序并计划部署。部署到生产的非常重要的方面是监控系统的健康状况。拥有一个由开发人员/支持组成的小型团队对于我们来说非常重要的是，**尽早**收到潜在问题的通知并在它们对用户产生影响之前解决它们。

使用 Nagios 接缝是一个不错的选择，但想获得更多关于一般 Web 应用程序特别是 Django 应用程序的最佳监控工具/实践的意见？除了明显的 CPU、内存、磁盘空间、数据库连接之外，还欢迎就应该监控的内容提出建议。

我们的网络应用程序是用 Django 编写的，我们在 Apache + Fast CGI 和 PostgreSQL 数据库下的 Linux (Ubuntu) 上运行。

**编辑** 我们在 Linode 下有一个完全虚拟化的环境。

**编辑** 我们正在使用 django-logging，所以我们有一种方法可以分离信息、错误、关键问题等。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-30T16:39:10.067

Nagios 很好，定期运行系统测试（Selenium）也很好。

*编辑：[Hyperic](http://www.springsource.com/landing/hyperic-open-source-download)和[Groundwork](http://www.gwos.com/downloads/overview/)看起来也很有趣。*

可能有一个测试套件系统可以为您保持对所有内容的压力测试。我不记得我头顶上的名字了，也许有人可以在下面提到一个。

我喜欢做的其他事情：

基础设施的最佳座右铭始终是修复、检测、修复。抓住它，找到它的根源，如果可以的话，治愈/预防它。

由于一个系统存在于多个层次，我们应该在多个层次上进行测试：

编辑：通过电子邮件将所有错误或警告直接发布给您的案例经理。这样您就可以在一个地方跟踪事件。

1)**连接**：从服务器和外部监控您的互联网连接。在某处记录这个

2)**服务器**：监控所有需要确保它们正在运行而不是固定服务器的进程。使用 HP 服务器或具有硬件故障通知功能的等效设备，它可以从 bios 级别执行。如果是，请通知并记录。

3)**软件**：确定始终需要运行的关键软件。设置性能级别（如果有），然后对其进行监控。Nagios 应该能够帮助解决这个问题。在 Windows 上可能会更多。发生异常时，您应该能够从中运行脚本以自动重新启动进程。我的梦想系统允许我通过 SMS 与服务器交互，如果服务器将其视为我必须允许的异常，或者除非我通过短信取消，否则它将自动发生。一天..

4）**远程电源**：确保远程电源重置功能在您手中。如果您曾经使用 Windows 进行任何操作，您可能需要安排每周重新启动。

5）**业务逻辑测试**：定期运行脚本测试系统的工作流程。Selenium 可能可以实现其中的一些，但我也喜欢记录结果以说明此时运行并且这些文件有错误。如果可能，请让系统通过脚本自行监控。

6)**备份**：做一个你可以设置和忘记的备份。如果您可以将东西放入虚拟机中，那将是理想的选择，因为您可以在任何地方扩展、移动或部署基础架构的任何部分。我曾经有过这样的例子，我将一个死机的服务器移到我的笔记本电脑上，让它在我修复问题的同时在 vmware 中运行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-30T16:55:13.637

监视与您的 Web 服务器和数据库的连接数是另一件值得跟踪的好事情。很有可能，如果有人从屋顶射出，那么某些东西正在缺乏资源，并且该站点即将倒塌。

还要确保您定期请求一个对系统进行合理端到端测试的 URL。如果您的站点支持搜索，那么让 nagios 执行搜索 - 这应该确保搜索索引、Web 服务器和数据库服务器是健康的。

此外，请确保您的应用程序在您的用户看到错误或出现未处理的异常时向您发送电子邮件。这样您就知道应用程序在该领域是如何失败的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-01T20:44:56.637

如果我必须选择一种类型的测试，那就是测试系统的最终用户功能。要考虑的重要一点是用户。虽然测试数据库可用性、服务器正常运行时间等都很重要，但通过远程 UI 测试系统测试通过系统的工作流涵盖了所有这些基础。如果您知道系统的关键部分可供最终用户使用，那么您就知道您的系统运行良好。

1.  **确定系统中的重要工作流程。** 例如，如果您编写了一个电子商务网站，您可能会确定“搜索产品，将产品放入购物车，然后购买产品”的工作流程。
2.  **优先考虑工作流程，并首先构建更高优先级的测试。** 推出生产后，您始终可以添加额外的测试。
3.  **使用可用的 UI 测试框架之一构建 UI 测试。**有许多可以以自动化方式运行的免费和商业 UI 测试框架。首先构建一组核心测试，以解决关键工作流程。
4.  **设置至少一个远程位置来运行测试。**您想测试系统的各个方面，这意味着远程测试它。互联网连接是否正常？网络服务器是否正在运行？与数据库服务器的连接是否正常？等等，等等。如果您进行远程测试，您可以确保您的系统对外界可用，这意味着它很可能是端到端工作的。您也可以在内部运行这些测试，但我认为在外部运行它们至关重要。
5.  **确保您的解决方案包括报告和通知。**如果您的关键工作流程测试之一失败，您希望有人知道它以尽快解决问题。如果非关键任务失败，也许您只需要报告以便可以带外解决问题。

这种最终用户测试不应该消除对数据中心系统的监控，但我想重申，最终用户测试是您可以对 Web 应用程序进行的最重要的测试类型。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-01T21:17:01.423

啊，监控。我多么爱你和你凌晨 3 点的振动。

本质上，您需要一种方法来检查应用程序的内部状态，无论是在特定时刻还是在一段时间内（后者对于在问题发生之前检测到问题非常重要）。另一种思考方式是美化单元测试。

我们有自己的（非常好的）监控系统，所以我不能评论 Nagios 或其他应用程序。不过，我们的用例与您的类似（apache 上的 cgi 应用程序）。

1.  添加一个 logging.monitor() 类型的方法，它将信息记录到磁盘。这至少应该支持记录简单的数字和数字的字典（key=>value 关联非常方便）。
2.  有一个过程来抓取监控日志并将它们存储到数据库中。
3.  有一个流程来获取数据库信息，根据规则检查它们并发出警报。请记住，有些东西可能是片状的。仅仅因为你得到一个 404*并不*意味着它的应用程序失败了。
4.  有一种方法可以使警报静音（对于维护或阅读您的电子邮件非常有用）。

这都是相当高的水平。重要的是您拥有应用程序状态随时间变化的历史记录。从此，您可以创建规则（也许只是您放入某个配置的原始 sql 查询），例如“如果每秒查询数翻倍，则发送 SlashDotted 警报”或“如果 50% 的响应是 404，则发送警报”。它还使管理人员眼花缭乱，因为您可以量化任何关于它是向上、向下、快速还是缓慢的评论。

要监控的内容包括（其他人可能也提到了这些）：http 状态、可访问端口、http 负载、数据库负载、打开连接、查询延迟、服务器可访问性（ssh、ping）、每秒查询数、工作进程数、错误百分比, 错误率。

简单的端到端测试也非常方便，尽管它们可能很脆弱。最好让它们保持简单，但你应该有一个尝试触及应用程序的核心部分（缓存、数据库、身份验证）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-31T14:58:25.743

我使用[Munin](http://munin.projects.linpro.no/)和[Monit](http://mmonit.com/monit/)，并且对它们都非常满意。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-02-04T18:59:46.457

内部日志记录很好，但当您的整个应用程序出现故障或您的盒子/环境崩溃时，您也需要外部检查。 [http://www.pingdom.com/](http://www.pingdom.com/)对我来说非常可靠。

我唯一的其他建议是我不会在这上面花*太多*时间。我最好的例子是推特，他们在系统中投入了多少精力才能半死，而不是仅仅将时间和精力投入到投入更多硬件/扩大规模。

机会是最终让你失望的东西，你的日志记录和健康系统无论如何都会错过。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-02-08T00:38:01.153

监控任何在线站点的最重要的方法是外部监控。目标应该是以最能反映您的用户如何使用该网站的方式来监控您的网站。在 99% 的情况下，一旦您知道您的网站在外部出现故障，就相对容易找到根本原因。最重要的是尽快知道您的客户无法加载您的网站。

这通常意味着使用外部性能监控服务。他们从非常低端（mon.itor.us，pingdom）到高端（Webmetrics，Gomez，Keynote）。和往常一样，你得到你所支付的。在四处寻找监控服务时要寻找的东西包括：

*   监控网络规模及分布
*   监控解决方案是否能够使用真实浏览器监控您的站点（否则您不会像真实用户那样测试您的站点）
*   脚本语言（针对您​​的网站编写交易脚本）
*   支持部门，一路为您提供帮助，并提供有关如何正确监控的专业知识

祝你好运！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-08-14T13:16:06.907

[IP Patrol](http://www.ippatrol.co.uk/)或[SiteSentry](http://www.codecycle.co.uk/sitesentry.aspx)的 Web 监控对我们很有用。第二个有点像网站信心，但更漂亮。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-30T16:39:46.663

您是否也考虑过监控功能？与您的应用程序对话并执行一些重要步骤（如登录、购买等）的脚本（使用 Perl 或 Pyton 等脚本语言或使用[WebTest](http://webtest.canoo.com/)等工具）非常好。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-02-01T20:31:14.027

除了已经回答的要监控的内容之外，您还需要确保 - 无论您使用什么系统 - 对于每个请求，您都只会收到**一个**多次发生的错误通知。否则您的收件箱将耗尽内存:) 另外，这很烦人......

在支持/开发团队之间分配待命轮班，这样就不必每天晚上都值班。那会让人们失望。监控是*一件好事*，但每个人都需要偶尔获得一次生活的机会。你的手机在凌晨 2 点嗡嗡响了几个晚上很快就会变*老*，相信我。并不是每个开发人员都习惯于 24/7 支持，因此您需要在使用监控和滥用监控之间找到平衡。

基本上，有不同的升级级别，如果天空没有塌陷，请在夜间定义一个“[现在宁静](http://en.wikipedia.org/wiki/The_Serenity_Now)”窗口，较小的升级级别不会消失。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-07-25T21:06:43.430

我一直在使用**Nagios + CruiseControl + Selenium**在关键任务 Web 应用程序上运行高级测试。一个简单的 jquery 错误阻止了用户通过在线注册表单进行操作，这让我感到非常难过。

[http://www.agileatwork.com/the-holy-trinity-of-web-2-0-application-monitoring/](http://www.agileatwork.com/the-holy-trinity-of-web-2-0-application-monitoring/)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-10-04T21:08:16.400

你可以看看[AlertGrid](http://alert-grid.com)。此 Web 应用程序允许您过滤警报并将警报转发给您的团队（全球）。如果某事没有发生，它也有很好的监控能力。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-02-04T18:54:49.757

套用 Richard Levasseur 的话说：啊，监控工具，你的不完美让我很沮丧。那里似乎没有完美的工具。Nagios 很容易设置，但 UI 有点过时，你必须在每台被监控的服务器上运行一个守护进程。 [Zenoss](http://www.zenoss.com)有一个更好的 UI，包括资源使用趋势图，但它使用 SNMP，所以你必须熟悉它才能使其正常工作，而且文档不是最好的 - 有数百页，但真的很难只需找到您开始所需的信息。

我的朋友也推荐过[Cacti](http://www.cacti.net/)和[Hyperic](http://www.hyperic.com/)，但我没有个人经验。

最后一件事 - 其他答案之一建议运行一个对您的网站施加压力的工具。我不建议在您的实时站点上这样做，除非您有一个可靠的安静期，没有人打它；即使那样，您也可能会意外地将其降低。拥有一个登台服务器要好得多，您可以在其中运行负载测试，然后再将更改投入生产。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-07T16:47:14.910

我们的一位客户使用 Techout (www.techout.com) 并对服务非常满意。

警报是免费的，无论种类或数量，它们提供电子邮件、语音邮件和短信警报——如果发生重大事件，现场人员会打来电话帮助您。

这一切都基于服务——您无需安装软件，而是有一位顾问与您一起确定最适合您业务的方法。它是最方便的[Web 应用程序监控](http://www.techout.com)服务之一，因为它们可以处理所有事情。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-06-09T17:10:08.813

我只想补充一点，您可以根据过去错误的历史并修复它们来预测错误的可能性。通过小规模的内部测试，如果您要绘制已纠正到这一点的问题的频率和严重性，您将对可预测的新问题有一个概览。如果一段时间以来一切都运行无错误，那么问题的两个来源将是最近的更改或可伸缩性问题。

从上面看来，可扩展性是你唯一担心的问题，但我只提到过去错误频率测试，因为我所在的团队总是认为他们已经修复了最后一个错误，并且没有更多错误。直到有。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-04-14T12:01:16.210

稍微改变一下这条线，我真的认为这是有用的，并且改变了我监控我的应用程序的方式是在某处记录 javascript 异常。有一个非常好的实现，可以直接从用户浏览器记录到 Google Analytics。这对于以 Javascript 为中心的 Web 应用程序来说是必须的，并且可以直接根据用户浏览器为您提供结果，这可能会导致非常意外的错误（iE 和移动浏览器很痛苦）

*免责声明：我的帖子如下*

[http://www.directperformance.com.br/en/javascript-debug-simples-com-google-analytics](http://www.directperformance.com.br/en/javascript-debug-simples-com-google-analytics)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2009-05-13T15:10:23.607

对于互联网存在监控，我建议我正在开发的服务：Sucuri NBIM（基于网络的完整性监控）。

它进行可用性和完整性检查，查找您的 Internet 存在（站点、DNS、WHOIS、标头等）的变化和连接丢失。[它是免费的，您可以在这里](http://sucuri.net)试用。

# sql - 有条件地替换 SELECT 中的值

> ID：495988
> 
> 赞同：4
> 
> 时间：2009-01-30T15:53:18.800
> 
> 标签：sql, sql-server

我有一个查询返回给定员工的工资成本

```
SELECT     totalhours * staffbaserate AS TotalCost
FROM         newrotaRaw
WHERE     staffref = @staffref 
```

但是，如果返回值 > 105，我需要做一些额外的数学运算。我需要做的数学运算是，如果值 < 105，则按原样返回值，但是如果值 > 105，那么我需要做的价值* 1.128。

例如：

John Smith 的成本为 90，因此查询应返回 90

David Smith 的成本为 140，因此查询应返回 157.92

我确信有一些方法可以使用替换来让它做我想做的事情，但我只使用替换来进行完全匹配，在这种情况下，替换取决于值。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-30T15:56:54.330

尝试这样的事情。

```
SELECT     TotalCost = 
    CASE
        WHEN (totalhours * staffbaserate) < 105 THEN (totalhours * staffbaserate)
        ELSE (totalhours * staffbaserate) * 1.128
    END
FROM         newrotaRaw
WHERE     staffref = @staffref 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T15:58:34.953

```
SELECT     
    CASE WHEN totalhours * staffbaserate <= 105 THEN totalhours * staffbaserate 
         ELSE totalhours * staffbaserate * 1.128 END AS TotalCost
FROM         newrotaRaw
WHERE     staffref = @staffref 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:56:31.837

```
SELECT    totalhours * staffbaserate * (CASE WHEN (totalhours * staffbaserate) < 105 THEN 1 ELSE 1.128 END) AS TotalCost
FROM         newrotaRaw
WHERE     staffref = @staffref 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T15:56:51.617

您正在寻找[CASE 声明](http://technet.microsoft.com/en-us/library/ms181765.aspx)。

# silverlight - 我需要在 Silverlight 开发方面表现出色吗？

> ID：495993
> 
> 赞同：2
> 
> 时间：2009-01-30T15:54:39.140
> 
> 标签：silverlight

成为“silverlight”开发人员，基本上是同时要求编程和图形技能吗？

还是只是将图形实现到 Silverlight 项目中？

即，您能否成为 Silverlight 大师，但在平面设计方面却不知头是尾？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-30T16:04:21.273

要成为 silverlight 开发人员，您实际上只需要了解 .NET 语言、事件驱动编程以及如何使用 XAML 标记。真的很简单；XAML 描述了 UI 元素（所有这些都可以由设计器处理），然后可以在代码中使用这些元素，因为为每个 UI 元素创建了一个 .NET 对象。

了解平面设计只是一个奖励。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T15:59:32.003

如果它是 Flash 之类的东西（据我了解，“成品”可以具有类似的功能），您不一定需要成为设计师。我是部分 Flash 开发人员，我对任何与图形设计相关的事情一无所知 :)

当我进行 Flash 编程时，我所做的 99% 的工作都是在 Actionscript 中完成的。我们这里有几个资产准备人员，他们提取视觉元素并将它们添加到库中，然后我们的开发人员在 Flash 应用程序中使用该库。

就像我说的，这是假设 Flash 和 Silverlight 之间有一些相似之处（据我所知，这可能不存在）。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T15:56:23.910

这就是 xaml 的强大之处，编码器和设计器都可以使用一种语言工作；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-30T16:08:57.007

我已经完成了几个 WPF 和 Silverlight 项目，而且我的图形设计技能很糟糕。您当然可以在没有这种技能的情况下进行 Silverlight。

但是，即使您可以在没有图形技能的情况下在这些项目中完成一些有吸引力的工作，但接触到具有该技能的人仍然非常有用。

例如，为看起来像玻璃的按钮添加小动画可以完全由程序员完成。但是添加有吸引力的背景以形成标题（渐变除外）仍然由图形专家处理得更好。（在我看来，当然）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-30T16:09:55.523

成为一名优秀的图形设计师并不是绝对必要的，知道如何开发 .NET 应用程序和 XAML 就足够了。不过，这就像画画一样，你只要拿着铅笔动一动手，但如果你对艺术有很好的感觉，效果会更好。由于在 Silverlight 中您的潜在目标是 Internet 用户并且他们使用丰富的用户界面（可能基于 Flash），如果您知道如何组织您的元素，例如最好的颜色和类似的东西，您的工作会更容易。******************