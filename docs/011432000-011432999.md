# StackOverflow 问答 11432000-11432999

# svn - 解决svn“没有目标的两个顶级报告”的最佳方法

> ID：11432000
> 
> 赞同：6
> 
> 时间：2012-07-11T11:48:38.280
> 
> 标签：svn, version-control

我有一个 svn 仓库

```
http://path/to/svn/trunk 
```

并从中分支了一些东西到

```
http://path/to/svn/branch 
```

通过使用

```
svn copy http://path/to/svn/trunk/site1 http://path/to/svn/branch/site1 -m 'message' 
```

我在分支上做了很多工作，但还没有将它合并回来，因为它还没有准备好。

但是，我现在需要对主干进行更改，并且在尝试这样做时得到以下信息

```
> svn commit -m 'some message'
svn: Commit failed (details follow):
svn: Aborting commit: '/path/to/svn/trunk' remains in tree-conflict 
```

我以为我应该`svn up`在 /path/to/trunk 但发生以下情况

```
> svn up
svn: Two top-level reports with no target 
```

A`--force`无助于纠正这种情况。

`svn status`导致更改的文件旁边有很多 +

```
> svn status
M  +    site1/changedfile 
```

以前有没有人经历过这种情况，你能解释一下手头的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:30:46.383

我设法解决这个问题的方法是将受影响的目录移动`/path/to/svn/trunk`到一个临时位置，并`svn up`在主干上做了一个。

这拉入了我的文件的旧版本。然后我手动复制了无法提交的文件，一旦它们恢复原位，一切都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-01T20:35:09.230

在拙劣之后，以下内容对我有用`svn mv https://path1 https://path2`：

```
svn revert --depth infinity path2
svn update path2 
```

这避免了我不得不进行其他人建议的新结帐。在此过程中，我的任何更改都没有丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:54:44.333

做一个谷歌搜索，答案（例如[这个 SO thread](https://stackoverflow.com/questions/47022/phantom-directories-in-an-svn-repository)）表明你做了一些改变 svn （例如对一个文件进行了修改，然后移动它而不在中间提交）。

到目前为止，我能找到的最好的解决方法是重新检出主干，手动合并对它的更改（例如，如果你在 Windows 上，则通过 WinMerge）——在对同一文件的不同类型更改之间进行提交/directory -- 来自您当前的工作副本；然后提交该结帐。（此时，您可以使用此修改后的新签出替换当前工作副本或丢弃工作副本中的所有更改并对其进行更新以使其与您刚刚提交的更改同步）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:43:05.760

'S' 标记一个切换的 URL 状态 - 目录的 URL 与您当前的工作目录不对应。这可能是由于未完成其操作的合并或切换。在这种情况下，我通常会执行以下操作：

对于以下步骤，让目录“problem_dir”成为受影响的目录。

首先，我找出目录切换的位置

```
svn info problem_dir 
```

如果它指向另一个 URL，则切换到您希望它指向的 URL：

```
svn switch ^/trunk/problem_dir problem_dir 
```

一旦所有目录都指向正确的 URL，您就可以还原和更新：

```
svn revert . -R
svn update 
```

重要的！仅在提交工作更改后才进行递归还原。

如果这不起作用，那么最后的手段是

```
rm -rf .
svn update 
```

# java - 土耳其语字符未出现在 PDF 文档中（PDFGraphics2D）

> ID：11432005
> 
> 赞同：0
> 
> 时间：2012-07-11T11:48:50.817
> 
> 标签：java, rendering, itext

下面的代码是我打印到 PDF 的 Java2D 应用程序的简化案例。它有些如何不[以土耳其语打印“点缀我”。](http://en.wikipedia.org/wiki/Dotted_and_dotless_I)' 使用[PDFGrahics2D](http://api.itextpdf.com/itext/com/itextpdf/awt/PdfGraphics2D.html)。

```
import com.lowagie.text.pdf.PdfWriter;
import com.lowagie.text.pdf.PdfContentByte;
import com.lowagie.text.pdf.PdfTemplate;
import com.lowagie.text.pdf.DefaultFontMapper;
import com.lowagie.text.pdf.BaseFont;
import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.Rectangle;

import java.io.FileOutputStream;
import java.io.File;
import java.io.IOException;
import java.awt.Graphics2D;
import java.awt.Font;

public class DottedIExampleWithGraphics2D
{

    private static final float WIDTH = 900;
    private static final float HEIGHT = 500;
    private DefaultFontMapper mapper = new DefaultFontMapper();

    public void testWriteOfStringWithFont() throws IOException, DocumentException
    {

        File fontFile = new File("c:/windows/fonts/arialuni.ttf");
        BaseFont bf = BaseFont.createFont(fontFile.getAbsolutePath(),
                BaseFont.IDENTITY_H,
                BaseFont.NOT_EMBEDDED);
        Font theFont = mapper.pdfToAwt(bf, 18);
        Document document = new Document(new Rectangle(WIDTH, HEIGHT));

        File testFile = new File("learning_withfont.pdf");
        FileOutputStream fos = new FileOutputStream(testFile);
        PdfWriter writer = PdfWriter.getInstance(document, fos);
        document.open();

        PdfContentByte cb = writer.getDirectContent();
        PdfTemplate tp = cb.createTemplate(WIDTH, HEIGHT);
        cb.addTemplate(tp, 0, 0);
        Graphics2D graphics = tp.createGraphics(WIDTH, HEIGHT, mapper);

        graphics.setFont(theFont);
        graphics.drawString(" \u0130 , \u0131 ", 25, 50);

        graphics.drawString(bf.getPostscriptFontName(), 25, 100);

        //
        graphics.dispose();
        document.close();

        System.out.println("testFile.getAbsolutePath() = " + testFile.getAbsolutePath());
    }

    /**
     */
    public static void main(String[] args) throws IOException, DocumentException
    {
        new DottedIExampleWithGraphics2D().testWriteOfStringWithFont();
    }
} 
```

输出是这样的。

![点缀我在这](../Images/5a86980dfa23c75c95696d8f2dc5eccd.png)

问题是如何将这些字符打印到 PDFGraphics2D。用于正常创建 PDF 的 java 代码可以正常工作。代码在这里供快速参考。

```
import com.lowagie.text.Chunk;
import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.Font;
import com.lowagie.text.Paragraph;
import com.lowagie.text.pdf.BaseFont;
import com.lowagie.text.pdf.PdfWriter;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

public class DottedIExample
{

    /**
     * Creates a PDF document. write a string and font name
     */
    public void createPdf(String filename) throws IOException, DocumentException
    {

        Document document = new Document();
        PdfWriter.getInstance(document, new FileOutputStream(filename));

        document.open();
        File fontFile = new File("c:/windows/fonts/arialuni.ttf");
        BaseFont bf = BaseFont.createFont(fontFile.getAbsolutePath(),
                BaseFont.IDENTITY_H,
                BaseFont.NOT_EMBEDDED);
        Font font = new Font(bf, 12);
        document.add(new Paragraph(bf.getPostscriptFontName(), font));
        document.add(new Paragraph("\u0131 , \u0130", font));
        document.add(Chunk.NEWLINE);

        document.close();
    }

    /**
     */
    public static void main(String[] args) throws IOException, DocumentException
    {
        File result = new File("dottedi.pdf");
        new DottedIExample().createPdf(result.getAbsolutePath());
        System.out.println("result at = " + result.getAbsolutePath());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:48:42.003

问题出在映射器上。它`awtToPdf()/pdf2awt()` 应该设置为返回正确的字体。

固定代码，仅供参考..（mapper的实际设置比较复杂）

```
import com.lowagie.text.pdf.PdfWriter;
import com.lowagie.text.pdf.PdfContentByte;
import com.lowagie.text.pdf.PdfTemplate;
import com.lowagie.text.pdf.DefaultFontMapper;
import com.lowagie.text.pdf.BaseFont;
import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.Rectangle;

import java.awt.*;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.File;
import java.io.IOException;

public class DottedIExampleWithGraphics2D {

    private static final File aFontFile = new File(("c:/windows/fonts/arialuni.ttf"));
    private static final float WIDTH = 90;
    private static final float HEIGHT = 50;
    private DefaultFontMapper mapper = new DefaultFontMapper() {
        @Override
        public BaseFont awtToPdf(Font font) {
            try {
                return BaseFont.createFont(aFontFile.getAbsolutePath(),
                        BaseFont.IDENTITY_H,
                        BaseFont.NOT_EMBEDDED);
            } catch (DocumentException e) {
                e.printStackTrace();  //blah
            } catch (IOException e) {
                e.printStackTrace();  //blah
            }
            return null;
        }

        @Override
        public Font pdfToAwt(BaseFont baseFont, int i) {
            try {
                return Font.createFont(Font.TRUETYPE_FONT, new FileInputStream(aFontFile));
            } catch (FontFormatException e) {
                e.printStackTrace();  //blah
            } catch (IOException e) {
                e.printStackTrace();  //blah
            }
            return null;
        }
    };

    public void testWriteOfStringWithFont() throws IOException, DocumentException {

        Font theFont = mapper.pdfToAwt(null, 18);
        Document document = new Document(new Rectangle(WIDTH, HEIGHT));

        File testFile = new File("learning_withfont.pdf");
        FileOutputStream fos = new FileOutputStream(testFile);
        PdfWriter writer = PdfWriter.getInstance(document, fos);
        document.open();

        PdfContentByte cb = writer.getDirectContent();
        PdfTemplate tp = cb.createTemplate(WIDTH, HEIGHT);
        cb.addTemplate(tp, 0, 0);
        Graphics2D graphics = tp.createGraphics(WIDTH, HEIGHT, mapper);

        graphics.setColor(Color.blue);
        graphics.setFont(theFont);
        graphics.drawString(" \u0130 , \u0131 , \u0049, \u0069", 10, 10);

        graphics.drawString("some", 10, 30);

        //
        graphics.dispose();
        document.close();

        System.out.println("testFile.getAbsolutePath() = " + testFile.getAbsolutePath());
    }

    /**
     */
    public static void main(String[] args) throws IOException, DocumentException {
        new DottedIExampleWithGraphics2D().testWriteOfStringWithFont();
    }
} 
```

# c# - 网站与 C# winforms 应用程序之间的通信

> ID：11432009
> 
> 赞同：2
> 
> 时间：2012-07-11T11:49:17.520
> 
> 标签：c#, winforms, communication

我们有一个网站（托管在某处）和 C# 应用程序（安装在我的 PC 上）。我需要完成以下任务：

1.  客户在网站上填写表格，即“创建”任务
2.  C# 应用程序立即从网站接收此数据并对其进行处理
3.  结果被发送回服务器，即“任务完成”消息
4.  网站更新有关此任务的状态

您如何在网站和应用程序之间建立这种链接？

过去，我使用 TCPListener 在两个 C# 应用程序之间进行通信。我也熟悉UDPlistener等..这些知识会有用吗？该网站将建立在 PHP 上。

一些提示和建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:59:40.453

您的网站不应依赖于在您的家庭或办公室 PC 上运行的应用程序，因此该网站应发布某种服务或提要。你可以把它变成一个 web 服务，这在 PHP 中很容易。

然后，您可以从 C# 应用程序中使用此服务。通过轮询服务使其定期请求新任务。当您收到新任务时，您在应用程序中处理它们，当您完成您想做的事情后，您使用另一个 Web 服务调用更新服务器上的任务。

所有这些都可以使用支持您网站的数据库中的某种队列来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:55:33.910

根据您的要求，使 C# 应用程序成为 Web 服务可能是 Windows 主机

您可以从 php 获取 web 服务，如下所示[使用 PHP 调用具有多个绑定的 WCF web 服务](https://stackoverflow.com/questions/1188663/using-php-to-call-a-wcf-web-service-with-multiple-bindings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:33:58.783

如果您可以控制您的网络主机和您的客户端，您可以尝试使用双工合同设置 WCF 服务，该服务允许服务器回调您的客户端。您的 PHP 站点可以调用 WCF 服务，然后它可以通知客户端。否则，您将不得不使用轮询方法，桌面客户端必须轮询 Web 服务以获取待处理任务的列表。

# activemq - activemqconnectionfactory 和 pooledconnectionfactory 有什么区别？

> ID：11432015
> 
> 赞同：2
> 
> 时间：2012-07-11T11:49:41.527
> 
> 标签：activemq

正如标题所说，它们有什么区别以及如何做出选择？我想知道有没有彼此相同的东西？如果我想建立一个keep-alive连接？也就是说，一旦我连接到 activemq 服务器，我就可以随时使用该连接发送/接收消息。我想我可以称它为 daemonProducer 或 daemonConsumer。activemq 可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:09:47.523

ActiveMQConnectionFactory 创建 ActiveMQ 连接。PooledConnectionFactory 池连接。如果您只需要创建一个 Connection 并将其保留很长时间，则不需要池。如果您倾向于随着时间的推移创建许多连接实例，那么池化会更好，因为连接是一项繁重的操作并且可能成为性能瓶颈。

# c# - 登录页面的 SQL 查询

> ID：11432021
> 
> 赞同：1
> 
> 时间：2012-07-11T11:49:56.183
> 
> 标签：c#, asp.net, sql

当用户使用他的 Vendor_ID 和密码登录时，他将根据条件重定向到 2 个不同的页面。如果他已经在网站上注册并且他的注册得到了网络管理员的批准，他将重定向到“RegPage1.aspx”，否则重定向到“ApprovalStatus.aspx”。如果用户输入了错误的 Vendor_ID 或密码，它将抛出错误消息“输入有效的 VendorID 或密码”。所以我写了如下的C#代码。**它工作正常**，但任何人都可以通过合并两个 SQL 查询来帮助我简单地做到这一点，检查“User_Info”表中的 vendor_ID 可用性和“Company_Info”表中的 ApprovalStatus 检查？

```
 protected void BtnHomeUserSubmit_Click(object sender, EventArgs e)
    {            
    SqlConnection SqlCon = new SqlConnection(GetConnectionString());  
    try      
    {             
      if ((txtHomeUsername.Text == "") || (txtHomePassword.Text == ""))        
      {               
        ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert", "alert ('Enter valid  VendorID or Password');", true); 
      }             
      else           
      {       
         var da1 = new SqlDataAdapter("select * from User_Info where Vendor_ID='" +  txtHomeUsername.Text.Trim() + "'", SqlCon);                
        var dt1 = new DataTable();          
        da1.Fill(dt1);         
        if (dt1.Rows.Count > 0)        
        {            
         var da2 = new SqlDataAdapter("select * from Company_Info where Approval_Status='NO' AND Vendor_ID='" + txtHomeUsername.Text.Trim() + "'", SqlCon);        
              var dt2 = new DataTable();    
              da2.Fill(dt2);            

         if (dt2.Rows.Count > 0)       
         {            
           string url = "ApprovalStatus.aspx";     
           ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Your Vendor ID is already registered');window.location.href = '" + url + "';", true);  
         }        
         else          
         {                      
             Response.Redirect("RegPage1.aspx?Parameter=" + Server.UrlEncode (txtHomeUsername.Text));        
         }       
     }          
       ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert", "alert('Enter valid  VendorID or Password');", true);     
         }      
    }       
   finally   
   {      
    SqlCon.Close();    
   }       
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:20:48.773

@mahmoud-gamal 和 @colin-mackay 提出的要点 - 摆脱允许 SQL 注入的代码。 **免责声明**我没有对此进行测试并且是从内存中编写的，但它应该让您了解如何解决您的问题。

要回答您的问题，它看起来像这样。

**逻辑** 1) 从 User_Info 表中获取用户并在 Company_info 表上 ***LEFT JOIN 。*****结果：** 如果没有返回行，则登录/注册无效。如果“任何”行，则检查 Company_info 中是否存在关联记录（空值）。如果不是“NullOrEmpty”，则登录/注册有效。ELSE 供应商已注册。

```
 using(SqlConnection SqlCon = new SqlConnection(GetConnectionString()) {
        var sqlString = "SELECT u.UserID, c.CompanyID FROM User_Info u LEFT JOIN Company_Info c ON c.VendorID = u.VendorID WHERE u.Vendor_ID = @p_VendorID AND c.Approval_Status='NO'";

        var da1 = new SqlDataAdapter(sqlString, SqlCon);  
        da1.SelectCommand.Parameters.Add("@p_VendorID", SqlDbType.VarChar, 256);
        da1.SelectCommand.Parameters["@p_VendorID"].Value = txtHomeUsername.Text.Trim();

        var dt1 = new DataTable(); 
        da1.Fill(dt1); 
        if(da1.Rows.Any()){     
            string userId = string.Empty;
            string companyId = string.Empty;
            foreach(DataRow row in dt1.Rows){ 
                 userId = row["name"].ToString();
                 companyId = row["description"].ToString();
             }
             if(!string.IsNullOrEmpty(companyId)) {
                string url = "ApprovalStatus.aspx";     
                ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Your Vendor ID is already registered');window.location.href = '" + url + "';", true);  
             } else {
                Response.Redirect("RegPage1.aspx?Parameter=" + Server.UrlEncode (txtHomeUsername.Text));  
             }          
        } else {
            ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert", "alert('Enter valid VendorID or Password');", true);                 
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:54:47.963

首先，您应该[保护您的代码免受 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)。

如果你想：

> 合并两个 SQL 查询，检查“User_Info”表中的 vendor_ID 可用性和“Company_Info”表中的 ApprovalStatus 检查

然后`JOIN`是两张表：

```
SELECT * 
FROM User_Info ui
INNER JOIN Company_Info ci On ui.VendorID = ci.VendorID
WHERE ci.Approval_Status='NO'
AND ui.Vendor_ID = @vendor_IdParam 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:57:56.290

您可以尝试使用以下 JOIN 查询：

```
SELECT a.*,b.* FROM user_info a JOIN company_info b on a.vendor_id=b.vendor_id WHERE a.vendor_id='txt_username' AND b.approval_status='NO' 
```

# javascript - 值树的 JQuery 文本输入自动完成

> ID：11432024
> 
> 赞同：2
> 
> 时间：2012-07-11T11:50:03.533
> 
> 标签：javascript, jquery-plugins

大家

我有一个文本输入，其内容应限制为一组值。这些值的形式为dependency1、dependency2、dependency3，因此它们形成一棵树。我想为了解此结构的该字段提供智能自动完成功能。例如，结构是这样的：

```
Engineering
  Electric
    Communication
    Power
  Electronic
    Computation
    Control
Economy
  Economy
  Accounting
Education
  Basic
  Language
    English
    French
  Sciences
    Math
    Physics 
```

因此，一旦用户输入了足够多的字母，第一个依赖项就应该完成，并且应该准备好自动完成下一个依赖项。如果某些选项出现在弹出窗口中，它们应该仅限于我们所在的依赖项，而不是所有树。

你知道任何提供类似功能的 jQuery（或其他）库吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-24T13:57:17.677

从另一个关于值分组的搜索中找到了一个小提琴。更多地工作 - 我认为这会很好 - 我只有一个级别的分组，但我认为可以添加更多：

[http://jsfiddle.net/Kieveli/c1wgjLfv/3/](http://jsfiddle.net/Kieveli/c1wgjLfv/3/)

HTML：

```
<label for="search">Search: </label>
<input id="search"> 
```

CSS：

```
 .ui-autocomplete-category {
        font-weight: bold;
        padding: .2em .4em;
        margin: .8em 0 .2em;
        line-height: 1.5;
    }   
    .ui-menu .ui-menu-item {
        padding: 0em 1.5em;
        width: 220px;
        clear: both;
    }
    .Products {
        width: 220px;
    }
    .People {
        width: 220px;
    } 
```

jQuery：

```
 $.widget( "custom.catcomplete", $.ui.autocomplete, {

     _create: function() {
        this._super();
        this.widget().menu( "option", "items", "> :not(.ui-autocomplete-category)" );
    },

     _renderMenu: function( ul, items ) {

         var that = this,
        currentCategory = "";

         $.each( items, function( index, item ) {
            var li;
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category " + item.category + "'>" + item.category + "</li>" );
                currentCategory = item.category;
            }

            li = that._renderItemData( ul, item );

            if ( item.category ) {
                li.attr( "aria-label", item.category + " : " + item.label );
            }
        });
    },

     _renderItem: function( ul, item ) {
        return $( "<li>" )
        .addClass(item.category)
        .attr( "data-value", item.value )
        .append( $( "<a>" ).text( item.label ) )
        .appendTo( ul );
    }
});

$(function() {
    var data = [
        { label: "annhhx10", category: "Products" },
        { label: "annk K12", category: "Products" },
        { label: "annttop C13", category: "Products" },
        { label: "bannttop C13", category: "Products" },
        { label: "cannttop C13", category: "Products" },
        { label: "dannttop C13", category: "Products" },
        { label: "eannttop C13", category: "Products" },
        { label: "fannttop C13", category: "Products" },
        { label: "gannttop C13", category: "Products" },
        { label: "hannttop C13", category: "Products" },
        { label: "iannttop C13", category: "Products" },
        { label: "jannttop C13", category: "Products" },
        { label: "anders andersson", category: "People" },
        { label: "andreas andersson", category: "People" },
        { label: "andreas johnson", category: "People" },
        { label: "bandreas johnson", category: "People" },
        { label: "candreas johnson", category: "People" },
        { label: "dandreas johnson", category: "People" },
        { label: "eandreas johnson", category: "People" },
        { label: "fandreas johnson", category: "People" },
        { label: "gandreas johnson", category: "People" },
    ];

    $( "#search" ).catcomplete({
        delay: 0,
        source: data
    });
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-11T11:53:01.023

不完全是应该在 SO 上提出的问题类型，但是有一个名为 jQuery-UI 的插件，它依赖于 jQuery，它内置了一个自动完成插件。看看：

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# java - 如何在派生类中重载抽象构造函数

> ID：11432037
> 
> 赞同：-3
> 
> 时间：2012-07-11T11:50:39.653
> 
> 标签：java, php

我有一个抽象构造函数和一个派生类，如下所示：

```
abstract ab {
  ab();
}

class dc {
  dc();
} 
```

我想先执行派生类的构造函数，然后执行抽象类的构造函数

请给我一个例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:57:44.803

在 java中，**父类**构造函数在**Child 的构造函数**之前 调用，并且此调用仅由 Child 构造函数进行。

**答案是否定的。**这是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:02:46.647

我的建议是使用组合而不是继承。

```
Class SuperClass {
  AbstractClass abstractClass;

  public SuperClass() {
    doStuff();

    abstractClass = new ConcreteClass();
  }
} 
```

此链接提供了更多解释[http://tiedyedfreaks.org/eric/CompositionVsInheritance.html](http://tiedyedfreaks.org/eric/CompositionVsInheritance.html)

# hibernate - 如何在 hibernate-memcached 中创建客户端

> ID：11432038
> 
> 赞同：0
> 
> 时间：2012-07-11T11:50:39.973
> 
> 标签：hibernate, memcached, spymemcached

在 hibernate.cfg.xml 中定义所有 memcached 属性后，如何在我的代码中创建 memcachedclient？

Hibernate.cfg.xml:-

```
<property name="hibernate.cache.provider_class">com.googlecode.hibernate.memcached.MemcachedCacheProvider</property>
        <property name="hibernate.cache.use_second_level_cache">true</property>
        <property name="hibernate.cache.use_query_cache">false</property>
        <property name="hibernate.cache.use_minimal_puts">true</property>
        <property name="hibernate.cache.region_prefix">MemcachedCache</property>
        <property name="hibernate.memcached.memcacheClientFactory">com.googlecode.hibernate.memcached.dangamemcached.DangaMemcacheClientFactory</property>      
        <property name="hibernate.Memcached.servers"> 10.2.200.114:11211 </property>
        <property name="hibernate.Memcached.cacheTimeSeconds">300</property>
        <property name="hibernate.Memcached.connectionFactory">KetamaConnectionFactory</property>  
        <property name="hibernate.memcached.keyStrategy">HashCodeKeyStrategy</property>
        <property name="hibernate.memcached.readBufferSize">DefaultConnectionFactory.DEFAULT_READ_BUFFER_SIZE</property>
        <property name="hibernate.memcached.operationQueueLength">DefaultConnectionFactory.DEFAULT_OP_QUEUE_LEN</property>
        <property name="hibernate.memcached.operationTimeout">DefaultConnectionFactory.DEFAULT_OPERATION_TIMEOUT</property>
        <property name="hibernate.memcached.hashAlgorithm">HashAlgorithm.KETAMA_HASH</property>
        <property name="hibernate.memcached.clearSupported">false</property> 
```

就像一样

```
MemcachedClient client = new MemcachedClient(new KetamaConnectionFactory(), AddrUtil.getAddresses("10.2.200.114:11211")); 
```

如果没有，如果我必须使用 hibernate.cfg.xml 中定义的属性，那么我应该如何继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T20:04:27.560

我知道这是一个老问题，但无论如何我都会回答，因为我有完全相同的问题。

如果您使用 Spring，那么您可以将其作为 bean 连接。

这是我的持久性配置的一部分：

```
<property name="hibernate.cache.provider_class" value="com.googlecode.hibernate.memcached.MemcachedCacheProvider" />
<property name="hibernate.cache.use_second_level_cache" value="true" />
<property name="hibernate.cache.use_structured_entries" value="true" />
<property name="hibernate.memcached.cacheTimeSeconds" value="300" />
<property name="hibernate.memcached.connectionFactory" value="BinaryConnectionFactory" /> 
```

这是相关的 Spring 配置：

```
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property name="persistenceUnitName" value="persistenceUnit"/>
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaPropertyMap">
            <map>
                <entry key="hibernate.memcached.servers" value="${MEMCACHIER_SERVERS}" />
                <entry key="hibernate.memcached.username" value="${MEMCACHIER_USERNAME}" />
                <entry key="hibernate.memcached.password" value="${MEMCACHIER_PASSWORD}" />
            </map>
        </property>
    </bean>

    <bean id="plainCallbackHandler" class="net.spy.memcached.auth.PlainCallbackHandler">
        <constructor-arg index="0" value="${MEMCACHIER_USERNAME}"/>
        <constructor-arg index="1" value="${MEMCACHIER_PASSWORD}"/>
    </bean>
    <bean id="authDescriptor" class="net.spy.memcached.auth.AuthDescriptor">
        <constructor-arg index="0">
            <array><value>PLAIN</value></array>
        </constructor-arg>
        <constructor-arg index="1" ref="plainCallbackHandler"/>
    </bean>
    <bean id="memcachedClient" class="net.spy.memcached.spring.MemcachedClientFactoryBean">
        <property name="servers" value="${MEMCACHIER_SERVERS}"/>
        <property name="protocol" value="BINARY"/>
        <property name="authDescriptor" ref="authDescriptor"/>
    </bean> 
```

然后，您当然可以随意使用它：

```
@Inject
private MemcachedClient memcachedClient; 
```

我在**hibernate-memcached**的 1.3 版中得到了这个。

# django - 如何将字段动态添加到继承自 mongoengine.django.auth.User 的 CustomUser 模型？

> ID：11432039
> 
> 赞同：3
> 
> 时间：2012-07-11T11:50:45.110
> 
> 标签：django, pymongo, mongoengine

我正在将 mongoengine 与 django 一起使用。我有一个继承自 mongoengine.django.auth.User 的 CustomUser 模型，它定义了一些字段。我有一个字段，只有某些用户需要。我不希望每个用户对象中都有这个字段。由于 mongoengine.django.auth.User 是从 mongoengine.Document 继承的，CustomUser 模型是从其中继承的，因此我无法动态向其中添加字段。所以我让我的 CustomUser 模型继承自 mongoengine.django.auth.User 和 mongoengine。动态文档

```
from mongoengine.django.auth import User
from mongoengine import DynamicDocument

class CustomUser(User, DynamicDocument):
    # fields 
```

使用这种方法，我可以为 CustomUser 动态创建字段。但我想知道这样做是否可以。如果有其他更好的方法可用，请提出建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:10:37.540

是的，这是完全有效的，因为`mongoengine.django.auth.User`该类是可继承的。

替代方法可能是针对不同类型的用户显式扩展，例如：

```
class AdminUser(User):
    role = StringField() 
```

然后你可以使用：

```
User.objects(username=blah) 
```

如果那`User`是一个`AdminUser`，它将返回正确的类实例

# iphone - 如何从 int 转换为 unsigned short int - iPhone

> ID：11432040
> 
> 赞同：2
> 
> 时间：2012-07-11T11:50:45.880
> 
> 标签：iphone, objective-c, int, unsigned

我正在尝试从 plist 中获取一个整数并将其与`sin_port`. 但是`sin_port`需要 an`unsigned short`而不是 an`int` 我如何将 an 转换`int`为 an `unsigned short int`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T11:54:00.420

我不知道objective-c，但在纯C中你可以做类似的事情

```
int value = 1234;
unsigned short sin_port = (unsigned short) value; 
```

# c# - C# 上的自由图像

> ID：11432041
> 
> 赞同：0
> 
> 时间：2012-07-11T11:50:46.210
> 
> 标签：c#, dll, freeimage

我已经下载了 FreeImage 的最新编译版本，然后构建了 FreeImageNet 包装器。将 FreeImage.dll 和 FreeImageNet.dll 放在与我的可执行文件（示例代码）相同的文件夹中。但是每次我运行它时，它都会说 freeimage.dll 丢失了。我修改了 FreeImageWrapper.cs 上的代码并删除了异常处理程序

```
public static bool IsAvailable()
        {
            /*try
            {*/
                // Call a static fast executing function
                Version nativeVersion = new Version(GetVersion());
                Version wrapperVersion = GetWrapperVersion();
                // No exception thrown, the library seems to be present
                return
                    (nativeVersion.Major > wrapperVersion.Major) ||
                    ((nativeVersion.Major == wrapperVersion.Major) && (nativeVersion.Minor > wrapperVersion.Minor)) ||
                    ((nativeVersion.Major == wrapperVersion.Major) && (nativeVersion.Minor == wrapperVersion.Minor) && (nativeVersion.Build >= wrapperVersion.Build));
            }
            /*catch (DllNotFoundException)
            {
                return false;
            }
            catch (EntryPointNotFoundException)
            {
                return false;
            }
            catch (BadImageFormatException)
            {
                return false;
            }*/

        } 
```

它总是抛出 BadImageFormatException。似乎问题出在本机 dll (freeimage.dll) 上？

我如何解决它 ？

提前致谢。

我正在使用 Visual C# 2010 Express

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:55:58.043

如果您尝试将非托管 32 位 dll 加载到 64 位进程中，这种情况经常发生。要解决此问题，请打开启动项目的属性并在 Built-PlatformTarget 下将类型从`Any CPU`更改为`x86`。

# spring-mvc - Spring绑定显示新数据不旧

> ID：11432043
> 
> 赞同：0
> 
> 时间：2012-07-11T11:50:56.240
> 
> 标签：spring-mvc, binding

抱歉，我是春天的新手。但是我有一个问题，我的 jsp 上有两个表中的字段。创建乐观锁错误时。

我用相同的数据打开了两个浏览器。在屏幕一上，我将一条记录添加到表 B。然后我保存它。然后屏幕重新显示并显示正确保存的消息。在第二个浏览器上，我更改了表 A 中的一些字段，然后单击保存按钮。抛出乐观锁定错误后，屏幕重新显示。表 A 中的字段是我在浏览器 2 上更改的原始字段。但是表 B 中的字段包括在浏览器一中输入的新字段。

我们试图向用户展示他们点击保存时的值。所以此时不​​想看到写入表 B 的新记录。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:27:43.037

听起来您的控制器在出错后正在向用户返回一个新视图并再次读取实体。也许您重定向到显示表单的 GET？

如果您有一个捕获任何错误（验证或其他）的控制器方法，而不是返回一个模型和视图（新模型替换原始值，您可以只返回一个视图（与 POST 来自相同的视图）和它应显示用户编辑的值。

像这样的东西...

```
@RequestMapping(value = "/form", method = RequestMethod.GET)
public ModelAndView getForm() {
    // Get the model data...
    MyModel model = ...
    return new ModelAndView(VIEW_NAME, MODEL_NAME, model);
}

@RequestMapping(value = "/form", method = RequestMethod.POST)
public ModelAndView handlePost(@ModelAttribute(MODEL_NAME) MyModel model,
                               BindingResult errors) {
    ModelAndView mav = null;

    // Process/validate...
    if (has errors)  {
        // possibly add something to errors
        mav = new ModelAndView(VIEW_NAME);
    else {
        // new view instead...
    }

    return mav;
} 
```

# javascript - 解决 page-break-inside:avoid

> ID：11432044
> 
> 赞同：3
> 
> 时间：2012-07-11T11:50:59.683
> 
> 标签：javascript, css, printing, page-break, page-break-inside

我目前正在打印一些东西。我有一个动态页面，其中包含可变数量的块级元素。有些可能是 1 行，有些可能是 100+ 行。

```
<div class='myclass'><span id="id1">1</span>text 1 line....</span></div>
<div class='myclass'><span id="id2">2</span>text 10 lines....</span></div>
<div class='myclass'><span id="id3">3</span>text 3 lines....</span></div>
<div class='myclass'><span id="id4">4</span>text 100+ lines....</span></div>
... 
```

我知道 page-break-inside:avoid; 当它被实现时（Opera、Chrome 和 IE7+ 仅在严格的 html 模式下支持）假设防止块级元素环绕 2 页。由于跨浏览器不支持此 css 标签，我想知道是否有任何解决方法？

我尝试使用 jquery，后渲染，并测量每页的每个元素，将高度相加，当最后一个元素相加大于页面高度时，我添加一个 page-break-before:always 到该元素，但只有在我假设某个页面大小时才有效，这绝不是一个好的假设。

```
sudo code only
document.ready(function(){
  var pagesize = 100;
  var currentheight;
  $('.myclass').each(function(){
    if (currentheight + this.getHeight() > pagesize || this.getHeight > pagesize) {
      this.css('page-break-before', 'always');
      currentheight = this.getHeight() % pagesize;
    }
  });
}); 
```

而且我不想只添加 page-break-before / after :always 到每个元素，因为在单个页面上有一个 1 衬里是没有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:59:08.650

尝试`.myclass{page-break-before: auto;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-19T11:41:42.097

```
.keep-together {
        page-break-inside: avoid;
   } 
```

添加你的风格。然后在每个部分添加保持在一起的类。

# php - PHP 在邮件中支持多种语言

> ID：11432045
> 
> 赞同：0
> 
> 时间：2012-07-11T11:51:04.163
> 
> 标签：php, email, multiple-languages

我有一个 PHP 应用程序，它可以接收多种语言的邮件，因此可以接收不同的字符集。一旦我获取邮件，它应该以 UTF-8 编码存储在 db 中。

例如，我收到一封法语邮件“Une bonne journée, tout le monde!” 字符集：ISO-8859-1 或韩语“좋은 일, 세계!” 字符集：EUC-KR。现在我正在使用 Zend Imap API 阅读邮件，然后使用 iconv($charset,'UTF-8//TRANSLIT',$part) 将其转换为编码 UTF-8。$charset 从邮件中解析并替换。

但我仍然无法获得正确的结果。请让我知道解决方案是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:19:39.310

对我来说，答案是盯着我的脸。

但是网络上的许多示例虽然正确地说明了 UTF-8 编码，但我看到的示例要么发生了转义，要么错误地演示了如何为 PEAR Mail 函数执行此操作。

这是我用来定义标题的行，它为我解决了这个问题。

```
$headers = array ( 
      'Content-Type' => 'text/plain; charset=UTF-8',
      'From' => $from,
      'To' => $to,
      'Subject' => $subject); 
```

希望这可以帮助某人节省我为此花费的 2 个小时的挖掘时间！

# c++ - 我可以在 printf 中需要整数的地方传递一个字符吗？

> ID：11432051
> 
> 赞同：18
> 
> 时间：2012-07-11T11:51:23.587
> 
> 标签：c++, c, variadic-functions

下面的代码是否正确？

```
char mychar = 200;
printf("%x", mychar); 
```

根据[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/) `%x`需要一个整数（我的编译器为 4 个字节），我只在这里传递 1 个字节。由于`printf`使用了可变参数，我担心这仅适用于堆栈上的字节对齐（即，当压入堆栈时，char 总是使用 4 个字节）。

我认为最好写成：

```
char mychar = 200;
printf("%x", static_cast<int>(mychar)); 
```

你认为第一个代码是安全的吗？如果不是，你认为如果我切换到 bigendian 架构，我会得到不同的输出吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-11T11:53:39.307

在您的示例中，参数实际上是 type `int`。由于*默认参数promotions*`mychar`而被提升。`int`

 *> （C99，6.5.2.2p6）“如果表示被调用函数的表达式的类型不包括原型，则对每个参数执行整数提升，并且将浮点类型的参数提升为双精度。**这些被称为默认参数提升。** "

和（强调我的）：

> (C99, 6.5.2.2p7) "**如果表示被调用函数的表达式具有包含原型的类型，**则参数将隐式转换为相应参数的类型，就像通过赋值一样，采用每个参数的类型参数是其声明类型的非限定版本。函数原型声明器中的省略号表示法会导致参数类型转换在最后一个声明**的参数之后停止。默认参数提升是在尾随参数上执行的**。"

请注意，从技术上讲，`x`转换说明符需要一个`unsigned int`参数，但`int`保证`unsigned int`类型具有相同的表示形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:04:13.883

这仅适用于您，因为您的平台能够将`int`（您`char`的晋升）解释为`unsigned`，这是`%x`预期的。为确保这始终有效，您应该使用适当的格式说明符，即`%d`.

由于您似乎希望将其`char`用作数字量，因此最好使用两种替代类型`signed char`或`unsigned char`明确您的意图。`char`可以是平台功能的有符号或无符号类型。`unsigned char`那么正确的说明符是`%hhx`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:18:57.987

只需使用[printf("%hhx", mychar)](http://en.cppreference.com/w/cpp/io/c/fprintf)。请不要使用 cplusplus.com 作为参考。这个问题只是证明了它包含许多错误和遗漏大量信息的声誉。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T12:20:26.293

如果您使用的是 C++，那么您可能想要使用流。

您需要将字符转换为整数，否则它们将被打印为字形。另外，有符号的字符会在转换过程中进行符号扩展，所以最好使用无符号字符。例如，持有 0xFF 的字符将打印为 0xFFFFFFFF，除非先转换为无符号字符。

```
#include <iostream>
#include <iomanip>

int main(void){

    char c = 0xFF;
    std::cout << std::hex << std::setw(2) << std::setfill('0');
    std::cout << static_cast<int>(static_cast<unsigned char>(c)) << std::endl;

    return 0;
} 
```*

# c# - 以这种方式设计 ServicePointManager.ServerCertificateValidationCallback 的理由是什么？

> ID：11432052
> 
> 赞同：8
> 
> 时间：2012-07-11T11:51:28.620
> 
> 标签：c#, servicepointmanager

`ServicePointManager.ServerCertificateValidationCallback`是一个全局静态属性，只需执行以下操作即可被应用程序中的任何代码覆盖：

```
ServicePointManager.ServerCertificateValidationCallback
    = (sender, cert, chain, sslPolicyErrors) => true; 
```

为什么他们决定以这种方式实施它？当然，它应该是`WebRequest`对象的属性，并且您应该有一个很好的理由来说明您忽略证书的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:08:02.610

能够设置此属性的其他代码不是安全问题，因为设置该属性需要`SecurityPermissionFlag.Infrastructure`权限，您不需要授予您不信任的代码。

另一方面，我同意这是糟糕的设计，因为它是全局可变状态，应该避免。特别是它使得在程序的不同部分使用不同的验证策略变得不必要地困难。正如您所建议的那样，共享配置文件会更糟糕。

正确的选择是回调的实例属性，就像普通`SslStream`类使用的一样。我对框架的那部分不够熟悉，无法说明此属性是否存在，因此`ServicePointManager.ServerCertificateValidationCallback`仅用作默认值，或者此全局变量是否是影响证书验证的唯一方法。

# bc - GNU BC：函数、if 子句和返回

> ID：11432056
> 
> 赞同：1
> 
> 时间：2009-08-28T09:37:10.863
> 
> 标签：bc

问题在代码的注释中：

```
define f(x) {
print x^2
}
define g(x) {
print x+2
}
if(f(2)>g(1)) {
print "it works"
}
43         # Why 43 instead of the text "it works"?

a=f(2)
b=g(1)

if(a>b) {
print "it works"
}          
          # Why nothing? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-28T09:48:10.310

您的函数仅打印他们计算的内容。他们不返回结果。

因此，当您调用 f(2) 时，f 将打印 4，而当您调用 g(1) 时，g 将打印 3。

试试这种方式：

```
define f(x) {
    return x^2
}
define g(x) {
    return x+2
}
if(f(2)>g(1)) {
    print "it works"
}

a=f(2)
b=g(1)

if(a>b) {
    print "it works"
} 
```

# java - Java Web 项目未正确构建

> ID：11432064
> 
> 赞同：13
> 
> 时间：2012-07-11T11:52:02.930
> 
> 标签：java, eclipse, tomcat, deployment, buildpath

我有一个 Java Web 项目，我正在部署到嵌入在 Eclipse 的服务器插件中的 Tomcat，唉，当我在发布/启动服务器后导航到该 webapp 的位置时，.class 文件都丢失了。我可以导航到 ProjectName\WEB-INF\classes\path\to\packages\ -> 所有包都是空的。

任何想法如何解决这个问题？

**编辑**

**Build Automatically 被选中，它为我刚刚包含的另一个 Web 项目编译得很好，只是不适用于指定的那个**

**编辑 2**

**重新安装 Eclipse（因为为什么不） - 没有任何改变，适用于项目 #2，不适用于项目 #1。现在甚至包的路径都不存在。src 文件夹的内容（应该移动到 WEB-INF/classes）根本不存在 - 但资源（我有一个具有相同部署程序集命令的资源文件夹）是。**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T12:28:34.387

执行几个步骤来恢复理智......

1.  刷新您的项目。可能在 Eclipse 外部的文件系统上修改了某些内容。

2.  项目启动 -> 清理。

3.  现在查看文件系统上的项目（不是部署位置）。您是否在 /bin 目录中看到预期的文件（或您可能已将类输出目录更改为的任何文件）？

4.  现在让我们尝试使用向导导出战争。文件 -> 导出 -> Web -> WAR 或类似的东西。检查 WAR 内容。你那里有 .class 文件吗？

5.  如果到目前为止一切都很好，那么您的项目就没有问题。Tomcat 服务器适配器刚刚弄糊涂了。

6.  在 Servers 视图中... 确保 Tomcat 正在运行。接下来右键单击 Tomcat 并选择添加/删除项目。删除您的项目。确认您的 Web 应用程序不再可访问。

7.  现在通过添加/删除项目重新添加您的项目或调用其中一个运行作为操作。

上面应该重置 Tomcat 服务器适配器，希望事情能按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T15:08:56.853

检查您是否已在 IDE 上删除或移动了与项目关联的外部 JAR。我已经移动它并遇到了同样的问题。

# php - 如何在 PHP 中从 sql 显示德国元音变音（ü，ä，ö）？

> ID：11432066
> 
> 赞同：7
> 
> 时间：2012-07-11T11:52:04.810
> 
> 标签：php, character-encoding

我试图以正确的方式显示这个德语字符，如果我不使用`htmlentities()`输出是**unabh�ngig**，但是当我尝试使用`htmlentities()`这个词时缺少，为什么会这样？

```
<?php
$str = htmlentities("unabhängig");
?>
<!DOCTYPE html>
<html lang="en">
<head>
<title>Test</title>
<meta charset='utf-8'>
</head>
<body>
</body>
<div><?php echo $str;?></div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T18:48:57.100

我对 ü、ä 等也有同样的问题。

选择数据库后，我立即实现了这两行：

```
mysql_query("SET NAMES 'utf8'"); 
mysql_query("SET CHARACTER SET 'utf8'"); 
```

如此处建议：http: [//www.flashhilfe.de/forum/serverseitige-programmierung/php-mysql-wie-utf-8-beim-connect-festlegen-225225-225225.html](http://www.flashhilfe.de/forum/serverseitige-programmierung/php-mysql-wie-utf-8-beim-connect-festlegen-225225-225225.html)

最好的，雅尼斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:54:59.837

通过确保使用 HTTP 标头将字符集设置为 utf-8，您应该能够在不单独编码的情况下发送 ü。

如果由于某种原因您不能这样做，请使用：

```
Ü = &Uuml; 
```

或者

```
ü = &uuml; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T13:09:50.517

如果你不想担心这么多不同的字符集编码，或者如果 htmlentities 不适合你，这里是替代方案：我使用 mysqli DB 连接（和 PHPV5）Form post 来写入/插入到 MySQl DB。

```
$Notes = $_POST['Notes']; //can be text input or textarea.

$Notes = str_replace('"', '&quot;', $Notes);  //double quotes for mailto: emails.  
$von = array("ä","ö","ü","ß","Ä","Ö","Ü"," ","é");  //to correct double whitepaces as well
$zu  = array("&auml;","&ouml;","&uuml;","&szlig;","&Auml;","&Ouml;","&Uuml;","&nbsp;","&#233;");  
$Notes = str_replace($von, $zu, $Notes);  
echo " Notes:".$Notes."<br>" ;  
$Notes = mysqli_real_escape_string($link, $Notes); //for recommended mysqli DB connection.
//$Notes = mysql_real_escape_string($Notes); //for old deprecated mysql DB connection.

// mysqli_real_escape_string Escapes special characters in a string for use in an SQL statement

echo " Notes:".$Notes ;  //ready for inserting
enter code here
//Optional:     
$charset = mysqli_character_set_name($link);  //only works for mysqli DB connection
printf ("To check your character set but not necessary %s\n",$charset); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T12:01:51.733

这是字符集的格式：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

确保您的编码不是由 htaccess 或 apache 强制执行的。查看网站时检查浏览器中选择的编码是什么，如果不是 utf-8，那么它是被强制的。如果强制，您可以将其添加到 htaccess

```
AddDefaultCharset UTF-8 
```

确保您的数据库表是 utf-8

确保您与数据库的连接使用 utf-8 [http://php.net/manual/en/function.mysql-set-charset.php](http://php.net/manual/en/function.mysql-set-charset.php)

```
mysql_query("SET character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'", $conn); 
```

您可以将 UTF-8 编码传递给 htmlentities 以使其使用正确的编码。或者你可以使用 htmlspecialchars [http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

# sencha-touch-2 - 将按钮添加到 TabPanel

> ID：11432067
> 
> 赞同：2
> 
> 时间：2012-07-11T11:52:07.327
> 
> 标签：sencha-touch-2

我想在 Sencha Touch 2 中将常规 Sencha 按钮添加到 TabPanel

煎茶小提琴[http://www.senchafiddle.com/#tRd76](http://www.senchafiddle.com/#tRd76)

代码：

```
//define the application
Ext.application({

    launch: function() {
        addTabPanel();

    }
});

function addTabPanel(){
     Ext.Viewport.add({
        xtype: 'tabpanel',
        tabBarPosition: 'bottom',
        fullscreen: true,
        tabBar:{
           dockedItems:[{
               xtype: 'button',
               ui: 'round', 
               text: 'Button1',
               dock: 'left',
               handler: function(){
                   alert('Botton1 Working Now');    
               }
           }]
        },

        items:[
            {
            title: 'All Market',
            iconCls: 'home',
            html: 'Home',

        },

        {
                title: 'Favorite',
                iconCls: 'favorites',
                html:'Favorite',
                itemTpl: '{mwRow}',
            }
        ]
    });
} 
```

未显示将 Button1 添加到 TabPanel 按钮时。为什么 Button1 不显示？

请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:16:55.230

这是一个快速的方法。我不确定还有其他方法...

```
Ext.application({

    launch: function() {
        addTabPanel();
        var tp = Ext.ComponentQuery.query('tabpanel')[0];
        var btn = Ext.create('Ext.Button',{
            width:80,
            height:30,
            text:'BTN',
            style:'position:absolute;top:auto;bottom:13px;left:5px;z-index:10;'
        });
        tp.element.insertFirst(btn.element);

    }
});

function addTabPanel(){
    Ext.Viewport.add({
        xtype: 'tabpanel',
        tabBarPosition: 'bottom',
        fullscreen: true,
        tabBar:{
            dockedItems:[{
                xtype: 'button',
                ui: 'round', 
                text: 'Button1',
                dock: 'left',
                handler: function(){
                    alert('Botton1 Working Now');    
                }
            }]
        },

        items:[
            {
                title: 'All Market',
                iconCls: 'home',
                html: 'Home',

            },

            {
                title: 'Favorite',
                iconCls: 'favorites',
                html:'Favorite',
                itemTpl: '{mwRow}',
            }
        ]
    });
} 
```

这是小提琴：[http ://www.senchafiddle.com/#HvTek](http://www.senchafiddle.com/#HvTek)

希望这可以帮助

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-11T13:29:31.613

将代码片段放入 Home 项中，如下所示，

```
....
items:[
        {
        title: 'All Market',
        iconCls: 'home',
        html: 'Home',
        items: [
          {
           xtype: 'button',
           ui: 'round', 
           text: 'Button1',
           dock: 'left',
           handler: function(){
               alert('Botton1 Working Now');    
           }
          }
        ],
},
... 
```

![在此处输入图像描述](../Images/cfc1191410eeadc73698b3a28ee1c6de.png)

我希望这有帮助。:)

# jsp - 选中复选框后禁用/启用 jsp 页面

> ID：11432071
> 
> 赞同：0
> 
> 时间：2012-07-11T11:52:21.427
> 
> 标签：jsp, events, spring-webflow

我在某个jsp页面中有一个复选框...如果选中该复选框，abc.jsp将触发...如果未选中xyz.jsp应该触发...谁能帮我实现这个...我想在jsp本身中有代码行......

这是我在我的一个类文件中的内容

```
private boolean useNis = false;

public boolean isUseNis() {
return useNis;
    }

public void setUseNis(boolean useNis) {
this.useNis = useNis;
    } 
```

在我的 hbm.xml 文件中，以下是我唯一的行

```
<property name="useNis" type="yes_no" column="USENIS" not-null="true"/> 
```

在 abc.jsp，我有这个代码

```
<form:checkbox path="useNis"/>
<input type="hidden" value="1" name="_useNis"/> 
```

在 xyz.jsp 中，我有这些行

```
<c:choose>
<c:when test="${Location.useNis==true}">
<button type="submit" name="_eventId_searchLoadKeys"><fmt:message key="SEARCH" /></button> 
</c:when>
<c:otherwise>
<button type="submit" name="_eventId_searchNisLoadKeys"><fmt:message key="SEARCH" /></button>
</c:otherwise>
</c:choose> 
```

`<c:when test="${Location.useNis==true}">`... xyz.jsp 中的这一行应该检查是否选中了复选框！！！如果解决了，我会得到我想要的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:57:08.140

由于在客户端更改了复选框，因此您可以在第一个 JSP 中完全拥有逻辑的唯一方法是使用客户端代码。即JavaScript。

而“WebFlow”的做法是让复选框绑定到模型属性，并在流程配置文件中使用`decision-state`or`action-state`来检查该属性的值，以便决定`view-state`要转换到下一个 JSP 中的哪一个.

flow.xml 部分的示例：

```
<var name="checkboxForm" class="package.CheckboxFormBean"/>

<view-state id="start" view="start.jsp" model="checkboxForm">
    <transition on="submit" to="checkCheckbox"/>
</view-state>

<decision-state id="checkCheckbox">
    <if test="checkboxForm.checked" then="abc" else="xyz"/>
</decision-state>

<view-state id="abc" view="abc.jsp"/>

<view-state id="xyz" view="xyz.jsp"/> 
```

您的`package.CheckboxFormBean`班级将有一个`boolean isChecked()`方法。

# javascript - window.print() 打印空白页

> ID：11432081
> 
> 赞同：3
> 
> 时间：2012-07-11T11:53:04.190
> 
> 标签：javascript

打印时出现空白页。打印边框（可能是框架）。但不是框架内的内容。如果我们手动打印新页面，它将被正确打印。为什么会这样？

```
var printwindow = window.open('', '', 'fullScreen=no');
printwindow.document.write('<iframe id="docPrint" onLoad="window.print()" width="100%" height="100%" src="http://localhost:8080/hiring/docs/Keneth _1340800082258/Keneth _resume_1340800082258.pdf"></iframe>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:02:54.413

这在 JavaScript 中是不可能的。

我不知道您的服务器是用哪种语言编写的，但可以让您的 PDF[自动打印](http://www.gnostice.com/nl_article.asp?id=157&t=Create_an_Auto-Print_PDF)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:57:59.250

由于您是动态注入它，因此请尝试`/`转义`</iframe>`：

```
'.....<\/iframe>' 
```

也适用`onload`于窗口而不是 iframe：

```
printwindow.onload = printwindow.print; 
```

所以试试这个：

```
var printwindow = window.open('', '', 'fullScreen=no');
printwindow.document.write('<iframe id="docPrint" width="100%" height="100%" src="http://localhost:8080/hiring/docs/Keneth _1340800082258/Keneth _resume_1340800082258.pdf"></iframe>');
printwindow.onload = printwindow.print; 
```

我不确定浏览器是否会获取您的 pdf 文件并打印它，如果 pdf 直接在浏览器中打开，那么浏览器 pdf 插件中有一个单独的打印选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:59:07.480

这里的问题是 iframe 中的 window.print() 指的是包含 iFrame 的窗口，而不是其中的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T17:16:40.387

我在寻找其他问题，发现它打开了，所以试着去做。

**观看加载您的 iframe 并获取其中的内容，因为您必须处理来自此 iframe 的加载，或者您可以 ajax 获取整个页面并将其保存在 iframeContent**

```
let iframeContent = document.getElementById("docPrint").innerHTML;
const iframePage = window.open('', 'PRINT', 'height=400,width=600');
iframePage.document.write(iframeContent);
iframePage.document.close();
iframePage.focus();
iframePage.onload = relatorio.print; 
```

# c# - 限制线程池中使用的处理器数量

> ID：11432084
> 
> 赞同：4
> 
> 时间：2012-07-11T11:53:17.737
> 
> 标签：c#, .net, multithreading, threadpool

有没有办法限制 ThreadPool 对象将使用的处理器数量？根据文档，“您不能将工作线程的数量或 I/O 完成线程的数量设置为小于计算机中处理器数量的数字。”

那么如何限制我的程序不消耗所有处理器呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T13:03:31.943

经过一些实验，我想我有这个东西。我注意到`ThreadPool`将系统中的处理器数量视为**当前进程可用的处理器数量**。这对您有利。

我的 CPU 中有 4 个内核。尝试`SetMaxThreads`与 2 通话：

```
ThreadPool.SetMaxThreads(2, 2); 
```

失败，因为我有 4 个核心，所以数字保持在初始值（我的系统为 1023 和 1000）。

但是，就像我最初所说的那样，`ThreadPool`仅考虑进程可用的处理器数量，我可以使用`Process.ProcessorAffinity`. 这样做：

```
Process.GetCurrentProcess().ProcessorAffinity = new IntPtr(3); 
```

将可用处理器限制为前两个内核（因为 3 = 11 二进制）。再次调用`SetMaxThreads`：

```
ThreadPool.SetMaxThreads(2, 2); 
```

应该像魅力一样工作（至少它对我有用）。只需确保在程序启动时使用关联设置！

当然，我不会鼓励这种**hack**，因为无论如何你的进程在其执行的整个过程中都会被有限数量的核心卡住。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T12:19:07.120

线程池专门设计用于消除手动管理线程的所有麻烦。OS 任务调度器已经研究了很多年，并且在调度任务执行方面做得非常好。调度程序考虑了多个选项，例如线程优先级、内存位置和与处理器的接近程度等。除非您对这些进程有深入的了解，否则最好不要设置线程亲和性。

如果我可以引用[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684251%28v=vs.85%29.aspx)

> 线程亲和性强制线程在特定的处理器子集上运行。通常应避免设置线程亲和性，因为它会干扰调度程序跨处理器有效调度线程的能力。这会降低并行处理产生的性能增益。**线程亲和性的适当使用是测试每个处理器。**

可以设置`Thread`亲和性（相关[帖子](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/a55733db-cac0-4ccb-a3cc-a584742b41f9/)），您需要为此创建自己的线程对象（而不是来自线程池的对象）。据我所知，您不能为池中的线程设置线程亲和性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:00:26.803

由于 SetMaxThreads 不允许您设置否。线程数低于 no。处理器的最佳选择是在 TPL 中编写自己的 TaskScheduler，通过对任务进行排队来限制并发性。然后，您可以使用该调度程序创建任务，而不是将项目添加到线程池。

请参阅 [如何：创建限制并发程度的任务计划程序](http://msdn.microsoft.com/en-us/library/ee789351)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T12:02:01.480

您通常不会限制线程池，而是限制程序一次生成的线程数。[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)允许您设置MaxDegreeOfParallelism [，](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism%28VS.100%29.aspx)或者您可以使用[Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)。

# php - 如何使用 .php 将我的分数值（在 flash/actionscript 3 中）发送到数据库

> ID：11432085
> 
> 赞同：0
> 
> 时间：2012-07-11T11:53:18.467
> 
> 标签：php, actionscript-3, flash, post

我有一个Flash游戏。我想通过 .php 将我的分数发送到数据库。我怎样才能做到这一点？我已经写了一些帖子，但我无法弄清楚如何。我应该在 actionscript 3 端和 php 端做什么？我的数据库名称是 my_db，我的变量是 _score。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:11:48.093

首先，您需要创建一个 URLLoader 并将要发送的变量存储到请求的标头中。加载 URL 并发送变量后，我们监听 COMPLETE 事件，以便我们可以将变量从 PHP 中获取回 Flash。

**动作脚本 3 代码：**

```
private function SendScore(score:int) {
    //Use URLVariables Class to store our Variables and send them to our URL
    var variables:URLVariables = new URLVariables();
    //you can create as many variables you want (variables.variablename);
    variables.score = score;
    //URLLoader to load the URL
    var urlloader:URLLoader = new URLLoader;
    //Simple URLRequest with our URL
    var urlrequest:URLRequest = new URLRequest('http://www.mysite.com');
    //We set the method to POST. You can also use GET
    urlrequest.method = URLRequestMethod.POST;
    //We declare our set of variables to the data of our urlrequest
    urlrequest.data = variables;

    //We load the URL           
    urlloader.load(urlrequest);
    //We need to listen to an Event.COMLETE when we want to load variables FROM PHP
    urlloader.addEventListener(Event.COMPLETE, CompleteHandler, false, 0, true);
    //With  the listening to IOErrorEvent.IO_ERRORwe can intercept an error and can use it for Debugging
    urlloader.addEventListener(IOErrorEvent.IO_ERROR , ErrorHandler, false, 0, true);
}

//CompleteHandler will be used when the Load of the URL is completed
private function CompleteHandler(e:Event) {
    //Received Variables from PHP script
    var vars:URLVariables = new URLVariables(e.target.data);
    //You can access all variables from PHP with vars.xxxx
    //Example: vars.var1, vars.var2
    if(vars.success) trace('Saving succeeded');
    else ('Saving failed');
}

//ErrorHandler to receive error messages and don't fire exception errors
private function ErrorHandler(e:IOErrorEvent) {
    trace('Error occured');
} 
```

在 PHP 中，我们通过 Flash 的 POST 方法接收变量，并且可以将它们与 $_POST['xxx'] 一起使用。我们将分数插入数据库，然后检查 INSERT 是否成功，然后将此变量发送回“浏览器”/Flash。

**PHP 代码（我使用 PDO 进行数据库操作： http: [//php.net/manual/de/book.pdo.php](http://php.net/manual/de/book.pdo.php)）：**

```
try {
    //Establishing database connection with PDO
    $DB = new PDO($dsn, $user, $pw, array(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true));
} catch (PDOException $e) {
    //Error catching
    print "Connection to Database failed: " . $e->getMessage() . "<br />";
    die();
}

//Create a SQL statement, prepare it and execute it to INSERT the data into database
//the "variables.score" from AS3 can be read with $_POST['score'], cause we used POST as method
$sql = "INSERT INTO my_db (is_score) VALUES ('".$_POST['score']."');";
$stmt = $DB->prepare($sql);
$stmt->execute();

//Here we send back a variable to AS3:
//If you want to send more variables back use the & sign to append more variables
//example: 'succeds=true&var1=this&var2=there'
//Can be read in CompleteHandler with vars.success
if($stmt->rowCount() > 0) echo('success=true');
else echo('success=false'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:57:44.667

最简单的方法是从 Flash 应用程序中调用 php Web 脚本，使用 HTTP GET 将新分数发送到 URL。使用 URLLoader。然后 PHP 脚本可以向 Flash 应用程序返回一个确认，表明一切正常。

[这是一个关于如何使用 URLLoader 的示例](http://www.republicofcode.com/tutorials/flash/as3externaltext/)，简单的 PHP 知识就足够了。

# python - 分发使用 SWIG/CMake 创建的 Python 库

> ID：11432090
> 
> 赞同：1
> 
> 时间：2012-07-11T11:53:32.550
> 
> 标签：python, windows, installation, cmake, swig

我们有一个 C++/Fortran 软件项目，其中包含使用 SWIG 生成的 Python 前端。我们使用 CMake 在各种平台（Linux、Windows、OS X）上构建项目，这在大多数情况下都可以正常工作。我们使用的编译器取决于平台（Linux 上的 gcc 或 clang，Mac 上的 XCode+gfortran，Windows 上的 MinGW）。

现在，安装 C++ 编译器、CMake、SWIG 等并编译对大多数用户来说有点太多了，所以我们希望能够使用简单的二进制安装程序（Windows 中的 .exe 文件，deb-package 中的Ubuntu 等）。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:17:56.900

如果您已经在使用 CMake，我会推荐[CPack](http://www.cmake.org/Wiki/CMake%3aPackaging_With_CPack)。

这是[v2.8.8](http://www.cmake.org/cmake/help/v2.8.8/cpack.html)的文档，或者您可以运行`cpack --help`以获取更多信息。

# ruby-on-rails - 在 ActionMailer 中暂停发送电子邮件

> ID：11432091
> 
> 赞同：2
> 
> 时间：2012-07-11T11:53:34.083
> 
> 标签：ruby-on-rails, email, actionmailer

在我的 Rails 应用程序中，我想暂时停止为特定用户发送电子邮件（例如，当我因配额而被退回时），直到用户确认他能够再次接收电子邮件。

我对所有邮件类都有一个共同的超类。我总是`setup_email`在发送邮件之前调用一个方法。

打电话的最佳地点在哪里`@user.mail_suspended?`？

这是一些简化的示例应用程序，我使用 Rails 2.3：

```
# Common super class for all Mailers
class ApplicationMailer < ActionMailer::Base

  protected
    def setup_mail(user)
      @recipients = user.email
      @from = ...
    end
end

# Specific Mailer for User model
class UserMailer < ApplicationMailer

  def message(user, message)
    setup_mail(user)
    @subject = "You got new message"
    @body[:message] = message
  end
end

# Use the UserMailer to deliver some message
def MessagesController < ApplicationController

  def create
    @message = Message.new(params[:message])
    @message.save
    UserMailer.deliver_message(@message.user, @message)
    redirect_to ...
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:08:38.623

我通过设置`ActionMailer::Base.perform_deliveries`为false解决了这个问题：

```
def setup_mail(user)
  email = user.default_email
  if email.paused?
    ActionMailer::Base.perform_deliveries = false
    logger.info "INFO: suspended mail for #{user.login} to #{email.email})"
  else
    ActionMailer::Base.perform_deliveries = true
  end
  # other stuff here
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T22:38:20.700

我不会普遍设置 perform_deliveries，只是每条消息，例如

```
after_filter :do_not_send_if_old_email

def do_not_send_if_old_email
  message.perform_deliveries = false if email.paused?
  true
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-10T21:49:32.570

我尝试了很多方法，但除了这个没有人能帮助我。

```
class ApplicationMailer < ActionMailer::Base
  class AbortDeliveryError < StandardError; end

  before_action :ensure_notifications_enabled
  rescue_from AbortDeliveryError, with: -> {}

  def ensure_notifications_enabled
    raise AbortDeliveryError.new unless <your_condition>
  end

  ...

end 
```

1.  使一个类继承`standardError`以引发异常。
2.  检查条件，如果为假则引发异常。
3.  使用空 lambda 处理该异常。

> 空的 lambda 会导致 Rails 6 只返回一个 ActionMailer::Base::NullMail 实例，它没有被传递（就像你的邮件方法没有调用邮件一样，或者过早返回）。

# c# - 从 ftp 服务器下载文件时“底层连接已关闭”

> ID：11432101
> 
> 赞同：12
> 
> 时间：2012-07-11T11:54:07.047
> 
> 标签：c#

我想从 ftp 服务器下载文件。我已经编写了以下代码来从 ftp 下载文件

```
public void downloadFile(string FTPAddress, string filename, string username, string password, string destFile)
{
    try
    {
        FtpWebRequest request = FtpWebRequest.Create(FTPAddress + filename) as FtpWebRequest;
        request.Method = WebRequestMethods.Ftp.DownloadFile;
        request.Credentials = new NetworkCredential(username, password);
        request.UsePassive = true;
        request.UseBinary = true;
        request.UseBinary = true;
        request.KeepAlive = false; //close the connection when done
        request.Timeout = 60000;
        //Streams
        using (var response = request.GetResponse())
        {

            using (Stream reader = response.GetResponseStream())
            {
                byte[] buffer = new byte[1024];
                using (Stream streamFile = File.Create(destFile))
                {
                    while (true)
                    {
                        int bytesRead = reader.Read(buffer, 0, buffer.Length);
                        if (bytesRead == 0)
                        {
                            break;
                        }
                        else
                        {
                            streamFile.Write(buffer, 0, bytesRead);

                        }
                    }
                }
            }
        }
    }
    catch(Exception e)
    {
        Console.WriteLine(e.Message);             
    }
} 
```

但是当运行这段代码给我异常时：

> 底层连接已关闭：接收时发生意外错误。

有什么问题可以帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-01T05:47:09.090

建议 1：明确将超时设置为无限。

```
request.Timeout = -1; 
```

建议2：捕捉更具体的异常类型WebException，并检查WebExceptionStatus。

建议 3：打开 System.Net 的跟踪。

我已经为您的情况不适用的两个来源设置了 TraceLevel。

[如何：配置网络跟踪](https://msdn.microsoft.com/en-us/library/ty48b824%28v=vs.110%29.aspx)

```
<configuration>
  <system.diagnostics>
    <sources>
      <source name="System.Net" tracemode="includehex" maxdatasize="1024">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.Cache">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.Http">
        <listeners>
          <add name="System.Net "/>
        </listeners>
      </source>
      <source name="System.Net.Sockets">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.WebSockets">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="System.Net" value="Verbose"/>
      <add name="System.Net.Cache" value="Off"/>
      <add name="System.Net.Http" value="Off"/>
      <add name="System.Net.Sockets" value="Verbose"/>
      <add name="System.Net.WebSockets" value="Off"/>
    </switches>
    <sharedListeners>
      <add name="System.Net"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="network.log"
      />
    </sharedListeners>
    <trace autoflush="true"/>
  </system.diagnostics>
</configuration> 
```

# c# - 客户端/服务器通信 WPF

> ID：11432106
> 
> 赞同：-1
> 
> 时间：2012-07-11T11:54:42.297
> 
> 标签：c#, wpf, tcp-ip

我发现这个为控制台应用程序编写的非常有用的程序：

[http://www.codeproject.com/Articles/1415/Introduction-to-TCP-client-server-in-C](http://www.codeproject.com/Articles/1415/Introduction-to-TCP-client-server-in-C)

我运行它并且它可以工作，但我想要用 WPF 做同样的事情。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:09:05.007

您创建一个新的 WPF 应用程序，将`serv`类复制到一个新文件中并将其包含在您的项目中，在 MainWindow 构造函数中编写其他内容。

# java - Java 和 Javascript 中的地图

> ID：11432107
> 
> 赞同：0
> 
> 时间：2012-07-11T11:54:42.913
> 
> 标签：java, javascript, iterator, hashmap, liferay

我需要将一个`HashMap`对象从支持 bean (JSF) 传递给 JavaScript 并对其进行迭代。

当我在 javascript 中获取对象时，我检查它不为空但不能迭代。

有什么`Map`可以在我的场景中使用的吗？或者，如何将我的`HashMap`对象转换为可以用 jQuery 迭代的普通 JavaScript 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:58:13.457

试试[JSON](https://en.wikipedia.org/wiki/JSON)。您可以将一些 Java 对象转换为 JSON 并使用 JavaScript 读取它。那么你必须找到一种通信方式，也许是[AJAX](https://en.wikipedia.org/wiki/Ajax_%28programming%29)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:01:58.070

您可以使用[GSON](http://code.google.com/p/google-gson/)等免费库将对象转换为[JSON](https://en.wikipedia.org/wiki/JSON)。Jquery 将能够通过[$.ajax](http://api.jquery.com/category/ajax/)接收它并使用[$.each](http://api.jquery.com/each/)对其进行迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:02:54.757

如果您不使用 JSON，则可以将地图值放入隐藏元素中。[定义列表](http://www.w3schools.com/html/html_lists.asp)是地图的自然匹配：

```
<dl>
  <dt>Coffee</dt>
  <dd>- black hot drink</dd>
  <dt>Milk</dt>
  <dd>- white cold drink</dd>
</dl> 
```

你也可以使用一张桌子。

这是BalusC 的一个[很好的概述，其中包含 JSF 到 JS 通信的不同技术：](http://balusc.blogspot.de/2009/05/javajspjsf-and-javascript.html)

# javascript - 如何在three.js中创建地形？

> ID：11432108
> 
> 赞同：2
> 
> 时间：2012-07-11T11:54:44.860
> 
> 标签：javascript, three.js

我知道，我必须创建一个有很多段的平面，但是之后如何修改顶点的 y 位置？

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T13:21:38.027

有一个例子：http:
[//mrdoob.github.com/three.js/examples/webgl_geometry_terrain.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_terrain.html)

# php - 使用 PBKDF2 在 MySQL 数据库中存储密码和盐

> ID：11432111
> 
> 赞同：2
> 
> 时间：2012-07-11T11:54:55.007
> 
> 标签：php, mysql, passwords, hash, pbkdf2

我一直在尝试使用 pbkdf2 使我的用户密码真正安全。

密码哈希可以很好地进入数据库，但盐不是。

似乎盐包含 mysql 列不喜欢的外来字符。

我的“用户”表中的所有列都是 UTF8_unicode_ci。

这是我的密码哈希：

```
$size = mcrypt_get_iv_size(MCRYPT_CAST_256, MCRYPT_MODE_CFB);
$salt = mcrypt_create_iv($size, MCRYPT_DEV_RANDOM);

$passHash = pbkdf2('SHA512', $pass, $salt, 8192, 256) ;

include("dbconnect.php") ;

$result = $dbh->prepare("INSERT INTO users (name, email, qq, password, salt)VALUES(?, ?, ?, ?, ?)") ;
    $result->bindParam(1, $name, PDO::PARAM_STR) ;
    $result->bindParam(2, $email, PDO::PARAM_STR) ;
    $result->bindParam(3, $qq, PDO::PARAM_STR) ;
    $result->bindParam(4, $passHash, PDO::PARAM_STR) ;
    $result->bindParam(5, $salt, PDO::PARAM_STR) ;
$result->execute() ; 
```

和 pbkdf2：

```
/*
 * PBKDF2 key derivation function as defined by RSA's PKCS #5: https://www.ietf.org/rfc/rfc2898.txt
 * $algorithm - The hash algorithm to use. Recommended: SHA256
 * $password - The password.
 * $salt - A salt that is unique to the password.
* $count - Iteration count. Higher is better, but slower. Recommended: At least 1000.
* $key_length - The length of the derived key in bytes.
* $raw_output - If true, the key is returned in raw binary format. Hex encoded otherwise.
* Returns: A $key_length-byte key derived from the password and salt.
*
* Test vectors can be found here: https://www.ietf.org/rfc/rfc6070.txt
*
* This implementation of PBKDF2 was originally created by https://defuse.ca
* With improvements by http://www.variations-of-shadow.com
*/
function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false){
$algorithm = strtolower($algorithm);
if(!in_array($algorithm, hash_algos(), true))
    die('PBKDF2 ERROR: Invalid hash algorithm.');
if($count <= 0 || $key_length <= 0)
    die('PBKDF2 ERROR: Invalid parameters.');

$hash_length = strlen(hash($algorithm, "", true));
$block_count = ceil($key_length / $hash_length);

$output = "";
for($i = 1; $i <= $block_count; $i++) {
    // $i encoded as 4 bytes, big endian.
    $last = $salt . pack("N", $i);
    // first iteration
    $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
    // perform the other $count - 1 iterations
    for ($j = 1; $j < $count; $j++) {
        $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
    }
    $output .= $xorsum;
}

if($raw_output)
    return substr($output, 0, $key_length);
else
    return bin2hex(substr($output, 0, $key_length));
} 
```

* * *

另外，我刚刚注意到它为相同的密码存储了完全不同的哈希值。

我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:44:14.263

很难对“我这样做对吗？”这样宽泛的问题给出准确的答案。我可以说，在散列之前对密码进行加盐处理的全部目的是使生成的散列在用户之间是唯一的。因此，为相同的输入获得不同的输出是一件好事。查找“字典攻击”以获取有关原因的更多信息。

至于您的代码，听起来您真正想知道的是为什么您的盐没有存储到数据库中。我能想到的调试步骤，没有更具体的细节

*   $salt 可能是假的， mcrypt_create_iv 出错时返回假（不太可能是因为您上面提到的哈希输出差异，但值得检查。
*   正如您所怀疑的那样，无法识别输出字符。在添加到您的准备之前，您可以尝试将数据库列类型转换为 varbinary 并使用字符串转换为二进制或十六进制解码器。
*   尝试使用不同字符编码的列类型，看看你的盐可以进入哪种列类型。UTF-8 对每个字符使用可变数量的字节，这让我在处理绝对的事情时感到不舒服。盐和散列通常被认为是固定的位字段，为方便起见，通常以十六进制格式表示。

如果您提供服务器环境、php 版本、mysql 版本等以及一些未正确存储的盐样本，我也许可以缩小问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-11T14:23:38.733

在存储到 varchar 列之前，您应该[将](http://php.net/manual/en/function.base64-encode.php "转变")结果转换为[base64 编码。](http://en.wikipedia.org/wiki/Base64 "base64 编码")Base64 编码基本上将字节数组转换为 ASCII 范围内的可显示（因此是 SQL 可存储）字符。

# c - 如何通过 getaddrinfo 限制建议端口的数量

> ID：11432112
> 
> 赞同：0
> 
> 时间：2012-07-11T11:54:57.520
> 
> 标签：c, linux, tcp

我的一个独立 java 应用程序（没有可用的资源）选择随机可用的端口来监听。
在这个阶段，我假设它使用**getaddrinfo**系统调用来获取要绑定的地址。

由于我正在维护数百个具有分配端口的各种服务器，因此黑色应用程序有时会启动并选择“分配”端口之一，这会导致我的小型服务器在启动时失败......

我想知道有没有办法限制操作系统提出的端口数量？
对系统配置解决方案最感兴趣，
但如果没有其他解决方案，我也可以破解**bind()/getaddrinfo**（这也需要一些点击......）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:01:43.880

您必须能够从 proc 条目中控制它 - 例如，这是一个系统范围的设置：

> /proc/sys/net/ipv4/ip_local_port_range

您可以修改它们。或者可能有用于相同目的的[实用程序。](http://cyberelk.net/tim/software/portreserve/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:48:55.093

如果操作系统范围的更改不是您的想法，请配置 JVM 的 Java 安全管理器，以便为您要保留的任何端口号`SecurityManager.CheckListen(NNN)`抛出异常。`SecurityException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T21:10:45.623

看看： [http ://www.tldp.org/LDP/solrhe/Securing-Optimizing-Linux-RH-Edition-v1.3/chap6sec70.html](http://www.tldp.org/LDP/solrhe/Securing-Optimizing-Linux-RH-Edition-v1.3/chap6sec70.html)

这是我的问题的解决方案，而不是我可以限制端口范围

# java - 无法使用 tidy 和 Xpath 在 Java 中检索 Web 数据

> ID：11432121
> 
> 赞同：0
> 
> 时间：2012-07-11T11:55:40.753
> 
> 标签：java, xpath, tidy, xmlnode

我想做的是从 XHTML 文件中抓取一个简单的内部 HTML。我已将搜索范围缩小到元素节点，但未能检索到信息。

请注意：元素节点没有子节点。这样做我得到一个空指针异常

这是 HTML 片段

```
 <div id="dvTitle" class="titlebtmbrdr01" style="line-height: 22px;">BAJAJ AUTO LTD.       </div> 
```

另请注意，此文件的命名空间为 [http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)

你可以看到我有我想要的 div 元素`BAJAJ AUTO LTD`。

这是我正在使用的代码

```
 import java.io.IOException;
     import java.net.MalformedURLException; 
      import java.net.URL;
      import java.util.Vector;

    import javax.xml.xpath.XPath;
    import javax.xml.xpath.XPathConstants;
    import javax.xml.xpath.XPathExpression;
      import javax.xml.xpath.XPathExpressionException;
    import javax.xml.xpath.XPathFactory;

    import jxl.read.biff.BiffException;
    import jxl.write.WriteException;
    import jxl.write.biff.RowsExceededException;

    import org.w3c.dom.Document;
    import org.w3c.dom.Element;
      import org.w3c.dom.Node;
      import org.w3c.dom.NodeList;
    import org.w3c.dom.Text;

    import com.sun.org.apache.xml.internal.serialize.Serializer;

    public class BSEQuotesExtractor implements valueExtractor {

@Override
public Vector<String> getName(Document d) throws XPathExpressionException,            RowsExceededException, BiffException, WriteException, IOException {
    // TODO Auto-generated method stub
    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();
    xpath.setNamespaceContext(new MynamespaceContext());

    Object result = xpath.evaluate("//*[@id='dvTitle']",d, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;

    System.out.println(nodes.getLength());
    System.out.println(nodes.item(0).getNodeName());
    System.out.println(nodes.item(0).getAttributes().item(1).getNodeName());
    System.out.println(nodes.item(0).getAttributes().item(1).getNodeValue());
    System.out.println(nodes.item(0).getTextContent());

    return null;
}

public static void main(String[] args) throws MalformedURLException, IOException, XPathExpressionException, RowsExceededException, BiffException, WriteException{
    BSEQuotesExtractor q = new BSEQuotesExtractor();
    DOMParser parser = new DOMParser(new URL("http://www.bseindia.com/bseplus/StockReach/StockQuote/Equity/BAJAJ%20AUTO%20LTD/BAJAJAUT/532977/Scrips").openStream());
    Document d = parser.getDocument();
    q.getName(d);

}

        } 
```

这是我得到的输出

> 1
> 格
> dvTitle
> 空

现在为什么我得到那个空值？我应该得到`BAJAJ AUTO LTD`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:08:05.797

当我打开您的代码引用的[页面](http://www.bseindia.com/bseplus/StockReach/StockQuote/Equity/BAJAJ%20AUTO%20LTD/BAJAJAUT/532977/Scrips)`div`时，这对我来说实际上是空的：

```
<div class="titlebtmbrdr01" id="dvTitle" style="line-height: 22px;"></div> 
```

So perhaps you should save the page content to some file to examine if it is the same for you. If it is, but your browser displays things differently, then figure out what combination of cookies and other headers makes a difference there.

# c# - 使用 Cache.Add 时，如果密钥已经存在或它是否静默失败，是否会引发异常？

> ID：11432127
> 
> 赞同：4
> 
> 时间：2012-07-11T11:56:07.900
> 
> 标签：c#, asp.net, caching

**我到处读到，如果 Add 方法已经存在，它会失败，但它会抛出异常还是静默失败？**

我正在编写一个不应该存在的多线程 Web 应用程序，如果我覆盖缓存会导致问题，所以我不能使用 Insert 方法。

这是我可以做的事情吗：

```
try
{
    HttpContext.Current.Cache.Add("notifications", notifications, null,
      System.Web.Caching.Cache.NoAbsoluteExpiration, TimeSpan.FromHours(8),
      System.Web.Caching.CacheItemPriority.High, null);
}
catch
{
    //do whatever if notifications already exist
} 
```

感谢您的任何答案:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T12:39:18.983

`System.Web.Caching.Cache`被设计为在多线程 Web 应用程序中是线程安全的，并且多个线程可能会争用将相同的键添加到缓存中。所以这取决于你想如何处理这种竞争条件。

*   在许多情况下，您会将不可变数据插入缓存中，而不会关心哪个线程“赢得”比赛。所以你可以使用`Add`or `Insert`。

*   如果您想要“第一个获胜”，请使用该`Add`方法，如果您想要“最后一个获胜（并覆盖）”，请使用该`Insert`方法。

*   在插入/添加之前检查是否存在是没有意义的。另一个线程可能会在您检查之后和您尝试添加/插入之前插入该项目。

*   如果密钥已经存在，也`Add`不会`Insert`抛出异常。这样做是没有意义的，因为 Cache 是为无需锁定的线程安全插入而设计的。 `Add`将静默失败，并`Insert`覆盖。

*   顺便说一句，从缓存中读取时，不要检查是否存在，然后读取：

    ```
    if (Cache["MyKey"] == null)
    {
        // ... handle missing value
    }
    else
    {
        // ... a race condition means the item may have been removed here
        // before you get a chance to read it

        MyType value = (MyType) Cache["MyKey"];
    } 
    ```

    相反，从缓存中读取值并检查是否为空：

    ```
    MyType value = Cache["MyKey"] as MyType; // for reference types
    if (value == null)
    {
        // ... handle missing value
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:24:50.353

这很容易测试自己，但会引发错误。一个很好的实用功能：

```
 /// <summary>
    /// Places an item into the cache using absolute expiration.
    /// </summary>
    /// <param name="key">Key of the item being inserted</param>
    /// <param name="item">Item to insert</param>
    /// <param name="expireTime">Absolute expiration time of the item</param>
    public static void InsertIntoCacheAbsoluteExpiration(string key, object item, DateTime expireTime)
    {
        if (HttpContext.Current == null)
        {
            return;
        }

        lock (LOCK)
        {
            HttpRuntime.Cache.Remove(key);
            HttpRuntime.Cache.Add(
                key,
                item,
                null,
                expireTime,
                System.Web.Caching.Cache.NoSlidingExpiration,
                System.Web.Caching.CacheItemPriority.Normal,
                null);
        }
    } 
```

如果密钥不退出，删除不会抱怨。如果您想测试密钥是否已经存在，您可以随时检查

```
HttpRuntime.Cache.Get(key) != null 
```

只要您使用锁定变量，您就不会遇到这样的问题：您的检查显示缓存中没有某些内容，并且它显示在检查和添加之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:27:37.593

它默默地失败了。

```
using System.Web;
using System.Web.Caching;

class Program
{
    static void Main(string[] args)
    {
        Cache cache = HttpRuntime.Cache;

        string object1 = "Object1";
        string object2 = "Object2";

        cache.Add(
            "Key", object1, null, Cache.NoAbsoluteExpiration, new TimeSpan(0, 10, 0), CacheItemPriority.Normal, null);
        cache.Add("Key", object2, null, Cache.NoAbsoluteExpiration, new TimeSpan(0, 10, 0), CacheItemPriority.Normal, null);

        string cachedstring = (string)cache.Get("Key");

        Console.WriteLine(cachedstring);

        Console.ReadLine();
    }
} 
```

此控制台应用程序的输出是`Object1`.

# internet-explorer - 无效的论点。行：26 in main.js in IE

> ID：11432131
> 
> 赞同：1
> 
> 时间：2012-07-11T11:56:19.787
> 
> 标签：internet-explorer, google-maps, jquery

我的问题是，当我第一次加载页面时它没有出错，但是当我切换回此地图或从另一个选项卡切换回来时，它给了我以下错误消息：无效参数。行：26 字符：56 代码：0 URI：[http ://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/9/main.js](http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/9/main.js)

请帮助我的代码在这里... :(

```
 $start1=$makers['lat'];
$start2=$makers['lng'];
$name1=$makers['name'];
$end1=$makere['lat'];
$end2=$makere['lng'];
$name2=$makere['name'];

<script type="text/javascript">
    //<![CDATA[
$(document).ready(function(){ 

var cenLatlng = new google.maps.LatLng(<?php echo $start1;?>, <?php echo $start2;?>);
    var myOptions = {
                       zoom: 15,
                       center: cenLatlng,
                       mapTypeId: google.maps.MapTypeId.ROADMAP
                    }

    var map = new google.maps.Map(document.getElementById("map_det-<?php echo $trip_id;?>"),myOptions);

    var myLatlng = new google.maps.LatLng(<?php echo $start1;?>, <?php echo $start2;?>);
    var marker = new google.maps.Marker({
                                          position: myLatlng,
                                          map: map,
                                          title:"<?php echo $name1;?>"
                                       });

    var contentString = '<?php echo $name1;?>';

    var infowindow = new google.maps.InfoWindow({
                                                  content: contentString,
                                                  width:100,
                                                  height:50
                                               });

    // Start of newly added code block
    google.maps.event.addListener(marker, 'click', function() {
        <?
     $sql2=mysql_fetch_array(mysql_query("select pickpoint from trip_tbl where trip_id='$trip_id'"));
     $pickpoint=$sql2['pickpoint'];
$makers1=mysql_fetch_array(mysql_query("select * from markers where id='$pickpoint'"));
$name1=$makers1['name'];
    ?>
    alert("<?=$name1;?>");

});
});

 //]]>

  </script><div id="map_det-<?php echo $trip_id;?>" style="width:300px; height:200px; border:solid; border-color:#666; "></div> 
```

# typo3 - 如何在 TYPO3 页面中设置打印和另存为 pdf 图标

> ID：11432133
> 
> 赞同：1
> 
> 时间：2012-07-11T11:56:23.363
> 
> 标签：typo3

任何人都可以帮助我如何在 TYPO3 页面中设置打印并保存为 PDF 图标（功能）？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:36:02.977

Google 中有很多示例，我认为您应该浏览它们，以找到最适合您需求的示例。

一般来说，建议使用新的`PAGE`cObject 构建“历史上”的打印版本，该 cObject`typeNum`设置为`98`（当然这只是建议）通常会遵循这条线索，您应该通过在 Google 中搜索来找到许多示例和其他资源`typo3 typeNum 98`。

当您创建替代`PAGE`对象（并且可能还使用修改过的模板）时，您还需要在您的网页上添加一个与当前 URL 相同但带有附加参数的链接`&type=98`，当用户单击它时，TYPO3 将打开替代版本的页面。所以你可以在标题中添加一个 JS，它也将启动系统的打印对话框。

如果您不[熟悉](http://typo3.org/extensions/repository)`TypoScript`.

从前端的角度来看，PDF 渲染是相似的，但是很可能您需要使用一些额外的库，所以最好[从 repo 中搜索现成的解决方案](http://typo3.org/extensions/repository/?id=23&L=0&q=pdf)。

一般来说，PDF 版本可能很棘手，因此根据我的经验，我可以说现在有时最好完全避免使用 PDF 图标或使用链接到某些外部服务。当然，一切都取决于您的需求。请记住，有许多程序可以创建 PDF，因此如果不需要，可能不值得付出努力。

最后看看[AddThis](http://www.addthis.com/)小部件，它还可以用于轻松添加用于打印和在线 PDF 创建的图标，此外，您还可以通过电子邮件发送邀请，甚至在数百个社交门户上分享链接。最重要的是安装它就像通过 TypoScript 添加 HTML 代码的视图行一样。

# emacs - 无法打开 fi-site-init.el

> ID：11432135
> 
> 赞同：1
> 
> 时间：2012-07-11T11:56:28.487
> 
> 标签：emacs, lisp

最近我一直在尝试在我的 Linux 计算机上安装 ELI！我已按照[http://www.franz.com/emacs/](http://www.franz.com/emacs/)的指南进行操作！我也搜索了类似的错误并找到了这个线程[http://ubuntuforums.org/showthread.php?t=1646855](http://ubuntuforums.org/showthread.php?t=1646855) 但是与论坛中的人不同，我无法从*暂存*缓冲区加载 fi-site-init.el 文件. 通过使用 --debug-init 标志打开 emacs，我得到以下错误消息

```
 Debugger entered--Lisp error: (file-error "Cannot open load file" "fi-site-init.el")
  load("fi-site-init.el")
  eval-buffer(#<buffer  *load*> nil "/home/simon/.emacs" nil t)  ; Reading at buffer position 82
  load-with-code-conversion("/home/simon/.emacs" "/home/simon/.emacs" t t)
  load("~/.emacs" t t)
  #[nil "\205\264 
```

值得注意的是，在指南中他们有

> “/usr/local/acl82express/eli”

作为我的搜索路径

> “/usr/Documents/acl82express/eli”

作为路径（因为那里安装了 Allegro CL）

总而言之，这就是我写在 .emacs 文件中的内容

```
 (push "/usr/Documents/acl82express/eli" load-path)
  (load "fi-site-init.el")
  (setq fi:common-lisp-image-name "/usr/Documents/acl82express/alisp")
  (setq fi:common-lisp-image-file "/usr/Documents/acl82express/alisp.dxl")
  (setq fi:common-lisp-directory "/usr/Documents/acl82express") 
```

我很感谢任何帮助！

西蒙尼斯特罗姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:00:25.773

注意前面的“/”符号。我很确定它必须是“/usr/Documents/acl82express/eli”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:14:21.653

Documents 通常是用户主目录中的目录名称。通常`/home/{user}/Documents`在 {user} 是当前登录用户的位置找到它。`who am i | awk '{ print $1 }'`- 这是找出答案的方法，除非你忘记了:)

这个目录经常用~（波浪号）或`$HOME`环境变量作为别名，所以当进行路径扩展时，这些“$HOME/Documents”、“~/Documents”和“/home/{user}/Documents”都会指向同一个目录。

# java - 如何在jpanel上绘制椭圆

> ID：11432136
> 
> 赞同：0
> 
> 时间：2012-07-11T11:56:29.853
> 
> 标签：java, swing, graphics, jpanel

我有三个类：CanvasPanel、Drawline 和 DrawRectangle。

*   **CanvasPanel：**这是用于处理所有鼠标事件监听器。
*   **Drawline：**用于在 CanvasPanel 上绘制线条。
*   **DrawRectangle：**用于在 CanvasPanel 上绘制矩形。

这三个类都是扩展`JPanel`类。

所有组件的拖放都很好。但问题是当我将线拖到矩形上时，线已经从矩形后面消失了。你能给我解决方案或给我一些例子，所以我可以理解这是怎么回事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:01:24.167

[通过调用setOpaque](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setOpaque%28boolean%29) (false)使组件透明。

# c# - 类型“System.Net.Sockets.Socket”无法序列化

> ID：11432141
> 
> 赞同：0
> 
> 时间：2012-07-11T11:56:54.353
> 
> 标签：c#, asp.net, wcf, sockets

无法序列化类型“System.Net.Sockets.Socket”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。

我正在 WCF 中创建一项服务，该服务打开连接并向服务器发送消息，但是当我运行该服务时出现上述错误。我不知道如何用数据契约属性标记它或如何解决问题。

```
public class Service1 : IService1
{

    public void Connect(String a , String b)
    {

        int hit = Convert.ToInt32(a);

        int delay = Convert.ToInt32(b);
        delay = delay * 1000; 

 // I have eliminated the log making part       string LogPath = "C:\\VoltTestApp\\Logs\\";

        for (int i = 1; i <= hit; i++)
        {

            try
            {
                TcpClient tcpClient = new TcpClient("10.111.13.72", 80);
                Console.WriteLine("Initialized Socket  .............\n");
                Socket socket = tcpClient.Client;
                string str = "ID_T$";

                try
                { // sends the text with timeout 10s
                    Console.WriteLine("Going To Send Request  .............\n");
                    Send(socket, Encoding.UTF8.GetBytes(str.Trim()), 0, str.Length, 10000);
               }

                socket.Close();
                tcpClient.Close();
                Console.WriteLine("Socket Closed  .............\n");
            }

            Thread.Sleep(delay);
        }

    }

    public  void Send(Socket socket, byte[] buffer, int offset, int size, int timeout)
    {
        try
        {
            int startTickCount = Environment.TickCount;
            int sent = 0;  // how many bytes is already sent
            do
            {
                if (Environment.TickCount > startTickCount + timeout)
                    throw new Exception("Timeout.");
                try
                {
                    sent += socket.Send(buffer, offset + sent, size - sent, SocketFlags.None);
                }
                catch (SocketException ex)
                {
                    if (ex.SocketErrorCode == SocketError.WouldBlock ||
                        ex.SocketErrorCode == SocketError.IOPending ||
                        ex.SocketErrorCode == SocketError.NoBufferSpaceAvailable)
                    {
                        // socket buffer is probably full, wait and try again
                        Thread.Sleep(30);
                    }
                    else
                        throw ex;  // any serious error occurr
                }
            } while (sent < size);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:15:49.057

您无法明智地在对 wcf 服务的调用之间保持 tcp 连接。在您的情况下，我将从服务合同中删除 Connect 方法，在您的 Service1 类中将其更改为私有，从您的发送方法中删除套接字参数（在 IService1 及其在 Service1 类中的实现中）并调用您的连接方法您的发送方法（以便每次发送都连接和断开连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:22:51.783

在这种情况下，可能是因为您的服务上有一个以 Socket 作为参数的公共方法。这很自然地在尝试服务发现时无法正确序列化。

如果`Send`仅在内部使用，请将其设置为私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:00:18.427

该错误消息具有误导性，解决方案是不要添加`DataContractAttribute`到`System.Net.Sockets.Socket`. 问题是您无法通过网络发送套接字。更具体地说，您不能对其进行序列化，并且要发送它，您必须能够对其进行序列化。

您需要找到一个不涉及通过网络发送套接字（或将其保存到磁盘/数据库）的解决方案。

# jquery - 将值更改为占位符（输入字段）

> ID：11432144
> 
> 赞同：3
> 
> 时间：2012-07-11T11:57:09.127
> 
> 标签：jquery, replace

我想用 jQuery 将 value 属性更改为占位符。所以结果会是这样的

原来的

```
<input type="text" value="Enter name" /> 
```

我想在上面更改为

```
<input type="text" placeholder="Enter name" /> 
```

我只找到了更改“”之间的实际文本而不是之前的文本的解决方案。所以replaceWith，replaceAll 似乎不起作用。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T12:00:51.873

您可以使用

`.removeAttr('value')`删除属性

**例子：**

```
$('input[type=text]').removeAttr('value'); 
```

并添加新属性

`.attr('placeholder','Enter name')`

**例子：**

```
$('input[type=text]').attr('placeholder','Enter name'); 
```

**正如建议的那样`rcdmk`**

**您可以链接该方法：**

```
 $('input[type="text"]').each(function() { 
        var $this = $(this); 
        $this.attr("placeholder", $this.attr("value")).removeAttr("value"); 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T09:30:29.713

```
<input type="text" id="searchInput" value="enter text...">

var plcehldr = "enter text...";    
$( "#searchInput" ).focusin(function() {
  $(this).removeAttr("value");
});

$( "#searchInput" ).focusout(function() {
   $(this).attr("value",plcehldr);
}); 
```

[http://jsfiddle.net/ipsjolly/2qutf/14/](http://jsfiddle.net/ipsjolly/2qutf/14/)

# python - Django 贝宝集成

> ID：11432146
> 
> 赞同：0
> 
> 时间：2012-07-11T11:57:18.100
> 
> 标签：python, django, paypal

我尝试使用外部 IPN 将我的 Django 网站与贝宝集成。我创建 Django 表单，将其发送到[https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr)，

一切都好，但是从贝宝返回我的网站后，我收到了 csrf_token 错误。Paypal 返回到我网站的索引页面。

我该如何解决。谢谢，

# java - 实例变量上的 Java 调用方法

> ID：11432147
> 
> 赞同：4
> 
> 时间：2012-07-11T11:57:20.780
> 
> 标签：java, coding-style

有两种方法：

> ```
>  String salary = company.getPerson(id).getData().getSalary();      
>  String postcode = company.getPerson(id).getData().getPostCode(); 
> ```

或者

> ```
> Data data = company.getPerson(id).getData();    
> String salary = data.getSalary();     
> String postcode = data.getPostCode(); 
> ```

哪个是首选方式，为什么？除了可读性之外还有什么好处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T12:03:31.780

如果此人不存在，我实际上更喜欢第三种选择

```
Person person = company.getPerson(id);
if(person != null) {
    Data data = person.getData();
    if(data != null) {
        String salary = data.getSalary();
        String postcode = data.getPostCode();
    }
} 
```

这取决于是否可能存在空值。如果您可以保证不会有空值，那么您可以消除部分/全部空值检查。

正如另一位用户在下面的评论中指出的那样，可能存在一种情况，即没有任何方法调用可以返回 null 在这种情况下，除非性能是一个问题，否则在我看来这真的取决于个人喜好。

即使没有空检查，我可能仍然希望像我一样将它们分成单独的调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:00:45.030

如果中间变量有可能为空，那么您应该使用第二个选项以及空检查

```
Data data = company.getPerson(id).getData();    
if (data != null){
    String salary = data.getSalary();     
    String postcode = data.getPostCode();
    // other code here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:02:56.243

这取决于您的 getter 方法的复杂性。例如，如果 getPerson(id) 方法很复杂，或者/和 getData() 方法很复杂，那么它可能会导致性能问题。

智能编译器可以克服这个问题，但不包括重复的代码部分。但总的来说，从我的角度来看，第二种方式更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T12:11:30.047

没有真正好的风格，这取决于上下文和您的需求。

采用 ：

```
 String salary = company.getPerson(id).getData().getSalary();      
 String postcode = company.getPerson(id).getData().getPostCode(); 
```

如果你需要**提高你的内存使用率**。

其他用途：

```
Data data = company.getPerson(id).getData();    
String salary = data.getSalary();     
String postcode = data.getPostCode(); 
```

如果你想**提高性能**。

为了可读性，这对我来说太主观了。老实说，两者都具有可读性。

第二个示例具有折射的优点，`company.getPerson(id)`并且该变量还允许执行一些验证而无需`company.getPerson(id)`再次调用。我经常喜欢这种风格，但是，*根据需要，如果 `getPersonne(id)`并且`getData()`不能返回 null* ，第一个解决方案可能会更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T12:00:55.497

出于重构/可读性和性能原因，我个人认为这是最好的解决方案：

```
Data data = company.getPerson(id).getData();    
String salary = data.getSalary();     
String postcode = data.getPostCode(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T12:02:21.793

你必须考虑性能。虽然“漂亮的代码”很棒，但如果有一些昂贵的东西，请保留对它的引用并重用它。

很可能`company.getPerson(id)`涉及到数据库查询来检索数据，所以虽然第一个选项看起来“更整洁”，但第二个选项可能更好。

但答案是“视情况而定”——如果每次通话都很便宜，您可以使用第一个选项。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-11T12:03:39.810

需要考虑的一件事是 getPerson(...) 或 getData() 可能返回 null 的情况。如果其中任何一个返回 null，您将获得 NullPointerException 奖励，因此答案可能取决于其他隐藏因素，而不仅仅是可读性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-11T12:03:47.987

```
 String salary = company.getPerson(id).getData().getSalary();      
 String postcode = company.getPerson(id).getData().getPostCode(); 
```

这不太可读，并且数据返回的范围`company.getPerson(id).getData()`仅在运行时，所以它会`garbage collected`在那个时候。

或者

```
Data data = company.getPerson(id).getData();    
String salary = data.getSalary();     
String postcode = data.getPostCode(); 
```

以上更具可读性，但您正在创建一个类型的引用变量，`Data`因此`garbage collection` 收集器将检查堆中“数据”的引用，然后如果发现它符合条件，那么它将收集。

# batch-file - 在批处理文件中检测文件夹中的两个文件

> ID：11432148
> 
> 赞同：0
> 
> 时间：2012-07-11T11:57:23.677
> 
> 标签：batch-file

我需要一个代码来检测是否有两个具有相同扩展名的文件，并且我需要它来执行不同的代码。

1.  检测文件夹是否是我需要的两个 *.txt 文件

2.  echo 此文件夹中有两个文本文件 请删除一个并继续

但是，如果只有一个文本文件，请保持代码运行

我目前正在使用此代码来检测文件夹中是否没有任何文件

```
If not exist Files\*.txt echo there is no lyrics 
```

也许如果我们也可以将其结合起来，例如

```
 if text file equal to 0 echo no lyrics

  if text file equal to 1 echo.

  if text file Gtr 1 ech there is more than on text file in the folder 
```

该代码将被使用两次，一次用于文本文件，另一次用于 .ogg 音频文件

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:24:03.300

`DIR /B`列出文件，每行一个，没有页眉或页脚信息

`FIND /C`计算匹配行数，`/V ""`匹配任意行

`FOR /F`处理命令的结果

```
for /f %%N in ('dir /b "Files\*.txt" ^| find /c /v ""') do (
  if %%N equ 0 echo No lyrics
  if %%N equ 1 echo(
  if %%N gtr 1 echo There is more than one text file in the folder
) 
```

# sql - 限制 postgreSQL 更新命令

> ID：11432155
> 
> 赞同：21
> 
> 时间：2012-07-11T11:57:41.780
> 
> 标签：sql, postgresql

我有一个给定结构的表，现在我想编写一个查询，将 2 xx 产品从状态 1 转移到状态 2。子代码目前与我无关。

```
master_code| child_code | status_code
-----------|------------|------------
    xx     |    xx1     |     1
    xx     |    xx2     |     1
    xx     |    xx3     |     1
    xx     |    xx4     |     2
    xx     |    xx5     |     2
    yy     |    yy1     |     3
    yy     |    yy2     |     2
    zz     |    zz1     |     1
    zz     |    zz2     |     1 
```

我已经实施了基本检查，当我使用

```
update only product_child
set product_status=1
where product_status=2 
```

所有三个 xx 都有代码 2，我想控制它，我希望只有一个 xx 会使用此命令更改代码

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-11T12:10:20.150

如果您不关心哪一行被更新，我会非常谨慎地这样做（请为此在表中添加一个 PK），那么您可以使用以下内容：

```
UPDATE
    product_child
SET
    product_status = 1
WHERE
    CTID IN ( SELECT CTID FROM product_child WHERE product_status = 2 and master_code = 'xx' LIMIT 1 ) 
```

CTID 是唯一的行标识符 - 通过将子选择限制为 1 条记录，我们将返回一个 CTID，该 CTID 对应于符合 WHERE 子句的行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T12:33:15.017

我找到了一个方法

```
update only product_child
set product_status =1
where product_child_code in (select product_child_code
                from product_child
                where product_code = get_product_code('Baby Crib') 
                and product_status = 2 
                limit 5) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-13T17:48:11.170

也许你应该用一个程序来做到这一点：

```
CREATE or replace FUNCTION  update_status() returns character varying as $$
declare
match_ret record;
begin
SELECT * INTO match_ret FROM product_child WHERE product_status = 2 LIMIT 1 for update ;
UPDATE product_child SET status_code = '1' where child_code = match_ret.child_code ;

return match_ret.child_code ;
commit;
end ;
$$ LANGUAGE plpgsql; 
```

然后调用它：

```
select * from update_status() 
```

编辑：你也可以用'with'来做到这一点：

```
WITH subRequest as (
SELECT child_code FROM product_child WHERE status = 2 LIMIT 1 FOR UPDATE
)
UPDATE product_child as p
FROM subRequest
WHERE p.child_code = subRequest.child_code ; 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-02T11:51:03.917

John D. 的答案是正确的。我只想补充一点，postgresql 可能会使用 oid，这是确保唯一标识符的好方法，所以我更喜欢这个解决方案：

UPDATE product_child SET product_status = 1 WHERE oid = ( SELECT oid FROM product_child WHERE product_status = 2 and master_code = 'xx' LIMIT 1 );

请注意，如果您的数据库没有 oid，您可以使用以下命令进行设置：

ALTER TABLE product_child SET WITH OIDS；

# python - 避免 subprocess.Popen 在 grep 中自动转义我的反斜杠

> ID：11432159
> 
> 赞同：0
> 
> 时间：2012-07-11T11:57:48.253
> 
> 标签：python, svn, grep, diff

我正在尝试在 python 中编写一个 svn 预提交钩子。其中一部分涉及检查 diff 文件以查看是否有任何实际的文件更改（而不仅仅是属性更改）。

我有一个可以在 shell 上正常执行的 grep 命令

```
grep "^\(Added: \|Modified: \|Deleted: \)" diff filename | grep -v 'svn:' 
```

但是，当我通过 subprocess.POpen 将其转义时，它会转义我所有的反斜杠，这会破坏正则表达式。

```
Executing command: ['grep', '"^\\Added: \\|Modified: \\|Deleted: \\)", ...] 
```

我该如何避免这种情况？

注意：我知道我可以在子流程之间传递结果，并且可以通过这种方式执行两个 grep。我需要帮助让第一个工作首先工作：/

NB2：我也尝试使用 filterdiff --clean 代替，但无法正常工作。搜索已添加、已修改或已删除的行，删除带有 'svn:' 的行并检查我有一些结果似乎可行。

Python代码：

```
command = ['grep', '"^\(Added: \|Modified: \|Deleted: \)"', filename]
sys.stdout.write('Executing command: %s\n' % (command))

p = subprocess.Popen(command,
stdin = subprocess.PIPE
stdout = subprocess.PIPE
stderr = subprocess.STDOUT
shell = True)
data = p.stdout.read()

if len(data) == 0:
    sys.stdout.write("Diff does not contain any file modifications./n")
    exit(0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:30:54.443

您需要考虑您希望`grep`在其命令行参数中看到的内容。

第一个参数必须是文字 string `"^\(Added: \|Modified: \|Deleted: \)"`，这意味着它*不应*包含双引号，而*应*包含反斜杠。

表达这种字符串的方法是使用 Python 原始字符串：

```
command = ['grep', r'^\(Added: \|Modified: \|Deleted: \)', filename] 
```

检查您实际运行的内容的一个好方法是替换`grep`为，`echo`这样您至少可以看到您传递给命令的内容。

# ruby-on-rails - 带有错误 ubuntu 的 Ruby 调试 ide

> ID：11432165
> 
> 赞同：2
> 
> 时间：2012-07-11T11:58:06.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-debug

当我想安装 ruby​​-debug 和 ruby​​-debug-ide 时，我遇到了太多错误。

像这样的错误（捆绑安装）：

```
Using ruby_core_source (0.1.5) 
Using linecache19 (0.5.13) 
Using rails (3.2.5) 
Using ref (1.0.0) 
Installing ruby-debug-base19 (0.11.24) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/bin/ruby extconf.rb 
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... no
/usr/local/lib/ruby/gems/1.9.1/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:39: Use RbConfig instead of obsolete and deprecated Config.
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... yes
checking for iseq.h... yes
checking for insns.inc... yes
checking for insns_info.inc... yes
checking for eval_intern.h... yes
creating Makefile

make
compiling breakpoint.c
compiling ruby_debug.c
ruby_debug.c:24:19: error: conflicting types for ‘rb_iseq_compile_with_option’
/usr/local/include/ruby-1.9.1/ruby-1.9.3-p125/vm_core.h:505:7: note: previous declaration of ‘rb_iseq_compile_with_option’ was here
ruby_debug.c: In function ‘context_jump’:
ruby_debug.c:2403:53: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
ruby_debug.c:2417:27: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
make: *** [ruby_debug.o] Error 1

Gem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.24 for inspection.
Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.24/ext/ruby_debug/gem_make.out
An error occurred while installing ruby-debug-base19 (0.11.24), and Bundler cannot continue.
Make sure that `gem install ruby-debug-base19 -v '0.11.24'` succeeds before bundling. 
```

在相同的解决方案上：

```
gem install ruby-debug-base or ruby-debug-base19 
```

同样的错误，

```
ERROR: Failed to build gem native extension. 
```

有人知道该怎么做吗？

# iphone - iOS：以自定义分辨率保存图像

> ID：11432169
> 
> 赞同：15
> 
> 时间：2012-07-11T11:58:25.713
> 
> 标签：iphone, objective-c, ios, xcode, ipad

嗨，我尝试捕获视图，然后将图像另存为照片库，但我需要为捕获的图像创建自定义分辨率，这是我的代码，但是当应用程序保存图像时，分辨率很低！

```
UIGraphicsBeginImageContextWithOptions(self.captureView.bounds.size, self.captureView.opaque, 0.0);

[self.captureView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * screenshot = UIGraphicsGetImageFromCurrentImageContext();

CGRect cropRect = CGRectMake(0 ,0 ,1435 ,1435);
CGImageRef imageRef = CGImageCreateWithImageInRect([screenshot CGImage], cropRect);
CGImageRelease(imageRef);

UIImageWriteToSavedPhotosAlbum(screenshot , nil, nil, nil);

UIGraphicsEndImageContext(); 
```

但 iPhone 的分辨率为：320 x 320，视网膜为：640 x 640

如果您能帮我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T07:47:52.633

您的代码非常接近。您需要做的是以自定义分辨率重新渲染屏幕截图。我修改了你的代码来做到这一点：

```
UIView* captureView = self.view;

/* Capture the screen shoot at native resolution */
UIGraphicsBeginImageContextWithOptions(captureView.bounds.size, captureView.opaque, 0.0);
[captureView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

/* Render the screen shot at custom resolution */
CGRect cropRect = CGRectMake(0 ,0 ,1435 ,1435);
UIGraphicsBeginImageContextWithOptions(cropRect.size, captureView.opaque, 1.0f);
[screenshot drawInRect:cropRect];
UIImage * customScreenShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

/* Save to the photo album */
UIImageWriteToSavedPhotosAlbum(customScreenShot , nil, nil, nil); 
```

请注意，如果捕获视图不是正方形，则图像将失真。保存的图像将始终为正方形和 1435x1435 像素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-15T13:06:33.987

看看[这个答案](https://stackoverflow.com/a/11177322/207616)。代码包括旋转，但发问者还是问了同样的问题：“如何从 UIImageView 以全分辨率获取 […] 图像？”

复制的内容（在删除或其他情况下）：

```
- (UIImage *)capturedView
{
    float imageScale = sqrtf(powf(self.captureView.transform.a, 2.f) + powf(self.captureView.transform.c, 2.f));    
    CGFloat widthScale = self.captureView.bounds.size.width / self.captureView.image.size.width;
    CGFloat heightScale = self.captureView.bounds.size.height / self.captureView.image.size.height;
    float contentScale = MIN(widthScale, heightScale);
    float effectiveScale = imageScale * contentScale;

    CGSize captureSize = CGSizeMake(enclosingView.bounds.size.width / effectiveScale, enclosingView.bounds.size.height / effectiveScale);

    NSLog(@"effectiveScale = %0.2f, captureSize = %@", effectiveScale, NSStringFromCGSize(captureSize));

    UIGraphicsBeginImageContextWithOptions(captureSize, YES, 0.0);        
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextScaleCTM(context, 1/effectiveScale, 1/effectiveScale);
    [enclosingView.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return img;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:03:47.273

首先在 UIImage 对象中获取您的图像。创建您想要的任何尺寸并使用以下..

```
UIImage *image = // you image;
CGSize size;
if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
([UIScreen mainScreen].scale == 2.0)) {

     // RETINA DISPLAY
      size = CGSizeMake(640, 640);
}
else {
     // Non Ratina device
      size = CGSizeMake(320, 320);
}

UIGraphicsBeginImageContext(size);
[image drawInRect:CGRectMake(0, 0, size.width, size.height)];
UIImage *destImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext(); 
```

现在您将获得`destImage`新的分辨率。

希望这就是你要找的:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T11:16:53.320

```
-(UIImage*)processImageRect:(UIImage*)image:(CGSize)sizeToForm {
    // Draw image1  
    UIGraphicsBeginImageContext(CGSizeMake(sizeToForm.width, sizeToForm.height));  
    [image drawInRect:CGRectMake(0.0, 0.0, sizeToForm.width, sizeToForm.height)]; 
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();

    return resultingImage;
} 
```

这样做可能会解决您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T10:08:37.980

你可以使用它：

UIImageExtras.h

```
@interface UIImage (Extras)
-(UIImage*)imageByScalingAndCroppingForSize:(CGSize)targetSize;
@end 
```

UIImageExtras.m

```
#import "UIImageExtras.h"

@implementation UIImage (Extras)

- (UIImage*)imageByScalingAndCroppingForSize:(CGSize)targetSize
{
//Image de base
UIImage *sourceImage = self;
//Image redimenssionnée
UIImage *newImage = nil; 

//Taille de l'image de base
CGSize imageSize = sourceImage.size;
//Longueur et largeur 
CGFloat width = imageSize.width;
CGFloat height = imageSize.height;

//Dimension désirée
CGFloat targetWidth = targetSize.width;
CGFloat targetHeight = targetSize.height;

//Echelle...
CGFloat scaleFactor = 0.0;
CGFloat scaledWidth = targetWidth;
CGFloat scaledHeight = targetHeight;
CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

//Si taille des image est différentes on redimensionne de facon proportionnelle
if (CGSizeEqualToSize(imageSize, targetSize) == NO) 
{
    CGFloat widthFactor = targetWidth / width;
    CGFloat heightFactor = targetHeight / height;

    if (widthFactor > heightFactor)
        scaleFactor = widthFactor; // scale to fit height
    else
        scaleFactor = heightFactor; // scale to fit width
    scaledWidth  = width * scaleFactor;
    scaledHeight = height * scaleFactor;

    //Centre l'image
    if (widthFactor > heightFactor)
    {
        thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
    }
    else if (widthFactor < heightFactor)
        {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }       

    UIGraphicsBeginImageContext(targetSize);

    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width  = scaledWidth;
    thumbnailRect.size.height = scaledHeight;

    [sourceImage drawInRect:thumbnailRect];

    newImage = UIGraphicsGetImageFromCurrentImageContext();
    if(newImage == nil) 
        NSLog(@"could not scale image");

    UIGraphicsEndImageContext();

    return newImage;
}
@end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-24T22:14:19.283

这对我有用。我尝试使用从 Facebook SDK [http://pulkitgoyal.in/resizing-high-resolution-images-on-ios-without-memory-issues/获得的图像](http://pulkitgoyal.in/resizing-high-resolution-images-on-ios-without-memory-issues/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T06:10:29.473

我认为[ALAssetRepresentation](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html)可以帮助你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T00:17:44.123

```
CGSize sizePic = CGSizeMake(320, 460);
    UIGraphicsBeginImageContext(sizePic);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *imagePic = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(imagePic, nil, nil, nil); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-30T07:07:29.810

```
#import <ImageIO/ImageIO.h>
#import <MobileCoreServices/MobileCoreServices.h> 

+ (UIImage *)resizeImage:(UIImage *)image toResolution:(int)resolution {
NSData *imageData = UIImagePNGRepresentation(image);
CGImageSourceRef src = CGImageSourceCreateWithData((__bridge CFDataRef)imageData, NULL);
CFDictionaryRef options = (__bridge CFDictionaryRef) @{
                                                       (id) kCGImageSourceCreateThumbnailWithTransform : @YES,
                                                       (id) kCGImageSourceCreateThumbnailFromImageAlways : @YES,
                                                       (id) kCGImageSourceThumbnailMaxPixelSize : @(resolution)
                                                       };
CGImageRef thumbnail = CGImageSourceCreateThumbnailAtIndex(src, 0, options);
CFRelease(src);
UIImage *img = [[UIImage alloc]initWithCGImage:thumbnail];
return img; 
```

}

# iphone - 如何在我们的应用程序中使用 void ContactListener::PreSolve(b2Contact* contact, const b2Manifold* oldManifold) 方法？

> ID：11432170
> 
> 赞同：1
> 
> 时间：2012-07-11T11:58:27.060
> 
> 标签：iphone, ios5, cocos2d-iphone, collision-detection, box2d-iphone

我不知道如何在我的应用程序中使用这个metnod

```
void MyContactListener::PreSolve(b2Contact* contact, const b2Manifold* oldManifold) {

    b2WorldManifold worldManifold;

    contact->GetWorldManifold(&worldManifold);

    b2PointState state1[2], state2[2];

    b2GetPointStates(state1, state2, oldManifold, contact->GetManifold());
    //NSLog(@"Presolving");

    if (state2[0] == b2_addState)
    {
        const b2Body* bodyA = contact->GetFixtureA()->GetBody();

        const b2Body* bodyB = contact->GetFixtureB()->GetBody();

        b2Vec2 point = worldManifold.points[0];

        b2Vec2 vA = bodyA->GetLinearVelocityFromWorldPoint(point);

        b2Vec2 vB = bodyB->GetLinearVelocityFromWorldPoint(point);

        b2Vec2 rV = vB - vA;

        float32 approachVelocity = b2Dot(rV, worldManifold.normal);

        if (-1.5f < approachVelocity && approachVelocity < 0.0f)       
        {

            //MyPlayCollisionSound();
            NSLog(@"Not Playing Sound");

        }
        else 
        {
            NSLog(@"playing the sound");

        }

    }

} 
```

如何在我的 HelloWorldLayer.mm 中使用此代码请帮助我...我这里有一个问题，我有一个场景，其中一些物体掉落并撞击静态物体，边缘相似，我实现了 b2ContactListener，并在我的刻度方法中我正在检查接触并播放声音，这种方法的问题是，当一个身体不断与静态身体接触时，声音会无限期地覆盖前一个，所以最后我有很大的噪音..我能做什么怎样避免这种情况？

请帮帮我谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:51:10.427

您刚刚在更新方法中使用了以下方法，并在调度更新方法调用之前声明了它的对象。就像在 HelloWorldLayer.h 中一样

```
MyContactListener *contactListener; 
```

在 HelloworldLayer.mm

前

```
[self scheduleupdate];

contactListener=new MyContactListener();
world->setContactListener(contactListener); 
```

比这种类型的错误不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:15:32.003

当两个物体发生碰撞时，`b2ContactListener`方法按以下顺序调用：

```
BeginContact

PreSolve
PostSolve
PreSolve
PostSolve
...etc

EndContact 
```

因此，如果您想为每次碰撞检测一次身体之间的碰撞，请使用`BeginContact`or`EndContact`代替。不过，这些方法只采用一个`b2Contact`参数，因此您可能需要取消`oldManifold`在计算中使用该值。

# android - Android - 获取 WiFi 路由器的 IP

> ID：11432172
> 
> 赞同：0
> 
> 时间：2012-07-11T11:58:28.240
> 
> 标签：android, ip, wifi

我使用了获得 IP 地址的函数，如下所示：

```
public static final String IPV4_REGEX = "\\A(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\z";
public static String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()&&(inetAddress.getHostAddress().toString().matches(IPV4_REGEX))) {
                    return /*inetAddress.getHostName()+"~|~"+*/inetAddress.getHostAddress().toString();
                }

            }
        }
    } catch (SocketException ex) {
        ex.printStackTrace();
    }
    return null;
} 
```

但我注意到它获得了第一个`appropriate`IP 地址。在我插入 SIM 卡之前它工作正常。之后它获得手机的IP，而不是本地WiFi！所以我想知道如何排除这种情况？我只想获取 WiFi 路由器的本地 IP。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:07:48.483

使用下面的代码

```
WifiManager myWifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();
int ipAddress = myWifiInfo.getIpAddress();
System.out.println("WiFi address is " + android.text.format.Formatter.formatIpAddress(ipAddress)); 
```

并在清单文件中添加权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

# spring - Spring setter 注入和构造函数注入

> ID：11432174
> 
> 赞同：1
> 
> 时间：2012-07-11T11:58:29.393
> 
> 标签：spring

请帮助了解我应该在哪种情况下使用构造函数注入和 setter 注入。请帮助我提供适当的示例。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:18:33.500

> 我们通常建议人们对所有强制协作者使用构造函数注入，对所有其他属性使用 setter 注入。同样，构造函数注入可确保满足所有强制属性，并且根本不可能实例化处于无效状态的对象（未传递其协作者）。换句话说，当使用构造函数注入时，您不必使用专用机制来确保设置所需的属性（除了普通的 Java 机制）。

更多细节 [http://blog.springsource.org/2007/07/11/setter-injection-versus-constructor-injection-and-the-use-of-required/](http://blog.springsource.org/2007/07/11/setter-injection-versus-constructor-injection-and-the-use-of-required/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:09:03.327

就个人而言，我倾向于构造函数注入，我这样做有一个主要原因。

> 不变性。

使用不可变对象，更容易使代码线程安全。这在处理 Spring`singleton`范围对象时尤其重要。如果它们是可变的，并且在不同的线程中访问，那么更改任何共享状态都是不安全的。

不变性是有益的还有其他原因，但我会让[网页](http://www.javapractices.com/topic/TopicAction.do?Id=29)继续讨论这个问题。

# tomcat - 改变运行maven命令的路径

> ID：11432176
> 
> 赞同：0
> 
> 时间：2012-07-11T11:58:32.910
> 
> 标签：tomcat, maven

我想在java代码中执行一个maven命令，所以我使用了它，它工作正常

```
 String[] command = {"CMD", "/C", "mvn -Dit.test="+className+" verify"};
 ProcessBuilder probuilder = new ProcessBuilder( command );
 //You can set up your work directory
 probuilder.directory(new File("C:\\Users\\neila\\workspace\\SeleniumebDriverProject"));

 Process process = probuilder.start(); 
```

但是工作目录（maven项目：“C:\Users\neila\workspace\SeleniumebDriverProject”）是固定的，所以我希望它更加相对和灵活，所以我通过tomcat下的项目uri更改它，我的意思是这个uri：C： \software\apache-tomcat-7\apache-tomcat-7.0.28\wtpwebapps\SeleniumebDriverProject

所以当我运行它时，它告诉我目录中没有 pom.xml 文件。

最后，我的目标是在 tomcat 下而不是在我的工作区下运行 maven 命令，因此应该将 maven 项目复制到 tomcat 文件夹中。

你认为什么是最好的解决方案

# html - IE 8 为 img 标签创建空文本节点

> ID：11432180
> 
> 赞同：1
> 
> 时间：2012-07-11T11:58:50.007
> 
> 标签：html, css, internet-explorer, internet-explorer-8

当我尝试添加`<img>`标签时，IE8会在图像标签后自动添加一个“**空文本节点”。**

**HTML :-**

```
<html>
<head>
    <title>Railway Services</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="img/icon.png" />
    <link rel="stylesheet" href="css/styles.css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
</head>
<body>
    <div id="header">
        <div id="wrapper">
            <div class="logo">
                <img src="img/logo.png"/>
            </div>
        </div>
    </div>
    <div id="page" class="homePage">
       <div id="wrapper">
          <h1>Home Page</h1>
       </div>
   </div>
   <div id="footer">
      <div id="wrapper">
            <p class="copyRight">Copyright&#169;2012 Railway Services. All rights reserved</p>
      </div>
    </div>
</body>
</html> 
```

**样式.css：-**

```
@CHARSET "ISO-8859-1";
body{
   margin:0px;
   padding:0px;
   font-size:12px;
   color:#123456;
   font-family:verdana,_sans,arial;
   text-align:center;
}
#wrapper{
   width:98%;
   margin:0 auto;
}
#page{
   float:left;
   width:100%;
}
p{
   margin:0px;
   padding:0px;
}

/**********************HEADER*********************/

#header{
   float:left;
   width:100%;
}
.logo{
   float:left;
   width:20%;
   height:150px;
   cursor:pointer;
}
.logo img{
   width:100%;
   height:100%;
}

/************************HEADER END***************/

/************************FOOTER*******************/

#footer{
   float:left;
   width:100%;
}

/***********************FOOTER END****************/ 
```

**看到这张图片**

![在 IE8 控制台中](../Images/cc607f00ae3622b45a4d0a5a1158c019.png)

在上图中，您可以看到 IE在标记后生成**Empty Text Node 。**`<img>`

我找不到为什么 IE 会生成空文本节点。谁能帮我..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:04:02.937

IE 将这一点显示给页面中标签之间有空格的任何元素。这可能不会导致任何问题。

唯一的考虑是当你的内容是内联的并且它在元素之间添加了一个空格。在这种情况下，您所要做的就是消除标签之间的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:03:27.460

在图像标签之后有一个换行符和一些用于缩进的空格，这会导致创建一个空的文本节点。

如果您这样编写代码：

```
<div class="logo"><img src="img/logo.png"/></div> 
```

您将不再有空文本节点。

由于它确实是特定于 IE 的，我认为这只是解析器的一个错误。

# html - 如何在长度为 2 列的行之间制作边框？

> ID：11432181
> 
> 赞同：0
> 
> 时间：2012-07-11T11:58:52.753
> 
> 标签：html, css

我有一个包含以下行的表：

```
<tr class = 'output' style='border-bottom: 1px dotted silver;'> 
```

但我需要边框的长度为 2 列（现在它的长度为 5（所有列）。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:02:04.010

不，您必须在以下`border-bottom`位置设置`td`：

```
<tr class = 'output'>
  <td style='border-bottom: 1px dotted silver;'></td>
  <td style='border-bottom: 1px dotted silver;'></td>
  <td></td>
  <td></td>
  <td></td>
</tr> 
```

或者，您可以使用 CSS 执行此操作：

```
table tr.output td:nth-child(1), table tr.output td:nth-child(2) {
    border-bottom: 1px dotted silver;
}​ 
```

[http://jsfiddle.net/awUTV/](http://jsfiddle.net/awUTV/)

# sql - 从 AS/400 模式创建本地 SQL 数据库

> ID：11432182
> 
> 赞同：0
> 
> 时间：2012-07-11T11:59:01.360
> 
> 标签：sql, sql-server, sql-server-2008, database-schema

我想使用 AS/400 架构在 SQL Server 2008 R2 中创建本地数据库...我该怎么做...我不知道 SQL 中的 AS/400 架构是什么...我试图在互联网上搜索但是找不到任何有用的链接。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:03:50.187

您需要从 AS/400 中提取文件结构并手动创建（我知道没有自动方法）相应的 SQL 表。

# apache - 将 HTTP 应用于在 Apache 上运行的 HTTPS 网站的一个区域

> ID：11432183
> 
> 赞同：0
> 
> 时间：2012-07-11T11:59:01.897
> 
> 标签：apache, http, mod-rewrite, ssl, https

我在 Apache 上运行了一个安全网站，但其中一部分需要由于 SSL 阻止而无法显示的 YouTube 视频。

因此，我需要对网站的这一部分 (/videos) 使用 HTTP。如果我从 https 中删除“s”，它会跳回到那里，因此不能简单地更改指向它的链接。

是否有 mod_rewrite 代码或类似的代码可能会向该目录添加异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:35:51.853

从 HTTPS 切换到 HTTP 总是会出现问题，尤其是在您的用户经过身份验证并且您想要维护安全性的情况下。

您可以改为通过 HTTPS 使用 YouTube，如[YouTube API 博客](http://apiblog.youtube.com/2011/02/https-support-for-youtube-embeds.html)中所述。

# python - Python：如何在开始时关闭对 lib 目录的扫描

> ID：11432185
> 
> 赞同：1
> 
> 时间：2012-07-11T11:59:10.937
> 
> 标签：python

我已经安装了自己的 python 和 10000 个附加模块。python 和模块都位于一个小的 NFS 共享上。当我启动 python 时，它会扫描所有的库目录并寻找可用的模块。这需要几秒钟。

如何明确关闭此扫描过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:25:11.540

`-S`您可以使用标志启动 Python 解释器。这意味着[`site.py`](http://docs.python.org/library/site.html)不会运行，也不会扫描所有已安装的 Python 模块。好处是 Python 会启动得更快，坏处是很多模块不会包含在您的模块中，`sys.path`并且您将无法导入它们。

# package - 安装 Installshield 2010 前需要卸载不相关的应用程序

> ID：11432186
> 
> 赞同：1
> 
> 时间：2012-07-11T11:59:14.090
> 
> 标签：package, upgrade, installshield, uninstallation

提前道歉，我仍然是Installshield新手！

我目前正在使用 installsheild 2010 为我的应用程序 (ds2) 打包一个安装包。我的麻烦是我需要删除该项目的先前版本，该版本是使用 installshield 2008 作为合并模块 (ds1) 创建的，而不是本身的安装程序。

所以旧版本（ds1）目前缺少升级代码等，只能访问产品版本和包代码。

新程序具有通常的升级、包、产品代码 (ds2)。

无论如何将旧产品 mergeModule 与新应用程序相关联，以便可以将其作为“先前版本”卸载。或者是否有另一种方法可以让 installshield “删除产品代码为 xxxxxxxx 的任何内容”

我希望这足够清楚，可以做出回应！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:33:52.000

只有 FindRelatedProducts 需要 UpgradeCode 来确定 ProductCode。RemoveExistingProducts 使用该 ProductCode 进行删除。

您可以根据虚假的 UpgradeCode 创建一个 Major Upgrde，因为它知道它不会找到任何东西。然后，您可以使用 Type 51 Set Property 自定义操作将已知的 ProductCode 分配给主要升级规则使用的 ActionProperty。然后 RemoveExistingProducts 将出现并卸载该产品。

# python - Python tweepy 写入 sqlite3 db

> ID：11432187
> 
> 赞同：0
> 
> 时间：2012-07-11T11:59:15.997
> 
> 标签：python, tweepy

我下面的脚本（取自各种在线资源）没有写入数据库。我没有收到任何错误，如果我注释掉数据库行，那么它会毫无问题地输出到控制台。

数据库存在，它有 2 个字段，可由我编写....有什么想法吗？

下面更新了代码

```
#!/usr/bin/env python

import sys
import tweepy
from textwrap import TextWrapper
import sqlite3

CONSUMER_KEY = ''
CONSUMER_SECRET = ''
ACCESS_KEY = ''
ACCESS_SECRET = ''

auth1 = tweepy.auth.OAuthHandler(CONSUMER_KEY,CONSUMER_SECRET)
auth1.set_access_token(ACCESS_KEY,ACCESS_SECRET)
api = tweepy.API(auth1)
conn = sqlite3.connect('twitter.db')
cur = conn.cursor()

class StreamListener(tweepy.StreamListener):
    status_wrapper = TextWrapper(width=60, initial_indent='    ', subsequent_indent='    ')

    def on_status(self, status):
        try:
            cur.execute('INSERT INTO tweets (text, date) VALUES (?, ?)' ,(status.text,))
            print self.status_wrapper.fill(status.text)
            print '\n %s  %s  via %s\n' % (status.author.screen_name, status.created_at, status.source)
            conn.commit()   
        except Exception, e:
            print >> sys.stderr, 'Encountered Exception:', e

    def on_error(self, status_code):
            print >> sys.stderr, 'Encountered error with status code:', status_code
            return True # Don't kill the stream

    def on_timeout(self):
            print >> sys.stderr, 'Timeout...'
            return True # Don't kill the stream

streamer = tweepy.Stream(auth1, StreamListener(), timeout=None)
setTerms = ['news','hello']
streamer.filter(setTerms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:09:22.850

首先，修复你的缩进。您没有收到任何错误，因为您明确地将它们静音！和

```
except Exception, e:
    # Catch any unicode errors while printing to console
    # and just ignore them to avoid breaking application.
    pass 
```

这会捕获块中发生的**任何异常。**`try: except:`阅读 Python 教程是[了解有关异常的更多信息的良好开端。](http://docs.python.org/tutorial/errors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:48:20.560

你想这样做吗：

```
cur = conn.cursor()
cursor.execute('INSERT INTO tweets (text, date) VALUES (?, NOW())' ,(status.text)) 
```

或这个：

```
cur = conn.cursor()
cur.execute('INSERT INTO tweets (text, date) VALUES (?, NOW())' ,(status.text)) 
```

在第一种情况下`cursor`是未声明的。

此外，正如 lqc 指出的那样，您可以消除所有错误。不要捕获任何异常以查看发生了什么或将其更改为更具体的内容（如`UnicodeError`）。

# c# - 对象初始化器逗号查询

> ID：11432190
> 
> 赞同：0
> 
> 时间：2012-07-11T11:59:35.290
> 
> 标签：c#

注意到我的 C# 代码中的一个小错误（第 4 行末尾）：

```
Domain.Models.Patient patient = new Domain.Models.Patient
{
   PatientId = patientId,
   StudyID = studyId,
}; 
```

我没有收到任何构建错误或运行时错误 - 当 studyId 末尾有一个错误的逗号时。

为什么会这样，这真的很重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:00:19.110

没关系，也不会导致任何编译时错误。对于其他人来说也是如此，就像枚举一样。这可能是为了表明，可以将其他项目添加到对象中。

```
 enum Test
    {
        Value1,
        Value2,
        //Value3, May be to comment out easily
    } 
```

找到[参考 - C# 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)：

> （第 24.2 节）与标准 C++ 一样，C# 允许在数组初始化程序的末尾使用尾随逗号。此语法在从此类列表中添加或删除成员方面提供了灵活性，并简化了此类列表的机器生成。

和

> （第 21.1 节）- C# 允许在枚举主体中使用尾随逗号，就像它允许在数组初始化器中使用逗号一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:05:02.073

编译器会忽略最后一个逗号。

```
Domain.Models.Patient patient = new Domain.Models.Patient
{
   PatientId = patientId,
   StudyID = studyId, // this comma is ignored by compiler.
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:05:02.377

当您复制/粘贴、重新排列、注释掉/在初始化程序中时，这非常方便。如果您必须在过程中添加或删除逗号，您不必担心。

# php - 获取主键作为外键放在其他表中

> ID：11432191
> 
> 赞同：0
> 
> 时间：2012-07-11T11:59:35.353
> 
> 标签：php, mysql

我有这段代码，我想做的是将主键最后插入用户表，然后将其放入库表的外键中。我不知道如何使用 $request 或在这里做什么？

```
public function register($request = array()) {
    $data = array(
        'user_name' => $request['username'],
        'password' => $request['password'],
        'email' => ($request['email']) 
    );
    $data1 = array(
        'user_id' => '5',// this is where I have to put the primary key from last table
        'library_name' => $request['lib_name']
    );

    $this->model->insert('user', $data);
    $this->model->insert('library', $data1);
    $this->redirect('uploadSongs.php');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:06:07.583

使用[mysql_insert_id()](http://dev.mysql.com/doc/refman/5.0/en/mysql-insert-id.html)

> -- 返回前一个 INSERT 或 UPDATE 语句为 AUTO_INCREMENT 列生成的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:04:35.537

你可以这样做

```
public function register($request = array()) {
    $data = array(
        'user_name' => $request['username'],
        'password' => $request['password'],
        'email' => ($request['email']) 
    );

    $this->model->insert('user', $data);
   $user_id = $this->model->select('user', $data); //select user_id from db 
   $data1 = array(
        'user_id' => $user_id ,
        'library_name' => $request['lib_name']
    );

    $this->model->insert('library', $data1);
    $this->redirect('uploadSongs.php');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:15:32.987

你可以这样做

```
public function register($request = array()) {
$data = array(
    'user_name' => $request['username'],
    'password' => $request['password'],
    'email' => ($request['email']) 
);
$data1 = array(
    'library_name' => $request['lib_name']
);

$this->model->insert('user', $data);
$user_id = mysql_insert_id();
$data1['userid'] = $user_id;
$this->model->insert('library', $data1);
$this->redirect('uploadSongs.php'); 
```

如果您使用任何框架。然后他们有帮助函数来获取最后一个插入ID，你应该使用它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:26:26.913

谢谢大家，我需要做的只是改变逻辑，我愚蠢地使用它并且没有看到在哪里放置插入查询所以它现在工作我所要做的就是改变按给定插入查询

```
public function register($request = array()) {
$data = array(
    'user_name' => $request['username'],
    'password' => $request['password'],
    'email' => ($request['email']) 
);

$this->model->insert('user', $data);
$data1 = array(
    'user_id' => mysql_insert_id(),// now it works as insert has been done above .... 
    'library_name' => $request['lib_name']
);
$this->model->insert('library', $data1);
$this->redirect('uploadSongs.php'); 
```

# c++ - 有没有办法在其他类中传递类的变量？

> ID：11432193
> 
> 赞同：-4
> 
> 时间：2012-07-11T11:59:42.047
> 
> 标签：c++

我要两节课。我在类中有一个静态变量，`Class1`我想将它得到的值传递给 class `Class2`。

例如 ：

```
//Class1.h
{
    static int x;
    int Method1();
}

//Class1.cpp
{
    int Class1::x=0;
    int Class1::Method1(){
    x=2;
    }
} 
```

现在Class2

```
//Class2.cpp
{
   Class1 cls;
   cout<<cls.x<<endl;//it shows 0 value
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:01:44.403

我假设`x`是公开的：

```
#include "class1.h"

int xVal = Class1::x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:19:57.173

您需要将要从中访问变量的其他类声明为“朋友”

```
class Class1 {
    friend class Class2;
    // ...
} 
```

`Class1`现在您可以从in访问所有变量`Class2`。

# javascript - 使用点击功能后刷新同一页面上的div

> ID：11432197
> 
> 赞同：0
> 
> 时间：2012-07-11T11:59:57.270
> 
> 标签：javascript, jquery, html, javascript-events

我正在使用一个 java 脚本打印功能，该功能在点击时打印页面的预定义 div。功能如下：

```
<head>
<script type="text/javascript">
function printDiv(any printable div) {      
var printContents = document.getElementById(any printable div).innerHTML;      
var originalContents = document.body.innerHTML;       
document.body.innerHTML = printContents;       
window.print();       
document.body.innerHTML = originalContents; 
} 
</script>
</head> 
```

打印机表单输入法和可打印的div如下：

```
<body>
<input type="button" class="button" onclick="printDiv('any printable div')" name="print" value="print" />
<div id = "any printable div"> On button click contents here are printed </div>
</body> 
```

我还在同一页面上使用 j-query 文本选框/滚动条，根据函数执行任务

```
 $(document).ready(function(){ 
```

一切都可以独立工作。问题是当点击打印按钮时，文本选框/滚动条停止滚动文本。在页面刷新之前，滚动条无法滚动文本。所以我正在使用 html 元刷新，但这对访问者来说可能是一种恼人的体验。我也不想在 iframe 中使用滚动条。

这次我已经尝试了一些基于 j-query 和 java 脚本的解决方案。脚本刷新（只是淡入淡出整个文本块）滚动条静默但实际上无法保持文本滚动的 div。

是否有任何好的基于 j-query 或 java 脚本的解决方案可以根据我在上面解释的情况在给定时间段内静默刷新滚动条 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:06:43.920

变量名中不能有空格。`function printDiv(any printable div)`是语法错误。

请尝试：

```
function printDiv(elId) {      
    var printContents = document.getElementById(elId).innerHTML;      
    var originalContents = document.body.innerHTML;       
    document.body.innerHTML = printContents;       
    window.print();       
    document.body.innerHTML = originalContents; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:12:07.133

我从您所说的内容中假设，这里的目的是能够仅打印某个 div，而不是整个页面。如果是这种情况，那么您真的会在这里执行此功能。

如果您只想制作更漂亮的页面版本（没有菜单等），请查看[如何在打印或打印预览时使用不同的 CSS？](https://stackoverflow.com/questions/6564259/how-can-i-have-different-css-when-i-print-or-print-preview). 该问题将展示如何使用一组不同的 css 进行打印，因此您可以设置为打印`display:none;`时不想显示的任何内容。

如果您只想打印一个 div，那么您可以查看[jQuery 打印元素插件](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/ "jQuery 打印元素")。这是一个简单的 js 文件，您在 html 中链接然后调用

`$([selector]).printElement();`

只打印那个元素。例如，您可以这样重写您的方法：

```
function printDiv(anyPrintableDiv) { 
    $('#' + anyPrintableDiv).printElement();
} 
```

# command-line - 鼠标点击的批处理文件

> ID：11432206
> 
> 赞同：-3
> 
> 时间：2012-07-11T12:00:34.963
> 
> 标签：command-line, batch-file

嗨，我想自动登录到服务器。为此，我需要一个批处理文件来处理鼠标点击并根据服务器的像素登录系统。任何人都可以举个例子吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:09:06.813

您不能批量执行此操作。除非您只是在执行此操作的脚本中调用低级程序，或者从 C# 调用 P/Invoking DLL（用 C# 标记的问题？）。

如果您希望服务器在启动时自动登录，您可以修改此注册表项中的值

`HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon`

您需要设置`AutoAdminLogon`为`1`. 然后相应`DefaultUsername`地设置`DefaultPassword`。

此批处理文件将设置这些密钥（需要管理员权限）

```
reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v "AutoAdminLogon" /d "1" /f
reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v "DefaultUsername" /d "yourusername" /f
reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v "DefaultPassword" /d "yourpassword" /f 
```

# java - 可能缺少运行时依赖项的 Java 类

> ID：11432212
> 
> 赞同：5
> 
> 时间：2012-07-11T12:01:04.773
> 
> 标签：java, classloader, dependency-management

我有依赖于库 X 的实用程序类 U，并且必须放入一个包中，该包将用于具有 X 的程序（它应该做它的正常工作）和没有 X 的地方（它不应该做任何事情）。在不将班级一分为二的情况下，我找到了一个解决此问题的简单模式：

```
package foo;
import bar.MisteriousX;

public class U {
    static private boolean isXPresent = false;
    static {
        try {
            isXPresent = (null != U.class.getClassLoader().loadClass("bar.MisteriousX"));
        } catch (Exception e) {
            // loading of a sample X class failed: no X for you
        }
    }
    public static void doSomething() {
        if (isXPresent) {
            new Runnable() {
                public void run() { 
                    System.err.println("X says " + MisteriousX.say());
                }
            }.run();
        } else {
            System.err.println("X is not there");
        }
    }
    public static void main(String args[]) { doSomething(); } 
} 
```

使用这种模式，U 需要 X 存在才能编译，但在有或没有 X 存在的情况下运行时都按预期工作。除非对 X 库的所有访问都在内部类中，否则此代码会启动类加载器异常。

问题：是否保证导入解析在任何地方都能像这样工作，还是取决于 JVM/ClassLoader 实现？这有一个既定的模式吗？上面的代码片段是否太骇人听闻而无法投入生产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:17:18.270

通常，当一个类第一次加载时，如果它引用了一个不存在的类，那可能会导致错误。所以是的，让一个类进行检查，而另一个类在没有反射的情况下实际访问外部包将按预期工作，至少在我迄今为止看到的所有实现中是这样。它不必是*内部*类。

JVM 规范中的[链接部分为实现提供了极大的自由度。](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4)如果您不使用二分类方法，那么在使用急切链接的实现中进行*验证*`U`将导致尝试*加载* `X`，这会导致`LinkageError`. 规范也不需要验证引用类，但也不禁止这种早期验证。然而，它确实要求

> 在解决过程中检测到的任何错误都必须在程序中（直接或间接）使用对类或接口的符号引用的点抛出。

似乎您应该可以安全地假设仅在您实际访问内部类时才引发错误。如果你查看这个答案的历史，你会发现我已经两次改变了我的观点，所以不能保证这次我读对了……:-/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:17:40.037

我在[jOOQ](http://www.jooq.org)中做了类似的事情，以加载可选的日志框架依赖项。不过，我和你一样认为这有点像黑客攻击。字段初始化的示例代码片段，取决于类的可用性：

```
public final class JooqLogger {

    private org.slf4j.Logger slf4j;
    private org.apache.log4j.Logger log4j;
    private java.util.logging.Logger util;

    public static JooqLogger getLogger(Class<?> clazz) {
        JooqLogger result = new JooqLogger();

        // Prioritise slf4j
        try {
            result.slf4j = org.slf4j.LoggerFactory.getLogger(clazz);
        }

        // If that's not on the classpath, try log4j instead
        catch (Throwable e1) {
            try {
                result.log4j = org.apache.log4j.Logger.getLogger(clazz);
            }

            // If that's not on the classpath either, ignore most of logging
            catch (Throwable e2) {
                result.util= java.util.logging.Logger.getLogger(clazz.getName());
            }
        }

        return result;
    }

    [...] 
```

然后，稍后，根据先前加载的类切换记录器：

```
public boolean isTraceEnabled() {
    if (slf4j != null) {
        return slf4j.isTraceEnabled();
    }
    else if (log4j != null) {
        return log4j.isTraceEnabled();
    }
    else {
        return util.isLoggable(Level.FINER);
    }
} 
```

其余的源代码可以在[这里](https://github.com/jOOQ/jOOQ/blob/master/jOOQ/src/main/java/org/jooq/tools/JooqLogger.java)看到。本质上，我对 slf4j 和 log4j 都有编译时依赖项，我在运行时使用与您类似的模式将其呈现为可选。

这可能会在 OSGi 环境中引起问题，例如，类加载比仅使用标准 JDK/JRE 类加载机制时要复杂一些。但是，到目前为止，我还没有意识到任何问题

# java - 如何使用 Java ScriptEngine 创建 Javascript 函数

> ID：11432214
> 
> 赞同：2
> 
> 时间：2012-07-11T12:01:08.923
> 
> 标签：java, javascript, scriptengine

在这个问题中，我询问了有关支持表达式语言的问题，并成功使用了 Javascript 思想[将简单的表达式语言放入 java](https://stackoverflow.com/questions/6285045/putting-a-simple-expression-language-into-java)

但是所需的 Javascript 表达式已经变得非常冗长，我试图弄清楚如何使用 ScriptEngine 创建可以在我的表达式中引用的 javascript 函数，以便表达式可以更短。

到目前为止，我已经通过在用户输入的字符串上使用 reexp 破解了一个解决方案，该字符串可以包含一个名为 ifempty 的伪函数，然后我在传递给脚本引擎之前将其转换为 javascript

```
public final String formatFromMask(String mask,Song exampleSong)
    {
        mask = convertPsuedoFunctions(mask);
        try
        {
            ScriptEngineManager manager = new ScriptEngineManager();
            ScriptEngine engine = manager.getEngineByName("JavaScript");
            for(SongFieldName next:SongFieldName.values())
            {
                engine.put(next.getScriptVar(),exampleSong.getFieldValueOrEmptyString(next.getSongFieldKey()));
            }
            Object result = engine.eval(mask);
            return (String)result;
        }
        catch(ScriptException se)
        {
            se.printStackTrace();
        }
        return "";
    }

    private String convertPsuedoFunctions(String mask)
    {
        //i.e ifnotempty(artist,' - ') -> (artist.length>0 ? artist + ' - ' : '')
        mask=mask.replaceAll("ifnotempty\\(([a-z]*)\\,('.*')\\)",
                             "($1.length>0 ? $1 + $2 : '')");

        return mask;
    } 
```

它可以解析一个表达式，例如

```
ifnotempty(album,'/')
+ ifnotempty(artist,' - ')
+ ifnotempty(album,' - ')
+ ifnotempty(track,' - ')
+ ifnotempty(title,'') 
```

但我想知道一个合适的解决方案，我实际上创建了一个真正的 javascript 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:01:21.347

为什么不创建一个真正的 Javascript 函数并添加到脚本中呢？

```
function ifnotempty(value,sep){
    return value != undefined && value.length > 0 ? value + sep : '';
} 
```

所以你的功能变成：

```
private String convertPsuedoFunctions(String mask)
{
    return 
         "function ifnotempty(value,sep){return value!=undefined&&value.length>0?value+sep:'';}"
         + mask;
} 
```

此外，您可以创建一个包含一些您支持的默认功能的文件，并将其添加到用户脚本中。就像上面一样。但不是一个硬编码函数，而是将文件读入一个字符串。

```
private static final String defaultFunctions = 
     com.google.common.io.Files.toString(new File("functions.js"),Charsets.US_ASCII);

private String convertPsuedoFunctions(String mask)
{
    return defaultFunctions + mask;
} 
```

# c++ - eclipse c++构建错误

> ID：11432217
> 
> 赞同：0
> 
> 时间：2012-07-11T12:01:34.790
> 
> 标签：c++, eclipse

我在使用 eclipse C++ juno 时遇到问题。我的项目从命令行编译和运行，但 eclipse (juno) 一直说有数千个错误。例如，我的代码中有一个函数 SetRun，eclipse 提到了这个错误：“调用无效参数'候选人是：void SetRun(?)'”，而 SetRun 的类型是 static void SetRun (uint32_t run);

我有很多类似的错误，其中eclipse似乎不理解函数的类型并放了一个'？反而。

我也有很多这样的错误：“符号'*'无法解析。”

我也有许多无法解决的包含，尽管编译器可以很好地解决它们。

我认为这都是同一个问题的一部分。

我还应该注意，我以前使用 eclipse 进行过此操作，但现在每次打开 eclipse 时都会出现这种情况。

如果我从 Eclipse 构建项目，它会成功构建。

我尝试更新索引，但它没有改变任何事情。

我该怎么做才能让 eclipse 停止告诉我这些错误？

编辑：

这是未解析的包含示例：

```
#include "ns3/core-module.h" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T18:22:38.670

我在我的项目中遇到了同样的问题。尝试以下操作：

1.  右键单击项目名称
2.  然后索引
3.  然后刷新所有文件并等待。

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:09:07.633

您必须在项目首选项中手动添加包含和符号路径。请遵循[**此**](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm)说明。你可以找到更多关于它的信息，只需[设置包含路径 eclipse](https://www.google.co.uk/#hl=en&output=search&sclient=psy-ab&q=set+up+include+path+eclipse&oq=set+up+include+path+eclipse&gs_l=hp.3...361.10126.0.10205.49.37.10.1.1.0.188.1866.36j1.37.0...0.0.yCTsE6qNUyQ&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=10cf558768b74769&biw=1920&bih=944)。

即使您的 Eclipse 编辑器无法解析路径，但您的编译器可以解析路径，这是正常的，因为它们使用独立的设置。

编辑：在您的情况下，您似乎有兴趣在 Eclipse 中使用 ns-3，那么您应该按照[**此说明**](http://www.nsnam.org/wiki/index.php/HOWTO_configure_eclipse_with_ns-3)进行操作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-11T12:06:24.260

过去，我在 Eclipse 下的 C++ 项目有太多问题，最终我最终切换到另一个 IDE。除非你真的必须在 Eclipse 下工作，否则我建议你切换到另一个。

# android - 在 onResume() 中取消计时器？

> ID：11432219
> 
> 赞同：-3
> 
> 时间：2012-07-11T12:01:38.377
> 
> 标签：android, timer, onresume

是否可以在`onResume()`方法中取消倒数计时器？

例如：当按下后退按钮时，`onResume()`调用该方法。我想在登录活动中取消计时器，以防有任何其他活动我希望计时器继续运行。

我曾考虑`if()`在活动中编写条件`onResume()`并取消计时器，但计时器并没有停止。

我的方法可能是错误的，所以请指导我。

```
void onResume(){
    super.onResume();
    if(currentActivity.equals("LoginActivity")){
        timer.cancel;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:07:12.890

只要在登录活动中按下后退按钮，您就可以停止倒计时。为此，请在您的登录活动中使用以下代码。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            //stop the timer
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:10:41.237

如果您使用**TimerTask**，则取消 TimerTask。

```
mTimerTask.cancel(); 
```

否则取消计时器。

```
mTimer.cancel();
mTimer.purge(); 
```

我认为这段代码可以帮助你。

# php - 没有数据库名称的 Pdo 连接？

> ID：11432221
> 
> 赞同：19
> 
> 时间：2012-07-11T12:01:43.073
> 
> 标签：php, mysql, pdo

我正在尝试创建一个 CMS，我想让我的客户生活更轻松，所以我自己创建了数据库。我在尝试执行此操作时遇到了问题。该数据库未创建，因此我无法使用 PDO 连接进行连接，并且`mysql`已弃用，因此我无法使用它。您对我如何在创建数据库之前创建 PDO 连接有什么建议吗？像`mysql_select_db()`替代品？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-11T12:13:11.383

您可以通过此启动 PDO 连接，如果我错了，请纠正我：

```
$db = new PDO("mysql:host=localhost", 'user', 'pass'); 
```

`dbname=[xx]`如您所见，与正常连接的区别在于已移除的部分。

当您想使用 UTF-8 连接时，还有一个免费提示：

```
$db = new PDO("mysql:host=localhost;charset=utf8mb4", 'user', 'pass'); 
```

为了发表评论，`Yehonatan`您可以通过以下方式选择数据库：

```
$db->exec('USE databaseName'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:15:45.553

只需放下`dbname=`零件：

```
try {
    $pdo = new PDO("mysql:host=localhost;", "user", "pass");
    $stmt = $pdo->query("SHOW DATABASES");
    var_dump($stmt->fetchAll(PDO::FETCH_ASSOC));
}
catch (PDOException $e) {
    echo $e->getMessage();
} 
```

给我

```
array(11) {
  [0]=>
  array(1) {
    ["Database"]=>
    string(18) "information_schema"
  }
  [1]=>
  array(1) {
    ["Database"]=>
    string(5) "cdcol"
  }
  [2]=>
  array(1) {
    ["Database"]=>
    string(5) "chica"
  }
  [3]=>
  array(1) {
    ["Database"]=>
    string(9) "downloads"
  }
  [4]=>
  array(1) {
    ["Database"]=>
    string(5) "mysql"
  }
  [5]=>
  array(1) {
    ["Database"]=>
    string(18) "performance_schema"
  }
  [6]=>
  array(1) {
    ["Database"]=>
    string(10) "phpmyadmin"
  }
  [7]=>
  array(1) {
    ["Database"]=>
    string(8) "rishumon"
  }
  [8]=>
  array(1) {
    ["Database"]=>
    string(4) "test"
  }
  [9]=>
  array(1) {
    ["Database"]=>
    string(5) "users"
  }
  [10]=>
  array(1) {
    ["Database"]=>
    string(7) "webauth"
  }
} 
```

正如预期的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:29:53.663

我发现唯一可行的方法是`$pdo->query('USE databasename')`在运行任何查询之前使用设置默认数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-12T00:26:56.067

使用空字符串也可以，例如`dbname=;` 无需添加更多逻辑来删除所有 dbname 部分。

```
$db_name = '';

$pdo = new PDO(
    sprintf('mysql:host=%s;dbname=%s;charset=%s',
        $db_host, $db_name, $db_charset),
    $db_user,
    $db_pass
); 
```

# javascript - 使用 jQuery defered.resolveWith() 在单个参数中传递数组

> ID：11432224
> 
> 赞同：3
> 
> 时间：2012-07-11T12:01:48.503
> 
> 标签：javascript, jquery, jquery-deferred

我有一个[jQuery deferred](http://api.jquery.com/category/deferred-object/)，我这样解决：

```
deferredAction.resolve(returnArray); 
```

这正在调用一个回调，例如：

```
function someCallback(myArray) {
...
} 
```

这工作正常，回调函数接收数组。但是我需要设置回调函数的上下文，所以我使用[deferred.resolveWith](http://api.jquery.com/deferred.resolveWith/)像这样：

```
deferredAction.resolveWith(someContext, returnArray); 
```

现在已正确设置上下文。但是，现在似乎 returnArray 正在被拆分。 **我的回调只接收数组的第一项。**

**为什么会发生这种情况，我该如何解决？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:09:04.257

[文档](http://api.jquery.com/deferred.resolveWith/)指出您应该在单个数组中传递参数。在你的情况下：

`deferredAction.resolveWith(someContext, [returnArray]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:08:56.663

我通过在返回参数周围加上方括号来解决这个问题：

```
deferredAction.resolveWith(someContext, [returnArray]); 
```

# entity-framework - 用于在数据库中添加记录的单元测试

> ID：11432236
> 
> 赞同：1
> 
> 时间：2012-07-11T12:02:36.730
> 
> 标签：entity-framework, unit-testing

我第一次使用单元测试。

我使用实体框架创建了“CAR”类。我的项目中有以下代码

```
namespace EntityFrameworkExample
{
    class Program
    {
        static void Main(string[] args)
        {

          public static void AddCar()
          {

            SampleDBEntities db = new SampleDBEntities();
            Car car = new Car();
            car.Brand = "Ford";
            car.Model = "Mastang";
            db.Cars.AddObject(car);
            db.SaveChanges();
            Console.WriteLine("Record Saved");
            Console.ReadLine();
         }
      }
  } 
} 
```

现在我想对这个方法进行单元测试。

我已经添加了单元测试项目以及上述项目的参考......但我很困惑如何调用它？

我写了下面的代码

```
namespace UnitTest
{
    /// <summary>
    /// Summary description for UnitTest1
    /// </summary>
    [TestClass]
    public class UnitTest1
    {

        [TestMethod]
        public void AddCar()
        {

            SampleDBEntities e = new SampleDBEntities();

            //what to do next ? ////////////////////////////////

      }

    }
} 
```

我很困惑下一步我应该写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:26:49.447

您应该将 AddCar 方法放在 Main 方法之外以便能够调用它。我会在 Program 类之外为 Car 功能创建一个新类。然后，您可以调用该类，而无需与测试中的程序进行交互。

对于单元测试，在您的测试方法中执行“Arrange”、“Act”、“Assert”。

安排：

```
var cars = new Cars(); 
```

行为：

```
cars.AddCar("Ford", "Mustang"); 
```

断言：

```
//check that car is in the database
var myCar = cars.GetCar("Ford", "Mustang");
Assert.IsNotNull(myCar); 
```

为了能够对其进行测试，您应该在每次测试运行之前擦除数据库。

编辑澄清：

```
namespace EntityFrameworkExample
{
    class Program
    {
        static void Main(string[] args)
        {
            var cars = new Cars();
            cars.AddCar("Ford", "Mustang");
        }

    } 

    public class Cars
    {
        public static void AddCar(string brand, string model)
        {
            SampleDBEntities db = new SampleDBEntities();
            Car car = new Car();
            car.Brand = brand;
            car.Model = model;
            db.Cars.AddObject(car);
            db.SaveChanges();
            Console.WriteLine("Record Saved");
            Console.ReadLine();
        }

        public static Car GetCar(brand, model)
        {
            using(var db = new SampleDBEntities())
            {
                var car = from car in db.Cars
                    where car.Brand == brand
                        && car.Model == model
                    select car;
                return car.FirstOrDefault();
            }
        }
    }
} 
```

# iphone - 触摸时如何以编程方式更改按钮的背景图像？

> ID：11432237
> 
> 赞同：1
> 
> 时间：2012-07-11T12:02:42.543
> 
> 标签：iphone, ios, ipad, background, uibutton

我有一个 iPhone 应用程序，我在其中使用了一个`IBOutlet`带有背景的按钮。单击它时，我调用了一个 Web 服务，如果成功，我需要更改按钮的背景。现在我正在这样做，但什么也没发生：

```
UIImage *buttonImage = [UIImage imageNamed:@"follow_shop.png"];
[following setBackgroundImage:buttonImage forState:UIControlStateNormal]; 
```

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:08:26.983

您在代码中所做的事情是正确的。您现在可以做三件事（按发现问题的概率递减顺序）：

`image`1) 如果您最初设置了或，请检查您的 IB `backgroundImage`。两者不同并且`image`高于`backgroundImage`（有效地呈现`backgroundImage`为隐藏）。这两者（您在 IB 和代码中设置的图像）都应该是一个（`image`或`backgroundImage`）。

2) 检查是否`follow_shop.png`是正确的名称。您还可以使用断点来查看是否`buttonImage`有内存。

3) 检查`following`您的 IB 是否已连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:15:47.940

1.  看看你`IBOutlet`的连接是否正确（例如使用`NSLog(@"%@",following);`）
2.  重新添加您的图像（例如使用`Copy files into destination groups folder`）
3.  看看你的目标。你的头像在`Copy Bundle Resources`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:26:13.660

有一个`IBOutlet`按钮，并在你`IBAction`把这个代码

```
UIImage *buttonImage = [UIImage imageNamed:@"yourimage.png"];
[myButton setBackgroundImage:buttonImage forState:UIControlStateSelected]; 
```

# python - 在python中建立与某些网页的连接

> ID：11432243
> 
> 赞同：0
> 
> 时间：2012-07-11T12:02:56.350
> 
> 标签：python, linux, networking, ubuntu-10.04

我必须在一个项目中工作，我必须在该项目中建立与网页的连接，以便我可以从该页面收集 xml dtd 架构片段并在其上应用我的搜索算法来搜索用户输入的关键字。我已经在 python 中创建了算法，但不知道如何在 python 中建立连接，因为我是新手。有人可以指导我吗？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:13:58.913

如果你只是想获取一个网页，你可以这样尝试：

```
import urllib2
url = 'http://www.example.com/index.html'
req = urllib2.Request(url)
response = urllib2.urlopen(req)
#now you can get the data by response.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:18:04.710

我不建议为 HTTP 生成套接字等，而 @fvwmer 提到的 urllib2 之类的库，或者我个人最喜欢的[twill](http://twill.idyll.org/)是一种用于浏览网站、下载内容甚至填写网络表单的简单脚本语言。

```
import re
import twill

go('http://www.stackoverflow.com')
content = show() #saving content in a variable
if re.search('some regex', content):
       'do something' 
```

# sqlite - 没有 Web 服务器和访问 SQLite 的本地 Web 应用程序

> ID：11432245
> 
> 赞同：1
> 
> 时间：2012-07-11T12:03:15.700
> 
> 标签：sqlite, web-applications, browser, desktop-application, local-storage

我想开发一个[ERP](https://en.wikipedia.org/wiki/Enterprise_resource_planning)系统，但我希望它在网络浏览器上运行。我希望它将数据存储在 SQLite 数据库中，但我不希望它必须作为客户端/服务器工作，只是在本地工作。

我还想访问环境变量和文件系统。最终我想使用 C 而不是 JavaScript来操作[DOM 。](http://en.wikipedia.org/wiki/Document_Object_Model)

是否有用于此的浏览器、框架或库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:09:34.007

据我所知，用 JavaScript 以外的任何语言来操作 DOM 是不可能的——因为这是**浏览器**将运行的唯一编程语言。

我会尝试考虑以下之一：

1) 运行本地 Web 服务器 - 为什么不呢？我不确定 C，但 Python、Ruby、JS 和许多其他语言使这些设置非常简单。

2) 如果您真的反对在网络中运行另一个程序，只需编写一个 GUI 应用程序。

3）如果你不反对 Python（而不是 C），你可以试试[Pajamas](http://pyjs.org/) - 一个允许你用 Python 编写 web 应用程序的框架，以后可以将它用作桌面应用程序（不运行服务器） . 非服务器版本实际上不会在浏览器中运行（AFAIK - 我自己从未尝试过）。

# struts2 - struts2 jquery 自动完成加载焦点上的所有结果

> ID：11432253
> 
> 赞同：1
> 
> 时间：2012-07-11T12:03:46.730
> 
> 标签：struts2, jquery-ui-autocomplete

我正在使用 struts2 jquery 插件。我需要以这样一种方式实现自动完成功能，即当用户关注自动完成元素时，它应该显示所有可能的选项。此外，如果用户输入一些文本，则应触发 sutocomplete。目前，只有在输入文本时才会触发自动完成功能。有没有办法在元素的焦点上触发它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:02:07.670

1.  尝试使用`loadMinimumCount = 0`，它可能会有所帮助。

2.  如果 (1) 不起作用，请尝试：

    ```
    <sj:autocompleter id="test" name="test" list="list" onFocusTopics="showList"/>

    <script>
        $(function(){
          $.subscribe('showList', function(event, data){
          $('select#testjson').show();
          // or $('select[name="test"]').show();
          // try one of both.
          }
        });
    </script> 
    ```

# php - html标签内的替代文本颜色

> ID：11432256
> 
> 赞同：1
> 
> 时间：2012-07-11T12:03:49.127
> 
> 标签：php, jquery, html, wordpress

由于某种原因，编辑器非常有限，我无法为文本着色

我想在 HTML 标签内的文本上实现什么： `Black White Black White`

HTML 的外观：

```
<h3 class="widget-title">Black White Black White</h3> 
```

我知道可以通过添加跨度标签来解决这个问题：

```
<h3 class="widget-title">Black <span style="color:FFF;">White</span> Black <span style="color:FFF;">White</span></h3> 
```

有没有更简单的解决方法？这在 CSS3 中是否以某种方式支持，还是我必须在 JQuery 中编写代码才能实现它？

* * *

谢谢你们的回答。也许，我不清楚我的问题......我想要的是改变颜色的偶数词。这是未定义的修改片段。

```
var txt = $('.widget-title').text().split(' ');
var str = "";
$.each(txt, function(i,v){
    if ( (i&1) == 1 ) {
        str += " <span style='color:red'>" + v + "</span> ";
    } else {
        str += " " + v;
    }
})

$('.widget-title').html(str) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:14:39.227

尝试这个：

```
var txt = $('.widget-title').text().split(' ');
var str = "";
$.each(txt, function(i,v){
  if (v == 'something') {
    str += "<span class='something'>" + v + "</span>"
  } else { str += " " + v}
})

$('.widget-title').html(str) 
```

[演示](http://jsfiddle.net/72552/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:21:19.890

这可以通过javascript来实现：

```
var title = document.getElementsByClassName('widget-title')[0],
    titleText = title.innerHTML,
    words = titleText.split(' '),
    len = words.length,
    i;

title.innerHTML = '';

for (i = 0 ; i < len ; i++) {
    var elem = document.createElement('span');
    elem.innerHTML = words[i];
    elem.style.color = words[i];
    title.appendChild(elem);
} 
```

**JSFiddle**
[http://jsfiddle.net/kastU/2/](http://jsfiddle.net/kastU/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:14:15.730

这似乎正是您正在寻找的：

[http://www.codingforums.com/showthread.php?t=6858](http://www.codingforums.com/showthread.php?t=6858)

（与“谷歌”一起找到）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T12:18:41.677

以下是使用 PHP 执行此操作的代码，您需要调用函数`colorize("Enter text which you want to see in Black and White style");`

```
<?php 
function colorize($text) {
$array = explode(' ', $text);
$index = 1;
foreach ($array as $value) {
    if ($index%2) {

        echo '<span style="color:#FFF;">';
        echo $value;
        echo '</span>';
    } else {

        echo '<span style="color:#000;">';
        echo $value;
        echo '</span>';
    }
    $index++;
}
}

?> 
```

# java - 又一个“Eclipse 调试器找不到源”的案例

> ID：11432261
> 
> 赞同：0
> 
> 时间：2012-07-11T12:04:03.043
> 
> 标签：java, eclipse, debugging

我已经解决了关于“Eclipse 调试器找不到源”的所有问题，但仍然不知道是什么导致了我的问题。基本上我在eclipse中有2个java项目，项目A和项目B，A在B的构建路径上。B 中的单元测试实例化了位于 A 中的类 ClassX。当突出显示 B 中的单元测试中的 ClassX 构造函数调用并按 F3 时，eclipse 确实在 A 中打开了 ClassX 源。但是，一旦我尝试进入这个在调试器中进行相同的调用，我得到“找不到源”窗口。如果我单击“编辑源查找路径”，然后我看到默认路径已经包含项目 A 中的 src 文件夹，ClassX 源所在的位置。此外，如果我单击用于调试 B 中的单元测试的调试配置中的“源”选项卡，

那么为什么调试器找不到 ClassX 源呢？

我们欢迎所有的建议！

编辑：默认源路径（如下图所示）看起来像是包含项目 A（org.xtext.example.hyrule）两次。这是正常的吗？

![在此处输入图像描述](../Images/2b6d672498f98ecbdff9f6e009382479.png)

# c# - 如何动态获取类的非泛型类型和属性？

> ID：11432262
> 
> 赞同：0
> 
> 时间：2012-07-11T12:04:03.793
> 
> 标签：c#, reflection

如何动态获取**所有继承自 Person 类（Student、Teacher）的非泛型**类和 Person 类的属性（Address）。

示例代码：

```
 [DataContract]
 [KnownType(typeof(Student))]
 [KnownType(typeof(Teacher))]
 public abstract class Person {
     [DataMember]
     public string Name { get; set; }

     [DataMember]
     public string Surname { get; set; }

     [DataMember]
     public Address _Address { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:35:32.050

```
var nonGenericProperties = typeof(Person)
    .GetProperties()
    .Where(p => !p.IsGenericType)
    .ToList();

var nonGenericClassesWhichInheritFromPerson = Assembly.GetAssembly(typeof(Person))
    .GetTypes()
    .Where(t => t.IsSubclassOf(typeof(Person))
    .ToList() 
```

第二个查询仅检查同一程序集中的派生类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:35:53.257

要查找所有继承 Person 的类，您需要定义要查找的位置。你不能到处看。假设所有类都与 Person 类在同一个程序集中，您可以这样写：

```
Assembly.GetAssembly(typeof(Person)).GetTypes().Where(t => typeof(Person).IsAssignableFrom(t) && !t.ContainsGenericParameters); 
```

至于属性，在所有属性的 foreach 循环中执行相同操作：

```
foreach (var pi in typeof(Person).GetProperties())
{
// Do the same for pi.PropertyType
} 
```

# c# - 使用 C# 的 Linq 中的 Zip 方法有什么问题？

> ID：11432265
> 
> 赞同：2
> 
> 时间：2012-07-11T12:04:18.567
> 
> 标签：c#, linq

我编写了以下代码来比较两个表，

```
var one = db.arabia_upod_item_availability_masters.Where(i => i.locationId == 30).OrderBy(i => i.itemNo).ToList();
var two = db.vw_get_arabia_upod_report_quantityOrderedPerItem_uhjs.OrderBy(i => i.Item_No).ToList();

if (one.Zip(two, (j, k) => j.itemNo == k.Item_No).Any(m => !m))
returnValue = true;
else
returnValue = false; 
```

问题是 Zip 方法从第一个循环到最后一个循环，然后再循环一次。例如，如果项目编号是 1,2,3，它会经过 1,2,3，然后再经过 1，即使所有值都匹配，它甚至会返回 false。可能是什么问题？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:11:55.230

[Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)是一个组合运算符：它将列表中的`One`项目与列表`Two`中**相同位置**的项目组合在一起。在我看来，您希望它根据过滤器进行组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:26:22.253

[Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)将函数应用于两个序列的给定元素并产生结果序列。您可以使用**Intersect**运算符返回两个序列的交集

```
var q = one.Intersect(two) 
```

# c# - 如何在 Threaded .Net Webservice 中启用会话？

> ID：11432267
> 
> 赞同：2
> 
> 时间：2012-07-11T12:04:31.747
> 
> 标签：c#, .net, web-services, session

我有一个具有以下两种方法的 .Net Webservice：

```
[WebMethod(EnableSession = true)]
public void A()
{
   HttpSessionState session = Session;

   Thread thread = new Thread(B);
   thread.Start();
}

[WebMethod(EnableSession = true)]
public void B()
{
   HttpSessionState session = Session;
} 
```

**场景1）**直接调用**B**方法时，session不为null

**场景 2）**但是当我调用**A**时，在**B**中 session 和 HttpContext.Current 都是空的。

为什么？如何在第二种情况下启用**B中的会话？**如何访问 A 中的会话？我应该将其会话传递给 B 吗？如果是怎么办？

方法 B 不应将会话作为参数。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:11:44.130

这是因为您在新线程中启动 B。

请参阅[http://forums.asp.net/t/1276840.aspx](http://forums.asp.net/t/1276840.aspx) 或 [http://forums.asp.net/t/1630651.aspx/1](http://forums.asp.net/t/1630651.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:02:38.953

```
[WebMethod(EnableSession = true)]
public void A()
{
   HttpSessionState session = Session;

   Action action = () => B_Core(session);
   Thread thread = new Thread(action);
   thread.Start();
}

[WebMethod(EnableSession = true)]
public void B()
{
   HttpSessionState session = Session;
   B_Core(session);
}
private void B_Core(HttpSessionState session)
{
    // todo
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-14T05:04:00.240

我必须使用一个全局字段：

```
/// <summary>
/// Holds the current session for using in threads.
/// </summary>
private HttpSessionState CurrentSession;

[WebMethod(EnableSession = true)]
public void A()
{
   CurrentSession = Session;

   Thread thread = new Thread(B);
   thread.Start();
}

[WebMethod(EnableSession = true)]
public void B()
{
  //for times that method is not called as a thread
  CurrentSession = CurrentSession == null ? Session : CurrentSession;

   HttpSessionState session = CurrentSession;
} 
```

# tsql - 在 T-SQL 中使用 IN 子句和 Like

> ID：11432270
> 
> 赞同：0
> 
> 时间：2012-07-11T12:04:37.337
> 
> 标签：tsql, sql-like

我想通过 IN 子句和 LIKE 在 sql express 中选择一些数据，但没有返回行。我的代码在这里：

```
SELECT        PointId, PointTitleId, PointTitleName, PointTitleContentText
FROM          PointsTitlesData
WHERE        (PointTitleContentText LIKE '%' + @SearchingClause + '%') 
             AND (PointId IN ('2','3')) 
```

上面的代码不返回任何数据，但是当我只使用 LIKE 代码返回数据时。

```
SELECT        PointId, PointTitleId, PointTitleName, PointTitleContentText
FROM          PointsTitlesData
WHERE        (PointTitleContentText LIKE '%' + @SearchingClause + '%') 
```

如何同时使用 IN 和 LIKE？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:48:09.553

我尝试使用下面的脚本重新创建您的场景

```
Declare @SearchingClause nvarchar(20);

Create table PointsTitlesData (Pointid int, PointTitleContentText nvarchar(20));

insert into PointsTitlesData (Pointid, PointTitleContentText)
values ( 1, 'aaamypoint1aaa'), (2, 'bbbmypoint2bbb'),(3,'cccmypoint3ccc');

Set @SearchingClause = 'mypoint2';

SELECT        PointId, PointTitleContentText 
FROM          PointsTitlesData 
WHERE        (PointTitleContentText LIKE '%' + @SearchingClause + '%')  
         AND (PointId IN ('2','3')) 

-- above code don't return any data but when i use only LIKE code return data.

SELECT        PointId, PointTitleContentText 
FROM          PointsTitlesData 
WHERE        (PointTitleContentText LIKE '%' + @SearchingClause + '%') 
```

我得到了两个查询的结果，所以看起来你有数据问题。你有没有尝试过

```
SELECT PointId from PointsTitlesData where ((PointId = 2) or (PointId = 3)) 
```

检查数据是否存在。

问候裘德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:06:21.293

可能会删除引号：

'2','3' 应该是 2,3

# eclipse - 如何离线安装 Subversive

> ID：11432271
> 
> 赞同：7
> 
> 时间：2012-07-11T12:04:43.857
> 
> 标签：eclipse, svn, rad, subversive

我想在我的 RAD/Eclipse 中安装 Subversive。如何**离线**安装？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T12:15:39.870

浏览到以下站点：

[http://www.eclipse.org/subversive/latest-releases.php](http://www.eclipse.org/subversive/latest-releases.php)

查找适合您的 Eclipse 版本的标记为“已归档更新站点”的链接。下载到您的系统。

在“安装新软件”对话框中，选择“添加”并使用“存档”选项指向您下载的 zip。您还需要禁用“在安装过程中联系所有更新站点...”选项。此时，您应该能够在 Eclipse 不访问网络的情况下安装 Subversive。

# android - android更改setText

> ID：11432275
> 
> 赞同：0
> 
> 时间：2012-07-11T12:05:00.730
> 
> 标签：android, settext

我正在开发一个android应用程序。我想根据用户从软键盘输入的键在editText中设置一个文本。

如何在 android 应用程序的 EditText 中设置文本内容之前更改文本内容？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:09:07.907

使用[TextView.setOnEditorActionListener()](http://developer.android.com/reference/android/widget/TextView.html#setOnEditorActionListener%28android.widget.TextView.OnEditorActionListener%29)可以在 EditText 中执行操作时收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:38:59.013

这可能会对您有所帮助。

```
editText.addTextChangedListener(new TextWatcher() {
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    public void afterTextChanged(Editable s) {
    }
}); 
```

# c# - C# 禁用 WPF 窗口的 aero snap

> ID：11432280
> 
> 赞同：3
> 
> 时间：2012-07-11T12:05:07.053
> 
> 标签：c#, .net, wpf

> **可能重复：**
> [禁用 Aero Snap (wpf)](https://stackoverflow.com/questions/2470685/disable-aero-snap-wpf)

我在 C# WPF 中有一个应用程序。我希望主窗口具有固定大小。为此，我将高度和最大高度、宽度和最大宽度设置为相同的值。一切看起来都很好，但我还想只为这个窗口禁用 Aero snap 效果。

1.  排除了从 Windows 注册表或控制面板禁用 Aero snap 的解决方案。

2.  将窗口的 ResizeMode 设置为“NoResize”也被排除在外，因为这样窗口边框也会消失。

您在 C# 中对此问题有任何可行的解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:39:48.327

您可以尝试按照[此答案](https://stackoverflow.com/a/6657804/1374267)中的说明暂时将 更改`ResizeMode`为。`NoResize`

否则你也可以试试[这个技巧](https://stackoverflow.com/a/10458343/1374267)，但我自己没有试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:17:40.070

经过2天的互联网搜索，我终于找到了解决方案。

[http://programminghacks.net/2009/10/19/download-snapping-sticky-magnetic-windows-for-wpf](http://programminghacks.net/2009/10/19/download-snapping-sticky-magnetic-windows-for-wpf)

不幸的是，它不适用于无边框窗口。

# ios - 如何每次将新数据保存到我的 plist 文件中而不是替换旧数据？

> ID：11432283
> 
> 赞同：0
> 
> 时间：2012-07-11T12:05:18.003
> 
> 标签：ios, xcode, uitableview, save, plist

我从 plist 文件中读取并将数据添加到 tableview

我的清单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string>Section1</string>
        <key>Rows</key>
        <array>
            <string>Section1 Item1</string>
            <string>Section1 Item2</string>
        </array>
    </dict>
    <dict>
        <key>Title</key>
        <string>Section2</string>
        <key>Rows</key>
        <array>
            <string>Section2 Item1</string>
            <string>Section2 Item2</string>
        </array>
    </dict>
</array>
</plist> 
```

。H

```
#import "RootViewController.h"

@interface RootViewController ()

@property (copy, nonatomic) NSArray* tableData;

@end 
```

.m

```
@implementation RootViewController

@synthesize tableData;

- (void) dealloc
{
    self.tableData = nil;
    [super dealloc];
}

- (void) viewDidLoad
{
    [super viewDidLoad];
    self.tableData = [NSArray arrayWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"Table" ofType: @"plist"]];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;
{
    return [tableData count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
    return [[[tableData objectAtIndex: section] objectForKey: @"Rows"] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;
{
    return [[tableData objectAtIndex: section] objectForKey: @"Title"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [[[tableData objectAtIndex: indexPath.section] objectForKey: @"Rows"] objectAtIndex: indexPath.row];

    return cell;
}

@end 
```

**如何每次写入新数据而不是替换旧数据时写入该字符串和数组？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:14:49.323

使用此代码，您可以读取 plist 文件：

```
self.tableData = [NSArray arrayWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"Table" ofType: @"plist"]]; 
```

有了这个你写：

```
[self.tableData writeToFile:path atomically:YES]; 
```

如果您不想添加更多项目，只需添加到文件中`self.tableData`，当您写入文件时，它将被添加到 plist 中。

唯一的问题是您需要在文档目录而不是捆绑包上写入。该捆绑包是您的应用程序文件夹，由应用商店签名和批准。要编辑捆绑包中的文件，您应该先复制它，然后使用该副本，如下所示：

```
 NSError *error;
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString *path = [documentsDirectory stringByAppendingPathComponent:[@"Table" stringByAppendingPathExtension:@"plist"]];

  NSFileManager *fileManager = [NSFileManager defaultManager];

  if (![fileManager fileExistsAtPath: path]) {
    NSString *bundle = [[NSBundle mainBundle] pathForResource:name ofType:@"plist"];

    [fileManager copyItemAtPath:bundle toPath: path error:&error];
  } 
```

此代码的末尾是文档目录上的 plist 文件的路径，该路径与您的包上的`path`完全相同。`Table.plist`

这个文件`path`你可以写和读，你的文件`[[NSBundle mainBundle] pathForResource: @"Table" ofType: @"plist"]`只能读。

**编辑**

基本上你需要做这样的事情： [https ://gist.github.com/3090009](https://gist.github.com/3090009)

这是一个使用文件路径的辅助类，如果您有问题，请询问

# android - Android 图库小部件错误：android.widget.Gallery.setUpChild 处的 java.lang.NullPointerException

> ID：11432284
> 
> 赞同：0
> 
> 时间：2012-07-11T12:05:19.593
> 
> 标签：android, android-view, android-gallery

我的 Android 应用程序中的主 Activity 有一个 Gallery 小部件，它通过一个高效的 ImageAdapter 加载 XML 布局（包含 TextViews 和图像）。在大多数情况下，这工作正常，我的任何设备或模拟器都没有任何问题，但我在日志中看到了以下错误。看起来这影响不到 1% 的用户，但我想知道是什么原因造成的，如何解决它，或者至少“抓住”它并优雅地解决它。有任何想法吗？

```
java.lang.NullPointerException at 
```

`android.widget.Gallery.setUpChild(Gallery.java:772) at` `android.widget.Gallery.makeAndAddView(Gallery.java:751) at` `android.widget.Gallery.fillToGalleryLeft(Gallery.java:667) at` `android.widget.Gallery.trackMotionScroll(Gallery.java:378) at` `android.widget.Gallery$FlingRunnable.run(Gallery.java:1369) at` `android.os.Handler.handleCallback(Handler.java:587) at` `android.os.Handler.dispatchMessage(Handler.java:92) at` `android.os.Looper.loop(Looper.java:130) at` `android.app.ActivityThread.main(ActivityThread.java:3695) at` `java.lang.reflect.Method.invokeNative(Native Method) at` `java.lang.reflect.Method.invoke(Method.java:507) at` `com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) at` `com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600) at` `dalvik.system.NativeStart.main(Native Method)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:15:05.670

我几天前遇到了这个问题，请检查你自己画廊的 adpater 检查它的 getView() 方法，看看你是否在某些 if 情况下返回 null，只需将 return null 替换为 new View(context) （或其他视图但 null ）将简单地解决这个问题。祝你好运

# oracle - Oracle Reports 字体子集

> ID：11432292
> 
> 赞同：1
> 
> 时间：2012-07-11T12:05:46.783
> 
> 标签：oracle, pdf, fonts, report, subset

我有一个 Oracle Reports 10g rdf，它使用非标准字体，当客户端机器没有安装字体时会出现乱码。我的客户机器主要是基于 Windows 的，而我的服务器是基于 Linux 的

我在互联网上搜索信息并偶然发现了字体子集配置，它在我的本地机器上运行良好，生成了包含字体的 PDF 文件。此 PDF 在所有机器上打开都没有问题。

我已经在我的服务器上完成了这些步骤：

*   我将字体 TTF 文件（inthrp48dmtt.ttf）复制到 u01/app/oracle/product/10.1.2/frm10g/reports/templates

*   在位于 /u01/app/oracle/product/10.1.2/frm10g/guicommon/tk/admin/ 的**uifont.ali文件中，我添加了：**

    *   在**[GLOBAL]**部分
        *   "IntHrP48DmTt" = inthrp48dmtt
    *   在**[PDF:子集]**部分
        *   inthrp48dmtt = "inthrp48dmtt.ttf"

*   我将字体 inthrp48dmtt.ttf 安装到文件夹 /usr/share/fonts/IntHrP48DmTt 并执行命令**fc-cache /usr/share/fonts/IntHrP48DmTt/**

*   重新启动报告服务器

经过所有这些步骤，字体仍然乱码。有人有什么想法吗？

# jsp - 使用 el 获取下拉列表值

> ID：11432295
> 
> 赞同：0
> 
> 时间：2012-07-11T12:05:56.910
> 
> 标签：jsp, jakarta-ee, el

我现在一直在寻找 5 个小时的解决方案，它应该很简单，但我就是不明白。

我得到了一个下拉列表，其中填充了我的数据库中的值，现在我想获取此下拉列表的选择项并使用 EL 将其设置为 java 变量。

编辑：下拉列表工作正常。我需要的是获取当前的 selectet 值并将其保存到 java 变量中

这是我对标签的尝试，但它不起作用

```
 <select id="dep" name="dep">
                        <c:forEach items="#{departmentBean.depList}" var="item">  
                            <c:set var="#{courseOfStudiesBean.depName}" value="#{item.name}" />
                            <option value="#{item.name}" >#{item.name}</option>  
                        </c:forEach> 
                    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:36:52.790

您必须使用`$`（立即评估）而不是`#`（延迟评估）。

```
<select id="dep" name="dep">
  <c:forEach items="${departmentBean.depList}" var="item">  
      <option value="${item.name}" >${item.name}</option>  
  </c:forEach> 
</select> 
```

`${param}`您可以通过集合接收 JSP 中的表单提交数据。

```
<c:if test="${not empty param.dep}">
  <c:out value="${param.dep}"/>
  <c:set var="selection" value="${param.dep}" scope="session"/>
</c:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:33:13.240

我解决了

```
<h:selectOneMenu id="dep" value="#{courseOfStudiesBean.depName}">
                 <f:selectItems value="${courseOfStudiesBean.departmentValues}"/>
</h:selectOneMenu> 
```

# jquery - jQuery Isotope 在其他内容中无法正确显示强 em 标签 - 有修复吗？

> ID：11432300
> 
> 赞同：1
> 
> 时间：2012-07-11T12:06:16.650
> 
> 标签：jquery, jquery-plugins, jquery-isotope

遇到了 jQuery Isotope 插件，并且一直在玩它。

我似乎无法解决的一件事是如何在内部和同位素元素中显示带有标记的文本（例如 us `<b>`、`<strong>`、`<em>`等）

像下面这样的代码，当放在一个元素中时会导致一些视觉问题

```
<h3 class="cont-tlt">This is an article<em> italic </em>title</h3>
<p class="cont-txt">This is some <strong>important</strong> text for our viewers</p> 
```

检查小提琴：http: [//jsfiddle.net/fGBxC/5/](http://jsfiddle.net/fGBxC/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:11:01.830

它确实有效，请[在此处查看此小提琴](http://jsfiddle.net/2U4dj/)。希望有帮助...

# iis - 无法访问http，只能访问https

> ID：11432303
> 
> 赞同：0
> 
> 时间：2012-07-11T12:06:27.913
> 
> 标签：iis

在我的 IIS 服务器上，我创建了一个 Web 应用程序并添加了两个绑定：

```
1\. http 80 binding for www.mydomain.com
2\. https 443 binding for www.mydomain.com 
```

我只能访问，当我访问[http://www.mydomain.com](http://www.mydomain.com)时，我遇到了这个问题：

```
403 - Forbidden: Access is denied.
You do not have permission to view this directory or page using the credentials that you supplied. 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:18:23.390

我首先想到的是您的 ISP。一些 ISP 阻止端口 80 用于传入流量，因为他们不希望他们的客户在家中拥有自己的网站主机。

# java - 获取 PostgreSQL 的格式化时间字符串

> ID：11432307
> 
> 赞同：0
> 
> 时间：2012-07-11T12:06:44.060
> 
> 标签：java, android, postgresql

我使用 PostgreSQL 数据库服务器。一列有“带时区的时间戳”，我通过 XML 上传时间字符串，如“2012-07-11 04:45:18+GMT+05:30”，但它接受这种格式“2012-02-16 19:47”： 22.652+05:30'

那么，如何在 Android 上格式化时间字符串？下面是我的功能。

```
Calendar c=Calendar.getInstance();
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd hh:mm:ssZ");
Log.v("AKDN", "Time string is:"+formatter.format(c.getTime()));
return formatter.format(c.getTime()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:33:48.830

这对我来说很好：

```
private String getTime()
{
    Calendar c = Calendar.getInstance();
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss.SZ");
    return formatter.format(c.getTime());
} 
```

就我而言，它输出：

```
2012-07-11 06:32:46.118-0600 
```

**编辑：**
您可以将“ **：** ”添加到您的字符串中。

或者您可以创建另一个函数来格式化时区。像这样的东西：

```
private String formatTimeZone(TimeZone tz)
{
    DecimalFormat format = new DecimalFormat("00");
    String timeZone = new String("");
    int offset = tz.getRawOffset();

    if(offset != 0)
    {
        int hours = Math.abs((offset / (60 * 1000)) / 60);
        int minutes = Math.abs((offset / (60 * 1000)) % 60);
        timeZone += offset < 0 ? "-" : "+";
        timeZone += format.format(hours);
        timeZone += ":";
        timeZone += format.format(minutes);
    }

    return timeZone;
} 
```

# caching - Go 中的线程安全（Goroutine 安全）缓存

> ID：11432308
> 
> 赞同：4
> 
> 时间：2012-07-11T12:06:45.237
> 
> 标签：caching, interface, thread-safety, go, lru

**问题 1**

我正在为我的服务器构建/搜索 RAM 内存缓存层。它是一个简单的 LRU 缓存，需要处理并发请求（都 Gets an Sets）。

我发现[https://github.com/pmylund/go-cache](https://github.com/pmylund/go-cache)声称是线程安全的。

就获取存储的接口而言，这是正确的。但是如果多个 goroutine 请求相同的数据，它们都在检索指向同一内存块的指针（存储在接口中）。如果任何 goroutine 更改了数据，这将不再是非常安全的。

*有没有解决这个问题的缓存包？*

* * *

**问题 1.1**

如果*问题 1*的答案是*否定*的，那么建议的解决方案是什么？
我看到两个选项：

*备选方案 1*
*解决方案：*使用 a 将值存储在包装结构中，`sync.Mutex`以便每个 goroutine 在读取/写入数据之前需要锁定数据。
`type cacheElement struct { value interface{}, lock sync.Mutex }`
*缺点：*缓存变得不知道对数据所做的更改，甚至可能已将其从缓存中删除。一个 goroutine 也可能锁定其他 goroutine。

*备选方案2*
*解决方案：*制作数据副本（假设数据本身不包含指针）
*缺点：*每次执行缓存Get 时分配内存，垃圾收集更多。

* * *

对不起，多部分问题。但您不必全部回答。如果您对问题 1 有一个好的答案，那对我来说就足够了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:28:50.550

备选方案 2 对我来说听起来不错，但请注意，您不必为每个`cache.Get()`. 只要您的数据可以被认为是不可变的，您就可以同时使用多个读取器访问它。

如果您打算修改它，您只需创建一个副本。这个成语称为 COW（写时复制），在并发软件设计中很常见。它特别适合具有高读/写比率的场景（就像缓存一样）。

因此，无论何时要修改缓存条目，基本上都必须：

1.  创建旧缓存数据的副本（如果有）。
2.  修改数据（在这一步之后，数据应该被认为是不可变的，不能再改变了）
3.  添加/替换缓存中的现有元素。为此，您可以使用您之前指出的 go-cache 库（它基于锁），或者编写您自己的无锁库来简单地以原子方式交换指向数据元素的指针。

此时任何执行`cache.Get`操作的 goroutine 都会获得新数据。然而，现有的 goroutines 可能仍在读取旧数据。因此，您的程序可能会同时对同一数据的许多不同版本进行操作。不过不用担心，只要所有 goroutine 完成对旧数据的访问，GC 就会自动收集它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:20:13.960

tux21b 给出了一个很好的答案。我只是指出您不必返回指向数据的指针。您可以将非指针值存储在缓存中，并且 go 将按值传递，这将是一个副本。然后您的 Get 和 Set 方法将是安全的，因为实际上没有任何东西可以修改缓存内容。

# python - 如何在 h5py 中为 HDF5 数据集分配比例（或物理尺寸）？

> ID：11432309
> 
> 赞同：3
> 
> 时间：2012-07-11T12:06:52.763
> 
> 标签：python, hdf5, h5py

我正在尝试通过 h5py 将科学数据导出为 HDF5 容器格式，以供其他软件读取。

我有一个 7 维 numpy 数组，我通过 h5py.File.create_dataset() 创建一个数据集。这工作正常。

但是，我找不到任何方法来为 h5py 中的这 7 个维度分配任何物理比例（例如米、千克、角度……）。我找不到任何有关如何执行此操作的文档。

根据[HDF5 参考资料](http://www.hdfgroup.org/HDF5/Tutor/h5dimscale.html)，这是可能的。

这是在 h5py 中实现的吗？我知道 HDF5 是可能的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T07:23:35.130

HDF5 中的维度尺度只是与您的第一个数据集相关联的另一个数据集。例如，它们可用于定义空间坐标。如果您想指示特定维度具有某些物理单位，您可以标记该维度，这是使用 HDF5 维度比例 API 完成的：`H5DSset_label()`。

在 h5py 中可以使用`h5py.dims.create_scale()`和`h5py.dims.attach_scale()`和`h5py.dims.label`来设置标签的[尺寸比例。](http://docs.h5py.org/en/latest/high/dims.html)

例如，要表示 的第一个维度`foo.dat:/data`是千克，第二个维度是米，您可以将其标签设置如下（`f`为 HDF5 文件）：

```
f['data'].dims[0].label = 'kg'
f['data'].dims[1].label = 'm' 
```

要将数据集作为高度比例添加到第二维，首先需要创建比例，然后附加数据集：

```
f['data'].dims.create_scale(f['h'], 'height')
f['data'].dims[1].attach_scale(f['h']) 
```

然后，您可以使用

```
[dim.label for dim in f['data'].dims] 
```

并且尺寸随

```
f['data'].dims[1][0] 
```

或者

```
f['data'].dims[1]['height'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:29:35.140

您可能需要一个属性：

```
http://code.google.com/p/h5py/wiki/HowTo#Reading_and_writing_attributes 
```

# ios - 访问当前活动显示的 UIViewController

> ID：11432316
> 
> 赞同：0
> 
> 时间：2012-07-11T12:07:31.590
> 
> 标签：ios, uiviewcontroller, modalviewcontroller

每次我的应用程序收到 Pushnotification 时，我都想展示一个 ModalView。通知到达后，我的应用程序会显示应用程序`UIViewController`内的任何 s。

我需要这个`UIViewController`来打电话

```
[presentingViewController presentModalViewController:vc animated:YES];
// presentingViewController is what I need :) 
```

**有没有办法找出哪个 UIViewController 当前处于活动状态？**

我会知道如何使用 eg`UITabbarController`或来做到这一点`UINavigationController`，但我不能依赖其中任何一个的存在。

我也尝试通过获取 rootViewController

```
[[[UIApplication sharedApplication] keyWindow] rootViewController] 
```

并从那里展示 ModalView，但是 - 当然 - 它不会显示任何其他推送/显示的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:18:17.987

我认为最简单的方法是获取每次显示控制器时更新的 id 或 UIViewController 类型的全局变量。这样，您将始终拥有对当前控制器的引用。

希望这可以帮助。

干杯!

# javascript - 无法使用ajax从数据中传递值

> ID：11432318
> 
> 赞同：0
> 
> 时间：2012-07-11T12:07:41.603
> 
> 标签：javascript, jquery, ajax, codeigniter

这非常令人沮丧，2个小时过去了，仍然无法正常工作。

我只想测试如何使用 ajax 将值传递给我的方法。代码：

Javascript

```
$('#form-payment').submit(function () {

        var request = $.ajax({
          url: "<?php echo site_url(array('home', 'update_credit_card')); ?>",
          type: "POST",
          data: 'someNumber=12'
        });

        request.done(function(data) {
            console.log('boom' + data);
        });

        request.fail(function(jqXHR, textStatus) {
            console.log('error' + textStatus);
            //print_r(jqXHR);

        });

    }); 
```

PHP

```
function update_credit_card()
{
    var_dump($_POST['someNumber']);//returns NULL value
    $somenumber = $_POST['someNumber'];

    if ($somenumber == '12') {
        print "Number is 12";
    } else {
        print "Number is not 12";
    }
} 
```

代码非常简单，但我一生都无法让它工作。T_T。

急需帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:11:42.350

你也可以这样使用。

```
var values={};
values['arg1'] = 1;
values['arg2'] = 2;

$.ajax({
  type:'POST',
  url:'....',
  data: values,
  success:function(){}
}); 
```

# c# - 从后面的代码输出Javascript时如何处理换行符

> ID：11432320
> 
> 赞同：1
> 
> 时间：2012-07-11T12:07:45.337
> 
> 标签：c#, javascript, asp.net, c#-3.0

我正在通过后面的代码输出客户端函数调用

```
Page.ClientScript.RegisterStartupScript( this.GetType(), "supportItems", scriptCalls, true ); 
```

scriptCalls 包含对客户端函数的调用，该函数具有从数据库中获取的几个字符串参数，然后在 HTML 文本区域中显示参数，因此最终需要保留换行符。如果 DB 值包含换行符，则换行符将包含在输出的客户端脚本中，这当然会导致客户端脚本错误。

我尝试通过清理函数传递 DB 值来替换换行符 ala：

```
private string CleanJavaScriptString( string stringToClean )
{
    string cleanString = stringToClean.Replace( "'", "\'" );
cleanString = cleanString.Replace( Environment.NewLine, "\n" );
return cleanString;
} 
```

但这仍然会在代码中输出实际的换行符。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:11:41.100

你需要双重转义换行符，所以......

```
private string CleanJavaScriptString( string stringToClean )
{
    string cleanString = stringToClean.Replace( "'", "\'" );
cleanString = cleanString.Replace( Environment.NewLine, "\\n" );
return cleanString;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:18:19.623

如果您可以访问它（.NET 3.5 及更高版本），最好使用它`JavaScriptSerializer`...

```
Private Sub MesgBox(ByVal sMessage As String)
  Dim serializer as New System.Web.Script.Serialization.JavaScriptSerializer()
  Dim msgedtble As String = serializer.Serialize(sMessage)
  Page.ClientScript.RegisterStartupScript(Me.GetType, "myScripts",
    "<script type='text/javascript'>alert(" & msgedtble & ");</script>")
End Sub 
```

这取自[this question/answer](https://stackoverflow.com/questions/11274180/javascript-alert-not-working-from-code-behind)。

JavaScriptSerializer 的优势在于它将处理引号、换行符以及所有您可能没有想到的字符，这些字符会影响 JavaScript。

**编辑**

这是一个相当于你所要求的 C#...

```
private string CleanJavaScriptString( string stringToClean )
{
  System.Web.Script.Serialization.JavaScriptSerializer serializer = new 
    System.Web.Script.Serialization.JavaScriptSerializer();
  return serializer.Serialize(stringToClean);
} 
```

# java - 检测活动是否正常启动或读取 NFC 标签后（无任何提示）

> ID：11432324
> 
> 赞同：3
> 
> 时间：2012-07-11T12:07:52.947
> 
> 标签：java, android, nfc, ndef, android-applicationrecord

如果使用 Android 应用程序记录 (AAR)，则意图操作是

```
android.intent.action.MAIN 
```

所以我不知道这是正常启动还是nfc启动。

无论活动是正常启动还是在读取 nfc 标签后，我都需要在我的活动中做一些稍微不同的事情。如果手机上有另一个应用程序具有相同的意图过滤器，我也不想显示选择应用程序的提示，例如：

```
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/plain" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:07:21.100

如果您将 AAR*不*作为 NDEF 消息的第一条记录（因此是第二条记录或更高版本），并且您在清单中为 NDEF 消息的第一条记录放置了一个 NDEF_DISCOVERED 意图过滤器，则您的应用程序将在从启动时获得一个 NDEF_DISCOVERED 意图一个标签。意图将具有包含标签句柄和完整 NDEF 消息的 EXTRA。

如果 AAR 是第一条记录，则会向应用发送 ACTION_MAIN Intent。此意图将不会在 EXTRA 中包含任何标签或 NDEF 消息。

为防止您的应用在扫描其他 NFC 标签时出现，请确保第一个 NDEF 记录具有您的应用独有的类型并对其进行过滤。[外部类型](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#ext-type)是专门为此目的而设计的。（由于标签中的 AAR，扫描时不会显示其他应用程序。）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-11T12:10:26.947

[编辑]：

检查您的意图中的有效负载：[EXTRA_TAG](http://developer.android.com/reference/android/nfc/NfcAdapter.html#EXTRA_TAG)或[EXTRA_NDEF_MESSAGES](http://developer.android.com/reference/android/nfc/NfcAdapter.html#EXTRA_NDEF_MESSAGES)

如果意图来自 NFC 事件，则始终会设置此额外内容。

* * *

[过时的]：

> 使用 [getIntent()](http://developer.android.com/reference/android/app/Activity.html#getIntent()) 并检查其 [操作](http://developer.android.com/reference/android/content/Intent.html#getAction())

# iphone - 如何在 iphone 中自定义消息撰写屏幕？

> ID：11432338
> 
> 赞同：2
> 
> 时间：2012-07-11T12:08:33.670
> 
> 标签：iphone, ios, email, message

现在我在 iPhone 应用程序中工作，使用 Label 设置文本，如 (To:)，Textfield 用于输入文本或数字，并添加一个加号按钮以添加联系人。当我在文本字段中输入姓名然后按加号按钮时，联系人姓名显示在文本字段中，但背景图像在文本字段中不可见，如下面我提到的图片，字段收件人：（yuvaraj）联系人背景图像为浅蓝色。请任何人帮助我。

提前致谢

![在此处输入图像描述](../Images/91900f74a7322c61cbaf2599b8fd8f8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:02:20.227

您不能自定义 MFMailComposeViewController 以避免编辑。Apple 禁止这样做，原因很简单：用户而不是您必须准确决定发送什么、发送给谁等。这同样适用于允许发送 SMS（文本）消息的 UI 控制器。而且，当然，Apple 不允许在没有与用户明确交互的情况下发送电子邮件或 SMS。用户必须验证并发送电子邮件或 SMS 消息。验证过程包括取消消息或随意更改任何单个属性的能力，包括“收件人”收件人。来自[如何自定义 MFMailComposeViewController 以便我可以将“收件人”字段设置为不可编辑？](https://stackoverflow.com/questions/5049270/how-to-customize-mfmailcomposeviewcontroller-so-that-i-can-make-the-to-field-a)但是，您可以尝试使用此链接[http://sugartin.info/2011/10/13/sending-a-mail-useing-gmail/](http://sugartin.info/2011/10/13/sending-a-mail-useing-gmail/)

# iphone - -JSONValue 失败。错误是：输入意外结束

> ID：11432342
> 
> 赞同：2
> 
> 时间：2012-07-11T12:08:51.423
> 
> 标签：iphone, ios, json

我得到 JSON 结果为`-JSONValue failed. Error is: Unexpected end of input`. 请以正确的方式指导我。

我是解析新手。我必须通过 POST 方法从服务器获取数据。我有以下细节。我必须通过 url 传递 zip

```
{"zip":"52435","methodIdentifier":"search_dealer"}

url : http://usaautoleads.com/api.php

method: post

web service name: search_dealer

response : {"success":"0","dealer":[info...]} 
```

我的代码在这里。

```
NSURL *myURL=[NSURL URLWithString:@"http://usaautoleads.com/api.php"];

NSString *post =[[NSString alloc]initWithString:@"52435"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

[request setURL:myURL]; 

[request setHTTPMethod:@"POST"];

[request setHTTPBody:postData]; 

[request setValue:@"application/json" forHTTPHeaderField:@"content-type"];

[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:46:36.003

这里的问题在于您的帖子字符串。用这个

```
NSString *zip = @"52435";
NSString *methodID = @"search_dealer";
NSString *post =[NSString stringWithFormat:@"{\"zip\":\"%@\",\"methodIdentifier\":\"%@\"}", zip, methodID]; 
```

# java - Java 和 android 测试方法

> ID：11432344
> 
> 赞同：4
> 
> 时间：2012-07-11T12:09:01.450
> 
> 标签：java, android, testing, junit, compilation

我有一个关于技术或方法的问题，我可以用它来快速简单地测试我的代码。最近，当我在做一个 android 项目时，我遇到了关于测试我的代码的困难和挫败感。每次我想测试我的代码时，我都必须重新编译整个项目并等待模拟器重新安装应用程序，这至少需要 40~50 秒才能检查一些代码是否正常工作。有没有什么方法可以编译或测试一小部分代码/1~2种方法，而不必每次都重新编译整个项目？还有哪一个是行业中最新和最广泛使用的？

======================================

附加问题。我已经对 Java 的 JUnit 测试进行了一些研究，但 JUnit 是我正在寻找的吗？或者是不同类型的测试技术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:14:02.663

你可以搜索一下 Robotium。它为您提供黑盒测试。

[http://testdroid.com/tech/54/automated-ui-testing-android-applications-robotium](http://testdroid.com/tech/54/automated-ui-testing-android-applications-robotium)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:25:26.927

也许[Robolectric](http://pivotal.github.com/robolectric/)是您正在寻找的。您可以使用 JUnit 仅测试不使用来自 android sdk 的方法的 java 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:32:29.560

你考虑过使用[AndroidTestCase](http://developer.android.com/reference/android/test/AndroidTestCase.html)吗？JUnit 只能用于非 android 特定功能，但这适用于您的 Android 特定代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:34:25.450

有一个非常详细的 android 测试帐户可在以下位置获得：

[http://developer.android.com/tools/testing/testing_android.html](http://developer.android.com/tools/testing/testing_android.html)

这包括基本测试和活动测试，并且建立在 JUnit 之上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-14T15:16:27.427

对于不想使用 Roboticum 之类的，但只坚持使用 Eclipse 内置 JUnit 测试的人，我建议这样做：

拥有三个项目：

*   安卓项目
*   AndroidProject.test
*   AndroidProject.test.android

在您的 AndroidProject.test 项目中，您只测试专门使用 Java 库的模型、控制器等。所以没有 Android Logcats、Toasts 或`Patterns.WEB_URL.matcher(url).matches())`[ `android.util.Patterns`] 之类的东西（它验证一个字符串 URL）。

在您的 AndroidProject.test.android 项目中，您可以测试使用 Android 库（如上面提到的模式验证等）的活动、服务、模型类。

为了能够将 Eclipse `Run As`->`JUnit Test`用于您的 JUnit 测试项目，您必须进行一些设置，例如`Android API`从每个单独的测试类中删除，使用`junit.framework.Assert`和`org.junit.Test`导入等。有关重现的完整分步指南我为使它工作所做的工作，我参考了我自己制作的 Stackoverflow-post：

[JUnit 测试 Android 类，而不必被迫启动（慢）模拟器。](https://stackoverflow.com/questions/23828337/android-junit-testing-models-controllers-which-only-use-java-imports-without)

# javascript - 在javascript中链接多个异步方法

> ID：11432358
> 
> 赞同：1
> 
> 时间：2012-07-11T12:09:32.193
> 
> 标签：javascript, jquery

我正在编写一个 javascript 库来抽象对我的 HTTP API 的 ajax 请求。我的每个 javascript 函数都是 jquery ajax 调用的包装器，它在完成时对用户进行回调。

例如。

```
mylib.doThing( "foo", { success:function(){alert("done");}); 
```

在我想连续执行两次 mylib.doFoo 的情况下，我有类似的东西：

```
mylib.doThing( "foo", { success:function(){ mylib.doThing( "bar", { success:function(){alert("done");}); }); 
```

对于任何超过两个步骤，这很快就会变得混乱。

是否可以提供更简洁的语法，可能更像以下？我需要如何实施`mylib.doThing()`？

```
mylib.doThing("foo").mylib.doThing("bar").alert("done"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:19:20.910

如果您只想将未指定数量的成功请求链接到最后做某事，将所有要做的事情列为自然列表而不是方法链会更清晰：

```
mylib.doThing("foo", "bar", /* all done callback -> */ function() { alert("done") }) 
```

`doThing`将在工厂内部创建嵌套回调或 - 甚至更好 - 迭代管理器，该管理器将按顺序运行所有请求，然后调用最终回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:20:58.220

```
function doThingFluent(a, b) {
  return {
    _name : a,
    _chainedCall : b,
    doMoreThingFluent : function(a1) {
      return doThing(a1, this);
    },
    done : function(callback) {
      var chained = this._chainedCall;
      var name = this._name;
      while (chained) {
        callback = function(n, c) {
          return function() {
            mylib.doThing(n, { success : c });
          };
        } (name, callback);
        name = chained._name;
        chained = chained._chainedCall;
      }

      mylib.doThing(name, {success: callback});
    }
 };

 doThingFluent("foo").doMoreThingFluent("bar").done(function(){alert("done");}) 
```

# c# - 在 Linq to XML 中获取正确的节点

> ID：11432364
> 
> 赞同：0
> 
> 时间：2012-07-11T12:09:38.823
> 
> 标签：c#, xml, linq, linq-to-xml

我试图解析包含某个频道上所有上传视频的 XML 文件。我试图在其中一个`<media:content>`节点中获取 URL 属性的值并将其放在 ViewerLocation 字段中。但是有几个。我目前的代码是这样的：

```
var videos = from xElem in xml.Descendants(atomNS + "entry")
select new YouTubeVideo()
{
    Title = xElem.Element(atomNS + "title").Value,
    Description = xElem.Element(atomNS + "content").Value,
    DateUploaded = xElem.Element(atomNS + "published").Value,
    ThumbnailLocation = xElem.Element(mediaNS + "group").Element(mediaNS + "content").Attribute("url").Value,
    ViewerLocation = xElem.Element(mediaNS + "group").Element(mediaNS + "content").Attribute("url").Value
}; 
```

它为我提供了 XML 中的第一个节点，用于输入`<media:content>`您所期望的名称。但是，XML 中的第一个条目不是我想要的。我想要第二个。

下面是相关的 XML。

```
<!-- I currently get the value held in this node -->
<media:content 
  url='http://www.youtube.com/v/ZTUVgYoeN_b?f=gdata_standard...'
  type='application/x-shockwave-flash' medium='video'
  isDefault='true' expression='full' duration='215' yt:format='5'/>

<!-- What i actually want is this one -->
<media:content
  url='rtsp://rtsp2.youtube.com/ChoLENy73bIAEQ1kgGDA==/0/0/0/video.3gp'
  type='video/3gpp' medium='video'
  expression='full' duration='215' yt:format='1'/>

<media:content
  url='rtsp://rtsp2.youtube.com/ChoLENy73bIDRQ1kgGDA==/0/0/0/video.3gp'
  type='video/3gpp' medium='video'
  expression='full' duration='215' yt:format='6'/> 
```

我想要第二个节点，因为它具有“video/3gpp”类型。我将如何选择那个？我的逻辑是

if attribute(type == "video/3gpp") 得到这个值。

但我不知道如何在 Linq 中表达这一点。

谢谢，

丹尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:11:42.920

可能是这样的；

```
where xElem.Element(atomNS + "content").Attribute("type").Value == "video/3gpp" 
```

编辑：如果不假设 OP 不了解 Linq，我不太知道如何扩展和解释这一点。您想进行原始查询；

```
from xElem in xml.Descendants(atomNS + "entry") 
where xElem.Element(atomNS + "content").Attribute("type").Value == "video/3gpp"
select new YouTubeVideo() { 
  ...
} 
```

您可以查询节点的属性，就像您可以查看文档的元素一样。如果有多个元素具有该属性，那么你可以（假设你总是想要你找到的第一个）..

```
 ( from xElem in xml.Descendants(atomNS + "entry") 
    where xElem.Element(atomNS + "content").Attribute("type").Value == "video/3gpp"
    select new YouTubeVideo() { 
      ...
    }).First(); 
```

我更改了原始帖子，因为我相信您要查询的节点是 Element(atomNS + "content")，而不是顶级 xElem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:07:33.467

使用此[Xml 库](https://github.com/ChuckSavage/XmlLib/)中的 XPath （只是因为我知道如何使用它）和相关的 Get 方法：

```
string videoType = "video/3gpp";

XElement root = XElement.Load(file); // or .Parse(xmlstring)
var videos = root.XPath("//entry")
    .Select(xElem => new YouTubeVideo()
    {
        Title = xElem.Get("title", "title"),
        Description = xElem.Get("content", "content"),
        DateUploaded = xElem.Get("published", "published"),
        ThumbnailLocation = xElem.XGetElement("group/content[@type={0}]/url", "url", videoType),
        ViewerLocation = xElem.XGetElement("group/content[@type={0}]/url", "url", videoType)
    }); 
```

如果视频类型没有改变，您可以将 XGetElement 替换为：

```
xElem.XGetElement("group/content[@type='video/3gpp']/url", "url") 
```

不必使用该库指定名称空间就更干净了。有微软的`XPathSelectElements()`，`XPathSelectElement()`您可以查看，但它们要求您指定名称空间并且没有很好的`Get`方法 imo。需要注意的是，该库不是一个完整的 XPath 实现，但它确实适用于上述内容。

# ruby-on-rails - Ruby on Rails 打开 URI 问题，文件源损坏

> ID：11432367
> 
> 赞同：0
> 
> 时间：2012-07-11T12:09:52.573
> 
> 标签：ruby-on-rails, ruby, encoding, character-encoding, open-uri

我在这里遇到了一个大问题。我在 rails 上使用 ruby​​：ruby 1.8.7 (2011-12-10 patchlevel 356) rails 2.3.14

我正在尝试在以下地址上使用 open-uri 进行简单的打开：

[http://jollymag.net/n/10390](http://jollymag.net/n/10390) -летни-секс-пози-във-водата.html *（链接是**NSFW**）*

但是，读取时生成的文件会产生一个奇怪的（损坏的）字符串。这也在 ruby​​ 1.9.3 和 rails 3.2.x 上进行了测试。

```
require 'open-uri'
url = 'http://jollymag.net/n/10390-летни-секс-пози-във-водата.html'
url = URI.encode(url)
file = open(url)
doc = file.collect.to_s # <- the document is broken
document = Nokogiri::HTML.parse(doc,nil,"utf8") 
puts document # <- the document after nokogiri has one line of content 
```

我尝试了 Iconv 的东西和其他东西，但没有任何效果。上面的代码或多或少是确切问题的最小孤立案例。

我很感激任何帮助，因为我现在正在尝试解决这个错误几天。

问候， 雅沃尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:52:26.357

所以这个问题对我来说是一个棘手的问题。似乎有些服务器只返回 gzip-ed 响应。因此，为了阅读，您当然必须相应地阅读它。我决定发布我的整个爬网代码，以便人们可以找到解决此类问题的更完整的解决方案。这是一个更大的课程的一部分，所以它很多时候都提到了自己。

希望能帮助到你！

```
 SHINSO_HEADERS = {
    'Accept'          => '*/*',
    'Accept-Charset'  => 'utf-8, windows-1251;q=0.7, *;q=0.6',
    'Accept-Encoding' => 'gzip,deflate',
    'Accept-Language' => 'bg-BG, bg;q=0.8, en;q=0.7, *;q=0.6',
    'Connection'      => 'keep-alive',
    'From'            => 'support@xenium.bg',
    'Referer'         => 'http://svejo.net/',
    'User-Agent'      => 'Mozilla/5.0 (compatible; Shinso/1.0;'
  }

  def crawl(url_address)
    self.errors = Array.new
    begin
      begin
        url_address = URI.parse(url_address)
      rescue URI::InvalidURIError
        url_address = URI.decode(url_address)
        url_address = URI.encode(url_address)
        url_address = URI.parse(url_address)
      end
      url_address.normalize!
      stream = ""
      timeout(10) { stream = url_address.open(SHINSO_HEADERS) }
      if stream.size > 0
        url_crawled = URI.parse(stream.base_uri.to_s)
      else
        self.errors << "Server said status 200 OK but document file is zero bytes."
        return
      end
    rescue Exception => exception
      self.errors << exception
      return
    end
    # extract information before html parsing
    self.url_posted       = url_address.to_s
    self.url_parsed       = url_crawled.to_s
    self.url_host         = url_crawled.host
    self.status           = stream.status
    self.content_type     = stream.content_type
    self.content_encoding = stream.content_encoding
    self.charset          = stream.charset
    if    stream.content_encoding.include?('gzip')
      document = Zlib::GzipReader.new(stream).read
    elsif stream.content_encoding.include?('deflate')
      document = Zlib::Deflate.new().deflate(stream).read
    #elsif stream.content_encoding.include?('x-gzip') or
    #elsif stream.content_encoding.include?('compress')
    else
      document = stream.read
    end
    self.charset_guess    = CharGuess.guess(document)
    if not self.charset_guess.blank? or
       not self.charset_guess == 'utf-8' or
       not self.charset_guess == 'utf8'
      document = Iconv.iconv("UTF-8", self.charset_guess , document).to_s
    end
    document = Nokogiri::HTML.parse(document,nil,"utf8")
    document.xpath('//script').remove
    document.xpath('//SCRIPT').remove
    for item in document.xpath('//*[translate(@src, "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz")]')
      item.set_attribute('src',make_absolute_address(item['src']))
    end
    document = document.to_s.gsub(/<!--(.|\s)*?-->/,'')
    #document = document.to_s.gsub(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/,'')
    self.content = Nokogiri::HTML.parse(document,nil,"utf8")
  end 
```

# jquery - 在切换功能中将 var 设置为 true/false

> ID：11432369
> 
> 赞同：1
> 
> 时间：2012-07-11T12:10:12.883
> 
> 标签：jquery, boolean, toggle

我有一个按钮，我希望我的变量`click`设置`true`为单击按钮`false`时以及再次单击按钮时（我想要切换功能）。

什么时候`click == true`，我希望它输出`clicked`到控制台，什么时候`click == false`我希望它输出`not clicked`。

```
var click = false 
```

这是我的切换功能：

```
$('.button').toggle(
    function(){
        click = true;
        $('.bmw').show();

    }, function() {
        click = false;
        $('.bmw').hide();

    }); 
```

我想要它做什么：

```
if(click = true) {
    console.log('clicked');
} else {
    console.log('not clicked');
} 
```

当我加载页面时，控制台显示`not clicked`，但是当我按下按钮时它不会切换到`true`. 但是，当我切换按钮时，bmw 对象**`.bmw`会显示和隐藏，这样看起来工作正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:12:46.417

您正在分配不比较 click 的值

你应该这样`==`做`=`

```
if(click == true) {
    console.log('clicked');
} else {
    console.log('not clicked');
} 
```

但是，您甚至不需要使用`if(click == true)`. 实际上，您可以直接使用`if(click)`。

编辑：从我们在评论中讨论的内容来看，您似乎只在代码首次运行时调用了 if 语句，而不是每次切换时。我建议在内部创建一个带有 if 语句的单独函数，然后在切换的两个部分中调用此方法。

# c# - 使用 Twitter Api 检查用户令牌是否有效

> ID：11432370
> 
> 赞同：1
> 
> 时间：2012-07-11T12:10:18.047
> 
> 标签：c#, asp.net, twitter, twitterizer

我有一个 Asp.Net 应用程序，可以在 twitter 上发布推文。我正在使用 Twitterizer2 来执行此操作。

当用户第一次使用应用程序时，他将被重定向到 twitter 进行身份验证。然后用户令牌将存储在我的应用程序中，这样用户就不会再次被要求登录 Twitter。这工作正常。

现在我想在发布之前验证用户令牌（即是否有效令牌）。有没有办法做这个验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:37:47.747

您可以调用[验证凭据 API](https://dev.twitter.com/docs/api/1/get/account/verify_credentials)

进行经过身份验证的调用

```
https://api.twitter.com/1/account/verify_credentials.json 
```

如果令牌正确，它将以 HTTP 200 OK 响应 - 如果不正确，它将以 401 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:50:25.803

MoH 的代码对我不起作用。这是我所做的：

```
public bool IsTwitterAccessTokenValid(String access_token, String token_secret)
    {
        var token = new Twitterizer.OAuthTokens();
        token.ConsumerKey = this.TwitterConsumerKey;
        token.ConsumerSecret = this.TwitterConsumerSecret;
        token.AccessToken = access_token;
        token.AccessTokenSecret = token_secret;

        var twitterResponse = TwitterAccount.VerifyCredentials(token);

        return (twitterResponse.Result == RequestResult.Success);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:00:19.853

我在另一个问题中找到了验证令牌的代码。Twitterizer Api 本身具有验证用户令牌的方法。代码如下：

```
Twitterizer.OAuthTokens token = new Twitterizer.OAuthTokens();
token.ConsumerKey = this.AppId;
token.ConsumerSecret = this.AppSecret;
token.AccessToken = userToken;
token.AccessTokenSecret = userSecret;

Twitterizer.TwitterResponse<Twitterizer.TwitterUser> response =
    Twitterizer.TwitterAccount.VerifyCredentials(token);

if (String.IsNullOrEmpty(response.ErrorMessage))
{
    //This is a valid token
}
else
{
    //Invalid token
} 
```

# c# - 如何使用 PHP 将 .NET 源文件编译成可执行文件？

> ID：11432374
> 
> 赞同：2
> 
> 时间：2012-07-11T12:10:33.993
> 
> 标签：c#, php, .net, linux, compiler-construction

使用 C#.NET，我编写了一个工具栏，现在存储在 toolbar.cs 文件中。

我想用另一个 php 文件将这个文件上传到我的 FTP 服务器：compiler.php

我希望能够在访问时编译toolbar.cs文件

http://www.mysite.com/toolbar.php

然后在包含准备下载可执行文件的同一目录中创建一个新文件。

我尝试这样做的原因是创建一个网站，为我的用户创建具有个性化功能的自定义工具栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:20:27.953

我相当肯定没有人用 PHP 编写过 C# 编译器，因此您将不得不通过命令行调用您的 php 代码来调用编译器。

在 Linux 上，您将使用 Mono 编译器：http: [//mono-project.com/CSharp_Compiler](http://mono-project.com/CSharp_Compiler)

这些方面的内容（取决于toolbar.cs的位置、您需要的引用以及目标的.NET版本）：

```
exec("gmcs -pkg:dotnet toolbar.cs"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:19:54.260

这个链接应该可以帮助你，使用 CSC.exe

[http://msdn.microsoft.com/en-us/library/78f4aasd.aspx](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

# android - android-json-rpc 无法解析静态字段 253 (VERSION_2)

> ID：11432376
> 
> 赞同：2
> 
> 时间：2012-07-11T12:10:40.887
> 
> 标签：android, json-rpc

我尝试使用 android-json-rpc 库调用 JSONRPC 网络服务，但我的 Eclipse logCat 抛出此警告：

```
W/dalvikvm(344): VFY: unable to resolve static field 253 (VERSION_2) in Lorg/alexd/jsonrpc/JSONRPCClient$Versions; 
```

当我尝试创建客户端时出现此警告：

```
JSONRPCClient.create (URL, JSONRPCClient.Versions.VERSION_2); 
```

因此它不能创建 JSONRPCClient。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:49:29.010

改变

这个

```
JSONRPCClient.create (URL, JSONRPCClient.Versions.VERSION_2); 
```

和

```
JSONRPCClient.create (URL, JSONRPCParams.Versions.VERSION_2); 
```

这样，如果您在清单中启用了 android 权限 INTERNET，该命令应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:45:04.750

你必须使用；

```
JSONRPCClient.create (URL, JSONRPCParams.Versions.VERSION_2); 
```

有时，Eclipse 会保留警告和错误。尝试做：项目->清理。

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:19:22.480

这听起来可能与我遇到的问题相似。库是否与 APK 一起导出？也许尝试这里列出的步骤：[https](https://stackoverflow.com/a/14131270/513038) ://stackoverflow.com/a/14131270/513038 。

# javascript - alert() 发出的警报超出预期

> ID：11432379
> 
> 赞同：0
> 
> 时间：2012-07-11T12:10:57.313
> 
> 标签：javascript, jquery, ajax

我的 index.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Untitled Document</title>
    <script src="jquery.js"></script>
    <script>
     $(function(){
       $("button").click(function(){
         $("div").load("AJAX_page.php");
       });
       $("span").on("click",function(){alert("This function is necessary")})   
     });
    </script>
  </head>
  <body>
   <button>LOAD</button>
   <span>Click on me After clicking on button</span>
   <div></div>
  </body>
</html> 
```

还有我的 AJAX_page.php

```
<body>
<script>
$(function() {
    $("span").on("click", hello);

    function hello() {
        alert("hi");
    }
});
</script>
</body> 
```

现在我的问题是

1.  首先当你点击按钮，然后如果你点击跨度它会提醒**你好**，**这个功能是必要的**

2.  再次，如果您单击按钮，它将提醒**您好**， **此功能是必要的**2 次

3.  再次，如果你点击按钮，它会提醒**你好**， **这个功能是必要的**3 次，依此类推

现在我希望它只提醒**这个功能是必要的**，并且 无论点击多少次按钮都只需要一次**你好？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:17:26.483

通常你取消绑定之前绑定的事件处理程序：

```
$("span").off('click', hello).on('click', hello); 
```

**这不适用于您的情况**，因为在每次评估 JavaScript 代码时，`hello`都会创建一个新函数，该函数与您之前绑定的实例不同。

但一切都没有丢失：您可以使用[命名空间事件*^([docs])*](http://docs.jquery.com/Namespaced_Events)来仅取消绑定特定的处理程序：

```
$("span").off('click.foo').on('click.foo', hello) 
```

或者尽可能只加载其他代码一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:27:53.397

每次单击按钮时都会运行 AJAX_page.php 文件中的脚本，这意味着每次单击按钮时它都会附加一个新的事件处理程序。

大概您在此处提供的代码是您真正想要做的事情的抽象，所以我不知道您是否真的需要该按钮来运行 AJAX_page.php 中的脚本每次单击或仅一次。如果您只需要一次，则使用 ; 将点击处理程序附加到按钮上`$("button").one("click", function() { ... })`。这将在您第一次按下按钮后取消绑定处理程序，以便跨度在您第一次按下按钮时获得其 onclick 事件，但在随后按下按钮时不会发生任何事情。

如果 AJAX_page.php 文件将在不同时间从服务器返回不同的内容，并且跨度上的警报应在按下按钮时更新，则您需要取消绑定先前附加的处理程序，如先前的答案所示。（'foo' 可以是任何你想要的字符串来标识这个点击事件，而不是同一元素上的其他点击事件；对于这个例子来说，'hello' 可能更容易记忆。）

# python - 在 TreeCtrl 上复制/复制项目

> ID：11432381
> 
> 赞同：0
> 
> 时间：2012-07-11T12:10:58.053
> 
> 标签：python, wxpython, wxwidgets

如何准确复制 TreeCtrl 上的元素，然后将其放在原始元素之后？我在 API 上找不到执行此操作的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:36:44.160

您是否尝试过 InsertItem 或 InsertItemBefore？当您选择一个树项目时，只需在事件处理程序中提取您想要复制的任何数据，创建具有唯一 ID 的新项目并使用其中一种插入方法。

或者您可以尝试使用[CustomTreeCtrl](http://wxpython.org/docs/api/wx.lib.agw.customtreectrl.CustomTreeCtrl-class.html)或 HyperTreeList。自定义的有一个 DoInsertItem 方法和几个不同于树控件的其他插入方法。

# android - Android 应用内结算退款

> ID：11432382
> 
> 赞同：7
> 
> 时间：2012-07-11T12:11:01.530
> 
> 标签：android, in-app-purchase, in-app-billing

[这是我第一次在 android 应用程序中实现应用程序内计费，我直接从指南](http://developer.android.com/guide/google/play/billing/index.html)中获取了大部分代码，一切都完全忘记了，直到我想到退款。示例应用程序已经实现了退款，但是以一种奇怪的方式！退款是在应用程序上作为购买收到的，但退款状态是完全可以理解的，但原始来源如下所示：

```
 // Count the number of times the product was purchased
        while (cursor.moveToNext()) {
            int stateIndex = cursor.getInt(2);
            PurchaseState state = PurchaseState.valueOf(stateIndex);
            // Note that a refunded purchase is treated as a purchase. Such
            // a friendly refund policy is nice for the user.
            if (state == PurchaseState.PURCHASED || state == PurchaseState.REFUNDED) {
                quantity += 1;
            }
        }

        // Update the "purchased items" table
        updatePurchasedItem(productId, quantity); 
```

即使它已退款，它也会添加项目，我不知道这是为什么？退款的商品是否有特殊 ID 或我缺少什么？我只用测试产品尝试过这个，所以我不知道。

如果数量为 0，updatePurchasedItem 方法会从表中删除条目，这似乎完全正确，所以我将代码更改为此

```
 while (cursor.moveToNext()) {
            int stateIndex = cursor.getInt(2);
            PurchaseState state = PurchaseState.valueOf(stateIndex);
            // Note that a refunded purchase is treated as a purchase. Such
            // a friendly refund policy is nice for the user.
            if(Consts.DEBUG)
                Log.v(TAG, state == PurchaseState.PURCHASED ? "purchase" : "refund");

            if (state == PurchaseState.PURCHASED) {
                quantity += 1;
            } else if(state == PurchaseState.REFUNDED) {
                quantity = 0;
            }
        }

        // Update the "purchased items" table
        updatePurchasedItem(productId, quantity); 
```

但我怀疑示例应用程序中会有错误的代码，所以我完全不确定我是否做对了！

我该如何处理？请帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:50:50.120

历史记录表每次购买都有一个条目。这意味着稍后被退款的购买将在退款后具有“已退款”状态的产品的单一历史记录。

在计算购买时，“已退款”状态表明该物品已被购买。然后由开发人员决定用户是否应该有权访问已退款的产品。（这个网站上有一个例子，一个开发商想要退还已经捐款的人的购买，并希望让他们继续使用该产品）。

如果您不想计算退款，您应该更改代码以添加购买数量，但不要为退款做任何事情。（不要将数量设置为零）。

应用内产品有 3 个品种：

1.  托管商品：Google 不允许多次购买此类商品。总量可以加起来为零或只加一。

2.  非托管商品：用户可以多次购买此类商品。总量可以为零或更多

3.  订阅：与托管项目相同。

# c# - 更改 Word 文档 XML

> ID：11432388
> 
> 赞同：2
> 
> 时间：2012-07-11T12:11:27.133
> 
> 标签：c#, xml, ms-word

我正在做的是尝试更改 Microsoft Office Word 文档 XML 的值并将其另存为新文件。我知道有一些 SDK 可以让我更轻松地完成这项工作，但我负责维护的项目就是这样做的，我被告知我也必须这样做。

我有一个基本的测试文档，其中有两个占位符映射到以下 XML：

```
<root>
  <element>
     Fubar
  </element>
  <second>
     This is the second placeholder
  </second>
</root> 
```

在我的测试项目中，我有以下内容：

```
string strRelRoot = "http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument";
//the word template
byte[] buffer = File.ReadAllBytes("dev.docx");
MemoryStream stream = new MemoryStream(buffer, true);
Package package = Package.Open(stream, FileMode.Open, FileAccess.ReadWrite);
//get the document relationship
PackageRelationshipCollection pkgrcOfficeDocument = package.GetRelationshipsByType(strRelRoot);
//iterate through relationship
foreach (PackageRelationship pkgr in pkgrcOfficeDocument)
{
    if (pkgr.SourceUri.OriginalString == "/")
    {
        //uri for the custom xml
        Uri uriData = new Uri("/customXML/item1.xml", UriKind.Relative);
        //delete the existing xml if it exists
        if (package.PartExists(uriData))
        { 
            // Delete template "/customXML/item1.xml" part
            package.DeletePart(uriData);
        }
        PackagePart pkgprtData = package.CreatePart(uriData, "application/xml");
           //hard coded test data
           string xml = @"<root>
                        <element>
                            Changed
                        </element>
                        <second>
                                The second placeholder changed
                        </second>
                    </root>";
        Stream fromStream = pkgprtData.GetStream();
        //write the string
        fromStream.Write(Encoding.UTF8.GetBytes(xml),0,xml.Length);
        //destination file
        Stream dest = File.Create("test.docx");
        //write to the destination file
        for (int a = fromStream.ReadByte(); a != -1; a = fromStream.ReadByte())
        {
            dest.WriteByte((byte)a);
        }

    }
} 
```

现在发生的是正在创建文件 test.docx，但它是一个空白文档。我不确定为什么会这样。任何人都可以就这种方法和/或我做错的事情提出任何建议，我们将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:22:29.147

在您`fromStream.Write`调用之后，流指针位于您刚刚写入的数据之后。因此，您的第一次调用`fromStream.ReadByte`已经在流的末尾，并且您什么也没读（和写）。

您需要`Seek`在写入后到流的开头（如果包返回的流支持查找），或者关闭`fromStream`（以确保您写入的数据被刷新）并重新打开它以供读取。

```
fromStream.Seek(0L, SeekOrigin.Begin); 
```

# macos - MacOS - 获取管理员密码的合法方式

> ID：11432396
> 
> 赞同：0
> 
> 时间：2012-07-11T12:11:42.057
> 
> 标签：macos, cocoa, security, xcode4

我想创建使用管理员密码在 bash 中运行一些脚本的应用程序。例如：

```
 echo **pass** | sudo -S reboot 
```

获得它的最佳方法是什么。

我查看[了本](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/authorization_concepts/01introduction/introduction.html#//apple_ref/doc/uid/TP30000995-CH204-TP1)教程，以及我所理解的所有内容 - 它是如何运行授权窗口。

```
AuthorizationRef authRef= NULL;
AuthorizationItem right = { "com.my.app", 0, NULL, 0 };
AuthorizationRights rightSet = { 1, &right };
OSStatus status;

if (AuthorizationCreate(
                        NULL, 
                        kAuthorizationEmptyEnvironment,
                        kAuthorizationFlagDefaults, 
                        &authRef) != errAuthorizationSuccess)
{
    NSLog(@"Could not create authorization reference object.");
}

status = AuthorizationCopyRights(authRef, &rightSet, kAuthorizationEmptyEnvironment, 
                                 kAuthorizationFlagDefaults |
                                 kAuthorizationFlagPreAuthorize |
                                 kAuthorizationFlagInteractionAllowed | 
                                 kAuthorizationFlagExtendRights,
                                 NULL); 
```

有没有办法在此步骤后获取密码？

或者所有这些都是错误的——并且以另一种方式存在？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:48:46.900

您不能（也不应该）获得实际密码。操作系统甚至不知道它是什么。这是故意的。正如您所注意到的，您应该创建一个可以升级其权限的小型帮助程序。

如果可能的话，您应该完全避免使用外壳。它非常脆弱。编写一个纯粹的 C/ObjC 程序来做你想做的事并提升它的权限要好得多。

# ruby-on-rails - 如何在reinerycms引擎中添加数据

> ID：11432400
> 
> 赞同：0
> 
> 时间：2012-07-11T12:11:44.753
> 
> 标签：ruby-on-rails

有没有其他人在尝试创建新钢琴时遇到批量分配错误？

ActiveModel::MassAssignmentSecurity::Refinery::Pianos::Admin::PianosController#create 中的错误

无法批量分配受保护的属性：名称、尺寸、manufactured_on(1i)、manufactured_on(2i)、manufactured_on(3i)、upright、photo_id、description、position

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:21:18.797

如果您打开模型文件并将其放入其中，您将获得更大的成功：

```
attr_accessible :dimensions, :manufactured_on, :upright, :photo_id, :description, :position 
```

模型文件应如下所示：

```
module Refinery
  module Pianos
    class Piano < Refinery::Core::BaseModel
      self.table_name = 'refinery_pianos'

      attr_accessible :dimensions, :manufactured_on, :upright, :photo_id, :description, :position

      acts_as_indexed :fields => [:dimensions, :description]

      validates :dimensions, :presence => true, :uniqueness => true

      belongs_to :photo, :class_name => '::Refinery::Image'
    end
  end
end 
```

希望有帮助。我猜这是您正在使用的版本中的一个错误，但它已在 Refinery CMS 2-0-stable 分支中修复。

# cordova - Cordova FileTransferError - 代码

> ID：11432404
> 
> 赞同：1
> 
> 时间：2012-07-11T12:11:56.987
> 
> 标签：cordova

我正在尝试下载一些文件。我用代码捕获了一个 FileTransferError： 3\. 我在哪里可以找到一个表格来了解代码号是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:17:24.587

查看[文档](http://docs.phonegap.com/en/1.9.0/cordova_file_file.md.html#FileTransferError)或阅读源代码。您会看到 3 是 FileTransferError.CONNECTION_ERR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T14:57:44.743

值得一提的是，当我的 Web 服务器的 SSL 证书无效（域不匹配）时，我遇到了这个问题。它在 HTTP 或 HTTPS 上使用有效证书运行良好。Android 和 iOS 您可以在开发期间使用“trustAllHosts”（但是，正如文档所述，强烈建议您不要在生产中使用该设置）。

# android - 使用带有计时器的服务来更新视图

> ID：11432405
> 
> 赞同：0
> 
> 时间：2012-07-11T12:11:58.097
> 
> 标签：android, android-service, textview, android-view

我不确定这是否是正确的方法，但我会尝试解释我想要做什么。

我有一个`Activity`创建一个带有标签的`fragment`调用。`TemporaryFragment`我想要做的是创建并启动一个包含 a 的服务`Timer`，`Timer`然后更新其中的时间`TextView`。

我正在考虑的方式是以某种方式，当`Service`启动时，`TextView`将从传递`Activity`到`Service`，然后`Service`保持对它的引用。

另一种可能的方法是让`Activity`成为 的监听器，`Service`然后调用 中的方法`Service`来更新`TextView`。

任何想法都会很棒，也许还有一些选择。

提前致谢。

**补充** 对不起，我还应该指定我需要这个计时器在后台运行。因此，当应用程序被发送到后台时，我需要计时器继续运行，并且只有在我告诉它时才停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:08:17.690

对于这样的小任务，Service 并不理想，而且 Service 可以独立于活动运行。如果您从移动应用程序的角度考虑，由于这个相对较小的原因，生成新线程或使用将新线程引入应用程序的计时器也不理想。

而是`Handler`在您的片段中使用。

在您的片段中创建处理程序

```
private Handler mHandler = new Handler(); 
```

执行您定义的任务调用

```
mHandler.postDelayed(mUpdateTask, 1000); 
```

或者

```
mHandler.post(mUpdateTask); 
```

并在片段中定义您的任务

```
private Runnable mUpdateTask = new Runnable() {
    public void run() {
        Toast.makeText(getActivity(), "hello world", Toast.LENGTH_SHORT).show();
        mHandler.postDelayed(this, 1000);
    }
}; 
```

如果您要显示类似时间的信息而不是类似倒计时的信息，请使用

```
mHandler.removeCallbacks(mUpdateTimeTask); 
```

如果活动不可见，则在`onPause()`方法中停止执行任务，因为更新 UI 不相关并且可以节省电池（您在`onResume()`方法中再次启动任务）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:21:58.010

我会通过使用线程来使用更简单的方法：

```
public class MainActivity extends Activity implements Callback {
    private static final int MSG_UPDATE = 1;
    private static final long INTERVAL = 1000; // in ms

    private final Handler handler = new Handler(this);
    private Thread worker;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean handleMessage(Message msg) {
        switch (msg.what) {
            case MSG_UPDATE:
                updateView();
                return true;
        }
        return false;
    }

    private void updateView() {
        // TODO tbd
    }

    @Override
    protected void onStart() {
        super.onStart();
        // start background thread
        worker = new Thread(new Runnable() {
            public void run() {
                while (!Thread.currentThread().isInterrupted()) {
                    try {
                        Thread.sleep(INTERVAL);
                    } catch (InterruptedException e) {
                        break;
                    }
                    // send message to activity thread
                    handler.sendEmptyMessage(MSG_UPDATE);
                }
            }
        });
        worker.start();
    }

    @Override
    protected void onStop() {
        super.onStop();
        // stop background thread
        worker.interrupt();
        try {
            worker.join();
        } catch (InterruptedException e) {
        }
        worker = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:22:44.880

您可以`TimerTask`为此使用 Class。覆盖该`TimerTask.run()`方法，然后将其添加`TimerTask`到`Timer`类中。

还要检查这个问题：[用定时器和定时器任务控制任务](https://stackoverflow.com/questions/2161750/android-controlling-a-task-with-timer-and-timertask)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T14:19:34.160

> 基本上，计时器背后的想法是最终我将在我的应用程序中添加一些跟踪，因此即使应用程序不在前台，也需要它继续运行 - Disco S2

基于此评论，我建议您使用驻留在后台的[本地服务](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)，做它的东西（从 开始一个线程`Service#onStart`），直到它被`stopService(..)`.

Activities on the other hand may bind and unbind to that service (see: [bindService(..)](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)) to get notified about updates or to communicate with the service in any way.

# java - 如何在 Android 中检查 GridView 是否为空？

> ID：11432409
> 
> 赞同：1
> 
> 时间：2012-07-11T12:12:20.813
> 
> 标签：java, android

我在`GridView`使用基本适配器时添加了按钮，当单击按钮然后隐藏时，按钮取决于字长。单击所有按钮后，`GridView`我想检查是否`GridView`为空显示另一个按钮。我想检查是否`GridView`为空`GridViewActivity.java`

这是代码。

GridViewActivity.java

```
public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.spellword);

        txt=(TextView)findViewById(R.id.txtview);
        image=(ImageView)findViewById(R.id.imgview1);

        map.put("melon", R.drawable.melon);
        image.setImageResource(map.get("melon"));

        gridView=(GridView)findViewById(R.id.grid1);
        gridView.setAdapter(new SpellAdapter(this,words,word));

        detector = new SimpleGestureFilter(this, this);

    } 
```

SpellAdapter.java

```
public class SpellAdapter extends BaseAdapter{

    public Context context;
    public char[] word;

    public SpellAdapter(Context context, char[] word, String orglWord)
    {
        this.context=context;
        this.word=word;

    }

    public int getCount() {
        count=word.length;
        return count;
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {

        return 0;
    }

    public View getView(final int position, View convertView, ViewGroup arg2) {

        View v = convertView;
        if (v == null) 
        {  
             LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             v = vi.inflate(R.layout.buttonlist, null);
        } 

        final Button btn= (Button)v.findViewById(R.id.letterbtn);

        btn.setText(word[position]+"");

        btn.setOnClickListener(new OnClickListener(){

            public void onClick(View v) 
            {
                letters=btn.getText();
                String word = letters.toString();
                btn.setVisibility(View.GONE);

            }

        });

        return v; 
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:16:35.810

`if (gridView.getChildCount() == 0) {...}`

如果这不起作用，请尝试：

`if (SpellAdapter.isEmpty()) {...}`或者我认为您需要执行以下操作：

`if (gridView.getAdapter().isEmpty()) {...}`

您可以[在此处](http://developer.android.com/index.html#q=GridView)和[此处找到此信息](http://developer.android.com/reference/android/widget/BaseAdapter.html)

编辑：

哦，我想我现在明白你的意思了。你只是隐藏按钮，你不删除它。所以你需要使用一个循环。首先，获取孩子的数量。然后做一个for，比如：

`for ( int x = 0; x < childcount; x++)`

里面供你使用`View v = gridView.getChildAt(x);`

Then you do `if (v instanceof Button)` and inside the if you check if the button is visible or not. If it is visible, set false inside a variable like `boolean gridViewEmpty` and break the loop. Else, set gridViewEmpty to true and then display your other buttons.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:29:54.860

you need to get child count.

```
if(gridView.getChildCount() == 0){
-------
-------
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T07:22:54.723

This question is very old but, I would also just like to add to this...

If you are displaying a `GridView` in a fragment or you are adding to the `GridView` in another `Activity` and then returning to that `Activity` you will have to have to check in `OnCreate` and `OnResume`.

The following worked for me:

```
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.studentfragment, null);

    gridView = (GridView) v.findViewById(R.id.gridView);

    empty = (TextView) v.findViewById(R.id.esc);

    if (gridView.getAdapter().isEmpty()){
        empty.setVisibility(View.VISIBLE);
    }else {
        empty.setVisibility(View.GONE);
    }

    return v;
}

@Override
public void onResume(){
    super.onResume();

    if (gridView.getAdapter().isEmpty()){
        empty.setVisibility(View.VISIBLE);
    }else {
        empty.setVisibility(View.GONE);
    }

} 
```

* * *

**OR** you can just create a method that check if `GridView` is empty and call it in `OnCreate` and `OnResume` like this:

```
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.studentfragment, null);

    gridView = (GridView) v.findViewById(R.id.gridView);

    empty = (TextView) v.findViewById(R.id.esc);

    checkIfGridIsEmpty();

    return v;
}

@Override
public void onResume(){
    super.onResume();

    checkIfGridIsEmpty();

}

private void checkIfGridIsEmpty() {

    if (gridView.getAdapter().isEmpty()){
        empty.setVisibility(View.VISIBLE);
    }else {
        empty.setVisibility(View.GONE);
    }

} 
```

**If you are only checking in `OnCreate`, then you will have to closed and re-opened the `Activity` in order to see if there was differences made to `Gridview`/`Adapter`.**

# javascript - 单击时奇怪的链接行为

> ID：11432413
> 
> 赞同：0
> 
> 时间：2012-07-11T12:12:40.397
> 
> 标签：javascript, jquery, html

我在第一次点击带有锚标签时得到了不同的行为，它与点击第二、第三、第四..点击相反。

将 href 值设置为`" "`，我在第一次点击时没有得到 HTTP GET。我看不出为什么第一次点击应该有任何其他行为，而不是点击 2（及以上）。

HTML：

```
<div id="container"></div>
<div id="menu">
<ul>
    <li><a href="" onclick='alert("clicked")'>Menu Item 1</a></li>
    <li><a href="" onclick='alert("clicked")'>Menu Item 2</a></li>
</ul>

</div>​ 
```

Javascript：

```
$(document).ready(function() {

    $("#container").contextMenu({
        menu: 'menu'
    });
});​ 
```

我使用 jquery 插件创建右键上下文菜单

这里有一个[Fiddle](http://jsfiddle.net/ArtVandelay/DVpAV/)来说明这个问题。第一次单击不会触发 HTTP GET，但如果再次打开菜单然后单击。它按预期启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:21:25.840

在菜单项的单击处理程序（当前是对 alert() 的调用）中，您应该`event.preventDefault();`阻止浏览器跟踪链接。即使`href=""`是空的，浏览器仍然认为这是对新页面的调用并重新加载页面。

您还可以使用旧的空锚标记技术，使用`href="#"`. 这不会导致浏览器加载新的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:33:09.867

使用 contextMenu 的 onSelect 事件来发挥你的作用。

$(文档).ready(函数() {

```
$("#container").contextMenu({
    menu: 'menu',
    onSelect: function(e) { alert('this is where you want your logic');}
}); 
```

});​</p>

# c# - 多项目源 (wpf)

> ID：11432419
> 
> 赞同：0
> 
> 时间：2012-07-11T12:13:14.810
> 
> 标签：c#, wpf

```
MySqlCommand cmd = new MySqlCommand(query, conn);
dt.Load(cmd.ExecuteReader());
List<string> list = new List<string>();
  while (combodata.Read())
  {
     list.Add(combodata.GetString(0));
  }
source.DataSource = dt;

dataGrid1.ItemsSource = source; 
```

如何`list`添加`source`？

```
source.DataSource = dt;
source.DataSource = list; 
```

错误的...

我需要添加`dataGrid1.ItemsSource`一个`dt`，`list` 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:21:33.393

您可以使用[`CompositeCollection`](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)：

```
var cc = new CompositeCollection();
cc.Add(new CollectionContainer { Collection = new DataView(dt) });
cc.Add(new CollectionContainer { Collection = list });
dataGrid1.ItemsSource = cc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:15:59.960

你不能设置`DataTable`为，`ItemsSource`因为它没有实现`IEnumerable`。您可以使用数据视图：

```
dataGrid1.ItemsSource = dt.AsDataView(); 
```

# macos - QT 库作为 Mac 应用程序中的框架

> ID：11432423
> 
> 赞同：1
> 
> 时间：2012-07-11T12:13:44.103
> 
> 标签：macos, frameworks, qt-creator, dyld

我使用QT Creator，当我构建应用程序时，应用程序正在运行，我的机器上没有问题。但是，当我将我的应用程序发送到我的另一台 Mac 时，我收到了错误：

> Dyld 错误消息：库未加载：/Users/MyDevUsername/QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtOpenGL.framework/Versions/4/QtOpenGL 引用自：/Users/OtherMachineUsername/Desktop/myapp.app/内容/MacOS/myapp 原因：找不到图像

我知道，我的应用程序资源文件夹中没有 QT 作为框架。我不知道如何编译我的应用程序以使 QT Lib 作为应用程序内框架存在。

# c# - 更新数据库中的多条记录

> ID：11432424
> 
> 赞同：1
> 
> 时间：2012-07-11T12:13:46.400
> 
> 标签：c#, asp.net, linq-to-sql

我正在尝试更新我的数据库中的多条记录，我有下面的代码，我用它来更新 1 个项目。
如何更新多个？

```
abcProduct productUpdate = dc.abcProducts.Single(p => p.feedSubmitId == submissionId);
productUpdate.prodPublished = '1'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:16:06.083

```
var products = dc.abcProducts.Where(p => p.feedSubmitId == submissionId);
foreach(var product in products)
{
  product.prodPublished = '1';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:23:23.610

试试这个

```
dc.abcProducts.Where(p => p.feedSubmitId == submissionId).ToList().ForEach(x=>x.prodPublished = '1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:25:48.713

您还可以在数据库中编写存储过程。

```
CREATE PROCEDURE SetProdPublished
    @submissionId int
    @prodPublished int
AS
    UPDATE AbcProducts SET prodPublished = @prodPublished
    WHERE feedSubmitId = @submissionId 
```

然后将该存储过程拖到 DBML 中。然后，您可以调用该存储过程。

```
dataContext.SetProdPublished(someSubmissionId, 1); 
```

如果要更新多行，这将比在代码中循环更新它们要快，如果要更新很多行则要快得多。

# css-selectors - Selectivizr 是在视觉上启用边框半径还是仅添加选择器？

> ID：11432425
> 
> 赞同：0
> 
> 时间：2012-07-11T12:13:46.750
> 
> 标签：css-selectors, css, selectivizr

试图为所有浏览器提供圆角，包括版本 8 中的坏浏览器。

*   我先加载一个js框架。
*   我确实声明了一个文档类型。
*   Selectivzr 已加载。
*   所有的路径都是正确的。

我仍然看不到 IE 上的圆角。

Selectivizr 是否仅启用“css3 选择器”而不启用它可能产生的视觉变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:00:07.197

Selectivizr，正如命名和记录的那样，仅支持[CSS3 选择器](http://www.w3.org/TR/css3-selectors)。它不支持 CSS3 属性，例如`border-radius`.

要添加对`border-radius`IE < 9 的支持，您将需要包含一个额外的库，例如[CSS3 PIE](http://css3pie.com/)。

# java - 我们可以使用 post 参数单击 servlet 上的按钮吗？

> ID：11432426
> 
> 赞同：0
> 
> 时间：2012-07-11T12:13:49.533
> 
> 标签：java, javascript, servlets, post

行。这个问题可能非常愚蠢，但我将这个问题视为一个实际问题。

我的客户有一个基于 servlet 的页面，其中有几个下拉菜单和一个提交按钮。

在选择下拉值并单击按钮时，ajax 调用会获取一些显示在同一页面上的报告数据。

我的工作是获取这份报告数据。

从我的角度来看，我只能以以下格式将 post 参数传递给 servlet：

```
postDataOne["comboId"] = "null";
map<string, string> postDataTwo;
postDataTwo["reportName"] = "6";
postDataTwo["reportType"] ="dam";
postDataTwo["dam_rapor"] = "6";
postDataTwo["settlement_rapor"] = "0"; 
```

这样做只是将值设置为 servlet 上的所有下拉列表。

是否可以使用 post 参数单击按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:11:07.137

根据您自己的描述，单击该按钮只会执行一些 JavaScript 函数，该函数会发送带有 post 参数的 AJAX 请求。如果您发送相同的 AJAX 请求，您将得到相同的响应。

服务器不关心请求是如何发送的。无论它是通过单击按钮、链接还是任何其他操作发送的，都完全无关紧要。唯一重要的是它接收到的请求的 URL、方法、参数、标头和 cookie。

# javascript - 使用 javascript 操作父页面日期

> ID：11432427
> 
> 赞同：0
> 
> 时间：2012-07-11T12:13:57.753
> 
> 标签：javascript, iframe

我需要用 iframe 页面控制父页面日期我有那个代码

```
 <div id ='tree' align='center' style='margin-top:200px;'>
    <div id='enter'> Enter your Password here</div>
    <form action='' method='post' >
    <input type='text' name='number' id='pass'>
    </form>
    <div id='text' style='font-size:12px;'>Desinged By Tralala</div>
    </div>

    <script language='javascript'>
    var element = document.createElement('iframe');
    element.setAttribute('src','dt.php');
    document.getElementById("tree").replaceChild(element,document.getElementById("text"));

</script> 
```

dt.php 代码是这样的

```
<script language='javascript'>
alert(document.body.innerHTML);

</script> 
```

他的输出只是他的页面树

# xml - 为什么在使用 SOAP UI 发送 SOAP 消息时出现错误？

> ID：11432432
> 
> 赞同：0
> 
> 时间：2012-07-11T12:14:04.460
> 
> 标签：xml, soap

终点：`http://127.0.0.1:${#Project#Puerto}/DispatcherProxy`

SOAP 消息：

```
 <?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:applicationStub2="http://microsoft.com/wsdl/types/" xmlns:applicationStub3="http://agr.intel.com/ApplicationServiceSoap" xmlns:applicationStub="http://agr.intel.com/" xmlns:applicationStub4="http://agr.intel.com/ApplicationServiceSoap1" xmlns:envStub="http://agr.intel.com/">
    <SOAP-ENV:Header>
        <envStub:AuthHeader>
            <TestDataFlag>0</TestDataFlag>
            <envStub:ClientVersion>wi3.7.0.38738.81</envStub:ClientVersion>
        </envStub:AuthHeader>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <applicationStub:SearchApplications>
            <applicationStub:UserId>0</applicationStub:UserId>
            <applicationStub:StoreId>2</applicationStub:StoreId>
            <applicationStub:LocaleCode>en-US</applicationStub:LocaleCode>
            <applicationStub:Location>US</applicationStub:Location>
            <applicationStub:CategoryId>272</applicationStub:CategoryId>
            <applicationStub:AlternativeLocales></applicationStub:AlternativeLocales>
            <applicationStub:Filters>
                <applicationStub:JoinType>AND</applicationStub:JoinType>
                <applicationStub:Filter>
                    <applicationStub:FilterField>AppType</applicationStub:FilterField>
                    <applicationStub:FilterOperator>=</applicationStub:FilterOperator>
                    <applicationStub:FilterValue>All</applicationStub:FilterValue>
                </applicationStub:Filter>
            </applicationStub:Filters>
            <applicationStub:ResultStart>1</applicationStub:ResultStart>
            <applicationStub:ResultNum>24</applicationStub:ResultNum>
            <applicationStub:OrderBy>Download</applicationStub:OrderBy>
            <applicationStub:OrderByType>Desc</applicationStub:OrderByType>
            <applicationStub:DeviceProfileBitmap>1,2,8</applicationStub:DeviceProfileBitmap>
        </applicationStub:SearchApplications>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

来自服务器的回答：

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns3="http://Intel.ServicesManager.ServiceContracts" xmlns:ns1="http://Intel.ServicesManager.DispatcherProxy">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Client</faultcode>
         <faultstring>Validation constraint violation: tag name or namespace mismatch in element &lt;applicationStub:SearchApplications></faultstring>
      </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

错误在“故障字符串”标签之间。该消息应该给我带来应用程序列表。请注意，SOAP 消息取自在复制库时生成的 SENT.log 文件。

提前致谢。

# sql - scrapy sql 或 sqlite ...无法获得所需的输出

> ID：11432433
> 
> 赞同：0
> 
> 时间：2012-07-11T12:14:09.747
> 
> 标签：sql, sqlite, scrapy

我正在尝试从网站页面和页面 url（包含这些输入）中提取输入字段并将它们存储到数据库中......好的
`*** code works fine with no errors , but this isn't the desired output i want`

***蜘蛛代码：***

```
class MySpider(CrawlSpider):

    name = 'isa_spider'
    allowed_domains = ['testaspnet.vulnweb.com']
    start_urls = ['http://testaspnet.vulnweb.com']

    rules = (
                Rule(SgmlLinkExtractor(allow=('/*' ) ),callback='parse_item'),)

    def parse_item(self, response):

        hxs = HtmlXPathSelector(response)
        item=IsaItem()
        item['response_fld']=response.url

        res = hxs.select("//input[(@id or @name) and (@type = 'text' )]/@id ").extract()
        item['text_input'] = res[0] if res else None # None is default value in case no field found

        res = hxs.select("//input[(@id or @name) and (@type = 'password')]/@id").extract()
        item['pass_input'] = res[0] if res else None # None is default value in case no field found

        res = hxs.select("//input[(@id or @name) and (@type = 'file')]/@id").extract()
        item['file_input'] = res[0] if res else None # None is default value in case no field found

        return item 
```

***管道代码***

```
 class SQLiteStorePipeline(object):

        def __init__(self):
            self.conn = sqlite3.connect('./project.db')
            self.cur = self.conn.cursor()

        def process_item(self, item, spider):

            self.cur.execute("insert into inputs ( input_name) values(?)", (item['text_input'],))
            self.cur.execute("insert into inputs ( input_name) values(?)", (item['pass_input'],))
            self.cur.execute("insert into inputs ( input_name) values(?)", (item['file_input'],))
            self.cur.execute("insert into links (link) values(?)", (item['response_fld'],))
            self.conn.commit()
            return item 
```

**数据库架构** [图片](https://docs.google.com/drawings/d/1OX046CZ7L2CrlukLLw-YLObFGeE0Yk_r9t81eTSv1LI/edit)

**需要的输出** [图片](https://docs.google.com/drawings/d/1SN3AtAHrk8ShLiiPM76q1Km2ZrgTZM7m2vz3A5jtTGM/edit)
（由于我的声誉不到10，抱歉没有直接插入图片）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:56:36.453

没有测试过这个：

```
class SQLiteStorePipeline(object):

    def __init__(self):
        self.conn = sqlite3.connect('./project.db')
        self.cur = self.conn.cursor()

    def process_item(self, item, spider):

        cursor = self.cur

        target_id = ? # determine target id
        cursor.execute("insert into links (target, link) values(?, ?)", (target_id, item['response_fld'],))
        link_id = cursor.lastrowid # find out just inserted link id

        cursor.execute("insert into inputs (link_id, input_name, input_type) values(?, ?, ?)", (link_id, item['text_input'], 1))
        cursor.execute("insert into inputs (link_id, input_name, input_type) values(?, ?, ?)", (link_id, item['pass_input'], 2))
        cursor.execute("insert into inputs (link_id, input_name, input_type) values(?, ?, ?)", (link_id, item['file_input'], 3))

        self.conn.commit() 
```

# java - 要列出的数组 Json 使用 Gson 或 Xtream

> ID：11432435
> 
> 赞同：0
> 
> 时间：2012-07-11T12:14:17.420
> 
> 标签：java, arrays, list, gson

你好，我有这个跟随 json 代码。

```
[{"check":{"domain":"qwe.coedu.br"}},{"check":{"domain":"qwe.com.br"}},{"check":{"domain":"qwe.com"}}]" 
```

如何在我的对象中转换这个 json

```
class Check {String domain , String status ...} 
```

它返回 a `List<Check>`，但 Check 属性为空。看我的代码。与格森。

```
Gson gson = new Gson();
    Type fooType = new TypeToken<Collection<Check>>(){}.getType();
    System.out.println(((List<Check>)gson.fromJson("[{\"check\":{\"status\":\"2\",\"domain\":\"william.com.br\"}}]", fooType)).get(0).getDomain()); 
```

当我调试返回的列表时，它包含列表中的所有对象，但所有对象的属性都为空。

怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:26:54.423

您需要一个自定义转换器，因为您有一个包含名为 的属性的对象列表`check`。该属性属于具有属性`domain`和的类`status`。

这里有两种可能：

1.  **如果您不想更改 Json 格式，或者您根本无法**编写自己的[`JsonDeserializer`](http://google-gson.googlecode.com/svn-history/r88/trunk/docs/javadocs/com/google/gson/JsonDeserializer.html)，您将在其中实例化您的`Check`对象，然后自己设置属性是最佳选择；
2.  或者您可以**修改您的检查类**以保存`check`一个类型的属性，该类型包含一个名为的属性`domain`和另一个属性`status`。

对于第二种情况很清楚需要做什么，但对于第一种情况，您可以执行以下操作：

```
import java.lang.reflect.Type;
import java.util.Collection;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import com.google.gson.reflect.TypeToken;

public class GsonTestClass {

    static class MyDeserializer implements JsonDeserializer<Check> {

        public Check deserialize(JsonElement arg0, Type arg1,
                JsonDeserializationContext arg2) throws JsonParseException {
            JsonObject jsonObject = arg0.getAsJsonObject().get("check").getAsJsonObject();
            // this code could be improved with null checks and so on...
            return new Check( //
                    jsonObject.get("domain").getAsString(), //
                    jsonObject.get("status").getAsString() //
            );
        }

    }

    public static void main(String args[]) {
        Gson gson = new GsonBuilder().registerTypeAdapter(Check.class, new MyDeserializer()).create();
        String json = "[{\"check\":{\"status\":\"2\",\"domain\":\"william.com.br\"}}]";
        Type fooType = new TypeToken<Collection<Check>>() {}.getType();
        System.out.println((gson.fromJson(json, fooType)));
    }

    static class Check {

        private String domain;
        private String status;

        public Check() {
        }

        public Check(String domain, String status) {
            super();
            this.domain = domain;
            this.status = status;
        }

        public String getDomain() {
            return domain;
        }

        public void setDomain(String domain) {
            this.domain = domain;
        }

        public String getStatus() {
            return status;
        }

        public void setStatus(String status) {
            this.status = status;
        }

        @Override
        public String toString() {
            return "Check: " + domain + " - " + status;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:29:17.647

您的 Java 类及其`Check`字段对应于`domain``status`

```
{"status":"2","domain":"william.com.br"} 
```

在 JSON 中，因此 JSON“等效”`List<Check>`为

```
[{"status":"1","domain":"qwe.coedu.br"},{"status":"1","domain":"qwe.com.br"}] 
```

您的 JSON 具有另一层对象嵌套，其中每个列表条目都是一个具有一个名为 的属性的对象`check`。要么重组你的 JSON 以删除看似不必要的嵌套，要么反序列化为例如

```
List<Map<String,Check>> 
```

# gmp - 有GMP对数函数吗？

> ID：11432436
> 
> 赞同：10
> 
> 时间：2012-07-11T12:14:17.557
> 
> 标签：gmp, logarithm

GMP库中是否实现了任何对数函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-03T08:04:53.103

我知道你没有问如何实现它，但是......

您可以使用对数的属性实现一个粗略的：http: [//gnumbers.blogspot.com.au/2011/10/logarithm-of-large-number-it-is-not.html](http://gnumbers.blogspot.com.au/2011/10/logarithm-of-large-number-it-is-not.html)

以及 GMP 库的内部结构：[https ://gmplib.org/manual/Integer-Internals.html](https://gmplib.org/manual/Integer-Internals.html)

（编辑：基本上你只使用 GMP 表示的最重要的“数字”，因为表示的基数*比* `B^N`大得多`B^{N-1}`）

这是我对 Rationals 的实现。

```
 double LogE(mpq_t m_op)
    {
        // log(a/b) = log(a) - log(b)
        // And if a is represented in base B as:
        // a = a_N B^N + a_{N-1} B^{N-1} + ... + a_0
        // => log(a) \approx log(a_N B^N)
        // = log(a_N) + N log(B)
        // where B is the base; ie: ULONG_MAX

        static double logB = log(ULONG_MAX);

        // Undefined logs (should probably return NAN in second case?)
        if (mpz_get_ui(mpq_numref(m_op)) == 0 || mpz_sgn(mpq_numref(m_op)) < 0)
            return -INFINITY;               

        // Log of numerator
        double lognum = log(mpq_numref(m_op)->_mp_d[abs(mpq_numref(m_op)->_mp_size) - 1]);
        lognum += (abs(mpq_numref(m_op)->_mp_size)-1) * logB;

        // Subtract log of denominator, if it exists
        if (abs(mpq_denref(m_op)->_mp_size) > 0)
        {
            lognum -= log(mpq_denref(m_op)->_mp_d[abs(mpq_denref(m_op)->_mp_size)-1]);
            lognum -= (abs(mpq_denref(m_op)->_mp_size)-1) * logB;
        }
        return lognum;
    } 
```

（很久以后编辑）5年后回到这个，我只是觉得`log(a) = N log(B) + log(a_N)`即使在本机浮点实现中也出现了核心概念很酷，[这里](https://github.com/bminor/glibc/blob/master/sysdeps/ia64/fpu/e_logf.S)是 ia64 的 glibc 遇到[这个问题后我再次使用它](https://stackoverflow.com/questions/35968963/trying-to-calculate-logarithm-base-10-without-math-h-really-close-just-having)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T12:16:43.347

不，GMP中没有这样的功能。仅在 MPFR 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-19T04:17:14.850

这是： [https ://github.com/linas/anant](https://github.com/linas/anant)

提供 gnu mp 实数和复数对数、exp、sine、cosine、gamma、arctan、sqrt、polylogarithm Riemann and Hurwitz zeta、confluent hypergeometric、topologists sine 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-23T19:31:47.077

下面的方法使用了[mpz_get_d_2exp](https://gmplib.org/manual/Converting-Integers.html#Converting-Integers)并且是从[gmp R 包](https://cran.r-project.org/package=gmp)中获得的。它可以`biginteger_log`在文件中的函数下找到`bigintegerR.cc`（您首先必须下载源代码（即tar文件））。你也可以在这里看到它：[biginteger_log](https://forgemia.inra.fr/sylvain.jasson/gmp/-/blob/master/src/bigintegerR.cc#L1341)。

```
// Adapted for general use from the original biginteger_log
// xi = di * 2 ^ ex  ==> log(xi) = log(di) + ex * log(2)

double biginteger_log_modified(mpz_t x) {
    signed long int ex;
    const double di = mpz_get_d_2exp(&ex, x);
    return log(di) + log(2) * (double) ex;
} 
```

当然，上述方法可以修改为使用对数的性质（例如改变底数公式）返回任意底数的对数。

# mysql - 在jpa控制器中删除没有外键的对象

> ID：11432441
> 
> 赞同：0
> 
> 时间：2012-07-11T12:14:39.483
> 
> 标签：mysql, database, jpa

这是我的代码，

**SiteMember 类**

```
@OneToMany(mappedBy = "member",cascade=CascadeType.ALL)
    private List<MemberThread> memberThread = new ArrayList<MemberThread> 
```

和

**成员线程类**

```
@ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(nullable=false)
    private SiteMember member; 
```

**MemberThreadJpaController 类**

```
public void destroy(Long id) throws IllegalOrphanException, NonexistentEntityException, NotSupportedException, RollbackException, HeuristicMixedException, HeuristicRollbackException, SecurityException, IllegalStateException, SystemException {
        EntityManager em = null;
        try {
            em = getEntityManager();
            ut.begin();
            MemberThread memberThread;
            try {
                memberThread = em.getReference(MemberThread.class, id);
                memberThread.getId();
            } catch (EntityNotFoundException enfe) {
                throw new NonexistentEntityException("The memberThread with id " + id + " no longer exists.", enfe);
            }
            List<String> illegalOrphanMessages = null;
            List<Reply> replysOrphanCheck = memberThread.getReplys();
            for (Reply replysOrphanCheckReply : replysOrphanCheck) {
                if (illegalOrphanMessages == null) {
                    illegalOrphanMessages = new ArrayList<String>();
                }
                illegalOrphanMessages.add("This MemberThread (" + memberThread + ") cannot be destroyed since the Reply " + replysOrphanCheckReply + " in its replys field has a non-nullable memberThread field.");
            }
            if (illegalOrphanMessages != null) {
                throw new IllegalOrphanException(illegalOrphanMessages);
            }
            SiteMember member = memberThread.getMember();
            if (member != null) {
                member.getMemberThread().remove(memberThread);
                member = em.merge(member);
            }
            em.remove(memberThread);
            ut.commit();
        } finally {
            if (em != null) {
                em.close();
            }
        }
    } 
```

这将删除 SiteMember 和 MemberThread 对象，因为 MemberThread 具有 SiteMember 的外键。我怎样才能只删除 MemberThread？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:27:06.440

# 分析

在您的 MemeberThread 类中，您有一个带有 CascadeType.ALL 的 SiteMember。CascadeType 告诉在持久上下文中进行更改时要调用哪种级联操作。

来自[CascadeType API](http://www.objectdb.com/api/java/jpa/CascadeType)：

> 定义传播到关联实体的可级联操作集。值 cascade=ALL 等价于 cascade={PERSIST, MERGE, REMOVE, REFRESH, DETACH}。

调用 em.remove(memberThread) 将通过删除它来级联 SiteMember 上的所有操作。

# 解决方案

**在 MemberThread 类中更改 SiteMember 的级联类型**：

```
@ManyToOne(cascade={
    CascadeType.PERSIST, CascadeType.MERGE, 
    CascadeType.REFRESH, CascadeType.DETACH
})
@JoinColumn(nullable=false)
private SiteMember member; 
```

现在 REMOVE 操作将不会级联。

# delphi - 多部分/替代上缺少电子邮件免责声明

> ID：11432442
> 
> 赞同：1
> 
> 时间：2012-07-11T12:14:45.013
> 
> 标签：delphi, exchange-server, mime, indy

我在 Delphi 中使用 Indy 创建电子邮件并将其发送到交换邮件服务器。

对于只有一个部分的消息，交换服务器正确地添加了免责声明。但是，如果我使用 mutlipart/alternative 创建带有纯文本和 html 消息部分的电子邮件，exchange 不会添加免责声明。

我在想我一定是我的电子邮件结构错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:10:28.807

您可以检查 Exchange 传输规则中的 FallbackAction 吗？如果由于某种原因无法添加免责声明，它将：

不送一个（忽略）

发送带有原始附件的新消息（包装）

拒绝它（拒绝）

也许设置为 wrap 将解决问题......

# jquery - Fancybox 自定义 URL 图片预加载

> ID：11432446
> 
> 赞同：0
> 
> 时间：2012-07-11T12:15:08.933
> 
> 标签：jquery, image, fancybox, preload, fancybox-2

我正在整理一个画廊页面，其中的图像显示在一个[fancyBox](http://fancyapps.com/fancybox/)中。实际的图像是大文件，所以我正在运行一个 php 脚本来重新调整服务器端的原始图像文件的大小，并为 fancyBox 输出一个更小、更轻的版本。这样做的结果意味着图像的 URL有一个类似的“/images/photo.php?image=001.jpg”。

这样做意味着**fancyBox 必须被强制进入图像模式，因为它通常需要一个.jpg 文件，但它会得到一个.php 脚本。这很好用，但确实会导致 fancyBox 不再预加载下一个和上一个图像的问题**。我最初使用的更小/更轻/更快加载图像的计划在这一点上失败了，因为重新调整图像大小的 PHP 脚本需要一些时间，并导致在单击下一步和实际显示新图像之间存在令人讨厌的延迟。能够预加载下一个/上一个会很有帮助。

有没有人知道是否可以强制fancyBox预加载下一个图像，而不管它指向的文件类型是什么？

附带说明一下，不运行服务器端脚本来重新调整图像大小会导致 fancyBox 和一些浏览器放弃加载图像并很快耗尽大量内存......每个图像在重新调整大小之前约为 2MB .

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:53:29.290

尝试这个：

```
$(".fancybox").fancybox({
  type: 'image'
}); 
```

Fancybox 默认猜测 url 的内容。使用其指定内容`type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:39:14.347

我相信这个问题是特定于浏览器的。我正在处理完全相同的事情（通过带有预加载的灯箱的 php 动态调整大小）并发现虽然动态图像已按预期预加载，但 Chrome 坚持在显示时再次加载它们。预加载在 Firefox 上运行良好。我猜这与 Chrome 检测到内容是动态的有关，但我没有进一步调试。

由于我在动态调整大量图片的大小时遇到​​了同样的内存问题，我切换到将图片调整到磁盘并使用我的主 php 文件中的函数来提供直接指向磁盘上调整大小的图像的链接。这意味着 Chrome 开始正确处理预加载。

# javascript - 使用 jQuery 捕获 iframe 重新加载

> ID：11432448
> 
> 赞同：13
> 
> 时间：2012-07-11T12:15:27.760
> 
> 标签：javascript, jquery

我有一个像这样用 jQuery 动态加载的 iframe

```
jQuery('<iframe id="myFrame" src="iframesrc.php"></iframe>').load(function(){
    // do stuff when loaded
}).prependTo("#myDiv"); 
```

而且我想在每次重新加载内部框架时捕获重新加载事件。我试过这个：

```
jQuery('body').on('load', '#myDiv', function() {
    alert('iframe loaded');
}); 
```

但我没有得到任何响应，无论是在初始加载时还是在 iframe 中跟随链接时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T12:18:17.113

您在上面的示例中寻找`load`div 的操作，而不是 iframe。尝试：

```
$("#myFrame").on("load", function () {
    alert("Hi there, hello");
}) 
```

此外，如果您不使用其他库，`$()`请使用 jQuery 而不是`jQuery()`

另请注意，您要在页面上运行的任何函数都必须绑定到 jQuery 的文档就绪事件，如下所示：

```
$(function () {
    // your code goes here
    $("#myFrame").attr("src", "http://google.com"); // <- this works
})

$("#myFrame").attr("src", "http://google.com"); // <- this does not work 
```

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2014-01-28T18:29:15.150

对于新网址

```
location.assign("http:google.com"); 
```

assign() 方法加载一个新文档。

重新加载

```
location.reload(); 
```

reload() 方法用于重新加载当前文档。

# css - 我在 Shopify 上的 style.css 文件中找不到很多 CSS 引用。

> ID：11432451
> 
> 赞同：0
> 
> 时间：2012-07-11T12:15:33.987
> 
> 标签：css, web, shopify

我想从购物车页面编辑“顶级标签”类，但在 css 样式表中找不到它。我怎样才能解决这个问题？

任何人都可以帮忙吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:39:46.237

使用 A 级现代网络浏览器，例如 Chrome、Firefox 或 Safari。查找适合您选择的开发人员工具。例如，您可以为 Firefox 安装 Firebug。

有了这个，右键单击您感兴趣的元素，比如带有类顶部标签的元素。浏览器工具会准确地告诉您哪个 CSS 文件包含类的定义和行号。

这真的再简单不过了。您还可以在该定义中更改浏览器中的 CSS，并实时查看更改的作用。那是无价的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:31:43.363

我认为我们需要更多信息，但根据您所说的，我猜 top-labels 类要么位于不同的样式表中，要么是页面上的内联样式。

您可以尝试将顶部标签样式添加到您正在使用的样式表中，然后以这种方式添加您想要的样式。

# objective-c - __attribute__ ((deprecated)) 不适用于 Objective-C 协议方法？

> ID：11432452
> 
> 赞同：12
> 
> 时间：2012-07-11T12:15:34.320
> 
> 标签：objective-c, ios, xcode, llvm, clang

我需要弃用 Objective-c 协议中的单个方法。`__attribute__ ((deprecated));`在声明后添加的普通类/实例方法上。

看来，它不适用于协议方法。如果我将它们标记为已弃用并在某处使用它们，则项目编译正常，没有预期的弃用警告。

这是 Apple LLVM 3.1 中的一个缺陷，还是我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-20T23:31:57.453

尽管这里的答案提供了一些非常好的信息，但它们已经过时了。从 Xcode 5.0 和 LLVM 5.0 开始，Objective-C 协议方法的弃用警告似乎已被识别。在实现该方法时，Xcode 5 会对其进行标记：

> 警告：实施已弃用的方法

以下是我为实现已弃用的协议方法生成弃用警告的步骤：

1.  使用 . 将协议方法标记为已弃用`__deprecated`。从新的 SDK 7.0 文档中：

    > `__deprecated causes`编译器在遇到使用已弃用功能的代码时产生警告。`__deprecated_msg()`做同样的事情，支持它的编译器将打印一条消息以及弃用警告。`-Wdeprecated`这可能需要使用标志打开此类警告。`__deprecated_enum_msg()`应该在枚举上使用，支持它的编译器将打印弃用警告。

    ```
    #define __deprecated    __attribute__((deprecated)) 
    ```

    要弃用您的方法，请执行以下操作：

    ```
    - (void)aDeprecatedProtocolMethod __deprecated; 
    ```

    仅此一项就足以让 Xcode 显示弃用警告*。*但是，您应该遵循接下来的几个步骤（知道 Xcode 有时可能非常挑剔）以确保显示警告。

2.  添加带有弃用警告标签的文档注释。请参阅下面的代码示例以了解如何：

    ```
    /** Describe the method here - what does it do, how does it work, etc. Very brief.
        @deprecated This delegate method is deprecated starting in version 2.0, please use otherMethodNameHere:withAnExtraParameter: instead. */
    - (void)aDeprecatedProtocolMethod __deprecated; 
    ```

3.  清理项目（`⌘</kbd>+`⇧</kbd>+`K`) and then Build the project (`⌘</kbd>+`B`) - just because Xcode can be funky sometimes.```

我不能 100% 确定何时何地引入此功能（可能使用 SDK 7.0 和 10.9，或 Xcode 5.0 / 5.0.1，或使用 LLVM 5.0） - 但它仍然有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T15:18:09.147

好吧，我刚刚意识到，即使是苹果`__attribute__((deprecated))`最终也会使用。它也不起作用。如果我使用任何不推荐使用的委托方法，例如

```
- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView
     accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath 
```

没有警告。

所以它似乎是雷达的候选者。

编辑：提交了一个雷达，Bug ID# 11849771。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T14:38:34.087

Apple 弃用了 UITableViewDelegate 协议中的一些方法，也许您可​​以使用 Apple 的代码作为示例找到解决方案。

协议相关代码如下：

```
- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView
         accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath
 __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_NA,__MAC_NA,__IPHONE_2_0,__IPHONE_3_0); 
```

如您所见，Apple 使用宏。也许这是要走的路？

**编辑：**正如以下链接 [1]`__attribute__((deprecated))`中所述，它是一个 GCC 结构，因此这在 LLVM 中可能不起作用。我想这就是 Apple 使用宏的原因，因此在使用其他编译器时会调用其他一些（或没有）弃用构造。

[1][如何在 Xcode 中弃用方法](https://stackoverflow.com/questions/4924285/how-to-deprecate-a-method-in-xcode)

# c++ - Boost.Asio：关闭套接字并停止计时器并调用处理程序的正确方法

> ID：11432459
> 
> 赞同：2
> 
> 时间：2012-07-11T12:15:57.863
> 
> 标签：c++, boost, boost-asio

假设我有封装 asio::ip::tcp::socket 和deadline_timer 的类X。如果连接太慢，则使用计时器断开连接。这是X：

```
class X
{
public:
 typedef boost::function<void(const error_code&)> Handler;
 void f(Handler);
 void close();
private:
 void on_connected(const error_code&);
 void on_timeout(const error_code&);
 void on_work_is_done(const error_code&);
 Handler h_;
 socket s_;
 deadline_timer t_;
}; 
```

函数 f 做了一些工作（发送，接收，...），然后像这样调用处理程序：

```
void on_work_is_done(const error_code& e)
{
 //swapping handlers to release handler after function exits
 Handler h;
 h.swap(h_);
 h(e);
} 
```

在此期间，计时器 t 正在计时。所以我的问题是：什么是制作 X::close 的好方法？close() 必须关闭套接字 s 并停止计时器 t，而且它必须调用处理程序 h 似乎很自然，但只有在所有异步操作（在 s 和 t 上）都被取消之后。如果没有计时器，那么问题就解决了：

```
void X::close() { s.close(); } 
```

异步操作将被取消，on_work_is_done() 将使用 err == operation_aborted 调用，这将被传递给处理程序，然后处理程序将被释放。一切都好。但是由于有 2 个对象，并且每个对象都可能有一些未决的异步操作，因此问题似乎更复杂。因为如果我们这样做

```
void X::close() 
{
 s.close(); 
 t.cancel();
} 
```

两个处理程序 (on_work_is_done, on_timeout) 都将被调用，但我们可以从最后调用的处理程序调用交换的 handler_(err)。有一些简单的解决方案吗？

我看到以下方法：

a) 添加 size_t counter_ ，它将在 X::close() 中设置为 2，每个处理程序将其减 1。因此使 counter_ == 0 的处理程序将调用 handler_(operation_aborted);

b) 运行 t.cancel() 并从 on_timeout(err) 如果 err == operation_aborted 调用 s.cancel 并从 on_work_is_done() 调用 handler_(operation_aborted)

还是整个方法不好，有更好的方法？

# c# - 模式的正则表达式

> ID：11432462
> 
> 赞同：0
> 
> 时间：2012-07-11T12:16:02.600
> 
> 标签：c#, regex

仅选择以 ##### 开头并以**mysig**结尾的字符串。在这两者之间任何东西都是允许的，但不是 html 标签。string s="##### **mysig anthing** **##### any othersig any** ##### any **mysig** ";

一个以**othersig**结尾的不应该被选中

这是我一直在寻找的

string str="##### 这里的任何东西 / **My(sig_nature)** / 这里的任何东西 ##### 这里的任何东西 / **Notmine(sig_nature)** / 这里的任何东西 ##### 这里的任何东西 / **My(sig_nature)** / ";

我想要的是所有以 ##### 开头并以 / **My(sig_nature)** /结尾的文本

foreach(Regex.Matches 中的匹配匹配(str,@"[#]{5}.*/**My(sig_nature)**/")) Console.WriteLine(match.Value.toString());

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:24:26.940

试试这个：

```
Regex.IsMatch(strInput, @"^#####[^<>]+mysig$"); 
```

解释：

```
^         the beginning of the string

#####     '#####'

\.+       '.' (1 or more times (matching the most amount possible))

mysig     'mysig'

$         before an optional \n, and the end of the string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:54:12.067

试试这个（很多猜测进入这个）：

```
#####(?:(?!mysig|#####)[^<>])*mysig 
```

这匹配它可以找到`#####`的最接近的`mysig`位置，但`#####`前提是中间没有或没有尖括号（因此没有 HTML 标记）。

# java - 如何在 JTable 中使用来自结果集中的数据？

> ID：11432465
> 
> 赞同：0
> 
> 时间：2012-07-11T12:16:07.233
> 
> 标签：java, sql, jtable, resultset

我正在做一个学校项目，我无法将结果集中的数据存储在 JTable 中。以前我使用过[DButils](http://commons.apache.org/dbutils/)，但现在我想知道是否有一种方法可以在不必使用外部类文件的情况下做同样的事情，或者使用 DButils 是否更容易。

数据仅来自一个表，需要发生的只是数据必须显示在 JTable 中。

我会在这里发布我的代码，但我已经看过了，我能找到的唯一教程是关于如何使用和 Object [] [] 填充 JTable 的教程。我正在使用 JDBC 创建连接。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:24:45.220

那么这将需要几个步骤。

我将解释我的方式，这适用于非常大的集合，但如果您只想显示几行，则有点复杂。不过我相信它会帮助你。此方法将即时加载所需的记录，而不是预先加载整个集合。它创造了拥有整套设备的错觉，但不必等待很长时间。

1) 好的，首先，让我们假设我们有一个可以显示的漂亮 JFrame，开始。所以首先我将添加一个 JScrollPane，然后在其中添加一个 JTable。运行它并确保您有一个漂亮的窗口，其中滚动条内有一个空的 JTable。

2) 所以接下来你需要一个 JTable 的数据源。由于 JTable 是一个非常通用的组件，不是专门为 SQL 结果集制作的，因此它需要一个实现与 SQL 无关的 javax.swing.table.AbstractTableModel 的数据源。所以我们现在将创建一个实现 AbstractTableModel 的 TableModelClass，然后我们将它添加到 JTable 中，它就会开始工作。当然，诀窍是使用我们的 SQL 结果集来实现 AbstractTableModel 的所有获取数据的方法，这取决于您。从这里是我的建议->

3）由于这将是动态的，我们不需要事先加载所有数据，但我们需要一个初始设置来显示。我将有一个固定大小的 Object [][]，比如说 200 - 300 行。所以我将最初执行 SQL 并用 200-300 行的缓冲区大小填充数组。缓存多少取决于两件事：1 它应该足以获取 JTable 当前显示大小的所有数据，2，它应该足够小，以便我们滚动并获取后续缓存时它执行得非常快.

4) 现在让我们开始实现 AbstractTableModel 的所有接口方法。

5）首先我们查看初始结果集并报告列数。只需添加一个类变量，设置列数并使用以下命令返回它：public int getColumnCount()。这从现在起不会改变。

6) 还要查看结果集元数据，在类中创建一个列表变量，并添加元数据中返回的列名。使用此列表返回“getColumnName(int col)”中的列名。当然，col 索引是结果集中的列位置。

7) 现在让我们执行“int getRowCount()”。在 TableModelClass 中保留一个变量来包含 rowCount 并在此方法中返回它。提示：暂时不用担心，将其设置为固定的大数字，如 65000，这将让您在动态加载记录时滚动。一旦我们到达终点，我们会将数字设置为实际值，滚动窗格将调整为正确的比例。相信我，它工作正常。

8）现在是有趣的部分。当 JTable 呈现表格的第一个“页面”并且用户滚动时，它将开始调用“getValueAt(int row, int col)”。这将直接映射到我们的 Object[][]，但由于我们只有一个缓存，而不是整个表，当用户向下滚动时，我们将需要获取更多数据。我这样做：

```
 public Object getValueAt( int row, int col )
    {
        // load failed before, no more trying...
        if( loadExceptionOccur || ( row >= visualTableSize ) ) return( "" );

        // check if requested row is OUT of cache …
        try{             
        if( 
            // less than cache lower limit...
            ( ( row < startRow ) 
            || 
            // Beyond cache upper limit...
            ( row >= startRow + tableDataCache.size()) ) 
                        // Stop unnecessary loading, because of Jtable readjusting 
                        // its visual table size and redrawing the entire table.
                        && !tableRedraw

        // yes, get new cache...
        ){ 
            load( row );   // <- below is code
        }

            // now we now the row is in cache, so ->

            // verify requested cell in cache, or beyond data rows, 
            if( 
                    // greater than lower limit
                    ( row >= startRow ) 
                    && 
                    // less than upper limit...
                    ( row < ( startRow + tableDataCache.size() ) ) 
            ){
                    tableRedraw = false;

             // just get the data from the cache. tableDataCache is just your Object[][] array…
                    Object cellValue = ( ( recordClass ) tableDataCache.get( row-startRow ) ).getValueAt( col );

                    return ( cellValue );
            }
            else{
                    // just show as blank
                    return( "" );            
            }                
        }
        catch( Exception error  ){

    … 
```

如果缓存未命中，您需要重新加载数据缓存。我通常会在请求的行之前加载一些行，而在请求行之前加载一些行，至少对于 JTable 页面大小，这样我们只去一次数据库来渲染屏幕。缓存越大，加载前滚动越多，但加载缓存所需的时间越长。如果您对其进行微调，缓存处理可能几乎不会引起注意。

这是“加载”的实现：

```
public void load( int rowIndex )
    throws KExceptionClass
    {
        // calculate start of new cache, if not enough rows for top half of cache 
        // then start from 0
        int halfCache = cacheSize / 2 ;
        int DBStartRow = 0;       
        if( rowIndex > halfCache ) DBStartRow = rowIndex - halfCache;

        //Do query to DB
        try{

            SQLP.load( DBStartRow, cacheSize );   // <- using jdbc load from DbsartRow as many rows as cacheSize. Some sample SQL paging code below ->

        }catch( Exception loadError ){

           // if the database fails or something do this, so you don’t get a billion errors for each cell. ->

            //set load failed flag, kill window                        
            loadExceptionOccur = true;         
            visualTableSize = 0;
            tableDataCache = new ArrayList< recordClass >();        
            fireTableDataChanged();  // clear the Jtable 

            // log error
            log.log( this, KMetaUtilsClass.getStackTrace( loadError ) );
            // show error message
            throw new KExceptionClass( "Could not load table data! " , loadError );

        }

        //Load rows into the cache list.
        //Key field values are in the cache list as the last field in each record.
        tableDataCache.clear();       // the Object [][], wrapped in class

        while( SQLPreprocessor.nextRowValue() ) { 

            SQL.fetch( record );             //<- get JDBC rows to table cache
            tableDataCache.add( record );    // this uses my library, change to JDBC or what ever you use to access SQL
        }

        log.log( this, "cacheList size = " + tableDataCache.size());

        //---------

        if( 
            // Last requested row number        
            ( DBStartRow + cacheSize )  > 
            // Last replied row number
            ( SQLPreprocessor.getloadedStartRowIndex() + SQLPreprocessor.getloadedRowCount() ) 
            ){ 
                // It is the end of table.
                // The visual table is readjusted accordingly. 
                visualTableSize = SQLPreprocessor.getloadedStartRowIndex() + SQLPreprocessor.getloadedRowCount();   
                fireTableDataChanged(); 
                tableRedraw = true;
            }

        startRow = SQLPreprocessor.getloadedStartRowIndex();                        

        log.log( this, "visualTableSize = " + visualTableSize );  

    } 
```

好的，这将在小缓存中动态加载数据，这将给人一种拥有整套的印象。如果用户滚动到中间或一直滚动到最后，JTable 将只询问需要显示的数据，而不是在移动时显示所有行，所以，如果你有一个 10K 行的表，但 JTable 只有 20行高，滚动到最后只需要 40 - 50 行来加载。挺棒的。您的用户会印象深刻。

现在的问题是负载假定您有一个 SQL 游标，它按行号向前和向后移动。这个简单的事情在 SQL 中是一个相当大的挑战。对于 Oracle 检查：[http ://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)

好的，希望对您有所帮助--

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:24:07.970

当然有一种方法：遍历`ResultSet`并将找到的内容添加到`Object [][]`传递给`JTable`. 对于 ;中的每一行，二维数组中都有一行`ResultSet`。列是值。

您将遇到的问题是，如果不遍历它，您将不知道返回了多少行。这就是为什么将它加载到 a`Map<String, Object>`中可能是一个更好的主意。

这是一个示例，展示了如何做到这一点。您会在我对这个问题的回答中找到该方法（以及更多方法）：

[通过类的java sql连接](https://stackoverflow.com/questions/10617128/java-sql-connections-via-class/10617251#10617251)

```
public static List<Map<String, Object>> map(ResultSet rs) throws SQLException {
    List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
    try {
        if (rs != null) {
            ResultSetMetaData meta = rs.getMetaData();
            int numColumns = meta.getColumnCount();
            while (rs.next()) {
                Map<String, Object> row = new HashMap<String, Object>();
                for (int i = 1; i <= numColumns; ++i) {
                    String name = meta.getColumnName(i);
                    Object value = rs.getObject(i);
                    row.put(name, value);
                }
                results.add(row);
            }
        }
    } finally {
        close(rs);
    }
    return results;
} 
```

# javascript - 在 innerHTML 命令之后将 JQuery 函数重新绑定到输入字段

> ID：11432468
> 
> 赞同：0
> 
> 时间：2012-07-11T12:16:24.220
> 
> 标签：javascript, jquery, html, forms

我使用 JQuery 从 html 文件输入字段中检查文件大小和名称。输入字段为：

```
<div id="uploadFile_div">
    <input name="source" id="imageFile" type="file" style ="border: 1px solid #576675;">
</div> 
```

和jQuery：

```
$(document).ready(function(){

    $('#imageFile').bind('change', function() {

    alert("Test");
    //.... perform input checks...//

    });   
}); 
```

现在，我有一个选择框，用户可以在其中选择图像文件或视频文件，并根据它将文件发送到不同的服务器并执行适当的检查。为了重置输入字段（当用户将选择框从视频更改为图像时，我会这样做，反之亦然）我使用了这个 JavaScript 技巧：

```
document.getElementById('uploadFile_div').innerHTML = document.getElementById('uploadFile_div').innerHTML; 
```

但是在执行 1 次此 JavaScript 后，JQuery 未绑定，我在选择文件时看不到“测试”警报。

我怎样才能重新绑定 JQuery ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:26:21.350

您可以使用委托事件处理程序，将事件绑定到父 div：

```
$('#uploadFile_div').on('change','#imageFile', function() {
   // etc 
```

演示：http: [//jsfiddle.net/SfgpS/](http://jsfiddle.net/SfgpS/)

（如果您使用的 jQuery 版本早于 1.7，请使用`.delegate()`而不是`.on()`。如果您使用的是*非常*旧的 jQuery 版本，请使用`.live()`。）

当您重写`.innerHTML`有效擦除旧输入元素的容器时，包括绑定到它的事件处理程序，然后创建一个新输入。因此，您可以在此时重新运行原始`.bind()`语句以将处理程序绑定到新输入。

使用委派的事件处理程序，`.on()`您可以将处理程序绑定到*容器*，即在这种情况下绑定到 div。发生在容器的子项（ren）上的事件会冒泡到容器（然后一直到文档）。因此，在这种情况下，当更改事件到达 div 时，jQuery 检查它是否源自与第二个参数中的选择器匹配的元素`.on()`，如果是，则调用您的处理程序函数。这使您可以处理在创建处理程序时不存在的元素上的事件。删除并重新添加子元素并不重要，因为处理程序已绑定到容器。

（请注意，如果您省略第二个参数，`.on()`它会创建一个与 . 相同的非委托处理程序`.bind()`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:20:13.353

为什么不将整个混乱包装在一个您可以同时调用的函数中`onReady`，然后在您想要重置上传表单时调用？

```
var resetUpload = function() {

  document.getElementById('uploadFile_div').innerHTML = document.getElementById('uploadFile_div').innerHTML;

  $('#imageFile').bind('change', function() {
    alert("Test");
    //.... perform input checks...//
  });
}

// run on ready
$(document).ready(function () {
  resetUpload();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:23:06.877

您使用的是什么版本的 jQuery？

您可以使用`.live()`or `.on()`(jQuery >= 1.7) 代替`.bind()`

# build - Intellij IDEA 项目中的自定义构建步骤

> ID：11432485
> 
> 赞同：12
> 
> 时间：2012-07-11T12:17:42.580
> 
> 标签：build, intellij-idea, custom-build-step

我有一个**外部工具，每次****Intellij 运行 Make**时都需要执行。在 Eclipse 中，我可以轻松地修改构建步骤，但我不知道如何在这里实现。

有任何想法吗？

我希望它可以使用外部脚本处理我的资源，而不必在每次测试运行之前手动运行它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T12:29:02.770

现在可以通过 Ant 或 Maven 实现。

例如，您可以添加`build.xml`到`Ant Build`IntelliJ IDEA 的面板中，创建将使用`<exec>`任务运行命令行工具的 Ant 目标，右键单击此目标并将其设置为自动运行（`Execute on`|`Before Compilation`或`After Compilation`）。

# entity-framework - 如何为 MS Access 数据库使用实体框架

> ID：11432488
> 
> 赞同：27
> 
> 时间：2012-07-11T12:18:03.330
> 
> 标签：entity-framework, c#-4.0, jet-ef-provider

我必须在 C#.Net 4.0 中开发一个桌面 Windows 应用程序，它将在三个不同的数据库中运行，即。MS Access 2007 及更高版本、Oracle 11G 和 SQL Server 2008。现在我想在我的应用程序中使用实体框架。这是在我的应用程序中使用 EF 的最佳选择吗？如果是，那么如何使用 Access 数据库的实体框架？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-01-05T15:57:22.743

您可以使用 Microsoft Access 的实体框架提供程序将 EF 与 Microsoft Access 一起使用。您可以为 Access 找到 EF 提供程序

[https://github.com/bubibubi/JetEntityFrameworkProvider](https://github.com/bubibubi/JetEntityFrameworkProvider)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-12T10:06:38.377

See [this](https://stackoverflow.com/q/11197259/20048) answer. Ask yourself why you need Access, could you use SQL Express instead? If you absolutely need Access then it would seem EF is not the right choice in this instance.

Putting Access to one side for the moment, it's perfectly possible to change data providers with EF (particularly code-first) as EF abstracts a lot of the database goo away from your code; depending on the database design it could be as simple as changing the connection string dynamically. The practical implications of this really do depend on your database design and the nature and complexity of the application you are building. See [this](https://stackoverflow.com/q/1493554/20048) question for example, here's [another](http://blogs.devart.com/dotconnect/entity-framework-code-first-support-for-oracle-mysql-postgresql-and-sqlite.html) example.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-20T09:50:29.397

在使用 MS Access 时，我们使用 Dapper 作为我们的 ORM 和存储库。这是梦幻般的。

# objective-c - smulwb 汇编指令

> ID：11432493
> 
> 赞同：1
> 
> 时间：2012-07-11T12:18:13.203
> 
> 标签：objective-c, c, assembly, arm, inline-assembly

我试图理解这段代码：

```
inline SInt32 smul32by16(SInt32 i32, SInt16 i16)
{
    register SInt32 r;
    asm volatile("smulwb %0, %1, %2" : "=r"(r) : "r"(i32), "r"(i16));
    return r;
} 
```

有人知道这个汇编指令是做什么的吗？

**更新：** PS我使用目标C。我应该理解一些汇编代码。这就是为什么我很难理解这段代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:23:55.687

它通过带符号的 16 位乘法执行带符号的 32 位，并返回 48 位结果的前 32 位。b 指定使用第三个操作数的低 16 位。

因此，将其翻译成伪代码：

```
int_48 temp;
temp = i32*i16;
result = temp >> 16; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T12:25:11.350

通过使用`asm`，您可以提供汇编程序命令。

并使用`volatile`的原因，

```
volatile for the asm construct,  to prevent GCC from deleting the asm statement as unused 
```

请参阅此[链接](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)以更好地理解

询问指令中的命令意味着：

```
SMULWB       R4, R5, R3       ; Multiplies R5 with the bottom halfword of R3,
                              ; extracts top 32 bits and writes to R4. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T12:22:41.137

有关 ARM SMUL 和 SMULW 指令的说明，请参见此处：

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0553a/CHDIABBH.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0553a/CHDIABBH.html)

# java - 如何调用一个线程在java中的特定时间运行？

> ID：11432498
> 
> 赞同：12
> 
> 时间：2012-07-11T12:18:18.540
> 
> 标签：java, multithreading, timertask

我想让线程在特定的确切时间执行（例如：2012-07-11 13:12:24 和 2012-07-11 15:23:45）

我检查了`ScheduledExecutorService`，但它只支持在第一次运行的特定时间段后执行，而且我没有任何固定的时间段，而是我有时间从数据库执行任务。

在上一个针对不同问题的问题中[，](https://stackoverflow.com/questions/11361332/how-to-call-a-method-on-specific-time-in-java) TimerTask 是解决方案，但显然我不能将线程 a`TimerTask`作为`Runnable`并且`TimerTask`两者都有`run`需要实现的方法。这里的问题是，如果我使线程扩展`TimerTask`并具有一个实现`run()`，那会起作用吗？如果没有，那么怎么可能做我想做的事？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T12:59:52.383

使用 TimerTask 。

创建一个带有字段变量的 TimerTask 对象作为您的线程。从 Timer 任务的 Run 方法调用 Thread start。

```
public class SampleTask extends TimerTask {
  Thread myThreadObj;
  SampleTask (Thread t){
   this.myThreadObj=t;
  }
  public void run() {
   myThreadObj.start();
  }
} 
```

像这样配置它。

```
Timer timer  new Timer();
Thread myThread= // Your thread
Calendar date = Calendar.getInstance();
date.set(
  Calendar.DAY_OF_WEEK,
  Calendar.SUNDAY
);
date.set(Calendar.HOUR, 0);
date.set(Calendar.MINUTE, 0);
date.set(Calendar.SECOND, 0);
date.set(Calendar.MILLISECOND, 0);
// Schedule to run every Sunday in midnight
timer.schedule(
  new SampleTask (myThread),
  date.getTime(),
  1000 * 60 * 60 * 24 * 7
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T12:26:00.003

我认为你应该更好地使用像[Quartz Scheduler](http://quartz-scheduler.org/)这样的库。这基本上是 Java 的 cron 实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:28:04.600

你看过java.util.concurrent 包中的[CountDownLatch吗？](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)它提供倒计时然后触发线程运行。我从来不需要自己使用它，但已经看过几次了。

# string - Haskell 在 String 中查找 String 的索引

> ID：11432506
> 
> 赞同：2
> 
> 时间：2012-07-11T12:18:37.923
> 
> 标签：string, haskell, find, substring

我目前正在尝试在另一个字符串中查找特定字符串的索引。因此，例如字符串`"ab"`in的结果`"ababa baab ab bla ab"`应该是 11 和 18。如果当前有问题，我的函数也得到索引 0 和 8
我的函数：

```
findSubstringIndices :: String -> String -> [Int]
findSubstringIndices text pattern = map (add 1) (findIndices (pattern `isPrefixOf`) (tails text)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:04:00.227

在这里选择合适的设备很重要。

```
import Data.Char 
```

您可以使用 Prelude 中函数的略微修改版本`words`，其定义为：

```
words :: String -> [String]
words s = case dropWhile isSpace s of
  "" -> []
  s' -> w : words s'' where (w, s'') = break isSpace s' 
```

它将字符串分解为以空格分隔的单词列表。修改相当于用字符串中的索引标记每个单词。例如：

```
words' :: String -> [(Int, String)]
words' = go 0
  where
    go n s = case break (not . isSpace) s of
      (_, "")  -> []
      (ws, s') -> (n', w) : go (n' + length w) s''
                     where
                       n'       = n + length ws
                       (w, s'') = break isSpace s' 
```

例如：

```
> words' "ababa baab ab bla ab"
[(0,"ababa"),(6,"baab"),(11,"ab"),(14,"bla"),(18,"ab")] 
```

现在，编写你的函数`findSubstringIndices`变得几乎是微不足道的：

```
findSubstringIndices :: String -> String -> [Int]
findSubstringIndices text pattern = [i | (i, w) <- words' text, w == pattern] 
```

它有效吗？是的，它确实：

```
> findSubstringIndices "ababa baab ab bla ab" "ab"
[11,18] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:59:21.853

```
findWordIndices' :: String -> String -> [Int]
findWordIndices' w = snd . foldl doStuff (0, []) . words
  where
    doStuff (cur, results) word =
        if word == w 
        then (cur + length word + 1, cur : results) 
        else (cur + length word + 1, results) 
```

但是，这会以相反的顺序返回索引。

```
g>let str = "ababa baab ab bla ab"
str :: [Char]
g>findWordIndices' "ab" str
[18,11]
it :: [Int] 
```

这可以通过使用`(++)`代替 cons ( `(:)`) 来解决。

```
findWordIndices'' :: String -> String -> [Int]
findWordIndices'' w = snd . foldl doStuff (0, []) . words
  where
    doStuff (cur, results) word =
        if word == w 
        then (cur + length word + 1, results ++ [cur]) 
        else (cur + length word + 1, results)

g>let str = "ababa baab ab bla ab"
str :: [Char]
g>findWordIndices'' "ab" str
[11,18]
it :: [Int] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:00:29.133

的另一种变体`words`：

```
import Data.Char
import Control.Arrow

words' s = 
  case dropWhile isSpace' s of
    [] -> []
    s' -> ((head >>> snd) &&& map fst) w : words' s'' 
          where (w, s'') = break isSpace' s'
  where isSpace' = fst >>> isSpace

indices text pattern =
  map fst $ filter (snd >>> ((==) pattern)) $ words' $ zip text [0..]

main = do
  putStrLn $ show $ indices "ababa baab ab bla ab" "ab" 
```

# php - 使用内置 PHP 5.4 服务器服务 Drupal 7

> ID：11432507
> 
> 赞同：13
> 
> 时间：2012-07-11T12:18:38.890
> 
> 标签：php, drupal, drupal-7, webserver

我正在寻找使用 PHP 的内置服务器开发 Drupal 7 站点。我已经成功运行了 Drupal，但没有干净的 url（例如*index.php?q=/about/*），但干净的 url（例如*/about/*）通常依赖于 mod_rewrite 或其等效项。在文档中，我看到您可以使用路由器文件运行 PHP 服务器，如下所示：

```
php -S localhost:8000 routing.php 
```

我应该在 routing.php 中放入什么来模拟 mod_rewrite？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:10:27.613

任务基本上是在 PHP 中为您的`router.php`文件编码 Drupal 的 .htaccess。

这是一个开始：

```
<?php

if (preg_match("/\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)/", $_SERVER["REQUEST_URI"])) {
  print "Error\n"; // File type is not allowed
} else
if (preg_match("/(^|\/)\./", $_SERVER["REQUEST_URI"])) {
  return false; // Serve the request as-is
} else
if (file_exists($_SERVER["DOCUMENT_ROOT"] . $_SERVER["SCRIPT_NAME"])) {
  return false;
} else {
  // Feed everything else to Drupal via the "q" GET variable.
  $_GET["q"]=$_SERVER["REQUEST_URI"];
  include("index.php");
} 
```

这应该被认为是 alpha 质量。它表示浏览 Drupal 7.14 的 .htaccess 文件 3 分钟，跳过任何需要超过 10 秒思考的内容。:)

但是，它确实允许我启动 Drupal 的安装脚本，按预期加载样式表、JS 和图像，并使用 Clean URLs 访问 Drupal 的页面。请注意，要在此环境中*安装*Drupal，我需要一个可能不会成为 Drupal 7 一部分的[补丁。](http://drupal.org/node/1414412#comment-5899380)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T01:57:31.317

我自己在寻找解决方案，我在[Drupal 8 问题](https://drupal.org/node/1543858)中找到了一个：

现在在我现有的 Drupal 7 安装中，这对我来说非常有用：

将其保存为 .htrouter.php （或任何你想要的）并在你的 Drupal 根目录中运行：

`php -S localhost:8080 .htrouter.php`

```
<?php
/**
 * @file
 * The router.php for clean-urls when use PHP 5.4.0 built in webserver.
 *
 * Usage:
 *
 * php -S localhost:8888 .htrouter.php
 *
 */
$url = parse_url($_SERVER["REQUEST_URI"]);
if (file_exists('.' . $url['path'])) {
  // Serve the requested resource as-is.
  return FALSE;
}
// Remove opener slash.
$_GET['q'] = substr($url['path'], 1);
include 'index.php'; 
```

[（从https://drupal.org/files/router-1543858-3.patch](https://drupal.org/files/router-1543858-3.patch)构建的片段）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-16T13:54:30.540

您现在可以使用以下命令更轻松地启动服务器：

`drush runserver`

# c# - Why can I pass 1 as a short, but not the int variable i?

> ID：11432508
> 
> 赞同：146
> 
> 时间：2012-07-11T12:18:41.437
> 
> 标签：c#, compiler-errors, int, type-conversion, implicit-conversion

Why does the first and second Write work but not the last? Is there a way I can allow all 3 of them and detect if it was 1, (int)1 or i passed in? And really why is one allowed but the last? The second being allowed but not the last really blows my mind.

[Demo to show compile error](http://ideone.com/tQjCm)

```
using System;
class Program
{
    public static void Write(short v) { }
    static void Main(string[] args)
    {
        Write(1);//ok
        Write((int)1);//ok
        int i=1;
        Write(i);//error!?
    }
} 
```

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-07-11T12:21:53.787

The first two are constant expressions, the last one isn't.

The C# specification allows an implicit conversion from int to short for constants, but not for other expressions. This is a reasonable rule, since for constants the compiler can ensure that the value fits into the target type, but it can't for normal expressions.

This rule is in line with the guideline that implicit conversions should be lossless.

> **6.1.8 Implicit constant expression conversions**
> 
> An implicit constant expression conversion permits the following conversions:
> 
> *   A *constant-expression* (§7.18) of type `int` can be converted to type `sbyte`, `byte`, `short`, `ushort`, `uint`, or `ulong`, provided the value of the *constant-expression* is within the range of the destination type.
> *   A *constant-expression* of type `long` can be converted to type `ulong`, provided the value of the *constant-expression* is not negative.

(Quoted from C# Language Specification Version 3.0)

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-07-11T12:20:09.560

There is no implicit conversion from `int` to `short` because of the possibility of truncation. However, a *constant expression* can be treated as being of the target type *by the compiler*.

`1`? Not a problem: it’s clearly a valid `short` value. `i`? Not so much – it could be some value > `short.MaxValue` for instance, and the compiler cannot check that in the general case.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-11T12:22:15.660

an `int` *literal* can be implicitly converted to [`short`](http://msdn.microsoft.com/en-us/library/ybs77ex4%28v=vs.80%29.aspx). Whereas:

> You cannot implicitly convert nonliteral numeric types of larger storage size to **short**

So, the first two work because the implicit conversion of literals is allowed.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-11T12:21:02.370

I believe it is because you are passing in a literal/constant in the first two, but there is not automatic type conversion when passing in an integer in the third.

Edit: Someone beat me to it!

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-12T01:35:48.140

The compiler has *told* you why the code fails:

```
cannot convert `int' expression to type `short' 
```

So here's the question you should be asking: why does this conversion fail? I googled "c# convert int short" and ended up on the MS C# page for the `short` keyword:

[http://msdn.microsoft.com/en-us/library/ybs77ex4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/ybs77ex4(v=vs.71).aspx)

As this page says, implicit casts from a bigger data type to `short` are only allowed for literals. The compiler can tell when a literal is out of range, but not otherwise, so it needs reassurance that you've avoided an out-of-range error in your program logic. That reassurance is provided by a cast.

```
Write((short)i) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-11T12:24:13.637

Because there will not be any **implicit** conversion between *Nonliteral* type to larger sized short.

*Implicit conversion is only possible for constant-expression.*

```
public static void Write(short v) { } 
```

Where as you are passing `integer` value as an argument to `short`

```
int i=1;
Write(i);  //Which is Nonliteral here 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T15:20:15.460

Converting from int -> short might result in data truncation. Thats why.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-07T05:05:31.283

Conversion from short --> int happens implicitly but int -> short will throw compile error bcoz it might result in data truncation.

# php - 将 CSV 文件保存到 mysql 数据库中

> ID：11432511
> 
> 赞同：4
> 
> 时间：2012-07-11T12:18:44.053
> 
> 标签：php, mysql, csv

我在一个目录中有很多 csv 文件。使用这些文件，我必须编写一个脚本，将它们的内容放入数据库的正确字段和表中。我几乎是 php 语言的初学者：我在 Internet 上找到了一些代码。它似乎有效，但我被困在一个阶段。这个网站上有些主题是相关的，但是我没有发现ecat的问题。

我编写了一个允许获取这些文件的路径和名称的 php 脚本。我也设法创建了一个名称取决于每个 csv 的表（例如：文件 'data_1.csv' 在 my-sql 中给出了表 data_1.csv）。所有的表都有三个相同的字段，id、url、value。最后要做的是通过读取每个文件并将值用“|”分隔来填充这些表 右表中的字符。例如，如果一行“data_1.csv”是

8756|htttp://example.com|写的东西

我想在 data_1.csv 表中获取一条记录，其中 8756 位于 id 中，htttp://example.com 在 url 字段中，并且在 value 字段中写入一些内容。我找到了使用 fcsvget 函数读取和打印这些 csv 的方法。但我不知道如何使这些行进入 SQL 数据库。有人可以在这一点上帮助我吗？

下面是我的脚本

```
<?php 
ini_set('max_execution_time', 300); 
$dbhost = 'localhost'; 
$dbuser = 'root'; 
$dbpass = ''; 
$conn = mysql_connect($dbhost, $dbuser, $dbpass, true) or die                      ('Error connecting to mysql'); 
$dbname = 'test_database'; 

mysql_select_db($dbname); 

$bdd = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname); 
$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname); 
if (mysqli_connect_errno()) { 
printf("Connect failed: %s\n", mysqli_connect_error()); 
exit(); 
} 
else { 
echo "hello <br>"; 
} 

$dir = 'C:\wamp\www\test';
$imgs = array();

if ($dh = opendir($dir)) {
while (($file = readdir($dh)) !== false) {
    if (!is_dir($file) && preg_match("/\.(csv)$/", $file)) {
        array_push($imgs, $file);
        }
    }

    closedir($dh);
} else {
    die('cannot open ' . $dir);
}
foreach ($imgs as $idx=>$img) {
    $class = ($idx == count($imgs) - 1 ? ' class="last"' : '');
    $filePath=$dir . '\\'. $img;
    $file = fopen($filePath, "r") or exit("Unable to open file!"); 
    $nom = 'FILE: ' . $dir . '\\'. $img;
    echo $nom;
    settype($nom, "string");
    echo '<br>';
    $chemin = '<img src="' . $dir . $img . '" alt="' . 
        $img . '"' . $class . ' />' . "\n";
    echo $chemin;
    $file_name =  basename($filePath);
    $sql = 'CREATE TABLE `' . $file_name . '` (id int(20000), url varchar(15), value TEXT)';
    mysql_query($sql,$conn);
    $handle = fopen($filePath, 'r');
    while (($row = fgetcsv($handle)) !== false) {
    foreach ($row as $field) {
    echo $field . '<br />';
}
}
fclose($handle);

}

echo ("VERIFY"); 
for ($i = 1; $i <= 1682; $i++) { 
    echo ("<br>A : " . $i); 
    $checkRequest= "select * from movies where movieID='". $i."'"; 
    echo ("<br>". $checkRequest); 
    if ($result = $mysqli->query($checkRequest)) { 
    printf("<br> Select ". $i ."returned %d rows.\n", $result->num_rows); 
    if ($result->num_rows == 0) { 

                    echo ("I : " . $i); 
            } 

$result->close(); 
    } 
} 

$mysqli->close(); 

?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T12:34:07.763

MySQL 提供了一个很棒的功能，允许您在单个查询中直接导入 CSV 文件。

您要查找的 SQL 命令是`LOAD DATA INFILE`

手册页在这里：[http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

快速示例：

```
LOAD DATA INFILE 'fileName'
 INTO TABLE tableName
 FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '"'
 LINES TERMINATED BY '\n'
(
field1,
field2,
field3,
@variable1,
@variable2,
etc
)
set
(
field4 = concat(@variable1,@variable2)
); 
```

这是一个相当基本的示例，但它涵盖了您想要的大部分内容。手册页提供了如何用它做一些非常复杂的事情的完整细节。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T07:33:58.663

后

```
foreach ($row as $field) {
echo $field . '<br />'; 
```

你需要`;`像这样解析结果：

```
$pieces = explode(";", $field); 
```

然后将每一块插入数据库

```
$sql = ' INSERT INTO X VALUES ("'.$pieces[0].'","'.$pieces[1].'","'.$pieces[2].'","'.$pieces[3].'","'.$pieces[4].'")';
mysql_query($sql, $conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T16:46:23.103

也可以使用[mysqlimport](https://dev.mysql.com/doc/refman/8.0/en/mysqlimport.html)

```
private function runImport($host, $username, $password, $schema, $csvFilePath) {
    $output = array();
    $cmd = "/usr/bin/mysqlimport --host=$host";
    $cmd .= ' --fields-terminated-by=\',\'  --fields-optionally-enclosed-by=\'"\' ';
    $cmd .= ' --user=' . $username . ' --password='. $password;
    $cmd .= " $schema $csvFilePath";

    exec($cmd, $output, $retVal);

    foreach ($output as $line) {
       echo "$line\n";
    }

    echo "\n\nReturn code : $retVal";
} 
```

# sql-server-2008 - 使用域帐户创建证书

> ID：11432515
> 
> 赞同：0
> 
> 时间：2012-07-11T12:19:17.207
> 
> 标签：sql-server-2008, service-broker

是否可以在 SQL Server 2008 Service Broker 中创建一个端点，支持基于证书的身份验证并使用域帐户进行授权？

例如

```
CREATE ENDPOINT ServiceBrokerEndpoint

AUTHORIZATION [domain\username]

STATE=STARTED AS TCP (LISTENER_PORT = 4022, LISTENER_IP = ALL)

FOR SERVICE_BROKER (MESSAGE_FORWARDING = DISABLED, MESSAGE_FORWARD_SIZE = 10, AUTHENTICATION = CERTIFICATE [CertificateName], ENCRYPTION = SUPPORTED ALGORITHM RC4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:29:35.473

尝试这个

```
-------------------------------------
-- connect to server
-------------------------------------
use master;
go
create master key encryption by password = '...';
create certificate [<servername>]
  with subject = '<servername>'
  , start_date = '20100216'
  , expiry_date = '20150216';

create endpoint broker 
state = started
as tcp (listenner_port = 4022)
for service_broker (authentication = certificate [<servername>]);

-- Export the public key to disk
backup certificate [<servername>]
to file = '\\someshare\<servername>.cer';

--------------------------------
-- connect to client
--------------------------------
use master;
go
create master key encryption by password = '...';
create certificate [<clientname>]
  with subject = '<clientname>'
  , start_date = '20100216'
  , expiry_date = '20150216';

create endpoint broker 
state = started
as tcp (listenner_port = 4022)
for service_broker (authentication = certificate [<clientname>]);

-- Export the public key to disk
backup certificate [<clientname>]
to file = '\\someshare\<clientname>.cer';

--create an identity for server and import the server's certificate:
create login [<servername>] with password = '...';
alter login [<servername>] disable;
create user [<servername>];

create certificate [<servername>]
  authorization [<servername>]
  from file = '\\someshare\<servername>.cer';

--authorize <servername> to connect on the broker endpoint 
grant connect on endpoint::broker to [<servername>];

---------------------------------------
-- connect to the server
---------------------------------------

--create an identity for client and import the client's certificate:
create login [<clientname>] with password = '...';
alter login [<clientname>] disable;
create user [<clientname>];

create certificate [<clientname>]
  authorization [<clientname>]
  from file = '\\someshare\<clientname>.cer';

--authorize <clientname> to connect on the broker endpoint 
grant connect on endpoint::broker to [<clientname>]; 
```

# php - Php ssh2 - 将 ssh 连接资源放入 $_SESSION

> ID：11432517
> 
> 赞同：1
> 
> 时间：2012-07-11T12:19:21.363
> 
> 标签：php, session, ssh, session-variables, libssh2

> **可能重复：**
> [无法在 php 的会话中传递 mysqli 连接](https://stackoverflow.com/questions/2125403/cant-pass-mysqli-connection-in-session-in-php)

我试图通过我的 php web 应用程序的整个浏览过程来保持 ssh 连接。基本上我有一个登录表单，其参数（登录名和密码）被传递给 ssh2_auth_password() 函数。我只是尝试将与 ssh2_connect() 关联的资源存储到 $_SESSION 中，以便可以在用户被重定向的另一个网页中使用它（如果连接成功）。相反，它发生的是 ssh 连接似乎在登录页面离开之后（即重定向发生之后）就终止了。我的问题是：有没有办法将 ssh 连接的处理程序存储到会话变量中？如果是这样，你能帮帮我吗？非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:22:40.887

您需要阅读[Session 文档](http://uk3.php.net/manual/en/intro.session.php)

我会为你引用相关部分。

> **警告**
> 
> 因为会话数据是序列化的，所以资源变量不能存储在会话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:06:35.080

您可以尝试[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)，并将 fsockopen 替换为 pfsockopen。

# javascript - 基于浏览器的远程资源缓存

> ID：11432519
> 
> 赞同：2
> 
> 时间：2012-07-11T12:19:30.490
> 
> 标签：javascript, rest, caching, browser

我的服务器上有两个 REST-ful 资源：

```
/someEntry/{id}
Response:
{
    someInfoAboutEntry: ...,
    entryTypeUrl: "/entryType/12345"
} 
```

和

```
/entryType/{id}
Response:
{
    someInfoAboutEntryType: ...
} 
```

`entryTypeUrl`用于从不同的 URL 获取有关此条目类型的附加数据。它将绑定到每个条目附近的一些“详细信息”按钮。可以有很多（比如说 100 个）条目，而只有 5 种类型（所以大多数条目指向相同`entryTypeUrl`的 .

我正在构建一个 Javascript 客户端来访问这些资源。我应该在我的 Javascript 代码中缓存`entryType`结果，还是应该依靠浏览器为我缓存数据并在每次用户单击“详细信息”按钮时发送 XHR 请求？

据我所知，这两种方法都应该可以正常工作。第二个（总是分派请求）将产生更清晰的代码。我应该坚持下去，还是有一些我不知道的地方？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:26:01.000

我肯定会让浏览器管理缓存，而不是自己编写自定义缓存层。

这样，您编写和维护的代码就更少了，并且您允许服务器（通过其 HTTP 标头）指示是否应缓存响应。如果您编写自己的缓存代码，您将删除重新获取陈旧数据的能力 - 您可以从浏览器免费获得。

# objective-c - 如何将代理详细信息设置为 NSURLDownload 对象

> ID：11432522
> 
> 赞同：3
> 
> 时间：2012-07-11T12:19:47.433
> 
> 标签：objective-c, cocoa, proxy, cfnetwork

我正在创建一个下载器，我想通过特定的代理服务器运行它。我能够将代理信息传递给 CFURLRef 对象。但不能与 NSURLDownload 一起使用，这将完全忽略所做的代理设置。

```
NSURL *url = [NSURL URLWithString:@"urlstring"];

CFReadStreamRef readStream; 
CFHTTPMessageRef message = CFHTTPMessageCreateRequest(kCFAllocatorDefault,
CFSTR("GET"),
(CFURLRef)url,
kCFHTTPVersion1_1);
readStream = CFReadStreamCreateForHTTPRequest(kCFAllocatorDefault, message);
CFTypeRef keys[2], values[2];
keys[0] = kCFStreamPropertyHTTPSProxyHost;
values[0] = @"proxy.host";
keys[1] = kCFStreamPropertyHTTPSProxyPort;
values[1] = CFNumberCreate(NULL, kCFNumberSInt32Type, @"portNo");
CFDictionaryRef proxyDict = CFDictionaryCreate(NULL, keys, values, 2, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
// boRet =
 CFReadStreamSetProperty(readStream, kCFStreamPropertyHTTPProxy, proxyDict);

CFNetworkCopyProxiesForURL(
   CFURLRef          url,
   CFDictionaryRef   proxySettings
); 
```

现在，如果我将 CFURLRef 转换为 NSURL 对象并将其传递给下载器，它不会按预期工作。如何将设置为 CFURLRef 对象的属性传递给 NSURLRequest？..还有其他方法可以实现吗？..我也尝试使用 ASIHTTPRequest 包装器..但是如何将其转换为 NSURLRequest？..任何帮助将不胜感激.

谢谢

# html - 垂直对齐不使用 display:table-cell ，需要工作 IE6

> ID：11432523
> 
> 赞同：0
> 
> 时间：2012-07-11T12:19:47.743
> 
> 标签：html, css

我试图将我的链接垂直对齐到列表的中间

*   请参阅 jsfiddle [http://jsfiddle.net/TwFxN/](http://jsfiddle.net/TwFxN/)

    我不能使用表格单元格显示或行高，因为它需要在 IE6 中工作，而行高无法工作，因为某些选项跨越 2 行

    有任何想法吗？

    非常感谢

    戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:31:56.027

不幸的是，我现在没有 IE6 访问权限，但试试这个：

```
#nav > li.rhombus {
    line-height: 5.0em;
}

#nav > li.rhombus a {
    line-height: 1;
} 
```

这将设置`<li />`行高以匹配高度。然后重置`<a />`' 的行高。

**示例：http:** [//jsfiddle.net/lnrb0b/TwFxN/2/](http://jsfiddle.net/lnrb0b/TwFxN/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:35:27.657

我无权访问 IE 6，但我认为这将正常工作：

演示：http: [//jsfiddle.net/SO_AMK/2fYLX/](http://jsfiddle.net/SO_AMK/2fYLX/)

HTML：

```
<ul id="nav">
 <li class="rhombus"><a class="rhlink" href="#"><span>Home</span></a></li>
 <li class="rhombus"><a class="rhlink" href="#"><span>Listed<br> Securities</span></a></li>
 <li class="rhombus"><a class="rhlink" href="#"><span>Market<br> Update</span></a></li>
 <li class="rhombus"><a class="rhlink" href="#"><span>Membership</span></a></li>
 <li class="rhombus"><a class="rhlink" href="#"><span>Info</span></a>
</ul> 
```

​</p>

CSS：

```
#nav a.rhlink:link, #nav a.rhlink:active, #nav a.rhlink:visited {
    display: inline-block;
    padding: 0px 5px;
    text-decoration: none;
    color: inherit;
    position: relative;
    vertical-align: middle;
    top: 25%;
}

#nav > li {
    float:left;
    position:relative;
}

#nav > li.rhombus {
    float:left;
    position: relative;
    border: 1px solid black;
    font-family: Georgia;
    color: rgb(131,0,26);
    width: 8.3em;
    text-align: center;
    height: 5.0em;
    display: block;

}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:06:57.753

如果要在每个 li 中居中每个单独的锚标记：

如果您可以将锚标记的高度设置为固定数字，则[以下](http://jsfiddle.net/TwFxN/18/)方法可以工作：

```
#nav a.rhlink:link, #nav a.rhlink:active, #nav a.rhlink:visited {
   display: block;
   padding: 0px 5px;
   text-decoration: none;
   color: inherit;
   position: absolute;
   top: 50%;
   font-size: 12px;
   margin-top: -12px;
   text-align: center;
   width: 90%;
} 
```

如果您不知道列表项的高度，则可能必须像[这样](http://jsfiddle.net/TwFxN/27/)使用 javascript ：

```
$('a').each(function() {
    $(this).css("top", Math.max(0, (($(this).parent().height() - $(this).outerHeight()) /      2)) + "px");
}); 
```

​</p>

如果要将整个列表项集居中在窗口中：

如果 ul 标签的高度保持一致，您可以执行[以下](http://jsfiddle.net/TwFxN/6/)操作：

```
#nav {
    position: absolute;
    top: 50%;
    margin-top: -5em;
} 
```

如果您希望导航包裹并仍然显示在确切的中心，您可能不得不求助于使用这样的小[javascript](http://jsfiddle.net/TwFxN/7/)：

```
$('#nav').css("top", Math.max(0, (($(window).height() - $('#nav').outerHeight()) / 2) +              $(window).scrollTop()) + "px");​ 
```

# python - Python Timer 使解释器崩溃

> ID：11432527
> 
> 赞同：3
> 
> 时间：2012-07-11T12:20:03.847
> 
> 标签：python, timer, crash, python-3.x, interpreter

我是新来的，这是我的第一个问题。我正在用 Python 3.2.3 制作游戏，我遇到了一个问题，即 Timer 对象有时会在调用它的`start()`方法后使解释器崩溃（这种情况发生在 50% 的时候，总是有一个错误窗口说 Python停止工作，不得不终止）。

我一直在简化我的代码，以便找到问题所在，我发现这个非常简单的代码会使我的解释器崩溃：

```
from threading import Timer

def hello():
  print("hello, world")

t = Timer(1.0, hello)
t.start() 
```

我尝试修复我的 Python 安装，但没有成功。我在 Windows 7 下运行 Python，不幸的是到目前为止还没有机会尝试其他操作系统，所以如果有人对此问题有任何经验，我将不胜感激任何解决方案。感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:45:54.957

脚本完成后，您不应留下线程或计时器。但是，我什至不确定以下不存在该问题的内容是否可以在您的系统上可靠地运行：

```
# This is NOT the suggested fix

from threading import Timer

def hello():
  print("hello, world")

t = Timer(1.0, hello)
t.start()
sleep(2) 
```

其他尝试重现的人没有遇到问题的原因是他们将脚本作为独立进程运行，并且当该进程退出时操作系统未注册计时器，而您应该在交互模式下工作。

真正的解决方案是停止使用交互模式来处理计时器和线程。

更多背景[在这里](http://mail.python.org/pipermail/python-bugs-list/2000-November/002931.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:28:14.267

我重建了你的问题，你的代码对我来说很好。您可能要考虑使用时间库？

```
from time import sleep
def hello():
   print('hello world')
sleep(1)
hello() 
```

这对您来说可能是一个更安全的解决方案，但我建议您更新操作系统并重新安装 python。用python2.7试过了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:34:18.337

所以问题解决了，重新安装Python有帮助。但是，修复安装没有，这可能是件好事。谢谢你的帮助。

# ruby-on-rails - 在 rails_admin 中删除模型的操作

> ID：11432528
> 
> 赞同：6
> 
> 时间：2012-07-11T12:20:05.000
> 
> 标签：ruby-on-rails, ruby, rails-admin

我有个问题。在我的应用程序中，我使用的是 rails_admin gem。除了一件事，一切都很好。对于某些模型，我只想删除它们。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-13T09:46:13.140

在您的 rails_admin.rb 文件中，您可以为模型添加默认操作，您可以在其中添加异常，如此[处所示](https://stackoverflow.com/a/18345857/4129894)。

这是一个例子：

```
config.actions do
    dashboard                     # mandatory
    index                         # mandatory
    new do
      except ['SomeModel']
    end
    export
    bulk_delete
    show
    edit do
      except ['SomeOtherModel']
    end
    delete
    show_in_app
end 
```

这是有关操作的 rails_admin 文档的链接：[https ://github.com/sferik/rails_admin/wiki/Actions](https://github.com/sferik/rails_admin/wiki/Actions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:38:38.003

尝试更改文件：config/initilizers/rails_admin.rb 您可以注释掉您不想允许的操作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T23:59:16.247

您可以使用 CanCan 执行此操作：[https ://github.com/sferik/rails_admin/wiki/Cancan](https://github.com/sferik/rails_admin/wiki/Cancan)

将此添加到您的**ability.rb**文件中：

```
cannot :manage, Model # disable all actions for this model
can :destroy, Model # enable only to remove 
```

# php - 哪种方法可以更快地通过在 php 中调整远程 PNG 图像的大小来提高页面速度。？

> ID：11432532
> 
> 赞同：0
> 
> 时间：2012-07-11T12:20:15.607
> 
> 标签：php, mysql, png, image-resizing

简介：我的网页显示大小为 90 x 90 的远程服务器 PNG 图像。我想将其重新调整为 50 x 50。单个网页上有 300 张图像，这使它变慢。通常我的网页每天有 2k 用户打开。

通过搜索很多我找到了这些方法，但我不知道哪个更好请帮助..这是我的方法：

1.  在飞行中。
2.  重新调整大小并将其保存到数据库。
3.  重新调整大小并将其保存到我的网络目录。

我正在使用 mysql 获取行，每行都有名称、'url to image'、id、time、description。这个'url to image'是我的问题。我认为保存到 MYSQL 数据库很好，这使得从中检索更容易，可能比其他数据库更快。

请告诉我从哪里开始编码的任何想法。我第一次尝试重新调整此图像的大小..

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:23:37.687

使用＃3，不要将图像存储在数据库中，如果您有很多视图和许多图像，那么在运行中进行操作并不是很有效。

不，只做一次，然后将它保存到文件系统中，并像现在一样使用数据库中的链接。

此外，如果可能，请在上传新图像后立即执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:23:14.720

我不会亲自将图像保存到数据库中，但这更多是我个人的选择。

我可能会选择调整它们的大小并将它们保存到网站上，然后返回正确的图像，而不是即时调整大小。如果您总是要返回 50x50 的图像，为什么他们首先上传为 90x90？上传时不能调整大小吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:25:15.427

好 ：

*   在飞行中：正如您所见，速度缓慢且效率低下
*   保存在数据库中：你疯了吗，不要将图像保存在数据库中
*   保存在网络目录中：那是我的孩子。在第一次访问图像时调整图像大小并将其缓存在您的目录中。下次，您不必下载并调整大小，只需提供即可。每周左右删除无用的文件。

# ruby - Rails 服务器命令生成错误报告

> ID：11432533
> 
> 赞同：0
> 
> 时间：2012-07-11T12:20:18.343
> 
> 标签：ruby, ruby-on-rails-3, ubuntu-12.04

当我使用`rails server`命令时，在终端中发现以下错误。它显示“找不到 JavaScript 运行时”。我是 ROR 的新手，不知道配置不同的文件。我谷歌并找到了这个问题的解决方案[1](https://stackoverflow.com/questions/7356171/ruby-on-rails-error-running-rails-s-command) [2](https://stackoverflow.com/questions/5643229/rails-server-command-problem) [3](https://stackoverflow.com/questions/6633696/ruby-on-rails-server-command)。我仍然没有得到这些东西。请提出一些解决方案。

![在此处输入图像描述](../Images/6bf4f2710273019ac6f1406bfc26b4c4.png)

我系统上的 Ruby 和 Rail 版本

Ruby 版本：- ruby​​ 1.8.7，Rails 版本：- Rails 3.2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:29:22.317

我想您的系统上缺少可执行文件/

您没有尝试在控制台中运行`gem install execjs`或`bundle install`（从您的项目目录）吗？

**更新**

还可以访问[execjs 主页](https://github.com/sstephenson/execjs)并尝试安装任何支持的 JS 运行时。

**更新 2**

我能够重现您的错误（使用 ruby​​ 1.9.2）。只需添加`gem 'therubyracer'`到您的 Gemfile 并运行`bundle install`. 由于某些奇怪的原因，ROR 在 Ubuntu 上无法开箱即用。请参阅[此](http://railsapps.github.com/installing-rails.html)内容并搜索*运行时*单词以获取更多信息。

附言

请把你的 Gemfile 放在这里。这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:29:55.723

错误消息还告诉您

> 有关可用运行时的列表，请参阅[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)。

您必须安装其中列出的 JavaScript 运行时之一：

*   [红宝石赛车](https://github.com/cowboyd/therubyracer)
*   [红宝石犀牛](https://github.com/cowboyd/therubyrhino)
*   [节点.js](http://nodejs.org/)
*   [Microsoft Windows 脚本宿主](http://msdn.microsoft.com/en-us/library/9bbdkx3k.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:56:36.770

对于 Rails 3.2.6，我建议使用 Ruby 1.9.3。以获得更好的性能。

# c - 更改 simpleVRML 文件名错误

> ID：11432534
> 
> 赞同：0
> 
> 时间：2012-07-11T12:20:21.457
> 
> 标签：c, xcode, macos, plist, artoolkit

我在 Mac OS X 的artoolkit 中对simpleVRML 文件进行了一些修改，但是当我更改应用程序的可执行文件名时

![更改可执行文件名称](../Images/87acd0429391af9fe28c37d60ec78d85.png)

并将我的应用程序复制/粘贴到另一个文件夹，它给了我这个错误 ![错误](../Images/46919410154fbe80c2ee02569e832b08.png) 但是当它把名称改回 simpleVRML，然后复制/粘贴没有错误，可能是什么错误？任何帮助，我真的不想将我的应用程序显示为 simpleVRML :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:36:24.317

解决了这个问题，我在 plist 中更改了 de 可执行文件的名称，我还应该更改应用程序 Macos 文件夹中的 unix 可执行文件的名称。：） 我的错

# asp.net - Chrome 中的文件下载显示不正确的文件名 [PageName].aspx。在我更新我的 Chrome 之前它有效

> ID：11432538
> 
> 赞同：1
> 
> 时间：2012-07-11T12:20:30.617
> 
> 标签：asp.net, vb.net, google-chrome, iis-7

这是一个asp.net 3.5 网站。

文件可以在 IE/FF 中正确下载。但不是铬。

该文件以“ASPS_Page_Name.aspx”的形式下载。

但是，在我将我的 chrome 浏览器更新到 20.0.1132.47 m 之前它就可以工作了。

我有这个功能可以过滤掉MIME类型（针对ff，之前的chrome不需要这个功能）

```
Private Shared Function GetContentType(ByVal fileType As String) As String

    Select Case fileType

        'set to "application/vnd.ms-excel" MIME type for firefox
        'MIME Types for IIS
        Case "xls"
            Return "application/vnd.ms-excel"

        Case "xlsx"
            Return "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"

        Case "pdf"
            Return "application/pdf"

        Case "doc"
            Return "application/msword"

        Case "docx"
            Return "application/vnd.openxmlformats-officedocument.wordprocessingml.document"

        Case "ppt"
            Return "application/vnd.ms-powerpoint"

        Case "pptx"
            Return "application/vnd.openxmlformats-officedocument.presentationml.presentation"

        Case Else
            Return "application/octet-stream"

    End Select

End Function 
```

此时，使用此功能 xls/xlsx/pdf/.. 可以下载正确名称的文件，我想知道是否需要在此处或在 web.config 中指定所有 mime 类型以使下载工作。

有谁知道 chrome 发生了什么以及如何修复这个“错误”？

这是下载功能，应该没问题，因为它以前可以工作。

```
Public Shared Sub StreamFileToClient(ByVal memoryStream As IO.MemoryStream, ByVal fileName As String, ByVal fileType As String)

    Try

        memoryStream.Position = 0

        'Serve to client
        System.Web.HttpContext.Current.Response.ClearHeaders()
        System.Web.HttpContext.Current.Response.ClearContent()

        System.Web.HttpContext.Current.Response.AddHeader("Content-Disposition", "inline;attachment; filename=" & fileName & "." & fileType)
        System.Web.HttpContext.Current.Response.AddHeader("Content-Length", memoryStream.Length.ToString())
        System.Web.HttpContext.Current.Response.ContentType = GetContentType(fileType)

        'octet-stream";
        System.Web.HttpContext.Current.Response.BinaryWrite(memoryStream.ToArray)
        'System.Web.HttpContext.Current.Response.Flush()
        'well good to use completerequest rather than .end nand .close. Read MSDN.
        'System.Web.HttpContext.Current.Response.End()
        'System.Web.HttpContext.Current.ApplicationInstance.CompleteRequest()

    Catch ex As Exception

    Finally
        System.Web.HttpContext.Current.Response.Flush()
        System.Web.HttpContext.Current.ApplicationInstance.CompleteRequest()

        memoryStream.Flush()
        memoryStream.Dispose()

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:11:03.800

[错误 103618](http://code.google.com/p/chromium/issues/detail?id=103618)中有一些指导，其中记录了 Chrome 在解析附件 =* 时变得更加严格，因此如果名称包含任何分隔符，则名称将不是您所期望的。

此外，“内联”似乎不是[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)的一部分，因此我们可能会忽略它（尽管这是 IE 必须使用的）。此外，您还有“内联”和“附件”，删除内联并使用 Chrome 进行测试。

# html - 在 html5 phonegap 应用程序中获取 httprequests（跨域？）

> ID：11432542
> 
> 赞同：0
> 
> 时间：2012-07-11T12:20:50.090
> 
> 标签：html, jquery-mobile, cordova

我正在用 html5 w/jquerymobile 构建一个半动态应用程序，目标是 atm。是iOS开始的。但问题是我需要使用（请求）标头参数联系网络服务，这是不可行的。

我的问题可能非常初级，但由于我在 netbeans 中开发，我遇到了无法从跨域获取数据的问题。

（切入正题）。在 phonegap/{非原生“离线”应用程序}。如何设置域/是否有使用 headerparams 发出 http get/post 请求的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:35:40.233

如果您使用的是 Phonegap，则 Web 应用程序将在 file:// 协议之外运行，并且不受跨域限制的约束。

编辑：如果您使用的是 jQuery Mobile 和 Phonegap，您需要将其设置`$.support.cors`为`$.mobile.allowCrossDomainPages`true。

来自 jQueryMobile[文档](http://jquerymobile.com/test/docs/pages/phonegap.html)：

*由于 jQuery Mobile 依赖于 jQuery 核心的 $.ajax() 功能，$.support.cors 必须设置为 true 以告诉 $.ajax 加载跨域页面。我们听说过一些平台上的 webviews，比如 BlackBerry，支持跨域加载，但是 jQuery 核心错误地将 $.support.cors 值设置为 false，这会禁用跨域 $.ajax() 请求并导致页面或资产无法加载。*

```
 $(document).bind( "mobileinit", function(){
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;       
    }); 
```

# javascript - 电子邮件验证不起作用

> ID：11432544
> 
> 赞同：0
> 
> 时间：2012-07-11T12:20:58.400
> 
> 标签：javascript, jquery

您好我正在尝试使用常规表达式验证电子邮件。这是我的代码：

```
 <input type="text" name="email" id="email"/>

       var email = $("input#email"),
       re =  /^[A-Za-z0-9][a-zA-Z0-9._-][A-Za-z0-9]+@([a-zA-Z0-9.-]+\.)+[a-zA-Z0-9.-]{2,4}$/; 

       if(re.test(email.val())){
           alert("email valid");
       }else{
           alert("email not valid");
       } 
```

无论我在文本字段中输入什么，它都说电子邮件无效。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:27:29.083

试试这个**工作演示**= [http://jsfiddle.net/buezz/](http://jsfiddle.net/buezz/)

希望这对您的事业有所帮助`:)`。

好的链接：http: [//jquerybyexample.blogspot.com/2011/04/validate-email-address-using-jquery.html](http://jquerybyexample.blogspot.com/2011/04/validate-email-address-using-jquery.html)

**代码**

```
function validateEmail(sEmail) {
    var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    if (filter.test(sEmail)) {
        return true;
    }
    else {
        return false;
    }
}

$(document).ready(function() {
   $('#btnValidate').click(function() {
        var sEmail = $('#txtEmail').val();
        if ($.trim(sEmail).length == 0) {
            alert('Please enter valid email address');
            e.preventDefault();
        }
        if (validateEmail(sEmail)) {
            alert('Email is valid');
        }
        else {
            alert('Invalid Email Address');
            e.preventDefault();
        }
    });
});
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T14:09:22.640

我刚刚回答了一个类似的问题：[https ://stackoverflow.com/a/12674524/340736](https://stackoverflow.com/a/12674524/340736)

我给你的建议是，不要试图滚动你自己。你可能会做错。尝试遵循标准，例如 RFC 822。你自己做起来并不容易，但是有一些库可以做到这一点。

一个例子是[Verimail.js](https://github.com/comfirm/Verimail.js)。它遵循 RFC 822，但也根据 IANA 注册的 TLD 的完整列表进行 TLD 验证。

使用起来也很简单：

```
var email = "cool@fabeook.cmo";
var verimail = new Comfirm.AlphaMail.Verimail();

verimail.verify(email, function(status, message, suggestion){
    if(status < 0){
        // Incorrect syntax!
    }else{
        // Syntax looks great!
    }
}); 
```

上面的示例将点击“语法错误！”这一行。因为无效的 TLD 'cmo'。除此之外，它还会给出一个建议，您可以返回给您的用户，在这种情况下，建议变量将包含“cool@facebook.com”，因为“fabeook.cmo”看起来很像“facebook.com”。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:25:05.137

我用

```
function is_email(a){return /^([\w!.%+\-])+@([\w\-])+(?:\.[\w\-]+)+$/.test(a);} 
```

用于我的电子邮件验证；我记得它是从 facebook 的注册页面不久前。

你只需要这样做：

```
if (!is_email($('#email').val()) {
   alert('invalid email and all that');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T12:26:09.713

你正在使用一个非常奇怪的正则表达式。

看看这个：

```
[A-Za-z0-9][a-zA-Z0-9._-][A-Za-z0-9] 
```

这将匹配 1 个字母数字字母，然后是一个字母数字字母或 ./_/-，然后是 1 个或多个字母数字字母。

试试这个来自[www.regular-expressions.info](http://www.regular-expressions.info/email.html)的正则表达式，我对其进行了一些编辑。

```
/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9]{2,4}$/ 
```

# exchangewebservices - EWS：更新系列中的事件时，设置操作对属性无效

> ID：11432548
> 
> 赞同：2
> 
> 时间：2012-07-11T12:21:07.267
> 
> 标签：exchangewebservices

我正在使用 Microsoft 的 EWS API 1.2.1 与 Exchange Server 2007 SP1 进行通信。当我尝试更新系列中的特定事件时，我总是会收到错误消息：“设置操作对属性无效”。下面的示例创建了一个成功的 masterrecurrence，然后我绑定到这个 masterrecurrence 并尝试更新系列中的第三个序列。这失败了...

```
this is the stack trace:

Microsoft.Exchange.WebServices.Data.ServiceResponseException was unhandled
Message=Set action is invalid for property.
Source=Microsoft.Exchange.WebServices
StackTrace:
  at Microsoft.Exchange.WebServices.Data.ServiceResponse.InternalThrowIfNecessary()
  at Microsoft.Exchange.WebServices.Data.ServiceResponse.ThrowIfNecessary()
  at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute() 
```

有人可以帮我解决这个问题吗？提前致谢！！

您可以在下面找到我设置的完整测试代码。

谢谢和最好的问候！

迪米特里

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Exchange.WebServices.Data;
using System.Security.Cryptography.X509Certificates;
using System.Net.Security;

namespace EWS_testWithRecurrences
{
    class Program
    {

    static void Main(string[] args)
    {
        ExchangeService _service = new ExchangeService(ExchangeVersion.Exchange2007_SP1,    TimeZoneInfo.Utc);
        string ls_master = string.Empty;

        // SSL - security (for accademius sake)
        System.Net.ServicePointManager.ServerCertificateValidationCallback =
            delegate(Object obj, X509Certificate certificate, X509Chain chain, SslPolicyErrors errors)
            {
                return true;
            };

        _service.Url = new Uri("https://exchangeserver/EWS/exchange.asmx");
        _service.Credentials =  new System.Net.NetworkCredential("username", "password", "domain");

        // Add master for accedemius sake
        Appointment app = new Appointment(_service);
        app.Subject = "Weekly on friday!";
        app.Start = new DateTime(2012, 7, 13, 10, 0,0);
        DayOfTheWeek[] days = new DayOfTheWeek [] { DayOfTheWeek.Friday };
        app.End = new DateTime(2012, 7, 13, 10, 0, 0).AddHours(2);
        app.Recurrence = new Recurrence.WeeklyPattern(app.Start.Date, 1, days);
        app.Recurrence.StartDate = app.Start.Date;
        app.Recurrence.NumberOfOccurrences = 10;
        // Save: works!
        app.Save();
        ls_master = app.Id.UniqueId;

        // Occurrence exception (bind to master) and change the 3rd series in the sequence
        Appointment occurrence = Appointment.BindToOccurrence(_service, new ItemId(ls_master),3);
        occurrence.Subject = "Urgent status update";
        occurrence.Start = new DateTime(2012, 7, 11, 14, 0, 0);
        occurrence.End = new DateTime(2012, 7, 11, 14, 0, 0).AddHours(2);
        occurrence.StartTimeZone = TimeZoneInfo.Utc;
        // Save ==> this fails!
        occurrence.Update(ConflictResolutionMode.AlwaysOverwrite);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:05:27.480

我有一个相关的“修改后的事件是交叉或重叠相邻事件”错误。

我认为这是因为不能在主循环开始之前设置修改的发生开始（2012-07-13 > 2012-07-11）：

```
app.Start = new DateTime(2012, 7, 13, 10, 0,0);
...
occurrence.Start = new DateTime(2012, 7, 11, 14, 0, 0); 
```

将其更改为：

```
occurrence.Start = occurrence.Start.AddHours(-6); 
```

一切似乎都在工作。

我认为您应该先更改约会开始，然后更改它的第一次出现并删除最后一个。但我不确定你是否真的想要那样。只添加一个非经常性约会会更容易。

# iphone - 将文本绘制成椭圆形

> ID：11432549
> 
> 赞同：2
> 
> 时间：2012-07-11T12:21:11.677
> 
> 标签：iphone, objective-c, ios

我正在跳进去。

我正在用 画一个对话泡泡`UIBezierPath`，泡泡很好，可以按我的预期工作。问题是我如何将文本添加到语音气泡中，使其保持在`UIBezierPath`. 我对绘制文本的经验为零，而且我很难想出可能的解决方案。

我试图在气泡内放置一个文本视图，但解决方案效果不佳，我想使用更多的语音气泡。使用 textview 我只能使用矩形形状，我想从上到下填充气泡，并在中间使用完整的宽度。

任何帮助和建议都将不胜感激。

![在此处输入图像描述](../Images/104e0de0d261a603ee40f01f37433f18.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:54:11.687

好的，我终于想出了如何在贝塞尔路径上绘制/渲染文本，这可以通过采用 CGPath 并使用核心文本来完成。我做过这个方法。

```
-(void)drawText:(NSString *)text {
    CGContextRef myContext = UIGraphicsGetCurrentContext(); 

    CGContextSaveGState(myContext);

    CGContextTranslateCTM(myContext, 0.0f, self.frame.size.height);
    CGContextScaleCTM(myContext, 1.0f, -1.0f);

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)attString); // 7-2
    CTFrameRef theFrame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, [attString length]), path, NULL); // 8-2

    CTFrameDraw(theFrame, myContext); // 11-2
    CGContextRestoreGState(myContext);
} 
```

我关注了这个教程，女巫很棒。[http://invasivecode.tumblr.com/core-text](http://invasivecode.tumblr.com/core-text)

现在我只需要弄清楚如何计算包含所有文本的贝塞尔路径的大小，并弄清楚如何将贝塞尔路径和核心文本一起移动，它们在不同的坐标系上运行，给我带来了各种各样的问题。所以，如果有人有这方面的经验，我会全力以赴！

最好的问候莫腾

# jquery - 具有独立运动的 Jquery 响应式内容滑块

> ID：11432552
> 
> 赞同：0
> 
> 时间：2012-07-11T12:21:21.810
> 
> 标签：jquery, slider

我今天在 awwwards.com 上的一个网站上注意到了这个内容滑块：

[http://www.humaan.com.au/](http://www.humaan.com.au/)

我正在寻找可以模仿非常相似行为的免费或高级插件。

**我需要** 响应式和 100% 的宽度。有独立的元素/运动

任何想法都得到充分理解，因为我在通常的“前 50/100 内容滑块”谷歌搜索中找不到太多。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:31:16.250

[http://codecanyon.net/item/slider-revolution-responsive-jquery-plugin/full_screen_preview/2580848](http://codecanyon.net/item/slider-revolution-responsive-jquery-plugin/full_screen_preview/2580848)

# core-data - NSFetchedResultsController 的 NSFetchedResultsChangeUpdate 事件中的 NSRangeException 异常

> ID：11432556
> 
> 赞同：12
> 
> 时间：2012-07-11T12:21:39.630
> 
> 标签：core-data, nsfetchedresultscontroller

我有一个`UITableView`使用`NSFetchedResultsController`作为数据源的。

核心数据存储在并行运行的多个后台线程中更新（每个线程使用它自己的`NSManagedObjectContext`）。

主线程观察`NSManagedObjectContextDidSaveNotification` 通知并使用`mergeChangesFromContextDidSaveNotification:`.

有时它会`NSFetchedResultsController`发送一个 `NSFetchedResultsChangeUpdate`带有 indexPath 的事件，此时该事件不再存在。

例如： fetched results 控制器的结果集包含 1 个部分和 4 个对象。第一个对象在一个线程中被删除。最后一个对象在不同的​​线程中更新。然后有时会发生以下情况：

*   controllerWillChangeContent: 被调用。
*   controller:didChangeObject:atIndexPath:forChangeType:newIndexPath: 调用类型 = NSFetchedResultsChangeDelete, indexPath.row = 0。
*   controller:didChangeObject:atIndexPath:forChangeType:newIndexPath: 使用 type = NSFetchedResultsChangeUpdate, indexPath.row = 3 调用。

但是获取的结果控制器现在只包含 3 个对象，如果调用

```
MyManagedObject *obj = [controller objectAtIndexPath:indexPath] 
```

根据`NSFetchedResultsChangeUpdate` 事件更新表格视图单元格，这会崩溃并出现`NSRangeException`异常。

感谢您的任何帮助或想法！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-16T11:28:59.667

我现在找到了解决我的问题的方法。在更新事件的情况下，无需调用

```
[self.controller objectAtIndexPath:indexPath] 
```

因为更新的对象已经作为*anObject*参数提供给`-controller:didChangedObject:...`委托。

因此，我已替换`-configureCell:atIndexPath:`为`-configureCell:withObject:`直接使用更新对象的方法。这似乎没有问题。

代码现在看起来像这样：

```
- (void)configureCell:(UITableViewCell *)cell withObject:(MyManagedObject *)myObj
{
    cell.textLabel.text = myObj.name;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCellIdentifier"];
    [self configureCell:cell withObject:[self.controller objectAtIndexPath:indexPath]];
    return cell;
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
    /* ... */           
    case NSFetchedResultsChangeUpdate:
        [self configureCell:[tableView cellForRowAtIndexPath:indexPath] withObject:anObject];
        break;
    /* ... */           
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-25T20:04:35.747

这实际上很常见，因为[Apple 的 NSFetchedResultsControllerDelegate 样板代码中](http://oleb.net/blog/2013/02/nsfetchedresultscontroller-documentation-bug/)存在错误，当您创建启用 Core Data 的新主/详细项目时会得到该错误：

```
- (void)controller:(NSFetchedResultsController *)controller
    didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath
    forChangeType:(NSFetchedResultsChangeType)type
    newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                       withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                       withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
                  atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                       withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                       withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

# 解决方案#1：使用`anObject`

当对象已经给您时，为什么要查询获取的结果控制器并冒险使用不正确的索引路径？[Martin R](https://stackoverflow.com/a/11503330/35690)也推荐此解决方案。

只需将辅助方法`configureCell:atIndexPath:`从采用索引路径更改为采用已修改的实际对象：

```
- (void)configureCell:(UITableViewCell *)cell withObject:(NSManagedObject *)object {
    cell.textLabel.text = [[object valueForKey:@"timeStamp"] description];
} 
```

在行的单元格中，使用：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    [self configureCell:cell withObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];
    return cell;
} 
```

最后，在更新中使用：

```
case NSFetchedResultsChangeUpdate:
    [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
             withObject:anObject];
    break; 
```

# 解决方案#2：使用`newIndexPath`

从 iOS 7.1 开始，当 NSFetchedResultsChangeUpdate 发生时，两者都会`indexPath`被`newIndexPath`传入。

只需在调用 cellForRowAtIndexPath 时保持默认实现对 indexPath 的使用，但将发送到 newIndexPath 的第二个索引路径更改为：

```
case NSFetchedResultsChangeUpdate:
    [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
            atIndexPath:newIndexPath];
    break; 
```

# 解决方案#3：在索引路径重新加载行

[Ole Begemann 的解决方案](http://oleb.net/blog/2013/02/nsfetchedresultscontroller-documentation-bug/)是重新加载索引路径。将配置单元格的调用替换为重新加载行的调用：

```
case NSFetchedResultsChangeUpdate:
    [tableView reloadRowsAtIndexPaths:@[indexPath]
                     withRowAnimation:UITableViewRowAnimationAutomatic];
    break; 
```

这种方法有两个缺点：

1.  通过调用重新加载行，它会调用 cellForRow，而后者又会调用 dequeueReusableCellWithIdentifier，这将重用现有的单元格，可能会**摆脱重要状态**（例如，如果单元格正处于被拉[邮箱样式](http://www.mailboxapp.com)的中间）。
2.  它会错误地**尝试重新加载不可见的单元格**。在 Apple 的原始代码中，[cellForRowAtIndexPath:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/#//apple_ref/occ/instm/UITableView/cellForRowAtIndexPath:)将返回“`nil`如果单元格不可见或`indexPath`超出范围”。因此，在调用重新加载行之前检查[indexPathsForVisibleRows](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/#//apple_ref/occ/instm/UITableView/indexPathsForVisibleRows)会更正确。

* * *

# 重现错误

1.  在 Xcode 6.4 中使用核心数据创建一个新的主/详细项目。
2.  向核心数据`event`对象添加标题属性。
3.  用几条记录填充表（例如在`viewDidLoad`运行此代码时）

    ```
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    for (NSInteger i = 0; i < 5; i++) {
        NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];
        [newManagedObject setValue:[NSDate date] forKey:@"timeStamp"];
        [newManagedObject setValue:[@(i) stringValue] forKey:@"title"];
    }
    [context save:nil]; 
    ```

4.  更改配置单元格以显示标题属性：

    ```
    - (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
        NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
        cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@", [object valueForKey:@"timeStamp"], [object valueForKey:@"title"]];
    } 
    ```

5.  除了在点击新按钮时添加一条记录，更新最后一个项目（注意：这可以在项目创建之前或之后完成，但请确保在调用 save 之前完成！）：

    ```
    // update the last item
    NSArray *objects = [self.fetchedResultsController fetchedObjects];
    NSManagedObject *lastObject = [objects lastObject];
    [lastObject setValue:@"updated" forKey:@"title"]; 
    ```

6.  运行应用程序。您应该看到五个项目。

7.  点击新按钮。您将看到一个新项目被添加到顶部，并且最后一个项目没有文本“更新”，即使它应该有它。如果您强制重新加载单元格（例如，通过将单元格滚动到屏幕外），它将显示文本“已更新”。
8.  现在实施上述三个解决方案之一，除了添加一个项目外，最后一个项目的文本将更改为“已更新”。

# c++ - Visual C++中的invokeOnClick复选框

> ID：11432559
> 
> 赞同：0
> 
> 时间：2012-07-11T12:21:53.987
> 
> 标签：c++, visual-studio-2010

有人告诉我，如何在 Visual C++ 中调用 checkBox1 的 onClick 事件？我正在使用 MS Visual c++ studio 2010 express。

也许有人知道如何使用 Invoke(Delegate) 或 InvokeOnClick 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:26:12.917

使用`SendMessage`or`SendDlgItemMessage`函数。这是 Win32 API。

# php - php下载xml页面并转换为utf-8

> ID：11432570
> 
> 赞同：1
> 
> 时间：2012-07-11T12:22:43.727
> 
> 标签：php, encoding

当我在浏览器中右键单击 xml 页面并保存 AS 并使用 Notepad++ 打开它时，非英文字符显示为 OK。但是，如果我编写一个脚本将页面保存到我的服务器，我会遇到字符编码问题。这真是令人头疼。有什么帮助吗？谢谢。

```
function download_page($path)
 {
//$path = htmlentities($path);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$path);
curl_setopt($ch, CURLOPT_FAILONERROR,1);
    //curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_TIMEOUT, 280);
$retValue = curl_exec($ch);  
if (!$retValue){ //echo "erro curl";
        }                    

@curl_close($ch);
return $retValue;
 } 

 $file= download_page($url);
 $file = mb_convert_encoding($file, 'HTML-ENTITIES', "UTF-8");
 $file = utf8_encode ($file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:59:56.313

您的代码表明结果以 UTF-8 编码。首先，你确定这是真的吗？为什么需要将其转换两次（首先转换为`'HTML-ENTITIES`'，而不是转换回**UTF-8**）？如果您只想拥有 html 实体，请使用该[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)功能。

# android - FrameLayout 在运行时消耗，但其子项未使用新值更新

> ID：11432574
> 
> 赞同：1
> 
> 时间：2012-07-11T12:22:56.830
> 
> 标签：android, footer, fragment, android-framelayout

在我的应用程序中，我使用以下 FrameLayout 作为将成为页脚的片段的容器：

```
<FrameLayout
android:id="@+id/frameLayoutFooter"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:layout_alignParentBottom="true"/> 
```

在我的活动中，我使用以下代码来添加片段：

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
mFooterFragment = new FooterFragment();
ft.add(R.id.frameLayoutFooter, mFooterFragment);
ft.commit(); 
```

我的页脚片段的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/footerContainer"
android:layout_width="fill_parent"
android:layout_height="165dip"
android:layout_alignParentBottom="true"
android:background="#15355b" >

<RelativeLayout
    android:id="@+id/relativeLayoutTopSetcion"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

..... some buttons and imageviews here...
</RelativeLayout>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayoutBottomSetcion"
    android:layout_width="fill_parent"
    android:layout_height="350dip"
    android:layout_alignParentBottom="true"
    android:visibility="**invisible**" >
..... some more imageviews and textviews here...
</RelativeLayout>
</RelativeLayout> 
```

在某些时候，我想扩展页脚并在其中放置更多的图像视图和文本视图，但不幸的是我所有的尝试都失败了，结果是片段的 FrameLayout**确实得到了扩展，但它的子元素留在了上部（旧底部）即使他们将 alignParentBottom 设置为 true** - 我得到的是页脚的高度确实发生了变化，并且它的底部新添加的部分是透明的，这让我认为**它的孩子没有使用它的新布局参数进行更新。** 另一件事是我确实看到了 mRelativeLayoutBottomSetcion.setVisibility(View.VISIBLE) 的变化-但不在 FrameLayout 的底部（新扩展的部分），而是在扩展前的原始大小的底部。

为了扩展片段，我使用了这个框架所属的活动中的以下代码：

```
ViewGroup.LayoutParams params = mFrameLayoutFooter.getLayoutParams();
params.height = 500; 
mFrameLayoutFooter.requestLayout();
// setting the bootom relative layout to be visible
mRelativeLayoutBottomSetcion.setVisibility(View.VISIBLE); 
```

我究竟做错了什么 ？

消耗性页脚是否有已知的 UI 模式？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:15:59.903

我注意到您的代码中有几处可能是问题所在：

1.  片段中的父 RelativeLayout (with `@+id/footerContainer`) 有一个固定`android:layout_height`的`165dip`，改为`match_parent`改为。

2.  您也可以删除`android:layout_alignParentBottom="true"`它（它无论如何都不会工作，因为它的父级是 FrameLayout -`layout_alignParentBottom`仅适用于 RelativeLayout 的子级）。

3.  由于我们将第 1 点更改`165dip`为`match_parent`on，因此您应该`android:layout_height="wrap_content"`将 FrameLayout 上的 (with `@+id/frameLayoutFooter`) 更改`165dip`为获得您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:05:14.367

有些事情我没有得到它，这可以回答你的问题：

首先，为什么在另一个只有 165dip 的相对布局中会有一个 350dip 的相对布局（relativeLayoutBottomSetcion）？

我认为您应该尝试将 FrameLayout 高度设置为 165dip，并将您的 RelativeLayout (footerContainer) 高度设置为 fill_parent。这将允许您的“footerContainer”与您的 FrameLayout 具有相同的高度，即使您将其高度更改为 500dip 也是如此。（那时您将使 relativeLayoutBottomSetcion 可见，就像您已经在做的那样）

此外，您应该将可见性设置为 GONE 而不是 INVISIBLE，因为 INVISIBLE 使您 RelativeLayout 占用屏幕上的空间，但不绘制其内容。

要完成它，请删除 android:layout_alignParentBottom="true"，因为您不需要它，因为 RelativeLayout 父级是 FrameLayout，并且此属性仅在父级是 RelativeLayout 时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:57:28.300

最终，我使用了可见性设置为消失的 RelativeLayout，并使用从[此处](https://stackoverflow.com/questions/8140571/resizing-layouts-programatically-as-animation)获取的调整大小动画来扩展它。干杯！

# asp.net - ASP 数据源选择排序

> ID：11432575
> 
> 赞同：0
> 
> 时间：2012-07-11T12:22:57.353
> 
> 标签：asp.net

下面的 ASP 代码按字段 Principal_ID 的顺序显示数据，我想按 SchoolName 的字母顺序进行。有谁知道我怎么能做到这一点

```
<asp:Panel ID="show_pnl" runat="server" runat="server"  GroupingText="Show Principal" Width="100%" Font-Names="verdana"
            Font-Size="Small" BackColor="white" align=center" BorderColor="white" BorderPadding="0" BorderStyle="none" BorderWidth="0px">>
            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="ShowPrincipals_DS"
                DataKeyNames="SchoolName" CssClass="mGrid" PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt"
                Font-Size="Small" Font-Names="verdana" Height="100%" Width="100%" AutoGenerateDeleteButton="True">
                <Columns>
                    <asp:BoundField DataField="Principal_ID" HeaderText="Principal ID" SortExpression="Principal_ID" />
                    <asp:BoundField DataField="FirstName" HeaderText="First Name" SortExpression="FirstName" />
                    <asp:BoundField DataField="LastName" HeaderText="Last Name" SortExpression="LastName" />
                    <asp:BoundField DataField="UserName" HeaderText="User Name" SortExpression="UserName" />
                    <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
                    <asp:BoundField DataField="SchoolName" HeaderText="School Name" SortExpression="SchoolName" />
                </Columns>
                <PagerStyle CssClass="pgr" />
                <EmptyDataTemplate>
                    No Data Available
                </EmptyDataTemplate>
                <AlternatingRowStyle CssClass="alt" />
            </asp:GridView>
            <asp:AccessDataSource ID="ShowPrincipals_DS" runat="server" DataFile="~/App_Data/MockCourt_db.mdb"
                SelectCommand="SELECT tbl_Principal.Principal_ID, tbl_Principal.FirstName, tbl_Principal.LastName, tbl_Principal.UserName, tbl_Principal.Email, tbl_school.SchoolName FROM (tbl_Principal INNER JOIN tbl_school ON tbl_Principal.School_ID = tbl_school.School_ID)"
                DeleteCommand="DELETE FROM [tbl_Principal] WHERE ([Principal_ID] = @Principal_Id)">
                <DeleteParameters>
                    <asp:Parameter Name="Principal_ID" Type="int32" />
                </DeleteParameters>
            </asp:AccessDataSource>
        </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:25:30.690

`ORDER BY`只需在现有`SELECT`查询中添加一个子句：

```
SELECT tbl_Principal.Principal_ID, tbl_Principal.FirstName, tbl_Principal.LastName, tbl_Principal.UserName, tbl_Principal.Email, tbl_school.SchoolName FROM (tbl_Principal INNER JOIN tbl_school ON tbl_Principal.School_ID = tbl_school.School_ID) ORDER BY tbl_school.SchoolName 
```

# jquery - Jquery Cookie在单击时隐藏容器几天

> ID：11432580
> 
> 赞同：1
> 
> 时间：2012-07-11T12:23:35.670
> 
> 标签：jquery, cookies

我正在开发一个 wordpress 主题，并且正在为会员和访问者显示一条消息（我通过 php 检查某人是会员还是访问者）。如果用户单击“关闭”按钮几天（比如说 7 天），我想隐藏包含消息的框。在网上阅读了很多关于 cookie（文档等）的信息，但仍然无法使其正常工作，所以我需要一些帮助......提前致谢！

```
<?php if (is_user_logged_in()){
    echo "<div id='wel-msg'>Welcome, registered user! bla bla bla 
                   <div id='closer'>X</div></div>";
    }
    else {
    echo "<div id='wel-msg'>Welcome, visitor! blo blo blo <div id='closer'>X</div></div>";
    };
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:13:17.070

作为一个起点，这可能会有所帮助：

Wordpress 上有一些示例代码显示了如何判断用户是注册用户还是访客： [http ://wordpress.org/support/topic/tutorial-how-to-check-if-user-is-logged-in或访客](http://wordpress.org/support/topic/tutorial-how-to-check-if-user-is-logged-in-or-a-visitter)

例如：

```
get_currentuserinfo() ;
global $user_level;
if ($user_level > 0) {
 echo "Welcome visitor"
} else {
 echo "Welcome Member"
} 
```

基本上，您希望使用它`user_level`而不是`is_user_logged_in`外观。不确定你想用 cookie 做什么，但如果你说你一直在阅读它们，那应该不是问题。

在 PHP 中设置 cookie 的信息：- [http://tutorialzine.com/2010/03/microtut-getting-and-setting-cookies-with-jquery-php/](http://tutorialzine.com/2010/03/microtut-getting-and-setting-cookies-with-jquery-php/)

例如..

```
if(!cookieSet){
get_currentuserinfo() ;
    global $user_level;
    if ($user_level > 0) {
     echo "Welcome visitor"
    } else {
     echo "Welcome Member"
    }
 //set cookie here
 } 
```

显然，通过在某处检查您的 cookie 来设置 cookieSet。

编辑：如果你想隐藏 wel-msg，那么这应该没问题：

```
$(document).ready( function() {
$("#closer").click( function() {
    $("#wel-msg").hide();
    });
}); 
```

# sql - 为什么 SQL Server 为 ISDATE('13/01/2010') 返回 0

> ID：11432584
> 
> 赞同：1
> 
> 时间：2012-07-11T12:24:00.473
> 
> 标签：sql, sql-server-2008-r2

我有一个视图，其中我有一个在 varchar formet 中有日期的列，`dd/MM/yyyy` 当我尝试使用 order by 时，它给出了错误

> 消息 241，级别 16，状态 1，第 2 行从字符串转换日期和/或时间时转换失败。

查询是

```
select * from test1.dbo.abcd order by CONVERT(date,ddate,103) 
```

它返回 0 的一些日期是`13/01/2010`

```
18/12/2009
20/10/2009
21/06/2010
19/10/2009
18/11/2010
29/10/2009
29/10/2009
18/03/2010
15/03/2010
15/03/2010
15/03/2010
15/04/2010
15/04/2010
15/04/2010
15/04/2010
30/03/2010
14/05/2010
14/01/2010
23/10/2009
20/10/2009
27/10/2009
27/10/2009
20/07/2009
20/04/2010
13/08/2010
30/06/2011
23/07/2010
27/08/2010
24/09/2010 
```

谁能告诉我为什么它返回 0 以及如何对其进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:33:23.007

因为这对我来说很好：

```
SELECT CONVERT(date,'13/01/2010',103); 
```

尝试：

```
ORDER BY CONVERT(DATE, LEFT(ddate, 10), 103); 
```

我怀疑发生的事情是推送到您的视图中的数据具有您看不到的尾随字符（例如回车）或非打印字符。您可以通过以下方式检查超过 10 个字符的值：

```
SELECT ... WHERE LEN(ddate) > 10 
```

如果这仍然不起作用，那么数据可能真的很糟糕，例如：

```
13/O1/2010 
```

在这种情况下，你唯一能做的就是首先推回表/视图的所有者以获取正确的数据，或者尝试使用以下方法进行过滤：

```
SET DATEFORMAT DMY;

...
WHERE ISDATE(ddate) = 1 
```

至于您问题中的标题，`ISDATE`在这种情况下返回 0，因为默认情况下这不是日期 - 在大多数情况下，SQL Server 是使用美国英语和 MDY 的日期格式设置的，因此它需要格式中的日期字符串`mm/dd/yyyy`。`13/01/2010`是 2010 年的第 13 个月的第一天。我的记忆很粗略，但我可以肯定那年没有第 13 个月。

正如其他人所建议的那样，真正的解决方法是将您的数据存储为日期/时间，而不是字符串，并以明确的格式传入字符串文字，例如`YYYYMMDD`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T12:26:11.647

`set dateformat dmy`可能会解决

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:45:30.370

我猜问题是`ISDATE()`函数的使用而不是`CONVERT()`.

你可以试试这个：

```
ISDATE( CONVERT(CHAR(10), CONVERT(date, ddate, 103) ) ) 
```

但我找不到用`ISDATE()`. 以上将取决于 `DATEFORMAT`设置（可能还有其他我不知道的设置），当`CONVERT()`函数发现不兼容的日期时，它将失败并出现错误。

* * *

**如果您无法将日期转换为`DATE`**数据类型，也许您可​​以做的最好的黑客攻击，在**处理日期时应该强调这是最好的做法**，那就是检查这个：

```
ISDATE(SUBSTRING(ddate, 7, 4) + SUBSTRING(ddate, 4, 2) + SUBSTRING(ddate, 1, 2)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T18:39:54.740

13/O1/2010 默认美国日期格式转换为第 13 个月的第一天，因此不是有效日期。

# ipad - 如何在 iPad 上运行单个应用程序（合法）？

> ID：11432586
> 
> 赞同：0
> 
> 时间：2012-07-11T12:24:07.953
> 
> 标签：ipad

我想知道是否有任何合法方式可以在 iPad 上运行单个（仅一个）应用程序。我们目前正在为我们的客户开发一个应用程序，他们只想在他们的 iPad 上运行那个特定的应用程序。我们需要禁用所有其他功能并只运行这个特定的应用程序。有什么建议吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:28:03.543

使用 iOS 6 可以轻松做到这一点。使用早期版本的 iOS 也可以做到，但有点困难。查看[http://joris.kluivers.nl/blog/2012/03/02/kiosk-mode-for-ios/](http://joris.kluivers.nl/blog/2012/03/02/kiosk-mode-for-ios/)

# sharepoint - 如何在浏览器（即chrome、ff、safari）中查看pdf文档？

> ID：11432588
> 
> 赞同：0
> 
> 时间：2012-07-11T12:24:13.283
> 
> 标签：sharepoint, pdf, sharepoint-2010

我在 SharePoint 2010 中有一个文档库。是否可以单击文档库中的项目并让 Web 部件呈现 pdf 文件？如果是，您将如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:33:11.507

这可以通过内容编辑器 Web 部件来完成。请参阅此处列出的步骤：

[http://manish-sharepoint.blogspot.com/2008/05/showing-pdf-document-content-in.html](http://manish-sharepoint.blogspot.com/2008/05/showing-pdf-document-content-in.html)

# php - 反序列化不起作用

> ID：11432591
> 
> 赞同：-1
> 
> 时间：2012-07-11T12:24:18.643
> 
> 标签：php, json, serialization, deserialization

我正在尝试反序列化存储在 mysql 表中的字符串。

以下是存储在 mysql 表中的字符串。

```
a:3:{s:15:\"purchase_amount\";d:500;s:4:\"more\";d:7;s:4:\"less\";d:11.5;} 
```

在插入时，我编写了以下代码。

```
addslashes(serialize(array('purchase_amount' => $values['purchase_amount'], 'more' => $values['transportaion_cost_gretter'], 'less' => $values['transportaion_cost_lesser']))) 
```

在检索时，我编写了以下代码。

```
unserialize(stripslashes($row->getTransportaionCost())); 
```

我收到以下错误。

```
Notice: unserialize() [function.unserialize]: Error at offset 5 of 98 bytes 
```

编辑：

我试过 json_encode 和 json_decode ...

以下是mysql表中的json数据

```
{"purchase_amount":500,"more":7,"less":11.5} 
```

以下是 php 中的 json 解码。

```
var_dump(json_decode($row->getTransportaionCost())); //null 
```

谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:27:57.407

问题来自当您将数据存储在数据库中时，那些反斜杠不应该在这里。删除addlashes，它会更好地工作

# python - 访问 https 站点 python (urllib2, requests)

> ID：11432592
> 
> 赞同：3
> 
> 时间：2012-07-11T12:24:19.933
> 
> 标签：python, https, urllib2, python-requests

我正在尝试访问以下站点[https://electionbuddy.com/elections/4322/results](https://electionbuddy.com/elections/4322/results)

我试过使用`handler = urllib2.HTTPBasicAuthHandler(password_mgr)`etc 和`requests`，但是 webapp 只是发回一个页面说我没有权限（没有用户/通行证去哪里）。我尝试了萤火虫，但无法从中得到任何明显的东西。如果需要，我可以编辑和附加。

我怎么能登录到这样的网站？正如 Burhan 所提到的，这种情况下您需要“登录保存发送的 cookie 并将它们在下一个请求中发送到结果页面”。

跟进这一点 - 为什么以下工作不起作用

```
import requests
payload = {'user_username': 'xxxxxxxxx', 'user_password': 'xxxxxxx'}
r = requests.post("https://electionbuddy.com/login", data=payload)
r = requests.get('https://electionbuddy.com/elections/xxxx/results', cookies=r.cookies)
print r.text 
```

似乎有一个身份验证令牌，与会话 ID 不同。虽然不太清楚如何去做这件事......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:35:01.010

我假设当您登录该站点时，该站点会为您创建一个会话 cookie。尝试首先登录，看看是否会抛出 cookie，如果是，则将 cookie 提供给您需要的页面。你熟悉 cookielib 吗？

```
from urllib2 import *
import cookielib

cj = cookielib.CookieJar()
opener = build_opener(
             HTTPHandler(), HTTPSHandler(), HTTPErrorProcessor(), 
             HTTPRedirectHandler(), HTTPCookieProcessor(cj))
params = urllib.urlencode(dict(USER=user, PASSWORD=pw, action='Login'))

# Response here will have cookies, use info() to show
response = opener.open(loginurl, params)
print response.info()

# cookies automatically sent to the page you wanted
response2 = opener.open(your_url) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:36:24.630

我曾经不得不访问一个受用户名/密码保护的 url，并使用以下方法解决了它

```
import urllib2
import base64
theurl = 'http://abc.com/A.htm'

username='AAA'
password='BBB'

req = urllib2.Request(theurl)

base64string = base64.encodestring(
            '%s:%s' % (username, password))[:-1]
authheader =  "Basic %s" % base64string
req.add_header("Authorization", authheader)
try:
    handle = urllib2.urlopen(req)
except IOError, e:
    print "It looks like the username or password is wrong."
content = handle.read() 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-12T21:33:07.780

只需添加答案，如果有人偶然发现同样的问题。

有问题的 url 是安全的，即使用 HTTPS。

所以其他地方建议的 HTTP 基本身份验证显然不起作用。基本身份验证适用于纯 http。HTTPS是加密的。

使用诸如[pycUrl](http://pycurl.sourceforge.net/doc/quickstart.html)或[httplib](https://docs.python.org/2/library/httplib.html#httplib.HTTPSConnection)之类的库可能是正确的选择，它们完全提供 HTTPS 支持

# c# - 来自正确/错误比率的动态分值

> ID：11432596
> 
> 赞同：1
> 
> 时间：2012-07-11T12:24:48.013
> 
> 标签：c#, math

希望这会有意义。我正在编写一个测验类型的游戏，玩家选择一个问题，尝试回答，如果正确的得分值被添加到玩家，否则从玩家得分中获取价值。我已经完成了所有这些工作，现在我很想知道它是否有意义并且能够根据正确/错误比率动态调整问题的值。

考虑下表。每个问题都有一个 100-1000 的值，以 100 分为增量。

```
| 身份证 | 麻木右 | 编号错误 | 分数 |
|----|------------|----------|--------|
| 1 | 30 | 30 | 100 |
|----|------------|----------|--------|
| 2 | 40 | 60 | 200 |
|----|------------|----------|--------|
.....................................
| 10 | 80 | 20 | 1000 |
|----|------------|----------|--------|

```

如您所见，问题 1 的比率为 1/1，它在哪里可能没问题。

查看问题 2，我们看到它的比率为 2/3。这个问题经常被错误地回答，然后是正确的。这个问题可能需要被赋予更高的价值。

跳过接下来的几个问题，我们看到问题 10 的比率为 4/1。这个问题与问题2相反。它可能应该下移。我们不想给玩家一个高价值的问题，而这对普通人来说显然并不难。

约束是这样的：

1.  每个问题的值必须在 100-1000 之间，以 100 分为增量。

2.  每个地方都**必须**有一个问题。所以肯定有一个问题，从 100 一直到 1000，一共 10 个问题。

**问题**

1.  有没有可以应用到这个的公式？

2.  是否可以务实地决定将这些问题上移或下移？

3.  如果 10 由于其比率而向下移动，则导致 9 变为 10。但是在下一次通过时，公式将确定现在的 10 由于其自身的比率而需要向下移动。如何避免无限循环？

旁注：整个程序中有超过 10 个问题，但是该公式只会同时考虑一个类别中的问题。其次，统计都是编出来的，只是觉得这样会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:45:05.023

问题是，如果很多人答错了一个问题，你不知道是因为它是一个很难的问题（这正是你想要的），还是因为它是一个糟糕的问题（措辞不当、误导，甚至可能是错误答案标记为“正确”）。

像 GRE 这样的标准化考试将新问题与旧问题放在一起，以确保那些做对的人也是那些在旧问题上取得好成绩的人。如果您没有类似的东西，那么我会犹豫是否相信任何自动排名算法。

所以如果你想继续这个，你至少需要一些自动化的方法来找出难问题和好问题之间的区别。这超越了编程，更多地涉及到数学和统计学。我不会假装自己是这两个学科的专家，但这里有一些你可能会觉得有趣的事情：

*   普林斯顿评论的“[破解 GRE](https://rads.stackoverflow.com/amzn/click/com/0307944697) ”书籍解释了 GRE 如何现场测试新问题。（或者至少他们在几年前就这样做了，在 GRE 完全转向计算机化自适应测试之前。如果新版本没有帮助，看看你是否能找到一些旧版本。）[普林斯顿评论 GRE 网站](http://www.princetonreview.com/grad/gre-test-preparation.aspx)也可能有一些有用的信息。

*   维基百科有可能有用的关于[计算机化自适应测试](http://en.wikipedia.org/wiki/Computerized_adaptive_testing)和[回归分析的文章。](http://en.wikipedia.org/wiki/Regression_analysis)

*   还可以查看[数学 StackExchange](https://math.stackexchange.com/)和[统计 StackExchange](https://stats.stackexchange.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:37:05.147

听起来你只想这样做：

*   为每个问题分配一个**难度等级**，由下式给出

    ```
    number of people who got it wrong
    ---------------------------------
    number of people who answered it 
    ```

    对于每个问题，难度等级将是一个介于两者之间的`0`数字`1`。

*   按难度等级对问题进行排序

*   将分数分配给`1000`问题`100`，按照它们的难度等级排序，以便将最困难的分数分配给`1000`，依此类推。您将需要调整实际分数以考虑有多少问题；目前没有足够的细节来说明如何。

> 如何避免无限循环？

只做一次。

# android - 使用 4.1 HTML 5 实时流式传输到 android

> ID：11432599
> 
> 赞同：4
> 
> 时间：2012-07-11T12:24:56.430
> 
> 标签：android, html, streaming, video-streaming, live

大多数人可能都知道，新版本的 android 4.1 或更高版本将不支持 flash。

我正在寻找一种通过网络浏览器将实时视频内容流式传输到新版本的 android（我目前只使用 flash）的方法。

我已经尝试过 html5 视频标签和 HLS 流，但是我只设法让音频通过。

我正在android模拟器上测试这一切。

目前，我们无法向任何将使用 android 4.1 的人提供内容。这有点令人担忧，因为它获得了更多用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:25:34.340

如果您可以使用 VideoView....

我现在正在使用适用于 Android 4.0.3 的 HTTP Live Stream 和 Wowza 媒体服务器。

```
 private VideoView mainVideo;
    public static String VIDEO_FEED_URL = http://192.168.1.102:1935/http/myStream/playlist.m3u8

    mainVideo = (VideoView) findViewById(R.id.mainVideo);
    mainVideo.setVideoURI(Uri.parse(VIDEO_FEED_URL));
    mainVideo.requestFocus();
    mainVideo.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            mainVideo.start();
        }
    }); 
```

这是我为 Wowza 学习的教程。 [http://www.wowza.com/forums/content.php?36-How-to-set-up-live-streaming-using-an-RTMP-based-encoder](http://www.wowza.com/forums/content.php?36-How-to-set-up-live-streaming-using-an-RTMP-based-encoder)

我现在正在等待我的 4.1 平板电脑，看看这是否有效。除非 Google 更改了 VideoView，否则这应该仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:17:51.657

在我的 Nexus 7 (Android 4.1) 上，HLS / H.264 直播*无法*在浏览器中运行。

但是，如果我改为提供或重定向到流式清单的链接，这将启动视频播放器应用程序，并且效果很好。

所以多一点 JQuery 黑客来围绕 JWPlayer 之类的东西或它的同类

# c# - 尝试捕捉并清理

> ID：11432601
> 
> 赞同：1
> 
> 时间：2012-07-11T12:25:07.853
> 
> 标签：c#

这是我的 DAL，我即将尝试/捕获代码，由于这个概念在我身上并没有发展壮大，我有以下疑问。它真正做某事的一次是在**ExecuteSQL**方法中。所以，我会试一试/赶上。但是我还应该在**GetLinea**或**UpdateLinea**中添加吗？我只能想到那里很奇怪的错误。

此外，如果您对此代码有任何清理建议，我很乐意听到。谢谢。

```
namespace DAL
{
    public class Connection
    {
        public string GetNewConnection(string server)
        {
            return ConfigurationManager.ConnectionStrings[server].ConnectionString;
        }

        public DataSet ExecuteSQL(string sp)
        {
            DataSet ds = new DataSet();
            string connectionString = GetNewConnection("BO");
            SqlConnection conn = new SqlConnection(connectionString);
            SqlCommand command = new SqlCommand(sp, conn);
            command.CommandType = CommandType.StoredProcedure;
            SqlDataAdapter da = new SqlDataAdapter(command);
            using (conn)
            {
                da.Fill(ds);
            }
            return ds;
        }
    }
    public class LineaDAL
    {
        Connection obj = new Connection();
        public DataSet GetLinea()
        {
            DataSet ds = new DataSet();
            string sp;
            sp = "sp1";
            ds = obj.ExecuteSQL(sp);
            return ds;
        }

        public bool UpdateLinea(string reclamo)
        {
            DataSet ds = new DataSet();
            string sp;
            sp = "sp2";
            ds = obj.ExecuteSQL(sp);
            return ExtensionMethods.IsEmpty(ds);
        }
    }

    public static class ExtensionMethods
    {
        public static bool IsEmpty(this DataSet ds)
        {
            return ds == null ||
              !(from DataTable t in ds.Tables where t.Rows.Count > 0 select t).Any();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:31:01.740

与任何异常处理一样，它实际上取决于您将如何处理它。经常使用 try/catch 来捕获可能的错误以防万一。但是，实际上你应该很少尝试/捕获，除非你想捕获特定的东西并正确处理它（用自定义消息通知用户该错误）。如果你对 catch 没有任何意义，那么让它冒泡到顶级异常处理程序。那至少是我的 2 美分

[这是关于异常处理的更深入的文章](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:30:59.727

使用数据库访问，尝试/捕获/最终总是一个好主意：

**尝试**执行您的数据库操作（选择、插入、更新、删除或 whaetever）

**捕捉**任何错误（数据库连接丢失，无效的 sql，......你永远不会知道）

**最后**清理一切（必要时丢弃连接，...）

并不是因为你只能想出“奇怪的错误”，所以一切都会顺利进行。您的应用程序有责任处理错误，并通知用户出了什么问题（即告诉用户检查他的网络连接）。

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:31:47.780

好吧，`GetLinea`考虑`UpdateLinea`到他们执行 SQL 查询*可能*会失败。

但是，无论是否从它们那里*捕获*异常，您都必须根据问题的答案来决定：异常是否发生在该方法中的致命错误？如果是，请不要处理它`try/catch`并让它使您的程序失败（*致命错误*）。否则将它们也插入里面`try/catch`

清理某些东西使用 finally 块

```
try {
...
}
catch(Exception ex)
{
  ...
}
finally {

 .. cleanup...
} 
```

无论是否有异常，都可以**保证（在大多数情况下）执行。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T12:57:34.077

记录错误是个好主意。

就像是：

```
try
{
...
}
catch(Exception ex)
{
    Log(ex.Message);
    MessageBox.Show("Error Occured. Please try again later."); //General message to the user 
}
finally
{
    Cleanup... like Disposing objects (like com objects) if they need to be disposed.
} 
```

您可以使用 Log4Net 之类的东西进行登录，但也可以构建自己的记录器。

*如果您认为这段代码可能导致错误*，那么使用 try/catch 是一个很好的做法，即使您确定您已经处理了可能导致错误的条件。在您的情况下，为什么不使用，只是为了确保如果发生异常，则对其进行处理。

# c# - 编写一个接受用户输入的 Resharper ContextAction

> ID：11432606
> 
> 赞同：2
> 
> 时间：2012-07-11T12:25:22.190
> 
> 标签：c#, resharper, resharper-6.1, resharper-plugins

我想创建一个 Resharper ContextAction，它从用户那里获取一个字符串。如何创建一个带有输入字段的框，其输入值可以在 ExecutePsiTransation 方法内处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:19:09.313

只需使用标准 WPF/Windows 窗体对话框。对于 Windows 窗体，使用采用 IWin32Window 实例的 Show/ShowDialog 重载。对于 WPF，请参阅 WPF[中的 IWin32Window](https://stackoverflow.com/questions/5543509/iwin32window-in-wpf)。通过 Shell.Instance.GetComponent().MainWindow 获取 IWin32Window 的实例。并且不要从 ExecutePsiTransation 中进行，而是从 ExecuteBeforeProgressAndTransaction 方法中进行。

# asp.net-mvc-3 - 从 ASP .NET MVC3 调用 WCF 服务的最佳做法是什么？

> ID：11432620
> 
> 赞同：4
> 
> 时间：2012-07-11T12:26:09.293
> 
> 标签：asp.net-mvc-3, wcf

我负责 ASP .NET MVC 3 Web 应用程序的解决方案架构，并希望确保我遵循最佳实践。我以前曾使用过 MVC 3，但使用的是其他人组合的解决方案。

我主要关心的是 Web 应用程序将使用 WCF 服务来检索和更新数据。我不认为直接从我的控制器方法调用 WCF 服务是最佳实践，但我不确定有什么好的替代方案（也许是存储库模式，与 WCF 结合使用会不寻常吗？）。我只是想知道是否有我可以使用的标准模式/实践。

此外，WCF 服务是许多其他 Web 服务的包装器，因此它有自己的业务对象类。我不确定是否应该在 WCF 服务类和 MVC 应用程序中的模型类之间创建另一个抽象级别。例如，WCF 服务有一个 Reservation 类，我是否需要在我的模型中为 Web 应用程序创建相同的类？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T12:40:20.097

我的 2 美分

> ...我不认为直接从我的控制器方法调用 WCF 服务是最佳实践，但我不确定有什么好的替代方案（也许是存储库模式 [...]）

不，不要再做一个抽象。直接使用您的服务，将代理实例注入您的控制器，然后直接从那里调用 WCF 方法。如果您希望可以创建一个包装类来处理一些 WCF 错误或错误。

在不久的将来，您的应用程序是否允许在 WCF 和数据库（作为数据源）之间轻松切换？如果不远离存储库模式 - 保持简单，愚蠢！

> 此外，WCF 服务是许多其他 Web 服务的包装器，因此它有自己的业务对象类。

不要编写复制粘贴代码，因为它很难维护。如果您需要在其中一项服务中更改一种类型，则必须在其他服务中进行相同的镜像更改。

而是将所有常见的业务对象分离到一个单独的项目（核心库）中，并在任何其他解决方案中重用这个库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:54:59.017

控制器负责获取/转换数据，因此它将通过代理与 WCF 服务交互。像这样的东西（在 VB.NET 中）：

```
'TODO: You could extract the channel creation in a generic reusable method (Of T)
Dim endpoint = New EndpointAddress() 'TODO: Initialize
Dim binding = New BasicHttpBinding() 'TODO: Initialize
Dim factory = New ChannelFactory(Of IYourContract)(binding, endpointAddr)
Dim channel = factory.CreateChannel()

Dim result = channel.YourOperation() 
```

您的 WCF 服务已经将“服务对象”转换为“业务对象”，因此您可以在 UI 层中将相同的“业务对象”视为“模型”。如果您有较轻的特定于页面或 JSON 序列化的实体，您可以根据需要创建其他模型。

我通常建议在 WCF 服务上使用“服务适配器”，但在您的情况下，WCF 服务似乎已经在这样做了。

# javascript - 用于插入 html 的 fckeditor 插件

> ID：11432630
> 
> 赞同：0
> 
> 时间：2012-07-11T12:26:23.670
> 
> 标签：javascript, html, plugins, fckeditor

我在使用我的客户插件将 HTML 插入 WYSYWIG 时遇到问题 我见过的有关此主题的所有互联网链接都说您应该使用

```
FCK.InsertHtml(); 
```

但是使用它我遇到了以下问题：InsertHtml() 之前的 HTML 内容：

```
<div>
<em>
<strong>
<font size="5">
<font face="Georgia">

123

</font>
</font>
</strong>
</em>
</div> 
```

然后我选择字符'2'并使用 FCK.InsertHtml(); 插入一个 html；并获得以下信息：

```
<div>
<em>
<strong>
<font size="5">
<font face="Georgia">

1

</font>
</font>
</strong>
</em>

<a class="subscribeNow" href="#ORDER_FORM_LINK#">2</a>

<em>
<strong>
<font size="5">
<font face="Georgia">

3

</font>
</font>
</strong>
</em>
</div> 
```

正如你所见，WYSYWIG 会自动关闭一些标签，结果模型被破坏了。有没有人知道如何在没有这些额外的源操作的情况下插入 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:39:42.443

首先 - FCKEditor 是 CKEditor 的前身，它的支持在几年前就被放弃了。我的回答对 CKEditor 有效，但我不确定是否也适用于 FCKeditor。

`editor#insertHtml`是一种在用户粘贴内容时大量使用的方法——这是它的主要功能。在当前的 CKEditor 版本中，此方法基于浏览器中实现的本机 HTML 插入算法工作。所以事实上我们，CKEditor 的开发者，对这些算法没有太多要说的——我们不能改变它们。但是，除了我们不太喜欢的浏览器之间的许多差异之外，我们接受这些算法，因为它们的行为或多或少是正确的。

为什么是正确的？假设您在 MSWord 中有粗体文本。您复制了它并将其粘贴到带下划线的文本中。怎么了？您粘贴的文本没有下划线，只是加粗。这是因为 MSWord 假定您想要保留复制内容的样式。CKEditor 的工作原理完全相同。

您的解决方案将是使用`editor#insertElement`无需这些特殊操作即可插入数据（一个元素）的方法。如果您想一次插入更多元素，那么您必须在循环中执行此操作。

这是示例用法`insertElement`（您可以在将编辑器的内容设置为并将插入符号代替之后在[http://ckeditor.com/demo](http://ckeditor.com/demo)上对其进行测试）：`<p><strong>te^xt</strong></p>``^`

```
var editor = CKEDITOR.instances.editor1,
    element = CKEDITOR.dom.element.createFromHtml( '<u>xxx</u>' );

editor.insertElement( element ); // result: <p><strong>te<u>xxx</u>xt</strong></p>
editor.insertHtml( '<i>yyy</i>' ); // result: <p><strong>te<u>xxx</u></strong><i>yyy</i><strong>xt</strong></p> 
```

如果您在 Chrome 浏览器之外进行测试，结果可能会有所不同。

PS。在新的 CKEditor 版本中，插入内容而不保留样式将被简化，因为我们已经意识到了这个问题。

# java - 不可变对象与不可变对象的引用有什么区别？

> ID：11432633
> 
> 赞同：1
> 
> 时间：2012-07-11T12:26:30.493
> 
> 标签：java

我对此感到困惑，因为在内部有一个 final 字段`b`只是`type B`确保`Object A`该字段 `b`不能再次实例化，但`A`仍然可以通过`b`内部或外部操作来更改其状态，那么 final 在这里如何达到不可变的目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:33:42.377

对你最后一个问题的简单回答是：它没有。

除非没有办法改变 'b' 的状态，否则 final 在 'a' 的可变性方面不会给你带来任何好处。

这些是正交概念，但是在所有可能的地方使用“final”将帮助您实现对象不变性，尽管这不是必需的，您也可以不用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:29:13.883

`final`有助于实现不可变对象。不可变对象必须确保它拥有的任何对象本身都是不可变的，或者至少不是公开可变的。

Java 中没有通向不变性的王道（或者，我可能会补充）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:39:13.367

制作该字段`final`提供了一个编译时检查，即 A 没有修改对 B的*引用。*

虽然这不足以保证 A 的不变性，但它是有帮助的。

*防御性副本*可以防止对 b 引用的可变对象进行外部修改。可以为 A 构造函数接收的对象和 A 访问器返回的对象制作防御性副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T12:34:07.450

我不是 100% 确定，但我认为本质上的区别在于，使用`final`关键字只是向程序员保证，变量将在整个执行过程中始终引用同一个对象。然而，没有什么能阻止对象本身以某种方式发生变化。

考虑以下伪代码：`final Car c = new BMW(Color.Green, new Milage(0));`

您不能`c`稍后在代码中分配给奥迪或福特，但“使用”您的宝马没有限制，因此它的里程会在您的程序过程中增加。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-17T09:37:38.747

对象是不可变的 - 意味着该对象中变量的数据或值一旦设置就无法更改。

引用是不可变的 - 意味着指向该对象的变量是最终变量。

# python - celery 升级到 3 后台球崩溃

> ID：11432634
> 
> 赞同：0
> 
> 时间：2012-07-11T12:26:39.430
> 
> 标签：python, celery, django-celery, billiards

我最近在 ubuntu 10.4 服务器上使用了 django-celery 升级。它将 celery 升级到 3.0.1，然后还安装了台球。输出如下。

```
sudo easy_install --upgrade django-celery
Searching for django-celery
Reading http://pypi.python.org/simple/django-celery/
Reading http://celeryproject.org
Best match: django-celery 3.0.1
Downloading http://pypi.python.org/packages/source/d/django-celery/django-celery-3.0.1.tar.gz#md5=16c59b6a39676ca3fed6676e16e80bb3
Processing django-celery-3.0.1.tar.gz
Running django-celery-3.0.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-8H1yhX/django-celery-3.0.1/egg-dist-tmp-t1kBSJ
warning: no files found matching 'FAQ'
warning: no files found matching 'README.rst'
no previously-included directories found matching 'bin/*.pyc'
no previously-included directories found matching 'tests/*.pyc'
no previously-included directories found matching 'docs/*.pyc'
no previously-included directories found matching 'extra/*.pyc'
no previously-included directories found matching 'djcelery/*.pyc'
no previously-included directories found matching 'docs/.build'
no previously-included directories found matching 'examples/*.pyc'
Removing django-celery 2.3.3 from easy-install.pth file
Adding django-celery 3.0.1 to easy-install.pth file
Installing djcelerymon script to /usr/local/bin
Installing djcelerymon script to /usr/local/bin

Installed /usr/local/lib/python2.6/dist-packages/django_celery-3.0.1-py2.6.egg
Processing dependencies for django-celery
Searching for celery>=3.0.1
Reading http://pypi.python.org/simple/celery/
Reading http://github.com/ask/celery/
Best match: celery 3.0.1
Downloading http://pypi.python.org/packages/source/c/celery/celery-3.0.1.tar.gz#md5=64cd59537ddda0b32ef3e54935650771
Processing celery-3.0.1.tar.gz
Running celery-3.0.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-uL6a4S/celery-3.0.1/egg-dist-tmp-5hrIRJ
- force upgrading previous installation
  - removing '/usr/local/lib/python2.6/dist-packages/celery-2.3.1-py2.6.egg/celery/app/task' package...
no previously-included directories found matching '*.pyc'
Removing celery 2.3.1 from easy-install.pth file
Adding celery 3.0.1 to easy-install.pth file
Installing celeryctl script to /usr/local/bin
Installing celeryd script to /usr/local/bin
Installing camqadm script to /usr/local/bin
Installing celeryev script to /usr/local/bin
Installing celery script to /usr/local/bin
Installing celeryd-multi script to /usr/local/bin
Installing celerybeat script to /usr/local/bin

Installed /usr/local/lib/python2.6/dist-packages/celery-3.0.1-py2.6.egg
Searching for kombu>=2.2.5,<3.0
Reading http://pypi.python.org/simple/kombu/
Reading http://github.com/ask/kombu/
Reading http://kombu.readthedocs.org
Best match: kombu 2.2.6
Downloading http://pypi.python.org/packages/source/k/kombu/kombu-2.2.6.tar.gz#md5=3eac58bf4b54f28abb2be5e30404b46a
Processing kombu-2.2.6.tar.gz
Running kombu-2.2.6/setup.py -q bdist_egg --dist-dir /tmp/easy_install-iu3AZk/kombu-2.2.6/egg-dist-tmp-mD0pZA
warning: no files found matching 'FAQ'
warning: no files found matching 'README.rst'
warning: no files found matching 'README'
Removing kombu 1.2.1 from easy-install.pth file
Adding kombu 2.2.6 to easy-install.pth file

Installed /usr/local/lib/python2.6/dist-packages/kombu-2.2.6-py2.6.egg
Searching for billiard>=2.7.3.10
Reading http://pypi.python.org/simple/billiard/
Reading http://github.com/ask/billiard
Reading http://github.com/celery/billiard
Best match: billiard 2.7.3.10
Downloading http://pypi.python.org/packages/source/b/billiard/billiard-2.7.3.10.tar.gz#md5=c45ef2790bdaad4183e903d516c996f4
Processing billiard-2.7.3.10.tar.gz
Running billiard-2.7.3.10/setup.py -q bdist_egg --dist-dir /tmp/easy_install-I7GOq6/billiard-2.7.3.10/egg-dist-tmp-ktFy4f
warning: no files found matching '*.py' under directory 'Lib'
Adding billiard 2.7.3.10 to easy-install.pth file

Installed /usr/local/lib/python2.6/dist-packages/billiard-2.7.3.10-py2.6-linux-i686.egg
Searching for amqplib>=1.0.2
Reading http://pypi.python.org/simple/amqplib/
Reading http://barryp.org/software/py-amqplib/
Reading http://code.google.com/p/py-amqplib/
Best match: amqplib 1.0.2
Downloading http://py-amqplib.googlecode.com/files/amqplib-1.0.2.tgz
Processing amqplib-1.0.2.tgz
Running amqplib-1.0.2/setup.py -q bdist_egg --dist-dir /tmp/easy_install-64sBF8/amqplib-1.0.2/egg-dist-tmp-qSYI3b
zip_safe flag not set; analyzing archive contents...
Removing amqplib 1.0.0 from easy-install.pth file
Adding amqplib 1.0.2 to easy-install.pth file

Installed /usr/local/lib/python2.6/dist-packages/amqplib-1.0.2-py2.6.egg
Searching for anyjson>=0.3.3
Reading http://pypi.python.org/simple/anyjson/
Reading http://bitbucket.org/runeh/anyjson
Reading http://bitbucket.org/runeh/anyjson/
Best match: anyjson 0.3.3
Downloading http://pypi.python.org/packages/source/a/anyjson/anyjson-0.3.3.tar.gz#md5=2ea28d6ec311aeeebaf993cb3008b27c
Processing anyjson-0.3.3.tar.gz
Running anyjson-0.3.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-ZziFNI/anyjson-0.3.3/egg-dist-tmp-iwK4uD
Removing anyjson 0.3.1 from easy-install.pth file
Adding anyjson 0.3.3 to easy-install.pth file

Installed /usr/local/lib/python2.6/dist-packages/anyjson-0.3.3-py2.6.egg
Finished processing dependencies for django-celery 
```

现在，当我尝试运行 celery 时，它会因台球中的一些错误而崩溃，说指针问题无效。我错过了什么？

```
*** glibc detected *** /usr/bin/python: free(): invalid pointer: 0x089b4724 ***
======= Backtrace: =========
/lib/tls/i686/nosegneg/libc.so.6(+0x6c321)[0xb74e0321]
/lib/tls/i686/nosegneg/libc.so.6(+0x6db78)[0xb74e1b78]
/lib/tls/i686/nosegneg/libc.so.6(cfree+0x6d)[0xb74e4c9d]
/usr/local/lib/python2.6/dist-packages/billiard-2.7.3.10-py2.6-linux-i686.egg/_billiard.so(+0x3824)[0xb7369824]
/usr/bin/python[0x8090304]
/usr/bin/python[0x80ab611]
/usr/bin/python[0x8090304]
/usr/bin/python[0x80ab611]
/usr/bin/python[0x808308e]
/usr/bin/python[0x816c36c]
/usr/bin/python[0x8090304]
/usr/bin/python[0x806c88b]
/usr/bin/python[0x8169a4a]
/usr/bin/python[0x81077d4]
/usr/bin/python[0x81077e4]
/usr/bin/python[0x81077e4]
/usr/bin/python[0x81077e4]
/usr/bin/python[0x808ecd9]
/usr/bin/python(PyDict_SetItem+0x87)[0x8091037]
/usr/bin/python(PyDict_SetItemString+0x43)[0x80911f3]
/usr/bin/python(PyImport_Cleanup+0x101)[0x80f2be1]
/usr/bin/python(Py_Finalize+0x10c)[0x80ffdec]
/usr/bin/python(Py_Main+0x4a6)[0x805d826]
/usr/bin/python(main+0x1b)[0x805d03b]
/lib/tls/i686/nosegneg/libc.so.6(__libc_start_main+0xe6)[0xb748abd6]
/usr/bin/python[0x805cf81]
======= Memory map: ========
08048000-08228000 r-xp 00000000 08:01 475601     /usr/bin/python2.6
08228000-08229000 r--p 001df000 08:01 475601     /usr/bin/python2.6
08229000-08278000 rw-p 001e0000 08:01 475601     /usr/bin/python2.6
08278000-08281000 rw-p 00000000 00:00 0 
08712000-08c04000 rw-p 00000000 00:00 0          [heap]
b7100000-b7121000 rw-p 00000000 00:00 0 
b7121000-b7200000 ---p 00000000 00:00 0 
b7209000-b7226000 r-xp 00000000 08:01 73921      /lib/libgcc_s.so.1
b7226000-b7227000 r--p 0001c000 08:01 73921      /lib/libgcc_s.so.1
b7227000-b7228000 rw-p 0001d000 08:01 73921      /lib/libgcc_s.so.1
b7230000-b7237000 r-xp 00000000 08:01 41665      /usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg/simplejson/_speedups.so
b7237000-b7238000 r--p 00006000 08:01 41665      /usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg/simplejson/_speedups.so
b7238000-b7239000 rw-p 00007000 08:01 41665      /usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg/simplejson/_speedups.so
b7239000-b723b000 r-xp 00000000 08:01 486931     /usr/lib/python2.6/lib-dynload/resource.so
b723b000-b723c000 r--p 00001000 08:01 486931     /usr/lib/python2.6/lib-dynload/resource.so
b723c000-b723d000 rw-p 00002000 08:01 486931     /usr/lib/python2.6/lib-dynload/resource.so
b723e000-b723f000 rw-s 00000000 00:0f 11605      /dev/shm/sem.mp-025f3c38-1141-2
b723f000-b7242000 r-xp 00000000 08:01 73973      /lib/libuuid.so.1.3.0
b7242000-b7243000 r--p 00002000 08:01 73973      /lib/libuuid.so.1.3.0
b7243000-b7244000 rw-p 00003000 08:01 73973      /lib/libuuid.so.1.3.0
b7244000-b725b000 r-xp 00000000 08:01 486899     /usr/lib/python2.6/lib-dynload/_ctypes.so
b725b000-b725c000 r--p 00017000 08:01 486899     /usr/lib/python2.6/lib-dynload/_ctypes.so
b725c000-b725f000 rw-p 00018000 08:01 486899     /usr/lib/python2.6/lib-dynload/_ctypes.so
b725f000-b726e000 r-xp 00000000 08:01 486917     /usr/lib/python2.6/lib-dynload/datetime.so
b726e000-b726f000 r--p 0000e000 08:01 486917     /usr/lib/python2.6/lib-dynload/datetime.so
b726f000-b7272000 rw-p 0000f000 08:01 486917     /usr/lib/python2.6/lib-dynload/datetime.so
b7272000-b7355000 rw-p 00000000 00:00 0 
b7355000-b735c000 r-xp 00000000 08:01 83780      /lib/tls/i686/nosegneg/librt-2.11.1.so
b735c000-b735d000 r--p 00006000 08:01 83780      /lib/tls/i686/nosegneg/librt-2.11.1.so
b735d000-b735e000 rw-p 00007000 08:01 83780      /lib/tls/i686/nosegneg/librt-2.11.1.so
b735e000-b735f000 rw-s 00000000 00:0f 11603      /dev/shm/sem.mp-025f3c38-1141-1
b735f000-b7360000 rw-s 00000000 00:0f 11601      /dev/shm/sem.mp-025f3c38-1141-0
b7360000-b7361000 rw-p 00000000 00:00 0 
b7361000-b7363000 r-xp 00000000 08:01 486905     /usr/lib/python2.6/lib-dynload/_heapq.so
b7363000-b7364000 r--p 00001000 08:01 486905     /usr/lib/python2.6/lib-dynload/_heapq.so
b7364000-b7366000 rw-p 00002000 08:01 486905     /usr/lib/python2.6/lib-dynload/_heapq.so
b7366000-b736b000 r-xp 00000000 08:01 50186      /usr/local/lib/python2.6/dist-packages/billiard-2.7.3.10-py2.6-linux-i686.egg/_billiard.so
b736b000-b736c000 r--p 00004000 08:01 50186      /usr/local/lib/python2.6/dist-packages/billiard-2.7.3.10-py2.6-linux-i686.egg/_billiard.so
b736c000-b736d000 rw-p 00005000 08:01 50186      /usr/local/lib/python2.6/dist-packages/billiard-2.7.3.10-py2.6-linux-i686.egg/_billiard.so
b736d000-b73ef000 rw-p 00000000 00:00 0 
b73ef000-b73f0000 rwxp 00000000 00:00 0 
b73f0000-b7474000 rw-p 00000000 00:00 0 
b7474000-b75cb000 r-xp 00000000 08:01 83764      /lib/tls/i686/nosegneg/libc-2.11.1.so
b75cb000-b75cc000 ---p 00157000 08:01 83764      /lib/tls/i686/nosegneg/libc-2.11.1.so
b75cc000-b75ce000 r--p 00157000 08:01 83764      /lib/tls/i686/nosegneg/libc-2.11.1.so
b75ce000-b75cf000 rw-p 00159000 08:01 83764      /lib/tls/i686/nosegneg/libc-2.11.1.so
b75cf000-b75d2000 rw-p 00000000 00:00 0 
b75d2000-b75f6000 r-xp 00000000 08:01 83768      /lib/tls/i686/nosegneg/libm-2.11.1.so
b75f6000-b75f7000 r--p 00023000 08:01 83768      /lib/tls/i686/nosegneg/libm-2.11.1.so
b75f7000-b75f8000 rw-p 00024000 08:01 83768      /lib/tls/i686/nosegneg/libm-2.11.1.so
b75f8000-b760b000 r-xp 00000000 08:01 73977      /lib/libz.so.1.2.3.3
b760b000-b760c000 r--p 00012000 08:01 73977      /lib/libz.so.1.2.3.3
b760c000-b760d000 rw-p 00013000 08:01 73977      /lib/libz.so.1.2.3.3
b760d000-b7745000 r-xp 00000000 08:01 74561      /lib/i686/cmov/libcrypto.so.0.9.8
b7745000-b774d000 r--p 00137000 08:01 74561      /lib/i686/cmov/libcrypto.so.0.9.8
b774d000-b775b000 rw-p 0013f000 08:01 74561      /lib/i686/cmov/libcrypto.so.0.9.8
b775b000-b775f000 rw-p 00000000 00:00 0 
b775f000-b77a3000 r-xp 00000000 08:01 74562      /lib/i686/cmov/libssl.so.0.9.8
b77a3000-b77a4000 r--p 00044000 08:01 74562      /lib/i686/cmov/libssl.so.0.9.8
b77a4000-b77a7000 rw-p 00045000 08:01 74562      /lib/i686/cmov/libssl.so.0.9.8
b77a7000-b77a8000 rw-p 00000000 00:00 0 
b77a8000-b77aa000 r-xp 00000000 08:01 83782      /lib/tls/i686/nosegneg/libutil-2.11.1.so
b77aa000-b77ab000 r--p 00001000 08:01 83782      /lib/tls/i686/nosegneg/libutil-2.11.1.so
b77ab000-b77ac000 rw-p 00002000 08:01 83782      /lib/tls/i686/nosegneg/libutil-2.11.1.so
b77ac000-b77ae000 r-xp 00000000 08:01 83767      /lib/tls/i686/nosegneg/libdl-2.11.1.so
b77ae000-b77af000 r--p 00001000 08:01 83767      /lib/tls/i686/nosegneg/libdl-2.11.1.so
b77af000-b77b0000 rw-p 00002000 08:01 83767      /lib/tls/i686/nosegneg/libdl-2.11.1.so
b77b0000-b77c5000 r-xp 00000000 08:01 83778      /lib/tls/i686/nosegneg/libpthread-2.11.1.so
b77c5000-b77c6000 r--p 00014000 08:01 83778      /lib/tls/i686/nosegneg/libpthread-2.11.1.so 
```

我需要升级libc吗？我该如何升级它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:14:16.293

我遇到了类似的问题。安装 python-devel 包虽然修复了它。

```
yum install python-devel 
```

# windows - 从卷偏移或扇区获取文件名（Windows）

> ID：11432637
> 
> 赞同：1
> 
> 时间：2012-07-11T12:26:58.327
> 
> 标签：windows, filenames, offset, volume, sector

我正在开发一个上卷过滤器驱动程序，它监视卷的读/写块。当发生任何读/写时，我会从中获取卷偏移和第一个扇区（LBA）。如何使用 C/C++ 从卷偏移或第一个扇区获取文件名？任何形式的帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:36:45.470

这几乎是可能的，有点。[您可以使用此代码](https://stackoverflow.com/a/7459109/886887)枚举卷上的所有文件。（***警告：***一些 printf 函数`%lu`在应该使用的时候使用`%I64u`，所以打印的一些信息是错误的，最明显的是文件参考号；我相信主要逻辑是可以的。）

对于您找到的每个文件，您可以使用[`FSCTL_GET_RETRIEVAL_POINTERS`](http://msdn.microsoft.com/en-us/library/aa364572%28v=vs.85%29)它来查找其在磁盘上的位置。

所以你可以提前建立一个数据库。您可以使用它来使其保持最新状态，[`FSCTL_READ_USN_JOURNAL`](http://msdn.microsoft.com/en-us/library/aa364586%28v=vs.85%29)而不必不断地重新扫描整个磁盘。

但是，即使确定了曾经位于给定位置的文件，您也需要再次检查它以防它被移动。USN 日志可能不会记录文件在未进行逻辑修改的情况下重新定位到磁盘上的情况。

而且，即使那样，也不能保证文件在您检查之前没有被移走然后又被移回。或者，在您有机会收集任何数据之前，可能会创建一个文件然后再次删除它。

所以，基本上：**不。你不能那样做。**

（在某些情况下可能有其他解决方案。例如，如果您的驱动程序可以在感兴趣的点对卷的内容进行快照，则可以检查快照以确定有问题的文件。您必须包括您的不过，你有自己的 NTFS 堆栈。你也许可以从 Linux 借用 NTFS 代码。基本上仍然比它可能值得付出更多的努力。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T21:17:59.607

[FSCTL_LOOKUP_STREAM_FROM_CLUSTER](https://msdn.microsoft.com/en-us/library/windows/desktop/ff951637%28v=vs.85%29.aspx)做你想做的事，但它很慢。

# jpa-2.0 - org.hibernate.AnnotationException：@Temporal 只能在 java.util.Date 或 java.util.Calendar 属性上设置

> ID：11432639
> 
> 赞同：1
> 
> 时间：2012-07-11T12:27:03.597
> 
> 标签：jpa-2.0

我正在使用下面的 jar 来运行 jpa 程序，但出现异常：

```
hibernate-entitymanager-3.4.0.GA.jar
hibernate-annotations-3.4.0.GA.jar
hibernate-commons-annotations-3.3.0.ga.jar
hibernate-core-3.3.1.GA.jar
javax.persistence.jar 
```

例外是：

> org.hibernate.AnnotationException：@Temporal 只能在 java.util.Date 或 java.util.Calendar 属性上设置：asso_attrib_overrides.FulltimeEmployee.currentProjects。

我的实体：

```
@Entity
public class FulltimeEmployee extends Employee {

    @ElementCollection
    @CollectionTable(name="EMP_PROJECTS", joinColumns=@JoinColumn(name="MY_EMP_ID"))
    @Temporal(TemporalType.DATE)
    @MapKeyJoinColumn(name="THE_PROJECT_ID")
    @Column(name="STARTDATE")
    protected Map<Project, Date> currentProjects;

    public Map<Project, Date> getCurrentProjects() {
        return currentProjects;
    }

      public void setCurrentProjects(Map&lt;Project, Date> currentProjects) {
        this.currentProjects = currentProjects;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-17T14:54:10.083

我得到了同样的错误，事实证明我在做

```
import java.sql.Date; 
```

代替

```
import java.util.Date; 
```

希望这可能会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-09T23:50:26.013

我遇到了同样的问题，并且在运行应用程序时得到了关注。

```
Exception in thread "main" org.hibernate.AnnotationException: @Temporal should only be set on a java.util.Date or java.util.Calendar property: com.model.Student.currentDate
    at org.hibernate.cfg.annotations.SimpleValueBinder.setType(SimpleValueBinder.java:189)
    at org.hibernate.cfg.annotations.PropertyBinder.makePropertyAndValue(PropertyBinder.java:185)
    at org.hibernate.cfg.annotations.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:205)
    at org.hibernate.cfg.AnnotationBinder.processElementAnnotations(AnnotationBinder.java:2236)
    at org.hibernate.cfg.AnnotationBinder.processIdPropertiesIfNotAlready(AnnotationBinder.java:961)
    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:788)
    at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:250)
    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:231)
    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:274)
    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:84)
    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:474)
    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:85)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:689)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)
    at com.main.HibernateMain.main(HibernateMain.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:497)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) 
```

发生这种情况是因为我将**错误的日期导入语句导入到我的班级**中

```
import java.sql.Date; 
```

删除导入语句并使用以下内容，

```
import java.util.Date; 
```

然后它工作。

**如果有人想知道这两个进口**之间的区别。检查以下内容。

*   java.sql.Date 是一个围绕毫秒值的瘦包装器，JDBC 使用它来识别 SQL DATE 类型
*   java.sql.Date 只表示没有时间信息的 DATE，而 java.util.Date 表示日期和时间信息。这是 java.util.Date 不能直接映射到 java.sql.Date 的主要区别。

有关更多信息，请查看：

[https://javarevisited.blogspot.com/2012/04/difference-between-javautildate-and.html#ixzz5KnvEjas7](https://javarevisited.blogspot.com/2012/04/difference-between-javautildate-and.html#ixzz5KnvEjas7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:53:55.770

根据您使用 JPA 2.0 的标签。这并不完全正确，因为 3.4 是 JPA 1.0 实现。只有从 3.5.x 开始的 Hibernate 版本是 JPA 2.0 API 的实现。

这会导致问题，因为在 JPA 2.0 中引入了将 @Temporal 与 ElementCollection 结合使用的概念。这个错误不会被忽略，因为 @Temporal 注释已经存在于早期版本中，但在 JPA 2.0 中扩大了使用范围以涵盖您的用例。仅在以后的规范中存在的其他注释被默默地忽略，这也可能导致问题。

您可以做的是将 Hibernate 更新到较新的版本，例如更新到 3.6.10。如果您正在创建新软件，则没有迁移问题，因此直接更新到 4.x 是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T11:20:21.890

使用 Date 时，返回类型必须是 Date。即是 java.util(import java.util.Date;)

```
 private Date date;

@Temporal(TemporalType.DATE)
    public Date getDate() {
        return date;
    }
    public void setDate(Date date) {
        this.date = date;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T08:17:16.463

两件事实际上你必须考虑。

1.  采用`java.util.Date`

2.  确保您的字段返回类型也是`Date`

    ```
    @UpdateTimestamp
    @Temporal(TemporalType.DATE)
    @Getter
    @Setter
    private Date DATE_MODIFIED; 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-12T10:01:08.760

正确的

`@Temporal`只能在`java.util.Date`or`java.util.Calendar`属性上设置

此错误将使用“ `java.util.Date`”而不是“ `java.sql.date`”解决

使用你创建你的getter和setter的地方像“ `import java.util.date`”一样导入它

它会工作......

# .net - 如何在 LINQPad 中添加对程序集的引用以访问自定义类型？

> ID：11432642
> 
> 赞同：56
> 
> 时间：2012-07-11T12:27:14.770
> 
> 标签：.net, linqpad

是否可以在 LINQPad 中添加对程序集的引用？

我的程序集中有一些类型，我想在我的 LINQPad 查询中使用它们。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-11T12:29:12.270

只需按`F4`。

这将弹出`Add Reference`对话框。

* * *

![添加对 linqpad 的引用](../Images/64f84568b06af11068e4cef4032e076d.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-01T09:08:20.670

您还可以使用菜单选项访问弹出窗口以添加参考。

*   注意菜单栏中的 >> 箭头。点击它。

*   进入*查询*菜单。查找*引用和属性*。点击它。

以下是来自 LINQPad 5 的示例图像：

[![在此处输入图像描述](../Images/353d2ba3dea541878fc5d567dba1eb18.png)](https://i.stack.imgur.com/zIWL8.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-03T16:35:27.953

**这不适用于您的情况，但可能对与我有相同问题的其他人有所帮助**。我的问题是“缺少”系统类型 ( `Task<T>`)，因为默认情况下 LinqPad 没有*使用*它。在 LinqPad 上添加它的一种方法是按`F4`>`Namespace Imports`选项卡并在列表底部添加，`System.Threading.Tasks`然后按`Ok`。

您还可以将此新列表设置为新查询的默认值`Set as default for new queries`

[![走捷径](../Images/f92094191600f0153edd497b6a552b17.png)](https://i.stack.imgur.com/F3L5k.png)

访问此选项卡的其他方式是通过顶部菜单`Query`>`Namespace Imports`

[![进入查询菜单](../Images/7b08eef47ddb9fa752d22e5e199121f8.png)](https://i.stack.imgur.com/iGvAq.png)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2018-03-08T16:09:03.183

我必须同时`fn`做`F4`。

# iphone - 使用 AFNetworking 发送多个图像

> ID：11432644
> 
> 赞同：6
> 
> 时间：2012-07-11T12:27:18.713
> 
> 标签：iphone, objective-c, ios, afnetworking, multipartform-data

我正在开发一个消息应用程序，用户也可以互相发送图片。
当用户发送多张图片时，我将它们并行发送（我不会等待第一张完成上传，然后再发送第二张）

在迁移到之前，`AFNetworking`我成功地使用了`ASIFormDataRequest`，实际上如果我发送了 2 张图像，它们都被并行传输并成功传送给了另一个用户。

当我尝试使用 AFNetworking 执行此操作时，我得到了一些奇怪的行为。
我将尝试描述 user1 也发送两个图像 user2 的情况：

1.  User1 发送 image1 -> 一切正常，我可以看到上传进度。
2.  User1 然后发送 image2 -> 看起来还可以，我可以看到两个图像的上传进度
3.  image1 上传完成 -> user2 得到一个损坏的图像，看起来像是 image1 和 image2 的组合！
4.  image2 上传完成 -> user2 成功获取 image2

这就是我发送图像的方式

```
- (void)sendImageMsgWithPath:(NSString *)path
                       image:(UIImage *)image
                     success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
                     failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure
                    progress:(void (^)(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite))progress
{
    NSData *imageData = UIImageJPEGRepresentation(image, 0.5);

    // create the request

    NSURLRequest *request = [[AppClient sharedClient] multipartFormRequestWithMethod:@"POST" path:path parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) 
                             {
                                 [formData appendPartWithFileData:imageData name:@"image_name" fileName:@"image_name.jpg" mimeType:@"image/jpeg"];
                             }];

    // create the operation

    AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];

    // set progress block

    [operation setUploadProgressBlock:progress];

    //set completion blocks

    [operation setCompletionBlockWithSuccess:success failure:failure];

    // set it to work in background

    [operation setShouldExecuteAsBackgroundTaskWithExpirationHandler:nil];

    // add it to the operations queue

    [[AppClient sharedClient] enqueueHTTPRequestOperation:operation];
} 
```

*** 两个图片上传的路径是一样的：

> path = @"FrontEnd?cmd=sendimage&fromuserid=3&touserid=1&"

它将被添加到 baseURL 以创建完整的 URL：

> @" [http://somename.myftp.org:8080/web_proj/FrontEnd?cmd=sendimage&fromuserid=3&touserid=1](http://somename.myftp.org:8080/web_proj/FrontEnd?cmd=sendimage&fromuserid=3&touserid=1) "

这是我发送的图像：
image1
![在此处输入图像描述](../Images/e8c92e90c9493c764943c06f52d6016e.png)

图2
![在此处输入图像描述](../Images/df9c54346a8e960db4b955b575318368.png)

损坏的图像
![在此处输入图像描述](../Images/475eb95fe13057fc3454c6b9e303dd3b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:36:51.853

使用 multipartFormRequest 用于以下方法：

```
- (NSMutableURLRequest *)multipartFormRequestWithMethod:(NSString *)method
                                               path:(NSString *)path
                                         parameters:(NSDictionary *)parameters
                          constructingBodyWithBlock:(void (^)(id <AFMultipartFormDataProxy>formData))block; 
```

例如像这样：

```
 NSURLRequest* request = [[YourHTTPClient sharedHTTPClient] multipartFormRequestWithMethod:@"POST"
                     path:path
                     parameters:dict
                     constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
                          [formData appendPartWithFileData:data1
                                                      name:@"image1"
                                                      fileName:@"image1.jpg"
                                                      mimeType:@"image/jpeg"];
                          [formData appendPartWithFileData:data2
                                                      name:@"image2"
                                                      fileName:@"image2.jpg"
                                                      mimeType:@"image/jpeg"];
                     }
                 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T19:55:11.147

您如何创建传递给您的 sendImageMsgWithPath: 方法的 UIImage 对象？您是否使用 imageWithData: （或类似的）创建它们？如果是这样，我在尝试重用 NSMutableData 时遇到过这样的问题。似乎即使在您创建 UIImage 之后，子系统仍然需要稍后读取该数据。如果您此后重用了该 NSMutableData，则图像将被损坏。

如果是这种情况，我建议您使用新的 NSMutableData 来创建每个 UIImage。

# web-services - 关于REST的几个问题

> ID：11432645
> 
> 赞同：0
> 
> 时间：2012-07-11T12:27:20.673
> 
> 标签：web-services, http, rest

**1）如何处理人际关系？**

假设我有一个由作者撰写的文章资源。

基本上我会有类似的东西：

```
{
    "article": {
        "id": 1,
        "title": "Foo bar",
        "body": "Lorem ipsum dolor sid amet",
        "published_on": "2011-05-06 21:54:23",
        "author": {
            "id": 25,
            "username": "johndoe"
        }
    }
} 
```

我将访问我的资源`api/articles/1`

我的问题是，表示这些数据的最佳方式是什么？

我应该做类似的事情：

```
{
    "article": {
        "id": 1,
        "title": "Foo bar",
        "body": "Lorem ipsum dolor sid amet",
        "published_on": "2011-05-06 21:54:23",
    }
} 
```

并通过调用访问作者`api/articles/1/author`

仅包含作者 ID（子对象标识符）

```
{
    "article": {
        "id": 1,
        "title": "Foo bar",
        "body": "Lorem ipsum dolor sid amet",
        "published_on": "2011-05-06 21:54:23",
        "author": {
            "id": 25,
        }
    }
} 
```

或者包括上面看到的完整关系？

* * *

**2) PUT 或 POST 创建新对象？**

看看 SO 和其他地方，我注意到两者都用于创建和/或更新对象。

据我了解，两者都是有效的行动，但这取决于上下文。如果我创建与以前创建的对象相关的子对象，我必须使用`POST`.

例如：我为一篇文章创建投票，因为该文章已经存在，我将`POST`重新投票，但是，如果我创建一个新文章，我`PUT`就投票。

我对吗？

* * *

**3）我们应该如何格式化日期？**

我已经看到 SO 使用 Unix Timestamp，其中 ISO8601 主要用于其他地方。

对此有什么“标准”或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:34:28.207

> 1.  如何处理人际关系？

您的第一种方法不是很好，因为它不允许发现作者-可能是您想知道的。

第二种方法是有效的，但需要您提前知道 URI 模式以延迟获取作者，例如`api/author/25`.

只要您没有一对多的关系（文档的大小呈指数增长）或非常大的嵌套对象，第三种方法就可以了。

由几个人提倡的第四种方法是通过使用超链接而不是抽象标识符或完整文档来采用[hatos原则。](/questions/tagged/hateos "显示标记为“hateos”的问题")

> 2.  PUT 或 POST 创建新对象？

这里没有混淆。POST 始终用于创建新对象，而 PUT 应该更新现有对象（或者如果它不存在则可能创建一个对象。底线：每次调用 POST 时，都会更改系统（资源）的状态。但是你可以调用PUT 多次（幂等性 - 当您想安全地重试时很好）。

请注意，POST 链接通常不包含 ID（例如`POST api/articles`），而 PUT DO: `PUT api/articles/42`。如果您知道 ID，则该实体可能已经存在。

> 3.  我们应该如何格式化日期？

UNIX 时间戳和[iso8601](/questions/tagged/iso8601 "显示标记为“iso8601”的问题")都可以。我不确定[JSON 模式建议](https://datatracker.ietf.org/doc/html/draft-zyp-json-schema-03)中是否有任何标准设备：

> **5.23。格式**

> [...]

> `date-time` 这应该是 UTC 时间中 YYYY-MM-DDThh:mm:ssZ 的 ISO 8601 格式的日期。这是日期/时间戳的推荐形式。

# sql - 如何从 SQL Server 2000 中的多个表中获取不同的行

> ID：11432654
> 
> 赞同：1
> 
> 时间：2012-07-11T12:27:46.560
> 
> 标签：sql, sql-server, sql-server-2000, distinct

我有 3 张桌子。我想组合这三个表，我只需要 SQL Server 2000 中的不同行

例如：

**表 A**

```
id
--
1  
2  
3 
```

**表 B**

```
id
--
2  
3  
4 
```

**表 C**

```
id
--
2  
3  
5  
6 
```

我想要的结果是：

```
id
--
1  
2  
3  
4  
5  
6 
```

任何建议都会有所帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:29:15.063

使用[`UNION`](http://msdn.microsoft.com/en-us/library/ms180026.aspx)（不带`ALL`），如下所示：

```
SELECT id 
FROM Table1
UNION
SELECT id
FROM Table2
UNION
SELECT id
FROM Table3 
```

# android - 在android中设计登录细节

> ID：11432656
> 
> 赞同：0
> 
> 时间：2012-07-11T12:27:50.347
> 
> 标签：android

我正在开发一个需要登录才能进入应用程序的应用程序。我正在尝试显示登录的用户详细信息，就像我在下面显示的 facebook 登录一样。我尝试了更多，但不知道。任何人都可以帮助我了解我们可以使用哪种布局来实现这一目标。

![在此处输入图像描述](../Images/368ef4c3408d5568243e7f4856ad546f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:04:33.423

我想你可以在这里找到答案

[https://github.com/darvds/RibbonMenu](https://github.com/darvds/RibbonMenu)

这是 Android 的导航菜单（基于 Google+ 应用程序）

你可以用它作为开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:33:09.557

您可以使用此链接 - [http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

在此您将能够管理两个列表视图的标题。对于上面的列表视图，在其布局中插入 imageview、textview 和 imageview 并在适配器中膨胀它，并在下面的列表视图中插入 imageview、textview 在其布局中。

这肯定会帮助你。

# time - 制作像 pingdom 这样的网站 - 它是如何编程的？

> ID：11432658
> 
> 赞同：-6
> 
> 时间：2012-07-11T12:27:55.720
> 
> 标签：time, loading, pingdom

我是一名 PHP 程序员。我也想写一个可以计算网站时间的类：

*   查找 DNS
*   连接
*   发送请求
*   等待回复
*   收到回复
*   加载时间

如何制作像 Pingdom 这样的网站？哪些 PHP 函数可以为我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:51:54.373

您可以使用 gethostbyaddr 进行 dns 查找，使用 fsockopen 创建连接，编写 HTTP 请求，等待响应等。您可以计算每一步之后的时间。

我们在[www.downnotifier.com](http://www.downnotifier.com)使用类似的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:38:14.467

我建议您在他们的网站上阅读有关他们 API 的文档。不知道你是否已经读过，但是这里是[链接](http://www.pingdom.com/services/api-documentation-rest/)

有一些你可能会感兴趣的 php 示例。

在stackoverflow上已经提出了一些问题，我将列出其中的一些：

[https://stackoverflow.com/questions/9957389/creating-a-website-monitoring-system-like-pingdom-wormly](https://stackoverflow.com/questions/9957389/creating-a-website-monitoring-system-like-pingdom-wormly)

[https://stackoverflow.com/questions/9439669/making-a-website-like-pingdom](https://stackoverflow.com/questions/9439669/making-a-website-like-pingdom)

希望这对你有帮助！

# c++ - Win32 c++：如何在树视图控件中获取选中项目的数量

> ID：11432668
> 
> 赞同：1
> 
> 时间：2012-07-11T12:28:36.640
> 
> 标签：c++, winapi, treeview

我有一个 Treeview 控件，每个项目都有一个复选框。在根级别，我有大约 100 个项目，每个这样的项目还有 100 个其他项目，因此遍历树大约需要 1-2 秒的时间。我想减少那个时间。所以这是我的问题，如何在不遍历树视图控件的情况下获取树视图控件中选中项目的数量？

我检查了msdn。我们有“Treeview_GetCount”，但它给出了树视图控件中的项目总数。我知道我可以从根开始并递归地向下遍历以检查树视图中每个项目的状态，最后获得具有检查状态的项目数。

或者，我们可能有一个变量（类成员或全局），并在检查项目时增加它，并在未检查项目时减少它，这最终会给我一个实例中的项目数。

还有比这些更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:44:54.790

不幸的是，您必须遍历调用[TreeView_GetCheckState](http://msdn.microsoft.com/en-us/library/bb773810%28v=vs.85%29)的树视图才能获取此类信息。`lParam`或者，您可以在插入项目时通过of关联检查状态，`TVITEM`但这仍然需要遍历。

遍历控件有什么问题？如果由于某种原因太慢，您始终可以将数字存储在您更新的变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T12:19:08.520

没有任何通知。不过，您可以自己编写。只需[处理鼠标单击并使用 hittest 来查看鼠标光标是否在状态图像上](http://support.microsoft.com/kb/261289)。为了完整起见，请处理空格键并为所选项目发送相同的通知。

# php - 用于数据库功能的 PHP 前端，类似于 Windows 中的文件权限

> ID：11432670
> 
> 赞同：1
> 
> 时间：2012-07-11T12:28:40.727
> 
> 标签：php, mysql, pdo, file-permissions

我正在尝试在我的数据库中实现表行权限系统（使用 PHP 前端和 MySQL 后端）。它应该遵循 Windows 文件权限系统，从某种意义上说：

*   有用户
*   每个用户可以是多个组的成员
*   每个组都可以是其他超组的成员
*   您可以指定整个组、超级组或单个用户的权限
*   应该是：用户权限取代子组取代超组。*（<- 不完全必要）*

用户在创建数据库条目后，可以指定哪些组/用户应该具有哪些权限（读、写或不可见）。访问 Web 前端时，仅应显示他们有权访问的条目（使用 cookie 登录系统）。只有那些他们有写入权限的才可以进行编辑。

基本上，我不知道如何有效地创建数据库以将用户与他们应该对文件拥有的权限相关联（我知道，一旦我获得了权限“级别”，剩下的当然该怎么做）。

我试过关系表，但很快就变得复杂了。我在文件条目本身（作为文件的字段）中尝试了用户/组 ID 的数组，但这很草率并且只支持 64 个条目（并且难以实现组/用户层次结构）。

是否有任何示例，加载项，有什么帮助？我精通 Javascript、PHP、SQL、HTML 及其关系，并且正在使用新的 PDO 扩展重新编写旧版本。我知道这是有可能的，但我尝试过的每一个策略都只是一场噩梦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:02:00.170

如果您使用的是 Oracle，则可以使用角色功能来处理组的层次结构。[Mysql 目前不提供此](http://forge.mysql.com/worklog/task.php?id=988)功能（尽管它似乎在列表中）。

同时，您可以像这样模仿这个功能。
创建一个名为角色的表，其中包含 id 和 name 字段并填充一组角色。

![在此处输入图像描述](../Images/2f76b70a52d03e2f211d3f71b3d8a33b.png)

创建一个名为 user_role_privs 的表，该表将保存从用户到角色的直接链接。

![在此处输入图像描述](../Images/201dcda65bc18877b973d50431a96c04.png)

并创建一个名为 role_role_privs 的表，其中包含被授予其他角色的角色

![在此处输入图像描述](../Images/3b529fe16e9037cbd257ac11f54fe313.png)

最后，我们添加了一个表，我们希望只有某些权限才能访问它，因此我们添加了我们想要的列，加上一个可以查看此数据的角色。

![在此处输入图像描述](../Images/e1e3f33f7884038d317a5e66f90245e2.png)

然后我们创建一个新视图，它使用角色表中的数据加上 current_user() 函数来确定可以显示哪些数据。

```
create or replace view user_student 
    as select s.id, s.name, s.age
        from user_role_privs urp, student s 
       where urp.user=current_user() 
         and urp.role=s.role
       union 
      select s.id, s.name, s.age
        from user_role_privs urp, role_role_privs rrp, student s
       where urp.user=current_user()
         and urp.role=rrp.role_id
         and rrp.granted_role=s.role 
```

现在，如果您的 php 允许 user1 登录，他们将从视图中选择并看到以下数据 - 即 Pluto 是基于直接角色授予和 Mickey 和 Donald 看到的，因为 clerk 的角色被授予 Manager 的角色。

但是如果 user2 登录，他们将只能看到直接授予其 Clerk 角色的记录，即 Mickey 和 Donald。

因此，如果您的应用程序从 user_student 角色而不是 student 表中选择数据，它将提供读取访问权限。

要基于角色进行写访问，您可能需要扩展此想法以在角色表上包含一个编辑标志，并且仅在角色允许时才显示编辑按钮和相关功能。

角色应该有权编辑它可以看到的任何数据，以便您可以通过在需要时创建更多角色来简化代码。对于向表中插入，您可能还需要一个插入前触发器，以在 student.role 列中插入创建它的用户的角色。您必须决定这是否应该是具有最高或最低权限的角色，因为这也会授予其他用户访问权限。

# eclipse - NoClassDefFoundError: org/eclipse/cdt/core/CCorePlugin

> ID：11432673
> 
> 赞同：0
> 
> 时间：2012-07-11T12:28:51.240
> 
> 标签：eclipse, noclassdeffounderror, eclipse-cdt

我正在开发一个插件，以使用 eclipse Indigo 通过 java 代码创建/编译/运行 CDT 项目。我可以在 Eclipse PDE 中成功运行我的插件。但是当我将它部署到一个 jar 文件中，并将它安装在一个新的 eclipse-java-indigo-win32 中时，我无法运行我的插件。它给出了以下错误。

```
 java.lang.NoClassDefFoundError: org/eclipse/cdt/core/CCorePlugin
    at    sourceanalysistoolplugin.wizards.CDTProjectManager.createCDTProj(CDTProjectManager.java:43)
at sourceanalysistoolplugin.intermediate.SourceCompileManager.createProject(SourceCompileManager.java:38)
at sourceanalysistoolplugin.actions.SATMenuCompileActionDelegate.run(SATMenuCompileActionDelegate.java:63)
at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:452)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: java.lang.ClassNotFoundException: org.eclipse.cdt.core.CCorePlugin
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 32 more 
```

我在插件依赖项选项卡中添加了 org.eclipse.cdt.core jar 文件。

请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:56:30.193

我遇到了类似的问题并尝试了许多不同的“解决方案”（其中一些对其他人有用，但没有一个对我有用）。我终于发现了[如何使用我的 Android 应用程序使用和打包 JAR 文件？](https://stackoverflow.com/questions/2316445/how-to-use-and-package-a-jar-file-with-my-android-app)有答案（至少对我来说）——我不得不使用 JDK 1.6 重新编译 jar。用 1.7 编译从来没有用过。一旦我重新编译并重新加载了新的 jar，它就工作得很好。希望有帮助。

# playn - Playn 示例 - 如何使用 Android res 文件夹作为资源目录？

> ID：11432674
> 
> 赞同：1
> 
> 时间：2012-07-11T12:28:52.177
> 
> 标签：playn

**简而言之：**我试图让 playn-showcase-android 适合任何屏幕尺寸。并且遇到了很多问题，比如我们不能使用 9-patch 图像，如果我们进行缩放，它会模糊，当上面有文本时，scale9 图像不能很好地拉伸。

最后我决定让我的showcase-android res/文件夹成为默认资源文件夹，至少对于Android版本。我试图编辑 playn 源，但意识到它从类加载器中获取资源路径。

对此有什么想法吗？如何将 res/drawable Images 用于至少 Android 版本？就像 android 特定的方式一样.. 这样我就可以使 UI 更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:58:31.897

`blur`在`PlayN`您可以禁用如下：

```
graphics().ctx()
.setTextureFilter(GLContext.Filter.NEAREST, GLContext.Filter.NEAREST); 
```

# java - 与类加载器 getSystemResourceAsStream 相反

> ID：11432680
> 
> 赞同：2
> 
> 时间：2012-07-11T12:29:14.700
> 
> 标签：java

我的类路径上有一个模板文件，我想读取它，将适当的值更改为写入临时文件而不是返回模板文件，并在结束程序执行之前使用相同的过程恢复更改。

如何打开流以写入我刚刚阅读的同一资源？

查看[http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getSystemResourceAsStream(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getSystemResourceAsStream(java.lang.String) )

找不到解决办法。

这是我的输入流：

```
getClass().getResourceAsStream("/" + TEMPLATE_FILENAME); 
```

如何将输出流获取到同一个文件？

还是不可能在运行时改变它？jar 文件本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:59:07.907

您应该使用 myClassLoader.getResource 方法并使用返回的 URL 打开 FileOutputStream：http: [//docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String %29](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)

M。

# javascript - 如果我知道 XPATH，如何使用 JavaScript 从 DOM 中提取元素值？

> ID：11432686
> 
> 赞同：0
> 
> 时间：2012-07-11T12:29:28.383
> 
> 标签：javascript, dom, xpath

我有 2 个来自 DOM 的 Xpath：

```
id("viewproduct-emagoo")/div[@class="big-box"]/div[@class="container-top mb10"]/div[@class="left-content"]/div[@class="container-detalii-produs"]/h2[1] 
```

和

```
id("viewproduct-emagoo")/div[@class="big-box"]/div[@class="container-top mb10"]/div[@class="left-content"]/div[@class="container-detalii-produs"]/form[1]/div[1]/div[@class="info-box-produs"]/div[@class="disponibilitate-produs"]/div[@class="pret-produs"]/span[1] 
```

我想使用 JAVASCRIPT 从上述 xpath 之一中提取 Element/s 值。

如果有人可以找到有关此的旧文章，请给我链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:53:08.860

假设您有一个 XPath 表达式，使用 Mozilla 或 Opera 或 Chrome 或 Safari 选择元素节点，那么只需执行

```
document.getElementById("form_selected_product_name").value
  = lookupElementByXPath(value).textContent; 
```

# php - 在 AceShop 上订阅产品（OpenCart 的 Joomla 扩展）

> ID：11432689
> 
> 赞同：13
> 
> 时间：2012-07-11T12:29:32.077
> 
> 标签：php, opencart, joomla2.5

我正在尝试修改 AceShop 模块（Joomla 中的扩展 OpenCart），以便为某些特定产品的用户提供订阅功能。AceShop 的默认功能是直接一次性订购，但我希望我的商店也有一些用户可以订阅的特定产品。我知道像 Paypal 和 Authorize.net 这样的支付网关提供订阅设施，但我希望我的商店跟踪那些订阅的产品，以便在需要发货的订单前 5 天向订阅用户发送通知，因此他们可以更改订阅详细信息。

如果信用卡收费失败，则会通知用户，如果订阅仍然存在，系统会在一段时间后再次尝试从信用卡收费。每次向信用卡收费时都会发送订单完成发票，而不仅仅是第一次。

出于困惑，我想知道是否有办法做，我正在朝着正确的方向思考。

更糟糕的是，AceShop 文档仅适用于付费订阅的人。[http://www.joomace.net/support/docs/aceshop](http://www.joomace.net/support/docs/aceshop)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:17:05.920

You are asking for way more than you can post on StackOverflow. In order to handle recurring charges, you will want to use a merchant services provider that offers recurring billing like authorize.net or Paypal Payments Pro. If you store the credit card information and try to handle the billing on your end you are asking for problems. Not only is it way more complicated, but you open yourself to liability issues related to storing credit card numbers. If the merchant services provider found out you are storing credit card numbers you would likely lose your account.

That said, there are a couple of recurring payment extensions already available for OpenCart that you could be able to install.

[http://www.opencart.com/index.php?route=extension/extension&filter_search=recurring](http://www.opencart.com/index.php?route=extension/extension&filter_search=recurring)

There are probably more, but this what I found on the first search.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:25:55.163

您要修改的是哪个？AceShop 商业扩展，还是 OpenCart 非商业组件？

因为它是一种商业产品，我不确定您是否会通过修改 AceShop 组件违反任何许可条款。并且修改 OpenCart 组件虽然在技术上是允许的，但如果/当 AceShop 添加对更新版本的 OpenCart 的支持时，可能会导致无法操作。

我读过 AceShop 支持非常敏感。您是否问过他们是否会考虑将这种功能添加到他们的核心产品中？

# hadoop - hadoop - 工作完成后任务继续运行

> ID：11432698
> 
> 赞同：0
> 
> 时间：2012-07-11T12:29:51.507
> 
> 标签：hadoop

我运行一个有 20 个节点的 hadoop 集群。

我运行了一项使用大量内存的繁重工作。出于某种原因，某些任务似乎与工作“脱节”。为什么会这样？

1.  我的任务超时为 600 秒。这些任务的运行远不止于此。我通过查看 java 进程就知道了。

2.  作业完成后，我仍然在运行 map reduce 进程。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:28:48.280

1.  只有在 600 秒内没有进度报告时，该任务才会被终止。只要有一些进展，任务就会继续。

2.  这不应该发生。您确定这些流程来自您的工作吗？如果您重新启动相同的作业几次，如果您没有正确停止旧作业，您仍然可能有一些挂起的进程。

# php - PHP：使用嵌套数组将字符串解析为数组？

> ID：11432703
> 
> 赞同：0
> 
> 时间：2012-07-11T12:30:08.157
> 
> 标签：php, arrays, string, parsing, nested

我有以下代码用于将字符串解析为选项数组：

```
$options = 'myvalue, test=123, myarray=[1,2]';

function parse_options($options)
{
    $split = '/,(?=[^\]]*(?:\[|$))/';

    if($options && is_string($options)) 
    {
        $temp_options = preg_split($split, $options);
        $options = array();
        foreach($temp_options as $option) 
        {
            $option = trim($option);
            if(strpos($option,'=')) 
            {
                //Is an option with a value
                list($key, $value) = explode('=',$option);
                if(strpos($value,'[') !== FALSE) 
                {
                    //Is an array of values
                    $value = explode(',', substr($value, 1,-1));
                }
                $options[$key] = $value;
            }
            else 
            {
                $options[] = $option;
            }
        }
    }
    else 
    { 
        //Return empty array if not a string or is false
        if(!is_array($options)) { $options = array(); }
    }

    return $options;
} 
```

基本上它用逗号分隔，除非用括号括起来。然后它检查 = 键-> 值对，然后尝试确定该值是否是一个数组。

这工作正常，但我想改进它，以便它可以为类似的东西创建嵌套数组

```
$options = 'myvalue, test=123, bigwhopper=[ myarray=[1,2], test2=something ]'; 
```

哪个会输出

```
Array(
    [0] => myvalue,
    [test] => 123,
    [bigwhopper] => Array(
                [myarray] = Array(
                     [0] => 1,
                     [1] => 2
                ),
                [test] => something
            )
) 
```

**我当然不是 RegExp 大师，所以有人可以帮我让函数理解嵌套的 [] 分隔符吗？**此外，任何可以提高功能性能的东西都受到高度赞赏，因为我经常使用它来轻松地将选项传递给我的控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:33:11.580

你为什么要发明自己的格式，而不是已经广泛建立的东西。

一些选项：

*   urlencoding 这样做
*   json
*   亚姆
*   php的序列化（）

您正在发明一种全新的语法，而标准正则表达式甚至不允许这样做，因为它具有递归。你基本上需要编写一个解析器，所以如果你坚持自己的语法，最好的起点是查看解析器生成器。

[http://wezfurlong.org/blog/2006/nov/parser-and-lexer-generators-for-php/](http://wezfurlong.org/blog/2006/nov/parser-and-lexer-generators-for-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:34:42.057

不要通过为您的选项创建一个新的（不完整、错误和缓慢的）解析器来重新发明轮子。使用已有的解决方案：

*   连载
*   [获取选择](http://php.net/manual/fr/function.getopt.php)
*   JSON
*   ETC

# php - 在（基于zend的）include_path中找不到php类

> ID：11432705
> 
> 赞同：1
> 
> 时间：2012-07-11T12:30:16.593
> 
> 标签：php, zend-framework, zend-autoloader

我有一个类，它位于 zend 项目中我的库文件夹的子目录中。所以假设我的应用程序在 /Library/WebServer/Foo/ 中，那么 php 的包含路径是：

```
<?php echo get_include_path(); ?> 
```

> /Library/WebServer/Foo/application/../library:/Library/WebServer/Foo/library:/usr/share/zend-framework/library/

所以现在我想创建这个类，忽略随机逻辑，我应该能够通过说“new MyValidator_Usernameunique()”或类似的话来达到它：

> /Library/WebServer/Foo/library/MyValidator/Usernameunique.php

```
class MyValidator_Usernameunique extends Zend_Validate_Abstract
{
     const USERNAME_ALREADY_EXISTS = 'usernameAlreadyUsed';
     const DATABASE_FAILED = 'userDatabaseFailure';

     protected $_messageTemplates = array(
         self::USERNAME_ALREADY_EXISTS => "De gebruikersnaam '%value%' is al in gebruik, gebruik een andere."
         self::DATABASE_FAILED => "Er ging iets mis bij het verbinden met de database."
     );

    public function isValid($value)
    {
        $magic = rand(0,3)
        if($magic==0) {
            $this->_error(self::USERNAME_ALREADY_EXISTS);
            return false;
        }
        if($magic==1) {
            $this->_error(self::DATABASE_FAILED);
            return false;
        }
        return true;
    }
} 
```

所以我就是这样做的：

> /Library/WebServer/Foo/library/Form/Register.php

```
class Form_Register extends Form_FooForm 
{
    public function __construct() 
    {
        parent::__construct();
        $username = $this->createText('username', 'Gebruikersnaam')->setRequired(true);
        $username->addValidator(new MyValidator_Usernameunique());
    }
} 
```

这使：-

> [Wed Jul 11​​ 14:07:41 2012] [error] [client 127.0.0.1] PHP Fatal error: Class 'MyValidator_Usernameunique' not found in /Library/WebServer/Foo/library/Form/Register.php on line 14, referer ：`http://foo/`

忽略行号，因为我稍微简化了代码。

当然，这很自然，因为 /Library/WebServer/Foo/library/MyValidator/ 不在我的 php include_path 中，而且我没有“要求”或“包含”或“要求一次”文件。然而，据我了解，zend 框架应该通过将 _ 替换为 / 并搜索 include_path 来自动加载文件。这似乎适用于注册表单，但对于验证器失败。现在，这是为什么呢？这几乎是相同的场景。此外，当我尝试直接在具有相同错误消息的控制器类中创建 MyValidator_Usernameunique 时，它​​也会失败。

任何关于为什么会发生这种情况的想法或指示都非常感谢。此外，请注意，我并不是要修复这个错误，而是要更好地理解 zend 中的自动加载。所以请不要提出使用我的验证器多余的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:47:36.210

出于此答案的目的，我将忽略您路径中“Foo”之上的所有内容，因为它无关紧要。

为了让您的验证器自动加载，您需要做几件事。

首先，您需要创建一个文件夹“Foo/library/My”，然后将以下行添加到您的 application.ini 文件中：-

```
autoloadernamespaces[] = "My_" 
```

这将告诉 Zend Framework 在哪里寻找您的类。

接下来创建文件夹“Foo/library/My/Validator”，然后在该文件夹中创建“Usernameunique.php”，它应该如下所示：-

```
class My_Validator_Usernameunique extends  Zend_Validate_Abstract
{
    //All your class stuff goes here.
} 
```

然后当你这样做时： -

```
$username->addValidator(new My_Validator_Usernameunique()); 
```

它会自动加载。

有关详细信息，请参阅[手册](http://framework.zend.com/manual/en/zend.loader.autoloader.html)。

自动加载适用于您的表单的原因是“表单”目录被框架自动添加到自动加载器包含路径中，因此它知道在哪里可以找到它。

如您所料，自动加载的工作原理是将 '_' 替换为 '/'，然后从生成的路径加载类。但是，默认路径以外的路径需要在 application.ini 中“注册”，如我的示例所示。查看 Zend/Loader/Autoloader.php 中的代码以了解实际发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:02:22.863

查看您的代码，我可能会错过它，但这并不是真正的“标准”zend 布局

我有点期待跟随你的 webapp (/Library/WebServer/Foo/)

*   应用
    *   配置
    *   控制器
    *   ETC
*   图书馆
*   上市

现在您想将验证器添加到您的库中，我会这样做

图书馆

*   我的应用
    *   证实
        *   验证器.php

Validator.php 内部

```
class MyApp_Validate_Validator extends Zend_Validate_Abstract
{
    //Do stuff here
} 
```

现在我们在库中有这个额外的部分，我们需要告诉 zend 我们有一个额外的命名空间，其中包含我们自己的代码

所以在 application.ini 你像这样配置它

```
autoloaderNamespaces.0 = MyApp_ 
```

现在应用程序（zend）应该知道在哪里寻找你的验证器

所以您现在可以执行以下操作

创建一个表单（最好将其放在 application/forms/ 中，但当然取决于您）

```
class Form_Register extends Zend_Form {

    public function __construct() {
        parent::__construct();

        $username = $this->createText('username', 'Gebruikersnaam')
        ->setRequired(true)
        ->addValidator(new MyApp_Validate_Validator());

    }
} 
```

# tridion - 如何完成活动？

> ID：11432706
> 
> 赞同：-1
> 
> 时间：2012-07-11T12:30:25.620
> 
> 标签：tridion, tridion-2011

从工作流发布组件后，我正在尝试完成活动。

发布完成，设置完成活动消息后出现错误（“对象实例未设置为实例对象”）。

```
ActivityFinishData activityfinish = new ActivityFinishData();
activityfinish.Message = "Published to WIP Publication Target";
logdetails("Finish Message able to Set using Code,the below is the finish message");
logdetails(activityfinish.Message);
ProcessInstanceData processInstance = new ProcessInstanceData();
ActivityInstanceData activityInstance = (ActivityInstanceData)processInstance.Activities[0];
logdetails(activityInstance.Title.ToString());
logdetails(activityInstance.Id.ToString());
csClient.FinishActivity(activityInstance.Id, activityfinish, readoption);
logdetails("Workflow Finished"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:38:42.767

以下方法对我有用：

```
SessionAwareCoreServiceClient client = Client.GetCoreService();
ReadOptions options = new ReadOptions();

WorkItemData workItem = (WorkItemData)client.Read(currentWorkItemId, options);
ProcessInstanceData processInstance =
    (ProcessInstanceData)client.Read(workItem.Process.IdRef, options);
ActivityInstanceData activityInstance =
   (ActivityInstanceData)client.Read(processInstance.Activities[0].Id, options);

ActivityFinishData finishData = new ActivityFinishData();
finishData.Message = "Finished automatically";

client.FinishActivity(activityInstance.Id, finishData, options);
client.Close(); 
```

您可以看到我从当前工作项的 Id 开始，并从那里获取现有对象。我创建为“新”的唯一对象是那些尚不存在的对象。

# ruby-on-rails - mysql 未安装到供应商/捆绑包中

> ID：11432707
> 
> 赞同：0
> 
> 时间：2012-07-11T12:30:32.890
> 
> 标签：ruby-on-rails, bundler

我正在尝试重建 mysql 并将其安装到供应商/捆绑包中。

ruby 版本：1.8.7 rails 版本：2.3.8 bundler 版本：1.1.3

宝石文件：

```
source "http://rubygems.org"
gem 'rake', '0.8.7'
gem 'fastercsv', '1.5.3'
gem 'rails', '2.3.8'
gem 'mysql', '2.8.1'
... 
```

没有以下作品的组合。vendor/bundle/ruby/1.8/gems下没有mysql

```
bundle install
bundle install --path vendor/bundle
bundle package
bundle install --deployment --path vendor/bundle --without test development 
```

我希望在最后一个命令之后它将 mysql 安装到供应商/捆绑包中，也许如果我在调用捆绑安装 --deployment 之前有正确的命令。

它确实安装了 vendor/cache/mysql-2.8.1.gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:30:31.463

解决了我自己的问题（实际上是同事）。

我曾试图让捆绑器重新安装 mysql。运行 bundle 没有更新 vendor/bundle 下的 gem。所以我删除了宝石。

```
rm -rf vendor/bundle/ruby/1.8/gems/mysql-2.8.1 
```

但是，还有其他 mysql 文件。当我们也删除它们时，bundler 重新安装了 mysql。

```
rm vendor/bundle/ruby/1.8/specifications/mysql-2.8.1.gemspec
rm vendor/bundle/ruby/1.8/cache/mysql-2.8.1.gem
rm vendor/cache/mysql-2.8.1.gem 
```

# c# - 通过循环将项目添加到列表选择器

> ID：11432708
> 
> 赞同：0
> 
> 时间：2012-07-11T12:30:33.470
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我想将项目添加到工具包的列表选择器控件中。我正在这样做。

```
for (int i = 0; i < cstringl.Length; i++)
{
    listPickerCountrySignup.Items.Add(cstringl[i]);
} 
```

这是我的 XAML。

```
<toolkit:ListPicker x:Name="listPickerCountrySignup" SelectionChanged="listPickerCountry_SelectionChanged" Height="72" HorizontalAlignment="Left" Margin="14,43,0,0" VerticalAlignment="Top" Width="436" FullModeHeader="Select Country" Background="White" BorderBrush="White" Foreground="{StaticResource listPickerBrush}" Style="{StaticResource ListPickerStyle1}">
                        <toolkit:ListPicker.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Country}" Width="300" />
                                </StackPanel>
                            </DataTemplate>
                        </toolkit:ListPicker.ItemTemplate>
                        <toolkit:ListPicker.FullModeItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Country}" Width="300" Margin="0,0,0,20" FontSize="24"/>
                                </StackPanel>
                            </DataTemplate>
                        </toolkit:ListPicker.FullModeItemTemplate>
                    </toolkit:ListPicker> 
```

但它没有显示在 UI 中，因为我在 XAML 中进行了绑定，但是我从循环后面的代码中添加了项目。没有项目源绑定。我如何在该列表中显示项目..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:37:46.503

你必须做一些数据绑定。

```
ObservableCollection<T> ListPickerItems = new ObservableCollection<T>();
for (int i = 0; i < cstringl.Length; i++)
{
    ListPickerItems .Add(cstringl[i]);
} 
```

在 Xaml 中：

```
<toolkit:ListPicker ItemsSource={Binding ListPickerItems} ... /> 
```

# jquery - 在文本字段上触发按键事件

> ID：11432709
> 
> 赞同：1
> 
> 时间：2012-07-11T12:30:39.760
> 
> 标签：jquery

我想在输入键的文本字段上使用 jquery 触发按键事件。我目前正在这样做：

```
var key = jQuery.Event('keypress');
key.keyCode = $.ui.keyCode.ENTER;
$('#txtb').trigger(key); 
```

它在 Firefox 上成功触发事件，但在 Chrome 和 IE 上失败。

当我在调用函数中捕获密钥时，它在 Chrome 中显示为未定义，但在 Mozilla 中运行良好。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:38:54.207

你能试试这个代码吗

```
$('#txtb').trigger( "keypress", [13] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:35:49.737

您可以尝试[`event.which`](http://api.jquery.com/event.which/)使用哪个 JQuery 对其进行规范化以实现跨浏览器一致性：

> 对于键或鼠标事件，此属性指示按下的特定键或按钮。

```
$('html').on('keyup', function(e){
   if (e.which == 13) { // if "enter" key is pressed
     var e = jQuery.Event("keypress", { keyCode: 64 }); // you can specify your desired key code 
     $('#txtb').trigger(e); // or $('#txtb').trigger("keypress")
   }
}) 
```

[演示](http://jsfiddle.net/gJwrM/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T16:01:47.530

这适用于触发特定的键盘按键。

```
var e = $.Event("keypress"); /* || keydown || keyup */
e.which = 65; /* set the key code here */
$(selector).trigger(e); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T12:54:51.710

这样做： -

```
$('#txtb').keydown(function(e) {
    if (e.keyCode == 13)
      alert('Handler for .keydown() called.');
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/bcnUf/1/)**

# sql-server - 确定性标量函数，用于获取日期的一年中的一周

> ID：11432719
> 
> 赞同：2
> 
> 时间：2012-07-11T12:31:13.413
> 
> 标签：sql-server, user-defined-functions

这是获取**日期的星期几**的好方法，[确定性标量函数获取日期的星期几](https://stackoverflow.com/questions/1803561/deterministic-scalar-function-to-get-day-of-week-for-a-date)。

现在，任何人都可以帮我创建一个确定性的标量函数来获取**一年中的一周**吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:11:19.523

这具有确定性，我可以将其用作计算列。

```
datediff(week, dateadd(year, datediff(year, 0, @DateValue), 0), @DateValue) + 1 
```

测试代码：

```
;
with 
Dates(DateValue) as 
(
    select cast('2000-01-01' as date)
    union all 
    select dateadd(day, 1, DateValue) from Dates where DateValue < '2050-01-01'
)
select 
    year(DateValue) * 10000 + month(DateValue) * 100 + day(DateValue) as DateKey, DateValue,        
    datediff(day, dateadd(week, datediff(week, 0, DateValue), 0), DateValue) + 2 as DayOfWeek,
    datediff(week, dateadd(month, datediff(month, 0, DateValue), 0), DateValue) + 1 as WeekOfMonth,
    datediff(week, dateadd(year, datediff(year, 0, DateValue), 0), DateValue) + 1 as WeekOfYear
    from Dates option (maxrecursion 0) 
```

# quickfix - FIX 4.2 和 ExecReportAck

> ID：11432720
> 
> 赞同：1
> 
> 时间：2012-07-11T12:31:13.673
> 
> 标签：quickfix

我们有一个执行 FIX 4.2 标准的交易对手来发送 executionReport 消息 (35=8)。

在他们的规范中，他们需要一条消息来检查正确的传输。奇怪的是消息类型是“BN”，这不在 4.2 规范中。

我已经实现了一种方法来发送此类消息，并且一切正常，但是快速修复将此消息放入错误日志中。

有办法告诉 quickfix 从错误日志中排除这些“BN”消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:41:17.360

尝试编辑 DataDictionary。我会创建一个新文件。并将 DataDictionary 位置设置为您的 quickfix 配置文件中的新文件。

在数据字典的 XML 文件中，添加一个额外的消息类型，以匹配对方发送给您的内容。

在消息类型字段中：

```
<field number="35" name="MsgType" type="STRING"> 
```

添加这样的一行：

```
<value enum="BN" description="MESSAGE_TYPE_NAME" /> 
```

其中 MESSAGE_TYPE_NAME 是正确的描述

然后添加一个类型

```
 <message name="ExecutionReportAck" msgtype="BN" msgcat="app">
  <field name="OrderID" required="Y"/>
  <field name="SecondaryOrderID" required="N"/>
  <field name="ClOrdID" required="N"/>
  ...
 </message> 
```

# css - SASS/SCSS 的 @if 用于选择要使用的图像类型？

> ID：11432721
> 
> 赞同：0
> 
> 时间：2012-07-11T12:31:27.387
> 
> 标签：css, image, if-statement, sass

这是我第一次尝试使用来自[SASS的](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#id10)**@if 控制指令**。

我在一个文件夹中有一个优化图像的列表，其中一些像 JPG 一样小，而另一些像 PNG 一样小。

使用@if 规则，我想说**“如果该文件的JPG 存在，则使用此@include，否则使用另一个”**。

*（示例中的 gif 只是为了澄清我是否至少得到了 else if 部分正确。）*

### 我的例子：

```
$list: A, B, C;

$type: jpg;

@mixin portfolio-images {
    @each $item in $list {
        a[href*="#{$item}"] span {

            /* @if starts */   

            @if $type == jpg {@include background-image-retina("#{$item}.jpg");}
            @else if $type == png {@include background-image-retina("#{$item}.png");}
            @else {@include background-image-retina("#{$item}.gif");}

            /* @if ends */   

            @include hide-text;
            width: 300px;
            height: 150px;
        }
    }
} 
```

不知何故，我似乎弄错了，需要你的帮助。JPG 的显示很好，但 PNG 根本不显示 - CSS 文件中没有编译输出。

我使用[@include background-image-retina](http://blog.joelambert.co.uk/2012/03/09/compass-sass-mixins-for-simple-retina-images-on-websites/)并且不能像在[这个](https://gist.github.com/1210421)美妙的 mixin 中那样为图像类型定义自定义变量。所以我不确定如何解决这个问题。

* * *

**更新：**就像@lnrbob 指出的那样 - 无法使用 SASS 检查现有文件。我将答案标记为正确，因为他提供了一个出色的 @if 示例，从长远来看，它帮助我理解了这个 SASS 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:51:55.510

我很困惑你在这里做什么。SASS 不会检查您的文件系统以查看是否`A.jpg`存在“A.png”。您需要更新变量。所以在你的例子中（我认为）它应该是这样的：

```
$list: A, B, C;

@mixin portfolio-images($type: 'jpg') {
    @each $item in $list {
        a[href*="#{$item}"] span {

            /* @if starts */   

            @if $type == jpg {@include background-image-retina("#{$item}.jpg");}
            @else if $type == png {@include background-image-retina("#{$item}.png");}
            @else {@include background-image-retina("#{$item}.gif");}

            /* @if ends */   

            @include hide-text;
            width: 300px;
            height: 150px;
        }
    }
} 
```

你会像这样使用它：

```
@include portfolio-images('png'); 
```

* * *

我认为这不是您想要实现的目标，不是吗？如果您想复制视网膜指南针助手的功能（您已链接到[@include background-image-retina](http://blog.joelambert.co.uk/2012/03/09/compass-sass-mixins-for-simple-retina-images-on-websites/)），您需要将其作为一些 ruby​​ 脚本执行，以输入 SASS 使用的编译过程（在这个例子助手使用[Compass](http://compass-style.org/)）。

我希望这至少有点帮助。如果我完全误解了，请告诉我，我会复习:)

# android - Android 垂直动画图像视图

> ID：11432723
> 
> 赞同：1
> 
> 时间：2012-07-11T12:31:35.643
> 
> 标签：android

嗨，我有一个图像视图位置和我想要动画的页面底部，所以它向下移动有人知道该怎么做吗？目前当我运行它时没有任何反应

这是我迄今为止尝试过的

这是我的动画

```
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_interpolator">
   <translate android:fromYDelta="0" android:toXDelta="30" android:duration="1000"
       android:fillAfter="true"/>

</set> 
```

这是我的java

```
public class IntialSetup extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_initialsetup);
        animations();

    }

    public void animations(){

    final ImageView image = (ImageView)findViewById(R.id.su_shirts);
    Animation AnimationMovepos = AnimationUtils.loadAnimation(this, R.anim.shirt_anim); 
    image.startAnimation(AnimationMovepos); 

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:36:58.297

看看你的动画：

```
<translate android:fromYDelta="0" android:toXDelta="30" .../> 
```

fromYDelta ... toYDelta 而不是 toXDelta。

希望这是问题所在。

# python - 从 NumPy 数组中的特定位置打印

> ID：11432728
> 
> 赞同：1
> 
> 时间：2012-07-11T12:31:50.080
> 
> 标签：python, arrays, multidimensional-array, numpy

我是 NumPy 的新手，我创建了以下数组：

```
import numpy as np

a = np.array([[1,2,3],[4,5,6],[7,8,9]]) 
```

我想知道是否有办法从数组中的特定位置打印一个数字。

假设我想打印 7 号，并且只打印 7 号。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:23:55.577

来自[暂定的 NumPy 教程](http://www.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c)

```
>>> b
array([[ 0,  1,  2,  3],
       [10, 11, 12, 13],
       [20, 21, 22, 23],
       [30, 31, 32, 33],
       [40, 41, 42, 43]])
>>> b[2,3]
23 
```

语法是 [row,column] 每个从零开始索引，所以 b[2,3] 表示 b 的第三行第四列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:39:13.833

严重地？？！？

打印第三行（索引 = 2），第一列（索引 = 0）

```
>>> import numpy as np
>>> a = np.array([[1,2,3],[4,5,6],[7,8,9]])
>>> print a[2][0]
7 
```

# android - 用基于 ffmpeg 的编码器替换标准的 Android H264 软件编码器

> ID：11432729
> 
> 赞同：7
> 
> 时间：2012-07-11T12:31:52.923
> 
> 标签：android, c++, ffmpeg, android-ndk, openmax

在 Android ICS 及更高版本中，正在使用新的 OpenMax IL API 版本，使旧的二进制 blob 无用/未使用。这会导致运行 ICS 的旧设备正常运行并且花花公子的视频播放中断（例如 YouTube HQ 和 IMBD），因为与 ffmpeg 在同一设备上可以执行的操作相比，Android 的后备软件解码器很糟糕（我测试了 MXPlayer+arm6vfp ffmpeg 和一部 720p 电影播放效果很好）。

我正在尝试深入研究 Android 源代码，以查看我可以添加/替换代码的具体位置和内容，以允许使用 ffmpeg 库的强大功能。问题是我不确切知道正在使用什么代码，例如用于解码视频的 YouTube 应用程序，或者它是如何决定的。

因此，据我所知，我有两个选择：

1.  找出当前正在使用的软件解码器，并尝试将其外部接口包裹在 ffmpeg 周围，有效替代当前使用的慢速软件解码器。最终结果将是一个 .所以我可以推送到设备。

2.  弄清楚如何诱使 Android 考虑基于 ffmpeg 的 OMX 库（我已经为 Android 成功构建了一个：[limoa](http://limoa.sourceforge.net/)）并将其添加到考虑的库列表中的某个位置（或者更好：替换不可用的硬件编解码器）。

作为扩展，我还想通过它使摄像机视频编码工作，因此非常需要一个真正的集成解决方案。问题是：如何，在哪里，以及什么？搜索 Android 源代码树会在许多不同的地方提供大量的“H264”和相关内容。我需要尽可能最低和最简单的，所以我可以简单地包装假设的`decode(buffer)`函数调用以使用 ffmpeg (libavcodec)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:03:28.987

在我看来，[这个演示文稿（“使用 OpenMAX IL 将硬件视频编解码器集成到 Android Stagefright”）](http://elinux.org/images/5/52/Elc2011_garcia.pdf)正是您想要做的。祝你的项目好运！

# .net - 如何在 WPF 中为工具栏按钮创建热键？

> ID：11432730
> 
> 赞同：0
> 
> 时间：2012-07-11T12:31:53.543
> 
> 标签：.net, wpf, button, hotkeys

在 WPF 中，您可以按如下方式制作按钮：

```
<Button Name="Foo" Content="_Foo" /> 
```

“F”前的下划线将`F`键与`Foo`按钮相关联（并在“Foo”中的“F”下方添加下划线）。

但是，在工具栏中：

```
<ToolBar>
    <Button Name="Foo" Content="_Foo" />
</ToolBar> 
```

这只是创建了一个带有文本“_Foo”的按钮，并且没有与之关联的热键。

是否有任何内置方法可以为工具栏按钮创建热键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:51:46.643

在包含工具栏的窗口上使用[**`InputBindings`**](http://msdn.microsoft.com/en-us/library/system.windows.uielement.inputbindings.aspx)。具体来说，您将创建一些[`KeyBindings`](http://msdn.microsoft.com/en-us/library/system.windows.input.keybinding.aspx)类似的内容：

```
<Window.InputBindings>
    <KeyBinding Modifiers="Control" Key="S" Command="{Binding SaveCommand}"/>
</Window.InputBindings> 
```

它需要使用与 ICommand 的绑定（您使用的*是*MVVM 对吗？）并通过将其放在 Window 上，您可以确保快捷方式是“全局的”，否则您必须担心键盘焦点是什么。在您的工具栏中，您通常会通过 Tooltip 指示快捷方式：

```
<ToolBar>
    <Button ToolTip="Save (Ctrl+S)" Command="{Binding SaveCommand}">
</ToolBar> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:40:22.113

Buttons 的 ToolBar 样式会关闭正常行为，但您可以通过将 AccessText 显式指定为 Button 的内容来强制它返回：

```
<ToolBar>
    <Button Name="Foo">
        <AccessText>_Foo</AccessText>
    </Button>
</ToolBar> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T22:18:01.043

您似乎试图让工具栏控件做它不应该做的事情 - 它的 Focusable 属性设置为 False 因此不接收键盘输入，因此不会通过键盘激活任何按钮。您希望通过菜单项、工具栏按钮或键盘进行操作 - 如前所述，选择 Commands 和 InputBindings。

# sql - 如何跟踪过程执行时间？

> ID：11432732
> 
> 赞同：2
> 
> 时间：2012-07-11T12:31:56.313
> 
> 标签：sql, sql-server

我有一些未优化的程序。我想分析这些程序是否得到优化，因为只有没有批量数据要检查。

我想将一个 sql 查询放入将插入到一个表中的所有过程中，该表执行上述查询所花费的确切时间。我将创建一个表，我的过程将在其中插入查询执行时间。

有什么办法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:43:37.273

如果要将其集成到过程中，请设置一个变量，该变量在开始时存储执行开始时间，并在过程结束时将其与当前时间相减。

```
/* Start of your procedure */
Declare @startTime datetime = GETDATE()
Declare @duration varchar

/* Your procedure */
...

/* End of your procedure */
Set @duration = CONVERT(VARCHAR(8),GETDATE() - @startTime,108)
Insert into statisticTable 
Values ('procedureName', @duration) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:38:25.840

您是否尝试使用**SQL Profiler**？

在跟踪属性中，您可以定义`Start Time`和`End time`存储过程。这是一个非常强大的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:37:52.153

[您可以使用动态管理视图](http://technet.microsoft.com/en-us/library/ms188754.aspx)检查上述内容....

如果您使用的是旧版本的 SQL SERVER，请使用 SQL Server Profiler....

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-14T13:51:52.707

你为什么要这样做？有很多工具，如 DMV、trace、exevents 等。如果你放那种代码，你会增加你的 proc 开销。对于程序，最好使用 dm_procedure_stats DMV，但仅在 2008 R2 及更高版本中可用。对旧版本使用 dm_exec_query_stats。这些将为您提供有关时间、逻辑 io、cputime 和物理 IO 等的更好的统计信息。

# windows - Windows XP 中的相对路径

> ID：11432733
> 
> 赞同：0
> 
> 时间：2012-07-11T12:31:58.433
> 
> 标签：windows, path, windows-xp, relative-path, path-separator

我有一个可以在 Mac OS 中完美运行的应用程序，我想让它在 Windows XP 中运行。

我有一个返回这个的函数。这是我声明我的文件夹的地方`My_Home`。

> 返回 ”。” + File.separator + "My_Home" + File.separator + HomePane.objFile；

我想在 Windows 中做同样的事情。我努力了：

> 返回 File.separator + "My_Home" + File.separator + HomePane.objFile ；
> 
> 返回 "My_Home" + File.separator + HomePane.objFile ；
> 
> ".\My_Home\" HomePane.objFile ;
> 
> "\My_Home\" HomePane.objFile ;
> 
> "My_Home\" HomePane.objFile ;
> 
> "./My_Home/" HomePane.objFile ;

等等，但在 Windows 中似乎没有任何作用，因为所有对象（我想使用此返回以将一些对象保存在文件夹中`My_Home`）都保存在文件夹之外。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:25:49.390

> "My_Home" + File.separator + HomePane.objFile

是的，问题是我的。谢谢你们：）

# ios - 将 UIButton 添加到 AdWhirl 广告横幅

> ID：11432738
> 
> 赞同：0
> 
> 时间：2012-07-11T12:32:24.573
> 
> 标签：ios, cocoa-touch, adwhirl

如何将 UIButton 添加到 AdWhirl 广告横幅？琐碎`[adWhirlView addSubview: button]`行不通。按钮不出现。

**UPD**已经尝试过：

```
[view addSubview:adWhirlView];
[adWhirlView addSubview:button];
[adWhirlView bringSubviewToFront:button]; 
```

adWhirlView 可见，但按钮不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:15:41.720

为什么不尝试将按钮和 AdWhirl 视图添加到同一个父视图？像这样的东西：

```
[view addSubview: adWhirlView];
[view addSubview: button]; 
```

在我看来，这将是您追求的相同视图层次结构。您只需要按照您想要的方式放置按钮。

**UPD：** 如果 AdWhirl 无法接收广告，它会触发委托方法：

```
-(void)adWhirlDidFailToReceiveAd:(AdWhirlView *)adWhirlView usingBackup:(BOOL)yesOrNo 
```

因此，您可以使用 AdWhirl didReceive/didFail 方法切换按钮的可见性。首先添加一个隐藏按钮，然后在 didReceive: set

```
button.hidden = NO; 
```

在 didFail 上：

```
button.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:42:00.730

尝试这个：

```
 [adWhirlView bringSubviewToFront:button]; 
```

# javascript - Javascript 或其他使用语音读取整个 HTML 页面的方法（离线）

> ID：11432741
> 
> 赞同：2
> 
> 时间：2012-07-11T12:32:43.067
> 
> 标签：javascript, html, speech

我正在尝试向脱机运行的基于 HTML5 的信息亭添加视障选项。这个想法是，一旦单击 aa 按钮，就会大声读出每个页面的文本（每页只有 1 个从外部 txt 文件加载的文本框） speak.js 似乎是一个选项，但语音质量不是那么好。我查看了一些 chrome 插件，但它们都要求您先选择文本。我想尝试 jTalk，但仍在等待创建者的下载链接 - 不确定这是否会起作用，因为这需要在用作信息亭的 windows 7 pc 上本地运行。chrome 插件似乎工作得很好，但它们都需要选择文本，我不确定如何通过 n HTMl/JS 链接控制正在读取的文本。因此理想情况下我'

有什么想法/建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:09:27.907

我认为[http://www.chromevox.com](http://www.chromevox.com)可能有你正在寻找的东西。它是针对视障用户的 chrome 扩展程序，并且有一个您可以使用的 api。

# google-app-engine - 替换 oauth2client.crypt 中的 OpenSSL 以使用 PyCrypto

> ID：11432742
> 
> 赞同：3
> 
> 时间：2012-07-11T12:32:44.253
> 
> 标签：google-app-engine, oauth-2.0, pycrypto, google-api-client, pyopenssl

Google App Engine 支持[PyCrypto](https://developers.google.com/appengine/docs/python/tools/libraries#PyCrypto)，但不支持 OpenSSL。

我想使用内部调用 OpenSSL 的 oauth2client SignedJwtAssertionCredentials。有没有办法让 oauth2client 与 PyCrypto 一起工作。

我假设可以通过使用 PyCrypto 来创建等效的 SignedJwtAssertionCredential 的本地版本？

还有一种方法可以向 Google App Engine 提出请求，以提供支持服务器到服务器 Oauth2.0 舞蹈的证书/断言功能的版本？

任何指针/帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:22:07.677

找到此链接，这避免了任何特殊处理以避免 ssl/等。此链接具有[Google Data support for App Engine use](https://developers.google.com/appengine/articles/python/retrieving_gdata_feeds)。

我还没有尝试过 - 但是一旦我使用它，我会分享反馈，如果对其他人有价值的话。

# winforms - 错误 C2039：“Dispose”：不是“System::Windows::Forms::ErrorProvider”的成员

> ID：11432744
> 
> 赞同：6
> 
> 时间：2012-07-11T12:32:48.180
> 
> 标签：winforms, visual-studio-2010, visual-c++, c++-cli, errorprovider

我正在尝试使用 ErrorProvider 类在复选框上显示错误。我可以使用以下代码显示错误

```
errorProvider1->SetError(checkBox1,"Error"); 
```

但是当我尝试使用以下代码处理此 errorProvider 时

```
errorProvider1->Dispose(); 
```

然后这条线显示错误

```
error C2039: 'Dispose' : is not a member of 'System::Windows::Forms::ErrorProvider' 
```

此代码我能够在 vc# 中成功运行，但不能在 vc++ 中运行；

但是由于我的要求是在 vc++ 中使用它。

谁能告诉我这段代码有什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:19:39.470

根据[这篇文章](http://msdn.microsoft.com/en-us/library/ms379617.aspx#vs05cplus_topic5)，`IDisposable`C++/CLI 中的模式是不同的，您不能`Dispose()`在该语言中实现或调用方法。

您必须改用`delete`运算符：

```
errorProvider1->SetError(checkBox1,"Error");
delete errorProvider1;  // Equivalent to errorProvider1->Dispose(). 
```

# ios - 用户位置的自定义注释视图不移动地图视图

> ID：11432746
> 
> 赞同：13
> 
> 时间：2012-07-11T12:32:57.777
> 
> 标签：ios, map, mkmapview

我们可以为用户在 iOS 中的当前位置自定义注释视图吗？

我需要用我自己的自定义视图（比如一些 ping 引脚）删除蓝点（带圆圈）。是否有可能做到这一点？

如果我们这样做，当用户的位置发生变化时，这个图钉会移动到新的位置吗？还是我们需要以编程方式处理它？

我观察到，如果我们对用户的当前位置使用默认的蓝点，那么当用户位置发生变化时，它会在地图中更新。

我只想知道这是否可以通过我们自己的自定义视图来完成。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T15:16:51.830

是的，您可以拥有用户位置的自定义视图。

不幸的是，实现起来比应有的困难，因为即使[viewForAnnotation 委托方法的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/doc/uid/TP40008204-CH3-SW11)声称如果注释类是 ，您可以只提供自己的视图`MKUserLocation`，自定义视图不会继续随着用户的位置移动。事实上，当返回一个自定义视图时`MKUserLocation`，地图视图会完全停止更新用户位置（地图视图的`didUpdateUserLocation`委托方法不再触发）。我相信这是一个错误。

一种解决方法是使用`CLLocationManager`和自定义注释...

确保在地图视图上选中或取消选中`showsUserLocation`。`NO`

`CLLocationManager`使用实现协议的自定义类声明 a 和自定义注解的属性`MKAnnotation`（或者您可以只使用泛型`MKPointAnnotation`类）。

在`viewDidLoad`或其他适当的地方，创建`CLLocationManager`，设置它`delegate`并调用`startUpdatingLocation`。

在[位置管理器的`didUpdateToLocation`委托方法](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/doc/uid/TP40007124-CH3-SW3)（*不是*地图视图的`didUpdateUserLocation`委托方法）中，创建或更新您的自定义注释：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if (myUserLocAnnot == nil)
    {
        self.myUserLocAnnot = [[[MyUserLocClass alloc] init] autorelease];
          //remove the autorelease if using ARC
        myUserLocAnnot.title = @"You are here";
        myUserLocAnnot.coordinate = newLocation.coordinate;
        [mapView addAnnotation:myUserLocAnnot];
    }
    else
    {
        myUserLocAnnot.coordinate = newLocation.coordinate;
    }
} 
```

最后，在地图视图的`viewForAnnotation`委托方法中，如果注释是您的自定义用户位置注释，您将返回自定义注释视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-31T07:54:36.443

这是2021年的答案。

斯威夫特 5，XCode 12。

```
if annotation.isKind(of: MKUserLocation.self) {
            let userIdentifier = "user_location"

            if let existingView = mapView
              .dequeueReusableAnnotationView(withIdentifier: userIdentifier) {
              return existingView
            } else {
              let view = MKAnnotationView(annotation: annotation, reuseIdentifier: userIdentifier)
              view.image = #imageLiteral(resourceName: "dark_haulerIcon")
              return view
            }

        } 
```

And you don't need to write logic for moving the annotation. Come on, It will automatically get done. Just use the above logic.

# django - 无法转换 我有一个 django modelForm，它已成功提交，直到我在 forms.py 中添加此代码： def __init__(self, own_id=None, **kwargs): super(WebrequestsForm, self).__init__(* 问问题 问问题 2012-07-11T12:33:04.420 170 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个 django modelForm，它已成功提交，直到我在 forms.py 中添加此代码： def __init__(self, own_id=None, **kwargs): super(WebrequestsForm, self).__init__(**kwargs) if own_id: self.fields['veh_id1'].queryset = Vehicles.objects.filter(own_id1=own_id) self.fields['veh_id2'].queryset = Vehicles.objects.filter(own_id2=own_id) 我这样做是因为我想限制上述外键的条目。之后，只有相关选项按预期出现在表单中，但无法提交表单。 我收到以下错误： Cannot convert <querydict: 2="" {u'attachment2flag':="" [u'on'],="" u'nod_id1':="" [u'70'],="" u'vrd_id':="" [u'1'],="" u'nod_id2':="" [u'50'],="" u'tel':="" [u'2310566167'],="" u'directiondb':="" u'rdateto':="" [u'1="" 2013'],="" u'sendmethod':="" u'fax':="" [u'2310511559'],="" u'submitdate':="" u'email':="" [u'info@rdfvfvd.com'],="" u'veh_id2':="" [u'878'],="" u'veh_id1':="" [u'2978'],="" u'returnflag':="" u'reqtype':="" u'remarks':="" u'csrfmiddlewaretoken':="" [u'1vhl04h1hgelkddns6iscw61dtsyitkx'],="" u'rdatefrom':="" 2012'],="" u'id':="" [u'22065'],="" u'own_id':="" [u'148']}="">to Decimal veh_id1 和 veh_id2 是十进制字段，所以我猜想通过过滤尝试将错误保存在那里。如何在下拉列表中返回self.fields['veh_id1'].queryset = Vehicles.objects.filter(own_id1=own_id)需要保存的对象的 ID？ 我能感觉到问题出在哪里，但我不知道如何解决这个问题，因为我是 django 的新手。 Clojure - 计算序列中向量的唯一值 作为 Clojure 的新手，我似乎无法弄清楚如何做一些看起来应该很简单的事情。我只是看不到它。我有一个向量序列。假设每个向量都有两个值，分别代表客户编号和发票编号，每个向量代表一件商品的销售。所以它看起来像这样： ([ 100 2000 ] [ 100 2000 ] [ 101 2001 ] [ 100 2002 ]) 我想计算唯一客户和唯一发票的数量。所以这个例子应该产生向量 [ 2 3 ] 在 Java 或另一种命令式语言中，我将遍历 seq 中的每个向量，将客户编号和发票编号添加到一个集合中，然后计算每个集合中值的数量并返回它。我看不到执行此操作的功能方法。 谢谢您的帮助。 编辑：我应该在我最初的问题中指定向量的序列是数百万的 10 并且实际上不止两个值。因此，我只想通过 seq 一次，并在通过 seq 的那一次计算这些唯一计数（以及一些总和）。 djangoforeign-keys 4 1 回答 1 This answer is useful 1 解决了。问题出在我的modelForm初始化的调用中。而不是 'expected': form = MyForm(request.POST, own_instance.id) Tryed form = MyForm(data=request.POST, own_id=own_instance.id)，它起作用了，因为我最终发现位置参数和关键字参数之间存在区别。 于 2012-07-11T15:56:40.243 回答 Related 1 python - 调用函数时使用字符串 1 internet-explorer-8 - SASS - &:last-child, &.last-child 在 IE8 中不起作用 3 string - 从文件中读取 URL 字符串列表并查找前 10 个读取最多的 URL 1 mysql - Mysql 分组 - 优先级不为空 - 可能吗？ 1 php - WAMP：如何重新分配我的旧 MySQL 数据 1 phantomjs - Phantomjs 在移动站点级别而不是完整网站上进行屏幕捕获 1 c# - 在 Windows Phone 解决方案的主项目中启动另一个项目 1 python - 如何使用 Q 对象过滤 CharField 作为数字 0 sidekiq - 在独立的 jboss 上启动服务的多个实例 1 ruby-on-rails - 尝试使用 filnename 格式下载时出错 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</querydict:>

> ID：11432747
> 
> 赞同：0
> 
> 时间：
> 
> 标签：django, foreign-keys

我有一个 django modelForm，它已成功提交，直到我在 forms.py 中添加此代码：

```
def __init__(self, own_id=None, **kwargs):
    super(WebrequestsForm, self).__init__(**kwargs)
    if own_id:

       self.fields['veh_id1'].queryset = Vehicles.objects.filter(own_id1=own_id)
       self.fields['veh_id2'].queryset = Vehicles.objects.filter(own_id2=own_id) 
```

我这样做是因为我想限制上述外键的条目。之后，只有相关选项按预期出现在表单中，但无法提交表单。

我收到以下错误：

`Cannot convert <QueryDict: {u'attachment2flag': [u'on'], u'nod_id1': [u'70'], u'vrd_id': [u'1'], u'nod_id2': [u'50'], u'tel': [u'2310566167'], u'directiondb': [u'1'], u'rdateto': [u'1/2/2013'], u'sendmethod': [u'1'], u'fax': [u'2310511559'], u'submitdate': [u'1'], u'email': [u'info@rdfvfvd.com'], u'veh_id2': [u'878'], u'veh_id1': [u'2978'], u'returnflag': [u'1'], u'reqtype': [u'1'], u'remarks': [u'1'], u'csrfmiddlewaretoken': [u'1Vhl04H1HgelkDdnS6IsCw61dtSyitkX'], u'rdatefrom': [u'1/2/2012'], u'id': [u'22065'], u'own_id': [u'148']}> to Decimal`

veh_id1 和 veh_id2 是十进制字段，所以我猜想通过过滤尝试将错误保存在那里。如何在下拉列表中返回`self.fields['veh_id1'].queryset = Vehicles.objects.filter(own_id1=own_id)`需要保存的对象的 ID？

我能感觉到问题出在哪里，但我不知道如何解决这个问题，因为我是 django 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:56:40.243

解决了。问题出在我的modelForm初始化的调用中。而不是 'expected': `form = MyForm(request.POST, own_instance.id)` Tryed `form = MyForm(data=request.POST, own_id=own_instance.id)`，它起作用了，因为我最终发现位置参数和关键字参数之间存在区别。

# clojure - Clojure - 计算序列中向量的唯一值

> ID：11432750
> 
> 赞同：7
> 
> 时间：2012-07-11T12:33:11.327
> 
> 标签：clojure

作为 Clojure 的新手，我似乎无法弄清楚如何做一些看起来应该很简单的事情。我只是看不到它。我有一个向量序列。假设每个向量都有两个值，分别代表客户编号和发票编号，每个向量代表一件商品的销售。所以它看起来像这样：

```
([ 100 2000 ] [ 100 2000 ] [ 101 2001 ] [ 100 2002 ]) 
```

我想计算唯一客户和唯一发票的数量。所以这个例子应该产生向量

```
[ 2 3 ] 
```

在 Java 或另一种命令式语言中，我将遍历 seq 中的每个向量，将客户编号和发票编号添加到一个集合中，然后计算每个集合中值的数量并返回它。我看不到执行此操作的功能方法。

谢谢您的帮助。

编辑：我应该在我最初的问题中指定向量的序列是数百万的 10 并且实际上不止两个值。因此，我只想通过 seq 一次，并在通过 seq 的那一次计算这些唯一计数（以及一些总和）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T12:44:39.590

在 Clojure 中，您可以使用几乎相同的方式进行操作 - 首先调用`distinct`以获取唯一值，然后用于`count`计算结果：

```
(def vectors (list [ 100 2000 ] [ 100 2000 ] [ 101 2001 ] [ 100 2002 ]))
(defn count-unique [coll] 
   (count (distinct coll)))
(def result [(count-unique (map first vectors)) (count-unique (map second vectors))]) 
```

请注意，在这里您首先获取向量的第一个和第二个元素的列表（映射第一个/第二个向量），然后分别对每个元素进行操作，从而对集合进行两次迭代。如果性能确实很重要，您可以对迭代（参见形式或尾递归）和集合做同样的事情`loop`，就像在 Java 中所做的那样。要进一步提高性能，您还可以使用[`transients`](http://clojure.org/transients). 虽然对于像你这样的初学者，我会推荐第一种方式`distinct`。

**UPD。**这是带循环的版本：

```
(defn count-unique-vec [coll]
  (loop [coll coll, e1 (transient #{}), e2 (transient #{})]
    (cond (empty? coll) [(count (persistent! e1)) (count (persistent! e2))]
          :else (recur (rest coll)
                       (conj! e1 (first (first coll)))
                       (conj! e2 (second (first coll)))))))
(count-unique-vec vectors)    ==> [2 3] 
```

如您所见，不需要原子或类似的东西。首先，您将状态传递给每次下一次迭代（重复调用）。其次，您使用瞬态来使用*临时可变*集合（详细了解瞬态），从而避免每次都创建新对象。

**UPD2。**这是`reduce`扩展问题的版本（带价格）：

```
(defn count-with-price
  "Takes input of form ([customer invoice price] [customer invoice price] ...)  
   and produces vector of 3 elements, where 1st and 2nd are counts of unique    
   customers and invoices and 3rd is total sum of all prices"
  [coll]
  (let [[custs invs total]
        (reduce (fn [[custs invs total] [cust inv price]]
                  [(conj! custs cust) (conj! invs inv) (+ total price)])
            [(transient #{}) (transient #{}) 0]
            coll)]
    [(count (persistent! custs)) (count (persistent! invs)) total])) 
```

在这里，我们将中间结果保存在一个向量`[custs invs total]`中，每次解包、处理并将它们打包回一个向量。如您所见，用这种非平凡的逻辑实现`reduce`更难（写入和读取）并且需要更多代码（在`loop`ed 版本中，为 price 循环添加一个参数就足够了）。所以我同意@ammaloy 的观点，更简单的情况`reduce`更好，但更复杂的事情需要更多的低级构造，比如`loop/recur`pair。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T18:21:11.243

就像使用序列时经常发生的情况一样，`reduce`比`loop`这里更好。你可以这样做：

```
(map count (reduce (partial map conj) 
                   [#{} #{}]
                   txn)) 
```

或者，如果你真的很喜欢瞬变：

```
(map (comp count persistent!)
     (reduce (partial map conj!) 
             (repeatedly 2 #(transient #{}))
             txn)) 
```

这两种解决方案都只遍历输入一次，并且它们使用的代码比循环/递归解决方案少得多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T12:57:18.200

或者您可以使用集合来为您处理重复数据删除，因为集合最多可以具有任何特定值之一。

```
(def vectors '([100 2000] [100 2000] [101 2001] [100 2002]))    
[(count (into #{} (map first vectors)))  (count (into #{} (map second vectors)))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T22:45:23.027

这是使用地图和高阶函数执行此操作的好方法：

```
(apply 
  map 
  (comp count set list) 
  [[ 100 2000 ] [ 100 2000 ] [ 101 2001 ] [ 100 2002 ]])

=> (2 3) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-03T17:14:14.000

上述好的解决方案还有其他解决方案：

`(map (comp count distinct vector) [ 100 2000 ] [ 100 2000 ] [ 101 2001 ] [ 100 2002 ])`

其他用thread-last宏写的：

`(->> '([100 2000] [100 2000] [101 2001] [100 2002]) (apply map vector) (map distinct) (map count))`

两者都返回 (2 3)。

# linux-kernel - 系统调用中的软件中断

> ID：11432756
> 
> 赞同：-3
> 
> 时间：2012-07-11T12:33:25.503
> 
> 标签：linux-kernel, arm, interrupt, system-calls

在arm的fork系统调用中，

sw#0

使用指令，它到底是做什么的？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:44:28.237

如果您在“swi arm instruction”上搜索，例如，第一个点击是：...

SWI : 软件中断

SWI 这是一个简单的工具，但可能是最常用的工具。SWI 提供了许多操作系统工具。无法想象没有 SWI 的 RISC OS。Nava Whiteford 解释了 SWI 的工作原理（最初在 Frobnicate 问题 12½ 中）...

在本文中，我将尝试深入研究 SWI（软件中断）的工作原理。什么是 SWI？

SWI 代表软件中断。在 RISC OS 中，SWI 用于访问由第三方生成的操作系统例程或模块。许多应用程序使用模块为其他应用程序提供低级外部访问。SWI 的例子有：

Filer SWI，有助于从光盘读取和设置属性等。打印机驱动程序 SWI，用于很好地帮助使用并行端口进行打印。SWI FreeNet/Acorn TCP/IP 堆栈 SWI 用于使用 TCP/IP 协议传输和接收数据，该协议通常用于通过 Internet 发送数据。当以这种方式使用时，SWI 允许操作系统具有模块化结构，这意味着创建完整操作系统所需的代码可以拆分为许多小部分（模块）和模块处理程序。

当 SWI 处理程序收到对特定例程编号的请求时，它会找到该例程的位置并执行它，并传递任何数据。

# android - Android SimpleOnScaleGestureListener 结合 OnDoubleTapListener

> ID：11432757
> 
> 赞同：1
> 
> 时间：2012-07-11T12:33:34.467
> 
> 标签：android, touch-event, gesturedetector

如何结合 SimpleOnScaleGestureListener 和 OnDoubleTapListener？如果我在我的 onTouchEvent 方法中这样做：

```
if (!scaleGestureDetector.onTouchEvent(ev)) {
    doubleTabGestureDetector.onTouchEvent(ev);
} 
```

我的应用程序永远不会被双击。

我该如何解决这个问题？如果我两者都做：

```
scaleGestureDetector.onTouchEvent(ev)
doubleTabGestureDetector.onTouchEvent(ev) 
```

我的应用程序会将缩放手势解释为缩放手势，但它也会将相同的手势解释为双标签手势的第一个标签。我不想要那个。我不希望 doubleTabDetector 同时处理缩放手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:31:35.143

解决办法是反其道而行之。

if (!doubleTabGestureDetector.onTouchEvent(ev)) { scaleGestureDetector.onTouchEvent(ev); }

并在 doubleTabGestureListener 的 onDown 中返回 false。

# mysql - Mysql utf32_unicode_ci 和 html charset utf-8 使用过，但是出现字符 �

> ID：11432758
> 
> 赞同：3
> 
> 时间：2012-07-11T12:33:36.377
> 
> 标签：mysql, html, encoding

我在 MySQL 字段中有一些法语文本，在 PHPMyAdmin 下正确显示：

```
mentionné 
```

该字段被编码为`utf32_unicode_ci`。（它是一个`varchar(500), utf32_unicode_ci`）。

但是调用 PHP 脚本调用此参数并以 utf-8 编码的 html 输出会返回：

```
mentionn� 
```

这是我的 php html 标头的摘录：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="fr-FR">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:37:24.920

除了数据库编码，请务必检查以下内容：

*   文件（js/php）的utf8编码（在超编辑下，F12：另存为UTF8-NOBOM）
*   utf8 html内容：`<meta HTTP-EQUIV="content-type" CONTENT="text/html; charset=utf-8">`
*   您的数据库连接的utf8： `SET character_set_connection = 'utf8'`
*   您的查询结果的 utf8 格式：`SET character_set_results = 'utf8'`
*   您的数据库客户端的utf8：`SET character_set_client = 'utf8'`
*   你的mysql表的utf8：`ALTER TABLE table CONVERT TO CHARACTER SET utf8;`
*   您的数据库服务器的utf8：`SET character_set_database = 'utf8'`和`SET character_set_server = 'utf8'`
*   在某些情况下，当硬编码值需要编码时，必须在文件中强制使用 utf8。例如，您需要在文件顶部添加评论，使用`charset=utf-8`, 以便超级编辑或您喜欢的编辑器可以检测到它。

rgds。

ps：我不知道 utf32 但不知怎么的逻辑应该是一样的

# lua - 电晕SDK。如何在图像中添加线条

> ID：11432759
> 
> 赞同：0
> 
> 时间：2012-07-11T12:33:40.520
> 
> 标签：lua, coronasdk

我想在没有组的情况下直接向图像添加线条以制作线条光栅化对象（而不是矢量）。事实是，由于大量矢量对象（超过 100 个）应用程序运行缓慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:20:04.757

绘制线条后，将它们插入组并使用 display.capture 函数将它们转换为单个显示对象

看看这里[http://docs.coronalabs.com/api/library/display/capture.html](http://docs.coronalabs.com/api/library/display/capture.html)

还要看看 [display.save](http://docs.coronalabs.com/api/library/display/save.html)

# jsp - 可以更改请求调度程序中的 url

> ID：11432763
> 
> 赞同：-2
> 
> 时间：2012-07-11T12:33:57.823
> 
> 标签：jsp, servlets, requestdispatcher

在请求调度的情况下是否可以更改 url。

这是我的代码

```
public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException, ServletException
{

 List<HomePageServicesDescription> data= HomePageServicesDescriptionDB.showHomePageServicesDescription();
 req.setAttribute("description", data);

 req.getRequestDispatcher("index.jsp").forward(req,res);

 } 
```

因此，当在 Web 浏览器中看到它时，它会给出`http://localhost:8888/url-mapping`servlet 的 url=。但我想要那个 url= `http://localhost:8888/index.jsp`。怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:54:18.333

我得到了答案

```
public void doGet(HttpServletRequest req, HttpServletResponse res) 
    throws IOException, ServletException
{

    List<HomePageServicesDescription> data = HomePageServicesDescriptionDB.showHomePageServicesDescription();
    req.getSession().setAttribute("description", data);

    res.sendRedirect("index.jsp");

} 
```

在 index.jsp 中

```
List<HomePageServicesDescription> data= (List<HomePageServicesDescription>) session.getAttribute("description"); 
```

它完美地工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:38:25.677

你应该做`HttpServletResponse.sendRedirect()`而不是`RequestDisaptcher.forward()`. 您想要发送的任何参数都可以作为查询参数发送。

```
public void doGet(HttpServletRequest req, HttpServletResponse res) 
        throws IOException, ServletException
{

   List<HomePageServicesDescription> data =
             HomePageServicesDescriptionDB.showHomePageServicesDescription();
    req.setAttribute("description", data);

    res.sendRedirect("index.jsp?description="+data);

 } 
```

# vb.net - VB 清除键盘缓冲区

> ID：11432765
> 
> 赞同：0
> 
> 时间：2012-07-11T12:34:02.583
> 
> 标签：vb.net, barcode, barcode-scanner

根据缓冲区清除问题，我知道我的问题与其他问题似乎非常相似......但这里有一个详细的描述：

我有一个 motorolla 手持设备（条形码扫描仪），它通过托盘工具读取条形码。代码由托盘工具扫描并被转换为击键，就像正常按下键盘上的键一样。

所以我在 vb 中有一个应用程序，它应该读取条形码，然后一秒钟然后继续输入。

阅读 12 个字符/数字后，我的文本字段应将焦点设置为另一个文本字段（2.条形码），因此我检查 onChange 长度，然后将焦点设置为下一个文本字段。

如果存在恶意条形码或包含超过 12 个字符/数字的条形码，则第二个文本字段将填充文本字段 1 中 12\. char 之后的所有字符。

我无法控制扫描行为或扫描仪触发器的 keydown 事件......不可能。输入数据中也没有终止符号，这表明一个块在这里结束。

那么如何清除扫描仪虚拟键盘的缓冲区？！有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:40:06.937

我建议下载扫描仪的手册以查找配置代码。它们通常是一组特殊的条形码，可以对其进行扫描以设置允许的符号系统等属性。您需要做的是设置扫描仪，以便它为您的数据附加 CRLF、Tab 或其他终止符。这样您就可以在条形码的末尾采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:32:18.667

您可以使用 TWAIN 来处理扫描，我不确定它是否支持摩托罗拉。尝试下载一些 TWAIN 库并将它们与您的项目配合使用。

# python - 网桥无法连接到rabbitmq

> ID：11432770
> 
> 赞同：1
> 
> 时间：2012-07-11T12:34:21.947
> 
> 标签：python, rabbitmq, bridge

我有rabbitmq运行...

> $ rabbitmq-server Activating RabbitMQ plugins ... 6 个插件被激活：
> * amqp_client-0.0.0
> * mochiweb-1.3-rmq0.0.0-git
> * rabbitmq_management-0.0.0
> * rabbitmq_management_agent-0.0.0
> * rabbitmq_mochiweb-0.0.0
> * webmachine -1.7.0-rmq0.0.0-hg 名称为“rabbit”的节点已经在“barber”上运行

当我尝试运行`~/.bridge/server start`它时，它会因崩溃报告而关闭。文档中没有任何内容涉及配置rabbitmq。

```
=CRASH REPORT==== 11-Jul-2012::08:29:10 ===  
    trap_exit: false  
  crasher:  
    status: running  
    initial call: gateway_gamqp:init/1  
    heap_size: 377  
    pid: <0.927.0>  
    stack_size: 24  
    registered_name: []  
    reductions: 316  
    exception exit: cannot_connect_to_rabbit  
  neighbours:  
      in function  gen_server:init_it/6 (gen_server.erl, line 328)  
    ancestors: [gateway_app_sup,<0.921.0>]  
    messages: []  
    links: [<0.923.0>]  
    dictionary: []  
    trap_exit: false  
    status: running  
    heap_size: 377  
    stack_size: 24  
    reductions: 316 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:45:03.363

尝试在没有 rabbitmq 的情况下运行它也可能 sudo ~/.bridge/server start

# c# - 我如何以编程方式读取 AcroFields 和 XFA 字段以进行填充？

> ID：11432771
> 
> 赞同：2
> 
> 时间：2012-07-11T12:34:25.907
> 
> 标签：c#, pdf, itextsharp, xfa, acrofields

我正在编写一个需要同时读取 XFA 和 AcroField 模板的 C# 应用程序。由于公司的规模以及可能与应用程序相关联的现有 PDF 文档的数量，选择一个并使用它是不可能的。

我目前正在使用 iTextSharp 读取 AcroFields，但实际上并没有保存更改。我使用 Acrobat Pro 的试用版制作了 AcroFields。

编辑：（我删除了很多原始帖子）

我有一个可行的解决方法，但我宁愿不对 XML 进行深度优先搜索。除了文本字段之外，我还没有弄清楚任何其他内容。

```
public List<String> getKeys(AcroFields af)
{
    XfaForm xfa = af.Xfa;
    List<String> Keys = new List<string>();
    foreach (var field in af.Fields)
    {
        Keys.Add(field.Key);
    }
    if (xfa.XfaPresent)
    {
        System.Xml.XmlNode n = xfa.DatasetsNode.FirstChild;
        if (n == null) return Keys;

        // drill down in to the children
        while (n.FirstChild != null) { n = n.FirstChild;  }  

        // if the node is filled in data, grab the parent
        if ((n.Name.ToCharArray(0, 1))[0] == '#') n = n.ParentNode; 
        while ((n = n.NextSibling) != null)
        {
            Keys.Add(n.Name);
        }
    }
    return Keys;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:19:08.910

好的，我想出了如何获取 XFA 和 AcroField PDF 文档的字段名称，这是我最初的问题。

我还使用了一个名为`myKey`. 它有一个值和一个键。我覆盖了`.equals`仅比较键值，并编写了我自己的`.ToString`.

```
public AcroFields loadAcroFields(String path)
{
    PdfReader pdfReader = new PdfReader(path);
    AcroFields fields = pdfReader.AcroFields;
    pdfReader.Close();
    return fields;
}

public List<myKey> getKeys(AcroFields af)
{
    XfaForm xfa = af.Xfa;
    List<myKey> Keys = new List<myKey>();
    foreach (var field in af.Fields)
    {
        Keys.Add( new myKey(field.Key,  af.GetField(field.Key)));
    }
    if (xfa.XfaPresent)
    {
        System.Xml.XmlNode n = xfa.DatasetsNode.FirstChild;
        Keys.AddRange(BFS(n));
    }
    return Keys;
}

public List<myKey> BFS(System.Xml.XmlNode n)
{
    List<myKey> Keys = new List<myKey>();
    System.Xml.XmlNode n2 = n;

    if (n == null) return Keys;

    if (n.FirstChild == null)
    {
        n2 = n;
        if ((n2.Name.ToCharArray(0, 1))[0] == '#') n2 = n2.ParentNode;
        while ((n2 = n2.NextSibling) != null)
        {
            Keys.Add(new myKey(n2.Name, n2.Value));
        }
    }

    if (n.FirstChild != null)
    {
        n2 = n.FirstChild;
        Keys.AddRange(BFS(n2));
    }
    n2 = n;
    while ((n2 = n2.NextSibling) != null)
    {
        Keys.AddRange(BFS(n2));
    }
    return Keys;
} 
```

# java - 当屏幕上有许多精灵时，Java Swing 游戏的性能很差

> ID：11432773
> 
> 赞同：3
> 
> 时间：2012-07-11T12:34:28.200
> 
> 标签：java, swing, animation

我在 Swing 中制作一个简单的塔防游戏，当我尝试在屏幕上放置许多精灵（超过 20 个）时遇到了性能问题。

整个游戏发生在具有 setIgnoreRepaint(true) 的 JPanel 上。这是paintComponent方法（con是Controller）：

```
public void paintComponent(Graphics g){
    super.paintComponent(g);
    //Draw grid
    g.drawImage(background, 0, 0, null);
    if (con != null){
        //Draw towers
        for (Tower t : con.getTowerList()){
            t.paintTower(g);
        }
        //Draw targets
        if (con.getTargets().size() != 0){
            for (Target t : con.getTargets()){
                t.paintTarget(g);
            }
            //Draw shots
            for (Shot s : con.getShots()){
                s.paintShot(g);
            }
        }
    }
} 
```

Target 类简单地在其当前位置绘制一个 BufferedImage。getImage 方法不会创建新的 BufferedImage，它只是返回 Controller 类的实例：

```
public void paintTarget(Graphics g){
    g.drawImage(con.getImage("target"), getPosition().x - 20, getPosition().y - 20, null);
} 
```

每个目标都运行一个摆动计时器来计算其位置。这是它调用的 ActionListener：

```
public void actionPerformed(ActionEvent e) {
    if (!waypointReached()){
        x += dx;
        y += dy;
        con.repaintArea((int)x - 25, (int)y - 25, 50, 50);
    }
    else{
        moving = false;
        mover.stop();
    }
}

private boolean waypointReached(){
    return Math.abs(x - currentWaypoint.x) <= speed && Math.abs(y - currentWaypoint.y) <= speed;
} 
```

除此之外，仅在放置新塔时才调用 repaint()。

我怎样才能提高性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:45:52.310

> 每个目标都运行一个摆动计时器来计算其位置。这是它调用的 ActionListener：

这可能是您的问题 - 让每个目标/项目符号（我假设？）负责跟踪何时更新自身并绘制自身听起来像是相当多的工作。更常见的方法是沿着

```
while (gameIsRunning) {
  int timeElapsed = timeSinceLastUpdate();
  for (GameEntity e : entities) {
    e.update(timeElapsed);
  }
  render(); // or simply repaint in your case, I guess
  Thread.sleep(???); // You don't want to do this on the main Swing (EDT) thread though
} 
```

本质上，链上更远的对象有责任跟踪游戏中的所有实体，告诉它们更新自己并渲染它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:03:51.420

我认为这里可能有问题的是您的游戏设置的整个逻辑（无意冒犯），正如另一个答案中所述，您有不同的计时器来处理每个实体的移动，这不好。我建议您看一些游戏循环示例，并根据这些示例进行调整，您会发现一些不错的链接具有极大的可读性和性能改进：

*   [http://www.java-gaming.org/index.php/topic,24220.0](http://www.java-gaming.org/index.php/topic,24220.0)

*   [http://www.cokeandcode.com/info/tut2d.html](http://www.cokeandcode.com/info/tut2d.html)

*   [http://entropyinteractive.com/2011/02/game-engine-design-the-game-loop/](http://entropyinteractive.com/2011/02/game-engine-design-the-game-loop/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T15:58:06.260

我最初对“*太多计时器*”理论持谨慎态度。[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)使用“单个共享线程（由第一个执行的 Timer 对象创建）”的实例。几十个甚至几十个分数都很好，但数百个通常开始变得迟钝。根据周期和占空比，`EventQueue`最终饱和。我同意其他人的观点，即您需要严格检查您的设计，但您可能想尝试使用`setCoalesce()`. 作为参考，这里有一个您可能想要描述的[sscce 。](http://sscce.org/)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.Timer;

/**
* @see http://stackoverflow.com/a/11436660/230513
*/
public class TimerTest extends JPanel {

    private static final int N = 25;

    public TimerTest() {
        super(new GridLayout(N, N));
        for (int i = 0; i < N * N; i++) {
            this.add(new TimedLabel());
        }
    }

    private static class TimedLabel extends JLabel {

        private static final Random r = new Random();

        public TimedLabel() {
            super("000", JLabel.CENTER);
            // period 100 to 1000 ms; frequency 1 to 10 Hz.
            Timer timer = new Timer(r.nextInt(900) + 100, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    TimedLabel.this.setText(next());
                }
            });
            timer.setCoalesce(true);
            timer.start();
        }

        private String next() {
            return String.valueOf(r.nextInt(900) + 100);
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(640, 480);
    }

    private void display() {
        JFrame f = new JFrame("TimerTet");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(this));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TimerTest().display();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T13:25:59.087

1.  在 Swing 中绘画更好（在所有情况下 >= Java5），`Swing Timer`仅使用

2.  这个绘画过程只需要一个`Swing Timer`

3.  关于一堆[星星和一个摇摆计时器的例子](https://stackoverflow.com/questions/8614972/passing-current-date)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T09:33:21.923

**尝试为所有目标使用一个计时器。**

如果您有 20 个目标，那么您还将有 20 个计时器同时运行（想想 1000 个目标？）。有一些费用，最重要的是他们每个人都在做类似的工作——计算职位——你不需要把他们分开。我想这是一个简单的任务，它不会让你眨眼，甚至运行 20 次。

如果我明白了，你想要做的是尝试同时改变所有目标的位置。您可以通过在一个线程中运行的一个方法中更改所有这些来实现这一点。

# sql - Union ALL 获取空行

> ID：11432776
> 
> 赞同：0
> 
> 时间：2012-07-11T12:34:31.770
> 
> 标签：sql, sql-server, union

我有两个查询与`union All`.

```
SELECT  select 'Finished' AS Status,amount AS amount,units As Date
from table1 WHERE Pdate > cdate AND name =@name
UNION ALL
SELECT  select 'Live' AS Live,amount,units 
from table1  Where Pdate = cdate And name =@name 
```

结果

```
Status     amount   units
Finished     100    20
Live         200    10 
```

当任一查询获取空集时，我只得到一行，如果两者都获取空集，则我没有行

那么我怎样才能得到这样的结果

```
Status     amount   Units
Finished     100    20
Live         0      0 
```

或者

```
Status     amount   Units
Finished     0      0
Live         200    10 
```

或者

```
Status     amount   Units
Finished      0          0
Live          0          0 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:39:41.497

我认为您可以使用 sum 来做到这一点？如果没有行时 sum 不返回 0，则替换为`Coalesce(sum(amount), 0) as amount`

```
SELECT  select 'Finished' AS Status,sum(amount) AS amount, sum(units) As Unit
from table1 WHERE Pdate > cdate AND name =@name
UNION ALL
SELECT  select 'Live' AS Status, sum(amount) as amount, sum(units) as Unit
from table1  Where Pdate = cdate And name =@name 
```

如果您不想对结果求和，那么合并应该可以工作吗？`coalesce(amount, 0) As amount`ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:44:24.223

尝试这样的事情

```
with stscte as
(
select 'Finished' as status
union all 
select 'Live'
),
datacte
as(
select 'Finished' AS Status,amount AS amount,units As Date 
from table1 WHERE Pdate > cdate AND name =@name 
UNION ALL 
select 'Live' ,amount,units  
from table1  Where Pdate = cdate And name =@name 
)
select sc.status,isnull(dc.amount,0) as amount,isnull(dc.unit,0) as unit 
from stscte sc left join   datacte dc
on sc.status = dc.status 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:23:12.513

我只想指出，您的查询是不必要的复杂，嵌套选择和联合全部。编写查询的更好方法是：

```
select (case when pdate > cdate then 'Finished' else 'Live' end) AS Status,
        amount AS amount, units As Date
from table1
WHERE Pdate >= cdate AND name = @name 
```

这个查询不会产生你想要的，因为它只产生有数据的行。

获取附加行的一种方法是扩充原始数据，然后检查是否需要。

```
select status, amount, units as Date
from (select Status, amount, units,
             row_number() over (partition by status order by amount desc, units desc) as seqnum
      from (select (case when pdate > cdate then 'Finished' else 'Live' end) AS Status,
                    amount, units, name
            from table1
            WHERE Pdate >= cdate AND name = @name
           ) union all
           (select 'Finished', 0, 0, @name
           ) union all
           (select 'Live', 0, 0, @name
           )
          ) t
where (amount > 0 or units > 0) or
      (seqnum = 1) 
```

这会添加您想要的额外行。然后它会枚举它们，因此它们将按任何顺序排在最后。它们被忽略，除非它们是序列中的第一个。

# php - 我们如何在后台运行 sql 查询

> ID：11432778
> 
> 赞同：5
> 
> 时间：2012-07-11T12:34:37.857
> 
> 标签：php, mysql, sql

我想知道我们如何在后台运行 sql 查询...我有一个大查询需要花费很多时间我想将其作为后台运行，这样我的页面加载时间会更少..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:41:35.103

您可以使用 AJAX 在单独的脚本中调用您的查询。当页面被请求时，正常处理 PHP，呈现页面并将其发送给访问者，然后立即启动 AJAX 脚本，请求另一个执行慢查询的 PHP 脚本。该页面将在查询运行时加载，当您从查询中获取结果时，使用一点 JavaScript 来合并结果。这里的好处是，当页面加载时，查询正在运行，所以你同时做这两个。

还要考虑优化您的查询并确保您已在表上设置索引以加快查询速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:36:06.440

使用 cron 在 PHP 脚本中运行查询并缓存结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:39:58.967

这里有一些解决方案[http://dev.mysql.com/doc/refman/5.0/en/table-locking.html](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)和这里[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。

mySQL 官方网站说：

```
INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [INTO] tbl_name [(col_name,...)]
{VALUES | VALUE} ({expr | DEFAULT},...),(...),... 
```

所以一个真正的用例看起来像

```
INSERT LOW_PRIORITY INTO tablename (column1,column2) VALUES ("hello","you"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T12:40:55.010

我建议使用 CRON 和 Cache 方法，或者实现使用 AJAX。

使用 CRON 和缓存，运行您的查询，然后将其序列化并将其保存到一个文件中以确保完整性。需要时调用和反序列化。

使用 AJAX，当您的页面加载时，调用执行并返回查询的文件。这样，您可以在服务器运行查询时显示等待指示器，并且它们彼此分开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T12:45:33.807

在您的 PHP 文件中编写查询，并在您想要运行它的时间或时间间隔安排它。对于 linux 调度[CRON](http://www.computerhope.com/unix/ucrontab.htm)或 Windows 使用[Task Scheduler](http://support.microsoft.com/kb/308569) Else 您可以通过[Ajax](http://www.w3schools.com/ajax/default.asp)请求触发它

# c# - 在公共网站上显示存储在 Google Drive 中的图像

> ID：11432783
> 
> 赞同：0
> 
> 时间：2012-07-11T12:34:42.937
> 
> 标签：c#, asp.net-mvc-3, google-drive-api

如果可以访问/显示存储在公共网站上的 Google Drive 中的图像之类的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:38:10.620

不，但您可以公开分享它们并提供指向它们的链接。

[http://support.google.com/drive/bin/answer.py?hl=zh-CN&answer=2494886&p=visibility_options](http://support.google.com/drive/bin/answer.py?hl=en-GB&answer=2494886&p=visibility_options)

# c# - 更新绑定到属性的文本框控件

> ID：11432784
> 
> 赞同：0
> 
> 时间：2012-07-11T12:34:44.500
> 
> 标签：c#, wpf, binding, textbox, prism

我需要更新`TextBox`绑定到属性的一个。以我实现它的方式，它工作正常。这是代码

```
private double foo;

public double Foo
{
  get { return foo; }
  set
  {
    foo = value;
    RaisePropertyChanged(() => Foo);
  }
} 
```

但是现在我需要从另一个属性更新这个属性的值，并且`TextBox`绑定到 Foo 没有更新。这是代码

```
private string foo1

public string Foo1
{
  get { return foo1; }
  set
  {
    foo1 = value;
    foo = 4; // Updating the Foo property indirectly
    RaisePropertyChanged(() => Foo);
    RaisePropertyChanged(() => Foo1);
  }
} 
```

我有义务以这种方式更新属性 Foo 的值，因为 Foo 和另一个属性相互更新，所以我无法直接更新属性，因为我陷入了无限递归。

问题是当我更改属性**foo**的值时，如何更新`TextBox`绑定到*Foo*属性的那个？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:39:35.993

我会说你应该更新`Foo`你的`Foo1`setter 中的公共成员。这将导致`RaisePropertyChanged`事件触发`Foo`.

```
private string foo1

public string Foo1
{
  get { return foo1; }
  set
  {
    foo1 = value;
    Foo = 4;
    RaisePropertyChanged(() => Foo1);
  }
} 
```

您可以`RaisePropertyChanged(() => Foo);`在更新私有字段时调用`foo`，但除非有充分的理由不使用该属性`Foo`，否则我将始终使用它`foo`。的目的`set`是让该代码在属性值更改时运行。在我看来，设置私有字段会绕过`set`违反此意图的代码。

**编辑**

另一方面，如果您只想调用`RaisePropertyChanged`并更改`Foo`when`Foo1` *更改*的值（不一定每次调用 setter 时），只需添加一个检查以查看值是否已更改。这将解决您的递归问题。

```
set
{
    if(foo1 != value)
    {
       foo1 = value;
       Foo = 4;
       RaisePropertyChanged(() => Foo1);
    }
} 
```**

# jpa - JPA @NamedQuery 相关子查询

> ID：11432786
> 
> 赞同：1
> 
> 时间：2012-07-11T12:34:58.330
> 
> 标签：jpa, jpa-2.0, jpql, named-query

我正在尝试创建一个`@NamedQuery`将包含以下相关子查询：

```
@NamedQuery(name = "Drcomments.findByOrderDesc", query = " SELECT a FROM ( SELECT ROWNUMBER() OVER(ORDER BY d.drcommentsPK.commentSecondaryCode DESC) AS EL_ROWNM , d.drcommentsPK.commentSecondaryCode , d.commentSecondaryCodeDescription FROM Drcomments d WHERE d.drcommentsPK.commentPrimaryCode = 1 ) a WHERE a.EL_ROWNM < 4 and a.EL_ROWNM > 0 ")}) 
```

问题是我收到此错误：

```
"Exception [EclipseLink-8025] (Eclipse Persistence Services - 2.3.0.v20110604-r9504):  org.eclipse.persistence.exceptions.JPQLException
Exception Description: Syntax error parsing the query [Drcomments.findByOrderDesc:  SELECT a FROM ( SELECT ROWNUMBER() OVER(ORDER BY d.drcommentsPK.commentSecondaryCode DESC) AS EL_ROWNM , d.drcommentsPK.commentSecondaryCode , d.commentSecondaryCodeDescription FROM Drcomments d WHERE d.drcommentsPK.commentPrimaryCode = 1 ) a WHERE a.EL_ROWNM < 4 and a.EL_ROWNM > 0 ], line 1, column 15: unexpected token [(].
Internal Exception: org.eclipse.persistence.internal.jpa.parsing.jpql.InvalidIdentifierException" 
```

@NamedQuery 是否支持相关子查询？如果是这样，我如何创建一个将执行这种查询的命名查询？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T12:58:07.513

[@NamedQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/NamedQuery.html)不支持 SQL，它只支持 JPQL。您的查询显然不是 JQPL，因为它使用特定于数据库的语法，例如 ROWNUMBER()。此外，在 JPQL 中，子查询仅在 WHERE 和 HAVING 子句中受支持。

请改用[@NamedNativeQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/NamedNativeQuery.html)。

# python - 为什么 ftp 目录列出这么慢？

> ID：11432790
> 
> 赞同：2
> 
> 时间：2012-07-11T12:35:15.673
> 
> 标签：python, ftp

下面的程序给出以下输出：

```
Listing directory ftp://ftp.ncbi.nih.gov/pub/geo/DATA/SeriesMatrix
1.1 Mbyte
229.0 s
38 Kbit/s

Downloading file ftp://ftp.ncbi.nih.gov/pub/geo/DATA/SeriesMatrix/GSE30/GSE30_series_matrix.txt.gz 
2.3 Mbyte
3.1 s
6221 Kbit/s 
```

为什么目录列表与文件下载相比如此缓慢？有什么方法可以加快目录列表的速度吗？

这是代码

```
from __future__ import division
import ftplib
import time

server = 'ftp.ncbi.nih.gov'
dirPath = '/pub/geo/DATA/SeriesMatrix'
filePath = '/pub/geo/DATA/SeriesMatrix/GSE30/GSE30_series_matrix.txt.gz'

ftp = ftplib.FTP(server)
ftp.login('anonymous', 'john.smith@gmail.com')

print 'Listing directory ftp://' + server + dirPath
fileNames = []
t = time.clock()
ftp.retrlines('NLST ' + dirPath, fileNames.append)
t = time.clock() - t
size = sum([len(fileName) + 1 for fileName in fileNames])
print '{0:.1f} Mbyte\n{1:.1f} s\n{2:.0f} Kbit/s'.format(size / 2**20, t, 8 * size / 2**10 / t)

print '\nDownloading file ftp://' + server + filePath
blocks = []
t = time.clock()
ftp.retrbinary('RETR ' + filePath, blocks.append)
t = time.clock() - t
size = sum([len(block) for block in blocks])
print '{0:.1f} Mbyte\n{1:.1f} s\n{2:.0f} Kbit/s'.format(size / 2**20, t, 8 * size / 2**10 / t)

print
raw_input("Press Return to continue") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T12:43:40.870

因为 FTP 服务器需要很长时间才能将目录的内容收集成人类可读的形式。您可以通过直接手动与 FTP 服务器对话来确认这一点。

相反，一个文件的传输不需要服务器端的准备，它只是发送文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:37:30.223

我怀疑传输的数据太少，以至于连接握手和 python 执行时间会影响速度结果。

您*不仅*要测量吞吐量，还要测量代码中的完整往返时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:27:28.363

同样的问题在这里。我的一位同事在家工作，她无法获得目录列表。她等了15分钟，还是没有。我必须等待大约 15 秒才能获取目录，因此我的家用计算机和服务器之间的连接正常。服务器是 Windows XP 上的 FileZilla v0.9.41 beta，客户端是 Win7 上的 Total Commander v8.0。她有一个 120Mbps 的连接。在阅读了一些文章后，我将服务器的参数更改如下： - 我将“内部传输缓冲区大小”（可以在编辑 - 设置 - 杂项中找到）从 32768 增加到 262144，并且 - “套接字缓冲区大小”从 65536 增加到 262144。 -我启用了“MODE Z”文件传输压缩（编辑-设置-文件传输压缩）。从那时起，它就像一个魅力...... 但是我读到您必须在不同的缓冲区大小下测试传输速度，然后您可以选择最佳的缓冲区大小值（我听说一些连接速度较慢的机器不喜欢高缓冲区大小值）。继续努力！

干杯

# php - 通过带有特殊字符的 javascript/PHP 通过 ajax 表单传递 MySQL 数据

> ID：11432792
> 
> 赞同：1
> 
> 时间：2012-07-11T12:35:21.160
> 
> 标签：php, ajax, htmlspecialchars

我最近整理了一个基本的 PHP 网页，其中列出了从 MySQL 表中提取的信息并以各种方式显示它。我希望允许用户向表中添加新项目，编辑列表中的项目并删除列表中的项目而不刷新页面（Ajax）。

*目前是这样；*

*   要添加/编辑文章，请单击提示弹出 ajax 表单的链接，并通过执行以下功能 setEdit(comment) 填充其内容（如果正在编辑）；

```
 <a class="popup-button" title="<?php echo $row['comment']; ?>" onclick="setEdit('<?php if($row['comment']){ echo $row['comment']; } else { echo "Enter comment here..."; } ?>');"><?php echo $row['listitem']; ?></a> 
```

*   setEdit() 注释如下；

```
function setEdit(editcomment)
{
      if(editcomment){ document.getElementById('help-us-comment').value=editcomment; }
} 
```

*   然后，在提交 ajax 表单后，由以下 php 代码处理；

```
 if(isset($_POST['comment_text']))
    $comment=$_POST['comment_text'];

    $sql = "INSERT INTO table SET
    comment='$comment'"; 
```

**问题：**我一直在尝试通过 1、2、3 获取数据库内容，而不会在新行、单引号或双引号中出现问题。我已经尝试了无数次替换标签、htmlspecialchars 和 nl2br 的组合，但没有一半成功 - 现在它已经到了如此复杂和编码/解码的地步，我假设有一种更简单和明显的方式我'米失踪。

主要问题发生在尝试将数据加载到表单中时，通常是表单翻倒并拒绝填充（通常是链接被提取的数据破坏，即单引号或新行）或表单填充特殊字符而不是纯文本进行编辑。

我已尝试尽可能详细地介绍，但如果需要更多信息，我很乐意提供。如果这是一个明显的修复/错误，我也很抱歉，我是个白痴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:14:49.660

这里有两个问题：存储和显示。

要显示，您应该注意`htmlentities`它[是否是安全的 HTML](http://de.php.net/htmlentities)（它会为您完成所有引号替换、html 编码等），以便您的字符串可以安全地显示为纯文本或输入值。

要存储数据，您应该清理查询。您可以使用`mysqli`和[绑定参数](http://mx2.php.net/manual/en/mysqli.prepare.php)，或使用[`mysql_real_escape_string`](http://www.php.net/manual/en/function.mysql-real-escape-string.php)手动转义您的输入。

否则，[向 Bobby Tables 打个招呼](http://www.bobby-tables.com/)；）

# c# - 复制表格行并添加它

> ID：11432802
> 
> 赞同：0
> 
> 时间：2012-07-11T12:35:56.200
> 
> 标签：c#, ms-word, row

我正在使用 Microsoft.Office.Interop.Word ( *v14.0* )。

我有一个word文档。在该 Word 文档中，我创建了一个包含**3 列的****表格**，并在表格中添加了**1 行**。

 ****第一行中的 3 个单元格中的每一个都包含一个**字段**。当用户在我的窗口/表单上按下打印按钮时，我会获取信息（位置，在我的 UI 上下文中具有 3 个属性）并使用 Microsoft Word 模板，我的 Word 文档有这一行，其中包含要填充这些信息的 3 个单元格来自 WPF Window /（与 Windows 窗体相同）。

实际上，问题是，我不知道如何**复制现有的 tablerow**。职位的数量（描述一行）可以**不同**，我搜索了一种方法，如何**复制现有行，其中包含这 3 个字段并将其添加到底部。或者另一种方式是，动态创建一行，以及这些字段，foreach 单元格。**无论如何

我怎样才能做到这一点？

好吧，添加行似乎不是问题（来自 MSDN 的代码）：

```
object beforeRow = this.Tables[1].Rows[1];
this.Tables[1].Rows.Add(ref beforeRow); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:45:24.493

编辑：这样的事情可能会起作用：我不确定应该将什么作为`Range`参数传递给`Fields.Add`。

```
object beforeRow = this.Tables[1].Rows[1];
Row newRow = this.Tables[1].Rows.Add(ref beforeRow);

Field fld = beforeRow.Cells[0].Range.Fields[0];
Range range = fld.Range; // newRow.Cells[0].Range ?
newRow.Cells[0].Range.Fields.Add(ref range, ref fld.Type, ref missing, ref missing); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T23:55:17.673

使用`Range.Copy()`方法。

```
Row beforeRow = this.Tables[1].Rows[1];
beforeRow.Range.Copy();
beforeRow.Range.Paste(); 
```****

# android - 服务在galaxy nexus上崩溃，但不是模拟器

> ID：11432808
> 
> 赞同：2
> 
> 时间：2012-07-11T12:36:16.360
> 
> 标签：android, service

我遇到了一个奇怪的服务问题。它可以在 ICS 仿真器上正确无误地工作。但是当我使用 ICS 4.0.4 在 Galaxy Nexus 上启动它时，我观察到服务的奇怪崩溃，没有任何堆栈跟踪。以下是我得到的所有内容：

```
07-11 16:26:37.758: INFO/ActivityManager(136): Process com.test.service (pid 3899) has died.
07-11 16:26:37.758: WARN/ActivityManager(136): Scheduling restart of crashed service com.test.service/.MyService in 20000ms 
```

我用谷歌搜索但没有发现任何想法。可能与内存压力有关吗？我应该做什么？

**UPD**

PS 如果有任何意义，我会从 onStartCommand() 启动一个后台线程，并且该线程可以无限工作。

PPS 我尝试在单独的进程中启动服务，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:15:14.080

我的理解是，系统偶尔会删除/杀死它当时认为不必要的进程。但是，如果`onStartCommand`返回`START_STICKY`，它将在它被杀死后立即重新启动......我看不到杀死这些进程的意义，尽管我想它在极端情况下会有所帮助。模拟器行为可能会有所不同。

假设您的服务***实际上没有崩溃***（logcat 中应该有某种堆栈跟踪），为了防止系统如此轻易地杀死该服务，它必须作为[前台](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29 "开始前景")服务启动。

# php - 在循环时推入数组

> ID：11432813
> 
> 赞同：3
> 
> 时间：2012-07-11T12:36:30.827
> 
> 标签：php, arrays, loops, foreach

这是我的代码片段。我知道通常建议不要`array`在循环时修改它，但是在这种情况下，我认为这是正确的做法并可以节省资源。

```
$levels = array($post);
foreach ($levels as $level) {
    $next_sibling = get_next_sibling_page($level);
    if ($next_sibling) {
        $next_page = $next_sibling;
        break 1;
    } else if ($level->post_parent) {
        array_push($levels, get_page($level->post_parent));
    }
} 
```

这个想法是，`foreach`将用 push 的值重复`if ($level->post_parent)`，我可以看到该`if`语句正在解析为 true，并且`array`正在被推送，但是`foreach`不会重复，只运行一次。

有谁知道我如何递归地继续我的 foreach 直到`$level->post_parent`解析为假？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:43:41.497

通过引用修改在 foreach 传递数组中使用的数组。

```
foreach (&$levels as $level) {
   .....
} 
```

# ios - cordova 1.7 iOS 录音插件

> ID：11432815
> 
> 赞同：1
> 
> 时间：2012-07-11T12:36:43.083
> 
> 标签：ios, cordova, phonegap-plugins, avaudiorecorder

我已经使用 phonegap/cordova 1.7 在 IOS 上实现了音频记录插件。IOS5.1

我在标准 media.startrecord() 函数上使用它，因为我想更改比特率以减小文件的大小。

它在模拟器中运行良好。

在真正的 iphone 上，它成功记录一次，但随后拒绝.. 它似乎可以工作，但在播放时我收到错误 4 MediaError.MEDIA_ERR_NONE_SUPPORTED

我创建了一个只有基本记录和播放的新项目，但我仍然遇到同样的问题。

这是测试代码 - 它非常基本 - 只需几个链接即可记录两个单独的文件并播放它们。setTimeout 每次只记录几秒钟的音频。

我用谷歌搜索，直到我的指纹磨损了，但还没有找到解决办法。

您可以提供的任何见解都将非常感激。

我想知道我是否未能正确关闭录制/播放？还是在 sim v iPhone 上引用的文件不同？

非常感谢！

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
<meta charset="utf-8">
<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />       

<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript">
       var fs,mediaRec=null, recInterval,recordSettings = {"FormatID": "kAudioFormatULaw","SampleRate": 16000.0,"NumberOfChannels": 1,"LinearPCMBitDepth": 16};

    function recfile1() {recordAudio("test.wav");}
    function recfile2() {recordAudio("test2.wav");}
    function success(){console.log("ok");}
    function recordAudio(fname) {
        fs.root.getFile(fname, {create: true, exclusive: false}, function(entry){            
            mediaRec = new Media(entry.fullPath, success, function(){alert("failed");});
            mediaRec.startRecordWithSettings(recordSettings);
            recInterval = setTimeout(function() {
                mediaRec.stopRecordWithSettings();
            }, 2000);
        }, function(){console.log("error");});
    }

    function playfile(fname) {
        var my_media;
        fs.root.getFile(fname, {create: false, exclusive: false}, 
            function success(entry) {
                my_media = new Media(entry.fullPath,function(){console.log("ok");},function(err){alert(err.code+" "+err.message);});
                my_media.play();
            }, 
            function() {
                console.log("not found file");
            }
        );
    }

    function onBodyLoad() {     
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady(){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){fs=fileSystem;}, function(){console.log("failed");});
    Media.prototype.startRecordWithSettings = function(options) {
        Cordova.exec(null, null, "AudioRecord","startAudioRecord", [this.id, this.src, options]);
    };
    Media.prototype.stopRecordWithSettings = function() {
        Cordova.exec(null, null, "AudioRecord","stopAudioRecord", [this.id, this.src]);
    };
}
</script>
</head>
<body onload="onBodyLoad()">
<a onclick="playfile('test.wav');">play</a>
    <a style='margin-top:100px;' onclick="recfile1();">record 1</a>
    <a style='margin-top:100px;' onclick="recfile2();">record 2</a>
    <a onclick="playfile('test2.wav');">play2</a>
</body>
</html> 
```

# scala - 处理插入 PlayFramework 2.0 Scala 上的错误

> ID：11432816
> 
> 赞同：2
> 
> 时间：2012-07-11T12:36:46.683
> 
> 标签：scala, playframework-2.0, anorm

我在使用 Play Framework 2.0 中的异常向数据库插入（或更新）新数据时遇到问题。我的模型是在以下代码中定义的博客文章：

```
case class Post(title: String,
    content: String,
    created: String,
    lastUpdate: String,
    writer: Long,
    id: Long = 0) 
```

然后我在插入函数上执行此操作：

```
def create(title: String, content: String, userId: Long) = {
  DB.withConnection { implicit connection =>
    SQL("INSERT INTO post (title, content, created, writer) VALUES ({title}, {content}, NOW(), {writer})")
        .on(
          'title -> title,
          'content -> content,
          'writer -> userId).executeUpdate()
} 
```

和形式：

```
val postForm = Form(
  tuple(
    "title" -> nonEmptyText,
    "content" -> nonEmptyText)) 
```

我在表单中没有`userId`字段，因为我不相信用户在他们自己的 ID 上的输入。我从会话中得到它。无论如何，这就是为什么我不能直接将验证代码放在`postForm`'s 声明中（因为我认为我无法从表单和模型访问会话）。这就是它变得丑陋的时候。如果帖子无效，则 anorm 会引发异常，因此我需要在 fold 函数之后将错误传递给用户，例如：

```
postForm.bindFromRequest.fold(
  formWithErrors => BadRequest(views.html.post.newPost(formWithErrors)),
    newPost => {
      try {
        val userId = request.session.get("id").getOrElse("0")
        models.Post.create(newPost._1, newPost._2, userId.toLong)
      } catch {
        case e => BadRequest(views.html.post.newPost(postForm.fill(newPost)))
      }
    Redirect(routes.Application.index)
}) 
```

首先，`try-catch`它很丑。第二，`BadRequest`电话打不通。我究竟做错了什么？处理插入/更新错误的最佳方法是什么？我对登录表单也有同样的问题，但它并没有那么糟糕，因为我实际上可以在登录表单声明时处理错误。

之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:00:23.537

假设错误是在数据库中不存在的完整性约束（如 0）上，那么这样的东西呢？

```
 postForm.bindFromRequest.fold(   
        formWithErrors => BadRequest(views.html.post.newPost(formWithErrors)),
        newPost => {
            request.session.get("id").map({ userId=> 
               models.Post.create(newPost._1, newPost._2, userId.toLong)       
               Redirect(routes.Application.index) 
            }).getOrElse{
                BadRequest(views.html.post.newPost(postForm.fill(newPost))) 
            }
        }   
    ) 
```

您不会向异常提供无效信息，也不会收到错误...

ps：我现在手头没有 scala 编译器来检查语法，我可能错过了括号或将括号与卷曲混合在一起:)

# shared-memory - 带有 IPC_EXCL 的 shmget

> ID：11432823
> 
> 赞同：0
> 
> 时间：2012-07-11T12:37:01.043
> 
> 标签：shared-memory

我在使用 shmget() 管理内存段时遇到问题。根据手册页，如果同时设置了 IPC_CREAT 和 IPC_EXCL 标志，**如果要求 shmget 为已经存在的键创建段，则它应该会失败**。

我所看到的是 shmget 无论如何都会为同一个键（使用新的 shmid）创建一个新段。下面的代码说明了这个问题。我正在运行它的两个实例，一个处于“创建者”模式，一个处于“客户端”模式。

```
./test 10 0
./test 10 1 
```

创建者为 key=10 分配一个内存段，然后附加到它。客户端也附加到该段。运行 ipcs -m 我可以看到该段存在并且附加了两个进程。

然后我让创建者销毁该段，正如预期的那样，ipcs 显示它被标记为销毁，仍然附加 1 个进程。奇怪的是，如果我再次使用相同的键启动创建者，它会创建一个新的段而不是因为段已经存在而失败？

谢谢你的帮助！

```
#include <sys/shm.h>
#include <sys/stat.h>
#include <errno.h>

#include <stdlib.h>
#include <vector>
#include <iostream>
#include <stdexcept>
using namespace std;

int main( int argc, char** argv )
{
   cout << "usage: " << argv[0] << " <key> <mode (0=creator 1=client)>" << endl;
   if ( argc < 3 ) return 0;

   int key  = atoi( argv[1] );
   int mode = atoi( argv[2] );

   cout << "key=" << key << endl;
   cout << "mode=" << mode << endl;

   char c;
   int shmid=-1;
   int size = 100; // bytes

   try
   {
      if ( mode == 0 ) // creator
      {
         cout << "creating segment" << endl;
         int flags = ( IPC_CREAT | IPC_EXCL | 0666 );
         shmid = shmget( key, size, flags );

         if ( shmid== -1 )
            throw runtime_error("failed to create segment");

         cout << "created: shmid=" << shmid << endl;
      }
      else if ( mode == 1 )
      {
         shmid = shmget( key, 0, 0 );

         if ( shmid== -1 )
            throw runtime_error("failed to load");

         cout << "loaded: shmid=" << shmid << endl;
      }

      cout << "attach? (press key to continue)" << endl;
      cin >> c;

      void* data = shmat( shmid, NULL, 0 );

      if ( data == (void *) -1 )
         throw runtime_error("failed to attach");

      cout << "attached to id=" << shmid << endl;

      cout << "destroy? (press key to continue)" << endl;
      cin >> c;

      if ( shmctl( shmid, IPC_RMID, NULL ) == -1 )
         throw runtime_error("failed to destroy");

      cout << "destroyed" << endl;
   }
   catch( const exception& e )
   {
      cout << e.what() << " errno=" << errno << endl;
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:28:56.257

您应该更密切地注意`ipcs`. 将您的示例代码与`10`.

服务器已创建段：

```
$ ipcs -m
------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x0000000a 1470791680 hristo     666        100        1 
```

客户端已附加，服务器已将段标记为销毁：

```
$ ipcs -m
------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x00000000 1470791680 hristo     666        100        1          dest
^^^^^^^^^^ 
```

由于预计没有新进程能够通过其密钥找到并附加此类段，因此密钥被归零。这就是为什么您可以使用相同的密钥创建一个新的。

# xml - 使用没有命名空间的 xsl 处理 xsd

> ID：11432829
> 
> 赞同：0
> 
> 时间：2012-07-11T12:37:16.453
> 
> 标签：xml, xslt, xsd, schema

我在使用 xsl 处理 xsd 时遇到问题。我的 xsd 文件开始：

```
<schema targetNamespace="http://www.bleble.com"
xmlns="http://www.w3.org/2001/XMLSchema">
<complexType name="blabla">
... 
```

所以没有命名空间可以通过 xsl 识别标签。

我不能修改xsd文件，因为有很多代码和很多文件，所以唯一可能的方法是创建一个合适的xsl转换文件。

我一直在尝试添加命名空间：

```
xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

不将其添加到标签：

```
<complexType name="blabla"> 
```

但它不适用于 xml 标准。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:50:44.847

**这是 XPath 和 XSLT 中最常见的常见问题**- 搜索“XPath 中的默认名称空间”，您会发现很多很好的解释。

快速回答是，要选择默认命名空间中的名称不带前缀的元素（其命名空间uri 不是空字符串），您需要在 XSLT 代码中将前缀绑定到命名空间并引用任何不带前缀的元素带有如此定义前缀的名称。

**在这种特殊情况下**：

```
//complexType 
```

什么都不选择，因为 XPath 处理器正在寻找一个名为`complexType`“无命名空间”的元素，但文档中的所有元素都在`"http://www.w3.org/2001/XMLSchema"`命名空间中。

您已经将前缀绑定`xsd`到源 XML 文档的默认命名空间——然后使用：

```
//xsd:complexType 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:39:26.663

你糊涂了！

你说：“所以没有命名空间来识别 xsl 的标签”。但是有一个命名空间——命名空间是[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)。没有前缀，但前缀对 XSLT 无关紧要；为了编写 XSLT 处理代码，您唯一需要知道的是名称空间 URI。例如，如果你想匹配一个 complexType 元素，你需要编写等价于

```
<xsl:template match="ajkt:complexType" xmlns:ajkt="http://www.w3.org/2001/XMLSchema"/> 
```

当然，您通常会使用比 ajkt 更容易识别的前缀（可能是 xs 或 xsd），并且您通常会将声明放在 xsl:stylesheet 元素上，但这只是装饰性的。

# asp.net-mvc-4 - 页眉和页脚不断显示模式弹出窗口

> ID：11432831
> 
> 赞同：0
> 
> 时间：2012-07-11T12:37:19.973
> 
> 标签：asp.net-mvc-4

我只想在使用模态窗口时显示基本的 HTML，而不需要我的主页的页眉和页脚。如何在 MVC3/4 中做到这一点？

这是正在发生的事情的一个例子...... ![出现在模态窗口中的页眉和页脚](../Images/a1dbaa82503993bdca119a3c261fb9c6.png)

不知道为什么这样做。
这是一个基本的 jquery 模态窗口调用

```
$(function () {
        //$('a.tempDlg').live("click", function (event) { loadDialog(this, event, '#edit-set'); });
        //$('a.AddPatDlg').live("click", function(event) {loadDialog(this, event, '#addPat');});
        //debugger;
        $('a.addEncounter').live("click", function (event) { loadDialog(this, event, '#DisplayUniqueEncounters'); });
        $('a.SearchEncounter').live("click", function (event) { loadDialog(this, event, '#searchEncounter'); });
        //$("#sID").click(function (event) { loadDialogByClick(this, event, '#searchEncounter'); });

    });
function loadDialog(tag, event, target) {
            //debugger;
            event.preventDefault();
            var $loading = $('<img src="<%=Url.Content("~/Images/ajax-loader.gif")%>" alt="loading" class="ui-loading-icon">');
            var $url = $(tag).attr('href');
            var $title = $(tag).attr('title');
            var $dialog = $('<div></div>');
            $dialog.empty();
            $dialog
            .append($loading)
            .load($url)
            .dialog({
                autoOpen: false
                   , title: $title
                   , width: 1200
                   , modal: true
                   , minHeight: 550
                   , show: 'fade'
                   , hide: 'fade'
            });

            $dialog.dialog('open');
        }; 
```

我以前做过这个，不包括页眉和页脚，我忘记了它是怎么做的？我一定是错过了一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:18:20.997

您还可以在页面顶部设置 Layout = null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:55:17.843

这是正确的......我想为这个答案给予 nemesv 功劳，但他没有回答这个问题。所以我只会说他是对的。您需要返回一个 partialView()，而不仅仅是一个常规视图……返回一个常规视图总是会获得所有其他 MVC 标记。谢谢...

# ruby-on-rails - CSV 加载程序错误

> ID：11432832
> 
> 赞同：0
> 
> 时间：2012-07-11T12:37:20.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, data-mining, weka

我正在尝试上传 CSV 文件并收到以下错误：

```
weka csv loader failed to load csv file
Wrong number of values. Read 2, expected 5, read token[EOL], line 3 
```

这是我的数据样本：

```
1439,"@shanli4m sagen wirs so ich bin fuer ALLE andern AUSSER SPANIEN hahahhaah :-)",219886226486992900,"2012-07-08 08:17:40.079310","2012-07-08 08:17:40.141548"
1440,"ich bin für schland=schland verliert ich bin für italien=italien verliert verkehrte welt -,-",219727870568824830,"2012-07-08 08:17:40.145610","2012-07-08 08:17:40.148478" 
1441,"RT @orbisclaudiae: ""Ich bin für Spanien, weil ich finde, dass die besser aussehen."" (Claudia H., 29, Fußballexpertin)",219544383773618180,"2012-07-08 08:17:40.151433","2012-07-08 08:17:40.153887" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:25:19.133

我认为这是由于第三行的问题：

```
"RT @orbisclaudiae: ""Ich bin für Spanien 
```

正如您在 'Ich' 之前看到的，有两个双引号`""`。这将关闭第一部分 ( `"RT @orbisclaudiae: "`)，Weka 需要逗号 ( `,`) 或行尾。由于它后面没有逗号，Weka 假定该行已完成，然后仅返回 2 个值而不是 5 个。因此，要解决此问题，请检查您的数据是否存在任何不一致之处，例如多个双引号。您可以通过将推文括在单引号 ( `'`) 中来轻松解决此问题。Weka 很可能会将单引号中的所有内容视为 1 个字符串。

# jquery - 如何显示 $.ajax 调用返回的错误？

> ID：11432834
> 
> 赞同：15
> 
> 时间：2012-07-11T12:37:28.643
> 
> 标签：jquery

我有一个需要永远加载的代码，最后当我放置错误处理程序时它显示警报，但我需要知道它返回了什么错误？我怎么知道？

**编辑：我收到请求的 url 未找到，但我确定 url: 是我主机上的有效 URL，可能有什么问题？我什至可以直接在浏览器中访问它。**

```
// process logging in a user from sidebar
$("#login-form").submit(function(event) {
    $('input:submit').attr("disabled", true);
    $("p.form-result").empty();
    $('p.form-submit').after('<p class="loading"><img src="<?php bloginfo('template_directory'); ?>/img/loading.gif" alt="" /></p>');
    $.ajax({
        url: '<?php bloginfo('template_directory'); ?>/ajax/login.php',
        type: 'POST',
        data: $(this).serialize(),
        dataType: 'json',
        success: function(data){
            $('.loading').remove();
            $('input:submit').attr("disabled", false);
            if (data.status) {
                // success
                $("p.form-result").html('<span class="success">' + data.message + '</span>');
                window.setTimeout(function(){location.reload()},3000);
            } else {
                // error
                $("p.form-result").html('<span class="error">' + data.message + '</span>');
            }
        },
        error: function(data){
            alert('error');
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T12:46:22.367

`error`jQuery函数的事件`$.ajax`接收3个参数

```
error : function(jqXHR, textStatus, errorThrown){

} 
```

这是此事件的[jQuery 文档](http://api.jquery.com/jQuery.ajax/)：

> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

您将能够知道参数有什么错误`textStatus`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-14T12:11:51.233

当 ajax 调用中包含一些无效参数时，将执行 ajax 调用中的错误事件。以下功能将通过引发错误并在警报中显示错误定义来帮助您理解错误代码。

```
error: function(xhr, ajaxOptions, thrownError){
                    alert(xhr.status);
                }, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:42:37.903

使用错误函数的数据参数来警告错误及其属性。它模仿了您的实际错误。

```
error: function(data){
     alert(data);
} 
```

根据此问题的（[$.ajax 实用程序中的 JQuery 错误选项](http://stackoverflow.com/questions/95600/jquery-error-option-in-ajax-utility)）答案，数据（错误）对象的可能值

```
timeout - when your specified timeout is exceeded
error - http error, like 404
notmodified - when requested resource was not modified since last request
parsererror - when an xml/json response is bad 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-13T21:14:31.933

改变这个

```
url: '<?php bloginfo('template_directory'); ?>/ajax/login.php', 
```

这样

```
url: '<?php bloginfo("template_directory"); ?>/ajax/login.php', 
```

:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-18T15:15:48.237

您无法使用警报语句检查对象数据

使用 console.log(data) 检查错误

```
error: function(data){
     console.log(data);
} 
```

# r - 在 R 中使用 gridExtra 有条件地格式化表格

> ID：11432836
> 
> 赞同：0
> 
> 时间：2012-07-11T12:37:30.583
> 
> 标签：r, formatting, conditional, highlighting, tabular

最近我接触了R`grid.table`包`gridExtra`中的函数。我只是想让我的数据框看起来“更好”，而不是简单地将它们打印到控制台。

默认设置工作得很好，但现在我越来越贪婪了。我正在寻求帮助，因为我不确定以下两种格式设置是否可行。我阅读了文档，但仍然不确定这是否会发生......

1.  如果满足特定条件，则有条件地格式化/突出显示行和列。我的想法是我可以突出显示某一行以使其从表格的其余部分中脱颖而出。
2.  是否可以离开表格中的第一列并将其他所有内容居中对齐？

简而言之，我真的很喜欢将数据框格式化为表格是多么容易，但现在我希望我可以做一些额外的格式化技术来将表格放到我需要的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:44:50.977

刚刚向 的作者 Baptiste 发送了电子邮件`gridExtra`，该功能目前不可用。

然而，他说，一旦`gtable`软件包正式发布，他计划对 grid.table 进行更新，这将使自定义输出变得更加容易。但也说不要“屏住呼吸”……但他也建议随意使用源代码并对其进行调整。

但是我也一直在寻找突出显示表格中的行的方法，并使用包`dprint`来做到这一点。希望有帮助。

# cucumber - Cucumber：@wip 标志对 Guard 的行为很奇怪

> ID：11432840
> 
> 赞同：0
> 
> 时间：2012-07-11T12:37:48.210
> 
> 标签：cucumber, scenarios

> **可能重复：**
> [如何让 cucumber/guard 过滤 @wip 之类的标签？](https://stackoverflow.com/questions/9193120/how-do-you-get-cucumber-guard-to-filter-on-tags-like-wip)

我有以下场景：

```
Feature: List projects
  In order to manage projects
  As a user
  I want to see a list of them

  Background:
    Given I am logged in

  @wip
  Scenario: I go to the projects
    When  I go to the projects
    Then  I should see a list of projects

  Scenario: I go to the projects2
    When  I go to the projects
    Then  I should see a list of projects 
```

运行它时（通过保存它以便由 Guard 调用它），只有第二个被执行，正如预期的那样。但是当保存任何其他功能时（这也使此功能运行），@wip 标记似乎被忽略了。这是正常行为吗？

**更新**

通过使用`--tags ~@ignore`，我可以禁用尽可能多的功能。我仍然没有真正了解@wip 是如何工作的（或者更好的是：为什么它以它的工作方式工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:52:38.503

[您可以使用以下命令运行没有此标记](https://github.com/cucumber/cucumber/wiki/Tags)的所有场景：

```
cucumber --tags ~@ignore 
```

# android - android - 如何在 Listview 中设置按钮参数

> ID：11432844
> 
> 赞同：0
> 
> 时间：2012-07-11T12:38:07.453
> 
> 标签：android, android-listview

我以编程方式添加了按钮具有列表视图的页脚视图。现在我想设置按钮的参数并将按钮重力设置为中心垂直。我按照以下方式做了，但它不起作用。如何实现这个？

```
 btnMoreUpcomingExits = new Button(this);
    btnMoreUpcomingExits.setText("More Upcoming Exits");
    btnMoreUpcomingExits.setBackgroundResource(R.layout.moreupebtn_widget);
    btnMoreUpcomingExits.setLayoutParams(new ListView.LayoutParams(ListView.LayoutParams.WRAP_CONTENT, ListView.LayoutParams.WRAP_CONTENT));
    btnMoreUpcomingExits.setTextColor(Color.WHITE);
    btnMoreUpcomingExits.setTypeface(null, Typeface.BOLD);
    btnMoreUpcomingExits.setGravity(Gravity.CENTER_HORIZONTAL);
    btnMoreUpcomingExits.setOnClickListener(btnMoreUpcomingExitsListener);
    getListView().addFooterView(btnMoreUpcomingExits); 
    setListAdapter(new UpcomingExitsResultsListViewAdapter(this)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:49:09.203

检查这个它可能对你有帮助。

[检查此链接](http://www.codemobiles.com/forum/viewtopic.php?t=876)

您可以`WindowManager.LayoutParams`用来设置`button`in 的属性`listview`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:49:34.667

尝试这个：

```
 LinearLayout layout=new LinearLayout(getApplicationContext());
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
            layout.setOrientation(LinearLayout.VERTICAL);
            btnMoreUpcomingExits = new Button(this);
            btnMoreUpcomingExits.setText("More Upcoming Exits");
            btnMoreUpcomingExits.setBackgroundResource(R.layout.moreupebtn_widget);
            btnMoreUpcomingExits.setLayoutParams(params);
            btnMoreUpcomingExits.setTextColor(Color.WHITE);
            btnMoreUpcomingExits.setTypeface(null, Typeface.BOLD);
            btnMoreUpcomingExits.setGravity(Gravity.CENTER_HORIZONTAL);
            layout.addView(btnMoreUpcomingExits);
            btnMoreUpcomingExits.setOnClickListener(btnMoreUpcomingExitsListener);
            getListView().addFooterView(btnMoreUpcomingExits); 
            setListAdapter(new UpcomingExitsResultsListViewAdapter(this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:42:39.503

你目前有

```
btnMoreUpcomingExits.setGravity(Gravity.CENTER_HORIZONTAL); 
```

我认为这是一个疏忽，您的意思是 CENTER_VERTICAL？这将垂直对齐应该已经在做的按钮内的文本，因此您的问题似乎令人困惑。您是在问如何垂直对齐按钮本身吗？如果是这样，您需要在按钮父级上设置重力。

至于参数，您已经在设置布局参数。你还想做什么？您的目标应该是在您的问题中更加具体，以便更容易确定您正在尝试做什么。

# excel - 如何使用 VBA 在 Excel 中添加新工作表？

> ID：11432852
> 
> 赞同：3
> 
> 时间：2012-07-11T12:38:37.390
> 
> 标签：excel, ms-access, vba

我是 VBA 编码的新手。我想用不同的数据填充一个 excel 表。要求是将数据提取到同一 Excel 的不同工作表中。我需要使用下面相同类型的代码来维护整个代码的完整性。

```
outfile = "c:\" & Format(Date, "yyyymmdd") & "activedirectorydata.xls"
DoCmd.OutputTo acOutputQuery, "**MoActiveDirectoryData**", acFormatXLS, outfile, False 
```

我能够从视图/查询中获取数据`MoActiveDirectoryData`到一张表中。我应该如何从另一个视图/查询中获取数据到同一个 excel 的不同工作表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:22:24.183

如果您使用 DoCmd.TransferSpreadsheet，只要您要导出的表或查询的名称与已存在的工作表不同，就会在同一个文件中创建工作表。

```
outfile = "c:\" & Format(Date, "yyyymmdd") & "activedirectorydata.xls"
''Sheet is called Query1
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel8, "Query1", outfile 
''New sheet called Query2
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel8, "Query2", outfile 
```

# c# - 以编程方式创建虚拟网络接口

> ID：11432860
> 
> 赞同：1
> 
> 时间：2012-07-11T12:39:02.890
> 
> 标签：c#, java, networking, interface, virtual

是否可以使用 Java 或 C# 添加虚拟网络接口。我需要为我的计算机设置一组 IP 用于数据挖掘应用程序，但我没有足够的 NIC（我还不想购买更多）。

我需要从应用程序中完全控制虚拟卡（创建、删除、设置 IP，也许重定向流量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:42:43.070

我不确定您对此是否有纯 Java 解决方案。

你有几种选择。
1\. 使用可以为您执行此操作的脚本，在 perl\shell 中编写此解决方案将是 4-5 行。
2\. 您可以打开与您机器的 ssh 连接并从 Java 运行命令。我有这样的实用程序，它使用 trilead-ssh2。

要使用 Maven 获取它，您可以使用：

```
 <dependency>
        <groupId>com.trilead</groupId>
        <artifactId>trilead-ssh2</artifactId>
        <version>build213-svnkit-1.3-patch</version>
    </dependency> 
```

例如，这样你应该打开一个连接：

```
public static Connection newConnectionWithPassword(String host, String username, String passwd) {
    Connection newConn = new Connection(host);
    try {
        newConn.connect(); // Ignoring ConnectionInfo returned value.
        newConn.authenticateWithPassword(username, passwd);
        return newConn;
    } catch (IOException ioe) {
        newConn.close();
        ioe.printStackTrace();
        return null;
    }
} 
```

然后运行你的命令，你可以：

```
this.session = conn.openSession();
this.session.execCommand(this.cmd); 
```

您现在可以使用操作系统命令从 java 创建虚拟接口。顺便说一句，您可以使用 NetworkInterface.class 测试结果，它可以查询您机器上的网络接口。

祝你好运。

# android - 用填充打开文件并在驱动器上签名，android

> ID：11432861
> 
> 赞同：1
> 
> 时间：2012-07-11T12:39:03.560
> 
> 标签：android

如何在 android 上配置驱动器以使用填充和签名应用程序打开我的 pdf 文件？注意：选项中不出现填写和签名。谢谢。

# php - html php打印错误

> ID：11432865
> 
> 赞同：0
> 
> 时间：2012-07-11T12:39:20.277
> 
> 标签：php, html, loops, html-table

我有以下脚本，它是一个订单列表：

```
<?php
$manifest_query = tep_db_query("SELECT o.franchise_id, o.orders_id, 
    o.customers_id, o.delivery_name, o.delivery_street_address [...]");
while ($manifest = tep_db_fetch_array($manifest_query)){
?>
<tr>
<td height="50" align="center"><?php echo $manifest['orders_id'] ;?></td>
<td cellpadding="2"><?php echo $manifest['delivery_name'] .'<br> '. 
    $manifest['delivery_street_address'] .'<br> '. 
    $manifest['delivery_city'].'<br> '. 
    $manifest['delivery_postcode'].'<br> '. 
    $manifest['delivery_state'].'<br> '. $manifest['customers_telephone'] ;?>
</td>

<?php
$products_query = tep_db_query("select products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");
while ($products = tep_db_fetch_array($products_query)) {
?>

<td><?php echo$products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . 
    '<br> ' . '&nbsp;&nbsp;'.$products['products_model'] .'<br>';?></td>
<?php
}
?>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td colspan="2"></td>
</tr>

<?php
}
?> 
```

打印`$products`变量的单元格每次都会重复，作为一个新的 td，但是如果有多个产品，我需要它来打印一个 td 中的所有产品。我是不是有点糊涂了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:46:35.237

试试这个：

```
<tr>
<td height="50" align="center"><?php echo $manifest['orders_id'] ;?></td>
<td cellpadding="2"><?php echo $manifest['delivery_name'] .'<br> '. $manifest['delivery_street_address'] .'<br> '. $manifest['delivery_city'].'<br> '. $manifest['delivery_postcode'].'<br> '. $manifest['delivery_state'].'<br> '. $manifest['customers_telephone'] ;?></td>
<td>
<?php
$products_query = tep_db_query("select orders_products_id, orders_id, products_id, products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");

while ($products = tep_db_fetch_array($products_query)) {
?>

<?php echo$products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . '<br> ' . '&nbsp;&nbsp;'.$products['products_model'] .'<br>';?>
<?php
}
?>
</td>
<td>&nbsp;</td>
<td>&nbsp;</td>

<td>&nbsp;</td>

<td colspan="2"></td>

</tr>

<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:46:46.757

您的循环中有`<td>`标签。将它们移到循环之外，这样您就不会为每个产品生成一个新单元格。

# javascript - 如何减少 setTimeOut 中的“当前”时间？

> ID：11432868
> 
> 赞同：0
> 
> 时间：2012-07-11T12:39:28.757
> 
> 标签：javascript

如何减少 setTimeOut 中的“当前”时间？例如，我从 100 秒开始倒计时，40 秒后（所以在 60 秒）我单击一个按钮，它立即减少到 50 秒（-10 秒）。

下面示例中的链接在 100 秒后启用。基本上，我正在寻找一种方法来减少每次按下按钮时（当前位置）倒计时的 10 秒。

```
function enableLink() {
    setTimeout('enableAnchor( "anchor0", "mylink.php" )', 100000);
} 
```

如果这不可能，是否有任何语言或库（也许是 JQuery 或 AJAX？）可以让我这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:50:16.500

不要将计时器值用于任何实际逻辑，请手动执行：

```
var msLeft = 100000,
    prev = new Date();

     //This timer is simply polling how much time has passed using accurate methods and reduces it accordingly from msLeft 
var timerId = window.setInterval( function() {
    var cur = new Date(),
        progress = cur - prev;

    prev = cur;
    msLeft -= progress;

    if( msLeft <= 0 ) {
        window.clearInterval(timerId);
        counteddown();
    }
}, 50 ); 

document.onclick = function() {
    msLeft -= 10000; //Each click reduces 10 seconds from the countdown
};

document.onkeyup = function() {
    msLeft += 10000; //Each keyup adds 10 seconds to the countdown
}; 
```

jsfiddle 演示[http://jsfiddle.net/JgzZQ/2/](http://jsfiddle.net/JgzZQ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:10:32.557

实现这一点的一种方法是使用一种看起来很像 setTimeout 的方法，但返回一个对象，该对象的方法允许您减少时间。这消除了继续轮询以查看时间是否减少的需要，仅在必要时重新分配计时器：

```
function adjustableTimer(action, initialMs){   
    return {
        timerId: setTimeout(action, initialMs),
        startTime: new Date(),
        initialMs: initialMs,
        action: action,
        reduce: function(howMuch){
            var elapsedTime = new Date() - this.startTime;
            var remainingTime = this.initialMs - elapsedTime;
            var newTime = remainingTime - howMuch;
            clearTimeout(this.timerId);            
            this.timerId = setTimeout(this.action,newTime);
        }
    };       
} 
```

用法：

```
var timer = adjustableTimer(function(){ alert("Im finished"); }, 10000); // initially 10 seconds
// when wanting to reduce:
timer.reduce(1000); // reduce timer by 1 second 
```

现场示例：http: [//jsfiddle.net/gKjEt/](http://jsfiddle.net/gKjEt/)

# android - Android SDK：活动组 onBackButtonPressed 不起作用

> ID：11432871
> 
> 赞同：0
> 
> 时间：2012-07-11T12:39:45.363
> 
> 标签：android, android-activity

我正在使用活动组在一个选项卡下的多个活动之间导航。

但是，当我进入第一个子活动并按回时，我收到以下错误：

> java.lang.NullPointerException 在 com.android.TopActivity.onBackPressed(TopActivity.java:208) 在 android.app.Activity.onKeyUp(Activity.java:1904)

这是它崩溃的方法：

```
@Override
    public void onBackPressed()
    {
        int length = idList.size();
        if (length > 1)
        {
            Activity current = getLocalActivityManager().getActivity(
                idList.get(length -1));
            //Log.i("CURRENT ACTIVITY =","CURRENT ACTIVITY "+current.getClass().getName());
            current.onBackPressed();

        }
    } 
```

我使用以下内容设置了 idList：

```
 idList.add("HomeActivity");
    idList.add("TopActivity"); 
```

我正在尝试调用 TopActivity 类中的 onBackPressed 方法，但它一直在崩溃。我究竟做错了什么？我是否将正确的值放入 idList 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:51:20.317

从您的描述中很难看出，但听起来您可能会更好地通过使用 Fragments 来实现您的设计（假设您的目标是具有适当支持库的平台版本）。

也就是说，使用`getLocalActivityManager().getCurrentActivity()`而不是尝试维护某种类型的 ID 堆栈怎么样？看来您可能还是想将后按发送到“当前”活动，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:41:53.963

试试这个：

```
super.onBackPressed(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:57:15.450

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        //your code goes here
    }
    return super.onKeyDown(keyCode, event);
} 
```

# c# - 将 PowerPoint 查看器包含到我的 WPF 应用程序中

> ID：11432875
> 
> 赞同：1
> 
> 时间：2012-07-11T12:40:00.520
> 
> 标签：c#, .net, wpf, powerpoint

我想将我的 PowerPoint 演示文稿显示到 WPF 应用程序中。

要求：

*   免费（PC 上已安装 PowerPoint 除外）
*   必须集成到我的 WPF 应用程序中，而不是外部应用程序
*   用户必须有可能前进到下一张幻灯片，或返回
*   显示动画

我尝试了 2 个解决方案：

*   使用 DSOFramer，但他们建议不要再使用它，而且它不支持 2010 文件。这是不行的。
*   使用 Microsoft.Office.Interop.PowerPoint，但它将 PowerPoint 作为外部应用程序打开...
*   尝试了该工具[http://www.edrawsoft.com](http://www.edrawsoft.com)但它的许可证成本约为 3500 美元

我不知道该去哪里......谢谢。

编辑：

几个月后，我能得到所有我想要的（动画、声音等）的唯一“好”解决方案是嵌入一个 C++ 控件......如果有人有 WPF 的解决方案并且它是管理的，我想要知道。

至于给出的答案：

*   [http://support.microsoft.com/kb/304662](http://support.microsoft.com/kb/304662)：使用 2007 + 文件与旧文件时存在一些问题...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:28:21.803

这些链接可能对您有所帮助

1.  [http://support.microsoft.com/kb/304662](http://support.microsoft.com/kb/304662)
2.  [在 C# Win Form 中嵌入 PowerPoint Viewer](https://stackoverflow.com/questions/1259369/embed-powerpoint-viewer-in-c-sharp-win-form)

我发现了更多关于在 WPF 中托管 Powerpoint 的代码项目文章

[http://www.codeproject.com/Articles/118676/Embedding-PowerPoint-presentation-player-into-a-WP](http://www.codeproject.com/Articles/118676/Embedding-PowerPoint-presentation-player-into-a-WP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:21:46.287

不是最干净的解决方案，但我们必须在几年前在 .NET 1.1 应用程序中使用。

**1.)**如果客户端系统上安装了任何应用程序，a) 可以打开 Powerpoint 文件并且 b) 还安装了浏览器插件以在浏览器窗口中查看它们，您可以使用`WebBrowser`控件和`Navigate()`Powerpoint 文件。

例如，如果在客户端系统上安装了 MS office 或 OpenOffice，这将允许您在 Internet Explorer 中查看 Powerpoint 演示文稿。

**2.)**另一种方法是使用[Microsoft Powerpoint Viewer](http://www.microsoft.com/en-us/download/details.aspx?id=6)并嵌入 WinForms 控件。不幸的是，我们不得不使用一个非常旧的版本，我认为是 Office 2000，因为微软告诉我们，新版本不再支持嵌入。这可能在此期间发生了变化，但我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:58:44.600

我只知道使用 DevExpress 12 可以将 PowerPoint、Excel、Word 和 Outlook 集成为控件。因此，您可以将 PowerPoint 控件像文本框一样放在表单上。DevExpress 是一个非常好的框架，但缺点是，一个许可证要 900 美元。

# c# - 为什么在“Windows 类库”项目中创建 wcf 服务时没有发现它？

> ID：11432876
> 
> 赞同：2
> 
> 时间：2012-07-11T12:40:04.210
> 
> 标签：c#, .net, wcf

我将**Wcf 服务库**项目添加到解决方案中，它创建了 2 个类 ( `Service1`, `IService1`) 和配置文件。现在我想在同一个解决方案中将该服务添加到我的**控制台**项目中。我单击“添加服务引用-> 发现”，它会找到该服务。

当我创建**Windows 类库项目并在那里创建与刚刚创建的****Wcf 服务库**项目相同的示例，然后尝试将其添加为我的**控制台**项目的引用时，因此单击**发现**不会返回任何内容。为什么？

当我创建**Wcf 服务库**项目或**Windows 类库项目并在****Wcf 服务库**中创建相同的项目时，有什么区别？

**已编辑**

仅当`Discover`服务在**Wcf Service Library**中时才有效。但是一旦我转移到其他项目（**Console**，**Cl​​ass Library**），`Discover`就再也找不到它了。为什么？

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="WcfServiceLibrary1.Service1">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="wsHttpBinding" contract="WcfServiceLibrary1.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. --> 
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

**服务1.cs**

```
namespace WcfServiceLibrary1
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        // TODO: Add your service operations here
    }

    // Use a data contract as illustrated in the sample below to add composite types to service operations
    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }
} 
```

**IService.cs**

```
namespace WcfServiceLibrary1
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in both code and config file together.
    public class Service1 : IService1
    {
        public string GetData(int value)
        {
            return string.Format("You entered: {0}", value);
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite == null)
            {
                throw new ArgumentNullException("composite");
            }
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T09:18:02.113

经过一番检查，我得出的结论是，只有创建**WCF 服务库**，您才能使用`Add Service Reference->Discover`按钮创建客户端，而无需显式运行主机，它会找到该服务。

如果您创建**的类库**`Add Service Reference->Discover`项目将包含您的服务文件，那么如果服务未托管（未运行），您将无法创建客户端。您应该运行主机，并且只有在它将服务地址放在**地址**栏中并按**Go之后**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T16:31:16.437

看起来 WCF 选项仅在您使用 wcf 项目模板创建项目时显示，如果您有一个现有项目（类库），您可以通过在第一个属性组中添加它来转换它更多讨论[在这里](https://social.msdn.microsoft.com/Forums/vstudio/en-US/bbc6d1f6-15f1-40b6-a96d-ab8a9fb52048/cant-discover-a-wcf-serevice-into-my-solution?forum=wcf)

在第一部分中，添加以下行：{3D9AD99F-2412-4246-B90B-4EAA41C64699};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:43:09.230

在项目属性中打开`Wcf options` `start host`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-30T21:46:42.367

我有同样的问题。转到调试-> 不调试就开始。这应该启动主机和客户端应用程序。然后转到客户端并添加服务参考。换句话说，服务必须正在运行

# c# - .NET 的一种常见注册表单

> ID：11432879
> 
> 赞同：0
> 
> 时间：2012-07-11T12:40:17.210
> 
> 标签：c#, .net, forms

在我们的销售组织中，我们拥有三种不同的销售渠道（三种不同的网络系统）。其中一个销售渠道是使用 MVC3 构建的，另外两个是使用 Web 表单构建的。

我们正在推出一种新产品，所有这些销售渠道都将尝试销售。如果我们不必为此产品构建三个不同的注册表单，我们将很高兴（并且将来也避免为新产品创建此表）。

换句话说，我们不想在编写代码时重复自己，但我们希望“通用”注册表单能够很好地与现有的销售系统集成。

我们应该怎么做？（我们考虑过 IFrame 或从其他系统加载的带有查询字符串的新“通用”注册表单。）

**编辑：**

从我的评论中移出：*“我对细节不太感兴趣（如何在数据库中存储数据等等，我知道该怎么做）。对于这个解决方案：我计划构建一个表单（如你评论中也提到）在主要销售渠道系统中。在其他销售渠道中使用 IFrame（指向主要表单 URL）并用查询字符串填充表单。这听起来是一个很好的整体架构吗？*

# debugging - C++ Builder XE2 - 是否可以调试 vcl 数据库？

> ID：11432880
> 
> 赞同：1
> 
> 时间：2012-07-11T12:40:17.487
> 
> 标签：debugging, static-libraries, vcl, built-in, c++builder-xe2

我在使用 SQL 数据库时使用方法 TParams::ParamByName。该方法的源代码位于目录 c:\Program Files\Embarcadero\RAD Studio\9.0\source\data 文件 Data.DB.pas 中。是否可以调试本单元的源代码？目前我只能使用汇编器窗口调试数据单元（不查看在高级编程语言中定义的命令）。VCL 是静态链接到程序的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:56:28.687

进入项目选项。

`Use debug .dcus`在 下启用`Delphi Compiler > Compiling`。

`Link with Dynamic RTL`下禁用`C++ Linker`。

`Link with Runtime Packages`下禁用`Packages > Runtime Packages`。

然后，您将能够进入 VCL/RTL 源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T11:08:36.930

进入项目选项。

如果您的项目仅包含 C++ 和 C 文件，则无需`Use debug .dcus`在`Delphi Compiler`>下进行设置（请参阅 Remy Lebeau 答案）。`Compiling`

`Link with Dynamic RTL`下禁用`C++ Linker`。

`Link with Runtime Packages`在`Packages`>下禁用`Runtime Packages`。

如果您的项目（我们将其命名为 Project1）是从旧版本的开发环境（C++ Builder XE 和更早版本）升级的，请从所有节点（所有配置、所有配置`Directories & Conditionals`- `Library Path`32 位 Windows 平台、调试配置、.. .) 特定于该特定项目的路径除外。打开 C++ Builder XE2 的第二个实例。单击`File`-> `New`-> `VCL Forms Application`。右键单击项目管理器中的项目并选择`Options`. 导航到`Directories & Conditionals`-> `Library path`。将所有节点的路径复制到 Project1 中的对应节点。

# redis - Redis 数据之间的关系

> ID：11432887
> 
> 赞同：1
> 
> 时间：2012-07-11T12:40:26.847
> 
> 标签：redis

我在 redis 中有一个包含一系列 ID 的列表。每个 id 对于单个对象都是唯一的，我将其作为 JSON 字符串存储在单独的键上。

所以我有类似的东西：

```
redis> LRANGE mylist 0 -1
1) "one"
2) "two"
3) "three" 
```

而且我有单独的键`mylist:one`, `mylist:two`, `mylist:three`。

我将 id 保存到一个列表中，以便在我的应用程序上构建一个简单的 FIFO 队列。

从每个单独的键中获取 mylist 中的所有 id 及其匹配值的最有效方法是什么？有没有更好的方法来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:52:12.683

最有效的方法可能是使用[SORT 命令](http://redis.io/commands/sort)：

```
# Populate list
rpush mylist one two three
set mylist:one 1
set mylist:two 2
set mylist:three 3

# Retrieve all items with their corresponding values
sort mylist by nosort get # get mylist:*
1) "one"
2) "1"
3) "two"
4) "2"
5) "three"
6) "3" 
```

# mediawiki-api - Semantic mediawiki：查询 api 的（无限）结果数

> ID：11432888
> 
> 赞同：0
> 
> 时间：2012-07-11T12:40:30.387
> 
> 标签：mediawiki-api

我想获得一些结果，这些结果可用于从语义媒体维基查询。Ask API，其中结果数大于查询限制。添加`|format%3Dcount`到查询参数会引发此错误：

> 可捕获的致命错误：传递给 ApiSMWQuery::addQueryResult() 的参数 1 必须是 SMWQueryResult 的实例，给定字符串，在 /Users/andru/Development/practicalplants/public/w/extensions/SemanticMediaWiki/includes/api/ApiAsk.php 中调用在第 32 行并在第 51 行的 /Users/andru/Development/practicalplants/public/w/extensions/SemanticMediaWiki/includes/api/ApiSMWQuery.php 中定义

来自（例如）`/w/api?action=ask&query=[[Property::+]]|limit%3D5|format%3Dcount`

有谁知道通过 API 的替代路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:51:57.940

据我所知，SMW API 不包含“count”之类的格式（请参阅[错误 46458](https://bugzilla.wikimedia.org/show_bug.cgi?id=46458)），但编写一个从 API 提供此类数据的扩展可能并不难。

如果数字不需要非常精确，您还可以设置一个包含内联查询计数的属性，例如`{{#set:Number of results={{#ask:[[Property::+]]|format=count}}}}`. 但是，只有在保存页面时才会更新该值。

# php - 如何使用 jQuery DataTables 插件实现服务器端处理？

> ID：11432893
> 
> 赞同：1
> 
> 时间：2012-07-11T12:40:55.537
> 
> 标签：php, jquery, mysql, datatables, server-side

我正在使用 jQuery [DataTables](http://datatables.net)插件来显示由多个表组合而成的一组结果。我正在尝试通过插件实现[服务器端处理](http://datatables.net/examples/data_sources/server_side.html)以改善页面加载时间。我无法完全弄清楚如何将DataTables 提供的[示例外推到我的场景中。](http://datatables.net/examples/data_sources/server_side.html)有什么想法/建议吗？

Javascript：

```
$('#results').dataTable({
        "sAjaxSource": "../server_processing.php",  
        "bProcessing": true,
        "bServerSide": true,
        "bDeferRender": false, 
}) 
```

原始PHP函数：

```
function build_data_list(){

    global $org_id;
    global $dbh;
    global $req_ids;
    global $user_list;

    $sth = $dbh->query ("SELECT 
                        l4.name as L4name, 
                        l3.name as L3name, 
                        l2.name as L2name, 
                        l1.name as L1name,
                        u.id,
                        u.last_name,
                        u.first_name,
                        FROM user_grp_indx ugi, groups l4, groups l3, groups l2, groups l1, users p
                        WHERE
                        ugi.user_id = u.id
                        AND l4.id =  ugi.grp_id
                        AND l4.parent = l3.id
                        AND l3.parent = l2.id
                        AND l2.parent = l1.id
                        ORDER BY u.id", PDO::FETCH_ASSOC);

    $row = $sth->fetch();

    $item['user_id'] =  $row['id'];

    $item['user_info'] = '<a href="../users/index.php?pq=';
    $item['user_info'] .= $row['id'].'">';
    $item['user_info'] .= $row['last_name']. ", " . $row['first_name'] . "</a>";    

    $item['l1_name'] = $row['L1name'];
    $item['l2_name'] = $row['L2name'];
    $item['l3_name'] = $row['L3name'];
    $item['l4_name'] = $row['L4name'];

    for ($i=0; $i < sizeof($req_ids) ; $i++ ){
            $item['req'.$i] = (chk_req_status($item['user_id'],$req_ids[$i]) ? "<span title=\"Yes\"></span><img src=\"../../media/icons/tick.png\" alt=\"Yes\" />" :
                                                    "<span title=\"No\"></span><img src=\"../../media/icons/cross.png\" alt=\"No\" />");
    }

    $old_L1id = $row['L1id'];
    $old_user_id = $row['id'];

    while ($row = $sth->fetch()){

        $L1id =  $row['L1id'];
        $user_id =  $row['id'];

        if ($L1id == $old_L1id && $user_id == $old_user_id ){

            $item['l2_name'] .= "<br/>" . $row['L2name'];
            $item['l3_name'] .= "<br/>" . $row['L3name'];
            $item['l4_name'] .= "<br/>" . $row['L4name'];

            continue;

        }   

        $user_list[] = $item;     
        $old_L1id = $L1id; 
        $old_user_id = $user_id;

        $item['user_id'] =  $row['id'];

        $item['user_info'] = '<a href="../users/index.php?pq=';
        $item['user_info'] .= $row['id'].'">';
        $item['user_info'] .= $row['last_name']. ", " . $row['first_name'] . "</a>";  

        //add inital level stuff to the new record.
        $item['l1_name'] = $row['L1name'];
        $item['l2_name'] = $row['L2name'];
        $item['l3_name'] = $row['L3name'];
        $item['l4_name'] = $row['L4name'];  

        for ($i=0; $i < sizeof($req_ids) ; $i++ ){
            $item['req'.$i] = (chk_req_status($item['user_id'],$req_ids[$i]) ? "<span title=\"Yes\"></span><img src=\"../../media/icons/tick.png\" alt=\"Yes\" />" :
                                                    "<span title=\"No\"></span><img src=\"../../media/icons/cross.png\" alt=\"No\" />");
        }

    }

} 
```

原始 HTML/PHP：

```
<tbody>
    <?php foreach($user_list as $item){

        print "<tr>";
        print "<td class=\"hidden\">{$item['user_id']}</td>";
        print "<td>{$item['user_info']}</td>";
        print "<td>{$item['l1_name']}</td>";
        print "<td>{$item['l2_name']}</td>";
        print "<td>{$item['l3_name']}</td>";
        print "<td>{$item['l4_name']}</td>";

        for ($i=0; $i < sizeof($req_ids) ; $i++ ){
            print '<td>'.(  chk_req_status($item['user_id'],$req_ids[$i]) ? "<span title=\"Yes\"></span><img src=\"../../media/icons/tick.png\" alt=\"Yes\" />":
                "<span title=\"No\"></span><img src=\"../../media/icons/cross.png\" alt=\"No\" />").'</td>';
        }

        print "</tr>";  

    } ?>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T15:46:32.437

这有什么帮助吗？

[服务器端处理 | PHP 与 MySQL](http://datatables.net/development/server-side/php_mysql)

> 服务器端处理 | PHP 与 MySQL 此脚本作为 DataTables 测试和开发的基础，因此它始终是最新的，并且将始终通过服务器端处理实现 DataTables 中支持的所有功能（除了正则表达式过滤 - 出于数据库访问速度的原因）。
> 
> 要在您自己的服务器上使用代码，只需更改 $aColumns 数组以列出您希望从数据库中包含的列，将 $sIndexColumn 设置为索引列（为了速度），将 $sTable 设置为表名，最后将您的数据库连接参数填写到 $gaSql。请注意，此脚本使用需要 PHP 5.2 或更高版本的 json_encode。有关与旧版本兼容的此脚本版本，请参阅 PHP 4 兼容版本。

# ember.js - 你如何测试你的 emberjs 路由？

> ID：11432896
> 
> 赞同：4
> 
> 时间：2012-07-11T12:41:10.353
> 
> 标签：ember.js, ember-old-router

在几个月没有看 emberjs 之后，我现在正试图回到它，因此我正在尝试新的路由器。我想测试我的路线。

有没有人尝试用 emberjs 编写一些路由测试？

让我们假设非常基本的以下路由器：

```
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet({name: 'home'});
      }
    })
  })
}) 
```

您如何测试加载`root.index`路线是否正确加载`HomeView`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T12:57:05.277

这是使用[Jasmine](http://pivotal.github.com/jasmine/)和[Sinon](http://sinonjs.org/)的完整测试：

代码：

```
describe("Given the Router", function(){

    var router = null;

    beforeEach(function(){
        router = Router.create();
    });

    afterEach(function(){
        router = null;
    });

    it("Should be defined", function(){
        expect(router).toBeDefined();
    });

    it("Should have an root route", function(){
        expect(router.get("root")).toBeDefined();
    });

    describe("its root route", function(){
        var root = null;
        beforeEach(function(){
            root = router.get("root").create();
        });

        afterEach(function(){
            root = null;
        });

        it("should have an index route", function(){
            expect(root.get("index")).toBeDefined();
        });

        describe("its index route", function(){
            var indexRoute = null;
            beforeEach(function(){
                indexRoute = root.get("index").create();
            });

            it ("should have route of /", function(){
                expect(indexRoute.get("route")).toEqual("/");
            });

            it ("should connect the outlets to home", function(){

                var fakeRouter = Em.Object.create({applicationController: {connectOutlet: function(){} } });

                var connectOutletSpy = sinon.spy(fakeRouter.applicationController, "connectOutlet");

                var methodCall = connectOutletSpy.withArgs({name:"home"});

                indexRoute.connectOutlets(fakeRouter);

                expect(methodCall.calledOnce).toBeTruthy();
            });
        });
    });
}); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T14:20:49.177

以下是 Ember 为您测试 connectOutlet 的方式：

[https://github.com/emberjs/ember.js/blob/master/packages/ember-views/tests/system/controller_test.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/tests/system/controller_test.js)

```
test("connectOutlet instantiates a view, controller, and connects them", function() {
  var postController = Ember.Controller.create();

  var appController = TestApp.ApplicationController.create({
    controllers: { postController: postController },
    namespace: { PostView: TestApp.PostView }
  });
  var view = appController.connectOutlet('post');

  ok(view instanceof TestApp.PostView, "the view is an instance of PostView");
  equal(view.get('controller'), postController, "the controller is looked up on the parent's controllers hash");
  equal(appController.get('view'), view, "the app controller's view is set");
}); 
```

其他路由相关测试可以在[https://github.com/emberjs/ember.js/tree/master/packages/ember-routing/tests找到](https://github.com/emberjs/ember.js/tree/master/packages/ember-routing/tests)

# java - Android启动器小部件问题

> ID：11432897
> 
> 赞同：0
> 
> 时间：2012-07-11T12:41:12.370
> 
> 标签：java, android, add, widget, launcher

我正在基于股票启动器制作我的第一个 android 启动器。我正在尝试将小部件添加到我的主要线性布局中。但这不起作用。它没有比 onActivityResult() 方法更进一步。请帮助我，并提前非常感谢！我的代码：

```
private static final int REQUEST_CREATE_SHORTCUT = 1;
private static final int REQUEST_CREATE_LIVE_FOLDER = 4;
private static final int REQUEST_CREATE_APPWIDGET = 5;
private static final int REQUEST_PICK_APPLICATION = 6;
private static final int REQUEST_PICK_SHORTCUT = 7;
private static final int REQUEST_PICK_LIVE_FOLDER = 8;
private static final int REQUEST_PICK_APPWIDGET = 9;
private static final int REQUEST_PICK_ANYCUT=10;
private static final int REQUEST_SHOW_APP_LIST = 11;
private static final int REQUEST_EDIT_SHIRTCUT = 12;

    mAppWidgetManager = AppWidgetManager.getInstance(this);
    mAppWidgetHost = new AppWidgetHost(this, R.id.linearLayout);

//Add widgets

void selectWidget() {
    int appWidgetId = this.mAppWidgetHost.allocateAppWidgetId();
    Intent pickIntent = new Intent(AppWidgetManager.ACTION_APPWIDGET_PICK);
    pickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
    addEmptyData(pickIntent);
    Log.d("addWidgetProcedure", "Starting activity to pick widget");
    startActivityForResult(pickIntent, REQUEST_PICK_APPWIDGET);
}

void addEmptyData(Intent pickIntent) {
    ArrayList<AppWidgetProviderInfo> customInfo = 
        new ArrayList<AppWidgetProviderInfo>();
    pickIntent.putParcelableArrayListExtra(
        AppWidgetManager.EXTRA_CUSTOM_INFO, customInfo);
    ArrayList<Bundle> customExtras = new ArrayList<Bundle>();
    pickIntent.putParcelableArrayListExtra(
        AppWidgetManager.EXTRA_CUSTOM_EXTRAS, customExtras);
    Log.d("addWidgetProcedure", "AddEmptyData");
};

@Override
protected void onActivityResult(int requestCode, int resultCode, 
                                Intent data) {
    Log.d("addWidgetProcedure", "inside onActivityResult");
    if (resultCode == RESULT_OK ) {
        Log.d("addWidgetProcedure", "RESULT_OK");
        if (requestCode == REQUEST_PICK_APPWIDGET) {
            Log.d("addWidgetProcedure", "calling configureWidget(data)");
            configureWidget(data);
        }
        else if (requestCode == REQUEST_CREATE_APPWIDGET) {
            Log.d("addWidgetProcedure", "calling createWidget(data)");
            createWidget(data);
        }
    }
    else if (resultCode == RESULT_CANCELED && data != null) {
        Log.d("addWidgetProcedure", "RESULT_CANCELED");
        int appWidgetId = 
            data.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
        if (appWidgetId != -1) {
            mAppWidgetHost.deleteAppWidgetId(appWidgetId);
        }
    }
}

private void configureWidget(Intent data) {
    Bundle extras = data.getExtras();
    int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
    AppWidgetProviderInfo appWidgetInfo = 
        mAppWidgetManager.getAppWidgetInfo(appWidgetId);
    if (appWidgetInfo.configure != null) {
        Intent intent = 
            new Intent(AppWidgetManager.ACTION_APPWIDGET_CONFIGURE);
        intent.setComponent(appWidgetInfo.configure);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        startActivityForResult(intent, REQUEST_CREATE_APPWIDGET);
    } else {
        createWidget(data);
    }
}

public void createWidget(Intent data) {
    Bundle extras = data.getExtras();
    int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
    AppWidgetProviderInfo appWidgetInfo = 
        mAppWidgetManager.getAppWidgetInfo(appWidgetId);
    AppWidgetHostView hostView = 
        mAppWidgetHost.createView(this, appWidgetId, appWidgetInfo);
    hostView.setAppWidget(appWidgetId, appWidgetInfo);
    linearLayout.addView(hostView);
    Toast.makeText(getApplicationContext(), "Adding widget", 15).show();
} 
```

当我按菜单-> 添加小部件时，它会调用 selectWidget() 方法。

当我按下菜单->添加小部件时，所有的 logcat 输出我都选择了一个。

```
07-11 14:38:27.178: W/KeyCharacterMap(1751): Bad keycharmap - filesize=32
07-11 14:38:27.178: W/KeyCharacterMap(1751): Error loading keycharmap file '/system/usr/keychars/bravo-keypad.kcm.bin'. hw.keyboards.0.devname='bravo-keypad'
07-11 14:38:27.178: W/KeyCharacterMap(1751): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
07-11 14:38:28.348: D/addWidgetProcedure(1751): AddEmptyData
07-11 14:38:28.348: D/addWidgetProcedure(1751): Starting activity to pick widget
07-11 14:38:28.428: D/addWidgetProcedure(1751): inside onActivityResult 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:17:29.873

尝试更换您的：

```
private static final int REQUEST_PICK_APPWIDGET = 9; 
```

和：

```
private static final int REQUEST_PICK_APPWIDGET = 0; 
```

# d - Core.vararg 问题，重复调用 va_arg 时产生的垃圾

> ID：11432902
> 
> 赞同：1
> 
> 时间：2012-07-11T12:41:39.410
> 
> 标签：d, variadic-functions, void-pointers

请看以下代码：

```
import core.vararg, std.stdio;

void main() {
    foo(1);
}

void foo(...) {
    va_list arguments;
    for(int i; i<10; ++i) {
        va_copy(arguments, _argptr);
        writeln(arguments," ", va_arg!(int)(arguments));
    }
} 
```

输出：

```
7FFF61F21AE0 1
7FFF61F21AE0 0
7FFF61F21AE0 4387892
7FFF61F21AE0 0
7FFF61F21AE0 38
7FFF61F21AE0 1643256688
7FFF61F21AE0 4387915
7FFF61F21AE0 1
7FFF61F21AE0 27734032
7FFF61F21AE0 1005847240 
```

如您所见， var_arg 正在产生垃圾。然而，第一次调用总是返回正确的值。

这里有什么问题？core.vararg 的源代码非常简单，我无法发现任何改变 7FFF61F21AE0 基础数据的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:11:22.630

`7FFF61F21AE0`看起来像一个 64 位地址。请注意，`core.vararg`将其实现转发到`core.stdc.stdarg`X86 以外的平台。

64位实现在这里：[https ://github.com/D-Programming-Language/druntime/blob/master/src/core/stdc/stdarg.d#L84](https://github.com/D-Programming-Language/druntime/blob/master/src/core/stdc/stdarg.d#L84)

我认为示例中代码的明显解释是模块使用不正确（没有`va_start`调用）。

# macos - 如何从 nspopupbutton 获取字体样式

> ID：11432908
> 
> 赞同：-2
> 
> 时间：2012-07-11T12:42:00.420
> 
> 标签：macos, cocoa

我将字体家族列表设置为`NSPopupButton`. 我不知道如何将选定的字体预览设置为`NSTextView` 已经尝试过这样

```
NSString *fontstyle = [popup_button titleOfSelectedItem];
NSFont *fontst =  [NSFontManager:nil willIncludeFont:fontstyle];
[text_view setFont:fontstyle]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:26:08.557

终于我明白了...

```
NSString *fontstyle = [popup_button titleOfSelectedItem];
NSString *fontsize = [pop_size titleOfSelectedItem];
CGFloat fntsize = [fontsize floatValue];
NSFont *regular = [NSFont fontWithName:fontstyle size:fntsize];
[text_view setFont:regular]; 
```

# sql - SQL获取每月/每周数据总和？

> ID：11432910
> 
> 赞同：3
> 
> 时间：2012-07-11T12:42:03.060
> 
> 标签：sql, sql-server, date, group-by

我得到这些行的每日数据总和？

```
SELECT convert(varchar, okuma_tarihi, 102) as Gunler,SUM(toplam_kullanim_T1) as TotalUsageValue,'T1' as UsageType FROM TblSayacOkumalari
GROUP BY convert(varchar, okuma_tarihi, 102)
UNION ALL
SELECT convert(varchar, okuma_tarihi, 102) as Gunler,SUM(toplam_kullanim_T2) as TotalUsageValue,'T2' as UsageType FROM TblSayacOkumalari 
GROUP BY convert(varchar, okuma_tarihi, 102)
UNION ALL
SELECT convert(varchar, okuma_tarihi, 102) as Gunler,SUM(toplam_kullanim_T3) as TotalUsageValue,'T3' as UsageType FROM TblSayacOkumalari
GROUP BY convert(varchar, okuma_tarihi, 102) 
```

如何每周或每月获得数据总和？有没有关于这个主题或代码示例的教程？当我写`MONTH(DATE)`而不是`convert(varchar, okuma_tarihi, 102)`它显示时，例如该月的所有数据总和。（2010 年 6 月值 + 2011 年 6 月值）。我不想要这个。我使用 MSSQL Server 2008。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:51:15.147

采用

```
GROUP BY YEAR(<date_column_name>),MONTH(<date_column_name>) --for months 
```

或者

```
GROUP BY YEAR(<date_column_name>),DATEPART(wk,<date_column_name>) --for weeks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:32:19.453

为什么要使用 3 种不同的语句，然后全部合并。这些可以在单个语句中完成，因为您的分组列是日期并且是相同的。但是，唯一的问题是您将获得一行，所有 3 个总和作为列而不是 3 行。但是您可以使用 unpivot 来制作列到行。这将更有效，因为您只做一次而不是 3 次。在大桌子上，它可能会大大提高性能。

关于年和月的总和，它只得到了回答

# python - 使用带有索引的 readlines() 或动态解析行？

> ID：11432911
> 
> 赞同：4
> 
> 时间：2012-07-11T12:42:04.647
> 
> 标签：python

我正在制作一个简单的测试函数，它通过从文件中读取要评估的表达式和预期结果来断言我正在开发的解释器的输出是正确的，就像 python 的 doctest。这是用于方案，因此输入文件的示例是

```
> 42
42

> (+ 1 2 3)
6 
```

我对可以解析此类文件的函数的第一次尝试如下所示，它似乎按预期工作：

```
def run_test(filename):
    interp = Interpreter()
    response_next = False
    num_tests = 0
    with open(filename) as f:
        for line in f:
            if response_next:
                assert response == line.rstrip('\n')
                response_next = False
            elif line.startswith('> '):
                num_tests += 1
                response = interp.eval(line[2:])
                response = str(response) if response else ''
                response_next = True
    print "{:20} Ran {} tests successfully".format(os.path.basename(filename),
                                                    num_tests) 
```

我想通过删除`response_next`标志来稍微改进它，因为我不喜欢这样的标志，而是在`elif`块中的下一行读取`next(f)`. 关于我在 freenode 的 IRC 中提出的问题，我有一个无关紧要的小问题。我得到了我想要的帮助，但我也得到了使用的建议`f.readlines()`，然后在结果列表上使用索引。（我还被告知我可以将`groupby()`in`itertools`用于成对线，但我稍后会研究这种方法。）

现在到这个问题，我很好奇为什么这种方法会更好，但是我的互联网连接在火车上是不稳定的，我无法问，所以我会在这里问它。`readlines()`为什么阅读所有内容而不是在动态阅读时解析每一行会更好？

我真的很想知道，因为我的感觉是相反的，我认为一次解析一行似乎更干净，这样一切都可以一口气完成。我通常避免在 Python 的数组中使用索引，而是更喜欢使用迭代器和生成器。如果这是一个主观意见，也许不可能回答和猜测这个人在想什么，但如果有一些一般性的建议，我很乐意听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:58:28.060

迭代地处理输入肯定比一次读取整个输入更符合 Pythonic；例如，如果输入是控制台，这将起作用。

支持读取整个数组和索引的一个论点是，与循环`next(f)`结合使用时可能会不清楚；`for`选项可以`for`用 a 替换循环`while True`或完整记录您在循环中调用`next`的内容`f`：

```
try:
    while True:
        test = next(f)
        response = next(f)
except StopIteration:
    pass 
```

正如 Jonas 建议的那样，您可以通过压缩输入来完成此操作（如果您确定输入将始终包含行 test/response/test/response 等）：

```
for test, response in zip(f, f):               # Python 3
for test, response in itertools.izip(f, f):    # Python 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:49:16.350

```
from itertools import ifilter,imap

def run_test(filename):
    interp = Interpreter()
    num_tests, num_passed, last_result = 0, 0, None
    with open(filename) as f:
        # iterate over non-blank lines
        for line in ifilter(None, imap(str.strip, f)):
            if line.startswith('> '):
                last_result = interp.eval(line[2:])
            else:
                num_tests += 1
                try:
                    assert line == repr(last_test_result)
                except AssertionError, e:
                    print e.message
                else:
                    num_passed += 1
    print("Ran {} tests, {} passed".format(num_tests, num_passed)) 
```

...这只是假设任何结果行都引用了前面的测试。

我会避免使用 .readlines() ，除非您从一次提供整个文件中获得一些特定的好处。

我也改了比较看结果的*表示*，这样就可以区分输出类型，即

```
'6' + '2'
> '62'

60 + 2
> 62 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:30:24.520

将所有内容读入一个数组就相当于随机访问：您使用数组索引向下移动数组，并且在任何时候您都可以检查接下来的内容并在必要时进行备份。

如果您可以在不备份的情况下执行任务，则不需要随机访问，没有它会更干净。在您的示例中，您的语法似乎始终是单行 (?) 表达式，后跟预期的响应。因此，我会编写一个顶级循环，每个表达式-值对迭代一次，并根据需要读取行。如果要支持多行表达式和结果，可以编写单独的函数来读取每个：一个读取完整的表达式，一个读取结果（直到下一个空白行）。重要的是它们应该能够根据需要消耗尽可能多的输入，并将输入指针保持在合理的状态以进行下一个输入。

# python - 使用整数作为输入的错误处理

> ID：11432913
> 
> 赞同：4
> 
> 时间：2012-07-11T12:42:13.150
> 
> 标签：python, integer

我已经设置了这个程序来检查 100 分的测试。如果用户输入小于 60，它应该说失败，如果超过 59，则通过。

```
mark = int(input("Please enter the exam mark out of 100 "))
if mark < 60:
    print("\nFail")
elif mark < 101:
    print("\nPass")
else:
    print("\nThe mark is out of range") 
```

如果用户不输入整数，我如何让程序没有错误。

请帮忙，有14岁的孩子能理解的快速解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T12:46:10.493

将输入保存在变量中并分别转换为整数：

```
import sys

i = input("Please enter the exam mark out of 100 ")
try:
    mark = int(i)
except ValueError:
    print('\nYou did not enter a valid integer')
    sys.exit(0)
if mark < 60:
    print("\nFail")
elif mark < 101:
    print("\nPass")
else:
    print("\nThe mark is out of range") 
```

如果它失败（即，你得到一个`ValueError`）然后打印一条消息并退出。您可以（向 14 岁的孩子）解释`int()`需要一个有效整数作为输入，`ValueError`否则它会引发一个。这是有道理的，因为只有包含整数的字符串才能被`int()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T12:44:59.497

```
try:
   mark = int(input("Please enter the exam mark out of 100 "))
except ValueError:
   print("\nPlease only use integers") 
```

# wpf - WPF MVVM WCF 客户端/服务器架构

> ID：11432915
> 
> 赞同：5
> 
> 时间：2012-07-11T12:42:16.533
> 
> 标签：wpf, wcf, architecture, mvvm

我想构建一个基本的 wpf/mvvm 应用程序，它使用 WCF 从服务器获取数据并允许客户端显示/操作（使用 CRUD 操作）这些数据。

到目前为止，我为架构考虑过类似的事情：

*   一个“全局”模型层，它实现验证、研究标准以及 INotifyPropertyChanged 和服务合同
*   一些服务层，主要是实体框架 4，实现模型层的合同并允许我访问和操作数据。
*   请注意，我也想要一个离线数据源，比如 XML 或其他东西，因此还有另一个服务（我计划使用一些 DI/IoC）
*   WCF 层
*   数据存储客户端的额外层？
*   视图模型

我对 Views/ViewModel 部分很清楚，但我很难弄清楚模型、WCF 和 viewmodel 之间的关系。

我的问题是：

1.  我应该如何处理 EF 生成的模型？摆脱它并采用代码优先的方法，手动与数据库进行映射？
2.  对于 WCF 数据传输，我的模型中是否应该有关系属性，即 Product 有 Customer 而不是 CustomerId ？
3.  我是否应该在 WCF 和 ViewModel 之间增加一层来存储和操作数据，或者将 ViewModel 直接插入 WCF 是否是最佳实践？

欢迎任何其他关于这种架构的提示......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:54:42.393

对于 3 层 WPF 应用程序的体系结构有不同的解决方案，但这里有一种可能性：

1+2) 一种解决方案是创建代表客户端应用程序实际需要的“中间”对象。例如，如果您的应用程序需要显示有关产品的信息以及相关的客户名称，您可以构建以下对象：

```
public MyProduct
{
    // Properties of the product itself
    public int ProductID { get; set; }
    public string ProductName { get; set; }
    ...

    // Properties that come from the Customer entity
    public string CustomerName { get; set; }
} 
```

然后，您可以公开一个无状态的 WCF 服务，该服务从一个 ID 返回您的产品：

```
[ServiceContract]
MyProduct GetProductByID(int productID); 
```

在应用程序的服务器端（即服务的实现），您可以`MyProduct`通过 EF 查询数据库返回一个实例构建（每次调用一个上下文）：

```
public MyProduct GetProductByID(int productID)
{
    using (DBContext ctx = new ....)
    {
        return from p in ctx.Products
            where p.ID == productID
            select new MyProduct
            {
                ProductID = p.ID,
                ProductName = p.Name,
                CustomerName = p.Customer.Name  // Inner join here
            };
    }
} 
```

3) 在 WCF 服务和 ViewModel 之间添加额外的层可能被认为是过度工程。恕我直言，可以直接从 ViewModel 调用 WCF 服务。WCF 生成的客户端代理代码具有模型的实际作用（至少是模型的一部分）。

* * *

编辑：

> 为什么 MyProduct 应该引用 CustomerName 而不是 Customer。在我的例子中，Customer 会有很多我可以使用的属性。这个“映射”不会太贵吗？

您可以使用实际的实体。但在客户端，由于它是 3 层架构，您无法通过导航属性访问数据库。如果存在嵌套`Customer`属性（类型为`Customer`），则客户端将有权访问`theProduct.Customer.Products`，如果您不能以这种方式延迟加载实体（客户端没有数据库上下文），这毫无意义。

扁平的“中间”POCO 更简单 IMO。没有性能问题，映射很简单，与 DB 请求时间相比，此特定操作的 CPU 使用率是无限小的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:34:13.313

首先，一些一般信息：[在 Lab49上有 Jason Dollinger 的关于 MVVM 的非常好的教程](http://blog.lab49.com/archives/2650)

**编辑** 该视频涵盖了构建 WPF 应用程序时的大部分需求。还介绍了依赖注入和与 WCF 的连接（但在谈到 WCF 时没有深入，但这里有一种非常强大的方法来提出好的解决方案）

他开发的源代码也[可以在这里找到](http://blog.lab49.com/archives/2689)

在我看来，每个与 MVVM 相关的人都应该看到它！

> => 1.我应该如何处理EF生成的模型？摆脱它并采用代码优先的方法，手动与数据库进行映射？

AutoMapper 可以在这里提供帮助。[AutoMapper 的 Codeplex](http://automapper.codeplex.com/) 您的问题似乎非常适合这个！

> => 2\. 对于 WCF 数据传输，我的模型中是否应该有关系属性，即 Product 有 Customer 而不是 CustomerId ？

不要乱用模型！productid 是订单的一部分，订单有一个 customer-id。坚持这一点。在您的服务层中，您可能最终会得到 id。因为您可能不会在这里更改产品或客户。如果你这样做（并且我的订单示例不适合），你可以传输动态数据，而不是静态数据。

> => 3\. 我应该在 WCF 和 ViewModel 之间有一个额外的层，用于存储和操作数据，还是直接将 ViewModel 插入 WCF 是最佳实践？

在大多数情况下，我有一个服务层，它在构造函数中注入到我的视图模型中。这可以假设为另一层，因为它处理 WCF 客户端部分并处理服务器端的“更改”事件。（行更改，新行，行删除等）

**编辑** 如果您必须调度您的服务层事件，那么在 WCF 和 ViewModel 之间有一个小型、轻量级的层会容易得多。只要你必须，你很可能会自然而然地想出这样一个层。

# ruby - ruby Datamapper 没有插入所有记录

> ID：11432916
> 
> 赞同：0
> 
> 时间：2012-07-11T12:42:16.850
> 
> 标签：ruby, datamapper, ruby-datamapper

我有这个 ruby​​ 函数，它产生 1095 条记录`MusicTab::FOps.gen_list('/fun/Music')` ，我想使用 datamapper 存储它们。当我这样做时

```
MusicTab::FOps.gen_list('/fun/Music') do |arr_f|
@files=Files.create(
:file_path => arr_f[0],
:title => arr_f[1],
:album => arr_f[2],
:artist => arr_f[3] )
end 
```

只插入了154条记录，我不明白这些记录有什么特别之处。如果我这样做，除了存储的 154 条记录之外，所有其他记录的 p @files.id 都为零。

```
MusicTab::FOps.gen_list('/fun/Music') do |arr_f|
@files=Files.create(
:file_path => arr_f[0],
:title => arr_f[1],
:album => arr_f[2],
:artist => arr_f[3] )
p @files.id
p @files.title
p @files.album
end 
```

如果我只打印值，我可以看到所有值，例如

```
counter=0
MusicTab::FOps.gen_list('/fun/Music') do |arr_f|
p arr_f
counter=counter+1
end
counter 
```

请帮忙..问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:54:42.100

尝试查看@files.errors。我的猜测是你没有通过验证并且它没有被保存。

您可以尝试启用一些调试日志记录，看看是否有助于隔离问题。

```
DataMapper::Logger.new($stdout, :debug) 
```

查看 Files 对象的模型定义以及未保存的数据样本以及已保存的数据样本将很有帮助。我最后一次遇到这个问题是当我需要设置我的文本字段的大小时，因为我溢出了默认值。

# html - Firefox中出现奇怪的左边距

> ID：11432917
> 
> 赞同：-2
> 
> 时间：2012-07-11T12:42:24.270
> 
> 标签：html, css, margin

看看这个网站：[IUT Wiki](http://wiki.iut.ac.ir)

整个 html 的左侧出现一个奇怪的边距，它只出现在 Firefox 中。

你们对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:50:08.130

尝试：

```
body {
    overflow-x: hidden;
} 
```

**编辑**：如果你想解决问题的原因：

你在css中有：

```
ul#f-list {
    width: 1025px;
} 
```

将其更改为 100%

# objective-c - 从 plist 读取到 NSArray

> ID：11432925
> 
> 赞同：0
> 
> 时间：2012-07-11T12:42:45.960
> 
> 标签：objective-c, ios, nsarray

我正在尝试阅读，并且还需要写入 plist。

到目前为止，我正在尝试简单地阅读其中的内容。

这是我的 appSettings.plist：

![在此处输入图像描述](../Images/bbf7b8d35c37c9e5ca9840caa2231423.png)

```
NSBundle* bundle = [NSBundle mainBundle];
NSString* plistPath = [bundle pathForResource:@"appSettings" ofType:@"plist"];
NSDictionary *tmp = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

我试图这样做：

```
NSArray *mruItems = [[NSArray alloc] initWithArray:[tmp objectForKey:@"lastSearches"]]; 
```

但它会引发错误。我对 [tmp objectForKey:@"lastSearches"] 类型的检查显示这不是 NSArray ...

如何将内容读入我的 NSArray？

谢谢！

（我也很想知道一些关于写作的信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:48:04.067

如果您查看上面的屏幕截图，您会发现“lastSearches”很明显是一个字典，而不是一个列表。您可以尝试将那里的类型切换为 Array 类型，它应该适合您。

另一种解决方案是遍历该字典中的键：

```
NSDictionary *lastSearches = [tmp objectForKey:@"lastSearches"];
for (NSString *key in lastSearches.allKeys)
{
  NSString *value = [lastSearches objectForKey:key];
} 
```

请注意，这不是按顺序排列的，您可能必须在对其进行迭代之前进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:47:23.183

事实上，它不是一个数组，而是一个字典（看看你的图像）。

# javascript - java脚本中多个控件的单个onchange函数

> ID：11432926
> 
> 赞同：0
> 
> 时间：2012-07-11T12:42:47.813
> 
> 标签：javascript, onchange

我是 java 脚本的新手并且遇到了问题。

我正在从 Json 字符串动态创建一个表单，我们获得了一些方法（不相关） - 将所有这些控件信息保存在 Array 中（代码中的 allParamArray）。控件可以有父控件，因此父控件可以有依赖项（子项）-我想将 onchange 事件附加到每个具有依赖项的控件。依赖项用逗号分隔并在 refreshDependents 函数中得到处理。

```
<code>

for (mp = 0; mp < allParamsArray.length; mp++) { 
    if (allParamsArray[mp].dependents) {
        var parent = allParamsArray[mp].name;
        var dependents = allParamsArray[mp].dependents;
        document.getElementById(parent).onchange = function() {
           refreshDependents(parent, dependents, this.selectedIndex)
        };
    }
}
</code> 
```

问题是，当我更改控件的表单值时，refreshDependents 具有最后的父信息，而不是我更改的控件。

我想知道有什么方法可以实现指向同一个 onchange 函数的多个控件，并且`onchange function`我们可以获得有关正在更改的控件的正确信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:46:03.413

这应该这样做：

```
function makeHandler(parent, dependents, selectedIndex){
    return function(){
        refreshDependents(parent, dependents, selectedIndex);
    };
}

for (mp = 0; mp < allParamsArray.length; mp++) {
    if (allParamsArray[mp].dependents) {
        var parent = allParamsArray[mp].name;
        var dependents = allParamsArray[mp].dependents;
        document.getElementById(parent).onchange = makeHandler(parent, dependents, this.selectedIndex);
    }
} 
```

该`makeHandler`函数返回一个新的函数对象，它将保留`parent`、`dependents`和`selectedIndex`变量在创建时所具有的值。

# c++ - C++ Borland Builder 表单 - 调用函数

> ID：11432929
> 
> 赞同：1
> 
> 时间：2012-07-11T12:43:01.407
> 
> 标签：c++, c++builder

如果这是一个基本问题，C++ 新手非常抱歉！我习惯了 Java（哦，是的！太容易了）。

我在 addMessages 下面的函数是从另一个文件调用的，然后它将实际运行`__fastcall TfrmRunning::Add()`。因为我无法从另一个文件中得到这个工作。添加是`TdrmRunning`对象的一部分）

如何获取添加消息以调用添加函数？

* * *

这是来自**Running.cpp**

```
void __fastcall TfrmRunning::Add()
{
    lbMessages->Items->Add("Application Started at ");
}
//This is called from another file as i could not get the above function working
void addMessages(){ 
    TfrmRunning::Add(); // this does not work
} 
```

* * *

我的头文件（**Running.H**）

```
class TfrmRunning : public TForm
{
__published:    // IDE-managed Components
    TImage *imgLogo;
    TLabel *lblCopyRight;
    TLabel *lblTitle;
    TButton *btnExit;
TButton *btnViewType;
TListBox *lbMessages;
void __fastcall btnExitClick(TObject *Sender);
void __fastcall FormCreate(TObject *Sender);
void __fastcall Add();
private:    // User declarations
public:     // User declarations
__fastcall TfrmRunning(TComponent* Owner);
};
void addMessages(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:54:03.367

`Add()`不是 的静态函数`TfrmRunning`。

您需要一个类型的对象`TfrmRunning`来调用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-05T20:15:55.740

尝试使用

```
TObjetct *asd;
Add(asd); 
```

# javascript - 如何使用 webkit 浏览器选择范围内的节点？

> ID：11432933
> 
> 赞同：3
> 
> 时间：2012-07-11T12:43:19.410
> 
> 标签：javascript, webkit, range, contenteditable

我目前正在研究 WYSIWYG 解决方案，需要一个函数来正确选择一个节点的范围（我的意思是节点本身，而不仅仅是它的内容）

DOM lvl2 显然有这个[w3.org/ranges](http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113/ranges.html#Level2-Range-method-selectNode)的功能并定义它

`range.selectNodeContents() // Select the contents within a node`
和
`range.selectNode() //Select a node and its contents`

问题是当 selectNode() 完美地与 Firefox 甚至 ie9 一起工作时，似乎不可能用任何 Webkit 浏览器来实现（最后是 Chrome 和 Safari）。在 Webkit 上 selectNodeContents() 和 selectNode() 都只选择节点内容（根据规范，这在我看来是一个错误）

为了使它工作，我尝试通过使用来模拟 selectNode() 目标， 但结果仍然相同，它在任何地方都可以工作（当然是>8），但不能在 webkit 浏览器上工作。
`range.setStartBefore(node);
range.setEndAfter(node);`

如果你想尝试一下，我做了一个小 jsfiddle，你可以在[这里](http://jsfiddle.net/vooor/PeRpT/)玩（只需打开控制台并查看在 webkit 上不一样的 console.warn 结果：/）

我进行了很多搜索，但找不到在 webkit 浏览器上实际选择完整节点的方法。奇迹般地，你们中的一些人会知道一种方法来做到这一点，或者甚至只是任何提示来继续我的探索吗？：/

ps：我知道“rangy”库，但我不能在我的项目中使用它，而且从我在源代码中读到的内容，我什至不确定他们是否处理那个东西：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:25:19.807

问题不在于`selectNode()`，它在 WebKit 中运行良好，而在于 WebKit 的选择对象，它破坏范围以适应其自己（并非总是不合理）允许选择边界和插入符号位置的想法。WebKit 对此有一些错误：

*   [https://bugs.webkit.org/show_bug.cgi?id=23189](https://bugs.webkit.org/show_bug.cgi?id=23189)
*   [https://bugs.webkit.org/show_bug.cgi?id=15256](https://bugs.webkit.org/show_bug.cgi?id=15256)

你是对的，Rangy 没有处理这个，而是更愿意反映浏览器原生选择的现实。假装选择不同会很快导致奇怪的行为。

# macos - 无法签署 Mac 安装程序以在 Mac 应用商店之外分发

> ID：11432939
> 
> 赞同：5
> 
> 时间：2012-07-11T12:43:44.697
> 
> 标签：macos, cocoa, installation, mac-app-store, osx-mountain-lion

我在为我计划在 mac 应用商店之外分发的 mac 应用程序签署安装程序时遇到问题。我正在使用开发人员安装程序证书对应用程序进行签名，但它给出了一些错误。下面是我用来签署应用程序的命令。

```
productsign --sign "Developer ID Installer: XYZ" "/path/to/input" "/path/to/output" 

productsign: signing product with identity "Developer ID Installer: XYZ" from keychain "login keychain Path"

productsign: adding intermediate certificate "Developer ID Certification Authority"

productsign: adding intermediate certificate "Apple Root CA"

productsign: error: Can't add contents of input archive to output. 
```

有没有人对此问题有解决方案或任何想法。

1.  如果我尝试通过 xcode 创建安装程序，那么它将正常工作。但是由于我的应用程序安装程序中包含多个 .pkg 文件，因此我们正在通过 pakagemaker 创建安装程序文件。我的下一个查询是：

2.  是否可以成功签署使用 pakagemaker 创建的安装程序。

3.  是否可以签署 .mpkg 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:23:02.440

如果您的 .pkg 是一个捆绑包（其中包含内容的文件夹） - 在签名之前先将其展平：

pkgutil --flatten orig.pkg flat.pkg

productsign --sign '开发者 ID 应用程序：Foo Guy' plat.pkg flat_signed.pkg

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:11:06.923

当您将“安装属性”中的最小目标设置为 10.5（豹）时，这种情况就会消失！

（当您使用 packagemaker 打开安装程序时，选择“项目”>“安装属性”以找到该设置。）

所以这似乎是某种兼容性问题。

# .net - 启动 .NET 应用程序时，错误代码 0xc0000135 是什么意思？

> ID：11432940
> 
> 赞同：17
> 
> 时间：2012-07-11T12:43:47.860
> 
> 标签：.net

症状是应用程序在用户站点的大多数 PC（Windows 7 和 XP）上正确启动，但在一台机器上始终无法启动，并出现错误“应用程序无法正确初始化 (0xc0000135)”。有什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-11T13:26:28.120

从 ntstatus.h SDK 头文件：

```
//
// MessageId: STATUS_DLL_NOT_FOUND
//
// MessageText:
//
// The program can't start because %hs is missing from your computer. 
// Try reinstalling the program to fix this problem.
//
#define STATUS_DLL_NOT_FOUND             ((NTSTATUS)0xC0000135L)    // winnt 
```

“尝试重新安装程序”的建议是可靠的，但是您可以确定需要安装*什么。*如果您对此一无所知，请使用 SysInternals 的 ProcMon 实用程序，您会看到 Windows 正在搜索 DLL 并且找不到它。DLL 的名称应该是一个很好的线索。如果是 mscoree.dll，那么您忘记在目标机器上安装 .NET。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-11T12:43:48.157

当目标计算机上未安装 .NET 框架，或者安装的版本不足以运行应用程序时，会导致此错误。解决方法很明显：在运行应用程序之前安装正确版本的 .NET 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:47:46.173

还要检查版本，还有一个“.NET Framework 4.0”，与3.5不同。4.0 不会运行为 3.5 设计的应用程序

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-20T03:10:00.457

你在做什么步骤

错误代码 0xc0000135 in 因为计算机正在那里使用。网络框架。你要做的就是先安装它。网络框架。

安装前。framework net framework 版本也在你的 Visual Studio 中检查。用于检查 Visual Studio 版本的框架如下：

*   首先打开你的视觉工作室
*   选择一个项目，然后单击属性，然后选择参考窗口
*   那里会出现 System.Core 版本。使用的网络框架。
*   搜索后。Net framework 版本已安装在客户端计算机上并完成其 exe 请在运行时重试。如果出现如下错误，那么你要做的是
    1.  查看使用中的引用和设置属性所有引用以复制 local = true 属性
    2.  之后在构建或运行项目然后停止项目
    3.  在windownaplication debug\bin\debug文件夹中寻找位置的exe文件。
    4.  在现有的调试文件夹中 exe 文件和 dll 文件
    5.  dll 文件是应包含的 dll 文件的 exe 文件支持者。尝试运行它的exe。

# delphi - 如何覆盖继承的属性？

> ID：11432942
> 
> 赞同：2
> 
> 时间：2012-07-11T12:43:49.573
> 
> 标签：delphi, inheritance, properties, overriding

我有一个类（TMyClass），它有一个属性（Items：TItems）

```
TItems = class;    

TMyClass = class(TComponent)
private
   FItems: TItems;
   procedure SetItems(const Value: TItems);
protected

public

protected
  property Items: TItems read FItems write SetItems;
end.

TExItems = class(TItems)
private
  FNewProb: Integer;
protected

public

published
  property NewProp: Integer read FNewProb write FNewProb;
end.

TExMyClass = class(TMyClass)
private
   FItems: TExItems;
   procedure SetItems(const Value: TItems);
protected

public

published
  property Items: TExItems read FItems write SetItems;
end. 
```

新的“Items”属性是从 TItems 继承的，但是当我安装组件时，TExItems 的新属性“NewProb”没有出现，看起来“Items”属性仍然是 TItems 而不是 TExItems...如何覆盖它?

谢谢

修改：这是真实的代码

类型 TKHAdvSmoothDock = 类；

```
TKHAdvSmoothDockItem = class(TAdvSmoothDockItem)
private
  FImageIndex: TImageIndex;
  procedure SetImageIndex(const Value: TImageIndex);
protected

public

published
  property ImageIndex: TImageIndex read FImageIndex write SetImageIndex default -1;
end;

TKHAdvSmoothDockItems = class(TAdvSmoothDockItems)
private
  FOwner: TKHAdvSmoothDock;
  FOnChange: TNotifyEvent;
  function GetItem(Index: Integer): TKHAdvSmoothDockItem;
  procedure SetItem(Index: Integer; const Value: TKHAdvSmoothDockItem);
protected
  function GetOwner: TPersistent; override;
public
  constructor Create(AOwner: TKHAdvSmoothDock);
  function Add: TKHAdvSmoothDockItem;
  function Insert(Index: Integer): TKHAdvSmoothDockItem;
  property Items[Index: Integer]: TKHAdvSmoothDockItem read GetItem write SetItem; default;
  procedure Delete(Index: Integer);
published
  property OnChange: TNotifyEvent read FOnChange write FOnChange;
end;

TKHAdvSmoothDock = class(TAdvSmoothDock)
private
  FImageChangeLink: TChangeLink;
  FImages: TCustomImageList;
  FItems: TKHAdvSmoothDockItems;
  procedure ImageListChange(Sender: TObject);
  procedure SetImages(const Value: TCustomImageList);
  procedure SetItems(const Value: TKHAdvSmoothDockItems);
  function GetItems: TKHAdvSmoothDockItems;
  { Private declarations }
protected
  procedure UpdateImagesFromImageList;
public
  constructor Create(AOwner: TComponent); override;
  destructor Destroy; override;
published
  property Images: TCustomImageList read FImages write SetImages;
  property Items: TKHAdvSmoothDockItems read GetItems write SetItems;
end; 
```

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:34:14.467

属性 getter 和 setter 可以是虚拟的，然后被继承类覆盖，请参阅下面的更新示例。对于示例代码有一个警告，那就是您正在尝试更改属性的类型，这是不允许的。我建议您签`Value is TExItems`入，但使用继承的 Items 属性并在所有方法和进一步继承`TExMyClass.SetItems`者中转换为 TExItems 。`TExMyClass`

```
TItems = class;

TMyClass = class(TComponent)
private
   FItems: TItems;
   procedure SetItems(const Value: TItems); virtual;
protected
  property Items: TItems read FItems write SetItems;
end;

TExItems = class(TItems)
private
  FNewProb: Integer;
protected

public

published
  property NewProp: Integer read FNewProb write FNewProb;
end;

TExMyClass = class(TMyClass)
private
   procedure SetItems(const Value: TItems); override;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:29:04.967

属性不能是虚拟的，因此它们不能被覆盖。它们可以被*隐藏*，因为在 的上下文中`TExMyClass`，对的引用`Items`将解析为在该类中声明的属性，而不是在祖先中声明的属性。

如果您有静态（声明的，编译时）类型为 的东西`TMyClass`，`Items`将始终引用该类中的那个，即使它的运行时类型是`TExMyClass`。

您可以`SetItems`在基类中声明为 protected 和 virtual，然后在后代中覆盖它，而不是声明一个恰好具有相同名称的全新属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:00:22.213

您可以实现和覆盖方法 getItem 和 setItem；

仅为 TMyClass 实现属性 Item

```
property Items: TItems read getItems write setItemps; 
```

对于 TMyClass：

```
public:  
function getItems : TItems; virtual;
procedure setItems(items: TItems); virtual; 
```

对于 TExMyClass：

```
public:
function getItems : TItems; override;
procedure setItems(items: TItems); override;

function TExMyClass.getItems : TItems;
begin
  result := fItems;
end;

procedure TExMyClass.setItems(items : TItems);
begin
  self.itmes := items;
end; 
```

所以， TExMyClass.items.className = TExItems ！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T15:44:22.023

从技术上讲，您不能覆盖属性，但可以通过多种方式模拟覆盖。例如，请参阅[此答案](https://stackoverflow.com/a/6392378/757830)以了解最基本的方式。

现在我没有代码，`TAdvSmoothDock`所以剩下的只是猜测。当属性 getter 和 setter`TAdvSmoothDock.Items`是虚拟的时，您可以覆盖*它们*。但是在更高级的组件中，我想来自 TMS 的组件，那么很有可能`TAdvSmoothDock`拥有一个受保护的`CreateItem`方法，只要需要可以覆盖的新项目，就会调用该方法。如果是这种情况，那么您应该像这样实现它：

```
function TKHAdvSmoothDock.CreateItem: TAdvSmoothDockItem;
begin
  Result := TKHAdvSmoothDockItem.Create;
end; 
```

并像这样使用它：

```
TKHAdvSmoothDockItem(AKHAdvSmoothDock.Items[I]).ImageIndex := ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T10:01:01.253

It is the same problem as trying to have more than one TMemo that uses the same Lines object.

Since `TCustomMemo` delcares on its `private` section `FLines: TStrings;` it is not possible to have more than one TMemo that uses the same `FLines`.

The only way (i still know) of working is to fully duplicate the whole `TCustomMemo` class as `TLinkedCustomMemo`, but defining `FLines: TStrings;` on the public section; also need cloning the 'TMemo' but referencing `TLinkedCustomMemo`, not `TCustomMemo`

Then using the hack of delcaring `TMemo=class(TLinkedMemo)` you will have public access to `FLines`, so you can replace that object, with the object of the main TMemo, on all the rest linked memos.

Why do such Link on the content of the TMemos? Easy answer could be: Have more than one TMemo that shows the same text, so user can see (and edit) two (or more) different parts at a time, like some SpreadSheets do... it normally also involve an horizontal splitter between them, syncing horizontal scrollbars, etc.

Sometimes doing something that seems so easy, it is really so complicated! Just caused by faulty on VCL design.

For the sample of the TMemos... why on the hell they have not been defined its Lines property based on TStringList insead of TStrings? That way we could use the same String List for more than one TMemo at the same time.

If want to see, how internally is dependant on such... search for class `TMemoStrings` (it appears on implementation section of StdCtrls). Why it must have only one TMemo?, and why it must have at all? why not had used TStringList instead of all that hell?

When some classes are so closed... it comes the hacking way of declaring classes... but how to change only a property of a control without needing to whole duplicate some classes (just to change so little things)?

Oh, yes, a real life sample for a content linked memo could be:

*   Let the user see (at the same time) two different parts of a text file, without double the memory storage
*   Or better sample: the user wants to edit a word on line 3 and another on line ten million without the need to scroll

So you put two TMemo and link the Lines property, so user has the controls to edit such Lines property (on different points) from both memo without need to scroll down and up all the times.

Another sample:

*   User wants to edit lines one million to one million plus twenty but needs to see lines ten to twenty at the same time.
*   Having to memos with a `copy` is not possible, more than 3GiB of RAM on a 32Bits Windows (not allowed), each Memo would need >1.6GiB of ram each... etc.
*   Duplicating such data is neither an option, user edit on second memo, but first must be on sync... so after loose focus (or just after edit if want good looking) you would must copy all data form one to the others memos... computing time? -etc

There are so much samples... and most important ones are the ones i can not figure.

So answering your question in a general form, "how to hack a class to modify it a little":

1.  Clone the code that define the class in a new unit, call that unit something that let clear it is for cloning that class with some modifications
2.  Use the same class name only if your modifications would be backward compatile (like when additg to TEdid the Align property, use the hack of declaring it as `TTheClass=class(TheUnit.TTheClass)`), else use a different name
3.  Add such new unit at the end of the `uses` of `interface` section

That is it... simple to say, hard work to do on some cases.

I allways recomend using nes classes names, except as on the sample of adding `Alignment` property to a `TEdit`.

When use the hack of declaration? When you have a full application already coded and want to add to all `TEdit` on it the alignment... insetead of creating a new component, adding it to component tools, redefine all forms to not use `:TEdit;` and use `:TMyAlignedEdit`... you can just simple add to uses your unit and voila... all `TEdit` now have such property and IDE inspertor also sees it, etc.

# java - PHP中的前置增量和后置增量

> ID：11432943
> 
> 赞同：5
> 
> 时间：2012-07-11T12:43:52.963
> 
> 标签：java, php, javascript

以下语句的结果应为 9：（使用 java 或 js 或 c++）

```
i = 1;
i += ++i + i++ + ++i;
//i = 9 now 
```

但在 php

相同的语句将给出 12？！

```
$i = 1;
$i +=  ++$i + $i++ + ++$i;
echo $i; 
```

这是一个错误还是任何人都可以解释为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T12:53:16.007

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T12:48:38.710

答案是“因为它是 PHP”。PHP 不保证这种类型的语句（顺便说一句，C 也不保证）。

是的，它可能被认为是错误的，但它是 PHP。请参阅[此“不是错误”错误报告](https://bugs.php.net/bug.php?id=41373)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T12:54:36.370

根据[Operator Precedence](http://www.php.net/manual/en/language.operators.precedence.php)上的文档：

```
// mixing ++ and + produces undefined behavior
$a = 1;
echo ++$a + $a++; // may print 4 or 5 
```

所以我猜测正在发生的事情是：

```
$i +=  ++$i + $i++ + ++$i; 
```

被翻译成

```
$i = (++$i + $i++ + ++$i) + $i; 
```

在这种情况下，它将加起来为 12。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T12:50:22.057

无法保证这些增量的顺序。为什么要编写模棱两可的代码？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T13:15:22.067

Java、JS 或 C++ 是这样计算这个等式的；

```
i = 1;

i += ++i + i++ + ++i; --> i = i* + ++i + i++ + ++i (i* is 1 all the time) 
```

但在 PHP 中：

```
$i = 1;

$i += ++$i + $i++ + ++$i; --> $i = $i* + ++$i + $i++ + ++$i ($i* is calculated after increments, in your situation $i* is 4) 
```

区别在于我认为。

# javascript - 无法使用 javascript 创建文本区域

> ID：11432946
> 
> 赞同：1
> 
> 时间：2012-07-11T12:44:06.913
> 
> 标签：javascript

我想使用 javascript 设计一个简单的文本区域。我正在使用以下功能

```
 function add2(type) {
     var element = document.createElement("input");
     var label=prompt("Enter the name for lable","label");
     document.getElementById('raj').innerHTML=document.getElementById('raj').innerHTML+label;
     element.setAttribute("type", type);

     element.setAttribute("name", type);
     element.setAttribute("cols",20);
     element.setAttribute("rows",50);

     var rohit = document.getElementById("raj");
    rohit.appendChild(element);
    document.getElementById('raj').innerHTML=document.getElementById('raj').innerHTML+"<br/>";

} 
```

我在我的 HTML 代码中使用了这个函数，如下所示：

```
<input type="button" value="Text Area" onclick="add2('textarea')"> 
```

但是当我执行这段代码时，它只创建了一个简单的文本框。我应该怎么办 ？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:50:33.177

Textarea 有自己的 HTML 标签，我认为这就是你想要的：

演示：http: [//jsfiddle.net/SO_AMK/ZzdWR/](http://jsfiddle.net/SO_AMK/ZzdWR/)

HTML：

```
<input type="button" value="Text Area" onclick="add2('textarea')">
<div id="raj">Lorem ipsum...</div> 
```

​JavaScript：

```
function add2(name) {
     var element = document.createElement("textarea");
     var label = prompt("Enter the name for lable","label");
     var rohit = document.getElementById("raj");
     rohit.innerHTML = rohit.innerHTML + label;

     element.setAttribute("name", name);
     element.setAttribute("cols",20);
     element.setAttribute("rows",50);

    rohit.appendChild(element);
    rohit.innerHTML = rohit.innerHTML + "<br/>";

}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:46:35.003

文本区域是单独的元素：

```
<textarea>content</textarea> 
```

而不是

```
<input type="textarea" value="content" /> 
```

# sql-server - 嵌套存储过程链

> ID：11432947
> 
> 赞同：5
> 
> 时间：2012-07-11T12:44:14.667
> 
> 标签：sql-server, stored-procedures, nested

我有这个 SQL Server，它有很多分布在所有数据库中的存储过程，我正在寻找一种方法来查找这些嵌套存储过程是如何相互链接的，所以基本上是查看哪个存储过程正在运行哪个。

想知道是否有人遇到同样的问题并找到了一种以某种轻松方式获取此类信息的方法，而不是打开每个存储过程并检查它正在运行的其他存储过程。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:09:12.540

## 方法#1

右键单击表名并选择“查看依赖项”，如下所示，我们正在查看 Employee 表的依赖项。

![在此处输入图像描述](../Images/e60bdd67ed28018472ab7c336516114f.png)

* * *

## 方法#2

```
SELECT 
        routine_name, 
        routine_type 

FROM    INFORMATION_SCHEMA.ROUTINES

WHERE   ROUTINE_DEFINITION LIKE '%Your Object Name%' 
```

* * *

## 方法#3

```
EXEC sp_depends 'Your Object Name' 
```

* * *

## 方法#4

```
SELECT referencing_schema_name, referencing_entity_name,
referencing_id, referencing_class_desc, is_caller_dependent
FROM sys.dm_sql_referencing_entities ('Your Object Name', 'OBJECT'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:19:02.227

根据您想要的信息，您可以查询 sys.sql_expression_dependencies 目录视图或使用 sys.dm_sql_referenced_entities 或 sys.dm_sql_referencing_entities 动态管理函数。

有关这些的信息，包括直接和间接依赖关系（链式依赖关系）的各种 SQL 查询示例，可以在此处找到：[报告 SQL 依赖关系](http://msdn.microsoft.com/en-us/library/bb677168.aspx)。

# java - 使用 MigLayout 的行之间的间隙

> ID：11432949
> 
> 赞同：2
> 
> 时间：2012-07-11T12:44:17.140
> 
> 标签：java, swing, miglayout

我用 将一个`JCheckbox`和两个`JPanels`加到另一个`JPanel`上`MigLayout`，每个都在不同的行中。问题是行之间的间隙是1-2厘米，我不希望它们之间有间隙。我尝试使用增长来填充空间，但它只能水平填充，而不是垂直填充。

希望有人知道如何解决这个问题。我是新手，所以我希望您能以“容易获得”的方式进行解释。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T21:07:16.680

在 MigLayout 中有一个布局约束（布局定义中三个字符串中的第一个）用于 gaps:`gap`和它的垂直变体`gapy`，所以......

```
new MigLayout("gapy 0...", "[...]", "[...]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T02:39:58.593

在声明 MigLayout 的地方执行此操作

`MigLayout mg = new MigLayout("", "", "1");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:49:29.770

如果您不明确更改组件，MigLayout 会在组件之间使用标准大小的间隙。如果您想删除这些间隙，您可以`0lp!`在行定义中的行之间设置，例如`MigLayout("", "[]", "[my checkbox row definitions]0lp![my first panel row definitions]0lp![my second panel row definitions]")`

希望这就是你的意思;-)

亲切的问候，

转动

# python - 在 python 中使用 multiprocessing.Manager 在进程之间共享数据

> ID：11432952
> 
> 赞同：2
> 
> 时间：2012-07-11T12:44:31.960
> 
> 标签：python, multiprocessing, shared-objects

以下是来自[http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes的调整示例](http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes)

```
from multiprocessing import Process, Manager

def f(d):
    print d                 # 1
    print type(d)

if __name__ == '__main__':
    manager = Manager()

    d = manager.dict()
    p = Process(target=f, args=(d))
    p.start()
    p.join() 
```

我正在尝试做类似的事情

```
from multiprocessing import Process, Manager
class abcd(Process):

    def __init__(self,d):
        Process.__init__(self)
        self.d = d
        print self.d            # 2
        print type(self.d)

    def run(self):
        print self.d            # 3
        print type(self.d)

if __name__ == '__main__':
    manager = Manager()

    d = manager.dict()

    proc = abcd(d)
    proc.start() 
```

真正困扰我的是，在标记为 1 和 2 的行中，我得到了我所期望的 {} - 空白字典。但在第 3 行打印

```
<DictProxy object, typeid 'dict' at 0x18ac9d0; '__str__()' failed> 
```

从 Process 继承时我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T21:42:04.060

问题是，您的主进程在分叉进程有机会从字典中获取值**之前终止。**

您应该调用 proc.join() 让进程有机会获取字典。

如果您查看示例代码，那么您将看到完全相同的内容。

# objective-c - 如何在 iOS 上创建标签栏？

> ID：11432954
> 
> 赞同：2
> 
> 时间：2012-07-11T12:44:50.453
> 
> 标签：objective-c, ios, uitabbarcontroller, uitabbar

我需要在我的主视图控制器上有一个带有标签的标签栏来导航到我的所有其他控制器。我只需要这个控制器上的标签栏，当我到达另一个控制器时，我只需要一个后退按钮即可转到主控制器。现在我有一些问题。我在主视图控制器中创建了选项卡栏，并在所有选项卡中创建了我需要的文本和图像。但是我看到我只能为选项卡栏创建 IBOutlet 而不是为每个选项卡创建 IBActions（如我所想）。所以我创建了一个 IBOutlet 并将其连接到我的标签栏。

我如何参考每个选项卡？

如果我可以参考每个选项卡，当我无法使用有关它的操作时选择选项卡时如何更改视图控制器？（我不是要求更改控制器的代码，我要求我的位置应该放置代码，以便我的应用程序知道这个特定的选项卡被按下并且必须更改控制器）。感谢您阅读我的帖子 :D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T14:26:11.310

`UITabBarController`您可以在其中以编程方式创建一个`applicationDidFinishLaunching`并将其设置为根视图控制器（或者，如果您愿意，可以将其呈现为模态视图）。这是执行此操作的最少代码：

```
UITabBarController *tabBarController = [[UITabBar alloc] init];

UIViewController *controller1 = [[YourViewController alloc] init];
UIViewController *controller2 = [[YourOtherViewController alloc] init];

tabBarController.viewControllers = [NSArray arrayWithObjects:
    controller1,
    controller2,
    nil];

// set as the root window
window.rootViewController = tabBarController; 
```

如果您想自定义标签栏项目的外观，请通过`(UITabBarItem *)tabBarItem`在子视图控制器中添加重载来实现：

```
- (UITabBarItem *)tabBarItem
{
    return [[UITabBarItem alloc] initWithTitle:@"Amazing" image:[UIImage imageNamed:@"Blah.png"] tag:0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:26:59.710

如何由我制作标签栏控制器

1.  将标签栏控制器拖到情节提要中（希望你有一个）
2.  从选项卡栏控制器按住 Control 拖动到您想要连接到它的每个视图
3.  汽水瓶

![在此处输入图像描述](../Images/566edf48b49dbd519a6aae52c9f6c46f.png)

正如您所知，这为您提供了默认的选项卡栏控制器行为（因此它将始终存在，您可以从任何页面单击到另一个页面）。如果这不是你想要的，那么不要使用标签栏控制器。否则是可憎的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-14T21:52:40.990

故事板肯定是有帮助的，但如果你不想使用也可以。执行从标签栏控制器到新视图控制器的控制拖动确实有效（达斯汀的回应）。

# javascript - 如何在 QML 中延迟 JavaScript 操作？

> ID：11432955
> 
> 赞同：8
> 
> 时间：2012-07-11T12:44:53.213
> 
> 标签：javascript, c++, qt, qml, qt-quick

我正在构建一个**基于 QML 的 C++ 应用程序**。

为了简单起见：

在我的主 QML 文件中，我有一个按钮（矩形）在单击时调用 JavaScript 函数（在外部 JS 文件中定义）：

```
// My JS file linked to the main QML window
[...]
function actionOnButtonClicked()
{
    var x = 0;
    var y = 0;
    for(var i = 0; i < 3; i++)
    {
        createObject(x, y);
        x = x + 10;
        y = y + 10;
    } 
} 
```

如您所见，在这个函数中，我调用了*n*（这里 = 3）次另一个 JS 函数来动态创建**几个**QML 对象以添加到场景中：

```
function createObject(xPosition, yPosition)
{
    component = Qt.createComponent("Symbol.qml");
    component.createObject(windowApp, {"x": xPosition, "y": yPosition});
} 
```

这工作正常。*但是*创建的对象（符号）出现在 windowApp 中并带有平移动画（大约 1 秒），我想等待第一个对象的动画完成后再创建第二个对象...

由于我们不能在 QML 中使用*setTimeOut()* JavaScript 函数，我想知道如何实现这一点。我看不到如何使用 QML Timer 对象甚至 PauseAnimation ...

有人知道如何在 2 个 QML JavaScript 操作之间添加延迟吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-15T22:53:13.980

我认为这种[QML Timer 类型](http://doc.qt.io/qt-5/qml-qtqml-timer.html)可以帮助您实现您想要的。

```
import QtQuick 2.0
Item {
       Timer {
               interval: 500; running: true; repeat: true
               onTriggered: time.text = Date().toString()
             }

       Text { id: time }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:08:56.310

已经有一段时间了，我错过了 QML。但让我尝试提出一个解决方案。`translationAnimation.running = true`如果您在`Component.onComlpeted`事件中调用它，我想这可能会起作用。我之前发布了一个愚蠢的答案。现在我用一种懒惰/丑陋的方式来代替它。这可能不是正确的方法，尽管此代码可能对您的用例有所帮助。

**创建对象.js**

```
.pragma library

var objects = null;
var objectCount = 0;
var i = 0;
var mainWin;
var x = 0;
var y = 0;

function calledOnbuttonAction(parentWindow)
{
    if(objects === null)
    {
        mainWin = parentWindow;
        x = 0;
        y = 0;
        objects = new Array();
        createObject(x,y);
    }

    else
    {
        if(x <= mainWin.width)
            x = x + 28;
        else
        {
            x = 0;
            if(y <= mainWin.height)
                y = y + 28;
            else
            {
                console.debug("Exceeded window area!")
                return;
            }
        }
        createObject(x,y);
    }

}

function createObject(xPos, yPos)
{
    i++;
    var component = Qt.createComponent("Object.qml");
    objects[objectCount++] = component.createObject(mainWin, {"x": xPos, "y": yPos});
} 
```

**main.qml**

```
import QtQuick 1.1
import "CreateObjects.js" as CreateObject

Rectangle {
    id: mainWindow
    width: 360
    height: 360

    Text {
        text: qsTr("Click inside window")
        anchors.centerIn: parent
        font.pixelSize: 18
    }
    MouseArea {
        anchors.fill: parent
        onClicked: {
            CreateObject.calledOnbuttonAction(mainWindow); //passing the parent window object
        }
    }

} 
```

**Object.qml** //您的情况下的符号

```
//The Symbol

import QtQuick 1.1
import "CreateObjects.js" as CreateObject
Rectangle {

    id: obj
    width: 25
    height: 25

    gradient: Gradient {
        GradientStop {
            position: 0
            color: "#d11b1b"
        }

        GradientStop {
            position: 1
            color: "#ea4848"
        }
    }

    property alias animationStatus: completedAnimation

    NumberAnimation {
        id: completedAnimation;
        target: obj;
        property: "opacity";
        duration: 800;
        from: 0;
        to: 1.0;
        onRunningChanged: {
            if(!running && CreateObject.i < 900) // Decrease or increase the value according to the number of objects you want to create
            {
                CreateObject.calledOnbuttonAction();
            }
        }
    }

    Component.onCompleted: completedAnimation.running = true;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:26:05.317

您可能会这样做，以便您只从您的按钮操作中创建一个“符号”，并在新对象中的某个事件上触发一个新符号。也许动画结束触发了一个你可以使用的事件？

# ios - iOS 版地图导航器

> ID：11432958
> 
> 赞同：0
> 
> 时间：2012-07-11T12:45:05.893
> 
> 标签：ios, map, navigator, ios6

（我不是 iOS 开发人员，只需要了解一个概念）是否有可能拥有一个与地图应用程序一样的导航系统，但不*留下*我自己的使用谷歌地图的地图应用程序。是否可以在 iOS6 中使用 turnbyturn 导航和在我自己的地图应用程序中使用新的 Vector*地图*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:52:04.397

您必须使用官方地图应用程序进行转弯。您可以在 MKMapView 上绘制路径，但需要提供您自己的数据。

# sharepoint-2010 - 更改共享点中是/否字段的值

> ID：11432960
> 
> 赞同：2
> 
> 时间：2012-07-11T12:45:12.700
> 
> 标签：sharepoint-2010

我的共享点列表中有一个是/否（复选框）类型的字段。我正在尝试以编程方式更改/设置字段的值（服务器代码），但它给了我一个错误，说它应该是 1 或 0。我无法让它工作。任何人都可以帮助我吗？

这里的那部分代码：

```
 SPListItem item = reportList.Items.Add();
                item["RequesterID"] = id;

                 **item["ZIP_x0020_Code_x0020_Linked"] = 0;**

                item["ZC_x0020_code"] = txtZcCode.Text;
                item.Update(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:53:18.853

对于是/否字段，您应该将其设置为“1”或“0”：

```
item["ZIP_x0020_Code_x0020_Linked"] = "0"; 
```

在这里查看更多信息：

[http://blog.henryong.com/2008/12/05/programmatically-setting-the-default-value-of-a-spfieldboolean-field/](http://blog.henryong.com/2008/12/05/programmatically-setting-the-default-value-of-a-spfieldboolean-field/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:17:29.123

对于是/否字段，您可以将其设置为“true”或“false”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T09:47:46.663

就我而言，使用 sharepoint 在线版本，我能够更新字段的唯一方法是使用 ParseAndSetFieldValue ListItem 方法。

```
 // Using ParseAndSetFieldValue instead of setting directly
 item.ParseAndSetFieldValue("FIELDNAME", "true"); // to set field to true
 item.ParseAndSetFieldValue("FIELDNAME", "false"); // to set field to false
 item.Update();
 // IF Content Approval is enabled on library / list
 item.File.Approve("Approval message.");
 // Needed to popuplate changes to sharepoint server.
 spContext.ExecuteQuery(); 
```

Hopes this helps. I've added this answer even the question is marked as solved because it didn't work in my case.

# jquery - 在 ruby on rails 中使用 jquery ajax 函数时多次调用页面

> ID：11432961
> 
> 赞同：0
> 
> 时间：2012-07-11T12:45:17.863
> 
> 标签：jquery

我是 Ruby on Rails 的新手。

我正在使用 ajax 按升序/降序对行进行排序，并且工作正常。通过单击行列表中的列名来完成排序。

但是我在firefox的firebug控制台中验证了我的运行区域。

第一次单击排序（列名）我的 jquery 只调用一次。在我使用排序之后，我的 jquery 文件调用了两次。我再次使用排序方式 jquery 调用 4 次。它像 1 次、2 次、4 次、8 次一样明智地调用。

如果我刷新页面，那么它会从 1、2、4、8 次开始这个问题......就像......

有谁能帮忙...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:56:01.863

实际上页面没有刷新。该功能只运行了一次以上。

我将 controlLoop 全局变量值声明为 0。如果 SortData 函数运行，则 controlLoop 值将递增。如果 controlLoop 值不等于 0，则该函数将停止对排序函数的工作。我知道这是错误的方式。但这不是最终的解决方案。如果我得到任何解决方案，我肯定会更新。

```
var controlLoop = 0;

function SortData()
{
    if(controlLoop == 0)
    {
        $.ajax({
        type: "POST",
        url: "/SortingFunction",
        data: params,
        success: function(data){

             ------- 
            controlLoop++;

        }});
    }
    return false;
} 
```

# javascript - Google Visualization API - 将颜色设置为特定点

> ID：11432962
> 
> 赞同：2
> 
> 时间：2012-07-11T12:45:22.340
> 
> 标签：javascript, google-visualization

有人知道如何将特定颜色设置为图表上的某个点吗？

例如：

![在此处输入图像描述](../Images/809970d2ea1e9b8c7c8473c04d6b8d3c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:55:07.160

没有关于更改每个条的颜色的官方文档，但是有一个简单的技巧可以实现这一点。您可以使用`isStacked:true`和重叠两个条。如果您只需要其他颜色，请使用第二条。

![最终输出](../Images/fad34b57ccb9b5180f2d538dd7294873.png)

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>

    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.

        var data = new google.visualization.DataTable();
        // Add columns
        data.addColumn('string', 'Category');
        data.addColumn('number', 'value');
        data.addColumn('number','value');//Used for red bar

        data.addRows(5);
        data.setCell(0, 0, 'Category 1');
        data.setCell(0, 1, 4.25);
        data.setCell(1, 0, 'Category 2');
        data.setCell(1, 1, 2.5);
        data.setCell(2, 0, 'Category 3');
        data.setCell(2, 1, 3.5);
        data.setCell(3, 0, 'Category 4');

        data.setCell(3, 2, 4.5);//Used because we need red or other color bar
        data.setCell(4, 0, 'Category 5');
        data.setCell(4, 1, 3.75);

        // Create and draw the visualization.
        new google.visualization.ColumnChart(document.getElementById('visualization')).
          draw(data,{isStacked: true});
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="visualization" style="width: 600px; height: 400px;"></div>
  </body>
</html> 
```

您可以在这里查看快速演示[http://jsfiddle.net/sXmzq/](http://jsfiddle.net/sXmzq/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:31:05.757

您必须声明要用于柱形图的所有颜色。没有理由不能用一种不同的喜欢`['blue','blue','blue','red','blue']`或你拥有的东西来复制它们。

[它在此处](https://developers.google.com/chart/interactive/docs/gallery/columnchart)的“颜色”下进行了解释。

# javascript - 使用 jquery 感知文本字符串中的时间范围

> ID：11432968
> 
> 赞同：-4
> 
> 时间：2012-07-11T12:45:40.783
> 
> 标签：javascript, jquery, regex

我希望能够使用正则表达式在字符串中查找时间范围，然后将它们包装在 <span> 中。时间范围的格式如下：

`Hello, I would like to meet between 9:00-12:00 but also 1:00-6:00 would work for me. Thank you.`

我希望最终输出为：

`Hello, I would like to meet between <span>9:00-12:00</span> but also <span>1:00-6:00</span> would work for me. Thank you.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:48:55.050

```
mystring.replace(/(\d{1,2}\:\d{2}\-\d{1,2}\:\d{2})/g,"<span>$1</span>") 
```

快！不过超级危险的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:49:09.707

这样的事情应该这样做：

```
var str = "your string here...";

str = str.replace(/(\d\d?:\d\d-\d\d?:\d\d)/g,"<span>$1</span>"); 
```

`\d`虽然匹配*任何*数字，所以上面接受“时间”之类的`99:99`- 您可能希望将其缩小到适当的数字范围。也许是这样的：

```
/((1[0-2]|\d):[0-5]\d-(1[0-2]|\d):[0-5]\d)/g 
```

# php - 用 PHP 发送短信，没有 header() 函数

> ID：11432985
> 
> 赞同：0
> 
> 时间：2012-07-11T12:47:01.243
> 
> 标签：php, sms-gateway, head

我正在从我的巴士票务网站发送短信。SMS可以发送如下：

```
header('Location: http://alerts.icisms.in/api/web2sms.php?workingkey=XXXXXX&sender=ABCD&to='.$number.'&message='.$message); 
```

但我需要回到我自己的网站。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T12:48:45.797

您使用 PHP 发出 HTTP 请求（例如，使用[cURL](http://php.net/curl)库或[fopen](http://php.net/fopen)）。

您没有将密钥提供给用户并要求他们的浏览器向 API 发出请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:49:57.143

从外观上看，您只需对该页面执行一个简单的请求即可。

您可以使用[CURL 函数](http://uk.php.net/manual/en/function.curl-init.php)或简单地使用[file_get_contents](http://uk3.php.net/file_get_contents)来执行单个 GET 请求来实现此目的。

通过使用`header`，您正在重定向不必要且可能不安全的客户端。编辑：可能报废，您在那里有一个身份验证密钥，因此将其提供给您的第三方用户根本不是一件好事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T12:55:00.750

使用 cURL 或简单的 file()/file_get_contents() 调用。

```
//call
$url = 'http://alerts.icisms.in/api/web2sms.php?workingkey=XXXXXX&sender=ABCD&to=' . $number . '&message=' . $message;

//do call
file($url); 
```

然后将您的标题位置设置为您的网站。

# c - C - 将 char 转换为 int

> ID：11432986
> 
> 赞同：1
> 
> 时间：2012-07-11T12:47:02.930
> 
> 标签：c, type-conversion

我知道要将任何给定的 char 转换为 int，此代码是可能的 [除了 atoi()]：

```
int i = '2' - '0'; 
```

但我从来不明白它是如何工作的，'0' 的意义是什么，我似乎没有在网上找到任何解释。

提前致谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T12:49:09.380

在 C 中，字符文字的类型为`int`。[[字符文字/IBM](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=/com.ibm.vacpp6m.doc/language/ref/clrc02ccon.htm) ]

在您的示例中， 的数值`'0'`为 48， 的数值`'2'`为 50。当您这样做时，`'2' - '0'`您会得到`50 - 48 = 2`. 这适用于从 0 到 9 的 ASCII 数字。

请参阅[ASCII 表](https://www.google.com/search?q=ascii%20table)以获得更好的图像。

**编辑：**感谢@ouah 的更正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:50:14.150

C 中的所有字符都用一个整数值表示，即字符的 ASCII 码。例如'0'对应于48，'2'对应于50，所以`'2'-'0'`得到你`50-48 = 2`

链接到 ASCII 表：[http ://www.robelle.com/smugbook/ascii.html](http://www.robelle.com/smugbook/ascii.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:49:38.993

当您使用逗号时，`' '`您将数字视为 char，如果将其赋予 int，则 int 将采用该字符的 ASCII 码的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T12:50:02.777

任何用单引号括起来的字符文字都对应一个代表该字符的 ASCII 代码的数字。事实上，此类文字的计算结果不是`char`，而是`int`，因此它们可以与其他数字文字完全互换。

在您的表达式中，`'2'`可以与 互换`50`，并且`'0'`可以与 互换`48`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T12:50:19.073

看看 ASCII 表。

`'0'`表示为 0x30，`'9'`表示为 0x32。

这导致

```
0x32 - 0x30 = 2 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-11T12:51:01.293

这都是关于相应字符的[ASCII码](http://www.asciitable.com/)的。

在 C 语言中，所有数字（0 到 9）都以 ASCII 值 48 到 57 顺序编码。所以`'0'`实际上得到的值是 48，`'2'`值是 50。所以当你写 时`int i = '2' - '0';`，你实际上是从 50 中减去 48，得到 2。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-11T12:51:09.037

`'0'`to`'9'`保证在所有字符集中都是 C 中的顺序值。这不限于 ASCII 和 C 不限于 ASCII 字符集。

所以这里的顺序意味着`'2'`值是`'0' + 2`。

关于`int`并`char`注意`'0'`and `'9'`values 是`int`C 中的 type 而不是 type `char`。字符文字的类型为`int`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-11T12:51:49.857

这两个术语在内部由数字的 ASCII 代码表示，并且由于数字具有连续的 ASCII 代码，减去它们可以得到两个数字之间的差异。

您也可以对字符执行类似的技巧，例如通过从小写字符中减去 32 将小写转换为大写

```
'a' - 32 = 'A' 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-11T12:52:33.487

这只是因为 ASCII 按顺序为字符分配代码，即“2”的字符代码比“0”的字符代码大 2。

在另一种编码中它不起作用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-07-11T12:54:00.007

当您将 char 转换为 int 时，它实际上将每个字符映射到 ascii 表中的适当数字。

这意味着`'2' - '0'`翻译为`50 - 48`. 所以你也可以用同样的方法找出两个字母的数字距离，例如 `'z' - 'a'`equals `122 - 97`equals`25`

您可以在 thsi 表中查找每个 ASCII 字符的数字表示： [http ://www.asciitable.com/](http://www.asciitable.com/)

实际上 a`char`只是一个无符号字节：C 只是针对不同的操作以不同的方式对待它。例如`printf(97)`产量`97`作为输出，但`printf((char)97)`会给你`'a'`作为输出。

# c++ - sscanf 写入变量问题

> ID：11432988
> 
> 赞同：1
> 
> 时间：2012-07-11T12:47:10.030
> 
> 标签：c++, c, scanf

我有这样的代码

```
sprintf(data, "%d|Hello world|Ticket|Offset=44|msgId=1050        %d|%d|%d", r+1,header->m_msgId,header->m_sequence,header->m_offset); 
```

其中 data 是一个大小为 100 的 char 数组，而 header 是一个结构变量。

现在在使用 sprintf 将整个数据写入数据之后，我想将整个数据分成两部分，然后将其复制到两个新变量中

```
char var1[100],var2[100]; 
```

这可以用 sscanf 来完成，但我想要的是在 var1 中我只想要部分直到

```
%d|Hello world|Ticket|Offset=44|msgId=1050 
```

而在var2中，我想要之后的部分，即

```
%d|%d|%d 
```

.一种方法是执行 %[^\t} 等等，但在这种情况下，var1 内的值是正确的，但 var2 内的制表符空间也与三个末尾的一些奇怪字符一起插入 %di 不能改变格式必须在我的变量数据中输入的**数据**。请帮助我，我该如何使用 sscanf 的帮助来做到这一点。谢谢提前提供任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:21:01.927

以下将提供所需的行为：

```
#include <stdio.h>
#include <string.h>

int main()
{
    char arr[] = "18|Hello world|Ticket|Offset=44|msgId=1050\t12|4|5";
    char var1[100];
    char var2[100];

    if (2 == sscanf(arr, "%[^\t]%s", var1, var2))
    {
        printf("var1[%s]\nvar2[%s]\n", var1, var2);
    }
    return 0;
} 
```

有关演示，请参见[http://ideone.com/j8am8](http://ideone.com/j8am8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:05:33.527

尝试这个...

```
char data[]="%d|Hello world|Ticket|Offset=44|msgId=1050        %d|%d|%d";
char var1[100], var2[100];
char *szField1, *szField2;

// extract var1
szField1 = strstr(data, "  " );
memset( var1, 0, sizeof( var1 ) );
strncpy( var1, data, szField1 - data );

// extract var2
szField2 = strstr( szField1, "%" );
memset( var2, 0, sizeof( var2 ) );
strcpy( var2, szField2 ); 
```

# model - ExtJS 4 - 请解释模型和存储

> ID：11432989
> 
> 赞同：1
> 
> 时间：2012-07-11T12:47:11.740
> 
> 标签：model, extjs4, store, extjs-mvc

我试图弄清楚似乎是最简单的事情：

我想通过返回 JSON 的服务器端调用加载一组对象，

为什么所有这些都会返回一些意想不到的东西？

```
> modelStore.data.items[0].Id
undefined
> modelStore.data.items[0].getId()
undefined
> modelStore.data.items[0].getTitle()
TypeError: Object [object Object] has no method 'getTitle'
> modelStore.getById(1)
null
> modelStore.getTotalCount()
1
> modelStore.first()
Ext.Class.newClass < should be PegModel?? 
```

**编码：**

```
Ext.define('PegfileApp.model.PegModel', {

  extend: 'Ext.data.Model',

  fields: ['Id', 'Title'],

  //hasMany: {model: 'RootDimension', name: 'rootDimensions'},

  proxy:
  {
    type: 'ajax',
    url: 'PegModel',
    timeout: 120000,
    noCache: false,
    reader:
    {
      root: 'PegModel',
      successProperty: 'success'
    }
  }
});

Ext.define('PegfileApp.store.PegModels', {
  extend: 'Ext.data.Store',
  model: 'PegfileApp.model.PegModel',
  autoLoad: true,
  autoSync: false,
  proxy: {
    type: 'ajax',
    url: 'PegModel',
    reader: {
      type: 'json',
      root: 'PegModels',
      successProperty: 'success'
    }
  }
}); 
```

**数据：**

```
{"PegModels":[{"Title":"PegModel","Id":1}],"success":true} 
```

我理解对于模型上定义的每个属性，我们都有一个相应的 getter：get{PropertyName}()？

我是否需要以某种方式将“记录”转换为“模型”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:51:13.570

您快到了。:)

商店有一系列模型，但您不能直接通过`items[]`. 例如，您使用`store.getAt(index)`方法代替`store.items[index]`。

另请查看`store.find()`方法和类似方法，以了解如何获取特定记录的索引。

一旦你得到记录，这将是你`record.get('fieldname')`用来获取不同字段的模型实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-16T15:34:56.117

意识到这是一个旧帖子，但即使在今天仍然出现很多。为简化起见，请考虑对对象建模并存储数组。Store 是一个对象数组。有时您只使用一个对象。其他时候，您想使用对象集合。诸如 Ext 之类的库使用允许您更方便地操作它们的方法来扩展这些“对象”和“数组”。

# c# - 在 TouchMoved 中无法接收超过一次触摸

> ID：11432999
> 
> 赞同：0
> 
> 时间：2012-07-11T12:48:10.337
> 
> 标签：c#, ios, mono, multi-touch, touches

我想获得移动触摸的位置，所以我需要获得在**TouchesMoved**中移动的触摸数组。我知道如何获取数组，但问题是它只能获得一次触摸，当我放多根手指时，它只会提供第一次触摸信息，因为数组只有一个元素。它在以下代码块中进行了演示：

```
public override void TouchesMoved (NSSet touches, UIEvent evt)
    {
        base.TouchesEnded(touches, evt);
        Console.WriteLine(touches.Count);
    } 
```

它总是打印 1。这意味着它只包含一个元素。

此致，佩曼·莫尔塔扎维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:51:47.060

我自己明白了。

您需要在接收触摸的面板中启用多点触摸。

让我们假设 myPanel 是这种情况。

```
myPanel.MultipleTouchEnabled = true; 
```

问候， S. Peyman Mortazavi