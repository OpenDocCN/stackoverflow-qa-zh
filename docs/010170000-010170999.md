# StackOverflow 问答 10170000-10170999

# php - 使用php获得最低价格

> ID：10170004
> 
> 赞同：2
> 
> 时间：2012-04-16T07:12:39.493
> 
> 标签：php, sql

```
Product |  bprice  |    fprice
abcd    |  89      |    65
ebcd    |  39      |    105
fbcd    |  23      |    45
gbcd    |  89      |    
hbcd    |  89      |    65
ibcd    |          |    65
jbcd    |  50      |    50 
```

sql+php

获取mysql记录后如何使用php脚本获得每种产品的低价

abcd $price = 65
fbed $price = 23
gbcd $price = 89
等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:16:24.390

`min($bprice,$fprice)`应该做你需要的。

* * *

编辑：修复处理空

```
if (is_null($bprice)) {
    $price = $fprice;
} elseif (is_null($fprice)) {
    $price = $bprice;
} else {
    $price = min($bprice,$fprice);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T07:16:39.860

使用 group by 语句：

```
SELECT MAX(bprice) AS maxbprice, MAX(fprice) AS maxfprice
FROM products
GROUP BY Product 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:31:45.873

```
$query = "SELECT * FROM product group by product";
$result = mysql_query($query) or die(mysql_error());
while ($row = mysql_fetch_object($result))
{
   if($row->bprice > $row->fprice)
   {
       $low=$row->fprice;
   } 
    else
   {
   $low=$row->bprice;
    }
} 
```

# iphone - 使用 Http Post 成功上传到服务器后图像变为水平

> ID：10170009
> 
> 赞同：1
> 
> 时间：2012-04-16T07:13:25.310
> 
> 标签：iphone, ios, xcode, uiimageview, uiimagepickercontroller

我使用图像选择器捕获图像，当时图像处于其实际位置。但是在将它上传到服务器后它变成了水平的。我不知道为什么会这样。

这是我的代码

```
 NSString *urlString = @"Url";
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSMutableData *body = [NSMutableData data];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    // file
    NSData *imageData = UIImageJPEGRepresentation(image.image, 90);

    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
   // [body appendData:[[NSString stringWithString:@"Content-Disposition: attachment; name=\"user_photo\"; filename=\"photoes.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.jpg\"\r\n",@"ImageNmae"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"desc\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:ImageDesc.text] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // close form
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // set request body
    [request setHTTPBody:body];

    //return and test
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T09:49:18.170

我发现这里的解决方案是代码。

```
- (UIImage *)scaleAndRotateImage:(UIImage *)image { // here we rotate the image in its orignel 
int kMaxResolution = 640; // Or whatever

CGImageRef imgRef = image.CGImage;

CGFloat width = CGImageGetWidth(imgRef);
CGFloat height = CGImageGetHeight(imgRef);

CGAffineTransform transform = CGAffineTransformIdentity;
CGRect bounds = CGRectMake(0, 0, width, height);
if (width > kMaxResolution || height > kMaxResolution) {
    CGFloat ratio = width/height;
    if (ratio > 1) {
        bounds.size.width = kMaxResolution;
        bounds.size.height = roundf(bounds.size.width / ratio);
    }
    else {
        bounds.size.height = kMaxResolution;
        bounds.size.width = roundf(bounds.size.height * ratio);
    }
}

CGFloat scaleRatio = bounds.size.width / width;
CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
CGFloat boundHeight;
UIImageOrientation orient = image.imageOrientation;
switch(orient) {

    case UIImageOrientationUp: //EXIF = 1
        transform = CGAffineTransformIdentity;
        break;

    case UIImageOrientationUpMirrored: //EXIF = 2
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        break;

    case UIImageOrientationDown: //EXIF = 3
        transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationDownMirrored: //EXIF = 4
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);
        break;

    case UIImageOrientationLeftMirrored: //EXIF = 5
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationLeft: //EXIF = 6
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationRightMirrored: //EXIF = 7
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeScale(-1.0, 1.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    case UIImageOrientationRight: //EXIF = 8
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    default:
        [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

}

UIGraphicsBeginImageContext(bounds.size);

CGContextRef context = UIGraphicsGetCurrentContext();

if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
    CGContextScaleCTM(context, -scaleRatio, scaleRatio);
    CGContextTranslateCTM(context, -height, 0);
}
else {
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
}

CGContextConcatCTM(context, transform);

CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return imageCopy;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:42:33.287

方向（在您的情况下是旋转）在图像的 exif 数据中。您需要在 iOS 上预先旋转图像或在服务器上对它们进行后旋转。

在 iOS 上，您可以检查`imageOrientation`.[`UIImage`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)

您可以通过剪断该代码来获取转换（您需要设置大小或更改代码部分。大小可能是原始大小）：

```
- (CGAffineTransform)transformForOrientation:(CGSize)newSize {
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (self.imageOrientation) {
        case UIImageOrientationDown:           // EXIF = 3
        case UIImageOrientationDownMirrored:   // EXIF = 4
            transform = CGAffineTransformTranslate(transform, newSize.width, newSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:           // EXIF = 6
        case UIImageOrientationLeftMirrored:   // EXIF = 5
            transform = CGAffineTransformTranslate(transform, newSize.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:          // EXIF = 8
        case UIImageOrientationRightMirrored:  // EXIF = 7
            transform = CGAffineTransformTranslate(transform, 0, newSize.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
    }

    switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:     // EXIF = 2
        case UIImageOrientationDownMirrored:   // EXIF = 4
            transform = CGAffineTransformTranslate(transform, newSize.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:   // EXIF = 5
        case UIImageOrientationRightMirrored:  // EXIF = 7
            transform = CGAffineTransformTranslate(transform, newSize.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
    }

    return transform;
} 
```

当然，您需要以某种方式将转换应用于您的 UIImage。但我认为您会在有关 stackoverflow 的其他问题中发现这一点。也许从[这里](https://stackoverflow.com/questions/5102474/rotate-uiimage-custom-degree)开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:33:29.380

它是媒体上传的一个很好的查询。

当您从设备捕获图像时，它会修复特定图像的方向。假设您以横向模式捕获图像，当您使用 imageView 显示此图像时，它会以纵向模式显示，因为基本的设备配置同时支持图像（横向和纵向），那么它可能会伪装成纵向，而实际存储在横向中。结果，当您在 UI (imageView) 中以纵向显示图像时，它会以横向方式保存在服务器上。最后 1) 图像在设备上水平写入。2) 由于应用程序的纵向模式处于活动状态，您已在 UI 上垂直显示它。3）但是当它被写入服务器时，它采用其原始模式（水平）。

因此，根据最佳建议，您应该在应用程序中以适当的模式显示媒体。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-04-16T07:17:33.880

```
 NSData *imageData = UIImageJPEGRepresentation(image.image, 90); 
```

90不是旋转角度吗？

**阅读文档后编辑**

```
 NSData *imageData = UIImageJPEGRepresentation(image.image, 90); 
```

看起来 90 应该是 0.9。不过可能不是问题。

# ajax - 如何在tomcat上允许跨域请求？

> ID：10170017
> 
> 赞同：5
> 
> 时间：2012-04-16T07:14:46.050
> 
> 标签：ajax, rest, cross-domain, tomcat6, same-origin-policy

我在 2 个单独的域上部署一个 web 应用程序，第一个 web 应用程序是部署在 tomcat 6 上的 restful 服务，第二个是静态内容（html、java 脚本），来自静态内容域的 java 脚本将调用 restful 服务. 但是同源策略不允许这样做，我的问题是：如何在tomcat上允许跨域请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:38:48.667

如果您能够专注于现代浏览器，我建议您研究[跨域资源共享](https://developer.mozilla.org/en/http_access_control)的 Java 实现，或者`CORS`，也许[像这样](http://software.dzhuvinov.com/cors-filter.html)。

Mozilla 在 FF3.5 中引入了 CORS，并且已经被广泛采用。IE 引入了一个竞争性的、更严格的标准，`XDomainRequest`称为不泄漏 cookie 信息，但只有 IE 支持它。

[IE 计划在 IE 10 中支持 CORS](http://caniuse.com/#search=CORS)，这使其成为首选技术。

# android - Android gson 流解析器或 android.util.jsonreader？

> ID：10170019
> 
> 赞同：6
> 
> 时间：2012-04-16T07:15:00.343
> 
> 标签：android, json, streaming, gson

我希望在 Android 应用程序中使用流式 json 解析器，我想知道是使用 gson 还是 android.util.jsonreader 库。假设许可和版本兼容性不是问题，鉴于以下情况，我应该更喜欢：

*   我处理了几 MB 的数据。
*   JSON 主要由压缩字符串组成，所以我真的不需要 Object 到 JSON 的映射。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T12:28:24.007

没关系：[android.util.JsonReader](http://developer.android.com/reference/android/util/JsonReader.html)和[com.google.gson.stream.JsonReader](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html)是相同的代码。这两个类具有相同的 API 和相同的行为。

也就是说，有一些微小的差异：

*   Android 的 JsonReader 仅适用于 Android 3.0 及更高版本。Gson 可以在一个[独立的 jar 文件](http://code.google.com/p/google-gson/downloads/list)中使用，您可以在任何版本的 Android 上使用。
*   Gson 可能会快一点，因为它总是有最新的优化。运送 Android 设备的版本总是比最新最好的版本稍旧。对于大多数应用程序，您不会注意到这种差异。

# c# - 字符串中的布尔运算符

> ID：10170021
> 
> 赞同：0
> 
> 时间：2012-04-16T07:15:09.640
> 
> 标签：c#, regex, replace

我正在尝试为运算`OR`符的操作数添加一个括号。例如，如果我有如下声明，

```
C>O AND C>4 OR C>0 AND C>5 
```

我想将其格式化如下

```
(C>O AND C>4) OR (C>0 AND C>5) 
```

我写了一个简单的代码来做到这一点，如下所示。但是，如果字符串包含多个`OR`语句，则代码将无法正常工作。有人告诉我正则表达式可以做到这一点。但我对正则表达式的了解非常少。

```
string mystring = "C>O AND C>4 OR C>0 AND C>5";
int indexFound = mystring.IndexOf("OR");
string left = mystring.Substring(0, indexFound - 1);
string right = mystring.Substring(indexFound + 2, mystring.Length - (indexFound + 2));
string output = "(" + left + ")" + "OR" + "(" + right + ")"; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:24:35.930

这是通过正则表达式的方式：

```
static string AddBracketsToOr(string input)
{            
    Regex regex = new Regex(@"(?<left>.+[AND|OR].+) OR (?<right>.+[AND|OR].+)");
    Match match = regex.Match(input);

    if (match == null)
        throw new Exception("Wrong input format");

    return String.Format("({0}) OR ({1})", 
                         match.Groups["left"], match.Groups["right"]);
} 
```

用法：

```
var result = AddBracketsToOr("C>O AND C>4 OR C>0 AND C>5"); 
```

更新：适用于

```
"C>O AND C>4 OR C>0 AND C>5" // (C>O AND C>4) OR (C>0 AND C>5)
"C>9 OR C>O AND C>4 OR C>0 AND C>5" // (C>9 OR C>O AND C>4) OR (C>0 AND C>5)
"C>9 OR C>O OR C>0 AND C>5" // (C>9 OR C>O) OR (C>0 AND C>5) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T07:18:26.723

您目前没有在代码中使用任何正则表达式。

该`.Substring()`方法找到第一个`OR`内部`mystring`并将其拆分为`left`子`right`字符串。因此，只有第一个`OR`可以按照您描述的方式处理。

您将不得不创建一个循环，`mystring`直到再也`OR`找不到 。

**示例代码**

```
string mystring = "C>O AND C>4 OR C>0 AND C>5";
string output = "";

int indexFound = mystring.IndexOf("OR");

// indexOf returns -1 if the string cannot be found.
// We quit our loop once -1 is returned.
while (indexFound > -1)
{
    // Compute the "left" side of our current mystring.
    string left = mystring.Substring(0, indexFound - 1);

    // And then append it to our final output variable.
    output += "(" + left + ")" + "OR";

    // Instead of directly adding the "right" side, we
    // "shorten" mystring to only contain the right side.
    // This effectively "skips" over the "left" and "OR"
    // and will allow us to process the remaining "OR"s.
    mystring = mystring.Substring(indexFound + 2)

    // Finally, we update indexFound to check if there
    // are any more "OR"s inside our mystring.
    indexFound = mystring.IndexOf("OR");
}

// Before returning, we add the remaining mystring to
// our output.  You have to decide whether you want
// to add the parentheses here.
output += "(" + mystring + ")"; 
```

希望有帮助。

# asp.net - 当必填字段验证器可见性 = false 时如何删除 div 中的换行符（asp.net）

> ID：10170023
> 
> 赞同：0
> 
> 时间：2012-04-16T07:15:15.427
> 
> 标签：asp.net, validation, line-breaks, requiredfieldvalidator

嗨，我有一个非常常见的问题，但找不到任何答案我有一个 div 并且里面有验证器控件。我在 ErrorMessage Text 中使用了 br 标签来显示在新行中显示每条消息。我的代码如下

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1" CssClass="lblMessageError"
        runat="server"  ErrorMessage="<br> User name field cannot be empty" ControlToValidate="txtUserName" SetFocusOnError="True"></asp:RequiredFieldValidator> 
    <asp:CustomValidator ID="CustomValidator1" runat="server" ClientValidationFunction="ClientValidate" ControlToValidate="txtPassword" CssClass="lblMessageError" ErrorMessage="<br />The password must be more than 6 characters."></asp:CustomValidator>  
    <asp:CompareValidator ID="CompareValidator1" runat="server" CssClass="lblMessageError" ControlToCompare="txtPassword" controlToValidate="txtRePassword" ErrorMessage="<br /> Password dont match with repassword"></asp:CompareValidator>  
</div> 
```

当没有发现错误时，它会显示换行符。我想要的是当没有发现错误时省略换行符。

1) 当所有验证器都被隐藏时

'<%--line Break 因为没有发现错误--%>
'<%--line Break 因为没有发现错误--%> ' <%--line Break因为没有发现
错误---%>

2）当一个验证器可见而另一个和隐藏时

用户名字段不能为空
' <%--line Break 因为没有发现错误--%>
' <%--line Break 因为没有发现错误---%>
'<%-- 在这里加入我的控件--%>

而且我也不想在同一行显示我所有的错误任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:25:19.283

将`Display="Dynamic"`属性添加到您的验证器，例如：

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1" CssClass="lblMessageError"
    runat="server"  Display="Dynamic" ErrorMessage="<br> User name field cannot be empty" ControlToValidate="txtUserName" SetFocusOnError="True"></asp:RequiredFieldValidator> 
```

# silverlight - 以编程方式访问支持的文化和中性语言

> ID：10170024
> 
> 赞同：1
> 
> 时间：2012-04-16T07:15:38.710
> 
> 标签：silverlight

在 Silverlight 中，我想以编程方式循环遍历为项目定义的 SupportedCultures 列表，并找到中性语言。我该怎么做？

# ruby-on-rails - 两个模型可以相互归属吗？

> ID：10170027
> 
> 赞同：1
> 
> 时间：2012-04-16T07:16:08.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我有两个模型，它们是一对一的。A 目前有一个 B。

最近我遇到很多情况，如果 A 保留 B 的 id 以简化逻辑并提高性能，这是可取的。但是我想知道是否：

1.  这个有可能
2.  会违反和约定
3.  真的有什么想法

* * *

更新

我错了，左外连接不会受益于额外的外键。

我能想到的唯一地方是找到所有没有 B 的 A，我的 100000 多条记录中的每一条都需要内部连接。但是，如果有一个 id，那么我可以立即知道哪个 A 有一个 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:52:51.887

我不相信这是可能的 - 你必须决定在哪里保存外键。使用通过关系连接以及现有模型都通过连接成为 has_one 对您来说有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:48:01.073

另一种选择是将A id 放在B 上，即非规范化。这将允许您确定哪些 A 没有 B，哪些 A 有 B。这可能适用于报告 B 不经常在 A 之间移动的场景。

# c - 要识别的库：睁眼/闭眼、嘴巴开/闭、头部运动

> ID：10170028
> 
> 赞同：1
> 
> 时间：2012-04-16T07:16:10.547
> 
> 标签：c, ruby, common-lisp, face-recognition

我正在编写一个能够识别面部以下内容的程序：

*   眼睛是睁着还是闭着
*   嘴是张开还是闭合（最好是张开的程度）
*   脸部转向的方式（左，右或正面）

而不是从头开始开发这个功能（这*不是*我的领域），我希望能够使用第三方库。

我希望能够在 Linux 和 Windows 上运行生成的软件（按重要性顺序），但乞丐不能选择 :-)

OSI 批准的许可证会很好，但专有许可证是可以接受的。

Ruby 或 Common Lisp 绑定会很棒，但 C API 也可以。

我非常感谢提供此功能的任何建议（支持或反对特定库）。

*编辑补充*：该软件的目的是识别婴儿需要喂养的迹象，并发出轻柔的警报以唤醒熟睡的父母。如果可能的话，这可能比让宝宝饿了开始哭，然后在喂奶前让宝宝平静下来要好得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:21:32.160

你检查过[OpenCV](http://opencv.willowgarage.com/wiki/ "开放式CV")吗？

它是一个具有 C++、C 和 Python 接口的开源计算机视觉库。它可能没有完全按照您的要求执行的功能，但包含许多可用于完成它的图像/视频分析算法。

# android - 从galleryActivity加载图像时泄漏了最初添加在这里的窗口？

> ID：10170029
> 
> 赞同：0
> 
> 时间：2012-04-16T07:16:21.247
> 
> 标签：android

当我在应用程序中从图库上传图像但选择一些图像时出现此异常。

```
android.view.WindowLeaked: Activity  has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4133c7d8 that was originally added here

android.view.WindowManagerImpl.addView(Win 
```

dowManagerImpl.java:152）我没有；为什么我随机得到异常？

此代码用于开放画廊..

```
Intent intent = new Intent();
         intent.setType("image/*");
         intent.setAction(Intent.ACTION_GET_CONTENT);
         ((Activity) context).startActivityForResult(Intent.createChooser(intent,"Select Picture"), PICK_FROM_FILE); 
```

下面的代码用于从画廊 i 获取 bimap

```
f (resultCode == RESULT_OK ) 
                   {

                        Uri contentUri = data.getData();
                        System.out.println("**************contentUri***************"+contentUri);
                        String[] proj = { MediaStore.Images.Media.DATA };
                        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
                        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                        cursor.moveToFirst();
                        String tmppath = cursor.getString(column_index);
                        // File abc= new File(tmppath);
                        System.out.println("**************tmppath***************"+tmppath);

                        Bitmap mBitmap = BitmapFactory.decodeFile(tmppath); 
                       // Bitmap bitmap = BitmapFactory.decodeFile(abc);
                        System.out.println("**************mBitmap(gallery)***************"+mBitmap);
                        Court_formations  objectdat =new Court_formations();
                        objectdat.showGalleryimage(getDialogContext(),mBitmap); 
```

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:48:49.110

在 onactivity 结果中尝试使用这些代码：

```
Uri selectedImageUri = Uri.parse(data.getDataString());
ContentResolver cr = getContentResolver();
InputStream in = null;
try {
in = cr.openInputStream(selectedImageUri);
} catch (FileNotFoundException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize=20;
Bitmap mBitmap = BitmapFactory.decodeStream(in,null,options);
Court_formations  objectdat =new Court_formations();
objectdat.showGalleryimage(getDialogContext(),mBitmap); 
```

# css - 导航栏在 iPad 上未拉伸全宽

> ID：10170031
> 
> 赞同：0
> 
> 时间：2012-04-16T07:16:30.200
> 
> 标签：css, ipad, web, navigationbar

我正在建立一个网站，我想我会在我的新 iPad 上测试它。我在网站顶部有一个标题/导航菜单，它在我的桌面上呈现良好。（在所有主要浏览器中测试）。然而，当在我的 iPad 上测试它时，导航栏不会拉伸整个屏幕。页脚也会发生这种情况。

这是用于栏的 CSS 代码

```
#topmenu {
margin:0 auto;
height: 85px;
background: url(http://dl.dropbox.com/u/6384916/web/img/bg-ripple-header.png) repeat  bottom left;
width:100%;} 
```

那么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:23:13.967

**将min-width**定义为您的`#topmenu`. 例如

```
#topmenu {
margin:0 auto;
min-width:1000px;
height: 85px;
background: url(http://dl.dropbox.com/u/6384916/web/img/bg-ripple-header.png) repeat  bottom left;
width:100%;
} 
```

# java - 具有时间延迟的递归函数调用

> ID：10170036
> 
> 赞同：1
> 
> 时间：2012-04-16T07:16:53.203
> 
> 标签：java, multithreading, web-services, recursion, scheduled-tasks

我有一个 Web 应用程序，我需要运行一个后台进程，该进程将访问一个 Web 服务，在得到响应后它将等待几秒钟（比如 30 秒）然后再次访问该服务。响应数据可以从非常少到非常大，所以我不想再次调用该过程，直到我完成数据处理。所以，它是一个有时间延迟的递归调用。我打算怎么做是：

1.  将 ContextListener 添加到 Web 应用程序。

2.  在 contextIntialized() 方法上，调用 invokeWebService() 即任意方法来访问 Web 服务。

3.  invokeWebService 将如下所示：

    ```
    invokeWebService()
    {

    //make request

    //hit service

    //get response

    //process response

    timeDelayInSeconds(30);

    //recursive call
    invokeWebService();

    } 
    ```

请。建议我是否做得对。或者使用线程或调度程序。请。用示例代码回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:59:32.960

您可以使用 a [`ScheduledExecutorService`，它是自 1.5 以来标准 JDK 的一部分](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)：

```
 ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
    Runnable r = new Runnable() {

        @Override
        public void run() {
            invokeWebService();
        }
    };

    scheduler.scheduleAtFixedRate(r, 0, 30, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:22:33.880

它不是递归的，而是重复的。您在这里有两个选择：

*   将 Timer 和 TimerTask 与 scheduleAtFixedRate 一起使用
*   重复使用 Quartz。

在石英中，您可以使用以下代码创建重复计划：

```
TriggerBuilder.newTrigger().withSchedule(SimpleScheduleBuilder.repeatSecondlyForever(30))
                .build() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:24:53.597

据我所知，等待有点意味着挂起，我真的不认为这是一个好主意。我建议您使用[Quartz](http://quartz-scheduler.org/)之类的东西，并以您希望的任何时间间隔运行您的方法。

> Quartz 是一个功能齐全的开源作业调度服务，可以与几乎任何 Java EE 或 Java SE 应用程序集成或一起使用

教程可以在[这里](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/)访问。

如[here](https://stackoverflow.com/questions/2676295/quartz-preventing-concurrent-instances-of-a-job-in-jobs-xml)所述，您可以执行以下操作：

```
JobDetail existingJobDetail = sched.getJobDetail(jobName, jobGroup);
    if (existingJobDetail != null) {
        List<JobExecutionContext> currentlyExecutingJobs = (List<JobExecutionContext>) sched.getCurrentlyExecutingJobs();
        for (JobExecutionContext jec : currentlyExecutingJobs) {
            if(existingJobDetail.equals(jec.getJobDetail())) {
                //String message = jobName + " is already running.";
                //log.info(message);
                //throw new JobExecutionException(message,false);
            }
        }
        //sched.deleteJob(jobName, jobGroup); if you want to delete the scheduled but not-currently-running job
    } 
```

# java - 如何检测文本文件是否使用 Windows-1256 编码？

> ID：10170037
> 
> 赞同：1
> 
> 时间：2012-04-16T07:16:53.287
> 
> 标签：java, unicode, character-encoding

我真的很想知道该文件是否为 Windows-1256。有没有办法识别文本文件是否是 Java 中的 Windows-1256？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:20:14.010

您可以使用此 API 来检查编码：

[http://jchardet.sourceforge.net/](http://jchardet.sourceforge.net/)

看看这个问题：

[Java：如何确定流的正确字符集编码](https://stackoverflow.com/questions/499010/java-how-to-determine-the-correct-charset-encoding-of-a-stream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:09:05.607

将编码头添加到文件中。许多文本编辑器这样做：

```
# -*- coding: cp1256 -*- 
```

除此之外，没有可靠的方法可以做到这一点。

问题是 cp12xx 编码彼此之间并没有太大的不同。它们在屏幕上*看起来*不同，但在文件数据中，没有任何内容表示`0x8a`阿拉伯语`ٹ`（1256）或Š（1250 和 1252）或什么都没有（1255）。

PS：由于从右到左的问题，最后一句话看起来不对。代码“(1256)”实际上是在阿拉伯字符之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:30:09.947

假设您可以选择 Windows-1256（阿拉伯语）、UTF-8 和 Windows-1252（西欧的一部分）。然后，您可以为 UTF-8（不合理序列）和 Windows-1252 注册错误编码的证明。无论如何，某些 Windows-1252 序列会为 UTF-8 抛出无法解析的异常——

```
try {
    readInUTF8(file);
} catch (IsWindows1256Exception e {
    readInWindow1256(file);
} 
```

*（伪代码）*

# cakephp - 如何验证多维数组中的值？

> ID：10170039
> 
> 赞同：0
> 
> 时间：2012-04-16T07:17:00.933
> 
> 标签：cakephp, cakephp-2.0

```
$year = $this->Form->input('exp_year', array(
                                'type' => 'date',
                                'maxYear' => date('Y', strtotime('+ 7 years')),
                                'minYear' => date('Y'),
                                'dateFormat' => 'Y',
                                'empty' => '----',
                                'label' => false

                                    )
    )); 
```

所以我试图获得到期年份，这是发布为：

```
 'exp_year' => array(
                    'year' => '2016'
                ), 
```

我试过了，但在这种情况下没有在文档中看到任何内容。

```
 'exp_year' => array( 'year' => array(
                'required' => array(
                    'rule' => array('numeric'),
                    'message' => 'Must select an expiration year'
        )
           )
     ),

    'exp_year' => array( array(
                'required' => array(
                    'rule' => array('numeric'),
                    'message' => 'Must select an expiration year'
        )
                 )
     ), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:18:09.920

看起来 cake 的内置数据验证规则当前无法处理“Y”日期格式。（[内置验证规则列表](http://book.cakephp.org/2.0/en/models/data-validation.html#core-validation-rules)）

即使这样做了，也没有简单的方法可以在类属性中指定动态值，因此您将无法在 Model $validate 声明中使用 date("Y") ，您将使用在其他地方指定的常量您的应用程序...底线：不优雅且难以维护。

所以最简单的方法是使用自定义验证函数，实现起来非常简单：[添加自己的验证方法](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)

# sql - 如何获得最近日期的总数

> ID：10170043
> 
> 赞同：1
> 
> 时间：2012-04-16T07:17:16.097
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

我想获得每个 id 的最大（日期）。

```
ID Date Total

01 02/01/2012 500
01 01/02/2012 1000
01 02/03/2012 350
02 17/01/2012 250
02 15/02/2012 150
03 01/12/2011 225
...
... 
```

我想获得每个 ID 的最大（日期）总数。

尝试查询

```
Select id, total from table1 where date > max(date) group by id, total 
```

获取错误消息为

“聚合可能不会出现在 WHERE 子句中，除非它位于 HAVING 子句或选择列表中包含的子查询中，并且被聚合的列是外部引用。”

预期产出

```
ID Date Total

01 02/03/2012 350
02 15/02/2012 150
03 01/12/2011 225
...
... 
```

这个怎么做。

需要查询帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:22:26.710

```
Select id, date, total 
from table1 t
where date = (select max(date) from table1 where id = t.id
group by id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T07:25:38.533

这应该适合你：

```
select *
from total t inner join
    (   select id, max(date) as date
        from total
        group by id ) m on t.id = m.id and t.date = m.date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:35:38.167

此查询将起作用

```
select * from dbo.Table t1
where Date >= (select max(Date) from dbo.Table t2
where t1.ID = t2.ID) 
```

# android - Android 4.0.3 智能手机作为电脑主机

> ID：10170045
> 
> 赞同：0
> 
> 时间：2012-04-16T07:17:31.090
> 
> 标签：android, usb, host

是否可以将运行主机的 Android 智能手机连接到计算机（作为设备工作？）我正在编写一个应该通过智能手机远程控制相机的应用程序。由于模拟器不支持 USB 连接，因此我在测试我的应用程序时遇到了一些麻烦。但是当我将智能手机连接到相机时，我真的不知道出了什么问题。我想将手机连接到计算机，以便它可以显示它正在接收的字符，但我真的不知道它是否会工作，因为计算机通常作为其他设备的主机，而不是相反。非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:30:30.370

计算机不能充当设备。如果您想在连接相机时查看智能手机上发生的情况，请使用 `adb shell` `dmesg`命令查看日志并查看是否检测到相机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:59:18.590

你可能想看看这里[http://developer.android.com/guide/topics/usb/host.html](http://developer.android.com/guide/topics/usb/host.html)

虽然提到某处没有 android 3.1 中的 google io mobile 不支持主机模式，但也许这在 4.0 中发生了变化，这可能是真实的，基于此视频[http://www.youtube.com/watch?v=sQGxckZkH2g](http://www.youtube.com/watch?v=sQGxckZkH2g)

# wpf - 如何使 CollectionView 分组尊重数据模板设置

> ID：10170050
> 
> 赞同：3
> 
> 时间：2012-04-16T07:17:49.890
> 
> 标签：wpf

我有具有组样式的 ListBox：

```
<GroupStyle HidesIfEmpty="True" x:Key="GroupStyle">
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Margin" Value="0,0,0,5"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Expander IsExpanded="True" BorderBrush="#FFA4B97F" BorderThickness="0,0,0,1">
                                    <Expander.Header>
                                        <DockPanel Background="LightSkyBlue" 
                                                           Width="{Binding RelativeSource={RelativeSource  Mode=FindAncestor,  AncestorType={x:Type Expander}},
                                                                           Path=ActualWidth}">
                                            <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100"/>
                                            <TextBlock FontWeight="Bold" Text="{Binding Path=ItemCount}"/>
                                        </DockPanel>
                                    </Expander.Header>
                                    <Expander.Content>
                                        <ItemsPresenter/>
                                    </Expander.Content>
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle> 
```

绑定集合的任何更改都会导致扩展器重新打开。有什么方法可以记住用户的偏好并让扩展器折叠起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:08:25.820

问题是你在用绑定集合做什么。我同意 Nikolay 的观点，最好的选择是让您的 viewmodel 有一个属性，您可以将扩展器绑定到该属性。

至于我一开始就问的问题：你是不是有点刷新了CollectionView？刷新会导致重新创建 UI。（意思是，它就像在 ObservableCollection 上重置。它告诉 UI 创建用户控件并再次加载模板的 XAML，这对性能不利）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:31:56.617

我可以建议一个简单的技巧 - 只需将 IsExpanded 属性添加到您的模型类并将 Expander.IsExpanded 绑定到它。

# sql-server-2008 - 如果我禁用正在运行的作业，它会停止作业吗？

> ID：10170051
> 
> 赞同：4
> 
> 时间：2012-04-16T07:18:04.717
> 
> 标签：sql-server-2008

在 SQL SERVER 2008 中，如果我禁用正在运行的作业，它会停止作业吗？

我在两周前测试了iteM，结果它会根据禁用/启用的最后一个结果回滚正在运行的作业。

我已经对该项目进行了双重测试，但结果相反。当作业被禁用时，它不会停止正在运行的作业。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T09:49:46.627

如果您在运行时禁用作业，它将继续执行已经开始的执行。这是你想知道的吗？

# javascript - YouTube 全屏控制不显示

> ID：10170052
> 
> 赞同：1
> 
> 时间：2012-04-16T07:18:04.873
> 
> 标签：javascript, youtube-api, dom-events

我正在动态添加 <iframe> 并添加 YouTube 视频。YouTube 播放器工作正常，但未显示全屏控件。

代码是：

```
var newIframe = $("<iframe width='80px' height='80px' "
  + "src='http://www.youtube.com/watch?v=r3TtgYuaVFk' "
  + "frameborder='0' allowfullscreen id='vid" + mindBoxID + "'>");
var tmp = "#"+mindBoxID;
$(tmp).append(newIframe); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:47:53.120

您`src`的网址错误，请`src='http://www.youtube.com/embed/r3TtgYuaVFk'`改用。

```
var newIframe = $("<iframe width='80px' height='80px' "
  + "src='http://www.youtube.com/embed/r3TtgYuaVFk' "
  + "frameborder='0' allowfullscreen id='vid" + mindBoxID + "'>");
var tmp = "#"+mindBoxID;
$(tmp).append(newIframe); 
```

<iframe> 嵌入视频的文档可在此处获取[https://developers.google.com/youtube/player_parameters#Manual_IFrame_Embeds](https://developers.google.com/youtube/player_parameters#Manual_IFrame_Embeds)

# elasticsearch - 如何在 Elasticsearch 中索引嵌套类型的数组？

> ID：10170053
> 
> 赞同：6
> 
> 时间：2012-04-16T07:18:10.963
> 
> 标签：elasticsearch

我正在研究 ElasticSearch。在这里，我想通过一个 JAVA api 索引一个嵌套类型字段的数组。任何人都可以举一个例子。我尝试了一些但他们失败了。

```
XContentBuilder xb1 =  XContentFactory.jsonBuilder().startObject(); 
XContentBuilder xb2 =  XContentFactory.jsonBuilder().startObject(); 

xb1.startArray("eventnested"); 
for(int j=0;j<2;j++) { 
    xb2.field("event_type",eventType); 
    xb2.field("event_attribute_instance",eventInstance); 
    xb2.startArray("attributes"); 
    for(int i=0;i<2;i++) { 
        XContentBuilder xb3 = XContentFactory.jsonBuilder().startObject(); 
        xb3.field("event_attribute_name", attrName); 
        xb3.field("event_attribute_value", attrValue); 
        xb2.value(xb3.copiedBytes()); 
    } 
    xb1.value(xb2.copiedBytes()); 
} 
```

索引数据后，当我读取响应时，特定字段的数据看起来像

“eventnested.event_type”：[ “eyJldmVudF90eXBlIjoiUXVvdGF0aW9uIiwiZXZlbnRfYXR0cmlidXRlX2luc3RhbmNlIjoiMSIsImF0dHJpYnV0ZXMiOlsiZXlKbGRtVnVkRjloZEhSeWFXSjFkR1ZmYm1GdFpTSTZJbkJsY25OdmJpQWlMQ0psZG1WdWRGOWhkSFJ5YVdKMWRHVmZkbUZzZFdVaU9pSkxZWGtnVFdGcmFIVmlaV3hoSW4wPSJdLCJhdHRyaWJ1dGVzIjpbImV5SmxkbVZ1ZEY5aGRIUnlhV0oxZEdWZmJtRnRaU0k2SW5GMWIzUmxJQ0lzSW1WMlpXNTBYMkYwZEhKcFluVjBaVjkyWVd4MVpTSTZJblJvWlNCaWIza2djbUZ3WldRZ2RHaGxJSEJoYVhJZ2IyNGdiblZ0WlhKdmRYTWdiMk5qWVhOcGIyNXpMQ0IzYVhSb0lIUm9aU0JzWVhSbGMzUWdhVzVqYVdSbGJuUWdZbVZwYm1jZ2IyNGdSbkpwWkdGNUluMD0iXX0 =”，”eyJldmVudF90eXBlIjoiUXVvdGF0aW9uIiwiZXZlbnRfYXR0cmlidXRlX2luc3RhbmNlIjoiMSIsImF0dHJpYnV0ZXMiOlsiZXlKbGRtVnVkRjloZEhSeWFXSjFkR1ZmYm1GdFpTSTZJbkJsY25OdmJpQWlMQ0psZG1WdWRGOWhkSFJ5YVdKMWRHVmZkbUZzZFdVaU9pSkxZWGtnVFdGcmFIVmlaV3hoSW4wPSJdLCJhdHRyaWJ1dGVzIjpbImV5SmxkbVZ1ZEY5aGRIUnlhV0oxZEdWZmJtRnRaU0k2SW5GMWIzUmxJQ0lzSW1WMlpXNTBYMkYwZEhKcFluVjBaVjkyWVd4MVpTSTZJblJvWlNCMFpXVnVZV2RsY2lCb1lYTWdZbVZsYmlCd2JHRmpaV1FnYVc0Z1lTQnpZV1psZEhrZ2FHOXRaU0JoYm1RZ2QybHNiQ0JpWlNCamFHRnlaMlZrSUhkcGRHZ2djbUZ3WlNKOSJdfQ ==”

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T13:05:41.040

```
XContentBuilder xb =  XContentFactory.jsonBuilder().startObject();

xb.startArray("eventnested");
for(int j=0;j<2;j++) {
    xb.startObject();
    xb.field("event_type", eventType);
    xb.field("event_attribute_instance", eventInstance);
    xb.startArray("attributes");
    for(int i=0;i<2;i++) {
        xb.startObject();
        xb.field("event_attribute_name", attrName);
        xb.field("event_attribute_value", attrValue);
        xb.endObject();
    }
    xb.endArray();
    xb.endObject();
}
xb.endArray(); 
```

# jsf - 如何在 jsf backing bean 中获取 tinymce 的值

> ID：10170058
> 
> 赞同：0
> 
> 时间：2012-04-16T07:18:32.090
> 
> 标签：jsf, tinymce

我在 JSF 中使用 tinymce 编辑器，但我不确定如何在我的 Backing Bean 中获取此值。请如果有人之前使用过这个，请帮助我这样做。

```
 <script src="resources/tiny_mce/tiny_mce.js" type="text/javascript"></script>
<script type="text/javascript">
    tinyMCE.init({
   // General options
    mode : "textareas",
    theme : "advanced",
    plugins :  "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

   // Theme options
   theme_advanced_buttons1 :"bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
   theme_advanced_buttons2 : "cut,copy,paste,pastetext,|,bullist,numlist,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,preview,|,forecolor,backcolor",
   theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,media,advhr,|,styleprops,spellchecker,|,insertfile,insertimage",
   theme_advanced_toolbar_location : "top",
   theme_advanced_toolbar_align : "left",
   theme_advanced_statusbar_location : "bottom",
   theme_advanced_resizing : true,

   // Skin options
   skin : "o2k7",
   skin_variant : "silver",

  content_css : "css/example.css",

 }); 
```

```
 <ice:inputTextarea id="content" value="${bean.passage}" partialSubmit="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:52:11.723

替换`value="${bean.passage}"`为`value="#{bean.passage}"`。`${}`不能调用setter方法，但是可以`#{}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-25T16:49:48.883

**通过选择器将 tinyMCE 连接到您的 jsf 组件**

在下面的示例中，您加载了一个包含函数“loadMyEditor()”的自己的 javascript 文件“loadhtmleditor.js”。这个函数在*body onload*中调用。*在这个 javascript 函数中，您通过选择器*而不是通过*模式*将 tinyMCE 连接到您的 jsf 组件。在选择器参数中，您编写要连接的组件的 html-id。请注意，在此参数中，由 jsf 生成的 html-id 中的 ':' 分隔符必须用两个反斜杠屏蔽！在此示例中：选择器：“#myForm\\:myHtmlText”

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <script src="resources/tiny_mce/tiny_mce.js" type="text/javascript"></script>
    <script src="resources/loadhtmleditor.js" type="text/javascript"></script>
</h:head>
<h:body onload="loadMyEditor();">
    <h:form id="myForm">
        <h:inputTextarea id="myHtmlText" value="#{bean.htmlText}">
        </h:inputTextarea>
    </h:form>
</h:body>
</html> 
```

加载htmleditor.js：

```
function loadMyEditor()
{
    tinyMCE.init({
           // General options
            selector : "#myForm\\:myHtmlText",
            theme : "advanced",
            plugins :  "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
           // Theme options
           theme_advanced_buttons1 :"bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
           theme_advanced_buttons2 : "cut,copy,paste,pastetext,|,bullist,numlist,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,preview,|,forecolor,backcolor",
           theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,media,advhr,|,styleprops,spellchecker,|,insertfile,insertimage",
           theme_advanced_toolbar_location : "top",
           theme_advanced_toolbar_align : "left",
           theme_advanced_statusbar_location : "bottom",
           theme_advanced_resizing : true,
           // Skin options
           skin : "o2k7",
           skin_variant : "silver",
          content_css : "css/example.css",
         });
} 
```

这应该足以将您的 jsf bean 绑定到 tinyMCE！

**补充：** 如果您想在用户更改 html 内容时**通过 ajax 做出反应，**您可以像这样扩展 tinyMCE 编辑器的创建：

加载htmleditor.js：

```
function loadMyEditor()
{
    tinyMCE.init({
           // General options
            selector : "#myForm\\:myHtmlText",
            theme : "advanced",
            plugins :  "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
           // Theme options
           theme_advanced_buttons1 :"bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
           theme_advanced_buttons2 : "cut,copy,paste,pastetext,|,bullist,numlist,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,preview,|,forecolor,backcolor",
           theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,media,advhr,|,styleprops,spellchecker,|,insertfile,insertimage",
           theme_advanced_toolbar_location : "top",
           theme_advanced_toolbar_align : "left",
           theme_advanced_statusbar_location : "bottom",
           theme_advanced_resizing : true,
           // Skin options
           skin : "o2k7",
           skin_variant : "silver",

           init_instance_callback: function (editor)
           {
               editor.on('Change', function(e){myFunctionEditorChanged(editor);});
               editor.on('Paste', function(e){myFunctionEditorPasted(editor);});
           },
           content_css : "css/example.css"
         });
}

function myFunctionEditorChanged(editor)
{
    tinyMCE.triggerSave(); // to be shure, that the changed content is in your jsf-component...
    // do something to trigger an ajax request handeling the changed html content. 
}

function myFunctionEditorPasted(editor)
{
    tinyMCE.triggerSave(); // to be shure, that the changed content is in your jsf-component...
    // do something to trigger an ajax request handeling the changed html content. 
} 
```

通过这种方式，您可以对用户通过键盘或粘贴内容输入到 html 编辑器的所有更改做出反应。当用户通过 tinyMCE 的菜单更改 html 内容时，我没有找到获取通知的方法。（例如，当用户将某些单词更改为粗体时......）

# jquery - ID不再工作jQuery

> ID：10170061
> 
> 赞同：1
> 
> 时间：2012-04-16T07:18:39.187
> 
> 标签：jquery

我设计了一个下拉菜单，它工作正常。这是我的代码，您也可以[在此处](http://jsfiddle.net/avKsT/1/)查看我的代码。

**html**

```
<div class="menu_option" id="hover-detail"><img src="images/menu_option_icon.jpg" alt=" " width="14" height="14" align="right" /> Menu Option

      <ul>
        <li><a href="#">link 1</a></li>
        <li><a href="#">link 1</a></li>
        <li><a href="#">link 1</a></li>
        <li><a href="#">link 1</a></li>
        <li><a href="#">link 1</a></li>
      </ul>

                      </div> 
```

**jQuery**

```
$(document).ready(function() {
    var Dropdown = {
        timer: 0,
        hide: function(callback, delay){
            console.log("hide");
            this.timer = setTimeout(function() {
                return callback.call(this, arguments);
        }, delay);
        },
        reset: function(){
            console.log("reset");
            this.timer && clearTimeout(this.timer);
        }
    };
    $('#hover-detail ul').css('display', 'none');
    $('#hover-detail').hover(function() {
        Dropdown.reset();
        $('#hover-detail ul').css({
            position: 'absolute',
            top: '20px',
            left: '0px',
            zindex: '99999'
        });
        $('#hover-detail ul').slideDown();
    }, function() {
        Dropdown.hide(function(){
            $('#hover-detail ul').slideUp()
        }, 200);
    });
    $('#hover-detail').hover(function() {
        Dropdown.reset();
    }, function(){
        Dropdown.hide(function(){
            $('#hover-detail ul').slideUp()
        }, 200);
    });
}) 
```

**CSS**

```
#hover-detail ul 
    {
        margin:0;
        padding:0;
        border:solid 1px #666;
        border-bottom:none;

        }
    #hover-detail ul li
    {
        list-style:none;
        margin:0;
        padding:0;
        display:inline;

        }
    #hover-detail ul li a
    {
        text-decoration:none;
        color:#333;
        padding:2px 50px 2px 10px;
        background:#F0F0F0;
        border-bottom:1px solid #666;
        /*line-height:25px;*/
        font:12px "Trebuchet MS", Arial, Helvetica, sans-serif;
        text-transform:capitalize;
        display:block;
        }
    #hover-detail ul li a:hover
    {
        background:#CCC;
        } 
```

问题是当我在页面上再次使用此下拉效果时，它不起作用。您可以查看[http://jsfiddle.net/avKsT/2/](http://jsfiddle.net/avKsT/2/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:24:34.527

ID 属性必须是唯一的。您不能对多个 html 标签使用相同的 ID。您可以使用类选择器。

我更新你的代码。你可以检查一下。[http://jsfiddle.net/avKsT/17/](http://jsfiddle.net/avKsT/17/)

```
$(document).ready(function() {
    var Dropdown = {
        timer: 0,
        hide: function(callback, delay){
            console.log("hide");
            this.timer = setTimeout(function() {
                return callback.call(this, arguments);
        }, delay);
        },
        reset: function(){
            console.log("reset");
            this.timer && clearTimeout(this.timer);
        }
    };
    $('.hover-detail ul').css('display', 'none');
    $('.hover-detail').hover(function() {
        Dropdown.reset();
        $('#hover-detail ul').css({
            position: 'absolute',
            top: '20px',
            left: '0px',
            zindex: '99999'
        });
        $(this).children('ul').slideDown();
    }, function() {
        $(this).children('ul').slideUp();
    });
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:24:15.960

Dom 元素 id 必须是唯一的。当您再次使用下拉菜单时，您将插入另一个具有相同 ID“hover-details”的元素。将第二个 Id 更改为其他内容或使用类作为您的逻辑选择器。

# java - 创建要在任何其他机器上运行的 jar 文件

> ID：10170062
> 
> 赞同：0
> 
> 时间：2012-04-16T07:18:43.270
> 
> 标签：java

我必须创建一个 jar 文件，其中我需要在类路径、属性文件中添加外部 jar 文件，以便在任何其他机器上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:24:46.327

您可以使用 manifest.mf 定义外部类路径或使用组成类路径并运行您的应用程序的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:25:21.997

我真的建议您使用 Maven 之类的构建工具来处理这些事情：

[http://maven.apache.org/](http://maven.apache.org/)

[如何使用 Maven 创建具有依赖关系的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)

问候，

博斯科普

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:35:13.050

您几乎可以在任何 IDE 中制作 jar。我同意 Michael SchmeiBer 的观点，请说得更具体一些。

我使用eclipse作为我的IDE（因为你可以在windows和Ubuntu Linux中都使用它）来制作一个jar（你可以在jar中定义启动类）。

我使用不同的方法来启动不同的机器。

我使用 nsis 创建一个不错的 windows 可执行文件 (.exe) 您可以包含自己的图标。

在 nsis 脚本中，您实际上使用了在批处理命令中使用的相同命令。nsis 有一些不错的功能，比如搜索 java jre。

对于 Linux 和 Mac，我使用带有此命令的 .sh 文件。

# jquery - 带有jquery的图像复选框表单

> ID：10170067
> 
> 赞同：2
> 
> 时间：2012-04-16T07:19:10.640
> 
> 标签：jquery, html

我想制作一个复选框表单，将鼠标悬停在图像上并使用 jquery 检查图像功能。

我成功地制作了这个功能，但效果不够好。

这是我的 html 表单。

```
<label for="w_interest">
    <img src="/images/account/w_select.png_img"/ style='cursor:pointer;'>
    <input name="w_interest" type="checkbox" id="w_interest" style="display:none">
</label> 
```

这是jQuery

```
$(document).ready(function () {
  $('#img').hover(
     function () {
         $(this).attr('src', '/images/account/ws_145_hover.png');
      },
     function () {
         $(this).attr('src', '/images/account/ws_145.png');
      }
  );

  $("#img").click(function() {
     if(1) {
         $(this).attr("src", "/images/account/ws_145_checked.png");
         $("#w_interest").val("0");
     } else {
         $(this).attr("src", "/images/account/ws_145.png");
         $("#w_interest").val("1");
     }
  });
}); 
```

1.  当我单击图像时，它会变为选中的图像。但是，当我将鼠标移出时，它会变为原始图像。我想确保它保持检查图像。

2.  我想确保它检查复选框输入。

3.  如果用户再次单击选中的图像，它将取消选择复选框输入。

你能帮我修复 jquery 以实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:01:06.183

见这个例子：http: [//jsfiddle.net/tErvQ/](http://jsfiddle.net/tErvQ/)

代码：

```
$('.imag_box img').hover(
     function () {
         if($(this).next().val() !== "1") {
             $(this).attr('src', 'http://placehold.it/150/000000/fbaf5d');
         }
      },
     function () {
         if($(this).next().val() !== "1") {
             $(this).attr('src', 'http://placehold.it/150/000000/ffffff');
         }
     }
  );

$(".imag_box img").click(function() {
    if($(this).next().val() !== "1") {
         $(this).attr("src", "http://placehold.it/150/000000/00ff18");
         $(this).next().val("1");
    } else {
         $(this).attr("src", "http://placehold.it/150/000000/ffffff");
         $(this).next().val("0");
    }
}); 
```

希望这就是你所需要的:)

使用检查的属性可能是一个更好的主意，因为如果您正在提交表单，它可能会在帖子中得到更好的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:32:02.660

如果（1）{是错字吗？

我认为你应该与

```
if($("#w_interest").val() == 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:01:25.297

试试这个：

```
$(document).ready(function () {
    var images = [
        '/images/account/ws_145.png',
        '/images/account/ws_145_hover.png'
    ];
    var $w_interest = $("#w_interest");
    var $img = $('#img');
    $img.hover(function () {
        $img.attr('src', images[1]);
    }, function () {
        if($w_interest.val() == "0") {
            $img.attr("src", images[0]);
        }
    });

    $img.click(function() {
        if($w_interest.val() == "1") {
            $img.attr("src", images[0]);
            $w_interest.val("0");
        } else {
            $img.attr("src", images[1]);
            $w_interest.val("1");
        }
    });
}); 
```

# android - 每次方向切换时应用程序执行 AsyncTask

> ID：10170068
> 
> 赞同：0
> 
> 时间：2012-04-16T07:19:19.000
> 
> 标签：android, screen-orientation

我的应用程序的当前实现有问题。我执行 asynctask onActivityCreated 但如果用户只是更改手机的方向，我对此不感兴趣。当用户改变手机的方向时，确保不进行不必要的异步调用的正确方法是什么？

这里有两个方法onActivityCreated 和populateList。populateList 被称为 onPostExecute()。

```
 @Override
public void onActivityCreated(Bundle savedInstanceState) 
{

    super.onActivityCreated(savedInstanceState);

    userControl = new UserController(getSherlockActivity());
    lv = (ListView)getView().findViewById(R.id.callforwardlist);
    lv.setTextFilterEnabled(true);

    list = new ArrayList<HashMap<String,String>>();

    callForwardList = new SimpleAdapter( 
            getSherlockActivity(), 
            list,
            R.layout.callforward_items,
            new String[] { "line1","line2" },
            new int[] { R.id.callforward_item_text, R.id.callforward_number } );

    new PullInfoTask().execute();

    lv.setAdapter( callForwardList );

    lv.setOnItemClickListener(new OnItemClickListener() {
   // *snip*

  });

}

    private void populateList() 
{

    cfinfo = userControl.GetCallForwardInfo();

    if(Integer.parseInt( cfinfo[0]) == 1)
        addItem("Viderestilling altid", cfinfo[1]);
    else
        addItem("Viderestilling altid", "Slået fra");
    if(Integer.parseInt(cfinfo[2]) == 1)
        addItem("Viderestilling ved optaget", cfinfo[3]);
    else
        addItem("Viderestilling ved optaget", "Slået fra");
    if(Integer.parseInt(cfinfo[4]) == 1)
        addItem("Viderestilling ved intet svar", cfinfo[5]);
    else
        addItem("Viderestilling ved intet svar","Slået fra");

    // Timeout Item
    addItem("Timeout",cfinfo[6]);

      callForwardList.notifyDataSetChanged();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:28:17.573

有一种简单的方法可以停止使用，

`android:configChanges="orientation"``Manifest`在文件中为那个声明这个属性`Activity`。

建议不要使用它并在代码中自己处理orientationChange。

使用`onRetainNonConfigurationInstance()`完整的教程，您可以浏览**[此博客](http://www.gitshah.com/2011/03/how-to-handle-screen-orientation_28.html)**。也可以在开发者网站上**[阅读这里。](http://developer.android.com/guide/topics/resources/runtime-changes.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:26:13.007

只需将其添加到您的活动清单文件中

android:configChanges="keyboardHidden|orientation"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:29:16.777

当手机改变它的方向时，当前的活动被破坏，并用新的资源（如果有的话）创建一个新的活动。这就是 Android 的默认行为。但是，您可以通过告诉虚拟机您将通过添加`android:configChanges="orientation"`到清单中的活动来手动处理方向更改来避免它。

# sitecore - 面向营销人员的 Sitecore Webforms 是否具有 JQuery 依赖项，是否可以更改？

> ID：10170070
> 
> 赞同：1
> 
> 时间：2012-04-16T07:19:36.847
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

Sitecore.NET 6.4.1（修订版 111003），面向营销人员的 Web 表单 2.2.0 修订版 111104。

我的网站页面严重依赖 JQuery，其中包括折叠导航、启动和控制动画、幻灯片等以及标题的画布效果。我们使用的是 JQuery 1.6.1。

但是当我将一个表单插入到一个项目中时，所有的 JQuery 调用都会中断。

面向营销人员的 Web 表单是否具有 JQuery 依赖项，如果有，是否可以将其更改为使用我们当前使用的版本？

**编辑：**

我找到了问题发生的地方，但仍然没有解决方案。

这是我们的导航功能（无论如何打开）

```
 navigation: function () {

    $('#myNavElement')...stuff that gets done } 
```

这在哪里：

`$('#myNavElement')`应该从 jQuery 返回一个元素。

相反，它跳入了这个函数：

```
function $(element) {
if (arguments.length > 1) {
for (var i = 0, elements = [], length = arguments.length; i < length; i++)
elements.push($(arguments[i]));
return elements;
}
if (Object.isString(element))
element = document.getElementById(element);
return Element.extend(element);
} 
```

来自`/sitecore/shell/controls/lib/prototype/prototype.js`WFFM注入body标签的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:51:51.287

只需将您的 jQuery 包装在完整的 jQuery 函数名称中。例如

```
jQuery('#myNavElement') 
```

另一种方法是将整个自定义 jQuery 脚本包装在一个闭包中，并为 jQuery 速记传入一个局部变量，例如

```
(function($){
  //  your existing code that used $ in here
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:11:04.987

面向营销人员的 Web 表单仅将 jQuery 用于后端模块，而不依赖于前端。

# asp.net - 使用c#将文件从一台服务器写入另一台服务器时出错

> ID：10170075
> 
> 赞同：0
> 
> 时间：2012-04-16T07:20:18.320
> 
> 标签：asp.net, asp.net-mvc-3, amazon-ec2, iis-6, .net

我正在尝试`FileStream`从我的网络服务器上传一个上传到其他服务器，这给出了错误：

```
Logon failure: unknown user name or bad password.

Stack Trace:
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access) 
```

应用程序池在“网络服务”下运行，我已将此用户的其他服务器的文件夹权限设置为“网络服务 => 完全控制”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:27:29.597

机器 A 上的“网络服务”帐户与机器 B 上的“网络服务”帐户不同。它们都是依赖于机器的身份，您不能针对另一个身份。

相反，您可以将目标文件夹上的读/写权限授予“每个人”——这样就可以了。

如果您在域环境中，那么解决此类问题的一个常见技巧是使用域帐户作为应用程序池标识 - 这样您就可以在机器 B 上的文件夹上设置 ACL，因为它可以“看到”机器 A 上的应用程序池正在使用的身份。

# android - “Wifi 看门狗服务（android.server.ServerThread）不需要看门狗”是什么意思？

> ID：10170076
> 
> 赞同：4
> 
> 时间：2012-04-16T07:20:21.773
> 
> 标签：android

我已经实现了一个应用程序，它通过 Wi-Fi 通过 TCP/IP 与服务器通信，它必须与服务器通信，即使设备进入睡眠模式，所以我实现了部分唤醒锁定，所以即使设备进入睡眠模式 CPU 也会已打开，因此 Wi-Fi 也已打开。

问题：如果我在应用程序运行的情况下让设备闲置 7-8 小时左右，设备似乎进入深度睡眠模式，当我检查 logcat 时，我发现消息：“Wifi Watchdog Service (android.server. wifi 的 ServerThread）不需要看门狗”。无法理解为什么路由器会显示此消息？

任何人都可以对此提出一些好的意见吗？

问候， 皮克斯

# ajax - GAE - 如何创建仅由应用程序使用的私有 url？

> ID：10170080
> 
> 赞同：1
> 
> 时间：2012-04-16T07:20:36.873
> 
> 标签：ajax, security, google-app-engine, private

在这个项目中使用 GAE 和 Python。

我正在创建一个带有统计图表的页面，该图表使用 AJAX 更新（刷新）自身（每 10 秒）。这是我第一次使用 AJAX。我在想的是，我应该创建一个私人页面，为统计图表提供所需的信息。然后我只需使用 AJAX 获取信息。

这是解决问题的方法吗？如果是这样，我如何在 GAE 中创建私人页面，我不希望用户能够访问该页面.. 谢谢

生产质量应用程序的安全问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:29:29.273

AJAX 只是发送 HTTP 请求的 Javascript。从服务器的角度来看，没有办法区分用户请求和 Javascript 请求。因此，没有“私人页面”之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:29:59.767

您可以简单地[要求](https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status)您的私人页面和 AJAX 处理程序登录，并将登录级别设置为`admin`. 您可能需要登录一个或多个 URL。

**编辑**

Set `login: required`，这将要求用户通过他们的 Google 帐户登录，但所有拥有 Google 帐户的用户仍然可以访问它。然后在 AJAX 处理程序中检查用户是否是您有权访问的用户之一：[https ://developers.google.com/appengine/docs/python/users/](https://developers.google.com/appengine/docs/python/users/)

# android - 游戏物理引擎中的度量单位

> ID：10170086
> 
> 赞同：0
> 
> 时间：2012-04-16T07:20:52.577
> 
> 标签：android, physics, units-of-measurement

在我的游戏中，我从加速度计获得加速度。计算我的计算，我必须应用一个系数来转换像素单位的测量单位。

我应用为 Android 应用程序建立的系数（在示例中）：

```
 DisplayMetrics metrics = new DisplayMetrics();
 getWindowManager().getDefaultDisplay().getMetrics(metrics);
 mXDpi = metrics.xdpi;
 mYDpi = metrics.ydpi;
 mMetersToPixelsX = mXDpi / 0.0254f;
 mMetersToPixelsY = mYDpi / 0.0254f; 
```

为了我的加速，得到像素/秒^2。通过这种方式，我可以在代码中的任何地方使用像素，而不是全部以米为单位。

这是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:58:48.947

这将取决于你想要强加什么样的物理。（这假设您需要牛顿力学。）如果您想跟踪设备的运动，那么您需要对加速度进行积分以获得速度，然后对速度进行积分以获得位置。或者我想，您可以跳过中间步骤并使用 0.5*acceleration^2 从“加速度”*转换*为位置变化（然后将该结果乘以您可能需要通过实验确定的适当比例因子）。（第二种方法可能无法正确处理恒定运动。）对于每个独立维度，速度和位置将是具有这些递归关系的累积和：

```
velocity[t] = acceleration[t] *(t -(t-1) ) + velocity[t-1]
position[t] = position[t-1] + velocity[t]*(t -(t-1) ) 
```

# c++ - std::function 如何知道调用约定？

> ID：10170087
> 
> 赞同：10
> 
> 时间：2012-04-16T07:20:56.033
> 
> 标签：c++, c++11, calling-convention

```
int __cdecl ccall(int i)
{
    wprintf(L"ccall(%d)", i);
    return 0;
}

int __stdcall stdcall(int i)
{
    wprintf(L"stdcall(%d)", i);
    return 0;
}

int __cdecl wmain(int argc, wchar_t **argv)
{
    std::function<int(int)> fnc = ccall;
    std::function<int(int)> fnstd = stdcall;

    fnc(10); // printed well
    fnstd(100); // printed well
    return 0;
} 
```

我担心如何将对象分配`__stdcall function`给`std::function`对象。但是没有任何指定的调用约定，它看起来工作正常。怎么`std::function`知道调用约定是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T07:33:42.690

`std::function`能够存储使用任何调用约定的函数指针。

§ 20.8.11.2：

> 函数类模板提供了泛化函数指针概念的多态包装器。包装器可以存储、复制和调用任意可调用对象（20.8.1），给定调用签名（20.8.1），允许函数成为第一类对象。

正如[John Calsbeek 所](https://stackoverflow.com/users/5696/john-calsbeek) [补充](https://stackoverflow.com/questions/10170087/how-does-stdfunction-know-about-calling-convention/10170224#comment13048868_10170224)的：标准中没有关于调用约定的特别内容，但是编译器正在做他们的工作，函数指针包含有关约定的信息。

使用函数指针，您需要指定不寻常的调用约定：

```
typedef int(* c_ptr_t)(int);
typedef int(__stdcall * std_ptr_t)(int);

c_ptr_t c_ptr = ccall;
std_ptr_t std_ptr = stdcall;

// But std::function doesn't mind:
std::function<int(int)> fnc = c_ptr;
std::function<int(int)> fnstd = std_ptr; 
```

# php - 如何构造 MVC 模型和 ORM 模型

> ID：10170091
> 
> 赞同：3
> 
> 时间：2012-04-16T07:21:19.580
> 
> 标签：php, model-view-controller, directory-structure

我在我的项目中获得良好的文件夹结构时遇到了一些麻烦，我想知道我可以使用哪些其他方式来构建我的文件。

我目前正在使用 MVC 结构化文件夹。

```
www/
  Controllers/
  Models/
  Views/ 
```

到目前为止没有什么特别的。但我也在使用 ORM 系统。有了它，我可以轻松地从我的数据库中获取“对象”，例如：

```
ORM::load('table'); 
```

现在这种代码应该驻留在模型中吧？所以我会得到这样的东西：

```
<?php
class userModel
{
    public function getAllUsers ( )
    {
        return ORM::load('table');
    }

    public function getUserById ( $id )
    {
        return ORM::load('table', 'userid=?', array($id));
    }
}
?> 
```

在我看来到目前为止看起来不错......但还有一件事。我还可以在使用 ORM 系统时指定一个“模型”。有了这个模型，我基本上可以设置验证规则。像这样：

```
ORM::withModel('authModel'); 
```

这让 ORM 知道，在向数据库添加新行（或更新现有行）之前，它应该首先检查以下模型的验证规则。

```
<?php
class authModel //Or maybe authValidation??
{
    // Method gets automatically triggered when an update is done with the ORM
    public function onUpdate ( $obj )
    {
        if ( $obj->username == '' )
            throw new \Exception('No username');
    }

    public function onInsert ( $obj )
    {
        // Validations here too.
    }
}
?> 
```

现在的问题是，我有两种模型。我基本上使用 getter/setter 来获取数据并将其存储到数据库（从我的控制器到我的模型）。

而且我有另一个模型，其中设置了验证规则......我不想将两者混合在同一个文件夹中。所以我必须为此想出另一种结构。就像是：

```
www/
  Controllers/
  Models/
    Repositories/
    Entities/
  Views/ 
```

只是我的模型不是真正的“存储库”，因为它没有在 repo 类中存储任何对象，也没有 commit() 方法或类似的东西。

我也无法将第二个模型（用于验证）存储在实体文件夹中，因为它们根本不是实体......

知道我应该如何构建这个..？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T05:37:38.827

您应该了解的第一件事是 MVC 中的*模型*不是类/对象。它是一个层，由大量对象组成。我懒得再做同样的*歌曲'n'dance*，所以只需阅读[此评论](https://stackoverflow.com/questions/3430181/acl-implementation/9685039#9685039)（跳到“旁注”部分）。

您困惑的根源在于您在称为“模型”的类组中认识到两种不同的职责。您实际上拥有负责业务逻辑的类实例（例如您的`UserModel`类），以及一个名为“ORM”的单独事物，用于加载和存储内容。而且您有身份验证，这不适合任何一个组。

我会采用这样的结构：

```
/application
    /modules
        /public
            /controllers
            /templates
         /admin
            /controllers
            /templates
         ....
    /views
    /model
        /logic
        /persistence
        /services
/framework 
```

您可能会注意到其中有一个单独的`/views`文件夹，`/application`并且每个模块都有一个单独的`/templates`. 这是因为，在正确的 MVC 中，视图是类的实例，负责表示逻辑并且通常处理多个模板。如果写得好，它们也是一个可重用的结构。

最后一点：不要尝试使用 ORM。为每个需要它的域对象创建一个数据映射器。有些人认为[ORM 是反模式](http://seldo.com/weblog/2011/08/11/orm_is_an_antipattern)。此外，避免静态调用 .. 那不是 OO 代码。[你可以从学习依赖注入](http://www.youtube.com/watch?v=RlfLCWKxHJ0)中受益匪浅

^(.. 我的 2 美分)

# cocoa-touch - 用户点击 UIKeyboard 中的完成按钮时未调用 textFieldShouldEndEditing

> ID：10170093
> 
> 赞同：1
> 
> 时间：2012-04-16T07:21:32.127
> 
> 标签：cocoa-touch, uitextfield, uikeyboard, uitextfielddelegate

我在`textfieldShouldEndEditing`委托方法中对 UITextField 进行验证，因此每次更改正在编辑的 UITextfield 时都会调用该方法并执行验证。

键盘的返回按钮配置为完成按钮。当它被按下时，我处理输入，但 `textfieldShouldEndEditing`最后编辑的 UItextField 之前从未被调用过，因此它没有被验证。

这对我来说似乎很奇怪，因为正常行为是用户在输入字段中的最后一个字符后点击完成按钮，但这不会触发该`textFieldShouldEndEditing`方法。

为此，我必须在`textfieldShouldReturn`方法中再次强制验证。

也许我错过了一些观点，因为我找不到其中的逻辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T07:31:18.970

我发现了问题。

我必须先辞职，`textfieldShouldReturn`然后再`textfieldShouldEndEditing`调用。

这是我的方法。我有两个 UITextFields。`self.username`是其中一个的 IBOutlet，返回按钮配置为 NEXT。`self.password`是其他指向带有完成返回按钮的 UITextField 的 IBOutlet。

```
-(BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
    if (textField == self.userName) {
        return [self validateUserName:textField.text];

    }

    if (textField == self.password) {
        return [self validatePassword:textField.text];

    }

    //No hay errores de validación
    return YES;    
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    //In userName return is Next
    //In password return is Done

    if (textField == self.userName) {
        [self.password becomeFirstResponder];
    } 
    [textField resignFirstResponder];
    return YES;    
} 
```

# php - sql查询在zend框架中没有正确执行

> ID：10170096
> 
> 赞同：0
> 
> 时间：2012-04-16T07:21:46.393
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-table

```
Table : sc_message 
  ______________________________________________________________________
 |message_id | message_sender_id | message_receiver_id | message_content|
 ------------------------------------------------------------------------  

Table : sc_user 
  _____________________
 | user_id | user_name |
 ----------------------- 
$Query_1 = $this ->select()
                 ->from(array('msg' => 'sc_message'), array('msg.message_sender_id, msg.message_receiver_id, msg.message_content, msg.message_sent_on'))
                 ->join(array('usr' => 'sc_user'), 'msg.message_sender_id = usr.user_id', array('usr.user_name as sender_name'))
                 ->where('msg.message_id = ?',$message_id)
                 ->order('msg.message_sent_on');

die($Query_1->__toString()); 
```

我正在写上面的查询，但有些没有给我错误

```
 Warning: Select query cannot join with another table in E:\wamp\www\social_site\library\Zend\Db\Select.php on line 1222 
```

谁能告诉我可能的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:48:02.287

尝试设置：

```
 $this->setIntegrityCheck(false); //after select() line 
```

希望有帮助

# asp.net-mvc - 外键约束，带有子对象集合的 EF

> ID：10170101
> 
> 赞同：0
> 
> 时间：2012-04-16T07:22:21.993
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, entity-framework-migrations

我正在尝试更新模型，但收到错误“操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性设置为空值，如果外键不支持空值，则必须定义新的关系，必须为外键属性分配另一个非空值，否则必须删除不相关的对象。”

据我了解，[关系无法改变，因为一个或多个外键属性不可为空](https://stackoverflow.com/questions/5538974/the-relationship-could-not-be-changed-because-one-or-more-of-the-foreign-key-pro)，问题可能出在实体框架如何处理我的虚拟 ICollection

但是，我不确定在使用脚手架存储库模式时如何实现该解决方案。我是否必须编辑 Save() 方法 ParentObjectRepository 类？

其实我真的认为一定有办法让EF理解这一点。我看不出 EF 团队是如何思考“可能没有人使用具有外键约束的对象集合，我们不支持”。

**更新** 添加的代码

```
[HttpPost]
public ActionResult Edit(int id, FormCollection formCollection)
{
    var eventRepository = new MagnetEventRepository();
    var original = eventRepository.Find(id);
    UpdateModel(original);
    eventRepository.Save();
    return RedirectToAction("Details", "Home", new { slug = original.Slug });
}

public void Save()
{
    context.SaveChanges();
} 
```

更多代码：

```
public class MagnetEvent
{
    public virtual int Id { get; set; }

    [Required]
    public virtual string Name { get; set; }

    [Required]
    [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd HH:mm}")]
    [DataType(DataType.DateTime)]
    public virtual DateTime? StartDate { get; set; }

    public virtual string Description { get; set; }

    [StringLength(100)]
    public virtual string Slug { get; set; }

    public virtual int MaximumCapacity { get; set; }

    [DataType(DataType.Currency)]
    public virtual int TicketPrice { get; set; }

    public virtual int LocationId { get; set; }
    public virtual Location Location { get; set; }

    public virtual Collection<Ticket> Tickets { get; set; }

    public virtual Collection<AttendeeInformationField> CaptureAttendeeInformationFields { get; set; }

    public virtual int CustomerId { get; set; }

    [Required]
    public virtual CUSTOMER Customer { get; set; }
} 
```

Save() 方法来自 MagnetEventRepository，它是由上述类构建的。

**另一个更新** 我通过将 AttendeeInformationField 中的 MagnetEventId 更改为可为空的 int 成功消除了错误。在检查数据库时，我可以确切地看到问题所在。

假设我有一个值为“E-mail”的 AttendeeInformationField。当我编辑我的 MagnetEvent 时，AttendeeInformationField 将 MagnetEventId 更新为 null，然后添加具有正确 MagnetEventId 和值的新帖子。

如果更新了 AttendeeInformationField 中的帖子，我会非常喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:50:46.983

你可以为你的事件对象添加代码吗？你称之为原创的那个。

可能是因为 UpdateModel 更改了相关对象的一些信息，如果是这样，那就不好了。虽然我看不到所有代码，但不确定这一点。

我更喜欢不使用 UptadeModel，而是使用 inputmodel 或您的 MVC 模型作为参数，并手动将 chages 映射到加载的原始对象。

另一个问题是我看不到 eventRepository.Save();

真的做一个SaveShages吗？可以？我可以用另一种方法保存一些上下文代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:19:31.167

正如例外所说，它看起来像您的关联集合或其他关联对象无法找到有效的 ID 值。

您是否急切地加载关联的对象？喜欢客户？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:53:54.837

需要注意的一件事是，您不应该在 Customer 上有 [Required]，因为它是从您的 FK 不可为空这一事实推断出来的。如果模型中没有 FK，则只应在导航属性上使用 required。

要尝试诊断问题，您是否可以加载对象并在调试器中查看它，您应该期望 locationId 和 CustomerId 都具有非零值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:58:07.473

我找到了解决我的问题的方法。当涉及到 UpdateModel 和包含 ICollection 的模型时，这似乎是 ASP.NET MVC 中的一个错误（？）。

解决方案是覆盖默认行为，如本博文所述：http: [//www.codetuning.net/blog/post/Binding-Model-Graphs-with-ASPNETMVC.aspx](http://www.codetuning.net/blog/post/Binding-Model-Graphs-with-ASPNETMVC.aspx)

**更新** 我找到了解决方案！以上仅在更新集合中的现有项目时有效。为了解决这个问题，我必须手动检查并添加新的 AttendeeInformationFields。像这样：

```
[HttpPost]
public ActionResult Edit(int id, MagnetEvent magnetEvent)
{
    var eventRepository = new MagnetEventRepository();
    var original = eventRepository.Find(id);
    UpdateModel(original);
    foreach (var attendeeInformationField in magnetEvent.CaptureAttendeeInformationFields)
    {
        var attendeeInformationFieldId = attendeeInformationField.Id;
        if (original.CaptureAttendeeInformationFields.AsQueryable().Where(ai => ai.Id == attendeeInformationFieldId).Count() == 0)
        {
            original.CaptureAttendeeInformationFields.Add(attendeeInformationField);
        }
    }
    eventRepository.Save();
} 
```

与修改后的 DefaultModelBinder 一起，这实际上适用于编辑和添加。目前我还没有尝试删除。

不过，我希望有一种更简单的方法来做到这一点。似乎需要大量编码来完成一项非常基本的任务。

# c++ - 对简单的 RX 使用 std::regex 是一种好习惯吗？

> ID：10170107
> 
> 赞同：1
> 
> 时间：2012-04-16T07:22:49.683
> 
> 标签：c++, regex

例如，我的情况：
我输入“0”、“1”、“true”或“false”。（在任何情况下）
在性能、代码阅读、任何基本最佳实践方面的首选：

```
bool func(string param)
{
    string lowerCase = param;
    to_lower(lowerCase);
    if (lowerCase == "0" || lowerCase == "false")
    {
        return false;
    }
    if (lowerCase == "1" || lowerCase == "true")
    {
        return true;
    }
    throw ....
} 
```

或者：

```
bool func(string param)
{
    string lowerCase = param;
    to_lower(lowerCase);
    regex rxTrue  ("1|true");
    regex rxFalse ("0|false");

    if (regex_match(lowerCase, rxTrue)
    {
        return true;
    }
    if (regex_match(lowerCase, rxFalse)
    {
        return false;
    }
    throw ....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:53:30.510

第二个更清晰，更容易扩展（例如：接受 `"yes"`and `"no"`，或前缀，和`"1|t(?:rue)?)"`and `"0|f(?:alse)?"`。关于性能，第二个可以（并且应该）通过声明`regex` `static` (and `const`，而你在它)，例如：

```
static regex const rxTrue ( "1|true" , regex_constants::icase );
static regex const rxFalse( "0|false", regex_constants::icase ); 
```

还要注意，通过指定不区分大小写，您不必将输入转换为小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:29:04.017

这只是一种预感，但可能第一个会更快（不涉及正则表达式编译）。此外，第二个版本取决于您的编译器是否支持 C++11`<regex>`实现，因此根据您需要支持的环境，会自动排除第二个选项。

# javascript - Backbone.js 来自各种应用程序的多个组合路由

> ID：10170109
> 
> 赞同：0
> 
> 时间：2012-04-16T07:23:09.900
> 
> 标签：javascript, backbone.js

我有一个名为“客户文件”的中央网络应用程序，其中包含与特定客户相关的所有信息。我们只是使用我们的模块化组件的主干重新开发它，例如订单和联系人（都作为 Backbone.Model）

是否可以`site.com/file#general/contact/:contact_id/order/:order_id`在 Backbone.js 中使用 URL？where`/order`指的是 Order 模型，并且`contact`指的是 Contact 模型，而视图只是页面上某个位置的锚标记 ( `<a name="general"></a>`)（CSS 选择器使用它来确定要显示哪个选项卡）？

我们需要这种 URL 的原因是，如果员工将客户的文件打开到特定的通话记录，在特定视图上具有特定的订单，如果他们共享 URL，其他人会看到相同的东西（没有必须再次单击所有内容）

是否需要一个包含所有路由组合的主路由器？例如：

```
"general/contact/:id/call/:call_id":"contactCard",
"sales/contact/:id/call/:call_id":"contactCard",
"billing/contact/:id/call/:call_id":"contactCard",
"distribution/contact/:id/call/:call_id":"contactCard",
"legal/contact/:id/call/:call_id":"contactCard",

"general/contact/:id":"contactCard",
"sales/contact/:id":"contactCard",
"billing/contact/:id":"contactCard",
"distribution/contact/:id":"contactCard",
"legal/contact/:id":"contactCard", 
```

...

或者还有其他方法可以解决这个问题吗？我希望我的路由器可以根据型号分开，但不确定考虑到路由器的工作原理是否可行？我看过使用[subroutes](http://www.geekdave.com/?p=13)，但我认为这不是我需要的。

# emacs - emacs 怎么可能在初始化时不加载一些 .el 文件？

> ID：10170115
> 
> 赞同：2
> 
> 时间：2012-04-16T07:24:09.020
> 
> 标签：emacs

我将每种类型的 emacs 设置放入一些单独的文件中，例如 load-cygwin.el、load-cedet.el 等。并使用 subverion 随时随地共享它们。

现在对于 load-cygwin.el，它只需要在 Windows 平台上，但每次我在 Linux 平台上同步这些配置时，我都必须删除它们。

emacs 怎么可能在初始化时不加载 load-cygwin.el 文件？我需要一些条件才能跳出文件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:52:52.600

有不同的方法来处理它。一种方式（我使用）

我根据主机名为每个系统命名。（你也可以定义检查窗口系统/emacs vesrion/OS等等..）

```
 ;;;;;;;;;;;;;;  define systems ;;;;;;;;;;;;;;;;

 (defvar on-laptop          ; on my laptop, mostly I can run everything
   (string-match "rag" (system-name)))

 (defvar on-lab-computer                 ; main lab desktop
   (string-match "okho" (system-name)))

 (defvar on-lab-server        ; lab cluster
   (string-match "amu" (system-name)))

 ;;;;;;;;;;;;;;; Usage ;;;;;;;;;;;;;;;;;;;;;;;;;
 (when on-laptop
 ;;; music / emms config
   (load "emms-config.el"))

 ; load work related stuff
 (when on-lab-computer
   ;; load work related

    )

 (when (not on-lab-server)
   ;;; some setup that are unnecessary on cluster, but useful on remaining systems

   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:21:21.277

至少通读其中的前两个：

*   [http://brain-break.blogspot.co.nz/2010/08/determining-running-environment-and.html](http://brain-break.blogspot.co.nz/2010/08/determining-running-environment-and.html)
*   [如何检测 emacs 是否处于终端模式？](https://stackoverflow.com/questions/5795451/how-to-detect-that-emacs-is-in-terminal-mode)
*   [即使在终端中启动 emacsclient，window-system 也不是 nil](https://stackoverflow.com/questions/7616761/even-when-emacsclient-is-started-in-a-terminal-window-system-is-non-nil)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:03:45.827

对于依赖于操作系统的设置，请检查[`system-type`变量](http://www.gnu.org/software/emacs/manual/html_node/elisp/System-Environment.html#index-system_002dtype-3760)：

```
(and (memq system-type '(cygwin windows-nt))
     (load "load-cygwin")) 
```

处理条件要求的另一种方法是使用该[`locate-library`函数](http://www.gnu.org/software/emacs/manual/html_node/elisp/Library-Search.html#index-locate_002dlibrary-809)来查看文件是否存在。（这假设`load-cygwin.el`您的 Linux 机器上不存在。）

```
(and (locate-library "load-cygwin")
     (load "load-cygwin")) 
```

这种条件要求的另一个有用变量是[`window-system`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Window-Systems.html#index-window_002dsystem-3695)。

# iphone - 如何设置popOverController的宽高

> ID：10170116
> 
> 赞同：1
> 
> 时间：2012-04-16T07:24:13.387
> 
> 标签：iphone, ios, ipad

我正在创建一个名为 popoverCamera 的 popovercontroller。我想将它的大小设置为默认的cameraview大小（width-100，hwight-100）。如何将其大小设置为默认的cameraview大小？

这里cameraview是一个视图。

```
popoverCamera= [[UIPopoverController alloc]
                            initWithContentViewController:videoRecorder];
            [popoverCamera presentPopoverFromRect:CGRectMake(0,0,0,0) inView:self.cameraView permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:26:11.613

用这个

```
 popoverController = [[UIPopoverController alloc] initWithContentViewController:YOURCONTROLLER];
    popoverController.popoverContentSize = CGSizeMake(320, 480);
    [popoverController presentPopoverFromRect:[senderView bounds] inView:senderView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

根据您的要求更改代码..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:30:12.747

您可以通过更改属性`popoverContentSize`的值来做到这一点。更改此属性的值会覆盖当前视图控制器的默认值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:38:08.543

从 UIPopoverController.h 中，您可以覆盖：

```
/* contentSizeForViewInPopover allows you to set the size of the content from within the view controller. This property is read/write, and you should generally not override it.
 */
@property (nonatomic,readwrite) CGSize contentSizeForViewInPopover __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_2); 
```

返回正确的值。

# c++ - openMP - 并发访问变量和原子

> ID：10170118
> 
> 赞同：4
> 
> 时间：2012-04-16T07:24:21.397
> 
> 标签：c++, multithreading, multiprocessing, openmp

我想与 openMP 并行化一个对盒子进行采样的函数（在盒子中随机选择点，并在这些点评估给定函数）。我写了以下代码。

```
//storing points
double** points_ = new double*[N-m];
for(int i=0;i<N-m;i++)
{
    points_[i]=new double[ndim];
}
double* evals_ = new double[N-m];

#pragma omp parallel for 
for(int i=0;i<N-m;i++)
{
    double* pt_ = randomPoint(lower,upper);
    for(int k=0;k<ndim;k++)
    {
        points_[i][k]=pt_[k];
    }
    evals_[i]=evalFunc(pt_);
    delete pt_;
} 
```

但是，我对这段代码没有信心： evals_ 和 points_ 在每个线程中更新。我想在那里添加一些原子语句：

```
#pragma omp parallel for 
for(int i=0;i<N-m;i++)
{
    double* pt_ = randomPoint(m_lower,m_upper);
    for(int k=0;k<m_ndim;k++)
    {
        #pragma omp atomic update
        points_[i][k]=pt_[k];
    }
    #pragma omp atomic update
    evals_[i]=evalFunc(pt_);
    delete pt_;
} 
```

但我担心这会非常低效：您有什么建议可以更准确地编写它吗？而且...这不是编译...（错误：#pragma omp atomic 之后的表达式格式不正确）虽然我可以在 openMP 规范 A22 中找到该示例

```
void atomic_example(float *x, float *y, int *index, int n)
{
    int i;
    #pragma omp parallel for shared(x, y, index, n)
    for (i=0; i<n; i++) {
    #pragma omp atomic update
    x[index[i]] += work1(i);
    y[i] += work2(i);
    }
} 
```

并且原子更新之后也是对数组的影响。

谢谢并恭祝安康。

编辑 - - - -

我同意都铎的回答。但是，似乎这里的这个例子，在另一段并行化的代码中确实需要原子：在行 sum_+=... 时，发生错误（并发访问）

```
for(i=0;i<m_ndim;i++)
{
    double sum_=0;
    #pragma omp parallel reduction(+:sum_)
    for(j=0;j<m_npts;j++)
    {
        sum_ += set_[j][i];
    }
    Sum_[i] = sum_;
} 
```

为什么需要它？还是有其他错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:23:26.477

您的代码中不需要任何原子子句。

原因是外部循环在 index 上拆分`i`，因此每个线程将从中获取一组元素，`points_`并且`eval_`这些元素不会与另一个线程的工作集重叠。

`evals_`是一个数组，所以每个线程都会得到一个连续的子数组（由于隐式静态调度方案），例如

```
0 1 2 3 . 4 5 6 7 . 8 9 10 11...
   t1        t2        t3 
```

`points_`是一个二维矩阵，每个线程将获得一组连续的行：

```
 0 
   1
t1 2
   3
   .
   4
   5
t2 6
   7
   .
   8
   9
t3 10
   11
   ... 
```

在第二种情况下，您似乎对 的值有重叠`k`，因为每个线程对 的范围相同`k`，但更新的点落在不同的行（索引`i`）上，如上所示，不同的行不重叠线程。

# c++ - C++ 无效转换

> ID：10170119
> 
> 赞同：-2
> 
> 时间：2012-04-16T07:24:25.393
> 
> 标签：c++

我正在尝试解决[这个](http://www.codechef.com/ANDR2012/problems/A106)问题，但我收到这样的错误 [从 'char' 到 'const char' 的转换无效]，但我不知道如何解决它。以下是问题所在的行：

```
Declarations:
string alp("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
string formatted;
char partoftext[20];
size_t found; 
```

* * *

```
found = text.copy(partoftext,2,0);
partoftext[found] = '\0';
a = atoi(partoftext);
formatted.append(alp[a]);

... 
```

问题出在这行代码中：

```
formatted.append(alp[a]); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:35:59.567

来自：http://www.cplusplus.com/reference/string/string/append/

```
formatted.append(1, alp[a]);

/*
string& append ( const string& str );
string& append ( const string& str, size_t pos, size_t n );
string& append ( const char* s, size_t n );
string& append ( const char* s );
string& append ( size_t n, char c );
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:36:35.140

如果我的猜测是正确的（这是一个猜测，因为您没有具体说明错误是什么），请尝试：

`formatted.append(alp, a, 1);`

# cakephp - 如何重定向到注册页面而不是登录？

> ID：10170120
> 
> 赞同：0
> 
> 时间：2012-04-16T07:24:31.117
> 
> 标签：cakephp, cakephp-2.0

这就是我想要实现的目标：单击产品-> 注册-> 结帐我有一个页面，您可以在其中选择产品，并且所有产品链接都转到`checkout`控制器并通过 URL 传递参数。例如`domain.com/checkout/product-name`。

但是，我希望用户在使用结帐控制器之前登录，所以很自然地，我在结帐控制器中拒绝了`$this->Auth->deny('index')`它`beforeFilter()`。现在，当我尝试访问结帐控制器时，它会将我重定向到登录页面。有没有办法让我把它转到注册页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:47:40.543

您`loginAction`在 $components 声明（控制器或 AppController）中设置变量以指定控制器+操作：

```
public $components = array(
    'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
            'plugin' => 'users'
        ),
        'authError' => 'Did you really think you are allowed to see that?',
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

参考：[http ://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

# android - 如何在android的位图图像中应用照片效果

> ID：10170131
> 
> 赞同：1
> 
> 时间：2012-04-16T07:25:12.883
> 
> 标签：android, android-gallery, android-mediaplayer, android-gui, android-photos

请帮我对位图图像数据执行图像效果。

我搜索以下代码以应用照片效果。但我不知道究竟应该传递什么值才能生效。

代码是..

```
 public Bitmap createEffect(Bitmap src, int depth, double red, double green, double blue) {
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // constant grayscale
    final double GS_RED = 0.3;
    final double GS_GREEN = 0.59;
    final double GS_BLUE = 0.11;
    // color information
    int A, R, G, B;
    int pixel;

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            // get color on each channel
            A = Color.alpha(pixel);
            R = Color.red(pixel);
            G = Color.green(pixel);
            B = Color.blue(pixel);
            // apply grayscale sample
            B = G = R = (int)(GS_RED * R + GS_GREEN * G + GS_BLUE * B);

            // apply intensity level for sepid-toning on each channel
            R += (depth * red);
            if(R > 255) { R = 255; }

            G += (depth * green);
            if(G > 255) { G = 255; }

            B += (depth * blue);
            if(B > 255) { B = 255; }

            // set new pixel color to output image
            bmOut.setPixel(x, y, Color.argb(A, R, G, B));
        }
    }

    // return final image
    return bmOut;
} 
```

我想像[这个](https://play.google.com/store/apps/details?id=com.km.draw.photoeffects&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5rbS5kcmF3LnBob3RvZWZmZWN0cyJd)应用程序一样工作。

有以下效果图

![第一个效果](../Images/a88a884bd540ee6c20c808a2d4bc0a24.png)![第二种效应](../Images/0d88b17fb38024a71a601f5f7734404c.png) ![第三效应](../Images/f7ab934fe330c60536018b0074cd7bb4.png) ![第四种效应](../Images/5f70c941ef875330a16cd5cb10529caa.png) ![第六效应](../Images/3a1a83b4c7057e085ca2496f29ac904f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:03:07.977

如果您阅读代码，您会看到 src 中的每个像素首先转换为灰度 [0-255] 通过使用灰度值作为基础并添加深度*颜色，此值将转换回颜色像素。

所以如果你想给一个位图一个绿色的色调，这样做：

```
Bitmap result = createEffect(src,50,0,1,0); 
```

这将使位图更环保。

要反转颜色（如在上一个示例中），请使用此（未经测试）函数：

```
public Bitmap invert(Bitmap src) {
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            // get color on each channel
            A = Color.alpha(pixel);
            R = Color.red(pixel);
            G = Color.green(pixel);
            B = Color.blue(pixel);
            // set new pixel color to output image
            bmOut.setPixel(x, y, Color.argb(A, 255-R, 255-G, 255-B));
        }
    }

    // return final image
    return bmOut;
} 
```

# ruby-on-rails - Ruby Gems 还是只是将源代码放在供应商/资产中？

> ID：10170134
> 
> 赞同：1
> 
> 时间：2012-04-16T07:25:22.747
> 
> 标签：ruby-on-rails, rubygems, ruby-on-rails-3.2

在 Ruby on Rails 3.2.x 项目中包含 JS 库有两种主要方法：

1.  将文件放在供应商/资产中
2.  在 bundler 中使用 ruby​​ gems，例如：
    gem 'rails-backbone'
    gem 'jquery-rails'

是否有理由首选任何一种方式？我怀疑#1 使文件在项目中更加明显，而#2 更方便一些。我绝对不希望项目或 gems 中的缩小版本，因为这使得调试和阅读 js 源代码不合理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:07:37.867

通过“供应商/资产”，我有机会自定义我的 jquery 库（例如，用于 JqueryUI，或一些 jquery 插件等）但部署库并非易事（例如，由于资产管道）。使用 gem 解决方案，您没有或很少有可能自定义库，但资产管道没有问题。

# javascript - 如何对一组 jQuery 对象进行排序（但不是它们在 DOM/标记中的位置）

> ID：10170137
> 
> 赞同：1
> 
> 时间：2012-04-16T07:25:48.573
> 
> 标签：javascript, jquery, sorting

我们有以下标记

```
<input type="checkbox" class="foo" />
<input type="checkbox" class="foo" />
<input type="checkbox" class="foo" /> 
```

在某些时候，我使用`data`jQuery 为每个实例注入一个 -keyValuePair（每个实例都是唯一的 - 我有几个调用 - 示例仅涵盖一个分配），例如：

```
$('myMagicSelector').data('counter', '1'); 
```

现在我正在尝试使用以下代码对该实例进行排序

```
var $checkboxes = $('.foo').filter('checked');
$checkboxes.sort(function (a, b) {
    var dataA = a.data('counter');
    var dataB = b.data('counter');

    return dataA < dataB;
}); 
```

我知道……这行不通……

*   如何修复我的代码，既不引入`$(a)`也不引入`$(b)`排序功能？
*   有没有可以为我做这个的库（jquery-specific）？
*   还有其他输入吗？

非常重要的说明：
我不想更改我的 UI 中的排序（不：没有 UI-sort-thing... like [tinySort](http://tinysort.sjeiti.com/)），并且我的 UI 中的排序与预期结果不对应 - 这就是我需要的原因即时排序，而不是通过创建时的标记...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:40:43.900

您可以使用`el.getAttribute("data-counter")`代替`$(a).data("counter")`

```
var $checkboxes = $('.foo:checked');
$checkboxes.sort(function (a, b) {
    var dataA = a.getAttribute("data-counter");
    var dataB = b.getAttribute("data-counter");
    return dataA < dataB;
}); 
```

[**示例小提琴**](http://jsfiddle.net/99kdn/)

# javascript - 如何在javascript中使用严格模式发送控制字符？

> ID：10170142
> 
> 赞同：6
> 
> 时间：2012-04-16T07:26:20.453
> 
> 标签：javascript

```
"use strict";
var debug = function( m ) { 
    console.log('   \033[32mdebug -\033[39m:' + m ); 
} 
```

除了取消严格模式之外，\033 不会以严格模式飞行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T08:10:48.037

改为使用`\u001b`。`\0...`是您的 JavaScript 环境可能不支持的八进制转义序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-08T13:48:30.967

一个简单的方法是使用[colorette](https://www.npmjs.com/package/colorette)包。使用以下命令安装软件包后： `yarn add colorette` 然后您可以执行以下操作：

```
const { red, blue, bold } = require("colorette");
console.log(bold(blue("Engage!"))); 
```

很好很简单。

# c# - 如何从 H.264 视频流中提取图像？

> ID：10170143
> 
> 赞同：3
> 
> 时间：2012-04-16T07:26:24.297
> 
> 标签：c#, video, opencv, camera, ip-camera

如何最好在 C# 中从 H.264 视频流中提取图像（JPEG 或 PNG 或 ...）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:35:59.877

[ffmpeg](http://ffmpeg.org/)可以做到这一点。

[ffmpeg 需要 ac# 绑定](https://stackoverflow.com/questions/271003/anyone-know-of-a-set-of-c-sharp-bindings-for-ffmpeg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:36:05.337

您可以使用 Windows Media Foundadion .NET（链接： http: [//sourceforge.net/projects/mfnet/](http://sourceforge.net/projects/mfnet/)）来解码 H.264。完成此操作后，您可以以标准方式截屏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:49:01.717

您可以使用[FFMPEG Wrapper](http://www.ffmpeg-activex.net/)并通过 C# 从 videov 中提取所有帧并将它们保存为图像序列。请阅读有关如何提取帧并将它们保存为图像的[FFMPEG 。](http://ffmpeg.org/)

# blackberry - 如何将项目从列表拖放到列表中的另一个项目并交换它们的位置

> ID：10170144
> 
> 赞同：0
> 
> 时间：2012-04-16T07:26:35.047
> 
> 标签：blackberry, listfield

我有一个包含多个项目的列表字段。我想从列表中选择一项并拖放到列表中的另一项。将项目放在另一个项目上后，项目的位置应互换。（示例：- 如果我从列表中选择第一项并在拖放后将该项目拖放到列表中的第四项，则应更改这两项的项目位置应更改为第 4 位的第 1 项和第 1 位的第 4 项）

我不知道该怎么做。请帮我完成这个任务。

```
 public class ListScreen extends MainScreen implements ListFieldCallback {
    // private ObjectChoiceField choices;
    private int x, y;
    int start = 0 , end=0;
    private int startPos;
//  private int pos;
    private ObjectListField list;
    private Object[] listData = new Object[] { "Ram", "Sunny", "Ramit",
            "Vishal","Ravinder","Manoj","Ravi","Vikas","Santosh","Ravi","Deepak","Sharma","Nvn" };

    public ListScreen() {
        init();
    }

    private void init() {
        list = new ObjectListField(FOCUSABLE);
        list.setRowHeight(45);
        list.setCallback(this);
        list.set(listData);
        add(list);
    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {
        graphics.drawText(listData[index].toString(), 25, y + 10);

    }

    public Object get(ListField listField, int index) {
        return listData[index];
    }

    public int getPreferredWidth(ListField listField) {
        return getPreferredWidth();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        // TODO Auto-generated method stub
        return 0;
    }

    // protected boolean navigationMovement(int dx, int dy, int status, int
    // time) {
    //
    // return super.navigationMovement(dx, dy, status, time);
    // }

    protected boolean touchEvent(TouchEvent message) {
        int eventCode = message.getEvent();

        // Get the screen coordinates of the touch event
        int touchX = message.getX(1);
        int touchY = message.getY(1);
        if (eventCode == TouchEvent.CLICK) {

            calculateStart(touchY);
            // Dialog.alert("You clicked at (" + touchX + "," + touchY + ")");
        }

        if (eventCode == TouchEvent.MOVE) {

            x = touchX;
            y = touchY;

            invalidate();
        }
        if (eventCode == TouchEvent.UNCLICK) {
            int unClickx = message.getX(1);
            int unClicky = message.getY(1);
            System.out.println("unclick at:" + unClickx + "::::" + unClicky);
            calculatePosition(unClicky);
        }

        return true;
    }

    private void calculatePosition(int dy) {
        if (dy != 0) {

                end = dy / 45;
                System.out.println(start + ":::" + end);
                Object temp = listData[start];
                listData[start] = listData[end];
                listData[end] = temp;
                invalidate();

        }

    }
    private void calculateStart(int dy){
        if(dy!=0)
        start = dy/45;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:15:52.607

[***针对触摸和非触摸设备更新***]：尝试以下代码；我在 Torch (9800)、Storm (9550)、Bold (9700) 上进行了测试：

```
import net.rim.device.api.system.Characters;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.component.ObjectListField;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.BackgroundFactory;

public class ListTestScreen extends MainScreen {
    private VerticalFieldManager mainManager = new VerticalFieldManager();
    public ListTestScreen() {
        mainManager.add(new LabelField("My Title"));
        mainManager.add(new LabelField("My List:"));
        mainManager.add(new MyList());
        mainManager.add(new LabelField("Something else"));
        add(mainManager);
    }
}

class MyList extends VerticalFieldManager implements ListFieldCallback {
    private int  mouseDownY, mouseUpY;
    private static int rowHeight = 45;
    private int mouseDownRowIndex, mouseUpRowIndex;
    int firstSelectedRow=-1, secondSelectedRow=-1;
    private int touchX;
    private int touchY;
    private boolean showShadow = false;

    private ObjectListField list;
    private Object[] listData = new Object[] { "Ram", "Sunny", "Ramit",
            "Vishal","Ravinder","Manoj","Ravi","Vikas","Santosh","Ravi","Deepak","Sharma","Nvn" };

    public MyList() {
        init();
        setBackground(BackgroundFactory.createLinearGradientBackground(0x0FCFC0, 0x0CCCC0, 0x09C9C0, 0x01C1C0));
    }

    private void init() {
        list = new ObjectListField(FOCUSABLE);
        list.setRowHeight(rowHeight);
        list.setCallback(this);
        list.set(listData);
        add(list);
    }

    private void interchangeRows(int r1, int r2) {
        Object temp = listData[r1];
        listData[r1] = listData[r2];
        listData[r2] = temp;
        invalidate();
    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {
        graphics.drawText(listData[index].toString(), 25, y + 10);

    }

    public Object get(ListField listField, int index) {
        return listData[index];
    }

    public int getPreferredWidth(ListField listField) {
        return getPreferredWidth();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        // TODO Auto-generated method stub
        return 0;
    }

    public int indexOfRowAt(int posY) {
        int index =(int) Math.floor(posY / rowHeight * 1.0); 
        return index;
    }

    protected boolean keyChar(char ch, int status, int time) {
        if(ch==Characters.SPACE) {
            if(firstSelectedRow ==-1) {
                firstSelectedRow = list.getSelectedIndex();
                return true;
            } else {
                secondSelectedRow = list.getSelectedIndex();
                if(firstSelectedRow == secondSelectedRow) {
                    firstSelectedRow = secondSelectedRow = -1;
                    invalidate();
                    return true;
                } else {
                    interchangeRows(firstSelectedRow, secondSelectedRow);
                    firstSelectedRow = secondSelectedRow = -1;
                    return true;
                }
            }
        }
        return super.keyChar(ch, status, time);
    }

    protected void paint(Graphics graphics) {
        if(firstSelectedRow!=-1) {
            int x = 0, y = firstSelectedRow*rowHeight;
            int savedColor = graphics.getColor();
            int preAlpha = graphics.getGlobalAlpha();
            graphics.setGlobalAlpha(90) ;           
            graphics.setColor(0xFF22FF);

            graphics.fillRect(0, y, getWidth(), rowHeight);

            graphics.setColor(savedColor);
            graphics.setGlobalAlpha(preAlpha) ;
        }

        super.paint(graphics);

        if(showShadow && mouseDownRowIndex != -1) {
            int preAlpha = graphics.getGlobalAlpha();
            graphics.setGlobalAlpha(100) ;
            graphics.drawText(listData[mouseDownRowIndex].toString(), 25, touchY);
            graphics.setGlobalAlpha(preAlpha) ;
        }
    }

    protected boolean touchEvent(TouchEvent message) {
        int eventCode = message.getEvent();

        // Get the screen coordinates of the touch event
        touchX = message.getX(1);
        touchY = message.getY(1);       

        if(eventCode == TouchEvent.DOWN) {
            mouseDownY = touchY;
            mouseDownRowIndex = indexOfRowAt(mouseDownY);
            showShadow = true;
            invalidate();
            return true;
        }        
        else if(eventCode == TouchEvent.UP) {
            showShadow = false;
            mouseUpY = touchY;
            mouseUpRowIndex = indexOfRowAt(mouseUpY);
            if(mouseDownRowIndex != mouseUpRowIndex) {
                interchangeRows(mouseDownRowIndex, mouseUpRowIndex);
                mouseDownRowIndex = mouseUpRowIndex = -1;
                return true;
            }
            mouseDownRowIndex = mouseUpRowIndex = -1;
            invalidate();
        } else if(eventCode == TouchEvent.MOVE) {
            invalidate();
            return true;
        }
        return super.touchEvent(message);
    }
} 
```

[**编辑：** ]

**对于支持触摸的设备**：第一个选定项目的文本阴影随光标移动。

**对于非触摸设备**：我使用**空格键**来选择要交换的项目。选择一个项目，按空格键，选择第二个项目，再次按**空格键**，项目互换！！在已选择的项目上按**空格键**将取消选择该项目。

让我知道它是否有效。

> **列表字段自定义的进一步增强已在** 此[StackOverflow 答案](https://stackoverflow.com/questions/10292259/how-to-re-arrange-listfield-in-blackberry/10317642#10317642)中发布。

# matlab - 我将如何从 simulink 模型或 m 文件生成可以在 c 编译器上单独运行的 C/C++ 代码

> ID：10170145
> 
> 赞同：0
> 
> 时间：2012-04-16T07:26:36.397
> 
> 标签：matlab, simulink

我将如何从 simulink 模型或 m 文件生成 C/C++ 代码，这些代码可以在 Visual Studio/Turbo C 等 c 编译器上单独运行，而无需 MCR、MCS 等 matlab 编译器的帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:40:45.253

使用附加产品 MATLAB Coder 和 Simulink Coder。

# android - 用android中数据库中的数据填充组合框

> ID：10170148
> 
> 赞同：0
> 
> 时间：2012-04-16T07:26:54.860
> 
> 标签：android, database, combobox

大家好，我有这样的数据库

```
public class Dbhelper extends SQLiteOpenHelper{

private static final String DATABASE_NAME="ComboBox.db";
private static final int SCHEMA_VERSION=1;
public SQLiteDatabase db;
public String [][] isiDb={
        {"MI","Minimarket"},{"IDM","Indomaret"},{"CRM","Ceriamart"},{"OMI","OMI"},{"CK","Circle K"},
        {"7EL","7 Eleven"},{"STM","Starmart"},{"AX","Alfa Express"},{"MID","Alfa Midi"},{"LWN","Lawson"},
        {"YMT","Yomart"},{"HRO","Hero"},{"SDO","Superindo"},{"HPM","Hypermart"},{"SWN","Swalayan"}

};

public Dbhelper(Context context) {
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE isicombo (kdcombo text PRIMARY KEY,descp text)");
    for(int i=0; i<=1;i++)
     {
         db.execSQL("INSERT INTO isicombo(kdcombo,descp) VALUES ('"+isiDb[i][0]+"','"+isiDb[i][1]+"')");
     }
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // no-op, since will not be called until 2nd schema
    // version exists
    db.execSQL("DROP TABLE IF EXIST ComboBox.db");
    onCreate(db);

}

public Cursor getAllProjectss() {
    // TODO Auto-generated method stub
    return(getReadableDatabase()
            .rawQuery("SELECT * from isicombo",null));
} 
```

我想创建一个组合框，我想用我的数据库中的数据填充这个组合框..我很困惑如何将数据填充到组合框..你能给我一个简单的代码吗？谢谢

我尝试使用这样的代码

```
public class CobaCombo extends Activity implements AdapterView.OnItemSelectedListener {

TextView selection;
Dbhelper helper = new Dbhelper(this);
String temp;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    selection = (TextView) findViewById(R.id.selection);
    Spinner spin = (Spinner) findViewById(R.id.spinner);
    Cursor anu = helper.getAllProjectss();
    if(anu.moveToFirst()){
        do{
            temp += anu.getString(1);

        }while(anu.moveToNext());
    }

    String[] isi = { ""+temp+"" };
    System.out.println(isi);    
    spin.setOnItemSelectedListener(this);
    ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, isi);
    aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spin.setAdapter(aa);

} 
```

但是组合框以长字符串从数据库中填充数据..不是下拉项..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:30:13.997

您现在可以使用[rawQuery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)进行查询，它会返回一个[Cursor](http://developer.android.com/reference/android/database/Cursor.html)。

```
Cursor mCursor = mSQLiteDatabase.rawQuery("Select * from myTable", null); 
```

现在，您必须遍历游标并获取所需的数据。这是[示例代码](https://stackoverflow.com/a/4920613/379693)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:31:35.600

在你的声明中

`db.execSQL("CREATE TABLE isicombo (kdcombo text PRIMARY KEY,descp text)");`

最后加上`;`。

`db.execSQL("CREATE TABLE isicombo (kdcombo text PRIMARY KEY,descp text);");`

与插入语句相同的错误。

# actionscript-3 - 通过 UI 缩放 Flex 图形对象

> ID：10170155
> 
> 赞同：0
> 
> 时间：2012-04-16T07:27:31.543
> 
> 标签：actionscript-3, apache-flex, transform, scaling, primitive

我有使用 flex 基元类（如椭圆矩形等）创建的基本形状。每一个都添加到图形对象中。

现在我正在寻找一种机制来选择它并缩放它（如在 Photoshop 变换中 - 可拖动的角和边缘，图像在拖动时被缩放）

有没有可用的解决方案？？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:04:20.813

看看这个：[http ://code.google.com/p/transform-tool/](http://code.google.com/p/transform-tool/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:02:23.603

火花图形基元都没有扩展 InteractiveObject 类，因此您将无法以任何方式直接操作它们。这是我认为你应该做的（更多类似 Actionscript 的思考）：创建一个精灵，使用 AS3 绘图 API 绘制你需要的形状，然后将该形状添加到你的精灵以及其他标记你应该能够的区域的小精灵与您的图形交互。例如，如果您想在抓取角落时缩放主精灵，只需将一个小精灵添加到角落区域并在该小精灵上监听 mouseDown 事件（以及 mouseMove 事件以确定您的主精灵应该调整多少） .

使用一些 Flex 好东西可能有一些更简单的方法，但正如我所说 - 这就是我对纯 AS 所做的事情。

# eclipse - eclipse cvs加载错误

> ID：10170156
> 
> 赞同：0
> 
> 时间：2012-04-16T07:27:31.687
> 
> 标签：eclipse, cvs

我刚刚安装了 eclipse indigo，当我打开 cvs 透视图时，出现以下错误。

```
Could not create the view: Plug-in org.eclipse.team.cvs.ui was unable to load class org.eclipse.team.internal.ccvs.ui.repo.RepositoriesView. 
```

请帮忙。

```
 org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.team.cvs.ui (594).
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:462)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:345)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1207)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:268)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:264)
at org.eclipse.ui.internal.registry.ViewDescriptor.createView(ViewDescriptor.java:63)
at org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:327)
at org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:229)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:313)
at org.eclipse.ui.internal.ViewPane.setVisible(ViewPane.java:534)
at org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180)
at org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:270)
at org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)
at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:473)
at org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1245)
at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1198)
at org.eclipse.ui.internal.PartStack.updateContainerVisibleTab(PartStack.java:1648)
at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:659)
at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:570)
at org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:568)
at org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:272)
at org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:981)
at org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:2714)
at org.eclipse.ui.internal.WorkbenchWindow$27.run(WorkbenchWindow.java:3023)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:3004)
at org.eclipse.ui.internal.WorkbenchWindow$20.runWithException(WorkbenchWindow.java:2290)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$33.runWithException(Workbench.java:1595)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2494)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:674)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:667)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:47:16.217

解决了，损坏的 JRE 导致了它。重新安装了一个新的。

谢谢亚伦，我无法将您的评论作为答案；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:59:36.563

在堆栈跟踪的底部是这个错误：

```
Could not initialize class com.ibm.icu.impl.JavaTimeZone 
```

这表明存在另一个错误（堆栈跟踪较长或日志文件中存在错误）

# iphone - 在 ios 设备上运行 UI 自动化时出现时间标志错误

> ID：10170157
> 
> 赞同：3
> 
> 时间：2012-04-16T07:27:32.350
> 
> 标签：iphone, instruments, ios-ui-automation, ios5

我正在尝试在 ios 5 设备上使用仪器运行自动化脚本，但它在运行时不断出错。它无法执行脚本并说失败并出现错误。当我查看跟踪时，发现以下带有红旗的错误消息。 **#13：时间标志异常脚本代理发出信号**

请查看附加的屏幕截图以获取更多详细信息。![在此处输入图像描述](../Images/8cbdf1303130970995f20046e4e30975.png)

请让我知道是否有人遇到相同的错误并得到了一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-23T17:38:16.447

在您的 iPhone 上 -- 转到设置 -> 开发人员 -> 启用 UI 自动化并将开关切换到打开位置。该错误有些晦涩，在这种情况下并未指出问题所在。

[![在此处输入图像描述](../Images/5da50af6aebd761a93bc6dd0e23f8c1a.png)](https://i.stack.imgur.com/Mbi7g.png)

# c# - 当 T 本身是一个类型时，为什么必须使用 typeof(T) 来获取类型？

> ID：10170158
> 
> 赞同：1
> 
> 时间：2012-04-16T07:27:43.547
> 
> 标签：c#, typeof

例如

```
Type t = typeof(T);
t.GetProperty("Company") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T07:34:55.297

因为`T`不是`Type`对象，它只是一个类型参数。

在编译时，类型参数将被实际类型替换。例如，对于为该`string`类型生成的代码，`typeof(T)`实际上将是`typeof(string)`. 这里`string`不是一个`Type`对象，它只是一个数据类型。您需要`typeof`获取该`Type`数据类型的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:38:12.290

*因为类型和描述*类型的对象之间存在差异。

`T`是一种类型。`typeof`应用于一个类型，并返回一个 type 的对象`Type`，它*描述*了所讨论的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:55:48.497

另一种解释差异的尝试：

有编译时类型，`string`例如`int`或`MyClass`。您在编写代码时声明了它们。

有运行时类型。它们保存在 type 的对象中`Type`。这些是运行时内存中存在的普通对象实例。你可以通过 typeof( `MyType`) 得到这样的对象。这些类型对象可用于在运行时检查类型。

# websphere-7 - WebSphere-7 - 从 WAS 控制台停止我们正在运行的应用程序会关闭 WAS

> ID：10170162
> 
> 赞同：0
> 
> 时间：2012-04-16T07:28:30.203
> 
> 标签：websphere-7

我们已经在 WAS-7 中部署了我们的 EAR 应用程序。此 EAR 应用程序使用 asynchbeans，即工作管理器。此应用程序的目的是让工作管理器在 servlet 开始时生成一些工作。这些作品旨在不断运行，做一个轮询和处理功能（这个应用程序最初是独立的，WAS启用是在我们客户的坚持下完成的）。处理过程令人满意，但是，通过 WAS 控制台，当我们停止应用程序时，WAS 也会随之关闭。当我们调试我们的应用程序的 servlet 销毁时（尝试 WorkManager.join(all workitems)），我们看到我们的应用程序没有设法释放所有使用的工作管理器资源。可能是因为这个，当应用程序停止时，WAS 也会关闭（我们在 WAS-6.1 中尝试过这个应用程序，哪里的行为也是一样的）？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:55:18.130

在从 developerWorks 收到的建议的帮助下，问题得到了解决，原因是应用程序代码中的 System.exit。还必须从这个有用的链接中学到一些东西 - [http://www-01.ibm.com/support/docview.wss?uid=swg21304559](http://www-01.ibm.com/support/docview.wss?uid=swg21304559)。谢谢你。

# git - 将本地仓库重置为与远程仓库完全相同

> ID：10170163
> 
> 赞同：55
> 
> 时间：2012-04-16T07:28:46.083
> 
> 标签：git

如何将我的本地 git repo 重置为与远程 repo 完全相同？

我试过了：

```
git reset --hard HEAD^ 
```

但现在`git status`说我有不同的提交。我基本上只想擦除我在本地获得的任何东西，并在我的本地机器上获得确切的远程仓库。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-16T07:31:31.667

`git reset --hard HEAD^`只会将您的工作副本重置为上一个（父）提交。相反，您想运行

```
git reset --hard origin/master 
```

假设远程是`origin`并且您要重置的分支是`master`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-16T07:31:30.673

您可以删除当前分支，并在远程/分支名称提交处再次创建分支

```
git branch -D branchname
git checkout remote/branchname
git branch branchname 
```

# delphi - 为什么 Delphi XE2 找不到 QuickReports 包的 QrCtrls.dcu 文件？

> ID：10170169
> 
> 赞同：2
> 
> 时间：2012-04-16T07:29:11.187
> 
> 标签：delphi, report, delphi-xe2

我有 Delphi XE2 Professional，并安装了 QuickRep505 组件，但源代码不可用。

我开始维护的项目使用 QrCtrls.dcu 文件，但在运行项目时找不到它。

我试图通过转到`Tools > Configure Tools...`，单击添加并输入来配置它：

**名称：** QuickRep505

**程序：** QR5DesignDXE2.bpl

**工作目录：** C:\Program Files\Embarcadero\RAD Studio\9.0\bin\

Delphi 仍然找不到该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:29:00.177

尝试以下，我刚刚尝试过，它对我来说很好。您只是缺少环境（项目）选项中源的路径：

*   转到`Tools/Options`Delphi IDE 中的菜单项
*   在新打开的`Options`对话框 中
    *   转到`Environment Options/Delphi Options/Library`树视图项目
    *   点击编辑框`...`旁边的按钮`Library path`
    *   在新打开的`Directories`对话框中，在编辑框中输入目录的路径，`Quickrep505`或使用带有打开的文件夹图标的按钮并在设置后浏览它
    *   单击`Add`按钮并通过单击按钮确认`OK`对话框
*   最后`Options`通过单击`OK`按钮确认对话框
*   现在你应该可以构建你的项目了

# java - 在 Java 中执行 MySQL 查询时出错

> ID：10170173
> 
> 赞同：0
> 
> 时间：2012-04-16T07:29:19.190
> 
> 标签：java, mysql, database

我正在尝试将数据插入 MySQL 表，但我收到异常消息：

```
Apr 16, 2012 3:01:03 PM RFID.RFID passDetInput
SEVERE: Can not issue data manipulation statements with executeQuery().
java.sql.SQLException: Can not issue data manipulation statements with executeQuery().
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
at com.mysql.jdbc.StatementImpl.checkForDml(StatementImpl.java:436)
at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1390)
at RFID.RFID.passDetInput(RFID.java:495)
at RFID.RFID.SaveActionPerformed(RFID.java:472)
at RFID.RFID.access$700(RFID.java:28)
at RFID.RFID$7.actionPerformed(RFID.java:259)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6504)
    ... 
```

这是我进行数据操作的代码：

```
import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public void passDetInput(String tag, String fname, String lname, String pID, String ConNo, String phone) {

        String SQLcomm = "insert into pass_det (RFID_tag, fname, lname, ID_num, Conveyor_num, Phone_num) values (/'"+tag+"/',/'"+fname+"/',/'"+lname+"/',/'"+pID+"/',/'"+ConNo+"/',/'"+phone+"/')";

        java.sql.Connection con = null;
        Statement st = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://localhost:3306/passenger_details";
        String user = "root";
        String password = "";

    try {
        con = DriverManager.getConnection(url, user, password);
        st = con.createStatement();
        rs = st.executeQuery(SQLcomm);

    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(RFID.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage(), ex);
    }
} 
```

该功能通过按键执行。

我检查了数据库名称、表名称和元素名称，它们都是正确的。我的代码中的错误在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:33:28.737

试试`execute()`or`executeUpdate()`方法。如果我没记错的话，`executeQuery`只是为了`SELECT`陈述。

你还应该看看：`PreparedStatement`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:33:54.983

你应该使用`st.executeUpdate(SQLcomm)`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:18:19.110

只会`executeUpload()`解决你的问题。

# android - 更改移动网络模式（gsm、wcdma、auto）

> ID：10170179
> 
> 赞同：13
> 
> 时间：2012-04-16T07:29:53.573
> 
> 标签：android, android-networking, telephony

我想更改首选网络模式，即。gsm 或 wcdma 或 auto，以编程方式，从代码，在 Android 上。

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-12T20:57:34.093

## 有可能，我做到了。

为此，您的应用程序**必须**使用系统密钥签名或具有运营商权限。否则应用程序会抛出 `java.lang.SecurityException: No modify permission or carrier privilege.`

我的应用程序在 Android 5.1 Lollipop (API 22) 上运行，并使用系统密钥进行了签名，所以这是我可以确认的唯一配置。我无法确认运营商特权方法。

## AndroidManifest.xml

将此权限添加到您的应用清单。如果您使用的是 Android Studio，它可能会将此行标记为错误，因为只有系统应用程序才能拥有此权限。如果您可以使用系统密钥为您的应用程序签名，请不要担心。

```
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/> 
```

## 获取首选网络

返回值在 RILConstants.java 中定义，例如`RILConstants.NETWORK_MODE_WCDMA_PREF`

```
public int getPreferredNetwork() {
    Method method = getHiddenMethod("getPreferredNetworkType", TelephonyManager.class, null);
    int preferredNetwork = -1000;
    try {
        preferredNetwork = (int) method.invoke(mTelephonyManager);
        Log.i(TAG, "Preferred Network is ::: " + preferredNetwork);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }

    return preferredNetwork;
} 
```

## 设置首选方法。

该参数必须基于`RILConstants.java`，例如：`RILConstants.NETWORK_MODE_LTE_ONLY`

```
public void setPreferredNetwork(int networkType) {
    try {
        Method setPreferredNetwork = getHiddenMethod("setPreferredNetworkType",
                TelephonyManager.class, new Class[] {int.class});
        Boolean success = (Boolean)setPreferredNetwork.invoke(mTelephonyManager,
                networkType);
        Log.i(TAG, "Could set Network Type ::: " + (success.booleanValue() ? "YES" : "NO"));
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
} 
```

这是访问隐藏 API 方法的实用方法。

```
/**
 * Get a hidden method instance from a class
 * @param methodName The name of the method to be taken from the class
 * @param fromClass The name of the class that has the method
 * @return A Method instance that can be invoked
 */
public Method getHiddenMethod(String methodName, Class fromClass, Class[] params) {
    Method method = null;
    try {
        Class clazz = Class.forName(fromClass.getName());
        method = clazz.getMethod(methodName, params);
        method.setAccessible(true);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    }

    return method;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T07:33:52.453

答案是**否定的**

我们可以直接打开移动网络设置的设置应用程序在“2G”和“允许3G”网络之间切换。直接切换很遗憾是不可能的。

我们可以开发一些可以显示当前网络并允许用户从应用程序中切换网络的快捷方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-13T06:42:57.340

这不是一个答案，而是扩展了 Tulio-F 的答案。

RILConstants.java包含以下内容[：](https://github.com/android/platform_frameworks_base/blob/master/telephony/java/com/android/internal/telephony/RILConstants.java)

```
// NETWORK_MODE_* See ril.h RIL_REQUEST_SET_PREFERRED_NETWORK_TYPE 
int NETWORK_MODE_WCDMA_PREF              = 0;   // GSM/WCDMA (WCDMA preferred) 
int NETWORK_MODE_GSM_ONLY                = 1;   // GSM only 
int NETWORK_MODE_WCDMA_ONLY              = 2;   // WCDMA only 
int NETWORK_MODE_GSM_UMTS                = 3;   // GSM/WCDMA (auto mode, according to PRL)**    
int NETWORK_MODE_CDMA                    = 4;   // CDMA and EvDo (auto mode, according to PRL)**
int NETWORK_MODE_CDMA_NO_EVDO            = 5;   // CDMA only 
int NETWORK_MODE_EVDO_NO_CDMA            = 6;   // EvDo only 
int NETWORK_MODE_GLOBAL                  = 7;   // GSM/WCDMA, CDMA, and EvDo (auto mode, according to PRL)**
int NETWORK_MODE_LTE_CDMA_EVDO           = 8;   // LTE, CDMA and EvDo 
int NETWORK_MODE_LTE_GSM_WCDMA           = 9;   // LTE, GSM/WCDMA 
int NETWORK_MODE_LTE_CDMA_EVDO_GSM_WCDMA = 10;  // LTE, CDMA, EvDo, GSM/WCDMA 
int NETWORK_MODE_LTE_ONLY                = 11;  // LTE Only mode. 
int NETWORK_MODE_LTE_WCDMA               = 12;  // LTE/WCDMA 
int NETWORK_MODE_TDSCDMA_ONLY            = 13;  // TD-SCDMA only 
int NETWORK_MODE_TDSCDMA_WCDMA           = 14;  // TD-SCDMA and WCDMA 
int NETWORK_MODE_LTE_TDSCDMA             = 15;  // TD-SCDMA and LTE 
int NETWORK_MODE_TDSCDMA_GSM             = 16;  // TD-SCDMA and GSM 
int NETWORK_MODE_LTE_TDSCDMA_GSM         = 17;  // TD-SCDMA,GSM and LTE 
int NETWORK_MODE_TDSCDMA_GSM_WCDMA       = 18;  // TD-SCDMA, GSM/WCDMA 
int NETWORK_MODE_LTE_TDSCDMA_WCDMA       = 19;  // TD-SCDMA, WCDMA and LTE 
int NETWORK_MODE_LTE_TDSCDMA_GSM_WCDMA   = 20;  // TD-SCDMA, GSM/WCDMA and LTE 
int NETWORK_MODE_TDSCDMA_CDMA_EVDO_GSM_WCDMA     = 21;  // TD-SCDMA,EvDo,CDMA,GSM/WCDMA
int NETWORK_MODE_LTE_TDSCDMA_CDMA_EVDO_GSM_WCDMA = 22;  // TD-SCDMA/LTE/GSM/WCDMA, CDMA, and EvDo

int PREFERRED_NETWORK_MODE   = SystemProperties.getInt("ro.telephony.default_network", NETWORK_MODE_WCDMA_PREF); 
```

在哪里：

`** = "AVAILABLE Application Settings menu"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-15T21:11:13.113

对于那些仍在看这个并且无法使用系统密钥签署他们的应用程序的人。

您可能希望使用[startActivityForResult](https://developer.android.com/reference/android/app/Activity#startActivityForResult(android.content.Intent,%20int))方法将用户重定向到一个特殊的[activity_code](https://developer.android.com/reference/android/provider/Settings#ACTION_NETWORK_OPERATOR_SETTINGS)。

其中一些代码不能保证匹配活动（由于 Android 的不同风格）

在 kotlin 你可以使用这样的东西：

```
startActivityForResult(Intent(android.provider.Settings.ACTION_NETWORK_OPERATOR_SETTINGS), 0) 
```

当然不要忘记导入所需的库。

请记住，用户必须稍微导航到菜单中。因此，也许可以对用户应该执行的输入/操作进行一些通用和文本解释以登陆​​良好的设置页面。

注意1：在某些设备上可能没有选择首选网络的实现。

注意2：如果您可以获得相应的特权，我肯定会推荐 Tulio F. 解决方案。

# extjs - Extjs：如何使用单独的 .js 文件？

> ID：10170183
> 
> 赞同：1
> 
> 时间：2012-04-16T07:30:21.733
> 
> 标签：extjs, extjs3

我的项目将如此之大。我决定将我的 Extjs 代码保存在单独的文件中。我是怎么做的，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:33:28.973

您可以将一些 Extjs 组件声明到另一个 .js 文件中，但是您必须在 html 文档中导入这两个文件。

# django - ModelResource obj_get 是如何实现的？

> ID：10170184
> 
> 赞同：1
> 
> 时间：2012-04-16T07:30:27.370
> 
> 标签：django, tastypie

我必须实现一个覆盖原始 obj_get 方法的新 ModelResource。我必须返回什么样的对象？一个 Django 模型的实例？Tastypie 文档中没有很好地解释它。假设我有一个 Django 模型，我想将其返回为 json 并发回给发出 GET 请求的人。它通常是如何实现的？

我有这个代码：

```
 def obj_get(self, request=None, **kwargs):
    return Item.objects.get(id=kwargs['pk']) 
```

这只是为了向您展示我正在尝试做的事情。我发现它不是我必须返回的 Django 实例。我必须返回什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:48:43.787

实际上，这正是您应该返回的。我建议你看看 Tastypie 的实现`obj_get`：

```
 def obj_get(self, request=None, **kwargs):
    """
    A ORM-specific implementation of ``obj_get``.

    Takes optional ``kwargs``, which are used to narrow the query to find
    the instance.
    """
    try:
        base_object_list = self.get_object_list(request).filter(**kwargs)
        object_list = self.apply_authorization_limits(request, base_object_list)
        stringified_kwargs = ', '.join(["%s=%s" % (k, v) for k, v in kwargs.items()])

        if len(object_list) <= 0:
            raise self._meta.object_class.DoesNotExist("Couldn't find an instance of '%s' which matched '%s'." % (self._meta.object_class.__name__, stringified_kwargs))
        elif len(object_list) > 1:
            raise MultipleObjectsReturned("More than '%s' matched '%s'." % (self._meta.object_class.__name__, stringified_kwargs))

        return object_list[0]
    except ValueError:
        raise NotFound("Invalid resource lookup data provided (mismatched type).") 
```

正如您所看到的，他们用于`self.get_object_list`获取符合条件的项目列表（在这种情况下`kwargs`应该包含`pk`），并且希望只获得一个项目。在这种情况下，他们返回第一个（也是该列表中唯一的项目）。否则会引发异常。不过，Django 的列表只是一个查询集。

一般来说 -`obj_get`应该返回一个具有与资源属性相对应的属性的对象。[Using Riak for MessageResource](http://django-tastypie.readthedocs.org/en/latest/non_orm_data_sources.html#using-riak-for-messageresource)中给出了一个很好的例子，其中一个字典被包装在`RiakObject`类中，这样`obj[ 'attribute' ]`你就可以做`obj.attribute`Tastypie 所需的操作（因此 Django 模型实例将起作用）。

总而言之，您可以返回一个 Django 模型实例，或者如果您需要一些额外的工作并且想要降低性能，您可以使用模型实例属性构建字典并将它们包装在`RiakObject`上面提到的类中。我不推荐后者，但在 Django 的情况下 :)

祝你好运！

# iphone - iPhone/iPad - 每个应用程序的 IP 流量统计

> ID：10170188
> 
> 赞同：0
> 
> 时间：2012-04-16T07:30:58.117
> 
> 标签：iphone, ios, ipad, ip, traffic-measurement

是否可以通过运行在 iPhone/iPad 上的每个应用程序访问实时 IP 流量统计生成器？

如果做不到这一点，是否有运行在可以收集这些信息的设备上的透明代理软件之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:46:08.883

不，这在没有越狱的 iOS 上是不可能的。

如果您想统计“Your App”中的流量，您应该能够通过合理的努力做到这一点。但不适用于其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:46:13.207

iOS 模型不允许您查看其他应用程序的信息。每个应用程序都在自己的空间中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:22:08.973

您可以使用随 Xcode 安装的“Instruments”-App 跟踪您自己的应用程序的网络连接。（“I/O 活动”->“网络连接”）

# design-patterns - 实现适配器模式时是否应该抽象配置？

> ID：10170197
> 
> 赞同：0
> 
> 时间：2012-04-16T07:31:37.230
> 
> 标签：design-patterns, logging

我们正在讨论使用适配器模式进行日志记录。我不确定这是一个好主意，因为我们可能永远不会改变我们的日志实现，但是当我们谈到这个时出现了一个问题：抽象日志模块是否应该隐藏各种日志实现的配置细节？

我见过两个项目使用适配器模式来抽象日志记录（其中一个是[.NET 的通用基础结构库](http://netcommon.sourceforge.net/docs/2.0.0/reference/html/ch01.html#logging-abstract)）。

在这两个项目中，客户端必须提供的配置取决于日志记录实现。例如，如果使用 log4net，客户端必须提供 Log4Net 配置文件。

当我认为这是适配器模式的不完整实现时，我错了吗？对我来说，如果客户必须对适配者有一些了解，那么在不破坏客户的情况下就不可能交换实现......

但我不确定。

感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:48:19.220

这取决于。

总的来说，我同意。如果客户端不需要特定的特定服务实现来使用它，尽管客户端正在使用某种抽象，那么抽象就会被破坏。

但在你的情况下，我认为你混淆了日志库的两个不同客户端。

一个客户端是试图将有关其状态的信息传递给世界的应用程序。它不应该以任何方式与配置有关。

另一个客户是为您的应用程序设置环境的人或任何人。此客户端应仅与配置一起考虑。

因此，您的适配器仅适用于第一个客户端，此客户端已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:40:35.293

可以肯定地说，为了纯粹的抽象目的，适配器应该隐藏任何特定于适配器的实现细节。理想情况下，它应该指定类似“配置”方法的基本配置选项，这些选项应该被翻译成特定的选项（如果可能的话）。

然而，在许多情况下，这可能是极端的。

# wordpress - 如何创建博客现有的 wordpress 网站？

> ID：10170201
> 
> 赞同：0
> 
> 时间：2012-04-16T07:31:59.437
> 
> 标签：wordpress

我有现有的 wordpress 网站并在现有的 wordpress 网站中添加一个博客，我想要另一个链接添加现有 wordpress 网站的这个子域以创建一个新的博客。但我不知道如何创建博客，如何在其中添加博客现有的 wordpress 网站以及如何在现有 wordpress 网站的子域中配置博客链接。

请帮助我一步一步轻松地创建一个博客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:52:29.157

[使用Wordpress Multisite](http://codex.wordpress.org/Create_A_Network)怎么样？

`define('WP_ALLOW_MULTISITE', true);`在 wp-config.php 中使用。

# iphone - 在将数据附加到 iphone 中的分组表视图时，程序在 main.m 中接收到信号 EXC_BAD_SIGNAL

> ID：10170202
> 
> 赞同：0
> 
> 时间：2012-04-16T07:32:00.313
> 
> 标签：iphone, xcode, uitableview, nsmutabledictionary

```
-(void)viewDidLoad{
  for (int i=0; i<[rowsarray count]; i++) {
    [mutabledict setObject:[rowsarray objectAtIndex:i] forKey:[datearray objectAtIndex:i]];
    NSLog(@"mutable dict is :::%@",mutabledict);
}

NSLog(@"temp value is:::%@",mutabledict);
self.tableContents =mutabledict;
[mutabledict release];
NSLog(@"table %@",self.tableContents);
NSLog(@"table with Keys %@",[self.tableContents allKeys]);
self.sortedKeys =[[self.tableContents allKeys] sortedArrayUsingSelector:@selector(compare:)];

NSLog(@"sorted %@",self.sortedKeys);
//  [tableContents release];
[sortedKeys release];
[rowsarray release];
[datearray release];

  } 
```

mutabledict 是一个 NsMutableDictionary，rowsarray 是一个对象数组，而 datearray 是一个键数组。此代码正确显示，但我正在尝试将数据添加到 tableview 然后控件将错误地转到 main.m。请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:06:29.653

如果您调用`sortedArrayUsingSelector`: 这将返回一个自动释放的对象，因此您在调用时可能会收到此错误`[sortedKeys release];`（因此请删除它）。
如果`self.sortedKeys`是您要在表格视图上显示的数组，请确保在您的标题中添加`UITableViewDelegate`并实现所需的回调。`UITableViewDataSource``UIViewController`

# facebook - 如何使用 R 从 Facebook 页面中提取“喜欢”的数量

> ID：10170205
> 
> 赞同：4
> 
> 时间：2012-04-16T07:32:07.007
> 
> 标签：facebook, r, facebook-graph-api

我想使用 R 语言和 Facebook Graph API 提取“喜欢”页面的用户数量。我是 Facebook Graph API 的新手。

我认为 R 中没有与此 API 相关的包。

有没有关于如何使用 R 访问 Facebook API 图形对象的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:45:05.530

jan：我对 R 语言一无所知。但实际上，您可以使用带有以下 url 的 graph api 轻松获取页面的点赞数：

```
https://graph.facebook.com/${page_id} - (Can see the response by hitting this url on a browser) 
```

只需将此代码放在页面的 javascript 部分

```
FB.api( '/${page_id}', function (response) { alert(response.likes) } ); 
```

# sharepoint - 在 sharepoint2010 的管理中心中找不到登录页面 URL

> ID：10170218
> 
> 赞同：0
> 
> 时间：2012-04-16T07:32:50.420
> 
> 标签：sharepoint, sharepoint-2010

我想创建自定义登录页面。

我为 login 创建了一个 .aspx 页面。但是当我去中央政府时。从应用程序管理中选择站点。单击 Authentication Provider.Select Zone ，我没有找到用于更改自定义登录页面 URL 的登录页面 URL 部分。

**编辑**

当我创建 Web 应用程序时，我选择了“经典模式身份验证”。在创建 Web 应用程序时，我应该选择“声明身份验证”而不是经典模式身份验证。:)

我在电源外壳中使用此代码

```
$WebAppName = "http:// yourWebAppUrl"
$account = "yourDomain\yourUser"
$wa = get-SPWebApplication $WebAppName

Set-SPwebApplication $wa -AuthenticationProvider (New-SPAuthenticationProvider) -Zone  Default 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:00:46.650

您可以使用 PowerShell 使用以下 cmdlet

```
Set-SPCustomLayoutsPage -identity "Login" -RelativePath "/_layouts/CustomLogin.aspx" -WebApplication "http://yourwebapplication" 
```

# iphone - 更改下载图像的背景颜色

> ID：10170219
> 
> 赞同：0
> 
> 时间：2012-04-16T07:33:03.087
> 
> 标签：iphone, objective-c

我从特定站点获取了一些图像，并提供了具有白色背景的图像。他们有什么方法可以将图像的背景颜色从白色更改为 Objective-c 中的清晰颜色。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:53:56.327

是的，您可以，但这是一个相当占用 CPU 的操作。如果背景是白色并且只有背景，您可以使用`Quartz`函数来创建一个全新的 PNG 图像，前提是您将白色像素的 alpha 通道从 1 更改为 0。为什么这是一项非常艰巨的任务？您需要逐像素检查图像，如果图像中也有白色，这也会改变。
我认为最好使用 Photoshop 或 GIMP 更改源图像并将其转换为透明背景 PNG，然后您将能够应用您想要的背景。

# javascript - 在 Facebook 应用程序中请求特定的用户权限

> ID：10170223
> 
> 赞同：0
> 
> 时间：2012-04-16T07:33:30.613
> 
> 标签：javascript, facebook, authentication, facebook-javascript-sdk, dom-events

我的 Facebook 应用程序有问题。该应用程序目前正在运行，我收到了来自 Facebook 的电子邮件：

> 我们发现您的应用违反了以下政策，您需要在太平洋标准时间 2012 年 4 月 17 日星期二下午 5:00 之前解决此问题，否则您的应用可能会受到执法行动。
> 
> 我们的政策要求您的应用具有隐私政策，告诉用户您将使用哪些用户数据以及您将如何使用、显示、共享或传输该数据，并且您将在开发者应用程序中包含您的隐私政策 URL（请参阅平台政策 II.3，[http://developers.facebook.com/policy](http://developers.facebook.com/policy)）。
> 
> 我们注意到您的应用在权限对话中缺少隐私政策。请在 developer.facebook.com/apps/[YOUR_APP_ID]/auth 上更新开发者应用程序中的隐私政策 URL 字段。此外，请检查您的应用程序，以确保您也在您的网站或应用程序内显示您的隐私政策。

我的应用程序仅使用基本用户信息。

我正在使用 Javascript SDK 进行基本用户身份验证，但我不知道如何向用户询问正确的权限。

```
<div id="fb-root"></div>
 <script>
 window.fbAsyncInit = function() {
FB.init({
  appId      : '[APPID]', // App ID
  channelUrl : '[URL]', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});  
var login = false;
 FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
              console.log('connected');
              login=true;
                // the user is logged in and connected to your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
          }
          else{
              FB.login(function(response) {
               if (response.authResponse) {
                 console.log('Welcome!  Fetching your information.... ');
                 FB.api('/me', function(response) {
                   console.log('Good to see you, ' + response.name + '.');
                   if(login===false)
                   {
                       window.open("http://www.facebook.com/EnergyZuerich/app_332399760133904", "_top");
                   }
                   //window.location.href=window.location.href;
                   //FB.logout(function(response) {
                     //console.log('Logged out.');
                   //});
                 });
               } else {
                 console.log('User cancelled login or did not fully authorize.');
               }    
             }, {scope: 'email'});
          }});

// Additional initialization code here
 };
  (function() {
     var e = document.createElement('script');
      e.async = true;
     e.src = document.location.protocol +
     '//connect.facebook.net/en_US/all.js';
     document.getElementById('fb-root').appendChild(e);  
   }());
 // Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    d.getElementsByTagName('head')[0].appendChild(js);
 }(document));

</script> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:38:03.230

他们的电子邮件清楚地告诉您该怎么做。即为您的隐私政策创建一个可公开访问的 URL，并为您的应用程序更新 URL 字段。您可以在管理应用程序的 Facebook 上执行此操作。

# c# - 如何在网页上单击按钮时创建弹出窗口登录？

> ID：10170226
> 
> 赞同：0
> 
> 时间：2012-04-16T07:33:46.307
> 
> 标签：c#, asp.net, authentication, popup, windows-authentication

我有一个使用 C# 基于 Windows 身份验证创建的网站。提交按钮后，我需要有一个弹出窗口登录以获取用户的凭据，然后才能继续。

所以在这种情况下，父页面仍然保留原始用户 A 的凭据。弹出窗口登录可以捕获另一个用户的凭据并将其传递给父表单。

我怎么做？

# ruby-on-rails - FactoryGirl 和 Devise 助手不符合规范

> ID：10170231
> 
> 赞同：2
> 
> 时间：2012-04-16T07:33:56.307
> 
> 标签：ruby-on-rails, rspec, devise, factory-bot

使用guard/spork/rspec/factory_girl 运行rails 3.2.3，并在我的规范助手中包含以下内容：

```
Spork.prefork do
  ...
  RSpec.configure do |config|
    config.include FactoryGirl::Syntax::Methods
    config.include Devise::TestHelpers, :type => :controller
    ...
  end 
end 
```

并有适当的模型/工厂设置，以便这应该工作：

```
describe "GET index" do
  describe "as logged in Person without Attendee record" do
    @person = create :person
    sign_in @person
    it "redirects to Attendee new page" do
      visit school_programs_root
      current_path.should == new_school_programs_attendees
    end 
  end 
end 
```

但是，当我运行规范时，我得到：

```
Exception encountered: #<NoMethodError: undefined method `create' for #<Class:0x007f860825a798>> 
```

当我将规范的第 3 行更改为：

```
@person = FactoryGirl.create :person 
```

工厂已创建，但我得到：

```
Exception encountered: #<NoMethodError: undefined method `sign_in' for #<Class:0x007fcee4364b50>> 
```

所有这些都表明我的控制器规格没有加载助手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:05:48.807

Spork 和 FactoryGirl 之间存在与类重新加载相关的已知问题。我多年来使用的围绕此的机制曾经记录在 Spork Wiki 上，但已经消失了（为什么？- 似乎仍然是必要的）。它仍然记录为[github 上的 FactoryGirl 问题报告](https://github.com/thoughtbot/factory_girl/issues/55#issuecomment-631787)。

简单来说：

在`Gemfile`中，关闭 FactoryGirl 的自动要求：

```
gem 'factory_girl_rails', '~> 3.5.0', require: false 
```

在块中`spec_helper.rb`，`each_run`需要 FactoryGirl 并包含语法方法：

```
Spork.each_run do
  # This code will be run each time you run your specs.
  require 'factory_girl_rails'

  RSpec.configure do |config|
    config.include FactoryGirl::Syntax::Methods
  end

end 
```

这修复了第一个错误。对于第二个错误，即设计错误，您需要`sign_in`在一个`before`块内运行，请参阅下面的示例中的修复。那应该对你有用。

```
describe "GET index" do
  describe "as logged in Person without Attendee record" do
    before do    
      @person = create :person
      sign_in @person
    end

    it "redirects to Attendee new page" do
      visit school_programs_root
      current_path.should == new_school_programs_attendees
    end 
  end 
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T08:30:04.177

添加到您的规格：

```
include Devise::TestHelpers 
```

# java - 如何分析缓存（番石榴）

> ID：10170232
> 
> 赞同：4
> 
> 时间：2012-04-16T07:34:02.977
> 
> 标签：java, profiling, guava

我在我的 gwt-webapp 的服务器端使用番石榴的缓存。但是要正确配置缓存，我需要知道一些“遥测”。首先我需要知道一个缓存条目需要多少内存。到目前为止，我尝试了 jconsole 和 visualvm。问题是，我不知道在哪里看。我查找了 ConcurrencyHashMap 及其条目，但找不到正确数量的实例。

那么，什么是分析（番石榴）缓存的好方法和可能简单的方法？

（目前我还没有准备好支付工具来获得缓存（条目）大小的近似值/平均值）

**讨论状态总结**：Aaron Digulla 建议使用弱引用并让 Java 完成管理内存的工作。但是在[之前的问题](https://stackoverflow.com/questions/9229006/google-common-cache-default-value-of-maximumsize-and-other-optional-setting)中，由于使用弱引用的性能问题，人们建议“调整、监控、调整”缓存。

**更新** 确定我的问题可能是误导 - 我不想知道有关缓存或其开销的信息。我想知道给定对象的实例有多大 - 配置缓存（在本例中为番石榴）。我必须回答的第一个问题是：我能否获得内存中的所有实例（100% 命中率）或者这将占用多少内存。如果这是可能的，则不需要缓存配置。如果所有对象都会占用太多内存，我必须考虑配置。我希望有一个工具可以说明对象的平均内存占用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T07:57:28.790

正确的解决方案是调用`stats()`方法。缓存使用的内存量几乎无关紧要，尤其是当您查看内存价格时。从 ROI 的角度来看：如果您花费超过几个小时来尝试优化缓存，那么再安装 4GB 的 RAM 会更便宜。

此外，确定“条目的大小”并不容易。根据您放入缓存的值，单个条目的大小可能会有所不同。您可以尝试查找`LocalCache.LocalLoadingCache`（如果您使用`CacheLoader`in `build()`）或[堆转储](http://visualvm.java.net/heapdump.html)`LocalCache.LocalManualCache`中的实例。

这应该为您提供实例大小的平均值，但它不会有太大帮助：大小不是“递归的”，因此它不考虑引用。包含引用的问题是在哪里停止。

例如，每个类都有一个对类加载器的引用。许多类加载器保留对它们已加载的所有类的引用。如果包括在内，您的实例的大小将相差甚远。

[YourKit](http://www.yourkit.com/overview/index.jsp)非常擅长这种分析，但正如我上面所说，它通常不值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T08:46:45.853

[有关JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)的解决方案，请参阅[此问题](https://stackoverflow.com/questions/7867611/how-to-use-jprofiler-custom-probe-telemetry-for-monitoring-guava-cache-statistic)。

JProfiler 8 将有一个专用的 Guava 探针。免责声明：我公司开发 JProfiler。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T11:33:05.990

它不是真正的外部工具，但您可以使用诸如[memory-measurer](https://github.com/DimitrisAndreou/memory-measurer)之类的东西来记录条目的大小。就像是：

```
Cache cache = ...
// copy the entries to avoid measuring the footprint of the "EntrySet view"
List<Map.Entry<K, V>> entries = ImmutableList.copyOf(cache.asMap().entrySet());
long memory = MemoryMeasurer.measureBytes(entries);
logger.trace("Size of %s entries : %s bytes", entries.size(), memory); 
```

您可以每隔几分钟记录一次，然后分析数据。

我认为有人讨论过提供更好的分析工具来简化 Guava 缓存调整。还提出了“自我调整”缓存的想法。不过，似乎找不到我读到的讨论线程。

# android - 如何在 URL 中传递长字符串？

> ID：10170233
> 
> 赞同：0
> 
> 时间：2012-04-16T07:34:07.707
> 
> 标签：android

我想在此网址[http://maps.google.com/maps/api/geocode/json?address=](http://maps.google.com/maps/api/geocode/json?address=) "+ **keyword +"&sensor=false" 中传递关键字（** **=“mexico city”** ）关键字而不修剪空空格。如何插入。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:41:56.577

对于一般的 Android 或 Java，您可能需要使用[URLEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)。

```
String keywordEncoded = URLEncoder.encode(keyword, "UTF-8");
String urlEncoded = "http://maps.google.com/maps/api/geocode/json?address="
                    + keywordEncoded
                    + "&sensor=false"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:38:08.257

将空格替换为 %20 其十六进制等效空间，http 服务器将其解析为空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:39:17.803

您只需将空字符串替换为`%20`

`usrStringObject = usrSTringObject.replaceAll(" ","%20");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:38:40.357

您需要用 %20 替换空格。

[http://maps.google.com/maps/api/geocode/json?address=mexico%20citysensor=false](http://maps.google.com/maps/api/geocode/json?address=mexico%20citysensor=false)**

# sql - 如何在 Postgres 中使用带有通配符的 group by

> ID：10170235
> 
> 赞同：4
> 
> 时间：2012-04-16T07:34:45.200
> 
> 标签：sql, postgresql, group-by

我在 Postgres 中遇到了这段代码的问题。我想获取用户表中的所有字段，但只能按 id 分组。这在 MySQL 和 SQLite 上运行良好，但在谷歌搜索后我发现这种行为不是标准的一部分。

```
SELECT u.*, p.*, count(o.id) AS order_count
FROM shop_order AS o
LEFT JOIN user AS u ON o.user_id = u.id
LEFT JOIN userprofile AS p ON p.user_id = u.id
WHERE o.shop_id = <shop_id>
GROUP BY u.id 
```

（请注意，它`<shop_id>`是以编程方式传递的，因此您可以轻松地将其替换为任何整数。）

这是我得到的错误

```
column "u.id" must appear in the GROUP BY clause or be used in an aggregate function 
```

我是 SQL 新手，所以如果这很明显，请保持温和 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:44:36.663

`user`不幸的是，如果不列出 和 中的所有列，我认为您无法做到这一点`userprofile`。（通配符的使用通常被认为是你只为简单的临时查询所做的事情，我想这是原因之一！） MySQL 和其他数据库有一个“方便”的特性，如果一个列都不在 GROUP BY 子句或聚合函数中，则每个组中该列的任何值都可以显示在结果中。PostgreSQL 有点严格。

但通常情况下，表中只有几列就足够分组了。有很多方法可以重写它。也许您可以做的是：

```
SELECT u.*, p.*, (select count(o.id) FROM shop_order AS o WHERE o.user_id = u.id AND o.shop_id = <shop_id>) AS order_count
FROM user AS u
LEFT JOIN userprofile AS p ON p.user_id = u.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:44:13.127

您可以使用`row_number`将结果限制为每个用户一行：

```
select  *
from    (
        select  row_number() over (partition by u.id) as rn
        ,       *
        join    user u
        on      sub.user_id = u.id
        join    shop_order so
        on      so.user_id = u.id
        left join
                userprofile up
        on      up.user_id = u.id
        where   so.shop_id = <shop_id>
        ) as SubQueryAlias
where   rn = 1 
```

子查询是必需的，因为 Postgres 不允许像子句`row_number`中那样的窗口函数。`where`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T07:55:43.207

您正试图要求数据库计算一些非常不具体的东西您想计算订单但又想显示所有详细信息，如果用户配置文件包含每个用户的多行并且这些行不同，该怎么办，对于每个 u.id，您将获得不止一行，并且您指定您只想要一个这就是为什么数据库说“走开，告诉我你真正想要什么”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T07:58:54.080

你的 Postgres 版本是什么？如果您使用 Postgres 9.0 及以下版本，您的代码构造将不会运行。例如，这是不允许的：

```
SELECT
    p.id,
    p.firstname, p.lastname, p.address, -- these auxiliary fields is helpful to program users
    count(*)
FROM
    people p
    JOIN visits v ON p.id = v.person_id
GROUP BY p.id 
```

必须在 9.0 及以下版本上执行此操作：

```
SELECT
    p.id,
    p.firstname, p.lastname, p.address, -- these auxiliary fields is helpful to program users
    count(*)
FROM
    people p
    JOIN visits v ON p.id = v.person_id
GROUP BY p.id
    ,p.firstname, p.lastname, p.address; -- these ancillary fields aids the RDBMS on preventing
    -- programmers from accidentally committing the same mistake as MySQL programmers. 
```

如果您使用的是 Postgres 9.1，您当然可以在 GROUP BY 中只使用一个字段，即使您在 SELECT 子句中有很多字段，只要该 GROUPed 字段是主键。因此这将运行：

```
SELECT
    p.id,
    p.firstname, p.lastname, p.address, -- these auxiliary fields is helpful to program users
    count(*)
FROM
    people p
    JOIN visits v ON p.id = v.person_id
GROUP BY p.id 
-- note that there's no need to repeat the SELECTed fields on GROUP BY clause 
```

Postgres 9.1 可以促进[对主键的功能依赖](http://www.ienablemuch.com/2010/08/postgresql-recognizing-functional.html)，因此只允许在 GROUP BY 子句中包含主键

SQL 小提琴示例：[http ://sqlfiddle.com/#!1/3b857/3](http://sqlfiddle.com/#!1/3b857/3)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T08:10:53.483

您使用的是哪个版本的 PostgreSQL？我相信它是 9.1 之前的版本。

[从 9.1 版开始，](http://www.postgresql.org/docs/current/interactive/release-9-1.html#AEN107457) PostgreSQL 还支持您正在寻找的功能，以防您使用`GROUP BY`主键列。所以也许升级是一个不错的选择。

# powershell - powershell - 如何检查脚本是否正在运行？

> ID：10170237
> 
> 赞同：14
> 
> 时间：2012-04-16T07:35:04.913
> 
> 标签：powershell, powershell-2.0

每次我的脚本没有正确结束并且没有执行 stop-transcript 时，我都会收到此消息：

```
Start-Transcript : Transcription has already been started. Use the stop-transcr
ipt command to stop transcription.
At C:\ps\003desifrovanie.ps1:4 char:17
+ start-transcript <<<<  -path c:\_LOG\sfrbdesifrovanie.log -append
+ CategoryInfo          : NotSpecified: (:) [Start-Transcript], InvalidOpe
rationException
+ FullyQualifiedErrorId : System.InvalidOperationException,Microsoft.Power
Shell.Commands.StartTranscriptCommand 
```

是否可以检查脚本是否正在运行并在脚本开始时使用 if-then 停止它？或者如何在最后可靠地阻止它？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T08:02:05.140

`try-catch`在你的 powershell 脚本开头有一个空块来停止转录呢？

```
try{
  stop-transcript|out-null
}
catch [System.InvalidOperationException]{} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-16T08:10:10.537

像这样的东西不会起作用吗？

```
try
{
    Start-Transcript
    # Do my stuff
}

finally
{
    Stop-Transcript
} 
```

从文档中：无论 Try 块是否遇到终止错误，Finally 块语句都会运行。Windows PowerShell 在脚本终止之前或当前块超出范围之前运行 finally 块。即使您使用**`CTRL`+`C`**停止脚本，Finally 块也会运行。如果 Exit 关键字从 Catch 块中停止脚本，Finally 块也会运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:05:22.953

Try the Test-Transcribing function available here: [http://poshcode.org/1500](http://poshcode.org/1500)

```
 if(Test-Transcribing) {Stop-Transcript} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-01T18:11:45.913

```
try { 
     Start-Transcript -path $myOutLog

} catch { 

       stop-transcript

       Start-Transcript -path $myOutLog 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-02-12T17:58:59.537

```
$erroractionpreference="Silentlycontinue"
start-transcript c:\file.txt
$transcriptrunning=$?
$erroractionpreference="Continue"
if($transcriptrunning) {stop-transcript} 
```

# html - jQuery移动CSS类链接

> ID：10170244
> 
> 赞同：0
> 
> 时间：2012-04-16T07:35:49.593
> 
> 标签：html, css, jquery-mobile

我正在使用 JQuery Mobile 制作移动 webapp。现在在底部我有某种导航菜单。这是HTML

```
<ul data-role="listview">
    <li data-icon="arrow-u"><a href="#top" class="top" data-ajax="false">Top</a></li>
    <li><a href="~PROBE(201)~" data-transition="slide">Menu</a></li>
    <li><a href="~PROBE(208)~" data-transition="slide">Contacten</a></li>
    <li><a href="~PROBE(206)~" data-transition="slide">Klanten</a></li>
    <li><a href="~PROBE(207)~" data-transition="slide">Planning</a></li>
</ul> 
```

现在我想要右侧的第一个 listItem。所以我做了一个CSS类'top'

```
.top{
    text-align:right; 
    padding-right:35px;
} 
```

但由于某种原因，它不采用这个 CSS 类。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:38:53.623

您正在将该`top`类`a`应用于`li`.

**更新**

随着您的样式被覆盖，您需要增加选择器的[CSS 特定](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)性，直到它高于覆盖它的规则的特定性。由于我对您的 DOM 了解不多，所以我能给您的最好的是：

```
ul li.top{
    text-align:right; 
    padding-right:35px;
} 
```

但这可能还不够。浏览关于 CSS-specificity 的文章，有一部分是关于如何计算特异性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:00:48.953

试试这样：

```
ul li a.top{
    text-align:right; 
    padding-right:35px;
} 
```

或这样的：

```
ul li:first-of-type a{
    text-align:right; 
    padding-right:35px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:30:22.980

我发现在某些情况下，覆盖有点棘手。你可能不得不做这样的事情。一些浏览器移动和网络没有像我预期的那样选择覆盖。最终结果我必须使用重要来确保我的风格得到应用。请注意如何使用它以及在哪里使用它。

```
ul li.top{
    text-align:right !important; 
    padding-right:35px !important;
} 
```

# c++ - Python3 或 C/C++：TWAIN 接口

> ID：10170252
> 
> 赞同：0
> 
> 时间：2012-04-16T07:36:18.580
> 
> 标签：c++, c, python-3.x, twain

我见过 Python2 的 twain 模块，Python3 有什么类似的吗？我需要控制扫描过程，特别是直方图设置（阴影、高光、伽马）、分辨率和扫描窗口大小。在 Python3 中实现自动化的最佳方法是什么？

**编辑：**如果不在 Python 中，是否有任何 C/C++ 库可以集成到 Python 中并控制扫描过程？我只知道一个库，EZTwain，它支持多种编程语言（*不包括*Python），但它不适用于某些直方图设置，甚至不支持商业版本，所以我会避免使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:03:45.920

我们使用一个名为 Leadtools 的第三方工具包，它可能会对您有所帮助。该工具包支持最常见的编程语言，包括 C/C++、C#、VB.NET 等。有关更多信息，您可以查看以下 2 个帮助主题：

对于 .NET： [使用 .NET 获取图像](http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics.twain~tw.topics.twainacquiringanimage.html)

对于 C++： [使用 C++ 获取图像](http://www.leadtools.com/help/leadtools/v175/twain/clib/dlltutor/twainimplement.htm)

# html - 在chrome中对齐下拉列表

> ID：10170253
> 
> 赞同：0
> 
> 时间：2012-04-16T07:36:19.457
> 
> 标签：html, css, google-chrome, alignment

我正在尝试右对齐类似于我的文本字段的下拉列表。
它适用于 Firefox 和 IE，但我无法弄清楚为什么它不能在 chrome 中正确对齐。

**HTML**

```
<div id="metaDataEditInner">
    <label>Document name</label>
    <input class="field"></input>
    <label>Document description</label>
    <input class="field"></input>
    <label>Document remarks</label>
    <input class="field"></input>
    <label>Document type</label>
    <select class="dropdownfield">
    </select>
    <br />
    <div style="clear:both">
        <button id="test" class="defaultButton">Save metadata
        </button>
    </div>
</div> 
```

**CSS**

```
#metaDataEditInner
{
    margin: .5em 5px;
    text-align: right;
    width: 550px;
}

#metaDataEditInner label
{
    float: left;
    line-height: 1em;
    margin-top: 3px;
}

#metaDataEditInner .field
{
    border: 1px solid black;
    width: 350px;
    font-size: 12px;
    line-height: 1em;
    padding: 4px;
    margin-bottom: 10px;
}

#metaDataEditInner .dropdownfield
{
    border: 1px solid black;
    width: 360px;
    font-size: 12px;
    line-height: 1em;
    padding: 4px;
    margin-bottom: 10px;
    color:Black;
} 
```

有任何想法吗 ？

我做了一个小提琴来说明这个问题

[http://jsfiddle.net/ZE5ss/2/](http://jsfiddle.net/ZE5ss/2/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:51:02.173

我不想说，但如果我看到你的标记，那是完全错误的。

1）始终将**表单**元素放在里面`<form>`。

2）**输入**&**按钮**是一个自闭元素。像这样写：

```
<input class="field" />
 <button id="test" class="defaultButton" value="Save metadata" /> 
```

3)没有标签，**选择**不起作用。`option`像这样写：

```
<select class="dropdownfield">
   <option></option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:53:12.530

试试这段代码，它在所有浏览器中都能正常工作：

```
<div id="metaDataEditInner">
<table>
<tr>
<td>
    <label>Document name</label>
        </td>
        <td>
    <input class="field"></input>
    <tr>
<td>
    <label>Document description</label>
        </td>
        <td>
    <input class="field"></input>.
    <tr>
<td>
    <label>Document remarks</label>
        </td>
        <td>
    <input class="field"></input>
    <tr>
<td>
    <label>Document type</label>
        </td>
        <td>
    <select class="dropdownfield">
    </select>
    <tr>
<td>    </td>
        <td>
        <button id="test" class="defaultButton">Save metadata

        </button>

    </tr>
    </table>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:00:03.283

只需删除`<br />`. `</select>`在 chrome 上为我工作，看到[这个 fiddle](http://jsfiddle.net/6b98f/11/)。

# ios - 在 GameCenter 中建立玩家之间的连接

> ID：10170255
> 
> 赞同：-1
> 
> 时间：2012-04-16T07:36:38.523
> 
> 标签：ios, ios4, ios5, xcode4.2, game-center

IOS 5 Xcode 4.2

我在 GameCenter 上工作，我已经按照 raywenderlich 教程完成了本地用户身份验证等基本工作，所以现在我必须在玩家之间建立连接，我无法获得应该集成的代码部分，最**重要的是**我没有使用 Cocos 2D，也不会使用，一旦建立连接，我如何在用户之间传递数据。

任何人都可以帮我解决这个问题..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:14:29.170

Ray Wenderlich 提供了一个关于通过 Game Center 创建多人游戏的精彩教程。我很高兴地建议您查看它，它将帮助您了解建立连接后数据传输的方式，以及 Game Center 的一般工作方式。

[http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)

[http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22](http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22)

# java - android日历时区不起作用？

> ID：10170256
> 
> 赞同：1
> 
> 时间：2012-04-16T07:36:54.193
> 
> 标签：java, android

我对 android 应用程序的时区有疑问。

下面的代码是我的例子：

```
Calendar c1 = Calendar.getInstance(TimeZone.getTimeZone("America/Miami"));
    c2 = Calendar.getInstance(TimeZone.getDefault());
    c2.set(2012, Calendar.MAY, 1, 9, 0, 0);

    tv2.setText(c1.getTime().toString());
    tv3.setText(c2.getTime().toString()); 
```

当我启动应用程序并查看我找到的 textViews 时： ![在此处输入图像描述](../Images/cfb53b6499e8dbc38e327c4f24476493.png)

为什么它们都是 gmt+2 而第一个不是迈阿密时区？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T08:26:11.133

我可以复制你所经历的。您可以通过执行以下操作获得迈阿密时区的正确时间：

```
Calendar c1 = new GregorianCalendar(TimeZone.getTimeZone("GMT-4"));
int hour = c1.get(Calendar.HOUR);         
int minutes = c1.get(Calendar.MINUTE);     
int seconds = c1.get(Calendar.SECOND);

tv2.setText(String.format("%d:%d:%d", hour, minutes, seconds)); 
```

输出：4:22:41

您可以使用“America/New_York”或“GMT-4”。然而，Chilledrat 提到的最后一个可能在夏令时存在一些问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T09:14:02.280

好的，经过多次试验终于弄明白了。我观察到的问题是，Calendar 的 getTime() 似乎总是返回当前 TimeZone 中的日期。我仍然没有找到任何数据表明这是它的工作方式。

为了以您想要的方式获取数据，我们需要引入 SimpleDataFormat。这就是我为获取数据所做的。

```
Calendar c1 = Calendar.getInstance(TimeZone.getTimeZone("America/New_York"), Locale.US);
Calendar c2 = Calendar.getInstance(TimeZone.getDefault());
c2.set(2012, Calendar.MAY, 1, 9, 0, 0);

SimpleDateFormat sdf = new SimpleDateFormat();
sdf.setCalendar(c1);
tv2.setText(sdf.format(c1.getTime()));
tv3.setText(c2.getTime().toString()); 
```

在这里，您可以根据定义的 TimeZone 获得输出。

**注意**我还使用了 Locale，因为它应该是推荐的做法。告诉我这是否适合你。

# flash - 如何为 spark 组合框中的每个项目添加工具提示

> ID：10170260
> 
> 赞同：0
> 
> 时间：2012-04-16T07:37:12.153
> 
> 标签：flash, apache-flex, actionscript, air

我想在 Spark Combo-box 中的每个项目上显示工具提示。

我使用我自己的combox类这里是完整的代码

```
package com.zigron.controls.extended.components 
```

{ 进口 com.zigron.controls.extended.skins.LabelTextInputSkin; 导入 com.zigron.controls.extended.skins.comboBoxRegisterationSkin；

```
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

import mx.collections.ArrayCollection;
import mx.collections.ICollectionView;
import mx.collections.IList;

import spark.components.ComboBox;
import spark.components.RichEditableText;
import spark.events.DropDownEvent;
import spark.events.TextOperationEvent;

public class LabelComboBox extends ComboBox
{
    /**
     * By default, the match is from the beginning of the string only.
     * Set searchFromBeginning to false to search the entire string for a match.
     */
    public var searchFromBeginning:Boolean = false;
    private var searchRegEx:RegExp;
    private var _prompt:String
    private var promptChanged:Boolean;
    private var _autoWidth:Boolean = true;

    public function LabelComboBox()
    {
        super();
        this.setStyle("skinClass", comboBoxRegisterationSkin);
        addEventListener( DropDownEvent.OPEN, function (event:DropDownEvent ):void
        {
            if(dropDown)
            {
                if( textInput.text.length == 0 )
                {
                    ArrayCollection( dataProvider ).filterFunction = null;
                    ArrayCollection( dataProvider ).refresh();
                }

                if(autoWidth)
                {
                    dropDown.width = scroller.horizontalScrollBar.explicitMaxWidth;
                }
                else
                {

                }

                if(dropDown.width < 100)
                {
                    //dropDown.width = dropdownOriginalWidth;
                }
            }
        });

        // Listen for key-up events to engage the filter
        //this.addEventListener( KeyboardEvent.KEY_UP, onKeyUp );
        this.addEventListener( KeyboardEvent.KEY_DOWN,  keyDownHandler);
        // Drop open the ComboBox
        this.openOnInput = true;

    }

    public function get autoWidth():Boolean
    {
        return _autoWidth;
    }

    public function set autoWidth(value:Boolean):void
    {
        _autoWidth = value;
    }

    override protected function keyDownHandler(event:KeyboardEvent):void 
    {

        super.keyDownHandler(event);

        if( ( event.keyCode == Keyboard.BACKSPACE ) ||
            ( event.keyCode == Keyboard.DELETE    )  )
        {
            if( textInput.selectionAnchorPosition <= 0 )
            {
                textInput.text = "";
                ArrayCollection( this.dataProvider ).filterFunction = null;
                ArrayCollection( this.dataProvider ).refresh( );
                selectedIndex = -1;
            }
        }

        //adjustSelectionAndCaretUponNavigation(event); 

    }

    override public function set dataProvider(value:IList):void
    {
        super.dataProvider = value;
        if( value is ICollectionView)
        {
            ( value as ICollectionView ).filterFunction = firstOnlyFilter;
        }
    }

    protected function firstOnlyFilter ( item:Object):Boolean
    {
        var label2 : String;
        try
        {

            if( labelField != "label" && ! ( item is String ) )
                label2 = item[ labelField ];
            else
                label2 = item.toString();

        }
        catch(e:Error)
        {
            label2 = "Property not found " + labelField;
        }

        var len:int     = textInput.selectionAnchorPosition > 0 ? textInput.selectionAnchorPosition:textInput.text.length;
        var fil:String  = textInput.text.substr(0, len );
        trace("fil, len, pos : ", fil, len, textInput.selectionAnchorPosition );
        if( label2.toLowerCase().search( fil.toLowerCase() ) != -1 )
        {
            return true;
        }

        return false;
    }

    override protected function textInput_changeHandler(event:TextOperationEvent):void
    {
        super.textInput_changeHandler( event );

        if( dataProvider is ArrayCollection)
        {
            if( textInput.text.length == 0 )
                ArrayCollection( this.dataProvider ).filterFunction = null;

            ( dataProvider as ArrayCollection ).refresh();
        }
    }

    public function get prompt():String
    {
        return _prompt;
    }

    public function set prompt(v:String):void
    {
        if (_prompt != v)
        {
            _prompt = v;
        }

    }

    override protected function partAdded(partName:String, instance:Object):void
    {
        super.partAdded(partName, instance);
        if(  ( instance is LabelTextInput )  && partName == "textInput" )
        {
            trace(partName);

            //var instance = new LabelTextInput();
            //( instance as LabelTextInput ).prompt = prompt;
            //( instance as LabelTextInput ).setStyle("skinClass", LabelTextInputSkin );

            LabelTextInput(instance).prompt = prompt;
        }

    }

    /** Each time the user presses a key, filter the ComboBox items to match. */
    private function onKeyUp( event:KeyboardEvent ):void 
    {
        var textBox:RichEditableText = RichEditableText ( event.target );
        var searchText:String = event.target.text;

        // Number or letter entered
        if ( isAlphaChar( event.keyCode ) ) 
        {
            // Set up the search expression
            searchRegEx = new RegExp( textBox.text, 'i' );

            // Filter the ArrayCollection
            ArrayCollection( this.dataProvider ).filterFunction = filter;
            ArrayCollection( this.dataProvider ).refresh( );

            // Set the ComboBox's search text
            //textBox.text = searchText;

            //Select the current search text
            textBox.selectRange( searchText.length, searchText.length );
        }

        if( searchText.length == 0 )
        {
            selectedIndex = -1;
        }

        if ( event.keyCode == Keyboard.ESCAPE ) 
        {
            textBox.text = "";
            ArrayCollection( this.dataProvider ).filterFunction = null;
            ArrayCollection( this.dataProvider ).refresh( );
            this.setFocus( );
        }
    }

    /** The ArrayCollection filter function. Each item gets passed into this. */
    private function filter( item:Object ):Boolean 
    {

        var found:Boolean = false;

        // Determine if the search string is contained in the label of each ComboBox item
        if ( searchFromBeginning ) {
            if ( item is String ) {
                found = ( item.search( searchRegEx ) == 0 );
            } else {
                found = ( String( item[ this[ "labelField" ] ] ).search( searchRegEx ) == 0 );
            }
        } else {
            if ( item is String ) {
                found = ( item.search( searchRegEx ) >= 0 );
            } else {
                found = ( String( item[ this[ "labelField" ] ] ).search( searchRegEx ) >= 0 );
            }
        }

        return found;
    }

    /** Filter out any non-alphanumeric key strokes */
    private function isAlphaChar( keyCode:int ):Boolean 
    {

        var isAlpha:Boolean = false;

        if (
            ( keyCode > 64 && keyCode < 91 )
            ||
            ( keyCode > 96 && keyCode < 123 )
            //||
            //( keyCode == Keyboard.BACKSPACE )
            //||
            //( keyCode == Keyboard.DELETE)
        ) {
            isAlpha = true;
        }

        return isAlpha;
    }
} 
```

}

如何设置工具提示的属性以及在我使用此组合框的任何位置显示工具提示的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:01:55.623

您基本上需要的是将 itemRenderer 设置为等于 Label

```
<s:ComboBox id="cb"
   dataProvider="{arr}"
   itemRenderer="mx.controls.Label"
   width="200" /> 
```

您还可以创建自己的自定义渲染器，其中包含标签并在渲染器中声明工具提示

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark"
                xmlns:mx="library://ns.adobe.com/flex/mx"
                autoDrawBackground="true">

    <s:Label text="{data.label}" width="100%" maxWidth="100" height="25" paddingLeft="5" paddingTop="5" toolTip ="{data.label}"/>

</s:ItemRenderer> 
```

# c# - 在 Windows Mobile 5.0 中禁用 ImageButton

> ID：10170272
> 
> 赞同：0
> 
> 时间：2012-04-16T07:38:21.390
> 
> 标签：c#, windows, mobile

我想禁用我的 ImageButton，但是当我使用 Enabled 属性并将其设置为 false 按钮​​时，它就会消失，我想让他变成“灰色”（我希望你知道我的意思......）。什么是最好的解决方案？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:35:05.557

您可以创建图像的“灰色”版本，当您想要禁用按钮更改为该图像时，然后检查您的点击事件，无论您是否认为您的按钮已启用。

# c# - 在 C# 中合并两个音频文件

> ID：10170274
> 
> 赞同：5
> 
> 时间：2012-04-16T07:38:23.397
> 
> 标签：c#, c#-4.0, audio

有 2 个音频（mp3 或 wav）文件。第一个文件是我的声音，第二个文件是我朋友的声音。他们每个人都有**10秒**的持续时间。我想将它们结合起来得到**一个**也应该有 **10 秒**持续时间的文件。

我应该使用哪些工具或实用程序来解决此问题？

更新：我使用了 lame.exe，但它**连接**了它们并创建了 20 秒持续时间的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:42:56.647

[这](http://www.codeproject.com/Articles/35725/C-WAV-file-class-audio-mixing-and-some-light-audio)可能会奏效。

> 我的 WAVFile 类支持 8 位和 16 位音频、单声道或立体声。它的一个特殊功能是将 WAV 音频文件混合在一起的方法，以便同时听到来自每个源 WAV 文件的音频。

注意：以上段落中，`My`指的是班级的作者，而不是我自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T07:52:33.677

查看 NAudio 教程：[将多个波形文件实时混合在一起](http://opensebj.blogspot.com/2009/02/naudio-tutorial-2-mixing-multiple-wave.html)。

# javascript - 自动嵌入 Youtube 的 jQuery 功能需要接受多种链接格式

> ID：10170275
> 
> 赞同：2
> 
> 时间：2012-04-16T07:38:23.480
> 
> 标签：javascript, jquery, regex, youtube

我有这个 jQuery 函数，它可以嵌入来自 Youtube 的链接：

```
 $.fn.youtube = function(options) {
    return this.each(function() {
      var options = $.extend({width:570, height:416}, options);
      var text = $(this).html();
      var regex = /http:\/\/(www.)?youtube\.com\/watch\?v=([A-Za-z0-9._%-]*)(\&\S+)?/  
      var html = text.replace(regex, '<iframe class="youtube-player" type="text/html" width="' + options.width + '" height="' + options.height + '" src="http://www.youtube.com/embed/$2" frameborder="0"></iframe>');
      $(this).html(html);
    });
  } 
```

但是，这不适用于“分享”按钮上生成的 youtube 链接，如下所示：

```
http://youtu.be/pcYCAVRpThc 
```

**如何修改上面的函数/正则表达式以接受此 Youtube 链接？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:40:16.043

它应该像改变一样简单

```
var regex = /http:\/\/(www.)?youtube\.com\/watch\?v=([A-Za-z0-9._%-]*)(\&\S+)?/ 
```

到

```
var regex = /http:\/\/(www.)?youtu(be\.com|\.be)\/(watch\?v=)?([A-Za-z0-9._%-]*)(\&\S+)?/ 
```

除非除了`youtube.com`vs`youtu.be`和 youtube.com`/watch?v=`在视频标识符之前有任何差异之外，还有其他任何区别。

由于我添加了另外两个捕获组，因此您还必须在调用 text.replace 时`" src="http://www.youtube.com/embed/$2"`进行更新。`"http://www.youtube.com/embed/$4"`

此外，我认为您正在做的一些匹配可能是不必要的。我可能是错的，但我相信

```
var regex = /youtu(be\.com\/watch\?v=|\.be\/)([A-Za-z0-9._%-]*)/ 
```

考虑到您想要做的就是确认 url 来自 youtube，然后捕获视频的 id，同样可以工作。这也可以让您像现在一样使用 $2 来获取第二个捕获组。

最后，您可能会考虑更改`([A-Za-z0-9._%-]*)`为，`([A-Za-z0-9._%-]+)`因为您只想匹配视频 id 至少包含一个字符的视频。

# iphone - iphone的Interface Builder文件中的未知类SavedQuotesViewController

> ID：10170276
> 
> 赞同：0
> 
> 时间：2012-04-16T07:38:31.813
> 
> 标签：iphone

我在我的项目中更改了类名，但是在构建应用程序后，在 Interface Builder 文件中显示 Unknown class SavedQuotesViewController。

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:43:00.307

你在这里改名了吗....在.h文件中@interface改变了类名和.m文件

```
#import "changedclassname.h"
@implementation changedclassname 
```

希望对你有帮助...

# php - 文件上传时多张图片上传数量错误

> ID：10170277
> 
> 赞同：0
> 
> 时间：2012-04-16T07:38:34.977
> 
> 标签：php, mysql, image, file-upload, move

我喜欢在数组的帮助下将一些图像上传到目录。因此我有这个代码：

```
$allowedExtensions = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');
            $maxSize = 2097152;
            $Dir = "a/b/c/d";
            $storageDir = "a/b/c/d/tmp_images";

            //Arrays
            $errors2 = $output = array();

            if(!empty($_FILES['image'])){  

            // Validation loop (I prefer for loops for this specific task)
            for ($i = 0; isset($_FILES['image']['name'][$i]); $i++) {

                $fileName = $_FILES['image']['name'][$i];
                $fileSize = $_FILES['image']['size'][$i];
                /*$fileErr = $_FILES['image']['error'][$i];*/
                $fileExt = strtolower(pathinfo($fileName, PATHINFO_EXTENSION));

                // Dateiendung überprüfen
                if (!in_array($fileExt, $allowedExtensions)) {
                    $errors2[$fileName][] = "format $fileExt in $fileName is not accepted";
                }

                // check filesize
                if ($fileSize > $maxSize) {
                    $errors2[$fileName][] = "maxsize of 2MB exceeded";
                }

            }

            /*// Handle validation errors here
            if (count($errors) > 0) {
                echo "Fehler beim Upload des Bildmaterials:"; 
                echo ($errors); ->gibt "Array" aus
            }*/

            if (is_dir($Dir)){
                mkdir($storageDir, 0755);
            }else{
                mkdir($Dir, 0755);
                mkdir($storageDir, 0755);
            }

            // Fileupload
            for ($i = 0; isset($_FILES['image']['name'][$i]); $i++) {

            // Get base info
            $fileBase = basename($_FILES['image']['name'][$i]);
            $fileName = pathinfo($fileBase, PATHINFO_FILENAME);
            $fileExt = pathinfo($fileBase, PATHINFO_EXTENSION);
            $fileTmp = $_FILES['image']['tmp_name'][$i];

            // Construct destination path
            $fileDst = $storageDir.'/'.basename($_FILES['image']['name'][$i]);
            for ($j = 0; file_exists($fileDst); $j++) {
                $fileDst = "$storageDir/$fileName-$j.$fileExt";
            }

            // Move the file 

            if (count($errors2) == 0) { 
                if (move_uploaded_file($fileTmp, $fileDst)) {
                                    ...
                                }
                        } 
```

该代码的问题如下：如果上传两个或多个具有可接受结尾的文件，它将回显：

```
Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to access abc2.png in /a/b/xxx.php on line xxx 
```

它指的是那条线：

```
if (move_uploaded_file($fileTmp, $fileDst)) { 
```

除第一张图片外，每张图片都会显示此消息。所以我不知道我做错了什么。如果有人可以帮助我，我将不胜感激。我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:46:19.253

首先，我会单独命名上传的字段。例如命名第一个字段`<input name="image_1" type="file" />`和第二个`<input name="image_2" type="file" />`。然后你可以迭代`$_FILES`数组：

```
foreach($_FILES as $fileId => $file){
    //make sure it's a file you want (optional)
    if(!preg_match("/^image\_\d+$/",$fileId){
         continue;
    }

    //the rest of your code from the for loop
} 
```

其次，您需要确保表单的 enctype 是`multipart/form-data`.

这有什么帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:48:18.690

为什么`$_FILES`将超全局数组作为三维数组访问？

如果你想要从一个上传的文件的文件名，`<input type="file" name="image"/>`你所要做的就是最后`$name = $_FILES[ 'image' ][ 'name' ]`不需要`[ $i ]`。

您需要像这样遍历 $_FILES 中的条目：

```
foreach ( $_FILES as $inputName => $fileData )
{
    // $inputName is be 'image` for the first input and so on,
    // $fileData will be an array of the attributes [ 'name', 'tmp_name', ... ]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:25:02.460

我不确定这是否可以为您解决，但您可以尝试将这些转换为“正常”`$_FILES`值。

```
$arr_files  =   @$_FILES['image'];

$_FILES     =   array();
foreach(array_keys($arr_files['name']) as $h)
$_FILES["image_{$h}"]    =   array(  'name'      =>  $arr_files['name'][$h],
                                    'type'      =>  $arr_files['type'][$h],
                                    'tmp_name'  =>  $arr_files['tmp_name'][$h],
                                    'error'     =>  $arr_files['error'][$h],
                                    'size'      =>  $arr_files['size'][$h]); 
```

然后像往常一样运行循环。

[查看之前的相关答案](https://stackoverflow.com/questions/9903619/codeigniter-html5-trying-to-upload-multiple-images-at-once/9903681#9903681)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T08:38:12.363

您的代码非常`similar`符合我在[上传 swf 文件时限制检查条件的回答](https://stackoverflow.com/questions/10151960/limiting-the-checking-condition-while-uploading-swf-files/10152156#10152156)

这就是你应该如何实现这样的..

**完整脚本**

```
<?php
error_reporting ( E_ALL );
$allowedExtensions = array (
        'jpg',
        'jpeg',
        'png',
        'bmp',
        'tiff',
        'gif' 
);
$maxSize = 2097152;
$dirImage = "photos/tmp_images";
$errors = $output = array ();
if (isset ( $_FILES ['image'] )) {
    foreach ( $_FILES ['image'] ['tmp_name'] as $key => $val ) {

        $fileName = $_FILES ['image'] ['name'] [$key];
        $fileSize = $_FILES ['image'] ['size'] [$key];
        $fileTemp = $_FILES ['image'] ['tmp_name'] [$key];

        $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
        $fileExt = strtolower ( $fileExt );

        if (empty ( $fileName ))
            continue;

            // Dateiendung Ã¼berprÃ¼fen
        if (! in_array ( $fileExt, $allowedExtensions )) {
            $errors [$fileName] [] = "format $fileExt in $fileName is not accepted";
        }

        if ($fileSize > $maxSize) {
            $errors [$fileName] [] = "maxsize of 2MB exceeded";
        }

        if (! mkdir_recursive ( $dirImage, 0777 )) {
            $errors [$fileName] [] = "Error  Creating /Writing  Directory $dirImage ";
        }

        // Construct destination path
        $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;
        $filePrifix = basename ( $fileName, "." . $fileExt );
        $i = 0;
        while ( file_exists ( $fileDst ) ) {
            $i ++;
            $fileDst = $dirImage . DIRECTORY_SEPARATOR . $filePrifix . "_" . $i . "." . $fileExt;

        }
        // Move the file

        if (count ( $errors ) == 0) {
            if (move_uploaded_file ( $fileTemp, $fileDst )) {
                // ...

                $output [$fileName] = "OK";
            }
        }

    }
}

function mkdir_recursive($pathname, $mode) {
    is_dir ( dirname ( $pathname ) ) || mkdir_recursive ( dirname ( $pathname ), $mode );
    return is_dir ( $pathname ) || mkdir ( $pathname, $mode );
}
if (! empty ( $errors )) {
    echo "<pre>";
    foreach ( $errors as $file => $error ) {
        echo $file, PHP_EOL;
        echo "==============", PHP_EOL;
        foreach ( $error as $line ) {
            echo $line, PHP_EOL;
        }
        echo PHP_EOL;
    }
    echo "</pre>";
}

if (! empty ( $output )) {
    echo "<pre>";
    echo "Uploaded Files", PHP_EOL;
    foreach ( $output as $file => $status ) {
        echo $file, "=", $status, PHP_EOL;
    }

    echo "</pre>";
}
?>

<form method="post" enctype="multipart/form-data">
    <label for="file">Filename 1:</label> <input type="file" name="image[]"
        id="file" /> <br /> <label for="file">Filename 2:</label> <input
        type="file" name="image[]" id="file" /> <br /> <label for="file">Filename
        3:</label> <input type="file" name="image[]" id="file" /> <br /> <input
        type="submit" name="submit" value="Submit" />
</form> 
```

# jquery - Jquery选择图像

> ID：10170280
> 
> 赞同：2
> 
> 时间：2012-04-16T07:38:47.180
> 
> 标签：jquery

主要是，我是 Jquery 的新手。

我有这样的图像。我想要的是当用户单击图像时，它会使图像加边框。用户可以选择多个图像。选择时必须全部加边框。单击按钮后，我将获得图像 ID。

```
 <tr><img id="i will put value for db processing"src="urlofimage"</tr> &nbsp; 
```

![在此处输入图像描述](../Images/f225d49258ee532bdb0ebae7a5bdf41a.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T07:42:00.910

你的意思是：

```
 $.fn.hasBorder = function() {   
  if ((this.outerWidth() - this.innerWidth() > 0) ||  (this.outerHeight() - this.innerHeight() > 0)){
        return true;
    }
    else{
        return false;
    }
};
$(document).ready(function() {
  var selectedImgsArr = [];
   $("img").click(function() {

      if($(this).hasBorder()) {
          $(this).css("border", "");
          //you can remove the id from array if you need to
      }
      else {
         $(this).css("border", "1 px solid red");
         selectedImgsArr.push($(this).attr("id")); //something like this 
      }
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T07:50:44.317

一个简单的例子：

[JsBin 中的实例](https://jsbin.com/yepigik/8/edit?html,js,output)

样式：

```
ul { list-style: none; }
ul li { display: inline; } 
ul li img { border: 2px solid white; cursor: pointer; }
ul li img:hover,
ul li img.hover { border: 2px solid black; } 
```

的JavaScript：

```
$(function() {

  $("img").click(function() {      
    $(this).toggleClass("hover");      
  });

  $("#btn").click(function() {      
    var imgs = $("img.hover").length;    
    alert('there are ' + imgs + ' images selected');        
  });

}); 
```

结果：

![在此处输入图像描述](../Images/36629fd271dc42588bb5f8cce4164e2f.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:05:43.103

很简单，只需在点击时为图像添加一个新的 CSS 类。

```
<html>
...
<td><img class='galImages' src='urlofimage' /></td>
...
</html>

<script>
$document.ready(function() {
    $('img.galImages').click(function() {
        if($(this).hasClass('selected')) {
            $(this).removeClass('selected');
        }
        else {  
            $(this).addClass('selected');
        }
    });
});
</script>

<style>
.selected {
    1px solid #f00;
}
</style> 
```

为了简单地从功能中删除风格元素，我更喜欢这种方法而不是脚本中的样式定义。使所有内容都可重复使用，并且在以后需要时易于更改。上面的代码支持在二次点击时应用格式和删除它。（即：如果存在，它将删除。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T07:46:02.877

给他们上一堂课：

```
<tr><img class="clickable" id="i will put value for db processing" src="urlofimage" /></tr>

<script>
    $(document).ready(function() { 
        var clickedarray = new Array();
        $('.clickable').click(function() {
            //add border
            $(this).css({border: '1px solid #000'});
            //store in array
            clickedarray.push($(this).attr('id'));
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T07:55:35.830

首先为选择添加一个类，然后在发布表单时将项目添加到具有“选定图像”类的数组

```
$(document).ready(function() {
  var selectedImgsArr = new Array();
   $("img").click(function() {

      if($(this).hasClass("selected-image"))
           $(this).removeClass("selected-image");
      else
           $(this).addClass("selected-image");
   });
   $("form").submit(function(){
       selectedImgsArr.push($(".selected-image").attr("src"));
   })
}); 
```

# c# - 将内存流拆分为 bytearray

> ID：10170281
> 
> 赞同：2
> 
> 时间：2012-04-16T07:38:53.593
> 
> 标签：c#, arrays, .net-core, memorystream, chunks

我试图通过将部分读入字节数组来将内存流分成块，但我认为我有一些根本性的错误。我可以读取第一个块，但是当我尝试读取内存流的其余部分时，即使有更多字节要读取，我也会使索引超出范围。似乎问题在于接收字节缓冲区的大小需要与内存流一样大。我需要将其转换为块，因为代码位于 Web 服务中。

任何人都知道这段代码有什么问题

fb.buffer 是 MemoryStream

```
 long bytesLeft = fb.Buffer.Length;
                fb.Buffer.Position = 0;
                int offset =0;
                int BUFF_SIZE = 8196;

                while (bytesLeft > 0)
                {
                    byte[] fs = new byte[BUFF_SIZE];

                    fb.Buffer.Read(fs, offset, BUFF_SIZE);
                    offset += BUFF_SIZE;
                    bytesLeft -= BUFF_SIZE;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:50:48.260

请一目了然地查看[MSDN中的](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)[此代码`Stream.Read`](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)`offset`- 您不应该递增- 它应该始终为零。当然，除非您碰巧事先知道流的确切长度（因此您将创建确切大小的数组）。

您还应该始终获取从`Read`（返回值）读取的字节数。

如果您希望将其拆分为“块”，您的意思是您想要*n 个*8k 块吗？然后你可能想做这样的事情：

```
List<byte[]> chunks = new List<byte[]>();
byte chunk = new byte[BUFF_SIZE];
int bytesRead = fb.Buffer.Read(chunk, 0, BUFF_SIZE);
while(bytesRead > 0)
{
  if(bytesRead != BUFF_SIZE)
  {
    byte[] tail = new byte[bytesRead];
    Array.Copy(chunk, tail, bytesRead);
    chunk = tail;
  }
  chunks.Add(chunk);
  bytesRead = fb.Buffer.Read(chunk, 0, BUFF_SIZE);
} 
```

请特别注意，最后一个块的长度很可能不会完全准确`BUFF_SIZE`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:42:58.380

`offset`**这是数组**的偏移量。这里应该为零。您还应该**查看**. **即使有**更多数据可用`Read`，也不能保证会填满缓冲区。

 **但是，如果这是`MemoryStream`- 一个更好的选择可能是`ArraySegment<byte>`，它不需要重复数据。**

# c# - 谷歌浏览器中的新标签问题

> ID：10170284
> 
> 赞同：0
> 
> 时间：2012-04-16T07:39:16.120
> 
> 标签：c#, asp.net

我想在按钮单击事件中打开页面新选项卡。这是我的代码：

```
<asp:ImageButton ID="imgPropertyImage"  CommandArgument='<%#Eval("pro_id") %>' 
    runat="server" Height="90px"  Width="130px" CssClass="imgborder"
    ImageUrl='<%#Eval("display_photo") %>'    OnCommand="imgPropertyImage_Command" 
    BorderColor="#00CCCC"  AlternateText="" onclick="imgPropertyImage_Click" />

protected void imgPropertyImage_Click(object sender, ImageClickEventArgs e)
{
    ImageButton img = sender as ImageButton;

    Session["Pro-ID"] = img.CommandArgument;
    Response.Redirect("PropertyDetails.aspx");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:38:19.283

将此 javascript 放入您的 asp:content

```
 <script type="text/javascript" language="javascript">
        var windowObjectReference;

        function openRequestedPopup() {
            var windowObjectReference = window.open("PropertyDetails.aspx",
              "DescriptiveWindowName",
              "menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes");
        }
</script> 
```

在 ImageButton OnClientClick

```
OnClientClick="javascript:return openRequestedPopup();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:25:46.133

首先，删除`<a>`标签。并添加：

```
 OnClientClick="aspnetForm.target ='_blank';"/> 
```

在您的按钮属性中。

# java - Eclipse 重构 - 仅限 Java

> ID：10170287
> 
> 赞同：2
> 
> 时间：2012-04-16T07:39:20.620
> 
> 标签：java, eclipse

我正在 Eclipse 中进行一些插件开发 - 我正在考虑为作为插件过程一部分的特定领域语言构建一些重构工具。但是，通过查看各种教程等，我开始怀疑 Eclipse 仅提供对 Java 的重构支持 - 有人可以为我确认吗？我很想不要自己动手，然后发现有一个我找不到的方便的 API……

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:48:07.957

重构任务依赖于 Eclipse 提供的 Java AST 模型。您首先必须创建自己的 AST 构建器。Java 需要做很多工作，Java 本身是一种相对简单的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:22:15.153

这可以通过使用 Eclipse LTK [http://www.eclipse.org/articles/Article-LTK/ltk.html](http://www.eclipse.org/articles/Article-LTK/ltk.html)的 AST 操作来完成。虽然 Java 的 AST 不是那么简单，但你自己的 DSL 的 AST 肯定会更容易。我进行了类似的练习，发现以下答案中提供的资源非常有用： [https ://stackoverflow.com/a/1315990/90313](https://stackoverflow.com/a/1315990/90313)

祝你好运。

# ruby - 安装 ri 文档时 Ruby gem 失败

> ID：10170288
> 
> 赞同：6
> 
> 时间：2012-04-16T07:39:35.267
> 
> 标签：ruby, gem, bundler

我正在尝试在我的 Debian 6.0.4 机器上安装 GitLabHQ。这是 2012 年 4 月 13 日的全新安装。现在我已经到了需要通过 Ruby gem 完成一些安装的地步。尤其是：

```
gem install bundler 
```

这揭示了以下错误：

```
Successfully installed bundler-1.1.3
1 gem installed
Installing ri documentation for bundler-1.1.3...
ERROR:  While executing gem ... (ArgumentError)
undefined class/module Encoding 
```

然后我尝试用

```
gem pristine --all 
```

这没有帮助。以下是已安装的 Ruby 软件包列表：

```
rake-0.9.2.2 at Sat Apr 14 20:44:40 2012
rvm-1.11.3.3 at Sat Apr 14 20:44:47 2012
rubygems-bundler-0.9.0 at Mon Apr 16 09:04:32 2012
rack-test-0.6.1 at Mon Apr 16 09:11:10 2012
daemon_controller-1.0.0 at Mon Apr 16 09:11:10 2012
tilt-1.3.3 at Mon Apr 16 09:11:10 2012
erubis-2.7.0 at Mon Apr 16 09:11:10 2012
multi_json-1.2.0 at Mon Apr 16 09:11:10 2012
rack-cache-1.2 at Mon Apr 16 09:11:10 2012
thor-0.14.6 at Mon Apr 16 09:11:10 2012
actionmailer-3.2.3 at Mon Apr 16 09:11:10 2012
treetop-1.4.10 at Mon Apr 16 09:11:11 2012
fastthread-1.0.7 at Mon Apr 16 09:11:11 2012
activeresource-3.2.3 at Mon Apr 16 09:11:11 2012
polyglot-0.3.3 at Mon Apr 16 09:11:11 2012
i18n-0.6.0 at Mon Apr 16 09:11:12 2012
journey-1.0.3 at Mon Apr 16 09:11:12 2012
actionpack-3.2.3 at Mon Apr 16 09:11:12 2012
rack-ssl-1.3.2 at Mon Apr 16 09:11:12 2012
activesupport-3.2.3 at Mon Apr 16 09:11:12 2012
passenger-3.0.12 at Mon Apr 16 09:11:12 2012
railties-3.2.3 at Mon Apr 16 09:11:13 2012
rack-1.4.1 at Mon Apr 16 09:11:13 2012
sprockets-2.1.2 at Mon Apr 16 09:11:13 2012
mime-types-1.18 at Mon Apr 16 09:11:13 2012
arel-3.0.2 at Mon Apr 16 09:11:13 2012
hike-1.2.1 at Mon Apr 16 09:11:14 2012
mail-2.4.4 at Mon Apr 16 09:11:15 2012
activerecord-3.2.3 at Mon Apr 16 09:11:15 2012
activemodel-3.2.3 at Mon Apr 16 09:11:15 2012
tzinfo-0.3.33 at Mon Apr 16 09:11:15 2012
builder-3.0.0 at Mon Apr 16 09:13:07 2012
rdoc-3.12 at Mon Apr 16 09:15:52 2012
json-1.6.6 at Mon Apr 16 09:30:55 2012
bundler-1.1.3 at Mon Apr 16 09:31:06 2012 
```

即使捆绑程序出现在列表中，它似乎也没有正确安装。

我希望有人可以帮助我，因为我真的需要 GitLabHQ 才能工作。

丹妮拉。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T07:43:51.407

不是一个修复，真的，而是一个解决方法：把这行：

```
gem: --no-rdoc --no-ri 
```

进入一个名为`~/.gemrc`跳过安装 rdoc 和 ri 文档的文件（无论如何，您可能不希望在您的系统上安装 - 它会大大加快安装过程）。

# jquery - 打开和关闭 jQuery 函数

> ID：10170289
> 
> 赞同：0
> 
> 时间：2012-04-16T07:39:35.533
> 
> 标签：jquery, function, toggle

我是 jQuery 新手，在搞清楚一些事情时遇到了一些麻烦。

我有一个在页面底部调用的函数，用于将自动完成功能附加到文本框，这部分工作正常。以下是为启用自动完成而调用的代码：

```
$(function(){
    $('#intext').autocomplete('get-data.php?mode=sql', {
        width: 400,
        max: 5,
        selectFirst: false
    });
}); 
```

但是，搜索框包含两个单选按钮，用于两种不同类型的搜索。自动完成功能应仅适用于一种类型的搜索。

所以我的问题是，如何通过单击一个单选按钮启用它，并通过单击第二个单选按钮禁用它？

编辑

自动完成脚本有一个 .autocomplete("disable") 方法，但我不知道如何根据选中的单选按钮启用/禁用该方法。

编辑 2

我正在尝试让“Rory McCrossan”建议的方法起作用，因为我正在使用 jQuery UI Autocomplete。这是我的单选按钮和搜索框的代码：

```
News: <input type="radio" class="myRadio" name="search_type" value="news" checked="checked" onclick="this.form.action='/search.php';" />
Media Gallery: <input type="radio" class="myRadio" name="search_type" value="media" onclick="this.form.action='/media.php';" />
<input id="intext" class="txt" type="text" name="searchterms" /> 
```

我在每个页面上运行的脚本中有以下代码：

```
addAutoComplete($("#intext"));

$(".myRadio").change(function() {
    if ($(this).val() == "news") {
        if (!$("#intext").hasClass("ui-autocomplete-input"))
            addAutoComplete($("#intext"));
    }
    else {
        $("#intext").autocomplete('destroy')
    }
});

function addAutoComplete($el) {
    $('#intext').autocomplete('autocomplete-data.php?mode=sql', {
        width: 400,
        max: 5,
        selectFirst: false
    });

} 
```

这似乎不起作用，并且 Firefox 中的错误控制台没有显示任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:44:07.957

假设这是 jQueryUI 自动完成，您可以使用`$el.autocomplete("destroy")`删除自动完成功能。

```
addAutoComplete($("#intext")); // on load

$(".myRadio").change(function() {
    if ($(this).val() == "a") {
        if (!$("#intext").hasClass("ui-autocomplete-input"))
            addAutoComplete($("#intext"));
    }
    else {
        $("#intext").autocomplete('destroy')
    }
});

function addAutoComplete($el) { 
    $el.autocomplete('get-data.php?mode=sql', {
        width: 400,
        max: 5,
        selectFirst: false
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:42:13.310

最好的解决方案是在选择两个单选按钮之一时禁用自动完成。通过将方法名作为 jQuery 插件调用的第一个参数来调用 jQuery UI 方法。例如：”

```
// First create the autocomplete
$('#textbox1').autocomplete();

// call a method on the 'autocompleted' textbox
$('#textbox1').autocomplete('methodname', 'methodparam1', methodparam2, etc) 
```

所以在这种情况下：

```
$('.classOfTheTwoRadioButtons').change(function(e) {
  var method = $(e.target).is(':checked [value=valueIfAutocomplete]')? 'enable': 'disable';
  $('#textbox').autocomplete(method);
}); 
```

其他选项：创建两个具有相同名称的文本框，并仅在其中一个上附加自动完成功能。使用`toggle()`jquery 的功能来隐藏选中的单选按钮时不想看到的那个。

```
$('.classOfTheTwoRadioButtons').change(function(e) {
  var $e = $(e.target);
  $('#firstTextBox').toggle($e.val() === 'value1');
  $('#secondTextBox').toggle($e.val() === 'value2');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:07:13.263

given that radio button with value 'a' enables the autocomplete and the one with value 'b' disables it

```
$(".myRadio[value='a']").click(function() {
    $('#intext').autocomplete('enable');
}
$(".myRadio[value='b']").click(function() {
    $('#intext').autocomplete('disable');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:43:08.953

你应该检查你`autocomplete()`的插件是否有`destroy`某种行为可以消除他的行为。如果是这样，只需在选择“自动完成关闭”单选时调用它。

如果您的插件没有该选项，只需创建文本字段。第一个带有自动完成功能，第二个没有。然后根据您的复选框切换它们。

# html - 关于 CSS 浏览器兼容性问题的建议

> ID：10170291
> 
> 赞同：0
> 
> 时间：2012-04-16T07:39:42.290
> 
> 标签：html, css, google-chrome

我爸爸让我在他们正在创建的现有 Web 应用程序上修复一些 CSS 浏览器兼容性问题，但我只知道 CSS 的基础知识。

我读过 IE 通常在这方面存在最多的问题，大多数人建议首先为“标准兼容”浏览器（如 Firefox 和 Opera）使用 CSS，然后添加条件注释以指定各种 IE 版本的样式表。这就是我真正打算做的事情。

但是除了IE的小问题，我在谷歌浏览器上也遇到了一个问题。如果我专门为 Google Chrome 创建另一个样式表是否可取？

它的外观以及在 Firefox 上的外观：

![示例 1](../Images/d702d7536ba2b319ddee9bcdc817668f.png)

它在谷歌浏览器上的样子：

![示例 2](../Images/e4fb7673cb13b6dca83a8b957226ae29.png)

这是一些CSS代码：

```
#MenuMain-content {
    background : transparent url(image/mainmenu.png) repeat-x center top;
    height : 27px;
    font-size : 11px;
}

#MenuMain-content .Menu {
    height : 25px;
    margin : 0 0 0 10px;
}

#MenuMain-content .Menu A {
    font : normal 11px Verdana;
    color : #bfd7ff;
    display : block;
    padding : 5px 7px 7px 7px;
}

#MenuMain-content .Menu A:hover {
    color : #ffffff;
    padding : 5px 7px 7px 7px;
}

#MenuMain-content .Menu .Selected {
    color : #ffffff;
}

#MenuMain-content .Menu .Selected:hover {
    color : #ffffff;
}

#MenuSub-content {
    background : url(image/submenu.png) no-repeat center top;
    height : 20px;
}

#MenuSub-content .Menu {
    height : 20px;
    margin-left : 15px;
}

#MenuSub-content .Menu A {
    color : #cccccc;
    height : 17px;
    display : inline-block;
    margin-top : -1px;
    padding : 2px 7px 0 7px;
}

#MenuSub-content .Menu A:hover {
    background-color : #999999;
    color : white;
    height : 16px;
    margin-top : -2px;
}

#MenuSub-content .Menu .Selected {
    background-color : #336699;
    color : white;
    height : 16px;
    margin-top : -2px;
    padding-top : 2px;
}

#MenuSub-content .Menu .Selected:hover {
    background-color : #204674;
    color : white;
    height : 16px;
} 
```

这是一些html代码：

```
 <div id="MenuMain-content">
            <asp:Menu ID="MainMenu"
                        runat="server" 
                        MaximumDynamicDisplayLevels="0" 
                        Orientation="Horizontal" 
                        CssClass="Menu">
            <StaticSelectedStyle CssClass="Selected" />
            </asp:Menu>
        </div>                           

        <div id="MenuSub-content">
            <asp:Menu ID="SubMenu" 
                      runat="server" 
                      Orientation="Horizontal" 
                      CssClass="Menu">
                      <StaticSelectedStyle CssClass="Selected" />
            </asp:Menu>                  
        </div> 
```

我不认为我可以发布更多代码片段，因为我不是创建这个的人。有什么建议吗？我应该为 Google Chrome 创建一个单独的 CSS 吗？提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:46:46.707

我认为你不应该在 CSS 上为你的元素使用大写：

```
// Don't do this
#MenuMain-content .Menu A {}

// Do this instead
#MenuMain-content .Menu a {} 
```

我不知道这是否是您的问题的原因（以前从未见过此问题），但这是一个很好的建议。此外，您的屏幕截图显示它非常奇怪，Firefox 和 Chrome 根据 CSS 渲染往往表现相同。

# osgi - 引用非声明式服务的 OSGi 声明式服务

> ID：10170292
> 
> 赞同：2
> 
> 时间：2012-04-16T07:39:42.693
> 
> 标签：osgi, declarative-services

我有一个使用激活器方法声明服务“旧方式”的系统。

现在我正在使用声明式服务编写一个新包。是否可以在我的新捆绑包中引用未使用声明式服务技术发布的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:59:11.063

Yes, it is possible. When you reference a service from a DS component, you don't need to worry about that service's internal implementation.

The other service *may* be another DS component, or it may be a Spring-DM component, or it may be published with explicit calls to the OSGi APIs. You don't care. It's just a service.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T08:35:54.283

没有将服务发布到 OSGi 服务注册表的“旧方法”。BundleContext.registerService() 只有一种方法。您可以从您的激活器手动完成，或者声明式服务/蓝图引擎可以为您完成。

在您的 DS 描述符中，您只需定义对 Service Registry 中可用服务的引用。

# javascript - 在 JavaScript 中搜索 RegEx 结果中的字符串

> ID：10170294
> 
> 赞同：-1
> 
> 时间：2012-04-16T07:39:53.267
> 
> 标签：javascript, regex, search, innerhtml, indexof

以下代码中的非常奇怪的行为：

```
var showContent = document.getElementById("something"); // Search for a content
showContent = showContent.innerHTML;
var patt3=/Profile">[^<]*(?=<)/; // Search for this pattern ...
var showName=patt3.exec(showContent); // ... within the above found content 
```

当我想在上述 showName 的结果中搜索一个字符串时，问题就开始了：

```
var yesTest = showName.indexOf("text");
alert(yesTest); 
```

上面总是返回-1（没有找到内容）。然而，这

```
alert(showName); 
```

显然确实有“文本”。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:00:45.513

问题是`.exec`返回一个数组，而不是一个字符串。对数组执行`.indexOf`操作将返回完全等于您的搜索词的数组元素索引（或在不识别它的浏览器中失败，例如 IE8）。

`showName.toString().indexOf("text")`如果那是你想要的，你可以这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T07:46:23.767

试试这样：

```
var patt3=/Profile">[^<]*(?=<)/;

 var re = new RegExp(regexp);

 re.test(showContent ); 
```

测试将返回真或假

# xml - 在哪里可以找到 XSLT 1.0 的 XML 模式？

> ID：10170295
> 
> 赞同：0
> 
> 时间：2012-04-16T07:40:06.900
> 
> 标签：xml, xslt, xsd

有没有人有 XSLT 1.0 的 XML Schema 的工作链接？[http://sources.redhat.com/ml/xsl-list/2001-03/msg01405.html](http://sources.redhat.com/ml/xsl-list/2001-03/msg01405.html)中提到的来自 www.webmethods.com 的 2 个链接似乎不再涉及任何内容。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T09:22:26.810

试试你的本地电脑，

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Xml\Schemas\xslt.xsd`

当然，如果您还没有，请先安装 MS VS 10.0 试用版。

# java - spring-data @Query 映射结果问题

> ID：10170299
> 
> 赞同：6
> 
> 时间：2012-04-16T07:40:25.360
> 
> 标签：java, spring, spring-data

我创建了一个扩展 CrudRepository 的存储库，这个存储库有一个带有 @Query 表示法的方法：

代码：

```
@Query("select itemType, count(*) as count from Item where  User_id = :userId group by itemType")
List<Map<String, Long>> countItemsForUser(@Param("userId") Long userId); 
```

我遇到的问题是这会返回对象的 ArrayList 而不是 Map 的列表。我在某处读到 JPA 无法返回 Map，所以这就是我将结果填充到 List> 中的原因。

我不知道解决此问题或快速访问结果数据的最佳方法是什么。我试过铸造，但也没有成功：

```
for(Object item: items) {
    Map<String,Long> castedItem = (HashMap<String,Long>)item;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:21:17.837

请参阅 Hibernate 的官方文档中的此示例。[这里](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/objectstate.html#objectstate-querying)

```
 for (Object item:items) {
   Object[] tuple = (Object[]) item;
    String itemType = (String)tuple[0];
    Long count = (Long) tuple[1];

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-17T09:41:17.973

最简单的方法是使用界面。让 Spring 将查询别名连接到接口 getter。示例可以在这里找到：[https](https://www.baeldung.com/jpa-queries-custom-result-with-aggregation-functions) : //www.baeldung.com/jpa-queries-custom-result-with-aggregation-functions 还有@SqlResultSetMapping。请参阅： [JPA-在非实体类中加入两个表](https://stackoverflow.com/questions/25179180/jpa-joining-two-tables-in-non-entity-class/25184489#25184489)

# iphone - 如何在 xcode 4.3 中将 SQlite 和核心数据中的数据显示到多表视图中？

> ID：10170301
> 
> 赞同：0
> 
> 时间：2012-04-16T07:40:26.063
> 
> 标签：iphone, xcode, sqlite, core-data, ios5

> **可能重复：**
> [iPhone SDK：从核心数据填充表格视图](https://stackoverflow.com/questions/2806040/iphone-sdk-populate-table-view-from-core-data)

有没有什么好的教程展示了如何使用带有核心数据和故事板的 xcode 4.2 或 4.3 将 SQlite 中的数据显示到多表视图中？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:46:39.290

对于 Sqlite 和 tableview。我建议您阅读以下教程，它还包含示例代码..

[适用于 iOS 开发人员的 SQlite 教程](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)

**[另一个工作演示和示例代码也可用..](http://www.icodeblog.com/2008/08/19/iphone-programming-tutorial-creating-a-todo-list-using-sqlite-part-1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:47:27.317

看看这个问题和答案

[iPhone SDK：从核心数据填充表格视图](https://stackoverflow.com/questions/2806040/iphone-sdk-populate-table-view-from-core-data)

此外，关于这个主题的 CS193P 讲座也很棒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:02:51.137

您可以在 TableView 中找到许多获取数据的方法，但对于多表视图意味着您可以按照教程中针对单表描述的技术进行操作。

教程

[http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application)

希望这可以帮助

# objective-c - 过去已经发生的事件的本地通知

> ID：10170302
> 
> 赞同：1
> 
> 时间：2012-04-16T07:40:29.397
> 
> 标签：objective-c, ios, uilocalnotification

我正在制作一个提醒应用程序，用户在其中创建一些带有日期和时间的事件，并通过选择触发日期（此事件之前的时间间隔：现在、5、15、30 分钟前等）来选择何时应该注意到它) 和重复间隔（从不、每天、每周、每月和每年）。问题是：当用户创建一个已经发生的事件时，例如事件应该在 4 月 10 日发生，而今天是 4 月 16 日，应该及时提醒他该事件，但用户在创建后立即收到有关此事件的通知它。所以它不应该发生。我怎样才能避免这种情况？这是创建通知的方法

```
- (void)notificationWithNote:(Note *)scheduledNote deleteThisNotification:(BOOL)deleteNotification {

    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
    unsigned int unitFlags = NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit;
    NSDateComponents *comp = [calendar components:unitFlags fromDate:scheduledNote.date];

        ToDoItem *todoitem = [[ToDoItem alloc] init];
        todoitem.day = [comp day];
        todoitem.month = [comp month];
        todoitem.year = [comp year];
        todoitem.hour = [comp hour];
        todoitem.minute = [comp minute];
        todoitem.eventName = scheduledNote.event;

    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setDay:todoitem.day];
    [dateComps setMonth:todoitem.month];
    [dateComps setYear:todoitem.year];
    [dateComps setHour:todoitem.hour];
    [dateComps setMinute:todoitem.minute];
    NSDate *itemDate = [calendar dateFromComponents:dateComps];
    [dateComps release];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if (localNotif == nil)
        return;
    if ([scheduledNote.remindTime intValue] == 1)
        localNotif.fireDate = itemDate;
    else
        localNotif.fireDate = [itemDate dateByAddingTimeInterval:-([scheduledNote.remindTime intValue]*60)];

    switch ([scheduledNote.repeatOption intValue]) {
        case 0:
            localNotif.repeatInterval = 0;
            break;
        case 1:
            localNotif.repeatInterval = NSDayCalendarUnit;
            break;
        case 2:
            localNotif.repeatInterval = NSWeekCalendarUnit;
            break;
        case 3:
            localNotif.repeatInterval = NSMonthCalendarUnit;
            break;
        case 4:
            localNotif.repeatInterval = NSYearCalendarUnit;
            break;
        default:
            break;
    }

    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.alertBody = [NSString stringWithFormat:NSLocalizedString(@"%@ begins", nil), scheduledNote.event];
    localNotif.alertAction = NSLocalizedString(@"View Details", nil);
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    localNotif.applicationIconBadgeNumber = 1;
    NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:todoitem.eventName,ToDoItemKey, @"Timenote is coming", MessageTitleKey, nil];
    localNotif.userInfo = infoDict;

    if (deleteNotification)
        [[UIApplication sharedApplication] cancelLocalNotification:localNotif];
    else
        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

    NSLog(@"fire date: %@",[localNotif.fireDate description]);
    [todoitem release];
    [localNotif release];
} 
```

仅当用户未选择任何重复间隔时才会发生此错误。如果事件每天/每周/每月/每年重复，提醒会及时出现。所以问题是实际的，如果`localNotif.repeatInterval == 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:05:24.707

看来，我已经找到答案了。如果问题仅发生，当没有重复间隔时，则需要检查此条件：如果 fireDate 小于当前日期并且如果没有重复间隔，则不应安排此通知。

```
NSComparisonResult result = [localNotif.fireDate compare:[NSDate date]];

if (((localNotif.repeatInterval == 0) && (result == NSOrderedAscending)) || deleteNotification)
{
    [[UIApplication sharedApplication] cancelLocalNotification:localNotif];
}
else
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

# php - 使用php更新mysql数据库中的arraylist时出错

> ID：10170304
> 
> 赞同：0
> 
> 时间：2012-04-16T07:40:41.317
> 
> 标签：php, mysql

我将arraylist从android发送到php。我想将旧的菜单名替换为新的菜单名。在我的表中包含两列 1.menuimage 2.menuname .. 我只想更新新的 menunames

我的表结构

```
 test(table name)
           menucode     menuimage   menuname
             1            image       p
             2              "         q
             3              "          r
             4              "          s
             5              "           t 
```

我只想根据菜单代码更新菜单名称...我正在传递菜单代码 [1,2,3,4,5,6,7]...

```
<?php

   $old_menu_code = explode(",", str_replace(array("[","]"), "", $_POST['menucode']));
   $new_menu_names = explode(",", str_replace(array("[","]"), "", $_POST['editmainmenu']));
  mysql_connect("localhost", "root", "root");
  mysql_select_db("test");
  foreach ($old_menu_names as $key => $old_name) {
  $new_name = mysql_real_escape_string($new_menu_names[$key]);
  $old_code = mysql_real_escape_string($old_menu_code[$key]);

  mysql_query("UPDATE `test` SET `menuname` = '$new_name' WHERE menucode= '$old_code'") or die('Error' . mysql_error());
echo "Updated";
   }
  ?> 
```

上面的代码测试是数据库包含测试表。在测试表中包含两列菜单图像和菜单名称。在 menuimage 中包含 7 个图像，menuname 包含 7 个菜单。我只想更新菜单名称。但上面的代码只更新第一行 menunames 列。剩余的行没有更新..请问我犯了什么错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:44:33.543

你可以使用`str_replace`&`explode`来实现你想要的..

**吐数据**

```
$old_menu_names = "[p,q,r,s,t,u]" ; // or $old_menu_names = $_POST['menuname'] ;
$new_menu_names = "[a,b,c,d,e,f]" ; // or $new_menu_names = $_POST['editmainmenu'] ;

$old_menu_names = explode(",", str_replace(array("[","]"), "", $old_menu_names));
$new_menu_names = explode(",", str_replace(array("[","]"), "", $new_menu_names)); 
```

**SQL 错误**

```
 mysql_query("UPDATE `test` SET `menuname` = '$new_name' WHERE menuname = '$old_name'") 
```

什么语句不起作用，因为您正在尝试更新`menuname`您在 where 条件下使用的文件`WHERE menuname =`

我建议您将其更改为类似于`memuid`它是否存在于您的表中或获取第`ID`一个并使用它来更新它。

**编辑 1**

更新代码

```
$mysql = new mysqli("localhost","root","root","test");
$sql = "SELECT menucode FROM test where menuname = '%s' ";

foreach ($old_menu_names as $key => $old_name) {
    $new_name = mysql_real_escape_string($new_menu_names[$key]);
    $old_code = mysql_real_escape_string($old_menu_names[$key]);
    $result = $mysql->query(sprintf($sql,$old_code))->fetch_assoc();

    if(!empty($result['menucode']))
    {
        $mysql->query(sprintf("UPDATE `test` SET `menuname` = '%s' WHERE menucode= '%d'",$new_name,$result['menucode']));
        echo "Updated " , $mysql->affected_rows .  PHP_EOL;
    }
    else
    {
        echo "Missing menucode for $old_code " , PHP_EOL;
    }
 } 
```

我希望这有帮助

# database - 以编程方式设置 DefaultDataPath 和 DefaultLogPath（使用 SQL 语句初始化路径）

> ID：10170305
> 
> 赞同：3
> 
> 时间：2012-04-16T07:40:41.540
> 
> 标签：database, visual-studio-2010, sql-server-2008, sql-server-2005, database-project

我的查询是关于使用非硬编码文件位置来初始化变量 DefaultDataPath 和 DefaultLogPath。在采用数据库项目作为我们的标准部署和数据库管理工具并将我们现有的脚本迁移到数据库项目之前，我们一直在使用 SET 的 CREATE 和 INITIALIZE 脚本来设置数据库。我们正在使用以下 SQL 查询来创建具有 FILE 位置的数据库：

```
SET @data_path = (SELECT SUBSTRING(filename, 1, CHARINDEX(N'master.mdf', LOWER(filename)) - 1) 

          FROM sys.sysaltfiles WHERE dbid = 1 AND fileid = 1);

set @mdb_file=@data_path + 'CF_DB.mdf'
set @cfdata='CF_DB_Data'
set @cflog='CF_DB_Log'
set @ldf_file=@data_path + 'CF_DB_log.ldf'
declare @sql nvarchar(500)
set @sql = 'CREATE DATABASE [CF_DB]  ON (NAME = ' + quotename(@cfdata) + ',FILENAME =' + quotename(@mdb_file) + ',SIZE = 53, FILEGROWTH = 10%) LOG ON (NAME =' + quotename(@cflog) + ',FILENAME = ' + quotename(@ldf_file) + ', SIZE = 31, FILEGROWTH = 10%)COLLATE SQL_Latin1_General_CP1_CI_AS'
exec(@sql) 
```

在这里，我们试图找出 MASTER DB 的 MDF 文件的位置，并使用相同的位置来创建数据库。

问题：使用生成的脚本（在部署操作之后），有一个自动生成的 SQLCMD 变量，使用一些默认路径（硬编码）或空字符串（使用 SQL Server 2008 或 2005 使用的默认数据文件路径）进行初始化。

```
:setvar DatabaseName "CF"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER2008\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER2008\MSSQL\DATA\" 
```

我们需要让它像我们现有的系统一样工作。我们需要知道 MASTER DB 数据和日志文件的路径，并使用相同的路径来初始化 DefaultDataPath 和 DefaultLogPath。我们不能使用 PreDeployment 脚本，因为数据库设置是在将 PreDeploymentScript 嵌入最终部署脚本之前由数据库项目生成的脚本完成的。

下一件大事：开发人员需要在 SQL Server Management Studio 中切换到 SQLCMD 模式才能运行 DB Project 生成的脚本。这是我们的实施团队要求不要使用 SQLCMD 模式来设置 DATBASE。为了克服这些步骤，我需要修改生成的 SQL 文件并使用 SQL 变量而不是 SQLCMD 变量。我们可以生成干净的 SQL 语句并保持自动化脚本生成完整吗？我知道这两个问题是相互关联的，因此一个问题的解决方案将修复另一个问题。

感谢您对上述讨论提出任何好的建议或帮助。

问候

苏梅特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:58:21.520

不确定如何最好地处理您的文件路径，但我怀疑您不想使用默认文件路径设置，而是使用可以通过变量控制的新文件路径。

在我看来，您正试图让开发人员轻松更新他们的本地机器。我的建议是构建一些执行以下操作的批处理文件：

*   设置 PATH 以包含 MSBuild.exe 的位置
*   获取主数据库的位置
*   将该位置传递给变量
*   运行 MSBuild 命令将路径变量设置为本地主路径并发布数据库/更改。

总的来说，这听起来比它真正的价值更麻烦。我建议您向所有开发人员发送一个 SQL 脚本，让他们正确设置默认数据/日志路径并使用默认值。

我建议您考虑设置一些批处理文件来运行 MSBuild 命令。您可以更轻松地将数据库构建提供给您的开发人员，而无需他们生成脚本并在本地运行它们。或者，您可以让他们更改其 SSMS 默认值，为他们的连接设置 SQLCMD 模式。SSDT 使它变得更好一点，因为它根本不会在没有打开 SQLCMD 模式的情况下运行 - 消除了 VS2008/VS2010 DBProjects 的很多混乱。

当我们在 DB Projects 上时，我使用了类似以下的东西来构建和部署：

```
msbuild /m .\MyDB\MyDB.dbproj /t:build
msbuild /m .\MyDB\MyDB.dbproj /t:deploy /p:TargetConnectionString="Data Source=localhost;Integrated Security=True;Pooling=False;" /p:TargetDatabase="MyDB" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T13:37:19.453

当 SSDT/VS 生成 SQL 文件时，它实际上会针对您告诉它连接的服务器运行一些查询。例如，您在这里获得的设置...

```
:setvar DatabaseName "CF"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER2008\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER2008\MSSQL\DATA\" 
```

从您在发布文件/配置文件中指定的目标数据库连接的服务器设置中获取。

**在您用于生成脚本的服务器上，打开 regedit.exe 并在HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft**下搜索键“ **DefaultLog** ”和“ **DefaultData** ” ——它们应该位于同一位置。查看它们是否与您的脚本生成的设置相匹配。

 **您可以在服务器/PC 上更改这些（无论您指向何处），它将生成您在生成 SQL 脚本中输入的位置。在您不拥有的服务器或用于生产等的服务器周围自然要小心，因为这将更改服务器上的设置，该设置将 SQL Server 指向放置新数据库的位置。这似乎与您在 SQL Server 属性 -> 数据库设置中输入的设置不同。

希望有帮助！**

# java - Java HttpServer 基本身份验证问题

> ID：10170307
> 
> 赞同：0
> 
> 时间：2012-04-16T07:40:51.923
> 
> 标签：java, com.sun.net.httpserver, apache-commons-httpclient

我有一个 Java 的实现`HttpServer`，我用它来测试它的基本功能，这意味着我可以即时调整提供给客户端的内容。我的代码使用的是 apache http 客户端。

我想使用此实现测试一些身份验证，但我遇到了一些问题。我的问题是我的代码从不进行身份验证，发送初始请求并且服务器以 401 响应，但 http 客户端从不响应。它遍历身份验证类型列表，但从不选择 BASIC

如果我使用浏览器连接到相同的 url，我会收到提示，当我提交凭据时它会登录。如果我更改代码以便代码尝试登录到其他服务器，则它是成功的，所以我知道两端都有效！

我已经在客户端和服务器端连接了连接，我可以看到的差异是：

*   当连接成功时，后续请求将作为 POST 而不是 GET 发送。
*   当我的服务器响应时，身份验证标头是 Www 而不是 WWW（因为它工作时）

编辑：

查看 http 代码，区分大小写应该不会导致任何问题。第一个响应是失败的响应，第二个响应是有效的响应：

失败

```
GET /testing HTTP/1.1
Host: 192.168.30.65:8000
Connection: Keep-Alive
User-Agent: Apache-HttpAsyncClient/4.0-beta1 (java 1.5)

HTTP/1.1 401 Unauthorized
Content-length: 0
Www-authenticate: Basic realm="myRealm" 
```

作品

```
GET /svn HTTP/1.1
Host: svnserver
Connection: Keep-Alive
User-Agent: Apache-HttpAsyncClient/4.0-beta1 (java 1.5)

HTTP/1.1 401 Authorization Required
Date: Mon, 16 Apr 2012 09:51:58 GMT
Server: Apache/2.2.3 (CentOS)
WWW-Authenticate: Basic realm="Subversion Repository"
Content-Length: 475
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>401 Authorization Required</title>
</head><body>
<h1>Authorization Required</h1>
<p>This server could not verify that you
are authorized to access the document
requested.  Either you supplied the wrong
credentials (e.g., bad password), or your
browser doesn't understand how to supply
the credentials required.</p>
<hr>
<address>Apache/2.2.3 (CentOS) Server at svnserver Port 80</address>
</body></html>

GET /svn HTTP/1.1
Host: svnserver
Connection: Keep-Alive
User-Agent: Apache-HttpAsyncClient/4.0-beta1 (java 1.5)
Authorization: Basic YQVkd2Gm3GS6dXNjbMk5 
```

# c# - 使用 C# 识别“GridViewCellEditEndedEvent”中的选定行

> ID：10170308
> 
> 赞同：1
> 
> 时间：2012-04-16T07:41:24.980
> 
> 标签：c#, wpf, mvvm, telerik

我正在使用**带有 MVVM 模型的 WPF 应用程序**。我想知道如何使用 C#在 Telerik 网格**GridViewCellEditEndedEvent中获取****选定的行。**

 **任何人都可以发布一些示例代码或给我一些建议吗？

提前致谢

我的代码是：

```
 public void CellEdit(GridViewCellEditEndedEventArgs e)
      {
      if (e.EditAction == GridViewEditAction.Cancel)
      {
          return;
      }

      RadGridView Grid = (RadGridView)e.Source;
      var selectedItem = (MyViewModel)Grid.SelectedItem;
      // Here i want to get the selected row
      ..........
      ..........
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:33:46.940

您可以通过编辑的 Cell 和 ExtensionMethod 获取编辑的行，`ParentOfTypeExtensions.ParentOfType`如下所示：

```
GridViewRow gridrow = e.Cell.ParentOfType<GridViewRow>(); 
```

并且不要忘记使用：

```
using Telerik.Windows.Controls; 
```**

# xpages - 从 xe:navigator 项目中获取提交的值

> ID：10170309
> 
> 赞同：1
> 
> 时间：2012-04-16T07:41:35.647
> 
> 标签：xpages, xpages-extlib

为什么这个简单的导航器代码没有向 onItemClick 事件中的 sessionScope 变量添加任何内容？

```
<xe:navigator id="navigator1">         
    <xe:this.treeNodes>
        <xe:dominoViewListTreeNode filter="All.*" submitValue="#{javascript:return viewEntry.getName()}" var="viewEntry" href="page.xsp">
            <xe:this.databaseName><![CDATA[#{javascript:database.getServer() + "!!" + "path//db.nsf"}]]></xe:this.databaseName>
        </xe:dominoViewListTreeNode>
    </xe:this.treeNodes>

    <xp:eventHandler event="onItemClick" submit="true" refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:sessionScope.clickedView = context.getSubmittedValue()}]]></xp:this.action>
    </xp:eventHandler>
</xe:navigator> 
```

该代码深受 XPages101 第 71 课的启发：http: [//xpages101.net/xpages101/XPages101.nsf/0/4DB7580AC6931682802579A7004E74E7](http://xpages101.net/xpages101/XPages101.nsf/0/4DB7580AC6931682802579A7004E74E7)

作为一种解决方法，我将 viewEntry.getName() 作为参数传输，而不是使用以下 href：

```
<xe:this.href><![CDATA[#{javascript:"page.xsp?view="+viewEntry.getName();}]]></xe:this.href> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:06:14.877

每，

**xe:dominoViewListTreeNode**中的**href**属性导致服务器端事件根本不被执行。当单击一个节点时，它只是对所选页面（page.xsp）执行一个 HTTP GET。如果您删除它并在服务器端代码中重定向用户，您的示例应该可以工作：

 **```
<xe:navigator id="navigator1">         
  <xe:this.treeNodes>
     <xe:dominoViewListTreeNode filter="All.*" submitValue="#{javascript:return viewEntry.getName()}" var="viewEntry">
        <xe:this.databaseName><![CDATA[#{javascript:database.getServer() + "!!" + "path//db.nsf"}]]></xe:this.databaseName>
    </xe:dominoViewListTreeNode>
  </xe:this.treeNodes>

  <xp:eventHandler event="onItemClick" submit="true" refreshMode="complete">
     <xp:this.action>
       <![CDATA[#{javascript:sessionScope.clickedView = context.getSubmittedValue();
     context.redirectToPage("page");}]]>
     </xp:this.action>
  </xp:eventHandler>
</xe:navigator> 
```

另一个提示：使用表达式语言，您可以将 submitValue 属性的公式缩短为：

```
submitValue="#{viewEntry.name}" 
```**

# android - android中的警报对话框验证

> ID：10170313
> 
> 赞同：0
> 
> 时间：2012-04-16T07:42:12.943
> 
> 标签：android

当我在不输入值的情况下单击保存按钮时，对话框会消失。我想显示对话框并进行验证。如果有人知道，请帮助我。

这是我的代码：

```
 TextView tvUserName=new TextView(this);
            TextView tvPassword=new TextView(this);
            TextView tvURL=new TextView(this);
            final EditText etUserName=new EditText(this); 
            final EditText etPassword=new EditText(this);
            final AlertDialog.Builder alert = new AlertDialog.Builder(this);    
            LinearLayout login= new LinearLayout(this);
            login.setOrientation(1); //1 is for vertical orientation
            tvUserName.setText(getResources().getString(R.string.username));
            tvPassword.setText(getResources().getString(R.string.password));
            login.addView(tvURL);
            login.addView(etURL);
            login.addView(tvUserName);
            login.addView(etUserName);
            login.addView(tvPassword);
            etPassword.setInputType(InputType.TYPE_CLASS_TEXT |InputType.TYPE_TEXT_VARIATION_PASSWORD);
            login.addView(etPassword);
            alert.setView(login);
            alert.setTitle(getResources().getString(R.string.login));
            alert.setPositiveButton(getResources().getString(R.string.login), new DialogInterface.OnClickListener() {             
                public void onClick(final DialogInterface dialog, int whichButton) {   
                    strUserName=etUserName.getText().toString();
                    XmlUtil.username=strUserName;
                    strPassword=etPassword.getText().toString();
                    strhwdXml=etURL.getText().toString();
                    if((strUserName.length()==0)||(strPassword.length()==0){
    Toast.makeText(getBaseContext(),"Please enter username and password", Toast.LENGTH_SHORT).show();

                    }else {
                        Toast.makeText(getBaseContext(),"Success", Toast.LENGTH_SHORT).show();
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:01:08.963

```
 private void showAlertBox() {
        AlertDialog alertBox = null;
        alertBox = new AlertDialog.Builder(this).create();
        alertBox.setTitle("titleText");
        alertBox.setMessage("messageText");
        alertBox.setCancelable(false);

        LayoutInflater inflater = LayoutInflater.from(this);
        View alert_webview = inflater.inflate(R.layout.alert_layout, null);
        alertBox.setView(alert_webview);
        btnfromlayout = (Button) alert_webview.findViewById(R.id.btnclose);
        btnfromlayout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // Whatever you want on click...compare
                // if(strUserName.equalsIgnoreCase("") ||
                // strPassword.equalsIgnoreCase("")){
                // Your toast msg
                // }else{
                // cAlert.dismiss();
                // }
                Log.i("Close", "Close");
            }
        });

        alertBox.show();
    }

@Override
    public void onClick(View v) {
        int vId = v.getId();
        switch (vId) {
        case R.id.btnclose:
            //Whatever you want on click...compare
//if(strUserName.equalsIgnoreCase("") || strPassword.equalsIgnoreCase("")){
//Your toast msg
//}else{
//          cAlert.dismiss();
//}
            Log.i("Close", "Close");
            break;
        default:
            break;
        }

    } 
```

## R.layout.YOUR_XML_LAYOUT_FILE

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtcustmessage"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Txt custom Layout For Alert" />

    <Button
        android:id="@+id/btnclose"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Close Custom" />

</LinearLayout> 
```

/// 像上面的布局一样，你可以为登录控件创建自己的布局，并根据布局和所需的操作设置点击列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:02:32.387

我认为制作这种 AlertDialog 的最佳方法是为其制作新的自定义布局，就像您为活动制作一样。如果您使用 setPositiveButton 等，它们会在按下时默认关闭对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:35:15.970

最好也包含按钮，而不是使用 setpositivebutton。如果你有按钮，那么你可以随心所欲。

# c# - 如何迭代 linq-to-sql 查询结果的结果并附加结果？

> ID：10170316
> 
> 赞同：2
> 
> 时间：2012-04-16T07:42:16.807
> 
> 标签：c#, asp.net, sql-server, linq, linq-to-sql

我是 C# 和 Linq-to-Sql 的新手。

我有一个这种形式的表'InstrumentTypes'：

```
typeId(int)  | type(varchar)  |  subttype(varchar)

101               Keys           keyboard
102               Keys           accessories
103               Guitar         acoustic
104               Guitar         electric 
```

我需要根据“类型”作为输入的搜索从表中获取所有“类型 ID”，并且所有类型 ID 都需要绑定到 ASP 中继器。

到目前为止，我已经编写了以下代码：

```
// requestType contains the type from the search
var type = (from m in database.InstrumentTypes
            where m.type == requestType
            select m);
foreach(var typeId in type)
{
    //code
} 
```

我无法弄清楚如何迭代查询结果，将它们存储在数据结构中并将它们绑定到中继器。

以下代码将其绑定到中继器：

```
Repeater1.DataSource= //name of data structure used to store the types goes here
Repeater1.DataBind(); 
```

有人可以帮我吗？

编辑：对于获得的每个 typeID，我想访问另一个表“仪器”并检索属于该 typeId 的所有仪器。表“仪器”是这样的：

```
instrumentId     typeID    name     description
1000             101       yamaha   xyz 
```

根据 Arialdo 的回答，我正在这样做：

```
var type = (from m in database.InstrumentTypes
                          where m.type == requestType
                          select m);
            var instruments = new List<Instrument>();
            foreach (var i in type)
            {
                instruments.Add(from x in database.Instruments
                                where x.typeId == i.typeId
                                select x);
            }
            Repeater1.DataSource = instruments;
            Repeater1.DataBind(); 
```

但我收到一个编译错误，提示“列表的最佳重载方法匹配有一些无效参数”。我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T07:52:46.077

你从中得到什么

```
var type = (from m in database.InstrumentTypes
        where m.type == requestType
        select m); 
```

是 的集合`InstrumentTypes`，而不是 id 的集合。

这对我有用

```
var types = (from m in database.InstrumentTypes
        where m.type == requestType
        select m);
var ids = new List<int>();
foreach (var type in types)
{
    ids.Add(type.Id);
} 
```

您可以轻松转换为

```
var ids = (from m in database.InstrumentTypes
        where m.type == requestType
        select m.Id).ToList(); 
```

[编辑]

只要您定义了 和 之间的关系，您就可以直接查询您的仪器并导航到相关`InstrumentType`对象`Instrument`。

```
var instruments = (from i in database.Instrument
                      where i.InstrumentType.type == requestType
                      select i); 
```

无需单独的`foreach`es 或查询。将`i.InstrumentType`转换为 a `join`，您可以使用 SQL 探查器进行验证

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T08:07:58.193

I am not sure what you are asking.

With out explicitly defining the returned type of your query you are already returning an IEnumerable<InstrumentTypes> object. If you want a list of ID's you can simply refine your query to return ID's rather than a list of InstrumentTypes. Of course, then you'd be returning an IEnumerable<int> object.

```
var type = (from m in database.InstrumentTypes
        where m.type == requestType
        select m.typeId); 
```

# javascript - 事件告诉您一个元素已附加到文档中？

> ID：10170317
> 
> 赞同：0
> 
> 时间：2012-04-16T07:42:23.297
> 
> 标签：javascript, html

html 元素的某些属性只有在 HTML DOM 中才能确定，例如 offsetHeight 或 offsetWidth。如果我 createElement('div') 并想使用 div 的 offsetHeight，当这个元素附加到文档时是否会触发一个事件，以便我知道我现在可以使用 offsetHeight？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:18:49.030

[`DOMNodeInserted`](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted)可能是您正在寻找的。有关 DOM 事件的详细信息，请参阅[https://developer.mozilla.org/en/DOM/DOM_event_reference](https://developer.mozilla.org/en/DOM/DOM_event_reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:19:33.150

某些浏览器会在您将其添加到 DOM 后立即初始化这些属性。它需要在 DOM 中，以便可以应用 CSS 规则。

因此，您不需要接收事件，只需在创建元素后立即将元素添加到 DOM 即可。

但是，如果您发现您需要的属性*没有*立即初始化，您可以将该代码分离到另一个函数中（就像您对事件处理程序所做的那样）并立即使用它来调用它`setTimeout(otherFunction, 0)`。一旦你的 JavaScript 完成执行，浏览器会相应地响应你的 DOM 更改，然后立即调用你的其他函数。这有点像举办活动，但自己触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:51:06.133

不，我不认为有这样的活动。但是您可以将一个属性附加到新创建的元素，告诉您的脚本它已附加。您可以执行以下操作：

```
function appendSignal(el,toElement){
  to.appendChild(el);
  el.isAppended = true;
}

var nwdiv = document.createElement('div');
// do stuff with nwdiv
appendSignal(nwdiv,document.body);
//doing other stuff
if (nwdiv.isAppended) {
  /* nwdiv.offsetHeight should be available... */
} 
```

# jquery - 提交按钮需要点击两次才能提交表单

> ID：10170321
> 
> 赞同：0
> 
> 时间：2012-04-16T07:42:49.503
> 
> 标签：jquery, jquery-validate

我的代码中有以下 jquery 函数。我必须单击“提交”按钮两次才能使表单提交工作。我可以使用 ajaxSubmit 函数，然后一切正常，但 jquery 的问题是提交按钮的值本身没有作为帖子的一部分传递。

我`isset($_POST['submit'])`检查了我所有的子页面并使用`ajaxSubmit`，这个标准从未设置过。

```
$("#bulkeditshowForm").validate({
    submitHandler: function(form) {
        $('#bulkeditshowForm').ajaxForm({ 
            // target identifies the element(s) to update with the server response 
            target: '#bulkeditResult', 
            beforeSubmit: function(){
                },
            success: function() { 
                }
        }); 
```

如何使用 ajaxSubmit 函数并通过表单提交“提交”按钮值？我需要在提交表单时设置提交变量。ajaxForm 可以，但我需要单击提交按钮两次。ajaxSubmit 是解决方案，但它本身并没有设置提交变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:28:54.753

关于您问题的“ajaxSubmit”部分：您可以向 ajaxSubmit 调用添加任何参数，因此您的表单参数和所有添加的参数将被提交：

```
 //Take submit button value
    var submitButtonValue = $("#submitButtonId").val();
    $("#bulkeditshowForm").validate({
      submitHandler: function(form) {
        $('#bulkeditshowForm').ajaxForm({
          // target identifies the element(s) to update with the server response
          target: '#bulkeditResult',
          //add submit button value to ajaxSubmit
          data: {'your_parameter_name':submitButtonValue},
          beforeSubmit: function() {
          },
          success: function() {
          }
        });
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:08:05.490

在 jquery 中不好，但您可以更改提交按钮名称并使用您在隐藏的输入类型中签入页面的名称

# asp.net - asp.net/C# 中的本地化国家/地区名称

> ID：10170334
> 
> 赞同：1
> 
> 时间：2012-04-16T07:43:57.417
> 
> 标签：asp.net

我正在处理一个 asp.net 页面。我有一个国家的下拉列表，国家在 aspx 页面中填充/硬编码。我想让这个国家下拉列表本地化，以便如果文化是法语，国名出现在法语中，如果文化名称是德国，那么国名出现在德语中。

我尝试了以下链接，但它不起作用：

[http://geekswithblogs.net/aghausman/archive/2009/07/26/get-countries-name-in-.net.aspx](http://geekswithblogs.net/aghausman/archive/2009/07/26/get-countries-name-in-.net.aspx)

我是否需要使用 Db 或者我可以在没有 DB 的情况下使用它。

请建议如何做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:58:31.633

您必须将本地化名称保存在某处。它可能在 DB 或 IIS 池内存中（意味着某处的静态硬编码变量）或从文件（csv、xml 等）加载一次。但最好将它们保存在资源文件中，以实现与现有 .net 框架机制的最大兼容性。

关于您的问题，这是描述这种情况的[文章。](http://idpkshr.wordpress.com/2012/01/28/how-to-localize-asp-net-controls-based-on-browsers-language-and-culture-settings/)基本上，您将 UICulture 设置为“自动”（意味着它将从浏览器设置中获取）并将本地化资源放入 resx 文件中。

# c# - 获取已定义类的表

> ID：10170342
> 
> 赞同：0
> 
> 时间：2012-04-16T07:45:09.483
> 
> 标签：c#, html, regex, html-table

我有这样的html：

```
<table class="tbNoBorder" ..some attr here...>
<tr><td>1</td></tr><tr><td>2</td></tr>
</table>

<table ..some attr here... >
<tr><td>1</td></tr><tr><td>2</td></tr>
</table> 
```

我需要使用正则表达式转换为

```
<table class="tbNoBorder" cellspacing="0" cellpadding="0" ..some attr here...>
<tr><td style="padding: 5px;">1</td></tr><tr><td style="padding: 5px;">2</td></tr>
</table>

<table cellspacing="0" cellpadding="0" ..some attr here... >
<tr><td style="border: solid 1px #ccc; padding: 5px;">1</td></tr><tr><td style="border: solid 1px #ccc; margin: 0; padding: 5px;">2</td></tr>
</table> 
```

然后我将其转换为 Word，这就是我需要这种转换的原因。具有类**tbNoBorder**的表不能有任何边框。

我编写了这段代码来做到这一点，但所有表格都带有边框。第一个正则表达式占用所有表。有什么想法让它发挥作用吗？

```
 //Fixes tables with borders
        content = Regex.Replace(content,
            @"<table(.*?)(?!tbNoBorder)(.*?)>(.*?)</table>",
            m =>
                {
                    var tableContent = Regex.Replace(m.Groups[3].ToString(), 
                                        @"<td",
                                        t => "<td style=\"border: solid 1px #ccc; padding: 5px;\"", RegexOptions.IgnoreCase
                                        );
                    return "<table cellspacing=\"0\" cellpadding=\"0\"" + m.Groups[1] + m.Groups[2] + ">" + tableContent + "</table>";
                }, RegexOptions.IgnoreCase
            );

        //Fixes tables without borders, has class tbNoBorder
        content = Regex.Replace(content,
            @"<table(.*?)tbNoBorder(.*?)>(.*?)</table>",
            m =>
            {
                var tableContent = Regex.Replace(m.Groups[3].ToString(),
                                    @"<td",
                                    t => "<td style=\"padding: 5px;\"", RegexOptions.IgnoreCase
                                    );
                return "<table cellspacing=\"0\" cellpadding=\"0\" + m.Groups[1] + m.Groups[2] + ">" + tableContent + "</table>";
            }, RegexOptions.IgnoreCase
        ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:49:19.433

将您的第一个正则表达式更改为

```
@"<table(?![^>]*tbNoBorder)(.*?)>(.*?)</table>" 
```

`tbNoBorder`那么如果开始标签中有a，它将失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:13:49.870

使用 xslt 可以这样解决：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" />

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="table">
        <xsl:element name="table">
            <xsl:attribute name="cellspacing">0</xsl:attribute>
            <xsl:attribute name="cellpadding">0</xsl:attribute>
            <xsl:apply-templates select="@* | node()" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="td">
        <xsl:element name="td">
            <xsl:if test="ancestor::table[not(@class='tbNoBorder')][1]">
                <xsl:attribute name="style">border: solid 1px #ccc; padding: 5px;</xsl:attribute>
            </xsl:if>
            <xsl:apply-templates />
        </xsl:element>
    </xsl:template>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# jakarta-ee - 将小型 Java EE 应用程序与 EJB 捆绑在一个 war 文件中会被认为是不好的做法吗？

> ID：10170346
> 
> 赞同：3
> 
> 时间：2012-04-16T07:45:57.270
> 
> 标签：jakarta-ee, ejb

我正在开发一个也使用 EJB 的小型 Java EE 应用程序。这是一个非常小的应用程序，只有几个 bean。

现在，我将整个应用程序捆绑在一个 war 文件中。这会被认为是不好的做法吗？我应该为 EJB 创建另一个项目和生成的 jar 文件吗？

从实际的角度来看（除了能够在多个项目中重用 EJB 之外），将所有内容部署在一个 war 文件中与将它们拆分为 war + jar 文件的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:41:14.283

为了尊重 Java 多层架构，最好将 EJB 保存在 JAR 中。将业务逻辑与 Web 层分离是一种更好的做法。然后您可以使用[EAR](https://stackoverflow.com/questions/4441237/packaging-ejb-in-javaee-6-war-vs-ear)（[也检查一下](https://stackoverflow.com/questions/1594667/war-vs-ear-file)）进行部署。但是，如果您的应用程序很小并且不会长大，那么将所有内容都放在 War 中是可以接受的。

# android - android中的短信管理器，发送结果

> ID：10170349
> 
> 赞同：1
> 
> 时间：2012-04-16T07:46:04.977
> 
> 标签：android, sms, android-pendingintent

对于短信管理器，API 是：sendTextMessage(phonenum, null,text, **null** ,* *null* *)。我对最后两个参数感到困惑。谁能告诉我关于最后两个参数的示例代码。如果我不使用最后两个参数，短信发送是否正常，我怎么能得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:32:42.533

[您可以阅读有关 SmsManager 的更多信息。描述了每个参数的含义。](http://developer.android.com/reference/android/telephony/SmsManager.html)

# struct - 将结构数组作为 openCL 内核参数传递时出现奇怪的值

> ID：10170354
> 
> 赞同：1
> 
> 时间：2012-04-16T07:46:13.593
> 
> 标签：struct, kernel, opencl, arguments

当将一个结构数组作为参数传递给我的内核时，我得到第一个之后的项目的奇怪值（数组 [1]、数组 [2] 等）。这似乎是一个对齐问题，也许？

这是结构：

```
typedef struct Sphere
{
    float3 color;
    float3 position;
    float3 reflectivity;
    float radius;
    int phong;
    bool isReflective;
} Sphere; 
```

这是主机端的初始化代码：

```
cl::Buffer cl_spheres = cl::Buffer(context, CL_MEM_READ_ONLY, sizeof(Sphere) * MAX_SPHERES, NULL, &err);
err = queue.enqueueWriteBuffer(cl_spheres, CL_TRUE, 0, sizeof(Sphere) * MAX_SPHERES, spheres, NULL, &event);
err = kernel.setArg(3, cl_spheres); 
```

发生的情况是，数组中第二个 Sphere 结构的颜色实际上将具有我在主机端（s3 或 z）设置颜色的最后一个值、一个未初始化的零值和我设置的第一个值位置到主机端（s0 或 x）。我注意到 float3 数据类型实际上仍然有第四个值（s3）没有被初始化。我认为这就是非初始化零值的来源。因此，这似乎是一个对齐问题。我真的不知道我能做些什么来解决它。我希望也许有人可以阐明这个问题。我确保我的结构定义在两边都完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:20:51.553

从 OpenCL 1.2 规范，第 6.11.1 节：

> 请注意，ISO C 标准要求任何给定结构或联合类型的对齐至少是相关结构或联合的所有成员的对齐的最小公倍数的完美倍数，并且还必须是两个的幂。

也`cl_float3`算作 a `cl_float4`，见 6.1.5 节。

最后，在第 6.9.k 节中：

> 程序中内核函数的参数不能使用内置标量类型 bool、half、size_t、ptrdiff_t、intptr_t 和 uintptr_t 或包含声明为这些内置标量类型之一的字段的结构和/或联合声明.

为了遵守这些规则，并且可能使访问速度更快，您可以尝试（OpenCL C 端；在主机上使用`cl_float4`）：

```
typedef struct Sphere
{
    float4 color;
    float4 position;
    float4 reflectivity;
    float4 radiusPhongReflective; // each value uses 1 float
} Sphere; 
```

# asp.net - ASP.NET - 制作 CustomValidator 来检查控件的属性

> ID：10170357
> 
> 赞同：0
> 
> 时间：2012-04-16T07:46:24.960
> 
> 标签：asp.net, customvalidator

我有一个用户控件，它有一个 bool IsValidDate 属性。如果属性值为 false，如何使用 CustomValidator 检查该值并返回其错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:16:43.923

如果您的用户控件看起来像这样：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyDateUserControl.ascx.cs" Inherits="CustomValidation.MyDateUserControl" %>

My custom user control
<asp:TextBox runat="server" ID="DateTextBox" />

<asp:CustomValidator  runat="server" ValidateEmptyText="true" ID="DateCustomValidator" ControlToValidate="DateTextBox"  OnServerValidate="DateCustomValidator_ServerValidate" ErrorMessage="The date is not valid" />

<asp:Button ID="SubmitButton" runat="server" Text="Submit" /> 
```

然后在您的代码隐藏中，您可以使用：

```
public bool IsValidDate
{
    get
    {
        DateTime temp;
        return DateTime.TryParse(DateTextBox.Text, out temp);
    }
}

protected void DateCustomValidator_ServerValidate(object source, ServerValidateEventArgs args)
{
    args.IsValid = IsValidDate;
} 
```

如果您不希望自定义验证器成为用户控件的一部分，则必须在`IsValidDate`用户控件名称前加上前缀。

# c - 根据 K&R，无法理解 C 中 getint() 的工作原理

> ID：10170358
> 
> 赞同：5
> 
> 时间：2012-04-16T07:46:30.507
> 
> 标签：c

我已经尝试理解这段代码的工作两天了，但就是无法理解它。

我的疑问是关于该功能的工作。请不要考虑缺少 main 或其他任何内容。

我无法理解的是，如果 getint() 使用 getchar() 接受输入，它将执行以下操作：

1.  假设bufp = 0。该函数将调用getch()，这意味着c=a。（只是一个随机字符）
2.  下一步使用 ungetch(a)，这意味着 buf[0]=a 和 bufp=1。
3.  现在这是我无法得到它的地方。下一次调用 getint() 时，结果为 c=buf[--bufp]=a 和 bufp=0。
4.  然后这将再次 ungetch(a)，这将导致函数无处可去！

我不知道我在这里是否有一些主要概念错误，但我就是想不通。:(

```
/* getint:  get next integer from input into *pn */

int getint(int *pn)
{
    int c, sign;

    while (isspace(c = getch()))   /* skip white space */
            ;

    if (!isdigit(c) && c != EOF && c != '+' && c != '-') {
            ungetch(c);  /* it is not a number */
            return 0;
    }
    sign = (c == '-') ? -1 : 1;
    if (c == '+' || c == '-')
            c = getch();
    for (*pn = 0; isdigit(c); c = getch())
            *pn = 10 * *pn + (c - '0');
    *pn *= sign;
    if (c != EOF)
            ungetch(c);
    return c;
}

#define BUFSIZE 100

char buf[BUFSIZE];      /* buffer for ungetch */
int bufp = 0;           /* next free position in buf */

int getch(void) /* get a (possibly pushed-back) character */
{
   return (bufp > 0) ? buf[--bufp] : getchar();
}

void ungetch(int c)     /* push character back on input */
{
   if(bufp >= BUFSIZE)
      printf(" ungetch too many characters\n");

   else
      buf[bufp++] = c;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:40:39.447

getint() 函数仅从输入中读取数字。如果它在开始时得到一个不是数字或 + - 符号的字符，它将调用 ungetch() 将字符推回输入缓冲区，以便它可以被其他函数调用读取。getint() 将继续返回 0，直到您通过自己调用 getch() 从输入缓冲区中删除非数字字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:09:59.763

对我来说，你混淆了你的函数名称是有道理的

getch != getchar getint != getop

睡一会儿

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:34:25.253

如果`getint()`失败（因此在您给出的场景中使用 ungetch），再次调用`getint()`将再次失败。您应该调用另一个函数，该函数将消耗待处理的字符并从无法解释为 int 的数据中产生有用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T08:09:13.787

函数将按照它们被调用的顺序执行，而不是它们在源文件中的顺序。

也没有`main(){...}`，因此代码在当前状态下不会做任何事情。

# python - 如何使用 scipy.interpolate.splrep 插值曲线？

> ID：10170361
> 
> 赞同：3
> 
> 时间：2012-04-16T07:46:37.143
> 
> 标签：python, scipy, interpolation

使用一些实验数据，我终生无法弄清楚如何使用 splrep 创建 B 样条。数据在这里：[http ://ubuntuone.com/4ZFyFCEgyGsAjWNkxMBKWD](http://ubuntuone.com/4ZFyFCEgyGsAjWNkxMBKWD)

这是一段摘录：

```
#Depth  Temperature
1   14.7036
-0.02   14.6842
-1.01   14.7317
-2.01   14.3844
-3  14.847
-4.05   14.9585
-5.03   15.9707
-5.99   16.0166
-7.05   16.0147 
```

这是它的图，y 为深度，x 为温度： ![在此处输入图像描述](../Images/e9ebb8aeb282b8f4ce61bd356879842b.png)

这是我的代码：

```
import numpy as np
from scipy.interpolate import splrep, splev

tdata = np.genfromtxt('t-data.txt', 
                      skip_header=1, delimiter='\t')
depth = tdata[:, 0]
temp = tdata[:, 1]

# Find the B-spline representation of 1-D curve:
tck = splrep(depth, temp)
### fails here with "Error on input data" returned. ### 
```

我知道我在做一些非常愚蠢的事情，但我就是看不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T08:13:52.797

您只需要将您的值从最小到最大:)。@a different ben 对你来说应该不是问题，但要小心未来的读者，如果深度是一个列表而不是一个 numpy 数组，`depth[indices]`会抛出一个！`TypeError`

```
>>> indices = np.argsort(depth)
>>> depth = depth[indices]
>>> temp = temp[indices]
>>> splrep(depth, temp)
(array([-7.05, -7.05, -7.05, -7.05, -5.03, -4.05, -3\.  , -2.01, -1.01,
        1\.  ,  1\.  ,  1\.  ,  1\.  ]), array([ 16.0147    ,  15.54473241,  16.90606794,  14.55343229,
        15.12525673,  14.0717599 ,  15.19657895,  14.40437622,
        14.7036    ,   0\.        ,   0\.        ,   0\.        ,   0\.        ]), 3) 
```

向@FerdinandBeyer 致敬，建议`argsort`不要使用我丑陋的“压缩值、排序压缩、重新分配值”方法。

# model-view-controller - GWT 的模型-视图-控制器

> ID：10170364
> 
> 赞同：2
> 
> 时间：2012-04-16T07:46:43.737
> 
> 标签：model-view-controller, gwt

我知道现在大多数基于 GWT 的应用程序都是使用 MVP 模式实现的，但是我仍然想知道哪个 MVC 框架最成熟，可以用于使用 GWT 构建的生产级 Web 应用程序。

在网上搜索，就用户群和代码中的活动而言，我似乎无法在 MVP 框架中找到与 Mvp4gwt 和 GwtPlatform 相媲美的 MVC 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T00:52:21.093

如果你非得自取其辱，我听说过的 GWT 仅有两个 MVC 框架：

[http://code.google.com/p/gwt-mvc/](http://code.google.com/p/gwt-mvc/)

[http://code.google.com/p/gwittir/](http://code.google.com/p/gwittir/)

这些都没有在两年多的时间里发布。可能是由于缺乏社区兴趣，并且因为 MVP 在所有可以想象的方面都更好。将 MVC 与 GWT 一起使用就像在法拉利上安装方形轮胎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:25:57.723

您可以使用 JetPad-Mappers，这是一个由 JetBrains 开发的简约 MVC 框架，并用于多个（当前未发布的）产品中。

*   [https://github.com/JetBrains/jetpad-mapper](https://github.com/JetBrains/jetpad-mapper)

免责声明，我参与了这个框架的开发。

# php - 如何循环遍历动态（jQuery）生成的 texareas 数组并将值发布到同一页面？

> ID：10170366
> 
> 赞同：1
> 
> 时间：2012-04-16T07:46:54.290
> 
> 标签：php, jquery

我正在使用 jQuery 生成许多文本区域。我想通过页面上的 POST 方法检索所有填写的文本区域的值（这是一种概念证明，快速而肮脏，我通常不会这样做），但是当我点击提交时，我得到了值只有一个，以最后发布的 textarea 值为准。我想我可以用一个数组和一个 foreach 循环来做到这一点，但我不确定如何做到这一点，因为在这项工作中添加了 jQuery/页面上因素的所有复杂性。我还想象它可能与所有生成的具有相同名称的文本区域有关......有人吗？

这是代码-

```
 <script type="text/javascript">
        $(document).ready(function() {

            $('.textadder').click(function(){
            $("form").append("<p class='introText2'>Enter More Text</p><textarea rows='5' cols='20' name='textForm' class='formText2'></textarea>");
        });

    });/*document ready*/

</script>

<?php

if (isset($_POST['textForm']))
{
$formTxt = $_POST['textForm'];
        echo $formTxt;
}
?>
</head>

<body>

<div id="wrapper">
    <div id="submittedHolder"></div>
    <div class="formBox">
        <form method="post" action="">
            <p class="introText">Please Enter Some Text</p>
            <textarea rows="5" cols="20" name="textForm" class="formText"></textarea>
            <input type="submit" class="submitter" value="Submit">
        </form>

        <div class="textadder"><p>More Text</p></div>
        <div class="clearer"></div>
    </div><!--formBox-->
</div><!--wrapper-->

</body>

</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:51:40.253

```
<script type="text/javascript">
        $(document).ready(function() {

            $('.textadder').click(function(){
            $("form").append("<p class='introText2'>Enter More Text</p><textarea rows='5' cols='20' name='textForm[]' class='formText2'></textarea>");
        });

    });/*document ready*/

</script>

<?php

if (isset($_POST['textForm']))
{
$formTxt = $_POST['textForm'];
        foreach($formTxt as $txt){
          echo $txt;
    }

}
?>
</head>

<body>

<div id="wrapper">
    <div id="submittedHolder"></div>
    <div class="formBox">
        <form method="post" action="">
            <p class="introText">Please Enter Some Text</p>
            <textarea rows="5" cols="20" name="textForm[]" class="formText"></textarea>
            <input type="submit" class="submitter" value="Submit">
        </form>

        <div class="textadder"><p>More Text</p></div>
        <div class="clearer"></div>
    </div><!--formBox-->
</div><!--wrapper-->

</body>

</html> 
```

在这里使用数组。post 对象现在将是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:50:13.643

在您的文本区域名称中使用`textForm[]`，而不是`textForm`：

```
<textarea rows="5" cols="20" name="textForm[]" class="formText"></textarea> 
```

之后，所有“textForm”文本区域都将在`$_POST['textForm']`数组中。

# svnant - 在 svn ant 任务中，有没有办法从 svn 结帐而无需对凭据进行硬编码？

> ID：10170367
> 
> 赞同：0
> 
> 时间：2012-04-16T07:46:55.443
> 
> 标签：svnant

我正在尝试从 svn URL 签出代码库。当我对凭据进行硬编码或将其定义为属性时，它可以正常工作。我的问题是，是否可以在运行时（即当我运行 build.xml 脚本时）从用户那里获取凭据？

```
<target name="svn">
    <svn **username="the username here" password="the password here"**>
        <checkout url="the url" destPath="${checkout}" />
    </svn>
</target> 
```

提前致谢.. ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:11:51.707

您可以预先使用 Ant 的输入任务，如下所示：

```
 <input message="Please enter username:" addproperty="user" /> 
```

然后只`${user}`用于**svn 用户名**属性。

# android - 如何使我的设计适合所有设备？

> ID：10170368
> 
> 赞同：-2
> 
> 时间：2012-04-16T07:47:01.957
> 
> 标签：android

嗨，我正在开发一个应用程序，其中字母不适合所有设备。对于 HCL ME 平板电脑，我的设计不适合。对于三星来说，它正在工作。我的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:layout_weight="2" android:orientation="vertical">

    <LinearLayout android:id="@+id/linearLayout1" android:layout_height="match_parent" 
    android:orientation="horizontal" android:layout_width="match_parent" 
    android:layout_weight="1">

        <LinearLayout android:id="@+id/linearLayout1" android:layout_height="match_parent"  
        android:orientation="vertical" android:layout_width="match_parent" 
        android:layout_weight="1">
            <TextView  android:id="@+id/letter1" android:gravity="center" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1"></TextView>
            <TextView  android:id="@+id/letter2" android:gravity="center" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="10dip"></TextView>
            <TextView  android:id="@+id/letter3" android:gravity="center" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="10dip"></TextView>
        </LinearLayout>

        <LinearLayout android:id="@+id/linearLayout1" android:layout_height="match_parent"  
        android:gravity="center"
        android:orientation="horizontal" android:layout_width="match_parent" 
        android:layout_weight="1">
            <ImageView android:id="@+id/imag"  
            android:gravity="center"
            android:scaleType = "fitCenter"
            android:layout_height="fill_parent" 
            android:layout_width="fill_parent"
             android:layout_gravity="center">
        </ImageView>

        </LinearLayout>

    </LinearLayout>

        <LinearLayout android:layout_gravity="bottom" 
        android:id="@+id/linearLayout2" 
        android:layout_height="wrap_content" android:orientation="horizontal" android:layout_width="match_parent">
            <Button android:id="@+id/previous" android:layout_width="wrap_content" android:layout_weight="1" android:text="Previous" android:layout_height="wrap_content" ></Button>
            <Button android:id="@+id/practice" android:layout_width="wrap_content" android:layout_weight="1" android:text="Practice" android:layout_height="wrap_content" android:onClick="onClick"></Button>
            <Button android:id="@+id/home" android:layout_width="wrap_content" android:layout_weight="1" android:text="Home" android:layout_height="wrap_content"></Button>
            <Button android:id="@+id/spell" android:layout_width="wrap_content" android:layout_weight="1" android:text="Spell" android:layout_height="wrap_content" android:onClick="Content"></Button>
            <Button android:id="@+id/next" android:layout_width="wrap_content" android:layout_weight="1" android:text="Next" android:layout_height="wrap_content" android:onClick="Content"></Button>

        </LinearLayout>

</LinearLayout> 
```

我的java文件是：

```
package com.android;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.android.SimpleGestureFilter.SimpleGestureListener;

public class MyAcivity extends Activity implements SimpleGestureListener {

    private SimpleGestureFilter detector;
    private static int counter=-1;
    private String[] mBtn1 ={"C","D","E","F","G","H","IÄ","J","K","L","M","N","O","CA","CB"};
    private TextView txtLetter;
    private ImageView imgLetter;

    private int[] imgArr={R.drawable.w1,R.drawable.w2,R.drawable.w3,R.drawable.w4,R.drawable.w5,R.drawable.w6,R.drawable.w7,R.drawable.w8,R.drawable.w9,R.drawable.w10,R.drawable.w11,R.drawable.w12,
            R.drawable.w13,R.drawable.w14,R.drawable.w15};
    private TextView txtKannada;
    private String[] mBtn2 = {"CgÀ¸À","DªÉÄ","E°","F±À","GqÀ","Hl","IÄ¶","J¯É","Kr","LzÀÄ","M¯É","N¯É","OµÀzsÀ",
            "CAUÀr","CB"};
    private String[] mBtn3 = {"ARASA","AME","ILI","ISA","UDA","UTA","RUSHI","ELE","EDI","AIDU","oLE","OLE","AUSHADA",
            "ANGADI","AHA"};
    private TextView txtEnglish;

    private int[] mAudio = {R.raw.a,R.raw.b,R.raw.c,R.raw.d,R.raw.e,R.raw.f,R.raw.g,R.raw.h,R.raw.i,R.raw.j,
            R.raw.k,R.raw.l,R.raw.m,R.raw.n,R.raw.o};
    protected MediaPlayer mp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.content);   

        detector = new SimpleGestureFilter(this,this);
        if(counter == -1)
            counter =getIntent().getExtras().getInt("POSITION");
        Typeface tf = Typeface.createFromAsset(getBaseContext().getAssets(), "fonts/brhknd.ttf");
        txtLetter = (TextView)findViewById(R.id.letter1);
        txtKannada = (TextView)findViewById(R.id.letter2);
        txtEnglish = (TextView)findViewById(R.id.letter3);
        imgLetter = (ImageView)findViewById(R.id.imag);
        txtLetter.setTypeface(tf);      
        txtLetter.setText(mBtn1[counter]);
        txtLetter.setTextSize(350);

        txtKannada.setTypeface(tf);
        txtKannada.setText(mBtn2[counter]);
        txtKannada.setTextSize(100);

        txtEnglish.setText(mBtn3[counter]);
        txtEnglish.setTextSize(50);

        Button btnNext =  (Button)findViewById(R.id.next);
        btnNext.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if(counter<imgArr.length-1)
                    counter++;
                changeContent();
            }
        });

        Button mPlay = (Button)findViewById(R.id.spell);
        mPlay.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                mp = MediaPlayer.create(MySwara.this, mAudio[counter]);   
                mp.start();
            }
        });

        Button btnPrvs =  (Button)findViewById(R.id.previous);
        btnPrvs.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if(counter>0)
                    counter--;
                changeContent();
            }
        });

        Button btnPractice = (Button)findViewById(R.id.practice);
        btnPractice.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MySwara.this,DrawingActivity.class);
                startActivity(intent);
            }
        });

        Button btnHome = (Button)findViewById(R.id.home);
        btnHome.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MySwara.this,mainClass.class);
                startActivity(intent);
            }
        });
    }

    public void changeContent()
    {
        txtLetter.setText(mBtn1[counter]);
        txtKannada.setText(mBtn2[counter]);
        txtEnglish.setText(mBtn3[counter]);
        //imgLetter.setBackgroundResource(imgArr[counter]);
        Bitmap bm = BitmapFactory.decodeResource(getResources(), imgArr[counter]);
        imgLetter.setImageBitmap(bm);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent me){
        this.detector.onTouchEvent(me);
        return super.dispatchTouchEvent(me);
    }
    @Override
    public void onSwipe(int direction) {
        String str = "";
        switch (direction) {
            case SimpleGestureFilter.SWIPE_RIGHT : str = "Swipe Right";
                if(counter>0)
                    counter--;
                    changeContent();
                break;
            case SimpleGestureFilter.SWIPE_LEFT :  str = "Swipe Left";
                if(counter<imgArr.length-1)
                    counter++;
                    changeContent();
                break;
        }
    }
} 
```

我如何适应所有设备。有人可以帮忙吗？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:07:42.267

create xml for each device separately. follow [this](https://stackoverflow.com/a/8253626/779408)

* * *

second way:

create a parent LinearLayout and pass it to the following method

```
public static boolean isTabletPC(Context context) {
    Display display = ((WindowManager) context
            .getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    if (display.getWidth() >= 1200) {
        isTabletPC = true;
        return isTabletPC;
    } else {
        isTabletPC = false;
        return isTabletPC;
    }
}

public static void fixUiDeviceDependencies(
        Activity act, LinearLayout llParent) {
    if (Utilities.isTabletPC(act)) {
        Display display = ((WindowManager) act
                .getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();
        LayoutParams params = (LayoutParams) llParent
                .getLayoutParams();
        params.width = display.getWidth() / 2;
        llParent.setLayoutParams(params);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:08:36.777

有几种可能性：

1.  对不同尺寸的屏幕使用不同的 xml 文件 -> 在这里查看[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

2.  你可以使用`scrollview`-> [http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

3.  或者只是让您的布局适合您希望支持的最小屏幕尺寸，然后在较大的屏幕上留出“一点”未使用的空间。

这真的取决于你需要什么。可能最兼容和最先进的解决方案是 1。

但请注意，屏幕布局上的每一次更改都必须为遵循这条路线的每个 xml 文件复制！

# ios - 在 iphone 中查找后台运行的应用程序

> ID：10170372
> 
> 赞同：2
> 
> 时间：2012-04-16T07:47:42.247
> 
> 标签：ios

谁能帮我 。我想检索仅在后台运行的应用程序名称。

我只需要应用程序的名称，以编程方式（通过编码）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:55:18.590

可以获得正在运行的进程的列表。请参阅此答案：[返回 iOS 中正在运行的后台应用程序/进程的列表](https://stackoverflow.com/questions/5906180/return-a-list-of-running-background-apps-processes-in-ios)。

但是，您只能获得进程名称（而不是整个应用程序名称或标题），这可能会产生误导，或者不同应用程序的名称可能相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T14:17:52.680

它不会在 iOS 8 上运行，因为苹果将其作为获取当前正在运行的应用程序的进程 ID 的漏洞。但是您可以获得在后台或前台运行的所有进程的列表。

# neural-network - MATLAB NN Toolbox 中的内存不足错误和训练数据集中的数据划分问题

> ID：10170375
> 
> 赞同：0
> 
> 时间：2012-04-16T07:48:14.157
> 
> 标签：neural-network, out-of-memory, matlab

我在 matlab NN Toolbox 中运行大量数据集时遇到问题 - 问题是 -> 当我使用 trainlm 算法时，NN Toolbox 无法运行数据并显示 Out of memory 错误，但对于其他算法则没有内存问题。为什么会这样？此外，当我放置超过 15 个隐藏神经元时，它也会显示内存不足。如何解决这类问题？

还有一件事：我将 10%、45%、45% 的数据划分用于训练验证和测试，但是在运行代码后我发现在工作区中它执行了 25% 的数据用于训练、37% 的数据用于验证和 37% 的数据用于测试目的。如何解决这个问题？

有人知道如何解决这类问题吗？我很高兴收到评论和任何建议。谢谢。

我在运行 Windows 7 的笔记本电脑中使用 R2010b 版本的 MATLAB。

这是我用于训练数据集的代码

```
EX_355 = xlsread('Training Dataset.xlsx','B2:B435106');

EX_532 = xlsread('Training Dataset.xlsx','C2:C435106');

BA_355 = xlsread('Training Dataset.xlsx','D2:D435106');

BA_532 = xlsread('Training Dataset.xlsx','E2:E435106');

BA_1064 = xlsread('Training Dataset.xlsx','F2:F435106');

Reff = xlsread('Training Dataset.xlsx','G2:G435106');

Input(1,:) = EX_355;

Input(2,:) = EX_532;

Input(3,:) = BA_355;

Input(4,:) = BA_532;

Input(5,:) = BA_1064;

Target(1,:) = Reff;

net = feedforwardnet;

net = configure(net,Input,Target);

net = init(net);

inputs = Input;

targets = Target;

hiddenLayerSize = 10;

net = fitnet(hiddenLayerSize);

net.inputs{1}.processFcns = {'removeconstantrows','mapminmax'};

net.outputs{2}.processFcns = {'removeconstantrows','mapminmax'};

net.divideFcn = 'dividerand';

net.divideMode = 'sample';

net.divideParam.trainRatio = 10/100;

net.divideParam.valRatio = 45/100;

net.divideParam.testRatio = 45/100;

net.trainFcn = 'trainlm';

net.performFcn = 'mse';

net.plotFcns = {'plotperform','plottrainstate','ploterrhist', ... 'plotregression', 'plotfit'};

[net,tr] = train(net,inputs,targets);

outputs = net(inputs);

errors = gsubtract(targets,outputs);

performance = perform(net,targets,outputs)

trainTargets = targets .* tr.trainMask{1};

valTargets = targets .* tr.valMask{1};

testTargets = targets .* tr.testMask{1};

net.trainParam.epochs;

net.trainParam.time;

net.trainParam.goal;

net.trainParam.min_grad;

net.trainParam.mu_max;

net.trainParam.max_fail;

net.trainParam.show; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:44:21.700

在“train”之前粘贴这个

```
net.efficiency.memoryReduction = NUMBER; 
```

更改此数字直到代码运行

您可以从 1 递增 --> inf

更多描述可用@http [://www.mathworks.com/help/nnet/ug/train-the-network.html](http://www.mathworks.com/help/nnet/ug/train-the-network.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T05:17:42.740

您可以查看此链接[http://www.mathworks.co.uk/help/nnet/ug/optimize-neural-network-training-speed-and-memory.html](http://www.mathworks.co.uk/help/nnet/ug/optimize-neural-network-training-speed-and-memory.html)

这是来自 MathWorks 的引述：

> 如果正在使用 MATLAB 并且内存限制是一个问题，则所需的临时存储量可以减少 N 倍，以换取对 N 个数据子集的每一个按顺序执行 N 次计算。

```
net2 = train(net1,x,t,'reduction',N); 
```

> 这称为内存减少。

不断增加 N 的值，直到您的代码运行。

# android - 为 android 模拟器构建时的 Titanium 错误

> ID：10170380
> 
> 赞同：0
> 
> 时间：2012-04-16T07:48:28.540
> 
> 标签：android, titanium

我有：

```
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)

Linux falcon 3.2.0-2-amd64 #1 SMP Sun Mar 4 22:48:17 UTC 2012 x86_64 GNU/Linux

Titanium Studio, build: 1.0.9.201202141208
(c) Copyright 2011 by Appcelerator, Inc.  All rights reserved.
Build: jenkins-titanium-rcp-master-138 (origin/master)
Date: 14 February 2012, 12:10:43 
```

安装了最新版本的 android SDK，工具目录添加到我的路径和钛也配置。在钛内部，我尝试了从 2.2 到 3 的 Google API，出现同样的错误。我正在尝试运行示例 Hello World 应用程序。

```
Logfile initialized
[INFO] logfile = ~/Projects/Titanium/Hello World/build.log
[DEBUG] ~/.titanium/mobilesdk/linux/1.8.2/android/builder.py simulator Hello World ~/rootfs/android-sdk-linux ~/Projects/Titanium/Hello World com.me.com.hello.world 5 WVGA854 
[INFO] Building Hello World for Android ... one moment
[INFO] Titanium SDK version: 1.8.2 (02/23/12 17:46 59b3a90)
[DEBUG] Waiting for device to be ready ...
[ERROR] Exception occured while building Android project:
[ERROR] Traceback (most recent call last):
[ERROR]   File "~/.titanium/mobilesdk/linux/1.8.2/android/builder.py", line 2083, in <module>
[ERROR]     s.build_and_run(False, avd_id, debugger_host=debugger_host)
[ERROR]   File "~/.titanium/mobilesdk/linux/1.8.2/android/builder.py", line 1727, in build_and_run
[ERROR]     self.wait_for_device('e')
[ERROR]   File "~/.titanium/mobilesdk/linux/1.8.2/android/builder.py", line 340, in wait_for_device
[ERROR]     devices = self.sdk.list_devices()
[ERROR]   File "~/.titanium/mobilesdk/linux/1.8.2/android/androidsdk.py", line 224, in list_devices
[ERROR]     raise Exception(err)
[ERROR] Exception: ERROR: ld.so: object '/usr/lib/x86_64-linux-gnu/libc/memcpy-preload.so' from /etc/ld.so.preload cannot be preloaded: ignored.
[ERROR] 
```

/etc/ld.so.conf.d/x86_64-linux-gnu.conf 的内容

```
# Multiarch support
/lib/x86_64-linux-gnu
/usr/lib/x86_64-linux-gnu 
```

[编辑]

```
Running android, adb, emulator, etc cause:
ERROR: ld.so: object '/usr/lib/x86_64-linux-gnu/libc/memcpy-preload.so' from /etc/ld.so.preload cannot be preloaded: ignored.
ERROR: ld.so: object '/usr/lib/x86_64-linux-gnu/libc/memcpy-preload.so' from /etc/ld.so.preload cannot be preloaded: ignored. 
```

在cli上。

关于这里可能出现什么问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:59:15.500

似乎，它无法检测到设备（模拟器）本身。如果您尝试在设备上运行，请转到 App Explorer 单击“在设备上运行”选项。或者，如果您尝试使用模拟器，请让应用程序自己启动模拟器，否则请检查 DDMS 是否列出了您的模拟器。如果没有，请杀死 adb 并尝试运行。因为，您的日志说，在实际启动应用程序之前，它不会进入下一步正确找到模拟器/设备......

# c - 具有递归调用的线性搜索算法？

> ID：10170383
> 
> 赞同：1
> 
> 时间：2012-04-16T07:49:08.697
> 
> 标签：c, recursion

我正在做一些练习，以便我可以通过递归的东西。其中之一是我试图用递归重写线性搜索。这里是：

```
int linearSearch(int a[], int n, int key)
{
    if (n < 0 ) 
    {
          return -1;
    }
    if(key == a[n-1])
    {
           return n - 1;
    } 
    linearSearch(a, n-1, key); // Line 1
} 
```

如果没有`return`语句，则代码无法正确执行。我不明白为什么我们需要将`return`语句放在第 1 行？在这种情况下，我们需要递归调用只是为了将 n 减 1 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:50:09.580

```
linearSearch(a, n-1, key); // Line 1 
```

**您应该`return`从递归调用中获取值：**

```
return linearSearch(a, n-1, key); 
```

否则，答案不会冒泡到函数的第一次调用，并且不会作为“答案”返回给原始调用者。

`n-1`返回或-的基本子句`-1`只是将它返回给它们的调用者，这是同一个函数！但如果不从那里返回它，它就永远不会到达原来的调用者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:54:59.277

对于 n = 0 ，以下行可能会崩溃（或产生意外值）：

```
if(key == a[n-1]) 
```

您应该将第一个 if 语句更改为：

```
if (n <= 0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:33:28.713

您不能调用具有某种返回类型的函数而不将其分配给变量。在第 1 行，`linearSearch(a, n-1, key);` 作为函数的语句具有返回类型，因此该语句无效。你应该写`return linearSearch(a, n-1, key);`在第 1 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:40:30.587

想象一下这个功能（也许有帮助）

```
int fortytwo(void) {
    if (0) return 0; /* make the compiler less sad */
    42;
} 
```

# drupal - Drupal 7 中的一页中出现多个轮播的问题

> ID：10170390
> 
> 赞同：0
> 
> 时间：2012-04-16T07:50:06.443
> 
> 标签：drupal, jcarousel

我有一个网站，我需要在同一页面上放置四个不同的轮播。每个轮播都有不同的用途，有不同的物品和不同的样式（高度和宽度）。

我怎样才能完成这项工作？在我看来，该文件可能存在 CSS 冲突问题`jquery.jcarousel.css`。

如何为每个具有相同皮肤的轮播指定两个不同的 CSS 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:06:16.483

问题解决了！我在 Firefox 的 firebug 扩展的帮助下定义了我自己的重写类，并且它起作用了。

# javascript - jQuery：如何在不显示滚动条的情况下滚动正文？

> ID：10170395
> 
> 赞同：1
> 
> 时间：2012-04-16T07:50:33.320
> 
> 标签：javascript, jquery, html, css, scroll

我试图通过使用隐藏文档的滚动条（在某些浏览器中它是 body 元素，在其他浏览器中它是 html 元素）`overflow:hidden;`。然后我使用 jQuery.animate() 来尝试为 scrollTop 属性设置动画。当滚动条可见（即没有`overflow:hidden;`样式）时它工作正常，但当滚动条隐藏时不起作用。这是为什么？稍后我将能够发布指向问题页面快照的链接...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:57:14.580

尝试制作`<body>` `overflow:hidden`和动画`margin-top`属性，如果你想要一个积极的滚动顶部，请注意`margin-top`应该是**消极的。**

在 webkit 上，您可以使用`::-webkit-scrollbar: { display: none; }`启用滚动功能来隐藏滚动条。

# javascript - 是否有一种快捷方式来引用我的 DIV 中的元素？

> ID：10170396
> 
> 赞同：0
> 
> 时间：2012-04-16T07:50:33.280
> 
> 标签：javascript, jquery

我有以下内容：

```
<div class="modal hide fade" id="adminDialog" style="display: none;">
    <div class="modal-header">
        <a data-dismiss="modal" class="close">×</a>
         <h3 id='dialog-heading'></h3>
    </div>
</div> 
```

我创建了这个变量：

```
dialogDiv = $('#adminDialog'); 
```

我想更改标题的文本。如果我想这样做，我需要使用`$('#dialog-heading').text()` 还是有基于 dialogDiv 变量的快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:56:42.820

如果它必须基于 dialogDiv 那么这是我所知道的最好的

```
$("h3", $("#adminDialog")).text('new text'); 
```

或者

```
$("h3", dialogDiv).text('new text'); 
```

这个选择器告诉你**`h3`**在**`#adminDialog`**.

* * *

但是您正在为 div 使用 id，因此没有选择器可以超过直接选择。像

```
$('#dialog-heading').text('new text'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:52:40.447

您可以使用其中一个，`dialogDiv`也可以使用`$('#adminDialog')`它们引用相同的对象。它仅`dialogDiv`在您当前范围内存在时才有效（意思是，如果您已在函数中分配它，则它仅在该函数中可用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:54:23.317

只要您可以`dialogDiv`在当前范围内访问，甚至更喜欢使用`dialogDiv.find("#dialog-heading").text("new text")`它，因为它不必再次遍历整个 DOM，因此性能略高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:57:26.280

这在很大程度上取决于您的需求。

由于您的元素有一个 ID，`$('#dialog-heading')`因此将是访问它的最快方式。

但是，如果您想访问*“`<h3>`内部`#adminDialog`”*，最好使用`adminDialog.find('h3')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T08:08:13.480

假设您的 中只有一个`h3`子元素`div#adminDialog`，您还可以使用 CSS 选择器：

```
$('div#adminDialog h3').text("bla bla") 
```

# php - Preg_match 验证字符串中的特殊字符

> ID：10170400
> 
> 赞同：2
> 
> 时间：2012-04-16T07:50:47.513
> 
> 标签：php, regex, preg-match, sanitization

我只想允许使用字母、数字、空格、无衬线和连字符。

到目前为止，我认为这个 preg_match 可以完成这项工作：

```
if(preg_match('/[^a-z0-9 _]+$/i', $name)) {
$error = "Name may only contain letters, numbers, spaces, \"_\" and \"-\".";
} 
```

但我刚刚意识到字符串中的特殊字符不会产生错误。例如

> 你好”@£$joe

不会产生错误。是否可以进行一些更改并使其正常工作，还是我需要其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:15:26.883

问题出在`$`符号上。您特别要求它匹配字符串的结尾。表达式`/[^a-z0-9 _]+$/i`将不匹配`hello"@£$joe`，因为`joe`匹配`[a-z0-9 _]+$`; 所以当你否定课程时它显然不会匹配。删除`$`符号，一切都会如预期的那样：

```
if(preg_match('/[^a-z0-9 _]+/i', $name)) {
// preg_match will return true if it finds 
// a character *other than* a-z, 0-9, space and _
// *anywhere* inside the string
} 
```

通过将这些行一一粘贴到 JavaScript 控制台中，在浏览器中对其进行测试：

```
/[^a-z0-9 _]+/i.test("@hello");        // true
/[^a-z0-9 _]+/i.test("joe@");          // true
/[^a-z0-9 _]+/i.test("hello\"@£$joe"); // true
/[^a-z0-9 _]+/i.test("hello joe");     // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:53:50.027

您需要将字符类带到`^`外部：

```
if(preg_match('/^[a-z0-9 _]+$/i', $name)) { 
```

一个字符类的`^`内部（在开始时）就像一个字符类的否定符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:43:55.393

拿这个：

```
/^[a-z0-9\s\-_]+$/i 
```

我用虚拟数据测试了这个表达式。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>
function valueanalysis(form){
    var vals = form.vals.value;

    alert(/^[a-z0-9\s\-_]+$/i.test(vals));

    return false;
}
</script>
</head>

<body>
<form onsubmit="return valueanalysis(this);">
<input type="text" name="vals"/>
<input type="submit" value="Check" />
</form>
</body>
</html> 
```

在 html 文件中使用此代码通过填充值来检查验证，然后按 Enter 检查是否为真。

**注意：-** 所有语言的正则表达式都是相同的。

```
<?php

if(preg_match("/^[a-z0-9\s\-_]+$/i","ASDhello-dasd  asddasd_dsad")){
    echo "true";
}
else{
    echo "false";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:55:25.103

```
/^([a-z]|[A-Z]|[0-9]| |_|-)+$/ 
```

使用这个正则表达式

# c# - 如何使用 c# 在 IIS 6 和 IIS 7 中启用 32 位应用程序模式

> ID：10170402
> 
> 赞同：4
> 
> 时间：2012-04-16T07:50:49.273
> 
> 标签：c#, iis-7, iis-6, 32bit-64bit

我想使用 C#更改**Enable32BitAppOnWin64属性。**我知道与**IIS 6**和**IIS 7**交互的方式是不同的。但我需要两个版本的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T11:35:25.113

以编程方式管理 IIS 6 和 IIS 7 存在一些差异。

IIS 6 使用`DirectoryEntry`类和元数据库 API 以编程方式进行管理。

IIS 7 使用`Microsoft.Web.Administration`程序集和`ServerManager`类进行管理。

此外，IIS 6 无法同时运行 64 位和 32 位工作进程（请参阅此[MSDN BLOG](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)）。因此，为 IIS 6 设置`Enable32BitAppOnWin64`为`true`意味着所有工作进程（所有应用程序池）都作为 32 位进程运行。

IIS 7 能够同时运行 64 位和 32 位工作进程。这意味着您`Enable32BitAppOnWin64`为特定应用程序池而不是所有应用程序池设置。

您还必须检测 IIS 的版本才能使用正确的 API。这可以通过从注册表中读取以下 DWORD 值来完成（有关更多信息，请参阅[了解 IIS](http://learn.iis.net/page.aspx/135/discover-installed-components/)）：

```
HKLM\Software\Microsoft\InetStp\MajorVersion and
HKLM\Software\Microsoft\InetStp\MinorVersion 
```

因此，这里有一些`Enable32BitAppOnWin64`为 IIS 6 和 IIS 7 设置的代码（请注意，您必须在 Visual Studio 项目中引用`Microsoft.Web.Administration` 和程序集）：`System.DirectoryServices`

```
private static Version GetIISVerion()
{
  using (RegistryKey inetStpKey = 
    Registry.LocalMachine.OpenSubKey(@"Software\Microsoft\InetStp"))
  {
    int majorVersion = (int)inetStpKey.GetValue("MajorVersion");
    int minorVersion = (int)inetStpKey.GetValue("MinorVersion");

    return new Version(majorVersion, minorVersion);
  }
}

private static void Enable32BitAppOnWin64IIS7(string appPoolName)
{
  Console.Out.WriteLine("Setting Enable32BitAppOnWin64 for {0} (IIS7)", appPoolName);
  using (ServerManager serverMgr = new ServerManager())
  {
    ApplicationPool appPool = serverMgr.ApplicationPools[appPoolName];
    if (appPool == null)
    {
      throw new ApplicationException(String.Format("The pool {0} does not exist", appPoolName));
    }

    appPool.Enable32BitAppOnWin64 = true;
    serverMgr.CommitChanges();
  }
}

private static void Enable32BitAppOnWin64IIS6(string serverName)
{
  Console.Out.WriteLine("Setting Enable32BitAppOnWin64 for IIS6");
  using (DirectoryEntry appPools = 
    new DirectoryEntry(String.Format("IIS://{0}/W3SVC/AppPools", serverName)))
  {
    appPools.Properties["Enable32BitAppOnWin64"].Value = true;

    appPools.CommitChanges();
  }
}    

public static void Enable32BitAppOnWin64(string serverName, string appPoolName)
{
  Version v = GetIISVerion(); // Get installed version of IIS

  Console.Out.WriteLine("IIS-Version: {0}", v);

  if (v.Major == 6) // Handle IIS 6
  {
    Enable32BitAppOnWin64IIS6(serverName);
    return;
  }

  if (v.Major == 7) // Handle IIS 7
  {        
    Enable32BitAppOnWin64IIS7(appPoolName);
    return;
  }

  throw new ApplicationException(String.Format("Unknown IIS version: {0}", v.ToString()));
}

static void Main(string[] args)
{
  Enable32BitAppOnWin64(Environment.MachineName, "DefaultAppPool");
} 
```

我还应该提到，也有可能使用 IIS 7 的元数据库 API。在 Windows Server 2008 操作系统上，您可以安装名为“IIS 6 Management Compatibility”的角色服务。此角色服务使您能够使用“旧”的 IIS 6 API 来管理 IIS 7。

如果您可以选择“IIS 6 管理兼容性”，请`Enable32BitAppOnWin64IIS7`按如下方式更改功能：

```
private static void Enable32BitAppOnWin64IIS7(string serverName, string appPoolName)
{
  Console.Out.WriteLine("Setting Enable32BitAppOnWin64 for {0} (IIS7)", appPoolName);

  using (DirectoryEntry appPools = 
    new DirectoryEntry(String.Format("IIS://{0}/W3SVC/AppPools/{1}", serverName, appPoolName)))
  {
    appPools.Properties["Enable32BitAppOnWin64"].Value = true;

    appPools.CommitChanges();
  }
} 
```

当然，那么您不必引用`Microsoft.Web.Administration`程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:39:00.690

与其试图复制其他人的答案，不如提供一个指向以前的提问者和他们收到的答案的链接。我希望他们有帮助。

[IIS 应用程序池：以编程方式更改设置](https://stackoverflow.com/questions/2154934/iis-application-pool-change-settings-programmatic)

# haskell - 部分应用函数的`seq`

> ID：10170406
> 
> 赞同：5
> 
> 时间：2012-04-16T07:51:13.317
> 
> 标签：haskell, seq

可以说我有以下内容：

```
f :: a -> b -> c
g :: b -> c
g = f 10 
```

现在让我们说`f`实际上是：

```
f x y = f1 x + y 
```

将：

```
g `seq` ... 
```

实际评估`f1 10`，所以稍后运行时

```
g 9 
```

它实际上只是一个简单的添加？

如果没有，有没有办法“评估”部分应用功能的一部分？

我正在寻找一种通用的解决方案，它不依赖于知道如何`f`工作`g`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T08:18:58.260

不，它不会，因为一般来说，右手边的选择`f`可能取决于`y`. 如果您想在对 的`f1 x`调用之间共享结果，`g`则必须这样编写`f`：

```
f x = let z = f1 x in \y -> z + y 
```

当然，由于懒惰，`f1 x`直到第一次`g`调用时才会评估。要对 进行`g `seq` ...`强制评估`f1 x`，您必须编写：

```
f x = let z = f1 x in z `seq` (\y -> z + y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T08:15:49.127

`seq`很浅：

```
Prelude> let f1 = undefined
Prelude> let f = \x -> \y -> f1 x + y
Prelude> let g = f 10
Prelude> g `seq` 1
1
Prelude> g 9
*** Exception: Prelude.undefined
Prelude> 
```

我会看看`Control.DeepSeq`：[http ://hackage.haskell.org/packages/archive/deepseq/1.2.0.1/doc/html/Control-DeepSeq.html](http://hackage.haskell.org/packages/archive/deepseq/1.2.0.1/doc/html/Control-DeepSeq.html)

# python - 在 Python 中查找“主目录”？

> ID：10170407
> 
> 赞同：59
> 
> 时间：2012-04-16T07:51:30.893
> 
> 标签：python, linux

> **可能重复：**
> [如何使用 python 找到真正的用户主目录？](https://stackoverflow.com/questions/2668909/how-to-find-the-real-user-home-directory-using-python)
> [如何在 Python 中获取主目录？](https://stackoverflow.com/questions/4028904/how-to-get-the-home-directory-in-python)

我想访问`/home/weasel`从那里读取一些文件，但我当然不想写完整路径 - 所以其他用户可以使用脚本..你怎么知道你的用户名或你的主目录在 Linux 上的 python ？

谢谢

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-04-16T07:54:27.607

要在 python 中获取 homedir，您可以使用[`os.path.expanduser('~')`](http://docs.python.org/library/os.path.html#os.path.expanduser).

如果它是较长路径的一部分，这也适用，例如`os.path.expanduser('~/some/directory/file.txt')`. 如果路径中没有~，则函数将返回路径不变。

所以取决于你想做什么，它比阅读更好`os.environ['HOME']`

用户名可通过[`getpass.getuser()`](http://docs.python.org/library/getpass.html#getpass.getuser)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-16T07:55:23.427

在 Python 中获取主目录的可移植方式是使用`os.path.expanduser('~')`.

# xcode - 如何在 Xcode 4.3.1 中删除用户定义的构建设置

> ID：10170410
> 
> 赞同：42
> 
> 时间：2012-04-16T07:51:33.167
> 
> 标签：xcode, build-settings

我在 Xcode 4.3.1 中创建了几个用户定义的构建设置。我不再需要这些设置并想删除它们，但似乎没有办法删除它们！

我知道这些存储在 xcodeproj 文件中的项目设置 (project.pbxproj) 文件中。但我不想在文本编辑器中编辑这些内容，因为有各种我不理解的重复和指导。

关于如何在 Xcode 中执行此操作的任何建议？（或者他们忘记添加“删除”按钮）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-16T23:36:34.273

我自己想通了这一点：您需要确保您处于正确的范围内才能删除该设置。如果您在项目范围内定义了设置，那么在查看目标范围时，再多的敲击也不会删除它。请记住，目标从项目范围继承设置。最后一点是我绊倒的:)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-08-23T09:19:16.987

尝试选择您创建的用户定义设置，然后点击键盘上的“删除”按钮。当我遇到同样的问题时，这对我有用。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-27T10:52:10.847

**在 Xcode 6 上**：
选择行并点击`Fn`+ `Delete`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-13T04:39:01.627

请按照以下步骤操作：

1.  选择项目
2.  点击`Info`标签
3.  选择`Configurations`
4.  选择要删除的配置
5.  按下`Delete`键盘上的按钮

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-20T06:25:00.103

删除**用户定义的构建设置**取决于这些设置的创建位置。

假设您已经创建了一个并将其命名为**PROJECT_SETTING**。为了检查您的项目相关**的用户定义设置**，您必须首先在**项目和目标列表**中选择您的项目，然后您应该会看到如下内容：

[![在此处输入图像描述](../Images/c4d859eae8b11e60ba1912251319ee61.png)](https://i.stack.imgur.com/T3W1G.png)

> 在这里您只能**看到与 PROJECT**相关的设置，在这里您只有**编辑/删除 PROJECT_SETTING**的能力。

除此之外，如果您设置了**TARGET**，那么可以在那里添加新**的用户定义设置**，这只影响该**TARGET**范围。

[![在此处输入图像描述](../Images/15fbbc918083d12b0bfc3f84329a1567.png)](https://i.stack.imgur.com/NpfRG.png)

> 您可以在此处**编辑/删除 TARGET_SETTING_1**和**TARGET_SETTING_2**，但 **PROJECT_SETTING**是**只读的**，因为它继承自您的 PROJECT 设置。

在这里，您会注意到您的 TARGET 包含您的 PROJECT **User-Defined 设置**以及标记为**粗体字母的与 TARGET 相关****的 User-Defined 设置**。这有助于您了解可以在此级别上编辑的设置。

 **如果在 PROJECT 范围内创建设置，您将无法在此处删除设置，并且编辑与 PROJECT 相关**的用户定义设置**将导致新创建的设置仅影响选定的目标。

此外，如果您更喜欢**Build Settings**的可见性，您可以选择**Levels**视图而不是**Combined**视图，因此您应该看到它更加分离：

[![在此处输入图像描述](../Images/cd986f05d12ec33744fe765a9040d0db.png)](https://i.stack.imgur.com/T9yeG.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-17T10:49:27.410

选择其中之一，然后按键盘的删除按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-26T03:10:07.127

这些答案有一个警告：如果您使用的是[构建配置文件 (.xcconfig)](https://help.apple.com/xcode/mac/8.3/#/deve97bde215)，则似乎无法直接在“构建设置”中的项目或目标级别上删除从这些文件生成的用户定义设置“图形界面。您必须从配置文件中删除标志及其值并重建项目。如果您使用多个使用相同标志的构建配置文件，则必须从每个文件中删除它们。

尽管来自这些配置文件的设置显示在`User Defined`构建设置部分（就像从 GUI 创建的任何其他用户定义标志一样），但它们不会`.xcodeproj`像从 GUI 添加的设置那样写入文件（这可能会阻止它们从 GUI 中删除）。它们也不会像这些 GUI 添加的设置那样以粗体文本显示。**

# jetty - Jetty 服务器中的端口 (Equinox OSGi )

> ID：10170413
> 
> 赞同：0
> 
> 时间：2012-04-16T07:52:02.190
> 
> 标签：jetty, osgi, equinox

早上好，我正在将 Web 应用程序部署到嵌入 Equinox OSGi 的 Jetty 服务器中。不过，我在 8080 端口工作，但我需要运行两台不同的服务器。然后，启动端口之间的冲突。我想更改其中一台服务器的端口号。有人可以帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:39:15.920

尝试这些系统属性：

> jetty.port=xxxx - 码头特定属性
> 
> org.osgi.service.http.port=xxxx - OSGi HTTP 服务属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T04:04:20.227

如果你在 eclipse 中运行，你可以尝试把它放在你的 VM 参数中

```
-Dorg.osgi.service.http.port=9090 
```

# c++ - 检测 HDMI 电缆何时插入 Desktop Linux

> ID：10170415
> 
> 赞同：1
> 
> 时间：2012-04-16T07:52:17.450
> 
> 标签：c++, linux, qt, hdmi

我需要检测 HDMI 电缆何时插入或拔出。最好是收到通知，但也可以进行轮询。我正在使用 Qt（和 Qt Creator 作为 IDE）。我不需要它是跨平台的，我可以使用特定于操作系统的系统调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:06:49.597

Just from the top of my head: you can write a `udev` rule which sends a message via `dbus` to your application.

# cygwin - Ctrl-c 停止在 cygwin 中工作

> ID：10170416
> 
> 赞同：6
> 
> 时间：2012-04-16T07:52:20.703
> 
> 标签：cygwin, tty, sigint

Ctrl-c (SIGINT/SIGTERM) 在 cygwin 中停止工作。如果我记得，这可能与 TTY 设置有关。请告知如何让它再次工作。我没有故意改变任何东西

stty -a 的输出：

```
$ stty -a
speed 38400 baud; rows 25; columns 80; line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>;
eol2 = <undef>; swtch = ^Z; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R;
werase = ^W; lnext = ^V; flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 -hupcl -cstopb cread -clocal -crtscts
-ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff
-iuclc -ixany -imaxbel
opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
isig icanon iexten echo -echoe -echok -echonl -noflsh -tostop -echoctl -echoke 
```

当按下 ctrl-c 时，cmd 窗口的标题从 Select~ 变为 ~。Ctrl-c 也中断程序执行但不创建新行。

我也在会话 ssh-agent 上运行

我认为这可能会通过重新启动计算机来解决，但如果您有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:28:44.377

当我想关闭在 Cygwin 会话中启动的 Java 进程时，我发现了这个问题，而`Ctrl`+`C`对我不起作用。然后意识到我可以从另一个 Cygwin 会话中终止该进程，即在一个新会话中：

```
ps - ef | grep java
kill -9 <pid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:51:44.077

Reinstalled Cygwin and it works now.

# php - PHP/MySql 字段名称的未定义索引

> ID：10170434
> 
> 赞同：0
> 
> 时间：2012-04-16T07:53:33.707
> 
> 标签：php, mysql

我正在创建自己的博客网站。我似乎无法弄清楚这两天有什么问题。我想要做的是从一个表中获取作者 ID，然后从另一个表中获取作者信息。

```
// Get post author
$post_id = $_GET["view"];
$post_row = mysql_fetch_assoc(mysql_query("SELECT post_author FROM posts WHERE post_id='$post_id'"));
$post_author = $post_row["post_author"];

// Get post author information
$author_row = mysql_fetch_assoc(mysql_query("SELECT id FROM users WHERE id='$post_author'"));
$author_username = $author_row["user_name"];
echo $author_username; 
```

但是，我收到此错误消息，注意：未定义索引：user_name in... 我确定我已正确拼写字段名称。代码的第一部分没有任何问题。第二部分有什么问题吗？那里完全一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:55:00.587

你做

```
SELECT id 
```

但是然后你寻找那一行`user_name`。它不存在，因此您会收到索引不存在的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:56:00.697

您正在查询中选择列`id`，但随后您正在使用`$author_row["user_name"]`. 将其更改为`$author_row["id"]`或`SELECT user_name`在您的查询中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:56:28.900

您仅从`id`数据库中选择字段。`user_name`不存在，因为您尚未选择它。

```
$author_row = mysql_fetch_assoc(mysql_query("SELECT id, user_name FROM users WHERE id='$post_author'")); 
```

调试提示：在这种情况下，请务必`print_r( $author_row )`查看查询实际返回的内容。在这种情况下不适用，但同样重要的是`echo mysql_error()`要检查查询本身没有错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:58:58.817

```
$author_row = mysql_fetch_assoc(mysql_query("SELECT * FROM users WHERE id='$post_author'")); 
```

使用此查询获取用户的所有信息。

# fetch - rrdtool 获取输出

> ID：10170438
> 
> 赞同：2
> 
> 时间：2012-04-16T07:53:56.967
> 
> 标签：fetch, rrdtool, wc

我想从 rrd 数据库中获取最近 7 天的平均读数。我正在使用 rrdtool fetch 来计算平均值。我运行了以下命令：

```
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -1days -e now | wc -l
291
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -2days -e now | wc -l
579
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -3days -e now | wc -l
126
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -4days -e now | wc -l
167
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -5days -e now | wc -l
208
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -6days -e now | wc -l
249
> rrdtool fetch  /var/www/cloudrrd1/Divya.rrd AVERAGE -r 300 -s -7days -e now | wc -l
291 
```

我对读数的数量感到困惑。它不应该总是随着数量的增加而增加吗？天？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:17:55.240

rrdtool fetch 倾向于覆盖范围匹配而不是分辨率匹配。因此，如果只有较低分辨率的 rra 将涵盖请求的时间跨度，rrdtool 将为您提供此信息，从而返回更少的结果......检查答案第一列中的时间戳。

# windows-xp - Flash 电影像慢动作一样播放

> ID：10170446
> 
> 赞同：0
> 
> 时间：2012-04-16T07:54:39.927
> 
> 标签：windows-xp, browser, flash

所有 Flash 电影都像慢动作一样播放...我重新安装了 Windows 但又发生了这种情况..我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:52:08.897

问题很可能是您的 Flash 版本。自从我升级它以来，我一直在发生同样的事情，所以请尝试使用早期版本。当然，解决问题的最佳方法是阻止所有人在 Flash 中分发视频内容。它不是视频播放器，从来没有，也永远不会。它消耗的资源至少是一个好的视频播放器的 5 倍，所以如果你像我一样有一台旧电脑，它有时会让网站变得很慢。

# android - Layouttrouble 扩展 tablerow 和膨胀 xml tablerow

> ID：10170447
> 
> 赞同：2
> 
> 时间：2012-04-16T07:54:43.570
> 
> 标签：android, android-layout

我非常接近于选择一个 LinearLayout 替代方案，但是如果没有做到这一点会让人很恼火。为了获得最大的灵活性，我定义了一个 TableLayout xml，只定义了一个行标题。接下来，我生成了一个单独的 TableRow xml，定义了“行模板”。在 Javacode 中，我对 TableRow 进行了子类化，在构造函数中，我膨胀了 tablerow 模板以附加到根（子类）。

嗯，到目前为止还不错。当表格被填充时，标题行是好的，但其他行不是。似乎它们以不同的方式布局，两列没有按预期填充整个宽度，因此这些列没有正确对齐。

任何人都可以阐明这一点？我已经尝试了很多解决方案，但没有任何办法使它起作用。

带有标题行的表格布局

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true" >

        <TableLayout
            android:id="@+id/zone_table"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:stretchColumns="*" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="fill_horizontal"
                android:clipToPadding="false" >

                <TextView
                    android:layout_width="0dip"
                    android:layout_weight="0.8"
                    android:background="#ffcccccc"
                    android:text="Zonename"
                    android:textColor="@android:color/black" />

                <TextView
                    android:layout_width="0dip"
                    android:layout_weight="0.2"
                    android:background="#ffcccc00"
                    android:gravity="right"
                    android:text="Antall"
                    android:textColor="@android:color/black" />
            </TableRow>
        </TableLayout>
    </HorizontalScrollView>

</ScrollView> 
```

“其他”膨胀的行

```
 <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/zonetablerow"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
>

    <TextView
        android:id="@+id/zonerow_name"
        android:layout_width="0dip"
        android:layout_weight="0.8"
        android:background="#ffcccccc"
        android:textSize="18dp" />

    <TextView
        android:id="@+id/zonerow_invcount"
        android:layout_width="0dip"
        android:layout_gravity="right"
        android:layout_weight="0.2"
        android:background="#ffcccc00"
        android:textSize="18dp" />

</TableRow> 
```

扩展 TableRow 的类

```
 public class ZoneRow extends TableRow {
    private ZoneInventoryDAO dao = null;
    private int inventoryCount = 0;

    public ZoneRow(Context ctx, ZoneInventoryDAO dao) {
        this(ctx, dao, 0);
    }

    public ZoneRow(Context ctx, ZoneInventoryDAO dao, int inventoryCount) {
        super(ctx);
        setWeightSum(1.0f);
        this.dao = dao;
        this.inventoryCount = inventoryCount;
        doLayout();
    }

    private void doLayout() {
        // XML layouten settes med zonerow som parent (se:
        // http://developer.android.com/resources/articles/layout-tricks-merge.html)
        View v = LayoutInflater.from(getContext()).inflate(R.layout.zonerow,
                this, true);
        TextView t = (TextView) findViewById(R.id.zonerow_name);
        TextView cnt = (TextView) findViewById(R.id.zonerow_invcount);

        t.setText(dao.getZoneAlias());
        cnt.setText(String.valueOf(inventoryCount));

    }

    public void incInventory() {
        inventoryCount++;
    }

    public ZoneInventoryDAO getDAO() {
        return dao;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T23:15:21.520

我有同样的问题。我通过不这样做来修复它 - 特别是通过不继承 TableRow，而只是在代码中实例化它们并手动应用我需要的任何东西。您可以通过封装来做到这一点。有一些记录有 ZoneInventoryDAO、inventoryCount 和 tableRow，它们指向对应的 TableRow 实例。只需用通货膨胀实例化 TableRow：

```
TableLayout table = (TableLayout) inflater.inflate(R.layout.my_table, null); // etc
...
for (//each data item//) {
  TableRow tr = (TableRow) inflater.inflate(R.layout.my_table_row, null);
  TextView tv1 = (TextView) findViewById(R.id.table_entry_1);
  tv1.setText("Whatever goes here");
  ...
  // and so on for each column
  table.addView(tr);
} 
```

当将相同的代码移动到扩展 TableRow 的类中时，上述方法对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:23:02.380

看起来您正在扩展 tablerow 并创建该对象的实例。这将导致创建一个表行。然后你正在膨胀另一个 tablerow，它出于某种原因与第一个交互。要快速修复，请尝试添加类似 table.setColumnStretchable(0, true);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T17:24:13.270

我知道这是旧的，但我有同样的问题，并想通了，所以也许这会帮助未来的用户。

问题是，当您从 XML 扩展 TableRow 并将其添加到扩展的 TableRow 中时，Table 将其视为具有多个子项的单列，因为您的布局中的 TableRow 本质上是一个 ViewGroup。因此，它将表格布置为单列表格。

解决方案是在 TableRow XML 布局中，使用`<merge>`类型，而不是`<TableRow>`类型。这样，当膨胀时，您的 xml 中的项目将被合并到您的扩展 TableRow 中，并且您的扩展 TableRow 将有多个列。

这是示例代码

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/zonetablerow"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
>

    <TextView
        android:id="@+id/zonerow_name"
        android:layout_width="0dip"
        android:layout_weight="0.8"
        android:background="#ffcccccc"
        android:textSize="18dp" />

    <TextView
        android:id="@+id/zonerow_invcount"
        android:layout_width="0dip"
        android:layout_gravity="right"
        android:layout_weight="0.2"
        android:background="#ffcccc00"
        android:textSize="18dp" />

</merge> 
```

# c# - 如何从另一个线程调用 UI 方法

> ID：10170448
> 
> 赞同：25
> 
> 时间：2012-04-16T07:54:48.163
> 
> 标签：c#, .net, multithreading, winforms, timer

与计时器一起玩。上下文：带有两个标签的winforms。

我想看看是如何`System.Timers.Timer`工作的，所以我没有使用表单计时器。我知道表单和 myTimer 现在将在不同的线程中运行。`lblValue`有没有一种简单的方法可以用以下形式表示经过的时间？

[我在MSDN](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx)上看过这里，但有没有更简单的方法！

这是winforms代码：

```
using System.Timers;

namespace Ariport_Parking
{
  public partial class AirportParking : Form
  {
    //instance variables of the form
    System.Timers.Timer myTimer;
    int ElapsedCounter = 0;

    int MaxTime = 5000;
    int elapsedTime = 0;
    static int tickLength = 100;

    public AirportParking()
    {
        InitializeComponent();
        keepingTime();
        lblValue.Text = "hello";
    }

    //method for keeping time
    public void keepingTime() {

        myTimer = new System.Timers.Timer(tickLength); 
        myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed);

        myTimer.AutoReset = true;
        myTimer.Enabled = true;

        myTimer.Start();
    }

    void myTimer_Elapsed(Object myObject,EventArgs myEventArgs){

        myTimer.Stop();
        ElapsedCounter += 1;
        elapsedTime += tickLength; 

        if (elapsedTime < MaxTime)
        {
            this.lblElapsedTime.Text = elapsedTime.ToString();

            if (ElapsedCounter % 2 == 0)
                this.lblValue.Text = "hello world";
            else
                this.lblValue.Text = "hello";

            myTimer.Start(); 

        }
        else
        { myTimer.Start(); }

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-16T08:15:57.193

我猜你的代码只是一个测试，所以我不会讨论你用计时器做什么。这里的问题是如何在定时器回调中使用用户界面控件做一些事情。

Most of `Control`'s methods and properties can be accessed only from the UI thread (in reality they can be accessed only from the thread where you created them but this is another story). This is because each thread has to have its own message loop (`GetMessage()` filters out messages by thread) then to do something with a `Control` you have to dispatch a message from your thread to the *main* thread. In .NET it is easy because every `Control` inherits a couple of methods for this purpose: `Invoke/BeginInvoke/EndInvoke`. To know if executing thread must call those methods you have the property `InvokeRequired`. Just change your code with this to make it works:

```
if (elapsedTime < MaxTime)
{
    this.BeginInvoke(new MethodInvoker(delegate 
    {
        this.lblElapsedTime.Text = elapsedTime.ToString();

        if (ElapsedCounter % 2 == 0)
            this.lblValue.Text = "hello world";
        else
            this.lblValue.Text = "hello";
    }));
} 
```

Please check MSDN for the list of methods you can call from any thread, just as reference you can always call `Invalidate`, `BeginInvoke`, `EndInvoke`, `Invoke` methods and to read `InvokeRequired` property. In general this is a common usage pattern (assuming `this` is an object derived from `Control`):

```
void DoStuff() {
    // Has been called from a "wrong" thread?
    if (InvokeRequired) {
        // Dispatch to correct thread, use BeginInvoke if you don't need
        // caller thread until operation completes
        Invoke(new MethodInvoker(DoStuff));
    } else {
        // Do things
    }
} 
```

Note that current thread will block until UI thread completed method execution. This may be an issue if thread's timing is important (do not forget that UI thread may be busy or hung for a little). If you don't need method's return value you may simply replace `Invoke` with `BeginInvoke`, for WinForms you don't even need subsequent call to `EndInvoke`:

```
void DoStuff() {
    if (InvokeRequired) {
        BeginInvoke(new MethodInvoker(DoStuff));
    } else {
        // Do things
    }
} 
```

If you need return value then you have to deal with usual `IAsyncResult` interface.

## How it works?

A GUI Windows application is based on the window procedure with its message loops. If you write an application in plain C you have something like this:

```
MSG message;
while (GetMessage(&message, NULL, 0, 0))
{
    TranslateMessage(&message);
    DispatchMessage(&message);
} 
```

With these few lines of code your application wait for a message and then delivers the message to the window procedure. The window procedure is a big switch/case statement where you check the messages (`WM_`) you know and you process them somehow (you paint the window for `WM_PAINT`, you quit your application for `WM_QUIT` and so on).

Now imagine you have a working thread, how can you *call* your main thread? Simplest way is using this underlying structure to do the trick. I oversimplify the task but these are the steps:

*   Create a (thread-safe) queue of functions to invoke (some examples [here on SO](https://stackoverflow.com/questions/10717344/c-sharp-creating-function-queue/10717390#10717390)).
*   Post a custom message to the window procedure. If you make this queue a priority queue then you can even decide priority for these calls (for example a progress notification from a working thread may have a lower priority than an alarm notification).
*   In the window procedure (inside your switch/case statement) you *understand* that message then you can peek the function to call from the queue and to invoke it.

Both WPF and WinForms use this method to deliver (dispatch) a message from a thread to the UI thread. Take a look to [this article on MSDN](http://msdn.microsoft.com/en-us/library/ms810439.aspx) for more details about multiple threads and user interface, WinForms hides a lot of these details and you do not have to take care of them but you may take a look to understand how it works under the hood.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-19T22:20:34.127

Personally when I work in an application that works with threads out of the UI one, I usually write this little snippet:

```
private void InvokeUI(Action a)
{
    this.BeginInvoke(new MethodInvoker(a));
} 
```

When I do an async call in a different thread I can always callback using:

```
InvokeUI(() => { 
   Label1.Text = "Super Cool";
}); 
```

Simple and clean.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:37:53.703

As asked, here is my answer that checks for cross thread calls, synchronises variable updates, doesen't stop and start the timer and doesn't use the timer for counting elapsed time.

**EDIT** fixed `BeginInvoke` call. I've done the cross thread invoke using a generic `Action`, This allows the sender and eventargs to be passed. If these are unused (as they are here) it is more efficient to use `MethodInvoker` but I suspect the handling would need to be moved into a parameterless method.

```
public partial class AirportParking : Form
{
    private Timer myTimer = new Timer(100);
    private int elapsedCounter = 0;
    private readonly DateTime startTime = DateTime.Now;

    private const string EvenText = "hello";
    private const string OddText = "hello world";

    public AirportParking()
    {
        lblValue.Text = EvenText;
        myTimer.Elapsed += MyTimerElapsed;
        myTimer.AutoReset = true;
        myTimer.Enabled = true;
        myTimer.Start();
    }

    private void MyTimerElapsed(object sender,EventArgs myEventArgs)
    {
        If (lblValue.InvokeRequired)
        {
            var self = new Action<object, EventArgs>(MyTimerElapsed);
            this.BeginInvoke(self, new [] {sender, myEventArgs});
            return;   
        }

        lock (this)
        {
            lblElapsedTime.Text = DateTime.Now.SubTract(startTime).ToString();
            elapesedCounter++;
            if(elapsedCounter % 2 == 0)
            {
                lblValue.Text = EvenText;
            }
            else
            {
                lblValue.Text = OddText;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T08:17:43.087

First, in Windows Forms (and most frameworks), a control can only be accessed (unless documented as "thread safe") by the UI thread.

So `this.lblElapsedTime.Text = ...` in your callback is plain wrong. Take a look at [Control.BeginInvoke](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx).

Second, You should use [System.DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx) and [System.TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx) for your time computations.

Untested:

```
DateTime startTime = DateTime.Now;

void myTimer_Elapsed(...) {
  TimeSpan elapsed = DateTime.Now - startTime;
  this.lblElapsedTime.BeginInvoke(delegate() {
    this.lblElapsedTime.Text = elapsed.ToString();
  });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:12:48.103

Ended up using the following. It's a combination of the suggestions given:

```
using System.Timers;

namespace Ariport_Parking
{
  public partial class AirportParking : Form
  {

    //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    //instance variables of the form
    System.Timers.Timer myTimer;

    private const string EvenText = "hello";
    private const string OddText = "hello world";

    static int tickLength = 100; 
    static int elapsedCounter;
    private int MaxTime = 5000;
    private TimeSpan elapsedTime; 
    private readonly DateTime startTime = DateTime.Now; 
    //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

    public AirportParking()
    {
        InitializeComponent();
        lblValue.Text = EvenText;
        keepingTime();
    }

    //method for keeping time
    public void keepingTime() {

    using (System.Timers.Timer myTimer = new System.Timers.Timer(tickLength))
    {  
           myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed);
           myTimer.AutoReset = true;
           myTimer.Enabled = true;
           myTimer.Start(); 
    }  

    }

    private void myTimer_Elapsed(Object myObject,EventArgs myEventArgs){

        elapsedCounter++;
        elapsedTime = DateTime.Now.Subtract(startTime);

        if (elapsedTime.TotalMilliseconds < MaxTime) 
        {
            this.BeginInvoke(new MethodInvoker(delegate
            {
                this.lblElapsedTime.Text = elapsedTime.ToString();

                if (elapsedCounter % 2 == 0)
                    this.lblValue.Text = EvenText;
                else
                    this.lblValue.Text = OddText;
            })); 
        } 
        else {myTimer.Stop();}
      }
  }
} 
```

# c# - 如何将页面从 file2.pdf 附加到 file1.pdf

> ID：10170454
> 
> 赞同：0
> 
> 时间：2012-04-16T07:55:10.597
> 
> 标签：c#, append, itextsharp

如何使用（C#）itextsharp
插入页面方法从 file2.pdf 附加 file1.pdf 中的所有页面。请提供示例代码。我在 itext pdf 上找到了此代码，请提供适用于 c# 的示例代码

```
 ColumnText ct = new ColumnText(null);
while (rs.next()) {
ct.addElement(new Paragraph(24,
new Chunk(rs.getString("country"))));
}
PdfReader reader = new PdfReader(src);
PdfReader stationery = new PdfReader(Stationery.STATIONERY);
PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));
PdfImportedPage page = stamper.getImportedPage(stationery, 1);
int i = 0;
while(true) {
stamper.insertPage(++i, reader.getPageSize(1));
stamper.getUnderContent(i).addTemplate(page, 0, 0);
ct.setCanvas(stamper.getOverContent(i));
ct.setSimpleColumn(36, 36, 559, 770);
if (!ColumnText.hasMoreText(ct.go()))
break;
}
stamper.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:53:59.680

查看[Simple .NET PDF Merger](http://www.codeproject.com/Articles/28283/Simple-NET-PDF-Merger)文章。

> 呈现的 PDF 合并使用开源 PDF 库 iTextSharp 来处理 PDF 文件。

# iis - 存在 SSL 问题的 Azure

> ID：10170462
> 
> 赞同：1
> 
> 时间：2012-04-16T07:55:44.597
> 
> 标签：iis, ssl, https, azure, ssl-certificate

我刚刚为一个停放的域购买了一个 SSL 证书，我将用它来将用户重新定向到我的 azure Web 服务。问题是，当我将用户重新定向到 azure webservice 时，证书对该页面无效，我想这是因为它是发给我的停放域的。但是我为我的停放域发布它的唯一原因是因为无法为 azure webservice 注册 SSL 证书，因为当您注册证书时，您必须验证您的域，因此也需要访问电子邮件地址由 SSL manifactor 提供。而manifactors呈现的电子邮件也是只有微软才能访问的那些电子邮件。

**所以，这就是我想要的（不是真实的地址）：**

用户访问**www.helloworld.net** ---> 用户使用有效的 SSL 证书连接到**www.helloworld.net ---> 用户立即被重定向到****helloworld.cloudapp.net** ---> 用户连接到**helloworld.cloudapp .net**使用相同的 SSL 证书

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:58:43.473

要完成这项工作，您不应使用重定向，而应使用 CNAME。

资源：

*   [http://blog.smarx.com/posts/custom-domain-names-in-windows-azure](http://blog.smarx.com/posts/custom-domain-names-in-windows-azure)
*   [http://blogs.msdn.com/b/benjguin/archive/2012/04/15/how-to-request-buy-a-certificate-and-use-it-in-windows-azure-comment-demander- acheter-un-certificat-et-l-utiliser-dans-windows-azure.aspx](http://blogs.msdn.com/b/benjguin/archive/2012/04/15/how-to-request-buy-a-certificate-and-use-it-in-windows-azure-comment-demander-acheter-un-certificat-et-l-utiliser-dans-windows-azure.aspx)

# javascript - 使 DIV 向上显示 onClick

> ID：10170463
> 
> 赞同：2
> 
> 时间：2012-04-16T07:55:48.017
> 
> 标签：javascript, jquery, html, css, onclick

我找到了一个向上显示 DIV 的主题，但由于我不是 Javascript 专家，我想知道如何使这项工作在点击而不是悬停上工作？

以防万一，上一个主题的链接是：[How to make jQuery animate up up](https://stackoverflow.com/questions/2468051/how-to-make-jquery-animate-upwards)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:02:01.323

这是一个示例**[演示](http://jsfiddle.net/WAdFp/4/)**

```
$("#slideToggle").click(function () {
   $('.slideTogglebox').slideToggle();
});

$("#reset").click(function(){
    location.reload();
}); 
```

​ HTML：

```
 <button id=slideToggle>slide</button>
    <br/>
    <div class="slideTogglebox">
         slideToggle()
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:01:42.147

```
 $(document).ready(function() {
   var isClicked = false; //assuming its closed but its just logic
    $('.button').click(function() {
        if (isClicked) {
            isClicked = true;
            $(this).closest('div').animate({
            height: "150px",
        }, 400, "swing");
        }
        else
        {
            isClicked = false;
            $(this).closest('div').animate({
                height: "50px",
            }, 400, "swing");
        }
    });
 }); 
```

无论如何，这是一种非常糟糕的方式。您应该考虑尝试改用 CSS3，然后使用[jQueries toggleClass](http://api.jquery.com/toggleClass/)

```
.toggleClass('animateUpwards) 
```

让浏览器使用硬件功能来动画所有的东西，它也是 JavaScript 中的一个很好的衬线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:01:45.097

尝试[jQuery slideUp](http://api.jquery.com/slideUp)或其他地方发布的[jQuery slideToggle](http://api.jquery.com/slideToggle/) - 或者 CSS3[示例](http://css3.bradshawenterprises.com/)

或者从您发布的问题中，也许这就是您的意思：

[http://jsbin.com/ogaje](http://jsbin.com/ogaje)

单击 div 的（可见部分）

```
$(document).ready(function() {
  $('.featureBox').toggle(function() {
    $(this).animate({top: '-390px', height:'540px'},{duration:'slow', queue:'no'});
    // or $(this).slideUp()
  },
  function() {
    $(this).animate({top: '0px', height:'150px'},{duration:'slow', queue:'no'});
    // or $(this).slideDown()
  });
}); 
```

点击其他东西

```
$(document).ready(function() {
  $("#button").toggle(function() {
    $("#someDiv").animate({top: '-390px', height:'540px'},{duration:'slow', queue:'no'});
    // or $("#someDiv").slideUp()
  },
  function() {
    $("#someDiv").animate({top: '0px', height:'150px'},{duration:'slow', queue:'no'});
    // or $("#someDiv").slideDown()
  });
}); 
```

# android - 在从传感器读取任何值之前检查传感器是否受支持是否重要？

> ID：10170473
> 
> 赞同：0
> 
> 时间：2012-04-16T07:56:33.580
> 
> 标签：android, sensors

我正在开发一个主要基于传感器的应用程序。

我只想知道在从传感器获取值之前检查传感器是否受支持是否重要？执行此类检查的最佳方法是什么？

举个例子：1-在从传感器读取任何值之前，是否应该编写以下代码作为初步步骤？

2-有没有更好的方法来做这样的检查？

**示例代码**：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sensorssystemservice);

    getDefaultSensor();
    if (registerSensors() !=null) ) {
      //....
     //.....
}

private void getDefaultSensor() {
    sm=(SensorManager)getSystemService(SENSOR_SERVICE);        
    mAccelerometer = sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
           }
private boolean registerSensor() {
     return sm.registerListener(this, mAccelerometer,SensorManager.SENSOR_DELAY_NORMAL); 
```

}'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:52:53.453

我不确定当您尝试在尚未找到的传感器上注册侦听器时最终是否会出错，但为了避免任何问题，您最好检查它们的可用性。这也为您提供了一个“更干净”的代码。

当涉及到方法时，您可以使用 getSensorList 方法：[getSensorList](http://developer.android.com/reference/android/hardware/SensorManager.html#getSensorList%28int%29)。

您首先能够知道设备是否拥有多个与某种类型关联的传感器，并且您可以简单地检查其中一个列表元素是否具有您需要的类型。那张支票会带你几行。

# iphone - 字体未在 XCode 中加载

> ID：10170476
> 
> 赞同：1
> 
> 时间：2012-04-16T07:56:54.440
> 
> 标签：iphone, objective-c, xcode, fonts, uifont

好吧，我想将新字体导入我的应用程序，但没有成功。我的 .plist 中有应用程序键提供的字体，项目 0 中的字体为字符串，值为 AdelleBasic_Bold.otf，我已将该字体添加到我的项目中，我正在尝试将其用于：

```
_myTextField.font = [UIFont fontWithName:@"Adelle Basic" size:15]; 
```

当我打开它时，Adelle Basic 是字体的标题。我也试过没有任何成功：

```
_myTextField.font = [UIFont fontWithName:@"AdelleBasic_Bold" size:15]; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T08:08:13.157

这可能不适用于所有字体，但根据我的经验，Xcode 可能很挑剔，而且我从来没有能够让它使用 otf 字体（任何有请发帖的人！），所以我总是转换我的字体使用这个非常棒的网站 -[在线字体转换器](http://onlinefontconverter.com/)

我将它们转换为 ttf 字体，它们似乎总是可以正常工作 - 确保使用确切的名称（更改字体的文件名似乎也停止了它的工作）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-17T17:45:31.257

以下是将字体添加到 XCODE 应用程序的正确方法（.otf 字体可以正常工作）：

1.  在你的 XCode 项目中包含你的字体
2.  确保它们包含在目标中
3.  仔细检查您的字体是否作为资源包含在您的捆绑包中
4.  在您的应用程序列表中包含您的 iOS 自定义字体
5.  查找字体名称

学分和更好的解释与图像[在这里](http://codewithchris.com/common-mistakes-with-adding-custom-fonts-to-your-ios-app/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:16:44.363

您只能使用具有 ttf 扩展名的第三方字体，而具有 otf 扩展名的字体将无法有效工作，并且大多数情况下都无法使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-10T14:04:58.533

除了确保这 5 点之外，您还可以尝试以下打印出已安装字体的代码片段：

```
for (NSString* family in [UIFont familyNames])
{   
    NSLog(@"%@", 家庭)       
    for (NSString* name in [UIFont fontNamesForFamilyName: family])
    {
        NSLog(@" %@", 名称);
    }
}
```

如果您要使用的字体未列出，那么您错过了 5 个步骤中的一些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-22T06:51:42.597

我只是将字体添加到项目中，检查字体是否会在包中复制。在我的 Mac 上设置它并直接使用 Interface Builder 中的字体。如果您有任何[问题，请在此处解决](http://codewithchris.com/common-mistakes-with-adding-custom-fonts-to-your-ios-app/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T19:22:07.533

我看过一些关于 tff 和 otf 的评论，我不同意，这可能是你没有使用正确的字体名称，这并不意味着文件名可以找到你在 xcode 中安装的字体运行

```
 for family: String in UIFont.familyNames{
                print(family)
                for names: String in UIFont.fontNames(forFamilyName: family){
                    print("== \(names)")
                }
            } 
```

# c - C - sscanf 可以从它写入的相同字符串中读取吗？

> ID：10170478
> 
> 赞同：1
> 
> 时间：2012-04-16T07:57:07.887
> 
> 标签：c, string

我有以下代码

```
int myInt;
sscanf(str, "%d=%s", &myInt, str); 
```

这会有效吗？如果我把它放在一个循环中，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:11:23.913

我的猜测是，这通常会起作用，因为源字符串似乎总是 >= 结果字符串，这似乎会导致确定性和指定的结果。

但我还是不会这样做。库函数通常具有`restrict`-qualified 参数，以允许优化和预取。

不要诱惑编译器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:18:11.197

您可以利用 %n 转换规范 -*到目前为止读取的字符；需要 int* 参数*。[CStdLib.html#fscanf](http://www.utas.edu.au/infosys/info/documentation/C/CStdLib.html#fscanf)

值得注意。标准说，大约**%n**：

*   不消耗任何输入。
*   相应的参数应该是一个指向有符号整数的指针。
    *   ***到目前为止***读取的字符数写入其中。
*   不增加完成***时***返回的分配计数。
*   如果包含分配抑制字符或字段宽度，则行为未定义。

^(参考。ISO/IEC 9899:1999 §7.19.6.2)

作为概念：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    int n;
    char *str = "12345=blabla 1313=blah "
                "333=hello 343=goodbyeeeeeeeeeeeeeeeeeeeeeeeeeeee";
    char buf[15];
    int lt;

   /*                        +----- limit read to buffer length -1
                             |                +--- store read length here
                             |                |                        */
    while (sscanf(str, "%d=%14s%n", &n, buf, &lt) == 2) {
        fprintf(stdout,                   
            ":: '%s' :: \n"
            "Num: %d\n"
            "Str: %s\n"
            "Tot: %d bytes\n\n",
            str,
            n, buf,
            lt);
         str += lt;
    }

    return 0;
} 
```

应该给出类似（过长的 %s 输入中断循环）：

```
:: '12345=blabla 1313=blah 333=hello 343=goodbyeeeeeeeeeeeeeeeeeeeeeeeeeeee' :: 
Num: 12345
Str: blabla
Tot: 12 bytes

:: ' 1313=blah 333=hello 343=goodbyeeeeeeeeeeeeeeeeeeeeeeeeeeee' :: 
Num: 1313
Str: blah
Tot: 10 bytes

:: ' 333=hello 343=goodbyeeeeeeeeeeeeeeeeeeeeeeeeeeee' :: 
Num: 333
Str: hello
Tot: 10 bytes

:: ' 343=goodbyeeeeeeeeeeeeeeeeeeeeeeeeeeee' :: 
Num: 343
Str: goodbyeeeeeeee
Tot: 19 bytes 
```

人们希望如何处理输入比缓冲区更长的时间可能很多。即检查是否有eof `str`，如果没有重新分配。从长度 = str 等的缓冲区开始。

请注意，数字 > INT_MAX 或 < INT_MIN 是未定义的行为 ()。使用“%d”规范时（通常？）会分别被截断为 INT_MAX 或 INT_MIN。

IE：

```
"1234533333333333333=blabla", read by "%d%s" =>

Num: 2147483647
Str: blabla
Tot: 26 bytes consumed 
```

解决此问题的一种方法是使用`strtol`etc.，如果 number 为 > limit 则定义为将 value 设置为 type 和 set 的 MAX 值`errno = ERANGE`。[CStdLib.html#strtol](http://www.utas.edu.au/infosys/info/documentation/C/CStdLib.html#strtol)

# unit-testing - 当 Struts 1.3 动作从 JNDI 资源中获取协作者时，有什么好的方法来测试它们？

> ID：10170480
> 
> 赞同：1
> 
> 时间：2012-04-16T07:57:17.000
> 
> 标签：unit-testing, jakarta-ee

我正在开发一个涉及 Struts 1.3、一些会话 bean 和一些 EJB 的 Web 应用程序。

Struts 动作类执行 JNDI 查找以获取实现应用程序服务层的无状态会话 bean。这个会话 bean 反过来与 DAO 对象对话，这些对象也是无状态会话 bean，它们与实体对话。

Struts Action -> Service (stateless session bean) -> DAO (stateless session bean) -> Entity

我正在考虑几种方法，需要帮助来了解它们的优缺点。

1.  我正在考虑创建一个 ServiceFactory 和一个 ServiceFactoryProvider。测试用例将重新配置 ServiceFactoryProvider 以返回一个 TestServiceFactory ，它将产生实现服务层的无状态会话 bean 的模拟。

2.  另一种方法是覆盖测试用例中的 JNDI 目录，以便正常的 JNDI 查找获取模拟对象。

3.  第三种方法是使用指定 ServiceFactory 的完全限定名称的属性文件。对于生产代码，此文件将包含生产工厂的名称，对于测试代码，我们将在测试类路径中有另一个文件，其中包含测试工厂的名称。

# android - 改变方向后装载机无法重新启动

> ID：10170481
> 
> 赞同：9
> 
> 时间：2012-04-16T07:57:17.903
> 
> 标签：android

我想用一个演示来展示这一点：

```
enter code here
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(buttonClickListener);
}

private OnClickListener buttonClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        startMyLoader();
    }

};

private void startMyLoader() {
    getLoaderManager().destroyLoader(0);
    getLoaderManager().restartLoader(0, null, myLoaderListener);
}

/**
 * The listener for the group metadata loader.
 */
private final LoaderManager.LoaderCallbacks<Cursor> myLoaderListener 
    = new LoaderCallbacks<Cursor>() {

    @Override
    public CursorLoader onCreateLoader(int id, Bundle args) {
        return new CursorLoader(LoaderDemoActivity.this, 
        ContactsContract.Contacts.CONTENT_URI, 
        null, null, null, null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        cursor.moveToPosition(-1);
        if (cursor.moveToNext()) {
            Context context = getApplicationContext();
            CharSequence text = "Load finished!";
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
        }
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
    }
};
enter code here 
```

方向改变后，点击按钮，可以调用onCreateLoader，但不会调用onLoadFinished。

似乎很奇怪。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T08:48:31.157

我遇到了同样的问题。请尝试在 onCreate 中调用 this.getSupportLoaderManager()。它解决了我的问题。希望它也能帮助你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T04:18:31.593

我想我找到了原因。

在 Activity onCreate 中，它将从 NonConfigurationInstances 加载所有 LoaderMangers（它自己的或它的子 Fragments）。

```
 if (mLastNonConfigurationInstances != null) {
        mAllLoaderManagers = mLastNonConfigurationInstances.loaders;
    } 
```

而在Activity onStart 中，它会尝试启动自己的LoaderManger。

```
 if (!mLoadersStarted) {
        mLoadersStarted = true;
        if (mLoaderManager != null) {
            mLoaderManager.doStart();
        } else if (!mCheckedForLoaderManager) {
            mLoaderManager = getLoaderManager(-1, mLoadersStarted, false);
        }
        mCheckedForLoaderManager = true;
    } 
```

但是配置更改后，mLoaderManager == null，所以它不会启动它。这就是问题所在！如果你尝试启动属于这个loaderManager的loader，它会失败。

```
void installLoader(LoaderInfo info) {
    mLoaders.put(info.mId, info);
    if (mStarted) {
        // The activity will start all existing loaders in it's onStart(),
        // so only start them here if we're past that point of the activitiy's
        // life cycle
        info.start();
    }
} 
```

注意在 LoaderManager 启动时将设置为“true”的 mStarted 值。

有两种方法可以解决这个问题。

1.  在 onCreate() 中调用 getLoaderManger()，它将重新分配 mLoaderManager 并使其准备好在后续的 onStart() 中启动。

    public LoaderManager getLoaderManager() { if (mLoaderManager != null) { return mLoaderManager; } mCheckedForLoaderManager = true; mLoaderManager = getLoaderManager(-1, mLoadersStarted, true); 返回 mLoaderManager；}

2.  让加载器位于片段中。因为在 Fragments 的 onStart() 中，会启动自己的 LoaderManager。

    if (!mLoadersStarted) { mLoadersStarted = true; if (!mCheckedForLoaderManager) { mCheckedForLoaderManager = true; mLoaderManager = mActivity.getLoaderManager(mIndex, mLoadersStarted, false); } if (mLoaderManager != null) { mLoaderManager.doStart(); } }

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T21:44:15.043

你不需要（也不应该）销毁你`Loader`的来重新加载它。`Loader`类旨在可重用。

改为使用`initLoader`。例如。：

```
getLoaderManager().initLoader(0, null, myLoaderListener); 
```

如果你想强制重新加载已经注册的加载器：

```
getLoaderManager().getLoader(0).forceLoad(); 
```

如果您不确定`Loader`在配置更改事件发生后实例是否已经存在，请使用`initLoader`而不是`getLoader`检索您`Loader`可以调用的实例`forceLoad()`。

`getLoaderManager().initLoader(0, null, myLoaderListener).forceLoad();`

如果您使用支持库，那么`forceLoad`即使在第一次实例化后也可以使用 - 可能存在错误 - 我提醒自己在这个论坛上有一些关于它的问题 - 尝试搜索旧帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T22:23:07.893

在活动中调用加载程序之前，请确保您没有`savedStateInfo`在使用片段时进行检查`onCreate`

```
@Override
public void onCreate(Bundle savedInstanceState) {

    // used to not overlap fragments
    if (savedInstanceState != null) {
        return null;
    }

    loadFragments();

    getSupportLoaderManager().restartLoader(LISTS_LOADER, null, this);
} 
```

如果您无论如何都需要检查`savedInstanceState`片段，您可以检查应该在加载器完成加载后创建的任何类变量，因为活动在旋转时被破坏，但在旋转时从先前的状态上升。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T10:27:27.340

来自android的开发站点

> “在配置更改后重新创建时，它们会自动重新连接到最后一个加载器的光标。因此，它们不需要重新查询其数据。”

据我了解，即使我们明确启动加载程序，加载程序也不会启动。因为我们调用的destroy实际上应该`onLoaderReset()`在它被销毁后调用。但是一旦方向改变，就不会调用该方法，而是在之前调用该方法。

我仍然可能是错的。这是我的假设。进一步讨论将不胜感激。

# ios - 用于 iphone 的 linphone（开源 sip 库）文档

> ID：10170486
> 
> 赞同：1
> 
> 时间：2012-04-16T07:58:05.337
> 
> 标签：ios

谁能帮我找到 linphone for iOS 的开发人员文档。我想了解项目的架构和功能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:12:05.137

恐怕除了[http://www.linphone.org/eng/documentation/](http://www.linphone.org/eng/documentation/)（你应该已经看过了）之外，没有关于这个项目的文档。如果您需要有关架构/等的更多信息，您将需要阅读源代码。由于开源项目经常在作者的业余时间进行开发，因此他们专注于实际的代码编写而不是绘制架构图和设计文档是很常见的。

如果您需要 iOS 的 SIP 堆栈，我建议您查看[pjsip](http://www.pjsip.org/)。这绝对是一个更成熟的项目，每个级别都有大量文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T01:29:07.560

你只需要谷歌你要检查的功能，然后会有很多文档链接。由于版本不同，这些文档可能会有所不同。我认为这对你来说已经足够了。

例如： http: [//fossies.org/dox/linphone-3.5.2/index.html](http://fossies.org/dox/linphone-3.5.2/index.html)

# jquery - jQuery 翻译库

> ID：10170488
> 
> 赞同：1
> 
> 时间：2012-04-16T07:58:16.967
> 
> 标签：jquery, translation

我想让用户翻译我的网页。我使用[这个 jQuery 文件](http://code.google.com/p/jquery-translate/issues/attachmentText?id=75&aid=750013000&name=jquery.translate.js&token=1L0HwLT86kEh5_-04-p8OFDPq2w%3A1323813882340)。我是新手，我不清楚如何用这个来翻译我的网页。请让我知道如何将此文件与任何示例代码片段一起使用。
我提到[了这个论坛](http://code.google.com/p/jquery-translate/issues/detail?id=75)，但找不到解决方案。

# ruby-on-rails - FB_Graph：发生错误。请稍后再试

> ID：10170489
> 
> 赞同：0
> 
> 时间：2012-04-16T07:58:23.440
> 
> 标签：ruby-on-rails, ruby, facebook, facebook-graph-api, fb-graph

我正在为我的 rails 应用程序使用 fb_graph。我刚刚关注了 nov/fb_graph 应用程序。直到上周它都运行良好，我可以登录并获取用户信息。但突然我得到了错误。我没有更改我的应用程序中的任何内容。我的 app_id，screat_id 一切都是正确的。

即使我在关闭 facebook 错误窗口时遇到错误，例如

Graph::Auth::VerificationFailed Facebook cookie 未找到

任何人都可以通过这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:42:41.733

这只是因为 URL 错误

指定的任何网站 url 都应该是正确的。

我提到网站 url 作为[http://localhost:3000/](http://localhost:3000/)和域作为 localhost

但是在我的浏览器中，我正在运行[http://0.0.0.0:3000/](http://0.0.0.0:3000/)这是实际的问题，所以我将服务器作为 localhost:3000 运行，现在它工作正常。因为我们提到站点 url 因为 localhost fb 将重定向到相同的地址，所以如果我们运行 0.0.0.0:3000 ，则会出现应用程序配置不允许给定 URL 的错误。

谢谢你

# php - joomla 模块，如何重定向和显示一些信息

> ID：10170496
> 
> 赞同：0
> 
> 时间：2012-04-16T07:59:14.270
> 
> 标签：php, joomla

有一个像这样的 joomla 模块模板

```
 <form action="<?php echo JRoute::_('index.php'); ?>" name="find" method="post">

<p>Places</p>
<select id=pp name=place_info>
    <?php
    foreach ($getPlaces as $place_id => $place_name) {
        echo "<option value=" . $place_id . ">" . $place_name . "</option>";
    }
    ?>
</select>

<input type="submit" name="submit" value="search" />
</form> 
```

我从数据库中获取 helper.php 中的信息。我需要的是，如果我单击提交按钮将我重定向到页面并显示数据库中的一些信息。例如，如果我从选择菜单中选择了某个选项并单击提交，我需要进入包含数据库内容的页面。joomla 1.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:24:27.893

您需要添加“选项”隐藏表单字段以选择哪个组件将处理您的请求，然后添加任何其他字段，如“任务”，将选择一个任务来处理请求。某些组件可能还需要其他参数，例如“article_id”。

因此，如果您的表单正在发布到名为“mycomponent”的自定义组件，并且任务是“showresults”，那么您的表单将如下所示：

```
 <form action="<?php echo JRoute::_('index.php'); ?>" name="find" method="post">

<p>Places</p>
<select id=pp name=place_info>
    <?php
    foreach ($getPlaces as $place_id => $place_name) {
        echo "<option value=" . $place_id . ">" . $place_name . "</option>";
    }
    ?>
</select>
<input type="hidden" name="option" value="mycomponent" />
<input type="hidden" name="task" value="showresults" />
<input type="submit" name="submit" value="search" />
</form> 
```

希望这可以帮助。

# php - 如何启用 PHP_IBM_DB2 功能？

> ID：10170497
> 
> 赞同：1
> 
> 时间：2012-04-16T07:59:15.253
> 
> 标签：php, db2

这是我到目前为止所做的：

1) 我已经从[http://sourceforge.net/projects/db2mc/](http://sourceforge.net/projects/db2mc/)下载了 php_ibm_db2-1.9.1-5.3-ts-vc9-x86.zip 2) 将 php_ibm_db2.dll 复制到 c:/wamp/bin/php/php5 .3.10/ext 3) 编辑 php.ini 并添加此脚本：

```
extension = php_ibm_db2.dll 
```

4) 编辑 httpd.conf 并添加此脚本

```
LoadModule php5_module "c:/wamp/bin/php/php5.3.10/php5apache2_2.dll"
AddType application/x-httpd-php .php
PHPIniDir "c:/wamp/bin/php/php5.3.10/" 
```

5）重启wampserver

结果：我还有`Call to undefined function db2_pconnect()`。我错过了什么？

# model-view-controller - Symfony 2 中的动作参数和 Doctrine 实体

> ID：10170503
> 
> 赞同：3
> 
> 时间：2012-04-16T07:59:42.787
> 
> 标签：model-view-controller, symfony, doctrine-orm, php-5.3

我们正在运行一个构建在 Zend Framework 1.x 之上的项目，并且正在考虑迁移到 Symfony 2。我们有一个使用 Doctrine 2 映射的域模型。

我们的（定制的）基本控制器类扩展了 Zend_Controller_Action 以提供一个非常方便的特性，灵感来自 Flow3：

假设我有这个控制器：

```
class UserController extends BaseController
{
    public function editAction(User $user)
    {
        // ...
    }
} 
```

如果我加载此 URL：

```
/user/edit?user=123 
```

基本控制器将自动加载标识为 123 的 User 实体，并将其作为参数传递给 editAction() 方法。如果省略 user 参数，或者不存在具有此身份的用户，则会引发异常。

Symfony 2 是否有这样的实现，或者是否有可能实现它，以及如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:36:37.903

来自[SensioFrameworkExtraBundle](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html)的[@ParamConverter 注释](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html)正是这样做的。如果您使用的是 Symfony 标准发行版，您可以直接使用它。

# java - 使用 Java 将 Java 对象插入 MongoDB 集合

> ID：10170506
> 
> 赞同：35
> 
> 时间：2012-04-16T07:59:53.797
> 
> 标签：java, mongodb

我正在尝试使用 Java 将整个 Java 对象插入到 MongoDB 集合中。我收到以下错误：

**错误 ：**

```
Exception in thread "main" java.lang.IllegalArgumentException: can't serialize class net.yogesh.test.Employee
    at org.bson.BSONEncoder._putObjectField(BSONEncoder.java:185)
    at org.bson.BSONEncoder.putObject(BSONEncoder.java:119)
    at org.bson.BSONEncoder.putObject(BSONEncoder.java:65)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:176)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:134)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:129)
    at com.mongodb.DBCollection.save(DBCollection.java:418)
    at net.yogesh.test.test.main(test.java:31) 
```

**Emplyoee.java (POJO)**

```
package net.yogesh.test;

import java.io.Serializable;

public class Employee implements Serializable {

    private static final long serialVersionUID = 1L;
    private long no;
    private String name;

    public Employee() {
    }

    public long getNo() {
        return no;
    }

    public void setNo(long no) {
        this.no = no;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

**主要方法类 (test.java)**

```
package net.yogesh.test;

import java.net.UnknownHostException;

import com.mongodb.BasicDBObject;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.Mongo;
import com.mongodb.MongoException;

public class test {

    public static void main(String[] args) throws UnknownHostException,
            MongoException {

        Mongo mongo = new Mongo("localhost", 27017);
        DB db = mongo.getDB("test");

        Employee employee = new Employee();
        employee.setNo(1L);
        employee.setName("yogesh");

        BasicDBObject basicDBObject = new BasicDBObject("Name", employee);

        DBCollection dbCollection = db.getCollection("NameColl");

        dbCollection.save(basicDBObject);   

    }

} 
```

谁能解释我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-16T08:05:15.887

我有点困惑，不知道为什么你会认为这首先会起作用。您需要知道的第一件事是如何将您的 POJO 映射到 MongoDB 文档。目前，您没有告诉系统（您的代码）如何做到这一点。

您可以为此使用映射库（想到 Morphia）或使用 ReflectionDBObject。任何一种解决方案都允许您将 POJO 映射到 MongoDB 文档或将 MongoDB 文档映射到 POJO（前一种方式比后者好得多）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-12-18T16:42:44.640

```
DB db = mongoClient.getDB( "mydb" );

coll = db.getCollection("testCollection");

Employee emp = new Employee();
emp.setId("1001");
emp.setName("John Doe");

//Converting a custom Class(Employee) to BasicDBObject
Gson gson = new Gson();
BasicDBObject obj = (BasicDBObject)JSON.parse(gson.toJson(emp));
coll.insert(obj);
findEmployee(new BasicDBObject("id","1001"));

public static void findEmployee(BasicDBObject query){

    DBCursor cursor = coll.find(query);

    try {
       while(cursor.hasNext()) {
          DBObject dbobj = cursor.next();
        //Converting BasicDBObject to a custom Class(Employee)
          Employee emp = (new Gson()).fromJson(dbobj.toString(), Employee.class);
          System.out.println(emp.getName());
       }
    } finally {
       cursor.close();
    }

} 
```

我认为发布双向转换的代码会很有用。
存储员工对象
查找并重新创建员工对象
希望这很有用..

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-18T15:39:30.710

亲
，您可以继续使用您想要的强类型对象

魂斗罗
有些人真的不喜欢：扩展

```
 package foo;
import com.mongodb.BasicDBObject;

public class Employee extends BasicDBObject {

```
private static final long serialVersionUID = 2105061907470199595L;
//should be something shorter as "name" like "n" 
//here just use name to conform your  sample
public static final String NAME = "name";
public static final String NO = "no";
public static final String COLLECTION_NAME = "employee";

public Long getNo() {
    return getLong(NO);
}

public void setNo(long no) {
    put(NO, no);
}

public String getName() {
    return getString(NAME);
}

public void setName(String name) {
    put(NAME, name);
} 
```

} 
```

```
 package foo;
import java.net.UnknownHostException;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.Mongo;
import com.mongodb.MongoException;

public class Test {

```
public static void main(String[] args) throws UnknownHostException,
        MongoException {

    Mongo mongo = new Mongo("localhost", 27017);
    DB db = mongo.getDB("yeahMongo");

    Employee employee = new Employee();
    employee.setNo(1L);
    employee.setName("yogesh");

    DBCollection employeeCollection = null ;
    employeeCollection = db.getCollection(Employee.COLLECTION_NAME);

    employeeCollection.save(employee);

    System.err.println(employeeCollection.findOne());

} 
```

} 
```

除了 morphia 你应该看看 jongo： [http](http://jongo.org/) : //jongo.org/ jongo 使用与 js mongo 引擎相同的表单语法，我发现它对初学者来说非常有用。您不必在 mongojs 和 java 之间切换您的思维导图。您可以使用 js 示例，只需稍作改动。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-16T13:17:11.523

您可以使用[gson 库](https://code.google.com/p/google-gson/)将您的 java 对象转换为 json 字符串，然后将其插入 mongodb。

例如：

```
Gson gson = new Gson();
String json = gson.toJson(Employee);    
BasicDBObject basicDBObject = new BasicDBObject("Name", json );          
DBCollection dbCollection = db.getCollection("NameColl");          
dbCollection.save(basicDBObject); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-22T17:57:52.780

自从提出这个问题以来，已经发生了一些变化。`test.java`在问题中使用，这是使用谷歌对我有用的`Gson`：

```
import com.google.gson.Gson;
import com.mongodb.Block;
import com.mongodb.MongoClient;
import com.mongodb.client.FindIterable;
import com.mongodb.client.MongoDatabase;
import org.bson.Document;

public class test {
  public static void main(String[] args) {
    MongoClient mongoClient = new MongoClient(); // Connect with default settings i.e. localhost:27017
    MongoDatabase db = mongoClient.getDatabase("test"); // Get database "test". Creates one if it doesn't exist
    Employee employee = new Employee(); // Create java object
    employee.setNo(1L);
    employee.setName("yogesh");
    // Deserialize object to json string
    Gson gson = new Gson();
    String json = gson.toJson(employee);
    // Parse to bson document and insert
    Document doc = Document.parse(json);
    db.getCollection("NameColl").insertOne(doc);

    // Retrieve to ensure object was inserted
    FindIterable<Document> iterable = db.getCollection("NameColl").find();
    iterable.forEach(new Block<Document>() {
      @Override
      public void apply(final Document document) {
        System.out.println(document); // See below to convert document back to Employee
      }
    });

  }
} 
```

您还可以使用`Gson`将检索到的 bson 文档转换回 Java 对象：

```
Gson gson = new Gson();
Employee emp = gson.fromJson(document.toJson(), Employee.class); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-16T08:02:53.593

使用 MongoDB，您不能将 Java bean 插入 DB，但您必须将它们重新映射到 MongoDB 对象。

在您的情况下，您必须执行以下操作：

```
BasicDBObject basicDBObject = new BasicDBObject();
basicDBObject.put("no", employee.getNo());
basicDBObject.put("name", employee.getName()); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-21T14:15:30.510

希望这对您有用，并且您可以从中获得帮助。我执行了数据库操作（插入、删除、更新、获取、getall）并使用 Person 对象在 MongoDB 中使用 java 进行操作以进行演示。

1.  数据库连接类

**连接.java**

```
package test;
import org.bson.codecs.configuration.CodecRegistry;
import org.bson.codecs.pojo.PojoCodecProvider;
import static org.bson.codecs.configuration.CodecRegistries.fromProviders;
import static org.bson.codecs.configuration.CodecRegistries.fromRegistries;
import com.mongodb.MongoClient;
import com.mongodb.MongoClientOptions;
import com.mongodb.client.MongoDatabase;

public class Connection {
    public MongoClient mongo;
    private String db;
    public MongoDatabase database;
    private static Connection instance;

    private Connection() {
        db = "chatsystem";
        CodecRegistry pojoCodecRegistry = fromRegistries(MongoClient.getDefaultCodecRegistry(),
                fromProviders(PojoCodecProvider.builder().automatic(true).build()));
        mongo = new MongoClient("localhost", MongoClientOptions.builder().codecRegistry(pojoCodecRegistry).build());
        database = mongo.getDatabase(db);

    }

    public static Connection getInstance() {
        if (instance == null) {
            instance = new Connection();
            return instance;
        } else {
            return instance;
        }
    }

} 
```

2.  模型类

**人.java**

```
package test;

import org.bson.types.ObjectId;

public class Person {

    public Person() {
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getFname() {
        return fname;
    }

    public void setFname(String fname) {
        this.fname = fname;
    }

    public String getLname() {
        return lname;
    }

    public void setLname(String lname) {
        this.lname = lname;
    }

    private ObjectId id;

    public Person(String username, String email, String password, String fname, String lname) {
        super();
        this.username = username;
        this.email = email;
        this.password = password;
        this.fname = fname;
        this.lname = lname;
    }

    public ObjectId getId() {
        return id;
    }

    public void setId(ObjectId id) {
        this.id = id;
    }

    private String username;
    private String email;
    private String password;
    private String fname;
    private String lname;
} 
```

3.  主班

**测试.java**

```
package test;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import static com.mongodb.client.model.Filters.*;
import com.mongodb.client.FindIterable;
import com.mongodb.client.MongoCollection;

public class test {
    private MongoCollection<Person> person;
    Connection conn;
    public void getCollection() {
        conn = Connection.getInstance();
        person = conn.database.getCollection("person", Person.class);
    }
    public static void main(String[] args) throws Exception {
        test t = new test();
        t.getCollection();
        Person p = new Person();
        p.setEmail("test@test.com");
        p.setFname("ftest");
        p.setLname("ltest");
        p.setPassword("testtest");
        p.setUsername("test123");

        // insert person type objects in database
        t.insertPerson(p);

        // get all persons from database
        List<Person> pp = t.getAllPersons();
        Person pt = pp.get(0);
        System.out.println(pt.getEmail());
        System.out.println(pt.getId());

        // get one person from database by username filter

                 // pass username of person in method argument
        Person ph = t.getOnePerson("test123");
        System.out.println(ph.getEmail());
        System.out.println(ph.getId());

        // update/edit person by username filter
                // pass username of person in method argument
        t.updatePerson("test123");

        // delete person by username filter
               // pass username of person in method argument
        t.removePerson("updatetest123");

    }

    public void insertPerson(Person p) {

        person.insertOne(p);
    }

    public List<Person> getAllPersons() {
        FindIterable<Person> iterable = person.find();
        Iterator it = iterable.iterator();
        List<Person> allPersons = new ArrayList<>();
        while (it.hasNext()) {
            Person per = (Person) it.next();
            allPersons.add(per);
        }
        return allPersons;
    }

    public Person getOnePerson(String username) {
        return person.find(eq("username", username)).first();
    }

    public void updatePerson(String username) {
        Person p = new Person();
        p.setEmail("update@test.com");
        p.setFname("updateftest");
        p.setLname("updateltest");
        p.setPassword("updatetesttest");
        p.setUsername("updatetest123");
        person.replaceOne(eq("username", username), p);

    }

    public void removePerson(String username) {
        person.deleteOne(eq("username", username));
    }

} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-11T23:29:45.450

强烈推荐[MongoJack](http://mongojack.org/)，一个不错的库，用于将 Java 对象映射到/从 MongoDB 文档。

代码如下所示：

```
import java.util.Arrays;
import org.mongojack.JacksonDBCollection;
import com.mongodb.DB;
import com.mongodb.MongoClient;
import com.mongodb.ServerAddress;

public class Test {

    public static void main(String[] args) {

        MongoClient mongoClient = new MongoClient(Arrays.asList(new ServerAddress("localhost", 27017)));
        DB db = mongoClient.getDB("test");

        Employee employee = new Employee();
        employee.setNo(1L);
        employee.setName("yogesh");

        JacksonDBCollection<Employee, String> collectionData = JacksonDBCollection.wrap(db.getCollection("NameColl"), Employee.class, String.class);
        collectionData.save(employee);
        mongoClient.close();
    }

} 
```

（PS：目前我正在使用 mongo-java-driver v3.2.2 和 mongojack v2.6.1）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-07T04:51:16.423

使用[BasicDBObjectBuilder](http://api.mongodb.com/java/current/com/mongodb/BasicDBObjectBuilder.html)将您的 POJO 转换为DBCollection[可以](http://api.mongodb.com/java/current/com/mongodb/DBCollection.html)保存的[DBObject实例：](http://api.mongodb.com/java/2.3/com/mongodb/DBObject.html)

```
import com.mongodb.BasicDBObjectBuilder;
import com.mongodb.DBObject;

public class Employee {
    private long no;
    private String name;

    // Getters and Setters

    public DBObject toDBObject() {
        BasicDBObjectBuilder builder = BasicDBObjectBuilder
                .start("no", no)
                .append("name", name);
        return builder.get();
    }
} 
```

为了保存，只需调用`toDBObject()`POJO 实例并将其提供给集合：

```
public class test {

    public static void main(String[] args) throws UnknownHostException,
            MongoException {
        ...
        DBCollection dbCollection = db.getCollection("NameColl");

        Employee employee = new Employee();
        employee.setNo(1L);
        employee.setName("yogesh");

        dbCollection.save(employee.toDBObject());
    }
} 
```

使用这种方法：

*   您无需`DBObject`每次都手动创建
*   你不需要通过扩展 Mongo 类来搞乱你的 POJO（如果你的 POJO 已经在扩展一个类怎么办？）
*   您不需要 Json 映射器 [及其在 POJO 字段上的注释]
*   你只依赖于 java-mongo-driver jar

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-24T13:12:23.697

当我尝试将 java BasicDBObject 插入 MongoDb 集合时，我遇到了同样的错误。

我的对象是从转换为 Json 的 Xml 创建的。

```
java.lang.IllegalArgumentException: can't serialize class net.sf.json.JSONNull
    at org.bson.BasicBSONEncoder._putObjectField(BasicBSONEncoder.java:299)
    at org.bson.BasicBSONEncoder.putMap(BasicBSONEncoder.java:339)
    at org.bson.BasicBSONEncoder._putObjectField(BasicBSONEncoder.java:261) 
```

此错误是由 Xml 中的空标签引起的；当我删除所有空标签时，我解决了它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-23T13:15:41.727

只需使用“insertOne”方法，不保存。

```
 MongoCollection collection;
    String collectionName = "somename";
    String jsonObject = "{}";

    if (!mongoTemplate.collectionExists(collectionName)) {
        collection = mongoTemplate.createCollection(collectionName);
        logger.info("Collection %s was successfully created", collectionName);
    } else {
        collection = mongoTemplate.getCollection(collectionName);
    }

    collection.insertOne(Document.parse(jsonObject)); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-22T15:27:53.993

[由于没有人提到它 - 我认为使用bson4jackson](https://michelkraemer.com/binary-json-with-bson4jackson/)可能会有解决方案。这标榜自己是一个快速编码器。

# php - 在 X 天后，MySQL 查询在搜索时省略记录

> ID：10170508
> 
> 赞同：0
> 
> 时间：2012-04-16T08:00:00.873
> 
> 标签：php, mysql, date, sql-order-by

我正在使用以下查询，

```
SELECT 
b.sales_id,b.category_id,a.bus_title,b.sales_title,b.sale_starts,b.sale_ends 
FROM tbl_sales b INNER JOIN tbl_business a 
ON a.bus_id=b.bus_id 
WHERE b.active=1 
AND CURDATE( ) < DATE_ADD(b.sale_ends, INTERVAL 14 DAY ) 
AND b.category_id='16' OR b.category_id 
IN (SELECT cat_id FROM tb_category WHERE parent_id=16) 
ORDER BY (b.sale_ends=CURDATE()) DESC,(b.sale_ends>CURDATE()) DESC,b.sale_ends ASC 
```

并得到如下所示的结果，

```
sales_id  | category_id |bus_title   | sales_title|sale_starts|sale_ends 
----------|-------------|------------|------------|-----------|----------
 36       |   17        |  my bus    | my sale    |2012-04-03 |2012-05-03  
 35       |   19        |  my bus 1  | my sale 1  |2012-04-03 |2012-05-03
 42       |   16        |  my bus 12 | my sale 12 |2012-04-05 |2012-05-05
 10       |   17        |  my bus 123| my sale 123|2011-12-15 |2011-12-18 
```

我需要在`X amount of days past the End Date`（14 天后）之后省略（而不是删除）销售。但是我上面写的 MySQL 查询返回错误的结果并显示带有 End Date 的记录`2011-12-18`。我怎样才能以有效的方式编写查询。

需要帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:02:36.863

将此添加到您的查询中：

```
 AND sale_ends < DATE_SUB(NOW(), INTERVAL 14 day) 
```

# wpf - 如何将放置在 DataGridColumnHeadertemplate 中的文本框的 Tag Properties 绑定到 DataGridTextColumn.Name？

> ID：10170510
> 
> 赞同：0
> 
> 时间：2012-04-16T08:00:10.370
> 
> 标签：wpf, mvvm, mvvm-light, wpfdatagrid

我在 DataGridColumnHeadertemplate 中放置了一个 textBox(txtSearch)，如下所示：

```
 <UserControl.Resources>
 <Style x:Key="DataGridColumnHeaderStyle1" TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                        <Grid VerticalAlignment="Center" HorizontalAlignment="Stretch">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="{TemplateBinding Content}" HorizontalAlignment="Center" />
                            <Grid Grid.Row="1" >
                            <TextBox x:Name="txtSearch" Tag="{Binding DataGridTextColumn.Name, ElementName=grd}"  Text="" HorizontalAlignment="Stretch"  BorderThickness="1" TextChanged="TextBox_TextChanged" />
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources> 
```

并将其用于这样的数据网格：

```
 <DataGrid x:Name="grd" ItemsSource="{Binding Source={StaticResource theSource}}" AutoGenerateColumns="False"  ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}">
        <DataGrid.Columns >
            <DataGridTextColumn Header="نام" Binding="{Binding Title}" x:Name="Title" ></DataGridTextColumn>
            <DataGridTextColumn Header="ID" Binding="{Binding ParentID}" x:Name="ParentID"></DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

现在我需要将 txtSearch Tag 属性绑定到 DataGridTextColumn.Name。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:50:45.987

您可以尝试将 RelativeSource 与 Mode=FindAncestor 一起使用（[http://msdn.microsoft.com/ru-ru/library/dd553635(v=vs.95).aspx](http://msdn.microsoft.com/ru-ru/library/dd553635(v=vs.95).aspx)）

# memory - 分配内存时，任务管理器中的物理内存不会改变

> ID：10170512
> 
> 赞同：0
> 
> 时间：2012-04-16T08:00:31.697
> 
> 标签：memory, taskmanager

我的程序可能有内存问题，所以我尝试查找各种​​工具提供的有关内存使用情况的信息。为了找出原因，我也做了一些简单的实验。在发布模式下，我添加以下代码，

```
pChar = new char[((1<<30)/2)];
for(int i; i < ((1<<30)/2); i++)
{
    pChar[i] = i % 256;
} 
```

执行代码时，Windows 任务管理器中的可用物理内存不会改变。在我看来，编译器可能会删除代码以提高性能。我将变量声明为一个全局变量。它不起作用。但在调试模式下，Windows 任务管理器中的可用物理内存会按预期发生变化。我无法理解。

我有另一个问题。如果物理内存用完，新操作是否会从虚拟内存中分配内存。还是会抛出一个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:05:26.043

It's indeed quite possible that the compiler detects a "write-only" variable. Since it's non-`volatile`, the writes can be safely eliminated, and then there's no need for the OS to actually allocate RAM.

`new` just allocates address space, on modern systems. Physical RAM is allocated when needed. Typically this happens when the ctor runs, as it initializes the members. But in `new char` there's of course no ctor.

# java - 使用码头手动覆盖代码

> ID：10170514
> 
> 赞同：0
> 
> 时间：2012-04-16T08:00:38.230
> 
> 标签：java, jetty, code-coverage

有没有办法在单元测试/开发期间测量代码覆盖率。我正在使用码头，可以测量覆盖范围吗？

谢谢，穆2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:52:23.617

另一个答案提到了 cobertura，但[jacoco](http://jacoco.org/jacoco/index.html)可能更容易设置。

它有一个[java 代理](http://www.eclemma.org/jacoco/trunk/doc/agent.html)，可以很容易地附加到启动时运行 JETTY 的 VM，方法是提供：

```
-javaagent:[yourpath/]jacocoagent.jar=[option1]=[value1],[option2]=[value2] 
```

# timer - AVR Butterfly - 内部振荡器校准后的定时器重用

> ID：10170515
> 
> 赞同：1
> 
> 时间：2012-04-16T08:00:45.343
> 
> 标签：timer, avr, calibration, usart

我正在根据 AVR 提供的示例代码（参见下面的代码）校准 AVR Butterfly 内部振荡器，以便能够使用 USART。由于我还想使用两个定时器控制的伺服电机，我想知道在校准过程之后是否可以重用 16 位定时器 1 - 我尝试重置 TCCR1A/B 但它没有成功（代码也在下面） . 我希望你能帮我解决这个问题。

```
void OSCCAL_Calibrate(void){
    unsigned char calibrate = 0;
    int temp;
    unsigned char tempL;

    CLKPR = (1<<CLKPCE);        // set Clock Prescaler Change Enable
    // set prescaler = 8, Inter RC 8Mhz / 8 = 1Mhz
    CLKPR = (1<<CLKPS1) | (1<<CLKPS0);
    TIMSK2 = 0;             //disable OCIE2A and TOIE2
    ASSR = (1<<AS2);        //select asynchronous operation of timer2 (32,768kHz)    
    OCR2A = 200;            // set timer2 compare value 
    TIMSK0 = 0;             // delete any interrupt sources
    TCCR1B = (1<<CS10);     // start timer1 with no prescaling
    TCCR2A = (1<<CS20);     // start timer2 with no prescaling
    while((ASSR & 0x01) | (ASSR & 0x04));       //wait for TCN2UB and TCR2UB to be cleared

    delayMs(1000);    // wait for external crystal to stabilise

    while(!calibrate)
    {
        cli();  // disable global interrupt

        TIFR1 = 0xFF;   // delete TIFR1 flags
        TIFR2 = 0xFF;   // delete TIFR2 flags
        TCNT1H = 0;     // clear timer1 counter
        TCNT1L = 0;
        TCNT2 = 0;      // clear timer2 counter

        while ( !(TIFR2 & (1<<OCF2A)) );   // wait for timer2 compareflag

        TCCR1B = 0; // stop timer1

        sei();  // enable global interrupt

        if ( (TIFR1 & (1<<TOV1)) )
        {
            temp = 0xFFFF;      // if timer1 overflows, set the temp to 0xFFFF
        }else
        {   // read out the timer1 counter value
            tempL = TCNT1L;
            temp = TCNT1H;
            temp = (temp << 8);
            temp += tempL;
        }

        if (temp > 6250)
            OSCCAL--;   // the internRC oscillator runs to fast, decrease the OSCCAL
        else if (temp < 6120)
            OSCCAL++;   // the internRC oscillator runs to slow, increase the OSCCAL
        else
            calibrate = 1;   // the interRC is correct

        TCCR1B = (1<<CS10); // start timer1
    }
} 

void motorInit(){
    // reset timer 1
    TCCR1A = 0;
    TCCR1B = 0;

    // initialize Servo Pins
    DDRB |= (1<<PB5) | (1<<PB6);

    ICR1H = ICR_VALUE >> 8;
    ICR1L = ICR_VALUE & (TOP_VALUE);

    // reset OCRs
    setServoSpeed(0, 0);
    setServoSpeed(1, 0);

    // Set Timer mode (PWM Phase & Freq. correct, clear on compare match)
    // and prescaler (8)
    TCCR1A = ((1<<COM1A1) | (1<<COM1B1));                 
    TCCR1B = ((1<<WGM13) | (0<<CS12) | (1<<CS11) | (0<<CS10));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:52:14.440

也许您可以查看我之前用于项目的代码，但您应该注意我将系统频率降低到 7.3768 MHz 以实现 56700 波特率，这可能需要您进行调整。

```
void OSCCAL_Calibrate(void)
{
uint8_t LoopCount = (0x7F / 2); 

ATOMIC_BLOCK(ATOMIC_RESTORESTATE)
{
// Make sure all clock division is turned off (8MHz RC clock)
CLKPR = (1 << CLKPCE);
CLKPR = 0x00;

// Inital OSCCAL of half its maximum
OSCCAL = (0x7F / 2);

// Disable timer interrupts
TIMSK1 = 0;
TIMSK2 = 0;

// Set timer 2 to asyncronous mode (32.768KHz crystal)
ASSR = (1 << AS2);

// Ensure timer 1 control register A is cleared
TCCR1A = 0;

// Start both counters with no prescaling
TCCR1B = (1 << CS10);
TCCR2A = (1 << CS20);

// Wait until timer 2's external 32.768KHz crystal is stable
while (ASSR & ((1 << TCN2UB) | (1 << TCR2UB) | (1 << OCR2UB)));

// Clear the timer values
TCNT1 = 0;
TCNT2 = 0;

while (LoopCount--)
{
// Wait until timer 2 overflows
while (!(TIFR2 & (1 << TOV2)));

// Stop timer 1 so it can be read
TCCR1B = 0x00;

// Check timer value against ideal constant
if (TCNT1 > OSCCAL_TARGETCOUNT) // Clock is running too fast
OSCCAL--;
else if (TCNT1 < OSCCAL_TARGETCOUNT) // Clock is running too slow
OSCCAL++;

// Clear timer 2 overflow flag
TIFR2 |= (1 << TOV2); 
```

看一下这个！

# c# - 无法在设计视图中使用用户控件打开 winform

> ID：10170517
> 
> 赞同：2
> 
> 时间：2012-04-16T08:00:48.357
> 
> 标签：c#, winforms, user-controls, designview

在我正在处理的项目中，我已将所有 winforms 的资源文件（仅包含字符串）移至资源 dll，该资源 dll 还有一个静态类，可在项目启动时将所有资源文件字符串加载到内存中，并且每个form 从中获取字符串。

我有一个带有几个用户控件的 winform，它们也可以访问该 dll 的字符串。当我尝试在设计视图中打开该表单时，每个用户控件都会出现以下错误：

> “变量‘control_name’要么未声明，要么从未赋值”

我仍然可以毫无问题地运行该项目。

我尝试从用户控件的构造函数和 Load 事件中调用 dll，但是这两种情况都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:55:05.613

正如我在之前的评论中提到的，我设法解决了这个问题。我没有从用户控件中访问资源 dll，而是将每个控件的函数更改为 public 并从 winform 调用这些函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:26:45.237

首先尝试简单的解决方案：
执行 Build->Rebuild Solution。关闭 Visual Studio，重新打开。如果用户控件在设计时构造期间引发异常，则可能会发生这种情况。它仅在 Visual Studio 重新启动后才清除。（带有 SP1 的 Visual Studio 2008）

如果这失败了，那么您可能引用了一个从未声明或分配的变量，例如 Button1。如果未分配，您将收到警告，而不是错误。

要更正此错误：声明或分配错误消息中指定的变量。

[http://msdn.microsoft.com/en-us/library/4008y84t.aspx](http://msdn.microsoft.com/en-us/library/4008y84t.aspx)

# visual-c++ - 内存问题消息

> ID：10170521
> 
> 赞同：1
> 
> 时间：2012-04-16T08:01:09.727
> 
> 标签：visual-c++

我有一个关于每当我执行我的 C++ 代码时显示的错误消息的问题，错误消息如下：

```
Exception non gérée à 0x00839057 dans FirstReport1.exe : 0xC00000FD: Stack overflow. 
```

1）这是什么意思？2）我怎样才能避免它并正常执行我的代码？我正在执行的代码如下：

```
#include <iostream>
#include <fstream>
#include <ctime>
#include <iomanip>

using namespace std;

const int width(10001);
const int height(15);

void main()
{
    ifstream inputfile ("file6.txt");
    ofstream outputfile ("outfile.txt");
    ofstream filteredfile ("filteredfile.txt");
    ofstream timefile ("time.txt");
clock_t tstart, tend;
tstart = clock();

int i, x, y;
double tab[height][width];

for (y=0; y<height; y++){
    for (x=0; x<width; x++){
        tab[y][x]=0;
    }
}

if (inputfile){
    for (y=0; y<height; y++){
        for (x=0; x<width; x++){ 
            inputfile >> tab[y][x];
        }
    }
}

if (filteredfile){
    for (y=0; y<height-1; y++){
        for (x=0; x<width-1; x++){
            if (tab[y+1][x+1]==-9999 || tab[y+1][x+1]<20 || tab[y+1]

[x+1]>1200) {tab[y+1][x+1]= 0;}
                filteredfile << tab[y][x] << '\t';
            }
        }
    }
tend = clock();
    double time;
    time = double (tend-tstart)/CLOCKS_PER_SEC;
    timefile << time;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:14:23.083

您正在堆栈上创建一个数组“选项卡”，其中包含 10001x15 个元素。每个元素都是一个双精度数，大小为 8 个字节。因此数组为 1,200,120 字节，可能大于默认堆栈大小。我记得这是 Visual c++ 中的 1MB。

要么把这个数组放在堆栈以外的地方，要么增加你的堆栈大小。

# iphone - 在操作表上添加按钮。和按钮应该超过5

> ID：10170523
> 
> 赞同：2
> 
> 时间：2012-04-16T08:01:26.560
> 
> 标签：iphone, objective-c, uiactionsheet

我正在向操作表添加一个按钮。这很容易，但在我的情况下，有 5 个以上的按钮，Apple 不接受操作表上超过 5 个按钮。因此，我将滚动视图添加到操作表并将按钮添加到滚动视图。但是这个视图有两个固定按钮，一个是取消按钮，另一个是带有一些标题的按钮。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T08:13:25.600

如果您有五个以上的按钮，最好在普通视图中使用自定义表格视图并给出`UIModalTransitionStyleCoverVertical`，这样它就会像操作表一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:12:08.717

使用以下代码....

```
- (IBAction)actionsheetbuttonpress:(id)sender {

actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                          delegate:nil
                                 cancelButtonTitle:nil
                            destructiveButtonTitle:nil
                                 otherButtonTitles:nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

UIToolbar *pickerDateToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
pickerDateToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerDateToolbar sizeToFit];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

pickerData = [[UIPickerView alloc]initWithFrame:pickerFrame];
pickerData.showsSelectionIndicator = YES;
pickerData.dataSource = self;
pickerData.delegate = self;

[actionSheet addSubview:pickerData];

NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc]initWithTitle:@"DONE-A" style:UIBarButtonItemStyleBordered target:self action:@selector(DatePickerDoneClick)];
UIBarButtonItem *doneBtn1 = [[UIBarButtonItem alloc]initWithTitle:@"DONE-B" style:UIBarButtonItemStyleBordered target:self action:@selector(DatePickerDoneClick)];
UIBarButtonItem *doneBtn2 = [[UIBarButtonItem alloc]initWithTitle:@"DONE-C" style:UIBarButtonItemStyleBordered target:self action:@selector(DatePickerDoneClick)];

[barItems addObject:doneBtn];
[barItems addObject:doneBtn1];
[barItems addObject:doneBtn2];
//add more two button here...or you can add any no of buttons..

[pickerDateToolbar  setItems:barItems animated:YES];

[actionSheet addSubview:pickerData];
[actionSheet addSubview:pickerDateToolbar];
[actionSheet showInView:self.view];
[actionSheet setBounds:CGRectMake(0,0,320, 464)];
[barItems release];
[actionSheet release];
[pickerData release];

} 
```

希望，这会帮助你....寒意

# c# - 如何在 C# 中绘制此 WPF 路径

> ID：10170527
> 
> 赞同：0
> 
> 时间：2012-04-16T08:01:55.327
> 
> 标签：c#, wpf, pathgeometry, figures

我一直在努力将这段 WPF 代码转换为 C#。我对 WPF 比较陌生，我真的希望有人可以在这里帮助我:)

```
 <Path Fill="Blue" Margin="15,15,15,15">
        <Path.Data>
            <EllipseGeometry x:Name="MyAnimatedEllipseGeometry"
                Center="10,100" RadiusX="15" RadiusY="15" />
        </Path.Data>
        <Path.Triggers>
            <EventTrigger RoutedEvent="Path.Loaded">
                <BeginStoryboard Name="MyBeginStoryboard">
                    <Storyboard>

                        <!-- Animates the ellipse along the path. -->
                        <PointAnimationUsingPath
                            Storyboard.TargetName="MyAnimatedEllipseGeometry"
                            Storyboard.TargetProperty="Center"
                            Duration="0:0:5" 
                            RepeatBehavior="Forever" >
                            <PointAnimationUsingPath.PathGeometry>
                                <PathGeometry 
                                    Figures="M 10,100 C 35,0 135,0 160,100 135,0 35,0 10,100"
                                />
                            </PointAnimationUsingPath.PathGeometry>
                        </PointAnimationUsingPath>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Path.Triggers>
    </Path>
</Canvas> 
```

在获得 PathGeometry Figures 之前，我似乎相处得很好……如果有人可以向我提供此 WPF 代码的 C# 代码片段，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:09:44.297

我建议阅读以下 msdn[文章](http://msdn.microsoft.com/en-us/library/ms747393.aspx)。

```
"M 10,100 C 35,0 135,0 160,100 135,0 35,0 10,100" 
```

意思如下：从 (10,100) 开始。添加以 10,100 结尾的“三次贝塞尔曲线”，控制点为 (35,0)、(135,0)、(160,100)、(135,0)、(35,0)。

据我了解。这样的文本应该很容易呈现到 PathSegmentCollection 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:20:32.237

这就是您要查找的内容：[PointAnimationUsingPath.PathGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.pointanimationusingpath.pathgeometry%28v=vs.90%29.aspx)。有一个如何解决您的问题的详细示例，它显示了如何使用 PointAnimationUsingPath 对象沿曲线路径为 Point 设置动画。对于一个[完整的样本](http://msdn.microsoft.com/en-us/library/ms771534%28v=vs.90%29.aspx)；如果您不想使用 Storyboard：[如何：在不使用 Storyboard 的情况下为属性设置动画](http://msdn.microsoft.com/en-us/library/ms753117%28v=vs.90%29.aspx)。请记住，MSDN 提供了示例和详细[说明](http://msdn.microsoft.com/en-us/library/ms746916%28v=vs.90%29.aspx)。

# javascript - Javascript 函数不适用于 onmouseover 属性

> ID：10170531
> 
> 赞同：0
> 
> 时间：2012-04-16T08:02:22.677
> 
> 标签：javascript, html, onmouseover

当鼠标悬停/移出图像时，我想更改 css 属性。不幸的是，它似乎不起作用，所以我用 onmouseover 属性测试了简单的 javascript：

```
<script type="text/javascript">
    function show_alert() { document.alert("Alert"); }
</script> 
```

和

```
<div class="test" onmouseover="show_alert()">
  ....
</div> 
```

但是当我将鼠标移到这个 div 块上时，什么都没有发生，而且很难调试里面发生了什么。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:04:59.560

警报不起作用，因为您正在使用`document.alert`不存在的 。你会想要`window.alert`，或者只是`alert`

看看[这个 JSFiddle](http://jsfiddle.net/52VL9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T08:05:24.127

`alert`方法是对象的方法，`window`而不是`document`对象。使用`document.alert`退货`undefined`。

```
<script type="text/javascript">
  function show_alert() { window.alert("Alert"); }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:04:29.100

> 当鼠标悬停/移出图像时，我想更改 css 属性

你为什么需要javascript呢？一个简单的 CSS 样式就可以解决问题：

```
img:hover { border: 2px solid red; } 
```

**顺便一提**

`document`因为没有属性称为`alert`. 是`window.alert()`！或者干脆`alert('hello');`

# php - 根据搜索结果执行不同的操作

> ID：10170532
> 
> 赞同：0
> 
> 时间：2012-04-16T08:02:25.133
> 
> 标签：php, jquery, ajax, json

我有一个包含大量输入（文本输入、文本区域、复选框...）的表单，用户可以使用自己的预设填充这些输入。目前，用户可以搜索他们的预设，调用 ajax 查询，然后我返回 HTML 以及找到的预设列表。HTML 是（精心）在一个 PHP 文件中生成的，该文件添加了`onclick=""`许多不同的操作。用户可以单击预设并填充表单。

生成的 HTML（放入页面）的示例可能是

```
<a onclick=" $('#AgendaItemName').val('Preset 1');  $('#AgendaItemOpmerking').val('');  $('#AgendaItemLokaalID').val('');  $('#AgendaItemPlaats').val('');  $('#AgendaItemBegeleidendeLeerkrachten').val('');  $('#AgendaItemDoelgroep').val('');  $('#AgendaItemIsPubliek').val('1');  $('#AgendaItemLesFicheAbonnementID').val('');  $('#AgendaItemAgendaItemTypeID').val('2');  $('#AgendaItemAgendaItemPublicatieTypeID').val('');  $('#AgendaItemLeergebiedID').val('1');  $('#AgendaItemLeerdomeinID').val('1');  $('#AgendaItemLessenTaken').val('');  $('#AgendaItemVerloop').val('Test verloop\r\n\r\ntest opslaan vanuit agendaitem');  $('#AgendaItemBeginsituatie').val('');  $('#AgendaItemMateriaal').val('');  $('#AgendaItemEvaluatie').val('Test evaluatie');  $('#AgendaItemEigenLesdoelen').val('Test lesdoelen');  $('#AgendaItemAgendaItemHerhaalModeID').val('');  $('#AgendaItemHerhaalStartDatum').val('');  $('#AgendaItemHerhaalEindDatum').val('');  $('#AgendaItemAgendaItemKleuterModeID').val('0');  UpdateVisibleFields('AgendaItem');$('.HoekVeldInput').val('');$('#AgendaItemAgendaItemBelangstellingsCentrumID').val('');  $('#AgendaItemLesFicheID').val('791');  $('#AgendaItemIsBestaandeFicheAanpassen').attr('disabled', false); loadFieldsets(791, 'LesficheID'); return false; " href="#">Preset 1</a> 
```

您实际上不必完全阅读那段代码，因为它......嗯，不太好。大多数时候它只是设置值，但有时，我还需要执行一些功能，具体取决于预设设置。现在我正在考虑一种更好的方法来解决这个问题，但我被困住了。有什么方法可以将这些操作与 JSON 一起发送？是否可以做类似的事情

```
var returndatafromajax = [
    {
        "html" : "<a href='#' rel="0">preset</a>",
        "actions" : "dothis(); dothat();"
    },
    {
        "html" : "<a href='#' rel="1">preset 2</a>",
        "actions" : "someofthis();"
    },
    {
        "html" : "<a href='#' rel="2">preset 3</a>",
        "actions" : "noneofthat();"
    }
]

$('ul').on('click', 'a', function() {
    var index = $(this).attr('rel');
    somehowexecute(returndatafromajax[index].actions);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:09:03.787

是的，你可以这样做

```
var returndatafromajax = [
    {
        "html" : "<a href='#' rel="0">preset</a>",
        "actions" : {"1":"dothis","2":"dothat"}
    },
    {
        "html" : "<a href='#' rel="1">preset 2</a>",
        "actions" : {"1":"someofthis"}
    },
    {
        "html" : "<a href='#' rel="2">preset 3</a>",
        "actions" : {"1":"noneofthat"}
    }
] 
```

只使用函数名而不是 (); 用他们的名字。

# extjs4 - ExtJS4：自定义散射类型（路径类型）

> ID：10170536
> 
> 赞同：0
> 
> 时间：2012-04-16T08:02:40.397
> 
> 标签：extjs4, scatter

如何在**markerConfig**配置中创建自定义散点类型？

例如，这是**圆形**散点图：

```
series: {
        type: 'scatter',
        xField: 'x',
        yField: 'y',
        markerConfig: {
                type: 'circle',
                fill: '#000',
                radius: 5
        }
} 
```

我需要**三角形**散射。所以，当我使用下面的代码时：

```
markerConfig: {
        type: 'path',
        fill: '#000',
        path: [M,100,100,L,300,100,L,200,300,z]
} 
```

我收到了这个错误：

```
Error: M is not defined 
```

或使用路径：[100,100,300,100,200,300]

```
Error: Ext.chart.Shape[type] is not a function 
```

**SVG 三角形**示例在这里： [http ://www.w3.org/TR/SVG/paths.html#PathData](http://www.w3.org/TR/SVG/paths.html#PathData)

先感谢您

# active-directory - ADCS 在线响应器 (OCSP) 不是实时的

> ID：10170539
> 
> 赞同：2
> 
> 时间：2012-04-16T08:02:42.260
> 
> 标签：active-directory, certificate, ocsp, certificate-revocation

我在实验室的同一台机器上安装了 AD、AD CS 和 OCSP 并进行了配置。然后我使用 C# 来拥有一个 OCSP 客户端，以便它可以发送吊销检查请求并解析本地计算机上安装的特定证书的响应。C# 代码是使用 Bouncy Castle 程序集构建的 (http://www.bouncycastle.org/csharp/)

问题是，如果我在 AD CS 上颁发了证书并撤销了它，并发布了 CRL 和 Delta CRL，我的 OCSP 客户端仍然说这个证书是好的，直到我单击 AD CS 中的 Refresh Revocation Data -> OCSP ->阵列配置。

我已通过 LDAP://XXXX 将 OCSP 中的撤销配置的提供者配置为我的本地 CRL，

我还指定我的撤销提供程序每 5 分钟刷新一次 CRL。

有什么方法可以将我的 OCSP 设置为“实时”，这意味着在我撤销证书之后，我的 OCSP 客户端就会知道它已被撤销。或者，我的 OCSP 可以自动获取 CRL，而不是手动单击刷新吊销数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:49:40.290

好的，我终于知道如何使它尽可能实时，即使不是“实时”。OCSP 服务有自己的缓存，似乎证书的吊销状态将被缓存，直到 CRL 过期。在我的实验室中，我的 CRL 有效期为 2 天，这意味着即使我撤销了证书并发布了 CRL 并设置 OCSP 每 5 分钟刷新一次，原始状态将在 OCSP 缓存中直到 2 天后。但是，如果我单击 Refresh Revocation Data，OCSP 将清除所有缓存并重新启动应用程序池。

解决方案是，首先我需要在 OCSP 服务中启用 NONCE 扩展。这样当我发送 OCSP 请求时，我可以在 NONCE 中获取一些随机信息。而在 OCSP 服务中，如果它发现请求具有 ONONCE 信息，它将不会使用任何缓存。所以我的撤销数据将在 5 分钟后刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T09:35:24.600

*我在“ Windows 2012 ADCS Online Responder* ”上遇到了同样的问题。我已将“*网络代理缓存条目*”设置为**0**，重新启动“*在线响应者*”服务，现在我有了“实时”行为。

*在我的测试中，我还验证了您提到的相同行为，即 OCSP Web 代理缓存中的条目的生命周期与基于字段“下一个 CRL* ”中指定的日期/时间信息的 OCSP 关联 CRL 的生命周期同步*发布*“的 CRL。

由于我没有找到任何信息来为此缓存的到期定义不同的策略，因此我发布了一个关于这一点的问题： [Windows ADCS Online Responder - 定义 Web 代理缓存条目到期延迟](https://stackoverflow.com/questions/23057513/windows-adcs-online-responder-define-web-proxy-cache-entries-expiration-delay)

# sql - 在 PostgreSQL 中获取两个日期之间的结果

> ID：10170544
> 
> 赞同：41
> 
> 时间：2012-04-16T08:03:09.377
> 
> 标签：sql, postgresql, date, overlap

我有下表：

```
+-----------+-----------+------------+----------+
| id        | user_id   | start_date | end_date |
| (integer) | (integer) | (date)     | (date)   |
+-----------+-----------+------------+----------+ 
```

字段`start_date`和`end_date`保存日期值，如`YYYY-MM-DD`.

此表中的条目可能如下所示：`(1, 120, 2012-04-09, 2012-04-13)`。

我必须编写一个查询，该查询可以获取与某个时期匹配的所有结果。

问题是，如果我想从 to 获取结果`2012-01-01`，`2012-04-12`即使有一个带有`start_date = "2012-04-09"`and的条目，我也会得到 0 个结果`end_date = "2012-04-13"`。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-16T09:13:49.143

```
 SELECT *
   FROM mytable
  WHERE (start_date, end_date) OVERLAPS ('2012-01-01'::DATE, '2012-04-12'::DATE); 
```

[日期时间函数](http://www.postgresql.org/docs/9.1/static/functions-datetime.html)是文档中的相关部分。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-16T13:05:56.173

假设您想要所有“**重叠**”的时间段，即所有至少有一天的时间段。

试着在一条直线上设想时间段，然后在你眼前移动它们，你会*看到*必要的条件。

```
SELECT *
FROM   tbl
WHERE  start_date <= '2012-04-12'::date
AND    end_date   >= '2012-01-01'::date; 
```

这对我来说有时比`OVERLAPS`- 这是另一种好方法（正如[@Marco已经提供](https://stackoverflow.com/a/10171439/939860)的那样）。

请注意细微**差别**（[根据文档](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)）：

> `OVERLAPS`自动将较早的值作为开始。每个时间段都被认为代表半开区间**`start <= time < end`**，除非开始和结束相等，在这种情况下它代表单个时间瞬间。这意味着例如只有一个共同端点的两个时间段不重叠。

大胆强调我的。

### 表现

对于大表，正确的**索引**可以提高性能（*很多*）。

```
CREATE INDEX tbl_date_inverse_idx ON tbl(start_date, end_date DESC); 
```

如果您有其他选择条件，可能与另一个（前导）索引列一起使用。

注意两列的相反顺序。详细解释：

*   [优化对一系列时间戳（两列）的查询](https://dba.stackexchange.com/questions/39589/optimizing-queries-on-a-range-of-timestamps-two-columns/39599#39599)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-27T13:46:02.877

只是有同样的问题，并以这种方式回答，如果这有帮助的话。

```
select * 
from table
where start_date between '2012-01-01' and '2012-04-13'
or    end_date   between '2012-01-01' and '2012-04-13' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T08:27:46.317

要在任何区域设置中进行查询，[请考虑自行格式化日期](http://www.postgresql.org/docs/current/interactive/functions-formatting.html)：

```
SELECT * 
  FROM testbed 
 WHERE start_date >= to_date('2012-01-01','YYYY-MM-DD')
   AND end_date <= to_date('2012-04-13','YYYY-MM-DD'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T08:17:51.717

查看它不起作用的日期——那些日期小于或等于 12 的日期——我想知道它是否将日期解析为 YYYY-DD-MM 格式？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T07:01:34.263

您必须使用日期部分获取方法：

```
SELECT * FROM testbed WHERE start_date  ::date >= to_date('2012-09-08' ,'YYYY-MM-DD') and date::date <= to_date('2012-10-09' ,'YYYY-MM-DD') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-12T06:54:56.983

没有冒犯，但为了检查 sql 的性能，我执行了一些上面提到的解决方案 a pgsql。

让我与您分享我遇到的前 3 种解决方案方法的统计数据。

1) 花费：1.58 毫秒平均

2) 花费：2.87 毫秒平均

3) 花费：3.95 毫秒平均

现在试试这个：

```
 SELECT * FROM table WHERE DATE_TRUNC('day', date ) >= Start Date AND DATE_TRUNC('day', date ) <= End Date 
```

现在这个解决方案花了：1.61 Avg。

[最好的解决方案是marco-mariani](https://stackoverflow.com/users/74305/marco-mariani)建议的第一个

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-22T11:39:57.837

```
SELECT *
FROM ecs_table
WHERE (start_date, end_date) OVERLAPS ('2012-01-01'::DATE, '2012-04-12'::DATE + interval '1'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-19T07:11:59.700

让我们试试`range`数据类型。

- 样本数据。

```
begin;
create temp table tbl(id  serial, user_id integer, start_date date, end_date date);
insert into tbl(user_id, start_date, end_date) values(1, '2012-04-09', '2012-04-13');
insert into tbl(user_id, start_date, end_date) values(1, '2012-01-09', '2012-04-12');
insert into tbl(user_id, start_date, end_date) values(1, '2012-02-09', '2012-04-10');
insert into tbl(user_id, start_date, end_date) values(1, '2012-04-09', '2012-04-10');
commit; 
```

添加一个新的日期范围列。

```
begin;
alter table tbl add column tbl_period daterange ;
update tbl set tbl_period = daterange(start_date,end_date);
commit; 
```

--现在测试时间。

```
select * from tbl
    where tbl_period && daterange('2012-04-10' ::date, '2012-04-12'::date); 
```

返回：

```
 id | user_id | start_date |  end_date  |       tbl_period
----+---------+------------+------------+-------------------------
  1 |       1 | 2012-04-09 | 2012-04-13 | [2012-04-09,2012-04-13)
  2 |       1 | 2012-01-09 | 2012-04-12 | [2012-01-09,2012-04-12) 
```

进一步参考：[https ://www.postgresql.org/docs/current/functions-range.html#RANGE-OPERATORS-TABLE](https://www.postgresql.org/docs/current/functions-range.html#RANGE-OPERATORS-TABLE)

# styles - IE9 向下滚动时不显示页面内容

> ID：10170545
> 
> 赞同：0
> 
> 时间：2012-04-16T08:03:10.227
> 
> 标签：styles, internet-explorer-9

此问题出现在 IE 9 上，所有页面在 IE 8 和 Firefox 中都能正常显示。在 IE9 中，滚动条下方的所有内容都被屏蔽掉了。该页面在显示的页面上正确显示，但如果向下滚动，下面的内容将显示为空白。这仅适用于 IE9 应用程序中的所有页面。IE9 中的特定样式是否存在问题？

我附上了截图。 ![滚动内容被删减](../Images/730c0c58c30102d2e1112f71b87ba1f3.png)

提前致谢

# sql - 如何减少浮动长度

> ID：10170548
> 
> 赞同：-2
> 
> 时间：2012-04-16T08:03:39.477
> 
> 标签：sql, sql-server

使用 SQL Server 2000

我想减少小数长度

询问

```
Select 23/12 as total 
```

输出显示为`1.99999999999`

我不想四舍五入，我想这样显示`1.99`

尝试查询

```
Select LEFT(23/12, LEN(23/12) - 3) as total 
```

上面的查询只有在有像 12.444444 这样的十进制值时才有效，但如果总数是单个数字意味着像 12 或 4 或 11 ......，我在运行时遇到错误。

这该怎么做。

需要查询帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:43:26.313

有一个非常简单的解决方案。你可以在 BOL 中找到它。Round 接受一个可选的第三个参数，它是 round 类型。这些值是舍入或截断的。

> ROUND numeric_expression , 长度 [ ,function ] )
> 
> ...
> 
> function 是要执行的操作类型。函数必须是 tinyint、smallint 或 int。当 function 被省略或值为 0（默认）时，numeric_expression 被舍入。当指定 0 以外的值时，numeric_expression 将被截断。

所以就这样做

```
Select ROUND(cast(23 as float)/12, 2, 1) as total 
```

这给出了 1.91。请注意，如果您真的看到 1.999 - 您的计算机确实有问题。23/12 = 1.916666666（无限期）。您需要将其中一个数字转换为浮点数，因为 sql 假设它们是整数，否则进行整数除法。您当然可以将它们都转换为浮点数，但只要一个是浮点数，另一个也会被转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:09:14.350

不是非常优雅，但适用于所有情况：

总计选择 CONVERT(float,LEFT(CONVERT(nvarchar, 23.0/12.0),CHARINDEX('.',CONVERT(nvarchar, 23.0/12.0)) + 2))

标量函数

```
-- Description: Truncate instead of rounding a float
-- SELECT dbo.TruncateNumber(23.0/12.0,2)
-- =============================================
CREATE FUNCTION TruncateNumber
(
    -- Add the parameters for the function here
    @inFloat float,
    @numDecimals smallint
)
RETURNS float
AS
BEGIN
    IF (@numDecimals < 0)
    BEGIN
        SET @numDecimals = 0
    END
    -- Declare the return variable here
    RETURN CONVERT(float,LEFT(CONVERT(nvarchar, @inFloat),CHARINDEX('.',CONVERT(nvarchar, @inFloat)) + @numDecimals)) 

END
GO 
```

# javascript - Google 地方信息自动填充

> ID：10170549
> 
> 赞同：2
> 
> 时间：2012-04-16T08:03:58.840
> 
> 标签：javascript, ruby-on-rails-3, google-api

我正在使用 google.maps.places.Autocomplete，我希望城市自动完成，但将自动完成结果限制在多个城市，而不仅仅是谷歌文档中的一个。

这就是我所拥有的

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places" type="text/javascript"></script>
<script type="text/javascript">
 function initialize() {

    var input = document.getElementById('searchTextField');

    /* restrict to multiple cities? */
    var options = {
       types: ['(cities)'],
       componentRestrictions: {country: "us", "fr"}
    };

    var autocomplete = new google.maps.places.Autocomplete(input, options);
 }
 google.maps.event.addDomListener(window, 'load', initialize);
</script>

<div>
<input id="searchTextField" type="text" size="50" placeholder="Enter a location" autocomplete="on">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:38:17.217

实际上 Places API 仅支持 1 个国家/地区作为限制。[组件限制](https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:32:54.583

我是谷歌地方自动完成的新手，但我认为错误在这里：

```
componentRestrictions: {country: "us", "fr"} 
```

尝试这个：

```
componentRestrictions: {country: ["us", "fr"]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T21:03:02.680

您只能添加 1 个国家/地区进行限制。 [https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions](https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions)

# c# - how to match an expression that starts and ends with a cariage return and belongs to a group?

> ID：10170552
> 
> 赞同：0
> 
> 时间：2012-04-16T08:04:10.463
> 
> 标签：c#, regex

Sample string

```
 +ABC:108\r\nmessage a\r\n+ABC:117\r\nmessage b\r\n 

```

here is my initial regex

`+ABC:(\d+)\r\n(.+)\r\n`

```
Groups
Group 1: Index
Group 2: Message

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:32:22.300

你的确切问题在哪里？

我看到了这一点：

1.  如果你想匹配`+`字面意思，你必须在你的 regex 中转义它`\+ABC:(\d+)\r\n(.+)\r\n`。`\`如果您使用逐字字符串 ( `@"regex"`) 来定义您的正则表达式，则只有一个

2.  如果您不使用该`[Singleline][1]`选项，则应该没有贪心问题，因为`.`它将不匹配换行符。

3.  你确定那`\r\n`是你的换行符吗？也许使用`\r?\n`更灵活。

# session - create your own session id in struts2 or j2ee app

> ID：10170556
> 
> 赞同：0
> 
> 时间：2012-04-16T08:04:44.953
> 
> 标签：session, struts2, sessionid

I have an app using Struts2 jsp and java..sessionid is created by container.I want to create my own session id and set to that particular session...just want to overwrite.I have aslo created a filter. session id.any clue

something like

session.setSessionId()

thanks..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:12:47.320

您可以使用可以实现[CookiesAware的](http://struts.apache.org/2.1.2/struts2-core/apidocs/org/apache/struts2/interceptor/CookiesAware.html)[CookieInterceptor](http://struts.apache.org/2.0.14/struts2-core/apidocs/org/apache/struts2/interceptor/CookieInterceptor.html)来执行此操作，然后拦截调用以设置您自己的 sessionId。

编辑：

刚刚意识到 CookieInterceptor 不允许你设置 cookie，所以我做了这样的事情

在我的执行方法中，我`Action`这样做了：

```
public String execute() {
        String jSessionId = null;
        for (Cookie c : httpServletRequest.getCookies()) {
            if (c.getName().equals("JSESSIONID"))
                jSessionId = c.getValue();
        }
        System.out.println("Value Found In Request = " + jSessionId);
        jSessionId = "TestingOverrideOfJSessionId";
        Cookie myCookie = new Cookie("JSESSIONID", jSessionId);
        myCookie.setMaxAge(60 * 60 * 24 * 365); // Make the cookie last a year
        httpServletResponse.addCookie(myCookie);

        return SUCCESS;
    } 
```

结果

![SessionId 覆盖](../Images/a97251cce23ee5bffa1c8d675fd6bb1d.png)

# embedded - Windows ce 6.0 上的 Windows 服务？

> ID：10170558
> 
> 赞同：0
> 
> 时间：2012-04-16T08:04:55.857
> 
> 标签：embedded, windows-ce

嗯，标题说了算。是否可以在 Windows Embedded CE 6.0 上创建服务？

我找不到详细的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:34:58.347

服务在 servicesd.exe 上下文中运行。版本之间的文档似乎不完整；CE 4.2 的文档可以在[这里](http://msdn.microsoft.com/en-us/library/ms938094.aspx)找到，CE 7 的文档可以在[这里找到，](http://msdn.microsoft.com/en-us/library/aa446909.aspx)[这里](http://msdn.microsoft.com/en-us/library/ee499183.aspx)有一个5.0 的示例。[此处](http://blogs.msdn.com/b/cenet/archive/2006/11/07/services-exe-and-the-windows-ce-6-0-kernel.aspx)和[此处](http://blogs.msdn.com/b/cenet/archive/2006/11/28/writing-services-for-the-wince-6-0-kernel.aspx)有 CE 6.0 特定文章可能有助于解决与早期版本的任何差异，但您可能会发现 7.0 文档适用。

# netty - in netty, we can only write and receive data less than 1024bytes: how we can write or receive more?

> ID：10170564
> 
> 赞同：8
> 
> 时间：2012-04-16T08:05:28.383
> 
> 标签：netty

When writing 2048bytes in on handler, the messageRevieved method should be called twice to receive the all data... how I can receive the 2048bytes data in

**Code**

**Server:**

```
public class Server{
    public static void main(String[] args){
        ChannelFactory factory=new NioServerSocketChannelFactory(
            Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool());
        ServerBootstrap bootstrap=new ServerBootstrap(factory);
        bootstrap.setPipelineFactory(new CarPipelineFactory());

        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);

        bootstrap.bind(new InetSocketAddress(8989));
    }
} 
```

**Server Handler:**

```
public class ServerHandler extends SimpleChannelHandler{

    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e){
        byte[] resp=data.getBytes();//data is a String greater than 1024bytes;
        ChannelBuffer buffer=ChannelBuffers.buffer(resp.length);
        buffer.writerBytes(resp);
        e.getChannel().write(buffer);
        buffer.clear();
    }
} 
```

**Client:**

```
public class Client{
    public static void main(String[] args){
        ChannelFactory channelFactory=new NioClientSocketChannelFactory(
            Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool());
        ClientBootstrap bootstrap=new ClientBootstrap(channelFactory);
        bootstrap.getPipeline().addLast("handler", new PhoneClientHandler());

        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);

        bootstrap.connect(new InetSocketAddress("127.0.0.1",8181));
    }
} 
```

**Client Handler:**

```
public class ClientHandler extends SimpleChannelHandler{
    public void messageRecieved(ChannelHandlerContext ctx, ChannelStateEvent e){
        ChannelBuffer buffer=(ChannelBuffer)e.getMessage();
        int size=buffer.readableBytes();
        byte[] bytes=new byte[size];
        buffer.readBytes(bytes);
        buffer.clear();
        System.out.println(new String(bytes));//if the data size>1024,the String will speprate into parts.
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:30:12.263

好吧，您总是可以决定一次写入多少字节，但您绝对不知道何时接收到多少字节（这就是 NIO 有意义的原因）。您需要处理自己的缓冲区以接收所需的固定数量的字节。为此，您可以使用为此目的设计的**FrameDecoder 。**

**此外，您可以通过将tcpNoDelay**设置为 true来确保数据不会在发送方套接字缓冲区中停留太久，因此在物理发送数据之前不会等待当前“帧”达到某个临界大小。

如果我理解得很好，您一方面说 2048 字节，但另一方面在 messagedReceived 事件中未收到所有数据？尝试检查这些常见问题：

*   您的应用程序终止过早且数据尚未到达
*   您的数据卡在“发送方”的套接字缓冲区中，因为您没有**关闭**Channel 并且**tcpNoDelay**选项未设置为 true。这导致套接字在发送数据包之前等待一些额外的字节。
*   您没有读取 ChannelBuffer 内的所有数据，但出于某种原因，将**readerIndex**设置为更远的位置

尝试向我们展示您的部分代码，它应该会让事情变得更容易......

添加于 2012 年 4 月 17 日

如果我了解您正在尝试将字符串的字节数组编码从发送者传递给接收者。这是您进行小重构后的代码：

- - - - - - - - - - - - - - 代码 - - - - - - - - - - - --------写手：response.size()>1024bytes

```
byte[] datas = ((String)msg).getBytes("UTF-8"); //ALWAYS SPECIFY THE ENCODING
ChannelBuffer buffer = ChannelBuffers.wrap(datas); //USE DIRECTLY THE ARRAY
System.out.println(buffer);    //buffer'size>1024 here
channel.write(buffer); 
```

----------------------------receive hand: 应该收到两次，println() 会执行两次

```
ChannelBuffer buffer = (ChannelBuffer) event.getMessage(); 
System.out.println(buffer)    //buffer'size once 1024,once the remainder size
byte[] datas =buffer.readBytes(buffer.readableBytes()).array()
String msg=new String(datas , "UTF-8"); //BAD IDEA because the bytes sequence of the last UTF-8 char could be uncompleted there
System.out.println(str); 
```

这不是这样做的方法，您应该直接使用包**org.jboss.netty.handler.codec.string中的****StringEncoder**和**StringDecoder**。它将为您处理框架问题。如果你还想调试你的代码，请使用 Netty 提供的**LoggingHandler**。你也真的设置了这个选项：

 ****```
bootstrap.setOption("tcpNoDelay", true); 
```

在双方引导？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T08:07:28.850

尝试在您`TruncatedChannelBuffer`的. 我认为它会起作用..或者如果它不起作用，请发布生成异常的堆栈跟踪。我在我的代码中尝试了这个并且它有效..我希望这会对你有所帮助。`BigEndianHeapChannelBuffer``ClientHandler`

```
public void messageReceived(ChannelHandlerContext channelHandlerContext,MessageEvent messageEvent) throws Exception {

    Object messageObject = messageEvent.getMessage();

    // if size of message < 1024 then TruncatedChannelBuffer is returned.

    if (messageObject instanceof TruncatedChannelBuffer) {

        try {

            TruncatedChannelBuffer truncatedChannelBuffer = (TruncatedChannelBuffer) messageObject;

            byte[] byteArray = new byte[truncatedChannelBuffer.readableBytes()];

            truncatedChannelBuffer.readBytes(byteArray);

            System.out.print(" Message = "+new String(byteArray));

            truncatedChannelBuffer.clear();

        } catch (Exception e) {

            System.out.println("Exception in MessageReceived...");

            e.printStackTrace();

        }
    }
    // if size of message > 1024 then BigEndianHeapChannelBuffer is returned.

    if (messageObject instanceof BigEndianHeapChannelBuffer) {

        try {

            BigEndianHeapChannelBuffer bigEndianHeapChannelBuffer = (BigEndianHeapChannelBuffer) messageObject;

            byte[] byteArray  = new byte[bigEndianHeapChannelBuffer.readableBytes()];

            bigEndianHeapChannelBuffer.readBytes(byteArray);

            System.out.print(" Message = "+new String(byteArray));

            bigEndianHeapChannelBuffer.clear();

        } catch (Exception e) {

            System.out.println("Exception in MessageReceived...");

            e.printStackTrace();

        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:53:35.337

首先，对于客户端，引导选项不应以'child'开头：

```
bootstrap.setOption("tcpNoDelay", true);
bootstrap.setOption("keepAlive", true); 
```

此外，您不要在客户端和服务器上使用相同的端口！

其次，您没有“关闭”策略：假设您的客户何时知道其工作已完成？你如何防止线程过早结束？你应该做这个

服务器处理程序

```
public class ServerHandler extends SimpleChannelHandler{

    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e){
        byte[] resp=data.getBytes();//data is a String greater than 1024bytes;
        ChannelBuffer buffer=ChannelBuffers.buffer(resp.length);
        buffer.writerBytes(resp);
        e.getChannel().write(buffer);
        buffer.clear();
        e.getChannel.close();
    }
} 
```

客户端引导

```
public class Client{
    public static void main(String[] args){
        ChannelFactory channelFactory=new NioClientSocketChannelFactory(
            Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool());
        ClientBootstrap bootstrap=new ClientBootstrap(channelFactory);
        bootstrap.getPipeline().addLast("handler", new PhoneClientHandler());

        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);

        // Start the connection attempt.
        ChannelFuture future = bootstrap.connect(new InetSocketAddress("127.0.0.1",8181));

        // Wait until the connection is closed or the connection attempt fails.
        future.getChannel().getCloseFuture().awaitUninterruptibly();

        // Shut down thread pools to exit.
        bootstrap.releaseExternalResources();
    }
} 
```

最后，您需要通过阅读大量示例来更好地理解您在做什么。它们可以在主捆绑下载的**org.jboss.netty.example包中找到。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T17:35:18.887

RenaudBlue@ 提出了很好的观点。此外，我建议切换到 Netty4，它使所有 ByteBufs 动态化，并且使分块读/写更易于管理。请参阅[“移植客户端”](http://netty.io/wiki/new-and-noteworthy.html "Netty4 的变化")。

例如，

```
private void sendNumbers() {
  // Do not send more than 4096 numbers.
  boolean finished = false;
  MessageBuf<Object> out = ctx.nextOutboundMessageBuffer();
  while (out.size() < 4096) {
      if (i <= count) {
          out.add(Integer.valueOf(i));
          i ++;
      } else {
          finished = true;
          break;
      }
  }

  ChannelFuture f = ctx.flush();
  if (!finished) {
      f.addListener(numberSender);
  }
}

private final ChannelFutureListener numberSender = new ChannelFutureListener() {
  @Override
  public void operationComplete(ChannelFuture future) throws Exception {
      if (future.isSuccess()) {
          sendNumbers();
      }
  }
}; 
```

Netty4 还具有通道选项配置的类型安全性，这可以防止`"child.tcpNoDelay"`错误。

但 Netty4 的最大胜利是定义良好的线程模型，这使得 Netty*更*易于使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T11:59:38.000

我有同样的问题，尝试使用 Oio 而不是 Nio！（只需将“nio”更改为“oio”，将“Nio”更改为“Oio”。

[http://lists.jboss.org/pipermail/netty-users/2009-June/000891.html](http://lists.jboss.org/pipermail/netty-users/2009-June/000891.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-04T07:37:49.430

您需要按`FixedRecvByteBufAllocator`以下`SocketChannel`方式设置`childHandler()`：

```
bootstrap.childHandler(new ChannelInitializer<SocketChannel>() {
            @Override
            protected void initChannel(SocketChannel ch) throws Exception {
                ch.config().setRecvByteBufAllocator(new FixedRecvByteBufAllocator(2 * 1024));
                ChannelPipeline pipeline = ch.pipeline();
                pipeline.addLast("idleStateHandler", new IdleStateHandler(0, 0, 5));
                pipeline.addLast(new StringEncoder());
                pipeline.addLast(new StringDecoder());
                ...
            }
        }); 
```****

# android - Can we change the size of Native Heap memory (16 MB) in Android

> ID：10170566
> 
> 赞同：1
> 
> 时间：2012-04-16T08:05:41.980
> 
> 标签：android

Maximum native memory that can be allocated to an android app is 16 MB for all apps but i want to change this heap size through code is it possible ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:07:07.860

No. Not without extreme trouble (think rooting, new roms, stuff like that).

(Also, it's not 16 for all devices, some have more)

# java - Problems parsing a table inside an RTF file using Apache Tika

> ID：10170570
> 
> 赞同：1
> 
> 时间：2012-04-16T08:06:02.510
> 
> 标签：java, parsing, rtf, apache-tika

I'm trying to parse a RTF file using Apache Tika. Inside the file there is a table with several columns.

The problem is that the parser writes out the result without any information in which column the value was.

What I'm doing right now is:

```
AutoDetectParser adp = new AutoDetectParser(tc);
Metadata metadata = new Metadata();
String mimeType = new Tika().detect(file);
metadata.set(Metadata.CONTENT_TYPE, mimeType);
BodyContentHandler handler = new BodyContentHandler();

InputStream fis = new FileInputStream(file);

adp.parse(fis, handler, metadata, new ParseContext());

fis.close();
System.out.println(handler.toString()); 
```

It works but I need to know like meta-information.

Is there already a Handler which outputs something like HTML with a structure of the read RTF file?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:50:06.420

我建议不要向 Tika 询问纯文本版本，然后想知道所有漂亮的 HTML 信息都去了哪里，而只是向 Tika 询问作为 XHTML 的文档。然后，您将能够处理它以在您的 RTF 文件中找到您想要的信息

如果您查看 Tika 示例或 Tika 单元测试，您会看到相同的模式，这是获取 XHTML 输出的简单方法

```
 Metadata metadata = new Metadata();

    StringWriter sw = new StringWriter();
    SAXTransformerFactory factory = (SAXTransformerFactory)
             SAXTransformerFactory.newInstance();
    TransformerHandler handler = factory.newTransformerHandler();
    handler.getTransformer().setOutputProperty(OutputKeys.METHOD, "xml");
    handler.getTransformer().setOutputProperty(OutputKeys.INDENT, "no");
    handler.setResult(new StreamResult(sw));

    parser.parse(input, handler, metadata, new ParseContext());

    String xhtml = sw.toString(); 
```

# android - screen orientation in Live Wallpaper

> ID：10170574
> 
> 赞同：1
> 
> 时间：2012-04-16T08:06:12.400
> 
> 标签：android, canvas, bitmap, screen-orientation, live-wallpaper

I have created a live wallpaper It is working fine in portrait mode but when i put the phone in Landscape mode the view does not appear properly.Now what i want to do is "To fix the screen orientation in portrait mode". How can i do this for a live wallpaper? I tried to rotate the bitmap and the canvas but it is appear not as good. Is there any tutorial on rotating the canvas and bitmap? Please suggest and please advice me for my problem. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:49:16.813

请看一下我的代码：

```
 public class PonyWallpaper extends AnimationWallpaper {
        /*some code here*/
        class PonyEngine extends AnimationEngine {
        /*some code here as well*/
            @Override
            public void onSurfaceChanged(SurfaceHolder holder, int format,
                    int width, int height) {
                Log.v("orientation changed", "w: "+width + " h: " + height + " width desired: " + this.getDesiredMinimumWidth() + " height desired: " + this.getDesiredMinimumHeight()); 
```

AnimationEngine 声明为

```
protected abstract class AnimationEngine extends android.service.wallpaper.WallpaperService.Engine 
```

从横向切换到纵向时的输出：

> 方向改变（352）：w：800 h：480 所需宽度：960 所需高度：800

从纵向切换到横向时的输出：

> 方向改变（352）：w：480 h：800 所需宽度：960 所需高度：800

如您所见，每次更改方向时都会调用 android.service.wallpaper.WallpaperService.Engine 类的 onSurfaceChanged 方法。

据我观察，

> this.getDesiredMinimumWidth()

和

> this.getDesiredMinimumHeight()

不要改变并且是宽度和高度的最大可能值。

我的解决方案是：

*   将宽度、所需宽度、高度和所需高度传递给我的抽屉对象的方法；
*   调用 drawObject() - 坐标范围从 0.0 到 1.0 的方法；
*   将抽屉对象内的这些值缩放到由所需宽度和所需高度描述的逻辑坐标；
*   通过传递的 xPixelOffset 来设置真实 x 坐标的偏移量

> onOffsetsChanged

的方法

> android.service.wallpaper.WallpaperService.Engine

*   根据实际高度和所需高度的差异来设置实际 y 坐标的偏移量。

我希望这会有所帮助！

# facebook - video.watches built-in type trouble

> ID：10170578
> 
> 赞同：1
> 
> 时间：2012-04-16T08:06:34.653
> 
> 标签：facebook, video, facebook-opengraph, watch

I have a trouble with built-in open graph action type video.watches. I develop an iOS app that should post video watch events. there are two watch action types in my apps' settings and code for them is:

1.  [appnamespace]:watch
2.  video.watches

first one is used for the web site. I need to use second one (not my wish but requirement of the client). To approve the second one I have to provide the test environment to show^ how it works but I have some troubles with it, because app with OpenGraph is not in app store and also it allows watching content only in Russia territory.

So I have couple questions for those who is familiar with Open Graph:

1.  Is it possible to use video.watches request to post actions or facebook requires using request like [appnamespace]:watch for all approved actions?

2.  If the first question answer is "Yes it's possible", what should I do to provide the test environment? I mean, should I connect with any support (and how to do that?) to provide the test app version?

# java - Fail to upload a image file into Google Doc via java api

> ID：10170579
> 
> 赞同：1
> 
> 时间：2012-04-16T08:06:39.717
> 
> 标签：java, google-docs, google-docs-api

below is my code

```
DocsService client = new DocsService("testappv1");
client.setUserCredentials(username, password);
client.setProtocolVersion(DocsService.Versions.V2);
File file = new File("C:/test.jpg");
DocumentEntry newDocument = new DocumentEntry();
newDocument.setTitle(new PlainTextConstruct("test"));
String mimeType = DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
newDocument.setMediaSource(new MediaFileSource(file, mimeType));
newDocument = client.insert(destFolderUrl, newDocument); 
```

the document was created successful, but it did not contain anything.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:11:57.700

尝试以下

```
client.insert(new URL("https://docs.google.com/feeds/documents/private/full/?convert=false"), newDocument); 
```

我认为这`?convert=false`一点很重要，不知道没有网址你是怎么做到的

```
client.insert(new URL(destFolderUrl+ "?convert=false"), newDocument); 
```

希望能在你的情况下工作

# mysql - 使用 sql 在具有不同架构的数据库表之间复制数据

> ID：10170580
> 
> 赞同：0
> 
> 时间：2012-04-16T08:06:45.410
> 
> 标签：mysql, sql, rdbms

我在 MySql DB 中有 2 个表 A、B。

表 A 有 2 列（用户、通行证）

表 B 有额外的 3 列（user、pass、date1、date2、boolean）

我想从表 A 中复制数据并将其插入到表 B 中，并使用其他列的默认值。实现这一目标的最佳方法是什么？（首选sql）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:12:37.083

检查这个网址

```
http://dev.mysql.com/doc/refman/5.1/en/insert-select.html 
```

他们还在下面发布了一个示例，完全符合您在讨论部分中的要求

```
mysql> INSERT INTO orders (customer_cust_id, orderdatetime, message, taxrate, shippingprice)
    -> SELECT '1', NOW(), null, taxrate, shippingprice FROM customer
    -> WHERE cust_id='1';
    Query OK, 1 row affected (0.01 sec) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:15:10.063

如果表中未定义默认值：

```
insert into b (user,pass,date1,date2,boolean) 
select user,pass,'2012-04012','2012-04012',true from a 
```

如果表定义包含默认值：

```
insert into b (user,pass,date1,date2,boolean) 
select user,pass from a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:13:11.560

此插入语句使用 select 子句为插入提供值：

```
insert into B(user,pass) select user,pass from A; 
```

# node.js - Coffee-Script Nodejs 和 Mongoose

> ID：10170582
> 
> 赞同：1
> 
> 时间：2012-04-16T08:06:51.843
> 
> 标签：node.js, mongodb, coffeescript, express, mongoose

嘿，所有人都在尝试使用 express 和 mongoose 来玩 nodejs MVC。

我有以下代码：

```
mongoose = require 'mongoose'
Schema = mongoose.Schema
mongoose.connect 'mongodb://localhost/quotes'

Quote = new Schema()

Quote.add {
  quote : { type: String, required: true}
  , rank  : Number
}

quote = new mongoose.model 'Quote', Quote

module.exports = 

  index: (req,res, next) ->
    quote.find {}, (err,docs) ->
      res.render docs 
```

当我去运行服务器时，我收到以下信息：

```
Server started on port 3000

module.js:311
    throw err;
          ^
TypeError: Cannot read property 'Quote' of undefined
    at new <anonymous> (/Users .... 
```

我无法弄清楚为什么它一直抛出未定义的错误。

**编辑：**

这是编译好的JS

```
var Quote, Schema, mongoose, quote;

mongoose = require('mongoose');

Schema = mongoose.Schema;

mongoose.connect('mongodb://localhost/quotes');

Quote = new Schema();

Quote.add({
  quote: {
    type: String,
    required: true
  },
  rank: Number
});

quote = new mongoose.model('Quote', Quote);

module.exports = {
  index: function(req, res, next) {
    return quote.find({}, function(err, docs) {
      return res.render(docs);
    });
  }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:29:28.453

我相信`mongoose.model`不是构造函数。我已经有一段时间没有使用猫鼬了，但我也不记得`Schema.add`了，这些字段应该传递给构造函数调用。所以它看起来像这样：

```
Quote = new Schema
    quote : { type: String, required: true }
    rank  : Number

quote = mongoose.model 'Quote', Quote 
```

* * *

*编辑*：`Schema.add`很好，它实际上是从构造函数中调用的。它只是在文档中简要提到。

# d - 获取用于成员声明的范围类型

> ID：10170583
> 
> 赞同：4
> 
> 时间：2012-04-16T08:06:55.660
> 
> 标签：d

我有一个有点复杂的范围，我想分配给一个类的数据成员。

```
chain(nicklist,
      map!(a=>format("%s%d", nicklist[0], a))(sequence!"n+1"())) 
```

`nicklist`只是一个`string[]`。通常，我可信赖的朋友`auto`会处理这个问题，但对于数据成员，我需要声明类型，而我不知道该类型应该是什么。我试图弄清楚如何使用`typeof()`它来获取它，但运行时参数让我感到困惑，我无法弄清楚如何制定它。

（这被用于 IRC 机器人。nicklist 是我希望它按顺序尝试的刻痕列表，在它用尽了所有刻痕冲突的刻痕后，它只会尝试第一个附加数字的刻痕）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T08:34:56.777

这会起作用：

```
typeof(chain(cast(string[])[], map!(a=>format("%s%d", "", a))(sequence!"n+1"()))) memberVar; 
```

另一种可能性是让一个函数包装它，然后获取它的返回类型并使用它：

```
auto func(string[] nicklist)
{
    return chain(nicklist,
                 map!(a=>format("%s%d", nicklist[0], a))(sequence!"n+1"()));
}

ReturnType!func memberVar; 
```

`ReturnType`在 std.traits 中。

# eclipse - Fail fast in junit testing?

> ID：10170585
> 
> 赞同：3
> 
> 时间：2012-04-16T08:07:08.390
> 
> 标签：eclipse, junit, integration-testing, junit4

Is there anyway i can stop the junit eclipse test runner when it fails a test for the first time ?

I prefer to check and fix the failed test before continue testing the rests.

From [this QA](https://stackoverflow.com/questions/1923857/is-there-a-way-to-fail-fast-for-junit-with-the-maven-surefire-plugin), i can see that we can register a listener as a workaround. But i wonder how to register a listener for the eclipse junit runner ?

# java - 如何在网络浏览器中显示 rdf 文件

> ID：10170588
> 
> 赞同：3
> 
> 时间：2012-04-16T08:07:37.693
> 
> 标签：java, rdf, semantic-web

我有一些返回 RDF 文件的 Web 服务。现在我需要显示这个 RDF 文件，例如：[http](http://dbpedia.org/page/Berlin) ://dbpedia.org/page/Berlin 。是否有一些 Java 库可以做到这一点，因为现在它看起来就像 XML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:53:36.880

试试[Pubby](http://www4.wiwiss.fu-berlin.de/pubby/)，这是一个可以连接到 RDF 数据源并呈现 HTML 视图的 Java Web 应用程序。通常 RDF 数据存储在 SPARQL 存储中，但您也可以使用`conf:loadRDF`配置选项从 RDF 文件中加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:29:57.390

试试[Jena](http://incubator.apache.org/jena/ "耶拿")，它会将 RDF 解析为 Java 结构，您可以使用这些结构生成 HTML。另请参阅此处的答案：[从 RDF 到 html 的 XSLT 转换](https://stackoverflow.com/questions/4180840/xslt-transformation-from-rdf-to-html)

# c# - 在可空类型上使用合并空运算符会更改隐式类型

> ID：10170592
> 
> 赞同：14
> 
> 时间：2012-04-16T08:07:51.883
> 
> 标签：c#, resharper, implicit, null-coalescing-operator

我希望接下来的三行代码是相同的：

```
public static void TestVarCoalescing(DateTime? nullableDateTime)
{
  var dateTimeNullable1 = nullableDateTime.HasValue ? nullableDateTime : DateTime.Now;
  var dateTimeNullable2 = nullableDateTime != null ? nullableDateTime : DateTime.Now;
  var dateTimeWhatType = nullableDateTime ?? DateTime.Now;
} 
```

在所有情况下，我都分配`nullableDateTime`给新变量。我希望所有变量的类型都成为`DateTime?`，因为那是`nullableDateTime`. 但令我惊讶的是，`dateTimeWhatType`just 的类型变成了`DateTime`，所以不能为空。

更糟糕的是，ReSharper 建议用空合并表达式替换第二个语句，将其转换为表达式 3。因此，如果我让 ReSharper 做它的事情，变量的类型将从`DateTime?`变为`DateTime`。

事实上，假设在该方法的其余部分，我会使用

```
if (someCondition) dateTimeNullable2 = null; 
```

这可以编译得很好，直到我让 ReSharper 用空合并版本替换第二个表达式。

AFAIK，替换

```
somevar != null ? somevar : somedefault; 
```

和

```
somevar ?? somedefault; 
```

确实应该产生相同的结果。但是对于可空类型的隐式类型，编译器似乎威胁`??`到了它的意思。

```
somevar != null ? somevar.Value : somedefault; 
```

所以我想我的问题是为什么在我使用时隐式类型会发生变化`??`，以及在文档中我可以找到有关此信息的位置。

*顺便说一句，这不是真实世界的场景，但我想知道为什么使用`??`更改（隐式）类型。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T08:26:34.160

你的前两个例子让你误入歧途；最好不要考虑你的

```
var dateTimeNullable1 = nullableDateTime.HasValue 
    ? nullableDateTime 
    : DateTime.Now; 
```

反而

```
var dateTimeNullable1 = nullableDateTime.HasValue 
    ? nullableDateTime.Value 
    : DateTime.Now; 
```

* * *

引用 C# 3.0 规范的第 7.12 节“空合并运算符”（对于稍微粗略的格式表示歉意）：

> 表达式的类型`a ?? b`取决于操作数类型之间可用的隐式转换。按照优先顺序， 的类型`a ?? b`是`A`[`0`]、`A`或`B`，其中`A`的类型是`a`的`B`类型`b`（前提是 `b`具有类型），并且`A`[`0`]是`A`if 的基础类型`A`是可空类型，`A`否则。

所以如果`a`is`Nullable<Something>`并且`b`可以隐式转换为`Something`，则整个表达式的类型将是`Something`。正如@Damien_The_Unbeliever 建议的那样，这个运算符的*重点*是合并空值！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T10:20:46.590

去所有语言律师，一会儿。从 C# 规范（版本 4）：

> **7.13**
> 
> 表达式的类型`a ?? b`取决于操作数上可用的隐式转换。按优先顺序， 的类型`a ?? b`是`A0`、`A`或`B`，其中`A`的类型是`a`（前提是`a`有类型），`B`是的类型是`b`（前提是`b`有类型），并且`A0`是基础类型`A`if`A`是可空类型，或`A`其他。

因此，`??`如果第一个表达式是可空类型，则显式定义为首选第一个表达式的基础类型。

而**7.14**中的语言（处理）只讨论了and`?:`的实际类型，来自 form ，并讨论了这两种类型之间的*隐式转换。*`x``y``b ? x : y`

 *> 如果存在从 X 到 Y 的隐式转换（第 6.1 节），但不存在从 Y 到 X 的隐式转换，则 Y 是条件表达式的类型

由于[`Nullable(T)`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)定义了从to的*隐式*转换，并且只定义了从 to 的显*式*转换，所以整个表达式唯一可能的类型是.`T``Nullable(T)`*`Nullable(T)``T``Nullable(T)`**

# python - Photo Vignette Removal Tool (Jython, Python)

> ID：10170593
> 
> 赞同：-4
> 
> 时间：2012-04-16T08:07:58.120
> 
> 标签：python, jython

I need to build code for this question.

1.  First we need to understand what the vignette looks like in isolation, without the clutter of a beautiful scene. For this, a picture of a flat surface of a single colour that is evenly lit (such as a white wall or plain blue sky during mid-day) is obtained and used as a “vignette profile”. You are given the following vignette profile image.

    In this image, the pixels towards the center of the image have higher RGB values (i.e. brighter pixels) than the pixels that are away from the center. The image is also black and white, so red, green and blue values of any given pixel are the same. You must not modify this image.

2.  We need to use the vignette profile image from step #1 as a filter for our normal photos captured by our camera so that the vignette can be removed. For this you need to divide the photo image (with vignette) by the vignette profile image. As the pixels in the vignette image have RGB values that are smaller (darker) towards its edges, dividing the original image's corresponding pixels by a small number will make them brighter

These are the hints

Hint 1: This requires you to perform your operations on your images, pixel by pixel. I.e. you cannot do it in a single step.

Hint 2: The first challenge for you will be keeping the RGB values resulting from the division within the 0-255 range for each channel, as valid RGB values are between 0 (darkest) and 255 (brightest).

* * *

Edit:

Sample code:

```
def runA1(picture): myFile = pickAFile() picture = makePicture(myFile)

 myFile2 = pickAFile()
picture2 = makePicture(myFile2)

for x in range(0,getWidth(picture)):
    for y in range(0,getHeight(picture)):
      px = getPixel(picture,x,y)
      color = getColor(px)
      color = makeLighter(color)
      setColor(px,color)

for x in range(2,getWidth(picture)):
    for y in range(2,getHeight(picture)):
      px = getPixel(picture,x,y)
      color = getColor(px)
      color = makeDarker(color)
      setColor(px,color)

show(picture2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:27:49.243

由于您还没有证明您自己尝试过任何事情，因此我只会提示您应该尝试什么。

1.  考虑以 0-255 的形式表示为三个整数的单个像素`(R,G,B)`。晕影蒙版中的相应像素具有值`A`0-255。除以并`(R,G,B)`乘以*255* 得到未晕影的像素。（为什么我们需要乘以 256？）`A`*`(RR,GG,BB)`*

**   决定你想对`R,G,B`超过`255`. 如果晕影值`A`为零会怎样？

    *   对图像中的每个像素执行此操作，从左到右的第一行像素开始，然后是下一行，依此类推，直到完成。* 

 ** * *

顺便说一句，这种事情*是*在具有一流数值矩阵支持的语言中的一步操作——比如 MATLAB、Octave、**Numpy/Scipy**。这是一个 MATLAB 示例：

```
processed_image = original_image ./ repmat(vignette_image,[1 1 3]) * 256 
```

* * *

编辑2：

对您的示例代码的一些评论：

1.  您的缩进错误 - 此代码将无法运行。当您将其粘贴到 StackOverflow 时，它可能会被破坏。请修复它。尤其是，

    *   该`def`语句必须单独一行。
    *   `myFile2 =....`必须从 def: 语句中缩进。
2.  `myFile1`, `myFile2`- 这些变量名可能更有意义。（其中哪张是原始照片？哪个是晕影遮罩？您可以尝试调用这些变量`original_file`，`vignette_file`而不是。同上`myPicture1`，`myPicture2`。）

3.  您的代码中的注释在哪里？很难说你的代码做了什么。

除此之外，您需要发布更多代码。您的示例必须是[简短、自包含、正确的示例](http://sscce.org)。现在您的代码示例不是独立的，因为要运行它，我们还需要`getPixel()`、`getColor()`、`makeLighter()`等函数。由于缩进错误，它也无法编译。*

# c# - 比较列表 values C# I am having problem with List Object values. Object is an object of class which holding two integer number. like List container; container.Add(new Coordinates(x_axis, y_axis) 问问题 问问题 2012-04-16T08:08:00.960 5529 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am having problem with List Object values. Object is an object of class which holding two integer number. like List container; container.Add(new Coordinates(x_axis, y_axis)); // x_axis=200, y_axis=300 I have to add unique coordinates each time, means next time x_axis, y_axis can never be added to list if it is 200, 300 respectively. How can I check the already exist item in list objects? Thanks HTML simple list sorting is there is simple way to sort only the outer level of multilist level in HTML? (it's not important to sort the inner level of the lists) If possible just javascript code, no jQuery since i never used it. Example: Before sorting List Z Katty Della List G Test fox List R ABC AAC After sorting: List G Test fox List R ABC AAC List Z Katty Della Thank you in advance Mike After using the Jquery method answered below, i got error "Object does not support this property or method?? Update: here is acode sample: 

| ![](./js/r_oinfo.gif) |

*   Search

*   se 1
*   se 2
*   se 0

*   Sort

*   so 1
*   so 0

*   Filter

c#listobjectcompare 4 5 回答 5 This answer is useful 3 改用 a List<coordinates>。 要检查列表中是否存在一组坐标，您必须遍历列表并比较属性值： Coordinates point = new Coordinates(200, 300); if (!container.Any(c => c.x_axis == point.x_axis && c.y_axis = point.y_axis)) { container.Add(point); } 于 2012-04-16T08:16:58.740 回答 This answer is useful 3 覆盖 Coordinates 类的 Equals 和 GetHashCode： public class Coordinates { public Coordinates(int x, int y) { X = x; Y = y; } public int X { get; private set; } public int Y { get; private set; } public override bool Equals(object obj) { if (!(obj is Coordinates)) { return false; } Coordinates coordinates = (Coordinates)obj; return ((coordinates.X == this.X) && (coordinates.Y == this.Y)); } public override int GetHashCode() { return (X ^ Y); } } 并使用您的 Coordinates 对象的通用 List 或 HashSet ： List <coordinates>container = new List<coordinates>(); Coordinates coordinates = new Coordinates(x_axis, y_axis); if (!container.Contains(coordinates) container.Add(coordinates); 并使用 HashSet： HashSet <coordinates>container = new HashSet<coordinates>(); container.Add(new Coordinates(x_axis, y_axis)); 于 2012-04-16T08:29:40.190 回答 This answer is useful 0 您可以将您从容器中拉出的项目投射回坐标，然后检查它们的 x 和 y 值。或者，如果它继承自 ICombparable，则只需使用 = 运算符。如果它不是 IComparable，您可以创建自己的类，并继承 IComparable 接口。 var myCoord = (Coordinates) container(0); 这一切都假设你真的不想让你的容器直接持有坐标。 编辑：修正了一堆错别字 于 2012-04-16T08:13:10.620 回答 This answer is useful 0 您可以像这样使用 LINQ： if (!container.Any(c => (Coordinates)c.x_axis == x_axis && (Coordinates)c.y_axis == y_axis)) container.Add(new Coordinates(x_axis, y_axis)); 于 2012-04-16T08:15:23.840 回答 This answer is useful 0 您最好使用HashSet或Dictionary（如果您需要将它们按特定顺序保存）以确保它们确实是唯一的。 然后你应该重写GetHashCode和Equals来检查相等性。 GetHashCode 的最佳实践：覆盖 System.Object.GetHashCode 的最佳算法是什么？ 执行 public class Coordinate { public Int32 X { get; set; } public Int32 Y { get; set; } public override int GetHashCode() { Int32 hash = 17; hash = hash * 23 + X; hash = hash * 23 + Y; return hash; } public override Boolean Equals(object obj) { Coordinate other = obj as Coordinate; if (other != null) { return (other.X == X) && (other.Y == Y); } return false; } } 字典 Int32 count = 0; Dictionary <coordinate, int32="">cords = new Dictionary<coordinate, int32="">(); // TODO : You need to check if the coordinate exists before adding it cords.Add(new Coordinate() { X = 10, Y = 20 }, count++); // To get the coordinates in the right order var sortedOutput = cords.OrderBy(p => p.Value).Select(p => p.Key); 哈希集 HashSet <coordinate>cords = new HashSet<coordinate>(); cords.Add(new Coordinate() { X = 10, Y = 20 }); 于 2012-04-16T08:29:22.047 回答 Related 2 android - 无法将布局适合标签内容 0 objective-c - “从备份中恢复”iCloud 和 Ad-Hoc 应用程序 4 android - 创建新文件时权限被拒绝异常 6 jquery - jQuery插件适用于本地主机，但当我将其发布到服务器时不起作用 2 c++ - openGL 中带有对象的静态背景。“烘焙”的最佳方式？ 2 javascript - href="javascript:Function() 它是如何工作的 2 php - 像 Google Identity Toolkit 这样的简单 SSO 系统，但没有锁定的 UI？ 2 objective-c - 如何在 iOS 原生应用中应用主题 1 svg - 围绕一个点制作动画 - Raphael 2 python - 将 csv 文件附加到 django 请求 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10170595
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, list, object, compare

I am having problem with List Object values. Object is an object of class which holding two integer number.

like

```
List<Object> container;
container.Add(new Coordinates(x_axis, y_axis));  // x_axis=200, y_axis=300 
```

I have to add unique coordinates each time, means next time x_axis, y_axis can never be added to list if it is 200, 300 respectively.

How can I check the already exist item in list objects?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:16:58.740

改用 a `List<Coordinates>`。

要检查列表中是否存在一组坐标，您必须遍历列表并比较属性值：

```
Coordinates point = new Coordinates(200, 300);

if (!container.Any(c => c.x_axis == point.x_axis && c.y_axis = point.y_axis)) {
  container.Add(point);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T08:29:40.190

覆盖 Coordinates 类的 Equals 和 GetHashCode：

```
public class Coordinates
{
    public Coordinates(int x, int y)
    {
        X = x;
        Y = y;
    }

    public int X { get; private set; }
    public int Y { get; private set; }

    public override bool Equals(object obj)
    {
        if (!(obj is Coordinates))
        {
            return false;
        }
        Coordinates coordinates = (Coordinates)obj;
        return ((coordinates.X == this.X) && (coordinates.Y == this.Y));
    }

    public override int GetHashCode()
    {
        return (X ^ Y);
    }
} 
```

并使用您的 Coordinates 对象的通用 List 或 HashSet ：

```
List<Coordinates> container = new List<Coordinates>();
Coordinates coordinates = new Coordinates(x_axis, y_axis);

if (!container.Contains(coordinates)
    container.Add(coordinates); 
```

并使用 HashSet：

```
HashSet<Coordinates> container = new HashSet<Coordinates>();
container.Add(new Coordinates(x_axis, y_axis)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:13:10.620

您可以将您从容器中拉出的项目投射回坐标，然后检查它们的 x 和 y 值。或者，如果它继承自 ICombparable，则只需使用 = 运算符。如果它不是 IComparable，您可以创建自己的类，并继承 IComparable 接口。

```
 var myCoord = (Coordinates) container(0); 
```

这一切都假设你真的不想让你的容器直接持有坐标。

编辑：修正了一堆错别字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T08:15:23.840

您可以像这样使用 LINQ：

```
if (!container.Any(c => (Coordinates)c.x_axis == x_axis &&
                        (Coordinates)c.y_axis == y_axis))
    container.Add(new Coordinates(x_axis, y_axis)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T08:29:22.047

您最好使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)或[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)（如果您需要将它们按特定顺序保存）以确保它们确实是唯一的。

然后你应该重写[GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)和[Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)来检查相等性。

GetHashCode 的最佳实践：[覆盖 System.Object.GetHashCode 的最佳算法是什么？](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)

### 执行

```
public class Coordinate
{
    public Int32 X { get; set; }
    public Int32 Y { get; set; }

    public override int GetHashCode()
    {
        Int32 hash = 17;
        hash = hash * 23 + X;
        hash = hash * 23 + Y;
        return hash;
    }
    public override Boolean Equals(object obj)
    {
        Coordinate other = obj as Coordinate;
        if (other != null)
        {
            return (other.X == X) && (other.Y == Y);
        }
        return false;
    }
} 
```

### 字典

```
Int32 count = 0;
Dictionary<Coordinate, Int32> cords = new Dictionary<Coordinate, Int32>();
// TODO : You need to check if the coordinate exists before adding it
cords.Add(new Coordinate() { X = 10, Y = 20 }, count++);
// To get the coordinates in the right order
var sortedOutput = cords.OrderBy(p => p.Value).Select(p => p.Key); 
```

### 哈希集

```
HashSet<Coordinate> cords = new HashSet<Coordinate>();
cords.Add(new Coordinate() { X = 10, Y = 20 }); 
```</coordinate></coordinate></coordinate,></coordinate,></coordinates></coordinates></coordinates></coordinates></coordinates>

# javascript - HTML简单列表排序

> ID：10170597
> 
> 赞同：1
> 
> 时间：2012-04-16T08:08:06.300
> 
> 标签：javascript, html

有没有一种简单的方法可以只对 HTML 中多列表级别的外部级别进行排序？（对列表的内部级别进行排序并不重要）如果可能的话只是 javascript 代码，没有 jQuery，因为我从未使用过它。

示例：排序前

1.  列表 Z

    *   凯蒂
    *   德拉
2.  清单 G

    *   测试
    *   狐狸
3.  列表 R

    *   美国广播公司
    *   AAC

排序后：

1.  清单 G

    *   测试
    *   狐狸
2.  列表 R

    *   美国广播公司
    *   AAC
3.  列表 Z

    *   凯蒂
    *   德拉

提前谢谢你，迈克

使用下面回答的 Jquery 方法后，出现错误“对象不支持此属性或方法？？

更新：这是代码示例：

```
<head>

<script LANGUAGE="JavaScript" SRC="./js/jquery-1.7.2.js"></SCRIPT>
<script type="text/javascript">

    function sortDesc()
    {
        $('ul.list > li').sortElements(function(a, b){
        return $(a).text() > $(b).text() ? 1 : -1;});
    }

</script>
</head>

<body>
    <div id="container">
        <div id="main">
            <div class="c1">
                <div id="example-list">
                    <table cellspacing="0" cellpadding="0" border="0" width="100%">
                        <tr>
                            <td align="middle"     align="center" title='sort' style="cursor:pointer" valign="middle" align="center"  style="width:20px; height:20px;">
                                <img border="0" src="./js/r_oinfo.gif" width="20" height="20"  onclick="sortDesc()">
                        </td>
                    </table>
                    <ul class="list">
                        <li>
                            Search

                        </li>
                        <ul>
                            <li>
                                se 1
                            </li>
                            <li>
                                se 2
                            </li>
                            <li>
                                se 0
                            </li>
                        </ul>
                        <li>
                            Sort
                        </li>
                        <ul>
                            <li>
                                so 1
                            </li>
                            <li>
                                so 0
                            </li>
                        </ul>
                        <li>
                            Filter

                        </li>
                    </ul>
                 </div>
            </div>

        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:12:35.173

这可能是开始学习 jQuery 的好机会；[当涉及到DOM](http://en.wikipedia.org/wiki/Document_Object_Model)操作时，它可以提供很多东西。

[在http://james.padolsey.com/javascript/sorting-elements-with-jquery/](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)上有一篇关于使用 jQuery 进行元素排序的精彩文章。

使用`sortElements`上面概述的方法，以下应该允许您对列表进行排序（假设顶级`ul`有一个类`toplevellist`）。

```
$('ul.toplevellist > li').sortElements(function(a, b){
    return $(a).text() > $(b).text() ? 1 : -1;
}); 
```

[在http://qd9.co.uk/projects/jQuery-Plugins/sort/demo.html](http://qd9.co.uk/projects/jQuery-Plugins/sort/demo.html)有一个完整的例子。要在您的网站上使用它，您需要：

1) 为您的网页添加一个 jQuery 脚本引用（例如`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>`）

2) 保存示例中的[jquery.sort.js](http://qd9.co.uk/projects/jQuery-Plugins/sort/jquery.sort.js)文件并将其复制到您的服务器，并将其作为脚本引用添加到您的网页中。

3)`sortElements`在示例中添加对函数的调用。

如果您绝对不想使用 jQuery，那么仍然可以使用该页面中列出的方法，具体取决于您的 JavaScript 知识水平。

# c# - How is .NET JIT compilation performance (including dynamic methods) affected by image debug options of C# compiler?

> ID：10170602
> 
> 赞同：15
> 
> 时间：2012-04-16T08:08:18.240
> 
> 标签：c#, .net, clr, jit, ngen

I am trying to optimize my application for for it to perform well right after it is started. At the moment, its distribution contains 304 binaries (including external dependencies) totaling 57 megabytes. It is a WPF application doing mostly database access, without any significant calculations.

I discovered that the Debug configuration offers way better (~5 times gain) times for most operations, as they are performed for the first time during the lifetime of the application's process. For example, opening a specific screen within the app takes 0.3 seconds for NGENed Debug, 0.5 seconds for JITted Debug, 1.5 seconds for NGENed Release and 2.5 seconds for JITted Release.

I understand that the gap in JIT compilation time is caused by the JIT compiler applying more aggressive optimizations for the Release binaries. From what I can tell, Debug and Release configurations differ by the `/p:DebugType` and `/p:Optimize` switches passed to the C# compiler, but I see the same performance gap even if I build the application with `/p:Configuration=Release /p:DebugType=full /p:Optimize=false` – that is, the same image debug options as in `/p:Configuration=Debug`.

I confirm that the options were applied by looking at the `DebuggableAttribute` applied to the resulting assembly. Observing the NGEN output, I see `<debug>` added to the names of some assemblies being compiled – how does NGEN distinguish between debug and non-debug assemblies? The operation being tested uses dynamic code generation – what level of optimization is applied to dynamic code?

Note: I am using the 32-bit framework due to external dependencies. Should I expect different results on x64?

Note: I also do not use conditional compilation. So the compiled source is the same for both configurations.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:13:09.347

如果，如您所说，要加载 304 个程序集，那么这可能是您的应用程序运行缓慢的原因。这似乎是要加载的程序集数量非常多。

每次 CLR 从另一个程序集获取尚未加载到 AppDomain 中的代码时，它都必须从磁盘加载它。

您可能会考虑使用 ILMerge 来合并其中的一些程序集。这将减少从磁盘加载程序集的延迟（您需要一个更大的磁盘预先命中）。

它可能需要一些实验，因为并非所有东西都喜欢被合并（特别是那些使用反射，并且依赖于程序集文件名永远不会改变的东西）。它也可能导致非常大的程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:23:46.717

你是在调试器（'F5'）下运行它还是没有调试器（'ctrl+F5'）？如果是前者，请确保工具 -> 选项 -> 调试 -> “在模块加载时抑制 JIT 优化”未选中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T11:49:01.207

好的，这里有几个问题。

> 据我所知，调试和发布配置因传递给 C# 编译器的 /p:DebugType 和 /p:Optimize 开关而异，但即使我使用 /p:Configuration=Release / 构建应用程序，我也看到相同的性能差距p:DebugType=full /p:Optimize=false – 即与 /p:Configuration=Debug 中相同的图像调试选项。

尽管勾选框相同，但更改为发布模式也会导致某些内部代码路径被删除，例如`Debug.Assert()`（在 Microsoft 内部代码中大量使用）。所以这些不会在运行时评估，这会导致一些性能提升。`DebugType=full`生成与其编译的代码匹配的 PDB，因此本身不会影响性能。如果部署了 PDB，异常处理代码将使用 PDB 针对已编译代码提供更有用的堆栈跟踪。发布模式还会在内部触发一些内存改进，因为调试版本用于附加调试器。

NGEN 是一种用于“潜在”优化应用程序的工具。它优化代码以针对您所在的计算机运行。但它也有缺点，因为 JIT 编译器可以更改内存中代码的布局，而 NGEN 本质上更静态。

至于 32 位 (x86) 依赖项，您的应用程序现在将以 x86 模式运行。如果依赖项同时具有 x86 和 x64 版本，并且如果您的应用程序在“任何 CPU”编译模式下编译，则 JIT 编译器将在两者之间自动切换。NGEN 只会为当前计算机生成特定版本。所以如果你做了 NGEN 然后分发，它只适用于你编译的特定架构。

如果您没有使用条件编译功能，那么从 Debug 切换到 Release 并不重要。但是您会在 Release 中看到性能优势。

对于 NGEN，我建议您进行广泛的测试，以了解与 2 相比的优势。它并不总能带来更好的性能。

# internet-explorer - 如何修复 INTERNET EXPLORER 中的多个文件上传错误

> ID：10170603
> 
> 赞同：0
> 
> 时间：2012-04-16T08:08:18.903
> 
> 标签：internet-explorer, image-uploading

> **可能重复：**
> [是否可以在 Internet Explorer 中一次选择和上传多个文件？](https://stackoverflow.com/questions/6207388/is-it-possible-to-select-and-upload-multiple-files-at-one-time-in-internet-explo)

我有一个 php 脚本来上传多个图像并将图像名称保存在数据库中，一切都很顺利，直到我尝试使用 internet explorer 8 上传多个图像。我不能在 internet explorer 中一次选择一个以上的图像我无法弄清楚为什么是Internet Explorer 不允许我上传多张图片我使用以下 html 标签上传多张图片

```
<input type="file" name="images[]" multiple /> 
```

我认为 Internet Explorer 不允许上传多个图像我需要知道如何解决这个问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:19:23.190

Internet Explorer 8 不支持`multiple`。这已经在[这里](https://stackoverflow.com/questions/6207388/is-it-possible-to-select-and-upload-multiple-files-at-one-time-in-internet-explo)讨论过了。

# jquery - Jquery DateTimePicker 不可见

> ID：10170605
> 
> 赞同：2
> 
> 时间：2012-04-16T08:08:35.100
> 
> 标签：jquery, vb.net, razor

我正在尝试将此[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)实施到我的项目中。

问题是什么都没有发生。

所以，这是我已经完成但没有删除的内容：

-我已经下载了 .js 文件并将其放入“脚本”文件中。-我以这种方式添加了对该脚本的引用：

```
<script src="@Url.Content("~/Scripts/jquery-ui-timepicker-addon.js")" type="text/javascript"></script> 
```

我在页面的开头添加了这个：

```
 <script type="text/javascript">
$(function () {
    $('.datetime').datetimepicker();
});
 </script> 
```

我在 css 文件的末尾添加了这个：

```
 /* css for timepicker */
 .ui-timepicker-div .ui-widget-header { margin-bottom: 8px; }
 .ui-timepicker-div dl { text-align: left; }
 .ui-timepicker-div dl dt { height: 25px; margin-bottom: -25px; }
 .ui-timepicker-div dl dd { margin: 0 10px 10px 65px; }
 .ui-timepicker-div td { font-size: 90%; }
 .ui-tpicker-grid-label { background: none; border: none; margin: 0; padding: 0; } 
```

我也有这个：

```
 <input type="text" class="datetime" id="datetime1" value="" /> 
```

问题是只有显示的文本框。时间选择器不是。我有什么不明白的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:13:37.447

在这里你也可以为你演示：http: [//jsfiddle.net/atP2P/](http://jsfiddle.net/atP2P/)

**HTML**

上课不见了

```
<script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-timepicker-addon.js" type="text/javascript"></script>

<input type="text" name="datetime" id="datetime1" class="datetime" value="" />
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T08:12:00.903

您`.datetime`在初始化插件时正在使用类。所以你的 HTML 应该有类

```
 <input type="text" name="datetime" id="datetime1" class="datetime" value="" /> 
```

### [演示](http://jsfiddle.net/5CGVZ/)

或者，您可以初始化您的插件以选择`id`而不是类，例如：

```
$(function () {
    $('#datetime1').datetimepicker();
}); 
```

无论哪种方式，它都会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:12:11.310

你必须改变这个

```
 <input type="text" name="datetime" id="datetime1" value="" /> 
```

对此

```
 <input type="text" name="datetime" class ="datetime" id="datetime1" value="" /> 
```

由于您使用 css 类选择器来选择 dom 元素，因此您必须指定该元素的类属性，以便 dateimepicker 可以找到带有 class="datetime" 的控件

或者，如果您不想在输入元素上使用 css 类，也可以选择使用 id 选择器更改脚本

```
$(function () {
    $('#datetime1').datetimepicker();
}); 
```

[**这**](http://www.w3schools.com/jquery/jquery_selectors.asp)将使您对 jquery 和选择器有一个很好的了解

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T08:13:41.967

或者你可以改变

```
$('.datetime').datetimepicker(); 
```

至

```
$('#datetime1').datetimepicker(); 
```

如果你真的想使用类，试试这个：

```
$('.datetime').each(function() {
    $(this).datetimepicker();
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T08:14:11.937

尝试将文本框的类属性添加为“日期时间”

# c# - 以编程方式将 Silverlight 连接到 WCF

> ID：10170607
> 
> 赞同：1
> 
> 时间：2012-04-16T08:08:38.500
> 
> 标签：c#, .net, wcf, silverlight

我继承了一个使用 WCF 服务并托管在 ASP.NET Web 表单中的 Silverlight 应用程序。该应用程序需要通过 HTTP 和 HTTPS 运行，并将安装在客户自己的服务器上。客户端代码最初是使用指向本地托管服务的 Add Service Reference 生成的，所以我的 ServicesReferences.ClientConfig 显然包含对 localhost 的硬编码引用 - 部署到另一台服务器时用处不大，所以显然我需要能够以编程方式设置客户端使用的端点地址。

我的代码目前是：

```
var binding = new BasicHttpBinding
    {
        MaxBufferSize = 2147483647,
        MaxReceivedMessageSize = 2147483647,
    };
binding.Security.Mode = HtmlPage.Document.DocumentUri.Scheme.StartsWith("https")
    ? BasicHttpSecurityMode.Transport
    : BasicHttpSecurityMode.None;

var documentUri = HtmlPage.Document.DocumentUri;
var builder = new UriBuilder(
        documentUri.Scheme,
        documentUri.Host, 
        documentUri.Port, 
        documentUri.LocalPath.Replace("hostpage.aspx", "MyService.svc"));

var client = new CustomerDetailServicesClient(binding, new EndpointAddress(builder.Uri));
client.ChannelFactory.Faulted += OnChannelFactoryFaulted;
client.DoSomething(); 
```

虽然这在我使用 HTTP 时工作正常，但每次调用 WCF 服务时尝试通过 HTTPS 访问都会失败，并出现 404。使用 Fiddler，我可以看到只有 URI 方案在发生变化，如果我输入服务的 HTTPS 地址，我会得到预期的元数据页面。

我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:55:21.360

*叹*了口气，用湿鲱鱼扇了我一巴掌。Web 服务的 HTTPS 绑定已在 web.config 中注释掉（因为并非我们所有的客户都可以/想要在他们的服务器上运行 HTTPS，并且当 IIS 未配置为 HTTPS 时，为 HTTPS 进行 WCF 绑定会在很多嘈杂的情况下破坏 WCF方法）。

令人惊奇的是，一夜好眠可以带来什么样的全新视角和清晰的解决方案。

# java - 设置 -Djava.awt.headless=true 后的 Java Headless Exception

> ID：10170609
> 
> 赞同：2
> 
> 时间：2012-04-16T08:08:51.220
> 
> 标签：java, linux, tomcat, jfreechart, headless

我在用：

Linux Debian 6、Java 1.6.29 和 Tomcat 6

我看过很多关于它的帖子，解释`java.awt`需要 X11 库..等等，但它们并没有解决问题。

我在我的盒子里设置了 -Djava.awt.headless=true 并解决了无头环境的第一个问题，现在我得到了：

```
java.awt.HeadlessException
java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
java.awt.Window.(Window.java:432)
java.awt.Frame.(Frame.java:403)
javax.swing.JFrame.(JFrame.java:202)
org.jfree.ui.ApplicationFrame.(ApplicationFrame.java:65)
... 
```

我知道这样做我只是告诉java没有监视器（实际上运行一个独立的java程序来检查环境是否是无头的，它确实返回`true`）。那么设置 DISPLAY 环境变量与 Linux 环境有什么关系吗？

我会很感激你的帮助，

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:14:30.793

正如您在[http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/)中看到的，如果不支持显示设备、键盘或鼠标，许多组件都会受到影响。与 Canvas、Panel 和 Image 组件相关的方法***不需要抛出 HeadlessException***，因为这些组件可以被赋予空对等体并被视为轻量级组件。

所以 JFrame 是抛出 HeadlessException 的组件。

如果您想在无头环境中使用 jfreechart 生成图表，此链接可能会对您有所帮助：http: [//javaevangelist.blogspot.com.es/2010/11/creating-charts-on-headless-systems.html](http://javaevangelist.blogspot.com.es/2010/11/creating-charts-on-headless-systems.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:20:43.157

```
-Djava.awt.headless=false 
```

在上面添加它是一种享受:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:24:05.670

您可能需要安装 VNC 服务器（或类似的东西），如本论坛[主题](http://www.jfree.org/forum/viewtopic.php?f=3&t=1012&hilit=X11%20DISPLAY%20BufferedImage)中所述。

附录：不要将图表图像保存为文件，而是使用其中一种方法写入服务器的输出流`writeChartAsPNG()`，如此处建议[的](https://stackoverflow.com/a/9438265/230513)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T13:24:16.370

从 **ApplicationFrame**中删除任何扩展都将解决这个问题。在大多数 Tomcat 部署环境中，我们通常没有 X11 Windows 包。我们不需要使用旧 AWT 对象的**ApplicationFrame (JFram) 。**

我的例子

```
BloodChart(String title)  extends ApplicationFrame 
```

更改为 ->

```
BloodChart(String title) 
```

这对我有用，祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T06:33:49.257

感谢您的回复。

自从你给了我，我一直在尝试发短信。从某种意义上说仍然不起作用：现在不再抛出该异常，而是出于某种原因创建了空白图像。

所以我从这个出发：

```
public BarChartGenerator(org.qcri.power.ws.client.Server oServer, ServerStatistics oServerStat, List lVMs, String path) extends ApplicationFrame {

        System.setProperty("java.awt.headless", "true");
        boolean headless = GraphicsEnvironment.isHeadless();
        System.out.println("Headless: " + headless);
        Toolkit tk = Toolkit.getDefaultToolkit();
        tk.beep();

        // generate dataset
        final CategoryDataset dataset = createDataset(lVMs);
        setChart(createChart(oServer, oServerStat, lVMs, dataset));

        // create PNG of the chart...
        setFilename("chart_server"+oServer.getHost()+"_"+System.currentTimeMillis()+".gif");

        File fImageFile = new File(path+filename);
        try {
            ChartUtilities.saveChartAsPNG(fImageFile, chart, PowerInterface.CHART_WIDTH, PowerInterface.CHART_HEIGHT);
        } catch (Exception e) {
            e.printStackTrace();
        }
   } 
```

到以下（摆脱`extends ApplicationFrame`）并使用你给我的例子：

```
public BarChartGenerator(org.qcri.power.ws.client.Server oServer, ServerStatistics oServerStat, List lVMs, String path) {

        System.setProperty("java.awt.headless", "true");
        boolean headless = GraphicsEnvironment.isHeadless();
        System.out.println("Headless: " + headless);
        Toolkit tk = Toolkit.getDefaultToolkit();
        tk.beep();

        // generate dataset
        final CategoryDataset dataset = createDataset(lVMs);
        setChart(createChart(oServer, oServerStat, lVMs, dataset));

        // create PNG of the chart...
        setFilename("chart_server"+oServer.getHost()+"_"+System.currentTimeMillis()+".gif");

        try {
            BufferedImage bufferedImage = getChart().createBufferedImage(PowerInterface.CHART_WIDTH, PowerInterface.CHART_HEIGHT);
            ImageIO.write(bufferedImage, "gif", new FileOutputStream(path+getFilename()));
        } catch (Exception e) {
            e.printStackTrace();
        }
   } 
```

在日志中它抱怨`ImageIO.write(bufferedImage, "gif", new FileOutputStream(path+getFilename()));`给出这个错误（当文件在那里时！）：

```
javax.imageio.IIOException: Can't create output stream!
        at javax.imageio.ImageIO.write(ImageIO.java:1560)
        at org.qcri.power.util.BarChartGenerator.<init>(BarChartGenerator.java:106) 
```

有什么线索吗？

# android - 某个县的人在我的 Android 应用中注册时遇到问题

> ID：10170613
> 
> 赞同：1
> 
> 时间：2012-04-16T08:09:20.637
> 
> 标签：android, http, countries

我已经为 Android 构建了一个小游戏，它已经获得了大量用户。

该应用程序将支持单人游戏（有高分，统计）和多人游戏，所以为了做到这一点，我需要用户使用用户名和电子邮件注册（在高分中显示用户名，通过邮件/用户名邀请）。

当用户第一次下载应用程序时，他们必须注册才能玩 - 这通常可以正常工作，但显然不是所有人。我有一个包含用户、分数等的数据库和一个在用户注册时调用的脚本，它检查用户名或邮件是否已经被占用。

对服务器的请求看起来有点像这样：

```
try {
  HttpClient client = new DefaultHttpClient();  
  String postURL = "http://somepostaddress.com/Script?... (params)";
  HttpPost post = new HttpPost(postURL); 
  HttpResponse responsePOST = client.execute(post);  
  HttpEntity resEntity = responsePOST.getEntity();  
  if (resEntity != null) {    
    //Read server response - if ok, save the username etc in shared prefs
    //If not ok, read the error message, and notify the user (email / username taken)
  }
} catch (Exception e) {
  e.printStackTrace();
} 
```

再次 - 这对几乎每个用户都非常有效......但显然很多荷兰用户遇到错误并且无法像其他人一样注册。如果代码中发生异常或者服务器响应不是脚本可以返回的响应之一，则会显示他们收到的错误消息。

问题是我无法调试它，或者使用当前版本获取更多关于哪里出了问题的详细信息。而且我真的不明白为什么这似乎只发生在荷兰用户身上——而不是所有人身上，但确实很多。尚未收到来自其他国家/地区的用户遇到这种情况的报告。

已经对用户名做了一个正则表达式，所以只允许 AZ、az 和 0-9，所以它不应该是任何带有特殊字符或任何东西的东西。

任何人都经历过这样的事情，并且知道出了什么问题或如何解决这个问题 - 也许该帖子应该以另一种方式完成？

提前致谢。

# c# - 从另一个应用程序更改 app.config

> ID：10170614
> 
> 赞同：0
> 
> 时间：2012-04-16T08:09:26.453
> 
> 标签：c#, database-connection, app-config

我制作了一个能够更改其 app.config（连接字符串部分）的应用程序。我尝试了几种解决方案，事实证明这是解决我的一个问题的最简单方法。这是我使用的代码：

```
ConnectionStringSettings postavke = new ConnectionStringSettings("Kontrolor.Properties.Settings.KontrolorConnectionString", constring);
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.ConnectionStrings.ConnectionStrings.Clear();
config.ConnectionStrings.ConnectionStrings.Add(postavke);   

config.Save(ConfigurationSaveMode.Modified, true);
ConfigurationManager.RefreshSection(config.ConnectionStrings.SectionInformation.SectionName); 
```

此代码放置在 button_click 方法中，当我单击该按钮并重新启动应用程序时，更改是可见的。我的问题是这个 - 有没有办法从另一个（独立）应用程序中做到这一点，使用户能够通过在文本框中输入所需的值或从组合框中选择它来创建连接字符串（他只需要输入 IP服务器和数据库的名称）。通过这样做，第一个应用程序将被预先准备好，不需要重新启动它来应用更改。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:43:18.077

由于两个应用程序都在同一台机器上，您可以使用简单的 windows 消息传递，在两个应用程序中注册 windows 消息并将发送者发布消息到接收者，这里是示例代码：

发件人：

```
 public partial class FormSender : Form
  {
    [DllImport("user32")]
    private static extern int RegisterWindowMessage(string message);

    private static readonly int WM_REFRESH_CONFIGURATION = RegisterWindowMessage("WM_REFRESH_CONFIGURATION");

    [DllImport("user32")]
    private static extern bool PostMessage(IntPtr hwnd, int msg, IntPtr wparam, IntPtr lparam);

    public FormSender()
    {
      InitializeComponent();
    }

    private void btnNotify_Click(object sender, EventArgs e)
    {
      NotifyOtherApp();
    }

    private void NotifyOtherApp()
    {
      List<Process> procs = Process.GetProcesses().ToList();
      Process receiverProc = procs.Find(pp => pp.ProcessName == "Receiver" || pp.ProcessName == "Receiver.vshost");  
      if (receiverProc != null)
        PostMessage((IntPtr)receiverProc.MainWindowHandle, WM_REFRESH_CONFIGURATION, new IntPtr(0), new IntPtr(0));
    }
  } 
```

接收者 ：

```
 public partial class FormReceiver : Form
  {
    [DllImport("user32")]
    private static extern int RegisterWindowMessage(string message);

    private static readonly int WM_REFRESH_CONFIGURATION = RegisterWindowMessage("WM_REFRESH_CONFIGURATION");

    public FormReceiver()
    {
      InitializeComponent();
    }

    protected override void WndProc(ref Message m)
    {
      if (m.Msg == WM_REFRESH_CONFIGURATION)
      {
        lblMessageReceived.Text = "Refresh message recevied : " + DateTime.Now.ToString();
      }
      else
      {
        base.WndProc(ref m);
      }
    }
  } 
```

顺便提一句。请注意，我正在检查进程名称“Receiver.vshost”，以便它在 VS 调试器中启动时可以工作

# sql-server - 如何从 SQL Server 的 TOP 中排除 LEFT JOINed 表？

> ID：10170619
> 
> 赞同：3
> 
> 时间：2012-04-16T08:09:51.593
> 
> 标签：sql-server, sql-server-2000

假设我有两张书籍表格和两张相应版本的表格。

我有一个查询如下：

```
SELECT TOP 10 * FROM
(SELECT hbID, hbTitle, hbPublisherID, hbPublishDate, hbedID, hbedDate
 FROM hardback
 LEFT JOIN hardbackEdition on hbID = hbedID
 UNION 
 SELECT pbID, pbTitle, pbPublisher, pbPublishDate, pbedID, pbedDate
 FROM paperback
 Left JOIN paperbackEdition on pbID = pbedID
) books
WHERE hbPublisherID = 7
ORDER BY hbPublishDate DESC 
```

如果前两本精装本和/或平装本有 5 个版本，则此查询仅返回两本书。但是，我希望`TOP 10`仅适用于返回的实际图书记录数。有没有办法我可以选择 10 本书，并且仍然可以获得所有相关的版本记录？

如果它是相关的，我没有创建和删除临时表的数据库权限。

谢谢阅读！

**更新**

澄清一下：平装表有一个相关的平装版本表。精装表有一个相关的精装版本表。除了将（希望！）看到它们一起显示的用户之外，精装本和平装本表彼此不相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:40:50.977

如果我理解正确，您可以通过以下方式获得所有相关版本的 10 本书

*   使用`WITH`语句返回初始的完整结果集
*   使用 a 选择 10 本书`GROUP BY`
*   `JOIN`该组的结果保留了来自给定 10 本书的所有信息。

**SQL 语句**

```
;WITH books AS (
  SELECT  hbID, hbTitle, hbPublisherID, hbPublishDate, hbedID, hbedDate
  FROM    hardback
          LEFT JOIN hardbackEdition on hbID = hbedID
  WHERE   hbPublisherID = 7          
  UNION ALL
  SELECT  pbID, pbTitle, pbPublisher, pbPublishDate, pbedID, pbedDate
  FROM    paperback
          LEFT JOIN paperbackEdition on pbID = pbedID
  WHERE   hbPublisherID = 7
)
SELECT  *
FROM    books b
        INNER JOIN (
          SELECT TOP 10 hbID
          FROM   books
          GROUP BY
                hbID
        ) bt ON bt.hbID = b.hbID 
```

**或者如果你更喜欢只写一次 where 子句**

```
;WITH books AS (
  SELECT  hbID, hbTitle, hbPublisherID, hbPublishDate, hbedID, hbedDate
  FROM    hardback
          LEFT JOIN hardbackEdition on hbID = hbedID
  UNION ALL
  SELECT  pbID, pbTitle, pbPublisher, pbPublishDate, pbedID, pbedDate
  FROM    paperback
          LEFT JOIN paperbackEdition on pbID = pbedID
)
, q AS (
  SELECT  *
  FROM    books
  WHERE   hbPublisherID = 7          
)
SELECT  *
FROM    q b
        INNER JOIN (
          SELECT TOP 10 hbID
          FROM   q
          GROUP BY
                hbID
        ) bt ON bt.hbID = b.hbID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:24:26.253

没那么容易。您只需将 Top 10 应用于精装本和平装本表，无需连接。然后将结果加入数据。

以下查询仅在 hbID 和 pbID 始终唯一时有效。如果不是，它会变得更复杂。您需要将它们分开或在查询中添加另一列以区分它们。

```
SELECT *
FROM
  (SELECT hbID as id, hbTitle, hbPublisherID, hbPublishDate, hbedID, hbedDate
   FROM hardback
   LEFT JOIN hardbackEdition on hbID = hbedID
   UNION 
   SELECT pbID as id, pbTitle, pbPublisher, pbPublishDate, pbedID, pbedDate
   FROM paperback
   Left JOIN paperbackEdition on pbID = pbedID
  ) books
INNER JOIN 
  (SELECT TOP 10 * 
  FROM
    (SELECT hbID as id, hbPublisherID as publishedId, hbPublishDate as publishDate
     FROM hardback
     UNION 
     SELECT pbID as id, pbPublisherID as publishedId, pbPublishDate as publishDate
     FROM paperback
    ) 
  WHERE publisherID = 7
  ORDER BY publishDate DESC
  ) topTen 
  on books.id = TopTen.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:25:19.223

这应该从出版商 7 中获取最近出版的十个带有精装本的书：

```
select  *
from    (
        select  top 10 title
        from    hardback
        where   hbPublisherID = 7
        group by
                title
        order by
                hbPublishDate desc
        ) top_titles
left join
      hardback
on    hardback.hbTitle = top_titles.title
left join
      paperback
on    paperback.pbTitle = top_titles.title 
```

# javascript - 用jquery上下分屏，将下半部分约束到页面

> ID：10170623
> 
> 赞同：0
> 
> 时间：2012-04-16T08:10:18.450
> 
> 标签：javascript, jquery, css, jquery-ui

我有一个顶部和一个底部，中间有一条线来调整大小（为顶部或底部提供更多空间）。

基本上是分屏布局。但是我在让底部正确时遇到问题，无论我做什么，它总是延伸到页面之外，并且我希望底部的框能够完全按照页面顶部的方式执行。

**以下演示将基本上向您展示我在做什么以及我的问题：**

[http://jsfiddle.net/mstefanko/e38bE/67/](http://jsfiddle.net/mstefanko/e38bE/67/)

*我没有任何硬编码的高度（目前一切都由 %'s 设置），但我将它们添加到小提琴中以演示我的问题。*

现在，调整顶部和底部大小的分隔线正在调整顶部大小，我有一些来自[jQuery UI Resizable alsoResize reverse](https://stackoverflow.com/questions/3369045/jquery-ui-resizable-alsoresize-reverse)的代码来反向调整底部大小。我不确定我什至需要额外的代码，但是当我无法解决这个问题时，我认为值得一试。

此外，为了让 jquery ui 句柄正确，顶部有一个很大的底部边距，这可能会导致我的问题，但使用它似乎并没有解决问题。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:00:23.360

您的问题是您试图将几个固定大小的 div 压缩成一个更大的固定大小的 div，但其他 div 不适合。当您移动调整器手柄以使其适合时，您不能期望文本会调整大小，并且 div 必须去某个地方，所以它们会[溢出](http://www.w3.org/TR/CSS2/visufx.html)。这里有一些建议：

*   给容器一个 css`overflow`值`auto`（所以当你调整它的大小并且它太大而无法容纳时，它会自动给你一个滚动条）
*   设置溢出值并完全摆脱调整大小
*   给容器一个 css`height`值`auto`or `scroll`（如果大小不是问题）

# redirect - 缝重定向页面

> ID：10170625
> 
> 赞同：1
> 
> 时间：2012-04-16T08:10:31.523
> 
> 标签：redirect, action, seam, server-side

我使用 seam 来管理查看器页面。
在我的页面中，我有一个 div（iframe），其中在特定条件下显示一个 html 页面。
特别是我需要从服务器端更改此 div 中显示的页面。
我试图更好地解释我：
在 commandButton 单击控件被传递到服务器（使用操作）。此操作方法设置了一些东西并知道应该在之后加载哪个页面（或在某些情况下不加载）。
当控件回到调用者页面时，必须调用action方法设置的新页面（它使用action方法指定的东西）。

我怎样才能做到这一点？

注意：oncomplete 标记在此上下文中不可用，因为我有很多命令按钮，并且每次单击其中一个命令按钮时都会调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:13:08.333

仅当服务器端存在特定属性时才使用激活的 javascript 解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:36:47.293

我不完全确定你想做什么。

这些页面是动态呈现的吗？

您可以从服务器站点生成 HTML，然后使用`<h:outputText id="iframediv" value="#{controller.htmlparameter}" escape="false" />`

然后可以`<a4j:commandButton reRender="iframediv">`重新渲染这个动态生成的页面。

如果页面是静态定义的，您可以像这样包含它们。

```
<rich:panel id="iframediv"> 
     <a4j:outputPanel rendered="{controller.page1}">
           <ui:include src="page1.xhtml" />
     </a4j:outputPanel>
     <a4j:outputPanel rendered="{controller.page2}">
           <ui:include src="page2.xhtml" />
     </a4j:outputPanel>
</rich:panel> 
```

控制器的 page1 和 page2 参数应该是布尔值并由您调用的操作设置。

# ejb - 我在哪里可以找到 Oracle 的“技术适配器”？

> ID：10170626
> 
> 赞同：1
> 
> 时间：2012-04-16T08:10:33.963
> 
> 标签：ejb, weblogic, adapter, jca

我想使用 Oracle® Fusion Middleware 的文件适配器以推荐的方式访问文件系统。[我可以从http://docs.oracle.com/cd/E15523_01/integration.1111/e10231/intro.htm](http://docs.oracle.com/cd/E15523_01/integration.1111/e10231/intro.htm)找到适配器的文档。该文档仅提及适配器是 Oracle® 融合中间件的一部分，但从未提及包含适配器的具体产品。我下载并安装了 Weblogic Server 和 JDeveloper，但它们似乎不包括适配器。

谁能给我一些建议？先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:16:35.433

如果我没记错这是所述适配器的列表， [http://docs.oracle.com/cd/E12524_01/doc.1013/e14481/adapters.htm](http://docs.oracle.com/cd/E12524_01/doc.1013/e14481/adapters.htm)
不确定是否有任何帮助，请尝试查找其中一个列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:23:39.087

这些是[Oracle 集成适配器](http://www.oracle.com/technetwork/middleware/adapters/overview/index.html)的一部分。

下载链接位于[http://www.oracle.com/technetwork/middleware/soasuite/downloads/index.html](http://www.oracle.com/technetwork/middleware/soasuite/downloads/index.html)

请参阅“**先决条件和推荐的安装过程**”

“推荐组件”中的第 9 号

# java - 如何捕获出现在系统（android）中的事件？

> ID：10170627
> 
> 赞同：1
> 
> 时间：2012-04-16T08:10:39.283
> 
> 标签：java, android, mobile

**你好，**

我正在开发一个应用程序（android 2.35），在开发过程中我需要了解系统中发生的特定事件，例如单击“管理应用程序”或按“设置”。我可以这样做吗？如何？如果有人对此有代码，我将不胜感激。

感谢帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:13:51.450

你可以捕捉到一个`keyEvent`发送的事件`Broadcaste`......我认为在android中捕捉用户​​活动是不可能的......

# c++ - UnitTests 中的失败默认参数

> ID：10170628
> 
> 赞同：0
> 
> 时间：2012-04-16T08:10:39.760
> 
> 标签：c++, objective-c, clang, default-parameters

在我的项目中，我有两个文件`Products.h`和`.m`. 如果我构建项目并运行，我不会收到任何警告和错误。

但是当我运行测试时。我在这段源代码中发现了一个错误：

```
NSArray* fetchItem(NSString* entity, NSSortDescriptor* sortDescriptor = nil); 
```

错误信息：

> “Clang 不支持默认参数”。

好的，我知道，由于项目的体系结构，这可能是一个问题。

我将 UnitTest 中的体系结构从 MainProject 更改`$(ARCHS_STANDART_32BIT)`为`$(ARCHS_UNIVERSAL_IPHONEOS)`. 和所有相同的捕获错误

> “预期的 ';' ',' 或 ')' 在 '=' 标记之前。

在这两个项目中，ARC 都关闭了。

所以本质上，我的问题是，“如何在 UnitTest 项目上启用默认参数？” 非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:19:06.483

我找到了答案。在 Objective-C 中使用错误的语法而不是使用默认参数，我删除了默认参数并解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:23:44.903

在您的代码行中，请检查您是否缺少分配

```
NSArray* fetchItem = (NSString* entity, NSSortDescriptor* sortDescriptor = nil); 
```

我不知道你想要什么，因为在分配那条线后我没有任何意义。

# c# - C#sealed vs Java final

> ID：10170633
> 
> 赞同：18
> 
> 时间：2012-04-16T08:11:00.987
> 
> 标签：c#, java, sealed

有人可以告诉我以下使用`sealed`无法编译的原因吗？然而，如果我替换`sealed`为`final`Java 并将其编译为 Java，它就可以工作。

```
private sealed int compInt = 100;
public bool check(int someInt)
{
    if (someInt > compInt)
    {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-16T08:12:55.673

这是因为`final`在 Java 中意味着很多不同的东西，这取决于你在哪里使用它，而`sealed`在 C# 中仅适用*于*类和继承的虚拟成员（方法、属性、事件）。

在Java`final`中可以应用于：

*   **classes**，这意味着该类不能被继承。这相当于 C# 的`sealed`.
*   **methods**，这意味着该方法不能在派生类中被覆盖。这是 C# 中的默认设置，除非您`virtual`在派生类中声明一个方法，否则可以再次使用其他派生类来防止这种情况发生`sealed`。这就是为什么你看到`sealed`C# 中的成员比`final`Java 中的成员少得多的原因。
*   **fields**和**variables**，这意味着它们只能被初始化一次。对于字段，C# 中的等价物是`readonly`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T08:13:51.213

`Sealed`in`C#`只能应用于*引用类型*，并且对*继承树*有影响。

实际上，标记为`sealed`保证的类型是继承树中的最后一个“叶子”，或者简而言之，您不能从声明为 a 的类型派生`sealed`。

```
public sealed class Child : Base 
{
}

public class AnotherAgain : Child //THIS IS NOT ALLOWED
{
} 
```

它不能应用于成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-30T06:54:54.263

Tigran 的回答没有错，而 Joey 的回答有点不正确。
首先你可以看看这个页面：[什么是C#中Java的final的等价物？](https://stackoverflow.com/questions/1327544/what-is-the-equivalent-of-javas-final-in-c). 关键字可以应用于
，但不能应用于变量或接口的方法。类不能被继承。戴法时，必须在公司。Every is ，所以不能被继承。检查此图像：`sealed``class``instance method``property``sealed``sealed``override``struct``sealed``struct`![密封使用](../Images/39fad6a10f228ad790ae442f4723ad29.png)

# wordpress - Wordpress WP_Query orderby meta_value_num 与 unix 时间戳

> ID：10170641
> 
> 赞同：0
> 
> 时间：2012-04-16T08:11:52.417
> 
> 标签：wordpress, timestamp

```
$args = array(
    'post_type'     => 'webcast',
    'meta_key'      => 'webcast-date',
    'meta_value'    => array( time(), strtotime('+60 days') ),
    'meta_type'     => 'numeric',
    'meta_compare'  => 'BETWEEN',
    'orderby '      => 'meta_value_num',
    'order'         => 'ASC'
);
$webcasts = new WP_Query($args); 
```

我正在使用上面的代码将即将发布的网络广播拉到主页上。它工作正常，除了一个异常 - 它没有按日期正确排序。

日期存储为 Unix 时间戳，因此比较数字应该 - 我曾认为 - 没问题。但是，作为示例，下面的代码目前正在播放的三个网络广播的日期值为：

*   1337212800
*   1335225600
*   1338249600

...这就是它们显示的顺序。即使我可以看到它不是按数字顺序排列的，而且我的数学很*垃圾*。

发生什么了？

# android - 尝试将当前 Android 应用程序视图保存为图像时出现 NullpointerException

> ID：10170644
> 
> 赞同：0
> 
> 时间：2012-04-16T08:12:00.767
> 
> 标签：android, image, view, nullpointerexception, jpeg

嗨 StackOverflow 社区，

在我的应用程序中，我想要一个允许用户捕获当前视图的按钮。

出于这个原因，我编写了以下方法（面向：[Android save view to jpg or png](https://stackoverflow.com/questions/3107527/android-save-view-to-jpg-or-png)）：

```
private LinearLayout container; 

public void createImageOfCurrentView(View v) {
    if (isExternalStoragePresent()) {
        container = (LinearLayout) findViewById(R.id.container);
        container.setDrawingCacheEnabled(true);
        Bitmap b = container.getDrawingCache();

        File dir = new File(Environment.getExternalStorageDirectory().getPath()
          + "/" + getPackageName() + "/");
        dir.mkdirs();

        File file = new File(dir, "image.jpg");
        FileOutputStream fos;

        try {
            fos = new FileOutputStream(file);
            b.compress(CompressFormat.JPEG, 95, fos); // NullPointerException!
            Toast.makeText(this, "The current view has been succesfully saved "
              + "as image.", Toast.LENGTH_SHORT).show();
        } catch (FileNotFoundException e) {
            Toast.makeText(this, "Unfortunatly an error occured and this "
              + "action failed.", Toast.LENGTH_SHORT).show();
        }
    } else {
        Toast.makeText(this, "Bacause of lacking access to the storage "
          + "of this device, the current view couldn't be saved as an image.",
          Toast.LENGTH_LONG).show();
    }
} 
```

问题是根据尝试`LogCat`创建. 所以可能该方法不起作用。在手机上生成文件。但是，大小为 0 字节且没有可见图像。我将不胜感激任何我必须做的建议，以使其按我的意愿工作。`NullPointerException``jpeg``container.getDrawingCache()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:58:55.703

尝试一下 -

```
public static Bitmap convertViewToBitmap(View view) {
   Bitmap result = null;

   try {
      result = Bitmap.createBitmap(view.getWidth(), view.getHeight(), Bitmap.Config.RGB_565);
      view.draw(new Canvas(result));
   }catch(Exception e) {}    
   return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:50:03.830

尝试一下 -

```
view.setDrawingCacheEnabled(true);
Bitmap = bm = Bitmap.createBitmap(view.getDrawingCache());
view.setDrawingCacheEnabled(false); 
```

# compilation - 如何为旧版 linux 内核的设置编译代码？

> ID：10170651
> 
> 赞同：2
> 
> 时间：2012-04-16T08:12:38.580
> 
> 标签：compilation

我正在运行在 2.6.31 linux 内核上运行的 Fedora 12。并且必须编译一些代码在 2.6.11 内核上运行二进制文件（FC4 支持）。有没有办法做到这一点，而无需安装 FC4 或让虚拟机运行 FC4？

另外，当您使用 file 命令打印 elf 图像的文件信息时，为什么“for GNU/Linux”部分显示较旧的内核版本？例如，对我来说，在 2.6.31 内核上，它说为 2.6.18 编译，在 2.6.11 上它说为 2.2.5 编译。我想这是它谈论的内核版本。

谢谢

# java - 如何使用 Guava Multimap 的 replaceValues 方法？

> ID：10170656
> 
> 赞同：3
> 
> 时间：2012-04-16T08:13:05.833
> 
> 标签：java, guava, multimap

我想在 Guava 提供的 MultiMap 中添加、删除和替换值。

我目前这样做是为了添加价值..

```
static Multimap<Integer, Float> myMultimap;
 myMultimap = ArrayListMultimap.create();
 myMultimap.put(1, (float)4.3);
 myMultimap.put(2, (float)4.9);
 myMultimap.put(1, (float)4.7);
 myMultimap.put(1, (float)4.5); 
```

使用 Guava 库更容易删除值。

```
myMultimap.remove(1,(float)4.7); 
```

但是我怎样才能使用 replaceValues 方法呢？

我的意思是这个

```
 myMultimap.replaceValues(1, (float)4.3); 
```

假设我想用新值 5.99 替换值 4.3，我应该怎么做，该方法需要一些 Iterable 函数，我不确定如何实现它..

这是错误..

> Multimap 类型中的方法 replaceValues(Integer, Iterable) 不适用于参数 (int, float)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:22:06.183

[`Multimap.replaceValues`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html#replaceValues%28K,%20java.lang.Iterable%29)采用一组值替换给定键的*所有现有值。*从 JavaDoc 看起来您需要使用`remove`后跟`put`.

如果映射是可修改的，您可以使用 获取映射到单个键的值集合的可修改视图`get`，但返回的视图是`Collection`没有原子替换方法的普通视图。您始终可以创建自己的辅助方法。请注意，此方法不是线程安全的。

```
public static <K,V> boolean replaceValue(Multimap<K,V> map, K key, V oldValue, V newValue) {
    if (map.remove(key, oldValue)) {
        map.put(key, newValue);
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-05T08:00:59.193

```
public class guava_main {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Multimap map = HashMultimap.create();

        map.put("game", 1);
        map.put("game", 2);

        map.put("book", 4);
        map.put("book", 3);

        Iterable iter = map.get("book");
        map.replaceValues("game", iter);

        System.out.println(map);
    }
}

// result : {book=[4, 3], game=[4, 3]} 
```

# android - android UDP连接，不接收任何数据

> ID：10170660
> 
> 赞同：0
> 
> 时间：2012-04-16T08:13:13.420
> 
> 标签：android, sockets, connection, udp, packet

我是这方面的新手，所以如果我问愚蠢的问题，请联系我。

我试图在 Eclipse 的 PC 模拟器和安卓手机
（或两个安卓手机设备）之间建立 UDP 连接。

我有一个**路由器**，手机通过路由器的 wifi 网络连接到互联网。PC 也在同一网络上（直接电缆路由器-PC 连接）。我试图将一些文本数据从服务器线程发送到客户端线程，但没有接收/发送任何内容。:(

**服务器**java 类（重新**编辑，服务器从客户端接收消息**）：

```
public class server implements Runnable 
{
    // the Server's Port
    public static final int SERVERPORT  = 6000;

    // running Server thread.
    public void run() 
    {
        Log.d("redwing","server thread started.");
        DatagramSocket serverSocket = null;

        try
        {
            // Open Server Port
            serverSocket = new DatagramSocket(server.SERVERPORT);
            byte[] receiveData  = new byte[32];
            byte[] sendData     = new byte[32];
            // loop until "server_finished"  becomes False.
            while(createserver.server_finished)
            {
                if(renderer.gGL!=null)  // ignore me, just a null pointer checker
                {
                    // waiting for the incoming client's message packet
                    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                    serverSocket.receive(receivePacket);
                    renderer.recv = new String(receivePacket.getData());
                    Log.d("server","packet received from client, ETA " + timing.getNow() + " " + renderer.recv); // timing getNow - just returns current system minute & second.

                    // server is replying to the client back with a message.
                    InetAddress IPAddress = receivePacket.getAddress();
                    int port = receivePacket.getPort();

                    sendData = new String("server msg").getBytes();
                    DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, port);
                    serverSocket.send(sendPacket);
                    renderer.sent = new String(sendData, 0, sendData.length);
                    Log.d("server","packet sent to client, ETA " + timing.getNow() + " " + renderer.sent);     // timing getNow - just returns current system minute & second.
                }
            }
            // close the socket
            if(serverSocket!=null) serverSocket.close();
            serverSocket = null;
        }
        catch (Exception e) 
        {
            Log.e("server", "Error", e);
            if(serverSocket!=null) serverSocket.close();
            serverSocket = null;
        }
        finally 
        {
            if(serverSocket!=null) serverSocket.close();
            serverSocket = null;
        }
        Log.d("redwing","server thread terminated.");
    }
} 
```

和**客户端**java类（**重新编辑，客户端没有从服务器接收消息**）：

```
public class client implements Runnable 
{
    public static final int CLIENTPORT  = 5000;
    // running Client thread.
    public void run() 
    {
        Log.d("redwing","client thread started.");
        DatagramSocket clientSocket = null;

        try
        {
            // getting local address 
            clientSocket = new DatagramSocket(server.SERVERPORT);
            InetAddress IPAddress = InetAddress.getByName("192.168.0.100");  

            // displaying IP & hostname.
            Log.d("client", "IP: " + IPAddress.getHostAddress() + " Name: " + IPAddress.getHostName());
            byte[] sendData     = new byte[32];
            byte[] receiveData  = new byte[32];
            // Loop until client_finished becomes False.
            while(createclient.client_finished)
            {
                if(renderer.gGL!=null)  // ignore me, just a null pointer checker
                {
                    // sending a message to the server
                    sendData = timing.getNow().getBytes();
                    DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, client.CLIENTPORT);
                    clientSocket.send(sendPacket);
                    renderer.sent = new String(sendData,0,sendData.length);;
                    Log.d("client","packet sent to server, ETA " + timing.getNow());  

                    // waiting for the server packet message.
                    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                    clientSocket.receive(receivePacket);
                    renderer.recv = new String(receivePacket.getData());
                    Log.d("client","packet received from server, ETA " + timing.getNow());
                }
            }
            // close the socket
            if(clientSocket!=null) clientSocket.close();
            clientSocket = null;
        }
        catch (Exception e) 
        {
            Log.e("client", "Error", e);
            if(clientSocket!=null) clientSocket.close();
            clientSocket = null;
        }
        finally 
        {
            if(clientSocket!=null) clientSocket.close();
            clientSocket = null;
        } 
        Log.d("redwing","client thread terminated.");
    }
} 
```

清单中启用了权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<user-permission android:name="android.permission.NETWORK" />
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

我在安卓 PC 模拟器上运行服务器，在我的安卓手机上运行客户端。

客户端和服务器线程都运行得很好，但是......问题是我没有在它们之间交换任何数据。**客户端没有收到任何东西，服务器也没有收到任何**东西。数据包已发送，但没有收到任何内容。

我做错了什么？

请帮我。
先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:50:41.760

运行模拟器后，在命令提示符下输入 - “telnet localhost”，然后输入“redir add udp:5000:6000”。连接5000端口的客户端，打开6000端口的udp服务器，就可以收到来自udp服务器的客户端消息了。

[查看详情](http://www.coderanch.com/t/434412/Android/Mobile/Android-Emulator-as-server-Socket)

```
clientSocket = new DatagramSocket();
InetAddress IPAddress = InetAddress.getByName("<pc ip>"); // instead of "localhost"

public static final String SERVERIP = "127.0.0.1"; // 'Within' the emulator!  
public static final int SERVERPORT = 6000;   

/* Retrieve the ServerName */  
InetAddress serverAddr = InetAddress.getByName(SERVERIP);  
DatagramSocket socket = new DatagramSocket(SERVERPORT, serverAddr); 
```

# java - 我是否应该使用第 3 方股票图表 Java 库？

> ID：10170664
> 
> 赞同：1
> 
> 时间：2012-04-16T08:13:42.623
> 
> 标签：java, swing, graph, charts, jfreechart

我正在为我的学习创建一个基于交易系统的项目。该交易系统使用一些移动平均线来决定何时买卖股票。我将使用的语言是java。我的问题是我应该使用第 3 方库（如 JFreeChart）还是应该尝试自己构建整个应用程序（我有一些 java swing 经验）？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T08:16:42.230

如果有些东西已经可以满足您的需求，那么您首先应该真正使用它。

创建自己的应用程序通常是不可取的，因为使用 3rd 方应用程序将意味着您将使用已经过测试并具有更多功能的东西。

使用 3rd 方 API 将节省您的时间，您可以将这些时间投入到项目的其他方面（社区总是倾向于让生活变得更简单）。

还有几点我想我应该提到的是，虽然自己开发一切通常是一种很好的（如果不是最好的）学习方式，但我认为当人们已经熟悉某些第三方流行的 API 时，雇主往往更喜欢它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T08:18:51.280

如果许可证是兼容的（例如 JFreeChart 是 LGPL，因此您可以在不打开源代码的情况下使用它），并且该库可以满足您的需求，您为什么要重新发明轮子？

使用已经被许多人测试和开发的库可以为您节省大量时间，如果您需要不同的东西或修复错误，您始终可以自己修复并提交它，以便社区的其他成员也可以受益。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T08:19:23.840

If I were you I would befriend `JFreeChart`. It is a *de facto* standard for Swing plotting/charting (at least in the free world). It has some quirks and needs some hacking to get your result from time to time. But it is well tested, the limitations are well known, there is a [community](http://www.jfree.org/phpBB2/viewforum.php?f=3) of users with experience that can help you with the problems.

I would rather not reinvent the wheel, unless I needed a very specific wheel...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T08:18:55.133

这取决于您有多少时间以及您想要实现的目标，如果您创建自己的图表，那将是很棒的体验，但如果您希望在金融领域建立自己的职业生涯，那么您最好查看[定价模型](http://quantlib.org/index.shtml)。

还有许多成熟的解决方案可以完成您的图表需求，您可以使用它们来节省时间，并且通过查看一些很棒的开源代码，您肯定可以学到很多东西。

# javascript - jQuery width() 函数在 Internet Explorer 9 中返回错误值

> ID：10170670
> 
> 赞同：4
> 
> 时间：2012-04-16T08:13:58.923
> 
> 标签：javascript, jquery, html, css, internet-explorer

我以前使用过 Easy Slider jQuery 插件，直到现在才遇到问题。而且问题很奇怪。看看这个主页 [http://bit.ly/HKiWY6](http://bit.ly/HKiWY6)

该页面将弹出一个显示两个值的警报：

```
$("#slider").width() 
```

和

```
$("#slider3").width() 
```

我已经在 css 中设置了两者的值。一个是 710 像素，一个是 700 像素。

如果您在 IE9 中运行，它会显示 $(window).width() 的默认值，而不是两者的默认值，无论当前的窗口或文档宽度是什么。FF 和 Chrome 正确返回。这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T08:26:55.517

尝试使用 outerWidth，并确保将其包装在 windows.ready 事件侦听器中，以确保在计算宽度之前正确呈现所有 DOM 元素

```
$("#slider3").outerWidth() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T08:21:46.870

过去，当我在某个事件完全冒泡之前使用 jQuery 的 width()/height()/offset().top/.left 等时，我遇到了问题。看看`setTimeout(function() { alert($('#slider').width()); }, 0);`有没有效果。这是一个便宜的 nextTick() 技巧，可能正是您所需要的。

# mysql - 在 Ubuntu 11.10 中安装 MySQL 5.5

> ID：10170675
> 
> 赞同：2
> 
> 时间：2012-04-16T08:14:21.000
> 
> 标签：mysql, ubuntu

我已经下载了mysql 5.5.23的DEB包。
通过以下命令安装 MySQL：

```
sudo dpkg -i mysql-5.5.23-debian6.0-x86_64.deb 
```

结果说安装成功。
但是当我输入命令时：

```
sudo service mysql start 
```

或者

```
mysql 
```

它向我显示“mysql：无法识别的服务”或“mysql：找不到命令”。
此外，我在“/usr/include”或“/usr/bin”中找不到 MySQL 文件，

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:56:35.423

因为 MySQL 5.5.x 没有打包，所以在存储库中只存在 5.1.x 这对我有用： [http ://www.rebojo.com/debian-installing-mysql/](http://www.rebojo.com/debian-installing-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:37:30.580

为什么不是一个简单的命令：

sudo apt-get install mysql-server

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-01T14:09:57.260

MySQL 下载地址 `https://dev.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.56-linux-glibc2.5-x86_64.tar.gz`

### 打开终端并跟随：

*   卸载任何现有版本的 MySQL

    `sudo rm /var/lib/mysql/ -R`

*   删除 MySQL 配置文件

    `sudo rm /etc/mysql/ -R`

*   自动卸载mysql

    `sudo apt-get autoremove mysql* --purge sudo apt-get remove apparmor`

*   从 MySQL 站点下载版本 5.5.51

    `wget https://dev.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.56-linux-glibc2.5-x86_64.tar.gz`

*   添加mysql用户组

    `sudo groupadd mysql`

*   添加mysql（不是当前用户）到mysql用户组

    `sudo useradd -g mysql mysql`

*   提取它

    `sudo tar -xvf mysql-5.5.56-linux-glibc2.5-x86_64.tar.gz`

*   将其移动到 /usr/local

    `sudo mv mysql-5.5.56-linux-glibc2.5-x86_64 /usr/local/`

*   通过移动解压文件夹在 /usr/local 中创建 mysql 文件夹

    `cd /usr/local sudo mv mysql-5.5.49-linux2.6-x86_64 mysql`

*   设置 MySql 目录所有者和用户组

    `cd mysql sudo chown -R mysql:mysql *`

*   安装所需的 lib 包（也适用于 5.6）

    `sudo apt-get install libaio1`

*   执行mysql安装脚本

    `sudo scripts/mysql_install_db --user=mysql`

*   从 mysql 目录外部设置 mysql 目录所有者

    `sudo chown -R root .`

*   从 mysql 目录中设置数据目录所有者

    `sudo chown -R mysql data`

*   复制mysql配置文件

    `sudo cp support-files/my-medium.cnf /etc/my.cnf`

*   启动mysql

    `sudo bin/mysqld_safe --user=mysql & sudo cp support-files/mysql.server /etc/init.d/mysql.server`

*   设置root用户密码

    `sudo bin/mysqladmin -u root password '[your new password]'`

*   添加mysql路径到系统

    `sudo ln -s /usr/local/mysql/bin/mysql /usr/local/bin/mysql`

*   重启！

*   启动mysql服务器

    `sudo /etc/init.d/mysql.server start`

*   停止mysql服务器

    `sudo /etc/init.d/mysql.server stop`

*   查看mysql的状态

    `sudo /etc/init.d/mysql.server status`

*   在启动时启用 mysql

    `sudo update-rc.d -f mysql.server defaults`

*启动时禁用mysql（可选）

```
`sudo update-rc.d -f mysql.server remove` 
```

*   重启！

*   现在使用以下命令登录，如果 mysql 服务器尚未运行，请启动它

    `mysql -u root -p`

# c# - 通过字段展平收集中的重复项目

> ID：10170680
> 
> 赞同：0
> 
> 时间：2012-04-16T08:14:33.740
> 
> 标签：c#, .net, linq, flatten

我有一个集合：
**[ A { 'a' => '1', 'b' => ['1', '2']}
B { 'a' => '2', 'b' => [' 1','2','3']} ]** 
我正在寻找一个函数来“复制”此集合中的项目以生成下一个结果：
**[ A1 { 'a' => '1', 'b' => '1'}
A2 { 'a' => '1', 'b' => '2'}
B1 { 'a' => '2', 'b' => '1'}
B2 { 'a' = > '2', 'b' => '2'}
B3 { 'a' => '2', 'b' => '3'} ]** 

我怎样才能达到这样的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:51:41.667

您对 A/B 类的定义不是很清楚。我想你的课看起来像：

```
class Data
{
    public int a;
    public int[] b;
} 
```

并准备如下数据：

```
var A = new Data { a = 1, b = new[] { 1, 2, } };
var B = new Data { a = 2, b = new[] { 1, 2, 3 } };
List<Data> original = new List<Data> { A, B }; 
```

用于展`.SelectMany`平数据：

```
var result = original.SelectMany(item => 
                          item.b.Select(x => 
                             new { a = item.a, b = x }))
                     .ToList(); 
```

请忽略代码中一些不良的编程习惯（如公共字段），并随意建议最后一个 linq 查询的编码风格。

# sql - 如果值已更改，则选择记录的最有效方法

> ID：10170681
> 
> 赞同：0
> 
> 时间：2012-04-16T08:14:36.140
> 
> 标签：sql, sql-server-2008, query-optimization

当其中一个值发生更改时，选择记录的最有效方法是什么？前任：

我有一个如下所示的帐户历史记录表，其中在帐户更改时创建记录：

```
Id  AcctNb Active Created
8   123456 1      01/03/2012
6   123456 0      01/01/2012 
```

我喜欢找到一种有效的方法来返回自上次条目以来活动状态发生变化的记录。

**更新**

我目前使用的查询有效但效率低下”

```
select d1.acctNb,d1.active, d2.active 
from d044 d1 , d044 d2 
where d1.created = '2012-04-14'
and d1.acctNb = d2.acctNb 
and d2.created = (select max(d.created) from d044 d where d.acctNb = d2.acctNb and d.id != d1.id)   
and (d1.active != d2.active) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:20:12.653

尝试这个：

```
create table log
(
  log_id int identity(1,1) primary key,
  acct_id int not null,
  active bit not null,
  created datetime not null
);

insert into log(acct_id, active,created)
values
(1,1,'January 1, 2012'),
(1,1,'January 2, 2012'),
(1,0,'January 3, 2012'),
(1,0,'January 4, 2012'),
(1,1,'January 5, 2012'),
(2,0,'February 1, 2012'),
(2,1,'February 2, 2012'),
(2,0,'February 3, 2012'),
(2,1,'February 4, 2012'),
(2,1,'February 5, 2012'); 
```

解决方案：

```
with serialize as
(
  select row_number() 
  over(partition by acct_id order by created) rx,
  *
  from log
)
select ds.acct_id, 
ds.active ds_active, 
pr.active pr_active,

ds.created

from serialize ds -- detect second row
join serialize pr -- previous row
on pr.acct_id = ds.acct_id
and ds.rx = pr.rx + 1

where ds.rx >= 2 and
pr.active <> ds.active 
```

查询输出：1月3日、1月5日、2月2日、2月3日、2月4日

这些是活动发生变化的日期（检测到）

基本上逻辑是，从第二行开始，我们扫描它的前一行，如果它们的活动值不匹配（通过`WHERE pr.active <> ds.active`），我们将它们显示在结果中

现场测试：[http ://sqlfiddle.com/#!3/68136/4](http://sqlfiddle.com/#!3/68136/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:42:28.020

If future SQL Server will have LAG windowing function, you can simplify the comparison of previous row to current by using LAG

This works now on Postgresql(since 8.4), it already has LAG and LEAD windowing function:

```
create table log
(
  log_id serial primary key,
  acct_id int not null,
  active boolean not null,
  created timestamp not null
);

insert into log(acct_id, active,created)
values
(1,true,'January 1, 2012'),
(1,true,'January 2, 2012'),
(1,false,'January 3, 2012'),
(1,false,'January 4, 2012'),
(1,true,'January 5, 2012'),
(2,false,'February 1, 2012'),
(2,true,'February 2, 2012'),
(2,false,'February 3, 2012'),
(2,true,'February 4, 2012'),
(2,true,'February 5, 2012'); 
```

LAG approach is elegantly simpler than [ROW_NUMBER and JOIN combo](https://stackoverflow.com/a/10171519/11432) approach:

```
with merge_prev as
(
    select     
        acct_id, created, 

        lag(active) over(partition by acct_id order by created) pr_active, -- previous row's active
        active sr_active -- second row's active

    from log
) 

select * 
from merge_prev
where 
    pr_active <> sr_active 
```

Live test: [http://sqlfiddle.com/#!1/b1eb0/25](http://sqlfiddle.com/#!1/b1eb0/25)

**EDIT**

LAG is already available on SQL Server 2012: [http://sqlfiddle.com/#!6/d17c0/1](http://sqlfiddle.com/#!6/d17c0/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:30:57.570

2种方式

1）添加一列

update_tsmp 时间戳

在更新或插入之后运行的表上放置一个触发器——检查活动字段——如果它已将更新 update_tsmp 更改为当前时间戳

现在您必须定义“自上次条目以来”以确定是否要返回记录

2）创建历史表

Id AcctNb Active Created change_tsmp updates_user delete_flag

**在更新或删除之前**运行的表上放置触发器——将记录复制到历史表中，并酌情检查删除标志

# java - 如何在电子邮件中设置“名称”属性

> ID：10170687
> 
> 赞同：13
> 
> 时间：2012-04-16T08:15:16.133
> 
> 标签：java, smtp, jakarta-mail

我正在使用 Java 邮件和 SMTP 服务器发送邮件。我希望能够更改收件人在收到电子邮件时看到的“名称” - 而不仅仅是电子邮件地址的前缀（@ 之前的位）。

我怀疑我需要更改或添加“props.put();”之一 设置，但我无法确定是哪一个。

```
public class Email {

    private final String HOST = "mail.myserverr.com";
    private final String USER = "me+myserver.com";
    private final String FROM = "me@myserver.com";
    private final String PASS = "mypass";
    private final String PORT = "25";
    private final String AUTH = "true";

    @Test
    public void sendMail(){
        String[] to = {"mygmail@gmail.com","me@myservercom"};
        sendMessage(to,"Let's go","What's up");

    }

    public void sendMessage(String[] to, String subject, String msg) {

        Properties props = System.getProperties();
            props.put("mail.smtp.starttls.enable", "true"); // added this line
            props.put("mail.smtp.host", HOST);
            props.put("mail.smtp.user", USER);
            props.put("mail.smtp.password", PASS);
            props.put("mail.smtp.port", PORT);
            props.put("mail.smtp.auth", AUTH);
            props.put("mail.smtp.socketFactory.port", PORT);
            props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.socketFactory.fallback", "false");

        Session session = Session.getDefaultInstance(props, null);
        MimeMessage message = new MimeMessage(session);
        try {
            message.setFrom(new InternetAddress(FROM));

        InternetAddress[] toAddress = new InternetAddress[to.length];

        // To get the array of addresses
        for( int i=0; i < to.length; i++ ) { // changed from a while loop
            toAddress[i] = new InternetAddress(to[i]);
        }

        for( int i=0; i < toAddress.length; i++) { // changed from a while loop
            message.addRecipient(Message.RecipientType.TO, toAddress[i]);
        }

        message.setSubject(subject);
        message.setText(msg);

        Transport transport = session.getTransport("smtps");
        transport.connect(HOST, USER, PASS);
            transport.sendMessage(message, message.getAllRecipients());
            transport.close();

        } catch (AddressException e) {
            e.printStackTrace();
        } catch (MessagingException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-16T09:26:54.483

典型的地址语法格式为`"user@host.domain"`or `"Personal Name <user@host.domain>"`。
您可以对 FROM 和 TO 字段地址使用相同的语法。

**示例**：将
以下语句更改
`String[] to = {"mygmail@gmail.com","me@myservercom"};`
为：
`String[] to = {"Recipient1 Name <mygmail@gmail.com>","My Name <me@myservercom>"};`

您还可以构造 InternetAddress 对象，将各自的电子邮件 ID 和个人姓名作为参数传递。
**示例**：

```
String FROM = "my.email.id@my.server.domain";  
InternetAddress from = new InternetAddress( FROM, "Ravinder" ); 
```

收件人将看到发件人姓名以显示为`"Ravinder"`而不是`"my.email.id@my.server.domain"`

**参考：** [**javax.mail.internet.InternetAddress**](http://docs.oracle.com/javaee/6/api/javax/mail/internet/InternetAddress.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-16T08:22:34.037

你需要改变：

```
message.setFrom(new InternetAddress(FROM)); 
```

至

```
message.setFrom(new InternetAddress(FROM, "Company XYZ")); 
```

文档：[类 InternetAddress](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/InternetAddress.html)

> 互联网地址
> 
> ```
> public InternetAddress(String address,
>                    String personal)
>                    throws UnsupportedEncodingException 
> ```
> 
> 在给定地址和个人姓名的情况下构造一个 InternetAddress。该地址被假定为语法上有效的 RFC822 地址。
> 
> 参数：
> 
> address - RFC822 格式的地址
> 
> 个人 - 个人姓名
> 
> 抛出： UnsupportedEncodingException

# asp.net - ASP.NET 自定义 RoleProvider - cookie 的使用

> ID：10170688
> 
> 赞同：2
> 
> 时间：2012-04-16T08:15:22.710
> 
> 标签：asp.net, asp.net-membership, membership-provider, roleprovider

目前在登录时，我将用户的一行插入到 AccessSession 表中，该表保留了用户具有哪些角色的详细信息以及 ASP.NET_SessionId cookie。

我的 GetRolesForUser 方法的自定义实现是：

```
public override string[] GetRolesForUser(string username)
    {
        List<string> roles = new List<string>();
        string[] rolesArray;
        char[] splitter = { '|' };            

        string sessionId = HttpContext.Current.Request.Cookies["ASP.NET_SessionId"].Value;
        AccessSession sessionObject = AccessSession.Get(sessionId);

        if (sessionObject != null)
        {
            rolesArray = sessionObject.Roles.Split(splitter);

            foreach (string role in rolesArray)
            {
                if (!String.IsNullOrEmpty(role))
                {
                    roles.Add(role);
                }
            }
        }
        return roles.ToArray();
    } 
```

我的问题是我使用这种方法错了吗？如果 cookie 被禁用，那么将没有 HttpContext.Current.Request.Cookies["ASP.NET_SessionId"]。我的替代计划是在 Session 中插入一个 AccessSession 对象，但是当自定义 RoleProvider 尝试访问它时，它总是显示为空。

我可以使用 cacheRolesInCookie=true 但同样不会比上述方法更好，因为禁用 cookie 会破坏功能。

谢谢，理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:17:52.600

好吧，我最终通过从已经拥有我所有角色的 FormsAuthenticationTicket 中获取角色来设法解决它。以下是代码示例：

```
public override string[] GetRolesForUser(string username)
    {
        List<string> roles = new List<string>();
        string[] rolesArray = new string[] { };
        char splitter = Advancedcheck.BLL.Common.Const.default_splitter;

        if (HttpContext.Current.User != null)
        {
            if (HttpContext.Current.User.Identity.IsAuthenticated)
            {
                if (HttpContext.Current.User.Identity is FormsIdentity)
                {
                    FormsIdentity id = (FormsIdentity)HttpContext.Current.User.Identity;
                    FormsAuthenticationTicket ticket = id.Ticket;

                    rolesArray = ticket.UserData.Split(splitter);

                    HttpContext.Current.User = new System.Security.Principal.GenericPrincipal(id, rolesArray);
                }
            }
        }

        if (rolesArray.Length > 0)
        {
            foreach (string role in rolesArray)
            {
                if (!String.IsNullOrEmpty(role))
                {
                    roles.Add(role.ToLower());
                }
            }
        }
        return roles.ToArray();
    } 
```

# php - 仅在第一次加载首页时显示 DIV 视频

> ID：10170691
> 
> 赞同：1
> 
> 时间：2012-04-16T08:15:34.430
> 
> 标签：php, javascript, html

我目前正在尝试在相对 div 中插入视频，实际上，我想在首页上显示视频，但仅在用户第一次加载首页时才显示。但是，似乎当我们点击菜单按钮主页时，视频也在显示......

在代码中，我创建了一个包含我的视频的 php 页面，在我的 index.php 中，我在一个名为“popup”的 div 中调用这个页面，位置相对，带有一个 require('video.php')。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:20:12.783

您可以使用会话或 cookie 来检测用户是否是第一次打开该页面。通过会话，您将：

```
session_start();
if(isset($_SESSION["VIDEO_PLAYED_ALREADY"]) == false)
{
    $_SESSION["VIDEO_PLAYED_ALREADY"] = true;
    // echo video code here
} 
```

使用 cookie 的过程几乎相同：

```
if(isset($_COOKIE["VIDEO_PLAYED_ALREADY"]) == false)
{
    setcookie("VIDEO_PLAYED_ALREADY", "true");        
    // echo video code here
} 
```

两种方法的区别：

使用 cookie，您可以设置过期日期。在这种情况下，当浏览器关闭时，cookie 不会“取消设置”。它将由浏览器在每个页面请求上发送，直到它过期或用户手动删除 cookie。

对于会话（通常在幕后使用 cookie），会话变量与会话一起过期。这通常发生在用户关闭浏览器、几分钟内未在网站上执行任何活动或手动删除会话 cookie 时。

# nhprof - NHProfiler 有点奇怪

> ID：10170692
> 
> 赞同：0
> 
> 时间：2012-04-16T08:15:35.387
> 
> 标签：nhprof

您好，我正在使用 nhprofiler，它现在工作正常，它甚至不想启动我点击它开始获取时间胶囊然后什么都没有发生任何知道可能出了什么问题？也许有人有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:39:20.340

您使用的内部版本号是多少？什么是异常 / StackTrace？您可以在 NHProf 组中打开问题：[https ://groups.google.com/forum/?fromgroups#!forum/nhprof](https://groups.google.com/forum/?fromgroups#!forum/nhprof)

# android - 仅使用 System.Drawing 绘制绘图

> ID：10170694
> 
> 赞同：1
> 
> 时间：2012-04-16T08:15:41.310
> 
> 标签：android, iphone, windows-phone-7, graph, system.drawing

在我的 Windows Phone 应用程序中，我制作了一个自定义绘图库，用于一些简单的图形绘图。我这样做了，使用`System.Windows.Shapes`. 现在，当我想在其他平台（android 和 iphone，使用单声道）上使用它时，我遇到了一些问题。

所以我得出的结论是，我可能`System.Drawing`只需要重新制作 te 库。因为该命名空间在所有三个平台上都可用，并且（如果我用谷歌搜索正确的话）包含一些在 ui 上绘制东西的功能。

我的问题

1.  我是否正确绘图包含绘图功能。如果是这样，我如何制作多点线或折线？

2.  是否有任何（已经可用的）库仅使用 System.Drawing 命名空间执行相同的操作？

3.  如果有任何仅适用于 Android 和 MonoTouch 的绘图库，那也可以，因为我的 windowsphone 上已经有了绘图功能，这将是我最后的选择。因为我想让平台后面的代码基本相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:07:46.967

我发现了什么：

在花了一些时间寻找这个答案后，我给了 op 希望找到为所有三个平台实现图形功能的库。只是似乎没有。Silverlight 和 Monotouch(IOS) 有可用的库，但是 silverlight 部分与 windows phone 不兼容。

我发现该库`system.drawing`在 silverlight 中没有完整的功能，所以经过仔细考虑后，我也放弃了这个想法。并转向制作我自己的实现某些`#if (SILVERLIGHT)`或`#if (MONOTOUCH)`区域功能的库。

在这一点上，我已经为 WindowsPhone 制作了自己的库，能够绘制出一个体面的简单图形。我最终使用`System.Windows.Shapes`命名空间完成了这项工作。今天我将开始为 android 制作相同类型的 lib。之后我将为 windowsphone 做这件事，该库将是开源的，完成后我想我会在某个地方发布它。

> 作为一种总结：“我的问题没有真正的答案，所以我不得不解决它。这种解决方法使我制作了自己的跨平台库”。

# types - SAS：格式/信息/类型。他们的区别

> ID：10170695
> 
> 赞同：4
> 
> 时间：2012-04-16T08:15:43.370
> 
> 标签：types, format, sas, informat

关于格式和信息的另一个问题：

格式用于输出（用于显示我和表中的其他用户数据），所以，我不关心它，如果我想以编程方式从表中读取数据，是吗？

但什么是信息？

我有这样的代码数据步骤：

```
 data Out; 
       attrib __fromDate __ToDate informat=ddmmyy16\. format=worddatx32.
              __name __country length = $10
       ;

 set InputTab;

 /*see Dates*/
 retain __fromDate .;
 retain __ToDate .; 

/*see Strings*/
 retain __name "";
 retain __country "";

 __fromDate=coalesce(__fromDate,fromDate);
 __ToDate=coalesce(__fromDate,fromDate);
 __name=coalescec(__name,name);
 __country=coalescec(__country,country);

run; 
```

此代码是否有效？每个语句中的所有这些变量是什么类型？

我是对的，var 的信息和类型是相似的吗？

此外，日期（`__ToDate`, `__FromDate`）是否具有数字类型？（他们的缺失值是点`.`，而不是引号`""`）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:46:33.367

在 SAS 中，变量有两种可能的类型：字符或数字。

信息相似但略有不同。它控制 SAS 如何从外部数据源读取数据。共有三种变体，数字、字符和日期/时间。引用您在此处提供的代码，`informat=ddmmyy16.`告诉 SAS 以日期/时间格式读取输入数据。`16`是宽度。有许多信息，以长度，小数等为条件。

> 而且，日期（__ToDate, __FromDate）是否有数字类型？（他们的缺失值是点。，而不是引号“”）？

在 SAS 中，字符类型的缺失值被赋予双引号`""`。对于数字类型，它是 dot `.`。日期/时间被视为数字类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:10:05.830

关于 INFORMATS 的另一条评论；它们还与访问数据集的交互式工具一起使用（特别是 VIEWTABLE 应用程序，它允许人们从 SAS 会话内部编辑数据集）。

例如，假设您的变量是使用“date9”的 INFORMAT 定义的。和“mmddyy10.”的格式。如果您使用 VIEWTABLE 编辑数据集并在列中键入“18apr2012”，SAS 将接受该日期并将其显示为“04/18/2012”。

请记住，INFORMATS 和 FORMATS 是 SAS 变量的不同“属性”，可以随时修改。FORMATS 也可以被带有 FORMAT**语句**的各种过程“覆盖” 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:33:23.930

信息是 SAS 用来将数据值读入变量的指令。（[信息声明](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000178244.htm)）

信息格式通常用于从称为平面文件（文本文件、ASCII 文件或顺序文件）的外部文件读取或输入数据。您还可以在 DATA 步内的 INPUT 函数中使用信息。该信息指示 SAS 如何将数据读入 SAS 变量。（[SAS 信息和格式简介](http://support.sas.com/publishing/pubcat/chaps/59498.pdf)）

在 SAS 中只有两种类型的变量 - 字符和数字。但是，可以为变量分配许多 INFORMATS 中的任何一种。我不相信 INFORMAT 是相关的，除非正在使用 INPUT 语句/函数。

# java - 什么是适配器类？

> ID：10170698
> 
> 赞同：22
> 
> 时间：2012-04-16T08:15:50.547
> 
> 标签：java, android, adapter

我搜索并调查了，但我仍然需要澄清：适配器类和控制器类是否相似？如果不是，它们有什么不同？

请解释。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-16T08:25:07.983

适配器是一种提供接口或抽象类的默认（通常为空）实现的模式。例如`MouseAdapter`提供`MouseListener`接口的空实现。它很有用，因为通常您并没有真正使用接口声明的所有方法，因此直接实现接口非常冗长。

控制器是 MVC - 模型-视图-控制器模式的一部分。与适配器没有直接关系。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-16T08:23:21.830

适配器的工作主要是使某些对象在需要不同接口的情况下工作。

控制器（在 MVC 意义上）的相似之处在于它是模型和视图类之间的中介，但不同之处在于它通常包含更多关于程序应该如何工作的知识。控制器不仅仅是使一个接口适应另一个接口。

假设您有一个具有`setColor(red, green, blue)`方法的 Color 类。您还有一些需要`setColor(hue, saturation, value)`方法的代码。您可以创建一个适配器类来包装您的 Color 类并根据您的 Color 类提供的方法实现预期的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-18T08:46:51.593

## 适配器类

*   适配器类是一个简单的 java 类，它实现了一个只有 EMPTY 实现的接口。
*   如果我们扩展 Adapter 类而不是实现接口，我们只为 require 方法提供实现

ex---如果我们扩展GenericServlet（AC）而不是实现Servlet（I），那么我们为Service（）方法提供实现，我们不需要为剩余的方法提供实现..

泛型类 充当 Servlet(I) 的 ADAPTER 类。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-27T05:42:01.413

适配器类提供事件侦听器接口中所有方法的默认实现。当您只想处理由特定事件侦听器接口处理的少数事件时，适配器类非常有用。您可以通过扩展其中一个适配器类来定义一个新类，并仅实现与您相关的那些事件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-23T06:36:47.930

适配器类提供事件侦听器类中所有方法的默认实现，方法在该类中定义，主体为空；我们可以通过继承该类来仅覆盖该类的必需方法。适配器类减少了编码行数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-13T14:01:30.847

每个侦听器接口都有 1 个或多个方法。包含超过 1 个方法的接口具有适配器类...每个适配器类都包含该接口的所有方法。如果我们在一个类中编写一个接口的方法，那么你应该编写所有的方法......监听器的一些接口包含超过6个方法......所以为了减轻程序员的负担，他们发明了这些适配器类.所以我们将这些适配器类扩展到我们的类并编写我们的方法，因此它覆盖了适配器方法....所以我们失去了编写所有方法的风险

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-25T07:06:34.127

Advantages of an Adapter Class:

*   If a class extends an Adapter Class, we can override some methods which is needed;
*   It can simplify the creation of the Event handlers in certain situations;
*   It provides an empty implementation of all methods in an EventListener Methods.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-16T08:23:10.797

android 中的适配器对象为（示例）列表提供视图元素 - 因此它们显然属于 MVC 范例的视图部分

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-17T19:26:03.913

通过为本质上相同的方法（即 push(Stack) 而不是 add(ArrayList)）赋予不同名称来适应另一个类的方法的类称为适配器类

# excel - 编写一个循环以将输出从 oracle 数据库到不同的工作表到 excel

> ID：10170701
> 
> 赞同：1
> 
> 时间：2012-04-16T08:16:00.087
> 
> 标签：excel, oracle10g, excel-2007, vba

我在 Oracle 数据库的表中有不同的列名，我正在使用 VB 宏从 oracle 数据库中获取数据到 excel 并将具有不同列名的数据排序到不同的工作表

目前我为每张纸写了一个单独的代码，但我想循环它，这样代码会很简单。有 60 个协作名称，而且都是不同的名称，我想将它们分类到 60 个不同的工作表

因此，如果我循环它，我不需要编写相同的代码 60 次

当前代码：

```
 cn.Open ( _
    "User ID=USERID" & _
    ";Password=PASSWORD" & _
    ";Data Source=xx.xx.xx.xxx:xxxx/xxxx" & _
    ";Provider=OraOLEDB.Oracle")

    rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS from TABLE_NAME AND COLLABNAME like 'COLLAB_NAME1' ORDER BY DATETIME ASC", cn
    With Sheet1
            col = 0
             'First Row: names of columns
            Do While col < rs.Fields.Count
                .Cells(1, col + 1) = rs.Fields(col).Name
                col = col + 1
            Loop

            mtxData = Application.Transpose(rs.GetRows)
            .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

        End With
        rs.Close

  rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS from TABLE_NAME AND COLLABNAME like 'COLLAB_NAME_2' ORDER BY DATETIME ASC", cn
    With Sheet2
            col = 0
             'First Row: names of columns
            Do While col < rs.Fields.Count
                .Cells(1, col + 1) = rs.Fields(col).Name
                col = col + 1
            Loop

            mtxData = Application.Transpose(rs.GetRows)
            .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

        End With
        rs.Close

 rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS from TABLE_NAME AND COLLABNAME like 'COLLAB_NAME1_NAME2_3' ORDER BY DATETIME ASC", cn
    With Sheet3
            col = 0
             'First Row: names of columns
            Do While col < rs.Fields.Count
                .Cells(1, col + 1) = rs.Fields(col).Name
                col = col + 1
            Loop

            mtxData = Application.Transpose(rs.GetRows)
            .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

        End With
        rs.Close
    End Sub 
```

新代码：

```
Sub Load_data()
        Sheets("Sheet1").Select
        Dim cn As ADODB.Connection
        Dim rs As ADODB.Recordset
        Dim col As Integer
        Dim row As Integer
        Dim Query As String
        Dim mtxData As Variant

        Set cn = New ADODB.Connection
        Set rs = New ADODB.Recordset

     cn.Open ( _
    "User ID=USERID" & _
    ";Password=PASSWORD" & _
    ";Data Source=xx.xx.xx.xxx:xxxx/xxxxxx" & _
    ";Provider=OraOLEDB.Oracle")

       'Creates an Array with all the Collabnames.

Dim arrayCOLLABNAME(59) As String
Dim idx As Integer
idx = 0
Sheets("COLLABNAME").Select
Range("A1").Select
Do While Not ActiveCell.Offset((idx), 0) = ""
    arrayCOLLABNAME(idx) = ActiveCell.Offset(idx, 0).Value
    idx = idx + 1
Loop
'The name of the First Sheet
    Sheets("Sheet1").Select
'Loop for 60 Sheets
For i = 0 To 60
    'adds the new Sheet
    Sheets.Add
    rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS from TABLE_NAME AND COLLABNAME like '" & arrayCOLLABNAME(idx) & "' ORDER BY DATETIME ASC", cn
    'use the new Sheet for inserting the Data
    With ActiveSheet
        col = 0
        'First Row: names of columns
        Do While col < rs.Fields.Count
            .Cells(1, col + 1) = rs.Fields(col).Name
            col = col + 1
        Loop
        mtxData = Application.Transpose(rs.GetRows)
        .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

    End With
    rs.Close
Next i

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:26:06.663

我认为这对你有用。但是我没有时间测试它。

*** *新代码

```
 'Creates an Array with all the Collabnames.
Dim arrayCOLLABNAME(59) As String
Dim idx As Integer
idx = 0
Sheets("COLLABNAME").Select
Range("A1").Select
Do While Not ActiveCell.Offset((idx), 0) = ""
    arrayCOLLABNAME(idx) = ActiveCell.Offset(idx, 0).Value
    idx = idx + 1
Loop 
```

* * *

```
'The name of the First Sheet
    Sheets("Tabelle1").Select
'Loop for 60 Sheets
For i = 0 To 60
    'adds the new Sheet
    Sheets.Add
    rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS from TABLE_NAME AND COLLABNAME like '" & arrayCOLLABNAME(idx) & "' ORDER BY DATETIME ASC", cn
    'use the new Sheet for inserting the Data
    With ActiveSheet
        col = 0
        'First Row: names of columns
        Do While col < rs.Fields.Count
            .Cells(1, col + 1) = rs.Fields(col).Name
            col = col + 1
        Loop
        mtxData = Application.Transpose(rs.GetRows)
        .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

    End With
    rs.Close
Next i 
```

# redis - 我必须先获取列表的长度，然后再在 Redis 中查询列表吗？

> ID：10170704
> 
> 赞同：7
> 
> 时间：2012-04-16T08:16:24.130
> 
> 标签：redis

我想知道是否只能`lrange`获得一个列表`Redis`？它需要`end`参数，如果我想要完整的列表，我必须先用它`llen`来获取长度。像这样：

```
redis.lrange("myList", 0, llen("myList")); 
```

是否有任何方法可以直接获取完整列表？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T08:19:46.860

您可以使用 -1 作为最后一个元素的索引。这将为您提供整个列表：

```
lrange mylist 0 -1 
```

这将获得整个列表，但最后一个元素

```
lrange mylist 0 -2 
```

等等……

顺便说一句，这一切都写[在文档中](http://redis.io/commands/lrange)。

# javascript - jquery自动滚动插件没有触发

> ID：10170710
> 
> 赞同：0
> 
> 时间：2012-04-16T08:16:51.000
> 
> 标签：javascript, jquery, html, scroll

我确信我的问题是我在 jquery 和 javascript 方面缺乏经验的结果。我正在尝试使用自动滚动 jquery 插件。当我单击应该激活滚动的链接时，我只是盯着我看。有人可以帮忙吗？这就是我所拥有的：我已经在标签
中调用了相关的脚本。 在我的身体标签的末尾，我有这个：`head`

```
<script type="text/javascript">
$(document).ready(function() {
$("a.hello").click(function () {
    $("#text").autoscroll("toggle", { 
        start: { 
            step: 50, 
            scroll: true, 
            direction: "down", 
            pauseOnHover: true 
        }, 
        delay: 5000, 
        ffrw: { 
            speed: "fast", 
            step: 100 
        } 
    });
});
});
</script> 
```

然后，我尝试使用锚触发脚本，如下所示：

```
<a href="#" class="hello">start/stop</a> 
```

`div`我想“在悬停时暂停”的 id是“文本”。
该插件的源代码和说明可在[此处](http://dl.dropbox.com/u/6266559/jQuery.plugins/Demo.aautoscroll.htm)找到。谢谢。

编辑：
根据表单选择从其他文件调用一些 html 并将其放入`<div id="text"></div>`.

```
function clickMe() {
    var book = document.getElementById("book").value;
    var chapter = document.getElementById("chapter").value;
    var myFile = "'files/" + book + chapter + ".html'";
    $('#text').load(myFile + '#source')
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:34:16.900

您忘记将代码包装在

```
$(document).ready(function() {
..
}); 
```

# android - Android：单击按钮时应出现幻灯片屏幕

> ID：10170716
> 
> 赞同：0
> 
> 时间：2012-04-16T08:17:37.183
> 
> 标签：android, android-gridview, android-sliding

我有一个网格视图，每个图像下都有一些按钮。当我单击按钮时，应该从底部出现一个带有一些选项按钮的幻灯片屏幕，并且整个 gridview 应该在后台显示。当我点击滑动屏幕上的取消按钮时，网格视图应该出现在前景中并且滑动屏幕应该滑出，任何想法或逻辑将不胜感激谢谢

# jersey - Jersey 和其他 JAX-RS api 扩展 - 例如 Shiro、Guice

> ID：10170719
> 
> 赞同：0
> 
> 时间：2012-04-16T08:17:47.610
> 
> 标签：jersey, guice, resteasy, restlet, shiro

Jersey 是否有任何扩展来支持 Shiro、Guice 等框架？还是您单独使用它们，独立于球衣？

它如何查找其他 JAX-RS 框架。Restlet，RestEasy - 他们提供任何扩展还是单独完成？

我已经知道他们有自己的 OAuth 实现，而不是与其他 OAuth 框架合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:16:03.450

关于 Restlet 框架，我们提供了广泛的扩展集，[总结如下](http://wiki.restlet.org/docs_2.1/13-restlet/28-restlet/313-restlet.html)。然而，您自己与其他库的集成通常很容易。关于 Guice，Restlet Incubator 中已经有一个扩展，请参见[此处的规范](http://wiki.restlet.org/developers/172-restlet/257-restlet/284-restlet.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:41:26.787

Jersey 文档的[依赖](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html)页面指定了 Guice 的扩展：

> Jersey 的运行时依赖分为以下几类：
> 
> 核心服务器。Jersey 对服务器所需的最小依赖集。
> 
> 核心客户。Jersey 对客户端的最小依赖集。
> 
> 容器。容器依赖的集合。每个容器提供者都有自己的一组依赖项。
> 
> 实体。实体依赖的集合。每个实体提供者都有自己的一组依赖项。
> 
> 工具。运行时工具所需的一组依赖项。
> 
> 春天。Spring 所需的一组依赖项。
> 
> **吉斯。Guice 所需的依赖项集。**

我没有尝试过集成 Jersey、Guice 和 Shiro，但我不明白为什么你不能这样做。

# facebook-graph-api - Facebook offline_access 过期时间

> ID：10170721
> 
> 赞同：1
> 
> 时间：2012-04-16T08:17:57.343
> 
> 标签：facebook-graph-api

当我调用端点时：

[https://graph.facebook.com/oauth/access_token?client_id=clientID&client_secret=secretKEY&grant_type=fb_exchange_token&fb_exchange_token=VALIDACESSTOKEN](https://graph.facebook.com/oauth/access_token?client_id=clientID&client_secret=secretKEY&grant_type=fb_exchange_token&fb_exchange_token=VALIDACESSTOKEN)

我得到这个答案：

`access_token=NewACCESSTOKEN&expires=6271`

过期时间的单位是什么？秒？小时？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:24:44.857

它在**几秒钟内**到期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T11:51:08.223

我认为它是几秒钟之内。根据他们的文档，大约是 60 天。我得到了5152380的到期时间。出来〜= 60'

# ruby-on-rails - rails 3.1 如何在查询中检索那些在多对多中具有最大关系数的元素？

> ID：10170722
> 
> 赞同：0
> 
> 时间：2012-04-16T08:18:05.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rails-3.1

我尝试了不同的组合，但似乎我无法解决这个问题。

我想从事件模型中检索那些拥有最多用户的事件。

例如，我检索这样一个事件的用户

```
@users = Event.find(x).users 
```

他们可以用这个来计算

```
Event.find(x).users.count 
```

那么，应该如何按每个事件的用户数对列表进行排序。然后先取回8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:27:52.557

同样的问题已解决：[如何获得最高数量的关联模型（Rails）？](https://stackoverflow.com/questions/9739451/how-to-get-highest-count-of-associated-model-rails/9739625#9739625)

```
Event.order("events.users_count DESC") 
```

# css - CSS 偶数和奇数影响标题

> ID：10170724
> 
> 赞同：1
> 
> 时间：2012-04-16T08:18:27.457
> 
> 标签：css, css-tables

我对表格使用`even`& `odd`CSS 规则，但这也是不断变化的 <thead>。

```
thead {background-color: #999;}
tr:nth-child(even) {background: #fff}
tr:nth-child(odd) {background: #C8C8C8} 
```

结果是我的 <thead> is`#C8C8C8`和 not `#999`。

所以我的问题是，是否可以在不影响 <thead> 的情况下使用偶数和奇数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:20:20.127

您可以添加`tbody`到您的选择器，以便该规则仅适用于您的 tbody 中的 tr:s：

```
tbody tr:nth-child(even) {background: #fff}
tbody tr:nth-child(odd) {background: #C8C8C8} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:21:19.757

当然，使用`tbody`选择器：

```
thead{background-color: #999;}
tbody tr:nth-child(even) {background: #fff}
tbody tr:nth-child(odd) {background: #C8C8C8} 
```

因为您在 上使用`<tbody>`元素`<table>`，对吗？如果没有，你应该使用它:)

# mysql - Mysql IN - 所有值都是强制性的，而不是“或”

> ID：10170726
> 
> 赞同：0
> 
> 时间：2012-04-16T08:18:31.437
> 
> 标签：mysql

我有这部分的查询

```
SELECT * FROM conference WHERE active='1' AND conference_feature_id IN (8,9) 
```

现在，此查询加载设置为 8**或**9 的行。

有没有办法如何使用 IN 函数（如果可能，使用逗号）来加载只有 8**和**9 的行。

所以没有它们的行都不会显示

我可以做一个简单的 WHERE 语句，但如果可能的话，我迫切需要使用 IN 函数

结果在这里解释![在此处输入图像描述](../Images/927268eaaf3a37981c96c189c24a41b2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:32:01.677

也许您真正想要的是加载仅包含两个会议功能的所有活动会议（按主键分组）：8 和 9

```
SELECT * 
FROM conference 
WHERE conference_id IN
(
   SELECT conference_id 
   FROM conference 
   GROUP BY conference_id
   HAVING SUM(conference_feature_id IN (8,9)) = 2
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:24:53.140

那应该工作：

```
SELECT * FROM myTbl as myTbl1 WHERE active='1' AND conference_feature_id = 8
JOIN
SELECT * FROM myTbl as myTbl2 WHERE active='1' AND conference_feature_id = 9
ON myTbl1.id = myTbl2.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:25:25.463

尝试

```
SELECT * FROM conference WHERE active='1' AND conference_feature_id = 8
UNION ALL
SELECT * FROM conference WHERE active='1' AND conference_feature_id = 9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T08:34:40.600

尝试

```
select * from conference where active='1' and 9 in conference_feature and 8 in conf 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T08:37:19.880

我发现的最好的最好的查询是

```
SELECT * FROM conference WHERE active='1' AND 
conference_feature_id = '8' AND 
conference_feature_id ='9' 
```

你怎么看？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T09:15:27.743

我相信以下方法可行，但我确信对`SET`SQL 中的类型和位运算符有更好理解的人可以提供更简洁的版本：

```
SELECT * FROM conference WHERE 
  active='1' 
  AND 
  FIND_IN_SET(8, conference_feature_id) > 0 
  AND
  FIND_IN_SET(9, conference_feature_id) > 0 
```

# javascript - 如何删除 XML 节点？

> ID：10170734
> 
> 赞同：1
> 
> 时间：2012-04-16T08:19:13.060
> 
> 标签：javascript, xml, pdf, xpath, xfa

我在开发 Acrobat 时遇到了一些麻烦。我在 PDF 中使用 XML 文件并读写数据。我可以使用 XPath 通过某些条件搜索我想要的数据。但我无法删除节点。我已阅读 Acrobat 开发人员指南及其 API。找到了一种方法，但这不是我需要的。让我们在下面列出一个示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<xfa:data xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">    
      <mapData>
         <busline>
                <name>first</name>
                <stationList>
                     <station>
                         <name>f1</name>
                     <station>
                         <name>f2</name>
                </stationList>
           </busline>      
           <busline>
                <name>second</name>
                <stationList>
                     <station>
                         <name>s1</name>
                     <station>
                         <name>s2</name>
                </stationList>
          </busline>
    </mapData>
</xfa:data> 
```

现在我想删除一个名为“second”的总线节点。我怎样才能删除它？我在 API 中找到了一个方法，就像：

```
var root = XMLData.applyXPath(mapXML,"//mapData");  //mapXML is this XML file's XFAObject by parse method
var deleteNode = XMLData.applyXPath(mapXML,"//mapData/busline[name='first']");
root.remove(root.namedItem(deleteNode);    //it will delete all the busline nodes!!! 
```

我也试过了`root.nodes.remove(deleteNode.nodes.item(0));`还是不行......

我尝试了其他一些方法但不起作用，所以我来寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:35:15.810

试试这个功能：

```
deleteItemAt 
```

# php - SlickGrid - 使用 PHP 从 MySQL 中检索和保存数据

> ID：10170735
> 
> 赞同：0
> 
> 时间：2012-04-16T08:19:17.300
> 
> 标签：php, javascript, mysql, slickgrid

我查看了以下关于使用 SlickGrid 和 PHP 在 MySQL 中检索和保存数据的帖子：

[如何在 PHP / MySQL 中使用 jQuery SlickGrid（加载服务器数据并保存更改）](https://stackoverflow.com/questions/3776600/how-to-use-jquery-slickgrid-with-php-mysql-load-server-data-and-save-changes)

不幸的是，我对 PHP 和 SlickGrid 都很陌生。我非常不确定在哪里放置 PHP 代码以启用对 MySQL 的访问。因为不能将它放入包含我的 SlickGrid 实现的 index.html 文件中，因为它不会被我的服务器解析，因为它不是 .php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:53:58.453

选择一些 Web 应用程序框架。
我用`codeigniter`. 它遵循 mvc 架构。在视图中有你的 html 代码`slickgrid`，在控制器中指向页面，有`ajax`控件并在模型中`sql`通过 sql 查询检索

# php - 上传图片，然后将文件路径放入表单

> ID：10170743
> 
> 赞同：0
> 
> 时间：2012-04-16T08:19:52.177
> 
> 标签：php, mysql, image, upload, filenames

我只需要一些关于我正在创造的东西的方向的建议。

这是一个简单的基于 php 的网页，供我们办公室的体育和社交成员使用，允许他们创建、编辑、查看和删除活动，供所有成员查看。一日游、烧烤和各种类似的活动。

到目前为止，我已经按照我的意愿进行了所有工作，除了一件事，就是事件徽标。

目前，事件都存储在mysql数据库中，在一个表中，事件的每个方面都有一列；时间、日期、价格、地点等

我还有两列用于活动徽标，一列用于场地徽标，一列用于一般活动徽标。

我需要的建议是创建一个页面的最佳方式，该页面允许用户将图像上传到服务器，浏览已上传的图像，选择一个，并在创建事件时将其文件路径输入到文本输入中。

有人可以就解决此问题的最佳方式提出建议，或者提供另一种选择和输入活动徽标的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:46:58.550

Uploadify jQuery 插件[非常](http://www.uploadify.com/)适合批量和/或 AJAX 上传。我处理你的情况的方式是这样的：

1.  将所有图像与表单显示在同一页面上，并为每个图像提供一个相关的单选按钮，并将图像路径作为按钮的值，因此用户只需检查他们想要使用的图像，
2.  如果用户想要上传图片，请使用 Uploadify 插件和它的 AJAX 回调函数来动态填充现有的单选按钮列表。

我对您的问题发表的评论，询问您是否存储图像（或其文件路径）是因为我认为通过查询数据库来检索上传的图像列表会更容易（和更清晰）。就我个人而言，我不会将图像存储在数据库中，只存储它们的文件路径，并使用 PHP 来处理任何需要删除或移动的图像。以这种方式更容易将图像分配给其他实体（尤其是在多对多关系中）。

如果您不想将图像的数据存储在单独的表中，我想您必须使用 PHP 文件系统函数来获取已上传的文件列表（`glob`请记住，尽管可能有更好的函数或这个） .

编辑：

还有一个非常好的 AJAX 文件浏览器插件 - [ckFinder](http://ckfinder.com/)，但我对它的经验很少，无法真正评论它的工作流程，但如果你发现它是一个更优雅的解决方案，你应该尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:41:58.623

如果我能理解您的问题，您想将图像与事件相关联，即用事件标记图像吗？你可以使用 jquery 的 attr() 函数来获取 img 的 src 并将其放在输入字段中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:14:45.387

我最终将图像存储在数据库本身中。

在文件路径方面节省了一些麻烦。

# java - RedHat 5 选项卡中的拖放支持问题

> ID：10170745
> 
> 赞同：0
> 
> 时间：2012-04-16T08:19:56.420
> 
> 标签：java, tabs, drag-and-drop, swt, jface

我在选项卡中对树项目的拖放支持存在问题，下面的简单代码在 Windows XP/7、Ubuntu、Fedora 和 RedHat 4 上运行良好，但在 RedHat 5 上失败。

```
@Override
protected Control createDialogArea(Composite parent) {
    Composite composite = (Composite) super.createDialogArea(parent);
    setShellStyle(getShellStyle() | SWT.RESIZE);

    TabFolder tabFolder = new TabFolder(composite, SWT.NONE);
    tabFolder.setLayoutData(new GridData(GridData.FILL_BOTH));

    TabItem tab = new TabItem(tabFolder, SWT.NONE);
    tab.setText("TabName");

    /*
     * TabItem 1 Content:
     */
    TreeViewer tree = new TreeViewer(tabFolder, SWT.SINGLE|SWT.BORDER);
    tree.setLabelProvider(provider);
    tree.setContentProvider(provider);
    tree.getTree().setHeaderVisible(true);
    tree.getTree().setLayoutData(new GridData(GridData.FILL_BOTH));

    TreeColumn tc = new TreeColumn(tree.getTree(), SWT.NONE, 0);
    tc.setText("Name");
    tc.setWidth(100);
    tab.setControl(tree.getTree());

    tree.setInput(provider.getInput());

    /*
     * Drag&Drop Support
     */
    Transfer[] transfers = new Transfer[] { TextTransfer.getInstance()};
    DragDropItemsSupport dndItemsListener = new DragDropItemsSupport(tree);
    tree.addDragSupport(DND.DROP_MOVE, transfers, dndItemsListener);
    tree.addDropSupport(DND.DROP_MOVE, transfers, dndItemsListener);

    return composite;
} 
```

当我说“效果很好”时，我可以通过提到的主机上的 ViewerDropAdapter 的方法 dragOver 。

```
@Override
public void dragOver(DropTargetEvent event) {
    if (event.item != null)
        System.out.println("Drag over : " + ((TreeItem)event.item).getText());
} 
```

有人有解释、调查方法或解决方案吗:)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:09:49.247

我在 Centos 5 的 TabFolder 中的 TabItem 中的 TableViewer 上看到了同样的事情。尚未在其他操作系统上测试过。可以通过更改为 CTabFolder 和 CTabItem 来修复。

# vb.net - Visual Basic .Net 应用程序部署

> ID：10170752
> 
> 赞同：0
> 
> 时间：2012-04-16T08:20:41.247
> 
> 标签：vb.net

我设计了一个应用程序跟踪详细信息并已部署它。记录正在以我需要的方式更新。我希望在其他三个没有 MS Visual Studio 的不同系统中使用相同的应用程序。我该怎么做 ？我在其他系统中设计的路径中创建一个类似的表并运行应用程序就足够了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:11:27.173

部署项目的最简单方法可能是：

*   将 bin 文件夹中的整个输出复制并粘贴到另一台机器上，并确保在这台机器上安装了您用于应用程序的 .net 框架。

您还可以创建[安装和部署项目](http://msdn.microsoft.com/en-us/library/wx3b589t%28v=vs.100%29.aspx)

*   打开您的应用程序的解决方案
*   文件 -> 添加 -> 新项目...
*   其他项目类型 -> 安装和部署 -> Visual Studio 安装程序 -> 安装项目
*   在文件系统选项卡中，右键单击“应用程序文件夹”-> 添加-> 项目输出，然后从您的应用程序项目中选择“主要输出”。

（有关将文件添加到安装项目的更多详细信息：[如何：将项目添加到部署项目](http://msdn.microsoft.com/en-us/library/z11b431t.aspx)）

**如果您想在每台机器上使用访问数据库的副本，**
因为您正在使用访问数据库。您可以将您正在访问的数据库标记到您的项目中，并将构建操作（在属性页中）设置为内容。

现在以与之前相同的方式右键单击“应用程序文件夹”并添加项目输出。只有这次选择“内容文件”而不是“主要输出”

*   构建安装项目并分发 setup.exe 或 .msi 文件。

**如果您想从每台机器访问相同的数据库，**
我建议将应用程序存储在独立于您的机器运行的服务器上，以便其他人在您的机器未运行时也可以访问数据库。

更改您的连接字符串，以便其他计算机的用户能够连接，如果您需要有关连接字符串的帮助，请查看[此站点。](http://connectionstrings.com)

由于您将无法使用来自其他计算机的绝对文件路径连接到数据库，请创建一个文件共享，其中应该能够连接的每个人都具有读/写权限。

*   构建安装项目并分发 setup.exe 或 .msi 文件。

希望到目前为止这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-06T22:55:29.210

为什么目标计算机上要有VB语言？编译（发布）后，您就脱离了语言环境，并且程序使用机器语言。为了发布，您必须在语言环境中打开程序后进入“构建”和“发布”。将其发布到闪存驱动器而不是 C 驱动器。您可以通过选择“浏览”选项来做到这一点。完成后，您可以随身携带闪存驱动器并将其安装在大多数已安装 .Net 文件的计算机上。以我的经验，大多数 Windows 操作都有它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-07T11:27:21.390

只需在编写和调试程序后创建一个安装程序。在服务器计算机上安装它以及您的数据库。如果您打算共享数据库及其文件服务器数据库（例如 Ms Access），则必须确保该文件夹是共享文件夹。

转到网络上的所有其他计算机并重复安装。在每台计算机上创建一个映射驱动器并将您的数据库字符串配置为指向映射驱动器。如果您的数据库是像 SQL Server 这样的服务器，则需要将数据库访问字符串配置为指向服务器，如下所示：

\Syl-PC\SQLEXpress.MydatabaseName

我假设您熟悉使用数据库提供程序（如 Ole db 或 SQL Server 提供程序）从 Visual Basic 连接到数据库的完整语法。

# java - Java 数据挖掘 connectionFactory 到 postgreSQL

> ID：10170755
> 
> 赞同：0
> 
> 时间：2012-04-16T08:20:54.407
> 
> 标签：java, data-mining

我正在开发一个数据挖掘项目，该项目将使用我的数据库 Postgres (9.1) 作为数据源。我已经发现 Java JDM 是一个非常有趣的 API，可以为我的项目服务。但是，从一开始，我就无法为我的数据库创建连接（或 ConnectionFactory）。我已经尝试过 jdbc 连接，但 JDM 似乎仅适用于 Oracle 数据库。

有没有人可以指点我解决这个问题的方法？

提前致谢。

# c++ - 在 C++ 中将 Excel 电子表格另存为 Jpeg？

> ID：10170756
> 
> 赞同：0
> 
> 时间：2012-04-16T08:21:04.100
> 
> 标签：c++, excel

我有一个 Excel 电子表格，它是一张带有表格和图表的表格。我需要做的是将此添加到 PDF 中。我使用的 PDF API 不支持导入 Excel 文档，所以我想知道 C++ 是否有任何方法可以将 Excel 文档保存/转换为 Jpeg（或 BMP）？

补充一点，显然这必须在 C++ 中作为现有应用程序的一部分来完成，该应用程序每次运行时都会创建 PDF。我不会问这个问题是否可以手动完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:11:32.210

好吧，经过大量的努力和拉扯，我设法回答了我自己的问题。与其他答案中所说的相反，可以将 Excel 电子表格保存为 Jpeg（尽管我坚持使用位图格式，因为这对我来说已经足够了。转换为 jpeg 很容易）。我通过 Excel API 所做的是选择使用的范围。从那里，我将它作为图片复制到剪贴板，然后获取剪贴板数据并将其转换为具有 IPicture 接口的图片对象。从那里，创建一个流并将其复制到流中，然后再将此流保存到文件中。结果是一个 bmp 文件，其中包含我所追求的图像。下面的代码示例。

```
 CRange range = sheet.get_UsedRange();

    range.CopyPicture(Excel::xlScreen, Excel::xlBitmap);

    if (IsClipboardFormatAvailable(CF_BITMAP)) // just to be sure it copied
    {
        if (OpenClipboard(NULL) > 0)
        {
            // save clipboard as bmp
            HBITMAP hBitmap = (HBITMAP)GetClipboardData(CF_BITMAP);

            SaveBitmap(ps_filename, hBitmap, NULL);

            CloseClipboard();
        }
    }
}

bool CExcelDocument::SaveBitmap(LPCSTR filename, HBITMAP bmp, HPALETTE pal)
{
    bool bReturn = false;
    PICTDESC pictdesc;
    LPPICTURE pPicture;

    ::ZeroMemory( &pictdesc, sizeof(pictdesc) );
    pictdesc.picType        = PICTYPE_BITMAP;
    pictdesc.bmp.hbitmap    = bmp;
    pictdesc.bmp.hpal       = pal;
    pictdesc.cbSizeofstruct = sizeof(PICTDESC);

    HRESULT hr = OleCreatePictureIndirect(&pictdesc, IID_IPicture, false, reinterpret_cast<void**>(&pPicture));

    if (!SUCCEEDED(hr))
        return false;

    LPSTREAM pStream;
    hr = CreateStreamOnHGlobal(0, true, &pStream);

    if (!SUCCEEDED(hr))
    {
        pPicture->Release();
        return false;
    }

    LONG lBytesRead = 0;
    DWORD lBytesWritten = 0;
    hr = pPicture->SaveAsFile(pStream, true, &lBytesRead);

    if (!SUCCEEDED(hr))
    {
        pStream->Release();
        pPicture->Release();
        return false;
    }

    HANDLE hFile = CreateFile(filename, GENERIC_WRITE, FILE_SHARE_READ, 0, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);

    if (!hFile)
    {
        return false;
    }

    HGLOBAL hMemory = 0;
    GetHGlobalFromStream(pStream, &hMemory);
    LPVOID pData = GlobalLock(hMemory);

    bReturn = !!WriteFile(hFile, pData, lBytesRead, &lBytesWritten, 0);
    bReturn &= (lBytesWritten == static_cast<DWORD>(lBytesRead));

    GlobalUnlock(hMemory);
    CloseHandle(hFile);

    pStream->Release();
    pPicture->Release();

    return bReturn;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T09:21:23.760

您可以做的是，使用 Execl API ( [Office Interop](http://msdn.microsoft.com/en-us/library/bb726434%28v=office.12%29.aspx) ) 将电子表格加载到 C++ 中。现在您可以访问行和列中的值。您还应该能够提取它们的大小（宽度和高度）。这是你的起点。

现在最简单的方法是使用 GDI（或其他）创建一张新图片并遍历 Excel 工作表中的每个单元格并将其内容绘制到图片中。在此之后，您可以绘制类似于单元格本身的线条。

无论如何，这会导致大量工作并且并不容易，特别是如果您必须考虑单元格内的文本对齐和边框大小等问题。

# php - 无法在 PHP 中加载资源 500 错误 ajax POST

> ID：10170757
> 
> 赞同：0
> 
> 时间：2012-04-16T08:21:04.553
> 
> 标签：php, jquery, ajax, post

我看过很多其他类似的帖子，但我看不到我做错了什么。我还读到这可能是托管（Heroku）的问题，所以我创建了一张票，但 3 天后没有答案。

以下是发送信息的代码：

（讨论.php）

```
 <script type="text/javascript">
        $(function() {
            $('#ideasubmit').click(function() {
                console.log();
                $('#ideacontainer').append('<img src="images/loading.gif" alt="Please Wait" id="idealoading" />');

                var ideatitle = $('#ideatitle').val();
                var ideafbid = $('#ideafbid').val();
                var idea = $('#idea').val();

                $.ajax({
                    url: 'ajaxsqli.php',
                    type: 'POST',
                    data: 'ideatitle=' + ideatitle + '&ideafbid=' + ideafbid + '&idea=' + idea,

                    success: function(result) {
                        $('#idearesponse').remove();
                        $('#ideacontainer').append('<p id="idearesponse">' + result + '</p>');
                        $('#idealoading').fadeOut(500, function() {
                            $(this).remove();
                        });
                    }
                });
                return false;
            });
        }); 
```

下面是发送信息时出现错误的代码文件：

(ajaxsqli.php)

```
 $db = new db;

$query = "INSERT into comments(user_fbid, discuss_type, discuss_post_title, discuss_post, date) VALUES (?, ?, ?, ?, )";

$stmt = $db->stmt_init();
if($stmt->prepare($query)) {
    $stmt->bind_param('iissi', $_POST['ideafbid'], 1, $_POST['ideatitle'], $_POST['idea'], date('Ymd'));
    $stmt->execute();
}

if($stmt) {
echo "Thank you. We'll be in touch with you shortly!";
} else {
echo "There was a problem. Please  try again later.";
}

?> 
```

奇怪的是我在 3 天前让它工作了，我去改进了一些代码，现在我无法让它工作，即使我恢复了备份。

这是完整的错误消息：

加载资源失败：服务器响应状态为 500（内部服务器错误）并指向 ajaxsqli.php

使用 Chrome Inspect Elements 我可以看到 POST 正在发布信息，但没有响应信息。

这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:24:02.133

错误通常`500`是指 php.ini 中的问题。使用参数加载`ajaxsqli.php`到浏览器中（更改`$_POST`为`$_REQUEST`然后您可以使用查询字符串。EG

```
$db = new db;

$query = "INSERT into comments(user_fbid, discuss_type, discuss_post_title, discuss_post, date) VALUES (?, ?, ?, ?, )";

$stmt = $db->stmt_init();
if($stmt->prepare($query)) {
    $stmt->bind_param('iissi', $_REQUEST['ideafbid'], 1, $_REQUEST['ideatitle'], $_REQUEST['idea'], date('Ymd'));
    $stmt->execute();
}

if($stmt) {
echo "Thank you. We'll be in touch with you shortly!";
} else {
echo "There was a problem. Please  try again later.";
}

?> 
```

然后去[http://yourhost/ajaxsqli.php?ideafbid=data&ideatitle=data&idea=data](http://yourhost/ajaxsqli.php?ideafbid=data&ideatitle=data&idea=data)看看PHP报错是什么

# css - 如何将一些 div 连续放置？

> ID：10170759
> 
> 赞同：3
> 
> 时间：2012-04-16T08:21:07.980
> 
> 标签：css, html, row, inline

我试图在它们之间放置两个没有换行符的 div。

这是html：

```
 <div id="header">
            <div id="logo"></div>

            <div id="left">
                <div id="slideshow"></div>
            </div>

        </div> 
```

这是CSS：

```
 #header {
    background-color: #13768a;
    width: 962px;
    height: 207px;
    margin-right: auto;
    margin-left: auto;
    clear: both;
}

#logo {
    background-image:url('logo.png');
    height: 207px;
    width: 250px;
    margin-right: 0px;
    padding: 0px;
    }

    #left {
    width:712px;
    height: 207px;
}

#slideshow {
    background-color: #137387;
    width: 686px;
    height: 144px;
    margin-right: auto;
    margin-left: auto;
} 
```

问题是我希望它看起来像这样： [我希望它看起来如何](http://img405.imageshack.us/img405/8357/indexrecovered.png)

但它看起来像这样： [它看起来如何](http://img440.imageshack.us/img440/6053/77002607.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T08:25:46.907

这由[`display`](http://www.w3.org/TR/CSS2/visuren.html#propdef-display)样式属性控制。通常，`div`元素使用`display: block`. 如果您希望它们位于同一水平线上，您可以使用`display: inline`or代替。`display: inline-block`

`inline-block`使用( [live copy](http://jsbin.com/uxiyol) | [source](http://jsbin.com/uxiyol/edit#html) )的示例：

CSS：

```
.ib {
  display: inline-block;
  border: 1px solid #ccc;
} 
```

HTML：

```
<div class="ib">Div #1</div>
<div class="ib">Div #2</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T08:38:30.143

引入一个`float`CSS 属性。更改 CSS 如下，for`#logo`和`#left`.

```
#logo {
  background-image:url('logo.png');
  height: 207px;
  width: 250px;
  margin-right: 0px;
  padding: 0px;
  float:right;
}

#left {
  width:712px;
  height: 207px;
  float:left;
} 
```

* * *

从[MDN 文档](https://developer.mozilla.org/en/docs/Web/CSS/float)中，

> **float** CSS 属性指定一个元素应该从正常流中取出并放置在其容器的左侧或右侧，文本和内联元素将环绕它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:29:49.603

div元素通常使用`display:block`which强制在元素前后换行。如果要删除换行符，可以使用`display:inline`which将水平显示元素。将div的display属性设置为`display:inline`或`display:inline-block`你想水平显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T08:45:12.823

试试这个方法：

```
#logo {
    background-image:url('logo.png');
    height: 207px;
    width: 250px;
    margin-right: 0px;
    padding: 0px;
    float:right;}

#left {
    position:relative;
    width:712px;
    height: 207px;
}

#slideshow {
    position:absolute;
    top:20px;
    left:20px;
    background-color: #137387;
    width: 686px;
    height: 144px;
    margin-right: auto;
    margin-left: auto;
}​ 
```

基本上我`float:right;`在徽标上放了一个以使其正确定位，然后添加`position:relative`到`#left`div 和div`position:absolute`中`#slideshow`。这样，您可以调整`top`和`left`属性以将幻灯片放置在您想要的任何位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T08:23:03.910

`display:inline`是您需要使用的 css 样式。

# java - 使用对象引用作为互斥锁

> ID：10170760
> 
> 赞同：1
> 
> 时间：2012-04-16T08:21:15.093
> 
> 标签：java, synchronization

这似乎很明显，但我想确保我做对了。如果我尝试锁定空引用，这将无法正常工作？因为它使用对象的属性而不是引用？

前任

```
Object lock = null;

synchronized(lock)
{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:32:55.303

> 如果我尝试锁定空引用，这将无法正常工作？

那是对的。如果您`NullPointerException`尝试使用`null`.

> 因为它使用对象的属性而不是引用？

不完全是。锁定状态不是通常意义上的属性，因为您无法查询它。但是，是的，状态是对象的一部分。

（但是想一想。锁状态怎么可能是引用的一部分？如果是，您将如何同步`this`或作为参数传递的对象引用？引用作为副本传递......和一个对一个副本的更改无法传播到其他副本。如果锁定状态无法传播，则具有自己的引用副本的两个线程无法以任何有意义的方式同步。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T08:22:14.647

是的。同步在对象本身上。

# xuggler - 使用 Xuggler 的 MediaTool API 混合两个音频

> ID：10170766
> 
> 赞同：1
> 
> 时间：2012-04-16T08:21:36.257
> 
> 标签：xuggler

我想从两个音频文件中读取数据，并在混合后将其写入一个新的音频文件。两种音频具有相同的持续时间、采样率和通道数，我想使用音频 1 的左声道和音频 2 的右声道来制作立体声输出。

从我在**MediaTool** API 演示中可以看到，`onAudioSamples`每当读取和解码数据包时都会调用它，但对于这种情况，我需要在调用 onAudioSamples 时同时提供 audio1 和 audio2 的数据，以便修改正确的通道音频 1 的样本与音频 2 的右声道。

我可以使用**MediaTool** API 实现这一点吗？我应该使用较低级别的 API 吗？

`ConcatenateAudioAndVideo`在修改示例数据之前，我是否应该从两个音频文件中读取所有数据包（就像在演示中所做的那样），我应该从每个文件中读取一个数据包吗？

```
while(reader1.readPacket() == null && reader2.readPacket()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:14:03.223

[我在提供的文档](http://www.xuggle.com/xuggler/documentation)中找不到任何分割音频通道的方法。但是`IAudioSampler`and`IAudioResampler`可以用于音频块。如果您从这些类开始并在`IMediaData`.

# c# - 这可能与 IList

> ID：10170777
> 
> 赞同：3
> 
> 时间：2012-04-16T08:22:16.067
> 
> 标签：c#

我有一个名为`Profile`. 非常简单的模型类，目前有 2 个属性； `string Name`和`string Fields`。在我开发项目时，课程会扩展，但目前并不是特别重要。

我有一个`Global static IList`类型`Profile`叫做`Profiles`. 我对处理这些`IEnumerable`类型的数据非常陌生，但我希望更新单个配置文件的属性之一。我尝试了以下方法，但我收到了一个对象引用未设置异常。以下是我设置属性的位置：

```
Profiles.Single(x => x.Name == listBoxProfiles.Text).Fields = textBoxFieldName.Text; 
```

调试器显示列表框和文本框文本属性都具有正确的值，所以我认为这是我使用单一错误的方式。

如果有人能提供一些启示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:30:32.920

只需要一个简单的修改来使代码更具防御性：

```
var profile = Profiles.SingleOrDefault(x => x.Name == listBoxProfiles.Text);

if (profile != null)
{
    profile.Fields = textBoxFieldName.Text;
}
else
{
    Profiles.Add(new Profile(textBoxFieldName.Text));
} 
```

此代码将处理缺失值，`SingleOrDefault`期望返回 0 或 1 个项目。如果找到超过 1 个项目，它将引发异常。

如果您*知道*您的代码应该始终包含您正在寻找的项目，那么您的代码将工作 - 但我建议不要使用这种编程风格，而是要更加防御。

# python - 如何在 django-registraton 中使用 Boostrap 的客户端验证？

> ID：10170787
> 
> 赞同：2
> 
> 时间：2012-04-16T08:23:26.743
> 
> 标签：python, django, django-registration

网址：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

它说我必须添加

```
<fieldset
class="control-group error">
…
</fieldset> 
```

但是我会在哪里添加呢？

如果密码不匹配，如果用户名已被使用，如果电子邮件地址无效，我希望输入字段显示红色边框并在右侧显示错误消息（就像在 Twitter Boostrap 表单页面中一样)

这是我的整个**registration_form.html**模板。它有一个 {{ form }} 标签，默认包含 4 个字段：

1.  用户名
2.  电子邮件
3.  密码
4.  密码（再次）

**registration_base.html**只是扩展了 base.html，其中包含页面的基本结构。

```
{% extends "registration/registration_base.html" %}
{% block title %}Register for an account{% endblock %}
{% block content %}

<table>
    <form method='post' action='' class="control-group error" >{% csrf_token %}
        {{ form }}
        <tr><td></td><td><input type="submit" value="Register" /></td>
    </form>
</table>
{% endblock %} 
```

例子： ![在此处输入图像描述](../Images/f1b8ecddc237d2bfe9e60ae82f124e73.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T23:58:41.993

[django-bootstrap](https://github.com/earle/django-bootstrap)是一个很棒的库，它会自动为你做这件事。它依赖于使用它为您呈现的自定义 Form 对象。django-registration 中用于注册过程的默认格式是`registration.forms.RegistrationFormUniqueEmail`. 要将这种形式与 django-bootstrap 结合起来，您需要定义一个继承自两者的新类。例如，将其放在您的 forms.py 文件中：

```
# forms.py
from bootstrap.forms import BootstrapForm
from registration.forms import RegistrationFormUniqueEmail
class RegistrationForm(RegistrationFormUniqueEmail, BootstrapForm):
    pass 
```

接下来，您必须告诉 django-registration 使用这个新表单。django-registration 的默认设置是将其添加到您的 urls.py 中：

```
# urls.py
(r'^accounts/', include('registration.backends.default.urls')), 
```

但是，这使用默认形式。要进行自定义，您可以明确指定 URL。[从 django-registration 的默认后端 urls.py](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/registration/backends/default/urls.py)复制它们。注册的默认条目如下所示：

```
# urls.py
from registration.views import register
url(r'^register/$',
    register,
    {'backend': 'registration.backends.default.DefaultBackend'},
    name='registration_register'), 
```

要指定您要使用自定义表单对象，[文档](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)表明您可以传递一个参数，`form_class`，如下所示：

```
# urls.py
from yourapp.forms import RegistrationForm
from registration.views import register
url(r'^register/$',
    register,
    {'backend': 'registration.backends.default.DefaultBackend'
     'form_class': RegistrationForm},
    name='registration_register'), 
```

您可以对 django-registration 中使用的所有表单重复此过程。出现错误时，生成的注册表如下所示：

![在此处输入图像描述](../Images/5031c1517a7d3677de3fd6d357d67a51.png)

# gridview - 如何在多个页面中更改 GridView 的 HeaderText？

> ID：10170788
> 
> 赞同：0
> 
> 时间：2012-04-16T08:23:31.487
> 
> 标签：gridview, headertext

我想在多个页面中重命名 GridView 中的列名。到目前为止，我可以一次更换一个。这是我的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{

    for (int i = 0; i < GridView1.Columns.Count; i++)
    {
        if (GridView1.Columns[i].HeaderText == TextBox1.Text)
        {
            GridView1.Columns[i].HeaderText = TextBox2.Text;
        }

    }

} 
```

在设计视图中，我有两个文本框和一个按钮。当我单击按钮时，它会获取 textbox1 并重命名我在 textbox2 中键入的那一列。

我正在尝试做的事情：我有多个页面，我想更改他们的列 HeaderText。我不想将这些按钮和文本框添加到每个页面。有没有办法只调用一次这个函数并更改所有页面中的 HeaderTexts？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:30:08.250

我通过将列名发送到数据库来解决它，并从 Page_Load 中的数据库中获取新的标题文本。我知道这不是最好的解决方案，由于每次加载页面时都会连接到数据库，因此速度很慢。有总比没有好。:)

**数据库部分：**

```
 try
    {
        con.Open();
        string[] _col = {  }; // Enter here the column names
        for (int i = 0; i < _col.Length; i++)
        {
            if (_col[i] == TextBox1.Text)
            {
                SqlCommand ins = new SqlCommand("insert into Kolon_Ismi_Degistirme (ind, newHeaderName) values (@ind, @newHeaderName)", con);
                ins.Parameters.AddWithValue("@ind", i);
                ins.Parameters.AddWithValue("@newHeaderName", TextBox2.Text);
                ins.ExecuteNonQuery();
            }
        }
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        con.Close();
    } 
```

**page_load 部分**

```
 try
    {
        //Get new column name using database                        
        con.Open();
        SqlCommand sel = new SqlCommand("select ind, newHeaderName from Kolon_Ismi_Degistirme", con);
        reader = sel.ExecuteReader();
        while (reader.Read())
        {
            GridView1.Columns[(int)reader["ind"] + 2].HeaderText = (string)reader["newHeaderName"];
        }                
    }
    catch (global::System.Exception)
    {
        throw;
    }
    finally
    {
        reader.Close();
        con.Close();
    } 
```

# sql - 链接服务器查询/动态 SQL

> ID：10170791
> 
> 赞同：3
> 
> 时间：2012-04-16T08:23:58.007
> 
> 标签：sql, tsql, stored-procedures, sql-server-2008-r2, dynamic-sql

我目前有一个在存储过程中查询的链接服务器。我的查询目前工作得很好，但是这个查询需要针对我拥有的每个代码分支进行更改。我想知道派生我在跨服务器查询中调用的数据库名称的最佳方法是什么。

例如：服务器 A 有一个到服务器 B 的链接。服务器 A 包含 3 个数据库。SRV_A.DB1_DEV、SRV_A.DB2_Trunk、SRV_A.DB3_Prod 每个都链接到它们的服务器 B 对应项... SRV_B.DB1_DEV、SRV_B.DB2_Trunk、SRV_B.DB3_Prod

服务器 A 上的每个数据库都有相同的存储过程。存储过程中唯一改变的是跨服务器选择。所以 SRV_A.DB1_Dev 在存储过程中有一个选择，内容如下：

```
SELECT foo FROM [SRV_B].[DB1_DEV].[foo_table] WHERE bar = 1 
```

而主干分支上的存储过程将是

```
SELECT foo FROM [SRV_B].[DB2_Trunk].[foo_table] WHERE bar = 1 
```

因为我想要一个 VS 项目，将数据库部署到提到的每个分支，我希望能够动态填写数据库名称。我想出的解决方案是使用 CHARINDEX 函数进行一系列 IF 检查，然后使用动态 SQL 创建查询，如下所示：

```
DECLARE @dSql NVARCHAR(4000);
DECLARE @databaseName NVARCHAR(100) = DB_NAME();
DECLARE @tableName NVARCHAR(100);
IF SELECT CHARINDEX('Dev', @databaseName, 0)
    SET @tableName = '[SRV_B].[DB1_DEV].[foo_table]
    ...Same if & set for Trunk
    ...Same if & set for Prod
SET @dSql = 'DECLARE @retID INT;SELECT foo FROM ' + @tableName 
+ ' WHERE bar = 1';SET @retID = SELECT SCOPE_IDENTITY()'
EXEC(@dSQL); 
```

我不得不想象有一个更好的解决方案，如果有人可以帮助我，将不胜感激。如果通过一些外线投篮，这是最好的方法，也让我知道。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:53:13.323

解决此问题的一种方法可能是通过将链接服务器名称包装在[同义词](http://msdn.microsoft.com/en-us/library/ms177544.aspx)中来抽象它：
*注意目标表名称中的额外部分 - 跨服务器查询需要一个四部分名称 - 我假设这是一个错字在问题中，那`foo_table`是在`dbo`模式中*

```
CREATE SYNONYM dbo.syn_foo_table
FOR [SRV_B].[DB1_DEV].[dbo].[foo_table] 
```

然后可以在代码中将其称为

```
SELECT foo FROM dbo.syn_foo_table WHERE bar = 1 
```

然后，您需要自定义部署脚本以创建指向环境的正确服务器/数据库的同义词。这可以使用与您在上面概述的类似的动态 SQL 过程，但只需要在部署时执行一次（而不是在每次执行时）。

另一种可能的解决方案是[`SQLCMD`](http://msdn.microsoft.com/en-us/library/ms162773%28v=sql.105%29.aspx)在存储过程脚本中使用参数，因为（AFAIK）VS 项目用于`SQLCMD`部署数据库对象。
此功能允许您使用表单中的变量参数化 SQL 脚本`$(variablename)`- 在您的情况下：

```
SELECT foo FROM [SRV_B].[$(dbname)].[foo_table] WHERE bar = 1 
```

`-v`可以使用环境变量设置变量的值，也可以使用开关将其作为参数传递给命令。有关完整详细信息，请参阅`SQLCMD`上面的 MSDN 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T01:41:32.330

我能够将上述环境变量组合用于 db-name，并且还可以使用以下查询动态生成 SRV 名称：

```
DECLARE @ServerName NVARCHAR(100);
SET @ServerName = (SELECT name FROM sys.servers WHERE server_id = 1) 
```

# ajax - Struts2中使用ajax上传文件

> ID：10170792
> 
> 赞同：0
> 
> 时间：2012-04-16T08:23:58.740
> 
> 标签：ajax, file, upload, struts2

我想在没有任何 jquery 的情况下使用 ajax 和 strtus2 上传文件，它应该使用 ajax 和操作简单上传，它应该处理多部分/表单数据并将文件保存在指定路径中。

# jquery - 无效的 json 突然开始抛出解析错误

> ID：10170794
> 
> 赞同：0
> 
> 时间：2012-04-16T08:24:05.050
> 
> 标签：jquery, json, parse-error

我在两个地方观察到了这一点。两者都是 AJAX 调用，它们返回一些 JSON，用于填充两个选择下拉列表的选项。我目前正在使用 jquery 选择的插件对这些下拉菜单应用增强功能，我想是一些变化导致了这个问题。我不确定到底是什么，因为我恢复了出现解析错误的那个模块的更改，但错误仍在发生。

所以，我问，一般来说，无效 JSON 突然导致问题的原因可能是什么。请注意，返回的 JSON 一直是无效的。我没有对此进行任何更改。此外，我没有对 $.ajax 调用进行任何更改。JSON 样本 -

```
{
 "result":"success",
"reqparams": 
{"site_id": {"name":"site_id","display_name":"","possible_values":"","default_value":"","editable":"1","description":"the ad slot id provided by your 4th Screen account manager",},},
"optparams": {
"keywords": {"name":"keywords","display_name":"","possible_values":"","default_value":"","editable":"1","description":"",},
"reachability": {"name":"reachability","display_name":"","possible_values":"wifi[ADMARVEL_SEP]cell","default_value":"","editable":"1","description":"Information about how the device is being connected to the internet.",},
},
} 
```

注意：额外的逗号，例如在“描述”属性的值之后。

**更新** 生成 JSON 的代码 - 示例代码 - 请忽略未使用 json_encode 的事实。这是非常古老的代码。

```
if (is_array($reqd_params) && count($reqd_params) > 0)
        {
            header("HTTP/1.1 200 OK");
            echo '{
                    "result":"success",
                    "reqparams": {';
            foreach ($reqd_params as $paramKey => $paramValArr)
            {
                echo '"'.$paramValArr['name'].'": {';
                echo '"name":"'.$paramValArr['name'].'",';
                echo '"display_name":"'.$paramValArr['display_name'].'",';
                echo '"possible_values":"'.$paramValArr['possible_values'].'",';
                echo '"default_value":"'.$paramValArr['default_value'].'",';
                echo '"editable":"'.$paramValArr['editable'].'",';
                echo '"description":"'.addslashes($paramValArr['description']).'",';
                echo '},';
            }
            echo '}';

            if(!empty($reportData) && $reportData != -1)
            {
                echo',';
                echo '"reportData":"'.htmlspecialchars($reportData).'"';
            }

            echo ' }';

        } 
```

客户端代码

```
$.ajax({
            type: "POST",
            url: posturl,
            data : data,
            dataType: "json",
            async: false,
            success: function(msg){

                         //not coming here
                        },

                        error: function(jqXHR, textStatus, errorThrown){
                alert("error "+errorThrown);

                                //alerts parse error
            }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:36:54.047

我会说这个事实

```
I upgraded from jquery 1.3.2 to 1.6.4. 
```

（来自评论）

并且您的 jquery 代码曾经接受不正确的 JSON（如：它正在做一些“错误”的事情）但现在按预期工作的事实是所见行为的来源，就像您的问题一样。

作为一个解决方案，如果更改代码真的不是一个选项，您可以更改预期结果的数据类型，然后手动解析您的`specialJSON`代码。

# android - 寻找有关 Android 设备上跟踪系统的建议

> ID：10170795
> 
> 赞同：0
> 
> 时间：2012-04-16T08:24:05.303
> 
> 标签：android, google-maps-api-3, google-fusion-tables

我开发了一个 Android 应用程序，该应用程序通过 Apache 客户端将纬度和经度发送到 Web 服务。在收到坐标的那一刻，我将收到的数据存储在数据库中。我稍后会在带有标记的谷歌地图上显示这些数据。现在我的想法是改进我的应用程序，但我还没有清楚地看到方法。主要思想是将跟踪数据存储在移动设备上，并在我停止应用程序时发送到服务器。（这个想法是用我的轨迹应用程序“保存”轨迹数据，然后发送到我的服务器，我想在谷歌地图上显示轨迹）怀疑：

*   如何存储数据、KML、KMZ？还有其他更好的选择吗？
*   将 KML 或 KMZ 保存在数据库中是个好主意吗？还是使用 Fusion Tables 会是更好的选择？

在此先感谢，任何建议都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:36:31.287

我建议您将纬度和经度存储在您选择的数据库中，然后使用 google maps api 设置您的标记。

使用 google api 放置标记非常简单：

[https://developers.google.com/maps/](https://developers.google.com/maps/)

您甚至可以创建飞行计划，并为特定位置报告添加标记。

只需保存到数据库，然后使用您选择的服务器端，使用正确的 latlng 坐标创建 js。

# java - Phonegap 1.6.0 Android 出错

> ID：10170798
> 
> 赞同：0
> 
> 时间：2012-04-16T08:24:23.763
> 
> 标签：java, android, cordova

我正在尝试让 phonegap 1.6.0 与 Android 一起使用，看起来就像按照[他们网站上的指南进行操作，](http://phonegap.com/start#android)但它没有启动。它只是说应用程序意外停止。我已经经历了很多次，尝试制作多个项目，但我仍然得到同样的结果。

这是我拥有的所有代码：

```
package com.phonegap.test;

import android.os.Bundle;
import org.apache.cordova.*;

public class PhoneGapTest extends DroidGap {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       super.loadUrl("file:///android_asset/www/index.html");
   }
 } 
```

这一切都编译得很好，但在启动时就会出错。我已经使用快速入门指南对我的项目进行了两次和三次检查，并且它排成一行。我的构建路径中有cordova-1.6.0.jar。

![在此处输入图像描述](../Images/a728a45aee9526e2e516f23f81c30f4d.png)

[这是我在尝试启动时在 eclipse 中遇到的错误。](http://pastebin.com/ZjNiK9ns)

有什么我想念的吗？还是 1.6.0 中的某些更改未反映在文档中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:53:30.430

我注意到您有 Android 依赖项。我一直注意到，当我使用 Eclipse 时，我得到了两次包含的 jar，这导致了这个错误。我会检查 Android 依赖项，以确保您没有将 cordova jar 链接两次。

此外，这与错误无关，但您应该将您的 Android SDK 更新到最新版本，并使用最新版本的 Android 和 Cordova。我会考虑更新“入门”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:17:55.417

如果您有 ADT r17 或更新版本，cordova*.jar 需要位于 libs 目录中。更多细节[在这里](https://stackoverflow.com/questions/9820675/gson-noclassdeffounderror-after-adt-and-sdk-tools-update-to-v17)

# php - 在zend框架中使用联合的sql查询

> ID：10170801
> 
> 赞同：1
> 
> 时间：2012-04-16T08:24:39.497
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-table

```
 Table : sc_message 
  ______________________________________________________________________
 |message_id | message_sender_id | message_receiver_id | message_content|
 ------------------------------------------------------------------------  

Table : sc_user 
  _____________________
 | user_id | user_name |
 ----------------------- 

Table : sc_message_slave

| message_slave_id | message_slave_sender_id | message_slave_receiver_id | message_slave_content | message_slave_sent_on |

 $Query_1 = $this ->select()
                  ->from(array('msg' => 'sc_message'), array('msg.message_sender_id', 'msg.message_receiver_id', 'msg.message_content', 'msg.message_sent_on'))
                  ->join(array('usr' => 'sc_user'), 'msg.message_sender_id = usr.user_id', array('usr.user_name as sender_name'))
                  ->where('msg.message_id = ?',$message_id)
                  ->setIntegrityCheck(false);

 $Query_2 = $this ->select()
                     ->from(array('msg_slv' => 'sc_message_slave'), array('msg_slv.message_slave_sender_id', 'msg_slv.message_slave_receiver_id','msg_slv.message_slave_content', 'msg_slv.message_slave_sent_on'))
                     ->join(array('usr' => 'sc_user'), 'msg_slv.message_slave_sender_id = usr.user_id', array('usr.user_name as sender_name'))
                     ->where('msg_slv.message_id = ?',$message_id)
                     ->setIntegrityCheck(false);            
 $select = $this ->select()
                    ->union(array($Query_1, $Query_2))
                    ->order('msg.message_sent_on')
                    ->setIntegrityCheck(false); 
```

它给了我这样的警告，并且执行在那里停止..

```
Warning: Invalid use of table with UNION in E:\wamp\www\social_site\library\Zend\Db\Select.php on line 1222 
```

你能告诉我查询有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:42:26.933

既然你有一个你在哪里做联合的命令，你可能会遇到这个问题：

[http://framework.zend.com/issues/browse/ZF-4338](http://framework.zend.com/issues/browse/ZF-4338)

他们不会*解决*问题，您可以阅读原因，但有人发布了解决方法。

```
$select_1 = $db->select()->...;
$select_2 = $db->select()->...;

$main_select = $db->select()->union( array(  '('.$select_1.')',  '('.$select_2.')' ) ); 
```

# jax-rs - RESTEasy：添加无需身份验证即可调用的方法

> ID：10170802
> 
> 赞同：1
> 
> 时间：2012-04-16T08:24:43.217
> 
> 标签：jax-rs, resteasy

我有一个使用 RESTEasy 公开 RESTful API 的应用程序。在调用任何方法之前，用户需要使用 HTTP-Basic 进行身份验证。

但是，我想向 RESTful API 添加一个方法，任何用户都可以在不进行身份验证的情况下调用该方法。我怎么做？是否有一些 JAX-RS/RESTEasy 注释可以添加到方法声明中，以指示该方法的身份验证是可选的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:28:11.397

在您的 web.xml 中排除不需要身份验证的 REST 路径

```
<security-constraint>
   <web-resource-collection>
     <web-resource-name>All Access</web-resource-name>
     <url-pattern>/unchecked/*</url-pattern>
     <http-method>DELETE</http-method>
     <http-method>PUT</http-method>
     <http-method>HEAD</http-method>
     <http-method>OPTIONS</http-method>
     <http-method>TRACE</http-method>
     <http-method>GET</http-method>
     <http-method>POST</http-method>
   </web-resource-collection>
   <user-data-constraint>
     <transport-guarantee>NONE</transport-guarantee>
   </user-data-constraint>
</security-constraint> 
```

那么您不需要身份验证的 REST 资源应该类似于

```
@Path("/unchecked")
public class NoAuthResource{

} 
```

# sql - ActiveRecord::StatementInvalid。PG错误

> ID：10170807
> 
> 赞同：18
> 
> 时间：2012-04-16T08:24:59.113
> 
> 标签：sql, ruby, ruby-on-rails-3, postgresql, activerecord

我正在尝试从`Project`模型中找到一个项目 using`Project.find(id)`但它给了我`ActiveRecord::StatementInvalid`错误

全程追踪——

```
 PG::Error: ERROR: prepared statement "a1" already exists : SELECT COUNT(*) FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE c.relkind in ('v','r') AND c.relname = $1 AND n.nspname = ANY (current_schemas(false))
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1180:in `prepare'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1180:in `prepare_statement'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1144:in `exec_cache'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-     3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:664:in `block in exec_query'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activesupport-3.2.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:662:in `exec_query'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:797:in `table_exists?'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/connection_adapters/schema_cache.rb:30:in `table_exists?'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:223:in `table_exists?'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/attribute_methods/primary_key.rb:75:in `get_primary_key'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/attribute_methods/primary_key.rb:60:in `reset_primary_key'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/attribute_methods/primary_key.rb:49:in `primary_key'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:230:in `block in columns'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:228:in `map'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:228:in `columns'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:237:in `columns_hash'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/relation/delegation.rb:7:in `columns_hash'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/relation/finder_methods.rb:330:in `find_one'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/relation/finder_methods.rb:311:in `find_with_ids'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/relation/finder_methods.rb:107:in `find'
/home/deploy/.rvm/gems/ruby-1.9.2-p290@submit_contactpl/gems/activerecord-3.2.2/lib/active_record/querying.rb:5:in `find'
/home/deploy/submit_contactpl/app/workers/php_worker.rb:5:in `perform' 
```

第 5 行`php_worker`是

```
 project = Project.find(project_id) 
```

可能是什么问题？你能不能给它遮光。可能的解决方案是什么

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-16T01:05:08.733

它所需要的只是

```
 task "resque:setup" => :environment do
  #ENV['QUEUE'] = '*'

  Resque.before_fork = Proc.new { ActiveRecord::Base.establish_connection }
 end 
```

在你的`resque.rake`文件中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T10:04:27.257

这是 Ruby 堆栈中某处的错误。

它正在尝试准备一个名为“a1”的语句，该语句正在检查表/视图定义（可能是针对您的“项目”表）。它发现已经存在同名的预处理语句并吐出错误。它试图准备的查询很好 - 它返回有多少表具有给定名称的计数。

要么它没有正确跟踪其准备好的语句，要么它认为它已被删除并且没有真正删除。我会更新 rails & activerecord 并检查错误报告。

# c - C 字符串中的 '\0' 之后的内存会发生什么？

> ID：10170808
> 
> 赞同：66
> 
> 时间：2012-04-16T08:25:02.187
> 
> 标签：c, string, pointers, malloc, c-strings

令人惊讶的简单/愚蠢/基本问题，但我不知道：假设我想向函数的用户返回一个 C 字符串，在函数的开头我不知道它的长度。最初只能对长度设置上限，根据加工，有尺寸缩小的情况。

问题是，分配足够的堆空间（上限）然后在处理期间终止字符串是否有任何问题？即如果我将'\0' 粘贴到分配的内存的中间，（a.）`free()`是否仍然正常工作，并且（b.）'\0' 之后的空间是否变得无关紧要？添加 '\0' 后，内存是否会被返回，还是会一直占用空间直到`free()`被调用？为了节省一些前期编程时间，在调用 malloc 之前计算必要的空间，将这个悬挂空间留在那里通常是不好的编程风格吗？

为了给出一些上下文，假设我想删除连续的重复项，如下所示：

输入“你好哦哦哦！！” --> 输出“Helo oOo！”

...下面的一些代码显示了我如何预先计算我的操作产生的大小，有效地执行两次处理以获得正确的堆大小。

```
char* RemoveChains(const char* str)
{
    if (str == NULL) {
        return NULL;
    }
    if (strlen(str) == 0) {
        char* outstr = (char*)malloc(1);
        *outstr = '\0';
        return outstr;
    }
    const char* original = str; // for reuse
    char prev = *str++;       // [prev][str][str+1]...
    unsigned int outlen = 1;  // first char auto-counted

    // Determine length necessary by mimicking processing
    while (*str) {
        if (*str != prev) { // new char encountered
            ++outlen;
            prev = *str; // restart chain
        }
        ++str; // step pointer along input
    }

    // Declare new string to be perfect size
    char* outstr = (char*)malloc(outlen + 1);
    outstr[outlen] = '\0';
    outstr[0] = original[0];
    outlen = 1;

    // Construct output
    prev = *original++;
    while (*original) {
        if (*original != prev) {
            outstr[outlen++] = *original;
            prev = *original;
        }
        ++original;
    }
    return outstr;
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-16T09:30:28.443

> 如果我将 '\0' 粘贴到分配的内存中间，是否
> 
> (a.) free() 仍然可以正常工作，并且

是的。

> (b.) '\0' 之后的空格是否变得无关紧要？添加 '\0' 后，内存是否会立即返回，还是会一直占用空间，直到调用 free()？

要看。通常，当您分配大量堆空间时，系统首先分配虚拟地址空间 - 当您写入页面时，会分配一些实际的物理内存来支持它（并且当您的操作系统具有虚拟内存时，这些物理内存可能稍后会被换出到磁盘支持）。众所周知，虚拟地址空间的浪费分配和实际物理/交换内存之间的这种区别允许稀疏数组在此类操作系统上具有合理的内存效率。

现在，这种虚拟寻址和分页的粒度是内存页面大小——可能是 4k、8k、16k...？大多数操作系统都有一个函数，你可以调用它来找出页面大小。因此，如果您正在执行大量小分配，那么四舍五入到页面大小是浪费的，并且如果您的地址空间相对于您真正需要使用的内存量是有限的，那么取决于上述方式的虚拟寻址不会扩展（例如，具有 32 位寻址的 4GB RAM）。另一方面，如果你有一个 64 位进程运行，比如 32GB 的 RAM，并且执行的此类字符串分配相对较少，那么你就有大量的虚拟地址空间可供使用，并且不会舍入到页面大小' t 很多。

但是 - 请注意在整个缓冲区中写入然后在某个较早的时间点终止它（在这种情况下，一次写入的内存将具有后备内存并可能最终进入交换）与拥有一个您只在其中写入的大缓冲区之间的区别到第一位然后终止（在这种情况下，后备内存仅分配给已用空间，向上舍入到页面大小）。

还值得指出的是，在许多操作系统上，堆内存在进程终止之前可能不会返回给操作系统：相反，malloc/free 库会在需要增加堆时通知操作系统（例如，`sbrk()`在 UNIX 或`VirtualAlloc()`Windows 上使用） ）。从这个意义上说，`free()`内存可以免费供您的进程重用，但不能免费供其他进程使用。一些操作系统确实对此进行了优化——例如，为非常大的分配使用不同且可独立释放的内存区域。

> 为了节省一些前期编程时间，在调用 malloc 之前计算必要的空间，将这个悬挂空间留在那里通常是不好的编程风格吗？

同样，这取决于您要处理多少这样的分配。如果有很多相对于您的虚拟地址空间/RAM - 您想明确地让内存库知道并非所有最初请求的内存实际上都需要使用`realloc()`，或者您甚至可以`strdup()`根据实际情况更紧密地分配一个新块。需求（然后`free()`是原始的） - 取决于您的 malloc/free 库实现可能会更好或更差，但很少有应用程序会受到任何差异的显着影响。

有时您的代码可能在一个库中，您无法猜测调用应用程序将管理多少个字符串实例 - 在这种情况下，最好提供永远不会太糟糕的较慢行为......所以倾向于将内存块缩小到适合字符串数据（一组额外的操作，因此不会影响 big-O 效率），而不是浪费未知比例的原始字符串缓冲区（在病态的情况下 - 在任意大分配后使用零个或一个字符）。作为一种性能优化，如果未使用的空间 >= 已用空间，您可能只会费心返回内存 - 调整以适应口味，或使其成为调用者可配置的。

您评论另一个答案：

> 所以归根结底是判断realloc是否需要更长的时间，还是预处理大小的确定？

如果性能是您的首要任务，那么是的 - 您想要配置文件。如果您不受 CPU 限制，那么作为一般规则，采用“预处理”命中并进行适当大小的分配 - 碎片和混乱更少。与此相反，如果您必须为某些功能编写特殊的预处理模式 - 这是错误和代码维护的额外“表面”。`asprintf()`（在实现你自己的from时通常需要这种权衡决定`snprintf()`，但至少你可以相信`snprintf()`它会按照记录的方式行事，而不必亲自维护它）。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-16T08:27:35.167

> 添加 '\0' 后，内存是否会立即返回，还是会一直占用空间，直到调用 free()？

没有什么神奇的`\0`。`realloc`如果你想“缩小”分配的内存，你必须打电话。否则，内存只会坐在那里，直到您调用`free`。

> 如果我将 '\0' 粘贴到分配内存的中间，（a.） free() 是否仍然可以正常工作

无论您**在该内存中** `free`做什么，只要将`malloc`. 当然，如果你在外面写，所有的赌注都没有了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-16T08:30:18.130

`\0`只是从另一个角度来看的另一个角色`malloc`，`free`他们不在乎您在内存中放入了什么数据。因此`free`，无论您`\0`在中间添加还是根本不添加，它仍然有效`\0`。`\0`分配的额外空间仍然存在，一旦添加到内存中，它就不会返回给进程。我个人更愿意只分配所需的内存量，而不是分配在某个上限，因为那样只会浪费资源。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-16T08:29:28.990

这`\0`是将字符数组解释为字符串的纯粹约定 - 它独立于内存管理。也就是说，如果你想取回你的钱，你应该打电话给`realloc`. 该字符串不关心内存（这是许多安全问题的根源）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-16T08:29:49.960

一旦通过调用 malloc() 从堆中获取内存，内存就可以使用了。插入 \0 就像插入任何其他字符一样。在您释放它或操作系统将其收回之前，该内存将一直由您拥有。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-16T08:29:27.643

malloc 只是分配一块内存..它由你来使用，但是你想要并从初始指针位置调用 free ......在中间插入 '\0' 没有任何后果......

具体来说 malloc 不知道你想要什么类型的内存（它只返回一个 void 指针）..

让我们假设您希望分配 10 字节的内存，从 0x10 到 0x19 ..

```
char * ptr = (char *)malloc(sizeof(char) * 10); 
```

在第 5 个位置 (0x14) 插入空值不会释放 0x15 以后的内存...

但是，从 0x10 中释放会释放整个 10 个字节的块。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-16T08:28:02.960

1.  `free()`仍然可以在内存中使用 NUL 字节

2.  空间将一直浪费，直到`free()`被调用，或者除非您随后缩小分配

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-18T03:04:46.640

一般来说，记忆就是记忆。它不在乎你在里面写了什么。但是它有一个种族，或者如果你更喜欢一种风格（malloc、new、VirtualAlloc、HeapAlloc 等）。这意味着分配一块内存的一方还必须提供释放它的方法。如果您的 API 包含在 DLL 中，那么它应该提供某种免费功能。这当然会给调用者带来负担，对吧？那么为什么不把所有的**负担**都放在来电者身上呢？处理动态分配内存的最佳方法是**不要**自己分配它。让调用者分配它并将其传递给您。他知道他分配了什么味道，并且他有责任在他用完它时释放它。

调用者如何知道要分配多少？像许多 Windows API 一样，您的函数在调用时返回所需的字节数，例如使用 NULL 指针，然后在提供非 NULL 指针时执行该工作（如果适合您的情况，请使用 IsBadWritePtr 来仔细检查可访问性）。

这也可以更有效率。内存分配成本很高。太多的内存分配会导致堆碎片，然后分配成本会更高。这就是为什么在内核模式中我们使用所谓的“后备列表”。为了尽量减少完成的内存分配次数，我们使用 NT 内核为驱动程序编写者提供的服务重用我们已经分配和“释放”的块。如果您将内存分配的责任转嫁给调用者，那么他可能会从堆栈（_alloca）中向您传递廉价的内存，或者一遍又一遍地向您传递相同的内存而没有任何额外的分配。你当然不在乎，但你确实允许你的调用者负责优化内存处理。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-18T00:39:24.910

详细说明 C 中 NULL 终止符的使用：您不能分配“C 字符串”，您可以分配一个 char 数组并在其中存储一个字符串，但 malloc 和 free 只是将其视为请求长度的数组。

AC 字符串不是数据类型，而是使用 char 数组的约定，其中空字符 '\0' 被视为字符串终止符。这是一种传递字符串的方法，而无需将长度值作为单独的参数传递。其他一些编程语言具有显式的字符串类型，可以将长度与字符数据一起存储，以允许在单个参数中传递字符串。

将其参数记录为“C 字符串”的函数会传递 char 数组，但如果没有空终止符，则无法知道该数组有多大，因此如果不存在，事情就会变得非常糟糕。

您会注意到期望 char 数组不一定被视为字符串的函数将始终需要传递缓冲区长度参数。例如，如果要处理零字节为有效值的字符数据，则不能使用 '\0' 作为终止符。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-18T03:29:21.780

你可以做一些 MS Windows API 所做的事情，你（调用者）传递一个指针和你分配的内存大小。如果大小不够，系统会告诉您要分配多少字节。如果足够，则使用内存，结果是使用的字节数。

因此，关于如何有效使用内存的决定留给了调用者。他们可以分配一个固定的 255 字节（在 Windows 中使用路径时很常见）并使用函数调用的结果来了解是否需要更多字节（由于 MAX_PATH 为 255 而没有绕过 Win32 API 的路径不是这种情况）或者大多数字节数可以忽略...调用者也可以传递零作为内存大小，并被告知确切需要分配多少 - 在处理方面效率不高，但在空间方面可能更有效。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-04-23T01:53:16.727

您当然可以预先分配到上限，并使用全部或更少。只要确保您实际使用全部或更少。

两次通过也很好。

你问了关于权衡的正确问题。

你如何决定？

最初使用两遍，因为：

```
1\. you'll know you aren't wasting memory.
2\. you're going to profile to find out where
   you need to optimize for speed anyway.
3\. upperbounds are hard to get right before
   you've written and tested and modified and
   used and updated the code in response to new
   requirements for a while.
4\. simplest thing that could possibly work. 
```

您也可以稍微收紧代码。越短通常越好。代码利用已知事实的次数越多，我就越觉得它按照它所说的去做。

```
char* copyWithoutDuplicateChains(const char* str)
    {
    if (str == NULL) return NULL;

    const char* s = str;
    char prev = *s;               // [prev][s+1]...
    unsigned int outlen = 1;      // first character counted

    // Determine length necessary by mimicking processing

    while (*s)
        { while (*++s == prev);  // skip duplicates
          ++outlen;              // new character encountered
          prev = *s;             // restart chain
        }

    // Construct output

    char* outstr = (char*)malloc(outlen);
    s = str;
    *outstr++ = *s;               // first character copied
    while (*s)
        { while (*++s == prev);   // skip duplicates
          *outstr++ = *s;         // copy new character
        }

    // done

    return outstr;
    } 
```

# css - CSS 列高和文本区域

> ID：10170816
> 
> 赞同：0
> 
> 时间：2012-04-16T08:25:32.960
> 
> 标签：css

我有带有页眉和页脚的两列布局。[我创建了一个 JSFilddle 来演示这个](http://jsfiddle.net/NjpMj/)。

左栏通常比右栏有更多的内容。

1.  如何让右列扩展到左列的高度，或者只是填充视口的高度？我有一些类似的例子，但不是总是在显示底部的页脚。

2.  我怎样才能让 textarea 填充其父级的高度，右列（我什至还没有接近解决这个问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:38:29.317

[我刚刚编辑了你的 jsfiddle。](http://jsfiddle.net/NjpMj/15/)

1.  这个想法是在右列块上设置一个最小高度，并让它确定整个内容部分的高度，而不是从其父级继承高度属性。

2.  其次，关于文本区域。这一点很棘手，您需要在每次用户**调整**其视口大小时使用 javascript 来呈现它，并相应地更新 textarea 的属性高度。

干杯

![在此处输入图像描述](../Images/03b4b3b1234e4b9ce43ab0929ff2ab95.png)

*   **minHeight**很重要，因为您有一个空的内容容器，并且您不希望页脚被推到页眉的正下方。因此 minheight 可以防止这种情况发生。一旦右列的高度超过 minHeight，父 div 就会相应地展开。

*   **如果您真的希望它始终扩展整个窗口，我认为h**作为视口的高度没有任何问题。但是我建议使用 $(window).innerHeight 而不是 Height()。但同样，这是 javascript，您的代码永远不会在不同的浏览器上呈现相同的内容，所以请记住这一点 :)

    $(window).resize(function() { var h = $(window).height(); $('#MyTextarea').css('height', h-300); });

# silverlight - 我可以更改 Silverlight 中验证错误的默认样式吗？

> ID：10170819
> 
> 赞同：0
> 
> 时间：2012-04-16T08:25:37.850
> 
> 标签：silverlight

我想更改验证错误的红色边框颜色和工具提示消息的背景颜色，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:26:31.910

您需要创建自己的控件模板，定义您想要的样式，然后将其绑定到控件，如下所示，

```
<TextBox Validation.ErrorTemplate="{StaticResource errorTemplateStyle}" 
```

要了解如何创建控件模板来自定义控件的视觉结构，[请查看此链接](http://www.silverlight.net/learn/creating-ui/styles-and-templates/customizing-the-appearance-of-a-control-with-a-control-template)

希望这可以帮助..

# windows - 让 git bash 在当前存储库中启动

> ID：10170825
> 
> 赞同：5
> 
> 时间：2012-04-16T08:26:16.557
> 
> 标签：windows, git, git-extensions, git-bash

有没有办法让 Git Extension 在当前存储库中打开 Git Bash？我总是需要从主目录 cd。我在 Win7 下运行 Git Extension。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T09:31:02.167

您可以右键单击 Git Bash 快捷方式，单击属性并将“开始于”更改为存储库的路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-12T16:30:26.563

使用 Git 2.5.2 版，您现在只需 CRTL + 右键单击​​并从子菜单中选择“Git Bash Here”。

这将打开当前存储库中的 bash 窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:28:10.150

如果您使用的是 msysgit，则应该有一个与资源管理器集成的选项。然后，您可以右键单击一个文件夹并选择在此处打开 git bash。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T08:29:21.550

GitExtensions 的工具栏有一个按钮，可以在当前存储库中启动控制台 MsysGit。也可以从`Git`菜单或 Ctrl-G 快捷方式访问它。

# ios5 - 如何识别目标控制器中的 segue 入口点？

> ID：10170828
> 
> 赞同：0
> 
> 时间：2012-04-16T08:26:21.300
> 
> 标签：ios5, storyboard, segue

有没有办法在目标视图控制器中识别用于导航的 segue 标识符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:05:27.693

那么在这种情况下，在 viewController 中，您来自覆盖 prepareForSegue: 并将一些数据传递给目标 viewController，这将允许它决定运行哪些特定代码。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"SegueIdentifier"]) {
        YourViewController *vc = segue.destinationViewController;
        vc.yourData = yourData;
    }
} 
```

目的地的 in viewDidLoad 检查 yourData 的值并执行您的自定义代码

# c - 链表添加节点更改所有节点值而不仅仅是一个

> ID：10170830
> 
> 赞同：0
> 
> 时间：2012-04-16T08:26:25.537
> 
> 标签：c, linked-list

好吧，我已经为此工作了几个小时，但无法弄清楚我的问题。我有一个双链表，当我尝试向其中添加一个新节点时，它会更改链表中的所有值。

现在这就是我所拥有的：

```
void createSub(sibs *root, char *name, int size) {
    if (root->subSibs == NULL) {
        root->subSibs = (sibs *)malloc(sizeof(sibs));
        root->subSibs->name = name;
        root->subSibs->time_stamp = createTimeStamp();
        root->subSibs->nextSib = NULL;
    }

    sibs *temp = root->subSibs;
    if (temp != NULL) {
        while(temp->nextSib != NULL)
            temp = temp->nextSib;
    }
    sibs *t = (sibs *)malloc(sizeof(sibs));

    t->name = name;
    t->time_stamp = createTimeStamp();
    t->nextSib = NULL;

    if(temp != NULL)
        temp->nextSib = t;

    printf("root->subSibs->name = %s\n", root->subSibs->name);
    (root->numSub)++;
} 
```

考虑到我已经更改了一百万次，这可能并不完美。有人可以告诉我我在这里做错了什么吗？

`root`是我正在使用的根节点，并且`subSibs`是指向链表的指针。我正在做的是将名称和时间戳添加到指向的链接列表中的每个节点`root->subSibs`。

我得到的是：

```
createSub(root, name1, size); 
```

印刷：

```
root->subSibs1: name1;

createSub(root, name2, size); 
```

印刷：

```
root->subSibs1: name2;
root->subSibs2: name2; 
```

ETC...

这可能是一些非常愚蠢的错误，但任何帮助都会令人惊叹。我已经尝试了几个小时，只需要有人告诉我为什么它会更改名称。

另外，如果我`strcpy(root->subSibsi->name, name); for i = 0-5; root->subSibs1->name`打印垃圾然后`root->subSibs2->name`打印正确的名称，然后`root->subSibs3->name`打印垃圾（与 相同`subSibs1->name`）等等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:31:43.030

> ```
> t->name = name; 
> ```

您正在复制指针。相反，您可能想要复制内存：

```
t->name = strdup(name); 
```

或者：

```
t->name = malloc(strlen(name) + 1);
strcpy(t->name, name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:33:05.403

如果没有更多信息（比如你如何调用函数），我猜你有一个缓冲区（可能是一个 char 数组），并且每次调用`createSubs`. 这将使您创建的每个节点都指向同一个缓冲区，该缓冲区将始终包含最后输入的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:39:23.577

在您的节点中，**名称为 char ***。换句话说，它可以指向某个任意内存位置。首先它有一些垃圾值，所以从程序员的角度来看它什么都没有，不能用来存储价值——这就是你所做的。

现在，如果我们分配一部分内存，大到足以存储参数**char *name**指向的字符串，我们可以让您的节点名称指向它。完成后，您可以将参数**名称 ***复制到节点**名称 ***

# php - 关于 Cookie 问题的 PHP 重定向

> ID：10170834
> 
> 赞同：0
> 
> 时间：2012-04-16T08:26:34.683
> 
> 标签：php, wordpress, redirect

嗨，我希望我的所有新/第一个用户到我的网站都被重定向到不同的页面。

它是一个 wordpress 页面，在 index.php 文件中，我在顶部有这段代码

```
<?php
if ($_COOKIE['iwashere'] != "yes") { 
setcookie("iwashere", "yes", time()+20000);  
header("Location: http://howtobuygoldoffshore.com/sitemap"); 
exit;
}
?> 
```

现在的问题是，当我从浏览器清除所有缓存和 cookie 并访问此页面时，它只会转到 howtobuygoldoffshore.com，而不是转到 howtobuygoldoffshore.com/sitemap。

但是现在，如果我通过 www.howtobuygoldoffshore.com 访问它，那么它会转到正确的登录页面。（我想 www. 会有所不同）

可能是什么问题？我在 index.php 文件中编写和插入的代码是否正确，或者 re 方向是否存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:28:51.213

您的 cookie 并不适用于您网站上的所有子域。

[setcookie](http://php.net/manual/en/function.setcookie.php) ( 字符串 $name [, string $value [, int $expire = 0 [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]]]] )

请参阅参数 $domain。尝试将您的 cookie 保存为 $domain = `howtobuygoldoffshore.com`：

```
setcookie("iwashere", "yes", time()+20000, '/', 'howtobuygoldoffshore.com'); 
```

这将使您的 cookie 同时适用于`http://howtobuygoldoffshore.com`和`http://www.howtobuygoldoffshore.com`。

# html - 尊重相对元素内绝对元素的高度

> ID：10170835
> 
> 赞同：3
> 
> 时间：2012-04-16T08:26:43.373
> 
> 标签：html, css, css-position

相对定位元素的高度是否可以调整到其子元素的高度？

* * *

### [见示范](http://jsfiddle.net/XTVbu/)

* * *

## HTML：

```
Items:
<div id="love">
    <textarea id="magic"></textarea>       
</div>
Dung:​​ 
```

## CSS：

```
#love{
    position:relative;
    background:#eee;
    width:60px;
}
#magic{
    position:absolute;
    width:20px;
} 
```

## 输出：

![粪弹！](../Images/f0ed2da9eb1e77242c8764700e16a7ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:22:31.000

当你指定绝对定位时，你必须给它坐标

```
#magic{
    position:absolute;
    width:20px;   
} 
```

您将 x pos 和 y pos 指定为 0 和 0 外部标签根据内部标签调整 //除非您为外部标签指定宽度或高度

```
#magic{
    position:absolute; 
    left:0; // x pos
    top:0; // y pos
    width:20px;
} 
```

# javascript - 通过 JavaScript 更改 marginTop-property 会导致 FireFox 中的错误结果

> ID：10170839
> 
> 赞同：2
> 
> 时间：2012-04-16T08:27:02.907
> 
> 标签：javascript, html, css, firefox

**我的问题：** 通过 JavaScript 更改 margin-top 属性`objectName.style.marginTop = value;`在 Chrome 和 Safari 中效果很好，但是在 Firefox 中，定位似乎全错了。Firefox 没有将元素放置在视口上，然后将其降低到略低于所需位置，然后将其向上移动一点，而是将其放置在最终位置的下方，上下移动，几乎反映了所需的动画。

如果我切换Javascript并在CSS中输入值，定位就可以了，所以我猜错误在于.js。

**背景：** 我正在尝试通过 JavaScript 创建一个简单的动画徽标。我希望它从浏览器视口外部下降到它的位置。徽标是 HTML 元素 `<img id="site_logo" src="logo.png" />`

**下面是 JavaScript 代码：**

```
var logoValue = -400;

function onLoad(){  
    // ...
    logoStarter();
}

function logoStarter(){ //sets the logo in its starting position outside the viewport   
    var site_logo = document.getElementById("site_logo");
    site_logo.style.marginTop = logoValue +"px"; 
    logoAnimationDown();
}

function logoAnimationDown(){       // moves the logo down until it is somewhat underneath its final position 
    if(logoValue <= 20){    
        console.log(logoValue);
        logoValue += 17;

        var site_logo = document.getElementById("site_logo");           
        site_logo.style.marginTop = logoValue +"px";            

        setTimeout('logoAnimationDown()', 30);
        }
    else{
        setTimeout('logoAnimationUp()', 30);
        }
}   

function logoAnimationUp(){   // moves the logo up to its final position
    if(logoValue > 0){  
        console.log(logoValue);
        logoValue -= 10;

        var site_logo = document.getElementById("site_logo");           
        site_logo.style.marginTop = logoValue + "px";

        setTimeout('logoAnimationUp()', 30);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:40:54.880

似乎 FF 执行了两次该过程。像这样声明你`setTimeout`的 s：

```
setTimeout(logoAnimationDown, 30);
setTimeout(logoAnimationUp, 30); 
```

如果您使用这种带引号的字符串`setTimeout('doFunction()',30)`来分配目标函数，FF 会这样做：`eval('doFunction()')`，并立即执行该函数（因为“（）”），然后在延迟时间后再次执行。

# ruby - 将列表元素放入数组 - Cucumber/Ruby

> ID：10170840
> 
> 赞同：0
> 
> 时间：2012-04-16T08:27:16.493
> 
> 标签：ruby, cucumber

我正在尝试使用 Cucumber 和 Ruby 测试网页上的列表。

列表更改（取决于用户输入）基本上，我想将所有项目抓取到一个数组中 - 然后我想确保列表按字母顺序排列。任何人的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:35:07.883

使用 capybara 的`all`方法在页面上查找元素：

```
elements_array = page.all(:css, 'li') 
```

请参阅[相应的 API 文档](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders%3aall)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:53:25.403

假设您使用 Capybara 和 CSS 选择器，这将为您提供一个包含列表中每个元素的文本的数组：

```
list_items = page.all('li').collect(&:text) 
```

如果您使用的是 RSpec，您可以确认它们是按以下方式排序的：

```
list_items.sort.should == list_items 
```

（您可能会编写一个 be_sorted RSpec 匹配器以使其更清晰）。

# jakarta-ee - 来自 Java 应用程序的 QlikView 服务器上的 HTTP 身份验证

> ID：10170841
> 
> 赞同：2
> 
> 时间：2012-04-16T08:27:25.503
> 
> 标签：jakarta-ee, struts2, qlikview

你好，
我正在开发一个基于 Java struts2 的应用程序，它使用 QlikView 作为报告工具。此应用程序使用 NTLM 单点登录机制。当用户登录应用程序并单击报告选项卡时，他/她应该会看到 QlikView 报告。

几个要点：
1\. 我们有一个通用用户 ID，需要在 QlikView 服务器上进行身份验证。
因此，在 SSO 应用程序中，我们必须通过更改http 请求中的用户详细信息来模拟用户。

2\. 当我在 JSP 页面中使用 iFrame 时，它​​会给我一个弹出窗口来输入用户凭据以查看 QlikView 报告。我怎样才能摆脱它并让用户通过更多登录直接查看报告。

注意：使用该应用程序的用户不会请求报告，而是
会请求一个通用 ID。我们需要在 http
请求中模拟用户并进行自动登录。

如果您需要更多说明，请告诉我。对此的任何帮助将不胜感激。

# plone - 如何在模板中呈现原型？

> ID：10170842
> 
> 赞同：1
> 
> 时间：2012-04-16T08:27:31.107
> 
> 标签：plone, archetypes

我想在自定义模板中呈现 Plone Archetypes 列表。

在我的示例中，我在目录中搜索“PortletPage”类型并获得 3 个项目。然后我迭代这些项目，我想显示它们。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T03:05:42.040

我建议查看 Plone 的 TAL 模板语言以及 portal_catalog 工具的文档。

这是一个基于您所描述问题的快速示例：

```
<div tal:define="catalog context/portal_catalog;
                 results python:catalog.searchResults(portal_type='PortletPage');">

  <div tal:repeat="item results">
    <h3 tal:content="item/pretty_title_or_id" />
    <p tal:content="item/Description" />
  </div>

</div> 
```

# powershell - Powershell：Win32_BIOS 序列号有效性

> ID：10170846
> 
> 赞同：0
> 
> 时间：2012-04-16T08:27:44.020
> 
> 标签：powershell, directory, bios

在我正在制作的系统中，我将每台计算机的文件保存到一个目录中，该目录具有我从这段代码中收集的序列号的名称：

```
$serialnr = gwmi -computer $compname Win32_BIOS | ForEach {$_.SerialNumber} 
```

当我在我的计算机上运行此代码时，我得到了序列号，但是当在朋友的计算机上运行相同的代码时，输​​出显示为：“FFFFFFF”（我不确定 F 的数量）。

我希望“FFFFFFF”就像一个标准输出，如果我无法获得真正的序列号，那么我至少可以将它用作另一个命令的参数来进行“修复”。

问：有人知道有关此命令可能输出的信息或可能的修复吗？

所有的想法和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:33:21.790

我不明白你的 ForEach 的目的。我错过了什么吗？

```
$serialnr = gwmi win32_bios | select -Expand serialnumber | out-string 
```

会给你序列号。

# wpf - 如何在 WPF 的 mediaElement 控件中查看播放、暂停、停止和音量按钮以及视频？

> ID：10170855
> 
> 赞同：1
> 
> 时间：2012-04-16T08:28:27.867
> 
> 标签：wpf, visual-studio-2010, c#-4.0, wpf-controls

我将媒体元素控件添加到我的 WPF 应用程序。我想播放视频文件或音频文件。我使用代码手动播放文件。但是如果文件是视频，控件上有停止，播放，暂停，音量和视频等按钮吗？我想为媒体元素设计一个用户界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:58:16.423

您需要编写代码才能拥有这些按钮

这个[链接](http://msdn.microsoft.com/en-us/library/ms748248.aspx)可以帮助你

# express - 我可以重复使用 express.js 错误视图吗？

> ID：10170857
> 
> 赞同：1
> 
> 时间：2012-04-16T08:28:48.020
> 
> 标签：express

当 express 找不到视图时，它会出错并且（在调试模式下）呈现一个漂亮的页面。有没有一种方便的方法可以将该视图重新用于我自己的错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:38:06.637

我不知道如何重用视图，但您可以使用 error.stack 来呈现堆栈跟踪。

我有这样的事情：

```
app.all( '*', function(req, res){
  var code = 404;
  res.local('error', { type: 'http', code: code });
  res.local('code', code );
  res.render('errors/index', { status: code } );
});

app.error(function(err, req, res, next){

  var code;

  if( err.type === 'http' ){
    code = err.error;
  } 
  else {
    code = 500;
  };

  if(err){
    res.local('stack', err.stack || JSON.stringify(err, null, 2) );
  };

  res.local('code', code );
  res.render('errors/index', { status: code } );

}); 
```

如果我需要像 404 一样手动设置，我会在我的视图中执行以下操作：

```
next( {type:'http', error: 404} ); 
```

这就是我的观点中进行类型检查的地方。

# javascript - Backbone.js：固定侧面板的结构化应用程序

> ID：10170859
> 
> 赞同：0
> 
> 时间：2012-04-16T08:28:54.543
> 
> 标签：javascript, backbone.js

我有一个应用程序，它有一个中间面板，它总是根据用户正在查看的应用程序的哪个部分而变化。这些可能是消息、交易等。

然后在中间面板周围的应用程序的 4 个角有 4 个“固定”面板，这些面板在应用程序的生命周期内大部分是固定的，但包含动态更新的数据，因此需要使用骨干网实现

如何在backbone.js 中构建这样的应用程序。似乎违反了“不重复”规则来实现路由器中每条路由内所有侧面板的初始渲染，因为我最终会在每条路由中重复相同的渲染代码。

在这种情况下，我如何构造我的代码，以免在多个地方重复代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:30:50.887

JavaScript 就像任何其他代码一样：如果您发现自己编写了相同的代码行，请将它们提取到一个函数中。如果您发现自己需要使用相同的函数，请将其（以及相关的函数和数据）提取到自己的对象中。

所以，你的路由器不应该直接调用你的视图和模型。相反，它应该委托给可以操纵您的视图和对象的其他对象。

此外，由于每次应用程序启动时您都将设置相同的基本页面布局，您可能不希望在路由器中使用该代码。无论路由器是否触发，无论触发哪个路由，布局都会发生。有时将布局代码放在另一个对象中也更容易，并且在路由器启动之前将布局放置到位。

```
 MyApplication = {
  layout: function(){
    var v1 = new View1();
    v1.render();
    $("something").html(v1.el);

    var v2 = new View2();
    v2.render();
    $("#another").html(v2.el);
  },

  doSomething: function(value){
    // do someething with the value
    // render another view, here
    var v3 = new View3();
    v3.render();
    $("#whatever").html(v3.el);
  }
}

MyRouter = Backbone.Router.extend({
  routes: {
    "some/route/:value": "someRoute"
  },

  someRoute: function(value){
    MyApplication.doSomething(value);
  }
});

// start it up
MyApplication.layout();

new MyRouter();

Backbone.history.start(); 
```

我写了一些与这些事情相关的文章，您可能会觉得这些文章很有用：

[http://lostechies.com/derickbailey/2012/02/06/3-stages-of-a-backbone-applications-startup/](http://lostechies.com/derickbailey/2012/02/06/3-stages-of-a-backbone-applications-startup/)

[http://lostechies.com/derickbailey/2011/08/30/dont-limit-your-backbone-apps-to-backbone-constructs/](http://lostechies.com/derickbailey/2011/08/30/dont-limit-your-backbone-apps-to-backbone-constructs/)

[http://lostechies.com/derickbailey/2011/12/27/the-responsibility-of-the-various-pieces-of-backbone-js/](http://lostechies.com/derickbailey/2011/12/27/the-responsibilities-of-the-various-pieces-of-backbone-js/)

[http://lostechies.com/derickbailey/2012/03/22/managing-layouts-and-nested-views-with-backbone-marionette/](http://lostechies.com/derickbailey/2012/03/22/managing-layouts-and-nested-views-with-backbone-marionette/)

# ssl - Winsock的SSL api？

> ID：10170861
> 
> 赞同：2
> 
> 时间：2012-04-16T08:29:03.847
> 
> 标签：ssl, winsock

我有 Windows C++ 项目。需要在现有的 winsock 代码之上实现 ssl 客户端和服务器。

我尝试使用openssl，但它似乎太乱了。我认为有比openssl更好/更短/更清洁/更快的实现方式。我感谢任何建议..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:01:45.587

您可以使用 Windows 内置的 SSL 东西—— SChannel 。在 Google 中搜索“SChannel SSL”会为您提供大量信息（尽管 SChannel 本身的文档记录很差且不易理解）。

另一方面，一旦你研究了一些使用 OpenSSL 的项目的源代码，OpenSSL 就不会乱七八糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:25:58.227

确实.. 在使用 openssl hacking 一段时间后，我不会说它那么混乱 :) 以防任何人随时需要将 ssl 添加到现有的 winsock 代码中：

现有的winsock代码是这样的：

```
 0: sockett.Listen etc....
    1: sockett.Accept(client, .....
    2: recv(client , ...)
    3: send(client , .....) 
```

简而言之，如果你想在这里实现 SSL.. 删除第 2 行和第 3 行 :) 并添加：

```
SSL_library_init();
SSL_load_error_strings();
OpenSSL_add_all_algorithms();
SSL_CTX *tlsctx;
SSL *ssl;
tlsctx = SSL_CTX_new( SSLv23_method());
// search google : generate self signed certificate openssl
SSL_CTX_use_certificate_file(tlsctx, "ssl\\server1.crt" , SSL_FILETYPE_PEM);
SSL_CTX_use_PrivateKey_file(tlsctx, "ssl\\server1.key", SSL_FILETYPE_PEM);
ssl = SSL_new(tlsctx);
SSL_set_fd(ssl, client);
SSL_accept(ssl);

/* instaed recv SSL_read(ssl, ....*/
/* instaed send SSL_write(ssl, ....*/

/* not 100% sure Sleep and shutdown/free/close are entirely correct here but in my code works fine */
Sleep(3000);
SSL_shutdown(ssl);   
SSL_free(ssl);
SSL_CTX_free(tlsctx);
shutdown(client, SD_BOTH);
Sleep(10);
closesocket(client); 
```

测试：在命令行运行：

```
openssl s_client -host localhost -port <PORT> 
```

# iphone - 使创建的（以编程方式）viewController Rotate

> ID：10170862
> 
> 赞同：0
> 
> 时间：2012-04-16T08:29:06.303
> 
> 标签：iphone, viewcontroller

我以编程方式制作了一个 viewController，我想在设备旋转时强制它旋转。在简单的 viewController 中，您通过添加一个新文件使用常规方式创建，因此有一个“shouldAutoRotate”方法.. 但在我的情况下，它是不同的，特别是我在 viewController 中创建这个 viewController！

而且我不想创建一个新的 viewController。

这是我用来创建视图控制器的代码

```
UIViewController *featuresViewController = [[UIViewController alloc]initWithNibName:@"featrures" bundle:nil];
[featuresViewController setView:[[UIView alloc]initWithFrame:CGRectMake(10, 10, 380, 450 )]];
[featuresViewController.view setBackgroundColor:[UIColor clearColor]];

featuresViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl;      

featuresViewController.modalPresentationStyle = UIModalPresentationPageSheet;
[self presentModalViewController:featuresViewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:41:54.520

在您的应用程序中添加以下代码...

//在@implementation之前添加以下行

```
@interface UIDevice (UndocumentedFeatures) 
 -(void)setOrientation:(UIInterfaceOrientation)orientation animated:(BOOL)animated;
-(void)setOrientation:(UIInterfaceOrientation)orientation;
@end

//here you can use following code in any method..i just used here in sample method... 
-(IBAction)rotateviewprogramatically
{
   **//you can also add this in Viewdidload or Viewwillappear...it will work...**

   [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];
   //or
   [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];
 } 
```

**//更改以下代码....**在您的代码中添加以下方法...我检查了它是否正常工作...

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

return (interfaceOrientation == UIInterfaceOrientationPortrait);// don't use this
return YES; // use this...

} 
```

希望，它会帮助你......冷静

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:49:54.840

更容易将此添加为另一个答案...

可能不是执行此操作的最佳位置，但如果您正在为如何编写 FeaturesViewController 代码而苦苦挣扎，它将是这样的 -

。H -

```
#import <UIKit/UIKit.h>

@interface FeaturesViewController : UIViewController {
    // ivar declarations...
}

@end 
```

.m -

```
#import "FeaturesViewController.h"

@implementation FeaturesViewController

-(id)init {

    self = [super initWithNibName:@"FeaturesViewController" bundle:nil];

    if (self) {
        // other init stuff
    }

    return self;

}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // return YES for whatever orientations you want
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

然后在你的主 VC 中，像这样呈现它 -

```
FeaturesViewController *featuresViewController = [[[FeaturesViewController alloc] init] autorelease];

featuresViewController.modalTransitionStyle=UIModalTransitionStylePartialCurl;      
featuresViewController.modalPresentationStyle=UIModalPresentationPageSheet;

[self presentViewController:featuresViewController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:59:06.283

当你说你在 viewController 中创建 viewController 时，我不明白你的意思——我认为你在哪里创建它是无关紧要的。您以编程方式创建它也无关紧要，因为您仍然必须编写代码......

在您的 VC 代码中，只需实现正常的 shouldAutorotateToInterfaceOrientation: 方法（此示例允许横向中的任何一种） -

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

# android - 谷歌地图有商业许可证吗？

> ID：10170863
> 
> 赞同：3
> 
> 时间：2012-04-16T08:29:19.583
> 
> 标签：android, google-maps, licensing

我想在 Android 的谷歌地图上使用离线缓存。条款和条件规定我不能作为开发人员使用此功能，但是否有允许我使用它的商业选项 - 如果有，我将如何获得许可证？

我将开发一个商业应用程序

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:33:46.953

看看[条款和服务](https://developers.google.com/maps/terms)，也许还有[常见问题解答](https://developers.google.com/maps/faq)。你应该可以在那里找到一些东西。最后，看看这个[网站](http://www.google.com/enterprise/earthmaps/maps_features.html)，付费/免费的区别非常明显:)

# c# - 如何使用 LINQ 将查询结果返回到字典

> ID：10170875
> 
> 赞同：1
> 
> 时间：2012-04-16T08:30:02.253
> 
> 标签：c#, asp.net-mvc, linq

我正在做一个 MVC 项目。我需要返回一个对象，该对象将菜单项分组为四个一组，以使用 foreach 迭代在视图中显示。由于这是一个传递给视图的模型，我需要返回一个可以绑定在 .cshtml 上的非泛型集合类。

我的想法是我可以根据 LINQ 中的某种类型的计数对列表进行分组，以向每个 Dictionary 键添加四个新的列表项。但是，我还没有找到一个足以满足字典的表达式。我可以通过创建另一种方法并再次遍历集合以根据计数分配键来相当容易地解决这个问题，但这似乎是不必要的迭代和不好的做法。

目前，我正在使用以下查询。

```
 var itemsDict = rssDataContext.rss_Application_Blog_Category_Relationships
            .Where(x => x.Application_Blog.rss_Application.ID == 1)
            .Where(x => x.Blog_Category_ID == 1)
            .Select(x => new MenuItem
            {
            Name = x.rss_Application_Blog.Blog_Title,
            Uri = x.rss_Application_Blog.Blog_Uri,
            ID = x.rss_Application_Blog.ID
            }); 
```

但是有没有办法将此查询分组为 4 个类，然后填充到 Dictionary<int, List<MenuItem>> 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:40:51.627

我怀疑你可以这样做：

```
var itemsDict = rssDataContext.rss_Application_Blog_Category_Relationships
    .Where(x => x.Application_Blog.rss_Application.ID == 1)
    .Where(x => x.Blog_Category_ID == 1)
    .Select(x => new { 
        x.rss_Application_Blog.BlogTitle,
        x.rss_Application_Blog.BlogUri,
        x.rss_Application_Blog.ID
    })
    .AsEnumerable() // Do the rest of the query in-process
    .Select((value, index) => new { value, index })
    .ToLookup(pair => pair.index % 4,
              pair => new MenuItem {
                 Name = pair.value.Blog_Title,
                 Uri = pair.value.Blog_Uri,
                 ID = pair.value.ID
              }); 
```

请注意，这会返回 a`Lookup`而不是 a `Dictionary`，但这实际上是您想要的更接近的模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:04:21.997

@JonSkeet 的解决方案非常好。[这是使用GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)创建子列表和[ToDictionary](http://msdn.microsoft.com/en-us/library/bb549277.aspx)将它们投影到最终结果中的替代实现：

```
var itemsDict = rssDataContext.rss_Application_Blog_Category_Relationships
    .Where(x => x.Application_Blog.rss_Application.ID == 1)
    .Where(x => x.Blog_Category_ID == 1)
    .ToArray()
    .Select((x, index) => new
        {
            Index = index,
            Item = new MenuItem
            {
                Name = x.rss_Application_Blog.Blog_Title,
                Uri = x.rss_Application_Blog.Blog_Uri,
                ID = x.rss_Application_Blog.ID
            }
        });
    .GroupBy(i => i.Index / 4)
    .ToDictionary(g => g.Key); 
```

生成的序列将如下所示：

```
items = new Dictionary<int, IGrouping<int>>()
{
    0, new[]
    {
        new { Index = 0, Item = new MenuItem { ... } },
        new { Index = 1, Item = new MenuItem { ... } }
    }
    1, new[]
    {
        new { Index = 2, Item = new MenuItem { ... } },
        new { Index = 3, Item = new MenuItem { ... } }
    }
}; 
```

# php - 当我重定向到同一个脚本时，为什么我的会话变量会自动取消设置？

> ID：10170880
> 
> 赞同：0
> 
> 时间：2012-04-16T08:30:28.537
> 
> 标签：php

我在 testmysql.php 中设置了一个名为 foo 的会话变量，然后我再次将脚本重定向到它们相同的脚本，在那里我打印会话 var，然后取消设置它。但是，当我重定向时，会话 var 似乎已经取消设置。 .为什么会这样，我该如何解决？

```
<?php 

session_start();

if(empty($_GET)) {
    $_SESSION['foo'] = 'bar';
    header("location:testmysql.php?redirect". '=' . 'bar');
}

var_dump( $_SESSION);
unset ($_SESSION['foo']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:44:19.877

设置重定向时不会中止脚本，因此`unset ($_SESSION['foo'])`始终会执行：

```
<?php 

session_start();

if(empty($_GET)) {
    $_SESSION['foo'] = 'bar';
    header("location:testmysql.php?redirect". '=' . 'bar');
    exit; // <--- Missing
}

var_dump( $_SESSION);
unset ($_SESSION['foo']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:34:21.073

替换`if`为`if else`

```
if(empty($_GET)) {
    $_SESSION['foo'] = 'bar';
    header("location:testmysql.php?redirect". '=' . 'bar');
}
else
{
    var_dump( $_SESSION);
    unset ($_SESSION['foo']);
} 
```

# c# - Dapper 简单映射

> ID：10170882
> 
> 赞同：5
> 
> 时间：2012-04-16T08:30:37.047
> 
> 标签：c#, sql-server, orm, dapper

桌子：

```
create table Documents 
   (Id int, 
    SomeText varchar(100), 
    CustomerId int, 
    CustomerName varchar(100)
   )

insert into Documents (Id, SomeText, CustomerId, CustomerName) 
   select 1, '1', 1, 'Name1' 
     union all
   select 2, '2', 2, 'Name2' 
```

课程：

```
public class Document
{
    public int Id { get; set; }
    public string SomeText { get; set; }
    public Customer { get; set; }
}

public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我怎样才能用 Dapper得到`Documents`他们的所有东西？`Customers`这给了我所有的文件，但客户是空的（当然）：

```
connection.Query<Document>("select Id, SomeText, CustomerId, CustomerName from Documents")... 
```

编辑 - 类似但更高级的映射问题：[Dapper intermediate mapping](https://stackoverflow.com/questions/10223620/dapper-intermediate-mapping)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T08:39:08.697

取自[dapper 项目页面](http://code.google.com/p/dapper-dot-net/)的示例（请参阅 Multi Mapping 部分）：

```
var sql = 
@"select * from #Posts p 
left join #Users u on u.Id = p.OwnerId 
Order by p.Id";

var data = connection.Query<Post, User, Post>(sql, (post, user) => { post.Owner = user; return post;});
var post = data.First();

post.Content.IsEqualTo("Sams Post1");
post.Id.IsEqualTo(1);
post.Owner.Name.IsEqualTo("Sam");
post.Owner.Id.IsEqualTo(99); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T08:45:12.843

```
var docs = connection.Query<Document, Customer, Document>(
    "select Id, SomeText, CustomerId as [Id], CustomerName as [Name] from Documents",
    (doc, cust) => { doc.Customer = cust; return doc; }).ToList(); 
```

# ruby-on-rails - Gmaps4Rails 中的多边形信息窗口

> ID：10170883
> 
> 赞同：2
> 
> 时间：2012-04-16T08:30:42.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps-api-3, gmaps4rails

我正在使用 gmap4rails 绘制一堆相当复杂的多边形，作为区域边界。我有两件事需要帮助：

首先，我想将点击时的信息窗口与这些多边形相关联。这是我的用例的一个例子：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-arrays](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-arrays)

我尝试在 gmap 的回调中注册一个 click 事件处理程序，但它不起作用，我认为这不是正确的方法。

```
Gmaps.map.callback = function() 
{
        console.log("'sup");
        var infowindow = new google.maps.InfoWindow
        ({
            content: 'you clicked me!',
            suppressMapPan:true
        });
        google.maps.event.addListener(Gmaps.map.polygons[0], 'click', function() 
        {
            console.log("the click event fired");
            infowindow.open(map, Gmaps.map.polygons[0]);
        });

} 
```

其次，我希望能够通过 jquery 在某些用户事件上更改这些多边形的填充颜色（例如，用户单击复选框）。我将如何使用宝石来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:51:27.560

将您的方法替换为：

```
Gmaps.map.callback = function() 
{
    console.log("'sup");
    Gmaps.map.polygons[0].infowindow = new google.maps.InfoWindow
    ({
        content: 'you clicked me!'
    });

    google.maps.event.addListener(Gmaps.map.polygons[0].serviceObject, 'click', function(event) 
    {
        console.log("the click event fired");
        infowindow = Gmaps.map.polygons[0].infowindow;
        infowindow.setPosition(event.latLng);
        infowindow.open(Gmaps.map.map);
    });

} 
```

并将[此 gem 的 js 行](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee#L219)更改为 true 而不是 false。我确实设置为 false，因为我不喜欢光标更改。无论如何，它应该在配置选项中。请在 github 上创建一个问题，以便我记得修复它。

# android - 如何仅读取最后一行的 logcat？

> ID：10170884
> 
> 赞同：2
> 
> 时间：2012-04-16T08:30:42.457
> 
> 标签：android, shell, stdout, logcat

我看到有人抱怨 Logcat 只输出最后一行。我想问一个保留的问题，我怎样才能产生这个只输出最后一行的条件？

这就是我通过启动线程来读取日志的方式。

```
public class ReadLog implements Runnable{
        private boolean running = true;

        public void stop(){
            running = false;
        }

        @Override
        public void run() {
            Process proc = null;
            try {
                //Runtime.getRuntime().exec("/system/bin/logcat -c");
                proc = Runtime.getRuntime().exec("/system/bin/logcat ");
              }catch(IOException e) {
                   e.printStackTrace();
            }
            if(proc != null){
                BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()));
                String line= null;
                try {
                    while((line=reader.readLine())!=null && running){
                        if(line.contains("specific word")){
                            doSomething();//do something base on log
                            running = false;
                        }
                    }
                }
                catch (IOException e) {
                    e.printStackTrace();
                }
                finally{
                    proc.destroy();
                }
            }
        }
    } 
```

我只想阅读最新的一行。问题是它会触发 doSomething() 即使“特定单词”不在最后一行，除非我添加`Runtime.getRuntime().exec("/system/bin/logcat -c");`该行以在开始运行之前清除日志。

确实，我可以再添加一个`while((line=reader.readLine())!=null && running){}`，让 BufferedReader 在开始运行之前转到最后一行，但这可能需要很长时间而且为时已晚。

我试过`Runtime.getRuntime().exec("/system/bin/logcat | tail -n 1");` 但没有`tail`不接受标准输入的运气。我要求任何可以快速输出标准输出最后一行的命令，就像`tail -n 1 FILE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:29:31.887

尝试`Runtime.getRuntime().exec("/system/bin/logcat -d | tail -n 1");`

根据 logcat 文档 -> -d ：“将日志转储到屏幕并退出。”

然后 readline 将返回最后一个新行。（我没有测试它）。

**编辑 ：**

实际上`| tail -n 1`对“exec”没有影响，但是使用“-d”你可以很容易地得到最后的日志行。

```
try {
    //Executes the command.
    Process process = Runtime.getRuntime().exec(
        "/system/bin/logcat -d");

    BufferedReader reader = new BufferedReader(
        new InputStreamReader(process
        .getInputStream()));

    String output;
    String lastLine = null;
    while ((output = reader.readLine()) != null) {
        lastLine = output;
    }
    reader.close();

    //Waits for the command to finish.
    process.waitFor();

    if(lastLine != null)
        System.out.println("Last log line : " + lastLine);
} catch (IOException e) {
    throw new RuntimeException(e);
} catch (InterruptedException e) {
    throw new RuntimeException(e);
} 
```

**不要忘记在清单中添加 READ_LOGS 权限**：

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

# wcf - 如何防止 WCF 代理跟随重定向？

> ID：10170886
> 
> 赞同：3
> 
> 时间：2012-04-16T08:30:43.923
> 
> 标签：wcf

我正在为我的 WCF 服务使用 basicHttpBinding，并且有一个消息检查器，可以在某些情况下将响应代码设置为 Redirect。我发现 WCF 代理（由 svcutil 生成）自动尝试遵循重定向。我该如何防止这种情况发生？

谢谢，普里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:49:21.287

您尝试通过重定向实现什么？您将在客户端使用一些消息拦截器来处理这种情况：http: [//msdn.microsoft.com/en-us/library/ms733786 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms733786(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:47:08.680

您可以从您的客户端应用程序中引用服务合同程序集吗？如果是这样，您可以摆脱生成的服务引用，只需在运行时使用 ChannelFactory 启动代理。

例如：

```
// Create service proxy on the fly
var factory = new ChannelFactory<IMyServiceContract>("NameOfMyClientEndpointInConfigFile");
var proxy = factory.CreateChannel();

// Create data contract
var requestDataContract = new MyRequestType();

// Call service operation.
MyResponseType responseDataContract = proxy.MyServiceOperation(requestDataContract); 
```

在上面的示例中，`IMyServiceContract`是您的服务合同，`MyRequestType`并且 `MyResponseType`是您的数据合同，您可以通过引用服务也引用的程序集（定义这些类型）来使用它。

# php - 动态创建具有未定义变量调用的函数

> ID：10170888
> 
> 赞同：1
> 
> 时间：2012-04-16T08:30:49.657
> 
> 标签：php, firebird, interbase

我正在使用数据库进行多次插入/更新，并且过程非常缓慢。

在尝试修复它的过程中，我发现`ibase_prepare`并且`ibase_execute`现在我正在开发一个函数来进行所有更新和插入。

问题在于要插入/更新的字段数量，它们是可变的，我不知道如何调用`ibase_execute($query, $field1, $field2,..., $fieldx);`

有时是 1，其他是 2，其他更多。

```
<?php
$dbh = ibase_connect($host, $username, $password);
$updates = array(1 => 'Eric',5 => 'Filip',7 => 'Larry');
$query = ibase_prepare($dbh, "UPDATE FOO SET BAR = ? WHERE BAZ = ?");
foreach ($updates as $baz => $bar) {
    ibase_execute($query, $bar, $baz);
}
?> 
```

有什么想法可以合作吗？是否可以在执行时定义函数？在流或类似的东西上？

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:36:13.923

[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)应该能够做你想做的事。只需将您的字段放入数组中：

```
$result = call_user_func_array("ibase_execute", array("field1"); //Just 1 field
$result = call_user_func_array("ibase_execute", array("field1", "field2", "field3")); //3 fields 
```

# php - 需要以 7 秒延迟写入文本文件作为视频字幕

> ID：10170891
> 
> 赞同：0
> 
> 时间：2012-04-16T08:30:59.373
> 
> 标签：php, queue, video-streaming, caption

我有视频作为实时流运行，编辑器可以随时添加字幕。此外，当在广播室中单击麦克风时，它们会移动摄像机，然后更新字幕。Flash 视频每 3 秒拉出一个文本文件作为新字幕。该视频平均需要 7 秒延迟才能到达网络用户，因此我需要编写一些 php 来将更新保存在某处，然后在 7 秒后将其写入文本文件。

我需要从需要保持套接字打开的 Java 恶魔更新。

我曾想过尝试队列或 cron 作业。Cron 不进行第二次更新，队列似乎意味着再次运行 java 恶魔，并且还没有找到方法或暂停。标题需要保留在文本文件中，并且不能进行 db 调用，但是可以通过任何简单的方式更改 api 以延迟更新。

所以通过api生成的Jason对象（只有1-5k）保持7秒，然后写入文本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:48:33.153

您应该研究长轮询和实时更新，然后执行某种循环，在指定时推送内容。

您可以使用 Pubnub 或 Pusher 之类的东西设置一个非常简单的 Web 服务。然后在您选择的服务器端执行某种循环，以正确的间隔推送内容，以确保数据存在。

请注意，您提到的设计到处都有竞争条件，因此在构建它时要考虑到这一点。

# forms - 我想添加参数以便我可以输出将指定输出

> ID：10170892
> 
> 赞同：0
> 
> 时间：2012-04-16T08:31:11.163
> 
> 标签：forms, oracle, plsql, oracle10g, oracleforms

当我运行报告时，我得到输出显示并生成 pdf 报告知道我想显示指定报告意味着我何时输入employee_id =101 而不是employee_id =101 应该显示并且应该生成pdf

```
DECLARE 
rept REPORT_OBJECT; 
v_rep VARCHAR2(100); 
rep_status varchar2(200); 
vc_runformat varchar2(200);
des_format ParamList; 
BEGIN 

--des_format :=create_parameter_list('input_params');

rept := find_report_object('EMPS'); 

SET_REPORT_OBJECT_PROPERTY(rept,REPORT_SERVER, 'repsrv'); 
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESTYPE,FILE); 
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESFORMAT,'PDF');
--SET_REPORT_OBJECT_PROPERTY(rept,REPORT_MODE,'BITMAP');
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_desname,:control.filnam||to_char(sysdate,'hhmiss')||'.pdf');

--web.show_document('/reports/rwservlet/getjobid' || substr(v_rep,length('repsrv')+2) || '?server=' || 'repsrv','_blank');

--Add_Parameter(rept,report_DESNAME,'PDF');

v_rep := RUN_REPORT_OBJECT(rept); 
rep_status:=REPORT_OBJECT_STATUS(v_rep); 
--copy_report_object_output(v_rep, 'D:\girish\form\myreport.pdf');
WHILE rep_status in ('RUNNING','OPENING_REPORT','ENQUEUED') 
LOOP 
rep_status := report_object_status(v_rep); 
END LOOP; 
IF rep_status='FINISHED' THEN 
message('REPORT WAS CORRECTLY RUN'); 
ELSE 
message('REPORT FAILED WITH STATUS: '||rep_status); 
END IF;
--destroy_parameter_list(des_format);
END; 
```

我是 Oracle 表单和报告的新手。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:48:57.817

通过此参数在报告过滤器报告查询中创建用户参数在您之前的代码中传递参数的值

# lotus-notes - XPage 插件在 Lotus Notes 中工作，但在 Notes 浏览器中不工作

> ID：10170898
> 
> 赞同：4
> 
> 时间：2012-04-16T08:31:46.293
> 
> 标签：lotus-notes, xpages

我创建了一个扩展库组件，但我的 XPages 扩展库正在我的本地 Notes 浏览器上运行。如果我在笔记本身中运行我的 XPage，它就可以正常工作。

当我在浏览器中运行它时，会抛出以下错误：

> 找不到应用程序 /Fo​​rLearnCopy.nsf 所需的库 com.example.blank.library。

这是什么意思，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:13:05.313

您必须像安装服务器插件一样安装插件。

看看这里： [在本地机器上运行 XPages 扩展库](https://stackoverflow.com/questions/10053959/running-xpages-extension-library-on-local-machine)

希望这有助于斯文

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:10:40.197

Ramakumar，检查扩展库的文档。它很好地展示了你必须做什么才能让插件在任何地方都能工作。有3个地方：

*   使用 Notes 客户端中的更新站点安装 - 在 Notes 客户端中工作。通常以 NotesData/workspace/applications 结尾
*   安装到 NotesData/domino/workspace/applications （在那里查找 plugins/features 文件夹） - 使其在本地浏览器预览中工作
*   在 Domino 服务器中（使用 updatesite.nsf 和[正确的参数](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_Extension_Library_Deployment)）

希望有帮助

# android - 避免虚拟键盘弹出

> ID：10170899
> 
> 赞同：0
> 
> 时间：2012-04-16T08:31:54.380
> 
> 标签：android, android-edittext

我创建了一个 EditText，我想在长按 EditText 时避免虚拟键盘小狗。但仍然可以选择文本中的单词。

我想要一个看起来像 textView（已经完成）的 EditText，并且可以在 editText 中选择单词进行搜索。但不想要虚拟键盘和上下文菜单（或更改它的菜单项，但这并不重要）。我可以做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:52:58.290

您可以在您的代码中设置以下代码。`EditText`这样它就不会在android中弹出软键盘

```
 mEditText.setInputType(InputType.TYPE_NULL);
    mEditText.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View arg0) {
            return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:53:18.233

尝试一下 -

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:01:47.053

创建您自己的 EditText 扩展`EditText`，然后覆盖`onCheckIsTextEditor()`：

```
public class MyEditText extends EditText {
    public MyEditText (Context context)
    {
        super(context);
    }

    public MyEditText (Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }      

    public MyEditText (Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onCheckIsTextEditor()
    {
        return false;
    }
} 
```

# ruby-on-rails - 带有 ajax 和非 ajax 按钮的 Rails 表单

> ID：10170903
> 
> 赞同：3
> 
> 时间：2012-04-16T08:32:32.740
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, forms, ajax-on-rails

我有一个带有两个按钮的 @object 的 form_for。

当第一个按钮呈现“显示动作”时，第二个按钮再次呈现相同的表单。所以我希望后者被ajax处理。

是否可以在同一个表单中有一个非 ajax 按钮和一个 ajax 按钮，还是我必须改变策略？

也许我需要一个带有'remote：true'的form_for，以便两个按钮都是ajax但是，我将如何管理第一个按钮来呈现正确的'显示视图'？

或者也许唯一真正的解决方案是有两种不同的形式？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:41:58.307

您可以尝试挂钩按钮`onClick`事件，删除`data-remote="true"`属性，提交表单并`data-remote="true"`再次添加。我不知道这是否真的是最好的方法，但它应该工作。

```
function sendWithoutAjax() {
  $('my_form_id').removeAttr("data-remote");
  $('my_form_id').submit();
  $('my_form_id').data( "remote", "true" );
} 
```

像这样的东西...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:43:01.007

我认为最简单的方法是使用[jQuery Form](http://jquery.malsup.com/form/)插件。然后您可以创建表单以提交给您的非 ajax 操作，并且 ajax 功能将附加到提交按钮本身：

```
$(".ajax_submit_button").click(function() {
  $(this).closest("form").ajaxSubmit({
    // options go here
    ...
  });
  return false;
}); 
```

# java - 如何从 String 获取 Resource(int) - Android

> ID：10170904
> 
> 赞同：8
> 
> 时间：2012-04-16T08:32:35.087
> 
> 标签：java, android, string, resources, int

> **可能重复：**
> [Android，从字符串中获取资源 ID？](https://stackoverflow.com/questions/4427608/android-getting-resource-id-from-string)

```
String res = "R.drawable.image1"; 
```

我需要得到它的INT id。请帮我！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-16T08:35:08.540

使用它来获取资源ID：

```
int picId = getResources().getIdentifier(picName, "drawable", getApplicationContext().getPackageName()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T08:37:55.297

如果你想得到，`integer`那么只需删除引号。

```
int id = R.drawable.image1; // instead of "R.drawable.image1" 
```

那会给你号码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:37:21.690

```
View view = findViewById(R.drawable.image1);
int id = view.getId(); 
```

# c# - 如何从 Nao 机器人流式传输音频？

> ID：10170911
> 
> 赞同：1
> 
> 时间：2012-04-16T08:33:21.963
> 
> 标签：c#, nao-robot

我想创建一个从 Nao 到我的 WPF 表单的流式音频。

我发现的唯一方法是我们可以通过 SSH 在 Nao 上下载录制的声音。

但它不是真正的流媒体......

如果有人有想法！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-10T12:13:48.680

在您的 NAO 上运行此命令（通过 ssh 登录）`gst-launch-0.10 pulsesrc ! audioconvert ! vorbisenc ! oggmux ! tcpserversink port=1234`

通过 VLC 列出：`vlc tcp://IP:1234/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:01:20.770

您应该查看嵌入在机器人中的 gstreamer。它会有点慢，但它会是真正的流媒体......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T08:26:58.460

对于 Windows：下载最新的 pulseaudio（不是官方的）并使用以下两行创建一个 config.pa 文件：

```
load-module module-native-protocol-tcp listen=0.0.0.0 auth-anonymous=1
load-module module-waveout 
```

首先使用 pulseaudio -F config.pa 在你的 Windows 机器上运行 pulseaudio

在您的 NAO 上：

```
pacmd load-module module-tunnel-sink sink_name=nao server=192.168.1.152 
```

（将此地址更改为您的 Windows 之一。还要确保 pulseaudio 在 Windows 上运行，否则这将不起作用）

```
qicli call ALAudioDevice._listOutputs 
```

前面的命令将显示您刚刚创建的 pulseaudio 设备的索引号。在接下来的命令中使用这个数字

```
pacmd set-default-sink 1
qicli call ALAudioDevice._setDefaultOutput 1 
```

而已。现在一切都通过你的电脑扬声器。index 0 是 NAO 的声卡

对于 Linux：在终端上运行：

```
pactl load-module module-rtp-recv 
```

在 NAO 上：

```
pactl load-module module-null-sink sink_name=nao (creates the sink)
qicli call ALAudioDevice._listOutputs  (checks the index on sink)
qicli call ALAudioDevice._setDefaultOutput 1  
pactl load-module module-rtp-send source=nao.monitor 
```

我发现 Linux 方法更稳定。一段时间后，Windows 上的 TCP 可能会中断。

# php - 无效的参数号：绑定变量的数量与 Doctrine 中的标记数量不匹配

> ID：10170913
> 
> 赞同：1
> 
> 时间：2012-04-16T08:33:53.547
> 
> 标签：php, mysql, doctrine

使用 Doctrine 2 我想获得一些用户是另一个用户的联系人。该表`user`包含这些用户之间的映射。函数中的查询将返回以下错误：

> 无效的参数编号：绑定变量的数量与标记的数量不匹配。

然而，据我所知`$str`，设置为“b”并`$ownerId`设置为“2”，两者都由`setParameters`函数分配。

```
 protected function getContactBySubstring($str, $ownerId) {
        echo $str;
        echo $ownerId;
        $em = $this->getDoctrine()->getEntityManager();
        $qb = $em->createQueryBuilder();
        $qb->add('select', 'u')
                ->add('from', '\Paston\VerBundle\Entity\User u, \Paston\VerBundle\Entity\Contact c')
                ->add('where', "c.owner = ?1 AND c.contact = u.id AND u.username LIKE '?2'")
                ->add('orderBy', 'u.firstname ASC, u.lastname ASC')
                ->setParameters(array (1=> $ownerId, 2=> '%'.$str.'%'));

        echo $qb->getDql();
        $query = $qb->getQuery();
        $users = $query->getResult();
        foreach($users as $user)
            echo $user->getUsername();
        exit;
        //return $contacts;
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T21:40:03.340

不要用引号将查询文本中的任何参数括起来！

```
->add('where', "c.owner = ?1 AND c.contact = u.id AND u.username LIKE '?2'") 
```

应该

```
->add('where', "c.owner = ?1 AND c.contact = u.id AND u.username LIKE ?2") 
```

# android - 找不到类“org.codehaus.jackson.map.ObjectMapper”？

> ID：10170918
> 
> 赞同：3
> 
> 时间：2012-04-16T08:34:12.807
> 
> 标签：android, jar, jackson

我正在使用jackson json解析器，当我声明时我添加了“jackson-all-1.9.3.jar”

```
ObjectMapper objectMapper = null; 
```

编译器识别它，但是当我在模拟器上运行我的应用程序时，我得到了这个错误。

```
04-16 16:27:13.037: I/System.out(435): waiting for debugger to settle...
04-16 16:27:13.245: I/System.out(435): debugger has settled (1417)
04-16 16:27:13.734: E/dalvikvm(435): Could not find class 'org.codehaus.jackson.map.ObjectMapper', referenced from method com.test.weather.GetweatherInfo.<init>
04-16 16:27:13.734: W/dalvikvm(435): VFY: unable to resolve new-instance 45 (Lorg/codehaus/jackson/map/ObjectMapper;) in Lcom/test/weather/GetweatherInfo 
```

我应该怎么做才能解决它谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:42:17.217

您需要将文件夹名称从`lib`更改`libs`为更新`ADT 17`。

查看本文**[以](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)**获取有关此主题的详细信息。

# php - 如何查看由下拉列表中的选项之一产生的数据？

> ID：10170921
> 
> 赞同：1
> 
> 时间：2012-04-16T08:34:31.580
> 
> 标签：php, mysql

我是 php 新手，所以我在创建我想要的东西时遇到了一些问题

我将首先解释我需要什么.. 有会议，每个会议都有一个审稿人和作者名单。

我已经创建了一个下拉列表，用户可以在其中选择哪个会议...我想在单击提交后显示该会议中的审稿人和作者的列表。

那是我的代码

```
<?php
$con = mysql_connect("localhost:3306","root","");
mysql_select_db("messaging_dd", $con);
$sql_drop = "SELECT conference_ID,conference_name FROM Conferences";
$drop_result = mysql_query($sql_drop,$con) or die(mysql_error());
$num_rows = mysql_num_rows($drop_result) or die(mysql_error());
mysql_close($con);
?>

<form name="choose" action="savedata.php" method="POST">
    <br />
    Conference: <select name="conference">
        <?php
        for($i=0 ; $i<$num_rows ; $i++)
        {
            $idofconference = mysql_result($drop_result,$i,0);
            $nameofconference = mysql_result($drop_result,$i,1);
            echo '<option value=" '.$idofconference.' ">'.$nameofconference.'</option>';
        }
        ?>        
    </select> 
    <br />
    <input type="submit" value="submit" name="submit" />

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:47:31.570

尝试这个，

```
$conf_id = $_POST['conference'];

$con = mysql_connect("localhost:3306","root","");
mysql_select_db("messaging_dd", $con);
$sql = "SELECT review, author FROM Reviews WHERE conf_id = ".$conf_id;
$review_list = mysql_query($sql,$con) or die(mysql_error());
mysql_close($con); 
```

或者你可以选择 Ajax。更新您的搜索结果，无需重新加载整个页面。Ajax 参考：[http ://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:45:29.550

我认为你应该试试这个。

```
<form name="choose" action="savedata.php" method="POST">
    <br />
    Conference: <select name="conference">
        <?php
        while($row=mysql_fetch_array($drop_result)
        {
            echo '<option value=" '.$idofconference.' ">'.$nameofconference.'</option>';

        }
        ?>        
    </select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:38:27.907

所有提交的数据都以数组的形式存储在[$_POST变量中。](http://www.php.net/manual/en/reserved.variables.post.php)您的会议 ID 将`$_POST['conference']`与您选择的元素的名称相同`conference`。

另一种方法是通过[AJAX 请求](http://webdesign.about.com/od/ajax/a/aa101705.htm)加载所需的数据（审阅者和作者） ，这样您网站的查看者就不会离开网页。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T08:44:48.263

它与您所做的类似，只需添加如下会议 ID 详细信息：

```
$sql = "SELECT reviewer, author FROM Conferences where conference_ID = " . $_POST['conference']; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T08:46:10.643

在你的文件`savedata.php`中，你可以把

```
$whatever = $_POST['conference'] 
```

`$_POST`是 php 中为系统数据保留的几个数组之一，例如，您可以调用 $_server 以查找有关服务器的详细信息（例如服务器上的时间）

您还可以将 method='POST' 更改为 method='GET' ，它将位于 GET 数组中

```
$whatever = $_GET['conference'] 
```

这有点不安全，但如果这不是优先事项，则值得考虑

# c# - 任务并行库和异常

> ID：10170923
> 
> 赞同：1
> 
> 时间：2012-04-16T08:34:40.797
> 
> 标签：c#, exception, exception-handling, task-parallel-library

我有一个并行执行 4 个不同作业的应用程序。我使用并行任务库。

代码如下所示：

```
while (true)
        {
            var fetch = new FetcherHandler();

            var tasks = new Task[4];

            tasks[0] = Task.Factory.StartNew(fetch.GetJobs);

            tasks[1] = Task.Factory.StartNew(fetch.GetStatusNew);

            tasks[2] = Task.Factory.StartNew(fetch.GetJobsForStatus);

            tasks[3] = Task.Factory.StartNew(fetch.GetStatusOld);
            Task.WaitAll(tasks);

            Thread.Sleep(10000);
        } 
```

上面的 thread.Sleep 永远不会到达，因为所有这 4 个任务都处于一个永无止境的循环中。第一个任务的代码示例：

```
public void GetJobs()
        {
    while (true)
            {
                try
                    {
                        handler.GetNewJob();
                        }
                    catch (Exception exception)
                    {
                            var mail = new MailService();
                            mail.SendExeption("Error has accured in GetJobs", exception);
                            throw;
                        }
                    }
                }
                Thread.Sleep(15000); }} 
```

上面的代码效果很好，它做了一些工作，然后它休眠了 15 秒，然后它又做了一次。当我遇到异常时，就会出现问题。

异常被捕获了，并给我发送了一封邮件，但异常后线程不会在循环中继续，因此 GetNewJob() 方法将永远不会再次执行。

任何想法当异常发生时线程会发生什么，以及我如何“保存”线程以便它可以继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:37:51.710

因为你`throw`是一个异常，所以异常在堆栈顶部传播并中断源线程的执行。

```
catch (Exception exception)
{
    var mail = new MailService();
    mail.SendExeption("Error has accured in GetJobs", exception);
    throw; //THIS LINE !
} 
```

你可以使用一个事件来引发它，比如说，`ExceptionCaught(..)`并在你的程序中监听那个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:36:50.257

只需删除`throw;`catch 子句末尾的。

来自[MSDN](http://msdn.microsoft.com/en-us/library/0yd65esw.aspx)：

> 可以在 catch 块中使用 throw 语句来重新抛出 catch 语句捕获的异常。

所以你重新抛出导致线程中断的捕获的异常，不再执行......

更多信息：[当 .NET 线程抛出异常时会发生什么？](https://stackoverflow.com/questions/1668634/what-happens-when-a-net-thread-throws-an-exception)

# perl - Perl，如何将具有重复标识符和重叠值的数据合并到哈希中

> ID：10170926
> 
> 赞同：4
> 
> 时间：2012-04-16T08:35:12.860
> 
> 标签：perl, hashtable, csv

我想知道您是否可以帮助我解决我无法理解的编码问题。我拥有的制表符分隔数据如下所示：

```
00001  AU:137  AU:150  AU:180
00001  AU:137  AU:170
00002  AU:180
00003  AU:147  AU:155
00003  AU:155 
```

我想要的输出是：

```
00001  AU:137  AU:150  AU:180  AU:170
00002  AU:180
00003  AU:147  AU:155 
```

所以第一列（标识符）将合并值，删除重复项，使其成为哈希。我不确定如何处理我当前的数据，因为它不能是具有重复键的哈希。如果标识符相同，我也不确定如何将数据推送到数组中。

我很抱歉没有代码。我确实尝试了一些，实际上，相当多，但即使对于像我这样的新手来说，它们看起来也不合适。

任何帮助，建议将不胜感激，非常感谢您的时间和回答。我非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:54:18.593

我希望这能提供一些想法来解决您的问题：

```
use strict;
use warnings;
use Data::Dumper;

my %hash = ();

while (<DATA>) {
    chomp;
    my (@row) = split(/\s+/);
    my $firstkey = shift @row;

    foreach my $secondkey (@row) {
            $hash{$firstkey}{$secondkey}++;
    }
}

print Dumper \%hash;

__DATA__
00001  AU:137  AU:150  AU:180
00001  AU:137  AU:170
00002  AU:180
00003  AU:147  AU:155
00003  AU:15 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T16:40:58.040

对此的经典解决方案使用哈希；实际上是散列的散列，因为每行都有重复的行号和重复的值。

这个程序产生你需要的输出。它期望数据文件在命令行上传递。

```
use strict;
use warnings;

my %data;

while (<>) {
  chomp;
  my ($key, @items) = split /\t/;
  $data{$key}{$_}++ for @items;
}

print join("\t", $_, sort keys %{$data{$_}}), "\n" for sort keys %data; 
```

**输出**

```
00001 AU:137  AU:150  AU:170  AU:180
00002 AU:180
00003 AU:147  AU:155 
```

或者，如果您更喜欢命令行解决方案

```
perl -aF/\t/ -lne'$k=shift @F; $d{$k}{$_}++ for @F; END{print join "\t", $_, sort keys %{$d{$_}} for sort keys %d}' myfile 
```

（它可能需要一些调整，因为我目前只能在 Windows 上测试。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:20:07.140

***脚本：***

```
#!/usr/bin/perl

use strict;
use warnings;

my %hash;
sub uniq { return keys %{{map {$_=>1} @_}}; }

open my $fh, '<input.txt' or die $!;
foreach (<$fh>) {
  $hash{$1} .= $2 if /^(\S+)(\s.*?)[\n\r]*$/;
}
close $fh;

foreach (sort keys %hash) {
  my @elements = uniq split /\t/, $hash{$_};
  print "$_\t", join(' ', sort @elements), "\n";
} 
```

***输出：***

```
00001    AU:137 AU:150 AU:170 AU:180
00002    AU:180
00003    AU:147 AU:155 
```

# database - 对于基于文件的 Web 服务，我应该使用数据库还是只使用文件系统？

> ID：10170932
> 
> 赞同：0
> 
> 时间：2012-04-16T08:35:43.080
> 
> 标签：database, git, filesystems

我正在编写一个文档编辑网络服务，其中可以通过网站编辑文档，也可以在本地编辑文档并通过 git 推送。我正在尝试决定是否应该将文档作为单独的文档存储在文件系统或数据库中。我想知道的要点是：

1.  如果它们在数据库中，git 有什么方法可以查看文档吗？
2.  使用文件系统的开销要高多少？我认为操作系统正在做更多的工作。我怎样才能减轻这种情况？例如，网络编辑器自动保存，缓存保存数据的最佳方式是什么，以尽量减少写入？
3.  一个规模显着好于还是差于另一个？如果一切按计划进行，这将是一项服务，可以访问和编辑数千份文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:40:57.043

Filesystem 永远比 DB 快，因为毕竟 DB 是在 Filesystem 中存储数据的！

正如 github 上所证明的那样，Git 本身非常有效，所以我说你坚持使用 git，并解决它。

毕竟，Linus 应该知道一些事情...... ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:17:39.953

1.  如果文档进入数据库，git 不能直接看到文档。git 将看到数据库的后备存储文件，但无法将那里的更改与文件更改相关联。

2.  正如 Carlos 所回答的，使用数据库的开销高于使用文件系统。数据库针对事务进行了优化，它们将在内存中执行，但它们必须命中文件。除非您对应用程序进行编程以在子文档级别执行数据库事务（例如：仅更改修改的行），否则数据库不会给您带来性能改进。大多数现代文件系统都进行缓存，您可以以一种位于 RAM 中的方式“写入”，而不是进入您的后备存储区。您需要管理应用程序中“自动保存”的粒度（每次更改？每 30 秒？5 分钟？），但实际上，以相同的粒度对数据库执行此操作会导致相同数量的流量到后备商店。

3.  我想您打算问“文件系统是否像数据库一样扩展”？:) 如果您有某种方法来组织每个用户的文件，并且您发现特定用户只能访问/修改他们应该能够访问/修改的文件（这是可行的 imo）的安全问题，那么文件系统应该可行。

# apache - .htacces 到 web.config 转换器

> ID：10170936
> 
> 赞同：1
> 
> 时间：2012-04-16T08:35:55.030
> 
> 标签：apache, .htaccess, iis, web-config, rewrite

我想知道网络上是否有可以使用的 .htaccess 到 web.config 转换器？

我正在尝试将其转换为：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^(.*)$ ./index.php?file=$1 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:11:40.390

For IIS7 and above, information on this page might be helpful. There is a built in converting wizard.

[http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules](http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules)

# java - 查找 Netbeans 中设置的主项目的路径

> ID：10170937
> 
> 赞同：0
> 
> 时间：2012-04-16T08:36:06.950
> 
> 标签：java, netbeans, netbeans-7

我试图获取在 Netbeans 中设置的主要项目的路径。

```
import org.netbeans.api.project.ui.OpenProjects;
import org.netbeans.api.project.Project;
import javax.tools.FileObject;

 Project proj = OpenProjects.getDefault().getMainProject(); 
FileObject root = proj.getProjectDirectory(); 
String path = root.getPath(); 
```

执行时会产生以下错误。我发现要使用 fileUtil 而不是上面的 root.getpath()。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/netbeans/modules/project/uiapi/Utilities
    at org.netbeans.api.project.ui.OpenProjects.<init>(OpenProjects.java:88)
    at org.netbeans.api.project.ui.OpenProjects.<clinit>(OpenProjects.java:83) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:46:20.410

尝试在模块属性>库>添加依赖中搜索包：

![netbeans 模块属性](../Images/6387bac3f0182f538cb32039232eebb5.png)

然而，这需要在 Nebeans Platform 项目中添加对该平台模块的依赖（可能在 ide > Project API 中）

# salesforce - 销售人员休息 api

> ID：10170940
> 
> 赞同：4
> 
> 时间：2012-04-16T08:36:18.553
> 
> 标签：salesforce, salesforce-chatter, salesforce-service-cloud

我是新来的销售人员。我需要知道如何为 Salesforce REST API 设计 WSDL 以连接 salesforce 服务？

我有疑问，是否可以对销售人员资源执行 GET 请求（销售人员具有 REST 访问权限）并根据收到的每个请求的响应 xml 创建 xsd？

但我无法找到可供销售人员使用的特定模式。或者

有没有其他方法可以为 REST API 设计 WSDL？

感谢您提前回答

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T19:26:05.727

对于 REST API，您不需要使用 WSDL。您可以通过访问来探索 API

https://{instance}.salesforce.com/services/data/v24.0

如需交互式浏览器，请查看 apigee 的 salesforce 控制台：

[https://apigee.com/console/salesforce](https://apigee.com/console/salesforce)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T05:42:39.467

您还可以使用 Workbench 对 Salesforce 进行 REST 调用：

[http://wiki.developerforce.com/page/Workbench](http://wiki.developerforce.com/page/Workbench)

# algorithm - 如何验证给定树是否为二叉搜索树

> ID：10170941
> 
> 赞同：2
> 
> 时间：2012-04-16T08:36:18.740
> 
> 标签：algorithm, data-structures

我想知道给定的二叉树是否是二叉搜索树。

我不知道该怎么做？

我唯一知道的是，BST 的中序遍历会给你升序输出。

那么，这是我们需要验证的唯一条件还是我们应该检查的其他任何内容。

如果还有其他一些必要条件需要检查，它们是什么？为什么需要检查这些条件？因为，我认为，INORDER 遍历本身可以很容易地告诉你给定的树是否是 BST。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T08:42:19.387

是的，如果树的中序遍历为您提供了一个严格单调的值列表，足以确定该树是 BST。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T16:04:23.103

根据二叉搜索树的定义，如果二叉树的每个节点都满足以下条件，那么它就是一棵二叉搜索树：

*   节点的左子树应该只包含键小于节点键的节点
*   节点的右子树应该只包含键大于节点键的节点
*   左右子树也必须是二叉搜索树。

**如果中序遍历是升序的，则上述所有条件都得到验证。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T13:57:04.153

实际上 - 仅进行顺序遍历是不够的 - 您还需要验证每个节点的值是否遵循树的规则。在 BST 的情况下，左子值小于节点值，右子值大于节点值。这是Java中的递归示例。

```
private static boolean isBST(Node current, Comparable more, Comparable less) {
    if (current == null) 
        return true;

    if (less != null && current.value.compareTo(less) > 0)
        return false;

    if (more != null && current.value.compareTo(more) < 0) 
        return false;

    return isBST(current.left, more, current.value) && 
            isBST(current.right, current.value, less);
}

public static boolean isBST(BinarySearchTree tree) {
    return isBST(tree.getRoot(), null, null);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T07:12:29.343

```
While doing In-Order traversal, we can keep track of previously visited node 
```

代码：

```
bool isBST(struct node* root)
{
    static struct node *prev = NULL;

    // traverse the tree in inorder fashion and keep track of prev node
    if (root)
    {
        if (!isBST(root->left))
          return false;

        // Allows only distinct valued nodes 
        if (prev != NULL && root->data <= prev->data)
          return false;

        prev = root;

        return isBST(root->right);
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-09T21:30:28.497

Java中一个简单而优雅的递归解决方案：

```
public static boolean isBST(TreeNode node, int leftData, int rightData)
{
    if (node == null) return true;

    if (node.getData() > leftData || node.getData() <= rightData) return false;

    return (isBST(node.left, node.getData(), rightData)
           && isBST(node.right, leftData,  node.getData()));

} 
```

对该函数的初始调用可能是这样的：

```
if (isBST(root, Integer.MAX_VALUE, Integer.MIN_VALUE))
    System.out.println("This is a BST.");
else
    System.out.println("This is NOT a BST!"); 
```

本质上，我们不断创建一个有效范围（从 [MIN_VALUE, MAX_VALUE] 开始）并在递归下降时不断缩小每个节点的范围。

来源：[http ://exceptional-code.blogspot.com/2011/08/binary-search-trees-primer.html](http://exceptional-code.blogspot.com/2011/08/binary-search-trees-primer.html)

# maven-2 - Cargo 在哪里为 Jetty 6.x 生成上下文 XML？

> ID：10170949
> 
> 赞同：1
> 
> 时间：2012-04-16T08:36:34.343
> 
> 标签：maven-2, jetty, cargo, maven-cargo

我正在尝试实现[如何为 Jetty 的 Maven Cargo 插件指定 jetty-env.xml 文件中提到的解决方案？](https://stackoverflow.com/questions/4039655/how-to-specify-jetty-env-xml-file-for-maven-cargo-plugin-for-jetty)

但是，我面临着更根本的问题：我的 Cargo 根本没有生成任何上下文 xml。

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.2.1</version>
    <configuration>
        <!-- Container configuration -->
        <container>
            <containerId>jetty6x</containerId>
            <type>embedded</type>
        </container>
        <!-- Configuration to use with the container or the deployer -->
        <configuration>
            <properties>
                <cargo.servlet.port>${itest.webapp.port}</cargo.servlet.port>
                <cargo.jetty.createContextXml>true</cargo.jetty.createContextXml>
            </properties>
            <deployables>
                <deployable>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>myApp-web</artifactId>
                    <type>war</type>
                    <properties>
                        <context>/myApp</context>
                    </properties>
                </deployable>
            </deployables>
<!--
            <configfiles>
                <configfile>
                    <file>${project.build.outputDirectory}/jetty-env.xml</file>
                    <todir>contexts</todir>
                    <tofile>${jetty6.context}.xml</tofile>
                </configfile>
            </configfiles>
-->
        </configuration>
    </configuration>
    <executions>
        <execution>
            <id>start-container</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-container</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

基本思想是，我们提供一个自定义的 context.xml 来替换生成的那个。但是，当我尝试时，我找不到 Cargo 生成的任何上下文 XML（请注意，我已经注释了自定义配置文件，并且 cargo.jetty.createContextXml 为 true）

我不确定是否是我的设置问题导致未生成上下文，或者上下文是在我忽略的地方生成的。我检查了 target/cargo/ 和 cargo 扩展了我的 WAR 的临时目录，这两个地方都不包含上下文 xml。

（我正在使用 Maven 2.2.1、Cargo 1.2.1、JDK 6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:00:07.733

我不是 100% 确定您的问题是什么，但这是货物在我的系统上为 Jetty6 所做的事情。

Jetty 安装所在的目录不是运行时上下文和 webapp 文件所在的目录。在我的例子中，它们存储在 Java 临时目录（即`java.io.tmpdir`）中。在我的 Ubuntu 系统上，这是`/tmp`. 在这个目录下，有一个`cargo/conf`目录。在`/tmp/cargo/conf`我有一个`context.xml`存储文件的上下文目录下 - 尽管文件的实际名称永远不会`context.xml`它总是以 Web 应用程序上下文命名。

在我的例子中，这个文件的名称与我配置货物的上下文相同。这可能是您的问题，因为我注意到您没有像我一样提供上下文：

```
<deployables>
    <deployable>
       <properties>
         <!-- Web root context URL -->
         <context>${build.appserver.context}</context>
       </properties>
    </deployable>
</deployables> 
```

其次，我还注意到您已经注释掉了将 context.xml 文件放置在正确位置的部分。除非您取消注释，否则这是行不通的。

第三，你是否设置了`${jetty6.context}`Maven 属性的值？

第四 - 我认为要使其工作，您需要使用 Jetty 的独立配置。这应该不是问题，因为 Cargo 会自动为您下载并安装它。在这里查看我的配置：

> ```
>  <container>
>                           <containerId>jetty6x</containerId>
>                           <!-- Using Jetty for build portability so type != "remote". For Jetty
>                               would prefer type = "embedded" but we must go with "installed" because jetty-env.xml
>                               file would be ignored. See http://jira.codehaus.org/browse/CARGO-861 -->
>                           <type>installed</type>
>                           <zipUrlInstaller>
>                               <url>http://dist.codehaus.org/jetty/jetty-6.1.26/jetty-6.1.26RC0.zip</url>
>                               <installDir>${build.working}</installDir>
>                           </zipUrlInstaller>
>                           <dependencies>
>                               <!-- The following dependencies are added to the servlet container's
>                                   classpath as if they were installed by a system admin. In order to be included
>                                   here, they need to be listed as dependencies in this pom.xml. -->
>                               <dependency>
>                                   <groupId>com.h2database</groupId>
>                                   <artifactId>h2</artifactId>
>                               </dependency>
>                               <dependency>
>                                   <groupId>com.oracle</groupId>
>                                   <artifactId>ojdbc5</artifactId>
>                               </dependency>
>                               <dependency>
>                                   <groupId>mysql</groupId>
>                                   <artifactId>mysql-connector-java</artifactId>
>                               </dependency>
>                               <dependency>
>                                   <groupId>net.sourceforge.jtds</groupId>
>                                   <artifactId>jtds</artifactId>
>                               </dependency>
>                           </dependencies>
>                       </container>
>                       <!-- Do not hang and wait for a client, just do it -->
>                       <wait>false</wait>
>                       <configuration> <!-- Deployer configuration -->
>                           <!-- Running Jetty container with type=installed (e.g. local) so
>                               type != "runtime", and we are installing it during this execution for the
>                               sake of portability so type != "existing" -->
>                           <type>standalone</type>
>                           <properties>
>                               <!-- Use the port number from settings.xml -->
>                               <cargo.servlet.port>${build.appserver.port}</cargo.servlet.port>
>                           </properties>
>                           <deployables>
>                               <deployable>
>                                   <properties>
>                                       <!-- Web root context URL -->
>                                       <context>${build.appserver.context}</context>
>                                   </properties>
>                               </deployable>
>                           </deployables>
>                           <configfiles>
>                               <configfile>
>                                   <file>${basedir}/target/jetty-context.xml</file>
>                                   <todir>contexts</todir>
>                                   <tofile>${build.appserver.context}.xml</tofile>
>                               </configfile>
>                           </configfiles>
>                       </configuration> 
> ```

# c# - C#读取excel无法获取值

> ID：10170950
> 
> 赞同：0
> 
> 时间：2012-04-16T08:36:37.153
> 
> 标签：c#, excel, oledbdatareader

我可以读取除“one”之外的所有值。

这是我的代码：

```
OleDbConnection oledb_con = new OleDbConnection(strCon);

oledb_con.Open();

OleDbCommand oledb_com = new OleDbCommand("SELECT * FROM [sheet1$]", oledb_con);

OleDbDataReader oledb_dr = oledb_com.ExecuteReader();

while (oledb_dr.Read())
{                
       ActionList.Add(oledb_dr[0].ToString().Trim());
       ValueList.Add(oledb_dr[1].ToString().Trim());
}

oledb_dr.Close();
oledb_con.Close(); 
```

ValueList[0] 始终不显示任何内容，但其他 ValueList 的成员可以读取。

而ActionList[0] 可以读取。

为什么不能读取第一个值。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:15:52.403

您是否检查过该值是否不为空？在字符串读取值为空时失败。

```
oledb_dr.IsDbNull(1) ? "" : oledb_dr[1].ToString().Trim() 
```

# android - ListView ,OnItemClickListener 没有响应

> ID：10170955
> 
> 赞同：0
> 
> 时间：2012-04-16T08:37:00.693
> 
> 标签：android, listview

我有一个带有自定义 baseadapter 的列表视图，类和适配器的代码如下

```
 public class LazyAdapter extends BaseAdapter {
    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

            vi = inflater.inflate(R.layout.custom_row_view1, null);

        TextView title = (TextView)vi.findViewById(R.id.linkname); // merchnts name
        TextView artist = (TextView)vi.findViewById(R.id.imagename); // address
        //TextView duration = (TextView)vi.findViewById(R.id); // distance
       // ImageView thumb_image=(ImageView)vi.findViewById(R.id.mClogo); // logo

        HashMap<String, String> jsn = new HashMap<String, String>();
        jsn = data.get(position);

        // Setting all values in listview
       title.setText(jsn.get(Second.Li_nk));
       artist.setText(jsn.get(Second.Image_name));
        //duration.setText(song.get(CustomizedListView.KEY_DURATION));
        //imageLoader.DisplayImage(jsn.get(NearBy.KEY_THUMB_URL), thumb_image);
        return vi;
    }

} 
```

实现它的类如下

```
 HashMap<String,String> map=new HashMap<String,String>();
        map.put("Id",String.valueOf(i));
        map.put(Li_nk,cutsec);
        map.put(Image_name,j4.getString("image_name"));
        mylist.add(map);

    }

    }
    catch(JSONException e){
        Log.e("loG_tag","Error parsing"+e.toString());
    }

     list=(ListView)findViewById(R.id.lv1);
     list.setOnItemClickListener(new AdapterView.OnItemClickListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                Toast.makeText(getApplicationContext(),
                        "Click ListItem Number " + position, Toast.LENGTH_LONG)
                        .show();

            }

        });
   LazyAdapter adapter = new LazyAdapter(this,mylist);

    list.setAdapter(adapter);
    list.setItemsCanFocus(false);

} 
```

包含列表视图的布局是

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/zsm" />

    <ListView
        android:id="@+id/lv1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:clickable="True"
         >

    </ListView>

</RelativeLayout> 
```

并且列表的自定义布局的代码是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="70dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:clickable="True"
        android:focusable="false"

        android:background="@drawable/list_selector"
         >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="21dp"
            android:focusable="false"

            android:src="@drawable/merchntlogotitle" />

        <TextView
            android:id="@+id/imagename"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageView1"
            android:layout_marginLeft="15dp"
            android:layout_toRightOf="@+id/imageView1"
            android:clickable="false"
            android:focusable="false"

            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/linkname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/imagename"
            android:layout_alignLeft="@+id/imagename"
            android:clickable="false"
            android:focusable="false"

            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000" />

    </RelativeLayout>

</RelativeLayout> 
```

现在设置 onitemclick 监听器没有响应，我做错了什么？？？我已经阅读了很多关于将焦点设置为 false 和其他方面的示例，我做错了什么？任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:45:54.090

从行布局中的所有视图项中删除以下内容，因为这些内容会分散 ListView 自己的项目单击事件的注意力。

```
android:clickable
android:focusable 
```

例如：

```
<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="70dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"

    android:background="@drawable/list_selector"
     >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="21dp"

        android:src="@drawable/merchntlogotitle" />

    <TextView
        android:id="@+id/imagename"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_marginLeft="15dp"
        android:layout_toRightOf="@+id/imageView1"

        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/linkname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/imagename"
        android:layout_alignLeft="@+id/imagename"

        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#000000" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:59:17.890

不要 `android:clickable="True"`在您的布局中设置任何位置并尝试它。所有可点击的视图都与那里的父母绑定，因此他们的父母将无法获得点击事件。

# node.js - 如何捕获 nodejs 连接静态 404 错误？

> ID：10170960
> 
> 赞同：1
> 
> 时间：2012-04-16T08:37:32.927
> 
> 标签：node.js, static, error-handling, http-status-code-404, connect

我使用 nodeJS 和 senchalab 的连接中间件（不是 express ！！）。我需要捕捉静态错误（如 404）。我怎么得到这些？我试图检查源代码，但找不到将错误处理程序传递给 connect.static 的方法。

这是我（必须）使用的一般结构的要点：

[https://gist.github.com/2397415](https://gist.github.com/2397415)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:10:07.527

根据您的路线：

```
router.routes['/'] = 'my page';
router.routes['/404'] = '404 test'; 
```

我想你的意思是：

```
connect()
  .use(connect.static(__dirname + '/public'))
  .use(function(req, res, next){
    switch (req.url) {
      case '/404':
        var body = '404 test';
        res.statusCode = 404;
        res.setHeader('Content-Length', body.length);
        res.end(body);
        break;
      default:
        var body = 'my page';
        res.setHeader('Content-Length', body.length);
        res.end(body);
    }
  })
  .listen(3001); 
```

我还想补充一点，在旧的连接版本 1.x 中，您可以使用“connect.router”，但在 2.x 版本中，它已被[删除](https://github.com/senchalabs/connect/issues/262)并移至 express。如果您需要有用的路由系统，请使用 express：

> Connect 从来都不是直接使用的，它的存在是为了支持 Express 等框架

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:35:14.003

您可以在静态和所有路由之后添加一个包罗万象的路由：

```
app.get('*', function(req, res){
  //respond with 404 page or something.
}) 
```

它将捕获所有不匹配的 GET 请求。

# javascript - Dojo domNode 和 srcNodeRef 为空

> ID：10170962
> 
> 赞同：1
> 
> 时间：2012-04-16T08:37:41.987
> 
> 标签：javascript, dojo, django-templates

我正在尝试使用 dojo django 模板编写自定义小部件（对话框）。首先，我制作了一个简单的模板，它使用标准模板语法。它工作正常。然后我试图脱轨到 django 模板。这是模板：

```
<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">
    <div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">
        <span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"></span> 
        <span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">
            <span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>
        </span>
    </div>
    <div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent bugViewContent">
            <div data-dojo-type="dijit.layout.TabContainer" style="width: 100%; height: 100%;">
                <div data-dojo-type="dijit.layout.ContentPane" title="Details" selected="true">
                    <span>{{ttt}}</span>
                </div>
                <div data-dojo-type="dijit.layout.ContentPane" title="Attachments">
                    Test
                </div>
                <div data-dojo-type="dijit.layout.ContentPane" title="Core tab">
                    Test
                </div>
                <div data-dojo-type="dijit.layout.ContentPane" title="Corporate tab">
                    Test
                </div>
                <div data-dojo-type="dijit.layout.ContentPane" title="Distribution tab">
                    Test
                </div>
            </div>
    </div>
</div> 
```

和代码：

```
require([
         "dojo/_base/declare",
         "dojo/ready",
         "dijit/_Widget",
         "dijit/Dialog",
         "dijit/_TemplatedMixin",
         "dojox/dtl/_DomTemplated",
         "dijit/_WidgetsInTemplateMixin",
         "dojo/text!qc_boobster/BugView.html",
         "dijit/layout/TabContainer",
         "dijit/layout/ContentPane"
        ], 
        function(declare, ready, Widget, Dialog, TemplatedMinxin, DtlDomTemplated, WidgetsInTemplateMixin, template) {
            declare("qc_boobster.BugView", 
                    [Widget, Dialog, TemplatedMinxin, DtlDomTemplated, WidgetsInTemplateMixin],
                    {
                        templateString : template,

                        ttt : "test",

                        setBug : function(aBug) {
                            console.log("BugView.setBug(");
                            console.log(aBug);
                            console.log(")");
                        },
                    });

            ready(function() {
            });
        }
); 
```

我这样称呼它：

```
xhr.get({
    url : "ajax/bugs/" + id,
    handleAs : "json",
    load : function(data) {
        var bugView = new qc_boobster.BugView();

        bugView.setBug(data);
        bugView.show();
    }
}); 
```

当我尝试以编程方式实例化小部件时，我收到以下错误：`You cannot use the Render object without specifying where you want to render it`. 好吧，我查看了 dojo 资源并在`dojox.dtl.render.dom`. 我在对象（我的小部件）没有设置 domNode 时发生。我已经放置了断点并`dojox.dtl._DomTemplated.buildRendering()`看到两者都未定义。我尝试在我的小部件中添加几个混合组件（见上文），但它们都没有设置这些属性。我也尝试设置，但后来在官方文档中发现，发生在. 我认为问题在于我以编程方式创建了我的小部件，但不是在现有 DOM 节点的顶部。`domNode``srcNodeRef``domNode``postCreate()``postCreate()``buildRendering()`

那么我做错了什么以及如何使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:11:17.500

好像我需要这样的继承：

```
require([
     "dojo/_base/declare",
     "dojo/ready",
     "dijit/Dialog",
     "dojox/dtl/_Templated",
     "dijit/_WidgetsInTemplateMixin",
     "dojo/text!qc_boobster/BugView.html",
    ], 
    function(declare, ready, Dialog, DtlTemplated, WidgetsInTemplateMixin, template)
        .... 
```

# file - 按文件中的列批量排序

> ID：10170964
> 
> 赞同：3
> 
> 时间：2012-04-16T08:37:46.013
> 
> 标签：file, sorting, batch-file

我想知道是否可以按列对文本文件进行排序。例如

我有这样`aux1.txt`的行

```
Name SecondName Grade 
```

在外壳中我可以做到这一点

```
sort -r -k 3 aux1 
```

它按第 3 列（等级）对文件进行排序。

批量

```
sort /+3 < aux1.txt 
```

在第三个字母之后对文件进行排序。

我阅读了批处理的排序手册，但没有结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:34:27.253

您可以使用批处理文件 编写自己的*排序包装器。*

您只需要将列重新排序到临时文件中，
对其进行排序并重新排序。（几乎很明显）

```
REM *** Get the desired colum and place it as first column in the temporary file
setlocal DisableDelayedExpansion
(
    for /F "tokens=1-3 delims= " %%A in (aux1.txt) DO (
        set "par1=%%A"
        set "par2=%%B"
        set "par3=%%C"
        setlocal EnableDelayedExpansion
        echo(!par2! !par1! !par2! !par3!
        endlocal
  )
) > aux1.txt.tmp

REM ** Now sort the first colum, but echo only the rest of the line
for /F "usebackq tokens=1,* delims= " %%A in (`sort /r aux1.txt.tmp`) DO (
    echo(%%B
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:45:32.543

对您来说可能为时已晚，但作为一般建议，您可以比创建临时文件简单得多。只需通过排序管道即可：

```
for /f "tokens=1-3" %%a in ('(for /f "tokens=1-3" %%x in (aux1.txt^) do @echo %%z %%x %%y^)^|sort') do echo %%b %%c %%a 
```

请注意，它是一个命令，只需在命令提示符下键入即可使用，根本不需要任何批处理文件（当然，必须为此减少 %%）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T22:59:56.477

虽然我真的很喜欢 Jeb 的回答，但多年来我一直在使用 Chris LaRosa 的 [TextDB 工具](http://reocities.com/SiliconValley/monitor/5986/utils.html)。

您可以对多个列进行排序，通过他的另一个工具（或任何其他 CL 工具）进行管道传输。有点老...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-25T13:19:21.793

`SortFileBySecondColumn.bat`

```
@echo off
if "%1"=="" (
echo Syntax: %0 FileToSort.txt [/R]
echo /R means Sort in Reverse Order
goto Ende
)
set InputFile=%1
for /f "tokens=1-2* delims= " %%a in ('(for /f "tokens=1-2* delims= " %%n in (%InputFile%^) do @echo %%o %%n %%p^)^|sort %2') do echo %%b %%a %%c
:Ende 
```

用法：`SortFileBySecondColumn UnsortedFile.txt > SortedFile.txt`
如果您在那时交换`delims=` ，`delims=;`则可以将其用于 CSV 文件。

示例输入文件：

```
172.20.17.59 PC00000781 # 14.01.2022 12:35:55
172.20.17.22 NB00001021 # 31.01.2022 14:40:38
172.20.16.114 TRANSFER14 # 11.02.2022 11:22:07
10.59.80.27 PC00001034 # 14.02.2022 15:39:23
10.59.80.140 XXBNB00173 # 16.02.2022 10:13:31
172.20.17.23 PC00000XXX # 18.02.2022 12:40:58
10.59.232.25 NB00000178 # 18.02.2022 14:38:53 
```

结果输出文件：

```
10.59.232.25 NB00000178 # 18.02.2022 14:38:53 
172.20.17.22 NB00001021 # 31.01.2022 14:40:38 
172.20.17.59 PC00000781 # 14.01.2022 12:35:55 
172.20.17.23 PC00000XXX # 18.02.2022 12:40:58 
10.59.80.27 PC00001034 # 14.02.2022 15:39:23 
172.20.16.114 TRANSFER14 # 11.02.2022 11:22:07 
10.59.80.140 XXBNB00173 # 16.02.2022 10:13:31 
```

# ruby-on-rails - 如何使用 gem 'linkedin' 获取用户配置文件，:git => "git://github.com/pengwynn/linkedin.git"

> ID：10170976
> 
> 赞同：-1
> 
> 时间：2012-04-16T08:38:14.860
> 
> 标签：ruby-on-rails, linkedin

我知道这是一个非常基本且愚蠢的问题，但是由于我是初学者，并且从早上开始寻找示例以使用 gem 'linkedin'，:git => "git://github.com/pengwynn/linkedin.git"。

请为我提供使用此 gem 的示例。

因为我在这里看到[https://github.com/pengwynn/linkedin/tree/master/lib/linked_in](https://github.com/pengwynn/linkedin/tree/master/lib/linked_in)客户端类只有初始化没有新方法

```
 def initialize(ctoken=LinkedIn.token, csecret=LinkedIn.secret, options={}) 
```

什么是选项在这里传递什么？这在客户端类中也可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:24:58.040

该调用`client.profile`返回一组配置文件信息。

```
profile = client.profile

profile.positions # this should return the postions...
# maybe there is a function for each field like
profile.lastname 
```

我主要是在猜测，因为您没有提供太多信息，而且我没有链接，所以我可以自己尝试。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:24:38.937

我通过添加：

```
client.profile(:fields => [:positions]).positions 
```

这将允许我访问特定的位置或字段，而无需进入原始 xml，只需使用 gem 中的方法。一旦我得到格式，宝石就会很好地工作......

# java - submodules dependency graph

> ID：10170984
> 
> 赞同：4
> 
> 时间：2012-04-16T08:39:02.047
> 
> 标签：java, maven, graph, diagram

I need to generate a dependency graph for my java application but only for sub-modules and not the plugins.

Example in pom.xml

```
 <modules>
        <module>module1/pom1.xml</module>
        <module>module2/pom2.xml/module>
 </modules> 
```

I tried depgraph with graphviz but it generates the plugins dependencies and not the sub-modules, any idea?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:45:29.877

Finaly i found the solution using depgraph plugin , its to a apply a filter in its configuration like this :

```
 <plugin>
            <groupId>ch.elca.el4j.maven.plugins</groupId>
            <artifactId>maven-depgraph-plugin</artifactId>
            <version>3.0</version>
            <configuration>           
                 <groupFilter>com.stackoverflow.*</groupFilter>                            
            </configuration>
         </plugin> 
```

this will draw all draw all dependencies starting with "com.stackoverflow" , in my case they are submodules.

Hope it helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:43:10.513

You could give the [maven graph plugin](http://mvnplugins.fusesource.org/maven/1.0/maven-graph-plugin/index.html) a try. It can draw a dependency graph with a transitivity depth of 1. This will not guarantee you that no additional noise, dependencies which are not sub-modules, will be drawn.

The other option is to use the [graphiz maven plgin](http://graphviz-maven-plugin.bryon.us/dot-mojo.html) and create your own *dot* file.

# asp.net-mvc - 我应该如何构建链接到不同控制器操作的项目列表？

> ID：10170986
> 
> 赞同：0
> 
> 时间：2012-04-16T08:39:08.290
> 
> 标签：asp.net-mvc

我有一个 ASP.NET MVC Web 应用程序，我希望在一个页面上显示一个项目表，其中包含指向该项目详细信息的链接。很基本。但是，我希望在列表中显示的项目都是公共基本类型的子类，因此链接需要引用不同的控制器操作。

所以，我的问题是：我应该在哪里/如何构建这些链接（参见下面的示例）？

我已经可以通过多种方式实现我的目标（例如，在将业务对象映射到视图模型时构建路由，在视图模型中使用标志或魔术字符串，具有选择适当视图的单个“基本”控制器操作等）但似乎没有一个特别“干净”，所以这更多的是关于最佳实践的问题，而不是机制问题。

例如，假设我的“作业”表如下所示：

```
Id   <OtherCommonFields>  Type    Name           Link
1    <some data>          Event   Some event     /event/1
4    <some data>          Task    Some task      /task/4
3    <some data>          Event   Another event  /event/3
2    <some data>          Task    Another task   /task/2
5    <some data>          Event   One more event /event/5 
```

其中“任务”和“事件”都是“分配”的子类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:29:38.873

我想说的简短版本是创建一个名为 AssignmentLink 的新 actionlink 扩展方法，您可以在其中传递 id 和类型。

在 assignmentlink 方法中，切换类型并以 actionlink 的形式返回正确的 url。这样，如果您添加不同类型的任务或其他任何内容，您就可以在一个中央助手中控制所有内容。

在之前的一个 mvc 应用中，超链接给我们带来了很多麻烦。当我们重命名控制器，或将控制器移动到新区域等时，更新对该控制器的所有引用需要很长时间。所以在我们最近的项目中，我们将所有超链接逻辑包装到一个名为“linkdata”的对象中

然后，我们为我们的链接数据对象创建了扩展，在帮助程序或扩展中具有任何逻辑。

[http://codingsmith.co.za/extending-the-actionlink-helper-in-mvc/](http://codingsmith.co.za/extending-the-actionlink-helper-in-mvc/)如果你有兴趣，但你可以在你的例子中少得多，只需一个简单的扩展就可以了。

# linux - 在 Linux 内核中使用 netlink 套接字在用户空间应用程序和字符设备之间进行通信时出错

> ID：10170988
> 
> 赞同：0
> 
> 时间：2012-04-16T08:39:12.493
> 
> 标签：linux, kernel, device-driver, netlink

我编写了一个内核驱动程序“hello_kernel”，它在自定义节点 /dev/hello 上注册为字符设备。在 hello_kernel.c 文件中，在调用 register_chrdev() 之后，我尝试使用 netlink_kernel_create()（在 netlink.h 中定义）创建一个 netlink 套接字，并使用正确定义的函数通过该套接字接收用户空间消息。

代码编译完美，我使用 mknod 使设备点头 /dev/hello；但是当我尝试安装此模块（ hello_kernel.ko ）时，出现错误：

insmod：插入“hello_kernel.ko”时出错：-1 没有子进程

dmesg 命令显示在创建套接字时出错，即使用 netlink_kernel_create()。

最初，我试图使用这个模块来连接一个用户空间应用程序，只使用一个运行良好的 netlink 套接字。我添加字符设备功能的动机是使另一个用户应用程序能够像常规设备文件一样打开它并发出 ioctl 调用。

我能做些什么来完成这项工作？或者内核不支持合并这两个功能？

代码如下：

```
result = register_chrdev(major_num, "hello", &hello_fops);
if( result < 0 )
{
 printk( KERN_INFO "Could not init hello_kernel" );
 return result;
} 
result=netlink_kernel_create(&init_net, NETLINK_USER, 0, hello_nl_recv_msg,NULL,
THIS_MODULE);
if(!result)
{
 unregister_chrdev(major_num, "memory");
 printk(KERN_ALERT "Error creating socket.\n");
 return -10;
} 
```

尝试插入模块：

```
$sudo insmod hello_kernel.ko
insmod: error inserting 'hello_kernel.ko': -1 No child processes 
```

dmesg 的输出：

```
[ 1537.809491] Error creating socket. 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-18T07:08:43.710

问题出在注册设备后创建套接字。现在，我在设备注册（register_chrdev）之前创建了套接字（netlink_kernel_create），并且在重新启动后，它可以工作了：）

# php - 如何在旧版应用程序中使用 Symfony 2 容器

> ID：10170989
> 
> 赞同：8
> 
> 时间：2012-04-16T08:39:13.593
> 
> 标签：php, dependency-injection, symfony, legacy-code

希望将遗留应用程序与 Symfony 2 应用程序集成 - 用 Symfony 组件替换越来越多的旧应用程序部分。我将采取的方法是在遗留应用程序中使用 Symfony 2 容器来获取已经为 Symfony 2 应用程序配置的服务。我想使用的第一个服务是会话和安全上下文。

问题：

*   这可行吗？
*   如何获取配置的服务容器？

遗留应用程序中的更多信息：典型的 PHP 混乱：单个 PHP 文件，作为“控制器”（检查 $_GET 和 $_POST 以获取不同的执行路径）。每个页面包括`init.php`设置自动加载、数据库连接等。会话管理有自己的类（我想替换它），通过调用数据库对象的静态方法（！）来检索数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T17:45:36.063

使用 Symfony 的 DIC 作为独立组件[是可能的](http://www.zalas.eu/managing-object-creation-in-php-with-the-symfony2-dependency-injection-component)，但是您必须“手动”做很多事情（因为您从一开始就没有计划使用完整的 Symfony 框架）。您可能不会对使用 DIC 和所有那些遗留的东西有太多好处。

如果你想走这条路，我会考虑先选择另一个组件（如 HttpFoundation 和 HttpKernel）。

正如@Cerad 建议的那样，您可以将遗留代码包装在 Symfony 中。看看[IngewikkeldWrapperBundle](https://github.com/Ingewikkeld/IngewikkeldWrapperBundle)包。您不能按原样使用它，但它可能会给您一些想法。

还有第三种方式。

您可以决定在 Symfony 应用程序中实现每个新功能。然后，你可以让遗留应用程序和 Symfony 应用程序共存。在服务器级别（即 Nginx），您可以将旧版 URL 代理到旧版应用程序，并将所有迁移的 URL 代理到 Symfony2 应用程序。就我而言，这种情况是最好的选择，并且被证明是有效的。然而，我们致力于放弃遗留应用程序开发（因此每个新功能或更改都必须在 Symfony2 应用程序中开发）。

编辑：这是在旧版应用程序中启动 Symfony 内核并调度事件（防火墙需要）的方法：

```
$kernel = new \AppKernel('dev', true);
$kernel->boot();

$request = Request::createFromGlobals();
$request->attributes->set('is_legacy', true);
$request->server->set('SCRIPT_FILENAME', 'app.php');

$container = $kernel->getContainer();
$container->enterScope('request');
$container->get('request_stack')->push($request);
$container->set('request', $request);

$event = new GetResponseEvent($kernel, $request, HttpKernelInterface::MASTER_REQUEST);
$eventDispatcher = $container->get('event_dispatcher');
$eventDispatcher->dispatch('kernel.request', $event); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:45:35.920

我相信您可以像这样从遗留应用程序访问容器实例

```
$kernel = new AppKernel('prod', true);
$kernel->loadClassCache();
$kernel->boot();
$request = Request::createFromGlobals();
$container = $kernel->getContainer();
$sc = $container->get('security.context'); 
```

# html - 多个带有背景图像但没有内容的内联容器

> ID：10170990
> 
> 赞同：1
> 
> 时间：2012-04-16T08:39:15.473
> 
> 标签：html, css

我正在尝试在 css 中支持三个背景图像内联显示

```
<div id="hd_but2"></div>
<div id="hd_div1"></div>
<div id="hd_but1"></div> 
```

和

```
#hd_but2 {
background-image:url('1.png');
background-repeat:no-repeat;
height:28px;
width:49px;
margin-top:9px;
}
#hd_div1 {
background-image:url('2.png');
background-repeat:no-repeat;
height:46px;
width:4px;
}
#hd_but1 {
background-image:url('3.png');
background-repeat:no-repeat;
height:28px;
width:29px;
margin-top:9px;
} 
```

但是每次我将 div 更改为内联时，它都需要内容（如文本）来显示背景图像......我怎么能在不将文本放入容器的情况下做到这一点......有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:50:35.453

您好，您可以使用两种方法

表格单元或内联块

演示，如果你使用表格单元[http://jsfiddle.net/rohitazad/XTVbu/7/](http://jsfiddle.net/rohitazad/XTVbu/7/)

**或者**

或者如果您使用内联块演示[http://jsfiddle.net/rohitazad/XTVbu/8/](http://jsfiddle.net/rohitazad/XTVbu/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:41:09.007

使用`display:inline-block`代替`display:inline`

这是 jsfiddle [http://jsfiddle.net/rmL9s/](http://jsfiddle.net/rmL9s/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:02:34.637

你试过使用`display: inline-block`吗？

# ios - 我应该使用核心数据吗？

> ID：10170993
> 
> 赞同：0
> 
> 时间：2012-04-16T08:39:21.627
> 
> 标签：ios, ios5, ios5.1

我开发了一个应用程序，可以将整个数据集下载到一组对象中。我应该使用核心数据来存储数据吗？除了为用户提供一些离线数据外，还有其他优势吗？

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:21:35.617

信息这么少很难说。但是如果你需要在 iOS 中存储和访问一堆数据，Core Data 通常是一个不错的选择。

它显然比仅将数据存储在文件中（数组/字典可以将其内容写入磁盘）更复杂，但是您可以“免费”获得很多其他东西。不错的东西包括 NSFetchResultController 这意味着您可以用很少的代码将数据推送到表格视图中。它使撤消和事务之类的事情变得更容易。

另一种选择是直接使用 SQLite。如果您了解 SQL 并且您的数据结构不容易适应对象图（无论出于何种原因），或者您想要比 Core Data 提供的更多控制权，那么它可能是一个不错的选择。

# jqgrid - jqgrid - 在同一列的两行中动态加载不同的 colModel 编辑类型（文本框和复选框）

> ID：10170996
> 
> 赞同：0
> 
> 时间：2012-04-16T08:39:40.430
> 
> 标签：jqgrid

我正在做一些研发工作，在 JqGrid 的同一列的两行中显示不同的 colModel 编辑类型（文本框和复选框）。因为我需要根据后端数据库值为同一列显示不同的编辑类型。可以为不同的列显示不同的编辑类型。请帮助我完成我的研发工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:52:37.620

您没有解释您使用哪种编辑模式。问题的解决方案可能因编辑模式而异。

我建议您`edittype`在开始编辑行之前直接更改列的属性，例如值。

在表单编辑的情况下，您可以更改 call 内部的属性。在[答案](https://stackoverflow.com/a/3405961/315935)中显示了如何在`beforeShowForm`回调中显示隐藏某些列属性。[另一个答案](https://stackoverflow.com/a/7615331/315935)或[这个](https://stackoverflow.com/a/9081762/315935)`beforeInitData`答案是似乎最适合您的情况的用法示例。在`beforeInitData`您内部可以更改表单构建之前的**任何属性**。`colModel`

内联编辑的典型用法包括调用[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow) inside of`onSelectRow`或 inside of `ondblClickRow`。因此，可以使用[setColProp](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#add_on_grid_methods)方法，例如在使用*之前*更改列属性。[请参阅此处](https://stackoverflow.com/a/7732536/315935)和[此处](https://stackoverflow.com/a/4308172/315935)的示例。

# ios - 更改 NSFetchedResultsController 的 Fetch Request 和重新加载表数据的方法

> ID：10170997
> 
> 赞同：4
> 
> 时间：2012-04-16T08:39:43.187
> 
> 标签：ios, uitableview, nsfetchedresultscontroller, nsfetchrequest, reloaddata

从 apple doc [Modifying the Fetch Request](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)我看到可以更改`NSFetchRequest`for `NSFetchedResultsController`。步骤很容易设置。

调用后`performFetch:`我认为有必要调用`reloadData`表视图。如何执行这样的调用？

阅读了一些 stackoverflow 主题，我发现调用该方法在大多数情况下应该可以工作。但是有正确的方法吗？

在[如何以编程方式切换 UITableView 的 NSFetchedResultsController（或其谓词）？](https://stackoverflow.com/questions/3494095/how-to-switch-uitableviews-nsfetchedresultscontroller-or-its-predicate-progra)，**TechZen**写道：

> 只需确保在交换控制器之前发送 tableview 本身一个 beginUpdates ，然后在完成后发送一个 endUpdates 。这可以防止表在 FRC 被换出时在窄窗口中请求数据。然后调用 reloadData。

你能具体解释一下这是什么意思吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T21:55:30.983

假设生成正确提取（某种条件语句）的逻辑在您的 NSFetchedResultsController 实例的 getter 中。然后真的很容易

```
self.fetchedResultsController = nil; // this destroys the old one
[self.tableview reloadData]; 
// when the table view is reloaded the fetchedResultsController will be lazily recreated 
```

编辑：添加我所做的事情的完整代码示例。基本上我有一个 NSDictionary entityDescription，它保存值来自定义 NSFetchedResultsController 的创建。如果我想更改 fetchRequest，我更改我的 entityDescription 变量以指示新值并覆盖设置器以重置 fetchedResultsController 并重新加载表。它给了你基本的想法。

```
- (NSFetchedResultsController *)fetchedResultsController 
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }
    if (self.entityDescription == nil) {
        return nil;
    }
    // Set up the fetched results controller.
    // Create the fetch request for the entity.
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:[self.entityDescription objectForKey:kEntityName]];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    if ([[self.entityDescription objectForKey:kEntitySortField] isEqualToString:@"null"] == NO) {
        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:[self.entityDescription objectForKey:kEntitySortField] ascending:YES];
        NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];
        [fetchRequest setSortDescriptors:sortDescriptors];
    }

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest 
                                                                                                managedObjectContext:self.moc sectionNameKeyPath:nil cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}

- (void)setEntityDescription:(NSDictionary *)entityDescription
{
    _entityDescription = entityDescription;
    self.fetchedResultsController = nil;
    [self.tableView reloadData];
} 
```

# java - 正则表达式命令（删除除指定 txt 之外的所有内容）

> ID：10170998
> 
> 赞同：0
> 
> 时间：2012-04-16T08:40:10.457
> 
> 标签：java, regex

有没有人知道将采用以下字符串的正则表达式命令

```
 url = http://184.154.145.114:8013/wlraac name = wlr  samplerate = 44100 channels = 2       format = S16le 
```

并删除除以下内容之外的所有内容

```
 wlr 
```

这条线会出现多次，在 = 符号之后的所有内容都会发生变化，并且每次我想要保留的只是 name = 之后的内容

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:45:36.193

你可以做类似的事情

```
.*name =\s*(\w+).* 
```

并替换为第 1 组的内容

[在 Regexr 上](http://regexr.com?30lco)查看

我搜索“name =”和之前的任何内容。匹配以下`\s*`空格。

然后是`\w+`内括号。`\w`将匹配任何字符、数字和下划线（如果您使用该选项`Pattern.UNICODE_CHARACTER_CLASS`，否则它仅支持 ASCII）。由于括号，它存储在第一组中。

```
String in = " url = http://184.154.145.114:8013/wlraac name = wlr  samplerate = 44100 channels = 2       format = S16le";

Pattern r = Pattern.compile(".*name =\\s*(\\w+).*");
Matcher m = r.matcher(in);

String result = m.replaceAll("$1");
System.out.println(result); 
```

或者你的代码

```
String str = line2.replaceAll(".*name =\\S*(\\W).*", "$1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:47:14.947

根据您的描述，有点难以理解您需要什么。但是正则表达式是矫枉过正的。你应该像这样使用smth：

```
String s = myString.substring(myString.indexOf("name =")+6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:47:21.903

我建议你*提取*出现在之后的单词`=`，即

```
Pattern p = Pattern.compile("=\\s*(\\S+)");
Matcher m = p.matcher(str);
if (m.find()) {
    String value = m.group(1); // contains your wlr
    ...............
} 
```