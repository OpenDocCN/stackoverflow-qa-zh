# StackOverflow 问答 11834000-11834999

# php - php - 如何能够 ajax 发布并从此脚本返回？

> ID：11834000
> 
> 赞同：1
> 
> 时间：2012-08-06T18:43:14.473
> 
> 标签：php, jquery, ajax, proxy

我很困惑如何编辑这个脚本能够接受来自 jquery 的请求并将脚本返回的值返回给我？非常感谢任何帮助？

我可以使用它从文件系统传递一个 xml 文件和 url 并获得我期望的返回，但我真的希望能够将它用作 wsdl 服务的代理。

[编辑]由于环境变化，我想使用下面的脚本将来自我正在传递 xml 的 wsdl 服务的 xml 返回传回给我。当我从命令行执行此操作时，它工作正常 - 我只是不确定如何能够让脚本接受一个帖子，然后从服务调用返回 xml。

我在命令行中使用如下脚本：

```
php file.php theurl <test.xml 
```

^^ 返回给我的 xml 我想然后传回前端

```
<?php
ini_set('display_errors', "1");

$url= $argv[1];

echo "url\n$url\n";

preg_match("/https?:\/\/([^\/]*)(.*)/", $url, $matches);
$host=$matches[1];
$request=$matches[2];

$mxml=fread(STDIN,65536);
$yt =curl_init();
$header =   "POST $request  HTTP/1.0\r\n";
$header .=  "Host: $host\r\n";
$header .=  "SoapAction:";
$header .=  "Content-Type: text/xml\r\n";
$header .=  "Content-Length: ".strlen($mxml)."\r\n";
$header .=  "Content-Transfer-Encoding: text\r\n";
$header .=  "Connection-Close: close\r\n\r\n";

echo "header\n$header\n";

$header .=  $mxml;

curl_setopt($yt, CURLOPT_SSL_VERIFYPEER,0);
curl_setopt($yt, CURLOPT_URL, $url);
curl_setopt($yt, CURLOPT_CUSTOMREQUEST, $header);
curl_setopt($yt, CURLOPT_RETURNTRANSFER, true);

$rxml=curl_exec($yt);
echo "sent\n$mxml\n";
echo "received\n$rxml\n";

echo curl_error($yt);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:37:34.463

怀疑它。抱歉忘记发布答案。希望能帮助别人：

```
<?php
$url = 'http://myURL';
$xmlpost = file_get_contents('php://input');

$header =   "POST $url  HTTP/1.0\r\n";
$header .=  "Host: myHOST\r\n";
$header .=  "SoapAction: ''";

$ch = curl_init();

//Set the URL
curl_setopt($ch, CURLOPT_URL, $url);
//Enable POST data
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xmlpost);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $header);

//curl_exec automatically writes the data returned
$response = curl_exec($ch);
curl_close($ch);
echo $response;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:50:28.973

```
$.post('path/to/php/', function(data)
{
    $('body').append('<div id="outputs"></div>');
    $('#outputs').html($(data).find('name_of_xml_node').text());
}, 'xml'); 
```

也许..不能保证这一点，至少可能没有一些示例数据..这将是更多的示例，而不是实际基于您获得的 xml 数据..

此外，您希望您的 PHP 仅输出 XML，没有额外的字符串或其他类似的东西，这可能会破坏 XML 的格式

# android - 系统权限

> ID：11834003
> 
> 赞同：0
> 
> 时间：2012-08-06T18:43:25.283
> 
> 标签：android, permissions, installation

有没有办法在没有 root 的情况下访问 /system/app 或 /data/app 文件夹？我需要将我的应用程序安装到该文件夹​​中的可能性，但无需植根手机。

1.  如果我使用系统证书签署我的应用程序并获得系统许可，是否可以这样做？
2.  如何使用系统证书签署我的应用程序并获得系统权限？
3.  我的应用程序会在具有系统签名的非 root 设备上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:49:21.403

如果不植根您的设备或利用某种漏洞，则无法访问这些文件夹。要记住的一件事是，当您第一次安装应用程序时，它会直接转到`data/app/`. 需要注意的`system/app`是，这些是在设备上捆绑和保护的特定构建应用程序，无法删除。

# c# - 如何检索 IP v6 子网掩码长度

> ID：11834004
> 
> 赞同：10
> 
> 时间：2012-08-06T18:43:28.293
> 
> 标签：c#, .net, windows-7, registry, ipv6

我正在编写一个应用程序，它必须在 Windows 7 机器上获取网络适配器配置，就像在 Windows 网络适配器配置面板中所做的那样：

![在此处输入图像描述](../Images/b1b5000607a17bf4ad829d8dcb82ac62.png)

到目前为止，`NetworkInterface.GetAllNetworkInterfaces()` **除了子网前缀长度之外**，我几乎可以得到我需要的所有信息。

我知道可以通过 C++ struc 检索它，`PMIB_UNICASTIPADDRESS_TABLE`但`OnLinkPrefixLength`我试图留在.net 中。

我还查看了`Win32_NetworkAdapterConfiguration`WMI 类，但它似乎只返回 IP v4 子网掩码。

我也知道一些信息（据我所知不是前缀长度）在注册表中：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\TCPIP6\Parameters\Interfaces\{CLSID} 
```

我还使用 SysInternals ProcessMon 来尝试在保存网络适配器设置时获得任何有用的东西，但什么也没找到......

那么，是否有任何干净的 .NET 方法来获取此值？（从注册表中获取它不会有问题）

## 编辑：网关

这与实际问题无关，但对于那些需要检索整个网络适配器 IPv6 配置的人来说，该`IPInterfaceProperties.GatewayAdresses`属性仅支持 IPv4 网关。正如下面的答案评论中提到的，在 .NET 框架 4.5 之前获取整个信息的唯一方法是调用 WMI。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:08:06.310

您可以使用 Win32_NetworkAdapterConfiguration 执行此操作。你可能忽略了它。

IPSubnet 将返回一个字符串数组。使用第二个值。我没有时间编写一些 C# 代码，但我相信你可以处理它。使用 WBEMTEST，我拉了这个：

```
instance of Win32_NetworkAdapterConfiguration
{
    Caption = "[00000010] Intel(R) 82579V Gigabit Network Connection";
    DatabasePath = "%SystemRoot%\\System32\\drivers\\etc";
    DefaultIPGateway = {"192.168.1.1"};
    Description = "Intel(R) 82579V Gigabit Network Connection";
    DHCPEnabled = TRUE;
    DHCPLeaseExpires = "20120808052416.000000-240";
    DHCPLeaseObtained = "20120807052416.000000-240";
    DHCPServer = "192.168.1.1";
    DNSDomainSuffixSearchOrder = {"*REDACTED*"};
    DNSEnabledForWINSResolution = FALSE;
    DNSHostName = "*REDACTED*";
    DNSServerSearchOrder = {"192.168.1.1"};
    DomainDNSRegistrationEnabled = FALSE;
    FullDNSRegistrationEnabled = TRUE;
    GatewayCostMetric = {0};
    Index = 10;
    InterfaceIndex = 12;
    IPAddress = {"192.168.1.100", "fe80::d53e:b369:629a:7f95"};
    IPConnectionMetric = 10;
    IPEnabled = TRUE;
    IPFilterSecurityEnabled = FALSE;
    IPSecPermitIPProtocols = {};
    IPSecPermitTCPPorts = {};
    IPSecPermitUDPPorts = {};
    IPSubnet = {"255.255.255.0", "64"};
    MACAddress = "*REDACTED*";
    ServiceName = "e1iexpress";
    SettingID = "{B102679F-36AD-4D80-9D3B-D18C7B8FBF24}";
    TcpipNetbiosOptions = 0;
    WINSEnableLMHostsLookup = TRUE;
    WINSScopeID = "";
}; 
```

IPSubnet[1] = IPv6 子网；

编辑：这是一些代码。

```
StringBuilder sBuilder = new StringBuilder();
ManagementObjectCollection objects = new ManagementObjectSearcher("SELECT * FROM Win32_NetworkAdapterConfiguration").Get();
foreach (ManagementObject mObject in objects)
{
    string description = (string)mObject["Description"];
    string[] addresses = (string[])mObject["IPAddress"];
    string[] subnets = (string[])mObject["IPSubnet"];
    if (addresses == null && subnets == null)
        continue;
    sBuilder.AppendLine(description);
    sBuilder.AppendLine(string.Empty.PadRight(description.Length,'-'));
    if (addresses != null)
    {
        sBuilder.Append("IPv4 Address: ");
        sBuilder.AppendLine(addresses[0]);
        if (addresses.Length > 1)
        {
            sBuilder.Append("IPv6 Address: ");
            sBuilder.AppendLine(addresses[1]);
        }
    }
    if (subnets != null)
    {
        sBuilder.Append("IPv4 Subnet:  ");
        sBuilder.AppendLine(subnets[0]);
        if (subnets.Length > 1)
        {
            sBuilder.Append("IPv6 Subnet:  ");
            sBuilder.AppendLine(subnets[1]);
        }
    }
    sBuilder.AppendLine();
    sBuilder.AppendLine();
}
string output = sBuilder.ToString().Trim();
MessageBox.Show(output); 
```

和一些输出：

```
Intel(R) 82579V Gigabit Network Connection
------------------------------------------
IPv4 Address: 192.168.1.100
IPv6 Address: fe80::d53e:b369:629a:7f95
IPv4 Subnet:  255.255.255.0
IPv6 Subnet:  64 
```

编辑：我只是要澄清一下，以防有人稍后搜索。第二项并不总是 IPv6 值。IPv4 可以有多个地址和子网。在 IPSubnet 数组值上使用 Integer.TryParse 以确保它是 IPv6 子网和/或使用最后一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:13:08.107

使用参数解析 netsh 的输入流：

```
interface ipv6 show route 
```

希望这可以帮助！

# c# - 通过 SDK 从插件内部使用 ReSharper“呼叫跟踪”

> ID：11834008
> 
> 赞同：2
> 
> 时间：2012-08-06T18:43:50.960
> 
> 标签：c#, resharper-plugins

我正在为 ReSharper 7 编写一个插件，我希望能够从我的插件内部使用[呼叫跟踪](http://www.jetbrains.com/resharper/webhelp60/Code_Analysis__Call_Tracking.html)。我在 SDK 中没有遇到任何可以让我这样做的东西，这可能吗？

具体来说，我希望能够从我的`IRecursiveElementProcessor`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:28:51.360

ReSharper 中的“呼叫跟踪”是一种用户端功能，但不是用于其他功能的通用引擎。基本上它使用两个 API - Find Usages 和 Resolve。要查找方法或属性的用法（调用），您必须使用 IPsiServices:Finder 并查找从给定代码块调用的方法和属性，您必须使用 RecursiveElementProcessor 处理它的语法树，请求每个树节点的引用 ITreeNode:GetReferences( ) 并使用 IReference:Resolve 解析每个引用。您应该为这些操作使用的基本接口是： ITreeNode IReference IDeclaredElement IDeclaration

# java - 为什么意图不需要 ActivityNotFound 异常？

> ID：11834011
> 
> 赞同：0
> 
> 时间：2012-08-06T18:43:59.150
> 
> 标签：java, android, exception-handling, android-activity

我注意到在 Android 中似乎有点奇怪：如果未安装预期的应用程序/处理程序，则调用启动活动意图*可能会*引发 ActivityNotFound 异常，但在编码时没有警告。在编写文件读/写、网络等代码时，通常会给出警告，您必须将此函数标记为“抛出异常”，或者为某些异常添加try/catch。为什么活动意图不同？

此外，如果我将一个函数标记为“抛出 ActivityNotFoundException”，我仍然可以创建一个不会捕获此错误的调​​用者，它可以正常编译并且不会发出警告。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:02:22.430

没有给出警告的原因是因为不需要检查[`ActivityNotFoundException`](http://developer.android.com/reference/android/content/ActivityNotFoundException.html)extends 。`RuntimeException`正如@Rocky Triton 所说，谷歌使用它的原因是，因为对于开发人员来说，必须检查每一个*可能*引发异常的语句是一个巨大的痛苦。尽管[Java 不鼓励这样做](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)，但它仍然为开发人员省去了很大的麻烦。（我什至讨厌不得不捕获 I/O 异常......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T18:45:44.023

因为强制未经检查的异常是可怕的，我很高兴谷歌没有让你。

# android - 使用 AppWidgetManager 的 updateAppWidgetOptions 方法存储每个小部件的自定义选项

> ID：11834013
> 
> 赞同：7
> 
> 时间：2012-08-06T18:44:10.293
> 
> 标签：android, android-widget, sharedpreferences

*我对App Widget Options*有三个问题：

**1）**如果我想为应用程序小部件的选项添加选项值，我应该始终首先检索小部件选项，`getAppWidgetOptions(int)`然后操作`Bundle`，否则当我调用时，`updateAppWidgetOptions(int appWidgetId, Bundle options)`我会覆盖其他现有选项，对吗？

**2）**此选项是否在重新启动后仍然有效？即，如果我在配置活动中存储与小部件相关的一些信息，我确定即使在重新启动后我也能找到它们？系统会*自动*将它们保存在某个地方吗？

**3）**这比在*共享首*选项中存储小部件选项更快吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T07:09:35.323

`updateAppWidgetOptions`是供启动器调用以将信息传递给小部件。小部件以`onAppWidgetOptionsChanged`. 小部件不以这种方式存储信息，如果它们尝试，它们将被启动器覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:14:43.423

1.  是的，我想是的。如果你想确定，我想你应该测试一下。

2.  我不这么认为。您需要像 SQLite DB 或 Shared Preferences 这样的持久存储才能在重启后继续存在

3.  也许，因为它是基于内存的（SharedPrefs 是基于文件的）。

# java - 为什么按这个顺序输出？

> ID：11834015
> 
> 赞同：2
> 
> 时间：2012-08-06T18:44:17.860
> 
> 标签：java, overriding

```
abstract class A {

    public void methodA() {
        System.out.println("methodA");
        methodB();
        showName();
    }

    public abstract void methodB();

    public void showName() {
        System.out.println("in showname base");
    }
}

class B extends A {

    public void methodB() {
        System.out.println("methodB");
    }

    public void showName() {
        System.out.println("in showname child");
    }
}

public class SampleClass {

    public static void main(String[] args) {
        A a = new B();
        a.methodA();
    }
} 
```

输出是：

> showname child 中的
> methodA methodB

**问题 ：-**

由于在覆盖中，考虑了对象类型。是不是 B 类的 showName() 方法被称为不是 A 类的原因？如果不是，那么这个输出顺序的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T18:55:33.810

您创建了一个 B 类型的对象，因此对该对象调用的所有方法都将在 B 类上。如果 B 类没有实现某些方法（如方法 A），那么 Java 会尝试在父类 (A) 中查找方法。您应该阅读面向对象语言中的多态性：

[http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T18:54:59.720

这很简单：

```
 A a = new B();
    a.methodA(); 
```

这里知道a是`B`类的对象，所以类中所有可以被覆盖的方法`B`都是从类中使用的，`B`如果没有覆盖，则`A`必须使用类中的方法。

考虑顺序：

您调用`methodA`的声明为：

```
public void methodA() {
    System.out.println("methodA");
    methodB();
    showName();
} 
```

从`methodA()`你的内部调用`methodB()`和`showName()`。它们在 class 中被覆盖`B`，而 object a 是`instanceof B`，所以这就是使用它们（来自 B 类）的原因。

**编辑**如评论中所述：

@Jaikrat Singh，B 类仍然是 A 类（它的子类，但继承是类型的关系： IS-A ）。类`B`继承了`A`类的方法。所以它也有`methodA`。所以最好说，这`methodA`也是从类中调用的，`B`但使用的是默认代码 - 与类中提供的相同`A`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T18:55:11.690

当对象“a”被声明为类型 A 时，它被实例化为类型 B。多态性导致调用实例类型的方法而不是声明类型的方法，因此因为它在内部属于类型 B，所以 showName( ) 类 B 的方法被调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T19:00:07.350

当你调用时`a.methodA()`，由于你的对象类型是`B`，它会`methodA`先查找`B`。由于 中没有这样的方法`B`，它会在它的超类中寻找这个方法，即`A`. `methodA`在 class中找到`A`，它将开始执行。

执行时，它会打印`methodA`并开始寻找下一个被调用的方法（`methodB`），该方法在`B`类中实现，然后它会打印`methodB`。

下一个调用的方法是`showName`，它在两个类中都实现了。由于 Java 将开始在与对象类型相同的类中寻找实现，因此它会在第一次尝试中找到 class `B`。

主要规则很简单：Java 将首先尝试在**对象**类型类（运算符后面的名称`new`）中查找方法。如果该方法没有在那里实现，它将开始向上通过超类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T18:56:09.737

你有抽象类`A`，它被扩展了`B`。扩展相当于`B "is a" A`. 例如，如果苹果扩展水果，`apple 'is a' fruit`. 它的作用就像水果，但也能做香蕉做不到的苹果事情。所以`B`行为与 相同`A`，但也可以做其他事情。因此，在您的示例中，您`B`覆盖了两种方法。`B`默认情况下，每个对象都会调用它们。为了`A`从 a 访问 's 方法`B`，您需要使用关键字`super`。

它是多态性的一部分（Java 编程中的一个关键点），一个对象首先会找到它自己的任何方法（即使它们是从父级覆盖的），然后它会爬上继承树来找到一个不存在的方法直接在那个班级。

对于您的示例：

```
public void methodA() {
    System.out.println("methodA"); //This prints no problem.
    methodB(); //This searches the "B" class for a method called "methodB"  If it can't find it, it checks its parent for a "methodB"
    showName();//This searches the "B" class for a method called "showName"  If it can't find it, it checks its parent for a "showName"
} 
```

上面的代码被调用。您知道很多（根据您所做的其他评论，我假设这一点。）一旦`methodB()`调用了该行，您的类型对象就会`B`检查整个 B 文件中的方法。`A`如果该方法不存在，它只会跳转到该方法。然后它会对`showName()`.

# c# - 将密钥添加到注册表进入与指定不同的文件夹

> ID：11834018
> 
> 赞同：1
> 
> 时间：2012-08-06T18:44:46.843
> 
> 标签：c#, registry, registrykey

我正在尝试在注册表中的卸载条目中创建一个键，`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`但是当我运行代码时，它会在其中创建它`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Wow6432Node\Microsoft\Windows\CurrentVersion`，我不明白它可能从哪里获取此路径。

下面是我正在使用的代码

```
private void addToRegistry(string installPath)
{
    using (RegistryKey parent = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall", true))
    {
        if (parent == null)
        {
            MessageBox.Show("Failed to open registry key. Installation cannot continue", "Registry Error", 
                MessageBoxButton.OK, MessageBoxImage.Error);
        }
        try
        {
            RegistryKey key = null;
            string appParent = "Boardies Email Server";
            parent.CreateSubKey(appParent);
            key = parent.OpenSubKey(appParent);
            //key = parent.OpenSubKey(appParent, true) ??
            //    parent.CreateSubKey(appParent);
            if (key == null)
            {
                MessageBox.Show("Failed to add registry entry. Error: nInstallation Aborted", "Registry Error", 
                    MessageBoxButton.OK, MessageBoxImage.Error);
                throw new Exception();
            }

            Assembly asm = GetType().Assembly;
            Version version = asm.GetName().Version;
            string exe = string.Format("{0}\\EmailServer.exe", installPath);

        }
        catch (Exception ex)
        {
            MessageBox.Show(string.Format("Failed to install, unable to insert into registry: {0}\n\nInstallation Aborted", ex.Message),
                "Registry Error", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    } 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:58:16.720

可能，您的应用程序是 32 位的，在 Windows x64 中，寄存器是虚拟化的，因此 32 位和 64 位应用程序可以共存并使用相同的寄存器键；所以您的应用程序会看到它正在这条路径中写入：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

但真的是写在这条路上：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Wow6432Node\Microsoft\Windows\CurrentVersion 
```

因此，理论上，如果您需要另一个 32 位应用程序的此类密钥，则应该不会有问题，因为它也会将此路径视为。

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T23:25:22.170

那是因为您必须在正确的顶层更改值。[您可以使用autoruns.exe](http://technet.microsoft.com/en-us/sysinternals/bb963902)识别正确的位置。它会为您指明正确的位置！

（请参阅下面的示例，其中我在 Windows 启动时禁用了文件系统检查）

![在此处输入图像描述](../Images/7c475c6594760eefaa23f1a19cf70e9b.png)

该工具不仅可以定位所有启动注册表项，还可以定位所有其他服务，包括第三方安装！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:53:29.573

它是一个[注册表重定向器](http://msdn.microsoft.com/en-gb/library/aa384232%28v=vs.85%29.aspx)。

尝试对[RegistryKey.OpenBaseKey 方法使用](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.openbasekey.aspx)[RegistryView 枚举](http://msdn.microsoft.com/en-us/library/microsoft.win32.registryview.aspx)，请参阅[RegistryView.Registry64](http://msdn.microsoft.com/en-us/library/microsoft.win32.registryview.aspx)枚举成员。

顺便说一句，您可以允许您的程序作为 64 位进程运行，这样就不会有重定向： Project => Properties => Build 选项卡：将 Platform target 更改为*AnyCPU*。

# javascript - javascript文件下载

> ID：11834019
> 
> 赞同：3
> 
> 时间：2012-08-06T18:44:50.040
> 
> 标签：javascript, jquery, html

我需要下载一个文件（test.xml）并允许/提示用户在单击下载按钮时保存文件。该文件位于 url "http://localhost/test/test.xml" 中。

我添加了html代码

```
<input type=button value="Download" onclick='javascript:download()/> 
```

和javascript代码是

```
function download() {
   var url = "http://localhost/test/test.xml";
       window.open(url, 'Download');
} 
```

但这会在新窗口中打开页面。如何提示下载并保存文件。任何输入都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:10:15.797

使用初始代码，如果您有权访问后端，则在请求 xml 时，添加以下标头：

```
Content-disposition: attachment; filename=test.xml; 
```

另一种方法是使用 xmlhttprequest 来获取文件，然后使用 flash 插件来保存它。这个方法我用过一点，flash swf可以在[这里找到](https://github.com/dcneiner/Downloadify)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T18:47:21.597

您必须更改标题中的内容类型。您需要编写一些服务器脚本或配置您的网络服务器。

我在 Google 上搜索了一个链接，可以帮助您朝着正确的方向前进：http: [//www.booutell.com/newfaq/creating/forcedownload.html](http://www.boutell.com/newfaq/creating/forcedownload.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T00:20:24.297

将 xml 的响应标头的内容类型设置为`application/xml`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T19:02:03.030

html:

```
<input id="downloadthis" value="Download"/> 
```

在javascript标签内：

```
 $('#downloadthis').click( function() {
window.location.href = 'http://localhost/test/test.xml';
 } ); 
```

参考：[https ://stackoverflow.com/a/4864264/405117](https://stackoverflow.com/a/4864264/405117)

# xml - 从 Xpath 2.0 中的当前节点获取父级的父级

> ID：11834020
> 
> 赞同：12
> 
> 时间：2012-08-06T18:45:02.003
> 
> 标签：xml, xslt, xpath

我似乎总是对 xpath 轴表达式有疑问......

在某些表达式中，我曾经引用父节点，但这对表达式`../`无效吗？`test`还是我的语法错了？

```
<xsl:when test="../../[@status='current']"> 
```

我的目标是在`xsl:when`IF 中应用一个属性，父母的父母有一个值为“当前”的状态属性。

编辑：`self::parent/parent[@status='current']`是一个有效的 xpath 表达式，可能是我想要的，有人可以确认吗？我可能还不够远。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T18:51:31.410

问题出在`/[`. 您可以将其更改为

```
../../self::*[@status='current'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T21:00:28.787

比 choroba 和 Hansen 更简单的解决方案是

```
../..[@status='current'] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T19:22:34.947

您还可以使用以下内容：

```
parent::*/parent::*[@status='current'] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T01:50:58.873

**使用 Xpath 2.0**：

```
 ../../@status eq 'current' 
```

**使用 XPath 1.0*和*XPath 2.0**：

```
 ../../@status = 'current' 
```

# blackberry - 在黑莓中播放音频时发生异常

> ID：11834027
> 
> 赞同：0
> 
> 时间：2012-08-06T18:45:24.367
> 
> 标签：blackberry, java-me

```
try {
    Player p = javax.microedition.media.Manager.createPlayer("abc.mp3");
    p.realize();
    VolumeControl volume = (VolumeControl)p.getControl("VolumeControl");
    volume.setLevel(30);
    p.prefetch();
    p.start();
} catch(MediaException me) {
    Dialog.alert(me.toString());
} catch(IOException ioe) {
    Dialog.alert(ioe.toString());
} 
```

我使用上面的代码在黑莓中播放音频。但它给出了一个异常错误，如下所述。

```
javax.microedition.media.MediaException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:17:12.463

如果您查看[BlackBerry API 文档](http://www.blackberry.com/developers/docs/6.0.0api/javax/microedition/media/Manager.html#createPlayer%28java.lang.String%29)，您会看到`createPlayer()`您使用的版本：

> MediaException - 如果无法为给定定位器创建 Player，则抛出该异常。

它还说：

> locator - URI 语法中描述媒体内容的定位符字符串。

您的定位器 ( `"abc.mp3"`) 看起来不像是 URI 语法。您可以尝试将其更改为`"file:///SDCard/some-folder/abc.mp3"`.

或者，如果 mp3 文件是应用程序资源，我通常使用以下代码：

```
 try {
        java.io.InputStream is = getClass().getResourceAsStream("/sounds/abc.mp3");
        javax.microedition.media.Player p =
            javax.microedition.media.Manager.createPlayer(is, "audio/mpeg");
        p.realize();
        // get volume control for player and set volume to max
        VolumeControl vc = (VolumeControl) p.getControl("VolumeControl");
        if (vc != null) {
            vc.setLevel(100);
        }
        // the player can start with the smallest latency
        p.prefetch();
        // non-blocking start
        p.start();
    } catch (javax.microedition.media.MediaException me) {
        // do something?
    } catch (java.io.IOException ioe) {
        // do something?
    } catch (java.lang.NullPointerException npe) {
        // this happened on Tours without mp3 bugfix
    } 
```

# javascript - 将 $.getJSON 返回的数据与字符串进行比较

> ID：11834042
> 
> 赞同：0
> 
> 时间：2012-08-06T18:46:11.220
> 
> 标签：javascript, jquery

您好，我有以下代码：

```
$.getJSON('requestOnServer', {
    param1: value1,
    param2: 'value2'
}, function(result) {
    alert(result.attr.attr);
    if (result.attr.attr == "some String") {

        // do something
    } else {
        // do something else
    }
});​ 
```

问题是，当我警告返回的字符串时，它会正确显示。但是当与 == 运算符比较时，即使两个字符串相同，它也不会在第一个 if 语句中返回 true。

那么如何正确比较返回的数据和字符串呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:01:45.213

首先，您需要确定 typeof result.attr.attr，如果这是一个字符串（或任何其他类型），请使用 console.log() 或使用 alert() 并在其开头和结尾添加一些字符类似于 alert("======"+result.attr.attr+"======"); 这是批准@Kevin B 写的前后没有空格的简单方法。

# svn - 损坏的 SVN 存储库：svnadmin：格式错误的文件并且无法打开到 URL 的 ra_local 会话

> ID：11834044
> 
> 赞同：0
> 
> 时间：2012-08-06T18:46:19.657
> 
> 标签：svn, corrupt

我在一个项目上工作了几个月，并将文件存储在 SVN 存储库中。我在我的 DropBox (www.dropbox.com/) 文件夹上创建了存储库，这样我就可以在家里和实验室工作。但是最近，我的存储库损坏了。每当我尝试从存储库中签出文件时，我都会收到以下错误（还有一些其他项目运行良好）：

```
Couldn't open a repository
svn: Unable to open an ra_local session to URL
svn: Unable to open repository 'file:///Users/USER_NAME/Dropbox/svnrepos/PROJECT_NAME'
No such file or directory
svn: Can't open file '/Users/USER_NAME/Dropbox/svnrepos/PROJECT_NAME/db/uuid': No such file or directory 
```

然后我寻找从损坏的 SVN 存储库中恢复修订的解决方案。我试图转储存储库，但收到以下错误：

```
svnadmin: Malformed file 
```

uuid 文件为空，.../db/current 文件包含值 45。任何人都可以帮助我恢复我的修订。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:59:12.730

好消息是 Dropbox 将允许回滚到以前的版本。我也遇到过几次 SVN 的问题。

我的建议是：首先复制当前回购，这样它是安全的。然后尝试回滚 [with Dropbox] 到您遇到问题的前一天。您可以从 Dropbox 网络界面执行此操作。

此时，您必须复制 SVN 中的新文件并再次提交。

# html - 调整窗口大小使标题进入页面边框

> ID：11834048
> 
> 赞同：0
> 
> 时间：2012-08-06T18:46:37.097
> 
> 标签：html, css, xhtml

我正在尝试用我一直在学习的一点点技巧用 css 制作一个页面。我在页面顶部有标题，它看起来不错，但是当您调整窗口大小时，标题与我拥有的图像边框重叠。我刚刚发现，它在 Firefox 中显示效果不佳。我该如何解决这个问题？![在此处输入图像描述](../Images/dea547b3bcb45d7c3513398addfd489f.png)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTM HTML 4.0 Transitional//EN"
"http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>This is my website</title>
</head>
<style type="text/css">
body{
    background-image:url('bg-body.jpg');
    background-repeat: repeat;
    width:967px;
}
h1 {
    font-size: 40px;
    position:absolute;
    top: 47px;
    left: 27%;
    color:red;
}   
.venus {
    position:absolute;
    top: 160px;
    left: 44%;
}
#menu {
    position:absolute;
    top: 400px;
    left: 130px;    
    color:blue;

    height:500px;
    width:290px;
    background-color:#DCE1CA;
    border-top: 12px outset silver;
    border-left: 12px outset silver;
    border-right: 5px outset silver;
    border-bottom: 5px outset silver;
}
li {
    line-height:200%;
    font-size: large;
    list-style-type:none;
    list-style-image:none;

}
#textarea {
    position:absolute;
    top: 400px;
    left: 425px;    
    color:blue;
    text-align:left;
    height:500px;
    width:1149px;
    background-color:#DCE1CA;
    border-top: 12px outset silver;
    border-left: 12px outset silver;
    border-right: 5px outset silver;
    border-bottom: 5px outset silver;
}
</style>
<body>
<img src="sidebar.png" width="100%" height="2000px" class="sidebar" />
<h1>Welcome to my HTML/CSS/JavaScript Page</h1>
<img src="venus.jpg" width="200px" height="200px" class="venus" />

<div id="menu">
<ul>
<li>Mix of CSS & JS</li>
<li>Your Full Name</li>
<li>How Many Apples</li>
<li>Many Questions</li>
<li>Background Color</li>
<li>My Family Event</li>
<li>Images, Images</li>
</ul>
</div>
<div id="textarea">
Here is my story: I have been learning JavaScript and on the side I have been learning some CSS/HTML.
</div>
</body>
</html> 
```

![在此处输入图像描述](../Images/dc495b2694051bb3344ae999c7c68ba4.png)

![在此处输入图像描述](../Images/54a99fee277db4f04eb2376dd6ffdfd2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:56:18.837

我建议您将“sidebar.png”设置为背景图像，而不是`<img>`html 中的实际图像。`<img>`仅当它是实际内容时才应在 html 中使用，例如您的 venus.jpg。背景被认为是样式而不是内容。

那个beeing说我会尝试做这样的事情： [Fiddle](http://jsfiddle.net/GS5VJ/)

我已经将大部分解释放在 css 代码中，试图让事情变得清晰。也许它有点先进，但是既然你说你正在学习 css ... ;-)

使用这种“液体”设计的优点是角落图像不会像现在那样失真。您的标题在图像上运行的问题也将不再发生，这就是最终的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T18:53:20.160

尝试将宽度设置为 100% 而不是固定宽度，然后将背景位置设置为固定。看看是否有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:32:13.427

如果您担心重新调整页面大小时页面的外观，您应该按百分比设置高度、宽度和位置，而不是像素。当页面重新调整大小时，按百分比设置这些属性会缩放它们。

前任：`background-size: 100%;`

# javascript - 如何使用 Raphaël 旋转普通图像？

> ID：11834049
> 
> 赞同：0
> 
> 时间：2012-08-06T18:46:39.203
> 
> 标签：javascript, html, svg, raphael

这可能是也可能不是一个非常微不足道的问题，但话又说回来，我对这个 JavaScript 库完全陌生（即今天才开始阅读它）。究竟如何使用 Raphaël 在我的服务器上旋转一个简单的图像（png/jpeg 等）？需要先转成SVG吗？换句话说，我需要在[http://raphaeljs.com上复制](http://raphaeljs.com)[这个演示](http://raphaeljs.com/image-rotation.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:02:31.117

您可以将图像放在画布上并对其应用旋转变换。这是一个例子：

```
var paper = Raphael("thepaper", 300, 300);
var theImage = paper.image("http://i.stack.imgur.com/Zg08b.png", 0, 0, 128, 128);
theImage.transform("R45"); 
```

[你可以在这里](http://jsfiddle.net/vcsjones/eMgbz/4/)看到一个工作演示。

你可以很容易地通过应用动画来[制作动画](http://raphaeljs.com/reference.html#Element.animate)。将最后一行更改为：

```
theImage.animate({"transform": "R45"}, 10000); 
```

你可以看到它在[这里](http://jsfiddle.net/vcsjones/DxygP/1/)工作，它会在 10 秒内旋转 45 度。

# jquery - Knockout JS，TextArea 在数据绑定到 attr ID 时添加值

> ID：11834056
> 
> 赞同：1
> 
> 时间：2012-08-06T18:47:15.530
> 
> 标签：jquery, knockout.js, knockout-2.0

各位下午好。

我是淘汰 JS 的新手，所以如果这对你来说太容易了，请不要笑:(

我想在 textarea 的内容中添加一些我得到的文本，并且我还想保留我的数据绑定属性 ID。

任何人？

```
 <script type="text/html" id="A-Template">
        <tr>
        <td>
                <h3> Some text </h3>
                <textarea class="Some_Class"  data-bind="attr:{id: ID}"> 
                **data-bind="value: SomeText"** 
                </textarea>
        </td>
        </tr>
    </script> 
```

说我的 ID 是 4，而我的 Sometext 是“A LONG TEXT”

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:49:39.460

您可以对许多成员进行数据绑定，只需使用逗号分隔它们：

```
<textarea class="Some_Class"  data-bind="attr:{id: ID}, value: theText"> 
```

# c# - 布尔值似乎在改变自己 (XNA)

> ID：11834061
> 
> 赞同：1
> 
> 时间：2012-08-06T18:47:27.887
> 
> 标签：c#, xna, boolean

我目前正在我的 XNA 游戏中开发一个保存系统，该系统在完成保存时会触发一个事件。

我的游戏有多个由屏幕管理器管理的屏幕，每个屏幕都有自己的 Update 和 Draw 方法。

在构造函数中，我的 _newSave 布尔值被标记为 true，这个布尔值开始游戏保存过程（由助手管理），一旦开始该过程，它被标记为 false 以防止不断循环（因为我只想每个保存屏幕保存一次）。

当助手完成保存时，它会触发事件，返回到 SaveScreen 类中，该类将 _newSave 设置回 true，并告诉 ScreenManager 更改屏幕。

玩游戏似乎一切正常，直到第二次保存，当尝试保存时游戏冻结。值得注意的是，这个 bool 是私有的，并且只在这个方法中使用了显示的 4 次（找到了 Visual Studio 的用法来确认）

```
class SaveScreen : LoadingScreen
{
    private bool _newSave;
    private Player _player;

    public SaveScreen(EventHandler screenEvent, ContentManager Content, GraphicsDevice GraphicsDevice, Player player)
        : base(screenEvent, Content, GraphicsDevice)
    {
        screenTexture = Content.Load<Texture2D>("saving");
        _newSave = true;
        this._player = player;
        helper.FinishedSaving = new EventHandler(FinishedSaving);
    }

    public override void Update(GameTime gameTime)
    {
        if (_newSave)
        {
            helper.RequestSave(_player);
            _newSave = false;
        }

        helper.UpdateSaving();

        base.Update(gameTime);
    }

    private void FinishedSaving(object o, EventArgs e)
    {
        _newSave = true;
        screenEvent.Invoke(this, new EventArgs());
    }
} 
```

通过 FinishedSaving 事件中的断点，我确认 bool 正在更改为 true，这是正确的，但是，在 if 语句的下一个保存周期中的下一个断点显示 bool 为 false。

我对此感到非常困惑，因为唯一的 _newSave = false 语句位于需要为 true 才能访问的 if 语句中，事件内的断点表明它是 true，但在更新的第一个“新”循环中代码，它是错误的。

我真的把头发拉出来了，无法理解发生了什么。

非常感谢任何帮助，如果这很愚蠢，我很抱歉，我是一个相对较新的程序员:)

谢谢你！<3

编辑：整个 Helper.cs 类的 Pastebin：http: [//pastebin.com/uJ0g6e00](http://pastebin.com/uJ0g6e00)

加载屏幕类：pastebin.com/8W8HxBnq

屏幕类：pastebin.com/qr29gzuq

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:07:36.863

你在使用多个线程吗？如果是这样，我想知道这是否是竞争条件。

例如：

`Update`叫做

让我们假设这`_newSave`是真的

`RequestSave`叫做

在`RequestSave`返回之前，`Update`再次调用，但`_newSave`仍然是真的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:33:51.160

我发现了问题，向大家道歉浪费了他们的时间，并感谢您的帮助，结果证明只是切换_newSave；= false 和 helper.RequestSave(_player); 围绕解决问题的陈述，我认为问题仅在这个类中被隔离，因为它是发生变化的唯一地方，实际上问题是当玩家得分不大于时，我在 RequestSave 方法中调用了委托高分，这导致代码返回到 if 块，因为“_newSave = false;” 语句直接在方法调用之后，它将语句恢复为false！

我真傻，但有时真的很难看到简单的问题：P 再次感谢您！

<3

# linux - 启动 chromium 的 Bash 脚本，休眠 20 秒，然后安静地关闭

> ID：11834065
> 
> 赞同：4
> 
> 时间：2012-08-06T18:48:03.830
> 
> 标签：linux, bash

我正在尝试创建一个 bash 脚本来启动 chromium，等待 20 秒，然后关闭 chromium。

这是针对 xbmcbuntu 的，所以我可以打开一个站点，然后它会在 20 秒后自动关闭（因为我无法仅用遥控器关闭它）。

我所拥有的是：

```
#!/bin/bash
openbox &
/usr/bin/chromium-browser
sleep 20
killall -9 openbox 
```

Chromium 可以正常打开，但永远不会关闭。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:55:24.277

`openbox`你需要杀戮，而不是杀戮`chromium-browser`。

```
openbox &
openbox_pid=$!
/usr/bin/chromium-browser &
chromium_pid=$!
sleep 20
kill $chromium_pid
kill $openbox_pid 
```

`kill -9`除非绝对必要，否则不要使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T18:55:56.177

由于您没有将 chromium-browser 放在后台，因此 chromium-browser 命令之后的任何代码都不会执行，直到 chromium-browser 完成执行。这应该做你想要的：

```
#!/bin/bash
openbox &
openbox_pid=$!
/usr/bin/chromium-browser &
chrome_pid=$!
sleep 20
kill "$chrome_pid" "$openbox_pid" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T12:21:57.070

未经测试，仅是我的想法

`#`!/bin/bash 开箱 &

这里运行：script.any & #background 其中 script.any 权限被执行并包含： `#`!/bin/bash

/usr/bin/chromium-browser

# 从此脚本运行浏览器显示模式

睡眠 20 killall -9 openbox

对不起，我的英语不好 Anjoy ;)

# javascript - 在登录表单的 URL 中添加随机数的目的是什么？

> ID：11834075
> 
> 赞同：2
> 
> 时间：2012-08-06T18:49:07.433
> 
> 标签：javascript, web

将登录表单发布到服务器处理程序时，发送 math.random nocache 参数的确切目的是什么？

```
var email = encodeURI(document.getElementById('emailLogin').value);
var psw = encodeURI(document.getElementById('pswLogin').value);
// 设置要添加到 URL 请求的随机数
nocache = Math.random();
// 传递登录变量，如 URL 变量
http.open('get', 'login.php?email='+email+'&psw='+psw+'&nocache = '+nocache);

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T18:52:25.383

添加到请求中的随机数是为了强制浏览器加载以下页面结果，而不是潜在地显示可能已被较早请求缓存的页面结果。

对于它的价值——这似乎是一个非常不安全的身份验证器——除非 http.open() 发生在 HTTPS (SSL/TLS) 连接上。

# c# - 如何从另一个对象中的一个对象检索数据？

> ID：11834077
> 
> 赞同：0
> 
> 时间：2012-08-06T18:49:21.687
> 
> 标签：c#, .net

我创建了 3 个类，然后这 3 个类的对象在另一个类中创建。现在我想从数据库中读取数据。我的代码是：我正在从数据库中检索数据并从组合框中调用。

```
 SqlConnection conn = MyDB.GetConnection();
       string selectStm = "SELECT c.CourseID,en.Score,s.StudentID FROM EnrollmentTable en,Course c,Student s WHERE en.StudentID = s.StudentID AND en.CourseID = c.CourseID";

       SqlCommand command = new SqlCommand(selectStm, conn);
       //command.Parameters.AddWithValue("@StudentID", StudentID);

       List<StudentScore> aStudentScore = new List<StudentScore>();

       StudentScore score = null;

       try
       {
           conn.Open();
           SqlDataReader reader = command.ExecuteReader();

           Enrollment enr = new Enrollment();

           while (reader.Read())
           {
               score = new StudentScore();

               score.EnrollmentData.StudentData.StudentID = reader["StudentID"].ToString();//Here is the problem.
               score.EnrollmentData.CourseData.CourseID = reader["CourseID"].ToString();//Here is the problem.

               score.Score = Convert.ToInt32(reader["Score"]);

               aStudentScore.Add(score);
           }

           reader.Close();
           return aStudentScore;
       }
       catch (SqlException ex)
       {
           throw ex;
       }
       finally
       {
           conn.Close();
       } 
```

它没有任何价值....我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:16:04.177

如果您的`SELECT`语句没有返回任何行，那么您的数据有问题。要么`EnrollmentTable.StudentID`不匹配表中的任何记录，要么不匹配`Student`表`EnrollmentTable.CourseID`中的任何课程`Course`。

无论如何，我试图简化代码以便更容易阅读：

```
public class Student
{
    string studentID = string.Empty;
    public string StudentID
    {get { return studentID;}
     set { studentID = value;}}
};

public class Course
{
    string courseID = string.Empty;
    public string CourseID
    {get { return courseID;}
     set { courseID = value;}}
};

public class Enrollment
{
    Student studentData = new Student();
    public Student StudentData
    {get { return studentData;}
     set { studentData = value;}
    }
    Course courseData = new Course();
    public Course CourseData
    {get { return courseData; }
     set { courseData = value; }}
};

public class StudentScore
{
    Enrollment enrollmentData = new Enrollment();
    public Enrollment EnrollmentData
    {get { return enrollmentData;}
     set { enrollmentData = value;}}

    int score = 0;
    public int Score
    {get {return score;}
     set {score = value;}}
};

public List<StudentScore> getScoreList()
{
    List<StudentScore> aStudentScore = new List<StudentScore>();
    StringBuilder tmpSQL = new StringBuilder();
    tmpSQL.Append("SELECT c.CourseID, en.Score, s.StudentID ");
    tmpSQL.Append("FROM EnrollmentTable en ");
    tmpSQL.Append("       INNER JOIN Student s ON en.StudentID = s.StudentID ");
    tmpSQL.Append("       INNER JOIN Course c ON en.CourseID = c.CourseID ");
    try
    {using (SqlConnection conn = MyDB.GetConnection()){
       conn.Open();
       using (SqlCommand command = new SqlCommand(tmpSQL.ToString(), conn)){
         using (SqlDataReader reader = command.ExecuteReader()){
           while (reader.Read())
             {
              StudentScore score = new StudentScore();
              score.EnrollmentData.StudentData.StudentID = reader["StudentID"].ToString();
              score.EnrollmentData.CourseData.CourseID = reader["CourseID"].ToString();
              score.Score = Convert.ToInt32(reader["Score"]);
              aStudentScore.Add(score);
              };
            };
         };
      };
    }
    catch (Exception ex)
    {throw ex;}
    return aStudentScore; 
} 
```

# php - 如何将 zval 转换为向量以进行 php 扩展？

> ID：11834078
> 
> 赞同：6
> 
> 时间：2012-08-06T18:49:36.123
> 
> 标签：php, c++, php-extension, php-internals

我正在为我的 c++ 库编写一个 php 扩展，它的定义如下：

```
bool getPids(map<string,string> pidsMap, vector<string> ids); 
```

现在，我正在为上述函数编写一个 php 包装器，如下所示。

```
ZEND_METHOD(myFInfo, get_pids)
{
    zval *idsArray;

    if (zend_parse_parameters( ZEND_NUM_ARGS() TSRMLS_CC, "a",
                                &idsArray ) == FAILURE )
    {
        RETURN_NULL();
    }
} 
```

现在我想调用 getPids()，但我不知道将 idsArray 作为向量传递给 c++ 函数的正确方法。

在网上搜索后，我找到了一个迭代 zval 数组以读取每个值的示例，我想也许我可以使用它来创建一个向量。

```
PHP_FUNCTION(hello_array_strings)
{
    zval *arr, **data;
    HashTable *arr_hash;
    HashPosition pointer;
    int array_count;
    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "a", &arr) == FAILURE) {
        RETURN_NULL();
    }

arr_hash = Z_ARRVAL_P(arr);
array_count = zend_hash_num_elements(arr_hash);

php_printf("The array passed contains %d elements", array_count);

for(zend_hash_internal_pointer_reset_ex(arr_hash, &pointer); zend_hash_get_current_data_ex(arr_hash, (void**) &data, &pointer) == SUCCESS; 

zend_hash_move_forward_ex(arr_hash, &pointer)) {

            if (Z_TYPE_PP(data) == IS_STRING) {
                PHPWRITE(Z_STRVAL_PP(data), Z_STRLEN_PP(data));
                php_printf("
    ");
            }
        }
        RETURN_TRUE;
    } 
```

但这是最好的方法吗？还是有更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:04:41.137

要从 PHP 数组中填充 a `std::vector<std::string>`，我会这样做（简短版本）：

```
std::vector<std::string> vec;
HashTable *arr_hash = Z_ARRVAL_P(arr);
zval **arr_value;
for(zend_hash_internal_pointer_reset(arr_hash);
    zend_hash_get_current_data(arr_hash, (void **)&arr_value) == SUCCESS;
    zend_hash_move_forward(arr_hash))
{
    vec.push_back(Z_STRVAL_PP(arr_value));
} 
```

...`arr`您的输入在哪里`zval *`，并且`vec`是您的输出向量。

# cookies - 无 Cookie 域 - 不工作

> ID：11834087
> 
> 赞同：1
> 
> 时间：2012-08-06T18:50:44.087
> 
> 标签：cookies, cdn

我已经设置了一个免费的 cookie 域以用于 CDN。我已经运行了 YSlow，它说我应该使用一个无 cookie 的域。我检查了所有的 cookie，但看不到任何可以传递给无 cookie 域的内容。有没有办法找出有问题的 cookie 并得到明确的答案？

如果你想看看，网站是：[MyTechBlog](http://mytechblog.com)

免费的 cookie 域是：whealmedia.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:24:08.223

我认为 Yslow 在这里所说的是您正在使用来自其他域的资源，这些资源不是 Cookie Free。

例如：

```
http://stats.wordpress.com/e-201232.js

http://edge.quantserve.com/quant.js 
```

等等...

Yslow 将提供完整报告。

总帐。

# c# - 基于多列的 Fluent Cassandra 过滤

> ID：11834089
> 
> 赞同：1
> 
> 时间：2012-08-06T18:50:46.543
> 
> 标签：c#, filtering, fluentcassandra

我正在尝试将您的 Fluent Cassandra 用于我们的一个项目。但是我们的项目要求结果以分页的方式显示，并根据多列进行过滤。我看过 Nick Berardi 的基于一列（last_name）过滤的帖子。

```
 var results = familyname.Get(startKey: "key", keyCount: 30, family => family["last_name"] == "Smith")

    .Take(5)
    .FirstOrDefault()

    .AsDynamic() 
```

如何为 2 列实现相同的效果，例如“first_name”和“middle_name”。也可以翻译 SQL：

```
select user where "first_name" like %Nick% AND/OR "last_name" like %Berardi% 
```

在 Fluent Cassandra 中工作。我真的被卡住了。您的帮助将不胜感激。

# c# - 如何检查本地主机

> ID：11834091
> 
> 赞同：40
> 
> 时间：2012-08-06T18:50:52.390
> 
> 标签：c#, asp.net, .net

c# 中有没有办法检查应用程序是否在 localhost（而不是生产服务器）上运行？

我正在编写一个需要使用某个邮件队列的群发邮件程序，它在本地主机上运行。

```
if (Localhost)
{
Queue = QueueLocal;
}
else
{
Queue = QueueProduction;
} 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2015-05-28T17:10:40.093

由于[评论](https://stackoverflow.com/a/11834122/112397)有正确的解决方案，我将把它作为答案发布：

```
HttpContext.Current.Request.IsLocal 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-06T18:53:21.217

怎么样的东西：

```
public static bool OnTestingServer()
    {
        string host = HttpContext.Current.Request.Url.Host.ToLower();
        return (host == "localhost");
    } 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-06T18:53:56.527

在应用程序配置文件中使用一个值，该值将告诉您您所处的环境。

由于您使用的是 asp.net，因此您可以利用[配置文件转换](http://msdn.microsoft.com/en-us/library/dd465318.aspx)来确保每个环境的设置都是正确的。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-08-06T18:54:06.163

看看这是否有效：

```
public static bool IsLocalIpAddress(string host)
{
  try
  { // get host IP addresses
    IPAddress[] hostIPs = Dns.GetHostAddresses(host);
    // get local IP addresses
    IPAddress[] localIPs = Dns.GetHostAddresses(Dns.GetHostName());

    // test if any host IP equals to any local IP or to localhost
    foreach (IPAddress hostIP in hostIPs)
    {
      // is localhost
      if (IPAddress.IsLoopback(hostIP)) return true;
      // is local address
      foreach (IPAddress localIP in localIPs)
      {
        if (hostIP.Equals(localIP)) return true;
      }
    }
  }
  catch { }
  return false;
} 
```

参考：[http ://www.csharp-examples.net/local-ip/](http://www.csharp-examples.net/local-ip/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-06T19:59:37.213

本地主机 ip 地址是恒定的，您可以使用它来确定它是本地主机还是远程用户。

但请注意，如果您登录生产服务器，它也将被视为 localhost。

这涵盖了 IP v.4 和 v.6：

```
public static bool isLocalhost( )
{
    string ip = System.Web.HttpContext.Current.Request.UserHostAddress;
    return (ip == "127.0.0.1" || ip == "::1");
} 
```

要完全确定代码在哪个服务器上运行，您可以使用 MAC 地址：

```
public string GetMACAddress()
{
    NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();
    String sMacAddress = string.Empty;
    foreach (NetworkInterface adapter in nics)
    {
        if (sMacAddress == String.Empty)// only return MAC Address from first card  
        {
            IPInterfaceProperties properties = adapter.GetIPProperties();
            sMacAddress = adapter.GetPhysicalAddress().ToString();
        }
    } return sMacAddress;
} 
```

来自：[http ://www.c-sharpcorner.com/uploadfile/ahsanm.m/how-to-get-the-mac-address-of-system-using-Asp-NetC-Sharp/](http://www.c-sharpcorner.com/uploadfile/ahsanm.m/how-to-get-the-mac-address-of-system-using-Asp-NetC-Sharp/)

例如，与 web.config 中的 MAC 地址进行比较。

```
public static bool isLocalhost( )
{
    return GetMACAddress() == System.Configuration.ConfigurationManager.AppSettings["LocalhostMAC"].ToString();
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-12-13T08:42:27.690

不幸的是[`HttpContext.HttpRequest.IsLocal()`](https://github.com/aspnet/HttpAbstractions/blob/2476c4476218262fed4ab28e0f4cc17885b2df2b/src/Microsoft.AspNetCore.Http/Internal/DefaultHttpRequest.cs)，核心中不再存在。

但是在检查 .Net 中的[原始实现](http://referencesource.microsoft.com/#System.Web/WorkerRequest.cs,ab8517882440da8b)之后，很容易通过检查重新实现相同的行为[`HttpContext.Connection`](https://github.com/aspnet/HttpAbstractions/blob/2476c4476218262fed4ab28e0f4cc17885b2df2b/src/Microsoft.AspNetCore.Http/DefaultHttpContext.cs#L118)：

```
private bool IsLocal(ConnectionInfo connection)
{
    var remoteAddress = connection.RemoteIpAddress.ToString();

    // if unknown, assume not local
    if (String.IsNullOrEmpty(remoteAddress))
        return false;

    // check if localhost
    if (remoteAddress == "127.0.0.1" || remoteAddress == "::1")
        return true;

    // compare with local address
    if (remoteAddress == connection.LocalIpAddress.ToString())
        return true;

    return false;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-05T20:14:21.447

或者，如果您只是针对开发环境，您可以使用[C# 预处理器指令](http://msdn.microsoft.com/en-us/library/ed8yd1ha.aspx)（这是假设您的应用程序没有在生产中调试运行！）：

```
#if debug
Queue = QueueLocal;
#else
Queue = QueueProduction; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-23T18:27:20.360

像这样：

HttpContext.Current.Request.IsLocal

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-29T03:54:55.063

字符串主机名 = Request.Url.Host.ToString();

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-08T05:35:53.887

我知道这是真正的老线程，但仍然有人在寻找直接的解决方案，那么您可以使用它：

```
if (HttpContext.Current.Request.Url.Host == "localhost")
{
  //your action when app is running on localhost
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-22T04:57:34.173

这是另一种更透明的选择：

```
public static bool IsLocal
{
    // MVC < 6
    get 
    {
        var authority = HttpContext.Request.Url.Authority.ToLower();

        return authority == "localhost" ||
               authority.StartsWith("localhost:");
    }
    // MVC 6+
    get 
    { 
        return String.Compare(HttpContext.Request.Url.Host, "localhost", 
                              StringComparison.OrdinalIgnoreCase);
    }
} 
```

如果您**没有**在 then 中执行此操作，请`Controller`添加 `Current`after `HttpContext`，如`HttpContext.Current.Request...`

此外，在`MVC 6`，在`View`，`HttpContext`只是`Context`

# sql - T-SQL 创建用户/登录不允许连接

> ID：11834094
> 
> 赞同：1
> 
> 时间：2012-08-06T18:50:57.913
> 
> 标签：sql, sql-server, tsql

我正在尝试为本地运行的 SQL Server 2008 实例创建一个基本的纯文本密码登录和数据库用户。我正在使用以下 SQL 代码进行登录、添加用户并授予权限，但我无法使用 SSMS 或 SQLCMD 连接到服务器（当我使用我的域凭据和集成安全时，它工作正常）。

```
 USE <database_name>
 GO
 CREATE LOGIN aspLogin with password=N'pass1',
DEFAULT_DATABASE=<default_db>, CHECK_POLICY = OFF
 GO
 CREATE USER aspLogin FOR LOGIN aspLogin
 EXEC sp_addrolemember N'db_datareader', N'aspLogin'
 EXEC sp_addrolemember N'db_datawriter', N'aspLogin'
 GO
 USE master
 GO
 GRANT CONNECT SQL TO aspLogin 
```

使用 SQLCMD：

```
C:\>sqlcmd -S .\SQL -P pass1 -U aspLogin
Msg 18456, Level 14, State 1, Server <machine_name>\SQL, Line 1
Login failed for user 'aspLogin'. 
```

我错过了什么？这是使用“.\SQL”（这是实例的正确名称，而不是默认实例名称）的问题。例如，这很好用：

```
C:\>sqlcmd -S .\SQL -E
1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:01:54.463

确保启用混合模式身份验证。

[http://msdn.microsoft.com/en-us/library/ms188670(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms188670(v=sql.105).aspx)

您可以使用轻松检查身份验证模式

```
exec master.sys.xp_loginconfig 'login mode' 
```

# java - Java SQL 从日期中减去一个小时

> ID：11834098
> 
> 赞同：4
> 
> 时间：2012-08-06T18:51:39.850
> 
> 标签：java, sql, date, timestamp

我需要一个`java.sql.Timestamp`对应于一小时前的值。我在这里发生了一些与日期相关的事情，因此重要的是当前时间只采样一次，其余代码使用同一时间。至于设置`Timestamp`基于当前时间的毫秒。

操作`Calendar`对象似乎很笨拙，因为我必须做一些事情，比如在日历中添加和减去时间，这会修改它，所以我会很高兴先克隆自己一个副本或切换它的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T18:55:55.323

制作时间戳时只需从当前时间减去一个小时（以毫秒为单位）（1 小时 = 60 * 60 * 1000 毫秒）

```
Timestamp oneHourAgo = new Timestamp(System.currentTimeMillis() - (60 * 60 * 1000)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-17T21:56:56.057

# tl;博士

```
mySqlTimestamp.toInstant()
              .minus( Duration.ofHours( 1 ) ) 
```

# 避免旧的日期时间类

java.sql 类型仅用于与数据库交换数据。不要将这些用于业务逻辑。

麻烦的旧日期时间类现在被 java.time 类所取代。java.time 等价于[`java.sql.Timestamp`](https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html). [`java.time.Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)您甚至可以通过添加到旧类的新方法进行转换。

```
Instant instant = mySqlTimestamp.toInstant(); 
```

然后，您可以减去一个由 a 表示的小时`Duration`。

```
Duration d = Duration.ofHours( 1 );
Instant hourPrior = instant.minus( d ); 
```

请注意，这些类遵循[不可变对象](https://en.wikipedia.org/wiki/Immutable_object)模式。不是修改（“变异”）对象中的部分值，而是基于原始值实例化一个新对象。因此，另一个答案中讨论[的副作用没有问题。](https://en.wikipedia.org/wiki/Side_effect_(computer_science))并自动[线程安全](https://en.wikipedia.org/wiki/Thread_safety)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:00:49.853

您可以使用这样的功能：

```
Timestamp subtractOneHour(Timestamp stamp)
{
    long current = stamp.getTime();
    long substracted = current - 60 * 60 * 1000;
    return new Timestamp(substracted);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:04:25.990

`Calendar`除了弄乱一个对象之外，您还有一些选择-

1.  使用[Apache Date Utilities](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/time/DateUtils.html)，它基本上会`Calendar`为你弄乱一个（如果需要的话），但会返回一个新`Date`对象（所以，线程安全）。
2.  使用[Joda Time](http://joda-time.sourceforge.net/)处理日期/时间，这通常被认为是一个更好的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T18:57:50.407

查看此线程：[Java Timestamp - How can I create a Timestamp with date 23/09/2007？](https://stackoverflow.com/questions/974973/java-timestamp-how-can-i-create-a-timestamp-with-the-date-23-09-2007)

> 重要的是当前时间只采样一次，其余代码使用相同的时间。

我建议将时间分配给一个变量，然后重新使用同一个变量..

# html - html属性只是通过引用extjs的hidden属性来隐藏

> ID：11834101
> 
> 赞同：0
> 
> 时间：2012-08-06T18:52:00.353
> 
> 标签：html, extjs

我的 ExtJS 项目之一有问题。我有一个项目列表，其中大部分是带有图标的按钮，但一个是带有一点 html 的 href。每当禁用外部属性时，我想隐藏这些项目。

为此，在我一直在使用以下项目的项目中

```
hidden: !this.external.prop.enabled 
```

对于按钮，这很好用。启用道具时它们是可见的，禁用道具时它们完全隐藏。然而，使用 html 的项目每次都是隐藏的。即使我像这样将 hidden 设置为 false

```
hidden:false 
```

项目看起来像这样

```
 {
                xtype: 'box',
                margin:'5',
                autoEl:{
                    tag: 'a',
                    hidden: !this.external.prop.enabled,
                    href: BaseURL + Glue.uiConfig.url.launchProp,
                    html: 'Launch Prop'
                }
            }, 
```

这些项目都在同一个数组中，所以我不确定它们为什么表现出不同的行为。有没有人经历过这样的事情？我需要提供更多信息吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:06:02.357

把配置放在`hidden`外面`autoEl`。

# jquery - 网站加载时，视频会自行播放

> ID：11834102
> 
> 赞同：0
> 
> 时间：2012-08-06T18:52:06.257
> 
> 标签：jquery, fancybox

我遇到了一个非常奇怪的问题，即当我的网站加载时，视频会自行播放，当有人点击特定链接时，它应该以模式播放。视频将在大约 5 分钟后自行加载。

注意：我使用的是 chrome，当网站打开时，我没有点击网站上的任何内容，离开网站，大约五分钟后，视频会自行播放。

请让我知道如何解决此问题。谢谢，

**视频相关的代码部分：**

```
<div style="display:none;">
    <div id="divVideo" style="background:url(./images/blackbg.png);width:850px;height:480px;">
        <p>
            <iframe id="iframe-video" style="margin-top:40px;" src="http://player.vimeo.com/video/39892976?api=1&amp;byline=0&amp;portrait=0&amp;color=ff9933&amp;autoplay=1&amp;loop=0&amp;player_id=iframe-video" width="670" height="380" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
            <div class="fs16" style="margin-top:-15px;color:#5f5f60;">
                Having problems watching? Switch to non-HD
            </div>

        </p>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:10:35.183

更改`autoplay=1`为`autoplay=0`您的 iframe 网址。只要您在加载时页面上有 iFrame（存在于 html 中而不是稍后使用 javascript 添加），并且您有`autoplay=1`url，Vimeo 就会立即开始播放。

如果您正在寻找在用户打开模式时自动播放的视频，那么您将有一个更复杂的解决方案，因为您需要`autoplay=1`在 url 中，但在 html 中没有它，并且只在您的 javascript 文件中。

# iphone - 推送通知 - 应用更新

> ID：11834103
> 
> 赞同：0
> 
> 时间：2012-08-06T18:52:11.883
> 
> 标签：iphone, ios, push-notification

我们在应用商店中有一个支持推送的应用，我们希望发布更新。同一组证书 (SSL) 会起作用还是我们需要更新它们？苹果在文档中有这个吗？帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:57:10.580

您无需更新它们。您只需要区分应用程序的沙盒证书和生产证书即可。而且我认为您需要在一年后更新它们，但对此不确定。

# git - 致命：坏对象 xxx

> ID：11834108
> 
> 赞同：70
> 
> 时间：2012-08-06T18:52:32.373
> 
> 标签：git

我尝试使用以下命令恢复到以前的 git 提交：

```
git revert xxx 
```

我现在收到此错误作为响应：

```
fatal: bad object xxx 
```

我究竟做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-20T08:32:21.607

我不知道发生这种情况的确切原因。对我来说，这是因为我忘记将整个存储库拉到我的本地。我有 2 条或更多路径，每条路径都来自不同的分支

```
/path/branch_a/ -> pulled from branch A
/path/branch_b/ -> pulled from branch B 
```

在分支 A 上，我做了一些修改，并像往常一样提交。我希望提交（例如提交 ID 是`abcdef123`）出现在分支 B 上，所以我使用

```
$ cd /path/branch_b/
$ git branch
  master
  branch_a
* branch_b 

$ git cherry-pick abcdef123 
```

这给了我这种错误。所以我需要在提交之前提取整个存储库

```
$ git pull
remote: Counting objects: 257, done.
remote: Compressing objects: 100% (58/58), done.
remote: Total 216 (delta 187), reused 186 (delta 158)
Receiving objects: 100% (216/216), 53.13 KiB | 43 KiB/s, done.
Resolving deltas: 100% (187/187), completed with 38 local objects.
From github.com:username/my_repo
   abcdef3..80c0d68  branch_a    -> origin/branch_a
Already up-to-date.

$ git cherry-pick abcdef123 
[branch_b ccddeef] Some commit message
1 file changed, 1 insertion(+), 1 deletion(-) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-06T19:17:51.707

[**编辑 1，2016 年 11 月 19 日**] 虽然这有时表明存储库损坏，但事实证明，当某些命令（通常是另一个任务中的另一个 Git）保持内部文件打开并锁定时，它会在 Windows 上发生。在这种情况下，终止其他任务应该可以修复它。原始答案如下。

[**编辑 2，2020 年 5 月 6 日**] 假设`xxx`上面类似于`b34789c0b0d3b137f0bb516b417bd8d75e0cb305`（原始哈希 ID）。如果您是通过剪切和粘贴获得的，请确保它是针对*此*存储库的（很容易从其他存储库中获取哈希 ID 而不会意识到这一点，尤其是在您打开多个窗口的情况下）。如果您自己重新输入，请确保没有任何拼写错误。如果这涉及子模块，请确保子模块是最新的。请参阅对问题的评论和一些答案，包括这个。

* * *

`bad object`带有一些十六进制数往往意味着标签中包含无效的参考号，但也可能发生在其他一些奇怪的情况下。例如，如果我这样做：

```
$ git tag foo
$ vi .git/refs/tags/foo 
```

并更改最后一个字符（在本例中从 6 到 5）并写出：

```
$ git log foo
fatal: bad object foo 
```

这里到底是什么`xxx`，它是从哪里来的？

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-02-23T19:02:57.293

在我的情况下，我是从另一个我没有拉的分支中挑选的，但我试图从 GH 复制提交的 ID（我在我挑选樱桃的地方没有这个）。

希望它有所帮助;-D

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-06-20T18:48:51.567

我在尝试从我的客户不知道的分支合并时遇到了同样的错误（坏对象 [hash]）。（类似于 PrzeoR 的情况，但我不需要拉动，而是需要获取）

在我的情况下，我需要运行 git fetch 以将我的客户端重新同步到服务器的状态。在此处发布此内容，以防有人以与我相同的方式到达此线程并且可以从这种见解中受益。

```
git pull
git cherry-pick [hash]
fatal: bad object [hash]
git fetch
remote: Counting objects: 8, done. (etc.)
From github.com:repo/branch
 * [new branch] branchname

git cherry-pick [hash]
[success] 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-12-25T05:40:52.457

`git fetch --all`

git fetch 命令将提交、文件和引用从远程存储库下载到本地存储库。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-09-06T12:27:58.067

> git 拉

或者

> git 获取原点

原因：如果您尝试挑选的提​​交 ID 在您的本地 git 中不可用，则可能出现此错误。

做一个`git pull`将解决这个问题。如果这还没有解决，请让共享提交 ID 的人将更改推送到`origin`并执行`git pull`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-12-01T14:19:47.223

**存储库中不存在的对象会给出该错误消息**

例如：

```
 git init
 touch a
 git add a
 git commit -m 0
 # This object is not in the repository.
 git show 1111111111111111111111111111111111111111 
```

至于导致问题的原因，如果没有最小的可重现示例，很难说。

子模块问题给了我一次这个错误。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-12T16:10:07.900

我在尝试挑选我从 GitHub 复制的哈希值的提交时遇到此错误。这个提交是在一个我没有拉的分支上，就像 PrzeoR 一样。

与 PrzeoR 不同，a 一`git fetch`开始并没有帮助，因为该分支已在 GitHub 上被删除。幸运的是，我能够找到相应的（关闭的）Pull Request 并在 GitHub 上恢复分支。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-06-27T17:01:28.343

您需要执行 git fetch 以获取与本地同步的最新提交

获取

然后做

git 还原

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-01-30T13:32:03.370

当本地存储有过时或损坏的分支时，可能会出现此问题。

删除文件`.git/refs/remotes/origin/xxx`（在进行备份之后！）然后从服务器获取新副本对我有用。

[GitHub 上](https://github.com/desktop/desktop/issues/3838)的更多详细信息。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-04T06:07:44.643

我不确定我是如何得到这个错误的，这是我得到的错误。

```
fatal: bad object refs/remotes/origin/{branchname}
fatal: failed to run repack 
```

尝试通过`git gc --aggressive --prune=now`. 它没有帮助。

这个分支是陈旧的，对我来说并不重要，所以我删除了分支文件夹

`rm -rf .git/refs/remotes/origin/{branchname}`

跑了`git gc`

它成功地进行了对象枚举和清理。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-31T22:02:27.570

我遇到它的原因很简单。我在主存储库和子模块之间来回切换。我试图在一个哈希（在主存储库中）和另一个我从 SourceTree 复制的哈希之间进行比较，认为很容易获得旧的 HEAD（我已经回归了一个修订以追踪回归）。我抓取的旧 HEAD 哈希是子模块的哈希，并且`git diff`和我一起被放出来喂它垃圾。这就是我来到这里的原因，那时我意识到这是操作员错误。如果你的哈希来自不同的存储库，git 会用这条消息责骂你。但是，如果您确实给它喂垃圾，那么报告“XXX不是此存储库中的修订版”不是更好吗？它与“坏对象”一样普遍是一条错误消息，并且不太可能将某人发送到堆栈溢出以寻求答案。我想知道 git 社区中的人们是否会接受这个拉取请求......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-18T13:41:29.137

我在尝试挑选（在 A 上）另一个分支（B）的提交时遇到了同样的错误。问题很愚蠢，只是忘记了 git push 提交（B）。

# asp.net - 配置文件不是格式良好的 XML

> ID：11834111
> 
> 赞同：0
> 
> 时间：2012-08-06T18:52:44.963
> 
> 标签：asp.net, iis-7, codecharge

> HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

配置源部分内容如下：

```
35:     <add key="Miser_Rep_ETL_testString" value="/>
36:     <add key="Miser_Rep_ETL_testServer" value="MSSQLServer"/>
37:     <add key="Miser_Rep_ETL_testDateFormat" value="yyyy-MM-dd HH\:mm\:ss"/> 
```

第 36 行以红色突出显示。

该`web.config`文件与项目的其余部分一起由 CodeCharge Studio 5（设置为生成 ASP.NET C#）创建，所以我认为 XML 没有问题。由于这是一台新服务器（IIS 7.5），我怀疑其他可能（IIS）可能配置错误。如果将相同的项目部署为经典 ASP，则可以正常工作。任何建议都非常感谢..谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:02:55.117

问题在第 35 行：

```
<add key="Miser_Rep_ETL_testString" value="/> 
```

该`value`属性格式错误，应为：

```
<add key="Miser_Rep_ETL_testString" value=""/> 
```

请注意，我只是添加了一个`"`来包含一个空属性值。

# html - 语义：背景图像的空 div

> ID：11834112
> 
> 赞同：2
> 
> 时间：2012-08-06T18:52:45.213
> 
> 标签：html, semantic-markup

我知道一个空的 div 并不*完全*符合语义。但我想知道是否可以将它与背景图像一起使用来创建样式精美的阴影或其他效果来装饰“父”div。

（我也知道如何使用 CSS3 做到这一点，但由于显而易见的原因，这并不总是能奏效）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T23:38:56.060

它可能不是很好的样式，但从技术上讲，添加一个空`div`元素是有效的。

因为`div`不会添加或更改任何含义，所以使用空`div`不会干扰文档的语义。

当然，您应该使用 CSS 而不是`img`元素提供背景图像。

然而，也许你可以使用 CSS 伪元素来实现你想要的 deocation`after`呢`before`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:19:37.437

如果您想让 html 尽可能干净，那么最好的办法就是，好吧......不要管它并使用 CSS。如何？CSS 为您提供了一种使用两个特殊选择器将 [pseudo] 元素添加到 html 中的方法：:after 和 :before。看看这个小提琴：http: [//jsfiddle.net/joplomacedo/ubG5t/](http://jsfiddle.net/joplomacedo/ubG5t/)

css，如果你在小提琴中看不到它，看起来像下面这样：

```
body:after {
  content: " ";
  display: block;
  /* your styles */
} 
```

没什么大不了的。它所做的是在 body 元素的最末端（仍在其中）插入一个带有块显示的 [pseudo] 元素 - 就像 div 一样。你可以给它任何你喜欢的风格——再一次，这就像拥有一个普通的 div [1*]

内容的存在是为了让它发挥作用。你可以在里面放一些文本，它会出现在框中，或者你可以像我一样把它留空——但它必须在那里，否则，你就没有 div。

* *1 - 好吧，过渡并不能真正使用它，但除此之外......*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T09:20:09.053

```
<style>
.element div:empty{
    background: #red;
    height:15px;
    width:15px;
} 
</style>

<div class="element">
<div>not empty</div>
<div></div>
</div> 
```

# powerpoint - 如何使用 VSTO PowerPoint 处理 HTML 文本格式

> ID：11834117
> 
> 赞同：4
> 
> 时间：2012-08-06T18:53:02.127
> 
> 标签：powerpoint, vsto, powerpoint-interop

我目前正在使用 VSTO 在 C# 中创建一个 powerpoint 文件。我的问题是我需要在文本框中显示 HTML 格式的文本：

```
PowerPoint.Shape descriptionTitle = slide6.Shapes.AddTextbox(xxx);
descriptionTitle.TextFrame.TextRange.Text = "<b>html string</b>"; 
```

有什么办法可以显示我的字符串？

# qt - 使用 Qt for symbian 创建 RFCOMM 服务器

> ID：11834127
> 
> 赞同：1
> 
> 时间：2012-08-06T18:53:30.723
> 
> 标签：qt, bluetooth, symbian, rfcomm, qt-mobility

我是 Qt、Symbian 设备和蓝牙的新手。

我必须设置一个 RFCOMM 服务器来接收来自仅支持 SPP 配置文件的蓝牙设备（它是一个密码键盘）的连接。

我在谷歌上搜索并找到了一些示例，如下所示：[http ://doc.qt.nokia.com/qtmobility/btchat.html](http://doc.qt.nokia.com/qtmobility/btchat.html)

尝试了一切，但我无法连接它们。两台设备都已配对，但当我尝试连接时失败。

当我询问制造商时，他们说这是因为我手机上的 SPP 服务器无法监听传入连接。

我正在创建 RFCOMM 服务器并像示例一样注册服务，但它仍然无法正常工作。

有人可以帮助我吗？

我正在使用 Qt 和 QtMobility 1.2.0，我的手机是诺基亚 500 (Symbian^3)。

这是我的代码：

```
void bluetooth::startServer()
{
   QString deviceName;
   QBluetoothLocalDevice localDevice;

   if (rfcommServer)
      return;

   localDevice.powerOn();

   localDevice.setHostMode(QBluetoothLocalDevice::HostDiscoverable);

   deviceName = localDevice.name();

   rfcommServer = new QRfcommServer(this);

   connect(rfcommServer, SIGNAL(newConnection()), this, SLOT(vConectou()))  ;

   if( rfcommServer->listen(localDevice.address(), 
                             quint16(rfcommServer->serverPort()) ) )
      emit vExibeMsg("Listening"); 
   else
      emit vExibeMsg("Error"); 

   serviceInfo.setAttribute(QBluetoothServiceInfo::ServiceRecordHandle, 
                             (uint)0x00010010);

   QBluetoothServiceInfo::Sequence classId;

   classId << QVariant::fromValue(QBluetoothUuid(QBluetoothUuid::SerialPort));

   serviceInfo.setAttribute(QBluetoothServiceInfo::ServiceClassIds, classId);

   serviceInfo.setAttribute(QBluetoothServiceInfo::ServiceName, tr("Test Server"));
   serviceInfo.setAttribute(QBluetoothServiceInfo::ServiceDescription, 
                             tr("Test Bluetooth"));
   serviceInfo.setAttribute(QBluetoothServiceInfo::ServiceProvider, deviceName );

   serviceInfo.setServiceUuid(QBluetoothUuid(QBluetoothUuid::Rfcomm));

   serviceInfo.setAttribute(QBluetoothServiceInfo::BrowseGroupList, 
                             QBluetoothUuid(QBluetoothUuid::PublicBrowseGroup));       

   QBluetoothServiceInfo::Sequence protocolDescriptorList;
   QBluetoothServiceInfo::Sequence protocol;

  /* 
   protocol << QVariant::fromValue(QBluetoothUuid(QBluetoothUuid::L2cap));
   protocolDescriptorList.append(QVariant::fromValue(protocol));

   protocol.clear();

   protocol << QVariant::fromValue(QBluetoothUuid(QBluetoothUuid::Rfcomm))
            << QVariant::fromValue(quint8(rfcommServer->serverPort()));

   protocolDescriptorList.append(QVariant::fromValue(protocol));

   protocol.clear();

   protocol << QVariant::fromValue(QBluetoothUuid(QBluetoothUuid::SerialPort));

   protocolDescriptorList.append(QVariant::fromValue(protocol));
  */ 

   protocol << QVariant::fromValue(QBluetoothUuid(QBluetoothUuid::Rfcomm))
            << QVariant::fromValue(quint8(rfcommServer->serverPort()));

   protocolDescriptorList.append(QVariant::fromValue(protocol));

   serviceInfo.setAttribute(QBluetoothServiceInfo::ProtocolDescriptorList, 
                              protocolDescriptorList);

   if( serviceInfo.registerService() )
   {
      emit vExibeMsg("Waiting for connections...");
   }
   else
   {
      emit vExibeMsg("Error to create the service");
   }
} 
```

# coldfusion - Coldfusion CFHTTP.Responseheader

> ID：11834128
> 
> 赞同：3
> 
> 时间：2012-08-06T18:53:33.797
> 
> 标签：coldfusion, coldfusion-9

我疯了，试图弄清楚如何阅读`cfhttp.responseHeader`. 我正在尝试访问一个在响应中发送几个 cookie 的网站。我需要从响应中提取它们。然后将 cookie 值与所有未来请求一起发送。我尝试使用以下代码：

```
<cfloop collection = #cfhttp.responseHeader# item = "httpHeader">
  <cfset value = cfhttp.responseHeader[httpHeader]>
    <cfif IsSimpleValue(value)>
      <cfoutput>
      #httpHeader# : #value#<BR>
      </cfoutput>
<cfelse>
      <cfloop index = "counter" from = 1 to = #ArrayLen(value)#>
       <cfoutput>
        #httpHeader# : #value[counter]#<BR> 
       </cfoutput>
 </cfloop>
</cfif> 
```

但这会引发以下错误

```
Object of type class coldfusion.util.FastHashtable cannot be used as an array  

The error occurred in C:/inetpub/wwwroot/cfdocs/Response.cfm: line 22

20 :     </cfoutput>
21 :   <cfelse>
22 :     <cfloop index = "counter" from = 1 to = #ArrayLen(value)#>
23 :       <cfoutput>
24 :         #httpHeader# : #value[counter]#<BR> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:25:32.380

您可以像这样检索 cookie：

```
<cfset cookies = cfhttp.responseHeader["set-cookie"] />

<cfdump var="#cookies#" /> 
```

然后，您可以使用该 cookie 结构数据来发出后续请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T21:46:49.283

这是我使用 Ben Nadel 网站上的参考资料制作的用于获取标头 cookie 的脚本。

```
public struct function GetResponseCookies(required struct Response){
    var LOCAL = {};
    LOCAL.Cookies = {};

    if(!StructKeyExists(ARGUMENTS.Response.ResponseHeader,"Set-Cookie")){
        return LOCAL.Cookies;
    }

    LOCAL.ReturnedCookies = ARGUMENTS.Response.ResponseHeader[ "Set-Cookie" ];

    if(!isStruct(LOCAL.ReturnedCookies)){
        return LOCAL.Cookies;
    }

    for(LOCAL.CookieIndex in LOCAL.ReturnedCookies){
        LOCAL.CookieString = LOCAL.ReturnedCookies[ LOCAL.CookieIndex ];

        for(LOCAL.Index =1; Local.Index != ListLen( LOCAL.CookieString, ';' ); LOCAL.Index++){
            LOCAL.Pair = ListGetAt(LOCAL.CookieString,LOCAL.Index,";");
            LOCAL.Name = ListFirst( LOCAL.Pair, "=" );

            if(ListLen( LOCAL.Pair, "=" ) > 1){
                LOCAL.Value = ListRest( LOCAL.Pair, "=" );
            } else {
                LOCAL.Value = "";
            }

            if(LOCAL.Index EQ 1){
                LOCAL.Cookies[ LOCAL.Name ] = {};
                LOCAL.Cookie = LOCAL.Cookies[ LOCAL.Name ];
                LOCAL.Cookie.Value = LOCAL.Value;
                LOCAL.Cookie.Attributes = {};
            } else {
                LOCAL.Cookie.Attributes[ LOCAL.Name ] = LOCAL.Value;
            }
        }
    }
    return LOCAL.Cookies;   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T10:17:46.500

问题是您试图遍历一个结构，但将其视为一个数组。您需要使用“集合”来循环结构。

```
<cfloop collection="#cfhttp.responseHeader['set-cookie']#" item="sKey">
    .....
</cfloop> 
```

# oracle - 使用 pl/sql 呈现 html 并获取其源代码的最简单方法

> ID：11834129
> 
> 赞同：2
> 
> 时间：2012-08-06T18:53:34.120
> 
> 标签：oracle, plsql, oracle-apex

我正在使用[在线 oracle apex 工具](http://apex.oracle.com/pls/apex/f?p=4500:1000:682831272909901)。我想获取我想要的任何页面的 html 源代码；说 www.google.com。我试过了：

```
select httpuritype('http://www.google.com').getclob() google from dual 
```

这段代码给了我 ORA-29273 ACL 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:47:46.360

不要打扰 apex.oracle.com。数据库 11g 具有网络 ACL，您需要被授予访问 ip/url/range 的权限。在那里尝试没有用，您没有执行该操作的必要权限。

# c# - 在多个 RadioButtonLists 中创建一个唯一的 RadioButton？

> ID：11834130
> 
> 赞同：1
> 
> 时间：2012-08-06T18:53:37.660
> 
> 标签：c#, asp.net

我有一个可以生成多个 RadioButtonLists 的中继器控件。但是，我只希望一次可以选择一个 RadioButton（在所有这些单选按钮中）。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:54:14.360

我记得以前读过另一个线程，并且有一个修复它。我保存了链接。

这是问题所在：http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;Q316495](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q316495)

这是解决方案： [http ://www.ifinity.com.au/Blog/EntryId/87/Simple-fix-for-Radio-Button-controls-in-an-ASP-NET-Repeater-using-jQuery](http://www.ifinity.com.au/Blog/EntryId/87/Simple-fix-for-Radio-Button-controls-in-an-ASP-NET-Repeater-using-jQuery)

我将寻找线程，看看那里是否有更多有用的信息。

# out-of-memory - 三星 Galaxy S3 的堆大小是多少？

> ID：11834131
> 
> 赞同：5
> 
> 时间：2012-08-06T18:53:37.660
> 
> 标签：out-of-memory, android-animation, heap-memory, galaxy

我有一个小动画 ( `AnimationDrawable`)，它由 9 帧组成，分辨率为 480x800。

当我在“旧”SGS1 上使用动画运行该活动时，一切都很好。现在我得到了 S3，完全相同的代码给了我一个`outofMemoryError`. 这不是我对 QuadCore/1GB RAM 手机的期望。当我降低动画的分辨率时，一切正常。

他们真的减少了内存/堆吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T23:33:00.210

检查 /system/build.prop 文件并查找“dalvik.vm.heapsize” - 这应该是每个应用程序进程允许的内存堆大小的值

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-23T19:02:49.420

在我运行 Android 4.1.2**的 S3 上，最大堆大小为 64MB**（67108864 字节）。

您可以通过拨打电话获得此号码`Runtime.getRuntime().maxMemory();`

我见过提到 256MB，但这很可能只适用`android:largeHeap`于在其清单文件中指定的应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T16:49:49.813

它的 256mb 库存 s3 。您应该在本机堆上处理位图，而不是使用 .InPurgeable 选项

# javascript - 获取具有选择器值的属性

> ID：11834133
> 
> 赞同：1
> 
> 时间：2012-08-06T18:53:54.493
> 
> 标签：javascript, jquery, html

```
<input type="text" value="Here" id="aaa"> <br />
<span id="check">check</span>

$('#check').click(function(){
   alert($('input [value="Here"]').attr('id'));
}) 
```

[http://jsfiddle.net/mHYsJ/](http://jsfiddle.net/mHYsJ/)

为什么这不起作用？如何使用选择器 VALUE 获取属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:55:12.203

您不应该在元素和属性选择器之间使用空格，目前您的选择器尝试在输入元素中查找具有属性`value='here'`的元素，请尝试以下操作：

```
$('#check').click(function(){
   alert($('input[value="Here"]').attr('id'));
}) 
```

[演示](http://jsfiddle.net/mHYsJ/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T18:55:13.317

去掉空格应该是：

```
alert($('input[value="Here"]').attr('id')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T18:55:37.117

删除选择器中的空格。

```
$('input[value="Here"]').attr('id') 
```

这个空间的意思是“的后代”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-13T13:32:58.760

这是一个有用的函数（取自[此处](https://github.com/jmas/html_widgets/blob/master/widgets.js~)），它获取包含指定属性值的所有元素：

```
var getAllElementsWithAttribute = function (attribute) {
    var matchingElements = [];
    var allElements = document.getElementsByTagName('*');
    for (var i = 0; i < allElements.length; i++) {
        if (allElements[i].getAttribute(attribute)) {
            matchingElements.push(allElements[i]);
        }
    }
    return matchingElements;
}; 
```

# css - 为一个视图或一组视图呈现特定样式表

> ID：11834141
> 
> 赞同：0
> 
> 时间：2012-08-06T18:54:23.650
> 
> 标签：css, ruby-on-rails

在我的视图目录中，我有两个文件夹，里面有文件。这些文件夹的标题`main`和`off-brand-main`. 我有类似但不同的 CSS 文件，需要分别与每个文件一起使用。这些 CSS 的标题`main.css`和`off-brand-main.css`.

我对如何调用各自的样式表以及在哪里进行调用感到困惑。我应该在控制器中执行此操作`def new`吗？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:00:40.933

在模板文件的部分（通常是“application.html.erb”）中，您可以使用条件来设置样式表以根据某些内容使用...

```
<Head>
  <% if ... %>
    <%= stylesheet_link_tag "main" %>
  <% else %>
    <%= stylesheet_link_tag "off-brand-main" %> 
```

条件可以是控制器（controller_name == 'something'）和/或动作（action_name == 'something'）。

# css - 如何关闭嵌套表的条带

> ID：11834144
> 
> 赞同：3
> 
> 时间：2012-08-06T18:54:37.773
> 
> 标签：css, twitter-bootstrap

我正在为我的项目使用 twitter 引导程序。

一个表格在其单元格中有另一个嵌套表格。外部表具有表条带类，它被继承到内部表。有没有一种简单的方法来停止内部表的继承，以便只有外部表是条带的？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T19:03:27.383

```
.table-striped table {
 /* Undo any styles from the table-striped class here */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-11T20:53:41.893

像这样创建您自己的类，并将其添加到您的表中：

```
.table-not-striped tbody tr:nth-of-type(odd) {
background-color: transparent!important;} 
```

请务必使用 !important 标志。不能把这个答案归功于 - 在 CodePly 上​​看到它。但是，我确实添加了 !important 标志。没有它，这是行不通的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:01:03.820

您可以覆盖内表的样式：

```
table > table {
/* inner table styles */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-18T15:53:09.657

```
.table-unstriped  > tbody > tr:nth-child(odd) > td,
.table-unstriped > tbody > tr:nth-child(even) > td {
 background-color: white;
} 
```

# file - 使用批处理文件移动文件名包含设定值的文件

> ID：11834145
> 
> 赞同：0
> 
> 时间：2012-08-06T18:54:51.827
> 
> 标签：file, batch-file, find

我有一组 PDF，我想要一个批处理文件来移动所有在文件名中具有设定值的文件。该值将存储在一个变量中并由另一个脚本生成。例如，如果文件名是“abc123abc.pdf”，并且您想移动名称中包含“123”的所有文件，它将移动该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:10:38.750

假设变量是一个被调用的 pdf_value 并且目录是 c:\pdf_dir

```
move *%pdf_value%*.pdf c:\pdf_dir 
```

# php - PHP服务器端包括

> ID：11834146
> 
> 赞同：-4
> 
> 时间：2012-08-06T18:54:55.460
> 
> 标签：php, include

我有一个包含以下内容的 PHP 文件：

```
<?php
$myflash  = $_GET["flashname"];
$mytitl   = $_GET["titlname"];
$myqgif   = $_GET["flashgif"];
$mytxt    = $_GET["txtname"];
?>

<?php
include('01.txt');
?> 
```

它正确显示。但是当我使用以下内容时：

```
<?php
include('<?php echo $mytxt; ?>.txt');
?> 
```

它不显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:56:43.363

```
?php
include('<?php echo $mytxt; ?>.txt');
?> 
```

不是有效的 PHP 语法...里面`<?php ?>`的代码已经是 PHP 代码。你不要在里面放更多的 php 标签。

您只想使用：

```
<?php
    include($mytxt . '.txt');
?> 
```

你有 PHP 代码的 php 标签，然后是一个包含语句。在该语句中，您连接两个字符串 (`$mytxt`和`.txt`) 以形成要包含的文件名。

请确保在包含之前清理您的输入。有人可以轻松更改 GET 参数，而您的脚本将`include`更改他们想要的任何文件。在包含之前，请确保该文件位于您想要的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T18:56:21.370

你不能在字符串中做回声。相反，您正在寻找字符串连接：

```
include( $mytxt . '.txt'); 
```

请注意，您必须进行清理`$mytxt`以避免[本地文件包含](http://hakipedia.com/index.php/Local_File_Inclusion)(LFI) 漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:57:18.363

```
<?php
include('<?php echo $mytxt; ?>.txt');
?> 
```

已经是PHP了。你不需要重新打开你的 php 标签。

```
<?php
include($mytxt . ".txt");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T18:57:21.610

它不显示任何内容，因为该[`include`](http://php.net/manual/en/function.include.php)函数将参数作为**文件名**和路径，而不是 PHP 代码。

如果你投入`echo $mytxt;`并`foobar.php`说它`include('foobar.php');`会起作用。但它以目前的形式毫无意义。

`01.txt`正在显示，因为它的内容（是`01.txt`一个文件）已加载到代码中。主要是因为它不是 PHP 代码，所以会被转储到浏览器中。Include 应该用于在我们的代码中执行其他 PHP 脚本。

# c - 是否可以检查程序是否（以及多久）在 Linux 下的 C 中调度/调度

> ID：11834153
> 
> 赞同：1
> 
> 时间：2012-08-06T18:55:13.900
> 
> 标签：c, linux, scheduling

我想知道一个程序/一个线程是否在 Linux 下的 C 中调度/调度，如果可能的话，多久调度一次。原因是我正在测量循环的运行时间并希望防止错误的结果。

这是一个最小的例子：

```
#include <stdio.h>

int times_dispatched() {
    // how to check?
    return 0;
}

int main() {
    int i, dummy = 0;
    for(i=0; i<10000000; i++) {
        dummy++;
    }

    printf("counted to %d; program was dispatched %d times\n", dummy, times_dispatched());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:33:42.350

在 Linux 上，您可以使用[getrusage](http://linux.die.net/man/2/getrusage)函数。

```
#include <sys/types.h>
#include <sys/time.h>
#include <sys/resource.h>

int times_dispatched(long *vol, long *invol) {
    struct rusage usage;
    int err;

    if ((err = getrusage(RUSAGE_SELF, &usage)) != 0) {
        return err;
    }

    *vol   = usage.ru_nvcsw;
    *invol = usage.ru_nivcsw;

    return 0;
} 
```

测试应用：

```
#include <stdlib.h>
#include <stdio.h>

#define LOOPS 100000000

static void loop(volatile unsigned int count) {
    while(count--) { }
}

int main(void) {
    long vol, invol;

    loop(LOOPS);

    if (times_dispatched(&vol, &invol) != 0) {
        fprintf(stderr, "Unable to get dispatch stats");
        exit(1);
    }
    printf("Context switches: %ld voluntarily, %ld involuntarily\n",
        vol, invol);

    return 0;
} 
```

来自[Ideone](http://ideone.com/kxaAg)的输出：

```
Context switches: 3 voluntarily, 283 involuntarily 
```

PS我想知道为什么它显示非零自愿开关，可能是因为使用了Ideone......在我的桌面上它总是为零，正如预期的那样。

# jquery - 从 jQuery POST 请求自动下载

> ID：11834158
> 
> 赞同：1
> 
> 时间：2012-08-06T18:55:27.397
> 
> 标签：jquery, ajax, post, download

我有一个 jQuery click 事件，它向生成 XLS 文件的 PHP 脚本发出 POST 请求。PHP 脚本返回适当的标头。当手动设置发布变量并请求 RAW 时，我看到一切都正常返回。我什至可以在萤火虫的控制台中看到这一点。然而，自动“保存或打开”下载框并没有出现。我不能简单地这样做：

```
window.location = ./path/to/generator.php 
```

因为返回的 XLS 取决于传递的 POST 变量。我怎样才能实现类似的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:00:15.210

我不认为你真的可以。尝试将 POST 发送到您的 PHP 脚本，生成文件并将其保存在缓存中。使用缓存 ID 响应客户端，并重定向客户端，使其发出新的 GET 请求。发送带有修改后的标头的缓存文件。

# ruby - 如何处理 Ruby 1.9.3 CSV 类中的字符编码异常？

> ID：11834162
> 
> 赞同：4
> 
> 时间：2012-08-06T18:55:33.030
> 
> 标签：ruby, csv, ruby-1.9.3

在 ruby​​ 1.9.3 之前，我能够使用 Ruby 的 CSV 库摄取包含编码不正确的字符的行：

```
require 'csv' 
CSV.open('file').each |row|
   ... #deal with wrong encoded characters here 
end 
```

Ruby 1.9.3 中的 CSV 引发了带有“坏”行的异常——`ArgumentError: invalid byte sequence in UTF-8`我无法弄清楚如何在块内捕获。我看到两种解决方案，都很慢：

# 1\. ~8 倍慢：

> ```
> open('file').each |line|
>   begin
>      CSV.parse(line)
>    rescue ArgumentError
>      line.encode!('UTF-16', 'UTF-8', :invalid => :replace, :replace => '?')
>      line.encode!('UTF-8', 'UTF-16')
>      CSV.parse(line)
>    end
> end 
> ```

# 2\. ~2 倍慢

在将文件发送到 CSV 之前修复文件中的编码。

处理包含“坏”字符的行的更快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T09:00:37.553

```
CSV.open("file", "r:bom|utf-8").each |row|

end 
```

# c# - 存储预定义对象

> ID：11834163
> 
> 赞同：0
> 
> 时间：2012-08-06T18:55:34.510
> 
> 标签：c#, asp.net, oop, c#-4.0

我使用嵌套在静态类中的预定义对象将对象信息存储在单个位置，后来我在一些逻辑之后使用它们来使用预定义对象的属性填充普通对象。

你会怎么说这种方法很好，或者我可以通过其他一些有效和更好的方法来达到同样的效果？

```
//Example of storing predefined objects

 public static class RegistrationGift
    {
        public class InvitedRegistrationGift
        {
            public const int Token = 5;
            public const int Dollar = 0;

        }
    }

//how it will be used to populate credit entity (conversion)

Credit credit = new Credit();
credit.Token = RegistrationGift.InvitedRegistrationGift.Token;  

// and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:13:52.927

使用静态类不会带来大问题，但是单例模式可能更适合这种情况。

```
public class RegistrationConfig {
   // private static instance
   private static RegistrationConfig _instance = new RegistrationConfig()

   // private constructor prevents the class from being instantiated from outside
   private RegistrationConfig() { }

   // instance public accessor
   public static RegistrationConfig Current { get { return _instance; } }

   public int InvitationToken { get; set; }
   public int InvitationDollar { get;set; }
} 
```

消费：

```
var credit = new Credit();
credit.Token = RegistrationConfig.Current.InvitationToken; 
```

一种变体不是实现单例模式，而是保留 .Current 访问器并定义一个公共设置器，以便您可以更改活动配置。

```
public class RegistrationConfig {
   // current
   private static RegistrationConfig _current;

   // instance public accessor
   public static RegistrationConfig Current { get { return _current; } }

   // public setter
   public static void SetCurrent(RegistrationConfig current)
   {
       _current = current;
   }

   public int InvitationToken { get; set; }
   public int InvitationDollar { get;set; }
} 
```

然后，在应用程序启动时设置配置。

```
RegistrationConfig.SetCurrent(new RegistrationConfig() { ... }); 
```

并消费：

```
credit.Token = RegistrationConfig.Current.InvitationToken; 
```

优点是您可以创建具有预定义值的实例以使用，例如，在单元测试中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:59:24.690

[这感觉与称为Prototype](https://en.wikipedia.org/wiki/Prototype_pattern)的面向对象设计模式非常相似。由于您使用的是 C#，因此您可能希望让您的`Credit`对象实现`ICloneable`接口并返回您为填充信用条目而定义的原型对象的克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:07:30.980

这似乎是一个更适合抽象的场景。

根据实现的多样性，我会做这样的事情：

```
abstract class Credit
{
   protected int Token; 
   protected int Dollar;
}

class InvitedRegistrationGift : Credit
{
   public override int Token
   {
       get 
       {
           return 5;
       }
   }
}

Credit credit = new InvitedRegistrationGift(); 
```

# javascript - 为什么我的 observableArray 不工作？

> ID：11834165
> 
> 赞同：1
> 
> 时间：2012-08-06T18:55:36.693
> 
> 标签：javascript, knockout.js

嗨，我正在尝试使用 observableArray 进行 foreach，我得到：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: Nome is not defined;
Bindings value: text: Nome 
```

这是我的 HTML：

```
<table data-bind="foreach: funcionarios">
    <tr>
        <p>Nome: <span data-bind="text: Nome"></span></p>
        <p>Apelido: <span data-bind="text: Apelido"></span></p>
        <p>Hobby: <span data-bind="text: Hobby"></span></p>
        <p>Função: <span data-bind="text: Funcao"></span></p>
        <p>Ramal: <span data-bind="text: Ramal"></span></p>
        <p>Email: <span data-bind="text: Email"></span></p>
        <p>Celular: <span data-bind="text: Celular"></span></p>
        <p>Aniversário: <span data-bind="text: Aniversario"></span></p>
    </tr>
</table> 
```

这是我的JS：

```
var FuncionarioViewModel = function () {
    var me = this;

    function Funcionario(base, id, nome, apelido, hobby, funcao, ramal, email, celular, aniversario) {
        var me = this;

        me.Id = id;
        me.Nome = ko.observable(nome);
        me.Apelido = ko.observable(apelido);
        me.Hobby = ko.observable(hobby);
        me.Funcao = ko.observable(funcao);
        me.Ramal = ko.observable(ramal);
        me.Email = ko.observable(email);
        me.Celular = ko.observable(celular);
        me.Aniversario = ko.observable(aniversario);
    };

    me.funcionarios = ko.observableArray([]);

    me.add = function (id, nome, apelido, hobby, funcao, ramal, email, celular, aniversario) {
       me.funcionarios.push(new Funcionario(me, id, nome, apelido, hobby, funcao, ramal, email, celular, aniversario));
    };
}

var viewModel = new FuncionarioViewModel();
ko.applyBindings(viewModel); 
```

这是小提琴链接：http: [//jsfiddle.net/Lrqeb/8/](http://jsfiddle.net/Lrqeb/8/)

我不想使用该数组中的默认数据加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:02:51.997

编辑：

好的，刚刚检查了你的jsfiddle。我更新为使用`if`绑定来检查数组是否包含任何元素，然后再尝试`foreach`将停止绑定错误：

[http://jsfiddle.net/Lrqeb/6/](http://jsfiddle.net/Lrqeb/6/)

我用`foreach`以下内容包裹了你：

```
<div data-bind="if: funcionarios().length > 0"> 
```

编辑2：

此外，您已将 应用于`foreach`无法工作的表格标签。我将其更改为使用 tbody 标签，这在这里工作正常：http: [//jsfiddle.net/Lrqeb/10/](http://jsfiddle.net/Lrqeb/10/)

更改如下所示：

```
<div data-bind="text: funcionarios().length"></div>
<div data-bind="if: funcionarios().length > 0">
<table>
    <tbody data-bind="foreach: funcionarios">
    <tr>
        <td>Nome: <span data-bind="text: Nome"></span></td>
        <td>Nome: <span data-bind="text: Apelido"></span></td>
        <!-- and so on... -->
    </tr>
   </tbody>
</table> 
```

# wordpress - 显示特定 wordpress 角色的特定媒体

> ID：11834166
> 
> 赞同：1
> 
> 时间：2012-08-06T18:55:46.443
> 
> 标签：wordpress, roles, capability

我正在寻找有关如何仅向特定用户显示特定媒体的想法。

我已经为我想附加特定媒体文件的角色创建了一个新角色和功能。这样新角色的人只能查看已分配给它的媒体。

最后，我正在创建一个人们将登录以下载文档的页面。我希望动态地提取这些文档，但如果我无法弄清楚我在上面要求做什么，我只会将文档硬编码到页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:02:29.833

好吧...就仅向某些用户显示某些媒体而言...

我们可以检查他们在哪里查看他们的媒体，如果您只是在 WP-Admin 界面中谈论默认媒体库，那么我们可以检查 URL 以查看他们是否在媒体库页面上。

我们将（可能）将此代码放置在我们主题的functions.php 文件中，或者我们的插件中，与您的设计相对应。

```
//we need access to the $wp_query;
global $wp_query;

//now we build our function, we need to pass $wp_query into it
function manage_user_media($wp_query){

  //we check the location of the window
  if(strpos($_SERVER['REQUEST_URI'], '/wp-admin/upload.php') !== false ||
      strops($_SERVER['REQUEST_URI'], '/wp-admin/media-upload.php') !== false):

      //check if the logged in user has a capability of say...a level 5 user
      if(!current_user_can('level_5')):

          //this user does not have the capabilities of a level 5 user.
          //hijack the 'author' query var, so we can set it to the ID of our user
          $wp_query->set('author', get_current_user_id());

      endif;    

  endif;

} 
```

如果[您对 Wordpress 用户级别感到困惑，请查看 Codex 进行比较](http://codex.wordpress.org/User_Levels)。

这意味着，任何超过 5 级用户的人都可以看到**[ *ALL* ]**媒体元素，而低于 5 级用户的任何人都只能看到**[ *HIS OR HER* ]**媒体元素。

# ruby - Ruby：使用 Mocha 存根 HTTP POST 请求

> ID：11834170
> 
> 赞同：0
> 
> 时间：2012-08-06T18:56:04.870
> 
> 标签：ruby

我想用 Mocha 模拟 HTTP POST 请求。要测试的代码基本上看起来像

```
req=Net::HTTP::Post.new "whatever"
connection=Net::HTTP.new( "whatever", 80 )
result=connection.request( req ).body 
```

现在，如果这是 Java，我会绕过这个类，这样我就可以注入一些假的 HTTPRequest 对象等，我会没事的。这*真的*是我在 Ruby 中必须这样做的方式吗，因为显然整个 Internet 上没有人这样做过并发布了一个更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:36:40.327

你似乎想避免宝石，但我不能说足够好的关于[https://github.com/bblimke/webmock/](https://github.com/bblimke/webmock/)的事情。在尝试仅使用 Mocha 来存根/模拟网络请求时，我们也遇到了类似的痛苦。WebMock 感觉很熟悉并且效果很好。

# java - 为什么我不应该在我的类的构造函数中使用 Thread.start() ？

> ID：11834173
> 
> 赞同：4
> 
> 时间：2012-08-06T18:56:21.313
> 
> 标签：java, multithreading, constructor, thread-safety

我一直在寻找为什么不应该在类的构造函数中调用线程的 start 方法的理由。考虑以下代码：

```
class SomeClass
{
    public ImportantData data = null;
    public Thread t = null;

    public SomeClass(ImportantData d)
    {
        t = new MyOperationThread();

        // t.start(); // Footnote 1

        data = d;

        t.start();    // Footnote 2
    }
} 
```

ImportantData 是一些通用的东西（可能很重要），而 MyOperationThread 是线程的子类，它知道如何处理 SomeClass 实例。

脚节点：

1.  我完全理解为什么这是不安全的。如果 MyOperationThread 在以下语句完成之前尝试访问 SomeClass.data （并且数据已初始化），我将得到一个我没有准备好的异常。或者也许我不会。你不能总是用线程来判断。在任何情况下，我都会为以后奇怪的、意想不到的行为做好准备。

2.  我不明白为什么这样做是禁地。至此，SomeClass的所有成员都已经初始化完毕，没有调用其他改变状态的成员函数，构建就有效完成了。

据我了解，这样做被认为是不好的做法的原因是您可以“泄漏对尚未完全构造的对象的引用”。但是对象已经完全构造好了，构造函数只好返回了。我搜索了其他问题以寻找更具体的答案，并查看了参考资料，但没有找到任何说“你不应该因为这样那样的不良行为”的东西，只有那些说“你不应该。”

在构造函数中启动线程在概念上与这种情况有何不同：

```
class SomeClass
{
    public ImportantData data = null;

    public SomeClass(ImportantData d)
    {
        // OtherClass.someExternalOperation(this); // Not a good idea

        data = d;

        OtherClass.someExternalOperation(this);    // Usually accepted as OK
    }
} 
```

顺便说一句，如果课程是最后的怎么办？

```
final class SomeClass // like this
{
    ... 
```

我看到很多关于这个的问题和你不应该回答的问题，但没有一个提供解释，所以我想我会尝试添加一个包含更多细节的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T19:03:33.383

> 但是对象已经完全构造好了，构造函数只好返回了

是和不是。问题在于，根据 Java 内存模型，编译器能够*重新排序*构造函数操作，并在构造函数完成*后*实际完成对象的构造函数。 `volatile`or`final`字段*将*保证在构造函数完成之前被初始化，但不能保证（例如）您的`ImportantData data`字段将在构造函数完成时正确初始化。

**然而**，正如@meriton 在评论中指出的那样，在与线程和启动它的线程的关系之前发生了。在＃2的情况下，你很好，因为`data`必须在线程启动之前完全分配。这是根据 Java 内存模型保证的。

也就是说，将其构造函数中的对象的引用“泄漏”到另一个线程被认为是不好的做法，因为如果在*之后*添加了任何构造函数行，`t.start()`那么如果线程会看到对象是否完全构造，这将是一个竞争条件。

这里还有一些阅读：

*   这是一个值得阅读的好问题：[在其自己的构造函数中调用 thread.start()](https://stackoverflow.com/questions/84285/calling-thread-start-within-its-own-constructor)
*   [Doug Lea 的内存模型页面](http://gee.cs.oswego.edu/dl/cpj/jmm.html)讨论了指令重新排序和构造函数。
*   这是一篇关于[安全构造函数实践](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html)的精彩文章，其中更多地讨论了这一点。
*   这就是为什么[“双重检查锁定”问题](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)也存在问题的原因。
*   我对这个问题的回答是相关的：[这是对象的安全发布吗？](https://stackoverflow.com/a/10301179/179850)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T18:56:21.313

# 反对这种做法的理性的、以事实为导向的论据

考虑以下情况。您有一个运行调度程序线程的类，该线程将任务排队到数据库中，其编码方式与以下类似：

```
class DBEventManager
{
    private Thread t;
    private Database db;
    private LinkedBlockingQueue<MyEvent> eventqueue;

    public DBEventManager()
    {
        this("127.0.0.1:31337");
    }

    public DBEventManager(String hostname)
    {
        db = new OracleDatabase(hostname);
        t = new DBJanitor(this);

        eventqueue = new LinkedBlockingQueue<MyEvent>();
        eventqueue.put(new MyEvent("Hello Database!"));

        t.start();
    }

    // getters for db and eventqueue
} 
```

数据库是某种数据库抽象接口，MyEvents 是由任何需要向数据库发出更改信号的东西生成的，而 DBJanitor 是 Thread 的子类，它知道如何将 MyEvents 应用于数据库。正如我们所看到的，这个实现使用了组成的 OracleDatabase 类作为数据库实现。

这一切都很好，但是现在您的项目要求已经改变。您的新插件必须能够使用现有代码库，但还必须能够连接到 Microsoft Access 数据库。你决定用一个子类来解决这个问题：

```
class AccessDBEventManager extends DBEventManager()
{
    public AccessDBEventManager(String filename)
    {
        super();
        db = new MSAccessDatabase(filename);
    }
} 
```

然而，瞧，我们在构造函数中启动线程的决定现在又回来困扰我们了。在客户端糟糕的 700MHz 单核 pentium II 上运行，这段代码现在有一个*竞争条件*：每隔几次启动，创建一个数据库管理器将在创建数据库和启动线程时发送“Hello Database！” 事件*到错误的数据库。*

发生这种情况是因为线程在超类构造函数的末尾开始......但这不是构造的结束，我们仍然被子类构造函数初始化，它覆盖了一些超类的成员，所以当线程跳转时在向数据库分派事件时，它偶尔会在子类构造函数将数据库引用更新到正确的数据库之前进入。

## 至少有两种解决方案：

1.  您可以将您的课程设为最终课程，这将防止对其进行子类化。如果你这样做，你**可以确定**你的对象在暴露给任何其他对象之前已经完全构造好了（即使它还没有离开构造函数），从而**确定**不会发生像这样的奇怪行为。

    您还必须采取措施防止在构造函数中重新排序分配：您可以将线程将访问的字段声明为 volatile，或者您可以将它们包装在任何类型的同步块中。这两个选项中的每一个都对 JIT 编译器可以执行的重新排序施加了额外的限制，从而确保在线程访问字段时正确分配字段。

    在这种情况下，您可能会与您的老板争论，直到他允许您更改代码库，这将涉及将 DBEventManager 的构造函数更改为如下所示：

    ```
    private Thread t; // no getter, doesn't need to be volatile
    private volatile Database db;
    private volatile LinkedBlockingQueue<MyEvent> eventqueue;

    public DBEventManager()
    {
        this("127.0.0.1:31337");
    }

    public DBEventManager(String hostname)
    {
        this(new OracleDatabase(hostname));
    }

    public DBEventManager(Database newdb)
    {
        db = newdb;
        t = new DBJanitor(this);

        eventqueue = new LinkedBlockingQueue<MyEvent>();
        eventqueue.put(new MyEvent("Hello Database!"));

        t.start();
    } 
    ```

    如果您在开发早期就预见到了这个问题，那么您当时可能已经添加了额外的构造函数。然后，您可以使用 DBEventManager 安全地使用 Microsoft Access`DBEventManager(new MSAccessDatabase("somefile.db"));`

2.  您可以不这样做，而是使用其他普遍接受的方法，即使用单独的 start 方法和可选的静态工厂方法或调用构造函数然后调用 start 方法的方法，如下所示：

```
 public start()
    {
        t.start();
    }

    public static DBEventManager getInstance(String hostname)
    {
        DBEventManager dbem = new DBEventManager(hostname);
        dbem.start();
        return DBEventManager;
    } 
```

我很确定我是理智的，但第二个意见会很好。

# python - django 消息未显示

> ID：11834174
> 
> 赞同：5
> 
> 时间：2012-08-06T18:56:22.633
> 
> 标签：python, django, templates, view, messages

我正在尝试使用 django 消息框架在用户退出我的应用程序时显示消息。我是 django 新手，文档对我来说不是很清楚。为什么我的消息没有显示？

[https://docs.djangoproject.com/en/dev/ref/contrib/messages/#adding-a-message](https://docs.djangoproject.com/en/dev/ref/contrib/messages/#adding-a-message)

视图.PY

```
from django.contrib import messages

def signout(request):
    logout(request)
    messages.add_message(request, messages.INFO, 'Signout Successful.')
    return HttpResponseRedirect(reverse(index))

def index(request):
    lf = LoginForm()
    if request.method == "POST":
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                auth_login(request, user)
    return render_to_response('test/home.html', {'login_form': lf,}, context_instance=RequestContext(request)) 
```

模板 - 索引

```
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

我正在使用 django1.3。并且以下是必需的（注意 .tz 被注释掉了）

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    #"django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages") 
```

来自 TEMPLATE_CONTEXT_PROCESSORS 的文档：

Django 1.3 中的新功能：此版本中添加了 django.core.context_processors.static 上下文处理器。

Django 1.4 中的新功能：此版本中添加了 django.core.context_processors.tz 上下文处理器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T19:10:32.570

您是否添加了[上下文处理器和中间件](https://docs.djangoproject.com/en/dev/ref/contrib/messages/#enabling-messages)？

# python - 根据用户输入继承类

> ID：11834182
> 
> 赞同：0
> 
> 时间：2012-08-06T18:57:12.717
> 
> 标签：python

我有一个网络应用程序，最初我曾经`feedparser`从我的博客中提取数据。现在我想用它`Google API`来扩展其他各种功能。

由于我不想破坏我的旧代码并希望将新 API 添加为附加的附加类型的东西，所以我想设置一个非常类似于它提供根据情况`BeautifulSoup`选择解析器的选择的结构`HTML/ XML`

```
BeautifulSoup(markup, "html.parser") 
BeautifulSoup(markup, "lxml")
# They still support the same methods mentioned in the documentation. 
```

这就是我所做的：

```
from apis import api1, api2
from dev_user import my_api_choice
select = { "api1" : api1, "api2": api2 }

obj = pservice (select["my_api_choice"] )
obj.method1() 
# invokes method1 of the inherited class. 
```

`pservice`非常接近总结类。我最初想写它是因为我可以有机会在其中使用 Google API。

我什至确保 api2（提供 Google API 功能）提供与 api1 相同的方法（即使它们的方法名称相同）。

*那么，这是一个好方法吗？否则，我怎么可能以其他方式做到这一点..*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:14:03.783

您可以使用诸如or之类的方法创建一个`abstract class` `API`，并在/ / 等类下构建具体实现......`abstract``fetch``pull``inherit``API1``API2`

例如`fetch`，Google API`HTML`的`fetch`功能实现`feedparser`将使用`XML`...

现在根据您的要求或当前配置或任何输入；做出一个`API`你想要使用和创建的决定`dynamic instance`，现在因为方法名称在所有类中都是相同的，你只需要为此触发适当`function`的，`instance`你就完成了。

此外，之后您可以引入`API3`和更新您的配置 - 使用 API3 类实例作为另一个`content`提供者。

# performance - 在 iOS 上估计每秒 OpenGL 帧数的最佳方法是*不是* Apple 的仪器？

> ID：11834183
> 
> 赞同：0
> 
> 时间：2012-08-06T18:57:14.990
> 
> 标签：performance, opengl-es, instruments

我们有一个基于 Apple 的[GLCameraRipple](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html)示例的应用程序，它对来自 iOS 设备摄像头的视频进行实时图像处理。

Apple 的 Instruments 报告称 OpenGL 的运行速度约为 30-40fps（即每 25-30 毫秒一帧）。假设视频以 ~30fps 的速度被捕获和处理，这是有道理的。

但是，如果我们使用 mach_absolute_time 测量调用 glkView:drawInRect 之间的时间，则循环时间为 50 毫秒（约 20 fps）。该速率几乎是 Instruments 报告的一半。

那么 Apple 的 Instruments 是错误的（几乎 100%（！）） - 还是对 glkView:drawInRect 的计时调用错误？

似乎 Apple 的 Instruments 不准确，因为不是在每个绘制周期都调用 glkView:drawInRect 吗？

我们发现[其他人](http://www.iphonedevsdk.com/forum/iphone-sdk-tools-utilities/14874-recorded-milliseconds-fps-vs-instruments-fps.html)也注意到了同样的差异，但对于哪个实际上是正确的没有明确的答案。

为什么会出现差异？如果 Apple 的仪器有误 - 测量到 glkView:drawInRect 的往返时间是确定 FPS 的正确方法吗？

# php - CI 2.0 的 Eclipse PDT 和自动完成功能

> ID：11834187
> 
> 赞同：1
> 
> 时间：2012-08-06T18:57:26.023
> 
> 标签：php, eclipse, codeigniter

我正在按照本教程进行自动完成，它工作正常，除了 MY_X 的自动完成不起作用。

[http://taggedzi.com/articles/display/autocomplete-eclipse-codeigniter-2](http://taggedzi.com/articles/display/autocomplete-eclipse-codeigniter-2)

如何在 MY_X 类中启用自动完成功能？

MY_model 的代码例如：

```
class MY_Model extends CI_Model {

 public $auto_validate = TRUE; // use auto-validation before saving
 public $return_method = 'auto'; // object, array, query, auto
 public $auto_validate_fields = array(
  'email|email_address' => 'valid_email',
  'phone|phone_number' => 'valid_phone'
  ); // fields to auto validate
 public $required = array(); // required fields
 public $default_required_message;
 //public $default_required_message = "Please fill out the required field '%1s'"; // the default required validator message
 public $auto_date_add = array('date_added', 'entry_date'); // field names to automatically set the date when the value is NULL
 public $auto_date_update = array('last_modified', 'last_updated'); // field names to automatically set the date on updates
 public $date_use_gmt = FALSE; // datetime method
 public $default_date = 0; // default date value that get's passed to the model on save. Using 0000-00-00 will not work if it is a required field since it is not seen as an empty value
 public $auto_trim = TRUE; // will trim on clean
 public $auto_encode_entities = TRUE; // automatically encode html entities 
 public $xss_clean = FALSE; // automatically run the xss_clean
 public $readonly = FALSE; // sets the model to readonly mode where you can't save or delete data'
 public $hidden_fields = array(); // fields to hide when creating a form
 public $unique_fields = array(); // fields that are not IDs but are unique
 public $linked_fields = array(); // fields that are are linked. Key is the field, value is a function name to transform it
 public $foreign_keys = array(); // map foreign keys to table models

 protected $db; // CI database object
 protected $table_name; // the table name to associate the model with
 protected $key_field = 'id'; // usually the tables primary key(s)... can be an array if compound key
 protected $normalized_save_data = NULL; // the saved data before it is cleaned
 protected $cleaned_data = NULL; // data after it is cleaned
 protected $dsn = ''; // the DSN string to connect to the database... if blank it will pull in from database config file
 protected $has_auto_increment = TRUE; // does the table have auto_increment?
 protected $suffix = '_model'; // the suffix used for the data record class
 protected $record_class = ''; // the name of the record class (if it can't be determined)
 protected $rules = array(); // validation rules
 protected $fields = array(); // fields in the table
 protected $use_common_query = TRUE; // include the _common_query method for each query
 protected $validator = NULL; // the validator object

 /**
  * Constructor - Sets MY_Model preferences
  *
  * The constructor can be passed an array of config values
  */
 public function __construct($table = NULL, $params = array())
 { 
  parent::__construct(); 
  $this->default_required_message = lang('error_required_message').' \'%1s\''; // the default required validator message

  // load helpers here 
  $this->load->helper('string');
  $this->load->helper('date');
  $this->load->helper('security');
  $this->load->helper('language');

  $this->initialize($table, $params);
    }

 // --------------------------------------------------------------------

 /**
  * Initialize the user preferences
  *
  * Accepts an associative array as input, containing display preferences
  *
  * @access public
  * @param string the table name
  * @param array config preferences
  * @return void
  */ 
 public function initialize($table = NULL, $params = array())
 {
  if (!empty($table))
  {
   $this->table_name = $table;
  } 
  else 
  {
         $this->table_name = strtolower(get_class($this));
  }

  if (!empty($params))
  {
   foreach ($params as $key => $val)
   {
    if (isset($this->$key))
    {
     $this->$key = $val;
    }
   }
  }

  // if a DSN property is set,then we will load that database in
  if (!empty($this->dsn))
  {
   $this->db = $this->load->database($this->dsn, TRUE, TRUE);
  }
  else
  {
   // else we use the database set on the CI object
   if (empty($this->db))
   {
    $this->load->database($this->dsn);
   }
   $CI =& get_instance();
   if (isset($CI->db))
   {
    // create a copy of the DB object to prevent cross model interference
    unset($this->db);
    $this->db = clone $CI->db;
   }
   else
   {
    $CI->load->language('db');
    show_error(lang('db_unable_to_connect'));
   }
  }
  $this->validator = new Validator();
  $this->validator->register_to_global_errors = FALSE;

 }

 // --------------------------------------------------------------------

 /**
  * Returns the database object
  *
  * @access public
  * @return array
  */ 
 public function &db;()
 {
//   $this->_check_readonly();
  return $this->db;
 }

 // --------------------------------------------------------------------

 /**
  * Gets the short name minus the suffix
  *
  * @access public
  * @return array
  */ 
 public function short_name($lower = FALSE, $record_class = FALSE)
 {
  $class_name = ($record_class) ? $this->record_class_name() : get_class($this);
  $end_index = strlen($class_name) - strlen($this->suffix);
  $short_name = substr($class_name, 0, $end_index);
  if ($lower)
  {
   return strtolower($short_name);
  }
  else
  {
   return $short_name;
  }
 }

 // --------------------------------------------------------------------

 /**
  * Get the table name
  *
  * @access public
  * @return array
  */ 
 public function table_name()
 {
  return $this->table_name;
 }

..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:20:56.730

尝试这个：

1.  右键单击 PHP Explorer 中的顶级文件夹。
2.  选择“配置”菜单项，然后选择“添加 PHP 支持”

（[Eclpise 中的 PDT 自动完成功能中断](https://stackoverflow.com/questions/1827066/pdt-autocomplete-broken-in-eclpise?rq=1)）

试试这个：[Getting full auto complete with CodeIgniter in Eclipse](http://gostomski.co.uk/2010/01/getting-full-auto-complete-with-codeigniter-in-eclipse/)

# ios - iPad Retina Launch Image -- 只显示图像的上半部分

> ID：11834188
> 
> 赞同：1
> 
> 时间：2012-08-06T18:57:29.750
> 
> 标签：ios, ipad, retina-display

我为 iPad 视网膜显示器添加了启动图像。我使用所需的尺寸。

当应用程序在模拟器上运行时，启动图像看起来很好。在实际设备上运行时（测试 2 台设备，均为新 iPad（第 3 代）），仅显示图像的上半部分，屏幕的下半部分为黑色。

关闭启动图像后，一切都会正确显示。

如果我分配较小的（非 Retina）启动图像，它们会正确显示（尽管图像显然不清晰）。

有什么想法吗？

注意：这些是 2.4 MB png 文件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:40:13.117

您需要视网膜和非视网膜、风景和肖像的图像资产。使用此命名约定：

Default-Landscape~ipad.png, Default-Landscape@2x~ipad.png, Default-Portrait~ipad.png, Default-Portrait@2x~ipad.png

@2x 图像为视网膜分辨率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:00:11.077

显然图像文件已损坏。奇怪的是，它们在 Preview 和 Safari 中打开得很好，但由于某种原因在应用程序中没有打开。无论如何，我重新创建了图像，一切都很好。

# mysql - Rails 2.3：替换记录关联而不是删除

> ID：11834192
> 
> 赞同：0
> 
> 时间：2012-08-06T18:57:56.367
> 
> 标签：mysql, ruby-on-rails, ruby

所以这是一个普遍的问题：

我有 3 张桌子，为简单起见，我们称它们为 a,b,c

表一个
ID

表 b
id
a_id
c_id

表 c
id

因此 b 中的记录将 a 和 c 中的记录关联起来。

问题是：当用户提交表单时，会提交一些哈希值，每个哈希值代表 b 中需要填写的记录。现在我只是简单地删除和重新添加，我希望能够迭代现有的关联和（这就是它变得棘手的地方）如果数据库中的关联（D）比提交的（S）多，那么删除 DS 条目，如果 DS 相等则替换当前条目，如果 DS 为负数，则添加 SD 记录。

然后将它们全部更新为新的关联。

我尝试使用循环执行此操作，但问题是活动记录查询返回一个数组，我仍然有一个哈希要迭代。因为我不能让两个数组相互同步循环，所以我不确定从这里去哪里。有任何想法吗？

注意：我可以发布实际代码，但是处理此代码的控制器函数非常长。

* * *

编辑：我觉得我在这里不够具体，尽管我越来越确定这一切都必须是手动的，这是我正在寻找的一个粗略示例。

```
submitted_hash[:whatever].each do |key,value|
    #value.first_submit
    #value.second_submit
end

ModelName.find(:all, :conditions => ["fk_ref = ?", params[:fk_ref]]).each do |model_value|
end 
```

现在，如果“ModelName.find”返回的值比“submitted_hash”中的当前值多，那么我们需要创建更多引用来满足需要。

如果“ModelName.find”返回小于“submitted_hash”，那么我们将在数据库中添加差异，作为行。

如果它们相等，则不需要在这部分采取行动。

最后，我需要使用 ModelName.find(:all, :conditions) ，它现在应该返回与我们的哈希值相同的数量（我已经做到了这一点）。

现在不知何故，我需要同时遍历我们的 ModelName.find 和 params[:subbmited_hash]，以便记录 1 被提交 1 替换，然后记录 2 被提交 2 等等。

注意：所以我可以理解我的意图，我正在尝试做的是替换记录而不进行任何不必要的删除，如果有人提交 6 并需要 3，我的代码现在将删除 6，并添加3个新的。这可行，但每次更新时都会永久删除 6 行（在这种情况下）。我希望它删除 3（两个值的差异）并将剩余的 3 更新为新提交的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:39:51.667

您的文字对我来说不是很清楚，但是您可以寻找的最接近的东西是 mysql **replace**命令。

如果没有对应的行，它会插入一个新行，否则它会进行更新。

像这样：

```
 REPLACE INTO b (id, a_id, c_id) VALUES (5, 2, 3); 
```

参考：[http ://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

但它不会删除旧的无效条目。我认为您需要自己/手动完成。数据库不是这样工作的。

使用 ORM 框架可以做到这一点。我对rails一无所知，但也许这个页面可以帮助你：

[http://blog.gridworlds.com/rails/delete-or-delete-removing-things-in-rails](http://blog.gridworlds.com/rails/delete-or-delete-removing-things-in-rails)

或者尝试寻找rails“删除孤儿”

# php - Polycom Microbrowser 显示文本输入返回

> ID：11834193
> 
> 赞同：2
> 
> 时间：2012-08-06T18:58:04.147
> 
> 标签：php, html

我正在为 Polycom Phones 微浏览器编写 PHP 和 HTML。我想知道是否可以更改微浏览器的编辑活动模式的软键索引（当焦点在文本框中时）我也想知道是否可以设置数字输入或更改在文本输入中默认输入数字。

# c - 对 libxml2 的未定义引用，但适用于另一个 c 文件

> ID：11834195
> 
> 赞同：1
> 
> 时间：2012-08-06T18:58:14.850
> 
> 标签：c, xml, gcc, linker, libxml2

我使用 libxml 测试[了这个](http://www.xmlsoft.org/examples/parse1.c)简单的 c 文件，它工作正常，所以我知道我已经正确安装了 libxml。但是我厌倦了运行另一个只有这个包含语句的文件，`#include <libxml/xmlreader.h>`并且我得到了所有这些链接错误：

```
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlParseMemory@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlFree@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlStrcasecmp@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlStrdup@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderRead@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderConstName@LIBXML2_2.6.0'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderGetAttribute@LIBXML2_2.5.0'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlGetProp@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderDepth@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderConstXmlLang@LIBXML2_2.6.0'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlNodeListGetString@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlNewTextReaderFilename@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlFreeDoc@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderNodeType@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlGetLineNo@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlTextReaderName@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlKeepBlanksDefault@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlStrcmp@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlReaderForFd@LIBXML2_2.6.0'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgtksourceview-1.0.so: undefined reference to `xmlDocGetRootElement@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlFreeTextReader@LIBXML2_2.4.30'
/usr/lib/gcc/i686-linux-gnu/4.4.5/../../../../lib/libgnomevfs-2.so: undefined reference to `xmlTextReaderConstValue@LIBXML2_2.6.0' 
```

**编辑**：这是我用来编译代码的命令行：

```
gcc -g  `pkg-config --cflags --libs gtk+-2.0 cairo libgvc glib-2.0 \
  gtksourceview-1.0 gnome-vfs-2.0 libgnomeprintui-2.2 libxml-2.0`  test-widget.c 
```

对于[这个](http://www.xmlsoft.org/examples/parse1.c)文件（更简单），这个命令有效：

```
gcc -g  `pkg-config --cflags --libs libxml-2.0`  simplierFile.c 
```

我还尝试使用`xml2-config`xmlsoft 站点中的脚本，但结果仍然相同。

我似乎在谷歌上找不到任何东西。我也安装了`dev`文件。如果有人能指出我正确的方向，那就太好了。谢谢。

**编辑2**：

将源文件放在之前`pkg-config`不起作用。

从错误看来，它似乎没有正确链接 libxml。

**EDIT3** 的输出`pkg-config --cflags --libs gtk+-2.0 cairo libgvc glib-2.0 gtksourceview-1.0 gnome-vfs-2.0 libgnomeprintui-2.2 libxml-2.0`是：

```
-pthread -DORBIT2=1 -I/usr/local/include/atk-1.0 -I/usr/local/include/gdk-pixbuf-2.0
 -I/usr/local/include/pango-1.0 -I/usr/local/include/gio-unix-2.0/ -I/usr/local/include
/glib-2.0 -I/usr/local/lib/glib-2.0/include -I/usr/local/include/libxml2 -I/usr/local
/include/libgnomeprint-2.2 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include
/cairo -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr
/include/graphviz -I/usr/include/gtksourceview-1.0 -I/usr/include/libart-2.0 -I/usr/include
/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -I/usr/include/gconf/2 -I/usr/include
/orbit-2.0 -I/usr/include/libgnomeprintui-2.2 -I/usr/include/libgnomecanvas-2.0 -I/usr
/include/gail-1.0  -pthread -L/usr/local/lib -lgvc -lgraph -lcdt -lgtksourceview-1.0 
-lgnomevfs-2 -lgconf-2 -lgthread-2.0 -lgnomeprintui-2-2 -lgnomeprint-2-2 -lz 
-lgnomecanvas-2 -lgmodule-2.0 -lrt -lart_lgpl_2 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 
-lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype 
-lfontconfig -lgobject-2.0 -lglib-2.0 -lxml2 
```

# django - 决定在 Django 中使用@staticmethod、@property 或 manager

> ID：11834197
> 
> 赞同：1
> 
> 时间：2012-08-06T18:58:21.937
> 
> 标签：django, django-models

我想在 Django 中创建一个简单的基于地理位置的应用程序。我想将用户的位置保留为他登录的最后一个纬度/经度。为此，我创建了一个**Location**类。为了存储额外的用户数据，我有一个**UserProfile**类。我也想将**位置**列保留在**UserProfile**中。

我可以想到三种实现方式——使用`@staticmethod`、`@property`或管理器。然后定义一个`__unicode__`方法，该方法将返回一个包含最近日期的 lat/long 的列表。哪种方式最合适？以下是我的模型：

```
class Location(models.Model):
    user = models.ForeignKey(User)
    latitude = models.CharField(max_length=10)
    longitude = models.CharField(max_length=10)
    date = models.DateTimeField(auto_now_add = True)

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    location = the_last_login_location
    rating = models.IntegerField() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:17:14.243

我会使用一个属性：

```
class Location(models.Model):
    user = models.ForeignKey(User, related_name="locations")
    latitude = models.CharField(max_length=10)
    longitude = models.CharField(max_length=10)
    date = models.DateTimeField(auto_now_add = True)

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    rating = models.IntegerField()

    @property
    def last_location(self):
        return self.locations.latest("date")
        # Alternatively: return self.objects.all().order_by("-date")[0] 
```

请注意`related_name`我已添加到模型中的`user`字段`Location`- 它使反向查找更清晰且更易于阅读

**编辑**：我将查询更改为使用[latest()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)

# c# - 在局部视图中更新数据

> ID：11834205
> 
> 赞同：2
> 
> 时间：2012-08-06T18:58:57.907
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-partialview

我是 Asp.Net MVC 的新手，我不知道如何更新部分视图的帖子数据。我对 GET 和在部分视图中显示数据没有问题。

我不确定将部分视图数据的邮政编码放在哪里......在父页面的 post 方法中？还是局部视图的发布方法？

当我运行下面的代码时，我在提交时收到此消息。

*“在控制器 'Registration.Web.Controllers.AgreementsController' 上找不到公共操作方法 'ScoreRelease'。”}*

它在初始页面加载时找到控制器，但在我调用 return View("Review"); 在 post 方法中。

从“Review”页面调用的 Parial View

```
 @{Html.RenderAction("ScoreRelease", "Agreements");} 
```

ScoreRelease 部分视图

```
@model Registration.Web.Models.ReviewModel.ReleaseScore
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <div class='group' id='data_release'>
        <h4>
            Data Release
        </h4>
        <p>
            Do you wish to release your scores?
        </p>
        <ul class='input_group'>
            <li>
                @Html.RadioButtonFor(model => model.ReleaseScoreIndicator, true)
                <label>
                    Yes
                </label>
            </li>
            <li>
                @Html.RadioButtonFor(model => model.ReleaseScoreIndicator, false)
                <label>
                    No
                </label>
            </li>
        </ul>
          <input type="submit" value="Save"  />
    </div>

} 
```

审查控制器

```
 public ActionResult Review()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Review(ReviewModel.ReleaseScore model)
    {
        var agmtsService = new AgreementsService();
        agmtsService.UpdateReleaseScoreIndicator(model.ReleaseScoreIndicator);

        return View("Review");

    }

    [HttpGet]
    public ActionResult ScoreRelease()
    {
        var agmtsService = new AgreementsService();
        bool scoreRelease = agmtsService.GetReleaseScoreIndicator();

        var vm = new ReviewModel.ReleaseScore();
        vm.ReleaseScoreIndicator = scoreRelease;

        return PartialView(vm);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:17:14.127

使用带参数的 Html.BeginForm：

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:32:49.437

您必须将 Post Method 放在 Partial View 中。您可以通过两种方式进行操作`Html.BeginForm()`或`Ajax.BeginForm`。如果您在弹出窗口中显示此部分视图，则最好将其用作 Ajax。无论您在视图中放置什么动作，都必须`[httppost]`在控制器中使用标签创建相同的方法名称。

# ruby - 创建一个地图来编写和运行一个 ruby 脚本

> ID：11834207
> 
> 赞同：0
> 
> 时间：2012-08-06T18:59:00.860
> 
> 标签：ruby, vim

想知道是否有一种方法可以创建 vim 快捷方式，这样我就不必`w ! ruby`每次测试一些代码时都输入。我知道您可以将地图添加到您的 .vimrc 文件中，并且我正在寻找添加关键字 :wr 以保存和运行一些代码。但是，我不确定这些命令是哪种模式：视觉、命令行、普通等。这些模式有不同的映射形式：vmap、cmap、nmap 等。有人知道我应该如何进行吗？

我的.vimrc的内容如下：

```
syntax on
set cindent
set nu
colorscheme delek
set hlsearch
set shiftwidth=2
set softtabstop=2
nmap <F6> :w<CR>:!ruby %<CR> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:44:33.610

不同模式的映射如下

1.  nmap ：正常或转义模式。
2.  imap : 插入模式
3.  vmap : 可视模式

您应该通过将`nmap`如下所示的行老化到您的`.vimrc`

```
nmap <F6> :w<CR>:!ruby %<CR> 
```

上面的代码会将功能键映射`F6`到正常或转义模式，以首先保存您的代码，然后使用`ruby`命令运行当前文件。

Vim 中键映射的详细信息：在 Vim 中[映射键 - 教程（第 1 部分）](http://vim.wikia.com/wiki/Mapping_keys_in_Vim_-_Tutorial_%28Part_1%29)

# knockout.js - 淘汰制映射和添加新项目

> ID：11834211
> 
> 赞同：2
> 
> 时间：2012-08-06T18:59:21.093
> 
> 标签：knockout.js, knockout-mapping-plugin

我在这里有一个示例 jsfiddle，它使用淘汰映射基于服务器模型（在提供的示例中为本地）生成一些 html 内容。

[http://jsfiddle.net/QShrA/](http://jsfiddle.net/QShrA/)

如何为嵌套地址创建新地址块？即如何创建一个名为“添加新”的按钮并在底部创建一个空地址块？

提前感谢您提供的任何帮助。

## 编辑 - 重新打开

问题没有解决。我注意到，在我实施[比尔的解决方案](http://jsfiddle.net/RLNPa/)（如下）之后，我为新添加的地址块计算的 observable 不起作用，因为它们已被禁用。希望有人能解决这个问题。谢谢。

```
 self.SMMDD = ko.computed({
        read: function() {
            **if ($.isFunction(self.SMONTH)) {**
                return self.SMONTH() + "/" + self.SDAY();
            **}**
        },
        write: function(value) {
            self.SMONTH(value.substring(0, 2));
            self.SDAY(value.substring(2, 4));
        },
        owner: self
    }); 
```

## 编辑 - 已解决

添加 deferEvaluation 选项似乎已经解决了这个问题。

```
 self.SMMDD = ko.computed({
        read: function() {
            return self.SMONTH() + "/" + self.SDAY();
        },
        write: function(value) {
            self.SMONTH(value.substring(0, 2));
            self.SDAY(value.substring(2, 4));
        },
        owner: self,
        deferEvaluation: true
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:02:13.703

这是一个分叉/固定版本，其中我取消了您的按钮的注释并将其连接起来，以便它向数组添加一个空地址。

[http://jsfiddle.net/RLNPa/](http://jsfiddle.net/RLNPa/)

# ruby-on-rails - Rspec 似乎缺少期望方法……这是正确的吗？

> ID：11834213
> 
> 赞同：1
> 
> 时间：2012-08-06T18:59:24.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

我正在运行我的 rspec 测试，它输出以下内容：

```
Failure/Error: expect {
 NoMethodError:
   undefined method `[]' for nil:NilClass
 # ./spec/controllers/users_controller_spec.rb:44:in `block (4 levels) in <top (required)>' 
```

错误引用的行是它显示“expect {”的行。我不太确定这里到底出了什么问题。

这是完整的规格：

```
require 'spec_helper'

describe UsersController do

  def valid_attributes
      {
      :username => "tester",
      :email => "tester@holler.com",
      :password => "testingpass"
      }
  end

  def valid_session
    {}
  end

  describe "POST create" do
    describe "with valid params" do
      it "creates a new User" do
        expect {
          post :create, {:user => valid_attributes , :format => :json}, valid_session
        }.to change(User, :count).by(1)
      end
    end
  end
end 
```

关于这里出了什么问题的任何想法？

**更新**

一位评论者要求提供 spec_helper.rb 文件。我把它贴在下面……它是 rspec 生成的默认值。

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:13:54.503

它没有丢失该`expect`方法 - 失败消息说它`[]`在`nil`. 默认情况下，RSpec 仅向您显示*规范*中导致问题的行，但有时问题更深层次。

`--backtrace`在命令行上运行带有标志的规范以查看完整的回溯并查明真正的来源。

HTH，大卫

# jquery - 在 Zend 框架中使用 jQuery 的 getJSON

> ID：11834215
> 
> 赞同：0
> 
> 时间：2012-08-06T18:59:29.653
> 
> 标签：jquery, zend-framework, getjson

我是 jquery 和 zend 的新手，试图使用 $.getJSON 在前端和后端之间进行通信。

所以这就是我所做的：

在 /mycontroller/index.phtml 的标题标签中，我有 js 代码：

```
 <script src="/js/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
    //  alert("js");
        $("#loadQuestions").submit(function(){
            var formData = $(this).serialize();
            console.log(formData);
            $.getJSON('http://xxx.com/mycontroller/process', formData, processData).error('ouch');
            function processData(data){
                //alert(data);
                console.log(data);
            }
            return false;
        }); // end submit
    }); // end ready
</script> 
```

在body标签中，有一个简单的形式：

```
<form action="http://xxx.com/mycontroller/process" method="post" id="loadQuestions">
    <input type="hidden" name="page" value="100">
    <input type="submit" name="button" id="button" value="Submit" >
</form> 
```

在 processAction() 中，有简单的代码：

```
$arr = array('pageNumber'=>200);
    echo json_encode($arr);
    exit; 
```

我想拥有的是，在我点击提交后，应该收集表单数据（我可以在 chrome 控制台中看到），但是在我看到 formData 之后，控制台中又没有显示任何内容（我应该看到数据从服务器传递但我没有）。

有谁知道我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:41:41.410

您可以在控制器中使用 AjaxContext 操作助手。

我是这样设置的。

```
 public function preDispatch()
    {
        $this->_ajaxContentSwitch = $this->_helper->getHelper('AjaxContext');
        $this->_ajaxContentSwitch->addActionContext('process', 'json')
                                 ->initContext();
   } 
```

并在你的过程中行动。

```
public function processAction()
{
    if ($this->_helper->ajaxContext()->getCurrentContext() == 'json') { 
                $this->view->array = array('pageNumber'=>200);
    } else {
        // Not called via ajax do redirect or something here
    }
} 
```

此外，您的 JQuery 脚本中的 url 应该是“http://xxx.com/mycontroller/process/format/json”才能正常工作。

上面的 processAction 将返回一个名为 array 的 json 字符串，其中包含您的数组。

我希望这有帮助。

加里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T00:20:10.063

我认为您遇到了问题，因为您正在尝试从控制器进行打印。在 Zend 中，您必须在视图文件中执行此操作。

所以......在 processAction 你应该做类似......

```
$this->view->data = $arr; 
```

然后在视图文件 process.phtml 你需要...

```
if($this->data)
    echo json_encode($this->data); 
```

# wpf - 如何控制网格高度？

> ID：11834217
> 
> 赞同：0
> 
> 时间：2012-08-06T18:59:49.797
> 
> 标签：wpf, grid, height, sizing

我有一个包含 2 个子控件的网格。我有一个简单的堆栈面板和一个将驻留在网格中的 ListBox：

```
<Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ListBox Name="lstGroups" Grid.Row="0" />
        <StackPanel Grid.Row="2" />
<Grid> 
```

问题是我的 ListBox 渲染超出了分配给网格的可视屏幕区域。如何确保我的 ListBox 占用了可用空间，但它不会渲染到我需要垂直滚动条才能看到所有内容的第二行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:48:10.863

您可能应该为此使用 DockPanel。您也可以以编程方式设置列表框的高度，但这不是一种非常干净的方法。

```
<Window x:Class="MobilWPF.Windows.testWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="testWindow" Height="300" Width="300">
    <DockPanel>
        <StackPanel DockPanel.Dock="Bottom" >
            <TextBlock Text="blah"/>
        </StackPanel>
        <ListBox Name="lstGroups"  />
    </DockPanel>
</Window>

namespace MobilWPF.Windows
{
    /// <summary>
    /// Interaction logic for testWindow.xaml
    /// </summary>
    public partial class testWindow : Window
    {
        public testWindow()
        {
            InitializeComponent();

            for (int i = 0; i < 200; i++)
            {
                lstGroups.Items.Add(i.ToString()); 
            }
        }
    }
} 
```

# iphone - iOS [iPhone] 在 Google 地图上绘制 2000 多个位置

> ID：11834218
> 
> 赞同：0
> 
> 时间：2012-08-06T18:59:55.443
> 
> 标签：iphone, ios

我正在努力在谷歌地图上绘制 2000 个商店位置。我已经绘制了 10 个，但是当我的客户告诉我完整的数据集有 2000 个时，我正在努力寻找实现这一点的最佳方法。

问题是，所有 2000 个位置也不必一次显示。当用户 GPS 开启时，它将确定用户的位置并显示最近的 5 家商店。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:16:03.293

使用`MKMapView`的`regionDidChangeAnimated`委托功能以及`mapView.region`，您可以确定地图的当前可见区域。根据此可见区域动态添加和删除位置。

# symfony - 使用 symfony2 获取 Token 参数

> ID：11834219
> 
> 赞同：0
> 
> 时间：2012-08-06T18:59:58.067
> 
> 标签：symfony

我已经手动创建了登录表单并在安全控制器中设置了凭据，如下所示

```
 public function loginCheckAction()
{
    $request = $this->getRequest();
    $session = $request->getSession();

            $oem = $this->getDoctrine()->getEntityManager();
            $username = $request->get('_username');
            $password = $request->get('_password');
            if($username){
                $user = $oem->getRepository('AdminEmployeeBundle:Employees')->loadUserByUsername($username);
                if($user){

                    $dbpassword = $password;
                    if($dbpassword == $user->getPassword()){
                        // secured and redirect
                    $token = new UsernamePasswordToken($user,null,'main',array('ROLE_ADMIN'));
                    // give it to the security context
                    $this->container->get('security.context')->setToken($token);
                    return $this->redirect($this->generateUrl('_employeeList'));    
                }
                    else{
                        $this->get('session')->setFlash('error','Please check username password');
                    }
                }
            return $this->redirect($this->generateUrl('login'));    
            } 
```

现在我想在员工控制器中使用它，但我不知道如何使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:27:01.080

你有没有尝试过

```
$token = $this->get('security.context')->getToken(); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:48:51.340

`ROLE_ADMIN`通过您的控制器登录后，由于此行，员工应该具有角色：

```
$token = new UsernamePasswordToken($user,null,'main',array('ROLE_ADMIN')); 
```

现在，您可以检查防火墙下的每个控制器：

```
$this->get('security.context')->isGranted('ROLE_ADMIN'); 
```

查看是否已登录并具有权限

# python - 如何以编程方式登录 blogger.com？

> ID：11834222
> 
> 赞同：2
> 
> 时间：2012-08-06T19:00:12.807
> 
> 标签：python, automation, backup, blogspot

我想自动备份我的 blogspot 博客。如何以编程方式登录我的 blogspot 帐户并单击此处详细说明的“导出博客”/下载链接？（首选 Python，但对任何东西都开放。）

[http://support.google.com/blogger/bin/answer.py?hl=en&answer=97416](http://support.google.com/blogger/bin/answer.py?hl=en&answer=97416)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:35:30.443

将[Google OAuth API](https://developers.google.com/gdata/articles/oauth)与 RESTful 库（如 Requests）一起使用，以生成可用于访问您的 Google 帐户中的数据的令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:31:16.803

Requests 库可能适用于此。我没有 blogspot 帐户，因此无法尝试此操作，但我的第一反应是尝试此操作：发布您的凭据，存储收到的 cookie。获取下载链接，传入存储的 cookie。

[http://docs.python-requests.org/en/latest/api/](http://docs.python-requests.org/en/latest/api/)

# jquery - 如何添加 HTML 标记而不必同时提交结束标记？

> ID：11834225
> 
> 赞同：1
> 
> 时间：2012-08-06T19:00:19.673
> 
> 标签：jquery, jquery-selectors

我看过 before()、append() 和 wrap()。没有一个是我所需要的。

我正在尝试做的伪解释：

我正在处理`<div>`他们班级选择的 s 的“列表”。如果 .text() 从一个“行”更改为我要插入的下一个（例如）`<div class="wrapper">`，当 .text() 再次更改时，我想关闭前一个包装器，然后开始一个新的包装器（`</div><div class="wrapper">`）等等.

最后，像“行”（基于 .text()）将被包装在一个给定的`<div class="wrapper">`.

当我尝试使用我提到的任何方法时，它们都以某种方式强制结束标记。我想自己添加 div 和结束标签。似乎是一个非常简单的需求，但我似乎找不到可行的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T19:02:24.990

你不能。

即使您不关闭标签，以某种方式注入错误的 HTML，浏览器也会尝试为您关闭它。只需在需要时向标签的内容添加更多内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:04:42.070

简单的答案是，当您使用 DOM 时，您不能插入损坏的标签。但是，你可以改变你的心态。与其尝试添加`<div>`，然后添加`</div><div>`这么多元素，不如将其切换：

```
var $d = $('<div>').appendTo('#container');
$d.append(/*match*/);
$d.append(/*match*/);
$d.append(/*match*/);
$d = $('<div>').appendTo('#container');
$d.append(/*match*/);
$d.append(/*match*/);
$d.append(/*match*/); 
```

等等。基本上，改变你的思维过程，将元素移动到 中，而不是用标记`<div>`包装元素。`<div>`

您还可以保持运行记录，然后根据文本更改重置您的列表（如您所述）。例如

```
var matches = [],
    $d = $('div');
$d.each(function(){
    var $t = $(this);
    if(matches.length > 0 && $(matches[0]).text() != $t.text()){
        $('<div>',{'class':'wrapper'}).append(matches)
            .appendTo('body');
        matches = [];
    }
    matches.push(this);
});
if(matches.length > 0){
    $('<div>',{'class':'wrapper'}).append(matches)
        .appendTo('body');
} 
```

[上述示例](http://jsfiddle.net/qdpFs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:08:36.670

我很确定，当您以编程方式将元素添加到 DOM 时 - 元素已完全创建（打开和关闭）。

如果您希望能够创建一个列表并将条目添加到其中 - 使用 appendChild()。

这将允许您在列表中添加条目。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-06T19:05:32.943

[http://jsfiddle.net/XH2hp/](http://jsfiddle.net/XH2hp/)

```
//can't form the tag normally, must use html entities.
$('div').append('&lt;p&gt;');//this is a non-closing <p> tag
$('div').append("Hey, I'm some text between two P tags. How does that work?!");
$('div').append('&lt;/p&gt;');//this is the closing </p> tag

//In order for the the DOM to get updated with the proper markup, we must process the HTML entities, .text() will do that for us.
$('div').html($('div').text()); 
```

# eclipse - Maven Eclipse 类路径错误

> ID：11834226
> 
> 赞同：0
> 
> 时间：2012-08-06T19:00:26.317
> 
> 标签：eclipse, maven

我有一个具有标准 maven 结构的项目（即 src/main/java 用于源代码，src/test/java 用于测试代码），但是当我使用 mvn eclipse:eclipse 生成 eclipse 文件时，主源树的类路径是错的：

```
<classpathentry kind="src" path="src/test/java" output="target/test-classes"/>
<classpathentry kind="src" path="src" including="**/*.java"/>
<classpathentry kind="src" path="src/main/resources" excluding="**/*.java"/> 
```

因此，主要源路径以 src 而不是 src/main/java 的形式出现 - 这是否有原因，我可以强制它正确吗？

修正：由于某种原因，我在 pom 中设置了它，所以构建源设置在 /src。我从 pom 中删除了那条线，现在它工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:37:57.927

使用[Eclipse Maven 集成 (m2e)](http://www.eclipse.org/m2e/) 并作为现有 Maven 项目导入。

请注意，您不应执行 mvn eclipse:eclipse

NO_M2ECLIPSE_SUPPORT：M2Eclipse 不支持使用 maven-eclipse-plugin 创建的项目文件。

# c# - 为每个可能的事件定义事件处理程序的原因是什么，即使它们没有被使用？

> ID：11834227
> 
> 赞同：2
> 
> 时间：2012-08-06T19:00:33.493
> 
> 标签：c#, winforms

我在一个我应该更新的应用程序中遇到了一些代码，它为控件的**每个**可能事件定义了一个事件处理程序（或者至少是设计器中列出的所有事件，据我所知）。我以前从未见过这种情况，也不想在我的任何应用程序中实现它。

一个例子；开始记录操作的按钮开始操作`Click`。但是，*所有其他事件处理程序也被绑定*，从`AutoSizeChanged`和`BackColorChanged`一直到`VisibleChanged`和`Validating`。除了 之外`Click`，所有事件处理程序都是空的。到目前为止，据我所知，整个应用程序中的许多控件都会发生这种情况。

也没有提供详细说明为什么会这样的评论。为什么要这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:03:25.693

> 除了 Click，所有事件处理程序都是空的。到目前为止，据我所知，整个应用程序中的许多控件都会发生这种情况。
> 
> 为什么要这样做？

很可能是因为原作者不明白这是没有必要的。

这样做没有很好的技术理由。它实际上只是降低了性能，并没有提供任何好处。

请注意，许多人在他们自己的类上创建事件时，通常会订阅一个空的事件处理程序。这使得他们可以避免对订阅列表进行空检查。我怀疑这样做是为了防止这种情况的误导，即使它通常是在事件发布端完成的，而不是等式的订阅端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:04:34.533

那是......不是理想的情况。事实上，大多数 winforms 控件都使用`EventHandlerList`，它旨在成为**稀疏**事件的高效存储模型。如果您要为要子类化的事物（表单等）覆盖事件，那么`override`是事件订阅的首选选项。

听起来有人在 IDE 中通过双击事件使它们全部变粗。它没有任何用处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:06:25.403

您通常可以删除空事件处理程序。这可能是一个“考虑未来”并希望“如果我们需要”准备好一些代码的开发人员。

我注意到：

*   需要时可以轻松创建事件处理程序。
*   空事件处理程序是*未使用的代码*，使重要部分难以*找到*和*阅读*。

因此，我会坚持[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)原则并立即删除它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T13:39:29.223

在旧版本的 Visual Studio 中，插入新的事件处理程序后，它不会在您删除事件处理程序方法时自动从 Designer.cs 文件中删除代码。您必须进入 Windows 窗体设计器生成的代码并查找/删除如下行：

```
this.button1.Click += new System.EventHandler(this.button1_Click); 
```

否则，如果您删除了 button1_Click 方法，则会出现构建错误。这是一种痛苦，这可能是他从不清理它们的原因。现在，当您删除事件处理程序方法时，删除连线已经足够聪明了。

# php - magento - 在简单产品中使用的可配置产品中的图像

> ID：11834229
> 
> 赞同：0
> 
> 时间：2012-08-06T19:00:39.793
> 
> 标签：php, magento, thumbnails

谁能帮我解决这个php代码难题？（郑重声明，我不是 php 程序员）

我想显示一个缩略图（用于销售订单屏幕和新订单邮件）

简单的产品不是问题。我有这个代码：

```
<?php //added for sending image with order
$product = Mage::getModel('catalog/product')
->setStoreId($_item->getOrder()->getStoreId())
->load($_item->getProductId());     ?>
<p align="center"><img src="<?php echo Mage::helper('catalog/image')->init($product, 'small_image')->resize(135); ?>" width="135" height="135" alt="" /></p> 
```

这工作正常。变得困难的地方是当我有一个与可配置产品相​​关的简单产品时。可配置产品的“孩子”不包含图像，只有可配置产品。（见截图，第一个产品是带有图像的可配置产品，其余的是没有照片的简单产品“孩子”）

![在此处输入图像描述](../Images/07734a1af4cc9e97700c63dbf5c68c99.png)

使用上面的代码，我只能看到图像的占位符。如何调用可配置产品的图像？

我在专用服务器上使用 magento 1.6.2.0（在 ubuntu 10.04lts 服务器上运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:08:59.290

我刚刚解决了这个问题。[这是我的解决方案](https://stackoverflow.com/questions/11456819/magento-configurable-product-option-images)。

我遇到的问题是，像你一样，图像没有链接到可配置父级的子产品（你可以上传这些产品的图像......）。我采取了将图像添加到驱动父产品变化的属性的方法，并为它们输出图像。

我的解决方案绑定到可配置的.phtml 模板，并使用 JS 提取适当的细节（Magento 使用大量 JS 来表示可配置产品，与捆绑包不同）。

祝你好运。这是一种痛苦。

（以及为什么 Magento 不支持开箱即用，我永远不会知道。对我来说似乎是必不可少的功能......）

更新

* * *

嗯 - 这真的取决于你想要做什么。如果您只想为每个子产品提供一张图片，您可以尝试以下操作：

```
$spImages = array();
foreach ($this->getAllowProducts() as $_sp) {
    $spImages[$_sp->getId()] = 
        (string)$this->helper('catalog/image')
            ->init($_sp, 'small_image')
            ->resize(40,40);
} 
```

假设您已为每个子产品上传了一张图片。

但是，正如我所指出的，我对每个属性选项的样本感兴趣，这不会满足我的需要。这就是我将图像与属性本身相关联的原因。

# javascript - 如何在 HTML 选项中换行文本

> ID：11834231
> 
> 赞同：7
> 
> 时间：2012-08-06T19:00:41.840
> 
> 标签：javascript, jquery, html

我想在我的页面上放一个下拉列表，由于一个选项太长，当我单击选择菜单时，它会展开并覆盖页面的另一部分。

```
<select id="selectlist" name="SelectProgram">

    <option value="LIR" >LIR</option>
        <option value="How to word wrap text in HTML?">How to word wrap text in HTML? CSS / HTML text wrap for webkit</option> 
```

第二个选项太长并且会扩展。有什么办法可以将这么长的文本包装成 2 行？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T19:12:01.997

看到 Select 的值和文本可能非常不同。我会说，如果您选择的文本中的字符串长于 X 截断它。

使用 jquery 的示例

```
$('#myselect option').each(function()
{
    var myStr = $(this).text();
    if(myStr.length > 15){$(this).text(myStr.substring(15));}
}); 
```

把它放在你的文档中准备好，它会将你的文本修剪到更好的大小，将你的元素包装在一个隐藏溢出的 div 中，稍后会弄得一团糟，你会回到这里试图解决一个由较小的字符串引起的类似问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T19:10:56.733

`div`只需使用即可设置固定宽度而无需换行

```
<select id="selectlist" name="SelectProgram" style="width: 500px">
   <option value="LIR" >LIR</option>
   <option value="How to word wrap text in HTML?">How to word wrap text in HTML? CSS / HTML text wrap for webkit</option>
</select> 
```

实际上，您应该`width: 500px`在 CSS 文件中添加匹配规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:05:17.593

将该输入包装在一个 div 中，为 div 设置一些宽度，以便该行不会超出 div，如下所示：

```
<div id="something" style="width:500px">
  <select id="selectlist" name="SelectProgram">
     <option value="LIR" >LIR</option>
     <option value="How to word wrap text in HTML?">How to word wrap text in HTML? CSS / HTML text wrap for webkit</option>
  </select>
</div> 
```

# javascript - nodeJS服务器缓慢而生涩的性能？

> ID：11834235
> 
> 赞同：0
> 
> 时间：2012-08-06T19:01:01.547
> 
> 标签：javascript, node.js, heroku

使用 nodeJS 和 socket.io 作为练习，我构建了一个由 iphone 控制的鼠标光标原型，它在浏览器视口上移动。而已。它有效，但性能真的很差。光标生涩，被切碎......它移动不顺畅......正如我在终端中看到的发射，有时它被卡住......

我正在考虑使用下面的代码之类的东西，但仍远未达到最佳状态..

```
setInterval(function() {
   socket.emit('sendposition', x, y);
}, 25); 
```

我想知道是否有任何提高性能的最佳实践。如果性能如此糟糕，你如何构建在线多人游戏？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:43:13.630

我尝试使用`socket.send`, 而不是`socket.emit`，它听起来......更好......不是完美但更好......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T20:28:21.937

网络流量可能有抖动，这是正常的，尤其是TCP流量，网络保证按顺序传递，所以当一个数据包迟到时，后面的所有其他数据包都必须等待。

我建议您尝试使用 UDP，每个数据报在 X、Y 位置包含一个增量。这样，如果一些数据包出现故障，鼠标仍然会到达相同的目的地，如果一些数据包被丢弃，那么其他数据包仍然会通过并推动光标。

# java - Java Socket Read Timeout，报错后无法读取

> ID：11834236
> 
> 赞同：0
> 
> 时间：2012-08-06T19:01:03.210
> 
> 标签：java, sockets

我正在修复 Java 代码，看起来像这样 -

```
 connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod(POST);
    connection.setRequestProperty("Content-Type", CONTENT_TYPE);
    connection.setReadTimeout(5 * 60 * 1000);
    connection.setUseCaches(false);
    connection.setDoInput(true);
    connection.setDoOutput(true);

    DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
    wr.writeBytes(parameters);
    wr.flush();
    wr.close();

    in = connection.getInputStream();
    connection = null; 
```

它适用于少量数据交换（包括并发请求）。如果数据很大或有并发请求（对于大数据），我会收到“java.net.SocketTimeoutException：读取超时”错误。在此错误之后，程序无法读取其他数据或满足其他请求。我必须重新启动服务器（JBoss）。

我最初的想法是将 setReadTimeOut 增加到 15。没有帮助，对于大型数据集的并发请求仍然会出错。

我还有哪些其他选择？如何从读取超时错误中恢复？

上面的代码使用 java.net.*。

感谢任何帮助..WM

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T20:41:43.590

我很确定这与您用来编写 http 请求正文的 DataOutputStream 有关。我从未见过有人用 DataOutputStream 做这件事。

DataOutputStream 旨在将原始 Java 类型（int、byte、long 等）写入 OutputStream。当输入一个字符串时，就像你正在做的那样，它将获取每个字符（2 个字节），并将其转换为一个字节，同时忽略字符的最高字节。

这可能适用于一些没有设置最高 8 位的字符，但迟早肯定会导致数据丢失。这可能会导致发送一个 http 请求，该请求指定的内容长度与实际消息体的长度不同，这反过来又会导致远程服务器等待更多永远不会收到的数据。

我会将 DataOutputStream 替换为例如 BufferedWriter，它允许您写入字符数据。还可以考虑使用 apache 的 HttpClient，它比 java 的 HttpUrlConnection 复杂得多。

干杯，汤姆

# windows - WINDOWS RESTful 服务上的 cURL POST 命令行

> ID：11834238
> 
> 赞同：77
> 
> 时间：2012-08-06T19:01:16.220
> 
> 标签：windows, api, post, curl, command-line

**我的问题：** 使用命令行工具来卷曲我的本地主机服务器，同时发送一些数据以及我的 POST 请求不起作用。

**似乎是什么导致了错误：** 想象一下这样的事情

1.  `curl -i -X POST -H 'Content-Type: application/json' -d '{"data1": "data goes here", "data2": "data2 goes here"}' http:localhost/path/to/api`

返回数据的结果

```
curl: (6) Could not resolve host: application; No data record of requested type
curl: (6) Could not resolve host: data goes here,; No data record of requested type
curl: (6) Could not resolve host: data2; No data record of requested type
curl: (3) [globbing] unmatched close brace/bracket at pos 16 
```

经过一番搜索，我发现问题不可能是用于请求的 sintax，因为它适用于 UNIX shell。

> 您可能使用Windows吗？这看起来像是一个完全损坏的外壳，无法正确处理单引号和双引号。我刚刚尝试了该命令行，它在我的 linux 机器上运行良好。 [http://curl.haxx.se/mail/archive-2011-03/0066.html](http://curl.haxx.se/mail/archive-2011-03/0066.html)

我试图解决那些“逃避它”的问题，但它仍然没有用

2.

> curl -i -X POST -H 'Content-Type: application/json' -d '{\"data1\": \"data在这里\", \"data2\": \"data2在这里\"}' http://localhost/path/to/api

3.

> curl -i -X POST -H 'Content-Type: application/json' -d '{\"data1\": \"data在这里\", \"data2\": \"data2在这里\"}' http://localhost/path/to/api

所以我放弃了。Windows 似乎弄乱了在 POST 上发送的 JSON 对象

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-09-19T15:41:47.593

我在我的 win7 x64 笔记本电脑上遇到了同样的问题，并且能够使用标有[Win64 - Generic w SSL](http://curl.haxx.se/latest.cgi?curl=win64-ssl-sspi)的 curl 版本通过使用非常相似的命令行格式使其工作：

```
C:\Projects\curl-7.23.1-win64-ssl-sspi>curl -H "Content-Type: application/json" -X POST http://localhost/someapi -d "{\"Name\":\"Test Value\"}" 
```

这仅与您的第二个转义版本不同，它在转义的转义和标头参数值周围使用双引号。绝对更喜欢 linux shell 语法。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-01-13T09:14:41.620

另一种比使用引号更容易的命令行替代方法是将json放入文件中，并使用curl参数的@前缀，例如在json.txt中使用以下内容：

```
{ "syncheader" : {
    "servertimesync" : "20131126121749",
    "deviceid" : "testDevice"
  }
} 
```

然后在我的情况下，我发出：

```
curl localhost:9000/sync -H "Content-type:application/json" -X POST -d @json.txt 
```

使 json 也更具可读性。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-07T11:56:22.840

**替代解决方案：比命令行更用户友好的解决方案：**

> 如果您正在寻找一种用户友好的方式来使用 HTTP 方法而不是简单的 GET 来发送和请求数据，那么您可能正在寻找一个 chrome 扩展，就像这个[http://goo.gl/rVW22f](http://goo.gl/rVW22f)称为 **AVANCED REST CLIENT**

**对于希望继续使用命令行的人，我推荐 cygwin：**

> 我最终安装了带有 CURL 的 cygwin，这让我们能够***在 Windows 上获得那种 Linux 的感觉！***
> 
> 使用 Cygwin 命令行，这个问题已经停止，最重要的是，1\. 上使用的请求语法运行良好。

**有用的链接：**

> [我在哪里下载 curl for windows 命令行？](http://curl.haxx.se/dlwiz/?type=bin)
> 
> [有关如何安装和让 curl 与 cygwin 一起使用的更多信息，请转到此处](https://stackoverflow.com/questions/3647569/how-do-i-install-curl-on-cygwin)

**我希望它对某人有所帮助，因为我整个上午都在这上面。**

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-05-13T19:55:17.163

至少对于我测试的 Windows 二进制版本（[通用 Win64 no-SSL 二进制](http://curl.haxx.se/latest.cgi?curl=win64-nossl)，当前基于[7.33.0](http://curl.haxx.se/download/curl-7.33.0-win64-nossl.zip)），您会受到如何解析命令行参数的限制。xmas 的答案描述了该设置中的正确语法，该语法也适用于批处理文件。使用提供的示例：

```
curl -i -X POST -H "Content-Type: application/json" -d "{""data1"":""data goes here"",""data2"":""data2 goes here""}" http:localhost/path/to/api 
```

避免必须处理转义字符的一种更简洁的替代方法（取决于用于解析命令行的任何库）是将标准 json 格式文本放在单独的文件中：

```
curl -i -X POST -H "Content-Type: application/json" -d "@body.json" http:localhost/path/to/api 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-02-18T20:13:14.553

1.  Try to use double quotes (") instead of single ones (').
2.  To preserve JSON format quotes, try doubling them ("").
3.  To preserve quotes inside data, try to double-escape them like this (\\"").

    ```
    curl ... -d "{""data1"": ""data1 goes here"", ""data2"": ""data2 goes here""}"
    curl ... -d "{""data"": ""data \\""abc\\"" goes here""}" 
    ```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-23T15:04:40.343

powershell 6.2.3 上的另一种跨平台解决方案：

```
$headers = @{
    'Authorization' = 'Token 12d119ad48f9b70ed53846f9e3d051dc31afab27'
}

$body = @"
{
    "value":"3.92.0", 
    "product":"847"
}
"@

$params = @{
    Uri         = 'http://local.vcs:9999/api/v1/version/'
    Headers     = $headers
    Method      = 'POST'
    Body        = $body
    ContentType = 'application/json'

}

Invoke-RestMethod @params 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-28T14:42:24.110

JSON中的双引号需要转义，整个JSON需要用双引号括起来。要在不手动转义或为 JSON 使用额外文件的情况下执行此操作，您可以使用 CMD 替换变量中的字符串以转义`"`为`\"`：

```
set json={"data1": "data goes here", "data2": "data2 goes here"}
curl -i -X POST -H 'Content-Type: application/json' -d "%json:"=\"%" http://localhost/path/to/api 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-09T09:16:10.963

我们可以在 Windows 命令提示符下使用下面的 Curl 命令来发送请求。使用下面的 Curl 命令，用双引号替换单引号，删除下面格式中不存在的引号并使用`^`符号。

```
curl http://localhost:7101/module/url ^
  -d @D:/request.xml ^
  -H "Content-Type: text/xml" ^
  -H "SOAPAction: process" ^
  -H "Authorization: Basic xyz" ^
  -X POST 
```

# asp.net-mvc - 附加到删除时违反完整性约束

> ID：11834240
> 
> 赞同：0
> 
> 时间：2012-08-06T19:01:21.680
> 
> 标签：asp.net-mvc, ef-code-first

我已经完成了我一直在打扰每个人的那个小时编辑器。我现在只需要让它删除一些东西：批发时间安排删除或删除 ExceptionHoursSets（一般时间模式的例外）。每个 ExceptionHoursSet 都有一个 WeekSpec，而 WeekSpec 又具有 DaySpecs 的集合（包含当天的小时数）。所以我显然想遍历每个异常集，并删除已标记为删除的天、周和集。这是缩写的方法：

```
 [HttpPost]
    public ActionResult Edit(Schedule schedule, [Bind(Prefix = "ExceptionHoursSet")] List<ExceptionHoursSet> exceptionHoursSets)
    {
        using (var db = new HoursDb())
        {
            ViewBag.DayNames = HomeServices.DayNames;
            if (ModelState.IsValid)
            {
                schedule.ExceptionHoursSets = exceptionHoursSets;
                foreach (var exceptionHoursSet in exceptionHoursSets)
                {
                    if (!exceptionHoursSet.IsDeleting)
                    {
                        exceptionHoursSet.WeekSpecId = exceptionHoursSet.WeekSpec.WeekSpecId;
                            // for coherency (should this be necessary?)

                        foreach (var daySpec in exceptionHoursSet.WeekSpec.DaySpecs)
                        {
                            db.Entry(daySpec).State = EntityState.Modified;
                            db.SaveChanges();
                        }
                        db.Entry(exceptionHoursSet.WeekSpec).State = EntityState.Modified;
                        db.SaveChanges();

                        db.Entry(exceptionHoursSet).State = EntityState.Modified;
                        db.SaveChanges();
                    }
                    else
                    {
                        var daySpecs = new List<DaySpec>(exceptionHoursSet.WeekSpec.DaySpecs);

                        db.ExceptionHoursSets.Attach(exceptionHoursSet);
                        db.WeekSpecs.Attach(exceptionHoursSet.WeekSpec);
                        foreach (var daySpec in daySpecs)
                        {
                            db.DaySpecs.Attach(daySpec);
                            db.DaySpecs.Remove(daySpec);
                        }
                        db.WeekSpecs.Remove(exceptionHoursSet.WeekSpec);
                        db.ExceptionHoursSets.Remove(exceptionHoursSet);

                        db.SaveChanges();
                    }
                }

                if (HasEditedException(lastExceptionHoursSet))
                {
                    var dayNum = 0;
                    foreach (var daySpec in lastExceptionHoursSet.WeekSpec.DaySpecs)
                    {
                        daySpec.DayNum = dayNum++;
                        daySpec.DaySpecId = Guid.NewGuid();
                        db.DaySpecs.Add(daySpec);
                    }
                    lastExceptionHoursSet.WeekSpec.WeekSpecId = Guid.NewGuid();
                    db.WeekSpecs.Add(lastExceptionHoursSet.WeekSpec);
                    lastExceptionHoursSet.ExceptionHoursSetId = Guid.NewGuid();
                    exceptionHoursSets.Add(lastExceptionHoursSet);
                    db.ExceptionHoursSets.Add(lastExceptionHoursSet);
                }

                db.Entry(schedule).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(schedule);
        }
    } 
```

尝试附加到我尝试删除的 exceptionHoursSet 时出现的错误是：

发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

这是什么？更重要的是，我该如何摆脱它？

谢谢你忍受我，内森邦德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:07:12.987

没错，找到了。首先，我需要附上异常集所属的时间表。然后我在那个附件中遇到了同样的错误，但这是因为我没有做一些事情来将事情集成到 Schedule 的 props 中，这些工作是用我从上面的清单中缩写出来的代码完成的。本质上，我还有一个用于 Schedule 的 WeekSpec 属性以及包含一般时间模式的异常集。当我从视图中获取 Schedule 参数时，Schedule 有它的 ID 和它的一般时间 WeekSpec，它也有它自己的 ID。然而，Schedule 的 WeekSpec 外键没有设置；只有在我将其设置为 WeekSpec 的 ID 之后，我才能有效地附加。所以，我所要做的就是在这个 ID 匹配之后将附表附件代码移到，一切正常。对不起一个愚蠢的问题。

# c - 使用 Cairo 旋转和保存 PNG 图像

> ID：11834243
> 
> 赞同：2
> 
> 时间：2012-08-06T19:01:38.950
> 
> 标签：c, graphics, 2d, cairo

我正在编写一个需要执行以下操作的小型演示应用程序：

1.  读入参考`PNG`图像文件
2.  将图像旋转`PNG`x 度数
3.  将新图像另存为动画帧
4.  最后旋转的结果返回到第 2 步，直到完成旋转。

结果应该是一系列`PNG`图像文件，以不同程度的旋转显示图像。然后这些图像会以某种方式组合成电影或动画`GIF`。

我创建了以下代码尝试进行一次轮换：

```
#include <cairo.h>
#include <math.h>

/**** prototypes *******/
void Rotate( cairo_surface_t *image, int degress, const char *fileName );
double DegreesToRadians( double degrees );
/***********************/

double DegreesToRadians( double degrees )
{
    return((double)((double)degrees * ( (double)M_PI/(double)180.0 )));
}

void Rotate( cairo_surface_t *image, int degrees, const char *fileName )
{
    int w, h;
    cairo_t *cr;

    cr = cairo_create(image);
    w = cairo_image_surface_get_width (image);
    h = cairo_image_surface_get_height (image);

    cairo_translate(cr, w/2.0, h/2.0);
    cairo_rotate(cr, DegreesToRadians( degrees ));
    cairo_translate(cr, - w/2.0, -h/2.0);

    cairo_set_source_surface(cr, image,  0, 0);
    cairo_paint (cr);

    cairo_surface_write_to_png(image, fileName );
    cairo_surface_destroy (image);
    cairo_destroy(cr);  
}

int main()
{
    cairo_surface_t *image = cairo_image_surface_create_from_png ("images/begin.png");
    Rotate(image, 90, "images/end.png");
    return( 0 );
} 
```

问题是原始图像旋转 90 度后，生成的保存图像旋转但不完全正确。我尝试重新排列`cairo`调用的顺序，认为这可能与表面状态或上下文有关。

开始和结束图像如下所示：

![结果](../Images/50eac837f68f53a255cd08d8cc190f13.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:30:12.593

您正在打开原始图像作为要绘制的表面。打开您的原始 .png 并将其用作*源*`cairo_set_source_surface`，然后将其绘制到通过 创建的新的空*图像*表面上`cairo_image_surface_create`。

从替换开始：

```
cr = cairo_create(image);
w = cairo_image_surface_get_width (image);
h = cairo_image_surface_get_height (image); 
```

和：

```
w = cairo_image_surface_get_width (image);
h = cairo_image_surface_get_height (image);
cairo_surface_t* tgt = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, w, h);

cr = cairo_create(tgt); 
```

那么当然，你会想要保存文件，而`tgt`不是`image`文件，然后进行清理。

# java - 代码在Eclipse中有效，JDK无法编译

> ID：11834244
> 
> 赞同：4
> 
> 时间：2012-08-06T19:01:47.827
> 
> 标签：java, eclipse

我在 Eclipse 和我的 JDK 认为合法的 java 之间遇到了一个有趣的差异。

Eclipse 可以顺利编译以下类，而 Mac OS X 上的 JDK 会产生以下错误。

```
public class Builder {  
    private class Item {}

    public void addItem(Item i) {}

    public static void main(String[] args) {
        new Builder() {{
            addItem(new Item());
        }};
    }
} 
```

```
$ javac Builder.java 
Builder.java:9: non-static variable this cannot be referenced from a static context
            addItem(new Item());
                    ^
1 error 
```

使`Item`类静态解决了这个问题，但它让我有点好奇：Eclipse 是否宽容并编译实际上无效的代码？我是否偶然发现了 Mac OS X JDK 的古怪之处？我错过了什么吗？

**更新** 可能与包括以下内容有关

```
$ java -version
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode) 
```

**更新 2**

使 Item 更可见（默认、受保护或公共）也满足 JDK 编译器的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:24:42.300

javac 1.7.0_04 编译源代码没有错误，所以我建议这是 javac 1.6 中的一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:25:31.227

我得到了相同的结果，但有趣的是，将代码更改为：

```
new Builder() {{
    addItem(this.new Item());
}}; 
```

（应该相同）产生不同的错误消息：

```
Builder.java:9: Builder.Item has private access in Builder
            addItem(this.new Item()); 
```

我怀疑这是真正的潜在错误 -`Item`该类是私有的，因此在匿名子类中不可见。更改`Item`为受保护而不是私有允许原始版本和`this.new`版本都成功编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:20:08.740

~~在 Eclipse 中，默认情况下`Access to a non-accessible member of an enclosing type`可能会被忽略。如果你去 Project->Properties->Java Compiler->Errors/Warning 你可以启用项目特定的设置。~~

差异可能是因为 Eclipse 带有它自己的编译器 - [JDT](http://www.eclipse.org/jdt/core/index.php)的一部分，它的作用与`javac`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:13:34.323

我认为这是eclipse编译器中的一个错误。内部 Item 类不是静态的，因此您只能通过 Builder 对象访问它，如下所示：

`new Builder().new Item()`

在静态块中初始化 Item 类，您没有 Builder 的实例，因此您发布的这段代码不应该工作。非常有趣的错误。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-06T19:09:28.840

将静态添加到项目的类声明中，例如`static class Item {}`

# visual-c++ - 从 CComboBox 获取文本

> ID：11834248
> 
> 赞同：3
> 
> 时间：2012-08-06T19:01:58.460
> 
> 标签：visual-c++, mfc, ccombobox

我有一个 CDialog ( `myDialogBox`)，它有一个`CComboBox`成员 ( `myComboBox`)。`CString`我的目标是从下拉样式的编辑部分获取用户输入的文本（最好是 a ） `CComboBox`。但是，我似乎无法让它工作。

我试过使用`myComboBox.GetWindowText(myString)`. 但是每当我在调试模式下运行它时，我的代码都会在函数`ASSERT(::IsWindow(m_hWnd))`内中断。`CWnd::GetWindowText()`

我也试过`myDialogBox.GetDlgItemText(MY_COMBOBOX_ID, myString)`，它以类似的方式分解。

此外，我尝试过：

```
 COMBOBOXINFO info;
    memset(&info,0,sizeof(info));
    myComboBox.GetComboBoxInfo(&info);
    LPTSTR str = new TCHAR[::GetWindowTextLength(info.hwndItem)];
    ::GetWindowText(info.hwndItem,str,::GetWindowTextLength(info.hwndItem)); 
```

但是，它似乎没有`info`正确填充我的变量。

有人可以指出我正确的方向吗？我究竟做错了什么？有什么建议么？

**编辑：**以防万一它可能有助于理解我的最终目标，我试图有一个组合框，它可以帮助用户图片并从字符串列表中进行选择。尽管如此，如果他/她不想要下拉列表中的任何内容，他可以想出自己的字符串。我想要一种方法来接收他的用户键入的字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T19:06:41.423

您需要`GetWindowText`在对话框被销毁之前调用。这样做的好地方是在`DoDataExchange`对话框的成员函数中。

编辑：如果 CComboBox 对象尚未附加到实际窗口，您也可能会收到错误消息。这通常也发生在`DoDataExchange`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-19T13:21:46.120

您可以使用以下代码内嵌组合框文本：

```
CString cStr;
CWnd* Pfield = GetDlgItem(MY_COMBOBOX_ID);
Pfield->GetWindowText(cStr); 
```

# xcode - 在下一个视图中从 uitableview 获取数据，返回调用视图并将其显示在文本字段中

> ID：11834250
> 
> 赞同：0
> 
> 时间：2012-08-06T19:02:10.483
> 
> 标签：xcode, uiview, xcode3.2

我有一个带有文本字段和按钮的视图（导航到下一个视图）。

当我单击该按钮时，将加载一个具有 UITableView 并从 nsmutablearray 填充的新视图。我在这里选择了多行，当我单击按钮时，我将其保存在一个变量中，单击此按钮也会让我回到我的第一个视图

现在我想做的是，当我返回时，从第二个视图 uitableview 或从我保存它的变量中选择的数据应该显示在第一个视图的文本字段中。

我不知道该怎么做。我是 xcode 的新手。有人可以帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:23:03.863

当前方法的问题在于，您将选定的数据存储在返回第一个视图时从内存中删除的视图上。您应该尝试遵循一种 MVC（模型视图控制器）模式。

简而言之：将您的数据集中在应用程序的一个位置。例如在 RootViewController 上的 Model 类上并从那里访问数据。当用户选择几行时，将哪些行写回模型并返回到前一个视图。然后，当返回上一个视图时，读取从这个集中模型中选择的元素并将它们显示给用户。

# jboss - JBoss 社区诉 Redhat 版本

> ID：11834252
> 
> 赞同：0
> 
> 时间：2012-08-06T19:02:24.443
> 
> 标签：jboss, redhat

如何判断系统运行的是 Redhat JBoss EAP（需要订阅）还是免费社区版？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:32:02.930

看开头`JBOSS_HOME/server/<profile>/log/boot.log`，**社区版**：

```
14:17:43,333 INFO  [AbstractServer] Starting: JBossAS [6.0.0.Final "Neo" 
```

对于**EAP**：

```
09:53:55,419 INFO [Server] Release ID: JBoss [EAP] 4.3.0.GA 
```

# vba - MS Access 中子表单数据表视图中的复选框

> ID：11834256
> 
> 赞同：1
> 
> 时间：2012-08-06T19:02:35.687
> 
> 标签：vba, ms-access, ms-access-2000

我是 MS Access 的新手。我有一个子表单，我需要在子表单中显示的每一行上都有一个复选框。我的子表单在数据表视图中。

网上有很多帖子讨论这个问题，但没有一个给出明确的答案。

谁能帮助我指出正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T19:05:02.033

如果您使用的是数据表视图，则控件类型由数据类型决定。因此，如果数据集中有一个是/否（布尔）字段，那么它应该在表单中显示为一个复选框。

# rdf - sparql 查询中三元组的顺序会影响结果吗？

> ID：11834263
> 
> 赞同：3
> 
> 时间：2012-08-06T19:03:09.900
> 
> 标签：rdf, sparql, pellet, n-triples

我正在使用**pellet**进行sparql 查询，并且根据查询中三元组的顺序得到不同的结果，对吗？

例如，给定以下 N-Triples 数据输入：

```
<http://example.com/thing1> <http://example.com/hasDefinition> <http://example.com/def_thing1> .
<http://example.com/thing1> <http://www.w3.org/2000/01/rdf-schema#label> "Thing 1" .
<http://example.com/def_thing1> <http://www.w3.org/2000/01/rdf-schema#comment> "thing 1 it's awesome".

<http://example.com/thing2> <http://example.com/hasDefinition> <http://example.com/def_thing2> .
<http://example.com/thing2> <http://www.w3.org/2000/01/rdf-schema#label> "Thing 2" .
<http://example.com/def_thing2> <http://www.w3.org/2000/01/rdf-schema#comment> "thing 1 it's cool".

<http://example.com/thing3> <http://example.com/hasDefinition> <http://example.com/def_thing3> .
<http://example.com/thing3> <http://www.w3.org/2000/01/rdf-schema#label> "Thing 3" .
<http://example.com/def_thing3> <http://www.w3.org/2000/01/rdf-schema#comment> "thing 3 it's fine".

<http://example.com/thing4> <http://example.com/hasDefinition> <http://example.com/def_thing4> .
<http://example.com/thing4> <http://www.w3.org/2000/01/rdf-schema#label> "Thing 4" .
<http://example.com/def_thing4> <http://www.w3.org/2000/01/rdf-schema#comment> "thing 4 it's exactly what i need". 
```

以下查询：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX example: <http://example.com/>

SELECT * WHERE {
    ?thing ?rel "Thing 4".
    ?thing example:hasDefinition ?def.
    ?def rdfs:comment ?definition.
} 
```

回报：

```
Query Results (1 answers): 
thing  | rel   | def        | definition                        
================================================================
thing4 | label | def_thing4 | "thing 4 it's exactly what i need" 
```

但下面的查询（只是前一个的改变）：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX example: <http://example.com/>

SELECT * WHERE {
    ?thing example:hasDefinition ?def.
    ?def rdfs:comment ?definition.
    ?thing ?rel "Thing 4".
} 
```

我得到以下答案：

```
Query Results (5 answers): 
thing  | def        | definition                         | rel                
==============================================================================
thing4 | def_thing4 | "thing 4 it's exactly what i need" | _TOP_DATA_PROPERTY_
thing4 | def_thing4 | "thing 4 it's exactly what i need" | label              
thing1 | def_thing1 | "thing 1 it's awesome"             | _TOP_DATA_PROPERTY_
thing2 | def_thing2 | "thing 1 it's cool"                | _TOP_DATA_PROPERTY_
thing3 | def_thing3 | "thing 3 it's fine"                | _TOP_DATA_PROPERTY_ 
```

我没想到这种行为，我不知道它是否正确，我是那个提出错误查询的人。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:41:06.970

您绝对应该使用这两个查询获得相同的结果，像这样更改三重模式的顺序应该没有区别。这可能是查询引擎中的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T21:54:45.967

正如 Jan 所建议的那样，考虑到数据和查询，纯 SPARQL 引擎不应该给出不同的结果。

但是，您使用的是 Pellet（尽管您没有说是哪个版本），它具有带有嵌入式推理器的 SPARQL 引擎。这意味着如果 SPARQL 引擎可以通过推理器派生额外结果，则它可以合法地返回其他结果（请参阅规范中的[扩展 SPARQL 基本图形模式匹配](http://www.w3.org/TR/rdf-sparql-query/#sparqlBGPExtend)）。

一个版本的查询会导致推理器启动，而另一个版本却没有，这有点奇怪，您可能应该向 Pellet 开发人员询问这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:59:31.253

三重模式的顺序不应改变结果。

您的查询的不寻常之处`?rel`在于在属性位置中的使用。

`_TOP_DATA_PROPERTY_`Pellet 引擎可能会在内部抑制某些事情 - 但如果`?thing ?rel "Thing 4".`是最后一个模式，则数据不会再次通过 Pellet，只是来自数据库。

# php - 如何将数组作为参数从 PHPUnit 中的提供者传递？

> ID：11834271
> 
> 赞同：9
> 
> 时间：2012-08-06T19:03:20.823
> 
> 标签：php, phpunit

我有一个接收数组作为参数的测试方法，我想从数据提供者方法中提供数据？

怎样才能做到这一点？

```
public function dataProvider(){
        return array(array(
                'id'=>1,
                'description'=>'',
        ));
}

/**
 * @dataProvider dataProvider
 */
public function testAddDocument($data){
// data here shall be an array provided by the data provider
// some test data here
} 
```

发生的事情是它传递了'id'键的值......等等

我想传递整个数组

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-07T06:44:54.657

数据提供者方法必须返回一个数组，其中包含一个数组，用于传递给测试方法的每组参数。要传递一个数组，请将其与其他参数一起包含。请注意，在您的示例代码中，您将需要另一个封闭数组。

这是一个返回两组数据的示例，每组数据都有两个参数（一个数组和一个字符串）。

```
public function dataProvider() {
    return array(                       // data sets
        array(                          // data set 0
            array(                      // first argument
                'id' => 1,
                'description' => 'this',
            ),
            'foo',                      // second argument
        ),
        array(                          // data set 1
            array(                      // first argument
                'id' => 2,
                'description' => 'that',
            ),
            'bar',                      // second argument
        ),
    );
} 
```

**重要提示：**数据提供者方法必须是非静态的。PHPUnit 实例化测试用例以调用每个数据提供者方法。

# css - 为什么这些 ul 不能在 IE7 中正确浮动？

> ID：11834275
> 
> 赞同：0
> 
> 时间：2012-08-06T19:03:28.690
> 
> 标签：css, internet-explorer-7

我试图让这个菜单在 IE7 中工作。除了这个，我已经解决了所有的错误。当您悬停一个列表项时，弹出的抽屉内的 UL 不会正确浮动。如果您查看 Chrome 中的页面，这就是我之前设置 CSS 的方式（显示内联块等）。那也不起作用，所以我尝试将它们向左浮动。

向左浮动解决了我在每个 li 左侧有额外文本缩进的问题，但 ul 仍然无法正确浮动。

有没有人有任何想法？

[http://playground.willpracht.net/megaMenu.html](http://playground.willpracht.net/megaMenu.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:25:08.990

重做代码以尽可能多地删除 > 选择器。他们让一切变得更难处理。这就像给所有东西一个 id，并使覆盖的东西越来越长。老实说，我将有子 div 而不仅仅是菜单，因为您使第一个 li 看起来像标题，但在语义上使它们与所有其他链接没有什么不同。内部带有链接的实际标题更具语义意义。例如，有一个称为工具的链接，然后其余的同级链接是...工具。

无论如何，当漂浮的东西，看看你的宽度。我看到很多元素根本没有声明宽度。在 IE 中，对于浮点数，这很重要。我会设置子 div 的宽度（如果需要，它们可以在 em 中），然后设置内部浮动 ul 子项的宽度。它们的组合宽度不应等于 100%。例如，如果一个 div 是 140px 宽，不要尝试在每个宽度为 70px 的两个浮动 ul 中，即使这应该适合，并且在大多数浏览器中都可以。

如果你想看的话，我有一些超级菜单的例子，但是已经有很多了，我不相信我有一个在子菜单中带有浮动 ul 的菜单。

# java - lwjgl - 编辑器视口

> ID：11834277
> 
> 赞同：0
> 
> 时间：2012-08-06T19:03:42.380
> 
> 标签：java, opengl, editor, viewport, lwjgl

我正在使用 lwjgl 进行一个项目，并且在关注进展方面我已经走了很长一段路。现在我需要创建一个编辑器，以便我的映射器可以开始制作地图并使我的调试工作更轻松。为了做一个像样的编辑器，我需要一个用户界面和至少一个视口。

如果你在 google 中搜索 Unreal Editor (tm)，你就会知道我在说什么。问题是我不知道如何实现这样的目标。

**编辑：**这是一个自上而下的 3D 游戏。我唯一需要知道的是如何使 opengl (lwjgl) 渲染到窗口的特定区域，而不是使用整个窗口。

所以，我只需要知道如何告诉 OpenGL 渲染到窗口的特定区域，剩下的我就知道了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:15:34.910

试试glScissor，你可以在其中找到它，`org.lwjgl.opengl.GL11`它可以让你在指定区域渲染内容，并且它之外的任何东西都会被切断，非常适合滚动区域！

您还需要`GL_SCISSOR_TEST`在使用之前启用它，然后在使用后禁用`glEnable(GL_SCISSOR_TEST)`它`glDisable(GL_SCISSOR_TEST)`

# security - 这是加密用户数据的好方法吗？

> ID：11834278
> 
> 赞同：0
> 
> 时间：2012-08-06T19:03:45.270
> 
> 标签：security, encryption

我想加密我存储在我的服务器上的用户数据，以便在我的服务器受到威胁时是安全的。以下是一个很好的方法：

每个用户的密码都是 GPG 密钥对的密码。在保存到数据库之前，所有用户的数据都使用公钥加密。密码被丢弃，密钥对仅在会话期间保留，因此只有在提供密码时才能解密数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:26:33.223

从有人破坏您的服务器的角度来看，确保数据安全的唯一方法是您正在做的事情，当用户每次都必须提供解密密钥时。

任何其他技术都会留下一些可以利用的弱点。

但是你必须确保另一种方式（我的意思是当用户提供密码时）也是安全的，使用 https 并防止会话攻击、跨脚本等。

如果您没有特定的硬件来提供额外的保护，例如当它们基于时间生成伪随机数（银行令牌也是如此）或类似的东西时，最好的办法是将密钥与用户或使用具有更高安全性的第三方存储，如 Azure 或 Amazon 上的 SQL。

在考虑了很多关于将我的加密密钥放在哪里以使数据变得模糊的问题后，我使用了相同的方法，即使我的服务器受到了损害。我发现的唯一安全方式是“与用户一起”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:32:34.400

您的方法只能保护您免受 1 种攻击：窃取您的数据库（并且只有在您正确加密密钥的情况下）。如果您的服务器受到威胁，他们可以获取您的 ssl 私钥并监听您的网络流量（使用用户的密钥）

# android - 自定义组件中 LayoutPrams 的 leftMargin 属性

> ID：11834279
> 
> 赞同：1
> 
> 时间：2012-08-06T19:03:51.057
> 
> 标签：android, android-layout, android-linearlayout, ontouchlistener

我有一个自定义组件，它扩展了 LinearLayout 并实现了 onTouchListener

此组件在 onTouch 触发时对图形进行一些更改并更改自定义视图的 leftMargin 属性

当我将组件添加到项目而不覆盖 onTouch 方法时，一切似乎都在工作，但是当我覆盖 onTouch 方法时，左边距状态变为相对于屏幕的宽度。

为什么会这样？

![在此处输入图像描述](../Images/b82d2b1ba21521d2f937ac48008e15be.png)

自定义组件：

```
 @Override
    public void setOnTouchListener(OnTouchListener l) {
        super.setOnTouchListener(l);

        navigationButton.setonTouchListener(l)
    }

    @Override
    public boolean onTouch(View view, MotionEvent event) {
       .....
       return true;
    } 
```

活动：

```
 CustomComponent customComponent = (CustomComponent)findViewById(R.id.custom_component);
    customComponent.setOnTouchListener(new OnTouchListener(.....  // This part leads to the change in leftMargin of the customComponent 
```

**编辑：** 现在编辑了一点代码： *之前：*

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="64.67dp"
        android:gravity="right|center_vertical" >

            <com.est.bla.bla.customcomponents.SomeCustomComponent
                android:id="@+id/someid"
                android:gravity="center"
                android:layout_marginRight="6dip"
                android:layout_width="100dip"
                android:layout_height="50dip" >
            </com.est.bla.bla.customcomponents.SomeCustomComponent> 
```

*现在：（*现在它工作正常）

```
 <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="64.67dp"
        android:layout_alignParentRight="true"
        android:gravity="center_vertical" >

            <com.est.bla.bla.customcomponents.SomeCustomComponent
                android:id="@+id/someid"
                android:gravity="center"
                android:layout_marginRight="6dip"
                android:layout_width="100dip"
                android:layout_height="50dip" >
            </com.est.bla.bla.customcomponents.SomeCustomComponent> 
```

所以我想在这种特殊情况下，`layout_alignParentRight="true"`比 `gravity="right"`

# c++ - 实例化类的范围/未在此范围内声明

> ID：11834281
> 
> 赞同：0
> 
> 时间：2012-08-06T19:03:55.017
> 
> 标签：c++

我是 C++ 的新手，但我学了一点 Java，并且我/我第一次同时使用 SDL，但我的问题是我正在尝试创建一个对象（桨）p1 和 p2。

这

```
#ifndef PONG_H_
#define PONG_H_
#undef main
#include <SDL/SDL.h>
#include <SDL/SDL_image.h>
#include <SDL/SDL_ttf.h>

class paddle{
private:
    int y;
    int yv;
    int x;
public:

    paddle(){
    y = 0;
    yv = 0;
    x = 0;
    }

    paddle(int ex, int why, int vel){
        y = why;
        yv = vel;
        x = ex;
        }

    void setY(int ycoord) {y = ycoord;}
    void setV(int velocity){ yv = velocity;}
    void setX(int xcoord) {x = xcoord;}
    int getX() {return x;}
    int getY() {return y;}
    int update(){y += yv; return y;}

};

class Pong { //pong class where everythin gets its name and a purpose.

private:

    SDL_Surface * Paddle;
    SDL_Surface * Ball; //SDL_Surface pointer for Ball
    SDL_Surface * screen;   //SDL_Surface  pointer to backbuffer

public:
    int Running;
    Pong(); //eh..

    int OnExecute(); //another function returning a value.
    int w; //width of screen
    int h; //height of screen
    bool OnInit();
    void OnEvent(SDL_Event* Event);
    void OnLoop();
    void OnRender();
    void OnCleanup();

    void redraw( int x, int y, SDL_Surface* source, SDL_Surface* destination ) { //Make a temporary rectangle to hold the offsets
    SDL_Rect offset; //Give the offsets to the rectangle
    offset.x = x; offset.y = y;
    SDL_BlitSurface( source, NULL, destination, &offset );//Blit the surface
    offset.x =0; offset.y=0; //resets the offsets sicne they apaprently dont reset per use.
    };

};

#endif /* PONG_H_ */ 
```

是我的头文件，它也包含了 pong 类的主要功能，但我省略了这些以减少复杂性。让我知道这些是否需要一个好的答案。

我在这里声明对象...

```
#include <iostream>
#include <SDL/SDL.h>

#include "Pong.h"
paddle p1;
paddle p2;

Pong::Pong(){
h = 768;
w = 1024;
screen = NULL;
Paddle = NULL;
Ball = NULL;

Running = true;
atexit(SDL_Quit);

}

int Pong::OnExecute() {
    if(OnInit() == false)
        return-1;
    SDL_Event Event;
    while(Running) {
        while(SDL_PollEvent(&Event)) {
            OnEvent(&Event);
        }

        OnLoop();
        OnRender();
    }
    OnCleanup();
return 0;
}

int main( int argc, char* args[]) {
    Pong theApp;
    return theApp.OnExecute();
} 
```

但是我在……这里使用它是什么让我很困难：

```
#include "Pong.h"
void Pong::OnEvent(SDL_Event* Event) {
    if(Event->type == SDL_QUIT)
        Running = false;
    switch(Event->type)
    {

        case SDL_KEYDOWN: //look for key holds
            switch(Event->key.keysym.sym) //check key values and changes coords respectiely
            {
            default:
                break;
            case SDLK_UP:
                p2.setV(-2);
                break;

            case SDLK_DOWN:
                p2.setV(2);
                break;

            case SDLK_w:
                p1.setV(-2);
                break;

            case SDLK_s:
                p1.setV(2);
                break;

            case SDLK_ESCAPE:
            Running = false;
                break;
            }
            break;
        case SDL_KEYUP:
            switch(Event->key.keysym.sym)
            {
            default:
                break;
                case SDLK_UP:
                    p2.setV(0);
                    break;

                case SDLK_DOWN:
                    p2.setV(0);
                    break;

                case SDLK_w:
                    p1.setV(0);
                    break;

                case SDLK_s:
                    p1.setV(0);
                    break;
            }
            break;
        break;//break of Key holding event check
    }
} 
```

我很难问这个问题，因为我不知道从哪里开始。我尝试了许多不同的奇怪的东西，我现在迷路了。如果您需要更多信息，我很乐意提供。

```
void Pong::OnLoop(){

    if(p1.getY()<=0){
        p1.setV(0);
        p1.setY(0);
    }
    if(p2.getY()<=0){
        p2.setV(0);
        p2.setY(0);
    }
    if(p1.getY()>=h - Paddle->h){
        p1.setV(0);
            p1.setY(h - Paddle->h);
        }
    if(p2.getY()>=h - Paddle->h){
        p2.setV(0);
            p2.setY(h - Paddle->h);
        }
} 
```

..\src\Pong_OnLoop.cpp:11:5: 错误: 'p1' 未在此范围内声明

..\src\Pong_OnLoop.cpp:15:5: 错误: 'p2' 未在此范围内声明

..\src\Pong_OnLoop.cpp:19:5: 错误: 'p1' 未在此范围内声明

..\src\Pong_OnLoop.cpp:23:5: 错误: 'p2' 未在此范围内声明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:24:58.307

如果您希望桨叶在其定义的文件中可见，则必须在头文件中添加声明

```
extern paddle p1;
extern paddle p2; 
```

所以其他 .cpp 文件会知道它们存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:49:37.940

由于您没有提供明确的问题，因此很难提供正确的答案，但我的猜测是您无法在 OnEvent-/OnLoop-Method 中访问 p1 和 p2。

让两个桨对象存在于全局命名空间中是绝对必要的吗？因为在这种情况下，我认为最好有 2 个 paddle 成员作为 Pong 类的一部分，我也会像这样使用初始化列表：

```
class Pong {
private:

    SDL_Surface * Paddle;
    SDL_Surface * Ball; //SDL_Surface pointer for Ball
    SDL_Surface * screen;   //SDL_Surface  pointer to backbuffer

    paddle p1;
    paddle p2;

public:
    Pong() :
        h(768),
        w(1024),
        screen(NULL),
        Paddle(NULL),
        Ball(NULL),
        Running(true),
        p1(10, 384, 0),
        p2(1014, 384, 0) {
        atexit(SDL_Quit);
    };

    // ...
}; 
```

根据优化设置和默认内存初始化，您甚至可能不需要所有初始化程序，但这不是重点。这样，您应该可以在所有 Pongs 自己的方法中访问 p1 和 p2 。Bo Perssons 的回答可能也有效，但我认为这是一种更面向对象的方法，因此是面向 C++ 的方法。

附带说明：您说头文件包含更多方法 - 看到您的构造函数在 cpp 文件中实现，并且在头文件中实现了 redraw-Method，您可能想了解更多有关内联的信息。在此示例中这不是什么大问题，但将更复杂的方法移至翻译单元（cpp 文件）通常是最佳实践，尤其是在创建库时。

# c# - 编辑并继续和测试项目

> ID：11834282
> 
> 赞同：1
> 
> 时间：2012-08-06T19:04:02.153
> 
> 标签：c#, visual-studio-2010, debugging, tdd

有时我会从 WinForm 存根应用程序测试我的类库，即使我正在开发它以立即在 Web 应用程序中使用。从 WinForm 应用程序调用类库将使我能够编辑类库中的代码并继续，这是 WebForm 应用程序中不可用的功能。

我不应该能够在测试项目中获得与 WinForm 应用程序相同的编辑和继续功能吗？当我尝试修改测试类或从中调用的类库中的代码时，出现以下错误。

![在此处输入图像描述](../Images/9e22802a1b8d625c816a41dcca7c64fe.png)

“启用编辑并继续”设置在工具 --> 选项下

# qml - 在 QML 中提交表单

> ID：11834291
> 
> 赞同：1
> 
> 时间：2012-08-06T19:04:50.650
> 
> 标签：qml

我想这样做：显示一些表单，处理 Rectangle::onClicked 事件（禁用表单，将不透明度设置为 0.2，处理一些 javascript 以提交表单，然后将不透明度设置回 1.0，启用表单）。但我不知道该怎么做。

似乎 onClicked() 是在“批处理”模式下处理的，在函数退出之前，更改任何 ui 属性都是不可见的。我玩过状态、过渡和动画，但仍然没有成功。

感谢您的任何建议，米哈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:58:10.053

您可以简单地启动两个自定义动画，一个隐藏表单，一个显示它。像这样的东西：

```
SequentialAnimation {
  id: submitAndHideForm

  ParallelAnimation {
    // Animations to hide the form elements
  }
  ScriptAction {
    script: submitForm()
  }
}

ParallelAnimation {
  id: showForm

  // Animations to show the form elements
} 
```

然后，您可以在`submitAndHideForm.start()`要提交表单时开始第一个，当您收到回复时，您可以开始第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:04:29.887

应该可以用状态来解决。您可以尝试在[WorkerScript](http://doc.qt.nokia.com/4.7-snapshot/qml-workerscript.html)中进行 Javascript 处理。处理完成后，它将向 QML WorkerScript 元素发送回复，该元素将表单的状态再次设置为启用。因此，在 onClicked 中，您通过设置状态来执行禁用动画，在 WorkerScript 元素的 onMessage 函数中，您通过将状态设置为“启用”来执行启用动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:40:11.437

也许您在谈论`XMLHttpRequest`异步使用。在发送请求时“禁用”表单，并在使用`onreadystatechange`调用时“启用”它`readyState === XMLHttpRequest.DONE`。

# sqlite - 列为零的 SQLite SELECT 语句

> ID：11834293
> 
> 赞同：0
> 
> 时间：2012-08-06T19:05:16.530
> 
> 标签：sqlite

我对 SQLite 很陌生。我有一个非常基本的问题。为什么我不能选择特定列为零的行？

is_unwanted 列是类型`TINYINT`（我在 SQLite 中看到的基本上是指`INTEGER`）

所以，我在数据库中只有一条记录（用于测试）。当我尝试

```
SELECT is_unwanted FROM 'urls' 
```

我得到“ **0** ”（**零**）的结果，这很好，因为该列包含实际数字**0**。

我试过=>

```
SELECT * FROM 'urls' WHERE is_unwanted = 0 
```

并没有结果，但是

```
SELECT * FROM 'urls' WHERE is_unwanted <> 0 
```

给我结果。

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:16:45.453

尝试运行

```
select '{' || is_unwanted || '}' from urls 
```

查看数据库中的值是否真的是包含空格的字符串。

SQLite 是一个动态类型的数据库；当您指定时，`TINYINT`is 是该列的提示（SQLite 使用术语“亲和力”）。您可以使用

```
 select is_unwanted, typeof(is_unwanted) from urls 
```

查看值及其类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T04:37:07.577

你可以试试：

```
SELECT * FROM urls WHERE coalesce(is_unwanted,'') = '' 
```

# ubuntu - 如何以编程方式从 MP3 中删除静音？

> ID：11834297
> 
> 赞同：29
> 
> 时间：2012-08-06T19:05:33.643
> 
> 标签：ubuntu, audio, ffmpeg, mp3, sox

我有 MP3 文件，有时最后会保持沉默。我想自动消除这种沉默。据我所知，这是“完美”的静音（0 振幅），而不是背景噪音。内容的长度和静音会有所不同。

我发现了一些关于[裁剪到前 30 秒](https://stackoverflow.com/questions/43890/crop-mp3-to-first-30-seconds)或[裁剪到 X 和 X+N 秒](https://stackoverflow.com/questions/1390731/how-to-crop-a-mp3-from-x-to-xn-using-ffmpeg)的其他问题`ffmpeg`。我想我可以使用类似的方法，只要我有办法找到沉默何时开始。我将如何以编程方式做到这一点？

例如，一种可能的解决方案是使用一个命令来查找“静音”的开头。我期待这样的序列

```
end=$(ffmpeg some-command-to-find-start-of-silence)
ffmpeg -t "$end" -acodec copy -i inputfile.mp3 outputfile.mp3 
```

该解决方案不必**使用**，`ffmpeg`但它确实需要在 Ubuntu 上可用。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-06T19:30:38.173

```
sox inputfile.mp3 outputfile.mp3 silence 1 0.1 0.1% reverse silence 1 0.1 0.1% reverse 
```

这将从您的文件中修剪任何超过 0.1 秒的静音。如果您只关心修剪末端，则可以简化为：

```
sox inputfile.mp3 outputfile.mp3 reverse silence 1 0.1 0.1% reverse 
```

可以在[此处](http://digitalcardboard.com/blog/2009/08/25/the-sox-of-silence/)`sox`找到有关其作品的详细介绍。`silence`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-30T10:06:35.553

您可能正在寻找一种**无损**解决方案，即*不需要重新编码*（这会降低质量）的解决方案。

我相信[mp3splt](http://mp3splt.sourceforge.net/mp3splt_page/home.php)是您正在寻找的。它可以从命令行和 GUI 使用。

```
sudo aptitude install mp3splt mp3splt-gtk 
```

应该适用于 Debian 和 Ubuntu。

从手册页：

> 您还可以尝试使用静音检测（请参阅 -s 选项）自动拆分文件，使用静音检测（请参阅 -r 选项）或固定时间长度（请参阅 -t 选项）**修剪文件**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-06T19:28:46.460

看看[`silencedetect`FFmpeg 音频过滤器](http://ffmpeg.org/ffmpeg.html#silencedetect)：

> 检测音频流中的静音。
> 
> 当此过滤器检测到输入音频音量小于或等于噪声容限值且持续时间大于或等于检测到的最小噪声持续时间时，它会记录一条消息。
> 
> 打印时间和持续时间以秒表示。

它具有参数来调整必须将某些东西视为静音的程度，以及需要注意静音的时间。

# ios - 将 SBJson 与 facebook sdk 静态库一起使用

> ID：11834301
> 
> 赞同：0
> 
> 时间：2012-08-06T19:05:58.107
> 
> 标签：ios, facebook, sdk, sbjson

目前，当我尝试将 SBJson 库与 facebook-ios-sdk 放在一起时，我得到了

`'duplicate interface definition for class 'SBJsonParser''`

过来。

所以我创建了一个静态 facebook-ios-sdk 库，然后我还在同一个项目中获得了我的标准 SBJson 库。我得到了错误。

任何人都可以提出解决此问题的方法吗？我真的需要在我的应用程序中使用那个库......因为我已经在这个库中有几千行代码并且也需要实现 facebook......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:10:27.787

facebook SDK 已经包含 SBJSON 库。这就是您收到重复定义错误的原因。尝试删除您的 SBJSON 文件，然后`#import "SBJSON.h"`，它应该从您的 facebook SDK 中获取该文件。

尝试：`initWithData:encoding:`NSString 方法。

```
NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSDictionary *dict = [responseString JSONValue]; 
```

# git - Git推送不能快速合并是什么意思？

> ID：11834305
> 
> 赞同：6
> 
> 时间：2012-08-06T19:06:29.863
> 
> 标签：git, merge, git-merge, fast-forward

有人可以提供一个简单的示例，说明由于无法进行快进而导致 Git 推送到中央仓库失败的原因吗？本地回购与中央回购的状态需要是什么样子才能发生这种情况？真的很难想象这个......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T20:15:41.477

我假设你看到了这个问题：

```
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to '/Users/mayoff/t/test/central'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

以下是“非快进更新被拒绝”问题的发生方式。

假设 Alice 和 Bob 正在做一个项目。他们每个人都有一个存储库，并且有一个中央存储库，它们都可以从中推送和拉取。最初，三个存储库如下所示：

![初始同步回购](../Images/0b77da1aedfc150dc750fbf372d279fb.png)

现在 Alice 和 Bob 都做了一些工作。每个人都向其本地存储库提交不同的更改：

![私人仓库有新的提交](../Images/f543a8eed5bb1a1efd990b7312171680.png)

接下来，Alice 将她的更改推送到中央仓库：

![由 Alice 更新的中央仓库](../Images/f93afad73205a390bf1a148b681609da.png)

接下来，Bob 尝试推动。中央仓库的主分支指向提交 3。Bob 的推送尝试将其更新为指向提交 4。由于提交 4 没有提交 3 作为祖先，因此需要合并，但`git push`不会进行真正的合并。它只做“快进”，新主人以旧主人为祖先。所以 Bob 得到了错误，因为他试图推动一些需要真正合并的东西，而不是快进。

要成功推送，Bob 必须首先从中央仓库获取新的提交：

![Bob 获取了 Alice 的提交](../Images/2903fd97150b82f1398ce581cd8ee7ff.png)

并且他必须将他的更改（commit #4）与 Alice 的更改（commit #3）合并，创建一个将两个提交都作为祖先的新提交：

![Bob 已合并提交](../Images/275f1ef7c72bc80c1d4ad42c6e610f52.png)

提取和合并可以在两个命令（`git fetch`后跟`git merge`）或一个命令（`git pull`）中完成。

现在 Bob 可以推送成功了，因为中央 repo 看到新的 master 有旧的 master 作为祖先。

![Bob 推动了合并](../Images/431240afe6b845d088fd1a1b093e816e.png)

请注意，现在 Alice 缺少 Bob 的提交。如果她对她的 repo 进行更多提交并在从中央 repo 拉出之前尝试推送，她将得到非快进错误，她将不得不获取并合并来修复它，就像 Bob 所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:59:58.477

只需在同一分支上的中央仓库上提交，而无需拉到本地仓库。然后在本地提交并尝试推送。

# arrays - 根据数组对象的某些属性过滤数组

> ID：11834307
> 
> 赞同：0
> 
> 时间：2012-08-06T19:06:41.790
> 
> 标签：arrays

我有一个数组，其中存储了一些对象。假设我有应用程序类型的对象。每个应用程序对象都有一些与之相关的信息，例如 applicationType、appId 等。我需要为每个 applicationType 创建单独的数组。就像每次我需要取出相同应用程序类型的对象时一样。即最后我需要一个由对象组成的数组（这将是相同applicationType的数组）例如：第0个索引处的对象将是applicationType1的应用程序数组。第一个索引处的对象将是 applicationType 2 的应用程序数组。等等......最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:26:30.020

您创建数组数组，然后遍历原始对象数组，找出每个对象的类型并将其添加到数组数组中的适当数组中，每次遇到类型时创建一个新对象第一次。您需要从类型到数组中的索引的映射；地图（或字典）会很好。实际上，如果您有灵活性，我会将数组数组设为地图/字典并去掉中间人。

# php - 如何使用 PHP 从长 url 中获取基本名称？

> ID：11834308
> 
> 赞同：1
> 
> 时间：2012-08-06T19:06:44.643
> 
> 标签：php, regex

如果我有一个包含 URL 的变量，那么如何获取基本 URL？那是，

```
$url = 'http://www.domain.com/some/stuff/that/I/do/not/want/';
$base_url = some_clever_function($url);
// $base_url is now set equal to 'domain.com' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T19:08:40.197

[`parse_url`](http://php.net/manual/en/function.parse-url.php)将能够为您提取主机。

它有第二个参数，您可以借助它提取 URL 的不同部分。要提取主机，请使用`parse_url`以下方式：

```
$host = parse_url($url, PHP_URL_HOST); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-06T19:08:57.353

```
$url = 'http://google.com/dhasjkdas/sadsdds/sdda/sdads.html';
$parse = parse_url($url);
print $parse['host']; // prints 'google.com' 
```

第二种方法

```
<?php
// get host name from URL
preg_match("/^(http:\/\/)?([^\/]+)/i",
    "http://www.php.net/index.html", $matches);
$host = $matches[2];

// get last two segments of host name
preg_match("/[^\.\/]+\.[^\.\/]+$/", $host, $matches);
echo "domain name is: {$matches[0]}\n";

/* Output is php.net */

?> 
```

# wcf - WCF 没有端点侦听更大的文件

> ID：11834310
> 
> 赞同：6
> 
> 时间：2012-08-06T19:06:48.577
> 
> 标签：wcf, iis-7.5

我在 2K8R2 开发服务器上部署了 WCF 4.0 服务，并在 IIS 7.5 下托管。我从测试应用程序（WPF）本地调用它。我在发送较大文件（通过字节数组）时遇到问题，在尝试发送 23MB（或更大）文件时出现以下错误。

> 在 http:///FileStorageClone/FileStorage.svc 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

最大 19MB 可以正常工作。我在 web.config 文件中提高了超时设置并将最大缓冲区、接收到的消息和数组大小设置为 2GB。几乎立即抛出异常（没有足够长的时间超时）。

它使用 basicHttpBinding 运行，但随着它的巩固，下一步将是其他绑定类型。

我首先解决了与小文件的连接，然后移动到更大的文件。在 64KB 时，我遇到了最大缓冲区并收到了消息大小。在 4MB 时，我了解到我需要将 system.Web 下的 httpRuntime 从默认的 4GB 值提高。

对我来说，这感觉像是 IIS 或站点级别的问题。知道我可能会在哪里失踪吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-06T20:31:41.940

看起来这是更多在 IIS 级别的设置。在 web.config 或通过 appcmd.exe 设置 requestFiltering 是两个可行的选项。在 web.config 中，以下示例将限制设置为 22 亿字节：

```
 <system.webServer>
    <security>
      <requestFiltering> 
        <requestLimits maxAllowedContentLength="2200000000" /> 
      </requestFiltering> 
    </security>
  </system.webServer> 
```

感谢： [http ://www.dantor.com/support/misc/web-config-requestFiltering-user-agent.aspx](http://www.dantor.com/support/misc/web-config-requestFiltering-user-agent.aspx)

此外，通过 appcmd.exe，请参阅：[http ://forums.iis.net/t/1066272.aspx](http://forums.iis.net/t/1066272.aspx)

# windows-8 - 适用于移动设备的 Windows 8 应用程序

> ID：11834312
> 
> 赞同：2
> 
> 时间：2012-08-06T19:06:56.610
> 
> 标签：windows-8, windows-phone

我是 Windows Phone 应用程序和 Windows 8 应用程序的新手。我所知道的关于 Windows 8 的只有 Metro 风格，以及它将在 PC、平板电脑和手机上运行的消息。

我想开始为预期的 Windows 8 Phone 设备开发应用程序。我为 Windows 8 找到的所有指南都是为 Windows 8 平板电脑或 PC（不是手机）开发应用程序。[这](http://msdn.microsoft.com/en-us/windows/apps/br229516)是我正在查看的 Windows 8 SDK 的链接。

我是否应该开始开发常规的 Windows 8 应用程序（用于平板电脑），假设它将在预期的即将推出的 Windows 8 手机设备上运行？

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:38:11.653

我认为关于 windows phone 8 应用程序的开发并没有什么真正官方的（除了关于未来设备新功能的集成）。互联网上的一切都表明，促使微软更新 wp7 的原因之一正是希望将 windows 8 的开发与 windows phone8 的开发融合在一起。这种融合将是可视化的（例如，枢轴布局的特点是单个页面可水平滚动，类似于 Windows 8 应用程序）和底层（内核非常相似）。增强的硬件将执行更复杂的操作（从而趋向于类似于 pc 的用户体验）。我们还知道，在实际微软商店的一些 Metro 风格应用程序中，有人在源代码中找到了与 Windows Phone 8 中的应用程序集成相关的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T23:47:33.813

到目前为止，微软很少发布关于 Windows Phone 8 开发者故事的公告。可以在此处的 Windows Phone 峰会视频中查看已宣布的小消息：

[http://channel9.msdn.com/Events/Windows-Phone/Summit](http://channel9.msdn.com/Events/Windows-Phone/Summit)

到目前为止，关于跨两个平台开发的唯一声明是，使用 C# 和 Xaml 开发的应用程序将在 Windows Phone 8 和 Windows 8 之间具有“高度兼容性”。

Windows Phone 8 将于今年晚些时候发布，因此希望开发工具不会太远。如果您想立即开始，我建议您尝试使用 C# 和 Xaml 开发 Windows 8 应用程序。这应该会让您跟上进度，让您为 Windows Phone 8 做好准备。

您可以从[http://dev.windows.com开始](http://dev.windows.com)

# php - 使用选择从数据库自动填充创建下拉列表

> ID：11834315
> 
> 赞同：1
> 
> 时间：2012-08-06T19:07:15.463
> 
> 标签：php, jquery, dynamic, drop-down-menu

我正在编写一个保险表格：您选择您拥有的公司，然后它将访问数据库中的电话号码和其他值并填写下面的表格。然后他们只需要输入他们需要的信息。

```
$hostname = "";
$username = "";
$password = "";
$database = "";

mysql_connect($hostname,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

//getFN();
function getFN()
{
    $query = "SELECT first FROM contacts";
    $FNresult = mysql_query($query); 

    $dropdown = "<select name='contacts'>";

    while( $row = mysql_fetch_assoc($FNresult) )
    {
        $dropdown .= "\r\n<option value='{$row['first']}'>{$row['first']}</option>";
        echo getLN();
        //$last .="\r\n<option value='{$row['last']}'>{$row['last']}</option>";
        //echo $last;
    }

    $dropdown .= "\r\n</select>";

    echo $dropdown;
}

// Get last name
function getLN()
{
    $query = "SELECT last FROM contacts";
    $LNresult=mysql_query($query);

    $last;
    while($row = mysql_fetch_assoc($LNresult))
    {
        $last = "{$row['last']}";
    }
    echo $last;
} //end getLN

mysql_close();
?>

<select name="fdsfd" onchange="document.getElementById('first').value = this.value">
    <!-- <option value="<?//php echo $first; ?>"></option>-->
</select>

<form action="insert.php" method="post">
    First Name: <input type="text" id="first" value=""><br>
    Last Name: <input type="text" id="last"><br>
    Phone: <input type="text" id="phone"><br>
    Mobile: <input type="text" id="mobile"><br>
    Fax: <input type="text" id="fax"><br>
    E-mail: <input type="text" id="email"><br>
    Web: <input type="text" id="web"><br>
    <input type="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-06T19:13:15.890

您需要结合使用 AJAX 和 PHP，并根据来自服务器的响应 (DHTML) 动态修改页面源。

首先，您需要了解 AJAX：[SO question on how AJAX works](https://stackoverflow.com/questions/1510011/how-does-ajax-work)

其次，您需要了解 jQuery：[tutorial here](http://docs.jquery.com/Tutorials)

**接着，**

您需要一种让 javascript 唯一标识您的元素的方法。给它一个 id 属性，以及你给它的名字。

一旦元素具有`id`属性，jQuery 就可以使用 ID 选择器访问它

```
$("#[id]")... 
```

您的后台脚本应该从您的下拉列表中获取一个唯一标识符，从您的数据库中获取数据并填充一个 JSON 编码的数组。

然后您可以填充表单元素。

```
<?php
// background script

// retrieve data based on $_POST variable, set to $returnArray

/****************************
 * the structure of returnArray should look something like
 *     array(
 *         'first' => firstName,
 *         'last' => lastName,
 *         etc.
 *     )
 */

echo json_encode($returnArray); 
```

==========================

```
<!-- javascript on client-side -->
<script language="javascript" type="text/javascript">
    $("#dropdown").on('change', function() {
        $.post("backgroundScript.php", {
                uid: $(this).val()
            } function(data) {
               $("#first").val(data.first);
               $("#last").val(data.last);
               // etc.
            }, 'json'
        );
    });
</script> 
```

# c++ - 返回字符数组函数错误

> ID：11834316
> 
> 赞同：0
> 
> 时间：2012-08-06T19:07:17.500
> 
> 标签：c++

> **可能重复：**
> [从函数返回“ const char * ”是个好主意吗？](https://stackoverflow.com/questions/2514539/is-it-a-good-idea-to-return-const-char-from-a-function)
> [如何在 C++ 中返回 char 数组？](https://stackoverflow.com/questions/7769998/how-to-return-char-array-in-c)

这个回报有什么问题？我正在尝试使用以下函数返回当前路径，但它似乎不正确：

请不要：我需要一个字符返回而不是字符串。

```
char* getINIfile(void)
{
    char buffer[MAX_PATH];
    GetModuleFileName( NULL, buffer, MAX_PATH );
    string::size_type pos = string( buffer ).find_last_of( "\\/" );
    string path = string( buffer ).substr( 0, pos) + "\\setup.ini";

    char *ini_local= (char*)path.c_str();

    printf(ini_local); // so far output OK!

    return ini_local;
}

main
{
    printf(getINIfile()); // output Not OK! 

    char mybuffer[200];
    GetPrivateProfileStringA( "files","DLL","0",  mybuffer,200, getINIfile());
    printf(mybuffer);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:09:48.810

path 在函数末尾超出范围，并且您在该超出范围的对象中返回了一个内部指针。尝试返回一个 std::string

```
std::string getINIfile(void)
{
    char buffer[MAX_PATH];
    GetModuleFileName( NULL, buffer, MAX_PATH );
    string::size_type pos = string( buffer ).find_last_of( "\\/" );
    string path = string( buffer ).substr( 0, pos) + "\\setup.ini";

    char *ini_local= (char*)path.c_str();

    printf(ini_local); // so far output OK!

    return path;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:08:28.770

当函数退出时，您返回的地址超出范围，因此它不再有效：`std::string path`是函数的本地`getINIFile`地址，因此在函数退出后它是无效的，您从中获得的地址也是如此`path.c_str()`。

在这种情况下，您可以`std::string`从您的函数中返回。如果你以后*真的*需要一个 C 字符串，你可以使用`c_str()`then：

```
std::string getINIfile(void)
{
    //...

    return path;
}

int main()
{
    string path = getINIFile();

    // do something with path.c_str():
    const char *cPath = path.c_str();
} 
```

鉴于您的代码，我想不出任何必须`char*`返回的原因，但如果是这样，您将需要在堆上分配一个缓冲区：

```
char *getINIfile(void)
{
    char *buffer[MAX_PATH];
    GetModuleFileName(NULL, buffer, MAX_PATH);
    string::size_type pos = string(buffer).find_last_of( "\\/" );
    string path = string(buffer).substr( 0, pos) + "\\setup.ini";

    char *ini_local = new[path.size()];
    strncpy(ini_local, path.c_str(), path.size());

    printf(ini_local); // so far output OK!

    return ini_local;
} 
```

但这是标准 C 字符串和: 的**非常糟糕的组合**`std::string`，仅用于操纵路径并在其他任何地方`string`传递。`char*`

仅使用标准 C，替换`find_last_of`为[`strrchr`](http://en.cppreference.com/w/c/string/byte/strrchr)- 注意缺少错误处理：

```
char *getINIfile(void)
{
    char *buffer = new[MAX_PATH];
    char *pos = NULL;
    char *ini_local = NULL;

    GetModuleFileName(NULL, buffer, MAX_PATH);
    pos = strrchr(buffer, "\\/");
    // check for and handle pos == NULL

    buffer[pos] = '\0';

    strncat(buffer, "\\setup.ini", MAX_PATH - strlen(buffer));

    printf(buffer);

    return buffer;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:08:38.573

该函数返回一个指向局部变量的指针，该变量超出范围，留下一个悬空指针。为什么不只返回一个`std::string`值？

```
std::string getINIfile() {
   ....
   return path;
} 
```

然后你可以`char*`在调用方使用字符串的底层：

```
const std::string s = getINIfile();
const char* c = s.c_str(); 
```

# python - 无法使用 python 将 mssql 中的二进制数据插入 sqlite3

> ID：11834318
> 
> 赞同：0
> 
> 时间：2012-08-06T19:07:24.340
> 
> 标签：python, sqlite, pyodbc

我正在尝试查询 Microsoft SQL 2005 数据库，处理数据并将密钥写入我更新到本地机器上的 sqllite3 数据库存储的数据中。

我使用的工具是 python 2.7、pyodbc 和 sqllite3。我在 Windows 7 上，我尝试使用带有 pyodbc 的 sql server 和 sql 本机客户端驱动程序连接到我的 mssql db 的驱动程序，两者都产生相同的结果。

我遇到问题的字段是 mssql 中的二进制（16）的 uuid 字段。当我使用 pyodbc 查询数据时，它会以 bytearray() 形式返回给我。

这是我运行以下命令时得到的输出。

```
id = mycursor.fetchone()
print id 
```

**àO÷�eÅO‹1ÝWt'E**

```
repr(id) 
```

**字节数组（b'\xe0O\xf7\x1d\x9de\xc5O\x8b1\x0e\xddWt\x91E'）**

当我将该 ID 插入 sqllite3 数据库时，我得到以下信息。

```
s = sqlite3.connect('tmp.db')
cursor = s.cursor()
s.execute("create table recs(uuid blob)")
s.commit()
s.execute("insert into recs (uuid) values(?)", id) 
```

1 s.execute("插入 recs (uuid) 值(?)", id)

ProgrammingError：提供的绑定数量不正确。当前语句使用 1，提供了 16 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:41:19.637

Python 值需要是一个`buffer`对象：

```
>>> s.execute("insert into recs (uuid) values(?)", (buffer(id), ))
<sqlite3.Cursor object at 0x011CD2E0>
>>> r = s.execute("select * from recs").fetchone()
>>> r
(<read-write buffer ptr 0x011F9280, size 16 at 0x011F9260>,)
>>> r[0]
<read-write buffer ptr 0x011F9280, size 16 at 0x011F9260>
>>> str(r[0])
'\xe0O\xf7\x1d\x9de\xc5O\x8b1\x0e\xddWt\x91E'
>>> str(r[0]) == id
True 
```

# c++ - C ++ boost阻止显示主窗口

> ID：11834321
> 
> 赞同：0
> 
> 时间：2012-08-06T19:07:43.827
> 
> 标签：c++, windows, winapi, boost, directx

我在这里遇到了非常奇怪的问题。我正在用 C++/DirectX 创建非常简单的 2d 游戏引擎，我想使用 boost（尤其是 boost 序列化）。问题是，当我将最简单的 boost 示例放入我的代码并构建项目时，窗口（在 winapi 中创建）不可见。编译过程中没有问题，最奇怪的部分 - boost 序列化效果很好（将简单的字符串保存到文件中）。我尝试了不同的方法，我什至重新安装了 boost，但问题仍然存在。错误似乎在这一行内：

```
text_oarchive oa(ofs); 
```

当我取消注释时，窗口是可见的。有人遇到过这种问题吗？我真的需要那些提升库...

# symfony - 在自定义 symfony 表单字段类型中，您如何默认使用 empty_value 选项？

> ID：11834322
> 
> 赞同：10
> 
> 时间：2012-08-06T19:07:45.143
> 
> 标签：symfony

我创建了一个自定义表单字段下拉列表，用于按年份过滤。我想做的一件事是允许用户按所有年份过滤，这是默认选项。我将其添加为`empty_value`. 但是，当我呈现表单时，它默认在第一个不是空值的项目上。空值就在那里，就在列表的上方。当页面最初加载时，如何使页面默认为“全部”？代码如下。

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class YearType extends AbstractType
{

  private $yearChoices;

  public function __construct()
  {
      $thisYear = date('Y');
      $startYear = '2012';

      $this->yearChoices = range($thisYear, $startYear);
  }

  public function getDefaultOptions(array $options)
  {
    return array(
        'empty_value' => 'All',
        'choices' => $this->yearChoices,
    );
  }

  public function getParent(array $options)
  {
    return 'choice';
  }

  public function getName()
  {
    return 'year';
  }
} 
```

我正在用简单的树枝渲染我的表格`{{ form_widget(filter_form) }}`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-06T19:48:50.017

尝试添加`empty_data`选项到`null`，所以它是第一位的。我有很多这种类型的字段并且它正在工作，例如：

```
class GenderType extends \Symfony\Component\Form\AbstractType
{

    public function getDefaultOptions(array $options)
    {
        return array(
            'empty_data'  => null,
            'empty_value' => "Non specificato",
            'choices'     => array('m' => 'Uomo', 'f' => 'Donna'),
            'required'    => false,
        );
    }

    public function getParent(array $options) { return 'choice'; }

    public function getName() { return 'gender'; }

} 
```

**编辑**：另一种可能性（我想）是设置[`preferred_choices`](http://symfony.com/doc/current/reference/forms/types/choice.html#preferred-choices)。这样，您将获得顶部的“全部”选项。但我不知道它是否可以使用`null` `empty_data`，但您可以更改`empty_data`为您想要的任何内容：

```
 public function getDefaultOptions(array $options)
  {
    return array(
        'empty_value'       => 'All',
        'empty_data'        => null,
        'choices'           => $this->yearChoices,
        'preferred_choices' => array(null)         // Match empty_data
    );
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T10:07:55.027

当我需要一个简单的城市下拉列表而不使用关系时，我最终将这个配置用于城市字段（添加 null 作为选择数组的第一个元素），因为`empty_data`参数对我不起作用：

```
$builder->add('city',
    ChoiceType::class,
    [
        'label'        => 'ui.city',
        'choices'      => array_merge([null], $this->cityRepository->findAll()),
        'choice_label' => static function (?City $city) {
            return null === $city ? '' : $city->getName();
        },
        'choice_value' => static function(?City $city) {
            return null === $city ? null : $city->getId();
        },
    ]); 
```

# asp.net - 运行 perl 脚本，需要将结果输出到 VB.net

> ID：11834327
> 
> 赞同：1
> 
> 时间：2012-08-06T19:07:50.643
> 
> 标签：asp.net, vb.net, perl

我正在使用 VB.net 在 ASP.net 页面中运行多个 perl 脚本（大约 2-5 个）。脚本执行得很好。该脚本正在返回 UNIX 服务器的 DNS 名称和其他信息，以确保我们对其进行了正确配置。

我需要将 Perl 结果输出到 VB.net，以便可以在主页中显示结果（以及取决于成功/失败的颜色代码）。

有什么建议么？

编辑：显示我的代码

```
 If rdoUnix.Checked Then
            runUnixScript("testScript.pl", UNIXUSERNAME, UNIXPASSWORD)
        End If
    End If

End Sub
Public Sub runUnixScript(ByVal SCRIPT As String, ByVal UNIXUSERNAME As String, ByVal UNIXPASSWORD As String)
    Dim COMPUTERNAME As String = FQDN.Text
    Dim virtualFolder As String = "~/Scripts"
    Dim physicalFolder As String = Server.MapPath(virtualFolder)
    Dim processCmdFileTransfer As String = "/K C:\pscp.exe -pw " & UNIXPASSWORD & " " & physicalFolder & "\" & SCRIPT & " " & UNIXUSERNAME & "@" & COMPUTERNAME & ":" & SCRIPT

    Dim processCmdFileActions As String = "-ssh -pw " & UNIXPASSWORD & " " & UNIXUSERNAME & "@" & COMPUTERNAME & "XX" & SCRIPT
    ' Transfers Script, Makes it executable, Runs Script and then deletes script
    RunProcess("C:\Windows\System32\cmd.exe", processCmdFileTransfer, SCRIPT)
    RunProcess("C:\plink.exe", processCmdFileActions, SCRIPT, " chmod u+x ./")
    RunProcess("C:\plink.exe", processCmdFileActions, SCRIPT, " ./")
    RunProcess("C:\plink.exe", processCmdFileActions, SCRIPT, " rm ./")
End Sub

Public Sub RunProcess(ByVal processPath As String, ByVal startInfo As String, ByVal script As String, Optional ByVal command As String = "")
    Dim Proc As New System.Diagnostics.Process
    Proc.StartInfo = New ProcessStartInfo(processPath)

    If (InStr(startInfo, "XX") > 0) And (command <> "") Then
        startInfo = startInfo.Replace("XX", command)
    End If

    Proc.StartInfo.Arguments = startInfo
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = False
    Proc.StartInfo.UseShellExecute = False
    Proc.StartInfo.CreateNoWindow = True
    Proc.Start()
    Proc.WaitForExit()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:16:52.300

尝试使用输出重定向重定向[已执行代码的](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/b35d40fa-5442-4c97-b718-58861a5f52d6/)输出。

只需在以下行中将 perl 可执行文件的路径传递给 perlscript

```
 Dim psI As New ProcessStartInfo("PERL_INSTALLED\\perl.exe SCRIPT_DIR\\MyScript.pl"); 
```

# nservicebus - 用于跨站发送的 NServiceBus 网关

> ID：11834330
> 
> 赞同：1
> 
> 时间：2012-08-06T19:08:05.590
> 
> 标签：nservicebus

我有几台服务器位于不同的 DMZ 中。这些服务器中的每一个都将运行一些 NServiceBus 服务和/或发送消息的 Web 应用程序。我需要能够在很多时候跨不同的站点发送消息。打开所需的端口会带来我们网络管理员不愿意妥协的安全问题。

我看过 NServiceBus 网关。( [http://docs.particular.net/nservicebus/gateway/](http://docs.particular.net/nservicebus/gateway/) ) 我确实认为这将是一个很好的解决方案。但是，我不确定实现它的最佳方式。

考虑一个由多个服务组成的网络，其中需要跨站点发送多条消息。最好是在同一台服务器上创建一个额外的服务来处理来自该网络内的所有消息，还是让每个服务管理它的跨站点发送？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:28:03.220

nservicebus 网关是一个可行的解决方案。尽管您必须考虑以下几点：像 NSB 中的所有东西一样，网关也是自以为是的。它只允许通过它发送语义。您还需要仔细设计您的 SOA 服务边界。跨站点通信应该连接在多个站点上物理上独立的逻辑服务。通过网关进行的通信应该具有重要的业务重要性，但不是很健谈（因为跨站点的操作非常昂贵）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:40:31.370

网关确实要求您打开端口以至少允许传入的 http 通信。

# php - 将 POST 卷曲到外部域

> ID：11834332
> 
> 赞同：-2
> 
> 时间：2012-08-06T19:08:22.470
> 
> 标签：php, curl

我正在尝试创建一个脚本，将信息从 1 个域发送到另一个域并将数据保存到数据库，但是我从域 1 检索数据，但无法保存到数据库。

这是来自域 1 的脚本：

```
// Get Domain Name:
$domain = $_SERVER['HTTP_HOST'];

// Get User IP Address:
$user = $_SERVER["REMOTE_ADDR"];

// Connect to Source:
$url = 'http://www.domain2.com/source.php';
    $fields = array(
                'id'=>'1',
                'user'=>$user,
        'domain'=>$domain,

            );

//url-ify the data for the POST
$fields_string = '?';
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

这是将数据保存到域 2 上的数据库的脚本：

```
// Get domain and user details:
    $domain=$_GET['domain'];
    $user=$_GET['user'];

// Connection to MySQL Database.
    include ('_includes/_dbconnection.php');
    include ('_includes/_dbopen.php');

// Insert Data to MySQL Database
$sql="INSERT INTO traffic (url, cip)VALUES('$_POST[domain]', '$_POST[user]')";
    $result=mysql_query($sql);
    if($result){

    echo $domain;
    echo $user;

    }

    else {

    echo 'Not Input';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:12:42.910

您正在使用 curl 发布表单并尝试使用`$_GET`

尝试使用`$_POST`或`$_REQUEST`

```
$domain=$_POST['domain'];
$user=$_POST['user'];

// Connection to MySQL Database.
include ('_includes/_dbconnection.php');
include ('_includes/_dbopen.php');

// Insert Data to MySQL Database
$sql="INSERT INTO traffic (url, cip)VALUES('$domain', '$user')";
$result=mysql_query($sql);
if($result){
    echo $domain;
    echo $user;
}else {
    echo 'Not Input';
} 
```

# c# - 如何通过索引从xml中删除元素

> ID：11834334
> 
> 赞同：0
> 
> 时间：2012-08-06T19:08:34.940
> 
> 标签：c#, asp.net, xml, linq, linq-to-xml

我想使用元素索引从 XML 列表中删除用户选择的元素。例如：

```
foreach (int index in indexes)
{
    Root.Descendants("book").ElementAt(index).Remove();
} 
```

但这会抛出一个`IndexOutOfRangeException`. 任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:03:05.370

当您删除项目时，剩余的“书”元素（及其索引）的数量会发生变化。您的索引数组中可能有 0、1、2、3，但是一旦您删除第一项，您的第四个索引 (3) 现在超出范围。如果您的索引是连续的，您可以反转删除元素的顺序，因此当前索引永远不会“超出范围”。

试试这个：

```
for (int i = indexes.Length - 1; i >= 0; i--)
{
    Root.Descendants("book").ElementAt(indexes[i]).Remove();
}; 
```

但是，您提到要删除“用户选择的”元素，所以我猜您的元素可能是随机顺序的。相反，您可能想尝试这样的事情：

```
IEnumerable<XElement> books = Root.Descendants("book");
IList<XElement> booksToRemove = new List<XElement>(indexes.Length);

foreach (int index in indexes)
{
    booksToRemove.Add(books.ElementAt(index));
}

foreach (XElement book in booksToRemove)
{
    book.Remove();
} 
```

现在您不必关心元素或索引在删除它们之前的顺序。

# c# - 使用 Linq 更新数据库到实体

> ID：11834339
> 
> 赞同：1
> 
> 时间：2012-08-06T19:08:50.723
> 
> 标签：c#, .net, linq, entity-framework, ado.net

我可以使用 Linq to Entities 在数据库表中添加和删除。但是，以下代码不会更新数据库。（没有例外，或任何东西 - 它只是不更新​​。）：

```
 // Change box qty
        var pnumber = Request.Form["PartNumber"];
        var oid = Session["OOID"];
        var uid = WebSecurity.CurrentUserId;
        var newqty = Request.Form["Quantity"];
        var c = (from item in database.Carts
                           where item.UserId == 
                           uid && item.PartNumber == 
                           pnumber && item.OrderId == (string)oid
                           select item.Boxes).FirstOrDefault();
        c = newqty.AsInt();
        database.SaveChanges();
        Response.Redirect("~/Protected/Account/Shopping/Cart"); 
```

任何想法我可能做错了什么，或者如何解决这个问题？我搜索了 Stack Overflow 并尝试了 Answers 和 Google 中提供的各种示例，但它们都几乎相同，并且没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T19:12:29.170

您基本上需要检索实体（记录）本身，而不仅仅是能够通过 EF 更新它的属性（列）：

```
var newqty = Request.Form["Quantity"]; 
var c = (from item in database.Carts
           where item.UserId == 
           uid && item.PartNumber == 
           pnumber && item.OrderId == (string)oid
           select item).FirstOrDefault();
c.Boxes = newqty.AsInt();
database.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:18:21.863

这是@Xander 使用 Lambda 的回答

```
var newqty = Request.Form["Quantity"]; 
var c = database.Carts.Where(x => x.UserId == 
           uid && x.PartNumber == 
           pnumber && x.OrderId == (string)oid).FirstOrDefault();
c.Boxes = newqty.AsInt();
database.SaveChanges(); 
```

我知道你说你对他有错误​​，这更多是为了你的教育目的:)

# ruby-on-rails - rails linkedin gem：如何扫描所有用户字段是否为空

> ID：11834342
> 
> 赞同：0
> 
> 时间：2012-08-06T19:08:52.613
> 
> 标签：ruby-on-rails, linkedin

快速提问：我正在使用linkedin gem 来提取用户数据，但是如果用户的linkedin 个人资料中的特定数据字段为空白，我的应用程序就会中断。是否有一种最佳方法来扫描每个配置文件中所有数据字段中的空白并仅提取那些存在以防止破坏的配置文件？

这是我的 auth_controller ...我知道它不是 DRY 并且需要重构。谢谢！

```
require 'linkedin'

class AuthController < ApplicationController

  def index
    client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])
    request_token = client.request_token(:oauth_callback => 
                                      "http://#{request.host_with_port}/callback")
    session[:rtoken] = request_token.token
    session[:rsecret] = request_token.secret
    redirect_to client.request_token.authorize_url
  end

  def callback
    client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])
    if session[:atoken].nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
    else
      client.authorize_from_access(session[:atoken], session[:asecret])
    end

        current_user = client.profile(:fields => %w(positions educations))
        @user = current_user
        educations = current_user.educations.all
        positions = current_user.positions.all

        companies = current_user.positions.all.map{ |t| t.company }

        @current_company = companies[0]['name']
      @past_company_one = companies[1]['name']
      @past_company_two = companies[2]['name']
      @past_company_three = companies[3]['name']

      @current_industry = companies[0]['industry']
    @past_industry_one = companies[1]['industry']
    @past_industry_two = companies[2]['industry']
    @past_industry_three = companies[3]['industry']

        @first_name = client.profile(:fields => ["first_name"]).first_name
    @last_name = client.profile(:fields => ["last_name"]).last_name
    @headline = client.profile(:fields => ["headline"]).headline
        @picture = client.profile(:fields => ["picture-url"]).picture_url

        @school_one_name = educations[0]['school-name']
        @school_one_degree = educations[0]['degree']
    @school_one_field = educations[0]['field-of-study']
    @school_one_start = educations[0]['start-date']['year'].to_s
    @school_one_end = educations[0]['end-date']['year'].to_s

    @school_two_name = educations[1]['school-name']
        @school_two_degree = educations[1]['degree']
    @school_two_field = educations[1]['field-of-study']
    @school_two_start = educations[1]['start-date']['year'].to_s
    @school_two_end = educations[1]['end-date']['year'].to_s

    @current_title = positions[0]['title']
    @past_title_one = positions[1]['title']
    @past_title_two = positions[2]['title']
    @past_title_three = positions[3]['title']

    @current_start_date = Date::MONTHNAMES[positions[0]['start-date']['month']] + " " + positions[0]['start-date']['year'].to_s

    @past_start_date_one = Date::MONTHNAMES[positions[1]['start-date']['month']] + " " + positions[1]['start-date']['year'].to_s
    @past_end_date_one = Date::MONTHNAMES[positions[1]['end-date']['month']] + " " + positions[1]['end-date']['year'].to_s

    @past_start_date_two = Date::MONTHNAMES[positions[2]['start-date']['month']] + " " + positions[2]['start-date']['year'].to_s
    @past_end_date_two = Date::MONTHNAMES[positions[2]['end-date']['month']] + " " + positions[2]['end-date']['year'].to_s

    @past_start_date_three = Date::MONTHNAMES[positions[3]['start-date']['month']] + " " + positions[3]['start-date']['year'].to_s
    @past_end_date_three = Date::MONTHNAMES[positions[3]['end-date']['month']] + " " + positions[3]['end-date']['year'].to_s

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:37:33.027

考虑到您当前的代码可能会因响应中的*任何*意外值而中断，并假设它发生在您的上述`callback`方法中，您可以考虑对您的代码应用快速'n'dirty 异常处理。

例如，通过简单地将可能有问题的代码包含在`begin`/`end`块中并使用`rescue`子句来处理任何异常：

```
def callback
  client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])

  if session[:atoken].nil?
    # ...code
    else
    #...code
  end

  # start handling exceptions here
  begin
    # ...potentially offending code here
    current_user = client.profile(:fields => %w(positions educations))
    # ...more code
    @past_end_date_three = Date::MONTHNAMES[positions[3]['end-date']['month']] + " " + positions[3]['end-date']['year'].to_s
  rescue
    # oops, something happened:
    # ...your code to handle the exception here
  end

end 
```

# python - 用于匹配两个或三个空格的 Python 正则表达式

> ID：11834344
> 
> 赞同：6
> 
> 时间：2012-08-06T19:08:56.530
> 
> 标签：python, regex, string

我正在尝试将以下文本与 Python 2.7 中的正则表达式匹配

```
SUBCASE   8
SUBCASE   9
SUBCASE  10
SUBCASE  11 
```

“子案例”和数字之间的空格数从 3 下降到 2。我正在尝试在 Python 中使用这个正则表达式：

`(SUBCASE)[\s+]([0-9]+)`

我哪里错了？意思不应该`\s+`是“捕获多个空格”吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T19:10:31.850

你会想要：

```
SUBCASE\s+([0-9]+) 
```

或者

```
SUBCASE\s+(\d+) 
```

放在`\s+`里面的`[...]`意思是，你需要一个符号，要么是空格字符，要么是加号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:14:58.997

```
(SUBCASE)\s+([0-9]+) 
```

您使用了 [\s+] 来进行一个空格或 + 号的字符匹配

# windows - 微软 Kinect（适用于 Windows）

> ID：11834352
> 
> 赞同：6
> 
> 时间：2012-08-06T19:09:45.323
> 
> 标签：windows, kinect

好的，所以我不确定你们中的很多人是否已经开始在 2012 年 2 月发布的 Microsoft Kinect for Windows 上工作。我正在尝试开始开发，我想知道是否有任何教程可以找到关于如何使用 SDK 或者如果有人可以指导我如何使用 Kinect 捕获 RGB 流？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T19:25:48.570

有很多教程。有些可以在[Channel 9 的 Kinect 快速入门系列](http://channel9.msdn.com/Series/KinectQuickstart)中找到，[Channel 9](http://channel9.msdn.com/search?term=kinect)也有很多关于 Kinect 的文章。SDK 中的所有类和变量都可以在[MSDN](http://msdn.microsoft.com/en-us/library/hh855419.aspx)上找到，在[Rob Relyea 的博客](http://robrelyea.wordpress.com/category/kinect/)上有很多教程。如果您遇到困难，可以访问[Kinect 开发聊天室](https://chat.stackoverflow.com/rooms/13111/kinect-developement)（假设您有 20 个代表）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:54:30.527

就个人而言，我不会从第 9 频道开始，或者任何与此相关的教程。跳入 Kinect 并开始玩弄东西的最有趣的方法是安装[Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)。它在 3 天前更新，包含一些非常酷的 3D 点云内容。下载/安装工具包，运行它附带的 Kinect Studio 应用程序，并花一些时间检查 Kinect 的功能。如果您看到感兴趣的内容，请将其安装到您的计算机并在 Visual Studio 中打开它。如果没有 Visual Studio，可以下载[C# Express 版本](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-csharp-express)免费。源代码的注释都很好，我发现这是通过示例学习的最佳方式。您不必观看第 9 频道有时令人痛苦的视频或花时间阅读博客，您可以直接进入并从中获得乐趣。如果您遇到困难，请返回 Channel9 或返回 Stack Overflow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:13:25.873

开始学习的最佳地点是 MSDN，您可以从那里获得 kinect 驱动程序。他们提供了许多解释 kinect 大部分概念的教程和视频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:28:59.103

你可以参考[Kinect 1.0](http://www.i-programmer.info/ebooks/practical-windows-kinect-in-c.html) for kinect for Windows SDK 1.0

# r - 在会话之间保存包设置

> ID：11834353
> 
> 赞同：10
> 
> 时间：2012-08-06T19:09:46.727
> 
> 标签：r, package

是否有明确的方法可以在会话之间保存与某个包有关的选项或信息？

例如，假设有人制作了一款游戏并将其作为 R 包发布。如果他们想保存高分而不是每次 R 开始新会话时都重置它们，那么最好的方法是什么？目前我只能考虑在用户主目录中存储一个文件，但我不确定我是否喜欢这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:16:18.047

这可能是一种方法。我创建了一个带有虚拟函数的虚拟包（我创建的任何函数都必然是一个虚拟函数）和一个我调用的数据集`scores`，我设置如下：

```
scores <- NA 
```

然后我用分数数据集创建了包。

然后我使用以下内容从 R 中更改数据集。

```
loc <- paste0(find.package("new"), "/Data")
unlink(paste0(loc, "/scores.rda"), recursive = TRUE, force = FALSE)
scores <- 10

save(scores, file=paste0(loc, "/scores.rda")) 
```

然后，当我卸载库并重新加载时，数据集现在显示：

```
> scores
[1] 10 
```

这可以修改为你想要的吗？您必须以某种方式将其保存在两者之间，但不确定如何在不弄乱`.Last`功能的情况下执行此操作。

**编辑：**

看来此选项不可行，因为当您编译为包并使用延迟加载时，它将数据集保存为：

RData.rbd、RData.rbx，不是 .rda 文件。这意味着我上面使用的方法有点毫无价值，因为我们希望它自动被识别。

**EDIT2** 这种方法有效，我在我制作的一个包上进行了尝试。您不能对数据进行延迟加载，您必须显式使用`data(scores)`或`data(scores)`在您正在调用的函数内部使用。我还在第一次创建 global.env 时将其分配`scores`给它，并在函数内部使用它来查看它是否存在。如果`.scores。存在我将其分配给函数内的分数。一旦你卸载库并再次加载，你就不必再担心了。`.scores``exists`

也许另一种方法是将其保存为一个函数，可以在这里使用 Josh 的建议进行更改：[Permanently replace a function](https://stackoverflow.com/questions/8661526/permanently-replacing-a-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:01:15.313

我想如果不以某种方式将设置保存到磁盘或数据库，就无法存储设置。可以通过将下面的代码放入您的`~/.Rprofile`. 但是，如果您的包以其他方式保存设置而不是使用，则`options`需要手动添加它们。

我知道这正是你所说的你不想要的，但它至少可能会引发一些争论。

```
.Last <- function(){
    my.options <- options()
    save(my.options, file="~/.Roptions.Rdata")
}

.First <- function(){
    tryCatch({
        load("~/.Roptions.Rdata")
        do.call(options, my.options)
        rm(my.options)
    }, error=function(...){})
} 
```

令我惊讶的是，如果不存在，`try(..., silent=TRUE)`则会在启动时发出警告，这就是我改用的原因。`~/.Roptions.Rdata``tryCatch`

# javascript - javascript中嵌套匿名方法的闭包

> ID：11834356
> 
> 赞同：1
> 
> 时间：2012-08-06T19:09:49.903
> 
> 标签：javascript, closures, anonymous-methods

我正在尝试从嵌套匿名javascript方法调用的几个级别的深处设置对象（类）级别的变量值。我该怎么做呢？

这是一些代码来解释我正在尝试做的事情。免责声明：我对 javascript 中的闭包概念不太满意，所以我可能会走错路。任何关于实现我想做的简洁方法的建议将不胜感激。

```
// FileUtils object.
var FileUtils = function () {
    // Member variables.
    this.ConfRootDir = null;
};

// Method to get a file entry.
// successCallback has to be a method with a FileEntry object.
FileUtils.prototype.getFileEntry = function (fileName, successCallback) {
    if (this.ConfRootDir == null) {
        var thisObj = this;
        // Request the root filesystem 
            // [** 1st callback, using anon method]
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
            function (fileSystem) {                        
                // Get the root directory of the file system.
                var rootDir = fileSystem.root;
                // Get the ConferenceToGo directory, or create if required.
                // [** 2nd callback, using anon method]
                rootDir.getDirectory("ConferenceToGo", { create: true, exclusive: false },
                    function (confDir) {
                        // Set values for future use 
                        // [** Definitely wrong scoping. The class level variable 
                        // can't be accessed using 'this'. What to do? **]
                        this.ConfRootDir = confDir;
                        // Now try getting the handle for the list file.
                        //  [** 3rd callback, using anon method. Irrelevant at this point.]
                        this.ConfRootDir.getFile(fileName, { create: false },
                            successCallback, // Success callback [getFile]
                            function (error) {
                                logError("Unable to retrieve file: ", true, true, error);
                            }); // Failure callback [getFile]
                    }, // Success callback [getDirectory]
                    function (error) { logError("Unable to create new directory: ", true, true, error); }); // Failure callback [getDirectory]
            }, // Success callback [requestFileSystem]
            function (error) { logError("Problem reading file system: ", true, true, error); }
        );
    }
} 
```

我知道在上面的代码中，范围（通过使用'this'）都是错误的，但不知道如何让它正确。我已经看到了一些关于绑定到上下文的答案（比如[这个](https://stackoverflow.com/questions/183214/javascript-callback-scope)），但是我使用的是匿名方法，所以这让它变得更难了。注意：虽然我在这里只展示了 FileUtils 原型中的一种方法，但还有更多。

那些知道的人可能会认识到我正在使用cordova（PhoneGap）库中的方法用于HTML5和JS中的跨平台移动开发，但这在这里并没有太大的意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:15:33.907

```
… function() { function() { function() { …
                    // Set values for future use 
                    // [** Definitely wrong scoping. The class level variable 
                    // can't be accessed using 'this'. What to do? **]
                    this.ConfRootDir = confDir; 
```

你已经准备好了答案：`thisObj.ConfRootDir`. 该`thisObj`变量在嵌套函数的范围内可用，并且仍然指向外部函数的[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)`getFileEntry`，即指向`FileUtils`实例。

# perl - apache 无法加载使用 make 和 install 手动安装的 perl 模块

> ID：11834357
> 
> 赞同：0
> 
> 时间：2012-08-06T19:09:58.833
> 
> 标签：perl, apache, cgi

Perl - CGI

apache 无法加载使用 make 和 install 手动安装的 perl 模块。在 apache 日志中，它给出了错误的说法 - 在 @INC 中找不到模块。

虽然通过 CPAN 安装的模块工作正常。

请帮忙

```
#!/usr/bin/perl
use lib qw(/home/appsadm/Infoblox_Perl_API/Infoblox-6.0040000164053);
use lib qw(/usr/lib/perl5/5.8.8/CPAN/LWP/); 
use LWP::UserAgent;
use Infoblox::Session;

local ($buffer, @pairs, $pair, $name, $value, %FORM);   
    $ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;
    if ($ENV{'REQUEST_METHOD'} eq "POST")    {
        read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});
    }else {
        $buffer = $ENV{'QUERY_STRING'};
    }

    @pairs = split(/&/, $buffer);

    foreach $pair (@pairs)
    {
        ($name, $value) = split(/=/, $pair);

        $value =~ tr/+/ /;

        $value =~ s/%(..)/pack("C", hex($1))/eg;

        $FORM{$name} = $value;
    }

    $username = $FORM{username};
    $password  = $FORM{password};

my $appliance = '161.19.15.8';

$session =  Infoblox::Session->new(  master => $appliance,  username => "admine", password=> "prafgd1"  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:15:23.673

如果模块安装在`dir`中`dir`但不是其中的一部分`@inc`，您可以

```
use lib qw(dir); 
```

在程序开始时，在使用模块之前。

# java - ProcessBuilder.directory() 方法使用

> ID：11834359
> 
> 赞同：0
> 
> 时间：2012-08-06T19:10:08.853
> 
> 标签：java, directory, processbuilder

该`ProcessBuilder.directory()`方法的用途是什么以及如何使用它？它是否存储目录名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:14:19.860

正如javadoc所说，directory()方法返回进程的当前目录，工作目录，如果你传递一个文件，它会将工作目录设置为那个文件

# git - 中止（意外和旧的/悬空的）变基，但保留所有更改

> ID：11834362
> 
> 赞同：4
> 
> 时间：2012-08-06T19:10:19.600
> 
> 标签：git, git-rebase

我在一个分支（主）上本地工作。我之前做了一个 rebase 来压缩一些我认为有效的提交。我继续进行一些提交，直到我需要执行另一个变基。当我打电话时，`git rebase -i HEAD~3`我得到了错误：

> 交互式变基已经开始

暗示我从未正确完成旧的变基。

现在我想中止旧的变基，而不会丢失自它开始以来的任何更改。我打算用

```
git rebase --abort 
```

但我很确定这将删除我所有的本地提交并在变基之前放回原处。我可以在这里做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T22:10:40.213

提交他们。中止变基。从`git reflog`.

```
git add .
git commit -m "Rebased changes"
git rebase --abort
git cherry-pick HEAD@{1} 
```

随心所欲地使用它。如果您`git reflog`已过期（我无法想象在正常的日常操作中会发生这种情况），请剪切一个新分支然后中止变基：

```
git add .
git commit -m "Rebase changes"
git checkout -b rebased-master
git rebase --abort 
```

# c# - 动态用户控件单击事件中的用户控件未触发？

> ID：11834369
> 
> 赞同：0
> 
> 时间：2012-08-06T19:10:39.257
> 
> 标签：c#

我有一个页面，其中有一个 div，用户控件是通过代码使用用户控件的 LoadControl 动态添加的。

用户控件包含另一个用户控件（比如说 ChildUC）。ChildUC 包含一个具有插入和删除按钮的网格视图。

问题是，即使我单击这些按钮，click 事件也不会被触发，gridview 命令事件也不会被触发。该页面正在被回发，并在页面加载后退出，它不会触发任何其他事件。

到目前为止，我最近几天都在调试这个，但没有运气。

请帮帮我。提前致谢。

代码：

```
 <div id="dvMain" runat="server">
  </div>

   private void CreateHeaders()
    {

        foreach (Header hd in HeaderCollection)
        {
            List<Question> lstQuestion = QuestionCollection.FindAll(p => p.HID.Equals(hd.HeaderID));
            Sales_UserControls_Questions Question = null;
            if (lstQuestion.Count > 0)
            {
                Question = (Sales_UserControls_Questions)LoadControl("~/Sales/UserControls/Questions.ascx"); // This is the main user control that is being loaded dynamically
                Question.ID = "Question"+hd.HID;
                Question.lstQuestions = lstQuestion;
            }
            dvMain.Controls.Add(Header);
            if (HQQuestion != null)
                dvMain.Controls.Add(Question); // user control being added to div

        }
    }

    //Questions.ascx

<div>
    <asp:GridView ID="grdContent" runat="server" AutoGenerateColumns="False"
        OnRowDataBound="grdContent_RowDataBound" EnableTheming="False">
        <Columns>
            <asp:TemplateField ShowHeader="false">
                <ItemTemplate>
                    <asp:HiddenField ID="hdnQuestionID" runat="server" Value='<%# Eval("QID") %>' />
                    <asp:HiddenField ID="hdnQuestionType" runat="server" Value='<%# Eval("QTP") %>' />
                    <asp:Label ID="lblQuestionID" runat="server" EnableTheming="False" Text='<%# Eval("QID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    <asp:Label ID="lblSHR" runat="server"></asp:Label>
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:Label ID="lblText" runat="server" Text='<%# Eval("Text") %>'></asp:Label>
                    <div>
                        <asp:UpdatePanel ID="UpnlDGV" runat="server" UpdateMode="Conditional">
                            <ContentTemplate>
                                <DG:View ID="ucDGView" runat="server"></DG:View>
                           </ContentTemplate>
                        </asp:UpdatePanel>
                    </div>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
</div>
//end of questions.ascx

//ucDGView.ascx
<div>
     <asp:GridView ID="grdDGView" runat="server"
                AutoGenerateColumns="False" OnRowDataBound="grdDGView_RowDataBound" OnRowDeleting="grdDGView_RowDeleting"
                OnRowCreated="grdDGView_RowCreated" HeaderStyle-Font-Bold="true" OnRowCommand="grdDGView_RowCommand">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <dl id="dvNT" runat="server">
                                            <dt>
                                                <asp:Label ID="lblNT" runat="server" Text="NT:"></asp:Label>
                                            </dt>
                                            <dd>
                                                <asp:DropDownList ID="ddlNM" runat="server">
                                                </asp:DropDownList>
                                            </dd>
                                        </dl>
                                        <dl id="dvOSD" runat="server" class="grid_6 alpha MT10" visible="false">
                                            <dt>
                                                <asp:Label ID="lblOSDT" runat="server" Text="OSDT:"></asp:Label>
                                            </dt>
                                            <dd>
                                                <asp:TextBox ID="txtOSDT" runat="server" MaxLength="10" CssClass="maskDate"></asp:TextBox>
                                                <asp:CalendarExtender ID="txtOSDTE" runat="server" TargetControlID="txtOSDT"
                                                    Enabled="True" Format="MM/dd/yyyy">
                                                </asp:CalendarExtender>
                                            </dd>
                                        </dl>
                        </ItemTemplate>
                    </asp:TemplateField>
                     <asp:TemplateField>
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnDelete" runat="server" ImageUrl="~/Sales/Common/Images/delete_red_mini.jpg"
                                CausesValidation="false" CssClass="cancel" CommandName="Delete" CommandArgument='<%#DataBinder.Eval(Container.DataItem, "OID")%>' />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnAdd" runat="server" ImageUrl="~/Sales/Common/Images/PLUS_MINI.png"
                                CausesValidation="false" CssClass="cancel" CommandName="Add" CommandArgument='<%#DataBinder.Eval(Container.DataItem, "QID")%>' />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
    </asp:GridView>
</div>
//end of ucDGView.ascx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:51:21.807

您需要了解的是，它在[asp.net 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的哪个位置接收来自前端的事件。

触发回发的事件被发送回 asp.net 是一个隐藏的表单元素，称为事件目标。

这个输入在一个叫做`ProcessPostData`. 如果此时控件集合中不存在您的控件，则它无法接收该事件。所以你得到一个回发，但没有事件处理程序被触发。

这意味着，如果您希望事件处理程序触发，您必须在加载事件之前创建所有控件。您似乎必须根据某些用户输入来决定要加载哪些控件。用户输入在 上不可用`Init`。您可以覆盖该`LoadViewState`方法，并在那里处理您的用户输入。

![页面生命周期](../Images/052409a0bc273b87c6e631c2ea7a7d60.png)

# facebook - 在不同的 Facebook 帐户上重新注册应用程序后代码和错误来源的差异

> ID：11834370
> 
> 赞同：0
> 
> 时间：2012-08-06T19:10:41.893
> 
> 标签：facebook, oauth-2.0

我正在创建一个 facebook 应用程序，出现了一个安全提示，要求我验证我的手机号码和电子邮件。不幸的是，手机号码是旧的，而电子邮件是我在大学时使用的旧号码（前景不佳..），它已经过期了。

Facebook 对开发 facebook 应用程序的新帐户持怀疑态度，因为他们认为人们创建帐户的唯一目的是，所以我唯一的机会是使用我的朋友帐户重新注册我的应用程序。

**我已经注册了应用程序并获取了新的应用程序 ID 和密码，并将它们放入我的应用程序 config.php 文件中。** 但是出现以下错误：

**“致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1028 行的 C:\xampp\htdocs\MY FOLDER NAME\fb\base_facebook.php 中抛出”**

我已经替换了我的应用程序 ID 和密码习惯的每个实例我不明白这两者之间可能有什么区别......

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:23:03.840

当您尝试访问某些无法访问该用户访问令牌的信息时，将显示访问令牌错误。因此，这看起来不像是 appid 配置问题。试试graph api explorer工具看看请求是否通过

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

此外，您似乎正在使用 Facebook 的测试代码，您也可以从这里使用一些基本的 Facebook javascript sdk 代码对其进行测试

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

[这里还有 php https://developers.facebook.com/docs/appsonfacebook/tutorial/#auth](https://developers.facebook.com/docs/appsonfacebook/tutorial/#auth)的入门代码

尝试看看这些是否对您有用，这将确认 appid 是否有问题。

# windows - Windows：以编程方式确定是否可以禁用硬件加速

> ID：11834371
> 
> 赞同：1
> 
> 时间：2012-08-06T19:10:45.517
> 
> 标签：windows, windows-7, hardware, acceleration

我们的应用程序包括屏幕捕获功能。一些应用程序使用覆盖表面来显示视频，因此我们提供了一个禁用硬件加速的选项，以强制这些应用程序进入软件渲染模式，以便我们可以对它们进行屏幕覆盖。这在 Windows XP 下运行良好。

但是，根据我的研究，在 Windows 7 下，由于 DWM 使用 DirectX9 渲染，因此很少有显示驱动程序支持禁用硬件加速的功能。在这些系统上，显示设置->高级设置->疑难解答->更改设置...按钮被禁用。但我听说在某些系统上启用了该按钮的报告。

所以，我的问题是 Windows 控制面板使用什么 API（或启发式）来启用/禁用“更改设置...”按钮，以便我可以在我们的应用程序中启用/禁用类似的控件？

# php - jQuery - PHP 类选择器问题

> ID：11834373
> 
> 赞同：2
> 
> 时间：2012-08-06T19:10:55.500
> 
> 标签：php, jquery, selector

所以我有这样的事情：

```
<?php foreach($post_array as $post): ?>
    <div class="postBodyWrapper">
        <div class="vid-link">
            <script type="text/javascript">
                $(function() {
                    $(".vidthumb").append("<img class='thumb' src='<?php echo $post->vid_link; ?>'/>");
                });
            </script>
            <div class="vidthumb"></div>
        </div>
    </div>
<?php endforeach; ?> 
```

假设我在`$post_array`. 然后`<div class="vidthumb"></div>`每个帖子的 将包含所有五张图片（从 JavaScript 代码生成），而不是只包含应该的一张。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:14:15.530

尝试：

```
<?php $i = 0; foreach($post_array as $post): ?>
<div class="postBodyWrapper">
    <div class="vid-link">
        <script type="text/javascript">
            $(function() {
                    $("#vidthumb_<?php echo $i ?>").append("<img class='thumb' src='<?php echo $post->vid_link; ?>'/>");
            });
        </script>                           
        <div id="vidthumb_<?php echo $i++ ?>"></div>
    </div>
</div>
<?php endforeach; ?> 
```

通过为`vidthumb`您希望拇指出现在唯一 ID 中的每个 div 指定，您现在可以定位特定 div 而不是第一个匹配项。

# vb.net - VB LINQ查询Where子句*不起作用？

> ID：11834377
> 
> 赞同：-1
> 
> 时间：2012-08-06T19:11:09.513
> 
> 标签：vb.net, linq, wildcard, where-clause

这是我用我的查询设置的一个函数，它试图检索用户可能会或可能不会输入到几个文本框中的特定信息。用户可以在...

*   公司名称
*   客户名字
*   技术人员的名字

我想要的是，如果用户没有在文本框中输入任何内容，那么查询将返回所有字段，例如“*”，我相信 LINQ 使用和 SQL 使用“%”。我已经尝试了这两种方法，但无法弄清楚为什么我无法检索一家拥有所有客户和所有技术人员的公司。

```
 Public Function SpecificQueryInvoices(ByVal Company As String, ByVal Clientname As String, ByVal techname As String)

    Dim specificQuerySetInformation = From invo In database.Invoices
                              Join orgs In database.Organizations
                              On orgs.OrgId Equals invo.OrgId
                              Join clien In database.Clients
                              On clien.ClientId Equals invo.ClientId
                              Join tec In database.Teches
                              On tec.TechId Equals invo.TechId
                              Order By invo.InvoiceId
                              Where orgs.OrgName.StartsWith(Company) And clien.FirstName.StartsWith(Clientname) And tec.FirstName.StartsWith(techname)
                              Select New With {.Company = orgs.OrgName, .Client = clien.FirstName, _
                                               .Tech = tec.FirstName, invo.Date, _
                              invo.Notes, invo.Parts, invo.Labor, invo.Mileage, invo.TotalCost, _
                              invo.InvoiceNumber}

    Return specificQuerySetInformation

End Function

    Private Sub btnFilter_Click(sender As System.Object, e As System.EventArgs) Handles btnFilter.Click

    Dim companyName As String
    Dim ClientFirstName As String
    Dim TechFirstName As String

    If txtCompany.Text = "" Then
        companyName = "*"
    Else
        companyName = txtCompany.Text
    End If

    If txtClientName.Text = "" Then
        ClientFirstName = "*"
    Else
        ClientFirstName = txtClientName.Text
    End If

    If txtTechName.Text = "" Then
        TechFirstName = "*"
    Else
        TechFirstName = txtTechName.Text
    End If

    DataGridView2.DataSource = SpecificQueryInvoices(companyName, ClientFirstName, TechFirstName)

    MsgBox("Filter requested")
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:29:27.537

> 我相信这是 LINQ 使用的

你错了。LINQ 根本不使用通配符。

如果您想处理“用户未输入值”之类的情况，只需动态构建查询，这很容易，不要尝试使用通配符。毕竟，它会使您的搜索速度更快。

# silverlight - 使用 VisualStateManager 在列表框的所有项目中显示复选框

> ID：11834378
> 
> 赞同：0
> 
> 时间：2012-08-06T19:11:27.773
> 
> 标签：silverlight, windows-phone-7, mvvm, visualstatemanager

我正在尝试创建一种类似于 Windows 手机上默认电子邮件客户端中使用的效果。当用户点击单个列表框项目的最左侧时，复选框会出现在所有列表框项目的左侧。

我希望复选框的外观是流畅的（即需要 FluidLayout）。当我在项目的 ItemTemplate 中的 VisualStateGroup 中设置两个状态时，我无法在状态之间转换，因为调用 VisualStateManager.GoToState 需要我没有的视图对象（用于该项目）。

如何使复选框流畅地出现在 ListBox 的所有项目中？

# wpf - WPF中的TextBox到PasswordBox

> ID：11834380
> 
> 赞同：0
> 
> 时间：2012-08-06T19:11:44.813
> 
> 标签：wpf, xaml

我必须将`TextBox`XAML 转换为`PasswordBox`XAML。主要问题是 `<TextBox.Text>`。

任何线索如何做到这一点？

谢谢！

```
<TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Name="tbxPassword" VerticalAlignment="Top" Width="277">
 <TextBox.Text>
     <Binding Path="Password" Source="{StaticResource ods}"  UpdateSourceTrigger="PropertyChanged" >
      <Binding.ValidationRules>
            <c:ConfigValidationRule />
      </Binding.ValidationRules>
     </Binding>
 </TextBox.Text>
</TextBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:35:26.823

如果它真的关于密码，你应该使用 PasswordBox，将它绑定到依赖属性会导致安全漏洞。

```
<PasswordBox
 Name="pwdBox" 
 MaxLength="64"
 PasswordChar="#"
 PasswordChanged="PasswordChangedHandler"  
/> 
```

您可以在此处查看基本用法 [密码框](http://wpftutorial.net/PasswordBox.html)

# php - 使用 CodeIgniter 检测堆叠视图的顺序

> ID：11834382
> 
> 赞同：0
> 
> 时间：2012-08-06T19:11:57.433
> 
> 标签：php, html, codeigniter

我正在创建多个可能由控制器按任何顺序放置的 CodeIgniter 视图。其中一个视图是目录，我想在页面中显示视图的正确顺序。是否可以检测视图出现的顺序，然后从目录中更改、添加或删除元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:20:43.940

CodeIgniter 将无法帮助您，因为它会在您调用时立即呈现视图`$this->load->view(...)`（[请参阅核心 Loader 类中视图加载的相关代码](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php)）。

您必须为此执行自己的逻辑，没有什么可以阻止您创建一个包含有关您需要加载的视图的信息的数组，并预先加载您的目录视图：

```
$views = array('page1.php' => 'Page 1', 'page2.php' => 'Page 2');
$this->load->view('table_of_contents.php', $views);
foreach($views as $view => $title){
    $this->load->view($view);
} 
```

# eclipse - eclipse CDT中的java索引器

> ID：11834383
> 
> 赞同：3
> 
> 时间：2012-08-06T19:11:57.953
> 
> 标签：eclipse, eclipse-cdt

我在 Eclipse 中有一个 C++ 项目，并且正在使用 CDT。同一个项目中包含 java 源代码文件。如果我尝试在 Java 代码上打开声明，则会收到错误消息“打开编辑器时出现问题：原因 [项目] 不存在”。声明出现在项目的 java 源文件中。

使用 C++ 代码打开声明有效

我尝试重建索引，并仔细检查了 Preferences->C++ General -> Paths and Symbols 中的源位置是否正确。

提前致谢。

# git - 只用 git 克隆一个子目录

> ID：11834386
> 
> 赞同：34
> 
> 时间：2012-08-06T19:12:21.740
> 
> 标签：git, sparse-checkout

我有一个包含子目录的 git 存储库。示例 dirA/dirB。有没有办法`git clone`在 Unix 服务器上只从子目录（dirB）中提取文件？

除了克隆之外，还有其他 git 命令可以执行此操作吗？

我如何 git 一个特定的文件？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-06T20:12:03.680

假设您的项目位于名为 的目录中`project`，并且您只需要那些涉及的提交`project/dirB`。

然后：

```
git clone project/ subproject/
cd subproject
git filter-branch --prune-empty --subdirectory-filter dirB HEAD 
```

`subproject`现在将包含涉及的 git 历史记录`dirB`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-25T15:38:11.670

参见[https://www.kernel.org/pub/software/scm/git/docs/git-archive.html](https://www.kernel.org/pub/software/scm/git/docs/git-archive.html)

使用 shell 命令：

```
git archive --remote=<repo_url> <branch> <path> | tar xvf - 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-02T23:41:50.290

这不是真正的克隆，但如果你只是想要一个项目的一部分来开始一个新的 repo，进入你的 repo 并

```
git archive master <subdir> | tar -x -C /somewhere/else 
```

然后去 /somewhere/else 并在那里开始一个新的回购。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-02T19:43:12.803

我想分享一个解决方法。您可以克隆整个 repo，然后为子目录创建一个符号链接：

```
mkdir <repo_dir>
cd <repo_dir>
git clone <repo_url>
ln -s <sub_dir> <your_location_where_you_want_to_checkout_sub_dir> 
```

同样，这不是解决方案 - 只是一种解决方法。您仍将克隆整个 repo，并且只能从 . 但是，这在我的某些情况下很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T19:58:17.980

Git 在存储库级别上工作。您将不能只选择一个子目录。如果您感兴趣的存储库有一个 Web 界面，您可能能够导航到您的子目录并获取它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-06T20:00:58.897

如果您只想克隆存储库的一部分，您应该查看[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

子目录由特定的 git 存储库管理，并在主存储库中作为子模块引用。

克隆主存储库时，不会自动克隆子模块。

# jfreechart - 将 Jfreechart 图像导出到 excel

> ID：11834391
> 
> 赞同：1
> 
> 时间：2012-08-06T19:12:54.560
> 
> 标签：jfreechart, export-to-excel

我正在寻找将 jfreechart（在 JSP+struts 中可用）导出到 excel 表的选项。

我尝试“将响应标头设置为键入 msexcel”以将整个 JSP 导出到 excel，但它没有呈现 jfreechart 图像。

有没有其他选项可以将 jfreechart 导出到 excel 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:43:29.887

我使用 jfreechart 生成了图表，并使用 POI 将其导出到 excel。

```
ServletOutputStream stream=resp.getOutputStream();
resp.setContentType("application/vnd.ms-excel");
ByteArrayOutputStream outStream = new ByteArrayOutputStream();
int imageWidth= 700;
int imageHeigth = 400;

JFreeChart chart=ChartFactory.createBarChart("Test Chart", "", "", dataset, PlotOrientation.VERTICAL, true, true, false);

ChartUtilities.writeChartAsJPEG(outStream, chart, imageWidth, imageHeigth);

byte[] imageInByte = outStream.toByteArray();
outStream.close();

int pictureIdx =wb.addPicture(imageInByte,Workbook.PICTURE_TYPE_JPEG);

Drawing drawing = sheet.createDrawingPatriarch();

CreationHelper helper = wb.getCreationHelper();

//add a picture shape
ClientAnchor anchor = helper.createClientAnchor();
//set top-left corner of the picture,
//subsequent call of Picture#resize() will operate relative to it
anchor.setCol1(3);
anchor.setRow1(4);
Picture pict = drawing.createPicture(anchor, pictureIdx);

//auto-size picture relative to its top-left corner
pict.resize();
wb.write(outStream);
stream.write(outStream.toByteArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-11T04:58:35.403

Apache POI 不会帮助您，因为它有一个限制（请阅读 Apache 网站上的手册）。它只能绘制折线图和散点图，看起来很差。图书馆适用于使用 excel，但不适用于构建图表。我的建议是使用预先准备好的模板，对其进行调整，然后将必要的数据从 Java 传输到模板。另一种方法是使用渲染的 JPEG，但这是可怕的事情，不要这样做。

# objective-c - 设置背景图像尺寸 IOS

> ID：11834392
> 
> 赞同：3
> 
> 时间：2012-08-06T19:12:59.520
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有一个比普通 iPhone 屏幕更大的图像，我想将其设置为背景图像，但是当我加载模拟器时，我只看到图像的一部分。这是我分配图像的方式：

```
UIImage *background = [UIImage imageNamed:@"background.png"];
[self.view setBackgroundColor:[UIColor colorWithPatternImage:background]]; 
```

如何将背景图像设置为 self.view.bounds 之类的东西？如果我要使用 UIImageView 我如何确保它在后台！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:17:22.973

制作一个 UIImageView，将 UIImage 提供给 UIImageView 并将 UIImageView 作为子视图添加到视图中。像这样：

```
UIImageView *backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"name.png"]];
[backgroundView setFrame:CGRectMake(0, 0, 320, 480)];
[self.view insertSubView:backgroundView atIndex:0];
[backgroundView release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:20:50.697

设置 uiimageview 框架 - 这是显示的限制。

利用

```
 background.frame = CGRectMake (0,0, 320, 480); // as example - full screen, 
```

也喜欢在上面的帖子中添加 addSubview 和发布代码。

如果您使用框架 - 坐标从您的超级视图计算 - 在这种情况下 - 从 self.view （模拟器显示）。如果您使用边界，坐标计算相对于您的 uiimageview（不是 self.view）

# java - 尝试为在 tomcat 服务器上运行的程序设置终端宽度/高度

> ID：11834394
> 
> 赞同：0
> 
> 时间：2012-08-06T19:13:11.780
> 
> 标签：java, linux, tomcat, terminal

所以我试图通过linux获取程序的数据，制造商给出的唯一方法是运行一个脚本，该脚本运行一些运行打印的内部命令，然后将它们保存到文件中。唯一的问题是它打印出数据的方式取决于终端的宽度/高度，如果以奇怪的大小运行，它可能无法解析。

我正在尝试从 tomcat 一个 tomcat 服务器运行 java 代码，该服务器将调用此脚本，然后创建文件以便我可以解析数据。但是，当我以这种方式运行脚本时，我的“stty columns 10000”命令无法更改终端大小，从而导致打印受阻。

~~最终目标是将其作为自动化任务运行，因此甚至不会有终端，我想知道这将如何影响打印。我正在努力让它启动并运行，但我想我迟早会发布这个，看看是否有人有任何解决方案。~~

我已经完成了上面划掉的东西，程序使用 linux 终端的默认大小（80 列，24 行）。我在启动java之前设法使用stty，然后程序报告了80列和134555573行......大声笑。这些东西都在 root 上运行并在启动时设置。

谢谢

# c# - 在 C# 中使用 POST 将文件上传到 Web 服务

> ID：11834400
> 
> 赞同：1
> 
> 时间：2012-08-06T19:13:32.987
> 
> 标签：c#, web-services, api, amazon-s3

这段代码的问题在于，文件一旦上传，就不是正确的格式。我正在尝试上传 .zip 文件。

公共字符串 HttpPost(字符串 uri, 字符串参数) {
WebRequest webRequest = WebRequest.Create(uri);

```
 NetworkCredential credentials = new NetworkCredential("username", "password");
        webRequest.Credentials = credentials;

        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.Method = "POST";

        byte[] bytes = Encoding.ASCII.GetBytes(parameter);
        Stream os = null;
        try
        { // send the Post
            webRequest.ContentLength = bytes.Length;   //Count bytes to send
            os = webRequest.GetRequestStream();
            os.Write(bytes, 0, bytes.Length);         //Send it
        }
        catch (WebException ex)
        {
            MessageBox.Show(ex.Message, "HttpPost: Request error",
               MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        finally
        {
            if (os != null)
            {
                os.Close();
            }
        }

        try
        { // get the response
            WebResponse webResponse = webRequest.GetResponse();
            if (webResponse == null)
            { return null; }
            StreamReader sr = new StreamReader(webResponse.GetResponseStream());
            return sr.ReadToEnd().Trim();
        }
        catch (WebException ex)
        {
            MessageBox.Show(ex.Message, "HttpPost: Response error",
               MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:20:46.120

此示例如何在 MyBucket 中上传文件

```
 private const string KeyId = "Your KeyId";
    private const string AccessKey = "Your AccessKey";
    private const string S3Url = "https://s3.amazonaws.com/";

            private static void UploadFile()
    {
        var fileData = File.ReadAllBytes(@"C:\123.zip");

        string timeStamp = string.Format("{0:r}", DateTime.UtcNow);
        string stringToConvert = "PUT\n" +                               //Http verb
            "\n" +                                                       //content-md5
            "application/octet-stream\n" +                               //content-type
            "\n" +                                                       //date
            "x-amz-acl:public-read"+"\n" +                               //date
            "x-amz-date:" + timeStamp + "\n" +                           //optionall
            "/MyBucket/123.zip";                                         //resource
        var ae = new UTF8Encoding();
        var signature = new HMACSHA1 {Key = ae.GetBytes(AccessKey)};
        var bytes = ae.GetBytes(stringToConvert);
        var moreBytes = signature.ComputeHash(bytes);
        var encodedCanonical = Convert.ToBase64String(moreBytes);

        var url = "https://MyBucket.s3.amazonaws.com/123.zip";

        var request = WebRequest.Create(url) as HttpWebRequest;
        request.Method = "PUT";
        request.Headers["x-amz-date"] = timeStamp;
        request.Headers["x-amz-acl"] = "public-read";
        request.ContentType = "application/octet-stream";
        request.ContentLength = fileData.Length;
        request.Headers["Authorization"] = "AWS " + KeyId + ":" + encodedCanonical;

        var requestStream = request.GetRequestStream();
        requestStream.Write(fileData, 0, fileData.Length);
        requestStream.Close();

        using (var response = request.GetResponse() as HttpWebResponse)
        {
            var reader = new StreamReader(response.GetResponseStream());
            var data = reader.ReadToEnd();
        }
    } 
```

看看[Amazon S3 REST API](http://docs.amazonwebservices.com/AmazonS3/latest/API/APIRest.html)

# php - 创建动态子域

> ID：11834403
> 
> 赞同：3
> 
> 时间：2012-08-06T19:13:47.607
> 
> 标签：php, apache, subdomain

自从我考虑某些网站正在实施的此功能以来已经有一段时间了，它看起来非常成功。

`tumblr.com`,`blogger.com`等网站`wordpress.com`允许用户使用简单的 HTML/PHP 表单从网站内注册新的子域名。以我目前对 PHP 的了解，我无法弄清楚自己是如何做到的。我已经阅读了一些关于此的帖子，但仍然无法对此建立清晰的想法。

那么，我如何创建一个允许用户在我的网站上注册他们自己的子域的脚本`www.username.mydomain.com`（`wordpress.com`这可以在共享服务器上完成还是需要专用服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:34:31.623

这些子域问题被归结为[nice URLs](https://stackoverflow.com/search?q=nice+url)、[友好 URLs](https://stackoverflow.com/search?q=friendly+URL)等级别，因为此功能具有各种名称。

基本上，您所做的是设置重定向，以便如果有人进入`foobar.example.org`，服务器将提供`example.org/user.php?name=foobar`或`example.org/foobar`。在此之后，这只是你如何组合 PHP 脚本以便正确解析`user.php`其内容的问题。`/foobar`“注册”部分是在*DocumentRoot*`.htaccess`的文件中静态完成的。

 *当然，这需要对不存在的“子域”进行某种适当的错误处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:28:43.260

我可以告诉你一个简单的方法。首先，您必须在您的域中启用子域。您可以搜索“通配符-dns 和子域”。接下来是编程逻辑。

注册时，您可以要求一个唯一的子域名。登录后，将其重定向到注册的子域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T08:12:46.430

创建通配符子域很容易。查看我的帖子，以在[使用 .htaccess (PHP) 动态创建子](https://stackoverflow.com/questions/586129/create-subdomains-on-the-fly-with-htaccess-php)域中动态创建通配符子域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-26T10:30:12.577

如何在 PHP 和 Htaccess 的帮助下创建动态子域我们可以创建动态子域，如顶级网站，它们在用户名的帮助下为我们提供子域访问权限，我将尽力为程序员提供最佳解决方案。我将解释如何使用 htaccess 和 PHP 来创建动态子域，使用它您可以轻松地在单个服务器上托管多个子域。

创建动态子域的过程

1.  在域名设置中添加区域记录打开您的域名提供商的设置并进入您的域DNS（域名设置），单击添加区域记录。

2.  创建 A 记录并指向 IP 现在您需要为所有子域创建自定义 A 记录。

选择一条记录，主机 * 指向：您的 IP 地址

示例：102.30.138.121

创建记录并指向 ip prashantabhishek.com

3.  对主机 @ 重复相同的操作。通过 Prashantabhishek.com 创建动态子域

4.  将 CNAME 记录 HOST www 点添加到@（这指向您的 IP 地址。）

动态子域名c名记录

保存设置，享受代码效果。阅读更多：[https ://www.prashantabhishek.com/blog/view-post/how-to-create-dynamic-subdomain-with-the-help-of-php-and-htaccess/](https://www.prashantabhishek.com/blog/view-post/how-to-create-dynamic-subdomain-with-the-help-of-php-and-htaccess/)*

# ember.js - Emberjs 子视图绑定

> ID：11834404
> 
> 赞同：1
> 
> 时间：2012-08-06T19:13:48.913
> 
> 标签：ember.js

我有以下容器

```
script type: 'text/x-handlebars', 'data-template-name': 'application', ->
text '''
{{outlet}}      
''' 
```

然后这个视图连接到它

```
script type: 'text/x-handlebars', 'data-template-name': 'index', ->
text '''
{{view App.SignUpView}}
''' 
```

实际视图

```
App.SignUpView = Ember.View.extend
templateName: 'signup'

isValid: true
email: ''
password: '' 
```

模板：

```
script type: 'text/x-handlebars', 'data-template-name': 'signup', ->
text '''
  is valid: {{isValid}}
''' 
```

如何将 isValid 字段绑定到视图？它是未定义的。这是否与父视图中的“出口”有关？

这个[在 emberjs 的插座中绑定子视图和集合的示例](https://stackoverflow.com/questions/11643426/binding-child-views-and-collections-within-an-outlet-in-emberjs)展示了如何将任意对象绑定到视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:17:31.613

您应该在模板中使用视图范围：

```
is valid: {{view.isValid}} 
```

# git - GIT 从“git describe”的输出中检出代码

> ID：11834406
> 
> 赞同：6
> 
> 时间：2012-08-06T19:13:59.963
> 
> 标签：git, git-checkout, git-describe

我正在考虑使用`git describe`生成自动版本号。正如[这里](https://stackoverflow.com/questions/4120001/what-is-the-git-equivalent-for-revision-number)建议的那样。

我的问题是，如果我得到`git describe`as的 o/p `v2.0-64-g835c907`，将来如何使用 git 签出该特定修订号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T19:55:48.473

你可以做

```
git checkout v2.0-64-g835c907 
```

git describe 的输出可以用作对提交本身的引用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:50:07.287

如果我理解正确，这可能是您想要的：

```
git checkout `git describe` 
```

# java - RandomAccessFile 打印到文本文件的麻烦

> ID：11834410
> 
> 赞同：1
> 
> 时间：2012-08-06T19:14:10.413
> 
> 标签：java, random-access

嘿，我使用来自 ArrayList 存储的学生数组使用文件 i/o 写入文本文件。这一切都很好。我有那个工作。但是在实际的文本文件中，详细信息是在一行中打印和读取的。

任何人都可以看到问题。

这是我的代码：

主应用

```
import java.io.RandomAccessFile;

public class MainApp
{

    public static void main(String[] args) throws Exception 
    {
        new MainApp().start();

    }
    public void start()throws Exception 
    {
        StudentStore details = new StudentStore();
        Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");
        Student b = new Student("Fabio Borini", "DKIT28", "0876136944", "fabioborini@gmail.com");
        Student c = new Student("Gaston Ramirez", "DKIT29", "0419834501", "gramirez@webmail.com");
        Student d = new Student("Luis Suarez", "DKIT7", "0868989878", "luissuarez@yahoo.com");
        Student e = new Student("Andy Carroll", "DKIT9", "0853456788", "carroll123@hotmail.com");
        details.add(a);
        details.add(b);
        details.add(c);
        details.add(d);
        details.add(e);
        //details.print();

        RandomAccessFile file = new RandomAccessFile("ContactDetails.txt","rw");
        //getBytes() returns an array of bytes.
        //Because i have put the store in a static Array.(I done this because i could find no other
        //Simple way to write a Student Object.)
        //None of the methods of the RandomAccessFile write class worked with this.
        Student[] students = {a,b,c,d,e};
        for (int i = 0; i < students.length; i++)
        {
        byte[] bytes = students[i].toString().getBytes();
        for(byte byteWrite : bytes)
        {
            file.writeByte(byteWrite);
        }
        }
        final int Record_Length = 30;
        int recordNumber = 1;
        file.seek((recordNumber) * Record_Length);

        String code ="";
        for(int i = 0; i < 4; i++)
        {
        code += file.readLine();
        }
        System.out.println(code);
        file.close();

     }

 } 
```

字符串

```
//---------------------------------------------------------------------------
//  toString.
//---------------------------------------------------------------------------
    public String toString() 
    {
        return "---------------------------Student--------------------------- " +
                "\nStudent Name:" + studentName + 
                "\nStudent Id:"+ studentId + 
                "\nStudent Telephone Number:"+ studentTelephoneNumber + 
                "\nStudent Email:" + studentEmail +"\n\n";
    } 
```

输出凹痕--------------- 学生姓名：Becky O'Brien学生ID：DKIT26学生电话号码：0876126944

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:18:13.133

我认为不是写作搞砸了；

```
 String code ="";
    for(int i = 0; i < 4; i++)
    {
    code += file.readLine();
    }
    System.out.println(code); 
```

当你调用 readLine 时，它​​会获取当前行，但你必须在自己中添加换行符（\n），所以它应该是 file.readLine() + "\n" 而不是 file.readLine()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:28:57.727

如果您在某些文本编辑器中查看输出，它可能不会将 '\n' 解析为行分隔符（例如在 Windows 上的记事本中）。选择你的方式来解决这个[问题](https://stackoverflow.com/questions/207947/java-how-do-i-get-a-platform-independent-new-line-character)。

否则，如果这是您的控制台输出，`file.readLine()`则在换行处停止，但不将其添加到字符串中，这就是为什么它全部打印在一行上。您必须在每行之后自己添加换行符。

# java - java中的布尔赋值

> ID：11834412
> 
> 赞同：0
> 
> 时间：2012-08-06T19:14:13.380
> 
> 标签：java, android

你能解释一下这个任务吗？这是什么意思？

```
boolean activityExists = testIntent.resolveActivity(pm) != null; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T19:16:45.047

这意味着`true`如果`testIntent.resolveActivity(pm)`不返回则分配，`null`否则分配`false`。

可以理解的长形式是

```
boolean activityExists;
if(testIntent.resolveActivity(pm) != null) {
    activityExists = true;
} else {
    activityExists = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:15:29.463

检查是否`testIntent.resolveActivity(pm)`为空。如果不为 null，则 activityExists 的值为`true`，否则为`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:15:38.557

`activityExists``true`恰好变成if `testIntent.resolveActivity(pm)`is not `null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:15:56.623

当且仅当返回的值is not时，它才分配`activityExists`给。否则，设置为。`true``testIntent.resolveActivity(pm)``null``activityExists``false`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T19:16:04.930

基本上它是说如果那个布尔值是真的，这意味着有一些活动（从resolveActivity方法返回的活动不为空，它存在）。例如，如果resolveActivity返回null（无）它会是假的，因为它确实== null，但如果它返回一个有效的活动，非空，它会是真的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T19:16:56.060

`testIntent.resolveAvtivity(pm)`会返回一些东西。如果它不是“null”，那么`activityExists = true`. 如果它返回 null（意味着它什么也不返回），那么`activityExists = false`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T19:20:25.733

`testIntent.resolveActivity(pm) != null`解析为布尔表达式。无论方法`resolveActivity(pm)`返回什么，都会与`null`. 如果相等，则返回 false。如果不相等，则返回 true。

然后可以将此比较的结果分配给一个布尔值，以便稍后在代码中使用。您不想每次都进行比较，除非您必须这样做。

# php - 网络爬虫如何工作？

> ID：11834414
> 
> 赞同：0
> 
> 时间：2012-08-06T19:14:18.383
> 
> 标签：php, timeout, web-crawler

使用一些基本的网站抓取，我正在尝试准备一个用于价格比较的数据库，这将简化用户的搜索体验。现在，我有几个问题：

我应该使用`file_get_contents()`还是`curl`获取所需网页的内容？

```
$link = "http://xyz.com";
$res55 = curl_init($link);
curl_setopt ($res55, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($res55, CURLOPT_FOLLOWLOCATION, true); 
$result = curl_exec($res55); 
```

此外，每次我抓取一个网页时，我都会获取很多链接以供下次访问。这可能需要很长时间（如果您抓取 Ebay 等大型网站，则需要几天时间）。在这种情况下，我的 PHP 代码将超时。自动化的方式应该是什么？有没有办法通过在服务器上进行更改来防止 PHP 超时，或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T19:23:42.897

> 因此，在这种情况下，我的 PHP 代码将超时并且不会持续那么久。

您是否在驱动网页的代码中执行此操作？也就是说，当有人提出请求时，您是否会立即爬到那里构建响应？如果是这样，那么肯定有更好的方法。

如果您有需要抓取的站点列表，则可以设置计划作业（例如使用[cron](http://en.wikipedia.org/wiki/Cron)）来运行命令行应用程序（不是网页）来抓取站点。此时，您应该解析出您要查找的数据并将其存储在数据库中。然后，您的站点只需要指向该数据库。

这是一个改进，有两个原因：

1.  表现
2.  代码设计

**性能：**在像网站这样的请求/响应系统中，您希望最大限度地减少 I/O 瓶颈。响应时间应尽可能短。因此，您希望尽可能避免在线工作。通过将此过程卸载到网站上下文之外的内容并使用本地数据库，您可以将一系列外部服务调用（慢）转换为单个本地数据库调用（快得多）。

**代码设计：** [关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。此设置使您的代码更加模块化。您有一个模块负责获取数据，另一个模块负责显示数据。他们都不需要知道或关心对方如何完成任务。因此，如果您需要更换一个（例如找到更好的抓取方法），您也不需要更改另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:18:49.120

curl 是不错的选择。file_get_contents 用于读取服务器上的文件

您可以将 curl 中的超时设置为 0 以获得无限超时。您也必须在 Apache 上设置超时

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T19:21:14.373

我推荐使用 curl 来阅读网站内容。

为避免 PHP 脚本超时，您可以使用`set_time_limit`. 这样做的好处是您可以为*每个*服务器连接设置超时以终止脚本，因为调用该方法会重置先前的超时倒计时。如果将 0 作为参数传递，则不会应用时间限制。

**或者，您可以在 php 配置属性max_execution_time**中设置超时，但请注意，这将适用于所有 php 脚本，而不仅仅是爬虫。

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T19:21:36.290

我会选择 cURL，因为您可以获得更大的灵活性，并且您可以使用 cURL 启用压缩和 http keep-alive。

但为什么要重新发明轮子呢？查看[PHPCrawl](http://phpcrawl.cuab.de/index.html)。它使用套接字`fsockopen`（他们也为您处理超时，并为基本的爬虫提供了很好的示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-06T19:20:20.060

你可以在这里重新发明轮子，但为什么不看看像[PHPCrawl](http://phpcrawl.cuab.de/example.html)或[Sphider](http://www.sphider.eu/)这样的框架呢？（虽然后者可能不是你要找的东西）

根据[文档](http://php.net/manual/en/function.file-get-contents.php)，`file_get_contents`最适合读取服务器上的文件，因此我强烈建议您`curl`改用。至于解决任何超时问题，[`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)是您想要的选项。`set_time_limit(0)`应该防止您的脚本超时。

但是，您还需要在 Apache 中设置超时。编辑您的`httpd.conf`并将读取的行更改`Timeout`为`Timeout 0`无限超时。

# c# - 在创建 Wrapper 类时，我应该在 .NET 中使用 API 的内部类吗？

> ID：11834416
> 
> 赞同：3
> 
> 时间：2012-08-06T19:14:25.077
> 
> 标签：c#, api, wrapper

我正在.NET 中的一个项目中工作，其中一部分需要与通过 RS232（com 端口）连接到计算机的设备进行通信。我从设备制造商那里收到了一个 API，它是用 C# 编写的。

我想用 c# 编写一个类库并将其用作此 API 的包装器，以便将所有调用集中在此处，并且只使用 API 主类的一个实例，因为它应该只在第一次调用中初始化。（我想我必须使用单例）

API 有内部类和枚举器，它的一些公共方法请求一个内部类作为参数。

我的疑问是：我应该请求我的包装器的用户将这些 API 内部类作为参数，还是在包装器之外公开 API 内部类不是一个好习惯？

此外，我怀疑编写该包装器是否是个好主意，因为 API 也是用 C# 编写的，也许我在浪费时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:18:13.080

这*很大程度上*取决于您将在这个项目上投入多少时间/资源，或者您*可以*在这个项目上投入多少。

绝对好的选择是完全隐藏`API`包装类的消费者的内部实现。这样，如果您将获得一个新设备，或设备的新驱动程序（*略有*不同`API`），或与不同制造商完全不同的全新设备`API`，您将再次将其包装到**您的**类中，隐藏所有“低来自用户的“级别”实现细节，他很可能不在乎..

但这**可能**是很多工作，取决于`API`制造商的原件写得有多大或有多好。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:26:37.790

使用包装器是一个好主意，你在正确的轨道上。包装将允许代码重用，并且正如您所提到的，您可以创建一个单例来管理对象的生命周期。

关于内部类：如果公开内部类，这似乎是一个非常糟糕的 API！这意味着你不能使用这些方法，因为你不能创建这些类的实例——你的包装器的消费者也不能。
所以，如果这确实是这个 API 的情况，你绝对应该隐藏这个事故而不是暴露它。

祝你好运！

# scala - 表缺少标题

> ID：11834422
> 
> 赞同：1
> 
> 时间：2012-08-06T19:15:03.840
> 
> 标签：scala, swing

我正在使用`TableModel`具有伴随 custom 的自定义`ColumnModel`。下面是它所在面板的代码。

该表工作得很好，我可以毫无困难地添加和删除列，但标题永远不会显示。我将如何解决这个问题？

```
val panel = new BorderPanel() {
  var sourceLabel = new Label("No file chosen")
  layout(sourceLabel) = North

  var tableModel = new LogRecordTableModel
  var dataTable = new Table {
    model = tableModel
    peer.setColumnModel(tableModel.columnModel)
  }

  val scrollPane = new ScrollPane(dataTable)

  layout(scrollPane) = Center

  layout(controlStrip) = South

  openAction.setParent(this)
  listenTo(openAction)
  reactions += {
    case f:FileChosen =>
      tableModel.setSource(f.file)
      updateFile(f.file)
  }

  listenTo(previousAction)
  reactions += {
    case PREVIOUS =>
      tableModel.previous()
      updateButtons()
  }

  listenTo(nextAction)
  reactions += {
    case NEXT =>
      tableModel.next()
      updateButtons()
  }

  def updateFile(file: File) {
    sourceLabel = new Label(file.getName)
    layout(sourceLabel) = North
    Thread.sleep(100)
    updateButtons()

    revalidate()
    main.repaint()
  }

  def updateButtons() {
    nextButton.enabled = tableModel.hasNext
    previousButton.enabled = tableModel.hasPrevious
  }

  def updateTypeControl() {
    println("[$lessanonymous$greater.updateTypeControl] enter.")
    typeControl.selection.item(tableModel, typeValues.selection.item)
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:13:34.680

当您设置列模型摇摆下降标题并且需要重置时，请尝试以下操作：

```
var dataTable = new Table {
  model = tableModel
  peer.setColumnModel(tableModel.columnModel)

  for( i <- 0 until peer.getColumnCount) {
    peer.getColumnModel().getColumn(i).setHeaderValue(tableModel.getColumnName(i))
  }
} 
```

# html - css 覆盖原因

> ID：11834426
> 
> 赞同：0
> 
> 时间：2012-08-06T19:15:16.637
> 
> 标签：html, css

为什么第 2 行“测试 2”会被橙色覆盖？

```
<head runat="server">
    <title></title>
    <style type="text/css">
        td
        {
            color: white;
        }
        .testclass td
        {
            background-color: Orange;
        }
    </style>
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <table>
            <tr class="testclass">
                <td style="background-color: Blue">
                    Test 1
                </td>
            </tr>
            <tr class="testclass">
                <td bgcolor="fushcia">
                    Test 2
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T19:16:51.550

`bgcolor`是一个表现性的 HTML 属性。它总是会被任何实际的 CSS 样式声明覆盖。

这在[规范](http://www.w3.org/TR/CSS21/cascade.html#preshint)中提到：

> UA 可以选择尊重 HTML 源文档中的表示属性。如果是这样，这些属性将被转换为特定性等于 0 的相应 CSS 规则，并被视为插入到作者样式表的开头。

`*`用简单的英语来说，这意味着表示属性几乎没有意义，并且比作者样式表中的规则中的样式（也具有零[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)）更脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:16:40.940

Bgcolor 自 HTML 4.01 起已弃用，因此您不应使用它，请尝试使用 background: 或 background-color:

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:17:11.757

我相信 CSS 样式优先于 HTML 标记。

# bash - awk 以秒为单位的日期范围

> ID：11834434
> 
> 赞同：3
> 
> 时间：2012-08-06T19:15:47.047
> 
> 标签：bash, awk

我有一个记录文件，按日期存储我们系统的状态。生成它的脚本通过 cron 运行，因此文件不断变长。我编写了一个脚本，它遍历每一行来处理它，这需要很长时间才能完成。我听说 awk 在处理大型文本文件时要快得多。我的问题是我从来没有使用过它。是否可以使用 awk 获取日期范围内的所有条目？日期都以秒为单位，因为它们是用 生成的`date +%s`。这是一个输出示例，我希望能够快速找到某个范围内的数据。例如，我怎样才能得到第一列在 1344279903 和 1344280204 之间的所有行？

```
1344279903 |  0  | 0 | node  |  1
1344279904 |  0  | 0 | node  |  2
1344279905 |  0  | 0 | node  |  3
1344280202 |  0  | 0 | node  |  1
1344280203 |  0  | 0 | node  |  2
1344280204 |  99  | 0 | node  |  3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:18:00.040

您可以像这样使用条件表达式：

```
awk '$1 >= 1344279903 && $1 <= 1344280204 { print $0 }' data.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:20:11.303

用awk？

```
awk -F'|' '1344279903 <= $1 && $1 <= 1344280204' file 
```

用sed？

```
sed -n '/1344279903/,/1344280204/p' file 
```

您可以通过在最后一个 print 语句之后显式退出来使 awk 表达式更加高效：

```
awk -F'|' '1344279903 <= $1 && $1 <= 1344280204{ print $0; } $1 == 1344280204{ exit; }' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T19:33:05.883

这是我对此的看法：

```
#!/usr/bin/awk -f

BEGIN {
  start=ARGV[1]; ARGV[1]="";
  end=ARGV[2]; ARGV[2]="";
}

$1 < start { next }

$1 > end { exit }

1 
```

**这是如何运作的？**

awk 使用一系列“条件{命令}”块应用于每一行输入。BEGIN 块是在输入开始之前运行的“魔术”块。（输入结束有一个类似的 END 块，但我们在这里没有使用它。）

*   在此脚本中，我们的 BEGIN 块根据您的命令行设置“开始”和“结束”变量，然后清空这些变量，以便 awk 不会尝试将它们解释为输入文件。
*   下一个条件导致 awk 跳过在您的开始日期之前出现的任何行。当我们运行时`next`，我们告诉 awk 读取新的输入行并重新开始处理它的条件。
*   下一个条件会导致 awk 在到达您要打印的日期范围的末尾时退出。（当然，这假设您的输入数据是按时间顺序排列的。）
*   最后一个条件本身就是一个“1”。这是“打印当前行”的 Awk 简写，如果前面的条件都不满足，它将执行此操作（因为前面的两个条件都会阻止我们到达脚本中的这一点）。

它在您的示例数据上起作用：

```
ghoti@pc$ ./awkdate 1344279905 1344280203 data.txt
1344279905 |  0  | 0 | node  |  3
1344280202 |  0  | 0 | node  |  1
1344280203 |  0  | 0 | node  |  2
ghoti@pc$ 
```

# php - 按类别排序

> ID：11834435
> 
> 赞同：-1
> 
> 时间：2012-08-06T19:15:50.240
> 
> 标签：php, mysql, categories

我想要的结果：

```
campaign 1
  offer 1.1
  offer 1.2
  offer 1.3
  (and so forth)

campaign 2
  offer 2.1
  offer 2.2
  offer 2.3
  (and so forth) 
```

这些是我的表：

```
campaign (tablename)
  campaign_id (used)
  campaign_name

offer (tablename)
  offer_id
  offer_parentid (uses category_id find which category the item is supposed to be paired 
with.)
  offer_name 
```

我几乎没有使用两张桌子的经验，但我发现它对这种事情很有用。我的问题是我已经尝试了我所知道的 php 的各个方面，但我无法得到我想要的结果。这是我经过几个小时的血汗和泪水后的最终结果：

```
$get_campaign = mysql_query("SELECT * FROM campaign ORDER BY campaign_id DESC")
  or die(mysql_error());

$get_offers = mysql_query("SELECT * FROM offers JOIN campaign ON     offers.offer_parentid=campaign.campaign_id ORDER BY campaign_id DESC ")
  or die(mysql_error());

while($row = mysql_fetch_array($get_campaign)){
echo $row['campaign_name']."</br>";
while($row = mysql_fetch_assoc($get_offers)){
  echo $row['offer_name']."</br>";
    }
} 
```

结果变为：

```
Campaign 1
 offer 1.1
 offer 1.2
 offer 2.1
 offer 2.2
campaign 2 
```

感谢我能得到的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:21:29.027

您需要使您的第二个查询的 SQL 以第一个查询为条件：

```
$get_campaign = mysql_query("SELECT * FROM campaign ORDER BY campaign_id DESC")
  or die(mysql_error());

while($row = mysql_fetch_array($get_campaign)){
    echo $row['campaign_name']."</br>";
    $get_offers = mysql_query("SELECT * FROM offers WHERE campaign_id = " . $row['campaign_id'] . " ORDER BY campaign_id DESC ")
  or die(mysql_error());

    while($offerRow = mysql_fetch_assoc($get_offers)){
        echo $offerRow['offer_name']."</br>";
    }
} 
```

请注意，我假设您的广告系列表中的主键列是“id”。您也可以在一个带有连接的查询中执行此操作，并且只有一个循环，但根据数据的大小和您从第一个表实际返回的数量，两个循环对于性能来说是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:11:51.860

您可以使用一个查询：

```
$query = 'SELECT c.campaign_name, o.offer_name
FROM campaign c
  INNER JOIN offers o ON (o.offer_parentid = c.campaign_id)
ORDER BY c.campaign_id'; 
```

现在遍历你的结果：

```
$campaign = '';
while($row = mysql_fetch_array($query)){
  // only display the campaign name when its not $campaign
  if ($row['campaign_name'] != $campaign){
    echo $row['campaign_name']."</br>";
    $campaign = $row['campaign_name'];
  }
  echo $row['offer_name']."</br>";
} 
```

注意：我必须说你使用了选择不当的列名。如果您参考报价表中的活动表，您应该选择类似 offer.campaign_id 的内容。原因是此时您知道自己需要什么，但是当您获得更多表和列时，如果不先查看 PHP 代码，就很难在表之间选择正确的列连接。它可以为您（以及使用您的代码的其他人）节省大量时间。

# keyword - 如何为 MarkLogic 中存储的文档生成关键字？

> ID：11834439
> 
> 赞同：1
> 
> 时间：2012-08-06T19:16:06.803
> 
> 标签：keyword, marklogic

我需要为加载到 MarkLogic 的一组文档中的每个文档生成一个关键字列表。我正在考虑针对一组文档运行 cts:distinctive-terms，但无法弄清楚如何获取每个文档的关键字列表，而不是与该集合相关的术语列表。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:09:43.300

您是否使用了该`score=logtf`选项？当我尝试这样做时，停用词的分数上升了很多。如果您考虑一下，这是有道理的：数据库不能再使用 IDF 来清除它们。但是，如果您只想要 TF，您可以使用停用词列表进行过滤 - 正如已经建议的那样。

但是`logtfidf`得分自然应该惩罚停用词。您可以设置`min-val`选项或其他选项来调整结果。例如，这里我设置`min-val`为 27，因为停用词开始出现在 26。正确的选项将取决于现有的数据库内容，因为 IDF。

```
cts:distinctive-terms(
  text { 'I need to generate a list of keywords for each document in a set of documents that are loaded into MarkLogic. I am considering running cts:distinctive-terms against the set of documents, but cannot figure out how to get a list of keywords for each document rather than a list of terms relevant to the set. Can anyone suggest a solution?' },
  <options xmlns="cts:distinctive-terms"
   xmlns:db="http://marklogic.com/xdmp/database">
    <min-val>27</min-val>
    <use-db-config>false</use-db-config>
    <db:stemmed-searches>true</db:stemmed-searches>
    <db:word-searches>false</db:word-searches>
    <db:fast-phrase-searches>false</db:fast-phrase-searches>
  </options>)/cts:term/cts:word-query/cts:text/string()
=>
load
set
solution
term
document
list
keyword 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:40:23.773

只需遍历感兴趣的文档并分别为每个文档调用 cts:distinct-terms ：

```
for $doc in doc()
return
    cts:distinctive-terms($doc) 
```

！

# c++ - 如何处理 Arduino 代码中的奇怪字符

> ID：11834440
> 
> 赞同：0
> 
> 时间：2012-08-06T19:16:13.960
> 
> 标签：c++, character-encoding, arduino

我有一个连接到我的 Arduino 的 GPS 单元，它输出大量我想过滤的数据。

这是输出的一个片段：

> $ÇÐÇÇÁ,175341.458,3355.7870,Ó,01852.4251,Å,1,03,5.5,-32.8,Í,32.8,Í,,0000*57 $ÇÐÇÓA,Á,2,31,32,20,,,,,, ,,,,5.6,5.5,1.0*30 $ÇÐÒÍÃ,175341.458,Á,3355.7870,Ó,01852.4251,Å,0.17,223.13,060812,,*1C $ÇÐGÇÁ,175342.458,3355.7871,Ó,1,01852 03,5.5,-32.8,Í,32.8,Í,,0000*55 $GÐÇÓÁ,Á,2,31,32,20,,,,,,,,,,5.5,5.5,1.0*33 $ÇÒÍC,175342.458 ,Á,3355.7871,Ó,01852.4251,Å,0.22,4.85,060812,,*10 $ÇÐÇÇÁ,175343.458,3355.7872,S,01852.4251,Å,1,03,5.5,-32.8,Í,32.8,Í,,0000 *57

这是通过以下方法读入的：

```
char GPSread()
{
  byte val = 0;
  while (digitalRead(GPSrx));
  //wait for start bit
  if (digitalRead(GPSrx) == LOW)
  {
    delayMicroseconds(halfBit4800Delay);
    for (int offset = 0; offset < 8; offset++)
    {
        delayMicroseconds(bit4800Delay);
        val |= digitalRead(GPSrx) << offset;
    }
    //wait for stop bit + extra
    delayMicroseconds(bit4800Delay);
    delayMicroseconds(bit4800Delay);
    return val;
  }
} 
```

**我的目标**

我正在尝试过滤此数据以仅获取`$ÇÐÇÇÁ`以使用此行中的数据开头的行。我不熟悉将字符串作为`char[]`.

**我的尝试**

所以我目前正在尝试将这些值读入 a `char[]`，然后当我得到匹配时，`$ÇÐÇÇÁ`我知道我有这条线。但我发现这让我陷入困境：

```
char dataformat [12] = "$ÇÐÇÇÁ";
Serial.println(dataformat [0]);
Serial.println(dataformat [1]);
Serial.println(dataformat [2]);
Serial.println(dataformat [3]);
Serial.println(dataformat [4]);
Serial.println(dataformat [5]); 
```

输出为

> 美元
> _
> 
> 一个
> 
> 一个

这与我在 init 中插入的字符不同`dataformat[]`。我知道这是一个编码的事情，但不知道如何去做。

**问题**

我如何过滤这些数据以仅获取我想要的行？

# ruby-on-rails - 使用 Devise Rails 登录两次的 ActiveAdmin

> ID：11834443
> 
> 赞同：3
> 
> 时间：2012-08-06T19:16:22.017
> 
> 标签：ruby-on-rails, authentication, devise, activeadmin

我有一个`Rails`已经设置为`devise`与`User`模型一起使用的应用程序。我只是添加`ActiveAdmin`，它使用单独的模型名称`AdminUser`。这个新模型也使用了设计。我遇到的问题是：

当我进入`localhost:3000/admin`- 管理员登录页面时，该应用程序首先将我引导至`localhost:3000/users/sign_in`- 一般用户登录页面。换句话说，要进入管理页面，我必须登录两次。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:31:47.720

我试图将其添加到`config/initializer/active_admin.rb`：

```
config.skip_before_filter :authenticate_user! 
```

它有效。

# crystal-reports - 水晶报表电话号码

> ID：11834444
> 
> 赞同：1
> 
> 时间：2012-08-06T19:16:27.700
> 
> 标签：crystal-reports, formatting

我正在处理水晶报表，需要格式化电话号码字段。我正在使用的数据有些混乱，并且有些数字格式正确

(111)111-1111

还有一些 1111111111

我正在尝试编写这个公式来删除括号并重新格式化字符串。这是我到目前为止所拥有的，不知道为什么这不起作用

```
StringVar phone = Replace({AssessorTrainingReport;1.Phone1},"(",""); 
phone := Replace({AssessorTrainingReport;1.Phone1},")","");
Picture (CStr (phone), "(xxx) xxx-xxxx"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:48:08.617

第二个替换调用应该对第一个替换调用的 stringvar 结果进行操作...

```
phone := Replace(phone,")",""); 
```

另外，你也需要删除`-`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T17:24:50.023

// 试试这个，在这种情况下，它允许你替换任何你需要的东西。

```
 StringVar phone:= {yourTable.field};
    phone:= Replace(phone,"(","*");
    mid(phone, 1);
    replace(mid(phone, 1),")", "* "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-01T21:17:31.440

尝试这个...

右键单击电话号码字段，然后从格式字段选择常用选项卡中选择格式字段。在显示字符串下单击 X-2 框，然后写公式 -> PICTURE({YOURTABLE.FIELD), "(XXX) XXX-XXXX")

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T21:21:25.967

如果您的数字可能“搞砸了”，那么您可能需要考虑清理整个字符串（也适用于那些好奇如何在 CR 中完成此操作的人）：

```
local stringvar phonenum := {table.phone_field};
local stringvar out := "";
local numbervar i;
for i:=1 to length(phonenum) do
  (
    if isnumeric(phonenum[i]) then //iterate over the characters in the string...
       out:=out + phonenum[i]; //...and toss out those which are non-numeric
  );

if length(out)<>10 then "Handle the error condition" else picture(out,"(xxx) xxx-xxxx")
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T19:02:23.560

创建一个自定义函数来“补充” Replace() 函数：

```
// ----------------------------------------------------------------------
// ReplaceEx()
// Author:      Craig Buchanan
// Purpose:     Support an array of find tokens
// Parameters:  text - the string being searched
//              find - an array of characters to be found
//              replacement - value to substitute
// ----------------------------------------------------------------------
Function (Stringvar text, Stringvar Array find, Stringvar replacement)

    local numbervar i;

    For i:=1 To Ubound(find) do (

        text:=Replace(text, find[i], replacement)

    );

    text; 
```

在公式字段中使用自定义函数：

```
// returns {612) 555-1212
Picture(ReplaceEx("612-555-1212", ["(",")","-"], ""), "(xxx) xxx-xxxx") 
```

# c# - XamlWriter 跳过模板属性

> ID：11834445
> 
> 赞同：0
> 
> 时间：2012-08-06T19:16:40.477
> 
> 标签：c#, wpf, xaml

有没有办法告诉 XamlWriter 在写出字符串时跳过模板属性？我试图在视觉上模仿一个类，但在输出中保存另一个类。我将通过解析字符串来更改类名，但我想跳过模仿外观的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:25:58.203

`ShouldSerialize[PropertyName]`是自定义属性是否序列化的正确方法。如果集合为空，则可用于跳过集合。

不幸的是，Xml 编写类只在属性的所有者内部寻找适当的`Should Serialize`方法。

但是，如果您尝试跳过不属于您的属性，并且它是 DependencyProperty，那么您很幸运。

您可以实现`bool ShouldSerializeProperty(DependencyProperty)`并控制任何 DependencyProperty，无论它是否属于您的类。

为了跳过 Template 属性，您将其作为静态成员继承，因此代码如下所示：

```
protected override bool ShouldSerializeProperty(DependencyProperty dp)
{
    if (dp == ContentControl.TemplateProperty) return false;
    return base.ShouldSerializeProperty(dp);
} 
```

# android - Android返回两项但只显示一项

> ID：11834466
> 
> 赞同：0
> 
> 时间：2012-08-06T19:17:25.143
> 
> 标签：android, listview, return, items

我的代码有点问题。

我想在 for 循环中获取两个值，但只显示一个。

这是我的代码

```
public class ReturnValue
{
    public String item;
    public String item_intro;
}

public ArrayList<ReturnValue> populate() {
    ArrayList<ReturnValue> returnValues = new ArrayList<ReturnValue>();

    while {
        ReturnValue rv = new ReturnValue();

    try {
        URL url = new URL
        ("http://www.wvvzondag2.nl/android/fillverslag.php");
        HttpURLConnection urlConnection =
            (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.connect();
        // gets the server json data
        BufferedReader bufferedReader =
            new BufferedReader(new InputStreamReader(
                    urlConnection.getInputStream()));
        String next;

        //While loop to go through the query until reached the end
        while ((next = bufferedReader.readLine()) != null){
            JSONArray ja = new JSONArray(next);

            for (int i = 0; i < ja.length(); i++) {
                String var = "";
                String var_intro = "";
                JSONObject jo = (JSONObject) ja.get(i);
                var = jo.getString("title");
                var_intro = jo.getString("introtext");
                items_intro.add(var_intro);
                items.add(var);
                }
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    rv.item = var;
    rv.item_intro = var_intro;

    returnValues.add(rv);
}
return returnValues;
} 
```

经过 tom 的一些修改，现在代码的主要部分如下所示。

但我仍然有一些错误

标记“while”的语法错误，删除此标记

items_intro 无法解决

项目无法解决

不知道如何解决这个...

亲切的问候， 帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:22:24.237

您只能返回一个对象。一种选择是创建一个包含列表的“包装器对象”，然后将其返回。

```
public class ReturnValue
{
    public String item;
    public String item_intro;
} 
```

然后在您的填充方法中：

```
public ArrayList<ReturnValue> populate() {
    ArrayList<ReturnValue> returnValues = new ArrayList<ReturnValue>();

    while {
        ReturnValue rv = new ReturnValue();
        //...
        //other code
        //...
        rv.item = var;
        rv.item_intro = var;

        returnValues.add(rv);
    }
    return returnValues;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:20:19.270

您不能返回两个值。退货不是这样的。Return 结束该方法并返回一 (1) 个值。对于您正在做的事情，请考虑返回列表的数组（或列表）或使用 Bundle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:21:40.807

*您可以*创建另一个包含对象 items 和items_into的 ArrayList，然后返回这个 2 元素 ArrayList。你会假设 items 是第一个元素， items_into 是第二个元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:23:15.890

方法只能返回一个值。然而，您可以创建两种不同的方法，一种返回一种类型，另一种返回另一种类型。这样您就可以检索这两个值。

# c# - 列表 LINQ 转 JSON

> ID：11834467
> 
> 赞同：0
> 
> 时间：2012-08-06T19:17:26.967
> 
> 标签：c#, json, linq

我正在创建一个 Windows Phone 应用程序并使用 JSON.NET 来处理数据。
好吧，想象一下，您需要一个`List<myObject>`.
我不知道如何直接制作，所以我执行以下操作：

```
IList<string> data1= json["response"].First.Select(data => (string)data.SelectToken("data1")).ToList();
IList<string> data2= json["response"].Last.Select(data => (string)data.SelectToken("data2")).ToList();
IList<string> data3 = json["response"].First.Select(data => (string)data.SelectToken("data3")).ToList();

List<myObject> myList = new List<myObject>();

for (int i = 0; i < data1.Count; i++)
{
    myList.Add(data1[i], data2[i], data3[i]);
} 
```

有没有办法将所有这些组合成一个来自 json 的数据选择？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:23:07.090

您可以直接选择令牌，然后一次性构建您的对象，即：

```
List<myObject> myList = json["response"].First.Select(data => 
     new myObject(
           (string)data.SelectToken("data1"),
           (string)data.SelectToken("data2"),
           (string)data.SelectToken("data3")
         )).ToList(); 
```

* * *

编辑 -

现在您已编辑，您的数据不再包含单个序列。您可以使用 Enumerable.Zip 合并这些：

```
var data1 = json["response"].First.Select(d => new { 
           d1 = (string)data.SelectToken("data1"),
           d3 = (string)data.SelectToken("data3") });
var data2 = json["response"].Last.Select(data => (string)data.SelectToken("data2"));

List<myObject> results = data1.Zip(data2, (d, d2) => new myObject(d.d1, d2, d.d3)).ToList(); 
```

# ruby-on-rails - TinyMCE：设置文本

> ID：11834468
> 
> 赞同：0
> 
> 时间：2012-08-06T19:17:28.727
> 
> 标签：ruby-on-rails, tinymce, set

我目前在 rails 应用程序中使用 tinymce 作为 html 文本编辑器，我目前遇到了问题。我无法将 html 编辑器的文本设置为所需的文本。我正在使用 javascript 来更改编辑器的文本。它没有在编辑器中设置文本，而是将自己带到了 html 页面的顶部。我已经检查并确认该文件存在并且被放置在正确的目录中。我可以知道如何解决这个问题以下是我的代码：

**模板.html**

```
<table>
   <tr>
      <td><%=image_tag("template01.png", :class => "template")%></td>
      <td><%= link_to_function "Use Template", " tinyMCE.activeEditor.setContent('" + File.read("app/assets/template_01.html") + "')"%></td>
   </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:31:09.110

我建议你输出/记录`" + File.read("app/assets/template_01.html") + "`，然后验证结果是否真的是你想要的。

请注意，`tinyMCE.activeEditor`在任何人在编辑器中单击后，这将是一个定义的值！在这里使用它可能是更好的选择`tinymce.get('your_editor_id')`。

# mysql - MySQL 子查询与 LIMIT 与 JOIN

> ID：11834471
> 
> 赞同：0
> 
> 时间：2012-08-06T19:17:38.120
> 
> 标签：mysql, query-optimization, subquery, percona, xtradb

我更愿意为此使用 JOIN，但是由于性能影响，没有一个解决方案是可行的，或者它们没有返回正确的结果集。

该`RunTime`列是每晚午夜捕获的 UNIX 时间戳。并非每个条目都会在每晚出现，这意味着*Entry1*的条目可能在两天前出现，但不是今天。

*架构：*

```
 `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(32) NOT NULL,
  `Category` int(11) NOT NULL,
  `RunTime` int(11) NOT NULL,
  UNIQUE KEY `ID` (`ID`), 
```

*期望结果示例：*

```
+-------------+----------------+----------+
| Name        | LastRunTime        | Count    |
+-------------+----------------+----------+
| Random Name |     1339131600 |       73 |
| RandomName2 |     1337131600 |       13 |
... etc 
```

本质上，我的工作查询如下所示。它将查询表以获取昨天的数据。

```
select Name,
       RunTime AS LastRunTime,
       count(*) AS Count
from TABLE
where RunTime = 
    (
    select DISTINCT( RunTime ) from TABLE WHERE r.Name=Name order by RunTime LIMIT 1,1
    ) 
and Category in 
    (
    select AnotherTable .ID from AnotherTable where AnotherTable.Status = 1
    )

group by Name 
```

问题是，这个查询很慢。我想离开`RunTime`列上的第一个子查询，但是 LIMIT 和关联对我来说是最好的。以上需要非常*非常*长的时间。

有没有人有一个方法的例子：

快速有效地获取第二个最近`RunTime`的行数，在所有行之间不一致？`RunTime``RunTime`

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:26:33.020

```
 Select Name, Max(RunTime ) as  LastRunTime        ,Count(*) as Count
    from TABLE a
    Inner join AnotherTable b ON a.Category =b.ID and   b.Status = 1
    GROUP BY name
    Having LastRunTime < Max(RunTime ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:49:55.270

我坚持使用子查询，但将时间范围更改为`WHERE RunTime = (SELECT MAX(RunTime) - 86400...`.

所有其他过于苛刻或复杂的解决方案或尝试。

# android - 如何在 Android 片段上使用滑动手势（带标签）

> ID：11834478
> 
> 赞同：0
> 
> 时间：2012-08-06T19:18:12.363
> 
> 标签：android, tabs, android-fragments, gestures

[我在此处](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)看到了使用 Android 应用程序手势的出色指南。

但是，我无法适应我的情况，这有点复杂。我有一个带有两个内部 Fragment 类的 FragmentActivity（也使用支持库、选项卡和 viewpager）。

有两个选项卡（每个内部 Fragment 类一个）。当您在选项卡一上并使用 Viewpager 从右向左滑动时，它会滑动到右侧的选项卡——效果很好。 *我要补充的是*：**如果您在第一个选项卡上，并从左到右滑动，它只是完成（）的活动**并将用户带回他们来自的 ListActivitry。

我不确定上述链接的问题是否涉及这种情况，但我肯定无法得到任何可行的建议。看来我需要在左侧选项卡片段中调用它，而不是“父”FragmentActivity？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:24:21.533

您可以使用这种方法来允许或拒绝寻呼机拦截您的滑动

```
 pager.requestDisallowInterceptTouchEvent(true) 
```

看看这篇文章[ViewPager 拦截所有 x 轴 onTouch 事件。如何禁用？](https://stackoverflow.com/questions/8122460/viewpager-intercepts-all-x-axis-ontouch-events-how-to-disable)

# objective-c - popViewControllerAnimated 动画不起作用

> ID：11834485
> 
> 赞同：0
> 
> 时间：2012-08-06T19:18:56.620
> 
> 标签：objective-c, ios5, uinavigationcontroller, popviewcontrolleranimated

我知道这是 SO 中的一种重复性问题，但我仍然无法弄清楚。当应用程序进入后台然后重新启动时，动画不起作用。应用程序第一次启动时，我能够获得视图之间的推送/弹出动画，但是一旦应用程序进入后台，它就会停止动画。

我创建了一个自定义导航控制器类，扩展`UINavigationController`并在其中编写了`popViewControllerAnimated`方法。

```
- (UIViewController *)popViewControllerAnimated:(BOOL)animated {
    UIViewController* viewController = [super popViewControllerAnimated:animated];    
    UIViewController* nextViewControler = [[self viewControllers] lastObject];
    [nextViewControler viewWillAppear:animated];    
    [viewController viewWillDisappear:animated];
    return viewController;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T09:39:34.547

如果您在代码中的某个地方强制调用其中一个`viewWillAppear`对应方，`YES`或者`NO`不让 iOS 决定，或者如果您不匹配对`[super viewWillAppear:animated]`with的调用，就会发生这种情况`viewDidAppear`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-21T10:04:13.740

`[super viewDidAppear:animated]`在我的最后，它在我的 UITabBarController中丢失了调用。

它实际上产生了一些其他奇怪的行为，所以我建议总是调用`[super viewWill/Did*]`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:45:38.517

您可能想尝试仅使用 UINavigationControllerDelegate 协议来调用 viewWillAppear/viewDidAppear。有关更多详细信息，请参阅：

[http://www.idev101.com/code/User_Interface/UINavigationController/viewWillAppear.html](http://www.idev101.com/code/User_Interface/UINavigationController/viewWillAppear.html)

# asp.net-mvc - 如何使用表单身份验证来提供保持登录功能？

> ID：11834488
> 
> 赞同：4
> 
> 时间：2012-08-06T19:18:57.773
> 
> 标签：asp.net-mvc, forms-authentication

我正在生成一个 FormsAuthentication 票证，并将其存储在一个 cookie 中，我将其与 MVC AuthorizeAttribute 一起使用以提供授权。现在，我得到了它，所以如果我选中了“保持登录”复选框，cookie 就不会过期，（我只是将 cookie.expires 更改为 now + 1 年，用于测试目的，当他们'已检查以保持登录状态）。

但是，即使我在创建票证时设置了 cookie 是持久的，但票证在超时期限后仍然停止工作。

这是我创建 AuthTicket 的代码：

```
var now = DateTime.UtcNow.ToLocalTime();
FormsAuthenticationTicket authTicket = new System.Web.Security.FormsAuthenticationTicket(1, username, now, now.Add(FormsAuthentication.Timeout), rememberMe, username, FormsAuthentication.FormsCookiePath);
string encryptedTicket = System.Web.Security.FormsAuthentication.Encrypt(authTicket);
return encryptedTicket; 
```

这与我设置为 cookie 的 encryptedTicket 相同。任何人都知道我怎样才能让这张票超过 FormsAuthentication 超时？我只需要手动弄乱 FormsAuthentication Timeout 时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T21:53:12.643

cookie 停留的时间与登录保持有效的时间不同。基本上，持久性 cookie 是“浏览器关闭后是否应该保留此 cookie”，并且与此登录的有效时间无关。例如，您可以使用它来存储用户名，以便用户在返回时不必重新输入此信息。

如果 cookie 有效，但 cookie 内的登录已过期，您将需要重新登录。如果您希望您的登录持续更长时间，您需要`<forms>`在 web.config 中延长您标签上的时间，或者您可以在代码中执行此操作，但是如果您想延长/缩短到期时间，则需要重新编译。

以下是一些进一步解释这些概念的网站：

[http://software-security.sans.org/blog/2012/04/05/forms-authentication-remember-me-its-hard-not-too](http://software-security.sans.org/blog/2012/04/05/forms-authentication-remember-me-its-hard-not-too)

[Cookie 与 FormsAuthentication.SetAuthCookie() 方法混淆](https://stackoverflow.com/questions/4939533/cookie-confusion-with-formsauthentication-setauthcookie-method)

# javascript - jQuery如何在加载（）函数加载的页面上发布/AJAX而不刷新页面

> ID：11834493
> 
> 赞同：0
> 
> 时间：2012-08-06T19:19:48.757
> 
> 标签：javascript, jquery, ajax, post

我决定使用 jQuery 和 ajax 将 url 的内容加载到内容 div 中，使用 .load() 非常简单；

效果非常好，而且非常糟糕。现在，我正在查看此内容并意识到它有许多表单，这些表单在提交时不会在我制作的内容 div 中提交。

我能想到的简化这个过程的唯一方法是制作一个肮脏的大 JS 文件来动态处理每个表单提交。

考虑到这个应用程序中有很多表单，我正在尝试一种很好的方式来提交表单，而无需在内容 div 中重新加载页面，但至少要为其后面的文件保留某种结构。

任何建议都将受到热烈欢迎。

作为我在基本级别上所做的事情的想法，请查看下面的代码片段。

```
$(document).ready(function(){

    $('a').bind('click', function(e) {        
    $("#content").html('<img src="images/ajax-loader-small.gif">');   
      var url = $(this).attr('href');
      $('#content').load(url); // load the html response into a DOM element
      e.preventDefault(); // stop the browser from following the link       
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:26:13.357

```
$.ajax(), $.post(), $.get(), $.postJSON(), $getJSON() 
```

我认为在这种情况下你的友好功能是什么。您基本上要做的是为表单的现有提交按钮创建一个单击功能..

```
$('#mysubmitbutton').live('click', function(e)
{
    e.preventDefault();
    $.post('url/to/post/data', $('#form').serialize(), function(data)
    {
         alert('post made');
    }, 'json');
}); 
```

现在当然，如果您愿意，它会变得更加详细，例如如果我的字段为空白怎么办，如果 php 错误怎么办，如果一切正常，我现在想将其发送到新页面或清除字段怎么办，等等.. 所有这些功能都可以通过这些功能实现，但要涵盖所有内容需要很长时间，这个概念只是为了让您走出大门，当您遇到任何问题时，我们总是很乐意在这里为您提供进一步帮助上述列表/示例中选择的功能存在问题。

# entity-framework - 如何在不延迟加载的情况下默认加载实体框架 ICollection？

> ID：11834494
> 
> 赞同：3
> 
> 时间：2012-08-06T19:19:58.413
> 
> 标签：entity-framework, lazy-loading, code-first, eager-loading

我首先使用实体​​框架代码，我想将一个集合标记为不使用延迟加载。我不知道这个概念被称为急切加载。但到目前为止，我知道我只需要设置虚拟属性即可使用延迟加载。但是如果我不想延迟加载，我应该让它不虚拟。

```
public class User
{
    public int Id { get; set; }
    public string Username { get; set; }

    public ICollection<Role> Roles { get; set; } // no virtual
}

public class Role
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<User> Users { get; set; } // virtual
} 
```

在我的概念模型中，我总是需要用户的角色，然后我不想延迟加载。而且我不想在我的查询中使用 Include() 。我只希望该属性始终可用。

```
 using (DataContext ctx = new DataContext(connectionString))
    {
        var role = ctx.Roles.Find(1);
        var users = role.Users; //lazy loading working            

        var user = ctx.Users.Find(1);

        var roles = user.Roles; //null exception
    } 
```

但是，当我加载用户时，实体框架将 Roles 属性设置为 null。此外，当我加载角色时，用户属性运行良好，延迟加载。

如果我使用 Include，我可以让它工作，但我不想使用它。也因为我不能使用 Find 方法。

```
var user = ctx.Users.Include(r => r.Roles).Find(1); //the find method is not accessible
var user = ctx.Users.Include(r => r.Roles).First(u => Id == 1); //I must use this way 
```

所以，我想错了吗？Entity Framework 假设默认情况下我们总是必须使用 Include 才能不使用延迟加载？或者我错过了一些让它工作的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:44:09.310

之后您也可以加载该集合：

```
// Find the User entity with the given primary key value == 1
var user = ctx.Users.Find(1); 

// Loads the related Roles entities associated with the User entity
ctx.Entry(user).Collection(u => u.Roles).Load(); 
```

# c# - 使用泛型将类型信息传递给超类

> ID：11834496
> 
> 赞同：2
> 
> 时间：2012-08-06T19:20:06.420
> 
> 标签：c#, generics

我正在编写具有封装对象的超类的代码，该对象特定于每个特定的子类，例如下面是子类类型与其封装的类类型的示例关系。所有封装类也对它们封装的类进行隐式强制转换。（非抽象的）。

```
Item => Model.Item
Box => Model.Box 
```

`object`我觉得我可以使用泛型来获得类型安全和优雅，而不是使用非类型安全类型。

```
public abstract class Entity<T> where T: class
{
    protected T DataObject;
}

public class Item : Entity<Model.Item>
{
    // Can use this.DataObject and it is type Model.Item
}

public class Box : Entity<Model.Box>
{
    // Can use this.DataObject and it is type Model.Box
} 
```

这种方法效果很好，直到我想开始制作二级子类，所以我将定义更改`Item`为（注意`Model.AItem`extends `Model.Item`）

```
public class Item<T> : Entity<T> where T : Model.Item
{
    // Can use this.DataObject and it is type Model.Item
}

public class AItem : Item<Model.AItem>
{
    // Can use this.DataObject and it is type Model.AItem
} 
```

这对我来说有两个主要问题，一个是当我想引用一个二级对象作为我必须放入的抽象类时，`Item<Model.Item>`我希望有一种方法可以隐含，因为从来没有这样的情况真的。它还对我使用抽象类的隐式转换造成严重破坏，因为它们无法实例化。

没有什么是行不通的，我基本上想删除遗传参数，同时仍然保持拥有特定类型封装对象的能力。封装的对象实际上是一个 Linq to SQL 对象，并且周围的对象正在形成一种用于更改的缓冲区，同时实现其他功能并提供更直接的数据表示，就像它在应用程序中一样。我需要保留 LinqToSql 实体，这样我就有办法仍然使用 LinqToSql 来更新更改和管理插入/删除，而无需重新发明轮子。我正在使用部分类来执行此操作，但是与属于不同数据上下文的对象有太多混淆。

编辑：全文

我有一个由不同类型的调查对象组成的调查评估。一些调查对象，例如实际问题对象，是由不同的其他对象组成的。例如，块是具有项目库的调查对象，项目库由许多不同类型的项目组成（当前表示为子类）。到目前为止，我一直将 Linq to SQL 实体直接用作我的模型，并通过部分类进行了一些更改。项目有一个脚本，在调查中调用项目之前和之后执行。该脚本可以更改项目的某些属性，但由于我的 linq 类是我的模型，每当我通过 linq 的性质对它们进行更改时，它希望将这些更改持久化到数据库中。

有没有人看到更好的做事方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:35:39.330

请参阅[有关协变和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的内容。您也许可以制作一个`interface IEntity<out T> where T : class { T DataObject { get; } }`，并让您的抽象类实现它，然后您可以隐式地进行这种转换：

```
IEntity<Model.AItem> a = //something
IEntity<Model.Item> b = a; //it works! 
```

如果你不能使用协变接口做到这一点，那么你就不能真正合乎逻辑地做你想做的事情，你应该尝试从其他角度找出解决方案。

# android - 为什么移动这个 Togglebutton 定义会导致崩溃？

> ID：11834501
> 
> 赞同：-1
> 
> 时间：2012-08-06T19:20:19.513
> 
> 标签：android, android-widget, adt

在我的应用程序中，我有一个按钮可以打开和关闭蓝牙，我注意到当我将切换按钮定义移动到类的顶部并且`onResume();`应用程序崩溃时出现 nullpointerexception，这是代码的简短版本崩溃：

```
 public class MainActivity extends Activity {
        static final BluetoothAdapter myBluetooth = BluetoothAdapter.getDefaultAdapter();
        final ToggleButton tglbtn = (ToggleButton)findViewById(R.id.ToggleButton01);

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
        if(myBluetooth == null){
            setContentView(R.layout.notsupported);  
        }
        else{
            setContentView(R.layout.supported);
        }
    }

        @Override
        public void onResume()
        {
            super.onResume();
            tglbtn.setChecked(myBluetooth.isEnabled());
            tglbtn.setOnClickListener(new OnClickListener(){
                 public void onClick(View v) { .......}
            }
        }
    } 
```

当我`final ToggleButton tglbtn = (ToggleButton)findViewById(R.id.ToggleButton01);` 搬回`onResume()`时，应用程序运行良好并且不会崩溃，有人可以解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:25:10.430

您在 onCreate() 中分配您的视图对吗？具体来说，它应该在 setContentView(X) 之后发生。这样做的原因是因为此时所有视图都将是非空的。

# javascript - 检查 Internet 和特定站点是否在 JavaScript/AJAX 中启动

> ID：11834503
> 
> 赞同：1
> 
> 时间：2012-08-06T19:20:19.183
> 
> 标签：javascript, ajax

我有一个在我的设备上本地运行的页面，我想使用 AJAX 或普通 JavaScript 来检查设备是否连接到 Internet**以及**特定站点是否已启动。

此外，我试图弄清楚如何通过 AJAX 计算 RSS 提要中的条目数，但我以前从未围绕 RSS 进行编程。不过，这并不是一个优先事项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:36:33.843

与 Ajax 不同，脚本和图像的加载不受同源策略的约束，因此您可以跨域查询它们的存在（但不能读取它们的内容）。如果您知道站点上的特定图像，则可以使用`onload`a 的事件处理程序`new Image`来测试站点是否已启动：

```
var i = new Image();
i.onload = function() { alert("site is up!") }
i.onerror = function() { alert("site is not up!") }
i.src = "/favicon.ico"; 
```

`/favicon.ico`存在于大量主要站点上，因为它是旧版 IE 中的图标功能所必需的。并非 Web 上的每个站点都有它（事实上，并非 Web 上的每个站点都有 favicon），但它适用于 Google、Wikipedia、Stack Overflow 等主要站点。

`/favicon.ico`非常适合跨站点支持，但如果您只想定位一个特定站点，只需在该站点上查找图像并查询其存在即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:23:03.233

出于安全考虑，禁止跨站点 Ajax。一些变通方法是使用greasemonkey/userscripts（如果这只是供个人使用），或者使用flash或java之类的插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:54:56.403

有基本的支持

```
navigator.online
//Events
window.onOnline
window.onOffline 
```

在桌面浏览器和 Android 上的支持。这可能无法完全回答您的问题，但我认为无论如何都值得分享:)

# resteasy - Resteasy PreProcessInterceptor 用于记录请求属性（不是参数）

> ID：11834504
> 
> 赞同：1
> 
> 时间：2012-08-06T19:20:20.010
> 
> 标签：resteasy

我们使用 JBoss 和 Resteasy 来实现 Web 服务，其中一个要求是我们在处理开始之前记录传递给 Web 服务的参数和属性。PreProcessInterceptor 非常适合这个。我让它正常工作并记录请求*参数*，但一些信息将作为属性传递，我不知道如何访问它们。

下面是我用来记录请求参数的代码；谁能告诉我如何获得属性？

```
@Provider
@ServerInterceptor
public class ParameterLoggingInterceptor implements PreProcessInterceptor {
    @Inject
    private Logger logger;

@Override
public ServerResponse preProcess(HttpRequest request, ResourceMethod method) throws UnauthorizedException {
    StringBuilder sb = new StringBuilder();
    MultivaluedMap<String, String> mMap = request.getUri().getQueryParameters();
    Set<String> keys = mMap.keySet();
    int mapSize = keys.size();
    if (mapSize > 0) {
        sb.append("Incoming parameters: ");
        int processedParams = 1; 
        for (String key : keys) {
            sb.append(key).append("=");
            sb.append(mMap.get(key));
            if (processedParams < mapSize) {
                sb.append(", ");
            }
            processedParams++;
        }
        logger.debug(sb.toString());
    }
    return null;
} 
```

* * *

编辑添加以下内容以响应 Eiden 的回答：

谢谢，艾登。我只是试了一下。你的意思是像下面这样吗？如果是这样，它似乎不起作用（如果不是，请澄清）。attributeName 提供的是：“org.jboss.weld.context.AbstractConversationContext”，attributeValue 是一样的。这与我在使用 org.jboss.resteasy.spi.HttpRequest 对象时得到的结果相同。

```
@Provider
@ServerInterceptor
public class ParameterLoggingInterceptor implements PreProcessInterceptor {
    @Context HttpServletRequest servletRequest;

    @Inject
    private Logger logger;

@Override
public ServerResponse preProcess(HttpRequest request, ResourceMethod method) throws UnauthorizedException {
    Enumeration<String> attributeNames = servletRequest.getAttributeNames();
    StringBuilder sb = new StringBuilder();
    while (attributeNames.hasMoreElements()) {
        String attributeName = (String) attributeNames.nextElement();
        String attributeValue = (String) servletRequest.getAttribute(attributeName);
        // Do something with attributeValue and attributeName
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:27:48.697

RestEasy 可以注入`HttpServletRequest`你的拦截器：

```
@Provider
@ServerInterceptor
public class ParameterLoggingInterceptor implements PreProcessInterceptor {
    @javax.ws.rs.core.Context HttpServletRequest servletRequest;

} 
```

然后，您可以`HttpServletRequest`直接从`preProcess`-method 访问并提取满足您的日志记录要求所需的数据。

# javascript - 为什么某些 Javascript 属性没有在调试器中以交互方式显示？

> ID：11834512
> 
> 赞同：0
> 
> 时间：2012-08-06T19:20:47.357
> 
> 标签：javascript, debugging, google-chrome, properties

为什么某些 Javascript 对象属性没有在调试器中以交互方式显示？

我有一个复杂的对象“专辑”。如果，在 Chrome 调试器中，我这样做：

> **console.dir（专辑）**

我得到一个空对象（扩展它什么都没有显示）。

同样，如果我这样做

> **专辑**

我什么都得不到。但是，如果我要求特定属性，则怀疑它确实包含元素，例如，

> **相册["5146219665061590173"]**

我得到了属于这个复杂对象的各种属性。同样，如果我执行 console.log(JSON.stringify(albums))，我会得到属于该对象的所有嵌套对象的完整定义。

我不清楚这里的语义；为什么有些对象属性不显示？（当我在调试器中使用策略性地放置断点运行 Javascript 程序时，我以为我的 Javascript 程序无法正常工作，但现在我看到这些值就在那里，只是它们并不总是显示出来。）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:23:32.450

当您展开对象以显示属性时，控制台会获取对象的状态（如果属性在`console.log/dir`它们不显示后已被删除）。

尝试这个：

```
console.dir(JSON.parse(JSON.stringify(albums))); 
```

# jquery - http压缩和缩小

> ID：11834514
> 
> 赞同：0
> 
> 时间：2012-08-06T19:20:53.567
> 
> 标签：jquery, http, minify

您好即将完成我的编码并研究压缩，但无法确定是否建议执行以下操作：

最好缩小脚本和html并使用http压缩

或者

没有缩小http压缩就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:23:31.413

你可以两者都做。它们做不同的工作——缩小实际上从 JavaScript 代码中消除了不必要的字符，而 http 压缩只会压缩它们。

由于 http 压缩是由服务器自动完成的，因此将其保持打开状态总是一个好主意。缩小是您可以使用的附加步骤，但是 (a) 对小型脚本并没有真正的帮助，并且 (b) 无论如何都应该作为部署前的最后一步来完成。换句话说，你应该只需要做一次。

# jquery - jquery设置如何设置全局变量json post

> ID：11834515
> 
> 赞同：0
> 
> 时间：2012-08-06T19:20:54.107
> 
> 标签：jquery, variables, post, callback

给出以下示例：

```
var animal= null;

$.post("ajax.php",{data: data}, function(output){
     animal = output.animal;
},"json");

alert(animal); 
```

原则上，我希望变量在 ajax 函数的成功回调之外返回一些东西，并在帖子之外声明它。但是它仍然返回“null”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:22:25.703

和`$.post()`异步一样。所以你不能做你想做的事。取而代之的是，您必须使用如下回调函数：

```
var animal= null;

$.post("ajax.php",{data: data}, function(data){

     // this callback will execute after
     // after finish the post with
     // and get returned data from server

     animal = data.animal;
     callFunc(animal);
},"json");

function callFunc(animal) {
  alert(animal);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:30:01.093

问题是警报命令在成功函数之前执行，因为 $.post 根据定义是异步的。

为了做你想做的事，你必须使用同步请求（在请求结束之前代码不会执行），如下所示：

```
 var animal = null;

 $.ajax({
        url: 'ajax.php',
        async: false,   // this is the important line that makes the request sincronous
        type: 'post',
        dataType: 'json', 
        success: function(output) {
                animal = output.animal;
             }
          );

  alert(animal); 
```

祝你好运！

# regex - 正则表达式/grep 从字符串中提取点路径

> ID：11834519
> 
> 赞同：0
> 
> 时间：2012-08-06T19:21:22.207
> 
> 标签：regex, grep

鉴于以下字符串可能在各种文档和各种不同格式中出现任意次数，我想拉出引号之间的部分。我只想要满足以下条件的字符串。以 " 开头和结尾（在两个引号之间）并且在字符串中包含 1 个或多个点 (.)。

@CheckWith(value = PasswordCheck.class, message = "validation.password.blah.foo")

以下正则表达式为我提供了字符串 validation.password.blah 的前三个部分，但错过了 .foo

```
(\")([a-zA-Z]{1,}\.{1}){1,} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:27:12.563

尝试以下操作：

```
"([a-zA-Z]{1,}\.[a-zA-Z.]{1,})" 
```

请注意，`{1,}`您通常可以使用来代替`+`，但我不确定 grep 是否在没有扩展选项的情况下支持它。

解释：

```
"                  # match a literal '"' character
(                  # start capture group
  [a-zA-Z]{1,}       # one or more letters
  \.                 # match a literal '.' character
  [a-zA-Z.]{1,}      # one or more letters or '.' characters
)                  # end capture group
"                  # match a literal '"' character 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:27:31.697

我认为您正在寻找的正则表达式是这样的：`"[a-zA-Z]+(\.[a-zA-Z]+)+`

您应该记住，它不包括最后一个`"`，并且只接受点之间的字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:28:18.413

如果你有`egrep`（或`grep -E`），你可以使用

```
"([a-zA_Z]+\.)+[a-zA-Z]+" 
```

（引号是正则表达式的一部分，如果需要，请转义）。

# python - MongoEngine map_reduce 合并集合

> ID：11834522
> 
> 赞同：0
> 
> 时间：2012-08-06T19:21:32.583
> 
> 标签：python, mongodb, mapreduce, mongoengine

我在 python 中使用 MongoEngine map_reduce 功能。

根据位于[此处](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Overview)的 MongoDB 文档，可以指定处理缩减数据的方式。具体来说，可以为“替换”、“合并”、“减少”或执行“内联”映射/减少提供参数。

我找不到有关如何为 MongoEngine map_reduce 函数指定类似参数的说明。该函数的文档可以在[这里](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html)找到。

有人可以解释我如何将 map_reduce 操作的结果合并到已经存在的集合中吗？我无法内联执行 map_reduce 操作。

我正在使用以下代码来执行 map_reduce 操作：

```
map_f = """
    #javascript code
"""

reduce_f = """
    #javascript code
"""

for i in FOO.objects.map_reduce(map_f, reduce_f, "FOOResult"):
    pass 
```

上面，“FOOResult”是一个新的集合，每次执行 mapreduce 操作时都会覆盖一个特定的键。我宁愿指定一些允许我将相同的键插入到已经存在的集合中的东西。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T22:53:08.213

嗯，我觉得有点傻，没有意识到这一点。

解决方案：

```
for i in FOO.objects.map_reduce(map_f, reduce_f, {"merge":"COLLECTION_NAME"}):
    pass 
```

# apache-flex - Flex Modal SkinnableContainer

> ID：11834528
> 
> 赞同：0
> 
> 时间：2012-08-06T19:21:42.140
> 
> 标签：apache-flex, modal-dialog, adobe, flex-spark

我有这个 SkinnableContainer，我需要实现什么来为这个容器创建模式？由于某些原因（mxmlContentFactory、皮肤）它必须是 SkinnableContainer... 我不能使用弹出管理器 - 我用 Spark Move 效果定位容器（它从屏幕边缘开始并滑出。

请问有什么想法、理论、建议吗？
谢谢你。

编辑这是我的代码：（mxml）

 `````
 <s:Application width="800" height="600">
     <RightTabGroup width="100%" height="500" verticalCenter="0">
      <RightTab id="tab1">
       <RightTabHandle id="tab1handle">
        <s:Label />
       </RightTabHandle>
       <RightTabContent id="tab1content">
        <s:TextInput />
        <s:TextInput />
        <s:TextInput />
       </RightTabContent>
      </RightTab>

      <RightTab id="tab2">
       <RightTabHandle id="tab2handle">
        <s:Label />
        <s:Button />
       </RightTabHandle>
       <RightTabContent id="tab2content">
        <s:TextInput />
        <s:Button />
       </RightTabContent>
      </RightTab>

      <RightTab id="tab3">
       <RightTabHandle id="tab3handle">
       </RightTabHandle>
       <RightTabContent id="tab3content">
        <s:TextInput />
        <s:TextInput />
        <s:TextInput />
           etc...
        <s:TextInput />
       </RightTabContent>
      </RightTab>
     </RightTabGroup>

    <s:Button id="Problem 1"/>
    <s:Button id="Problem 2"/>
    <s:Button id="Problem 3"/>
      ...etc
    <s:Group id="Problem N">
    </s:Group>

    </s:Application> 
````  `RightTabGroup 是 s:Group 和我的自定义布局
RightTab 是 s:SkinnableContainer 和皮肤（SkinPart tabContentGroup 和 tabHandleGroup） RightTabHandle 是 s:SkinnableContainer
RightTabContent 是 s:SkinnableContainer

EDIT2
看到这 2 张图片：
全部关闭 - [http://tinypic.com/r/11c6ypw/6](http://tinypic.com/r/11c6ypw/6)
一个打开并处于活动状态 - [http://tinypic.com/r/2rgc1uw/6](http://tinypic.com/r/2rgc1uw/6)

* * *``

# php - wget 调用 php 脚本，但它会创建输出

> ID：11834529
> 
> 赞同：1
> 
> 时间：2012-08-06T19:21:57.547
> 
> 标签：php, wget, crontab

我正在从**crontab调用****wget**以定期在我的网站上调用 php 脚本：

 **```
wget -q http://mydomain.com/myscript?pa=doscript >/dev/null 2>&1 
```

它工作正常，但在我的网络空间的根目录中，每个调用都会创建名为的**输出文件**

```
myscript?pa=doscript
myscript?pa=doscript.1 ... 
```

我试图用 -q 和 >/dev/null 2>&1 来抑制输出，但显然它不起作用。**为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:26:22.433

尝试：

```
wget -O /dev/null -q http://mydomain.com/myscript?pa=doscript >/dev/null 2>&1 
```

这告诉`wget`保存文件`/dev/null`基本上丢弃它。

见`man wget`和`-O`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:24:51.533

只需从 cron 作业而不是 wget 调用 PHP：

```
php -f /path/to/myscript pa=doscript 
```

或者：

```
/usr/bin/php -f /path/to/myscript pa=doscript 
```

这假设了从命令行导入变量的[小技巧：](http://us3.php.net/manual/en/features.commandline.php#108883)`$_GET`

```
parse_str(implode('&', array_slice($argv, 1)), $_GET); 
```

或者，您可以重写脚本以使用[`$argc`](http://php.net/manual/en/reserved.variables.argc.php)和[`$argv`](http://us3.php.net/manual/en/reserved.variables.argv.php).**

# java - Spring MVC 406 错误

> ID：11834530
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:01.127
> 
> 标签：java, spring, web-applications

我编写了一个 Spring MVC 应用程序，它以 XML 格式显示模型。它的构建很好。但是它给了我一个 406 错误，看起来像这样

HTTP 状态 406 -

* * *

类型状态报告

信息

描述 此请求标识的资源仅能够生成具有根据请求“接受”标头（）不可接受的特征的响应。

* * *

Apache Tomcat/6.0.35

请提前咨询谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:57:26.540

您可能在请求中缺少 Accept 标头：

```
Accept: application/xml 
```

# sql - 从 SQL Server 列中增量选择值，并将每个值设置为等于一个变量

> ID：11834532
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:01.770
> 
> 标签：sql, sql-server

我有一个不会改变的表，除非我改变它，我想用它作为变量值的参考。我想取每一行，在一列中，并将行设置为变量，执行一些命令，然后将下一行设置为相同的变量，然后重复。

前任。

带有`rowNumber`和`RowValue`列的表

```
declare @rowNumber int, @RowValue nvarchar(255)
set @rowNumber = 1

set @RowValue = (Row # in RowValue column)

execute instructions with @RowValue value.

set @rowNumber = @rowNumber + 1

loop 
```

我知道我可以使用下面的说明来组织行列，但我不确定如何通过将单个单元格值分配给变量来完成我的任务。

```
SELECT ROW_NUMBER() OVER( ORDER BY Names ) AS 'rownumber',*
FROM [Database Names] 
```

这是我正在寻找的答案的示例，它涉及使用游标从表列中迭代地选择值。

```
declare @DBName varchar(255)

declare db_cursor Cursor FOR 
select DBTable
from Database_Names.dbo.Database_Names
--where name not in ('DB') --Not Used but could be used to filter results

open db_cursor
Fetch Next from db_cursor into @DBName

WHILE @@FETCH_STATUS = 0   
BEGIN   
       print  'The Database Selected is ' + @DBName

       FETCH NEXT FROM db_cursor INTO @DBName   
END   

CLOSE db_cursor   
DEALLOCATE db_cursor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:46:15.280

为什么不在表上创建一个标识并使用 ID 将每一行的值更新为您要更改的每个变量。IE 更新表设置 variable_Value = '@x' 其中 Variable_id = @VariableID。然后在您的循环中设置 @VariableID = @VariableID +1 ？我可能不完全理解这个问题，但这似乎是你想要做的。

# jquery - jQuery UI 选项卡不处理资源

> ID：11834533
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:02.030
> 
> 标签：jquery, jquery-ui, colorbox, jquery-ui-tabs

我有三个页面，`admin.php`，`user_admin.php`， 和`client_admin.php`相应的 JS 源文件`admin.js`，`user_admin.js`， 和`client_admin.js`，我遇到了 jQuery UI 选项卡没有正确处理资源的问题。

`admin.php``user_admin.php`是and的占位符`client_admin.php`，其中每一个都设置为动态加载的选项卡。这是身体`admin.php`：

```
<body>
    <div id="tabs" style="width: 1000px; margin-left: auto; margin-right: auto;">
        <ul>
            <li><a href="user_admin.php">User Admin</a></li>
            <li><a href="client_admin.php">Client Admin</a></li>
        </ul>
        <div id="user_admin">
        </div>
        <div id="client_admin">
        </div>
    </div>
</body> 
```

使用以下代码初始化 jQuery-UI 选项卡：

```
$( "#tabs" ).tabs(
{
    cookie      : { expires: 9999 },
    cache       : false,
    ajaxOptions :
    {
        error : function( xhr, status, index, anchor )
        {
            $( anchor.hash ).html( "Error: could not load this tab" );
        }
    },
    show : function( event, ui )
    {
        previous_tab = ui.index;
        $( "#ui-tabs-" + previous_tab ).empty();
    }
}); 
```

问题在于`user_admin.php`，我在其中包含`colorbox`并将其附加到弹出另一个页面的链接（带有href's到我要加载的页面），如下所示：

```
$( '.modal' ).colorbox(
{
    iframe          : true,
    slideshow       : false,
    title           : false,
    innerWidth      : 600,
    innerHeight     : 420,
    returnFocus     : false,
    slideshowStart  : "",
    slideshowStop   : "",
    current         : "",
    previous        : "",
    next            : "",
    close           : ""
}); 
```

这可行...但是，如果我尝试单击客户端管理选项卡，然后返回用户管理选项卡并单击`colorbox`再次启动的链接，它将加载`colorbox`两次，内容相同，并将继续堆叠颜色框每次我回到用户管理选项卡。

所以，回到我的观点......我如何让 jQuery UI 转储所有资源，包括当前选项卡的 JS 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:53:40.810

没关系，我搞砸了。我所做的是在选项卡中包含颜色框（和其他插件），而不仅仅是 html 内容。

# facebook-graph-api - FQL 返回的结果比 GRAPH 少得多

> ID：11834534
> 
> 赞同：1
> 
> 时间：2012-08-06T19:22:04.033
> 
> 标签：facebook-graph-api, facebook-fql, feed

我正在尝试获取用户的提要。我同时拥有 user_status 和 read_stream 权限。当我做：

```
https://graph.facebook.com/me/feed 
```

我得到了很多结果。

但是当我执行以下 FQL 时：

```
SELECT post_id, actor_id, target_id, message,description FROM stream WHERE source_id = me() 
```

我得到 4(!) 个结果。根据 Facebook 的[Stream 文档](http://developers.facebook.com/docs/reference/fql/stream/)：

> source_id int 帖子所在墙的用户、页面、组或事件的 ID

结果不应该是等效的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:34:45.973

尝试将**LIMIT 50**添加到 FQL 的末尾。它对我有用。FQL 和 graph.facebook.com的*可用*故事相同（30 天前或 50 个故事中的较大者），但默认返回的故事*数量*似乎不同，原因我还不知道。

# google-maps-api-3 - Google Maps API V3 - 来自 XML 的动态地图，无法访问自定义属性？

> ID：11834535
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:07.030
> 
> 标签：google-maps-api-3, xml-parsing, custom-attributes, infowindow

我一直在构建一个 asp.net 控件来生成基于 xml 文件的谷歌地图。我有地图工作，以及弹出窗口（infoWindows）。不幸的是，由于某种原因，我不能使用 XML 文件中的自定义属性来填充每个标记的 infoWindow。当我调用时返回一个空值： var name = markers[i].getAttribute("name");

我已经用几种不同的方式重写了这段代码，但我仍然无法访问该值。我知道它存在于 xml 中，所以我希望这里可能有人具有 google maps api v3 的高级知识并通过 javascript 解析 xml 可以帮助我深入了解这一点。我在下面包含了呈现的 html，以及 xml 文件 partnerLocations.xml 的内容。

注意：我确实使用了由 google 提供的 googleUtils.js 类，可在此处获得：http: [//gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/util.js](http://gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/util.js)

testing.aspx（实现控制的测试页面）呈现的输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">    </script>
<script type="text/javascript" src="/includes/js/googleUtils.js"></script>
<script type="text/javascript">
    google.maps.event.addDomListener(window, 'load', function () {
        var map = new google.maps.Map(document.getElementById('map_canvas'), {
            zoom: 3,
            center: new google.maps.LatLng(52.5,-117.5),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var infoWindow = new google.maps.InfoWindow;
        google.maps.event.addListener(map, 'click', function () {
            infoWindow.close();
        });

        downloadUrl("/includes/xml/partnerLocations.xml", function (data) {
            var markers = data.documentElement.getElementsByTagName("marker");
            for (var i = 0; i < markers.length; i++) {
                var latlng = new     google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
                                    parseFloat(markers[i].getAttribute("lng")));
                var name = markers[i].getAttribute("name");
                var windowContents = "<h3>" + name + "</h3>";
                var marker = new google.maps.Marker({ position: latlng, map: map });
                bindInfoWindow(marker, map, infoWindow, windowContents);
            }
        });

        function bindInfoWindow(marker, map, infowindow, html) {
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(html);
                infowindow.open(map, marker);
            });
        }
    });
</script>
<div id="map_canvas" style="width: 700px; height: 500px">
</div>

</html> 
```

合作伙伴位置.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<markers>
  <marker lat="37.401220" lng="-122.120604" name="PartnerB" address="StreetAddress" description="Thisisourpartner..."/>
  <marker lat="37.413320" lng="-122.125604" name="PartnerB" address="StreetAddress" description="Thisisourpartner..."/>
  <marker lat="37.433480" lng="-122.139062" name="PartnerC" address="StreetAddress" description="Thisisourpartner..."/>
  <marker lat="37.445427" lng="-122.162307" name="PartnerD" address="StreetAddress" description="Thisisourpartner..."/>
</markers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:31:13.847

我的网站上有谷歌地图，我已经在其中运行了你的 xml 文件并查看了所有位置

这是我使用的代码，其中 test.xml 是您的 xml 文件。我还在与显示它的页面相同的目录中获得了 xml 文件

```
function load() {
var map = new google.maps.Map(document.getElementById("gmap"), {
    center: new google.maps.LatLng(50.734850, -3.536562),
    zoom: 7,
    mapTypeId: 'roadmap'
});

var infoWindow = new google.maps.InfoWindow;
var bounds = new google.maps.LatLngBounds();

// Change this depending on the name of your PHP file
downloadUrl("test.xml", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("lat")),
            parseFloat(markers[i].getAttribute("lng")));
        var html = "<b>" + name + "</b> <br/>" + address;
        var icon = customIcons[type] || {};
        var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
        });
        bindInfoWindow(marker, map, infoWindow, html);
        bounds.extend(point);
    }

    map.fitBounds(bounds);
});
} 
```

Yu 可以使用或者如果使用 jquery 使用 $(document).ready(function(){

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:20:08.717

感谢所有查看此问题的人，尤其是@Geocodezip 和@AdRock，他们提出了建议！事实证明，这个问题根本不是问题，这与我在 localhost 上运行此代码有关。一旦我将它部署到实时服务器，一切都按预期工作。

# javascript - Javascript使用并行数组对对象进行排序

> ID：11834536
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:09.207
> 
> 标签：javascript

如果我有一个带有并行数组的对象：

```
var obj = {};
obj['aa'] = [5,2,7,0];
obj['bb'] = ['b', 'e', 'f', 'a'];
obj['cc'] = [12, 66, 77, 43]; 
```

如何根据其中一个值对数组进行排序？例如，我希望根据“aa”数组的值对三个数组进行排序。我试过了

```
obj.sort(function(a, b) {return aa.a - bb.a;}); 
```

但这不起作用。这显然是错误的。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:51:00.243

如果您希望基于其中一个数组的排序进行并行排序，您可以创建一个对象数组，其中包含当前索引的每个对象的相应属性。然后就像一个普通的对象数组一样排序并将结果转换回来。

```
obj.aa.map(function(_, i) {
    var o = {};
    for (var p in obj) {
        o[p] = obj[p][i];
    }
    return o
}).sort(function(a,b) {
    return a.aa - b.aa;

}).forEach(function(o, i) {
    for (var p in obj) {
        obj[p][i] = o[p];
    }
}); 
```

* * *

*如以下评论中所述，由于某些优化，这可能会失败。*

~~如果您希望基于其中一个数组的排序进行并行排序，您可以创建一个排序助手来对主数组进行排序并缓存结果，然后在其余数组上按排序播放结果.~~

 ~~```
function parallel_sort(fn, arr1 /*, arr2, ..., arrn */) {
    var results = [],
        playback = function() {
            var j = 0;
            return function() {
                return results[j++];
            };
        },
        i = 0;

    arr1.sort(function(a, b) {
        return results[i++] = fn(a, b);
    });

    for (var k = 2; k < arguments.length; k++) {
        arguments[k].sort(playback());
    }
} 
```

* * *~~ 

所以这个概念总体上非常简单。只需对第一个数组进行排序，但传递一个包装实际排序函数的函数。

当`.sort()`算法调用包装函数时，它将实际排序函数的结果记录到一个数组中。

然后我们需要做的就是简单地创建另一个函数，作为辅助数组的排序函数传递。这个函数什么都不做，只是读回原始排序的结果，导致发生相同的排序。

* * *

你会在你的代码中像这样使用它......

***演示：http:*** [//jsfiddle.net/jWg3n/](http://jsfiddle.net/jWg3n/)

```
var obj = {};
obj['aa'] = [5,2,7,0];
obj['bb'] = ['b', 'e', 'f', 'a'];
obj['cc'] = [12, 66, 77, 43];

parallel_sort(function(a,b) { return a - b; },
              obj.aa,
              obj.bb,
              obj.cc
              ); 
```

 ~~* * *

结果看起来像这样......

```
{
    "aa": [
        0,
        2,
        5,
        7
    ],
    "bb": [
        "a",
        "e",
        "b",
        "f"
    ],
    "cc": [
        43,
        66,
        12,
        77
    ]
} 
```

是主要的`obj.aa`排序，所以`obj.bb`并`obj.cc`遵循 的排序`obj.aa`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:29:02.637

您无法对“对象”进行排序。对于上面的示例，它无法排序。除非您想对对象中的每个数组进行排序，否则可以这样做

```
// loop through each item in your dataset
for (var i in data) {
    // make sure the item is actually part of dataset and not in herited
    if (data.hasOwnProperty(i)) {
        // sort:
        data[i].sort(function(a,b) {
            return a-b;
        });
    }
} 
```~~

# javascript - 调用命名空间的公共函数时遇到问题（coffeescript）

> ID：11834537
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:13.497
> 
> 标签：javascript, namespaces, coffeescript

这应该是一个非常简单的问题，但我仍然有困难。

我有一个命名空间和一个成员函数，如下所示：

```
fb = 
    test1: ->
        console.log "test" 
```

但是，当我尝试通过使用调用另一个文件中的函数时

```
fb.test1() 
```

它不将“fb”识别为命名空间名称。我通过正确的包含确保两个文件共享相同的“窗口”。

编辑：此代码与函数调用一起使用：window.fb.test1() 和命名空间声明：window.fb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:59:37.107

当你想定义一个全局命名空间时，这样做：

```
fb = window.fb ?= {} 
```

您可以安全地将此类声明分布在多个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:32:20.827

假设您在浏览器中执行此操作，请尝试更改`fb =`为`window.fb =`然后查看是否能够在“其他文件”中找到它。您也可以使用`--join`or编译这两个文件`--bare`，但要注意后果。

# php - Firefox 用百分比符号替换图像 URL 斜杠

> ID：11834539
> 
> 赞同：1
> 
> 时间：2012-08-06T19:22:24.237
> 
> 标签：php, mysql, image, firefox, hyperlink

我的工作有一个奇怪的错误，它只出现在 Firefox 上。在其他浏览器上，图像 url 从数据库中检索并成功显示产品及其产品信息，但在 Firefox 上则不然。在检查 Google Chrome 和 Firefox 之间生成的源代码的差异后，显示生成的 url 与 Firefox 不同。

这是行

```
if (!empty($link))
{echo'<img src = "../'.$link.'" alt="" width="50%" height="60%" />';} 
```

当图像在谷歌浏览器中生成时，它很好。但在 Firefox 中，图像已损坏。检查链接时，它看起来像这样 [http://www.url.com/products%1234567890%Image_For_Items_Record_80.jpg](http://www.url.com/products%1234567890%Image_For_Items_Record_80.jpg)

Firefox 正在将 \ 斜杠更改为 %，为什么要这样做？从数据库中检索到的字符串 $link 只是一个应该回显到图像源中的字符串。Firefox 有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:19:18.807

这里的评论是正确的。某些客户软件不正确地生成数据库中相应项目的 URL。一个单一的链接应该自动生成沿着 products/product_number.jpg 行的东西。但相反，它产生了错误的斜线。

我在 Google Chrome 中没有遇到问题的唯一原因是 Chrome 会自动将“\”更改为“/”。Firefox 将它们更改为 '%'。问题不在于 php，而在于将 Quickbooks 转换为 MySQL 数据库的软件。

# java - 为什么 HBase 将值存储为字节数组而不是类型值（如 String、Long 等）

> ID：11834544
> 
> 赞同：4
> 
> 时间：2012-08-06T19:22:52.407
> 
> 标签：java, hadoop, hbase

当我使用 HBase 时，我花了很多时间将字节数组转换为 String 或 Long 等类型。为什么 HBase 将值存储为字节数组而不是类型值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T22:30:00.680

我不认为“Hbase 将所有内容存储为 byte[] 因为 BigTable 确实”实际上是一个令人满意的答案。我的 2 美分：

它使我们能够毫不费力地存储任何类型的数据。例如，假设您必须将产品相关数据存储到您的 hbase 表中，例如 ID、品牌、国家/地区、价格等。要存储这些参数中的每一个，您必须提前处理每个参数的各个数据类型这肯定会增加一些开销。与 RDBMS 不同，hbase 在创建表时不会要求所有这些。因此，即使这些参数的数据类型明天发生变化，或者您决定添加一些参数（使用一些新数据类型），您所要做的就是将值包装在 Bytes.ToBytes() 中并将其推送到您的表中。所有这些都使插入更快。

此外，有时以序列化的 byte[] 形式存储值与以本机格式存储相同的值相比可以节省几个字节。当您处理大数据时，这种微小的节省变得非常重要。

长话短说，Hbase 这样做是为了让事情变得更快，让存储更高效，将内部数据结构的开销保持在最低限度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:39:24.737

HBase 是 Bigtable 的克隆，这就是 Bigtable 所做的。Bigtable 通常不像关系数据库那样存储细粒度的数据，它们存储序列化的对象，通常是协议缓冲区。

您可以尝试使用序列化对象方法，也可以将接口抽象到 HBase 库，以便您只在一个地方转换类型。

# gwt - GWT ImageBundle 断言：“无 ImageRect”

> ID：11834545
> 
> 赞同：0
> 
> 时间：2012-08-06T19:22:54.613
> 
> 标签：gwt

我不再能够在开发人员模式下运行我的应用程序。当尝试使用 GWT.create() 添加我的图像包时，我在 ImageResourceGenerator.addImage() 中得到一个断言，“No ImageRect”

我已经尽可能地追踪了这个，我进入了 MemoryCacheImageInputStream 构造函数，它在 Disposer.addRecord()

使用 gwtc 编译时它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:49:14.340

我在 Ubuntu x86_64 上运行，不知何故无意中卸载了包 ia32-libs。使用 apt-get 重新安装 ia32-libs 并且它再次工作:-)

# c# - 在 C# 中正确处理“由对等方重置连接”

> ID：11834553
> 
> 赞同：4
> 
> 时间：2012-08-06T19:23:17.290
> 
> 标签：c#, tcplistener

我在`c#`这里构建示例[https://github.com/coolaj86/fizzbuzz/blob/master/tcp-echo-csharp/Main.cs](https://github.com/coolaj86/fizzbuzz/blob/master/tcp-echo-csharp/Main.cs)并针对`netcat`.

`netcat`当我用`CTRL`+退出时，`C`它会关闭套接字，我得到

```
Unhandled Exception: System.Net.Sockets.SocketException: Connection reset by peer
  at System.Net.Sockets.Socket.EndReceive (IAsyncResult result) [0x00000] in <filename unknown>:0 
  at echo.AsynchronousSocketListener.ReadCallback (IAsyncResult ar) [0x00000] in <filename unknown>:0 
```

在我使用的其他语言中，FIN 表示为读取 0 字节（或称为“FIN”或“结束”等的事件），但我修改了示例以打印出一条消息以读取0 字节，我看不到任何消息。

如何处理客户端关闭连接？

我正在寻找诸如“使用`System.Net.Foo.Bar.CloseHandler()`或`System.Net.Foo.Bar.ErrorHandler()`”之类的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:53:01.013

我不确定，但我认为没有办法优雅地做到这一点。因为如果连接正确关闭，您会收到有关客户端断开连接的通知。但是通过 CTRL + C 中断程序执行不是这种情况。所以我建议你只处理异常来解决这个问题。

# arrays - 遍历 Perl 散列散列和散列数组

> ID：11834554
> 
> 赞同：0
> 
> 时间：2012-08-06T19:23:23.253
> 
> 标签：arrays, perl, hash, hash-of-hashes

我又被困住了，需要一些帮助。像往常一样，这是我的克星——哈希。本质上，我正在尝试将 z/OS 大型机上的所有软件项目写入数据库。我已经设法发展到以下哈希：

```
$VAR1 = {
    'Product' => {
        'Unicenter CA-Deliver Output Management' => {
            'vendorUniqueKeyRef' => 'CA',
            'swUniqueKey'        => 'RMO',
            'description'        => 'Unicenter CA-Deliver Output Management'
        },
        'Unicenter CA-JCLCheck Utility' => {
            'vendorUniqueKeyRef' => 'CA',
            'swUniqueKey'        => 'JCLCHECK',
            'description'        => 'Unicenter CA-JCLCheck Utility'
        },
        'EREP Environmental Recording Edit Print' => {
            'vendorUniqueKeyRef' => 'IBM',
            'swUniqueKey'        => 'EREP',
            'ProductVersion'     => {
                'version'       => '3',
                'swUniqueKey'   => '5658-260',
                'name'          => 'EREP Environmental Recording Edit Print',
                'versionNumber' => '03'
            },
            'description' => 'EREP Environmental Recording Edit Print'
        },
        'SYSQL' => {
            'vendorUniqueKeyRef' => 'SPLWDGRP',
            'swUniqueKey'        => 'SYSQL',
            'ProductVersion'     => {
                'ProductVersionRelease' => {
                    'releaseNumber' => '01',
                    'swUniqueKey'   => 'SYSQL-21',
                    'name'          => 'SYSQL',
                    'release'       => '1'
                },
                'version'       => '2',
                'swUniqueKey'   => 'SYSQL-2',
                'name'          => 'SYSQL',
                'versionNumber' => '02'
            },
            'description' => 'SYSQL'
        },
        '3270-PC File Transfer Program' => {
            'vendorUniqueKeyRef' => 'IBM',
            'swUniqueKey'        => '3270PCFT',
            'description'        => '3270-PC File Transfer Program'
        },
        'Tivoli OMEGAMON XE on z/OS' => {
            'vendorUniqueKeyRef' => 'IBM',
            'swUniqueKey'        => 'OMXEZO',
            'ProductVersion'     => {
                'version'       => '3',
                'swUniqueKey'   => '5698-A59',
                'name'          => 'Tivoli OMEGAMON XE on z/OS',
                'versionNumber' => '03'
            },
            'description' => 'Tivoli OMEGAMON XE on z/OS'
        },
        'Tivoli OMEGAMON XE for Messaging for z/OS' => {
            'vendorUniqueKeyRef' => 'IBM',
            'swUniqueKey'        => 'OMXEMES',
            'description'        => 'Tivoli OMEGAMON XE for Messaging for z/OS'
        },
        'DB2 Utilities Suite for z/OS' => {
            'vendorUniqueKeyRef' => 'IBM',
            'swUniqueKey'        => 'DB2UTSU',
            'ProductVersion'     => {
                'DB2 Utilities Suite for z/OS' => {
                    'swUniqueKey'   => '5655-N97',
                    'version'       => '9',
                    'versionNumber' => '09'
                },
                'DB2 Utilities Suite' => {
                    'swUniqueKey'   => '5697-E98',
                    'version'       => '7',
                    'versionNumber' => '07'
                }
            },
            'description' => 'DB2 Utilities Suite for z/OS'
        },
        'UMB' => {
            'vendorUniqueKeyRef' => 'CSC',
            'swUniqueKey'        => 'CSCUMB',
            'description'        => 'UMB'
        }
    }
}; 
```

最初，一切都很好，我有以下几点：

```
my $sw = $xmldoc->{'Catalog'}->{'Products'};
my %sw = %{ $sw->{'Product'} };

foreach my $product (keys %sw) {
    print "Now processing $product\n";
    my $version;
    my $release;
    my $description        = $sw{$product}{'description'};
    my $vendorUniqueKeyRef = $sw{$product}{'vendorUniqueKeyRef'};
    my $swUniqueKey        = $sw{$product}{'swUniqueKey'};
    if ($sw{$product}{'ProductVersion'}) {
        $version = $sw{$product}{'ProductVersion'}{'version'};
        if ($sw{$product}{'ProductVersion'}{'ProductVersionRelease'}) {
            $release =
                $sw{$product}{'ProductVersion'}{'ProductVersionRelease'}
                {'release'};
        }
        else {
            $release = 0;
        }
    }
    else {
        $version = 0;
        $release = 0;
    }

    my $fullVersion = "$version.$release";

    print "        ***************\n
    The product is: $product\n
    The description is: $description\n
    The vendorUniqueKeyRef is: $vendorUniqueKeyRef\n
    The ProductVersion is: $fullVersion\n
    The swUniqueKey is: $swUniqueKey\n
    ***************\n";
} 
```

但是，在使用严格时，我不断收到关于使用未初始化变量的错误。我意识到有些软件的版本像“.2”而不是“2.2”，然后发现我没有正确处理某些产品安装了两次不同版本的事实，这是我愚蠢地没有满足的。

我试图解决这个问题，却发现并非所有版本都有一个版本，我试图迎合这个问题，但前提是它们已经安装了一次......

我已经阅读了从 HoH 和 AoH 中获取数据的负载，但我不能正确地解决这个问题。

本质上，我正在尝试使用 DBD::ODBC（我已经为我的程序的其余部分工作）从这个散列中安装的所有软件的列表，无论它有一个版本、多个版本、版本和发布，多个版本，没有发布，多个版本……嗯，你明白了……

我将不胜感激任何人提供的任何帮助，以及对我当前风格和错误检查的任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:05:58.173

看看你的产品`DB2 Utilities Suite for z/OS`。键中还有另外`ProductVersion`两个产品名称。所有其他人都没有。

```
'DB2 Utilities Suite for z/OS' => {
  'vendorUniqueKeyRef' => 'IBM',
  'swUniqueKey' => 'DB2UTSU',
  'ProductVersion' => {
    'DB2 Utilities Suite for z/OS' => {
      'swUniqueKey' => '5655-N97',
      'version' => '9',
      'versionNumber' => '09'
    },
    'DB2 Utilities Suite' => {
      'swUniqueKey' => '5697-E98',
      'version' => '7',
      'versionNumber' => '07'
    }
  },
  'description' => 'DB2 Utilities Suite for z/OS'
}, 
```

你需要满足这一点。您有 XML 数据的 XML 模式吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:58:58.057

我想你正在使用`XML::Simple`？如果是这样，您最好使用 XML 解析器，它可以让您以类似 XPath 的方式访问您的数据，例如`XML::LibXML`或`XML::Twig`.

就目前而言，您最好维护标量变量以指向哈希结构内的每个步骤。这将避免多个键访问一个元素以及重复使用相同的哈希访问。您*不应该*像在其中那样复制到另一个散列，`my %sw = %{ $sw->{'Product'} }`因为复制所有散列键和值是没有意义的。我`my $products = $sw->{Product}`在下面的代码中使用过，然后`my $product = $products->{$prodname}`和`my $pv = $product->{ProductVersion}`.

您还可以通过使用散列切片受益，如果您从散列键周围去掉引号（这仅在键是字母数字时有效），代码会更清晰。我使用切片在一行中提取前三个产品参数。

这是您向我们展示的一段代码的重写。最大的变化是我检查了是否有`ProductVersion/version`元素。如果是这样，那么我结合`version`和`ProductVersionRelease/release`从下方`ProductVersion`。否则我在*所有* `ProductVersion/*`元素下做同样的事情。如果这些`//`值不存在，defined-or 可用于将这些值默认为零。

我希望这更接近你想要的。

```
my $products = $sw->{Product};

foreach my $prodname (keys %$products) {

    print "\n\nNow processing $prodname\n";

    my $product = $products->{$prodname};

    my ($description, $vendorUniqueKeyRef, $swUniqueKey) =
            @$product{qw/ description vendorUniqueKeyRef swUniqueKey /};

    my @versions;
    if (my $pv = $product->{ProductVersion}) {
        for my $ver (exists $pv->{version} ? $pv : values %$pv) {
          push @versions, sprintf "%d.%d",
              $ver->{version} // 0,
              $ver->{ProductVersionRelease}{release} // 0;
        }
    } 

    print "***************\n";
    print "The product is: $prodname\n";
    print "The description is: $description\n";
    print "The vendorUniqueKeyRef is: $vendorUniqueKeyRef\n";
    print "The ProductVersion is: $_\n" for @versions;
    print "The swUniqueKey is: $swUniqueKey\n";
    print "***************\n";
} 
```

**输出**

```
Now processing DB2 Utilities Suite for z/OS
***************
The product is: DB2 Utilities Suite for z/OS
The description is: DB2 Utilities Suite for z/OS
The vendorUniqueKeyRef is: IBM
The ProductVersion is: 9.0
The ProductVersion is: 7.0
The swUniqueKey is: DB2UTSU
***************

Now processing UMB
***************
The product is: UMB
The description is: UMB
The vendorUniqueKeyRef is: CSC
The swUniqueKey is: CSCUMB
***************

Now processing EREP Environmental Recording Edit Print
***************
The product is: EREP Environmental Recording Edit Print
The description is: EREP Environmental Recording Edit Print
The vendorUniqueKeyRef is: IBM
The ProductVersion is: 3.0
The swUniqueKey is: EREP
***************

Now processing Unicenter CA-JCLCheck Utility
***************
The product is: Unicenter CA-JCLCheck Utility
The description is: Unicenter CA-JCLCheck Utility
The vendorUniqueKeyRef is: CA
The swUniqueKey is: JCLCHECK
***************

Now processing Unicenter CA-Deliver Output Management
***************
The product is: Unicenter CA-Deliver Output Management
The description is: Unicenter CA-Deliver Output Management
The vendorUniqueKeyRef is: CA
The swUniqueKey is: RMO
***************

Now processing 3270-PC File Transfer Program
***************
The product is: 3270-PC File Transfer Program
The description is: 3270-PC File Transfer Program
The vendorUniqueKeyRef is: IBM
The swUniqueKey is: 3270PCFT
***************

Now processing SYSQL
***************
The product is: SYSQL
The description is: SYSQL
The vendorUniqueKeyRef is: SPLWDGRP
The ProductVersion is: 2.1
The swUniqueKey is: SYSQL
***************

Now processing Tivoli OMEGAMON XE for Messaging for z/OS
***************
The product is: Tivoli OMEGAMON XE for Messaging for z/OS
The description is: Tivoli OMEGAMON XE for Messaging for z/OS
The vendorUniqueKeyRef is: IBM
The swUniqueKey is: OMXEMES
***************

Now processing Tivoli OMEGAMON XE on z/OS
***************
The product is: Tivoli OMEGAMON XE on z/OS
The description is: Tivoli OMEGAMON XE on z/OS
The vendorUniqueKeyRef is: IBM
The ProductVersion is: 3.0
The swUniqueKey is: OMXEZO
*************** 
```

# html - 如何在网页上突出显示图像的一部分？

> ID：11834555
> 
> 赞同：0
> 
> 时间：2012-08-06T19:23:24.593
> 
> 标签：html, css

我想掩盖页面上图像的一部分，使图像的一部分变暗，以便突出显示的部分。（这通常用于在照片编辑器中预览裁剪工具的效果。）

目前，我的计划包括加载两个图像的副本，并`clip: rect();`用于切出顶部图像的一部分。有没有更好的方法来处理这个？我还应该提到，我的图像实际上是一个动画 GIF（哦，亲爱的......）

我认为最好在开始尝试使用 javascript 更新作物之前弄清楚这一点。

**CSS：**

```
 .container {
        width: 1075px;
        margin: 10px;   
        border: 1px solid black;
        padding: 10px;
        overflow: auto;
    }

    .image-container {
        position: relative;
        clear: both;
        background-color:#eee;
    }

    .background{
        opacity:.40;
    }

    .highlight {
        position: absolute;
        top: 0px;
        left: 0px;
        clip: rect(126px 257px 197px 156px);
    } 
```

**HTML：**

```
<div class="container">
<div class="image-container">
<img class="background" src="animate.gif" width="1075" height="605" />
<img class="highlight" src="animate.gif" width="1075" height="605" />
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:40:04.390

使用 position: absolute 为每个图像定位图像。上面的层应该小于下面的层。比使用 background-position: xy;

像这样的东西：

```
#image1, #image2 {
    position: absolute;
    left: 0;
    top: 0;
    background: url('https://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif')
}

#image1 {
    min-width: 276px !important;
    min-height 110px !important;
    opacity: 0.5;
}

#image2 {
    left: 251px;
    width: 25px;
    height: 110px;
    background-position: 100% 100%;
}​ 
```

看这里的一个例子：http: [//jsfiddle.net/8n3Rr/](http://jsfiddle.net/8n3Rr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:27:02.267

尝试将 a`<div>`放置在图像上，在其上放置低不透明度，宽度或高度为图像大小的一半。

# javascript - 如何在jqgrid中显示json数组值

> ID：11834563
> 
> 赞同：0
> 
> 时间：2012-08-06T19:23:46.030
> 
> 标签：javascript, jqgrid

我正在尝试将数组值传递给 jqgrid。如下，“排名”值是另一个数组，我想将数组中的每个元素（排名和分数）放在单独的列中：

Javascript：

```
 $(document).ready(function(){        
        jQuery("#ggp_info").jqGrid('GridUnload');
        jQuery("#ggp_info").jqGrid({
            data: jsonObj.entry, 
            datatype: "local",
            colModel:[
                {name:'id',index:'id', width:55, align:"center"},
                {name:'name',index:'name', width:110, align:"center"},
                {name:'sort',index:'sort', width:50, align:"center"},
                {name:'ranking.rank',index:'ranking.rank', jsonmap:'ranking.rank', width:250, align:"center"}
            ],  
            rowNum:7,
            sortname: 'id',
            viewrecords: true,
            sortorder: "desc",
            height: "100%",
            shrinkToFit: false,
            caption:"Leaderboard"
        }); 
    }); 
```

jsonObj值如下：

```
{“入口”：
[{"id":"10000935","name":"Queen","sort":"0","ranking":[{"rank":"1","score":"60"}]} ,
 {"id":"10000936","name":"Level1","sort":"0","ranking":[{"rank":"1","score":"700"}]}]

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:56:00.853

首先，您必须解析您的 json 对象并将其拆分以检索分离的排名和分数然后您必须创建两列，如下所示：

```
{name:'rank',index:'rank', editoptions:{value:rankArray}}
{name:'scores',index:'scores', editoptions:{value:scoresArray}} 
```

因此，您将在 rankArray 中放入排名，在 scoresArray 中放入分数

# hibernate - 每个子类和 NonUniqueObjectException 的休眠表

> ID：11834564
> 
> 赞同：1
> 
> 时间：2012-08-06T19:23:50.587
> 
> 标签：hibernate

我有几个表以每个子类的方式映射。

层次结构的顶部是 EmployeeTransaction，它包含一个复合主键类：

```
public class EmployeeTransaction implements Serializable {

    private TransactionCompositeId id;

    @Id
    public TransactionCompositeId getId() { // etc }}

}

    public static class TransactionCompositeId implements Serializable {

        public String employeeId;
        public Long transactionId;

        // getters/setters
    } 
```

因此，我拥有的其中一个子类是 HiringTransaction：

```
@PrimaryKeyJoinColumns(//etc)
public class HiringTransaction extends EmployeeTransaction implements Serializable {

    // etc
} 
```

现在，有些情况下需要自己创建一个 EmployeeTransaction，然后直到稍后才与其中一个子类关联。

下面是来自单元测试的一些代码，它会导致 NonUniqueObjectException：

```
@Test
@Rollback(false)
public void testSave()
{
    final TransactionCompositeId id = new TransactionCompositeId("777777777",553942L);

    EmployeeTransaction pt = new EmployeeTransaction();                pt.setId(id);
    pt.setLastUpdate(date);
    pt.setLastUpdatedBy(user);
    pt.setCreatedBy(user);
    pt.setCreationDate(date);
                // various setters

    employeeTransactionDAO.save(pt);

    //EmployeeTransaction pt1 = employeeTransactionDAO.get(id); 

    TransactionCompositeId newId = new TransactionCompositeId("777777777",553942L);
    HiringTransaction eth = new HiringTransaction();            
                BeanUtils.copyProperties(pt, eth);
    //HiringTransaction eth = (HiringTransaction) pt;
    //HiringTransaction eth = new HiringTransaction(pt);
    eth.setId(newId);
                // various setters/getters

    dao.save(eth);

    HiringTransaction tempEth = dao.get(id);
    assertNotNull("HiringTransaction should not be null", tempEth);

    dao.remove(id);
    ptDAO.remove(id);
    tempEth = dao.get(id);
    EmployeeTransaction tempPt = ptDAO.get(id);
    assertNotNull("EmployeeTransaction should not be null", tempEth);
    assertNotNull("HiringTransaction should not be null", tempPt);
} 
```

我怀疑我不能将这两个活动都放在一个 UnitOfWork 中。但是，我不知道如何绕过 NonUniqueObjectException。id 肯定是相同的，因为映射是每个子类的表。

注意：DAO 是调用 session.save()、session.merge() 等的简单通用 DAO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:34:48.030

您试图让 EmployeeTransaction 的两个不同的持久实例具有相同的 ID。这是不可能的。您必须删除 EmployeeTransaction，（可能）刷新会话，然后使用相同的 ID 保存新的会话。

请注意，与原始 EmployeeTransaction 的所有关联也必须删除。如果这不可能，那么您不应该有继承关系，而是组合关系：一个 EmployeeTransaction 有（零或）一个 HiringTransaction。

# java - 如何在 Android 模拟器中使用电脑摄像头

> ID：11834566
> 
> 赞同：4
> 
> 时间：2012-08-06T19:23:52.733
> 
> 标签：java, android, eclipse, camera

我想在 Android 模拟器中使用我的笔记本电脑摄像头，但是当我尝试这样做时应用程序崩溃了。此外，模拟器本身不能使用相机。是否有任何支持网络摄像头的软件或 SDK 版本。目前我正在使用 Android Froyo 2.2 SDK。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:28:13.740

我还没有尝试过，虽然它听起来很有用。你可能想检查一下

[如何在安卓模拟器中使用网络摄像头捕捉实时图像？](https://stackoverflow.com/questions/1276450/how-to-use-web-camera-in-android-emulator-to-capture-a-live-image)

和

[在 Android 模拟器中使用相机](https://stackoverflow.com/questions/2884620/using-camera-in-the-android-emulator)

一个答案说，这仅在从 android ICS (4.0) 开始的模拟器中受支持，但没有提供更多信息，因此您可能需要在此版本上投入更多研究。

# mvel - 如何创建 MVEL 评估上下文？

> ID：11834569
> 
> 赞同：0
> 
> 时间：2012-08-06T19:23:56.243
> 
> 标签：mvel

我想按如下顺序解析 MVEL：

```
HashMap myData = new HashMap(){{ put("x", 1); }}

eval("y = 2", ...) // assign value to y
...
eval("x + y", myData, ...) // expect 3 
```

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:15:10.130

只需在表达式评估之间共享变量解析器：

VariableResolverFactory vars = new MapVariableResolverFactory(new HashMap(){{ put("x", 1); }});

MVEL.eval("y = 2", vars): MVEL.eval("x + y", vars);

# java - 接缝实体查询计数由 ManyToOne 排序错误

> ID：11834571
> 
> 赞同：0
> 
> 时间：2012-08-06T19:24:18.207
> 
> 标签：java, jsf, seam

我有一个用`ManyToOne`列映射的对象。尝试按`ManyToOne`联接表上的列排序时，计数和实际结果列表大小不一致。这允许用户翻页超出实际的最后一页结果。当 Seam`EntityQuery`呈现 SQL 以检索结果列表时，它包含带有连接的表，但对于`COUNT`SQL，它忽略了它。

在下面的示例 SQL 中，我在 table `ETEM_VW_CIN_COURSE`、 column上进行排序`CIN`。

SQL中的差异归结为：

```
select
    ...
from
    ETEM.ETEM_INV_INVENTORY eteminvinv0_,
    ETEM.ETEM_UIC etemuic1_,
    ETEM.ETEM_VW_CIN_COURSE etemvwcinc2_ 
where
    ...
order by
  etemvwcinc2_.CIN 
```

和：

```
select  
    count(*) as col_0_0_ 
from
    ETEM.ETEM_INV_INVENTORY eteminvinv0_,
    ETEM.ETEM_UIC etemuic1_ 
where   
    ... 
```

这只发生在我按`ManyToOne`连接上的列排序时。如果我删除*订单，*那么它看起来可以按预期工作。有什么方法可以让 SQL 和`COUNT`SQL 执行相同的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:28:42.410

问题是由于我试图对一个连接表进行排序，连接到一个不需要的字段。我调整了我的 EJBQL，以便当我想对该列进行排序（在我的组件上存储为 orderBy）时，只包括外键不为空的行。这部分在我的 WHERE 子句中如下所示：

和（ lower(#{etemInvInventoryList.orderBy}) <> 'cin' 或 etemInvInventory.crseId 不为空）

这会强制 EJBQL 和 CountEJBQL 提取相同的结果集。

# java - 静态初始化块的设计问题

> ID：11834572
> 
> 赞同：4
> 
> 时间：2012-08-06T19:24:18.683
> 
> 标签：java, static

我有一个设计问题：让我用简单的例子来解释一下：

```
Public class A()
{
public static HashMap map = new HashMap();
public static String url = "default";
static {
  getJson();
}

//url getters and setters are defined

public static getJson() {
//code which uses url to get json and populate hashmap
}
public string getresult(String key) {
//uses hashmap to send result.
} 
```

我正在使用静态初始化块，因为我只想获取一次 json。

```
public class B { 
```

//这里我想更改url并调用getJson方法。如果我调用 A.setUrl()，那么在设置 url 之前，会调用 A.getJson() 方法，因为它在静态初始化块中。如何先设置 url，然后调用 getJson()。

```
//is this a bad design?

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:21:18.037

是的，这是糟糕的设计：

1.  如果不修改 A 的定义，就不可能自定义 A 从何处获取数据。除其他外，这会阻止单元测试（因为如果网络不可用，您可能不希望单元测试失败......）。
2.  如果初始化失败（例如因为远程 URL 当前不可用），您将无法轻松捕获该异常，因为您不知道哪个访问触发了加载。您不能从静态初始化程序中抛出已检查的异常。您也不能重试初始化（所有后续访问都会立即导致异常）。

如果您必须`A`通过静态字段访问，我建议：

```
public class A {
    private static Map<String, String> map;

    /** must be invoked before get is first called */
    public static void init(Map<String, String> newmap) {
        map = newmap;
    }

    public static String get(String key) {
        return map.get(key);
    }
} 
```

这将使用数据的关注与获取数据的关注分开，允许独立替换和测试每个数据。

还要考虑去掉`static`，因为它会强制您的整个应用程序中同时只有一个地图，这是非常不灵活的。（请参阅 Ajay 答案中的第二个代码示例以了解如何）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:36:28.703

我猜这应该可行。添加新方法。

```
public static void getJson(String url) {
setUrl(url);
getJSon();
} 
```

静态初始化器通常是一个坏主意，因为单元测试变得困难。

查看[Misko Hevery 编写可测试代码的指南](http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf)。

您可以通过执行以下操作来重新设计设计：

```
public class A {
  //Add generics
  private Map map = new HashMap();
  public A(Map map){
    this.map = map;
  }
  public String getresult(String key) {
  //uses hashmap to send result.
  }

}

//Helper Class
public class URLToJSon() {
//Add private constructor
  public static Map convertUrlToJSon(String url) {
   //do the conversion and return a hashmap
  }
} 
```

通过这种方式，我们可以遵循[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

现在这两个类也都是可测试的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T19:27:10.083

网址在哪里设置？在构造函数中？如果是这样，只需执行

```
//Normal init stuff like set url here, followed by
if (! some check for if json is set) {
     setJson();
} 
```

# java - 通过 XSD def 将逻辑代码插入到生成的 JAXB java 文件中

> ID：11834573
> 
> 赞同：2
> 
> 时间：2012-08-06T19:24:20.143
> 
> 标签：java, xml, xsd, jaxb

问题是，出于某种原因。xsd 不能/不能定义除基本属性和 setter 和 getter 之外的所有逻辑变量，因此我们尝试通过 xsd 定义“注入代码”，这实际上已被其他人讨论过几次。我对使用“简单 java 方法”的“简单注入”没有任何问题，它不需要在类 def 之上的任何“导入”语句。

但不知何故，如果我们想使用它。在我看来，除了 setter 或 getter 之外，我们无法获取或导入任何包。, 详情见下文

1.  xsd 定义 test.xsd

    ```
     <?xml version="1.0" encoding="UTF-8"?>
            <xs:schema targetNamespace="http://company.com/schema/response"
        xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:test="http://company.com/schema/response"
        xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.1"
        xmlns:ci="http://jaxb.dev.java.net/plugin/code-injector"
        jaxb:extensionBindingPrefixes="ci">
        <xs:element name="client">
            <xs:complexType>
                <xs:annotation>
                    <xs:appinfo>
                        <ci:code>
                            <![CDATA[
                    private String str;
                    public String returnStr() {
                        Locations locationCls =this.getLocations();
                        List<String> locationids = new ArrayList<String>();

                        // get a list of locationid into locationids (list)
                        List<Location> locationList = locationCls.getLocation();
                        for (Location loc : locationList) {
                            locationids.add(String.valueOf(loc.getId()));
                        }
                        // return string like loc1,loc2,loc3
                        return StringUtils.join(locationids, ','); 
                    }
                            ]]>
                        </ci:code>
                    </xs:appinfo>
                </xs:annotation>
                <xs:sequence>
                    <xs:element name="name" type="xs:NCName" />
                    <xs:element name="pass" type="xs:NCName" />
                    <xs:element ref="test:locations" />
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="locations">
            <xs:complexType>
                <xs:sequence>
                    <xs:element maxOccurs="unbounded" ref="test:location" />
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="location">
            <xs:complexType>
                <xs:attribute name="id" use="required" type="xs:string" />
                <xs:attribute name="address" use="required" type="xs:string" />
                <xs:attribute name="biz" type="xs:string" />
            </xs:complexType>
        </xs:element>
        </xs:schema> 
    ```

2.  运行 jaxb ri 命令：xjc.bat test.xsd -Xinject-code -extension

3.  成功观察Client.java中的以下代码片段

    ```
     private String str;
           public String returnStr() {
            Locations locationCls =this.getLocations();
            List<String> locationids = new ArrayList<String>();

            // get a list of locationid into locationids (list)
            List<Location> locationList = locationCls.getLocation();
            for (Location loc : locationList) {
                locationids.add(String.valueOf(loc.getId()));
            }
            // return string like loc1,loc2,loc3
            return StringUtils.join(locationids, ','); 
           } 
    ```

因此，我们知道 jdk 抱怨编译错误，因为 Apache commons 中的 StringUtils（或其他第 3 部分实用工具，如 google 集合以在其他情况下提供帮助）未导入生成的文件中。了解有一些谷歌项目使用 jaxb 插件将方法插入或调用到生成的 java 文件中。只是想花一天左右的时间看看我们是否可以在没有任何插件的情况下仅通过 xsd 本身制作它。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:27:29.300

您可以在要注入的代码中指定完全分类的类名，例如：

```
return org.apache.commons.lang.StringUtils.join(locationids, ','); 
```

# php - PostgreSQL 分层，类别树

> ID：11834579
> 
> 赞同：3
> 
> 时间：2012-08-06T19:24:44.930
> 
> 标签：php, postgresql, postgresql-8.4, hierarchical-trees, hierarchical-query

环境：postgresql-8.4

我正在尝试构建类别树。基本上我期待最终输出，例如：

```
分类名称
类别路径
叶类

```

例如：

```
数码相机
电子产品 ::: 数码相机
真的

```

表结构为

```
创建表类别（
    id 序列主键，
    分类号 bigint，
    categoryparentid bigint,
    类别名称文本，
    状态整数 DEFAULT 0,
    朗文字，
    eysiteid 文本，
    国家文本，
    温文尔雅的文字，
    叶类别布尔值
);到目前为止，我已经得到了这个，但没有工作。任何帮助将不胜感激：

```
WITH RECURSIVE 树（CategoryID、CategoryParentID、CategoryName、category_tree、depth）
作为 （
    选择
        类别ID，
        类别父 ID，
        分类名称，
        类别名称 AS 类别树，
        0 AS 深度
    从类别
    其中 CategoryParentID 为 NULL
联合所有
    选择
        c.CategoryID,
        c.CategoryParentID,
        c.类别名称，
        树.category_tree || '/' || c.CategoryName AS category_tree,
        depth+1 AS 深度
    从树
        加入类别 c ON (tree.category_tree = c.CategoryParentID)
)
SELECT * FROM tree ORDER BY category_tree;

```

来自数据库的样本

```
cat=> 从类别中选择 *；
  编号 | 类别ID | 类别父ID | 类别名称 | 状态 | 朗 | eysiteid | 国家 | 胆小| 叶类
--------+------------+------------------+------------ ----------+--------+------+------------ -+---------+--------+--------------
     1 | -1 | 0 | 根 | 1 | zh | 0 | 我们 | | F
     2 | 20081 | -1 | 古董 | 1 | zh | 0 | 我们 | | F
    17 | 第1217章 20081 | 原语 | 0 | zh | 0 | 我们 | | 吨
    23 | 22608 | 20081 | 复制古董 | 0 | zh | 0 | 我们 | | 吨
    24 | 12 | 20081 | 其他 | 0 | zh | 0 | 我们 | | 吨
    25 | 550 | -1 | 艺术 | 1 | zh | 0 | 我们 | | F
    29 | 2984 | -1 | 宝贝 | 1 | zh | 0 | 我们 | | F

```

            回答 #1

赞同：3

时间：2012-08-06T19:35:30.967

您似乎加入了错误的领域。

```
 --  create some test data
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE categories
    -- ( id  SERIAL PRIMARY KEY
    ( categoryid SERIAL PRIMARY KEY
    , categoryparentid bigint REFERENCES categories(categoryid)
    , categoryname text
    -- , status integer DEFAULT 0
    -- , lang text
    -- , ebaysiteid text
    -- , country text
    -- , tempid text
    -- , leafcategory boolean
        );
INSERT INTO categories(categoryid,categoryparentid) SELECT gs, 1+(gs/6)::integer
FROM generate_series(1,50) gs;

UPDATE categories SET categoryname = 'Name_' || categoryid::text;
UPDATE categories SET categoryparentid = NULL WHERE categoryparentid <= 0;
UPDATE categories SET categoryparentid = NULL WHERE categoryparentid  >= categoryid;

WITH RECURSIVE tree (categoryid, categoryparentid, categoryname, category_tree, depth)
AS (
    SELECT
        categoryid
        , categoryparentid
        , categoryname
        , categoryname AS category_tree
        , 0 AS depth
    FROM categories
    WHERE categoryparentid IS NULL
UNION ALL
    SELECT
        c.categoryid
        , c.categoryparentid
        , c.categoryname
        , tree.category_tree  || '/' || c.categoryname AS category_tree
        , depth+1 AS depth
    FROM tree
        JOIN categories c ON tree.categoryid  = c.categoryparentid
    )
SELECT * FROM tree ORDER BY category_tree; 
```

编辑：递归的另一个（“非函数”）表示法似乎效果更好：

```
WITH RECURSIVE tree AS (
    SELECT
        categoryparentid AS parent
        , categoryid AS self
        , categoryname AS treepath
        , 0 AS depth
    FROM categories
    WHERE categoryparentid IS NULL
UNION ALL
    SELECT
        c.categoryparentid AS parent
        , c.categoryid AS self
        , t.treepath  || '/' || c.categoryname AS treepath
        , depth+1 AS depth
    FROM categories c
    JOIN tree t ON t.self  = c.categoryparentid
    )
SELECT * FROM tree ORDER BY parent,self
   ; 
```

更新：在原始查询中，您应该替换

```
WHERE CategoryParentID IS NULL 
```

经过：

```
WHERE CategoryParentID = 0 
```

甚至可能：

```
WHERE COALESCE(CategoryParentID, 0) = 0 
```

            回答 #2

赞同：0

时间：2012-08-21T15:51:52.263

看看[这个要点](https://gist.github.com/3225313)它或多或少是你想要做的。在您的情况下，我最好使用[LTree 物化路径 Postgresql's extension](http://www.postgresql.org/docs/8.4/static/ltree.html)。

```

# java - 调用 servlet 类中的方法

> ID：11834587
> 
> 赞同：0
> 
> 时间：2012-08-06T19:24:58.260
> 
> 标签：java, servlets, methods, invoke

我有这个 servlet -

```
@WebServlet("/CreateNewPersonServlet")
public class CreateNewPersonServlet extends HttpServlet {
      private void saveInDB() {

            // here use the invoke ...
            String methodName = "saveManager";
            Method method = CreateNewPersonServlet.class.getMethod(
                    methodName, new Class[] {});
            method.invoke(this);

      }
      private void saveManager() {

      }

} 
```

当奔跑到达终点线时——

```
Method method = CreateNewPersonServlet.class.getMethod(
                        methodName, new Class[] {}); 
```

它抛出异常 -

```
java.lang.NoSuchMethodException: control.CreateNewPersonServlet.saveManager()
    at java.lang.Class.getMethod(Unknown Source) 
```

我应该如何正确编写调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:31:30.760

该方法是私有的，您应该使用`.getDeclaredMethod(..)`，然后使用`setAccessible(true)`

`.getMethod(..)`仅返回公共方法。但是您也可以将方法公开。

# sql-server - 完整备份是否适用于简单恢复模式？

> ID：11834594
> 
> 赞同：3
> 
> 时间：2012-08-06T19:25:15.570
> 
> 标签：sql-server, sql-server-2008, logging, backup

我有一个越来越庞大的数据库。mdf 文件大约 150 GB，我刚刚看到日志文件接近 1.5 TB！我根本不关心日志文件。因此，基于此，我计划将恢复模式切换为简单。

但是，我担心如果我设置了简单的恢复模式，将来我将无法进行完全恢复。这是真的？

这是我用来每晚备份数据库的代码。如果我的硬盘驱动器崩溃或某些东西被损坏，我将来是否能够进行完全恢复？

```
BACKUP DATABASE MyDatabase
TO DISK = 'F:\SQL Server Backup\MyDatabase.bak'
WITH INIT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:34:12.120

不，那不是真的。但是在简单恢复模式下，您将无法进行日志备份，因此您只能恢复到上次完整备份（或上次完整+差异）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T19:34:31.490

在**简单恢复模式**中，您将能够进行*完整*备份和*差异*备份。如果您有完整备份，您将能够在完整备份时完整还原数据库。

简单恢复模式中的完整备份所包含的数据不比完整恢复模式中的完整备份少。

如果你这样做：

```
backup database MySimpleRecoveryDatabase
to disk = 'F:\SQL Server Backup\MyDatabase.bak'
go 
```

然后在以后执行`RESTORE`：

```
restore database MySimpleRecoveryDatabase
from disk = 'F:\SQL Server Backup\MyDatabase.bak'
go 
```

如果该`.bak`文件在备份和还原之间未触及，您将获得与您进行备份时等效的完整数据库还原。（注意，`RESTORE DATABASE`根据 NTFS 结构、现有文件等，该命令可能并非包罗万象。）

# csh - 从 Java GUI 运行的 csh 脚本崩溃并冻结终端

> ID：11834596
> 
> 赞同：0
> 
> 时间：2012-08-06T19:25:24.377
> 
> 标签：csh, xterm

我有一个从 Java GUI 运行的脚本。它执行 SQL 脚本并将结果写入 tmp 目录中的日志文件。脚本的其余部分应该打开一个 xterm 并将输出文件的结果显示到屏幕上。它会按预期创建日志文件，并且还会打开一个 xterm。唯一的问题是它在那之后冻结了，我必须再次重新启动整个过程。这是我用来打开 xterm 的脚本示例

```
#!/bin/csh -f

#set MYSQL=${MYSQL_HOME}/mysql
set PSQL=${PSQL_HOME}/psql
set MORE=/usr/xpg4/bin/more

set REPORT=/h/Scripts/DataValidation/ParametersDataReport.sql

#${REPORT}

${PSQL} ${USER}<${REPORT} 

#Get the number of lines in the report file for scrollbar control
#set lc='wc -l /tmp/results.log'
#echo $lc

#Open an extra terminal

set title="EARTH ORIENTATION PARAMETERS REPORT"

/usr/openwin/bin/xterm -T "$title" \
-bg lightblue -fg black -sb -sl 2000 -ut -e ${MORE}  \
-f /h/USERS/Pablito/results.log     \

exit 
```

`MORE`并`title`在脚本文件中定义为变量。为什么我的脚本崩溃并导致终端挂断？这可能是分段错误吗？

我通过 ssh 连接完成所有这些工作。我查看了发出的命令，这就是它所说的：

```
/usr/openwin/bin/xterm -sb -ls -display@d&@; 
```

我在终端上输入了这个命令，它很好地显示了结果。为什么我不能从 GUI 执行此操作？

```
/usr/openwin/bin/xterm -T EARTHORIENTATIONPARAMETER -geometry 104x50+0+80 -bg lightblue -fg black -sb -sl 2000 -ut -e /usr/xpg4/bin/more -f /tmp/results.log 
```

当我尝试使用 GUI 时，它只会冻结在我身上（意味着我无法访问 GUI 或终端）。它还包含一个错误

```
bg: Command not found 
```

在启动 GUI 的终端上。

我想我真正应该问的是如何在 csh 脚本中执行以下命令，因为当我从终端手动键入它时，它会产生所需的效果

```
xterm -T "EarthOrientation Parameter" -geom 104x50+0+80 -bg pink -fg black -sb -sl   2000 -ut -e /usr/xpg4/bin/more -f /h/USERS/local/Pablito/results.log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:59:36.730

我假设您问题中的脚本版本与您实际运行的脚本版本相匹配。

```
/usr/openwin/bin/xterm \
-title "$title"        \ 
-geometry 100x40+0+90
-bg lightblue -fg brown \
-sb -sl 2000 -ut
-e ${MORE} -F /tmp/results.log 
```

如果您要将其作为 csh 脚本调用，则需要`#!/bin/csh -f`在顶部使用 a，*或者*您需要将其显式调用为`csh -f script-name`.

你错过了几个反斜杠。由于该行没有`\`，`-geometry`因此后面的行不会作为参数传递给`xterm`命令。您向我们展示的代码相当于：

```
/usr/openwin/bin/xterm -title "$title" -geometry 100x40+0+90
-geometry 100x40+0+90 -bg lightblue -fg brown sb -sl 2000 -ut 
-e ${MORE} -F /tmp/results.log 
```

这应该`xterm`在没有指定命令的情况下调用，因此它将以交互方式运行您的默认 shell。以下行应产生错误消息：

```
-geometry: Command not found.
-e: Command not found. 
```

但如果您从 GUI 调用脚本，您可能不会看到这些消息。

在和行`\`的末尾添加字符应该可以解决该问题。`geometry``-sb`

由于脚本`xterm`在前台调用（命令没有尾随），因此脚本将在终止之前`&`等待窗口关闭。`xterm`

你说它“冻结”；我不确定你的意思是什么，但是在`xterm`关闭和脚本终止之后发生的任何事情都将由你的 Java GUI 代码控制，你没有向我们展示。

同样，我假设您实际运行的脚本中缺少这些反斜杠。如果没有，您需要更新您的问题，向我们展示您正在运行的*确切*脚本。

**更新 ：**

显然我的假设是不正确的；您的实际脚本与最初出现在您的问题中的脚本完全不同。

我不能足够强烈地强调复制并粘贴导致问题的*确切*脚本或程序或您已确认导致相同问题的修改版本是多么重要。如果您尝试发布脚本的*近似值*，您很可能会忽略导致问题的代码。

[http://sscce.org/](http://sscce.org/)对此进行了讨论，但该网站目前似乎已关闭；谷歌缓存在[这里](http://webcache.googleusercontent.com/search?q=cache%3asscce.org/)。

因此，这是您的问题中脚本的相关部分：

```
/usr/openwin/bin/xterm -T "$title" \
-bg lightblue -fg black -sb -sl 2000 -ut -e ${MORE}  \
-f /h/USERS/Pablito/results.log     \

exit 
```

在评论中，您说您遇到了类似的错误

```
-bg Command is not found 
```

这确实应该是问题所在，因为对于任何试图回答它的人来说，它都是至关重要的信息。

（我怀疑它是真的`-bg: Command not found.`；再次，精确的复制和粘贴对于错误消息和代码一样重要。）

我认为现在的问题是你在反斜杠后面有一个空格就`xterm`行了。续行字符必须`\`位于行尾。如果反斜杠后有空格，则不视为续行符，下一行将视为单独的命令。

并且`\`命令最后一行的 无用且具有潜在危险。它将该行与下一行连接起来，该行是空的，因此可能是无害的，但是如果您删除了该空行，它会将单词`exit`作为参数传递给`xterm`.

最简单的解决方法是修改您的脚本，以使整个命令位于一个（非常长的）行上，并且没有反斜杠。

# java - 这是 Java 包导入应该如何工作的吗？

> ID：11834602
> 
> 赞同：3
> 
> 时间：2012-08-06T19:25:52.347
> 
> 标签：java, import, package

我一直在为我的第一个正则表达式而苦苦挣扎。在编译期间，`Pattern`不断`Matcher`出现`cannot find symbol`错误。

我刚换成`import java.util.*`它`import java.util.regex.*`，它就像一个梦一样工作。

我的印象是`import`ing`java.util.*`也会带入*等*`java.util.*.*`。不是这样吗？我找不到任何解决此特定问题的文档....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T19:28:24.937

不，包导入仅获取该包中的直接类（java.* 不会导入所有内容，只会导入诸如 Java.SomeClass 之类的类，而不是 java.util.SomeClass）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T19:28:54.510

导入`java.util.*` *不会*导入`java.util.*.*`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T19:29:41.613

是的，这就是包导入在 Java 中的工作方式（并且应该工作）。例如，doing`import javax.swing.*;`将导入所有*类*，`javax.swing.*`但**不会**导入子包及其类。

**因此**，`javax.swing.*`不会导入或**`javax.swing.event``javax.swing.event.*`**

 **阅读[以下博客](http://beginwithjava.blogspot.com/2008/06/import-statements.html)以获得一些友好的新手建议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T19:33:38.337

请参阅下面链接中的链接和引用的摘录。

[http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

> 导入 java.awt.* 会导入 java.awt 包中的所有类型，但不会导入 java.awt.color、java.awt.font 或任何其他 java.awt.xxxx 包。如果您计划使用 java.awt.color 和 java.awt 中的类和其他类型，则必须导入这两个包及其所有文件：

```
import java.awt.*;
import java.awt.color.*; 
```**

# javascript - IE JavaScript 参数和填充输入字段

> ID：11834603
> 
> 赞同：0
> 
> 时间：2012-08-06T19:25:59.713
> 
> 标签：javascript, jquery, internet-explorer

我正在尝试返回 c= 然后将其写入输入字段并提交值。

```
var x = window.external.menuArguments.location.href; // IE Get URL Code
alert(x);
// http://site.com/design/page.html?c=235783&p=irol-IRHome

// this code below populates a html pop that is created on popup.
  var parentwin = external.menuArguments; 
  var doc = parentwin.document;
  var sel = doc.selection;
  var rng = sel.createRange();
  var str = new String(rng.text);
  var html = new String(rng.htmlText);
  var ops = "width=650,height=410,status=0,toolbar=0,menubar=0,resizable=1";
  viewSourceWin = parentwin.open("about:blank","viewselectionscr",ops);
  // open document for further output
  viewSourceWin.document.open();
 viewSourceWin.document.write("$(document).ready(function() {");
 viewSourceWin.document.write("load = ?;");
 viewSourceWin.document.write("$('#cmid').val(load);$('.go').click();");
 viewSourceWin.document.write("});");
 viewSourceWin.document.write("<input id='cmid'/><button class='go'>Go</button>")"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:39:46.183

您想要 location.search，例如：

```
var query = window.location.search.substring(1);    // use substring to remove the leading '?'
var keyValues = query.split('&');    // split apart
var params = {};
for (var kv in keyValues) {
    var parts = kv.split('=');
    params[ parts[0] ] = parts[1];
}

var c = params['c'];
//... do whatever you need 
```

当然，您还可以使用一个或三个 jquery 插件以及一些更高级的正则表达式。

# java - 非 servlet Java HTTP 服务器

> ID：11834604
> 
> 赞同：1
> 
> 时间：2012-08-06T19:26:03.443
> 
> 标签：java, http, webserver, httpserver

奇怪的问题，但它就在这里。

我一直在寻找不符合 servlet 的 Java HTTP 服务器**（**不要问我为什么）。到目前为止，我找不到任何令人满意的东西（至少在谷歌上没有）。我**不**想要 Jetty、Tomcat 等，我想要与 Servlet 规范完全无关的东西。[将其视为Kayak](http://kayakhttp.com)（.NET 的非 ASP.NET HTTP 服务器）的 Java 等价物。

你知道这种好的HTTP服务器吗？

PS：请大家避免回答“为什么不使用 Jetty？”或“为什么要重新发明轮子？”。如果您对我的问题有实际答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:29:55.463

也许[灰熊](http://grizzly.java.net/)适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:07:48.423

`HTTP`到目前为止，自己创建服务器并非易事。
因此，如果出于某种原因不想使用任何第三方库，那么您还有很多工作要做。@ChristianSchlichtherle 也提到
了一个`HTTPServer`in ，但这意味着您不能保证它是否会在下一个版本中继续存在，或者您可以在任何 JDK 实现中找到它。[这](http://www.java2s.com/Code/Java/JDK-6/LightweightHTTPServer.htm)是一个示例代码。 `JDK``com.sun.net.*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T20:09:42.530

你可以看看[Restlet](http://www.restlet.org/)。它提供了一个针对 RESTful 应用程序的 API，它不兼容 Servlet（尽管如果需要，您可以嵌入到 Servlet 环境中）。

它的 HTTP 连接器可以依赖许多底层库。如果您正在寻找 HTTP 服务器库，它们应该是一个很好的起点：

*   [简单的](http://simpleweb.sourceforge.net/)
*   [码头](http://jetty.codehaus.org/jetty/)
*   [网状](https://netty.io/)
*   [灰熊](http://grizzly.java.net/)

当然，其中一些项目也支持 Servlet，但如果您查看它们的核心库，它们也暴露了与 Servlet 无关的 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:33:15.603

尝试[在 Google 上搜索](https://www.google.com/search?q=tiny%20java%20http%20server)“Tiny Java HTTP 服务器”

想到的一件事是在 JRuby 下使用[Webrick](https://web.archive.org/web/20121218013204/http://microjet.ath.cx:80/webrickguide/html/html_webrick.html)（这可能是作弊，但那又怎样？）:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T19:38:02.637

我以前没有听说过 Kayak，但它说它是异步的、简单且易于嵌入到应用程序中的事实让我推荐：

[http://simpleweb.sourceforge.net/](http://simpleweb.sourceforge.net/)

并且可能

[http://vertx.io/](http://vertx.io/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T19:40:36.607

它就在您的 JDK 中： http: [//docs.oracle.com/javase/7/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html](http://docs.oracle.com/javase/7/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T19:31:14.023

我经常使用[泽西岛，并且没有遇到任何问题。](http://jersey.java.net/)它不是真正的 Web 服务器容器，而是以编程方式托管内容的能力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T19:31:36.083

[开源网络服务器](http://java-source.net/open-source/web-servers)，如龙卷风。

# c# - 在解析 XML 时处理速记结束标记

> ID：11834605
> 
> 赞同：2
> 
> 时间：2012-08-06T19:26:03.797
> 
> 标签：c#, xml, xml-parsing

为了简单起见，我将大大降低我的项目的复杂性，并给出一个简单但同样准确的例子来说明我正在努力解决的问题。我有两个 XML 文件，我们将它们命名`Read.xml`为`Write.xml`. 目标是让我的项目读取**Read.xml**的内容，将 XML 解析为一个类，然后将其重建为**Write.xml**。

XML 生成到**Read.xml**中的方式是，当元素没有值时，它使用速记结束标记 ( `<ElementName />`)，而当它确实有值时，它使用速记结束标记 ( `<ElementName>Element Value</ElementName>`)。我无法控制**Read.xml**中 XML 的生成。

下面的代码非常适合解析 XML，只要它使用普通结束标记。但是，如果 `ReportId`下面说要使用速记结束标记，那么现在的代码将读取下一行（对于长手写结束标记将是 XML 元素的值），但下一行是一个空格值为**"\n"**的元素。**然后，这会在Write.xml**中的 XML 中添加一个新行， 这会使 XML 格式变得奇怪。这是我用来从**Read.xml**读取和解析 XML 的代码：

```
 while(xmlReader.Read())
        {
            switch(xmlReader.NodeType)
            {
                case XmlNodeType.Element:
                    if(xmlReader.Name.Equals("ReportSummary") && xmlReader.IsStartElement())
                    {
                        currentReport = new Entities.Report();
                    }
                    else if(xmlReader.Name.Equals("ReportName"))
                    {
                        xmlReader.Read();
                        currentReport.ReportName = xmlReader.Value;
                    }
                    else if(xmlReader.Name.Equals("ReportId"))
                    {
                        xmlReader.Read();
                        currentReport.ReportId = xmlReader.Value;
                    }
                    break;
                case XmlNodeType.EndElement: //Reached the end of the element.
                    if(xmlReader.Name.Equals("ReportSummary"))
                    {
                        if(currentReport!= null)
                        {
                            reportList.Add(currentReport);
                            currentReport = null;
                        }
                    }
                    break;
                default:
                    break;
            }
        } 
```

我的问题是，是否有适当的方法来处理速记结束标签与长手结束标签。或者，有没有更好的方法来解析一个 XML 文件？

提前感谢大家提供的任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:34:40.747

您可以使用`XmlReader.IsEmptyElement`来确定阅读器是否位于空元素：http: [//msdn.microsoft.com/en-us/library/system.xml.xmlreader.isemptyelement.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.isemptyelement.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:36:18.353

如果可能的话，你可以使用 LINQ to XML ......

认为它会让你的一切变得更简单。

[http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:34:28.297

我会使用 XmlDocument 的 SelectSingleNode 函数，它会更有效地解析文件。

[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.selectsinglenode.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.selectsinglenode.aspx)

如果有多个节点，您可以使用 SelectNodes 函数。

[http://msdn.microsoft.com/en-us/library/4bektfx9.aspx](http://msdn.microsoft.com/en-us/library/4bektfx9.aspx)

正如 spender 指出的那样，您还可以使用 XDocument/XElement 解析它。如果您至少使用框架 3.5，这种方法可能更可取

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:36:22.090

如果您倾向于采用一种性能稍差但更易于管理的方式，我建议采用类似于以下内容的解决方案：

```
 XmlDocument xmlDoc = new XmlDocument();
    List<Entities.Report> reports = new List<Entities.Report>();
    xmlDoc.Load("Read.xml");
    foreach (XmlNode reportNode in xmlDoc.SelectNodes("//ReportSummary"))
    {
        Entities.Report report = new Entities.Report();
        report.ReportName = reportNode["ReportName"].InnerText;
        report.ReportId = reportNode["ReportId"].InnerText;
        reports.Add(report);
    } 
```

更具可读性，可维护性和性能稍差。
祝你好运！

# mysql - 你如何通过关系让 Rails has_many 与 has_many 条件一起工作？

> ID：11834606
> 
> 赞同：1
> 
> 时间：2012-08-06T19:26:05.763
> 
> 标签：mysql, ruby-on-rails, activerecord, has-many-through

我一直在从事一个大量使用模型关联的项目，而且似乎我发现了 has_many 或 has_one through 功能与 :conditions 功能冲突的情况。简而言之，问题在于 through 关联为 has_one through 关系中的中间表创建了表别名。但我不知道如何使该表别名出现在我定义的条件中。如果这很难理解，也许代码会有所帮助：

```
class Event < ActiveRecord::Base
  has_one :event_intake, :conditions => ['event_intakes.is_draft = 1']
  has_many :product_instances, :through => :event_intake
end

class EventIntake < ActiveRecord::Base
  belongs_to :event
  has_many :product_instances, :conditions => ['is_deleted = ?', '0']
end

class ProductInstance < ActiveRecord::Base
  belongs_to :event_intake
end 
```

这是我得到的 MySQL 查询和错误：

```
Mysql2::Error: Unknown column 'event_intakes.is_draft' in 'on clause': 

SELECT DISTINCT `events`.id FROM `events` 
  LEFT OUTER JOIN `event_intakes` product_instances_events_join ON (`events`.`id` = `product_instances_events_join`.`event_id`) 
  LEFT OUTER JOIN `product_instances` ON (`product_instances`.`event_intake_id` = `product_instances_events_join`.`id`) AND event_intakes.is_draft = 1 
WHERE (product_instances.serial_number = '313') ORDER BY events.id DESC LIMIT 0, 50 
```

through 关联将 event_intakes 表别名为“product_instances_events_join”。但是条件 event_intakes.is_draft 中的表并没有改变以匹配它。

我正在使用 rails 2.3.11，但我认为这个问题可能同样适用于 rails 3。我已经读过 through 关联应该只与 has_many 一起使用，而不是 has_one，但我认为这不是原因问题。

如果我只是将条件更改为“product_instances_events_join.is_draft = 1”，它将解决此特定情况的问题，但在没有表别名时会破坏它。如果我可以在 has_one 条件上使用字符串插值来获得正确的表名，那就太好了。像这样的东西： has_one :event_intake, :conditions => ["#{EventIntake.table_name}.is_draft = 1"] 我不认为上面的代码会起作用，因为发生别名时 EventIntake 的 table_name 不会改变。

我尝试过的另一件事是在进行查询之前立即重新定义 has_many 关联，在出现别名之前使用类似的东西： Event.has_one :event_intake, :conditions => ['product_instances_events_join.is_draft = 1'] 相信它与否，这实际上解决了 webrick 中的问题，但我对在多线程乘客环境中使用这种方法犹豫不决，因为我认为这无异于修改全局变量，这可能会影响其他线程。此外，这是一个黑客。

有没有人有任何建议如何解决这个问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:28:32.713

您可以将条件放在 :product_instances

```
class Event < ActiveRecord::Base
  has_one :event_intake 
  has_many :product_instances, :through => :event_intake,
               :conditions => ['event_intakes.is_draft = 1']
end 
```

在 has_one 上设置条件似乎有点尴尬，因为您实际上不是在过滤 event_intakes 而是打开或关闭整个关联。但我想这不是重点。

另外，我确实理解，如果您有几个后续的“通过”关联，您希望通过中介条件过滤，那么这不是很干燥。这就是我发现自己的地方，这就是我在这里的机会。

# google-maps - 设置按钮 DOM 谷歌地图

> ID：11834607
> 
> 赞同：1
> 
> 时间：2012-08-06T19:26:07.710
> 
> 标签：google-maps, dom, button, google-maps-api-3

我在设置 html 按钮时遇到问题，该按钮必须询问地理位置、显示并将标记放在正确的位置：

首先，我开始加载方法：

google.maps.event.addDomListener(window, 'load', init_map);

然后：

```
function init_map() 
{
var lima = new google.maps.LatLng(-12.043333,-77.028333);
var browserSupportFlag =  new Boolean();
var mapDiv = document.getElementById('map_canvas');

map = new google.maps.Map(mapDiv, 
{
    zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: lima
});

var distanceWidget = new DistanceWidget(map, initialLocation);

google.maps.event.addListener(distanceWidget, 'position_changed', function() 
{
    displayInfo(distanceWidget);
}
);

google.maps.event.addDomListener(document.getElementById('get_latlng'), 'click', get_location(map,distanceWidget.get_marker())); 
```

}

的HTML：

```
<button type="button" id="get_latlng">Get your current location</button> 
```

但它的作用是监听器自己加载，我想要它做的是当我单击按钮时它执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:57:21.630

将调用包装成一个函数：

```
google.maps.event
 .addDomListener(document.getElementById('get_latlng'), 
                 'click', 
                 function(){get_location(map,distanceWidget.get_marker());}); 
```

# android - 从 Android 上的服务设置音量控制流

> ID：11834610
> 
> 赞同：4
> 
> 时间：2012-08-06T19:26:22.500
> 
> 标签：android, service, android-service, android-audiomanager

我正在开发一个音乐应用程序，该应用程序包含在其他应用程序运行时播放音乐的服务。

为了欣赏音乐并且只欣赏音乐，该服务将所有其他应用程序静音。为此，它将 STREAM_MUSIC 静音并通过 STREAM_VOICE_CALL 播放音乐（在[此处](https://stackoverflow.com/questions/1993471/android-can-i-mute-currently-playing-audio-applications)找到静音其他应用程序的解决方案）

由于该服务使用 STREAM_VOICE_CALL 播放音乐，我试图找到一种在播放声音时让音量按钮控制此流的方法。

我已经尝试过的：

*   [setVolumeControlStream](http://developer.android.com/reference/android/app/Activity.html#setVolumeControlStream(int))：仅适用于活动
*   捕获音量键按下事件：服务不接收此类事件（[来源](https://stackoverflow.com/a/11397294/1532392)）
*   audioManager.setMode(AudioManager.MODE_IN_CALL) ：在我的情况下不起作用。另外，[SDK 文档](http://developer.android.com/reference/android/media/AudioManager.html#setMode%28int%29)指出，这种“模式只能由电话应用程序在拨打电话时使用”。

在这一点上，我没有选择，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:30:32.897

我个人不建议您这样`STREAM_VOICE_CALL`做，因为与媒体播放相比，建议将其用于语音通话。使用它可能会阻止您使用 Android 公开的功能进行媒体播放。

话虽如此并考虑到您的用例，我认为您需要寻找与“媒体音量”级别相比变化的“通话量”级别。

查看股票音乐播放器应用程序中使用的[MediaPlaybackService.java](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaPlaybackService.java)并尝试根据您的需要对其进行自定义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T20:40:12.697

我自己没试过。但看起来它应该工作。请尝试一下。

```
m_audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
setVolumeControlStream(AudioManager.STREAM_VOICE_CALL);
m_audioManager.setMode(AudioManager.MODE_IN_CALL); 
```

# sql - 从 amember_payments WHERE com 中选择 COUNT(DISTINCT member_id) 作为活动

> ID：11834618
> 
> 赞同：-3
> 
> 时间：2012-08-06T19:26:43.160
> 
> 标签：sql, performance, lag, amember

所以我的数据库有几十万成员，处理软件显然不适合这种规模的数据库。所以我有一些重大的滞后问题。我很好奇是否有人对这个烦人的查询有窍门。

```
SELECT COUNT(DISTINCT member_id) AS active
           FROM amember_payments
           WHERE completed > 0 AND expire_date >= '2012-08-01' AND amount > 0 
```

它扫描整个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:34:10.230

如果它扫描，则需要索引。从您的查询来看，您应该为已完成、过期日期和金额列添加索引。但是如果不更好地了解数据，我不知道我将使用的确切顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:32:57.990

听起来你需要添加一个索引。在不知道您的数据分布的情况下，我无法确定将其添加到哪一列，但我的直觉会建议“expire_date”是最好的地方。您的索引应该位于最独特的字段上，以允许 sql server 在不进行表扫描的情况下快速删除行。

# wpf - 强制 ItemsControl 面板重新绘制

> ID：11834619
> 
> 赞同：1
> 
> 时间：2012-08-06T19:26:49.087
> 
> 标签：wpf, repaint, wrappanel

好的，我有一个包含容器控件的 ListBox。每个容器控件都包含 1-X 小部件，这些小部件布置在完全自定义的 WrapPanel 中，效果很好。小部件的大小由 2 个因素确定/更新：

1.  父列表框的大小（如果更改则更新）
2.  视图比例 SliderBar (25%, 50%, 100%) - 就像一个缩放按钮

如果更改列表框大小，自定义面板重绘和小部件大小在我的代码中相应调整。工作完美。

```
 <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ListBox Name="lstGroups" Grid.Column="0" ItemsSource="{Binding Path=TopLevelGroups}" BorderThickness="0" ScrollViewer.VerticalScrollBarVisibility="Hidden" SizeChanged="ListBox_SizeChanged" VerticalAlignment="Stretch"
             SelectionMode="Extended"
                    Style="{ StaticResource ListBoxWithAutoScroll_Horizontal }"
             >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>
    <StackPanel Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Center" Orientation="Horizontal">
        <Label Margin="5">View Scale:</Label>
        <Slider Name="sldView" Minimum="25" Maximum="100" IsSnapToTickEnabled="True" TickPlacement="BottomRight" Ticks="25,50,100" Width="125" ValueChanged="Slider_ValueChanged"/>
    </StackPanel>
    <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" DockPanel.Dock="Right">
        <Button Command="{Binding Path=StopCommand}" Content="Stop" Height="30" Width="60" Margin="1" IsEnabled="{Binding Path=CanStop}" x:Name="btnStop" />
        <Button Command="{Binding Path=RunCommand}" Content="Run" Height="30" Width="60"  IsEnabled="{Binding Path=CanRun}" x:Name="btnRun" HorizontalAlignment="Right" Margin="1"/>
    </StackPanel> 
```

--小部件--

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
         <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <StackPanel Orientation="Horizontal" Grid.Row="0">
        <StackPanel.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Edit" Command="{Binding Path=EditCommand}" IsEnabled="{Binding IsMonitorStopped}"/>
                <MenuItem Header="Remove" Command="{Binding Path=RemoveCommand}" IsEnabled="{Binding IsMonitorStopped}"/>
            </ContextMenu>
        </StackPanel.ContextMenu>
        <Image Source="" Margin="2" />
        <Label Content="{Binding Path=Name}" Margin="5,0,0,0" VerticalAlignment="Center"/>
    </StackPanel>
        <ItemsControl Grid.Row="1" ItemsSource="{Binding Path=Entities}" Name="icEntities" >
        <ItemsControl.Resources>
            <DataTemplate DataType="{x:Type vm:AppleViewModel}">
                <ct:AppleTile Height="{Binding Path=AppleHeight}" Width="{Binding Path=AppleWidth}" Grid.ColumnSpan="2" Grid.RowSpan="2"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:OrangeViewModel}">
                <ct:OrangeTile Height="{Binding Path=OrangeHeight}" Width="{Binding Path=OrangeWidth}"  Grid.ColumnSpan="2"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:GrapeViewModel}">
                <ct:GrapeTile Height="{Binding Path=GrapeHeight}" Width="{Binding Path=GrapeWidth}" />
            </DataTemplate>
        </ItemsControl.Resources>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <!-- Custom Wrap panel -->
                <co:MonitorPanel x:Name="mpMain"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
    </Grid> 
```

如果用户移动滑块进行放大/缩小 - 我需要能够强制自定义面板使用新计算的小部件尺寸重新渲染。

```
private void ListBox_SizeChanged(object sender, SizeChangedEventArgs e)
{
    //Works perfect
    this.ResetViewScale(e.NewSize);
} 
```

...麻烦来了：

```
 private void Slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        ...code here
        this.ResetViewScale(new Size(this.myListBox.ActualWidth, this.myListBox.ActualHeight));
        //How can I repaint my list/panel?
    }

private void ResetViewScale(Size e)
    {
        Size newSize = new Size(e.Height / 2, e.Height / 2);

        switch (App.ApplicationViewScale)
        {
            case ViewScale.Full:
                Size full = new Size(newSize.Height, newSize.Height);
                App.TileSize = new Size(full.Height, full.Width);
                break;
            case ViewScale.Half:
                Size half = new Size(newSize.Height / 2, newSize.Height / 2);
                App.TileSize = new Size(half.Height, half.Width);
                break;
            case ViewScale.Quarter:
                Size quarter = new Size(newSize.Height / 4, newSize.Height / 4);
                App.TileSize = new Size(quarter.Height, quarter.Width);
                break;
            default:
                Size defaultToFull = new Size(newSize.Height, newSize.Height);
                App.TileSize = new Size(defaultToFull.Height, defaultToFull.Width);
                break;
        }
    } 
```

我尝试使用所有 Invalidate 方法，但似乎没有任何效果。有点卡住了...

# mono - MonoDoc：安装和添加 http://iosapi.xamarin.com/

> ID：11834620
> 
> 赞同：2
> 
> 时间：2012-08-06T19:26:59.367
> 
> 标签：mono, xamarin.ios

我在 Miguel 最近的一段视频中注意到他正在使用[http://iosapi.xamarin.com的内容访问 MonoDoc](http://iosapi.xamarin.com)

[是否有 MonoDoc 的安装位置（在http://www.mono-project.com/Documentation](http://www.mono-project.com/Documentation)上似乎没有安装位置）允许我们将[http://iosapi.xamarin.com/](http://iosapi.xamarin.com/)添加到 MonoDoc ?

在 MonoDevelop 中按下帮助似乎没有打开任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:06:55.493

我已向 Xamarin 提交了一个错误修复请求，并会在完成后对其进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:29:20.807

根据[这个 SO answer](https://stackoverflow.com/a/13243758/132599)，我必须`/Applications/MonoDevelop.app/Contents/MacOS/MonoDoc.app/Contents/MacOS/macdoc`在终端中运行才能让*帮助*菜单项开始在 MonoDevelop 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:40:21.633

MonoTouch 安装供 MonoDoc 使用的文档。你不需要做任何事情，除了点击 MonoDevelop 的帮助

# javascript - 同时调用js函数yui

> ID：11834624
> 
> 赞同：-1
> 
> 时间：2012-08-06T19:27:04.137
> 
> 标签：javascript, yui, slideshow, yui3

目前这导致（图像）淡出功能结束，然后淡入功能触发。我需要图像交叉淡化和每个图像的不透明度重叠。我无法完成这项工作。想法？

```
_initFade: function () {
  this._timer = Y.later(this._intervalDuration, this, this._startPeriod, [], false);

},

_startPeriod: function () {
  this._timer = Y.later(this._intervalDuration, this, this._fadeOut, [], true);
  this._fadeOut();
},

_fadeOut: function(){
  var host = this.get('host');
  this._animOut.set('node', host._getCurrentBlock());
    this._animOut.once('end', this._fadeIn, this);
  this._animOut.run();      
},

_fadeIn: function(){
  var host = this.get('host'),
      blocks = host.get('blocks'),
      index = host.get('index');
      index = host._moveIndex(host._getNextIndex());

  var nextBlock = blocks.item(index);
  this._transparent(nextBlock);
  host.syncUI();
  this._animIn.set('node', nextBlock);
  this._animIn.run();
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:40:14.140

YUI 不支持同步运行的多个动画。但是看看 Y.Anim 的 'tween' 事件。动画的每一帧都会调用它。因此，您可以使用动画淡化一张图像，并在补间事件期间调整第二张图像的不透明度。

例如，我使用补间事件同时为多个项目设置动画：

```
var someNode = Y.Node.create("<div></div>"); // invisible div to animate
Y.one(document.body).appendChild(someNode);
var anim = new Y.Anim({
    node: someNode,
    duration: 0.25,
    from: { color: 'red' },
    to: { color: 'white' } 
});
anim.on('tween', function(event){
    Y.StyleSheet().set('input.text.error', { backgroundColor: someNode.getStyle('color') });
    // other animations
}); 
```

# jsrender - jsRender 中有包含函数吗？

> ID：11834625
> 
> 赞同：0
> 
> 时间：2012-08-06T19:27:06.963
> 
> 标签：jsrender

只想列出所有角色。如果一个角色有这个用户，它将以不同的方式显示。

传入的 json 数据包含一个数组`Roles`（用户拥有的角色）和另一个称为`AllRoles`（所有角色值）的数组

```
{{for AllRoles ~roles=Roles}}
    {{if ~roles.contains(#data)}} // I made this up, but how to write this if???
        <a href="#" class="selected">{{:#data}}</a>
    {{else}}
        <a href="#" class="unselected">{{:#data}}</a>
    {{/if}}
{{/for}} 
```

任何人都可以帮助我们吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:22:09.230

```
{{if ~roles.indexOf(#data)>=0}} 
```

# xcode - XCode：新 Mac，新开发者证书，重复出现

> ID：11834628
> 
> 赞同：0
> 
> 时间：2012-08-06T19:27:20.067
> 
> 标签：xcode, app-store

所以：我有一台新的 Mac。我去了开发人员配置门户，然后吊销了我的证书。我创建了一个新的。

现在，每当我打开 XCode 时，它​​都会抱怨我有重复的开发人员证书。是的，当我检查钥匙串时，有两个。然后我删除了最旧的，但 XCode 显然非常喜欢旧的：它不断地重新创建它。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:19:52.597

在此回答： [Xcode 在您的钥匙串中找不到此配置文件的有效私有证书/有效密钥对](https://stackoverflow.com/questions/5525436/xcode-could-not-find-a-valid-private-certificate-valid-key-pair-for-this-profile)

短版：从您的钥匙串中删除所有证书。通过 Organizer 从 XCode 中删除所有配置。在 iOS 配置门户中请求并生成新证书。下载新规定并通过双击将它们导入 XCode。最后，转到您的项目并确保选择了正确的签名，只是为了确保。

# php - glob 列出文件，file_exists() 表示它们不存在

> ID：11834629
> 
> 赞同：1
> 
> 时间：2012-08-06T19:27:21.783
> 
> 标签：php

我有一个与`file_exists()`and相关的奇怪问题`glob()`。后者列出了这个特定目录中的所有文件没问题，但是如果我遍历文件路径并调用`file_exists()`它们，它会返回 false。

我的第一反应是这是权限问题，但我已经跑了

`sudo chmod -R 766 ./directoryName`

这样 PHP 将至少具有读取权限。还是没有区别。

我在这里阅读了其他几个问题，提到安全模式可能是一个问题，但我已经验证我的 PHP ( `PHP Version 5.3.5-1ubuntu7.10`) 没有在安全模式下运行。

这是我`ls -la`在相关目录中的输出...

```
drwxrw-rw-  6 user     user      4096 2012-08-04 16:15 .
drwxr-xr-x  6 user     user      4096 2012-08-04 12:42 ..
-rwxrw-rw-  1 user     user       141 2012-07-25 20:43 AppCache.php
-rwxrw-rw-  1 user     user      1982 2012-08-04 10:54 AppKernel.php
-rwxrw-rw-  1 user     user       474 2012-07-25 20:43 autoload.php
-rwxrw-rw-  1 www-data user     47590 2012-08-06 20:01 bootstrap.php.cache
drwxrwxrw-+ 3 user     user      4096 2012-08-06 20:24 cache
-rwxrw-rw-  1 user     user      1643 2012-08-06 20:01 check.php
drwxrw-rw-  2 user     user      4096 2012-08-04 12:41 config
-rwxrw-rw-  1 user     user       794 2012-07-25 20:43 console
-rwxrw-rw-  1 user     user        13 2012-07-25 20:43 .htaccess
drwxrwxrw-+ 2 user     user      4096 2012-08-06 20:25 logs
-rwxrw-rw-  1 user     user      1327 2012-07-25 20:43 phpunit.xml.dist
drwxrw-rw-  3 user     user      4096 2012-08-04 12:41 Resources
-rwxrw-rw-  1 user     user     24240 2012-08-06 20:01 SymfonyRequirements.php
-rwxrw-rw-  1 user     user       727 2012-07-25 20:43 upgrade.php 
```

在我的索引脚本中，我正在做以下作为一个非常基本的测试......

```
$files = glob('/path/to/directory/*.cache');
foreach($files as $file) {
    echo $file . ':';
    var_dump(file_exists($file));
    echo '<br>';
} 
```

输出以下...

```
/path/to/directory/bootstrap.php.cache:
boolean false 
```

如果我创建一个脚本并从命令行运行它，`file_exists()`调用`true`会按预期返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:34:57.687

IIRC，没有`+x`权限位，您将无法读取目录，这可能是问题的根源。

将权限掩码更改为`755`而不是`766`应该赋予 PHP 读取和执行权限，这应该可以解决问题。

```
sudo chmod -R 755 ./directoryName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:34:10.593

嗯，你的权限看起来很允许，但我有一种感觉，因为所有者是“用户”。

要进行测试，请尝试将权限更改为 php 用户的名称，您可以通过以下方式找到：

`echo whoami();`

然后检查你的 index.php

如果是这种情况，您可以为您的文件创建一个组，该组同时具有“用户”和 php 用户（根据我的理解通常是“守护进程”）

干杯！

# html - 在 ul 中浮动 li, ul with overflow:auto 产生垂直滚动条

> ID：11834631
> 
> 赞同：-1
> 
> 时间：2012-08-06T19:27:53.270
> 
> 标签：html, css, overflow

我有一个`<ul>`有几个浮动`<li>`的。我做了我的标准 css`overflow:auto;`来清除浮动并`<ul>`匹配孩子的大小。这在 webkit 浏览器中效果很好，但在 Firefox 中它会产生一个垂直滚动条。我通过使用解决了这个问题`overflow: hidden;`，但我很好奇是否有人知道为什么会在元素`overflow:auto;`中产生这种行为。`<ul>`有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:57:20.727

没有溢出：没有。默认为“可见”。哪个取消了您想要的浮动包含溢出：自动。

如果要设置溢出，则根本不要在 ul 上设置高度。在溢出的元素上设置高度实际上是要求孩子要么被切断（溢出：隐藏）或强制滚动条（自动）。不在父级上设置尺寸意味着“自动”没有理由首先创建任何滚动条。

没有看到任何代码，浏览器之间的区别可能只是字体渲染。也许您的 Firefox 显示 li 中的文本只是大了一点。使里更大。使他们需要从固定高度的容器中溢出。

尽管如果是这种情况并且由于某种原因您确实需要在控制溢出的父级上设置高度，请尝试在 em 中设置该高度。只要文本不换行，它就可以随着文本增长一点。

如果这个代码对高度很挑剔，您也可以使用其他许多浮动包含代码中的任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:39:20.243

你说你匹配了孩子的大小，这意味着你已经设置了高度/宽度`<ul>`，所以如果没有足够的高度，可能会出现垂直滚动条。此行为可能会有所不同，具体取决于浏览器对不同边距、填充、默认值等的解释。

# excel - 关于按照给定模式替换列

> ID：11834633
> 
> 赞同：0
> 
> 时间：2012-08-06T19:27:59.157
> 
> 标签：excel

我有一个 excel 文件，其中一列具有如下数据集：

```
1.txt
2.txt
3.txt
100.txt
20.txt
30.txt 
```

我必须通过从每个单元格中删除所有 .txt 来将此列替换为以下列

```
1
2
3
100
20
30 
```

如何在 Excel 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:29:54.077

只需使用该`SUBSTITUTE`功能。在相邻的单元格中，输入：

```
=SUBSTITUTE(A1, ".txt", "") 
```

并根据需要拖动和复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:38:51.090

user785099，您可能会发现使用“文本到列”功能或可能的“搜索和替换”很有用。

**文本到列** 选择有问题的列。在`Data`选项卡下 find `Text to Columns`，选择这个，然后在下`Original Data Type`选择`Delimited`。选择`Next`。然后在`Delimiter`指定并在相应字段中`Other`插入 a并选择。这将产生两列，您只需删除填充的那一列`.``Finish``txt`

**搜索和替换** 突出显示列或单元格 使用键盘快捷键`ctrl+h`或图形方式选择`Home`-> `Find & Select`->`Replace ...`调出查找和替换对话框

# visual-c++ - SQLite 数据库文件在插入/删除过程中被锁定

> ID：11834639
> 
> 赞同：2
> 
> 时间：2012-08-06T19:28:27.287
> 
> 标签：visual-c++, sqlite

我正在使用一个 C++ shell 扩展 DLL，它用于读取、写入数据到 SQLite 数据库表中。还有另一个用于访问所有表的应用程序（exe）。

有时，当我尝试删除/插入/更新 SQLite 数据库表时，我的 dll 会显示异常“数据库文件已锁定”。这是因为此时其他应用程序正在访问这些表。

有什么办法可以从我的 DLL 中解决这个问题？我可以使用链接中提到的解决方案吗：“ *http://stackoverflow.com/questions/6455290/implementing-sqlite3-busy-timeout-in-an-ios-app* ”

在当前代码中，我使用 **CppSQLite3.cpp**方法**execQuery** (const char* szSQL) 来执行 SQL 查询。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:34:35.020

首先，您应该知道 SQLite 执行数据库级别的锁定。当您启动事务并且其他应用程序尝试将某些内容写入同一个数据库时，您会得到并且 SQLite 会在间隔`Database is locked`后自动尝试执行相同的查询。`sqlite3_busy_timeout`

所以诀窍是确保您的交易尽可能短，即
1\. 开始交易
2\. 更新/删除/插入
3\. 提交

并且在这 3 个步骤之间没有其他任何内容。并且还`sqlite3_busy_timeout`根据您的交易量增加您的间隔以适应您的应用程序。

您可以尝试`WAL`模式，在这种模式下，可以同时完成对 SQLite 的读取和写入。但它也有其自身的一系列缺点。您可以参考 SQLite[文档](http://www.sqlite.org/draft/wal.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:59:23.157

SQLite 对多用户和多事务有一些限制。这意味着您无法读取/写入来自不同事务的资源。更新数据库时，数据库将被锁定。

以下是一些可能对您有所帮助的链接

[http://sqlite.org/c3ref/busy_timeout.html](http://sqlite.org/c3ref/busy_timeout.html)

[http://www.sqlite.org/c3ref/busy_handler.html](http://www.sqlite.org/c3ref/busy_handler.html)

祝你好运

# mysql - SQL 按距离搜索结果

> ID：11834643
> 
> 赞同：0
> 
> 时间：2012-08-06T19:28:53.343
> 
> 标签：mysql, database, geocoding, distance

我需要一些帮助，我以前从未做过自己的 SQL 搜索，我正在尝试这样做：

我有一个名称和位置数据库（这些位置与纬度记录和经度记录一起列出）。然后，用户可以通过输入他们的邮政编码（转换为经度和纬度）和他们愿意旅行的距离（以英里为单位，我可以转换为经度/纬度距离）进行搜索。

如何返回按与邮政编码的距离排序的结果？

请记住，我以前从未做过这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:32:49.603

有一个数学公式可以计算球体上两点之间的最短距离。它的公式和JS实现在这里：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

T-SQL 实现在这里：

[http://weblogs.asp.net/jimjackson/archive/2009/02/13/calculating-distances-between-latitude-and-longitude-t-sql-haversine.aspx](http://weblogs.asp.net/jimjackson/archive/2009/02/13/calculating-distances-between-latitude-and-longitude-t-sql-haversine.aspx)

# cakephp - cakephp auth 组件，使用两种模式

> ID：11834646
> 
> 赞同：3
> 
> 时间：2012-08-06T19:28:58.553
> 
> 标签：cakephp

我的网站有一个供员工使用的公共部分和供管理员使用的后端。它使用 2 种不同的模型，Employee 和 Admin。

我想使用 Auth 组件进行员工登录和管理员登录。我知道如何设置 Auth 组件以使用默认用户模型以外的模型。但是我可以让身份验证组件使用 2 种模型，一种用于员工身份验证，另一种用于管理员身份验证吗？我正在使用 admin_ 前缀路由。

这可能吗？我进行了搜索，但我只能找到有关如何使 Auth 组件使用除用户模型之外的模型的教程。

请指教！

**编辑**

我使用单独的登录表单进行管理员登录和员工登录。两者都使用员工控制器，但操作不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:18:04.603

考虑到您正在为员工和管理员使用两个单选按钮。然后您可以使用以下代码进入登录方法。

```
 function login()
{       
    if ($this->request->is('post'))
    {
        $logged_in = false;
        $login_type = $this->request->data['User']['login_type']
        if ($login_type == 'Admin')
        {
             $this->Auth->authenticate = array('Form' => array('userModel' => 'Admin' ));       
        }
        else //if ($login_type == 'Employee')
        {
             $this->Auth->authenticate = array('Form' => array('userModel' => 'Employee' ));             
        }
        $this->Auth->constructAuthenticate();
        if ($this->Auth->login())
        {  
             $logged_in = true;                 
                     /*.... Do what you want............*/
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:37:07.033

[http://api.cakephp.org/class/auth-component](http://api.cakephp.org/class/auth-component)

检查属性验证，你的答案就在那里！

和更多： [http](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html) ://book.cakephp.org/2.0/en/core-libraries/components/authentication.html 。查看身份验证处理程序！

这是直接来自蛋糕页面的示例

```
<?php
// Basic setup
$this->Auth->authenticate = array('Form');

// Pass settings in
$this->Auth->authenticate = array(
'Form' => array('userModel' => 'Member'),
'Basic' => array('userModel' => 'Member')
); 
```

只需放置其他东西而不是 Form 和 Basic 并关联好的模型

# objective-c - iOS 如何从数组中读取值

> ID：11834647
> 
> 赞同：0
> 
> 时间：2012-08-06T19:28:59.253
> 
> 标签：objective-c, ios, ios5, ios4

这是我想从中获取价值的数组示例。

```
coursesArray = [[NSMutableArray alloc]init];

// AR111:
[coursesArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:
                           @"MUR",@"courseType",  
                           @"AR111",@"courseCode",
                           @"Arabic Communication Skills (I)",@"courseName",
                           @"3",@"creditHours",
                           @"",@"preRequisites",
                           @"63.000",@"coursePrice",
                           @"6.000",@"courseEPP",
                           @"This course aims at .",@"courseDetails",
                           nil]]; 
```

这是我获得价值的代码。

```
NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];

int i = 0;
for (i = 0; i < [coursesArray count] ; i++) {

NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    [newManagedObject setValue:[[coursesArray objectAtIndex: i ]forKey:@"courseName"] forKey:@"courseName"];
} 
```

如果有人可以帮助我更正以下部分：

```
[newManagedObject setValue:[[coursesArray objectAtIndex: i ]forKey:@"courseName"] forKey:@"courseName"]; 
```

这些值将添加到核心数据 forKey:@"courseName"。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:01:02.983

```
[newManagedObject setValue:[[coursesArray objectAtIndex: i ]forKey:@"courseName"] forKey:@"courseName"]; 
```

我认为这是将太多代码放在一行上的经典案例。我不希望这实际上编译？

让我们试着把它分成几个部分。我已经取出了核心代码，并用 XX 替换了它：

```
[newManagedObject setValue:XX forKey:@"courseName"]; 
```

这一点看起来不错。`setValue:forKey`是托管对象的有效方法。

XX 是：

```
[YY forKey:@"courseName"] 
```

目前尚不清楚这是否正确，但看起来不太好 - 方法名称似乎不正确。

YY是：

```
[coursesArray objectAtIndex:i] 
```

这很好，它返回一个可变字典。但是字典没有实现一个名为`forKey:`. 不过，它们*确实*实现了一个名为 的方法`objectForKey:`，这正是您想要的。

因此，您更正的行应该是：

```
[newManagedObject setValue:[[coursesArray objectAtIndex:i] objectForKey:@"courseName"] forKey:@"courseName"]; 
```

如果您正在编写大量这样的代码，那么具有保存数据成员的属性的自定义对象突然变得更有意义了。forKey: all of the place 很快变得不可读。

# java - 如何使用 android SDK 获取正在运行的应用程序

> ID：11834649
> 
> 赞同：2
> 
> 时间：2012-08-06T19:29:02.543
> 
> 标签：java, android, sdk

您好我有兴趣启动一个任务杀手应用程序，但想知道您是否以及如何查看手机上运行的当前应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:36:13.017

尝试使用[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)：

```
try
{
    List<ActivityManager.RunningAppProcessInfo> tasks = am.getRunningAppProcesses();
    int numOfTasks = tasks.size();
    for(int i = 0; i < numOfTasks; i++)
    {
        ActivityManager.RunningAppProcessInfo task = tasks.get(i);
        try
        {
            PackageInfo myPInfo = getPackageManager().getPackageInfo(task.processName, 0);
            //System.out.println(task.processName);
        }
        catch (PackageManager.NameNotFoundException ne)
        {
         ne.printStackTrace();
        }
    }
}
catch (SecurityException se)
{
 se.printStackTrace();
} 
```

另见：[http ://smartandroidians.blogspot.com/2011/05/way-to-check-whether-application-is.html](http://smartandroidians.blogspot.com/2011/05/way-to-check-whether-application-is.html)

# ios - iOS——查看配置文件？

> ID：11834650
> 
> 赞同：41
> 
> 时间：2012-08-06T19:29:19.613
> 
> 标签：ios, code-signing, provisioning-profile, code-signing-entitlements

是否可以检查配置文件的内部？我正在处理代码签名错误，因为权利不匹配。解决这个问题相当困难，因为我不知道如何检查配置文件中的权利。因此，我在黑暗中拍摄。

相关问题，在我的情况下似乎都没有帮助：

*   [Xcode 3.2 的代码符号错误](https://stackoverflow.com/questions/1410080/code-sign-error-with-xcode-3-2)
*   [可执行文件已使用无效权利进行签名](https://stackoverflow.com/questions/1074546/the-executable-was-signed-with-invalid-entitlements)
*   [用于 Ad Hoc 分发的 XCode 4 的 iPhone 权利问题](https://stackoverflow.com/questions/5449487/iphone-entitlements-problem-with-xcode-4-for-ad-hoc-distribution)

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-07-11T21:32:31.483

您还可以通过键入进行文本转储

```
security cms -D -i <prov> 
```

FWIW

*   `security`是管理钥匙串、密钥、证书和安全框架。

*   `cms`是`security`框架内的一个命令，它代表加密消息语法

*   `-D`用于解码

*   `-i`表示 infile 使用 infile 作为数据源（默认值：stdin）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-06T19:45:44.357

您可以`more`（或`less`）在终端（应用程序 -> 实用程序 -> 终端）中使用它。只需回答`y`有关查看二进制数据的问题即可。

xml 部分是可读的。例如，您可以查看`ApplicationIdentifierPrefix`和`keychain-access-groups`。在过去，这些让我有些头疼。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-30T21:35:19.863

已经开发了许多[Quick Look 插件来检查配置文件：](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Introduction/Introduction.html)

*   [https://github.com/chockenberry/Provisioning](https://github.com/chockenberry/Provisioning)
*   [https://github.com/ealeksandrov/ProvisionQL](https://github.com/ealeksandrov/ProvisionQL)

安装后，只需在 Finder 中选择配置文件并按空格即可！

![用于配置文件的 Quick Look 插件](../Images/e99148a087b0a5b808dd45146fa0dee3.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-07T17:11:02.087

无需外部应用程序。在 Mac 上观察内容的最快和最简单的方法是单击 Finder 中的配置文件。预览将列出以下内容（以及其他内容）：

*   应用 ID 名称
*   应用编号
*   队名
*   创建，到期日期
*   权利
*   证书
*   设备白名单

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-17T19:10:14.343

只需选择您最喜欢的`embedded.mobileprovision`文本**编辑器**。它可能会显示各种编码错误，但您关心的部分（例如权利和其他密钥）应该很容易看到： `Open With...`

 **```
0Å   *H÷ ¶0²10 +0 +0 Ì!YëýI¬nuèzÑöçö°
...
<plist version="1.0">
<dict>
    <key>AppIDName</key>
    <string>Your App Name</string>

    ...

    <key>Entitlements</key>
    <dict>
        ...
        <key>aps-environment</key>
        <string>production</string> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-30T09:12:24.803

右键单击并选择“获取信息”。它将向您显示证书、配置的设备和权利。**

# sublimetext3 - 将快捷方式绑定到命令面板命令？

> ID：11834652
> 
> 赞同：17
> 
> 时间：2012-08-06T19:29:22.787
> 
> 标签：sublimetext3, sublimetext2, key-bindings

我刚刚安装了一个名为 CodeSniffer (http://soulbroken.co.uk/code/sublimephpcs) 的插件，我想将其中一个命令从命令面板链接到键盘快捷键，因为我经常使用它。

有什么简单的方法可以做到这一点？或者我只需要询问开发人员命令的名称是什么（在命令面板中它是“PHP CodeSniffer：清除嗅探器标记”）？

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-07T00:32:22.320

找到命令的名称实际上很容易，但需要几个步骤。

*   打开 Sublime Text 的内置控制台（control+`）
*   输入`sublime.log_commands(True)`
*   从命令面板触发命令

命令的名称将记录到控制台。然后打开您的用户键绑定并创建一个新的键绑定，如下所示：

```
{ "keys": ["YOUR_SEQUENCE"], "command": "YOUR_COMMAND" } 
```

我在这里提供了类似的答案：[Keymap Sublime Text 2 File Type？](https://stackoverflow.com/questions/11814516/keymap-sublime-text-2-file-type/11822390#11822390)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T08:32:29.170

另一种方法是破解打开 .sublime-commands 文件。

假设您已经安装了[Sublime Package Control](http://wbond.net/sublime_packages/package_control)（您真的很想这样做！），然后在命令面板（os x 上的⌘⇧p）中打开它并安装[Search Stack Overflow](https://github.com/ericmartel/Sublime-Text-2-Stackoverflow-Plugin)包。现在，命令面板中有两个新命令，“Stackoverflow：搜索选择”和“Stackoverflow：从输入搜索”命令。

好的，打开包的 .sublime-commands 文件。你需要先找到它。如果你是铁杆，你可以查看 > 显示控制台，然后输入`print(sublime.packages_path())`

否则它应该在这里

*   Windows：%APPDATA%\Sublime Text 2\Packages
*   OS X：~/Library/Application Support/Sublime Text 2/Packages
*   Linux：~/.Sublime Text 2/Packages
*   便携式安装：Sublime Text 2/Data/Packages

然后“搜索堆栈溢出/Default.sublime-commands”

这是首先使命令显示在命令面板中的文件。

这是另一个带有类似条目的 JSON 文件

```
{
    "caption": "Stackoverflow: Search from Input",
    "command": "stackoverflow_search_from_input"
} 
```

看，这就是那里的命令名称：**stackoverflow_search_from_input**

现在只需打开用户键绑定 JSON 文件并像 @BoundinCode 所说的那样添加键绑定。

# c++ - C++：strcat() 是否覆盖或移动空值？

> ID：11834655
> 
> 赞同：6
> 
> 时间：2012-08-06T19:29:35.243
> 
> 标签：c++, character-arrays

现在让我们看看这个小程序

```
char s[20]="One";
strcat(s,"Two");
cout<<s<<endl; 
```

这里首先 s 的值为“One”，对于视觉表示，这是 s 的值：

O - n - e - \0

然后我将“Two”添加到字符串的末尾，从而产生：

O - n - e - T - w - o - \0

现在你可以看到字符串中唯一的 null 最初是在“One”之后，现在它在“OneTwo”之后

我的问题是：null 是否被字符串“Two”覆盖，然后在末尾添加它自己的 null。

还是一开始就已经存在的空值又移回到了最后？

（这个问题似乎没有什么区别，但我想知道我学到的一切）

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T19:31:41.037

第一个`\0`被覆盖，并`\0`在连接字符串的末尾添加一个新的。这里没有“移动”任何东西的余地。这些是分配值的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T20:02:08.220

尽管该问题已得到正确且反复的回答，但最好从 source™ 获得最官方的答案。或者至少从我可以在谷歌上找到的来源。

[这份](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)声称是 C++ 标准（或其工作草案）的文档说：

> C++ 标准库提供了来自 C 库 [包括 strcat] 的 209 个标准函数。--“标准 C 库”，C.2.7，第 811 页

跳转到[这个](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)声称是 C 国际标准的文档，我们看到：

> 该`strcat`函数将 指向的字符串的副本`s2` （包括终止空字符）附加到 指向的字符串的末尾`s1`。的初始字符`s2` **覆盖 末尾的空字符`s1`**。如果复制发生在重叠的对象之间，则行为未定义。
> 
> --“`strcat`函数”，7.21.3.1，第 327 页

strcat 确实会覆盖空字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T19:34:16.673

唯一确定的方法是查看特定版本的`strcat`. 典型的实现将覆盖第一个 null 并将第二个字符串中的 null 复制到最后一个位置。

不过，这确实很挑剔，无论使用哪种方法，您都无法检测到输出中的差异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T19:31:22.717

是的，`\0`第一个参数的`strcat`被覆盖，它成为连接字符串的最后一个字符。

它不会这样*移动*，该函数只是作为*连接*字符串的最后一个字符*附加。* `\0`

# javascript - 在 DIV 外部单击

> ID：11834657
> 
> 赞同：5
> 
> 时间：2012-08-06T19:29:40.343
> 
> 标签：javascript, jquery, html

```
<body>
    <div id="aaa">
       <div id="bbb">
       </div>
    </div>
</body>

$(#?????).click(function(){

     $('#bbb').hide();

}) 
```

[http://jsfiddle.net/GkRY2/](http://jsfiddle.net/GkRY2/)

如果用户单击框外#bbb，我想隐藏#bbb，我必须使用什么？但是，如果我单击 div #bbb，则框仍然可见-仅在外面。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T19:33:43.480

```
 $('body').click(function(e){
       if( e.target.id == 'bbb' )
          { return true; }
       else
          { $('#bbb').hide(); }

 }); 
```

解释说明：有几种方法可以做到这一点，无论是我们需要监听对父元素的点击，天气它是直接父元素，`#aaa`还是远距离父元素，如`body`或`document`。这样我们就可以捕获在`#bbb`.

现在我们已经知道，`.hide`如果用户确实点击了`#bbb`. 我们可以通过两种方式做到这一点

1.  如果用户单击 ，则停止传播`#bbb`。这将使点击事件不会**[“冒泡”](http://www.quirksmode.org/js/events_order.html)**到父级。这样点击事件永远不会到达父级，因此`#bbb`不会隐藏。我个人不喜欢这种方法，因为停止传播会使所有点击事件都不会冒泡，并且您可能希望将点击事件冒泡到本地父级而不是远程父级。或者，您可能从远方的父级委派了侦听器，如果单击传播停止，该侦听器将停止工作。

2.  检查`#bbb`父侦听器中的元素。这就是上面显示的方法。基本上，这会监听一个遥远的父母，当点击发生时，它会检查该点击是否是`#bbb`专门的。如果它 IS NOT on`#bbb` `.hide`被触发，否则它返回 true，因此可能与`click`事件相关的其他事情将继续工作。仅出于这个原因，我更喜欢这种方法，但其次，它的可读性和可理解性更高。

最后，您检查点击是否源自`#bbb`您的方式有很多选择。任何都会起作用，模式是这件事的真正核心。

[http://jsfiddle.net/tpBq4/](http://jsfiddle.net/tpBq4/) //修改自@Raminson，他的答案非常相似。

* * *

新建议，在没有 jQuery 的情况下利用事件冒泡。

```
var isOutSide = true
    bbb       = documment.getElementById('bbb');
document.body.addEventListener('click', function(){
   if(!isOutSide){
       bbb.style.display = 'none';
   }
   isOutSide = true;
});

bbb.addEventListener('click', function(){
   isOutSide = false;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T19:32:17.707

抓住`click`事件，因为它冒泡到`document`元素。当它碰到`document`元素时，隐藏元素。然后在`click`元素的事件处理程序中，停止事件的传播，使其不会到达`document`元素：

```
$(function () {
    $(document).on('click', function () {
        $('#bbb').hide();
    });
    $('#bbb').on('click', function (event) {
        event.stopPropagation();
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/KVXNL/](http://jsfiddle.net/KVXNL/)

文档`event.stopPropagation()`：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T19:35:53.820

我做了一个插件来做到这一点。它保留了`this`这些其他解决方案的`this`价值将引用的价值`document`。

[https://github.com/tylercrompton/clickOut](https://github.com/tylercrompton/clickOut)

利用：

```
$('#bbb').clickOut(function () {
    $(this).hide();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T19:33:05.320

您可以使用`target`事件对象的属性，尝试以下操作：

```
$(document).click(function(e) {
    if (e.target.id != 'bbb') { 
          $('#bbb').hide();
    }
}) 
```

[演示](http://jsfiddle.net/GkRY2/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T18:38:12.533

好的

*** 这不是 jquery。您可以轻松修改它以使用 IE

首先创建辅助方法以方便编码不要与 JQuery $() 混淆

```
 function $g(element) {

    return document.getElementById(element);

    } 
```

创建我们的监听器类

```
 function globalClickEventListener(obj){

    this.fire = function(event){
        obj.onOutSideClick(event);
        }
    } 
```

假设我们需要捕获对文档正文的每次点击

所以我们需要创建 listeners 数组并初始化我们的工作。此方法将在加载时调用

```
 function initialize(){

    // $g('body') will return reference to our document body. parameter 'body' is the id of our document body

    $g('body').globalClickEventListeners = new Array();
    $g('body').addGlobalClickEventListener = function (listener)
    {
        $g('body').globalClickEventListeners.push(listener);

    }

    //  capture onclick event on document body and inform all listeners

    $g('body').onclick = function(event) {
        for(var i =0;i < $g('body').globalClickEventListeners.length; i++){
            $g('body').globalClickEventListeners[i].fire(event);
        }
    }

} 
```

初始化后，我们创建事件侦听器并传递需要了解文档上每个 clcik 的对象的引用

```
 function goListening(){

        var icanSeeEveryClick = $g('myid');
        var lsnr = new globalClickEventListener(icanSeeEveryClick);

       // add our listener to listeners array   

        $g('body').addGlobalClickEventListener(lsnr);

       // add event handling method to div   

        icanSeeEveryClick.onOutSideClick = function (event){
             alert('Element with id : ' + event.target.id + ' has been clicked');
        }

    } 
```

***考虑到文档正文的高度和宽度

***在不需要时移除事件监听器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-26T06:40:56.213

```
$(document).click(function(event) { 
    if(!$(event.target).closest('#elementId').length) {
        if($('#elementId').is(":visible")) {
            $('#elementId').hide('fast');
        }
    }        
}) 
```

用您的 div 更改“#elementId”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T19:32:28.703

这将起作用

```
$("#aaa").click(function(){

     $('#bbb').hide();

});

$("#bbb").click(function(event){

    event.stopPropagation();
})​ 
```

因为*bbb*在*aaa*内，所以事件将“冒泡到*aaa* ”。所以你必须通过 单击*bbb*`event.stopPropagation`来停止冒泡

 *[http://jsfiddle.net/GkRY2/5/](http://jsfiddle.net/GkRY2/5/)*

# flash - Chrome 21 Pepper Flash 导致 actionscript AIR 安装检测失败的任何解决方案？

> ID：11834663
> 
> 赞同：2
> 
> 时间：2012-08-06T19:29:57.397
> 
> 标签：flash, google-chrome, actionscript, air, adobe

我们有一个启动 AIR 应用程序的 flash 按钮，但无法正确检测到 AIR 安装在 Chrome 21 的新 Pepper flash 插件下（刚刚为 Windows 发布）。这是我们的动作脚本的代码片段：

```
internal var airSWFLoader:Loader = new Loader();
loaderContext.applicationDomain = ApplicationDomain.currentDomain;

airSWFLoader.contentLoaderInfo.addEventListener(Event.INIT, airSWF_init);
airSWFLoader.load(new URLRequest("http://airdownload.adobe.com/air/browserapi/air.swf"), loaderContext);

internal function airSWF_init(event:Event):void {
    try {
        airSWF = event.target.content;
        airSWF.getAIRStatus(); //fails to detect AIR here with value "available"
    } catch (e:Error) {
        Logger.error(e.message,e.errorID);
} 
```

对 getAIRStatus() 的调用返回“可用”而不是“已安装”，因为它在同一台机器上的其他浏览器上直接使用 Adob​​e 的常规 Flash 插件。

想看看其他人是否遇到过类似的问题，或者是否有更好的方法来检测是否安装了 AIR？这会阻止我们的应用程序在 Windows 上的 Chrome 21 下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:11:23.217

看起来与谷歌论坛上的这个错误报告有关：

[铬错误报告](http://code.google.com/p/chromium/issues/detail?id=140854&)

看起来还没有解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T17:41:41.453

我们长期存在这个问题，并且有一个解决方法，用户每次使用我们的服务时都会下载并安装我们的 Native Air 应用程序。这将在安装后启动我们的应用程序并使用剪贴板作为参数——或者我们让用户在他们的设置中手动启用我们的域——显然不是最佳的。

**然后我找到了以下文章：** [http ://helpx.adobe.com/flash-player/kb/unsandbox-localconnection-chrome.html](http://helpx.adobe.com/flash-player/kb/unsandbox-localconnection-chrome.html)

这需要使用*flashfileattributes*实用程序，该实用程序可从以下网址下载：https: [//support.influxis.com/hc/en-us/articles/203135797-ICS-Chrome-Screen-Share-Pepper-Flash-Fix](https://support.influxis.com/hc/en-us/articles/203135797-ICS-Chrome-Screen-Share-Pepper-Flash-Fix)

这篇文章讨论了在 Chrome 中启用 LocalConnections。它没有提到 Air 或 Air Browser API，但我有一种预感，LocalConnection 就是这一切的完成方式。

借鉴示例，我能够与我们的 Air 应用程序通信并启动我们的应用程序。

我会提出一个建议 - 看看传递给您的下载回调的事件 - 我最初没有为 Flash Enabler 下载对话框腾出足够的空间，所以我收到了 2074（舞台上没有足够的空间）错误。一旦这被清除，它就像一颗宝石。

如果我有时间清理我们的代码，我会发布它。否则 - 我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T18:21:18.840

它的发生是由于 Chrome 沙盒 Flash 的新方式，它破坏了 Air 集成。我在这里向 Adob​​e 提交了一个关于它的[错误](https://bugbase.adobe.com/index.cfm?event=bug&id=3310921)。不幸的是，我们所能做的就是投票并希望。：/

# python - wxPython StyledTextCtrl 十六进制格式

> ID：11834667
> 
> 赞同：-1
> 
> 时间：2012-08-06T19:30:13.353
> 
> 标签：python, wxpython, scapy, wxstyledtextctrl, boa-constructor

谁能伸出援助之手。

我正在用 Python 中的 BoaConstructor 构建一个应用程序，它使用 wx.STC.StyledTextCtrl。在这个 styledtextctrl 中，我通过 Scapy 的 hexdump 函数输出十六进制数据。它添加了行号、十六进制转储和字符转码。不幸的是，我无法弄清楚如何在 StyledTextCtrl 中设置此文本的格式，以便它像常规的十六进制编辑器一样显示（请参见此处的图片[http://imgur.com/a/tqE02](http://imgur.com/a/tqE02)）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:22:07.083

既然你说输出在其他编辑器中看起来不错，我猜问题是字体使用可变像素宽度的字符（例如，如果像“w”这样的宽字符是 15 像素宽，那么像“i”这样的更细的字符可能只有 10 个像素）。在固定宽度字体（有时称为单宽字体或打字机文本字体）中，所有字符的宽度完全相同。

您可以在屏幕截图中看到这方面的证据；在“.(.”部分之前的第二行有一个轻微的额外缩进。看起来空格字符比数字要细得多，所以所有这些缺失的像素都使底行的第三个“列”显得太远了左（而第二行的额外宽度将其略微向右推）

您需要找到一种字体，以便[IsFixedWidth()](http://wxpython.org/docs/api/wx.Font-class.html#IsFixedWidth)返回`True`，然后设置您的 STC 以使用该字体。通常，您会使用[SetFont()](http://wxpython.org/docs/api/wx.Window-class.html#SetFont)方法进行设置，但我碰巧知道 STC 更喜欢使用自己的方法。我发现这个[StyleSetFont()](http://wxpython.org/docs/api/wx.stc.StyledTextCtrl-class.html#StyleSetFont)方法是特定于 STC 的，所以这可能是一个更好的选择。

至于选择你的字体，[这里](http://www.blog.pythonlibrary.org/2011/04/28/wxpython-learning-to-use-fonts/)有一个关于字体如何在 wxpython 中工作的很好的教程。作者实际上是这里的活跃成员。特别是，在该文章中搜索他的“wx.FontEnumerator 小部件”示例。它应该允许您找到固定宽度的字体并查看它们以查看您是否喜欢它们。对于一个快速而简单的解决方案，[这个论坛帖子](http://wxpython-users.1045709.n5.nabble.com/Fixed-Font-in-Text-Control-td2298094.html)讨论了`wx.TELETYPE`保证固定宽度的标志，[这些代码示例](http://nullege.com/codes/search/wx.TELETYPE)应该让您了解如何使用它。

祝你好运！

----编辑----
我对 STC 不是很熟悉，但我记得我[之前回答](https://stackoverflow.com/questions/10866078/wxpython-change-the-background-colour-of-a-styledtextctrl/10867334#10867334)过一个涉及 STC 的问题，您可能需要`StyleClearAll()`在设置字体后调用该问题。有关为什么需要这样做的更多信息，请参阅该答案的编辑部分。

# python - python子进程设置shell var。然后运行命令 - 怎么样？

> ID：11834670
> 
> 赞同：10
> 
> 时间：2012-08-06T19:30:30.230
> 
> 标签：python, subprocess

我需要这样做：

```
$ export PYRO_HMAC_KEY=123
$ python -m Pyro4.naming 
```

所以，我发现第二个可能与

```
subprocess.Popen(['python','-m','Pyro4.naming']) 
```

但是在那之前如何导出shell变量？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-06T19:45:40.707

要更新现有环境...

```
import os, subprocess

d = dict(os.environ)   # Make a copy of the current environment
d['PYRO_HMAC_KEY'] = '123'
subprocess.Popen(['python', '-m', 'Pyro4.naming'], env=d) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T19:32:57.410

子流程函数接受一个`env`参数，该参数可以给定环境变量的映射以在流程中使用：

```
subprocess.Popen(['python','-m','Pyro4.naming'], env={'PYRO_HMAC_KEY': '123'}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:35:07.643

尝试 os.putenv()：[http ://docs.python.org/library/os.html#os.putenv](http://docs.python.org/library/os.html#os.putenv)

# ssis - 如何建立自引用表

> ID：11834672
> 
> 赞同：1
> 
> 时间：2012-08-06T19:30:40.670
> 
> 标签：ssis, logic, self-reference

在源表中，有两列，如下图所示：

![在此处输入图像描述](../Images/d8cd5e9532be3e6c817d6a3d12b114d4.png)

然后对于目标表，它应该是这样的：

![在此处输入图像描述](../Images/c9dd5b3d7c97206a372eb8b42529342d.png)

（*“DimLocationKey”是自动生成的代理键*）

如何在 SSIS 中实现自引用效果？我尝试了以下方法，但它不起作用，因为查找中没有匹配项。

![在此处输入图像描述](../Images/f80889bf3a0737a9ec636c381b4c5d3c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:46:44.910

如果该列可以为空，那么您可以加载 location_ID 的唯一值，然后让辅助进程返回并负责更新现有的并可能添加新的。

## 通过 1

```
1 NULL A NULL
2 NULL B NULL 
3 NULL C NULL
4 NULL D NULL 
```

我想如果它不可为空，那么您可以预先计算数据流中的这些 id 并将当前行和父级分配给自己。作为开发人员，我可能会因此而讨厌你 ;)

## 通过 2

此时，问题是表中应该有 8 行还是 4 行（无论您的源数据表明什么）。这成为业务用户的一个问题，适当地“降低了”。我已经在我的等级问题中看到了这两个答案——“总统向谁报告？” 在某个地方，总统没有向任何人报告，这意味着费用申请被自动批准。另一个地方有 CEO 自己报告，这意味着他们的费用报告仍然必须由他们自己批准。我想这是为了确保他们有行政责任，因为没有什么是自动的。

如果答案是 8 行，那么您的数据流看起来是正确的。如果它是 4，那么您将使用现有数据流，但改为更新行。如果它是一小组行，数百行，那么您可以使用 OLEDB 命令并编写您的更新语句。只需意识到它将为命中组件的每一行发出一个 UPDATE 语句。这会使您的处理陷入停顿，因为它的效率非常低。

更有效的更新途径是使用 OLE DB 目标，并且在数据流完成后，让执行 SQL 任务发出基于集合的 UPDATE 语句。请参阅 Andy Leonard 的[集成服务阶梯](http://www.sqlservercentral.com/articles/Stairway+Series/76390/)系列，了解如何执行此操作的编写良好的示例。

如果它不可为空并且不允许引用自身的节点，那么您的数据模型似乎没有准确描述

# java - jetty mysql 数据库连接池

> ID：11834679
> 
> 赞同：5
> 
> 时间：2012-08-06T19:31:24.537
> 
> 标签：java, mysql, database, servlets, jetty

我正在尝试做一些看似简单的事情：设置一个小型数据库连接池，以便 servlet（只是一个）不会以每秒 1 个连接的速度创建我的服务器。

上`Ubuntu 10.04`，通过最新的升级/更新，我正在使用`Eclipse Jetty 8.1.5.v20120716`. 我正在尝试连接到`MySQL 5.1`服务器。

我的 servlet 被调用`gcm`，所以在 中`${jetty}/contexts`，我有这个`gcm.xml`文件：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">
<Configure id="wac" class="org.eclipse.jetty.webapp.WebAppContext">
  <New id="jdbc/myds" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg></Arg>
    <Arg>jdbc/myds</Arg>
    <Arg>
      <New class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource">
        <Set name="Url">jdbc:mysql://localhost:3306/chat</Set>
        <Set name="User">root</Set>
        <Set name="Password">sillyness</Set>
      </New>
    </Arg>
  </New>
  <Set name="contextPath">/</Set>
  <Set name="war"><SystemProperty name="jetty.home" default="."/>/webapps/gcm</Set>
  <Set name="extractWAR">true</Set>
</Configure> 
```

当我使用 启动 Jetty 时`java -jar start.jar -port=8080`，一切都开始正常，直到我尝试从我的 servlet 访问数据库。请求的代码处理部分如下所示：

```
 public static List<String> getDevices()
    throws javax.naming.NamingException, java.sql.SQLException {
    synchronized (regIds) {
        InitialContext ctx = new InitialContext();
        DataSource ds = (DataSource)ctx.lookup("java:comp/env/jdbc/myds");
        Connection conn = null;
        Statement stmt = null;

        try {
            conn = ds.getConnection();

            stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery("select * from chatdevice");

        //blah,blah,blah... 
```

我得到的错误是：

```
 javax.naming.NameNotFoundException; remaining name 'jdbc/myds'
        at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:500)
        at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:531)
        at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:531)
        at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:546)
        at org.eclipse.jetty.jndi.java.javaRootURLContext.lookup(javaRootURLContext.java:112)
        at javax.naming.InitialContext.lookup(InitialContext.java:409) 
        at com.google.android.gcm.demo.server.Datastore.getDevices(Datastore.java:98) 
```

如何让 Jetty 找到数据库代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T11:57:47.257

就我而言，我去了码头邮件列表（[https://dev.eclipse.org/mailman/listinfo/jetty-users](https://dev.eclipse.org/mailman/listinfo/jetty-users)）问我的问题。

一个非常聪明的人（Hi Jan！）这样写和回答：

> 通常有许多不同的方法可以在 jetty 中实现相同的结果，所以这可能就是您看到不同方法记录的原因。通常有选择是一件好事
> 
> 如果有任何混淆，这是最终页面： [http](http://wiki.eclipse.org/Jetty/Feature/JNDI) ://wiki.eclipse.org/Jetty/Feature/JNDI如果缺少某些内容，请告诉我们以便我们更新页面。
> 
> 您的情况有点不寻常，因为您使用的是 javaee 风格的功能，但没有 web.xml。这不是我以前遇到过的，但听起来我应该添加到文档中。
> 
> 我建议（如上面的页面一样）将任何 jndi 定义放入 WEB-INF/jetty-env.xml 文件而*不是*上下文 xml 文件中。如果你这样做，那么你可以有效地做一个 web.xml 元素会做的事情，并将你的数据源绑定到 java:comp/env 命名空间，方法是定义你的资源并将它绑定到 java:comp/env 中（注意这个不能在上下文 xml 文件中工作，它*必须*是 jetty-env.xml）*：*
> 
>  *因此在 WEB-INF/jetty-env.xml 中执行以下操作：*

 *```
 <New  id="jdbc/myds"  class="org.eclipse.jetty.plus.jndi.Resource">
  <Arg></Arg>
  <Arg>jdbc/myds</Arg>
  <Arg>
    <New  class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource">
      <Set  name="Url">jdbc:mysql://localhost:3306/chat</Set>
      <Set  name="User">root</Set>
      <Set  name="Password">sillyness</Set>
    </New>
  </Arg>
  <Call name="bindToENC">
     <Arg>jdbc/myds</Arg>
  </Call>   
 </New> 
```

> 在对 bindToENC 的调用中，将您想要查找的任何名称绑定为 java:comp/env 的后缀。例如，如果您想查找 java:comp/env/my/foo 那么 bindToENC 参数将是“my/foo”。
> 
> -- Jan Bartel www.webtide.com – 来自 Jetty & CometD 专家的开发人员建议、服务和支持。_________________________________________________________ 码头用户邮件列表 jetty-users@eclipse.org [https://dev.eclipse.org/mailman/listinfo/jetty-users](https://dev.eclipse.org/mailman/listinfo/jetty-users)

现在，这还不够（我是码头新手）。所指的WEB-INF就是我的servlet的war文件里面的WEB-INF……所以我把war文件的内容解压到一个目录下，然后就可以轻松的把jetty-env.xml文件放到WEB中了-INF 目录。

这也很关键：

> 好的，我假设那里有一点码头知识，并且认为您会知道我发布的内容只是您需要拥有完整的 jetty-env.xml 文件的片段。
> 
> jetty-env.xml 文件的 wiki 页面在这里： [http ://wiki.eclipse.org/Jetty/Reference/jetty-env.xml](http://wiki.eclipse.org/Jetty/Reference/jetty-env.xml)
> 
> 因此，将根元素包装在我发布的片段周围，如该页面上所示，你应该很好。

现在 /that/ 得到了要尝试的数据库连接。`connection refused from 127.0.0.1`然后我在 /var/log/auth.log中遇到错误。

事实证明，我运行了拒绝主机，果然有人把它放在`ALL: 127.0.0.1`那里……这意味着与我的本地计算机的连接被拒绝。

一旦修复了这个细节，servlet 终于可以访问我服务器上的 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:30:10.003

尝试将此添加到 web.xml

```
<resource-ref>
    <res-ref-name>jdbc/myds</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```*

# flash - 重新编译庞大的空中工程

> ID：11834685
> 
> 赞同：0
> 
> 时间：2012-08-06T19:31:52.837
> 
> 标签：flash, apache-flex, air

我今天反编译了英雄联盟（以下简称 LoL）客户端，在其中我做了一个简单的更改。现在我需要重新编译，我遇到了一个问题。

我不擅长闪光，所以这可能是非常基本的。

LoL 的启动器是一个巨大的 adobe air（可能也有一些 flex）项目，其中所有内容都是相互连接的，并拆分为多个文件。这对我来说是个问题，因为我只想重新编译这个程序的一部分。

当我执行通常的文件>发布来编译它时，我得到 168 个错误，所有这些都与所有类都应该是电影剪辑的事实有关。它们不是，因为它们应该是其他“文件”的实例

示例错误：

```
<stuff>\mod_man.dat\CRLRoomEveIcon.as, Line 1    5000: The class 'CRLRoomEveIcon' must subclass 'flash.display.MovieClip' since it is linked to a library symbol of that type. 
```

示例文件：

```
package 
{
    import mx.flash.*;

    dynamic public class CRLRoomEveIcon extends UIMovieClip
    {

        public function CRLRoomEveIcon()
        {
            addFrameScript(0, this.frame1);
            return;
        }// end function

        function frame1()
        {
            stop();
            return;
        }// end function

    }
} 
```

我如何让 flash (CS 5.5) 意识到这些依赖关系，所以它会停止给我错误，并且已经编译了？

附言。这些错误的结果是 swf 中不包含任何动作脚本。

更新：在我发布这个之后，我想出了一个新的关键字来插入谷歌，谷歌返回了我认为它不工作的原因，flex 没有加载，我如何将 flex 加载到 flash 中？

# php - PHP magento cookie 加密

> ID：11834689
> 
> 赞同：0
> 
> 时间：2012-08-06T19:32:21.770
> 
> 标签：php, magento, cookies, encryption

我想设置一个cookie，但在检索时加密信息并解密。我可以使用任何 Magento 课程吗？

我正在运行 Magento 1.4.1.1，我正在设置我的 cookie：

```
 Mage::getModel('core/cookie')->set($name, $value, $period, $path, $domain, $secure, $httponly); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T19:40:23.707

在 Magento 中，您可以使用以下方法加密数据：

```
Mage::getModel('core/encryption')->encrypt($data); 
```

并使用以下方法解密：

```
Mage::getModel('core/encryption')->decrypt($data); 
```

# html - 使用 @fontface 更改 Jquery UI 字体

> ID：11834691
> 
> 赞同：0
> 
> 时间：2012-08-06T19:32:29.393
> 
> 标签：html, css, jquery-ui, fonts, font-face

我想使用@fontface 将Jquery UI 使用的字体系列更改为网络字体。我创建了自己的 css 文件，命名为*my.css*，并为它提供了以下 CSS：

```
@font-face {
    font-family: "Conv_mry_KacstQurn";
    src: url('fonts/mry_KacstQurn.eot#iefix') format('embedded-opentype'),
    url('fonts/mry_KacstQurn.woff') format('woff'), url('fonts/mry_KacstQurn.ttf') format('truetype'), url('fonts/mry_KacstQurn.svg') format('svg');
    font-weight: normal;
    font-style: normal;
}

body *{
font-family: "Conv_mry_KacstQurn";
} 
```

我的页眉部分的代码如下：

```
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>jQuery UI Example Page</title>
<link type="text/css" href="css/my.css" rel="stylesheet" />
        <link type="text/css" href="css/custom-theme/jquery-ui-1.8.22.custom.css" rel="stylesheet" />

        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>

        <script type="text/javascript" src="js/jquery-ui-1.8.22.custom.min.js"></script>

        <script type="text/javascript">
/* initiation of UI code */
</script>
<style type="text/css">
            /*demo page css*/
            body{ font: 62.5% "Conv_mry_KacstQurn", sans-serif; margin: 50px;}
            .demoHeaders { margin-top: 2em; }
            #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
            #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
            ul#icons {margin: 0; padding: 0;}
            ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
            ul#icons span.ui-icon {float: left; margin: 0 4px;}
        </style>
    </head> 
```

在 my.css 中使用 body * 可以使一切顺利，并且 Web 字体也在 Jquery UI 元素中呈现。**问题是当我想在页面中使用多个字体系列时。所以我想知道如何在不使用 body * 选择器的情况下设置要与 Jquery UI 元素一起使用的 Web 字体？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:01:03.097

感谢所有观众，我找到了答案。简单地说，它包括将两个链接的 css 文件的顺序替换为：

```
 <link type="text/css" href="css/custom-theme/jquery-ui-1.8.22.custom.css" rel="stylesheet" />

<link type="text/css" href="css/my.css" rel="stylesheet" /> 
```

然后从 css/custom-theme/jquery-ui-1.8.22.custom.css 复制以下 CSS 规则，然后将它们粘贴到 my.css 中，并将我想要的字体系列添加到那里找到的字体系列属性中：

```
 * Component containers
    ----------------------------------*/
    .ui-widget { font-family: "Conv_mry_KacstQurn",Verdana,Arial,sans-serif; font-size: 1.1em; }
    .ui-widget .ui-widget { font-size: 1em; }
    .ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: "Conv_mry_KacstQurn",Verdana,Arial,sans-serif; font-size: 1em; }
    .ui-widget-content { border: 1px solid #a6c9e2; background: #fcfdfd url(images/ui-bg_inset-hard_100_fcfdfd_1x100.png) 50% bottom repeat-x; color: #222222; }
    .ui-widget-content a { color: #222222; }
    .ui-widget-header { border: 1px solid #4297d7; background: #2191c0 url(images/ui-bg_highlight-hard_75_2191c0_1x100.png) 50% 50% repeat-x; color: #eaf5f7; font-weight: bold; }
    .ui-widget-header a { color: #eaf5f7; } 
```

就是这样，现在所有的 Jquery 元素都有我想要的字体系列。

# c# - 混合模式程序集是针对运行时版本“v1.1.4322”构建的，无法在 4.0 运行时中加载

> ID：11834694
> 
> 赞同：1
> 
> 时间：2012-08-06T19:32:39.340
> 
> 标签：c#, runtime, assemblies, mixed-mode

我正在尝试制作一个简单的视频播放器，所以我不会使用

Microsoft.DirectX.AudioVideoPlayback.dll

但是当我使用这个 dll 文件程序时会引发这个错误

> 混合模式程序集是针对运行时版本“v1.1.4322”构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。

在此代码中出现打开文件对话框之前

```
private void button1_Click(object sender, EventArgs e)
{
    int width = this.panel1.Width,
        height= this.panel1.Height;

    OpenFileDialog open = new OpenFileDialog();
    open.ShowDialog();

    ss = new Video(open.FileName, false);

    ss.Owner = panel1;
    ss.Size = new Size(width, height);

    ss.Play();
    ss.Stop();
} 
```

我正在搜索这个，我在 StackOverflow 上找到了一些解决方案：

1.  [在发布模式下构建时出现混合模式错误](https://stackoverflow.com/questions/9159776/mixed-mode-error-when-building-in-release-mode)
2.  [混合模式程序集是针对运行时的“v1.1.4322”版本构建的，不能](https://stackoverflow.com/questions/10641006/mixed-mode-assembly-is-built-against-version-v1-1-4322-of-the-runtime-and-cann)
3.  [混合模式程序集是针对版本“v1.1.4322”构建的](https://stackoverflow.com/questions/4018924/mixed-mode-assembly-is-built-against-version-v1-1-4322)

但我不知道如何解决这个错误，所以任何人都有另一种解决方案，或者可以解释其中的任何一个。如果需要编辑文件，请告诉我该文件的位置。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T19:44:22.960

您正在寻找的是您的应用程序的 App.config。它应包含以下 xml：

```
<?xml version="1.0" encoding="utf-8" ?> 
<configuration> 
  <startup useLegacyV2RuntimeActivationPolicy="true"> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/> 
  </startup> 
</configuration> 
```

此信息显示在您提供的链接中。

# php - 将数组解析为灯箱注释

> ID：11834695
> 
> 赞同：0
> 
> 时间：2012-08-06T19:32:39.410
> 
> 标签：php, arrays, parsing, explode

好吧，伙计们再次需要你的帮助，

以前你们都给我介绍过灯箱，经过一些调整后效果很好。除了在使用我的 php 代码时，似乎没有办法为图像添加标题。现在我的一个朋友向我介绍了使用 .txt 文件的数组。现在这一切都很好，但我似乎无法获得我们想出的代码来正确读取文件。目前它正在随机拉出字母“a”和字母“p”并分配它，我不知道它从哪里得到这个。

现在这是我想出的用于获取文件内容的代码。

```
 <?php
    // process caption file into named array

    //open the file
    $myFile = "captions.txt";
    $fh = fopen($myFile, 'r') or die("Can't open file");

    $theData = explode(fread($fh, filesize($myFile)),"\n");

    //close the file
    fclose($fh);

    //parse line by line until there is no data left.
    foreach ($theData as $item => $line) {
     $exploded = explode("=", $line);
     if (count($exploded) == 2) {
     $myFile[$exploded[0]] = $exploded[1];
     }
    }

    ?> 
```

然后我使用自动填充我的相册的代码依次激活 lightbtox。

```
 <?php

                    $images = glob('*.{jpg,jpeg,png,gif}', GLOB_BRACE);

                    foreach ($images as $image) {
                        if (file_exists("./thumbs/{$image}")){
                            echo "<a href=\"{$image}\" rel=\"lightbox[gallery]\" title=\"" . $myFile[$image] . "\" style=\"margin-left:25px; margin-right:25px; margin-top:30px; display:inline-block; border:5px solid #fff;\"><img src=\"thumbs/{$image}\" alt=\"{$image}\" /></a>";
                        }
                    }

                    ?> 
```

使用此代码不会产生错误，但无法正确读取字幕文件。

我想要做的是设置文本文件，文件名由 a = 分隔，然后是标题。

如果有人想看一下，这是我的测试页面的链接。

[http://outtamymindphoto.myftp.org/images/testalbum/testpage.php](http://outtamymindphoto.myftp.org/images/testalbum/testpage.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:50:36.267

您应该从修复此行开始：

```
$theData = explode(fread($fh, filesize($myFile)),"\n"); 
```

根据 PHP Manual ，分隔符是第一个参数。

```
(array explode ( string $delimiter , string $string [, int $limit ] )) 
```

（阅读更多关于`explode`- [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)）

正确的方式：

```
$theData = explode("\n" , fread($fh, filesize($myFile))); 
```

您还应该尝试输出变量以定位问题。例如，用于`var_dump($var)`检查`$var`s 值。

希望我对您有所帮助，如果您需要进一步的帮助，请发表评论。

# css - 缩小时 div 位移的特殊问题

> ID：11834699
> 
> 赞同：0
> 
> 时间：2012-08-06T19:33:01.547
> 
> 标签：css, html

编辑：

在上面的网站上，每当我缩小 Firefox 时，主要内容 div 都会向右移动。这个问题只存在于 Firefox 中，不存在于 Internet Explorer、Opera 或 chrome 中。有人可以帮我解决这个问题吗？

编辑2：

我不希望 div 在 Firefox 中取代。抱歉第一个问题，我很着急，但现在应该清楚了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:50:58.727

如果你给 float:left; 到 .wrapper 元素和 ul.menu 一切都会好的 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:52:55.253

您遇到的问题不在于班级，`#content`而在于班级`wrapper`。如果您`overflow:hidden`从课程中删除规则，问题就会消失。看起来包装类也与您的按钮栏相关联。

我建议从包含所有页面内容的 div 中删除包装器，而是使用只有`width="100%"`.

# android - 在后台激活摄像机

> ID：11834702
> 
> 赞同：0
> 
> 时间：2012-08-06T19:33:08.097
> 
> 标签：android, camera

我想在我的应用程序在后台时激活摄像机。
所以为了做到这一点，我创建了一个启动/停止摄像机的服务......

问题是我需要`SurfaceView`在主要活动中创建一个（在我的情况下调用该服务的那个），以便`setPreviewDisplay`. 但是当我的应用程序在后台时，我得到了`Application lost the surface`错误。

我知道我需要一个`SurfaceView`才能激活摄像机，但是当我的应用程序在后台时，有更好的解决方案来激活摄像机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:39:10.860

我不确定我是否完全理解这个问题，但我认为问题在于 Service 真的不打算像 Activity 那样处理与 UI 相关的类。

尝试将所有相机代码（包括 SurfaceView 设置）打包到一个 Activity 中。然后让您的服务通过启动该 Activity 的 Intent 来调用该 Activity。基本上，Service 所做的只是决定何时需要相机，然后启动 Activity。

我假设您对相机预览将出现在屏幕上这一事实感到满意。

# java - 在间隔上运行 while 循环

> ID：11834703
> 
> 赞同：2
> 
> 时间：2012-08-06T19:33:10.627
> 
> 标签：java

我正在构建一个非常强调物理的游戏。因此，我需要游戏以非常特定的间隔运行。当前代码：

```
public double period = .02; //this is the run interval in seconds

//main gameLoop
public void gameLoop(){
    long startTime;
    long sleep;

    while(running){
        startTime = System.nanoTime();

        Graphics2D g = s.getGraphics();
        operateEntities(g);
        g.dispose();
        s.update();
        //figure out how long it must sleep to take .02s altogether
        sleep = ((int)(period*1000) - (System.nanoTime() - startTime)*100000);
        try{
            if(sleep > 0){
                Thread.sleep(sleep);
            }else{
                System.err.println("Warning: program runtime exceeded period");
            }
        }catch(Exception ex){}

        gameTime += period;
    }
} 
```

这没有按预期工作。目前，主线程正在执行而根本没有休眠，并且正在触发“警告：程序运行时间超过期限”警告。

以前我使用 System.currentTimeMillis()，但它对我的目的不够准确，所以我切换到 System.nanoTime()

增加周期实际上可以加快程序的速度，而减少它会减慢它的速度。

有简单的逻辑吗？我对 System.nanoTime() 的理解是否关闭？还是有更好的方法来运行方法操作实体，处置，并在特定的时间间隔更新？

编辑：为了记录，该程序完成时间不超过 0.02 秒。它已经过测试

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T19:36:48.343

纳秒小于毫秒，因此，要转换 nanos -> millis，您必须除以 100000，而不是乘以它；

```
 //figure out how long it must sleep to take .02s altogether
    sleep = ((int)(period*1000) - (System.nanoTime() - startTime)*100000); 
```

应该改为

```
 //figure out how long it must sleep to take .02s altogether
    sleep = ((int)(period*1000) - (System.nanoTime() - startTime)/100000); 
```

您当前的代码正试图睡眠 200 毫秒减去一个大数字，使睡眠为负数，并为您提供“警告：程序运行时间超出期限”输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:43:59.213

分解你的代码有很多问题：

```
//Multiplies by 100,000 rather than divides.
sleep = ((int)(period*1000) - (System.nanoTime() - startTime)*100000);
//Note that sleep here is a very small number minus a very large number: probably negative.

try{
  if(sleep > 0){//If positive, sleep
    Thread.sleep(sleep);
  } else{//throws an error in all other cases.
    System.err.println("Warning: program runtime exceeded period");
  }
}catch(Exception ex){}//Empty exception handling poorly handles the thread.sleep() Exception requirement. 
```

除非您使`period`值更大，否则此代码将始终出错。但是，即使除此之外，您的方法也不太可能产生您想要的结果：准确的计时。你的核心循环是什么：

*   计算物理时间 0.02 秒。
*   去睡觉。
*   检查现在是什么时间。
*   如果特定时间段（0.02 秒）已过，则继续，否则再次休眠。
*   重复。

如果时间片足够小，这将是准确的。但是，线程不是那样工作的。您无法保证线程何时唤醒。它可能永远不会。可能在三秒钟内。它可能是即时的。无论您的时间段是多少，您都有可能会超调，而且您实际上永远不会完全按时完成。

您不需要依赖特定的增量周期，而是需要按实际过去的时间段来缩放所有物理场，而不是每次都依赖于持续经过的特定时间段。

*   去睡觉。
*   找出已经过去了多少时间。
*   计算那个时间段的物理。
*   重复。

您仍然需要一小段时间来休眠，但是这样可以消除线程调度程序引入的错误。

# css - CSS：div 边框似乎有阴影

> ID：11834710
> 
> 赞同：3
> 
> 时间：2012-08-06T19:33:43.230
> 
> 标签：css, border, background-image

我有 3 个 div 在包含 div 中彼此相邻浮动。最左边的 div 和中间的 div 在右边都有一个边框。每个 div 都有一个背景图像。正如您在图片中看到的，两个（右）边框在中间看起来更暗，在顶部和底部看起来更亮。![在此处输入图像描述](../Images/b823e099152084e5e11c08e2ab721b5d.png)

当我从中间 div 中删除背景图像时，边框的阴影似乎较少。![在此处输入图像描述](../Images/7fb08f3da4248778888a28bb2f879b9c.png)

当我去掉所有三个背景图像时，边框显示为纯色，就像 CSS 指示的那样。

![在此处输入图像描述](../Images/24ec1ac1dc3eabf9b6032d1e02b4bfb8.png)

这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T19:36:58.497

您看到的错误是一种视错觉。查看 MSPaint 中的颜色。

# php - MySQL表中的日期格式

> ID：11834711
> 
> 赞同：1
> 
> 时间：2012-08-06T19:33:46.740
> 
> 标签：php, mysql, date

我在 MySQL 表中有以下两个名称：

`message`是类型`text`

`date`是类型`datetime`

```
<?php
while($row=mysql_fetch_array($result)){
?>
<tr>
     <td><div><a><? echo $row['message'] ?></a></div></td>
     <td><div><a><? echo $row['date']; ?></a></div></td>
</tr>
<?php
 }
?> 
```

上表的输出以这种格式显示日期 2012-08-05 17:43:57

如何以这种格式打印日期 2012-08-05（没有时间）？

我无法在 MySQl 中更改类型 datetime （在不同格式的不同页面中需要它）。

我尝试了以下方法，但没有帮助（根本不打印）

```
<td><div><a><? echo $rows['date'](“Y-m-d”); ?></a></div></td> 
```

ps 其他日期格式组合给我语法错误。

任何建议将不胜感激，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:34:58.217

你要

```
<?php echo date('Y-m-d', strtotime($row['date'])); ?> 
```

[strtotime](http://php.net/manual/en/function.strtotime.php)将您的日期字符串转换为 unix 时间戳

然后，[日期](http://php.net/manual/en/function.date.php)函数根据字符串对其进行正确格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:35:50.493

您想要`date()`更改格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:36:26.190

您应该使用[格式功能](http://php.net/manual/es/datetime.format.php)

```
echo new DateTime($row['date'])->format('Y-m-d'); 
```

更新感谢@Erty

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:37:41.650

在 MS-SQL 和 Oracle 中有一种称为 TO_CHAR 方法的方法，您可以在其中传递您想要的日期格式，因此在获取数据时您可以更改它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T19:38:11.433

[http://php.net/manual/en/datetime.format.php](http://php.net/manual/en/datetime.format.php)

```
 <td><div><a><? echo new DateTime($row['date'])->format('Y-m-d'); ; ?></a></div></td> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T19:42:42.033

您首先需要将其转换为日期：

```
$tmpdate = strtotime($row['date']);
$date = date('Y-M-d', $tmpdate);
echo $date; 
```

当然，正如其他人所建议的那样，您可以缩短它，但我更喜欢“漫长的道路”以提高可读性并帮助您在将来返回并查看旧代码时更快地加快速度。:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T19:46:59.617

其他人都建议你用 php 来做，我总是用 mySQL 自己的日期函数来做：

```
SELECT ... DATE_FORMAT(Date_Field ,'%Y-%e-%c') ... 
```

[日期格式](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# jquery-autocomplete - jQuery自动完成：想要更改输入字段的值并重新触发搜索

> ID：11834716
> 
> 赞同：0
> 
> 时间：2012-08-06T19:34:15.583
> 
> 标签：jquery-autocomplete

我使用[Rails3 jQuery 自动完成插件](https://github.com/crowdint/rails3-jquery-autocomplete)有这个很好的自动完成功能，但是在“后挂钩”中（不知道这是否是正确的描述）我想改变值并重新触发自动完成。

```
<script type="text/javascript" charset="utf-8">
  $('#position_name').bind('railsAutocomplete.select', function(event, data) {
    // Remove the placeholder from the value and set selection range into it!
    if(this.value.indexOf('"(.+)"') >= 0) {
      placeholder_content_index = this.value.length - 5;
      this.value = this.value.substr(0, placeholder_content_index) + '"';
      this.setSelectionRange(placeholder_content_index, placeholder_content_index);
    }
  });
</script> 
```

到目前为止，除了重新触发自动完成调用外，一切正常。我已经尝试过诸如`$("#position_name").change();`, `this.change()`,`this.trigger("change")`等之类的东西，但是没有用。非常感谢您为我指明了正确的方向！

# php - 将php值解析为点燃的数据表

> ID：11834722
> 
> 赞同：0
> 
> 时间：2012-08-06T19:34:33.637
> 
> 标签：php, datatables

希望还有其他人一直在使用 ignited 数据表*交叉手指*......我已经尝试了一段时间，但为什么它根本不让我使用 PHP 值是没有意义的 -->

```
include $DOCUMENT_ROOT.'/include/config.inc';
include $DOCUMENT_ROOT.'/include/session_check.inc';

require_once($DOCUMENT_ROOT.'/include/Datatables.php');
$datatables = new Datatables();

// MYSQL configuration
$config = array(
'username' => $dbuser,
'password' => $dbpass,
'database' => $dbname,
'hostname' => $dbhost);

$datatables->connect($config);

$datatables
->select('users.id as user_id, users.name as realname, users.username as username, users.email as email, users.phone as phone, domain.name as domain_name')
->from('users')
->join('domain', 'domain.id = users.domain_id', 'left')
->where('users.domain_id = "$domain_id"')
->add_column('available', '$1', 'available(available)')
->add_column('edit', '<a href="/wh.php?edit=1&id=$1" title="Purge the info for this Stock"><img src="/images/icons/dark/pencil.png" border="0"></a>', 'stock_id')
->unset_column('user_id');

echo $datatables->generate(); 
```

现在，价值 $domain_id 根本不可用。我想知道我放错了还是在这样的字符串组合中可以接受？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:48:19.037

好的..我的错误..而不是线

```
->where('users.domain_id = "$domain_id"') 
```

我应该用这个

```
->where('users.domain_id', $domain_id) 
```

现在一切正常..thanx 无论如何:-)

# python-2.7 - WSGI 后处理清理

> ID：11834730
> 
> 赞同：0
> 
> 时间：2012-08-06T19:35:03.460
> 
> 标签：python-2.7, replication, mod-wsgi, pymongo, ming

我正在运行一个带有 mod_wsgi 和 apache 的 TurboGears 应用程序，使用用 Ming 包装的 pymongo 来实现持久性。为了防故障和扩展我的应用程序，我有兴趣通过 pymongo [ReplicaSetConnection](http://api.mongodb.org/python/current/api/pymongo/replica_set_connection.html)使用 mongo 对副本集的支持。

但是，如上述链接中所述，必须`close()`在处理完每个 pymongo`ReplicaSetConnection`对象后调用，否则会留下一堆僵尸进程（wtf pymongo）。Ming 不太支持这种行为（它实际上还没有真正支持 Replica Sets），但我设法编写了一个清理函数来关闭所有 pymongo 连接。

现在我想对我的所有应用程序进程的进程清理运行我的清理功能。它们有两个基本入口点：通过 apache 和 paste 命令的 mod_wsgi。将我的清理添加到 paste 命令中是没有问题的，但是有没有办法为 wsgi 进程指定清理功能？

如果没有，还有其他正确设置的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:08:32.167

您无法保证您的代码甚至会被调用，因为进程可能会在调用之前崩溃或被强制退出。有了这个警告，请阅读有关此特定问题的 mod_wsgi 文档：

[http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode](http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:07:25.057

TurboGears 本身也提供了**关闭**钩子，可以使用 config/app_cfg.py 中的 base_config.register_hook 进行注册。

只要进程存在，就会调用关闭挂钩

# php - PHP脚本未从列中获取数据

> ID：11834732
> 
> 赞同：0
> 
> 时间：2012-08-06T19:35:09.810
> 
> 标签：php, mysql, sql, database

我有一个带有字段的数据库`Unique ID`，其中有两行，都是整数。第一行有值`3`，第二行有`4`。此脚本的目的是找到具有最高值的那个，但它只是`echo`“唯一 ID”。

这是代码：

```
<?php
$connection = mysql_connect("localhost","root");

if(!$connection) {
die("Connection Failed" . mysql_error());
}
mysql_select_db("rewiredstate",$connection);
$max="SELECT MAX('Unique ID') as id FROM topics";
$maxquery= mysql_query($max) or die (mysql_error());
while($row = mysql_fetch_assoc($maxquery)) {
echo $row['id'];
}
?> 
```

有没有人对它可能有什么问题有任何想法？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:38:22.393

我认为你需要不同的引号 - ` 而不是 '

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:51:07.117

像这样删除唯一 ID 周围的引号：

```
$max="SELECT MAX(Unique ID) as id FROM topics"; 
```

您查询中的错误是，您在 MAX 函数中的字段名称周围使用了错误的引号。根据您的查询，为 MAX 函数提供了一个字符串作为参数，它与表中没有实际字段值进行比较。这就是它在结果中返回**唯一 ID**的原因。

您需要使用 MAX( `field`) 或者您可以选择根本不使用引号，例如 MAX(field)。但肯定不是 MAX('field')。

# visual-studio-2010 - Windows Phone 模拟器出错

> ID：11834736
> 
> 赞同：0
> 
> 时间：2012-08-06T19:35:36.350
> 
> 标签：visual-studio-2010, windows-phone-7, xna-4.0

我正在尝试让我的 Windows Phone 开发重新启动并运行。

我在模拟器上遇到了严重的问题，它看起来像这样[http://imgur.com/qM4uj](http://imgur.com/qM4uj)

这是我的信息。在具有四核 proc 和良好视频卡的计算机上运行 windows 8。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T00:31:56.453

此页面可能会有所帮助：

[http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/5b659eea-9a4f-45ce-8418-b9097d586197/](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/5b659eea-9a4f-45ce-8418-b9097d586197/)

> Emulator Video 在运行 XNA 或 Silverlight + XNA 游戏时出现损坏。Windows Phone SDK 7.1.1 中包含的模拟器图像与某些视频卡或视频卡驱动程序存在兼容性问题。当系统托盘可见时，在横向使用 XNA 图形渲染引擎时，该问题显示为损坏的显示。
> 
> 要解决此问题：XNA 游戏应将方向设置为纵向： graphicsDeviceManager.SupportedOrientations = DisplayOrientation.Portrait;
> 
> - 或 - 启用全屏模式：graphicsDeviceManager.IsFullScreen = true;
> 
> 使用横向页面方向的 Silverlight + XNA 游戏应禁用系统托盘：

```
<phone:PhoneApplicationPage  
    SupportedOrientations="Landscape" Orientation="LandscapeLeft" 
    shell:SystemTray.IsVisible="False" 
```

# android - 我可以确定对 Activity 的引用是否有效？

> ID：11834738
> 
> 赞同：4
> 
> 时间：2012-08-06T19:35:40.507
> 
> 标签：android, android-asynctask, android-activity

如果 an`Activity`已被销毁，但 an`AsyncTask`仍然具有对该对象的引用，有没有办法直接查询引用（已销毁）的活动以确定 是否`Activity`仍然有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:53:59.507

在`onDestroy()`Activity的方法中，设置一个标志，表示Activity被销毁。

此外，在`AsyncTask`添加 a`WeakReference`而`Activity`不是普通引用。

在 的`onPostExecute()`方法中`AsyncTask`，如果 Activity`WeakReference`仍然有值，则 Activity 仍然存在，并且`Activity`自身的标志仍然设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:43:39.323

试着保持`WeakReference`你的活动。

```
WeakReference<Activity> ref = new WeakReference<Activity>(activity);
… … …
Activity activity = ref.get();
if (activity != null) {
    // DO SOMETHING
} 
```

# javascript - Phonegap (Android) - 数据库 changeVersion 不起作用

> ID：11834739
> 
> 赞同：0
> 
> 时间：2012-08-06T19:35:45.473
> 
> 标签：javascript, android, cordova

如果我获取一个数据库对象（db）并使用命令打开它

```
var db = window.openDatabase("phr", "", "Cognovant PHR", 25000000);
// This should open whatever database is created, otherwise spawn one with a blank
// version number ("") 
```

然后再做：

```
db.changeVersion(db.version, "2"); // Update database to version 2
console.log(db.version); //Should return "2", instead returns previous version of database 
```

这段代码在 iOS 上逐行运行完美（几乎比我希望的要好），但在 Android 上总是无法更改数据库版本。

如果有更好的方法可以做到这一点，或者需要在 Android 上完成一些替代方法，我将非常感谢这些信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:16:26.643

这实际上很容易解决。

只需将 db.changeVersion 的 2 参数版本更改为 3 参数版本。例子：

`db.changeVersion(db.version, "2", function () {console.log("foobar")});`

它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:28:46.167

Android 2.2 也会出现这个问题。

> 09-28 07:15:14.954：E/Web 控制台（280）：TYPE_MISMATCH_ERR：DOM 异常 17：对象的类型与与对象关联的参数的预期类型不兼容。在文件：///android_asset/www/devbar/03%20db.js:158

我看到的唯一解决方案是使用我自己的版本管理来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T06:02:59.027

请通过以下链接，描述实现数据库版本控制的方式。

[http://developer.apple.com/library/safari/#documentation/iphone/conceptual/safarijsdatabaseguide/UsingtheJavascriptDatabase/UsingtheJavascriptDatabase.html](http://developer.apple.com/library/safari/#documentation/iphone/conceptual/safarijsdatabaseguide/UsingtheJavascriptDatabase/UsingtheJavascriptDatabase.html)

我能够对所有 2.3.x 设备进行成功操作，但使用 4.xx android 设备会出现“无法调用方法 changeVersion”之类的问题，并且说方法未定义。

暂时我正在使用如下代码，

```
if (db.changeVersion) {
    db.changeVersion(oldVer, curVer, upgradeTableStructure, errorHandler, successDataHandler);
} else {
    createTableStructure(db);//If Not exist for first time for 4.x.y devices
    console.log('version changes not possible in this browser version.');
} 
```

但这不是当前问题的正确解决方案，请提出一些解决方案。

# android - 将字符串从 Android Java 活动传递到广播接收器

> ID：11834742
> 
> 赞同：2
> 
> 时间：2012-08-06T19:35:56.910
> 
> 标签：android, string, broadcastreceiver

在过去的几个小时里，我一直在查看有关该主题的其他问题，但我发现没有一个能够给我任何答案。

在后台将字符串从活动传递到广播接收器的最佳方法是什么？

这是我的主要活动

```
public class AppActivity extends DroidGap {
 SmsReceiver mSmsReceiver = new SmsReceiver();

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     

    ScrollView scroll;
    scroll = new ScrollView(this);

    Bundle bundle = getIntent().getExtras();
    final String ownAddress  = bundle.getString("variable");

    registerReceiver(mSmsReceiver, new IntentFilter("MyReceiver"));
             Intent intent = new Intent("MyReceiver");
              intent.putExtra("passAddress", ownAddress);
             sendBroadcast(intent);

            Log.v("Example", "ownAddress: " + ownAddress);
 }
} 
```

这是我的广播接收器

```
public class AppReceiver extends BroadcastReceiver {
 public void onReceive(Context context, Intent intent) {

    final String ownAddress  = intent.getStringExtra("passAddress");
    Toast test = Toast.makeText(context,""+ownAddress,Toast.LENGTH_LONG);
    test.show();

    Log.v("Example", "ownAddress: " + ownAddress);

 }
} 
```

这是我的接收器的清单

```
<service android:name=".MyService" android:enabled="true"/>
 <receiver android:name="AppReceiver">
            <intent-filter android:priority="2147483647">
                <action android:name="android.provider.Telephony.SMS_SENT"/>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
 <receiver>
<service android:name=".MyServiceSentReceived" android:enabled="true"/>
 <receiver android:name="AppReceiver">
                <intent-filter android:priority="2147483645">
                    <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
                    <action android:name="android.intent.action.BOOT_COMPLETED" />
                </intent-filter>
 </receiver> 
```

当广播接收器记录一个事件时，应用程序崩溃。我需要让它在幕后运行，并从我的主要活动中拉出一根绳子。

任何人都可以帮助我或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:04:39.923

**从评论和聊天中添加**

您的 String`ownAddress`将始终为 null ，除非 Intent 具有带有`passAddress`Bundle extras 中的键的 String。任何时候您的 Receiver 捕获到一个 Intent （无论是来自`SMS_SENT`、`SMS_RECEIVED`还是`BOOT_COMPLETED`）`ownAddress`都将为空，因为操作系统不提供额外的 String 命名为`passAddress`. 希望这能说明问题。

**原始答案**

我没有使用过 DroidGap，但这是你想要的常规 Android 活动。

活动：

```
public class AppActivity extends Activity {
    AppReceiver mAppReceiver = new AppReceiver();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        registerReceiver(mAppReceiver, new IntentFilter("MyReceiver"));

        String string = "Pass me.";
        Intent intent = new Intent("MyReceiver");
        intent.putExtra("string", string);
        sendBroadcast(intent);
    }
} 
```

接收者：

```
public class AppReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, intent.getStringExtra("string"), Toast.LENGTH_LONG).show();
    }
} 
```

不要忘记在 onDestroy() 中取消注册接收器，如下所示：

```
@Override
protected void onDestroy() {
    unregisterReceiver(mAppReceiver);
    super.onDestroy();
} 
```

# c# - 如何在 httpwebrequest 中使用 libcurl 保存的 cookie？

> ID：11834744
> 
> 赞同：1
> 
> 时间：2012-08-06T19:36:05.863
> 
> 标签：c#, winforms, visual-studio-2010, cookies, httpwebrequest

我开发了一个用于发布的应用程序，但是它不适用于多线程处理某些`libcurl`我无法解决的发布方法中的问题。所以我想`HTTPWEBREQUEST`改用它。

我将 cookie 保存在带有帐户用户名的 txt 文件中，我该如何使用它们`HTTPWEBREQUEST`

简单来说，我的问题是如何从保存的 txt 文件中检索 cookie，`libcurl`以便 `cookie container`我可以使用它`HTTPWEBREQUEST`

txt文件如下：

```
# Netscape HTTP Cookie File
# http://www.netscape.com/newsref/std/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

www.example.com FALSE   /   FALSE   10  _lipt   deleteMe
.example.com    TRUE    /   FALSE   1407285025  bcookie "v=2&20ed7c4b-de0d-4a49-9e89-b2260988e566"
www.example.com FALSE   /   FALSE   1351985424  leo_auth_token  "LIM:187682881:a:1344209425:6b1292e2a3dfd0f7f40d4fc7bb196457ca9f3e04"
www.example.com FALSE   /   FALSE   10  sl  "delete me"
www.example.com FALSE   /   TRUE    0   s_leo_auth_token    "LIM:187682881:s:1344209425:eb957b29be2d103d418a49888733167af66c37cd"
www.example.com FALSE   /   FALSE   0   JSESSIONID  "ajax:00000000000000"
www.example.com FALSE   /   FALSE   1407285025  visit   "v=1&M"
www.example.com FALSE   /   FALSE   10  li_a    "delete me"
www.example.com FALSE   /   FALSE   10  mst "delete me"
www.example.com FALSE   /   FALSE   10  li_at   "delete me"
.example.com    TRUE    /   FALSE   0   lang    "v=2&lang=en-us"
www.example.com FALSE   /uas/   FALSE   0   X-LI-IDC    C1
www.example.com FALSE   /   FALSE   0   X-LI-IDC    C1 
```

更新

网络浏览器是否也有 cookie，我们可以使用以下方式进行检索：

```
 string[] array = webBrowser1.Document.Cookie.Split(new char[]
                        {
                            ';'
                        });
                for (int i = 0; i < array.Length; i++)
                {
                    string cookie = array[i];
                    string name = cookie.Split(new char[]
                            {
                                '='
                            })[0];
                    string value = cookie.Substring(name.Length + 1);
                    string path = "/";
                    string domain = "turn14.com";
                    yummycookies.Add(new Cookie(name.Trim(), value.Trim(), path, domain));
                } 
```

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:39:13.930

您需要创建一个`CookieContainer`，它存储 HttpWebRequest 的 cookie。

您可以从文件中解析 cookie 并将它们添加到 CookieContainer。

# javascript - 使用 Selenium IDE 从字符串中提取数字

> ID：11834751
> 
> 赞同：1
> 
> 时间：2012-08-06T19:36:27.860
> 
> 标签：javascript, selenium, selenium-ide

我已经查看了这个问题的几十个答案，并尝试了所有这些答案，但无法让其中任何一个起作用。我敢肯定这是非常简单的事情，但这就是我想要做的；

我需要从字符串中提取一个数值，然后比较它是否大于或等于一个数字。我正在使用 Selenium IDE。

字符串很简单，数字`XXX Total matches`在哪里`XXX`。我已经使用 存储了这个字符串`storeText`，将它存储在一个适当命名的变量中，String。

然后我运行一个`echo`命令来显示“字符串”以确保该部分正确，并按预期显示“XXX 总匹配”字符串。

我尝试了几种提取字符串数字部分的方法，包括正则表达式、javascript等。

“似乎”工作的是`storeeval | String=String.slice(0, 2); | Number`，但是当我尝试回显 Number 时，它什么也没显示。

我试过了

```
javascript{(${String}.match(/\\d+/))}

javascript{parseInt(${String}, 10);}

javascript{parseInt(${String})} 
```

但是当我尝试这些时，我在 selenium IDE 中遇到错误

```
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-core/scripts/selenium-api.js, lineNumber -> 2531 
```

我确定这可能是一个基本的新手错误，但我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:51:32.957

storeXXX 结果的变量设置为 storedVars。
尝试跟随。

```
storeText id=numAndString text 
storeEval storedVars['text'].match(/^\d+/); num 
echo ${num} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:55:33.310

您可以通过以下代码拆分该数字字符串 -

```
store | XXX Total matches  | string
store | 0 | delimiter
store | javascript{storedVars['string'].split('Total')[storedVars['delimiter']]} | number
echo  | ${number}

Result - XXX 
```

# mysql - MySQL Join 未产生所需结果

> ID：11834754
> 
> 赞同：1
> 
> 时间：2012-08-06T19:36:34.813
> 
> 标签：mysql, modx

我正在为 ModX 编写一个片段，它将找到具有指定电视机的所有文档到用户提交的值。

这是我正在使用的表的描述。 [http://wiki.modxcms.com/index.php/Template_Variable_Database_Tables](http://wiki.modxcms.com/index.php/Template_Variable_Database_Tables)

这是我的查询：

```
SELECT contentid 
FROM prefix_site_tmplvar_contentvalues
JOIN prefix_site_tmplvar_contentvalues
ON prefix_site_tmplvars.id = prefix_site_tmplvar_contentvalues.tmplvarid
WHERE value="Red" 
```

目前它正在产生如下结果： http: [//pastebin.com/mEJ1w2be](http://pastebin.com/mEJ1w2be)

每个文档 ID 在每个模板变量的结果中都会有一个新行。因此，对于示例中的 7455，将有一个数组用于 color="red" 一个用于 material="wood" 一个用于 size="small"。如果我想找到一个红色的、小的、由木头制成的产品，这就很难了。

有没有一种方法可以加入这些表，这样我就可以为每个产品获取一个带有文档 ID 的行和一组具有关联值的模板变量——而不是全部分解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:48:16.210

尝试

```
GROUP BY contentid 
```

这会将具有相同 contentid 的所有行混合在一起。

# python - 简单的 XPath 表达式在 Python 中不起作用

> ID：11834756
> 
> 赞同：2
> 
> 时间：2012-08-06T19:36:40.493
> 
> 标签：python, xpath, python-2.7, scrapy

我正在尝试解析 Web 文档（基于表格设计），并且我有一个带有表格的 div。

```
<div id="component">
   <table ...>
      .... 
```

如果我尝试：

```
XmlXPathSelector(response).select("//*[@id='component']") 
```

这有效：

```
[<XmlXPathSelector xpath="//*[@id='component']" data=u'<div xmlns="http://www.w3.org/1999/xhtml'>] 
```

但是，如果我想列出包含的表：

```
XmlXPathSelector(response).select("//*[@id='component']/table") 
```

这将返回一个空结果。我尝试了其他选择器，例如`"//*[@id='component']/tr"`and ，`"//*[@id='component']/a"`但那些也不起作用。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:04:55.947

:PI 解决了这个问题，我使用的是 XmlPathSelector 而不是 * *HTML* *PathSelector

# reflection - 按名称检索属性

> ID：11834759
> 
> 赞同：2
> 
> 时间：2012-08-06T19:37:03.367
> 
> 标签：reflection, binding, javafx-2

我正在努力为 javafx 创建一个动态视图生成实用程序。我有一些具有 ObjectProperty 或 StringProperty 的类，我想为每个属性创建一个 ComboBox，并尽可能按名称将组合选择的值直接绑定到 Class 属性。在任何 javafx.beans.binding 中是否有一些帮助程序或方法允许我指定一个对象和一个字符串名称并检索属性。或者只是检索属性列表。我现在有一个方法，它获取字符串并按名称将其与属性匹配，但它要求我为对象上的每个属性都有一个案例，在具有 20 多个属性的对象上是很多重复的代码。

我想指定我正在寻找 javafx.bean.property 作为返回类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:08:48.213

您始终可以使用[Java 反射](http://docs.oracle.com/javase/6/docs/technotes/guides/reflection/index.html)。

获取属性列表

```
for (Method method : Node.class.getMethods()) {
    String name = method.getName();
    if (name.endsWith("Property")) {
        Type returnType = method.getReturnType();
        String propName = name.replace("Property", "");
        System.out.println(propName + " : " + returnType);
    }
} 
```

这是绑定和示例的反射方法：

```
public class ReflectiveBind extends Application {
    /**
     * Reflection call for code like
     * slider1.valueProperty().bindBidirectional(slider2.valueProperty());
     *
     * @param bindee Node which you want to be changed by binding
     * @param propertyName name of the property, e.g. width
     * @param bindTarget Node which you want to be updated by binding
     */
    private static void bind(Object bindee, String propertyName, Object bindTarget) throws Exception {
        // here we get slider1.valueProperty()
        Method methodForBindee = bindee.getClass().getMethod(propertyName + "Property", (Class[]) null);
        Object bindableObj = methodForBindee.invoke(bindee);

        // here we get slider2.valueProperty()
        Method methodForBindTarget = bindTarget.getClass().getMethod(propertyName + "Property", (Class[]) null);
        Object bindTargetObj = methodForBindTarget.invoke(bindTarget);

        // here we call bindBidirectional: slider1.valueProperty().bindBidirectional(slider2.valueProperty())
        Method bindMethod = bindableObj.getClass().getMethod("bindBidirectional", Property.class);
        bindMethod.invoke(bindableObj, bindTargetObj);
    }

    @Override
    public void start(Stage stage) {

        Slider slider1 = new Slider();
        Slider slider2 = new Slider();

        VBox root = new VBox(20);
        root.getChildren().addAll(slider1, slider2);

        stage.setScene(new Scene(root, 200, 100));
        stage.show();

        try {
            //same call as slider1.valueProperty().bindBidirectional(slider2.valueProperty());
            bind(slider1, "value", slider2);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static void main(String[] args) { launch(); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:40:47.357

查看 apache commons bean utils

[http://commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)

你说你想...

获取属性值： [http ://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#getProperty%28java.lang.Object,%20java.lang.String%29](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#getProperty%28java.lang.Object,%20java.lang.String%29)

获取属性列表： [http ://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#describe%28java.lang.Object%29](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#describe%28java.lang.Object%29)

那里还有很多其他有用的方法，对于 UI 工作来说，它们特别方便，因为它们中的许多都返回了您想要显示的字符串形式。

如果您想要对象而不是字符串，请改用 PropertUtils 类

获取属性的值（不是字符串） [http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/PropertyUtils.html#getProperty%28java.lang.Object， %20java.lang.String%29](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/PropertyUtils.html#getProperty%28java.lang.Object,%20java.lang.String%29)

获取属性列表： [http ://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/PropertyUtils.html#describe%28java.lang.Object%29](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/PropertyUtils.html#describe%28java.lang.Object%29)

# javascript - Firefox 不应该执行 JavaScript

> ID：11834762
> 
> 赞同：1
> 
> 时间：2012-08-06T19:37:10.293
> 
> 标签：javascript, ajax, firefox, updating

我编写了一个非常基本的页面，其中包含带有 ajax 自动完成功能的搜索文本输入。我已将输入 onchange 属性设置为调用一个 ajax 函数，该函数将从服务器检索一组值，并将选项添加到关联的数据列表。当我在文本输入中更改某些内容时，JavaScript 不会执行。但是，当我最小化窗口或单击新选项卡时，我会执行它，所以我想这既不是语法问题也不是文件包含问题。我还试图清除我的缓存，因为它没有任何效果（无论如何每次我关闭它时我的 Firefox 都被完全清除）。这可能是因为什么？我将粘贴我的源代码：

我的 AJAX 课程。它确实有效，我在工作中对其进行了测试，并且效果很好。不用看，我贴上来，方便大家看。

```
/**
* @file ajax.js
* @version 1.0 - 2012-07-30
* @author *****
* @brief This file describes a class allowing to easily perform AJAX requests.
*/

/**
* @class Ajax
* @brief Used to performs AJAX requests.
* @details Usage example :
*
* var request1 = new Ajax()
*     .url('some_url')
*     .parameters('some_parameters')
*     .callback(function(xhr) { alert(xhr.responseText); })
*     .method('GET')
*     .execute();
*
* var request2 = new Ajax();
* request2.url('some_url');
* request2.parameters('some_parameters');
* request2.callback(function(xhr) { alert(xhr.responseXml); });
* request2.execute();
*
* Using setters is not necessary, properties can be set manually. Setters only allow to chain calls by returning this.
* The order in which properties are set does not matter as long as the mandatory ones are set before calling 'execute'.
* If the server returns a string it can be retrieved from xhr.responseText. If it returns an XML file, it will be in
* xhr.responseXml.
*/
function Ajax()
{
    /**
    * @brief (string) URL of the request (MANDATORY).
    * @details It main contain parameters, but if so, the property 'parameters' should be used instead.
    */
    var url;

    /**
    * @brief (string) Method to use for the request.
    * @details Can be either 'GET' or 'POST'.
    */
    var method = 'POST';

    /**
    * @brief Function to be called once the request has been performed.
    * @details This callback function will be given the XMLHttpRequest object as a parameter.
    */
    var callback;

    /**
    * @brief Parameters of the URL.
    * @details Must be in the following format : 'arg1=value1&arg2=value2'... and contain no question mark.
    */
    var parameters;

    /**
    * @brief Indicates if the request is syncrhonous.
    */
    var wait = false;

    /**
    * @brief Sets the 'url' property.
    * @details Returns the object to chain setter calls.
    * @param String.
    * @return Ajax.
    */
    this.url = function($url) { url = $url; return this; };

    /**
    * @brief Sets the 'method' property.
    * @details Returns the object to chain setter calls.
    * @param String.
    * @return Ajax.
    */
    this.method = function($method) { method = $method; return this; };

    /**
    * @brief Sets the 'callback' property.
    * @details Returns the object to chain setter calls.
    * @param Function.
    * @return Ajax.
    */
    this.callback = function($callback) { callback = $callback; return this; };

    /**
    * @brief Sets the 'parameters' property.
    * @details Returns the object to chain setter calls. WARNING : Using parameters will change the method to POST. If
    * parameters must be passed using GET, they must be included in the URL.
    * @param String.
    * @return Ajax.
    */
    this.parameters = function($parameters) { parameters = $parameters; method = 'POST'; return this; };

    this.wait = function($wait) { wait = $wait; return this; };

    // FIXME POST semble poser probleme lorsque l'on renvoie du json et que l'on l'éval.

    /**
    * @brief Performs the AJAX request.
    * @details The mandatory properties must be set before calling this method.
    */
    this.execute = function()
    {
        var xhr = null;

        try { xhr = new XMLHttpRequest();  }
        catch(e) { 
            try { xhr = new ActiveXObject("Msxml2.XMLHTTP"); } 
            catch(e2) { 
                try { xhr = new ActiveXObject("Microsoft.XMLHTTP"); } 
                catch(e) {}
            }
        }

        var self = this;

        xhr.onreadystatechange = function() {
            if(4 === xhr.readyState && 200 === xhr.status) {
                if(callback) return callback(xhr);
            }
        };

        xhr.open(method, url, !wait);

        if('POST' === method) xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
        xhr.send(parameters ? parameters : null);

        return this;
    };

    return this;
} 
```

我的 AJAX 自动完成功能：

```
function ajaxAutoComplete(inputId)
{
    var input = document.getElementById(inputId);
    if(null === input) alert('ajaxAutoComplete : invalid input ID.');

    if(!input.list) alert('ajaxAutoComplete : input has no associated data list');

    var list = document.getElementById(input.list.id);
    if(null === list) alert('ajaxAutoComplete : input has an invalid list ID.');

    var suggestions;

    new Ajax()
        .url('../Controller/index.php?exec=ajaxAutoComplete')
        .parameters('searchInput=' + input.value)
        .callback(function(xhr)
        {
            suggestions = eval('(' + xhr.responseText + ')');

            while(list.hasChildNode) list.removeChild(list.firstChild);

            for(var i = 0; i < suggestions.length; ++i)
            {
                var option = document.createElement('option');
                option.value = suggestions[i];
                list.appendChild(option);
            }
        })
        .wait(false)
        .execute();

} // ajaxAutoComplete() 
```

和 HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Image Module</title>
        <meta charset="utf-8">
        <script type="text/javascript" src="../Js/main_dev.js"></script>
    </head>
    <body>
        <header>
            <h1>Image module</h1>
        </header>
        <nav>
            <form action="#" method="#">
                <fieldset>
                    <label for="searchInput">Search</label>
                    <input id="searchInput" list="searchSuggestions" name="searchInput" type="text" value="search" maxlength="255" onchange="ajaxAutoComplete(this.id)">
                    <datalist id="searchSuggestions">
                    </datalist>
                    <input type="submit" value="Search">
                </fieldset>
            </form>
        </nav>
        <div class="Content">
        </div>
        <footer>
            <span></span>
        </footer>
    </body>
</html> 
```

服务器返回一个由随机生成的数字组成的 JSON 编码数组，例如：[1611, 1515187, 415417, 7815, 587187]

我正在使用 Firefox 14。

有任何想法吗 ？谢谢阅读 ！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:41:06.467

在输入失去焦点之前，该`change`事件不会被触发。您可能想听`keyup`或`keydown`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:41:13.523

[该`change`事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents-h3)仅在输入失去焦点时触发。

> 当控件失去输入焦点并且其值在获得焦点后已被修改时，会发生更改事件。此事件对 INPUT、SELECT 和 TEXTAREA 有效。元素。

绑定到不同的事件。

还可以考虑使用现有的代码/[小部件](https://www.google.com/search?q=javascript%20autocomplete)/[库](http://jqueryui.com/demos/autocomplete/)/等。– 除了浪费时间之外，我真的不明白所有这些重新发明的轮子应该为您带来什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:48:50.130

我建议不要为每个按下的字符进行 AJAX 调用。将请求延迟片刻，以查看用户是否仍在键入。否则，您最终可能会解析前一个字母的 json，就好像它是当前的一样。为此，只需创建一个简单的队列：

```
<input id="searchInput" list="searchSuggestions" name="searchInput" type="text" value="search" maxlength="255" onkeydown="queueRequest(this.id)"> 
```

然后你的 Javascript 看起来像

```
function queueRequest(id) {
    if (queuedRequest) clearTimeout(queuedRequest);
    window.queuedRequest = setTimeout(function(id) {
        ajaxAutoComplete(id);
    },100,id);
} 
```

一些注意事项，由于缺乏对 setTimeout 的第三个参数的支持，这不适用于 IE8 或更低版本

# delphi - TRttiField - 如何投射类

> ID：11834766
> 
> 赞同：3
> 
> 时间：2012-08-06T19:37:37.823
> 
> 标签：delphi, orm, rtti

首先这是我在这里的第一篇文章，所以我首先要为我糟糕的英语道歉，其次我要为任何听起来可能是愚蠢的问题道歉

好吧，我正在尝试为 MySQL、Delphi 和我在这里工作的团队编写我自己的 ORM，但是我陷入了一些我不知道该怎么做的事情中，我将在我的课程的最终定义上发布。

```
 uses
      hsORM.Mapping,
      hsORM.Types;

    type
      [ThsORMTableMap('hscad_cadmunicipal')]
      TMunicipe = class(ThsORMTable)
      private
        { Private declarations }
        [ThsORMColumnPrimaryKeyMap('inscricaomunicipal')]
        Fid : ThsORMColumnPrimaryKey;

        [ThsORMColumnNullableMap('idlogradouro', varInteger)]
        Fidlogradouro : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('idbairro', varInteger)]
        Fidbairro : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('idestadocivil', varInteger)]
        Fidestadocivil : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('idnaturezaestab', varInteger)]
        Fidnaturezaestabelecimento : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('idnaturezajuridica', varInteger)]
        Fidnaturezajuridica : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('idagencia', varInteger)]
        Fidagencia : ThsORMColumnNullable;

        [ThsORMColumnMap('datacadastro')]
        Fdatacadastro : ThsORMColumnDate;

        [ThsORMColumnMap('nome')]
        Fnome : ThsORMColumnString;

        [ThsORMColumnNullableMap('nomefantasia', varString)]
        Fnomefantasia : ThsORMColumnNullable;

        [ThsORMColumnMap('tipopessoa')]
        Ftipopessoa : ThsORMColumnString;

        [ThsORMColumnNullableMap('numero', varInteger)]
        Fnumero : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('complemento', varString)]
        Fcomplemento : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('observacao', varString)]
        Fobservacao : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('telefone', varString)]
        Ftelefone : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('celular', varString)]
        Fcelular : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('fax', varString)]
        Ffax : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('sexo', varString)]
        Fsexo : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('email', varString)]
        Femail : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('responsavel', varString)]
        Fresponsavel : ThsORMColumnNullable;

        [ThsORMColumnNullableMap('contacorrente', varString)]
        Fcontacorrente : ThsORMColumnNullable;

        [ThsORMColumnMap('foto')]
        Ffoto : ThsORMColumnBlob;

        [ThsORMColumnMap('fornecedor')]
        Ffornecedor : ThsORMColumnBoolean;

        [ThsORMColumnMap('tipocredor')]
        Ftipocredor : ThsORMColumnString;

        [ThsORMColumnMap('ativo')]
        Fativo : ThsORMColumnBoolean;
      public
        { Public declarations }
        property id : ThsORMColumnPrimaryKey read Fid write Fid;
        property idlogradouro : ThsORMColumnNullable read Fidlogradouro write Fidlogradouro;
        property idbairro : ThsORMColumnNullable read Fidbairro write Fidbairro;
        property idestadocivil : ThsORMColumnNullable read Fidestadocivil write Fidestadocivil;
        property idnaturezaestabelecimento : ThsORMColumnNullable read Fidnaturezaestabelecimento write Fidnaturezaestabelecimento;
        property idnaturezajuridica : ThsORMColumnNullable read Fidnaturezajuridica write Fidnaturezajuridica;
        property idagencia : ThsORMColumnNullable read Fidagencia write Fidagencia;
        property datacadastro : ThsORMColumnDate read Fdatacadastro write Fdatacadastro;
        property nome : ThsORMColumnString read Fnome write Fnome;
        property nomefantasia : ThsORMColumnNullable read Fnomefantasia write Fnomefantasia;
        property tipopessoa : ThsORMColumnString read Ftipopessoa write Ftipopessoa;
        property numero : ThsORMColumnNullable read Fnumero write Fnumero;
        property complemento : ThsORMColumnNullable read Fcomplemento write Fcomplemento;
        property observacao : ThsORMColumnNullable read Fobservacao write Fobservacao;
        property telefone : ThsORMColumnNullable read Ftelefone write Ftelefone;
        property celular : ThsORMColumnNullable read Fcelular write Fcelular;
        property fax : ThsORMColumnNullable read Ffax write Ffax;
        property sexo : ThsORMColumnNullable read Fsexo write Fsexo;
        property email : ThsORMColumnNullable read Femail write Femail;
        property responsavel : ThsORMColumnNullable read Fresponsavel write Fresponsavel;
        property contacorrente : ThsORMColumnNullable read Fcontacorrente write Fcontacorrente;
        property foto : ThsORMColumnBlob read Ffoto write Ffoto;
        property fornecedor : ThsORMColumnBoolean read Ffornecedor write Ffornecedor;
        property tipocredor : ThsORMColumnString read Ftipocredor write Ftipocredor;
        property ativo : ThsORMColumnBoolean read Fativo write Fativo;
      end; 
```

好吧，我为每个 mysql 数据类型定义了一个相应的类。那么我接下来要做的是使用 RTTI 来创建动态的每个 os 这个字段。因为delphi中的类需要显式创建并且我试图避免这种情况，所以我试图做的是使用我的类 ThsORMTable 来创建动态的这个列。例如：

```
 ThsORMTable = class
      private
        { Private declarations }
        FTableName: string;
        procedure InitializeTable();
        procedure InitializeColumns();
      public
        { Public declarations }
        constructor Create();
        property TableName : string read FTableName write FTableName;
      end;

    { ThsORMTable }

    {$REGION 'Private'}

    procedure ThsORMTable.InitializeTable();
    var
      AContext : TRttiContext;
      AType : TRttiType;
      AAttribute : TCustomAttribute;
      AFound : Boolean;
    begin
      AContext := TRttiContext.Create();
      try
        AFound := False;
        AType := AContext.GetType(ClassType);
        for AAttribute in AType.GetAttributes do
          if(AAttribute is ThsORMTableMap) then
            begin
              FTableName := (AAttribute as ThsORMTableMap).TableName;
              AFound := True;
              Break;
            end;
        if not(AFound) then raise Exception.Create(ETableNotMapped);
      finally
        AContext.Free();
      end;
    end;

    procedure ThsORMTable.InitializeColumns();
    var
      AContext : TRttiContext;
      AType : TRttiType;
      AField : TRttiField;
      AFound : Boolean;
    begin
      AContext := TRttiContext.Create();
      try
        AType := AContext.GetType(ClassType);
        for AField in AType.GetFields do 
                    /**********************************************
                    here i want something like for example
                    if(AField is ThsORMColumnInteger) then
                      begin
                        (AField as ThsORMColumnInteger) := ThsORMColumnInteger.Create();
                    is this possible? im going to the wrong way?
                      end;
                    **********************************************/
      finally
        AContext.Free();
      end;
    end;

    {$ENDREGION}

    {$REGION 'Public'}

    constructor ThsORMTable.Create();
    begin
      try
        InitializeTable();
        InitializeColumns();
      except on Error : Exception do
        raise ThsORMTableInitialization.Create(Format(ETableInitializationError, [Error.Message]));
      end;
    end;

    {$ENDREGION} 
```

但无论如何我都会遇到编译错误。希望你们能帮助我。thx 优势

**更新：**对不起，我不清楚，我再试一次。我试图做的是，通过我的祖先类 ThsORMTable，具体地在构造函数方法上初始化每个字段（创建），所以我不需要显式创建从这个祖先继承的每个类中的每个字段

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:47:28.643

调用`AField is ThsORMColumnInteger`and`AField as ThsORMColumnInteger`总是会失败，因为`TRttiField`它不是派生自`ThsORMColumnInteger`，反之亦然。

目前尚不清楚您要在`ThsORMTable`班级的每个领域完成什么。如果您只想访问每个字段的属性，则不需要构造一个实际的对象实例来执行此操作，例如：

```
uses
  ..., TypInfo;

procedure ThsORMTable.InitializeColumns();  
var  
  AContext : TRttiContext;  
  AType : TRttiType;  
  AField : TRttiField;  
  AAttribute : TCustomAttribute;
  AFound : Boolean;
begin  
  AContext := TRttiContext.Create();  
  try  
    AType := AContext.GetType(ClassType);  
    for AField in AType.GetFields do   
    begin
      // TRttiType.TypeData is private so have to use the TypInfo unit directly...
      TypeData := TypInfo.GetTypeData(AField.FieldType.Handle);

      if TypeData^.ClassType is ThsORMColumnInteger then
      begin
        for AAttribute in AField.GetAttributes do      
        begin
          if (AAttribute is ThsORMColumnMap) then      
          begin      
            // use (AAttribute as ThsORMColumnMap) as needed ...
            AFound := True;      
            Break;      
          end;
        end;      
        if (not AFound) then raise Exception.Create(EColumnNotMapped);      
      end;
    end;
  finally  
    AContext.Free();  
  end;  
end; 
```

**更新：**根据您更新的信息，您可能可以执行以下操作，具体取决于您的列类类型的设置方式：

```
type
  ThsORMColumn = class(...)
    //...
  end;

  ThsORMColumnClass = class of ThsORMColumn;

  //...

  ThsORMColumnInteger = class(ThsORMColumn)
    // ...
  end;

  //...

procedure ThsORMTable.InitializeColumns();     
var     
  AContext : TRttiContext;     
  AType : TRttiType;     
  AField : TRttiField;     
  AAttribute : TCustomAttribute;   
  AObj : ThsORMColumn;   
begin     
  AContext := TRttiContext.Create();     
  try     
    AType := AContext.GetType(ClassType);     
    for AField in AType.GetFields do      
    begin   
      if AField.FieldType.TypeKind = tkClass then
      begin
        // TRttiType.TypeData is private so have to use the TypInfo unit directly...   
        TypeData := TypInfo.GetTypeData(AField.FieldType.Handle);   
        if (not TypeData^.ClassType.InheritsFrom(ThsORMColumn)) then
          raise Exception.Create(...);         
        AObj := ThsORMColumnClass(TypeData^.ClassType).Create();         
        AField.SetValue(Self, Obj);
      end;   
    end;
  finally     
    AContext.Free();     
  end;     
end; 
```

这种方法的好处是，从技术上讲，您根本不需要使用属性标记字段即可工作，尽管我怀疑您仍然希望出于其他目的这样做。

# javascript - Backbone.js 绑定到集合“添加”两次呈现视图

> ID：11834768
> 
> 赞同：1
> 
> 时间：2012-08-06T19:37:44.957
> 
> 标签：javascript, backbone.js

我正在尝试跟踪我的应用程序中的所有僵尸，并更好地了解事件绑定是如何发生的。我有一个将它的集合`"add"`事件绑定到它的`render`函数的视图。

```
_.bindAll(this, "render");
this.collection.bind("add", this.render); 
```

因此，如果我在渲染函数中记录某些内容，我可以在控制台中看到，在用户通过 UI 添加新模型后，渲染发生了两次。控制台输出如下所示：

```
rendering                                  index.js?body=1 (line 88)

POST http://localhost:3000/tasks           jquery.js?body=1 (line 8103)

rendering                                  index.js?body=1 (line 88) 
```

我想知道为什么会这样。我知道模型只被添加到集合中一次，这让我认为该事件应该只被触发一次。然后我不明白为什么`render`被执行了两次。我在[这里](https://stackoverflow.com/questions/10228267/backbone-js-fires-render-twice-on-collection-add)查看了类似的问题，但它有所不同，因为我使用的是`add`event 而不是`change`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:27:50.880

我认为您调用了两次渲染。

Yoy正在做这样的事情：

```
var yourView = new YourDefinedView();
yourView.render(); // this is your manual call to render

//here you call to the server and when data arrives is the second render
this.collection.fetch(); 
```

我不认为当集合收到新项目时，render 是最好的绑定方法。

查看此示例，我们如何绑定特定事件以将集合中的项目添加到视图： [http ://danielarandaochoa.com/backboneexamples/blog/2012/02/22/real-world-usage-of-a-backbone-collection /](http://danielarandaochoa.com/backboneexamples/blog/2012/02/22/real-world-usage-of-a-backbone-collection/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:45:05.413

你实例化你的视图两次了吗？它可能是2种不同的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:55:37.967

事实证明，`render`通过 Event Aggregator 有一个额外的绑定。它是由另一个开发人员添加的。

# asp.net - 不将前导零从一个表保存到另一个表

> ID：11834769
> 
> 赞同：0
> 
> 时间：2012-08-06T19:37:48.843
> 
> 标签：asp.net

在更新表字段的下拉列表中引发错误。它声称 SelectedValue 无效，因为它不存在于项目列表中。如果我进入表格并将零添加到 ID，则不再抛出错误。

下拉菜单选择一个teacherid，它是Teacher 表中的主键，并将ID 保存到Classes 表中。类表保存任何以零开头但没有前导零的 ID。

因此，如果 Classes 表中的 tid 为 0701234，则将其保存为 701234，但两个表都是 nvarchar(255)。我可能会补充一点，Classes 表对 tid 使用了 int 数据类型。所以我改变了它以避免这种情况。更改后仍然会引发上述错误，因为您无法更新不存在的记录。

这是控制

```
<asp:DropDownList ID="teacherdd1" runat="server" AutoPostBack="true" 
    DataSourceID="SQLdatasourceTeacherList"
    DataTextField="fullname1" DataValueField="tid" >
</asp:DropDownList> 
```

我根本不知道该怎么做，或者为什么会这样。

非常简单。我切换到文本框进行测试并忘记仔细检查。我的疏忽。

谢谢

cmdUpdate.Parameters.Add("@TID1", SqlDbType.Int).Value = teacherdd1.SelectedValue.ToString() cmdUpdate.Parameters.Add("@TID2", SqlDbType.Int).Value = teacherdd2.SelectedValue.ToString() 'cmdUpdate.Parameters.Add("@tid1", SqlDbType.NVarChar).Value = txbteacher1.Text.ToString() 'cmdUpdate.Parameters.Add("@tid2", SqlDbType.NVarChar).Value = txbteacher2.Text.ToString ()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:59:23.967

正如 MRAB 已经说过的，您需要在代码中跟踪这些数据，以确保它始终被视为字符串。您提到类表中的字段曾经是一个 int，这表明代码中也可能使用了 int 变量（例如 SQL 命令的参数？）。

因此，只需使用调试器单步执行或仅跟踪代码即可跟踪数据。使用调试器可以让您检查数据是否仍然包含前导零，这样就不会发生任何意外。

如果上述方法没有帮助，那么您将不得不在问题中提供更多代码，以便其他人可能会发现发生了什么。

# java - 我的 SQL PreparedStatement 有什么问题？

> ID：11834780
> 
> 赞同：0
> 
> 时间：2012-08-06T19:38:25.257
> 
> 标签：java, sql, performance, prepared-statement

我正在从 Access 数据库中的三个表中读取大量数据，大约 200 万行，可能是 100MB 的文本。我正在使用以下 SELECT 语句：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
String url = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" + databaseLocation + databaseName +";selectMethod=cursor; READONLY=true; TYPE=FASTLOAD";

con = DriverManager.getConnection(url);

String SQL = "SELECT ADDRESS_MODEL.ADDR_LINE_1, ADDRESS_MODEL.ADDR_LINE_2, LOCALITIES.NAME, ADDRESS_MODEL.SECONDARY_LOCALITY, ADDRESS_MODEL.POST_TOWN, ADDRESS_MODEL.COUNTY, BUILDINGS.ED_ID FROM (ADDRESS_MODEL LEFT JOIN BUILDINGS ON ADDRESS_MODEL.BUILDING_ID = BUILDINGS.BUILDING_ID) LEFT JOIN LOCALITIES ON BUILDINGS.LOCALITY_ID = LOCALITIES.LOCALITY_ID WHERE BUILDINGS.COUNTY_ID = " + county_ID;

Statement stmt = con.createStatement();
ResultSet result = stmt.executeQuery(SQL); 
```

这需要一段时间（大约 2 分钟），所以我想办法让它更快。我阅读了有关准备好的陈述并决定尝试制作一个。按照各种教程，我把它放在一起：

```
String SQL = "SELECT ADDRESS_MODEL.ADDR_LINE_1, ADDRESS_MODEL.ADDR_LINE_2, LOCALITIES.NAME, ADDRESS_MODEL.SECONDARY_LOCALITY, ADDRESS_MODEL.POST_TOWN, ADDRESS_MODEL.COUNTY, BUILDINGS.ED_ID FROM (ADDRESS_MODEL LEFT JOIN BUILDINGS ON ADDRESS_MODEL.BUILDING_ID = BUILDINGS.BUILDING_ID) LEFT JOIN LOCALITIES ON BUILDINGS.LOCALITY_ID = LOCALITIES.LOCALITY_ID WHERE BUILDINGS.COUNTY_ID = ?";

PreparedStatement prest = con.prepareStatement(SQL);
prest.setString(1, county_ID);

ResultSet result = prest.executeQuery(); 
```

它仍然有效，但现在需要超过 15 分钟。我有一个很好的谷歌，但我似乎无法发现我做错了什么。准备好的陈述是否不适合我的特定问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:50:43.010

当您想要多次执行相同的查询时，使用 PreparedStatement 可以获得主要的性能提升。数据库在准备好语句时构造查询，然后在每次执行语句时重新使用它以避免开销。如果您只执行一次查询，那么使用 PreparedStatement 可能不会看到任何性能改进。

使用 PreparedStatement 的主要论据是防止 SQL 注入

# python - 在“if”中找到错误后如何继续检查错误 - Django，Python

> ID：11834781
> 
> 赞同：0
> 
> 时间：2012-08-06T19:38:28.907
> 
> 标签：python, django, django-forms, django-templates

我有这段代码可以检查表单中的错误。用户犯一些错误后，它会显示第一个发现的错误。但是如果错误属于多个错误，它将只显示第一个错误。

```
#forms.py
    def clean_file_name(self):
        name = self.cleaned_data['file_name']
        if len(name) < 2:
            raise forms.ValidationError('File name is too short')
        if FileDescription.objects.filter(file_name = name).exists():
            raise forms.ValidationError('File with this name already exists')
        else:
            return name

#template
<ul>
  {% for field in form %}
    {% for error in field.errors %}
    <li>{{ error }}</li>
    {% endfor %}
  {% endfor %}
</ul> 
```

如果用户将输入“a”并且数据库中具有此名称的文件已经存在（假设它在我写长度检查之前就在那里）输出将是：

“文件名太短”

但我希望显示两个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:15:19.887

这个怎么样？

```
def clean_file_name(self):
    name = self.cleaned_data['file_name']
    error = ''
    if len(name) < 2:
        error += 'File name is too short'
    if FileDescription.objects.filter(file_name = name).exists():
        if error:
            error += ' ' 
        error += 'File with this name already exists'
    if error:
        raise forms.ValidationError(error)
    return name 
```

还是您希望它们作为两个单独的子弹？如果是这样，您需要将它们添加到 self.errors 列表（请参阅 Alexander 的回答），然后引发 ValidationError 以确保表单不会处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:44:11.497

从我的代码中，希望它有所帮助。

```
if isinstance(self.errors.get('field_name'), forms.util.ErrorList):
    self.errors['field_name'].append(_('My error'))
else:
    self.errors['field_name'] = forms.util.ErrorList([_('MyError')]) 
```

# sql - SQL查询案例语句

> ID：11834782
> 
> 赞同：2
> 
> 时间：2012-08-06T19:38:31.570
> 
> 标签：sql, oracle, oracle11gr2

我有一个生成表的 sql 查询

```
SELECT DISTINCT
concat(table.column, '.test.com) "User Login", 
concat(concat(table.columnname, ' '), lastname) "Full Name", 
'N' "Admin (Y/N)",
table.profile "Profile",
'Self' "admin", 
'Self' "user", 
FROM table.users 
```

我想在上面的查询中添加一个 case 语句。

```
If (table.profile == admin){
admin = self;
user = null;
}
else{
admin = null;
user = self;
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:44:35.030

```
select  ...
,       case when profile = 'admin' then 'self' end as admin
,       case when coalesce(profile,'') <> 'admin' then 'self' end as user
from    table.users 
```

a的默认值为`case`null，符合您的要求。

# objective-c - 模态转场无过渡

> ID：11834784
> 
> 赞同：5
> 
> 时间：2012-08-06T19:39:07.433
> 
> 标签：objective-c, ios, storyboard, modalviewcontroller

如何在显示模态时从模态序列中删除过渡效果，如下所示：

```
[self performSegueWithIdentifier:@"SomeIdentifier" sender:self]; 
```

我知道我可以进入情节提要并在 4 种不同的动画之间切换，但我不想要任何动画！如何删除它们？

我知道我可以这么说`presentModalViewController animated: NO`，但我不会也不能这样称呼它。我需要使用该`performSegueWithIdentifier`方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-01T06:44:39.880

在情节提要中，您可以选择您的 segue，并在属性检查器中取消选中“动画”。那应该这样做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-26T14:19:20.413

这是无动画转场的完整来源：

*BVNoAnimationSegue.h*

```
#import <UIKit/UIKit.h>
@interface BVNoAnimationSegue : UIStoryboardSegue
@end 
```

*BVNoAnimationSegue.m*

```
#import "BVNoAnimationSegue.h"

@implementation BVNoAnimationSegue

- (void)perform
{
    [[self sourceViewController] presentModalViewController:[self destinationViewController] animated:NO];
}

@end 
```

要使用它，请将文件添加到您的项目（例如 BVNoAnimationSegue.m/.h），然后在情节提要中，选择“自定义”作为您的 Segue 类型并在*Segue Class*框中键入 BVNoAnimationSegue。完成此操作后，Xcode 似乎足够聪明，可以在将来在 UIViewController 之间按住 CTRL 拖动时添加“无动画转场”作为选项。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-06T19:43:09.027

如果您需要转场但不想要动画，则需要制作自定义转场（没有动画）。

您应该在视图控制器编程指南中查看 Apple 的[“创建自定义转场”示例](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html#//apple_ref/doc/uid/TP40007457-CH16-SW1)，他们会在没有动画的情况下进行自定义模态转场（就像您想要的那样）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-01T14:19:31.087

我们可以的另一种方式

```
YourViewController *aYourViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"aYourViewControllerIdentifier"];
[self.navigationController pushViewController:aYourViewController animated:NO]; 
```

`@"aYourViewControllerIdentifier"`并在情节提要中添加to view 控制器。

# dll - 本机 DLL 未发布到 Azure Compute Emulator

> ID：11834787
> 
> 赞同：2
> 
> 时间：2012-08-06T19:39:15.593
> 
> 标签：dll, azure, native

我有一个用 VC++ 2008 构建的本机 DLL (x64)，我正试图在天蓝色项目中使用它。该代码在独立的可执行文件中运行良好，但是当我尝试在 Compute Emulator 中运行它时，我收到一个 DLL not found 异常。

几天来，我一直假设问题在于不存在 VC++ 可再发行组件，但这[不应该是使用 VS 2008 构建的 dll 的问题](http://msdn.microsoft.com/en-us/library/windowsazure/hh694038.aspx)。

使用 ProcMon，我发现了一些奇怪的东西——在路径上的任何地方都找不到 DLL。进一步探索表明 DLL 没有被复制到 approot 文件夹，尽管它设置为 Build Action = none + Copy Always。

我手动将 DLL 复制到 SDK 中的 Compute Emulator 路径，现在它运行了。但是为什么当我按 F5 时 VS 不将 DLL 与我的项目文件一起复制到 approot 中？

# python - Mayavi 网格 - numpy meshgrid 无显示

> ID：11834794
> 
> 赞同：1
> 
> 时间：2012-08-06T19:39:42.323
> 
> 标签：python, 3d, numpy, mesh, mayavi

在玩 MayaVi 时，我无法使用以下代码显示网格。有什么问题？

```
def visualize_surf(self):
    times = self.retT[imin:imax]
    nrows = (int)((times[(len(times)-1)] - times[0])/self.mod) + 1

    x = []
    for i in range(nrows):
        x.append(self.matRetT[i][0] + self.mod * i)

    y = []
    for i in range(len(self.matRetT[0])):
        y.append(self.matRetT[0][i])
    y = y[:-1]

    X,Y = np.meshgrid(x,y)

    z = [tuple(self.mat[i]) for i in range(len(self.mat))]

    Zzip = zip(*z)
    Z = [list(x) for x in Zzip]

    return mlab.mesh(Y,X,Z) 
```

没有显示->这可能是我错过了`-wthread`IPython shell 中的命令吗？然而，据说模态默认是打开的。

X、Y、Z 大小相同，没有警告或异常，MayaVi 场景 1 确实打开但仍然为空。

这可能是网格网格的问题，网格中需要参数的问题。但是通过文档阅读，我无法找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T19:03:09.923

Matplotlib 的“plot_surface”和 Mayavi 的“surf”遵循不同的逻辑。正如 Mayavi 的文档中所指出的，meshgrid 的结果应该被转置以符合 Mayavi 的要求。

此外，在将网格数据等 Matplotlib 函数与 Mayavi 结合使用时应该小心，因为它的结果假定 Matplotlib 是一种网格网格。griddata 的第四个和第五个参数应该切换到适合 Mayavi。

# oracle - SAS 9.2 无限期运行 Oracle 查询

> ID：11834797
> 
> 赞同：1
> 
> 时间：2012-08-06T19:39:50.900
> 
> 标签：oracle, sas

我正在使用 SAS for windows 9.2 对 Oracle 数据库运行相当大的查询。这个查询非常大，我在 WITH 子句中编写了一个子查询并使用了 4 次。这在 SQL PLUS 和 SQL Developer 上运行良好，但是当我使用 SAS 运行它时，程序在 20 分钟后挂断，我什至看不到日志窗口。我从未与 SAS 合作过，不知道如何继续，但尝试了以下选项：

*   我创建了一个 SAS 代码文件并从 Windows 批处理文件运行它，希望将日志写入 Windows 文件系统，但即使这样也可以无限期地运行，而且我没有看到任何写入日志文件的内容

有人可以在这里指导我吗？我如何使用 ALTLOG 命令将日志文件写入 Windows 文件系统，以便我可以理解确切的错误消息。顺便说一句，DBA 提到查询运行良好并且从服务器端返回行，但由于某种原因，SAS 程序无法显示这些数据。我从查询中得到大约 45,000 条记录。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:11:21.760

我将其分为两点：

1) 在 SAS 中运行现有的 Oracle SQL 查询而不使用 SAS：最好的方法是将 Oracle SQL 代码嵌入所谓的 PROC SQL 显式传递中：

```
proc sql;
    connect to oracle as db1 (user=user1 pw=pasw1 path=DB1);
    create table test_table as
    select *
    from connection to db1
        ( /* here we're in oracle */
                  select * from test.table1 where rownum <20 
                )
    ;
    disconnect from db1;
quit; 
```

（借用我对另一个问题的回答[限制 PROC SQL 中](https://stackoverflow.com/questions/11746815/limiting-results-in-proc-sql/11747832#11747832)的结果）关键是不要尝试将其转换为 SAS SQL（不知道您是否尝试过）。

还要确保从查询结果创建 SAS 表（如示例中），而不是将其写入 SAS OUTPUT 窗口。

2）关于获取日志：关于一个动作的日志一般是在完成后写入，所以如果查询真的运行了很长时间，你不会看到任何中间日志。无论如何，日志缓冲是批处理作业的默认设置，因此在缓冲区满后写入日志消息。要立即将日志消息写入日志文件，请设置 LOGPARM 选项：

```
-LOGPARM= “WRITE=IMMEDIATE” 
```

相反的选项是缓冲的。

要找出使用的配置文件，请在 SAS 会话中运行以下命令：

```
proc options option=config;run; 
```

然后在配置文件的单独行中输入上面的选项。

# c++ - C++ 从并发向量中删除元素

> ID：11834810
> 
> 赞同：1
> 
> 时间：2012-08-06T19:41:00.370
> 
> 标签：c++, tbb

我正在使用 Visual C++ 构建一个网络入侵检测系统，它的一个组件是整个网络的 tcp 会话管理器。tcp 会话数据存储在并发向量中，以便可以从其他线程访问。我发现一旦会话关闭，就没有简单的方法可以从并发向量中删除会话。所以我的问题是你所知道的从并发向量中删除项目的最聪明的方法是什么。

智能 == 相当容易编程，不会对性能造成太大影响 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:12:22.373

我会考虑`std::set`在这里使用 a 而不是向量 - 特别是如果存储的项目数量很大。我想您还想经常执行查找。

从集合中搜索和删除是`O(log(n))`复杂的，而不是`O(n)`针对`std::vector`- 尽管在集合中微不足道的插入情况是`O(1)`而不是`O(log(n))`集合。

您还需要互斥锁来保护所有这些操作。

# animation - 在流沙中过滤后动画悬停效果消失

> ID：11834824
> 
> 赞同：0
> 
> 时间：2012-08-06T19:42:03.897
> 
> 标签：animation, hover, prettyphoto, quicksand

我有一个带有流沙的投资组合页面，它运行良好。为了增加一些乐趣，我添加了 prettyPhoto，效果也很好。

但现在我为图像添加了悬停效果。它正在工作，但是当我使用过滤器进行排序时，悬停效果已经消失。我什至没有看到它在 Firebug 中工作。

加载 .js 文件 -> jquery、流沙、prettyphoto，然后是悬停功能。php 文件（wordpress）如下所示：

```
<script type='text/javascript'>
    $(document).ready(function(){
        $("img").hover(
            function() {
                $(this).stop().animate({"opacity": "0.8"}, "slow");
            },
            function() {
                $(this).stop().animate({"opacity": "1"}, "slow");
            }
        );
    });
</script> 
```

php 文件的其余部分：

```
<!-- #content BEGIN  -->
<div id="contentport" class="clearfix">
    <ul class="filter clearfix">
        <li><strong>Filter:</strong></li>
        <li class="active"><a href="javascript:void(0)" class="all">All</a></li>
        xxxx php magic xxxx
        <ul class="filterable-grid clearfix">
            xxxx php magic xxxx
            <li data-id="id-<?php echo $count; ?>" data-type="<?php foreach ($terms as $term) { echo strtolower(preg_replace('/\s+/', '-', $term->name)). ' '; } ?>">

                <?php 
                    // Check if wordpress supports featured images, and if so output the thumbnail
                    if ( (function_exists('has_post_thumbnail')) && (has_post_thumbnail()) ) : 
                ?>

                <?php // Output the featured image ?>

                <a rel="prettyPhoto[gallery]" href="<?php echo $large_image ?>"><?php the_post_thumbnail('portfolio'); ?></a>                                   

                <?php endif; ?> 

                <?php // Output the title of each portfolio item ?>
                <p><a href="<?php the_permalink(); ?>"><?php echo get_the_title(); ?></a></p>

            </li>

            xxxx php magic xxxx
        </ul>
        xxxx php magic xxxx
</div> 
```

我希望你有你需要的一切，我已经看过那些链接，但我真的不知道该怎么做...... [流沙插件的悬停效果](https://stackoverflow.com/questions/5975273/hover-effect-with-quicksand-plugin)

[jquery 实时悬停](https://stackoverflow.com/questions/2262480/jquery-live-hover)

[如何在不丢失基于 jQuery 的投资组合悬停的情况下应用 jQuery 流沙（排序）？](https://stackoverflow.com/questions/9287021/how-to-apply-jquery-quicksand-sort-without-losing-a-jquery-based-portfolio-hov)

[带有.click方法的jQuery流沙插件](https://stackoverflow.com/questions/4840741/jquery-quicksand-plugin-with-click-method)

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:27:28.977

我不确定这是否有助于解决您的放大镜问题，但是在我自己在这个问题上遇到了一些错误的开始（即 QuickSand 杀死我的翻转功能）之后，我发现我的解决方案是指定函数调用的`selector` *内部：*`.on()`

```
$(document).ready(function(){
    $('#contentport').on('mouseenter', 'ul li', function() {
        $(this).find('img.attachment-portfolio').stop(true, true).animate({'opacity': '0.8'}, {duration:500});

    });

    $('#contentport').on('mouseleave', 'ul li', function() {
        $(this).find('img.attachment-portfolio').stop(true, true).animate({'opacity': '1'}, {duration:500});                           
    });     

}); 
```

这似乎解决了我的问题，即简单地使用`$('#contentport ul li').on('mouseenter', function() {...`对克隆元素不起作用。

手指交叉，这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:06:32.273

几乎解决了，对于 jQuery，这段代码有效。但是放大镜还是不行。

```
(function($){})(window.jQuery);

$(document).ready(function(){
    $('#contentport > ul > li').live('mouseenter', function(){
        $(this).find('img.attachment-portfolio').stop(true, true).animate({'opacity': '0.8'}, {duration:500});

    });

    $('#contentport > ul > li').live('mouseleave', function(){
        $(this).find('img.attachment-portfolio').stop(true, true).animate({'opacity': '1'}, {duration:500});                           
    });     

}); 
```

# installation - 重新扫描后驱动程序安装完成时，DevCon 可以通知吗？

> ID：11834826
> 
> 赞同：2
> 
> 时间：2012-08-06T19:42:12.880
> 
> 标签：installation, driver, wdk, inf, device-manager

我正在尝试在 Windows 安装项目期间安装驱动程序。

我要做的第一步是复制 INF 文件并预安装驱动程序。

`SetupCopyOEMInf(infFile, null, 1, 0, null, 0, 0, null);`

这会正确预安装驱动程序，但在设备管理器中完成硬件重新扫描之前，设备无法使用。我也想自动化这个。我曾尝试使用[setupapi.dll 来调用硬件重新扫描](https://stackoverflow.com/questions/2181525/is-there-an-api-call-to-start-a-scan-for-hardware-devices)，但对我来说并不总是成功。使用 devcon.exe rescan 总是强制重新扫描硬件，但它是一个同步命令，它在设备完成安装之前返回。硬件扫描完成并成功安装驱动后，有什么方法可以得到返回结果？

谢谢，

米莎

**编辑**

这是我的工作代码：

```
 public const UInt32 CR_SUCCESS = 0;
    public const UInt64 CM_REENUMERATE_SYNCHRONOUS = 1;
    public const UInt64 CM_LOCATE_DEVNODE_NORMAL = 0;

    [DllImport("setupapi.dll")]
    public static extern bool SetupCopyOEMInf(
      string SourceInfFileName,
      string OEMSourceMediaLocation,
      int OEMSourceMediaType,
      int CopyStyle,
      string DestinationInfFileName,
      int DestinationInfFileNameSize,
      int RequiredSize,
      string DestinationInfFileNameComponent
      );

    [DllImport("cfgmgr32.dll")]
    public static extern int CM_Locate_DevNode_Ex(ref IntPtr deviceHandle, int deviceId, uint flags, IntPtr machineHandle);

    [DllImport("cfgmgr32.dll")]
    public static extern int CM_Reenumerate_DevNode_Ex(IntPtr devInst, UInt64 flags);

    [DllImport("cfgmgr32.dll")]
    public static extern int CMP_WaitNoPendingInstallEvents(UInt32 timeOut);

    static void Main() {
      bool success = SetupCopyOEMInf(infFile, null, 1, 0, null, 0, 0, null);

      if(!success) {
        throw new Exception("Error installing driver");
      }

      success = RescanAllDevices();

      if (!success) {
        throw new Exception("Error installing driver");
      }
    }

    public static bool RescanAllDevices() {
      int ResultCode = 0;
      IntPtr LocalMachineInstance = IntPtr.Zero;
      IntPtr DeviceInstance = IntPtr.Zero;
      UInt32 PendingTime = 30000;

      ResultCode = CM_Locate_DevNode_Ex(ref DeviceInstance, 0, 0, LocalMachineInstance);
      if (CR_SUCCESS == ResultCode) {
        ResultCode = CM_Reenumerate_DevNode_Ex(DeviceInstance, CM_REENUMERATE_SYNCHRONOUS);
        ResultCode = CMP_WaitNoPendingInstallEvents(PendingTime);
      }
      return ResultCode == CR_SUCCESS;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:22:27.533

WDK 中提供了 devcon 的源代码。它位于 src\setup\devcon 目录中。rescan 命令的逻辑在 cmds.cpp 中的 cmdRescan 函数中。将该逻辑复制到您自己的代码中并确保它不会立即返回是一件简单的事情。

# jquery - 如何在jquery中获取DIV之后的所有DIV

> ID：11834827
> 
> 赞同：0
> 
> 时间：2012-08-06T19:42:23.010
> 
> 标签：jquery, html

```
<div id="nums">
    <div id="d0"></div>
    <div id="d1"></div>
    <div id="d2"></div>
    <div id="d3"></div>
</div> 
```

如何获得所有`divs`内部`nums`和之后`div 1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:44:50.530

~~更改了您的 ID，因为 ID 不能以整数开头。~~没关系，看评论。

```
$('#1').nextAll('div') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:45:17.743

```
$("div#nums div#1").siblings("div") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:46:48.753

$('div#nums div').not('div#d1');

或者

$('div#nums div#d1').siblings('div');

# c# - ActiveX DLL 错误

> ID：11834832
> 
> 赞同：10
> 
> 时间：2012-08-06T19:42:47.933
> 
> 标签：c#, visual-studio-2010, dll, activex

好的，虽然我从未想过在 2012 年我会编写我的第一个 ActiveX 控件（是的，这是有充分理由的），但我正在努力让它在 Windows 7 (x64) 下运行。

**解决方案短篇小说：** 我在一些 regasm 调用中丢失了 /codebase，并且还混合了 32 位和 64 位进程，但是标准 VS2010 命令提示符混合了 regasm 和 cscript 的 32 位和 64 位路径并没有帮助.

**长篇大论如下：**

我一直在

~~[使用 C# 在 .Net 中创建 ActiveX 控件](http://haseebakhtar.wordpress.com/2011/05/31/creating-an-activex-control-in-net-using-c/)~~

（**糟糕** ，我的链接有误......虽然看起来我最初提供的链接是有人复制了原始博客页面）

[使用 C# 在 .Net 中创建 ActiveX 控件](http://www.olavaukan.com/2010/08/creating-an-activex-control-in-net-using-c/)

和

[C# ActiveX 控件 (CSActiveX)](http://code.msdn.microsoft.com/windowsdesktop/CSActiveX-c3f43e7d)

而且我似乎成功地构建了项目（对于后一个项目，我必须将资源编译器位置更改为正确的位置）。

对于第一个项目，我使用建议的安装程序，对于第二个项目，我尝试直接使用 regasm。

但在此之后，一切都在走下坡路。我尝试注册所有但要么：

1.  我不知道应该如何注册它们，或者：
2.  我不知道我应该如何注册它们。

我的测试用例是一个简单的 JScript 文件，其中包含

```
var x = new ActiveXObject( "name of object" ); 
```

失败并出现错误：

> test.js(1,1) Microsoft JScript 运行时错误：自动化服务器无法创建对象

我不确定这是权限问题，还是 32 位与 64 位问题或两者兼而有之。

许多提供 ActiveX 帮助的网站都假设您将通过网页访问它，所以我尝试查看 IE 权限（即使我想将控件加载到第三部分程序中）。

我知道如果我使用 regasm 的 'framework' 或 'framework64' 版本，我可以控制注册表项的放置位置 - 我已经看到一些关于以 32 位或 64 位运行 cscript 的引用（这可能会影响搜索注册表）取决于调用的 cmd shell（我已经尝试了两种方法，以及尝试了“管理员”shell）。

所以基本上在这一点上我不知道我在做什么或我应该做什么。

我的目标是在 Windows 7 x64 上注册一个 ActiveX 控件并使其能够通过以下方式加载：

1.  从默认 Windows 命令提示符运行的测试 .js 脚本
2.  将相同的控件加载到 Excel 2007 VBA 之类的东西中（仅用于测试）
3.  将控件加载到第 3 部分应用程序（Rockwell 的 RSView Studio）中，并将其托管在 VBA 应用程序中（我需要检查这个是 32 位还是 64 位程序......我怀疑是前者）

**笔记**

对于使用安装程序的项目（使用 C# 在 .Net 中创建 ActiveX 控件），它将代码安装到“c:\program Files (x86)\”并使用 regedit 查找我在“Computer\HKEY_CLASSES_ROOT\Wow6432Node\”下找到条目我相信 CLSID\" 告诉我 DLL 是作为 32 位进程安装的。我尝试从 32 位和 64 位 cmd 运行我的 cscript 测试，但它们都失败了。请注意，安装程序在运行时正在创建相当于“regasm /codebase”的内容。

对于我尝试使用 regasm 注册它的项目（C# ActiveX 控件（CSActiveX）），它有一些用于注册 ActiveX COM 控件的附加代码。此代码提到注册 32 位进程内服务器（请参阅 ActiveXCtrlHelpers.cs）

（顺便说一句，我现在也在 Safari/Lion 中诅咒自动更正，不断将小写“DLL”更改为“全部”）

* * *

**编辑 2012-08-07**

在 Art 的回答的提示下，我发现：

**从标准 VS2010 命令提示符**

当通过标准 VS2010 命令提示符运行“regasm /codebase”时（并且作为管理员允许 regasm 执行更改），条目被转储到 HKEY_CLASSES_ROOT\Wow6432Node\CLSID 下的注册表中，并且测试脚本在同一提示下失败。

但是我可以在 Excel 2007（32 位）中看到 ActiveX 控件

**从 x64 Win64 VS2010 命令提示符**

在 VS2010 x64 Win64 命令提示符下（再次以管理员身份）运行时，注册表项出现在 HKEY_CLASSES_ROOT\CLSID 下，但这次测试脚本在同一提示符下以及标准 Windows cmd 提示符下运行（但是它们在 32 位提示符下失败） )

但！！我在 Excel 2007（32 位）中看不到活动的 X 控件

~~现在我只需要弄清楚 *nix 'which' 命令的 windows 等效项，以确保我使用~~的是哪个 regasm）'where' 命令

查看 VS2010 和 Windows 7 命令提示符：

```
 VS2010 (standard prompt): cscript => c:\windows\system32\cscript.exe
                              regasm  => c:\windows\Microsoft.net\framework\v4.0.30319\regasm.exe

    VS2010 (x64 Win 64):      cscript => c:\windows\system32\cscript
                              regasm  => c:\windows\Microsoft.net\framework64\v4.0.30319\regasm.exe

    Windows 7  std. prompt:   cscript => c:\windows\system32\cscript.exe

    Windows 7 32 bit prompt:  cscript => c:\windows\SysWOW64\cscript.exe 
```

这一切都开始使我的一些困惑可以理解。我一直在不知不觉中混合和匹配 32 位和 64 位系统，但是 VS2010 标准提示也没有帮助！

（和我最近的烦恼 - VS2010 将文件保存为 UTF-8 和 BOM）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:55:52.220

通过执行以下操作，我能够通过 IE 和 vbscript 完成这项工作：

1.  创建名为“ActiveXTest”的 .NET 类库
2.  添加一个名为 MyObject 的类，其定义如下：

    ```
    namespace ActiveXTest
    {
        [System.Runtime.InteropServices.ComVisible(true)]
        [System.Runtime.InteropServices.ProgId("ActiveXTest.MyObject")]
        [System.Runtime.InteropServices.Guid("df2dac4d-ba8a-4ecc-b76e-958c1bc32f1f")]
        public class MyObject
        {
            public string HelloWorld()
            {
                return "This is Hello World from the COM component!";
            }
        }
    } 
    ```

3.  编译类。转到编译类的文件夹并从 Visual Studio 命令提示符执行以下操作： regasm /codebase ActiveXTest.dll

4.  要从 .vbs 脚本进行测试，请在记事本调用 test.vbs 中创建一个文件。在文件中键入以下内容：

    ```
    Dim myObject
    set myObject = CreateObject("ActiveXTest.MyObject")
    MsgBox(myObject.HelloWorld) 
    ```

打开命令提示符并导航到创建 Test.vbs 的位置并键入：wscript test.vbs。应显示一个对话框，说明“这是来自 COM 组件的 Hellow World”

1.  为了在 IE 中进行测试，我创建了一个包含以下内容的 TEST.HTML 文件：

    ```
    <HTML>
        <HEAD>
            <script language="JScript" language="JavaScript">
              var obj = new ActiveXObject("ActiveXTest.MyObject");
              alert(obj.HelloWorld());          
            </script>
        </HEAD>

       <body>
           <span>nothing to see here!</span>
       <body>
    </HTML> 
    ```

在 IE 中打开 TEST.HTML 文件。您将收到有关 ActiveX 控件的警告；只需说是以允许交互。您将收到一个警告对话框，说明“这是来自 COM 组件的 Hello World”。

可以使用类似的步骤使其在 .js 文件或 Excel VBA 中工作。请注意，如果您更改 ActiveX 程序集的 COM 方法签名，我相信您将需要重新注册它。

# python - 布尔值不变

> ID：11834833
> 
> 赞同：4
> 
> 时间：2012-08-06T19:42:49.307
> 
> 标签：python, python-2.7

```
def shoot(self, limb):
    if not limb:
        pass
    else:
        limb = False    

print Joe.body.head #prints out true
Bob.gun.shoot(Joe.body.head) # should print out false
print Joe.body.head #prints out true (???) 
```

我是 Python 新手，正在制作一款游戏作为 LPTHW 的一部分。我的拍摄功能应该通过将其设置为 false 来禁用肢体，但它根本不编辑布尔值。考虑到我可以直接设置布尔值，这可能看起来有点多余，但拍摄功能将计算的不仅仅是更改布尔值。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T19:46:32.803

Python 按值传递其对象引用，因此通过这样做，`limb = False`您将带有值的新对象引用分配给`False`参数`limb`，而不是修改参数最初持有的对象。（嗯，从技术上讲，它不是一个“新”参考，我相信`True`,`False`和`None`都是 Python 中的单例。）

然而，这是可行的。

```
def shoot(self, other, limbstr):
    try:
        if getattr(other, limbstr):     # Levon's suggestion was a good one
            setattr(other, limbstr, False)
    except AttributeError:
        pass   # If the other doesn't have the specified attribute for whatever reason, then no need to do anything as the bullet will just pass by

Bob.gun.shoot(Joe.body, 'head') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:59:35.937

如果您不需要区分不存在的肢体和之前拍摄的肢体，这只是对 JAB 答案的一个小优化。

```
def shoot(self, other, limbstr):
    if getattr(other, limbstr, False):
        setattr(other, limbstr, False) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T20:04:24.650

在您的代码中，如果`limb`具有值，`False`则它进入不执行任何操作的 then 分支 ( `not False`)，并且值保持不变`False`。If `limb`is `True`then `not True`is`False`并且`else`分支被激活。这样，`limb`被赋值`False`。没有办法进入`True`这段代码。

是对的`limb`引用`False`。即使 are 的自动取消引用值，传递给函数`limb`的`True`原始变量仍将引用原始`True`对象。原因是布尔值是不可变的。对 only 的任何赋值都会`limb`更改引用的值。但是外部参考独立于内部参考。

如果要从函数中获取值，最简单的方法是返回它。或者您必须将引用传递给可变对象。

该方法的设计也很糟糕`shoot()`。假设它是肢体的新值，它会获取布尔值。但是，`head`传递了 的值。完全的混乱永远不会产生预期的结果。`Joe.body.head`is or `True`or`False`传递`Bob.gun.shoot()`给. `gun.shoot()`期望得到什么？

# java - Eclipse 的资源包编辑插件？

> ID：11834834
> 
> 赞同：7
> 
> 时间：2012-08-06T19:42:57.767
> 
> 标签：java, eclipse, resourcebundle

Eclipse 有没有好的资源包编辑插件？

我正在寻找的主要功能是可以查看不同语言的捆绑包中是否存在相同的键。

即，如果我有两个文件`bundle_en_US.properties`并且`bundle_sv_SE.properties`它们的键不匹配，则 Eclipse 会显示错误。

我似乎记得这是 Eclipse 中的默认功能，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T21:13:48.533

这看起来很有希望：

[Eclipse 资源包编辑器](http://essiembre.github.io/eclipse-rbe/)

> 用于编辑 Java 资源包的 Eclipse 插件。让您在一个屏幕中管理所有本地化的属性文件。一些功能：排序键，**缺少键/值的警告图标**，转换为/从Unicode，键的分层视图，更多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:06:16.730

还有[http://code.google.com/a/eclipselabs.org/p/tapiji/wiki/ExtendingCoreRBE](http://code.google.com/a/eclipselabs.org/p/tapiji/wiki/ExtendingCoreRBE)和较旧的[ResourceBundleEditor](http://dev.nightlabs.org/updatesites/development/)（我在 Helios 中成功使用过，还没有尝试 Juno）。

# jsf - 如何在dataTable中的方法中传递值

> ID：11834836
> 
> 赞同：0
> 
> 时间：2012-08-06T19:43:06.640
> 
> 标签：jsf, jsf-2, datatable, variable-assignment

我所拥有的是数据表，并且我有返回列表的方法。

我的语法是

```
 <h:dataTable id="imageList3" 
  value="#{PersonalInformationDataBean.loadReviewReportDataByIdNewFormat()}"
  var="reviewMyList" width="80%" border="1"> 
```

我想要做的是`#{patentMyList.patentId}`在方法中传递变量名称名称`loadReviewReportDataByIdNewFormat()`。但是我不能这样做....

知道如何完成这项工作吗？

我知道如果我有 commandButton，我会使用`<f:setPropertyActionListener>`.

## 笔记 ：

如果我使用，它的工作

```
 <h:dataTable id="imageList3" 
  value="#{PersonalInformationDataBean.loadReviewReportDataByIdNewFormat(1)}"
  var="reviewMyList" width="80%" border="1"> 
```

然而

```
 <h:dataTable id="imageList3" 
  value="#{PersonalInformationDataBean.loadReviewReportDataByIdNewFormat(#{patentMyList.patentId})}"
  var="reviewMyList" width="80%" border="1"> 
```

## 数据类型`patentId`为 Long。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:49:07.417

语法`#{}`激活 ExpressionLanguage 评估，所以你可以这样做：

```
#{yourBean.loadReviewReportDataByIdNewFormat(patentMyList.patentId)} 
```

您可能期望它`$some_variable`就像在 PHP 和其他基于模板的语言中一样，但事实并非如此：一旦激活，您就可以使用普通的变量名称和操作数。

查看[EL 信息页面](https://stackoverflow.com/tags/el/info)了解更多信息。

# c# - C++/CLI 中的类和实例

> ID：11834838
> 
> 赞同：0
> 
> 时间：2012-08-06T19:43:26.530
> 
> 标签：c#, class, c++-cli, converter, instances

我已经使用 C#.net 很长时间了，最​​近我决定切换到 C++/CLI 会有所帮助。所以，我决定买一个转换器并将我的一个较大的项目转换为 C++/CLI，我找到了一个非常好的转换器，只有几个大问题：

对于我在 C# 项目中的每个非静态类，只要代码创建它的新实例，编译器就会出现错误。“缺少类型说明符 - 假定为 int...” 所有类的标题都是`public ref class ClassName : BaseClassName` 这样的，这也很令人困惑，因为应该是静态的类和不应该是静态的类都是这样命名的。

转换器还在代码中这样说的地方留下了注释： `//C++ does not allow initialization of non-static fields in their declarations:` 这些总是在我原来的非静态类之一中，并且总是跟着 `Type VariableName`or`Type ^VaribleName`

因此，显然我不了解 C++/CLI 类是如何工作的，所以我的问题是：C# 和 C++/CLI 中的动态类有什么区别？如何制作动态 C++/CLI 类，我可能做错了什么？为什么 C# 中的所有类（无论是否为静态天气）都在 C++/CLI 中以“ref”为前缀？另外，这是否与在一个文件中包含多个类有关？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:47:58.293

您需要了解 C++/CLI 才能真正理解转换器创建的代码。

基本上，在 C++/CLI 中，`ref class`是一个 C# 风格的类。普通`class`（不带`ref`）是本机 C++ 类定义。

从 C# 转换时，所有 C# 类声明都将结束，`ref class`因为它们是托管 (.NET) 类。

的注释`//C++ does not allow initialization of non-static fields in their declarations`是因为你不能有一个在 C++/CLI 中定义其成员内联的类。例如，这个 C#：

```
class Foo
{
    private int test = 3;
} 
```

需要使用构造函数转换为 C++/CLI：

```
ref class Foo
{
private:
    int test;
public:
    Foo()
    {
       test = 3;
    }
}; 
```

# javascript - 在棘手的情况下从 javascript 回调返回值令人费解

> ID：11834841
> 
> 赞同：0
> 
> 时间：2012-08-06T19:43:46.357
> 
> 标签：javascript, jquery, node.js, asynchronous

我正在制作一个供个人使用的小型 Node.js 应用程序，它使用他们的匿名 API 将上传到我的 Twitter 帐户（pic.twitter.com 链接）的图片侧载到 imgur，用新获得的 imgur 替换 pic.twitter.com 链接链接并将他们的推文保存到磁盘。这是执行此操作的代码位：

```
var 
    jsdom   = require( 'jsdom' )
,   request = require( 'request' )
,   t_pic   = /http:\/\/pic.twitter.com\/([a-z0-9]+)/gi;

function rehostImage( match ) {
    request( match, function( e, r, b ) {
        if ( e ) throw e;
        jsdom.env(
            {
                html: b,
                scripts: ['http://code.jquery.com/jquery-1.7.2.min.js']
            }, 
            function( err, window ) {
                var $ = window.jQuery;
                request.post( 
                    'http://api.imgur.com/2/upload.json', 
                    { 
                        key: 'gh10z9DFZ009876E342dfsfd34234dszSD65XRV5',
                        image:$( '.twimg' ).find( 'img' ).attr( 'src' ) 
                    }, 
                    function( data ) { 
                        return data.upload.links.original; 
                    });
            });
    });
}

var tweets = [], i = 0;

/* code to GET twitter page using "request" goes here similar to rehostImage */

/* same jsdom boilerplate as in rehostImage function goes here to get 
   the jQuery handle on the page DOM. Once we get "$"... */

$( '.tweet-text' ).each( function() { 
    i++;
    tweets[ i ] = $( this ).html();
    if( tweets[i].match( t_pic ) ) { tweets[i].replace( t_pic, rehostImage ); }
}); 
```

代码试图做的很简单：

1.  获取我的推特页面
2.  解析任何 pic.twitter.com 链接的每条推文
3.  获取该页面，遍历 DOM，找到图像 URL 并通过他们的匿名 API 上传到 imgur

问题是这里的正则表达式替换`tweets[i].replace( t_pic, rehostImage )`。`replace`将函数作为第二个参数，其返回值用于替换匹配的字符串；在这种情况下，上传后的最终 imgur URL`data.upload.links.original`替换了我推文中的 pic.twitter.com URL，然后我将其保存到本地磁盘。

当一切都通过回调异步发生时，我如何才能`rehostImage`返回到正则表达式替换？`data.upload.links.original`通常的方法是进行最后的操作，即正则表达式替换，并将其作为可以在之后运行的回调传递，`data.upload.links.original`但由于正则表达式替换是内联发生的，我不知道如何在这里应用该方法。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:56:28.040

如果您想推迟执行替换，直到异步调用返回，您可以使用[$.deferred](http://api.jquery.com/category/deferred-object/)来实现。

这是您如何使用它的示例，您可能需要对其进行调整以适应您的特定行为。

首先，您需要一个延迟对象：

```
var deferred = $.Deferred(); 
```

然后你的异步函数需要返回一个承诺：

```
function rehostImage( match ) {
    // snip
    return deferred.promise();
} 
```

您的替换回调将等待延迟解决：

```
tweets[i].replace(t_pic, function () {
    rehostImage().then(function (data) {
        // the callback you want to execute when the deferred resolves
    });
}); 
```

最后你的异步函数需要解决延迟：

```
function( data ) {
    deferred.resolve(data.upload.links.original); 
}); 
```

# python - Python 2.x minidom：如何设置 unicode 编解码器？

> ID：11834849
> 
> 赞同：-2
> 
> 时间：2012-08-06T19:44:21.520
> 
> 标签：python, unicode, minidom

如何将 minidom 实例配置为具有 unicode 编解码器？

在 XML 文件中处理此代码段：

```
<title type="text">ME850单片机开发实验仪(增强配置)(产品浏览)-伟纳电子-http://www.willar.com/</title> 
```

产生此错误：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 5-12: ordinal not in range(128) 
```

更新：在 Python 3 中按预期工作；显然这是 2.x 的已知限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:50:28.017

在 Python 2.x 中，minidom 只能解析字节字符串。要么首先不解码您的文档[（提示：更具体的建议需要您正在运行的代码）]，要么将其编码为 UTF-8。

或者，您可以切换到 Python 3.x，其中 minidom 可以处理字节以及字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T12:25:42.333

您可以使用：

```
str.encode('utf-8') 
```

# c++ - 维护我的 c++ 项目的版本

> ID：11834852
> 
> 赞同：0
> 
> 时间：2012-08-06T19:44:30.633
> 
> 标签：c++, version-control, project, versioning

维护我的项目版本的有效方法是什么？

我从一个项目开始，我希望它看起来很专业。我想为我的项目做一个版本，比如 1.0 之类的，但我不知道如何维护它或从哪里开始。是否有在小数点之前或小数点之后增加版本的标准，我想我在某处读到了它的主要或次要变化。

此外，是否有现有软件可以根据我对代码所做的更改自动在我的项目版本上运行？

注意：我使用 Code::Blocks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:51:07.090

有关版本控制的大量重要信息， 请参阅[此内容！](http://en.wikipedia.org/wiki/Software_versioning)您没有提及您使用的是哪个开发平台，但它们中的大多数都支持自动递增的版本号，但这仅表示不同的构建，而不是一个全新的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:10:00.230

这是一篇介绍版本控制基础知识的文章[Source Code Control](http://www.ericsink.com/scm/source_control.html)

我所做的是有一个四字段版本号。这由以下内容组成：

*   主要版本号（很少更改，仅在功能上发生重大更改）
*   次要版本号（有时会随着功能的大变化而变化）
*   问题编号（随功能的微小变化而变化）
*   每次构建时都会递增的构建号

此编号方案的目的是，当出现现场问题时，我可以确定我的存储库中的哪个版本的源代码用于现场站点存在问题的特定构建。我也可以知道我需要建立什么样的测试环境，例如文件、数据库和设备。

当我对可能会以某种方式影响数据库架构的功能进行更改、添加新参数、为​​客户请求新功能时，问题编号往往会发生变化。当新功能或客户的更改很重要时，次要版本号往往会更改。

主要数字往往会在发生真正惊天动地的事情时发生变化，这意味着从较旧的主要版本升级到较新的主要版本是一项重大的升级工作。它发生变化的情况是当我们从 Windows CE 迁移到 Windows XP 时，操作系统的变化需要一些源代码的变化。同时，我们还为远东亚洲语言提供了 UNICODE 支持。

主要是提供某种方式，当您看到完整的版本号时，您可以立即知道那里的主要功能，并了解该版本主要支持和不支持的内容。

当特定字段增加时，以下字段将重置回一 (1)。因此，当从 Rel 2.2.1 到 Rel 2.3.0 时，第一个字段保持不变，第二个字段递增，第三个字段设置为零，第四个字段（内部版本号）将从第一个版本开始. 然后，随着版本 2.3.0 的构建，第四个字段（内部版本号）将增加。

每次我进行构建时，我都会将该构建的构建产品（安装程序）与该构建的构建注释一起存储在服务器上，该构建说明描述了为构建所做的更改。我还将在我的存储库（Subversion）中创建一个分支，以便轻松找到该构建的源代码。

# javascript - 如何实现悬停图像效果？

> ID：11834855
> 
> 赞同：0
> 
> 时间：2012-08-06T19:44:38.533
> 
> 标签：javascript, jquery, image, css

我正在尝试实现在[wookmark](http://www.wookmark.com/)上看到的相同的鼠标悬停图像效果，我假设这是通过一些 jquery 和 css 魔法完成的。有没有什么好的教程可以展示这是如何完成的？

浏览 jquery 文档，我似乎需要像这样使用悬停：

```
$("li.preview").hover(function(e){  
    // show and hide come css magic
}); 
```

不知道去哪里使用它的CSS部分......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T19:55:52.910

您可以在图像周围创建一个包装器，在该包装器内，您可以拥有想要在悬停时出现/消失的按钮。然后在图像悬停时显示/隐藏这些按钮。

HTML --

```
<span class="image-wrapper">
    <span class="image-options"></span>
    <img src="..." />
</span> 
```

CSS——

```
.image-wrapper {
    position : relative;
    display  : inline-block;
}
.image-wrapper .image-options {
    position : absolute;
    top      : 0;
    right    : 0;
    left     : 0;
    height   : 25px;
    z-index  : 2;
    display  : none;
}
.image-wrapper:hover .image-options {
    display : block;
} 
```

您还可以使用 CSS3 淡入/淡出选项元素：

```
.image-wrapper {
    position : relative;
    display  : inline-block;
}
.image-wrapper img {
    position : relative;
}
.image-wrapper .image-options {
    position : absolute;
    top      : 0;
    right    : 0;
    left     : 0;
    height   : 25px;
    z-index  : 2;
    background         : grey;
    border             : 1px solid black;
    opacity            : 0;
    filter             : alpha(opacity=0);
    -webkit-transition : opacity 0.25s linear;
    -moz-transition    : opacity 0.25s linear;
    -ms-transition     : opacity 0.25s linear;
    -o-transition      : opacity 0.25s linear;
    transition         : opacity 0.25s linear;
}
.image-wrapper:hover .image-options {
    opacity            : 1;
    filter             : alpha(opacity=100);
}​ 
```

这是一个仅使用 CSS 的演示：http: [//jsfiddle.net/fJsJb/](http://jsfiddle.net/fJsJb/)

当然，您可以使用 JS 实现淡化：

```
$('.image-wrapper').on('mouseenter', function () {
    $(this).children('.image-options').stop().fadeIn(250);
}).on('mouseleave', function () {
    $(this).children('.image-options').stop().fadeOut(250);
}); 
```

这是一个使用 JS 的演示：http: [//jsfiddle.net/fJsJb/1/](http://jsfiddle.net/fJsJb/1/)

**更新**

您还可以通过为属性设置动画来创建幻灯片动画，`top`如下所示：

```
.image-wrapper {
    position : relative;
    display  : inline-block;
    overflow : hidden;
}
.image-wrapper img {
    position : relative;
}
.image-wrapper .image-options {
    position : absolute;
    top      : -25px;
    right    : 0;
    left     : 0;
    height   : 25px;
    z-index  : 2;
    background         : grey;
    border             : 1px solid black;
    -webkit-transition : top 0.25s linear;
    -moz-transition    : top 0.25s linear;
    -ms-transition     : top 0.25s linear;
    -o-transition      : top 0.25s linear;
    transition         : top 0.25s linear;
}
.image-wrapper:hover .image-options {
    top : 0;
}​ 
```

这是一个演示：http: [//jsfiddle.net/fJsJb/2/](http://jsfiddle.net/fJsJb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:55:35.387

你可以像这样使用css。

```
<style>
.imageBox { float:left; width:100px; height:100px; position:relative; background:#000; overflow:hidden; }
.imageBox .imageActions { position:absolute; top:0; left:0; width:100%; height:40px; background:#999; display:none; }
.imageBox img { width:100%; }
.imageBox:hover .imageActions { display:block; }
</style>

<div class="imageBox">
    <div class="imageActions "></div>
    <img src=".." />
</div> 
```

[演示](http://jsfiddle.net/ztGwx/)

# file - 移动上传的文件错误 CakePHP 2.x

> ID：11834856
> 
> 赞同：0
> 
> 时间：2012-08-06T19:44:42.323
> 
> 标签：file, cakephp, upload, directory

我正在尝试将文件上传到 webroot/files 目录。我还在我的数据库表中包含了该文件的记录。

将文件保存到数据库有效，我使用 move_uploaded_file() 方法，但它不起作用。它不会返回任何错误，但文件不会显示在文件夹中。我检查了权限，它们都是 755。这是我控制器中的操作：

```
if ($this->request->is('post'))
  {
      $uploadedFile = array();
      $filename = $this->request->data['Document']['MyFile']['name'];
      $fileData = fread(fopen($this->request->data['Document']['MyFile']['tmp_name'], "r"), $this->request->data['Document']['MyFile']['size']);

      $uploadedFile['MyFile']['name'] = $this->request->data['Document']['MyFile']['name'];
      $uploadedFile['MyFile']['type'] = $this->request->data['Document']['MyFile']['type'];
      $uploadedFile['MyFile']['size'] = $this->request->data['Document']['MyFile']['size'];
      $uploadedFile['MyFile']['data'] = $fileData;

  $filePath = WEBROOT_DIR . DS . 'files' . DS . $uploadedFile['MyFile']['name'];
 debug($filePath);
      if (move_uploaded_file($filename, $filePath))
      {
          echo "No Error";
          $this->Session->setFlash('Uploaded file has been moved SUCCESS.');
      }
      else
      {
          $this->Session->setFlash('Unable to Move file.');
      }
      if ($this->MyFile->save($uploadedFile))
      {
          $this->Session->setFlash('Uploaded file has been saved.');
      }
      else
      {
          $this->Session->setFlash('Unable to save file.');
      }
  } 
```

这是来自`debug($filePath);` 'webroot/files/filename' -> 的输出，其中 filename 是上传文件的实际名称。

任何帮助都会很棒。谢谢

更新------------------------------------------------ 我调试了 $this->request->data，这是我上传小文件时的输出。

```
array(
    'Document' => array(
        'MyFile' => array(
            'name' => 'add.ctp',
            'type' => 'application/octet-stream',
            'tmp_name' => '/tmp/phpcxBA9B',
            'error' => (int) 0,
            'size' => (int) 3700
        )
    )
) 
```

我还在下面添加了一条 else 语句`move_uploaded_file()`，它确实将闪存设置为无法移动文件。

我仍然不确定为什么，它可以是`$filename`和`$filePath`变量吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:51:20.897

您是否尝试过使用常量`WWW_ROOT`而不是`WEBROOT_DIR`？您需要提供文件系统的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:13:11.047

你需要移动'tmp_name'，即

```
$filename = $this->request->data['Document']['MyFile']['tmp_name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T18:47:11.513

您可能会遇到以下问题：

```
$filePath = WEBROOT_DIR . DS . 'files' . DS . $uploadedFile['MyFile']['name']; 
```

错误消息将如下所示：

```
move_uploaded_file(webroot\files\File_Name): failed to open stream: No such file or directory [APP\Controller\CustomerController.php cakephp 
```

如果是这样，请将上面的行替换为：

```
$filePath = WWW_ROOT . DS . 'files' . DS . $uploadedFile['MyFile']['name']; 
```

方法，

```
WEBROOT_DIR . DS . 
```

和

```
WWW_ROOT . 
```

它会移动上传的文件。

# php - 这个 PHP 正则表达式是什么意思？

> ID：11834861
> 
> 赞同：-4
> 
> 时间：2012-08-06T19:45:17.607
> 
> 标签：php, regex, ereg

我正在学习 PHP 正则表达式，但遇到了一些我无法理解的问题。

本书给出了验证电子邮件地址的示例。

```
if (ereg("^[^@]+@([a-z0-9\-]+\.)+[a-z]{2,4}$", $email)) 
```

我不清楚这个表达式的几个元素。

1.  这是什么意思`[^@]+@`
2.  中括号的用途是什么`([a-z0-9\-]+\.)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T19:46:59.800

`[^@]+@`方法：

```
[   - Match this group of characters
 ^@ - Anything that is NOT an at sign
]
+   - One or more times
@   - Match an at sign 
```

因此，它基本上匹配第一个 at 符号之前的每个字符。

括号中的目的`([a-z0-9-]+.)`是创建一个[捕获组](http://www.regular-expressions.info/brackets.html)，一旦该组捕获了一定数量的文本，您应该可以稍后引用它。

另请注意，`ereg_*`不推荐使用函数，并且您的书必须有点过时。现在，我们使用`preg_*`函数族。[在这个 SO question](https://stackoverflow.com/questions/6270004/converting-ereg-expressions-to-preg)中可以找到关于转换它们的教程。

# c# - 将 IFilter 与 x86 应用程序一起使用

> ID：11834863
> 
> 赞同：0
> 
> 时间：2012-08-06T19:45:24.563
> 
> 标签：c#, .net, x86, ifilter

我开发了一个需要编译为 x86 的应用程序，因为它使用的组件只能作为 x86 版本使用。我的应用程序使用 IFilter 来获取文件的内容。现在，我还需要 x86 版本的 IFilter——甚至我的应用程序也可以在 ax x64 机器上运行。我已经为 Office 应用程序找到了它。但不适用于 PDF 和 RTF。有人知道，我在哪里可以得到这个过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:13:52.053

Adobe 有一个 x64 PDF IFilter 可供下载。（Adobe x86 PDF IFilter 与 Adob​​e Acrobat 9 和 Adob​​e Reader 9 捆绑在一起。） [http://www.adobe.com/support/downloads/detail.jsp?ftpID=4025](http://www.adobe.com/support/downloads/detail.jsp?ftpID=4025)

FoxIt 有一个 x86 和 x64 的多线程 PDF IFilter 出售。（提供 30 天试用下载。）您可以搜索“foxitsoftware”和“IFilter”

我没有真正的 RTF IFilter 经验，但关于 RTF IFilter，您可以查看 Praveen Agrawal 的说明：http: [//social.msdn.microsoft.com/Forums/en/sharepointecm/thread/21b1705f-eb7c-480b-8c11-35c6a5d965ab](http://social.msdn.microsoft.com/Forums/en/sharepointecm/thread/21b1705f-eb7c-480b-8c11-35c6a5d965ab)

# qt - 如何将 QLineEdit 默认文本设置为一个空格？

> ID：11834864
> 
> 赞同：3
> 
> 时间：2012-08-06T19:45:24.993
> 
> 标签：qt, qlineedit

`QLineEdit`我在 Qt Creator GUI Designer 中输入了一个空格作为 a的文本。我可以在设计器视图中看到空间存在，但是如果我编译并运行它，空间就会消失。我希望这个空格是 a`QLineEdit`的默认文本，如何设置它，或者告诉 Qt 不要删除那个空格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T20:32:46.897

如果您想要在小部件为空时拥有默认文本，请使用[setPlaceholderText(QString)](http://qt-project.org/doc/qt-4.8/qlineedit.html#placeholderText-prop)

如果您只想设置一个初始值，请在您的应用程序/小部件/类的构造函数中使用[`setText(QString)`](http://qt-project.org/doc/qt-4.8/qlineedit.html#text-prop)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T20:33:27.787

我的猜测是空间消失了，因为 UI 被存储为 XML，并且只包含空格的节点被剥离（[参见这个问题](https://stackoverflow.com/questions/10968940/why-is-qt-losing-my-thin-space-unicode-character-when-loading-an-xml-file)）。

但是您可以在窗口的构造函数中将空间设置为 QLineEdit：

```
ui->lineEdit->setText(" "); 
```

# c# - 迭代器模式传递参数

> ID：11834866
> 
> 赞同：0
> 
> 时间：2012-08-06T19:45:35.367
> 
> 标签：c#, design-patterns

如何通过参数传递我的变量`Iterator`？

```
protected void LeXMLNode(FileUpload fupArquivo)
        {
            XmlDocument doc = new XmlDocument();
            doc.Load(fupArquivo.FileContent);

            XmlNodeList ndo = doc.SelectNodes("*");

            var it = ndo.GetEnumerator();
            using (it as IDisposable)
            while (it.MoveNext())
            {                
                //// Pass the variable it as parameter
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:47:58.933

使用`.Current`属性：

```
using (var it = ndo.GetEnumerator())
    while (it.MoveNext())
    {                
        //// Pass the variable it as parameter
        SomeFunction(it.Current);
    } 
```

# linux - 是否有用于提取页面范围以制作更小的 PDF 的 Linux CLI 工具？

> ID：11834869
> 
> 赞同：2
> 
> 时间：2012-08-06T19:45:43.483
> 
> 标签：linux, pdf, command-line

是否有用于提取 pdf 部分并制作新的更小的 pdf 的 cli 工具？我想做这样的事情：pdftool -s 4 -e 10 'thefile.pdf' "thenew.pdf'，其中 -s 和 -e 分别是开始页和结束页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:50:38.153

您可以将[ghostscript 与 pdf 一起](http://www.ghostscript.com/doc/9.05/Use.htm#PDF)使用。

```
gs -dFirstPage=1 -dLastPage=10 -sDEVICE=pdfwrite -sOutputFile='thenew.pdf' 'thefile.pdf' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T21:34:34.530

我现在首选的方法是斯宾塞在他的回答中所说的方法（+1！）。

其他人更喜欢`pdftk`：

```
pdftk thefile.pdf cat 4-10 output pages_4-10_from_thefile.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-11T12:35:16.320

另一种选择是[pdfjam](http://www2.warwick.ac.uk/fac/sci/statistics/staff/academic-research/firth/software/pdfjam/)：

```
$ pdfjam input.pdf 4-10 -o output.pdf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-14T05:56:41.327

我`qpdf`在 Fedora 24 中使用得很好

```
qpdf infile.pdf --pages infile.pdf 1-5 -- outfile.pdf 
```

[qpdf手册](http://qpdf.sourceforge.net/files/qpdf-manual.html)

# validation - Salesforce Apex：验证格式和值的日期

> ID：11834873
> 
> 赞同：1
> 
> 时间：2012-08-06T19:46:03.920
> 
> 标签：validation, date, salesforce, apex-code

我需要验证用户通过 visualforce 页面输入的日期字段。我的代码期望的格式是“yyyy-MM-dd”。

在顶点处理这个问题的最佳方法是什么。在使用 Apex 中不可用的某些标准类（例如 SimpleDateFormat）之前，我在 Java 中做过类似的事情。

现在我可以使用正则表达式检查“格式”是否正确。但我还必须阻止用户输入满足格式的“9999-99-99”。我希望 Salesforce 有一个好的内置解决方案。

谢谢，卡尔文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:16:47.893

你可以试试我所说的控制欺骗。我基本上创建了一个空的 sObject，它有一个日期字段，如 Task 对象（或类似的轻量级对象）。在屏幕上，我显示将呈现本地日期字段的任务日期的输入。这样做，您可以让 salesforce 验证用户输入的日期，并且用户也可以获得漂亮的日历弹出窗口。

这是控制器中的示例

```
public class MyController {
public Task DateInput {get;set;}

public MyController() {
    DateInput = new Task();
}

public void save() {
    Date dInputDate = DateInput.ActivityDate;

    //Format Date
    DateTime dtValue = DateTime.newInstance(dInputDate.year(), dInputDate.month(), dInputDate.day());
    string sFormattedDate = dtValue.format('yyyy-MM-dd');

}
} 
```

这是页面的样子

```
<apex:page controller="MyController">

<apex:form>
    <apex:pageBlock>
        <apex:pageBlockSection>
            <apex:pageBlockSectionItem>
                <apex:outputLabel for="inputDate" value="My Date"/>
                <apex:inputField value="{!DateInput.ActivityDate}" />
            </apex:pageBlockSectionItem>
        </apex:pageBlockSection>
    </apex:pageBlock>
</apex:form>
</apex:page> 
```

您注意到我在 save 方法中所做的格式化。您不能在 Date 上使用格式，但可以在 DateTime 上使用，所以我只需将 Date 转换为 DateTime，然后使用 format 方法来格式化我的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:57:58.610

伙计们，我设法解决了我的问题，因为无论如何它有点独特。

所以我使用正则表达式来验证输入日期的格式，以确保它是 yyyy-MM-dd 格式。

我使用的`Date.valueOf` 这个内置方法总是采用 yyyy-MM-dd 形式的日期。如果它具有像 9999-99-99 等错误的值，它会引发异常......我向用户显示异常的消息，`e.getMessage()`以完成我对日期字段的验证。

# python - 如何在 Python 中读取 LV2 ttl 文件？

> ID：11834876
> 
> 赞同：1
> 
> 时间：2012-08-06T19:46:13.140
> 
> 标签：python, rdf

我有一个 LV2 插件，我想使用 Python 来提取它的元数据 - 插件名称、描述、控制和音频端口列表以及每个端口的规范。

使用 LADSPA 的指令非常清晰，尽管在 Python 中实现有点困难：我只需要调用 ladspa_descriptor() 函数。现在有了 LV2，有一个 .ttl 文件，访问起来很简单，但解析起来更复杂。

是否有任何 python 库可以使这项工作变得简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:38:11.700

LV2 文档生成工具使用 RDFLib。它可能是 Python 最流行的 RDF 接口，尽管它不仅仅解析 Turtle。如果性能不是问题，这是一个不错的选择，但不幸的是*真的很*慢。

如果您需要实际实例化和使用插件，您可能希望使用现有的 LV2 实现。正如史蒂夫所说，[Lilv](http://drobilla.net/software/lilv)就是为此而生的。它不限于任何静态默认位置，而是会查看 LV2_PATH 中的所有位置。您可以在调用 Lilv 之前将此环境变量设置为您想要的任何值，它只会查看这些位置。或者，如果你想一次只加载一个包，有一个函数：lilv_world_load_bundle()。

Lilv 中包含基于 SWIG 的 Python 绑定，但它们实际上无法让您处理数据。然而，有一个项目来包装 Lilv，它允许使用 scipy 数组处理音频：http://pyslv2.sourceforge.net/ [（](http://pyslv2.sourceforge.net/)尽管它们确实是 Lilv 绑定而不是其前身 SLV2 的绑定）

也就是说，如果您只需要从 Turtle 文件中获取静态信息，那么涉及 C 库可能比它的价值更麻烦。使用标准数据文件的一大优势是易于使用现有工具。要获取插件上的端口数，您只需计算与模式匹配的三元组的数量（插件、lv2:port、*）。这是一个示例 Python 脚本，它打印插件的端口数，给定要读取的文件和插件 URI 作为命令行参数：

```
#!/usr/bin/env python
import rdflib
import sys

lv2 = rdflib.Namespace('http://lv2plug.in/ns/lv2core#')

path = sys.argv[1]
plugin = rdflib.URIRef(sys.argv[2])

model = rdflib.ConjunctiveGraph()
model.parse(path, format='n3')

num_ports = 0
for i in model.triples(plugin, lv2.port, None]):
    num_ports += 1

print('%s has %u ports' % (plugin, num_ports)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:54:53.553

这是如何获取每个插件支持的端口数：

```
w = lilv.World()
w.load_all()
for p in w.get_all_plugins():
    print p.get_name().as_string(), p.get_num_ports() 
```

至少这是我在试图解决这个问题时得到的全部。

# firefox - 重定向到 Zencart 显示 403 错误

> ID：11834878
> 
> 赞同：1
> 
> 时间：2012-08-06T19:46:16.593
> 
> 标签：firefox, google-chrome, zen-cart

我同时使用 Chrome 和 Firefox 访问[Zencart](http://www.zen-cart.com/)网站，但作为回报，我收到这样的错误

```
Forbidden

You don't have permission to access / on this server.

Additionally, a 403 Forbidden error was encountered while trying to use an ErrorDocument to handle the request. 
```

有人可以告诉我我在哪里做错了吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:18:16.587

我想我会尝试帮助你，因为没有其他人有......虽然我想没有其他人有的原因是因为你的问题中的信息太少。我假设这发生在每个浏览器中，因为它似乎是服务器问题。解决此问题的第一步是检查您对 varios 目录具有正确的文件权限。查看本指南了解详情： [http ://www.zen-cart.com/content.php?51-how-do-i-set-permissions-on-files-folders](http://www.zen-cart.com/content.php?51-how-do-i-set-permissions-on-files-folders)

如果那里一切正常，那么它可能是两件事之一，要么是服务器配置问题......你的站点根目录中是否有一个限制访问的 htaccess？

其次，它可能是某个地方的损坏文件，请尝试删除所有内容并再次下载zen cart。

如果这是新安装，您还没有在这里说，如果是这样，上面的最后一个解决方案可能是您的最佳选择。如果没有，那么如果您可以发布服务器日志并提供有关正在发生的事情，您所做的事情，您托管的服务器类型等的更多详细信息，那么我将尝试进一步提供帮助。

如果它是一个已开发的站点并且您没有备份，那么您先生是一个愚蠢的熊，应该为您未来的项目研究某种版本控制，例如 bitbucket。

最后，虽然我会在此处发布更多详细信息并再次尝试获得帮助，但在此站点上查看 zen cart 的人并不多，因此可能值得尝试 zen cart 帮助论坛。[http://www.zen-cart.com/forum.php](http://www.zen-cart.com/forum.php)

希望这可以帮助。

# algorithm - 完全断开二分图

> ID：11834881
> 
> 赞同：4
> 
> 时间：2012-08-06T19:46:32.690
> 
> 标签：algorithm, graph, graph-theory, graph-algorithm, bipartite

我有一个断开的二部无向图。我想完全断开图表。我可以执行的唯一操作是删除节点。删除一个节点会自动删除它的边。任务是最小化要删除的节点数。图中的每个节点最多有 4 条边。

通过完全断开图表，我的意思是不应该通过链接连接两个节点。基本上是一个空边集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T20:21:32.147

我认为，你不能证明你的算法是最优的，因为事实上，它不是最优的。

要完全断开您的图以最小化要删除的节点数，您必须删除属于图的最小顶点覆盖的所有节点。搜索最小顶点覆盖通常是 NP 完全的，但对于二部图，有一个多项式时间的解决方案。

在图中找到最大匹配（可能使用[Hopcroft–Karp 算法](http://en.wikipedia.org/wiki/Hopcroft%E2%80%93Karp_algorithm)）。然后使用[König 定理](http://en.wikipedia.org/wiki/K%C3%B6nig%27s_theorem_%28graph_theory%29)得到最小顶点覆盖：

> 考虑一个二分图，其中顶点被划分为左 (L) 和右 (R) 集。假设有一个最大匹配，它将边缘划分为匹配中使用的边（E_m）和不匹配的边（E_0）。令 T 包含来自 L 的所有不匹配的顶点，以及通过从 E_0 沿边从左到右以及从 E_m 沿边从右到左可从这些顶点到达的所有顶点。这实质上意味着对于 L 中的每个不匹配的顶点，我们将出现在从 E_0 和 E_m 的边之间交替的路径中出现的所有顶点添加到 T 中。
> 
> 那么 (L\T) OR (R AND T) 是一个最小顶点覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T20:35:03.030

这是您建议的算法的反例。

![在此处输入图像描述](../Images/5d5c6855bcc4a9036bdcb2561c2ffdfe.png)

最好的解决方案是删除节点 A 和 B，即使它们是不同的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:46:32.690

我已经想到了一个算法，但无法证明它是否是最优的。

我的算法：在每个断开的子图上，我运行一个 BFS 并相应地着色。然后我确定每种颜色着色的节点数，并取两者中的最小值并存储。我对每个子图重复该过程并加起来以获得所需的最小值。帮我证明算法是否正确。

编辑：上述算法不是最优的。接受的答案已被验证是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:11:08.867

由于所有边缘都从一组到另一组，因此使用 BFS 找到这两组并使用 2 种颜色着色。然后删除较小集合中的节点。

由于它们之间没有边，其余节点也断开连接。

[作为预处理步骤，您可以先省略具有 0 条边的节点。]

# ruby-on-rails - 具有旧架构和复合键的单表继承

> ID：11834884
> 
> 赞同：0
> 
> 时间：2012-08-06T19:46:34.933
> 
> 标签：ruby-on-rails, activerecord, single-table-inheritance

我正在尝试使用旧模式设置单表继承，但遇到了困难。这是表 bms_codes 的架构，继承自：

```
create_table "bms_codes", :id => false, :force => true do |t|
  t.decimal  "code_id",                               :null => false
  t.string   "code_group",             :limit => 35,  :null => false
  t.string   "code_name_short",        :limit => 100
  ...
end 
```

这是code.rb。我已经设置了列别名，所以有一个类型列可以继承。

```
class Code < ActiveRecord::Base
  set_table_name :bms_codes
  set_primary_keys :code_id, :code_group #composite keys using the composite_primary_keys gem

  alias_attribute :id, :code_id
  alias_attribute :type, :code_group
  alias_attribute :description, :code_name_short
end 
```

据我了解，inquiry_tracking_role.rb 应该从代码中提取所有具有“查询跟踪角色”类型的记录。这个对吗？如果我在控制台中键入 InquiryTrackingRole.all，我会得到与 Code.all 相同的结果。

```
class InquiryTrackingRole < Code
end 
```

我正在尝试做的事情是可能的，还是我们的架构过于fubar'ed？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:42:40.890

ActiveRecord 假设数据库属于应用程序，并且数据库将遵循 ActiveRecord 约定和假设。它并非旨在将任何模式映射到任何域模型。

如果你想将你的模式映射到你的域模型，你可以试试 DataMapper。

# php - mysql数据库只进一次

> ID：11834885
> 
> 赞同：0
> 
> 时间：2012-08-06T19:46:39.987
> 
> 标签：php, mysql, html, database

每次用户单击表单中的提交按钮时，我都会尝试将新信息输入数据库。它工作得很好，但只能工作一次。所以它会在数据库中输入一行，然后如果用户再次填写表格并单击提交，则不会将任何信息输入到数据库中，直到我删除前一行，所以如果数据库为空，它就可以工作。这是我将其输入数据库的代码，如果您需要更多信息来帮助让我知道我会给您评分，一切都提前谢谢

```
if($_POST['submit']){
    $query = mysql_query("SELECT * FROM chanels WHERE cname = '$cname'");
    $numrows = mysql_num_rows($query);
    if($numrows == 1) {
         echo "You Channel has already been added. Go back your <a
               href='./memberpage.php'>Station Page.</a>";
    }else{
          if($_POST['description']){
               $description = $_POST['description'];
               if(strlen($description) < 250 ){
                   $code = $_GET['code'];
                   $category = $_POST['category'];
                   mysql_query("INSERT INTO chanels VALUES 
                              ('','$code','$cname','$category','$description',''
                              )");
                   echo "You Channel has been added. Go back your <a 
                                 href='./memberpage.php'>Station Page.</a>";

               }else
                   echo "Your description must be less than 250 characters!";
         }else
             echo "You must enter a description!";  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:50:48.850

您有条件指定，如果 cname 存在记录，则不执行任何操作。我认为这可能与您的插入只执行一次有关。我不知道 cname 是什么，以及每次提交后 cname 是否不同，但如果不是，您将永远无法进入 else 条件。

```
$query = mysql_query("SELECT * FROM chanels WHERE cname = '$cname'");
$numrows = mysql_num_rows($query);
if($numrows == 1){
     echo "You Channel has already been added. Go back your <a href='./memberpage.php'>Station Page.</a>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:51:20.393

您的 if else 语句限制了功能。

您可以添加一行，因为该行

```
if($numrows == 1){ 
```

添加一行后，满足 if 语句条件，$numrows =1。此时，您实际向数据库添加行的 else 语句永远不会运行！

# java - 如何检测 JTree 上的选择更改是由键盘或鼠标做出的？

> ID：11834888
> 
> 赞同：2
> 
> 时间：2012-08-06T19:46:55.653
> 
> 标签：java, swing, selection, jtree, listeners

树选择侦听器有没有办法知道选择更改是由键盘事件还是鼠标事件引起的？我想为这两个触发不同的事件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:53:56.100

您可以添加一个鼠标监听器和一个按键监听器，然后手动计算他们选择的那个，然后在那里执行您的特定操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T19:37:45.493

是的，您可以知道选择更改是源自键盘事件还是鼠标事件。在选择更改侦听器中，使用以下代码：

```
import java.awt.EventQueue;
import java.awt.AWTEvent;
import java.awt.event.*;
...
AWTEvent event = EventQueue.getCurrentEvent();
if ( event instanceof MouseEvent) {
    System.out.println("selection change: got mouse event");
} else if ( event instanceof KeyEvent) {
    System.out.println("selection change: got key event");
} else {
    System.out.println("selection change: got something else");
} 
```

这应该适用于所有类型的 AWT 和 Swing 事件。它应该在所有情况下告诉您当前正在处理什么事件。但是，它只会告诉您最高级别的事件……即在`EventQueue`. 在 OP 的情况下，该事件（鼠标或键事件）稍后会触发选择更改“事件”，就 AWT 或 Swing 而言，这并不是一个真正的事件，但您可能会认为它是因为它的类被命名为`TreeSelectionEvent`。但这一切都取决于事件的处理方式以及它是否使用`EventQueue`.

请注意，如果侦听器方法调用的代码会触发其他事件（例如，`AbstractTableModel.fireTableDataChanged`或者`JPanel.add`），则当前事件可能会被新的当前事件覆盖（并且完成后不会恢复到您感兴趣的事件）。因此，对于我概述的工作方法，您需要在处理的早期获取当前事件并存储它。我相信这将比建议 Key and Mouse 事件侦听器的其他方法更强大。我现在成功地使用了这种方法。

# python - 登录 phpBB 论坛。Cookie 已更改

> ID：11834895
> 
> 赞同：2
> 
> 时间：2012-08-06T19:47:28.447
> 
> 标签：python, cookies, session-cookies, phpbb3

我正在尝试创建一个小脚本，该脚本将在后台运行并检查论坛上的新消息（使用 phpBB3）。由于许多子论坛需要登录用户的权限才能查看，我创建了一个脚本，该脚本将向服务器发送后请求以首先登录。

该脚本当前成功登录，并收到一条欢迎消息，告诉我我已登录。但是当我访问新页面时，脚本似乎忘记了我已登录并且我的会话cookie已更改。

这是我创建的一些小测试代码，它给了我错误：

```
import urllib, urllib2, cookielib, re, time

username = "username"
password = "password"
loginsite = "http://www.mydomain.com/ucp.php?mode=login"
ok_tekst = "You have been successfully logged in."        
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'username' : username, 'password' : password, 
                                "autologin" : "on", 'login' : 'Login'})

resp = opener.open(loginsite, login_data)
if ok_tekst in resp.read():
    print "Login successfull"
    print "Cookies are:"
    for cookie in cj:
        print cookie

    post_site = "http://www.mydomain.com/"
    ok_tekst = "Logout [ " + username + " ]"
    resp = opener.open(post_site)
    readHTML = resp.read()
    if ok_tekst not in readHTML:
        print ""
        print "Unsuccessfull, I am now logged out?!"
        print "Cookies are now:"
        for cookie in cj:
            print cookie 
```

这会产生以下输出，其中还显示了不同 cookie 的值：

```
>> python test.py
Login successfull
Cookies are:
<Cookie phpbb3_pwsle_k=b3fe944b89bfbce2 for .mydomain.com/>
<Cookie phpbb3_pwsle_sid=318b3ace3d52409fb5e1eef87433fbdb for .mydomain.com/>
<Cookie phpbb3_pwsle_u=419 for .mydomain.com/>

Unsuccessfull, I am now logged out?!
Cookies are now:
<Cookie phpbb3_pwsle_k= for .mydomain.com/>
<Cookie phpbb3_pwsle_sid=719520cd3a16526d6da4fa2fbdfe40f4 for .mydomain.com/>
<Cookie phpbb3_pwsle_u=1 for .mydomain.com/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:31:11.670

好的，所以我现在自己解决了这个问题 - 似乎我正在运行的论坛启用了一些浏览器保护，如果我使用设置为 Python/URLLIB 的 USER-AGENT（在 http-header 中）访问，它将取消任何会话。通过更改标题以假装我是 google-chrome 解决了我的问题。

# c++ - 与 C++03 相比，C++11 带来了哪些好处？

> ID：11834896
> 
> 赞同：3
> 
> 时间：2012-08-06T19:47:28.940
> 
> 标签：c++, c++11

我将在一个月后开始学习 C++11，并且想知道，与 C++03 相比，C++11 提供了哪些好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T20:05:49.330

如果我必须把它归结为两件事，我会说“右值引用和可变参数模板”是 C++11 对 C++03 最深刻的改进。*两者都可以让你做本来应该*一直都可以做的事情，并为语言增加了巨大的表达能力。最后，由于右值引用，您可以拥有`unique_ptr`具有移动语义的适当容器和容器，并且由于两种构造和谐地发挥作用，因此可以直接构造而不是复制构造：

```
template <typename ...Args>
void construct(void * p, Args &&... args)
{
    ::new (p) T(std::forward<Args>(args)...);
} 
```

另一个巨大的改进是将内存模型合并到允许对并发执行（多线程）进行标准化描述的语言中。

不过，还有大量较小的添加使语言更具表现力，并允许您做以前根本无法做的事情：

*   大括号初始化允许您初始化类成员数组和值构造自动对象。

*   初始化器列表允许您初始化容器。

*   更好的常量表达式概念。

*   为类和联合更好地指定内存布局，以及细粒度的“琐碎”概念，以尽可能地进行优化。

*   lambda 表达式和闭包使算法和函数式编程变得更加容易和可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T21:37:14.193

C++11 的目标是改进 C++ 擅长的所有方面。表现力、性能、类型安全以及改进 C++ 不擅长的东西；一致性和易于学习。C++11 还增加了对在 C++98 首次标准化后变得更加重要的计算趋势的支持，例如多线程

为了提高性能，C++11 添加了右值引用，它允许 C++11 代码避免一些昂贵的副本，而无需难以阅读或理解有时在 C++03 中使用的变通办法。并且任何新功能仍然遵循“不为不使用的东西付费”的格言，保持 C++ 的性能能力。

C++11 增加了很多表达能力，包括可变参数模板、通用属性、用户定义的文字和默认的特殊函数。C++11 还使表达某些可以用 C++03 完成但不太容易的事情变得更加容易，例如静态断言、编译时表达式和模板类型别名，以及删除的特殊函数。

为了类型安全，现在有强类型枚举、显式转换运算符、不会进行丢失精度转换的初始化语法、nullptr 关键字。

C++11 移除了许多限制，使其更加一致且更易于学习。一些例子是非静态数据成员的类内初始化、继承/委托构造函数、初始化列表、右尖括号修复、函数模板的默认模板参数、枚举前向声明、无限制联合等。还有许多新功能可以每个“替换”几个旧功能，这意味着新程序员需要学习更少才能开始。

* * *

最初该问题还要求与 C 进行比较。

关于 C++ 和 C，C++11 带来了许多改进，这些改进反映了自 C++ 标准 (C++98) 基于 C99 之前的 C 以来添加到 C 中的功能。例如，C++11 添加了 C99 的可变参数宏`long long`，对扩展整数类型和`__func__`预定义标识符的要求。C++11 现在要求复数的布局，使其与 C99 中 _Complex 数字的（假定的）布局兼容。可以使用其他特性来代替添加到 C 中的特性，例如 C++11 的统一初始化语法代替 C99 的复合字面量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T20:03:46.243

C 和 C++ 是完全不同的语言，所以回答这部分问题没有意义。

至于 C++ 到 C++11，您只是在语言中添加了更多现代功能，以帮助您编写更好的面向对象代码。

随着时间的推移，在 BOOST 和其他允许您使用的地方开发了库：

*   智能指针
*   正则表达式
*   Lambda 表达式
*   自动变量
*   等等

因此，在大多数情况下，您拥有更多支持您的编码的库，因此您可以使用更多“标准”代码并编写更少的用户代码。这意味着您可以减少调试并更快地编码。

**补充说明：**这些特性中有很多都是为了促进良好的编程实践。例如，智能指针可帮助您使用 RAII（资源分配即初始化）来确保您动态获取的资源在不再被引用时被释放。

使用 C++11 就像在您已经拥有一辆法拉利时获得了一辆新法拉利。旧的很好并且可以完成工作，但是新的更好并且具有甜蜜的新功能，可以让您更安全，更快地驾驶相同的课程，同时享受更多乐趣:)

# cuda - Cuda 内核产生的结果向量为零

> ID：11834898
> 
> 赞同：0
> 
> 时间：2012-08-06T19:47:43.497
> 
> 标签：cuda, gpgpu

这是我为并行计算一些数组而启动的内核。

```
 __device__ bool mult(int colsize,int rowsize,int *Aj,int *Bi,int *val)
    {       
        for(int j = 0; j < rowsize;j++)
        {           
           for(int k = 0;k < colsize;k++)
            {   
              if(Aj[j] == Bi[k])
               {    
                return true;
                }                               
            }           
        }
            return false;       
    }

__global__ void kernel(int *Aptr,int *Aj,int *Bptr,int *Bi,int rows,int cols,int *Cjc)
    {
        int tid = threadIdx.x + blockIdx.x * blockDim.x;
        int i;
        if(tid < cols)
        {
            int beg = Bptr[tid];
            int end = Bptr[tid+1];
            for(i = 0;i < rows;i++)
            {
                int cbeg = Aptr[i];
                int cend = Aptr[i+1];
                if(mult(end - beg,cend - cbeg,Aj+cbeg,Bi+beg))
                {                                                
                     Cjc[tid+1] += 1;
                     //atomicAdd(Cjc+tid+1,1);           
                }
            }                
        }               
    } 
```

这是我决定网格和块的配置的方式

```
int numBlocks,numThreads;

        if(q % 32 == 0)
        {
            numBlocks = q/32;
            numThreads = 32;
        }
        else
        {
            numBlocks = (q+31)/32;
            numThreads = 32;
        }
findkernel<<<numBlocks,numThreads>>>(devAptr,devAcol,devBjc,devBir,m,q,d_Cjc); 
```

我正在使用带有 CC 2.0 的 GTX 480。现在我面临的问题是，每当`q`增加超出数组中`4096`的值时，`Cjc`都会产生`0`. 我知道我可以在 X 方向上使用的最大块数是`65535`，每个块最多可以有`(1024,1024,64)`线程。那么为什么这个内核会为`Cjc`数组计算错误的输出呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:14:09.080

您发布的代码似乎有一些问题：

1.  我猜`findkernel`是`kernel`在上面的CUDA代码中？
2.  `kernel`有 8 个参数，但你只使用 7 个参数来调用`findkernel`. 这看起来不太对！
3.  在`kernel`，你测试`if(tid < cols)`- 我想这应该是`if(tid < count)`？
4.  为什么`kernel`期望`count`是一个指针？我认为您不会将`int`指针而是常规整数值传递给`findkernel`.
5.  为什么`__device__ bool mult`get `count`/`int *val`如果不使用它？

我猜#3 或#4 可能是你的问题的根源，但你也应该看看其他的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:50:27.563

`cudaError_t`好的，所以当我尝试从设备到主机`cudaMemcpy` 的阵列时，我终于想通了`d_Cjc`，它会引发以下错误。

```
CUDA error: the launch timed out and was terminated 
```

事实证明，其中的一些计算`findkernel`花费了相当长的时间，这导致显示驱动程序由于操作系统“看门狗”时间限制而终止程序。

我相信我将不得不关闭 X 服务器或 ssh 我的 gpu 机器（从另一台机器）移除它的显示。这将为我赢得一些时间来进行不会超过操作系统的“看门狗”限制的计算。

# linux - 尾部反转/打印除最后 n 行之外的所有内容？

> ID：11834899
> 
> 赞同：49
> 
> 时间：2012-08-06T19:47:48.247
> 
> 标签：linux, bash, command-line

是否有（POSIX 命令行）方法可以打印除最后 n 行之外的所有文件？用例是，我将有多个未知大小的文件，所有这些文件都包含一个已知大小的样板页脚，我想删除它。我想知道在自己编写之前是否已经有一个实用程序可以执行此操作。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-06T19:51:23.413

大多数版本的 head(1) - 特别是 GNU 派生的，但不是 BSD 派生的 - 具有执行此操作的功能。如果您使用负数作为要打印的行数，它将显示文件的顶部，但末尾除外。

像这样：

```
head -n -10 textfile 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-24T19:18:01.097

可能比“wc”+“做数学”+“尾巴”方法效率低，但更容易看：

```
tail -r file.txt | tail +NUM | tail -r 
```

哪里`NUM`比您要删除的结束行数多一，例如 +11 将打印除最后 10 行之外的所有行。这适用于不支持`head -n -NUM`语法的 BSD。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-06T19:51:57.190

该`head`实用程序是您的朋友。

从手册页`head`：

> ```
> -n, --lines=[-]K
>      print the first K lines instead of the first 10;
>        with the leading `-', print all but the last K lines of each file 
> ```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-06T21:19:07.763

没有标准的命令可以做到这一点，但是您可以使用 awk 或 sed 来填充*N*行的缓冲区，并在它满后从头部打印。例如用 awk：

```
awk -v n=5 '{if(NR>n) print a[NR%n]; a[NR%n]=$0}' file 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-07T05:52:31.207

```
cat <filename> | head -n -10 # Everything except last 10 lines of a file
cat <filename> | tail -n +10 # Everything except 1st 10 lines of a file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T20:40:00.080

如果页脚以没有出现在其他地方的一致行开头，则可以使用`sed`：

```
sed '/FIRST_LINE_OF_FOOTER/q' filename 
```

打印页脚的第一行；如果你想避免这种情况：

```
sed -n '/FIRST_LINE_OF_FOOTER/q;p' filename 
```

如果将来页脚的大小发生变化，这可能比计算行更可靠。（或者如果第一行发生变化，它可能会变得不那么健壮。）

`head`如果您的系统命令不支持，另一种选择`head -n -10`是预先计算要显示的行数。以下取决于特定于 bash 的语法：

```
lines=$(wc -l < filename) ; (( lines -= 10 )) ; head -$lines filename 
```

请注意，为了向后兼容`head -NUMBER`，某些版本支持该语法；`head`POSIX 只允许这种`head -n NUMBER`形式。POSIX 也只允许参数为`-n`十进制正整数；`head -n 0`不一定是无操作。

符合 POSIX 的解决方案是：

```
lines=$(wc -l < filename) ; lines=$(($lines - 10)) ; head -n $lines filename 
```

如果你需要处理古老的 pre-POSIX shell，你可以考虑这个：

```
lines=`wc -l < filename` ; lines=`expr $lines - 10` ; head -n $lines filename 
```

如果文件长度为 10 行或更少，这些中的任何一个都可能会做奇怪的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-13T16:34:23.323

tac 文件.txt | 尾 +[n+1] | tac

这个答案类似于 user9645 的，但它避免了 tail -r 命令，这在许多系统中也不是一个有效的选项。例如，参见[https://ubuntuforums.org/showthread.php?t=1346596&s=4246c451162feff4e519ef2f5cb1a45f&p=8444785#post8444785](https://ubuntuforums.org/showthread.php?t=1346596&s=4246c451162feff4e519ef2f5cb1a45f&p=8444785#post8444785)作为示例。

请注意，在我尝试测试的系统上需要 +1（在括号中），但在您的系统上可能不需要它。因此，要删除最后一行，我必须将 2 放在括号中。这可能与您需要最后一行以常规换行符结尾的事实有关。可以说，这使最后一行成为空白行。如果您不这样做，则 tac 命令将合并最后两行，因此删除“最后”行（或 tail 命令的第一行）实际上将删除最后两行。

对于缺少改进版 head 的系统，我的回答也应该是迄今为止列出的最快的解决方案。所以，我认为它是列出的所有答案中最强大和最快的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-01T22:30:28.807

很简单。您必须将 + 添加到要避免的行数。

此示例为您提供除前 9 行之外的所有行

tail -n +10 输入文件

（是的，不是前 10 个......因为它的计数不同......如果你想要 10 个，只需键入 tail -n 11 inputfile）

# twitter-bootstrap - Simpleform + bootstrap：去掉必填字段的省略号和悬停文本

> ID：11834909
> 
> 赞同：0
> 
> 时间：2012-08-06T19:48:22.747
> 
> 标签：twitter-bootstrap, simple-form, twitter-bootstrap-rails

我最近升级了一起使用的 simpleform 和 bootstrap。我的必填字段现在在星号下方有省略号，当用户悬停时，他们会得到一个工具提示。

如何自定义或删除该行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:14:16.920

我刚刚制作了椭圆的包装类`display: none`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T17:53:29.427

如果您只是隐藏缩写，则会丢失有关所需字段的信息。您需要做的是正确设置缩写的样式，例如去掉省略号：

```
/** CUSTOMIZE SIMPLEFORM SHITTY STYLINGS **/
abbr[title='required'] {
  border-bottom: none;
} 
```

# javascript - 在 JavaScript 中向上下文菜单添加条目

> ID：11834911
> 
> 赞同：0
> 
> 时间：2012-08-06T19:48:28.997
> 
> 标签：javascript, contextmenu, right-click

我以前在 SO ([这里](https://stackoverflow.com/questions/3793703/jquery-add-entry-to-the-rightclick-contextmenu)) 上看到过这个问题，但我已经看到它发生了，右键单击 JWPlayer 会显示“关于 JWPlayer”等选项。

任何人都知道 JWPlayer 是如何做到的，即使它不是 JS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:28:36.040

像 Flash 这样的插件可以创建上下文菜单项，但只有当用户在插件的容器中右键单击时（因此单个 Flash 视频无法更改页面其他地方发生的右键单击菜单）。

[JWPlayer 本质](http://www.longtailvideo.com/players)上是一个基于 Flash 的播放器，具有 HTML5 后备功能。如果您在浏览器中禁用 Flash 并强制使用 HTML5/JavaScript，您会看到上下文菜单是默认菜单。JavaScript 不能改变上下文菜单；闪光可以。

# python - com客户端上的ctypes错误

> ID：11834912
> 
> 赞同：0
> 
> 时间：2012-08-06T19:48:41.223
> 
> 标签：python, com, ctypes

我正在尝试创建一个 com 客户端以将消息发送到服务器。我有 ole 查看器定义并在 python 中创建了结构（类），用于构造一个复杂的结构，其中包含更多的结构和枚举。

一切似乎进展顺利，但是当我尝试将 SampleObject* 传递给客户端调用时，出现此错误：

```
ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>:
expected LP__SampleObject instance instead of LP__SampleObject 
```

这看起来很奇怪。我正在做的事情是这样的（这是我得到错误的地方）：

```
dialog = _SampleObject('hello', struct1, 'hi_there', struct2, 1, struct3, 1, 1, 1, 'me', 'you', 'him')
obj.COM_function( pointer(dialog) ) 
```

我已经尝试了很多事情，但无法解决该错误。有任何想法吗 ？

*（obj 只是一个 cc.CreateObject() coclass 对象，可以正常工作）*

我真的看不出问题，即使是comtype定义也在界面中显示：

```
( ['in'], POINTER(_SampleObject), 'pAction' ), 
```

与指针（对话框）完美契合。这是一个非常奇怪的错误，它可能是一个 but on comtypes 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:05:13.620

`ctypes`您是否不止一次地定义了论点的结构和联合？

如果您定义一个`Structure`或`Union`子类，在 C 库函数中使用它`argtypes`，重新定义结构或联合，然后尝试将重新定义的类的实例传递给 C 函数，您将收到类似于您的错误看到。

我采用了我在[这个答案](https://stackoverflow.com/a/11385138)中使用的代码，并添加了一个（完全没有必要的）重新定义与它一起使用的结构。（我还将`byref`最后的`pointer`- using`byref`给你一个不同的错误消息。）Python代码最终如下：

```
from ctypes import *

class TestStruct(Structure):
    _fields_ = [("a", c_int),
                ("array", (c_float * 4) * 30)]

slib = CDLL("slib.dll")
slib.print_struct.argtypes = [POINTER(TestStruct)]
slib.print_struct.restype = None

# Redefine the ctypes structure.
class TestStruct(Structure):
    _fields_ = [("a", c_int),
                ("array", (c_float * 4) * 30)]

t = TestStruct()

for i in range(30):
    for j in range(4):
        t.array[i][j] = i + 0.1*j

slib.print_struct(pointer(t)) 
```

当我运行这个修改后的脚本时，我得到了以下输出：

```
C:\Users\Luke\Python stuff>slib2.py
Traceback (most recent call last):
  File "C:\Users\Luke\Python stuff\slib2.py", line 21, in <module>
    slib.print_struct(pointer(t))
ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>: expected LP_TestStruct instance instead of LP_TestStruct 
```

# java - XSL 转换的异常输出

> ID：11834915
> 
> 赞同：1
> 
> 时间：2012-08-06T19:49:03.593
> 
> 标签：java, xml, transformation, xslt

我有一个 xml 文档和一个样式表，用于将文档转换为另一个有用的 xml。作为参考，xml 文档有点像这样：

```
<root>
 <element1>value1</element1>
 <element2>value2</element2>
 <element3>value3</element3>
 <element4>..some more levels of data</element4>
</root> 
```

样式表看起来有点像这样：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:include href="errorResponse.xsl"/>
<xsl:template match="root/element4">
        <xsl:element name="myRoot">
            <xsl:element name="myElement">
                <xsl:apply-templates select="./someElement/someOtherElement"/>
            </xsl:element>
        </xsl:element>
</xsl:template> 
```

我得到的输出 xml 字符串是这样的：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
value1
value2
value3
<myRoot><myelement> some data </myElemrnt></myroot> 
```

我用于转换的代码片段是这样的：

```
InputStream styleSheet = new FileUtil().getFileStream("xsltFileName");
StreamSource xslStream = new StreamSource(styleSheet);

DOMSource in = new DOMSource(inputXMLDoc);
ByteArrayOutputStream baos = new ByteArrayOutputStream();

TransformerFactory transFact = TransformerFactory.newInstance();
transFact.setURIResolver(new XsltURIResolver());
Transformer trans = transFact.newTransformer(xslStream);
trans.transform(in, new StreamResult(baos));
System.out.println(baos.toString()); // displays the above output 
```

但是输出格式不理想。我不想要 value1、value2、value3。这也为生成的新 XML 进一步处理带来了问题。

我已经看到很多关于转换的问题。这困扰了我很长时间。如果有人能指出我哪里出错了，将不胜感激。

还要指出我在整个过程中是否遵循了任何不正确的约定。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:06:57.730

[由于Default Template Rule](http://docstore.mik.ua/orelly/xml/xmlnut/ch08_07.htm)输出文本节点，因此您获得了该输出。如果您不想要这些节点，则需要通过匹配它们并将它们替换为空（即空模板）来明确排除它们。

尝试将此模板添加到您的样式表中：

```
<xsl:template match="/">
  <xsl:apply-templates select="root/element4"/>
</xsl:template> 
```

它匹配根并丢弃除`root/element4`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T04:36:38.417

**这里发生的情况是 XSLT[内置模板](http://www.w3.org/TR/1999/REC-xslt-19991116#built-in-rule)被应用**到任何没有被模板显式匹配的节点。内置模板的最终效果是将任何文本节点（应用了 tey）复制到输出。

**抑制这种不需要的输出的最简单和最短的方法之一**是添加以下模板：

```
<xsl:template match="text()"/> 
```

这会导致选择此模板执行的任何文本节点不被复制到输出。

# php - 在多维数组中查找重复值

> ID：11834916
> 
> 赞同：0
> 
> 时间：2012-08-06T19:49:03.593
> 
> 标签：php, mysql, multidimensional-array

我有一个来自 MySQL 数据库调用的多维数组。它看起来像这样：

```
array(2) { 
    [0]=> array(4) { 
        ["STATE"]=> "1" 
        ["COUNTY"]=> "101" 
        ["NEIGHBORHOOD"]=> "111111"
    }

    [1]=> array(4) { 
        ["STATE"]=> "2" 
        ["COUNTY"]=> "201" 
        ["NEIGHBORHOOD"]=> "222222"
    }

    [2]=> array(4) { 
        ["STATE"]=> "1" 
        ["COUNTY"]=> "201" 
        ["NEIGHBORHOOD"]=> "111111"
    }
} 
```

我需要能够获取数组中出现的每个州的每个县的邻域值。数据结构是邻里号是县唯一的，州是唯一的。

我正在考虑为每个州的每个县创建一个数组，但是当州和县相同时，我不确定如何找到所有邻里的值。

根据评论中的要求，我有一个包含州、县、邻里、纬度、经度信息的数据库。我正在使用以下 SQL 语句来获取用户输入位置的用户选择半径内的所有 NEIGHBORHOODS。

```
"SELECT `STATE` ,  `COUNTY` ,  `NEIGHBORHOOD`,((ACOS(SIN($lat* PI() / 180) * SIN(`LATITUDE` * PI() / 180) + 
         COS($lat* PI() / 180) * COS(`LATITUDE` * PI() / 180) * COS(($long- `LONGITUDE`) * 
         PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS distance
         FROM `censustracts` 
         HAVING distance<='$radius';" 
```

这些邻居可以在不同的州和县，我无法知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:09:50.873

也许有更好的方法来做到这一点，即不通过 SQL 查询获取重复项，但您可以散列您的唯一值以确保删除重复项。

```
$tmp = array();
foreach($array as $r) {
    $tmp[ $r["STATE"] ][ $r["COUNTY"] ][ $r["NEIGHBORHOOD"] ] = NULL;
} 
```

那应该给你一个这样的数组：

```
 [1] => {
           [101] => {
                      [111111] => NULL
                      [333333] => NULL
                      [......] => NULL
                      [xxxxxx] => NULL
                    }
           [201] => {
                      [111111] => NULL
                    }
         }
  [2] => {
           [201] => {
                      [222222] => NULL
                    }
         } 
```

考虑到这种结构，您可以将其封装到一个类中，以返回给定州或县的所有社区之类的东西。

```
class myClass{
    protected $_data;

    public function __construct($array) 
    {
        $tmp = array();
        foreach($array as $r) {
            $tmp[ $r["STATE"] ][ $r["COUNTY"] ][ $r["NEIGHBORHOOD"] ] = NULL;
        }
       $this->_data = $tmp;
    }

    public function getNeighborhoods($state, $county) {
        return array_keys($this->_data[$state][$county]);
    }
} 
```

至少，这个概念是存在的。这个想法是像这样散列它会删除重复项，因为它们最终会相互覆盖，并且它嵌套在层次结构中，这是它自然发生的方式。

**编辑**

我很快将一个测试类放在一起，并用该类更新了我的代码。请注意，没有有效性检查等。但这可能是您获得所需内容的开始。

我希望这会有所帮助！

# c# - 如何使用 C# 将数据属性添加到下拉菜单

> ID：11834920
> 
> 赞同：6
> 
> 时间：2012-08-06T19:49:22.403
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个标准的下拉列表，并且能够将数据绑定到列表。

```
<asp:DropDownList runat="server" ID="ddlMake" ClientIDMode="Static" DataTextField="Name" DataValueField="URL" AppendDataBoundItems="true">
    <asp:ListItem>Select Make</asp:ListItem>
</asp:DropDownList> 
```

我想为选项添加一个数据属性，如下所示：

```
<asp:ListItem data-siteid="<%# DataBinder.Eval(Container.DataItem, "SiteID") %>">Select Make</asp:ListItem> 
```

我显然遇到了错误，因为它无法识别数据站点 ID。

**该列表是数据绑定的。**

任何提示都会很方便

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-06T20:03:28.143

您可以在代码隐藏中执行此操作。我不确定这是否是最优雅的方法，但它应该有效。

```
Dim dataSrc() As String = {"ABC", "123", "!@*#"}
drp.DataSource = dataSrc
drp.DataBind()
For i = 0 To drp.Items.Count - 1
    drp.Items(i).Attributes.Add("data-siteId", dataSrc(i))
Next 
```

此外，如果这只是没有数据绑定的东西，您可以考虑使用 HtmlSelect 控件，它应该也可以工作：

```
<select id="drp2" runat="server">
  <option data-siteId="2">ABC</option>
  <option data-siteId="3">123</option>
  <option data-siteId="4">@*!&</option>
</select> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T13:16:25.873

我最终使用了转发器，因为该页面不需要重新发布。这使我不必处理 ondatabound 事件。

```
<asp:Repeater runat="server" ID="rptDropDown">
    <HeaderTemplate>
        <select id="ddlMake">
            <option value="">Select Make</option>
    </HeaderTemplate>
    <ItemTemplate>
        <option data-siteid="<%# DataBinder.Eval(Container.DataItem, "SiteID") %>" value="<%# DataBinder.Eval(Container.DataItem, "URL") %>"><%# DataBinder.Eval(Container.DataItem, "Name") %></option>
    </ItemTemplate>
    <FooterTemplate>
        </select>
    </FooterTemplate>        
</asp:Repeater> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T20:04:48.790

如果不需要事件处理，你可以用纯 html 重写它：

```
 <select>
      <%foreach (var item in DataSource){%>
        <option data-siteid="<%=item.SiteID%>" value="<%=item.Value%>"><%=item.Name%> </option>
      <%}%>
    </select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T14:00:11.780

我最终这样做了（`ds`数据集在哪里）：

```
for (int row = 0; row <= ds.Tables(0).Rows.Count - 1; row++) {
    ddl.Items(row).Attributes.Add("data-siteid", ds.Tables(0).Rows(row)("SiteID"));
} 
```

# ipad - 代码签名错误：身份“iPhone 开发人员：xxx (zzz)”与默认钥匙串中的任何有效证书/私钥对不匹配

> ID：11834921
> 
> 赞同：2
> 
> 时间：2012-08-06T19:49:22.427
> 
> 标签：ipad, ios5, ios-simulator

请帮忙，我花了 4 个小时删除和重新创建密钥和配置文件，试图让我的 iOS 5 应用程序在 xcode 中构建以部署到 ipad。我正在使用内部分发。几个月前，我经历了同样的地狱，但终于让它工作了。尝试了我以前尝试过的所有方法，但现在不起作用。我在 xcode 中收到此错误：“代码签名错误：身份‘iPhone 开发人员：xxx (zzz)’与默认钥匙串中的任何有效证书/私钥对不匹配”。

Keychain Access 和 Xcode 中的一切看起来都是正确的。在 Xcode 中，它显示我的配置文件为有效。

我已经完成了所有步骤（多次）：[iPhone 应用签名：在您的钥匙串中找不到与此配置文件匹配的有效签名身份](https://stackoverflow.com/questions/999313/iphone-app-signing-a-valid-signing-identity-matching-this-profile-could-not-be)

我已经删除了所有的密钥和配置文件，创建了所有新的，创建了新的 App ID（我现在有很多我无法删除的）。我浏览过许多在线文章，他们都说要尝试相同的事情：删除、重新创建和重新安装密钥和配置文件。那对我不起作用。

请帮忙，我无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:40:00.877

只是想我会在你没有重新启动 xcode 的情况下插话。

几天前我在组装一台新笔记本电脑时遇到了类似的问题。我已经按照我的想法准备好了一切，但是 xcode 会给我同样的错误。

关闭并重新启动 Xcode 后，错误消失了，一切都按预期工作。我正在使用 xcode 4.4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:49:13.030

有时，在项目的 project.pbxproj 文件中删除对以前配置文件的所有引用会有所帮助。这是有关如何执行此操作的[简短教程](http://www.pixeldock.com/blog/code-sign-error-provisioning-profile-cant-be-found/)（该教程中的错误消息与您的不完全匹配，但可能值得一试）：

# xml - DocBook 文档中的文档起点

> ID：11834922
> 
> 赞同：0
> 
> 时间：2012-08-06T19:49:23.993
> 
> 标签：xml, docbook, docbook-5

我需要知道Docbook中的文档起点列表，例如书籍，文章等。有人可以给出这样的起点列表吗？以章节等元素开头是否违法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:23:52.240

您可以将章节作为开始（根）元素。

DocBook 5 文档中的有效根元素在 DocBook [5: The Definitive Guide](http://docbook.org/tdg5/en/html/ch02.html#roots)中列出：

> ...只有带有 info 元素的元素可以是根元素，但目前并非每个带有 info 元素的元素都包含在内。在 DocBook V5.0 中，以下元素可用：致谢、附录、文章、参考书目、书籍、章节、版权、奉献、词汇表、索引、段落、部分、前言、refentry、reference、refsect1、refsect2、refsect3、refsection、sect1 、sect2、sect3、sect4、sect5、section、set、setindex 和 toc。

# asp.net - 在 GridView 皮肤中应用 ItemStyle 或 HeaderStyle

> ID：11834926
> 
> 赞同：1
> 
> 时间：2012-08-06T19:49:48.537
> 
> 标签：asp.net

我想`GridView`使用皮肤或 ASP.NET 主题的其他功能（或实际上任何其他自动化方式）将默认的基于列的样式应用于我的控件。

目前我的 GridView 皮肤如下所示：

```
<asp:GridView runat="server" GridLines="None">
    <HeaderStyle CssClass="GridViewRowHeader" />
    <FooterStyle CssClass="GridViewRowHeader" />
    <RowStyle CssClass="GridViewRowA" />
    <AlternatingRowStyle CssClass="GridViewRowB" />
</asp:GridView> 
```

典型的 GridView 列定义如下所示：

```
 <Columns>
        <asp:BoundField DataField="ExitTimestamp" HeaderText="Exit" SortExpression="ExitTimestamp">
            <ItemStyle CssClass="GridViewCell" />
            <HeaderStyle CssClass="GridViewHeader" />
        </asp:BoundField>
        <asp:TemplateField HeaderText="Visitor Name/Agency">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("VisitorName") %>'></asp:Label><br />
                <asp:Label ID="Label2" runat="server" Text='<%# Bind("VisitorAgency") %>'></asp:Label>
            </ItemTemplate>
            <ItemStyle CssClass="GridViewCell" />
            <HeaderStyle CssClass="GridViewHeader" />
        </asp:TemplateField>
    </Columns> 
```

我想要解决的是必须将`<ItemStyle>`and元素添加到我的控件`<HeaderStyle>`中的每个列定义中。`GridView`我在皮肤文件中尝试了各种方法，包括在其中添加`<Columns>`容器和`<ItemStyle>`元素，但似乎没有任何效果。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T16:58:16.947

对于后代，这就是我最终使用 CSS 专门解决问题的方式。

`GridView`我在我的皮肤文件中分配了一个 CSS 类，如下所示：

`<asp:GridView runat="server" CssClass="GridView">`

该样式在 和 中选择`td`（项目）和`th`（标题）单元格，其工作方式与直接在列定义`GridView`中应用纯 CSS 类一样：`ItemStyle``HeaderStyle`

```
table.GridView tr td, table.GridView tr th
{
   /* style attributes here */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:04:27.153

这里的建议可能对您有用[http://forums.asp.net/t/1063057.aspx](http://forums.asp.net/t/1063057.aspx)简而言之，定义并添加一个 CssClass 到您的 gridview 然后使用普通的旧 CSS 样式表来定位和装饰控件。

# c# - 将列表视图绑定到集合....动态的

> ID：11834927
> 
> 赞同：0
> 
> 时间：2012-08-06T19:49:49.380
> 
> 标签：c#, .net, wpf, xaml

WPF 世界的新手，需要实现动态列视图。

我可以在概念上可视化这个想法，但无法将其转化为实现。

StackPanel -> ListView -> 文本框。

整个想法是将配置文件显示为所选实体的列，根据所选实体，配置文件可以更改，因此我想将配置文件显示为动态列。一个配置文件将有 54 个项目，可以垂直表示为一个文本框。

因此，如果我有一个表示配置文件项目（54 个项目）的可观察集合，当绑定到用户控件并且用户控件垂直加载到列表视图中时。

因此，添加的每个配置文件都将水平添加到堆栈面板上，因此我可以将所有配置文件作为动态列。

关于如何通过 xaml 实现它以及我的模型对象应该是什么样子的任何想法或指示？

希望我已经正确表达了我的想法:)

** 添加所需内容的非常快速的手绘草图。

列 col1..col2..... 理想情况下是一个集合，该集合具有要显示在由列内的矩形框表示的文本框中的数据。

每一列都可以变化。

因此，理想情况下，我从服务中获得的数据是集合的集合。

所以第一个集合包含 Col1..Col2..Col3... 项目...

起初以为这听起来很像网格，但数据模型不适合网格显示样式。

Col1..col2..col3 中的每一个都作为另一个集合在第一个集合中。![在此处输入图像描述](../Images/974d881ae11a34ec3746685a819188a4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:39:39.227

由于 SO 和各种答案的混合搭配，我已经设法解决了上述数据的布局和显示问题。

因此，下面的 XAML 会水平创建任意数量的列表项。

```
<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel Height="301"  HorizontalAlignment="Left" Margin="37,42,0,0" Name="stackPanel1" 
                VerticalAlignment="Top" Width="795">
        <StackPanel.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Black" Offset="0" />
                <GradientStop Color="White" Offset="1" />
                <GradientStop Color="Silver" Offset="0.006" />
            </LinearGradientBrush>
        </StackPanel.Background>

        <ItemsControl x:Name="tStack" Grid.Column="0" ItemsSource="{Binding Profiles}" >
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid HorizontalAlignment="Left">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Button Grid.Row="0" Content="{Binding Name}"/>
                        <ListBox Grid.Row="1" Height="209" Name="listBox1" Width="98" HorizontalAlignment="Left"
                            ItemsSource="{Binding Path=Profile, Mode=TwoWay}"/>
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</Grid> 
```

# scala - scala中的相互递归类型

> ID：11834928
> 
> 赞同：1
> 
> 时间：2012-08-06T19:49:49.710
> 
> 标签：scala, functional-programming

scala中是否可以有相互递归类型？

我有一个带有 bugtracker 问题列表的 xml 文件。是原始数据。该模型具有不同的问题类型，例如“任务”、“子任务”、“错误”、“特殊错误”。

现在我想将我的原始数据解析为任务和子任务的层次结构：

```
// data type for field contents
abstract class Field
case class Id(raw : string) extends Field
case class Status(raw : string) extends Field
...

// data type for primary model
abstract class Issue(id : String, ...)
case class Task(id : Id, status : Status ..., subtasks : List[Subtask] ) extends Issue(id, ...)
case class Subtask(id : Id, status : Status ..., parent: Task) extends Issue(id, ...) 
```

我想知道这种相互递归在理论上是否可行？

第二个问题：

我将模型渲染为一些 wiki 标记。这适用于重载的递归 render() ：数据类型的类中的字符串。（也许我应该有一个“可渲染”的超类！？）

什么是最干净的解析方式，即我想要一个递归

```
fromXML : scala.xml.Elem => Issue / Field 
```

我会把它放在哪里？它会是什么样子？IIUC，同伴是为案例类自动生成的，所以我不能添加它？

我有这个例如：

```
def fromXml(e : Elem) = e match {
  case <a>test</a> => Id("test") 
  case _ => Status("Pre-analysed")
} 
```

但是我没有给函数一个类型。该函数的类型是*什么*？

我也想过将xml-elem直接传递给ADT的构造函数，这样会不会很聪明？或者我应该将 XML 解析和模型创建分开吗？

* * *

天哪，在学习了 scala 基础知识并编写了一些脚本和函数（并且想太多 java）之后，我终于明白了如何编写 ADT 并且可以像在过去的 Haskell 时代一样表达自己:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:20:50.447

**A：**关于不可变、相互依赖的类的初始化，请看[这个问题](https://stackoverflow.com/questions/7507965/instantiating-immutable-paired-objects)。

**B：**关于您的问题`render: Foo => String`功能与`Renderable`超类，恕我直言，这或多或少是功能和面向对象方法之间的设计决定。我个人不认为其中一个优于另一个，这只是品味问题。论文[“Independently Extensible Solutions to the Expression Problem”](http://scala-lang.org/docu/files/IC_TECH_REPORT_200433.pdf)对两者进行了很好的比较，尽管在稍微复杂的上下文中（然而，这是一本很好的读物）。

**C:** Companion objects 是由编译器创建的，但是如果你还指定了一个companion object，编译器会将两者合并。

**D：**在您当前的类层次结构中，并没有重要的公共超类型`Issue`，`Field`这使得很难为 提供有意义的返回类型`fromXML`。不过，您可以使用`Either[Issue, Field]`，但这对我来说看起来很可疑。一般来说，我会避免将应该返回成熟节点（例如`Task`）的函数与返回“内部”节点（例如`Status`）的函数混合。

**E：**您是否看过现有的解决方案，例如[scalaxb](http://scalaxb.org/)？[您可以在此处](https://stackoverflow.com/questions/4967160/which-xml-serialization-library-for-scala)和[此处](http://www.scala-lang.org/node/10774)找到更多链接。

# sql - 有没有办法对当前行上方的行求和

> ID：11834930
> 
> 赞同：2
> 
> 时间：2012-08-06T19:49:57.970
> 
> 标签：sql, ms-access

我正在尝试将电子表格复制到数据库中，但我很困惑如何只对当前行上方的行求和，就像我在 excel 中可以做的那样。例如，一列的公式如下：

```
=SUM($B$9:$B9)/SUM($E$9:$E9)
=SUM($B$9:$B10)/SUM($E$9:$E10)
=SUM($B$9:$B11)/SUM($E$9:$E11) 
```

.... 等等。

我需要以某种方式在我的选择 qry 中重现此公式，但不确定如何？

```
SELECT Column1,Column2, SUM(Column1) + SUM(Column2) as Expr1
From tblTest
Group By Column1,Column2 
```

有任何想法吗？

```
 Col1    Col2    Col3  Total     Col1/Total      Trying to get this               
    7       0       3     10         70.00%          70.00%
    1       0       1                100.00%         72.73%
    2       0       4     6          33.33%          58.82%
    3       1       1     5          60.00%          59.09% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:13:28.717

诀窍是您想使用子查询来识别所有先前的行。

```
SELECT  ID, 
        (
            SELECT SUM(ValueColumn)
            FROM    Test T2
            WHERE T2.ID <= T1.ID
        ) RunningSum
FROM
        Test T1
ORDER BY
        T1.ID 
```

这将起作用。如果您有一个大型数据集，您可能只想选择数据并在您的应用程序中进行计算，因为您将能够保持运行总和，因为您循环遍历数据比此查询运行效率更高。

# crystal-reports - 未指定报告名称 --Crystal 报告 RAS 9

> ID：11834933
> 
> 赞同：0
> 
> 时间：2012-08-06T19:50:10.707
> 
> 标签：crystal-reports

水晶报表抛出错误“未指定报表名称”。

我在用

1.  RAS 9
2.  参数字段.asp
3.  ActivexViewer.asp
4.  rptserver.asp（它没有获取此文件中的报告名称）

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:08:43.197

尝试像这样添加`<Report>`标签`<CrystalReportViewer>`：

```
<CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" AutoDataBind="True" ReportSourceID="CrystalReportSource1" />
<CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
<Report FileName="CrystalReport.rpt">
</Report>
</CR:CrystalReportSource> 
```

**或者**

像这样动态添加 Crystal Reports 源：

```
ReportDocument reportdocument = new ReportDocument();
reportdocument.Load(Server.MapPath("CrystalReport.rpt"));
reportdocument.SetDatabaseLogon("Username","Password","Server","Database");
CrystalReportViewer1.ReportSource = reportdocument; 
```

# php - GAE - Facebook 图移植

> ID：11834940
> 
> 赞同：0
> 
> 时间：2012-08-06T19:50:40.633
> 
> 标签：php, python, google-app-engine

有谁知道我可以在哪里找到代码的`python`（AppEngine）端口`Facebook Graph` `object`？

[此处](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/)的示例显示了示例代码：

```
<?php
function curPageURL() {
 $pageURL = 'http://';
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
?>

<html>
  <head prefix="og: http://ogp.me/ns# product: http://ogp.me/ns/product#">
    <meta property="fb:app_id" content="<?php echo strip_tags($_REQUEST['fb:app_id']);?>">
      <meta property="og:url" content="<?php echo strip_tags(curPageURL());?>">
      <meta property="og:type" content="<?php echo strip_tags($_REQUEST['og:type']);?>">
      <meta property="og:title" content="<?php echo strip_tags($_REQUEST['og:title']);?>">
      <meta property="og:image" content="<?php echo strip_tags($_REQUEST['og:image']);?>">
      <meta property="og:description" content="<?php echo strip_tags($_REQUEST['og:description']);?>">
      <title>Product Name</title>
  </head>
    <body>
      <?php echo strip_tags($_REQUEST['body']);?>
    </body>
</html> 
```

但当然，因为这是 PHP，我需要找到一个 Python 的等价物才能在 Google 的 App Engine 中使用。

**有没有人在 Python 中看到过这样的东西？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:52:41.147

这取决于您使用的框架，但这应该是微不足道的。

使用 Django 模板标签，`get`：

```
@register.filter(name='get')
def get(o, index):
    try:
        return o[index]
    except:
        return settings.TEMPLATE_STRING_IF_INVALID 
```

在 Django 中，假设您在上下文中有请求：

```
<html>
  <head prefix="og: http://ogp.me/ns# product: http://ogp.me/ns/product#">
    <meta property="fb:app_id" content="{{ request.GET|get:"og:type" }}">
    <meta property="og:url" content="{{ request.get_full_path }}">
    ... 
    <title>Product Name</title>
  </head>
  <body>
    {{ request.body }} <!-- {{ request.raw_post_data }} if Django < 1.4 -->
  </body>
</html> 
```

使用 webapp 请求，您没有请求 obj 之`GET`类的属性`Django`，您需要使用[webapp 请求类的各种属性](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass)。

# frame - 识别和修改 H264 I、P、B 帧

> ID：11834946
> 
> 赞同：2
> 
> 时间：2012-08-06T19:51:04.797
> 
> 标签：frame, h.264

我使用 VLC 通过 LAN 上的 UDP 流式传输 MPEG TS 容器中的 H264 视频文件。我使用 Wireshark 在客户端捕获数据包，在这里您可以找到 pcap 文件：[http ://www.sendspace.com/file/w0sf36](http://www.sendspace.com/file/w0sf36)

我是否需要使用 MPEG PES 来识别 I、P 或 B 帧？如果是这样，我该怎么做？这是一个 MPEG PES 数据包的数据：http: [//pastebin.com/NayLBx5w](http://pastebin.com/NayLBx5w)。它以字节 0x00 0x00 0x00 0x01 开始。我应该使用哪些字节来达到我的目标？

在 pcap 文件中，您可以看到 MPEG PES 数据包仅占所有流的 2%，而其他数据包是简单的 UDP。使用 MPEG PES 数据包就足够了吗？这种情况下UDP数据包携带什么信息？

编辑：这是我在 Windows 中使用 ffprobe 获得的典型输出。

```
[PACKET]
codec_type=audio
stream_index=1
pts=54010800
pts_time=600.120000
dts=54010800
dts_time=600.120000
duration=2160
duration_time=0.024000
convergence_duration=N/A
convergence_duration_time=N/A
size=96
pos=1460384
flags=K
[/PACKET]
[PACKET]
codec_type=video
stream_index=0
pts=54012012
pts_time=600.133467
dts=54006006
dts_time=600.066733
duration=3003
duration_time=0.033367
convergence_duration=N/A
convergence_duration_time=N/A
size=207953
pos=1098672
flags=_
[/PACKET]
[PACKET]
codec_type=video
stream_index=0
pts=54009009
pts_time=600.100100
dts=54009009
dts_time=600.100100
duration=3003
duration_time=0.033367
convergence_duration=N/A
convergence_duration_time=N/A
size=145530
pos=1311676
flags=_
[/PACKET]
[PACKET]
codec_type=audio
stream_index=1
pts=54012960
pts_time=600.144000
dts=54012960
dts_time=600.144000
duration=2160
duration_time=0.024000
convergence_duration=N/A
convergence_duration_time=N/A
size=96
pos=1507948
flags=K
[/PACKET]
[PACKET]
codec_type=video
stream_index=0
pts=54018018
pts_time=600.200200
dts=54012012
dts_time=600.133467
duration=3003
duration_time=0.033367
convergence_duration=N/A
convergence_duration_time=N/A
size=46173
pos=1460572
flags=_
[/PACKET] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:59:30.020

只要您以文件的形式随身携带内容即可

```
 ffprobe -show_packets <your_file> 
```

获取流中每个数据包的详细信息。它可以是任何有效的视频文件。

这是我拥有的文件的不完整输出。

```
[FRAME]
media_type=video
key_frame=0
pkt_pts=2
pkt_pts_time=0.100000
pkt_dts=2
pkt_dts_time=0.100000
pkt_duration=1
pkt_duration_time=0.050000
pkt_pos=301347
width=320
height=240
pix_fmt=yuv420p
sample_aspect_ratio=N/A
pict_type=P
coded_picture_number=2
display_picture_number=0
interlaced_frame=0
top_field_first=0
repeat_pict=0
reference=0
[/FRAME]
[FRAME]
media_type=audio
key_frame=1
pkt_pts=0
pkt_pts_time=0.000000
pkt_dts=0
pkt_dts_time=0.000000
pkt_duration=1024
pkt_duration_time=0.021333
pkt_pos=306587
sample_fmt=s16
nb_samples=1024
[/FRAME] 
```

你可以编写一个非常简单的 perl 脚本或类似的东西来告诉你每一帧的确切细节。

# c# - 如何使对象在整个页面中可见？

> ID：11834949
> 
> 赞同：1
> 
> 时间：2012-08-06T19:51:06.107
> 
> 标签：c#, asp.net

我需要了解这个基本主题，因为我对网页很陌生。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            UserLogin ObjUser = new UserLogin();
            Persona ObjPersona = new Persona();
            DataSet ds = new DataSet();
            string UserName = null;
            UserName = WindowsIdentity.GetCurrent().Name;
            UserName = Regex.Replace(UserName, ".*\\\\(.*)", "$1", RegexOptions.None);                
            ds = ObjUser.GetUserData(UserName);
            ObjPersona.UserName = UserName;
            ObjPersona.RealName = ds.Tables[0].Rows[0][0].ToString();
            ObjPersona.Ranking = ds.Tables[0].Rows[0][1].ToString();
            if (((bool)ds.Tables[0].Rows[0]["TNT"] == false)) ObjPersona.TNT = false;
            else ObjPersona.TNT = true;
            if (((bool)ds.Tables[0].Rows[0]["TLG"] == false)) ObjPersona.TLG = false;
            else ObjPersona.TLG = true;
            if (((bool)ds.Tables[0].Rows[0]["NEG"] == false)) ObjPersona.Negocios = false;
            else ObjPersona.Negocios = true;
            if (((bool)ds.Tables[0].Rows[0]["RES"] == false)) ObjPersona.Residenciales = false;
            else ObjPersona.Residenciales = true;
            if (((bool)ds.Tables[0].Rows[0]["BO"] == false)) ObjPersona.BO = false;
            else ObjPersona.BO = true;
            if (((bool)ds.Tables[0].Rows[0]["BOA"] == false)) ObjPersona.BOA = false;
            else ObjPersona.BOA = true;
            ObjUser.CreateRegister(ObjPersona);
        }
    } 
```

页面加载后的简单执行。存储过程填充数据集，然后我使用数据集将数据放入对象中，在本例中**为 ObjPersona**。

现在，假设我打算在另一个调用中使用 ObjPersona。

```
protected void BtnClose_Click(object sender, EventArgs e)
    {            
        ObjUser.UpdateRegister(ObjPersona);
        LblClose.Text = "Sesión Cerrada";
    } 
```

它不起作用，因为那里没有数据。（一旦我想使用对象内的数据就会出现错误）

我想只调用一次获取用户数据的过程（本例为 page_load），然后从那里使用它。如何访问在另一个控件中调用的数据？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:59:01.800

为每个请求创建一个新的 asp.net Page 对象实例。每次回发到页面时`Init`，`Load`都会调用 , , 事件处理程序。你不是在处理同一个对象。

如果您在上次请求期间填充了成员变量，则这次将不可用。

您需要使用一些方法在 Postbacks 中保留您的数据。

Asp.net 提供了两种内置方法来执行此操作。一个是`ViewState`，另一个是`Session`。会话变量存储在服务器上，`ViewState`数据存储在表单中的隐藏输入变量中。

如果您有大量数据，请`DataSet`避免将其放入`ViewState`. 它会创建一个大的 ViewState 并使您的页面加载缓慢。

# javascript - 如何在 jqueryui 对话框中创建 ckeditor？

> ID：11834952
> 
> 赞同：0
> 
> 时间：2012-08-06T19:51:16.257
> 
> 标签：javascript, jquery, jquery-ui, ckeditor

我正在尝试在 jqueryUI 对话框中使用 CKEDITOR 实例。

```
$('[name=dialog]').dialog();
$('[name=content]','[name=dialog]').ckeditor(); 
```

它工作正常，直到我想使用编辑器中的对话框（fe 对话框设置 URL，对话框创建表）

好像我不能点击那个对话框..

我正在检查 z-index（我认为这是问题所在），但什么都没有，它是最高级别，什么都没有，我无法使用这些对话框。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T15:04:00.627

我知道这篇文章有点晚了，但也许它会帮助下一个人。要在对话框中创建 ckeditor 实例，您必须先加载对话框，然后像这样创建 ckeditor：

```
$("#mydialog").dialog({
    open: function() {
         $("#mytextarea").ckeditor(); //LOAD IT HERE
    },
    close: function() {
       //you might want to destroy the instance once the dialog closes 
       //to keep things clean
       CKEDITOR.instances["mytextarea"].destroy();
    },
    autoOpen: true, ... more options
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T18:12:57.120

很简单，只是下一个代码（对不起格式，但我正在使用我的手机回复）

```
$("<div><textarea id='foo'></textarea></div>").dialog({});
CKEDITOR.replace("foo"); 
```

# asp.net - 根据列的值是否更改从 SQL 数据库中提取一行

> ID：11834959
> 
> 赞同：0
> 
> 时间：2012-08-06T19:51:24.897
> 
> 标签：asp.net, sql

如果表中的某个值发生更改，我需要从 SQL 数据库中的 select 语句中提取一行。

例如，我有一个在表中调用`price`的列`Price`。如果用户更改`price`（通过 asp.net 应用程序）的值，我想选择整行。这将在工作流中完成，并向用户发送一封电子邮件，说明在更改后更改的行。

这有意义吗？有人可以指出我要使用的程序或功能的正确方向吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:55:16.680

您可以使用 SQL 触发器来完成此操作。

有一个教程（使用您所描述的价格）显示如何在此处完成此操作：http: [//benreichelt.net/blog/2005/12/13/making-a-trigger-fire-on-column-change/](http://benreichelt.net/blog/2005/12/13/making-a-trigger-fire-on-column-change/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:53:47.813

好吧，为了更新一行，您必须更新该行“WHERE uniqueID = [someid]”。您不能在那之后立即运行选择吗？（SELECT * FROM [table] WHERE uniquueID = [someid]）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T20:14:45.673

在不知道您的数据是什么样子的情况下（或者这是什么数据库，这有点困难），但假设您有一个历史表，其中的日期和 ID 保持不变......

```
+----+-------+------------+
| ID | PRICE | CHNG_DATE  |
+----+-------+------------+
|  1 | 2.5   | 2001-01-01 |
|  1 | 42    | 2001-01-01 |
|  2 | 4     | 2001-01-01 |
|  2 | 4     | 2001-01-01 |
|  3 | 4     | 2001-01-01 |
|  3 | 3     | 2001-01-01 |
|  3 | 2     | 2001-01-01 |
+----+-------+------------+ 
```

并且您的数据库支持`With`并且`Row_number`您可以编写以下内容

```
WITH data 
     AS (SELECT id, 
                price, 
                chng_date, 
                Row_number() 
                  OVER ( 
                    partition BY id 
                    ORDER BY chng_date) rn 
         FROM   price) 
SELECT data.id, 
       data.price     new, 
       data_prv.price old, 
       data.chng_date 
FROM   data 
       INNER JOIN data data_prv 
               ON data.id = data_prv.id 
                  AND data.rn = data_prv.rn + 1 
WHERE  data.price <> data_prv.price 
```

那会产生这个

```
+----+-----+-----+------------+
| ID | NEW | OLD | CHNG_DATE  |
+----+-----+-----+------------+
|  1 |  42 | 2.5 | 2001-01-01 |
|  3 |   3 | 4   | 2001-01-01 |
|  3 |   2 | 3   | 2001-01-01 |
+----+-----+-----+------------+ 
```

[演示](http://sqlfiddle.com/#!6/05fc0/10)

如果您的数据库支持`LAG()`它更容易

```
WITH data 
     AS (SELECT id, 
                price                   new, 
                chng_date, 
                Lag(price) 
                  OVER ( 
                    partition BY id 
                    ORDER BY chng_date) old 
         FROM   price) 
SELECT id, 
       new, 
       old, 
       chng_date 
FROM   data 
WHERE  new <> old 
```

[演示](http://sqlfiddle.com/#!6/05fc0/16)

# jquery - 延迟上滑子菜单

> ID：11834960
> 
> 赞同：0
> 
> 时间：2012-08-06T19:51:27.413
> 
> 标签：jquery, hide, delay, slideup

当子菜单没有悬停时，我试图延迟子菜单向上滑动。似乎根本无法让它与这个 jquery 一起工作。认为 css 已经过时了？它说菜单应该何时出现和消失。JS小提琴链接：http: [//jsfiddle.net/gQ3Cv/5/](http://jsfiddle.net/gQ3Cv/5/)

```
 $("#primary-nav ul li ul").mouseover(function(){
        $(this).parent(".submenu").show()                                               
});
$("#primary-nav ul li ul").mouseout(function(){
         $(this).parent(".submenu").delay(1500).slideUp(300)                                                
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:24:40.920

如果您想要某种延迟反应，请尝试

```
var myDelay = 1500;
$("#primary-nav ul li ul").mouseover(function(){
        var elem = $(this).parent(".submenu");
        setTimeout(function(){elem.show();}, myDelay);                                            
});
$("#primary-nav ul li ul").mouseout(function(){
        var elem = $(this).parent(".submenu");
        setTimeout(function(){elem.slideUp(300).hide();}, myDelay);                                         
}); 
```

当然，我只是在没有测试这个概念的情况下打出这个。但这至少是我的第一次尝试，可能需要一点游戏才能正常工作。当然，由于延迟，这可能会导致不利的和不希望的反应。但我不确定。

# android - 一种从安卓应用追踪街道的方法？

> ID：11834961
> 
> 赞同：3
> 
> 时间：2012-08-06T19:51:33.013
> 
> 标签：android, google-maps, openstreetmap

我正在开发一款游戏，该游戏需要对象跟随屏幕上的街道。我需要的是一种让用户选择他们的位置并让应用程序获取该位置的地图数据的方法，以便游戏可以追踪街道。

我尝试使用 Google Maps Static API 从位图中跟踪像素，但转换位图是一个令人难以置信的处理器消耗。我查看了 OpenStreetMap，但找不到从应用程序内以编程方式下载 xml 地图数据的方法，它以 .osm 格式下载。

有什么建议么？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:16:26.123

OpenStreetMap 提供了多种[API](http://wiki.openstreetmap.org/wiki/Databases_and_data_access_APIs)，您可以通过指定边界框 ( *bbox* ) 来下载地球的特定部分。您很可能希望使用[Overpass API](http://wiki.openstreetmap.org/wiki/Overpass_API)，因为它目前似乎是最快且功能最丰富的 API。它还支持不同的输出格式。

# sql - 根据今天的日期运行查询

> ID：11834962
> 
> 赞同：0
> 
> 时间：2012-08-06T19:51:42.280
> 
> 标签：sql, sql-server, sql-server-2000, getdate

我正在制作一个使用 Windows 调度程序自动运行的程序。我想做的是将程序设置为在每个月的 1 日和 16 日运行。如果程序运行在 1 日。我想运行上个月的查询...例如，如果今天是 8 月 1 日，我希望它在 2012 年 7 月 1 日至 2012 年 7 月 31 日运行。如果我在 16 日运行程序，我希望它运行当月到 15 日的查询。例如，如果是 8/16，我希望程序运行 8/1/12 - 8/15/12 的查询。

以下是我的查询。它工作得很好，只是它没有得到当月的第一天。（如果是 15 号或 1 号）

例如：如果我在 2012 年 7 月 1 日运行查询，它应该发送 6/1-6/30 的结果现在它显示 6/2-6/30。如果我在 6/15 运行查询，它应该在 6/1 -6/15 运行......它在 6/2 - 6/15 运行它。

```
SELECT        
    Store_Number, Invoice_Number, Invoice_Date, Extended_Price, 
    Warranty_Amount, Quantity_Sold, Invoice_Detail_Code
FROM
    Invoice_Detail_Tb
WHERE        
    (Invoice_Date BETWEEN (CASE WHEN datepart(dd, getdate()) = 1 THEN dateadd(mm, - 1, getdate()) ELSE dateadd(dd, - 15, getdate()) END) 
                  AND (CASE WHEN datepart(dd, getdate()) = 1 THEN dateadd(dd, - 1, getdate()) ELSE dateadd(dd, - 1, getdate()) END)) 
    AND (Warranty_Amount > 0) 
    AND (Store_Number = '309')
ORDER BY 
    Store_Number, Invoice_Date 
```

知道如何将本月的第一天包含在其中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:29:18.240

恕我直言，尝试在查询中计算这些开始和结束范围并没有太大优势。通过将其分离出来可能更容易可视化正在发生的事情：

```
DECLARE @sd SMALLDATETIME, @ed SMALLDATETIME;

-- set the start date to the first day of this month
SET @sd = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0);

IF DATEPART(DAY, GETDATE()) = 1 THEN
BEGIN
  -- if it's the first, we want last month instead
  SET @sd = DATEADD(M<ONTH, -1, @sd);
END

SET @ed = DATEADD(MONTH, 1, @sd);

SELECT Store_Number, ...etc...
FROM dbo.Invoice_Detail_Tb
WHERE Store_Number ='309' 
AND Invoice_Date >= @sd
AND Invoice_Date < @ed
ORDER BY Store_Number, Invoice_Date; 
```

远离`BETWEEN`日期范围查询；始终使用开放式范围：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:14:30.257

也许这会让你朝着正确的方向开始：

```
-- Beginning of this month:
SELECT dateadd(mm, datediff(mm, 0, getdate()), 0)

-- Beginning of previous month:
SELECT dateadd(mm, datediff(mm, 0, getdate()) - 1, 0) 
```

# asp.net - 只允许一个 Web 应用调用 Web 服务

> ID：11834966
> 
> 赞同：0
> 
> 时间：2012-08-06T19:52:09.260
> 
> 标签：asp.net

如何配置仅由一个特定的 Web 应用程序调用 Web 服务？两者都在同一个 IIS 服务器中。框架：2.0

我认为设置 web 服务的 web.config 就足够了。在这个例子中，我正在设置 web 服务的 web.config。Web服务只会被一个IP地址调用（127.0.0.1是IIS服务器的IP）：

```
<location path="resources">
  <system.webServer>
    <security>
      <ipSecurity allowUnlisted="false">
        <clear/>
        <add ipAddress="127.0.0.1"/>
      </ipSecurity>
    </security>
  </system.webServer>
</location> 
```

会好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:57:49.380

如果它只被同一服务器上的一个特定应用程序调用，那么 Web 服务可能不是正确的选择。将代码放在同一个应用程序的一个类中会更有意义。Web 服务最适合多个应用程序需要访问相同功能的情况。

也就是说，随着 IPV6 的到来，您想到的选项将不起作用。如果您真的只是想限制对来自同一服务器的应用程序的请求，您可以将以下代码放入代码中以检查它是否来自本地服务器：

```
if(Request.IsLocal)
{
  //code here
} 
```

为简单起见，您可以将以下内容放入 web 服务的 global.asax 文件中的 Application_BeginRequest 中：

```
if(!Request.IsLocal)
{
  throw new Exception("Only local requests are allowed");
} 
```

这将有效地抵御任何不是来自本地主机的东西。

# c# - 不同 Web 应用程序的不同机器密钥

> ID：11834967
> 
> 赞同：0
> 
> 时间：2012-08-06T19:52:11.447
> 
> 标签：c#, asp.net, .net-4.0, web-config, machinekey

我有两个在 .NET4 下运行的 Web 应用程序。两个 Web 应用程序都托管在同一台服务器上。我在这里有两个问题：

这两个应用程序会共享相同的机器密钥吗？如何为不同的应用程序提供不同的机器密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:55:51.150

如果它们是不同的应用程序，默认设置会给它们一个不同的 machineKey。这[`IsolateApps`](http://msdn.microsoft.com/en-us/library/w8h3skw9.aspx)就是为了。

> AutoGenerate, IsolateApps 指定自动生成密钥。这是默认值。

IsolateApps 的意思是……

> IsolateApps 修饰符指定 ASP.NET 使用每个应用程序的应用程序 ID 为每个应用程序生成唯一的加密密钥。

# objective-c - 通过 NSData 向后搜索不起作用，仍然从前面读取

> ID：11834969
> 
> 赞同：1
> 
> 时间：2012-08-06T19:52:39.743
> 
> 标签：objective-c, nsdata

我在目标 C 中有以下问题：在更大的上下文中，我想在字符串中搜索子字符串并获取第一个这样的子字符串所在的位置。我也希望从后面开始搜索。例如：通过搜索“K”在“K123K”上调用所需的函数应该得到 3，因为我从后面开始。

在我的代码中，搜索 NSData 对象更有效，因为这是我读入的内容。所以我尝试了一些测试代码，看看我提出的方法是否有效：

```
 NSString *testString = @"01K234567K";
    NSData *testData = [testString dataUsingEncoding:NSUTF8StringEncoding];
    NSString *testLetter = @"K";
    NSData *kData = [testLetter dataUsingEncoding:NSUTF8StringEncoding];
    NSRange whereisK = [testData rangeOfData:kData options:NSBackwardsSearch      range:NSMakeRange(0, [testData length])];
    NSLog(@"loc: %d, len: %d",whereisK.location,whereisK.length); 
```

结果出乎我的意料，看起来 rangeOfData 仍然从前面开始搜索：

```
 loc: 2, len: 1 
```

我真的不知道我做错了什么。似乎 NSBackwardsSearch 没有作为一种选择来完成它的工作！我很高兴有任何帮助或建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:02:35.670

该选项的正确值为`NSDataSearchBackwards`。您使用的选项用于 NSString 搜索。您可以阅读[NSData 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/uid/20000172-SW18)。

# connection - 在 DataSource MBean 上调用方法时出错

> ID：11834971
> 
> 赞同：0
> 
> 时间：2012-08-06T19:52:50.533
> 
> 标签：connection, datasource, jmx, invoke, mbeans

我确定我会以完全错误的方式解决这个问题，但有人可以指出下面代码中的错误......

```
MBeanServer server = (MBeanServer) MBeanServerFactory.findMBeanServer (null).get (0);
ObjectName mBean = new ObjectName ("Catalina:type=DataSource,path=/<context>,host=localhost,class=javax.sql.DataSource,name=\"<name>\"");
String [] params = {"<username>", "<password>"};
Connection myConnection = (Connection) server.invoke (mBean, "getConnection", params, null);
Statement myStatement = myConnection.createStatement ();
String myResult = myStatement.executeQuery ("SELECT 1 FROM DUAL;").toString ();
myConnection.close (); 
```

当我尝试通过在 MBean 上调用 getConnection 方法来实例化 Connection 对象时，就会出现问题。我收到以下错误...

```
Aug 6, 2012 8:46:03 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.IllegalArgumentException: Inconsistent arguments and signature
        at org.apache.tomcat.util.modeler.ManagedBean.getInvoke(ManagedBean.java:578)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:289)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:14:44.350

我看到你在做：

```
Connection myConnection = (Connection) server.invoke (mBean, "getConnection",
     params, null); 
```

您正在传入`null`我认为不允许的参数签名数组。引用[javadocs 来自`MbeanServer.invoke(...)`](http://docs.oracle.com/javaee/1.4/api/javax/management/MBeanServer.html#invoke%28javax.management.ObjectName,%20java.lang.String,%20java.lang.Object%5B%5D,%20java.lang.String%5B%5D%29)：

> @param signature 包含操作签名的数组。类对象将使用与用于加载调用操作的 MBean 的类加载器相同的类加载器来加载。

该数组应包含您尝试调用的方法参数的类名，并且它们必须精确匹配。原始类型应作为字符串`"int"`, `"long"`, ... 传入，而类类型应作为`"java.util.Date"`, `"java.lang.String"`, ...

所以我认为你需要传递类似的东西：

```
String [] params = {"<username>", "<password>"};
String [] signatures = {"java.lang.String", "java.lang.String"};
Connection myConnection = (Connection) server.invoke (mBean, "getConnection",
     params, signatures); 
```

# html - 有没有办法将内联样式规则传递给所有孩子？

> ID：11834973
> 
> 赞同：6
> 
> 时间：2012-08-06T19:52:58.023
> 
> 标签：html, css

我试图在一个不允许样式表的互联网论坛上设置一个帖子的样式，只允许内联样式。但似乎内联样式不会被子级继承，只有紧接在下面的文本（例如使用 <h1> 会从文本中删除背景颜色）。有没有办法让它传递样式而不必将它们添加到每个节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:21:05.587

虽然@SimeVidas 是对的，但我认为他的反应有点快。需要谨慎行事。我更新了他的小提琴[http://jsfiddle.net/fRpQ2/4/](http://jsfiddle.net/fRpQ2/4/)来演示。

如果在给定标记的样式表中声明了特定属性，则该值将不会从具有内联样式的父级继承。我想这就是您在尝试设置样式的论坛帖子中遇到的情况。如果不使用样式标签或链接样式表，则无事可做。恐怕在你的情况下需要大量的复制。您还可以检查该站点并将现有类应用于您的帖子，但这仅适用于您想复制他们已经应用的样式，我怀疑是这种情况。

如果您想了解更多信息，我建议您阅读样式的层叠顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:20:46.493

`<style>`如果论坛解析html，你不能也定义一个块吗？

# php - 使用 PHP 压缩和缓存 CSS

> ID：11834976
> 
> 赞同：8
> 
> 时间：2012-08-06T19:53:03.527
> 
> 标签：php, html, css, caching, compression

我目前正在尝试为我的 CSS 文件实现压缩方法。我基本上复制了与我的 JS 文件相同的方式，但它不起作用。我检查了 Firebug 工具，但没有加载 CSS。

我如何调用`css.php`which 将调用压缩的 CSS 文件？

使用JS的工作代码，文件是`scripts.php`（我没有指定`.js`扩展名）：

```
<script type="text/javascript" src="js/scripts.php?build=123&load=foo,bar"></script> 
```

我想对我的 CSS 文件做同样的事情：

```
<link href="styles/css.php?build=123&load=foo,bar/jquery-ui-1.8rc2.custom" type="text/css"> 
```

`css.php`应该进行压缩：

```
<?php
error_reporting(E_ERROR);
// see http://web.archive.org/web/20071211140719/http://www.w3.org/2005/MWI/BPWG/techs/CachingWithPhp
// $lastModifiedDate must be a GMT Unix Timestamp
// You can use gmmktime(...) to get such a timestamp
// getlastmod() also provides this kind of timestamp for the last
// modification date of the PHP file itself

function cacheHeaders($lastModifiedDate) {
    if ($lastModifiedDate) {
        if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) && strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) >= $lastModifiedDate) {
            if (php_sapi_name()=='CGI') {
                Header("Status: 304 Not Modified");
            } else {
                Header("HTTP/1.0 304 Not Modified");
            }
            exit;
        } else {
            $gmtDate = gmdate("D, d M Y H:i:s \G\M\T",$lastModifiedDate);
            header('Last-Modified: '.$gmtDate);
        }
    }
}

// This function uses a static variable to track the most recent
// last modification time
function lastModificationTime($time=0) {
    static $last_mod ;
    if (!isset($last_mod) || $time > $last_mod) {
        $last_mod = $time ;
    }
    return $last_mod ;
}

lastModificationTime(filemtime(__FILE__));
cacheHeaders(lastModificationTime());
header("Content-type: text/css; charset: UTF-8");

ob_start ("ob_gzhandler");

foreach (explode(",", $_GET['load']) as $value) {
    if (is_file("$value.css")) {
        $real_path = mb_strtolower(realpath("$value.css"));
        if (strpos($real_path, mb_strtolower(dirname(__FILE__))) !== false ||strpos($real_path, mb_strtolower(dirname(dirname(__FILE__)).DIRECTORY_SEPARATOR.'modules'.DIRECTORY_SEPARATOR)) !== false) {
            lastModificationTime(filemtime("$value.css"));
            include("$value.css"); echo "\n";
        } 
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:01:03.700

您缺少标签中的`rel="stylesheet"`属性。`<link>`除此之外，代码看起来还不错。

您可能还希望在[此处](https://stackoverflow.com/a/1447413/1428773)查看问题和答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:24:04.233

尝试[缩小](http://code.google.com/p/minify/)。这个类压缩和缓存 js 和 css。

# dojo - 在上下文节点中创建 Dojo 小部件

> ID：11834977
> 
> 赞同：0
> 
> 时间：2012-08-06T19:53:08.443
> 
> 标签：dojo

所以，我知道我不仅可以在整个 DOM 中查询节点，还可以在上下文节点中查询节点，如下所示：

```
var myNode = dojo.query('#formId', 'idContext'); 
```

这样，即使在 DOM 中有另一个使用相同 id 的节点，我也可以获得正确的节点。

我正在尝试的是基于上下文化节点创建小部件。代替 ：

```
 new Form({
        method: 'post',
        action: 'aaa/bbb'
    }, 'formId'); 
```

我正在努力

```
 new Form({
        method: 'post',
        action: 'aaa/bbb'
    }, myNode); 
```

但是 Fbug 记录了错误：

```
TypeError: _13.hasChildNodes is not a function
[Break On This Error]   

while(_13.hasChildNodes()){ 
```

所以，看来我在 Form 的第二个参数中设置了一个错误的对象...... dojo docs 中解释的用法说：

```
Usage:
var foo = new dijit.form.Form(/* Object? */ params, /* **DomNode**|String */ srcNodeRef); 
```

我觉得我在这里误解了一些东西......你觉得呢？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:13:22.853

您似乎将一个 dojo`NodeList`对象作为第二个参数传递给 Form 构造函数。dojo.query 方法返回一个[NodeList](https://dojotoolkit.org/reference-guide/1.7/dojo/NodeList.html#dojo-nodelist)，而不是单个 dom 元素。Widget 构造函数的第二个（可选）参数是单个 dom 节点，而不是节点列表。

以下作品

```
require(['dojo/dom','dijit/form/Form'],function(dom,Form){
    new Form({
        method: 'post',
        action: 'aaa/bbb'
    }, dom.byId('formId'));
}); 
```

不言而喻，在一个页面上拥有多个具有相同 ID 的元素是一种不好的做法，但是您绝对需要这样做，您可以做一些事情，例如`dojo.query('#testNode','idContext')[0]`让第一个节点的 id`testNode`根植于具有身份证`idContext`。

```
require(['dojo/query','dijit/form/Form'],function(query,Form){
    new Form({
        method: 'post',
        action: 'aaa/bbb'
    }, query('#formId','idContext')[0]);
}); 
```

# sql-server - @@rowcount 的范围？

> ID：11834980
> 
> 赞同：29
> 
> 时间：2012-08-06T19:53:26.163
> 
> 标签：sql-server, rowcount

范围是`@@rowcount`什么？[MSDN](http://technet.microsoft.com/en-us/library/ms187316.aspx)没有提到它的范围。

> 返回受最后一条语句影响的行数。

行。

在我的 SP 中——我正在插入一个 table ，当一个新值被插入到 table 中时，`insert trigger`它有*另一个插入。*

**问题：**

将涉及哪个范围`@@rowcount`？（触发器或 SP）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T20:02:27.043

当然，这篇文章是针对 SQL Server 2000 的，但人们希望范围不会在版本之间发生变化。根据文章[How triggers affect ROWCOUNT and IDENTITY in SQL Server 2000](http://www.xaprb.com/blog/2005/12/23/rowcount-and-identity/)，`@@ROWCOUNT`不会受到触发器的影响。

具体来说：

> 即使在基表上有触发器时，在 SQL Server 2000 中使用 @@ROWCOUNT 也是安全的。触发器不会扭曲您的结果；你会得到你所期望的。即使设置了 NOCOUNT，@@ROWCOUNT 也能正常工作。

因此，如果您更新三行，而触发器在其他地方更新五行，您将得到`@@ROWCOUNT`3。

此外，来自 GBN 在[SQL Server 中的回答 - 在多线程应用程序中使用 @@ROWCOUNT 是否安全？](https://stackoverflow.com/questions/8960510/sql-server-is-using-rowcount-safe-in-multithreaded-applications)：

> @@ROWCOUNT 是范围和连接安全的。
> 
> 事实上，它只读取该连接和范围的最后一条语句行数。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-07T03:01:59.410

每个插入/更新/选择/设置/删除语句都会将 重置为`@@rowcount`受执行语句影响的行

```
begin
declare @myrowcount int,
    @myrowcount2 int
insert stmt
SET @myrowcount=@@rowcount
if @myrowcount>0
begin
insert stmt
SET @myrowcount2 =@@rowcount
if @myrowcount2 >0
do smthg
end
end 
```

或试试这个

```
 SELECT * FROM master.sys.objects -- 50 rows
    IF (1=1)
        SELECT @@ROWCOUNT AS RowsAffected -- 0, because the IF did not affect any rows 
```

即使是 IF 语句也会影响它....因此它的范围是最后读取的语句。

# jquery - jQuery Galleria 大小问题

> ID：11834982
> 
> 赞同：0
> 
> 时间：2012-08-06T19:53:33.047
> 
> 标签：jquery, jquery-plugins, galleria

我正在尝试简化 Galleria 以删除经典主题中的大部分元素和围绕它的样式。我真的只想让我的图像缩放到 Galleria 容器，而不是 Galleria 舞台。如何控制舞台与容器的关系？我还尝试通过使用 'thumbnails' 选项和主题 API 通过从 DOM 中删除 'thumbnails-container' 元素来删除缩略图，但没有骰子。

我试图弄清楚这一点，以创建一个非常简单的布局，最大化缩放的图像，并在其周围和底部（缩略图所在的位置）填充。

对此的任何帮助都会很棒，我仍在重新阅读 Galleria 文档。我也对更简单的插件持开放态度，但缩放、居中和灯箱是关键。

谢谢！

```
if ($("#gallery").children().size() > 0) {
    Galleria.loadTheme("../../Content/themes/galleria/galleria.classic.js");
    Galleria.run("#gallery");
    Galleria.configure({
        lightbox: true,
        dummy: 'http://c400976.r76.cf1.rackcdn.com/no_label_graphic.png',
        width: 325,
        height: 325,
        thumbnails: false,
        layerFollow: false

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:20:44.093

如果您愿意接受替代方案，我建议您使用[Colorbox](http://www.jacklmoore.com/colorbox)。没有像 Galleria 这样的缩略图，但其余的应该满足您的需求。易于使用。Galleria 的修改可能很繁琐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:17:26.967

我认为您还需要添加一些CSS：

```
body .galleria-stage{top:0;left:0;right:0;bottom:0} 
```

这将使舞台充满容器。然后只需设置`thumbnails:false`以防止创建缩略图。

[http://jsfiddle.net/ZaG2X/](http://jsfiddle.net/ZaG2X/)

# rest - REST 服务 - @POST 调用有效，而 @GET 无效

> ID：11834983
> 
> 赞同：0
> 
> 时间：2012-08-06T19:53:33.623
> 
> 标签：rest, jersey

我是 REST 服务的新手，在过去的两周里我遇到了一个问题。我正在使用泽西岛。我正在尝试使用简单的 REST 客户端来调用 POST 方法，该方法接受 JSON 对象作为参数并将其存储到数据库中。我的方法不起作用，但我决定落后一步，所以现在我使用一个更简单的客户端和一个更简单的提供程序，以便测试我的 POST 和 GET 方法。奇怪的是，虽然我能够调用 POST 方法：

```
@POST
@Path("/store")
@Consumes(MediaType.TEXT_PLAIN)
@Produces(MediaType.TEXT_PLAIN)
public String storeData(String str) throws SQLException {
  String query = "insert into myDB.test (id, name) values ('1', '" + str + "')";
  MyDB db = new MyDB();
  db.runQuery(query);
  return responseCode.toString();
} 
```

这工作得很好！

但在同一个类中，@GET 方法不起作用并返回 404 错误。我的代码如下：

```
@GET
@Path("/retrieve")
@Produces(MediaType.TEXT_PLAIN)
public String getResponse() {
 return "Hello!";
} 
```

我知道我的问题对很多人来说可能很简单......但我试图找出我做错了什么，以便继续我的实际实施......

提前非常感谢。

码头

* * *

这是我的客户端代码

```
public class TestClient {

   public static void main(String[] args) {
        ClientConfig clientConfig = new DefaultClientConfig();
        Client client = Client.create(clientConfig);
        WebResource webResource = client.resource("http://localhost:8080/server_classes/rest/server/retrieve");
            System.out.println(webResource.accept(MediaType.TEXT_PLAIN).post(ClientResponse.class, "hello"));
        }
    } 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
    <display-name>server_classes</display-name>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class> com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>server_classes</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的包名为 server_classes ，资源的路径是 @Path("/server")

我再次尝试了 vogella 教程，从一开始，只是更改了注释路径和方法（不仅仅是给出“Hello Jersey”响应）。但是现在，我无法运行任何东西。只有404错误！

O也删除了Tomcat的实例，然后整个tomcat安装重新安装，问题依旧。如果这有帮助，我正在开发 Ubuntu 12.04。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:41:26.447

尝试将您的请求从 更改`post`为`get`，正如您的 servlet 映射所期望的那样：

```
webResource.accept(MediaType.TEXT_PLAIN).get(ClientResponse.class); 
```

# c# - C#中是否有一个神奇的获得最长线长的功能

> ID：11834985
> 
> 赞同：0
> 
> 时间：2012-08-06T19:53:35.277
> 
> 标签：c#, c#-3.0

我有这样的简单 ascii 文本文件：

```
麦当娜是个肮脏的婊子
不，她不是她是一个严肃的艺术家
你看过她的书或电影真心话大冒险吗
参数关闭

```

我需要一种方法来获得最长线的长度。在这个例子中，答案是 47。

我可以使用`StreamReader`并打开文件并读取每一行，但似乎应该有更简单的方法。

有没有简单的方法解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-06T19:54:44.820

您可以使用 很好地做到这一点`File.ReadLines`，它的优点是它不会将整个文件读入内存。当它返回时`IEnumerable<string>`，您可以在返回值上使用 Linq，从而得到这个相当不错的一个衬里。

```
File.ReadLines(fileName).Max(line => line.Length) 
```

# php - 将鼠标悬停在堆叠的多个透明图像上

> ID：11834986
> 
> 赞同：3
> 
> 时间：2012-08-06T19:53:40.683
> 
> 标签：php, javascript, html, transparency

我不确定这是否可能，但我正在尝试创建一种效果，当您将鼠标悬停在创建多个相互重叠的图像的图像上时（图像将设置为不透明度），我显示图像的一部分比另一部分更清晰。

很难解释，但这里有几个例子

这个图片：![在此处输入图像描述](../Images/cc99a192d885c0e285ea849c7711f6b2.png)

是创建所有重叠的图像（每个图像都在前一个图像之上）

![](../Images/6f81c21cd299b321b507b942ac7e3e52.png) ![](../Images/cc0429b8910f9a5960af96056fcda7f2.png) ![](../Images/18f09ac37507931a21366ae1afdb6eb4.png) ![](../Images/def90288f629bb603340d99655760ffe.png) ![](../Images/7bafe91e903aa9fcf514a9e068f5af20.png) ![](../Images/bd673deccf5abcba1f324925d1feaecb.png) ![](../Images/5c82939ded9882aeb805bb646f30dba3.png) ![](../Images/fbdea118fb30073795532e2e5be8bb0c.png) ![](../Images/f0730bde238ed8b30834ac8b12691828.png) ![](../Images/91e7f74cc52ae44056c33897fa74957a.png)

当我将鼠标悬停在最终图像上时，我希望能够“突出显示”与图像本身中图像的该部分相对应的图像部分

我想做的事情是只显示带有不透明设置的主图像，当用户将鼠标悬停在它上面时，抓住坐标，检查所有图像（不能超过 25 个），看看这些坐标是否与非“透明”像素并在主屏幕顶部显示此类图像以提供“突出显示”效果，但最终图像约为 400x200 并在显示页面时动态创建所有像素的数组对于服务器来说是不现实的每小时/分钟有数千次点击。将此数组保存在数据库中是不现实的，并且图像的大小可能会根据页面而变化，我们目前有 130 万张最终图像，每张平均大约 10 个分解图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:03:55.590

一种可能的解决方案是为每个子图像创建自定义 SVG 覆盖。发生`onmouseover`事件时，您会降低 SVG 元素的不透明度，使下面的图像更加可见。

签出[这个](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)用于创建 SVG 的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:00:33.623

```
$("img").css("opacity","0.8");

$("img").mouseover(function()
{
    $(this).css("opacity","1.0");
});

$("img").mouseout(function()
{
    $(this).css("opacity","0.8");
}); 
```

对于分割图像的效果，尝试使用图像映射：

[http://www.javascriptkit.com/howto/imagemap.shtml](http://www.javascriptkit.com/howto/imagemap.shtml)

支持图像贴图的不透明度：

[http://www.thehelper.net/threads/can-i-use-opacity-on-imagemap.57999/](http://www.thehelper.net/threads/can-i-use-opacity-on-imagemap.57999/)

**编辑**：

要实现悬停效果，请尝试使用 Fabric JS 将它们加载到画布中，这是一个演示：

[http://fabricjs.com/hovering/](http://fabricjs.com/hovering/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:57:37.463

放弃了该项目，唯一的解决方案是 SVG，但现阶段不可能，因为某些浏览器/操作系统不完全支持它们

# android - 如何在 android xml 中操作 ListView 和布局

> ID：11834995
> 
> 赞同：0
> 
> 时间：2012-08-06T19:54:17.890
> 
> 标签：android, xml, listview, layout, android-linearlayout

我试图操纵它来做以下事情，但到目前为止它只会导致挫败感......以下是我想要完成的糟糕画图：

[http://i.stack.imgur.com/WZOta.png](http://i.stack.imgur.com/WZOta.png)

[http://i.stack.imgur.com/6cEQk.png](http://i.stack.imgur.com/6cEQk.png)

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <ListView

        android:id="@+id/android:list"
        android:layout_width="wrap_content"
        android:layout_height="419dp" >

    </ListView>

        <TextView 
            android:id="@+id/android:empty"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/FAP001"            
         />
        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="+1" />

</LinearLayout>
</ScrollView> 
```

我不确定列表视图是否是要走的路。我什至不确定线性布局是否是一个好的选择。我试图使最终结果接近第二张图像上的内容。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:38:04.850

您不能在 ScrollView 中放置 ListView。那是不可能的。因为那时 ListView 有两个选项可以滚动浏览内容，正如您所愿。这是行不通的。

了解更多信息：

[https://groups.google.com/forum/m/?fromgroups#!topic/android-beginners/LRpLgGOy2Pc](https://groups.google.com/forum/m/?fromgroups#!topic/android-beginners/LRpLgGOy2Pc)

如果您想拥有一个包含 3 个“部分”的 ListView，我建议您使用自定义适配器创建自己的自定义 ListView。

这是一个自定义 ListView 的示例 [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

您可以只使用这个 ListView，只需根据自己的需要修改 Adapter 和 Row XML。

# android - 我在哪里可以找到 android 的 Mac Filetransfer 工具的源代码？

> ID：11834996
> 
> 赞同：2
> 
> 时间：2012-08-06T19:54:28.163
> 
> 标签：android

请问在哪里可以找到[http://www.android.com/filetransfer/](http://www.android.com/filetransfer/)的源代码？

# github - 如何使用自动页面生成器将社交按钮添加到我的 github 页面？

> ID：11834997
> 
> 赞同：2
> 
> 时间：2012-08-06T19:54:33.957
> 
> 标签：github, github-pages

我想将社交按钮（在 twitter 上分享，如在 Facebook 上分享，在 google+ 上分享）添加到使用自动页面生成器创建的 github 页面。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:12:09.703

据我所知，没有自动化的方法。但您可以通过编辑 github 页面的 html 来实现。

自动页面生成器使用您创建的 github 页面的 html、css 和 js 文件创建一个“gh-pages”分支。你可以签出这个分支，像往常一样编辑它，然后把它推回 github。