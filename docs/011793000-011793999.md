# StackOverflow 问答 11793000-11793999

# objective-c - 如何在动作方法中使用可可中的进度指示器

> ID：11793006
> 
> 赞同：1
> 
> 时间：2012-08-03T09:29:55.287
> 
> 标签：objective-c, macos, cocoa

我有一个注册按钮。当按下按钮时，我的操作方法`register()`将被调用。为了执行一些注册，我在注册函数中调用一个可执行文件作为具有管理员权限的 NSAppleScript。执行此操作需要 10-20 秒。

我在我的控制器类中为进度指示器定义了一个出口--->说过程。

如果我`[process startAnimation:sender]`在`register:sender`函数内调用，我会在注册函数执行后看到窗口上的指示器。[一旦注册功能结束，指标开始运行]

```
-(void)register:(id)sender{
    [process startAnimation:sender] ;
    ////
    NSAppleScript *applescript   //define
                                 //run it here
    /// 
```

我无法更改可执行文件中的任何内容。我希望指标在 register 方法本身内旋转。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:39:34.667

如果我正确理解了您的问题，那么我认为最好的方法是创建一个新线程（如果您使用的是 iOS5 则阻止）。在新线程中运行可执行文件并在主线程中运行微调器。

# regex - 用 // 在其中拆分 simulink 路径。

> ID：11793013
> 
> 赞同：0
> 
> 时间：2012-08-03T09:30:12.290
> 
> 标签：regex, matlab, path, split, simulink

我想分割一条`Simulink`看起来像这样的路径：`"a/b/c//d"`. 它应该拆分为`[a,b,c/d]`. 正则表达式会是什么样子？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:13:36.127

这应该可以解决问题：

```
>> strrep(regexp('a/b/c//d', '(([^/]|//)*)(?=/[^/]|$)', 'match'), '//', '/')
ans = 
    'a'    'b'    'c/d' 
```

正则表达式可以理解为：第一部分匹配任何非斜线（`[^/]`）或双斜线，给出片断`([^/]|//)`。我们想要任意数量的这些，所以我们需要一个`*`，后跟一个斜杠，然后是非斜杠或字符串的结尾 ( `/[^/]|$`)。我们使用前瞻运算符`(?= ... )`来做到这一点。

strrep 是在结果中替换`//`为`/`。也许这可以在同一次调用中完成`regexp`，但是对于我的口味来说已经足够复杂了。

# javascript - 使用 jQuery 添加类，但确保它使用类之后的所有标签

> ID：11793015
> 
> 赞同：1
> 
> 时间：2012-08-03T09:30:15.777
> 
> 标签：javascript, jquery, html, css

我不知道如何在标题中表达这一点，但可以说你有这样的内容：

```
 <script type="text/javascript">

    $(document).ready(function(){
        $('#tabp1').show();
        $('#tabp2').hide();
        $('#tabp3').hide();
        $('#tab1').addClass("activeTab");
        $('#tab1').css("activeTab");
    })

    function tab1(){
        $('#tabp1').show();
        $('#tabp2').hide();
        $('#tabp3').hide();
        $('#tab1').addClass("activeTab"); // add class activeTab to show active
        $('#tab2').removeClass("activeTab"); // remove the class from the pre selected ones
        $('#tab3').removeClass("activeTab"); // remove the class from the pre selected ones
    }
    function tab2(){
        $('#tabp2').show();
        $('#tabp1').hide();
        $('#tabp3').hide();
        $('#tab1').removeClass("activeTab"); // remove the class from the pre selected ones
        $('#tab2').addClass("activeTab"); // add class activeTab to show active
        $('#tab3').removeClass("activeTab"); // remove the class from the pre selected ones
    }
    function tab3(){
        $('#tabp1').hide();
        $('#tabp3').show();
        $('#tabp2').hide();
        $('#tab1').removeClass("activeTab"); // remove the class from the pre selected ones
        $('#tab2').removeClass("activeTab"); // remove the class from the pre selected ones
        $('#tab3').addClass("activeTab"); // add class activeTab to show active
    }

</script> 
```

和 HTML

```
<div id="table-tabs">
                <ul>
                    <li id="tab1" class="tab"><a onClick="tab1();">Accommodation</a></li>
                    <li id="tab2" class="tab"><a onClick="tab2();">Special Offers</a></li>
                    <li id="tab3" class="tab"><a onClick="tab3();">Photo Gallery</a></li>
                </ul>
                <div id="tabp1">Tab 1:  nulla facilisi. Nam liber tempor cum soluta 
                    nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus</div>

                <div id="tabp2">Tab 2 content</div>

                <div id="tabp3">This one here is tab 3, full of Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam 
                    erat volutpat. Ut wisi enim ad minim veniam, 
                    quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</div>
            </div>
        </div><!-- end table tabs --> 
```

最后，CSS：

```
 #content-left #mainLeftContent #table-tabs ul li.oldTab{
    /* sets background and text color */
}

#content-left #mainLeftContent #table-tabs ul li.activeTab a{
    color: white;
}

#content-left #mainLeftContent #table-tabs ul li.activeTab{
    background-color: #015f01;
}
#content-left #mainLeftContent #table-tabs ul li.tab a{
    color: black;
}

#content-left #mainLeftContent #table-tabs ul li.tab{
    padding: 10px;
    -webkit-border-top-left-radius: 10px;
    -webkit-border-top-right-radius: 10px;
    -moz-border-radius-topleft: 10px;
    -moz-border-radius-topright: 10px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    color: white;
} 
```

我需要 javascript 不仅选择：

```
#content-left #mainLeftContent #table-tabs ul li.activeTab 
```

但是也：

```
#content-left #mainLeftContent #table-tabs ul li.activeTab a 
```

这应该是可能的，有什么想法吗？

只是为了澄清这里的问题：

javascript 正确应用了 activeTab 类，但是我需要将文本设置为白色，所以当我选择一个（在活动选项卡之后）并将颜色更改为白色时，它不会应用它。

有趣的变化，我改变了锚属性上的文本大小，它改变了大小，所以我认为这是颜色的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:43:16.150

这两个选择器同样精确，这意味着将使用最后一个声明的选择器

```
#content-left #mainLeftContent #table-tabs ul li.activeTab a{
    color: white;
}

#content-left #mainLeftContent #table-tabs ul li.tab a{
    color: black;
} 
```

您可以通过使用默认颜色来修复它，该颜色在活动时会被覆盖

```
/* white when active (now more precise because of li.activeTab */
#content-left #mainLeftContent #table-tabs ul li.activeTab a{
    color: white;
}
/* default black */
#content-left #mainLeftContent #table-tabs ul li a{
    color: black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:39:29.247

因此，假设您选择“#table-tabs ul li a”：

```
$("#table-tabs ul li a").click( function(e) {

e.preventDefault();

$(this).parent().toggleClass('tab activeTab'); //Remove class tab, add class activeTab

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:42:51.150

你应该改变，只需放置！重要的颜色，它会修复它

```
#content-left #mainLeftContent #table-tabs ul li.activeTab a{
    color: white !important;
} 
```

检查这个 jsfiddle [http://jsfiddle.net/ENS8N/](http://jsfiddle.net/ENS8N/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:48:24.617

它在调整你的 CSS 后对我有用，你不必添加所有额外的 CSS 引用。像这样保持简单，它在我这边工作得很好。

```
<style type="text/css">
li.oldTab{
    /* sets background and text color */
}

li.tab a{
    color: black;
}

li.tab{
    padding: 10px;
    -webkit-border-top-left-radius: 10px;
    -webkit-border-top-right-radius: 10px;
    -moz-border-radius-topleft: 10px;
    -moz-border-radius-topright: 10px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    color: white;
}
li.activeTab a{
    color: white;
}

li.activeTab{
    background: #999;
}
</style> 
```

# linux - 如何向 shell 提供“反向 ssh”？

> ID：11793019
> 
> 赞同：8
> 
> 时间：2012-08-03T09:30:24.867
> 
> 标签：linux, shell, ssh, remote-access, nat

设想：

许多嵌入式设备（运行 Linux）在野外，在路由器后面，因此经过 NAT，我们无法与它们建立连接。

我们需要支持人员能够在任何设备上启动终端/shell 会话。

他们的本地终端也将在公司防火墙后面进行 NAT，因此我们需要一些他们和设备都可以连接到的中心“会面点”。

如有必要，我们可以要求支持人员登录某种终端服务器，但我更喜欢在他们的桌面上弹出终端窗口的解决方案。

我们可以（通过其他方式）告诉设备执行一些任意脚本或应用程序来启动会话。

如果没有 NAT，它只是通过 SSH 连接到设备，然后我们就走了。但是在这个 NAT'd 环境中我有什么选择呢？

如果需要，我们可以在任一端或会合点服务器上开发代码，但显然如果有应用程序，我们就不必编写东西，甚至更好。

指向我可能错过的其他问题（尽管我已经看过）或我应该考虑为中央“会面点”服务器考虑的应用程序的指针欢迎

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T09:49:09.287

如何简单地设置设备和支持用户都可以访问的 ssh 服务器，并让设备设置反向隧道（使用[远程端口转发](https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding#Remote_Port_Forwarding)）？

```
ssh -R 10022:localhost:22 device@server 
```

然后支持人员可以简单地连接到服务器并使用登录

```
ssh -p 10022 localhost 
```

当然，这里需要考虑几个安全方面，具体取决于设备持有/可以访问的信息类型以及支持组织的设置方式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T09:51:08.747

SSH 是一个合适的工具。正如您所说，您将需要一个中间人服务器。但是设置起来很容易，假设您的“执行脚本的其他方式”是远程的并且可以从您的办公室执行。

因此，在全球 IP 上启动一个新服务器（亚马逊 AWS 微节点免费一年，并且可以很好地完成这项工作），并安装一个 ssh 守护程序。说它有主机名`middleman.example.org`。

放到嵌入式设备上的脚本如下所示；

```
#!/bin/bash
ssh -i ./middle_id.pem -R 22:localhost:2222 middleuser@middle.example.org 
```

（私钥身份验证将是使登录非交互的一种方式）

放在桌面机器上的脚本如下所示；（假设参数`$1`是嵌入式设备的 IP，并`prod_remote_device.sh`在所选嵌入式设备上执行上述脚本。）

```
#!/bin/bash
./prod_remote_device.sh $1
ssh -i ./device_id.pem deviceuser@middle.example.org:2222 
```

这应该将您的连接转发到嵌入式设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-14T08:29:28.250

为了使其绑定到所有接口，请使用：

```
ssh -N -R 0.0.0.0:2222:localhost:22  root@example.com 
```

不要忘记编辑**`/etc/ssh/sshd_config`**并转到**`GatewayPorts`**并**启用**它并将其设置为**`yes`**.

然后从任何**Loopback**或**以太网**接口连接到它。

# c# - 从 hashset 中获取 hashset.Count==1 的元素

> ID：11793020
> 
> 赞同：12
> 
> 时间：2012-08-03T09:30:26.473
> 
> 标签：c#

如何从已知恰好包含 1 个元素的哈希集中获取元素？（没有迭代它）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T09:33:07.533

你可以使用**[Single()](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.single?view=netframework-4.8)**

```
var element = yourHashSet.Single(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-08T04:38:21.013

我有一个`HashSet<object>`由于某种原因无法使用`[0]`or访问`.First()`。

虽然在技术上是迭代的，但我将其留在这里，以防其他人遇到我的问题。

```
foreach (var i in myHash){
    object o = i;
    break;
} 
```

只需开始迭代，然后立即中断迭代。

# javascript - hem、browserify、stitch等的比较

> ID：11793022
> 
> 赞同：20
> 
> 时间：2012-08-03T09:30:34.107
> 
> 标签：javascript, node.js, browser, browserify, node-stitch

我见过一些允许为浏览器编译 CommonJS/Node.js 模块的节点模块。直到现在我发现：

*   [浏览器化](https://github.com/substack/node-browserify)
*   [下摆](https://github.com/spine/hem)
*   [缝](https://github.com/sstephenson/stitch)
*   [浏览器构建](https://github.com/LearnBoost/browserbuild)
*   [沃洛](https://github.com/volojs/volo)
*   [卡洪](https://github.com/requirejs/cajon)

我目前正在使用 browserify，我注意到 300 的一些开销？编译时的行。那些应该让我切换的工具之间是否有任何明显的差异？或者你现在有更好的工具吗？

# javascript - jquery 在 Internet Explorer 中不起作用，但在其他浏览器中起作用，“对象不支持此属性或方法”

> ID：11793025
> 
> 赞同：1
> 
> 时间：2012-08-03T09:30:42.557
> 
> 标签：javascript, jquery, xml, internet-explorer

我已经试过了[了 jquery 论坛](https://forum.jquery.com/topic/this-line-fails-in-internet-explorer-but-not-firefox-or-chrome)的答案，但没有得到任何答案。

该页面在 chrome 和 firefox 中加载良好，但在 IE 中加载不正常，它阻塞 SCRIPT438：对象不支持此属性或方法 jquery-1.7.2.js，第 5276 行字符 6

调用堆栈是

```
dirNodeCheck

Sizzle
Sizzle
PSEUDO
filter
Sizzle
Sizzle
find
processXML 
```

我失败的代码行是

```
$(xmldoc).find("idea:not(idea idea)").each( function(index) { 
```

它似乎在 find 方法中失败，它未能通过 sizzle.isXML 检查，但我不知道这是否是它失败的真正原因。

我已经尝试了所有 jquery 版本到 1.1 并且没有改进任何东西。我还尝试将 Internet Explorer 9 切换到各种兼容模式而没有改进。

在所有浏览器、Internet Explorer 和正确呈现的浏览器中，下面的代码将相同的输出打印到控制台（isXMLDoc 为假，长度显示所有元素都在那里）。

```
_("isxml: " + $.isXMLDoc(xmldoc));
_("len: "+ xmldoc.find("idea").length); 
```

Internet Explorer 也是唯一坚持我启动 Web 服务器并从 127.0.0.1 而不是 file:/// 加载的浏览器，我想知道它是否与这个问题有关。我想知道 MIME 类型是否不正确（Internet Explorer 尝试将一些远程网页作为文件下载而不是打开它们），但如果是这种情况，我不知道如何更正。IIS 管理器中显示的 mime 设置显示 .xml 文件映射到 text/xml。

# java - 在 hsqldb 中禁用主机名验证

> ID：11793028
> 
> 赞同：0
> 
> 时间：2012-08-03T09:30:52.837
> 
> 标签：java, security, ssl, jdbc, hsqldb

我有一个 tomcat-hibernate-hsqldb 设置，我想使用 SSL 来保护我的应用程序和 hsqldb 之间的数据传输。但是，我需要预先安装一个可以在任何部署中使用的证书。我不想为每个新部署站点使用新证书。为此，如果我只是使用自签名证书颁发给任何随机公用名，然后在 tomcat 的信任库中安装相同的证书，那么我会收到此异常

```
 java.net.UnknownHostException: Certificate Common Name[random name] does not match host name[192.168.100.10] 
```

我需要在此设置中禁用主机名验证，但我在网上找到的所有信息都指向为 HttpsURLConnection 禁用它的机制。我相信 hsqldb 在文件中有一个自定义代码可以做到这一点

```
org.hsqldb.serverHsqlSocketFactorySecure 
```

这是执行此操作的方法：

```
protected void verify(String host, SSLSession session) throws Exception {

    X509Certificate[] chain;
    X509Certificate   certificate;
    Principal         principal;
    PublicKey         publicKey;
    String            DN;
    String            CN;
    int               start;
    int               end;
    String            emsg;

    chain       = session.getPeerCertificateChain();
    certificate = chain[0];
    principal   = certificate.getSubjectDN();
    DN          = String.valueOf(principal);
    start       = DN.indexOf("CN=");

    if (start < 0) {
        throw new UnknownHostException(
            Error.getMessage(ErrorCode.M_SERVER_SECURE_VERIFY_1));
    }

    start += 3;
    end   = DN.indexOf(',', start);
    CN    = DN.substring(start, (end > -1) ? end
                                           : DN.length());

    if (CN.length() < 1) {
        throw new UnknownHostException(
            Error.getMessage(ErrorCode.M_SERVER_SECURE_VERIFY_2));
    }

    if (!CN.equalsIgnoreCase(host)) {

        // TLS_HOSTNAME_MISMATCH
        throw new UnknownHostException(
            Error.getMessage(
                ErrorCode.M_SERVER_SECURE_VERIFY_3, 0,
                new Object[] {
            CN, host
        }));
    }
} 
```

有没有办法绕过这个机制并禁用主机名验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:48:43.743

在 hsqldb 论坛上问了同样的问题，并知道没有解决方法。您唯一能做的就是注释掉调用验证方法的代码，然后重建 jar。我仍然很困惑为什么 hsqldb 不使用 HostnameVerifier (http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/HostnameVerifier.html)，这会使编写更容易自定义主机名验证器。

# mysql - 加快 MySQL 中的多维 euclid 距离计算

> ID：11793029
> 
> 赞同：6
> 
> 时间：2012-08-03T09:30:56.340
> 
> 标签：mysql, database-design, query-optimization, database-optimization

我有下表存储有关图像的数据：

```
images
 - id (int)
 - sample_1_1 (int)
 - sample_1_2 (int)
 - sample_1_3 (int)
 - sample_2_1 (int)
 - sample_2_2 (int)
 - sample_2_3 (int)
 - ... # Up until sample_25_3 
```

任务是计算收集到的数据之间的距离。目前，我正在使用一个 75 维（没错，3 * 25 = 75）欧几里德距离计算作为存储过程编程到数据库中：

```
CREATE DEFINER=`root`@`localhost`
FUNCTION `distanceBetween`(compareId INT, toId INT) RETURNS double
    READS SQL DATA
    DETERMINISTIC
BEGIN
 DECLARE distance DOUBLE;
SELECT euclidDistance(
 i1.sample_1_1, i1.sample_1_2, i1.sample_1_3,
 i2.sample_1_1, i2.sample_1_2, i2.sample_1_3,
 ...
 ) INTO distance
FROM images i1, (SELECT * FROM images WHERE id = toId) i2
WHERE i1.id = compareId;
RETURN distance;
END 
```

用另一个子程序计算 2 75-dim 之间的实际距离。载体：

```
CREATE DEFINER=`root`@`localhost`
    FUNCTION `euclidDistance`(
 img1_sample1_1 INT, img1_sample1_2 INT, img1_sample1_3 INT,
 img2_sample1_1 INT, img2_sample1_2 INT, img2_sample1_3 INT,
 ...
 ) RETURNS double
RETURN SQRT(
   quadDiff(img1_sample1_1, img2_sample1_1)
 + quadDiff(img1_sample1_2, img2_sample1_2)
 + quadDiff(img1_sample1_3, img2_sample1_3)
 + ...
) 
```

还有另一个子程序来计算两个值之间的平方差：

```
CREATE DEFINER=`root`@`localhost`
FUNCTION `quadDiff`(var1 INT, var2 INT) RETURNS int(11)
RETURN POW(var1 - var2, 2) 
```

函数本身非常好，并返回在数学和逻辑上都正确的确定性结果。

当我想获得**与给定图像“最接近”的图像**时，问题就出现了——这意味着与任何给定图像距离最短的图像。为此，我使用另一个过程：

```
CREATE DEFINER=`root`@`localhost`
PROCEDURE `getSimilarImages`(imageId INT, `limit` INT)
BEGIN
    SELECT i2.id, i2.filename, distanceBetween(i1.id, i2.id) distance
    FROM images i1, (SELECT * FROM images WHERE id != imageId AND duplicateImageId IS NULL) i2
    WHERE i1.id = imageId
    ORDER BY distance
    LIMIT 10;
END 
```

该数据库目前包含大约 30.000 张图像。这意味着 a`CALL getSimilarImages(123, 10);`大约需要**12**秒才能完成。这对于任何应用程序来说都太长了，无论是基于 Web 的还是基于应用程序的。

所以，我想加快速度。我有哪些选择？您是否看到任何优化图像比较或计算距离过程的潜力？

我考虑过*缓存*过程的结果，但我不知道该怎么做。我还可以在添加新图像后立即将每张图像与其他图像进行比较，但这会使添加图像的过程非常漫长，这也是不可接受的。

如果有帮助，我可以提供有关系统设置的更多信息，但我感谢您提供的任何指示。目前的情况并不好，我真的需要做点什么，因为图像数据库只会随着系统启动的每一个小时而增长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:16:11.920

正如您所发现的，您的 ORDER BY distance(a,b) 操作正在计算全部 75 维距离，不出所料，这需要很长时间。它必须计算整个批次，以便执行 ORDER 操作。哎哟。

这是一个关于欧几里得距离的观察，可能会对您有所帮助：边界框是一个有用的近似值。当您使用 GetSimilarImages 时，您能否仅包含与您正在使用的 imageId 的特定阈值距离内的图像？

假设您只关心`rad`imageId 距离内的图像。然后你可以像这样修改你的 GetSimilarImages 查询。

```
PROCEDURE `getSimilarImages`(imageId INT, `limit` INT, rad INT)
BEGIN
    SELECT i2.id, i2.filename, distanceBetween(i1.id, i2.id) distance
    FROM images i1, 
    (SELECT * FROM images WHERE id != imageId AND duplicateImageId IS NULL) i2
    WHERE i1.id = imageId
      AND i1.img_sample_1_1 BETWEEN i2.img_sample_1_1 - rad
                                AND i2.img_sample_1_1 + rad
      AND i1.img_sample_1_2 BETWEEN i2.img_sample_1_2 - rad
                                AND i2.img_sample_1_2 + rad
      AND i1.img_sample_1_3 BETWEEN i2.img_sample_1_3 - rad
                                AND i2.img_sample_1_3 + rad
    ORDER BY distance
    LIMIT 10;
END 
```

在此示例代码中，我任意选择了 75 个维度中的前三个用于边界框包含代码（三个`BETWEEN`子句）。为了使这种优化起作用，您需要至少在一些用于边界框包含的维度上创建索引。

选择三个维度或选择任何特定维度并没有什么特别之处。如果您从数据中知道某些尺寸可以更好地区分图像，那么您可以选择这些尺寸。您可以根据需要选择尽可能多的尺寸。但是，当然有索引开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:52:02.053

编写 UDF C 函数或调用调用 GPU 函数的本机 C 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:56:35.563

此案例的优化提示：

在列上添加索引`id`，`duplicateImageId`最好使用`clustured index`.

尽量避免在大表上进行多次选择`images`。

您可以通过在函数内部调用函数时减少函数调用的数量来略微提高性能。所有这些函数调用都需要在内存堆栈中维护，这会消耗硬件资源。

每次更改代码以进行优化后的性能基准。

```
CREATE PROCEDURE getSimilarImages(imageId INT unsigned, limit INT unsigned)
BEGIN
    SELECT i2.id, i2.filename, euclidDistance(
 i1.sample_1_1, i1.sample_1_2, i1.sample_1_3,
 i2.sample_1_1, i2.sample_1_2, i2.sample_1_3,
 ...
 ) AS distance
    FROM images i1, (SELECT id, filename 
                     FROM images 
                     WHERE id <> imageId AND 
                           duplicateImageId IS NULL
                    ) i2
    WHERE i1.id = imageId
    ORDER BY distance
    LIMIT 10;
END;

CREATE FUNCTION euclidDistance(
 img1_sample1_1 INT, img1_sample1_2 INT, img1_sample1_3 INT,
 img2_sample1_1 INT, img2_sample1_2 INT, img2_sample1_3 INT,
 ...
 ) RETURNS double
RETURN SQRT(
   POW(img1_sample1_1 - img2_sample1_1, 2)
 + POW(img1_sample1_2 - img2_sample1_2, 2)
 + POW(img1_sample1_3 - img2_sample1_3, 2)
 + ...
); 
```

希望这可以帮助。

# knockout.js - 保持收藏有序

> ID：11793033
> 
> 赞同：0
> 
> 时间：2012-08-03T09:31:00.520
> 
> 标签：knockout.js

我的视图模型中有一个可观察的数组。是否可以在推送附加商品后一直订购商品？

例子：

```
[ { a: 4 }, { a: 1 }, { a: 2 } ]; 
```

显示在按属性排序的 UI 上`a`。所以`[ { a: 1 }, { a: 2 }, { a: 4 } ]`。
然后我从服务器加载一些新项目 - `[ { a: 5 }, { a: 3 } ]`，将它们推送到数组中，数组仍然在 UI 上按顺序显示。是否可以使用 core ko 功能？
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:49:32.103

每次将数据推送到数组中时，您都可以调用该`.sort()`方法 - 您不能直接将它们插入到数组的中间（请参阅[文档](http://knockoutjs.com/documentation/observableArrays.html#pop_push_shift_unshift_reverse_sort_splice)）。

在您的情况下，您可以执行以下操作：

```
// Todo: insert (push) all inside the observableArray when you retrieved it from the server

// Now sort the data
observableArray.sort(function (left, right) {
    return left.a == right.a ? 0 : (left.a < right.a ? -1 : 1);
}); 
```

# c# - 需要C#解决方案来读取xml元素值

> ID：11793038
> 
> 赞同：1
> 
> 时间：2012-08-03T09:31:15.850
> 
> 标签：c#, xml-parsing, xmlnode

我有一个复杂的结构 xml，我需要从中读取一些元素值。我的 xml 有点像这样：

```
<plist version="1.0">
<dict>
<key>XYZ</key>
<dict>
    <key>KEYVALUE1</key>
    <dict>
        <key>A</key>
        <date>AVALUE1</date>
        <key>B</key>
        <string>BVALUE1</string>            
    </dict>
    <key>KEYVALUE2</key>
    <dict>
        <key>A</key>
        <date>AVALUE2</date>
        <key>B</key>
        <string>BVALUE2</string>    
        <key>C</key>
        <string>CVALUE2</string>        
    </dict>
</dict>
</dict>
</plist> 
```

我需要的是：用 KEYVALUE2 搜索一个字典，无论我得到它，从中选择 BVALUE2（你可以用任何数字替换 2，为了简洁起见，我只包含了 2 个节点）。

我是 xml 编程的新手，我尝试 MS 文档的所有尝试只会让我更加困惑。有时我发现一个 xmlreader 示例并不能完全满足我的目的，而其他时候我得到的 LINQ 示例由于其结构而使我感到困惑。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:54:24.217

有许多技术允许您访问 XML。
由于 linq 不是您的口味，您可以执行以下操作：
将 XmlDocument 与 XPath 一起使用，例如在此示例中：

```
XmlDocument xmldoc = new XmlDocument();
xmlDoc.LoadXml(xml);
string bvalue = xmlDoc.SelectSingleNode("//dict[key='" + key + "']/dict/string).InnerText; 
```

但我建议先更改 XML 的结构
。XML 是一种很好的关系数据结构。您的键排列方式没有关系。在我看来，每个级别应该有一个键，如下所示：

```
<dict>     
    <KeyValuePair>
        <key type="date">A</key>        
        <value>AVALUE2</value>
    </KeyValuePair>
    <KeyValuePair>
        <key type="string">B</key>        
        <value>BVALUE2</value>            
    </KeyValuePair>        
</dict> 
```

这样你就可以写：

```
string value = xmlDoc.SelectSingleNode("//KeyValuePair[key = 'B']/value").InnerText; 
```

祝你好运！

# vba - 将 Excel 中的值从字符串更改为数字

> ID：11793051
> 
> 赞同：2
> 
> 时间：2012-08-03T09:32:04.267
> 
> 标签：vba, excel, number-formatting

我在 VBA 中编写了一个脚本，将文本文件中的数字插入到工作表中。插入值后，Excel 建议我将值从字符串转换为数字。在单元格内，会出现一个绿色三角形。选择单元格后，您可以选择不同的选项来格式化单元格内的值。

我还尝试在 VBA 中将值转换为双精度值，`CDbl(string)`但没有任何反应。

更改`NumberFormat`也不起作用。我在 VBA 和 Excel 中尝试了不同的值。

我还尝试在选择方法时录制宏，但宏内没有保存任何内容。

有人知道怎么做吗？

![在此处输入图像描述](../Images/29ff67f3a8b57b75bf58b5805cbedcf6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:36:32.483

试试这个。我以单元格 A1 为例。此外，如果有十进制值，则不要`Long`使用 a`Double`并相应地更改`NumberFormat`。

```
Sub Sample()
    Dim clVal As Long

    With Sheet1.[a1]
        clVal = Val(.Value)
        .NumberFormat = "0"
        .ClearContents
        .Formula = clVal
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:41:06.030

这可能看起来有点傻，但你试过`Range("A1").Value = Range("A1").Value`吗？

更一般地说，您可以遍历 myrange，假设它是您要修复的范围：

```
For Each c in myrange
   c.Value = c.Value
Next 
```

# css - 如果你设置字体大小，你会确定元素占据的高度吗？

> ID：11793052
> 
> 赞同：0
> 
> 时间：2012-08-03T09:32:08.727
> 
> 标签：css

假设您有一个包含一行文本的 div，您已将其字体大小设置为 16px。你能确定div的高度吗？我猜不是。我的意思是字体大小似乎与文本行的高度无关。究竟什么是字体大小？字母宽度的像素数？

我问这个的原因是我需要能够设置一行文本的字体大小并确定文本的高度。有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:34:28.417

您也可以设置行高！

```
element {
    font-size: 12px;
    line-height: 16px;
} 
```

这将使元素的高度为 16 像素。这也允许您垂直居中文本。但是，设置行高不会改变字体大小。

# php - 使用PHP导出excel时如何删除警告

> ID：11793054
> 
> 赞同：3
> 
> 时间：2012-08-03T09:32:15.753
> 
> 标签：php, export-to-excel

当我使用 PHP 导出 Excel 时，任何人都可以帮助我如何删除此警告。

> “您尝试打开的文件 'MyFile.xls' 的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您要打开现在存档？”

我完全理解警告，说 Excel 内容具有不同的格式。我只是想知道如何/如何删除此警告

```
<?php
    header("Content-type:   application/x-msexcel; charset=utf-8");
    header("Content-Disposition: attachment; filename=MyFile.xls");
?> 
```

现在我只有上面的代码，这意味着还没有显示，我试图在填充任何内容之前先解决这个问题。当前安装的版本是 MS Office 2007。我想尝试 PHPExcel，但我不确定它是否能解决问题。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-03T03:37:05.277

PHPExcel 中的上述答案会给你很好的结果。但是如果你想用 corePHP 来实现它，那么这里是要实现的代码。

```
<?php

function xlsBOF() {
    echo pack("ssssss", 0x809, 0x8, 0x0, 0x10, 0x0, 0x0);
}
function xlsEOF() {
    echo pack("ss", 0x0A, 0x00);
}
function xlsWriteNumber($Row, $Col, $Value) {
    echo pack("sssss", 0x203, 14, $Row, $Col, 0x0);
    echo pack("d", $Value);
}
function xlsWriteLabel($Row, $Col, $Value) {
    $L = strlen($Value);
    echo pack("ssssss", 0x204, 8 + $L, $Row, $Col, 0x0, $L);
    echo $Value;
} 
// prepare headers information
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Disposition: attachment; filename=\"export_".date("Y-m-d").".xls\"");
header("Content-Transfer-Encoding: binary");
header("Pragma: no-cache");
header("Expires: 0");
// start exporting
xlsBOF();
// first row 
xlsWriteLabel(0, 0, "id");
xlsWriteLabel(0, 1, "name");
xlsWriteLabel(0, 2, "email");
// second row 
xlsWriteNumber(1, 0, 230);
xlsWriteLabel(1, 1, "John");
xlsWriteLabel(1, 2, "john@yahoo.com");
// third row 
xlsWriteNumber(2, 0, 350);
xlsWriteLabel(2, 1, "Mark");
xlsWriteLabel(2, 2, "mark@yahoo.com");
// end exporting
xlsEOF();
exit;

?> 
```

[来自http://krasimrtsonev.com/blog/article/php-export-mysql-data-to-xls-file](http://krasimirtsonev.com/blog/article/php-export-mysql-data-to-xls-file)的参考资料

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:36:06.357

您可能正在保存带有 XLS 扩展名的 CSV 文件。将 Content-type 更改为 text/csv 并将文件扩展名更改为 .csv，默认情况下它会在 Excel 中打开，并且应该会阻止显示此警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:45:23.347

我也收到了这个警告。

然后我使用了PHPExcel。

可能对你有帮助。[http://phpexcel.codeplex.com/wikipage?title=Examples&referringTitle=Home](http://phpexcel.codeplex.com/wikipage?title=Examples&referringTitle=Home)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:36:55.927

您确定要导出 excel 文档吗？

如果是这样：尝试以下标题：

```
header("Pragma: public");
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment; filename="MyFile.xls"'); 
```

这不会给我的 MS Office 2007 安装错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-28T08:03:07.133

您可以使用 ：

```
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="myfile.xls"');
header('Cache-Control: max-age=0'); 
```

或使用以下代码：

// 包含 PHPExcel_IOFactory

```
include 'PHPExcel/IOFactory.php';

$inputFileName = './sampleData/example1.xls';

//  Read your Excel workbook
try {
    $inputFileType = PHPExcel_IOFactory::identify($inputFileName);
    $objReader = PHPExcel_IOFactory::createReader($inputFileType);
    $objPHPExcel = $objReader->load($inputFileName);
} catch(Exception $e) {
    die('Error loading file "'.pathinfo($inputFileName,PATHINFO_BASENAME).'": '.$e->getMessage());
}

//  Get worksheet dimensions
$sheet = $objPHPExcel->getSheet(0); 
$highestRow = $sheet->getHighestRow(); 
$highestColumn = $sheet->getHighestColumn();

//  Loop through each row of the worksheet in turn
for ($row = 1; $row <= $highestRow; $row++){ 
    //  Read a row of data into an array
    $rowData = $sheet->rangeToArray('A' . $row . ':' . $highestColumn . $row,
                                    NULL,
                                    TRUE,
                                    FALSE);
    //  Insert row data array into your database of choice here
} 
```

参考：

[http://www.grad.clemson.edu/assets/php/phpexcel/documentation/api/__filesource/fsource_phpexcel__phpexceliofactory.php.html](http://www.grad.clemson.edu/assets/php/phpexcel/documentation/api/__filesource/fsource_phpexcel__phpexceliofactory.php.html)

# android - CursorWindow 列数

> ID：11793059
> 
> 赞同：1
> 
> 时间：2012-08-03T09:32:58.627
> 
> 标签：android, cursor

我怎么知道一个上有多少列`CursorWindow`？为什么它有一个`getNumRows()`但没有`getNumColumns()`，尽管有一个`setNumColumns()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:03:57.113

我以这种**最可怕**的方式做到了：

```
/**
 * Get the number of columns of this CursorWindow. The CursorWindow has to
 * have at least one row.
 */
public static int getCursorWindowNumCols(CursorWindow window) {

    // Ugly hack...
    int j = 0;
    while (true) {
        try {
            window.getString(0, j);
        } catch (IllegalStateException e) {
            break;
        } catch (SQLException e) {
            // It's a BLOB!
        }
        j++;
    }
    return j;
} 
```

我**不推荐**使用这个。如果有人遇到同样的问题并且需要快速解决方案才能开始行动，只需发布​​它即可。

# linux - qsub 中的别名命令

> ID：11793062
> 
> 赞同：2
> 
> 时间：2012-08-03T09:33:17.870
> 
> 标签：linux, bash, qsub, sungridengine

qusb 的 -V 选项仅导入环境变量，但不导入 .bashrc 的别名。例如

```
### in .bashrc
alias ll='ls -ltr'
alias la='ls -A'
export PYTHONPATH=/local/python_other:$PYTHONPATH 
```

并且 qsub 脚本是

```
#!/bin/sh    
#$ -V
echo $PYTHONPATH
ls
ll
la 
```

在这种情况下`echo $PYTHONPATH`，`ls`工作正常，但`ll`会`la`出错`ll: command not found`。那么如何在 qsub 中导入别名命令呢？

或者有没有更好的替代方法，`alias`以便命令（`ll`或`la`）表现得像`ls`并且可以轻松导入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:41:15.260

别名旨在提供命令行便利。它们不适合在脚本中使用。对于大多数用途，您应该使用函数。函数可以导出到子 Bash 脚本，但不太可能导出到其他环境。

也就是说，您可以尝试`~/.bashrc`在您的 qsub 脚本中明确采购您的内容。

```
. $HOME/.bashrc 
```

或者

```
source $HOME/.bashrc 
```

我不知道qsub支持其中哪些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:42:58.053

`~/.bashrc`如果您在非交互模式下运行脚本，则不会被解释。您必须打开交互模式

```
#!/bin/bash -i 
```

`~/.bashrc`或者更好的是在脚本开头显式导入：

```
. ~/.bashrc 
```

# facebook - FB 应用请求 - 重定向到应用中心页面与应用配置文件页面

> ID：11793063
> 
> 赞同：2
> 
> 时间：2012-08-03T09:33:17.643
> 
> 标签：facebook, apprequests

我的 iOS 应用程序将具有一个邀请功能，该功能将请求发送到用户的应用程序中心 > 请求选项卡。我想知道的是，我如何控制接受请求是否将我的用户带到 App Profile 页面或 App Center 页面？例如，如果我只有一个 App Profile 页面，那会被使用吗？如果我同时拥有 App Profile 页面和 App Center 页面，是否会优先于另一个页面，或者我可以控制用户在接受邀请/请求时去哪里？

（由于我的最终目的是让用户去iTunes获取应用程序，有没有办法让请求直接重定向到那里？我意识到我可以在App Center设置中设置iTunes商店页面，但我猜这需要 App Center 页面首先处于活动状态。）

# google-calendar-api - 如何通过谷歌日历 API“添加客人”到活动？

> ID：11793066
> 
> 赞同：4
> 
> 时间：2012-08-03T09:33:48.297
> 
> 标签：google-calendar-api

您能否给我一个关于如何通过谷歌日历 api 共享单个事件的提示？

那就是我想邀请其他用户以编程方式查看活动，而不共享整个日历。模仿“添加客人”的 UI 动作 ![谷歌日历 添加客人](../Images/8f03729f5b406fc5efb54697deb7554b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-04-04T14:50:23.043

正如 Claudio 所提到的，您需要为此使用 Google Calendar Advanced API。

您需要使用 a`patch`因为您不想替换日历邀请中的所有其他数据。但是，即使在 的情况下`patch`，由于与会者居住在一个数组中，如果您尝试传递这样的补丁：

```
{
  attendees: [ { email: "new@example.com"} ]
} 
```

...它将替换所有旧受邀者（即，它将删除在您致电之前受邀的任何人`patch`）。要解决此问题，您必须首先获取当前受邀者，将新人添加到数组中，然后发送`patch`.

[您可以在此答案](https://stackoverflow.com/a/55509409/35690)中查看详细示例，该示例还解释了如何使用 Google Apps 脚本确保在将用户添加到日历事件时向用户发送电子邮件（请参阅该`addGuestAndSendEmail()`帖子中的方法）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T16:01:32.713

您可以使用 API 将人员添加到`attendees`集合中：

[https://developers.google.com/google-apps/calendar/v3/reference/events/update](https://developers.google.com/google-apps/calendar/v3/reference/events/update)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-12T12:16:32.093

请参阅以下请求。

方法：POST

端点：[https ://www.googleapis.com/calendar/v3/calendars/primary/events?sendUpdates=all](https://www.googleapis.com/calendar/v3/calendars/primary/events?sendUpdates=all)

在这里，sendUpdates 意味着当您添加任何客人时，他会收到基于场景使用的邀请邮件。

输入Json：{“kind”：“calendar#event”，“etag”：“etag”，“status”：“confirmed”，“summary”：“JayKara”，“description”：“eqwbdjhwhhwhhwrhjehrhejhfj”，“location”： “美国”，“创作者”：{“电子邮件”：“ **@mail.com”，“自我”：真实}，“组织者”：{“电子邮件”：“**@mail.com", "self": true }, "start": { "date": "2019-12-23" }, "end": { "date": "2019-12-24" }, " originalStartTime": { "date": "2019-12-24" }, "visibility": "public", "attendees": [ { "email": "****@mail.com" //这些人是客人 } ] }。

之后，不需要任何补丁方法，无论何时更新活动，您的客人都会收到邀请

干杯!

# java - ConcurrentHashMap 如何在内部工作？

> ID：11793067
> 
> 赞同：52
> 
> 时间：2012-08-03T09:33:58.670
> 
> 标签：java, collections, concurrency, hashmap

我正在阅读有关 Java 并发的 Oracle 官方文档，我想知道`Collection`返回的a 之间可能有什么区别

```
public static <T> Collection<T> synchronizedCollection(Collection<T> c); 
```

并使用例如

`ConcurrentHashMap`. 我假设我`synchronizedCollection(Collection<T> c)`在`HashMap`. 我知道一般来说同步集合本质上只是我的装饰器，`HashMap`所以很明显 a`ConcurrentHashMap`在其内部有一些不同的东西。你有关于这些实施细节的一些信息吗？

**编辑：我意识到源代码是公开的：** [ConcurrentHashMap.java](http://www.docjar.com/html/api/java/util/concurrent/ConcurrentHashMap.java.html)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-03T09:39:40.243

我会阅读[ConcurrentHashMap 的源代码，](http://www.docjar.com/html/api/java/util/concurrent/ConcurrentHashMap.java.html)因为它的细节相当复杂。简而言之，它有

*   可以独立锁定的多个分区。（默认为 16 个）
*   使用并发锁操作来保证线程安全而不是同步。
*   具有线程安全的迭代器。synchronizedCollection 的迭代器不是线程安全的。
*   不暴露内部锁。synchronizedCollection 可以。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-03T09:38:26.160

与类`ConcurrentHashMap`非常相似`java.util.HashTable`，只是它提供了比或`ConcurrentHashMap`更好的并发性。阅读时不会锁定地图。此外，写入时不会锁定整个。它只在内部锁定正在写入的部分。`HashTable``synchronizedMap``ConcurrentHashMap``ConcurrentHashMap``Map``Map`

`ConcurrentModificationException`另一个区别是，如果在`ConcurrentHashMap`迭代时更改了 ConcurrentHashMap ，则不会抛出异常。虽然`Iterator`它不是为多个线程使用而设计的，但`synchronizedMap`可能会抛出`ConcurrentModificationException`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-03T10:00:21.787

这是帮助我理解它的文章[为什么 ConcurrentHashMap 比 Hashtable 更好，并且和 HashMap 一样好](https://web.archive.org/web/20120321221256/http://www.codercorp.com/blog/java/why-concurrenthashmap-is-better-than-hashtable-and-just-as-good-hashmap.html)

> Hashtable 提供对其条目的并发访问，但有一点需要注意的是，整个地图被锁定以执行任何类型的操作。虽然这种开销在正常负载下的 Web 应用程序中是可以忽略的，但在重负载下，它可能会导致响应时间延迟和服务器负担过重。
> 
> 这就是 ConcurrentHashMap 介入的地方。它们提供了 Hashtable 的所有功能，性能几乎与 HashMap 一样好。ConcurrentHashMap 通过一个非常简单的机制来实现这一点。默认情况下，集合维护一个包含 16 个锁的列表，而不是映射范围的锁，每个锁用于保护（或锁定）映射的单个存储桶。这实际上意味着 16 个线程可以一次修改集合（只要它们都在不同的存储桶上工作）。事实上，这个集合没有执行任何锁定整个地图的操作。集合的并发级别，可以不阻塞地同时修改它的线程数，可以增加。但是，更高的数字意味着维护此锁列表的开销更大。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-01T09:05:33.440

的“可扩展性问题”以`Hashtable`完全相同的方式存在`Collections.synchronizedMap(Map)`- 它们使用非常简单的同步，这意味着只有一个线程可以同时访问映射。

当您进行简单的插入和查找时，这不是什么大问题（除非您非常密集地执行此操作），但是当您需要遍历整个 Map 时，这会成为一个大问题，这对于大型 Map 可能需要很长时间 - 而一个线程执行此操作，所有其他线程如果要插入或查找任何内容，则必须等待。

使用`ConcurrentHashMap`非常复杂的技术来减少同步的需要并允许多个线程在不同步的情况下并行读取访问，更重要的是，提供了一个不需要同步的迭代器，甚至允许在交互期间修改 Map（尽管它不保证是否或不返回在迭代期间插入的元素）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-03T09:38:25.260

*synchronizedCollection()*返回的是一个对象，其所有方法都在*this*上同步，因此此类包装器上的所有并发操作都是序列化的。ConcurrentHashMap 是一个真正的并发容器，具有优化的细粒度锁定以尽可能降低争用。看看源代码，你会看到里面有什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-04T06:18:55.130

ConcurrentHashMap 实现了提供并发性的 ConcurrentMap。在内部深处，它的迭代器设计为一次仅由一个线程使用，以保持同步。此映射在并发中广泛使用。

# php - PHP API 0.6 重定向失败（将文件从驱动器复制到我自己的服务器）

> ID：11793078
> 
> 赞同：0
> 
> 时间：2012-08-03T09:34:37.767
> 
> 标签：php, google-drive-api, elgg

我在这里有一份最新的 PHP API（显然是几个小时前出现的 - 0.6）的副本[。](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/#src%253Fstate%253Dclosed)

它解决了我的问题，如下所述：[Google Drive SDK: Inserting a file results in Untitled in PHP](https://stackoverflow.com/questions/11633722/google-drive-sdk-inserting-a-file-results-in-untitled-in-php)

但是现在，在将文件从 Drive 复制到我的服务器后，我遇到了重定向问题（例如，对于当前的 API (0-5)，文件仍被称为 apiDriveService 很好）。副本本身正在运行，这里不用担心。但我无法将用户发送到我想要的地方。

**我正在使用 Elgg 1.7 及其前向功能**（在网站上的任何地方都可以正常工作，如上所述，使用 0.5 API）。

如果您需要更多信息，请随时告诉我。我会尝试您的建议，但请注意，我下周将休假，因此，我可能不会立即检查或回答。

编辑：没关系，我们发现了问题：之前有一个空格

```
<?php 
```

在我复制粘贴的其中一个文件中。

# c# - LINQ 选择新对象，在函数中设置对象的值

> ID：11793079
> 
> 赞同：9
> 
> 时间：2012-08-03T09:34:46.340
> 
> 标签：c#, linq, list

我正在使用`LINQ`将一个新`twoWords`对象选择到`List`这些对象中，并通过调用函数/方法来设置值。

请看看这是否有意义，我已经简化了很多。我真的很想使用 linq 语句`from` `select`。

中的第一个功能`GOGO`将起作用，第二个功能失败（尽管它们不执行相同的任务）

```
// simple class containing two strings, and a function to set the values
public class twoWords
{
    public string word1 { get; set; }
    public string word2 { get; set; }

    public void setvalues(string words)
    {
        word1 = words.Substring(0,4);
        word2 = words.Substring(5,4);
    }
}

public class GOGO
{

    public void ofCourseThisWillWorks()
    {
        //this is just to show that the setvalues function is working
        twoWords twoWords = new twoWords();
        twoWords.setvalues("word1 word2");
        //tada. object twoWords is populated
    }

    public void thisdoesntwork()
    {
        //set up the test data to work with
        List<string> stringlist =  new List<string>();
        stringlist.Add("word1 word2");
        stringlist.Add("word3 word4");
        //end setting up

        //we want a list of class twoWords, contain two strings : 
        //word1 and word2\. but i do not know how to call the setvalues function.
        List<twoWords> twoWords = (from words in stringlist 
                            select new twoWords().setvalues(words)).ToList();
    }
} 
```

的第二个函数`GOGO`会导致错误：

> select 子句中的表达式类型不正确。调用“选择”时类型推断失败。

我的问题是，如何在使用函数设置值的同时选择`twoWords`上述`from`子句中的新对象`setvalues`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T09:37:45.550

您需要使用语句 lambda，这意味着不使用查询表达式。在这种情况下，无论如何我都不会使用查询表达式，因为您只有一个选择...

```
List<twoWords> twoWords = stringlist.Select(words => {
                                                var ret = new twoWords();
                                                ret.setvalues(words);
                                                return ret;
                                            })
                                    .ToList(); 
```

或者，只是有一个返回适当的方法`twoWords`：

```
private static twoWords CreateTwoWords(string words)
{
    var ret = new twoWords();
    ret.setvalues(words);
    return ret;
}

List<twoWords> twoWords = stringlist.Select(CreateTwoWords)
                                    .ToList(); 
```

如果您真的想要，这也可以让您使用查询表达式：

```
List<twoWords> twoWords = (from words in stringlist 
                           select CreateTwoWords(words)).ToList(); 
```

当然，另一种选择是提供`twoWords`一个从一开始就做正确事情的构造函数，此时您不仅需要调用方法......

# javascript - Chrome 扩展：加载页面时执行扩展

> ID：11793080
> 
> 赞同：0
> 
> 时间：2012-08-03T09:34:58.840
> 
> 标签：javascript, google-chrome-extension

我正在开发一个目前可以正常运行的扩展，但只有当我点击扩展图标时。

我想要的是，加载网页时会自动执行扩展程序。需要执行的是我的 .js 文件。

我该如何处理这个问题/功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:17:52.333

方法`chrome.tabs.getSelected`在清单版本 2 中已弃用。[`chrome.tabs.query({active : true, currentWindow : true}, callback)`](http://code.google.com/chrome/extensions/tabs.html#method-query)如果您想获取当前活动的选项卡，或者[`chrome.tabs.query({url : '...'}, callback)`](https://code.google.com/chrome/extensions/tabs.html#method-query)如果您想通过匹配 URL 模式来获取选项卡，您应该使用。

# git - 创建合并提交用他们的替换我们的

> ID：11793081
> 
> 赞同：6
> 
> 时间：2012-08-03T09:34:59.103
> 
> 标签：git

我有两个分支 A 和 B。我想要做的是在 A 上创建一个新的（合并）提交，并将 A 的当前状态作为父级，它引用 B 描述的文件树，丢弃 A 中的任何内容。基本上是B 应该被压缩成一个提交。

具体的存储库状态由两个独立的分支组成，它们没有共同的祖先（来自两个以前独立的存储库），但描述了相同的内容。现在我想找到一种“git”方式将它们组合在一起。一个基本的解决方案（没有 git）是检查 A 并将 B 的内容复制到工作树中并执行`git commit`. 这基本上就是我之前所做的，将第二个存储库的内容传播到第一个存储库。

用 git 来做我试过

```
git checkout A
git merge --squash B 
```

但不幸的是，它为 A 和 B 之间不同的所有文件产生了合并冲突，这绝对不是我所期望的。

基本上像

```
git merge --squash -s theirs 
```

应该做的工作，但合并策略`theirs`不存在。阅读文档显示了使用类似

```
git merge -X theirs 
```

这是合并策略的一个选项`recursive`。但这仍然会合并非冲突的块。只有冲突的块直接取自`theirs`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:27:50.753

[正如您评论的那样，从我在“ git command for making one branch like another](https://stackoverflow.com/questions/4911794/git-command-for-making-one-branch-like-another/4912267#4912267) ”中列出的所有 merge --theirs 策略中，第二个选项接近您的需要：

> 显示为合并，我们的作为第一个父项。
> （由[jcwenger](https://stackoverflow.com/users/633187/jcwenger)提议）

```
git checkout -b tmp upstream
git merge -s ours thebranch         # ignoring all changes from downstream
git checkout downstream
git merge --squash tmp               # apply changes from tmp but not as merge.
git rev-parse upstream > .git/MERGE_HEAD #record upstream 2nd merge head
git commit -m "rebaselined the branch from upstream" # make the commit.
git branch -D tmp                    # deleting tmp 
```

# objective-c - Facebook SDK：如何在 Xcode 中上传 Facebook 上的照片

> ID：11793082
> 
> 赞同：0
> 
> 时间：2012-08-03T09:34:59.297
> 
> 标签：objective-c

我是 Objective C 编程的新手，我开始开发一些应用程序。我正在寻找一个有用的库来上传我的 Facebook 照片。我正在使用带有 5.1 模拟器的更新版本的 Xcode。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:27:17.583

这是我在我的应用程序中使用的：

```
- (void)uploadImage:(UIImage *)image withName:(NSString *)name
{
    if (image)
    {
        incomingRequests++;
        //Image settings/parameters
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       name,@"caption",image, @"picture",
                                       nil];

        //method to upload images
        [self.facebook requestWithMethodName:@"photos.upload"
                                   andParams:params
                               andHttpMethod:@"POST"
                                 andDelegate:self];

        NSString *tempRequestString = [[NSString alloc] initWithString:@"photoUpload"];
        self.facebook.request_string = tempRequestString;
        [tempRequestString release];
    }
} 
```

请参阅本教程以获得更好的理解：[如何在您的 iPhone 应用程序中使用 Facebook 的新图形 API](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)。

# django - Django csrf 令牌

> ID：11793084
> 
> 赞同：2
> 
> 时间：2012-08-03T09:35:11.343
> 
> 标签：django, csrf, django-csrf

视图.py

```
from django.core.context_processors import csrf
context.update(csrf(request))
{'csrf_token': <django.utils.functional.__proxy__ object at 0xae0f4ec>} 
```

我正在尝试将 csrf 令牌添加到我的表单中。我在上面的视图中生成 csrf 令牌。但是 csrf_token 值提供了一些像上面显示的**代理**对象而不是字符串。我正在使用 django 1.3。提前感谢任何形式帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T09:54:42.873

csrf 方法是惰性的，它返回一个 Promise/Proxy。一旦在模板中调用了这个对象，模板引擎就会对该对象进行unicode，从而触发真正的方法。

尝试这个：

```
print unicode(csrf(request)['csrf_token']) 
```

# java-me - 如何在 j2me(java) 屏幕上创建标题

> ID：11793086
> 
> 赞同：1
> 
> 时间：2012-08-03T09:35:14.693
> 
> 标签：java-me, lcdui, midp-2.0

我想在我的 j2me lcdui 列表屏幕上创建一个标题。我怎样才能创建它？当我点击我的 lcdui 列表屏幕时，我将导航到 lcdui 表单屏幕，该时间标题必须相同。

我该如何创作？我用过这个类`com.nokia.mid.ui.DirectUtils`但失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:43:13.600

[您可以使用List.insert](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/lcdui/List.html#insert%28int,%20java.lang.String,%20javax.microedition.lcdui.Image%29)插入带有空字符串的广告图像。

```
list.insert(0, "", adImage); 
```

但如果列表中有足够的项目，此图像可能会向上滚动。如果您需要在标题下固定广告图像，您可以考虑使用 LWUIT 而不是 LCDUI。

# php - 如何通过 html 表单在谷歌地图上以 lat long 从上一页呈现路线？

> ID：11793087
> 
> 赞同：1
> 
> 时间：2012-08-03T09:35:17.477
> 
> 标签：php, google-maps-api-3, routing, draggable, forms, http-post

我想从上一页（通过html表单发送）通过lat long在谷歌地图上呈现路线并将接收值放在php隐藏类型上然后通过jquery提取值并从隐藏类型中的值定义起点，终点最后调用routefunction但是它没有显示路径

我尝试在渲染部分发出警报，它工作正常但不显示路线。我不知道为什么

这是我的代码

```
<?php
//get lat long from previous page html form
    $press = $_POST["send"];
    $lat1 = $_POST["lat1"];
    $long1 = $_POST["long1"];
    $lat2 = $_POST["lat2"];
    $long2 = $_POST["long2"];

?>

<!DOCTYPE html>
<head>     
<script type="text/javascript" src="./jquery.min.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=my_key&sensor=false"></script> 

<script type="text/javascript">

    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;
    var rendererOptions = {draggable: true}; //define dragble direction
    function initialize() { 
        directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions); 
        var center = new google.maps.LatLng(13.76493,100.5383);  

        var mapOptions = {    
            zoom:7,    
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: center
             }        
             map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); //render map
       calcRoute(); //call route function
        }

    function calcRoute()
    {//get lat long from hidden type 
    $(document).ready(function(){
       var lat1 = $("#lat1").val();
       var long1 = $("#long1").val();
       var lat2 = $("#lat2").val();
       var long2 = $("#long2").val(); 

    var start = new google.maps.LatLng(lat1,long1);//define start point
    var end = new google.maps.LatLng(lat2,long2);//define end point
        var request = {    
            origin:start,    
            destination:end,    
            travelMode: google.maps.DirectionsTravelMode.DRIVING  
            };  

        directionsService.route(request, function(result, status) { 
            if (status == google.maps.DirectionsStatus.OK) {  
                 directionsDisplay.setDirections(result);  
                 alert("DO");  //it's show alert when redirect from previous page
                }
            });
        });
    }

</script>  
</head>
<body onload="initialize()"> 
<div id="map_canvas" style="width:500px; height:400px"></div>
<?php
    //put value from previous page on hidden type
    echo "<input type='hidden' id='lat1' value='$lat1'>";
    echo "<input type='hidden' id='long1' value='$long1'>";
    echo "<input type='hidden' id='lat2' value='$lat2'>";
    echo "<input type='hidden' id='long2' value='$long2'>";
?> 
```

# delphi - 是否有检测重复接口 GUID 的工具？

> ID：11793095
> 
> 赞同：10
> 
> 时间：2012-08-03T09:36:09.580
> 
> 标签：delphi, guid

这是典型的复制粘贴错误：

如果复制粘贴了一些包含带有 GUID 的接口声明的 Delphi 代码，Delphi 将不会抱怨和编译在不同地方重用相同 GUID 的代码。

“支持”功能基于其 GUID 与接口一起使用，因此可能会出错。

是否有可用的“质量保证”工具（可能是 Peganza 或 Delphi Sonar 插件）可以检测到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-04T16:18:58.737

仅适用于最新版本的 Delphi。您可以使用以下代码在运行时检测到这一点：

```
unit uInterfaces.Duplicates;

interface

uses
  System.Rtti,
  Spring,
  Spring.Collections;

type
  /// <summary>
  ///   Class allows to list the interfaces which are not implemented by any class in your module.
  /// </summary>
  InterfacesWithDuplicateGUID = class
  private class var
    /// <summary>
    ///   Reference to the RTTI context.
    /// </summary>
    FCtx: TRttiContext;
  public
    /// <summary>
    ///   Function returns the list of interfaces with duplicate GUID.
    /// </summary>
    /// <param name="AFilter">
    ///   A filter predicate for types to process.
    /// </param>
    class function Map(AFilter: TPredicate<TRttiInterfaceType> = nil): IMultiMap<TGUID, TRttiInterfaceType>;

    class constructor Create;
    class destructor Destroy;
  end;

implementation

uses
  System.TypInfo;

{ InterfacesNotImplemented }

class constructor InterfacesWithDuplicateGUID.Create;
begin
  FCtx := TRttiContext.Create;
end;

class destructor InterfacesWithDuplicateGUID.Destroy;
begin
  FCtx.Free;
end;

class function InterfacesWithDuplicateGUID.Map(AFilter: TPredicate<TRttiInterfaceType> = nil): IMultiMap<TGUID, TRttiInterfaceType>;
var
  LType: TRttiType;
  LIntf: TRttiInterfaceType;
  LTypes: IList<TRttiInterfaceType>;
begin
  { Create the result instance }
  Result := TCollections.CreateMultiMap<TGUID, TRttiInterfaceType>;

  { Get all the types }
  LTypes := TCollections.CreateList<TRttiInterfaceType>;

  { Build the multimap }
  for LType in FCtx.GetTypes do
    { Add only classes and interfaces }
    if LType.TypeKind = tkInterface then
      { Skip interfaces which does not have GUID }
      if TRttiInterfaceType(LType).GUID <> TGUID.Empty then
        begin
          { Handle user filter }
          if Assigned(AFilter) then
            if not AFilter(TRttiInterfaceType(LType)) then
              Continue;

          LTypes.Add(TRttiInterfaceType(LType));
        end;

  { For all interaces }
  for LIntf in LTypes do
    if LTypes.Any(
      function (const AType: TRttiInterfaceType): Boolean
      begin
        Result := (AType.GUID = LIntf.GUID) and (LIntf.QualifiedName <> AType.QualifiedName);
      end) then
      Result.Add(LIntf.GUID, LIntf);
end;

end. 
```

当然，如果它符合您的需求。因为将其包含到生产代码中并不是最好的主意。但是可以包含在测试代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-20T09:01:22.417

如果你在 unix/mac 上试试这个 - 或者你的电脑上有[cygwin](https://www.cygwin.com/)

```
find . -name '*.pas' -exec awk "/\['{.*}'\]/ {print $1}" {} \; | sed 's/ //g' | sort | uniq -d 
```

然后找到单独的重复项

```
find . -name '*.pas' -exec grep -i -l 'XXXX-XXX-XXX' {} \; 
```

在mac上测试

# php - 允许客户端与自定义硬件通信的 PHP 脚本

> ID：11793096
> 
> 赞同：1
> 
> 时间：2012-08-03T09:36:15.753
> 
> 标签：php, client-server

我们有一个无线设备（启用 WIFI），它调用 PHP 脚本将数据输入 MySQL 数据库。我试图找到一种方法来查看服务器（通过 PHP 脚本）是否可以“连接”到客户端设备（具有微控制器但没有操作系统或显示器）并传递一些数据。

客户端是连接到门的电子板，服务器需要告诉设备打开门。似乎很简单，但我对此很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:03:40.180

如果客户端**配置为侦听特定端口**，则可以从服务器打开到它的套接字连接（使用`fsockopen()`）。

不过，您需要配置客户端，我不知道该怎么做，因为您的客户端不是标准的。

# codeigniter - Codeigniter 表连接和计数，如何获得计数 0 返回？

> ID：11793097
> 
> 赞同：0
> 
> 时间：2012-08-03T09:36:16.443
> 
> 标签：codeigniter, count

我有两张桌子。

## 表 A（id、title、department）

```
 1,  title 1 ,  1
       2,  title 2 ,  1
       3,  title 3 ,  2 
```

## 表 B ( uid, mid , is_active )

```
 1, 1, 1
       2, 1, 1
       3, 3, 1 
```

这是我的查询语句：

```
 $this->db->select("  id, title ")  
                   ->select('   count(  B.uid ) AS B_count   ')
                   //->select('   IFNULL( COUNT( `B.uid`), 0) AS B_count ', false)
                   //->select( " IFNULL( COUNT(DISTINCT B.uid) AS B_count , 0 )" )
                   ->join( 'B', '   B.mid = A.id   ' ,  'left')
                   ->where('department', 1 )
                   ->where('B.is_active' , 1 )
                   ->limit(  $limit, $offset );     

    $this->db->group_by( array("B.mid") );         

    return $this->get_all(); 
```

我希望得到这样的结果

## id，title，B_count

```
 1, title 1, 2
    2, title 2, 0 
```

但是我只能得到第一条记录，而没有第二条记录。而且我已经尝试过 IFNULL 函数并离开了连接表。真的不知道如何解决这个问题。有谁知道解决方案或问题是什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:56:49.900

使用`get('A')`而不是`get_all()`

# c++ - 向量和维度 vecotr 本身具有特定的数据类型

> ID：11793099
> 
> 赞同：0
> 
> 时间：2012-08-03T09:36:21.183
> 
> 标签：c++, arrays, vector, multidimensional-array

我需要使用 boolean、std:string 和 int 向量化，我用谷歌搜索并将多维向量定义为：

```
std::vector< std::vector< std::vector <std::vector<int> > > a; 
```

但这对我来说有问题，它只有一种数据类型，我找到了一对：

```
std::vector<std::pair<bool,float> >  a; 
```

但是 std::pair 有问题，不能定义更多的二维。

问题：如何定义每个维度都有特定数据类型的多维向量？注意：我需要 3 个维度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:41:14.410

```
template<typename First, typename Second, typename Third>
struct triplet
{
   triplet()
   {
   }
   triplet(const First& f, const Second& s, const Third& t):
      first(f), second(s), third(t)
   {
   }
   First first;
   Second second;
   Third third;
};

template<typename First, typename Second, typename Third>
triplet make_triplet(const First& f, const Second& s, const Third& t)
{
   return triplet(f, s, t);
} 
```

或者当然，如果你有 C++11 支持 - 使用`std::tuple<Args...>`，`boost::tuple`如果可以使用 boost 并且没有 C++11 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:46:59.123

怎么样：

```
struct mytype {
    bool a;
    std::string str;
    int num;
};

std::vector<mytype> 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:42:07.040

a`std::pair`同时包含一个值和一个向量怎么样？IE

```
std::vector<std::pair<bool, std::vector<std::pair<std::string, str::vector<int>>>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:38:12.203

您可以使用 std::tuple

```
std::vector<std::tuple<bool, std::string, int>> 
```

但这不是一个多维向量。它是元组的线性向量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T09:39:09.070

如果唯一的问题`std::pair`是缺少超过 2 维，您可以使用`std::tuple`(c++ 11) 或`boost::tuple`. 或者只是创建自己的结构

# javascript - 如何启用 datePicker ui 附加的输入？（JQuery 插件）

> ID：11793105
> 
> 赞同：0
> 
> 时间：2012-08-03T09:36:44.430
> 
> 标签：javascript, jquery, uidatepicker

```
$('#date_arrow_from, #date_from').click(function() {

        $('#date_from').attachDatepicker({
            rangeSelect: false,
            yearRange: "2011:2012",
            firstDay: 1
        });

        $('#date_from').showDatepicker();

    }); 
```

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/) - 我正在使用这样的东西，但问题是当我点击输入时我不能写任何东西，按键事件被阻止，我怎样才能解锁输入要启用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:39:29.237

看起来您需要将 constrainInput 选项设置为 false

[http://jqueryui.com/demos/datepicker/#option-constrainInput](http://jqueryui.com/demos/datepicker/#option-constrainInput)

> 当输入字段中的真实条目被限制为当前 dateFormat 允许的那些字符时。
> 
> 代码示例使用指定的约束输入选项初始化日期选择器。
> 
> `$(".selector" ).datepicker({ constrainInput: false });`

编辑

虽然上述内容被标记为已接受，但我同意@Edd Morgan 的观点，即您应该尝试利用内置的输入验证（我在使用它时总是这样做）。要特别允许 ISO 8601 格式的日期，您可以非常轻松地更改 datepickers dateFormat 字符串，下面的演示有一个很好的示例列表。

[http://jqueryui.com/demos/datepicker/#date-formats](http://jqueryui.com/demos/datepicker/#date-formats)

```
$(".selector" ).datepicker({ dateFormat: "yy-mm-dd" }); 
```

# ajax - 当我尝试填充时，javascript 函数不起作用在 Grails 中使用 Ajax？

> ID：11793106
> 
> 赞同：0
> 
> 时间：2012-08-03T09:36:51.813
> 
> 标签：ajax, json, grails

我的 GSP 页面中有两个 SELECT 框。我想更改一个 SELECT 框的值取决于同一页面上的另一个 SELECT 框 Onchange 而无需刷新。

创建.gsp

```
 <%@ page contentType="text/html;charset=ISO-8859-1" %>
    <html>
    <g:javascript library="jQuery"/>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <meta name="layout" content="main"/>
    <title>Insert title here</title>
    </head>
    <body>
    <g:form action="" class="inputform">
     <div class="body">
     <div id="cntrls" style="height:550px;width: 600px;border: 1px solid #cccccc;float: left;position: relative;">
    <table>
      <tr>
        <td>Layout or Controls :</td>
        <td><g:select name="layout" id="layout" from="['Layout Component','Control']" noSelection="['0':'----Select----']" onchange="${remoteFunction(controller:'FormCreator', action:'populateControls', onComplete:'cntrl_type(e)',params:'\'filter=\' + escape(this.value)' )}"/></td>
                    </tr>
    <tr>  
      <td>Control Type :</td>  
      <td><g:select name="cntrl_type" id="cntrl_type" from="" noSelection="['0':'----Select----']" value="${formCreator.cntrl_type }"/></td>
      </tr>   
      </table>
    </div>
    </div>
    </g:form>
    </body>
    </html>
<g:javascript>
function cntrl_type(e) {    
    var cntrls = eval("(" + e.responseText + ")") 
    if (cntrls) { 
var rselect = document.getElementById("cntrl_type")
    while (l > 0) { l-- rselect.remove(l) 
}

    // Rebuild the select 
    for (var i=0; i < cntrls.length; i++) { 
        var cntr = cntrls[i] 
        var opt = document.createElement("option"); 
        opt.text = cntr.name
        opt.value = cntr.name
        try { 
            rselect.add(opt, null) 
} 
            catch(ex) { 
                rselect.add(opt) // IE only 
                }
             } 
         } 
     }

    // This is called when the page loads to initialize city 
    var zselect = document.getElementById("layout") 
    var zopt = zselect.options[zselect.selectedIndex] 
    ${remoteFunction(controller:"FormCreator", action:"populateControls", params:"'filter=' + zopt.value", onComplete:"cntrl_type(e)")}
</g:javascript> 
```

用于检索列表的以下处理程序。

```
package autogeneration

import grails.converters.JSON

class FormCreatorController {
def populateControls={      
        def list
        if(params.filter=="Layout Component"){
            list=['Div']
        }else if(params.filter=="Control"){
        list=['Text Type','Combo Box','Text Area','Submit','Label']
    }       
        render list as JSON
} 
```

当我更改第一个选择框的值时，populateControls 函数起作用。但是 javascript 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:32:54.177

虽然我相信你这样做的方式是非常倒退的。您的问题之一可能是您正在使用 cntr.name，而您没有将名称向下传递。它只是一个字符串数组。试试 cntr 而不是 cntr.name？

```
 cntrl_type(e) {    
    var cntrls = eval("(" + e.responseText + ")")         
    for (var i=0; i < cntrls.length; i++) { 
    var cntr = cntrls[i] 
    opt.text = cntr.name 
```

此外，如果您使用 JQuery，它的“数据”，而不是“e”。你也不需要评估。还要更改它，使其调用函数 onSuccess 而不是 onComplete。

```
cntrl_type(e) {    
var cntrls = eval("(" + e.responseText + ")") 
```

另外，这是懒惰的。

```
def list 
```

改为这样做：

```
List<String> list = [] 
```

# c# - C#如何在从设备读取后运行时钟

> ID：11793110
> 
> 赞同：1
> 
> 时间：2012-08-03T09:37:07.847
> 
> 标签：c#

我知道如果我们想显示 pc 时间，我们将使用以下编码：

```
 System.Windows.Forms.Timer tmr = null;
    private void StartTimer()
    {
        tmr = new System.Windows.Forms.Timer();
        tmr.Interval = 1000;
        tmr.Tick += new EventHandler(tmr_Tick);
        tmr.Enabled = true;
    }

    void tmr_Tick(object sender, EventArgs e)
    {
        textBox6.Text = DateTime.Now.ToString("dd/MM/yy HH:mm:ss");
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        StartTimer();
    } 
```

但我不想显示电脑时间。我想显示另一个时间（我的情况下来自微控制器的 rtc 时间）。

如果我从串口获取 rtc 时间并在文本框中显示为“09:00:00”。它只是静态的，对吧？如何让它在文本框上运行/递增？

我已经尝试了从上面的编码修改的以下内容：

```
 System.Windows.Forms.Timer rtc = null;
    private void StartRTC()
    {
        rtc = new System.Windows.Forms.Timer();
        rtc.Interval = 1000;
        rtc.Tick += new EventHandler(rtc_Tick);
        rtc.Enabled = true;
    }
    int i = 1;
    DateTime dt = new DateTime();
    void rtc_Tick(object sender, EventArgs e)
    {
        textBox17.Text = dt.AddSeconds(i).ToString("HH:mm:ss");
        i++;
    } 
```

但是我的文本框中显示的时间总是从 00:00:00 开始递增。

我如何让它在我从微控制器 rtc 获得的时间开始增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:42:11.903

那是因为你开始了`new DateTime()`，所以你得到了一个新`DateTime`类的默认值。`DateTime`您应该使用对微处理器的 API 调用来初始化 的值。

## 例子

请注意，因为我对您的微处理器的 API 一无所知，所以我只能编写伪代码。在您的第二个示例中，替换以下行...

```
DateTime dt = new DateTime(); 
```

和...

```
DateTime dt = DateTime.Parse({some microprocessor API call for the RTC value}); 
```

## 根据上次评论编辑

```
System.Windows.Forms.Timer rtc = null; 
DateTime dt;  // NOTE I DON'T INITIALIZE THIS TO ANYTHING AT FIRST

private void StartRTC() 
{ 
    rtc = new System.Windows.Forms.Timer(); 
    rtc.Interval = 1000; 
    rtc.Tick += new EventHandler(rtc_Tick); 
} 

void rtc_Tick(object sender, EventArgs e) 
{ 
    // NOTE I GOT RID OF i - THAT WASN'T GOING TO WORK LIKE THAT 
    // YOU JUST WANT TO ADD ONE SECOND BECAUSE THE TIMER TICKS EVERY SECOND:
    textBox17.Text = dt.AddSeconds(1).ToString("HH:mm:ss");

    dt = DateTime.Parse(textBox17.Text);
}

 // I HAVE NO IDEA WHAT YOUR METHOD HANDLER IS CALLED, THIS IS 
 // JUST FOR THE EXAMPLE
void buttonSetRtc_Click(object sender, EventArgs e)  
{
    // HERE IS YOUR CALL TO THE MICROCONTROLLER FOR THE INITIAL TIME:
    textBox17.Text = {some call to the microcontroller};  
    dt = DateTime.Parse(textBox17.Text);  // NOW THIS LINE WON'T FAIL
    rtc.Enabled = true;  // NOTE I MOVED THIS LINE TO KEEP IT FROM FAILING
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:54:44.653

您必须使用微控制器日期时间初始化 Datetime dt。如

```
DateTime dt = new DateTime();
dt = dt.AddHours(9); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:02:31.487

我不知道这有多好，但看看这是否可能。

当您能够从您的微控制器检索时间时，为什么不使用一个计时器，它会定期从您的微控制器读取时间并更新您在 UI 中的控制？

# c++ - 实时检测图像是否不同

> ID：11793118
> 
> 赞同：3
> 
> 时间：2012-08-03T09:37:31.233
> 
> 标签：c++, c, image-processing

我正在研究一种显微镜，它通过内置摄像机将实时图像流式传输到 PC，在那里可以对流式传输的图像进行进一步的图像处理。对流图像进行的任何处理都必须“实时”完成（丢帧最少）。

我们取一系列静态图像的平均值来对抗来自相机的随机噪声，以改善我们的一些图像处理程序的输出。我的问题是：我怎么知道图像是否不再是静态的——被检查的样本已经移动或旋转/相机放大或缩小——所以我可以重置用于平均的图像系列？

我浏览了一些线程，以及一些看起来很有趣的想法： 注意：使用 Windows、C++ 和英特尔 IPP。使用 IPP，图像是一个字节数组 (Ipp8u)。1\. 散列图像，并比较散列（普通散列或感知散列？） 2\. 使用归一化互相关（IPP 有很多变体 - 使用哪个？）

你们觉得哪个适合我的情况（速度）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:20:20.583

如果你的相机没有抖动，你可以像 inVader 所说的那样，减去图像。然后，差异图像的所有像素的绝对值之和有时足以判断图像是相同还是不同。但是，如果您的噪音、照明水平等...变化，这将无法为您提供足够好的 S/N 比。在嘈杂的条件下，普通的哈希值甚至更没用。

最好的办法是确定对象的某些特征发生了变化，比如它的边界（如果它是规则的）或它的质心（如果它是不规则的）。如果您有边界位置，则只需分析垂直于该边界的一行像素，即可判断该边界已移动。质心位置可能会经常出现假阴性反应，但增加总质量和/或转动惯量可能会有所帮助。

如果相机抖动，您可能必须在比较之前对齐图像（取决于比较方法和所需的精度，单个像素未对齐可能很大），这就是互相关帮助的地方。

此外，您不必分析每个图像。您可以跳过一个，如果下一个不同，则丢弃它们。在这里，您有两倍的时间来分析图像。如果您正在平均图像，您可能只需定义所需的最佳图像数量，并仅比较序列中的第一张和最后一张图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:41:38.120

因此，最简单的尝试是拍摄后续图像，将它们彼此相减并查看差异。然后定义一些规则，包括两个图像被认为相等的差异的局部和全局阈值。位图/数组数据的简单减法，寻找最大值并计算整个事物的平均差异应该是实时完成的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:17:52.890

首先，我会以较慢的 fps 速率拍摄一系列图像，然后对这些图像进行下采样以使它们更小，不会太多但足以加快处理速度。

现在你有几个选择：

您可以通过减去它们来对两个图像的绝对差求和，并使用阈值来评估图像是否发生了变化。

如果您想进一步加快速度，我建议使用小内核进行渐进式 SAD，并从图像顶部移动到底部。您可以在此过程中重视差异的综合数量，并最终在您满意时停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:31:01.233

如果有不同的光照条件或以可预测的方式移动的东西（如门的打开和关闭），那么功能更强大但速度较慢的东西（如用于背景建模的高斯混合模型）可能值得研究，[请单击此处](http://www.ai.mit.edu/projects/vsam/Publications/stauffer_cvpr98_track.pdf)。它是计算密集型的，但可以很容易地并行化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T05:37:33.657

使用的是运动检测算法。

[http://www.codeproject.com/Articles/10248/Motion-Detection-Algorithms](http://www.codeproject.com/Articles/10248/Motion-Detection-Algorithms)

[http://www.codeproject.com/Articles/22243/Real-Time-Object-Tracker-in-C](http://www.codeproject.com/Articles/22243/Real-Time-Object-Tracker-in-C)

# c# - 使困惑。CA1063错了？GC.SuppressFinalize(这个)

> ID：11793119
> 
> 赞同：7
> 
> 时间：2012-08-03T09:37:32.447
> 
> 标签：c#, .net, garbage-collection

我有一个简单的 MyDataClass 类，其中包含一个实现 IDisposable 的成员（obj）：

```
public class MyDataClass : IDisposable
{
    private DisposableObject obj;
    private List<string> list;
    private int c;

    public MyDataClass()
    {
        obj = new DisposableObject();
        list = new List<string>();
        c = 114;
    }

    public void Dispose()
    {
        obj.Dispose();
    }
}

public class DisposableObject : IDisposable
{
    public void Dispose()
    {
        // Free resource
        Console.WriteLine("Dispose DisposableObject");
    }
} 
```

当我运行代码分析时，我收到 CA1063 警告，表明我应该在**MyDataClass**实现的**Dispose()**方法中调用**GC.SuppressFinalize()方法。**

 ****我对这个 CA1063 警告感到非常困惑。因为据我所知，我应该调用**GC.SuppressFinalize()**来指示垃圾收集器：

*“嘿 GC，你别管这个对象了，我已经为你做完了所有的清理工作！”*

所以请确认我是否错了。如果我将添加**GC.SuppressFinalize()**我将摆脱 CA1063 但它会导致 GC 不会清理我的对象。所以我会有内存泄漏，因为其他类成员（托管代码）不会被清理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:48:25.530

该方法`GC.SuppressFinalize()`向 VM 指示不要运行*终结*器。这是 C# 中看起来很有趣的方法：

`~MyDataClass()`

要删除警告，您需要密封您的课程，或实施完整的[IDisposable 模式](http://msdn.microsoft.com/en-us/library/ms244737.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T14:24:33.860

尽管已经接受了答案，但我感觉您仍然感到困惑。让我解释：

垃圾收集器 (GC) 的任务是从内存中删除无法访问的任何对象。

## 可达性

`A`仅当从任何 GC*根*到该对象的任何引用链都存在时，该对象才可访问。根的示例是堆栈和任何静态字段。因此，要确定是否`A`可达，GC 所要做的就是在堆栈上找到一个引用，该引用指向一个对象，该对象的引用指向一个对象……指向 object `A`。如果找不到这样的链，`A`则无法访问对象。¹

因此，一旦 GC 确定`A`无法访问它，它就会希望将其从内存中删除。但是，在此之前，GC 会检查是否有一个必须运行`A`的终结器 ( )。`~A`如果没有，它会从内存中删除`A`，GC 会用它完成。

## 定稿

但是，如果`A`有一个必须运行的终结器，它不能在终结器完成之前从内存中删除对象。因此，它添加了对`A`终结器*队列*的引用，并且还没有从内存中删除对象。现在垃圾收集器已经完成了`A`。但是，当 GC 再次运行时，它会再次尝试确定是否`A`可达。幸运的是，终结器队列也是垃圾收集器的根之一，因此它确定终结器队列中有对 的引用`A`，因此`A`是可访问的，并且不会再次从内存中删除。

随之而来的是*终结器线程*，这是一个定期检查终结器队列中是否有任何对象的线程。如果有，它会选择一个并运行它的终结器方法。最终，终结器线程将运行`A`. 完成此操作后，`A`将从终结器队列中删除对的引用。

## 清理

然后，一段时间后，垃圾收集器再次运行，并再次尝试确定是否`A`可达。由于它现在没有在任何地方引用，甚至从终结器队列中`A`也没有，因此无法访问。GC`A`从内存中删除。

* * *

你看，通常 GC 可以在它检测到的同一个收集周期中删除无法访问的对象，但是当一个对象有一个需要运行的终结器时，它可能需要多个周期才能收集到对象。因此，CA1063 建议您放入`GC.SuppressFinalize()`方法`Dispose`，让 GC 知道对象在从内存中删除之前不需要完成。因此，该对象最终总是从内存中删除^(2 。)

请注意，当您没有终结器时，您不必添加`GC.SuppressFinalize()`，因此在这方面 CA1063 警告有点多余。

[可以在这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)中找到有关垃圾收集器的更深入的信息。

* * *

**¹）**可达性是为什么`null`在处理它们之后设置引用很常见的原因。这使得引用的对象很可能无法访问，因此成为要删除的候选对象。

**² )**有可能（但当然*不*推荐）通过使用终结器添加对另一个可访问对象或根（例如静态字段）*的引用来复活。* 这使得再次可达，垃圾收集器不会删除它。但是，它的终结器不会再次运行，因为它已经被调用过一次。`A``A``A`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T09:41:35.500

> 如果我要添加，`GC.SuppressFinalize()`我将摆脱 CA1063，但这会导致 GC 不会清理我的对象。

不，您的物品仍将被收集。

> *“嘿 GC，你别管这个对象了，我已经为你做完了所有的清理工作！”*

你实际上只是说：不要担心这个对象的终结器（析构函数）。如果有的话。

这就是代码分析出错的地方：你的类确实有一个`IDisposable.Dispose()`方法，但它没有析构函数。所以警告是没有意义的，过度保护并触发错误的原因。禁用或忽略它。****

# php - gii 不能在 yii 中工作

> ID：11793121
> 
> 赞同：9
> 
> 时间：2012-08-03T09:37:41.243
> 
> 标签：php, yii, gii

我是 yii 框架的新手。在我的网站 gii 显示错误

错误 403 您无权访问此页面。

我像这样在配置文件中设置gii

```
'gii'=>array(
    'class'=>'system.gii.GiiModule',
    'password'=>'test123',
    'ipFilters'=>array('192.168.0.101','127.0.0.1','::1'),
), 
```

仍然显示错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T16:26:02.800

这是唯一对我有用的行：

```
'ipFilters'=>array($_SERVER['REMOTE_ADDR']), 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T09:43:47.753

要解决此问题，请在主配置文件中查找 Gii 的模块部分，然后添加

包含您自己的 IP 的 ipFilters 数组：

// 受保护的/config/main.php

返回数组（

```
...

'modules' => array(

    'gii' => array(

        'class'     => 'system.gii.GiiModule',

        'password'  => 'Enter Your Password Here',

        'ipFilters' => array('127.0.0.1', '192.168.1.7'),   // EDIT TO TASTE

    ),

    ... 
```

ipFilters 属性可以包含任意数量的项目，它们可以是直的

IP 地址或通配符，例如“192.168.1.*”。

如果底层平台支持，也支持 IPv6 地址，并且 "::1"

表示本地主机（在某些配置中可能需要）。

小心不要将 Gii 开放给过于广泛的受众，以免它成为安全风险。

注意：Yii 1.1.6 将默认过滤器直接添加到股票配置文件中：

// 如果移除，Gii 默认只使用 localhost。仔细编辑以品尝。

```
'ipFilters'=>array('127.0.0.1','::1'), 
```

希望解决你的问题..

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T22:37:18.857

你可以设置...

```
'ipFilters' => false 
```

来自文档[http://www.yiiframework.com/doc/api/1.1/GiiModule#ipFilters-detail](http://www.yiiframework.com/doc/api/1.1/GiiModule#ipFilters-detail) ...

> 如果您想允许所有 IP 访问 gii，您可以将此属性设置为 false（请勿这样做，除非您知道后果！！！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T22:03:27.967

继sandy8086的好答案之后。如果您的远程主机是双堆栈（IPv6/IPv4），那么您可能会在您的子网前缀范围内自动分配一个动态 IPv6 地址。IPv4 使用通配符“*”的方法也可以用于 IPv6 地址，因此：“ab01:1234:5678:abcd:*”，如果您有 /64 前缀，这将匹配您 IPv6 网络上的任何地址. 这对我有用，当我遇到“错误 403”问题时，当我使用 Yii::app()->request->userHostAddress 发现我通过 IPv6 连接时，一分钱都掉了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T05:24:07.010

[为什么我在尝试使用 Gii 时会收到 403 错误？](http://www.yiiframework.com/wiki/115/why-do-i-get-a-403-error-when-trying-to-use-gii/)

如果上面的链接没有任何帮助，请尝试查看运行时文件夹中的 appplication.log 文件，看看出了什么问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T07:01:51.270

我遇到了同样的错误。我用`Yii::app()->request->userHostAddress`;检查了我的 IP 事实证明，这正在返回一个类似于 this 的 IPv6 地址`ab01::1`。这可能是行为，尤其是在您使用 Safari 时（在 OS X 上……OS X 上的 Chrome 显示正常的 127.0.0.1 IP。这两个 WebKit 浏览器的奇怪行为）。

因此，只需放入`Yii::app()->request->userHostAddress`您的一个视图，然后从输出中复制结果，并将其粘贴到 config/main.php 中：

```
 'gii'=>array(
        ...
        // If removed, Gii defaults to localhost only. Edit carefully to taste.
        'ipFilters'=>array('127.0.0.1','192.168.1.*','ab01::1','::1'),
    ), 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-03T18:41:31.837

考虑您的开发服务器所在的位置（相同的机器、LAN、WAN）以及您的 IP 地址如何更改为服务器。

1.  如果您的服务器与您的客户端（浏览器）在同一台机器上运行，则您从 localhost 本身请求页面，因此您的 IP 地址是 127.0.0.1 并且默认设置有效。

2.  如果您的服务器在另一台机器上，但在您的局域网 (LAN) 中，则您的 IP 地址通常类似于服务器的 192.168.1.20。你可以找到它并调整代码。

3.  如果您的服务器是跨网络 (WAN)，那么您要么有一个

    *   静态 IP 地址（如果幸运的话）
    *   或固定范围内的动态 IP 地址，
    *   或者更糟的是，一个或多或少不可预测的动态 IP 地址。

只有在最后一个（不可预测的动态 IP 地址）的情况下，我才会遵循[schmunk的](https://stackoverflow.com/users/291573/schmunk)[这个答案](https://stackoverflow.com/a/14718320/1149880)，他也指出了风险。

`$_SERVER['REMOTE_ADDR']`对我来说似乎没有必要使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-27T13:21:37.707

确保配置文件底部没有预生成的配置。这些将覆盖您在上面添加的任何内容：

```
if (YII_ENV_DEV) {
    // configuration adjustments for 'dev' environment
    $config['bootstrap'][] = 'debug';
    $config['modules']['debug'] = 'yii\debug\Module';

    $config['bootstrap'][] = 'gii';
    $config['modules']['gii'] = 'yii\gii\Module';
} 
```

应该变成（例如，允许任何人）：

```
if (YII_ENV_DEV) {
    // configuration adjustments for 'dev' environment
    $secure = ['allowedIPs' => ['*']];

    $config['bootstrap'][] = 'debug';
    $config['modules']['debug'] = ['class' => 'yii\debug\Module'] + $secure;

    $config['bootstrap'][] = 'gii';
    $config['modules']['gii'] = ['class' => 'yii\gii\Module'] + $secure;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-22T10:13:38.223

尝试这个

```
 'gii' => array(
        'class' => 'system.gii.GiiModule',
        'password' => 'pasword',
        'ipFilters'=> false,
        'generatorPaths' => array(
            'bootstrap.gii'
        ),
    ), 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-12T01:19:26.070

我有一个非常相似的问题。对我来说，我的用户帐户没有对我的 PHP session_save_path 文件夹的写入权限。当我在 Windows 7 中浏览它时，它告诉我我需要权限，如果我选择 OK，它就会授予它。我做到了。一切都解决了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-14T07:12:15.497

```
if (YII_ENV_DEV) {

    $config['bootstrap'][] = 'debug';
    $config['modules']['debug'] = [
        'class' => 'yii\debug\Module',
    ];

    $config['bootstrap'][] = 'gii';
    $config['modules']['gii'] = [
        'class' => 'yii\gii\Module',
    ];
} 
```

使用此默认代码替换它后，

并使用此网址。

[http://localhost/basic/web/index.php?r=gii](http://localhost/basic/web/index.php?r=gii)

# iphone - 无法抵消 ccnode 让我以主角为中心

> ID：11793124
> 
> 赞同：0
> 
> 时间：2012-08-03T09:38:00.860
> 
> 标签：iphone, cocos2d-iphone

我有一个标准的 cocos2d 启动层（HelloWorldLayer）。我为我的地形创建了另一类名为“Terrain”的 CCNode 类型。然后我在层的初始化中将它添加到我的层中：

```
terrain = [[Terrain alloc] initWithWorld:world AndLevel:0];
[self addChild:terrain z:1]; 
```

我添加了一个“CarObject”类（CCSprite 类），并将汽车对象添加到我的地形

```
 car = [[CarObject alloc] initWithWorld:world];
[terrain addChild:car]; 
```

- 即在地形和汽车的 initWithWorld 中，我初始化了一些 Box2d 代码

然后，当我移动它时，我尝试将我的汽车对象居中到我的屏幕上，我在我的更新方法中这样做：

```
 float offsetX = car.position.x;
   float offsetY = car.position.y;
    [terrain setOffsetX:(int)offsetX andOffsetY:(int)offsetY]; 
```

其中 setOffsetX.. 方法是：

```
- (void) setOffsetX:(int)newOffsetX andOffsetY:(int)newOffsetY {

    _offsetX = newOffsetX;
    _offsetY = newOffsetY;

    CGSize winSize = [CCDirector sharedDirector].winSize;

    self.position = CGPointMake(-(_offsetX - winSize.width/2), -(_offsetY - winSize.height/2));

} 
```

当我使用 NSLog 查看地形位置是否发生变化时，我可以看到位置实际上发生变化，但视图没有变化。我究竟做错了什么？我确定这是一个愚蠢的错误！

顺便说一句，如果我在 HelloWorldLayer 的更新方法中尝试这个（而不是 [terrain setOffsetX..]）

```
self.position = CGPointMake(self.position.x-1, self.position.y); 
```

地形在移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:53:58.137

汽车是地形的孩子。因此，汽车的位置相对于地形的位置。由于您将 Terrain 的位置基于 Car 的位置，而 Car 的位置实际上是相对于 Terrain 的位置，您可能会遇到这样的效果，即您的位置更新只是相互抵消了。

如果您想在保持 Car 居中的同时移动 Terrain，则不应将 Car 添加为 Terrain 的子项。而是将其添加到与地形 (HelloWorldLayer) 相同的节点。然后，您可以相互独立地移动 Car 和 Terrain。

# iphone - 如何从一个视图导航到 UISplitViewController？

> ID：11793128
> 
> 赞同：0
> 
> 时间：2012-08-03T09:38:09.853
> 
> 标签：iphone, ios5, uinavigationcontroller, xcode4.2, uisplitviewcontroller

我在我的应用程序中使用 UISplitViewController 但整个应用程序没有使用 UISplitViewController 只有一个视图使用它所以我如何从一个视图导航到 UISplitViewController 并且它是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:41:29.280

您可以从[这里参考，这里](https://stackoverflow.com/questions/9467750/ios5an-example-of-split-view-controller)[也](http://www.edumobile.org/iphone/ipad-development/splitview-application-in-ipad/)有一个很好的例子。

# modelica - Modelica.Media：使用跟踪组件

> ID：11793132
> 
> 赞同：1
> 
> 时间：2012-08-03T09:38:24.660
> 
> 标签：modelica

我正在尝试了解跟踪组件以及如何在 Modelica.Media 和 Modelica.Fluid 的上下文中使用它们。我目前正在研究一种多组分介质，其中一些组分以微量存在，即对于流体的整体特性并不重要。另一方面，这些成分会发生（化学）反应，因此必须以合理的方式将它们包含在质量平衡中，以解释这种行为。

我想将它们建模为跟踪组件，但我无法完全弄清楚如何在上述上下文中实现这些组件。更具体地说，我无法弄清楚如何使痕量组分的质量（分数）因模型内部反应或模型内部传质而变化。在我看来，微量成分的质量分数在给定介质中应该是恒定的——对吗？

目前，我的媒体的所有组件（包括微量组件）都作为“正常”组件包含在内，因为我无法使跟踪组件按照我需要的方式运行。无论如何，当我使介质或多或少形成划痕时，我认为在给出计算流体特性的方程时，我可以忽略少量存在的成分。有没有人有任何以这种方式对微量媒体组件建模的经验？

如果有人能详细说明普通组件和跟踪组件之间的区别，和/或就跟踪组件是否是对上述系统进行建模的最佳方式提供一些建议，我将非常感激。任何帮助或意见将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:41:47.007

对不起，我在度假，这个从我身边溜走了。尽管我没有太积极地参与最近的流体设计活动，但我认为您对“跟踪组件”维度的理解是正确的。

我假设流体库假设跟踪组件在所有标准库组件中都是惰性的，所以我不希望看到跟踪组件发生变化。但我不明白为什么不能创建包含反应的组件。这将取决于您的反应是“在一个体积中”发生（您需要考虑混合、传输延迟等），还是它们是否只是在流动中“即时”发生。但无论哪种方式，都应该可以制定出跟踪组件的流入和流出不相同的组件（这听起来像您关心的问题）。

您是否有任何示例代码可以展示您所面临的问题或您对跟踪组件界面的设计有疑问？

再次抱歉，回复晚了。

# sql-server - 我应该调试 SQL Server 存储过程，但无法理解“@xx=count()”的使用？

> ID：11793138
> 
> 赞同：0
> 
> 时间：2012-08-03T09:39:07.613
> 
> 标签：sql-server, stored-procedures, count

```
Declare @Count tinyint
Declare @Count2 tinyint

SELECT @Count2 = Count(*) FROM  table where artno = @new 

If @Count2 != 0
BEGIN
    delete from table where artno = @new
END 
```

我不知道 SQL Server 存储过程中的这些代码行到底在做什么。

我已经研究了之后的定义和使用，`count()`也无法弄清楚。尤其是代码 中的 'count(*)'`=`让我很困惑。`*`

我是初学者，所以如果它是非常基本的问题，我想道歉，但我明白了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:41:55.680

```
SELECT @Count2 = Count(*) FROM  table where artno = @new 
```

获取`artno`等于变量中内容的记录`@new`数，并将该数字存储在`@Count2`变量中。

```
If @Count2 != 0
BEGIN
    delete from table where artno = @new
END 
```

`artno`删除与您的变量中的内容相等的所有记录`@new`，如果`@count2`不是`0`

顺便说一句，该`@Count`变量未在该代码中使用并且已过时。

# sql-server - Sql server：跟踪视图中的计数？

> ID：11793141
> 
> 赞同：0
> 
> 时间：2012-08-03T09:39:11.003
> 
> 标签：sql-server, optimization

使用 Sql Server 2008，是否适合使用视图来跟踪表计数。例如

```
CREATE VIEW [dbo].UserCounts    
    SELECT     O.UserId, Count(O.OrderId) AS OrderCount
    FROM       User U INNER JOIN Orders O ON U.UserId = O.UserId
    GROUP BY O.UserId 
```

这是一个拥有 100.000 个用户和大约 100.000 个用户的可行解决方案吗？500.000 个订单？

提前致谢， 安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:52:28.600

您可以创建索引视图，但必须[`COUNT_BIG`](http://msdn.microsoft.com/en-us/library/ms190317.aspx)改用：

```
CREATE VIEW dbo.UserCounts    
WITH SCHEMABINDING
AS
    SELECT     O.UserId, 
      COUNT_BIG(O.OrderId) AS OrderCount
    FROM       dbo.User U 
    INNER JOIN dbo.Orders O ON U.UserId = O.UserId
    GROUP BY O.UserId;
go

CREATE UNIQUE CLUSTERED INDEX cdxUserCounts on dbo.UserCounts(UserId);
go 
```

这样引擎将保持计数最新，而不是每次查询视图时计数。缺点是争用，您不能从不同的交易中为同一用户创建/删除订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:54:59.317

每次访问此视图时，此视图都会执行内联查询。因此，我认为仅在视图上创建索引无济于事。主要是在底层 2 个表用户和订单上有适当的索引。

# .net - 从 CSV 文件导入，如何跳过前 X 行

> ID：11793149
> 
> 赞同：0
> 
> 时间：2012-08-03T09:39:28.200
> 
> 标签：.net, sql, vb.net, csv, jet

我正在编写一个应用程序来处理`csv`文件并将其上传到远程服务器。应用程序需要相当灵活，允许列的自定义映射。

我遇到的第一个大障碍是读取文件，许多文件的数据从第 5 行开始，顶部有一些垃圾数据，示例如下：

```
Account: 123
----------
Date: 15/12/2011
----------
Type: Full
----------
Column1,Column2,Column3,Column4
Data1,Data2,Data3,Data4
Data1,Data2,Data3,Data4 
```

理想情况下，我想要一种方法来获取第一行数据，但这可能会很棘手。

我正在使用带有连接字符串的 Jet 连接到文件：

```
If (_extension = ".csv") Then

                _excelconn.ConnectionString = String.Format( _
                    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0}" & _
                    "; Extended Properties=""text;HDR=No;FMT=Delimited""", _directory)

End If 
```

然后通过代码获取数据：

```
If ValidateAll() Then
            Try

                ConnectExcel() ' Opens connection to csv/excel file

                _excelcommand.CommandText = "SELECT * FROM [" & _excelsheets(_selsheet) & "]" ' Currently selected sheet, returns SELECT * FROM [1234#csv]
                _excelcommand.Connection = _excelconn

                _reader = _excelcommand.ExecuteReader()

                While _reader.Read()

                    'MsgBox(_reader(0).ToString)
                    'Dostuff

                End While

            Catch ex As Exception
                _errors.Add(ex.ToString)
                retval = -1
            End Try

        End If 
```

这是一个例外，因为我无法访问`reader(2)`第一行。

连接字符串或语句中是否有任何方法`SELECT`告诉 Jet 跳过工作表的前 X 行？如果没有，有没有办法只处理`reader.Read()`行号是否高于 X？

我知道将整个文件读取到数组并从那里解析或将文件内容复制到新的 csv 文件可能是可能的，但如果有办法避免这种情况并通过 jet/ado 完成，那么我更喜欢那！

（标记`sql`为可能`sql`在 ado 查询中有解决方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:03:42.383

经过大量的实验和搜索找到了答案，移到了一个表适配器，代码如下：

```
Private _filepath As String
Private _directory As String
Private _filename As String
Private _extension As String
Private _selsheet As Integer
Private _skiprows As Integer
Private _data As New DataTable

Private _excelconn As New OleDbConnection
//Private _reader As OleDbDataReader
Private _excelcommand As New OleDbCommand
Private _excelta As New OleDbDataAdapter

_excelcommand.CommandText = "SELECT * FROM [" & _excelsheets(_selsheet) & "]"
_excelcommand.Connection = _excelconn

_excelta.SelectCommand = _excelcommand
_data = New DataTable
_excelta.Fill(_skiprows, Int32.MaxValue, _data)

For i = 0 To _data.Columns.Count - 1
    If _data.Rows(0).Item(i).ToString <> "" And IsNothing(_data.Columns(_data.Rows(0).Item(i).ToString)) Then
          _data.Columns.Item(i).ColumnName = _data.Rows(0).Item(i).ToString
    End If
Next

_data.Rows.RemoveAt(0) //removes first data row containing labels 
```

# sql - 比较两个sql server表

> ID：11793152
> 
> 赞同：1
> 
> 时间：2012-08-03T09:39:36.260
> 
> 标签：sql, sql-server

谁能建议我如何比较 sql server 中的两个数据库表并返回第二个表中不在第一个表中的行。两个表中的主键不相同。例如，表格如下。

表格1

```
ID             Name               DoB
1              John Doe           20/03/2012
2              Joe Bloggs         31/12/2011 
```

表2

```
ID             Name                DoB
11             John Doe            20/03/2012
21             Joe Bloggs          31/12/2011
31             James Anderson      14/04/2010 
```

sql 查询应仅比较两个表中的 Name 和 DoB 并返回 31 James Anderson 14/04/2010

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:43:02.687

很简单，使用 LEFT OUTER JOIN 从 Table2 中返回所有内容，即使 Table1 中没有匹配项，然后将其限制为只有*没有*匹配项的行：

```
SELECT Table2.ID, Table2.Name, Table2.DoB
FROM Table2
LEFT OUTER JOIN Table1 ON Table2.Name = Table1.Name AND Table2.DoB = Table1.DoB
WHERE Table1.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:42:54.147

在sql server中使用CHECKSUM()函数

```
select T1.* from Table1 T1 join Table2 T2
on CHECKSUM(T1.Name,T1.DOB)!= CHECKSUM(T2.Name,T2.DOB) 
```

[细节](http://www.mssqltips.com/sqlservertip/1023/checksum-functions-in-sql-server-2005/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:43:01.903

查看 SQL [EXCEPT的使用](http://msdn.microsoft.com/en-us/library/ms188055.aspx)

```
SELECT Name, DOB
FROM Table1
EXCEPT
SELECT Name, DOB
FROM Table2 
```

[http://msdn.microsoft.com/en-us/library/ms188055.aspx](http://msdn.microsoft.com/en-us/library/ms188055.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:45:35.397

你想要一个左外连接。[http://en.wikipedia.org/wiki/Join_(SQL)#Left_outer_join](http://en.wikipedia.org/wiki/Join_(SQL)#Left_outer_join)

这种类型的 JOIN 将返回“左”表（本例中 FROM 子句中的表）的所有记录，即使连接表中没有匹配的记录。

```
SELECT Table2.ID, Table2.Name, Table2.DoB
FROM Table2
LEFT OUTER JOIN Table1 ON Table1.Name = Table2.Name AND Table1.DoB = Table2.DoB
WHERE Table1.ID IS NULL 
```

请注意，您可以将 LEFT OUTER JOIN 替换为 LEFT JOIN。这是大多数 DBMS 使用的捷径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-28T21:27:13.257

此 SQL 语句无需指定列名即可比较两个表。

```
SELECT 'Table1' AS Tbl, binary_checksum(*) AS chksum, * FROM Table1
WHERE binary_checksum(*) NOT IN (SELECT binary_checksum(*) FROM Table2)
UNION
SELECT 'Table2' AS Tbl, binary_checksum(*) AS chksum, * FROM Table2
WHERE binary_checksum(*) NOT IN (SELECT binary_checksum(*) FROM Table1)
ORDER BY <optional_column_names>, Tbl 
```

输出将显示任何不同的行以及 Table1 中的行，但不显示 Table2 中的行，反之亦然。

# java - 如何在 Hibernate HQL 中使用 Oracle 的 regexp_like？

> ID：11793159
> 
> 赞同：10
> 
> 时间：2012-08-03T09:40:20.563
> 
> 标签：java, sql, oracle, hibernate, hql

我正在使用`oracle 10g`和`hibernate 3.3.2`。我之前在sql中使用过正则表达式，现在我第一次在HQL中使用它。

```
Query query = getSession().createQuery("From Company company 
where company.id!=:companyId and 
regexp_like(upper(rtrim(ltrim(company.num))), '^0*514619915$' )"); 
```

这是我的 hql，当我在没有`regex_like`功能的情况下运行它时，它会按预期运行。但我无法用`regex_like`表达式执行它。

它说..

> 嵌套异常是 org.hibernate.hql.ast.QuerySyntaxException：意外的 AST 节点：（靠近第 1 行，第 66 列.....

请帮助，我如何`regex_like`在休眠本机查询中使用？或其他一些替代方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T14:57:54.583

实际上，除了 PL/SQL 中的条件语句之外，您无法将 REGEXP_LIKE 的结果与任何内容进行比较。

Hibernate 似乎不接受没有 returnType 的自定义函数，因为您总是需要将输出与某些东西进行比较，即：

```
REGEXP_LIKE('bananas', 'a', 'i') = 1 
```

由于 Oracle 不允许您将此函数的结果与任何内容进行比较，我想出了一个使用案例条件的解决方案：

```
public class Oracle10gExtendedDialect extends Oracle10gDialect {

    public Oracle10gExtendedDialect() {
        super();
        registerFunction(
          "regexp_like", new SQLFunctionTemplate(StandardBasicTypes.BOOLEAN,
          "(case when (regexp_like(?1, ?2, ?3)) then 1 else 0 end)")
        );
    }

} 
```

您的 HQL 应该如下所示：

```
REGEXP_LIKE('bananas', 'a', 'i') = 1 
```

它会工作:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T22:34:01.393

您绝对可以通过 Hibernate HQL（和 JPQL，只要 Hibernate 是提供者）使用您希望使用的任何类型的数据库特定功能。你只需要告诉 Hibernate 这些函数。在 3.3 中，唯一的选择是提供自定义方言并从方言的构造函数中注册函数。如果你看一下基本的 Dialect 类，你会看到很多注册函数的例子。通常最好扩展您当前使用的确切方言并简单地提供您的扩展（这里，注册函数）。

一个有趣的说明是 Oracle 没有将 regexp_like 归类为函数。他们将其归类为条件/谓词。我认为这主要是因为 Oracle SQL 没有定义 BOOLEAN 数据类型，即使他们的 PL/SQL 定义了，我敢打赌 regexp_like 被定义为返回 BOOLEAN 的 PL/SQL 函数......

假设您当前使用 Oracle10gDialect，您将执行以下操作：

```
public class MyOracle10gDialect extends Oracle10gDialect {
    public Oracle10gDialect() {
        super();

        registerFunction( 
            "regexp_like", 
             new StandardSQLFunction( "regexp_like", StandardBasicTypes.BOOLEAN )
        );
    }
} 
```

我不记得 HQL 解析器是否喜欢返回布尔值的函数，但是就其本身作为谓词而言。您可能不得不将 true/false 转换为其他内容并检查该返回：

```
public class MyOracle10gDialect extends Oracle10gDialect {
    public Oracle10gDialect() {
        super();

        registerFunction( 
            "regexp_like", 
             new StandardSQLFunction( "regexp_like", StandardBasicTypes.INTEGER ) {
                 @Override
                 public String render(
                         Type firstArgumentType, 
                         List arguments, 
                         SessionFactoryImplementor factory) {
                     return "some_conversion_from_boolean_to_int(" + 
                             super.render( firstArgumentType, arguments, factory ) +
                             ")";
                 }
             }
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:55:21.827

您不能访问特定的数据库函数，除非 JPAQL/HQL 提供了这样做的方法，并且也不为正则表达式提供任何东西。因此，您需要编写一个原生 SQL 查询来使用正则表达式。

另一方面，非常重要的一点是，一些同事（Oracle DBA）告诉我永远不要在 oracle 中使用正则表达式，因为它们无法被索引，最终会在数据库中执行完整的数据库扫描。如果表有几个条目，那没关系，但如果它有很多行，它可能会削弱性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:27:27.517

您可以尝试使用标准的 LIKE 运算符：

```
where company.num like '%514619915' 
```

然后使用 Java 正则表达式过滤掉不需要的。这应该会减少将返回的不需要的行数。

这不会使用索引，因为它以“%”开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-11T19:51:28.340

对于那些使用带有 sqlRestriction 的 Hibernate 标准（Hibernate 版本 4.2.7）

```
 Criterion someCriterion = Restrictions.sqlRestriction("regexp_like (column_name, ?, 'i')", "(^|\\s)"+searchValue+"($|\\s|.$)", StringType.INSTANCE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-25T12:12:47.850

或者另一种选择是在 oracle 中创建类似的函数，该函数将根据运算结果返回数值。类似的东西

```
CREATE OR REPLACE FUNCTION MY_REGEXP_LIKE(text VARCHAR2, pattern VARCHAR2)
RETURN NUMBER 
IS function_result NUMBER;
BEGIN
  function_result := CASE WHEN REGEXP_LIKE(text, pattern) 
  THEN 1 
  ELSE 0
  END;    
  RETURN(function_result);
END MY_REGEXP_LIKE; 
```

你将能够使用

```
MY_REGEXP_LIKE('bananas', 'a') = 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-30T09:25:02.807

您可以使用规范。

```
 Specification<YourEntity> specification = (root, query, builder) -> builder.equal(builder.selectCase()
            .when(builder.function("regexp_like", Boolean.class, root.get("your_field"), builder.literal("^0*514619915$")), 1)
            .otherwise(0), 1);
    List<YourEntity> yourEntities = yourEntityRepository.findAll(specification); 
```

# jquery - 全屏部分的 History.js

> ID：11793160
> 
> 赞同：2
> 
> 时间：2012-08-03T09:40:23.277
> 
> 标签：jquery, browser-history, pushstate, history.js, popstate

* * *

我一直在做我的[一个项目](http://bramvanroy.be/fullScreenSection/)——完整的（重要的）JavaScript 可以在[这里](http://bramvanroy.be/fullScreenSection/js/sections.js)找到。我希望包含[history.js](https://github.com/balupton/history.js)，以便用户也可以使用浏览器的上一个和下一个按钮进行导航。此外，我希望生成的 URL 可以访问，即使它们不*存在*。这些 URL 由历史 API 生成，因此未链接到 HTML 文档。

## 我已经做了什么

通过查看插件的[API Exposed 部分](https://github.com/balupton/history.js/blob/master/README.md#exposed-api)并阅读[Mozilla 的文档](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)，我已经成功地完成了这项工作：

*   使用界面的下一个、上一个和基本链接导航时，URL 是正确的
*   使用界面的下一个、上一个和基本链接导航时，标题是正确的

（精简）代码是：

```
 document.title = $(".parentSection.base").data("title");

// Going forward
    var nextClick = $("a.next_link");

    nextClick.click(function(d) {       
        var nUrl = parentSection.next().data("url");
        History.pushState(null, null, nUrl) ;
        document.title = parentSection.next().data("title");

        d.preventDefault();
    });

// Going backwards
    var prevClick = $("a.prev_link");

    prevClick.click(function(e) {       
        var pUrl = parentSection.prev().data("url");
        History.pushState(null, null, pUrl) ;
        document.title = parentSection.prev().data("title");

        e.preventDefault();
    });

// Going to "Base" position
    var baseClick = $("a.base_link");

    baseClick.click(function(f) {           
        var bUrl = $(".parentSection.base").data("url");
        History.pushState(null, null, bUrl);
        document.title = $(".parentSection.base").data("title");

        f.preventDefault();
    }); 
```

这可以正常工作。

## 我似乎无法完成的事情

即使这工作得非常巧妙，如果没有最终功能，它也是无用的：

*   现在生成了 URL（例如`/lamp`，`/desk`等等），但是当用户直接转到这些链接之一（或只是重新加载页面）时，他或她将收到该 URL 不存在的消息
*   即使浏览器的导航按钮是可点击的（并且 url 会相应地改变），它根本不会改变内容。

任何人都可以对此提供任何反馈吗？我已经为此工作了很长时间，以至于我的背部受伤了。

* * *

我试图从 cjhveal 提供的代码中工作，并且到目前为止得到了这个（仅用于测试目的）：

```
History.Adapter.bind(window,'statechange',function(){
        var State = History.getState();
        History.log(State.data, State.title, State.url);
        $(".parentSection[data-url='" + State.title + "']").css({
            "left": "0",
            "top": "0"
        });
    }); 
```

奇怪的是，我无法让 History.js 记录到正确的标题......当我记录一个页面时，它返回如下：（`"lamp", "bramvanroy.be/fullScreenSection/lamp"`分别为`title`和`url`）而我需要获取该`data-title`部分对象中定义的标题。然而，我仍然调整了代码，以便 tit 应该`data-url`按照 section 中定义的方式工作，与返回的属性相同`title`，但仍然没有任何反应！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:32:50.440

查看 History.js 的[使用文档](https://github.com/balupton/History.js/#working-with-historyjs)。确保您绑定到状态更改事件，如下所示：

```
History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
    var State = History.getState(); // Note: We are using History.getState() instead of event.state
    History.log(State.data, State.title, State.url);
    // Handle new state.
}); 
```

作为替代方案，一些 javascript 应用程序使用哈希后的 url 部分，有时称为锚点：

`www.myapp.com/app/#/anchor/1`

更改此部分不需要任何重新加载。现代浏览器甚至使用 pushState 保存历史。这可以使用以下 javascript 来完成：`window.location.hash = '/anchor/1'`

编辑：确保 url 有效的一种方法是使用查询参数。查看[文档](https://github.com/balupton/History.js/#working-with-historyjs)，我们看到它们使用查询参数（例如`?state=1`）而不是完整的 url。尝试使用类似的东西，例如：`?page=lamp`.

此外，在您的点击处理程序中，尝试像示例中一样传递标题和数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:30:32.543

你的脚本应该有一些功能来显示“当前”的 url，比如：

```
var display_current=function() {
       //you may use History.getState() here, but i not sure what it will return, so i calculate url myself;
       var url=document.location.pathname.replace(/^.*\//,'');
       if (url == '') {url='home';}
       //Some code here to display current section based on URL
}; 
```

您还应该在加载页面后运行该功能：

```
$(function() {display_current();}); 
```

然后你应该处理浏览器历史按钮的事件来处理浏览器的后退/前进按钮使用：

```
History.Adapter.bind(window,'statechange',function() {
       display_current();
}); 
```

[这里的文档](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)

为了防止 404 错误，您必须将 .htaccess 文件添加到具有重定向规则的目录中：

```
RewriteEngine On
RewriteBase /
RewriteRule ^.+$  index.html 
```

[关于 mod_rewrite 的更多信息在这里](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# java - 如何在 java 中将视频文件压缩为 3gp 或 mp4？

> ID：11793163
> 
> 赞同：0
> 
> 时间：2012-08-03T09:40:44.697
> 
> 标签：java

我有一个视频文件，我需要使用 java 将其转换为 3gp、mp4。

有没有图书馆可以做到这一点或任何样本？

如果你们中的任何人已经完成或知道示例，请指导我执行上述操作或提供示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:14:43.253

如果您必须使用 Java，请检查 Java Media Framework。

[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:46:05.317

使用`ffmpeg`（[ffmpeg.org](http://ffmpeg.org/)）或`mconvert`（来自[MPlayer](http://www.mplayerhq.hu/design7/news.html)）或[VLC](http://wiki.videolan.org/Transcode)之类的工具。`ProcessBuilder`您可以使用或[Commons Exec](https://commons.apache.org/exec/)从 Java 调用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:53:39.163

你可能看过[pandastream](http://www.pandastream.com/)。但它是一个网络服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-26T07:50:21.437

在java中压缩视频你可以使用IVCompressor非常容易使用
更多细节去[https://techgnious.github.io/IVCompressor/](https://techgnious.github.io/IVCompressor/)

简单的代码

```
 <dependency>
        <groupId>io.github.techgnious</groupId>
        <artifactId>IVCompressor</artifactId>
        <version>1.0.1</version>
    </dependency>

public static void main(String[] args) throws VideoException, IOException {
    IVCompressor compressor = new IVCompressor();
    IVSize customRes = new IVSize();
    customRes.setWidth(400);
    customRes.setHeight(300);
    File file = new File("D:/Testing/20.mp4");
        compressor.reduceVideoSizeAndSaveToAPath(file,VideoFormats.MP4,ResizeResolution.R480P,"D:/Testing/Custome");
    } 
```

# php - 403禁止错误-执行和ajax页面

> ID：11793165
> 
> 赞同：0
> 
> 时间：2012-08-03T09:41:00.253
> 
> 标签：php, jquery, error-handling

我有一个网站，一切正常。但只有当我从 php 调用 ajax 页面页面时，我才会收到以下错误。

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access test.php
on this server.</p>
<p>Additionally, a 404 Not Found
error was encountered while trying to use an ErrorDocument to handle the request.</p>
<hr>
<address>Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 Server at salarypayroll.com Port 80</address>
</body></html> 
```

它以前工作正常，现在正面临这样的问题。会是什么问题.......？是否像服务器中的任何权限或安全问题......？

我的功能：

```
function myfunc(){
 var test = $("#test").val();  

    $.ajax({
        type: 'POST',
        url:   'test.php',
        data:{
            "test" : test,
             },
    success: function(data) 
             {
             /*--------My code-------*/

              }     

      });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:47:35.687

当 test.php 文件不存在或 test.php 文件的路径无效时会发生此错误。

检查 ajax 代码中的文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:22:27.123

更改 test.php 文件的权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:35:52.377

我有同样的问题。

这是由查询字符串中的特殊字符引起的。

在您的情况下，可能是 { 内部数据。

您应该检查 apache 重写规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T21:15:31.757

确保您的主机允许在表单帖子中使用 http URL。一些主机部署了一个 mod_sec 规则来阻止 http:// url 通过 post 传递。

# android - 在片段android中的CursorLoader中显示进度对话框

> ID：11793166
> 
> 赞同：6
> 
> 时间：2012-08-03T09:41:00.357
> 
> 标签：android, android-fragments, android-dialog, android-cursorloader

美好的一天，正如标题所说，任何人都知道如何在从片段中的 CursorLoader 加载数据时实现进度对话框。在这方面找不到任何例子。任何有关如何操作的链接或指南都将受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:00:18.433

我认为@Michal 的解决方案非常适合通过显示不确定的 ProgressDialog，`ProgressDialog#setIndeterminate(true)`因此我添加了 +1。我不确定向这样的片段添加片段（SomeFragment 添加 DialogFragment ..）是否被批准，因为在提出类似建议之前我已经对 SO 进行了裁剪。另外，在这里使用 ProgressDialog 是可以的，因为最终它是片段的一个组件，因此属于片段之下，而无需作为单独的片段实体存在。

要扩展此答案，如果您想提供实时进度更新，那么我建议在每个“工作单元”（您可以在该`CursorLoader`级别计算的最低工作分母）之后，您应该通过触发事件`LocalBroadcastManger`（保持在本地，没有其他人需要知道）你`Fragment`会听哪个。

在 Fragment 的嵌套`BroadcastReceiver#onReceive()`方法下接收事件时，可以获得对您的 Fragment 的引用，并以或类似的方式`ProgressDialog`增加显示的进度。`incrementProgressBy(diff)`

但是，如果您只想弹出一个“我正在做某事”对话框，那么设置 ProgressDialog 使用`setIndeterminate(true)`就足够了。

最后，您是否考虑过使用将不确定进度对话框添加到 ActionBar 的模式？这就是许多核心应用程序在底层`CursorLoader`工作时的运行方式。保持一致会很好。查看与 相关的项目`requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS)`。

干杯。

**更新**

要实现最后一种方法，您需要使用类似的代码设置您的父活动（拥有 ActionBar 的位）（我只是从内存中编写这个！）；

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Note that this is requested before you have called setContentView...
    getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.yourLayout); 
```

此时您已经说过，“我希望在我的 Activity ActionBar 中有那个旋转的进度”。现在，根据您的活动实施，您可以选择`onCreate`通过书写立即显示不确定的进度条；

```
 setProgressBarIndeterminateVisibility(true); 
```

但是如果一个额外的动作导致 CursorLoader 被启动，这可能太简单了。在整个练习中需要注意的重要一点是，ActionBar 中的进度对话框是拥有 Activity 的功能，而**不是**您的底层 Fragment。您不希望您的片段假设已请求 INDETERMINATE_PROGRESS 功能，因为（a）它可能没有，并且（b）理解这些事情不是特权。换句话说，如果您发现自己在写作，请`getActivity().setProgressBarIndeterminateVisibility(true)`停下来思考。

我认为您应该利用一种更加解耦的方法，其中底层 Fragments 说“我已经开始执行加载”，所以在您的`CursorLoader`回调中，`onCreateLoader`例如；

```
 @Override
       public Loader<Result> onCreateLoader(int id, Bundle b) {
        // Fire event saying this load is starting.
        final Intent loadStarted = new Intent();
        loadStarted.setAction(YourFragment.LOAD_STARTED);
        return new SomeCursorLoader(this.getActivity());
       } 
```

您的活动可以侦听此事件，然后当它接收到它时，将不确定的进度条可见性设置为 true。

类似地，当`CursorLoader`调用回调时，`onLoaderFinished`会触发另一个事件，例如；

```
 @Override
    public void onLoadFinished(Loader<Result> loader, Result data) {
     // Fire event saying this load is finished.
     final Intent loadFinished = new Intent();
     loadFinished.setAction(YourFragment.LOAD_FINISHED);
    } 
```

最后，您的活动可以将不确定的进度条可见性设置为 false`onReceivie`此事件，并将光标结果显示给用户......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:14:19.510

我认为您可以在 Fragment 中实现 LoaderCallback，您可以使用回调方法`onCreateLoader`，例如显示对话框和`onLoadFinished`关闭对话框。看下面的代码：

```
public class SomeFragment extends Fragment implements LoaderCallbacks<Result> {
     private DialogFragment dialog;

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         //you should implement yours DialogFragment
         dialog = new DialogFragment();
         //Start loader
         getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Result> onCreateLoader(int id, Bundle b) {
         //Show dialog 
         dialog.show(getFragmentManager(), "TAG");
         return new SomeCursorLoader(this.getActivity());
    }

    @Override
    public void onLoadFinished(Loader<Result> loader, Result data) {
        handler.sendEmptyMessage(0);            
    }

    @Override
    public void onLoaderReset(Loader<Result> arg0) {
    }

    private Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            dialog.dismiss();
        }
    };
} 
```

# android - 如何禁用其他连接的 .if wifi 可用

> ID：11793173
> 
> 赞同：1
> 
> 时间：2012-08-03T09:41:16.973
> 
> 标签：android, android-internet

是否有任何解决方案可以禁用所有连接（即移动）

如果`WIFI`有的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:48:52.300

尝试这个：

```
ConnectivityManager connManager = (ConnectivityManager)  
getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

if (mWifi.isConnected())
{
  turnData(false);
}
void turnData(boolean ON) throws Exception
{

if(bv == Build.VERSION_CODES.FROYO)
{

Log.i("version:", "Found Froyo");
try{ 
    Method dataConnSwitchmethod;
    Class telephonyManagerClass;
    Object ITelephonyStub;
    Class ITelephonyClass;
    TelephonyManager telephonyManager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);

    telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
getITelephonyMethod.setAccessible(true);
ITelephonyStub = getITelephonyMethod.invoke(telephonyManager);
ITelephonyClass = Class.forName(ITelephonyStub.getClass().getName());

if (ON) {
     dataConnSwitchmethod = ITelephonyClass.getDeclaredMethod("enableDataConnectivity"); 

} else {
    dataConnSwitchmethod =  ITelephonyClass.getDeclaredMethod("disableDataConnectivity");
}
dataConnSwitchmethod.setAccessible(true);
dataConnSwitchmethod.invoke(ITelephonyStub);
}catch(Exception e){
       Log.e("Error:",e.toString());
  }
else
 {
Log.i("version:", "Found Gingerbread+");
 final ConnectivityManager conman = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
  final Class conmanClass = Class.forName(conman.getClass().getName());
 final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
 iConnectivityManagerField.setAccessible(true);
 final Object iConnectivityManager = iConnectivityManagerField.get(conman);
 final Class iConnectivityManagerClass =   Class.forName(iConnectivityManager.getClass().getName());
 final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
 setMobileDataEnabledMethod.setAccessible(true);
 setMobileDataEnabledMethod.invoke(iConnectivityManager, ON);
  }
 } 
```

不要忘记在清单文件中添加这些权限；

```
android.permission.ACCESS_WIFI_STATE
android.permission.UPDATE_DEVICE_STATS
android.permission.CHANGE_NETWORK_STATE
android.permission.ACCESS_NETWORK_STATE
android.permission.MODIFY_PHONE_STATE
android.permission.READ_PHONE_STATE 
```

# android-mapview - 如何在 Windows 上使用 SHA1 摘要算法获取 google mapAPI 密钥？

> ID：11793178
> 
> 赞同：1
> 
> 时间：2012-08-03T09:41:34.400
> 
> 标签：android-mapview

为了获得谷歌地图 API 密钥，我正在运行 keytool 命令，Java 版本 7。该命令默认创建 SHA1 摘要格式的指纹。当我尝试通过输入此指纹 (SHA1) 来获取 API 密钥时，我总是从 Google 站点收到一条错误消息。该站点需要 MD5 格式的指纹。任何可能的解决方法，伙计们？

问候， 科希克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T21:31:32.590

使用这个命令：

```
keytool -v -list -alias xxx -keystore xxx 
```

这`-v`将向您展示所有三种哈希码算法，例如 MD5、SHA1 和 SHA256。

# c# - 不知道应该是什么类型

> ID：11793181
> 
> 赞同：0
> 
> 时间：2012-08-03T09:41:38.200
> 
> 标签：c#

我想提取当月的所有星期日并拥有以下代码：

```
 private string GetDatesOfSundays(DateTime DatMonth)
 {
  string sReturn = "";
  int iDayOffset = DatMonth.Day - 1;
  DatMonth = DatMonth.AddDays(System.Convert.ToDouble(-DatMonth.Day + 1));
  DateTime DatMonth2 = DatMonth.AddMonths(1).AddDays(System.Convert.ToDouble(-1));
  while (DatMonth < DatMonth2)
  {
    if (DatMonth.DayOfWeek == System.DayOfWeek.Sunday)
    {
      if (sReturn.Length > 0) sReturn += ",";
      sReturn += DatMonth.ToShortDateString();
    }
    DatMonth = DatMonth.AddDays(1.0);
  }
  return sReturn;
}   

[HttpGet]
public ActionResult TradeUKKPISearchesData()
{
  string allSundaysInMonth = GetDatesOfSundays(System.DateTime.Now);  
  //var reportData = _reportingService.GetTradeUKKPISearches();
  //return View(reportData);
} 
```

问题在于我的 allSundaysInMonth 类型字符串，当然也是空的。sReturn 是字符串类型，但我又传递了一个日期（我知道:)）但是 allSundaysInMonth 应该是什么类型？sReturn 确实有正确的日期...我需要在控制器视图的下拉列表中显示这些日期，以便用户可以选择他/她需要为其运行报告的任何星期天。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:47:48.917

怎么样

```
private IEnumerable<DateTime> GetDatesOfSundays(DateTime DatMonth)
{
    int iDayOffset = DatMonth.Day - 1;   
    DatMonth = DatMonth.AddDays(System.Convert.ToDouble(-DatMonth.Day + 1));
    DateTime DatMonth2 =
        DatMonth.AddMonths(1).AddDays(System.Convert.ToDouble(-1));
    while (DatMonth < DatMonth2)
    {
        if (DatMonth.DayOfWeek == System.DayOfWeek.Sunday)
        {
            yield return DatMonth;
        }

        DatMonth = DatMonth.AddDays(1.0);
    }
} 
```

我很想将您的函数重写为类似这样的扩展

```
public static IEnumerable<Datetime> DaysOfMonth(
    this DateTime any,
    DayOfWeek day)
{
    // start at first of month
    var candidate = new DateTime(any.Year, any.Month, 1);

    var offset = (int)day - (int)candidate.DayOfWeek;

    if (offset < 0)
    {
        offset += 7
    }

    candidate = candidate.AddDays(offset);

    while (cadidate.Month == any.Month)
    {
        yield return candidate;
        candidate = candidate.AddDays(7.0)
    }
} 
```

然后你可以像这样使用它

```
var allSundaysInMonth = DateTime.Now.DaysOfMonth(DayOfWeek.Sunday); 
```

* * *

如果你想将 an 转换`IEnumerable<DateTime>`为 a`string`你可以这样做，

```
var listOfDates = string.Join<DateTime>(", ", allSundaysInMonth); 
```

使用[这个](http://msdn.microsoft.com/en-us/library/dd992421.aspx) `string.Join`重载

* * *

如果你真的想要这样的日子，`DateTime[]`你可以这样做（但没有必要）

```
DateTime[] allSundaysInMonth = GetDatesOfSundays(DateTime.Now).ToArray(); 
```

或者对于我的扩展示例

```
var allSundaysInMonth = DateTime.Now.DaysOfMonth(DayOfWeek.Sunday).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:45:39.520

您可以选择`DateTime[]`或`IEnumerable<DateTime>`。

您的方法签名应该是

```
private IEnumerable<DateTime> GetDatesOfSundays(DateTime DatMonth) 
```

或者

```
private DateTime[] GetDatesOfSundays(DateTime DatMonth) 
```

如果你还没有`IEnumerable`为此工作过

```
private DateTime[] GetDatesOfSundays(DateTime DatMonth)
{
    List<DateTime> lst = new List<DateTime>();

    DatMonth = DatMonth.AddDays(-DatMonth.Day + 1);
    DateTime DatMonth2 = DatMonth.AddMonths(1).AddDays(System.Convert.ToDouble(-1));

    while (DatMonth < DatMonth2)
    {
        if (DatMonth.DayOfWeek == System.DayOfWeek.Sunday)
        {
            lst.Add(DatMonth);
            DatMonth = DatMonth.AddDays(7);
            continue;
        }

        DatMonth = DatMonth.AddDays(1);
    }

    return lst.ToArray();
} 
```

并将其称为

```
DateTime[] allSundaysInMonth = GetDatesOfSundays(System.DateTime.Now); 
```

# php - 使用 cURL 和 Regex 进行屏幕抓取

> ID：11793184
> 
> 赞同：0
> 
> 时间：2012-08-03T09:41:51.077
> 
> 标签：php, regex, curl

考虑以下格式的文档：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<body>
   <div class="blog_post_item first">
       <?php // some child elements ?>
   </div><!-- end blog_post_item -->
</body>
</html> 
```

我正在使用 PHP cURL 将这样的文档从一个域加载到另一个域。我想将我的 cURL 结果修剪为仅包含`div.blog_post_item.first`及其子项。我知道另一个页面的结构，但我无法编辑它。我想我可以用它`preg_match`来找到开始和结束标签；它们看起来*总是*一样的，包括结尾的评论。

我已经搜索了使用 cURL/XPath/XSLT/whatever 进行屏幕抓取的示例/教程，它主要是对 HTML 解析库名称的周期性喋喋不休。因此，请提供一个简单的工作示例。请不要简单地解释使用正则表达式解析 HTML 是一个潜在的安全漏洞。[请](http://php.net/DOMDocument) [不要](https://stackoverflow.com/questions/3650125/how-to-parse-html-with-php) [只](http://php.net/manual/en/book.xmlreader.php)[列出](http://github.com/symfony/symfony/tree/master/src/Symfony/Component/DomCrawler/)[我](http://www.fluentdom.org/)[应该](https://stackoverflow.com/questions/4231382/regular-expression-pattern-not-matching-anywhere-in-string/4234491#4234491)[进一步](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)[阅读](http://code.google.com/p/html5lib/)[的](http://www.tagbytag.org/articles/phpquery-vs-querypath)[库](http://www.phparch.com/books/phparchitects-guide-to-web-scraping-with-php)[和](http://en.wikipedia.org/wiki/XPath)[规范](http://simplehtmldom.sourceforge.net/)。[_](https://stackoverflow.com/questions/3650125/how-to-parse-html-with-php?lq=1) [_](http://framework.zend.com/manual/en/zend.dom.html)

我有一些简单的 PHP cURL 代码：

```
$ch = curl_init("http://a.web.page.com");
curl_setopt($ch, CURLOPT_HEADER, 0);
$output = curl_exec($ch);
curl_close($ch); 
```

当然，现在`$output`包含了整个源码。我将如何获得该元素的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:47:35.427

如果您确定开始和结束始终相同，那将非常容易。您所要做的就是搜索开头和结尾并匹配它们之间的所有内容。我想很多人会因为我使用正则表达式来查找一些 HTML 而生气，但它会完成这项工作！

```
// cURL
$ch = curl_init("http://a.web.page.com");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec($ch);
curl_close($ch);

if(empty($output)) exit('Couldn\'t download the page');

// finding your data
$pattern = '/<div class="blog_post_item first">(.*?)<\/div><!-- end blog_post_item -->/';

preg_match_all($pattern, $output, $matches);
var_dump($matches); // all matches 
```

因为我不知道您要抓取哪个网站，所以我不确定这是否有效。

* * *

在搜索了很长一段时间（确切地说是 26 分钟）后，我找到了为什么它不起作用。点 ( `.`) 与换行符不匹配。由于 HTML 充满了新行，因此无法匹配内容。无论如何，我使用了一个稍微肮脏的技巧来让它匹配（即使你已经选择了一个答案）。

```
// cURL
$ch = curl_init('http://blogg.oscarclothilde.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec($ch);
curl_close($ch);

if(empty($output)) exit('Couldn\'t download the page');

// finding your data
$pattern = '/<div class="blog_post_item first">(([^.]|.)*?)<\/div><!-- end blog_post_item -->/';

preg_match_all($pattern, $output, $matches);
var_dump($matches[1][0]); // all matches 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:56:13.983

这段代码应该可以工作（>= 5.3.6 和 dom 扩展）：

```
$s = <<<EOM
<!DOCTYPE html>
<html>
<head>
<title></title>
<body>
   <div class="blog_post_item first">
       <?php // some child elements ?>
   </div><!-- end blog_post_item -->
</body>
</html>
EOM;

$d = new DOMDocument;
$d->loadHTML($s);

$x = new DOMXPath($d);

foreach ($x->query('//div[contains(@class, "blog_post_item") and contains(@class, "first")]') as $el) {
        echo $d->saveHTML($el);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T10:07:13.723

如果您确定以下结构：

```
<div class="blog_post_item first">
   WHATEVER
</div><!-- end blog_post_item --> 
```

并且您确定结束代码不会出现在 WHATEVER 中，那么您可以简单地抓住它。

（请注意，我用 WHATEVER 替换了您原来的 PHP。CURL 只会获取 HTML，它会包含内容，而不是 PHP。）

你不需要正则表达式。您也可以简单地通过搜索想要的字符串来完成，如下面的示例所示。

```
$curlResponse = '
<!DOCTYPE html>
<html>
<head>
<title></title>
<body>
   <div class="blog_post_item first">
       <?php // some child elements ?>
   </div><!-- end blog_post_item -->
</body>
</html>';

$startStr = '<div class="blog_post_item first">';
$endStr = '</div><!-- end blog_post_item -->';

$startStrPos = strpos($curlResponse, $startStr)+strlen($startStr);
$endStrPos = strpos($curlResponse, $endStr);

$wanted = substr($curlResponse, $startStrPos, $endStrPos-$startStrPos );

echo htmlentities($wanted); 
```

# xml - 使用 xPath 从表中获取特定数据

> ID：11793193
> 
> 赞同：3
> 
> 时间：2012-08-03T09:42:12.180
> 
> 标签：xml, xpath, html-table, xpath-2.0

我有这张表和源[代码](http://pastebin.com/f86dWtnq)：

![在此处输入图像描述](../Images/d40782333cc5a4cfbe587b88f8dee249.png)

我想获取所有行，我可以使用：

![在此处输入图像描述](../Images/86c3ff85106e77457ca2bbc42416d796.png)

使用的预期最终输出`string-join($doc//*[@id='salaries']/tbody/tr/normalize-space(.), '&#xA;')`为：

```
1985-86 Los Angeles Lakers NBA $2,030,000
1987-88 Los Angeles Lakers NBA $2,000,000
1988-89 Los Angeles Lakers NBA $3,000,000 
```

我的问题是，如何从最终输出中删除第三列（在本例中名为 NBA）以获得以下信息：

```
1985-86 Los Angeles Lakers $2,030,000
1987-88 Los Angeles Lakers $2,000,000
1988-89 Los Angeles Lakers $3,000,000 
```

ps：我不确定那个专栏总是在那个地方，但是锚里面包含“联盟”`a[contains(@href, 'league')]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:37:36.283

**这个 XPath 2.0 表达式**：

```
 for $i in 1 to count(/tbody/tr),
      $r in /tbody/tr[$i],
      $s in string-join($r/td[not(position() eq 3)]/normalize-space(.), ' ')
   return
     concat($s, '&#xA;') 
```

**在提供的 XML 文档上进行评估时**：

```
<tbody>
<tr class="" data-row="0">
   <td align="left">1985-86</td>
   <td align="left"><a href="/teams/LAL/1986.html">Los Angeles Lakers</a></td>
   <td align="left"><a href="/leagues/NBA_1986.html">NBA</a></td>
   <td align="right" csk="2030000">$2,030,000</td>
</tr>
<tr class="" data-row="1">
   <td align="left">1987-88</td>
   <td align="left"><a href="/teams/LAL/1988.html">Los Angeles Lakers</a></td>
   <td align="left"><a href="/leagues/NBA_1988.html">NBA</a></td>
   <td align="right" csk="2000000">$2,000,000</td>
</tr>
<tr class="" data-row="2">
   <td align="left">1988-89</td>
   <td align="left"><a href="/teams/LAL/1989.html">Los Angeles Lakers</a></td>
   <td align="left"><a href="/leagues/NBA_1989.html">NBA</a></td>
   <td align="right" csk="3000000">$3,000,000</td>
</tr>
</tbody> 
```

**产生想要的正确结果：**

```
 1985-86 Los Angeles Lakers $2,030,000
 1987-88 Los Angeles Lakers $2,000,000
 1988-89 Los Angeles Lakers $3,000,000 
```

**如果不能保证要排除的列的位置是固定的，请使用**：

```
 for $i in 1 to count(/tbody/tr),
      $r in /tbody/tr[$i],
      $s in string-join($r/td[not(starts-with(a/@href,'/leagues'))]
                              /normalize-space(.), ' ')
   return
     concat($s, '&#xA;') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:16:14.813

要排除第三列，请使用

```
tbody/tr/td[position()!=3] 
```

要排除包含 的链接`league`，您可以使用

```
tbody/tr/td[not(contains(a/@href,'league'))] 
```

# iphone - iOS绘图应用程序问题

> ID：11793196
> 
> 赞同：-1
> 
> 时间：2012-08-03T09:42:20.157
> 
> 标签：iphone, ios, xcode, ipad, ipod

我正在创建一个简单的绘图应用程序，其中我在后台有一个 UIView，在前台有一个 UIImageView。我在 UIView 中做一些绘图的东西，我在 UIImageView 中设置了一个图像。我想在 UIImageView 中添加透明效果以显示图像后面的线条。我知道我可以通过减少 alpha 来做到这一点，但我不想改变图像的 alpha。

我想用 来做`CGContextSetBlendMode`，但我不知道该怎么做。请帮我解决这个问题。

谢谢！

**图片** [http://www.freeimagehosting.net/q3237](http://www.freeimagehosting.net/q3237)

```
UIImage *img = [UIImage imageNamed:@"Image.png"];      

UIGraphicsBeginImageContext(self.view.frame.size); 
CGContextRef ctx = UIGraphicsGetCurrentContext(); 
CGContextSetBlendMode(ctx, kCGBlendModeMultiply); 
[img drawInRect:CGRectMake(0, 0, 768, 1004) blendMode:kCGBlendModeDarken alpha:1]; [imageView.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height)]; 
CGContextSetBlendMode(ctx, kCGBlendModeDarken); 
imageView.image = UIGraphicsGetImageFromCurrentImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:12:49.563

无需像这样保持 imageview 。由于您在两个不同的上下文中绘图，因此您将无法在它们之间使用混合模式。为此，您需要在绘图视图上绘制其他东西，然后绘制图像..

```
 - (void)drawRect:(CGRect)rect {

         // do ur drawing stuff first             

            CGContextRef context = UIGraphicsGetCurrentContext();
            CGContextTranslateCTM(context, 0, self.bounds.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);
            CGContextDrawImage(context, self.bounds, self.image.CGImage);
            CGContextSetBlendMode(context, kCGBlendModeSaturation);
            CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 1.0);
            CGContextFillRect(context, rect);  
  } 
```

# c++ - 不应该执行的中断

> ID：11793197
> 
> 赞同：2
> 
> 时间：2012-08-03T09:42:23.877
> 
> 标签：c++, if-statement, for-loop, break

```
int main(int argc, char *argv[]) {
    int i = 0;
    for (i = 0; i < 50; i++)
        if (false) break;
} 
```

使用 VS 2010 编译和执行（VS 2008 中的相同问题）。我在最后一行（右括号）放了一个断点，并通过调试器查看变量 i。此代码将 i 保留为 0。为什么？

```
int main(int argc, char *argv[]) {
    int i = 0;
    for (i = 0; i < 50; i++)
        if (false) break;;
} 
```

在此之后 - 请注意 break 后的第二个分号 - i 如预期的那样是 50。

有人可以向我解释这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:36:12.730

此代码无法在符合标准的编译器上编译，因为它是无效的 C++ ( `void main`)。

也就是说，结果值`i`是无关紧要的：编译器可以为所欲为。

原因是它`i`永远不会在循环之外读取（它本身被证明没有效果）并且没有声明`volatile`，因此编译器可以很容易地证明没有可观察到的副作用，无论`i`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:46:30.807

查看生成的汇编代码，`objdump -d -S`我们可以看到 GDB 跳过循环的可能原因：

```
0000000000400584 <main>:
int main()
{
  400584:   55                      push   %rbp
  400585:   48 89 e5                mov    %rsp,%rbp
    volatile int i;

    for (i = 0; i < 5; i++)
  400588:   c7 45 fc 00 00 00 00    movl   $0x0,-0x4(%rbp)
  40058f:   eb 09                   jmp    40059a <main+0x16>
  400591:   8b 45 fc                mov    -0x4(%rbp),%eax
  400594:   83 c0 01                add    $0x1,%eax
  400597:   89 45 fc                mov    %eax,-0x4(%rbp)
  40059a:   8b 45 fc                mov    -0x4(%rbp),%eax
  40059d:   83 f8 04                cmp    $0x4,%eax
  4005a0:   0f 9e c0                setle  %al
  4005a3:   84 c0                   test   %al,%al
  4005a5:   75 ea                   jne    400591 <main+0xd>
  4005a7:   b8 00 00 00 00          mov    $0x0,%eax
        if (false)
            break;
}
  4005ac:   c9                      leaveq 
  4005ad:   c3                      retq   
  4005ae:   90                      nop
  4005af:   90                      nop 
```

即使在关闭优化的情况下编译（`-O0`标志为 g++），实际上也不会为循环体生成代码。这可能意味着 GDB 会将循环视为单个语句，并且不会正确地单步执行循环。

我使用了 GCC 4.4.5 版和 GDB 7.0.1 版。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T11:10:34.257

在 MSVC10 中，这是可重现的。我检查了拆卸。pdb文件生成似乎有问题。返回循环开头的跳转指令与下一个源代码行混合，就是这样。如果按 step 到下一行，它将从 return 语句回到 for 循环的开头，并按预期执行循环 50 次。 ![查看代码](../Images/02bb43f26814736bb4d714650c623861.png).

# objective-c - 调用 3rd 方 API 的 Cocoa App 崩溃

> ID：11793199
> 
> 赞同：0
> 
> 时间：2012-08-03T09:42:30.267
> 
> 标签：objective-c, cocoa, xcode4

我的 Cocoa Objective-C 应用程序（在 XCode 中）偶尔会在调用 3rd 方 API 的部分崩溃。我相信这是内存泄漏之类的。我附上了我的程序将执行的部分，第 3 方 API 和崩溃日志。

```
Please help to give me pointers on how I can solve this. Thanks a lot!

My code:

.
.
.
    uint8_t InfoProg[4];//10 
    uint8_t nInfoProg = 4;//10
    uint8_t ret;
    NSString *result;
    NSLog(@"***Calling GetConnectedProgramers***");
    ret = GetConnectedProgrammers(InfoProg, nInfoProg); // The part where it crashes sometimes
.
.
.

3rd party API function:

/**
 GET INFO ON CONNECTED USB PROGRAMMERS
 reports back the number of connected USB programmer devices on the host 

 @param InfoProg
        points to the memory that will be filled with the info on the connected
        USB programmers; 
        it is the responsibility of the application to allocate this memory 
        and to size it sufficiently. This should be an buffer with at least 8 bytes.
        InfoProg[x] = 0; no USB programmer allocated to that number
        InfoProg[x] = 1; USB programmer allocated to that number = USB programmer available
 @param nInfoProg 
        is the number of requested data structures 
 @return    
        is the number of programmers connected
*/
uint8_t GetConnectedProgrammers (uint8_t *InfoProg, uint8_t nInfoProg);

Crash Report:

Process:         FCT_MACOS [575]
Path:            /Virgo_FG2_EVT/FCT_MACOS3p55c.app/Contents/MacOS/FCT_MACOS
Identifier:      com.TopTest.FCTMACOS
Version:         3.55c (3.55c)
Code Type:       X86 (Native)
Parent Process:  launchd [132]

Date/Time:       2012-08-03 10:34:35.151 +0800
OS Version:      Mac OS X 10.7.3 (11D2001)
Report Version:  9

Interval Since Last Report:          16921 sec
Crashes Since Last Report:           3
Per-App Interval Since Last Report:  5164 sec
Per-App Crashes Since Last Report:   3
Anonymous UUID:                      22314E10-99B9-4989-A2E8-53631295027B

Crashed Thread:  4

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00000000000005a5

VM Regions Near 0x5a5:
--> __PAGEZERO             0000000000000000-0000000000001000 [    4K] ---/--- SM=NUL  /Virgo_FG2_EVT/FCT_MACOS3p55c.app/Contents/MacOS/FCT_MACOS
    VM_ALLOCATE            0000000000001000-0000000000013000 [   72K] ---/--- SM=NUL  

Application Specific Information:
objc_msgSend() selector name: isEqual:
objc[575]: garbage collection is OFF

Thread 0:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x964edc22 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x964ed1f6 mach_msg + 70
2   com.apple.CoreFoundation        0x9677ec7a __CFRunLoopServiceMachPort + 170
3   com.apple.CoreFoundation        0x96787da4 __CFRunLoopRun + 1428
4   com.apple.CoreFoundation        0x9678747c CFRunLoopRunSpecific + 332
5   com.apple.CoreFoundation        0x96787328 CFRunLoopRunInMode + 120
6   com.apple.HIToolbox             0x9973417f RunCurrentEventLoopInMode + 318
7   com.apple.HIToolbox             0x9973b4e7 ReceiveNextEventCommon + 381
8   com.apple.HIToolbox             0x9973b356 BlockUntilNextEventMatchingListInMode + 88
9   com.apple.AppKit                0x957dfa9c _DPSNextEvent + 678
10  com.apple.AppKit                0x957df306 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 113
11  com.apple.AppKit                0x957db675 -[NSApplication run] + 911
12  com.apple.AppKit                0x95a6f261 NSApplicationMain + 1054
13  com.TopTest.FCTMACOS            0x00014055 start + 53

Thread 1:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x964f090a kevent + 10
1   libdispatch.dylib               0x97c1dc58 _dispatch_mgr_invoke + 969
2   libdispatch.dylib               0x97c1c6a7 _dispatch_mgr_thread + 53

Thread 2:
0   libsystem_kernel.dylib          0x964f0ef2 __sem_wait + 10
1   com.ni.framework.nipalu         0x001ebd0b tTimerTimeWasterSleep::sleep(u64, tTimerTimeUnit, long*) const + 3019
2   com.ni.framework.NI4882         0x06cad33c WaitSRQ + 99996
3   com.ni.framework.nipalu         0x001edc78 tThreadUtility::getCurrentThreadId() + 104
4   libsystem_c.dylib               0x918aeed9 _pthread_start + 335
5   libsystem_c.dylib               0x918b26de thread_start + 34

Thread 3:
0   libsystem_kernel.dylib          0x964edc22 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x964ed1f6 mach_msg + 70
2   com.apple.framework.IOKit       0x982f92df io_connect_method + 465
3   com.apple.framework.IOKit       0x982a9f21 IOConnectCallMethod + 559
4   com.apple.framework.IOKit       0x982aa21b IOConnectCallStructMethod + 84
5   com.ni.framework.nipalu         0x001f11f1 tThreadUtility::yield(iThreadController*, long*) + 12993
6   com.ni.framework.nipalu         0x001ec4b3 tTimerTimeWasterSleep::sleep(u64, tTimerTimeUnit, long*) const + 4979
7   com.ni.framework.NI4882         0x06c9940a WaitSRQ + 18282
8   com.ni.framework.nipalu         0x001edc78 tThreadUtility::getCurrentThreadId() + 104
9   libsystem_c.dylib               0x918aeed9 _pthread_start + 335
10  libsystem_c.dylib               0x918b26de thread_start + 34

Thread 4 Crashed:
0   libobjc.A.dylib                 0x915bcd47 objc_msgSend + 23
1   com.apple.CoreFoundation        0x9675b57a CFEqual + 154
2   com.apple.framework.IOKit       0x982cbc80 IOHIDDeviceUnscheduleFromRunLoop + 29
3   com.TopTest.FCTMACOS            0x0008dee2 closeAll + 66
4   com.apple.CoreFoundation        0x967ea298 -[NSObject performSelector:withObject:withObject:] + 72
5   com.TopTest.FCTMACOS            0x000213ff -[TestViewController threadRunTest:] + 2593
6   com.apple.Foundation            0x97ddbe59 -[NSThread main] + 45
7   com.apple.Foundation            0x97ddbe09 __NSThread__main__ + 1582
8   libsystem_c.dylib               0x918aeed9 _pthread_start + 335
9   libsystem_c.dylib               0x918b26de thread_start + 34

Thread 5:
0   libsystem_kernel.dylib          0x964f002e __workq_kernreturn + 10
1   libsystem_c.dylib               0x918b0ccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x918b26fe start_wqthread + 30

Thread 6:
0   libsystem_kernel.dylib          0x964f002e __workq_kernreturn + 10
1   libsystem_c.dylib               0x918b0ccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x918b26fe start_wqthread + 30

Thread 7:
0   libsystem_kernel.dylib          0x964f002e __workq_kernreturn + 10
1   libsystem_c.dylib               0x918b0ccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x918b26fe start_wqthread + 30

Thread 8:
0   libsystem_kernel.dylib          0x964f002e __workq_kernreturn + 10
1   libsystem_c.dylib               0x918b0ccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x918b26fe start_wqthread + 30

Thread 9:
0   libsystem_kernel.dylib          0x964f002e __workq_kernreturn + 10
1   libsystem_c.dylib               0x918b0ccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x918b26fe start_wqthread + 30

Thread 10:
0   libsystem_kernel.dylib          0x964efbb2 __semwait_signal + 10
1   libsystem_c.dylib               0x918637b9 nanosleep$UNIX2003 + 187
2   com.apple.Foundation            0x97e1c05f +[NSThread sleepForTimeInterval:] + 170
3   com.TopTest.FCTMACOS            0x0006cbd7 -[RS232 threadB139RS232Read:] + 223
4   com.apple.Foundation            0x97ddbe59 -[NSThread main] + 45
5   com.apple.Foundation            0x97ddbe09 __NSThread__main__ + 1582
6   libsystem_c.dylib               0x918aeed9 _pthread_start + 335
7   libsystem_c.dylib               0x918b26de thread_start + 34

Thread 4 crashed with X86 Thread State (32-bit):
  eax: 0x78690d00  ebx: 0xac7d8724  ecx: 0x96128a48  edx: 0x00000585
  edi: 0x7868cc80  esi: 0x78615800  ebp: 0xb0102c18  esp: 0xb0102bf8
   ss: 0x00000023  efl: 0x00010206  eip: 0x915bcd47   cs: 0x0000001b
   ds: 0x00000023   es: 0x00000023   fs: 0x00000023   gs: 0x0000000f
  cr2: 0x000005a5
Logical CPU: 2 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:47:14.287

来自文档；

```
@param InfoProg
 This should be an buffer with at least 8 bytes. 
```

但

```
uint8_t InfoProg[4]; 
```

仅包含 4 个 uint8_t（字节）。尝试增加缓冲区。

# java - Maven 故障安全插件因“无法找到surefire-booter”而失败

> ID：11793200
> 
> 赞同：3
> 
> 时间：2012-08-03T09:42:30.790
> 
> 标签：java, maven, integration-testing

截至 8 月 2 日，我们的 Maven 构建在 Jenkins 中突然失败。我们无法解释为什么 maven failsafe 无法访问它依赖的“引导程序”插件。

有没有人见过同样的事情？

```
[INFO] [failsafe:integration-test {execution: run-integration-tests}]
[INFO] Failsafe report directory: /var/lib/jenkins/workspace/Foo/integration-tests/target/failsafe-reports
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Unable to locate surefire-booter in the list of plugin artifacts
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.RuntimeException: Unable to locate surefire-booter in the list of plugin artifacts
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.getForkConfiguration(AbstractSurefireMojo.java:1152)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:655)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAllProviders(AbstractSurefireMojo.java:647)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:606)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:569)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:42:30.790

问题仅限于 Maven Failsafe 2.12.1，[Apache 存储库中的目录列表](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-failsafe-plugin/)显示该目录于 8 月 1 日晚些时候发布。

解决方法是将 POM 中的版本修复为早期的 2.12，或者您可能还想尝试更高版本，例如 2.12.2 或 2.12.3（发布此答案的日期）。我没有尝试过这些更高版本，“2.12”是对我有用的版本字符串。

只需在 POM 中声明插件的位置添加所选版本。

大概这是有效的，因为只有 2.12.1 有问题（这是未诊断的，AFAICT）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T16:11:23.460

我使用 Maven 2 遇到了这个问题。切换到 Maven 3 解决了我的问题。西蒙关于增加 maven-surefire-plugin 的答案也适用于 Maven 2。

# jpeg - 在 jpeg 图像压缩中，增加块大小对统计上的 DCT 系数值有什么影响？

> ID：11793206
> 
> 赞同：2
> 
> 时间：2012-08-03T09:42:41.327
> 
> 标签：jpeg, distribution, dct

例如，将块大小从 8x8 增加到 16x16。我预计系数会减少，因为合并块的相应系数之间会有一个平均值（在上面的示例中：4 个 8x8 块组成 1 个 16x16 块）。如果它们真的减少了，低频是否会下降得更快？我们可以说如果它们降低得较慢，信息将被推向高频系数吗？这会降低图像质量，因为高频区域的量化更高？我可以说较大块的量化误差更高，因为一个像素的系数会比多个量化误差多吗？我觉得答案需要一些数学知识。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-21T23:07:07.833

基于 Daala 频域块调整大小，它们似乎没有直接可比性，并且关系有些复杂：

[https://jmvalin.ca/~xiphmont/demo/daala/demo3.shtml](https://jmvalin.ca/~xiphmont/demo/daala/demo3.shtml)

但是，整体行为是相似的，并且在压缩方面并没有太大变化，除了在低质量范围内明显减少块边缘的数量：

[https://libjpeg-turbo.org/About/SmartScale-Lossy](https://libjpeg-turbo.org/About/SmartScale-Lossy)

# android - Android权限拒绝

> ID：11793208
> 
> 赞同：0
> 
> 时间：2012-08-03T09:42:48.170
> 
> 标签：android, permissions

我尝试从我的主要活动中启动第三方应用程序：

意图=新意图（）；

```
final ComponentName cn = new ComponentName("com.mojang.minecraftpe", 
"com.mojang.minecraftpe.MainMenuOptionsActivity");
intent.setComponent(cn);
intent.setAction(Intent.ACTION_MAIN);
startActivity(intent); 
```

但我得到错误：

```
E/AndroidRuntime(22330): java.lang.SecurityException: Permission     Denial: starting  
Intent { act=android.intent.action.MAINcmp=com.mojang.minecraftpe/.MainMenuOptionsActivity
} from ProcessRecord{407b6928 22330:com.metalex.musicplayer/10073} (pid=22330, uid=10073) 
requires null 
```

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:07:14.240

根本原因是目标活动没有导出，因此无法从其他应用程序启动它。

问候

陈子腾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:38:46.033

试试这个：

```
Intent intent= getPackageManager().getLaunchIntentForPackage("com.mojang.minecraftpe");
startActivity(intent); 
```

这样您就不必弄清楚可以启动哪个活动。

# silverlight - 如何在 SilverLight 应用程序中使用 .js 和 .css 文件

> ID：11793222
> 
> 赞同：0
> 
> 时间：2012-08-03T09:43:16.717
> 
> 标签：silverlight

我正在为从 .js 文件和 .css 文件生成的整个应用程序使用自定义警报消息。我还在我的应用程序中使用了 silverlight，并显示了来自 silverlight 的 MessageBox 及其默认设计。现在我想在 silverlight 中自定义那个 MessageBox。

那么，任何人都可以帮助我了解如何将 js 和 css 文件添加到 silverLight 应用程序以及如何使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:53:59.913

您不能像简单地创建自己的模式窗口那样轻松地更改内置 MessageBox 样式。有很多自定义消息框，其中很多都有源代码。

## 例如

*   [创建一个可重用的 MessageBox 对话框。](http://community.devexpress.com/blogs/theonewith/archive/2008/08/06/custom-silverlight-controls-creating-a-reusable-messagebox-dialog-part-i.aspx)
*   [带有自定义用户控件的 Silverlight 模式对话框](http://www.eggheadcafe.com/tutorials/aspnet/a01af6c8-c067-4fdd-bc01-d47cf3410feb/silverlight-modal-dialog.aspx)
*   [Silverlight 3 的自定义 MessageBox 控件](http://www.codeproject.com/KB/silverlight/CustomMessageBox.aspx)

注意：这些都是 Silverlight 解决方案，因此您使用 XAML 和样式进行创作，而不是使用 JS 和 CSS。

*如果您认为这对您的解决方案更容易，也可以从 Silverlight 中调用页面上的 JS 函数。*

# file-format - 将 .SLDDRW(solidworks) 转换为 .IGES (.IGS)

> ID：11793225
> 
> 赞同：1
> 
> 时间：2012-08-03T09:43:27.860
> 
> 标签：file-format, cad, solidworks

如何将 SolidWorks **2D**溺水 (.SLDDRW) 保存到 IGES 文件中。我知道如何转换**3D**溺水，但在**2D中***Save As*中没有 IGES 。应该是某种方式，因为一开始 IGES 是为**2D**创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:19:20.150

IGES can be exported only from part or assemblies. I'd suggest the following workaround:

1.  Save a drawing in DXF/DWG format.

2.  Open saved DXF/DWG file.

3.  In DXF/DWG Import dialog select radio button 'Import to a new part as' and either option under it.

4.  Press Finish button. A new part or assembly should be created.

5.  Now you can export in IGES format. Just make sure that in IGES Export options 'IGES wireframe (3D curves)' is checked.

Good luck!

# .net - SqlServer CE 4 找不到请求的 .Net 框架数据提供程序

> ID：11793226
> 
> 赞同：3
> 
> 时间：2012-08-03T09:43:27.263
> 
> 标签：.net, sql-server-ce

我用 Sqlserver ce 4.0 创建了一个 winforms 应用程序。

我正在使用 nuget 获取 sqlserver ce 4.0 包。

编译后，我将准备好所有 sqlserverce dll 以供分发。

这些文件是： System.Data.SqlServerCe.dll System.Data.SqlServerCe.Entity.dll amd64 x86

但我得到这个错误：

```
Unable to find the requested .Net framework data provider 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-08T12:24:17.673

我通过将以下块添加到应用程序配置文件来解决此问题：

```
 <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.4.0" />
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
  </system.data> 
```

# linux - C 在 GNU/Linux 上，替换终端字符串

> ID：11793228
> 
> 赞同：-1
> 
> 时间：2012-08-03T09:43:35.987
> 
> 标签：linux, shell, terminal

实际上，当我打开终端时，我得到了这个默认字符串：
`username@hostname:~`

我想用这个替换上面的字符串：
`<myprgrogram>:~`

我怎样才能做到这一点？
我在 GNU/Linux 上用 C 语言开发）。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:44:59.157

[您需要按照此处](http://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html)的详细信息设置提示（我假设您正在使用`bash`）。

有*许多*选项和功能。有关示例库，请参见[此处](http://jamiedubs.com/ps1-collection-customize-your-bash-prompt/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:21:09.227

您可以使用标准库 (stdlib.h) 中的 setenv/putenv 更改环境变量，请参阅“man setenv”。但是，当程序结束时，变量不会被保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:50:25.673

如果您的意思是当前路径，则将以下行添加到您的`.bashrc`文件中。

```
export PS1='<$PWD>:' 
```

# ruby-on-rails - 找不到 without an ID Rails I am trying to ensure that each job has the correct link when a user clicks on it. The issue I am having is that I keep getting the error Couldn't find job without an ID. In 问问题 问问题 2012-08-03T09:43:59.780 633 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to ensure that each job has the correct link when a user clicks on it. The issue I am having is that I keep getting the error Couldn't find job without an ID. In my view I have the following code: <% @jobs.group_by{|x| x.created_at.strftime("%d %b. %Y")}.each do |date,jobs_on_that_date| %><%= date %><% jobs_on_that_date.each do |job| %><%= link_to url_with_protocol(@link.job_url), :target => '_blank' do %><%= job.title %> - <%= job.company %> <%= job.salary %> <%= job.location %> <%= job.job_type %><% end %> <% end %><% end %> In my controller I am creating an object called @link as follows: def index @user = current_user @jobs = Job.where('created_at > ?', 30.days.ago).reverse @link = Job.find(params[:id]) end Finally I have the following Routes setup. JobappV2::Application.routes.draw do devise_for :users resources :jobs resources :users do resources :jobs end root :to => 'jobs#index' end If I use @link = Job.find(2) this works but every job ends up with the link input by the job with id 2. Thanks in advance for any help! what is params[:id]? I suspect that if you do raise params[:id].inspect in your controller, you will find it's nil. Besides, what's the point in creating @link? just put job.job_url in your view instead of @link.job_url ruby-on-railsruby-on-rails-3 4 1 回答 1 This answer is useful 1 什么是params[:id]？ 我怀疑如果你raise params[:id].inspect在你的控制器中这样做，你会发现它是nil. 此外，创作的意义@link何在？只是放在job.job_url你的视野中，而不是@link.job_url 于 2012-08-03T10:18:21.027 回答 Related 3 c# - 使用 TCP 时是否需要使用校验和来保护我的消息？ 1 mysql - 从不同的数据库导入 Magento 中的产品 1 c# - 获取物理磁盘序列号在 Windows XP 上不起作用 1 php - 如何在上传前检查 zip 文件夹的内容？ 1 batch-file - 如何将包含要输出的变量的命令重定向到 Windows 命令行上的变量 2 java - 在 Swing 中的 JLabel 上显示按钮 1 android - android中的内存不足异常android？ 1 ios - 制作所有 UIScrollView 内容的快照 1 javascript - 带有 svg 节点的 D3 图 - 如何将节点移动到任意位置 2 c# - 在 Gridview 中使用链接按钮 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11793232
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I am trying to ensure that each job has the correct link when a user clicks on it.

The issue I am having is that I keep getting the error `Couldn't find job without an ID`.

In my view I have the following code:

```
 <% @jobs.group_by{|x| x.created_at.strftime("%d %b. %Y")}.each do |date,jobs_on_that_date| %>
   <section class="date"><%= date %></section>
   <section id="top-job">
      <% jobs_on_that_date.each do |job| %>
   <section id="job-wrapper">
  <%= link_to url_with_protocol(@link.job_url), :target => '_blank' do %>
  <section id="job">
        <%= job.title %> - <%= job.company %>
        <%= job.salary %>
        <%= job.location %> 
        <%= job.job_type %>
  </section>
  </section>    
  <% end %>
  <% end %>
  </section>
  <% end %> 
```

In my controller I am creating an object called `@link` as follows:

```
 def index
  @user = current_user
  @jobs = Job.where('created_at > ?', 30.days.ago).reverse
  @link = Job.find(params[:id])
 end 
```

Finally I have the following Routes setup.

```
 JobappV2::Application.routes.draw do

   devise_for :users

   resources :jobs

   resources :users do
      resources :jobs
   end

   root :to => 'jobs#index'

   end 
```

If I use `@link = Job.find(2)` this works but every job ends up with the link input by the job with id 2.

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:18:21.027

什么是`params[:id]`？

我怀疑如果你`raise params[:id].inspect`在你的控制器中这样做，你会发现它是`nil`. 此外，创作的意义`@link`何在？只是放在`job.job_url`你的视野中，而不是`@link.job_url`

# ruby-on-rails - Rails 中的表关联最佳实践？

> ID：11793233
> 
> 赞同：1
> 
> 时间：2012-08-03T09:44:09.027
> 
> 标签：ruby-on-rails, database, activerecord, relationship

对 Rails 非常陌生，管理过一些简单的项目，但现在正在涉足更复杂的表之间的关联，并希望得到一些帮助。

该场景最好与体育比赛相关。假设我们有

1) 一个团队（有_许多玩家）

2) 一个玩家（belongs_to team）

3) 一场比赛——现在变得棘手了。

一场比赛将有： 2 支球队和 22 名球员（每边 11 名）参加比赛。此外，与每位球员相关联的是他们的比赛得分（例如，射门得分、进球得分、得分等）

创建这种关联的最佳实践是什么？任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:47:22.043

玩家拥有并属于多场比赛

该表应包含参加该比赛的球员的详细信息。例如他为哪支球队效力，从哪一分钟开始（因为球员可以改变）等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:58:25.310

## 楷模

应用程序/模型/team.rb

```
class Team < ActiveRecord::Base
    has_many :players, inverse_of: :team
    has_many :team_matches
    has_many :matches, through: :team_matches
end 
```

应用程序/模型/player.rb

```
class Player < ActiveRecord::Base
    belongs_to :team, inverse_of: :player
    has_many :player_matches
    has_many :matches, through: :player_matches
end 
```

应用程序/模型/match.rb

```
class Match < ActiveRecord::Base
    has_many :players, through: :player_matches
    has_many :teams, through: :team_matches
end 
```

应用程序/模型/team_match.rb

```
class TeamMatch < ActiveRecord::Base
    belongs_to :team
    belongs_to :match
end 
```

应用程序/模型/player_match.rb

```
class PlayerMatch < ActiveRecord::Base
    belongs_to :player
    belongs_to :match
end 
```

## 迁移

db/migrate/create_matches.rb

```
class CreateMatches < ActiveRecord::Migration
  def change
    create_table :matches do |t|
      t.datetime :happened_at
      t.timestamps
    end
  end
end 
```

db/migrate/create_players.rb

```
class CreatePlayers < ActiveRecord::Migration
  def change
    create_table :players do |t|
      t.string :name
      t.timestamps
    end
  end
end 
```

db/migrate/create_teams.rb

```
class CreateTeams < ActiveRecord::Migration
  def change
    create_table :teams do |t|
      t.string :name
      t.timestamps
    end
  end
end 
```

db/migrate/create_player_matches.rb

```
class CreatePlayerMatches < ActiveRecord::Migration
  def change
    create_table :player_matches do |t|
      t.integer :match_id
      t.integer :player_id
      t.integer :player_shots_on_goal
      t.integer :player_goals_scored
      t.timestamps
    end
  end
end 
```

db/migrate/create_team_matches.rb

```
class CreateTeamMatches < ActiveRecord::Migration
  def change
    create_table :team_matches do |t|
      t.integer :match_id
      t.integer :team_id
      t.integer :team_points
      t.timestamps
    end
  end
end 
```

Edit1：@Mischa 应该在这里分享功劳！:)

Edit2：对不起，版本太多了，我完全低估了这个问题。

# c - 在这个程序中 &a[0] 和 a 有什么区别？

> ID：11793239
> 
> 赞同：2
> 
> 时间：2012-08-03T09:44:36.107
> 
> 标签：c, arrays, multidimensional-array

我在下面有一个程序......我有一个 turbo c 编译器，所以`int`是 2 个字节..

```
#include<stdio.h>
main()
{
    int a[3][2]={
                 {1,3},
                 {2,0},
                 {3,4}
                };
    printf("%d",(a+1));   //increments 2 bytes
        printf("%d",(&a[0]+1)); // increments 4 bytes
        printf("%d",(a[2]));
    return 0;
 } 
```

`a+1`和 和有什么不一样`&a[0]+1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:45:18.313

它们是等价的表达式。

`a + 1`和`&a[0] + 1`值是相同的，它们都是 type `int (*)[2]`。

请注意，您没有正确打印指针值：使用`p`转换说明符并将参数转换`(void *)`为打印指针的值：

```
printf("%p\n", (void *) (a + 1)); 
printf("%p\n", (void *) (&a[0] + 1)); 
printf("%p\n", (void *) (a[2])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:50:16.750

您的编译器似乎有错误。如果`a`命名一个数组，那么在 [大多数] 表达式中`a`并且`&a[0]`应该具有相同的类型和值，因此`+1`在两种情况下的结果应该是相同的。

`a+1`并且`&a[0]+1`都应该等价于`&a[1]`。

为了在测试时严格正确，您应该将`%p`其用作显示指针值的格式说明符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:20:45.203

`a`命名数组`int a[3][2]`，所以它有类型`int [3][2]`。在表达式`a + 1`中，它衰减为指向第一个元素的指针，因此它的类型为`int (*)[2]`。

在表达式`&a[0]`中，`a`再次衰减为类型的指针，类型也是`int (*)[2]`如此。address-of 运算符是一种特殊情况，因为它不会引发指针衰减，因此具有 type并且具有与 decayed 相同的类型和值。`a[0]``int [2]``&a[0]``int (*)[2]``a`

猜测一下，我推测您的编译器错误地衰减`a[0]`in `&a[0]`，因此它给出`&a[0]`了 type `int **`。如果您平台上的数据指针大小为 4 个字节，那么这将解释观察到的结果。

# c++ - 一个班级需要另一个班级，而另一个班级需要第一个班级。我怎么做？

> ID：11793242
> 
> 赞同：0
> 
> 时间：2012-08-03T09:44:41.093
> 
> 标签：c++

这里我们有两个类，我们称之为`Tree`和`Fruit`。A在任何给定时间`Tree`只能有一个或没有s。`Fruit`A`Fruit`只能在一个 上`Tree`。从`Tree`对象中，您可以`Fruit`通过函数获取它`getTreeFruit( )`。从对象中，您可以通过返回对象`Fruit`的函数获取其“所有者” 。`getFruitOwner( )``Tree`

现在在`Tree`标题中，我们有这个：

```
#include "Fruit.h"
class Tree {
   private:
      Fruit m_Fruit; // The fruit in the tree.

   public:
      Tree ( Fruit tree_fruit );
      Fruit getTreeFruit( ); // Returns m_Fruit.
} 
```

在`Fruit`标题上：

```
#include "Tree.h"
class Fruit {
   private:
      Tree m_Owner; // The Tree object that "owns" the fruit.

   public:
      Fruit ( Tree fruit_owner );
      Tree getFruitOwner( ); // Returns m_Owner.
} 
```

我意识到`Tree`并`Fruit`包含彼此的头文件，这会导致错误。我该如何解决错误？

非常感谢先进。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:50:47.167

您应该在 Fruit 对象中存储对 Tree 的*引用*，而不是树本身。

在这里，引用是比指针更好的选择，因为它们表达了水果不能神奇地从一棵树跳到另一棵树的情况。只有在构造对象时才能设置引用，因此您必须在构造函数中使用初始化列表。

然后，您可以使用 Tree 的前向声明。

```
 class Tree;

  class Fruit {
   private:
      Tree &owner; // The Tree object that "owns" the fruit.

   public:
      Fruit (Tree &fruit_owner ) : owner(fruit_owner)
      { ... };

      Tree &getFruitOwner( ); // Returns owner. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:47:54.050

使用类的前向声明并将树作为指针

```
class Tree;
class Fruit {
   private:
      Tree *m_pOwner; // The Tree object that "owns" the fruit.

   public:
      Fruit ( Tree *fruit_owner );
      Tree* getFruitOwner( ); // Returns m_Owner.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:49:47.700

> 我意识到 Tree 和 Fruit 包含彼此的头文件，这会导致错误。

这不是唯一的问题。基本上，您希望两个对象递归地相互包含，这是不可能的。

您可能想要的是让水果有一个指向它所属树的指针，并像这样向前`Tree`声明`Fruit.h`：

树.h：

```
#include "Fruit.h"
class Tree 
{
    private:
        Fruit m_Fruit; // The fruit in the tree.

    public:
        Tree (Fruit tree_fruit);
        Fruit getTreeFruit(); // Returns m_Fruit.
} 
```

水果.h

```
class Tree;

class Fruit 
{
    private:
        Tree* m_Owner; // The Tree object that "owns" the fruit.

    public:
        Fruit(Tree* fruit_owner);
        Tree* getFruitOwner(); // Returns m_Owner.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:48:13.197

你应该使用`forward declaration`：

```
class Tree;

class Fruit {
   private:
      Tree *m_Owner; // The Tree object that "owns" the fruit.

   public:
      Fruit ( Tree *fruit_owner );
      Tree *getFruitOwner( ); // Returns m_Owner.
} 
```

# java - netbeans：如何设置值以控制从数据库中检索的内容？

> ID：11793244
> 
> 赞同：0
> 
> 时间：2012-08-03T09:44:47.843
> 
> 标签：java, netbeans, jdatechooser

我想从数据库中获取记录并想在表单上设置。在这种形式中，我使用`JDateChooser`from `JCalendar`。我为此编写了以下代码：

```
public void showdata()

    int a=leaveView.getSelectedRow();
    int b=(Integer)leaveView.getValueAt(a, 0);
    String c=(String)leaveView.getValueAt(a, 1);
    String d=(String)leaveView.getValueAt(a, 2);
    String e=(String)leaveView.getValueAt(a, 3);
    String f=(String)leaveView.getValueAt(a, 4);
    String  g=(String)leaveView.getValueAt(a, 5);
    String h=(String)leaveView.getValueAt(a, 6);
    int i=(Integer)leaveView.getValueAt(a, 7);  
    String j = (String)leaveView.getValueAt(a, 8);
    String k = (String)leaveView.getValueAt(a, 9);

    AL.empid.setSelectedItem(b);
    AL.empname.setText(c);
    AL.empname.setEditable(true);
    AL.department.setText(d);
    AL.department.setEditable(true);
    AL.leavetype.setSelectedItem(e);
    AL.other.setText(f);
    AL.other.setEditable(true);
    AL.jDateChooser1.setDate(g);
    AL.jDateChooser2.setDate(h);

    AL.noofdays.setText(""+i);
    AL.noofdays.setEditable(true);
    AL.singleday.setSelected(true);
    AL.multipleday.setSelected(true);
} 
```

但它默认将今天的日期设置为`JDateChooser`......它不显示从数据库中检索到的日期......上面的代码在行 `AL.jDateChooser1.setDate(g)`和`AL.jDateChooser2.setDate(h)`g & h 处引发错误......我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:56:36.957

假设您正在使用这个[JCalendar API](http://www.toedter.com/en/jcalendar/)

从[javadocs](http://www.toedter.com/en/jcalendar/api/index.html) setDate 接受一个日期对象而不是一个字符串。首先将 dateString(g & h) 转换（解析）为 Date 对象，然后设置日期。

```
DateFormat df = new SimpleDateFormat("dd/MM/yyyy"); //adjust this according to your requirement
Date gDate,hDate;
        try {
            gDate = df.parse(g);
            hDate = df.parse(h);
        } catch (ParseException e) {
            e.printStackTrace();
        }

AL.jDateChooser1.setDate(gDate);
AL.jDateChooser2.setDate(hDate); 
```

对于一些示例日期格式，请访问[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# c# - 如何在 SQL 查询中访问用户身份

> ID：11793245
> 
> 赞同：0
> 
> 时间：2012-08-03T09:44:57.687
> 
> 标签：c#, sql-server

在 C# 3.0 ASP.NET 中，我正在编写一个 CMS，并且我想编写一个访问我的用户身份的 SQL 查询。

在我的母版页中，我有一个`SqlDataSource`我想编写一个从表中返回 ID 的 SQL 查询

## 编辑

好的，看这个例子：（这是在`Page_Load`）

```
sqlDataSource1.SelectCommand = String.Format("select PageGroupID from users where Username = {0};", Page.User.Identity.Name); 
```

但它不起作用:(

请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:32:39.803

它不起作用，因为您正在使用 string.format 构造无效的 SQL 字符串 试试这个，而不是。

```
sqlDataSource1.SelectCommand =
     String.Format("select PageGroupID from users where Username = '{0}';", 
     Page.User.Identity.Name); 
```

然后，当它起作用时，请阅读有关**SQL 注入**的内容以及为什么构造这样的 SQL 字符串是**一个坏主意**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:33:57.167

要了解差异，试试这个；

```
string.Format("<br />Page.User.Identity: {0} " +  "<br />Request.LogonUserIdentity: {1}",
Page.User.Identity.Name, Request.LogonUserIdentity.Name); 
```

使用 Request.LogonUserIdentity.Name。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:51:31.120

请参考这篇[文章](http://forums.asp.net/t/1186509.aspx/1)- 它应该可以帮助您从中获取正确的值`Page.User.Identity.Name`，然后您可以通过确保您的**数据库**具有基于它返回的值的**匹配值来从那里开始。**

# matlab - matlab局部静态变量

> ID：11793247
> 
> 赞同：3
> 
> 时间：2012-08-03T09:45:02.400
> 
> 标签：matlab

为了在不同场景下测试一个算法，需要迭代调用一个matlab函数alg.m。

alg.m 中的瓶颈类似于：

```
load large5Dmatrix.mat
small2Dmatrix=large5Dmatrix(:,:,i,j,k)  % i,j and k change at every call of alg.m
clear large5Dmatrix 
```

为了加快我的测试，我想`large5Dmatrix`只在第一次调用 alg.m 时加载，并且对未来的调用有效，可能只在 alg.m 的范围内

有没有办法在matlab中实现这一点，然后设置`large5Dmatrix` 为全局？

你能想出一种更好的方法来处理 alg.m 中这个庞大的常数值矩阵吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T10:01:12.840

您可以将[持久性](http://www.mathworks.nl/help/techdoc/ref/persistent.html)用于静态局部变量：

```
function myfun(myargs)
    persistent large5Dmatrix
    if isempty(large5Dmatrix)
        load large5Dmatrix.mat;
    end

    small2Dmatrix=large5Dmatrix(:,:,i,j,k)  % i,j and k change at every call of alg.m
    % ... 
end 
```

但由于您没有更改`large5Dmatrix`，@High Performance Mark 答案更适合并且没有计算含义。除非你真的，真的不想`large5Dmatrix`在调用者的范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:54:20.287

当您将数组作为参数传递给 Matlab 函数时，只有在函数更新它时才会复制数组，如果函数只读取数组，则不会进行复制。因此，该函数在时间和空间上付出的任何性能损失，都应该只在函数更新大数组时才起作用。

我从来没有用递归函数测试过这个，但我没有立即明白为什么它应该开始复制大数组，如果它只被读取。

所以你的策略是`load`在函数之外的数组，然后将它作为参数传递给函数。

[本说明](http://www.mathworks.co.uk/support/solutions/en/data/1-15SO4/?solution=1-15SO4)可能会澄清。

# python - 如何从 Gtk.Builder.connect_signals 访问处理程序 ID

> ID：11793253
> 
> 赞同：3
> 
> 时间：2012-08-03T09:45:27.783
> 
> 标签：python, gtk, glade

我有一个带有一些按钮的 Glade 文件，我用它`Gtk.Builder.connect_signals()`来连接方法 ( `on_button_toggled`) 和相应的信号 ( `toggled`)。（这对我来说[很快](http://developer.ubuntu.com/resources/tools/quickly/)，但我可以看到并更改该代码，所以这只是一个细节）。

我现在想要做的是停止处理信号，例如通过调用`object.handler_block(handler_id)`or `object.disconnect(handler_id)`。所以我的问题是：我怎样才能获得`handler_id`通过创建的连接的 s `Gtk.Builder.connect_signals()`？

通常你会`handler_id`从一个电话中得到：

```
handler_id = object.connect(name, cb, cb_args)  
handler_id = object.connect_after(name, cb, cb_args)
handler_id = object.connect_object(name, cb, slot_object, cb_args)  
handler_id = object.connect_object_after(name, cb, slot_object, cb_args) 
```

但 Gtk.Builder 版本不返回 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:50:43.007

可悲的是，我不相信有任何方法可以获取由`Gtk.Builder`. 如果你真的想要处理程序，你必须手动连接你的信号，存储`handler_id`你关心的任何 s。

另一种方法是确定您实际上并不需要处理程序本身，但可以阻止/取消阻止/等。基于连接的可调用，使用`GObject.handler_block_by_func`和类似。

最后的选择是尝试在事后实际找到处理程序，使用尽可能多的细节。在 C 中，使用`g_signal_handler_find`; 这不适用于 pygtk2，但可能会使用 pygobject3 工作。这里的缺点是不能保证你会找到你*实际*连接的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T16:53:23.590

这对您来说可能为时已晚，但我有一个解决方案来获取您单击的小部件的名称，该小部件的设置是......

```
self.builder.connect_signals(self) 
```

从[这个来源](http://gnipsel.com/glade/gtk11b.html)，作者使用 gtk.Buildable.get_name() 来获取小部件/对象的名称。在我的场景中，根据单击的按钮，会发生不同的操作。我想将相同的事件处理程序附加到某种类型的所有按钮，因为它们在很大程度上做同样的事情。这是代码。

```
import gtk

class GUI:
  def __init__(self):
    self.builder = gtk.Builder()
    self.builder.add_from_file('myGUI.glade')
    self.builder.connect_signals(self)
    self.window = self.builder.get_object("window1")
    self.window.show()

  def on_button_click(self, object, data=None):
    print(gtk.Buildable.get_name(object)) 
```

很酷，嗯？我认为是的，至少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-17T19:22:38.403

使用 PyGObject，最好的方法是`signal_handler_find`我认为的方法。使用这个函数，它使用了来自 GObject 的两个函数

```
def get_handler_id(obj, signal_name):
    signal_id, detail = GObject.signal_parse_name(signal_name, obj, True)
    return GObject.signal_handler_find(obj, GObject.SignalMatchType.ID, signal_id, detail, None, None, None) 
```

使用示例：

```
get_handler_id(button, "clicked") 
```

将为您`handler_id`提供连接到`clicked`信号的处理程序`button`。这可以用于`handler_block`.

# javascript - 使用 JavaScript 根据 HTML 中的选定选项生成文本

> ID：11793258
> 
> 赞同：0
> 
> 时间：2012-08-03T09:45:42.133
> 
> 标签：javascript, html, text, html-select

我正在尝试创建一个站点，您可以在其中从名为*contactOptions*的下拉列表中选择一个选项。选项的值范围为0到8.选择选项时，我希望出现在下面的文本 - 此文本包含在具有ID的DIV标记中，其中id等*文本*与选项0的文本。这些ID都有*显示：*默认无。我有一些 JavaScript（如下）——我的 html 中的 select 标记包括*onchange = "sortForm()"*行。不幸的是，脚本没有做任何事情—— *#contact0*仍然不可见。

```
function sortForm() {
  var selection = document.getElementById("contactOptions");
  var selectedValue = selection.options[selection.selectedIndex].value;

  for (var i = 0; i <=8; i++) {
    var subobjContact = document.getElementById("contact" + i);
    if (i == selectedValue) {
      subobjContact.style.display == "block"
    } else {
      subobjContact.style.display == "none"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:49:36.407

使用单个等号

```
subobjContact.style.display = "block" 
```

和

```
subobjContact.style.display = "none" 
```

# java - 在 Glassfish 中使用现有连接池为第二个数据源创建 JDBC 事务

> ID：11793259
> 
> 赞同：0
> 
> 时间：2012-08-03T09:45:53.187
> 
> 标签：java, jdbc, transactions, glassfish, connection

我有使用数据库的主要数据源，它使用一些连接池。现在我想创建第二个数据源，它将使用相同的连接池在*单独的事务中执行日志记录操作，然后是主数据库事务！*据我从 Glassfish[文档](http://docs.oracle.com/cd/E19316-01/820-4335/ablih/index.html)中了解到，如果多个数据源正在使用同一个连接池，那么它们会共享一个事务，直到连接没有关闭（我可能错了，请纠正我）。

那么，有没有办法在连接到数据源时启动新事务？通过设置 TransactionIsolation 可能是什么？

通过以下方式检索连接：

```
private synchronized Connection getConnection() {
        if (connection == null) {
            try {
                final Context ctx = new InitialContext();
                final DataSource ds = (DataSource) ctx.lookup(getDataSourceLookupAddress());
                connection = ds.getConnection();
            } catch (final NamingException e) {
                errorHandler.error("Datasource JNDI lookup failed: " + dataSourceLookupAddress + "!");
                errorHandler.error(e.toString());
            } catch (final SQLException e) {
                errorHandler.error("Sql connection failed to " + dataSourceLookupAddress + "!");
                errorHandler.error(e.toString());
            }
        }
        return connection;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:36:31.743

我已经想通了。需要启动一个新线程，然后将创建一个新事务。另请参阅[在回滚过程中写入数据库日志](https://stackoverflow.com/questions/4715333/writing-to-database-log-in-the-middle-of-rollback)

# javascript - 使用正则表达式从文本中获取字符串

> ID：11793260
> 
> 赞同：0
> 
> 时间：2012-08-03T09:45:52.903
> 
> 标签：javascript, regex

我怎样才能只得到里面的文字`Material[amhere]`？

例如，从...

```
PROD_RULE0001:WARNING: Metric[amhere] exceeded the UPPER WARNING limit[80.0] 
```

...我只想要`amhere`.

我试过了：

```
var strg = "WARNING: Material[amhere] exceeded the UPPER WARNING limit[80.0]";
var testRE = strg.match("Material\[(.*)\]");
alert(testRE[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:55:11.517

```
strg.match(/Material\[(.*?)\]/); 
```

这 ？在 * 之后使它变得懒惰，所以 . 之后不会捕获所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:57:48.993

也许您想使用另一种方式；

```
var material="Material[";
var str="WARNING: Material[amhere] exceeded the UPPER WARNING limit[80.0]";
var n=str.indexOf(material);
var amhere=str.substring(n+material.length, str.length).split("]")[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:59:26.763

你的`.*`表情是贪婪的，因此在结束时吃掉了它，*而*`]`不是与之匹配。

 *除了@Telémako 的解决方案，另一种方法是通过说“匹配除`]`.

```
strg.match(/Material\[([^\]*)\]]/); 
```*

# java - 成对集，编译错误

> ID：11793265
> 
> 赞同：1
> 
> 时间：2012-08-03T09:46:18.193
> 
> 标签：java

我想知道为什么这段代码会出现编译错误。我是 JAVA 的新手。我想像在 C++ 中一样制作一组对内部类代码中的**对是什么意思**

```
import java.io.*;
import java.util.Set;

public class UVa {
    public static boolean flag = false;
    public static Integer p0, p1;
    public static Set<pair<Integer,Integer> > sorter;

    public static class pair<first,second>{
        public first First;
        public second Second;
        private pair(first First,second Second){
            this.First = First;
            this.Second = Second;
        }
    }

    public static void main(String[] args) {
        try {
            while (true) {
                p0 = System.in.read();
                p1 = System.in.read();
                sorter.add(pair<p0, p1>); //<<Syntax error on token ">", Expression expected after this token

            }
        } catch (IOException e) {
            System.out.println(e.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:50:34.030

看来您正在尝试构建一个新的`pair`使用

```
pair<p0, p1> 
```

但是，正确的语法是

```
new pair<Integer, Integer>(p0, p1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:59:18.897

您要添加到 Set 的是 type 的对象`pair<Integer, Integer>`。要创建其中之一，您需要使用`new`关键字，并使用两个 Integer 变量`p0`和调用构造函数`p1`。

```
sorter.add(new pair<Integer, Integer>(p0,p1)); 
```

以大写字母命名类是[传统的做法。](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)我在下面用这些约定重写了你的类，以尝试更清楚地`pair`展示它如何使用[Java 泛型：](http://docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html)

```
public static class Pair<T1,T2>{
    public T1 first;
    public T2 second;
    private pair(T1 first, T2 second){
        this.first = first;
        this.second = second;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T09:53:51.143

**在第 8 行：**

```
public static Set<pair<Integer,Integer> > sorter; 
```

Set 尚未初始化，这就是抛出的原因`java.lang.NullPointerException` ，因此，您必须首先像下面一样初始化它。

```
public static Set<pair<Integer,Integer> > sorter = new HashSet<UVa.pair<Integer,Integer>>(); 
```

**在第 25 行，**
您尝试`pair<p0, p1>`像您正在做的那样添加设置

```
 sorter.add(pair<p0, p1>); 
```

但它不是正确的语法。正确的语法是 .

```
sorter.add(new pair<Integer, Integer>(p0, p1)); 
```

或者

```
sorter.add(new pair(p0, p1)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:52:22.203

更改了您的代码：

```
 pair p= new pair<Integer, Integer>(p0, p1);
            sorter.add(p); //<<Syntax error on token ">", Expression expected after this token 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T09:51:13.257

不应该

```
sorter.add(pair<p0, p1>); 
```

读

```
sorter.add(new pair(p0, p1)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T09:51:41.900

在您的来源`pair<p0, p1>`中，声明`sorter.add(pair<p0, p1>);`中指的是 type `pair`。您实际上并没有创建要添加到集合中的对象。你还不如写`sorter.add(int);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T10:01:22.963

欢迎来到 Java。虽然 Java 是 C++，但编程风格略有不同。试试下面的。开始`pair`编译只是你的第一个问题。;)

```
public class UVa {
    public static void main(String... args) {
        Scanner scanner = new Scanner(System.in);

        List<Pair<Integer, Integer>> sorter = new ArrayList<>();
        while (scanner.hasNext()) {
            int p0 = scanner.nextInt();
            int p1 = scanner.nextInt();
            sorter.add(Pair.of(p0, p1));
            scanner.nextLine();
        }

        Collections.sort(sorter, new Comparator<Pair<Integer, Integer>>() {
            @Override
            public int compare(Pair<Integer, Integer> o1, Pair<Integer, Integer> o2) {
                int cmp = Integer.compare(o1.first, o2.first);
                if (cmp == 0)
                    cmp = Integer.compare(o1.second, o2.second);
                return cmp;
            }
        });
        for (Pair<Integer, Integer> pair : sorter) {
            System.out.println(pair);
        }
    }
}

class Pair<First, Second> {
    public final First first;
    public final Second second;

    public Pair(First first, Second second) {
        this.first = first;
        this.second = second;
    }

    public static Pair<Integer, Integer> of(int i, int j) {
        return new Pair<Integer, Integer>(i, j);
    }

    @Override
    public String toString() {
        return "Pair{" +
                "first=" + first +
                ", second=" + second +
                '}';
    }
} 
```

# .net - 在 IIS 7 中动态添加 WCF 服务

> ID：11793266
> 
> 赞同：0
> 
> 时间：2012-08-03T09:46:25.520
> 
> 标签：.net, wcf

我试图寻找解决方案，但到目前为止我没有运气。

我有一系列类库，每个库（模块/插件）实现一个或多个 WCF 服务。现在我想要一个“托管”项目，我可以在其中根据可访问的插件添加所有这些服务。我知道我可以使用无文件激活，因此可以在所有配置时间内完成，但我更希望有一些代码来查看已安装的插件（我有代码），并添加暴露的服务运行时。整个事情应该使用 WAS 托管在 IIS 7（或更高版本）中，因为我需要 TCP 绑定以及 HTTP。

我发现似乎可以使用 ASP.NET RouteTable 类（在 Application_Start 中添加类型），但我的理解是这将限制我仅使用 HTTP 托管。

我想我想要的是一个用于 WAS 的 API，我可以连接并添加“端点/激活”，但到目前为止我还没有找到任何东西。相当于以下配置的东西：

```
<serviceActivations>
    <add relativeAddress="AwesomeService.svc" service="Classlibrary.WCF.AwesomeService"/>
</serviceActivations> 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T19:43:25.163

我已经成功地使用了这里描述的方法：

[http://weblogs.asp.net/andresv/archive/2011/08/29/registering-a-wcf-service-dynamically.aspx](http://weblogs.asp.net/andresv/archive/2011/08/29/registering-a-wcf-service-dynamically.aspx)

它使用一些反射黑客来访问 ServiceHostingEnvironment 类上的私有字段，以在运行时添加自定义的“基于配置的激活”条目。

我选择使用 HttpModule 来注册服务激活元素，如下所示：

```
 public class ServiceRegistrationModule : IHttpModule
    {
        public void Dispose()
        {
        }

        public void Init(HttpApplication context)
        {
            // Discover and register your services here
            RegisterService("~/Some/Path.svc", null, "The full service class name");
        }

        static object _syncRoot = new object();
        static Hashtable serviceActivations;

        private static void RegisterService(string addr, string factory, string service)
        {
            // This is the code that injects the service activation configuration.
            // In WCF 4 we have the "not very well known" CBA Services (Configuration Based Activation)
            // to allow us to define "file-less" WCF Services (like our Service2 here in this demo) where
            // we have a section in our web.config to register services without the need of having a physical .svc file.
            // The section in the web.config looks like this:
            //
            //      <serviceHostingEnvironment multipleSiteBindingsEnabled="true" >
            //          <serviceActivations>
            //              <add relativeAddress="Service2.svc" service="WcfService2.Service2" />
            //          </serviceActivations>
            //      </serviceHostingEnvironment>
            //
            // And is this configuration what we are going to inject at runtime to simulate having that 
            // information in our web.config, while we haven't.

            lock (_syncRoot)
            {
                if (serviceActivations == null)
                {
                    var ensureInitialized = typeof(ServiceHostingEnvironment).GetMethod("EnsureInitialized");
                    ensureInitialized.Invoke(null, new object[] { });
                    var hostingManagerField = typeof(ServiceHostingEnvironment).GetField("hostingManager", BindingFlags.Static | BindingFlags.NonPublic | BindingFlags.GetField);
                    var hostingManager = hostingManagerField.GetValue(null);
                    var serviceActivationsField = hostingManager.GetType().GetField("serviceActivations", BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.GetField);
                    serviceActivations = (Hashtable)serviceActivationsField.GetValue(hostingManager);
                }

                if (!serviceActivations.ContainsKey(addr))
                {
                    string value = string.Format("{0}|{1}|{2}", addr, factory, service);
                    serviceActivations.Add(addr, value);
                }
            }
        }
    } 
```

使用 HttpModule 的缺点是它不适用于基于 TCP 的端点。这对我来说不是一个问题。如果这对您来说是个问题，我上面引用的博客文章描述了一种适用于基于 TCP 的端点的方法。

# c# - 从扩展方法中消除可推断的泛型类型参数

> ID：11793269
> 
> 赞同：3
> 
> 时间：2012-08-03T09:46:33.450
> 
> 标签：c#, .net, generics, automapper

我在我的应用程序中使用 .NET 映射库 AutoMapper，我有一个像这样的通用扩展方法：

```
public static T2 Map<T1, T2>(this T1 o)
{
    return Mapper.Map<T1, T2>(o);
}

...

var nc = new NonCustomer();
Customer c = nc.Map<NonCustomer, Customer>(); 
```

有什么办法可以摆脱`T1`扩展方法中的泛型参数以便推断出来？导致这样的调用：

```
var nc = new NonCustomer();
Customer c = nc.Map<Customer>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:53:50.523

您不需要为 T1 参数使用通用版本。

您只需要将其更改为对象：

```
public static TDest Map<TDest>(this object o)
{
    // todo check o is not null
    return (TDest) Mapper.Map(o, o.GetType(), typeof (TDest));
} 
```

如果您使用 AutoMapper v2 及更高版本，您可以编写如下：

```
public static TDest Map<TDest>(this object o)
{
    return Mapper.Map<TDest>(o);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:49:38.687

不，没有办法。泛型类型推断不适用于返回类型。这种方式使您的扩展方法的有用性受到质疑。为什么不直接使用该`.Map<TSource, TDest>`方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:49:47.133

好问题。我一直懒得自己回答，但是鞋匠的孩子总是最后得到扩展方法......

你可以让它更干一点，并且可以说是更漂亮的一步一步解决这个问题并一次做一个推断：

```
public static MapperSource<T> Mapper(this T that)
{
    return new MapperSource<T>( that);
}

public class MapperSource<T>
{
    public T2 To<T2>
    {
        return Mapper.Map<T,T2>();
    }
} 
```

它允许您：

```
var nc = new NonCustomer();
Customer c = nc.Mapper().To<Customer>(); 
```

一种更常见的消费方式（无论如何对我来说）是为每个 'd 路线设置助手，`Mapper.CreateMap`如下所示：

```
public static Customer ToResult(this NonCustomer that)
{
    return that.Mapper().To<Customer>();
} 
```

（可悲的是，因为没有扩展属性，所以没有比这更漂亮的了。再说一次，当我们都使用 F# 时，这一切都没有实际意义）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:51:35.900

不，你不能，因为在 c# 中没有部分类型推断之类的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:00:08.423

仅当您完全删除`T1`泛型类型并为以下内容编写特定方法时`NonCustomer`：

```
public static T2 Map<T2>(this NonCustomer o)
{
    return Mapper.Map<NonCustomer, T2>(o);
} 
```

# html - 在一个 HTML 中水平显示两个表单

> ID：11793270
> 
> 赞同：-4
> 
> 时间：2012-08-03T09:46:35.690
> 
> 标签：html, css

我想更改我网站的登录页面。

我需要在登录页面上添加一个注册表单，以便该页面有两种形式：一种用于登录，另一种用于注册。

我不知道如何水平设置这些表格。谁能解释如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:51:46.733

这应该让您了解您需要做什么：

**HTML：**

```
<div class="container">
    <div class="form form1">Form 1</div>
    <div class="form form2">Form 2</div>
</div> 
```

**CSS：**

```
.container {
    width:100%;
    overflow:auto;
}

.form {
    width:50%;
    height:100px;
    float:left;
}

.form1 {
    background:#ccc;
}

.form2 {
    background:#999;
} 
```

**现场演示：[jsFiddle](http://fiddle.jshell.net/scjBv/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:52:21.553

使用`float:left`：

**HTML：**

```
<form>
    <input type="text" />
    <input type="text" />
    <input type="submit" />
</form>
<form>
    <input type="text" />
    <input type="text" />
    <input type="submit" />
</form> 
```

**CSS：**

```
input { display: block; }
form { float: left; padding-left: 15px; } 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/27gyOpEw)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:55:31.447

您可以将这些表格放入div中吗？

**HTML：**

```
<div class="left">LEFT FORM</div>
<div class="right">RIGHT FORM</div>
<div class="clear"></div> 
```

**CSS：**

```
.left { 
    float:left;
    width:300px;
}
.right {
    width:300px;
}
.clear {
    clear:left;
} 
```

# iphone - 钥匙串组访问以在我现有的应用程序之间共享数据

> ID：11793271
> 
> 赞同：24
> 
> 时间：2012-08-03T09:46:38.170
> 
> 标签：iphone, ios, ipad, ios5, keychain

我在 AppStore 上有很多 iOS 应用程序。现在对于下一个版本的应用程序，我想为每个应用程序保留一段数据以在 KeyChain 中共享。据我所知，我需要在 Apple 的 KeychainItemWrapper 类中提供相同的 Keychain 访问组。

```
*keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"Any string" accessGroup:<string representing access group>]; 
```

我知道自定义 URL，它没有用，因为我希望数据是持久的。

从供应门户中可以看到，我所有的应用程序都有不同的捆绑种子 ID。我知道共享钥匙串访问的主要先决条件是所有应用程序都有一个共同的捆绑种子 ID。

现在我的问题是如何确保在这个场景中我可以使用 Keychain 在所有这些应用程序之间共享数据？

是否可以通过配置文件门户更改所有应用程序的捆绑种子 ID，而不会对任何功能造成任何损害（尽管我想避免这种情况，因为应用程序太多）。

有没有办法可以在一个文件中添加所有应用程序的捆绑种子 ID 并在项目中使用该文件构建所有应用程序来实现这一点？我知道“钥匙串访问组”，我需要创建一个 plist 文件并在其中添加所有应用程序的捆绑种子 ID 吗？

感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-06T17:11:23.767

如果您有不同的*捆绑种子 ID*（捆绑标识符前面的十个字母数字字符，即 中的 X `XXXXXXXXXX.com.company.application`），**则无法**共享访问组。这是对 Apple 的限制，不允许绕过它。我建议您找到另一种安全共享数据的解决方案（可能在设备外部，在服务器上，但不是 iCloud，因为它具有相同的限制）。

有关钥匙串访问组的一般信息：

> 从 iPhone OS 3.0 开始，可以在一系列应用程序之间共享数据。如果您遵循免费/高级应用程序的通用路径，或者您有一组需要共享一些通用帐户设置的相关应用程序，这可以提供更好的用户体验。
> 
> 共享钥匙串访问的主要先决条件是所有应用程序都有一个共同的捆绑种子 ID。要清楚这意味着什么，请记住 App ID 由两部分组成：
> 
> ```
> <Bundle Seed ID> . <Bundle Identifier> 
> ```
> 
> 捆绑种子 ID 是 Apple 在您首次创建 App ID 时生成的唯一（在 App Store 中）十个字符的字符串。捆绑标识符通常设置为标识您的应用程序的反向域名字符串（例如`com.yourcompany.appName`），并且是您在 Xcode 中的应用程序 Info.plist 文件中指定的内容。
> 
> 因此，当您想要创建一个可以与现有应用程序共享钥匙串访问权限的应用程序时，您需要确保使用现有应用程序的捆绑种子 ID。当您在 iPhone Provisioning Portal 中创建新的 App ID 时，您会执行此操作。您可以从所有以前的捆绑种子 ID 列表中选择现有值，而不是生成新值。
> 
> 需要注意的是，虽然您可以为捆绑标识符创建一个带有通配符的配置文件，但我从未能够在使用它的应用程序之间实现共享钥匙串访问。它适用于完全指定的（无通配符）标识符。由于许多其他 Apple 服务（例如推送通知和应用内购买）也有此限制，因此这可能不足为奇，但我还没有找到有关钥匙串访问的文档。
> 
> 一旦你用一个通用的捆绑种子 ID 设置了你的配置文件，剩下的就很容易了。您需要做的第一件事是注册您要使用的钥匙串访问组。钥匙串访问组几乎可以命名为任何您想要的名称，只要它以捆绑种子 ID 开头即可。例如，如果我有两个应用程序如下：
> 
> ```
> ABC1234DEF.com.useyourloaf.amazingApp1
> 
> ABC1234DEF.com.useyourloaf.amazingApp2 
> ```
> 
> 我可以定义一个通用的钥匙串访问组，如下所示：
> 
> ```
> ABC1234DEF.amazingAppFamily 
> ```
> 
> 要使应用程序能够访问该组，您需要使用 xCode 将权利 plist 文件添加到项目中。使用 Add -> New File 并从 iPhone OS Code Signing 部分选择 Entitlements 模板。您可以将文件命名为您喜欢的任何名称（例如`KeychainAccessGroups.plist`）。在文件中添加一个名为 keychain-access-groups 的新数组项，并使用我们选择的钥匙串访问组的值在数组中创建一个项：
> 
> 注意：请勿更改权利文件中默认创建的 get-task-allow 项，除非您正在创建应用程序的 Ad-Hoc 分发（在这种情况下，您应该取消选中此选项）。
> 
> 应该对共享捆绑种子 ID 的所有应用程序重复相同的过程，以使它们能够访问钥匙串组。要从该组中实际存储和检索值，需要向作为参数传递给钥匙串服务的字典添加一个附加值。使用上一篇文章中关于简单 iPhone 钥匙串访问的示例，搜索字典会获得以下附加项：
> 
> ```
> [searchDictionary setObject: @"ABC1234DEF.amazingAppFamily" forKey: (id)kSecAttrAccessGroup]; 
> ```
> 
> 最后一条评论，使用共享的钥匙串访问组也不会阻止您将值存储在应用程序的私有钥匙串中。Apple GenericKeychain 示例应用程序构建了两个应用程序，它们都将数据存储在私有和组密钥链中。

资料来源：[用你的面包](http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T15:54:52.640

现在你可以使用 UIPasteboard

```
//First app, install->run->close->delete
UIPasteboard* board = [UIPasteboard pasteboardWithName:@"com.company.wtv" create:YES];
board.persistent=YES;// persistent to make what you write persist after your app closes, or gets deleted.
[board setValue:@"ccccc" forPasteboardType:@"com.company.wtv.sharedValue"];

//Second app, installed after first one is deleted and ran this one... While bundle identifier and bundle seed different (i tried it on adhoc, not really releasing the app, but i htink the same)
NSData* result=nil;
NSString*resultStr=nil;
result =[board valueForPasteboardType:@"com.company.wtv.sharedValue"];
resultStr=[[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];// I got resultStr containing ccccc 
```

查看 UIPasteboard 文档以获取更多信息。将它用于我的商店应用程序后，我会回来，以防万一

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T06:04:06.507

将应用放入 AppStore 后，您将无法更改应用的捆绑 ID。您也不能让应用程序从另一个应用程序（具有不同的捆绑 ID）放置在那里的钥匙串中读取信息。解决方案：您需要一个可以访问几乎所有数据的权利。

# for-loop - bat文件的for循环中只执行一个命令

> ID：11793273
> 
> 赞同：1
> 
> 时间：2012-08-03T09:46:43.530
> 
> 标签：for-loop, cmd

我尝试编写一个 bat 脚本，它将所有文件从源目录复制到目标。每次迭代之间也必须有几秒钟的延迟。

```
for %%i in (%source%) do (
copy "%%i" "%destination%" 
ping 1.1.1.1 -n 3 -w 3000 > nul
) 
```

但我有一个问题。看起来这段代码只执行复制命令，但我需要for 循环的每次迭代`Copy`。`Ping`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:48:31.770

首先，执行 ping，但只执行一次。

其次，在我的 for 循环中构造 %source%* 而不是 %source% 是正确的解决方案

# android - ContentResolver.query 引发 HTC EVO 4G LTE 异常

> ID：11793276
> 
> 赞同：1
> 
> 时间：2012-08-03T09:47:02.087
> 
> 标签：android

我在 HTC EVO 4G LTE (Android 4.0.3) 上阅读提醒时遇到问题。代码：

```
1 | Uri uri = CalendarContract.Reminders.CONTENT_URI;
2 | Cursor c = cr.query(uri, null, null, null, CalendarContract.Reminders._ID + " ASC");

Stack trace:
at android.os.Parcel.readException(Parcel.java:1338)
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182)
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
    at android.content.ContentProviderProxy.query(ContentProviderNative.java:406)
    at android.content.ContentResolver.query(ContentResolver.java:315)
    at bla.bla.SomeClass.somefunction(SomeClass.java:2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:31:57.430

我测试了您的代码并在 m AT&T HTC One X 上遇到了同样的错误。但是，添加投影参数解决了这个问题。所以这有效：

```
 final String[] columnsToReturn = new String[] {
            CalendarContract.Reminders.EVENT_ID
        };
    final Cursor c = cr.query(uri, columnsToReturn, null, null, BaseColumns._ID + " ASC"); 
```

projection 参数列出了您希望为游标返回的每个结果返回哪些数据列。所以这就是说为每个返回的提醒返回事件 ID。

# php - 数据库事务部分提交

> ID：11793281
> 
> 赞同：0
> 
> 时间：2012-08-03T09:47:14.600
> 
> 标签：php, mysql

我在 PHP / MySQL 中有一段代码，看起来有点像：

```
foreach item
    try
        BEGIN
        update table 1, throw if failed
        update table 2, throw if failed
        update table 3, throw if failed
        etc. etc. etc.
        COMMIT
        print "COMMITTING"
    catch
        ROLLBACK
        print "ROLLING BACK"
    end try
end foreach 
```

我遇到的问题是，我从每次迭代中始终收到“COMMITTING”消息，但有时（似乎是随机的），除了最后一个总是提交的更新之外，没有任何更新会提交。

所有表都是 InnoDB。有谁知道可能是什么问题？

编辑：这是代码的简化版本，希望它足以根除问题吗？

```
foreach($auctions as $a) {  

    try {

        mysql_query("BEGIN");   
        $items = fetchAll("SELECT * FROM users_auctions_items WHERE amount > 0 AND auction = {$a['id']}");
        $highBid = fetchOne("SELECT * FROM users_auctions_bids WHERE auction = {$a['id']} AND status = 0 LIMIT 1");

        if($highBid === false) {

            echo "No high bid, returning items to {$a['user']}\n";
            $recipientId = $a['user'];

        } else {

            $recipientId = $highBid['user'];
            echo "High bid by {$recipientId}\n";
            echo "Giving {$highBid['amount']} gold to {$a['user']}...\n";   
            mysql_query("UPDATE users SET gold = gold + {$highBid['amount']} WHERE id = {$a['user']}");
            if(mysql_affected_rows() != 1) throw new Exception();

        }

        if($items) {
            foreach($items as $i) {
                echo "Giving {$recipientId} item #{$i['item']} (x{$i['amount']})...\n";
                mysql_query("INSERT INTO users_inventory (user, item, amount) 
                    VALUES ({$recipientId}, {$i['item']}, {$i['amount']}) 
                    ON DUPLICATE KEY UPDATE amount = amount + {$i['amount']}");
                if(mysql_affected_rows() < 1) throw new Exception();
            }
        }

        mysql_query("UPDATE users_auctions SET status = 2 WHERE id = {$a['id']}");
        if(mysql_affected_rows() != 1) throw new Exception();

        mysql_query("COMMIT");
        echo "Committing\n";

    } catch(Exception $e) {

        echo "Rolling back\n";              
        mysql_query("ROLLBACK");

    }

} 
```

更具体地说：这由 cron 每隔几分钟运行一次，并且应该运行所有未完成的拍卖并分发商品 - 之后，它将拍卖设置为完成。尽管日志说它运行良好并且它找到了正确的商品和用户，但它偶尔会更新拍卖以完成而不分配资产。

如果我将拍卖重置为不完整并让 cron 再次运行，它通常会毫无问题地完成（有时我必须将其重置 2-3 次）。

# javascript - javascript/jquery open.window 弹出窗口在 about:blank 卸载后触发 onunload

> ID：11793282
> 
> 赞同：2
> 
> 时间：2012-08-03T09:47:18.977
> 
> 标签：javascript, jquery, window.open, onunload

假设我有一个使用 window.open() 打开弹出窗口的按钮：

```
<button id = "my-button">Open window</button>​ 
```

我想在这个窗口关闭时捕捉。我使用以下代码：

```
$('#my-button').on('click', function() {
    popup = window.open('http://www.google.com', 'my_popup', "width=800,height=600,scrollbars=no,resizable=yes,status=yes,toolbar=no,location=no,menubar=no");
    $(popup.document).ready(function() {
        console.log('ready!');
        $(popup).on('unload', function() {
            console.log('unloaded!');
        } );
    })    
});​ 
```

现在，我注意到打开的窗口会短暂加载“about:blank”，然后加载请求的 url。此时，会触发 onunload 事件。[其他帖子](https://stackoverflow.com/questions/4719416/why-js-onunload-is-invoked-when-popup-page-opens)说这是正常行为，但我似乎没有得到第二个 onunload 事件（至少使用铬）。

有人有解决方法可以建议吗？

见小提琴：http: [//jsfiddle.net/periklis/NJz6w/](http://jsfiddle.net/periklis/NJz6w/)

一如既往，提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:31:36.193

好的，我毕竟找到了解决方案：

```
$('#my-button').on('click', function() {
    popup = window.open('http://www.google.com', 'my_popup', "width=800,height=600,scrollbars=no,resizable=yes,status=yes,toolbar=no,location=no,menubar=no");
    $(popup.document).ready(function() {
        console.log('ready!');
        $(popup).on('unload', function() {
            console.log('unloaded!');
            $(popup).on('unload', function() {
                console.log('unloaded 2nd time!');
            } );
        } );
    })    
});​ 
```

这奇怪地适用于我的环境，但不适用于我发布的 jsfiddle 示例。反正。

# ruby-on-rails - 在生产模式下运行时也会记录开发日志

> ID：11793288
> 
> 赞同：0
> 
> 时间：2012-08-03T09:47:37.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在生产模式下运行 RAILS 3 应用程序时，开发日志也会与生产日志一起记录。它应该只给出生产日志吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:46:27.140

你好吗？哪个服务器？你用这个代码吗？

> rails s -e 生产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:24:22.720

您可能已经在开发模式下启动了另一个 Rails 服务器：P

# javascript - 如何重用对象构造函数？

> ID：11793290
> 
> 赞同：-1
> 
> 时间：2012-08-03T09:47:46.253
> 
> 标签：javascript

这就是我从属性哈希创建对象的方式：

```
var object = new function (data) {
  var self = this;
  self.property = data.property;
  self.anotherProperty = data.anotherProperty;

  self.method = function () { return 'something'; }
  self.update = function (newData) {
     //what is here ? 
     //i could have written:
     self.property = newData.property;
     self.anotherProperty = newData.anotherProperty;
     //but why not reuse the constructor?
   }
}; 
```

我想知道如何重用这个函数（构造函数）来从哈希更新对象。以便：

```
object.update(newData) 
```

`newData`将像在构造函数中完成的那样从哈希更新当前对象属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:55:34.230

通过给构造函数一个名字？

```
function MyNotReallyClass(data){
  var self = this;
  self.property = data.property;
  self.method = function () { return 'something'; }
  self.update = MyMyNotReallyClass;
}; 
```

你现在可以打电话了

```
var obj = new MyNotReallyClass(data);
var obj2 = new MyNotReallyClass(data); 
```

和

```
obj.update(data); 
```

我希望这会有所帮助.. 我不是 100% 确定，因为我也在学习.. 但是是的，试试吧；）

**编辑**：在阅读了您的评论后：“但这会返回一个新实例，不是吗？我不想要。”

我认为您可以编写 Update 函数并在构造函数中调用它

```
var object = new function (data) {
  var self = this;
  self.update = function (newData) {  
   self.property = data.property;
   self.method = function () { return 'something'; }
   // and other things You want to do in constructor and update
  }
  self.update(data);
} 
```

;

# android - 将字符串转换为TextView？

> ID：11793303
> 
> 赞同：0
> 
> 时间：2012-08-03T09:48:29.053
> 
> 标签：android, arraylist

看看这段代码：

```
ArrayList<Object> row = data.get(position);

TextView idText = new TextView(this);
idText.setText(row.get(0).toString());
tableRow.addView(idText);

TextView storeText = new TextView(this);
idText.setText(row.get(1).toString());
tableRow.addView(storeText);

TextView maggiText = new TextView(this);
idText.setText(row.get(2).toString());
tableRow.addView(maggiText); 
```

我必须手动创建一个`TextView`，将其设置为某个字符串，然后传递它。有没有一种方法可以直接将字符串传递给可以放入`for`循环的行？

我正在寻找这种可扩展性问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:52:12.640

///复制粘贴时出错了

//idText 在所有电视中使用

如下所示

```
TextView idText = new TextView(this);
        idText.setText(row.get(0).toString());
        tableRow.addView(idText);

        TextView storeText = new TextView(this);
        storeText.setText(row.get(1).toString());
        tableRow.addView(storeText);

        TextView maggiText = new TextView(this);
        maggiText.setText(row.get(2).toString());
        tableRow.addView(maggiText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:53:42.647

ArrayList row = data.get(position);

```
for(int i=0; i<row.size(); i++)
{
    TextView text= new TextView(this);
    idText.setText(row.get(i).toString());
    tableRow.addView(idText);
} 
```

# iphone - 如何使用objective-c在音频文件上添加回声效果

> ID：11793310
> 
> 赞同：1
> 
> 时间：2012-08-03T09:48:59.520
> 
> 标签：iphone, objective-c, effects, audio

我正在开发一个应用程序，我想在其中使用 Objective-c 在录制的音频文件中添加回声效果。

我正在使用 DIRAC 来添加其他效果，例如男人对女人，慢，快。

现在我必须制作录制声音的机器人声音。对于机器人声音，我需要添加回声效果

请帮我这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:59:43.833

回声非常简单。您需要一条延迟线，并且需要很少的乘法。假设一个通道和音频已经用浮点表示，延迟线看起来像这样（在类似 C 的伪代码中）：

```
int LENGTH = samplerate * seconds; //seconds is the desired length of the delay in seconds
float buffer[ LENGTH ];
int readIndex = 0, writeIndex = LENGTH - 1;

float delayLine.readNext( float x ) {
    float ret = buffer[readIndex];
    ++readIndex;
    if( readIndex >= LENGTH )
        readIndex = 0;
    return ret;
}
void delayLine.writeNext( float x ) {
    buffer[ writeIndex ] = x;
    ++writeIndex;
    if( writeIndex >= LENGTH )
        writeIndex = 0;
} 
```

不要忘记将缓冲区初始化为全零。

这就是你的延迟线。基本用法是这样的：

```
float singleDelay( float x ) {
    delayLine.writeNext(x);
    return delayLine.readNext( x );
} 
```

但你不会听到太大的不同：它会在稍后出现。如果你想听到一个回声，你需要这样的东西：

```
float singleEcho( float x, float g ) {
    delayLine.writeNext(x);
    return x + g * delayLine.readNext( x );
} 
```

其中 g 是某个常数，通常介于 0 和 1 之间。

现在说你想要一个回声流：“HELLO...Hello...hello...h...”就像这样。你只需要做更多的工作：

```
float echo( float x, float g ) {
   float ret = x + g * delayLine.readNext( x );
   delayLine.writeNext( ret );
   return ret;
} 
```

注意这次整个事情的输出是如何反馈到延迟线的，而不是输入。在这种情况下，|g| 非常重要。< 1。

您可能会在此处遇到非规范化问题。我不记得这是否是 iOS 上的问题，但我不这么认为。

# c++ - 在 C++ 中稳定一个值

> ID：11793312
> 
> 赞同：2
> 
> 时间：2012-08-03T09:49:02.383
> 
> 标签：c++, math, modulus

我有一个变量，它是同余模 x=y(mod 360)，这意味着 y 在 0 - 360 之间变化，如果该值大于 360，它再次变为 0。例如 x=5 表示 y = 365 。

我写了这个函数来稳定 y ，所以如果 x 和 previousx 之间的差异大于 5 ，那么我得到 x 否则 previousx 。

```
float stabilize(float x,float previous){

    if(fabs(x-previousx)<5)
    {
        return previousx;
    }
    else
    {
        return x;
    }

} 
```

这在 0 到 360 之间工作正常但是这在 360 和 0 的边界条件下失败。当 y 是接近 0 的值（例如 0.3）并且之前的 y 接近 360（例如 359）时，我如何稳定该值。所以这里计算的差异是 359 - .3 = 358.7 。但我希望它是 1.3 的模 360 差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:57:40.343

类似的东西`if(fabs(x-previousx)<5 || fabs(x-previousx)>355)`呢？鉴于输入数据是 mod 360，如果差异足够大，则意味着两个值都足够接近边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:57:04.503

您可以减去原始数字并取 fabs（结果）的模 360：

例如：

```
359 - 720.3 = -361.3
fabs(-361.3) = 361.3
361.3 % 360 = 1.3 
```

# javascript - 解释 javascript：赋值失败

> ID：11793317
> 
> 赞同：3
> 
> 时间：2012-08-03T09:49:10.567
> 
> 标签：javascript

```
var sc = new stuCore();
function stuCore() {
    this.readyPages = [];
    this.once = true;
    var self = this;

    // gets called asynchronously
    this.doPrepPage = function (page){

            if(self.once == true){
                   // still gets executed every time, assignment fails
                   self.once = false;
                   doSomeStuffOnce();
            }
    };

   this.addReadyPage = function (pageid) {

            console.log("readypage called");
            this.readyPages.push(pageid);
            if (!$.inArray(pageid, self.readyPages) != -1) {
                    this.doPrepPage(pageid);
            }
    };

} 
```

为什么这个任务失败了？我以为我知道 js 的基础知识，但我对此感到困惑。此外，什么是可能的解决方案？首先调用构造函数并在那里设置变量？

**编辑：** 在其他一些脚本中被这样调用：

```
 sc.addReadyPage(self.id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:07:12.120

该`jQuery.inArray`函数将返回给定值的包含数组中的索引。您的脚本`pageid`在`this.readyPages`检查它是否存在于`self.readyPages`. `this.readyPages`和`self.readyPages`是相同的数组引用，因此结果将始终为零或更大，因此调用的条件`doPrepPage`将永远不会运行。

您可以尝试切换他们的顺序：

```
this.addReadyPage = function (pageid) {
        console.log("readypage called");
        if ($.inArray(pageid, self.readyPages) != -1) {
                this.readyPages.push(pageid);
                this.doPrepPage(pageid);
        }
}; 
```

（编辑：删除了额外的`!`，谢谢@chumkiu）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:59:58.713

如果我理解正确，您将调用`this.doPrepPage`as `<insert variable name here>.doPrepPage`？

如果是这种情况，那么您`var self`将传递给匿名函数并存储在那里，因此每次调用`this.doPrepPage`它时都会使用`self`.

尝试设置`self`为全局变量，这样它将永久修改`self`，因此每次`this.doPrepPage`调用它都会使用更新的变量。

# c++ - 八度和 SWIG。mkoctfile 抱怨：无法识别的参数

> ID：11793319
> 
> 赞同：0
> 
> 时间：2012-08-03T09:49:18.547
> 
> 标签：c++, swig, octave, quantlib

我正在使用 SWIG 和 mkoctfile 编写与 Quantlib 的轻量级 Octave 绑定。我正在关注 SWIG 和 Octave 主页上的文档。

从 SWIG 文档中：

> **27.2.1 编译动态模块**
> 
> Octave 模块是具有“.oct”后缀的 DLL/共享对象。构建 oct 文件通常使用 mkoctfile 命令（在 Octave 本身内或从 shell）完成。例如，
> 
> $ swig -octave -c++ example.i -o example_wrap.cxx $ mkoctfile example_wrap.cxx example.c
> 
> 其中 example.c 是包含 gcd() 实现的文件。

这些是我到目前为止的文件：

*   我的 SWIG 接口文件 quantlib-octave.i
*   我的函数实现 quantlib-octave.cpp
*   使用 SWIG 生成的胶水包装文件：quantlib-octave_wrap.cxx

这是我调用 mkoctfile 时的 CLI 输出：

> root@yourbox:~/src/quantlib-octave$ mkoctfile quantlib-octave_wrap.cxx quantlib-octave.cpp mkoctfile: 无法识别的参数 quantlib-octave_wrap.cxx

我键入时显示的帮助信息`mkoctfile -h`不是很有用。

有谁知道为什么 mkoctfile 抱怨？

**版本信息**

```
SWIG Version 2.0.4
Compiled with g++ [x86_64-unknown-linux-gnu]
Configured options: +pcre

mkoctfile, version 3.6.0

Octave: 3.6.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:38:23.327

我设法通过将生成的文件的扩展名从 .cxx 重命名为 .cpp 来实现这一点。

也许有更好的解决方案？

# java - 使用 EclipseLink JPA 绑定大于 255 个字符的字符串

> ID：11793320
> 
> 赞同：5
> 
> 时间：2012-08-03T09:49:20.440
> 
> 标签：java, sql, jpa, eclipselink

我继承了一个项目，该项目使用 EclipseLink JPA 将对象持久保存到任何 SQL 数据库中。目前，它带有本地 Derby DB 发行版。在一些测试中，我发现程序会抛出以下异常：

> 012-08-03 10:21:11.357--UnitOfWork(32349505)--异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException 内部异常： java.sql.SQLDataException：在尝试将 VARCHAR '一些必须非常长的文本'缩小到长度 255 时遇到截断错误。错误代码：20000

显然 VARCHAR 不（通常）适合存储大于 255 个字符的字符串，但我没有找到明确将对象变量分配给 VARCHAR 字段的代码片段。我知道 JPA 或 EclipseLink 会自动为您分配这个，所以我的问题是：

如何确保 EclipseLink / JPA 存储大于 255 个字符的字符串？

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T10:01:48.010

您需要对属性进行注释，以便将其持久化为`Clob`. 使用`@Lob`；对于`String`s 这将默认为`Clob`. 有关文档，请参见[此处](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Lob)。`VARCHAR`当然，如果您手动创建数据库，则需要确保数据库列类型正确（即不正确）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:18:44.650

在许多环境中，String 类型的 @Column 的限制大于 255，例如 4kB。您需要使用“长度”来更改默认值 255

@列（长度=1024）

字符串样本；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:57:03.743

我向您展示了绑定大于 255 个字符的字符串的数据类型。看到这个；

Java 类型 - byte[]、java.lang.Byte[]、java.sql.Clob

Java DB、Derby、CloudScape - CLOB(64000)

甲骨文 - 长

DB2 - CLOB (64000)

Sybase - 文本

MSSQL - 文本

MySQL - 文本（64000）

# iphone - 从 tableviewcontroller 加载 tableviewcontroller 不起作用

> ID：11793323
> 
> 赞同：0
> 
> 时间：2012-08-03T09:49:32.600
> 
> 标签：iphone, ios, xcode, uitableview, uinavigationcontroller

我创建了一个基于视图的应用程序并在其中添加了两个表视图控制器。这是我按下 Viewcontroller 按钮的事件流-> 加载表视图控制器，如果选择了一个单元格-> 显示第二个表控制器。

这是我的代码。在 Viewcontroller.m

```
-(IBAction)product:(id)sender
 {
Products *sec=[[Products alloc]init];

UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:sec];

[self presentModalViewController:nav animated:YES];    
} 
```

在我的第一个名为 products.m 的 Tableview 控制器中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.

 Description *detailViewController = [[Description alloc] initWithNibName:@"Description" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];

 [detailViewController release];

} 
```

我的第二个 TableView 控制器命名为 description。现在问题是我的第二个 tableview 控制器没有显示，我遇到的问题是

```
 *** Assertion failure in -[UITableView _createPreparedCellForGlobalRow:withIndexPath:],     /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061
 2012-08-03 15:10:51.016 jothi R&D[1112:f803] *** Terminating app due to uncaught  exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a  cell from tableView:cellForRowAtIndexPath:'
*** First throw call stack:
(0x13d3022 0x1564cd6 0x137ba48 0x9b42cb 0xb7d28 0xb83ce 0xa3cbd 0xb26f1 0x5bd21 0x13d4e42  0x1d8b679 0x1d95579 0x1d1a4f7 0x1d1c3f6 0x1d1bad0 0x13a799e 0x133e640 0x130a4c6 0x1309d84  0x1309c9b 0x12bc7d8 0x12bc88a 0x1d626 0x22a2 0x2215 0x1)
terminate called throwing an exception 
```

但是，如果我尝试通过替换 products.m 中的描述来显示 Viewcontroller，它会起作用..请指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:42:16.047

这里的解决方案是在第二个 Tableview 控制器中添加条件如果单元格为 nil 它必须显示表格视图样式。在中添加以下代码

> cellForRowAtIndexpath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)  
{        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}

// Configure the cell...

return cell;
} 
```

# embed - 线程：在 ARM cortex A8 上运行 USB 键盘

> ID：11793331
> 
> 赞同：0
> 
> 时间：2012-08-03T09:50:25.113
> 
> 标签：embed, embedded-linux

我是嵌入式 Linux 的新手。我想通过线程使用我的 USB 键盘。我知道线程的概念，但我想知道如何使用线程的概念来检测它。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:24:39.920

如果我理解正确，您有一个嵌入式 linux 板，现在您想连接 USB 键盘并将其与嵌入式 linux 板上的应用程序一起使用？如果这是正确的，那么你不需要对线程做任何事情。您需要做的是为该键盘安装驱动程序。为此，您应该查看内核构建配置以查看是否启用了 USB 键盘驱动程序（HID 驱动程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:49:25.257

如果您不想使用非阻塞 I/O 来读取键盘，您可以使用一个线程来执行阻塞读取并在输入可用时向您的主线程发出信号（或设置一个可以轮询的标志）。

除了阻塞之外，您可能还必须与线路模式的默认设置抗衡。

在单线程程序中轮询或响应单个字符的常见选择是更改终端模式设置 - 请参阅 termios、stty 等的手册页。但是，如果您的程序退出，您将需要将它们更改回来。

另一种选择是跳过整个终端基础设施并直接通过 /dev/input/ 读取输入事件。或者在极端情况下，您可以跳过 USB HID 驱动程序并为 USB 键盘编写自己的内核驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T08:45:26.053

您可以根据您的要求使用以下任一种：

1.  阻塞 I/O
2.  非阻塞 I/O

对于非阻塞 I/O，请尝试基于多线程的方法。对于阻塞的 I/O，尝试基于 epoll() 系统调用的方法。

关于检测键盘的方法，您可以尝试以下方法：

1.  使用文件 /proc/bus/input/devices 来检测设备，但在某些系统中重新启动之前它不会更新。

2.  使用 /dev/input/eventN 和 ioctl() 调用来检测事件位。事件接口非常有用，因为它将原始事件暴露给用户空间。

# css - css：插入到 div 在父 div 中彼此浮动

> ID：11793335
> 
> 赞同：1
> 
> 时间：2012-08-03T09:50:43.490
> 
> 标签：css, html, css-float, vertical-alignment

我使用了[Replacing H1 text with a logo image: best method for SEO and accessibility](https://stackoverflow.com/questions/665037/replacing-h1-text-with-a-logo-image-best-method-for-seo-and-accessibility)中的解决方案，但我需要在彼此下方插入两个 div，每个 div 都向右浮动。我有一些问题。如何解决？

请在此处查看示例：http: [//jsfiddle.net/QnFZT/1/](http://jsfiddle.net/QnFZT/1/)（**已更新**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:10:18.423

将图像放在浮动 div 中解决了它。见[http://jsfiddle.net/dgSCy/1/](http://jsfiddle.net/dgSCy/1/)

但是你绝对不应该将块元素放在内联元素中，例如标题......

# java - 休眠检测级联插入

> ID：11793336
> 
> 赞同：4
> 
> 时间：2012-08-03T09:50:44.113
> 
> 标签：java, hibernate

我正在使用休眠来持久化我的实体。有没有办法检测一个实体是否会在当前事务中新创建？我不能使用`PostInsertEventListener`，因为我必须向休眠操作队列添加其他元素。

这`PersistEventListener`是不够的，因为它不会检测级联插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:32:55.320

阅读 pd40 的评论后，我尝试使用拦截器。我发现拦截器方法：

`public Boolean isTransient(Object entity)`

即使在级联插入上也将始终在新创建对象时调用。

由于此方法将**在** `PersistEventLister/MergeEventListener`我有可能将其他元素添加到休眠操作队列之前被调用。

所以感谢 pd40 给我提示。

# knockout.js - 即使我将其处理掉，计算出的 observable 仍然会触发写入。这是正确的行为吗？

> ID：11793346
> 
> 赞同：1
> 
> 时间：2012-08-03T09:51:20.540
> 
> 标签：knockout.js

```
function MyViewModel() {
    var self = this;
    this.firstName = ko.observable('Planet');
    this.lastName = ko.observable('Earth');
    this.computedState = ko.observable(false);

    this.fullName = ko.computed({
        read: function () {
            console.log("READ");            
            return this.firstName() + " " + this.lastName(); 
        },
        write: function (value) {
            console.log("WRITE");    
            var lastSpacePos = value.lastIndexOf(" ");
            if (lastSpacePos > 0) { // Ignore values with no space character
                this.firstName(value.substring(0, lastSpacePos)); // Update "firstName"
                this.lastName(value.substring(lastSpacePos + 1)); // Update "lastName"
            }
        },
        owner: this,

        disposeWhen : function(){ return self.computedState(); }
    });
}

ko.applyBindings(new MyViewModel()); 
```

即使我将其处理掉，计算出的 observable 仍然会触发写入。这是正确的行为吗？我不明白原因。 [JSFIDDLE 示例](http://jsfiddle.net/gurkavcu/smwwb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:49:07.247

处理一个计算出的 observable 将使它清理所有的订阅。因此，虽然您仍然可以对其进行写入，但该`read`函数将不会再次运行。Disposal 不会取消计算的值，它是为了确保没有延迟订阅。

例如，在这个更新的示例中，尝试处理计算并更改`firstName`字段。

[http://jsfiddle.net/rniemeyer/smwwb/13/](http://jsfiddle.net/rniemeyer/smwwb/13/)

# iphone - 如何从 xcode 4.3.1 在 Ipod Touch 上测试应用程序？

> ID：11793347
> 
> 赞同：0
> 
> 时间：2012-08-03T09:51:26.713
> 
> 标签：iphone, ios, ios5

我对 iOS 开发非常陌生。我正在开发一个应用程序，目前我正在模拟器上对其进行测试。现在我需要在 ipod touch 上测试应用程序。我试图测试，但它说

`The identity 'iPhone Developer' doesn't match any valid, non-expired certificate/private key pair in the default keychain`

**我正在寻找步骤或任何帖子。**非常感激。

我获得了 Apple 开发者许可证。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:10:26.543

你必须跳过一个大圈 :) 代码签名

1.  您需要获得开发人员证书。转到应用程序/实用程序并运行钥匙串访问。

![在此处输入图像描述](../Images/46860aa37a1302163b8305f1bc9b9b78.png)

向 CA 请求证书 按照这些说明进行操作。这证明了你。

接下来，验证您的设备。

1.  登录您的开发者帐户。

2.  转到供应门户（来自主开发页面的链接）

3.  左侧 > 设备（您可以从 iTunes 或 Xcode 管理器获取 UUID）。添加您的设备。下载设备证书。双击它以将其添加到 Xcode。

认证您的应用程序。

供应门户中的同一页面。

获取新的应用程序 ID。

然后转到配置。

重复证书过程，为您的应用获取开发者分发证书。

下载这些，看看在 Xcode Organizer 中的样子。

最后，在应用程序本身的主代码页中：

![在此处输入图像描述](../Images/488f205ca6e5f61a0f09e44e7d583294.png)

看看您是否可以将代码签名设置为您的开发人员证书。

你会知道什么时候这一切都设置好了，当你查看 Xcode 方案时，你应该会看到列出的 iPod。

![在此处输入图像描述](../Images/1e2000acc8a8429403153f00dce11410.png)

在此过程中，您可能会在各个方面陷入困境。我做到了。您可能想询问（或寻找）特定问题，无论是 AppID、开发人员证书还是代码签名。

Apple 网站上有一些视频，但它们使用的是旧版本的 Xcode..

希望这可以帮助。

# javascript - 带有three.js的glsl中if语句的奇怪行为

> ID：11793362
> 
> 赞同：0
> 
> 时间：2012-08-03T09:52:26.027
> 
> 标签：javascript, glsl, three.js

我的着色器中的 if 语句有问题：这是我的着色器和代码：[代码和着色器](http://pastebin.com/6xfYe4kF)

我有几个 WebglRenderTarget ：

在 target_color 中，我将场景设置为任意颜色。我还有一个 WebglRenderTarget target_position（见图）。最后的着色器是 issue_shader，它使用两个纹理 target_color 和 target_position，你可以在图像中看到我所期望的和我得到的。

[图片](http://postimage.org/image/r2xg29rfp/)

所以我的着色器中有一个奇怪的行为是

```
"if(z_min<0.6){if(FOCUS.a<0.3){col=RED;}else{col=WHITE;}}else{col=GREEN;};", 
```

它应该具有相同的行为（图像中的预期结果）：

```
"if(z_min<0.6){col=WHITE;}else{col=GREEN;}", 
```

问题是什么 ？

谢谢你。

# javascript - TinyMCE初始化后用javascript设置textarea值

> ID：11793368
> 
> 赞同：34
> 
> 时间：2012-08-03T09:52:51.477
> 
> 标签：javascript, html, tinymce, textarea

我有一个 textarea，我在那个 textarea 上使用 tinyMCE。

我实际上正在做的是，当页面打开时，我正在用一些文本填充文本区域，然后我正在初始化 tinyMCE。

问题是当我尝试在 tinyMCE 初始化后更改 textarea 的值时，什么也没有发生。

这是一个例子。

1.  创建文本区域：

    ```
    <textarea style="width: 95%;" name="title"  id="title"></textarea> 
    ```

2.  填充文本区域：

    ```
    $('#title').html("someText"); 
    ```

3.  初始化 tinyMCE

    ```
    tinyMCE.init({
            // General options
            mode : "specific_textareas",
            theme : "advanced",
            width: "100%",
            plugins : "pagebreak,paste,fullscreen,visualchars",

            // Theme options
            theme_advanced_buttons1 : "code,|,bold,italic,underline,|,sub,sup,|,charmap,|,fullscreen,|,bullist,numlist,|,pasteword",
            theme_advanced_buttons2 :"",
            theme_advanced_buttons3 :"",
            theme_advanced_buttons4 :"",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
            valid_elements : "i,sub,sup",
            invalid_elements : "p, script",
            editor_deselector : "mceOthers"
        }); 
    ```

4.  我想更改 textview 的内容（但它不起作用）

我尝试使用与之前相同的方法来初始化 tinyMCE

```
 $('#title').html("someModifiedText"); // does not work 
```

我也尝试删除 tinyMCE：

```
 if(tinyMCE.getInstanceById('title'))
    removeTinyMCE("title"); 
```

和

```
function removeTinyMCE (dialogName) {
    tinyMCE.execCommand('mceFocus', false, dialogName);
    tinyMCE.execCommand('mceRemoveControl', false, dialogName); 
```

}

并重用：

```
 $('#title').html("someModifiedText"); // does not work 
```

我没有想法......非常感谢你的帮助......

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-03T10:00:09.023

这里的问题是，如果您在 textarea 中输入文本或 html，您将看不到任何内容。当 tinymce 初始化时，您的 textarea 会被隐藏。然后您看到的是一个内容可编辑的 iframe，用于编辑和设置内容样式。有几个事件会导致 tinymce 将其内容写入编辑器的 html 源元素（在您的情况下是您的 textarea）。

如果要设置编辑器的内容（可见），则需要调用类似

```
tinymce.get('title').setContent('<p>This is my new content!</p>'); 
```

您也可以使用以下命令直接访问 dom 元素

```
tinymce.get('title').getBody().innerHTML = '<p>This is my new content!</p>'; 
```

或使用 jQuery

```
$(tinymce.get('title').getBody()).html('<p>This is my new content!</p>'); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-12-02T03:05:55.110

您可以使用`tinyMCE.activeEditor.setContent('<span>some</span> html');`

[检查这个答案](https://stackoverflow.com/questions/11780766/setcontent-of-an-textarea-with-tinymce/34034158#34034158)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-27T11:54:24.757

这对我有用

```
$("#description").val(content); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-24T16:05:26.047

```
<textarea id="content" name="content">{{html_entity_decode($yourstringdata)}}</textarea> 
```

这对我有用，解码您的 html 数据并将其放在开始和结束 textarea 标记之间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-04T12:02:53.953

通过确保`setContent`在文档准备好后完成，我解决了同样的问题，所以首先；

```
script(type="text/javascript").
  tinymce.init({
    selector: '#title',
    height: 350,
    menubar: false
  }); 
```

然后

```
script(type='text/javascript').
  $(document).ready(function(){
    tinymce.get('title').setContent('<span>someText</span> is html');
  }) 
```

上面是哈巴狗的代码，但关键是 - 如前所述 - 将其加载到准备好的文档中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T13:01:11.313

一旦调用这个

```
tinymce.triggerSave(); 
```

然后 tinymce 的值将被转移到原始的 textarea 值。因此，您可以从普通的 textarea 获得它。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-07-10T00:57:08.573

这个对我有用。只需将其放在您的 html 代码中，而不是使用 tinymce

```
 <textarea> html CONTENT</textarea> 
```

# c - 如何将 VSTS .lib 转换为 MinGW .a？

> ID：11793370
> 
> 赞同：6
> 
> 时间：2012-08-03T09:53:02.517
> 
> 标签：c, visual-studio, static, linker, mingw

我有一个用 Visual Studio 编译的静态库，我想从 MinGW 链接到它。

我尝试更改后缀，但收到一堆警告，例如：`Warning: .drectve /DEFAULTLIB:"uuid.lib" /DEFAULTLIB:"uuid.lib" /DEFAULTLIB:"MSVCRT" /DEFAULTLIB:"OLDNAMES" ' unrecognized`.

还有一些错误，包括：`./libetpan.a(Release_ssl/mailimap.obj):(.text[_mailimap_noop]+0x7): undefined reference to`___security_cookie'`。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:54:31.687

您可以尝试将 .lib 转换为 .a

[http://code.google.com/p/lib2a/](http://code.google.com/p/lib2a/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-14T20:37:07.723

.lib 和 .a 格式不同。更改文件扩展名是对链接器的欺骗，这就是它不起作用的原因。

如果它是您尝试链接的 32 位库，它应该“正常工作”。MinGW 支持 32 位 .lib 文件。如果没有，请提交错误报告。

如果它是 64 位库，并且您使用的是 MinGW-w64 或基于它的东西（如 TDM-GCC 64 位版本），请参阅[MinGW-w64 FAQ 条目](http://sourceforge.net/apps/trac/mingw-w64/wiki/Answer%2064%20bit%20MSVC-generated%20x64%20.lib)：

```
gendef mylib.dll
dlltool --as-flags=--64 -m i386:x86-64 -k --output-lib libmylib.a --input-def mylib.def 
```

# database - 特定的数据库设计 - 多行与多列

> ID：11793372
> 
> 赞同：1
> 
> 时间：2012-08-03T09:53:04.123
> 
> 标签：database

这个问题很具体，请从速度、规范化概念和表维护角度根据您的观点进行回答。

我正在设计一个需要存储友谊信息的社交网站。我设计了包含 auto_increment_integer id、userId1 (int) 和 userId2 (int) 的表。为了存储每个友谊，我可以有两个选择：

1.  每个友谊添加一个条目
2.  添加两个带有 id1_val、id2_val 和 id2_val、id1_val 的条目

第一个选项有一个优势，因为需要存储的行数更少（即每个友谊只有一个），而第二种方法提供更快的搜索，因为搜索查询只包含一列。使用索引 userId1 列，搜索变得更快。

任何人都可以用上述任何方法提出任何其他优点/缺点吗？

# android - 音频文件未播放

> ID：11793373
> 
> 赞同：0
> 
> 时间：2012-08-03T09:53:05.017
> 
> 标签：android, onclick, media, sd-card, playing

我正在创建一个记录语音并将其存储在 SD 卡中的应用程序。然后我打开
这个文件并想通过单击相应的文件来播放或其他选项。
但是，当我单击该列表项时，它不会播放。我不明白问题出在哪里。这是我的代码。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.listofaudiorecord);
      init_phone_music_grid();
}

private void init_phone_music_grid() {
      System.gc();
      String[] proj = { MediaStore.Audio.Media._ID,
MediaStore.Audio.Media.DATA,
MediaStore.Audio.Media.DISPLAY_NAME,
MediaStore.Video.Media.SIZE };
      musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
 proj, null, null, null);
      count = musiccursor.getCount();
      musiclist = (ListView) findViewById(R.id.PhoneMusicList);
      musiclist.setAdapter(new MusicAdapter(getApplicationContext()));

      musiclist.setOnItemClickListener(musicgridlistener);
      mMediaPlayer = new MediaPlayer();
  }

   private OnItemClickListener musicgridlistener = new OnItemClickListener() {
      public void onItemClick(AdapterView parent, View v, int position,
          long id) {
            System.gc();
            music_column_index = musiccursor
        .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
            musiccursor.moveToPosition(position);
            String filename = musiccursor.getString(music_column_index);

                  try {
                       if (mMediaPlayer.isPlaying()) {
                            mMediaPlayer.reset();
                       }
                       mMediaPlayer.setDataSource(filename);
                       mMediaPlayer.prepare();
                       mMediaPlayer.start();
                 } catch (Exception e) {

                 }
           }
        };

        public class MusicAdapter extends BaseAdapter {
          private Context mContext;

          public MusicAdapter(Context c) {
                mContext = c;
          }

          public int getCount() {
                return count;
          }

          public Object getItem(int position) {
                return position;
          }

          public long getItemId(int position) {
                return position;
          }

          public View getView(int position, View convertView, ViewGroup parent) {
                System.gc();
                TextView tv = new TextView(mContext.getApplicationContext());
                String id = null;
                if (convertView == null) {
                      music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
                      musiccursor.moveToPosition(position);
                      id = musiccursor.getString(music_column_index);
                      music_column_index = musiccursor
                 .getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
                      musiccursor.moveToPosition(position);
                      id += " Size(KB):" + musiccursor.getString(music_column_index);
                      tv.setText(id);
                } else
                      tv = (TextView) convertView;
                return tv;
          }
    }
} 
```

请给我任何提示。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:58:37.180

换两个怎么样

```
musiclist.setOnItemClickListener(musicgridlistener);
mMediaPlayer = new MediaPlayer(); 
```

对此

```
mMediaPlayer = new MediaPlayer();
musiclist.setOnItemClickListener(musicgridlistener); 
```

或将 MediaPlayer 引用放在`onItemClick()`

# c# - C# interface instance-like...帮我理解

> ID：11793374
> 
> 赞同：-1
> 
> 时间：2012-08-03T09:53:13.953
> 
> 标签：c#, interface, instance

> **可能重复：**
> [接口：为什么我似乎无法掌握它们？](https://stackoverflow.com/questions/122883/interfaces-why-cant-i-seem-to-grasp-them)

要使用我刚刚发现的库，我需要先实现一些接口。但是有些方法似乎要求具有某些接口类型的对象......如果我有一个名为 MyInterface 的接口，我可以编写如下内容：

```
 MyInterface shoe; 
```

这对我来说真的没有意义。有人可以教我这个概念吗？我读了这个： http: [//www.dotnetperls.com/interface](http://www.dotnetperls.com/interface)但它并没有真正帮助，我认为这个概念比这里介绍的要复杂一些。

谢谢 ！

编辑 ：

对于那些想知道的人，我对接口并不陌生，但这是我第一次遇到这样的使用它们。对于那些将我的问题降级的人，我确实进行了搜索，但显然很不走运。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:00:14.360

一个简单的解释：一个班级就像一个公司。如果它声称是销售公司，它必须提供销售服务。它自称是火车工厂，它必须能够制造火车。如果国家铁路要购买火车，它可以使用任何可以生产火车的公司。

接口描述了一个类必须能够做什么。这就像一份合同。每个想要拥有接口的类都必须履行该合同并能够执行合同规定的事情。类实例可以通过类方法执行动作。

但是，合同并没有*说明*班级应该如何做。所以一个类可以实现它想要的功能，或者换句话说，*实现接口*。

```
public Train
{
    private price;
    public Train(float price) { this.price = price; }
}

public IMyInterface
{
   Train MakeTrain();
}

public ExpensiveTrainFactory : ITrainProducer
{
    // make a luxury, expensive train
    public Train MakeTrain() { return new Train(4000.0); }
}

public CheapTrainFactory : ITrainProducer
{
    // make a cheap train
    public Train MakeTrain() { return new Train(500.0); }
}

public NationalRailways
{
    List<Train> trains;
    public NationalRailways()
    {
        this.trains = new List<Train>();
    }
    public Train BuyTrain(ITrainProducer factory)
    {
        // you can call MakeTrain() because the ITrainProducer guarantees that it can make trains
        trains.Add(factory.MakeTrain());
    }
} 
```

然后在您的代码中：

```
NationalRailways railway = new NationalRailways();
ExpensiveTrainFactory expFactory = new ExpensiveTrainFactory();
CheapTrainFactory cheapFactory = new CheapTrainFactory();

// expFactory implements ITrainProducer, so I can use it from BuyTrain(ITrainProducer)
railways.BuyTrain(expFactory);
// cheapFactory implements ITrainProducer, so I can use it from BuyTrain(ITrainProducer)  as well
railways.BuyTrain(cheapFactory); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:03:51.883

您可以声明一个接口，就像在您的示例中一样。但是，您不能实例化一个。

```
MyInterface shoe = new MyInterface (); 
```

以上不是合法代码。由于接口只是描述一个合约，它没有实现细节，这留给客户端代码（你）。因此，能够创建 MyInterface 的实际实例是没有意义的。

你可以做的是有一个类 SomeClass，实现 MyInterface 契约：

```
SomeClass: MyInterface
{
  //implement the methods of MyInterface. All of them, to fulfill the contract.
} 
```

然后您可以执行以下操作：

```
MyInterface shoe = new SomeClass(); 
```

由于 SomeClass 实现了 MyInterface 合约，所以上面是合法的。您可以创建 SomeClass 的实例，因为它包含实现细节。

然后您可以在此基础上构建并创建更多实现 MyInterface 的类。

这样做的好处是你可以有一个方法，例如：

```
void someMethod (MyInterface test)
{

} 
```

您可以将此方法传递给 SomeClass 对象或您创建的任何其他实现 MyInterface 的类。

然后在这个方法中，你可以在不知道传递给你的确切对象的情况下调用合约包含的方法。这使得编写未来的代码更容易。您可以创建新对象，只要它们实现 MyInterface，就可以将此对象传递给 someMethod 而无需更改方法的声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T09:57:13.860

你是对的，你不能直接创建一个接口的实例。但是，您*可以*创建*实现*该接口的某种类型的实例。

说我有一个界面

```
public IMyInterface
{
   void DoSomething();
} 
```

（注意：通常接口名称以“I”开头）

另外我有课

```
public MyClass: IMyInterface
{
    public void DoSomething() { ... }
} 
```

那我可以做

```
IMyInterface something = new MyClass(); 
```

尽管您经常调用一些（工厂）方法来返回一些实现该接口的类，而不是直接执行`new`.

通过使用接口作为变量的类型，您可以指定您只对那里指定的方法和属性感兴趣。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T10:07:13.673

在 C# 中，每个值都有两种不同的类型：*表观*类型和*实际*类型。表观类型是保存该值的变量的类型，而实际类型来自用于创建该值的构造函数。假设我们有以下类：

```
class MyClass : BaseClass, IMyInterface {
    /* ... */
} 
```

那么以下所有声明都是有效的：

```
object obj1 = new MyClass();
IMyInterface obj2 = new MyClass();
BaseClass obj3 = new MyClass();
MyClass obj4 = new MyClass(); 
```

表观类型和实际类型如下：

```
object obj1 = new MyClass(); /* apparent: object, actual: MyClass */
IMyInterface obj2 = new MyClass(); /* apparent: IMyInterface, actual: MyClass */
BaseClass obj3 = new MyClass(); /* apparent: BaseClass, actual: MyClass */
MyClass obj4 = new MyClass(); /* apparent: MyClass, actual: MyClass */ 
```

当你操作一个对象（调用它的方法等）时，你会假设对象有它的*明显*类型——你不能调用任何特定于类的方法`object`。表观类型规定了对象外部可见的对象*接口。*

引擎盖下实际发生的事情是根据对象的实际类型完成的 - 例如，如果您覆盖`ToString`类的方法，则在以下代码中调用被覆盖的方法：

```
object obj = new MyClass();
Console.WriteLine(obj.ToString()); 
```

实际类型决定了对象的功能是如何*实现*的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T10:02:12.790

接口在类和调用它的代码之间建立了契约。它们还允许您拥有实现相同接口但执行不同操作或事件的类似类，而不必知道您实际使用的是哪个类。作为示例，这可能更有意义，因此让我根据您的链接使用相同的示例，并进行一些修改：

```
using System;

interface IPerl
{
    void Read();
}

class Test : IPerl
{
    public void Read()
    {
    Console.WriteLine("Read Test");
    }
}

class Test1 : IPerl
{
    public void Read()
    {
    Console.WriteLine("Read Test1");
    }
}

class Program
{
    static void Main()
    {
    IPerl perl = new Test(); // Create instance of Test.
    perl.Read(); // Call method on interface output will be different then Test1.

        perl = new Test1(); // Create instance of Test1.
    perl.Read(); // Call method on interface output will be different then Test.

    }
} 
```

输出：

1.  “阅读测试”
2.  “阅读测试1”

我希望这会有所帮助。

谢谢 Ankur

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T09:58:12.560

**什么是接口**

接口基本上定义了类或结构的蓝图。接口的编程定义看起来非常类似于类，但没有实现任何东西。接口定义属性、方法、事件和索引器，但接口不定义任何这些的实现。它只是宣布它们的存在。接口实际上不会定义任何功能。它们只是定义了与类进行交互的方式。

**什么接口不是**

接口不应与继承相混淆。它们是两个非常不同的东西。继承会定义很多实现，并用于代码重用。接口只是对必须如何与实现类进行通信的定义。这就像一份书面合同。“签署”合同的类将同意以它希望的任何方式执行某些指定的操作，但它必须执行指定的操作。

**何时使用接口**

接口允许我们为类将要实现的内容创建漂亮的布局。由于接口给我们的保证，当许多组件使用相同的接口时，它允许我们轻松地将一个组件与另一个使用相同接口的组件互换。动态程序由此开始很容易形成。

有关更多信息，请访问有关[Understanding_Interfaces_in_C#的帖子](http://aspalliance.com/1516_Understanding_Interfaces_in_C.all)

# c - Windows 应用程序 ANSI 到 Unicode

> ID：11793377
> 
> 赞同：0
> 
> 时间：2012-08-03T09:53:25.250
> 
> 标签：c, windows, windows-7, unicode, ansi

我在开发一个只支持 ANSI 的大型 Windows 应用程序时犯了一个错误。如果我的应用程序不支持 Unicode，所有的影响是什么？另外，我计划将我的代码迁移到 Unicode。由于任务的关键时间因素，我完全被阻止了，有人可以帮助我吗？

我的目标环境：XP、Windows Vista、Windows 7（32 位和 64 位）。如果我的应用程序只支持英语就足够了，但它应该可以在世界任何地方运行。

注意：我没有从用户那里获得字符串形式的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:25:07.980

> 如果我的应用程序不支持 unicode，所有的影响是什么？

它可能无法处理 Unicode

*   UI 元素（没问题是您的 UI 没有任何文本输入功能）
*   文件路径
*   文本文件内容
*   翻译信息（没问题，因为你说英语就足够了）
*   XML 等文件格式
*   注册表数据（我认为）

我不会声称已列出*所有*影响。我将把它变成一个社区 wiki，随时添加到列表中。

> 我打算将我的代码迁移到 Unicode？[...] 有人可以帮助我吗？

第一句话不是问题，是吗？我怀疑 SO 是寻找可以帮助您移植“大型”应用程序的人的正确位置，除非您遇到困难时回答特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:25:17.083

我想这个 MSDN 链接应该可以帮助您更好地理解使用 unicode。 [http://msdn.microsoft.com/en-us/goglobal/bb688113.aspx](http://msdn.microsoft.com/en-us/goglobal/bb688113.aspx)

另外，请参阅 w3c 文档： [http ://www.w3.org/International/articles/unicode-migration/](http://www.w3.org/International/articles/unicode-migration/)

它们几乎涵盖了您问题的大部分答案。

# android - Android：一个活动的地图大小采用另一活动的地图大小

> ID：11793379
> 
> 赞同：0
> 
> 时间：2012-08-03T09:53:29.167
> 
> 标签：android, android-layout, android-emulator, android-mapview, android-maps

在我的地图项目中，我有一张地图，它在主活动中占据了设备的整个屏幕。我在地图上有一些别针。如果我们按下 pin ，它将导致另一个 Activity。我有一张地图，其尺寸是屏幕尺寸的三分之一。如果我们从另一个活动来到主活动。

**Main Activity 中的 Map 采用另一个 Activity 中的 Map 大小。**

我的主要活动 xml 是 <

```
?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" >

        <EditText
            android:id="@+id/search"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/submit"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="3"
            android:text="Search" />
    </LinearLayout>

    <com.xxx.yyy.FireMapView
        android:id="@+id/mapview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/linearLayout1"
        android:apiKey="xxxxxxxxxxx"
        android:clickable="true" >
    </com.xxx.yyy.FireMapView>

</RelativeLayout> 
```

我的另一个活动 xml 是，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/reportentry"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.xxx.yyy.FireMapView
        android:id="@+id/mapview1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_weight="3"
        android:apiKey="xxxxxx"
        android:clickable="true" >
    </com.xxx.yyy.FireMapView>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/reportentry1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/a1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/add"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Address" />

            <EditText
                android:id="@+id/address"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ft1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/ft2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="ft" />

            <Spinner
                android:id="@+id/ft3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/c"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/c1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="C" />

            <EditText
                android:id="@+id/c2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
               />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/p1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/p2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="p" />

            <EditText
                android:id="@+id/p3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/fc"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/fc1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="fc" />

            <Spinner
                android:id="@+id/fc2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/btn_info"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/cancel"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Cancel" />

            <Button
                android:id="@+id/report"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Report" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

请给我正确的方法....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:09:33.597

As per docs android maintains one mapview instance per process. So, you can't maintain different mapview instances in single process.

If size is only your problem then while coming back to to your mainactivity call

```
mapView.getController.zoomIn();

mapView.getController.zoomOut(); 
```

in onRestart() of mainactivity.

It's not perfect solution but at least it worked for me.

This issue was already reported [http://code.google.com/p/android/issues/detail?id=3756](http://code.google.com/p/android/issues/detail?id=3756)

# facebook - Facebook API - FQL - 如何读取我的朋友被标记的地方

> ID：11793380
> 
> 赞同：0
> 
> 时间：2012-08-03T09:53:36.073
> 
> 标签：facebook, facebook-fql

如何阅读我的朋友被标记的地方？我发现了这样的东西，但是这个例子对我不起作用。

还是我必须逐个检查

```
SELECT page_id, author_uid FROM location_post WHERE xxfriendIDxx IN tagged_uids  ??

{
"my_friends":"SELECT uid, name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me() ORDER BY rand() LIMIT 100)",
"their_locations":"SELECT page_id, author_uid FROM location_post WHERE tagged_uids IN (SELECT uid FROM #my_friends) LIMIT 100",
"those_places": "SELECT page_id, name, location FROM page WHERE page_id IN (SELECT page_id FROM #their_locations)"
} 
```

谢谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:56:50.693

下面的查询将为您提供您的朋友已被标记的所有地点。

`SELECT page_id, name, location FROM page WHERE page_id IN (SELECT page_id FROM location_post WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1=me()))`

确保您已启用 friends_photos、friends_checkins 和 friends_status 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:00:01.703

`their_locations`在将您的子查询更改为以下内容之前，我也无法获取任何数据：

```
SELECT page_id, author_uid FROM location_post WHERE 
  tagged_uids IN (SELECT uid FROM #my_friends) 
    OR author_uid IN (SELECT uid FROM #my_friends) 
  LIMIT 100 
```

它仍然没有返回一些我可以看到的带有位置标签的帖子`/FRIEND_USERNAME/locations`。

我认识的其他朋友一直在发布带有位置标记的项目，但他们的隐私设置必须禁止这些被 API 返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T14:44:00.113

你需要`user_tagged_places`许可。`API V-4`

```
<?php
//permissions array
     echo '<li><a href="' . $helper->getLoginUrl( array( 'user_tagged_places' ) ) . '"> Login    With Facebook</a></li>';
//call field
     echo '<pre>' . echo $graphObject['tagged_places']  . '</pre>'; 
?> 
```

# javascript - jquery 选择复选框选择的值

> ID：11793390
> 
> 赞同：0
> 
> 时间：2012-08-03T09:53:56.683
> 
> 标签：javascript, jquery

`<form id="myform">`

`<input type='checkbox' name='foo[]' value='1'>`

`<input type='checkbox' name='foo[]' checked='true' value='2' >`

`<input type='checkbox' name='foo[]' value='3' >`

`<input type='checkbox' name='foo[]' checked='true' value='4' >`

`</form>`

现在使用 jquery，我需要获取名称 foo[] 的选定值。

我还需要将这些作为数组传递给 php 文件，即 foo = array(2,4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:04:19.000

试试这个

```
 $("input[type=checkbox]:checked").each(function(){
          arr[]=$(this).val();
   }); 
```

获取每个元素的值，然后使用

```
 var myJsonString = JSON.stringify(yourArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:58:07.473

试试这个

```
var val_arr = [];
var arr = $('input[name="foo[]"]:checked');
for(var i=0; i<arr.length;i++){
val_arr.push(arr[i].value);
}
console.log(val_arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:03:09.180

```
function submitForm() {
  var form = $('#myform');
  form.submit(function(){ // configure onsubmit event
    form.attr({'method': 'post'}); // set form method to post
    form.attr({'action': 'yourphpfile.php'}); // set file to receive form data
  });
  form.submit(); // submit the form
} 
```

在 php 文件中，您可以查看 $_POST 中的内容：

```
<?php
print_r($_POST);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:03:35.443

你可以这样试试

```
var array = new Array();
$('input[name="foo[]"]:checked').each(function(i,el){
        array.push($(el).val());
});
for(var i in array){
   alert("value=="+array[i]);
} 
```

如果需要，您可以阅读[如何使用 jQuery Post 检查复选框](http://antguider.blogspot.com/2012/07/how-to-check-checkbox-is-checked-using.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:09:47.187

试试这个解决方案：

```
var checkedValues = [];
var checkedElems= $('input[type=checkbox]:checked');

$.each(checkedElems, function(index, element){
   checkedValues.push($(element).val());
});

$.post(
    "something.php",
    {
       arrayOfValues: JSON.stringify(checkedValues),
       ........
    },
    function(data, textStatus, jqXHR){
       alert("Success!");
    }
); 
```

# javascript - 用于管理视口布局的 Javascript 库

> ID：11793391
> 
> 赞同：1
> 
> 时间：2012-08-03T09:54:05.200
> 
> 标签：javascript, jquery, css, extjs, extjs4

过去我使用过很多 ExtJS 来制作仪表板。我最喜欢的功能之一是全屏视口，`border layout`它可以帮助您将仪表板拆分为左侧、右侧、顶部和底部的面板，而无需在任何地方创建滚动条。参见例如这些[示例](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/layout-browser/layout-browser.html)。

是否有一个 JS 库或 jQuery 插件可以做到这一点？我正在制作仪表板并希望将屏幕拆分为面板，但 ExtJS 有点臃肿且过度杀伤力，仅用于边界布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:09:36.140

Ext JS 是一个很好的解决方案，但如果您正在寻找其他东西，那么 jQuery UI 布局插件可能是您想要的选项。

示例： http: [//layout.jquery-dev.net/demos/simple.html](http://layout.jquery-dev.net/demos/simple.html)

项目主页： http: [//layout.jquery-dev.net/](http://layout.jquery-dev.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:10:59.153

[Twitter Bootstrap](http://twitter.github.com/bootstrap/)为布局提供帮助，但您必须遵循特定设计，并且不确定它是否可以管理没有滚动的全屏应用程序。

不过我觉得还是值得一看的。

您可能会看到[Dojo](http://dojotoolkit.org/)，它现在与 jquery 很好地集成，并且有很好的小部件（例如放在左侧的选项卡，网格）和良好的布局系统。

# javascript - 在为 jquery 谷歌地图插件设置方向时无法调用未定义的方法“应用”

> ID：11793397
> 
> 赞同：1
> 
> 时间：2012-08-03T09:54:26.027
> 
> 标签：javascript, jquery, jquery-mobile, google-maps-api-3

[我已经按照在此处](https://code.google.com/p/jquery-ui-map/wiki/jquery_ui_map_v_3_sample_code)创建 jquery 移动谷歌地图画布的教程进行了操作，并尝试对其进行设置，但是在我的 JavaScript 控制台中出现此错误：

> 未捕获的类型错误：无法调用未定义的方法“应用”

我认为我可能在某处缺少回调，但我无法发现它，任何人都可以给我指点吗？

这就是我初始化和显示地图的方式，如页面所示，效果很好，我可以在地图周围平移/缩放：

```
$('#map_canvas').gmap({ 'center': latLon,'scrollwheel':false});
    $('#map_canvas').gmap('option', 'zoom', 12);
    $('#map_canvas').gmap().bind('pageshow', function(ev, map){
        $('#map_canvas').gmap('addMarker', {'position':latLon, 'bounds':false}).click(function(){
            $('#map_canvas').gmap('openInfoWindow', {'content':myAddress}, this);
            });
    }); 
```

我的 HTML 页面上有这些字段：

```
<p>
                <label for="from">From</label>
                <input id="from" class="ui-bar-c" type="text" value="Los Angeles" />
            </p>
            <p>
                <label for="to">To</label>
                <input id="to" class="ui-bar-c" type="text" value="New York" />
            </p>
            <a id="submit" href="#" data-role="button" data-icon="search">Get directions</a>

            <div id="map_canvas" style="width:100%;height:300px"></div>

            <div id="results" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" style="display:none;">
                    <div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-top ui-btn-up-undefined">Results</div>
                    <div id="directions"></div>
                    <div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-bottom ui-btn-up-undefined"></div>
                </div> 
```

onclick 绑定到这个 JS 函数：

```
function getDirections()
{
    $('#map_canvas').gmap('displayDirections', { 'origin': 'Los Angeles, USA', 'destination': 'New York, USA', 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, { 'panel': document.getElementById('panel') }, function(result, status) {
        if ( status === 'OK' ) {
                alert('Results found!');
        }
    }); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T23:47:00.100

原来这是因为不包括图书馆。在我下载的文件中，有一个 jquery.ui.map.services.js 文件必须包含在它工作之前。那就是方向功能所在的地方。

# iterator - 容器迭代器的抽象

> ID：11793400
> 
> 赞同：2
> 
> 时间：2012-08-03T09:54:43.297
> 
> 标签：iterator, ada

*我在这里谈论的是 Ada 2012。*

我先让代码说话：

```
with Ada.Containers.Hashed_Maps;                                                
with Ada.Strings.Unbounded;                                                     
with Ada.Strings.Unbounded.Hash_Case_Insensitive;                               
with Ada.Strings.Unbounded.Equal_Case_Insensitive;                              

package Environments is                                                         

   type Environment is tagged private;                                          

   function Variable (                                                          
      E    : in Environment;                                                    
      Name : in Ada.Strings.Unbounded.Unbounded_String                          
   )                                                                            
      return Ada.Strings.Unbounded.Unbounded_String                             
      with Inline;                                                              

   procedure Set_Variable (                                                     
      E     : in out Environment;                                               
      Name  : in Ada.Strings.Unbounded.Unbounded_String;                        
      Value : in Ada.Strings.Unbounded.Unbounded_String                         
   )                                                                            
      with Inline;                                                              

private                                                                         

   package Variable_Maps is new Ada.Containers.Hashed_Maps (                    
      Key_Type        => Ada.Strings.Unbounded.Unbounded_String,                
      Element_Type    => Ada.Strings.Unbounded.Unbounded_String,                
      Hash            => Ada.Strings.Unbounded.Hash_Case_Insensitive,           
      Equivalent_Keys => Ada.Strings.Unbounded.Equal_Case_Insensitive,          
      "="             => Ada.Strings.Unbounded."="                              
   );                                                                           

   type Environment is tagged record                                            
      Variables : Variable_Maps.Map;                                            
   end record;                                                                  

end Environments; 
```

我们这里有一个示例包，很好地说明了我的问题。我在 中存储了一些环境变量`Hashed_Map`，但我想在标准容器上构建一个抽象层，这样我以后就可以在不更改包客户中的任何代码的情况下更改底层容器。

获取和设置变量很容易 - 如上所述。真正的问题是迭代。我想让我的包的客户迭代环境并轻松获取每个元素的键和值。

当我使用 Ada 2012 时，最好的方法是使用迭代器，但是如何？我可以将光标返回到底层容器，但同样，此光标的界面将依赖于容器。

**在标准容器迭代上实现这种抽象的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:10:37.587

查看 Ada Gems [#127](http://libre.adacore.com/adaanswers/gems_single/gem-127-iterators-in-ada-2012-part-1)和[#128](http://www.adacore.com/adaanswers/gems/gem-128-iterators-in-ada-2012-part-2/)，“Ada 2012 中的迭代器，第 1 和 2 部分”，了解如何创建自己的迭代器。

# vba - Excel VBA自动过滤器内部函数

> ID：11793403
> 
> 赞同：0
> 
> 时间：2012-08-03T09:54:50.320
> 
> 标签：vba, excel

```
Sub TurnAutoFilterOn()
'check for filter, turn on if none exists
  If Not ActiveSheet.AutoFilterMode Then
    ActiveSheet.Range("A1").AutoFilter
  End If
End Sub 
```

运行良好并打开自动过滤器。

```
Function Req(ByVal MCode As String) As Integer
    TurnAutoFilterOn
End Function 
```

不工作。

```
Function Req(ByVal MCode As String) As Integer
'check for filter, turn on if none exists
  If Not ActiveSheet.AutoFilterMode Then
    ActiveSheet.Range("A1").AutoFilter
  End If
End Function 
```

不工作。

excel vba 自动过滤器是否应该只在 SUB 下工作而不是在函数中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:08:29.483

上述评论者关于从单元格调用的函数更新工作簿（即任何单元格）是正确的 - 这是不允许/支持的。

Excel 提供了一个工作簿重新计算模型，在该模型中，它可以根据单元格公式预先计算单元格间的依赖关系。这允许（相对）有效地将更改从其原始来源传播到依赖它们的单元格。当工作簿重新调整完成时，它会重复（即递归地）传播更改，直到它们传播到其他公式中未引用的单元格。它不允许单元格公式修改工作簿中的任何单元格；如果要支持它将有效地使基于公式的依赖分析无效（或至少大大削弱），并且需要另一个计算模型（这可能会效率低得多）。（圆形单元格引用（直接或间接）对于这种方法也是有问题的，

但是，您可以做的是在 VBA 数据结构中记录一些数据以供以后使用（在下面的示例中，非常简单的 public gx，但这种数据结构几乎可以是任何复杂的）。然后，您可以在使用事件重新计算工作簿后使用该记录的数据。工作表更改事件是在计算后运行一些代码的方式（您编写子程序 Worksheet_Calculate 并将其放入工作表中），此时可以修改单元格。ThisWorkbook 的代码中还有一个 Workbook_SheetCalculation，这可能很有趣。

在“这个工作簿”中：

```
Private Sub Workbook_SheetCalculate(ByVal Sh As Object)
    MsgBox "gx=" & gx
    Application.Worksheets("Sheet1").Range("A1") = gx
End Sub 
```

在“模块1”中：

```
Public gx As Long

Function MyFormula(x As Long) As String
   gx = x
   MyFormula = "hello"
End Function 
```

在 Sheet1 中，单元格 A5：

=我的公式（A4）

您将在 gx 设置为 A4 中的数字的上下文中弹出一个窗口（显示公式运行中数据的存储），并修改工作表。现在，用另一个数字修改 A4，您将看到结果，因为更改 A4 会触发重新计算。

（请注意，您可能还对 Workbook_SheetChange 事件作为 SheetCalculate 事件的替代方法感兴趣。）

# android - 通过 C++ 创建 SQLite 数据库。通过 Java SDK 访问它？

> ID：11793407
> 
> 赞同：2
> 
> 时间：2012-08-03T09:55:05.213
> 
> 标签：android, sqlite

这是我们的情况：

我们有一些本机代码可以在特定时间扫描用户定义的目录。目标是收集有关特定类型文件的数据并从中构建 SQLite 数据库。可能有数以万计的文件要查询。

**问题**是每次找到一个文件时，收集的关于该文件的数据必须通过 JNI 边界引入 Java 领域，然后通过 Android SDK 提供的 SQLite 类提交到数据库。这需要的时间太长了**。**

**建议的解决方案**是下载 SQLite 源代码，将其链接到我们的项目中，并按照此处所述本地构建数据库：[SQLite with Android NDK](https://stackoverflow.com/questions/5523067/sqlite-with-android-ndk)。这将完全消除将数据从 C++ 层传递到 Java 层所花费的时间。

**问题是：**如果这样做了，Android SDK（Java层）是否仍然可以正常打开数据库，获取Cursor对象等？我们可以保持数据库极其简单；没有外键、触发器、约束等。虽然索引是非常可取的。

我们已经考虑使用管道和套接字跨 JNI 边界移动数据。但是，Fat32 文件系统不支持命名管道（因此，如果用户将应用程序移动到 Fat32 格式的 SD 卡，这将不可用）。套接字也不可用，因为我们必须在清单中包含互联网权限，我们觉得这看起来很可疑。

如果有人对此有任何信息，我们很乐意听取您的意见。

非常感谢，P。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T01:21:56.650

为了跟进，我们冒险拼凑了一个测试应用程序，该应用程序编译了最新的 SQLite Amalgamation (3.7.13) 源代码。我们发现我们确实能够通过 Android Java SDK 与本地创建的数据库进行交互。

性能方面，这是一个巨大的飞跃！通过在本机层插入我们的记录，我们发现性能**大幅**提升。以前，将 20,000 条记录插入非复杂数据库大约需要 4 分钟。一些简单的分析表明，几乎整个 4 分钟都用于将数据从本机层传递到 Java 层。

现在，插入需要 4 到 6 秒。我们还可以正常使用 Java API 打开、查询数据库等。

需要注意的性能调整是事务和使用以下方式将日志移动到内存：

```
pragma journal_mode=memory; 
```

出于稳定性原因，我们决定不关闭同步，而且我们对已经取得的性能非常满意。

希望其他人会发现这个建议很有用。

磷

# python - Plone - 从视图中的成员文件夹中获取和列出对象

> ID：11793408
> 
> 赞同：1
> 
> 时间：2012-08-03T09:55:08.747
> 
> 标签：python, object, plone, directory, zope

我想创建一个视图，其中列出了特定文件夹中的对象（比如 root/Members/myname）。这该怎么做？我不知道如何引用文件夹。就像是：

```
items = []
folder = getFolder('/Members/' + myname)
for i in folder:
    if isinstance(news, i):
        items.append(i.title) 
```

嗯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:30:40.013

您可以通过使用路径索引，要求目录列出给定文件夹的内容，并具有深度限制：

```
from Products.CMFCore.utils import getToolByName

catalog = getToolByName(context, 'portal_catalog')
contents = catalog(path=dict(query='/root/Members/' + myname, depth=1)) 
```

有关详细信息，请参阅[查询目录](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/querying-the-catalog/)。

或者，您可以遍历有问题的文件夹并在其`getFolderContents`上调用 skin 方法：

```
memberFolder = context.unrestrictedTraverse('/root/Members/' + myname)
contents = memberFolder.getFolderContents() 
```

后者为您进行目录搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:03:48.793

你可以这样做：

```
items = [obj.Title 
           for id,obj in context['test-folder'].items()
               if isinstance(news, obj)] 
```

**更多信息**： [http ://collective-docs.readthedocs.org/en/latest/content/listing.html#listing-the-folder-items-using-portal-catalog](http://collective-docs.readthedocs.org/en/latest/content/listing.html#listing-the-folder-items-using-portal-catalog)

# node.js - 启动节点服务器时出错

> ID：11793410
> 
> 赞同：0
> 
> 时间：2012-08-03T09:55:17.900
> 
> 标签：node.js

尝试启动节点服务器时出现以下错误。看起来它与使用节点包管理器（npm）安装的组合处理程序有关。

有人可以帮忙吗？

```
TypeError: Object function app(req, res){ app.handle(req, res); } has no method 'error'
    at /Repository/combo/node_modules/combohandler/lib/server.js:23:9
    at Object.<anonymous> (/Repository/combo/server.js:8:7)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

下面你可以看到我正在使用的 express 版本：

```
Brendans-MacBook-Pro:combo brendan_rice$ npm view express version
npm WARN express@1.0.4 package.json: 'modules' object is deprecated
npm WARN express@1.0.5 package.json: 'modules' object is deprecated
npm WARN express@1.0.6 package.json: 'modules' object is deprecated
npm WARN express@1.0.7 package.json: 'modules' object is deprecated
3.0.0rc1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:38:04.740

`combohandler`不支持`express`v3.0.0：[https ://github.com/rgrove/combohandler/blob/master/package.json](https://github.com/rgrove/combohandler/blob/master/package.json)

您可以通过不`express`手动创建服务器而是让其自行处理来解决该错误`combohandler`。也就是说，不要将第二个参数传递给`combohandler`构造函数。

# asp.net-mvc-3 - Howto：区域中的嵌套布局？

> ID：11793412
> 
> 赞同：0
> 
> 时间：2012-08-03T09:55:29.863
> 
> 标签：asp.net-mvc-3, asp.net-mvc-areas

我有一个遵循以下结构的 ASP .NET MVC3（剃刀）站点：

```
Site1
    -Areas
        -Area1
            -Views
                -SomeFeature
                    -Index.cshtml --> sets the section 'pageScripts'
                -Shared
                    -_Layout.cshtml --> has Layout = ~/Views/Shared_Layout.cshtml, sets the section 'layoutScripts'

            -Viewstart.cshtml ---> has Layout = ~/Areas/Area1/Views/Shared/_Layout.cshtml

        -Area2
            -Views
                -Shared
    -Views
        -Shared
            -_Layout.cshtml ---> has optional sections pageScripts, layoutScripts 
```

**这是我的问题：**

当我尝试访问 的等效控制器方法时`~/Area1/SomeFeature/Index`，我收到一条异常消息说

```
The following sections have been defined but have not been rendered for the layout page "~/Areas/Area1/Views/Shared/_Layout.cshtml": "pageScripts". 
```

我将“pageScripts”部分定义为

```
@RenderSection("pageScripts", false) in ~/Views/Shared_Layout.cshtml 
```

**为什么我要这样做：**

目前，我发现自己必须将 Area1（和 Area2）中每个视图中的 Layout 属性设置为`~/Views/Shared/_Layout.cshtml`

有谁知道我做错了什么？

- 感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:52:49.800

只是在黑暗中拍摄。

1.) 确保您使用的是_ViewStart，下划线是必需的；)。

2.) 确保 _ViewStart 位于 Area 的 Views 文件夹中，而不是 Area1 文件夹中。至少在你的描述中是这样的。

希望其中一个建议可以解决问题。我使用类似的技术并且工作得很好。

干杯，

涡流

# sql-server - 在 SQL Server 2005 中使用数据生成脚本

> ID：11793414
> 
> 赞同：6
> 
> 时间：2012-08-03T09:55:31.927
> 
> 标签：sql-server, sql-server-2005, sql-server-2005-express

如何在 SQL Server 2005 中使用表中的数据生成脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:03:26.437

不幸的是，脚本数据和架构的选项似乎直到 SQL Server 2008 才出现，所以我认为你被第三方选项卡住了。

*   [SSMS 工具包有一个生成插入选项](http://www.ssmstoolspack.com/Features?f=8/#GIS)
*   Narayana Vyas Kondreddi 有一个出色的[生成插入脚本](http://vyaskn.tripod.com/code.htm#inserts)，我已经使用了几年了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:51:59.257

使用数据发布向导。一步一步的解释：http:
[//blog.sqlauthority.com/2007/11/16/sql-server-2005-generate-script-with-data-from-database-database-publishing-wizard/](http://blog.sqlauthority.com/2007/11/16/sql-server-2005-generate-script-with-data-from-database-database-publishing-wizard/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T03:22:05.887

我之前遇到过同样的问题，似乎没有直接的脚本可以用来获取所有表结构及其数据。

我通过执行以下操作来解决这种情况：

1.  为数据库架构生成脚本（右键单击数据库 > 任务 > 生成脚本 > 选择所有表，然后将脚本写入文件）
2.  为数据库创建备份文件（右键单击数据库 > 任务 > 备份）

然后，将您的数据库带到其他地方：

1.  执行数据库脚本文件创建表
2.  使用 [数据库名称] > 还原 > 数据库来还原数据库。

这对使用 SQL Server 2005 的我来说效果很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-20T02:44:18.927

**更新**

**下面的答案不适用于@jake 提到的 SQL Server 2005。所以请忽略答案。我保留答案，以防有人想看看如何在其他 SQL Server 版本上执行此操作**

* * *

右键单击数据库。然后选择 Tasks->Generate Scripts [See the image here](https://i.stack.imgur.com/xpDEr.png)

然后，选择您需要生成插入脚本的一个或多个表。 [看这里的图片](https://i.stack.imgur.com/vhqeL.png)

现在单击下一步并单击高级并选择“脚本的数据类型” [参见此处的图像](https://i.stack.imgur.com/glBqF.png)

最后，下一个，下一个，您在插入脚本中获取所有数据。再见优秀！

# playframework-2.0 - 部署 Play！dotCloud 上的应用程序，返回码 137

> ID：11793417
> 
> 赞同：0
> 
> 时间：2012-08-03T09:55:40.830
> 
> 标签：playframework-2.0, dotcloud

我正在尝试使用[play2-on-dotcloud](https://github.com/mchv/play2-on-dotcloud)中的“自定义类型”脚本在 dotCloud 上部署[Playframework 2.0](http://www.playframework.org/)应用程序。

我的`dotcloud.yml`样子是这样的：

```
play:
  type: custom
  buildscript: dotcloud/builder
  ports:
    www: http
  process: ~/run
  approot: . 
```

我的`dotcloud/builder`脚本：

```
#!/bin/bash
set -e
BUILDROOT="$(dirname "$0")"
VERSION=2.0.2

echo 'Checking if Play framework is already installed...'
if [ -d ~/play-${VERSION} ]
then
    echo 'Play framework found.'
else
    echo 'Play framework not found. Installing it...'
    echo '- Download Play framework'
    curl -O http://download.playframework.org/releases/play-${VERSION}.zip
    if [ -e play-${VERSION}.zip ]
    then
        echo '- Unzip downloaded file'
        unzip -q play-${VERSION}.zip
        if [ -d play-${VERSION} ]
        then
            echo '- Copy play installation'
            cp -R ./play-${VERSION} ~/play-${VERSION}
            echo 'Play installed.'
        else
            echo 'Unzip failed !'
        fi
    else
        echo 'Download failed !'
    fi
fi

echo 'Installing application'
rm -rf ~/application
cp -R  ./$SERVICE_APPROOT ~/application

echo 'Symlinking application logs to Supervisor area...'
rm -rf ~/application/logs
ln -s /var/log/supervisor ~/application/logs

echo  'Installing run script...'
cp "$BUILDROOT/run" ~

echo 'Building the Play application'
cd ~/application

echo ' -- Cleaning -- '
~/play-${VERSION}/play clean
echo ' -- Compiling -- '
~/play-${VERSION}/play compile
echo ' -- Staging -- '
~/play-${VERSION}/play stage

echo 'Build complete.' 
```

但是当我制作 a 时`dotcloud push myapp`，它会随机失败并显示以下消息：

```
09:44:26 [play] Killed
-- Build failed: "SERVICE_POSTINSTALL='' SERVICE_APPROOT=. SERVICE_REQUIREMENTS='[]' SERVICE_BUILDSCRIPT=dotcloud/builder SERVICE_TYPE=custom SERVICE_PORTS_WWW=http SERVICE_PROCESS='~/run' ./dotcloud/builder" failed with return code 137
09:44:27 ---> Aborting due to some build failure 
```

要么它在脚本的开头失败，要么离结尾不远（编译时间）。但它每次都失败并显示相同的错误消息。

另请注意，我能够在 dotCloud 上部署以前的 Play 应用程序（但较小）。

我尝试了大约 15 次，但我无法部署我的应用程序 :(

bob-the-builder 有没有超时？

**更新：**

做了更多的测试，最后尝试通过使用 ssh 登录到 dotcloud 服务器来构建应用程序。当我运行时`play compile`，它在依赖解析上不断失败，它试图解决依赖关系，并且它们“某事”杀死了构建过程：

```
dotcloud@xxxxx-default-play-0:~/application$ play compile
[info] Loading project definition from /home/dotcloud/application/project
[info] Set current project to xxxxx (in build file:/home/dotcloud/application/
    [info] Compiling 26 Scala sources and 10 Java sources to /home/dotcloud/application/modules/securesocial/target/scala-2.9.1/classes...
    [info] Updating {file:/home/dotcloud/application/}xxxxx...
    Killed Resolving play#play-test_2.9.1;2.0.2 ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:21:03.803

问题来自编译期间的内存使用情况。Dotcloud 平台将使用的内存限制为 512 mb，默认情况下播放需要更多。我前段时间更新了脚本以解决问题，请参阅[此提交](https://github.com/mchv/play2-on-dotcloud/commit/057b694b80d47ded1ee35cffd24a3e2f99e5a805)了解详细信息。

# jquery - ie9调试控制台修复问题的奇怪问题

> ID：11793421
> 
> 赞同：1
> 
> 时间：2012-08-03T09:56:22.927
> 
> 标签：jquery, css, internet-explorer

我有一个页面，通过 JQuery 显示滚动条，它确实出现在 ie9 中（只有我可以测试的 IE 版本）。问题似乎是由于兼容模式造成的，但即使添加了 ie=edge 元标记，清除缓存并重新加载滚动条也没有出现。然而奇怪的是，只要我按下 f12 以调出开发者控制台，然后用 f5 刷新，从那时起一切都开始运行良好。该问题不会再次出现在同一台 PC 上，而是另一台 PC 上，整个事情重新开始。你们中有人知道为什么会发生这种情况吗？

这是链接：[http ://www.waterhouseresearch.com/shop.php](http://www.waterhouseresearch.com/shop.php)

```
user:testing@gmail.com
pass:testing 
```

以及它应该是什么样子的屏幕截图：http: [//imageshack.us/photo/my-images/15/probimg.jpg/](http://imageshack.us/photo/my-images/15/probimg.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:58:50.897

在 Internet Explorer 中，在`console`您打开开发人员工具（按 F12）之前，该对象不存在，因此尝试使用例如`console.log()`输出到控制台的功能将引发错误。

# c# - 即使在 webclient 中传递凭据后仍要求登录

> ID：11793423
> 
> 赞同：0
> 
> 时间：2012-08-03T09:56:28.817
> 
> 标签：c#, c#-4.0, web-scraping

我正在尝试从 url 下载文件。但即使在提供网络凭据后，下载的文件也将是登录页面。

```
WebClient downloader = new WebClient();
            NetworkCredential myCred = new NetworkCredential(
"username", "password", "abc.com");
            downloader.Credentials = myCred;
            downloader.DownloadFileCompleted += new AsyncCompletedEventHandler(downloader_DownloadFileCompleted);
            downloader.DownloadProgressChanged += new DownloadProgressChangedEventHandler(downloader_DownloadProgressChanged);
            downloader.DownloadFileAsync(new Uri(url), "C://Desktop/File_extracted.doc"); 
```

这是我用来下载文件的代码。如何获取该网址中的文件。

# jquery - 重试一个 jquery ajax 请求，该请求将回调附加到其延迟

> ID：11793430
> 
> 赞同：40
> 
> 时间：2012-08-03T09:56:55.280
> 
> 标签：jquery, ajax, jquery-deferred

我正在尝试实现一个重试由于临时原因失败的 ajax 请求的系统。在我的情况下，它是关于在调用恢复会话的刷新 Web 服务之后重试由于会话已过期而失败并显示 401 状态代码的请求。

问题是在成功重试时不会调用“完成”回调，这与调用的“成功”ajax 选项回调不同。我在下面做了一个简单的例子：

```
$.ajaxSetup({statusCode: {
    404: function() {
        this.url = '/existent_url';
        $.ajax(this);
    }
}});

$.ajax({
    url: '/inexistent_url',
    success: function() { alert('success'); }
})
.done(function() {
    alert('done');
}); 
```

有没有办法在成功重试时调用完成式回调？我知道延迟被“拒绝”后无法“解决”，是否可以防止拒绝？或者也许将原始 deferred 的 doneList 复制到新的 deferred？我没有想法:)

下面是一个更现实的例子，我试图将所有 401 拒绝的请求排队，并在成功调用 /refresh 后重试它们。

```
var refreshRequest = null,
    waitingRequests = null;

var expiredTokenHandler = function(xhr, textStatus, errorThrown) {

    //only the first rejected request will fire up the /refresh call
    if(!refreshRequest) {
        waitingRequests = $.Deferred();
        refreshRequest = $.ajax({
            url: '/refresh',
            success: function(data) {
                // session refreshed, good
                refreshRequest = null;
                waitingRequests.resolve();
            },
            error: function(data) {
                // session can't be saved
                waitingRequests.reject();
                alert('Your session has expired. Sorry.');
            }
       });
    }

    // put the current request into the waiting queue
    (function(request) {
        waitingRequests.done(function() {
            // retry the request
            $.ajax(request);
        });
    })(this);
}

$.ajaxSetup({statusCode: {
    401: expiredTokenHandler
}}); 
```

该机制有效，401 失败的请求被第二次触发，问题是它们的“完成”回调没有被调用，因此应用程序停止。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-16T11:07:30.447

您可以使用[`jQuery.ajaxPrefilter`](http://api.jquery.com/jquery.ajaxPrefilter)将 jqXHR 包装在另一个[延迟对象](http://api.jquery.com/category/deferred-object/)中。

我做了一个例子[`jsFiddle`](http://jsfiddle.net/gLedx/2/)来说明它可以工作，并尝试调整你的一些代码来处理 401 到这个版本：

```
$.ajaxPrefilter(function(opts, originalOpts, jqXHR) {
    // you could pass this option in on a "retry" so that it doesn't
    // get all recursive on you.
    if (opts.refreshRequest) {
        return;
    }

    // our own deferred object to handle done/fail callbacks
    var dfd = $.Deferred();

    // if the request works, return normally
    jqXHR.done(dfd.resolve);

    // if the request fails, do something else
    // yet still resolve
    jqXHR.fail(function() {
        var args = Array.prototype.slice.call(arguments);
        if (jqXHR.status === 401) {
            $.ajax({
                url: '/refresh',
                refreshRequest: true,
                error: function() {
                    // session can't be saved
                    alert('Your session has expired. Sorry.');
                    // reject with the original 401 data
                    dfd.rejectWith(jqXHR, args);
                },
                success: function() {
                    // retry with a copied originalOpts with refreshRequest.
                    var newOpts = $.extend({}, originalOpts, {
                        refreshRequest: true
                    });
                    // pass this one on to our deferred pass or fail.
                    $.ajax(newOpts).then(dfd.resolve, dfd.reject);
                }
            });

        } else {
            dfd.rejectWith(jqXHR, args);
        }
    });

    // NOW override the jqXHR's promise functions with our deferred
    return dfd.promise(jqXHR);
}); 
```

这是有效的，因为[`deferred.promise(object)`](http://api.jquery.com/deferred.promise/)实际上会覆盖 jqXHR 上的所有“承诺方法”。

**注意：**对于其他发现此问题的人，如果您使用ajax 选项`success:`和在其中附加回调，则此代码段将**无法**按您期望的方式工作。它假定唯一的回调是使用jqXHR的和方法附加的回调。`error:`**`.done(callback)``.fail(callback)`**

 *** * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-11T13:25:40.417

正如 gnarf 的回答所指出的那样，成功和错误回调的行为不会像预期的那样。如果有人对这里感兴趣的话，是一个支持回调`success`和`error`承诺样式事件的版本。

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR) {

    // Don't infinitely recurse
    originalOptions._retry = isNaN(originalOptions._retry)
        ? Common.auth.maxExpiredAuthorizationRetries
        : originalOptions._retry - 1;

    // set up to date authorization header with every request
    jqXHR.setRequestHeader("Authorization", Common.auth.getAuthorizationHeader());

    // save the original error callback for later
    if (originalOptions.error)
        originalOptions._error = originalOptions.error;

    // overwrite *current request* error callback
    options.error = $.noop();

    // setup our own deferred object to also support promises that are only invoked
    // once all of the retry attempts have been exhausted
    var dfd = $.Deferred();
    jqXHR.done(dfd.resolve);

    // if the request fails, do something else yet still resolve
    jqXHR.fail(function () {
        var args = Array.prototype.slice.call(arguments);

        if (jqXHR.status === 401 && originalOptions._retry > 0) {

            // refresh the oauth credentials for the next attempt(s)
            // (will be stored and returned by Common.auth.getAuthorizationHeader())
            Common.auth.handleUnauthorized();

            // retry with our modified
            $.ajax(originalOptions).then(dfd.resolve, dfd.reject);

        } else {
            // add our _error callback to our promise object
            if (originalOptions._error)
                dfd.fail(originalOptions._error);
            dfd.rejectWith(jqXHR, args);
        }
    });

    // NOW override the jqXHR's promise functions with our deferred
    return dfd.promise(jqXHR);
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-16T19:49:29.010

我为这个用例创建了一个[jQuery 插件](https://github.com/johnkpaul/jquery-ajax-retry)。它将 gnarf 的答案中描述的逻辑包装在一个插件中，并且还允许您指定在再次尝试 ajax 调用之前等待的超时时间。例如。

```
//this will try the ajax call three times in total 
//if there is no error, the success callbacks will be fired immediately
//if there is an error after three attempts, the error callback will be called

$.ajax(options).retry({times:3}).then(function(){
  alert("success!");
}); 

//this has the same sematics as above, except will 
//wait 3 seconds between attempts
$.ajax(options).retry({times:3, timeout:3000}).retry(3).then(function(){
   alert("success!");
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-13T03:16:29.047

这样的事情对你有用吗？你只需要返回你自己的 Deferred/Promise，这样原始的就不会被太快拒绝。

示例/测试用法：http: [//jsfiddle.net/4LT2a/3/](http://jsfiddle.net/4LT2a/3/)

```
function doSomething() {
    var dfr = $.Deferred();

    (function makeRequest() {
        $.ajax({
            url: "someurl",
            dataType: "json",
            success: dfr.resolve,
            error: function( jqXHR ) {
                if ( jqXHR.status === 401 ) {
                    return makeRequest( this );
                }

                dfr.rejectWith.apply( this, arguments );
            }
        });
    }());

    return dfr.promise();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-01T21:16:15.263

这也是我刚刚遇到的一个*很好的*问题。

我被接受的答案（来自@gnarf）吓倒了，所以我想出了一个我更容易理解的方法：

```
 var retryLimit = 3;
        var tryCount = 0;
        callAjax(payload);
        function callAjax(payload) {
            tryCount++;
            var newSaveRequest = $.ajax({
                url: '/survey/save',
                type: 'POST',
                data: payload,
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                },
                error: function (xhr, textStatus, errorThrown) {
                    if (textStatus !== 'abort') {
                        console.log('Error on ' + thisAnswerRequestNum, xhr, textStatus, errorThrown);
                        if (tryCount <= retryLimit) {
                            sleep(2000).then(function () {
                                if ($.inArray(thisAnswerRequestNum, abortedRequestIds) === -1) {
                                    console.log('Trying again ' + thisAnswerRequestNum);
                                    callAjax(payload);//try again
                                }
                            });
                            return;
                        }
                        return;
                    }
                }
            });
            newSaveRequest.then(function (data) {
                var newData = self.getDiffFromObjects(recentSurveyData, data);
                console.log("Answer was recorded " + thisAnswerRequestNum, newData);//, data, JSON.stringify(data)
                recentSurveyData = data;
            });
            self.previousQuizAnswerAjax = newSaveRequest;
            self.previousQuizAnswerIter = thisAnswerRequestNum;
        }

function sleep(milliseconds) {
    return new Promise((resolve) => setTimeout(resolve, milliseconds));
} 
```

**基本上，我只是将整个 Ajax 调用及其回调封装*到*一个可以递归调用的函数中。****

# c++ - Visual Studio debugger fails but program runs fine when built...?

> ID：11793436
> 
> 赞同：0
> 
> 时间：2012-08-03T09:57:23.720
> 
> 标签：c++, visual-studio-2010, visual-studio-debugging

I'm working on a stereo disparity program, I have left and right images that I'm trying to read in. However I'm getting an error when trying to debug, but it works fine if I just build it...So I've just reduced the code to something very simple...

```
#include <bunch of opencv bits...>

using namespace std;
using namespace cv;

int main()
{
    Mat Left= imread("Left.png", 0);    //read images as grayscale
    Mat Right= imread("Right.png", 0);

    while (true) {
        imshow("Left",Left);
        imshow("Right",Right);
    }

} 
```

Running with debug (F5) I get to the line imshow("Left",Left); and it crashes, reporting **OpenCV Error: Bad flag (parameter or structure field) (unrecognized or unsupported array type) ....blah blah**

Stepping through the code I can see that nothing is read stored in **Left** or **Right**

However where things get really confusing is if I just build the program (F7) and run the .exe from explorer (Misc Projects\SteroExp\Debug).... it runs completely fine.

**My thoughts....** Does VS run the debug version from a different temp directory somewhere on the PC where the images aren't stored?

I'm using... W7 64bit, VS2010, C++, OpenCV 2.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:15:07.043

The problem is the current working directory. When you run from explorer the current directory is 'Misc Projects\SteroExp\Debug' but when you from from the debugger it's 'Misc Projects\SteroExp'. The answer is to move your image files to the correct directory.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:29:09.347

First, double-check that the working directory in **Project | Properties | Debugging > WorkingDirectory** is set to a directory that contains those two files.

# apache-flex - 通过 return 语句执行 ActionScript 递归循环

> ID：11793437
> 
> 赞同：0
> 
> 时间：2012-08-03T09:57:24.063
> 
> 标签：apache-flex, recursion, return

我有一个递归循环，如果在 ArrayCollection 的某个嵌套级别找到它应该返回值。一旦找到返回值并由函数返回，但在下一次迭代中返回值变回 null。我错过了什么或做错了什么？

```
// calling function
...
foundedItem = this.recursiveFindFunction(valueList); 
...

private function recursiveFindFunction(items:ArrayCollection):Object
{
    var retVal:Object;
    for (var i:int = 0; i < items.length; i++)
    {
        var value:Object = items.getItemAt(i);
        if (value.name == this.attribute.value.directValue as String)
        {
            retVal = value;
            break;
        }

        if (value.hasOwnProperty("children"))
        {
                this.recursiveFindFunction(value.children);
        }   
    }

    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:00:08.670

您没有在任何地方捕捉到递归调用的返回

您没有在这里检查返回值

```
 if (value.hasOwnProperty("children"))
    {
            this.recursiveFindFunction(value.children);
    } 
```

一个可能的解决方法是添加这样的 return 语句：

```
 if (value.hasOwnProperty("children"))
    {
            return this.recursiveFindFunction(value.children);
    } 
```

（注意退货）

# c# - 是否可以从同一解决方案中从项目 A 中的一个页面重定向到项目 B 中的页面

> ID：11793438
> 
> 赞同：0
> 
> 时间：2012-08-03T09:57:28.897
> 
> 标签：c#, wpf

我有两个项目，项目 A 和项目 B。两者都在同一个解决方案下。我想在项目 B 中使用项目 A 的页面。如何从项目 B 中调用该页面。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:32:04.657

可以访问另一个解决方案表单，您在同一解决方案中有 2 个项目。

要从另一个项目打开表单，您必须添加对该项目的引用。

在第一个项目中，右键单击“解决方案资源管理器”窗口中的“引用”项。

选择添加参考选项。选择 Projects 选项卡并选择第二个项目。

单击确定。然后，要从第二个项目访问表单，只需使用以下命令：

Yourproject2.FormsName objName=new YourProject2.FormName();

objName.Show();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:54:31.477

首先添加对其他项目的引用，然后调用：

```
NavigationService.Navigate(new ProjectB.page()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:09:10.213

您需要在项目 B 中添加对项目 A 的引用。您可以通过 RMC 在 ProjectB 上执行此操作并选择添加引用...。然后在一个新窗口中转到 Projects 选项卡并选择 Project A。之后，您可以调用 Project B 中的页面： 伪代码：

```
ProjectA.PageNamespace page = new ProjectA.PageNamespace() 
```

# selenium - selenium webdriver 在单击按钮或链接等元素时停止工作

> ID：11793440
> 
> 赞同：0
> 
> 时间：2012-08-03T09:57:30.377
> 
> 标签：selenium, webdriver

我正在使用 IE8 和网络驱动程序。我遇到的问题是网络驱动程序没有执行单击按钮、复选框、单选按钮等任何元素，但它能够验证元素。除了点击一切正常。我有一个应用程序，在其中输入用户名和密码，然后单击登录按钮，但焦点仍然在密码上，如果我这样做，双击焦点仍然在选定模式下的密码上。

我正在使用以下代码进行双击

```
(new Actions(driver)).doubleClick(webelement).build().perform() 
```

从哪里`webelemet`过去

```
webelement = driver.findElement(By.id(xpath/id/name)); 
```

单击一次

```
driver.findElement(By.id(xpath/id/name)).click 
```

请澄清一下，这是驱动程序问题还是 Firefox 可能出现的其他问题，我没有收到任何与问题相关的点击。

注意过去两个月我正在研究 IE8，但从上周开始我注意到了这个问题，我没有更早得到。请提供任何我的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:23:10.250

尝试获取最新的 selenium、IE 驱动程序、IE 浏览器。有时，版本不匹配确实会产生这种问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T08:24:16.483

我不知道为什么总是IE？！我正在使用 Browserstack 并在各种浏览器中运行测试，当然在 IE8 中我无法单击单选按钮。如果您厌倦了一切，您可以随时使用 JS 单击问题收音机和/或其标签：

```
@driver.execute_script('return $("label[for=your_radios_id]").click() ') 
```

请注意，这是 Ruby 代码，因此请找到您的 Java、PHP... 对应项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:25:03.297

是的，在 IE 中我也遇到过这类问题。

试试这样

driver.findElement(By.id()).submit();

# batch-file - 清除 MSMQ 队列并从 bat 文件中重置 IIS

> ID：11793441
> 
> 赞同：8
> 
> 时间：2012-08-03T09:57:33.490
> 
> 标签：batch-file, msmq

是否可以从 bat 文件中清除 msmq 队列？

本质上，我想制作一个 bat 文件或至少快速简单的东西，以便未经培训的员工可以在不知道任何 shell 或管理工具的情况下单击并修复

有人可以帮助我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T10:06:27.013

查看[MSMQAdm 实用程序](http://msdn.microsoft.com/en-us/library/ms885786.aspx)

通过实用程序管理的任务包括：

*   浏览本地队列
*   **清除消息**
*   删除单个消息
*   停止和启动 MSMQ 服务
*   连接和断开网络

不要忘记 powershell，看看[PowerShell Community Extensions](http://pscx.codeplex.com/)

**更新**

打开powershell并逐行写入

```
[Reflection.Assembly]::LoadWithPartialName("System.Messaging")
$queueName = '.\Private$\testQueue'
$queue = new-object -TypeName System.Messaging.MessageQueue -ArgumentList $queueName
$queue.Purge() 
```

从 cmd 调用 powershell

1.  创建txt文件。
2.  插入所有行
3.  更改“ps1”上的文件扩展名

从 cmd 调用脚本的最简单方法。

> powershell.exe -executionpolicy 不受限制 C:\purgemsmq.ps1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-17T19:32:33.187

此代码有效：

```
[Reflection.Assembly]::LoadWithPartialName("System.Messaging") | Out-Null 
$Name=(get-wmiobject win32_computersystem).name
$QName=(
"FormatName:Direct=OS:$name\System$;DEADXACT",
"FormatName:Direct=OS:$name\System$;DEADLETTER"
)

foreach ($Q in $Qname){
$MessageQueue = New-Object System.Messaging.MessageQueue($Q)
$MSGCount=$($MessageQueue.GetMessageEnumerator2()).count

IF($MSGCount){
$MessageQueue.Purge()
Write-Host "$Q has been purged of $MSGCount messages." -ForegroundColor green
}
Else{
Write-Host "$Q is clean"}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-14T12:42:14.123

用于清除本地计算机上所有私有队列的 PowerShell 脚本：

```
[Reflection.Assembly]::LoadWithPartialName("System.Messaging")
$MachineName=(get-wmiobject win32_computersystem).name
[System.Messaging.MessageQueue]::GetPrivateQueuesByMachine("$MachineName") | % { $_.Purge(); } 
```

如[https://stackoverflow.com/a/11793579/1235394](https://stackoverflow.com/a/11793579/1235394)中所述，执行它的最简单方法是：

*   将脚本保存到文件`purge-private-msmq-queues.ps1`
*   在同一文件夹中创建`purge-private-msmq-queues.cmd`具有以下内容的脚本文件：

    ```
    powershell -executionpolicy Unrestricted .\purge-private-msmq-queues.ps1 
    ```

# iphone - 对于单个视图中的两个选择器，titleForRow 总是使用组件值 0 调用

> ID：11793447
> 
> 赞同：0
> 
> 时间：2012-08-03T09:57:59.710
> 
> 标签：iphone, ios5, uipickerview, picker

我在单个视图控制器中有两个选择器。他们使用两个 NSArray 来存储数据。

问题在于，对于两个选择器，当调用 titleForRow 方法时，组件参数的值始终为零，因此所有行都显示其数据数组中的第一个字符串。

为什么会发生这种情况，我该如何解决？

这些是我的委托方法：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    NSLog(@"%d",[pickerView tag]);
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:    (NSInteger)component
{
    NSLog(@"%d",[pickerView tag]);
    if ([pickerView tag] == 0)
        return providersList.count;
    else
        return amountList.count;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    NSLog(@"%d, %d",[pickerView tag],component);
    if ([pickerView tag] == 0)
        return [providersList objectAtIndex:component];
    else
        if ([pickerView tag] == 1)
            return [amountList objectAtIndex:component];
        else
            return nil;
} 
```

使用 xcode 4.3 和 iOS5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:09:05.457

组件用于选取器中的部分数量，行用于组件中的特定行。当您的选择器有多个部分时，您将收到不同的组件值。Row 表示组件中的 Row。

因此，如果您只有一个组件，那么您应该使用 row。

```
[amountList objectAtIndex:row]; 
```

# xaml - 如何更改 Silverlight Datagrid 中数据的 FontSize

> ID：11793449
> 
> 赞同：0
> 
> 时间：2012-08-03T09:58:07.053
> 
> 标签：xaml, silverlight, fonts, datagrid

我想弄清楚如何使我的 Datagrid 中数据的字体大小更大。

我的数据网格 XAML：

```
 <data:DataGrid x:Name="dgVisitData" Style="{StaticResource dgStyle}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" BorderBrush="LightSlateGray" BorderThickness="2"
                AutoGenerateColumns="False" ItemsSource="{Binding}">
        <data:DataGrid.Columns>
            <data:DataGridTextColumn Width="Auto" Header="Name" Binding="{Binding MemberName}" />
            <data:DataGridTextColumn Width="Auto" Header="Surname" Binding="{Binding MemberSurname}" />
            <data:DataGridTextColumn Width="Auto" Header="Member No" Binding="{Binding MemberNumber}" />
            <data:DataGridTextColumn Width="Auto" Header="Dependant No" Binding="{Binding MemberDependantNumber}" />
            <data:DataGridTextColumn Width="Auto" Header="Date" Binding="{Binding Date}" />
            <data:DataGridTextColumn Width="Auto" Header="Time" Binding="{Binding Time}" />
        </data:DataGrid.Columns>
    </data:DataGrid> 
```

使用样式我可以放大标题字体大小。

我需要做类似的事情来改变实际数据的字体大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:18:26.113

```
<sdk:DataGridTextColumn Binding="{Binding Name}" CanUserSort="True" SortMemberPath="Name" Header="Name">
    <sdk:DataGridTextColumn.ElementStyle>
        <Style TargetType="TextBlock">
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="12" />
        </Style>
    </sdk:DataGridTextColumn.ElementStyle>
</sdk:DataGridTextColumn> 
```

或者您可以为整个数据网格编写自己的数据网格样式

# list - 具有包含两个整数成员的对象的排序列表

> ID：11793456
> 
> 赞同：1
> 
> 时间：2012-08-03T09:58:25.947
> 
> 标签：list

嗨，有一个对象列表，其中包含两个整数。我想对该列表进行排序，如下所示。

```
public class ListClass
{
    public int rowIndex { get; set; }
    public int columnIndex { get; set; }
    public ListClass()
    {
    }

    public ListClass(int row, int column)
    {
        this.rowIndex = row;
        this.columnIndex = column;
    }
}

public static void main()
{
    List<ListClass> listClassList = new List<ListClass>();
    listClassList.Add(new ListClass(0,1));
    listClassList.Add(new ListClass(0,3));
    listClassList.Add(new ListClass(0,2));
    listClassList.Add(new ListClass(0,8));
    listClassList.Add(new ListClass(1,1));
    listClassList.Add(new ListClass(1,0));
    listClassList.Add(new ListClass(2,1));
    listClassList.Add(new ListClass(3,0));
    listClassList.Add(new ListClass(3,8));
    listClassList.Add(new ListClass(3,3));
    listClassList.Add(new ListClass(3,1));
    listClassList.Sort();
}
public void Sort()
{
    \\Help Here
} 
```

**排序此列表后，它应该是这样的。** (0,1)
(0,2)
(0,3)
(0,8)
(1,0)
(1,1)
(2,1)
(3,0)
(3,1)
(3,3)
(3,8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:13:44.177

更改 ListClass 以使用 IComparable 如下...

```
public class ListClass : IComparable<ListClass>
{
    public int rowIndex { get; set; }
    public int columnIndex { get; set; }

    public ListClass(int row, int column)
    {
        this.rowIndex = row;
        this.columnIndex = column;
    }

    public int CompareTo(ListClass other)
    {
        var index = this.rowIndex.CompareTo(other.rowIndex);
        return index == 0 ? this.columnIndex.CompareTo(other.columnIndex) : index;
    } 
} 
```

调用 listClassList.Sort(); 现在将按要求对列表进行排序。

有关详细信息，请参阅[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:04:09.777

一个简单的 LINQ 就可以做到！

```
List<ListClass> lstSorted = (from element in listClassList
                             orderby element.rowIndex, element.columnIndex
                             select element).ToList(); 
```

# android - Android清除活动堆栈并将启动器活动保留在

> ID：11793461
> 
> 赞同：1
> 
> 时间：2012-08-03T09:58:47.270
> 
> 标签：android, android-intent, stack

我想按下按钮来清除活动堆栈，但不要留下所有活动。我想将启动器活动留在堆栈中（因此，如果按下后退按钮转到 HomeScreen）。

做：

```
Intent launch = new Intent(context, LnewActivity.class);
launch.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

清除所有活动，还是将启动器活动留在堆栈中？文档中没有明确说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:39:16.810

实际上它确实将启动器 Activity 留在了堆栈中！

```
Intent intent = new Intent(this, Search.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T23:22:43.727

实际上在堆栈中`Intent.FLAG_ACTIVITY_CLEAR_TOP`搜索一个已经创建的实例并关闭所有到这个实例。如果堆栈中没有它的实例，它将不会清除任何内容。`Activity``Activities`

也许您正在寻找其他标志，例如：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

[安卓意图](http://developer.android.com/reference/android/content/Intent.html)

# javascript - Jquery 库 - 性能

> ID：11793462
> 
> 赞同：0
> 
> 时间：2012-08-03T09:58:47.480
> 
> 标签：javascript, jquery, performance

我有一个问题要讨论 - 为某些小部件、插件等添加额外的 javascript 库和 css 文件时的页面性能和速度。

例如：我想要一个简单的日期选择器和额外的时间选择器用于我的输入字段。

我必须集成的是 JQuery UI 库、timepicker 脚本、+2 个不同的 css 文件。

我认为那是很多额外的代码。我在速度方面没有太多经验，所以我问你们，所有这些额外的东西对页面速度和性能有多大影响？

变化是否明显？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:37:35.670

如何集成代码比代码存在这一事实更重要。如果您将它们全部保存在单独的文件中并将它们包含在页面的头部，那么它可能会大大降低您的页面速度（仅来自获取代码的往返行程）。

如果可以，您应该： - 将 css 与您现有的站点 css 合并（应该在头部并且可缓存） - 将时间选择器和支持库的所有脚本放入单个 js 文件中 - 异步加载 javascript或在正文的末尾，这样它就不会阻止任何页面内容的加载

您还需要注意如何将代码附加到 DOM 上的元素。如果你有一个相当复杂的 DOM，那么像 $(".mycalendar").xxx 这样的东西可能会非常昂贵，尤其是在旧的 IE 浏览器上。如果可能的话，为元素使用一个 ID 并使用它进行选择，否则 JQuery 最终会遍历整个 DOM（是的，javascript 执行本身很快，但任何接触 DOM 的东西都不是）。

# internet-explorer-9 - HTML5 视频标签 IE9

> ID：11793464
> 
> 赞同：1
> 
> 时间：2012-08-03T09:58:56.430
> 
> 标签：internet-explorer-9, html5-video

我添加了一个带有 html5 视频标签的弹出链接。似乎在所有浏览器上都可以工作，但在 IE9 上我得到一个空白视频，然后我必须右键单击它然后播放。似乎很混乱，因为视频容器不可见。 [空白视频容器 http://www.static2.descuentalomallorca.com/uploads/2.jpg](http://www.static2.descuentalomallorca.com/uploads/2.jpg) 点击页面左侧图片 [图片到视频 http://www.static2.descuentalomallorca.com/uploads/1.jpg](http://www.static2.descuentalomallorca.com/uploads/1.jpg) 我也是试图插入海报，但我得到了相同的结果......有机会吗？

[http://84.127.79.26.dyn.user.ono.com/LocutoresBU/es/component/content/article/423-got2b-blowdry-kit.html](http://84.127.79.26.dyn.user.ono.com/LocutoresBU/es/component/content/article/423-got2b-blowdry-kit.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:49:15.290

Slider.js 的代码中有一个错误，这可能会弄乱页面上的所有其他内容。IE 不支持 console.log。

```
Line: 204
Character: 31
Code: 0
Error Message: 'console' is undefined
URL: http://84.127.79.26.dyn.user.ono.com/LocutoresBU/modules/mod_djimageslider/assets/slider.js 
```

尝试先修复它，看看它是否有效。

# java - 在没有测试框架的情况下使用 Selenium 2？

> ID：11793465
> 
> 赞同：1
> 
> 时间：2012-08-03T09:58:58.533
> 
> 标签：java, testing, selenium, junit, webdriver

我一直在使用 Selenium 2 一段时间，目的是运行自动化测试。我的目标是用 Java 编写测试并在不同的浏览器中运行每个测试，如果可能的话，同时运行。我的问题是：为什么要为此使用 JUnit 之类的测试框架？这似乎是最常用的方法。然而，JUnit 使得处理多线程变得更加困难。我试图在没有测试框架的情况下使用普通的旧 java，这似乎工作得很好。所以我问你，我有理由使用 JUnit 吗？没有它，多线程是一项容易得多的任务。另外，有没有简单的方法来使用 JUnit 进行多线程？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:04:23.297

理论上，您可以强制 JUnit 使用多个并行线程。请参阅[这篇](http://www.javaworld.com/javaworld/jw-12-2000/jw-1221-junit.html?page=1)关于如何使用 JUnit 编写多线程测试的最佳实践文章。有[JUnit 扩展](http://groboutils.sourceforge.net/testing-junit/using_mtt.html)可以帮助你。所以这应该不是什么大问题。否则你可以从 TestNG 开始

但是，如果我是你，我会更担心 WebDriver 在多线程测试环境中是否运行良好。有[几个](http://code.google.com/p/selenium/issues/detail?id=3905) 与多线程使用有关的[未](http://code.google.com/p/selenium/issues/detail?id=2319) [解决问题（尤其是 IE 驱动程序）。](http://code.google.com/p/selenium/issues/detail?id=4320)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:41:51.673

是的，您应该使用 TestNG www.testng.org。它使编写测试变得轻而易举，并且可能完成您用 Java 编写的所有内容。为什么要重新发明轮子？

# c# - 如何在 wpf 中轻松处理数据网格

> ID：11793472
> 
> 赞同：0
> 
> 时间：2012-08-03T09:59:53.543
> 
> 标签：c#, wpfdatagrid

我使用 Windows 窗体制作了一个数独游戏，数据网格很容易处理，例如

```
dataGridView1[2,3]=5; 
```

现在在 wpf 中不能像这样使用数据网格，我需要找到最简单的方法来测试和填充网格，例如我有如下代码：

```
for (i = 0; i < 9; i++)
            {
                for (j = 0; j < 8; j++)
                {
                    for (k = j + 1; k < 9; k++)
                    {
                        if (dataGridView1[i, k].Value != null)....

                        }
                    }
                }
            } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:13:24.503

我不会阅读 dataGridView 的内容。相反，我会将控件（例如 datagridview）绑定到表示数独中值的数据结构。

这将允许您简单地检查数据结构（甚至向其添加方法、属性和事件）

只需在每个单元格中创建一个 Grid（9x9 单元格）和一个文本块，并将每个单元格的 text 属性绑定到二维数组的元素：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        ...
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        ...
    </Grid.RowDefinitions>
    <TextBlock Grid.Column="0" Grid.Row="0" Text="{Binding Path=Cells[0][0]}"/>
    <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Path=Cells[1][0]}"/>
    <TextBlock Grid.Column="2" Grid.Row="0" Text="{Binding Path=Cells[2][0]}"/>
    ...
</Grid> 
```

并在代码中设置 Grid 的 DataContext：

```
class Sudoku
{
    public int[,] Cells = new int[9,9];
    ...
}

private Sudoku _sudoku;

MainWindow_Loaded(...)
{
    _sudoku = new Sudoku();
    grid.DataContext= _sudoku;

} 
```

现在您可以简单地设置和检查`_sudoku.Cells[2,3]`

# build - Microsoft Visual Studio 2008 版本生成器

> ID：11793473
> 
> 赞同：1
> 
> 时间：2012-08-03T09:59:54.943
> 
> 标签：build, version

自动编号构建版本是否有任何智能解决方案。

每个构建都应该增加版本号并将其存储在可执行项目中的某个位置，并在程序执行期间读取此编号。

我正在使用 VS 2008 - 带有 .NET CF 3.5 的移动设备项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:04:43.967

在您的 AssemblyInfo.cs 中，只需：

```
[assembly: AssemblyVersion("1.0.*")] 
```

（没有`AssemblyFileVersion`）

这将根据日期和时间自动为版本的第三和第四部分编号 - 您仍然可以调整主要和次要版本以匹配您的营销团队对版本号的想法......

# linux - Codeigniter cron作业问题

> ID：11793479
> 
> 赞同：0
> 
> 时间：2012-08-03T10:00:11.250
> 
> 标签：linux, codeigniter, cron, command-line-interface, php

我有一个需要在我的站点上运行的 cron 作业。我已经设置了模型和控制器，然后将以下 cron 作业设置为每小时运行一次：

```
/usr/bin/php /path/to/directory/index.php cron resetViews; 
```

我的 config.php 文件中 $config 的 URI_PROTOCOL 索引设置为 AUTO 并且没有拼写错误。

当我运行命令时，我得到了我的主页的 4 个 html，这也是我的默认控制器。有任何想法吗？

**编辑**

我已将命令更改为：

```
cd /path/to/directory; /usr/bin/php index.php cron resetViews; 
```

现在我在主页的打印输出顶部收到以下错误：

> PHP：在第 1 行解析 /home/crowston/public_html/2012/php.ini 时出错

这是我的整个 php.ini 文件：

```
error_reporting(E_ALL);
ini_set('display_errors', 'On'); 
```

我也尝试过使用空白的 php.ini 文件，但无济于事。

php.ini 文件在整个网站建设过程中没有引起任何错误：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:04:18.120

你可以试试这个：

```
wget http://localhost/index.php/cron/resetViews 
```

基本上，既然你有能力使用 wget 肯定会调用控制器方法，为什么要使用 cli？

编辑：

参考[这个](http://codeigniter.com/user_guide/general/cli.html)，也许你应该`cd`对目录做一个命令，然后调用index.php。值得一试，因为如果 ci 试图从相对于 cron 密码的路径加载控制器，那么它可能会抛出 404。对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T08:25:02.163

这对我来说可以 ：

wget -O /dev/null -q [http://www.mani.com/project-name/index.php/tools/sendPushNotification](http://www.mani.com/project-name/index.php/tools/sendPushNotification)

(-O /dev/null -q) 命令用于删除日志文件

# virtualbox - 从 virtualbox guest 共享文件到 win7 主机，除了通过网络

> ID：11793482
> 
> 赞同：0
> 
> 时间：2012-08-03T10:00:15.697
> 
> 标签：virtualbox

virtualbox 的添加可以将文件从主机操作系统共享给来宾，但是来自 Win 主机的文件和目录不支持来宾上的文件链接，所以我直接使用来宾操作系统上的文件。现在我想共享客户操作系统上的一些文件到主机快速编辑，我知道一些通过网络的方法：

*   FTP/SFTP，使用一些ftp客户端，保存后自动翻译
*   NFS，通过网络共享目录并挂载为远程网盘。

有没有简单的方法来做到这一点？:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:30:57.447

只需在 virtualbox 未运行时右键单击您的来宾计算机即可设置您的共享文件夹。在 linux 客户机上，它将自动安装在 /media/sf_YourFolderName。对于其他来宾操作系统，请阅读 virtualbox 文档。

要了解更多信息，请阅读这篇关于如何在 virtualbox 来宾和主机之间设置不同的网络和共享场景的文章：http: [//prahladyeri.wordpress.com/2012/08/02/how-to-setup-a-virtual-局域网在您的机器上使用 oracle-virtualbox/](http://prahladyeri.wordpress.com/2012/08/02/how-to-setup-a-virtual-lan-on-your-machine-using-oracle-virtualbox/)

# java - PreparedStatement 的 setObject() 方法

> ID：11793483
> 
> 赞同：22
> 
> 时间：2012-08-03T10:00:18.253
> 
> 标签：java, jdbc

我可以对所有数据类型（如、或）使用 的`setObject()`方法吗？`PreparedStatement``String``int``double`

如果我使用它，可能会出现什么问题？

```
protected void fillStatement(PreparedStatement stmt, Object[] params)
        throws SQLException {

        if (params == null) {
            return;
        }

        for (int i = 0; i < params.length; i++) {
            if (params[i] != null) {
                stmt.setObject(i + 1, params[i]);
            } else {
                stmt.setNull(i + 1, Types.OTHER);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T10:47:15.543

我`setObject()`专门与 MySQL 一起使用，我从来没有遇到过问题。我不能代表其他数据库或其他供应商发言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T11:59:07.267

您可能会遇到 Blob 或 MSSQL DateTimeOffeet 等专用日期字段的问题。

我还发现了一个问题“无法在 java.lang.Character 和 JAVA_OBJECT 之间进行转换。”

如果参数是单字符类型。

```
 if (param instanceof Character) {
        param = "" + param;
    } 
```

# javascript - .load 和 .getScript 后的 jQuery 绑定仅在警报后有效

> ID：11793486
> 
> 赞同：1
> 
> 时间：2012-08-03T10:00:31.917
> 
> 标签：javascript, jquery, ajax, getscript

这是一个适合您的 jQuery Ajax 向导。使用 jQuery 1.7.2 但也尝试过 1.5.1 ...

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

主页加载一个外部（同域）JS 文件。在点击事件的回调中，我通过发布登录表单进行 AJAX 调用以登录。基于从身份验证调用传回的参数（JSON），我将一些内容和导航栏加载到主文档中。

```
 $("#loginForm_submit").click(function() {
    var action = $("#loginForm").attr('action');
    var form_data = {
        sbgusername: $("#sbgusername").val(),
        sbpassword: $("#sbpassword").val()
    };              

    $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(loginData){
            if(loginData.success == true){ 
                // this will be moved into a loop to laod multiple apps into one page. For testing
                // all arrays only have value
                var webapps = loginData.webapps; //array
                var webappservers = loginData.webappservers; //array 
                var webappscripts = loginData.webappscripts; //array
                var webAppContent = webappservers[0] + '  #' + webapps[0] + 'Content'; 
                // webAppContent = 'api/wpapp.cfm #wpContent';
                var webAppNav = webappservers[0] + '  #' + webapps[0] + 'Nav';
                // webAppNav = 'api/wpapp.cfm #wpNav';
                var scriptURL = webappscripts[0];
                // scriptURL = 'api/wpBase.js';
                var scriptLoad = webapps[0] + 'Load'; 
                // scriptLoad = 'wpLoad';
                $("#sbcore").load(webAppContent); //sbcore is div in main document
                $("#nav").load(webAppNav); //nav is div in main document
                $.ajaxSetup({ cache: false },{async:false});
                $.getScript(scriptURL, function(data, textStatus, jqxhr) {
                   window[scriptLoad](); //because getScript loads methods into global context from what I can tell
                });
                $.ajaxSetup({ cache: false },{async:true});
            }
            else
            {   alert(loginData.message);
                }
        },
        error: function(errorData){
            alert("Server couldn't be reached. Please Try again.");
        }

    });
    return false;               

}); 
```

加载的导航栏如下所示：

```
<div id="menu">
<ul>
    <li id="nw-menu-dashboard" class="first"><a href="#" accesskey="1" title="">Home</a></li>
    <li ><a id="nw-menu-privatearticles" href="#" accesskey="2" title="">Articles</a></li>
</ul> 
```

scriptLoad作为scriptURL加载的JS是这样的（注意它是从同一个域加载的）：

```
 function nwLoad() {
    //alert("nwBase.js ran");
    nwLoadMenu();
}
function nwLoadMenu() {
      //alert("here");
      $("#nw-menu-dashboard").on("click",function() { 
          //e.preventDefault();
          alert("doDashboard");
      });   
      $("#nw-menu-privatearticles").on("click",function() { 
          //e.preventDefault();
          alert("doPrivateArticles");
      });
} 
```

所以这是很奇怪的事情，如果我取消注释上面的`//alert("nwBase.js ran");` 或`//alert("here");`则菜单绑定到 div 并且菜单单击警报按需要工作。但如上所述，在绑定之前没有警报，它不起作用。我尝试使用 .click、.live、.

我尝试过加载同步、等待等，但无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:27:25.920

它不是有线的，在您取消注释`alert`功能后，一切都像您需要的那样。
因为在那段时间里，直到你没有按下 OK 按钮，你的菜单已经加载并且你的 CLICK 函数绑定正确。
当响应到来时调用你的`nwLoadMenu`函数 - 使用回调函数或延迟对象！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:50:36.277

我建议您通过回调（而不是 via `setTimeout`）重新尝试等待位。

# javascript - 不将变量传递给另一个函数

> ID：11793489
> 
> 赞同：-3
> 
> 时间：2012-08-03T10:00:42.997
> 
> 标签：javascript, html, css

我需要在 JavaScript 中将值从一个函数传递给另一个函数，但是当我尝试这样做时，它不起作用。问题在于`floaded2()`获取`theYoutubeGlobalState`.

**HTML**：

```
<html>
    <head>
    <script src = "http://www.youtube.com/player_api"></script>
    <script src = "jquery.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="utf-8">
    </head>
    <body dir = "rtl">

            <iframe src="http://www.youtube.com/embed/-cSFPIwMEq4" onload="floaded2()" title="YouTube video player" id="player" allowfullscreen="" frameborder="0" height="400" width="500"></iframe>

    </body>
</html> 
```

**JavaScript**：

```
var theYoutubeGlobalState;
        //onYouTubePlayerAPIReady
        function floaded() {
            player = new YT.Player('player', {
                videoId: '-cSFPIwMEq4',
                events: {
                    'onStateChange': function (event) {

                        theYoutubeGlobalState=event.data;                    }
                }
            });
        }

        function floaded2() {
            switch ( theYoutubeGlobalState )
             {
                 case 0:
                   alert("Ended");
                   break;
                 case 1:
                    alert("Playing"); 
                   break;
                 case 2:
                    alert("Paused"); 
                   break;            
            }
        } 
```

你可以检查一下：http: [//jsfiddle.net/3GGHW/1/](http://jsfiddle.net/3GGHW/1/)。你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:05:05.583

你似乎根本没有调用`floaded()`。将来，请尝试将 [reduced] 测试用例直接粘贴到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:10:16.297

我让它在这里工作：

[http://jsfiddle.net/3GGHW/2/](http://jsfiddle.net/3GGHW/2/)

您在 HTML 中为 onload 事件处理程序设置了错误的函数 - 必须`floaded()`不是`floaded2()`- 并且您需要`floaded2()`从`floaded()`. 就是这样。

# android - Android - Listview OnItemClickListener 无法识别复选框选中事件

> ID：11793492
> 
> 赞同：0
> 
> 时间：2012-08-03T10:00:45.647
> 
> 标签：android, android-listview

我最近开始在 Android 上工作。我有一个列表视图，列表视图的行包含文本视图和复选框。我在我的活动程序中使用 OnItemClickListener 来获取检查事件。我能够进入 OnItemClickListenr。但是在这里面我无法获得选中的事件，我已经尝试了很多，但是我的程序无法识别复选框选中的事件。请帮忙。下面是我的代码 -

列表视图的行 -

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
      android:orientation="vertical" 
        android:background="@android:color/white" >

        <TextView
            android:id="@+id/tvShapeDesc"
            android:layout_width="230dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="25dp"
            android:textColor="@android:color/black" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="35dp"
        android:background="@drawable/unchecked"
        android:clickable="false"
        android:focusable="false"
        android:text="No"
        android:visibility="visible"/>

</RelativeLayout> 
```

下面是我的 listview 自定义适配器的 getview -

```
public View getView(int position, View convertView, ViewGroup parent) {
        View itemView = null;
        shapeObj = this.shapeList.get(position);

          if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                itemView = inflater.inflate(R.layout.shapelist_item, null);
          } else {
        itemView = convertView;
          }

          TextView tvShape = (TextView) itemView.findViewById(R.id.tvShapeDesc);
          final CheckBox cbSelection = (CheckBox) itemView.findViewById(R.id.checkBox1);

          tvShape.setText(shapeObj.getName());

          cbSelection.setTag(position);

        return itemView;
   } 
```

下面是我的 OnItemClickListener -

```
lv.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapter, View view, int position, long arg)
        {

        Toast.makeText(getApplicationContext(),
        "Click ListItem Number " + position, Toast.LENGTH_LONG).show();

        // CheckBox cbSelection = (CheckBox) view.getTag(position);      
        final CheckBox cbSelection = (CheckBox) view.findViewByI(R.id.checkBox1);

             final Drawable checkedImage = view.getResources().getDrawable(R.drawable.checked);
             final Drawable uncheckedImage = view.getResources().getDrawable(R.drawable.unchecked);

        if((cbSelection).isChecked()){    
            Toast.makeText(getBaseContext(), "You checked " + position, Toast.LENGTH_SHORT).show();  
            selectedCounter++;  
                  cbSelection.setVisibility(CheckBox.INVISIBLE);
                  cbSelection.setBackgroundDrawable(checkedImage);
                  cbSelection.setVisibility(CheckBox.VISIBLE);
        } else {                     
            Toast.makeText(getBaseContext(), "You unchecked " + position, Toast.LENGTH_SHORT).show();      
            selectedCounter--;
            cbSelection.setBackgroundDrawable(uncheckedImage);
                cbSelection.setVisibility(CheckBox.VISIBLE);
            }

        shapeStr = Integer.toString(selectedCounter) + " shapes(s) selected.";
        shapeCountStr.setText(shapeStr);

        } 
```

程序没有进入 - if((cbSelection).isChecked()){ ...请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:14:08.200

试试下面的代码

```
checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
        {               

            if(isChecked)
            {
                  // checkbox ckecked
            }
            else
            {
                 // checkbox un-ckecked
            }
        }
    }); 
```

# asp.net - 使用 css 减小菜单栏的高度

> ID：11793493
> 
> 赞同：1
> 
> 时间：2012-08-03T10:00:50.187
> 
> 标签：asp.net, css

我是 CSS 新手，请您建议如何降低菜单栏的高度。

在 Visual Studio 2010 中，我打开了一个新项目并选择了 ASP.Net 网站。因为我必须改变菜单栏的宽度

![在此处输入图像描述](../Images/7d83b299e36878cc85fa7213157c4aca.png)

到

![在此处输入图像描述](../Images/ebd06391c3d9f127751a3ee370632bb2.png)

```
<div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items>
            </asp:Menu>
        </div> 
```

这是 css [CSS](https://docs.google.com/open?id=0B_E1xtFQcbXdR25QVzlmM3hjNEU) & 这是页面源[Pagesource](https://docs.google.com/open?id=0B_E1xtFQcbXdQ3RtWUZNLS1HNGs) 它在设计器中正确显示，但是当我运行项目时，宽度会增加！！！

当我在 Firefox 中打开时，它会正确打开，如果我在 chrome 中打开，空间会增加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:22:34.773

我花了几个小时在我的电脑上获得了 VS Web Developer 免费版。:\ 我记得以前遇到过这个问题，我知道我之前也想出了如何解决它。基本上它与与布局冲突的默认样式之一有关。控件中有几个隐藏的锚标记`asp:Menu`。要修复它，您只需将此样式规则添加到默认工作表（在选项卡菜单下）：

```
.hideSkiplink a
{
    display:none;
} 
```

我不知道这些链接是用来做什么的，但如果你当时没有使用，这个样式规则会纠正这个问题。

# java - 在Android中运行线程时避免多次点击按钮

> ID：11793495
> 
> 赞同：0
> 
> 时间：2012-08-03T10:00:55.890
> 
> 标签：java, android, multithreading

我有一个按钮，当用户点击按钮时，我运行一个线程来做某事。

当用户多次点击我的按钮时，我有许多线程同时运行。

我怎样才能避免它，当用户多次点击时，我只运行线程运行。当第一个线程完成时，第二个线程可以运行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:05:26.173

您是否尝试过：`myButton.setEnabled(false)`按下按钮时添加，然后添加`myButton.setEnabled(true)`到线程的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:09:16.980

您需要保留一个布尔值，表明您已对点击采取行动并启动了线程。像这样的东西：

```
boolean threadStarted = false;

public void onClick(View v) {
    if (!threadStarted) {
        // start thread here
        threadStarted = true;
    } else {
        // Ignore this spurious click
    }
} 
```

**注意：不要忘记在线程完成后将布尔值重置为 false**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:07:46.710

使用 asynctask 进行处理。你可以看到[这个](http://developer.android.com/reference/android/os/AsyncTask.html)。使用如果按下按钮，一旦您的用户界面将无法触摸，直到该过程结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T12:24:18.227

在 xamarin android 中面临同样的问题。以不同的方式修复它。同样的想法也适用于 android Java 开发人员。

```
public  class SingleClickListener
{
    public SingleClickListener(Action<object, EventArgs> setOnClick)
    {
        _setOnClick = setOnClick;
    }
    private bool hasClicked;

    private Action<object, EventArgs> _setOnClick;

    public void OnClick(object v, EventArgs e)
    {
        if (!hasClicked)
        {
            _setOnClick(v, e);
            hasClicked = true;
        }
        reset();
    }

    private void reset()
    {
        Android.OS.Handler mHandler = new Android.OS.Handler();
        mHandler.PostDelayed(new Action(() => { hasClicked = false; }), 500);
    }
} 
```

# git - git重置分支

> ID：11793497
> 
> 赞同：1
> 
> 时间：2012-08-03T10:01:10.443
> 
> 标签：git, git-svn

是否可以重置当前未签出的分支？

我想创建一个将执行的 cron 脚本，`git svn fetch`然后用新的更改更新跟踪 svn 远程分支的所有本地分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:54:07.970

当然，很容易。

```
git update-ref -m "message" refs/heads/whatever new-value old-value 
```

该消息是您希望出现在 reflog 中的任何内容。你可以省略它。

这`old-value`避免竞争条件。它会在更新之前检查 ref 是否仍然具有该值，因此如果在您处理它时另一个脚本对其进行了更新，则操作将失败。如果您没有竞争条件的风险，则不必指定它。

你当然**要知道你在做什么**。注意不要在那里丢弃任何重要的修订。

您也**不能对已签出的分支执行此操作**。避免通过执行签出任何分支可能是最有用的`git checkout HEAD@{}`。这将使特殊的 ref`HEAD`直接存储提交 ID，您可以更新任何 ref，然后您可以返回`git checkout`任何您想要的内容。

# node.js - Jade 模板小写

> ID：11793503
> 
> 赞同：6
> 
> 时间：2012-08-03T10:01:23.390
> 
> 标签：node.js, templates, filter, pug

我在一个`nodejs`项目中使用玉

找不到如何定义过滤器

我有要在选择框中显示的类别、小写选项值和大写选项文本

```
select
  each cat in categories
    option(value="lowercase(#{cat})") uppercase(#{cat}) 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T10:08:42.857

Why are you not using the native JavaScript functions to do so?

```
select
  each cat in categories
    option(value=cat.toLowerCase())= cat.toUpperCase() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-10T19:37:11.487

您还可以使用：

```
select
  each cat in categories
    option(value=#{cat.toLowerCase()}) #{cat.toUpperCase()} 
```

# java - 如果一段代码没有在特定的时间限制内返回，如何导致一段代码在 Java 中超时？

> ID：11793507
> 
> 赞同：3
> 
> 时间：2012-08-03T10:01:37.247
> 
> 标签：java, multithreading, concurrency, executorservice, java.util.concurrent

我有以下代码连接到服务器，发送请求，然后返回响应。

问题是如果客户端无法连接到服务器，程序永远不会超过这个部分

```
PayLoad payLoadFromServer = client.sendRequest(); 
```

我只是想知道防止程序冻结的最佳方法是什么，即如果客户端无法连接，我想在 5 秒后超时，并且能够在程序中优雅地处理它。注意我不能编辑 Client 类。

```
public PayLoad queryServer() {
        try (final Client client = new Client("127.0.0.1", "8080")) {
            PayLoad payLoadFromServer = client.sendRequest();

            return payLoadFromServer;
        }
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:12:09.760

您应该在类中使用[java.net.Socket的](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)[connect(SocketAddress endpoint, int timeout)](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#connect%28java.net.SocketAddress,%20int%29)方法。这是最好的解决方案，但它可能存在其他解决方案。`Client`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:06:14.320

我会在客户端代码中添加一个计时器，以便在 5 秒内未建立连接时关闭 Socket。这在外部*更难*做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:42:53.140

我试着快速尝试一下。为您的客户端类创建一个包装器对象并使这个新对象可运行。

```
public class ClientWrapper implements Runnable {

  private final String ip;
  private final String port;
  private Client client;
  Lock lock = new ReentrantLock();

  /**
   * Creates a new instance of ClientWrapper.
   * 
   * @param ip
   * @param port
   */
  public ClientWrapper(String ip, String port) {

    this.ip = ip;
    this.port = port;
  }

  public Lock getLock() {

    return lock;
  }

  /**
   * {@inheritDoc}
   */
  @Override
  public void run() {

    lock.lock();
    client = new Client(ip, port);
    lock.unlock();
  }

  //create a method to expose client or its methods. 

} 
```

现在使用这个对象的一个​​实例作为线程，如下所示。

```
import java.util.concurrent.TimeUnit;

/**
 * @author rbhatt
 */
public class ClientCaller {

  public static void main(String args[]) throws InterruptedException {

    ClientWrapper clientWrapper = new ClientWrapper("127.0.0.1", "8080");

    Thread t = new Thread(clientWrapper);
    t.start();

    boolean ret = clientWrapper.getLock().tryLock(250, TimeUnit.MILLISECONDS);

    if (ret == false) {
      System.out.println("can not acquire lock in 250 milliseconds, kill the thread.");
      t.interrupt();
    } else {
      System.out.println("acquired lock in 250 milliseconds,release lock obtain client!");
      clientWrapper.getLock().unlock();
    }

  }

} 
```

如您所见，您可以在调用者中控制您的超时，而我们无法获得锁，杀死客户端包装线程。我用过中断，可以用`volatile`变量。您也可以使用 a`executor service`等`thread pools`。

**注意：我编写这段代码只是为了说明这个想法，可以通过许多不同的方式改进代码。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:13:05.513

如果您使用 Socket 连接到客户端，您可以提供一个 SocketFactory 并为它创建的每个 Socket 设置超时。

否则，我可能会使用两个线程。第一个做实际连接，第二个在超时后第一个触发中断。

这将需要一系列锁，一个用于防止在您尝试连接之前发生超时，一个用于等待尝试连接

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:15:54.030

最好使用 Timer，这里是网络操作超时的一个很好的链接。 [在 Java](http://www.javacoffeebreak.com/articles/network_timeouts/) [http://www.javacoffeebreak.com/articles/network_timeouts/中处理网络超时](http://www.javacoffeebreak.com/articles/network_timeouts/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-25T15:34:12.393

不是最好的主意，但这取决于您的项目逻辑和环境。您可以使用 ExecutorService 包装您的方法：

```
import java.util.concurrent.*;

private int threads = 10;

// overide thread count to prevent too many threads to be created
private ExecutorService executor = new ThreadPoolExecutor(0, threads,
        60L, TimeUnit.SECONDS,
        new SynchronousQueue<Runnable>());

// if TimeOutException isthrown - then 5 secs is out
public PayLoad sendRequest(long timeout) throws InterruptedException, ExecutionException, TimeoutException {
       return executor.submit(new Callable<PayLoad>() {
            @Override
            public PayLoad call() {
                  // your code implementation of client.sendRequest();
            }
        }).get(timeout, TimeUnit.SECONDS);
 } 
```

我在这里使用了 10 个线程的缓存线程池。唯一不好的事情是用另一个线程包装每个方法调用。并且不要忘记关闭您的池实施。

# vb.net - 模态窗口作为 Excel 工作表

> ID：11793508
> 
> 赞同：-2
> 
> 时间：2012-08-03T10:01:39.510
> 
> 标签：vb.net, vba, excel, vsto

我怎样才能拥有一个充当 excel 工作表的模态窗口？此外，模态窗口应该只显示 excel 单元格，而不是功能区选项卡（主页、插入、页面布局等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:31:49.050

你需要得到一个像葡萄城的Spread.Net这样的控件。

[http://www.gcpowertools.com/Products/SpreadNET](http://www.gcpowertools.com/Products/SpreadNET)

# php - apigen - 错误：服务器遇到内部错误，无法完成您的请求

> ID：11793511
> 
> 赞同：1
> 
> 时间：2012-08-03T10:01:57.450
> 
> 标签：php, documentation

我刚刚安装了[apigen](http://apigen.org/) 2.7.0 并尝试生成一些文档。我尝试从 NetBeans 中以及从命令行使用`--debug`参数运行 apigen，但我总是得到相同的错误输出：

```
ERROR: the server encountered an internal error and was unable to complete your request.

For more information turn on the debug mode using the --debug option. 
```

我还尝试了来自 github 的最新版本的 apigen，但仍然得到相同的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:12:58.810

在您的`php.ini`. 这将在 2.7.1 中很早就解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T10:29:04.507

我假设您使用的是 Linux。您是否按照所述使用 --debug 选项运行它？什么是输出：

```
$ apigen --version --debug 
```

此外，请检查 IDE 的日志文件。不过，这很可能是 Netbeans**权限**的问题。以 sudo 运行它应该可以解决问题：

```
sudo netbeans 
```

如果您不想以特权用户身份运行它，请检查日志并更改每个被拒绝的写入操作的权限（其中许多确实如此）。

总而言之，您可能还想检查[phpdocumentor](https://www.phpdoc.org/)。或蟒蛇:)

# iphone - NSTimer：如何将它用于数据库

> ID：11793516
> 
> 赞同：0
> 
> 时间：2012-08-03T10:02:18.370
> 
> 标签：iphone, ios, xcode, sqlite

我有一个包含 5 条记录的数据库，我需要使用计时器在屏幕上一一显示记录。时间间隔应为 30 秒。

```
- (NSMutableArray*) fnGetName 
{

DBCon *oDBCon = [[DBCon alloc] init];
[oDBCon fnInitializeDB];
NSMutableArray *arrDict = [[NSMutableArray alloc] init];
NSString *sQryName = [NSString stringWithFormat:@"SELECT * FROM tbl_names"];
sqlite3_stmt *selectstmt;
if(sqlite3_prepare_v2(oDBCon.database, [sQryName UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) 
{
        while(sqlite3_step(selectstmt) == SQLITE_ROW) {
        oBlossom = [[Blossom alloc]initWithPrimaryKey:primaryKey database:oDBCon.database];
        oBlossom.psName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,1)];
        NSLog(@"oBlossom.psName %@", oBlossom.psName);
        oBlossom.psKeyword = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,2)];
        NSLog(@"oBlossom.psKeyword %@", oBlossom.psKeyword);
        [arrDict addObject:oBlossom];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:22:34.463

返回**arrDict**并使用 Timer 更新 UI

**注意：**当您完成操作时使计时器无效。否则它不会停止并会导致崩溃。

```
-(void)disaplydisplayRecordsWithTimeInterval{

    NSMutableArray *myCollection = [self fnGetName];

    NSTimer timerWithTimeInterval:30.0 target:self selector:@selector(displayRecords:) userInfo:arrDict repeats:YES];

}

- (void)displayRecords:(NSTimer*)theTimer {

    NSMutableArray *myArrayCollection = (NSMutableArray *)theTimer.userInfo;
    //your code here to displayRecords using myarrDict
}

- (NSMutableArray*) fnGetName {

    DBCon *oDBCon = [[DBCon alloc] init];
    [oDBCon fnInitializeDB];
    NSMutableArray *arrDict = [[NSMutableArray alloc] init];
    NSString *sQryName = [NSString stringWithFormat:@"SELECT * FROM tbl_names"];
    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(oDBCon.database, [sQryName UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) 
    {
        while(sqlite3_step(selectstmt) == SQLITE_ROW) {
            oBlossom = [[Blossom alloc]initWithPrimaryKey:primaryKey database:oDBCon.database];
            oBlossom.psName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,1)];
            NSLog(@"oBlossom.psName %@", oBlossom.psName);
            oBlossom.psKeyword = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,2)];
            NSLog(@"oBlossom.psKeyword %@", oBlossom.psKeyword);
            [arrDict addObject:oBlossom];

        }

        //finilize database here
    }

    //close database here

    return arrDict;
} 
```

# rest - 在 jboss 4.2.2.GA 中部署 HTTPBuilder/Rest 插件？

> ID：11793517
> 
> 赞同：1
> 
> 时间：2012-08-03T10:02:30.640
> 
> 标签：rest, grails, jboss, httpbuilder

我无法使用 HTTPBuilder 的 REST 插件功能在 jboss 中调用 http/https 链接。由于在创建war文件后在grails中完成了开发，因此无法`httpBuilder`根据需要访问已包含在lib文件夹中的类。

我试图`http-builder-0.5.3.jar`在 jboss-classpath 中包含相同的 jar，但它仍然`java.lang.ClassNotFoundException`在调用 HTTPBuilder 方法时给出错误。

# php - 在数据库中使用月份名称和年份搜索日期

> ID：11793520
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:02:38.223
> 
> 标签：php, mysql, database, date

这将有点令人困惑，我认为解释......

我有一个表格，您可以在其中选择月份 (mes)、年份 (ano) 和运动类型 (movimento)

我想要做的是创建一个搜索查询，在数据库（fluxo）中找到您在表单上选择的这 3 个值中的所有重复数据，我的问题是当我选择 3 时，我得到的 SUM 来自我拥有的所有运动类型（tipo），我只想要那些尊重我之前选择的所有 3 个字段的运动，我想知道是否有可能的方法加入 MONTHNAME 和 YEAR 以通过数据库搜索重复日期

这是我的代码：

```
$result5 = mysql_query('SELECT SUM(valor) AS value_sum FROM fluxo WHERE tipo = "'.$tipo.'" AND MONTNAME(data) = "'.$meses[$mes].'" AND YEAR(data) = "'.$ano.'" having count(tipo, data)>1  '); 
$row5 = mysql_fetch_assoc($result5); 
$sum5 = $row5['value_sum']; 

$n=1; 

echo "<p>Os seus resultados:<p>";

echo "<table border=0>";
echo "<tr bgcolor='#CCFFCC'>";
echo "<td style='width: 100px;'>Tipo</td>";
echo "<td style='width: 100px;'>Movimento</td>";
echo "<td style='width: 100px;'>Valor</td>";
echo "<td style='width: 100px;'>Data</td>";
echo "</tr>";

while($row = mysql_fetch_array($result4)){ 
    echo "<tr bgcolor='#CCCCCC'>";
    echo "<td style='width: 100px;'>".$row['tipo']."</td>";
    echo "<td style='width: 100px;'>".$row['movimento']."</td>";
    echo "<td style='width: 100px;'>".$row['valor']."</td>";
    echo "<td style='width: 100px;'>".$row['data']."</td>";
    echo "</tr>";

}

echo "</table>";

echo "<p> Valor errado, apenas a somar tudo: " .$sum5;

?> 
```

我知道这听起来有点令人困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:11:12.757

要按月/年搜索，我通常使用以下内容：

```
$sql = "SELECT * FROM `table` WHERE `date` LIKE '".$year."-".sprintf("%02d",$month)."-%'"; 
```

我不知道这是否是最好的解决方案性能，但它对于我使用它的效果非常好。

# c# - WCF 客户端缓存 Windows 身份验证

> ID：11793524
> 
> 赞同：4
> 
> 时间：2012-08-03T10:03:04.447
> 
> 标签：c#, visual-studio-2010, wcf, wcf-security

我正在调用 Navision 公开的 Web 服务，它通过 Windows 身份验证进行保护。我能够成功调用它，但在那之后，它似乎以某种方式缓存了凭据，这让我担心。

该服务托管在远程服务器上，并且与我的开发机器位于不同的域中。我正在从 Visual Studio 运行代码。

我已经创建了对该服务的服务引用，并且我的 app.config 中没有配置，因此所有设置都是使用代码创建的。

首次运行（未指定客户端凭据）：

```
var binding = new BasicHttpBinding();
binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;

var address = new EndpointAddress("http://externalserver.com/DynamicsNAV/WS/Customer/Page/MyPage");

var client = new MyPage_PortClient(binding, address);
client.ClientCredentials.Windows.AllowNtlm = true;
client.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Impersonation;

var reqObj = new MyPage() { TypeID = "Test", Company_Name = "Test:" + DateTime.Now.ToShortTimeString() };
client.Create(ref reqObj);
client.Close();
Console.WriteLine(reqObj.Company_Name);
Console.ReadLine(); 
```

这给了我一个安全例外。正如预期的那样。

第二次运行（使用凭据）：

```
var binding = new BasicHttpBinding();
binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;

var address = new EndpointAddress("http://externalserver.com/DynamicsNAV/WS/Customer/Page/MyPage");

var client = new MyPage_PortClient(binding, address);
client.ClientCredentials.Windows.ClientCredential.Domain = "MYDOM";
client.ClientCredentials.Windows.ClientCredential.UserName = "NavWebService";
client.ClientCredentials.Windows.ClientCredential.Password = "foo";
client.ClientCredentials.Windows.AllowNtlm = true;
client.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Impersonation;

var reqObj = new MyPage() { TypeID = "Test", Company_Name = "Test:" + DateTime.Now.ToShortTimeString() };
client.Create(ref reqObj);
client.Close();
Console.WriteLine(reqObj.Company_Name);
Console.ReadLine(); 
```

此调用成功。再次，正如预期的那样。

第三轮，和第一轮一样。也就是说，没有指定凭据。那个调用成功了。现在我很困惑。必须以某种方式缓存凭据？我重新启动机器，结果相同。还是成功了。

然后我尝试指定伪造的凭据：

```
var binding = new BasicHttpBinding();
binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;

var address = new EndpointAddress("http://externalserver.com/DynamicsNAV/WS/Customer/Page/MyPage");

var client = new MyPage_PortClient(binding, address);
client.ClientCredentials.Windows.ClientCredential.Domain = "fakeMYDOM";
client.ClientCredentials.Windows.ClientCredential.UserName = "fakeNavWebService";
client.ClientCredentials.Windows.ClientCredential.Password = "badPwd";
client.ClientCredentials.Windows.AllowNtlm = true;
client.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Impersonation;

var reqObj = new MyPage() { TypeID = "Test", Company_Name = "Test:" + DateTime.Now.ToShortTimeString() };
client.Create(ref reqObj);
client.Close();
Console.WriteLine(reqObj.Company_Name);
Console.ReadLine(); 
```

此调用失败。正如预期的那样。

我再次回到第一个电话，这仍然成功。因此，它实际上仍在缓存第一次成功调用的凭据，即使我同时尝试使用无效凭据。

谁能告诉我这里发生了什么？这是我对 Windows 身份验证不了解的地方吗？Visual Studio/WCF 中是否有某种凭据缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:18:50.340

没错，Windows 令牌正在被缓存。这是一篇关于[Impersonation and Delecation with WCF](http://msdn.microsoft.com/en-us/library/ms730088%28v=vs.100%29.aspx)的 MSDN 文章，其中涵盖了缓存的令牌模拟。

# shell - 从 .pem 文件中读取通用名称

> ID：11793528
> 
> 赞同：10
> 
> 时间：2012-08-03T10:03:22.230
> 
> 标签：shell, ssl, certificate

有没有办法从我的外壳中的 .pem 文件中读取公用名？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-03T14:45:20.220

首先，`.pem`扩展名仅指文件中使用的编码类型。

通用名称将是证书的主题或颁发者的一个特征，并且可以通过线条识别

```
$ grep CERTIFICATE f.pem
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE----- 
```

以及介于两者之间的大量 base64 编码文本。

如果`.pem`文件包含[x509 证书](https://en.wikipedia.org/wiki/X.509)，这应该可以解决问题：

```
openssl x509 -in cacert.pem -noout -text 
```

这将转储整个证书。该[`openssl x509`](https://www.openssl.org/docs/manmaster/man1/x509.html) 命令有几个选项可以抑制您不想看到的字段。您可以在手册页中找到那些解释，在[`TEXT OPTIONS`](https://www.openssl.org/docs/manmaster/man1/x509.html#Text-Options)

您还可以选择仅显示证书的“主题”：

```
openssl x509 -in cacert.pem -noout -subject 
```

* * *

例子：

`stackoverflow.com`让我们直接从服务器获取证书

```
$ : | openssl s_client -connect stackoverflow.com:443 > f.pem 2>& 1 &&
      openssl x509 -in f.pem -noout -subject 2>& 1 
```

输出：

```
Subject: CN = *.stackexchange.com 
```

# ios - 用于显示格式化帖子的 UIWebView 的替代方案

> ID：11793534
> 
> 赞同：2
> 
> 时间：2012-08-03T10:03:38.447
> 
> 标签：ios, uiwebview, core-text

好吧，我在 google 中发现了很多关于 UIWebView 不好的讨论。我正在尝试创建一个将显示论坛（公告板）主题/帖子的 ios 应用程序。Safari 显示它们的速度很慢，所以我打算使用 ATOM 提要在原生 ios 应用程序中显示主题。现在的问题是，在 ATOM 提要中，帖子是 html 格式的。在 web 视图中显示它们与使用移动 safari 浏览网站相同（即使是缺少硝基引擎的最糟糕的 bcz）。所以我认为我应该转换/解析 html，然后使用核心文本显示它们。那会很快吗？我应该转换/解析应用程序内的 html 还是使用服务器端解析？如果我在应用程序内部解析，那会很迟钝吗？是否有任何可用的库可以使用核心文本呈现 html？我的 html 将相当简单，只是粗斜体下划线，有时是图像。（字体大小始终相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:42:40.317

看看 Cocoetics 的[DTCoreText](https://github.com/Cocoanetics/DTCoreText)。我没有亲自使用过它，但我认为它完全符合您的要求。

# asp.net - 还没有收到 SMTP 发送的邮件？

> ID：11793539
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:04:01.447
> 
> 标签：asp.net, email, smtp

我使用本地 Smtp 服务器向注册用户电子邮件 id 发送邮件。这表明邮件是因为它在引用的 PICKUP-DIRECTORY 中创建了一个 .eml 文件。该文件包含有关邮件的所有详细信息。但接收者尚未自发送以来已经过去了超过 10 分钟。为什么这样？

提前致谢。

* * *

好的。这是代码。

```
 <asp:CreateUserWizard ID="userwizard" ContinueDestinationPageUrl="~/secretfiles/secret.aspx" runat="server" >
    <MailDefinition BodyFileName="register.txt" Subject="Registration Confirmation" From="amrit.enest@gmail.com" />
    </asp:CreateUserWizard> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:18:14.163

阅读这篇[文章](http://forums.asp.net/t/1444046.aspx/1)。`mailSettings`请记住，您需要设置`web.config`并遵循任何其他指导。那应该让它为你工作。

[本文](http://www.mycsharpcorner.com/Post.aspx?postID=33)还向您展示了如何使用 Gmail 作为中继服务器。

# javascript - 如何仅使用 javascript（无 Jquery）序列化对象？

> ID：11793542
> 
> 赞同：0
> 
> 时间：2012-08-03T10:04:11.613
> 
> 标签：javascript, object, serialization, httpwebrequest

我有一个对象说图像

```
 look : {
            name : "hello baby",
            tag_list : "hello",
            collection_id : 1,
            category_id : 1
        }, 
```

我想序列化这个对象，以便它可以通过**POST / GET**请求发送到服务器。我不能为此目的使用 JQUery。

看[名字]=你好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:10:17.117

尝试这个：

```
var a = [];
for (var p in obj)
    a.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
var qstring = a.join("&"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:07:40.120

Try using for..in loop. It gets each variable from object.

```
function serialize(obj)
{
     var serialized = "";
     for (variable in obj)
     {
        if(serialized != "") serialized += "&";
        serialized += variable + "=" + encodeURIComponent(obj[variable]);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:08:53.613

Code taken from [http://www.codeproject.com/Tips/46827/Serialize-Object-in-Javascript](http://www.codeproject.com/Tips/46827/Serialize-Object-in-Javascript)

```
function serialize(obj)
    {
        var returnVal;
        if(obj != undefined){
        switch(obj.constructor)
        {
            case Array:
                var vArr="[";
                for(var i=0;i<obj.length;i++)
                {
                    if(i>0) vArr += ",";
                    vArr += serialize(obj[i]);
                }
                vArr += "]"
                return vArr;
            case String:
                returnVal = escape("'" + obj + "'");
                return returnVal;
            case Number:
                returnVal = isFinite(obj) ? obj.toString() : null;
                return returnVal;               
            case Date:
                returnVal = "#" + obj + "#";
                return returnVal;       
            default:
                if(typeof obj == "object"){
                    var vobj=[];
                    for(attr in obj)
                    {
                        if(typeof obj[attr] != "function")
                        {
                            vobj.push('"' + attr + '":' + serialize(obj[attr]));
                        }
                    }
                        if(vobj.length >0)
                            return "{" + vobj.join(",") + "}";
                        else
                            return "{}";
                }       
                else
                {
                    return obj.toString();
                }
        }
        }
        return null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:09:34.673

For plain one dimensional objects, you can use

```
var ser ="";
for (var o in look) ser += "&"+o+"="+encodeURIComponent(look[o]);
alert(ser.substring(1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:12:58.733

[这](https://github.com/douglascrockford/JSON-js/blob/master/json.js)会为您的对象添加一个 stringify 方法，并为您的字符串添加一个 parseJSON 方法。

来源：[JSON.org](http://json.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T10:13:58.457

只需使用：

```
var look = {
            name : "hello baby",
            tag_list : "hello",
            collection_id : 1,
            category_id : 1
        };

   var serialized_object = JSON.stringify(look);  // to serialize an object
   var deserialized_object = eval('('+ serialized_object + ')');  // to deserialize an object 
```

# html - 对齐列表并将文本推到底部

> ID：11793546
> 
> 赞同：5
> 
> 时间：2012-08-03T10:04:33.957
> 
> 标签：html, css

我有一个包含标题、边框和简要说明的 3 个框列表。

目前它看起来像这样：

![在此处输入图像描述](../Images/c0764d97ccb266dd063d6c60911ed17a.png)

我想只使用 CSS 来对齐绿色边框并将所有单行标题推到底部。

内容和标题是动态的，因此可能会出现标题有 1、2、3 行的情况，但我总是希望行数较少的标题从底部开始，如下例所示。

![在此处输入图像描述](../Images/293174082d6634742b053058db0fabee.png)

我不能使用Javascript！

任何建议将不胜感激。

* * *

目前的代码结构是这样的：

HTML：

```
<section id="" class="boxes">
                <ul class="inline">
                    <li>
                        <article>
                            <h2>Mae hyn yn enghraifft prif llawer hwy</h2>
                            <p>
                                Mae llawer o bethau gwych cymaint yn mynd ymlaen yr haf hwn a, beth bynnag yw eich cynlluniau, nawr yw'r amser i fynd i'r afael a eich gwariant.
                            </p>
                            <a class="read-more" href="">Read more &gt;</a>
                        </article>
                    </li> 
```

CSS：

```
ul.inline {
    display: inline-block;
    list-style-type: none;
    margin: 0 0 20px;
    padding: 0;
    width: 978px;
}

    ul.inline li {
        float: left;
        margin: 0 18px 0 0;
        padding: 0;
        width: 308px;
    }

        ul.inline li h2 {
            border-bottom: 5px solid #34750E;
            color: #34750E;
            font-size: 21px;
            margin: 0 0 10px;
            padding: 0 0 10px;
            position: relative;
        }

        ul.inline li a.read-more {
                color: #34750E !important;
        } 
```

* * *

编辑：

**[在这里摆弄](http://jsfiddle.net/toroncino/99srG/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:22:13.000

**更新**

检查这个使用标记的更新小提琴，如您的问题：http: [//jsfiddle.net/techfoobar/hmCuj/](http://jsfiddle.net/techfoobar/hmCuj/)

解法逻辑基本保持不变。

* * *

检查这个小提琴：http: [//jsfiddle.net/techfoobar/5hhdE/1/](http://jsfiddle.net/techfoobar/5hhdE/1/)

**HTML**

```
<ul class="headings">
    <li>Heading #1\. Heading #1\. Heading #1\. Heading #1\. Heading #1\. </li>
    <li>Heading #2</li>
    <li>Heading #3\. Heading #3\. Heading #3\. Heading #3\. Heading #3\. Heading #3\. Heading #3.</li>
</ul>
<ul class="matter">
    <li>Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. </li>
    <li>Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. </li>
    <li>Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. Matter. </li>
</ul> 
```

**CSS**

```
ul.headings, ul.matter {
    list-style-type: none;
    vertical-align: bottom;
    white-space: nowrap;
}
ul.headings li {
    font-size:15px;
    font-weight: bold;
    border-bottom: 2px solid #888888;
    display: inline-block;
    padding: 5px 0;
    white-space: normal;
    width: 33.3%;
}
ul.matter li {
    width: 33.3%;
    display: inline-block;
    white-space: normal;
} 
```

*从这篇文章中得到了想法*：[如何将 LI 元素定位到 UL 列表的底部](https://stackoverflow.com/questions/4510401/how-can-i-positioning-li-elements-to-the-bottom-of-ul-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:22:07.870

我已经使用表格设置了一个示例。这是表格数据，它有一个标题行、一个描述行和多个列。

**[现场示例](http://codepen.io/RikudoSennin/pen/ulpca)**

```
<table>
  <thead>
    <tr>
      <th>Event Title 1</th>
      <th>Event Title 2<br>Mutliline</th>
      <th>Event Title 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Event 1 description<br>Multiline!</td>
      <td>Event 2 description</td>
      <td>Event 3 description</td>
    </tr>
  </tbody>
</table> 
```

CSS

```
th td {
  margin: 5px;
}
th {
  border-bottom: green 2px solid;
  vertical-align: bottom;
}
td {
  vertical-align: top;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:51:42.703

为什么不直接使用 CSS 表格？

[http://jsfiddle.net/CeMrZ/](http://jsfiddle.net/CeMrZ/)

我没有包括所有的字体颜色等。只是布局代码。

**CSS**

```
.table {
    display: table;
    width: 100%;
    table-layout: fixed;
}
.table>ul {
    display: table-row;
}
.table>ul>li {
    display: table-cell;
}
.table>ul.thead>li{
    vertical-align: bottom;
} 
```

**HTML**

```
<div class="table">
    <ul class="thead">
        <li>Mae hyn yn enghraifft prif llawer hwy</li>
        <li>Mae hyn yn enghraifft prif llawer hwy<br />Mae hyn yn enghraifft prif llawer hwy</li>
        <li>Mae hyn yn enghraifft prif llawer hwy</li>
    </ul>
    <ul>
        <li>Mae llawer o bethau gwych cymaint yn mynd ymlaen yr haf hwn a, beth bynnag yw eich cynlluniau, nawr yw'r amser i fynd i'r afael a eich gwariant.</li>
        <li>2</li>
        <li>3<br />Mae llawer o bethau gwych cymaint yn mynd ymlaen yr haf hwn a, beth bynnag yw eich cynlluniau, nawr yw'r amser i fynd i'r afael a eich gwariant.</li>
    </ul>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:35:20.673

试试这个它有效：

HTML 代码：

```
<section class="boxes">
    <ul class="inline">
        <li>
            <article>
                <h2>Mae hyn yn enghraifft prif llawer hwy</h2>
                <p>Mae llawer o bethau gwych cymaint yn mynd ymlaen yr haf hwn a, beth bynnag yw eich cynlluniau, nawr yw'r amser i fynd i'r afael a eich gwariant.</p>
                <a class="read-more" href="">Read more &gt;</a>
            </article>
        </li>
        <li>
            <article>
                <h2>green borders and push</h2>
                <p>Mae llawer o bethau gwych cymaint yn mynd ymlaen yr haf hwn a, beth bynnag yw eich cynlluniau, nawr yw'r amser i fynd i'r afael a eich gwariant.</p>
                <a class="read-more" href="">Read more &gt;</a>
            </article>
        </li>
        <li>
            <article>
                <h2>with less rows starts from the bottom like in the example</h2>
                <p>Mae llawer o bethau gwych cymaint yn mynd ymlaen yr haf hwn a, beth bynnag yw eich cynlluniau, nawr yw'r amser i fynd i'r afael a eich gwariant.</p>
                <a class="read-more" href="">Read more &gt;</a>
            </article>
        </li>
    </ul>
</section> 
```

CSS 代码：

```
ul.inline {
    display: inline-block;
    list-style-type: none;
    margin: 0 0 20px;
    padding: 0;
    width: 978px;
}
ul.inline li {
    float: left;
    margin: 0 18px 0 0;
    padding: 0;
    width: 308px;
}
ul.inline li p{
    border-top: 5px solid #34750E;
}
ul.inline li h2 {
    color: #34750E;
    font-size: 21px;
    margin: 0 0 10px;
    padding: 0 0 10px;
    position: relative;
    height: 80px;
    vertical-align: bottom;
    display: table-cell;
}
ul.inline li a.read-more {
    color: #34750E !important;
} 
```

# android - 拥有变量的方法，可以从每个 Activity 类中访问和修改

> ID：11793552
> 
> 赞同：2
> 
> 时间：2012-08-03T10:04:52.740
> 
> 标签：android, variables, storage

我想将所有变量保存在每个人都`Activity`可以访问和修改它们的地方。我尝试将变量存储在`xml`文件中，但它只能以一种方式工作，我可以访问它们但不能修改它们。我考虑过的另一个选项是创建单独的帮助类来保存我的所有变量、优惠`getValue();`和`setValue();`方法，但问题是我认为每次创建此类的对象时都会重置它。那么还有其他方法可以存储变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:07:29.230

You can use [android.app.Application](http://developer.android.com/reference/android/app/Application.html) for Sharing data between diffrence components of Appliction. see this post:

[Android: How to declare global variables?](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:07:54.823

Your requirement is to create some Global Variables, you can create some Global Variable by Using Application Class.

Check Example:

[How to declare global variables in Android?](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:07:59.527

Your senod option is nearer.

In your Helper class just add a **static variable**

See:

```
Class MyHelper {
..
..
public static int globIntVar; 
```

Where you want to use :

```
MyHelper.globIntVar = 2;  //  Setter
public int var = MyHelper.globIntVar;  //  Getter 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T10:10:40.173

在您的应用程序中创建一个类，该类存储通过应用程序 ex 使用的所有变量。

```
public Class Const{
Public static int siteurl="http://www.xyz.com/";
} 
```

现在你想在哪里使用那个变量写

```
Const.siteurl 
```

# c# - Web 部署任务失败。（无法完成请求）

> ID：11793556
> 
> 赞同：29
> 
> 时间：2012-08-03T10:05:04.340
> 
> 标签：c#, asp.net, entity-framework, publishing

我想发布我的项目，但是：

错误1

> Web 部署任务失败。（无法完成对远程代理 URL 'https://xxxxx:xxxx/msdeploy.axd?site=VoIP' 的请求。）
> 
> 无法完成对远程代理 URL 'https://xxxxx:xxxx/msdeploy.axd?site=VoIP' 的请求。请求被中止：请求被取消。无法使用已与其底层 RCW 分离的 COM 对象。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T21:03:02.553

这是一个错误并已修复，但前提是您拥有 Azure SDK：

[VS2010 和 2012 中的发布向导错误](https://stackoverflow.com/questions/10918234/publish-wizard-errors-in-vs2010-and-2012/12376504#12376504)

[http://connect.microsoft.com/VisualStudio/feedback/details/773902/every-now-and-then-i-cant-publish-to-azure-get-com-object-that-has-been-separated-从它的底层 rcw 不能被使用](http://connect.microsoft.com/VisualStudio/feedback/details/773902/every-now-and-then-i-cant-publish-to-azure-get-com-object-that-has-been-separated-from-its-underlying-rcw-cannot-be-used)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-27T08:08:48.063

1）如果没有打开服务器上的**8172**端口

2) 确保您已安装 Web 部署工具

[![在此处输入图像描述](../Images/7b52b6b91c4c5442f88997c61b9ed299.png)](https://i.stack.imgur.com/1uqZu.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-18T15:01:16.887

就我而言，我发现该帐户启用了 Internet 代理，这使 MSDeploy 请求访问 Internet 而不是本地网络。

# ios - 代码签名错误证书身份

> ID：11793562
> 
> 赞同：0
> 
> 时间：2012-08-03T10:05:31.980
> 
> 标签：ios, xcode4, code-signing, certificate, xcode4.4

```
Certificate identity 'iPhone Developer:myname etc..' appears more than once in the keychain. The codesign tool requires there only be one 
```

我正准备将我的应用程序发送到 iTunes Connect，我从我的钥匙串中删除了证书，我再次下载了它们，当我运行我的设备时，我得到了上述 ^^

现在有一些我的项目和钥匙串的图片吗？

![在此处输入图像描述](../Images/300ac28bf469286c09a7682ec3ff5921.png)

![在此处输入图像描述](../Images/973809c6f18e4436ab1fadb3ef9e4ed3.png)

我需要做什么提前谢谢

编辑仍然无处可去

![在此处输入图像描述](../Images/52efe8b9188fcec9f991a16a79c86b29.png)

还是不能解决请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:35:37.163

在项目导航器中单击您的项目 在富侧窗口中查找代码签名并选择推荐的一个。如果您正在设备上开发，请使用开发配置文件，如果它用于应用商店提交，请使用分发配置文件 ![在此处输入图像描述](../Images/24f2c32bae9c34f5047524cb6dc10159.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:05:52.130

执行 Apple[技术说明](http://developer.apple.com/library/ios/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG3)中的步骤。

# java - 为什么java中使用接口

> ID：11793564
> 
> 赞同：2
> 
> 时间：2012-08-03T10:05:45.257
> 
> 标签：java, oop, inheritance

> **可能重复：**
> [为什么我们需要java中的接口？](https://stackoverflow.com/questions/3528420/why-we-need-interface-in-java)

我参考了以下链接

[以前的帖子](https://stackoverflow.com/questions/3528420/why-we-need-interface-in-java)

谁能解释我们在java中使用接口的任何原因？

以外

*   接口可以实现多重继承。
*   多态性

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T10:10:58.073

除了您提到的之外，接口是公开一组函数 (API) 的好方法，而不会泄露有关其实现的任何信息。

根据定义，当一个类`implements`a时`Interface`，它同意实现一系列方法。这将允许任何调用者使用这些方法，而无需：

*   调用者不得不担心函数是如何实现的；
*   写函数的人担心会暴露内部逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T10:22:39.103

除了所有其他帖子之外，接口更多地`abstract`形成`Interfaces`了与外界之间的**合同**，并且该合同在构建时由. 如果你声称要实现一个，那么所有由那个定义的必须出现在它的源代码中才会成功。`class``compiler``class``interface``methods``interface``class``compile`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T10:09:11.853

接口将对象提供的功能与其实现分开。

您可以提供对接口的引用，而无需知道实际使用的是哪个实现。

接口还使测试更容易，因为您可以创建虚拟实现来测试您的代码。像 EasyMock 和 JMock 这样的库使这更容易做到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T10:12:03.193

当一个类实现/实现多个接口时，它不是多重继承。继承/扩展关系实际上只存在于相同类型的构造之间（一个接口可以扩展另一个接口或一个类另一个类）。类和接口之间的关系是实现或实现，而不是扩展。这种区分确实避免了多重继承（在 Java 中，一个类最多可以扩展一个类），从而避免了许多问题（即钻石问题[http://en.wikipedia.org/wiki/Diamond_problem](http://en.wikipedia.org/wiki/Diamond_problem)等），最终提高了设计质量

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T10:36:10.903

一件事，还没有提到：您可以使用多个带有接口的设计模式来设计您的程序（定义 API）。这将在稍后帮助您实现大型软件实现。也许你想读一些关于它的东西：[http ://en.wikipedia.org/wiki/Software_design_pattern](http://en.wikipedia.org/wiki/Software_design_pattern)

# mysql - 更新表 - Mysql

> ID：11793565
> 
> 赞同：2
> 
> 时间：2012-08-03T10:05:46.027
> 
> 标签：mysql

![在此处输入图像描述](../Images/d3327752f5202963f8695f5c1478e946.png)

需要为相同 c3 的所有值更新列 c2。即 c3 有五个 0，前三个 0 在 c2 中有 10 个。在这里，我需要用值 10 更新记录 7 和 9。最后，c3 中的所有 0 都应该具有相同的 c2 值，即 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:10:33.903

您需要将`self join`列更新`C2`为：

```
UPDATE table_name a
       INNER JOIN table_name b
           ON a.C2 = b.C3
SET a.C2 = b.C2
WHERE b.C2 <> 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:24:57.887

你想如何决定从哪个记录中获取值来更新其他记录？
`select c3 from yourTable group by c3`将返回您不同的 c3 值，现在您可以从每个 c3 获取相应的 c2 值，但是您要如何决定使用哪个值来更新其他值？

编辑：
很少的 SQL 语句方法：
`set @uniqueC3s = (select c3 from yourTable group by c3);
-- loop through the resutlset set @requiredC2Value = (select TOP 1 c2 from yourTable where c3 = @uniqueC3s order by c1);
update yourTable set c2 = @requiredC2Value where c3 = @uniqueC3s;
-- end of loop`

# jira - 为什么 Rally Jira 连接器的 JIRA 用户必须是 JIRA 管理员？

> ID：11793567
> 
> 赞同：0
> 
> 时间：2012-08-03T10:05:50.613
> 
> 标签：jira, rally

我被要求查看配置[Rally JIRA 连接器](https://marketplace.atlassian.com/plugins/plugin.jral)以将 Rally 与我们的 JIRA 实例同步，并且[安装说明](http://www.rallydev.com/help/jira-installation-user-guide)指出您在 JIRA 中创建的用户必须是 JIRA 管理员。当它似乎正在为与 Rally 同步的 JIRA 项目中的问题更新 RallyID 和 RallyURL 自定义字段时，为什么它需要管理员权限。

对项目问题的编辑权限是否不够，或者它是否在做其他需要管理员权限的事情？我确实从 jira-administrators 组中删除了用户，但连接器会检查管理员权限并在用户不是管理员时停止。

如果用户不需要管理员权限，是否可以更改/删除连接器中的检查，以便可以从 jira-administrators 组中删除用户并在 JIRA 中获得相关权限？

谢谢，

安德鲁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:59:07.067

这是一个两部分的答案：

1.  连接器在您的配置文件上运行验证步骤，以验证您映射的所有字段是否确实存在于 Jira 中。从历史上看，早期版本的 Jira 开箱即用，只有管理员组有权获取有关问题的字段列表。

2.  如果您使用字段处理程序将用户转换为 Jira，我们再次需要更高级别的权限来获取 Jira 中的用户列表 - 例如，基于电子邮件进行查找。

希望信息有所帮助。

# html - 为部分内容禁用 css

> ID：11793568
> 
> 赞同：3
> 
> 时间：2012-08-03T10:05:55.457
> 
> 标签：html, css, yii-extensions

我正在使用 Yii-bootstrap 扩展并且我遇到了一些样式问题，因为引导 css 文件会影响页面的主要内容。

我的主要内容是使用 OpenLayers 完成的地图，所以我在它们之间混合样式时遇到了几个问题。我试图做一个更通用的css文件，因为我已经看到他们在网络上推荐应用不同的样式，但由于它们是两个“自动”库，因此很难猜测它们是如何工作的以及它们使用的类.

有什么方法可以禁用具体 div 的 css 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:27:33.807

您可以为该 div 创建一个类并重置您为一般 div 更改的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:30:29.010

我能看到的唯一方法是..

```
<div class="outer">
    <div class="inner" >
        Inner Content
    </div> 
</div> 
```

你可以做类似..

```
.outer{
}

.outer .inner{
/* override the specific styles you need here */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:10:43.877

没有什么我不知道的，没有。

# c - RASPHONE.exe 使用的退出代码是什么？

> ID：11793571
> 
> 赞同：1
> 
> 时间：2012-08-03T10:05:56.790
> 
> 标签：c, windows, winapi, ras

由于主要的时间限制，需要坚持从我的 c 程序调用 rasphone.exe，而不是使用 RAS API 的最佳方法。从我的代码中，当 rasphone 向用户弹出拨号器窗口时，如果用户单击取消按钮，我必须停止阻止另一组代码。最终，我需要处理 rasphone 返回以根据成功/失败取消来控制我的代码流。这个怎么做？此外，是否有任何其他可能的无声拨号没有任何弹出？我希望没有，正如它所讨论的那样。

# gcc - 静态库中对象的顺序

> ID：11793577
> 
> 赞同：2
> 
> 时间：2012-08-03T10:06:15.003
> 
> 标签：gcc, linker, static-libraries, unix-ar

我有一个使用多个目标文件的 C 项目，这些目标文件需要按特定顺序链接以查找所有需要的符号。

例如这个命令工作正常（lib2.o 依赖于 lib1.o 等）

```
gcc -o my_app main.o lib1.o lib2.o lib3.o -lm 
```

但

```
gcc -o my_app main.o lib3.o lib2.o lib1.o -lm 
```

以对“my_variable”错误的未定义引用结束。

这是一种已知行为，例如可以通过将这些对象添加到链接描述文件中的 GROUP 部分来解决。

现在我想将这些对象作为静态库与我的同事共享。所以...

```
ar -rcs mylib.a lib1.o lib2.o lib3.o
gcc -o my_app main.o mylib.a -lm 
```

不幸的是，这会产生相同的未定义引用错误，例如以不正确的顺序指定对象。

我没有找到任何链接器或存档器选项来使其正常工作，即使我认为这个问题应该相对常见，谷歌搜索也没有解决方案。

请问有人知道解决方案吗？

问候简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:36:49.253

这可能是链接顺序问题。当 GNU 链接器看到一个库时，它会丢弃所有不需要的符号。它也以从左到右的顺序形式执行此操作。

最新版本的 gcc/ld 默认使用`--as-needed`标志链接。

这意味着如果您`-lmylib.a`在 C 文件之前编写，该库将自动被排除（在测试是否“需要”这样的东西时，顺序很重要）

您可以使用以下任一方法解决此问题：

1.  `gcc -L. -o example example.c -lmylib.a`
2.  `gcc -L. -Wl,--no-as-needed -o example example.c -lmylib.a`

后者传递`--no-as-needed`给链接器，这将导致库仍然被链接，即使您没有从它调用任何外部函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:16:28.417

您的错误意味着问题出在您的一个 lib?.o 文件中 [lib{later}.o 取决于 lib{earlier}.o]
您是如何编译它们的？
是否有任何编译警告？
自从我使用 C 以来已经有一段时间了，但我认为您需要在具有依赖关系的库中包含依赖库 - 这可能是您找不到太多对该问题的引用的原因，因为它确实并不真正存在。

# objective-c - 如何在 NSArray 上使用自定义排序

> ID：11793578
> 
> 赞同：1
> 
> 时间：2012-08-03T10:06:16.093
> 
> 标签：objective-c, ios, nsarray

如何在 NSArray 上执行自定义排序操作​​。我有一个字符串数组，这是我想要的排序。

```
NSArray A = {cat, dog, mouse, pig, donkey} 
```

而且我有一个未按我想要的方式排序的字符串数组。

```
NSArray B = {dog,cat,mouse,donkey,pig} 
```

在不必使用键的情况下，将数组 B 与数组 A 以相同顺序放置的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T10:35:25.697

这里有一个方法

```
NSArray *sortedArray = [B sortedArrayUsingComparator: ^(id obj1, id obj2){
    NSUInteger index1 = [A indexOfObject: obj1];
    NSUInteger index2 = [A indexOfObject: obj2];
    NSComparisonResult ret = NSOrderedSame;
    if (index1 < index2)
    {
        ret = NSOrderedAscending;
    }
    else if (index1 > index2)
    {
        ret = NSOrderedDescending;
    }
    return ret;
}]; 
```

以上将 B 的元素排序为与 A 相同的顺序，其中 B 中但不在 A 中的元素出现在末尾（因为这`NSNotFound`是一个非常大的数字）。该算法的唯一问题是它将排序的算法复杂性乘以A`O(n)`中`n`的对象数量。因此，对于大 A，它会非常慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:38:31.987

如果你有：-

```
NSArray A = {cat, dog, mouse, pig, donkey} 
```

和

```
NSMutableArray B = {dog,cat,mouse,donkey,pig} 
```

您可以使用：-

```
[B sortArrayUsingComparator:^NSComparisonResult(NSString *obj1,   NSString *obj2) {
    NSUInteger indexOfObj1 = [A indexOfObject: obj1];
    NSUInteger indexOfObj2 = [A indexOfObject: obj2];
    if(indexOfObj1 == NSNotFound || indexOfObj2 == NSNotFound){
        return NSOrderedSame;
    }
    else if(indexOfObj1 > indexOfObj2){
        return NSOrderedDescending;
    }

    return NSOrderedAscending;
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:27:46.473

添加自定义排序最好的方法是使用带函数的sostring

```
`NSArray *B=[A sortedArrayUsingFunction:sortingFunction context:nil];
//  sortingFunction

NSInteger sortingFunction( id obj1, id obj2, void *context){
    if ( //your condition ){
        return NSOrderedDescending;
    }
    if ( //your condition){
        return NSOrderedAscending;
    }
    return NSOrderedSame;
}` 
```

* * *

 `## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:21:20.740

查看[sortedArrayUsingComparator](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingComparator%3a)，总是对我有用！

例子：

```
NSArray *sortedArray = [B sortedArrayUsingComparator:^NSComparisonResult(NSString *obj1,   NSString *obj2) {
    //Insert custom ordering code here, this will just sort alphabetically.
    return [obj1 compare:obj2];
}]; 
````

# java - java键输入不起作用

> ID：11793587
> 
> 赞同：1
> 
> 时间：2012-08-03T10:07:05.033
> 
> 标签：java, event-handling, keyboard, keylistener, key-events

我正在编写一个简单的 java 蛇类游戏，甚至在我真正开始制作游戏之前就遇到了问题。由于某种原因，我似乎无法从键盘获得输入。我目前的代码是：

```
public class GameWindow extends JFrame{    

private SnakeCanvas snakeCanvas;

public GameWindow(StartWindow sw) {
    getContentPane().addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            JOptionPane.showMessageDialog(null, "Key Pressed!");
        }
    });

    getContentPane().setBackground(Color.BLACK);

    this.setExtendedState(JFrame.MAXIMIZED_BOTH);
    this.setUndecorated(true);
    this.setVisible(true);
    getContentPane().setLayout(null);

    snakeCanvas = new SnakeCanvas();
    snakeCanvas.setBounds(78, 72, 290, 195);
    getContentPane().add(snakeCanvas);
    snakeCanvas.setVisible(true);
    snakeCanvas.repaint();

}

} 
```

（一个 SnakeCanvas 扩展了 JPanel 并且上面没有其他组件）

我还尝试向snakeCanvas 添加一个关键侦听器，但仍然没有效果.. 我也尝试过使用可聚焦和聚焦遍历的东西，但这也没有做任何事情......任何人都可以向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:17:11.377

确保您已将要接收键盘事件的组件设置为可聚焦 ( `setFocusable`) 且具有焦点 ( `requestFocus`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:16:33.493

1.  [KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)不是[Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)的正确监听器，需要在窗口中获得焦点

2.  你必须`setFocusable`为容器

3.  正确和正确的方法是使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)， [例如](https://stackoverflow.com/a/7940227/714968)

# c# - 如何在.net中检测页面刷新

> ID：11793588
> 
> 赞同：20
> 
> 时间：2012-08-03T10:07:06.467
> 
> 标签：c#, asp.net, sharepoint, page-lifecycle, sharepoint-object-model

我有一个`Button_click`活动。刷新页面时，上一个`Postback`事件再次触发。如何识别页面刷新事件以阻止该`Postback`操作？

我尝试了下面的代码来解决它。实际上，我在 SharePoint 页面中添加了一个可视化 Web 部件。添加 webpart 是一个回发事件，所以 !postback 每次我将 webpart 添加到页面时总是错误的，并且我在 else 循环中遇到错误，因为对象引用是`null`.

```
if (!IsPostBack){
    ViewState["postids"] = System.Guid.NewGuid().ToString();
    Cache["postid"] = ViewState["postids"].ToString();
}
else{
    if (ViewState["postids"].ToString() != Cache["postid"].ToString()){
        IsPageRefresh = true;
    }
    Cache["postid"] = System.Guid.NewGuid().ToString();
    ViewState["postids"] = Cache["postid"].ToString();
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-26T21:44:46.977

使用视图状态对我来说效果更好，详见[**此处**](http://geekswithblogs.net/Vipin/archive/2011/06/08/detecting-browser-refresh-from-code-behind-in-.net.aspx)。基本上：

```
bool IsPageRefresh = false;

//this section of code checks if the page postback is due to genuine submit by user or by pressing "refresh"
if (!IsPostBack)     
{
    ViewState["ViewStateId"] = System.Guid.NewGuid().ToString();
    Session["SessionId"] = ViewState["ViewStateId"].ToString();
}
else
{
    if (ViewState["ViewStateId"].ToString() != Session["SessionId"].ToString())
    {
        IsPageRefresh = true;
    }

    Session["SessionId"] = System.Guid.NewGuid().ToString();
    ViewState["ViewStateId"] = Session["SessionId"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T10:10:10.197

This article could be of help to you [http://www.codeproject.com/Articles/68371/Detecting-Refresh-or-Postback-in-ASP-NET](http://www.codeproject.com/Articles/68371/Detecting-Refresh-or-Postback-in-ASP-NET)

you are adding a Guid to your view state to uniquely identify each page. This mechanism works fine when you are in the Page class itself. If you need to identify requests before you reach the page handler, you need to use a different mechanism (since view state is not yet restored).

The Page.LoadComplete event is a reasonable place to check if a Guid is associated with the page, and if not, create one.

check this [http://shawpnendu.blogspot.in/2009/12/how-to-detect-page-refresh-using-aspnet.html](http://shawpnendu.blogspot.in/2009/12/how-to-detect-page-refresh-using-aspnet.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-30T05:51:06.023

这对我来说很好..

```
bool isPageRefreshed = false;

protected void Page_Load(object sender, EventArgs args)
{
    if (!IsPostBack)
    {
        ViewState["ViewStateId"] = System.Guid.NewGuid().ToString();
        Session["SessionId"] = ViewState["ViewStateId"].ToString();
    }
    else
    {
        if (ViewState["ViewStateId"].ToString() != Session["SessionId"].ToString())
        {
            isPageRefreshed = true;
        }

        Session["SessionId"] = System.Guid.NewGuid().ToString();
        ViewState["ViewStateId"] = Session["SessionId"].ToString();
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-04T18:09:30.933

**简单的解决方案**

以为我会发布这个简单的 3 行解决方案，以防它对某人有所帮助。在发布会话和视图状态 IsPageRefresh 值将相等，但它们在页面刷新时变得不同步。这会触发重置页面的重定向。如果要保留查询字符串参数，则需要稍微修改重定向。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var id = "IsPageRefresh";
        if (IsPostBack && (Guid)ViewState[id] != (Guid)Session[id]) Response.Redirect(HttpContext.Current.Request.Url.AbsolutePath);
        Session[id] = ViewState[id] = Guid.NewGuid();

        // do something

     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-11T12:30:30.237

检查页面刷新的另一种方法。我编写了没有 java 脚本或任何客户端的自定义代码。

不确定，这是最好的方法，但我感觉很好。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if ((Boolean)Session["CheckRefresh"] is true)
        {
            Session["CheckRefresh"] = null;
            Response.Write("Page was refreshed");
        }
        else
        { }
    }
    protected void Page_PreInit(object sender, EventArgs e)
    {
        Session["CheckRefresh"] = Session["CheckRefresh"] is null ? false : true;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T19:19:53.993

如果您想检测 HTTP GET 而不仅仅是 POST 上的刷新，这里有一个 hacky 解决方法，在现代浏览器中，大多数情况下都有效。

Javascript：

```
window.onload = function () {
    // regex for finding "loaded" query string parameter
    var qsRegex = /^(\?|.+&)loaded=\d/ig;
    if (!qsRegex.test(location.search)) {
        var loc = window.location.href + (window.location.search.length ? '&' : '?') + 'loaded=1';
        window.history.replaceState(null, document.title, loc);
    }
}; 
```

C＃：

```
public bool IsPageRefresh 
{
    get
    {
        return !string.IsNullOrEmpty(Request.QueryString["loaded"]);
    }
} 
```

当页面加载时，它将更改添加 QueryString 参数`loaded=1`而不重新加载页面（同样，这`window.history.replaceState`---仅适用于[后古浏览器](https://developer.mozilla.org/en-US/docs/Web/API/History_API#Browser_compatibility)）。然后，当用户刷新页面时，服务器可以检查`loaded`查询字符串的参数是否存在。

### 警告：*大多*有效

这不起作用的情况是用户单击地址栏并按下`enter`。也就是说，服务器将产生误报，检测到刷新，当可能性很大时，用户实际上打算重新加载页面。

根据您的目的，这可能是可取的，但作为用户，如果我希望它重置页面，那会让我发疯。

我没有考虑太多，但是*可以*编写一些魔术来通过地址栏使用任何/全部来区分刷新和重置：

*   `SessionState`（假设`SessionState`已启用）和`loaded`QueryString 参数的值
*   事件`window.onbeforeunload`监听器
*   键盘事件（检测`F5`并`Ctrl + R`快速将 URL 更改回删除`loaded`QueryString 参数——尽管这对于单击浏览器的刷新按钮会产生误报）
*   饼干

如果有人确实提出了解决方案，我很想听听。

# http - 更新 HTTP ETag

> ID：11793590
> 
> 赞同：3
> 
> 时间：2012-08-03T10:07:08.890
> 
> 标签：http, caching, webdav, etag

我正在使用 WebDav 将元数据放在服务器的文件和文件夹上，并根据文件的 ETag 属性使用缓存以避免对服务器的不必要请求。

基本上，我发送一个 HEAD 请求并检查 ETag 是否与我在本地的那个匹配。如果没有，那么我发送一个更大、更慢的[PROPFIND](http://www.webdav.org/specs/rfc4918.html#METHOD_PROPFIND "PROPFIND")方法来检索其他属性。

我基于每次修改文件时都会更改 ETag 的想法构建此缓存，包括修改、添加或删除元数据时。

但是，我最近发现事实并非如此：

> 因为如果 ETag 更改，客户端可能会被迫提示用户或丢弃更改的内容，WebDAV 服务器不应更改具有未更改主体和位置的资源的 ETag（或 Last-Modified 时间）。ETag 表示资源的主体或内容的状态。**没有类似的方法可以判断属性是否已更改**。

（RFC 4918，[http://www.webdav.org/specs/rfc4918.html#etag](http://www.webdav.org/specs/rfc4918.html#etag)，强调我的）

由于每当属性更改时使缓存失效对我来说很重要，我想知道：有没有办法手动指示 Web 服务器更新 ETag ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:31:16.763

有几个不同的选择。如果 etag 是根据内容生成的（一个坏主意），那就更难了。在我们的解决方案中，我们生成了一个不同的标签（a ptag），我们会在属性更改时更新它，您可以使用 PROPFIND 查询它，我们将它作为响应中的 X-PTag 标头返回。如果 etag 是在 PUT 上随机生成的，那么您可以再次 PUT 相同的数据，它会给您一个新的 etag。

# javascript - 如何在不触及某些元素的情况下附加 document.click 事件？

> ID：11793594
> 
> 赞同：0
> 
> 时间：2012-08-03T10:07:13.520
> 
> 标签：javascript, jquery, html, javascript-events

所以我需要点击一个文档来调用一些函数，但问题是当我点击一些想要它不反应的元素时，所以代码：

```
<body>

<div class="some_element">
some element
</div>

</body> 
```

和js：

```
$(document).click(function(){

   //something to happen

}) 
```

现在，如果我单击带有 class="some_element" 的 div，则将调用 document.click 事件，但是仅当我单击文档时我才需要调用该事件.....或者可以制作此元素例外？

更详细：

```
$('#forma').click(function(e){

    e.stopPropagation();

    $('#assignment_type_list').slideUp();

}) 
```

可以说#forma - 它是这些元素的父元素，所以当我点击页面时，我想滑动 someElement 并且：

```
$('#assignment_type_select, #assignment_type_label').click(function(){

        $('#assignment_type_list').slideToggle();

    }) 
```

这是单击它们时的元素，另一个元素被切换，但问题是当我单击此元素时`$('#forma').click`- 也会执行，因为它的父级和`e.stopPropagation()`- 没有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:16:21.887

所有`stopPropagation`这些都是正确的，尽管这会导致您的脚本在某个浏览器的旧版本上抛出错误。猜猜是哪一个？跨浏览器方式：

```
$('#elem').click(function(e)
{
    e = e || window.event;//IE doesn't pass the event object as standard to the handler
    //event would normally work, but if you declared some event variable in the current scope
    //all falls to pieces, so this e || window.event; thing is to be preferred (IMO)
    if (e.stopPropagation)//check if method exists
    {
        e.stopPropagation();
        return;
    }
    e.cancelBubble = true;//for IE
}); 
```

但是，您想检查实际单击的元素是否是您需要的元素。问题在于，事件通过 DOM 传递的方式。在 W3C 浏览器中，事件首先传递给文档，然后向下爬到实际单击的元素（通过 dom 传播）。
相比之下，IE 在元素本身上调度其事件，然后将其发送到文档（`change`由选择元素触发的事件除外......以增加对伤害的侮辱）。这实际上意味着`body`在 W3C 浏览器中注册到元素的单击事件可能正在到达各种复选框，或者它可能是在空 div 中的单击。
同样，在 IE 中，当点击事件到达`body`标签，它也可能被分派给页面上的任何元素。因此，在您的情况下，它可能对 google: 有用`event delegation`，或者转向 jQuery 的`.delegate()`方法。

或者检查事件对象以查看是否允许事件传播：

```
var target =  e.target || e.srcElement;//target now holds a reference to the clicked element 
```

属性名称巧妙地显示了冒泡模型和传播模型之间的区别：在第一种情况 ( `srcElement`) 中，事件来自 dom 中的源元素。在 W3C 传播模型中，当事件前往`target`dom 中某处的某个元素时，该事件被咳嗽。
将其视为寻热导弹 (w3c) 与目标被击落后的一阵碎片（IE，总是具有破坏性的导弹，在这种情况下通常对事件做出反应迟到，因此处理迟到他们：P）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:09:58.250

一种方法是检查`event`'s `target`。

```
$('html').click(function(event){
    if (event.target != this){
    }else{
        //do stuff
    }
}); 
```

这是一个工作[小提琴](http://jsfiddle.net/ZamqE/2/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T10:17:03.133

文档上的元素是文档的一部分，所以如果你点击文档中的“some_element”，很明显会触发/触发文档上注册的事件。如果您不想执行用于“文档”的代码，那么首先获取发起此事件的元素或“事件源”，并检查它是否是上述问题中的“some_element”。

# jquery - 更改 jqGrid 中 rownumber 值的 CSS

> ID：11793596
> 
> 赞同：0
> 
> 时间：2012-08-03T10:07:18.230
> 
> 标签：jquery, css, jqgrid, zebra-striping

我已将[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=start)的属性更改为`rownumbers:true`. 因此它显示行号。现在我想改变它的[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)。我怎样才能做到这一点？

![在此处输入图像描述](../Images/eb042193f3bdc36c3e9633d55badabaa.png)

在上图中，记录的 CSS 改变了，但行号的 CSS 没有改变。现在我也想更改行号的 CSS。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:27:58.103

如果我理解您的要求正确，您可以包含以下 CSS 样式以删除`background-image`并`background-color`从 CSS 类继承`ui-state-default`：

```
.jqgrow .jqgrid-rownum { background-color: transparent; background-image: none; } 
```

[以下演示](http://www.ok-soft-gmbh.com/jqGrid/RowNumberStyle.htm)还使用了您上一个问题[的答案](https://stackoverflow.com/a/11792322/315935)中的样式。显示的结果如下图所示：

![在此处输入图像描述](../Images/76fac8ae1264527fca53cc021f4b23de.png)

# sql-server-2008 - SQL Server Express 2008 Merge Replication using RMO causes "An exception occurred while executing a Transact-SQL statement or batch." error?

> ID：11793597
> 
> 赞同：0
> 
> 时间：2012-08-03T10:07:17.773
> 
> 标签：sql-server-2008, c#-2.0

I am trying to create a Merge Replication using RMO Programming which i got from [here](http://technet.microsoft.com/en-us/library/ms146941%28SQL.105%29.aspx "Clik Here to open")!

```
 string publisherName = "DataSourceName";
        string publicationName = "AdvWorksSalesOrdersMerge";
        string publicationDbName = "AdventureWorksDW2008R2";
        ReplicationDatabase publicationDb;
        MergePublication publication;
        // Create a connection to the Publisher.
        ServerConnection conn = new ServerConnection(publisherName);
          try
        {
             //Connect to the Publisher.
            conn.Connect();

            // Enable the database for merge publication.               
            publicationDb = new ReplicationDatabase(publicationDbName, conn);
            if (publicationDb.LoadProperties())
            {
                if (!publicationDb.EnabledMergePublishing)
                {
                    publicationDb.EnabledMergePublishing = true;
                }
            }
            else
            {
               //  Do something here if the database does not exist. 
                throw new ApplicationException(String.Format(
                    "The {0} database does not exist on {1}.",
                    publicationDb, publisherName));
            }

            // Set the required properties for the merge publication.
            publication = new MergePublication();
            publication.ConnectionContext = conn;
            publication.Name = publicationName;
            publication.DatabaseName = publicationDbName;

            // Enable precomputed partitions.
            publication.PartitionGroupsOption = PartitionGroupsOption.True;

             //Specify the Windows account under which the Snapshot Agent job runs.
            // This account will be used for the local connection to the 
            // Distributor and all agent connections that use Windows Authentication.

              publication.SnapshotGenerationAgentProcessSecurity.Login = userid;
               publication.SnapshotGenerationAgentProcessSecurity.Password = password;

             //Explicitly set the security mode for the Publisher connection
            // Windows Authentication (the default).
            publication.SnapshotGenerationAgentPublisherSecurity.WindowsAuthentication = true;

             //Enable Subscribers to request snapshot generation and filtering.
            publication.Attributes |= PublicationAttributes.AllowSubscriberInitiatedSnapshot;
            publication.Attributes |= PublicationAttributes.DynamicFilters;

            // Enable pull and push subscriptions.
            publication.Attributes |= PublicationAttributes.AllowPull;
            publication.Attributes |= PublicationAttributes.AllowPush;

            if (!publication.IsExistingObject)
            {
                 //Create the merge publication.
                publication.Create();

                // Create a Snapshot Agent job for the publication.
                publication.CreateSnapshotAgent();
            }
            else
            {
                throw new ApplicationException(String.Format(
                    "The {0} publication already exists.", publicationName));
            }

        }

        catch (Exception ex)
        {
             //Implement custom application error handling here.
            throw new Exception(String.Format("The publication {0} could not be created.", publicationName), ex);

        }
        finally
        {
            conn.Disconnect();
        } 
```

but at this line

**publicationDb.EnabledTransPublishing = true;**

i am getting error -" ***An exception occurred while executing a Transact-SQL statement or batch.***"

So please help me out from this problem ..

waiting for your answers..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T11:00:30.973

您现在可能已经回答了，但对于那些可能会问同样问题的人。这是因为您使用的是 SQL Server 的 Express 版本，并且无法在任何版本的 SQl Server Express 中创建发布者/分发者。

您在代码中拥有的实例不是有效的实例，因此会引发异常。

看一眼：

[http://msdn.microsoft.com/en-us/library/ms151819(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms151819%28v=sql.105%29.aspx)

和那些说

> Microsoft SQL Server 2008 Express 可以作为所有类型复制的订阅者，提供一种方便的方式将数据分发到使用此版本 SQL Server 的客户端应用程序。在复制拓扑中使用 SQL Server Express 时，请牢记以下注意事项： SQL Server Express 不能用作发布者或分发者。但是，合并复制允许在发布服务器和订阅服务器之间双向复制更改。块引用

# c# - UDP Multicast between two sockets in the same process

> ID：11793598
> 
> 赞同：5
> 
> 时间：2012-08-03T10:07:20.790
> 
> 标签：c#, sockets, udp, multicast

I'm writting some tests for classes that handles UDP multicast communication. I designed the tests to use the loopback interface (127.0.0.1) for the tests because I don't want the them to interfer with other programs/devices on the network.

In my "unit test" I have a tested socket that joins a given multicast group and binds to 127.0.0.1 and a sender socket that also joined the same multicast group and binds to 127.0.0.1, both of course in the same process.

To be sure that the message is sent I have another test program (so another process) that also joins the multicast group and outputs everything that is sent to it.

The problem is that my tested socket never receive what the sender sent BUT the test program (so another process) receives it.

Are there some limitation with the combination multiple sockets/multicast/localhost?

New information:

My mistake was to consider that UDP on localhost *might* be reliable. The below test program shows that the first UDP packet is never received (at least on my computer) by my listening socket (but the other process still receives it).

In my unit tests I am sending one packet and expects specific answers: I cannot afford sending the message two times and receiving the answer only once.

It seems to work reliably if I wait for the first receive timeout to occur before sending the first packet.

Does anyone have an idea why the first UDP packet never arrives?

Here's the code I used in my trials:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using NUnit.Framework;

namespace MulticastTest
{
    [TestFixture]
    public class Program
    {
        static void Main(string[] args)
        {
            new Program().Run();
            Console.WriteLine("Press any key to exit...");
            Console.ReadKey();
        }

    [Test]
    public void Run()
    {
        _waitFirstReadTiemout = new AutoResetEvent(false);
        IPAddress lMulticastAddress = new IPAddress(0xFAFFFFEF);
        IPEndPoint lRemoteEndPoint = new IPEndPoint(lMulticastAddress, 1900);

        // Create sender socket
        Socket lSendSocket = new Socket(AddressFamily.InterNetwork,
                             SocketType.Dgram,
                             ProtocolType.Udp);

        // Allow to share the port 1900 with other applications
        lSendSocket.SetSocketOption(SocketOptionLevel.Socket,
                                SocketOptionName.ReuseAddress,
                                true);

        // Set TTL for multicast packets: socket needs to be bounded to do this
        lSendSocket.SetSocketOption(SocketOptionLevel.IP,
                                SocketOptionName.MulticastTimeToLive,
                                2);

        // Bind the socket to the local end point: this MUST be done before joining the multicast group
        lSendSocket.Bind(new IPEndPoint(IPAddress.Loopback, 55236));

        // Join the multicast group
        lSendSocket.SetSocketOption(SocketOptionLevel.IP,
                        SocketOptionName.MulticastLoopback,
                        true);

        lSendSocket.SetSocketOption(SocketOptionLevel.IP,
                                SocketOptionName.AddMembership,
                                new MulticastOption(lMulticastAddress));

        // Create receiver and start its thread
        Thread lReceiveThread = new Thread(ReceiveThread);
        lReceiveThread.Start();

        int i = 0;
        while (!fStop)
        {
            if (i == 0)
                _waitFirstReadTiemout.WaitOne(10000);

            byte[] lToSend = Encoding.ASCII.GetBytes(DateTime.Now.ToString("yyyyMMdd HHmmss"));
            lSendSocket.SendTo(lToSend, lRemoteEndPoint);
            Console.WriteLine("Sent #" + (i + 1) + ": " + DateTime.Now.ToString("yyyyMMdd HHmmss"));
            Thread.Sleep(1000);
            try
            {
                if (Console.KeyAvailable || i >= 10)
                    fStop = true;
            }
            catch (InvalidOperationException)
            {
                fStop = i >= 10;
            }
            finally
            {
                ++i;
            }
        }
    }

    private AutoResetEvent _waitFirstReadTiemout;

    private bool fStop;

    private void ReceiveThread()
    {
        Socket lSocket = new Socket(AddressFamily.InterNetwork, 
                                    SocketType.Dgram, 
                                    ProtocolType.Udp);

        // Allow to share the port 1900 with other applications
        lSocket.SetSocketOption(SocketOptionLevel.Socket,
                                SocketOptionName.ReuseAddress,
                                true);

        // TTL not required here: we will only LISTEN on the multicast socket
        // Bind the socket to the local end point: this MUST be done before joining the multicast group
        lSocket.Bind(new IPEndPoint(IPAddress.Loopback, 1900));

        // Join the multicast group

        // If the local IP is a loopback one, enable multicast loopback
        lSocket.SetSocketOption(SocketOptionLevel.IP,
                    SocketOptionName.MulticastLoopback,
                    true);

        lSocket.SetSocketOption(SocketOptionLevel.IP,
                                SocketOptionName.AddMembership,
                                new MulticastOption(
                                        new IPAddress(0xFAFFFFEF)));

        lSocket.ReceiveTimeout = 1000;

        byte[] lBuffer = new byte[65000];
        int i = 0;
        while (!fStop)
        {
            try
            {
                int lReceived = lSocket.Receive(lBuffer);
                ++i;
                Console.WriteLine("Received #" + i + ": " + Encoding.ASCII.GetString(lBuffer, 0, lReceived));
            }
            catch (SocketException se)
            {
                _waitFirstReadTiemout.Set();
                Console.WriteLine(se.ToString());
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:00:00.650

这很可能是您的发送和接收线程之间的竞争——您在接收者加入组之前发送了第一个数据包。这解释了为什么它与超时一起工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:26:50.100

您可能需要在套接字上启用环回模式。

# latex - 在 Windows 中将 Latex 插入 Inkscape

> ID：11793601
> 
> 赞同：18
> 
> 时间：2012-08-03T10:07:34.200
> 
> 标签：latex, inkscape

我有 Windows 7 64 位。我按照给定的顺序安装了这些：

1.  Miktex (基本-miktex-2.9.4521.exe)
2.  幽灵脚本 (gs905w32.exe)
3.  GSView (gsv50w32.exe)
4.  pstoedit (pstoeditsetup_win32.exe)
5.  Inkscape (Inkscape-0.48.2-1-win32.exe)

但是，我仍然无法`Extensions -> Render -> Latex Formula`在`Inkscape`. 什么不见​​了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T16:02:14.720

好的，添加`miktext`,`gs`和`pstoedit`; `PATH`它工作得很好。

例如，为了添加`pstoedit`到路径：

```
Computer > Properties > Advanced > Environment Variables > PATH > Edit 
```

添加以下内容：

```
;C:\Program Files (x86)\pstoedit; 
```

PS：不要忘记分号。

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-01T19:45:34.670

这对我有帮助，但我仍然遇到错误。一段时间后我解决了它们，所以这是你必须注意的：

将程序添加到路径时，不要在分号后使用空格！！

当您稍后在 Incscape 中键入代码时，它需要美元符号来指示公式，即使它要求 LaTeX 公式，所以看起来您应该已经处于数学模式。示例：$\vec{r_p}$。你仍然会收到很多警告，但至少它会产生你想要的。

只是添加这个以防其他人可能有同样的问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-23T14:02:00.557

我想补充一点，最新的 ghostscript 版本（在撰写本文时）9.22 会引发一些贬值错误，但使用已接受的答案（由 Sait）9.05 中建议的版本，为我修复了所有问题。谢谢！

我在 Windows 10 上使用了以下版本：

1.  Miktex（我认为是 MiKTeX2.9，32 位；这个可能是 Basic-miktex-2.9.4521.exe）
2.  Ghost 脚本（gs905w32.exe，不是当时最新的，gs922w32.exe）
3.  GSView (gsv50w32.exe)
4.  pstoedit (pstoeditsetup_win32.exe)
5.  ImageMagick (ImageMagick-7.0.7-Q16)
6.  Inkscape（Inkscape 0.92.2（5c3e80d，2017-08-06），大概是 32 位）

注意事项：

1.  我用的是 32 位的版本，64 位的版本一开始没有其他问题）

2.  Ghost Script 9.22 版引发了一些折旧错误。9.05 版就像一个魅力。

3.  在安装 pstoedit 时，我检查了：“用于在其他程序中使用 pstoedit.dll 的 .h 和 .lib 文件”和“插件 SVG、MIF、EMF、CGM 格式（共享软件）”
4.  我安装了图像魔法。

来源： http: [//knowledgepayback.blogspot.be/2017/09/surface-pro-2017-optimising-for.html](http://knowledgepayback.blogspot.be/2017/09/surface-pro-2017-optimising-for.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-30T14:56:46.530

我发现现有的答案不令人满意。MikTeX 已经附带了将 PDF 转换为 SVG 以及将 LaTeX 编译为 PDF 的工具，因此这些依赖项似乎是人为的。我发现可以使用这些工具构建更新版本的 LaTeX 扩展[https://github.com/juanjosegarciaripoll/inkscape-latex-miktex](https://github.com/juanjosegarciaripoll/inkscape-latex-miktex)

Just copy the *.inx and *.py files into the Inkscape/share/extensions folder and start Inkscape. The interface is very primitive, and equations cannot be edited, but it works.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-10T12:27:06.857

[这个站点](http://yeknan.free.fr/dc2/index.php?post/2015/02/12/Textext)解释了使乳胶与 Inkscape 一起工作的过程...... 唯一应该检查的是添加到环境变量中的路径（如果使用了更新的版本）。

这是提议程序的引述（对不起，它是法语）：

> Choisissez les fichiers d'installation 32 或 64 bits en fonction de votre système。Si vous ne savez pas lequel il vous faut : Clic droit sur l'icône Ordinateur (sur le Bureau ou dans le Menu Windows) → Propriétés, l'information est affichée dans Système : 类型 du système。
> 
> *   安装程序 Miktex、Ghostscript、Ghostview、ImageMagick
> *   安装程序 pstoedit en personnalisant l'installation :
>     *   安装 dans le dossier de Gostgum : C:\Program Files\Ghostgum\pstoedit
>     *   Cocher : « .h 和 .lib 文件，用于在其他程序中使用 pstoedit.dll » et « 插件 SVG、MIF、EMF、CGM 格式（共享软件）»
> *   复印机文件 textext.py 和 textext.inx dans : C:\Program Files\Inkscape\share\extensions
> *   Extraire site-packages.zip dans : C:\Program Files\Inkscape\python\Lib\site-packages
> *   Clic droit Ordinateur (sur le Bureau ou dans le Menu Windows) : Propriétés → Paramètres système avancés → Variables d'environnement... Dans Variables système → Path, ajouter : ;C:\Program Files\gs\gs9.15\lib;C: \Program Files\gs\gs9.15\bin;C:\Program Files\ghostgum\pstoedit

# bash - command date script shell bsh/ksh

> ID：11793603
> 
> 赞同：0
> 
> 时间：2012-08-03T10:07:40.070
> 
> 标签：bash, shell, date, scripting, solaris

I need help. I made a shell script that you pass a date earlier than 3 days in YYYYMMDD format and tell me if it is correct or not. My question is. Can i subtract the date command 3 days? thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:16:38.423

你可以测试：

```
 DATE="20120803"
 date -d @$(( `date -d "$DATE" +%s` - (3*24*60*60) )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:00:58.900

对于花哨的解决方案：

```
INPUT="20120803"
INPUT_SECONDS=$(date -d "$INPUT" +%s)
THREEDAYSAGO_SECONDS=$(date -d "3 days ago" "+%s")

if [ $INPUT_SECONDS -lt $THREEDAYSAGO_SECONDS ]; then
    echo "too early :("
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:20:37.160

尽管您可以使用 date 命令来执行此操作（请参阅[Guillame 的出色答案](https://stackoverflow.com/a/11793754/12960)），但可能值得考虑使用 Perl 等脚本语言来更有效地完成更复杂的事情。

例如，使用[Perl](http://www.perl.com)和模块查看[这个 SO](https://stackoverflow.com/a/7036729/12960)答案：`DateTime.pm`

```
use DateTime;
my $date = DateTime->now;
$date->subtract(days => 3);
print $date->ymd; 
```

# wordpress - WordPress: get all meta data when user registers

> ID：11793605
> 
> 赞同：0
> 
> 时间：2012-08-03T10:07:48.713
> 
> 标签：wordpress, metadata, user-registration

I have a user registration form in the front end (in the Users admin section as well) with three extra fields (apart from default ones): birthday, country, language. their values are stored in usermeta table.

I have this action hook to retireve all meta data for the registered user:

```
add_action('user_register', 'new_user_func');

// user registration callback function
function new_user_func($userID) {
    $newUser = get_user_meta( $userID );
    $userMeta = array();
    foreach ($newUser as $key => $value) {
        $userMeta[$key] = $value[0];
    }
    //do something with $userMeta...
} 
```

var_dump($userMeta) after submit doesn't give me the extra fields value though.. only defaults (first name, last name etc)

Anyone know what might be the case?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:19:15.253

您是否尝试通过以下方式获取值：

```
$meta = get_the_author_meta($meta_key, $user_id); 
```

get_user_meta() 可能不支持您自己添加的元值。

如果这也不起作用，也许您需要查看如何创建新的元字段。这里有一个相当不错的教程：http: [//justintadlock.com/archives/2009/09/10/adding-and-using-custom-user-profile-fields](http://justintadlock.com/archives/2009/09/10/adding-and-using-custom-user-profile-fields)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T11:50:08.487

阅读 user_register [action](https://codex.wordpress.org/Plugin_API/Action_Reference/user_register)的 de Codex 条目，它说：触发此操作时，并非所有用户元数据都已存储在数据库中。

# css - 我可以根据仅使用 CSS 的包含列表项的数量来设置列表视图的样式吗？

> ID：11793609
> 
> 赞同：0
> 
> 时间：2012-08-03T10:08:00.527
> 
> 标签：css, list, border

在我的页面上，我有许多`listviews`.

有些包含一个列表项，有些包含多个项目。我正在寻找一种方法来设置顶部/底部边框，具体取决于仅 CSS 方式中的列表项数量。

所以在单个项目列表中，边框应该是：

```
listitem > border-top & border-bottom 
```

两个项目列表

```
listitem > border-top
listitem > border-top & border-bottom 
```

三+项目清单

```
listitem > border-top
listitem > border-top & border-bottom
listitem > border-bottom 
```

现在我有这个 CSS

```
.inputList li:not( .inputList li:first-child, .inputList li:last-child) {
    border-top-width: 1px;
    border-bottom-width: 1px;
    }
.inputList li:first-child {
    border-bottom-width: 1px;
    }
.inputList li:last-child {
    border-top-width: 1px;
    } 
```

但这并没有让我走得太远，我正在使用`not:`我宁愿避免使用的（因为缺乏 IE 支持）

知道这是否可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:11:59.003

所有你需要的是

```
.inputList li:first-child {
   border-top: 1px solid black;
}
.inputList li {
   border-bottom: 1px solid black;
} 
```

这样，您将始终在顶部有一个边框，在底部和中间有一个边框。

# sencha-touch-2 - How to handle login sessions in sencha touch?

> ID：11793611
> 
> 赞同：0
> 
> 时间：2012-08-03T10:08:33.287
> 
> 标签：sencha-touch-2

How to handle login sessions in sencha touch?

i know one way to handle using localstorage we can do that. but i need to know if any other ways achieve this, please let me know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:10:11.213

you can use local storage by setting item to it and getting item.

It is better way to do that.

# c++ - Mistake in input Russian letter in Visual Studio 2008 throw console

> ID：11793612
> 
> 赞同：3
> 
> 时间：2012-08-03T10:08:41.447
> 
> 标签：c++, visual-studio-2008, console

> **Possible Duplicate:**
> [I can't see the russian alpabet in Visual Studio 2008](https://stackoverflow.com/questions/11790695/i-cant-see-the-russian-alpabet-in-visual-studio-2008)

I'm trying input symbol from console in Russian alphabet. This is code

```
#include <iostream>
#include <windows.h>
#include <locale.h>
using namespace std;

void main(){
    char c;
    setlocale(LC_ALL,"rus");
    cout << "Я хочу видеть это по-русски!" << endl;
    cin >> c;
    cout << c;
} 
```

I entered 'ф', but it prints 'д'. I tried to use

```
char buf[2];
char str[2];
str[0] = c;
str[1] = '\0';
OemToAnsi(buf, str); 
```

But I have

```
+       str 0x0015fef4 "¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦ф¦¦¦¦d §"    char [2]
+       buf 0x0015ff00 "¦¦¦ф¦¦¦¦d §"    char [2] 
```

And then I have an error Run-Time Check Failure #2 - Stack around the variable 'str' was corrupted.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:53:56.007

我假设您使用的设置是使用 cp1251 (Cyrillic Windows) 保存源代码并使用 cp866 (Cyrillic DOS) 保存控制台。（这将是俄语版本的 Windows 上的默认设置。）您遇到的问题似乎是设置区域设置会导致输出从 cp1251 转换为 cp866，但不会导致反向转换输入。所以当你读入一个字符时，程序会得到 cp866 表示。这个 cp866 表示在输出时被错误地视为 cp1251 表示并转换为 cp866，从而导致 ф 到 ä 转换。

我认为转换只是由 CRT 基于 C 语言环境完成的，但我不知道如何为输入启用类似的转换。有不同的选项可以让您的程序运行。

*   在回显之前手动将输入数据从 cp866 转换为 cp1251。
*   替换`setlocale(LC_ALL,"rus")`which 会更改 CRT 处理输出的方式，而调用`SetConsoleCP(1251); SetConsoleOutputCP(1251);`which 将更改控制台的行为（并且更改将在控制台的生命周期内持续存在，而不是在程序的生命周期内持续存在）。
*   将 cin 和 cout 的使用替换为使用 UTF-16 的 Windows API。Microsoft 对标准库的实施强制使用遗留编码并在 Windows 上导致各种类似的问题。所以完全避免它。

这是第二个选项的示例：

```
#include <iostream>
#include <clocale>

#include <Windows.h>

void main(){
    char c;
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);

    std::cout << "Я хочу видеть это по-русски!\n";
    std::cin >> c;
    std::cout << c;
} 
```

假设源是 cp1251 编码的，那么输出将正确显示，输入 ф 不会转换为 ä。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:53:50.410

```
const int N = 34;
const char DosABC[N] = "абвгдеёжзийклмнопрстуфхцчшщъыьэюя";
const char WinABC[N] = " ЎўЈ¤Ґс¦§Ё©Є«¬­®Їабвгдежзийклмноп";

std::string ToDosStr(std::string input)
{
    std::string output = "";
    bool Ok;
    for (unsigned i = 0; i < input.length(); i++)
    {
        Ok = false;
        for (int j = 0; j < N; j++)
            if (input[i] == WinABC[j])
            {
                output += DosABC[j];
                Ok = true;
            }
            if (!Ok)
                output += input[i];
    }
    return output;
} 
```

我做到了，它有效，但欢迎大家找到更简单的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:51:21.687

语言环境可能是错误的。尝试

```
setlocale(LC_ALL, ""); 
```

这会将语言环境设置为“默认值，即从操作系统获得的用户默认 ANSI 代码页”。

# delphi - Error passing a generic type from a class to another

> ID：11793623
> 
> 赞同：0
> 
> 时间：2012-08-03T10:09:21.063
> 
> 标签：delphi, generics, compiler-errors, delphi-2010, rtti

I am using Delphi 2010

I get the error: E2506 Method of parameterized type declared in interface section must not use local symbol.

Is there a way to accomplish this task?

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Rtti;

type

  MyFormType<T: TForm> = class
    class procedure SpecialOpen(var FormVar: T; Params: array of TValue);
  end;

  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    procedure ShowForm<T1: TForm>(var aForm: T1);
  end;

var
  Form1: TForm1;

implementation

uses Unit2;

{$R *.dfm}

procedure TForm1.ShowForm<T1>(var aForm: T1);
begin
  if aForm = nil then
    MyFormType<T1>.SpecialOpen(aForm, [Self])    // <-- Error
  else
    aForm.Show;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowForm<TForm2>(Form2)
end;

{ MyFormType<T> }

class procedure MyFormType<T>.SpecialOpen(var FormVar: T; Params: array of TValue);
var lRttiContext: TRttiContext;
begin
  FormVar := lRttiContext.GetType(TClass(T)).GetMethod('Create').Invoke(TClass(T), Params).AsType<T>;
  FormVar.Show;
end;

end. 
```

Tanks and sorry for my english.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:26:00.687

这是 Delphi 2010 中众多泛型错误之一。您的代码在 XE2 中编译。您的选择是寻找适用于 2010 年的解决方法，或者进行升级。Delphi XE 和 XE2 确实包含大量针对泛型编译器错误的修复，因此如果您认真使用泛型，Delphi 2010 不是一个好选择。

# objective-c - IOS - 加载未知类型的 UIViewController

> ID：11793624
> 
> 赞同：0
> 
> 时间：2012-08-03T10:09:22.140
> 
> 标签：objective-c, ios, uiviewcontroller, runtime

我正在尝试加载 UIViewController，但直到运行时才知道类型。

所以我有一些不同的 UIViewControllers，每个都有自己的 .xib，并且使用以下代码，正确显示了 .xib，但从未创建 UIViewController，因为它是 UIViewController 的子级，而不是完全 UIViewController：

```
UIViewController *vc = [[UIViewController alloc] initWithNibName:[[self component] xibName] bundle:nil];
[self.navigationController pushViewController:vc animated:YES]; 
```

例如，在这种特殊情况下它可以正常工作，但显然不适用于其余情况：

```
Controller1 *vc = [[Controller1 alloc] initWithNibName:[[self component] xibName] bundle:nil];
[self.navigationController pushViewController:vc animated:YES]; 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:15:37.203

您可以将控制器类名称放在 NSSTring 中并像这样创建对象

```
`UIViewController *vc=[[NSClassFromString(ControllerclassName) alloc] init];
[self.navigationController pushViewController:vc animated:YES];` 
```

# android - 如果仅在 android 4.x 中点击同一字段，则 Android EditText selectAll() 不起作用

> ID：11793635
> 
> 赞同：0
> 
> 时间：2012-08-03T10:10:04.417
> 
> 标签：android, android-edittext

如果单击相同的内容，我想选择 EditText 字段中存在的所有文本，现在我可以通过以下代码在 android 2.x 和 3.x 中实现这一点，但在 4.0 中则不行。如果有人遇到同样的问题，请告诉我如何解决。

```
@Override
public void onFocusChange(View v, boolean hasFocus) {
    switch(v.getId()) {
    case R.id.passcodetext1:
        if(hasFocus) editText1.selectAll();
        break;

    case R.id.passcodetext2:
        if(hasFocus) editText2.selectAll();
        break;

    case R.id.passcodetext3:
        if(hasFocus) editText3.selectAll();
        break;

    case R.id.passcodetext4:
        if(hasFocus) editText4.selectAll();
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:28:45.417

我通过在 layout.xml 中添加一个属性解决了这个问题。

```
android:selectAllOnFocus="true" 
```

早些时候我没有意识到这一点，但这确实是解决这类问题的一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:12:35.663

试试这个...

```
 if(hasFocus) v.selectAll();
              ^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-20T18:37:08.227

请参阅此解决方案：[https ://stackoverflow.com/a/35527348/1504248](https://stackoverflow.com/a/35527348/1504248)

可能你需要运行类似的东西：

```
 Editable text = edit.getText();
        if (text.length() > 0) {
            text.replace(0, 1, text.subSequence(0, 1), 0, 1);
            edit.selectAll();
        } 
```

在你的`if(hasFocus)`.

# python - 在 Python 中复制和写入 XML 节点

> ID：11793647
> 
> 赞同：3
> 
> 时间：2012-08-03T10:10:41.260
> 
> 标签：python, xml, dom

我有一个大型 XML 文件，需要对其进行解析并查找特定节点。一旦找到它，我需要制作一个副本，编辑几个值并再次写入文件。

到目前为止，我已经设法获得了我想要的 DOM 元素。XML 中实际上已经有两个这样的元素，所以在我完成后，将会有三个。一旦我制作了 DOM 的副本并编辑了值，我该如何将其写入 DOM（以及文件）？

我`from xml.dom import minidom`目前正在使用 Python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:21:52.653

在minidom中，您从创建文档开始：

```
 Document doc = Document("your_root") 
```

然后，如果它是您要添加的文本节点，则将其附加：

```
 text_node = doc.createTextNode(str(some content))
 doc.appendChild(text_node) 
```

例如，如果您有`<some_elem key="my value">some my text</some_elem>`：

像这样做：

```
text_node = doc.createTextNode('some my text')
elem.appendChild(text_node)
elem.setAttribute('key', 'my value') 
```

如果它是复杂元素，请使用以下方法创建它：

```
elem = doc.createElement('your_elem') 
```

如果您需要设置属性，请执行以下操作：

```
elem.setAttribute("some-attribute",your_attr) 
```

如果你需要在上面附加一些东西：

```
elem.appendChild( some_other_elem ) 
```

然后附加元素：

```
doc.appendChild( elem ) 
```

如果您需要字符串表示，请执行以下操作：

```
doc.toxml() 
```

的

```
doc.toprettyxml() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:03:51.087

从[minidom 文档](http://docs.python.org/library/xml.dom.minidom.html)：

```
from xml.dom.minidom import getDOMImplementation

impl = getDOMImplementation()

newdoc = impl.createDocument(None, "some_tag", None)
top_element = newdoc.documentElement
text = newdoc.createTextNode('Some textual content.')
top_element.appendChild(text) 
```

所以我想`appendChild`这是你要求的吗？

# ruby-on-rails - 我如何禁止rails中的字符

> ID：11793652
> 
> 赞同：0
> 
> 时间：2012-08-03T10:11:01.207
> 
> 标签：ruby-on-rails, ruby, regex, validation

我想禁止字段中的“/”。

我在文档中读到它应该是这样的：

> valid_name_regex = /
> 验证：name，存在：true，唯一性：{ case_sensitive: true }，格式：{ with：valid_name_regex }

但我想要相反的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:22:44.600

尝试类似的东西

```
validates :name, presence: true, uniqueness: { case_sensitive: true }, format: { with: /^[^\/]+$/ } 
```

# javascript - 在 d3.js 中将图像作为轴刻度

> ID：11793653
> 
> 赞同：1
> 
> 时间：2012-08-03T10:11:04.703
> 
> 标签：javascript, d3.js

是否可以使用 d3.js javascript 库将图像作为轴刻度？我正在尝试可视化一个简单的条形图（完成！），但在 x 轴上，我需要为每个条形显示不同的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:31:52.623

有可能的。考虑这个问题的方法是使用 d3 在页面上定位图像。

如果您在 div 中的每个图像都有自己的 id，那么您可以[使用 d3 来选择和定位](http://d3js.org/)这些 div。我发现[本教程](http://www.recursion.org/d3-for-mere-mortals/)非常有帮助。

# javascript - FireFox - 在全局范围内由 id 名称引用的元素。使用 w3c 标准。

> ID：11793657
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:11:28.530
> 
> 标签：javascript, jquery

我的这部分代码收到此消息。

```
$(window).scroll(function () {
if ($(window).scrollTop() + $(window).height() == $(document).height()) { } 
} 
```

我似乎无法修复它。任何人都可以帮助或阐明一些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:19:07.907

除了你的语法错误之外，它对我有用......

[http://jsfiddle.net/Qu82q/](http://jsfiddle.net/Qu82q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:17:44.507

试试这个：

```
$(window).scroll(function () {
    var $window=$(window);
    if (($window.scrollTop() + $window.height()) == $(document).height()) { 

    } 
} 
```

# vb.net - 'String' 的值无法转换为 'System.Windows.Forms.Control' 错误

> ID：11793659
> 
> 赞同：0
> 
> 时间：2012-08-03T10:11:53.050
> 
> 标签：vb.net, minecraft

我正在为游戏（我的世界）制作启动器，但我一直收到此错误。我这样做是为了让您通过 OpenGileDialog 打开一个文件（minecraft.exe），然后将文件名输入到文本框（textbox1）中，但在我尝试制作的代码，所以如果路径不包含“我的世界”会说无效路径

这是我的代码

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    OpenFileDialog1.ShowDialog()
    TextBox1.Text = OpenFileDialog1.FileName
    If TextBox1.Contains("Minecraft") = False Then
        MsgBox("Invalid Path")
    End If
End Sub 
```

TextBox1.Contains("minecraft") = False 出现错误，提示“'String' 的值无法转换为 'System.Windows.Forms.Control'”请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:44:24.340

你错过了`.Text`：

```
If Not TextBox1.Text.Contains("Minecraft") Then
   '...
End If 
```

* * *

`TextBox`继承自`Control`，它可以有子控件。该方法`Control1.Contains(Control2)` [需要](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.contains%28v=vs.110%29.aspx)另一个`Control`.

由于您没有**`Option Strict On`**编译器正在尝试将字符串转换`"Minecraft"`为 a `Control`，因此给出了您获得的异常。我强烈建议您`Option Strict On`在项目设置上使用以避免进一步的隐式转换。

您需要访问该`TextBox1.Text`属性，该属性返回 a `String`，并具有[`.Contains()`](http://msdn.microsoft.com/en-us/library/dy85x1sa%28v=vs.110%29.aspx)您期望的方法，如您在上面的代码中所见。

# android - Android - 监听文件夹中的变化

> ID：11793661
> 
> 赞同：1
> 
> 时间：2012-08-03T10:12:00.103
> 
> 标签：android

我有一个蓝牙应用程序，它将列出我手机上蓝牙文件夹中的所有文件。到目前为止，我只这样做了：

```
public class GetCaseInformation {

int numberOfFiles;
String pathToFolder;
File folder;

public GetCaseInformation(String pathToFolder) {

    this.pathToFolder = pathToFolder; 
    folder = new File(pathToFolder);
}

public int getCasesFromFolder() {

    return folder.list().length; 

}

} 
```

检查文件夹中有多少文件的一种非常简单的方法。该方法`getCasesFromFolder()`在我的方法中被调用`onCreate`，因此每次用户进入主屏幕时都会更新该方法。是否可以监听特定文件夹中的更改？所以我可以动态更新此文件夹中的文件数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:34:16.480

你可以试试`FileObserver`：

> 监视文件（使用 inotify）以在设备上的任何进程（包括此进程）访问或更改文件后触发事件。FileObserver 是一个抽象类；子类必须实现事件处理程序 onEvent(int, String)。

# c# - 在本地托管 WCF

> ID：11793663
> 
> 赞同：0
> 
> 时间：2012-08-03T10:12:08.307
> 
> 标签：c#, wcf

我可以使用 netTcpBinding 在同一台机器（本地主机）中而不是在本地主机之外访问（请注意，我问的是可访问的意思是可浏览的）来托管 WCF 服务......甚至不是内部网。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:14:30.447

我应该这样认为，只要它运行的端口不可从外部访问（例如被防火墙阻止）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:22:45.887

这也可以在托管级别（在 IIS 中）完成：

*   打开 IIS 管理器
*   选择 WCF 服务应用程序文件夹
*   打开“IP地址和域限制”
    *   如果不存在，则必须将“ip 和域限制”角色添加到服务器
*   在“IP 地址和域限制”中输入 127.0.0.1 的允许条目
*   然后在“编辑功能设置”下将“未指定访问”设置为“拒绝”

无论服务如何设置，IIS 都不允许访问 127.0.0.1 之外

*编辑：此功能在 IIS 5.1 (Windows XP) 上不可用。您将需要防火墙，或查看 IIS Express。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:39:07.377

您可以使用 IIS（net.tcp 仅 7.0 或更高版本）或作为 Windows 服务托管 WCF 服务。

对于 IIS，您应该创建站点或 Web 应用程序并为 net.tcp 协议添加与端口的绑定。

在 localhost 和远程计算机上托管没有区别。

一般来说，本地连接最好使用 NetNamedPipeBinding

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T03:13:01.733

正如 Henk Holterman 所建议的那样

当我们在 loaalhost 中托管服务并且服务只需要进程内通信（例如与同一台机器中的另一个 WCF 进行通信）或者说存在于同一台机器中的 .Net 客户端时，NetNamedPipeBinding 是最好的方法......

同样，netNamedPipeBinding 使通信更快，因为

1) 序列化以二进制格式进行 2) 与 netTcpBinding 不同，我们通过端口进行通信，netNamedPipebinding 使用命名管道在进程之间进行通信。

谢谢。苏拉杰

# sql - 从两个日期变量内的表中检索记录

> ID：11793666
> 
> 赞同：0
> 
> 时间：2012-08-03T10:12:43.853
> 
> 标签：sql, sql-server

我有一个表，我想根据两个日期之间的时间尺度来查询记录。

我有两个变量，

```
DECLARE @StartDate datetime;
DECLARE @EndDate datetime; 
```

我可以添加什么子句以仅显示在应用于这两个变量的日期内找到的记录？

这基于表中的“日期”列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:15:27.577

```
SELECT myColumn
  FROM myTable
 WHERE Date BETWEEN @StartDate AND @EndDate 
```

已编辑：Between 子句是`inclusive`（两个日期都包含在结果中）所以如果您可能想排除变量列中的一个日期，最好使用：

```
SELECT myColumn
  FROM myTable
 WHERE Date >= @StartDate
   AND Date <= @EndDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:15:11.163

```
SELECT * FROM [your_table] WHERE Date>=@StartDate AND Date<=@EndDate 
```

# wpf - 带有文本旋转效果的 WPF FlowDocument 到 XPS 渲染

> ID：11793670
> 
> 赞同：0
> 
> 时间：2012-08-03T10:12:56.053
> 
> 标签：wpf, vb.net, xaml, flowdocument, xps

我正在使用 WPF 渲染 XPS。这是完全动态的（XAML 免费）。

在我的代码中，我有以下代码来设置文本旋转。

```
Private Shared Sub ApplyRotation(style As BoxStyleData, run As TextElement)
  If style IsNot Nothing Then
    If Math.Abs(style.TextRotation) > Double.Epsilon Then
      Dim effects = New TextEffectCollection
      Dim effect = New TextEffect()
      effect.Transform = New RotateTransform(style.TextRotation)
      effect.PositionCount = 100
      effects.Add(effect)
      run.TextEffects = effects
    End If
  End If
End Sub 
```

它在 FlowPanel 内，因此一些错误阻止我为整个段落设置旋转（更多关于这里[http://social.msdn.microsoft.com/Forums/nl/wpf/thread/931f1995-d039-4364-b09b- fcd0a43fd737](http://social.msdn.microsoft.com/Forums/nl/wpf/thread/931f1995-d039-4364-b09b-fcd0a43fd737) )

我的问题是，即使我使用修复程序，结果也不正确。在一定数量的字符之后，文本不再旋转：

![在此处输入图像描述](../Images/33b5161d09a24ccd0b9316b7fcee8525.png)

请注意，该屏幕截图来自我渲染结果的 XPS。当我将它呈现到 XAML 时，您可以看到效果已正确映射到文本中的所有`Runs`内容。

```
<Paragraph Margin="0,0,0,0" Padding="0,18.9,0,0" TextAlignment="Center" ClearFloaters="None" FontSize="14.62">
<Span FontSize="14.62"><Run><Run.TextEffects><TextEffect PositionCount="100"><TextEffect.Transform><RotateTransform Angle="356.7" /></TextEffect.Transform></TextEffect></Run.TextEffects>Denken Sie frühzeitig</Run></Span><LineBreak />
<Span FontSize="14.62"><Run><Run.TextEffects><TextEffect PositionCount="100"><TextEffect.Transform><RotateTransform Angle="356.7" /></TextEffect.Transform></TextEffect></Run.TextEffects>an den</Run></Span><LineBreak />
<Span FontSize="14.62"><Run><Run.TextEffects><TextEffect PositionCount="100"><TextEffect.Transform><RotateTransform Angle="356.7" /></TextEffect.Transform></TextEffect></Run.TextEffects>Räderwechsel!</Run></Span><LineBreak />
<LineBreak />
<Span FontSize="14.62"><Run><Run.TextEffects><TextEffect PositionCount="100"><TextEffect.Transform><RotateTransform Angle="356.7" /></TextEffect.Transform></TextEffect></Run.TextEffects>Unser</Run></Span><LineBreak />
<Span FontWeight="Bold" FontSize="14.62"><Run><Run.TextEffects><TextEffect PositionCount="100"><TextEffect.Transform><RotateTransform Angle="356.7" /></TextEffect.Transform></TextEffect></Run.TextEffects>Winter Check-Point</Run></Span><LineBreak />
<Span FontSize="14.62"><Run><Run.TextEffects><TextEffect PositionCount="100"><TextEffect.Transform><RotateTransform Angle="356.7" /></TextEffect.Transform></TextEffect></Run.TextEffects>ist für Sie offen!</Run></Span></Paragraph> 
```

现在，有没有人知道如何实现整个文本的旋转，因为我真的需要它。

谢谢

编辑：为了快速测试它不能正常工作，您可以创建 WPF 应用程序并粘贴以下 XAML 代码

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
    <FlowDocumentPageViewer>
      <FlowDocument>
        <Paragraph Margin="0,0,0,0" Padding="0,18.9,0,0" TextAlignment="Center" ClearFloaters="None" FontSize="14.62">
          <Span FontSize="14.62">
            <Run>
              <Run.TextEffects>
                <TextEffect PositionCount="100">
                  <TextEffect.Transform>
                    <RotateTransform Angle="356.7" />
                  </TextEffect.Transform>
                </TextEffect>
              </Run.TextEffects> Denken Sie frühzeiti
            </Run>
          </Span>
          <LineBreak />
          <Span FontSize="14.62">
            <Run>
              <Run.TextEffects>
                <TextEffect PositionCount="100">
                  <TextEffect.Transform>
                    <RotateTransform Angle="356.7" />
                  </TextEffect.Transform>
                </TextEffect>
              </Run.TextEffects> an den
            </Run>
          </Span>
          <LineBreak />
          <Span FontSize="14.62">
            <Run>
              <Run.TextEffects>
                <TextEffect PositionCount="100">
                  <TextEffect.Transform>
                    <RotateTransform Angle="356.7" />
                  </TextEffect.Transform>
                </TextEffect>
              </Run.TextEffects> Räderwechsel!
            </Run>
          </Span>
          <LineBreak />
          <LineBreak />
          <Span FontSize="14.62">
            <Run>
              <Run.TextEffects>
                <TextEffect PositionCount="100">
                  <TextEffect.Transform>
                    <RotateTransform Angle="356.7" />
                  </TextEffect.Transform>
                </TextEffect>
              </Run.TextEffects> Unser
            </Run>
          </Span>
          <LineBreak />
          <Span FontWeight="Bold" FontSize="14.62">
            <Run>
              <Run.TextEffects>
                <TextEffect PositionCount="100">
                  <TextEffect.Transform>
                    <RotateTransform Angle="356.7" />
                  </TextEffect.Transform>
                </TextEffect>
              </Run.TextEffects> Winter Check-Point
            </Run>
          </Span>
          <LineBreak />
          <Span FontSize="14.62">
            <Run>
              <Run.TextEffects>
                <TextEffect PositionCount="100">
                  <TextEffect.Transform>
                    <RotateTransform Angle="356.7" />
                  </TextEffect.Transform>
                </TextEffect>
              </Run.TextEffects> ist für Sie offen!
            </Run>
          </Span>
        </Paragraph>
      </FlowDocument>
    </FlowDocumentPageViewer>
  </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:05:12.060

所以，我已经通过切换来修复它

```
effect.PositionCount = 100 
```

至

```
effect.PositionCount = Integer.Max 
```

这解决了这个问题。

我没有正确理解它的含义，并认为它的意思是完成效果的百分比。

# sql - sql计数不匹配

> ID：11793672
> 
> 赞同：1
> 
> 时间：2012-08-03T10:12:57.077
> 
> 标签：sql, oracle

我无法理解 SQL 查询输出：

```
SQL> select distinct(STATUS) from TMP_ORDER_ACTION_PSTN_CP_11035;

    InDelivery_SOMBe 
    In Delivery
    Complete
    Amended
    Cancelled
    Failed InComplete
 1   SQL> select count(*) from TMP_ORDER_ACTION_PSTN_CP_11035 where
    STATUS='Complete';
          1484
 2   SQL>  select count(*) from TMP_ORDER_ACTION_PSTN_CP_11035 where STATUS
    != 'Complete';
          3167
  3  SQL> select count(*) from TMP_ORDER_ACTION_PSTN_CP_11035;
          5091 
```

第 1 次和第 2 次查询的计数总和应该与总计数（3 次查询）相同。为什么总和与总计数不同？这似乎是一个转储问题，但我不知道为什么会这样。请注意，我的问题根本与空检查无关。它是 sum(1+2)=3.1484+3167 !=5091。为什么结果不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:16:44.690

`WHERE STATUS = NULL`不会工作。没有什么等于`NULL`。

尝试`IS`而不是`=`...

```
select count(*) from TMP_ORDER_ACTION_PSTN_CP_11035 where STATUS IS null 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T10:16:03.150

我的猜测是 NULL 值，它与您的任何 WHERE 子句都不匹配，*包括最后一个*。尝试

```
select count(*) from TMP_ORDER_ACTION_PSTN_CP_11035 where STATUS is null; 
```

`where status = null`从来都不是真的，也不是`where null = null`。你必须使用`is null`.

> 第 1 次和第 2 次查询的计数总和应该与总计数（3 次查询）相同。为什么总和与总计数不同？

不，因为带有 NULL 的记录不匹配查询 1 或查询 2，但它们被计入查询 3。

1 + 2 + IS NULL 应该等于 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:02:00.743

尝试这个：

假设 p_key 是表的主键，

```
select count(p_key) from TMP_ORDER_ACTION_PSTN_CP_11035 where STATUS='Complete';
select count(p_key) from TMP_ORDER_ACTION_PSTN_CP_11035 where STATUS <> 'Complete';
select count(p_key) from TMP_ORDER_ACTION_PSTN_CP_11035 ; 
```

# ternary - 三元运算符只能做一种条件吗？

> ID：11793673
> 
> 赞同：0
> 
> 时间：2012-08-03T10:12:56.873
> 
> 标签：ternary

三元使代码简洁易读，我很好奇如何将以下内容更改`if condition`为三元运算符：

`var1 = if(true){'a'}`;

我尝试以下

`var1 = true? 'a': ;`

因为它与条件无关`false`，所以我在 之后留空`:`，但显然它给了我一个错误。

有没有办法做到这一点？

- - - - 更新 - - - - -

使用上面的例子的目的是为了简化问题，但是它让大家更加困惑，所以我发布了我的原始代码：

`if($_SERVER['REQUEST_METHOD'] == 'GET'){ $sub_count = 0; }`

`$sub_count = $_SERVER['REQUEST_METHOD'] == 'GET'? 0 : ;`

如何将 if 条件更改为三元？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:12:42.123

```
$sub_count = null;
$sub_count = $_SERVER['REQUEST_METHOD'] == 'GET'? 0 : null;

// To check:
if(!isset($sub_count))
{
   // Do something because $_SERVER['REQUEST_METHOD'] != 'GET'
} else {
    if($sub_count===0)
    {
        // REQUEST METHOD IS GET
    }
} 
```

# android - 使用 Android NDK 时在 Android App 上的文件访问

> ID：11793677
> 
> 赞同：0
> 
> 时间：2012-08-03T10:13:00.533
> 
> 标签：android, android-ndk

我有一个使用 android-ndk 编译的本机共享库

C API 函数之一是：

```
int load_config(const char *fn, Config *cfg) 
```

我已经用 JNI 包装了函数并成功地从 Java 调用它，例如

```
Config cfg = new Config();
my_shared_lib.load_config("test.gcf", cfg);
System.out.println("cfg.rx_id = " + cfg.getRx_id()); 
```

这将打印来自 Config 数据结构的预期值

但是现在我已经将它移植到了 Android 模拟器上，我很困惑如何处理代表配置数据文件名的字符串

我尝试将 test.gcf 添加到 $(PROJECT)/assets 目录然后：

```
Config cfg = new Config();
my_shared_lib.load_config("assets/test.gcf", cfg);
outputText.append("cfg.rx_id = " + cfg.getRx_id()); 
```

但这不起作用，即未输出 Config 数据结构的预期值（我只是得到一个空白）

换句话说，当您的本机库函数需要文件名作为参数时，您会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:41:28.630

资产不存储为文件，既不在设备上，也不在模拟器上。它们存储在 APK 中，这是一个 ZIP 存档；使用 C/C++ 文件访问函数永远不会对它们起作用。要从 JNI 代码访问资产，请使用[AAssetManager](https://stackoverflow.com/questions/6932725/is-there-any-good-resource-that-discusses-android-ndk-api-in-a-somewhat-decent-m)。

现在，配置文件可能不属于资产。根据定义，资产是只读的；你希望你的配置是可变的，对吧？`Context.getDir()`Android上的可写数据文件夹是通过函数在Java端检索的；您从中派生文件名，并将其传递给 C 端。像这样的东西：

```
File Path = Ctxt.getDir("MyData", 0);
File FileName = new File(Path, "test.gcf");
my_shared_lib.load_config(FileName.toString(), cfg); 
```

所述文件夹将映射到 Android 文件系统中的以下路径： `/data/data/com.mypackagename/app_MyData`. 如果启用将应用程序移动到 SD 卡，则不同。

If you want to ship a default config file in assets but keep it as writeable in the data folder as the app runs, you just have to copy it from assets to the data folder on the first run. Example [here](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder/3093966#3093966).

# java - 如何检测是否有音频输出到扬声器

> ID：11793678
> 
> 赞同：3
> 
> 时间：2012-08-03T10:13:01.507
> 
> 标签：java, windows, audio, system

我需要一种方法来检测 Windows 上的任何程序是否有任何音频传递到扬声器。

基本上我需要知道运行我的程序的某个远程 PC 上的扬声器上是否有声音。如果我转到控制面板->播放选项卡上的声音，我可以看到绿色条显示该音频设备的输出电平。有什么方法可以读取该值；还是只是0或其他？

# java - 在 JavaFX 2 中实现分步动画

> ID：11793681
> 
> 赞同：1
> 
> 时间：2012-08-03T10:13:06.657
> 
> 标签：java, animation, javafx-2

我想在 JavaFX 2 中实现动画，它通过给定的步骤改变 Text 节点的不透明度。

比方说，我有一个不透明度为 1.0d 的 Text 节点，在 500 毫秒后，我希望该节点的不透明度变为 0.86d，再延迟 500 毫秒后，不透明度变为 0.72，依此类推......直到不透明度达到 0.0d。这些状态（关键帧）之间的转换不应该存在，即动画应该只通过改变文本节点不透明度状态的关键帧。

这可以在 JavaFX 2 中使用基于时间轴的动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:17:04.253

实现这一点的几种方法：

1.  为您的时间线提供多个关键帧，并通过向帧提供[KeyValue显式设置每个](http://docs.oracle.com/javafx/2/api/javafx/animation/KeyFrame.html)[关键](http://docs.oracle.com/javafx/2/api/javafx/animation/KeyValue.html)帧中的不透明度或
2.  为[单个 KeyFrame](http://docs.oracle.com/javafx/2/api/javafx/animation/KeyValue.html#KeyValue%28javafx.beans.value.WritableValue,%20T,%20javafx.animation.Interpolator%29)提供自定义[Interpolator子类，您可以通过子类化 Interpolator 并实现](http://docs.oracle.com/javafx/2/api/javafx/animation/Interpolator.html)[曲线](http://docs.oracle.com/javafx/2/api/javafx/animation/Interpolator.html#curve%28double%29)函数来编写该子类。
3.  将一系列[FadeTransition 嵌套](http://docs.oracle.com/javafx/2/api/javafx/animation/FadeTransition.html)在[SequentialTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/SequentialTransition.html)中。每个 FadeTransition 应该具有相同的 from 和 to 值，并且每个这些值都应该低于先前 FadeTransition 中的值。

# c - 清除 C 中的特定位以获得整数

> ID：11793682
> 
> 赞同：0
> 
> 时间：2012-08-03T10:13:14.980
> 
> 标签：c

```
typedef unsigned int  StatusCode;

StatusCode quality = 0;

#define PARTIALBIT 0x05

quality |= PARTIALBIT ;// I am setting a partial bit here 
```

// ....

在代码的其他部分，我必须检查是否设置了部分位并且我必须清除它。我如何在 C 中实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:14:56.327

尝试这个：

```
if (quality & PARTIALBIT)
{
    // bit was set, do processing
    // ...
    // then clear the bit
    quality &= ~PARTIALBIT;
} 
```

此外，如果您必须设置第 5 位，那么您就走错了路。如果要设置第 5 位，请使用：

```
#define PARTIALBIT (1 << 5) 
```

反而。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:33:35.257

如果你想设置一个位 x，你写：

```
val |= 1<<x 
```

如果要清除位 x，请执行以下操作：

```
val &= ~(1<<x) 
```

如果你想反转一点 x，你写：

```
val ^= 1<<x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:06:12.583

替代方案 - 在“unsigned int StatusCode”上使用位域联合：

```
typedef union{
  unsigned intStatus;
  unsigned bitStatus:sizeof(unsigned);
} S_statusCode; 
```

# c - 将文件的全部内容读取到 c char *，包括换行符

> ID：11793689
> 
> 赞同：1
> 
> 时间：2012-08-03T10:13:40.037
> 
> 标签：c, io

我正在寻找一种跨平台（Windows + Linux）解决方案来将整个文件的内容读入`char *`.

这就是我现在得到的：

```
FILE *stream;
char *contents;
fileSize = 0;

//Open the stream
stream = fopen(argv[1], "r");

//Steak to the end of the file to determine the file size
fseek(stream, 0L, SEEK_END);
fileSize = ftell(stream);
fseek(stream, 0L, SEEK_SET);

//Allocate enough memory (should I add 1 for the \0?)
contents = (char *)malloc(fileSize);

//Read the file 
fscanf(stream, "%s", contents);     

//Print it again for debugging
printf("Read %s\n", contents); 
```

不幸的是，这只会打印文件中的第一行，所以我假设 fscanf 在第一个换行符处停止。但是我想阅读整个文件，包括并保留换行符。我不想使用 while 循环和 realloc 来手动构造整个字符串，我的意思是必须有一个更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:21:14.237

像这样的东西，可能是？

```
FILE *stream;
char *contents;
fileSize = 0;

//Open the stream. Note "b" to avoid DOS/UNIX new line conversion.
stream = fopen(argv[1], "rb");

//Seek to the end of the file to determine the file size
fseek(stream, 0L, SEEK_END);
fileSize = ftell(stream);
fseek(stream, 0L, SEEK_SET);

//Allocate enough memory (add 1 for the \0, since fread won't add it)
contents = malloc(fileSize+1);

//Read the file 
size_t size=fread(contents,1,fileSize,stream);
contents[size]=0; // Add terminating zero.

//Print it again for debugging
printf("Read %s\n", contents);

//Close the file
fclose(stream);
free(contents); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:16:19.703

该函数`fread`将从流中读取并且不会在行尾字符处终止。

从`man`页面中，您有：

```
size_t fread(void *restrict ptr, size_t size, size_t nitems, FILE *restrict stream); 
```

读取*大小*为 size的*nitems*。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:16:51.857

`fread`按原样读取所有文件：

```
 if (fread(contents, 1, fileSize, stream) != fileSize) {
    /* error occurred */
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:17:50.507

我有这个：

```
ssize_t filetomem(const char *filename, uint8_t **result)
{ 
    ssize_t size = 0;
    FILE *f = fopen(filename, "r");
    if (f == NULL) 
    { 
        *result = NULL;
        return -1;
    } 
    fseek(f, 0, SEEK_END);
    size = ftell(f);
    fseek(f, 0, SEEK_SET);
    *result = malloc(size);
    if (size != fread(*result, sizeof(**result), size, f)) 
    { 
        free(*result);
        return -2;
    } 

    fclose(f);
    return size;
} 
```

返回值含义：

*   正数或0：成功读取文件
*   减一：无法打开文件（可能没有这样的文件）
*   减二：fread() 失败*

# spring - 带有spring 3的mybatis无法正常工作

> ID：11793692
> 
> 赞同：2
> 
> 时间：2012-08-03T10:13:43.957
> 
> 标签：spring, spring-mvc, ibatis, mybatis

我正在尝试使用 spring 3 配置 mybatis 我正在关注文章

[http://www.raistudies.com/spring/integrating-mybatis-3-and-spring-frameworks-part-2/](http://www.raistudies.com/spring/integrating-mybatis-3-and-spring-frameworks-part-2/)

我正在使用 mybatis 生成器来生成所有的映射器和模型类。使用 mybatis 生成器后，我得到了以下课程。

```
import java.util.Date;

public class User extends BaseModel {

/**
 * This field was generated by MyBatis Generator. This field corresponds to the database column users.id
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
private Integer id;
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database column users.username
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
private String username;
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database column users.email
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
private String email;
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database column users.crypted_password
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
 to the database column users.first_name
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
private String firstName;
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database column users.last_name
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
private String lastName;
// I renoved the getter setter to save space.
} 
```

它还创建了一个 UserExample.java 。我不明白为什么要创建这个文件。我只是应付这门课的一部分。

```
 import java.util.ArrayList;
 import java.util.Date;
 import java.util.List;

  public class UserExample {
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
protected String orderByClause;
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
protected boolean distinct;
/**
 * This field was generated by MyBatis Generator. This field corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
protected List<Criteria> oredCriteria;

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
public UserExample() {
    oredCriteria = new ArrayList<Criteria>();
}

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
public void setOrderByClause(String orderByClause) {
    this.orderByClause = orderByClause;
}

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
public String getOrderByClause() {
    return orderByClause;
} 
```

然后它创建 userMapper.xml 文件。我也没有处理整个文件以节省空间。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycom.myproject.db.mybatis.dao.UserMapper">
<resultMap id="BaseResultMap" type="com.mycom.myproject.db.mybatis.model.User">
<!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Fri Aug 03 09:28:44 BST 2012.
-->
<result column="id" jdbcType="INTEGER" property="id" />
<result column="username" jdbcType="VARCHAR" property="username" />
<result column="email" jdbcType="VARCHAR" property="email" />    
<result column="first_name" jdbcType="VARCHAR" property="firstName" />
<result column="last_name" jdbcType="VARCHAR" property="lastName" />
</resultMap>
 <sql id="Example_Where_Clause">
  <!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Fri Aug 03 09:28:44 BST 2012.
-->
  <where>
  <foreach collection="oredCriteria" item="criteria" separator="or">
    <if test="criteria.valid">
      <trim prefix="(" prefixOverrides="and" suffix=")">
        <foreach collection="criteria.criteria" item="criterion">
          <choose>
            <when test="criterion.noValue">
              and ${criterion.condition}
            </when>
            <when test="criterion.singleValue">
              and ${criterion.condition} #{criterion.value}
            </when>
            <when test="criterion.betweenValue">
              and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
            </when>
            <when test="criterion.listValue">
              and ${criterion.condition}
              <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                #{listItem}
              </foreach>
            </when>
          </choose>
        </foreach>
      </trim>
    </if>
  </foreach>
</where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
  <!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Fri Aug 03 09:28:44 BST 2012.
-->
<where>
  <foreach collection="example.oredCriteria" item="criteria" separator="or">
    <if test="criteria.valid">
      <trim prefix="(" prefixOverrides="and" suffix=")">
        <foreach collection="criteria.criteria" item="criterion">
          <choose>
            <when test="criterion.noValue">
              and ${criterion.condition}
            </when>
            <when test="criterion.singleValue">
              and ${criterion.condition} #{criterion.value}
            </when>
            <when test="criterion.betweenValue">
              and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
            </when>
            <when test="criterion.listValue">
              and ${criterion.condition}
              <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                #{listItem}
              </foreach>
            </when>
          </choose>
        </foreach>
      </trim>
    </if>
  </foreach>
 </where>
  </sql>
  <sql id="Base_Column_List">
  <!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Fri Aug 03 09:28:44 BST 2012.
  -->
  id, username, email, crypted_password, password_salt, persistence_token, login_count, 
  failed_login_count, last_request_at, current_login_at, last_login_at,  current_login_ip, 
  last_login_ip, created_at, updated_at, creator_id, updater_id, first_name, last_name
 </sql>
  <select id="selectByExample"    parameterType="com.mycom.myproject.db.mybatis.model.UserExample" resultMap="BaseResultMap">
<!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Fri Aug 03 09:28:44 BST 2012.
-->
  select
  <if test="distinct">
  distinct
  </if>
  <include refid="Base_Column_List" />
  from users
  <if test="_parameter != null">
  <include refid="Example_Where_Clause" />
  </if>
  <if test="orderByClause != null">
  order by ${orderByClause}
</if> 
```

它还创建了我认为可以用于注入的 UserMapper 接口

```
import com.mycom.myproject.db.mybatis.model.User;
import com.mycom.myproject.db.mybatis.model.UserExample;
import java.util.List;
import org.apache.ibatis.annotations.Param;

public interface UserMapper {

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
int countByExample(UserExample example);

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
int deleteByExample(UserExample example);

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
int insert(User record);

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
int insertSelective(User record);

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
List<User> selectByExample(UserExample example);

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
int updateByExampleSelective(@Param("record") User record,
        @Param("example") UserExample example);

/**
 * This method was generated by MyBatis Generator. This method corresponds to the database table users
 * @mbggenerated  Fri Aug 03 09:28:44 BST 2012
 */
int updateByExample(@Param("record") User record,
        @Param("example") UserExample example);
} 
```

我的 spring-servlet.xml 文件是

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:context="http://www.springframework.org/schema/context"
 xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!-- Enable annotation driven controllers, validation etc... -->
<mvc:annotation-driven />

<context:component-scan
base-package="com.mycom.myproject" />

<mvc:resources mapping="/resources/**" location="/resources/" />

<bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="com.mysql.jdbc.Driver"/>
<property name="url" value="jdbc:mysql://localhost/mydatabase"/>
<property name="username" value="root"/>
<property name="password" value="root"/>
</bean>

 <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="datasource" />
</bean>

<!-- scan for mappers and will automatically scan the whole classpath for xmls -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    <property name="basePackage" value="com.mycom.myproject.db.mybatis.dao" />
</bean>

<bean id="viewResolver"
class="org.springframework.web.servlet.view.UrlBasedViewResolver">
<property name="viewClass"
    value="org.springframework.web.servlet.view.JstlView" />
<property name="prefix" value="/WEB-INF/jsp/" />
<property name="suffix" value=".jsp" />
</bean> 
```

现在我的问题是如何获取用户列表或简单的用户计数，如果我想的话。我在 mysql 数据库的用户表中有用户数。

我写了一个示例控制器类

```
@Controller
@RequestMapping("/")
public class LoginController
{
static final Logger logger = Logger.getLogger(LoginController.class);

private UserMapper userMapper =  null;

@RequestMapping("/login")
public ModelAndView login(@ModelAttribute User userBean, Model model){      

    return new ModelAndView("login", "userBean", userBean); 

}

@Autowired
public void setUserMapper(UserMapper userMapper) {
    this.userMapper = userMapper;
}

} 
```

但它给了我以下错误。

```
 Error creating bean with name 'loginController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.mycom.myproject.controller.LoginController.setUserMapper(com.mycom.myproject.db.mybatis.dao.UserMapper); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mycom.myproject.db.mybatis.dao.UserMapper] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:48:50.943

在 userMapper.xml 中可以读取：

```
<mapper namespace="com.mycom.myproject.db.mybatis.dao.UserMapper"> 
```

但在你的弹簧配置中

```
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="com.mycom.mydatabase.db.mybatis.sqlmap" />
</bean> 
```

我认为应该是

```
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="com.mycom.myproject.db.mybatis.dao" />
</bean> 
```

# javascript - 使用 jQuery 读取 HTTP 标头以检查 404，而不执行 ajax 请求

> ID：11793694
> 
> 赞同：1
> 
> 时间：2012-08-03T10:13:48.527
> 
> 标签：javascript, jquery, http, google-analytics, http-status-code-404

有没有办法在*不*执行`.ajax`请求和读取的情况下使用 jQuery 读取 HTTP 标头`xhr.status`？

与流行的 Google Analytics 插件 ( [gaAddons](http://jsfiddle.net/shamel67/VzbPw/1/) ) 类似，我希望在我的网站上跟踪 404。不幸的是，我继承了旧系统，并且 404 没有唯一的 URL。

是否可以使用 jQuery 读取 HTTP 标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T04:19:12.140

You might be able to do something like this in jQuery:

```
if ( $('meta[content="Not Found - The URL you requested could not be found."]').length>0 ) {
    /* do something about it */
} 
```

This assumes that the delivery engine has put the following meta tag in the header of the page. Tumblr does this, for example. Your own system may put a different meta tag or you could design your system to deliver some such meta tag.

```
<meta name="description" content="Not Found - The URL you requested could not be found." /> 
```

Of course, all this is really doing is checking the meta header which offers a page summary. But you could take advantage of the mechanism in your own environment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T15:29:41.780

在进行站点分析时，我必须单独记录错误。

与@Octopus 的建议类似，我向 404 和 500 页添加了元标记。

```
<meta name="error" content="404"> 
```

然后在客户端上检查此元标记是否存在，如下所示：

```
<script>
  meta = document.getElementsByTagName('meta');

  for (i=0; i< meta.length; i++) {

    if(meta[i].name == 'error'){
       alert('This page returned a ' + meta[i].content + ' error');   
    }

  }

</script> 
```

不幸的是，我不得不使用 vanilla JS 来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:16:04.727

我认为这是不可能的——它们没有暴露于 JavaScript。AJAX 请求是明显的解决方法——不知道你为什么反对这个。

此问题中的更多信息：[Accessing the web page's HTTP Headers in JavaScript](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:41:54.857

如果您可以访问 404 错误页面，则可以将 javascript 注入 404 页面，该页面可以通过 ajax 将页面详细信息（如 url、时间等）发送到服务器 [但如果它们在服务器日志中则意义不大*]*。但是，这个脚本可以被利用。

# java - 如何移除无状态实体 Java 持久性

> ID：11793699
> 
> 赞同：1
> 
> 时间：2012-08-03T10:13:59.417
> 
> 标签：java, hibernate, persistence, stateless

Java持久性有以下情况：

```
public ReturnCodes startWork() {

    sessionBackup = (BaseService<Backup>) ctx.lookup("XYZ/BackupServiceImpl/local");

    Backup backup = new Backup();
    backup.setStatus(BackupStatus.EXECUTING);
    ....
    sessionBackup.save(Backup) //at this point is not actualy saved into DB

    ....//try to connect somewhere
    if ( !ConnectSuccess) {
        sessionBackup.remove(backup);
        return ReturnCodes.REQUESTABORT
    }
    ....
}

@Stateless
public class BackupServiceImpl extends BaseServiceImpl<Backup> implements
    BaseService<Backup>
{

    @Override
    protected Class<Backup> getEntityClass()
    {
        return Backup.class;
    }
} 
```

和方法：`save`_`remove``BaseServiceImpl`

```
public abstract class BaseServiceImpl<T extends Serializable> implements
    BaseService<T>
{

  protected EntityManagerFactory emf;

  public T save(T entity)
  {
    EntityManager em = emf.createEntityManager();
    em.persist(entity);

    return entity;
  }

  public void remove(T entity)
  {
    EntityManager em = emf.createEntityManager();
    try
    {
      final Method method = getEntityClass().getMethod("getId");
      final String id = (String) ((T) method.invoke(entity));
      entity = em.find(getEntityClass(), id);
      em.remove(entity);
    }
    catch (final Exception ex)
    {
      logger.log(Level.WARNING, "Unexpected error", ex);
    }
  }
} 
```

我不想保存到数据库中以防万一`ConnectSuccess`失败，但是该`remove`方法找不到实体（因为还没有进入数据库），并且在返回`ReturnCodes.REQUESTABORT`实体后保存。如何取消保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:19:01.650

通常，在这种情况下，您会执行 setRollbackOnly()。

您也可以抛出一个异常，该异常将仅触发回滚。

请参阅[http://www.developerscrappad.com/547/java/java-ee/ejb3-x-jpa-when-to-use-rollback-and-setrollbackonly/](http://www.developerscrappad.com/547/java/java-ee/ejb3-x-jpa-when-to-use-rollback-and-setrollbackonly/)

顺便说一句，在您的代码中执行此操作：

```
catch (final Exception ex)
{
  logger.log(Level.WARNING, "Unexpected error", ex);
} 
```

太宽泛，会阻止回滚功能。

# c# - 单击时 MonoDevelop 按钮崩溃

> ID：11793700
> 
> 赞同：0
> 
> 时间：2012-08-03T10:14:03.580
> 
> 标签：c#, exception-handling, widget, monodevelop, gtk#

你们之前一直很有帮助，因此我再次请求您的帮助。构建一个简单的代码。客户在条目中插入信息，当他们单击按钮时，它会保存在 XLS 文件中。

```
public partial class MainWindow : Gtk.Window
{       
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();
    }

    protected void OnButton2Click (object sender, System.EventArgs e)
    {
        ExcelFile ef = new ExcelFile();
        // Loads the template file.
        ef.LoadXls(@"/home/sinnich/Documents/Database.xls");
        // Selects the first worksheet.
        ExcelWorksheet ws = ef.Worksheets[0];
        //Top informations
        ws.Cells["B1"].Value = "Computer navn";
        ws.Cells["C1"].Value = "Serial Nr";
        ws.Cells["D1"].Value = "Låners navn";
        ws.Cells["E1"].Value = "Telefon Nr";
        ws.Cells["F1"].Value = "Dato for udlån"; 
        ws.Cells["G1"].Value = "Forventet afleverings dato";
        //Editable info
        ws.Cells["B2"].Value = entry1;
        ws.Cells["C2"].Value = entry2;
        ws.Cells["D2"].Value = entry3;
        ws.Cells["E2"].Value = entry4; 
        ws.Cells["F2"].Value = entry5; 
        ws.Cells["G2"].Value = entry6;
        // Saves the file.
        ef.SaveXls(@"/home/sinnich/Documents/Database.xls");
        //Test af knappen.
        label7.Text = "Overført til database";
        throw new System.NotImplementedException ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a)
    {
        Application.Quit ();
        a.RetVal = true;
    }
} 
```

尝试运行按钮时收到此错误代码：

```
Marshaling clicked signal
Exception in Gtk# callback delegate
  Note: Applications can use GLib.ExceptionManager.UnhandledException to handle the exception.
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.NotSupportedException: Type Entry is not supported.
  at GemBox.Spreadsheet.ExcelFile.a (System.Type A_0) [0x00000] in <filename unknown>:0 
  at GemBox.Spreadsheet.ExcelCell.set_Value (System.Object value) [0x00000] in <filename unknown>:0 
  at MainWindow.OnButton2Click (System.Object sender, System.EventArgs e) [0x000ba] in /home/sinnich/Projects/Rental Laptops/Rental_Laptops/MainWindow.cs:31 
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
  at System.Reflection.MethodBase.Invoke (System.Object obj, System.Object[] parameters) [0x00000] in <filename unknown>:0 
  at System.Delegate.DynamicInvokeImpl (System.Object[] args) [0x00000] in <filename unknown>:0 
  at System.MulticastDelegate.DynamicInvokeImpl (System.Object[] args) [0x00000] in <filename unknown>:0 
  at System.Delegate.DynamicInvoke (System.Object[] args) [0x00000] in <filename unknown>:0 
  at GLib.Signal.ClosureInvokedCB (System.Object o, GLib.ClosureInvokedArgs args) [0x00000] in <filename unknown>:0 
  at GLib.SignalClosure.Invoke (GLib.ClosureInvokedArgs args) [0x00000] in <filename unknown>:0 
  at GLib.SignalClosure.MarshalCallback (IntPtr raw_closure, IntPtr return_val, UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint, IntPtr marshal_data) [0x00000] in <filename unknown>:0 
   at GLib.ExceptionManager.RaiseUnhandledException(System.Exception e, Boolean is_terminal)
   at GLib.SignalClosure.MarshalCallback(IntPtr raw_closure, IntPtr return_val, UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint, IntPtr marshal_data)
   at Gtk.Application.gtk_main()
   at Gtk.Application.Run()
   at Rental_Laptops.MainClass.Main(System.String[] args) in /home/sinnich/Projects/Rental Laptops/Rental_Laptops/Main.cs:line 18 
```

不知道该怎么办。

* * *

如果我用 entry 注释掉代码，它不会崩溃。

无论如何，我还能如何使用可编辑文本更新 xls 文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T11:13:27.943

更改了以下内容：

```
ws.Cells["B2"].Value = entry1.Text;
ws.Cells["C2"].Value = entry2.Text;
ws.Cells["D2"].Value = entry3.Text;
ws.Cells["E2"].Value = entry4.Text; 
ws.Cells["F2"].Value = entry5.Text; 
ws.Cells["G2"].Value = entry6.Text; 
```

删除了以下内容：

```
 throw new System.NotImplementedException (); 
```

# javascript - 防止html元素被聚焦

> ID：11793709
> 
> 赞同：0
> 
> 时间：2012-08-03T10:14:33.923
> 
> 标签：javascript, jquery, extjs

我问了这个问题 [我的问题](https://stackoverflow.com/questions/11776717/js-and-actionscript)

我设法在里面放了一个带有图像的 div 标签。当我开始拖动 extjs 窗口时，我用 div 切换 flash 播放器。它运行良好，但是当我将鼠标悬停在 div 标签上时，拖动停止，因为浏览器将焦点放在 div 标签上。

当我使用一些 javascript/jquery 函数拖动 extjs 窗口时，是否可以删除/停止 div 标签的焦点？

即使没有图像，我也尝试过，只是带有背景颜色的 div 标签，当鼠标悬停在 div 上时，它仍然停止拖动窗口。

这是一个示例代码

```
win = Ext.create('widget.window',
{
    title: "My Player",
    id: "my_player",
    width: 750,
    height: 290,
    x:startXPlayer,
    y:startYPlayer,
    ghost: false,
    modal: false,
    resizable: false,
    disableCaching : true,
    closeAction: 'destroy',
    items: [],
    html: '<iframe src="./index.php/myplayer?'+url+'&d='+new Date()+'" style="width: 735px; height: 280px; border: none;"></iframe>'
}); 
```

好的，这是嵌入在 iframe 中的简化 html

```
<html>
   <head>
        <title>my page</title>
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
            swfobject.registerObject("myPlayer", "9.0.0", "expressInstall.swf");
        </script>
   </head>
   <body>
      <div id="window">
        <div id="static_image" class="image">
            <img src="test.jpg"/>
        </div>
        <div id="flash" class="flobject">   
            <object id="myPlayer" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="720" height="240">
                <param name="movie" value="test.swf" />
                <param name="wmode" value="transparent">

                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="test.swf" width="300" height="120">
                <!--<![endif]-->
                <div>
                    <h1>Alternative content</h1>
                    <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
                </div>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>
    </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:32:20.350

我认为这个词`focus`让你感到困惑——一个[div 标签不应该得到 focus](https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus)。您拖动的 div 更有可能比可拖动元素具有更高的 z-index，从而触发可拖动元素上的`mouseleave`or`mouseout`事件，进而停止拖动。如果您可以发布一个[工作小提琴](http://jsfiddle.net/)，那么会更容易看到这里发生了什么。

# php - 可以限制 PHP 仅在某些文件夹中工作吗？

> ID：11793710
> 
> 赞同：0
> 
> 时间：2012-08-03T10:14:35.553
> 
> 标签：php, apache

我几乎可以肯定 PHP 总是能够在服务器上的任何位置对任何文件执行任何操作，但我想知道是否有一种方法可以将其限制为仅在一个文件夹中工作以及有什么要求？

我的意思是我有 50 个 WordPress 安装，50 个文件夹。如果来自不受信任插件的病毒仅影响 1 个安装 - 它也会立即传播到其他 49 个（因为 PHP 可以扫描服务器上的所有目录）。

有什么办法可以防止这种情况发生吗？如果病毒闯入 WordPress 的 1 个安装 - 我希望它只留在那里。

我的托管服务提供商说不购买另一台服务器是不可能的。你有什么意见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:25:55.630

使用 php-fpm，您可以[chroot](http://www.php.net/manual/en/install.fpm.configuration.php#chroot) php workers（用于绝对分离）并为每个 php 应用程序提供自己的用户和 php 配置（超时、内存限制等）。您不必使用 chroot 来拥有唯一用户。使用简单的文件权限，您可以使除该 webroot 的专用用户之外的任何人都无法读取该 webroot。这也不是特定于 Apache，适用于任何其他支持 fastcgi 的网络服务器。

更容易设置的方式可能是在 php 的[open_basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)`open_basedir`上进行中继（由于 php 的开发人员经常修复与此功能相关的[错误](https://bugs.php.net/search.php?cmd=display&package_name%5B%5D=Safe%20Mode/open_basedir)，因此安全性存在争议）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:18:11.963

您可以安装[suEXEC](http://httpd.apache.org/docs/2.2/suexec.html)并以 FastCGI 模式运行 PHP。使用此配置，您可以在不同的用户下运行 PHP 实例。

我自己没有尝试过本教程，但对我来说看起来不错：[如何在 Debian 上使用 suEXEC 设置 PHP FastCGI](http://davejamesmiller.com/blog/web-development/how-to-set-up-php-fastcgi-with-suexec-on-debian)

# java - java - 如何在java中将具有以下扩展名jpg、pdf、gif、xls、xlsx、doc、docx、rtf、bmp、jpeg、csv的图像转换为.TIFF？

> ID：11793711
> 
> 赞同：2
> 
> 时间：2012-08-03T10:14:35.703
> 
> 标签：java, image-conversion

如何将具有以下扩展名的图像转换 `jpg, pdf, gif, xls, xlsx, doc, docx, rtf, bmp, jpeg, csv`为`.TIFF`Java？

我想将上述所有图像扩展名转换为 .TIFF 扩展名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:37:34.653

[Apache Commons Sanselan](http://commons.apache.org/imaging/)支持从您的列表中读取和写入`BMP`、`JPEG/JFIF`、和。`TIFF``GIF``PNG`

[Apache PDFBox](http://pdfbox.apache.org/)可以将`PDF`文件转换为图像（参见[PDFToImage](http://pdfbox.apache.org/commandlineutilities/PDFToImage.html)代码）。

[Apache POI](http://poi.apache.org/)可以读取`doc`、和`docx`，但我不知道将它们转换为图像的简单方法（如果这是您想要做的）。您可能会做的是先转换为图像，然后再转换为图像。`xls``xlsx``PDF``PDF`

# wix - 如何清除文本框值？

> ID：11793716
> 
> 赞同：0
> 
> 时间：2012-08-03T10:14:57.187
> 
> 标签：wix

在我的 CustomUI 中，我试图通过输入用户名和密码来验证登录服务帐户。测试按钮将验证凭据。如果它是一个无效的帐户，它将显示一个带有错误的 spawndialog，并且单击将返回到相同的 CustomUI。返回时，用户名和密码文本框的值应该为空。清除文本框值的最佳方法是什么？我尝试将文本框值的属性设置为空，但安装程序失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:16:38.333

在模态对话框的关闭按钮控件上，您可以放置​​一个设置属性控件事件，将这些属性设置回空。（在 MSI 中 {} 表示为空）确保控制事件顺序正确，以便在关闭对话框之前设置属性。

但是，我不确定这会奏效。我不确定原始对话框是否会正确刷新该数据。MSI UI 存在某些限制，这可能是其中一种情况。（我必须模拟它来确认。）

如果您执行此限制，解决方法是执行 NewDialog 而不是 SpawnDialog，并在该对话框中告诉用户存在问题，并且只为他们提供上一个对话框的后退按钮。

# java - 如何以简洁的方式对越来越多的带有参数的命令进行建模

> ID：11793720
> 
> 赞同：1
> 
> 时间：2012-08-03T10:15:04.237
> 
> 标签：java, oop, design-patterns

[这是关于如何在此 Builder 实现中摆脱 instanceof](https://stackoverflow.com/questions/11792950/how-to-get-rid-of-instanceof-in-this-builder-implementation)的后续线程

这种设计仍然存在一些问题。每次引入新参数时，都必须创建一个新的 ConcereteParameter 类。

这不是问题。但是还必须在 CommandBuilder 中添加方法`append(ConcreteParameter)`。而且我不太喜欢这种依赖。

**总结**

*   命令可以配置参数。并非每个命令都可以接收相同的参数。所以有些不得不被忽略。当应用于命令时（在这个实现中，这是通过抛出一个`UnsupportedOperationException`

*   可以应用于某些类的参数在这些类中的使用方式不同（如 FTPCommand 和 HTTPCommand 可能以不同的方式使用 IpParameter）

*   将来可能会引入新的命令和参数

**更新** 现在的实现`works`。但是，如果我有大约 30 个参数，那么对于每个参数我都必须有一个单独的方法，这不是矫枉过正吗？

如果有，实现这一目标的更干净、更灵活的方式/模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:07:37.213

什么是你的参数，什么是参数类型？如果你真的有不同种类的对象作为参数，你可以对它们执行不同的操作，那么你就无法避免使用不同的类来处理它们。如果您的参数仅在命令解释它们的方式上有所不同，而其他主要是`String`和`Integer`或其他，那么为每种可能的含义设置额外的类肯定是​​矫枉过正。如果您的参数是某种形式的键值对，那么我会这样表示它们：一个包含参数名称和值的类（或者每个合理的值类型可能一个类）。

如果您可以使用上述方法来减少参数类型的数量，您可能需要考虑使用反射来构建实际的命令。您可以有一个注释`@Parameter`，用于装饰命令类的 setter 方法。例如`@Parameter void setIP(String)`，这意味着该命令接受一个字符串参数，并将其解释为 IP 地址。如果您使用键值参数，则可以从方法名称派生键，或向注释添加值，或两者兼而有之。使用这样的框架，您可以拥有一个命令构建器，它负责将参数提供给适当的设置器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:58:17.087

即使有一个公认的答案，我觉得你需要知道另一种选择。

我会使用 a`Map`作为上下文对象，并将上下文传递给`execute`命令的方法。该命令将简单地从`Map`by String 中提取它需要的参数。

```
public interface Command {
   public void execute(Map<String, Object> context);
}

class OneCommandImpl extends Command {
    public void execute(Map<String, Object> context) {
        context.get('p1');
        context.get('p2');
    }
} 
```

这种方法的优点是简单，不需要反射。您可以使用这个接口构建任何需要任意数量参数的命令。主要缺点是 Map 中的值类型不具体。

# facebook - 通过 Facebook 查询语言 (FQL) 查询 Facebook 的 URL

> ID：11793721
> 
> 赞同：0
> 
> 时间：2012-08-03T10:15:05.360
> 
> 标签：facebook, facebook-graph-api, facebook-fql

通过 Facebook 查询语言 (FQL) 查询 Facebook 的正确方法是什么？

'Stream' 的文档： [https](https://developers.facebook.com/docs/reference/fql/stream/) ://developers.facebook.com/docs/reference/fql/stream/ 在示例（“尝试此查询”） 注意：要查询流，完全可以使用“graph.facebook.com”。

但是，其他人，例如“评论”： [https](https://developers.facebook.com/docs/reference/fql/comment/) ://developers.facebook.com/docs/reference/fql/comment/ 表示查询“https://graph.facebook.com/fql?q=select”在示例中（“尝试此查询”）

那么，哪个是哪个？哪个性能更好？因为两者都有效，Facebook 会淘汰其中一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:43:59.170

您的第二个 URL 是 Graph API url，这是当前的首选方法：`https://graph.facebook.com/fql?q=QUERY`.

另一个 url`api.facebook.com`是 REST API url。根据[REST API](https://developers.facebook.com/docs/reference/rest/)页面：

> 我们正在弃用 REST API。如果您正在构建新的 Facebook 应用，请使用 Graph API。虽然我们还没有移植一些功能，但 Graph API 是 Facebook 平台向前发展的中心，所有新功能都将在这里找到。

所以在这种情况下，性能不是问题。使用`graph`网址。

# ms-access - 在子窗体 Access 中绑定组合框

> ID：11793726
> 
> 赞同：1
> 
> 时间：2012-08-03T10:15:16.860
> 
> 标签：ms-access, combobox, subforms

我有一个具有正确源对象、链接主字段和链接子字段参数的子表单。

我可以在子表单中创建一个组合框，它在下拉菜单中显示正确的信息（与子表单的源对象相同的表），但未**绑定**并且不会更新主表单中的记录。

有谁知道如何解决这个问题？

（注意 Master 和 Child 之间的关系跨越多个表，但启用了引用完整性和级联更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:36:10.067

在这种情况下，组合位于子表单上的事实与此无关。向导将为您设置所有内容，但绑定控件的规则是设置`Control Source`. 例如，您的子表单包含按 PlaceID 的地点列表，并且您希望使用一个组合来更新它，该组合向用户显示组合中的地名列表。

```
 Control Source: PlaceID
 Row Source    : SELECT ID, PlaceName FROM Places ORDER BY PlaceName
 Bound Column  : 1
 Column Count  : 2
 Column Widths : 0; 2cm 
```

![子窗体上的组合](../Images/e471117974954048644e34e8aaf3fb8a.png)

关系

![表的关系](../Images/d18f7de545e4ca733fc8dc5ecf0e397e.png)

# java - Java 正在读取 TCP 流

> ID：11793729
> 
> 赞同：0
> 
> 时间：2012-08-03T10:15:27.150
> 
> 标签：java, sockets, tcp, network-programming

我想创建一个接收 TCP 数据包并读取其内容的 Java 服务器套接字应用程序。根据数据包的内容，它将执行几个动作。我设法让它读取一些内容并打印一个字符串 System.out.println(sb.toString()); 但是 (a) 并非所有内容都已打印，并且 (b) 我不确定当内容按网络顺序到达时如何处理它们。一个示例是接收 HTTP 数据包并从标头报告“Content-Length”或“User-Agent”。任何示例将不胜感激。

```
public static void main(String[ ] args){

PrintWriter out = null;
BufferedReader in = null;
int bufferSize = 0;

try{
    String message = args[0];
    int count = 0;

    ServerSocket connectionSocket = null;
    try {
        connectionSocket = new ServerSocket(4444);
        System.out.println("Server started");
    } catch (IOException e) {
        System.err.println("Could not listen on port: 4444.");
        System.exit(1);
    }

    Socket clientSocket = null;
    try {
        while(true){
            count++;
            clientSocket = connectionSocket.accept();
            System.out.println("TCP packet received… " +  count);
            InputStream is = clientSocket.getInputStream();

            out = new PrintWriter(clientSocket.getOutputStream());
            in = new BufferedReader(new InputStreamReader(is));

            StringBuilder sb = new StringBuilder();
            String line = null;

            while ((line = in.readLine()) != null) {
                sb.append(line + "\n");
            }
            System.out.println(sb.toString());

            clientSocket.close();
        }           
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }
}
catch(Exception e){
    e.printStackTrace();
}
} 
```

# c# - 编码/解码 QuotedPrintable 的代码。

> ID：11793734
> 
> 赞同：6
> 
> 时间：2012-08-03T10:15:48.700
> 
> 标签：c#, quoted-printable

**此方法将您的文本编码为 QuotedPrintable 格式**

```
public static string EncodeQuotedPrintable(string value)
{
    if (string.IsNullOrEmpty(value))
        return value;

    StringBuilder builder = new StringBuilder();

    byte[] bytes = Encoding.UTF8.GetBytes(value);
    foreach (byte v in bytes)
    {
        // The following are not required to be encoded:
        // - Tab (ASCII 9)
        // - Space (ASCII 32)
        // - Characters 33 to 126, except for the equal sign (61).

        if ((v == 9) || ((v >= 32) && (v <= 60)) || ((v >= 62) && (v <= 126)))
        {
            builder.Append(Convert.ToChar(v));
        }
        else
        {
            builder.Append('=');
            builder.Append(v.ToString("X2"));
        }
    }

    char lastChar = builder[builder.Length - 1];
    if (char.IsWhiteSpace(lastChar))
    {
        builder.Remove(builder.Length - 1, 1);
        builder.Append('=');
        builder.Append(((int)lastChar).ToString("X2"));
    }

    return builder.ToString();
} 
```

**此方法将 QuotedPrintable 格式的文本解码为字符串**

```
public static string DecodeQuotedPrintable(string input, string charSet)
{
    Encoding enc;

    try
    {
        enc = Encoding.GetEncoding(charSet);
    }
    catch
    {
        enc = new UTF8Encoding();
    }

    var occurences = new Regex(@"(=[0-9A-Z]{2}){1,}", RegexOptions.Multiline);
    var matches = occurences.Matches(input);

    foreach (Match match in matches)
    {
        try
        {
            byte[] b = new byte[match.Groups[0].Value.Length / 3];
            for (int i = 0; i < match.Groups[0].Value.Length / 3; i++)
            {
                b[i] = byte.Parse(match.Groups[0].Value.Substring(i * 3 + 1, 2), System.Globalization.NumberStyles.AllowHexSpecifier);
            }
            char[] hexChar = enc.GetChars(b);
            input = input.Replace(match.Groups[0].Value, new String(hexChar));
        }
        catch
        { ;}
    }
    input = input.Replace("?=", "").Replace("\r\n", "");

    return input;
} 
```

# ruby-on-rails - 从 ruby 中的类方法调用实例方法

> ID：11793735
> 
> 赞同：2
> 
> 时间：2012-08-03T10:15:49.250
> 
> 标签：ruby-on-rails, ruby, function-calls, instance-methods, class-method

这是从类方法调用实例方法的正确方法吗？这里 instance_var 与 Name 对象一起传递。我想从传递给类方法的 instance_var 对象调用 func1 。

我写了这个：

```
Class Name
    def initialize
        @name
    end
    def func1(value)
        puts value
    end
    def self.func2(instance_var,val)
        instance_var.func1(val)
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:45:12.033

你怎么叫`func2`？

您的代码有一个小错误。你改写`Class`了`class`。随着`Class`你得到一个语法错误。

此代码有效：

```
class Name
    def func1(value)
        puts value
    end
    def self.func2(instance_var,val)
        instance_var.func1(val)
    end
end

x = Name.new
Name.func2(x, 12)     #12

#or
Name.func2(Name.new, 12)  #12 
```

* * *

您的

```
 def initialize
        @name
    end 
```

将创建一个空变量`@name`。它永远不会获得价值。要分配您需要的值：

```
class Name
    def initialize (var)
        @name = var
    end
end

x = Name.new(:x) 
```

# java - 在一个比较器中对两个不同的字段进行排序

> ID：11793741
> 
> 赞同：0
> 
> 时间：2012-08-03T10:16:05.703
> 
> 标签：java

> **可能重复：**
> [按多个字段比较对象的最佳方法？](https://stackoverflow.com/questions/369512/best-way-to-compare-objects-by-multiple-fields)

您好，我对编程有点陌生，想寻求帮助，我的老师创建了一个课程，其中给出了国家、大陆和人口。期望的输出是获得每个大陆的前 10 个人口稠密的国家。

代码：

```
import java.util.*;

public class WP {

public static void main(String[] args) {
    WorldPop[] list = WorldPop.getList();
    int index;

    Arrays.sort(list, new PopComparator());

    for (int i=0; i<list.length; i++) {
        System.out.printf("%-53s %-20s %,14d\n", list[i].country, 
                       list[i].continent, list[i].population);
    }
}
}

class PopComparator implements Comparator<WorldPop> {
public int compare(WorldPop x, WorldPop y) {
    return x.population - y.population;
}
}

class TitleComparator implements Comparator<WorldPop> {
public int compare(WorldPop x, WorldPop y){
    return x.continent.compareTo(y.continent);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:25:21.480

我可能会将每个按大陆分类，他们只是对每个进行`Country`分类`Map<Continent, List<Country>>``List`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:50:32.393

首先，您可以使用以下对列表进行排序`Comparator`。现在您的列表根据大陆和国家进行排序，然后通过计算每个重复大陆的国家数量来迭代它们。

```
 Collections.sort(list, new Comparator<WorldPop>() {
        @Override
        public int compare(WorldPop x, WorldPop y) {
            int c;
            c = x.continent.compareTo(y.continent);
            if (c == 0)
               c = x.population .compareTo(y.population );
            return c;
        }
    }); 
```

# css - 居中 CSS 菜单

> ID：11793746
> 
> 赞同：0
> 
> 时间：2012-08-03T10:16:21.583
> 
> 标签：css, menu, center

我在使这个菜单居中时遇到了一些麻烦。我尝试`text-align:center;`了`<ul>`and `margin:auto;`。我不确定我是否必须浮动任何东西，或更改显示设置

JSFiddle：http: [//jsfiddle.net/FQ3mK/](http://jsfiddle.net/FQ3mK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:25:14.957

**第一种方法：**`<div>`通过使用使容器居中`text-align:center`：

```
#navcontainer {
    text-align: center;   
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/FQ3mK/1/)**

* * *

**第二种方法：**给容器一个固定的宽度`<div>`并使用`margin:auto`：

```
#navcontainer {
    width: 600px;
    margin: auto;   
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/FQ3mK/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:29:20.050

margin:auto 仅在您为容器 ( `<ul`) 提供固定宽度时才有效。

见：http: [//jsfiddle.net/FQ3mK/3/](http://jsfiddle.net/FQ3mK/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T03:02:18.027

我也在调查这个。我在这里找到了最佳答案：[https ://stackoverflow.com/a/17634702/2537445](https://stackoverflow.com/a/17634702/2537445)

我认为这是最好的，因为它是最动态、跨浏览器兼容的答案。

至于您的特定锚点，您将无法使用 display: block 。

但是，您可以将填充应用于内联锚的左侧和右侧，并将填充应用于内联 li 的顶部和底部以提供所需的间距。

```
#cssmenu ul {
   text-align:center;
}
#cssmenu ul li {
   display: inline;
} 
```

# c# - Mp3播放器无法在c#中运行

> ID：11793748
> 
> 赞同：1
> 
> 时间：2012-08-03T10:16:21.763
> 
> 标签：c#

我使用媒体控制器 DLL 创建了 mp3 播放器。但是当我运行这个时，我的程序类显示错误“输入字符串格式不正确”这里我描述了我的代码

```
 private void PlayMusicFile()
    {
        if (FoundIt)
        {
            this.SetButtons(true);
            if (MyPlayer.bFileIsOpen)
            {
                MyPlayer.Close();
            }

            MyPlayer.Open(MusicFileName);

            if (MyPlayer.bFileIsOpen)
            {
                imgIndex = 0;
                MyPlayer.Play();
                Muted = false;
                DancePic.Visible = true;
                btnMute.Text = "Mute";
                this.tbPosition.Maximum = MyPlayer.Duration();
                this.lblDuration.Text = MyPlayer.TimeCalculation(MyPlayer.Duration());
                this.tbVolume.Maximum = 1000;
                this.tbVolume.Value = MyPlayer.Volume;
            }
        }
    } 
```

我还使用了另一种方式 [DllImport("winmm.dll")] private static extern long mciSendString(string strCommand, StringBuilder strReturn, int iReturnLength, IntPtr hwndCallback);

但是两者都不起作用 mciSendString("open \"" + p3 + "\" type mpegvideo alias MediaFile", null, 0, IntPtr.Zero); mciSendString("播放媒体文件", null, 0, IntPtr.Zero);

# asp.net - 底层提供者在开放实体框架上失败

> ID：11793749
> 
> 赞同：3
> 
> 时间：2012-08-03T10:16:26.220
> 
> 标签：asp.net, sql-server, entity-framework

我在我的 Web 应用程序中取消实体框架。早些时候一切正常。但后来我从 Sql Server 中删除了数据库。之后，每当我运行应用程序时，都会出现以下异常：

```
The underlying provider failed on open entity framework 
```

如果我们从 Sql Server 中删除数据库并再次运行应用程序，是否会再次创建数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:28:33.643

实体框架将在应用程序启动时重新创建您的数据库，假设如下：

*   您有权在 SQL 中创建数据库
*   正确指定了连接字符串（如果它在此之前工作应该没问题）
*   您正在对数据库使用 CodeFirst 或 ModelFirst 策略（即，如果您从现有数据库生成 EDMX，它不会为您重新创建它）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:44:22.180

您能否显示有关连接字符串的一些详细信息。我基本上想检查您正在使用的身份验证。设置典型身份验证的演示：http: [//msdn.microsoft.com/en-us/library/ff649314.aspx](http://msdn.microsoft.com/en-us/library/ff649314.aspx)

另一种可能性是连接池。尝试显式关闭连接（如果有任何打开的连接）

```
db.Database.Connection.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:18:50.577

我有一个类似的错误，这是由于连接问题。通常您需要在您的实体 (EDML) 下打开您的 *.EDPS 文件并检查您的连接字符串并确保它具有正确的设置，尤其是您的默认 Oracle 主页。

# ember.js - 如何使用 ember-data 从另一个模型继承或继承模型

> ID：11793751
> 
> 赞同：14
> 
> 时间：2012-08-03T10:16:27.363
> 
> 标签：ember.js, ember-data

假设我的 Rails 模型如下所示：

```
class SalesRelationship < ActiveRecord

end 
```

这由 crossSell 继承，如下所示：

```
class crossSell < SalesRelationship 

end 
```

如何在 ember-data.xml 中显示这种继承关系。对此的最佳做法是什么：

```
App.salesRelationship = DS.Model.extend({
  name: DS.attr('string')
}); 
```

我可以像这样创建一个名为“crossSell”的子类吗

```
crossSell = App.salesRelationship({
    productName: DS.attr('string')
}); 
```

或者像这样

```
 App.salesRelationship.crossSell  = DS.Model.extend({
    productName: DS.attr('string')
  }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T10:39:51.920

非常接近，您可以扩展 SalesRelationship。

```
App.CrossSell = App.SalesRelationship.extend({
  productName: DS.attr('string')
}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-04T23:00:11.457

在 Ember 2.7 中可以这样做。假设您有一个`Person`类并希望从它继承来创建`Employee`一个状态字段（如已雇用、已退休、休假时解雇等）

应用程序/模型/person.js

```
import DS from 'ember-data';

export default DS.Model.extend({
  firstName: DS.attr(),
  lastName: DS.attr(),
  fullName: Ember.computed('firstName', 'lastName', function() {
    return `${this.get('lastName')}, ${this.get('firstName')}`;
}); 
```

应用程序/模型/employee.js

```
import DS from 'ember-data';

import Person from './person';

export default Person.extend({
  status: DS.attr(),
  statusCode: DS.attr(),
}); 
```

# c# - 如何在不使用for循环的情况下检查范围数字是否存在于另一个数字列表中？

> ID：11793755
> 
> 赞同：0
> 
> 时间：2012-08-03T10:16:37.903
> 
> 标签：c#, .net

我有数值范围。

我想检查一个范围内的每个数字是否存在于另一个数字列表中。

我正在使用 for 循环，但它减慢了我的应用程序。

```
public void ShowResults()
{
    // The StartNumber and EndNumber is changed depends 
    // upon my requirement, They are not fixed.  
    int StartNumber = 1 ; 
    int EndNumber = 1000000;

    string[] list =
    {
        "1", "equal", "3", "perhaps", "6", "10", "378", 
        "1937", "28936", "26543", "937" .........,
        "understood" "99993"};

    for(int i = StartNumber; i<= EndNumber;i++)
    {
        List<int> resultList = new List<int>();
        int index = Array.IndexOf(list,i.ToString());
        if(index >= 0)
        {
            resultList.Add(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:48:43.000

您可以使用二进制搜索在另一个数组中查找一个数组的元素，这将需要对其中一个数组进行排序（执行二进制搜索的数组）：

```
 string[] arr = new string[]{
                    "1", "equal", "3", "perhaps", "6", "10", "378", 
                    "1937", "28936", "26543", "937",
                    "understood", "99993"
        };

        // Create sorted array
        int[] firstMillionNumbers = Enumerable.Range(1, 1000000).ToArray();

        // Parse out numbers only
        List<int> listINT = new List<int>();
        int num;
        foreach (string s in arr)
            if (int.TryParse(s, out num))
                listINT.Add(num);

        // Find elements of a list inside sorted array
        List<int> resultList = new List<int>();
        foreach(int num2 in listINT)
        {
            if (Array.BinarySearch(firstMillionNumbers, num2) >= 0)
                resultList.Add(num2);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:46:34.660

题的几个问题。为什么要创建一百万次 resultList （它只有最后一个值）？为什么要调用 i.ToString 一百万次而不是将小列表过滤为 int？

好的，我知道你会说这不是真正的问题。我的回答是发布的问题。如果你想要现实的答案，你需要现实的问题。

```
int StartNumber = 1 ; 
int EndNumber = 1000000;

string[] list =
{
    "1", "equal", "3", "perhaps", "6", "10", "378", 
    "1937", "28936", "26543", "937" .........,
    "understood" "99993"};

List<int> resultList = new List<int>();
int intOut;
foreach(string li in list)
{
   if (int32.TryParse(li, out intOut))
   {
       if(intOut >= StartNumber && intOut <= EndNumber) resultList.Add(intOut));
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:37:07.053

通常，迭代大量变量总是很慢。除了索引或排序（例如在树中，因此您可以跳过其中的大部分内容）之外，没有其他真正的方法可以解决它。

但是，由于您每次迭代都重新创建一个新的，因此您的示例代码速度会更慢`List<int>`（您可能不想这样做，因为您的结果不会有任何意义）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:32:24.650

对于第一个列表，即从“1”到“1000000”的列表，您无能为力，因为它是动态确定的。但是你的第二个呢？如果这个字符串列表是常量，或者至少生成一次并且很早，你应该使用 a`HashSet<string>`而不是 a `string[]`。这将使查找它的速度更快：

```
// This will create an IEnumerable<string> with all numbers to search.
IEnumerable<string> stringsToFind = Enumerable.Range<int>(StartNumber, EndNumber-StartNumber).Select(number => number.ToString());

// This is all the strings in a HashSet. This should be done *beforehand*.
HashSet<string> strings = new HashSet<string>(new [] {  "1", "equal", "3", etc...};

// resultList contains all numbers (from stringToFind) that are in strings).
var resultList = strings.Intersect(stringsToFind); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:33:03.013

首先，您需要有相似的集合（具有相同类型的数字或字符串）。比您应该选择较小的集合并将其采用到第二个集合。在下面的示例中，我假设`list`集合将小于带有数字的集合。

不知道好不好解决。

```
var originalNumbers = new[] {1, 2, 3, 4, 5, 6};
string[] list =
    {
        "1", "equal", "3", "perhaps", "6", "10", "378",
        "1937", "28936", "26543", "937", "understood", "99993"
    };

IList<int> parsedNumbers = new List<int>();
foreach (var item in list)
{
    int temp;
    if(int.TryParse(item, out temp))
        parsedNumbers .Add(temp);

}

var result = parsedNumbers .Intersect(originalNUmbers); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T10:19:14.070

尝试这个，

```
if(list.Intersect(resultList).Count == resultList.Count)
{

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T10:22:08.810

试图用算法而不是编程语言来回答它..

您正在尝试使用两个导致 o(n^2) 复杂性减慢程序速度的 for 循环。如果您有要比较的范围，为什么不迭代您的列表并使用两个简单的 if 检查每个值？这会将复杂性降低到 o(n) 不是吗？

# jquery - jQuery - 如何检查输入是否存在？

> ID：11793760
> 
> 赞同：1
> 
> 时间：2012-08-03T10:16:59.717
> 
> 标签：jquery, html-table

这里的任务很简单，但我做错了：如果单击表格单元格，我需要检查它是否包含`input`字段。如果它不存在，则应创建一个新的。

到目前为止，我得到了这个：

```
$("tbody td").bind("click", function(){
  $this = $(this);
  var newInput = $(document.createElement("input")).attr("class", "input-small");
  $this.append(newInput);
}) 
```

这可行，但如您所见，如果输入已经存在，它会错过测试。我已经尝试了各种方法，包括`if($this.text.length){...}`，`if($this.val().hasClass("input-small") == true){...}`但都失败了。那么我该怎么做呢？检查单击的单元格是否包含输入字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T10:19:36.673

像下面这样的东西会起作用

```
if ($this.find('input').length) { 
    // the td clicked contains an <input>
} 
```

`$this`是一个包装当前`<td>`元素（由 引用`this`）的 jQuery 对象，因此我们需要在 DOM 中查看该元素以查看它是否包含`<input>`元素。如果是这样，则该`.length`属性将大于 0，因此是一个真实值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:27:05.257

Russ Cam 为您提供了答案（支持他！），我只是想帮助您优化代码。

```
// .click just points to jquerys .on function, so calling it directly is faster.
$('tbody td').on('click', function() {
     // always declare your variables properly, some javascript engines could have issues, however excellent that you are caching $(this)
     var $this = $(this),
         newInput = $('<input class="input-small"');

     // .lenght will return false if the length is 0, so no need to compare it to an int
     if(!$this.find('input').length) {
         newInput.appendTo($this);
     }
}); 
```

编辑：固定逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:20:54.967

尝试：

```
if($(this).find('input').length > 0){

    var newInput = $(document.createElement("input")).attr("class", "input-small");
      $this.append(newInput);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:21:36.517

```
if ($(this).children("input").length == 0) //the cell doesn't contain any input elements. 
```

# html - 为什么我的页面无法在 Internet Explorer 中正确呈现？

> ID：11793765
> 
> 赞同：1
> 
> 时间：2012-08-03T10:17:25.797
> 
> 标签：html, css, internet-explorer, layout

我有一个简单但奇怪的问题。

经过多次尝试后我无法解决它我有一个表格这里是**Mozilla 的屏幕截图：** ![在 Mozilla](../Images/d37280e8851fb68943696920fa7091e6.png)

**它在Chrome**中看起来也不错： ![镀铬](../Images/28c1388ae36242d8c8ef7803118861b7.png)

但问题出现在**IE**中。

![在 Internet Explorer 中](../Images/8fadbe47913e94d8f0e97c9bda52f94e.png)

[这里是所有代码的小提琴](http://jsfiddle.net/arisingpopli/gQXPn/)

如何在 IE 中正确操作？

桌子张开

使用 div 而不是 iframe 后地图隐藏

![在此处输入图像描述](../Images/9e23b99148b98b16261092cc973b1a9c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:56:39.527

您可以将其`iframe`放在一个表格中以与上述表格（联系方式）对齐，
例如我在**IE8**中 测试的[http://jsfiddle.net/BEBdv/](http://jsfiddle.net/BEBdv/)中给出的示例： 我希望它会对您有所帮助。

 **![在此处输入图像描述](../Images/5546f800967d82045b1e6cdc91e4c323.png)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:09:15.550

只需设置`height:auto`为包含所有内容的最顶层`<div>`标签即可。

演示：http: [//jsfiddle.net/gQXPn/2/](http://jsfiddle.net/gQXPn/2/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-03T10:28:09.500

问题是因为使用了 IE 不支持的 iframe 标签（来源：[http](http://caniuse.com/#search=iframe) ://caniuse.com/#search=iframe ） 您可以轻松地使用 div 标签而不是 iframe，一切都应该没问题。**

# ruby-on-rails - 通过不显示所有记录可访问 Cancan

> ID：11793766
> 
> 赞同：1
> 
> 时间：2012-08-03T10:17:35.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

没有人可以帮助解决这个问题吗？

在我的 rails 3.2 应用程序中使用 cancan 查找记录时遇到问题。

在我的“nas”索引中，我试图显示属于 current_user 位置的“nas”列表。

问题似乎是用户和 nas 之间没有正式的关系——位置拥有 nas，用户拥有位置。

在我的 nas 控制器中使用 access_by 方法给了我不寻常的结果。如果我在ability.rb 中使用以下内容，我会收到错误消息：

```
 can :read, Nas, :locationusers => { :user_id => user.id }

 Error: undefined method `class_name' for nil:NilClass 
```

而且，如果我改为：

```
 can :read, Nas, :locations => { :user_id => user.id } 
```

我只列出了用户第一个位置的 nas。

例如，如果我的用户有 ids = 1,2,3 的位置，则仅显示位置 1 的 nas。

有没有办法使用cancan显示当前用户位置的所有nas，还是我必须以不同的方式进行？

我的人际关系如下：

```
 class User < ActiveRecord::Base
   ...
   has_many :locationusers
   has_many :locations, :through => :locationusers
   ...
 end

class Location < ActiveRecord::Base
  ...
  has_many :locationusers
  has_many :users, :through => :locationusers

  has_many :nas
  ...
end   

class Node < ActiveRecord::Base
  ...
  belongs_to :location
end 
```

在我的能力.rb：

```
...
if user.role? :customer_admins
can :read, Nas, :locations => { :user_id => user.id }
.. 
```

纳斯控制器

```
 @nas = Nas.accessible_by(current_ability).all 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:08:14.463

使用 Cancan，用户为王。如果您无法从 User 到您尝试授权的 Model 画一条线，则它将无法正常工作。简单的解决方案是对`Nas`（您的示例中的模型称为`Node`？）和`User`. 这可以通过`Locationuser`（在您的示例中未显示）作为 has_many 来完成：通过使用现有的 belongs_to。

```
class Node < ActiveRecord::Base
  ...
  belongs_to :location
  has_many :locationusers, :through => :location
end 
```

现在在您的 Cancan 能力.rb 中，您可以使用：

```
can :read, Node, :locationusers => { :user_id => user.id } 
```

（我`Nas`从您的示例更改`Node`为正确匹配模型）

# android - Android：Facebook SDK - 分享带有描述、缩略图和标题的帖子

> ID：11793767
> 
> 赞同：1
> 
> 时间：2012-08-03T10:17:36.513
> 
> 标签：android, facebook, facebook-stream-story

我无法在用户的墙上设置一个简单的 facebook 墙贴。我希望在单击带有缩略图、描述和标题的按钮时弹出一个 facebook 对话框。我尝试了以下代码，但没有弹出对话框：

```
shareOnFacebookBtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                /*
                 * Get existing access_token if any
                 */
                mPrefs ShopDetailActivity.this.getActivity().getPreferences(Context.MODE_PRIVATE);
                String access_token = mPrefs.getString("access_token", null);
                long expires = mPrefs.getLong("access_expires", 0);
                if(access_token != null) {
                    facebook.setAccessToken(access_token);
                }
                if(expires != 0) {
                    facebook.setAccessExpires(expires);
                }

                /*
                 * Only call authorize if the access_token has expired.
                 */
                if(!facebook.isSessionValid()) {    

                facebook.authorize(ShopDetailActivity.this.getActivity(),new String[] { "publish_stream" }, new DialogListener() {
                    @Override
                    public void onComplete(Bundle values) {

                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token", facebook.getAccessToken());
                        editor.putLong("access_expires", facebook.getAccessExpires());
                        editor.commit();
                        //facebook.dialog(ShopDetailActivity.this.getActivity(), "feed", new SampleDialogListener());
                        Bundle parameters = new Bundle();
                        parameters.putString("message", "message");// the message to post to the wall
                        facebook.dialog(context, "feed", parameters, this);

                    }

                    @Override
                    public void onFacebookError(FacebookError error) {}

                    @Override
                    public void onError(DialogError e) {}

                    @Override
                    public void onCancel() {}
                });

              } 
            }

        }); 
```

授权窗口打开，单击允许后，我希望对话框弹出，但它只是返回到应用程序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:33:13.440

```
facebook = new Facebook("your facebook id");

                    mAsyncRunner = new AsyncFacebookRunner(facebook);
                    facebook.authorize(this, new String[]
                    { "publish_stream", "offline_access" }, -1,

                    new DialogListener()
                    {
                        public void onComplete(Bundle values)
                        {
                            Log.e("tag", "Values returned by Bundle ====> " + values.toString());
                            fbImageSubmit();
                        }

                        public void onFacebookError(FacebookError error)
                        {

                        }

                        public void onError(DialogError e)
                        {

                        }

                        public void onCancel()
                        {

                        }
                    });

//add method into your class

    private void fbImageSubmit()
        {
            if (fb != null)
            {
                if (fb.isSessionValid())
                {
                    Bundle b = new Bundle();
                  b.putString("picture", your image url);
                    b.putString("caption", title);
                    b
                            .putString(
                                    "description",
                                    "test");
                    b.putString("name", "Hi Friends, I am using the your app name app for Android!");
                    b.putString("link", "https://market.android.com/details?id="+this.getApplication().getPackageName().toString());
                    try
                    {
                        String strRet = "";
                        strRet = fb.request("/me/feed", b, "POST");
                        JSONObject json;
                        try
                        {
                            json = Util.parseJson(strRet);
                            if (!json.isNull("id"))
                            {
                                Log.i("Facebook", "Image link submitted.");
                            }
                            else
                            {
                                Log.e("Facebook", "Error: " + strRet);
                            }
                        } catch (FacebookError e)
                        {
                            Log.e("Facebook", "Error: " + e.getMessage());
                        }
                    } catch (Exception e)
                    {
                        Log.e("Facebook", "Error: " + e.getMessage());
                    }
                }
            }
        } 
```

# php - PHP比较来自不同位置的两个数组

> ID：11793768
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:17:41.170
> 
> 标签：php, arrays

我想比较两个不同的数组。基本上我有一个包含短语的数据库，在我的网站上我有一个搜索功能，用户可以在其中输入短语。当他们单击搜索时，我有一个 PHP 页面，它“分解”用户输入的字符串并将其放入数组中。然后我从我也使用了“explode”函数的数据库中提取所有短语，并将所有单词拆分成一个数组。我现在想比较所有数组以找到与每个短语匹配的 3 个或更多单词的紧密匹配。

我该怎么做呢？

好吧，我尝试过的完全失败了，但这就是我所拥有的

```
$search_term = filter_var($_GET["s"], FILTER_SANITIZE_STRING); //user entered data
$search_term = str_replace ("?", "", $search_term); //removes question marks

$array = explode(" ", $search_term);  //breaks apart user entered data

foreach ($array as $key=>$word) {
$array[$key] = " title LIKE '%".$word."%' ";  //creates condition for MySQL query
}

$q = "SELECT * FROM posts WHERE  " . implode(' OR ', $array) . " LIMIT 0,10";
$r = mysql_query($q);
    while($row = mysql_fetch_assoc($r)){
    $thetitle = $row['title'];
    $thetitle = str_replace ("?", "", $thetitle);
    $title_array[] = $thetitle;

$newarray = explode(" ", $search_term);

foreach ($newarray as $key=>$newword) {
    foreach($title_array as $key => $value) {
        $thenewarray = explode(" ", $value);
        $contacts = array_diff_key($thenewarray, array_flip($newarray));
        foreach($contacts as $key => $value) {
                echo $newword."<br />";
                echo $value."<br /><hr />";     
        }

    }

} 
```

但基本上我想要的只是显示与用户已经在搜索框中键入的内容相似的建议短语。因此，如果我搜索“如何比较具有相同值的两个数组？”，我会看到 10 个措辞相似的建议，例如“如何比较多个数组？” 或“我可以比较两个数组”等......
所以基本上就像我第一次在这个网站上发布这个问题时一样，我得到了其他可能有帮助的问题，这基本上就是我想要的。我使用的这段代码最初只匹配一个单词或一个精确匹配的字符串，我对其进行编辑以查找匹配的单词并只显示具有 3 个或更多匹配单词的短语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:29:02.443

我认为这不是您的搜索脚本的最佳解决方案。但我会尽力给你答案：

```
<?php

    $string1 = "This is my first string";
    $string2 = "And here is my second string";

    $array1 = explode(" ", $string1);
    $array2 = explode(" ", $string2);

    $num = 0;
    foreach($array1 as $arr) {
        if(in_array($arr, $array2))
             $num++;
    }

    $match = $num >= 3 ? true : false;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:46:23.293

使用 array_intersect 函数

```
 $firstArray = "This is a test  only";
    $secondArray = "This is test";
    $array1 = explode(" ", $firstArray);
    $array2 = explode(" ", $secondArray);

    $result = array_intersect($array1, $array2);
    $noOfWordMatch = count($result);
    $check = $noOfWordMatch >= 3 ? true : false; ; 
```

# jquery - 如何在ajax成功中解析JSON对象

> ID：11793770
> 
> 赞同：3
> 
> 时间：2012-08-03T10:17:48.830
> 
> 标签：jquery, ajax, json

我收到一个 JSON 响应

```
{
 "title": "Some title",
 "link": "http://google.com",
 "desc": "Some description",
 "items": [{"title":"some title"}] 
```

}

我使用 $ajax 来获得响应

```
$.ajax({

                url : url,                          
                type: 'post',                   
                dataType:'jsonp',                   
                success : function(data) {  
                     console.log(json)
                }

                });

        }; 
```

它给了我一个“无效标签”错误。由于响应来自不同的服务器，我应该使用 JSONP 吗？我用谷歌搜索了它，许多人建议使用 ParseJSON。但是如何解析它，因为 console.log 没有触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:19:58.280

传递给成功函数的`data`变量是响应。`console.log(json)`将是未定义的，因为该变量`json`不存在。

```
$.ajax({
    url : url,                          
    type: 'post',                   
    dataType:'json',                   
    success : function(data) {  
        console.log(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:20:47.330

将数据类型更改为`json`，并添加`&callback=?`到您的 URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:29:14.337

首先确保 ajax 请求返回“数据”（看起来它返回）。

```
{ "title": "Some title",
  "link": "http://google.com",
  "desc": "Some description",
  "items": [{"title":"some title"}]
}. 
```

您可以将此格式用作关联数组。就像 ：

```
var title=data["title"]; //this will give you "some title"
var items=data["items"]; //this will give you a list of items.
var item_title=items["title"]; //process list of items similarly 
```

等等

# ruby-on-rails-3 - 宝石考拉未定义方法'get_object'

> ID：11793788
> 
> 赞同：2
> 
> 时间：2012-08-03T10:19:22.587
> 
> 标签：ruby-on-rails-3, facebook-graph-api, koala

我想使用[Koala](https://github.com/arsduo/koala) Gem 连接到 Facebook api，但遇到了一些问题。

在我使用考拉之前，我使用[omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)来实现我的应用程序的SSO。

然后我`gem koala`在 Gemfile 中添加并运行捆绑安装。

在我的`user.rb'

```
def self.from_omniauth(auth)
  where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
    user.provider = auth.provider
    user.uid = auth.uid
    user.name = auth.info.name
    user.oauth_token = auth.credentials.token
    user.oauth_expires_at = Time.at(auth.credentials.expires_at)
    user.save!
  end
end
def facebook
  @facebook = Koala::Facebook::API.new(oauth_token)
end 
```

然后我去控制台。

```
u = User.first
  User Load (0.5ms)  SELECT "users".* FROM "users" LIMIT 1
=> #<User id: 1, provider: "facebook", uid: "100003544640331", name: "Gary Lai", oauth_token: "AAAB9iQ1zm2oBAA1w3DFBZBC2V73uheQCs43dHpOu1LYsYixqvu...", oauth_expires_at: "2012-10-02 09:55:39", created_at: "2012-07-27 16:41:18", updated_at: "2012-08-03 09:55:42"> 
```

有用。

但是，当我按照 kaola 教程进行操作时，我收到了此错误消息。

```
u.facebook.get_object("me")
NoMethodError: undefined method `get_object' for #<Koala::Facebook::API:0x007fb07ab1e108>from (irb):8
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

为什么我收到此错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T05:35:20.410

最后，我解决了这个问题。因为我的考拉版本是 1.0。因此我必须使用`gem 'koala', :git => 'https://github.com/arsduo/koala.git'`

# regex - Rails 应用程序中变音符号验证中的 Encoding::CompatibilityError

> ID：11793790
> 
> 赞同：1
> 
> 时间：2012-08-03T10:19:26.177
> 
> 标签：regex, ruby-on-rails-3, unicode, diacritics

```
validates :first_name, :format => {:with => /^(?!\d+$)[a-zA-Z\d][\w'\-\p{Word}\.\&\+ ]+$/i } 
```

在上面的代码中，我使用 \p{Word} 将变音符号作为 first_name 传递，但得到 'Encoding::CompatibilityError'。

我喜欢输入“Fábio Batista”作为名字，但收到错误消息“不兼容的编码正则表达式匹配（ASCII-8BIT 正则表达式与 UTF-8 字符串）”

花了很多时间，但无法解决它。

环境：ruby-1.9.2-p180 rails 307

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:58:25.430

放

```
#encoding: utf-8 
```

在 Ruby 文件的第一行。

# matlab - 关于二维数据点的几个问题

> ID：11793795
> 
> 赞同：1
> 
> 时间：2012-08-03T10:19:42.540
> 
> 标签：matlab

过去，我在 SO 寻求帮助时取得了一些成功，并从你们那里获得了许多好的提示和技巧。我遇到了三个我非常想得到帮助的问题。首先，这是我用作输入的散点图的图片：

[散点图](http://i.imgur.com/pMF4A.png)

这是我用来生成该精确图的代码（减去手动箭头/线）：

[源代码](http://pastebin.com/G8K7J6gi)

我想知道是否有人可以帮助我解决我遇到的三个问题：

1.  鉴于上述几点，我如何以编程方式绘制我手动输入的那些线？我尝试了 LS 方法，它产生了 ok(ish) 的结果，我不确定得到“更紧”的直线。
2.  我的数据中有时会出现异常值，它们与行/列方式中的其他数据不完全一致。有没有办法消除这些异常值（如[情节 A 点](http://i.imgur.com/pMF4A.png)所示）？
3.  最后有没有办法计算每个“矩形”的“中心”，因为这些点没有按特定顺序排列？可以按特定顺序对这些点进行排序以提供帮助吗？还是有更聪明的方法？

感谢您花时间看我的问题。我真的希望有人能帮我解决这个问题——我一直在绞尽脑汁想弄清楚如何做这些事情，但我无法想出解决方案。

编辑：删除了指向我的 LS 方法的链接，因为它在水平方向上不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:46:07.370

好的，所以我有一点休息时间来尝试在这里伸出援手。我想我至少可以让你开始以编程方式画线，并希望它能让你对解决这里的其他两个问题有所了解。

我几乎复制了你的代码并从那里开始。我在这里粘贴的是我在您声明 cx 和 cy 矩阵后添加/调整的内容。

现在来解释一下我的思维过程和逻辑。 `Cy`被设计为“压缩”矩阵，`cx`但`cy`沿 Y 坐标值排序。 `Cx`是相同的，只是沿 X 坐标排序。我希望那里的逻辑等应该很简单。如果不是这样说，我会解释的！

现在`diffY`和`diffX`。我取了每个坐标的差值（Xs 和 Ys 分别），因为我们知道这里有一种模式会导致 XY 对形成网格状形状。我基本上依靠这样一个事实，即每行点（水平和垂直）的 Y（或 X）值存在相当大的差异。一旦我在相邻点之间有了这种差异，我就会寻找大于 2 的差异（这是在看到差异之后的事后）。-1 用于给我行的实际结束而不是下一行的开始，因为我们将从列表中的项目 (1,:) 开始（如果您查看行更有意义在代码中）。

（这当然是一个巨大的假设，并且对于这个特定的数据集来说是特定的。虽然它可能适用于大多数类似网格的形状，但必须进行测试。）

还有一个注释。我确实注意到，后来在我使用差异收集的要点列表中，我的思维过程开始崩溃。您可以继续按照我在代码中的模式绘制更多行，以了解我的意思。

至于你的另外两个问题。您可能会采用我在这里的想法并对其进行改进/扩展。我认为您应该能够通过简单地查看给定行 (idx[1] -> idx[2]) 中的所有点并确保它们符合这条线来捕捉异常值。本质上要求它们满足线方程的一般公式，您可以通过使用用于绘制线的点获得该公式。当然，您必须对此有一点容错能力。

然后对于矩形，您可以使用有序的点组来创建矩形，并可能利用该`regionprops`函数来计算由您可以收集的数据点指定的矩形的质心（2D 世界中的中心）。

祝你好运！

```
Cy = zeros(length(cy),2);
[Cy(:,2), IX] = sort(cy);
Cy(:,1) = cx(IX)';

diffY = [0; diff(Cy(:,2))]
idx = find(diffY>2)-1
Cy(idx,:) % Last mark in given row, appears to be slight issue further along.

Cx = zeros(length(cx),2);
[Cx(:,1), IX] = sort(cx);
Cx(:,2) = cy(IX)';

diffX = [0; diff(Cx(:,1))]
idx2 = find(diffX>2)-1
Cx(idx2,:) % Last mark in given row, appears to be slightly off later on. (top of grid though)

%%
figure('Position',[0,0,c,r]);
scatter(Cy(:,1),Cy(:,2),'.');
axis([0 c 0 r])
set(gca,'YDir','reverse')
% Horizontal lines
line([Cy(1,1) Cy(idx(1),1)], [Cy(1,2) Cy(idx(1),2)], 'Color', 'red', 'LineWidth', 2)
line([Cy(idx(1)+1,1) Cy(idx(2),1)], [Cy(idx(1)+1,2) Cy(idx(2),2)], 'Color', 'red', 'LineWidth', 2)
line([Cy(idx(2)+1,1) Cy(idx(3),1)], [Cy(idx(2)+1,2) Cy(idx(3),2)], 'Color', 'red', 'LineWidth', 2)

% Vertical lines
line([Cx(1,1) Cx(idx2(1),1)], [Cx(1,2) Cx(idx2(1),2)], 'Color', 'red', 'LineWidth', 2)
line([Cx(idx2(1)+1,1) Cx(idx2(2),1)], [Cx(idx2(1)+1,2) Cx(idx2(2),2)], 'Color', 'red', 'LineWidth', 2) 
```

# php - 检查 OpenCart 中的购物车是否为空

> ID：11793796
> 
> 赞同：3
> 
> 时间：2012-08-03T10:19:50.373
> 
> 标签：php, opencart

是否有一种全局方法可以在不修改控制器和视图的情况下签入任何 .tpl 文件以查看篮子是否为空。这并不总是有效：

```
$cartItems = $this->cart->countProducts();
if ($cartItems < 0) {
    print "Your cart is empty"
} 
```

它似乎在登录时工作，有时作为客人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:02:23.020

更好的解决方案就是打电话

```
if ( ! $this->cart->hasProducts()) {
    print "Your cart is empty";
} 
```

它要快得多，并且直接引用购物车中的产品数量。

该方法`$this->cart->countProducts()`不计算购物车内的产品，但计算购物车内的**总产品件数**。因此，它将**所有产品加载到**购物车中，并**在循环中**添加每个产品的数量。因此它更慢 - 不多，您甚至可能没有注意到差异 - 但它有点慢（购物车中的产品越多，由于循环越慢）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T08:20:24.977

```
$cart_contents = $this->cart->countProducts();
if ($cart_contents === 0) {
    print "Your cart is empty"
} 
```

# three.js - 三.EffectComposer.scene.addObject(三.EffectComposer.quad); 没有方法'addObject'

> ID：11793800
> 
> 赞同：0
> 
> 时间：2012-08-03T10:19:59.787
> 
> 标签：three.js

首先，在我问你一些新手问题之前，我要感谢 MrDoob & co 所做的所有这些出色的工作，我真的很高兴使用three.js。

但实际上，我正在尝试使用一些着色器和后期效果在我的太阳系中渲染出美丽的太阳。为此，我从您的熔岩金牛座示例中获得了很多启发。

当我在我的代码中调整它时，我得到了以下 JS 错误：

```
Uncaught TypeError: Object [object Object] has no method 'addObject' EffectComposer.js:129
THREE.WebGLRenderer 49 Three.js:331
Uncaught TypeError: undefined is not a function BloomPass.js:27 
```

第一个似乎是一个经典的 js 错误，但我找不到原因，代码看起来不错：

```
THREE.EffectComposer.scene = new THREE.Scene();
THREE.EffectComposer.scene.addObject( THREE.EffectComposer.quad ); 
```

第二点是：

```
this.materialScreen = new THREE.MeshShaderMaterial( { 
```

最后，我尝试使用您的示例代码而不修改它（我只是删除了代码中的统计信息部分）并且没有包含这两个文件（因为我没有找到源代码）：

```
<script src="js/Detector.js"></script>
<script src="js/Stats.js"></script> 
```

我得到了与 effectComposer 相关的第一个错误。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:28:42.033

我找到了解决方案。首先，我没有正确的包含文件（我的较旧）。然后; 我没有很好地构建我的代码并且错过了几件事。

现在它已修复，实际上我不知道在 Doob 先生的示例中是谁制作了熔岩金牛座，但着色器简直令人惊叹。

如果你想看看我的太阳系：[http ://www.scgaming.eu/](http://www.scgaming.eu/)

我解决了，但我正在考虑如何优化它以及如何编写代码比它更好

# ios - 自定义 UITableCell 不起作用

> ID：11793801
> 
> 赞同：0
> 
> 时间：2012-08-03T10:20:08.557
> 
> 标签：ios, uitableview

我搜索了太多，尝试了很多想法，但我无法让它发挥作用。

我有一个视图控制器，在那个控制器中我有一个具有自定义单元格的表格视图。我连接了网点、数据源和委托，但是当我运行项目时，而不是我的自定义单元格。UITableCell 已显示，但也不显示数据。这是我的 .h 和 .m 文件

```
#import <UIKit/UIKit.h>
@class SelectMutantCell;
@interface MutantViewController : UIViewController <UITableViewDataSource,UITableViewDelegate>{
UITableView *tableView;
IBOutlet SelectMutantCell *mutantCell;
}

@property (nonatomic, weak) IBOutlet UITableView *tableView;
@property (nonatomic, weak) SelectMutantCell *mutantCell;    

- (IBAction)cancel:(id)sender;

@end 
```

这是我的 .m 文件

```
 @implementation MutantViewController

@synthesize tableView = _tableView;
@synthesize mutantCell = _mutantCell;

NSArray *mutants;

- (void)viewDidLoad
{
    [super viewDidLoad];
    //mutants = [mutants initWithObjects:@"Keko",@"HEHE",@"PEPE", nil];
    UINib *cellNib = [UINib nibWithNibName:@"SelectMutantCell" bundle:nil];
    [self.tableView registerNib:cellNib forCellReuseIdentifier:@"SelectMutantCell"];

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"SelectMutantCell";

    SelectMutantCell *cell = (SelectMutantCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSLog(@"---");

    cell.nameLabel.text = @"Hehe"];
    cell.descriptionLabel.text = @"hhe";

    return cell;    
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 3;
} 
```

NSLog(@"---") 用于调试，运行时出现。问题出在

```
cell.nameLabel.text = @"Hehe"];
cell.descriptionLabel.text = @"hhe"; 
```

这个块，如果我写 cell.textLabel.text = "test" 它可以工作，但我需要显示我的自定义单元格。

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:28:48.457

插入 if(cell==nil){} 循环

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"SelectMutantCell";
    SelectMutantCell *cell = (SelectMutantCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[SelectMutantCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    NSLog(@"---");
    cell.nameLabel.text = @"Hehe"];
    cell.descriptionLabel.text = @"hhe";
    return cell;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:36:55.003

我遇到过同样的问题。要解决它，请检查以下内容：

*   在您的 nib 文件中，您已经删除了默认创建的根视图，并从 XCode 对象浏览器中拖动了一个 UITableViewCell，然后将 UItableViewCell 的自定义类型设置为您的子类 SelectMutantCell

*   你已经链接了网点

*   您已将单元标识符添加到 SelectMutantCell，就像您在情节提要中所做的那样

*   最后但并非最不重要的一点是，您没有在情节提要 TableView 中添加相同的单元格，它将在情节提要中的单元格和 [self.tableView registerNib:cellNib forCellReuseIdentifier:@"SelectMutantCell"] 中的单元格之间发生冲突；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:30:52.177

查看您的`cellForRowAtIndexPath:`方法，您永远不会初始化单元格。尝试这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"SelectMutantCell";

    SelectMutantCell *cell = (SelectMutantCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"SelectMutantCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects) {
            if([currentObject isKindOfClass:[SelectMutantCell class]]) {
                cell = (SelectMutantCell *)currentObject;
                break;
            }
        }
    }
    NSLog(@"---");

    cell.nameLabel.text = @"Hehe"];
    cell.descriptionLabel.text = @"hhe";

    return cell;    
} 
```

# opencv - OpenCV 可以在 iOS 上检测到哪些面部部位？

> ID：11793803
> 
> 赞同：0
> 
> 时间：2012-08-03T10:20:19.203
> 
> 标签：opencv, face-detection

对于我的新 iPhone 应用程序，我喜欢使用 OpenCV 来检测面部元素，以实现面部变形。有谁知道为此需要检测哪些元素，以及 OpenCV 是否有可能？是否有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-08T19:21:49.040

您可以使用[dlib](http://dlib.net)来检测面部标志，有 68 个点： [![在此处输入图像描述](../Images/dd49a7692c71f478a254d7e844b84182.png)](https://i.stack.imgur.com/L4fBP.jpg)

这是一个非常有用的项目：[https ://github.com/zweigraf/face-landmarking-ios](https://github.com/zweigraf/face-landmarking-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:25:04.467

Opencv 有眼睛、耳朵、嘴巴、鼻子、眼睛对检测器级联。

# javascript - Phonegap - phonegap 应用程序中不显示滚动条

> ID：11793805
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:20:21.473
> 
> 标签：javascript, android, cordova

我是安卓新手。我正在phonegap中申请。我的应用程序的第一个屏幕上有一个列表视图。问题是滚动条没有显示在这个页面中，因为它会出现在android中。

任何人都可以帮助我..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:22:52.313

试试这个代码。这将对您有所帮助。

```
 public class MyActivity extends DroidGap {

    @Override
      public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        super.loadUrl("file:///android_asset/www/index.html");

         // Display vertical scrollbar and hide horizontal scrollBar
         super.appView.setVerticalScrollBarEnabled(true);
         super.appView.setHorizontalScrollBarEnabled(false);
        // set scrollbar style
        super.appView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    }

} 
```

# perl - 如何从 Perl 脚本中隐藏/保护密码

> ID：11793819
> 
> 赞同：8
> 
> 时间：2012-08-03T10:21:20.960
> 
> 标签：perl, encryption, passwords

我正在编写一个需要连接到**SMTP 服务器才能发送邮件的****Perl 脚本**，但我真的不喜欢这种事情：

 **```
my $pass = '123456'; 
```

我发现**Data::Encrypted**应该允许用户第一次提示它，然后加密存储。

```
use Data::Encrypted file => ".passwd", qw(encrypted);
my $password = encrypted('password'); 
```

但我不能让它工作，它会产生运行时错误：

> /Library/Perl/5.12/Data/Encrypted.pm 第 78 行的错误密钥文件格式

有没有人有同样的问题，或者知道另一种隐藏/保护密码的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T11:44:11.380

[Data::Encrypted](https://metacpan.org/module/Data::Encrypted)模块最后一次发布是在 2001年。我认为不使用它是一个好兆头。

通常，我会说存储密码是一个坏主意，即使是加密的。但是，如果您必须存储密码以用于联系另一个系统，那么加密是可行的方法。我会这样做的方式是这样的：

```
# Rijndael is also known as AES, which is the encryption standard used by the NSA
use Crypt::Rijndael;
use IO::Prompter;

# This secret is exactly 32 bytes long, you could prompt for this as a
# passphrase or something and pad it with spaces or whatever you need
my $app_secret = 'this_is_the_key_the_app_uses....';

# Setup the encryption system
my $crypto = Crypt::Rijndael->new( $app_secret, Crypt::Rijndael::MODE_CBC() );

# Ask the user to enter the password the first time
my $password = prompt "password: ", -echo => ''; # from IO::Prompter

# Encrypt the password. You can save this off into a file however you need to
my $enc_password = $crypto->encrypt($password);

# Later load it from the file and decrypt it:
my $password = $crypto->decrypt($password); 
```

有关更多信息，请参阅[Crypt::Rijndael](https://metacpan.org/module/Crypt::Rijndael)和[IO::Prompter](https://metacpan.org/module/IO::Prompter)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T08:12:42.437

当您处理一个脚本，该脚本在没有任何用户交互的情况下向服务发送纯文本密码时，您已经注定要失败。您将提供的任何解决方案都只是默默无闻的安全性。您可以像[zostay](https://stackoverflow.com/users/384802/zostay)一样提供解决方案。但这相当于购买最先进的保险库，但将钥匙放在垫子下面并在纸上贴上文字：“检查垫子是否有钥匙！” 到前门。看，我将复制脚本，grep 密码。然后我会找到喜欢的线条`my $password = $crypto->decrypt($password);`并放置`warn $password;`就在下面一行并运行脚本。就是这样。我不在乎你使用什么算法，我不在乎你在哪里以及如何存储密码。你可以让我变得更难，但我破解的努力总是比你让它变得困难的努力少几个数量级。你的脚本是关键。看看这个电影业。他们花了数十亿美元来带一堆愚蠢的废话。他们最终得到了特殊的硬件，甚至电缆也有自己的密钥。好笑！它只会骚扰公平的用户。

如果您不想看起来很傻，请在脚本中放置普通密码。如果您想通过默默无闻来确保安全，那么不要用合理的名称命名变量，不要使用任何标准模块（看，方法`decrypt`就是线索！）并且不要浪费时间在复杂性上。我不会看你如何存储或加密密码，我会看你必须在哪里使用它并挂在那里。隐藏起来更容易也更难。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T08:02:25.933

谢谢 ！这是我的最终解决方案：

```
sub smtp_passwd(){
    #The secret pass phrase
    my $app_secret = 'd.<,3eJ8sh[(#@1jHD829J,Z!*dGsH34';

    #password file name
    my $passwd_file_name = ".passwd";

    # Setup the encryption system
    my $crypto = Crypt::Rijndael->new( $app_secret, Crypt::Rijndael::MODE_CBC() );

    #File Handler
    my $passwd_file;

    #If we cannot open the password file we initiate a new one
    unless ( open ( $passwd_file, '<', $passwd_file_name) ) {

        #Create a new file in write mode
        open ( $passwd_file, '>', $passwd_file_name);

        # Ask the user to enter the password the first time
        my $password = prompt "password: ", -echo => ''; # from IO::Prompter

        #Password must be multiple of 16 (we deliberately chose 16)
        my $pass_length = 16;

        #If password is to short we complete with blank
        $password = $password." "x ($pass_length - length ( $password ) ) if ( length ( $password ) < $pass_length );

        #If password is to long we cut it
        $password = substr ( $password, 0, $pass_length ) if ( length ( $password ) > $pass_length );

        #Encryption of the password
        my $enc_password = $crypto->encrypt($password);

        #we save the password in a file
        print $passwd_file $enc_password;

        #we close the file ( Writing mode )
        close $passwd_file;

        #Reopen the file in reading mode
        open ( $passwd_file, '<', $passwd_file_name)
    }

    #Loading the password en decrypt it
    my $password = $crypto->decrypt( <$passwd_file> );

    #Close the file
    close $passwd_file;

    #Return the password ( Here the password is not protected )
    return $password;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T10:20:18.727

这是完整的代码，它利用了上面提到的部分代码，部分取自 Perlmonk。该脚本首先询问用户的用户名和密码，将其加密并存储在 .crypt 文件中。然后从中读取，解密并显示原始文本。第二次它将使用现有的用户凭据。

```
use Crypt::Rijndael;
use IO::Prompter;
use Crypt::CBC;
#keys
my $key = "a" x 32;
my $cipher = Crypt::CBC->new( -cipher => 'Rijndael', -key => $key );
my @plaintext;
my @ciphertext;
#keys

#filefield
#password file name
#my $file_name = ".crypt";
my $file_name = ".crypt";
#File Handler
my $file;

#If we cannot open the password file we initiate a new one
unless ( open ( $file, '<:encoding(UTF-8)', $file_name) ) { #<:encoding(UTF-8)
#Create a new file in write mode
    open ( $file, '>', $file_name);
    $plaintext[0]= prompt "Username:";
    $plaintext[1]= prompt "Password:", -echo => '';
    print "#################################################################################\n";
    print "# User credentials will be encrypted and stored in .crypt file and same is      #\n"; 
    print "# reused next time.  If you need to add new user credentials delete the .crypt  #\n";
    print "# file and re run the same script.                                              #\n";
    print "#################################################################################\n";
    $plaintext[0]=~ s/^\s*(.*?)\s*$/$1/;
    $plaintext[1]=~ s/^\s*(.*?)\s*$/$1/;

    while($plaintext[0] =~ /^\s*$/){
    $plaintext[0]= prompt "Username is mandatory:";
    $plaintext[0]=~ s/^\s*(.*?)\s*$/$1/;
    }
    while($plaintext[1] =~ /^\s*$/){
    $plaintext[1]= prompt "Password is mandatory:";
    $plaintext[1]=~ s/^\s*(.*?)\s*$/$1/;
    }

    $ciphertext[0] = $cipher->encrypt($plaintext[0]);
    $ciphertext[1] = $cipher->encrypt($plaintext[1]);

    #we save the password in a file
    print $file $ciphertext[0];

    #print $file "\n";
    #we save the password in a file
    print $file $ciphertext[1];
     #we close the file ( Writing mode )
    close $file;

    #Reopen the file in reading mode
    open ( $file, '<', $file_name)
 }

 my @holder;
 my $content;
if (open( $file, '<', $file_name)) {
  #chomp(@holder = <$file>);
 local $/;
    $content = <$file>;

} else {
  warn "Could not open file '$filename' $!";
}
@holder = split(/(?=Salted__)/, $content);
  print "Encrypted username:",$holder[0];
  print "\n";
  print "Encrypted password:",$holder[1],"\n";

 #Loading the password en decrypt it
$plaintext[0] = $cipher->decrypt( $holder[0] );
$plaintext[1] = $cipher->decrypt( $holder[1] );

print "\n\n";

print 'Username is:',"$plaintext[0]\n";
print 'Password is:',"$plaintext[1]\n";
#Close the file
close $file;

#filefield 
```**

# unix - 在 unix 中获取应用程序特定实例的 pid

> ID：11793822
> 
> 赞同：0
> 
> 时间：2012-08-03T10:21:43.000
> 
> 标签：unix, pid

我有一个应用程序，并且同一应用程序的多个实例正在系统中运行。应用程序的每个实例都使用不同的参数调用。我想根据传递的参数获取已使用某些参数调用的特定进程的 pid，即应用程序特定实例的 pid。有没有办法得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:17:46.260

我可能会检查`ps -eo pid,args`我需要的参数的输出和 grep，然后从输出的开头剪切 pid：

`ps -eo pid,args | grep --parameter=x | cut -c 1-5`

检查 grep 的手册页。有很多（有些令人困惑的）选项可以让您调整命令的输出。在上面的示例中，`-e`选择要显示的所有进程并`-o`让用户选择要输出的内容。

# javascript - 如何设置 Node.js 纤维阻塞

> ID：11793827
> 
> 赞同：3
> 
> 时间：2012-08-03T10:22:03.773
> 
> 标签：javascript, node.js, fibers

我正在尝试使用 node-mongodb-native 创建一个更加同步的数据库模块。目前停留在纤维化 db.open

有什么建议么？谢谢。

# android - 在android中的地图中分离键值对

> ID：11793834
> 
> 赞同：0
> 
> 时间：2012-08-03T10:22:23.070
> 
> 标签：android, hashmap

我有一个 `Map<String, List<String>>` 如下

```
{Accept-Ranges=[bytes], 
Connection=[Keep-Alive], 
Content-Length=[4478161], 
Content-Type=[audio/mpeg], 
Date=[Fri, 03 Aug 2012 10:04:48 GMT], 
ETag=["de2a5-4454d1-4c6186c77fb4d"], 
Keep-Alive=[timeout=15, max=100], 
Last-Modified=[Tue, 31 Jul 2012 04:15:08 GMT], 
Server=[Apache/2.2.16 (Ubuntu)]} 
```

我想从中分离出键值对，也想得到每个键对应的内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:49:18.227

使用 map.entrySet() 获取一组映射条目（即 Key、Value）。然后遍历这个集合并从组成集合的 Entry 对象中获取每个单独的键和条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:51:57.177

您可以通过`get()`调用`Map`.

例子：

```
Map<String, Integer> hm = new HashMap<>();
hm.put("foobar", 1);
System.out.println(hm.get("foobar")); 
```

# testing - 如何使用 jmeter 生成负载测试报告？

> ID：11793838
> 
> 赞同：1
> 
> 时间：2012-08-03T10:22:38.777
> 
> 标签：testing, load, report, jmeter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:50:31.673

检查 jMeter 版本。该错误表明您使用的是 2.4，但您的 Jmeter 主页指向 2.3.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:09:48.933

您是否在 Ant 类路径中包含 ant-jmeter-1.1.1.jar ？将 jar 添加到 $ANT_HOME/lib 将自动执行此操作。

看：

*   [http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php](http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php)

ant-jmeter-1.1.1.jar 位于 jmeter/extras 文件夹中。

此外，我建议您升级到最新的 JMeter 2.7 版本，因为它包含报告的增强功能。

问候

菲利普·M。

[http://www.ubik-ingenierie.com/-Solutions-](http://www.ubik-ingenierie.com/-Solutions-)

# php - 将时间戳转换为 .ics iCal 兼容的日期格式

> ID：11793840
> 
> 赞同：2
> 
> 时间：2012-08-03T10:22:44.693
> 
> 标签：php, icalendar

我有一个日期，我通过jQuery 中的[formatDate函数将其存储为时间戳。](http://docs.jquery.com/UI/Datepicker/formatDate)然后，我将检索此值以制作一个 ics 文件，这是一个日历文件，它将事件时间和详细信息添加到用户日历中。但是时间戳格式在 ics 文件中不起作用，没有添加正确的日期，因此我需要将其转换为看起来像`20091109T101015Z`. 它的当前格式为时间戳看起来像`1344466800000`这是来自[这个示例](http://www.myhow2guru.com/archives/php-generate-calendar-file-ics/)，这是我创建我的 ics 文件所遵循的。

我的 php 文件链接是 http:// 域。com/icsCreator.php?startDate=1344380400000&endDate=1345503600000&event=Space%20Weather%20Workshop&location=伦敦

当前我的 ics 文件看起来像

```
<?php
$dtStart=$_GET['startDate'];
$dtEnd=$_GET['endDate'];
$eventName=$_GET['event'];
$location=$_GET['location'];

...
echo "CREATED:20091109T101015Z\n";
echo "DESCRIPTION:$eventName\n";
echo "DTEND:$dtEnd\n";    
echo "DTSTART:".$dtStart."\n";
echo "LAST-MODIFIED:20091109T101015Z\n";
echo "LOCATION:$location\n";
...

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T10:32:55.900

看看这是否有效：

```
date('Ymd\THis', $time) 
```

这里`$time`可能是`startDate`或`endDate`来自您的查询字符串。如果你不想要时间：

```
date('Ymd', $time) 
```

**注意**（感谢 Nicola）这里，`$time`必须是一个有效的 UNIX 时间戳，即它必须表示自纪元以来的秒数。如果代表毫秒数，需要先除以1000。

**编辑正如***lars k*所指出的，您需要添加`\Z`到两个字符串的末尾。

**编辑正如***Nicola*所指出的，你并不真的需要它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-01T13:22:24.987

\Z 告诉系统时区。Z 是祖鲁语或世界时。

如果您将其排除在外 - 那么您假设最终用户日历应用程序上的时区设置与生成时间戳的系统相匹配。

仅在美国就有多个时区 - 因此您不能仅根据您的用户与您在同一个国家/地区做出该假设。

为了使日期正确进入日历，您需要指定与 UTC 的时区偏移量为正负小时和分钟

注意：日期（'Ymd\THisP'）；// P 是相对于 GMT 的偏移量，应该适用于所有日历用途。

从格林威治标准时间转变 1 小时后，就会出现这样的情况

```
20150601T10:38+01:00 
```

在 PHP 中使用 Dates 时，最好使用[DateTime](http://php.net/manual/en/class.datetime.php)对象，这样您就可以轻松地使用和更改[timezones](http://php.net/manual/en/timezones.php)。

```
// Start with your local timezone e.g
$timezone = new \DateTimeZone('Europe/Amsterdam') ; 

// Don't be tempted to use a timezone abbreviation like EST
// That could mean Eastern Standard Time for USA or Australia.
// Use a full timezone: http://php.net/manual/en/timezones.php

$eventdate = new DateTime ( '1st September 2015 10:30', $timezone);

// Convert the time to Universal Time
$eventdate->setTimezone( new DateTimeZone('UTC') ) ; // Universal / Zulu time

// Return Event Date/Time in calendar ICS friendly format 
// comfortable in the knowledge that it is really in UTC time
return $eventdate->format('Ymd\THis\Z') ; 
```

# c# - 检查孩子的父母

> ID：11793847
> 
> 赞同：0
> 
> 时间：2012-08-03T10:22:59.463
> 
> 标签：c#, asp.net, treeview

我有一个 asp.net 树视图（充当远程文件和文件夹浏览器）。当一个节点被选中时，所有的子节点都会被自动选中。这很好用（下面的 c# 代码）。

当任何孩子被选中/取消选中时，我希望所有相关的父母也被选中/取消选中。我无法弄清楚这一点。我想使用 c# 来做到这一点。

-项目1

------孩子1

------孩子2

```
 --child2.1
  --child2.2 
```

------孩子3

示例 1 - 如果 child 2.2 选中了其复选框，则 child 2 和 item1 将使用后面的 c# 代码自动检查

示例 2 - 如果选中了 item1、child 2、child 2.1 和 child 2.2，并且如果用户取消选中 child 2.2 那么 item1, child 2 将保持选中状态，因为 child 2.1 仍然处于选中状态

谢谢达摩

下面是我的代码，它检查检查项目的所有子项并且工作正常。

```
/// <summary>
        /// Checks or unchecks child nodes when a parent node is checked or unchecked.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>

        protected void OnTreeNodeCheckChanged(object sender, TreeNodeEventArgs e)
        {
            // Determine if checked Node is a root node.
            if (e.Node.ChildNodes.Count > 0)
            {
                // Check or uncheck all of the child nodes based on status of parent node.
                if (e.Node.Checked)
                    ChangeChecked(e.Node, true);
                else
                    ChangeChecked(e.Node, false);

            }
        }

        /// <summary>
        /// Recursively checks or unchecks all child nodes for a given TreeNode.
        /// </summary>
        /// <param name="node">TreeNode to check or uncheck.</param>
        /// <param name="check">Desired value of TreeNode.Checked.</param>
        private void ChangeChecked(TreeNode node, bool check)
        {
            // "Queue" up child nodes to be checked or unchecked.
            if (node.ChildNodes.Count > 0)
            {
                for (int i = 0; i < node.ChildNodes.Count; i++)
                    ChangeChecked(node.ChildNodes[i], check);
            }

            node.Checked = check;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:02:58.577

我想通了

我有 2 个功能如下。第一个检查所有孩子，第二个检查所有父母。希望这可以帮助某人。达摩

```
ChangeCheckedChildren(e.Node, e.Node.Checked);
ChangeCheckedParents(e.Node, e.Node.Checked);

 /// <summary>
        /// Recursively checks or unchecks all child nodes for a given TreeNode.
        /// </summary>
        /// <param name="node">TreeNode to check or uncheck.</param>
        /// <param name="check">Desired value of TreeNode.Checked.</param>
        private void ChangeCheckedChildren(TreeNode node, bool check)
        {

            try
            {
            // "Queue" up child nodes to be checked or unchecked.
            if (node.ChildNodes.Count > 0)
            {
                for (int i = 0; i < node.ChildNodes.Count; i++)
                    ChangeCheckedChildren(node.ChildNodes[i], check);
            }
            node.Checked = check;
            }

            catch (Exception ex)
            {

            }

        }

        /// <summary>
        /// Recursively checks or unchecks all parent nodes for a given TreeNode.
        /// </summary>
        /// <param name="node">TreeNode to check or uncheck.</param>
        /// <param name="check">Desired value of TreeNode.Checked.</param>
        private void ChangeCheckedParents(TreeNode node, bool check)
        {
            try
            {

                if (node.Parent == null)  // if we are at the root node
                {
                    if (node.ChildNodes.Count > 0)
                    {
                        for (int i = 0; i < node.ChildNodes.Count; i++)
                        {
                            if (node.ChildNodes[i].Checked == true)
                            {
                                node.Checked = true;
                                return;
                            }
                        }
                        node.Checked = false;
                    }
                    else
                    {
                        node.Checked = check;
                    }

                }
            else
            {
                // Check all parents if the user is checking
                if (check == true)
                {
                    node.Checked = check;
                    ChangeCheckedParents(node.Parent, check);
                }

                else
                {
                    // Do not uncheck a parent if any of its other children or their children are checked
                    if (node.ChildNodes.Count > 0)
                    {
                        // Default to not check and check if required
                        node.Checked = false;
                        for (int i = 0; i < node.ChildNodes.Count; i++)
                        {
                            if (node.ChildNodes[i].Checked == true)
                            {
                                node.Checked = true;
                            }
                        }                            
                            ChangeCheckedParents(node.Parent, check);
                    }
                    else
                    {
                        node.Checked = check;
                        ChangeCheckedParents(node.Parent, check);
                    }
                }
            }
            }

            catch (Exception ex)
            {

            }

        } 
```

# cakephp - CakePHP，将另一个模型信息获取到页面控制器中

> ID：11793849
> 
> 赞同：0
> 
> 时间：2012-08-03T10:23:10.020
> 
> 标签：cakephp

我正在尝试使用页面控制器和 admin_index() 函数构建管理页面。我需要获取具有特定状态的所有帖子的列表并将它们显示在此页面上。我怎样才能在页面控制器中抓取这些，然后我可以在视图中显示它们。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:47:19.613

您可以在 PagesController 的 admin_index() 函数中加载模型：

```
$this->loadModel('Post');
$posts = $this->Post->find('all', array(
    'conditions' => array('Post.status' => 'your_filter')
);
$this->set(compact('posts')); 
```

现在您的页面视图文件中有 $posts 可用。（根据您的需要调整查找方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:47:46.730

试试这个 ：

```
$this->loadmodel('Post');
$posts = $this->Post->find('all',array('conditions'=>array('Post.id'=>'1','Post.field'=>'value')));
$this->set('posts',$posts); 
```

# c# - I need to find Special Characters in a string and display them in a label in C#

> ID：11793850
> 
> 赞同：0
> 
> 时间：2012-08-03T10:23:12.557
> 
> 标签：c#, regex, unicode

I need to find Characters contained in a string. anything other than `A-Z(lower and upper) or numbers or () or /`, those are the only characters allowed.

anything else (especially `à,è,ë,Ç,ç,ï and so forth`)are crucial to find and display in a label.

Basically I Stored everything from a text file to a string,using streamreader. now every character other than [a-zA-z0-9]()/,need to be displayed in a label.

**the text file will look something like this:**

0145 Joane 5521 Maxin
0211 ChanÉ 2145 Spur
0124 Martôn 4512 btgames,

```
private void button1_Click(object sender, EventArgs e)
    {

        string BodyToCheck = richTextBox1.Text;

      //This is where I need coding....
  }

    private void Form1_Load(object sender, EventArgs e)
    {

        StreamReader reader = new StreamReader("C:/Users/Quinell.Struthers/Test.txt");

        string body = reader.ReadToEnd();
        reader.Close();
        reader.Dispose();

        richTextBox1.Text = body;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:27:14.557

```
public static string GetSpecialCharacters(string str) {
   StringBuilder sb = new StringBuilder();
   foreach (char c in str) {
      if (!((c >= '0' && c <= '9') || (c >= 'A' && c <= 'Z') | || (c >= 'a' && c <= 'z') | c == '.' || c == '_')) {
         sb.Append(c);
      }
   }
   return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:28:31.083

```
using System.Text.RegularExpressions;
using System.Linq;
var regex=new Regex("[^A-Za-z0-9()/]");
var toDisplay=string.Join("",regex.Matches(testString).OfType<Match>().Select(x=>x.Value).ToArray()); 
```

编辑实际上乔伊的回答使它更简单，使用替换而不是获取所有值

```
using System.Text.RegularExpressions;

var regex=new Regex("[A-Za-z0-9()/]");
var toDisplay=regex.Replace(testString,string.Empty); 
```

编辑：方法2的描述

第一次使用需要在文件的顶部，就像其他使用一样。

下一行在[MSDN 上创建一个正则表达式对象 Regex](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.100%29.aspx)

此正则表达式将匹配范围内的任何字符`A-Z`，`a-z`或者`0-9`和附加将匹配`(`,`)`和`/`。

最后，变量 toDisplay 被设置为用空字符串替换所有这些匹配的结果（有效地将它们从结果中删除）。`testString`是您要过滤的源字符串。该代码不会更改源字符串，只是将 toDisplay 设置为过滤器的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:25:42.577

好吧，您可以使用正则表达式替换来删除允许的字符，然后显示标签中不允许的所有字符：

```
label1.Text = Regex.Replace(textBox1.Text, "(?i)[a-z0-9()/]", ""); 
```

# visual-studio-2010 - Visual Studio 2010 中的默认语言

> ID：11793851
> 
> 赞同：0
> 
> 时间：2012-08-03T10:23:28.390
> 
> 标签：visual-studio-2010

我目前正在发现 Visual Studio 2010。我对 Visual Basic 没有任何经验。我看到 Visual Studio 支持多种语言，[对于新手来说 C# 比 C++ 更容易](https://stackoverflow.com/q/370141/1458491)，但我仍然不知道该程序中的默认语言是什么。

在我的第一个测试应用程序中，我可以在表单上插入按钮和许多其他内容。查看代码给出了类似的内容：

```
Private Sub Beenden_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Beenden.Click 
End Sub 
```

这在我看来就像 VBA，但我从未决定要使用哪种语言。那是Visual Basic吗？还是VB.NET呢？

感谢您澄清这一切！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:27:47.700

该语言很可能是 VB.NET。

Visual Studio 没有“默认语言”。

您使用的语言取决于您创建的项目 - 默认安装中有 C#、VB.NET 和 C++ 模板，但您可以添加许多其他模板和语言。

以上适用于 Visual Studio 的非免费版本（Pro、Ultimate 等）。

[Express Editions](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)是特定于语言的（您可以下载并并排运行这些版本）。

# jquery - jQuery 从 2 个选择菜单中查找/隐藏匹配选项值

> ID：11793852
> 
> 赞同：0
> 
> 时间：2012-08-03T10:23:35.253
> 
> 标签：jquery

我有 2 个带有匹配选项的选择菜单，例如

```
<select id="select-one">
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
</select>

<select id="select-two">
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
</select> 
```

我需要在更改功能中做的是，如果从任一菜单中选择了一个选项，则从另一个列表中隐藏/删除匹配的选项。选择其他选项时，我需要再次显示。

我希望这是足够的信息，但请询问您是否需要更多信息。

**编辑**

对不起，我错过了，但我正在使用[选择的插件](http://harvesthq.github.com/chosen/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:30:12.653

```
$('#select-one').on('change', function () {
  var value = $(this).val();
  $('#select-two').children('option').each(function () {
    if ($(this).val() == value) {
      $(this).hide();
        if ($(this).is(':selected') == true) {
            if ($(this).val() == 3) {
                $(this).removeAttr('selected')
                $(this).prev().attr('selected', '')
            } else {
                $(this).removeAttr('selected')
                $(this).next().attr('selected', '')
            }
        }
    } else {
      $(this).show();
    }
  });
}); 
```

这应该可以工作（未经测试），只需复制第二个，当然要替换 id。需要放置在加载选择框或函数后执行的`$(document).ready()`函数中。

哦，你需要正确关闭你的选项标签`</option>`

JSfiddle [http://jsfiddle.net/m7q3H/38/](http://jsfiddle.net/m7q3H/38/)（作品）

更新： http: [//jsfiddle.net/m7q3H/39/](http://jsfiddle.net/m7q3H/39/)（如果与当前相同，则更改其他选择框上选定选项的值）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:32:50.437

我个人要做的第一件事是`data-*`为您的每个选择添加一个属性，其中包含另一个选择的 ID。这使您可以使您的代码更通用，而不必使用切换的 ID 来复制它：

```
<select id="select-one" data-select="select-two">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

<select id="select-two" data-select="select-one">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 
```

然后是jQuery代码：

```
$('#select-one,#select-two').chosen().change(function(e) {
    var that = this;
    var $otherSelect = $('#' + $(this).data('select'));
    $otherSelect.find('option').show().filter(function() {
       return this.value == that.value;
    }).hide();        
}); 
```

这`change`为两个选择添加了一个事件处理程序。它所做的第一件事是将`this`（`<select>`已更改的）的副本存储到另一个变量中，因此它可以在传递给的函数中引用它`.filter()`。

然后它使用元素的属性获取对另一个`<select>`元素的引用。`data-select`

现在它选择其中的**所有**选项元素，并显示它们，然后将该列表过滤到仅具有匹配值的那个，并将其隐藏。

更新：

如果您在`<select>`元素上单独调用所选插件，您可能希望将匿名函数移动到命名函数，如下所示：

```
function handleChange() {
    var that = this;
    var $otherSelect = $('#' + $(this).data('select'));
    $otherSelect.find('option').show().filter(function() {
        return this.value == that.value;
    }).hide();
} 
```

`change`然后在单独分配事件处理程序时传递对该函数的引用：

```
$('#select-one').chosen().change(handleChange);
$('#select-two').chosen().change(handleChange); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:32:20.670

```
$('#select-one').change(function(e){
   var val_one = $(this).val();
   $('#select-two option').each(function(){
     if($(this).val() === val_one)
        $(this).hide();
     else
        $(this).show();
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:38:55.497

```
$('#select-one').change(function() {
val = $(this).val();
$('#select-two option').each(function(){
$(this).css({'display' : 'block'});
if($(this).val() == val)
    $(this).css({'display': 'none'}); 
```

});

```
$('#select-two').change(function() {
val = $(this).val();
$('#select-one option').each(function(){
$(this).css({'display' : 'block'});
if($(this).val() == val)
    $(this).css({'display': 'none'}); 
```

}); });

# ant - 在 ant 中有几个库目录

> ID：11793853
> 
> 赞同：0
> 
> 时间：2012-08-03T10:23:43.503
> 
> 标签：ant

如何向 Ant 表明库存在于两个不同的目录中？

现在我有

```
<property name="lib" value="C:/apache-ant-1.8.4/lib" />

    <target name="compile" depends="init">
        <javac source="1.6" srcdir="${src}" fork="true" destdir="${bin}" encoding="UTF-8" >
            <classpath>
                <pathelement path="${bin}">
                </pathelement>
                <fileset dir="${lib}">
                    <include name="**/*.jar" />
                </fileset>
            </classpath>
        </javac>
    </target> 
```

如果我将所有库复制到 ant \lib 文件夹中就可以了。如何向 Ant 表明有两个带有库的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:30:57.350

只需添加另一个文件集：

```
<property name="lib" value="C:/apache-ant-1.8.4/lib" />
<property name="otherLib" value="C:/somePath/lib" />

<target name="compile" depends="init">
    <javac source="1.6" srcdir="${src}" fork="true" destdir="${bin}" encoding="UTF-8" >
        <classpath>
            <pathelement path="${bin}" />
            <fileset dir="${lib}">
                <include name="**/*.jar" />
            </fileset>
            <fileset dir="${otherLib}">
                <include name="**/*.jar" />
            </fileset>
        </classpath>
    </javac>
</target> 
```

# algorithm - What is the difference between a floating point merge and an integer merge?

> ID：11793856
> 
> 赞同：3
> 
> 时间：2012-08-03T10:23:54.707
> 
> 标签：algorithm, floating-point, mergesort

In [this paper](http://www.cc.gatech.edu/~ogreen3/_docs/GPU%20Merge%20Path%20-%20A%20GPU%20Merging%20Algorithm.pdf), two cases have been considered for comparing algorithms - integers and floating points.

I understand the differences regarding these data types in terms of storage, but am not sure why there is a difference among these.

**Why is there a difference in performance between the following two cases**

*   Using merge sort on Integers
*   Using merge sort on Floating Points

I understand that it comes down to speed comparison in both the cases, the question is why these speeds might be different?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:15:18.183

该论文在第 4 节“结论”中指出，“在 CPU 上合并整数的执行时间比在 CPU 上合并浮点的执行时间快 2.5 倍”。对于测量中使用的 Intel Nehalem Xeon E5530，这种巨大的差异令人惊讶。但是，该论文没有提供有关源代码、合并中使用的特定指令或处理器功能、编译器版本或使用的其他工具的信息。如果处理器得到有效使用，整数合并与浮点合并的性能应该只有非常小的差异。因此，测试中使用的浮点代码似乎效率低下，并且表明使用的工具很差，而不是处理器的任何缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:28:03.153

合并排序有一个包含相当多指令的内部循环。比较浮点数可能会贵一点，但只有 1-2 个周期。您不会注意到大量合并代码之间的差异。

与您在该算法中执行的所有其他操作相比，比较浮点数是硬件加速和快速的。

此外，比较可能会与其他指令重叠，因此挂钟时间的差异可能正好为零（或不为零）。

# crystal-reports - Crystal Reports XI - 根据子组的抑制状态抑制组标题

> ID：11793857
> 
> 赞同：2
> 
> 时间：2012-08-03T10:24:01.980
> 
> 标签：crystal-reports

我有一个相当简单的问题，尽管我在网上搜索了很多小时，但我还是没有为自己锻炼。

我有一份报告，其中包含来自几千台设备（记录器）的时间戳数据，为了以合理的方式呈现数据，我在报告中设置了两个组；记录器和时间戳，因此数据首先按记录器 id 分组，然后按时间戳分组，这工作正常

```
Group 1 Logger 1
  Group 2 Timestamp 01/08/2012
    Data...
    Data...
    Data...
  Group 2 Timestamp 02/08/2012
    Data...
    Data...
Group 1 Logger 2
  Group 2 Timestamp 01/08/2012
    Data...
    Data...
    Data... 
```

现在数据（详细信息）字段对用户隐藏，如果每个 group-2 中有 4 条或更多记录，我只想显示 group-2 的标题。为了实现这一点，我在 group-2 上使用了以下抑制公式

```
Count ({GMAC_spDg2Report;1.tTimeStamp}, {GMAC_spDg2Report;1.tTimeStamp}, "daily") < 4 
```

诀窍是在某些 1 级组中，所有组 2 标题都被抑制，在这种情况下，我也想隐藏组 1 标题。在第 1 组中使用与第 2 组相同的抑制公式并没有产生预期的结果。我还尝试在 group-1 页脚中使用具有不同计数的运行总计（称为 {#Count Unsupressed Days}），并且在每个 group-1 上重置下面的公式

```
Count ({GMAC_spDg2Report;1.strLogger}, {GMAC_spDg2Report;1.tTimeStamp}, "daily") > 4 
```

运行总计完美运行​​，如果组具有未抑制的子组，则返回组 1 页脚中的 1，如果抑制所有组 2 标题，则返回 0。

所以这是挑战，我似乎无法使用运行总计的输出在 group-1 的标题中应用抑制规则。为了演示这个问题，我创建了一个公式字段，其中仅包含运行总计的输出，并将其放在 group-1 标题中。结果至少可以说令人困惑......公式字段显示的值与运行总计不同，因此抑制规则不起作用。

我希望这有某种意义......我觉得我已经尝试了一切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:41:23.300

我没有明确的解决方案，但使用以开头的公式字段

```
WhilePrintingRecords;
... 
```

该公式将在读取所有记录*后*进行处理，因此您将能够在节标题中使用它并获得正确的结果。
现在有一个问题是找到一个对您有用的公式逻辑，但也许这第一步可以帮助您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-18T12:14:26.553

我曾经遇到过类似的问题。我记得，诀窍是检查`Suppress blank section`每个细节部分并检查组标题部分中的一些类似的声音选项`Suppress blank group`（？）。

对不起，我不能给你确切的名字，这是很久以前的事了，我用的是德文版本。不过，我知道没有公式也是可能的。

我认为您不使用子报告。如果你这样做了，请注意这个技巧只有在子报告有选项`Suppress empty report`（？）与我上面写的一起检查时才有效。

# iphone - 如何检测 iPhone 中的轻微运动抖动？

> ID：11793858
> 
> 赞同：0
> 
> 时间：2012-08-03T10:24:12.193
> 
> 标签：iphone, objective-c, ios, xcode, motion

我正在创建一个应用程序，目前它对运动摇晃有反应，这是摇晃的代码：

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event
  {
      if (event.type == UIEventSubtypeMotionShake) {}
  } 
```

现在用户必须真的很难摇晃才能发生反应，有没有更复杂的方法来检测光波，或者像 5 次轻摇然后反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:44:04.770

尝试以下

在你的文件的 .h

```
#import <UIKit/UIKit.h>

@interface ShakeUIView : UIView <UIAccelerometerDelegate>{
    BOOL hasBeenShaken;
    UIAcceleration* lastAction;
    id delegate;
}

@property(strong) UIAcceleration* lastAction;
@property (nonatomic, assign) id delegate;

@end 
```

在你文件的 .m

```
#import "ShakeUIView.h"

@implementation ShakeUIView

@synthesize lastAction;

// adjust the threshold to increase/decrease the required amount of shake
static BOOL SJHShaking(UIAcceleration* last, UIAcceleration* current, double threshold) {
    double
    deltaX = fabs(last.x - current.x),
    deltaY = fabs(last.y - current.y),
    deltaZ = fabs(last.z - current.z);

    return
    (deltaX > threshold && deltaY > threshold) ||
    (deltaX > threshold && deltaZ > threshold) ||
    (deltaY > threshold && deltaZ > threshold);
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
            }
    return self;
}

-(void)awakeFromNib{
    [super awakeFromNib];
    [UIAccelerometer sharedAccelerometer].delegate = self;
}

- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

    if (self.lastAction) {
        if (!hasBeenShaken && SJHShaking(self.lastAction, acceleration, 0.7)) { 
            hasBeenShaken = YES;
            // Shake detacted do what you want here

        } else if (hasBeenShaken && !SJHShaking(self.lastAction, acceleration, 0.2)) {
            hasBeenShaken = NO;
        }
    }

    self.lastAction = acceleration;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

-(void)dealloc{
    [UIAccelerometer sharedAccelerometer].delegate = nil;
} 
```

我使用了 UIView 的一个子类，你可以使用任何你想要的东西。

# jquery - .show() 的奇怪 div 行为

> ID：11793859
> 
> 赞同：0
> 
> 时间：2012-08-03T10:24:42.400
> 
> 标签：jquery, css, css-float, position

我正在尝试在板上使用 .toggle 方法（jquery）。我已经设置了一个[JsFiddle](http://jsfiddle.net/EnLCG/3/)。这是问题所在：当我单击 div #forum1 时，div #forum3 位于右侧。我宁愿这个 div 到底部...

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:44:47.160

这不是您对 float 属性的期望吗？使其更长会导致可用空间正确放置下一个 div，从而将其移到那里。

您可以通过将它们都放在页面宽度一半的垂直 div 中来获得您想要的结果。第一个将包含奇数，第二个将包含偶数。

# javascript - 在服务器和客户端之间传递数据（node.js + mongodb）

> ID：11793860
> 
> 赞同：0
> 
> 时间：2012-08-03T10:24:41.953
> 
> 标签：javascript, node.js, mongodb, express, pug

我正在使用 node.js express 和 mongodb，我有一个来自客户端的输入数据，我需要将数据传递给服务器查找它的属性并在另一个页面中发送给客户端。

现在我有问题， `req.body.age`应该从客户的输入中获取数据并用于`find()`获取其适当的属性。

**服务器端代码：**

函数在另一个 .js 文件中路由

```
exports.find_user = function(req, res) {
    res.render('find_user.jade');
};

exports.user = function(req, res){
    member = new memberModel();
    member.desc.age = req.body.age; //problem
    console.log(req.body.age);  //undefined 
    memberModel.find({desc: {age: '7'}}, function(err, docs){
        res.render('user.jade', { members: docs });
    console.log(docs);
});
}; 
```

`memberModel.find({desc: {age: '7'}}`只需硬编码 7 岁的用户（有效）

**客户端代码（玉）：**

数据输入页面：

find_user.jade

```
form(action='/', method='post')
    fieldset
        lable(for="age") Find user by age: 
            input(type="text", size="30", name="age", required="required")
            input(type='button', value='Find', onclick='location.href=\'find_user/user/\'') 
```

数据输出页面及其属性：

用户.jade

```
 tr
            th Name
            th Age
    tbody
    - members.forEach(function(member){
        tr
            td= member['name']
            td= member['desc']
     - }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:17:36.310

You are not submitting your data in find_user.jade file when the user clicks the button. Instead, the client is only redirected to another page.

This is how your find_user.jade file should look like:

```
form(action='find_user/user/', method='post')
    fieldset
        label(for="age") Find user by age: 
            input(type="text", size="30", name="age", required="required")
            input(type='submit', value='Find', name="submit") 
```

# jquery - 如何使用 jQuery 或仅使用 javascript 在复杂结构中获取第三个生成的 div 的 id？

> ID：11793861
> 
> 赞同：0
> 
> 时间：2012-08-03T10:24:49.463
> 
> 标签：jquery, html

我有一个 div 结构，由 jQuery 函数生成，我几乎无法控制哪一代。该结构有19个第一代孩子，一个第二代孩子和3个第三代孩子。我对第四代孩子不感兴趣。这是代码：

```
<div id="columntableordersGrid">
<div></div>
<div></div>
....
<div></div>
<div id="30bcef39-6ab1-69f5-81af-bbb9e870bfd4">
    <div>
        <div id="pdfs"><img src="/kabinet/images/32x32/pdf.png"></div>
        <div class="container">
            <div class="filtericon">
                <div class="filterbutton"></div>
            </div>
            <div class="sortasc">
                <div class="sortascbutton"></div>
            </div>
            <div class="sortdesc" >
                <div class="sortdescbutton"></div>
            </div>
        </div>
        <div id="bb29c057-acd8-f1eb-aa13-69d8498ae47e">
            <div class="column-menubutton"></div>
        </div>
    </div>
</div>
</div> 
```

我需要获取此结构的第三代孩子之一的 id (bb29c057-acd8-f1eb-aa13-69d8498ae47e)。每次脚本运行时，它都会生成新的 ID。

我可以使用以下方法获取第一代孩子的 ID：

```
 var all = $("#columntableordersGrid > div").map(function() {
        return this.id;
    }).get(); 
```

我对 17 岁的孩子感兴趣，因此 all[16] 给了我那个孩子的 id，即：

30bcef39-6ab1-69f5-81af-bbb9e870bfd4 在上面的代码示例中。

不幸的是，第二代 div 没有 class 或 id，正如我所说，我无法控制它的生成。这个 div 的第三个孩子是我需要的 id。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:41:44.403

如果您需要的 id 始终是具有类“.column-menubutton”的元素的父级，则下面的内容应该可以使用您现有的代码。

```
var parentDivId = all[16];
var menuParentDivId = $('#' + parentDivId + " .column-menubutton").parent().attr('id'); 
```

见[**演示**](http://jsfiddle.net/Jt9BW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:29:18.073

您可以使用像这样的简单选择器来抓取第 17 个 div（索引从 0 开始，因此 16 将抓取第 17 个 div），然后获取在该 div 中找到的第一个 div 的 ID。

```
$('#columntableordersGrid div:eq(16) div:first').attr('id'); 
```

如果您感兴趣的 div 始终是最后一个 div（如上例所示），您可以通过以下方式稍微简化它：

```
$('#columntableordersGrid div:last div:first').attr('id'); 
```

# ruby-on-rails - Ruby on Rails：如何检查模型是否存在

> ID：11793869
> 
> 赞同：10
> 
> 时间：2012-08-03T10:25:25.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想知道如何检查模型是否已经存在于项目中？

当用户尝试使用相同的模型名称以编程方式创建模型时，需要检查它是否已经存在？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T10:29:37.370

`defined? ModelName`如果定义了模型，将返回“常量”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-06T12:05:08.070

由于`defined?`有问题（请参阅@Jiggneshh Gohel 的评论），也许您可​​以检查`models`目录中的文件名。

```
files = Dir[Rails.root + 'app/models/*.rb']
models = files.map{ |m| File.basename(m, '.rb').camelize }

models.include? "User" => true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T20:02:57.367

另一种选择是使用[存在](https://apidock.com/rails/ActiveRecord/Base/exists%3F/class)

如果模型中没有列，则返回 false。

# jquery - jQuery移动弹出外部页面

> ID：11793870
> 
> 赞同：1
> 
> 时间：2012-08-03T10:25:31.817
> 
> 标签：jquery, mobile, popup

刚刚看到 JQM 1.2 中的新弹出功能，想知道是否可以在弹出窗口中打开外部页面，类似于对话框？从文档看来，弹出 div 必须与打开弹出窗口的链接位于同一页面上。如果是这样，我是否认为它不会很好地降解？使用对话框的外部页面链接方法会很好地降级 - 您只会获得指向外部页面的链接，但如果您使用禁用 javascript 的浏览器打开弹出页面，您最终会在某处显示弹出 div主页。为了防止这种情况，您是否应该使用一些样式来隐藏弹出 div？

我希望将一些对话框更改为弹出窗口，但如果您无法在其中打开外部页面，我将不得不再考虑一下 :(

有人玩过弹窗吗？

# javascript - x 秒后开始第二个 setInterval

> ID：11793879
> 
> 赞同：1
> 
> 时间：2012-08-03T10:26:26.327
> 
> 标签：javascript, jquery, setinterval

我需要构建一个在 x 秒后上下滚动的页面。我只需要知道如何在延迟后开始第二个 setInterval 。或者，如果人们有其他解决方案，我愿意接受任何事情！

这是代码：

```
setInterval(function() {
    scrollDown();
},8000);

setInterval(function() {
    scrollUp();
},8000);

function scrollDown() {

    $('html, body').animate({
        scrollTop: $("#page2").offset().top
    }, 2000);
}

function scrollUp() {

    $('html, body').animate({
    scrollTop: $("#page1").offset().top
    }, 2000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:46:15.850

只需一个计时器即可更清洁、更精确地执行此操作，如下所示：

```
setInterval(scrollDown, 8000);

function scrollDown() {
    $('html, body').animate({
        scrollTop: $("#page2").offset().top
    }, 2000);

    setTimeout(scrollUp, 4000);
}

function scrollUp() {
    $('html, body').animate({
        scrollTop: $("#page1").offset().top
    }, 2000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:57:01.360

你可以使用一个`setTimeout`设置本身？

```
function setNext(up){
  setTimeout(function(){
     if(up) scrollUp(); 
     else scrollDown();
     setNext(!up);
  }, 8000);
}

scrollDown() //first time
setNext(true); 
```

~~免责声明：我没有测试过。（然而）~~

这是[工作演示。](http://jsfiddle.net/mrobin/MkCzw/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:33:33.657

其他人已经回答了，所以我只会补充一点：

```
setInterval(function() {
    scrollDown();
}, 8000);

setInterval(function() {
    scrollUp();
}, 8000); 
```

与此相同：

```
setInterval(scrollDown, 8000);

setInterval(scrollUp, 8000); 
```

如果您在该匿名函数中所做的只是调用另一个命名函数，则不需要匿名函数进行回调 - 您只需传递命名函数即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:32:01.017

最简单的解决方案，试试这个：

```
setInterval(function() {
    scrollDown();
},8000);

setTimeOut(function(){
    setInterval(function() {
        scrollUp();
    },8000);
},1000); 
```

因为 setTimeOut 函数只调用一次

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-03T10:30:05.293

```
setInterval(function() {
    scrollDown();
},8000);

setInterval(function() {
    scrollUp();
},8000 + 2000); 
```

对于它的价值，以上将产生完全相同的效果。但是对于像您的要求这样措辞的代码，您可以：

```
setInterval(function() {
    scrollDown();
},8000);

setInterval(function() {
    setInterval(function() {
        scrollUp();
    },8000);
2000); 
```

# android - Android 列表视图和图像

> ID：11793881
> 
> 赞同：0
> 
> 时间：2012-08-03T10:26:39.427
> 
> 标签：android, android-listview, android-imageview

我有一个列表视图，它显示来自数据存储类的播放器名称，我希望它也显示播放器的图像。如何更改我的列表视图以显示图像？

这是我填充列表视图的代码：

```
 player_List = (ListView)findViewById(R.id.listplayer); 

    player_List.setAdapter(new ArrayAdapter<Player>(this, android.R.layout.simple_list_item_1, dataStore.getPlayers())); 
```

任何帮助将不胜感激！

顺便说一句，我尝试了一个简单的数组适配器，但这似乎只喜欢字符串对象！我想放一个玩家对象！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:34:53.263

检查下面的链接

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# assembly - 一些 intersectRaySphere c 程序通过将其重写为 x86 asm 进行优化（如何？）

> ID：11793883
> 
> 赞同：0
> 
> 时间：2012-08-03T10:26:51.413
> 
> 标签：assembly, x86, sse, raytracing, fpu

你好，我对汇编的了解不多，我正在考虑如何通过在 x86（32 位 fpu 或 sse2）汇编中重写它来优化它，应该优化它 - 用正确的汇编重写，然后我会测试如果我加快了速度（length() 和 dot() 也应该在这里用 asm 编写）此代码由我的简单实时光线追踪器使用，它可以工作 - 但我在 asm 优化方面不太擅长）

```
 inline float intersectRaySphere(float3* rO, float3* rV, float3* sO, float sR)
   {
    static float3 Q;

    Q = sub(sO,rO);
    float c = length(&Q);
    float v = dot(&Q,rV);
    float d = sR*sR - (c*c - v*v);

    // If there was no intersection, return -1
    if (d < 0.0) return (-1.0f);

    // Return the distance to the [first] intersecting point
    return (v - sqrt(d));
    } 
```

先感谢您

//编辑

```
 struct float3
    {
     float x;
     float y;
     float z;
    };

    inline float length(float3* v) {
     return sqrt( (v->x)*(v->x) + (v->y)*(v->y) + (v->z)*(v->z) );
    }

   inline float dot(float3* a, float3* b) {
     return (*a).x * (*b).x + (*a).y * (*b).y + (*a).z * (*b).z;
   } 
```

和演示 exe（在没有那么多优化的 c 中未优化）：

dl.dropbox.com/u/42887985/re29.zip

也许有人可以给我一个有点好的 fpu asm 例程，用于长度点（或标准化未在此处显示）？虽然相交过程的整个过程是最好的;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:44:12.997

这不是转换为 SSE 的“好”功能。实际上几乎没有什么是平行的。因此，让我们更改函数以一次与 4 条射线相交。如果光线也存储在[SOA（数组结构）](http://en.wikipedia.org/wiki/Parallel_array)而不是 AOS（结构数组）中，这将有所帮助。

通过这些更改，它可能会变成这样（未以任何方式测试）：

```
inline void intersect4RaysSphere(
 float* rOx, float* rOy, float* rOz,
 float* rVx, float* rVy, float* rVz,
 float sOx, float sOy, float sOz,
 float sR)
{
    // calculate Q
    movss xmm0, sOx
    movss xmm1, sOy
    movss xmm2, sOz
    shufps xmm0, xmm0, 0
    shufps xmm1, xmm1, 0
    shufps xmm2, xmm2, 0
    subps xmm0, [rOx]
    subps xmm1, [rOy]
    subps xmm2, [rOz]
    // calculate pow(dot(Q, rV), 2) in xmm3
    movaps xmm3, [rVx]
    movaps xmm4, [rVy]
    movaps xmm5, [rVz]
    mulps xmm3, xmm0
    mulps xmm4, xmm1
    mulps xmm5, xmm2
    addps xmm3, xmm4
    addps xmm3, xmm5
    movaps xmm4, xmm3
    mulps xmm3, xmm3
    // calculate pow(length(Q), 2)
    // there's no point in taking the square root only to then square it
    mulps xmm0, xmm0
    mulps xmm1, xmm1
    mulps xmm2, xmm2
    addps xmm0, xmm1
    addps xmm0, xmm2
    // calculate d
    movss xmm1, sR
    mulss xmm1, xmm1
    shufps xmm1, xmm1, 0
    subps xmm0, xmm3
    subps xmm1, xmm0
    sqrtps xmm1, xmm1
    // test for intersection
    // at this point:
    // xmm3 = v * v
    // xmm4 = v
    // xmm1 = sqrt(d)
    movaps xmm0, [minus1]  // memory location with { -1.0, -1.0, -1.0, -1.0 }
    subps xmm4, xmm1
    // get a mask of d's smaller than 0.0
    psrad xmm1, 31
    // select -1 if less than zero or v*v - d if >= 0
    andps xmm0, xmm1
    andnps xmm1, xmm4
    orps xmm0, xmm1
    ret
} 
```

* * *

具有内在函数的版本（仅经过轻微测试 - 它是可编译的，并且*似乎*可以生成 OK 程序集）：

```
__m128 intersect4RaysSphere(
     float* rOx, float* rOy, float* rOz,
     float* rVx, float* rVy, float* rVz,
     float sOx, float sOy, float sOz,
     float sR)
{
    __m128 Qx = _mm_sub_ps(_mm_set1_ps(sOx), _mm_load_ps(rOx));
    __m128 Qy = _mm_sub_ps(_mm_set1_ps(sOy), _mm_load_ps(rOy));
    __m128 Qz = _mm_sub_ps(_mm_set1_ps(sOz), _mm_load_ps(rOz));
    __m128 v = _mm_add_ps(_mm_mul_ps(Qx, _mm_load_ps(rVx)),
               _mm_add_ps(_mm_mul_ps(Qy, _mm_load_ps(rVy)),
                          _mm_mul_ps(Qz, _mm_load_ps(rVz))));
    __m128 vsquared = _mm_mul_ps(v, v);
    __m128 lengthQsquared = _mm_add_ps(_mm_mul_ps(Qx, Qx),
                            _mm_add_ps(_mm_mul_ps(Qy, Qy),
                                       _mm_mul_ps(Qz, Qz)));
    __m128 sr = _mm_set1_ps(sR);
    __m128 d = _mm_sub_ps(_mm_mul_ps(sr, sr), _mm_sub_ps(lengthQsquared, vsquared));
    __m128 mask = _mm_castsi128_ps(_mm_srai_epi32(_mm_castps_si128(d), 31));
    //__m128 result = _mm_or_ps(_mm_and_ps(_mm_set1_ps(-1.0f), mask),
                              _mm_andnot_ps(mask, _mm_sub_ps(vsquared, d)));
    __m128 result = _mm_or_ps(_mm_and_ps(_mm_set1_ps(-1.0f), mask),
                              _mm_andnot_ps(mask, _mm_sub_ps(v, _mm_sqrt_ps(d))));
    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:41:57.993

```
__asm
    {
    movaps xmm0,[float3] //this is vector of yours into xmm0
    mulps xmm0,xmm0       //this is each term squared
    pxor xmm1,xmm1       //clean xmm1 first
    movlhps xmm1,xmm0    //lower 2 terms to the higher 2 parts of xmm1
    addps xmm0,xmm1      //higher 2 terms of xmm0 now has x_square+z_square and  y_square + zero_square
    shufps xmm2,xmm0,0 //we copy y_square to all 4 elements of xmm2
    addps xmm0,xmm2     //now we have sum of all squares in highest of xmm0
    shufps xmm0,xmm0,11111111b // copy result to all 4 parts
    sqrtss xmm0,xmm0           //scalar square-root
    movaps [result],xmm0
    } 
```

这可能比完全优化慢，但对于向量长度计算应该足够快。需要对齐 16 字节的向量。如果您不想对齐，请将 movaps 更改为 movups。如果您可以使此代码正常工作，那么您可以通过放置来进一步提高性能

```
align 16 
```

在 movaps xmm0,[float3] 的开头使代码也对齐。然后您可以检查每个指令有多少字节。尝试达到最佳码长（16 字节的倍数）。在 sse2(sse3,sse4,avx) 之后，有垂直水平向量指令，只需要 1 条指令即可获得结果。

在第二条指令中将 mm0,xm​​m0 编辑为 xmm0,xm​​m0

这是一些清单：

[http://softpixel.com/~cwright/programming/simd/sse2.php](http://softpixel.com/~cwright/programming/simd/sse2.php)

# java - Java Swing 中正确的模型-视图-控制器模式

> ID：11793888
> 
> 赞同：2
> 
> 时间：2012-08-03T10:27:16.223
> 
> 标签：java, swing, model-view-controller, design-patterns, jtable

我最近开始在 Java 中使用 Swing 应用程序，目前主要使用 JTables。来自 .NET WPF 背景的世界，它使用 MVVM 设计模式进行了巨大的架构，我在 Swing 方面有点挣扎。原因是，使用 JTables 似乎有很多方法可以实现模型-视图-控制器模式（至少是我在查看可用类后的感受）。因此，我想分享一些可能的通用方法，这些方法在我的脑海中以及到目前为止我所看到的，以及收集您对这个问题的评论，这些评论可能适用于其他控件/应用程序：

1.  JTable <--> TableModel：在这种方法中，我们在某种意义上只有一个视图和一个模型。TableModel 具有有用的更新方法，例如 setValueAt，您可以在其中放置任何 UI 更新的处理代码，进而可以在模型更新时引发事件。我猜这是 DefaultTableModel 的默认实现。因此模型处理直接在单元格（数据）上进行的更新。View (JTable) 将在用作 View 的类后面的代码中注册任何进一步的处理程序。代码可能如下所示：

    类视图扩展 JPanel {

    ```
    public View(TableModel model) {
        super(new BorderLayout(1, 0));
        JTable table = new JTable(model) {

            //override anything you need here - renderers etc.

        };

        //add any listeners here
    }
    //Listeners that would perform actions on events, and possibly call model to update 
    ```

    我喜欢这个的是我们只有两个地方可以放代码，并且在实现中提供的 JTable 和 TableModel 之间有一个自然的联系，即 setValueAt 方法。不过，我*讨厌*的是，在我看来，完全无视 MVC 模式，在 MVVM 的情况下，你的代码结构非常出色

2.  JTable --> Controller <--> TableModel : 添加另一个层来执行逻辑我们现在将有一个中央控制器来实例化（或接收在构造函数中注入的）视图和模型。此外，它会在视图上注册任何侦听器，并且无论何时发生这种情况，我们都会在模型上调用一些更新方法。也许另一种方法是将事件从视图的注册处理程序*转发*到控制器，但这需要视图*了解*控制器......我猜事件的触发*返回到视图*当我们调用 update 方法时，它将保留在模型上，除非我们只是在表上调用 tableChanged 方法。然而，这破坏了事件机制的整体整洁性，这是在 TableModel 实现中免费提供的......这里必须考虑的进一步的事情是，我们需要在每次处理时注意从视图索引转换为模型索引视图中的事件（可能是我目前无法想到的其他考虑因素）

3.  JTable <--> TableModel --> BusinessModel：我们使用 TableModel 作为协调器，并将我们的业务知识保存在其他地方 到目前为止，我假设 TableModel 包含原始业务数据，例如以 List 的形式。现在我们可能会在 TableModel 上使用 setValueAt 方法 + 注册处理程序，这些处理程序随后会修改底层的 BusinessModel，封装 List。我唯一担心的是 TableModel真的*应该*是一个模型而不是控制器。

这些是我对此事的看法。我非常期待您的回复和评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:00:14.933

Swing MVC 模型，据我了解，它并没有严格地将视图与模型分开，即两者之间存在一些通信以避免不必要地通过控制器。当我使用它时，JTable 是视图，TableModel 是模型，而您的听众充当需要更多控制的事物的控制器，而不仅仅是“显示模型中的内容”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:55:37.480

澄清一下，Swing[*可分离模型架构*](http://www.oracle.com/technetwork/java/architecture-142923.html#separable)使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)*松散地*耦合模型和视图，如下[所示](https://stackoverflow.com/a/3072979/230513)。通常在内部使用，但[这里](https://stackoverflow.com/a/3072979/230513)提到了其他实现。UI 委托控制用户与视图的交互。这允许组件在不同的平台上正常工作，正如用户所感知的那样。[`EventListenerList`](http://docs.oracle.com/javase/8/docs/api/javax/swing/event/EventListenerList.html)

> 那么模型是通过特定的`Listener`接口向视图组件注册的吗？

不，每个模型都在[`EventListenerList`](http://docs.oracle.com/javase/8/docs/api/javax/swing/event/EventListenerList.html)内部维护一个；`addXxxListener()`每个对应的视图都通过模型的方法将自己添加为侦听器。大多数组件也`PropertyChangeLister`用于绑定属性。

# python - 自定义 django 管理模板不起作用

> ID：11793890
> 
> 赞同：19
> 
> 时间：2012-08-03T10:27:17.617
> 
> 标签：python, django, django-admin, django-templates

我一直在尝试为 Django 工作的管理页面获取自定义模板，但没有成功。我已经阅读了 django 文档和几个博客，它们解释它是一个如此简单的步骤，我认为它是。

截至目前，管理页面有效，但我自己重写的 CSS 或模板不起作用。我的设置如下

```
/project_folder/
      manage.py
      settings.py
      urls.py
      __init__.py
      /app/
          views.py
          models.py
          __init__.py
          /templates/
                /admin/
                    base_site.html 
```

在 urls.py 我有

```
(r'^admin/', include(admin.site.urls)), 
```

哪个有效，因为我无法登录等。所以我假设 /admin/base_site.html 会覆盖默认的，但它没有做任何事情。

有人知道这里发生了什么吗？我从 Django 教程/指南中关注它，并访问了一些博客，看看他们是否有答案，但他们都说了同样的话。

编辑 1：我的模板目录设置正确。

```
TEMPLATE_DIRS = (
    os.path.join(PROJECT_PATH, 'templates/'),
) 
```

这可以正常工作，因为我的站点的其余部分正在使用 CSS 等的媒体目录。唯一似乎不“接受”模板的是管理部分。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-03T10:45:29.623

好吧，我修复了它，这是一个愚蠢的错误，但过去 2 小时我已经在玩这个了。我必须在 django.contrib.admin 之前声明我的应用程序。否则它不会接受。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-11-23T13:52:56.843

在此练习中应该避免犯的另一个错误。练习说要改变这个......

```
<h1 id="site-name"><a href="{% url 'admin:index' %}"> {{ site_header|default:_('Django administration') }} </a></h1> 
```

对这个……

```
<h1 id="site-name"><a href="{% url 'admin:index' %}">Polls Administration</a></h1> 
```

有一种只改变字符串常量的诱惑，但这是不正确的。即不要这样做，它不会改变标题：

```
<h1 id="site-name"><a href="{% url 'admin:index' %}"> {{ site_header|default:_('Polls Administration') }} </a></h1> 
```

那是我犯的错误，我必须仔细地完成练习才能修复它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-23T01:42:00.263

在 Django 教程的第二部分中执行[此步骤](https://docs.djangoproject.com/en/1.6/intro/tutorial02/#customizing-your-project-s-templates)时，我无法识别管理模板。

这就是我解决它的方法：

使用[此答案](https://stackoverflow.com/questions/8885541/how-can-i-print-the-value-of-template-dirs-from-the-django-interactive-shell)中的信息，我打印了以下值`TEMPLATE_DIRS`：

1.  在命令行中，导航到项目`settings.py`文件所在的目录（对我来说是`R:\jeffy\programming\sandbox\python\django\tutorial\mysite\mysite\`）
2.  启动交互式外壳：`python`
3.  `>>> import settings`
4.  `>>> settings.TEMPLATE_DIRS`, 输出`['R:\\jeffy\\programming\\sandbox\\python\\django\\tutorial\\mysite\\templates']`

所以这是该项目的模板目录的预期位置。管理目录进入该目录，`base_site.html`文件进入该目录。

我遇到的另一个问题是它*正在*工作，但我只是改变了这个`<TITLE>`领域，所以我没有注意到它。（我以为我正在更改主标题。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-29T21:55:01.603

我在浏览 Django 1.6.5 教程（[https://docs.djangoproject.com/en/1.8/intro/tutorial02/](https://docs.djangoproject.com/en/1.8/intro/tutorial02/)）时遇到了同样的问题，但意识到不仔细阅读是个错误。您所做的教程是将其放入您的 settings.py 中：

```
TEMPLATES = [
  {  
      ...
     'DIRS': [os.path.join(BASE_DIR, 'templates')],
      ...
  } 
```

然后，我将要为管理站点覆盖的模板文件夹放在应用程序下，就像您的示例一样：

```
/project_folder/
      manage.py
      settings.py
      urls.py
      __init__.py
      /app/
          views.py
          models.py
          __init__.py
          /templates/
                /admin/
                    base_site.html 
```

`DIR`由于与 Daniel Roseman 在其中一个评论中提到的问题类似，我正在评估`project_folder/templates`（正如我告诉它的那样），因此它不会起作用。然后我注意到在教程中明确说将`templates/admin`文件夹放在项目级别，而不是应用级别：

> 在您的项目目录（包含 manage.py 的目录）中创建一个模板目录。模板可以存在于 Django 可以访问的文件系统上的任何位置。（Django 以服务器运行的任何用户身份运行。）但是，将模板保留在项目中是一个很好的约定。

通过这样做，我有以下结构：

```
/project_folder/
      manage.py
      settings.py
      urls.py
      __init__.py 
      /templates/
          /admin/
              base_site.html
      /app/
          views.py
          models.py
          __init__.py 
```

有了这个，一切都按预期工作（我可以覆盖管理页面的默认 django 模板）。

虽然您应该能够将模板放在任何地方并配置 Django 来查找它们，但将主管理模板放在项目级别似乎是有意义的，因为管理站点不是特定于应用程序的，但可用于整个项目。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-03T10:34:41.673

确保您已设置[`TEMPLATE_DIRS`](https://docs.djangoproject.com/en/dev/ref/settings/#template-dirs)到`settings.py`正确的文件夹！

# html - 如何使用来自 html 链接的参数调用 asp 页面？

> ID：11793891
> 
> 赞同：0
> 
> 时间：2012-08-03T10:27:19.843
> 
> 标签：html, asp-classic

我正在尝试从 html 链接调用 asp 页面，但使用参数。那可能吗？

```
<li><a href="#" onclick="<% Response.redirect("myurl with parameters")%>">Caducados</a></li> 
```

我知道为什么这会失败，但有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:33:26.723

您可以在常规链接中传递它们；

```
 <a href="page.asp?a=b&c=<%=serverval %>&d=e">Caducados</a> 
```

如果您需要客户端处理

```
 <a href="#" onclick="goTo('val1', '<%=serverval %>');">Caducados</a> 
```

和一个 js 助手；

```
 function goTo(a,b) {
   location.href = "page.asp?a=" + a + "&b= .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:32:33.167

我认为你正在尝试做这样的事情：

```
<li><a href="mypage.asp?param1=value1&param2=value2">Caducados</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:51:15.047

这是答案。感谢 Alex K 和我的另一个我

```
<% 
  id_usuario= Request.QueryString("usuario")
%>
<script type="text/javascript">

    function goTo () {
    var a = <%=id_usuario%>
    alert(a)        
    }
</script> 
```

然后从 html 链接中的 onclick 事件调用 goTo 函数

# python - 使用修补线程与原生 gevent greenlets 的缺点？

> ID：11793894
> 
> 赞同：5
> 
> 时间：2012-08-03T10:27:25.663
> 
> 标签：python, gevent, python-multithreading

我的理解是，一旦我调用了 gevent.monkey.patch_all()，标准线程模块就被修改为使用 greenlets 而不是 python 线程。因此，如果我根据 python 线程、锁、信号量等编写我的应用程序，然后调用 patch_all，我是否获得了 gevent 的全部好处，或者与使用显式 gevent 等价物相比，我是否失去了一些东西？

这个问题背后的动机是我正在编写一个使用一些线程/greenlets的模块，我正在决定在使用gevent和使用线程之间进行显式切换是否有用，或者我是否可以只使用threading+patch_all而不会丢失任何事物。

把它放在代码中，这是...

```
def myfunction():
  print 'ohai'

Greenlet.spawn(myfunction) 
```

……和这个有什么不同吗？

```
import gevent.monkey
gevent.monkey.patch_all()
def mythread(threading.Thread):
  def run(self):
    print 'ohai'

mythread().start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:31:51.620

至少你会失去一些特定于greenlet的方法：链接、杀死、加入等。你也不能使用线程，例如，gevent.pool 模块，这可能非常有用。并且创建 Thread 对象的开销很小。

# python - 用 +python 重新编译 vim

> ID：11793895
> 
> 赞同：0
> 
> 时间：2012-08-03T10:27:29.657
> 
> 标签：python, vim, omnicomplete

当我尝试在 .py 文件中使用omnicomplete 时，vim 说我需要编译带有+python 支持的vim。我已经在我的 vimfiles 中下载了一堆带有病原体的插件，那么如何在不丢失设置的情况下重新编译带有 +python 支持的 vim 7.3？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:40:26.930

如果您重新编译，您的设置不会丢失`vim`：重新编译只会创建一个新的`vim`可执行文件。但是，如果您使用的是通用 Linux 发行版，则可能不需要编译任何东西：例如，Archlinux 在 gvim 包中捆绑了“使用 +python 编译的 vim”。你的发行版可能会做类似的事情。

# asp.net - 用于管理 Membership 、 Role 和 Profile 的 ASP.NET MVC 项目

> ID：11793901
> 
> 赞同：3
> 
> 时间：2012-08-03T10:27:55.600
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership, asp.net-roles

每个人都知道在大多数 ASP.NET 项目中使用 Membership 、 Roles 和 Profiles 是很常见的。

我正在寻找一个简单的项目来为最终用户使用 UI 执行此活动。如“添加用户”、“添加角色”、“将用户分配给角色”等。

最好是 MVC[3] 中的解决方案。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:20:31.570

我不久前看到了 Brady Gaster 的这篇文章，它可能很适合您的需求 - 在 ASP.NET MVC 3 中实现自定义成员资格提供程序。

[http://www.bradygaster.com/custom-authentication-with-mvc-3.0](http://www.bradygaster.com/custom-authentication-with-mvc-3.0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T20:45:52.880

这是另一个不错的选择：
[SecurityGuard](http://www.mvccentral.net/Story/Details/tools/kahanu/securityguard-nuget-package-for-asp-net-membership)

SecurityGuard 是一个完整的 ASP.NET MVC 3 和现在的 MVC 4 beta 应用程序，可通过 NuGet 安装。如果您需要一种完整的方法来管理您的 MVC 应用程序的 ASP.NET 成员资格系统，那么这是要使用的 NuGet 包。

# android - 即使在销毁活动后，内存中的 Android 活动实例

> ID：11793902
> 
> 赞同：0
> 
> 时间：2012-08-03T10:27:59.760
> 
> 标签：android, android-activity

Eclipse MAT 直方图显示 SplashActivity 实例即使在启动 MemTweaksActivity 之后仍然存在。有人对此有任何想法吗？

公共类 SplashActivity 扩展 Activity{

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    new Timer().schedule(new TimerTask() {

                @Override
                public void run() {
                    Intent i = new Intent(getApplicationContext(), MemTweaksActivity.class);
                    startActivity(i);
                    finish();

                }
            },2000);

} 
```

}

但是下面的代码没有任何计时器成功地删除了 SplashActivity 实例。MAT 显示 0 个 SplashActivity 实例。

```
Intent i = new Intent(getApplicationContext(), MemTweaksActivity.class);       startActivity(i); finish(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:13:11.067

为生命周期调用和 SplashActivity 添加`onPause()`日志`onStop()`记录`onDestroy()`。您将看到这些在 MemTweaksActivity 运行之前/之后的某个时间点被调用。垃圾收集器会在需要时从内存中删除 SpashScreen 活动。你不能强迫这种情况发生。

**编辑：**

SplashScreenActivity 仍然存在的原因是因为您没有清理 Timer。

做这个：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final Timer timer = new Timer();
    timer.schedule(new TimerTask() {        
        @Override
        public void run() {
            Intent i = new Intent(getApplicationContext(), MemTweaksActivity.class);
            startActivity(i);
            finish();
            // Release timer resources
            timer.cancel();         
        }
    },2000);
} 
```

# ajax - 可读的 Django ajax 请求错误

> ID：11793907
> 
> 赞同：0
> 
> 时间：2012-08-03T10:28:22.660
> 
> 标签：ajax, django

在 Django 中有可读的 ajax 视图错误的最佳方法是什么？

我可以在 Chrome 的“响应”选项卡中阅读它们，但只能以纯文本形式阅读，并且 Django 的标准错误页面上的许多信息都丢失了。

我找到了 Django-Ajaxerror 并修复了它以在 Windows 下运行，但它仍然无法正常工作。在 Django 世界中，每个人都如何处理这个问题？

# android - 为什么android使用声明式设计？

> ID：11793910
> 
> 赞同：0
> 
> 时间：2012-08-03T10:28:33.823
> 
> 标签：android

在android中，我们可以通过两种方法设计用户界面：*Procedural*和*declarative*。在程序中，我们在程序中编写代码来设计界面，就像在摇摆中一样。在声明式设计中，我们在文件`res`夹下的 XML 文件中进行。例如，使用`<Button>`标签在 res-->layout-->main.xml 中创建按钮。声明式设计是两者中更受欢迎的方法。

所以，我的问题是为什么更喜欢通过声明进行设计。通过 XML 设计接口的效率有多高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:37:46.417

  根据文档，在 XML 中声明 UI 的优势在于，它使您能够更好地将应用程序的表示与控制其行为的代码分开。您的 UI 描述在您的应用程序代码之外，这意味着您可以修改或调整它，而无需修改源代码并重新编译。例如，您可以为不同的屏幕方向、不同的设备屏幕尺寸和不同的语言创建 XML 布局。此外，在 XML 中声明布局可以更轻松地可视化 UI 的结构，从而更容易调试问题。你可以通过这个了解[更多](http://developer.android.com/guide/topics/ui/declaring-layout.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:41:56.877

XML 布局相对于 Java 代码的一些优势如下：

*   轻松引用字符串、可绘制对象、尺寸、主题等。
*   自动支持多种配置。在不更改代码的情况下，您只需在 layout-land/ 和 layout-port/ 中使用 XML 布局，就可以拥有不同的横向和纵向布局。您可以这样做以使布局适应不同的分辨率、语言、密度、大小等。
*   XML 代码通常比相应的 Java 代码更短且更易于理解，并且在未来版本中更改的可能性较小。
*   更多在[这个](http://www.techotopia.com/index.php/Creating_an_Android_User_Interface_in_Java_Code)链接。

# drupal - 在表单提交检查用户登录或未登录drupal 7

> ID：11793914
> 
> 赞同：1
> 
> 时间：2012-08-03T10:28:54.840
> 
> 标签：drupal, login

我需要你的帮助。我有 drupal 7 cck 表单，匿名用户可以查看，但是当匿名用户填写表单并单击提交时，我想显示用户登录表单，登录后不刷新页面 cck 表单将自动提交并显示感谢信息。我为此搜索了很多，但没有得到任何解决方案。请帮助我，我不明白该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:20:02.730

您可以编写一个使用 form_alter 钩子的自定义模块。然后对于您的 CCK 表单，您可以检查用户是否已登录，如果没有，请在表单中添加用户名/密码字段以供用户填写。然后向表单添加自定义验证功能，以便在提交表单时您的验证功能尝试以编程方式登录用户。如果登录失败，则显示表单错误，否则将全局用户设置为登录用户。因此，当表单点击其提交功能时，用户应该已登录。

所以你的自定义模块是这样的：

```
<?php
function mymodule_form_alter(&$form,&$form_state,$form_id){
    global $user;
    //only for the form we are looking for, and if the user is anonymous
    if (($form_id == 'my_form_id') && ($user->uid==0)){
        $form['login']  = array(
            '#type' => 'fieldset',
            '#title'    => 'Login',
        );
        $form['login']['username'] = array(
            '#type' => 'textfield',
            '#title' => 'Username',
            '#required' => true,
        );
        $form['login']['password'] = array(
            '#type' => 'password',
            '#title'    => 'Password',
            '#required' => true,
        );

        $form['#validate'][] = 'mymodule_my_form_validate';
    }
}

function mymodule_my_form_validate(&$form,&$form_state){
    global $user;

    //stop from re-login if there were other validation errors
    if ($user->uid == 0){
        $username = $form_state['values']['username'];
        $password = $form_state['values']['password'];
        //authenticate the user (attempt to login)
        if ($uid = user_authenticate($username,$password)){
            $user = user_load($uid);
            //finalize login
            user_login_finalize(array('name'=>$username,'pass'=>$password));
        }else{
            form_set_error('username','Invalid username or password');
        }
    }
} 
```

# css - Wordpress 主题设计问题

> ID：11793917
> 
> 赞同：0
> 
> 时间：2012-08-03T10:29:09.463
> 
> 标签：css, wordpress, themes

我的网站构建（图形设计）紧凑。因为我的背景在重复、固定或底部有白色/黑色渐变时看起来不太好。问题是，由于我网站的图形性质，我需要有一个固定的内容区域。一个盒子，必须始终保持相同的大小。所以，我的问题是，我能否以这样的方式使用 wordpress，在我的内容区域内获得一种 iframe，而内容区域不会拖拽内容多长时间？让我给你看一个我想要的例子： http: [//s15.postimage.org/obk0ivffv/2352366d.png](http://s15.postimage.org/obk0ivffv/2352366d.png)

这可以在 wordpress 中完成吗？通过 CSS 什么的？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:33:48.347

只需将您的内容包装在一个 div 中，并使用 css 在该容器上设置一个 max-height 和 overflow-y:scroll。

编辑：小提琴示例 [http://jsfiddle.net/Kncy6/](http://jsfiddle.net/Kncy6/)

# android - android 2.2 应用程序无法在 android 4.0 中运行

> ID：11793919
> 
> 赞同：3
> 
> 时间：2012-08-03T10:29:15.157
> 
> 标签：android, android-emulator

我正在开发 android 2.2 froyo 应用程序。当我运行我的应用程序 android 2.2,3.0 时完美运行。但是当我在 android 4.0 及更高版本上运行时，我给出了一个错误。不幸的是，应用程序已停止。请帮助我如何解决错误。

```
08-03 16:19:36.602: E/AndroidRuntime(581): FATAL EXCEPTION: main
08-03 16:19:36.602: E/AndroidRuntime(581): java.lang.IllegalArgumentException: Window type can not be changed after the window is added.
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.os.Parcel.readException(Parcel.java:1331)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.os.Parcel.readException(Parcel.java:1281)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.view.IWindowSession$Stub$Proxy.relayout(IWindowSession.java:634)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.view.ViewRootImpl.relayoutWindow(ViewRootImpl.java:3586)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1185)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.os.Looper.loop(Looper.java:137)
08-03 16:19:36.602: E/AndroidRuntime(581):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-03 16:19:36.602: E/AndroidRuntime(581):  at java.lang.reflect.Method.invokeNative(Native Method)
08-03 16:19:36.602: E/AndroidRuntime(581):  at java.lang.reflect.Method.invoke(Method.java:511)
08-03 16:19:36.602: E/AndroidRuntime(581):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-03 16:19:36.602: E/AndroidRuntime(581):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-03 16:19:36.602: E/AndroidRuntime(581):  at dalvik.system.NativeStart.main(Native Method) 
```

Logcat
错误就像：不幸的是应用程序已停止

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T10:05:03.900

检查您的活动/活动中是否有此代码

```
 @Override
    public void onAttachedToWindow()
    {  
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();  
    } 
```

这是早期 Android 版本中的一个安全漏洞，可用于将用户锁定在应用程序中并阻止他使用主页按钮。这在 Android 4 及更高版本上已修复，使用它会给您看到您看到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:56:18.983

如果没有任何示例代码，我们将很难判断问题出在哪里。但是，既然您提到了版本控制...

1：在您的 AndroidManifest.xml 文件中，确保您的最低 SDK 设置为级别 8 (Froyo)，目标设置为 15 (ICS)，或者更好的是 16 (Jelly Bean)。像这样的东西：

```
<manifest ...>
...
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application>
...
</application>
</manifest> 
```

2：如果您使用的是Eclipse，请右键单击您的项目--> Properties --> Android --> Project Build Target。检查什么 API 级别？理想情况下，这应该是最新版本的 Android，即 Jelly Bean，但对于您的情况，Android 4.0.3 可以。如果您的系统中没有安装该 API 级别的 SDK，我不确定您是否可以针对它进行编译。确保您已安装目标 API 级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:29:28.753

我本可以在上面发表评论，但我没有足够的声誉。

也许您的应用程序与 15 的 API 级别不兼容。前段时间我做了类似的事情，但是当我尝试自定义标题栏时。随着 Google 在新框架中不断改进和增强，打破 API 级别很容易。您的问题的解决方案是添加一个兼容包，该包可在 Android 开发人员的网站上找到。但我们还需要知道您的真正问题是什么，以表明您的问题是否有兼容包。发布您的代码，也许我们可以有效地帮助您。

# c# - 如何按 5000 个元素对节点进行分组

> ID：11793920
> 
> 赞同：0
> 
> 时间：2012-08-03T10:29:16.390
> 
> 标签：c#, xslt

我有一个很大的 xml 文件。

```
<Users>
 <User id="2" name="ABC">
   <Data>text</Data> 
 </User>
 <User id="3" name="xyz">
   <Data>text</Data> 
 </User> 
 <User id="4" name="LMN"> 
   <Data>text</Data> 
 </User>
 ...
</Users> 
```

我需要按 5000 分组节点来拆分它。有些像这样：

```
<xsl:for-each-group select=" " group-by="by 5000">
  <xsl:result-document method="xml" href="file_{@somename}-output.xml">
   <xsl:copy-of select="."/>
  </xsl:result-document>
</xsl:for-each-group> 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:43:45.717

怎么样

```
<xsl:for-each-group group-starting-with="*[position() mod 5000 = 1]"> 
```

这是假设您要分组的节点是兄弟节点，并且不与其他节点混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:43:51.540

尝试以下方法：

```
<xsl:template match="Users">
  <xsl:for-each-group select="User" group-by="(position() - 1) idiv 5000">
    <xsl:result-document href="file{current-grouping-key()}.xml">
      <Users>
        <xsl:copy-of select="current-group()"/>
      </Users>
    </xsl:result-document>
  </xsl:for-each-group>
</xsl:template> 
```

# c - 这段代码行是做什么的？

> ID：11793921
> 
> 赞同：1
> 
> 时间：2012-08-03T10:29:17.227
> 
> 标签：c, int, sizeof

嗨，我是 C 编程的新手，谁能告诉我这行代码会做什么：

```
i = (sizeof (X) / sizeof (int)) 
```

当代码接受 bdata 的值并将其与不同的情况进行比较时，该代码实际上与 case 语句一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:45:17.910

通常，这样的语句用于计算数组中的元素个数。

让我们考虑一个整数数组，如下所示：

```
int a[4]; 
```

现在，`sizeof(a)`完成后它将返回`4*4 = 16`大小。4 个元素，每个元素为 4 个字节。

所以，当你这样做时`sizeof(a) / sizeof(int)`，你会得到 4 ，这是数组的长度或大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:30:20.337

它计算`int`named数组的元素数`X`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:30:51.640

返回数组 X 的长度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:33:09.503

它计算 X 在内存中的体积除以计算机中整数的大小（2 字节或 4 字节）。如果 i 是整数，则它是整数除法。如果它是浮点数并且 X 没有偶数，则它是真正的除法。

int 大小可以改变。X 取决于实现。除法结果取决于 i 的类型。

所有这些意味着，它计算有多少 int 适合 X。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:06:35.170

除了常见的实践或个人经验，没有理由认为这会`i = (sizeof (X) / sizeof (int))`计算数组 X 的大小。大多数情况下可能是这种情况，但理论上 X 可以是任何类型，因此给定的表达式将计算大小的比率你的 var X 和一个 int （你的 X var 相对于一个 int 占用了多少内存，以字节为单位）

此外，如果 X 是指向数组的指针（float* X，在 C 中声明数组的另一种方式），则此表达式在 32 位架构上的计算结果为 1。指针是 4 个字节，int 也是 4 个字节 =>`i = sizeof(X) / sizeof(int) (=1)`

# c# - 编译器如何处理这些通用插件接口实例方法？

> ID：11793925
> 
> 赞同：1
> 
> 时间：2012-08-03T10:29:30.630
> 
> 标签：c#, generics, plugins, csc

我正在使用一些不幸的是大部分未记录的现有代码，并且我无法理解它如何调用它加载的插件的方法。

我目前的目标只是进入通过插件管理器加载的方法之一，因为它会导致异常。但是，我必须从源代码重建 pluginManager 以获取调试符号，并且当我引用这个新的 DLL 版本时，编译器会抛出武器。

该代码似乎将插件加载到`plug.Instance`其中，然后像这样访问特定方法`plug.Instance.ReturnLeaNumber();` 这个编译器错误是有道理的，因为它不知道插件的详细信息。让我困惑的是编译器是如何知道这些在运行时之前有效的，当时没有插件被初始化。我可以单步调试旧 DLL 现在无法使用的代码！

这是程序加载插件的示例。

```
plug = GenericServicePlugins.AvailablePlugins.Find(Application.StartupPath + "\\Dlls\\SchoolInterface.dll");
// Compiler doesn't like this next line anymore though
plug.Instance.Initialize(null, null); 
```

如果我重建的库和以前工作的库之间有任何差异，我无法判断版本与我们的源代码控制中的版本如何匹配。将不胜感激一些关于从哪里开始寻找的建议！

```
public interface IGenericPluginMasterInterface
{
    String returnName();
    void Initialize(ExceptionStringResources.Translate ExceptionStrings);
    Object ExecuteFunction(String macAddress, bool log, String functionName, LoginCredentials logonCredentials, WebConfiguration webConfig,
                           Int64 dataLinkId, DataLinkParam[] dataLinkParams, String dataName, 
                           DataParam[] dataParams, Object[] additionalParams);
} 
```

[PasteBin 上的其余管理器代码](http://pastebin.com/RkmDkfzJ)

编译器如何在运行前知道这些`plug.Instance.Method()`方法？

编辑：

我还没有完全解决这个问题，但是我错过了一个“PluginsService”文件，它部分反映了“GenericPluginServices”。我认为这个错误可能是由于我删除了与我正在研究的现已失效的插件相关的此类的部分内容。但是我认为发布这个其他代码片段会帮助解决这个问题。

[PluginService.cs 代码](http://pastebin.com/WQbvjD5u) [GenericPluginService 代码](http://pastebin.com/Gqsd6Dwd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:40:08.643

`Find`返回`AvailablePlugin`，所以`.Instance`是类型`IGenericPluginMasterInterface`；如果是这样，确实；这`.Instance.ReturnLeaNumber()`不可能工作...

唯一可行的方法*（*不引入一些泛型等）是如果`.Instance`实际返回`dynamic`。`dynamic`名称/方法解析发生在**运行时**。编译器`dynamic`非常谨慎地处理，例如基于反射（对于简单情况）或`IDynamicMetaObjectProvider`（对于更复杂的情况）将所有解决方案推迟到运行时。

但是，如果您拥有的代码与编译的不匹配，那么：我们无法告诉您它是什么。IMO，最好的选择是获取**正在工作**的dll，并在反射器中查看它以查看它实际在做什么，以及它与您拥有的源代码有何不同。

实际上，严格来说，它仍然可以使用您粘贴的代码执行此操作，但前提`plug`是键入为`dynamic`，即 `dynamic plug = ...`

# c# - 从页脚在现有 GridView 中插入新行（包含下拉菜单和 + 按钮）

> ID：11793927
> 
> 赞同：1
> 
> 时间：2012-08-03T10:29:39.783
> 
> 标签：c#, datagridview

我有一个案例，我正在显示使用 linq 与数据源绑定的 gridview。在 GridView 的页脚中，我有一个选项可以从 2 个下拉列表中选择值，然后单击添加按钮和添加按钮，我在 DB 中添加数据并显示来自 DB 的数据。实际上我需要的是在添加按钮上它必须添加到gridview。如果 gridviewrowbound 为空，则用户从页脚中选择并添加。

我有另一个更新按钮，更新时我想将更改保存到数据库

我试过 DataTable 但做不到。

# wpf - 在代码中添加资源并将其用作 StaticResource

> ID：11793928
> 
> 赞同：0
> 
> 时间：2012-08-03T10:29:41.060
> 
> 标签：wpf, xaml, mvvm

出于某种原因，我无法在某些控件上绑定到 DataTemplates 中的 ViewModel 属性。绑定本身的结果是不可预测的，有时有效，有时无效。出于这个原因，除了将 ViewModel 设置为 DataContext 之外，我还考虑以其他方式公开 ViewModel。

第一个想法是将 ViewModel 添加到资源集合中。我在 UI 中使用 TabControls，所以每当需要显示视图时，都是通过数据模板完成的。

```
<DataTemplate DataType="{x:Type vm:SomeViewModel}">
    <vw:SomeView />
</DataTemplate> 
```

在这种情况下，视图会自动实例化，并且其 DataContext 设置为模板中设置的 ViewModel。有没有办法让这个 ViewModel 可用于 View 的资源（例如 key=viewModel），这样我就可以像这样使用它：

```
<TextBlock Text="{Binding SomeProperty, Source={StaticResource viewModel}}" /> 
```

我已经尝试将它添加到代码中，在视图的 Loaded 事件中：

```
this.Loaded += (s, e) =>
{
    this.Resources.Add("viewModel", this.DataContext);
}; 
```

上面的代码在运行时没有找到静态资源的错误弹出之前执行，因此资源被添加到集合中。

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:50:07.667

您可以将 ViewModel 定义为 XAML 中的资源，如下所示：

```
<vm:SomeViewModel x:Key="ViewModel"/> 
```

如果要在 DataTemplate 中绑定到 DataContext，可以使用以下命令：

`{Binding Path=DataContext, ElementName=uc}`

假设您的窗口/用户控件名称是 x:Name="uc" ，或者如@stukselbax 所写：

```
{Binding Path=DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=[UserControl|Window]}} 
```

# magento - 何时使用自定义集合名称

> ID：11793930
> 
> 赞同：0
> 
> 时间：2012-08-03T10:29:58.177
> 
> 标签：magento

在 Magento 中，我知道您可以执行以下操作来获取集合：

```
Mage::getResourceModel('module/model_collection'); 
```

和

```
Mage::getModel('module/model)->getCollection(); 
```

这一切都源于您可以为收藏提供自己的自定义名称

例如：`Mage::getResourceModel('module/model_blahblahblah');`

所以`getCollection`会自动为你找到。

我的问题是你什么时候真正想使用'blahblahblah'而不是'collection'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:22:23.573

“正常”资源模型和集合之间的区别是：

*   “正常”资源模型 -> 扩展自`Mage_Core_Model_Resource_Db_Abstract`（对于平面类型，版本 1.6.0.0 ++）。主要用于连接你的数据库，比如获取数据/保存数据到数据库
*   集合 -> 扩展自`Mage_Core_Model_Resource_Db_Collection_Abstract`（对于平面类型）。它主要用于获取数据的“列表”。eg：获取订单列表

所以对于你的问题：你什么时候真正想使用'blahblahblah'而不是'collection'

对此没有确切的答案。不必使用名称`collection`来获取数据列表。您可以`blahblahblah`根据需要使用，但当然最好遵守约定（Magento 的方式）。

将其命名为集合将为“普通”人提供与集合相关的图片（集合通常与列表相关，在我们的例子中它是数据/对象/等的列表）。如果他们看到会发生什么：`Mage::getResourceModel('module/model_blahblahblah');`可能`blahblahblah`太奇怪而无法被其他人理解（尽管名称不会像 一样极端`blahblahblah`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:42:26.280

如果你想改变你的集合类： 那么你可以使用
`Namespace_Module_Model_Mysql4_Module_Collection`
获取集合的方法。那有帮助吗？
`Namespace_Module_Model_Mysql4_Module_Blahblahblah`
`Mage::getResourceModel('module/model_blahblahblah')`

# android - 在 ArrayAdapter 中交换两行

> ID：11793935
> 
> 赞同：1
> 
> 时间：2012-08-03T10:30:12.933
> 
> 标签：android

我创建了一个 ListView，每行都有一个带有向上和向下箭头的按钮。按下这些按钮可使行向上或向下移动一个位置。

我通过在覆盖方法 getView 中为两个按钮实现 OnClickListener 来实现它。它可以正常工作，但是我对此感到不满，因为它似乎非常消耗内存并且大量代码加倍。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    View rowView = inflater.inflate(R.layout.row_layout, parent, false);

    TextView textView = (TextView) rowView.findViewById(R.id.label);
    CheckBox checkBox = (CheckBox) rowView.findViewById(R.id.checkbox);
    checkBoxes.add(position, checkBox);

    String address = this.getItem(position).getAddress();
    String tokenizedAddress = tokenizeAddress(address);

    textView.setText(tokenizedAddress);

    ImageButton buttonUp = (ImageButton)rowView.findViewById(R.id.button_up);
    ImageButton buttonDown = (ImageButton)rowView.findViewById(R.id.button_down);

    buttonUp.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            ListAdapter adapter = ListAdapter.this;

            if(position != 0 ){
                GameTask current = adapter.getItem(position);

                ArrayList<GameTask> list = new ArrayList<GameTask>();
                for( int i = 0; i < adapter.getCount(); i++ )
                    list.add(adapter.getItem(i));
                list.remove(position);
                list.add(position-1, current);
                adapter.clear();
                for( int i = 0; i < list.size(); i++ ){
                    adapter.add(list.get(i));
                }
                adapter.notifyDataSetChanged();
            }

        }
    });

    buttonDown.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            ListAdapter adapter = ListAdapter.this;

            if(position != adapter.getCount()-1 ){
                GameTask current = adapter.getItem(position);

                ArrayList<GameTask> list = new ArrayList<GameTask>();
                for( int i = 0; i < adapter.getCount(); i++ )
                    list.add(adapter.getItem(i));
                list.remove(position);
                list.add(position+1, current);
                adapter.clear();
                for( int i = 0; i < list.size(); i++ ){
                    adapter.add(list.get(i));
                }
                adapter.notifyDataSetChanged();
            }

        }
    });

    return rowView;
} 
```

两个侦听器的操作几乎相同，唯一的区别是移位 +1/-1 的条件和值。我想知道如何在扩展的 ArrayAdapter 类中创建实现 OnClickListener 的内部类，但是我不知道如何将单击的行的位置传递给这个内部类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:51:33.330

无需从 ArrayList 中添加和删除元素，您可以更好地实现[`Collections.swap(List list, int firstElementIndex, int secondElementIndex)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)它，因为您不必遍历整个 Collection。可以找到一个简单的例子[`here`](http://examples.javacodegeeks.com/core-java/util/collections/swap-list-elements-example)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:44:43.237

您可以创建一个可供`buttonUp`和使用的方法`buttonDown`。此方法可以将按下的操作类型 (UP/DOWN) 和项目在 ListView 中的位置作为参数，然后在传递适当操作的两个单击侦听器中调用此方法。

例子：

```
// 2 new constants
private static final int UP = 0;
private static final int DOWN = 1;

// Based on "type", increment or decrement the position.

private void changeRow(int type, int position){
        if(type==UP){
                position=position-1;
        }else if(type==DOWN){
                position=position+1;
        }

        // ........

        // Then in your "for" cicle you specify:
        list.add(position, current);

       // ........
} 
```

然后在`buttonUp`您指定的 onClick() 方法中：

```
changeRow(UP, position); 
```

和`buttonDown`：

```
changeRow(DOWN, position); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:50:45.593

这很容易实现

这样做的方法是将要显示的数据存储在`List`

然后当用户单击向上或向下箭头时

使用移动位置交换数据项的引用[`Collections.swap(List, int, int)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)

然后调用[`notifyDataSetChanged`](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)适配器

# apache-flex - Youtube 像带有火花擦洗条的时间线

> ID：11793941
> 
> 赞同：0
> 
> 时间：2012-08-03T10:30:34.823
> 
> 标签：apache-flex, actionscript

我想将我当前的 Scrubbar 转换为类似时间线的 youtube。就像当您将滚动条悬停在某个时间点时，会显示一个缩略图。此外，该点在擦洗条上应该有不同的颜色。

这是可能的还是我需要使用另一个组件以及如何使用？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:44:55.793

Google 在添加视频时会做一些额外的工作。他们生成这些缩略图。和他们提前。这就是为什么您可以看到尚未加载的视频部分的缩略图的原因。如果您想自己制作一个，则需要为您将使用的每个视频生成缩略图。一个想法是将时间码包含在文件名中。因此，对于一个名为 MyVideo 的 flv，您将对 MyVideo001.jpg 竖起大拇指一秒钟，以此类推。

# shell - 删除 bash 中匹配前后的行（使用 sed 或 awk）？

> ID：11793942
> 
> 赞同：8
> 
> 时间：2012-08-03T10:30:43.533
> 
> 标签：shell, sed, awk

我正在尝试从充满事务的文件中删除模式匹配两侧的两行。IE。找到匹配然后删除它之前的两行，然后删除它之后的两行，然后删除匹配。将其写回原始文件。

所以输入数据是

```
D28/10/2011
T-3.48
PINITIAL BALANCE
M
^ 
```

我的模式是

```
sed -i '/PINITIAL BALANCE/,+2d' test.txt 
```

但是，这只是在模式匹配后删除两行，然后删除模式匹配。我想不出任何合乎逻辑的方法来使用 sed 从原始文件中删除所有 5 行数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T10:52:47.767

一个 awk one-liner 可以完成这项工作：

```
awk '/PINITIAL BALANCE/{for(x=NR-2;x<=NR+2;x++)d[x];}{a[NR]=$0}END{for(i=1;i<=NR;i++)if(!(i in d))print a[i]}' file 
```

测试：

```
kent$  cat file
######
foo
D28/10/2011
T-3.48
PINITIAL BALANCE
M
x
bar
######
this line will be kept
here
comes
PINITIAL BALANCE
again
blah
this line will be kept too
########

kent$  awk '/PINITIAL BALANCE/{for(x=NR-2;x<=NR+2;x++)d[x];}{a[NR]=$0}END{for(i=1;i<=NR;i++)if(!(i in d))print a[i]}' file
######
foo
bar
######
this line will be kept
this line will be kept too
######## 
```

**添加一些解释**

```
 awk '/PINITIAL BALANCE/{for(x=NR-2;x<=NR+2;x++)d[x];}   #if match found, add the line and +- 2 lines' line number in an array "d"
      {a[NR]=$0} # save all lines in an array with line number as index
      END{for(i=1;i<=NR;i++)if(!(i in d))print a[i]}' #finally print only those index not in array "d"
     file  # your input file 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T12:34:03.127

`sed`会做的：

```
sed '/\n/!N;/\n.*\n/!N;/\n.*\n.*PINITIAL BALANCE/{$d;N;N;d};P;D' 
```

它是这样工作的：

*   如果 sed 在模式空间中只有一个字符串，它会加入另一个字符串
*   如果只有两个，则加入第三个
*   如果它使用 BALANCE 匹配 LINE + LINE + LINE 模式，它会连接两个后续字符串，删除它们并从头开始
*   如果没有，它会打印模式中的第一个字符串并将其删除并从头开始而不滑动模式空间

为了防止在第一个字符串上出现模式，您应该修改脚本：

```
sed '1{/PINITIAL BALANCE/{N;N;d}};/\n/!N;/\n.*\n/!N;/\n.*\n.*PINITIAL BALANCE/{$d;N;N;d};P;D' 
```

但是，如果您有另一个`PINITIAL BALANCE`要删除的字符串，它会失败。但是，其他解决方案也失败了=）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T10:49:53.527

对于这样的任务，我可能会使用像 Perl 这样的更高级的工具：

```
perl -ne 'push @x, $_;
          if (@x > 4) {
              if ($x[2] =~ /PINITIAL BALANCE/) { undef @x }
                  else { print shift @x }
          }
          END { print @x }' input-file > output-file 
```

这将从输入文件中删除 5 行。这些行将是匹配前的 2 行、匹配的行和之后的两行。您可以更改要删除修改的总行数`@x > 4`（这将删除 5 行）和要匹配的行修改`$x[2]`（这会使第三行上的匹配被删除，因此删除匹配前的两行）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-11T19:15:13.217

一个更简单易懂的解决方案可能是：

```
awk '/PINITIAL BALANCE/ {print NR-2 "," NR+2 "d"}' input_filename \
    | sed -f - input_filename > output_filename 
```

awk 用于创建一个 sed 脚本，删除有问题的行，并将结果写入 output_filename。

这使用了两个可能比其他答案效率低的过程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T18:31:19.737

这可能对您有用（GNU sed）：

```
sed ':a;$q;N;s/\n/&/2;Ta;/\nPINITIAL BALANCE$/!{P;D};$q;N;$q;N;d' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T13:05:59.503

将此代码保存到文件中`grep.sed`

```
H
s:.*::
x
s:^\n::
:r
/PINITIAL BALANCE/ {
    N
    N
    d    
}

/.*\n.*\n/ {
    P
    D
}
x
d 
```

并运行如下命令：

```
`sed -i -f grep.sed FILE` 
```

您可以这样使用它：

```
sed -i 'H;s:.*::;x;s:^\n::;:r;/PINITIAL BALANCE/{N;N;d;};/.*\n.*\n/{P;D;};x;d' FILE 
```

# actionscript-3 - StageVideo 是 Fl ex Mobile Project 中一切的重中之重

> ID：11793949
> 
> 赞同：0
> 
> 时间：2012-08-03T10:31:01.203
> 
> 标签：actionscript-3, apache-flex, mobile, air

我正在使用 Flex (Air 3.3) 构建移动应用程序。对于 Android，stageVideo 存在令人讨厌的错误。当我在 stageVideo 播放或暂停时最小化应用程序并再次打开它时，有时 stageVideo 会出现在所有内容之上。据我了解，这应该是不可能的，因为 stageVideo 位于 stage 层之上，但它正在发生。我不知道如何解决这个问题。我不使用任何掩码，我只附加 netStream。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:35:40.963

不管为什么，您可以简单地通过在 DisplayList 中重新声明它的索引来修复它[`addChildAt()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#addChildAt%28%29)。

剩下的唯一问题是何时调用该操作。我不了解 AIR，但您可能正在寻找类似于[`Event.ACTIVATE`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#ACTIVATE). 如果您无法捕获触发检查的事件，请使用 Timer 或[`Event.ENTER_FRAME`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#ENTER_FRAME)

# windows-phone-7 - 我应该如何使用 Geocoordinate.VerticalAccuracy 来提高高度值？

> ID：11793952
> 
> 赞同：1
> 
> 时间：2012-08-03T10:31:39.710
> 
> 标签：windows-phone-7, geolocation

我正在构建一个骑行跟踪应用程序，其中包括记录您的海拔增益（我真的很感兴趣用户何时下山，也不是他们的实际海拔高度，而是他们上山的频率，和总距离）。

然而，在一次示例骑行中，我注意到我的海拔提升非常显着，而且比我所在的平缓山丘更应该显示出来。

我知道该`Geocoordinate`课程有一个`VerticalAccuracy`课程可以让我估计 Altitude 属性的准确度（以米为单位）。

我的问题是：我是否应该简单地使用该值作为阈值，如果数字太高，我应该认为高度是虚假的，还是有一些（不是太密集（即这里没有蒙特卡洛解决方案））计算我可以根据最后（少数）读数准确地进行合理猜测吗？

# java - 如何过滤性能良好的 JSON 数据

> ID：11793953
> 
> 赞同：1
> 
> 时间：2012-08-03T10:31:56.980
> 
> 标签：java, json, performance, rest, filtering

我在找到一个很好的解决方案时遇到了一些问题：我从 RESTful API 获取 JSON 数据，我想根据某个字段的特定值对其进行过滤，处理过滤后的数据，然后将其发送到一个客户。

例如，以这个 JSON 为例：

```
{
"element1": {
    "width": 500,
    "height": 500
},
"element2": { 
    "width": 300,
    "height": 200
},
"element3": {
    "width": 600,
    "height": 100
}

} 
```

我怎样才能过滤掉只有高度> = 200？或宽度< = 500的元素？当然，我可以遍历整个数据并得到我想要的，但如果 JSON 很大，这将需要很长时间，因为我想为尽可能多的客户提供服务，这似乎不是正确的方法..

PS：仅供参考，我将用java对其进行编码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:30:35.863

用 ServletStream 而不是 FileIS 试试这个例子

```
 import java.io.FileInputStream;

    import javax.xml.stream.XMLInputFactory;
    import javax.xml.stream.XMLStreamConstants;
    import javax.xml.stream.XMLStreamReader;

    import de.odysseus.staxon.json.JsonXMLInputFactory;

    public class Test {
        static XMLInputFactory ir = new JsonXMLInputFactory();

        public static void main(String[] args) throws Exception {

            FileInputStream servletInput = new FileInputStream("d:/test.json");
            XMLStreamReader reader = ir.createXMLStreamReader(servletInput,
                    "UTF-8");
            int typ = reader.next();
            while (typ != XMLStreamConstants.END_DOCUMENT) {

                if (typ == XMLStreamConstants.START_ELEMENT) {
                    String tagName = reader.getName().getLocalPart();
                    if (tagName.equals("width")) {
                        if (Integer.parseInt(reader.getElementText()) > 500) {
                            System.out.println("!FOUND!");
                        }
                    }
                }
                typ = reader.next();
            }
        }
    } 
```

问候

# django - Web 应用程序的免部署 gettext 翻译

> ID：11793957
> 
> 赞同：0
> 
> 时间：2012-08-03T10:32:10.813
> 
> 标签：django, internationalization, gettext, po

我正在开发的基于 Django 的 Web 应用程序被翻译成几种不同的语言。到目前为止，我们已经使用 gettext/PO 文件来翻译静态文件（代码和模板中的文本、静态页面）；存储在数据库中的 CMS 页面和文本通过管理界面进行翻译。

这种通用设置非常适合我们的开发人员，但不受我们的翻译人员的青睐，他们宁愿总是使用他们的翻译工具（带有 PO 文件）而不是使用管理界面。

现在越来越多的内容从代码迁移到数据库，我们尝试使用[gettext 获取存储在 DB 中的文本](http://django-dbgettext.readthedocs.org/en/latest/index.html)。虽然这个想法听起来不错，但围绕它的工作流程却相当繁琐：

1.  编辑器在管理界面中更改英文文本
2.  开发人员运行命令以在连接到生产数据库的主机上提取消息
3.  PO 文件发送给翻译人员
4.  翻译完成后将文件发回给开发人员
5.  开发人员编译 mo 文件，在代码库中检查并部署

虽然某些步骤可以通过使用像[Transifex](https://www.transifex.com/tour/features/overview/)这样的服务来自动化，但我不知道如何绕过最后一步。由于数据库更改而不得不部署听起来是错误的。

**有没有人能够为不需要部署的 Web 应用程序提出一个基于 gettext 的合理翻译工作流程？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:10:35.630

我们使用[Django-rosetta](https://github.com/mbi/django-rosetta)（它有一个额外的好处是不关心 PO 条目来自哪里）来管理我们大部分的 i18n 需求。关于你在这里问的是我们最终得到的工作流程：

1.  翻译器使用自己的管理界面登录到 Rosetta
2.  Rosetta 解析所有 po 文件并渲染页面以编辑翻译
3.  每次用户点击保存时，rosetta 会与 django 一起重新启动，所有更改现在都已生效并已应用
4.  如果翻译者回到 django，他们会看到他们的新字符串是什么样子的
5.  如果翻译人员更喜欢使用他们自己的 PO 编辑软件，他们可以，但他们必须向我们提供我们不鼓励的新版本

We wrote some scripts to help us with additional automation steps, but this setup has worked exceptionally well. We have even integrated (after some custom modifications to rosetta code) our non django based system into rosetta for easy translations.

# jquery-mobile - 加载屏幕上的 JQuery Mobile 标签

> ID：11793965
> 
> 赞同：0
> 
> 时间：2012-08-03T10:32:32.753
> 
> 标签：jquery-mobile

我正在使用 JQuery Mobile 1.1.1 版

我有一个作为初始屏幕的加载图像。

我需要为其添加版本标签，但我现在知道这是否可行。

有没有人这样做过？

# java - 在查询执行期间提供的参数列表中找不到查询参数 foo

> ID：11793969
> 
> 赞同：3
> 
> 时间：2012-08-03T10:32:40.593
> 
> 标签：java, jpa, syntax, jpql

[如何](http://www.objectdb.com/java/jpa/query/parameter)为以下查询的参数设置参数：

实体：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.mail.Message;
import javax.persistence.*;
import net.bounceme.dur.usenet.driver.FetchBean;

@Entity
public class Article implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Article.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column
    private int messageNumber;
    @ManyToOne(cascade = CascadeType.PERSIST)
    private Newsgroup newsgroup;

    public Article() {
    }

    public Article(Message message, Folder folder) {
        messageNumber = message.getMessageNumber();
        EntityManagerFactory emf;
        EntityManager em;
        emf = Persistence.createEntityManagerFactory("USENETPU");
        em = emf.createEntityManager();
        String ng = folder.getFullName();
        Query query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsgroup", Newsgroup.class);
        Newsgroup result = (Newsgroup) query.getSingleResult();
        newsgroup = (result == null) ? new Newsgroup(folder) : result;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Article)) {
            return false;
        }
        Article other = (Article) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "\nmessageNumber\t" + messageNumber;
    }

    public int getMessageNumber() {
        return messageNumber;
    }

    public void setMessageNumber(int messageNumber) {
        this.messageNumber = messageNumber;
    }
} 
```

堆栈跟踪：

```
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 5 groups in 39ms
[EL Info]: 2012-08-03 03:26:30.737--ServerSession(13970219)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-08-03 03:26:31.815--ServerSession(13970219)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
Aug 03, 2012 3:26:32 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: [gwene.com.androidcentral, gwene.com.blogspot.emacsworld, gwene.com.blogspot.googlecode, gwene.com.blogspot.googlereader, gwene.com.economist]
Aug 03, 2012 3:26:32 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: Google helping out newcomers with Nexus 7 getting started video
Aug 03, 2012 3:26:33 AM net.bounceme.dur.usenet.driver.FetchBean main
SEVERE: null
java.lang.IllegalStateException: Query argument newsgroup not found in the list of parameters provided during query execution.
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.processParameters(EJBQueryImpl.java:829)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:406)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:773)
    at net.bounceme.dur.usenet.model.Article.<init>(Article.java:34)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:41)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:21)

BUILD SUCCESSFUL (total time: 13 seconds) 
```

命名参数应该是`ng`, 对于新闻组名称，但我似乎无法获得在`Newsgroup.newsgroup`字段中查询该字符串的语法。如何修复查询？

- - - - - - -编辑 - - - - - - - -

新轨迹：

```
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 5 groups in 30ms
[EL Info]: 2012-08-03 03:57:03.647--ServerSession(33288487)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-08-03 03:57:04.691--ServerSession(33288487)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
Aug 03, 2012 3:57:05 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: [gwene.com.androidcentral, gwene.com.blogspot.emacsworld, gwene.com.blogspot.googlecode, gwene.com.blogspot.googlereader, gwene.com.economist]
Aug 03, 2012 3:57:05 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: Google helping out newcomers with Nexus 7 getting started video
Aug 03, 2012 3:57:06 AM net.bounceme.dur.usenet.driver.FetchBean main
SEVERE: null
java.lang.IllegalArgumentException: You have attempted to set a parameter value using a name of gwene.com.androidcentral that does not exist in the query string SELECT n FROM Newsgroup n WHERE n.newsgroup = :ng.
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.setParameterInternal(EJBQueryImpl.java:1256)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.setParameter(EJBQueryImpl.java:1138)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.setParameter(EJBQueryImpl.java:81)
    at net.bounceme.dur.usenet.model.Article.<init>(Article.java:34)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:41)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:21)

BUILD SUCCESSFUL (total time: 17 seconds) 
```

代码片段：

```
String ng = folder.getFullName();
        Query query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :ng", Newsgroup.class);
        query.setParameter(ng, ng);   //newsgroup object????
        Newsgroup result = (Newsgroup) query.getSingleResult();
        LOG.info(result.toString());
        newsgroup = (result == null) ? new Newsgroup(folder) : result; 
```

我正在玩它，毫无疑问会得到它，只需要多阅读[文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnbrg.html)和[API](http://docs.oracle.com/javaee/5/api/javax/persistence/Query.html#setParameter%28java.lang.String,%20java.lang.Object%29)，但它已经足够接近了 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:47:05.480

```
Query query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsgroup");
query.setParameter("newsgroup",newsgroup object);
Newsgroup result = (Newsgroup) query.getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:49:57.363

或者您可以使用查询的 setString(..) 方法：

```
Query query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsgroup", Newsgroup.class);
query.setString("newsgroup", ng);
Newsgroup result = (Newsgroup) query.getSingleResult(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:24:47.320

作为记录，以下运行：

```
public Article(Message message, Folder folder) {
    messageNumber = message.getMessageNumber();
    EntityManagerFactory emf;
    EntityManager em;
    emf = Persistence.createEntityManagerFactory("USENETPU");
    em = emf.createEntityManager();
    String ng = folder.getFullName();
    TypedQuery<Newsgroup> query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsgroup", Newsgroup.class);
    query.setParameter("newsgroup", ng);//newsgroup object
    Newsgroup result = query.getSingleResult();
    LOG.info(result.toString());
    newsgroup = (result == null) ? new Newsgroup(folder) : result;
} 
```

仅存在以下小错误：

```
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 5 groups in 12ms
[EL Info]: 2012-08-03 04:21:28.427--ServerSession(18852961)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-08-03 04:21:29.496--ServerSession(18852961)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
Aug 03, 2012 4:21:30 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: [gwene.com.androidcentral, gwene.com.blogspot.emacsworld, gwene.com.blogspot.googlecode, gwene.com.blogspot.googlereader, gwene.com.economist]
Aug 03, 2012 4:21:30 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: Google helping out newcomers with Nexus 7 getting started video
Aug 03, 2012 4:21:31 AM net.bounceme.dur.usenet.driver.FetchBean main
SEVERE: null
javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.throwNoResultException(EJBQueryImpl.java:1310)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:778)
    at net.bounceme.dur.usenet.model.Article.<init>(Article.java:35)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:41)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:21)

BUILD SUCCESSFUL (total time: 14 seconds) 
```

I found the [tutorial](http://docs.oracle.com/javaee/6/tutorial/doc/bnbrg.html) not terribly helpful, but at least fixed that syntax problem, I think.

# sql - 从两个不同表中的列中选择项目

> ID：11793970
> 
> 赞同：1
> 
> 时间：2012-08-03T10:32:46.293
> 
> 标签：sql

我有两张桌子 tableA 和 tableB ..

在表 A 中，我有列（名称） 在表 B 中，我有列（金额）

表 A：

```
cat_id      cat_name    

 1            Man
 2            Women
 3            General 
```

表 B：

```
cat_id      cat_price
 1             12
 1             18
 1             34
 1             23
 2             21
 3             31
 1             21
 3             56 
```

现在在这两个表中，我有名称和价格，它们由 cat_id 链接。

现在我想显示该特定名称的名称和价格，价格应该是特定类别的总和......

像这样的东西：

新表：

```
cat_name    cat_price

Man         104
Woman        21
General      87 
```

请帮忙..谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:39:16.463

```
SELECT 
tA.cat_name, SUM(tB.cat_price) AS price 
FROM TableA tA
INNER JOIN TableB tB
  ON tA.cat_id=tB.cat_id
GROUP BY tA.cat_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:37:50.683

`INNER JOIN`您可以为此使用 an ：

```
SELECT
    table_a.cat_name,
    SUM(table_b.cat_price) AS price
FROM
    table_a
INNER JOIN
    table_b
ON
    table_b.cat_id = table_a.cat_id
GROUP BY
    table_a.cat_name; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:39:18.837

```
select a.cat_name,
       sum(b.cat_price) price
  from tablea a
 inner join tableb b
    on a.cat_id = b.cat_id
 group by a.cat_name 
```

[内连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)。

[没有 Wiki Sql 文章的GROUP BY](http://msdn.microsoft.com/en-us/library/ms177673.aspx) Sql Server 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T10:39:53.413

```
 select T1.cat_name, T2.total 
    from TableA T1 
    NATURAL JOIN (SELECT cat_id, sum(cat_price) as total 
                  FROM TableB GROUP BY cat_id) T2 
```

# sql-server - 将计算字段与 SQL 触发器一起使用

> ID：11793972
> 
> 赞同：0
> 
> 时间：2012-08-03T10:32:50.763
> 
> 标签：sql-server, triggers

我正在尝试使用以下近似形式编写 SQL 触发器：

```
CREATE TRIGGER TableABSync ON TableA
FOR INSERT AS

INSERT INTO TableB
        (col1, col2, col3, col4)
    SELECT
        PK_ColA, ColB, ColC - ColD, ColE * TableB.Col3
    FROM inserted 
```

所以我想用新生成的Col3来计算Col4。我必须分阶段进行吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:48:23.270

你为什么不直接使用类似的东西：

```
CREATE TRIGGER TableABSync ON TableA
FOR INSERT AS

INSERT INTO TableB
        (col1, col2, col3, col4)
    SELECT
        PK_ColA, ColB, ColC - ColD, ColE *( TableB.ColC - TableB.ColD)
    FROM inserted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:54:59.827

该问题与触发器或插入无关 - 您不能`SELECT`从同一`SELECT`子句中引用该子句中的计算值。

也许：

```
CREATE TRIGGER TableABSync ON TableA
FOR INSERT AS

INSERT INTO TableB
        (col1, col2, col3, col4)
    SELECT
        PK_ColA, ColB, ColC - ColD as Col3, ColE * .Col3
    FROM
       (
          SELECT PK_ColA, ColB, ColC - ColD as Col3,ColE
          FROM inserted
       ) t 
```

# mysql - 如何管理巨大的数据库表以最小化 MySql 中的获取时间

> ID：11793975
> 
> 赞同：0
> 
> 时间：2012-08-03T10:33:00.443
> 
> 标签：mysql, zend-framework, zend-db, partitioning

我有一个包含大约 500 万行的巨大数据库表。现在在某些情况下检索记录会使服务器变慢。随着时间的推移，我现在如何管理桌子。

我正在考虑每年进行一些归档技术，例如每年将完整的表格分解为许多小表格，但这使我在编码方面付出了很多改变。我必须更改从数据库查询的完整结构。因此，很可能在项目中的大多数地方都发生了变化。

我还能做些什么来减少从数据库表中获取记录的时间？我可以采用其他任何技术来避免代码中的许多更改吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:46:57.490

您可以在 MySQL中轻松地对表进行水平[分区。](http://dev.mysql.com/doc/refman/5.5/en/partitioning-types.html)`PARITION BY RANGE`

此外，如果表中有许多列，则可以通过垂直分区方法将该表分成两个或多个表。

还可以添加适当的索引，最好是集群或[覆盖](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)表上的索引，并使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/explain.html)测试查询的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:45:11.013

在这种情况下，表分区可能会有所帮助。以下提供信息：

[http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html)

[https://dba.stackexchange.com/questions/19313/partitioning-a-table-will-boost-the-performance](https://dba.stackexchange.com/questions/19313/partitioning-a-table-will-boost-the-performance)

# javascript - 用 jQuery 包装 div

> ID：11793978
> 
> 赞同：0
> 
> 时间：2012-08-03T10:33:09.990
> 
> 标签：javascript, jquery, wrapall

我需要使用 jQuery 将一些 div 包装到另一个 div 中，原始输出如下所示：

```
<div>Some content</div>
<div>Some content</div>

<h3>Local</h3>
<div>Some content</div>
<div>Some content</div>
<div>Some content</div>

<h3>Non-Local</h3>
<div>Some content</div>
<div>Some content</div>
<div>Some content</div> 
```

我需要将它们包装起来，使它们看起来像这样：

```
<div>
    <div>Some content</div>
    <div>Some content</div>
</div>

<div>
    <h3>Local</h3>
    <div>Some content</div>
    <div>Some content</div>
    <div>Some content</div>
</div>

<div>
    <h3>Local</h3>
    <div>Some content</div>
    <div>Some content</div>
    <div>Some content</div>
</div> 
```

div 不能通过任何 id 或类来识别，所以我需要找到一种方法来包装所有遵循 h3 的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:49:05.527

你可以

*   遍历 h3 元素
*   使用[`nextUntil()`](http://api.jquery.com/nextUntil/)jQuery 的 - 函数查找 h3 之后的 div 元素，
*   将它们添加到集合中
*   将它们中的每一个推入组数组
*   然后遍历这些组，并将它们中的每一个包装在一个 div 中

    变量组 = [];

    $('h3').each(function(index, value) {

    $头 = $(价值);

    var $group = $head.add($head.nextUntil('h3', 'div')); groups.push($group);

    });

    对于（分组）{

    $(groups[group]).wrapAll('');

    }

首先将组保存在组数组中的原因是，在遍历每个集合之前不要更改 HTML 结构。否则，后续调用也会找到添加的元素。

[这是示例代码](http://jsbin.com/umecab/1/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:48:47.823

从理论上讲，jQuery 函数“next()”或“nextAll()”或“nextUntill()”允许您找到所选元素的以下兄弟姐妹。因此，您可以根据 html 的结构尝试使用这些功能的东西。

jQuery API 文档中的jQuery 文档[的](http://api.jquery.com/category/traversing/)更多帮助。

# c# - 在c#中动态创建调用JavaScript函数的imageButton

> ID：11793981
> 
> 赞同：1
> 
> 时间：2012-08-03T10:33:15.693
> 
> 标签：c#, asp.net, html

我有以下 c# 代码创建应该调用下面的 javaScript 方法的图像按钮

```
var imageButton = new ImageButton();
    imageButton.ImageUrl = "Styles/unClicked.png";
    imageButton.ID = "btn" + questionName;
    imageButton.OnClientClick = "buttonPressed('" + questionName + "')"; 
```

它的输出 & # 3 9; 而不是 ' 在 html 代码中，这会导致错误（我必须添加空格 tp 以防止将其更改为逗号）

```
onclick="buttonPressed(&#39;question0&#39;) 
```

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:14:43.707

OnClientClick 属性非常有限。不完全确定这会起作用，但我之前使用过类似的代码来处理文本框中的幻影文本......

```
imageButton.Attributes.Add("onclick", "buttonPressed('" + val + "')"); 
```

该属性不应该是 HTML 编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:48:26.947

请试试这个[HtmlString](http://msdn.microsoft.com/en-us/library/system.web.htmlstring.htmlstring.aspx)（不工作）。

```
imageButton.OnClientClick = new HtmlString("buttonPressed('" + questionName + "')"); 
```

如果它不起作用，那么您将需要创建自定义控件*或*使用 javascript (JQuery) 为[单击](http://api.jquery.com/click/)事件添加处理程序。

```
<script>    
    $("<%=imageButton.ID%>").click(function() {
      buttonPressed('<%=questionName%>');
      })
</script> 
```

# javascript - 在 V8 中按用户列出所有定义的函数名称

> ID：11793983
> 
> 赞同：2
> 
> 时间：2012-08-03T10:33:24.697
> 
> 标签：javascript, v8

从 3 小时开始，我搜索了一个 Javascript 函数，该函数返回用户可访问/创建的函数列表。

不幸的是，我什么也没找到......

您知道如何在 google V8 Javascript 引擎上执行此操作吗？

PS：对不起我的英语，我是法国学生：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:37:43.047

没有编程方式来抓取当前函数或变量的列表。

您至少需要知道这些函数的位置——例如在特定的命名空间中。

```
var fn = {};
fn.someFunc = function(){}
fn.someProp = 'foo';
fn.someOtherFunc = function(){}

//get all funcs
for (var i in fn) if (typeof fn[i] == 'function') alert('found a function'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:50:07.150

请注意，默认情况下，未声明为对象方法的函数被视为窗口对象的方法。

因此，使用类似下面的代码，您可以列出窗口对象的所有功能。[您可以检查输出并添加更好的过滤器来改进我在这里](https://stackoverflow.com/questions/5999998/how-can-i-check-if-a-javascript-variable-is-function-type)窃取的 isFunction 函数。

```
<script type="text/javascript">

        function myTest() //function to be detected
        {
            return true;
        }

        function isFunction(functionToCheck)
        {
            var getType = {};
            return functionToCheck && getType.toString.call(functionToCheck) == '[object Function]';
        }

        for( var it in window )
        {
            if(isFunction(window[it]))
                console.log(it+":"+window[it]);
        }

    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:12:29.383

我也许可以帮你。这个调用在每个对象中从上到下，从全局上下文开始。第一个函数返回全局对象，这是我们的自由范围对象。我们对每个对象进行递归搜索以查找函数或您想要的任何内容。

```
var global = (function(){return this;})();

(function(ctx){
  for(var i in ctx) { 
   // put your function check here.
   // System.out.println(i + ' ' + typeof ctx[i]); 
   if(ctx[i] instanceof Object) { 
     arguments.callee(ctx[i]); }
  }
})(global); 
```

[即时运行代码](http://ideone.com/V9kGy)

# mfc - 锁定 MFC 屏幕

> ID：11793989
> 
> 赞同：1
> 
> 时间：2012-08-03T10:33:40.080
> 
> 标签：mfc, screen-lock

我有一个 MFC 应用程序，其中有使用 CPropertySheet 创建的向导。我几乎没有控件和“下一步”按钮。当我按下“下一步”按钮时，我将进行各种操作，那时，我想锁定屏幕，以便用户无法点击或在屏幕上进行任何操作。请建议我一些方法来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:05:25.250

最好是使用禁用“关闭”且没有按钮来丢弃对话框的 DoModal 调用对话框。在该对话框中，您实际上可以发出一些有关进度的有意义的消息，甚至显示进度条。通过这种方式，您可以有效地阻止用户对应用程序进行任何操作，并给他一些反馈，以便他知道正在完成一些工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T06:26:26.787

您可以使用[EnableWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646291%28v=vs.85%29.aspx)来“锁定”一个窗口。请注意，这只是一个窗口，用户仍然可以与您尚未调用该函数的其他窗口/应用程序进行交互。

```
HWND hWnd;
CWnd *pWnd;

// do stuff

// lock window
::EnableWindow(hWnd, FALSE);

// do stuff

//unlock window
::EnableWindow(hWnd, TRUE);

// lock window
pWnd->EnableWindow(FALSE);

// do stuff

// unlock window
pWnd->EnableWindow(TRUE); 
```

# iphone - 如何判断收到了哪个本地通知？目标 - C

> ID：11793990
> 
> 赞同：2
> 
> 时间：2012-08-03T10:33:46.660
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我有这段代码根据收到的本地通知调用不同的 NSLog 语句：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification{
    if (notification == automaticBackupNotification)
    {
        NSLog(@"Backup notification received.");
    }
    else
    {
        NSLog(@"Did receive notification: %@, set for date:%@ .", notification.alertBody, notification.fireDate);
    }
} 
```

我使用这种方法在另一个类中安排通知：

```
- (IBAction)automaticValueChanged {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if (automaticSwitch.isOn){
        [defaults setValue:@"1" forKey:@"automatic"];
        //schedule notification
        //Set up the local notification
        appDelegate.automaticBackupNotification = [[UILocalNotification alloc] init];
        if(appDelegate.automaticBackupNotification){
            //Repeat the notification according to frequency
            if ([backupFrequencyLabel.text isEqualToString:@"Daily"]) {
                appDelegate.automaticBackupNotification.repeatInterval = NSDayCalendarUnit;
            }
            if ([backupFrequencyLabel.text isEqualToString:@"Weekly"]) {
                appDelegate.automaticBackupNotification.repeatInterval = NSWeekCalendarUnit;
            }
            else {
                appDelegate.automaticBackupNotification.repeatInterval = NSMonthCalendarUnit;
            }

            //Set fire date to alert time
            NSCalendar *calendar = appDelegate.automaticBackupNotification.repeatCalendar;
            if (!calendar) {
                calendar = [NSCalendar currentCalendar];
            }

            NSDateComponents *components = [[NSDateComponents alloc] init];
            components.day = 1;
            //NSDate *nextFireDate = [calendar dateByAddingComponents:components toDate:[NSDate date] options:0];
            //appDelegate.automaticBackupNotification.fireDate = nextFireDate;
            appDelegate.automaticBackupNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:20.0];

            //Set time zone to default
            appDelegate.automaticBackupNotification.timeZone = [NSTimeZone defaultTimeZone];

            // schedule notification
            UIApplication *app = [UIApplication sharedApplication];
            [app scheduleLocalNotification:appDelegate.automaticBackupNotification];

            NSLog(@"Backup Fire Date: %@", appDelegate.automaticBackupNotification.fireDate);
        }
    }
    else {
        [defaults setValue:@"0" forKey:@"automatic"];
        if(appDelegate.automaticBackupNotification){
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.automaticBackupNotification];
        }
    }

    [defaults synchronize];
} 
```

但是，当应用程序委托收到通知时，它会触发条件的“else”部分。有什么办法可以区分不同的通知吗？还是我做错了什么？

干杯，

泰辛

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T10:37:59.373

NSNotification 对象有一个属性，叫做 userInfo。它是一个 NSDictionary，您可以在创建通知的位置设置一些值，并在收到通知的位置检查它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:09:18.953

只需尝试设置`userInfo`您的属性`UILocalNotification`，就像这样，

```
NSDictionary *userDict = [NSDictionary dictionaryWithObject:@"YOUROBJECT" forKey:@"TESTKEY"];
YOURNOTIFICATION.userInfo = userDict; 
```

并且当 UILocalNotification 触发时，将调用此方法，

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
     NSDictionary *dict = [notification userInfo];
     id obj = [dict objectForKey:@"TESTKEY"];
} 
```

根据`userInfo`您设置时的设置`UILocalNotification`，您可以找出`notification`调用了哪个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:13:51.517

我个人使用通知名称来知道哪个通知推送或已收到

```
//add local observer
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(mathodCalled:) name:[NSSTring StringWithFormat :@"plop"] object:nil];

...

//push an event manually 
[[NSNotificationCenter defaultCenter] postNotificationName:eventName object:[NSSTring StringWithFormat :@"plop"]];

...

- (void)methodCalled :(NSNotification*)aNotification{
    if([aNotification.name isEqualToString:@"plop"]){
        // do something
    }

} 
```

# sql - 快速 INT（LOG2（值））

> ID：11793993
> 
> 赞同：4
> 
> 时间：2012-08-03T10:33:56.570
> 
> 标签：sql, sql-server, tsql

我想在截断之前将我的 SQL Server 存储过程中的自上次活动以来的天数转换为匹配搜索结果的加权排序（连同其他条件）的对数表示。Log2 非常接近我的需求，看起来应该非常有效。

```
CAST (LOG(lastActivityAge)/LOG(2)) AS TINYINT 
```

可以正常工作，但是要求我的服务器进行如此繁重的工作只是为了获得最高的设置位位置似乎非常浪费。

关于更有效的方法的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:19:24.250

有一些[小技巧](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvious)可以找到最高位，但它们不能在 T-SQL 中轻松表达（需要循环）。由于性能原因，UDF 没有问题。

使用 Denali 可以更快一点：

```
CAST (LOG(lastActivityAge, 2)) AS TINYINT 
```

或者对表达式进行硬编码，`LOG(2)`因为我不确定优化器是否可以将其不断折叠。无论如何，您需要数百万行才能注意到差异。

最后一个技巧：如果有一些非常常见的值，试试这个：

```
case lastActivityAge when 1 then 0 when 2 then 1 /* ... */ else CAST (LOG(lastActivityAge, 2)) AS TINYINT end 
```

# javascript - onBeforeUnload 处理程序在 IE 中显示 null

> ID：11793996
> 
> 赞同：15
> 
> 时间：2012-08-03T10:34:40.327
> 
> 标签：javascript, jquery

我的网络应用程序有这个：

```
$(window).bind('beforeunload', function() {
    if(unSavedChanges == true)
    {
        return 'You have unsaved changes';
    }
    return null;
}); 
```

这在 Safari 和 Firefox 中运行良好（除了 Firefox 没有在它的 onBeforeUnload 对话框中显示我的自定义消息）。但是在 Windows 7 上的 IE 8 上，它总是显示 onBeforeUnload 通知，特别是如果没有未保存的更改，它只会显示“null”。当用户保存所有内容并想要离开时，如何防止 IE 显示 onBeforeUnload 通知？

根据乔恩的建议，我删除了该`return null`行，代码现在为

```
$(window).bind('beforeunload', function() {
   if(unSavedChanges == true)
   {
       return 'You have unsaved changes';
   }
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T10:38:52.283

删除该`return null`行，它应该没问题（在 Javascript`null`中`undefined`是不同的东西）。

顺便说一句，[MDN](https://developer.mozilla.org/en/DOM/window.onbeforeunload)说，为了获得最大的兼容性，您也应该接受`event`参数和设置`event.returnValue`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:39:35.170

我为此使用普通的javascript并且工作正常

```
function setConfirmUnload(on) {
     window.onbeforeunload = (on) ? unloadMessage : null;
}

function unloadMessage() {
     return 'Please stay on the page';
} 
```

# backbone.js - 在 Backbone View 的委托事件中，如何访问事件的源元素？

> ID：11793998
> 
> 赞同：1
> 
> 时间：2012-08-03T10:34:42.380
> 
> 标签：backbone.js

我正在将 jQuery 代码重写为 Backbone，但我遇到了一个看似微不足道的问题：

在作为主 View 元素的子元素的事件回调中，如何访问被单击的特定子元素（例如）？

```
var Composer = Backbone.View.extend({
    events: {
        "click #postnow":  "postnow"
    },
    postnow: function(){
        // @fixme:
        var btn = $("#postnow");
        // Do something
    }
});

new Composer({el: $('.composer')}); 
```

在 jQuery 中，我会使用`$(this)`，但在 Backbone 中，它指的是 View 元素，而不是点击的子元素。

有没有办法在不再次明确指定选择器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:42:50.740

在视图回调中，您可以访问 jQuery 事件及其属性，更具体地说是[event.currentTarget](http://api.jquery.com/event.currentTarget/)

尝试

```
var Composer = Backbone.View.extend({
    events: {
        "click #postnow":  "postnow"
    },
    postnow: function(e){
        var btn = $(e.currentTarget);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:44:21.960

一个隐式参数被发送到*函数回调*，这个参数是一个[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)，它包含很多信息，包括事件所针对的 DOM 元素：

```
var Composer = Backbone.View.extend({
    events: {
        "click #postnow":  "postnow"
    },
    postnow: function( event ){
        console.log( "postnow()" );
        console.log( "this", this );
        console.log( "event", event ); 
        console.log( "target", event.target ); 
        console.log( "data-value", $(event.target).attr( "data-value" ) ); 
    }
}); 
```

检查[工作的 jsFiddle](http://jsfiddle.net/fguillen/6frH6/)