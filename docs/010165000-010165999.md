# StackOverflow 问答 10165000-10165999

# java - 从 MySQL XML 转储查询 POJO

> ID：10165000
> 
> 赞同：0
> 
> 时间：2012-04-15T18:50:49.403
> 
> 标签：java, mysql, xml, dump

起初我的应用程序要访问 MySQL 数据库，但一切都改变了，现在它必须从 XML 文件中读取，它**只会**从中读取。

基本思路是：
1\. Admin App持久化到MySQL。
2\. Admin App 生成一个 MySQL xml 转储（mysqldump 工具）。
3\. 应用程序将 xml 发送给客户端。
4.客户端查询xml。

也许有更聪明的方法来构建它，但现在这不是重点。有没有像 XML 这样的 Hibernate - Relational 来做到这一点，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:36:00.050

XML 会有多大？是否要加载到 RAM 中？如果不是太大，请加载并使用 XPath。我推荐 JDOM。如果太大并且不允许您制作任何其他文件，请使用流式 XPath 解决方案（请参阅[此 SO 帖子](https://stackoverflow.com/questions/996103/streaming-xpath-evaluation)），但是您遇到了很大的问题。性能会很糟糕。如果您可以将其转换为另一个文件，您可能会找到适合您的嵌入式数据库（Derby、Hypersonic...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:32:22.587

结束使用 XStream 创建我的 xml（而不是使用 MySQL 转储）并反序列化它。像魅力一样工作。

我遵循的步骤。

1.  创建了一个 Bean 作为我的根节点，这个 bean 包含所有其他 bean 的列表。

2.  做了一个 xstream.toXML(myRootBean) 并将其写入 xml 文件。

3.  在另一端，读取文件并执行 xstream.fromXML() 将其转换为 myRootBean。

4.  然后只需访问列表，例如 myRootBean.getPotatoList()

请注意，必须在 toXML 和 fromXML 之前为每个类设置别名。

xstream.alias("土豆", List.class);

xstream.alias("土豆", Potato.class);

# java - 调用另一种方法来获取结果集并正确关闭连接？

> ID：10165009
> 
> 赞同：1
> 
> 时间：2012-04-15T18:52:05.970
> 
> 标签：java, jdbc, try-catch

```
try{
      String query= "select user_name from user";
      ResultSet rs = queries.performQuery(query);

while(rs.next()){
        System.out.println("User Name :" + rs.getString("user_name"));
      } 
```

在另一堂课上，我有这样的事情：

```
public ResultSet performQuery(String query) throws SQLException
    {       
        try 
        {
              connection = DriverManager.getConnection(sqlUrl,sqlUser,sqlPassword);
              stmt = connection.createStatement();
                  rs = stmt.executeQuery(query);
        } 

        catch(SQLException ex) 
        {
        }

        finally{
            close(rs);
            close(stmt);
            close(connection);
        }
        return rs;
    } 
```

现在我在 ResultSet 关闭后得到错误 Operation not allowed ，这显然是因为我正在关闭 rs/stmt/connection。

我没有我的代码，所以这只是我的想法，忽略任何语法错误，我希望我的问题仍然足够清楚。

所以我的问题是：

如果您想要一个方法来执行查询，并且您在另一个方法中调用它然后执行 rs.next，那么关闭结果集/stmt/connection 的适当方法是什么？对我来说，关闭它们的 performQuery 是有意义的，但这给了我错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:58:04.337

if you are using `ResultSet` then it will need the Connection to load more rows . for example if your query returns 1000 record , first the ResultSet will hold 41 row in memory then when you iterate over this number it will use the Connection to load another chuck of records .in your case i would use `RowSet` [for more explanation read this](http://www.geekinterview.com/question_details/591)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:58:41.887

`ResultSet` is designed to allow streaming of results, e.g. one record at a time. That's why it is not simply returning a `Collection` of some kind but rather something similar to iterator. In fact `ResultSet` can lazily load one record at a time through open JDBC connection.

That being said if you are comfortable with having all the results in memory at the same time - just eagerly load all records before closing `ResultSet`.

# ios - 访问选定子类 UITableViewCell 的内容

> ID：10165014
> 
> 赞同：0
> 
> 时间：2012-04-15T18:52:37.017
> 
> 标签：ios

如果我`UITableViewCell`使用 say进行子类`MySubclassedCell`化并且它包含一些标签和图像，我将如何访问该`didSelectRowAtIndexPath`方法中子类化单元格的内容？

通常（没有子类化）我会这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
} 
```

然后从那里去。替换`MySubclassedCell`不起作用，那么如果我需要访问子类单元格的属性怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:57:25.187

当您说替换 MySubclassedCell 不起作用时，不太了解您，您不能这样做吗？

```
 MySubclassedCell *cell = (MySubclassedCell *)[tableView cellForRowAtIndexPath:indexPath]; 
```

# loops - 使用命令行参数创建循环批处理文件？

> ID：10165018
> 
> 赞同：1
> 
> 时间：2012-04-15T18:53:19.383
> 
> 标签：loops, batch-file, cmd, arguments

我有一个命令行程序，可以编辑单个文件以添加时间长度。您在命令提示符中输入程序的名称，然后输入文件。就像这样：“test.exe file.dsf”。我正在尝试制作一个 .bat 文件，该文件将遍历文件夹中的所有“.dsf”文件。我试过这个，但它似乎只是为每个 dsf 文件运行程序，但之后它没有将它作为参数输入。

```
ECHO OFF
ECHO BATCH test

FOR %%a IN (*.dsf) DO test.exe 
```

关于如何使它工作的任何想法？我会很感激的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:55:34.443

将 %%a 作为参数添加到 test.exe

```
ECHO OFF
ECHO BATCH test
FOR %%a IN (*.dsf) DO test.exe %%a 
```

# sql - 在 Oracle 11 的 MERGE UPDATE 中创建两个 WHERE 子句

> ID：10165019
> 
> 赞同：1
> 
> 时间：2012-04-15T18:53:25.583
> 
> 标签：sql, oracle, sqlplus

我有两个结构相同的表：masterTable (id, description, list_price) 和 changesTable (id, description, list_price)

我想将changesTable中的更改合并到masterTable中，但是当masterTable中的changesTable为NULL时，我不想更新'description'，我想保留旧值

我试着这样做

```
WHEN MATCHED THEN
UPDATE SET master.list_price=changes.list_price,
master.description=ch.description   
WHERE length(changes.description)>0 
```

但在这种情况下，list_price 也不会更新。

如何正确合并它们？谢谢

> 这里是问题的描述： 使用单个merge 语句用表upd_services_changes_2 中的数据更新upd_services 表。此合并将包括更新、删除和插入。对于此任务，更改表中的负价格表示删除。如果更改表中的描述字段为空，则在进行更新时不要更改服务表中的描述。仅当标价为 0 或更大时才进行插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:58:17.173

```
WHEN MATCHED THEN
UPDATE SET master.list_price=changes.list_price,
master.description=ch.description   
WHERE length(changes.description)>0 
```

这只会在 length(changes.description)>0 时更新，但您想说“始终更新 list_price 但仅在长度为零时更新列表描述”您可以在两个合并中执行此操作，

```
WHEN MATCHED THEN
UPDATE SET master.list_price=changes.list_price 
```

和

```
WHEN MATCHED THEN
UPDATE SET 
master.description=ch.description   
WHERE length(changes.description)>0 
```

或检查您的[SQL 方言语法](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm#SQLRF01606%E2%80%9D)以获取指定两个条件的方法。

***提示***：有一种方法可以做到这一点，但不能使用 WHERE 语句。您需要使用 CASE。试一试，如果您有更多问题，请稍后再回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:49:27.757

你可以试试这个

```
 WHEN MATCHED THEN
UPDATE SET master.list_price=changes.list_price,
master.description = DECODE(ch.description ,
                             NULL,
                             master.description,
                             ch.description ) 
```

在这种情况下，如果 ch.description 为 null，则保留原始值（即 master.description），否则 ch.description 会在 master.description 上被覆盖

希望能帮助到你

# objective-c - 如何使用 Cocos2d 为精灵添加动作

> ID：10165020
> 
> 赞同：1
> 
> 时间：2012-04-15T18:53:33.530
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一些精灵正在运行一些动作......像这样的东西：

```
[someSprite runAction:someAction]; or [someSprite runAction:someSequence]; 
```

我需要向**sprite** ***添加**一个**newAction**或 newSequence以在*当前操作结束后运行它们。**

 ***谢谢，乔治。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:36:45.660

在 someSequence 中，作为列表中的最后一个条目，放置一个带有 CCCallFunc (N,ND,O) 的回调，指向您选择的选择器。在被调用的函数中，只需计算并添加您需要添加的操作。***

# asp.net-mvc-3 - ASP.NET Membership 数据库和性能

> ID：10165023
> 
> 赞同：1
> 
> 时间：2012-04-15T18:53:44.267
> 
> 标签：asp.net-mvc-3, asp.net-membership

我们正在为我们的 ASP.NET MVC 3 应用程序编写一个自定义管理页面，我们对从 aspnet“应用程序服务”数据库中获取用户所需的时间感到惊讶。

内置的 Membership.GetAllUsers() 方法非常缓慢，但可以理解，因为它为每个用户获取大量信息。我们不需要那么多，所以我们决定在我们的 aspnet 数据库之上添加一个 LINQ to SQL 层，并使用 LINQ 编写我们自己的查询。我们没有获取所有内容，而是获取了几列——我们唯一感兴趣的列。  

结果更好，但仍然：使用标准方法获取 120 多位用户大约需要 30 秒，而使用我们的自定义查询需要 9 秒。

150 行 9 秒似乎很大。知道为什么需要这么长时间吗？

**编辑**这是一个需要 9 秒才能返回内容的方法示例：

```
 public static List<LightMembershipUser> GetUsersInRole(string roleName) {
        //Find the role
        var roleId =   (from role in db.Roles
                        where roleName == role.RoleName
                        select role.RoleId)
                        .First();
        if (roleId==null){ return null; }

        var res =   from u in db.Users 
                    join ur in db.UsersInRoles on u.UserId equals ur.UserId
                    join m in db.Memberships on u.UserId equals m.UserId
                    where  ur.RoleId==roleId
                    select new LightMembershipUser { UserName = u.UserName, CreationDate = m.CreateDate, Email = m.Email, Roles = Roles.GetRolesForUser(u.UserName) };
        return res.ToList();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:26:43.790

没有什么特定于会员系统会导致访问缓慢的情况，而且您在 30 秒内拥有 120 个用户也不应该是典型的情况。成员资格只是数据库中的一组表，除非您以这种方式设置，否则它们甚至不是一个单独的数据库。它们只是行。

您的数据库服务器显然有问题。即使在慢速服务器上，您也应该能够在微秒内返回 150 行。不过，您可以尝试在您的问题中包含您的查询，因为这可能是您做错了。

等等..你在做 150 次查询吗？还是一个查询返回 150 条记录？显然，Membership API 无法同时返回多个用户，因此如果您使用 Membership，则必须执行 150 次查询才能获得 150 个用户。但是您自己的查询应该能够处理任意数量的行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T19:08:13.247

我建议您根本不要使用 aspnet 数据库，而是创建自己的数据库和`MembershipProvider`扩展`RoleProvider`.

你能提供你的查询吗？

# c++ - C/C++ strcpy 未处理的读取冲突

> ID：10165025
> 
> 赞同：1
> 
> 时间：2012-04-15T18:53:49.513
> 
> 标签：c++, string, char, strcpy

```
unsigned char* Data::getAddress(unsigned char* address)
{
    strcpy((char*)address, (char*)this->_address);
    return (unsigned char*)address;
}

int main()
{
    Data d;
    d.makealinkedlisthere();
    while (d)
    {
       unsigned char address[256];
       printf("0x%08x \r\n",d.getAddress(address));
       d = d.getNext();
    }
    return 0;
} 
```

它返回前两个（相同，并且应该不同[可以从调试器中看出] ...）然后崩溃。

它只是制作一个链表。受保护的成员`Data* _next`......他们的链条。

unsigned char* 来自它返回的数据结构的 Windows 函数`VirtualQueryEx`部分。`MEMORY_BASIC_INFORMATION`

```
this->_address = (unsigned char*)meminfo->BaseAddress; // casted from void* 
```

它是 void*，但我看到它在其他代码中转换为 unsigned char*。在调试器中，我可以看到它表示为十六进制数字。

```
D1: +    _address   0x7ffd5000 <Bad Ptr>    unsigned char * 
D1->_next:+  _address   0x7f6f0000 "áå•ú`©" unsigned char * 
D1->_next->_next+    _address   0x7ffb0000 " "  unsigned char * 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:21:58.540

MEMORY_BASIC_INFORMATION.Base Address 是页面区域的位置，而不是字符串，并且不能保证它会以空值终止。从 MSDN 站点您可以看到[MEMORY_BASIC_INFORMATION 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366775%28v=vs.85%29.aspx)

```
typedef struct _MEMORY_BASIC_INFORMATION {
  PVOID  BaseAddress;
  PVOID  AllocationBase;
  DWORD  AllocationProtect;
  SIZE_T RegionSize;
  DWORD  State;
  DWORD  Protect;
  DWORD  Type;
} MEMORY_BASIC_INFORMATION, *PMEMORY_BASIC_INFORMATION; 
```

要复制数据，您应该使用`memcpy`size = 255`。

回顾您的代码，只要没有其他问题，将其更改为

```
PVOID Data::getAddress(PVOID address,size) {    
    memcpy((address, (void *)this->_address, size);
    address[size]=NULL;
    return address;
}
int main() {
    Data d;
    d.makealinkedlisthere();
    while (d) {
       unsigned char address[256];
       printf("Address: 0x%08x \n",d.getAddress((PVOID)address),sizeof(address));
       printf("Data: %s\n",(LPSTR)d.getAddress((PVOID)address),sizeof(address));
       d = d.getNext();
    }
    return 0;
} 
```

应该管用

另请注意，在存储`RegionSize`之前进行边界检查是安全的`memcpy`。

# filesystems - 向 Unix 文件系统添加压缩的问题

> ID：10165026
> 
> 赞同：1
> 
> 时间：2012-04-15T18:54:00.540
> 
> 标签：filesystems, compression

我正在修改操作系统课程，过去论文中的一个问题如下：

```
Some modern Unix filesystems support file-system internal compression.
That is, a file can be flagged so that within the filesystem, the file’s data
is compressed, although reading and writing to the file appears as normal
to users of the filesystem. What issues would you expect to have to be
addressed in adding compression to a traditional Unix filesystem? 
```

我想不出任何需要解决的问题。谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:42:20.613

您的问题包含最初需要解决的问题-“尽管文件系统的用户对文件的读取和写入正常”。即压缩必须是*透明*的。另一个因素可能是使用的压缩算法必须足够快，以免在 I/O 期间压缩/解压缩文件时引入太多延迟。

# mysql - 从数据库中删除条目的所有信息（MySQL）

> ID：10165038
> 
> 赞同：0
> 
> 时间：2012-04-15T18:55:26.077
> 
> 标签：mysql, database, sql-delete

我有一个名为 music 的数据库，里面有 4 个表；

1.  乐队成员
2.  乐队
3.  光盘
4.  发布。

我想删除数据库中与 cd005 相关的所有信息（即 cd_id 列条目）。

我想我可以使用

```
DELETE FROM table_name WHERE cd_id='cd005' 
```

在每个单独的表上，但我想知道是否有办法通过一次从整个数据库中删除与此 id 相关的数据来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:02:03.083

是的，有办法。请检查 mysql 文档中的外键级联删除。

**例子：**

```
CREATE TABLE parent (id INT NOT NULL,
                     PRIMARY KEY (id)
) ENGINE=INNODB;
CREATE TABLE child (id INT, parent_id INT,
                    INDEX par_ind (parent_id),
                    FOREIGN KEY (parent_id) REFERENCES parent(id)
                      ON DELETE CASCADE
) ENGINE=INNODB;

Insert into parent set id=1;
Insert into parent set id=2;
Insert into parent set id=3;
Insert into child set id=1, parent_id=1;
Insert into child set id=2, parent_id=1;

select * from parent;
select * from child;
delete from  parent where id=1;
select * from parent;
select * from child;

ID
1
2
3
 Record Count: 3; Execution Time: 0ms View Execution Plan
ID  PARENT_ID
1   1
2   1
 Record Count: 2; Execution Time: 0ms View Execution Plan
 Record Count: 0; Execution Time: 1ms
ID
2
3
 Record Count: 2; Execution Time: 0ms View Execution Plan
 Record Count: 0; Execution Time: 0ms 
```

# javascript - 如何在内容可编辑列表项（不同缩进）之间移动插入符号，同时保持插入符号 x 偏移量？

> ID：10165039
> 
> 赞同：1
> 
> 时间：2012-04-15T18:55:30.443
> 
> 标签：javascript, contenteditable, caret

我有一个具有不同缩进的项目列表，如下所示：

*   清单项目 1
    *   清单项目 2
        *   清单项目 3

我`contentEditable`在用户单击列表项时打开。现在，当用户按下`up`箭头键时，我想将插入符号/单词光标从`List item 3`移到`List item 2`，同时*保持插入符号的 x 位置*。

为了以图形方式显示这一点，

`intial caret pos:`

*   清单项目 2
    *   李**|** 第 3 项

`final caret pos after user presses up arrow. x offset remains same despite the difference in indent levels:`

*   列出项目**|** 米2
    *   清单项目 3

目的是模拟多行文本区域的行为，其中使用箭头键在行之间移动保留插入符号偏移。在 Google Tasks 中的列表项之间移动时，您也可以看到此行为。

[在](https://stackoverflow.com/questions/1892866/contenteditable-javascript-caret-placement-in-div) [参考](https://stackoverflow.com/questions/4233265/contenteditable-set-caret-at-the-end-of-the-text-cross-browser) [了](https://stackoverflow.com/questions/1181700/set-cursor-position-on-contenteditable-div) [一些](https://stackoverflow.com/questions/6816078/rangy-contenteditable-set-the-caret) [相关](https://stackoverflow.com/questions/5082921/get-caret-xy-coordinates-in-text-area)[的](https://stackoverflow.com/questions/3059254/current-x-y-coordinates-of-cursor-in-text-area-using-javascript) [SO](https://stackoverflow.com/questions/2213376/how-to-find-cursor-position-in-a-contenteditable-div)[问题](https://stackoverflow.com/questions/2844649/javascript-contenteditable-getting-setting-caret-position)之后，我在放弃之前设法解决了一半的问题。

有人知道优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:55:31.583

我建议的一般方法是：

*   按下向上或向下箭头时拦截`keydown`事件并阻止浏览器默认
*   这里有一些函数允许您获取和设置插入符号的位置作为相对于特定元素的字符索引。它们并不完美，但在大多数情况下都可以完成这项工作：[在 contenteditable div 中替换 innerHTML](https://stackoverflow.com/questions/5595956/replace-innerhtml-in-contenteditable-div/5596688#5596688)（[这个 jsFiddle](http://jsfiddle.net/Y8pJ7/8/)也有同样的作用，但消除了对 Rangy 库的依赖）。使用这些来获取相对于一的插入符号字符索引`<li>`，并将插入符号设置为相对于`<li>`上面或下面的相同位置。

# ios - MFMailComposeView 崩溃

> ID：10165042
> 
> 赞同：1
> 
> 时间：2012-04-15T18:55:38.050
> 
> 标签：ios, objective-c, memory-management

我的代码中显然遗漏了一些东西，因为每当我尝试按“发送”或“取消”时，应用程序都会崩溃。另外，我有一个固定的主题和收件人，但如果我尝试编辑它们，应用程序就会崩溃。任何帮助，将不胜感激。这是我当前与 MFMailComposeViewController 相关的代码：

```
MFMailComposeViewController *controller = [[[MFMailComposeViewController alloc] init] autorelease];
    controller.hidesBottomBarWhenPushed = YES;
    controller.mailComposeDelegate = self;
    [controller setToRecipients:[NSArray arrayWithObject:@"BSCApp@ymail.com"]];
    [controller setSubject:@"My Subject"];
    if (controller) [self presentModalViewController:controller animated:YES];
    [controller release]; 
```

和...

```
- (void)mailComposeController:(MFMailComposeViewController*)controller  
      didFinishWithResult:(MFMailComposeResult)result 
                    error:(NSError*)error;
{
    if (result == MFMailComposeResultSent) {
        NSLog(@"It's away!");
    }
    [self dismissModalViewControllerAnimated:YES];
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:59:58.857

你有`autorelease`和`release`在同一个实例上，所以你过度释放它，后来当你尝试用它做任何事情时，你会因为访问僵尸对象而崩溃。

`autorelease`从第一行删除消息就可以了。

# java - Ant，运行所有 jUnit 测试

> ID：10165045
> 
> 赞同：17
> 
> 时间：2012-04-15T18:56:10.610
> 
> 标签：java, ant

问题：测试（似乎）没有执行

**第一步：编译源码到bin**

```
<target name="compile" depends="init" description="compile the source ">
    <javac srcdir="${src}" destdir="${build}" includeantruntime="true" nowarn="yes" debug="true" />
    <javac srcdir="${src}" destdir="${bin}" includeantruntime="true" nowarn="yes" debug="true" />
</target> 
```

**第 2 步：将测试编译到 bin**

```
<target name="compileTest" depends="compile" description="compile jUnit Test cases ">
    <javac srcdir="${test-dir}" destdir="${bin}" includeantruntime="true" nowarn="yes" debug="true" />
</target> 
```

**第 3 步：找到 Test.class(es) 并运行它们**

```
<target name="test" depends="compileTest">
        <junit>
            <formatter type="plain" usefile="false" />
            <formatter type="plain" />
            <batchtest>
                <fileset dir="${bin}" includes="**/Test*.class" />
            </batchtest>
        </junit>
    </target> 
```

输出：

```
Buildfile: /Users/xx/Documents/repositories/app/build.xml
clean:
   [delete] Deleting directory /Users/xx/Documents/repositories/app/build
   [delete] Deleting directory /Users/xx/Documents/repositories/app/bin
init:
    [mkdir] Created dir: /Users/xx/Documents/repositories/app/build
    [mkdir] Created dir: /Users/xx/Documents/repositories/app/bin
compile:
    [javac] Compiling 145 source files to /Users/xx/Documents/repositories/app/build
    [javac] Compiling 145 source files to /Users/xx/Documents/repositories/app/bin
compileTest:
    [javac] Compiling 24 source files to /Users/xx/Documents/repositories/app/bin
test:
dist:
   [delete] Deleting: /Users/xx/Documents/repositories/app/dist/app.jar
      [jar] Building jar: /Users/xx/Documents/repositories/app/dist/app.jar
     [copy] Copying 1 file to /Users/xx/Documents/repositories/app/dist
   [delete] Deleting: /Users/xx/Documents/repositories/app/dist/app.war
      [war] Building war: /Users/xx/Documents/repositories/app/dist/app.war
     [copy] Copying 1 file to /Users/xx/Documents/repositories/app/dist
BUILD SUCCESSFUL
Total time: 5 seconds 
```

**请问我错过了什么？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-15T19:02:18.957

我相信您可以使用[`batchtest`](http://ant.apache.org/manual/Tasks/junit.html)内部`junit`任务：

```
<target name="test" depends="compileTest">
  <junit>
    <classpath>
      <pathelement location="bin" />    
      <pathelement location="lib/junit-4.10.jar"/>
    </classpath>    
    <batchtest>
       <fileset dir="${test}">
            <include name="**/*Test*" />
       </fileset>
    </batchtest>
    <formatter type="brief" usefile="false"/>
  </junit>
</target> 
```

**请注意**以下事项：

*   In`fileset dir="${test}"`应该指向测试的源目录。
*   在`include name="**/*Test*"`你不应该*指定*扩展`.class`名；它应该是`.java`或什么都不是。
*   您需要将*测试输出目录*添加为`junit`任务元素的“类路径”。

我对一个简单的项目进行了测试，并且使用相同的配置，我得到了简短的结果。我使用了 Apache Ant 1.7.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:02:58.293

像这样使用“ [batchtest](http://ant.apache.org/manual/Tasks/junit.html) ”：

```
 <batchtest>
    <fileset dir="${tst-dir}" includes="**/Test*.class" />
  </batchtest> 
```

示例在[这里](http://ideoplex.com/id/41/ant-and-multiple-junit-test-cases)。

**编辑：**

有关打印摘要，请参阅[ant junit 任务不报告详细信息](https://stackoverflow.com/questions/5521311/ant-junit-task-does-not-report-detail)，[这](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)

请注意，您不再需要 junit 任务中的属性`printsummary="yes"`和`showoutput="true"`。格式化程序现在正在处理输出。

```
<target name="test" depends="compileTest">
    <junit>
        <formatter type="plain" usefile="false" /> <!-- to screen -->
        <formatter type="plain" /> <!-- to file -->

        <batchtest>
            <fileset dir="${bin}" includes="**/Test*.class" />
        </batchtest>
    </junit>
</target> 
```

# python - django：将表单字段添加到从另一个表生成的表单

> ID：10165046
> 
> 赞同：2
> 
> 时间：2012-04-15T18:56:14.010
> 
> 标签：python, django, forms, django-forms

我有这张桌子产品：
尺寸
颜色
等

和另一张桌子图片：
product_id
图片

我已经从 Products 表中生成了表单，但我还需要该字段来向该产品添加图片。是否可以在产品生成的图片表单中添加一个字段？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:45:50.037

`<form>`您可以使用[前缀](https://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms)参数在同一个标​​签中包含多个表单。

从图片模型表单中排除产品字段。在视图中，检查两种形式是否有效。如果两个表格都有效，保存两个表格，但`commit=False`用于图片表格，以便您可以手动设置产品。

综上所述，您的表单和视图应如下所示：

```
class ProductForm(forms.ModelForm):
    class Meta:
        model = Product

class PictureForm(forms.ModelForm):
    class Meta:
        model = Picture
        exclude = ('product',)

def my_view(request):
    if request.method == "POST":
        product_form = ProductForm(prefix="product", data=request.POST)
        picture_form = PictureForm(prefix="picture", data=request.POST, files=request.FILES)
        if product_form.is_valid() and picture_form.is_valid():
            product = product_form.save()
            picture = picture_form.save(commit=False)
            picture.product=product
            picture.save()
            return HttpResponseRedirect("/success_url/")
    else:
        product_form = ProductForm(prefix="product")
        picture_form = PictureForm(prefix="picture")
    return render(request, "my_template.html", {'product_form':product_form, 
                                   'picture_form': picture_form,
                                   }) 
```

您的模板应如下所示：

```
<form>
  <table>
    <tbody>
      {{ product_form }}
      {{ picture_form }}
    </tbody>
  </table>
  <p><input type="submit" value="Submit" /></p>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:14:13.490

简短的回答是肯定的。你必须小心你的模板和视图。

能否请您分享您的代码...查看、django 模型和模板。你在使用模型表格吗？您为什么将它们保留为单独的模型（表格）？

我的建议是，如果您不需要将模型分开，请编辑 Product 模型以包含图片。然后您的表格将很好地满足您的需求。

希望这可以帮助。如果没有，请分享代码。

# java - “找不到主类”错误

> ID：10165058
> 
> 赞同：0
> 
> 时间：2012-04-15T18:57:34.507
> 
> 标签：java, eclipse, netbeans

我有一个由 Eclipse 生成的 .jar，我无法在其他计算机上运行（使用 Windows XP）。出现“找不到主类。程序将退出”消息。那台计算机运行良好的另一个由 Netbeans 生成的 .jar，所以我猜这不是 JRE 的问题。我更新了 JRE，但没有任何改变。问题是什么？

更新：我忘了提，我制作了一个可运行的 jar 文件。在另外两台计算机上它工作正常（win 7 和 XP），但在那台特定的计算机上却不行。

更新 2：这是一个 Swing 应用程序，因此 JAR 是通过双击运行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:53:53.400

检查清单的内容。该`Main-Class: foo.Bar`行必须对应于 jar 文件中的 /foo/Bar.class 条目，并且`foo.Bar.java`必须包含适当的主方法。`Class-Path:`还必须复制该行中的所有 jar 引用。

使用“jar tvf my.jar”查看布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:59:28.523

您必须将 jar 放在类路径中，如下所示：

```
java -classpath "C:\somepath\myapp.jar" mypackage.MyClass 
```

# java - Java this.classProperty 与 classProperty 以防参数变量名冲突？

> ID：10165064
> 
> 赞同：1
> 
> 时间：2012-04-15T18:58:20.777
> 
> 标签：java

如果第一个构造函数没有，有人可以解释输出 0`this`吗？

如果参数变量名称与类属性名称相同，并且我在方法中使用该属性。java如何解释“类属性”或“参数变量”？

没有`this`：

```
 public User(int userId){
    userId = userId;

 } 
```

与`this`：

```
 public User(int userId){
    this.userId = userId;

 }

 public void PrintUserId(){
    System.out.println(this.userId);
}

 User firstUser = new User(123);
 firstUser.PrintUserId(); 
```

// 0 没有这个

//123 用这个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T18:59:30.343

> 如果第一个构造函数没有这个，有人可以解释输出 0 吗？

当然 - 这个声明是一个无操作：

```
userId = userId; 
```

它只是将`userId`参数的变量分配*给自身*。它根本不涉及领域。在该方法中，参数`userId` *隐藏*了所调用的字段`userId`- 因此您必须*明确*表示您要引用该字段，这是第二个版本所做的：

```
this.userId = userId; 
```

我希望任何现代 IDE 都会在第一个版本中突出显示无操作分配并发出警告。

（顺便说一下，术语值得清楚 -*参数*是提供给方法的值；*参数*是声明为方法签名的一部分的变量。同样，它是*字段*而不是*属性*。）

编辑：如果参数有*不同*的名称，例如

```
public User(int id) {
    userId = id;
} 
```

那么参数*不会*隐藏该字段，并且标识符`userId`仍然引用该字段。只需弄清楚标识符的含义是什么-在您的第一个示例中，简单名称`userId`是指参数，这就是导致问题的原因。

编辑：来自[JLS 的第 6.4.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)：

> 某些声明可能在其范围的一部分被另一个同名声明所遮蔽，在这种情况下，不能使用简单名称来引用声明的实体。
> 
> ...
> 
> 一个名为 n 的字段或形式参数的声明 d 在 d 的整个范围内隐藏了在 d 出现点的范围内的任何其他名为 n 的变量的声明。

所以在这种情况下 d 将是形参的声明`userId`，而 d 的范围是构造函数——所以通过构造函数，参数会隐藏字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T19:01:37.347

这是因为[阴影](https://stackoverflow.com/questions/1092099/what-is-variable-shadowing-used-for-in-a-java-class)。

您没有将参数值分配给`userId`成员变量，因为它被隐藏了。因为`int`成员变量被初始化为 0 这就是为什么你看到没有`this`关键字的输出。

# java - 哪个具有当前活跃社区的 Java CLI 库功能更丰富？

> ID：10165065
> 
> 赞同：8
> 
> 时间：2012-04-15T18:58:27.533
> 
> 标签：java, command-line-interface

这个问题的主要目标是创建一个包含易于使用、广泛（或多或少）Java CLI 库（及其特性）的表。所以，如果有人需要这样的库，他可以从这个页面中选择一个，过滤表以获取所需的功能。

## 限制

1.  仅限开源库。
2.  这不是涵盖所有现有 CLI 库的问题的目标。如果我们不添加带有难以找到的文档的“几乎死”的库，那么选择有用的东西会更容易。如果您不确定您的 CLI 库，但对它的功能感到自豪并且可以描述为什么它比其他库更好，请添加带有信息的答案/评论。如果回答/评论获得 10 票赞成，则可以将此类库添加到表中。
3.  同样适用于向表格添加功能。如果功能不是很有用并且您不确定 - 请使用“10 upvotes”方法进行检查。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T18:59:10.933

## Java CLI 库和功能表

[Java CLI 库和功能](https://docs.google.com/spreadsheet/ccc?key=0Atmsh712nYOwdGVuakQ3OXN4NFloUmI2YWJKeEo3SlE)表。
[如果要更新此表，则应在此答案末尾编辑 CSV 数据。将数据复制到文件，将文件导入 GoogleDocs 电子表格。与所有人共享电子表格以只读方式并替换上面的链接。]

表中使用的缩写：

*   是（是 - 好）
*   p（部分 - 平均）
*   n（没有 - 不好）
*   u（未知 - 随意插入正确的值）

## 表中功能说明

### 功能相关（lib A 可以做一些 lib B 不能做的事情）

1.  支持为所有参数/子参数生成用法/帮助文本。
2.  支持至少一个附加级别的子参数（如 JCommander 中的“命令”）。
3.  国际化。

### 项目状态相关（图书馆和文档仍然更新或几年没有更新）

评论：在以下所有情况下，Maven 假定[Maven Central Repository](http://search.maven.org/)和 Ivy - [IvyRoundup Repository](http://ivyroundup.googlecode.com/svn/trunk/repo/modules.xml)。

1.  最新发布日期（如果可用，在 Maven/Ivy 中）。
2.  可用的最新版本（如果可用，在 Maven/Ivy 中）。
3.  Maven/Ivy 中可用版本的数量（仅计算版本，而不是里程碑或快照）。

### 编码风格相关功能

1.  使用注释来提供参数格式。

## 带有链接的库列表^(（不要将链接添加到表中）)

[Commons CLI](http://commons.apache.org/cli/) -[示例](http://commons.apache.org/cli/usage.html)
[JOpt 简单](http://pholser.github.com/jopt-simple/)-[示例](http://pholser.github.com/jopt-simple/examples.html)
[args4j](http://args4j.kohsuke.org/) -[示例](https://github.com/kohsuke/args4j/blob/master/args4j/examples/SampleMain.java)
[JCommander](http://jcommander.org/) - 主页上的所有示例

### 故意忽略的库/功能列表的占位符

* * *

用于表格共享编辑的 CSV 数据。最好在更新 CSV 数据时更新此答案顶部的链接。但它也可以稍后更新。

表中的记录根据 Google 查询“Java CLI”排序。更多被引用的结果将是第一位的，没有人可以说我有偏见。

```
名称,最新发布日期,可从 Maven/Ivy 获得的最新版本,Maven/Ivy 的可用版本数,使用注释提供参数格式,为所有参数生成使用文本,支持至少一个附加级别的子参数,国际化
Commons CLI,2015-06-17,1.3.1,5,n,y,n,n
JOpt Simple,2016-09-25,5.0.3,23,n,y,n,n
args4j,2016-01-31,2.33,31,y,y,n,n
JCommander,2017-02-12,1.64,31,y,y,y,y

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T19:41:38.590

我通常确实会使用[args4j](http://args4j.kohsuke.org/)来满足所有 CLI 需求，但最近我主要使用的是[JCommander](http://jcommander.org/)，这在你的列表中是缺失的。我永远不会使用 Commons CLI，因为像大多数公共库一样，活动很少，并且有更好的解决方案可用。

JCommander 也可以[在](https://github.com/cbeust/jcommander)github 上找到，最后一次提交是 3 天前。

您对子参数的要求可能最好使用 JCommander 的命令来解决，这些命令在其网页上的 GIT CLI 上下文中进行了解释。

支持使用生成，基于`@Parameter`注释中的描述。

这是您的表的 JCommander 的 CSV 行：

`jcommander,2012-01-11,1.23,19,y,y,y`

# objective-c - 将 characterAtindex 与目标 C NSPredicate 类一起使用

> ID：10165066
> 
> 赞同：0
> 
> 时间：2012-04-15T18:58:29.540
> 
> 标签：objective-c, ios, nspredicate

我有一个字符串 pList，我将其捆绑到 NSMutable 数组中。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"small" ofType:@"plist"];
_availableWords = [[NSMutableArray alloc]initWithContentsOfFile:path]; 
```

我想将字符串中的每个字符与指定的字符进行比较，并使用结果创建一个新数组。

我可以使用以下内容过滤第一个和最后一个字符

```
NSPredicate *filter = [NSPredicate predicateWithFormat:@"SELF beginswith[cd] %@", @"B"];

NSPredicate *filter = [NSPredicate predicateWithFormat:@"SELF endswith[cd] %@", @"B"]; 
```

但是当我尝试使用 characterAtIndex 方法检查两者之间的字符时，我得到一个错误。

```
NSPredicate *filter = [NSPredicate predicateWithFormat:@"SELF characterAtIndex:%i LIKE[cd] %@", 3, @"B"]; 
```

我知道我可能会做一个循环来循环检查字符的每个单词，但是考虑到字符串列表可能非常大（超过 100,000 个），使用 NSPredicate 更加整洁并且性能应该更好。

谁能告诉我将 characterAtIndex 与 NSPredicate 一起使用的正确语法或有任何其他解决方案的想法？

更新：根据下面的 Kens 回答，我现在使用下面的代码来检查第一个和最后一个字符之外的字符。例如，下面检查第 4 个字符。

```
NSArray *matches = [_availableWords objectsAtIndexes:[_availableWords indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return (BOOL)([obj characterAtIndex:3] == 'R');
}]]; 
```

但是，当我在调试器中检查匹配数组时，我看到以下错误

```
matches NSArray *   0x06a67ba0 @"Variable is not a CFArray" 
```

并且数组中没有对象。根据 short.pList 中的示例数据，我希望在数组中看到一个对象。

在此先感谢您的帮助，德姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T19:54:08.507

The built in predicates don't support such an operation. However, you can build a predicate which evaluates a block:

```
NSPredicate* filter = [NSPredicate predicateWithBlock:^(id evaluatedObject, NSDictionary *bindings){
    return (BOOL)([evaluatedObject characterAtIndex:3] == 'B');
}]; 
```

Or, if you're just going to turn around and filter an array with this predicate, you can cut out the middleman and use a block to identify elements of an array directly:

```
NSArray* matches = [array objectsAtIndexes:[array indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return (BOOL)([obj characterAtIndex:3] == 'B');
}]]; 
```

# database - 来自数据库的 zend 框架图像

> ID：10165069
> 
> 赞同：0
> 
> 时间：2012-04-15T18:58:43.127
> 
> 标签：database, image, zend-framework

我只是想从页面上显示的数据库中获取图像。

我将图像路径保存为数据库中的 blob，然后尝试在 img 标记的源属性中回显该字段。但是我显示了很多随机字符而没有图像。下面是我在页面视图中想要显示图像的内容：

```
<div id="club_pictures">
    <img id="pic_1" src="<?php echo $this->clubs['pic_1']; ?>" />
    <img id="pic_2" src="<?php echo $this->clubs['pic_2']; ?>" />
    <img id="pic_3" src="<?php echo $this->clubs['pic_3']; ?>" />
</div> 
```

如果我然后在浏览器中单击查看源代码，我会得到我想要显示图像的确切 HTML。

谢谢

里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:20:48.027

事实证明，我应该使用 baseUrl 助手来绝对宣誓图像文件。一旦我这样做了，它就起作用了！感谢[ZendFramework 图像未加载](https://stackoverflow.com/questions/10182892/zendframework-images-not-loading)[这篇文章][1]。我的工作代码如下所示：

```
<img id="pic_1" src="<?php echo $this->baseUrl($this->clubs['pic_1']) ?>" /> 
```

感谢各位大侠的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:06:18.900

您也可以尝试将图像直接嵌入 HTML

```
$base64 = base64_encode($pictureBinary));
$image = '<img src="data:image/gif;base64,' . $base64 . '"  />';
echo $image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:19:32.933

> 我将图像路径保存为数据库中的 blob

这是一个矛盾。您的数据库字段要么包含图像路径，要么包含图像的二进制数据。我假设基于您的其余问题，是后者。

您不能以这种方式将二进制数据回显到页面。您需要创建一个单独的操作或 URL，以根据 URL 中的参数加载正确的图像数据，提供适当的标头（包括正确的 mime 类型），然后回显二进制数据（没有任何其他输出）。在您的 HTML 示例中，您将为每个图像回显此操作的路径。如果您四处寻找，应该有很多示例解释如何使用 PHP 进行此操作。

# c++ - MS VC++ 编译器模棱两可

> ID：10165071
> 
> 赞同：0
> 
> 时间：2012-04-15T18:58:58.633
> 
> 标签：c++, c, visual-c++, runtime

在我的项目中，我尝试重新加载全局运算符 new 并删除（[] 也是）。当我第一次尝试编译时，出现链接错误：

> Main.obj：错误 LNK2005：“void * __cdecl operator new(unsigned int)”(??2@YAPAXI@Z) 已在 LIBCMTD.lib(new.obj) 中定义

当我第二次尝试编译时，错误神奇地消失了！**但有时会回来。** 如何解决这个问题？

运行时库：MTd。

代码：

```
void  operator delete(void * pointer){LALALA} 
```

或者

```
void  __cdecl operator delete(void * pointer){LALALA} 
```

当我执行以下步骤时，此错误会返回：

1.  删除重新加载的新（和其他）
2.  编译
3.  再次重新加载
4.  尝试编译并得到这个错误

在其他情况下，错误消失。这是什么原因？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-15T19:30:14.977

您必须将“new”和“delete”隐式声明为静态成员函数

void* operator new (size_t size);

无效运算符删除 (void *p);

# android - Froyo 的 Android 模拟器“从快照启动”

> ID：10165077
> 
> 赞同：0
> 
> 时间：2012-04-15T18:59:49.833
> 
> 标签：android, emulation, launch, snapshot, android-2.2-froyo

`SDK`我可以在我的& 2.2 (Froyo)`AVD manager`中使用“从快照启动”吗？`Android`现在，该选项是隐式的，我无法检查该选项。

如果 froyo 是可能的，那我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:13:17.350

您只需要编辑现有的`AVD`并启用快照。

# objective-c - 什么是 initWithNibName: 在 OSX 上的等价物？

> ID：10165078
> 
> 赞同：2
> 
> 时间：2012-04-15T18:59:52.393
> 
> 标签：objective-c, macos, cocoa

我正在为 Mac 创建一个测试应用程序，尝试使用 MVC。

我创建了 5 个 nib 文件，每个文件都有不同的窗口，以及每个 nib 的类文件。

当您按下 MainMenu.xib 上的按钮时，我该怎么做才能打开一个新视图？

我已经看到使用`initWithNibName:`, for iOS，但找不到它在 Mac 上的工作原理。还是我以错误的方式解决这个问题？如果是这样，您如何使用 Xcode 在 Mac 应用程序中管理不同的视图和类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T19:22:19.567

因为您提到“我创建了 5 个 nib 文件，每个文件都有不同的窗口，以及每个 nib 的类文件。” 我假设您有 5 个不同的*窗口*（不是视图）并希望在按下按钮时打开它们。

每个窗口 nib 文件都由一个 控制`NSWindowController`，这将是 MVC 中的 C。要实际加载 nib 文件（以编程方式），请为其分配`NSWindowController`; `NSWindowController`OS X 中的 与`UIViewController`iPhone 上的相当。

```
NSWindowController *controller = [[NSWindowController alloc] initWithWindowNibName:@"nib1"] 
```

然后您可以打开/关闭 NSWindowController 管理的窗口。

`[controller showWindow:nil]`显示窗口

`[controller.window makeKeyAndOrderFront:self]`使窗口成为关键窗口。

不过，您可能打算做其他事情，即保持相同的窗口但切换该窗口的内容视图。在这种情况下，您需要包含视图的 nib 文件（并使用 NSViewControllers 加载它们），而不是窗口（因为有窗口是多余的）。

但即使你坚持使用 windows，也要替换 contentView：

```
[currentWindow setContentView:[newWindowController.window contentView]]; 
```

* * *

![在此处输入图像描述](../Images/32fe12d068a9d7722f0374b1e4636a03.png)

![在此处输入图像描述](../Images/62108ba9359a2b457dc3db21b6dce9d7.png)

![在此处输入图像描述](../Images/36d8df871ee78f33ec09870b2f989570.png)

![在此处输入图像描述](../Images/896edf17f110ba121594e3f0e96d48a0.png)

您应该阅读 Apple 提供的关于 Windows、视图和应用程序的所有文档。

*   [基础知识](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW6)
*   [意见](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html)
*   [视窗](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/WinPanel.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:04:32.630

某种意义上的窗口就是“框架”，即它只有三个彩色按钮和一个标题，仅此而已。每个窗口都有一个内容视图，它是窗口的主视图，负责显示内容，例如按钮、文本、图像。内容本身通常实现为视图，即NSButton 和NSTextField 都是NSView 的子类。

OSX View 文档的这一部分可能会有所帮助：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html#//apple_ref/doc/uid/TP40002978- CH4-SW13](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html#//apple_ref/doc/uid/TP40002978-CH4-SW13)

尤其是图 3-1 和 3-2。

我希望这有助于理解。然后，要执行您想做的事情，请按照 Vervious 答案中详述的步骤进行操作。

# php - PHP 5.3.10 的奇怪减法问题

> ID：10165079
> 
> 赞同：0
> 
> 时间：2012-04-15T18:59:54.477
> 
> 标签：php, math

我对 PHP 有一个非常奇怪的问题。

我运行这个非常简单的代码：

```
include("db_credentials.php");
//
$conn = mysql_connect($host, $user, $pass);
$sel = mysql_select_db($db, $conn);
  //
  $result = mysql_query("SELECT * FROM tokens");
  $res = mysql_num_rows($result);
  //
echo (50000-$res); 
```

但最终的减法结果永远不会正确。我试过`echo gettype($res)`并且`$res`是一个整数（它还能是什么？），但我不知道是什么原因造成的。它是一个PHP错误吗？我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:16:29.077

I'm pretty sure I've run into this before but can't remember exactly where or how.

This isn't an answer per say, but rather a suggestion.

Try this code instead

```
include("db_credentials.php");
$conn = mysql_connect($host, $user, $pass);
$sel = mysql_select_db($db, $conn);

$result = mysql_query("SELECT COUNT(*) as count FROM tokens");
$row = mysql_fetch_assoc($result);
$res = $row['count'];

echo (50000-$res); 
```

# java - 迭代 JsonObject 属性

> ID：10165088
> 
> 赞同：44
> 
> 时间：2012-04-15T19:00:46.940
> 
> 标签：java, json, iteration, gson

我想`JsonObject`用[Gson](http://code.google.com/p/google-gson/)遍历大包装。我的最终目标是在内部对象中获取`ArrayList`所有现有的三位`code`整数中的一个`"unterfeld"`，但是一旦我可以遍历外部对象的属性，这将没有问题。

```
{
  "something1": {
    "bezeichnung": "something1",
    "unterfeld": [
      {
        "bezeichnung": "bla1",
        "unterregionen": [
        ],
        "code": 111
      },
      {
        "bezeichnung": "bla2",
        "unterregionen": [
        ],
        "code": 222
      }
    ],
    "code": 3
  },
  "something2": {
    "bezeichnung": "something2",
    "unterfeld": [
      {
        "bezeichnung": "bla3",
        "unterregionen": [
        ],
        "code": 333
      }
    ],
    "code": 6
  },
  "something3": {
    "bezeichnung": "something3",
    "unterfeld": [
      {
        "bezeichnung": "bla4",
        "unterregionen": [
        ],
        "code": 444
      },
      {
        "bezeichnung": "bla5",
        "unterregionen": [
        ],
        "code": 555
      },
      {
        "bezeichnung": "bla6",
        "unterregionen": [
        ],
        "code": 666
      }
    ],
    "code": 9
  }
} 
```

有什么巧妙的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-15T19:20:59.413

您可以使用[`entrySet`](http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/JsonObject.html#entrySet%28%29)来迭代最外层的成员`JsonObject`。

```
JsonObject object;
ArrayList<Integer> codes = new ArrayList<Integer>();
for (Map.Entry<String,JsonElement> entry : object.entrySet()) {
    JsonArray array = entry.getValue().getAsJsonObject().getAsJsonArray("unterfeld");
    for (JsonElement codeHolder : array) {
        codes.add(codeHolder.getAsJsonObject().getAsJsonPrimitive("code").getAsInt());
    }
} 
```

# c++ - 封装 CUDA 内核的最佳方式是什么？

> ID：10165089
> 
> 赞同：4
> 
> 时间：2012-04-15T19:00:52.447
> 
> 标签：c++, cuda

我正在尝试使 CUDA 项目尽可能接近 OO 设计。目前，我找到的解决方案是使用 Struct 封装数据，并且对于需要一些 GPU 处理的每个方法，都需要实现 3 个函数：

1.  对象将调用的方法。
2.  一个**__ *global* __**函数，它将调用该结构的**__ *device* __**方法。
3.  结构内的**__ *device* __**方法。

我会给你一个例子。假设我需要实现一种方法来初始化结构内的缓冲区。它看起来像这样：

```
struct Foo
{
   float *buffer;
   short2 buffer_resolution_;
   short2 block_size_;
   __device__ initBuffer()
   {
      int x = blockIdx.x * blockDim.x + threadIdx.x;
      int y = blockIdx.y * blockDim.y + threadIdx.y;
      int plain_index = (y * buffer_resolution.x) + x;
      if(plain_index < buffer_size)
         buffer[plain_index] = 0;
   }
   void init(const short2 &buffer_resolution, const short2 &block_size)
   {
       buffer_resolution_ = buffer_resolution;
       block_size_ = block_size;
       //EDIT1 - Added the cudaMalloc
       cudaMalloc((void **)&buffer_, buffer_resolution.x * buffer_resolution.y);
       dim3 threadsPerBlock(block_size.x, block_size.y);
       dim3 blocksPerGrid(buffer_resolution.x/threadsPerBlock.x, buffer_resolution.y/threadsPerBlock.y)
       initFooKernel<<<blocksPerGrid, threadsPerBlock>>>(this);
   }
}

__global__ initFooKernel(Foo *foo)
{
   foo->initBuffer();
} 
```

我需要这样做，因为看起来我不能在结构中声明一个**__ *global* __**。我通过查看一些开源项目了解到这种方式，但是实现三个函数来实现每个封装的 GPU 方法看起来很麻烦。所以，我的问题是：这是最好的/唯一的方法吗？这甚至是一种有效的方法吗？

EDIT1：在调用 initFooKernel 之前，我忘记将 cudaMalloc 分配给缓冲区。修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:45:07.840

目标是制作使用 CUDA 的类，而它们从外部看起来像普通类吗？

如果是这样，为了扩展 O'Conbhui 所说的内容，您可以为 CUDA 功能创建 C 样式调用，然后创建一个包装这些调用的类。

因此，在 .cu 文件中，您可以放置​​纹理引用、内核、调用内核的 C 风格函数以及分配和释放 GPU 内存的 C 风格函数的定义。在您的示例中，这将包括一个调用初始化 GPU 内存的内核的函数。

然后，在相应的 .cpp 文件中，导入带有 .cu 文件中函数声明的标头并定义类。在构造函数中，您调用分配 CUDA 内存并设置其他 CUDA 资源（例如纹理）的 .cu 函数，包括您自己的内存初始化函数。在析构函数中，您调用释放 CUDA 资源的函数。在您的成员函数中，您调用调用内核的函数。

# javascript - 停止从 javascript ajax 请求提交

> ID：10165093
> 
> 赞同：1
> 
> 时间：2012-04-15T19:01:25.020
> 
> 标签：javascript, html, ajax, submit, return

我想停止通过 ajax 请求的结果提交的表单...这是我尝试使用的代码：函数 chreg() 应该返回从 ajax 请求给出的布尔值，但它没有！

Javascript：

```
function chreg() {

user = document.getElementById('nome').value;
passw1 = document.getElementById('passw1').value;
passw2 = document.getElementById('passw2').value;
mai = document.getElementById('mail').value;
dat = 'use='+encodeURIComponent(user)+'&pas='+encodeURIComponent(passw1)+'&pas2='+encodeURIComponent(passw2)+'&mail='+encodeURIComponent(mai);

htp = new XMLHttpRequest;
htp.onreadystatechange = function(){

    if (htp.readyState == 4 && htp.status == 200){
        if (htp.responseText == "true"){
            alert('true');
        return true;
        }
        else {
        document.getElementById('er2').innerHTML = '<br/><h3>'+tag_esc(decodeURIComponent(htp.responseText))+'</h3>';
        return false;
        }

    }
};
a = Math.random
  htp.open("POST","checklog.php?a="+a,true);
  htp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    htp.send(dat);   
} 
```

和 HTML：

```
<form action="reg.php" method="POST" onsubmit="return chreg(this);">
<table id="tab2"><tr><td>

<label for="user1">Username: <input type="text" name="user" id="nome" /></label></td>      <td>
<label for="mail">Indirizzo e-mail: <input type="text" name="mail" id="mail" /></label>   </td>
</tr>
<tr><td><label for="pass1">Password: <input type="password" name="pass1" id="passw1" />    </label></td>
    <td><label for="pass2">Password (conferma): <input type="password" name="pass2"  id="passw2" /></label></td></tr>
     <tr><td colspan="2"><br /><input type="submit" class="st" value="Registrati" /></td>    </tr>

</table>
<div id="er2"></div>
</form> 
```

但它不起作用！帮助 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:03:59.307

您的成功处理程序函数返回 true 或 false，但您的 main`chreg`方法不返回。

您需要在`chreg`方法中返回 false 以停止表单提交。

```
 [...]
    htp.send(dat); 
    return false; 
```

由于您正在通过 ajax 处理表单提交，因此您可能根本不希望表单进行回发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:08:55.180

您将无法使其按原样工作，因为默认情况下**AJAX 是*异步的。***这意味着您的方法在请求完成并且其结果为人所知之前*立即*`chreg`发起请求并返回。这是一个问题，因为您无法在结果已知之前返回，因为您需要该结果才能知道要返回*什么。**`chreg`*

 **一种解决方案是通过在此处更改第三个参数来使请求同步：

```
// you will not need to set onreadystatechange at all

htp.open("POST","checklog.php?a="+a,false); // false = synchronous
htp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
htp.send(dat);   
if (htp.responseText == "true"){
    alert('true');
    return true;
}
else {
    document.getElementById('er2').innerHTML = '<br/><h3>'+tag_esc(decodeURIComponent(htp.responseText))+'</h3>';
    return false;
} 
```

这不是最好的解决方案，因为它最终可能会在请求期间锁定 UI，这是不可取的。但是，回到异步模型（没有这个问题）会涉及更多，因为它需要你“向后”做一些事情：

1.  调用函数`chreg`并发出 AJAX 请求；它*总是*返回`false`（所以表单没有提交）
2.  当`onreadystatechanged`您安装的处理程序检测到 AJAX 已完成时，它会检查响应。
3.  如果响应在逻辑上是正确的（实际上需要提交表单），则使用[`form.submit`](https://developer.mozilla.org/en/DOM/form.submit)它来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T10:48:51.793

```
<!DOCTYPE html>
<html>
<body>

<h1>My First JavaScript</h1>

<p>Please input a number.</p>

<input id="demo" type="text">

<script>
function myFunction()
{
var x=document.getElementById("demo").value;
if(x==""||isNaN(x))
        {
        alert("Not Numeric");
        }
}
</script> 
```**

# jquery - 带有 jquery 加载的弹出窗口中的 TinyMCE

> ID：10165094
> 
> 赞同：1
> 
> 时间：2012-04-15T19:01:36.193
> 
> 标签：jquery, tinymce

我正在尝试为我的 textarea使用最新的 tiny mce - [TinyMCE 3.5b3 jQuery package的 jquery 版本。](http://www.tinymce.com/download/download.php)我创建了一个弹出窗口来加载表单，这就是问题所在 - 第**一次**加载后，如果再次单击相同的加载弹出按钮，ajax`load`将中断。

这是查看我的意思的[链接。](http://lauthiamkok.net/bin/tinymce.jquery/)

但是，我用另一个`load` **没有**弹出窗口的 ajax 进行了测试，然后 jquery ajax 就可以正常工作了。

jQuery,

```
$('.button-popup').click(function(){

    var object = $(this);

    // Remove any previous popup first.
    $(".popup").remove();

    // Now prepend a fresh popup.
    $(document.body).prepend("<div id='popup-edit' class='popup'></div>");

    // Load the content into the popup.
    $('#popup-edit').load('full.html', {}, function(){

        $('#binder-form').prepend("<div class='close'><a href='#' class='button-close'> x close </a></div>");   

        $('#binder-form').css({
            padding:"20px", 
            backgroundColor:"#ffffff"
        });

        $('textarea.tinymce').get_tinymce();
        $('form *[title]').inputHints();
        $('.button-submit').submit_form();

        $('.close').click(function(){
            $('.popup').fadeOut('fast',function(){
                //$(this).remove();
            });
            return false;
        });

    });

    return false;
});

$('.button').click(function(){

    $('.content').load('full.html', function() {
        $('textarea.tinymce').get_tinymce();
        $('form *[title]').inputHints();
        $('.button-submit').submit_form();

    });

    return false;
}); 
```

的插件`$('textarea.tinymce').get_tinymce();`在[jsfiddle](http://jsfiddle.net/UfLdL/)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:12:39.167

问题是`#binder-form`关闭模式后仍然在页面上。您应该在模态关闭时删除`#binder-form`元素。

只需取消注释在关闭单击事件中注释掉的那一行：

```
 $('.close').click(function(){
        $('.popup').fadeOut('fast',function(){
            $(this).remove(); // this will remove the popup element
        });
        return false;
    }); 
```

我倾向于避免在使用 ajax 的页面中依赖元素 id 属性。拥有两个具有相同 id 的元素会导致各种难以捕捉的错误。坚持在 jQuery 中为此使用类选择器。

[编辑] 嗯，不，你是对的，你正在删除`.popup`下一次点击，一个异常导致它破坏点击处理程序并点击链接到`full.html`.

我会说小 mce 出于某种原因引发错误，尝试将其包装在 try catch 块中以查看确切原因。

# java - Jena TDB：嵌套事务

> ID：10165096
> 
> 赞同：4
> 
> 时间：2012-04-15T19:01:48.230
> 
> 标签：java, transactions, jena, triplestore

我想重写我当前的代码以使用事务。但是，根据 Jena 文档 ( [http://incubator.apache.org/jena/documentation/tdb/tdb_transactions.html](http://incubator.apache.org/jena/documentation/tdb/tdb_transactions.html) ) 不支持嵌套事务。

假设，我想从数据库中查询一些数据，并为找到的每个资源添加一个 rdfs:label。我是否必须像下面的代码那样严格分离读写代码，还是有更有效的方法来实现这个例子？

```
Dataset dataset = ...; 
dataset.begin(ReadWrite.READ);

ArrayList<Resource> res = new ArrayList<Resource>();

try{
    QueryExecution qe = QueryExecutionFactory.create("SELECT ?x WHERE { ?x a <Whatever> . }", dataset); 
    ResultSet rs = qe.execSelect();

    try
    {
        while(rs.hasNext())
        {
            QuerySolution s = rs.nextSolution();
            RDFNode node = s.get("x"); 
            if(node.isResource) res.add(node.asResource()); 
        }

    }finally{ qe.close(); }

}finally{ dataset.end(); }

dataset.begin(ReadWrite.WRITE); 
try{
    Property label = model.getProperty("http://www.w3.org/2000/01/rdf-schema#label"); 
    for(Resource r : res)
    {
        r.addProperty(label, "text"); 
    }
    dataset.commit();

}finally{ dataset.end(); } 
```

我已经在[semanticweb.com](http://web.archive.org/web/20150721121104/http://answers.semanticweb.com:80/questions/15852/jena-tdb-nested-transactions)上发布了这个问题，但没有收到任何答案，所以我希望这里有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:26:25.620

确实，TDB 不支持嵌套事务，但是您可以在 WRITE 事务中执行任意多的读取操作。因此，启动一个 ReadWrite.WRITE 事务并在那里进行所有处理。您想要做的事情不需要嵌套事务。

有关 TDB 事务支持的更多信息，请查看此处的官方文档：

*   [http://incubator.apache.org/jena/documentation/tdb/tdb_transactions.html](http://incubator.apache.org/jena/documentation/tdb/tdb_transactions.html)

# python - 如何获得正则表达式以将非 ASCII 字符识别为字母？

> ID：10165102
> 
> 赞同：5
> 
> 时间：2012-04-15T19:02:41.287
> 
> 标签：python, regex, utf-8, character-encoding, ascii

我正在从瑞典语网页中提取信息。此页面使用的字符如下：öäå。

我的问题是，当我打印信息时，öäå 消失了。

我正在使用 Beautiful Soup 提取信息。我认为问题在于我对提取的字符串执行了一堆正则表达式，例如`location = re.sub(r'([^\w])+', '', location)`删除除字母之外的所有内容。在此之前，我猜 Beautiful Soup 对字符串进行了编码，因此 öäå 变成了类似于 /x02/ 的十六进制值。

因此，如果我是正确的，那么正则表达式正在删除 öäå，对，我的意思是十六进制字符中唯一应该留下的是正则表达式之后的 x，但是我的页面上没有 x 而不是 öäå，所以这个小理论也许不正确？无论如何，如果它是对的或错的，你如何解决这个问题？当我稍后将提取的信息打印到我的网页时，我在谷歌应用引擎中使用 self.response.out.write() （不知道这是否有助于解决问题）

编辑：瑞典网站上的编码是 utf-8，我网站上的编码也是 utf-8。EDIT2：您可以将 ISO-8859-10 用于瑞典语，但根据 google chrome，此特定站点上的编码是 Unicode(utf-8)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T19:31:01.627

**始终使用 unicode**并仅在必要时转换为编码表示。

对于这种特殊情况，您还需要使用[`re.U`](http://docs.python.org/library/re.html#re.U)标志以便`\w`匹配 unicode 字母：

```
#coding: utf-8

import re

location = "öäå".decode('utf-8')
location = re.sub(r'([^\w])+', '', location, flags=re.U)

print location # prints öäå 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:32:29.247

如果您可以在每个步骤之前和之后转储字符串，这将有所帮助。

首先检查您的值`re.UNICODE`，请参阅[此](http://docs.python.org/library/re.html#re.UNICODE)

# objective-c - NSCoding - initWithCoder 和先前编码的对象的缺失属性

> ID：10165105
> 
> 赞同：2
> 
> 时间：2012-04-15T19:03:01.060
> 
> 标签：objective-c, nscoding

我对 NSCoding 方法有一些问题。当我保存我的自定义类时，似乎一切正常，它实际上`.plist`在我的文档目录中创建了一个文件，并且该文件包含一个`NSMutableArray`完整的我的自定义对象。

**这是我的自定义对象的接口和实现**

## 。H

```
@interface CustomObj : NSObject <NSCoding> 
```

## .m

```
- (void)encodeWithCoder:(NSCoder *)aCoder
{

    [aCoder encodeObject: _titleCobj forKey:@"Title"];

  [aCoder encodeObject: _typeCobj forKey:@"Type"];

   [aCoder encodeObject: _imageCobj forKey:@"Image"];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self) {

        NSString *title = [aDecoder decodeObjectForKey:@"Title"];
        self.titleCobj = title;

        NSString *type = [aDecoder decodeObjectForKey:@"Type"];
        self.typeCobj = type;

        UIImage *image = [aDecoder decodeObjectForKey:@"Image"];
        self.imageCobj = image;

    }
    return self;
} 
```

**这是我用来查找文档目录路径的代码**

```
- (NSString *)documentsDirectory
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return documentsDirectory;
}

- (NSString *)dataFilePath
{
    return [[self documentsDirectory] stringByAppendingPathComponent:@"Favorites.plist"];
} 
```

**这里取而代之的是两种保存和加载数据的方法**

```
- (void)load
{
    NSString *path = [self dataFilePath];

    if ([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        NSLog (@"<__________________________LOADING__________________________>");

        NSData *data = [[NSData alloc] initWithContentsOfFile:path];
        NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
        self.favorites = [unarchiver decodeObjectForKey:@"Favorites"];
        [unarchiver finishDecoding];

    } else {

        NSLog (@"<__________________________FIRST TIME LOAD__________________________>");

        self.favorites = [[NSMutableArray alloc] initWithCapacity:20];
 }
}

- (void)save
{
    NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:_favorites forKey:@"Favorites"];
    [archiver finishEncoding];
    [data writeToFile:[self dataFilePath] atomically:YES];
} 
```

在我的应用程序中，我有 2 个 TableViewController。

1.  一个带有 2 个自定义对象的 tableView（对于两个对象，单元格都显示一个图像、一个带有标题的标签和一个带有类型的标签），当我单击一个单元格时，它会自动将该对象保存在“收藏夹列表”中。

2.  和一个加载收藏夹数组的 tableView。当我加载数组时，它实际上具有我之前保存的正确数量的自定义对象。

但是从日志中我可以理解发生了一些奇怪的事情：

```
2012-04-15 20:37:52.910 Fav[565:15803] ESISTE un file e l'instance dell'array è ---> (
    "<CustomObj: 0x806d790>",
    "<CustomObj: 0x806d850>",
    "<CustomObj: 0x806d830>",
    "<CustomObj: 0x806d9d0>",
    "<CustomObj: 0x806d9d0>",
)
2012-04-15 20:37:52.910 Fav[565:15803] L'array was loaded, and it is composed by --> 5 objects
2012-04-15 20:37:52.912 Fav[565:15803] INSTANCE CustObj PER CELLA - NUMERO #0_______________
2012-04-15 20:37:52.912 Fav[565:15803] NUOVA INSTANCE - Instance title --> (null)
2012-04-15 20:37:52.912 Fav[565:15803] NUOVA INSTANCE - Instance type --> (null)
2012-04-15 20:37:52.913 Fav[565:15803] NUOVA INSTANCE - Instance image --> (null)
2012-04-15 20:37:52.914 Fav[565:15803] INSTANCE CustObj PER CELLA - NUMERO #1_______________
2012-04-15 20:37:52.914 Fav[565:15803] NUOVA INSTANCE - Instance title --> (null)
2012-04-15 20:37:52.914 Fav[565:15803] NUOVA INSTANCE - Instance type --> (null)
2012-04-15 20:37:52.914 Fav[565:15803] NUOVA INSTANCE - Instance image --> (null)
2012-04-15 20:37:52.915 Fav[565:15803] INSTANCE CustObj PER CELLA - NUMERO #2_______________
2012-04-15 20:37:52.915 Fav[565:15803] NUOVA INSTANCE - Instance title --> (null)
2012-04-15 20:37:52.915 Fav[565:15803] NUOVA INSTANCE - Instance type --> (null)
2012-04-15 20:37:52.916 Fav[565:15803] NUOVA INSTANCE - Instance image --> (null)
2012-04-15 20:37:52.916 Fav[565:15803] INSTANCE CustObj PER CELLA - NUMERO #3_______________
2012-04-15 20:37:52.917 Fav[565:15803] NUOVA INSTANCE - Instance title --> (null)
2012-04-15 20:37:52.917 Fav[565:15803] NUOVA INSTANCE - Instance type --> (null)
2012-04-15 20:37:52.917 Fav[565:15803] NUOVA INSTANCE - Instance image --> <UIImage: 0x843acf0>
2012-04-15 20:37:52.917 Fav[565:15803] INSTANCE CustObj PER CELLA - NUMERO #4_______________
2012-04-15 20:37:52.918 Fav[565:15803] NUOVA INSTANCE - Instance title --> (null)
2012-04-15 20:37:52.918 Fav[565:15803] NUOVA INSTANCE - Instance type --> (null)
2012-04-15 20:37:52.918 Fav[565:15803] NUOVA INSTANCE - Instance image --> <UIImage: 0x843acf0> 
```

我不明白为什么`ivars`我所有的`customObj`都是零，但对于最后两个实例，实际上有图像？我的对象是相同的，但只有一个我可以实际加载图像并将其显示在`tableView`.

我只能想象我的编码器做错了什么。我真的提前感谢你的答案:)

# xcode - 在所有应用程序用户之间同步 DropBox 数据

> ID：10165107
> 
> 赞同：1
> 
> 时间：2012-04-15T19:03:47.830
> 
> 标签：xcode, dropbox

我正在创建一个应用程序，它将相同的文件保存在应用程序文件夹中的 dropBox 上。所有应用程序用户上传的所有已保存文件都应显示在表格视图中。我得到的结果是只显示用户的文件，但我希望数据在所有应用程序用户之间同步。我在 Dropbox 开发者论坛上发布了一个此类问题，这就是答案：

“Dropbox API 用于在每个特定授权帐户内同步文件，而不是在所有授权帐户之间同步文件。

如果您确实需要在帐户之间复制文件，请查看新的 /copy_ref 调用： [https](https://www.dropbox.com/developers/reference/api#copy_ref) ://www.dropbox.com/developers/reference/api#copy_ref ”

...

“这真的取决于你的应用程序的结构/使用。如果它只是一个 iOS 应用程序，没有服务器端组件，你需要为用户构建一些方法来相互发送副本引用。”

我试图理解副本 ref 是什么，但不是很清楚。他们的意思是我需要构建一个像 mySql 这样的服务器来执行此操作，还是我可以集成在应用程序本身中共享所有数据的能力？

# android - Android：防止显示关闭

> ID：10165108
> 
> 赞同：9
> 
> 时间：2012-04-15T19:03:48.280
> 
> 标签：android, android-manifest

我写了一个小游戏，只能通过一些传感器控制。没有触摸屏输入或类似的东西。

问题是，游戏几秒钟后，屏幕关闭（因为没有触摸输入）

是否有类似清单条目的东西可以防止屏幕出现这种行为？

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-15T19:07:22.903

在超级调用之后，在游戏的 Activity 中将此代码用作 onCreate() 的第一行：

```
this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

这将导致系统为您处理屏幕。

最好的祝愿，蒂姆

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-15T19:19:22.407

最简单的方法是添加`android:keepScreenOn="true"`到您的 xml 中的布局中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T19:09:51.877

使用唤醒锁

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
WakeLock mWakeLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK | PowerManager.ON_AFTER_RELEASE, "My Tag");
mWakeLock.acquire(); 
```

并将权限放入您的清单文件中

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

不要忘记释放你的锁`onStop()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T19:09:41.233

您可以请求此处指定的 WakeLock：http: [//developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

# php - 从 iframe 制作登录表单

> ID：10165109
> 
> 赞同：0
> 
> 时间：2012-04-15T19:03:58.213
> 
> 标签：php, html

我想做一个“登录按钮”（我可以做到），然后我可以在屏幕上弹出一个 iframe，但是！然后我想让 iframe 重定向主网站而不是 iframe，我该怎么做？:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:08:37.270

在 iframe 中

```
<form method=".." action=".." id="loginForm" target="_parent" >
...
</form> 
```

或通过 javascript 使用该`self.parent.location.href`属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:09:23.250

它必须是 iframe 吗？为什么不使用点击登录按钮时可见的隐藏 div？这样，表格已经在“主页”上。

# php - 向客户请求瓷砖的最佳方式？

> ID：10165114
> 
> 赞同：0
> 
> 时间：2012-04-15T19:04:33.340
> 
> 标签：php, javascript, google-maps

我正在尝试实现将标记存储在标记具有纬度/经度的数据库中的方法和

还有包含此标记的图块的 ID。你可以在这里看到我在说什么：

[http://msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)

我的问题是根据什么瓷砖向服务器发出请求的最佳方式是什么

当前在用户的视口中？

我不太擅长 js 和谷歌地图。但也许有人已经尝试解决这个问题

问题。我需要的只是一个 js 脚本示例，它将确定用户视口中的图块

并仅请求尚未请求的图块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:40:01.113

您可以通过为“boundschanged”添加googlemaps提供的api监听器向您的服务器发出请求，并在相同的回调函数中发出ajax请求，google为您提供一个api来获取地图的当前边界框，发送这些参数到你的服务器..

现在使用它来使用 where 子句过滤您的数据库。

你的 where 子句应该是：

```
lat>=minLat && lng>=minLng && lat<=maxLat && lng<=maxLng 
```

并选择需要与您的 lat/lng 和 id 一起发送给客户端的任何相应数据。将其序列化为 json，然后将数据发送到客户端，现在循环遍历您的结果集，再次使用 google maps api 创建标记并将其添加到地图中，一切就绪。希望这对如何完成它提供了一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:35:47.680

[http://kashey.ru/maps/ajax-loading-as-tiles/](http://kashey.ru/maps/ajax-loading-as-tiles/)

在我看来，请求瓷砖的最简单和有趣的方式。

# ruby-on-rails - Rails 应用程序不会记住用户并允许重新登录

> ID：10165117
> 
> 赞同：0
> 
> 时间：2012-04-15T19:05:48.177
> 
> 标签：ruby-on-rails, rails-activerecord

我正在完成一个基于 Hartl 教程的项目。我已经设置了一个有效的用户身份验证模型......主要是。用户可以注册，但我在登录过程中遇到问题。如果用户退出，他们就不可能登录。我已经验证数据库正在保存用户的注册信息，所以问题在于确认用户已经注册。我查看了我的日志，但它们没有帮助。

这就是我得到的：

```
 Started POST "/sessions" for 127.0.0.1 at 2012-04-15 13:56:46 -0500
    Processing by SessionsController#create as HTML
    Parameters: {"utf8"=>"✓", "authenticity_token"=>"itOIPKPrXlymcBujKMu4Xjwvs6GlD3jteBQJf+/mYEY=", "session"=>{"email"=>"tester3@tester3.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
    User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'tester3@tester3.com' LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
  Rendered layouts/_stylesheets.html.erb (2.0ms)
    User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1
    CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_footer.html.erb (0.3ms)
  Completed 200 OK in 30ms (Views: 16.1ms | ActiveRecord: 2.6ms) 
```

但我应该看到的是这个。

```
 Started POST "/sessions" for 127.0.0.1 at 2012-04-15 12:50:24 -0500

    Processing by SessionsController#create as HTML

    Parameters: {"utf8"=>"✓", "authenticity_token"=>"h/M5VYBaG16sGiGHTWo26GJSU1/TlMNFjQd5TN1VZ3Y=", "session"=>{"email"=>"tester3@tester3.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}

    User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'tester3@tester3.com' LIMIT 1

    User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'tester3@tester3.com' LIMIT 1[0m

  Redirected to http://localhost:3000/users/103

  Completed 302 Found in 19ms 
```

我的问题是：解决这个问题的最佳方法是什么？
我应该开始寻找哪些“明显”的地方。我正在使用此处找到的用户身份验证代码，并且我已经在其他项目中成功实现了它。就是这一个给我带来了麻烦。这是我的验证码。

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent.signed[:remember_token] = [user.id, user.salt]
    self.current_user = user
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= user_from_remember_token
  end

  def signed_in?
    current_user.present?
    p "user signed_in? method called" 
    p current_user
  end

  def sign_out
    cookies.delete(:remember_token)
    self.current_user = nil
    p "user has signed out" #Method does NOT get called
  end

  def current_user?(user)
    user == current_user
  end

  def authenticate
    deny_access unless signed_in?
  end

  def deny_access
    store_location
    redirect_to signin_path, :notice => "Please sign in to access this page."
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    clear_return_to
  end

  private

    def user_from_remember_token
       p "Looking user up from the cookie"
      User.authenticate_with_salt(*remember_token)
    end

    def remember_token
      cookies.signed[:remember_token] || [nil, nil]
    end

    def store_location
      session[:return_to] = request.fullpath
    end

    def clear_return_to
      session[:return_to] = nil
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:34:18.953

你要求很明显，所以这里很明显......

您可以在操作开始时打印出 cookie 值。

您可以在操作的各个点引发异常。我喜欢这样做。它比“p”更可靠，因为打印可以通过缓冲输出。我将要打印的信息放入异常的字符串中。开发模式还吐出有用的信息，如参数。

# c# - 如何在搜索 ebay 产品时指定多个 X-EBAY-SOA-GLOBAL-ID？

> ID：10165118
> 
> 赞同：1
> 
> 时间：2012-04-15T19:05:49.023
> 
> 标签：c#, ebay-sdk

如何在搜索 ebay 产品时指定多个 X-EBAY-SOA-GLOBAL-ID？

这是指向 GlobalID 的链接。

[http://developer.ebay.com/DevZone/finding/Concepts/SiteIDToGlobalID.html](http://developer.ebay.com/DevZone/finding/Concepts/SiteIDToGlobalID.html)

但是，如果我尝试指定多个，我会得到异常“没有这样的 GlobalID”。

我试着给

```
1) "EBAY-US,EBAY-GB"
2) "EBAY-US;EBAY-GB"
3) "EBAY-US EBAY-GB" 
```

他们都没有成功。谁能让我知道我该怎么做？我用谷歌搜索了这个，但即使在谷歌上也没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:01:18.277

这不是您要寻找的内容，但如果在全球、北美或仅在欧洲进行搜索，则可以使用指定为“LocatedIn”的 ItemFilter 标记。

它应该搜索指定的各个站点。

这是[一篇](https://ebaydts.com/eBayKBDetails?KBid=1962)详细介绍它的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:47:42.353

我不认为你可以。我不认为它旨在同时搜索超过 1 个网站。但是您可以尝试使用不同的全局 ID 搜索“x”次。

这就是我使用 ebay API (FindingAPI) 的方式：

```
 ClientConfig config = new ClientConfig();
        config.GlobalId = "EBAY-GB";
        config.EndPointAddress = "http://svcs.ebay.com/services/search/FindingService/v1";
        config.ApplicationId = Options.generalOptions.DeveleporKey;
        FindingServicePortTypeClient client = FindingServiceClientFactory.getServiceClient(config); 
```

这就是我用来进行搜索的内容： `client.findItemsAdvanced(request);`

因此，您创建了不同的客户端（1 US 和 1 GB）并执行以下操作： `var responseGB = GBclient.findItemsAdvanced(request);`

`var responseUS = USclient.findItemsAdvanced(request);`

希望这会有所帮助，但不知道您使用的是什么 API。

# ace-editor - 王牌编辑器，水平滚动不准确，如何解决？

> ID：10165120
> 
> 赞同：2
> 
> 时间：2012-04-15T19:06:11.913
> 
> 标签：ace-editor

使用 Ace 编辑器，工作正常，除了： 和行的开头和结尾，如果文档中至少有一行不适合屏幕，则水平滚动不完整。对于行首的插入符号，一旦视图被水平滚动，当插入符号位于行首时，它不会完全向后滚动，因此插入符号不会显示。恼人的。与行尾的插入符号相同（尽管它似乎根本不滚动，而不是不向右对齐，所以可能是不同的错误。有人知道如何修复吗？哪些版本受到影响？

（哦，对了，忘了说：排水沟已启用。）

（编辑二：使用谷歌浏览器 18.0.1025.162）

（E#3：忘了提一下：使用 Shift+滚轮我可以手动修复它，向左滚动。（E4：……这只是一个线索；不是解决方案。一个人不应该做任何无关的手动鼠标.))

（Edit#N：设法隐藏排水沟：“editor_loaded.renderer.setShowGutter(false);”。问题仍然存在。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T14:03:56.297

好吧，根据要求（由“WarFox”），这就是我为解决 0.2.0 版中的滚动问题所做的工作，直接来自本地存储库。HTH，YMMV。当然，不保证修改此版本或任何版本。this.scrollCursorIntoView 的代码修改为：

```
this.scrollCursorIntoView = function() {
    var log = function (s) { 
        // console.log("### scrollCursorIntoView ###: " + s); 
    };
    // log("(scrollCursorIntoView...)");
    function loge(expr) {
        var value = eval(expr);
        log("" + expr + " => " + value);
    }

    // the editor is not visible
    if (this.$size.scrollerHeight === 0)
        return;

    var pos = this.$cursorLayer.getPixelPosition();

    var left = pos.left + this.$padding;
    log("left = " + left);
    var top = pos.top;
    log("top = " + top);

    if (this.scrollTop > top) {
        this.scrollToY(top);
    }

    if (this.scrollTop + this.$size.scrollerHeight < top + this.lineHeight) {
        this.scrollToY(top + this.lineHeight - this.$size.scrollerHeight);
    }

    var scrollLeft = this.scroller.scrollLeft;

    var left_ = left - this.characterWidth;
    log("(scrollLeft > left): " + scrollLeft + " > " + left);
    log("(scrollLeft > left_): " + scrollLeft + " > " + left_);
    if (scrollLeft > left_) {
        this.scrollToX(left_);
    } else {
        log("NOT (scrollLeft > left): " + scrollLeft + " > " + left);
        log("NOT (scrollLeft > left_): " + scrollLeft + " > " + left_);
    }

    loge("scrollLeft");
    log("scrollLeft = " + scrollLeft);
    log("this.$size.scrollerWidth = " + this.$size.scrollerWidth);
    log("left = " + left);
    log("this.characterWidth = " + this.characterWidth);

    var right_side_scroll_yes = scrollLeft + this.$size.scrollerWidth < left + this.characterWidth;
    if (right_side_scroll_yes) {
        log("(right side scroll...)");
        //loge("this.layerConfig.width");
        if (left > this.layerConfig.width) {
            log("right #1");
            log("this.layerConfig.width = " + this.layerConfig.width);
            this.$desiredScrollLeft = left + 2 * this.characterWidth;
            this.scrollToX(this.$desiredScrollLeft);
        } else {
            log("right #2");
            var tmp = Math.round(left + this.characterWidth - this.$size.scrollerWidth);
            loge("tmp");
            this.scrollToX(tmp);
        }
    } else {
        log("NOT (right_side_scroll_yes): " + scrollLeft + " > " + left);
    }
}; 
```

显然，日志调用对于除调试之外的任何事情都是不必要的。

# android - 不同屏幕尺寸上的android布局

> ID：10165121
> 
> 赞同：0
> 
> 时间：2012-04-15T19:06:12.420
> 
> 标签：android, layout

我有一个应用程序试图在平板电脑 7' 上实现它。我所做的就是以下。在文件夹 drawable 和 layout 上是我对普通智能手机屏幕的默认设置。我还创建了 layout-xlarge 和 drawable-mdpi，其中第一个我更改了大小，第二个我添加了不同大小的图像。我的问题是默认获取我在drawable-mdpi文件夹中拥有的图像大小，而不是从默认的drawable文件夹中获取。我究竟做错了什么？我也没有在清单上声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:48:20.790

mdpi 是默认设置，因此 drawable 和 drawable-mdpi 是同一件事，我不知道在这种情况下选择哪个 Android - 但是您正在为平板电脑设计，而平板电脑通常是 mdpi 设备，因此它可以正确地从 drawable- mdpi。如果您希望将单独的 mdpi 资源用于超大屏幕，则可以使用 drawable-xlarge-mdpi。顺便说一句，请记住 7" 1024x600 平板电脑很大，而不是 xlarge - 所以尝试 drawable-large-mdpi 和 layout-large-mdpi 看看是否能满足您的需求。

# jquery - jQuery按钮淡入淡出循环，直到按下另一个按钮

> ID：10165128
> 
> 赞同：0
> 
> 时间：2012-04-15T19:07:31.280
> 
> 标签：jquery

这就是我想要完成的。我有两个按钮，当我按下第一个按钮时，它会淡出到 50%，当淡出完成后，它会淡出到 100%，然后它会永远循环动画，直到按下另一个按钮，然后再按下下一个按钮完全一样。因此，每次单击按钮时，它都会轻轻闪烁……这可能吗？

我一直在玩这个，但只是不让它工作。

```
<html>

<head>
  <title></title>
<style type="text/css">
#blnk a { cursor: pointer; }
</style>

<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

<script language="JavaScript" type="text/javascript">
<!--
$("#blnk a img").children().click(function(){
          $(this).animate({"backgroundColor":""},500);},
    function(){
          $(this).animate({"backgroundColor":""},500);});
//-->
</script>
</head>

<body>
    <div id="blnk"><a src="#"><img src="http://www.auviproducciones.com/more/imagenes/imagen5.jpg"></a></div>
    <div id="blnk"><a src="#"><img src="http://www.auviproducciones.com/more/imagenes/imagen6.jpg"></a></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:20:16.637

我制作了一个 jsFiddle 来解决您的问题。我相信您可以将其调整为您的代码：http: [//jsfiddle.net/SFYGX/2/](http://jsfiddle.net/SFYGX/2/)

让我解释一下我在那里做了什么：点击时，我将所有不透明度重置为 1，并停止所有动画，然后，我开始一个递归循环来为点击的项目设置动画。

（在尝试之前，请确保您没有像现在这样使用重复的 id (id="blnk")）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:22:27.647

在 animate 函数上，您可以使用一个回调。如果将动画放入函数中，则可以使用回调再次调用该函数。在函数中，您可以包含一个标志，该标志在发生某些事情并停止循环或调用另一个函数时设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:36:11.447

我的解决方案：

javascript:

```
$(function() {
    var currentId;
    var animate = function(obj) {
            if (currentId == $(obj).attr('id')) $(obj).fadeTo('slow', 0.5, function() {
                $(obj).fadeTo('slow', 1);
                animate(obj);
            });
        }
    $(".blnk a img").click(function() {
        currentId = $(this).attr('id');
        animate(this);
    });
}); 
```

​html:

```
<div class="blnk"><a src="#"><img id="img1" src="http://www.auviproducciones.com/more/imagenes/imagen5.jpg"></a></div>
<div class="blnk"><a src="#"><img id="img2" src="http://www.auviproducciones.com/more/imagenes/imagen6.jpg"></a></div> 
```

CSS：

```
.blnk a { cursor: pointer; } ​ 
```

[演示](http://jsfiddle.net/usernamedemanded/MBsnN/11/)

# input - valueUpdate：Knockoutjs 2.0 中输入 type="numeric" 的 'afterkeydown'

> ID：10165131
> 
> 赞同：9
> 
> 时间：2012-04-15T19:07:42.303
> 
> 标签：input, numbers, knockout.js

[参见[小提琴](http://jsfiddle.net/odedbd/hY5T2/)的插图]

我设置了一个值绑定到一个`input`数字类型，并希望绑定`observable`立即反映对字段值的更改。为此，我设置了`afterkeydown`valueUpdate 绑定。这适用于使用向上箭头和向下箭头键更改数字输入。但是，如果我使用浏览器生成的（在 chrome 中测试）增量/减量控件更改数字，则更改只会在将焦点更改为不同元素时反映出来。我认为这反映了更改事件时的默认更新。

我的问题是，是否有任何方法可以使用向上向下键盘错误和浏览器生成的向上/向下错误控件来设置更新以进行这两种更改？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T20:07:18.030

`valueUpdate`附加绑定可以接受一系列事件。`oninput`单击向上/向下箭头时似乎触发了该事件。

所以，你可以像这样绑定它：

`<input type="number" data-bind="value: y, valueUpdate: ['afterkeydown', 'input']"/>`

[http://jsfiddle.net/rniemeyer/hY5T2/9/](http://jsfiddle.net/rniemeyer/hY5T2/9/)

# java - Android 将数据永久存储在 SQLite 上还是临时存储？

> ID：10165135
> 
> 赞同：1
> 
> 时间：2012-04-15T19:08:39.310
> 
> 标签：java, android, sqlite

似乎 SQLite（第一次印象）临时存储它的数据，同时执行 SQLiteOpenHelper 并在那里创建表，并在 onCreate 方法中插入行。问：是否有能力永久存储数据，并且每次应用启动时不创建数据库和表？据我了解，当用户退出应用程序时，数据会被杀死？
抱歉我的英语和一个蹩脚的问题 - 我是 Android 新手 =) 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:15:30.997

你的第一印象是错误的。SQLite 表在 Android 中是持久的——它们作为文件存在于基于应用程序包 ID 的特定目录中。

SQLiteOpenHelper 的想法是将数据库创建和数据库升级封装在一个地方，这样其他使用数据库的代码就不必担心这些事情——它只是调用了助手，当助手返回时，数据库正是应有的样子。

这就是为什么帮助程序有一个“onCreate”方法（在数据库不存在时使用）和一个“onUpdate”方法（在数据库已经存在但版本号不同时使用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T19:11:14.387

仅当数据库不存在时才创建数据库。这是唯一一次`onCreate`调用该方法。创建后，数据库将一直存在，直到您明确删除它或卸载应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T19:11:56.400

如果您`SQLiteOpenHelper`用于创建数据库，它将在您第一次使用该`SQLiteOpenHelper`对象时创建，它将是永久 的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T05:22:54.540

请通过在真实设备上运行应用程序进行检查。您可能在模拟器上使用它。

当您在模拟器中启动应用程序时，会创建数据库，当您关闭模拟器时，由模拟器创建的临时环境被破坏，因此您将无法取回它。在实际设备上运行是否可以将数据库永久存储在您的设备上。所以下次当你打开你的应用程序时，它会连接到现有的数据库，你可以对它进行操作。

您没有提供有关您使用的是真实设备还是模拟器的信息，请描述一下。

让我知道是否还有更多 - 谢谢。

# c# - 为什么我在 xna 4.0 开始游戏时我的球是模糊的？

> ID：10165138
> 
> 赞同：2
> 
> 时间：2012-04-15T19:09:14.853
> 
> 标签：c#, xna, xna-4.0

我正在使用此代码，但我仍然不明白为什么我开始游戏时球是模糊的，有人可以帮我吗？？我只是在用户点击时试图给我球但我不知道为什么它是模糊的，我还在检查代码，请帮助

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Critters
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        Texture2D ball;

        Vector2 playerPosition;
        Vector2 direction;
        Vector2 destination;        
        float speed;

        float playerPosX;
        float playerPosY;

        MouseState oldState;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
            this.IsMouseVisible = true;

        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            graphics.PreferredBackBufferWidth = 700;
            graphics.PreferredBackBufferHeight = 500;
            graphics.IsFullScreen = false;
            graphics.ApplyChanges();
            Window.Title = "Darrells Game";

            playerPosY = graphics.GraphicsDevice.Viewport.Height / 10 * 8;
            playerPosX = graphics.GraphicsDevice.Viewport.Width / 2;
            playerPosition = new Vector2(playerPosX, playerPosY);
            destination = playerPosition;

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            ball = Content.Load<Texture2D>("orb");

            // TODO: use this.Content to load your game content her
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            if (Vector2.DistanceSquared(destination, playerPosition) >= speed * speed)
            {
                MovePlayer();
            }
            else
            {
                playerPosition = destination;
            }

            MouseState leftState = Mouse.GetState();
            MouseState rightState = Mouse.GetState();             

            if ((leftState.LeftButton == ButtonState.Pressed && rightState.RightButton == ButtonState.Pressed))
            {
                int mouseX = leftState.X;
                int mouseY = leftState.Y;
                destination = new Vector2(mouseX, mouseY);
                speed = 8.0f;

            }

            else if (leftState.LeftButton == ButtonState.Pressed)
            {
                int mouseX = leftState.X;
                int mouseY = leftState.Y;
                destination = new Vector2(mouseX, mouseY);
                speed = 2.0f;
            }

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();
            DrawPlayer();
            spriteBatch.End();

            // TODO: Add your drawing code here

            base.Draw(gameTime);
        }

        private void DrawPlayer()
        {

            Vector2 textureCentre = new Vector2(ball.Width / 2, ball.Height / 2);

            spriteBatch.Draw(ball, playerPosition, null, Color.White, 0f, textureCentre, 0.8f, SpriteEffects.None, 1f);

        }

        private void MovePlayer()
        {

            {
                direction = destination - playerPosition;
                direction.Normalize();
                playerPosition += direction * speed;
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:27:48.650

在您的抽奖电话中：

```
spriteBatch.Draw
(
   ball,                   // texture
   playerPosition,         // location
   null,                   // source rect
   Color.White,            // color
   0f,                     // rotation
   textureCentre,          // origin
   0.8f,                   // scale
   SpriteEffects.None,     // effects
   1f                      // layerDepth
); 
```

您已将比例设置为`0.8f`。这将使您的纹理比实际更小，这将涉及一些“模糊”。将比例值更改为`1f`应该消除由缩放引起的任何模糊。

编辑：如果您所指的模糊是在您单击之前发生的闪烁，那是由于目的地与当前位置完全相同。然后，您的`MovePlayer`方法会导致当前位置变为`(NaN, NaN)`：

```
// before the user has clicked, destination == playerPosition
private void MovePlayer()
{
   direction = destination - playerPosition;  // direction = (0, 0)
   direction.Normalize();                     // direction = (NaN, NaN)
   playerPosition += direction * speed;       // playerPosition = (NaN, NaN)
} 
```

快速解决此问题的方法是在您的`Initialize`方法中，更改行：

```
protected override void Initialize()
{
   ...

   // change this
   mDestination = mPlayerPosition;

   // to this
   mDestination = mPlayerPosition + new Vector2(1, 1); 
```

# javascript - jQuery .on() 和 .delegate() 在 iPad 上不起作用

> ID：10165141
> 
> 赞同：31
> 
> 时间：2012-04-15T19:09:22.303
> 
> 标签：javascript, jquery, ipad, delegation

如果您在桌面上尝试此代码段，一切正常。**每当您在iPad**
上尝试时，它都不会执行任何操作。

 **```
$('body').on('click', '#click', function() {
    alert("This alert won't work on iPad");
});
```

```
div { 
  font-size: 24px; 
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="click">Click here</div>
```

简单`.click()`的处理程序有效，但这不是我想要的。这同样适用于`.delegate();`和`.live()`

这是一个错误还是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-15T19:55:43.323

这是一个 Safari 移动错误/功能：点击事件不会一直冒泡到正文。

添加`onclick=""`是一种已知的解决方法，但恕我直言，将侦听器附加到`<body>`.

见：[http ://www.quirksmode.org/blog/archives/2010/09/click_event_del.html](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-29T13:33:58.060

将 iOS 上正文的光标样式更改为“指针”，一切都会完美运行。您不必在要点击的每个元素上添加 onclick="" ...

```
<script type="text/javascript">
    $(function() {
        // The trick
        if (/ip(hone|od)|ipad/i.test(navigator.userAgent)) {
           $("body").css ("cursor", "pointer");
        }
        // The test
        $("body").on("click", "#click", function() {
            alert("This also works on iOS !");
        });
    });
</script>
<div id="click">Click here</div> 
```

我知道你现在在想什么：“WTF！”。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-15T19:09:36.873

我不确定为什么它不起作用，这可能是一个错误，但有一个很好的解决方法。只需放入`onclick=""`您要委派的 div 即可完美运行

```
<div id="click" onclick="">Click here</div>
<script>
$("body").on("click", "#click", function() {
    alert("This works on iPad");
});
</script> 
```

[小提琴](http://jsfiddle.net/8SEgW/13/embedded/result/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-11-13T20:57:32.267

在**iOS**上，没有光标样式就**没有事件冒泡**。
因此，在您的 CSS 中，您需要添加`cursor: pointer;`到元素中。

```
$('body').on('click', '#click', function() {
    alert("This alert won't work on iPad");
});
```

```
#click { 
  font-size: 24px; 
  cursor: pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="click">Click here</div>
```

我知道很久以前就有人问过这个问题，但我认为一个**简单的 CSS 解决方案**可能会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-05T14:38:13.307

我在[http://www.danwellman.co.uk/fixing-jquery-click-events-for-the-ipad/上找到了解决方案](http://www.danwellman.co.uk/fixing-jquery-click-events-for-the-ipad/)

执行以下方法：

```
var isIPad = function() {
    return (/ipad/i).test(navigator.userAgent);
};
var isIPhone = function() {
    return (/iphone/i).test(navigator.userAgent);
};
var isIPod = function() {
    return (/ipod/i).test(navigator.userAgent);
}; 
```

并在您绑定 click-event-handler 的位置执行此操作：

```
var eventName = (isIPod() || isIPad() || isIPhone()) ? "touchstart" : "click";
// if you are using jquery-mobile
eventName = (isIPod() || isIPad() || isIPhone()) ? "touchstart" : "vclick";

$(".selector").bind(eventName, function(e) {
    //do something here
});
// or
$(document).on(eventName, ".selector", function(e) {
    //do something here
}); 
```

就是这样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-16T12:45:29.150

我在 iPhone 5C 及以下机型上遇到了这个问题。
这对我有用：

```
body {
  cursor:pointer;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-06T08:54:58.293

我在 html 正文前附加一条消息时遇到问题。我在 [ [jQuery 'click' 事件在 iOS Safari 上不起作用？](https://stackoverflow.com/questions/27374764/jquery-click-event-doesnt-work-on-ios-safari/39891581#39891581][1])

我用这个

```
$('body').on('click touchstart', 'someselect', function(){}) 
```

它适用于 iPhone 4S 和 iPhone 5S**

# c# - 未调用 CustomValidationAttribute 指定的方法

> ID：10165143
> 
> 赞同：7
> 
> 时间：2012-04-15T19:09:26.617
> 
> 标签：c#, validation, data-annotations

我正在使用 System.ComponentModel.DataAnnotations.CustomValidationAttribute 来验证我的 POCO 类之一，当我尝试对其进行单元测试时，它甚至没有调用验证方法。

```
public class Foo
{
  [Required]
  public string SomethingRequired { get; set }
  [CustomValidation(typeof(Foo), "ValidateBar")]
  public int? Bar { get; set; }
  public string Fark { get; set; }

  public static ValidationResult ValidateBar(int? v, ValidationContext context) {
    var foo = context.ObjectInstance as Foo;
    if(!v.HasValue && String.IsNullOrWhiteSpace(foo.Fark)) {
      return new ValidationResult("Either Bar or Fark must have something in them.");
    }
    return ValidationResult.Success;
  }
} 
```

但是当我尝试验证它时：

```
var foo = new Foo { 
  SomethingRequired = "okay"
};
var validationContext = new ValidationContext(foo, null, null);
var validationResults = new List<ValidationResult>();
bool isvalid = Validator.TryValidateObject(foo, validationContext, validationResults);
Assert.IsFalse(isvalid); //FAIL!!! It's valid when it shouldn't be! 
```

它甚至从不进入自定义验证方法。是什么赋予了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:16:23.983

Try using the overload that takes a bool that specifies if all properties should be validated. Pass true for the last parameter.

```
public static bool TryValidateObject(
    Object instance,
    ValidationContext validationContext,
    ICollection<ValidationResult> validationResults,
    bool validateAllProperties
) 
```

If you pass false or omit the validateAllProperties, only the RequiredAttribute will be checked. Here is the [MSDN documentation](http://msdn.microsoft.com/en-us/library/dd411772.aspx).

# hibernate - 具有字段子集的 JPA 更新模型

> ID：10165144
> 
> 赞同：1
> 
> 时间：2012-04-15T19:09:28.160
> 
> 标签：hibernate, model-view-controller, jpa, playframework

我正在使用游戏框架 1.2.4，并且我有一个个人资料页面，其中包含许多分段的元素（基本信息、教育、工作经验等）。

`Person model`看起来像这样：

```
@Entity
@Table(name="Persons")
public class Person extends GenericModel implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="Id",nullable=false,unique=true)
    private int id;

    @Column(name="FirstName",nullable=false)
    private String firstName;

    @Column(name="MiddleInitial")
    private String middleInitial;

    @Column(name="LastName",nullable=false)
    private String lastName;

    @Column(name="Born",nullable=false)
    @Temporal(javax.persistence.TemporalType.DATE)
    private java.util.Date born;

    @Column(name="Sex",nullable=false)
    private String sex;

    @Email
    @Column(name="Email",nullable=false,unique=true)
    private String email;

    @Column(name="City")
    private String city; 
```

...

在控制器中我有这个：

```
public static void updatePerson(Person person) {
              person.validateAndSave(); 
 } 
```

我想向模型发送更新的子集，即具有提交选项的表单的一部分只有`person.firstName, person.lastName, person.dob`

在视图中，我使用 JPA 对象绑定的点表示法发送参数，即（person.firstName，person.lastName 等）来自播放文档：

[http://www.playframework.org/documentation/1.2/controllers#objectbinding](http://www.playframework.org/documentation/1.2/controllers#objectbinding)

我遇到的问题是，这种类型的绑定看起来需要模型的所有字段，所以我在那些没有在特定视图中设置的字段上遇到 NULL 违规。

我当前的代码正在使用`JPA.em().createQuery`解决它，但我遇到了不同的类型问题......

我正在寻找更好的方法？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:25:55.287

你有几个选项在这里

1) 创建仅用于事务的表单对象。向导过程的每个部分都有一个不同的对象，向导过程的最后部分会将所有这些对象转换为最终的模型对象。

2）第二个选项是在你的模型中允许空值并接受你的数据库可能包含不完整的对象数据

3）在最后一步之前不要保存到数据库中，而是将您在以前表单上收集的数据保存到当前表单的隐藏字段中，以便在最后一步中，所有数据都作为对象传入，并且可以简单地保存。

# php - 用mysql & php抓取无订单用户，简化这个

> ID：10165150
> 
> 赞同：0
> 
> 时间：2012-04-15T19:10:13.080
> 
> 标签：php, mysql, sql

目前，这是我的 php 脚本：

```
 $users = DB::select('id', 'email', 'firstname', 'lastname')->from('users')->execute()->as_array();

            $orders = array();
            foreach($users as $user)
            {
                $anyOrder = DB::select('id')->from('orders')
                ->where('orders.date_created', 'BETWEEN', array($from, $to))
                ->and_where('orders.user_id', '=', $user['id'])
                ->and_where_open()
                ->and_where('orders.status', '=', 'new')->or_where('orders.status', '=', 'delivered')
                ->and_where_close()
                ->execute()->count();

                if($anyOrder == 0)
                {
                    $orders[] = array('firstname' => $user['firstname'], 'lastname' => $user['lastname'], 'email' => $user['email']);
                }
            } 
```

（DB::select() 是一个查询，我使用的是 kohana 查询生成器）。

这很好用，直到现在我有超过数千名用户。

如何简化和更快地做到这一点？

该脚本所做的是将所有在 $from 和 $to 之间没有订单的人保存到 $orders 数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:20:41.200

使用 SQL 连接查询并选择无订单结果。沿着

```
SELECT id, email, firstname, lastname
FROM users
LEFT OUTER JOIN orders ON users.id = orders.user_id
    AND orders.date_created BETWEEN $start AND $end
    AND orders.status = 'new' OR orders.status = 'delivered'
WHERE orders.id IS NULL 
```

使用联接要好得多，因为您将在一个查询中获得所需的一切，而不是每个用户一个。感谢编辑查询的人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:02:52.793

/*获取所有没有任何订单的用户*/

```
SELECT id, email, firstname, lastname 
FROM users 
LEFT JOIN orders 
  ON users.id = orders.user_id 
  AND orders.date_created BETWEEN $start AND $end 
WHERE orders.id IS NULL
UNION 
```

/*联合所有用户*/

```
(SELECT id, email, firstname, lastname 
FROM users 
INNER JOIN orders 
  ON users.id = orders.user_id 
  AND orders.date_created BETWEEN $start AND $end 
```

/* 那些具有“新”和“已交付”状态的除外

/*注意：如果用户 bob 有 2 个订单，一个处于“延期交货”状态，一个处于“新”状态，那么 bob 会出现……这是你想要的吗？*/

```
MINUS
SELECT id, email, firstname, lastname 
FROM users 
INNER JOIN orders 
  ON users.id = orders.user_id 
  AND orders.date_created BETWEEN $start AND $end
WHERE Orders.status in ('new','delivered')) 
```

# cakephp-2.0 - 在服务器上安装/设置 cakePHP

> ID：10165153
> 
> 赞同：0
> 
> 时间：2012-04-15T19:10:23.980
> 
> 标签：cakephp-2.0

我正在尝试在服务器上设置我的 cakephp 工作购买的 godaddy 共享服务器

当我访问我的网站[http://xyz.com/cake/](http://xyz.com/cake/)时 出现 404 错误

```
The requested URL /xyz/cake/app/webroot/ was not found on this server. 
```

有什么帮助吗？

谢谢，
萨蒂什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T19:55:45.720

如果要在子目录中运行 Cake，则需要`RewriteBase`在您的中设置正确的。`.htaccess`

`/xyz/cake/.htaccess`和`/xyz/cake/webroot/.htaccess`（假设是 Cake 和您的应用程序目录的路径）都`/xyz/cake`需要更新。

/xyz/cake/.htaccess:

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /xyz/cake/
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
 </IfModule> 
```

/xyz/cake/webroot/.htaccess:

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /xyz/cake/
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

# android - 将音频和视频从 Android 手机流式传输到 RTMP 服务器的最佳方式

> ID：10165154
> 
> 赞同：4
> 
> 时间：2012-04-15T19:10:34.977
> 
> 标签：android

我正在寻找使用 RTMP 将视频和音频从 Android 手机流式传输到服务器的最佳方式。我在这个问题上花了一些时间，到目前为止，我只能使用 FFMPEG 流式传输视频。有很多方法可以为 Android 构建 lib，我想通过更多的工作，我也应该能够流式传输音频。

[问题是我需要用 h264 编码视频，用 AAC 编码音频，使用 Android 的MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html)很容易做到这一点。所以我开始寻找适用于 Android 的 RTMP 库，发现这个[Red5 端口](http://code.google.com/p/android-rtmp-client/)似乎运行良好。使用它，我可以非常轻松地流式传输存储在手机上的视频文件，并且音频也可以正常工作。

所以我的问题如下：有没有办法将 Android 的 MediaRecorder 输出连接到 RTMP 库？我想方法是在 setOutputFile() 中“伪造”一个文件，然后将数据发送到 RTMP 编码方法，但我想不出办法。

任何线索都是受欢迎的，真的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:33:03.013

您可以使用 setOutputFile()将数据写入[FileDescriptor而不是文件。](http://developer.android.com/reference/java/io/FileDescriptor.html)

```
FileDescriptor fd = mLocalSender.getFileDescriptor();
mRecorder.setOutputFile(fd); 
```

因此您可以将数据流式传输到套接字。从此套接字获取数据如下所示：

```
mLocalServer = new LocalServerSocket(LOCAL_SOCKET_ADDRESS);

mLocalReceiver = new LocalSocket();
mLocalReceiver.connect(new LocalSocketAddress(LOCAL_SOCKET_ADDRESS));

mLocalSender = mLocalServer.accept();

if (mLocalReceiver != null)
{
    mInputStream = mLocalReceiver.getInputStream();
} 
```

我不知道您的 RTMP 库是如何工作的，但我认为，应该可以将输入流传递给库的某些方法。

有关更多信息，您还可以查看[spydroid 应用程序](http://code.google.com/p/spydroid-ipcamera/)。它包含许多有用的内容，可用于通过 RTP 进行视频流式传输，而无需任何特殊的流式传输库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:42:26.190

可能正在使用 Red5 媒体服务器可以帮助您。它附带了一些工作示例，您可以将其用于流式传输。

# objective-c - PDF 在 iOS 4.3 中显示不正确，但在 iOS 5.0 及更高版本中有效

> ID：10165156
> 
> 赞同：0
> 
> 时间：2012-04-15T19:11:02.933
> 
> 标签：objective-c, ios, xcode, pdf, uiwebview

我有以下代码仅在 InfoViewController 中使用简单的 UIWebView 显示 pdf：

```
- (void)loadPDF
{
    NSString *pathToInfoPDF = [[NSBundle mainBundle] pathForResource:@"info" 
        ofType:@"pdf"];
    NSURL *pdfUrl = [NSURL fileURLWithPath:pathToInfoPDF];
    NSURLRequest *pdfUrlRequest = [NSURLRequest requestWithURL:pdfUrl];
    [self.pdfWebView loadRequest:pdfUrlRequest]; 
} 
```

这是使用信息按钮作为模式视图呈现给用户的：

```
- (IBAction)showInfo:(id)sender 
{
    NSLog(@"Info Button pressed!");
    InfoViewController *infoViewController = [[InfoViewController alloc] 
        initWithNibName:@"InfoViewController" bundle:nil];
    infoViewController.delegate = self;
    [self presentModalViewController: infoViewController animated: YES];
} 
```

这在 iOS 5.0 及更高版本中效果很好：

![iOS 5.0 中的 pdf 视图](../Images/83691926914fd7c292f474d0678c329b.png)

但是，当我尝试在 iOS 4.3.2 中加载它时，页面不会全屏显示：

![iOS 4.3.2 中的 pdf 视图](../Images/cbb87027d792e35c94f9156b8ba24817.png)

无论如何使用iOS 4.3以及iOS 5.0及更高版本的设备制作pdf全屏？或者我在 UIWebView 中显示 pdf 的方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:43:04.810

尝试使用`scalesPageToFit = YES;`. 它应该工作。

# python - Pygame Font.render() 用尖音符、波浪线或 circunflex 裁剪大写字母

> ID：10165158
> 
> 赞同：1
> 
> 时间：2012-04-15T19:11:23.700
> 
> 标签：python, fonts, rendering, pygame, diacritics

我正在尝试重新创建我的小型 python/pygame 项目以包含多种语言，我遇到的问题之一是由于某种原因，重音符号、波浪线等被从顶部裁剪，因此只有 1 或 2 个像素它们是可见的。这适用于 ie 中的大多数“重音”大写字母。法语、波兰语、西班牙语、德语等。这发生在 python 2.7.2 和 python 3.2 中，使用默认的 pygame 字体。

尝试呈现以下字符串：'ÀÂÉÈÊËÎÏÔÙÛÜŸ'

得到这样的渲染图像： ![法语字母](../Images/ca231f37d26f07c8329350a95c1b6f7e.png)

我想，我使用的是标准渲染/blitting 技术：

```
 # -*- coding: utf-8 -*-
    #...
    value = 'ÀÂÉÈÊËÎÏÔÙÛÜŸ'
    if sys.version_info < (3, 0):
        try:
            val = unicode(value, "utf-8")
        except UnicodeDecodeError:
            val = value
        text = font.render("%s" % (val), 1, font_color)
    else:
        val = value
        text = font.render("%s" % (val), 1, font_color)
    self.image.blit(text, (300,300))
    #... 
```

以前有人遇到过这个问题吗？任何解决方法？或者仅仅是 pygame.font.render 创建的表面太小而无法容纳顶部所需的额外空间？也许某种方式来设置行高，但我还没有找到任何地方......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:28:59.430

尝试指定一种字体而不是您正在使用的字体（您使用的是默认字体吗？） - 这很可能是字体的问题。- 它适用于我在系统中尝试过的所有字体。

对于完整的游戏，理想的解决方案是将字体文件与您的项目一起分发 - 因为 Pygame 会打开给定“.ttf”文件名的字体。

对于使用系统字体，您必须链接调用 pygame.font.get_fonts()- 以获取字体名称，`pygame.font.match_font`以实际获取给定字体名称的字体文件的路径，最后 pygame.font.Font 传递该路径并获取可用字体对象的点大小（使用`render`方法）

```
>>> pygame.font.get_fonts()
[u'lohitbengali', u'liberationserif', u'dejavuserif', u'wenquanyimicroheimono', u'dejavulgcsans', u'arplumingcn', u'msam10', u'jomolhari', u'esint10', u'cmr10', u'arplumingtwmbe', u'dejavusans', u'lohitgujarati', u'lohitpunjabi', u'arplumingtw', u'arpluminghk', u'dejavusansmono', u'lohitassamese', u'lohitkannada', u'wenquanyimicrohei', u'khmeros', u'waree', u'lohittamil', u'wasy10', u'padauk', u'lohitdevanagari', u'paktypenaqsh', u'abyssinicasil', u'meera', u'eufm10', u'cmex10', u'khmerossystem', u'lklug', u'lohitoriya', u'msbm10', u'liberationsans', u'rsfs10', u'opensymbol', u'cmsy10', u'lohittelugu', u'paktypetehreer', u'cmmi10', u'liberationmono', u'khmeroscontent']

>>> f2 = pygame.font.match_font(u'paktypetehreer')
>>> f2
u'/usr/share/fonts/paktype-tehreer/PakType_Tehreer.ttf'
>>> font = pygame.font.Font(f2, 60)
>>> f = font.render(u"maçã, joão", 1, (255,255,255))
>>> scr.blit(f, (200,100)) 
```

# c# - 旋转矩形时计算角度

> ID：10165167
> 
> 赞同：0
> 
> 时间：2012-04-15T19:13:09.677
> 
> 标签：c#, winforms

我有一个 C#（Windows 窗体）程序，它在图片框上有一个矩形。它们也可以以一定角度绘制（旋转）。我想用我的鼠标移动来旋转那个矩形。

我有移动那个矩形的代码

```
Rectangle areaRect = new Rectangle(100,100, 300, 300);
Bool dragging = false;
Point ptOld = new Point(0, 0);

protected override void OnPaint(PaintEventArgs e)
{
  Graphics dcPaint = e.Graphics;
  dcPaint.DrawRectangle(rectPen, areaRect);
}

protected override void OnMouseDown(MouseEventArgs e)
{
  ptOld = new Point(e.X, e.Y);
  dragging = true;
}

protected override void OnMouseMove(MouseEventArgs e)
{
  if(dragging = true) 
  {
    Point ptNew = new Point(e.X, e.Y);
    int dx = ptNew.X - ptOld.X;
    int dy = ptNew.Y - ptOld.Y;
    areaRect.Offset(dx, dy); // This one moves the rectangle 
    ptOld = ptNew;
    this.Invalidate();
  }
}

protected override void OnMouseUp(MouseEventArgs e)
{
  dragging = false;
} 
```

现在我的要求是旋转这个矩形，任何想法，如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:30:31.623

我想你想计算 X 轴上两点之间的角度。如果是这样，请尝试以下代码：

```
const double Rad2Deg = 180.0 / Math.PI;

return Math.Atan2(ptOld.Y - e.Y, e.X - ptOld.X) * Rad2Deg; 
```

另请查看有关[计算两点之间角度的这篇文章](http://www.codeproject.com/Tips/200672/Angle-between-two-points-and-x-axis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:21:52.260

您可以使用新旧 x 鼠标坐标（在您的示例中为 dx）之间的差异来计算角度。您可以使用`RotateTransform`Graphics 对象的方法来旋转矩形。

除了翻译之外，我修改了您的代码以进行旋转。您可以使用鼠标左键移动矩形，也可以使用鼠标右键旋转它。

```
Rectangle areaRect = new Rectangle(100, 100, 300, 300);
bool dragging = false;
bool rotating = false;
Point ptOld = new Point(0, 0);
float angle = 0;

protected override void OnPaint(PaintEventArgs e)
{
    Graphics dcPaint = e.Graphics;
    dcPaint.RotateTransform(angle);
    dcPaint.DrawRectangle(Pens.Black, areaRect);
    dcPaint.RotateTransform(-angle);
}

protected override void OnMouseDown(MouseEventArgs e)
{
    ptOld = new Point(e.X, e.Y);
    if (e.Button == MouseButtons.Left)
    {
        dragging = true;
    }
    if (e.Button == MouseButtons.Right)
    {
        rotating = true;
    }
}

protected override void OnMouseMove(MouseEventArgs e)
{
    if (dragging == true)
    {
        Point ptNew = new Point(e.X, e.Y);
        int dx = ptNew.X - ptOld.X;
        int dy = ptNew.Y - ptOld.Y;
        areaRect.Offset(dx, dy); // This one moves the rectangle 
        ptOld = ptNew;
        this.Invalidate();
    }
    if (rotating == true)
    {
        Point ptNew = new Point(e.X, e.Y);
        int dx = ptNew.X - ptOld.X;
        angle = angle + dx / 10f;
        ptOld = ptNew;
        this.Invalidate();
    }
}

protected override void OnMouseUp(MouseEventArgs e)
{
    dragging = false;
    rotating = false;
} 
```

现在，矩形围绕其左上角旋转。如果在旋转之前应用平移，则可以使其围绕其中间旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:30:41.077

当用鼠标旋转矩形时，您定义旋转中心（`centerXY`），在您的情况下，它可能是矩形的中心。

在鼠标按下时记录鼠标坐标，`mouse_downXY`. 这两点定义了一条基线。移动鼠标时，您将定义另一条线，由当前鼠标坐标和矩形中心形成。

因此，您需要计算线 ( `centerXY`, `mouse_downXY`) 和 ( `centerXY`, `current_mouseXY`) 之间的角度。知道 3 点坐标计算 2 条线之间的角度是简单的三角函数，所以我不会为你编写代码 :) 但是[这篇文章](https://stackoverflow.com/q/1211212/11343)有答案。

# php - 在 codeigniter 中使用模块

> ID：10165168
> 
> 赞同：1
> 
> 时间：2012-04-15T19:13:13.423
> 
> 标签：php, codeigniter

我正在使用带有 codeigniter 的wiredesigns moduler 扩展框架，我试图找出我需要做什么才能让我的链接正常工作，因为我试图加载的页面没有加载。我收到一条错误消息说“找不到您请求的页面”。

```
-application/controllers/dashboard.php
-application/modules/bios/controllers/quotes 
```

当我在仪表板控制器中时，它会显示仪表板视图文件，并且有一个链接，我想在 bios 模块中打开引号控制器，因为它会显示引号视图页面，所以我有什么是正确的关联：

```
link url/modules/bios/quotes 
```

这不是链接应该看起来的样子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:22:04.457

除非设置已被操纵，否则 url 应该看起来像这样

```
url/<module name>/<controller name>/<method name> 
```

# c++ - 如何将 char 符号作为动作数学的一个字符？

> ID：10165173
> 
> 赞同：1
> 
> 时间：2012-04-15T19:13:52.053
> 
> 标签：c++, math, char, substitution

我的程序将表达式减少到一个值。我在将“字符符号”更改为动作字符时遇到问题。你能给我一些简单的解决方案或想法吗？

我试过：

```
(tab[i]-'0') 'sign' (tab[i+1]-'0'); 
```

这是完整的代码：

```
#include <cstdlib>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{

    char* tab = "12+";
    int b = sizeof (tab);
    char* tmp = new char[b] ;
    tmp [b-1] = '\0';

    int k = b/3;

    for(int i=0; i<k; i++){

            if(isdigit(tab[i]) && isdigit(tab[i+1]) ){

               if(tab[i+2]=='+' || tab[i+2]=='-' || tab[i+2]=='*'){
                  char sign = tab[i+2];

                  int n = (tab[i]-'0') + (tab[i+1]-'0');  //here is a problem, i want to replice + as a char sign which will be recognized

                  tmp[i] = n+'0';
               }
               else goto LAB;
            }

            else if (isdigit(tab[i]) && isdigit(tab[i+2])){

            }
            else if (isdigit(tab[i+1]) && isdigit(tab[i+2])){

            }

            else 
            LAB:
            tmp[i]= tab[i];

    }

    cout<<"Import "<<tmp[0]-'0'<<endl;        

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:21:59.787

您不能用用户给出的符号替换运算符或函数名称，因为编译器必须知道应该调用哪个函数，并且**没有将“+”字符转换为`operator+(int, int)`嵌入语言的调用的**机制。你必须自己写。

最简单的解决方案是显式编写您想要支持的每个运算符：

```
int n;
switch(tab[i+2]){
    case '+':
        n = (tab[i]-'0') + (tab[i+1]-'0');
        break;
    case '-':
        n = (tab[i]-'0') - (tab[i+1]-'0');
        break;
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:25:25.190

```
int n;
switch(sign){
   case '-': 
      n = (tab[i]-'0') - (tab[i+1]-'0');
      break;
   case '+': 
      n = (tab[i]-'0') + (tab[i+1]-'0');
      break;
   case '*': 
      n = (tab[i]-'0') * (tab[i+1]-'0');
      break;
   default: 
      // handle error here;
      break;
} 
```

# perl - How to use Perl Storable, changing a hash value

> ID：10165174
> 
> 赞同：2
> 
> 时间：2012-04-15T19:13:53.887
> 
> 标签：perl, storable

I'm no Perl expert, so this is probably an easy question.

I've been using Storable, and following [this example](http://perldoc.perl.org/Storable.html#EXAMPLES) to store a hash. First, I store the original hash.

```
use Storable qw(store retrieve freeze thaw dclone);
%color = ('Blue' => 1, 'Red' => 0.8, 'Black' => 0, 'White' => 1);
store(\%color, 'mycolors'); 
```

Then I retrieve it. (different script)

```
use Storable qw(store retrieve freeze thaw dclone);
$colref = retrieve('mycolors');
printf "Blue is still %lf\n", $colref->{'Blue'}; 
```

My question is how can I change one of the hash values? For example, do something like

```
$colref->{'Blue'} = 2;
store(\%color, 'mycolors'); 
```

in the second script.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T19:26:29.647

需要改变

```
store(\%color, 'mycolors'); 
```

至

```
store($colref, 'mycolors'); 
```

# java - android adMob could not find class

> ID：10165175
> 
> 赞同：0
> 
> 时间：2012-04-15T19:14:23.993
> 
> 标签：java, android, eclipse, admob

adMob was working fine until I update eclipse to latest version, now when starting, an error is reported, java.lang.NoClassDefFoundError: com.google.ads.AdRequest. But adMob library is attached to the project!! Thank you.

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);               // Emulator
        adRequest.addTestDevice("3xxxxxxxxxx");  

        AdView adView = new AdView(this, AdSize.BANNER, "axxxxxxxxxx");

        LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

        layout.addView(adView);

        adView.loadAd(new AdRequest());
    } 
```

and proper reference and permissions on manifest

```
 <activity android:name="com.google.ads.AdActivity"
         android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />

 <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T19:17:47.397

Make sure your .jar files are checked in Properties --> Java Build Path --> Order and Export.

# drupal - Cordova: Upload file to an external Drupal site

> ID：10165176
> 
> 赞同：0
> 
> 时间：2012-04-15T19:14:43.197
> 
> 标签：drupal, file-upload, cordova

Essentially what I am trying to accomplish is the following:

I currently have Cordova loading a page from my external Drupal site. The webpage loads fine, looks great on the screen, the only problem is that it won't allow me to upload a file to through the app itself.

I tried opening the same page in my Android's web browser (Dolphin) and the link worked just fine.

Any help would be appreciated, even if you tell me its not possible, that way I can stop looking and try out another option.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:21:28.350

使用 FileTransfer 对象： [http ://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:29:08.570

为此，您需要允许 Cordova 写入 drupal 站点所在的服务器，这不是一个好主意。

# perl - Convert variable into array in perl

> ID：10165177
> 
> 赞同：3
> 
> 时间：2012-04-15T19:14:53.423
> 
> 标签：perl

I have a requirement to send my variable to array. I have something like this

```
var = "abc|xyz|123"; 
```

I want to have the above values in to array.

```
$arr[0]="abc";
$arr[1]="xyz";
$arr[2]="123"; 
```

I used the following way but I am not getting the array size while using this way

```
$var = "abc|xyz|123";
$var =~ tr/|/\n/; # transforming "|" to new line "\n"
@a = $var;
print $a[0]; 
```

The complete transformed output is sent to only variable instead of individual variables.

Please help me on this.

Regards, Sriharsha Kalluru.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:18:41.867

Use [`split`](http://perldoc.perl.org/functions/split.html):

```
@a = split(/\|/, $var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:18:29.793

Although I'm not quite sure what you intend to do, but it seems to me like you're trying to solve a problem on your own which has already a solution?!

This should do the trick: [Using the Perl split() function](http://perlmeme.org/howtos/perlfunc/split_function.html)?

```
 my $data = 'Becky Alcorn,25,female,Melbourne';
 my @values = split(',', $data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:18:41.930

You want to use split

```
$var = 'abc|xyz|123';
@a = split '|', $var;
print $a[0]; 
```

# model-view-controller - 播放框架Image.resize on png失去透明度

> ID：10165180
> 
> 赞同：1
> 
> 时间：2012-04-15T19:15:09.177
> 
> 标签：model-view-controller, upload, playframework, image, image-resizing

我正在使用播放框架 1.2.4。我在删除 png 图像中的透明度的 Image.resize() 方法时遇到问题？

我的代码如下所示：

```
public static void uploadPhoto(int user_id, File picture) throws IOException{

        Images.resize(picture, picture, 200, 200, true);

        FileInputStream f = new FileInputStream(picture);
        user.getPerson().setPicture(IOUtils.toByteArray(f));
        user.getPerson().save();
        ...
    } 
```

我想知道如何在不丢失 PNG 透明度的情况下调整大小？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:58:47.460

查看`play.libs.Images` [https://github.com/playframework/play/blob/master/framework/src/play/libs/Images.java](https://github.com/playframework/play/blob/master/framework/src/play/libs/Images.java)的源代码，当设置新大小的图像时（第 102 行），图像是默认为白色背景。这看起来就像您的透明度丢失的原因。

我想这是一个错误。

# mysql - Wildcard Match Against Query causes score to = 0 ( php / sql )

> ID：10165181
> 
> 赞同：3
> 
> 时间：2012-04-15T19:15:17.367
> 
> 标签：mysql, match, wildcard

I am using a full text query with MySql version 5.0.45 and I am trying to optimize it for my needs. The score system was working fine, however because I have added a stemmer before the input now, I had to use a wildcard on the search term. The problem is that now a stemmed word will match but return a score of 0\. (ie: "restriction" gets stemmed to "restrict" and will still get recognized as a match but with a score of 0)

Here's the query:

```
$escaped_string = mysql_real_escape_string($string);
$query = "SELECT DISTINCT A1.item_ID, item, 
              4.0 * (match (`item_1`) against ('". $escaped_string."*'))
              + 3.5 * (match (`item_2`) against ('".$escaped_string."*'))
              + 3.0 * (match (`item_3`) against ('".$escaped_string."*')) 
              + 2.5 * (match (`item_4`) against ('".$escaped_string."*'))
              + 1.5 * (match (`item_5`) against ('".$escaped_string."*'))
            as score
          FROM Items A1 LEFT OUTER JOIN Inventory A2 ON A1.item_ID=A2.item_ID
          WHERE MATCH(`item_1`, `item_2`,`item_3`,`item_4`,`item_5`) AGAINST ('".$escaped_string."*' IN BOOLEAN MODE)
          ORDER BY score DESC
          LIMIT 200"; 
```

The score calculates perfectly before when it's `('".$escaped_string."'))` but not when you add the wildcard *. In both cases the matching works fine, the problem is that the score does not calculate if there is a wildcard.

Any help on this would be appreciated! (I hope I'm doing this mostly right)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:51:51.650

对我来说，您似乎忘记添加`IN BOOLEAN MODE`分数计算，因为搜索运算符是此模式独有的；如果我正确理解[http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)。

在我看来，以下应该有效：

```
$escaped_string = mysql_real_escape_string($string);
$query = "SELECT DISTINCT A1.item_ID, item, 
          4.0 * (match (`item_1`) against ('". $escaped_string."*' IN BOOLEAN MODE))
          + 3.5 * (match (`item_2`) against ('".$escaped_string."*' IN BOOLEAN MODE))
          + 3.0 * (match (`item_3`) against ('".$escaped_string."*' IN BOOLEAN MODE)) 
          + 2.5 * (match (`item_4`) against ('".$escaped_string."*' IN BOOLEAN MODE))
          + 1.5 * (match (`item_5`) against ('".$escaped_string."*' IN BOOLEAN MODE))
        as score
      FROM Items A1 LEFT OUTER JOIN Inventory A2 ON A1.item_ID=A2.item_ID
      WHERE MATCH(`item_1`, `item_2`,`item_3`,`item_4`,`item_5`) AGAINST ('".$escaped_string."*' IN BOOLEAN MODE)
      ORDER BY score DESC
      LIMIT 200"; 
```

# drupal - Drupal 6：显示节点翻译的标志

> ID：10165186
> 
> 赞同：0
> 
> 时间：2012-04-15T19:16:08.263
> 
> 标签：drupal, internationalization, drupal-6, drupal-modules

对于每个节点预览，我希望在顶部有代表**可用翻译**的小标志图标。我看过语言切换器代码，但它一直输出所有语言。这很烦人，因为人们会单击他们的语言，然后发现该页面无论如何都只有英文版（我有一个网站，其中包含许多不同语言的文章）。我已经看到这样做了。我对 Drupal 编程比较陌生。谁能给我指点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:29:02.583

我自己想出来的，并在这里注意到它，因为我知道我不是唯一一个遇到这个问题的人。

我正在处理的模板称为 scaccarium，所以我去了*/themes/scaccarium/template.php*并添加了以下函数：

```
function scaccarium_preprocess_node(&$vars) {
  $node = $vars['node'];
  $translationlinks = array();
  // Move translation links into separate variable
  foreach ($node->links as $key => $value) {
    if ($value['attributes']['class'] == 'translation-link') {
      $translationlinks[$key] = $value;
      // unset($vars['node']->links[$key]);
    }
  }
  $vars['translationlinks'] = theme('links', $translationlinks, array('class' => 'links translationlinks inline'));
} 
```

如果您的模板被称为其他名称，您显然应该转到不同的文件夹并更改函数名称的第一个单词。如果您的主题带有现有的 _preprocess_node 功能，请仔细修改它。

然后，我去了我的模板的*node.tpl.php*并添加了

```
<?php if ($translationlinks) {
            print $translationlinks;
      } ?> 
```

标题旁边。

**然后我必须在 Performance > Caching 中清除 Drupal 缓存（即使缓存被禁用！）才能让它工作。**

完毕！

...要在完整节点的顶部添加语言链接，我还必须在 node.tpl.php 的不同位置添加另一个“print $translationlinks”，因为 h3 标题仅用于节点预览。然后，为了删除完整节点底部的冗余语言链接，我尝试了您在 template.php 中看到的注释掉的未设置行 - 我发现即使另一个网站推荐了它，它也没有效果。所以我最终做的是为此使用 CSS，将以下内容添加到我的模板的 CSS 文件中：

```
.node-links .translation-link {
  display: none;
} 
```

我希望我的经验能帮助其他有同样问题的人。

# matlab - 如何在matlab中使用union来获得闭区间的析取？

> ID：10165190
> 
> 赞同：-1
> 
> 时间：2012-04-15T19:16:34.517
> 
> 标签：matlab

我正在尝试使用 MATLAB 中的 union 函数来获得形式`[a,b]`和的两个封闭区域的析取`[c,d]`。

例如

```
a=[1 3];
b=[3 6];
c=union(a,b) 
```

我得到的答案是`c = [1 3 6]`，而我希望答案是 only `[1 6]`。

有没有什么技巧我可以用联合函数来实现

根据@bernhard 的建议，我可以用它`setxor`来实现这一点。

但假设我的矩阵看起来像

```
a[1 2: 3 5: 2 4}; 
b=[2 4]; 
c=setxor(a,b,'rows') 
```

输出为`[1 2: 3 5]`.

但和以前一样，我的答案应该是形式`[1 5]`。我需要做什么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:28:29.743

在我看来，你想要达到的目标可以通过

```
setxor(a,b) 
```

# python - Real-time display of results in Python

> ID：10165194
> 
> 赞同：-1
> 
> 时间：2012-04-15T19:17:11.443
> 
> 标签：python, plot, real-time

I have this program which will solve a system of differential equations in such way that two values xi, yi are produced each time a for loop iterates. Is there some way i could plot these values as they are produced instead of waiting for the computation to finish, then plotting them all?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:26:48.880

假设您的算法如下所示：

```
import matplotlib

x_list = []
y_list = []
while True:
    xi, yi = compute() # calculates your xi and yi value
    if converged(xi, yi):
        break
    # capture history of your xi and yi
    x_list.append(xi)
    y_list.append(yi)

matplotlib.pyplot.plot(x, y) # create a graph representing x and y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:23:01.923

您可能想看看 matplotlib ( [http://matplotlib.sourceforge.net/](http://matplotlib.sourceforge.net/) ) 或 gnuplot.py ( [http://gnuplot-py.sourceforge.net/](http://gnuplot-py.sourceforge.net/) )。完成后，我使用这些来绘制数据，但我看不出为什么在生成数据时不能这样做。但是，根据循环执行的速度，这可能会减慢整个程序的速度。

gnuplot 可能不再维护，但我一直在使用它，没有任何问题。

# javascript - 澄清 JavaScript 变量范围

> ID：10165195
> 
> 赞同：2
> 
> 时间：2012-04-15T19:17:13.437
> 
> 标签：javascript, variables, scope

我已经知道如何使这段代码工作，但我的问题更多是关于为什么它会这样工作，以及我做的事情是否正确。

我可以做的最简单的例子来展示我的问题是这样的：

假设我有一个函数可以在按下按钮时将输入字段的值增加 10。

```
var scopeTest = {

    parseValue : function( element, value ) {
        value = parseInt( element.val(), 10 );
        //Why does this not return the value?
        return value;
    },

    incrementValue : function( element, button, value ) {
        button.on('mousedown', function (e) {
            //Execute the parseValue function and get the value
            scopeTest.parseValue( element, value ); 
            //Use the parsed value      
            element.val( value + 10 );    
            e.preventDefault(); 
        });               
    },

    init : function () { 
        var element = $('#test-input'),
            button = $('#test-button'),
            value = ''; 

        this.incrementValue( element, button, value );
    }

};

scopeTest.init(); 
```

上面的代码不起作用，因为在方法内部执行时该`parseValue`方法没有正确返回`value`var `incrementValue`。

为了解决这个问题，我必须像这样将`scopeTest.parseValue( element, value );`参数设置为`value`变量：

`value = scopeTest.parseValue( element, value );`

比代码有效。

但我的问题是**为什么**？为什么这个额外的变量赋值步骤是必要的，为什么 return 语句还不够？此外，我使用我的函数/方法做的一切都是正确的，或者这只是 JavaScript 的工作方式？

这里的工作示例=> [http://jsfiddle.net/Husar/zfh9Q/11/](http://jsfiddle.net/Husar/zfh9Q/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:22:48.727

因为*parseValue的**value*参数只是一个参考。是的，您可以更改对象，因为您有一个引用，但如果您分配给该引用，它现在指向不同的对象。

 *原版不变。是的，返回是“足够的”，但是您将新对象保存在一个变量中，该变量的生命周期在下一行代码处结束。

人们说 JavaScript 通过引用传递对象，但过于从字面上理解可能会令人困惑。JavaScript 中的所有对象句柄都是引用。这个引用本身并不是通过引用传递的，也就是说，你没有得到一个双间接指针。因此，您可以通过形式参数更改对象本身，但不能更改调用站点的引用本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:24:05.483

这不是范围界定问题，而是按引用传递和按值传递之间的混淆。

在 JavaScript 中，所有数字都是按值传递的，这意味着：

```
var value = 10;
scopeTest.parseValue( element, value );
// value still == 10 
```

对象和数组通过引用传递，意思是：

```
function foo( obj ){
    obj.val = 20;
}

var value = { val: 10 }
foo( value );
// value.val == 20; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T19:39:55.720

### 正如其他人所说，这是*pass-by-ref* vs *pass-by-val*。

**给定：** `function foo (){return 3+10;} foo();`
会发生什么？该操作已执行，但您没有在任何地方设置该值。

**鉴于：** `result = foo();`
操作已执行，但您已存储该值以供将来使用。

* * *

### 这只是范围问题

*   ```
    var param = 0;  
    function foo( param ) { 
       param = 1; 
    } 
    foo(param);
    console.log(param);                  // still retains value of 0 
    ```

为什么？

有一个`param`是全局的，但在函数内部调用了参数的名称`param`，因此该函数不会使用全局。而是`param`仅应用本地实例 ( `this.param`)。如果您这样做，则完全不同：

*   ```
    var param = 0;  
    function foo() {                     // notice no variable 
       param = 1;                        // references global
    } 
    foo(param);
    console.log(param);                  // new value of 1 
    ```

这里没有调用局部变量`param`，所以它使用全局变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T07:53:33.133

这主要是范围问题。pass-by-* 问题讨论起来很奇怪，因为发送者变量和被调用函数变量具有相同的名称。反正我会试试的。

变量具有可见的范围。您可以将其视为存储内容的地方。此范围由函数的位置定义。意味着它在您的源代码中的位置（在全局范围内或在函数范围内）。它是在您编写源代码时定义的，而不是您之后如何调用函数。

范围可以嵌套。在您的示例中，有四个范围。全局作用域，每个函数都有一个作用域。您的函数的作用域都具有作为父作用域的全局作用域。父范围意味着每当您尝试访问名称/变量时，首先在函数范围内搜索它，如果未找到，则搜索继续到父范围，直到找到名称/变量或达到全局范围（在这种情况下，您会收到无法找到的错误）。

允许多次定义同一个名称。我认为这是你困惑的根源。你眼中的“价值”这个名字总是一样的，但它在你的脚本中出现了三次。每个函数都定义了它：parseValue 和 incrementValue 作为参数，init 作为局部变量。这种效果称为阴影。这意味着名称为“值”的所有变量始终存在，但如果您查找名称，则较早找到名称，从而使另一个不可见/隐藏。

在这种情况下，“值”在所有三个函数中的处理方式都是相似的，因为本地 var 和参数的范围是相同的。这意味着只要您输入其中一种方法，您就进入了函数范围。通过输入作用域，名称“值”被添加到作用域链中，并在执行函数时首先被找到。反之亦然。如果离开函数范围，则“值”将从范围链中删除并变得不可见并被丢弃。

这里非常令人困惑，因为您调用一个带有参数“值”的函数，该函数带有名称为“值”的东西，但它们仍然意味着不同的东西。不同的是，需要将值从一个“值”传递给另一个。发生的情况是外部“值”的值被复制到内部“值”。这就是按值传递的含义。被复制的值可以是对对象的引用，大多数人认为它是通过引用传递的。如果这听起来令人困惑，我很抱歉，但这里有太多的价值命名。

该值从外部函数复制到被调用函数，并且只存在于被调用函数内部。如果函数结束你对它所做的每一个更改都将被丢弃。唯一的可能是回报你的“副作用”。这意味着您的工作将在函数被丢弃之前不久被复制回变量

其他替代方案确实是离开参数并使用范围链，例如全局范围。但我强烈建议你不要这样做。它似乎很容易使用，但它会产生许多微妙的错误，这将使您的生活更加艰难。最好的办法是确保变量具有最窄的范围（使用它们的地方）并传递每个函数参数的值和返回值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-15T19:24:45.743

你可以看看它。

[http://snook.ca/archives/javascript/javascript_pass](http://snook.ca/archives/javascript/javascript_pass)*

# ios - 使用 iOS SDK 读写部分文件

> ID：10165199
> 
> 赞同：0
> 
> 时间：2012-04-15T19:18:14.903
> 
> 标签：ios, xcode, file

我想在不读取整个文件的情况下获取文件的前 8 个字节左右。我正在使用 NSData 对数据等进行操作，但我不想通过过多的文件读取和写入来减慢我的应用程序的速度，因为在某些情况下，我必须读取一个 200 KB 的文件才能提取前 2文件中的数据字节。有没有办法只读取或写入文件的一部分而不用 iOS SDK 在 Xcode 中读取或覆盖整个内容？

我使用的文件系统只是可以通过 NSFileManager 类访问的默认文件系统（我不知道任何其他 iOS 文件系统）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:27:51.930

使用标准 C 文件 API（FILE* 或 int 文件描述符）。需要注意的是，您必须正确地将字符串路径转换为正确的 char* 文件路径。另外，完成后不要忘记关闭文件。考虑 NSData 上的一个类别，有点像这样......

```
+ (id)dataWithContentsOfFile:(NSString *)filePath numBytes:(NSUInteger)numBytes
{
    void *bytes = malloc(numBytes);
    NSData *result = [NSData dataWithBytesNoCopy:bytes length:numBytes];
    char const *path = [[NSFileManager defaultManager] fileSystemRepresentationWithPath:filePath];
    int fd;
    if ((fd = open(path, O_RDONLY)) < 0 || read(fd, bytes, numBytes) != numBytes) {
        result = nil;
    }
    close(fd);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-17T21:11:49.070

您可以利用更高级别的`NSFileHandle`课程。该类`NSFileHandle`是文件描述符的面向对象的包装器。您使用文件句柄对象来访问与文件、套接字、管道和设备相关的数据。对于文件，您可以在文件中读取、写入和查找。对于套接字、管道和设备，您可以使用文件句柄对象来监控设备并异步处理数据。

```
- (NSData *)readDataOfLength:(NSUInteger)length 
```

[您可以在官方文档NSFileHandle 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html)中获得更多信息

# c# - How to add an Insert row to a GridView which is databound to a SQL server table?

> ID：10165200
> 
> 赞同：1
> 
> 时间：2012-04-15T19:18:15.933
> 
> 标签：c#, asp.net, sql-server

I'm using C# ASP.NET 4 (VS2010) to create a database driven aspx file (SQL SERVER 2008 R2).

My aspx file containing a GridView which allows me to edit and delete rows from the SQL server's table.

I would like to add an insert row at the bottom of the Gridview, but I can't find the control for that, even after searching the internet for hours.

When using Microsoft SQL Server Management studio there is a way to edit the top 200 rows of a table in a nice gridview, and there is an insert row at the bottom. My GridView is pure aspx with no code behind.

I would like to imitate the that insertion row.

This is how the edit (with the insert row) looks on Microsoft SQL Server Management studio:

![](../Images/f3a7deaa615dbe66e49797d001316fc1.png)

See at the picture above how I'm inserting the 3rd row of the table. See that there is a new row for insertion at the bottom of the gridview.

Is it possible that there is no control for that with aspx gridview?

If there isn't automatic insert row control, how do I do that with minimal C# code?

With no solution, I thought of adding a button at under the GridView which will add a new empty row to the table. The problem is, my table do not allow nulls :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:20:51.390

您需要确保在 SqlDataSource 中包含“InsertCommand”，并且需要在代码隐藏中做一些工作。要获得一个很好的概述，请查看[代码项目中有关此主题的文章](http://www.codeproject.com/Articles/18165/Using-the-Insert-feature-of-SqlDataSource-with-Gri)

# java - Java - KeyListener 事件未触发

> ID：10165201
> 
> 赞同：1
> 
> 时间：2012-04-15T19:18:19.423
> 
> 标签：java, event-handling, applet

我已经开始用java写一个简单的平台游戏。作为测试，我编写了这个简单的程序，当您按下箭头键时，它会在小程序周围移动一个矩形。关键事件根本没有触发。这是代码：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
public class Game extends Applet implements Runnable, KeyListener
{
  //setup data
  Thread t;
  Image buffimg;
  Graphics draw;
  Dimension dim;

  //game variables
  int charx = 400;//rectangles X and Y positions
  int chary = 50;
  boolean leftArrow = false;
  public void init()
  {
        setSize(800, 500);
        t = new Thread(this);
        t.start();
       addKeyListener( this );
  }
  public void run()
  {
        while(true)
        {
          repaint();
          moveChar();//move the rectangle
          try {
                t.sleep(1000/30);
          } catch (InterruptedException e) { ; }
        }
  }
   public void keyPressed( KeyEvent e ) 
   { 
       int k = e.getKeyCode();
       if(k == 37)
       {
           leftArrow = true;
           charx--;
       }

   }
   public void keyReleased( KeyEvent e ) 
   { 
       if(e.getKeyCode() == 37)
       {
           leftArrow = false;
       }
   }
   public void keyTyped( KeyEvent e ) 
   {
   }
  public void moveChar()
  {
      //move rectangle on left arrow key press
      if(leftArrow == true)
      {
          charx--;
      }  
  }
  public void paint(Graphics g)
  {
      g.drawRect(charx, chary, 100, 100);
  }
  public void update (Graphics g)
  {
      //double buffering

      // initialize buffer
      if (buffimg == null)
      {
          buffimg = createImage (this.getSize().width, this.getSize().height);
          draw = buffimg.getGraphics ();
      }
      // clear screen in background
      draw.setColor (getBackground ());
      draw.fillRect (0, 0, this.getSize().width, this.getSize().height);
      // draw elements in background
      draw.setColor (getForeground());
      paint (draw);
      // draw image on the screen
      g.drawImage (buffimg, 0, 0, this);
  } 
} 
```

他们为什么不开火，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T19:33:09.683

```
this.requestFocusInWindow(); // end of init(), or better, in start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:43:25.343

我试过你的代码。它可以正常工作。

问题是您需要先在绘图区域上按下鼠标以使其聚焦，然后才能接收事件。

要自动执行此操作，请使用以下命令：requestFocusInWindow()

# mysql - MySQL - 与请求值关联的多个值

> ID：10165207
> 
> 赞同：0
> 
> 时间：2012-04-15T19:19:21.773
> 
> 标签：mysql, list

我有一个名为发布的表，它是“音乐”数据库的一部分。该表由两列组成；`cd_id`,`band_id`

我想列出 cd_id 和每个 cd 涉及的波段数，其中两个或更多`band_id`与一个`cd_id`值相关联。

你能帮我说这个吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:22:59.813

`COUNT()`这是一个带有`HAVING`子句的聚合：

```
SELECT
  cd_id,
  count(*) AS numbands
FROM releases
GROUP BY cd_id
HAVING numbands >= 2 
```

`COUNT(*)`加上`GROUP BY cd_id`返回`band_id`per的数量`cd_id`，并且为了将这些限制为 2+ 的版本`band_id`，一个`HAVING`子句指定`numbands`（赋予计数值的别名）`>= 2`。

请注意，这假设每个`band_id`仅列出一次`cd_id`。如果不是这种情况，要获得每张 cd 的独特乐队，请使用

```
COUNT(DISTINCT band_id) AS numbands 
```

而不是`COUNT(*) AS numbands`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:23:18.393

假设版本没有为 CD_ID 列出两次相同的乐队

```
select CD_ID, count(*) 
from releases 
GROUP BY CD_ID
HAVING count(*) > 1 
```

# apache-flex - Flex - give default cursor a dropShadow

> ID：10165209
> 
> 赞同：0
> 
> 时间：2012-04-15T19:19:27.203
> 
> 标签：apache-flex, cursor, styles, shadow

Topic. Is there any way to do this on the default cursor? (I haven't looked into it, but presumably it can be done on a custom cursor -- ??).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:14:59.213

你当然可以。只需像这样创建一个自定义光标

```
<mx:Script>
 <![CDATA[
   import mx.managers.CursorManagerPriority;
   import mx.managers.CursorManager;

   [Embed("/cursors/mycursor.png")]
   private var customCursor:Class;

   private function showCursor():void
   {
     CursorManager.setCursor(customCursor, CursorManagerPriority.HIGH, 3, 2);
   }

   private function removeCursor():void
   {
     CursorManager.removeAllCursors();
   }
 ]]>
</mx:Script> 
```

希望这可以帮助！

# c# - Documents.Close 使 Word 可见

> ID：10165215
> 
> 赞同：2
> 
> 时间：2012-04-15T19:20:24.240
> 
> 标签：c#, ms-word, office-interop

很长一段时间以来，我一直在尝试解决此问题，但尚未找到解决方法。在调用`Documents.Close()`时，使用 打开的 Word`visible = false`变为可见。

这是我的关闭声明（文档已经保存，因此无需再次保存）：

```
 WordApp.Documents.Close(Word.WdSaveOptions.wdDoNotSaveChanges,
    Word.WdOriginalFormat.wdOriginalDocumentFormat); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:57:23.310

你可以打电话`WordApp.Quit()`。

Office 应用程序仍然遵循 MDI 方法：您运行 1 个应用程序，并且在该应用程序中您可以打开 1 个或多个文档。

由于我们通常只打开一个文档，因此很容易在后台忘记该应用程序。但是这里有两个关闭级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:32:05.267

您也可以`WordApp.Visible = false`在操作后立即显式设置；这可能会导致短暂的闪烁，但应将应用程序设置回不可见状态。

为了避免短暂的可见性，有时也使用该`WordApp.ScreenUpdating`属性会有所帮助。在尝试`Documents.Close()`调用之前将其设置为 false，然后在调用完成后重置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T12:01:19.807

接受的解决方案（调用 WordApp.Quit()）对我来说不是一个可行的选择。我试过设置

```
WordApp.ScreenUpdating = false 
```

在调用 Documents.Close() 之前，这也无济于事 - 我仍然得到屏幕闪烁。

然后我尝试设置

```
WordApp.ActiveWindow.Visible = false 
```

打开文档后立即。这也没有任何区别。

最后我尝试设置

```
WordApp.ActiveWindow.Top = -5000 
```

（以便在我的显示器设置中将窗口显示移出可见的桌面区域 - 如果您有一个可能不适合您的不寻常（巨大！）显示器设置，请进行相应调整）并且解决了问题 - 不再闪烁.

一个烦人的黑客，但在我的情况下有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T15:40:29.293

以上评论都不适合我。我试过：

`WordApp.ActiveWindow.Top = -5000`

但是我的程序以“活动窗口最大化”异常终止。

我最终通过在调用之前的调用解决了它`Document.Close()`：

`m_word.ActiveWindow.WindowState = WdWindowState.wdWindowStateMinimize;`

这对我来说是一个完美的解决方案。希望它也对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-24T00:50:53.087

使用 ActiveDocument.Close() 方法将不会显示窗口。 `WordApp.ActiveDocument.Close(saveChanges: false);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-11T23:58:33.407

以上解决方案都不适合我。

我终于意识到问题出在 AutoOpen 宏上。每次打开 Word 文档时，AutoOpen 都会使 ActiveDocument.Visible = False，运行一些更改（如打开样式窗格），然后`ActiveDocument.Visible = True`在最后打开。

AutoOpen 中的最后一行是导致每个文档在屏幕上短暂闪烁的原因。从 AutoOpen 宏中删除两者完全解决了这个`Visible = False`问题。`Visible = True`

# jquery - FancyBOX 2 - 如何像在 v1.3.4 中一样传递 SWF 参数

> ID：10165220
> 
> 赞同：2
> 
> 时间：2012-04-15T19:20:48.513
> 
> 标签：jquery, fancybox

如何在 FancyBox 2.0.5 版中使用 SWF 参数（因为它曾经在 1.3.4 版中工作）

> 'swf' :
> {
>      'wmode' : '透明',
>      'allowfullscreen' : 'true'
> }

此方法似乎不适用于最新版本 v2.0.5。有没有人对此有任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:33:07.793

有一个像这样的html：

```
<a class="fancybox" href="myobject.swf">open swf</a> 
```

`tpl`使用模板 ( ) 选项传递一些参数，例如

```
$(".fancybox").fancybox({
 width: 640, // or whatever
 height: 320,
 type: "swf",
 tpl: {
  swf: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="'+this.href+'" /><embed src="'+this.href+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',
 }
}); 
```

可以选择尝试在链接本身中传递参数（并且不要使用该`tpl`选项），例如

```
<a class="fancybox" href="myobject.swf?wmode=opaque">open swf</a> 
```

# configuration - 使用“.properties”文件进行依赖注入

> ID：10165226
> 
> 赞同：6
> 
> 时间：2012-04-15T19:21:44.720
> 
> 标签：configuration, dependency-injection, annotations, java-ee-6, cdi

我正在使用 Java EE 6，需要从“.properties”文件加载配置。有没有推荐的方式（最佳实践）使用依赖注入从配置文件中加载值？我在 Spring 中找到了这个注解，但我还没有找到 Java EE 的“标准”注解。

这家伙从头开发了一个解决方案：

> [http://weblogs.java.net/blog/jjviana/archive/2010/05/18/applicaction-configuration-java-ee-6-using-cdi-simple-example](http://weblogs.java.net/blog/jjviana/archive/2010/05/18/applicaction-configuration-java-ee-6-using-cdi-simple-example)
> 
> “我找不到一个简单的例子来说明如何通过从文件中读取配置属性来使用 CDI 配置您的应用程序......”

但我想知道是否有更标准的方式来代替创建配置工厂......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:21:54.970

配置注解

```
package com.ubiteck.cdi;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import javax.enterprise.util.Nonbinding;
import javax.inject.Qualifier;

@Qualifier
@Retention(RetentionPolicy.RUNTIME)
public @interface InjectedConfiguration {
    /**
     * Bundle key
     * @return a valid bundle key or ""
     */
    @Nonbinding String key() default "";
    /**
     * Is it a mandatory property
     * @return true if mandator
     */
    @Nonbinding boolean mandatory() default false;
    /**
     * Default value if not provided
     * @return default value or ""
     */
    @Nonbinding String defaultValue() default "";
 } 
```

配置工厂可能如下所示：

```
import java.text.MessageFormat;
import java.util.MissingResourceException;
import java.util.ResourceBundle;
import javax.enterprise.inject.Produces;
import javax.enterprise.inject.spi.InjectionPoint;

public class ConfigurationInjectionManager {
    static final String INVALID_KEY="Invalid key '{0}'";
    static final String MANDATORY_PARAM_MISSING = "No definition found for a mandatory configuration parameter : '{0}'";
    private final String BUNDLE_FILE_NAME = "configuration";
    private final ResourceBundle bundle = ResourceBundle.getBundle(BUNDLE_FILE_NAME);

    @Produces
    @InjectedConfiguration
    public String injectConfiguration(InjectionPoint ip) throws IllegalStateException {
        InjectedConfiguration param = ip.getAnnotated().getAnnotation(InjectedConfiguration.class);
        if (param.key() == null || param.key().length() == 0) {
            return param.defaultValue();
        }
        String value;
        try {
            value = bundle.getString(param.key());
            if (value == null || value.trim().length() == 0) {
                if (param.mandatory())
                    throw new IllegalStateException(MessageFormat.format(MANDATORY_PARAM_MISSING, new Object[]{param.key()}));
                else
                    return param.defaultValue();
            }
            return value;            
        } catch (MissingResourceException e) {
            if (param.mandatory()) throw new IllegalStateException(MessageFormat.format(MANDATORY_PARAM_MISSING, new Object[]{param.key()}));
            return MessageFormat.format(INVALID_KEY, new Object[]{param.key()});
        }
    } 
```

[带有解释和 Arquillian 测试的教程](http://www.java-tutorial.ch/context-and-dependency-injection/property-file-configuration-using-injection-cdi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:48:53.240

尽管它没有完全涵盖您的问题，但您可能会对 Weld 文档的[这一部分](http://docs.jboss.org/weld/reference/1.1.0.Final/en-US/html_single/#resources)感兴趣。

提到这一点 - 不，没有注入任意资源/资源文件的标准方法。我想标准化这种高度依赖于自定义的要求完全超出了规范的范围（Spring 不是规范，他们可以简单地实现他们喜欢的任何东西）。然而，CDI 提供的是一种强大的（又名类型安全）机制，用于在一侧注入配置持有 bean，而在另一侧提供灵活的生产者机制来读取和创建此类 bean。这绝对是您所询问的推荐方式。

您链接到的方法肯定是一个非常好的方法 - 即使它可能满足您的需求，这取决于您计划注入的属性类型。

一种非常类似于 CDI 的继续方式是开发一个 CDI 扩展（它可以很好地封装所有必需的类）并与您的项目独立部署它。当然，您也可以为[CDI 扩展目录](http://groups.diigo.com/group/cdi-extensions)甚至[Apache Deltaspike](https://cwiki.apache.org/DeltaSpike/)做出贡献。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:28:58.940

请参阅 Apache DeltaSpike 的 @ConfigProperty

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T21:07:21.913

这样做的唯一“标准”方法是使用带有非绑定注释成员的限定符，并确保所有注入都是依赖范围的。然后在您的生产者中，您可以获得 InjectionPoint 并从注入点的限定符中获取密钥。你想要这样的东西：

```
@Qualifier
public @interface Property {
    @Nonbinding String value default "";
}

...
@Inject @Property("myKey") String myKey;

...
@Produces @Property public String getPropertyByKey(InjectionPoint ip) {
    Set<Annotation> qualifiers = ip.getQualifiers

    // Loop through qualifers looking for Property.class save that off
    return ResourceBundle.getBundle(...).getString(property.key);
} 
```

显然，您可以对该代码进行一些增强，但这应该足以让您开始走上正确的道路。

# php - 检测打开的数据库连接

> ID：10165231
> 
> 赞同：0
> 
> 时间：2012-04-15T19:22:23.250
> 
> 标签：php, mysql, database-connection, database-management

我已经建立了一个网站，并且已经运行了一段时间。但是今天突然间我收到了一个错误，即达到了与数据库的最大连接数。

即使通过 Db 管理服务器，我如何列出打开的连接并使用 PHP 顺序终止它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:37:02.547

发生此问题是因为您有很多用户同时打开连接。此外，Ajax 也可能导致此问题。一旦页面的执行完成，连接应该被终止。当您尝试不同的事情时，请确保每次打开页面时为每个用户回收一个连接。例如，您不想在每次执行数据库查询时重新打开与数据库的连接（传递用户并传递）。打开它一次并继续使用它，直到页面呈现。可能是您的连接没有正确终止，但我之前没有遇到过这个问题；我知道 PHP 有可能错过管理连接。联系您的主机并询问在任何时候允许多少个连接到数据库，以及他们是否可以增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:25:31.657

每次执行查询`close();`连接后。

```
mysql_close ([ resource $link_identifier = NULL ] );

mysqli::close ( void );

mysqli_close ( mysqli $link ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-04T08:43:18.030

第一种方法是使用 PHP 作为 CGI“包装器”。当以这种方式运行时，将为您的 Web 服务器的每个页面请求（对于 PHP 页面）创建和销毁 PHP 解释器的实例。因为它在每次请求后被销毁，它获取的任何资源。

# php - 将 PHP 数组嵌套到 json

> ID：10165234
> 
> 赞同：2
> 
> 时间：2012-04-15T19:22:33.217
> 
> 标签：php, json

所以我的代码在这里：

```
 $featurecollection = ("FeatureCollection");

        $test[] = array (
        "type" => $featurecollection,
        $features[] = array($images)

    );

   file_put_contents($cache,json_encode($test)); 
```

结果如下json：

```
[
 {
  "type":"feature",
  "0":[
     [
        {
           "title":"some title",
           "src":"value",
           "lat":"value",
           "lon":"value"
        },
        {
           "title":"some title",
             ... 
```

但是我需要以不同的方式嵌套事物，并且我对应该如何构造 php 数组以获得如下结果感到困惑：

```
{
"type":"FeatureCollection",
 "features":[

  {
     "type":"Feature",
     "geometry":{
        "coordinates":[
           -94.34885,
           39.35757
        ],
        "type":"Point"
     },
     "properties":{
        "latitude":39.35757,
        "title":"Kearney",
        "id":919,
        "description":"I REALLY need new #converse, lol. I've had these for three years. So #destroyed ! :( Oh well. Can't wait to get a new pair and put my #rainbow laces through. #gay #gaypride #bi #proud #pride #colors #shoes #allstar #supporting ",
        "longitude":-94.34885,
        "user":"trena1echo5",
        "image":"http://images.instagram.com/media/2011/09/09/ddeb9bb508c94f2b8ff848a2d2cd3ece_7.jpg",
        "instagram_id":211443415
     }
  }, 
```

php 数组会是什么样子？我被所有东西嵌套但仍然有一个关键值的方式抛弃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:29:04.913

这是我在 PHP 中的表示方式：

```
array(
    'type' => 'FeatureCollection',
    'features' => array(
        array(
            'type' => 'Feature',
            'geometry' => array(
                'coordinates' => array(-94.34885, 39.35757),
                'type' => 'Point'
            ), // geometry
            'properties' => array(
                // latitude, longitude, id etc.
            ) // properties
        ), // end of first feature
        array( ... ), // etc.
    ) // features
) 
```

因此，要获得该结构，每个特征都必须是一个关联数组：

*   类型，
*   几何 - 一个关联数组：
    *   坐标 - 一个索引值数组，
    *   类型
*   properties - 一个关联数组，如纬度、经度、id 等。

像这样的时候，我更喜欢区分列表（`array(1, 2, 3)`）和字典或地图（`array('a' => 1, 'b' => 2)`）的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T07:42:59.320

使用 PHP 5.4 及更高版本：

```
$array = [
    'type' => 'FeatureCollection',
    'features' => [
        [
            'type' => 'Feature',
            'geometry' => [
                'coordinates' => [-94.34885, 39.35757],
                'type' => 'Point'
            ], // geometry
            'properties' => [
                // latitude, longitude, id etc.
            ] // properties
        ], // end of first feature
        [] // another feature, and so on
    ] // end of features
]; 
```

对于下面的 PHP 脚本：

```
<?php
header('Content-type=> application/json');
echo json_encode($array); 
```

这是 JSON 输出；

```
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "coordinates": [
          -94.34885,
          39.35757
        ],
        "type": "Point"
      },
      "properties": []
    },
    []
  ]
}
```

# android - 菜单创建....在对话框的地方

> ID：10165235
> 
> 赞同：0
> 
> 时间：2012-04-15T19:22:33.987
> 
> 标签：android

> 想在删除对话框的地方创建菜单，其中将包含打开，删除等选项。帮助我acc.ly。Android 和 Java 的新手。:)

`new AlertDialog.Builder(this)` `.setTitle("Confirm Restore")` `.setMessage("Do you want to restore this File?")` `.setPositiveButton("OK",` `new DialogInterface.OnClickListener() {}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:28:25.413

[请参阅http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)上的“添加列表”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:49:59.403

当对话框可见时，您无法显示菜单选项（通过按菜单键）。

# jquery - 无论如何要使用 serialscroll 选择/聚焦当前的 div/元素以进行进一步的脚本编写？

> ID：10165238
> 
> 赞同：2
> 
> 时间：2012-04-15T19:22:51.303
> 
> 标签：jquery, scrollto, serialscroll

我正在构建一个水平滚动的网站并使用 jquery serialscroll 进行导航。我已经绑定了页面上的键盘箭头键（左和右）和按钮，以使用 div 标签滚动到下一个元素。效果很好，但我想知道是否有办法为另一个脚本选择/调用当前元素/div？

基本上，我想绑定向上/向下箭头，第一次按下以向下展开 div，然后随后按下（可能再次使用 serialscroll）向上和向下滚动这个 div。

如果有人能帮助我解决这个问题，我将不胜感激。也许 serialscroll 或 scrollto 是最好的插件，我欢迎任何替代品。

当我在我的第一个网站上工作时，我可能会问很多问题，所以请多多包涵。我对 jscript 的了解很基础，但我学得很快。提前致谢。

代码示例：

```
$('#maincontent').serialScroll({
    items:'#slide',
    prev:'.leftArrow',
    next:'.rightArrow',
    offset:-220,
    start:0,
    duration:500,
    force:false,
    stop:true,
    constant:false,
    lock:false,
    cycle:false,
    easing:'easeOutQuart', 
    jump: true 

}); 
```

只是一个更新，我能够通过更改代码来回答我的问题：

```
var $nav = $('#slideshow li');

$('#maincontent').serialScroll({
    items:'li',
    prev:'.leftArrow, div.logo#logo',
    next:'.rightArrow',
    offset:-220, //when scrolling to photo, stop 230 before reaching it (from the left)
    start:0, //as we are centering it, start at the 2nd
    duration:500,
    force:false,
    stop:true,
    constant:false,
    lock:false,
    cycle:false, //don't pull back once you reach the end
    easing:'easeOutQuart', //use this easing equation for a funny effect
    jump: true, //click on the images to scroll to them
    navigation:$nav,
    onBefore:function(e,el,$p,$i,pos){
    $nav.removeClass('newclass');
    $nav.eq(pos).addClass('newclass')},

}); 
```

这允许向当前元素添加一个新类，我可以使用 jscript 相应地更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:13:48.867

我在上面的评论中添加了一个更新，这有助于添加一个类并选择当前元素进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:41:27.317

不能肯定地说，因为我看不到代码。我以前没有尝试过serialscroll，但是按照你描述的方式，我只是设置一些全局变量来包含当前的div。然后，通过获取对象的高度`outerHeight`以查看它是否已扩展。

添加一个小提琴，也许我可以提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T13:47:41.340

```
 onBefore: function (e, elem, $pane, $items, pos) {
     $('.item').removeClass('active');
     $('.item').eq(pos).addClass('active');
     }, 
```

# ios - MKMapView 没有正确删除注释？

> ID：10165245
> 
> 赞同：2
> 
> 时间：2012-04-15T19:23:14.310
> 
> 标签：ios, annotations, mkmapview, key-value-observing, coordinate

我发现了一些奇怪的东西，也许这对任何人来说都很熟悉：我正在向 MKMapView 添加一个简单的 MKPointAnnotation，然后使用 KVO-compliance 修改其坐标属性，然后使用 -removeAnnotation: 删除注释。然而，当我在注释被删除后移动地图时，图钉再次出现——即使注释被删除了！进一步检查，看起来 MKMapView 并没有真正删除注释。

请参阅以下代码片段。您可以将它粘贴到一个新的 Xcode iOS 项目中，单个视图就足够了。将 MKMapView 添加到视图，然后添加 3 个按钮 Start、Step、Stop，并将它们连接到适当的操作。“userAnnotation”是视图控制器中的 MKPointAnnotation ivar。如果按停止，则 MKMapView 的注释数量会在删除前后打印到控制台。ARC 已启用。

如何重现：

1.  按开始; 出现一个图钉。
2.  按步；销移动了一点。
3.  按停止；销消失。
4.  拖动地图 - 大头针重新出现！

如果按 Start 然后 Stop（不是按 Step），注释被正确删除，检查控制台中的计数器：1, 1 =奇怪；1, 0 = 好的

知道发生了什么吗？我以为我正确地做了 KVO 的事情。

```
- (IBAction)startTouched:(id)sender
{
    userAnnotation = [[MKPointAnnotation alloc] init];
    userAnnotation.coordinate = CLLocationCoordinate2DMake(50.85, 4.72); // some coord
    [mapView addAnnotation:userAnnotation];

    MKMapPoint p = MKMapPointForCoordinate(userAnnotation.coordinate);
    double w = 500 * MKMapPointsPerMeterAtLatitude(userAnnotation.coordinate.latitude);
    [mapView setVisibleMapRect:MKMapRectMake(p.x - w, p.y - w, 2*w, 2*w) animated:NO];
}

- (void)nextLocation
{
    MKMapPoint p = MKMapPointForCoordinate(userAnnotation.coordinate);
    p.x += 10 * MKMapPointsPerMeterAtLatitude(userAnnotation.coordinate.latitude);

    [userAnnotation willChangeValueForKey:@"coordinate"];
    userAnnotation.coordinate = MKCoordinateForMapPoint(p);
    [userAnnotation didChangeValueForKey:@"coordinate"];

    NSLog(@"pin at %@, %@", MKStringFromMapPoint(p), [NSThread currentThread]);
}

- (IBAction)stepTouched:(id)sender
{
    [self nextLocation];
}

- (IBAction)stopTouched:(id)sender
{
NSLog(@"mark 10, map has %u annotations, %@", [mapView.annotations count], userAnnotation);
    [mapView removeAnnotation:userAnnotation];
NSLog(@"mark 20, map has %u annotations, %@", [mapView.annotations count], [NSThread currentThread]);
    userAnnotation = nil;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:22:24.343

`userAnnotation.coordinate = ...`我不确定到底是什么问题，但是如果您使用的是 setter（您就是；只是） ，您可能不需要像这样的手动 KVO 通知（即 willChangeValueForKey:/didChangeValueForKey:) `[userAnnotation setCoordinate:...]`。

尝试删除 willChange/didChange 看看是否会有所改善？

# php - PHP 标头不适用于服务器，但在本地主机上运行良好

> ID：10165247
> 
> 赞同：1
> 
> 时间：2012-04-15T19:23:26.000
> 
> 标签：php, header

当我在本地主机上尝试时，下面的代码工作得很好，但是当我将它上传到我的服务器时它不起作用

```
$sendquery = "INSERT INTO `message` (`from`, `to`, `subject`, `date`,`message`) VALUES ('".$_SESSION['UID']."', '".$toarray['Uid']."', '$subject','$d', '$message')";
$sendresult = mysql_query($sendquery);

if($sendresult)
{
    header('Location: home.php?action=inbox&success=1');

}
else
{
    header("Location: home.php?action=inbox&success=2");
} 
```

是我的服务器问题还是代码问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:48:39.300

在设置“位置”标头之前，请确保代码中没有任何内容开始输出。
确保使用**绝对 URL**（根据[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)的要求）

样本：

```
header('Location: http://' . $_SERVER['HTTP_HOST'] . '/Home.php'); 
```

如果是这种情况，您的重定向应该可以工作。

输出已经开始的一些常见原因：

*   BOM（字节顺序标记）未正确处理
*   警告或信息
*   第一个之前的空格或任何其他 HTML 标记`<?php ... ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:29:33.393

也许你的 SQL 有错误。

如果您回显某些内容（例如错误消息），则无法再更改标题。

标头在回显之前发送，之后设置位置无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:27:19.443

本地主机和网络服务器有很多不同之处。我猜这个问题要开发`windows`和托管在`linux`.

小写所有标题字符串并在它之后停止执行

```
header("location: home.php?action=inbox&success=2");
exit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-09T12:20:51.700

查看

> var_dump($sendresult); 出口（）;

启用错误报告。您可能还有其他错误。顺便一提

> $发送结果 = 1;
> 
> 如果（$发送结果）{
> 
> header('位置：home.php?action=inbox&success=1');
> 
> } 别的 {
> 
> header("位置：home.php?action=inbox&success=2");
> 
> }

这对我来说很好。

# grails - Grails - 可搜索插件：我可以阻止它仅依赖 Lucene 索引吗？

> ID：10165255
> 
> 赞同：1
> 
> 时间：2012-04-15T19:23:49.600
> 
> 标签：grails, searchable, searchable-plugin

好吧，我一直在尝试让可搜索插件与我当前的应用程序一起使用，但有一件事情困扰着我：

每次搜索都完全依赖于 Lucene 索引。

这会导致一些令人不安的问题（例如：http: [//jan-so.blogspot.mx/2009/04/eager-fetching-and-searchable-plugin-in.html](http://jan-so.blogspot.mx/2009/04/eager-fetching-and-searchable-plugin-in.html)）。基本上，每个一对多关系在搜索结果中都会有一个空值。为避免这种情况，您必须使很多域*可搜索*，但是，这意味着我的数据库的一半将映射到 Lucene 索引中……这听起来是错误的。

我目前处于开发环境中，所以所有内容都加载到内存中，Lucene 使 java 使用的内存至少增加了 40%（总共使用了 1.2GB，并且我已经尽可能限制了其中包含的内容）`only`和`exclude`）。

那么，我可以阻止它仅依赖 Lucene 索引吗？我希望它在索引上搜索，但不只返回索引的内容。或者将所有内容保存在索引中（从而以*可搜索的方式*进行）而不是手动进行 HQL 查询真的很方便吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:33:06.243

我认为您需要阅读`component`在域类定义中使用关键字。

见这里： http: [//grails.org/Searchable+Plugin+-+Mapping+-+Compass+concepts#Searchable Component](http://grails.org/Searchable+Plugin+-+Mapping+-+Compass+concepts#Searchable%20Component)

通过这种方式，您可以包含域模型中的相关信息，而不会用这么多额外的类污染索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:38:17.217

那么答案是：是的，您可以检索对象的所有信息，而无需将其添加到索引中。

为此，您需要配置插件。首先创建配置文件：

```
grails install-searchable-config 
```

然后打开它，找到并将参数`defaultMethodOptions`更改为. 像这样的东西：`reload``true`

```
defaultMethodOptions = [
    search: [reload: true, escape: false, offset: 0, max: 10, defaultOperator: "and"],
    suggestQuery: [userFriendly: true]
] 
```

现在搜索将从数据库中重新加载对象，但是，正如配置文件所述，搜索会变慢，因为现在它需要连接到数据库。

# ios - 设置字符串/.文本的最大长度

> ID：10165257
> 
> 赞同：1
> 
> 时间：2012-04-15T19:24:06.217
> 
> 标签：ios, xcode, string

我现在使用按钮在栏中显示字母这是我使用的代码

```
-(IBAction) clicked: (id)sender{
NSString *titleOfButton = [sender titleForState:UIControlStateNormal];
NSString *newLabelText = titleOfButton;
labelsText.text = [NSString stringWithFormat:@"%@%@", labelsText.text, newLabelText];

 //if ([newLabelText length] >= 5) newLabelText = [newLabelText substringToIndex:5];
 } 
```

我遇到的问题是我希望它最多可以输入 5 个字母有没有人可以告诉我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:47:14.913

添加这一行 -

```
if ([newLabelText length] >= 5) newLabelText = [newLabelText substringToIndex:5]; 
```

...或将其应用于您要截断的任何字符串。

查看 Apple Docs 了解一些非常有用的 NSString 内容

# android - 如何给一个 jar 文件提供它需要的类？

> ID：10165260
> 
> 赞同：0
> 
> 时间：2012-04-15T19:24:27.383
> 
> 标签：android, jar

# 目标

*   在android应用程序中，我想对从互联网下载的图像使用缓存

*   找到以下项目：`https://github.com/mttkay/ignition`

*   该项目的一部分是点火支持，其中包含完全符合我需要的类

*   在 pom 文件中，存在对 guava 集合的依赖 ( `guava-collections-r03.jar`)

*   我*以某种方式*成功地通过 Maven 构建了 jar 文件。（*不知何故*代表*我对使用 Maven 很蹩脚*。）

# 问题

*   将生成的 jar 文件添加到我的 android 应用程序中，使用`com.github.ignition.support.images.remote.RemoteImageLoader`该类（使用缓存的参数设置为 true）

*   当我运行应用程序时，出现**以下异常** `Caused by: java.lang.NoClassDefFoundError: com.google.common.collect.MapMaker`

*   此类是番石榴集合 jar 文件的一部分

*   `guava-collections-r03.jar`当我添加到我的项目时它没有帮助

# 所以， ...

知道如何从点火罐中可见的番石榴 jar 文件中获取类吗？

（有趣的是，使用 . 创建点火 jar 文件时没有错误`mvn clean install`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:24:50.620

# 解决了

请参阅[http://groups.google.com/group/ignition-users/browse_thread/thread/5e9f153f0482d653](http://groups.google.com/group/ignition-users/browse_thread/thread/5e9f153f0482d653)

# javascript - 用自然 JavaScript 编写 jQuery 的 replaceWith() 的最佳方法

> ID：10165262
> 
> 赞同：9
> 
> 时间：2012-04-15T19:24:52.737
> 
> 标签：javascript, jquery, load, replacewith

尽快访问页面的函数有问题，所以我需要用纯 javascript 编写它并将其包含在头部。不知道该怎么做，因为据我了解，通过使用 .replace() 新元素将被移动到页面上的不同位置。jQuery 的 replaceWith() 行为是理想的。

```
$("#imagefiles").replaceWith("<input type='file' name='imagefiles' id='imagefiles' />"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:28:37.007

```
var image = document.getElementById('imagefiles'), parent = image.parentNode,
tempDiv = document.createElement('div');

tempDiv.innerHTML = "<input type='file' name='imagefiles' id='imagefiles' />"

var input = tempDiv.childNodes[0];

parent.replaceChild(input, image); 
```

## [演示](http://jsfiddle.net/fnvjR/)

* * *

编辑不是我是：

```
var image = document.getElementById('imagefiles'), parent = image.parentNode,
input = document.createElement('input');
input.id = input.name = "imagefiles";
input.type = 'file';

parent.replaceChild(input, image); 
```

## [编辑DEMO](http://jsfiddle.net/EjTtG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-19T03:01:24.013

```
 const node = new DOMParser().parseFromString(html, 'text/html').body.childNodes[0];
  document.getElementById(id).replaceWith(node); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T11:21:56.660

```
let element = document.getElementById("imagefiles");
element.insertAdjacentHTML("afterend","<input type='file' name='imagefiles' id='imagefiles' />");
element.parentNode.removeChild(element); 
```

多年后。现在有一个 childNode.replaceWith() 但它并不严格等同于 JQuery replaceWith(); 也不兼容IE

上面的代码从给定的 HTML 创建一个文档片段，并将其插入到 DOM 中的原始元素之后，然后删除原始元素，有效地替换它。

[https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/replaceWith](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/replaceWith)

# java - ListView 未填充，但调用 getView()

> ID：10165263
> 
> 赞同：2
> 
> 时间：2012-04-15T19:24:53.047
> 
> 标签：java, android, android-listview, android-arrayadapter

我花了最后一天尝试用 Google Places 请求的结果填充我的 ListView 对象。请求很好，肯定有项目进入我的数据对象。但是当我尝试将此数据添加到 ListView 时，无论我尝试什么，我总是得到空行。getView() 被调用，但似乎没有效果。以下是相关的代码片段：

我的 main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<Button
    android:id="@+id/gps_activate_button"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:text="@string/gps_activate_button"
    android:layout_weight="1" />

<ListView
    android:id="@+id/results_list_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ListView>

<TextView android:id="@id/android:empty"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:text="No data" />

</LinearLayout> 
```

我的自定义行显示地点信息：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip"
    android:orientation="vertical" >

    <ImageView android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
        android:contentDescription="@string/custom_row_icon" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:layout_height="0dip">

        <TextView android:id="@+id/name_text_view"
            android:layout_width="fill_parent"
            android:layout_height="0dip" 
            android:textColor="#ffffff" />
        <TextView android:id="@+id/reference_text_view" 
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:textColor="#999999" />
        <TextView android:id="@+id/rating_text_view" 
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:textColor="#EBE41C" />
    </LinearLayout>
</LinearLayout> 
```

创建：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lv = (ListView) findViewById(R.id.results_list_view);
    gpSearchResponse = new GooglePlacesSearchResponse();
    gpAdapter = new GooglePlacesSearchResponseAdapter(this, R.layout.custom_gp_result_row, gpSearchResponse.getGpSearchResults());
    lv.setAdapter(gpAdapter);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    viewGooglePlacesSearchResults = new Runnable() {
        @Override
        public void run() {
            Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null) {
                location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            }
            getGooglePlacesSearchResults(location);
        }
    };
    Thread thread =  new Thread(null, viewGooglePlacesSearchResults, "GooglePlacesBackground");
    thread.start();
    searchResultsDialog = ProgressDialog.show(this, "Please wait...", "Retrieving data ...", true);
} 
```

获取 GooglePlaces 搜索结果：

```
private void getGooglePlacesSearchResults(Location location) {
    try {
        GooglePlacesSearchResponseHandler handler = new GooglePlacesSearchResponseHandler();
        String FINAL_URL = PLACES_SEARCH_URL + "location=" + location.getLatitude() + "," + location.getLongitude() +"&radius=5000&types=bar%7Cmovie_theater%7Cnight_club%7Crestaurant%7Cshopping_mall&sensor=true&key=AIzaSyD-GWPYtYJMbJuTXuTVXfGXKlVPuWD0d6Q";
        JSONObject json = handler.getJSONFromUrl(FINAL_URL); // getting JSON
        Log.i("URL", FINAL_URL);
        GooglePlacesSearchResponseParser parser = new GooglePlacesSearchResponseParser();
        try {
            gpSearchResponse = parser.parseResults(json);
        } catch (JSONException e) {
            throw new RuntimeException(e);
        }
        Thread.sleep(5000);
        Log.i("ARRAY", ""+ gpSearchResponse.getGpSearchResults().size());
    } catch (Exception e) { 
        Log.e("BACKGROUND_PROC", e.getMessage());
    }
    runOnUiThread(returnResults);
} 
```

我重写的 getView() 方法：

```
public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.custom_gp_result_row, null);
            }
            GooglePlacesSearchResult gpSearchResult = items.get(position);
            if (gpSearchResult != null) {
                    //ImageView iconImageView = (ImageView) v.findViewById(R.id.icon);
                    TextView nameTextView = (TextView) v.findViewById(R.id.name_text_view);
                    TextView referenceTextView = (TextView) v.findViewById(R.id.reference_text_view);
                    TextView ratingTextView = (TextView) v.findViewById(R.id.rating_text_view);
                    /*if (iconImageView != null) {
                          iconImageView.setImageURI(Uri.parse(Uri.encode(gpSearchResult.getIconURL())));
                    }*/
                    if(nameTextView != null){
                          nameTextView.setText(gpSearchResult.getName());
                    }
                    if (referenceTextView != null) {
                          referenceTextView.setText(gpSearchResult.getReference());                            
                    }
                    if(ratingTextView != null){
                          ratingTextView.setText(gpSearchResult.getRating());
                    }
            }
            return v;
    } 
```

还有一个通知适配器的 Runnable 对象：

```
private Runnable returnResults = new Runnable() {
    @Override
    public void run() {
        if (gpSearchResponse.getGpSearchResults() != null && gpSearchResponse.getGpSearchResults().size() > 0) {
            gpAdapter.notifyDataSetChanged();
            gpAdapter.setGooglePlacesSearchResult(gpSearchResponse.getGpSearchResults());
        }
        searchResultsDialog.dismiss();
        gpAdapter.notifyDataSetChanged();
    }
}; 
```

我对 Android 开发非常陌生，因此我的知识存在很大差距，但据我所知，getView() 似乎是问题的根源，因为尽管它被调用并且确实充满了我的对象，屏幕上什么也没有发生。

最后，我在这里基于这段代码的大部分线程和 UI 内容：http: [//www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:02:05.897

我有一个朋友和我一起看代码，遗憾的是，解决方案没有我希望的那么有趣。事实证明，我的自定义行 xml 存在简单的问题，我不小心将高度设置为 0。我想如果有的话，这会提醒您偶尔休息一下……以下是任何感兴趣的人的更新后的 XML .

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip"
    android:orientation="vertical" >

    <ImageView android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
        android:contentDescription="@string/custom_row_icon" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="0dip">

        <TextView android:id="@+id/name_text_view"
            android:layout_width="fill_parent"
            android:layout_height="30sp" 
            android:textColor="#ffffff" />
        <TextView android:id="@+id/vicinity_text_view" 
            android:layout_width="fill_parent"
            android:layout_height="30sp"
            android:textColor="#999999" />
        <TextView android:id="@+id/rating_text_view" 
            android:layout_width="fill_parent"
            android:layout_height="30sp"
            android:textColor="#EBE41C" />
    </LinearLayout>
</LinearLayout> 
```

# php - Facebook API 适用于 /feed，但不适用于 /photos

> ID：10165264
> 
> 赞同：2
> 
> 时间：2012-04-15T19:25:11.020
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

如果我传递`/pageid/feed`到，以下是可以正常工作的代码`facebook->api`，但是当我将其更改为将图像直接上传到我的 Facebook 相册时，它将无法正常工作。请让我知道我在以下代码中做错了什么：

```
// Works fine
$status = $facebook->api("/194458563914948/feed", 'post', $attachment);

// Does not work
$status = $facebook->api("/196878530339618/photos", 'post', $attachment); 
```

# 完整来源

```
 <?php

require 'src/facebook.php';

$app_id = "332267477347";
$app_secret = "xxxx";

$facebook = new Facebook(array(
 'appId' => $app_id,
 'secret' => $app_secret,
 'cookie' => true,
 'fileUpload' => true,

));

$facebook->setFileUploadSupport(true);  

$user = $facebook->getUser();
//echo $user;

if(($facebook->getUser())==0)
{
 header("Location:{$facebook->getLoginUrl(array('scope' => 'photo_upload,user_status,publish_stream,user_photos,manage_pages'))}");
 exit;
}
else {
$accounts_list = $facebook->api('/me/accounts');
echo "i am connected";
}
  $valid_files = array('image/jpeg', 'image/png', 'image/gif');

//to get the page access token to post as a page
foreach($accounts_list['data'] as $account){
      if($account['id'] == 194458563914948){      // my page id =123456789
        $access_token = $account['access_token'];
        echo "<p>Page -- Access Token: $access_token</p>";
        }
    }

//posting to the page wall

if (isset($_FILES) && !empty($_FILES))
{  
$aid = '421539304540205';
$folder = "pak/".$_FILES['pic']['name'];
$fold = 'http://snowdrop.com.pk/fb/'.$folder;
echo $fold."<br>";
if( move_uploaded_file($_FILES['pic']['tmp_name'], $folder) )
{
#Upload photo here
  $img = realpath($_FILES["pic"]["tmp_name"]);
$attachment = array('message' => $_POST['textfield'],
                           'aid' => $aid,
   'source' => '@' . $img,
                                'access_token' => $access_token,

                );
$status = $facebook->api("/421539304540205/photos", 'post', $attachment);

echo $status;
var_dump($status);

 }
 else{
    echo 'Only jpg, png and gif image types are supported!';

}
}
?>
<body>
 <!-- Form for uploading the photo -->
 <div class="main">
  <p>Select a photo to upload on Facebook Fan Page</p>
  <form method="post" action="" enctype="multipart/form-data">
  <p>Select the image: <input type="file" name="pic" />
    <br />
    <label>Description
    <input type="text" name="textfield" id="textfield" />
    </label>
  </p>
  <p><input class="post_but" type="submit" value="Upload to my album" /></p>
  </form>
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:26:04.807

您使用的路径*/406221796071956/photos*是错误的，这就是它不起作用的原因。

这条路径错误的原因是*406221796071956*是图片的 id，你自己看看，[*406221796071956*](http://developers.facebook.com/tools/explorer?method=GET&path=406221796071956)[的Graph API Explorer](http://developers.facebook.com/tools/explorer?method=GET&path=406221796071956)*说：*

 *> “类型”：“照片”

如果您想发布到该相册，请使用*/196878530339618/photos*，因为它是相册：[Graph API Explorer for *196878530339618*](http://developers.facebook.com/tools/explorer?method=GET&path=196878530339618)

> “类型”：“专辑”

* * *

# 编辑

请参阅[https://developers.facebook.com/docs/reference/api/album/#photos](https://developers.facebook.com/docs/reference/api/album/#photos)将照片添加到相册。

* * *

# 第二次编辑

根据[Album 对象](http://developers.facebook.com/docs/reference/api/album/)的文档：

> **可以上传**
> 
> 判断UID是否可以上传到相册，如果用户拥有相册，相册未满，app可以添加照片到相册，返回true

因此，您需要相册不要满，成为相册的所有者并拥有正确的上传权限。*

# php - 在设定时间后停止脚本执行

> ID：10165274
> 
> 赞同：1
> 
> 时间：2012-04-15T19:26:45.233
> 
> 标签：php

我使用外部资源来获取用户到我的网站的位置，以便我可以针对该位置自定义网站，但是我使用的外部资源有时可能非常慢，因此会减慢我的网站速度，我使用`cURL`和获取外部数据我已经实现了一个超时功能`curl_setopt($ch,CURLOPT_TIMEOUT,1000);`，但是一旦超时进入页面停止加载并且一半页面丢失。

这是在我的网站上使用的脚本

```
$i = 1;
$geoplugin = new geoPlugin();
$geoplugin->locate();
if(empty($_SESSION['country'])) { 
  $conchk = $geoplugin->countryName;
  $_SESSION['country'] =  $conchk;
}
else { $conchk = $_SESSION['country']; }
if(empty($conchk)) {$countrygeo = "NULL_CONT";} else {$countrygeo = $conchk;}
//$countrygeo = "Spain";
$country_find = mysql_query("SELECT * FROM country_list 
  WHERE country='$countrygeo' LIMIT 1");
while($row_cou = mysql_fetch_array($country_find)) {
  $rowcov = $row_cou[1];
  //Geo-location default!
  print "<option selected value=\"$rowcov\">$rowcov</option>\n";
  $kvar = 1;
}
//finish first while loop!
//if we cant find the geo-country in the list print the whole table!
$country_full_list_print = mysql_query("SELECT * FROM country_list 
  ORDER BY country ASC");
while($row_full = mysql_fetch_array($country_full_list_print)) {
  if( ($row_full[1] == "United Kingdom") && ($i == 1) && (empty($kvar)) ) { 
    print "<option selected value=\"$row_full[1]\">$row_full[1]</option>\n"; $i++; }   
    //always print uk as default if no results.
elseif ($row_full[1] == $rowcov) {  }
else { 
  print "<option value=\"$row_full[1]\">$row_full[1]</option>\n"; } //this is the default print!
} //close while loop and if num_rows less than 1. 
```

如果有人有任何想法如何停止 $geoplugin 但继续加载页面，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:16:51.560

对此唯一好的解决方案涉及 Javascript：将调用外部资源的部分移至另一个脚本，并尽快使用 AJAX 调用它。通过这种方式，您可以对该单独的脚本施加严格的时间限制，如果您超过它，则没有问题：AJAX 请求将失败，但您可以优雅地处理它，并且不会影响页面的其余部分。

您应该已经这样做了，因为即使缓慢的外部响应不会让您的页面半生不熟，它仍然会让*您的*页面看起来对任何延迟负责。

# javascript - 带有 JavaScript 的 RegEx 匹配得更多

> ID：10165280
> 
> 赞同：0
> 
> 时间：2012-04-15T19:27:22.317
> 
> 标签：javascript, regex, html-parsing

相当简单的 HTML（省略号表示有更多代码）：

```
...Profile">
 Some text
 </a>... 
```

使用 JavaScript 的在线 RegEx 测试器（http://regexpal.com/），我可以使用以下表达式提取“一些文本”（注意它包含换行符）：

```
(?=Profile">)[\s\S]*(?=</a) 
```

（不幸的是，JavaScript 不支持look-behinds，所以我也提取了Something"> 以稍后删除它。但是，问题是下面的代码

```
var ShowContent = document.getElementById(id);
ShowContent = ShowContent.innerHTML;
var patt3=/Profile">[\s\S]*(?=<)/;
var GetName=patt3.exec(ShowContent);
alert(GetName); 
```

不提取在线测试器显示的内容，但它还包括“某些文本”之后的整个 HTML 代码（IE，不仅是结尾`< /a`，还包括后面的所有内容）。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:38:01.617

当您确定提供的字符串不包含可能的陷阱时（例如`<input value='Profile">'>`，替换`[\s\S]*`为`[^<]*`（除了 a 之外的任何内容`<`）：

```
var patt3 = /Profile">([^<]*)/;
var getName = patt3.exec(ShowContent);
getName = getName ? getName[1] : ''; // If no match has been found -> empty string

alert(getName); 
```

（我也替换`GetName`为`getName`，因为以大写字母开头的 camelCased 变量通常表示构造函数。遵守约定，不要以大写字母开头非构造函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:28:45.160

你可能会更好地使量词不贪婪。试试这个正则表达式：

```
/Profile">([\s\S]*?)(?=<)/ 
```

# c - 我的计算机认为signed int 小于-1？

> ID：10165282
> 
> 赞同：3
> 
> 时间：2012-04-15T19:27:28.743
> 
> 标签：c, linux, unix, casting

```
#include <stdio.h>
int main(void)
{
    printf("%d", sizeof(signed int) > -1);
    return 0;
} 
```

结果为 0（假）。怎么会这样？我使用的是 64 位 ubuntu linux，所以结果应该是 (4 > -1) => 1 => True。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T19:29:33.313

问题是`sizeof`运算符返回一个无符号数量 ( `size_t`)。所以比较提升`-1`为无符号，这使它看起来像一个非常大的数字。

你可以试试：

```
printf("%d", ((int)sizeof(signed int)) > -1); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-15T19:30:40.377

`sizeof(signed int)`有 type `size_t`，这是一个无符号类型。当您在有符号值和无符号值之间进行比较时[并且无符号值的类型至少与有符号值的类型一样大]，有符号值在比较之前转换为无符号值。此转换导致`-1`成为无符号类型的*最大可能*值。换句话说，就像你写的

```
#include <limits.h>
/* ... */
printf("%d", sizeof(signed int) > SIZE_MAX); 
```

当你犯这个错误时，你可以让 gcc 发出警告，但默认情况下它不是打开的，甚至在`-Wall`: you need`-Wextra`或更具体地说是`-Wsign-compare`. （这个警告*会*产生很多误报，但我认为打开新代码很有用。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-15T19:35:12.457

### 整数*促销*

C中有许多*隐式转换*，特别有助于理解所谓的*“通常的算术转换”，*其中包括所谓*的整数提升*。¹

实际的规则有点复杂，但是，简化后，当运算符具有不同类型的操作数时，所有标量类型都会自动转换。转换首先获取较低级别的操作数并将其转换为较高级别的类型。然后，如果只有一个操作数是有符号的，它将被转换为无符号的，除非具有符号类型的操作数更大并且可以表示所有无符号类型的值。您的示例并非如此，因为 size_t 几乎总是与 int 一样大或更大。

最后，在几乎所有机器上，-1 都设置了所有位，当被视为无符号时，它是一个非常大的数字。

* * *

^(1\. ISO/IEC 9899:1999 *("C99")* **6.3 转换**)

# c# - Publishesettings 告诉位置是保留的系统名称或磁盘不可写？

> ID：10165287
> 
> 赞同：1
> 
> 时间：2012-04-15T19:28:20.507
> 
> 标签：c#, visual-studio-2010, azure

我正在尝试使用 C# Mvc yada yada 开始使用 Windows Azure，作品：D

我有一个 90 天的跟踪，并到达了我下载 xxx.publishsettings 文件的部分，但是当我尝试导入它时，MS Web Dev 2010 Express 告诉我：

“无法创建指定的位置。请检查该位置是否不是保留的系统名称，以及我可写的磁盘以及磁盘上是否有足够的空间。”

如果这很重要，我以管理员身份运行 Web Dev？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:01:25.807

您可能有病毒导致它限制对某些事物的访问在将计算机置于安全模式并将其回滚之前，我遇到了同样的问题，然后再试一次，如果它不起作用，请尝试在安全模式下进行

# javascript - 在移动设备上停止特定 JavaScript 函数的最佳方法

> ID：10165289
> 
> 赞同：7
> 
> 时间：2012-04-15T19:28:26.230
> 
> 标签：javascript, jquery, html, css

对于我目前的项目，我在网站上使用视差滚动，目前正在开发网站的移动/平板电脑版本。

目前，由于滚动事件的差异，视差滚动在平板电脑和手机上效果不佳，所以我想在检测到移动设备时禁用脚本文件中的 javascript 调用。目前我正在使用

`if ( $(window).width() > 960) {`

然后触发我的视差代码。我想知道是否有更好的方法来针对设备而不是分辨率，因为我知道市场上的许多屏幕宽度将超过 960 像素。

[如果您想了解它是如何工作的，可以在http://beta.residencyradio.com](http://beta.residencyradio.com)上找到该网站的当前版本，但如果您愿意提供任何帮助，我们将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T19:37:33.030

**检测移动设备的解决方案**

查看[检测移动浏览器](http://detectmobilebrowsers.com/)网站。有一系列适用于不同语言的脚本，包括 JavaScript，可用于在检测到移动浏览器时包含不同的行为。

默认情况下，如果检测到移动浏览器，脚本将简单地加载另一个 URL。它旨在在检测到移动设备时加载您网站的移动版本。

但是，稍作修改，您可以使用脚本设置一个“标志”，您可以在确定是否执行不同的行为时使用它，但仍然为所有设备加载相同的网站。我用下面的`alert("mobile detected")`占位符条目修改了下面的代码：

```
isMobile=false;(function(a,b){if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))alert("mobile detected")})(navigator.userAgent||navigator.vendor||window.opera,'http://detectmobilebrowser.com/mobile'); 
```

在此脚本的末尾附近，它说`alert("mobile detected")`只需将其替换为`isMobile=true`. 如果脚本检测到移动浏览器，则该标志将设置为 true。

我将警报留在了那里，因此您可以使用不同的设备运行脚本以查看警报。

**外形尺寸和设计技巧**

现在，我确实想指出，移动设备、平板电脑和台式机的外形尺寸大不相同。此外，用户与这 3 种外形因素交互的方式也大不相同。这可能意味着为所有 3 个平台构建一个网站可能会损害可用性并阻止您为所有 3 个平台创建最佳用户体验。

根据我的经验，我最喜欢使用的移动和平板电脑网站是专门为这些设备设计的。换句话说，它们不仅仅是现有的网站或 Web 应用程序，有人对其进行了修改以试图使事情“适应”移动和平板电脑平台。

取而代之的是，那些具有高度可用性的网站的移动版和平板电脑版是从头开始设计的，独立于桌面版，因此更新、错误修复、设计更改等都可以在一个平台上进行，因此两者可以独立分开，以适应每个平台上用户的用例。

例如，我最近构建了两个 Web 表单，一个是为桌面浏览器设计的，另一个是为移动浏览器设计的。桌面版在一个 HTML 文件中，而移动版在另一个 HTML 文件中。移动版本使用 jQuery Mobile，因此它具有触摸、滑动和其他功能，使在移动设备上与站点交互成为一种乐趣。它也感觉更像是一个移动应用程序，感觉更“原生”。桌面版具有更多涉及鼠标点击或键盘快捷键的 UI 元素，看起来更像是一个网站而不是移动应用程序。

由于我不知道您的应用程序的确切细节，您当然想看看您在做什么，并问自己如果您创建独立于桌面版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T19:52:33.733

I would suggest using the Modernizr.touch test in this case. Like you say, it's common that touch events are only fired on the completion of a 'scroll' on a touch device.

# c++ - 无法更新 DoDataExchange 方法：VS 2000 项目转换为 Visual Studio 2008 或 VS 2010 选项

> ID：10165294
> 
> 赞同：0
> 
> 时间：2012-04-15T19:29:02.593
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, visual-c++, mfc

我有问题。我有一个项目“MicroSIP”，用于基于 SIP 的 IP 呼叫语音。我将它运行到 VS 2010 中，我需要根据我的需要对其进行自定义。为此，只要我编辑主对话框（ Dialer ）并添加一些其他控件（例如 CEdit 的编辑控件）并从“添加变量”向导添加成员变量，它就会显示消息“无法更新 DoDataExchange 方法”。此外，如果在程序中获取新放置的“编辑控件”的引用，它有空指针或未定义的引用。

它现在在`DDX_Control(pDX, IDC_EDIT_Address, MacAddressEditCtrl );`where和`IDC_EDIT_Address`is对象内崩溃。`id``MAcAddressEditctrl``CWnd`

```
void AFXAPI DDX_Control(CDataExchange* pDX, int nIDC, CWnd& rControl)
{
    if ((rControl.m_hWnd == NULL) && (rControl.GetControlUnknown() == NULL))    // not subclassed yet
    {
        ASSERT(!pDX->m_bSaveAndValidate);

        pDX->PrepareCtrl(nIDC);   //it crashes here...
      HWND hWndCtrl;
      pDX->m_pDlgWnd->GetDlgItem(nIDC, &hWndCtrl);
        if ((hWndCtrl != NULL) && !rControl.SubclassWindow(hWndCtrl))
        {
            ASSERT(FALSE);      // possibly trying to subclass twice?
            AfxThrowNotSupportedException();
        }
#ifndef _AFX_NO_OCC_SUPPORT

    else
    {
     if (hWndCtrl == NULL)
     {
        if (pDX->m_pDlgWnd->GetOleControlSite(nIDC) != NULL)
        {
           rControl.AttachControlSite(pDX->m_pDlgWnd, nIDC);
        }
     }
     else
     {
           // If the control has reparented itself (e.g., invisible control),
           // make sure that the CWnd gets properly wired to its control site.
           if (pDX->m_pDlgWnd->m_hWnd != ::GetParent(rControl.m_hWnd))
               rControl.AttachControlSite(pDX->m_pDlgWnd);
     }
    }
#endif //!_AFX_NO_OCC_SUPPORT

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:54:58.567

我意识到我自己放置并编写了另一个 OnInitDialog 的代码。它是主对话框对整个我试图操纵另一个对话框代码的控制。谢谢

# c# - 实现接口隐式和显式是否有意义？

> ID：10165296
> 
> 赞同：7
> 
> 时间：2012-04-15T19:29:11.167
> 
> 标签：c#, interface, implicit, explicit

我目前正在准备我的 MS 70-515 考试。在其中一种实践中，作者实现了一个隐式和显式的接口。显式实现只是调用隐式实现。只是列出了显式实现，没有解释。

同时具有接口的隐式和显式实现是否有意义？我认为显式实现是多余的（在这种情况下）。

```
public class PassTextBox : TextBox, IScriptControl
{
    public virtual IEnumerable<ScriptDescriptor> GetScriptDescriptors()
    {
        var descriptor = new ScriptControlDescriptor(
            "AjaxEnabled.PassTextBox", ClientID);
        // ...
        return new ScriptDescriptor[] {descriptor};
    }

    IEnumerable<ScriptDescriptor> IScriptControl.GetScriptDescriptors()
    {
        return GetScriptDescriptors();
    }
} 
```

顺便说一句，代码似乎在没有显式实现的情况下运行得很好，因为隐式实现是公开的。

*它涉及[MCTS 自定进度培训工具包（考试 70-515）：使用 Microsoft .NET Framework 进行 Web 应用程序开发 4](http://astore.amazon.co.uk/foojinetabout-21/detail/0735627401)第 9 章，第 2 课，准确地说是练习 3。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T19:37:20.403

显式实现似乎完全是多余的。

我想不出一种方法来称呼它，如果您忽略它会有所作为。

有一个小的区别，隐式版本是虚拟的，这意味着它可以被覆盖。显式版本将始终在此入口点调用。但是因为它只调用虚拟成员，所以这里没有使用差异。

# android - 从图库或相机中选择图像的对话框

> ID：10165302
> 
> 赞同：139
> 
> 时间：2012-04-15T19:29:50.360
> 
> 标签：android

是否有一种标准的方式来调用对话框，选择从相机中选择图像或从图库中获取（如在内置电话簿或 Skype 中）？

我已经看过了，[但是](https://stackoverflow.com/questions/8498259/choose-an-image-from-camera-or-gallery)代码打开了画廊，但没有建议从相机中选择它。

设备：三星 Galaxy Tab
Android：2.3.3

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-04-16T02:37:02.970

下面的代码可用于拍照和挑选照片。只需显示一个带有两个选项的对话框，并在选择后使用适当的代码。

从相机拍照：

```
Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(takePicture, 0);//zero can be replaced with any action code (called requestCode) 
```

从图库中挑选照片：

```
Intent pickPhoto = new Intent(Intent.ACTION_PICK,
           android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(pickPhoto , 1);//one can be replaced with any action code 
```

`onActivityResult`代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 
    switch(requestCode) {
    case 0:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            imageview.setImageURI(selectedImage);
        }

    break; 
    case 1:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            imageview.setImageURI(selectedImage);
        }
    break;
    }
} 
```

最后在清单文件中添加这个权限：

```
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-10-15T12:56:06.833

我已经合并了一些解决方案，以制作一个完整的工具，用于从图库或相机中挑选图像。这些是[ImagePicker util gist](https://gist.github.com/Mariovc/f06e70ebe8ca52fbbbe2)的功能（也在[Github lib](https://github.com/Mariovc/ImagePicker)中）：

*   图库和相机请求的合并意图。
*   调整所选大图像的大小（例如：2500 x 1600）
*   必要时旋转图像

**截屏：**

[![ImagePicker 起始意图](../Images/f38030ea5a4611d0593a959366418067.png)](https://i.imgur.com/mq4I587.png)

**编辑**：这是一个将图库和相机应用程序合并的 Intent 的代码片段。[您可以在ImagePicker util gist](https://gist.github.com/Mariovc/f06e70ebe8ca52fbbbe2)中查看完整代码（也在[Github lib](https://github.com/Mariovc/ImagePicker)中）：

```
public static Intent getPickImageIntent(Context context) {
    Intent chooserIntent = null;

    List<Intent> intentList = new ArrayList<>();

    Intent pickIntent = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    Intent takePhotoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    takePhotoIntent.putExtra("return-data", true);
    takePhotoIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getTempFile(context)));
    intentList = addIntentsToList(context, intentList, pickIntent);
    intentList = addIntentsToList(context, intentList, takePhotoIntent);

    if (intentList.size() > 0) {
        chooserIntent = Intent.createChooser(intentList.remove(intentList.size() - 1),
                context.getString(R.string.pick_image_intent_text));
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentList.toArray(new Parcelable[]{}));
    }

    return chooserIntent;
}

private static List<Intent> addIntentsToList(Context context, List<Intent> list, Intent intent) {
    List<ResolveInfo> resInfo = context.getPackageManager().queryIntentActivities(intent, 0);
    for (ResolveInfo resolveInfo : resInfo) {
        String packageName = resolveInfo.activityInfo.packageName;
        Intent targetedIntent = new Intent(intent);
        targetedIntent.setPackage(packageName);
        list.add(targetedIntent);
    }
    return list;
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-02-07T04:25:41.093

[这个](https://github.com/jrvansuita/PickImage)库使它变得简单。

只需致电：

```
PickImageDialog.on(MainActivity.this, new PickSetup(BuildConfig.APPLICATION_ID)); 
```

然后让你的 Activity 实现 IPickResult 并覆盖下面的方法。

```
@Override
public void onPickResult(PickResult r) {
    if (r.getError() == null) {
        imageView.setImageBitmap(r.getBitmap());

        //or

        imageView.setImageURI(r.getUri());
    } else {
        //Handle possible errors
        //TODO: do what you have to do with r.getError();
    }
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-03-24T10:10:16.910

您可以实现此代码以从图库或相机中选择图像：-

```
private ImageView imageview;
private Button btnSelectImage;
private Bitmap bitmap;
private File destination = null;
private InputStream inputStreamImg;
private String imgPath = null;
private final int PICK_IMAGE_CAMERA = 1, PICK_IMAGE_GALLERY = 2; 
```

现在在按钮单击事件上，您可以调用选择图像的方法。这是活动的 onCreate 内部。

```
imageview = (ImageView) findViewById(R.id.imageview);
btnSelectImage = (Button) findViewById(R.id.btnSelectImage);

//OnbtnSelectImage click event...
btnSelectImage.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            selectImage();
        }
    }); 
```

在您的活动的 oncreate 之外。

```
// Select image from camera and gallery
private void selectImage() {
    try {
        PackageManager pm = getPackageManager();
        int hasPerm = pm.checkPermission(Manifest.permission.CAMERA, getPackageName());
        if (hasPerm == PackageManager.PERMISSION_GRANTED) {
            final CharSequence[] options = {"Take Photo", "Choose From Gallery","Cancel"};
            android.support.v7.app.AlertDialog.Builder builder = new android.support.v7.app.AlertDialog.Builder(activity);
            builder.setTitle("Select Option");
            builder.setItems(options, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int item) {
                    if (options[item].equals("Take Photo")) {
                        dialog.dismiss();
                        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                        startActivityForResult(intent, PICK_IMAGE_CAMERA);
                    } else if (options[item].equals("Choose From Gallery")) {
                        dialog.dismiss();
                        Intent pickPhoto = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        startActivityForResult(pickPhoto, PICK_IMAGE_GALLERY);
                    } else if (options[item].equals("Cancel")) {
                        dialog.dismiss();
                    }
                }
            });
            builder.show();
        } else
            Toast.makeText(this, "Camera Permission error", Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        Toast.makeText(this, "Camera Permission error", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    inputStreamImg = null;
    if (requestCode == PICK_IMAGE_CAMERA) {
        try {
            Uri selectedImage = data.getData();
            bitmap = (Bitmap) data.getExtras().get("data");
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 50, bytes);

            Log.e("Activity", "Pick from Camera::>>> ");

            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.getDefault()).format(new Date());
            destination = new File(Environment.getExternalStorageDirectory() + "/" +
                    getString(R.string.app_name), "IMG_" + timeStamp + ".jpg");
            FileOutputStream fo;
            try {
                destination.createNewFile();
                fo = new FileOutputStream(destination);
                fo.write(bytes.toByteArray());
                fo.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            imgPath = destination.getAbsolutePath();
            imageview.setImageBitmap(bitmap);

        } catch (Exception e) {
            e.printStackTrace();
        }
    } else if (requestCode == PICK_IMAGE_GALLERY) {
        Uri selectedImage = data.getData();
        try {
            bitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), selectedImage);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 50, bytes);
            Log.e("Activity", "Pick from Gallery::>>> ");

            imgPath = getRealPathFromURI(selectedImage);
            destination = new File(imgPath.toString());
            imageview.setImageBitmap(bitmap);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public String getRealPathFromURI(Uri contentUri) {
    String[] proj = {MediaStore.Audio.Media.DATA};
    Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

Atlast，最后在AndroidManifest.xml中添加摄像头并写入外部存储权限

它对我很有用，希望它也对你有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-28T09:53:37.137

**如果您想从图库中获取图像或捕获图像并将其设置为纵向模式的图像视图，那么以下代码将对您有所帮助..**

**在 onCreate()**

```
imageViewRound.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            selectImage();
        }
    });

    private void selectImage() {
    Constants.iscamera = true;
    final CharSequence[] items = { "Take Photo", "Choose from Library",
            "Cancel" };

     TextView title = new TextView(context);
     title.setText("Add Photo!");
        title.setBackgroundColor(Color.BLACK);
        title.setPadding(10, 15, 15, 10);
        title.setGravity(Gravity.CENTER);
        title.setTextColor(Color.WHITE);
        title.setTextSize(22);

    AlertDialog.Builder builder = new AlertDialog.Builder(
            AddContactActivity.this);

    builder.setCustomTitle(title);

    // builder.setTitle("Add Photo!");
    builder.setItems(items, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int item) {
            if (items[item].equals("Take Photo")) {
                // Intent intent = new
                // Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                Intent intent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                /*
                 * File photo = new
                 * File(Environment.getExternalStorageDirectory(),
                 * "Pic.jpg"); intent.putExtra(MediaStore.EXTRA_OUTPUT,
                 * Uri.fromFile(photo)); imageUri = Uri.fromFile(photo);
                 */
                // startActivityForResult(intent,TAKE_PICTURE);

                Intent intents = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);

                intents.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

                // start the image capture Intent
                startActivityForResult(intents, TAKE_PICTURE);

            } else if (items[item].equals("Choose from Library")) {
                Intent intent = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                intent.setType("image/*");
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"),
                        SELECT_PICTURE);
            } else if (items[item].equals("Cancel")) {
                dialog.dismiss();
            }
        }
    });
    builder.show();
}

    @SuppressLint("NewApi")
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case SELECT_PICTURE:
        Bitmap bitmap = null;
        if (resultCode == RESULT_OK) {
            if (data != null) {

                try {
                    Uri selectedImage = data.getData();
                    String[] filePath = { MediaStore.Images.Media.DATA };
                    Cursor c = context.getContentResolver().query(
                            selectedImage, filePath, null, null, null);
                    c.moveToFirst();
                    int columnIndex = c.getColumnIndex(filePath[0]);
                    String picturePath = c.getString(columnIndex);
                    c.close();
                    imageViewRound.setVisibility(View.VISIBLE);
                    // Bitmap thumbnail =
                    // (BitmapFactory.decodeFile(picturePath));
                    Bitmap thumbnail = decodeSampledBitmapFromResource(
                            picturePath, 500, 500);

                    // rotated
                    Bitmap thumbnail_r = imageOreintationValidator(
                            thumbnail, picturePath);
                    imageViewRound.setBackground(null);
                    imageViewRound.setImageBitmap(thumbnail_r);
                    IsImageSet = true;
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

        break;
    case TAKE_PICTURE:
        if (resultCode == RESULT_OK) {

            previewCapturedImage();

        }

        break;
    }

}

 @SuppressLint("NewApi")
private void previewCapturedImage() {
    try {
        // hide video preview

        imageViewRound.setVisibility(View.VISIBLE);

        // bimatp factory
        BitmapFactory.Options options = new BitmapFactory.Options();

        // downsizing image as it throws OutOfMemory Exception for larger
        // images
        options.inSampleSize = 8;

        final Bitmap bitmap = BitmapFactory.decodeFile(fileUri.getPath(),
                options);

        Bitmap resizedBitmap = Bitmap.createScaledBitmap(bitmap, 500, 500,
                false);

        // rotated
        Bitmap thumbnail_r = imageOreintationValidator(resizedBitmap,
                fileUri.getPath());

        imageViewRound.setBackground(null);
        imageViewRound.setImageBitmap(thumbnail_r);
        IsImageSet = true;
        Toast.makeText(getApplicationContext(), "done", Toast.LENGTH_LONG)
                .show();
    } catch (NullPointerException e) {
        e.printStackTrace();
    }
}

    // for roted image......
private Bitmap imageOreintationValidator(Bitmap bitmap, String path) {

    ExifInterface ei;
    try {
        ei = new ExifInterface(path);
        int orientation = ei.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);
        switch (orientation) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            bitmap = rotateImage(bitmap, 90);
            break;
        case ExifInterface.ORIENTATION_ROTATE_180:
            bitmap = rotateImage(bitmap, 180);
            break;
        case ExifInterface.ORIENTATION_ROTATE_270:
            bitmap = rotateImage(bitmap, 270);
            break;
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    return bitmap;
}

private Bitmap rotateImage(Bitmap source, float angle) {

    Bitmap bitmap = null;
    Matrix matrix = new Matrix();
    matrix.postRotate(angle);
    try {
        bitmap = Bitmap.createBitmap(source, 0, 0, source.getWidth(),
                source.getHeight(), matrix, true);
    } catch (OutOfMemoryError err) {
        source.recycle();
        Date d = new Date();
        CharSequence s = DateFormat
                .format("MM-dd-yy-hh-mm-ss", d.getTime());
        String fullPath = Environment.getExternalStorageDirectory()
                + "/RYB_pic/" + s.toString() + ".jpg";
        if ((fullPath != null) && (new File(fullPath).exists())) {
            new File(fullPath).delete();
        }
        bitmap = null;
        err.printStackTrace();
    }
    return bitmap;
}

public static Bitmap decodeSampledBitmapFromResource(String pathToFile,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(pathToFile, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);

    Log.e("inSampleSize", "inSampleSize______________in storage"
            + options.inSampleSize);
    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(pathToFile, options);
}

public static int calculateInSampleSize(BitmapFactory.Options options,
        int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        // Calculate ratios of height and width to requested height and
        // width
        final int heightRatio = Math.round((float) height
                / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will
        // guarantee
        // a final image with both dimensions larger than or equal to the
        // requested height and width.
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;

    }

    return inSampleSize;
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

private static File getOutputMediaFile(int type) {

    // External sdcard location
    File mediaStorageDir = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            IMAGE_DIRECTORY_NAME);

    // Create the storage directory if it does not exist
    if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d(IMAGE_DIRECTORY_NAME, "Oops! Failed create "
                    + IMAGE_DIRECTORY_NAME + " directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss",
            Locale.getDefault()).format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "IMG_" + timeStamp + ".jpg");
    } else {
        return null;
    }

    return mediaFile;
}

public Uri getOutputMediaFileUri(int type) {
    return Uri.fromFile(getOutputMediaFile(type));
} 
```

**希望对你有帮助....！！！**

如果 targetSdkVersion 高于 24，则使用 FileProvider 授予访问权限。

创建一个xml文件（路径：res\xml）provider_paths.xml

```
<?xml version="1.0" encoding="utf-8"?>
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <external-path name="external_files" path="."/>
</paths> 
```

在 AndroidManifest.xml 中添加 Provider

```
<provider
    android:name="android.support.v4.content.FileProvider"
    android:authorities="${applicationId}.provider"
    android:exported="false"
    android:grantUriPermissions="true">
    <meta-data
        android:name="android.support.FILE_PROVIDER_PATHS"
        android:resource="@xml/provider_paths"/>
</provider> 
```

并更换

```
return Uri.fromFile(getOutputMediaFile(type)); 
```

到

```
 return FileProvider.getUriForFile(this,  BuildConfig.APPLICATION_ID + ".provider", getOutputMediaFile(type)); 
```

# javascript - 为什么在 IE8 中的 Jquery 插件“Null or no object”中设置了一个选项？

> ID：10165303
> 
> 赞同：1
> 
> 时间：2012-04-15T19:29:55.727
> 
> 标签：javascript, jquery, internet-explorer, jquery-mobile, internet-explorer-8

我有这个：

```
(function ($, window) {

$.widget("mobile.multiview", $.mobile.widget, {

    options: {

        $lowerThresh: 320,
        $upperThresh: 768
    },
    framer: function () {

        var self = $(this);
        if ($.mobile.media("screen and (max-width:320px)") || ($.mobile.browser.ie && $(window).width() < self.options.$lowerThresh)) {
            var framed = "small";
        } else if ($.mobile.media("screen and (min-width:768px)") || ($.mobile.browser.ie && $(window).width() >= self.options.$upperThresh)) {
            var framed = "large";
        } else {
            var framed = "medium";
        }

        console.log(framed);

    }
})(jQuery, this); 
```

这在所有浏览器中都可以正常工作，仅在 IE8 上它返回*self.options.$lowerThresh is null or not an object*。

任何想法，为什么会这样？我正在使用 Jquery 1.7.1 和 Jquery Mobile 1.1。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:05:31.887

知道了。

```
self = $(this); 
```

应该：

```
self = $this; 
```

然后IE播放。

# c# - C# 循环不循环 if 语句

> ID：10165318
> 
> 赞同：0
> 
> 时间：2012-04-15T19:31:35.600
> 
> 标签：c#, loops

我在循环中有一个 if 语句，使用`Debug.Write()`我已经确定对于循环的第一次迭代，一切都按预期工作，但在随后的迭代中，if 块被忽略，但循环中的所有其他内容仍然执行。我尝试了一些变体，但到目前为止，它们都没有奏效。

最初我有：

```
Private int Loop()
{
    int a = 50000;
    int n = 0;
    for (int n = 0; n < arrayListFromElsewhere.Count(); n++)
    {
        if ((int)arrayListFromElsewhere[n] < a)
        {
            Debug.WriteLine("if loop: " + n);
            a = n;
        }
        Debug.WriteLine("N: " + n);
    }
} 
```

哪个会打印：

```
if loop: 0
N: 0
N: 1
N: 2
etc... 
```

我已经验证了 ArrayList 只包含整数，用一段时间替换了 for 并尝试将 if 移动到一个单独的函数中，该函数在 for/while 内部调用，但到目前为止没有任何效果。那么我忽略了什么非常明显的事情呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:34:02.647

在循环的第一次迭代之后，您已设置`a`为`n`. 从那时起，只有当 中的值为负时，您才会进入该`if`语句。*是否有*任何负值？（顺便说一下，一个简短但完整的失败示例确实会有所帮助 - 以及对您正在*尝试*做的事情的一些解释。）`ArrayList`

 **（顺便说一句，你为什么还在使用非泛型集合？2004 正在调用 - 它想要它的代码！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T19:34:28.537

第一次虽然循环 a = n 而 n 为零，所以当第二次评估 if 时 n =1 a = 0 arrayListFromElsewhere[n] = something > 0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T19:34:55.817

在您的第一次迭代`a`中变为 0（`n`第一次运行时的值）。

之后 if 语句`if ((int)arrayListFromElsewhere[n] < a)`总是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T19:35:19.983

是的，`if block`将根据您指定的条件被忽略。由于在第一个 if 块中，您已经设置了`a = n`. 在那种情况下`a will be 0`。因此，后续的 if 块将为 false 并且不会被执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T19:36:52.080

如果数组中只有正数，则在第一次迭代后 a 将为 0（if 中的第一个 n 为 0）并且它不会再进入 if。

此外，您已经 n 声明了两次。**

# asp.net - Page_Load 事件只触发一次

> ID：10165322
> 
> 赞同：0
> 
> 时间：2012-04-15T19:32:45.340
> 
> 标签：asp.net, events

我有一个具有母版页和多个普通页面的 asp.net 网站。母版页上有一个菜单栏，使用户能够选择普通页面。我在其中一个普通页面的 Page_Load 事件中有代码。问题是，这个事件似乎只触发一次——用户第一次导航到页面。如果用户导航到另一个页面然后再次返回，则不会触发该事件。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:54:40.223

If user user `Back` Button of browser browser will use cached version of your pages if your pages are normal and no specific setting applied to them. these codes cause if user use `Back` button nothing show to him/her:

```
Response.Cache.SetExpires(DateTime.Now.AddDays(-1)) ;
Response.Cache.SetValidUntilExpires(false) ;
Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches) ;
Response.Cache.SetCacheability(HttpCacheability.NoCache) ;
Response.Cache.SetNoStore(); 
```

Or for prvent user to go back use this code:

```
<body onLoad="if(history.length>0)history.go(+1)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:57:12.103

看来问题是由浏览器缓存页面引起的，谢谢你指出我正确的方向。

这个问题不仅出现在使用后退按钮时，所以我担心这并不能解决问题。

我的解决方案是用服务器端 asp.net 按钮控件替换我用于菜单的简单 html 超链接。当后面的代码执行 response.redirect 时，似乎每次都会执行目标页面的 page_load 事件。

# c# - Microsoft.Synchronization SyncAgent 升级到 VS2010 后崩溃

> ID：10165323
> 
> 赞同：0
> 
> 时间：2012-04-15T19:32:49.590
> 
> 标签：c#, visual-studio-2010, sql-server-ce, microsoft-sync-framework

我在 Visual Studio 2008 中使用 .net 3.5 设置了一个项目，该项目具有一个组件，可将数据从我的 sqlserver 同步到客户端 sqlce 数据库（SDF 文件）。一切正常，直到我决定将项目升级到 Visual Studio 2010，现在以下代码崩溃：

```
 try
        {
            MySyncAgent syncAgent = new MySyncAgent(filter);
            SyncStatistics syncStats = syncAgent.Synchronize(); //this crashes
        } 
```

我得到的异常是：EXCEPTION MESSAGE = [OBJECT REFERENCE NOT SET TO an instance of an OBJECT.] : STACKTRACE = [ AT SYSTEM.DATA.SQLSERVERCE.SQLCECHANGETRACKING.UPGRADEPUBLICTRACKING(STRING CONNECTIONSTRING) AT MICROSOFT.SYNCHRONIZATION.DATA.SQLSERVERCE.SQLCECLIENTSYNCPROVIDER .PERFORMUPGRADEIFNECESSARY() AT MICROSOFT.SYNCHRONIZATION.DATA.SQLSERVERCE.SQLCECLIENTSYNCPROVIDER.BEGINTRANSACTION(SYNCSESSION SYNCSESSION) AT MICROSOFT.SYNCHRONIZATION.SYNCAGENT.DATASYNCHRONIZE() AT MICROSOFT.SYNCHRONIZATION.SYNCAGENT.SYNCHRONIZE()

我错过了什么？

作为参考，我的 MySyncAgent 类构造函数如下所示：

```
 public class MySyncAgent : Microsoft.Synchronization.SyncAgent
{
 public MySyncAgent(string filter)
    {
        this.InitializeSyncProviders(filter);
        this.InitializeSyncTables();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:40:30.840

尝试将您的 SQL CE 升级到 3.5 SP2。

# android - 似乎无法在 Android 上增加录音音量。那么之后可以修改音频文件吗？

> ID：10165324
> 
> 赞同：0
> 
> 时间：2012-04-15T19:32:51.970
> 
> 标签：android, android-mediarecorder

我有一个录音应用程序，但录音太低了。

我从几个帖子中看到，增加录音音量并不容易（可能吗？）。

因此，我正在考虑一个 hack - 是否可以获取（低）音频文件并对其进行转换以增加音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:36:10.830

尝试自己修改音量按钮的操作，试试这个：

[http://www.vogella.com/articles/AndroidMedia/article.html](http://www.vogella.com/articles/AndroidMedia/article.html)

# objective-c - 在 Objective-C 和 Cocoa 中，是否有一个函数 debug_print(foobar) 可以打印出变量的名称以及转储它的值？

> ID：10165325
> 
> 赞同：0
> 
> 时间：2012-04-15T19:32:55.313
> 
> 标签：objective-c, cocoa

例如：

```
debug_print(foobar);     // prints out:  foobar is (hello, world)
debug_print(i * 27);     // prints out:  i * 27 is 54 
```

换句话说，首先打印出变量或表达式，然后将其值转储出来。

它不需要是这种形式。它也可以称为字符串：

```
debug_print("foobar");     // prints out:  foobar is (hello, world)
debug_print("i * 27");     // prints out:  i * 27 is 54 
```

**更新：或者如果没有内置怎么写？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:07:16.227

你可以使用宏

```
#define debug_print(expr...) NSLog(@"%@ is %@", @#expr, (expr)) 
```

如您所见，NSLog 格式字符串需要一个 %@（对象），因此您需要使用整数的变体：

```
#define debug_printI(expr...) NSLog(@"%@ is %d", @#expr, (expr)) 
```

**编辑：**

有一种方法可以使用单个宏并使其适用于所有类型：使用 @encoding 查找类型。

```
NSString *print_debug_format_for_type(const char *encoding) {
switch (encoding[0]) {
    case '@': return @"%@ is %@";
    case '*': return @"%@ is %s";

    case 'f': return @"%@ is %f";
    case 'd': return @"%@ is %f";

    case 'q': return @"%@ is %qi";
    case 'Q': return @"%@ is %qu";

    case 'c':
    case 'i':
    case 's':
    default: return @"%@ is %d";
}
}

#define debug_print(expr...) ({                                 \
typedef __typeof__(expr) t;                                     \
NSLog(print_debug_format_for_type(@encode(t)), @#expr, (expr)); \
}) 
```

有了这个，你可以在任何地方使用（几乎）任何类型的 debug_print，只要它在 print_debug_format_for_type 中。传入的编码（来自@encode）可以在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)找到[apple docs]，格式字符串的格式可以在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)找到[also apple docs]。照原样，这适用于任何对象、c 样式字符串、整数、浮点数或双精度表达式。

（小警告：ObjC BOOL 类型实际上是一个 typedef'd char，所以如果你 print_debug 一个布尔表达式，它会说它是 1 或 0。虽然这有效，它也意味着如果你 print_debug 一个 char 表达式，它会说它是字符的 ascii 号。要改变这种行为（并中断 BOOL 打印），请将 case 'c' 更改为`return @"%@ is %c"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:07:26.113

在 Objective-C 中，你不能在完全一般意义上做你想做的事，因为任何打印值的机制都需要知道该值的类型。对于绝对是对象指针的表达式，您可以执行以下操作：

```
#define debug_print(expr) NSLog(@"%@ is %@", @#expr, (expr)) 
```

在 Objective-C++ 中，您可以使用模板来制作一个完全通用的解决方案，例如：

```
#define debug_print(expr) do { std::cerr << #expr << " is " << (expr) } while (false) 
```

使用预处理器和“stringify”运算符（“#”）是获取括号中的文本并打印它的方式。

# javascript - jQuery：绑定元素以在其内容更改时显示/隐藏

> ID：10165328
> 
> 赞同：0
> 
> 时间：2012-04-15T19:33:17.393
> 
> 标签：javascript, jquery, events, binding, javascript-databinding

假设我的页面上有消息：

```
<div class="message one">Here is some text.</div>
...
<div class="message two">Here is other text for something else.</div> 
```

我有很多事件可能会在消息中添加一些文本，或者将其清除。

现在我有这个设置，每个消息发送函数调用也会检查消息是否可见并根据需要更改状态。这意味着这个基本逻辑有很多重复。

我想设置一个在任何消息 div 更改时触发的绑定，这样如果它设置为空，它就会向上滑动，如果它从空设置为有文本，那么它就会向下滑动。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:41:08.430

根据此链接，这将被称为 JQuery 不支持的“突变事件”： [Detect element content changes with jQuery](https://stackoverflow.com/questions/1091661/detect-element-content-changes-with-jquery)

我建议简单地创建一个辅助函数来将逻辑整合到一个地方。例如：

```
function updateElement(selector, newText)
{
    $(selector).text(newText);
    if (newText == '') $(selector.slideUp());
    else $(selector.slideDown());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:42:40.763

这是我想不到的东西，并不是您要查找的内容，而是更新 div 文本时要调用的函数，它需要您从单独的类中更改 div 类：'消息一' 到单个类 'message_one'

```
<script>
    $(function(){

        function show_message(class, message)
        {
            var $div = $('div[class='+class+']');

            $div.slideUp(250, function(){

                if (message.length > 0)
                {
                    $div.html(message);
                    $div.slideDown(250);
                }
            });
        }

        // example of calling this

        $('button').click(function(){
            // hide the div
            show_message('message_one', '');
        });

        $('someotherbutton').click(function(){
            // this will slideup and then slidedown
            show_message('message_two', "<p>Here's my message.</p>");
        });

    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:46:11.463

尝试这个：

```
$("div").live("change", function() {

   if ( $(this).text().length == 0) {

       $(this).slideUp();

   }  else { $(this).slideDown();}

}); 
```

# ssi - 最简单的支持 SSI 的 http 服务器？

> ID：10165331
> 
> 赞同：2
> 
> 时间：2012-04-15T19:33:52.500
> 
> 标签：ssi, httpserver

我正在开发一个 Web 原型，但我需要重用 HTML 代码。我找不到任何包含 html 文件的客户端解决方案，现在我正在尝试找到一个不需要配置的简单 http 服务器，例如：`python -m SimpleHTTPServer 8000`并且支持 SSI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:28:07.027

我发现新的 PHP 5.4 添加了一个简单的服务器，而且它[很容易设置和运行](http://php.net/manual/en/features.commandline.webserver.php)：`php -S localhost:8000`。
然后我可以使用 include PHP 函数轻松重用 HTML 代码：
`<?php include("common/top-logged-bar.html"); ?>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:45:24.097

[https://github.com/valenok/mongoose](https://github.com/valenok/mongoose)

猫鼬网络服务器可能会帮助你。

# javascript - onclick 事件处理程序不会触发

> ID：10165332
> 
> 赞同：1
> 
> 时间：2012-04-15T19:33:55.617
> 
> 标签：javascript, jquery, html

我有以下代码：

```
<div class="modal-footer">
   <a class="btn btn-primary" onclick="saveChanges ();">Save changes</a>
</div>

<script type="text/javascript">
$(document).ready(function() {
   function saveChanges () {
      tinyMCE.triggerSave();
   } 
   ...
   ... 
```

我不知道为什么，但是当我单击“保存更改”链接时，什么也没有发生，而且它似乎没有调用该`saveChanges`函数。

有没有一种方法可以`onClick`从链接中删除事件并拥有它，以便将`saveChanges()`功能附加到单击链接时`jQuery`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:35:56.903

该函数应该在 中`global scope`，如果它在内部范围内，则无法访问`onclick=...`：

```
<script type="text/javascript">
   function saveChanges () {
      tinyMCE.triggerSave();
   } 
</script> 
```

或使用**jQuery**：

```
<a class="btn btn-primary"> Save changes</a>

<script type="text/javascript">
$(function(){
    $('.btn-primary').click(function(){
        tinyMCE.triggerSave();
    });
});
</script> 
```

* * *

`<a>`给出这样的an是个好主意`id`：

```
<a id="theAnchor"> Save changes</a> 
```

然后...

```
$(function(){
    $('#theAnchor').click(function(){
        tinyMCE.triggerSave();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:36:50.417

HTML

```
 <a class="btn btn-primary" id="btnSave">Save changes</a> 
```

脚本

```
$(function(){
 $("#btnSave").click(function(){
   //Your code for Save changes goes here
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:38:11.307

使用您现有的代码，如果您想执行 jQuery 路由，您可以`click()`像这样绑定事件：

```
<script type="text/javascript">
    $(function() {
        $('.btn').click(function(e) {
            tinyMCE.triggerSave();
            e.preventDefault();
        });
    });
</script> 
```

这是将 click 事件绑定到具有 class 的所有元素`.btn`。如果您想更具体，可以使用不同的选择器。

您现有代码不起作用的原因是 onclick 找不到您的函数，因为您在 jQuery`$(document).ready`函数中定义了它。

# c++ - CMake 可以在 Mac OS X 上指定基础 SDK 吗？

> ID：10165335
> 
> 赞同：14
> 
> 时间：2012-04-15T19:34:11.013
> 
> 标签：c++, macos, cmake

有谁知道如何指定要使用 CMake 构建的 Mac OS X SDK？我已经搜索过，`cmake mac "base sdk"`但这没有任何结果。

我正在使用 CMake 生成 Unix 生成文件。

# 更新

在我的 10.6 安装中，我看到它`/Developer/SDKs`具有以下内容：

*   MacOSX10.4u.sdk
*   MacOSX10.5.sdk
*   MacOSX10.6.sdk

也许我可以让 CMake 以某种方式将这些路径之一传递给编译器？

另外，我的 10.7 安装只有：

*   MacOSX10.6.sdk
*   MacOSX10.7.sdk

这是否意味着它只能为这些平台构建？

## 更新 2

该死的，我才意识到实际上我没有使用 Xcode——所以这可能会影响一些答案。另外，我现在正在尝试使用 Mac OS X 10.8 开发人员预览版（有一些奇怪的结果，请参阅我的答案）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-11T23:41:16.183

在尝试 sakra 的有效答案（就 CMake 的行为而言有效）失败后，我进行了一番挖掘，发现如果我`--sysroot`向编译器指定标志，它似乎使用了正确的 SDK！

但是，当我针对 10.7（我在 10.8 中看不到）进行编译时，我现在看到了这个错误：

```
Undefined symbols for architecture i386:
  "_NXArgv", referenced from:
      execSelfNonDaemonized() in libarch.a(CArchDaemonUnix.o)
      CArchDaemonUnix::daemonize(char const*, int (*)(int, char const**)) in libarch.a(CArchDaemonUnix.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [bin/synergyc] Error 1
make[1]: *** [src/cmd/synergyc/CMakeFiles/synergyc.dir/all] Error 2
make: *** [all] Error 2 
```

注意：`CArchDaemonUnix`是 Synergy 中的一个类（我正在研究的一个开源项目）。

## 更新：

刚刚在我的 10.6 安装上尝试过这个，当我尝试为 10.5 编译时遇到链接器错误——结果你还需要指定`MACOSX_DEPLOYMENT_TARGET`环境变量！

无论如何，这就是我在 Mountain Lion (OSX 10.8) 上运行以编译 10.7 时所做的事情：

命令行：

```
MACOSX_DEPLOYMENT_TARGET=10.7

cmake -G "Unix Makefiles" -DCMAKE_OSX_SYSROOT=/Developer/SDKs/MacOSX10.7.sdk/ -DCMAKE_OSX_DEPLOYMENT_TARGET=10.7 ../.. 
```

CMakeLists.txt：

```
set(CMAKE_CXX_FLAGS "--sysroot ${CMAKE_OSX_SYSROOT} ${CMAKE_CXX_FLAGS}") 
```

我希望这可以帮助别人！:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-10T11:34:32.657

在您的 CMakeLists.txt 中添加以下命令

设置（CMAKE_OSX_SYSROOT macosx10.10）

设置（CMAKE_OSX_DEPLOYMENT_TARGET “10.5”）

这应该没问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T07:32:27.117

您可以在配置项目时将变量设置`CMAKE_OSX_SYSROOT`为所选的 SDK。例如：

```
cmake -DCMAKE_OSX_SYSROOT=/Developer/SDKs/MacOSX10.4u.sdk/ .. 
```

[请参阅此处](http://www.vtk.org/Wiki/Cocoa_VTK)的文档。

另请注意，2.8.8 之前的 CMake 版本[不支持](http://public.kitware.com/Bug/view.php?id=12621)Xcode 4.3。

# c++ - 此模板中的类型是什么？

> ID：10165337
> 
> 赞同：6
> 
> 时间：2012-04-15T19:34:24.590
> 
> 标签：c++, templates

```
std::tr1::_Bind<void (*()(std::tr1::reference_wrapper<int>))(int&)> 
```

我理解`std::tr1::reference_wrapper<int>`，这整件事是某种返回`void`并`int&`作为参数的函数指针。但我似乎无法在一开始就遵循***()**。该代码是从我不久前经历的某个 gdb 会话中剪切粘贴的。

另外，tr1::function 的类型是什么？一些返回 void 且不带参数的函数？

```
0x00000001000021a1 in std::tr1::function<void ()()>::operator() (this=0x7fff5fbffb98) at functional_iterate.h:865 
```

但随后出现以下错误：

```
template <typename T>
void f()
{ 
  cout << "general\n";
}

template<>
void f<void ()()> () // this is error
{
  cout << "specific\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T19:46:06.280

这是一个`std::tr1::_Bind`在函数类型上实例化的实例，该函数采用 a`std::tr1::reference_wrapper<int>`并返回指向函数的指针，该函数采用对 int 的引用并返回 void。

以下是如何阅读它：

*   `std::tr1::_Bind<`*类型*`>`应该清楚。
*   *type* = `void (`*fn*`)(int&)`是一个接受`int&`和返回的函数`void`。
*   *fn* = `*`*ptr*所以它实际上是一个指向函数的指针
*   *ptr* = `(`*fn2*`)(std::tr1::reference_wrapper<int>)`是一个函数`std::tr1::reference_wrapper<int>`，到目前为止我们所拥有的是它的返回类型。
*   *fn2* = (empty) 因为我们没有给该函数（类型）命名。

但是，正如我现在注意到的那样，当*fn2*为空时，它周围的括号可能也不应该存在（类似于您将函数类型“函数不带参数并返回 void”编写为`void()`, not `void()()`.

中的情况`std::tr1::function`正是这样：一个不带参数并返回的函数`void`，在空的“函数名”周围有额外的括号。

好的，现在测试一下：gdb 确实输出`void()`为`void()()`; 这可能应该被认为是一个 gdb 错误。

因此，在 C++ 中编写第一种类型的正确方法是：

```
std::tr1::_Bind<void (*(std::tr1::reference_wrapper<int>))(int&)> 
```

# android - 在远程服务器上读取文本文件时出现 Android 错误

> ID：10165340
> 
> 赞同：0
> 
> 时间：2012-04-15T19:34:33.270
> 
> 标签：android, file, url, urlconnection

我尝试读取服务器上的文本文件。但我没有返回测试。似乎我有一个异常错误。

如何在eclipse中查看错误，或显示错误？

如果我尝试记录错误，应用程序将关闭。(Log.e("Exception --->",e.getMessage());)

这里的代码在没有工作之后。

```
public static String getText(String urlAdress) {
    String text_file = "";
    BufferedReader in = null;
    try {
        // create a url object
        URL url = new URL(urlAdress);

        // create a urlconnection object
        URLConnection urlConnection = url.openConnection();

        // Read all the text returned by the server
        in = new BufferedReader(new InputStreamReader(
                urlConnection.getInputStream()));
        String str;
        while ((str = in.readLine()) != null) {
            // str is one line of text; readLine() strips the newline
            // character(s)
            text_file = text_file + str;
        }
        in.close();
    } catch (MalformedURLException e) {
        text_file = "error";
        Log.e("MalformedURLException --->", e.getMessage());
    } catch (IOException e) {
        text_file = "error";
        Log.e("IOException --->", e.getMessage());
    } catch (Exception e) {
        text_file = "error";
        // Log.e("Exception --->",e.getMessage());
        e.printStackTrace();
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                Log.e("finally IOException --->",
                        "Exception trying to close BufferedReader");
            }
        }

    }

    return text_file;
} 
```

任何的想法 ？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:23:20.233

所以，看看[这个](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。这意味着您需要将所有代码从主线程移动到另一个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:46:37.567

尝试设置字符集

```
 connection.setRequestProperty("Accept-Charset", charset); 
```

并摆脱**BufferedReader**。Http 不保证发送换行符。

也许使用 Apache Streams

[http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/util/Streams.html](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/util/Streams.html)

```
text_file = Streams.asString (urlConnection.getInputStream()); 
```

# python - Buildout 和 zc.recipe.egg - 直接指定鸡蛋下载 URL？

> ID：10165342
> 
> 赞同：0
> 
> 时间：2012-04-15T19:34:47.840
> 
> 标签：python, buildout

zc.recipe.egg 允许您安装任何 egg 及其带有 buildout 的脚本。

但是，zc.recipe.egg 依赖于`find-links`和`index`行为，我猜是从 setuptools 继承的。它想拿一个egg server / HTML进行扫描。

如果我只想将 zc.recipe.egg 指向一个鸡蛋直接下载 URL，我该怎么做？看起来把它放到 find-links 是不行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:44:41.693

将直接 egg 链接放入`find-links`工作正常，但您必须记住还要固定 egg 的版本。

发生的情况是，您为鸡蛋提供的链接被视为*一种*选择。如果 buildout 在其他地方找到了更新版本的 egg，它仍然会忽略直接链接的版本。

示例，无版本引脚：

```
[buildout]
parts = i18ndude
find-links = http://pypi.python.org/packages/source/i/i18ndude/i18ndude-3.1.3.zip

[i18ndude]
recipe = zc.recipe.egg
eggs = i18ndude 
```

```
$ bin/buildout -N
Installing i18ndude.
Getting distribution for 'i18ndude'.
Got i18ndude 3.2.2.
Generated script '/private/tmp/test/bin/i18ndude'.
$ grep i18ndude- bin/i18ndude
    '/Users/mj/Development/.buildout/eggs/i18ndude-3.2.2-py2.6.egg', 
```

使用版本引脚：

```
[buildout]
parts = i18ndude
find-links = http://pypi.python.org/packages/source/i/i18ndude/i18ndude-3.1.3.zip
versions = versions

[versions]
i18ndude = 3.1.3

[i18ndude]
recipe = zc.recipe.egg
eggs = i18ndude 
```

```
$ bin/buildout -N
Updating i18ndude.
Getting distribution for 'i18ndude'.
Got i18ndude 3.1.3.
Generated script '/private/tmp/test/bin/i18ndude'.
$ grep i18ndude- bin/i18ndude
    '/Users/mj/Development/.buildout/eggs/i18ndude-3.1.3-py2.6.egg', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:23:20.603

把它放在查找链接中应该可以工作。我过去曾这样做过。您必须确保链接的格式与任何 python 鸡蛋一样正确。

# hibernate - 休眠条件在 SQLite 中不起作用

> ID：10165345
> 
> 赞同：0
> 
> 时间：2012-04-15T19:35:10.773
> 
> 标签：hibernate, sqlite

我的装备：

*   休眠 3.6.9

*   [来自http://code.google.com/p/hibernate-sqlite/](http://code.google.com/p/hibernate-sqlite/)的休眠 SQLite 方言

我的实体类很简单，

```
@Entity
@Table(name = "RegistrationRequests")
public class RegistrationRequest {

    @Id
    @GeneratedValue
    Integer id;
    String uuid;
    ... getters and setters ...
} 
```

uuid 被分配给 UUID.randomUUID().toString()，并正确地保存在数据库中。现在，问题是当我尝试使用 Hibernate Criteria 从数据库中检索存储的请求时。

```
 Criteria criteria = sessionFactory.getCurrentSession().createCriteria(RegistrationRequest.class);
    criteria.add(Restrictions.eq("uuid", '\'' + uuid + '\''));
    List requests = criteria.list(); 
```

总是产生一个空的结果，但是如果我执行生成的 SQL，

```
select
        this_.id as id2_0_,
        this_.created as created2_0_,
        this_.email as email2_0_,
        this_.isVerified as isVerified2_0_,
        this_.name as name2_0_,
        this_.password as password2_0_,
        this_.surname as surname2_0_,
        this_.uuid as uuid2_0_ 
    from
        RegistrationRequests this_ 
    where
        this_.uuid='ced61d13-f5a7-4c7e-a047-dd6f066d8e67' 
```

结果是正确的（即从数据库中选择了一条记录）。

我有点难过，尝试了一切都没有结果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:52:16.047

you dont have to set the where clause value yourself as far as I am aware about hibernate api (I use Nhibernate), thus when you set your where clause value as 'myValue', you are actually searching for string to match 'myValue' where as you want o search for myValue.

Changing to this should hopefully get it working:

```
Criteria criteria = sessionFactory.getCurrentSession().createCriteria(RegistrationRequest.class);
    criteria.add(Restrictions.eq("uuid", uuid));
    List requests = criteria.list(); 
```

# c++ - 你如何区分取消和重新触发的提升截止时间_timer

> ID：10165352
> 
> 赞同：6
> 
> 时间：2012-04-15T19:36:03.640
> 
> 标签：c++, boost, boost-asio

当你调用`expires_from_now()`一个正在运行的定时器时，定时器被取消，并调用一个新的定时器。因此调用关联的处理程序。在处理程序中很容易区分取消的计时器和过期的计时器。然而，我想知道，是否有办法区分过期和重新触发的计时器。在这两种情况下，处理程序都使用 error_code 调用`operation_aborted`。或者我可能遗漏了一些细节。

下面的代码生成以下输出：

```
20120415 21:32:28079507 Main: Timer1 set to 15 s.    
20120415 21:32:28079798 Main: Timer1 set to 12 s.    
20120415 21:32:28079916 Handler1: Timer 1 was cancelled or retriggered.    
20120415 21:32:40079860 Handler1: expired. 
```

这表明处理程序无法为取消的处理程序实现操作，因为重新触发计时器将调用相同的处理程序并因此执行相同的操作。这可能不是预期的行为。

```
#include <boost/asio.hpp> 
#include <boost/thread.hpp> 
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/date_time/posix_time/posix_time_io.hpp>
#include <iostream> 

using namespace boost::posix_time;
using namespace std;

void handler1(const boost::system::error_code &ec) 
{ 
    if (ec == boost::asio::error::operation_aborted)
    {
        cout << microsec_clock::local_time() << " Handler1: Timer was cancelled or retriggered." << endl; 
    }
    else
    {
        cout << microsec_clock::local_time() << " Handler1: Timer expired." << endl; 
    }
} 

boost::asio::io_service io_service1; 

void run1() 
{ 
    io_service1.run(); 
} 

int main() 
{ 
    time_facet *facet = new time_facet("%Y%m%d %H:%M:%S%f");
    cout.imbue(locale(cout.getloc(), facet));

    boost::asio::deadline_timer timer1(io_service1, seconds(15)); 
    timer1.async_wait(handler1); 
    cout << microsec_clock::local_time() << " Main: Timer1 set to 15 s." << endl; 
    // now actually run the timer
    boost::thread thread1(run1); 
    timer1.expires_from_now(seconds(12));
    cout << microsec_clock::local_time() << " Main: Timer1 set to 12 s." << endl; 
    // here the timer is running, but we need to reset the deadline
    timer1.async_wait(handler1); 
    thread1.join();   // wait for thread1 to terminate 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T02:27:51.330

我建议创建一个类来包装`deadline_timer`使用组合。取消它时，设置一个标志以记住它已被取消。在处理程序中，重置标志。调用`expires_from_now()`时不要设置标志。

```
#include <boost/asio.hpp> 
#include <boost/thread.hpp> 
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/date_time/posix_time/posix_time_io.hpp>
#include <iostream> 

class Timer
{
public:
    Timer(
            const std::string& name,
            boost::asio::io_service& io_service
         ) :
        _name( name ),
        _timer( io_service ),
        _cancelled( false )
    {
        _timer.expires_from_now( boost::posix_time::seconds(0) );
        this->wait();
    }

    void wait()
    {
        _timer.async_wait(
                boost::bind(
                    &Timer::handler,
                    this,
                    boost::asio::placeholders::error
                    )
                );
    }

    void cancel() { 
        _cancelled = true;
        _timer.cancel(); 
    }

    void restart() {
        _timer.expires_from_now( boost::posix_time::seconds(5) );
    }

private:
    void handler(
            const boost::system::error_code& error
            )
    {
        if ( !error ) {
            std::cout << _name << " " << __FUNCTION__ << std::endl;
            _timer.expires_from_now( boost::posix_time::seconds(5) );
            this->wait();
        } else if ( error == boost::asio::error::operation_aborted && _cancelled ) {
            _cancelled = false;
            std::cout << _name << " " << __FUNCTION__ << " cancelled" << std::endl;
        } else if ( error == boost::asio::error::operation_aborted ) {
            std::cout  << _name << " " << __FUNCTION__ << " retriggered" << std::endl;
            this->wait();
        } else {
            std::cout << "other error: " << boost::system::system_error(error).what() << std::endl;
        }
    }

private:
    const std::string _name;
    boost::asio::deadline_timer _timer;
    bool _cancelled;
};

int
main()
{
    boost::asio::io_service ios;
    Timer timer1( "timer1", ios );
    Timer timer2( "timer2", ios );

    boost::thread thread(
            boost::bind(
                &boost::asio::io_service::run,
                boost::ref(ios)
                )
            );

    sleep( 3 );
    std::cout << "cancelling" << std::endl;
    timer1.cancel();
    timer2.restart();

    thread.join();
} 
```

示例会话

```
macmini:stackoverflow samm$ ./a.out
timer1 handler
timer2 handler
cancelling
timer1 handler cancelled
timer2 handler retriggered
timer2 handler
^C
macmini:stackoverflow samm$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:58:25.640

我不知道任何方法，并且可能没有好的方法来做到这一点（文档中没有任何内容说您可以区分这两种情况）。

我相信这是有目的的。设置`deadline_timer`为新的到期时间，取消任何以前的处理程序，因为：

*   有时很难判断计时器是否已经在等待，因此当您设置到期时间时，很难判断究竟会发生什么；
*   这是防止调度事件运行两次的简单方法，需要以特殊方式处理另一个错误代码更容易出错。

# algorithm - Viola Jones / AdaBoost 的学习阶段

> ID：10165354
> 
> 赞同：1
> 
> 时间：2012-04-15T19:36:11.043
> 
> 标签：algorithm, image-processing, machine-learning, face-detection, adaboost

我在理解[Viola Jones 算法](http://www.vision.caltech.edu/html-files/EE148-2005-Spring/pprs/viola04ijcv.pdf)的训练阶段时遇到问题。

据我所知，我用伪代码给出算法：

```
# learning phase of Viola Jones
foreach feature # these are the pattern, see figure 1, page 139
    # these features are moved over the entire 24x24 sample pictures
    foreach (x,y) so that the feature still matches the 24x24 sample picture
        # the features are scaled over the window from [(x,y) - (24,24)]
        foreach scaling of the feature
            # calc the best threshold for a single, scaled feature
            # for this, the feature is put over each sample image (all 24x24 in the paper)
            foreach positive_image
                thresh_pos[this positive image] := HaarFeatureCalc(position of the window, scaling, feature)
            foreach negative_image
                thresh_neg[this negative image] := HaarFeatureCalc(position of the window, scaling, feature)
            #### what's next?
            #### how do I use the thresholds (pos / neg)? 
```

这是，顺便说一句，这个 SO 问题中的框架：[Viola-Jones 的面部检测声称有 18 万个特征](https://stackoverflow.com/questions/1707620/viola-jones-face-detection-claims-180k-features)

这个算法调用了 HaarFeatureCalc 函数，我想我理解了：

```
function: HaarFeatureCalc
    threshold := (sum of the pixel in the sample picture that are white in the feature pattern) -
        (sum of the pixel in the sample picture that are grey in the feature pattern)
    # this is calculated with the integral image, described in 2.1 of the paper
    return the threshold 
```

到现在为止有什么错误吗？

Viola Jones 的学习阶段，基本上检测哪些特征/检测器是最具决定性的。我不明白论文中描述的 AdaBoost 是如何工作的。

**问题：论文中的 AdaBoost 在伪代码中看起来如何？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-25T06:13:27.267

维奥拉琼斯：

*   首先，您将硬编码 180k 分类器（特征）
*   最初所有的训练数据都将具有相同的权重
*   现在每个分类器（特征）都将应用于您拥有的每个训练数据
*   每个特征都会将您的训练数据分类为人脸或非人脸
*   根据每个特征的分类，您将计算错误
*   在计算每个特征的误差后，您选择误差最远离 50% 的特征，我的意思是，如果您有一个误差为 90% 的特征和另一个误差为 20% 的特征，那么您将选择 90 的特征% 错误并将其添加到强分类器中
*   您将更新每个训练数据的权重
*   现在您将重复该过程，直到您使用已构建的强分类器为您的验证数据获得良好的准确性
*   AdaBoost 是一种从弱分类器中生成强分类器的技术

# php - 如果其他路由在 ajax 数据上不起作用

> ID：10165359
> 
> 赞同：1
> 
> 时间：2012-04-15T19:36:25.697
> 
> 标签：php, javascript, jquery, ajax

在下面的 javascript 中。like_add 函数采用 else 路线。而不是采用 if 路线。即使它返回成功。所以我的问题是为什么？数据返回成功，但它不会移动到 like_get 函数，而是警报（数据）成功。

```
function like_add(id){
    $.post('ajax/like_add.php',{id:id},function(data){
        if(data == "success"){
            like_get(id);
        }else{
            alert(data);
        }
     });
 }

 function like_get(id){
     $.post('ajax/like_get.php',{id:id},function(data){
         $('#post_'+ id +'_likes').text(data);
     });
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:55:22.713

尝试先修剪数据，它可能是您可以在警报中看到的一些空格或隐藏字符

```
data = $.trim(data); 
```

还提醒数据长度，因此您可以确定

```
else{
    alert(data);
    alert(data.length);
    } 
```

# jquery - jquery ui星级评分没有样式单选框

> ID：10165360
> 
> 赞同：-1
> 
> 时间：2012-04-15T19:36:32.913
> 
> 标签：jquery, jquery-ui, jquery-plugins

我想在我的网站上添加星级。

这是我的 cshtml 标记

```
@{
    ViewBag.Title = "דירוג";
    Layout = "~/Views/Shared/_SubPage.cshtml";
    ViewBag.Page = "Rating";
    ViewBag.TabHeader = "דירוג";
}

              @*=====css=====*@
            <link href="@Url.Content("~/Resources/jquery.ui.stars-3.0/jquery.ui.stars.min.css")" rel="stylesheet" type="text/css" />
            <link href="@Url.Content("~/Styles/Rating.css")" rel="stylesheet" type="text/css" />

<form>
    Rating: <span id="stars-cap"></span>
    <div id="stars-wrapper1" class="span4 oofset3">
        <input type="radio" name="newrate" value="1" title="Very poor" />
        <input type="radio" name="newrate" value="2" title="Poor" />
        <input type="radio" name="newrate" value="3" title="Not that bad" />
        <input type="radio" name="newrate" value="4" title="Fair" />
        <input type="radio" name="newrate" value="5" title="Average" checked="checked" />
        <input type="radio" name="newrate" value="6" title="Almost good" />
        <input type="radio" name="newrate" value="7" title="Good" />
        <input type="radio" name="newrate" value="8" title="Very good" />
        <input type="radio" name="newrate" value="9" title="Excellent" />
        <input type="radio" name="newrate" value="10" title="Perfect" />
    </div>

</form>

    <script src="@Url.Content("~/Resources/jquery.ui.stars-3.0/jquery.ui.stars.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Rating.js")" type="text/javascript"></script> 
```

我在浏览器开发控制台中收到以下错误：

> ```
> jquery.ui.stars.js:20
> 
> Uncaught TypeError: Object function (a,b){return new d.fn.init(a,b,g)} has no method 'widget'
> 
> jquery-1.5.1.min.js:19
> 
> Uncaught TypeError: Object [object Object] has no method 'on' 
> ```

更改为 jquery 1.7.2 后，我得到以下信息：

> ```
> jquery.ui.stars.js:20
> 
> Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'widget'
> 
> Rating.js:23
> 
> Uncaught TypeError: Object [object Object] has no method 'stars' 
> ```

在 UI 中，我看到单选框而不是开始。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:45:16.680

您的星级插件似乎正在使用[on()](http://api.jquery.com/on/)方法来注册事件处理程序。该方法是在 jQuery 1.7 中引入的，而您使用的是不支持它的 1.5.1 版本。

将 jQuery 库升级到[最新版本](http://docs.jquery.com/Downloading_jQuery#Current_Release)（当前为 1.7.2）可能会解决您的问题。

# google-app-engine - Go AppEngine 重复部分执行 http.handler

> ID：10165376
> 
> 赞同：0
> 
> 时间：2012-04-15T19:37:52.280
> 
> 标签：google-app-engine, go

```
func init() {
    http.HandleFunc("/", handler)
} 
```

在处理函数中，有代码迭代数据列表、处理数据并聚合结果。

假设对于给定的查询，有 100 个项目需要处理。对于我将日志写入 Appengine 控制台的每个项目，“项目 n 已被处理”。

这是问题所在：

请求不返回。前 40 个左右项目的日志消息，然后它会重复，然后重复。它总是停止是相同的项目，然后重新启动。

我最好的猜测是应用程序正在达到内存限制或其他东西，而 Appengine Go 运行时只是重新启动，并重新执行处理程序。

对于一小部分项目，处理按预期进行，并且日志不显示任何循环。

请求日志中没有错误，但另一个日志显示：

```
panic: poll_ctl

goroutine 3 [running]:
runtime/eventloop.(*pollServer).ctlfd(0x9035f8, 0x204100000005, 0x3, 0x2041, 0x0, ...)
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:428 +0xdf
runtime/eventloop.(*pollServer).loop(0x9035f8, 0x0)
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:411 +0x4d8
created by runtime/eventloop.init·1
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:232 +0x40

goroutine 1 [select (no cases)]:
appengine_internal/fd_transport.serveHTTP(0x7fff76502f58, 0x70615f2f00000002, 0x7fff76502f5b, 0x3, 0x7fff76502f6c, ...)
    go/src/pkg/appengine_internal/fd_transport/fd_transport.go:44 +0x26b
appengine_internal.Main()
    go/src/pkg/appengine_internal/internal.go:184 +0x1a8
main.main()
    _go_main.go:16 +0x18

goroutine 2 [select]:
created by _
    _.go:568 +0xd2

goroutine 10 [chan receive]:
runtime/eventloop.(*pollServer).wait(0x9035f8, 0xf840095a60, 0xf84011ac30, 0xb, 0x1, ...)
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:472 +0x1a7
runtime/eventloop.(*FD).ReadFrom(0xf840095a50, 0xf840138000, 0x7d0000007d0, 0xf800000000, 0x0, ...)
    go/src/pkg/runtime/eventloop/fd.go:135 +0x1c2
created by _
    _.go:144 +0x7a

goroutine 5 [chan receive]:
created by _
    _.go:461 +0x3ca

goroutine 6 [semacquire]:
sync.runtime_Semacquire(0xf8408034d8, 0xf8408034d8)
    go/src/pkg/runtime/zsema_amd64.c:146 +0x25
sync.(*Cond).Wait(0xf840096bb0, 0x1)
    go/src/pkg/sync/cond.go:67 +0xaa
created by _
    _.go:462 +0x3e1

goroutine 7 [chan receive]:
runtime/eventloop.(*pollServer).wait(0x9035f8, 0xf840095c70, 0xf84011ac30, 0xb, 0x1, ...)
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:472 +0x1a7
runtime/eventloop.(*FD).Read(0xf840095c60, 0xf84113a000, 0x972a80000000c, 0x2b5800000000, 0xf84011ac30, ...)
    go/src/pkg/runtime/eventloop/fd.go:93 +0x18c
io.ReadAtLeast(0xf84012c0c0, 0xf840095c60, 0xf84113a000, 0x972a80000000c, 0x2b580000000c, ...)
    go/src/pkg/io/io.go:254 +0xc3
io.ReadFull(0xf84012c0c0, 0xf840095c60, 0xf84113a000, 0x972a80000000c, 0xf840095c60, ...)
    go/src/pkg/io/io.go:273 +0x69
created by _
    _.go:845 +0x2c6

goroutine 11 [runnable]:
runtime/eventloop.(*pollServer).wait(0x9035f8, 0xf840095b10, 0xf84011ac30, 0xb, 0x1, ...)
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:472 +0x1a7
runtime/eventloop.(*FD).Accept(0xf840095b00, 0x0, 0x0, 0xf84011ac30, 0xb, ...)
    go/src/pkg/runtime/eventloop/fd.go:72 +0x185
net/http.(*Server).Serve(0xf840129f00, 0xf8400cfa80, 0xf840095b00, 0x0, 0x0, ...)
    go/src/pkg/net/http/server.go:1012 +0x88
net/http.Serve(0xf8400cfa80, 0xf840095b00, 0xf84012c090, 0xf8400e0b10, 0xf8400e0b10, ...)
    go/src/pkg/net/http/server.go:977 +0x71
created by _
    _.go:145 +0xe9

goroutine 12 [timer goroutine (idle)]:
created by addtimer
    go/src/pkg/runtime/ztime_amd64.c:70

goroutine 13 [runnable]:
runtime/eventloop.(*pollServer).wait(0x9035f8, 0xf8400959b0, 0xf84011ac30, 0xb, 0x1, ...)
    go/src/pkg/runtime/eventloop/poll_linux_amd64.go:472 +0x1a7
runtime/eventloop.(*FD).Read(0xf8400959a0, 0xf840139000, 0x100000001000, 0x0, 0xf84011ac30, ...)
    go/src/pkg/runtime/eventloop/fd.go:93 +0x18c
io.(*LimitedReader).Read(0xf840123580, 0xf840139000, 0x100000001000, 0xf8900000000, 0x0, ...)
    go/src/pkg/io/io.go:394 +0xc1
bufio.(*Reader).fill(0xf840129f80, 0x2b5853e92000)
    go/src/pkg/bufio/bufio.go:77 +0xf0
bufio.(*Reader).Read(0xf840129f80, 0xf84013d000, 0x27100000000c, 0xc, 0x0, ...)
    go/src/pkg/bufio/bufio.go:142 +0x188
io.ReadAtLeast(0xf84012c600, 0xf84012c570, 0xf84013d000, 0x27100000000c, 0xc, ...)
    go/src/pkg/io/io.go:254 +0xc3
io.ReadFull(0xf84012c600, 0xf84012c570, 0xf84013d000, 0x27100000000c, 0xf84012c570, ...)
    go/src/pkg/io/io.go:273 +0x69
net/http.(*conn).serve(0xf8401320c0, 0x0)
    go/src/pkg/net/http/server.go:656 +0x621
created by net/http.(*Server).Serve
    go/src/pkg/net/http/server.go:1040 +0x430

goroutine 59 [sleep]:
time.Sleep(0x5dfdee1, 0xf8408034d0)
    go/src/pkg/runtime/ztime_amd64.c:22 +0x49
created by _
    _.go:791 +0xc4

goroutine 15 [chan receive]: 
```

也许我没有记录所有错误，但即使，什么可能导致循环？

***更新*** 近乎无休止的循环很快耗尽了我的数据存储写入配额，现在我收到了一个正在记录的无报价错误。在错误日志之后，再次调用处理程序。然后再次....

```
func handleError(w http.ResponseWriter, c appengine.Context, err error) {
    c.Infof("ERROR")
    c.Errorf("ERROR datastore: %s", err.Error())
}

...
rk, err := datastore.Put(c, rk, e)
if err != nil {
    handleError(w, c, err)
    return
} 
```

***更新 2*** 切换到 f4 实例后，代码按预期运行。我仍然认为 Appengine Go 运行时由于某种原因（内存）静默失败，并重新启动处理程序执行。这是我最好的猜测，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:25:29.740

http 请求有 30 秒的超时时间。在您迁移到更快的实例之前，这些流程是否需要很长时间？您可以使用后端进程进行长期处理。 [https://developers.google.com/appengine/docs/go/backends/overview](https://developers.google.com/appengine/docs/go/backends/overview)

# android - 如何隐藏应用名称？

> ID：10165380
> 
> 赞同：-7
> 
> 时间：2012-04-15T19:38:41.873
> 
> 标签：android

我想在我的应用程序中隐藏 app_name。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:40:55.167

添加这个 onCreate 方法

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:41:34.130

在要隐藏它的活动的清单文件中，添加以下内容：

android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"

# html - CSS 下拉菜单栏和标题仅在 Safari 上闪烁

> ID：10165385
> 
> 赞同：0
> 
> 时间：2012-04-15T19:39:46.887
> 
> 标签：html, css, safari

我被这个难住了：

[http://www.jessewilliamson.ca/showlisting/99039/1317-Civic-Place-Mews-Central-Lonsdale-North-Vancouver-north-shore-realtor](http://www.jessewilliamson.ca/showlisting/99039/1317-Civic-Place-Mews-Central-Lonsdale-North-Vancouver-north-shore-realtor)

在该站点上，仅当您查看属性详细信息页面时，当您将鼠标悬停在顶部导航的“精选列表”选项卡上时，顶部会闪烁，并且仅在 Safari 上。在 Chrome 和 FF 上运行良好（我在 Mac 上）。我什至还没有在IE上测试过。

有什么线索吗？什么可能会这样做？

另请注意，“资源”下还有另一个下拉菜单，但将鼠标悬停在该下拉菜单上不会触发相同的错误。我完全被难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:10:31.570

似乎在悬停时使用`left:-9999px`和`left:-5px`显示子菜单会导致问题。

也许尝试玩`visibility`？

例如 ：

```
#menu .submenu {
    position:absolute;   
    display: block;
    background-color:#1175A6;
    padding:0px 0px 0px 0px;
    margin: 0px;
    top:15px;
    z-index: 20;
    visibility: hidden;
    opacity: 0;
}
#menu li:hover .submenu {
    left: -5px;
    visibility: visible;
    opacity: 1;
} 
```

在 Safari 中测试并解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:00:25.890

我也在Mac上，对我来说，它也在每个具有出现在：悬停的子菜单的项目上闪烁......你能发布一些代码你是如何做下拉菜单的吗？

# c# - 如何获得linq中最高价和最低价商品的总和

> ID：10165396
> 
> 赞同：3
> 
> 时间：2012-04-15T19:41:52.177
> 
> 标签：c#, linq

我正在尝试编写的实际查询比标题所暗示的要复杂一些。我有一个像这样的订单列表：`List<Order>`，订单看起来像这样：

```
public class Order
{
    private StockCodes _stockCode;
    private bool _bidSide;
    private int _volume;
    private decimal _price;
} 
```

我需要在给定特定股票代码的情况下发布最佳买入价和成交量以及最佳卖出价和成交量。最佳买入价被定义为当bidSide 为真时的最高价。最佳卖出价定义为当bidSide 为假时的最低价。

例如，给定股票代码“ABC”的以下数据：

```
 { bidSide: true, volume: 25, price: 25  }
 { bidSide: true, volume: 25, price: 25  }
 { bidSide: true, volume: 25, price: 5  }

 { bidSide: false, volume: 100, price: 1  }
 { bidSide: false, volume: 50, price: 2}
 { bidSide: false, volume: 75, price: 8 } 
```

最佳出价：价格 25，数量 50（因为有 2 个最高价格的订单） 最佳卖出：价格 1，数量 100（因为只有 1 个最低价格的订单）

最后，我需要考虑何时没有买入或卖出订单。效率是重中之重，所以如果我能够在一个 linq 语句中做到这一点，那将是首选。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T20:01:58.487

为了有效地做到这一点，你真的只想迭代数据一次。不幸的是，这使得用 LINQ 实现真的很痛苦，因为有很多工作要做。

我个人建议您*不要*使用 LINQ 执行此操作 - 您*可以*使用`Aggregate`. 不过，使用简单的`foreach`循环并不算太糟糕。就像是：

```
int buyVolume = -1;
int sellVolume = -1;
decimal buyPrice = decimal.MinValue;
decimal sellPrice = decimal.MaxValue;

foreach (var order in orders)
{
    if (order.bidSide)
    {
        if (order.Price > buyPrice)
        {
            buyPrice = order.Price;
            buyVolume = order.Volume;
        }
        else if (order.Price == buyPrice)
        {
            buyVolume += order.Volume;
        }
    }
    else
    {
        if (order.Price < sellPrice)
        {
            sellPrice = order.Price;
            sellVolume = order.Volume;
        }
        else if (order.Price == sellPrice)
        {
            sellVolume += order.Volume;
        }
    }
}

// Check sellVolume == -1 to verify whether we've seen any sale orders
// Check buyVolume == -1 to verify whether we've seen any buy orders
// Use buyPrice/buyVolume and sellPrice/sellVolume otherwise 
```

在 LINQ 中尽可能高效地执行此操作实际上意味着将循环中的*所有*逻辑放入要传递的函数中`Aggregate`- 您可能希望创建一个自定义值类型来保存四个值，以避免创建比您更多的对象需要。这*可能*是矫枉过正，但你确实说过你希望它尽可能高效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:54:35.450

```
HIGHEST = orders.Max(x => x.bidSide ? x.price : (decimal?)null) ?? 0M 
```

LOWEST 类似。

不幸的是，Linq2SQL 不会将其转换为有效的查询。它将在一个查询中执行，但每个 Max 操作将扫描一次数据（在您的情况下为两次：HIGHEST 和 LOWEST）。在原始 SQL 中，您可以一次通过数据执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:08:20.980

这可以明智地执行 LINQ ......

```
var bids = (from o in orders
                where o.StockCode == "ABC" && o.BidSide == true
                group o by o.Price)
                .OrderByDescending(g => g.Key)
                .FirstOrDefault();
var bidVolume = bids != null ? new Order { Price = bids.Key, Volume = bids.Sum(g => g.Volume) } : null;

var sells = (from o in orders
                where o.StockCode == "ABC" && o.BidSide == false
                group o by o.Price)
                .OrderBy(g => g.Key)
                .FirstOrDefault();
var sellVolume = sells != null ? new Order { Price = sells.Key, Volume = sells.Sum(g => g.Volume) } : null; 
```

# php - 控制器接收错误

> ID：10165397
> 
> 赞同：0
> 
> 时间：2012-04-15T19:42:02.630
> 
> 标签：php, codeigniter

我已经正确加载了控制器本身，但是我认为我的控制器没有根据wiredesignz moduler extensions codeigniter框架插件的文档正确编写。我说我可能没有正确编写它的原因是因为我收到了很多错误。

错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: CI::$data

Filename: MX/Controller.php

Line Number: 58
A PHP Error was encountered

Severity: Notice

Message: Indirect modification of overloaded property Quotes::$data has no effect

Filename: controllers/quotes.php

Line Number: 71 
```

[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

这是我的控制器：

```
<?php

if (!defined('BASEPATH')) exit('No direct script access allowed');

class Quotes extends MX_Controller
{

public function __construct()
{
    parent::__construct();
    $this->load->library('kowauth');

}

public function index()
{
    //Config Defaults Start
    $msgBoxMsgs = array(); //msgType = dl, info, warn, note, msg
    $cssPageAddons = ''; //If you have extra CSS for this view append it here
    $jsPageAddons = ''; //If you have extra JS for this view append it here
    $metaAddons = ''; //Sometimes there is a need for additional Meta Data such in the case of Facebook addon's
    $siteTitle = ''; //alter only if you need something other than the default for this view.
    //Config Defaults Start

    //examples of how to use the message box system (css not included).
    //$msgBoxMsgs[] = array('msgType' => 'dl', 'theMsg' => 'This is a Blank Message Box...');

    /**********************************************************Your Coding Logic Here, Start*/

    // Checks to see if a session is active for user and shows corresponding view page
    if ($this->kowauth->isLoggedIn())
    {
        $bodyContent = "testing"; //which view file
    }
    else
    {
        redirect('login', 'refresh');
    }
    $bodyType = "full"; //type of template

    /***********************************************************Your Coding Logic Here, End*/

    //Double checks if any default variables have been changed, Start.
    //If msgBoxMsgs array has anything in it, if so displays it in view, else does nothing.
    if (count($msgBoxMsgs) !== 0)
    {
        $msgBoxes = $this->msgboxes->buildMsgBoxesOutput(array('display' => 'show',
            'msgs' => $msgBoxMsgs));
    }
    else
    {
        $msgBoxes = array('display' => 'none');
    }

    if ($siteTitle == '')
    {
        $siteTitle = $this->metatags->SiteTitle(); //reads
    }

    //Double checks if any default variables have been changed, End.

    $this->data['msgBoxes'] = $msgBoxes;
    $this->data['cssPageAddons'] = $cssPageAddons; //if there is any additional CSS to add from above Variable this will send it to the view.
    $this->data['jsPageAddons'] = $jsPageAddons; //if there is any addictional JS to add from the above variable this will send it to the view.
    $this->data['metaAddons'] = $metaAddons; //if there is any addictional meta data to add from the above variable this will send it to the view.
    $this->data['pageMetaTags'] = $this->metatags->MetaTags(); //defaults can be changed via models/metatags.php
    $this->data['siteTitle'] = $siteTitle; //defaults can be changed via models/metatags.php
    $this->data['bodyType'] = $bodyType;
    $this->data['bodyContent'] = $bodyContent;
    $this->data['userData'] = $this->users->getUserByUserID($this->session->userdata('userID'));
    $roster = $this->kowauth->getRosterList($this->data['userData']->usersRolesID);
    $userRoster = array();
    foreach ($roster AS $member)
    {
        $userRoster[$member->id] = $member->rosterName;
    }
    $this->data['userRoster'] = $userRoster;
    $this->data['personalMessages'] = array($this->pmmodel->
        getInboxUnreadMessagesCount($this->session->userdata('userID')), $this->pmmodel->
        getInboxMessagesCount($this->session->userdata('userID')), $this->pmmodel->
        getLast5Messages($this->session->userdata('userID')));
    $this->load->view('cpanel/index', $this->data);
}
}

/* End of file quotes.php */
/* Location: ./application/modules/bios/controllers/quotes.php */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:46:39.343

我不熟悉模块化扩展，但看起来好像错误是您试图在没有创建 $this->data 的情况下将值分配给 $this->data

尝试添加这个，看看会发生什么

```
class Quotes extends MX_Controller
{
    public $data; 
```

# silverlight - 使用 Greasemonkey 或类似方法为单个页面禁用 Silverlight？

> ID：10165400
> 
> 赞同：0
> 
> 时间：2012-04-15T19:42:43.620
> 
> 标签：silverlight, firefox, greasemonkey

Hotmail 不适用于 Firefox 和 Silverlight 启用（在我的情况下）。禁用 Silverlight 允许 Hotmail 工作，但当然会阻止 Silverlight 应用程序运行。

有没有什么方法可以在没有太多工作的情况下为单个 URL 禁用 Silverlight？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:42:35.893

Greasemonkey 不能这样做，因为它没有为您提供必要的浏览器 Chrome 权限，并且 Microsoft 没有为此提供 javascript 可访问的钩子（我可以根据快速搜索确定）。

如果您使用[QuickJava *Firefox*插件](https://addons.mozilla.org/en-US/firefox/addon/quickjava/)，它会为您提供一个方便的按钮来快速启用/禁用 Silverlight。

但是，如果您想逐页自动控制它，则必须[编写自己的扩展名](http://crossrider.com/)。

# autoconf - 未知数量的带有 automake 的构建源

> ID：10165403
> 
> 赞同：1
> 
> 时间：2012-04-15T19:43:08.933
> 
> 标签：autoconf, automake, generated-code

我有一个脚本，可以生成以前未知编号和名称的 c++ 源文件，然后需要将其编译到一个库中。到目前为止，我在 Makefile 中使用一个简单的（shell）for 循环来执行此操作：

```
compile:
        for f in `ls -1 *.cpp` ; do g++ -c ...
        ... 
```

目录中不会有其他 c++ 源代码，所以我只编译那里的所有内容。

现在我想将我的构建系统更改为 autoconf/automake，我想知道这样做的“正确”方式是什么。我发现的教程仅涵盖您知道将生成的源的数量和名称的情况。

例如，有没有一种方法可以访问编译器名称和 autoconf/automake 为我整理的所有标志，以便我可以将它们插入到我自己的编译命令中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:08:36.367

我会更改脚本以显式生成`Makefile.am`所有这些文件的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:07:26.163

所以你有类似的东西：

```
FOO_SCRIPT=script.sh
libfoo_la_SOURCES=foo.cpp bar.cpp baz.cpp

foo.cpp : foo.input
        $(FOO_SCRIPT) $<

bar.cpp baz.cpp : bar.input
        $(FOO_SCRIPT) $< 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:37:00.447

```
SRC= $(wildcard *.cpp)
OBJ= $(SRC:.cpp=.o)
[...]
target: $(OBJ) 
```

# php - Wordpress 按分类浏览返回 404

> ID：10165404
> 
> 赞同：1
> 
> 时间：2012-04-15T19:43:09.107
> 
> 标签：php, wordpress, templates, taxonomy, custom-post-type

我已经看遍了，现在已经有大约一周的时间了。如果有人可以提供帮助，将不胜感激。

我正在制作一份在线周报。该论文每周都有一个新问题，它们属于每年增加的一卷。

我有一个自定义分类问题，其中包含父术语 Volume 和问题的多个子术语。

在我的 index.php (http://aaron.ellissnyder.com/ttn/) 上，我列出了所有问题的链接（在页面底部的紫色页脚中）。当我单击这些链接时，我得到一个 404 而不是定向到 Taxonomy.php

我怎样才能得到它，所以当我导航到[http://aaron.ellissnyder.com/ttn/?taxonomy=Issue&term=issue-1](http://aaron.ellissnyder.com/ttn/?taxonomy=Issue&term=issue-1)时，它会将我带到相应的页面？

另外，有没有办法使用永久链接来完成这项工作？

非常感谢你的帮助，亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:37:03.500

看起来您的 URL 区分大小写。
`http://aaron.ellissnyder.com/ttn/?taxonomy=Issue&term=issue-1`返回 404，而`http://aaron.ellissnyder.com/ttn/?Taxonomy=Issue&term=issue-1`没有。

`Past Issues`该紫色页脚中的链接有效（... **Taxonomy** ...）。其他三个没有（... **t** axonomy）。

努力解决你的问题。

# python - 尝试子类化但获取 object.__init__() 不带参数

> ID：10165405
> 
> 赞同：3
> 
> 时间：2012-04-15T19:43:21.690
> 
> 标签：python, inheritance, web.py

我正在尝试从 webpy 框架继承 web.form.Form 以更改行为（它从表格中呈现）。我试过这样做：

```
class SyssecForm(web.form.Form):

            def __init__(self, *inputs, **kw): 
                super(SyssecForm, self).__init__(*inputs, **kw)

            def render(self):
                out='<div id="form"> '
                for i in self.inputs:
                    html = utils.safeunicode(i.pre) + i.render() + self.rendernote(i.note) + utils.safeunicode(i.post)
                    out +=  "%s"%(html)  
                    out +=  '"<div id="%s"> %s %s</div>'% (i.id, net.websafe(i.description), html)
                out+= "</div>"
                return out 
```

现在我收到此错误`object.__init__() takes no parameters`：

![错误回溯](../Images/96b1f0a70dd5e92aa38b8617b37954b1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:49:56.913

只需`__init__`完全删除您的方法，因为无论如何您实际上并没有在那里做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T19:45:30.477

该消息告诉您所有您需要知道的信息。超类是对象，它的构造函数不带参数。所以不要将构造函数的参数传递给它，因为它不知道如何处理它们。

像这样称呼它：

```
super(SyssecForm, self).__init__() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:56:04.720

这对我有用（web.py 0.37）：

```
import web

class SyssecForm(web.form.Form):

    def __init__(self, *inputs, **kw): 
        super(SyssecForm, self).__init__(*inputs, **kw)

    def render(self):
        out='<div id="form"> '
        for i in self.inputs:
            html = web.utils.safeunicode(i.pre) + i.render() + self.rendernote(i.note) + web.utils.safeunicode(i.post)
            out +=  "%s"%(html)  
            out +=  '"<div id="%s"> %s %s</div>'% (i.id, web.net.websafe(i.description), html)
        out+= "</div>"
        return out

form = SyssecForm(web.form.Textbox("test"))
print form.render() 
```

您的问题是因为您可能已经过时 web.py，因为 web.form.Form 从`object`现在继承：[https ://github.com/webpy/webpy/commit/766709cbcae1369126a52aee4bc3bf145b5d77a8](https://github.com/webpy/webpy/commit/766709cbcae1369126a52aee4bc3bf145b5d77a8)

Super 仅适用于新式课程。您必须像这样添加`object`类声明：`class SyssecForm(web.form.Form, object):`或者您必须更新 web.py。

# objective-c - 获取历史上特定原始日期的某个时间间隔的最新日期？

> ID：10165407
> 
> 赞同：0
> 
> 时间：2012-04-15T19:43:34.760
> 
> 标签：objective-c, xcode, nsdate, nsdatecomponents

例如：

原始日期：23/03/2012 间隔：每 2 周

输出：最近发生 -> 06/04/2012

如何在 Objective-C (iOS) 中以最佳方式实现这一目标？

旁注：我目前的工作不太好而且非常糟糕的解决方案：

```
+ (NSDate *) getRelativeStartDateForIntervalType:(NSInteger)intervalType andStartDateTime:(NSDate *)startDateTime {
    NSDateComponents *components = [[NSDateComponents alloc] init];
    BOOL found = false;
    NSDate *relativeStartDate;
    NSDate *previousDate;
    for (int i = 0; !found ; i++) {
        previousDate = relativeStartDate;

        switch (intervalType) {
            case 0:
                [components setDay:i];   // add i days
                break;
            case 1:
                [components setWeek:i];  // add i weeks
                break;
            case 2:
                [components setMonth:i]; // add i months
                break;
            case 3:
                [components setDay:i]; // add i weeks
                break;
            default:
                NSLog(@"you shouldn't be here");
                break;
        }
        relativeStartDate = [[NSCalendar currentCalendar] dateByAddingComponents:components toDate:startDateTime options:0];
        if ([relativeStartDate compare:[NSDate date]] == NSOrderedDescending) {
            found = true;
            if (i > 0 && [previousDate compare:[NSDate date]] == NSOrderedDescending) {
                relativeStartDate = previousDate;                
            }
        }
    }
    return  relativeStartDate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:00:04.657

对于“每 N 周”或“每 N 天”，只需将开始日期和目标日期之间的天数差除以间隔中的天数，然后从目标日期返回余数。

也就是说，在伪代码中，`relativeStartDate = targetDate - ((targetDate - startDate) % intervalSize)`

对于“每 N 个月”，您只需返回到该月同一天最近发生的事件。除了条件之外，没有干净的方法可以做到这一点。如果目标 mday 大于开始 mday，那么它只是目标日期，将月份中的日期替换为 startdate 的月份中的日期。否则，在目标日期前一个月使用相同的替换。

您还必须决定如何处理给定月份中不存在的日子；从 5 月 31 日到 6 月 30 日或 7 月 1 日有一个月吗？

# c# - 插入行后如何更新或刷新DataGridView

> ID：10165408
> 
> 赞同：1
> 
> 时间：2012-04-15T19:43:58.477
> 
> 标签：c#, .net, winforms

我正在尝试更新窗口窗体应用程序中的 datagridview。这是我的代码。

```
 string[] row = new string[] { Word, txturl.Text, Url, NumOfMatch.ToString() };
    gridview1.Rows.Add(row);
    gridview1.Refresh();
    gridview1.Update(); 
```

但是，当我单击 datagridview 时，会出现值。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:51:47.720

而不是使用

> ```
> string[] row = new string[] { Word, txturl.Text, Url, NumOfMatch.ToString() };
> gridview1.Rows.Add(row);
> gridview1.Refresh();
> gridview1.Update(); 
> ```

尝试使用

```
 string[] row = new string[] { Word, txturl.Text, Url, NumOfMatch.ToString() };
        gridview1.Rows.Add(row);
        gridview1.Focus(); 
```

# c++ - 系统编程 - Fork() 方法

> ID：10165409
> 
> 赞同：2
> 
> 时间：2012-04-15T19:44:10.713
> 
> 标签：c++, c, unix, operating-system, fork

我正在研究系统编程系统调用。我的作业中有一个代码块（如下所示）。这个问题问我要打印多少个 A、B 或 C。我的问题是什么意思`if(pid == 0)`？我猜`if(pid == 0)`意思是假的，所以我分析会打印 2 x A 和 2 x B。我写还是？第二个问题是`pid2 = fork()`再次执行 main 吗？

```
int main()
{
  int pid,pid2;
  int i;
  pid = fork();
  printf("A\n");
  if (pid == 0)
    pid2=fork();
  if (pid2)
    printf("B\n");
  printf("C\n");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T19:46:23.833

系统`fork`调用很特殊。您调用它一次，**它会返回两次**。一次在孩子身上，一次在父母身上。

在父进程中，它返回子进程的 pid，在子进程中返回 0。因此，`if (pid == 0)`表示“*如果这是子进程*”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T19:46:21.380

`fork`返回`0`子进程，子进程的pid返回父进程。手册页应该清除所有其他内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T19:49:11.687

分叉返回 2 个值：

*   子进程中为 0，父进程中为正值。
*   在 fork() 调用之后，您将有 2 个进程（如果没有发生错误，则返回 -1）。

在您的示例中，您创建了 3 个进程并将输出 2A、1B 和 3C

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T20:45:17.270

`pid2`在父流程案例中未初始化。`B`将打印多少是未定义的行为。

`pid=fork()`不会`main()`再次执行，希望...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T19:52:17.410

he return value of the Fork call returns a different value depending in which proccess you currently are.

Let's say you want some code to be executed in the parent process you would pu that part of the code in this condition block :

```
p = fork();
if (p > 0)
{
    // We're the parent process
} 
```

And if you want to execute some code in the child process the same would apply :

```
p = fork();
if (0 == p)
{
    // We're the child process
} 
```

And the rest (executed by both parents process and child) in a else block.

# internet-explorer - 如何将-webkit-gradient应用于IE？

> ID：10165412
> 
> 赞同：3
> 
> 时间：2012-04-15T19:44:24.430
> 
> 标签：internet-explorer, css, webkit, css3pie

我有以下CSS代码：

```
-webkit-gradient(linear, left bottom, left top, from(#5AE), to(#036)); 
```

它在 Chrome 中很好地显示了背景。Internet Explorer 仅显示白色背景。我尝试应用 CSS 3 pie，它没有改变任何东西。

以下是我的CSS：

```
body {
  behavior: url(css3pie/PIE.htc);
    color: #000000;
    font-family: Arial, Helvetica, sans-serif;
    margin: 0px;
    padding: 0px;
    /*background:url("../image/bg.png") repeat scroll 0 0 transparent;*/
    background: -webkit-gradient(linear, left bottom, left top, from(#5AE), to(#036)); 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:46:52.993

`-webkit-gradient()`仅适用于**webkit 浏览器**（Safari、Chrome 等）。这意味着它无法在 Firefox、Internet Explorer、Opera 或任何其他不支持`-webkit-gradient()`.

如果您想在所有现代浏览器中获得渐变，请尝试以下代码：

在[http://projects.korrelboom.com/gradient-generator/](http://projects.korrelboom.com/gradient-generator/)生成：

```
/* SVG fallback(Opera 11.10-, IE9) */
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDAsNTEsMTAyLDEpOyIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYmEoODUsMTcwLDIzOCwxKTsiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgZmlsbD0idXJsKCNncmFkaWVudCkiIGhlaWdodD0iMTAwJSIgd2lkdGg9IjEwMCUiIC8+PC9zdmc+);

/* Opera 11.10+ */
background: -o-linear-gradient(top, rgba(0,51,102,1), rgba(85,170,238,1));

/* Firefox 3.6+ */
background: -moz-linear-gradient(top, rgba(0,51,102,1), rgba(85,170,238,1));

/* Chrome 7+ & Safari 5.03+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0, rgba(0,51,102,1)), color-stop(1, rgba(85,170,238,1)));

/* Newer Browsers */
background: linear-gradient(top, rgba(0,51,102,1), rgba(85,170,238,1));

/* IE5.5 - IE7 */
filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#FF003366,EndColorStr=#FF55AAEE);

/* IE8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#FF003366,EndColorStr=#FF55AAEE)" 
```

***注意：**您不需要任何外部 JavaScript 库即可在 IE 中获取渐变。只需使用上面的**CSS** ;) 但是，为了您自己的理智，我建议您使用 LESS 或 SASS 等预处理器，以便您可以自动生成所有特定于浏览器的版本。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T19:49:49.640

CSS3 PIE[文档](http://css3pie.com/documentation/supported-css3-features/#gradients)有这个线性渐变的例子：

```
#myElement {
    background: #CCC; /*fallback for non-CSS3 browsers*/
    background: -webkit-gradient(linear, 0 0, 0 100%, from(#CCC) to(#EEE)); /*old webkit*/
    background: -webkit-linear-gradient(#CCC, #EEE); /*new webkit*/
    background: -moz-linear-gradient(#CCC, #EEE); /*gecko*/
    background: -ms-linear-gradient(#CCC, #EEE); /*IE10*/
    background: -o-linear-gradient(#CCC, #EEE); /*opera 11.10+*/
    background: linear-gradient(#CCC, #EEE); /*future CSS3 browsers*/
    -pie-background: linear-gradient(#CCC, #EEE); /*PIE*/
    behavior: url(PIE.htc);
} 
```

你错过了`-pie-background`财产。

顺便说一句，您应该使用“new webkit”语法而不是您当前拥有的语法；Webkit 放弃它已经有一段时间了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T16:43:30.847

对于 IE8，你可以添加这个

```
background: #aaa;
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#111111', endColorstr='#aaaaaa',GradientType=1); 
```

对于 IE9，以下将起作用

```
background-image: -ms-linear-gradient(left, #111, #aaa); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T07:23:19.293

使用此工具生成您的 Css 样式
[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)
click`Import from css`

```
background: rgb(85,170,238); /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzU1YWFlZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDMzNjYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  rgba(85,170,238,1) 0%, rgba(0,51,102,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(85,170,238,1)), color-stop(100%,rgba(0,51,102,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(85,170,238,1) 0%,rgba(0,51,102,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(85,170,238,1) 0%,rgba(0,51,102,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(85,170,238,1) 0%,rgba(0,51,102,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(85,170,238,1) 0%,rgba(0,51,102,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55aaee', endColorstr='#003366',GradientType=0 ); /* IE6-8 */ 
```

# c++ - 编译器说每个构造函数和函数都被重新定义并且不会编译。我使用#IFNDEF 错误吗？- C++

> ID：10165415
> 
> 赞同：3
> 
> 时间：2012-04-15T19:45:11.230
> 
> 标签：c++, gcc, redefinition

我正在尝试使用类模板实现我自己的 OrderedList 数据结构。我的 CPP 文件中的每个构造函数和函数在开头的“{”上都有一个错误。错误显示为“重新定义之前在此处声明的 FUNCTION_NAME FUNTION_NAME”。

我已经让几个同事看过它，但无济于事。这是我的文件和错误：

**CPP 文件“MyOrderedList.cpp”**

```
#include "MyOrderedList.h"

template <class E>
MyOrderedList<E>::MyOrderedList() {/*IMPLEMENTATION*/}

template <class E>
MyOrderedList<E>::MyOrderedList(const MyOrderedList<E>& orig) { /*IMPLEMENTATION*/}

template <class E>
void MyOrderedList<E>::operator =(const MyOrderedList<E>& orig){/*IMPLEMENTATION*/}

template <class E>
MyOrderedList<E>::~MyOrderedList() {/*IMPLEMENTATION*/}

template <class E>
void MyOrderedList<E>::insert(E data){/*IMPLEMENTATION*/}

template <class E>
E MyOrderedList<E>::get(int pos) const{/*IMPLEMENTATION*/}

template <class E>
Node<E>* MyOrderedList<E>::getHead() const{/*IMPLEMENTATION*/}

template <class E>
MyOrderedList<E> MyOrderedList<E>::kLargest(int k) const{/*IMPLEMENTATION*/}

template <class E>
MyOrderedList<E> MyOrderedList<E>::operator +(const MyOrderedList<E>& list {/*IMPLEMENTATION*/} 
```

**H 文件“MyOrderedList.h”**

```
#ifndef MYORDEREDLIST_H
#define MYORDEREDLIST_H

#include <iostream>
#include <cstdlib>
#include "Node.h"

template <class E>
class MyOrderedList;
template <class E>
std::ostream& operator <<(std::ostream& out, const MyOrderedList<E>& list);

template <class E>
class MyOrderedList {
public:
    MyOrderedList();
    MyOrderedList(const MyOrderedList<E>& orig);
    void operator =(const MyOrderedList<E>& orig);
    virtual ~MyOrderedList();

    bool remove(E data);
    MyOrderedList<E> kLargest(int k) const;
    E get(int pos) const;
    void insert(E data);
    Node<E>* getHead() const;

    MyOrderedList<E> operator +(const MyOrderedList<E>& list);

    friend std::ostream& operator <<(std::ostream& out, const MyOrderedList<E>& list){/*IMPLEMENTATION*/}

private:
    Node<E>* head;
    int size;
};

#include "MyOrderedList.cpp"
#endif  //MYORDEREDLIST_H 
```

**节点.h**

```
#ifndef NODE_H
#define NODE_H

#include <iostream>

template <class E>
class Node {
public:
    Node(const E& init_data = NULL, Node<E>* init_link = NULL){data = init_data; link = init_link;}
    Node(const Node<E>& orig);
    virtual ~Node();

    E getData() const{return data;}
    void setData(E newData);

    Node<E>* getLink(){return link;}
    void setLink(Node<E>* nextLink) {link = nextLink;}
private:
    E data;
    Node<E>* link;
};

#endif  /* NODE_H */ 
```

**编译器错误**

```
MyOrderedList.cpp:12: error: redefinition of `MyOrderedList<E>::MyOrderedList()'
MyOrderedList.cpp:12: error: `MyOrderedList<E>::MyOrderedList()' previously declared here
MyOrderedList.cpp:19: error: redefinition of `MyOrderedList<E>::MyOrderedList(const MyOrderedList<E>&)'
MyOrderedList.cpp:19: error: `MyOrderedList<E>::MyOrderedList(const MyOrderedList<E>&)' previously declared here
MyOrderedList.cpp:42: error: redefinition of `void MyOrderedList<E>::operator=(const MyOrderedList<E>&)'
MyOrderedList.cpp:42: error: `void MyOrderedList<E>::operator=(const MyOrderedList<E>&)' previously declared here
MyOrderedList.cpp:77: error: redefinition of `MyOrderedList<E>::~MyOrderedList()'
MyOrderedList.cpp:77: error: `virtual MyOrderedList<E>::~MyOrderedList()' previously declared here
MyOrderedList.cpp:91: error: redefinition of `void MyOrderedList<E>::insert(E)'
MyOrderedList.cpp:91: error: `void MyOrderedList<E>::insert(E)' previously declared here
MyOrderedList.cpp:119: error: redefinition of `E MyOrderedList<E>::get(int) const'
MyOrderedList.cpp:119: error: `E MyOrderedList<E>::get(int) const' previously declared here
MyOrderedList.cpp:134: error: redefinition of `Node<E>* MyOrderedList<E>::getHead() const'
MyOrderedList.cpp:134: error: `Node<E>* MyOrderedList<E>::getHead() const' previously declared here
MyOrderedList.cpp:140: error: redefinition of `MyOrderedList<E> MyOrderedList<E>::kLargest(int) const'
MyOrderedList.cpp:140: error: `MyOrderedList<E> MyOrderedList<E>::kLargest(int) const' previously declared here
MyOrderedList.cpp:158: error: redefinition of `MyOrderedList<E> MyOrderedList<E>::operator+(const MyOrderedList<E>&)'
MyOrderedList.cpp:158: error: `MyOrderedList<E> MyOrderedList<E>::operator+(const MyOrderedList<E>&)' previously declared here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:09:10.633

您的问题是您在标头中包含函数的定义（间接通过`#include "MyOrderedList.cpp"`. 因为未声明函数，因为`inline`编译器在包含标头的所有翻译单元中生成符号，因此您得到多重定义的符号。

该问题的一种解决方案是`inline`在定义中声明函数，以便链接器可以丢弃重复项。将定义保存在单独的文件中并不是什么新鲜事，但也不是很常见，一些标准库实现会这样做。但是考虑将 .cpp 重命名为其他名称以避免混淆（大多数人会认为 .cpp 意味着它应该被编译，而不是包含在内）。

另一方面，我建议将其简化一点，完全删除 .cpp 并仅将 .h 与所有内容一起使用（仍将所有函数定义标记为`inline`），甚至更进一步并在类中定义函数定义，默认情况下它们在哪里`inline`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T19:46:32.637

你`.cpp`和`.h`对方`#include`归档。为什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:58:19.243

模板类的声明和定义需要保持在一起。为了做到这一点，`#include`在您的文件上使用并没有错，但是您的文件还需要标头保护（即等）。然而，通常的方法是将所有内容都推到同一个文件中 `.cpp``.cpp``#ifndef MYORDEREDLIST_CPP``.h`

注意 - 模板类/函数是您唯一需要`#include`的 .cpp 文件或将定义放入头文件中。

# php - 使用 Jquery 显示上传传输时间？

> ID：10165419
> 
> 赞同：1
> 
> 时间：2012-04-15T19:45:32.960
> 
> 标签：php, javascript, jquery, html, file-upload

我的一个项目有这个上传系统。一切都很好，唯一的是在文件上传期间，没有任何进度条......所以用户不知道他的文件何时会完全上传，直到它加载成功页面。

这是我的链接：

[http://mediodesign.ca/upload/docroot/](http://mediodesign.ca/upload/docroot/)

我正在使用谷歌浏览器进行浏览。当我上传文件时，在窗口的左下角有上传传输百分比......这是我想使用的数据，但我真的不知道如何让它工作。

我想要一个加载轮（比如说“loading.gif”），旁边显示上传百分比。很简单的事情。

这是我的索引代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>

        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>File Sharing</title>
        <link rel="stylesheet" href="css/master.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    </head>
    <body id="home">
        <div id="page-wrapper">
            <h1>File Sharing</h1>
            <form action="<?php echo $_SERVER['REQUEST_URI'] ?>" method="post" accept-charset="utf-8" enctype="multipart/form-data">

                <input type="hidden" name="max_file_size" value="10485760" /> 

                <label for="uploadthis">Select File to Upload</label>
                <input type="file" name="uploadthis" value="" id="uploadthis">
                <input type="submit" name="submit" id="submit" value="Upload &rarr;">
            </form>
        </div>
    </body>
</html> 
```

还有我的上传成功页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>Upload successful</title>
        <link rel="stylesheet" href="css/master.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    </head>
    <body id="home">
        <div id="page-wrapper" class="uploadComplete">
            <h1>Upload successful</h1>
            <p class="note">Download link:</p>
            <p class="download-link"><a href="<?php echo $data['downloadLink']; ?>" class="downloadLink"><?php echo $data['shortname']; ?></a></p>
        </div>
    </body>
</html> 
```

任何人？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:03:44.367

显示上传百分比不包含在 HTTP 协议中。AFAIK，您必须使用服务器端模块（如果可以使用）或使用 Flash（或 Java）外部插件来上传文件。

例如，GMail 用于邮件附件的上传过程是由 Flash 模块完成的。

# excel - 创建具有自定义名称的工作簿而不将其保存到磁盘

> ID：10165421
> 
> 赞同：10
> 
> 时间：2012-04-15T19:45:48.700
> 
> 标签：excel, vba

是否可以创建具有自定义名称的工作簿而不将其保存到磁盘？我想避免使用默认的“Workbook x”名称，但我不想要求用户保存工作簿。如果我在某个临时位置自动保存它，如果用户单击“保存”，他将不会得到“另存为...”对话框，这可能会造成混淆。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T20:12:38.013

只需创建工作簿并且不保存它，因此当用户尝试保存它时，用户将收到“另存为”提示。如果用户尝试关闭它，那么用户将在关闭之前收到提示用户是否要保存（*同样是另存为对话框*）文件。现在，此提示的外观将取决于您对新创建的工作簿进行了一些更改。

例如

```
Sub Sample()
    Dim wb As Workbook

    Set wb = Workbooks.Add
End Sub 
```

默认情况下，工作簿将被命名为“Book*”，但这并不重要，因为用户将有机会执行“另存为”

**跟进**

> > > 通过按 Ctrl + S。它会显示另存为...对话框，就像从未保存过工作簿一样。

虽然我提到我只能想到一种方法，但是在处理代码时，我想出了 2 个选项 :)

**方式 1**

a) 创建一个新的工作簿

b) 将其保存为 JAN 2012.XLSM 到用户的 Temp 目录

c) 将文件属性更改为只读

d) 现在当用户按下 CTRL+S 时，Excel 将提示另存为

```
Option Explicit

Private Declare Function GetTempPath Lib "kernel32" Alias "GetTempPathA" _
(ByVal nBufferLength As Long, ByVal lpBuffer As String) As Long

Private Const MAX_PATH As Long = 260

Sub Sample()
    Dim wb As Workbook

    Set wb = Workbooks.Add

    With wb
        .SaveAs Filename:=TempPath & "JAN 2012.xlsm" _
        , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False

       '.SaveAs Filename:=TempPath & "JAN 2012.xlsx" _
       , FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False

        .ChangeFileAccess Mode:=xlReadOnly, WritePassword:="admin"
    End With
End Sub

Function TempPath() As String
    TempPath = String$(MAX_PATH, Chr$(0))
    GetTempPath MAX_PATH, TempPath
    TempPath = Replace(TempPath, Chr$(0), "")
End Function 
```

**方式2（复杂的做法）**

a) 创建一个新的工作簿

b) 将其保存为 JAN 2012.XLSM 到用户的 Temp 目录

c) 注入代码以禁用 Ctrl + S 并且只允许另存为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:54:51.870

您可以使用**应用程序事件**来管理创建和保存工作簿。

有关更多信息，请参阅CPearson 网站上的[应用程序事件](http://www.cpearson.com/excel/Events.aspx)。

我的建议：创建一个带有应用程序事件处理程序的插件来管理新工作簿：

在插件`ThisWorkbook`模块（或使用 Pearson 描述的类模块）中，包含此代码

```
Option Explicit

' Establish object to handle events
Public WithEvents App As Application
Private Sub Workbook_Open()
    Set App = Application
End Sub

' Handle new workbook 
Private Sub App_NewWorkbook(ByVal Wb As Workbook)
    MsgBox "New Book..."
    Wb.SaveAs "Your Path and File Name Here"
End Sub

' Intercept save event
Private Sub App_WorkbookBeforeSave(ByVal Wb As Workbook, ByVal SaveAsUI As Boolean, Cancel As Boolean)
    MsgBox "Saving " & Wb.Name

End Sub 
```

# php - PHP 会话的安全性如何？

> ID：10165424
> 
> 赞同：37
> 
> 时间：2012-04-15T19:46:01.703
> 
> 标签：php, session-cookies

我主要是一名 C++ 程序员，但我正在尝试学习一些 PHP。

显然，实现 Web 用户会话的方法是使用 $_SESSION 变量将用户的登录 ID 存储在 cookie 中。

某人不可能只修改他们的 cookie，给他们不同的权限或以不同的用户身份登录吗？

似乎这种身份验证机制只是让用户将他们的 ID 存储在一个文件中 - 然后只是相信他们不会更改它。

有什么可以防止这种情况发生吗？

谢谢！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-15T20:04:50.333

PHP sessions are only secure as your application makes them. PHP sessions will give the user a pseudorandom string ("session ID") for them to identify themselves with, but if that string is intercepted by an attacker, the attacker can pretend to be that user.

# What to do

This information is taken from ["Session Management Basics" in the PHP manual](http://php.net/manual/en/features.session.security.management.php), but simplified a bit. Some things may have been missed. Be sure to read through that as well.

1.  [Always use `HTTPS`](http://php.net/manual/en/features.session.security.management.php#features.session.security.management.basic)

    *   Prevents attackers from reading the session ID cookie
2.  Enable [`session.use_strict_mode`](http://php.net/manual/en/session.configuration.php#ini.session.use-strict-mode):

    *   [Rejects uninitialized session IDs](http://php.net/manual/en/features.session.security.management.php#features.session.security.management.non-adaptive-session)
    *   Ensures any sessions created are actually valid, so you can trust a [prefix](http://php.net/manual/en/function.session-create-id.php) (eg, if the prefix is `$userId-`)
3.  Enable [`session.use_only_cookies`](https://www.php.net/manual/en/session.configuration.php#ini.session.use-only-cookies) and disable [`session.use_trans_sid`](http://php.net/manual/en/session.configuration.php#ini.session.use-trans-sid)

    *   Avoids user sharing session ID accidentally by sharing a URL with the session ID in it
    *   Prevents the session ID from appearing in a `Referer` header
4.  Periodically [regenerate the session ID](http://php.net/manual/en/function.session-regenerate-id.php) and [invalidate old session IDs shortly after regenerating](http://php.net/manual/en/features.session.security.management.php#features.session.security.management.session-data-deletion)

    *   If an attacker uses another user's session ID, regenerating will invalidate either the user's or attacker's session, depending on which makes the request that regenerates the ID. You can then track when someone tries to use a session that has been regenerated already, and invalidate the regenerated session at that point. The user will be able to log in, but the attacker (hopefully) won't be able to.
5.  Optionally keep track of additional information in `$_SESSION` that relates to the request (IP address, user agent string, etc)

    *   If an attacker somehow gains access to a session ID, this can possibly detect the intrusion before the attacker can access any data. However, keep in mind that this may worsen the user experience. For example, the IP address may change when the user switches from a mobile network to Wi-Fi, and the user agent string may change when their browser automatically updates. Adjust the data checked according to the tradeoffs your site is willing to deal with.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-15T19:48:39.050

不，会话存储在服务器上，用户无法访问。它用于存储整个站点的信息，例如登录会话。

下面是一个用法示例：

```
<?php
session_start();
if (password_verify($_POST['password'], $hash)) {
    $_SESSION['auth'] = true;
}
?> 
```

然后可以跨站点访问会话以检查用户是否已通过身份验证。

```
<?php
session_start();
if ($_SESSION['auth']) {
    echo "You are logged in!";
}
?> 
```

用户无法编辑这些值，但是会话的 ID 通过 cookie 作为长随机字符串存储在计算机上。如果未经授权的用户获得对这些字符串的访问权，他们就有可能访问该站点。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-15T19:49:56.923

如果这样做：

```
$_SESSION['user'] = $username; 
```

然后`$username`不会直接存储在cookie中。相反，将生成一个唯一的会话 ID 并将其存储在 cookie 中。

您存储的信息`$_SESSION`仅存储在服务器端，从未发送到客户端。在客户端的后续请求中，服务器将通过存储在 cookie 中的 id 加载会话数据`session_start()`。

它相对安全。唯一可能发生的事情是有人可以截获会话 ID，从而窃取真实用户会话。不过，HTTPS 可以防止这种情况发生。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-15T19:50:53.760

回答这个问题需要两种方法：

1.  PHP session IDs are hard enough to guess for most use cases. Not much harder or less hard than other widely used systems.

2.  Trusting only a session cookie (and only the existance of a session cookie) seems not to go very far security-wise to me, no matter where this session cookie comes from - PHP or elsewhere.

So, in short: PHP sessions are as secure, as your use of them makes them be. This is true for any session-cookie-based system I know of.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-21T15:32:05.950

Since you are a C++ programmer, you only need to know that the session visible to the client side is just a pointer on a different address space (the server) and, therefore, the session cannot be accessed from the client mode.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T20:05:16.083

Whatever answer you get on this topic you are most likely not going to be satisfied because there are so many different opinions on the topic. There are even entire books written about sessions and PHP security in general.

The best answer you can hope to get here is probably "sessions are as safe as you want them to be". More work and a larger number of precautions will obviously make them safer to use but the implementation itself will consume more time. As with everything you are the one to measure how much safe is safe enough for your needs.

# php - 重新格式化从 Facebook Open Graph 解码的 PHP 数组

> ID：10165427
> 
> 赞同：1
> 
> 时间：2012-04-15T19:46:12.430
> 
> 标签：php, arrays, json, facebook-graph-api

我正在设计一个应用程序，该应用程序将受益于在用户键入时向他们推荐用户的 Facebook 朋友。我遇到的困难是将 Open Graph 结果（通过 graph.facebook.com/me 访问用户朋友时）转换为 AutoSuggest jQuery 插件所需的格式。

我知道我可以通过使用将此 JSON 结果解码为一个数组，`$user = json_decode(file_get_contents($graph_url));` 但我对 PHP 的经验不足，无法访问该数组的某些部分并将其放入以下格式。

所需格式：`["First Friend","Second Friend","Third Friend"]`

当前格式：`( [data] => Array ( [0] => ( [name] => Ryan Brodie [id] => 740079895 ) ) [paging] => ( [next] => https://graph.facebook.com/me/friends?access_token=ACCESS_TOKEN&limit=5000&offset=5000&__after_id=USERID ) )`

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:51:51.077

```
$user = json_decode(file_get_contents($graph_url));
$friends = array();
foreach($user['data'] as $friend) {
  if (! empty($friend['name'])) {
    $friends[] = $friend['name'];
  }
}

print_r($friends); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:08:03.493

Zombat 的回答几乎是正确的

```
$user = json_decode(file_get_contents($graph_url));
$friends = array();
foreach($user->data as $friend) {
    $friends[] = $friend->name;
}

echo json_encode($friends); 
```

# android - Android - 使用 SharedPreferences 来管理登录用户是否容易出错？

> ID：10165435
> 
> 赞同：0
> 
> 时间：2012-04-15T19:46:55.323
> 
> 标签：android, android-asynctask

我正在使用 SharedPreferences 为用户管理一种“会话”并让他们保持登录状态，直到他们明确按下注销，也就是我从 SharedPreferences 中删除所有内容的时候。

当用户登录时，我这样做：

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( LoginActivity.this);

            prefs.edit()
            .putString("first_name", firstName)
            .putString("last_name", lastName)
            .putString("email", email)              
            .putString("user_id", user_id)
            .commit(); 
```

它 90% 的时间都在工作，但每隔一段时间，这些东西就不会被写入 SharedPreferences，导致系统永远不会将用户视为已登录。

知道为什么会发生这种情况吗？这是某些手机的安全问题吗？

注意：当远程服务器在将数据实际添加到数据库后做出响应时，我将这些值放入 SystemPreferences 中，即使将数据添加到数据库中，这些值也不会保存在某些设备上。

这是获取首选项的代码：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( ProblemioActivity.this);

String firstName = prefs.getString( "first_name", null); // First arg is name and second is if not found.
String lastName = prefs.getString( "last_name", null); // First arg is name and second is if not found.
String email = prefs.getString( "email", null); // First arg is name and second is if not found.
String user_id = prefs.getString( "user_id", null ); // First arg is name and second is if not found. 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:53:30.933

使用 SharedPreferences 存储临时数据（如会话）很好。但是`commit`您应该使用，而不是使用`apply`，因为**commit**只会保存更改，但不会更新已经初始化的首选项对象。当您使用**apply**时，它会更新偏好对象的值并异步保存（*提交*）更改。

> **犯罪（）**
> 
> 将您的首选项更改从该编辑器提交回它正在编辑的 SharedPreferences 对象。这会自动执行请求的修改，替换 SharedPreferences 中当前的任何内容。
> 
> 请注意，当两个编辑器同时修改首选项时，最后一个调用 commit 的人获胜。
> 
> 如果您不关心返回值并且您在应用程序的主线程中使用它，请考虑改用 apply()。

.

> **申请（）**
> 
> 将您的首选项更改从该编辑器提交回它正在编辑的 SharedPreferences 对象。这会自动执行请求的修改，替换 SharedPreferences 中当前的任何内容。
> 
> 请注意，当两个编辑器同时修改首选项时，最后一个调用 apply 的人获胜。
> 
> 与将其首选项同步写入持久存储的 commit() 不同，apply() 会立即将其更改提交到内存中的 SharedPreferences，但会开始异步提交到磁盘，并且不会通知您任何失败。如果此 SharedPreferences 上的另一个编辑器在 apply() 仍然未完成时执行常规 commit()，则 commit() 将阻塞，直到所有异步提交以及提交本身都完成。
> 
> 由于 SharedPreferences 实例是进程中的单例，因此如果您已经忽略了返回值，则可以安全地将任何 commit() 实例替换为 apply()。
> 
> 您无需担心 Android 组件生命周期及其与 apply() 写入磁盘的交互。该框架确保在切换状态之前完成来自 apply() 的动态磁盘写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:31:20.800

使用两个不同的 SharedPreferences 有危险。

你设置

```
SharedPreferences prefs = PreferenceManager.
    getDefaultSharedPreferences( LoginActivity.this); 
```

但你读

```
SharedPreferences prefs = PreferenceManager.
    getDefaultSharedPreferences( ProblemioActivity.this); 
```

我总是对不同的偏好感到困惑。所以我同时使用

```
activity.getSharedPreference("Key", Mode); 
```

当我想在不同的活动中访问相同的偏好时

# visual-studio-2010 - 如何查看剩余的屏幕视觉工作室电话

> ID：10165439
> 
> 赞同：1
> 
> 时间：2012-04-15T19:47:23.953
> 
> 标签：visual-studio-2010, windows-phone-7

告诉我如何在我的 xaml 中看到屏幕的其余部分？我添加了高度为 2000 像素的文本块，我怎样才能看到其余部分？第二个问题是，在我的 XAML 中，我的文本非常漂亮，例如居中......但在模拟器中，它是单行中的所有内容。

```
<phone:PhoneApplicationPage 
    x:Class="Excercises.Weider_s_six"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="#FF1FB0DB">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="PageTitle" Text="Weider's six" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="64" />
        </StackPanel>

        <!--ContentPanel - place additional content here-->

        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer>
                <TextBlock Height="2000" HorizontalAlignment="Left" Margin="0,6,0,0" Name="TextBlock1" Text="Weider 6 pack Training is a perfect exercise for flat stomach.
    This easy training programme has many advantages.
    It's perfect for beginners and for experts – exercises are easy and begin with the basic level, so every beginner can use them but they get more complicated pretty fast so advanced sportsmen can also be interested in them.
    It helps not only carve your muscles but also burn fat – during the exercise you not only use your abdominal rectus but you also move your legs and arms. It is also because W6 puts pressure on the number of repetitions. It carves your muscles but also burns fat. You can train W6 for about 40 minutes without taking any breaks – you use up all glycogen in blood and start burning the fat.
    It is easy – it is a really easy training set which you can train almost anywhere. All you need is flat ground.
    It gives excellent results – if you want to have a flat stomach W6 is designed just for you. You can see the first effects after just a week and after a whole series it is really impressive.
    How to do Weider 6

    Starting Position

    Lay flat on the ground, hands along the body.
    1 – exercise 1

    Lift your right leg and bend your knee to right angle angle
    Lift your upper torso to contract abdominal muscles and hold the lifted knee with your hands.
    Hold still for 3 seconds.
    Return to the starting position.
    Repeat the exercise with the other leg
    2 – exercise 2

    Lift both legs and bend your knees to right angle
    Lift your upper torso to contract abdominal muscles and hold both knees
    Hold still for 3 seconds

    Return to the starting position" VerticalAlignment="Top" Width="450" />
        </ScrollViewer>
        </Grid>

    </Grid>

    <!--Sample code showing usage of ApplicationBar-->
    <!--<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>-->

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:30:39.533

对于第一部分，将您的文本块包含在滚动查看器中并将其`Width`设置`Height`为`Auto`.

然后，`TextWrapping="Wrap"`在您的 textblock XAML 中设置并将`TextAlignment`textblock 的属性设置为所需的值以获得所需的对齐。

如果你想要格式化文本，你可以使用这样的东西：

```
<TextBlock FontFamily="Arial" Width="Auto" Height="Auto" TextWrapping="Wrap">
<LineBreak/>
<Run Foreground="Maroon" FontFamily="Courier New" FontSize="40">
Some text 1
</Run>
<LineBreak/>
<Run text="Some Text 2"/>
<LineBreak/>
</TextBlock> 
```

`<LineBreak/>`对应于新行。

我认为这将解决您的所有问题。

如需更多信息，请参阅[此](http://create.msdn.com/en-US/education/quickstarts/Working_with_Text_on_the_Windows_Phone)。

# c# - 如何通过 C#.Net 获取所有计算机硬件的序列号？

> ID：10165442
> 
> 赞同：-1
> 
> 时间：2012-04-15T19:47:41.707
> 
> 标签：c#, numbers, wmi, hardware, serial-number

如何通过 C#.Net 获取所有计算机硬件的序列号？像鼠标、键盘、扬声器、打印机等？

是否有可能获得公司名称和型号？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:53:20.873

[MSDN 中的这个线程](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/a97b65ff-22f2-46aa-b787-6403effdd78c/)就是你要找的。

例如：

```
string processor = RunQuery("Processor", "ProcessorId"); 
```

# javascript - 是否（或应该）存在：Js storage API to Cloud（Dropbox 等），回退到本地（localStorage、cookie 等）

> ID：10165446
> 
> 赞同：4
> 
> 时间：2012-04-15T19:47:59.663
> 
> 标签：javascript, json, local-storage, dropbox, frontend

在我的业余个人项目中，我竭尽全力避免为它们编写后端代码。在我脑海中尽可能多地保留在前端更简单。localStorage 使这变得更容易，但仍然经常需要更永久的东西，并且与单个浏览器的联系更少。对于最近的一个项目，我一直在研究使用 Dropbox 作为一种存储方式，类似于[SourceKit](https://chrome.google.com/webstore/detail/iieeldjdihkpoapgipfkeoddjckopgjg?utm_source=chrome-ntp-icon)的做法。

是否有位于 localStorage、Dropbox 和其他云解决方案之上的 Javascript API，可以轻松地存储到用户可用的任何内容？换句话说，可能会像这样工作（想象一个名为“StoreMaster”的 API）：

*   用户创造了一些东西
*   代码做类似的事情`StoreMaster.store(key,json)`
*   StoreMaster 询问用户是否要登录 Dropbox
*   如果是，StoreMaster 存储到 Dropbox，否则，存储到 localStorage

它需要处理许多复杂情况，例如用户开始使用 localStorage，后来决定迁移到 Dropbox，因此需要迁移数据。或干净地处理错误条件。以及其他存储解决方案的可插拔性。加上我还没有意识到的无数其他事情。

但如果存在这样的东西，我会使用它。如果它不存在，我正在考虑创建它。我很确定其他人会感兴趣并会提供帮助......也许已经存在某些东西，而我的谷歌技能今天让我失望了。

无论如何，如果您知道某些事情，或者您是否像我一样希望有这样的事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T08:59:44.240

如果它主要是 JSON，你可以使用[pouchdb.com](http://pouchdb.com)，它使用本地存储，但可以与你自己的[couchdb](http://couchdb.apache.org "沙发数据库")实例或 couchdb 主机自动同步（我会[想到 iriscouch.com](https://www.iriscouch.com/)和[cloudant.com](http://cloudant.com)，但可能还有其他）。Couchdb 还可以将其他文件类型存储为附件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T16:04:54.857

您可以使用[Kloudless](http://kloudless.com)，它们包装了所有主要的 api，因此您的用户有一个单一的界面来存储东西。

不过，我只会使用[dropbox api](https://www.dropbox.com/developers)。我最近玩的一款游戏（swarmsim）使用了它，而且看起来效果很好。

我曾经将 pouchdb 用于一个项目......但看着我的云提供商（cloudant）慢慢地改变，过时的东西等等。我不会费心去修复那些只是有趣的黑客的东西。

从现在开始，我将在 github 上托管并在 Dropbox 上存储。希望我不必以这种方式每 2 年修复一次所有问题。

# ajax - AjaXplorer 连接到数据库

> ID：10165453
> 
> 赞同：0
> 
> 时间：2012-04-15T19:49:12.343
> 
> 标签：ajax, linux, login, pydio

我发现了 AjaXplorer，我想知道是否有分步指南说明如何在我已阅读文件[http://ajaxplorer.info/documentation/developer-documentation/chapter-external-bridge/](http://ajaxplorer.info/documentation/developer-documentation/chapter-external-bridge/)的数据库之间建立链接 但还是觉得太详细了

有没有一步一步的ajax来链接数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:52:21.497

1：将bootstrap_plugins.php中的auth驱动和conf驱动替换为：

```
 "CONF_DRIVER" => array(
        "NAME"      => "sql",
        "OPTIONS"   => array(
            "SQL_DRIVER"    => array(
                "driver"    => "mysql",
                "host"      => "db_server",
                "database"  => "db_name",
                "user"      => "db_username",
                "password"  => "db_password",
            ),
            )
),    

"AUTH_DRIVER" => array(
            "NAME"          => "sql",
            //"NAME" => "remote",
            "OPTIONS"       => array(
            "SLAVE_MODE"  => true,  
                "SQL_DRIVER"    => array(
                                        "driver"    => "mysql",
                                        "host"      => "db_server",
                                        "database"  => "db_name",
                                        "user"      => "db_username",
                                        "password"  => "db_password"
                                            ),

                "LOGIN_URL" => "../login.php",  // The URL to redirect to if a non-logged user tries to access AjaXplorer
                "LOGOUT_URL" => "../logout.php",  // The URL to redirect upon login out
                "SECRET" => "ahmed",// the secret key that you will pass to the glueCode when communicating with it (see below)
                "TRANSMIT_CLEAR_PASS"   => false  // Don't touch this. It's unsafe (and useless here) to transmit clear password.
                                        )
                ), 
```

2：这是如果你想通过自己的登录页面登录，你必须在验证用户名和密码后登录页面时添加一个葡萄糖行：

```
define("AJXP_EXEC", true);
    $glueCode = "ajaxplorer-core-4.0.4/plugins/auth.remote/glueCode.php";
    $secret = "ahmed";

    // Initialize the "parameters holder"
    global $AJXP_GLUE_GLOBALS;
    $AJXP_GLUE_GLOBALS = array();
    $AJXP_GLUE_GLOBALS["secret"] = $secret;
    $AJXP_GLUE_GLOBALS["plugInAction"] = "login";
    $AJXP_GLUE_GLOBALS["autoCreate"] = false;

    // NOTE THE md5() call on the password field.
    $AJXP_GLUE_GLOBALS["login"] = array("name" => $_POST["login"], "password" => md5($_POST["password"]));

    // NOW call glueCode!
    include($glueCode); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:44:15.717

1) You cannot use bridge with SQL Auth method in AjaxPlorer without heavily modifying the code. 2) The above example is incorrect because you must specify the "remote" parameter for "NAME" or it will not attempt to make the bridge.

This is how the process works...

You tell AjaXplorer to bridge by specifying the "NAME" => "remote" for "AUTH_DRIVER" setting. Then, AjaXplorer links with your CMS on login attempt via the AjaXplorer CMS plugin and writes a user in the users.ser (Serial File) if they do not exist. At this point AjaXplorer does not even attempt to look at any database at all. The database is completely bypassed weather you specify "SQL_DRIVER" => $SQL_Settings or not. The ONLY way it will refer to the database is if "NAME" => 'sql' for "AUTH_DRIVER" setting. But then if you use 'sql' you will NOT be able to have bridge functionality.

Personally I think this is a HUGE bug and a major annoyance.

I hope this clears up all the confusion.

# html - 如何在 iPhone Webapp 中设置带分机的电话号码？

> ID：10165454
> 
> 赞同：4
> 
> 时间：2012-04-15T19:49:13.013
> 
> 标签：html, ios, phone-number, phone-call

在 webapp 中，如果我输入如下数字：

```
<a href="tel:888-123-4567">call now</a> 
```

iPhone 会在点击时将该链接变成即时通话功能。但是，如果我有分机，例如 1-888-123-4567 分机 009（只是一级分机）。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T19:56:07.787

您实际上使用了由“，”字符表示的“暂停”。

```
<a href="tel:888-123-4567,009">call now</a> 
```

这将拨打号码，等待电话接通，然后拨打分机号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:52:26.567

分机不只是一个拨号号码吗？所以只需使用

```
<a href="tel:+18881234567009">call now</a> 
```

# asp.net - ASP.NET Gridview 处理记录的删除、排序和分页

> ID：10165455
> 
> 赞同：0
> 
> 时间：2012-04-15T19:49:13.990
> 
> 标签：asp.net, datagridview, pagination, postback, gridview-sorting

我是 ASP.NET 的新手。

我正在使用 DataGrid 设计一个 ASP.NET 页面，我将在其中执行以下任务。请建议什么是最好的方法。

1）在网格上显示来自数据库的记录如下（启用分页）

```
Cloum1|Colum2|Column3|<CheckBox>
--------------------------------
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>
Colva1|Colva4|Colvaa3|<CheckBox>

            [DELETE Button]

{Solution proposed: Upon load event of the page bind grid with List of entities retrieved from the DB on grid using DataBind(), enable sorting, and paging (currently doing paging and sorting on post back events :()}
{Required help: best approach in doing paging and sorting on the gird with considering performance??}

2)Deleting records :
    -User should be able to navigate to multiple pages on the grid, and should be able to check records which he want to delete form
    {Solution proposed: Upon load event of the page bind grid with List of entities retrieved from the DB on grid using DataBind()}
    -After clicking on Delete button all the records from the DB should be removed.
    {Solution proposed- on Delete button submit click run delete operation using ADO.NET via SP on all the selected records.}
    {Required help: Best approach in this case, how to track the number of records selected for Delete on multiple pages}
    -Incase user sorts the records on the page they shouldn't do a post back instead maintain the state of whether records are checked for delete.
    {Required help: unsure on how to handle this??} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:04:58.283

[在文章Add, Edit, update, Delete gridview](http://wiki.asp.net/page.aspx/1360/add-edit-update-delete-gridview/)上的 ASP.Net 网格视图中有一个逐步进行编辑/更新、删除的过程

在分页检查时保持复选框状态：[在 GridView 控件中分页时保持复选框状态](http://myaspsnippets.blogspot.com/2010/08/maintaining-state-of-checkboxes-while.html)

# objective-c - 将 i 和 &i 传递给函数之间的区别

> ID：10165456
> 
> 赞同：1
> 
> 时间：2012-04-15T19:49:24.527
> 
> 标签：objective-c, c

下面这对语句有什么区别？

```
 int i;
   doSomethingWith(i); 
```

和

```
 int i;
   doSomethingWith(&i); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T19:53:02.217

在 C 中，& 是地址运算符。因此，不是`i`像在第一次调用中那样传递 的副本，而是传递`i`或的地址`&i`，这意味着函数可以直接修改它。

该函数将如下所示：

```
void doSomethingWith (int *var); 
```

这意味着它需要一个指向整数（在本例中为 ）的指针（保存地址的东西`i`）。然后，`i`直接修改，函数可以：

```
*var = 5; 
```

这是解引用运算符，它为您提供实际存储在该地址的内容。此调用将 5 分配给存储在您使用 &i 传递的内存位置的内容。

任何 C 教科书在谈到指针时都应该详细解释这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T19:50:44.203

首先，您传递了 i 的值。在第二个中，您将在内存中传递变量 i 的地址。

看看[这个](http://www.youtube.com/watch?v=mnXkiAKbUPg)关于指针和类似东西的视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:58:42.170

*   传递 'i' --> 传递 i 的值（内存位置内的值）
*   传递 '&i' --> 传递对 'i' 的内存位置的引用

# python - 列表中的 L[L[3]] 是什么？

> ID：10165457
> 
> 赞同：3
> 
> 时间：2012-04-15T19:49:32.207
> 
> 标签：python, python-3.x

我现在正在攻读计算机科学的期末考试，但我根本不明白这是如何工作的：

```
L = [ 8、6、7、5、3、0、9]

30\. L[L[3]] - 1 是？
(一) * -1
(B) 错误
(三) 8
(D) 4
(五) 7

```

答案是-1..所以为了测试它是如何工作的，我刚刚做了 L[L[3]]，答案是 0，然后我做了 L[L[4]] 并且 thar 等于 5，然后我做了 L[L [1]] 给出了 9 但如果我去 L[L[2]] 我得到一个列表索引超出范围错误。我在这里很困惑有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T19:51:41.540

`L[3]`是`5`，`L[L[3]]`是，`L[5]`是`0`，`0 - 1`是`-1`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T19:53:34.053

These sort of problems are best worked one step at at time, from the inside out.

So, L[3] gives you 5\. Use this value (5) as the index into the list again, i.e., L[5] and this gives you 0\. Finally, 0 - 1 = -1, your answer.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T20:24:39.183

这类似于使用数学函数（例如 f(g(x))）的[函数组合。](http://en.wikipedia.org/wiki/Function_composition)

我们取出列表并从内到外工作，所以我们得到`L[L[3]] -> L[5] -> 0`，然后从中减去一个得到`-1`。

当你采取下一个例子时，`L[L[1]] = L[6] -> 9`. 最后，`L[L[2]] = L[7] -> IndexError`.

这一切都是关于从内到外评估复合索引（或函数，就此而言）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T20:56:15.763

以下是按步骤分解的答案：

L = [ 8、6、7、5、3、0、9]

L[L[3]] - 1 = -1

L[3] = 5，所以 L[L[3]] = L[5] = 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T19:52:24.150

Let's walk through the answer by showing the intermediate results, even though they are not displayed:

`L[3]` is 5, `L[L[3]]` is therefore `L[5] = 0`, and `L[L[3]] -1 = 0-1 = -1`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T19:52:26.367

L[2] = 7 and the list only has only 7 elements, that is indice 0..6\. So accessing L[L[2]] = L[7] is out of range...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-15T19:52:28.003

it says, get the number at l[3] which is 5, then use that, so get the number at l[5] which is 0, then subtract 1.... ta dah!

# delphi - 我如何在树视图中弹出上下文菜单但仅在某些特定的树节点中？

> ID：10165465
> 
> 赞同：4
> 
> 时间：2012-04-15T19:50:02.003
> 
> 标签：delphi

我有一个与 TTreeView 关联的 TPopupMenu，但我现在只想在用户单击特定节点时调用（弹出）菜单。那么我如何在树视图中弹出上下文菜单但仅在某些特定的树节点中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T19:56:36.113

使用事件中的`Handled`参数[`OnContextPopup`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TTreeView.OnContextPopup)。通过将此参数设置为 True，您将禁止显示上下文菜单。以下代码显示了如何`TTreeNode`从传递给事件的光标位置获取 ，[`OnContextPopup`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TTreeView.OnContextPopup)并且仅当您右键单击`TTreeNode`与顶部不同的位置时才会显示弹出菜单。

```
procedure TForm1.TreeView1ContextPopup(Sender: TObject; MousePos: TPoint;
  var Handled: Boolean);
begin
  if TreeView1.GetNodeAt(MousePos.X, MousePos.Y) = TreeView1.TopItem then
    Handled := True;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T04:50:42.190

这可能会有所帮助：

```
procedure TForm1.TreeView1ContextPopup(Sender: TObject; MousePos: TPoint;
  var Handled: Boolean);
  var node : TTreeNode;
begin
  node := TreeView1.GetNodeAt(MousePos.X, MousePos.Y);
  if not Assigned (node) then
    Abort;
end; 
```

# mysql - 我的 Mysql LIKE 语句应该多快？

> ID：10165468
> 
> 赞同：3
> 
> 时间：2012-04-15T19:50:08.287
> 
> 标签：mysql, database, full-text-search, query-optimization, sql-like

以下 MYSQL 语句耗时 0.577251 秒：

```
SELECT synonym_group FROM synonym WHERE name LIKE '%ak%' 
```

名称是一个 varchar(250) 字段。同义词数据库表中当前有 356,187 条记录。数据：21 MB。索引：23 MB。总大小：45 MB。每行字节数：67。

那么 0.577251 秒是一个合理的时间吗？如果不是，那是什么，我应该怎么做？我已经阅读了有关此类问题的几个主题，我可以看到的主要解决方案是使用 sphinx 之类的东西。

事实上，我表中的几个字段可能是无关的。例如，如果我通过消除不必要的字段将每行的字节数减少一半，那会使搜索速度提高一倍吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T19:51:32.440

如果您使用`LIKE`以开头的运算符，`%`那么您的选择将不会使用任何索引。

所以，是的，那个时间是正常的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T21:45:15.160

如果`ak`是一个单词，那么 FULLTEXT 索引将起作用（如果您调整最小单词长度，请参见下文）。

因此，使用 FULLTEXT 索引搜索“ak”将与此匹配：

*   “这就是那个。”
*   'AK'
*   'AK。任何。'
*   '任何。啊。

但是，它与此不匹配：

*   'BAK'
*   'AKT'

必须有单词边界才能匹配。

FULLTEXT 搜索的默认[最小字长](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_ft_min_word_len)为 4 个字符。因此，您仍然无法对 'ak' 进行 FULLTEXT 搜索，因为它太短了。您可以降低最小字长设置，但最终会得到 'the'、'and' 和所有其他三个或更短的字母单词，您不想弄乱 FULLTEXT 索引。

使用 LIKE 搜索可能是您唯一可行的选择。当您使用前导通配符 ( `'%ak'`) 时，MySQL 无法利用索引来定位记录。它必须扫描所有行。不过，如果您有覆盖索引，它将使用索引进行扫描。

因此，对于您的查询：

```
SELECT synonym_group FROM synonym WHERE name LIKE '%ak%' 
```

如果你有一个多列、覆盖、索引 on `(name, synonym_group)`，它实际上仍然会使用索引来回答查询，但不是传统意义上的。MySQL会扫描索引，一般比扫描实际表数据（表扫描）要快。另外，理想的系统有足够的 RAM 来将所有索引存储在 RAM 中，因此它只是扫描内存而不是磁盘。

因此，使用覆盖索引，行的大小将不起作用。

如果没有覆盖索引，行的大小会影响扫描速度，因为磁盘必须移动得更远。

如果您最终进行了表扫描，您将希望对表进行碎片整理，并且最好具有固定长度的行（CHAR 而不是 VARCHAR）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T19:58:22.437

正如 juergen d 所提到的，以 % 开头的搜索不能使用您的索引，并且必须扫描整个表（不好并且随着表大小的增加只会变得更糟）。减少列数可能无济于事，因为真正的 CPU 消耗是循环遍历每一行中的字符串。

在这种情况下，您应该考虑使用全文搜索和索引： [http ://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

# ruby - 循环遍历数组的索引

> ID：10165469
> 
> 赞同：3
> 
> 时间：2012-04-15T19:50:09.393
> 
> 标签：ruby

我正在开发一个 Ruby 脚本，该脚本将从 Gmail 下载电子邮件并下载与特定模式匹配的附件。我基于 Ruby 的优秀[Mail gem](http://github.com/mikel/mail)。我正在使用 Ruby 1.9.2。我对 Ruby 没有那么丰富的经验，并感谢提供的任何帮助。

在下面的代码中，电子邮件是从 gmail 返回的包含特定标签的电子邮件数组。我坚持的是遍历电子邮件数组并处理每封电子邮件上可能有多个附件的内容。如果我指定索引值，则 emails[index].attachments.each 的内部循环确实有效，但我未能成功包装第一个循环以遍历数组的所有索引值。

```
emails = Mail.find(:order => :asc, :mailbox => 'label')

emails.each_with_index do |index|
    emails[index].attachments.each do | attachment |
      # Attachments is an AttachmentsList object containing a
      # number of Part objects
      if (attachment.filename.start_with?('attachment'))
        filename = attachment.filename
        begin
            File.open(file_dir + filename, "w+b", 0644) {|f| f.write attachment.body.decoded}
        rescue Exception => e
            puts "Unable to save data for #{filename} because #{e.message}"
        end
      end
    end
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T20:00:15.617

的语法`each_with_index`是这样的：

```
@something.each_with_index do |thing,index|
    puts index, thing
end 
```

然后你应该替换行 emails.each_with_index do |index|

和

```
emails.each_with_index do |email,index| 
```

但是我没有看到您实际使用索引，因此您可以将其简化为：

```
emails.each do |email|
    email.attachments.each do | attachment |
.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T19:56:56.490

each_with_index 为块产生的第一个参数是对象，而不是索引。

```
emails.each_with_index do |o, i|
  o.attachments.each do | attachment | 
```

除非您需要我们未见过的代码中的索引，否则您可以使用`each`那里的方法。

# ios - 哪个 UI 元素最适合用于显示条款和条件？

> ID：10165470
> 
> 赞同：3
> 
> 时间：2012-04-15T19:50:12.323
> 
> 标签：ios, cocoa-touch, user-interface

在应用程序中向用户显示“条款和条件”的最佳 UI 对象是什么？我想通知用户他们即将将一些视频和数据上传到服务器，并确保他们知道这一点并接受它。

我想过使用 a `UIActionSheet`，但我需要显示很多文本，所以这可能不适合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:24:15.303

我会选择一个`UIWebView`. 毕竟，它可以显示格式华丽的 HTML。在我构建的一个应用程序中，我创建了一个特殊的`UIViewController`子类，它加载了一个`UIWebView`带有接受/拒绝按钮的子类。作为奖励，您可以将 EULA 保留在您的服务器上，并`UIWebView`通过其 URL 进行加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:04:02.347

我将展示一个模态视图控制器，其中包含一个滚动视图。在该滚动视图中，放置一个多行 UILabel 或 UITextView （禁用编辑）。UILabel 或 UITextView 不应填充滚动视图。在滚动视图的底部，放置您的接受和取消按钮。这里的效果是用户将看到文本正文，但他们必须向下滚动到末尾才能找到按钮以越过屏幕。这类似于 Apple 在更新 iTunes 服务条款时所做的事情，您必须先同意新条款，然后才能下载更多应用程序。

如果您的条款和条件非常短，即一屏或更少，那么您可能甚至不需要滚动视图就可以逃脱。

我会在用户第一次将数据上传到服务器时展示这个模式。然后当他们接受时，将这些数据保存到 NSUserDefaults 或本地 .plist 文件中，这样当您的用户将来点击这一点时，您可以检查他们之前是否接受过该协议，并且不要再次显示它.

如果用户拒绝接受条款并点击取消，那么只需隐藏模态视图控制器，但不要让它们在应用程序中进一步前进。如果他们确实尝试继续，则再次提交条款和条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T11:11:46.363

使用两种状态的 uiButton，一旦将未选中的空复选框和其他状态成像为选中的复选框，并带有条款和条件的标签。您可以在 uiwebview 中显示条款和条件。要在 webview 中加载的 inbundle/本地 html 文件或远程文件中的相同条款和条件。

# java - 自更新到 ADT 17 后，使用 libgdx 的 Android 应用程序崩溃

> ID：10165471
> 
> 赞同：3
> 
> 时间：2012-04-15T19:50:21.887
> 
> 标签：java, android, eclipse, libgdx

我的安卓程序崩溃了。这是在将 Eclipse 更新到 3.6.2 并更新 SDK 和 ADT（到 17）之后开始的，我遇到了问题。（在我更新 eclipse 之后，我的 ddms 也崩溃了，但我修复了这个问题。）我现在已经将我的 SDK 和 ADT 更新到 18，但我仍然有这个问题。我的 Java 项目和 Android 项目中的 lib 文件夹没有改变。我使用马里奥教程并构建它们。我的 java 项目运行良好，但我不明白为什么我的 Android 项目无法运行。

手机崩溃截图： ![在此处输入图像描述](../Images/5062acc23982eb442442f41d8b1627a3.png)

Eclipse 中的 LogCat： ![在此处输入图像描述](../Images/0993e3923b4a4ece742fd0337af0625f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T21:45:29.833

[正如这里](http://www.badlogicgames.com/wordpress/?p=2362)已经解释和解决的那样，最新的 ADT 插件的一些更改会导致此问题，解决方案只是将所有需要的源添加到您的 Android 项目中，如链接所述。

# ajax - JSF View Scoped bean 在重定向到 JSP 后仍然存在

> ID：10165475
> 
> 赞同：1
> 
> 时间：2012-04-15T19:50:41.450
> 
> 标签：ajax, jsp, jsf, redirect

我有一个在页面上执行一些 ajax 更新并使用 @ViewScoped ManagedBean 的应用程序。当用户提交表单时，我的操作方法重定向到 Jsp 以使用 Cewolf 库显示图表。它工作正常，但似乎 bean 在这个重定向中幸存下来。如果用户单击 Jsp 上的后退按钮，则所有“rendered ajax”字段都是空白的，但“execute ajax”字段显示之前的值。然后，如果我进行 ajax 更新，则“空白”字段将使用以前的值呈现...

重定向代码：

```
//save
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    Map<String, Object> sessionMap = externalContext.getSessionMap();                      
    sessionMap.put("integrator", dataSource);

    try
    {
        FacesContext.getCurrentInstance().getExternalContext().redirect("graph.jsp");
    } catch (IOException ex)
    {
        Logger.getLogger(EquationsBean.class.getName()).log(Level.SEVERE, null, ex);            
    } 
```

还有一些我的 index.xhtml：

```
<h:selectOneMenu  value="#{equationsBean.equationsToSolve}" id="neqs">
    <f:selectItems value = "#{equationsBean.eqsChoose}" /> 
    <f:ajax render="equationForm" execute ="neqs" listener="# {equationsBean.equationsSelected}"/>
</h:selectOneMenu> 
```

我期望的是，当我重定向到 Jsp 时，如果用户点击后退按钮，我的 bean 就会死掉并且表单是新鲜的。我已经尝试了一个过滤器来禁用缓存，但它的行为非常奇怪。此外，我没有使用 Jsp 标记，仅使用 facelets，并且某些组件具有“rendered”属性，具体取决于我的 bean 状态。我应该发布整个.xhtml，但它有点大......

感谢有人可以帮助我理解这种行为！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:19:44.623

刚刚找到了一个更好的解决方案：使用 Primefaces，它不支持 XY 图表但与 JFreeChart 集成。

不管怎么说，还是要谢谢你！

# android - 移植到 Android：为什么我得到“无法创建默认 XMLReader；系统属性 org.xml.sax.driver 设置了吗？”？

> ID：10165477
> 
> 赞同：6
> 
> 时间：2012-04-15T19:50:49.627
> 
> 标签：android, sax, xmlreader

我正在将一些在我的桌面上运行良好的 Java 代码移植到 Android。我有以下代码段：

```
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;
// ...
XMLReader p = XMLReaderFactory.createXMLReader(); 
```

在最后一行我得到以下异常：

```
Can't create default XMLReader; is system property org.xml.sax.driver set? 
```

当我在桌面上测试代码时，它运行良好。为什么我在 Android 上遇到此异常，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-07T15:57:49.700

我的解决方案是在我的 MainActivity 中包含以下代码：

```
System.setProperty("org.xml.sax.driver","org.xmlpull.v1.sax2.Driver"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-05T09:55:44.673

我在将一些代码移植到 Android 时遇到了同样的问题。我发现创建自己的工厂和解析器似乎可行。

我会尝试替换这个：

```
XMLReader p = XMLReaderFactory.createXMLReader(); 
```

有了这个：

```
SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();
SAXParser newSAXParser = saxParserFactory.newSAXParser();
XMLReader p = newSAXParser.getXMLReader(); 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:29:15.203

Resolved by following [Parsing an XML File Using SAX (The Java™ Tutorials > Java API for XML Processing (JAXP) > Simple API for XML)](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)

# ios - 也许是关于 iOS 的内存垃圾收集

> ID：10165483
> 
> 赞同：0
> 
> 时间：2012-04-15T19:51:34.337
> 
> 标签：ios

这是一个视图控制器，每次出现这个视图时，我都想显示从*GetSelectedCityID*方法（类方法）获取的一些数据，请参见下面的屏幕截图：

```
-(void)viewWillAppear:(BOOL)animated {
    NSString *selectedID = [DataManager GetSelectedCityID];
    if(selectedID == nil) {
        return;
    }
    NSLog(@"%@", selectedID);
} 
```

错误消息是：线程 1：EXC_BAD_ACCESS (code=1, address= ******* )
变量*selectedID*是否由 iOS 处理？
顺便说一句，这个也不能工作：

```
-(void)viewWillAppear:(BOOL)animated {
    if([DataManager GetSelectedCityID] == nil) {
        return;
    }
    NSLog(@"%@", [DataManager GetSelectedCityID]);
} 
```

[更新]
1，我认为禁用自动引用计数
2，访问变量*selectedID*
时程序崩溃 3，调试区域不打印

# c - 用 if 检查 char

> ID：10165490
> 
> 赞同：0
> 
> 时间：2012-04-15T19:52:07.033
> 
> 标签：c, gtk, gtkentry

我真的不知道为什么，但这似乎不起作用。对我来说似乎完全有效：

```
gchar *text = gtk_entry_get_text(entry);
if(text == "hello") { 
    //do sth
}
else {
    //do sth else
} 
```

即使我输入 hello 什么也没发生，但调用 else { } 中的代码。问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T19:53:18.557

您需要使用以下方法比较字符串`strcmp`：

```
if(strcmp(text, "hello") == 0) { 
    //do sth
}
else {
    //do sth else
} 
```

你正在做的是比较两个指针。 [阅读更多](https://stackoverflow.com/questions/4843640/why-is-a-a-in-c/4843651)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T19:58:24.193

在 C 中，字符串文字是在许多情况下成为指针的数组。您在使用时比较的是字符串`==`的*地址*（或者更确切地说，每个字符串的第一个字符的地址），而不是您期望的字符串的内容。例如：

```
if (text == "hello") 
```

有点像这样做：

```
if (0x800050a0 == 0x80001000) 
```

不太可能`text`指向存储字符的相同位置`"hello"`。

要在 C 中比较字符串，您应该使用`strcmp`，它根据字符串相互比较的方式返回一个整数。如果字符串相等，则该函数返回 0。如果第一个字符串按字典顺序小于第二个字符串，则该函数返回 -1，否则该函数返回 1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T19:54:24.290

您的程序比较字符串的指针`text`和`"hello"`. 它不会逐个字符地比较字符串。

（其他回答者展示了逐字比较的方法）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T19:55:10.187

您的代码比较指针，它们显然不相等。您想比较字符串，因此您可能需要执行以下操作：

```
if (strcmp(text, "hello") == 0) {
    // Do something
} else {
    // Do something else
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T19:53:27.650

C 字符串不是对象，不能与`==`;进行比较 使用`strcmp()`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-15T19:56:25.397

您不是在比较内容，而是在比较地址。

要比较数据，您应该使用 strcmp-ish 函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-15T19:58:45.017

在比较中

```
text == "hello" 
```

您正在将存储文本的内存地址与存储常量字符串文字“hello”的地址进行比较。这是因为 C 字符串实际上是**指向**字符数组的指针。然后它被解释为一个字符序列，直到到达空终止符。

包括图书馆

```
include <string.h>; 
```

并进行比较

```
!strcmp(text, "hello"); 
```

该`strcmp()`函数接受两个字符串，如果它们相等则返回 0，否则返回非零。如果它不为零，则负/正值确定哪个在字典上更小（第一/第二），并且绝对值确定它们不同的第一个字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T22:23:12.277

GLib ( `#include <glib.h>`，你应该有它，因为你有 GTK) 有一个[g_ascii_strcmp()](http://developer.gnome.org/glib/stable/glib-String-Utility-Functions.html#g-ascii-strcasecmp)函数用于此目的。如果您的文本不是 ascii（很可能是因为它是用户输入，几乎可以保存任何内容），您应该与[g_utf8_collat​​e()](http://developer.gnome.org/glib/stable/glib-Unicode-Manipulation.html#g-utf8-collate)进行比较。

# python - Fetching part of a webpage with urllib

> ID：10165495
> 
> 赞同：0
> 
> 时间：2012-04-15T19:52:23.220
> 
> 标签：python, urllib

I want to fetch a webpage, but the data I need is in the first fifteen characters. How can I only fetch part of the page, as opposed to the entire page, with `urllib`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:56:34.643

You can mention the `number of bytes to read` like this:

```
data = urllib.urlopen("www.example.com")
number_of_bytes_to_read = 15
content = data.read(number_of_bytes_to_read) 
```

# jquery - tumblr 音频/视频播放器 + 无限滚动的 Masonry

> ID：10165501
> 
> 赞同：3
> 
> 时间：2012-04-15T19:52:34.613
> 
> 标签：jquery, tumblr, jquery-masonry, infinite-scroll

这是一个测试页面： http: [//masonry-test.tumblr.com/](http://masonry-test.tumblr.com/)

我在 tumblr 上使用带有无限滚动的 jquery Masonry。一切都很好，除了音频播放器。它们不会加载到第二页并显示此消息 [需要 Flash 9 才能收听音频。]。

做了一些研究并找到了解决方案。[这里](https://stackoverflow.com/questions/10149882/infinite-scroll-breaks-flash)有一个（[这个也是](https://stackoverflow.com/a/4928574/351320)），这里是Mesh[主题中](http://meshtheme.tumblr.com/)[的 js](http://pastie.org/3792999)，它成功地做到了（第 35 行）。

问题是我不知道在哪里以及如何在我的代码中实现它。我尝试的所有东西要么不起作用，要么在砖石块周围留下一个小间隙。我的代码：

```
 $(document).ready(function () {

    var $container = $('.row');

    $container.imagesLoaded(function () {
        $container.masonry({
            itemSelector: '.post',
            columnWidth: 1
        });
    });

    $container.infinitescroll({
        navSelector: '#page-nav',
        nextSelector: '#page-nav a',
        itemSelector: '.post',
        loading: {
            finishedMsg: "No more entries to load.",
            img: "http://static.tumblr.com/7wtblbo/hsDlw78hw/transparent-box.png",
            msgText: "Loading..."
        },
        debug: true,
        bufferPx: 5000,
        errorCallback: function () {
            $('#infscr-loading').animate({
                opacity: 0.8
            }, 2000).fadeOut('normal');
        }
    },

    function (newElements) {

    //tried this but doesn't work

        /* repair video players*/
        $('.video').each(function(){
            var audioID = $(this).attr("id");
            var $videoPost = $(this);
            $.ajax({
                url: '/api/read/json?id=' + audioID,
                dataType: 'jsonp',
                timeout: 50000,
                success: function(data){
                    $videoPost.append('\x3cdiv class=\x22video_player_label\x22\x3e' + data.posts[0]['video-player'] +'\x3c/div\x3e');
                    }
                }
            });
        });  

        /* repair audio players*/
        $('.audio').each(function(){
            var audioID = $(this).attr("id");
            var $audioPost = $(this);
            $.ajax({
                url: '/api/read/json?id=' + audioID,
                dataType: 'jsonp',
                timeout: 50000,
                success: function(data){
                    $audioPost.append('\x3cdiv class=\x22audio_player\x22\x3e' + data.posts[0]['audio-player'] +'\x3c/div\x3e');
                    }
                }
            });
        }); 

        var $newElems = $(newElements).css({
            opacity: 0
        });
        $newElems.imagesLoaded(function () {
            $newElems.animate({
                opacity: 1
            });
            $container.masonry('appended', $newElems, true);
        });
    });

    $(window).resize(function () {
        $('.row').masonry();
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:07:27.960

By default the API will return a white audio player. you can change it by using the jQuery method to replace the flash player with a black or white player respectively.

```
.replace("audio_player.swf", "audio_player_black.swf") 
```

or simply change the color itself

```
.replace("color=FFFFFF", "color=EA9D23"); 
```

Example:

```
$('.audio').each(function(){
        var audioID = $(this).attr("id");
        var $audioPost = $(this);
        $.ajax({
            url: '/api/read/json?id=' + audioID,
            dataType: 'jsonp',
            timeout: 50000,
            success: function(data){
                $audioPost.append('\x3cdiv class=\x22audio_player\x22\x3e' + data.posts[0]['audio-player'].replace("audio_player.swf","audio_player_black.swf") +'\x3c/div\x3e');
                }
            }
        }); 
```

I had a lot of trouble with this and hope it helps someone out. I found the above information here [Change Tumblr audio player color with Javascript](https://stackoverflow.com/questions/10448400/change-tumblr-audio-player-color-with-javascript/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:22:17.203

我注意到了一些事情，这是我建议您尝试的：

1.  For that script to work, the elements with the class "audio" should each have an "id" attribute with the post ID. The HTML should look like that:

    ```
    <div class="audio" id={PostID}>{AudioPlayerWhite}</div> 
    ```

    Tumblr will automatically fill the {PostID} part with the ID for each post. I suppose it works in the same manner for videos (haven't tried it with videos yet).

2.  As for position, I did it like this:

    ```
    function (newElements) {

       ....

       $newElems.imagesLoaded(function () {
           ....
       });

       //audio repair goes here!

    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:12:16.200

Here is a solution I came up with when I needed to implement the same functionality in the template I was creating.

In your HTML, include your AudioPlayer Tumblr tag between comments. This is to prevent loaded scripts from being called. Also add a class "unloaded" to keep track whether or not we've loaded the audio player for this post or not.

```
...
{block:AudioPlayer}
    <div class="audio-player unloaded">
        <!--{AudioPlayerBlack}-->
    </div>
{/block:AudioPlayer}
... 
```

If you look at the commented code after the page is loaded, you will notice an embed tag being passed to one of the Tumblr javascript functions. Since we commented it, it will not execute. Instead we will want to extract this string and replace the div contents with it.

Create a javascript function which will do this. This can be done with regular javascript, but to save time I will do it with jQuery since this is how I did it for my template:

```
function loadAudioPosts() {
    // For each div with classes "audio-player" and "unloaded"
    $(".audio-player.unloaded").each(function() {

        // Extract the <embed> element from the commented {AudioPlayer...} tag.
        var new_html = $(this).html().substring(
            $(this).html().indexOf("<e"),    // Start at "<e", for "<embed ..."
            $(this).html().indexOf("d>")+2   // End at "d>", for "...</embed>"
        );

        // Replace the commented HTML with our new HTML
        $(this).html(new_html);

        // Remove the "unloaded" class, to avoid reprocessing
        $(this).removeClass("unloaded");
    });
} 
```

Call `loadAudioPosts()` once on page load, then every time your infinite scrolling loads additional posts.

# c++ - Hikari：背景动画

> ID：10165504
> 
> 赞同：0
> 
> 时间：2012-04-15T19:53:05.523
> 
> 标签：c++, flash, ogre3d, ogre

我有一个 OGre3D+Hikari 应用程序，我想在其背景中循环使用 Flash 动画。

我尝试调整 createFlashOverlay 中的一些参数（特别是 zorder 和层），但没有任何改变：我的叠加层仍然在我的 3d 食人魔网格之上，我希望它始终在后台。我能做什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:05:28.873

你的问题是，Hikari 似乎不支持渲染到纹理（当我搜索它时，我没有发现它能够做到这一点的线索）。

如果你只想要动画，我会推荐[Berkelium](http://www.berkelium.org)

Berkelium 是一个成熟的浏览器（Chromium），所以它对于一个 gui 来说是相当沉重的。但是，渲染到纹理确实可以使用它。

只需让它渲染到纹理并在背景中的网格上使用该纹理。

[锫在行动](http://www.youtube.com/watch?v=zUdrflSOe_Q)

# dojo - Fields in a Dojo TabContainer will not switch to edit mode

> ID：10165507
> 
> 赞同：2
> 
> 时间：2012-04-15T19:53:19.130
> 
> 标签：dojo, xpages

```
Why would an Edit button not change the fields in a Tab Container into Edit Mode? Fields outside the Container change mode as expected, but anything inside the Container remains in Read Mode. Is there a setting I need to change in the Dojo Container?

    <xp:button value="Edit" id="editButton"
    rendered="#{javascript:!doc1.isEditable();}" style="text-align:left">
    <xp:eventHandler event="onclick" submit="true" refreshMode="complete">
    <xp:this.action>
    <xp:changeDocumentMode mode="edit" var="doc1"></xp:changeDocumentMode>
    </xp:this.action>
    </xp:eventHandler>
    </xp:button> 
```

Update as requested by Jeremy

The TabContainer holds the TabPanes which are made of of individual custom controls. When I switch to edit mode using the button above, only the fields outside the Container are editable. (SO required me to add more text to explain the code)

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core"
        xmlns:xc="http://www.ibm.com/xsp/custom" dojoTheme="true"
        dojoParseOnLoad="true" xmlns:xe="http://www.ibm.com/xsp/coreex">        
       <script type="text/javascript">
            dojo.require("dijit.layout.ContentPane");
            dojo.require("dijit.layout.TabContainer");
        </script>        
        <xc:header></xc:header>         
        <xe:djTabContainer id="djTabContainer1"
            style="height:975px;width:1000px;margin">        
            <xe:djTabPane id="djTabPane1" title="Prospect / Broker">
                <xc:panel1></xc:panel1>
            </xe:djTabPane>
            <xe:djTabPane id="djTabPane2" title="History">
                <xc:panel2></xc:panel2>
            </xe:djTabPane>
            <xe:djTabPane id="djTabPane3" title="Vendor / Quote">
                <xc:panel3></xc:panel3>
            </xe:djTabPane>
            <xe:djTabPane id="djTabPane4" title="Supporting Attachments">
                <xc:panel4></xc:panel4>
            </xe:djTabPane>
            <xe:djTabPane id="djTabPane5" title="Sign and Submit">
                <xc:panel5></xc:panel5>
            </xe:djTabPane>        
        </xe:djTabContainer>        
    </xp:view> 
```

This is an except of one of the Custom Controls

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" dojoParseOnLoad="true" dojoTheme="true">
<xp:panel>
<fieldset class="fieldGroup">
<legend>&#160;PROSPECT INFORMATION&#160;</legend>
<xp:table style="width:90%">
<xp:tr>
<xp:td style="width:20%">
<xp:label value="Employer Name:"
id="pREmpName_Label1" for="pREmpName1">
</xp:label>
<xp:label id="label35" style="color:rgb(255,0,0);font-weight:bold font-size:14pt" value="*" rendered="# {javascript:doc1.isEditable();}">
</xp:label>
</xp:td>
<xp:td style="width:35%">
<xp:inputText value="#{doc1.PREmpName}"
id="pREmpName1" style="width:250px">
<xp:this.validators>
<xp:validateRequired
message="Employer Name is required (PROSPECT INFORMATION)">
</xp:validateRequired>
</xp:this.validators>
<xp:this.required><![CDATA[#{javascript:if( @IsDocBeingSaved()==1){return true} else {return false}
}]]></xp:this.required>
</xp:inputText></xp:td> 
```

# ida - IDA - 已发现正 sp 值错误

> ID：10165511
> 
> 赞同：10
> 
> 时间：2012-04-15T19:53:37.410
> 
> 标签：ida, disassembly

我们有一个 DLL，我们丢失了它的源代码，所以我试图通过 IDA Dissembler 弄清楚它是如何工作的。但是似乎有我无法访问的功能，因为我收到以下错误：

```
Decompilation failure:
46AFAF: positive sp value has been found 
```

在 IDA 网站上查看它有这样的说法：

```
The stack pointer at the specified address is higher than the initial stack pointer.
Functions behaving so strangely can not be decompiled. If you see that the stack
pointer values are incorrect, modify them with the Alt-K (Edit, Functions, Change
stack pointer) command in IDA. 
```

[http://www.hex-rays.com/products/decompiler/manual/failures.shtml#04](http://www.hex-rays.com/products/decompiler/manual/failures.shtml#04)

由于我是整个 Dissembling 场景的新手，任何人都能够提供更多关于导致堆栈指针高于初始堆栈指针的原因以及这是否可以修复的信息。谢谢你的时间

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-16T14:01:20.420

这通常发生在一个函数有多个返回时，而 ida 没有捕捉到这一点。解决方案是使用 alt-k 将堆栈指针偏移量更改回所需的值。

ARM 代码示例：

```
.text:00012A10                 MOV     R0, #1          ; -0xd0 + 0
.text:00012A14                 ADD     SP, SP, #0xC8   ; -0xd0 + 0xc8
.text:00012A18                 LDMFD   SP!, {R4,PC}    ; -0x08 - 0xc8 <<< modified
.text:00012A1C ; ---------------------------------------------------------------------------
.text:00012A1C
.text:00012A1C loc_12A1C                               ; CODE XREF: sub_129E4+20j
.text:00012A1C                 MOV     R3, #0          ; -0xd0 + 0 
```

在评论中我写了 alt-k 值。在 0x12A18 处，sp 偏移量重新调整回 -0xd0

# tcl - defining and looping through arrays tcl

> ID：10165513
> 
> 赞同：7
> 
> 时间：2012-04-15T19:53:49.193
> 
> 标签：tcl

I need some help in defining arrays and displaying and looping thrrough them in TCL.

Here is how I would do them in php.

```
$date =array();
$size=0;
$date[$size] =$pre_event_date;
/* After doing some manpulation and calculations with $size */
for($i=0;$i<=$size;$i++){
    echo $date[$i];
} 
```

I would like to do the same with tcl.Is the following code appropriate?

```
set size 0
set date[$size] $pre_event_date
#After performing some manipulation
for {set i 0} { $i <=$size } {incr i} {
    puts "$date[$i]";
} 
```

Also can I define set $date as an array. Some like like:

```
set date array(); 
```

So i edited my code tried a simple test using RSeeger's array implementation:

```
set date(0) 35
set date(1)  40
foreach key [array names date]{
   puts "${key}=$date($key)"
} 
```

the above doesnt return anything there is probably some error. I also tried: puts $date($key) without quotes but that doesnt work either.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T20:39:21.950

如果您希望按数字（您的代码暗示）索引事物，请使用`list`. 它类似于 C 中的数组。

```
set mylist {}
lappend mylist a
lappend mylist b
lappend mylist c
lappend mylist d
foreach elem $mylist {
    puts $elem
}
// or if you really want to use for
for {set i 0} {$i < [length $mylist]} {incr i} {
    puts "${i}=[lindex $mylist $i]"
} 
```

如果您想按字符串（或有一个稀疏列表）索引事物，您可以使用 an `array`，它是 key->value 的 hashmap。

```
set myarr(chicken) animal
set myarr(cows) animal
set myarr(rock) mineral
set myarr(pea) vegetable

foreach key [array names myarr] {
    puts "${key}=$myarr($key)"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T20:22:06.550

在 Tcl 中，数组概念与许多其他编程语言不同，Tcl 所谓的数组在其他地方通常称为哈希映射或关联数组。数组索引不限于整数，也可以是任何合法字符串。大多数时候，我发现自己使用列表（或列表的列表）而不是数组来进行数据操作。要遍历整个列表或数组，您可以使用命令 foreach。

```
foreach {index content} [array get date] {
    put $index: $content
} 
```

您不必在设置它的值之前初始化数组，只需开始添加成员。单个数组成员被称为

```
 $array($key) or $array("abc") 
```

Tcl 中没有多维数组，但是可以通过具有一致的键名来模拟它们，例如

```
set a(1,1) 0
set a(1,2) 1
... 
```

除此之外，我只想向您指出大多数优秀的 Tcl wiki，它是用于语法问题的[数组页面](http://wiki.tcl.tk/1032)和[数组手册页](http://www.tcl.tk/man/tcl8.5/TclCmd/array.htm)，因为我认为在这里重复他们的大部分内容没有意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T20:22:50.427

TCL 数组更接近 Python 所说的 dict 和 Perl 中的哈希。因此，将索引视为键字符串而不是索引整数会有所帮助：

```
set groceries(fruit) "banana"
set groceries(1) "banana" 
```

您可以使用[数组](https://www.tcl.tk/man/tcl8.4/TclCmd/array.htm)函数来做有用的事情，例如生成所有键的列表，如果需要，您可以遍历该列表。例如，您可以生成一个键列表，然后使用[llength](http://www.hume.com/html85/mann/llength.html)来获取数组大小。

如果您需要一个唯一的索引来查找它们，这种方法效果最好。如果您只需要一个有序列表，那么您最好使用像[lappend](https://www.tcl.tk/man/tcl/TclCmd/lappend.htm)这样的实际列表函数。

# css - Div next other, width are percents, paddings breaks the lines

> ID：10165529
> 
> 赞同：1
> 
> 时间：2012-04-15T19:55:32.070
> 
> 标签：css, html

I managed to create `div`s to act like a column of tables. However, now I want to padding between divs. If I do something like this:

```
<div style="float:left; width:100%;">
  <?php
  foreach ($datas as $rec) { ?>
  <div style="float:left; width:100%; background-color: green;">
    <div style="margin: 0px; float:left; width: 25%; background-color: red;"><a href="<?php echo $rec['HTTP']; ?>" target="_blank"><?php echo $rec['LINKNAME']; ?></a></div>
    <div style="margin: 1px; background-color: yellow;"><?php echo $rec['DESCRIPTION']; ?></div>
  </div>
  <?php } ?>
  </div> 
```

because of `margin: 1px` it falls apart. How to fix that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:04:09.880

我可以看到两种解决方案：

1.  以百分比形式指定您的保证金，例如`margin:1%;`
2.  使用 CSS3`box-sizing`选项，例如

`webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */`

`-moz-box-sizing: border-box; /* Firefox, other Gecko */`

`box-sizing: border-box;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:01:30.797

```
<div style="float:left; width:100%;">
<?php
foreach ($datas as $rec) { ?>
    <div style="float:left; width:100%; background-color: green;">
        <div style="padding: 1px; float:left; width: 25%; background-color: red;"><a href="<?php echo $rec['HTTP']; ?>" target="_blank"><?php echo $rec['LINKNAME']; ?></a></div>
        <div style="padding: 1px; background-color: yellow;"><?php echo $rec['DESCRIPTION']; ?></div>
    </div>
<?php } ?>
</div> 
```

# c++ - 视频中的图像偏移

> ID：10165535
> 
> 赞同：0
> 
> 时间：2012-04-15T19:56:34.223
> 
> 标签：c++, video, opencv

我正在尝试使用 opencv 的 VideoWriter 编写视频。这是代码：

```
int main() {
    //read image from file:
    Mat image(cvLoadImage("temp.bmp"));
    //create videowriter (DivX codec):
    VideoWriter record("output.avi", CV_FOURCC('D','I','V','X'), 30, image.size(), true);
    for (int i=0; i<100; ++i) {
        //write frame to video:
        record<<image;
    }
} 
```

这是我正在尝试编写的图像（temp.bmp）： ![输入](../Images/f995229004134700a18e10e2f15f357b.png)

（我可以上传原始 bmp 文件，但即使使用此 png 结果也是相同的 - 见下文）。

但是当我打开视频（output.avi）时，我看到了： ![在此处输入图像描述](../Images/f50edf73a0be6f603a5345242bda506d.png)

视频为何如此偏移？我尝试了[不同的编解码器并使用](http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter)[cvtColor](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-cvtcolor) (CV_BGR2xxx)将图像转换为不同的类型，但没有运气。

是时候报告错误了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:28:40.317

我刚刚在 OpenCV 2.4.1 上测试过这个问题（之前我在 2.3.1 版上测试过），效果很好！似乎这是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T14:54:24.217

我遇到了和你一样的问题：

```
VideoWriter out_capture("video.avi",CV_FOURCC('M','J','P','G'), 30, RESULTS[0].size() ,true);

for(int i = 0 ; i < RESULTS.size() ; i++)
{
    Mat img;
    RESULTS[i].copyTo(img);

    if(img.empty())
        break;
    out_capture << img;
} 
```

`RESULTS`是存储我所有图像的向量。

这是视频的一帧： ![在此处输入图像描述](../Images/7aadce346af22d127e1a14bdbb23a5c0.png)

我想要的是这样的： ![在此处输入图像描述](../Images/24a380518025288c18f9e59a07549b5c.png)

# c# - C# search in a textfile words to a listbox

> ID：10165542
> 
> 赞同：0
> 
> 时间：2012-04-15T19:57:24.657
> 
> 标签：c#, asp.net, webforms, asp.net-webcontrol

I have an ASP.NET *ListBox* that displays a list of activites taken from a text file. Now what I want to do is to search words, for example "hockey", entered by the user in a *TextBox* control, and display in the ListBox only the activities containing that search string.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:00:32.690

这个问题很模糊，但考虑到从帖子中获得的信息，我会说遵循这种模式（伪代码）：

```
using (StreamReader sr = new StreamReader(filepath)) 
 {

       while (sr.Peek() >= 0) 
       {
           string fileLine = sr.ReadLine();
           if(fileLine .Contains("hockey"))
                 DisplayInListBox(fileLine );
       }
} 
```

像这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:56:25.970

我想这很微不足道：

```
var items = //listBox1.Items;
private void textBox1_TextChanged(object sender, EventArgs e)
{
    listBox1.Items.Clear();

    foreach (object s in items)
    {
        if (s.ToString().Contains("hockey"))
            listBox1.Items.Add(s);
    }

    if (listBox1.Items.Count > 0)
        listBox1.SelectedIndex = 0;
} 
```

基本思路是缓存listbox的初始项，清空后根据文本框中输入的字符串进行填充。

# php - AJAX Response Size Limit

> ID：10165543
> 
> 赞同：8
> 
> 时间：2012-04-15T19:57:38.130
> 
> 标签：php, jquery, ajax, size

I am using AJAX to asynchronously call a PHP script that returns a large serialized array of JSON objects (about 75kbs or 80k characters). Every time I try and return it it hits a 3000 character limit. Is there a maximum size set anywhere on servers or within jQuery's ajax implementation?

EDIT: the 3'000 limit is a Chrome limit, FF has a 10'000 character limit and Safari has no limit. I'm guessing there is no fix for this apart from changing my code to split/lessen the return data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T02:21:01.820

您可以拆分您的 JSON 并逐个使用 $.ajax

我为你做了一个例子

html端：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="jquery.js"></script>
    <script>
    $(document).ready(function() {

        window.result_json = {};

       $.get("x.php?part=size",function(data){
          var count = data;
          for (var i = 0; i <= count; i++) {
            $.ajax({
              dataType: "json",
              url: "x.php",
              async: false,
              data: "part="+i,
              success: function(data){
                $.extend(window.result_json,data);
              }
            });
          };
          console.log(window.result_json);
       });
    });
</script>
</head>
<body>

</body>
</html> 
```

PHP端（文件名为x.php）：

```
<?php
if(isset($_GET['part'])){

    function send_part_of_array($array,$part,$moo){
        echo json_encode(array_slice($array, $part * $moo,$moo,true),JSON_FORCE_OBJECT);
    }
    $max_of_one = 3;
    $a = array("a","b","c","d","e","f","g","h","i","j");

    if($_GET['part'] == 'size'){
        echo round(count($a) / $max_of_one);
    }else{
        send_part_of_array($a,$_GET['part'],$max_of_one);
    }

}
?> 
```

首先使用`$.get`(part=size)，检查有多少片。

其次用`$.ajax`(part=(int)PART-NUMBER) ，在 for 循环中一一获取 JSON 的各个部分

最后`$.extend`在 for loop marge new 中获取 JSON 和旧的 JSON 元素`window.result_json`

**注意： `$max_of_one`变量确定要发布的切片数。**

# android - 如何在绘制主视图后显示 ProgressDialog。安卓

> ID：10165544
> 
> 赞同：0
> 
> 时间：2012-04-15T19:57:45.470
> 
> 标签：android, progressdialog, oncreate

嗨，我的 MapView 应用程序需要很长时间才能加载，所以我想在加载时显示一个水平样式的 ProgressDialog。当我尝试在 onCreate/onStart 方法中显示对话框时，对话框刚刚以 100% 完成的方式显示在最后，我现在意识到这是因为在 onCreate/onStart 方法之后没有将任何内容绘制到屏幕上。

所以我想做的是显示基本地图，然后在绘制地图后执行要求的代码，这样我也可以显示一个 ProgressDialog。这是可能的吗？如果是的话怎么办？

提前致谢！=]

编辑：

这是源代码：

```
public class GoogleMapsActivity extends MapActivity {
     private List<Overlay>  mapOverlays;

     @Override
     public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);

          MapView mapView = (MapView) findViewById(R.id.mapview);
          mapView.setBuiltInZoomControls(true);
          mapView.setSatellite(false);
          mapView.setTraffic(false);

          mapOverlays = mapView.getOverlays();

          new ProgressTask(this).execute();
    }

    public void addToMap(ItemizedOverlay<OverlayItem> itemizedOverlay){
         mapOverlays.add(itemizedOverlay);
    }
} 
```

和 AsyncTask 类

```
public class ProgressTask extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog;
    private GoogleMapsActivity activity;

    public ProgressTask(GoogleMapsActivity activity) {
        this.activity = activity;
        dialog = new ProgressDialog(activity);
    }

    @Override
    protected void onPreExecute() {
        dialog.setTitle("Loading Pictures");
        dialog.setMessage("Loading...");
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setCancelable(false);
        dialog.show();
    }

    @Override
    protected void onPostExecute(final Boolean sucess) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    }

    @Override
    protected Boolean doInBackground(String... args) {
        try {

            ArrayList<String> list = getImageLocations();

            String filePath;
            String title;

            LayerDrawable drawable;
            ImageItemizedOverlay itemizedOverlay;

            GeoPoint point;
            OverlayItem overlayItem;

            int count = 0;

            if (list.size() > 0) {
                dialog.setMax(list.size());

                for (String s : list) {
                    filePath = s;
                    point = getImageGeoPoint(s);

                    if (point != null) {
                        title = s.substring(filePath.lastIndexOf("/") + 1);

                        drawable = createLayerDrawable(filePath);

                        itemizedOverlay = new ImageItemizedOverlay(drawable, activity, filePath);

                        overlayItem = new OverlayItem(point, title, null);

                        itemizedOverlay.addOverlay(overlayItem);
                        activity.addToMap(itemizedOverlay);
                    } 
                    dialog.incrementProgressBy(1);
                }

            } else {
                if(dialog.isShowing())
                    dialog.dismiss();

                CharSequence text = "No pictures with geolocations stored at DCIM/Camera.";
                Toast toast = Toast.makeText(activity, text, Toast.LENGTH_LONG);
                toast.show();
            }
            CharSequence text = count + " pictures didn't have a geolocation.";
            Toast toast = Toast.makeText(activity, text, Toast.LENGTH_LONG);
            toast.show();
            return true;
        } catch (Exception e) {
            Log.e("tag", "error: " + e.toString(), e);
            return false;
        }
    }

    private LayerDrawable createLayerDrawable(String filePath) {

        Bitmap bitmap = BitmapFactory.decodeFile(filePath);
        Bitmap thumbnail = ThumbnailUtils.extractThumbnail(bitmap, 50, 50);

        Drawable picture = new BitmapDrawable(thumbnail);

        Drawable pin = activity.getResources()
                .getDrawable(R.drawable.backgroundpin);

        InsetDrawable inset = new InsetDrawable(picture, 11, 15, 11, 23);
        Drawable[] list = { pin, inset };

        LayerDrawable layer = new LayerDrawable(list);

        return layer;
    }

    private static GeoPoint getImageGeoPoint(String filename) {
        GeoPoint gp = null;
        float[] latlong = new float[2];

        try {
            ExifInterface tag = new ExifInterface(filename);

            if (tag.getLatLong(latlong)) {
                gp = new GeoPoint((int) (latlong[0] * 1E6),
                        (int) (latlong[1] * 1E6));
            } else {
                // TODO error!
            }

        } catch (FileNotFoundException fnf) {
            // TODO error!
            fnf.printStackTrace();
        } catch (IOException io) {
            // TODO error!
            io.printStackTrace();
        }

        return gp;
    }

    private static ArrayList<String> getImageLocations() {
        File directory = new File("mnt/sdcard/DCIM/Camera");

        FilenameFilter imageFilter = new FilenameFilter() {
            public boolean accept(File dir, String name) {
                String lowercaseName = name.toLowerCase();
                if (lowercaseName.endsWith(".jpg")) {
                    return true;
                } else {
                    return false;
                }
            }
        };

        File[] files = directory.listFiles(imageFilter);
        ArrayList<String> paths = new ArrayList<String>();

        if (files != null && files.length > 0)
            for (File f : files) {
                paths.add(f.getAbsolutePath());
            }

        return paths;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:11:01.023

如果您需要运行昂贵的代码，它应该在后台线程上执行，以防止您的 UI 锁定。为了显示与此过程相关的一些 UI 元素，Android 为此提供了[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)该类。

要在您的实现中显示 a `ProgressDialog`，实现并创建并显示对话框，然后在 中，将其关闭。`onPreExecute()``AsyncTask``onPostExecute()`

# fortran - 串行版本比并行版本慢 MKL_DYNAMIC=TRUE

> ID：10165545
> 
> 赞同：0
> 
> 时间：2012-04-15T19:57:54.080
> 
> 标签：fortran, linear-algebra, lapack, blas

我通过用（Fortran）英特尔 MKL 子例程替换[维基百科示例](http://en.wikipedia.org/wiki/Conjugate_gradient_method#Example_code_in_GNU_Octave)中的线性代数子例程，在 FORTRAN 中实现了共轭梯度。（仅限 DGEMV、DAXPY 和 DNRM。事实证明 a=b 比 DCOPY 快，a=2*a 比 DSCAL 快）

答案是正确的，执行没有问题。但是，当我将其编译为`ifort CG.f90 -mkl`结果时：

MKL_SET_DYNAMIC = 真；140 秒

MKL_SET_DYNAMIC = 假，MKL_SET_NUM_THREADS=1；70 秒。

MKL_SET_DYNAMIC = FALSE，MKL_SET_NUM_THREADS=2；约 100 秒。

几点：

1.  我通过超线程有 2 个真实内核和 2 个虚拟内核。我不想在 2 核机器上运行 16 个线程。
2.  分析产生了对 a 的深奥参考`M16_LAY_GAS16`，经过大量搜索后归结为`multpd`ASM。否则没有任何有用的东西出来（或者也许，我不知道在哪里看） FWIW，我使用了 VTune。
3.  问题规模不小。上述示例适用于与我的 RAM 大小成比例的矩阵大小（我的 4 GB 系统大约为 13k x 13k）。
4.  `KMP_AFFINITY`在串行情况下将一个线程映射到一个处理器，将 2 个线程并行映射到 2 个处理器。

我的问题是：**如果 MKL_DYNAMIC 不是最佳设置，为什么不将线程数设置为 1？如果相同的工作（在更短的时间内）由 1 人完成，我不一定需要使用 2 个线程。**

我做错了什么还是英特尔 MKL 有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:18:47.677

`MKL_DYNAMIC`在功能上与`OMP_DYNAMIC`/`omp_set_dynamic()`来自 OpenMP 标准相同。

这并不意味着“神奇地改变线程数以尽可能快地运行代码”。这意味着在某些情况下，运行时可以从用户指定的值或系统默认值更改线程数，如果有系统资源或其他实现特定的原因需要这样做。鉴于您没有指定线程数并且有 4 个并发硬件线程可用，我猜您的`MKL_SET_DYNAMIC = TRUE`情况是使用四个线程。

如果您运行类似的东西，`MKL_SET_DYNAMIC=TRUE MKL_SET_NUM_THREADS=16`您*可能会*发现运行时将线程计数限制为 4，并且性能会比 更好`MKL_SET_DYNAMIC=FALSE MKL_SET_NUM_THREADS=16`，因为运行时可能会检测到您要求的数量超过了可用的并发硬件线程数。但这就是我所期望的。

# php - Google Maps API - 自定义标记，而不是图像

> ID：10165547
> 
> 赞同：1
> 
> 时间：2012-04-15T19:57:57.567
> 
> 标签：php, google-maps, google-maps-markers

是否可以使用自定义标记，它只是谷歌地图上的文本（不是图像）？

例如，我在谷歌地图上的指定位置显示一个带有数字的小圆圈。我只知道我可以添加标记，单击标记后会弹出数据 - 我宁愿直接在地图上显示数据。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:09:21.133

您可以尝试使用此处概述的“覆盖”：

```
http://blog.mridey.com/2009/09/label-overlay-example-for-google-maps.html 
```

或者，也许使用 ImageMagick 将文本生成为动态图像是一个很好的解决方案：[http ://www.php.net/manual/en/book.imagick.php](http://www.php.net/manual/en/book.imagick.php)

# hadoop - Hadoop WordCount 示例卡在地图 100% 减少 0%

> ID：10165549
> 
> 赞同：12
> 
> 时间：2012-04-15T19:58:14.887
> 
> 标签：hadoop, mapreduce

```
[hadoop-1.0.2] → hadoop jar hadoop-examples-1.0.2.jar wordcount /user/abhinav/input     /user/abhinav/output
Warning: $HADOOP_HOME is deprecated.

****hdfs://localhost:54310/user/abhinav/input
12/04/15 15:52:31 INFO input.FileInputFormat: Total input paths to process : 1
12/04/15 15:52:31 WARN util.NativeCodeLoader: Unable to load native-hadoop library for     your platform... using builtin-java classes where applicable
12/04/15 15:52:31 WARN snappy.LoadSnappy: Snappy native library not loaded
12/04/15 15:52:31 INFO mapred.JobClient: Running job: job_201204151241_0010
12/04/15 15:52:32 INFO mapred.JobClient:  map 0% reduce 0%
12/04/15 15:52:46 INFO mapred.JobClient:  map 100% reduce 0% 
```

我已经使用本指南在单个节点上设置了 hadoop (http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/#run-the-mapreduce -job），我正在尝试运行提供的示例，但我被困在地图 100% 减少 0% 上。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T23:24:49.707

首先，打开您的作业跟踪器并查看空闲减速器插槽的数量和其他正在运行的作业 - 是否有另一个正在运行的作业正在消耗所有可用的减速器插槽。

一旦您向自己证明有一些免费的减速器插槽可用于为您的作业运行减速器，请在作业跟踪器 web ui 中找到您的作业并单击它以将其打开。您现在应该能够看到已完成的映射器的数量 - 确保这表明您没有正在运行的映射器。控制台中的 % complete 有时会出现问题，您可能有一个正在提交的映射器说它是 100%，但最终确定有问题。

一旦您对所有映射器都已完成感到满意，请查看正在运行的减速器的数量 - 这是否显示为 0？如果不是，它显示一些正在运行 - 单击正在运行的减速器的数量以显示正在运行的减速器页面，现在单击一个实例，直到您获得查看减速器日志的选项。您需要查看此减速器的所有日志（不是第一个/最后一个 100k）。这应该告诉你你的减速器实际上在做什么——很可能试图将结果从映射器复制到减速器节点。我想这是您的问题所在，网络或磁盘空间之一，但无论如何，最终hadoop应该使reducer实例失败并重新安排它在另一个节点上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T12:23:13.180

我在运行 Suse 11 的主机上也遇到了这个问题。正如上面 Chris 所说，问题出在映射器上。为了解决这个问题，我编辑了 /etc/hosts 文件并删除了主机的 IP 地址。例如在 /etc/hosts

```
Ip.address.of.your.host      hostname 
```

改成

```
127.0.0.1                    hostname 
```

完成上述更改并重新启动后，我就可以运行 wordcount 程序

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T22:05:18.387

导致此问题的原因可能有很多，最合理的原因是您的映射器中有错误（异常，无限循环，...）

调试：

*   登录到 localhost:50030，您应该会看到您的工作列表。找到您失败的作业（您的 ID 是 job_201204151241_0010），然后查看跟踪（不要忘记单击“全部”，否则您将看不到完整的日志）。
*   查看您的日志磁盘，它们应该在 /usr/lib/hadoop/logs 或类似的目录下（您必须参考您的配置才能找到），并使用 grep 查找错误消息`cat /path/to/logs/*.log | grep ERROR`并查看是否返回某些内容。

如果没有任何结果，我建议您将日志消息放入映射器中，以便在每一步手动调试发生的情况（假设它在伪分布式模式下运行）。

让我知道情况如何。

**编辑**：正如 Chris 所说，reducer 为 0%，所以问题实际上出在 reduce 步骤之前。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-15T00:15:58.313

我在 Mac 10.7.4 上运行伪集群时看到了同样的问题。当我从睡眠模式中醒来时会发生这种情况。看起来映射器 IP 地址已在唤醒时重新定义：

```
syslog:2012-09-14 16:52:06,542 WARN org.apache.hadoop.mapred.ReduceTask: attempt_201209141640_0003_r_000000_0 copy failed: attempt_201209141640_0003_m_000000_0 from 172.19.131.144
syslog:2012-09-14 16:52:06,546 INFO org.apache.hadoop.mapred.ReduceTask: Task attempt_201209141640_0003_r_000000_0: Failed fetch #1 from attempt_201209141640_0003_m_000000_0 
```

因此，从睡眠模式唤醒后，通过 stop-all.sh 和 start-all.sh 重新启动 hadoop 为我解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-22T16:49:24.647

如果您使用的是 Linux 并且您使用的是**单节点 hadoop**：转到目录 /etc/hosts 使用这种格式更改您的 IP 地址

你的 IP 地址主机 你的 IP 地址从机

转到 /hadoop/conf 目录打开 masters 并在此输入 localhost（删除所有其他地址！）打开 slaves 并在此设置 localhost（删除所有其他地址！）

现在，再次运行您的程序，它应该可以正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-28T13:30:49.990

我也遇到了这个问题。但我确实像这样编辑文件 etc/hosts：

```
Ip.address.of.your.host      hostname 
```

只需在上面的下面添加一行，如下所示

```
127.0.1.1     hostname 
```

您应该注意到它是 127.0.1.1（而不是 127.0.0.1），否则之后您会遇到“连接到主机 some_hostname 端口 22：连接超时”之类的问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-27T17:29:36.910

我可能找到了“地图 100% 减少 0%”问题的另一个原因。

我的地图任务会生成大量记录，并且我在伪集群环境中运行 hadoop。

我检查了 map 任务日志，似乎 map 100% 和 reduce 开始之间的时间用于合并中间段。

```
2013-07-27 03:09:55,302 INFO org.apache.hadoop.mapred.Merger: Merging 10 intermediate segments out of a total of 334
2013-07-27 03:10:15,166 INFO org.apache.hadoop.mapred.Merger: Merging 10 intermediate segments out of a total of 325
2013-07-27 03:10:35,603 INFO org.apache.hadoop.mapred.Merger: Merging 10 intermediate segments out of a total of 316
...
2013-07-27 03:26:18,738 INFO org.apache.hadoop.mapred.Merger: Merging 10 intermediate segments out of a total of 28
2013-07-27 03:29:50,458 INFO org.apache.hadoop.mapred.Merger: Merging 10 intermediate segments out of a total of 19
2013-07-27 03:33:48,368 INFO org.apache.hadoop.mapred.Merger: Down to the last merge-pass, with 10 segments left of total size: 4424592099 bytes 
```

此过程可能需要很长时间，具体取决于段的大小和数量以及磁盘的读/写速度。

除了日志之外，您可以通过检查机器的磁盘使用情况来判断这种情况正在发生，因为大量数据正在合并到新文件中，所以磁盘使用率会一直很高。我什至可以注意到，这些段在合并后被删除，因为磁盘使用量波动，在合并期间增加，在删除期间减少。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-18T18:17:25.053

我遇到了类似的问题（不一样）。我的任务卡在 100% Map 和 16% Reduce 上。我遇到了这个问题好几个小时（对于不同的程序：grep、wordcount 等），直到我碰到这个线程并查看了 Chris 的答案——这基本上提出了一种调试或查明问题的好方法面临的问题。（显然我没有声望投票赞成他的答案，因此这篇文章）。

在查看作业跟踪器的 Web UI 并导航到确切的任务线程的日志文件（我不知道该日志存在）后，我发现我的 JobTracker 无法解析数据节点的主机名。我将 (ip, hostname) 对添加到我的 hosts 文件中，卡住的任务恢复了活力并成功完成。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-19T21:52:29.273

我遇到了类似的问题，问题是减速器任务没有空间。所以我释放了内存。最好的办法是查看 jobtracker 日志：50030/logs/hadoop-hadoop-jobtracker-localhost.localdomain.log。日志消息：“WARN org.apache.hadoop.mapred.JobInProgress：没有空间用于减少任务。节点 tracker_localhost.localdomain:localhost.localdomain/127.0.0.1:57829 有 778543104 字节可用；但我们预计减少输入需要 1160706716”

# c++ - 如何使用 CURL 来查看网页上是否有特定的文字？

> ID：10165557
> 
> 赞同：1
> 
> 时间：2012-04-15T19:59:22.107
> 
> 标签：c++, curl, libcurl

我将如何使用 libCURL 来查看页面是否有某些文本？比如，如果“yahoo.com”包含单词“blue”返回true，否则返回false。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:18:26.510

看看[这个](http://curl.haxx.se/libcurl/c/example.html)页面，它提供了 libcurl 的文档和示例。例如，使用 libxml 进行“解析 HTML”。也许您可以简单地检索页面并通过缓冲区解析您的关键字、字符串或其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:18:36.080

您可以使用 curl 和 grep：

```
curl www.yahoo.com | grep blue 
```

如果您看到一些标记，则发现蓝色。当然，您应该详细说明一些 grep 选项以使输出适应您的需要。

# php - $_SERVER['QUERY_STRING'] 作为一个变量

> ID：10165558
> 
> 赞同：1
> 
> 时间：2012-04-15T19:59:47.433
> 
> 标签：php, get

我有查询

```
http://mysite.com/?index.php?var=somevalue&activate=others 
```

并且需要像这样作为一个变量传递

```
$myvar = "var=somevalue&activate=others"; 
```

但是没有htaccess！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T20:01:15.263

你需要`$_SERVER['QUERY_STRING']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:06:23.697

```
http_build_query($_GET) # Works with all arrays
$_SERVER['QUERY_STRING'] # Works with $_GET only 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:57:45.360

难道你不认为函数[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)会有用吗？然后，您可以将阵列的所有部分粘合在一起。

# c++ - 根据系统动态确定整数的类型（c++）

> ID：10165559
> 
> 赞同：4
> 
> 时间：2012-04-15T19:59:49.197
> 
> 标签：c++, int, long-integer

我正在编写一个程序，以每 32 位（即一次 4 个字节）为单位将数据存储到文件中。我在 64 位 Windows 系统中编写代码，但我使用的编译器是 32 位（mingw32）。在当前系统中，int和long的大小都是一样的，都是32位（4bytes）。我目前正在通过使用 g++ 重新编译（不更改代码）将代码移植到其他系统。但是，我发现 int 或 long 的大小是不同的，并且取决于系统。是否有任何方式（例如在头文件中使用宏）来确定整数的大小，以便决定是否应将 int 或 long 用作代码中的数据类型？我必须在 4 种不同类型的系统中重新编译代码，如果我将代码修改为每个系统有 4 个不同的副本，那真是令人头疼。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T20:03:02.090

您想要做的是使用标准类型，例如`int32_t`. 此类型始终为 32 位。我目前在可移植数据库（berkeley db）中使用这些类型以实现跨系统兼容性。

全部见[这里](http://www.nongnu.org/avr-libc/user-manual/group__avr__stdint.html)。

包括 stdint.h 以获取这些定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T20:04:00.803

这是 C99 提供的规范解决方案的常见问题。

**[标`<stdint.h>`头](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html)**定义了一组类型，这些类型提供特定大小、最快大小和最小大小的整数。在解决您的问题时非常有用。

使用 mingw32 是一件好事，因为不幸的是，我上次检查 Microsoft 时没有提供 stdint.h 及其 API。如果有人在 Windows 上确实需要这个，有一个开源版本，请参阅：**[http ://code.google.com/p/msinttypes/](http://code.google.com/p/msinttypes/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T20:03:53.330

您可以使用 sizeof(int) 来确定整数的大小。

如果您需要特定大小，则应使用 stdint.h 中的 int32_t（或 int64_t）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T20:05:16.667

IMO 解决该问题的最佳方法是不使用`int`,`long long`等，而是使用与平台无关的类型别名：`int8_t`, `int16_t`, `int32_t`,`int64_t`等。

它们定义在`<stdint.h>`

# .htaccess - 重写条件重定向而不是重写

> ID：10165561
> 
> 赞同：2
> 
> 时间：2012-04-15T19:59:55.427
> 
> 标签：.htaccess

我正在尝试将我的 URL 重写`http://givehands.co.in/post.php?p=post&id=1`为`http://givehands.co.in/post/1/`使用 htacess。

但它会被重定向到 URL`http://givehands.co.in/post.php?p=post&id=1`而不是重写它？我的域 givehands 映射到我的网络服务器的子目录。

任何人都可以帮助我正确的重写规则吗？我是新来的。

```
Options -Multiviews
RewriteEngine On    # Turn on the rewriting engine
RewriteBase /
RewriteCond %{REQUEST_URI} post/(.*)
RewriteRule post/(.*)/ http://givehands.co.in/post.php?p=post&id=$1 [L]
RewriteCond %{REQUEST_URI} post/
RewriteRule post/ http://givehands.co.in/post.php [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:29:03.667

看起来您的重定向规则中有一个完整的 URL：

```
RewriteCond %{REQUEST_URI} post/ 
RewriteRule post/ http://givehands.co.in/post.php [L] 
```

将完整的 URL 放在那里会强制 Apache 重定向浏览器而不是重写它： [https ://httpd.apache.org/docs/current/mod/mod_rewrite.html](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)

> **绝对 URL**
> 如果指定了绝对 URL，mod_rewrite 会检查主机名是否与当前主机匹配。如果是这样，则方案和主机名将被删除，并且生成的路径将被视为 URL 路径。否则，将对给定 URL 执行外部重定向。要强制将外部重定向回当前主机，请参见下面的 [R] 标志。

如果 givehands.co.in 是您托管的域，请尝试将其更改为：

```
RewriteCond %{REQUEST_URI} post/ 
RewriteRule post/ /post.php [L] 
```

如果 givehands.co.in 不在您的服务器上，或者在不同的 VirtualHost 下，那么^(†</sup> 无法“重写” URL，您必须重定向浏览器（这就是 Apache 采用领导并为你做这件事）。)

^(†</sup> 你实际上可以设置一个反向代理来做这样的事情，但这可能是另一个讨论的话题:))

# android - Android平板电脑上的系统栏大小

> ID：10165563
> 
> 赞同：2
> 
> 时间：2012-04-15T20:00:03.753
> 
> 标签：android, size, tablet

我有一个问题，我需要 android 平板电脑系统栏的高度。[这和这里](https://stackoverflow.com/questions/5173926/screen-size-honeycomb-menu-android)的问题一样，但我不能使用这个答案，因为它给了我与 DisplayMetrics 相同的大小。在这两种方式中，我都得到了这个栏已经计算好的分辨率。（这个问题没有出现在我的智能手机上，只是出现在我的平板电脑上）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-01T00:11:50.407

```
// status bar (at the top of the screen on a Nexus device) 
public static int getStatusBarHeight(Context context) {
    Resources resources = context.getResources();
    int resourceId = resources.getIdentifier("status_bar_height", "dimen", "android");
    if (resourceId > 0) {
        return resources.getDimensionPixelSize(resourceId);
    }
    return 0;
}

// navigation bar (at the bottom of the screen on a Nexus device)
public static int getNavigationBarHeight(Context context) {
    Resources resources = context.getResources();
    int resourceId = resources.getIdentifier("navigation_bar_height", "dimen", "android");
    if (resourceId > 0) {
        return resources.getDimensionPixelSize(resourceId);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:45:08.463

在此处查看此答案：[https ://stackoverflow.com/a/8367739/807499](https://stackoverflow.com/a/8367739/807499)

它给出了屏幕的整个高度。然后，您可以减去 DisplayMetrics 或根布局大小给出的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T21:37:04.627

Chris Banes 在最近的一次 Droidcon 演讲中提到了这一点。整个演讲非常相关，但这里有一个链接可以回答您的问题（适用于所有外形尺寸，包括平板电脑）。

[https://youtu.be/_mGDMVRO3iE?t=1093](https://youtu.be/_mGDMVRO3iE?t=1093)

这是获取状态栏和导航栏大小的正确方法：[setOnApplyWindowListener](https://developer.android.com/reference/android/support/v4/view/ViewCompat.html#setOnApplyWindowInsetsListener(android.view.View,%20android.support.v4.view.OnApplyWindowInsetsListener))

我希望这有帮助！

# liferay-6 - Liferay 6.1：主题未反映在网站中

> ID：10165575
> 
> 赞同：0
> 
> 时间：2012-04-15T20:01:52.623
> 
> 标签：liferay-6

我将 Liferay 6.1 与 Tomcat 一起使用，我创建了主题并部署了它们，但不知何故它们没有反映在网站中。如果我做错了什么，请告诉我。

这些是我遵循的步骤

1.  使用 Liferay Eclipse 插件创建了一个名为 TestTheme-theme 的主题

2.  跑build.xml文件构建成功）

3.  它创建了一个 _diffs 目录（PLUGINSDK\themes\TestTheme-theme\docroot 下的文件夹

4.  导航到 Liferays tomcat-7.0.22\webapps\ROOT\html\themes_styled 并将 css 文件夹复制到新创建的 _diffs 文件夹中。

5.  修改了_diffs文件夹下的custom.css文件。

6.  Ran build.xml 进行部署（构建成功）

7.  打开浏览器 http:localhost:8086

我无法将我的 css 切换到浏览器。

如果我遗漏了什么，请告诉我。（我正在使用 Lifery 6.1）

也请看图片![在此处输入图像描述](../Images/194fc3839b7d9a063150c700abd3c9e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:21:27.957

您必须在页面管理中更改主题。

```
Dockbar -> Manage -> Page -> Look and Feel 
```

# java - NoClassDefFoundError：将我自己的 jar 链接到 Android 项目时出现问题

> ID：10165578
> 
> 赞同：5
> 
> 时间：2012-04-15T20:02:02.753
> 
> 标签：java, android, jar

所以，我正在尝试为 Android 开发一个客户端-服务器应用程序。为此，我创建了一个引擎，我将在服务器和 Android 应用程序中使用它并将其导出为 .jar 文件。

在服务器端（简单的后台 java 应用程序）使用这个 engine.jar 没有问题，但是我在将提及的 .jar 文件链接到我的 android 项目时遇到了一些问题。

要链接 engin.jar 我遵循一些步骤：

*   在我的 android 项目中创建了“libs”目录
*   在此文件夹中导入engine.jar

在 Android Dependences 组中可以看到这个 engine.jar。我也可以使用该 .jar 中的所有类，Eclipse 不会将它们标记为错误。我的项目编译正常，但是当我尝试从 engine.jar 创建任何对象时应用程序崩溃，并出现以下错误：

> 04-15 23:18:12.885: E/AndroidRuntime(17409): java.lang.NoClassDefFoundError: Common.Message.Message

我想我什么都试过了。任何人都可以分享他对所描述情况的根本原因的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:44:22.793

我也遇到了同样的问题。我通过执行以下操作解决了它：

右键单击项目目录 -> `Build Path`-> `Configure Build Path`-> 选择选项卡`Order and Export`-> 选中/选中相关文件的复选框`.jar`-> 按`Ok`。

希望这也能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:09:32.830

供将来使用：

在项目的根目录中创建一个名为“libs”的文件夹，然后添加您要添加​​的 jar，之前评论中提到的所有导出内容都将自动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:18:09.267

似乎您的服务器和客户端没有相同的通用 jar 类。在编写客户端服务器应用程序时，您需要确保有一些通用代码项目，这将在未来成为一个 lib 文件。

# sql - SQL - 使用公共键在同一个表中减去 2 行

> ID：10165579
> 
> 赞同：0
> 
> 时间：2012-04-15T20:02:07.167
> 
> 标签：sql, tsql

拥有一个包含三列的数据库 - 游戏密钥、团队合作、最终得分。我试图找到每个游戏键的分数差异。

```
游戏钥匙。联手。决赛成绩
 16 27 21
 16 7 24
 17 22 17   
 17 21 10
 18 15 9
 18 11 3

```

期望输出将是

```
游戏钥匙。分数差异
16 3
17 7
18 6

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T20:06:04.033

看起来你想要差的绝对值，所以你可以使用；

```
SELECT Gamekey, max(Finalscore) - min(Finalscore) as Scorediff
FROM TableName
GROUP BY Gamekey 
```

--为您运行的验证添加以下内容（假设以下内容已在 SQL Server 中进行了测试）

```
declare @testTable as table(Gamekey int, Teamed int, Finalscore int)

INSERT INTO @testTable values(16,27,21)
INSERT INTO @testTable values(16,7,24)
INSERT INTO @testTable values(17,22,17)   
INSERT INTO @testTable values(17,21,10)
INSERT INTO @testTable values(18,15,9)
INSERT INTO @testTable values(18,11,3)

SELECT Gamekey, max(Finalscore) - min(Finalscore) as Scorediff
FROM @testTable
GROUP BY Gamekey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:36:23.620

```
Create table Shop
(
    ItemCode varchar(10)not null,
    ShopName Varchar(50) not null,
    Items varchar(50) not null,
    Quantity int not null,
    OrderDate datetime NOT NULL DEFAULT GETDATE(),  
    UpdateDate varchar(11)not null
)
GO

Create Table Product 
(
    ProductCode varchar(10)Primary key,
    ShopName varchar(50),
    Product varchar(50),
    Quantity int ,
    UnitPrice money ,
    Defects int ,
    Remainders int ,
    TotalPrice money ,
    Benefit money ,
    OrderDate datetime NOT NULL DEFAULT GETDATE(),
    UpdateDate varchar(11)
)
GO
Create Table ProductSold 
(
    ShopName varchar(50)not null,
    Product varchar(50) not null,
    Quantity int not null,
    UnitPrice money not null,
    TotalPrice money not null,
    OrderDate datetime NOT NULL DEFAULT GETDATE() 
) 
```

1.  当 Shop (Quantity) 表将其插入其表中时，我想从 Product (Remainders) 中减去。
2.  当 ProductSold (Quantity) 插入到表中时，我想从 Shop (Quantity) 表中减去。

# opengl - 如何使用漫反射颜色的 alpha 作为纹理三角形的不透明度？

> ID：10165580
> 
> 赞同：0
> 
> 时间：2012-04-15T20:02:25.877
> 
> 标签：opengl, opengl-es, firemonkey

我使用纹理图集（作品）在一次调用中绘制了很多纹理三角形。此外，我希望每个三角形都有自己的透明度。我想我可以使用顶点的漫反射颜色来控制每个顶点的透明度。是的，它*可以*工作，因为我在 Direct3D 中有一个工作版本。在 OpenGL/OpenGL 中，我找不到 glBlendFunc、glBlendEquation 等的正确组合。知道该怎么做吗？

如果它在 OpenGL ES 中有所不同，请给我一个提示（我正在寻找两者的解决方案）。

# python - 如何从二维列表生成 HTML 表格？

> ID：10165587
> 
> 赞同：1
> 
> 时间：2012-04-15T20:03:17.570
> 
> 标签：python, html, list, html-table

我有以下代码可以生成所需的 HTML。但它打印在页面顶部，而不是我想要的位置。

```
def fixText(self,text):
    row = []
    z = text.find(',')

    if z == 0: row.append('')
    else:      row.append(text[:z])

    for x in range(len(text)):
        if text[x] != ',': pass
        else:
            if x == (len(text)-1): row.append('')
            else:
                if ',' in text[(x+1):]:
                    y = text.find(',', (x+1))
                    c = text[(x+1):y]
                else:
                    c = text[(x+1):]
                    row.append(c)
    return row

def output(self):
    output = ""
    fob=open('files/contacts.txt','r')
    tup = []

    while 1:
        text = fob.readline()

        if text == "": break
        else: pass

        if text[-1] == '\n':
            text = text[:-1]
        else: pass

        row = self.fixText(text)
        tup.append(row)

    output = tup.sort(key=lambda x: x[0].lower())

    _list1 = len(tup)
    i = 0
    table = ""

    while i < _list1:
        j = 0 #need to reset j on each iteration of i
        _list2 = len(tup[i])
        print("<tr>")

        while j < _list2:
            print("<td>" + tup[i][j] + "</td>")
            j += 1

        print("</tr>")
        i += 1

    return output 
```

如您所见，我有一个打印出 HTML 代码的嵌套循环。这很好用，但是当我尝试将它注入我的模块化站点时，它会在页面顶部打印它。我的预感是以下代码是我需要更改的部分。

```
#!/usr/local/bin/python3

print('Content-type: text/html\n')

import os, sys
import cgitb; cgitb.enable()

sys.path.append("classes")

from Pagedata import Pagedata
Page = Pagedata()

print(Page.doctype())
print(Page.head())
print(Page.title("View Contact"))
print(Page.css())

html='''</head>
<body>
<div id="wrapper">
    <div id="header">
        <div id="textcontainer">{1}</div>
    </div>
    <div id="nav">{2}</div>
    <div id="content">
        <h2>Heading</h2>
        <h3>Sub Heading Page 2</h3>
        <table>
            <tbody>
                {0}
            </tbody>
        </table>    
    </div>
<div>
<div id="footer">{3}</div>
</body>
</html>'''.format(Page.output(),Page.header(),Page.nav(),Page.footer())

print(html) 
```

我的课程页面上还有其他功能，例如`header`、`footer`等，可以正常工作。

例如，页脚已正确插入到`div#footer`. 但是生成的表 si 没有插入 where`{0}`是。

您可以在[此处查看损坏的代码。](http://russet.wccnet.edu/~aperkey/Homework_10/view_contacts.py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:21:01.520

您不应该`print`在内部使用，`def output(self):`因为它在外观期间直接打印`sys.stdout`

```
table = ""
while i < _list1:
    j = 0#need to reset j on each iteration of i
    _list2 = len(tup[i])
    table += "<tr>"
    while j < _list2:
        table=+"<td>" + tup[i][j] + "</td>"
        j += 1
    table += "</tr>"
    i += 1
return table 
```

您的 html 变量应该在打印之前正确填充，而不需要任何打印`stdout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T10:44:42.823

与加入列表的内置首选方法（即使用）相比，嵌套循环不是最佳的`.join()`，以下代码[在大多数情况下是最佳的，](https://stackoverflow.com/a/1350289/457447)也是更“pythonic”的方式

```
table = ""
while i < _list1:
    table += "<tr><td>{0}</td></tr>".format("</td><td>".join(tup[i]))
    i += 1
return table 
```

# java - 绘制可点击的矩形，我不知道如何在 onDraw 方法之前设置参数

> ID：10165590
> 
> 赞同：0
> 
> 时间：2012-04-15T20:03:49.957
> 
> 标签：java, android, ondraw, onclicklistener

我正在尝试制作可点击的矩形。我环顾四周，创建了非常好的代码:)

我创建自己的矩形类的构造函数，然后设置它的一些值。然而，onDraw 方法看起来像创建和绘制矩形，但没有构造函数的新变量值。我做错了什么？

这是默认的 MyActivity 类：

```
ll = (LinearLayout)findViewById(R.id.linearlayout);
List<MiniRectangle> miniRectangleList = new ArrayList<MiniRectangle>();

for(int i=0;i<8;i++)
{
    int numberRandom = r.nextInt(3);

    MiniRectangle miniRectangle = new MiniRectangle(this);
    miniRectangle.set_color(colors.get(numberRandom));
    miniRectangle.set_size(50);
    miniRectangle.set_id_color(numberRandom);
    miniRectangle.set_number(i);

    ll.addView(miniRectangle);

    miniRectangleList.add(miniRectangle);
}

setContentView(ll); 
```

这是我自己的矩形类

```
public class MiniRectangle extends View implements View.OnClickListener {

    Context context;
    int _size;
    int _color;
    int _id_color;
    int _number;

    public MiniRectangle(Context context) {
        super(context);
        this.context = context;
        setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        System.out.println(get_number());
        Toast.makeText(context, get_number(), Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Paint paint = new Paint();
        paint.setColor(get_color());
        paint.setStrokeWidth(1);

        int kleft = (get_number() % 8) * get_size();
        int kright = kleft + get_size() - 2;

        int ktop = 1 * get_size();
        int kbottom = ktop + get_size() - 2;

        canvas.drawRect(kleft, ktop, kright, kbottom, paint);
    }
} 
```

我可以说在运行项目后我只得到一个矩形。难怪每个矩形都有相同的位置。请帮忙。

* * *

结果应该显示可点击矩形的国际象棋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:07:14.597

尝试使用

```
ll.addView(miniRectangle, new LayoutParams(50, 50)); 
```

使用您自己的[LayoutParams](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)参数，而不是

```
ll.addView(miniRectangle); 
```

并从 onDraw() 开始

```
canvas.drawRect(0, 0, get_size(), get_size(), paint); 
```

关于您的 LayoutParams 值。

# java - 执行 Android 时间选择器教程时 Token 出现语法错误

> ID：10165594
> 
> 赞同：0
> 
> 时间：2012-04-15T20:04:08.870
> 
> 标签：java, android, token

所以我一直按照时间选择器教程一步一步地在[这里](http://developer.android.com/resources/tutorials/views/hello-timepicker.html)找到。即使我一遍又一遍地查看代码，但我无法发现我应该在哪里犯了错误，我不断收到*“令牌“}”上的语法错误，删除这个令牌”*在您可以看到的代码文件的最后一个令牌上这里：

```
public class ReportsActivity extends Activity {

//Set up variables for the time change button
private TextView mTimeDisplay;
private Button mPickTime;

private int mHour;
private int mMinute;

static final int TIME_DIALOG_ID = 0;

//updates time displayed in textview
        private void updateDisplay(){
            mTimeDisplay.setText(
                    new StringBuilder()
                        .append(pad(mHour)).append(":")
                        .append(pad(mMinute)));
        }

        private static String pad(int c){
            if (c >= 10)
                return String.valueOf(c);
            else
                return "0" + String.valueOf(c);
        }

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.report);

    //TIME CHANGE IMPLEMENTATION
    //Capturing View elements
    mTimeDisplay = (TextView) findViewById(R.id.timeDisplay);
    mPickTime = (Button) findViewById(R.id.buttonTime);

    //add click listener to the button
    mPickTime.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
            showDialog(TIME_DIALOG_ID);
        }
    });

    //current time
    final Calendar c = Calendar.getInstance();
    mHour = c.get(Calendar.HOUR_OF_DAY);
    mMinute = c.get(Calendar.MINUTE);

    //display current
    updateDisplay();    

}
private TimePickerDialog.OnTimeSetListener mTimeSetListener =
    new TimePickerDialog.OnTimeSetListener(){
            public void onTimeSet(TimePicker view, int hourOfDay, int minute){
                mHour = hourOfDay;
                mMinute = minute;
                updateDisplay();
            }
        };

@Override
protected Dialog onCreateDialog(int id){
    switch (id) {
    case TIME_DIALOG_ID:
        return new TimePickerDialog(this, mTimeSetListener, mHour, mMinute, false);
    }
    return null;
}
}

} //Here is where I get the error message 
```

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:08:54.407

删除最后一个 } 。它是一个额外的..

# delphi - FireMonkey 中的像素着色器模型 > 2.0

> ID：10165598
> 
> 赞同：11
> 
> 时间：2012-04-15T20:04:31.003
> 
> 标签：delphi, delphi-xe2, shader, firemonkey, pixel-shader

从我的主要问题开始：

**我可以在 FireMonkey 应用程序中使用像素着色器模型 3、4 或 5 吗？**

我希望能够在我的 FireMonkey 程序中动态创建像素着色器。为此，我现在使用 DirectX SDK 附带的 fxc.exe 编译像素着色器，并将编译后的代码加载到我的 TShaderFilter 后代中。效果很好（如果您对我的操作方式感兴趣，请告诉我）。

`ps_2_0`但是，如果我作为目标配置文件编译，我只能让事情正常工作。

我目前遇到了着色器模型 2.0 的限制。例如，循环似乎是由编译器展开的，并且您可以在 2 级着色器中拥有最大数量的指令。因此，可能性的数量非常有限。

* * *

**示例：** 下面的着色器代码创建了一个 mandelbrot 分形。如果我设置`Iterations`得太高，它不会编译。错误信息：

`error X5608: Compiled shader code uses too many arithmetic instruction slots (78). Max. allowed by the target (ps_2_0) is 64.`

```
#define Iterations 12

float2 Pan;
float Zoom;
float Aspect;
float4 main(float2 texCoord : TEXCOORD0) : COLOR0
{
    float2 c = (texCoord - 0.5) * Zoom * float2(1, Aspect) - Pan;
    float2 v = 0;        
    for (int n = 0; n < Iterations; n++)
    {
        v = float2(v.x * v.x - v.y * v.y, v.x * v.y * 2) + c;
    }        
    return (dot(v, v) > 1) ? 1 : 0;
} 
```

使用着色器模型 ps_3_0 我可以编译更多迭代，但编译后的着色器似乎在 FireMonkey 中不起作用。我没有收到任何错误消息；结果，我得到了一张红色的图像。

* * *

这里有人知道如何解决这个问题，还是 FireMonkey 无法充分利用我的显卡的全部潜力？

*请注意，我已经看到 FireMonkey 的最低要求是具有着色器级别 2.0 的显卡，但不清楚这是否意味着您不能使用着色器级别 3 或更高级别。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:25:10.347

*这个答案在撰写本文时是正确的，但可能会随着 FireMonkey 的发展而改变：*

您不能使用 PixelShader 或 ShaderModel 3.0 或更高版本，因为 FireMonkey（在 Windows 下）使用 DirectX 9，而 PixelShader/ShaderModel 3.0+ 是 DirectX 10 的功能。如果您查看`Winapi.D3DX9.pas`（第 2871-2872 行），您将能够确认这`ps_3_0`在这里不是一个有效的令牌，而在`Winapi.D3DX10.pas`（第 3224-3230 行）它是受支持的。

因此，您能够使用 PixelShader/ShaderModel 3.0+ 的唯一方法是自己修改 FireMonkey 以使用 DirectX 10 上下文，或者请求（在其他人的支持下）Embarcadero 为您更改此设置。

# jquery - SWF 上传和 jquery

> ID：10165601
> 
> 赞同：0
> 
> 时间：2012-04-15T20:04:43.197
> 
> 标签：jquery, swfupload

我正在使用 swfupload 上传文件。问题是当我上传图片时，它会刷新页面。我想要的是当用户上传图片时，它会在上传的页面上显示图片。

我怎样才能做到这一点？我可以使用 jQuery 来防止刷新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:15:19.810

swfupload 不会自行刷新页面...您必须在回调中实现代码并在上传完成时更改图像 src ...没有您显示您的代码我不能说太多

# actor - 我的 Akka 演员的属性是否应该标记为@volatile？

> ID：10165603
> 
> 赞同：10
> 
> 时间：2012-04-15T20:04:53.017
> 
> 标签：actor, volatile, akka

这个问题类似于[是否应该将我的 Scala 演员的属性标记为 @volatile？](https://stackoverflow.com/questions/1031167/should-my-scala-actors-properties-be-marked-volatile)但不确定答案是否相同。

例如，如果配置了 fork-join 调度程序并且参与者的状态未由 @volatile 标记，是否保证参与者的状态将通过缓存层次结构从一个内核（或处理器）传播到另一个内核（或处理器）如果 fork /join 工作线程在不同的内核（或处理器）上运行？

PS 在 JSR133 之后，只有一个对任何易失性变量的写入/读取操作需要将缓存刷新到主内存并在其他内核（或处理器）上运行的其他线程上查看该线程的所有先前非易失性写入，这对吗？如果是，则可以回答，因为扫描工作队列会从/写入 FJ 任务的易失性变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:31:45.050

不，您不应该将 volatile 放在您的演员字段上。为什么？

> 如果参与者在处理消息时对其内部状态进行了更改，并在稍后处理另一条消息时访问该状态。重要的是要意识到，使用 Actor 模型，您无法保证同一个线程将为不同的消息执行同一个 Actor。

都在这里：[http ://doc.akka.io/docs/akka/2.0/general/jmm.html](http://doc.akka.io/docs/akka/2.0/general/jmm.html)

关于您的 PS，您需要读取/写入相同的易失性字段以获得发生前的保证。阅读“不稳定的捎带”

# silverlight - WP7 Silverlight 的代码从哪里开始？

> ID：10165606
> 
> 赞同：0
> 
> 时间：2012-04-15T20:05:12.277
> 
> 标签：silverlight, windows-phone-7

在 C# 控制台应用程序 windows 应用程序中，我们知道代码从 main 函数开始执行。

在 WP7 silverlight 中没有 main 函数。如果有人可以请告诉我代码从哪里开始执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:16:43.690

App.xaml.cs 你会发现构造函数 App() 类似于 main()。还有几种方法指的是特定的应用程序事件（启动、激活、停用、关闭......）这个[链接](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)是一个很好的入门工具包。

# java - SMS Logger：方法 getContentResolver() 未为该类型定义

> ID：10165609
> 
> 赞同：1
> 
> 时间：2012-04-15T20:05:23.583
> 
> 标签：java, android, sms, broadcastreceiver

我是 android 编程的初学者，我正在尝试创建将短信记录到文件的应用程序。我遇到“方法 getContentResolver() 对于 SMSObserver 类型未定义”的问题，我不知道为什么......

这是代码：

```
public class SMSObserver extends ContentObserver
{
SMSLogger smsLogger;

public SMSObserver(SMSLogger smsLogger) {
    super(new Handler());
    this.smsLogger = smsLogger;
}

@Override
public void onChange(boolean selfChange) {
    super.onChange(selfChange);
    querySMS();
}

protected void querySMS() {
    Uri uriSMS = Uri.parse("content://sms/");
    Cursor cur = getContentResolver().query(uriSMS, null, null, null, null);
    cur.moveToNext();
    String body = cur.getString(cur.getColumnIndex("body"));
    String add = cur.getString(cur.getColumnIndex("address"));
    String time = cur.getString(cur.getColumnIndex("date"));
    String protocol = cur.getString(cur.getColumnIndex("protocol"));
    String out = "";
    if (protocol == null)
        out = "Sending to "+add + ".Time:"+time +" - "+body;
    else out = "Receive from "+add + ".Time:"+time +" - "+body;
    /*logging action HERE...*/
}
} 
```

和进口：

```
import android.database.ContentObserver;
import android.os.Handler;
import android.content.ContextWrapper;
import org.json.JSONException;
import org.json.JSONStringer;
import android.content.ContentResolver;
import android.content.Intent;
import android.content.BroadcastReceiver;
import android.database.Cursor;
import android.net.Uri;
import android.content.Context;
import android.os.RemoteException;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds;
import android.provider.ContactsContract.PhoneLookup; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T20:26:44.763

您只能在 Context 对象上调用该方法。尝试这个：

```
public class SMSObserver extends ContentObserver
{
SMSLogger smsLogger;
Context context;

public SMSObserver(SMSLogger smsLogger, Context c) {
    super(new Handler());
    context = c;
    this.smsLogger = smsLogger;
}

protected void querySMS() {
    Uri uriSMS = Uri.parse("content://sms/");
    Cursor cur = context.getContentResolver().query(uriSMS, null, null, null, null);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:40:38.333

扩展应用程序以保持上下文并静态访问它或者您可以将函数调用传递给 ContentResolver 中的每个库函数。目前您没有上下文引用，因此您不能在此处调用 getContentResolver()。

# visual-studio-2010 - 为 VisualStudio 2010 创建语言服务

> ID：10165610
> 
> 赞同：1
> 
> 时间：2012-04-15T20:05:28.020
> 
> 标签：visual-studio-2010, visual-studio-addins, vs-extensibility

我想为 Visual Studio 2010 构建语言服务。我首先尝试遵循[MSDN](http://msdn.microsoft.com/en-us/library/bb166533.aspx)的教程和文档。

问题是我没有成功地做到这一点（我稍后会解释我的问题）。所以我深入研究了现有的实现，我发现[了Ook！](http://resources.devx.com/MSDN/Article/45058)和[lua](http://vslua.codeplex.com/)。这两个项目都没有使用我在 MSDN 上找到的教程或文档，而是基于 MEF。Lua 仅在以前的 Visual Studio 版本中使用它。

所以我想知道我是否使用过时的方法来创建语言服务（但文档的目标是 Visual Studio 2010），或者有不同的方法可以做到这一点，这取决于需要。

就我而言，我有一种不需要编译成 cli 的语言，但我想要一个具有着色、语法警告和错误、智能感知的编辑器......

我提到的问题是，在启动 exp 实例时，没有带有我的文件扩展名的文本编辑器，并且 Visual Studio 开始有很多滞后。语言服务使用 3 个属性注册：ProvideServiceAttribute、ProvideLanguageServiceAttribute 和 ProvideLanguageServiceExtension。也在 Package intialize 方法中初始化，就像在[Proffer the Language](http://msdn.microsoft.com/en-us/library/bb166498.aspx) ...中提到的那样。当我尝试使用我的扩展名打开文件时加载包，语言服务被初始化。

所以我不明白为什么我不工作，请你帮我了解语言服务是如何工作的，以及实现它的最佳方式是什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:42:49.223

很有可能你的`IScanner`实现有一个无限循环，发生在我身上。

# javascript - window.scrollBy 在 Chrome 和 Safari 中的哈希/锚滚动之前触发

> ID：10165620
> 
> 赞同：3
> 
> 时间：2012-04-15T20:07:23.493
> 
> 标签：javascript, jquery

这是一个令人沮丧的问题。我在 jQuery 加载块内的脚本中使用以下内容：

```
window.scrollBy(0,-100); 
```

我这样做是因为我通过滚动将 div 设置为固定在页面顶部，并且此行将进行补偿，以便您单击的锚点 (http://page.html#foo) 可以看到它应该出现的位置是。

它在 Firefox 中运行良好。在 Chrome 和 Safari 中，它不会，因为加载事件似乎发生在浏览器滚动到锚点之前。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T15:44:51.023

我遇到了同样的问题，这是我的工作。（实际上是一个黑客）

```
// Clicking on the navigation bar
$('.navbar-nav a').click(function(e) {
    // Blocking default clicking event
    e.preventDefault();
    // Scroll to the anchored element with a delay
    setTimeout(function() {$('#talks')[0].scrollIntoView();}, 5);
    // Compensate the scrolling with another delay
    setTimeout(function() {scrollBy(0, -$('#info').height())}, 10);
} 
```

这似乎是一个 Safari 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-05T13:41:35.913

我也遇到过这个问题。使用超时，即使是 0 毫秒，似乎也可以在没有明显跳跃的情况下工作。尝试这个：

```
window.setTimeout()
{
    window.scrollBy(0, -100);
}, 0); 
```

# c++ - 如何将二维数组分配给**指针？

> ID：10165627
> 
> 赞同：6
> 
> 时间：2012-04-15T20:07:55.893
> 
> 标签：c++, arrays, pointers

如何将二维数组分配给**指针？这就是我想做的想法

```
int arrray [2][3];
int **pointer = array;
so pointer[0][1]= 1; 
```

所以有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T20:09:55.470

像这样声明指针：

```
int (*pointer)[3] = array; 
```

但这在 C++ 中是非常**讨厌的。**如果您解释了您的一般目的，也许您可​​以找到更好的解决方案（涉及向量和诸如此类的解决方案）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T20:15:37.610

简单的答案是你不能。二维数组是保存每一行的连续内存块，而指向指针的指针可以引用指向包含整数的不同内存位置的指针所在的内存位置。

另一方面，您可以创建一个单独的数据结构，以您想要的方式保存指向元素的指针（即创建一个指针数组，将这些指针初始化为每行的开头，并使用指向该指针数组的指针as `pointer`)，但它根本没有用，反而会使一切不必要地复杂化。

这个问题可能来自普遍的误解，即数组和指针是*相同*的，而事实并非如此。数组可以衰减为指向数组第一个元素的指针（并且会经常这样做），但该指针的类型是第一个元素的类型。在二维数组中，第一个元素的类型是内部数组，而不是基本元素类型。

# python - 将电话号码范围列表转换为前缀列表

> ID：10165629
> 
> 赞同：3
> 
> 时间：2012-04-15T20:08:20.487
> 
> 标签：python, phone-number

我有一个电话号码范围，例如：

3331234-3332345

我需要编写一个将其转换为前缀列表的函数：

```
3331234
...
3331239
333124
...
333129
33313
...
33319
33320
...
33322
333231
333232
333233
3332341
...
3332345 
```

问题没那么容易。我不需要获取范围开始和结束之间的数字列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-28T12:23:01.517

My working code. It not very quick, too. Optimizations welcome.

```
def diap_to_prefix(a, b):
    lst = ['%0*d'%(max(len(str(a)), len(str(b))), x) for x in range(int(a), int(b)+1)]
    new_lst = []

    while len(lst) != len(new_lst):
        lst = new_lst or lst
        new_lst = []

        c = lst[0]
        tmp_lst = [c]

        for i in lst[1:]:
            if c[:-1] == i[:-1]:
                c = i
                tmp_lst.append(c)
            else:
                if len(tmp_lst) == 10:
                    new_lst.append(c[:-1])
                else:
                    new_lst.extend(tmp_lst)

                c = i
                tmp_lst = [c]

        if len(tmp_lst) == 10:
            new_lst.append(c[:-1])
        else:
            new_lst.extend(tmp_lst)

    return lst 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T13:52:21.053

My new more optimal solution (py3.4)

```
def diap_to_prefix(a, b):
    def inner(aa, bb, p):
        if p == 1:
            if a <= aa <= b:
                yield aa
            return

        for d in range(aa, bb + 1, p):
            if a <= d and d + p - 1 <= b:
                yield d // p
            elif not (bb < a or aa > b):
                for i in range(10):
                    yield from inner(d + i * p // 10, d + (i + 1) * p // 10 - 1, p // 10)

    a, b = int(a), int(b)
    p = 10**(max(len(str(x)) for x in (a, b)) - 1)
    yield from inner(a // p * p, b // p * p + p - 1, p) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:17:20.543

您需要获取以“-”分隔的值的公共前缀，因此：

*   用于`.split`获取这些并遍历它们，直到找到不同之处
*   用零完成第一个值（以获得最小的数字），直到获得`phone_len`数字并为最大值（用九）做同样的事情
*   然后，你有一个简单的数字范围
*   遍历它们并将它们转换为字符串

这里是：

```
phone_len = 7
R = "33312345-3332345".split("-")

prefix = ""
for i in range(len(R[0])):
    if R[0][i] == R[1][i]:
        prefix += R[0][i]
    else:
        break

m = int(R[0]+"0"*(phone_len-len(R[0])))
M = int(R[1]+"9"*(phone_len-len(R[0])))

phones = [str(n) for n in range(m, M+1)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T01:21:17.680

Here's a sketch of one way to handle this problem. I've used ellipses to mark the spots where you'll need to fill in the details explained in the comments. I'd write a function to derive the initial value of 'maxpower', everything else is simple enough to be written inline.

```
firstnumber = 3331234
lastnumber = 3332345

current = firstnumber

while current <= lastnumber:

    # Find the largest power of 10 that exactly divides 'current'.
    # Call this value 'maxpower'.  'maxpower' is a candidate for the
    # size of the block of numbers that will be represented by the 
    # next output value.

    maxpower = ...     # 1, 10, 100, 1000, 10000, and so on

    # If a block of size 'maxpower' would take us past the 
    # 'lastnumber', we can't use that block size.  We must try a
    # smaller block.  Divide 'maxpower' by 10 until the block size 
    # becomes acceptable.

    while (current + maxpower) > ... :
        maxpower /= 10

    # Now 'maxpower' is the largest acceptable size for the next 
    # block, so the desired prefix is 'current' divided by 'maxpower'.
    # Emit that value, then add 'maxpower' to 'current' to get the new
    # 'current' value for the next iteration.

    print ...
    current += maxpower 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:38:06.457

My working code. It not very quick, but working. Optimizations welcome.

```
def fill(root, prefix, value, parent, pkey):
    if len(prefix) > 1:
        if prefix[0] in root:
            fill(root[prefix[0]], prefix[1:], value, root, prefix[0])
            if pkey:
                if len(parent[pkey]) == 10:
                    parent[pkey] = value
        elif type(root) == type({}):
            root[prefix[0]] = {}
            fill(root[prefix[0]], prefix[1:], value, root, prefix[0])
            if pkey:
                if len(parent[pkey]) == 10:
                    parent[pkey] = value
    elif type(root) == type({}):
        root[prefix[0]] = value
        if pkey:
            if len(parent[pkey]) == 10:
                parent[pkey] = value
    return root

def compact(prefixes, current):
    if not type(prefixes) == type({}):
        return [current]
    else:
        rlist = []
        for k, v in prefixes.iteritems():
            rlist.extend(compact(v, current + k))
            continue
        return rlist

if __name__ == '__main__':
    plist = {}
    for x in range(4440000, 4490000):
        fill(plist, str(x), 'value', plist, None)
    #print plist
    print compact(plist, '') 
```

# android - android重新启动应用程序作为主页按钮

> ID：10165637
> 
> 赞同：0
> 
> 时间：2012-04-15T20:09:21.937
> 
> 标签：android

经过数小时的搜索和阅读文章后，我无法像主页按钮重新启动它一样调用我停止的应用程序。所以我按下主页按钮，我的应用程序停止了。而且我的服务（来自其他包）只能启动我的应用程序的新实例（主要启动活动）。

```
Context context = this.getBaseContext();
PackageManager pm = context.getPackageManager();
Intent appStartIntent = pm.getLaunchIntentForPackage("main.application");
appStartIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(appStartIntent); 
```

如果可能的话，我想从我的服务中调用我的应用程序的 onResume - 我没有实现它。

我在我的活动中也尝试过这个：D ...

```
@Override
protected void onStop() {  
    super.onStop();
    super.onResume():
} 
```

最好的不起作用的解决方案 - 覆盖主页按钮

```
public boolean onKeyDown(int keyCode, KeyEvent event)
{       
    if (keyCode == KeyEvent.KEYCODE_BACK 
```

非常感谢您提前付出的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:20:56.657

不，不要做所有这些事情！请阅读[这个](http://developer.android.com/guide/topics/fundamentals/activities.html)。实现目标的唯一方法是利用 Activity 生命周期回调来保存/恢复状态。

# python - Django 不提供静态文件，出现 404 错误

> ID：10165638
> 
> 赞同：13
> 
> 时间：2012-04-15T20:09:22.573
> 
> 标签：python, css, django, url-routing

我似乎无法从我的模板中加载我的静态文件。我已经遵循了官方文档，但我一定遗漏了一些东西。

我的目录布局（由 Django 生成，大部分文件省略）：

```
myproject
  myproject
    settings.py
    urls.py
  static
    css
      bootstrap.css
      main.css
  templates
    base.html
  myapp1
  myapp2
  ...
  manage.py 
```

我的`settings.py`：

```
STATIC_URL = 'static/' 
```

我像这样引用我的样式表（来自我的模板）：

```
{% load staticfiles %}
<link rel="stylesheet" href="{% static "css/bootstrap.css" %}" type="text/css">
<link rel="stylesheet" href="{% static "css/style.css" %}" type="text/css"> 
```

这使得它一旦呈现（在 HTML 中）：

```
<link rel="stylesheet" href="static/css/bootstrap.css" type="text/css">
<link rel="stylesheet" href="static/css/style.css" type="text/css"> 
```

然而这些链接实际上并没有导致任何地方（当我访问它们时，我从 Django 收到 404 错误）。我觉得我可以通过在 中添加一些东西来解决这个问题`urls.py`，但我认为 Django 在您运行服务器时会自动执行此操作？我错过了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-15T20:31:05.983

您是否在 中定义了静态文件目录`settings.py`？

我猜你`'django.contrib.staticfiles',`在你安装的应用程序中有。

如果你还没有定义你的静态文件目录，你可以这样做：

```
import os.path

PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))

STATICFILES_DIRS = (
    os.path.join(PROJECT_ROOT, 'static'),
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T06:43:54.563

这是 django for windows 中静态/媒体/模板访问的有效解决方案，

设置.py

```
import os.path

STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join('static'),
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-21T19:35:29.110

通过在 settings.py 文件中添加“STATICFILES_DIRS”解决了我的问题

```
STATIC_URL = '/static/'
STATICFILES_DIRS = ( os.path.join('static'), ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T20:17:40.790

> 我以为 Django 在您运行服务器时会自动执行此操作？

你为什么这么想？如果您遵循官方文档，您将不会发现这一点。[在此处](https://docs.djangoproject.com/en/1.3/howto/static-files/#serving-static-files-in-development)阅读您必须做什么才能在开发中为他们服务。

还有一个问题。Your`STATIC_URL`是一个相对链接，因此浏览器*会将*其添加到现有页面 URL。因此，如果您在 page 上`/foo`，则`'static/css/style.css'`评估为`/foo/static/css/style.css'`.

确保它要么以`/`- ie `/static/`- 开头，要么是完整的 URL，即`http://myserver.com/static/`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T20:38:03.903

检查是否`STATICFILES_FINDERS`在您的`settings.py`

[https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#std:setting-STATICFILES_FINDERS](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#std:setting-STATICFILES_FINDERS)

的默认值`STATICFILES_FINDERS`足够好，但您有 2 个选择：

*   您需要在应用程序中包含静态文件，并且在您的应用程序中包含此应用程序`INSTALLED_APPS`

*   `STATICFILES_DIRS`或者如果期望行为是以下行为之一，则需要定义静态文件的路径`django.contrib.staticfiles.finders.FileSystemFinder`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-02T15:00:09.177

我也遇到了这个问题。我通过像这样修改href解决了这个问题：

```
<html>
<link rel="stylesheet" href="{{STATIC_URL}}css/bootstrap.css" type="text/css">
<link rel="stylesheet" href="{{STATIC_URL}}css/style.css" type="text/css"> 
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-30T10:21:31.480

确保您在正确的位置设置了静态文件夹，也就是说，如果它位于 app 文件夹中，那么您可以从这个有用的资源[1](https://www.pythonanywhere.com/forums/topic/2495/)中获得进一步的说明。

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2017-10-09T13:21:10.877

我的解决方案是`DEBUG = True`在设置中。

# vb.net - ForEach 迭代后出现意外的 IQueryable<> 值

> ID：10165640
> 
> 赞同：2
> 
> 时间：2012-04-15T20:09:41.783
> 
> 标签：vb.net, linq-to-sql, union

我很困惑。

我正在使用 VB.Net、Linq 和 DataContext。我的 DataContext 包含一个表“事务”。

我首先声明一个 IQueryable(Of transaction) 并将其分配给任何内容。我在 foreach 循环中构建谓词并使用 transactions.Where(predicate) 为 IQueryable 分配一个值。如果我执行 IQueryable.ToList()，我会在集合中获得一些项目。

但是，在循环的下一次迭代中， IQueryable.ToList() 给了我 0 个项目。

这真让我抓狂。我尝试将 LINQ to SQL Debug Visualizer 与 VS2010 一起使用，（我使用新参考重新编译了 2008 版本）但没有骰子 - 我看不到生成的 SQl 或 IQueryable 中的内容。

这是代码：

```
Dim groupQuery As IQueryable(Of transaction) = Nothing
For Each chosenCode As BillingCode In chosenGroup.BillingCodes
    Dim testRun As List(Of transaction) = Nothing
    If Not groupQuery Is Nothing Then
        testRun = groupQuery.ToList()
    End If
    Dim codePredicate = PredicateBuilder.True(Of transaction)()
    codePredicate = codePredicate.And(Function(i) i.code.Equals(chosenCode.Code))
    If Not chosenCode.Description Is Nothing Then codePredicate = codePredicate.And(Function(i) i.description.ToUpper().Contains(chosenCode.Description.ToUpper()))
    If Not chosenCode.Insurance Is Nothing Then codePredicate = codePredicate.And(Function(i) i.v_patient.insname.ToUpper().Contains(chosenCode.Insurance.ToUpper()))
    If Not chosenCode.PriceFloor Is Nothing Then codePredicate = codePredicate.And(Function(i) i.charge >= chosenCode.PriceFloor)
    If Not chosenCode.PriceCeiling Is Nothing Then codePredicate = codePredicate.And(Function(i) i.charge <= chosenCode.PriceCeiling)

    Dim testRun2 As List(Of transaction) = Nothing
    Dim testRun3 As List(Of transaction) = Nothing
    If groupQuery Is Nothing Then
        groupQuery = vf.transactions.Where(codePredicate)
    Else
        testRun2 = groupQuery.ToList()
        groupQuery = groupQuery.Union(vf.transactions.Where(codePredicate))
        testRun3 = groupQuery.ToList()
    End If
Next 
```

我会很感激任何帮助。谢谢。

**编辑：** “testRun”变量仅供我调试代码。我想要做的是`groupQuery = groupQuery.Union(QUERY FROM THIS ITERATION)` 不执行查询，直到我在代码中再转换几次。对困惑感到抱歉。

**答案编辑：** 我收到的两个答案都有助于最终解决方案。我最终都调用`ToList()`了每次迭代，并使用`Concat()`而不是`Union()`. 我发现每次运行`Union()`生成的 SQL 都会包含`@variable`用于`chosenCode`. 在我运行查询时，生成的 SQL 中可能有 10 或 20 组参数（每次迭代一组`chosenCode`），但只​​有最后一组参数在运行时提供给 SQL Server。不要问我为什么。这甚至没有得到证实，只是通过实验得出的结论。一旦我弄清楚了这一点，我就无法弄清楚如何获取所有要传递的参数。所以，我放弃了，每次迭代都对 SQL Server 运行查询`chosenCode`. 在完全构建之前，我仍然想知道如何在不运行查询的情况下执行此操作。

我没有使用 .，而是`IQueryable`使用强类型`List(Of transaction)`来存储`ToList()`. 然后，我在其余代码中使用 Linq to Objects 操作该列表。

我还发现 using在生成的 SQL 中`Union()`生成了一条`UNION`语句，但这并没有给我预期的结果。因此，我使用`Concat()`了 ，它在生成的 SQL 中生成了一条`UNION ALL`语句，这正是我所追求的。

谢谢大家的帮助。这是代码：

```
 For Each chosenGroup As BillingGroup In chosenGroups
        Dim groupResults As List(Of transaction) = Nothing
        For Each chosenCode As BillingCode In chosenGroup.BillingCodes

            Dim codePredicate = PredicateBuilder.True(Of transaction)()
            codePredicate = codePredicate.And(Function(i) i.code.Equals(chosenCode.Code))
            If Not chosenCode.Description Is Nothing Then codePredicate = codePredicate.And(Function(i) i.description.ToUpper().Contains(chosenCode.Description.ToUpper()))
            If Not chosenCode.Insurance Is Nothing Then codePredicate = codePredicate.And(Function(i) i.v_patient.insname.ToUpper().Contains(chosenCode.Insurance.ToUpper()))
            If Not chosenCode.PriceFloor Is Nothing Then codePredicate = codePredicate.And(Function(i) i.charge >= chosenCode.PriceFloor)
            If Not chosenCode.PriceCeiling Is Nothing Then codePredicate = codePredicate.And(Function(i) i.charge <= chosenCode.PriceCeiling)

            If groupResults Is Nothing Then
                groupResults = vf.transactions.Where(codePredicate).ToList()
            Else
                groupResults.AddRange(vf.transactions.Where(codePredicate).ToList())
            End If
        Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:17:14.143

我对 PredicateBuilder 不熟悉，但我认为您正在`chosenCode`那里捕获（关闭）变量。

这意味着你`testRun3`的填充了该运行的 selectedCode，但在下一次迭代中，testRun 填充了*新*的selectedCode。

解决方法很简单，在此`groupQuery = groupQuery.ToList()`之前做一个`Next`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:40:23.127

我怀疑`groupQuery.Union(vf.transactions.Where(codePredicate))`可能正在生成不返回任何记录的 sql。您可能希望在 Management Studio 中执行相同的查询。

# ios - 如何从 iOS 模拟器获取控制台日志？

> ID：10165641
> 
> 赞同：282
> 
> 时间：2012-04-15T20:09:43.953
> 
> 标签：ios, console, ios-simulator

如果我不在 Xcode 中测试应用程序，我想看看 iOS 模拟器中会发生什么。

例如，如果我在 Safari 模拟器中打开一个链接，请查看控制台中发生的情况，或者如果我安装了一个 Web 应用程序，请查看我在控制台中按下的链接。

我怎样才能做到这一点？

我想在 Xcode 或终端中看到它，但如果我需要使用其他软件，这不是问题。

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2012-04-15T20:12:01.470

iOS 模拟器 > 菜单栏 > 调试 > 打开系统日志

* * *

老办法：

iOS Simulator 将其日志直接打印到标准输出，因此您可以看到日志与系统日志混合在一起。

打开终端并输入：`tail -f /var/log/system.log`

然后运行模拟器。

编辑：

这停止了​​在 Mavericks/Xcode 5 上的工作。现在您可以在其自己的文件夹中访问模拟器日志：`~/Library/Logs/iOS Simulator/<sim-version>/system.log`

您可以使用 Console.app 来查看它，或者只是做一个尾巴（例如 iOS 7.0.3 64 位）：

`tail -f ~/Library/Logs/iOS\ Simulator/7.0.3-64/system.log`

编辑2：

他们现在位于`~/Library/Logs/CoreSimulator/<simulator-hash>/system.log`

`tail -f ~/Library/Logs/CoreSimulator/<simulator-hash>/system.log`

* * *

## 回答 #2

> 赞同：246
> 
> 时间：2013-01-19T15:14:20.530

您可以通过桌面 Safari 查看 iOS 模拟器的控制台。它类似于您使用桌面 Safari 查看物理 iOS 设备控制台的方式。

每当模拟器运行并打开网页时，桌面 safari 的“开发”菜单下都会有一个选项，可让您看到 iOS 模拟器控制台：

开发 -> iPhone 模拟器 ->*站点名称*

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2014-07-22T15:58:33.897

模拟器中有一个选项可以打开`console`

```
Debug > Open System Log 
```

或使用

`keyboard shortcut: ⌘/`

[![模拟器菜单截图](../Images/2ec7ed228a8ff933da84ff10cfa0606c.png)](https://i.stack.imgur.com/PWZI3.png)

* * *

## 回答 #4

> 赞同：93
> 
> 时间：2014-09-13T11:55:47.177

# iOS 8 和 iOS 9

在 iOS 8 和 iOS 9 下，这个位置现在是：

```
~/Library/Logs/CoreSimulator/<DEVICE_CODE> 
```

因此，以下将起作用：

```
tail -f ~/Library/Logs/CoreSimulator/<DEVICE_CODE>/system.log 
```

`DEVICE_CODE`可以通过以下终端命令找到该值：

```
instruments -s devices 
```

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2017-01-27T05:28:33.477

你不应该依赖`instruments -s`. 官方支持的从命令行使用模拟器的工具是`xcrun simctl`.

可以使用 找到设备的日志目录`xcrun simctl getenv booted SIMULATOR_LOG_ROOT`。即使位置发生变化，这也始终是正确的。

现在事情正在发展`os_log`，在主机 Mac 上打开 Console.app 会更容易。启动的模拟器应该在左侧显示为日志源，就像物理设备一样。您还可以在启动的模拟器中运行日志命令：

```
# os_log equivalent of tail -f
xcrun simctl spawn booted log stream --level=debug

# filter log output
xcrun simctl spawn booted log stream --predicate 'processImagePath endswith "myapp"'
xcrun simctl spawn booted log stream --predicate 'eventMessage contains "error" and messageType == info'

# a log dump that Console.app can open
xcrun simctl spawn booted log collect

# open location where log collect will write the dump
cd `xcrun simctl getenv booted SIMULATOR_SHARED_RESOURCES_DIRECTORY` 
```

**如果您想在模拟器中的网页上使用 Safari 开发工具（包括 JS 控制台）**：启动其中一个模拟器，打开 Safari，然后在您的 Mac 上转到 Safari，您应该会在菜单中看到模拟器。

您可以在模拟器中打开一个 URL，方法是将其从 Safari 地址栏中拖放到模拟器窗口中。您也可以使用`xcrun simctl openurl booted <url>`.

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2015-01-20T12:48:30.677

如果您使用的是**Swift**，请记住它`println`只会打印到调试日志（出现在 xCode 的调试区域中）。如果要打印到 system.log，则必须`NSLog`像过去一样使用。

然后你可以通过它的菜单查看模拟器日志，Debug > Open System Log... (cmd + /)

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2019-01-11T11:30:25.910

[[iOS 记录器]](https://stackoverflow.com/a/64786306/4770877)

您可以使用`Console`Mac 上的应用程序（在“设备”中选择您的设备）查看使用`NSLog`,发送`os_log`的日志消息`Logger`（您不会看到来自`print`函数的日志）。

另请检查（操作 -> 包含 <Info/Debug> 消息）

[![在此处输入图像描述](../Images/811b62a0c40a567cd76c7162aa3c90e3.png)](https://i.stack.imgur.com/aJOwk.jpg)

请注意，如果您想查看来自`WebView`(`UIWebView`或`WKWebView`) 的日志，您应该使用`Safary -> Develop -> device`

[[查找崩溃日志]](https://stackoverflow.com/a/62213419/4770877)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2013-07-26T19:02:55.237

拖尾`/var/log/system.log`对我不起作用。我通过使用找到了我的日志`Console.app`。他们在

`~/Library/Logs/iOS Simulator/{version}/system.log`

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-02-27T23:34:54.067

**XCode > 6.0 AND iOS > 8.0** 如果您的 XCode 版本 > 8.0，则以下脚本有效

我使用下面的小脚本将模拟器日志拖到系统控制台上。

```
#!/bin/sh
sim_dir=`xcrun instruments -s | grep "iPhone 6 (8.2 Simulator)" | awk {'print $NF'} | tr -d '[]'`
tail -f ~/Library/Logs/CoreSimulator/$sim_dir/system.log 
```

您可以将 Grep 中使用的模拟器类型作为参数传入。如上篇文章所述，根据 Xcode 版本，有 simctl 和 Instruments 命令可以查看可用的模拟器类型。查看可用设备/模拟器的列表。

```
xcrun instruments -s 
```

或者

```
xcrun simctl list 
```

现在您可以将设备代码或模拟器类型作为参数传递给脚本，并将 grep 中的“iPhone 6 (8.2 Simulator)”替换为 $1

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-02T00:13:59.460

在 Xcode 中：查看->调试区域->激活控制台

[![在此处输入图像描述](../Images/e00eb76f310a4d328556f9f92f486d6b.png)](https://i.stack.imgur.com/KmwTf.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-28T06:17:19.180

您可以使用 Safari Technology Preview 应用程序查看 Simulator 控制台窗口，包括 Safari Web Inspector 和所有 Web 开发工具。在模拟器上的 Safari 中打开您的页面，然后转到 Safari Technology Preview > Develop > Simulator。

[![网页开发工具](../Images/c52e2a09065e2befb19fb32a70f53cdf.png)](https://i.stack.imgur.com/nFim3.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-30T19:16:08.550

下载 Safari 技术评论。在模拟器运行的情况下，选择开发 > 模拟器 > localhost

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-27T16:31:18.293

否`NSLog`或`print`内容将写入`system.log`，可以通过`Simulator -> Debug -> Open System log`Xcode 11 上的 Select 打开。

我想了一个办法，将日志写入文件并`xx.log`用. 打开`Terminal.app`。然后日志将`Terminal.app`生动呈现。

我使用[CocoaLumberjack](https://github.com/CocoaLumberjack/CocoaLumberjack)实现了这一点。

## 步骤1：

添加`DDFileLogger` `DDOSLogger`和打印日志路径。`config()`应在 App 午餐时调用。

```
static func config() {
    #if DEBUG
    DDLog.add(DDOSLogger.sharedInstance) // Uses os_log
    let fileLogger: DDFileLogger = DDFileLogger() // File Logger
    fileLogger.rollingFrequency = 60 * 60 * 24 // 24 hours
    fileLogger.logFileManager.maximumNumberOfLogFiles = 7
    DDLog.add(fileLogger)
    DDLogInfo("DEBUG LOG PATH: " + (fileLogger.currentLogFileInfo?.filePath ?? ""))
    #endif
} 
```

## 第2步：

替换`print`或。`NSLog`_`DDLogXXX`

## 第 3 步：

```
$ tail -f {path of log} 
```

在这里，消息将生动地呈现在 Terminal.app 中。

> 还有一件事。如果没有任何消息注销，请确保`Environment Variables`-> `OS_ACTIVITY_MODE`ISNOT 禁用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-12-07T17:27:15.490

我可以直接通过 iOS 模拟器打开日志：`Debug -> Open System Log...`不确定何时引入，因此可能不适用于早期版本。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-02T14:22:26.350

查看控制台日志的最简单方法是添加`consolelogs`为参数：

`ionic cordova run ios -l --consolelogs`

您将能够在终端中看到控制台日志。

# c# - 我如何从嵌套中获取文本 使用 html 敏捷包在外部 html 中标记？

> ID：10165647
> 
> 赞同：0
> 
> 时间：2012-04-15T20:11:39.393
> 
> 标签：c#, html, xpath, html-agility-pack

我正在尝试从外部站点获取一些文本。我要获取的文本嵌套在段落标记中。div 有一个类值

html代码片段：

```
<div class="discription"><p>this is the text I want to grab</p></div> 
```

当前的 C# 代码：

```
public String getDiscription(string url)
{
    var web = new HtmlWeb();
    var doc = web.Load(url);

    var nodes = doc.DocumentNode.SelectNodes("//div[@class='discription']");

    if (nodes != null)
    {
        foreach (var node in nodes)
        {
            string Description = node.InnerHtml;
            return Description;
        }
    } else
      {
       string error = "could not find text";
       return error;
      }
} 
```

我不明白的是 xpath 的语法`//div[@class='discription']`我知道它是错误的 xpath 应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:15:56.593

使用`//div[@class='discription']/p`.

分解：

```
//div                    - All div elements
[@class='discription']   - With a class attribute whose value is discription
/p                       - Select the child p elements 
```

# out-of-memory - Apache Pig：OutOfMemory 异常与本地模式下的简单 GROUP BY

> ID：10165648
> 
> 赞同：4
> 
> 时间：2012-04-15T20:12:00.687
> 
> 标签：out-of-memory, apache-pig

当我尝试在一个很小 (3KB)、随机生成的示例数据集上执行一个非常简单的 GROUP BY 时，我从 Pig 收到了 OutOfMemory 异常。

猪脚本：

```
$ cat example.pig
raw =
LOAD 'example-data'
    USING PigStorage()
    AS (thing1_id:int,
        thing2_id:int,
        name:chararray,
        timestamp:long);

grouped =
GROUP raw BY thing1_id;

DUMP grouped; 
```

数据：

```
$ cat example-data
281906  13636091    hide    1334350350
174952  20148444    save    1334427826
1082780 16033108    hide    1334500374
2932953 14682185    save    1334501648
1908385 28928536    hide    1334367665
[snip]

$ wc example-data
 100  400 3239 example-data 
```

开始了：

```
$ pig -x local example.pig

[snip]

java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:949)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:674)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)

[snip] 
```

还有一些额外的信息：

```
$ apt-cache show hadoop | grep Version
Version: 1.0.2

$ pig --version
Apache Pig version 0.9.2 (r1232772) 
compiled Jan 17 2012, 23:49:20

$ echo $PIG_HEAPSIZE
4096 
```

在这一点上，我觉得我一定做错了什么，因为我看不出 3 kB 的文本会导致堆填满的任何原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:49:21.180

检查这个：[链接] [http://sumedha.blogspot.in/2012/01/solving-apache-pig-javalangoutofmemorye.html](http://sumedha.blogspot.in/2012/01/solving-apache-pig-javalangoutofmemorye.html)

尼尔，你是对的，让我解释一下：在 bin/pig 脚本文件中，源代码是：

JAVA_HEAP_MAX=-Xmx1000m

# 检查可能覆盖默认参数的环境变量

如果 [ "$PIG_HEAPSIZE" != "" ]; 然后 JAVA_HEAP_MAX="-Xmx""$PIG_HEAPSIZE""m" fi

它仅使用 -Xmx 开关将 Java_heap_size 设置为 maxium（“x”），但我不知道为什么此脚本覆盖不起作用，这就是原因，我要求您使用参数直接指定 java 堆大小为在链接中指定。我没有时间检查为什么会出现这个问题。如果有人有想法，请在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:20:15.920

我玩弄了一段时间，最后从 hadoop/pig 的 debian 包切换到原始 tarball，问题就消失了。不知道该怎么做:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:33:28.377

您的猪作业在[MapTask.java 中的以下代码失败：](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.2/src/mapred/org/apache/hadoop/mapred/MapTask.java?view=markup)

```
931   final float recper = job.getFloat("io.sort.record.percent",(float)0.05);
932   final int sortmb = job.getInt("io.sort.mb", 100);
...
945   // buffers and accounting
946   int maxMemUsage = sortmb << 20;
947   int recordCapacity = (int)(maxMemUsage * recper);
948   recordCapacity -= recordCapacity % RECSIZE;
949   kvbuffer = new byte[maxMemUsage - recordCapacity]; 
```

所以我建议你检查和的配置值是什么`io.sort.mb`，`io.sort.record.percent`以及是否遵循上述逻辑，`maxMemUsage - recordCapacity`这是否接近或大于你配置的 JVM 堆大小（4096 MB）

# javascript - Javascript：替换所有字符串问题

> ID：10165650
> 
> 赞同：4
> 
> 时间：2012-04-15T20:12:05.930
> 
> 标签：javascript, replace, replaceall

我不知道如何在 Javascript 中进行*全部替换。*

我处于特殊情况，因为我有一张这样的*替换地图*：

```
 :)   ->  <img src="smile.png" title=":) ">
  :(   ->  <img src="sad.png" title=":(">
  >:(  ->  <img src="angry.png" title=">:("> 
```

我目前正在这张地图上循环，对于每个条目，我使用`string.replace(from, to)`. 问题是我无法替换，例如，`>:(`因为`:(`已经被第二个条目替换了。如果我反转地图，那么`:(`in`title`属性将被替换，导致真正的混乱。

希望你了解我的情况。我需要像`str_replace`带有数组参数的 PHP 之类的东西，它可以一键进行多次替换。

如果有帮助，我正在使用 Mootools。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:24:14.347

我会使用`preg_replace_callback`带有正则表达式转义的 php 的类似物。

```
var putSmiles = (function(){
  // init part
  var smilesMap = {
    ':)': "smile",
    ':(': "sad",
    '>:(': "angry"
  }
  if (!('escape' in RegExp)) {
    RegExp.escape = function(str) {
      return str.replace(/./g, function(m){
        // IE (at least 8) doesn't support .substr(-4), hence MOAR regexes!
        return "\\u" + ("0000" + m.charCodeAt(0).toString(16)).match(/.{4}$/)[0];
      });
    }
  }
  var a = [];
  for (var s in smilesMap) a.push(RegExp.escape(s));
  // sort in such way, if b is substring of a, b should follow a.
  a.sort(function(a,b){ return -a.indexOf(b) }); 
  var re = new RegExp(a.join('|'), 'g');
  // actual function 
  return (function(text) {
    return text.replace(re, function(m){
      return '<img src="' + smilesMap[ m ] + '.png" title="' + m + '">';
    });
  })
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:21:00.147

```
var map = {
  ":)"  : '<img src="smile.png" title=":)">',
  ":("  : '<img src="sad.png" title=":(">',
  ">:(" : '<img src="angry.png" title=">:(">',
};
str.replace( />:\(|:\(|:\)/g, function(found){
  return map[found];
}); 
```

通过使用一次匹配所有三个的正则表达式，您可以保证不会误击替代方案；使用函数形式`replace`允许您动态确定替换字符串是什么。

**编辑**：动态转义要在正则表达式中使用的文字字符串中的任何“特殊”字符：

```
RegExp.escape = function(text) {
  return text.replace(/[.?*^$()|{}\-\[\]\\]/g, "\\$&");
} 
```

# java - Java - 从组合对象调用 this.function()

> ID：10165651
> 
> 赞同：0
> 
> 时间：2012-04-15T20:12:23.553
> 
> 标签：java, composition

我有函数 dodaj(); 在 JFrame 中，在这个 JFrame 中我有 JPanel。要使用 JPanel 中的按钮，我正在使用 ActionListener。但是当有人点击按钮时，我想调用函数 dodaj(); 来自 JFrame。如果我在 JFrame 中有 ActionLIstener，我可以使用 this.dodaj();，但我在 JPanel 上有动作监听器，它是组合 od JFrame。我怎么能打电话给 dodaj(); 来自 ActionListener 的（JFrame 函数）在 JPanel 上？

感谢您阅读它，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:16:30.490

你没有提到它，但是你的 JFrame 和 JPanels 都是类，所以你的问题是你想从另一个类中的一个类调用一个方法？如果是这样，关键是获取对 JFrame 类的引用，并通过构造函数或方法参数将其传递给 JPanel 类。

例如：

```
class MyFrame extends JFrame {
   private MyPanel myPanel;

   public MyFrame() {
      myPanel = new MyPanel(this);
   }

   public void frameMethod() {
      System.out.println("in JFrame's frameMethod");
   }

}

class MyPanel extends JPanel {
   private MyFrame myFrame;
   private JButton someButton = new JButton("Button");

   public MyPanel(final MyFrame myFrame) {
      this.myFrame = myFrame;

      someButton.addActionListener(new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent arg0) {
            myFrame.frameMethod();
         }
      });
   }  
} 
```

顺便说一句，我不建议在没有充分理由（例如需要覆盖方法）的情况下扩展 JFrame 或 JPanel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:24:45.340

在您的 JPanel 中，您始终可以使用 getParent() 引用您的父 JFrame 容器。

如果你在 JPanel 上的 ActionListener 是一个匿名类，你可以直接使用 getParent() 方法直接引用它。如果您的 ActionListener 是一个单独的类，您可以在实例化它时将父引用传递给它。

# string - 字符串连接

> ID：10165652
> 
> 赞同：1
> 
> 时间：2012-04-15T20:12:30.747
> 
> 标签：string, lua, concatenation, string-formatting, ptokax

正如我在[上一个问题（链接）](https://stackoverflow.com/q/10089527/1190388)中询问的关于连接可变长度的多部分字符串，我使用了[rkhayrov](https://stackoverflow.com/users/200540/rkhayrov)在那里回答的方法，现在，我的函数如下所示：

```
local sToReturn = string.format( "\t%03s\t%-25s\t%-7s\n\t", "S. No.", "UserName", "Score" )
SQLQuery = assert( Conn:execute( string.format( [[SELECT username, totalcount FROM chatstat ORDER BY totalcount DESC LIMIT %d]], iLimit ) ) )
DataArray = SQLQuery:fetch ({}, "a")
i = 1
while DataArray do
  sTemp = string.format( "%03s\t%025s\t%-7d", tostring(i), DataArray.username, DataArray.totalcount )
  sToReturn = sToReturn..sTemp.."\n\t"
  DataArray = SQLQuery:fetch ({}, "a")
  i = i + 1
end 
```

但是，即使是现在， 的值`score`仍然没有按照要求的顺序排列。用户名的最大长度是 25。我`%025s`在 while 循环中使用过，因为我希望用户名右对齐，而`%-25s`is 是为了使单词`UserName`中心对齐。

## *编辑*

电流输出：

![电流输出！](../Images/5c8e35bd39a2a246da8898a721facaa6.png)

所需输出：

```
Displaying the list of top 5 chit-chatters.
S. No.      UserName                Score  
  1                     Keeda   9440   
  2                    _2.2_™   7675   
  3                       aim   7057   
  4                  KGBRULES   6770   
  5                     Guddu   6322 
```

我认为这是因为字体不同，但由于大多数客户端都有 Windows 7 默认字体（Tahoma/Verdana 为 11px），我至少需要最佳结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T04:56:35.343

> 我认为这是因为字体不同

这是。`string.format`通过插入空格来格式化。这*仅*适用于固定宽度的字体（即所有字符具有相同的宽度，包括空格）。

> 因为大多数客户端都有 Windows 7 默认字体（Tahoma/Verdana at 11px）

在什么？他们如何查看您的输出？您是否将其写入文本文件，然后他们在他们选择的编辑器（可能是记事本）中打开？那么这种方法根本行不通。

对您的输出要求了解不多，无法进一步指导您，但值得注意的是，每个人都有浏览器，因此 HTML 输出非常便携。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:41:37.103

我会从 string.format 中删除标签；并仅使用 %25s 提供的理由。不会完美，但可能会更接近。

如果可以，请使用固定宽度的字体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T20:22:38.400

string.format 不会截断 - 字段的宽度是最小的，而不是最大的。您必须自己将字符串截断为 25 个字符，例如`DataArray.username:sub(0,25)`.

# c++ - 引用表亲命名空间

> ID：10165657
> 
> 赞同：0
> 
> 时间：2012-04-15T20:12:51.310
> 
> 标签：c++, namespaces

我遇到了与[这个问题类似的问题](https://stackoverflow.com/q/6069920/170521)，但有一个额外的深度：

```
namespace root { namespace parent1 { namespace childa {
    class hard_to_get_at{};
}}}

namespace root { namespace parent2 { namespace childb {
    // how do I refer refer to namespace childb relative to the current namespace ?
    void someFunc()
    {
       parent1::childa::hard_to_get_at instance; // does not work
    }
}}} 
```

当我尝试上述方法时，出现错误

错误：'root::parent2::childb::parent1::childa' 尚未声明

我不明白为什么这不起作用，我的印象是应该的。我真的不想在`someFunc`函数中添加 using 声明。

这发生在启用了 c++0x 选项的 g++ 4.5 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:15:13.613

您缺少一些左括号：

```
namespace root { namespace parent1 { namespace childa { // <--- here
    class hard_to_get_at{};
}}}

namespace root { namespace parent2 { namespace childb { // <--- and here
    // how do I refer refer to namespace childb relative to the current namespace ?
    void someFunc()
    {
       parent1::childa::hard_to_get_at instance; // does not work
    }
}}} 
```

这是缩进很重要的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-12T18:53:52.190

老问题，但我有同样的问题（或相同的症状），至少在我的情况下，这个问题非常棘手，所以发布它以防它帮助某人。

基本上，如果`parent1`是`childb`从您的 TU 可见的任何地方内的命名空间，则查找将失败。例如：

```
namespace a { namespace b { namespace c {
class hard_to_get_at {};
}}}

namespace a { namespace d { namespace e {
namespace b {}  // May be in any included '.h'
void f() {
  b::c::hard_to_get_at foo;  // Previous line introduced a::d::e::b which is found before a::b, compiler doesn't backtrack when a::d::e::b::c isn't found.
}
}}} 
```

虽然我无法确定所有代码，但我的猜测是这实际上是 OP 的问题，因为错误消息“ `error: 'root::parent2::childb::parent1::childa' has not been declared`”表明编译器在寻找名称空间`root::parent2::childb::parent1`时找到了名称空间`childa`。

顺便说一句，这可以用更少的嵌套来复制，这使得问题更加明显：

```
namespace a {
class Foo {};
}

namespace b {
namespace a {}
void f() { a::Foo foo; }  // This will fail because 'a' here is '::b::a'
} 
```

# iphone - 为什么我的 managedObjectContext 回来了？

> ID：10165659
> 
> 赞同：0
> 
> 时间：2012-04-15T20:13:37.160
> 
> 标签：iphone, objective-c, core-data, cllocationmanager

我正在尝试使用 CLLocation Manager 来获取某人的位置，每当他们移动并将 lat、lng 和时间戳存储到核心数据中，然后将其显示在表视图选项卡中。但是，控制台中的输出始终通过抛出此日志指示 managedObjectContext 为空`coredataproject[12478:11903] After managedObjectContext: <NSManagedObjectContext: 0x7248230>`

这是我的 AppDelgate 实现文件中的相关代码

```
#import "AppDelegate.h"
#import "RootViewController.h"
#import "FirstViewController.h"

@implementation AppDelegate

@synthesize window;
@synthesize navigationController;

#pragma mark -
#pragma mark Application lifecycle

- (void)applicationDidFinishLaunching:(UIApplication *)application {

    // Configure and show the window.

     RootViewController *rootViewController = [[RootViewController alloc] initWithStyle:UITableViewStylePlain];

    NSManagedObjectContext *context = [self managedObjectContext];
    if (!context) {
        NSLog(@"Could not create context for self");
    }
    rootViewController.managedObjectContext = context;

    UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    self.navigationController = aNavigationController;

    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];

}

/**
 applicationWillTerminate: saves changes in the application's managed object context before the application terminates.
 */
- (void)applicationWillTerminate:(UIApplication *)application {

    NSError *error;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Handle the error.
        } 
    }
} 
```

这是 FirstViewController.M 代码，我在其中获取位置并将其存储在核心数据“事件”实体中

```
 - (void)viewDidLoad
{

    locationManager =[[CLLocationManager alloc] init];

    locationManager.delegate = self; 
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    [locationManager startUpdatingLocation];

-(void) locationmanager: (CLLocationManager *) manager
        didUpdateToLocation: (CLLocation *) newLocation
        fromLocation: (CLLocation *) oldLocation
{

    CLLocation *location = [locationManager location];
    if (!location) {
        return;
    }

    /*
     Create a new instance of the Event entity.
     */
    RootViewController *rootviewcontroller = [RootViewController alloc];    
    Event *event = (Event *)[NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:rootviewcontroller.managedObjectContext];

    // Configure the new event with information from the location.
    CLLocationCoordinate2D coordinate = [location coordinate];
    [event setLatitude:[NSNumber numberWithDouble:coordinate.latitude]];
    [event setLongitude:[NSNumber numberWithDouble:coordinate.longitude]];

    // Should be the location's timestamp, but this will be constant for simulator.
    // [event setCreationDate:[location timestamp]];
    [event setTimeStamp:[NSDate date]];

    // Commit the change.
    NSError *error;

    if (![rootviewcontroller.managedObjectContext save:&error]) {
        NSLog(@"Save Error");
    }

    //RootViewController *rootviewcontroller = [RootViewController alloc];
    [rootviewcontroller.eventsArray insertObject:event atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [rootviewcontroller.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    [rootviewcontroller.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];   

} 
```

最后是 RootViewController 文件，我试图在其中获取和显示核心数据中的内容。当我单击此选项卡时，控制台告诉我 managedObjectConsole 为 nill

```
- (void)viewDidLoad {

[super viewDidLoad];

if (managedObjectContext == nil) 
{ 
    managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    NSLog(@"After managedObjectContext: %@",  managedObjectContext);
}       
// Set the title.
self.title = @"Locations";

/*
 Fetch existing events.
 Create a fetch request; find the Event entity and assign it to the request; add a sort descriptor; then execute the fetch.
 */
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:managedObjectContext];
[request setEntity:entity];

// Order the events by time stamp, most recent first.
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[request setSortDescriptors:sortDescriptors];

// Execute the fetch -- create a mutable copy of the result.
NSError *error = nil;
NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
if (mutableFetchResults == nil) {
    NSLog(@"Mutable Fetch Results equals nill");
}

// Set self's events array to the mutable array, then clean up.
[self setEventsArray:mutableFetchResults]; 
```

}

一旦表格数据存在，我也会做更多的事情来组织表格数据，但我认为这不是问题所在。

我不确定为什么 managedObjectContext 中没有任何内容，因为它应该具有来自位置管理器的位置数据。我对核心数据不太熟悉，所以我可能只是做一些简单的错误，但任何见解都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:24:57.593

您的错误在于 didUpdateToLocation 方法。在那里你创建了一个新的 RootViewController 实例。您只需要将 newLocation 保存到 CoreData 并为此需要 MOC（而不是 RootViewController）。所以你需要找到一种方法将 MOC 传递给 FirstViewController。您可以像在 AppDelegate 中那样执行此操作，也可以像这样：

```
managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

为什么要在viewDidLoad中重置RootViewController的MOC？您已经在 applicationDidFinishLaunching 中传递了它！

我建议将 a`NSFetchedResultsController`用于表格视图。它会自动检测数据的变化并在需要时重新加载表，只需正确实现委托即可。这是一个有用的教程：[http ://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

# c# - 在 C# 中使用 OfType 过滤类型的对象

> ID：10165660
> 
> 赞同：6
> 
> 时间：2012-04-15T20:13:46.290
> 
> 标签：c#, linq, oftype

我有一个基类 Base，以及从它继承的 A/B 类。

```
public class Base
{
    int x;
}
public class A : Base
{
    int y;
}
public class B : Base
{
    int z;
} 
```

我尝试使用 OfType 过滤我需要的唯一对象，如下所示：

```
public static void RunSnippet()
{
    Base xbase; A a; B b;
    IEnumerable<Base> list = new List<Base>() {xbase, a, b};
    Base f = list.OfType<A>; // I need to get only the object A
    Console.WriteLine(f);
} 
```

当我编译代码时，我得到了这个错误：

> 错误 CS0428：无法将方法组“OfType”转换为非委托类型“Base”。您是否打算调用该方法？

代码有什么问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-15T20:15:32.653

有两个问题：

*   `OfType`返回`IEnumerable<T>`，而不是`T`
*   这是一种方法-您忘记了括号

也许你想要：

```
Base f = list.OfType<A>().FirstOrDefault(); 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:15:27.380

括号？

这是一个函数而不是运算符。

```
Base f = list.OfType<A>() 
```

查看参考：

[Enumerable.OfType(Of TResult) 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

# javascript - 当浏览器选项卡为背景时，setInterval 无故停止

> ID：10165662
> 
> 赞同：1
> 
> 时间：2012-04-15T20:13:59.130
> 
> 标签：javascript, ajax, setinterval

我正在开发一个应用程序，该应用程序使用 setInterval 每 2 分钟使用 AJAX 将当前时间戳发送到数据库。

但不知何故 setInterval 在几分钟后停止（我没有计算确切的时间），但我相信它发生在我不打开该浏览器的标签 20-30 分钟时。

```
function tmstmp() {
$.post("send_functions.php?act=time");
}

$(function() { 
setInterval(tmstmp, 60000);
}); 
```

如果该选项卡不在前台，setInterval 停止是正常的吗？

如果是，我怎样才能防止 setInterval 停止？或检查它是否停止？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-14T16:01:17.510

您应该尝试在页面启动时进行函数调用：

```
test(); 
```

然后循环该函数：

```
function test() {
    setTimeout(function() {
        // your code
        test();
    }, 2000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:17:01.690

没有代码 + 没有调试信息 = 很难判断出了什么问题。

只是为了确保将以下行添加到执行的代码（方法）中，`setInterval`并在 20-30 分钟后观察，如果您仍然在控制台中获得输出。

```
console.log('Yep! I am alive!'); 
```

**编辑：**除了尝试更改**tmstmp**方法以在执行 POST 请求后包含回调函数之外，可以是任何东西。这样你至少会知道它有效。

```
function tmstmp() {
    $.post("send_functions.php?act=time", function(data){
        console.log('Yep! I am alive!');
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:21:52.273

这不应该发生。浏览器确实可以将计时器分辨率降低到大约 1/s，但不会清除 setInterval。

您的代码中是否存在导致 的错误`clearInterval`？

# app-store-connect - 在顶级应用程序包装下找不到 info.plist 中指定的图标

> ID：10165664
> 
> 赞同：26
> 
> 时间：2012-04-15T20:14:17.040
> 
> 标签：app-store-connect

我正在尝试使用 Applicaton Loader 将我的二进制文件上传到 iTunes Connect。当我选择文件并点击发送时，它会发送大约一秒钟，然后弹出此错误，

> 在顶级应用程序包装下找不到 info.plist 中指定的图标：默认 -Landscape@2x~ipad.png

这是什么意思？我如何解决它？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-01T06:55:50.057

另一个可能导致问题的设置：您必须确保在构建阶段/捆绑资源下也可以找到图标文件

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-08T22:33:44.360

编辑您的项目 .plist 文件“作为源代码”，即在任何旧文本编辑器中打开它。然后手动编辑图标文件名，直到它们有意义。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-18T21:03:55.317

在`.plist`验证和存档以上传到 App Store 时区分大小写。

如果你有这个`.plist`：

```
icon-72@2X.png 
```

文件名不能

```
icon-72@2x.png 
```

由于 x 字符的大小写变化。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-17T06:35:25.923

我重命名文件并相应地更改 info.plist 中图标文件的名称，这个解决方案对我有用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-20T21:45:50.400

1.  清理你的构建
2.  确保文件实际上在文件系统上
3.  确保您可以在项目导航器中看到该文件。
4.  第 3 步很可能会失败。如果是这样，请将图标从查找器拖到项目导航器上。当被问到时，取消选中“复制 ..blabla”选项，因为由于文件已经存在于您将其拖到的位置，因此它会失败。一旦文件出现在 Project Navigator 中，您就应该是金色的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-22T09:56:01.723

还要检查您的项目文件夹中是否没有 2 个同名图标。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-03T12:34:31.383

我认为这个问题的答案会随着时间的推移而变化，因为 Apple 会不断更改应用程序验证规则。这些验证规则仅在您将应用提交到 AppStore 时才会出现。

在这种特殊情况下，我在 2012 年 8 月 3 日上传应用程序时发生了验证错误。

解决方案相当简单。我不得不移动到位于项目目录中嵌套的文件夹中的图标文件，一直到**TOP LEVEL**项目目录——其中包含项目文件。一旦我这样做并将文件读回我项目中的资源，验证错误就消失了。

当然，您应该检查这个问题不是由拼写错误的文件名引起的，即您的 plist 文件和文件系统上图标文件的真实名称之间的差异。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-09T17:28:04.320

另一个引起我注意的小问题是一个空字符串。我收到了神秘的失败消息...

```
Icon specified in the info.plist not found under the top level app wrapper: 
```

并发现这潜伏在我的 plist 中

```
<string></string> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-21T12:36:54.060

我是类似的问题。我有决心这样做

1/ 在你的 Target 中删除你的应用程序 Icone

2/ 重命名你的图标 ex：applicationNameSmall.png

3/ 在您的应用程序中添加您的图标。

这对我有用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-07-14T12:43:10.740

出现错误是因为 App Store 正在根据 yourProject-info.plist 检查图标文件的名称。如果它们不匹配，则会出现错误消息。

要解决此问题：转到 xcode 中的 yourProject-info.plist 并检查“icon-files”和“icon-files(IOS5)”数组。您需要确保每个字符串都与文件目录中的图标文件相对应。

更改或删除不匹配的字符串名称（我不得不删除一个空白字符串）。重建。正如其他海报所指出的，名称区分大小写，因此也要注意这一点。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-04T05:23:32.890

有时需要在某些图像编辑工具（例如 Adob​​ Photoshop）中打开 Icon.png 文件并将其另存为新图像。这工作正常。检查附加的图像有时图像属性不会通过手动重命名图像文件而改变。![见附图](../Images/f9be35b01e15a0a29857ffd86e3f3f8d.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-06T13:12:21.930

我有同样的问题。我去了 Targets->Build Phases 并从那里删除了我早早推送的旧（测试）图标。祝你好运：）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-06-24T13:51:29.563

1.  修复它建议的图像问题。
2.  清理你的项目。
3.  构建并运行以确保没有任何损坏。
4.  删除以前的存档
5.  创建一个新存档（产品 -> 存档）

这对我有用。我不得不重新归档我的应用程序，因为前一个没有更新。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-12-20T21:18:02.453

我犯了一个愚蠢的错误，在我的 info.plist 中我有 Icon.png，而真正的文件名是 icon.png（没有大写）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-06-26T16:56:20.153

我遇到过同样的问题。我刚刚将它抱怨的图像文件添加到查看器中的项目中。不确定这是否是*正确*的做法，但它为我解决了这个问题。

# python - 如何从与静态路径不同的目录提供静态文件？

> ID：10165665
> 
> 赞同：35
> 
> 时间：2012-04-15T20:14:37.250
> 
> 标签：python, static, tornado, favicon

我正在尝试这个：

```
favicon_path = '/path/to/favicon.ico'

settings = {'debug': True, 
            'static_path': os.path.join(PATH, 'static')}

handlers = [(r'/', WebHandler),
            (r'/favicon.ico', tornado.web.StaticFileHandler, {'path': favicon_path})]

application = tornado.web.Application(handlers, **settings)
application.listen(port)
tornado.ioloop.IOLoop.instance().start() 
```

但它一直`favicon.ico`在为我的 static_path 提供服务（`favicon.ico`如上所述，我在两个单独的路径中有两个不同的 '，但我希望能够覆盖 ' 中的那个`static_path`）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-15T20:23:21.383

[`static_path`](https://github.com/tornadoweb/tornado/blob/master/tornado/web.py#L1907)从应用程序设置中删除。

然后将您的处理程序设置为：

```
handlers = [
            (r'/(favicon\.ico)', tornado.web.StaticFileHandler, {'path': favicon_path_dir}),
            (r'/static/(.*)', tornado.web.StaticFileHandler, {'path': static_path_dir}),
            (r'/', WebHandler)
] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-02T23:31:04.417

您需要用括号包裹 favicon.ico 并转义正则表达式中的句点。您的代码将变为

```
favicon_path = '/path/to/favicon.ico' # Actually the directory containing the favicon.ico file

settings = {
    'debug': True, 
    'static_path': os.path.join(PATH, 'static')}

handlers = [
    (r'/', WebHandler),
    (r'/(favicon\.ico)', tornado.web.StaticFileHandler, {'path': favicon_path})]

application = tornado.web.Application(handlers, **settings)
application.listen(port)
tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T10:30:43.603

## 有两种方法可以做到这一点。

### 1.在设置中使用*static_url_prefix 。*

例如

```
settings = dict(
    static_path=os.path.join(os.path.dirname(__file__), 'static'),
    static_url_prefix="/adtrpt/static/",
) 
```

### 2.使用自定义处理程序

将自定义处理程序附加到处理程序

```
handlers.append((r"/adtrpt/static/(.*)", MyStaticFileHandler, {"path": os.path.join(os.path.dirname(__file__), 'static')})) 
```

然后实现您的自定义方法。

```
class StaticHandler(BaseHandler):
    def get(self):
        path = self.request.path
        print(path)
        self.redirect(BASE_URI + path) 
```

# parallel-processing - 平行德劳内三角剖分

> ID：10165666
> 
> 赞同：3
> 
> 时间：2012-04-15T20:14:45.503
> 
> 标签：parallel-processing, openmp, triangulation, delaunay, divide-and-conquer

我正在尝试使用**openmp并行化**[Guibas Stolfi delaunay 三角测量](http://goanna.cs.rmit.edu.au/~gl/research/comp_geom/delaunay/delaunay.html)。

 **这里有两件事要并行化-我所做的**mergesort()**和我被卡住的**divide() 。**我尝试了所有可能的方法，但徒劳无功。

在 divide() 中遵循的方法（除 n 征服）与 mergesort() 相同，但应用相同的并行化技术（omp 部分）仅适用于 mergesort。

我尝试了[此处显示的并行化技术](http://code.google.com/p/dewall-omp/)，但即使这样也行不通。我在某处读到了嵌套并行性，但我不确定如何实现它。谁能解释分治算法是如何并行化的？

**代码：在主函数和应用部分构造中调用了两次合并排序。对除法执行相同操作不起作用**

```
#pragma omp parallel
{
#pragma omp sections nowait
{
#pragma omp section
{
merge_sort(p_sorted, p_temp, 0, n/2);
}
#pragma omp section
{
merge_sort(p_sorted, p_temp, (n/2)+1, n-1);
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:08:36.210

我在 Windows 中使用 CreateThread 调用成功地进行了并行化，诀窍是将点分成 2^n 个缓冲区，在单独的线程中处理每个缓冲区，然后连续合并相邻的边，直到最后一次合并。

我有一个演示程序来创建随机数据并进行三角测量并显示结果（对于较小的情况）。看起来这个站点不允许我下载我拥有的程序和显示工具的 .zip。如果您可以建议上传网站或提供电子邮件，我会将其发送给您。**

# macports - Mac 端口更新失败

> ID：10165670
> 
> 赞同：6
> 
> 时间：2012-04-15T20:15:13.193
> 
> 标签：macports

```
hansarijanto$ port -v
MacPorts 2.0.3
hansarijanto$ xcodebuild -version
Xcode 4.3.2
Build version 4E2002 
```

我正在运行上面的 xcode 和 macport 版本。在 max os x 上，当我尝试自我更新我的 mac 端口时，我收到以下错误。

```
hansarijanto$ sudo port selfupdate
Password:
--->  Updating MacPorts base sources using rsync
MacPorts base version 2.0.3 installed,
MacPorts base version 2.0.4 downloaded.
--->  Updating the ports tree
--->  MacPorts base is outdated, installing new version 2.0.4
Installing new MacPorts release in /opt/local as root:admin; permissions 0755; Tcl-Package in /Library/Tcl

Error: /opt/local/bin/port: port selfupdate failed: Error installing new MacPorts base: shell command failed (see log for details) 
```

我正在尝试更新 mac 端口以安装 qt。

```
sudo port install qt4-mac-devel(error no SDK found) 
```

我需要安装 webkit-capybara

```
sudo gem install capybara-webkit -v '0.7.2'(error in setting up native environment) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T20:21:26.627

您需要使用该`-d`选项来获取足够的信息来诊断此问题；但请查看[https://trac.macports.org/wiki/FAQ#selfupdatefails](https://trac.macports.org/wiki/FAQ#selfupdatefails)了解常见问题和解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-20T20:19:43.627

似乎 Apple 不再安装 Xcode 的命令行工具。请参阅此处：[http](http://ericwilson.erics.ws/ericsblog/2012/8/26/macports-port-selfupdate-fail) ://ericwilson.erics.ws/ericsblog/2012/8/26/macports-port-selfupdate-fail以获取解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-14T14:38:39.513

只是想在 Mac OS 10.12 Sierra 上添加它，我遇到了`WARNING: GNUSTEP_SYSTEM_ROOT is not defined`错误`selfupdate`，我确实已经安装了 Xcode 命令行工具，获得许可并且可以正常工作。但是我的 Xcode 副本已经过时了，即使自动软件更新中没有显示。

我有版本 7，对于 Sierra（和 macports），您需要版本 8。

所以我通过 App Store 手动下载了 Xcode 8，它为我解决了这个问题。

# jquery - jQuery Ajax 调用 - 删除缓存的值

> ID：10165674
> 
> 赞同：0
> 
> 时间：2012-04-15T20:15:30.377
> 
> 标签：jquery, cache-control

*简短：我是新手，但我尽量直接问，但请尽量原谅我;）*

我一直在寻找解决我的问题的方法和两个主题：

1.  [防止浏览器缓存 jQuery AJAX 调用结果](https://stackoverflow.com/questions/367786/prevent-caching-of-ajax-call)
2.  [你能清除jquery ajax缓存吗？](https://stackoverflow.com/questions/2960810/can-you-clear-jquery-ajax-cache)

靠近并展示一些出色的解决方案，不幸的是它们不适用于我的情况。

我需要使用 jQuery.ajax() 调用向 IP 摄像机发送 CGI 命令。我得到并且经常改变结果。所以我不能让浏览器缓存结果！我知道并经常阅读有关此选项的信息（请参阅主题 1。）：

```
$(document).ready(function() {
  $.ajaxSetup({ cache: false });
}); 
```

但这在我的情况下不起作用，因为相机 CGI 命令结构不适用于附加到命令的时间戳。因此，我将得到一个错误，而不是得到我需要的答案。

之后我想，我可以采用 jQuery 代码来删除设置选项“缓存：false”时附加的时间戳。但是在我阅读了一些评论之后（参见主题 2）：

> 因此，如果您使用 cache: false，jQuery 只需在 URL 中添加一个带有当前时间的附加参数。它使本地浏览器成为另一个 URL，因为它可能在本地缓存中具有，并将请求转发到服务器。而已。

所以我发现这对我也无济于事。

主题 2 的一种解决方案是在服务器响应标头中添加等于“max-age=0”的“Cache-Control”，这会关闭本地兑现。但同样，它对我来说根本不起作用，因为我无法访问或无法访问 IP 摄像机的软件。

我认为一种解决方案是停用或删除该特定调用的缓存。另一种解决方案可能是通过任何其他方式停止缓存。

那么有人知道，当我连续两次调用 ajax 事件时，如何让 Web 浏览器停止使用缓存的答案？（重新加载网站会有所帮助，但在这种情况下也是不行的）。

提前感谢所有答案，如果您需要更多信息以使我的问题更清楚，请随时提问。

问候， lihume

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:19:28.437

您没有指定您使用的服务器，所以我不确定这是否适合您。

你可以做的是使用[.htaccess](http://en.wikipedia.org/wiki/Htaccess)

这应该适用于所有 Unix 类型的服务器，但您需要完全访问权限才能安装它。

```
<FilesMatch "\.(php|cgi|pl|htm)$">
ExpiresActive Off
Header set Cache-Control "private, no-cache, no-store, proxy-revalidate, no-transform"
Header set Pragma "no-cache"
</FilesMatch> 
```

这是一个关于如何在 IIS 上使用 Htaccess 的线程

[http://forums.iis.net/t/1151878.aspx](http://forums.iis.net/t/1151878.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:54:20.827

尝试在每个请求中添加一个随机参数。param.cgi?cmd=getinfrared&fixme=21EC2020-3AEA-1069-A2DD-08002B30309D

为每个请求生成一个新的 GUID，这将使浏览器认为它是第一次请求新资源。CGI 软件应该忽略附加参数...

# .net - .NET Framework 中有没有办法使用 RegionInfo 或 CultureInfo 类填充城市名称？

> ID：10165677
> 
> 赞同：0
> 
> 时间：2012-04-15T20:15:53.840
> 
> 标签：.net

我正在使用此代码显示国家/地区名称：

```
Shared Sub DisplayCountries()
            Dim lstCounTry As List(Of String) = New List(Of String)
            Dim ci As CultureInfo
            For Each ci In CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                Dim ri As System.Globalization.RegionInfo = New System.Globalization.RegionInfo(ci.LCID)

                If Not lstCounTry.Contains(ri.EnglishName) Then
                    lstCounTry.Add(ri.EnglishName)
                End If
            Next

            lstCounTry.Sort()

            For Each item In lstCounTry
                Console.WriteLine(item)
            Next
        End Sub 
```

.NET Framework 中有没有一种方法可以使用相同的方法填充城市名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:20:27.150

BCL 中没有城市名称列表。

至于使用`RegionInfo`- 一个地区可能有很多城市，所以即使存在这些数据，您仍然需要一种方法来选择一个。

`CultureInfo`是一个更糟糕的匹配 - 并非所有文化都有一个与之相关的国家（许多有几个）。

您将需要自己实现类似的东西。

# delphi - 如何将 vcl 样式应用于 TPopupmenu？

> ID：10165685
> 
> 赞同：13
> 
> 时间：2012-04-15T20:16:58.583
> 
> 标签：delphi, delphi-xe2, vcl-styles

我在 Delphi XE2 应用程序中使用 vcl 样式，但是当我弹出一个 TPopupmenu 这是使用本机窗口外观和感觉显示时，是否存在将 vcl 样式颜色应用于 TPopUpMenu 的任何方式？

![在此处输入图像描述](../Images/719ca7bd8316e22af8327ec99ecb84d6.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-15T20:19:33.667

将 TPopupmenu 替换为[TPopupActionBar](http://docwiki.embarcadero.com/Libraries/en/Vcl.ActnPopup.TPopupActionBar)或使用插入器类将 TPopupMenu 强制转换为 TPopupActionBar。

```
 TPopupMenu=class(Vcl.ActnPopup.TPopupActionBar); 
```

你也可以阅读这个[`Adding VCL Styles support to a TPopupMenu in 2 lines of code`](http://theroadtodelphi.wordpress.com/2012/03/06/adding-vcl-styles-support-to-a-tpopupmenu-in-2-lines-of-code/)

![在此处输入图像描述](../Images/d0196045ade6fe02e93de797d9e35789.png)

# php - mysql查询计数和求和

> ID：10165690
> 
> 赞同：0
> 
> 时间：2012-04-15T20:17:39.530
> 
> 标签：php, mysql

我有一个表，其中相同的数据一次又一次地出现，表结构如下所示。id 是自动增量。pm 是用户 ID。它会像 beliw 表一样一次又一次地出现。我想将输出显示为整个表的提取按降序排列。假设该表由 100 行组成，用户 ID 15 出现了 10 次，这是最高的，那么它应该排在最前面，然后是下一个类似的 ID。我试过但不在这里工作也是我的代码

```
id    userid
1      33
2      34
3      37
4      33 
5      33
6      37 
```

我想要的输出是

```
 userid   nos
      33       3
      37       2
      34       1 
```

请指导。我试过这段代码

```
$res = sql_query("select count(userid) as total from tableA");

echo'<table>';
while ($row = sql_fetch_array($res)) {
echo ' <tr><td>'.$row['userid'].'</td></tr></table>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:21:05.177

您需要使用 GROUP BY 语句

```
SELECT userid, COUNT(userid) AS nos FROM tableA
    GROUP BY userid ORDER BY nos DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:19:57.640

```
SELECT userid, COUNT(userid) FROM tableA AS nos GROUP BY userid ORDER BY nos DESC 
```

然后您可以访问：

`$row['userid']`对于用户 ID

`$row['nos']`为了计数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:21:54.473

您的循环方法是错误的。

```
$res = sql_query("select userid, count(userid) as total from tableA group by userid order by total desc");
echo'<table>';
while ($row = sql_fetch_array($res)) {
  echo ' <tr><td>'.$row['userid'].'</td><td>'.$row['total'].'</td></tr>';
}
echo '</table>'; 
```

# java - Eclipse 无法加载 SWT 库

> ID：10165693
> 
> 赞同：301
> 
> 时间：2012-04-15T20:18:18.297
> 
> 标签：java, eclipse, ubuntu, unsatisfiedlinkerror

每次我尝试在 Ubuntu 12.04 中打开 Eclipse 时，都会收到 Unsatisfied Link Error 并且无法打开。我最近安装了 java JDK 和 Android SDK，这可能是问题吗？我跟着[这个教程](http://forums.team-nocturnal.com/showthread.php/772)。

这是日志信息：

```
!SESSION 2012-04-15 21:05:46.902 -----------------------------------------------
eclipse.buildId=I20110613-1736
java.version=1.7.0
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_GB
Command-line arguments:  -os linux -ws gtk -arch x86_64

!ENTRY org.eclipse.osgi 4 0 2012-04-15 21:05:47.885
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
no swt-gtk-3740 in java.library.path
no swt-gtk in java.library.path
Can't load library: /home/tom/.swt/lib/linux/x86_64/libswt-gtk-3740.so
Can't load library: /home/tom/.swt/lib/linux/x86_64/libswt-gtk.so

at org.eclipse.swt.internal.Library.loadLibrary(Library.java:285)
at org.eclipse.swt.internal.Library.loadLibrary(Library.java:194)
at org.eclipse.swt.internal.C.<clinit>(C.java:21)
at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:63)
at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)
at org.eclipse.swt.widgets.Display.<clinit>(Display.java:132)
at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:695)
at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
at org.eclipse.ui.internal.ide.application.IDEApplication.createDisplay(IDEApplication.java:153)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:95)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

我已经尝试卸载并重新安装，并删除`~/.eclipse`目录，但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：661
> 
> 时间：2012-04-20T18:21:34.400

在我的 Ubuntu 12.04 **32 位**。我将命令编辑为：

```
ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86/ 
```

在 Ubuntu 12.04 **64 位**上尝试：

```
ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/ 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-04-16T16:05:36.380

解决了：

因为我安装了 Oracle Java 7，所以它已将默认 Java 更改为 Oracle Java 7，但它必须是 Open JDK。

要修复，打开终端并输入

```
sudo update-alternatives --config java 
```

这会列出不同类型的 Java。只需选择 Open JDK。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-04-05T22:30:32.697

只需指定库的路径：

```
echo "-Djava.library.path=/usr/lib/jni/" >> /etc/eclipse.ini 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-04-01T18:19:56.577

就我而言，我完全错过了`/usr/lib/jni`目录。由固定

```
sudo apt-get install libswt-gtk-3-jni libswt-gtk-3-java 
```

之后无需符号链接。Eclipse 正常启动。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-04-20T11:02:31.653

对于适用于 Linux (WSL) 的 Windows 子系统，您需要

```
apt install libswt-gtk-4-jni 
```

如果您没有 OpenJDK 8，您还需要

```
apt install openjdk-8-jdk 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-15T21:09:40.780

```
无法加载库：/home/tom/.swt/lib/linux/x86_64/libswt-gtk-3740.so
无法加载库：/home/tom/.swt/lib/linux/x86_64/libswt-gtk.so

```

看起来图书馆应该在 .swt/lib/linux/x86_64/ 如果没有你可以试试这个命令：

```
找到 libswt-gtk.so
```

这应该找到库将整个目录复制到 /home/tom/.swt/lib/linux/x86_64

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-04T14:59:12.250

我同意斯科特，他列出的工作。但是，仅从任何目录运行它都不起作用。我不得不 cd 到 /home/ ***** /.swt/lib/linux/x86_64/ 0 个文件

目录，然后运行链接命令：

对于 32 位：

```
ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86/ 
```

在 Ubuntu 12.04 64 位上：

```
ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/ 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-23T18:19:52.453

在 redhat7 上：

```
yum install gtk2 libXtst xorg-x11-fonts-Type1 
```

由于 swt 依赖，完成了这项工作。

在[这里找到](https://stackoverflow.com/a/34801118/1767316)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-07T17:07:01.577

如果您使用 oracle java 启动 eclipse，则 eclipse 可能无法找到 SWT 或 SVN 库等本地库。SWT-JNI 库位于 /usr/lib/jni/ 中，SVN-JNI 库位于 /usr/lib/x86_64-linux-gnu/jni/ 中。

而不是使用命令启动 eclipse

```
eclipse 
```

你可以使用命令

```
env LD_LIBRARY_PATH=/usr/lib/jni/:/usr/lib/x86_64-linux-gnu/jni/:$LD_LIBRARY_PATH eclipse 
```

将环境变量 LD_LIBRARY_PATH 传递给 Eclipse。Eclipse 将找到本机库并正常运行。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-04T04:23:16.690

当我尝试在 64 位 linux 下启动 Eclipse 的 32 位构建时遇到了这个错误。安装 ia32-libs 包后问题得到解决。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-04T22:19:42.207

我在 debian linux amd64 上。我从 oracle 的 java 下载页面安装了 oracle 的 Java 11。从 eclipse.org 安装 eclipse。运行 eclipse 产生“无法加载 swt”错误。我听从了 ATorras 的建议并做了 `apt install libswt-gtk-4-jni`（它还安装了很多其他的东西），然后 eclipse 开始了。虽然它开始了，但我确实收到了以下错误/警告：

```
org.eclipse.m2e.logback.configuration: The org.eclipse.m2e.logback.configuration bundle was activated before the state location was initialized.  Will retry after the state location is initialized.
SWT SessionManagerDBus: Failed to connect to org.gnome.SessionManager: Failed to execute child process “dbus-launch” (No such file or directory)
SWT SessionManagerDBus: Failed to connect to org.xfce.SessionManager: Failed to execute child process “dbus-launch” (No such file or directory)
org.eclipse.m2e.logback.configuration: Logback config file: /home/rusty/eclipse-workspace/.metadata/.plugins/org.eclipse.m2e.logback.configuration/logback.1.16.0.20200318-1040.xml
org.eclipse.m2e.logback.configuration: Initializing logback
SWT Webkit: Warning, You are using an old version of webkitgtk. (pre 2.4) BrowserFunction functionality will not be avaliable
SWT WebKit: error initializing DBus server, dBusServer == 0
SWT.CHROMIUM style was used but chromium.swt gtk (or CEF binaries) fragment/jar is missing. 
```

我想我可以忽略大部分，如果不是全部的话。我在我的 Windows 电脑上使用 mobaXterm 对 linux 框进行 ssh，所以它在我的电脑上显示它的窗口。我的 linux 盒子是无头的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-24T19:02:30.163

请确保您的主分区挂载了可执行权限。这是默认设置，但如果您碰巧在没有 exec 选项的情况下安装它，您将收到此错误。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-23T19:37:09.803

一个可能更通用的方法是：

*   安装非无头版本的 openjdk，
*   安装、运行和关闭eclipse。
*   卸载openjdk
*   安装oracle的JDK

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-06-28T19:13:19.870

我安装了 JDK 32 位，因为我收到了错误。安装JDK 64位后[http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) jdk-8u131-linux-x64.tar.gz（请下载64位版本）并下载64 位“eclipse-inst-linux64.tar.gz”。

# ruby-on-rails - 设置参数：id 问题

> ID：10165694
> 
> 赞同：0
> 
> 时间：2012-04-15T20:18:25.367
> 
> 标签：ruby-on-rails, ruby

我正在源视图中编辑 index.html.erb 页面

```
<% @sources.each_slice(20) do |s| %>
  <div class="span3">
  <% s.each do |i| %>
    <div><%= link_to(truncate(i.name, :length => 30) , sources_path(i.id), :class => 'action show') %></div>
  <% end %>
  </div>
<% end %> 
```

sources.controller 是..

```
 def index
   @sources = Source.search(:search=>params[:search])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @sources }
    end
  end 
```

问：params[:search] 有效时。为什么显示 i.name 信息而 i.id 不显示...如何获取 i.id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:12:49.193

它可能与**id**无关，很可能与您使用**sources_path**而不是使用**source_path**的事实有关。

# c++ - stl地图性能？

> ID：10165708
> 
> 赞同：22
> 
> 时间：2012-04-15T20:20:23.670
> 
> 标签：c++, performance, algorithm, profiling

我正在使用`map<MyStruct, I*> map1;`. 显然，我的应用程序总时间的 9% 都花在了那里。特别是我的主要职能之一。地图不是很大（几乎总是<1k，<20 很常见）。

是否有我可能想要使用的替代实现？我想我不应该自己写，但如果我认为这是个好主意，我可以。

附加信息：我总是在添加元素之前检查。如果存在密钥，我需要报告问题。比在某一点之后，我将大量使用 map 进行查找，并且不会添加更多元素。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-15T20:43:24.113

首先，您需要了解什么是地图以及您正在执行的操作代表什么。A`std::map`是平衡二叉树，查找将进行`O( log N )`操作，每个操作都是键的比较加上一些在大多数情况下可以忽略的额外内容（指针管理）。插入需要大致相同的时间来定位插入点，加上新节点的分配、实际插入树和重新平衡。`O( log N )`尽管隐藏常数更高，但复杂性再次增加。

当您尝试在插入之前确定键是否在映射中时，您将产生查找成本，如果查找不成功，则定位插入点的成本相同。`std::map::insert`您可以通过使用带有迭代器和布尔值的返回值来避免额外的成本，告诉您插入是否实际发生或元素已经存在。

除此之外，您需要了解比较密钥的成本有多大，这超出了问题所显示的范围（`MyStruct`可能只有一个`int`或一千个），这是您需要考虑的事情。

最后，可能 a`map`不是满足您需求的最有效的数据结构，您可能需要考虑使用`std::unordered_map`具有预期恒定时间插入（如果哈希函数不*可怕*）的（哈希表）或小数据集，甚至是一个普通的有序数组（或`std::vector`），您可以在其中使用二进制搜索来定位元素（这将减少分配的数量，但代价是插入成本更高，但如果保存的类型足够小，它可能值得）

与性能一样，衡量并尝试了解时间都花在了哪里。另请注意，在特定函数或数据结构上花费的 10% 时间可能很多或几乎没有，这取决于您的应用程序是什么。例如，如果您的应用程序只是在数据集中执行查找和插入操作，而这仅占用 10% 的 CPU，那么您在其他任何地方都需要进行大量优化！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-15T20:27:16.733

可能只做一个`insert`并检查`pair.second`is `false`if key 是否已经存在会更快：

像这样

```
if ( myMap.insert( make_pair( MyStruct, I* ) ).second == false)
{
  // report error
}
else
  // inserted new value 
```

...而不是`find`每次都打电话。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-15T20:34:51.333

`map`您可以尝试[`unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)使用散列键而不是树来查找元素，而不是尝试。[这个答案](https://stackoverflow.com/a/2197015/237483)给出了一些提示，何时更`unordered_map`喜欢`map`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-15T20:30:53.847

这可能是一个长镜头，但对于小型集合，有时最关键的因素是[缓存](http://en.wikipedia.org/wiki/CPU_cache)性能。

由于`std::map`实现了一个红黑树，它 [AFAIK] 的缓存效率不是很高 - 也许将地图实现为`std::vector<pair<MyStruct,I*>>`一个好主意，并在那里使用二进制搜索 [而不是地图查找]，至少它一旦你开始只查找 [停止插入元素] 应该是有效的，因为`std::vector`比`map`.

这个因素 [cpu-cache] 通常在大 O 表示法中被忽略并隐藏为常数，但对于大型集合，它可能会产生重大影响。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-15T20:27:48.043

您使用地图的方式是基于`MyStruct`实例进行查找，并且根据您的特定实现，所需的比较可能会或可能不会很昂贵。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-15T20:45:05.633

如评论中所述，没有正确的代码，几乎没有通用的答案可以给你。但是，如果`MyStruct`真的很大，则堆栈复制可能会很昂贵。也许存储指向`MyStruct`并实现自己的比较机制的指针是有意义的：

```
template <typename T> struct deref_cmp {
  bool operator()(std::shared_ptr<T> lhs, std::shared_ptr<T> rhs) const {
    return *lhs < *rhs;
  }
};

std::map<std::shared_ptr<MyStruct>, I*, deref_cmp<MyStruct>> mymap; 
```

但是，这是您必须描述的内容。它*可能会*加快速度。

你会查找这样的元素

```
template <typename T> struct NullDeleter {
  void operator()(T const*) const {}
};
// needle being a MyStruct
mymap.find(std::shared_ptr<MyStruct>(&needle,NullDeleter())); 
```

不用说，还有更多的优化潜力。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-15T20:32:42.143

> 是否有我可能想要使用的替代实现？我想我不应该自己写，但如果我认为这是个好主意，我可以。

如果您对问题有足够的了解，您应该详细说明您的实现将如何变得更好。

`map`结构合适吗？如果是这样，那么您的标准库的实现可能质量很好（经过优化）。

比较可以`MyStruct`简化吗？

问题出在哪里——调整大小？抬头？

您是否将结构的复制和分配成本降至最低？

# java - 如何设计一个同时执行完全不同任务的程序？

> ID：10165710
> 
> 赞同：2
> 
> 时间：2012-04-15T20:20:25.480
> 
> 标签：java

我刚刚被多线程弄湿了，它真的很棒。我发现自己试图找出可以使用它的新方法来让事情变得更好，我想我找到了一个，但我不确定如何为此设计程序。

这是情况。我有一个队列服务器，多个客户端消费并产生数据，但是为了启动这个过程，我运行了一个 java 程序来放置一些初始数据供他们启动。然后我的程序完成了，队列服务器上有多余的容量，但实际上没有运行任何东西。所以我想尝试做一些维护任务，运行服务，做低优先级的事情。我不知道怎么做。如何设计一个同时执行完全不同任务的程序？

通常我只是将我的程序包装在一个`while (true)`循环中，它只执行一个任务，我意识到我不能在同一个进程中同时执行两个 while 循环（可能是嵌套的？）。为了展示一个简化的例子，我放了一堆运行可运行的代码（也许它会处理一个低优先级队列）和一个监视套接字并回复的服务（我可能想根据 cpu 使用情况添加更多）。我如何让他们一起工作？有没有更好的设计方法（我知道长期运行多个java进程可能更好，但现在我只是想管理一个文件，我怀疑有一种方法可以为套接字服务提供比处理更高的优先级在文件中排队，但如果它们都在不同的文件中运行，我不会

谢谢，如果事实证明我解释的完全错误，我会编辑这个问题。**但简而言之，我希望它为其他系统（示例中的服务器套接字）提供服务，并且当它空闲时，我希望它执行一些其他任务。**

示例（如果您了解我的要求，则可能不需要阅读此代码）：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class multipleThreads {

    private ServerSocket server;
    private int port = 7777;

    public void ServerSocketExample() {
        try {
            server = new ServerSocket(port);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.println("starting");

        ServerSocketExample example = new ServerSocketExample();
        example.handleConnection();

        while (true) {
            //monitor low low priority queue
        }       
    }
    public void handleConnection() {
        System.out.println("Waiting for client message...");

        //
        // The server do a loop here to accept all connection initiated by the
        // client application.
        //
        while (true) {
            try {
                Socket socket = server.accept();
                new ConnectionHandler(socket);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

}

class ConnectionHandler implements Runnable {
    private Socket socket;

    public ConnectionHandler(Socket socket) {
        this.socket = socket;

        Thread t = new Thread(this);
        t.start();
    }

    public void run() {
        try
        {
            //
            // Read a message sent by client application
            //
            ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
            String message = (String) ois.readObject();
            System.out.println("Message Received: " + message);

            //
            // Send a response information to the client application
            //
            ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
            oos.writeObject("Hi...");

            ois.close();
            oos.close();
            socket.close();

            System.out.println("Waiting for client message...");
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}

class MonitorQueue implements Runnable{

    @Override
    public void run() {
        // TODO Auto-generated method stub
        //do work when stuff comes in the queue

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:45:51.220

我强烈建议你看看这个项目：Java Concurrent Animated。我发现这可能是了解 Java 中的并发概念的最佳方式：它是动画的、交互式的，您一次只需要一个概念并获得很好的理解。

[http://sourceforge.net/projects/javaconcurrenta/](http://sourceforge.net/projects/javaconcurrenta/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:31:56.257

看看[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包。完全按照您描述的方式进行操作，这完全是好事。

特别是，查看[Executors](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)工厂类，它允许您构建允许在您指定`Thread Pools`的任意数量上调度和同时运行多个任务。`Threads`

Oracle 有一些很棒的使用教程`Executors`：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)

[http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T04:04:15.957

并发很难，你可以阅读Java并发实践，但即使是专家也有困难。寻找您所在地区的培训课程。我想推荐基于 Java Concurrency in Practice 并得到作者 Brian Goetz 认可的[并发专家课程](http://www.javaspecialists.eu/courses/concurrency.jsp)

# c# - 在运行时加载引用调用程序集的程序集

> ID：10165713
> 
> 赞同：8
> 
> 时间：2012-04-15T20:20:41.673
> 
> 标签：c#, reference, assemblies, runtime

我的应用程序加载位于其执行路径中的所有库程序集，并针对包含的类执行预知方法。

我现在需要对引用我的应用程序程序集的程序集执行相同的操作。这可能吗？是否有任何我应该注意的负面影响？

主组装：

```
public abstract class TaskBase 
{ 
    public abstract void DoWork(); 
}  

LoadAssemblyFromFile("Assembly0001.dll");  
Assembly0001.Task1.DoWork(); 
```

子组件：

```
public sealed class Task1: MasterAssembly.TaskBase  
{ 
    public override void DoWork { /* whatever */ } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T20:30:32.980

是的，这是可能的。只要您的主程序集不引用子程序集，就可以了。否则，您将有一个循环依赖。

主程序集将简单地加载子程序集，并且对它们一无所知，除了它们实现了一个接口。这样，主程序集就不需要引用子程序集。

据我所知，没有任何问题。我们成功地将这种技术用于某些场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:27:47.000

根据我的经验，这并没有错。实际上，[MEF](http://mef.codeplex.com/)`AssemblyCatalog`以（您的实现在主程序集中）和`DirectoryCatalog`（接口的实现在特定目录中的程序集中） 的形式使用这种技术。

两者可以毫无问题地一起使用`AggregateCatalog`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:35:46.210

唯一的“问题”是您不能在主程序集中编写 Assembly0001.Task1 但您可以在加载的程序集中找到正确的任务并调用该任务：

```
var asm = LoadAssemblyFromFile("Assembly0001.dll");
var taskType = asm.GetTypes().FirstOrDefault(t => typeof(TaskBase).IsAssignableFrom(t));
var task = (TaskBase)Activator.CreateInstance(taskType);
task.DoWork(); 
```

您仍然需要添加一些额外的安全检查:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T22:10:23.050

您没有发布 LoadAssemblyFromFile("...") 方法的代码，但如果它使用 Assembly.LoadFrom() 或 Assembly.LoadFile() 加载程序集，您可能会收到 InvalidCastException、MissingMethodException 或其他异常，尤其是在您的应用程序中和加载的程序集都引用了相同的其他程序集。LoadFrom() 和 LoadFile() 在与您的应用程序不同的绑定上下文中加载程序集。有关详细说明，请参阅[此内容。](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)

# c# - 通过自定义加载项获取链接到 MS Project 任务的对象

> ID：10165714
> 
> 赞同：1
> 
> 时间：2012-04-15T20:20:48.467
> 
> 标签：c#, vsto, ms-project

可以将对象插入到 MS Project 中任务的 Notes 属性中。例如，我在 MS Project 中插入一个 Excel 文件作为链接。

我正在做的是通过 C# 从 MS Project 文件中读取任务并导出它们。我可以通过我的加载项在 MS Project 任务的 Notes 属性中获取文本，但是我找不到已链接的 Excel 文件。

你知道通过 C# 访问链接对象到 MS Project 任务的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:17:53.947

在搜索并尝试和尝试之后，我找不到访问 MS Project 任务的 Notes 属性中定义的链接对象的方法。

# sql - 参数化查询在 VB 中不起作用

> ID：10165715
> 
> 赞同：0
> 
> 时间：2012-04-15T20:20:51.277
> 
> 标签：sql, vb.net, parameterized-query

```
statement = "SELECT OrderID, (SELECT VendName FROM Vendors WHERE Vendors.VendorID = Orders.VendorID) " &
                        ",OrderDt, RcvdDt, OrderTotal " &
                        "FROM Orders " &
                        "WHERE VendName=? " &
                        "ORDER BY OrderDt DESC"

Dim cmd As New OleDbCommand(statement, connection)
cmd.Parameters.AddWithValue("VendName", txtVendorFilter.Text)
Dim reader As OleDbDataReader = cmd.ExecuteReader(CommandBehavior.Default) 
```

我之前试图通过简单地将文本框值直接连接到 SQL 中来做到这一点，我得到一个“没有为所需参数提供值”，并读到我应该使用参数化查询。所以我尝试了这个，它没有给我任何错误，但读者从来没有任何错误。我以前从未使用过参数化查询，所以我有点不知道为什么这不起作用。

编辑：我已经更改了上面的代码，以根据我简要阅读的关于它应该如何工作的内容来解释 OLEDB，它再次给了我“没有为所需参数提供值”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:21:48.303

这里有一个问题：

```
"WHERE VendName='@x' " & 
```

删除`'`标记 - 参数化将为您解决这个问题：

```
"WHERE VendName= @x " & 
```

在查询中使用`'`意味着将`'@x'`其视为字符串类型，而不是参数名称。

此外，由于您使用`OleDb`的是 ，因此不支持 names 参数。您需要使用`?`来表示查询中的参数：

```
"WHERE VendName= ? " & 
```

# php - 将数据添加到 3 Dim 数组

> ID：10165716
> 
> 赞同：0
> 
> 时间：2012-04-15T20:20:54.530
> 
> 标签：php

我有以下数组，其中包含系统上举办的培训课程的主记录（`select_group`仅标识相关课程组）：

```
Array
(
    [DE00041-1] => Array
        (
            [select_group] => 1
        )
) 
```

然后针对仅包含正在运行的课程同时还获取额外信息的表查询培训课程 ID。

由于一个培训课程可能每年运行不止一次，因此他们有`running_id`以下内容：

```
Array
(
    [DE00041-1] => Array
        (
            [title] => xxx
            [405] => Array
                (
                    [start_quarter] => 1
                    [end_quarter] => 1
                )
        )
) 
```

然后我需要做的是将原始数组`select_group`数据添加到新创建的数组中。

最终结果应该是：

```
Array
(
    [DE00041-1] => Array
        (
            [title] => xxx
            [select_group] => 1
            [405] => Array
                (
                    [start_quarter] => 1
                    [end_quarter] => 1
                )
        )
) 
```

我查看了其他 SO / Google 答案，但找不到我要找的东西。

可能列出 1-20 个培训课程，每个课程每年运行一到四次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:28:05.347

```
foreach($yourArray as $key => $value){
   $yourArray[$key]['select_group'] = $select_group_array[$key]['select_group'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:34:24.883

另一种变体：

```
$result = array_merge_recursive($arr1, $arr2); 
```

# apache - Apache + Nginx 反向代理默认不提供 index.php

> ID：10165721
> 
> 赞同：1
> 
> 时间：2012-04-15T20:21:12.877
> 
> 标签：apache, nginx, fastcgi, reverse-proxy

我有一堆与 nginx + php-fastcgi 配合得很好的网站，我没有抱怨！唯一不起作用的是名为 Gallery3 的 PHP 画廊应用程序。可悲的是，我必须在这个应用程序中使用 Apache。我遇到的问题如下：

gallery.wfto.cc - 不起作用（下载一个未命名的文件，其中包含 index.php 的 PHP 代码，因为它没有被解析）

gallery.wfto.cc/——不起作用（同样的事情）

gallery.wfto.cc/index.php - 不起作用（同样的事情）

gallery.wfto.cc/index.php/——有效。

gallery.wfto.cc:9001（所有变体）——有效。

我不知道发生了什么。我在下面包含了我的大部分配置。/etc/nginx/conf.d/proxy.conf 是一个...通用代理配置，没什么特别的。

```
##NGINX CONFIG##
server {
    listen 80; ## listen for ipv4
    listen [::]:80 default ipv6only=on; ## listen for ipv6

    root /var/www/vhosts/wfto.cc/subdomains/gallery;

    server_name gallery.wfto.cc;
    access_log /var/log/nginx/gallery.wfto.cc.access.log;

    location / {
        proxy_pass http://127.0.0.1:9001;
        include /etc/nginx/conf.d/proxy.conf;
    }
}
## APACHE CONFIG ##
<VirtualHost *:9001>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www/vhosts/wfto.cc/subdomains/gallery
        <IfModule mod_fastcgi.c>
                AddHandler php5-fcgi .php
                Action php5-fcgi /php5-fcgi
                Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi
                FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -host 127.0.0.1:9000 -pass-header Authorization
        </IfModule>
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/vhosts/wfto.cc/subdomains/gallery/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:24:40.650

在apache conf中添加：

```
<IfModule dir_module>
    DirectoryIndex index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:57:31.920

我不知道事情是从什么时候开始工作的，但是如果您要更改服务器配置，请确保完全清除浏览器的缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T02:38:41.480

我知道这是一个古老的线索，但由于[Gallery3 经历了复兴](https://galleryrevival.com/)，对于那些在谷歌上搜索解决方案并在此处找到您的问题的人来说，可能值得添加另一个更新的答案。

@jonmiller的以下解决方案有效：[http :](http://jonamiller.com/2015/02/15/gallery3-on-nginx/) [//jonamiller.com/2015/02/15/gallery3-on-nginx/](https://github.com/jonmiller)

因为互联网变化无常，网站来来去去（他的博客从 2015 年开始只有两个条目，显然他没有更新……），考虑到所有学分都归功于 Jon Miller，这里是工作配置：

```
server {
    server_name <gallery_url>;
    listen 80;

    root <path_to_gallery_installion>;

    access_log <path_to_log_locations>;
    error_log <path_to_log_locations>;

    index index.php;

    location / {

        location ~ /(index\.php/)?(.+)$ {
            try_files $uri /index.php?kohana_uri=$2&$args;
            location ~ /var/thumbs/.*/.album.jpg {
                # Direct access to album thumbs explicity allowed
            }
            location ~ /\.(ht|tpl(\.php?)|sql|inc\.php|db)$ {
                deny all;
            }
            location ~ /var/(uploads|tmp|logs) {
                deny all;
            }
            location ~ /bin {
                deny all;
            }
            location ~ /var/(albums|thumbs|resizes) {
                rewrite ^/var/(albums|thumbs|resizes)/(.*)$ /file_proxy/$2 last;
            }
            location ~* \.(js|css|png|jpg|jpeg|gif|ico|ttf)$ {
                try_files $uri /index.php?kohana_uri=$uri&$args;
                expires 30d;
            }
        }

        location = /index.php {
            include fastcgi_params;
            fastcgi_index index.php;
            fastcgi_split_path_info ^(.+\.php)(.*)$;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            fastcgi_pass localhost:9000; // adjust as necessary
        }
    }
} 
```

根据乔恩米勒的说法，使上述所有工作正常的真正技巧是在 上更改一行`application/config/config.php`：

```
$config["index_page"] = ""; 
```

**免责声明：**我已将上述解决方案（应归功于 Jon Miller）作为功能请求发布[在 GitHub 上的 Gallery the Revival 官方存储库中，](https://github.com/bwdutton/gallery3/issues/8)以包含在文档中（README.md，一个单独的文件等），因为它很关键让 Gallery3 管理员意识到他们现在可以让它在`nginx`（至少）PHP 7.4 下运行。

# c - 指向字符数组的字符 * = "ls\0" 不等于等效的字符串 "ls\0"

> ID：10165744
> 
> 赞同：-2
> 
> 时间：2012-04-15T20:23:49.523
> 
> 标签：c

我正在编写一个 shell 程序，当将值传递给我时，`execv()`我需要一个指向程序名称的 char 指针（即`ls`），并且我需要一个指向参数的 char 指针数组的指针。

我通过并解析用户的输入，如果我输入`ls`，如果我打印我的`char *`，`printf()`打印出“ls”。所以我正确地解析了这条线并存储了正确的信息。当我将它传递给 时`execv()`，它会显示错误的路径名，但是如果我手动将指针更改为`progs[0] = "ls"`，那么它就可以工作。如果我比较这两个字符串，`strcmp(mypointer, "ls")`，它表明虽然 mypointer 打印出`"ls"`，但它并不等同于`"ls"`。

有谁知道为什么？

这是我的shell进程代码：

```
#include <stdio.h>
#include <errno.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/wait.h>

char **progs;
char ***arguments;
char **mode;
char pathname[] = "/bin/";

int main(int argc, char ** argv){

//printf("\n %s \n", progs);
//fflush(stdout);

char buff[100];
FILE *p;

p = fdopen(0, "r");  //opens FD 0 (Stdin) as a stream

char * pathname;

while(1){

    //printf("I'm at the top");

    if(isatty(1) == 1){ //check to see if stdout is going to the terminal
    printstart();       //if so, print 
    }

    fgets(buff, 100, p); // Gets the input from the stdin and puts it in buff

    int processid = fork();  //fork into child to complete task

    if(processid == 0){

        //initialize all variables

        int numcmd = countcmd(buff);
        int pipes = countpipes(buff);
        int i;
        int j;

        //allocate memory for tokenization

        progs = malloc(numcmd * sizeof(char *));
        arguments = malloc((numcmd) * sizeof(char *));
        mode = malloc((numcmd*2) * sizeof(char *));

        for(i = 0; i < numcmd; i++){
            progs[i] = malloc(10* sizeof(char *));
            mode[i] = malloc(10 * sizeof(char *));
            mode[2*numcmd-1-i] = malloc(10 * sizeof(char*));
            arguments[i] = malloc(15 * sizeof(char *));
                for(j = 0; j < 15; j++){
                arguments[i][j] = malloc(15 * sizeof(char*));
                }
            }

        /////////////////////////////////////////////////////////////////////

        parse(buff); //parses input and places it in the static progs

        for(i = 0; i < 1; i++){

        printf("\n This is progs %s", arguments[0][0]);

        char temp[25];
        //strcpy(temp, "/bin/");
        strcpy(temp, progs[0]);
        //strcat(temp, ' \0');

        //*progs = "ls";
        char * ptr = progs[0];
        for(;*ptr != '\0';){
            printf("This is what pointer poitns to %c \n", *ptr++);
            }
        printf("This is the program: <<%s>>", progs[0]);
        fflush(stdout);
        char * argument[2];
        argument[0] = "ls";
        argument[1] = '\0';
        char * hell = "l\0";

        printf("This is the value of comparison %d\n", strcmp(progs[0], hell));

        char **temparg = arguments[0];
        //char temp[20] = progs[0];

        errno = 0;
        execvp("ls", *argument);

        char * error = strerror(errno);
        printf("This is the error %s", error);
        return;
        }

    }       
        else{
        int status;
        waitpid(processid, &status, WIFEXITED(status));

        }
}

return 0;
} 
```

这是我的 parse() 代码：

```
#include <string.h>
#include <stdio.h>
#include "myshell.h"

int parse(char * buff){

//Initialize all variables and pointers
int cmd = 0;
int argument = 0;
int mod = 0;
int j = 0;
int hitargs = 0;
int gotcommand = 0;
int multiarg = 0;

char ** argptr = arguments[cmd];
char * ptr1 = progs[cmd];
char * argptr2 = argptr[argument];
char * ptr2 = mode[mod];

while(buff[j] != '\0'){

    switch(buff[j]){

        case ';':
            cmd++;
            argument = 0;
            multiarg = 1;
            *argptr2++ = '\0';

            argptr = arguments[cmd];
            argptr2 = argptr[argument];
            ptr1 = progs[cmd];

            *ptr2 = buff[j];
            mod += 2;
            ptr2 = mode[mod];

        case ' ':
            if(gotcommand == 0){
            break;
            }
            else{
                if(hitargs == 0){
                hitargs = 1;
                *ptr1++ = '\0';
                argument++;
                argptr2 = argptr[argument];
                }
                else{
                argument++;
                argptr2 = argptr[argument];
                }
                break;
            }
        default:
            if(gotcommand == 0){
                *ptr1++ = (char) buff[j];
                *argptr2++ = buff[j];
                gotcommand = 1;
            }
            else if(gotcommand == 1 && hitargs == 0){
                *ptr1++ = (char) buff[j];
                *argptr2++ = buff[j];
            }
            else if(gotcommand == 1 && hitargs == 1){
                *argptr2++ = buff[j];
            }
    }

j++;
}

*argptr2++ = '\0';
*ptr1++ = '\0';

int cmdflag = 0;
int spaceflag = 0;
int argflag = 0;
int cmdct = 1; //account for null
int argumentct = 1; //account for null termination

return 1;
} 
```

对随机 printf 语句感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:57:03.327

*   你的主程序应该`myshell.h`像你的解析代码一样包含。
*   拥有缺失的函数会很有帮助（例如`countcmd()`and `countpipes()`——虽然我们可以从它们的名字中猜到一点，但并不清楚它们的确切作用）。
*   你应该`<unistd.h>`在你的主程序中包含。
*   您应该已经收到有关未声明函数（例如`fork()`）的警告，并且您应该注意并修复这些警告。
    *   如果您没有收到这些警告，则需要在编译中添加更多警告选项。
    *   如果你使用`gcc`，使用`-Wall`是一个很好的起点。

启用警告后，您将看到：

```
shex.c:95: warning: passing argument 2 of ‘execvp’ from incompatible pointer type
shex.c:99: warning: ‘return’ with no value, in function returning non-void 
```

*   后者最好通过`return EXIT_FAILURE;`or处理`exit(EXIT_FAILURE);`。
*   前者由 触发`execvp("ls", *argument);`。
*   对于包含许多参数的东西，最好使用复数词（参数？）。
*   ...哦，我明白了，有一个全局变量`arguments`。
*   你声明`char ***arguments;`. *哎哟!* 我偶尔会使用三重指针，但只是非常偶尔。大多数时候，这是一个太多级别的指针，尤其是对于这个练习。
*   然后还有一个局部变量`char *argument[2];`。
*   因此，正确的调用是`execvp("ls", argument);`。

我会立即扩展等待代码以至少打印信息：

```
 else
    {   
        int status;
        int corpse = waitpid(processid, &status, WIFEXITED(status));
        printf("Command exited: PID = %d; status = 0x%.4X\n", corpse, status);
    } 
```

在您的解析代码中，`case ';':`插入到`case ' ':`. 如果这是故意的，请将其记录下来（带有注释，例如`/* DROP THROUGH */`）；如果没有，请插入缺少的中断。你的`default:`案子可能也应该休息一下。这不是很重要，但它是传统的，如果需要处理新案件，它可以保护您免遭遗漏。

末尾声明的五个变量的字符串`parse()`是多余的；它们是从未使用过的局部变量（正如编译器告诉你的那样）。

在`main()`你做的顶部：

```
FILE *p;
p = fdopen(0, "r");  //opens FD 0 (Stdin) as a stream 
```

这不是必需的；`stdin`已作为流打开。

您从`p`(aka `stdin`) 中读取`fgets()`. 总的来说，这很好（比 更好`gets()`），但是您需要注意其中`fgets()`包含一个不包含的换行符`gets()`，并且您需要检查返回状态（您可能什么都没有阅读）。您还应该使用`sizeof()`：

```
if (fgets(buff, sizeof(buff), stdin) == 0)
    ...error - read failed... 
```

内存分配异常复杂。对于固定大小的输入，例如`char buff[100];`，您可以使用非动态分配。总共不能超过 50 个参数，因为它们是空格分隔的。

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:40:25.853

没有查看整个代码，因此可能存在其他错误，但关于“ls”问题，您需要在解析代码中添加以下内容：

```
 while (buff[j] != '\0' && buff[j]  != '\n') 
```

这确保您不会在命令指针中添加“换行符”`*ptr1++ = (char) buff[j];`

注意[fgets](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)如果遇到新行将停止读取，但会将其作为字符串的一部分包含在内。

# ruby-on-rails - rails rack cache - 如何手动清除所有缓存

> ID：10165746
> 
> 赞同：6
> 
> 时间：2012-04-15T20:24:30.307
> 
> 标签：ruby-on-rails, rack-cache

我通过 rack-cache 缓存了一个页面，现在浏览器从不显示更新的页面，因为它显示了缓存的版本。

如何清除所有缓存？（注意：我从 rails_app_root/public 目录中删除了所有缓存页面）。我什至尝试禁用 rack-cache 但它仍然显示页面的缓存版本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T11:37:40.257

尝试：

在终端：

```
rake tmp:cache:clear 
```

或在 Rails 控制台中：

```
Rails.cache.clear 
```

# uiwebview - 在 Cocos2d 2.x 项目中显示 UIWebView

> ID：10165752
> 
> 赞同：1
> 
> 时间：2012-04-15T20:25:08.740
> 
> 标签：uiwebview, cocos2d-iphone

我想在 Cocos2d 2.x 项目的 CCLayer 中显示 UIWebView。我找到了 CCUIViewWrapper，但没有让它与 2.x 一起使用。

我真的不关心处理旋转和动画。我只是不想在图层上显示来自网页的内容，并且还有一个能够返回到前一个场景的精灵。

请帮忙！

//约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:49:27.753

如果您不想使用 2.0 版的新功能（我自己现在没有使用它们），那么您可以通过简单地将其他视图添加到根视图控制器来将 UIViews 与 Cocos 混合使用。毕竟，Cocos 本身就是控制器上的一个视图（如果你是这样设置的），只需添加另一个视图。

然后，您可以通过使用 NSNotificationCenter 轻松地告诉视图控制器显示其他 UIViews，我通常建议尝试从 Cocos 层与视图控制器通信。

# list - Sencha Touch 2 列表背景变化

> ID：10165753
> 
> 赞同：3
> 
> 时间：2012-04-15T20:25:24.183
> 
> 标签：list, sencha-touch-2, dataview

我的应用程序中有一个列表，但想知道是否可以让显示的每个列表显示不同的背景颜色，而不是在每个项目中显示相同的背景颜色？

我已经创建了一个模板，但如果有每个更改颜色的背景会很好。

谢谢

编辑：我还通过“Ext.dataview.component.DataItem”/“DataView”创建了相同的列表，所以如果这更容易单独控制，那就太好了，因为我正在考虑干扰创建每个列表并设置它的过程背景，如果可能的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:42:32.870

您可以尝试使用简单的 XTemplate 来做到这一点：

```
var tpl = new Ext.XTemplate(
    '<p>Name: {name}</p>',
    '<p>Company: {[values.company.toUpperCase() + ", " + values.title]}</p>',
    '<p>Kids: ',
    '<tpl for="kids">',
        '<div class="{[xindex % 2 === 0 ? "even" : "odd"]}">',
        '{name}',
        '</div>',
    '</tpl></p>'
); 
```

看看他们的解释，可能会发现一些有趣的东西： [http ://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate](http://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:12:45.220

我在 Ext.query('class').up().addCls('backgroundClass'); 上看到了很多变体；hack，这对我来说很有意义，但我的问题是*人们*什么时候打电话给这个？我不能把它放在“painted”中，因为 DOM 似乎还不存在.. 你们在哪里/何时执行 Ext.get(..) 调用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:06:26.330

我也一直在寻找这个，我很难找到如何访问 xlist 的各个项目......

这是我最终做到的方式：

*   在您的 itemTpl 中，使用模型的属性“id”向您的 <div> 添加一个类：

    itemTpl:'< div class="my_list_item_{id}"> ... 内容 ... </div>'

*   棘手的部分是，如果你想设置整个项目区域的背景颜色，你必须使用包装你的 itemTpl < div > 的类 'x-item-label' 访问 < div >。这是我的做法（以第一项为例）：

    Ext.select('.my_list_item_1').first().up('div.x-list-item-label').addCls('background_item');

其中 'background_item' 是一种 CSS 样式，用于定义背景颜色。

*（因为没有办法（至少我知道）在“itemTpl”配置中获取项目的索引计数，所以我不得不使用我的模型/商店的自动“id”属性。请注意，如果你申请在您的商店中过滤/排序/...，此属性将不再排序。因此，如果要将列表中显示的订单链接到“id”属性，则必须执行“Ext.StoreManager.get”之类的操作('MyStore').getAt(indexInList).get('id') )*

希望这可以帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T11:50:28.213

从**Sencha Touch 2.2.1**开始，也可以使用`striped`参数（[更多信息在这里](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.dataview.List-cfg-striped)）。它会将`x-list-item-odd`类添加到列表中的奇数项。

# haskell - Haskell - 请帮我简化这两个功能

> ID：10165754
> 
> 赞同：4
> 
> 时间：2012-04-15T20:26:03.120
> 
> 标签：haskell, algebraic-data-types

我正在尝试[在 48 小时内完成为自己编写计划中](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours)的练习。我需要帮助来简化几个功能。

```
data LispVal = Number Integer
             | String String
             | Bool Bool

isNumber :: [LispVal] -> LispVal
isNumber []               = Bool False 
isNumber [(Number _)]     = Bool True
isNumber ((Number _):xs)  = isNumber xs
isNumber _                = Bool False

isString :: [LispVal] -> LispVal
isString []               = Bool False 
isString [(String _)]     = Bool True
isString ((String _):xs)  = isString xs
isString _                = Bool False 
```

`isNumber`和`isString`函数有很多共同的结构。我该如何分解这种通用结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T21:05:23.580

虽然您不能参数化模式匹配本身，但您可以编写自己的小型辅助函数，这样您至少不必为每个函数重复列表处理：

```
isString (String _) = True
isString _ = False

isNumber (Number _) = True
isNumber _ = False

all1 _ [] = False
all1 f xs = all f xs

isListOfStrings = Bool . all1 isString
isListOfNumbers = Bool . all1 isNumber 
```

在我看来，空列表的特殊情况处理在这里并不一致。您应该考虑只使用`all`（以便空列表可以是任何类型的列表，类似于 Haskell 列表的工作方式）。

# python - 没有根标签时用lxml解析html

> ID：10165756
> 
> 赞同：4
> 
> 时间：2012-04-15T20:26:17.550
> 
> 标签：python, lxml, formalchemy

我一直在使用 lxml 和 formchemy 为 sqlalchemy 构建一个脚手架库，但我很难让它们很好地发挥作用。具体来说，`formalchemy.FieldSet.render()`返回一个没有根标记的 html 片段，我似乎无法弄清楚如何让 lxml 将其解析为可以包含在元素树中的内容：

我得到了什么：

```
>>> lxml.etree.fromstring(formalchemy.FieldSet(toyschema.User(), session).render())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "lxml.etree.pyx", line 2743, in lxml.etree.fromstring (src/lxml/lxml.etree.c:52665)
  File "parser.pxi", line 1573, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:79932)
  File "parser.pxi", line 1445, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:78709)
  File "parser.pxi", line 920, in lxml.etree._BaseParser._parseUnicodeDoc (src/lxml/lxml.etree.c:75083)
  File "parser.pxi", line 564, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:71739)
  File "parser.pxi", line 645, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:72614)
  File "parser.pxi", line 585, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:71955)
lxml.etree.XMLSyntaxError: Extra content at the end of the document, line 8, column 1 
```

我想要的是：

```
>>> ?????(formalchemy.FieldSet(toyschema.User(), session).render())
[<Element div at 0x1e48e10>, <Element script at 0x1e48cd0>, <Element div at 0x1e48730>, <Element div at 0x1ea1e60>] 
```

我的粗略解决方法：

```
>>> lxml.etree.fromstring('<root>%s</root>' % formalchemy.FieldSet(toyschema.User(), session).render()).getchildren()
[<Element div at 0x1e48e10>, <Element script at 0x1e48cd0>, <Element div at 0x1e48730>, <Element div at 0x1ea1e60>] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T20:43:44.277

用于解析 HTML 您要使用`lxml.html`，而不是`lxml.etree`.

如果您想要一个片段列表而不是将它们包装在 a 中，`div`您可以`fragments_fromstring(string)`按照[此处](http://lxml.de/lxmlhtml.html#parsing-html-fragments)所述使用。

# scala - 将文件的内容存储在scala中的不可变映射中

> ID：10165757
> 
> 赞同：3
> 
> 时间：2012-04-15T20:26:40.793
> 
> 标签：scala, map, iteration, type-conversion

我正在尝试使用不可变映射在scala中实现一个简单的字数（这是故意的），我试图完成它的方式如下：

1.  创建一个空的不可变映射
2.  创建一个读取文件的扫描仪。
3.  虽然scanner.hasNext() 为真：

    *   检查 Map 是否包含该单词，如果不包含该单词，则将计数初始化为零
    *   使用 key=word 和 value=count+1 创建一个新条目
    *   更新地图
4.  在迭代结束时，地图将填充所有值。

我的代码如下：

```
val wordMap = Map.empty[String,Int]
val input = new java.util.scanner(new java.io.File("textfile.txt"))
while(input.hasNext()){
  val token = input.next()
  val currentCount = wordMap.getOrElse(token,0) + 1
  val wordMap = wordMap + (token,currentCount)
} 
```

想法是 wordMap 将在迭代结束时拥有所有 wordCounts ......每当我尝试运行这个片段时，我都会得到以下异常

> 递归值 wordMap 需要类型。

有人可以指出为什么我会遇到这个异常，我能做些什么来补救它？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T20:37:43.873

```
val wordMap = wordMap + (token,currentCount) 
```

这一行正在重新定义一个已经定义的变量。如果你想这样做，你需要定义`wordMap`，`var`然后使用

```
wordMap = wordMap + (token,currentCount) 
```

虽然这个怎么样？：

```
io.Source.fromFile("textfile.txt")            // read from the file
  .getLines.flatMap{ line =>                  // for each line
     line.split("\\s+")                       // split the line into tokens
       .groupBy(identity).mapValues(_.size)   // count each token in the line
  }                                           // this produces an iterator of token counts
  .toStream                                   // make a Stream so we can groupBy
  .groupBy(_._1).mapValues(_.map(_._2).sum)   // combine all the per-line counts
  .toList 
```

请注意，每行预聚合用于尝试减少所需的内存。一次计算整个文件可能太大了。

如果您的文件非常庞大，我建议您使用 Scala 的并行集合或 Hadoop（使用 Scrunch 或 Scoobi 等很酷的 Scala Hadoop 包装器之一）并行执行此操作（因为字数统计对于并行化来说很简单）。

**编辑**：详细说明：

好的，首先看一下flatMap的内部。我们取一个字符串，并用空格将其拆分：

```
val line = "a b c b"
val tokens = line.split("\\s+") // Array(a, b, c, a, b) 
```

现在`identity is a function that just returns its argument, so if we`groupBy(identity)`，我们将每个不同的单词*类型*映射到每个单词*标记*：

```
val grouped = tokens.groupBy(identity) // Map(c -> Array(c), a -> Array(a), b -> Array(b, b)) 
```

最后，我们要计算每种类型的令牌数量：

```
val counts = grouped.mapValues(_.size) // Map(c -> 1, a -> 1, b -> 2) 
```

由于我们将其映射到文件中的所有行，因此我们最终得到了每一行的标记计数。

那么做`flatMap`什么呢？好吧，它在每一行上运行令牌计数函数，然后将所有结果合并到一个大集合中。

假设文件是​​：

```
a b c b
b c d d d
e f c 
```

然后我们得到：

```
val countsByLine = 
  io.Source.fromFile("textfile.txt")            // read from the file
    .getLines.flatMap{ line =>                  // for each line
       line.split("\\s+")                       // split the line into tokens
         .groupBy(identity).mapValues(_.size)   // count each token in the line
    }                                           // this produces an iterator of token counts
println(countsByLine.toList) // List((c,1), (a,1), (b,2), (c,1), (d,3), (b,1), (c,1), (e,1), (f,1)) 
```

所以现在我们需要将每一行的计数组合成一大组计数。`countsByLine`变量是一个，`Iterator`所以它没有`groupBy`方法。相反，我们可以将其转换为 a `Stream`，这基本上是一个惰性列表。我们想要惰性是因为我们不想在开始之前将整个文件读入内存。然后这些`groupBy`组将所有相同的单词类型一起计数。

```
val groupedCounts = countsByLine.toStream.groupBy(_._1)
println(groupedCounts.mapValues(_.toList)) // Map(e -> List((e,1)), f -> List((f,1)), a -> List((a,1)), b -> List((b,2), (b,1)), c -> List((c,1), (c,1), (c,1)), d -> List((d,3))) 
```

最后，我们可以通过从每个元组中获取第二项（计数）来总结每个单词类型的每一行的计数，然后求和：

```
val totalCounts = groupedCounts.mapValues(_.map(_._2).sum)
println(totalCounts.toList)
List((e,1), (f,1), (a,1), (b,3), (c,3), (d,3)) 
```

你有它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T20:37:13.123

你有几个错误：你定义`wordMap`了两次（`val`是声明一个值）。此外，`Map`它是不可变的，因此您必须将其声明为 a`var`或使用可变映射（我建议前者）。

试试这个：

```
var wordMap = Map.empty[String,Int] withDefaultValue 0
val input = new java.util.Scanner(new java.io.File("textfile.txt"))
while(input.hasNext()){
  val token = input.next()
  wordMap += token -> (wordMap(token) + 1)
} 
```

# sql - SQL查询查找记录最多的三个名称的问题

> ID：10165758
> 
> 赞同：2
> 
> 时间：2012-04-15T20:26:43.730
> 
> 标签：sql, sql-server-2008

我有一个表，我想显示使用 SQL 查询记录最多的 3 个名称（Ted、Ringo、Paul）。这是一个原始问题，但请帮助我。

我的桌子：

![在此处输入图像描述](../Images/89f3516ba6e04e3634d56f228c1927c5.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T20:31:44.743

```
SELECT TOP 3 Name
FROM YourTable
GROUP BY Name
ORDER BY COUNT(*) DESC 
```

# java - Java 无法使用 'localhost:10.0' 作为 DISPLAY 变量的值连接到 X11 窗口服务器

> ID：10165761
> 
> 赞同：110
> 
> 时间：2012-04-15T20:26:54.000
> 
> 标签：java, linux, x11, xserver

我有一个脚本使用 java 连接到在 localhost 的端口 10.0 中显示 X11

但我总是得到这个错误

```
java.lang.InternalError: Can't connect to X11 window server using 'localhost:10.0' as the value of the DISPLAY variable.
    at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)
    at sun.awt.X11GraphicsEnvironment.access$200(X11GraphicsEnvironment.java:62)
    at sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:178)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:142)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:82)
    at sun.awt.X11.XToolkit.<clinit>(XToolkit.java:112)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at java.awt.Toolkit$2.run(Toolkit.java:849)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.Toolkit.getDefaultToolkit(Toolkit.java:841)
    at ij.io.Opener.openJpegOrGif(Opener.java:367)
    at ij.io.Opener.openImage(Opener.java:220)
    at ij.io.Opener.openImage(Opener.java:249)
    at ij.io.Opener.open(Opener.java:116)
    at ij.IJ.open(IJ.java:1112)
    at ij.macro.Functions.open(Functions.java:2006)
    at ij.macro.Functions.doFunction(Functions.java:129)
    at ij.macro.Interpreter.doStatement(Interpreter.java:205)
    at ij.macro.Interpreter.doBlock(Interpreter.java:515)
    at ij.macro.Interpreter.runUserFunction(Interpreter.java:278)
    at ij.macro.Interpreter.getFactor(Interpreter.java:1200)
    at ij.macro.Interpreter.getTerm(Interpreter.java:1162)
    at ij.macro.Interpreter.getExpression(Interpreter.java:1145)
    at ij.macro.Interpreter.getBooleanExpression(Interpreter.java:881)
    at ij.macro.Interpreter.getLogicalExpression(Interpreter.java:857)
    at ij.macro.Interpreter.getBoolean(Interpreter.java:850)
    at ij.macro.Interpreter.doIf(Interpreter.java:829)
    at ij.macro.Interpreter.doStatement(Interpreter.java:217)
    at ij.macro.Interpreter.doBlock(Interpreter.java:515)
    at ij.macro.Interpreter.doStatement(Interpreter.java:241)
    at ij.macro.Interpreter.doIf(Interpreter.java:831)
    at ij.macro.Interpreter.doStatement(Interpreter.java:217)
    at ij.macro.Interpreter.doStatements(Interpreter.java:195)
    at ij.macro.Interpreter.run(Interpreter.java:99)
    at ij.macro.Interpreter.run(Interpreter.java:65)
    at ij.macro.Interpreter.run(Interpreter.java:75)
    at ij.plugin.Macro_Runner.runMacro(Macro_Runner.java:127)
    at ij.plugin.Macro_Runner.runMacroFile(Macro_Runner.java:112)
    at ij.IJ.runMacroFile(IJ.java:103)
    at ij.ImageJ.main(ImageJ.java:517) 
```

我已经尝试了一切来解决这个问题，例如：

```
export DISPLAY=:10.0
export DISPLAY=localhost:10.0 
```

我也尝试了端口 0.0 但我总是遇到同样的错误

在尝试 xhost 之后

```
xhost +local:all
xhost:  unable to open display ""
xhost:  unable to open display ":10.0" 
```

我该如何解决这个问题我认为 X 服务器没有运行所以我尝试`startx`了它说它在那个端口运行

我的系统是 Ubuntu 服务器版 10.04

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-15T20:42:39.433

您需要[`-Djava.awt.headless=true`](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)在启动时指定参数。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-12-10T21:20:53.063

删除 DISPLAY 变量

```
unset DISPLAY 
```

这在大多数情况下都有帮助（例如，启动应用程序服务器或其他基于 java 的工具）并避免修改所有那么多命令行。

也可以很舒服地将其添加到 .bash_profile 以供专用的应用程序服务器/工具用户使用。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-02-25T13:54:11.940

这个命令帮助我解决了这个问题：

```
export DISPLAY=:0 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2017-07-05T09:07:58.410

我认为您正在使用 sudo 模式。请检查到用户模式并重试

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-05-22T13:47:05.183

如果有人试图通过 CI(jenkins,..) 上的 maven-surefire-plugin 运行自动化单元测试，并遇到上述错误，请务必更新您的 surefire 插件配置：

```
<plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-surefire-plugin</artifactId>
     <version>${maven-surefire-plugin.version}</version>
     <configuration>
            <systemPropertyVariables>
                <java.awt.headless>true</java.awt.headless>
            </systemPropertyVariables>
      </configuration>
</plugin> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-17T15:00:53.190

这将解决它：

```
/usr/bin/java -Djava.awt.headless=true $Your_program 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-07-03T10:46:31.660

对我来说，以**-Y**而不是 -X 身份登录有效。

如果您有如下所示的不受信任的 X11，请尝试使用 -Y 标志（如果您信任主机）：

**警告**：不受信任的 X11 转发设置失败：未生成 xauth 密钥数据

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-04-14T11:57:47.223

如果您尝试使用 su 导出显示，但它仍然无法正常工作。这对我有用。为 sudo 用户尝试 X11 转发。

使用带有 ssh 的 -X 选项连接远程主机。

```
# ssh -X root@remote-host 
```

现在列出当前用户的 cookie 集。

```
# xauth list $DISPLAY
    node01.thegeekdiary.com/unix:10  MIT-MAGIC-COOKIE-1  dacbc5765ec54a1d7115a172147866aa
# echo $DSIPLAY
    localhost:10.0 
```

使用 sudo 切换到另一个用户帐户。将上面命令输出中的 cookie 添加到 sudo 用户。

```
# sudo su - [user]
# xauth add node01.thegeekdiary.com/unix:10  MIT-MAGIC-COOKIE-1  dacbc5765ec54a1d7115a172147866aa 
```

再次为 sudo 用户导出步骤 2 中的显示。尝试使用命令 xclock 来验证 x 客户端应用程序是否按预期工作。

```
# export DISPLAY=localhost:10.0 
```

来源：[https ://www.thegeekdiary.com/how-to-set-x11-forwarding-export-remote-display-for-users-who-switch-accounts-using-sudo/](https://www.thegeekdiary.com/how-to-set-x11-forwarding-export-remote-display-for-users-who-switch-accounts-using-sudo/)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-27T01:26:23.640

经过几天徒劳的努力，在带有无头 Fedora 22 的树莓派 2 上安装 glassfish，下面为我工作顺利

```
 unset DISPLAY
java -Djava.awt.headless=true -jar glassfissh-installer-v2ur2-b04-linux.jar 
```

[从这里](https://confluence.atlassian.com/bamkb/error-can-t-connect-to-x11-window-server-is-reported-during-server-startup-226788690.html)得到我的帮助

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-10-28T21:05:28.130

第一：启动XQuartz

二：ssh -X user@ip_address

...：开始你的过程

如果你 ssh 然后启动 XQuartz 你会得到那个错误

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-06-25T13:41:03.750

这解决了我的问题

```
xhost + 
```

但请注意，这会`xhost +`完全停用身份验证并允许每个人访问您屏幕上的所有应用程序。

`xhost +si:localuser:root`似乎与适当的身份验证类似。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-04-13T14:38:49.720

我正在使用 Xming 并遇到类似的错误。已采取以下步骤来解决此问题：

1.  在 Xming 启动中选中该框没有访问控制。
2.  在腻子中运行以下命令：`DISPLAY=XXX.XXX.XXX.XX:0.0; export DISPLAY`

替换`XXX.XXX.XXX.XX`为您的 IP 地址。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-09-05T07:42:50.203

如果使用或在 /etc/profile 中设置，请首先在 Jenkins 的构建阶段执行此操作：

```
unset DISPLAY
export DISPLAY=:0 
```

然后在 java 代码中或使用 maven 设置此属性：-Djava.awt.headless=false

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-12-05T05:47:36.007

解决了。我只是注销并使用 xorg 登录！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-12-14T08:11:51.680

Michael-O 给出了解决问题的有用方法。解决此问题的另一种方法是使用 Putty 控制台启动服务器。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-01-02T05:36:40.407

就我而言，我的机器中没有剩余空间，我也面临同样的问题。有时可能是空间问题。检查您的 Linux/Unix 环境中的空间并确保您的机器有足够的空间。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-04-23T17:01:24.250

使用以下命令检查是否设置了 $DISPLAY 变量：

回声 $DISPLAY

如果未设置显示变量，请运行以下命令进行设置，（即使已设置，您的会话也可以有以下一个）

导出显示=：0.0

在腻子中也有x显示位置为：0.0

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-11-01T12:09:59.570

我正在使用的 Linux 服务器上遇到了同样的问题。将 java 连接到 X11 显示器在头节点上有效，但在任何其他节点上无效。联系管理员后，原来我们的排班系统（SLURM）当前版本不支持X11转发。他们必须更新 SLURM（新版本的 SLURM 支持它）才能正常工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-04-24T17:02:40.313

我让它工作的唯一方法是使用模板运行脚本。例如 sudo ./glassfish-3.1.2.2-unix.sh -s 模板

这会在静默模式下安装 Glassfish。[http://docs.oracle.com/cd/E18930_01/html/821-2427/ghmva.html](http://docs.oracle.com/cd/E18930_01/html/821-2427/ghmva.html)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-05-02T05:48:27.633

当我在远程运行 jconsole 命令时，我遇到了同样的错误。我想修改在远程Linux主机上运行的jconsole参数，我可以使用secureCRT登录主机，终端抛出这个错误信息。幸运的是，使用腻子时，没问题。奇怪的....

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-11-01T16:15:15.103

如果您在 Hudson 中看到此错误，请尝试从您的主目录中删除 .java 目录，它可能对您有用。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-10-12T11:16:15.540

如果您在通过 ssh 登录时在远程服务器上启动应用程序，那么另一种方法是使用`-x`参数启动 ssh 或添加`ForwardX11 no`您的`/etc/ssh/ssh_config`. 在这种情况下 ssh 不会创建环境变量 DISPLAY。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-09-13T05:46:19.190

如果您从 Jenkins 触发代码，启用选项“在构建之前启动 Xvfb，然后将其关闭”可能会有所帮助。它帮助了我。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-09-20T18:07:09.813

更改为另一个用户并尝试除root之外。这个对我有用。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-01-06T21:41:14.733

我只是在运行 ./studio.sh All set 之前没有注销 root。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-02-16T19:15:33.733

对于 Ubuntu 17.10 安装 X 虚拟帧缓冲区 (xvfb)

```
apt install xvfb 
```

并将这些行添加到 /etc/profile 文件中......

```
# Start the X virtual frame buffer (Xvfb)
if [ -f /usr/X11R6/bin/Xvfb ]; then
/usr/X11R6/bin/Xvfb :1 -screen 0 1366x768x32
fi

# Set the DISPLAY variable for the X virtual frame buffer (Xvfb)
export DISPLAY=localhost:1.0 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-09-04T07:56:02.410

就我而言，此错误与 DISPLAY 端口无关。我试图将 XML 加载到 Windchill（一种 PLM 软件）中，但在终端上只收到了上述错误。在日志文件中，我发现**我的 XML 文件已损坏**的报告。也许有人有类似的问题，可以使用这个答案。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-10-28T05:18:00.583

我的问题是防火墙。暂时禁用它。

[编辑] 而且，服务器主机名指向另一个 IP。将其设置为简单的本地服务器。`strace xclock`帮助调试了这个问题。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-02-25T09:38:31.497

我已经通过使用 Xorg 登录解决了这个问题。默认情况下，我使用的是 Wayland。看起来 Wayland 消除了 Xorg 的大部分设计缺陷，但它也有自己的问题。[![在此处输入图像描述](../Images/420bfec73816e46f18c8f702f85f0edf.png)](https://i.stack.imgur.com/r4qhN.jpg)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-09-14T13:44:17.417

对我来说，以上都不起作用，但经过长时间的搜索，这对我有用。

```
export DISPLAY=localhost:20.0 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2016-11-01T14:19:41.950

对我来说，问题是没有安装*xorg-x11-xauth 。*我安装了它，然后它工作了。

我现在拥有的软件包是：

*   *libX11-common-1.6.3-2.el6.noarch*
*   *libX11-1.6.3-2.el6.i686*
*   *libX11-1.6.3-2.el6.x86_64*
*   *xorg-x11-drv-ati-firware-7.6.1-2.el6.noarch*
*   *xorg-x11-xauth-1.0.9-1.el6.x86_64*

# matlab - MATLAB：如何不将绘图轴外的数据导出到 SVG

> ID：10165767
> 
> 赞同：4
> 
> 时间：2012-04-15T20:27:33.577
> 
> 标签：matlab, svg, plot, export, inkscape

可能是一个太特殊的问题，但以防万一有人遇到类似的问题。

我正在使用 plot2svg 获取从 Matlab 到 Inkscape 的绘图。它工作正常，除了一个非常烦人的问题。如果我只想显示曲线的放大部分，plot2svg “捕获”整个曲线然后剪辑它。结果，SVG 文件比它可能的大得多，有时 Inkscape 甚至在复杂的曲线上崩溃。

有什么方法可以在导出 SVG 之前删除轴外的数据。我试过刷（删除未刷），但随后 plot2svg 失败：

```
Attempted to access parts(1); index out of bounds because numel(parts)=0.

Error in plot2svg>line2svg (line 2237)
    if parts(1)~=1

Error in plot2svg>axchild2svg (line 1365)
    line2svg(fid,groupax,axpos,x,y,scolorname,linestyle,linewidth)

Error in plot2svg>axes2svg (line 1042)
group = axchild2svg(fid,id,axIdString,ax,group,paperpos,axchild,axpos,groupax,projection,boundingBoxAxes);

Error in plot2svg (line 221)
    group=axes2svg(fid,id,ax(j),group,paperpos); 
```

任何人都可以提出任何解决方案吗？我想避免在 Matlab 中使用 EPS 或 PDF 导出，因为它们的质量比 plot2svg 差得多。

Matlab 2011b 64 位，plot2svg 2010 年 11 月 10 日，Win 7 Pro 64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:45:44.293

位于（放大）轴之外的曲线的所有值都应设置为 NaN。Matlab 不会绘制这些点，因此 plot2svg 不会导出它们。但是，这涉及在缩放后重新绘制曲线。

确保在绘制曲线时保存一个句柄：

```
figure(1)  
h = plot(yourXdata, yourYdata); 
```

然后放大您感兴趣的区域，然后运行以下代码：

```
figure(1)
hold on  
myXlim = xlim;  
myYlim = ylim;  

% crop your data  
yourXdata(yourXdata < myXlim(1)) = NaN;  
yourXdata(yourXdata > myXlim(2)) = NaN;  

yourYdata(yourYdata < myYlim(1)) = NaN;  
yourYdata(yourYdata > myYlim(2)) = NaN;  

% delete old curve and draw the new one  
delete(h);
plot(yourXdata, yourYdata); 
```

# python - 从类外部访问自我

> ID：10165768
> 
> 赞同：4
> 
> 时间：2012-04-15T20:27:41.360
> 
> 标签：python, decorator

我正在尝试在类中的某些方法上实现装饰器，以便如果尚未计算该值，则该方法将计算该值，否则它将仅返回存储在实例中的预计算值`defaultdict`。我似乎无法弄清楚如何`defaultdict`从类外部声明的装饰器内部访问实例。关于如何实现这一点的任何想法？

以下是导入（作为一个工作示例）：

```
from collections import defaultdict
from math import sqrt 
```

这是我的装饰器：

```
class CalcOrPass:
    def __init__(self, func):
        self.f = func

    #if the value is already in the instance dict from SimpleData,        
    #don't recalculate the values, instead return the value from the dict
    def __call__(self, *args, **kwargs):

        # can't figure out how to access/pass dict_from_SimpleData to here :(
        res = dict_from_SimpleData[self.f.__name__]
        if not res:
            res = self.f(*args, **kwargs)
            dict_from_SimpleData[self.f__name__] = res
        return res 
```

这是带有修饰方法的 SimpleData 类：

```
class SimpleData:
    def __init__(self, data):
        self.data = data
        self.stats = defaultdict() #here's the dict I'm trying to access

    @CalcOrPass
    def mean(self):
        return sum(self.data)/float(len(self.data))

    @CalcOrPass
    def se(self):
        return [i - self.mean() for i in self.data]

    @CalcOrPass
    def variance(self):
        return sum(i**2 for i in self.se()) / float(len(self.data) - 1)

    @CalcOrPass
    def stdev(self):
        return sqrt(self.variance()) 
```

到目前为止，我已经尝试*在*SimpleData 中声明装饰器，尝试使用装饰器传递多个参数（显然你不能这样做），并在我的转椅上旋转，同时试图将纸飞机扔进我的蝎子坦克。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:04:12.560

您定义装饰器的方式会丢失目标对象信息。改用函数包装器：

```
def CalcOrPass(func):
    @wraps(func)
    def result(self, *args, **kwargs):
        res = self.stats[func.__name__]
        if not res:
            res = func(self, *args, **kwargs)
            self.stats[func.__name__] = res
        return res
    return result 
```

`wraps`是从`functools`这里不是绝对必要的，但非常方便。

* * *

旁注：`defaultdict`采用工厂函数参数：

```
defaultdict(lambda: None) 
```

但是由于您无论如何都在测试密钥是否存在，所以您应该更喜欢简单的`dict`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T21:23:54.680

当你的函数被定义时，你不能做你想做的事，因为它是未绑定的。这是一种在运行时以通用方式实现它的方法：

```
class CalcOrPass(object):
    def __init__(self, func):
        self.f = func

    def __get__(self, obj, type=None): # Cheat.
        return self.__class__(self.f.__get__(obj, type))

    #if the value is already in the instance dict from SimpleData,
    #don't recalculate the values, instead return the value from the dict
    def __call__(self, *args, **kwargs):
        # I'll concede that this doesn't look very pretty.
        # TODO handle KeyError here
        res = self.f.__self__.stats[self.f.__name__]
        if not res:
            res = self.f(*args, **kwargs)
            self.f.__self__.stats[self.f__name__] = res
        return res 
```

一个简短的解释：

*   我们的装饰器定义`__get__`（因此被称为*描述符*）。虽然属性访问的默认行为是从对象的字典中获取它，但如果定义了描述符方法，Python 将改为调用它。
*   对象的情况是`object.__getattribute__`将访问`b.x`转换为`type(b).__dict__['x'].__get__(b, type(b))`
*   这样我们就可以从描述符的参数中访问绑定的类及其类型。
*   然后我们创建一个新的 CalcOrPass 对象，它现在装饰（包装）一个绑定方法，而不是旧的未绑定函数。
*   请注意新的样式类定义。我不确定这是否适用于旧式课程，因为我还没有尝试过；只是不要使用那些。:) 但是，这对函数和方法都有效。
*   “旧”装饰功能会发生什么，留作练习。

# delphi - 陷阱密钥违规

> ID：10165778
> 
> 赞同：4
> 
> 时间：2012-04-15T20:28:10.420
> 
> 标签：delphi, delphi-7, ado

您好我正在尝试进行一些异常处理并拦截重复的字段值（键违规）错误。从我寻找解决方案的过程中，我看到了许多使用以下方法捕获所有错误的建议

```
try
(enter code)
except on E: EDatabaseError do
showmessage (Error message);
end; 
```

但我想专门回应一个密钥违规，它使用一个使用 ADO 的访问表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T20:43:26.693

如果您要处理的唯一错误是带有“重复值”消息的错误，这将起作用：

```
try
  // Your code
except
  on E: EOleException do
  begin
    // The better way is to find out what E.ErrorCode is
    // for this specific exception, and handle it instead
    // of checking the string - you didn't provide the
    // ErrorCode, though.
    // If E.ErrorCode = <whatever> then
    //
    if Pos('duplicate value', E.Message) > 0 then
      // You've got a duplicate with the message above
      // Do whatever handles it
    else
      raise;
  end;
  // If you want to handle other exception types (eg., EDataBaseError),
  // you can do so here:
  //  on E: EDataBaseError do
  //    HandleDBError;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T21:28:30.530

`EDatabaseError`只是一个通用的 excption 类，没有关于错误的附加信息，要在 ADO 中获取有关错误的扩展信息，您必须在引发异常时使用该属性[`TADOConnection.Errors`](http://docwiki.embarcadero.com/Libraries/en/Data.Win.ADODB.TADOConnection.Errors)来获取特定的错误代码`Key violation`，为此检查`Number`和`NativeError`属性。

您可以在此处找到有关此主题的更多文档

*   [ADO 错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675809%28v=vs.85%29.aspx)
*   [`Error Object`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677507%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T20:48:42.633

从您的描述来看，这听起来不像是您应该让其成为例外的事情。特别是如果你要做的就是`EOleException`. 例外情况应该是您没有好的方法来处理的事情，而这里不是这种情况。

我建议您在尝试添加新记录之前检查新 ID 是否尚未使用。或者，正如@TLama 建议的那样，利用数据库框架的任何错误处理工具，让您在它成为异常之前挂钩它。

# java - 排列地形块（菱形算法）

> ID：10165779
> 
> 赞同：2
> 
> 时间：2012-04-15T20:28:13.753
> 
> 标签：java, terrain, procedural-generation

我正在编写一个使用 Minecraft-esque 块的地形引擎。[使用Diamond-square 算法](http://en.wikipedia.org/wiki/Diamond-square_algorithm)单独生成块。

问题是这些块没有排列，它们是完全分开的。我已经尝试了很多事情来让他们这样做，但到目前为止，没有任何事情能起到应有的作用。

**编辑**：另外，我试图创造的世界不是无限的；它生成一个 33x33 的块数组，每个块都有一个由另一个菱形正方形生成器分配的全局高度值。

有没有一种（简单的，最好的）方法来修改菱形引擎以使块对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:55:59.890

因此，您将菱形正方形算法的每个顶级正方形生成为单独的块？

您必须与周围的块共享该块的四个角点。

有很简单的方法可以做到这一点。您只需要一个带有两个参数的噪声函数（假设您在 2D 中生成地形） - 一个函数始终为同一种子返回相同的伪随机数（对于整个地图保持不变）和两个参数。因此，如果您向函数询问坐标 [-100, 500] 上的值，您将始终得到相同的数字（确保周围的块对齐）。

这种功能的例子是这样的：

```
function Noise1(integer x, integer y)
    n = x + y * 57
    n = (n<<13) ^ n;
    return ( 1.0 - ( (n * (n * n * 15731 + 789221) + 1376312589) & 7fffffff) / 1073741824.0);    
end function 
```

[来源](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)。

**编辑：**

我的错 - 你不应该只依赖四个角点的参数化噪声函数，你必须将它用于菱形正方形算法中生成的所有随机数。

如果这不起作用，那么你做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T17:11:19.810

看到这个答案： [使菱形方形分形算法无限](https://stackoverflow.com/questions/4977946/making-the-diamond-square-fractal-algorithm-infinite/19878302#19878302)

你最好的选择是要么完全噪音，要么使用我漂亮的无限菱形平方算法。在你的边缘截断它。如果您想将某个区域称为块，那就这样吧。在这样那样的无限领域中查找任何点都很容易。

或者我在这里的解释和实施示例：http: [//godsnotwheregodsnot.blogspot.com/2013/11/field-diamond-squared-fractal-terrain.html](http://godsnotwheregodsnot.blogspot.com/2013/11/field-diamond-squared-fractal-terrain.html)

# javascript - Javascript 在 asp.net 开发服务器上不起作用

> ID：10165780
> 
> 赞同：-1
> 
> 时间：2012-04-15T20:28:16.343
> 
> 标签：javascript, asp.net

当我从 asp.net 开发服务器运行我的 web 项目时，css 和 javascript 停止工作。早上它工作正常。然后突然停止工作。我已清除缓存但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:42:24.853

可能是您接触了一些客户端代码，例如，即使是一点点 html 也可能会破坏您的 javascript 代码。您应该下载一些将文件与以前版本进行比较的工具，这样您就可以确切地知道发生了什么

# javascript - 获取鼠标光标下的 HTML 标签

> ID：10165781
> 
> 赞同：2
> 
> 时间：2012-04-15T20:28:20.813
> 
> 标签：javascript, html

有人会碰巧知道如何在网页上的鼠标光标下直接获取 HTML 标记吗？我正在研究一种新型的所见即所得，并希望实现一些真正的拖放功能（不是在光标处插入，这在所见即所得中很常见）；为此，我需要知道当 mousebutton up 事件触发时在哪里插入菜单项。

也欢迎提出想法，因为我知道这可能是一个复杂的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:51:59.983

这是基于@mightyuhu 建议的链接的示例：

```
document.onmouseover = function(e){
    targ = getTarget(e);
    targ.style.border = '1px solid #F00';
    document.getElementById('currentElement').innerHTML = targ.tagName;
};

document.onmouseout = function(e){
    getTarget(e).style.border = 'none';
};

function getTarget(e){
    if (e.target) return e.target;
    else if (e.srcElement) return e.srcElement;
} 
```

还有这个： http: [//jsfiddle.net/5NFeX/3/](http://jsfiddle.net/5NFeX/3/) ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:35:45.017

其实，没那么复杂。您必须将事件处理程序绑定到文档本身，然后检查事件触发的原始​​目标。有关示例，请参见mightyuhu 的评论。

最后一个建议：使用主要的 JavaScript 框架之一来减轻编写跨浏览器事件处理代码的痛苦。

# iphone - 如何在单击按钮时更改 UITableView 单元格的背景图像

> ID：10165782
> 
> 赞同：0
> 
> 时间：2012-04-15T20:28:35.240
> 
> 标签：iphone, objective-c, uitableview

在我的`UITableViewCell`我有一个`UIButton`和一个标签，它被动态添加到单元格中。我也有单元格的背景图像，因此当单击此按钮时，我希望将单元格的背景替换为另一个图像，或者我希望标签的文本颜色更改为灰色或蓝色等其他颜色。

那可能吗？

这是 ny 的代码`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        NSArray *subviews = cell.contentView.subviews;
        for (UIView *vw in subviews)
        {
            if ([vw isKindOfClass:[UILabel class]])
            {
                [vw removeFromSuperview];
            }
        }

    NSArray * temp;
    NSData * imageData;
    if (dataToDisplay!=nil) {
        temp = [dataToDisplay objectAtIndex:indexPath.row];
        imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString: [temp objectAtIndex:4]]];
    }

    playButtonImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"music_player_play_button.png"]];
    pauseButtonImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"music_player_pause_button.png"]];

   UIButton* preview = [UIButton buttonWithType:UIButtonTypeCustom];
    preview.tag = 100 + indexPath.row;
    [preview addTarget:self
               action:@selector(playPreview:)
     forControlEvents:UIControlEventTouchUpInside];
    preview.backgroundColor = [UIColor clearColor];
    preview.frame = CGRectMake(11,6, 36, 35);
        [preview setBackgroundImage:playButtonImage.image forState:UIControlStateNormal];
    [cell addSubview:preview];

    UILabel * songName = [[UILabel alloc]initWithFrame:CGRectMake(60,15, 150, 15)];
    songName.tag = 100+indexPath.row;
    songName.text = [temp objectAtIndex:5];
    songName.font = [UIFont boldSystemFontOfSize:12];
    songName.backgroundColor = [UIColor clearColor];
    [cell addSubview:songName];

   UIButton * buy = [UIButton buttonWithType:UIButtonTypeCustom];
    [buy addTarget:self
                action:@selector(buySong:)
      forControlEvents:UIControlEventTouchUpInside];
        [buy setImage:[UIImage imageNamed:@"button_buy.png"] forState:UIControlStateNormal];
    buy.tag = 200 + indexPath.row;
    [buy setTitle:@"Buy" forState:UIControlStateNormal];
    buy.titleLabel.font = [UIFont boldSystemFontOfSize:8.0];
    buy.frame = CGRectMake(255,9,41, 30);
    [cell addSubview:buy];
    songsResults.tableHeaderView = headerView;
        UIImage * cellIcon;
    if (indexPath.row==[dataToDisplay count]-1) {
        cellIcon = [UIImage imageNamed:[cellViewImages objectAtIndex:1]];
    }
    else {
        cellIcon = [UIImage imageNamed:[cellViewImages objectAtIndex:0]];
    }
        cell.backgroundView = [[UIImageView alloc]initWithImage:cellIcon];

        cell.clipsToBounds = YES;

    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:07:27.103

使用标签作为按钮被按下的单元格的标识符。这样您就可以确定需要更改的单元格：

```
-(void)buySong:(id)sender {
  UIButton *buttonPressed = (UIButton*)sender;
  NSUInteger rowSelected = buttonPressed.tag - 200;
  NSIndexPath *indexPath = [NSIndexPath indexPathForRow:rowSelected inSection:0];
  CustomTableViewCell *cellSelected = (CustomTableViewCell)[self.tableView cellForRowAtIndexPath:indexPath];
  cellSelected.label.textColor = [UIColor redColor];
} 
```

您应该子类化`UITableViewCell`，以便可以向其添加新属性并在以后访问它们，就像我对`CustomTableViewCell`.

[这](http://adeem.me/blog/2009/05/30/iphone-sdk-tutorial-part-6-creating-custom-uitableviewcell-using-interface-builder-uitableview/)是一个关于如何创建自定义的教程`UITableViewCell`。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:22:50.173

我会创建一个 UITableViewCell 的子类，它有自己的操作方法来接收按钮点击，并使用一个块来处理该点击，以便您的控制器代码看起来像这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    SongCell *cell = [tableView dequeueReusableCellWithIdentifier:[SongCell identifier]];
    if (cell == nil) {
        cell = [[SongCell alloc] init];        
    }
    cell.songData = [dataToDisplay objectAtIndex:indexPath.row];
    cell.onPreviewClick =
    ^
    (SongCell *cell)
    {
        cell.isPlaying = YES;
        [self playSongAtIndexPath:indexPath]; // method to start the preview
    };
    return cell
} 
```

为了支持这一点，你的 UITableViewCell 子类看起来像这样：

```
// SongCell.h
@interface SongCell : UITableViewCell
@property (nonatomic, strong) NSArray *songData; // NSDictionary would be better
@property (nonatomic, copy) void(^onPreviewClick)(SongCell *cell);
@property (nonatomic, assign) BOOL isPlaying;
+ (NSString *)identifier;
@end 
```

使用此实现：

```
// SongCell.m
#import "SongCell.h"
@interface SongData()
@property (nonatomic, strong) NSArray *_songData;
@property (nonatomic, assign) BOOL _isPlaying;
@property (nonatomic, strong) UIButton *playImage;
@property (nonatomic, strong) UIButton *pauseImage;
@property (nonatomic, strong) UIButton *previewButton;
@property (nonatomic, strong) UILabel *songNameLabel;
- (void)previewButtonPressed:(UIButton *)button;
@end

@implementation SongCell
@synthesize onPreviewClick, _songData, _isPlaying, playImage, pauseImage, previewButton, songNameLabel;

- (id)init {
    if ((self = [super initWithStyle:UITableViewCellStyleDefault reuseIdentifier:[SongCell identifier]])) {
        self.selectionStyle = UITableViewCellSelectionStyleNone;

        self.playImage = [UIImage imageNamed:@"music_player_play_button.png"];
        self.pauseImage = [UIImage imageNamed:@"music_player_pause_button.png"];
        self.previewButton = [UIButton buttonWithType:UIButtonTypeCustom];
        previewButton.frame = CGRectMake(11,6, 36, 35);
        [previewButton addTarget:self
                          action:@selector(previewButtonPressed:)
                forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:previewButton];

        self.songNameLabel = [[UILabel alloc]initWithFrame:CGRectMake(60,15, 150, 15)];
        songNameLabel.font = [UIFont boldSystemFontOfSize:12];
        [self addSubview:songNameLabel];
    }
    return self;
}

+ (NSString *)identifier {
    return @"SongCell";
}

- (void)setSongData:(NSArray *)songData
{
    self._songData = songData;
    [self updateSubviews];
}

- (NSArray *)songData {
    return _songData;
}

- (void)setIsPlaying:(BOOL)isPlaying {
    self._isPlaying = isPlaying;
    [self updateSubviews];
}

- (BOOL)isPlaying {
    return _isPlaying;
}

- (void)previewButtonPressed:(UIButton *)button {
    if (onPreviewClick) onPreviewClick(self);
}

- (void)updateSubviews {
    if (_isPlaying) {
        [previewButton setBackgroundImage:pauseImage forState:UIControlStateNormal];
    }
    else {
        [previewButton setBackgroundImage:playImage forState:UIControlStateNormal];
    }
    songNameLabel.text = [_songData objectAtIndex:5];
}

@end 
```

警告：我没有对此进行测试。希望它没有太多错误。

# java - 在 RoR 中为程序生成的 java 清理字符串

> ID：10165783
> 
> 赞同：1
> 
> 时间：2012-04-15T20:28:46.240
> 
> 标签：java, ruby, ruby-on-rails-3, sanitization, input-sanitization

我正在编写一个 Ruby on Rails 应用程序，它通过用户输入将生成一些 Java 代码，然后服务器将编译并执行这些代码。（不要问为什么；）

问题是用户能够输入需要在 Java 中用作字符串文字的字符串。我以前将字符列入白名单，但这种方法为用户提供的灵活性不足。如何清理 RoR 中的字符串，以防止用户终止字符串，从而能够在服务器上执行任意代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:37:15.180

在 java 中终止字符串的唯一方法是`"`，但您还需要检查 Unicode 文字`\u...`，因为用户可以输入非法字符的 Unicode 字符（java 编译做的第一件事是搜索 Unicode 文字并将它们替换为正确的特点）。如果两者都不允许`"`，则`\`不应终止 java 字符串。

您没有提到使用此输入的目的，但更安全的方法是将用户输入保存到 java 类旁边的单独文件中，而不是执行以下操作：

```
String input = "#USER_INPUT#"; 
```

您可以从您保存的用户输入文件中读取文本：

```
String input = readUserInputFile(); 
```

`readUserInputFile()`是这样的：

```
public String readUserInputFile() {
    InputStream is = this.class.getClassloader.getResourceAsStream("user-input.txt");
    StringBuffer text = new StringBuffer();
    // read input stream into text
    return text.toString();
} 
```

这样，用户可以输入他们想要的任何内容，并且在生成的 java 代码和用户输入之间有一个明确的界限，这是无法跨越的。

# c# - 在 C# 方法中使用时OfType 的参数

> ID：10165785
> 
> 赞同：0
> 
> 时间：2012-04-15T20:28:52.670
> 
> 标签：c#, linq, oftype

我有这个代码来获得“A”作为过滤结果。

```
public static void RunSnippet()
{
    Base xbase = new Base(); 
    A a = new A(); 
    B b = new B();
    IEnumerable<Base> list = new List<Base>() { xbase, a, b };
    Base f = list.OfType<A>().FirstOrDefault();
    Console.WriteLine(f);
} 
```

我需要使用`IEnumerable<Base> list = new List<Base>() {xbase, a, b};`如下函数：

```
public static Base Method(IEnumerable<Base> list, Base b (????)) // I'm not sure I need Base b parameter for this?
{
    Base f = list.OfType<????>().FirstOrDefault();
    return f;
}

public static void RunSnippet()
{
    Base xbase = new Base(); 
    A a = new A(); 
    B b = new B();
    IEnumerable<Base> list = new List<Base>() { xbase, a, b };
    //Base f = list.OfType<A>().FirstOrDefault();
    Base f = Method(list);
    Console.WriteLine(f);
} 
```

我在'????'中使用什么参数 从原始代码中获得相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T20:39:20.460

似乎您正在寻找一种通用的方法来`Method`根据不同的子类型来执行`Base`. 你可以这样做：

```
public static Base Method<T>(IEnumerable<Base> b) where T: Base
{
    Base f = list.OfType<T>().FirstOrDefault();
    return f;
} 
```

这将返回第一个`b`类型的实例`T`（它必须是 的子级`Base`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:39:28.900

**如果**你想查询一个类型，你可以尝试这样的事情：

```
public static Base Method(IEnumerable<Base> list, Type typeToFind)
{
   Base f =  (from l in list  
       where l.GetType()== typeToFind 
               select l).FirstOrDefault();
   return f;
} 
```

如果这不是您要搜索的内容，请澄清。

# objective-c - 在 Objective-C 中，为什么 arrayWithObjects 不自动将 nil 添加到列表的末尾？

> ID：10165794
> 
> 赞同：0
> 
> 时间：2012-04-15T20:30:56.913
> 
> 标签：objective-c, cocoa

> **可能重复：**
> [为什么 NSArray arrayWithObjects 需要终止 nil？](https://stackoverflow.com/questions/1309535/why-does-nsarray-arraywithobjects-require-a-terminating-nil)

据说我们需要始终使用 a`nil`作为 的最后一项`arrayWithObjects`：

```
NSArray *wordList = [NSArray arrayWithObjects: @"hello", @"world", nil]; 
```

为什么`arrayWithObjects`不能不需要`nil`，只需`nil`为我们添加。一些论坛说这是因为`nil`作为其他方法的哨兵......但这不是一个不应该关注类用户的实现问题吗？

例如，如果其他语言需要

```
 list = [1 ,2, nil]    # Ruby 
```

要构建一个数组，可能会有些奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:35:43.967

因为自动 nil 插入需要一些语言或编译器扩展。

在可变参数列表的情况下，实现需要终止符来知道何时停止读取。

幸运的是，您的编译器支持标记属性，因此如果您出现并注意编译器警告，这应该不是问题。

# python - 计数以 1,2 等开头的数字 python 2.7

> ID：10165795
> 
> 赞同：-4
> 
> 时间：2012-04-15T20:31:00.410
> 
> 标签：python, python-2.7

我知道如何使用 str.count(sub[, start[, end]]) 来计算字符的出现次数，但是有没有一种简单的方法可以计算以字符串中的字符开头的单词？

```
b = "this is 100 111 123 test data"
sum(1 for word in b.split() if word.startswith('t'))
2
sum(1 for word in b.split() if word.startswith('1'))
3 
```

有效，但我认为我应该在不使用 sum 或 startswith 的情况下进行计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:02:03.893

给定您的字符串为

> > instr="我知道如何使用 str.count(sub[, start[, end]]) 来计算字符的出现次数，但是有没有一种简单的方法可以计算以字符串中的字符开头的单词？

如果您需要计算所有以字符串中的字符开头的单词，`vowels=set("aeiou")`那么您可以这样做

```
>>> sum(1 for c in re.findall("(\w)\w*",instr) if c in vowels)
11 
```

如果你想找到所有以数字开头的单词，那么

```
sum(1 for c in re.findall("(\d)\w*",instr) if c in vowels) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:42:31.250

我会这样做：

```
 s = 'this is a test'
 sum(1 for word in s.split() if word.startswith('t')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:38:55.463

假设我理解你的问题（一个例子会很有帮助）你可以尝试这样的事情：

```
 s = 'this is a test'
 target = 't'
 sum([i[0].count(target) for i in s.split()]) 
```

会告诉您字符串中的 2 个单词以您的目标字母 ('t') 开头

```
 sum([1 for i in s.split() if i[0] == target]) 
```

是一个等效但更整洁的解决方案（但遇到与评论中指出的相同的问题）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-15T21:29:18.440

首先，您需要获取每个起始字母。为此，您可以在文本上使用列表理解：

```
In [40]: tgt="This is an example text. There are several words starting with letters."

In [41]: fl=[word[0] for word in tgt.split()]

In [42]: fl
Out[42]: ['T', 'i', 'a', 'e', 't', 'T', 'a', 's', 'w', 's', 'w', 'l'] 
```

现在数一数。

对于单个字母，只需在生成的列表上使用 count 方法：

```
In [43]: fl.count('T')
Out[43]: 2 
```

对于所有字母，只需使用集合和字典：

```
In [50]: d={}

In [51]: for l in set(fl):
            d[l]=fl.count(l) 

In [52]: d
Out[52]: {'T': 2, 'a': 2, 'e': 1, 'i': 1, 'l': 1, 's': 2, 't': 1, 'w': 2} 
```

# php - 如何使用 URLRequests 提高 Flash 和 PHP 之间的安全性？

> ID：10165797
> 
> 赞同：0
> 
> 时间：2012-04-15T20:31:20.157
> 
> 标签：php, security, .htaccess, actionscript

我目前正在尝试使用 URLRequest 和 URLLoader 对象与带有 ActionScript3 的 mySQL 数据库进行通信，如下所示：

```
loader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
loader.addEventListener(Event.COMPLETE, varsLoaded);
loader.addEventListener(IOErrorEvent.IO_ERROR, errGet);
loader.load(new URLRequest("php/comm.php?var1="+var1+"&var2="+var2); 
```

据我所知，PHP 中处理的一切都是安全的，不会受到潜在的黑客之类的攻击。解决了 MySQL 注入问题，那里加密了私有数据等。同样，据我所知，PHP 代码是安全的。没有人能够访问 PHP 文件的实际源代码。然而，swf 文件并不那么安全。我知道有无数种方法可以反编译它们。有了这个，人们可以很容易地找到上面的代码，并且知道他们可以在浏览器中访问 c​​omm.php 并做任何他们喜欢的事情。在此代码进入的游戏上下文中，这意味着用户可以手动更改他们的分数等等。

有什么办法可以提高这个交易的安全性？我尝试在 PHP 代码中运行检查以确保 URLRequest 来自 Flash 文件而不是浏览器，但 $_SERVER['HTTP_REFERER'] 似乎没有返回任何内容。

由于 flash 文件和 php 文件都存储在同一台服务器上，我在想可能有某种方法来检查连接是否来自同一个 IP 地址，但我不知道该怎么做那。我还认为可能有某种方法可以更改 .htaccess 以阻止对 php/ 目录的所有访问，但我不确定如何为 flash 文件添加异常。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:37:13.267

你可以使用 RSA ....

动作脚本

[http://www.yuniti.com/As2RSA](http://www.yuniti.com/As2RSA)

PHP

[http://php.net/manual/en/function.openssl-public-encrypt.php](http://php.net/manual/en/function.openssl-public-encrypt.php)

我希望它有帮助

# c++ - C++ Socket recv() 两次读取相同的字符串 (WinSock2)

> ID：10165799
> 
> 赞同：0
> 
> 时间：2012-04-15T20:31:24.650
> 
> 标签：c++, sockets, winsock, send, recv

我正在创建一个迷宫游戏，其中两个玩家连接（一个充当主机，另一个充当玩家）。在此，我使用 send() 函数将 XML 数据作为字符串发送。（我还使用了一个预制的 Socket 类，请记住这是用于非盈利活动，这意味着它不会破坏版权。）请记住，客户端和服务器使用 WinSock2 在 Windows 7 上运行。 h 包。

我遇到的问题相当简单。我首先发送 Maze XML 文件，它可以正确读取并且能够将迷宫保存在一系列瓷砖中。此后，发送另一个 XML 文件，更新其他用户游戏的玩家（和敌人）的位置。但是，当我尝试读取此行时，它从缓冲区的开头开始读取，并且似乎缓冲区没有被清除，因为它再次开始读取 Maze XML 文件。

有没有办法清除 recv() 使用的缓冲区？当 Maze XML 没有被发送两次时，我想不出任何其他原因会被读取两次。

下面是逐字符接收 XML 的代码。这是服务器的代码，客户端代码只是颠倒发送/接收数据的顺序。不确定这是否必要或相关。

[代码]

```
while (1) {    char r;

switch(recv(s_, &r, 1, 0)) {
  case 0: // not connected anymore;
          // ... but last line sent
          // might not end in \n,
          // so return ret anyway.
    return ret;
  case -1:
    return "";
//      if (errno == EAGAIN) {
//        return ret;
//      } else {
//      // not connected anymore
//      return "";
//      }
}

ret += r;
if (r == '<') {
    counter = 0;
    check = "";
}
check += r;
if (counter == 6 && check.compare(ender) == 0)
{

    return ret;
}
//if (r == '\n')  return ret;
counter++;
} 
```

[/代码]

这是发送/接收不同 XML 文件的代码。

[代码]

```
Socket* s=in.Accept();

cout << "Accepted a Call from a Client." << endl;

// Here is where we receive the first (Maze) XML File, and
// send our maze as XML

string mazeS = s->ReceiveLineMaze();
TiXmlDocument testDoc;
testDoc.Parse(mazeS.c_str(), 0, TIXML_ENCODING_UTF8);

testDoc.SaveFile("ServerTestDoc.xml");

//testDoc.SaveFile("testXMLFromString.xml");
Tile** theirMaze = readXML(testDoc);

TiXmlDocument theMaze = maze->mazeToXML();
//theMaze.SaveFile("ClientTestWrite.XML");
TiXmlPrinter printer;

theMaze.Accept(&printer);

string toSend = printer.CStr();
cout << toSend << endl;
s->SendLine(toSend);

//RENDER STUFF IN THIS LOOP
bool inOurMaze = false;
while(boolValues->running) {

// This next line is where I want to receive the update on position
// but instead it reads the Maze XML file again, the one I read up
// above
string posReceive = s->ReceiveLineUpdate();

TiXmlDocument theirPos;
  theirPos.Parse(posReceive.c_str(), 0, TIXML_ENCODING_UTF8);

                ... This is where I process the update XML ...

TiXmlDocument updatePos = maze->updatePositionXML();
TiXmlPrinter printerPos;
updatePos.Accept(&printerPos);

string posSend = printer.CStr();
s->SendLine(posSend); 
```

[/代码]

任何帮助表示赞赏。如果不清楚，让我总结一下。

我首先交换了一个详细说明迷宫本身的 XML 文件。这工作正常。然后我尝试交换更新 XML 文件，为其他用户更新玩家/敌人的位置。但是当我尝试使用 recv(...) 时，它会再次开始读取 Maze 文件，而不是更新文件。这……令人困惑。

哦，这是发送代码（非常简单）：

[代码]

```
s += '\n';
send(s_,s.c_str(),s.length(),0); 
```

[/代码]

其中 s_ 是套接字， s.c_str 是需要发送的字符串（在这种情况下是不同的 XML 文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:30:38.340

正如@Martin 指出的那样，问题肯定出在代码上。几乎没有什么要检查的，看起来数据被读入缓冲区“ret”并且在你的控制之下。是不是每次都被刷新/清除（代码没有说清楚）。如果这没问题，请检查客户端代码以确保正确发送数据。最好的选择是通过 IDE 中的发送和接收功能进行调试，您应该能够发现问题所在。

# linux - Bash：在变量中使用单引号

> ID：10165800
> 
> 赞同：3
> 
> 时间：2012-04-15T20:31:35.430
> 
> 标签：linux, bash, curl, sed, wget

我有以下脚本（从外部服务获取我当前的 IP）：

```
#!/bin/bash
####################################################################
# Gets the public IP address of current server
####################################################################

cmd='curl -s'
#cmd='wget -q -O'
#cmd='lynx -dump'

ipservice=checkip.dyndns.org

pipecmd="sed -e 's/.*Current IP Address: //' -e 's/<.*\$//'"

# Run command
echo $($cmd $ipservice | $pipecmd) 
```

但是 sed 命令抱怨：

```
sed: -e expression #1, char 1: unknown command: `'' 
```

我一直在谷歌搜索如何在变量中使用单引号但没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T20:35:10.483

该命令被拆分为单词`sed`, `-e`, `'s/.*Current`, `IP`,`Address:`等`//'`，因此`sed`程序中的第一个命令确实以 开头`'`，这不是一个有效的`sed`命令。使用数组并引用：

```
cmd=(curl -s)
pipecmd=(sed -e 's/.*Current IP Address: //' -e 's/<.*$//')
"${cmd[@]}" "$ipservice" | "${pipecmd[@]}" 
```

注意`echo "$(command)"`相当于`command`。通常，请确保始终引用所有变量（但也有一些例外）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T20:35:42.500

你需要使用`eval`获取shell来解释变量的内容

```
echo $($cmd $ipservice | eval $pipecmd) 
```

由于额外的评估，您可能需要额外的转义，尽管在这种特殊情况下我认为它是可以的。

# android - android：更新媒体存储

> ID：10165801
> 
> 赞同：0
> 
> 时间：2012-04-15T20:31:42.807
> 
> 标签：android, mediastore

我正在制作一个尝试录制音频并列出 SD 卡上的所有音频文件的应用程序。

现在我使用光标从 MediaStore 填充列表。

现在这里的问题是，每次录制音频时，我都需要等待操作系统通过存储卡进行扫描，以便使用新录制的曲目更新我的列表。

所以我想知道每次我完成录制一些音频时是否有任何方法可以以编程方式更新媒体存储？android中是否提供了任何API或任何功能来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:46:40.253

试试这个[http://developer.android.com/reference/android/media/MediaScannerConnection.html](http://developer.android.com/reference/android/media/MediaScannerConnection.html)

# ruby-on-rails - StaticMatic 设置：指南针集成错误

> ID：10165809
> 
> 赞同：4
> 
> 时间：2012-04-15T20:32:08.477
> 
> 标签：ruby-on-rails, ruby, compass-sass, staticmatic

尝试设置新的 StaticMatic 项目时出现错误。使用后：

```
$ staticmatic setup my_site 
```

我得到以下输出，错误似乎是由 Compass 生成的：

```
c:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/app_integration.rb:27:in `lookup': No application integration exists for staticmatic (Compass::Error)
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/configuration/helpers.rb:44:in `configuration_for'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/configuration/helpers.rb:22:in `add_configuration'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/staticmatic-0.11.1/lib/staticmatic/compass.rb:5:in `<top (required)>'
    from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/staticmatic-0.11.1/lib/staticmatic.rb:21:in `block in <top (required)>'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/staticmatic-0.11.1/lib/staticmatic.rb:20:in `each'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/staticmatic-0.11.1/lib/staticmatic.rb:20:in `<top (required)>'
    from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
    from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/staticmatic-0.11.1/bin/staticmatic:3:in `<top (required)>'
    from c:/Ruby193/bin/staticmatic:19:in `load'
    from c:/Ruby193/bin/staticmatic:19:in `<main>' 
```

我在 Windows 7 机器上，目前安装了以下 gem：

```
 *** LOCAL GEMS ***

    actionmailer (3.2.3, 3.2.0, 3.1.3, 3.1.2, 2.3.5, 2.2.2)
    actionpack (3.2.3, 3.2.0, 3.1.3, 3.1.2, 2.3.5, 2.2.2)
    activemodel (3.2.3, 3.2.0, 3.1.3, 3.1.2)
    activerecord (3.2.3, 3.2.0, 3.1.3, 3.1.2, 2.3.5, 2.2.2)
    activeresource (3.2.3, 3.2.0, 3.1.3, 3.1.2, 2.3.5, 2.2.2)
    activesupport (3.2.3, 3.2.0, 3.1.3, 3.1.2, 2.3.5, 2.2.2)
    acts-as-taggable-on (2.2.2)
    acts_as_commentable (3.0.1)
    addressable (2.2.7, 2.2.6)
    ancestry (1.2.5)
    ansi (1.4.2, 1.4.1)
    arel (3.0.2, 2.2.3, 2.2.1)
    authlogic (3.1.0)
    aws-s3 (0.6.2)
    babosa (0.2.2)
    bborn-acts-as-taggable-on (2.2.1)
    bcrypt-ruby (3.0.1 x86-mingw32)
    bigdecimal (1.1.0)
    bootstrap-sass (2.0.2, 2.0.0)
    bootstrap-will_paginate (0.0.7, 0.0.5)
    builder (3.0.0)
    bundler (1.1.3, 1.0.21)
    capybara (1.1.2)
    childprocess (0.3.1)
    chunky_png (1.2.5)
    cocaine (0.2.1)
    coffee-rails (3.2.2, 3.1.1)
    coffee-script (2.2.0)
    coffee-script-source (1.3.1, 1.2.0)
    compass (0.12.1)
    compass-rails (1.0.1)
    configatron (2.9.0)
    desert (0.5.4)
    diff-lcs (1.1.3)
    disguise (3.0.2)
    dynamic_form (1.1.4)
    erb2haml-win (0.1.4)
    erubis (2.7.0)
    execjs (1.3.0, 1.2.13)
    factory_girl (3.1.0, 2.3.2)
    factory_girl_rails (3.1.0, 1.4.0)
    faker (1.0.1)
    faraday (0.7.6)
    ferret (0.11.5 mswin32)
    ffi (1.0.11)
    foreigner (1.1.6)
    friendly_id (3.2.1)
    fssm (0.2.8.1)
    guard (1.0.1)
    guard-rspec (0.7.0, 0.5.5)
    haml (3.1.4)
    haml-rails (0.3.4)
    heroku (2.24.0, 2.18.1)
    hike (1.2.1)
    hpricot (0.8.6, 0.8.5)
    htmlentities (4.3.1)
    i18n (0.6.0)
    io-console (0.3)
    journey (1.0.3)
    jquery-rails (2.0.2, 2.0.0, 1.0.19)
    json (1.6.6, 1.6.5, 1.6.4, 1.5.4)
    kaminari (0.13.0)
    koala (1.4.0)
    launchy (2.1.0, 2.0.5)
    log4r (1.1.10)
    macaddr (1.5.0)
    mail (2.4.4, 2.3.3, 2.3.0)
    meta_search (1.1.3)
    mime-types (1.18, 1.17.2)
    minitest (2.12.0, 2.5.1)
    multi_json (1.2.0, 1.1.0, 1.0.4)
    multi_xml (0.4.2)
    multipart-post (1.1.5)
    mysql (2.8.1 x86-mingw32)
    net-ldap (0.2.2)
    netrc (0.7.1)
    nokogiri (1.5.2 x86-mingw32)
    oa-basic (0.3.2)
    oa-core (0.3.2)
    oa-enterprise (0.3.2)
    oa-more (0.3.2)
    oa-oauth (0.3.2)
    oa-openid (0.3.2)
    oauth (0.4.5)
    oauth2 (0.5.2)
    omniauth (0.3.2)
    paperclip (2.4.5)
    pg (0.13.2 x86-mingw32, 0.12.2 x86-mingw32)
    polyamorous (0.5.0)
    polyglot (0.3.3)
    prototype-rails (3.2.1)
    pyu-ruby-sasl (0.0.3.3)
    rack (1.4.1, 1.3.6, 1.0.1)
    rack-cache (1.2, 1.1)
    rack-mount (0.8.3)
    rack-openid (1.3.1)
    rack-ssl (1.3.2)
    rack-test (0.6.1)
    rails (3.2.3, 3.2.0, 3.1.3, 3.1.2, 2.3.5, 2.2.2)
    rails_autolink (1.0.6)
    railties (3.2.3, 3.2.0, 3.1.3, 3.1.2)
    rake (0.9.2.2)
    rakismet (1.1.2)
    rdiscount (1.6.8)
    rdoc (3.12, 3.9.4)
    recaptcha (0.3.4)
    RedCloth (4.2.9 x86-mingw32)
    rest-client (1.6.7)
    rflickr (2006.02.01)
    ri_cal (0.8.8)
    rmagick (2.12.0 mswin32)
    rspec (2.9.0)
    rspec-core (2.9.0)
    rspec-expectations (2.9.1)
    rspec-mocks (2.9.0)
    rspec-rails (2.9.0)
    ruby-openid (2.1.8)
    ruby-openid-apps-discovery (1.2.0)
    ruby_parser (2.3.1)
    rubygems-update (1.8.21, 1.8.15)
    rubyntlm (0.1.1)
    rubyzip (0.9.6.1, 0.9.5)
    sanitize (2.0.3)
    sass (3.1.15, 3.1.12)
    sass-rails (3.2.5, 3.2.4, 3.1.6, 3.1.5)
    selenium-webdriver (2.20.0)
    sexp_processor (3.1.0, 3.0.10)
    sprockets (2.4.0, 2.1.2, 2.0.3)
    sqlite3 (1.3.5 x86-mingw32, 1.3.3 x86-mingw32)
    sqlite3-ruby (1.3.3)
    staticmatic (0.11.1)
    systemu (2.5.0)
    term-ansicolor (1.0.7)
    test-unit (2.4.8)
    thor (0.14.6)
    tilt (1.3.3)
    tinymce-rails (3.4.9)
    treetop (1.4.10)
    turn (0.9.4, 0.8.3)
    tzinfo (0.3.33, 0.3.32, 0.3.31)
    uglifier (1.2.4, 1.2.3, 1.2.2, 1.2.1)
    uuid (2.3.5)
    will_paginate (3.0.3)
    win32console (1.3.0 x86-mingw32)
    xml-simple (1.1.1)
    XMLCanonicalizer (1.0.1)
    xpath (0.1.4)
    yamler (0.1.0) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T22:00:15.960

看起来`staticmatic`与较新`0.12.x`版本的`compass`. 要修复它，请卸载`compass (0.12.x)`，然后安装`compass (0.11.7)`：

```
gem uninstall compass
gem install compass -v 0.11.7 
```

那应该解决它。

# android - 尝试使用 int 和字符串进行查询

> ID：10165817
> 
> 赞同：0
> 
> 时间：2012-04-15T20:33:04.950
> 
> 标签：android, sqlite

我没有太多运气弄清楚如何使用 int 和字符串进行查询。我找到了两个整数的例子，我找到了两个字符串的例子。我尝试了不同的组合，但似乎没有任何效果。以下是我尝试过但没有奏效的两个示例。我究竟做错了什么。我自己使用了 inpspection_id 和 item_name ，它们都可以工作。

尝试1：

```
public int getId(int inspection_id ,String item_name)throws Exception
{
    Cursor c = db.query(DB_TABLE, new String[] {KEY_INSPECTION_ID, KEY_ITEM_NAME},
            "inspection_id=" + inspection_id +"item_name='"+ item_name + "'", null, null, null, null);
    int id=c.getColumnIndex(KEY_ROWID);
    c.moveToFirst();
    String result=c.getString(id);
    int primId=Integer.parseInt(result);
    c.close();
    return primId;

} 
```

尝试2：

```
public int getId(int inspection_id ,String item_name)throws Exception
{
    Cursor c = db.query(DB_TABLE, new String[] {KEY_INSPECTION_ID, KEY_ITEM_NAME},
            "inspection_id=" + inspection_id +"AND KEY_ITEM_NAME = ?", new String[]{item_name}, null, null, null);
    int id=c.getColumnIndex(KEY_ROWID);
    c.moveToFirst();
    String result=c.getString(id);
    int primId=Integer.parseInt(result);
    c.close();
    return primId;

} 
```

尝试3：

```
public int getId(int inspection_id ,String item_name)throws Exception
{
    String s_id= Integer.toString(inspection_id);
    Cursor c = db.query(DB_TABLE, new String[] {KEY_INSPECTION_ID, KEY_ITEM_NAME},
            "KEY_INSPECTION_ID = ? AND KEY_ITEM_NAME = ?",
             new String[] {  s_id, item_name }, null, null, null);
    int id=c.getColumnIndex(KEY_ROWID);
    c.moveToFirst();
    String result=c.getString(id);
    int primId=Integer.parseInt(result);
    c.close();
    return primId;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:36:02.997

尝试这种方式，用单引号表示 int 。

```
"inspection_id='" + inspection_id +"'item_name='"+ item_name + "'" 
```

# web - 用于网络视频流的 MKV、MP4 或 FLV

> ID：10165818
> 
> 赞同：0
> 
> 时间：2012-04-15T20:33:09.867
> 
> 标签：web, video-streaming, containers, aac, apache-modules

我目前正在为我放在我网站上的视频使用什么容器而感到紧张。

我最近开始上传游戏/演练视频，发现需要一个可以容纳高清视频且不受文件大小、编解码器（AAC 或 AVC）或分辨率限制的容器（将来我希望能够支持 5K 视频) 和 5.1 杜比数字及以上音频。当然，我不希望 5K 能够有效地进行流式传输，我只是希望它可用。

这就是混乱开始的地方。

我目前使用 .flv 容器，因为人们说它更好。资源消耗少，应用广泛，支持常用编解码器。这个问题很简单。它无法支持我要显示的高清内容：5.1 杜比音频和无限文件大小。

MP4 是我所需要的一切，但我听说它可能会响应缓慢，伪流模块未被浏览器广泛接受，而且我没有时间每次有人想要更新到 .mp5、6、12 等时更改容器.

这就是我将 .mkv 作为容器包含在内的地方。.MKV 还支持我想要的一切（HD、3D）、所有编解码器、通用和无限的文件属性。唯一的问题是它无法流式传输。

我知道这是一个程序员网站，但可能在未来，因为我们只能推进网络连接，我或其他人可以为 apache .mkv 流式传输模块编写一个模块。我不知道 apache 模块源在哪里，所以我现在不能这样做。

我介于 .flv 和 .mkv 之间。我并不真正关心 .mp4，因为如果我想要面向未来，我需要 .mkv，如果我不关心未来或更新，我应该继续使用 .flv。

大家怎么看。编写 .mkv 流媒体模块真的有那么难吗？

不包括网络流媒体，这三个中的哪个会更好。视频质量 (AAC AVC)、文件大小限制、通用、网络支持等。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:57:32.283

您可以使用窗口媒体流平台。之后，他们会照顾你的每一个问题。但是，带有 h264 视频和 aac 音频以及使用 flash 流式传输/播放的 MP4 也不错。

# javascript - 如何在 Firefox 中打印 iframe PDF？

> ID：10165821
> 
> 赞同：1
> 
> 时间：2012-04-15T20:33:32.470
> 
> 标签：javascript, pdf, firefox, printing

是的，我也看到了其他关于此的问题，但他们没有帮助我，所以这是我的代码。

```
$("#raspe4atat_<?= $ui->item_id ?>").click(function(){
    $.ajax({
        url: "/raspe4atat/<?= $ui->item_id ?>",
        type: "GET",
        success: function(){
            $.ajax({
                url: "/iframe/<?= $ui->item_id ?>",
                type: "GET",
                success: function(r){
                    $("#not_enough_money_<?= $ui->item_id ?>").append(r);
                    setTimeout(function(){
                        document.getElementById('pdf_<?= $ui->item_id ?>').contentWindow.print();
                        //window.frames['iframe_<?= $ui->item_id ?>'].print();
                    }, 1000);
                }
            });
        }
    });
    return false;
}); 
```

这是 iframe：

```
<iframe name="iframe_<?= $ui->item_id ?>" style="position: absolute; top: -1000px;" id="pdf_<?= $ui->item_id ?>" src="<?= base_url().'pdf/'."coupon_info_".$ui->user_id.'.pdf' ?>" width="0" height="0">
</iframe> 
```

此代码在 google chrome 中有效，但在 Firefox 中无效。

首先它在服务器中创建pdf，然后在页面中生成，然后等待1秒然后打印它，但它在firefox中不起作用，如果我取消注释的行，然后firefox会询问我是否要停止更多对话窗口？你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-04T14:28:45.313

在我看来，您正在检查的浏览器将过时，因为我已经在所有浏览器中检查了以下代码并且它工作正常。我检查了 Chrome、Firefox 和 Opera，我还检查了 IE，它在所有浏览器中都运行良好。

**所以请先更新您的浏览器。**

```
window.frames['iframe_1'].focus();
window.frames['iframe_1'].print(); 
```

# javascript - 类似 Ext JS Feed Viewer 的功能

> ID：10165822
> 
> 赞同：0
> 
> 时间：2012-04-15T20:33:34.653
> 
> 标签：javascript, model-view-controller, extjs, extjs-mvc

我想使用 Ext JS MVC 构建一个界面，但我不太确定要使用哪些元素。我想要实现的类似于 Ext JS 的[Feed Viewer](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/feed-viewer/feed-viewer.html)。忽略左边的框架，我不想要那个，但我想要的是那个网格和它下面的那个东西（无法识别它是什么类型的对象）。

我希望能够有一个网格，当您单击一个条目时，它应该在下面的部分中显示更多详细信息。

谁能帮我找到我需要实现的对象（除了我已经实现的网格）以便从提要查看器中获得示例？一个非常简单的教程的链接也很好，如果有人有的话:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:20:40.533

下面的部分可能是一个面板 - Ext.panel.Panel（我认为在 Feed Viewer 中它是）。您可以使用 Ext.XTemplate 用 html/text 填充它。That is, when any row in the grid selected (create listener for selectionchange event), you get associated record and use it with Ext.XTemplate to generate HTML.

```
selectionchange: function(sm, records) {
    var panel = Ext.getCmp('mypanel');
    var tpl = new Ext.XTemplate(
        '<p>Name: {name}</p>'
    );
    if (records.length > 0) {
        tpl.overwrite(panel.body, records[0].data);
    } else {
        panel.update('');
    }
} 
```

您还可以在面板配置中指定模板：

```
{
    xtype: 'panel',
    tpl: '<p>Name: {name}'
} 
```

...这种方式监听器被简化为：

```
selectionchange: function(sm, records) {
    var panel = Ext.getCmp('mypanel');
    if (records.length > 0) {
        panel.update(records[0].data);
    } else {
        panel.update('');
    }
} 
```

# sql-server - 如何从 2 列的 UNION 中获取 TOP 1 值？

> ID：10165823
> 
> 赞同：3
> 
> 时间：2012-04-15T20:33:46.630
> 
> 标签：sql-server

这是查询，如何从结果中选择前 1 个？这是针对 SQL Server 的。

```
SELECT column1 
FROM table 
WHERE column2 = 'Whatever' AND column3 = 'Sure'

UNION

SELECT column4 
FROM table 
WHERE column2 = 'Whatever' AND column3 = 'Sure' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T20:38:22.437

尝试这个：

```
SELECT TOP 1 * FROM
(
  SELECT column1 FROM table WHERE column2 = 'Whatever' AND column3 = 'Sure'
  UNION
  SELECT column4 FROM table WHERE column2 = 'Whatever' AND column3 = 'Sure'
) R
ORDER BY Column1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:35:56.433

尝试：

```
SELECT max(Column) FROM (
  SELECT column1 as Column FROM table WHERE ....
  UNION 
  SELECT column4 as Column FROM table WHERE ....
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T20:36:18.690

你的意思是

```
SELECT TOP 1 * 
FROM (
    SELECT column1 FROM table WHERE column2 = 'Whatever' AND column3 = 'Sure'
    UNION
    SELECT column4 FROM table WHERE column2 = 'Whatever' AND column3 = 'Sure') 
```

# ruby-on-rails - 在 Rails 迁移上排序的模式字段

> ID：10165824
> 
> 赞同：1
> 
> 时间：2012-04-15T20:33:47.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当通过迁移向表中添加一些字段时，是否可以告诉 rails 将 id 列保留在模式的顶部，并将时间戳记在底部？

我想要的是在控制台上使用 rails 时始终将这些字段放在相同的位置，我知道可以在 schema.rb 中对它们重新排序并重新加载它，但我也在寻找一种更适合生产环境的更清洁的方法。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:42:35.467

您可以从 Rails 2.3.6+ 中获得类似的东西（可能目前仅在 Mysql 中）：

```
add_column :table_name, :column_name, :column_type, after: :other_column_name 
```

或者

```
change_table :the_table do |t|
  t.column_type :column_name, after: :other_column_name
end 
```

资料来源：
-[在 Rails 迁移 (MySQL) 中，您能否指定新列的位置？](https://stackoverflow.com/questions/371796/in-a-rails-migration-mysql-can-you-specify-what-position-a-new-column-should)
- [https://rails.lighthouseapp.com/projects/8994/tickets/3286-patch-add-support-for-mysql-column-positioning-to-migrations](https://rails.lighthouseapp.com/projects/8994/tickets/3286-patch-add-support-for-mysql-column-positioning-to-migrations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-09T16:54:35.647

您可能对[fix-db-schema-conflicts](https://github.com/jakeonrails/fix-db-schema-conflicts)`db/schema.rb` gem 感兴趣，它会在生成文件时自动按字母顺序对列进行排序。

时间戳不一定是列表中的最后一个，但架构不会依赖于添加列的顺序（通过迁移）。

# c++ - 有没有办法在没有 win32 api、openGL、direct X 和其他东西的情况下创建一个 c++ gui 游戏？

> ID：10165828
> 
> 赞同：-6
> 
> 时间：2012-04-15T20:34:32.933
> 
> 标签：c++, api

如果不是，最接近可以制作 gui 游戏的 c++ 语法的 pl 和 c++ api 是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:39:18.143

好吧，您始终可以为裸机编写自己的操作系统和设备驱动程序。然后在此基础上构建您的游戏。如果您不想编写完整的操作系统，您仍然可以自己编写设备驱动程序。如果您不想实现设备驱动程序，那么您可以在不借助任何专用硬件的情况下完成所有内容生成，并通过编写软件光栅化器将所有繁重的工作交给 CPU。但是您仍然需要操作系统提供的 API 来输出内容。这些 API 将是 DirectX 和 Win32 API（在 Windows 上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T20:38:50.887

等等...所以你想编写一个 Windows GUI 游戏而不使用任何让你首先访问屏幕的 API？

不，不可能。Windows 强调防止您不受限制地访问硬件。（可以说它的*重点*是为你管理硬件，并防止程序在它们想要做的事情时相互践踏。如果它让你对显卡做任何你想做的事情，它就无法做到这一点。 ) 最接近它的是 DirectX。可能是 SDL，但似乎甚至在 Windows 上使用 DirectX。

如果您想编写自己的操作系统或其他东西，或者使用蹩脚的准系统操作系统作为基础，这是可行的。但是那样它就不是Windows游戏了。可以想象，您还可以编写一个向您提供帧缓冲区或其他东西的服务……但是，您将编写 DirectX 的半成品版本。并使您所有用户的机器不稳定，最终导致您没有任何用户。（最重要的是，*您必须使用 Win32 API 作为服务运行*。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T20:39:11.953

如果你想保持理智，那么没有。OS API 的替代方案是……没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T20:46:27.847

好吧，是的，如果您打算编写一个只会在命令控制台中生成 ascii 艺术的游戏。如果没有 Win32 api、OpenGL、DirectX，你将如何处理显卡、声卡、输入设备、网络接口、GPU 加速、着色器、帧速率等？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T20:46:44.917

为可以直接访问硬件的平台编写游戏，例如 x86 PC + DOS 并在该平台或在 DosBox 等 VM 中运行。

# php - PHPUnit Mock 以后改期望

> ID：10165831
> 
> 赞同：12
> 
> 时间：2012-04-15T20:35:02.160
> 
> 标签：php, mocking, phpunit

我有一个简单的用例。我想要一个 setUp 方法，它会导致我的模拟对象返回一个默认值：

```
$this->myservice
        ->expects($this->any())
        ->method('checkUniqueness')
        ->will($this->returnValue(true)); 
```

但是在**一些**测试中，我想返回一个不同的值：

```
$this->myservice
        ->expects($this->exactly(1))
        ->method('checkUniqueness')
        ->will($this->returnValue(false)); 
```

我过去曾在 C++ 中使用过 GoogleMock，它有“returnByDefault”或其他东西来处理它。我不知道这在 PHPUnit 中是否可行（没有 api 文档，而且代码很难通读以找到我想要的东西）。

现在我不能只更改`$this->myservice`为一个新的模拟，因为在设置中，我将它传递给其他需要模拟或测试的东西。

我唯一的其他解决方案是我失去了设置的好处，而是必须为每次测试建立所有的模拟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:52:32.027

您可以将`setUp()`代码移动到另一个具有参数的方法中。然后从 调用此方法`setUp()`，您也可以从测试方法调用它，但参数与默认参数不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-02T19:41:58.417

继续构建模拟，`setUp()`但在每个测试中分别设置期望：

```
class FooTest extends PHPUnit_Framework_TestCase {
  private $myservice;
  private $foo;
  public function setUp(){
    $this->myService = $this->getMockBuilder('myservice')->getMock();
    $this->foo = new Foo($this->myService);
  }

  public function testUniqueThing(){
     $this->myservice
        ->expects($this->any())
        ->method('checkUniqueness')
        ->will($this->returnValue(true));

     $this->assertEqual('baz', $this->foo->calculateTheThing());
  }

  public function testNonUniqueThing(){
     $this->myservice
        ->expects($this->any())
        ->method('checkUniqueness')
        ->will($this->returnValue(false));

     $this->assertEqual('bar', $this->foo->calculateTheThing());

  }

} 
```

这两个期望不会相互干扰，因为 PHPUnit 实例化了一个新的 FooTest 实例来运行每个测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T11:36:47.123

另一个小技巧是通过引用传递变量。这样你就可以操纵价值：

```
public function callApi(string $endpoint):bool
{
    // some logic ...
}

public function getCurlInfo():array 
{
    // returns curl info about the last request
} 
```

上面的代码有 2 个公共方法：`callApi()`调用 API，第二个`getCurlInfo()`方法提供关于已完成的最后一个请求的信息。我们可以通过传递一个变量作为参考 ，`getCurlInfo()`根据提供/模拟的参数模拟输出：`callApi()`

```
$mockedHttpCode = 0;
$this->mockedApi
    ->method('callApi')
    ->will(
        // pass variable by reference:
        $this->returnCallback(function () use (&$mockedHttpCode) {
            $args = func_get_args();
            $maps = [
                ['endpoint/x', true, 200],
                ['endpoint/y', false, 404],
                ['endpoint/z', false, 403],
            ];
            foreach ($maps as $map) {
                if ($args == array_slice($map, 0, count($args))) {
                    // change variable:
                    $mockedHttpCode = $map[count($args) + 1];
                    return $map[count($args)];
                }
            }
            return [];
        })
    );

$this->mockedApi
    ->method('getCurlInfo')
    // pass variable by reference:
    ->willReturn(['http_code' => &$mockedHttpCode]); 
```

如果你仔细观察，`returnCallback()`-logic 实际上和 做同样的事情`returnValueMap()`，只是在我们的例子中，我们可以添加第三个参数：来自服务器的预期响应代码。

# c# - 从 VBA 或 C# Interop 获取 Microsoft Word 中的文本位置

> ID：10165833
> 
> 赞同：2
> 
> 时间：2012-04-15T20:35:12.543
> 
> 标签：c#, vba, ms-word, interop, position

我想访问 Microsoft Word 中每个不可分割单元的位置和大小。此类单位的示例包括单个字符、图像等。

目的是根据单位位置和大小应用视觉覆盖。我将不了解目标文档中的内容。

想象一下这个问题的文本在一个 word 文档中。我需要能够迭代每个字符，包括空格和回车并获取大小和位置。

**编辑**
您的答案是否考虑宏、互操作、加载项或 OLE 嵌入并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:12:27.593

检索对象显示坐标的方法是[`Window.GetPoint`](http://msdn.microsoft.com/en-us/library/ff836626.aspx)（office interop 版本的链接，VBA 中的相同内容）。

至于“不可分割的单元”，您可以使用可用的集合将任何您想要的含义放入其中。
例如，如果你希望它是字符，你可以使用`Document.Range.Characters`，它是一个字符的集合，每个字符都是一个`Range`.
或者您可以使用`Document.Range.InlineShapes`作为文本一部分的图片。
或`Document.Range.ShapeRange`枚举“浮动”形状。

此时您可能正在考虑[`Window.RangeFromPoint`](http://msdn.microsoft.com/en-us/library/ff192575.aspx)从其窗口坐标中计算出一个对象。

# android - 使用 WakefulIntentService 管理异步 GPS 更新

> ID：10165834
> 
> 赞同：0
> 
> 时间：2012-04-15T20:35:14.743
> 
> 标签：android, service, asynchronous, gps, android-pendingintent

我开发了一个应用程序，它通过 GPS 跟踪用户，并在他们通过收费桥时提醒他们。

我显然需要 GPS 位置监听器在服务中运行，我还需要一个部分唤醒锁，以便它可以在手机睡着时偶尔运行。我还希望 GPS 更新的频率根据与收费桥的距离而有所不同，以节省电池。cwac- WakefulIntent 服务似乎非常适合我想要实现的目标。

然而，在我走这条路之前，我可以看到我遇到了一些问题（如果你原谅双关语;-)。

一旦 doWakefulWork() 完成，WakefulIntent 服务是否退出并释放唤醒锁，即使我正在等待我的位置侦听器返回一些 GPS 更新。

在我获得位置更新并清理我的听众之前，如何防止 doWakefulWork 返回。

如果警报管理器再次启动服务时（即在 doWakefulWork() 完成之前）我仍在等待 GPS 更新，会发生什么情况？

如何在服务的实例之间保留数据。我可以将一系列 GPS 坐标填充到 SharedPrefs 中吗？

最后，当我靠近收费桥时，我需要更频繁地更新 GPS。我是在 doWakefulWork() 中管理它还是通过更改 scheduleAlarms() 来管理它，以便它使用 setRepeating() 并由服务存储在 SharedPrefs 中的分钟数。这里的想法是根据与感兴趣区域的接近程度来限制 GPS 的使用。

虽然演示应用程序提供了一个可以使用的模板，但我找不到任何可靠的 WakefulIntentService 执行任何异步作业的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:47:31.597

> cwac- WakefulIntent 服务似乎非常适合我想要实现的目标。

并不真地。`IntentService`不利于位置跟踪，因为您无法注册侦听器。该服务将在结束后关闭`onHandleIntent()`。

就个人而言，我会使用`addProxmityAlert()`on `LocationManager`，而不是自己弄乱这些。

> 一旦 doWakefulWork() 完成，WakefulIntent 服务是否退出并释放唤醒锁，即使我正在等待我的位置侦听器返回一些 GPS 更新。

是的。

> 在我获得位置更新并清理我的听众之前，如何防止 doWakefulWork 返回。

你没有。您使用其他东西，例如[`LocationPoller`](https://github.com/commonsguy/cwac-locpoll), 或者，更好的是，`addProximityAlert()`。

> 如果警报管理器再次启动服务时（即在 doWakefulWork() 完成之前）我仍在等待 GPS 更新，会发生什么情况？

您确保有适当的超时逻辑来防止这种情况发生，例如可以在`LocationPoller`.

> 如何在服务的实例之间保留数据。我可以将一系列 GPS 坐标填充到 SharedPrefs 中吗？

是的，或者是数据库，或者是您选择的格式的文件。

> 最后，当我靠近收费桥时，我需要更频繁地更新 GPS。我是在 doWakefulWork() 中管理它还是通过更改 scheduleAlarms() 来管理它，以便它使用 setRepeating() 并由服务存储在 SharedPrefs 中的分钟数。

你会改变你的闹钟时间表。

> 我还没有找到任何可靠的 WakefulIntentService 做任何异步工作的例子。

`WakefulIntentService` *是*“异步作业”。它不执行其他异步作业。

# c# - 这是对多线程设计的正确使用吗？（C＃）

> ID：10165835
> 
> 赞同：7
> 
> 时间：2012-04-15T20:35:21.043
> 
> 标签：c#, .net, multithreading

我正在构建一个由服务器和客户端组成的小型聊天程序。服务器保留与之交互的客户端列表。

我在服务器上有两个工作线程。一个处理传入的客户端连接。另一个处理传入的客户端消息。

现在，由于两个线程都与一个名为“clients”的列表交互，所以我做了这样的事情。

```
// The clients list looks something like this...
List<TcpClient> clients;

// This is running on one thread.
ConnectionHandler()
{
    while(true)
    {
        // Wait for client to connect, etc. etc.

        // Now, add the client to my clients List.
        lock(clients)clients.Add(myNewClient);
    }
}

// This is running on another thread.
ClientHandler()
{
    while(true)
    {
        lock(clients)
        {
            /*
            This will be handling things like incoming messages
            and clients disconnecting (clients being removed from
            the 'clients' List
            */
        }
    }
} 
```

这是正确使用锁来防止我的列表同时被两个不同的线程更改吗？

到目前为止，我没有遇到任何问题，但我只是想确保它是正确的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T20:38:04.057

这是正确的，但要确保 ClientHandler 不会持有锁太久。它不应该在阻塞时持有锁（例如，由套接字上的 IO 操作引起）。如果您违反此规则，您会发现您的吞吐量被破坏（仍然保持正确性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:41:52.047

你有一个作家和多个读者吗？看看[ReaderWriterLock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx)和[这个集合](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T20:48:15.073

看起来还可以。聊天服务器对于多线程挑战来说非常棘手。锁内可能会引发异常，例如，当服务器-客户端套接字对象断开连接，但在其线程可以从列表中删除对象之前，另一个线程锁定列表并尝试写入断开连接的套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T20:40:50.610

注意（在顶部）-因为您没有初始化该字段（即，我看不到您是如何做的，何时可能销毁并重新初始化等）-**确保您锁定了同一个实例**，例如[在代码执行期间可能会更改的对象上](https://stackoverflow.com/questions/8578870/lock-on-an-object-that-might-change-during-code-execution)查看此锁

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T14:23:35.237

对我来说看起来不错，但我会做这个更正：

```
private readonly List<TcpClient> clients = new List<TcpClient>(); 
```

您还可以在构造函数中创建列表，但将其保留为**readonly**。这是确保您锁定同一个对象的关键。否则，如果您发生重新创建`clients`列表，您的代码将不再是线程安全的。

# javascript - 谷歌分析 - 保持页面活跃

> ID：10165856
> 
> 赞同：2
> 
> 时间：2012-04-15T20:37:59.540
> 
> 标签：javascript, google-analytics, tracking

如何在谷歌分析中保持用户的“会话”活跃？例如几乎不刷新的页面（在线游戏、虚拟世界）。

每隔几分钟运行一次谷歌分析 javascript 会起作用吗？什么是实现这一目标的好方法？

谷歌的目标是报告正确的平均网站时间，一段时间不加载页面似乎告诉谷歌会话已经结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:48:59.673

您可以使用[_setSessionCookieTimeout()](http://code.google.com/apis/analytics/docs/gaJS/gaJSApiBasicConfiguration.html#_gat.GA_Tracker_._setSessionCookieTimeout)：

> **_setSessionCookieTimeout()**
> 
> _setSessionCookieTimeout(cookieTimeoutMillis)
> 
> 以毫秒为单位设置新的会话 cookie 超时。默认情况下，会话超时设置为 30 分钟。会话超时用于计算访问次数，因为访问会在浏览器不活动 30 分钟或浏览器退出后结束。如果您想根据您的特定需要更改“会话”的定义，您可以传入毫秒数来定义一个新值。这将影响计算访问次数以及在计算其他值时使用访问的每个部分中的访问报告。例如，如果您缩短会话超时，访问次数会增加，如果您增加会话超时，访问次数会减少。您可以将过期超时更改为 0，以指示应在关闭浏览器时删除此 cookie。

```
_gaq.push(['_setSessionCookieTimeout', 1800000]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:03:03.873

GA 中的会话时间由访问者执行的最后一次综合浏览量跟踪，因此为了获得正确的综合浏览量，您可以每 n 秒（简单的 js 计时器）或您想要的任何其他事件（滚动页面的特定区域）执行一次虚拟综合浏览量、按钮点击等）。

请查看本教程了解详细信息：[http ://services.google.com/analytics/breeze/en/v5/et_vpsv22_ad1_2/](http://services.google.com/analytics/breeze/en/v5/et_vpsv22_ad1_2/)

这将为您提供更准确的访问时长数据，但请记住，这些虚拟网页浏览量将在您的报告中显示为所有其他网页浏览量，因此我希望不要弄乱您想要通过复制您的数据来创建单独的配置文件的数据现有的并过滤掉主要的虚拟网页浏览量。

或者，您可以尝试使用事件跟踪（从实现的角度来看，它的工作原理几乎相同）。

# sql - Oracle 讲师所说的数据时间格式不起作用

> ID：10165859
> 
> 赞同：1
> 
> 时间：2012-04-15T20:38:05.887
> 
> 标签：sql, oracle

我刚刚查看了 OCA 认证问题，我意识到有些地方是不正确的。他们问：

> 请按升序提供所有用户的录用时间（HR 用户）

所以我写了下一个查询：

```
SELECT employee_id, first_name, last_name, hire_date
  FROM employees 
 WHERE hire_date BETWEEN '01/01/80' AND '01/01/99'
 ORDER BY hire_date; 
```

并且指导说这是不正确的，因为该数据时间不正确！那应该是'01-JAN-80'。什么？这难以置信！

我的笔记本电脑上没有安装数据库，但我确信我在上次工作中多次运行此查询，并且数据格式`/`为`-`.

欢迎任何建议。

**更新**

我刚刚在 xe 10g 中对其进行了测试，并且绝对`/`不是`-`：

[http://imageshack.us/photo/my-images/28/truethat.jpg/](http://imageshack.us/photo/my-images/28/truethat.jpg/) ()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T02:12:39.423

你和你的导师都不对。你们中的任何一个都可能碰巧偶尔是正确的。

如果将日期与字符串进行比较，Oracle 必须将字符串转换为日期。为了做到这一点，它使用会话的当前`NLS_DATE_FORMAT`. 不同的客户会有不同的默认值`NLS_DATE_FORMAT`——不同的地区使用不同的默认格式，不同的人会喜欢不同的格式。如果您依赖隐式转换，那么只要会话`NLS_DATE_FORMAT`不符合您的期望，您的代码就会失败。而且，不可避免地，这意味着代码将在最不合时宜的时刻失败。

不应将日期与字符串进行比较，而应**始终**将日期与日期进行比较。在 Oracle 中有两种方法可以做到这一点。首先，您可以使用`TO_DATE`具有适当格式字符串的显式，即

```
SELECT employee_id, first_name, last_name, hire_date
  FROM employees 
 WHERE hire_date BETWEEN to_date('01/01/80','mm/dd/rr') AND to_date('01/01/99','mm/dd/rr')
 ORDER BY hire_date; 
```

其次，您可以使用 ANSI 日期文字。ANSI 日期文字始终使用格式`YYYY-MM-DD`

```
SELECT employee_id, first_name, last_name, hire_date
  FROM employees 
 WHERE hire_date BETWEEN date '1980-01-01' AND date '1999-01-01'
 ORDER BY hire_date; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T00:53:12.347

就个人而言，我不依赖隐式转换。这往往会导致未来的意外悲伤。如果要求在日期范围之间提供过滤器，我会很明确。选择您想要的任何格式，但如果它可能会造成混淆，请尝试尽可能多地消除混淆：

```
SELECT employee_id, first_name, last_name, hire_date
  FROM employees 
  WHERE hire_date BETWEEN TO_DATE('JAN-01-1980', 'MON-DD-YYYY')
                      AND TO_DATE('JAN-01-1999', 'MON-DD-YYYY')
  ORDER BY hire_date; 
```

# javascript - 如何在 jQuery 中制作动态创建的元素的深层副本？

> ID：10165860
> 
> 赞同：0
> 
> 时间：2012-04-15T20:38:15.530
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:41:19.600

You might try this. Use the `.clone()` method. Also you don't need the .html(i) when you're using clone(). Because clone returns a jQuery object you don't even need to wrap a $() around it.

```
var attached = $("<p>"); 
var sandbox = $("#sandbox");

for (var i = 0; i < 8; i++) {
    attached.clone().appendTo(sandbox); 
} 
```

​Also if you want to clone the event handlers you should use .clone(true). See [http://api.jquery.com/clone/](http://api.jquery.com/clone/) for more info about `clone()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:42:38.193

The jQuery `.clone()` method is precisely for [making deep copies](http://api.jquery.com/clone/). From the documentation:

> Description: Create a deep copy of the set of matched elements.

Example:

```
var attached = $("<p>");
var sandbox = $("#sandbox");    

for (var i = 0; i < 8; i++) {
    $(attached).clone().appendTo(sandbox);
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T20:41:14.203

```
var attached = $("<p>");
var sandbox = $("#sandbox");

for (var i = 0; i < 8; i++) {
    // How come reseting attached works? attached = $("<p>");
    attached.clone().html(i).appendTo(sandbox);
}​ 
```

# json - 如何从 Instagram 实时发布数据中获取实际照片？

> ID：10165861
> 
> 赞同：17
> 
> 时间：2012-04-15T20:38:18.847
> 
> 标签：json, api, real-time, response, instagram

`#tattoo`我用 instagram 的实时 api订阅了标签，它工作正常，问题是当帖子数据看起来像这样时，我不知道如何获取实际上传的图像：

```
[{"changed_aspect": "media", "subscription_id": XXXXXX, "object": "tag", "object_i
d": "tattoo", "time": 1334521880}] 
```

它没有给我任何关于`media_id`或类似的信息，我错过了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-19T17:20:09.013

如[他们的实时 API 文档](http://instagr.am/developer/realtime/)中所述：

> 更改的数据不包含在有效负载中，因此由您决定如何获取新数据。例如，您可能决定只为特定用户获取新数据，或者在发布一定数量的照片之后。

所以听起来你只需要通过[他们的常规标签 API](http://instagr.am/developer/endpoints/tags/)获取实际数据，显然使用`GET /tags/{tag-name}/media/recent`. 为你：

```
https://api.instagram.com/v1/tags/tattoo/media/recent?access_token=ACCESS-TOKEN 
```

这确实看起来不优雅，因为您必须整理出您已经看过哪些最近的更新，但我没有看到任何建议更好的方法。

# python - 从python将数据写入MYSQL数据库不是持久的

> ID：10165871
> 
> 赞同：2
> 
> 时间：2012-04-15T20:39:22.780
> 
> 标签：python, mysql, visual-studio-2010

原谅我的无知。我是一个试图学习一些编程的菜鸟。

我在 Visual Studio 2010 中实现了以下代码：

```
def print_tmpsalary():
import sys
import MySQLdb
FD_playerpicker = []
FD_playerpicker = {"8595":["C","Evgeni Malkin","51189","672","2","9600",6.1,"75",False,4,""],"8472":["G","Pekka Rinne","51188","665","15","9400",5.7,"73",False,4,""],"8594":["C","Sidney Crosby","51189","672","5","9300",6.2,"22",False,0,""],"8173":["G","Johan Hedberg","51190","666","1000","8800",5.5,"27",False,0,""],"8592":["G","Ilya Bryzgalov","51189","670","1000","8700",4.8,"59",False,4,""],"8712":["G","Roberto Luongo","51191","677","25","8700",5.4,"55",False,4,""],"8492":["G","Martin Brodeur","51190","666","12","8400",4.4,"59",False,4,""],"8412":["G","Jon Quick","51191","662","1000","8400",5.4,"69",False,4,""],"8612":["G","Marc-Andre Fleury","51189","672","71","8300",5.1,"67",False,4,""],"8781":["G","Cory Schneider","51191","677","1000","8300",6.2,"33",False,0,""],"8353":["G","Jimmy Howard","51188","659","1000","8300",5.4,"57",False,4,""],"8319":["RW","James Neal","51189","672","1000","8200",4.7,"80",False,0,""],"8158":["RW","Ilya Kovalchuk","51190","666","45","8200",4.4,"77",False,4,""],"8253":["G","Michael Leighton","51189","670","1000","8200",6.4,"1",False,0,""],"8556":["C","Claude Giroux","51189","670","120","8000",4.5,"77",False,0,""],"8698":["LW","Daniel Sedin","51191","677","24","7800",4.1,"72",False,0,""],"8393":["G","Scott Clemmensen","51190","661","1000","7700",4.4,"30",False,0,""],"8394":["C","Anze Kopitar","51191","662","1000","7300",3.6,"82",False,4,""],"8608":["D","Kris Letang","51189","672","1000","7200",3.7,"51",False,4,""],"8733":["G","Jose Theodore","51190","661","1000","7200",4.6,"53",False,4,""],"12283":["G","Jacob Markstrom","51190","661","1000","7100",4.6,"7",False,0,""],"8555":["C","Jeff Carter","51191","662","8","7100",2.9,"55",False,0,""],"8478":["LW","Zach Parise","51190","666","6","7000",3.6,"82",False,0,""],"8598":["LW","Chris Kunitz","51189","672","79","7000",3.4,"82",False,0,""],"8335":["C","Henrik Zetterberg","51188","659","13","7000",3.7,"82",False,4,""],"8334":["LW","Pavel Datsyuk","51188","659","3","7000",3.6,"70",False,4,""],"8563":["C","Danny Briere","51189","670","102","6900",3.1,"70",False,0,""],"8703":["RW","Alex Burrows","51191","677","31","6900",3.3,"80",False,4,""],"8694":["C","Henrik Sedin","51191","677","61","6900",3.3,"82",False,4,""],"8562":["LW","Scott Hartnell","51189","670","32","6800",4,"82",False,4,""],"8403":["RW","Justin Williams","51191","662","1000","6800",3.3,"82",False,0,""],"8402":["RW","Dustin Brown","51191","662","1000","6800",3.1,"82",False,4,""],"8554":["C","Mike Richards","51191","662","30","6700",2.7,"74",False,0,""],"12163":["G","Sergei Bobrovsky","51189","670","1000","6700",4,"29",False,0,""],"8765":["RW","Patric Hornqvist","51188","665","1000","6700",3,"76",False,0,""],"8484":["RW","David Clarkson","51190","666","97","6700",3.1,"80",False,0,""],"8474":["C","Patrik Elias","51190","666","51","6700",3.2,"81",False,0,""],"8596":["C","Jordan Staal","51189","672","176","6700",3.3,"62",False,0,""],"8613":["G","Brent Johnson","51189","672","1000","6600",2.8,"16",False,0,""],"8702":["C","Ryan Kesler","51191","677","134","6600",3.2,"77",False,0,""],"8970":["G","Joey MacDonald","51188","659","1000","6500",4.5,"14",False,0,""],"8601":["RW","Pascal Dupuis","51189","672","1000","6500",3.1,"82",False,4,""],"8780":["G","Jonathan Bernier","51191","662","1000","6500",3.5,"16",False,0,""],"8338":["RW","Johan Franzen","51188","659","36","6500",3.4,"77",False,0,""],"8462":["RW","Martin Erat","51188","665","1000","6400",2.9,"71",False,0,""],"8260":["RW","Kris Versteeg","51190","661","158","6400",3.2,"71",False,0,""],"8566":["D","Chris Pronger","51189","670","57","6400",3.2,"13",False,2,"Concussion, knee surgery"],"8845":["G","Brad Thiessen","51189","672","1000","6400",3.1,"5",False,0,""],"8653":["G","Ty Conklin","51188","659","193","6300",3,"15",False,0,""],"14561":["RW","Jaromir Jagr","51189","670","1000","6300",3,"73",False,0,""],"8604":["LW","Tyler Kennedy","51189","672","148","6300",2.9,"60",False,0,""],"8467":["D","Shea Weber","51188","665","157","6300",3.2,"78",False,0,""],"8704":["RW","Mikael Samuelsson","51190","661","117","6200",2.7,"54",False,0,""],"8404":["LW","Wayne Simmonds","51189","670","1000","6200",2.9,"82",False,0,""],"8535":["C","Mike Fisher","51188","665","1000","6200",3,"72",False,0,""],"8797":["LW","James van Riemsdyk","51189","670","1000","6200",2.7,"43",False,2,"Broken left foot"],"8303":["RW","Jakub Voracek","51189","670","124","6200",2.8,"78",False,4,""],"8720":["LW","Tomas Fleischmann","51190","661","1000","6100",3,"82",False,4,""],"8336":["C","Valtteri Filppula","51188","659","1000","6000",3,"81",False,0,""],"8455":["C","David Legwand","51188","665","1000","6000",2.6,"78",False,4,""],"8558":["LW","Simon Gagne","51191","662","69","6000",2.3,"34",False,2,"Upper-body injury"],"12252":["G","Anders Lindback","51188","665","1000","5900",3.4,"16",False,0,""],"8374":["C","Stephen Weiss","51190","661","131","5900",2.8,"80",False,0,""],"8463":["LW","Steve Sullivan","51189","672","1000","5800",2.3,"79",False,0,""],"8709":["D","Alexander Edler","51191","677","147","5800",2.7,"82",False,4,""],"8711":["D","Kevin Bieksa","51191","677","130","5700",2.6,"78",False,0,""],"13932":["RW","Matt Read","51189","670","1000","5700",2.6,"79",False,0,""],"8799":["LW","Petr Sykora","51190","666","1000","5700",2.4,"82",False,4,""],"8355":["C","Mike Comrie","51189","672","1000","5700",1.2,"21",False,0,""],"21546":["RW","Alexander Radulov","51188","665","1000","5600",3.3,"9",False,4,""],"8378":["LW","David Booth","51191","677","38","5600",2.4,"62",False,0,""],"8518":["LW","Christopher Higgins","51191","677","1000","5600",2.7,"71",False,0,""],"8406":["D","Drew Doughty","51191","662","1000","5600",2.2,"77",False,4,""],"8499":["LW","Sean Bergenheim","51190","661","1000","5500",2.4,"62",False,0,""],"15239":["C","Craig Smith","51188","665","1000","5500",2.2,"72",False,0,""],"8466":["D","Ryan Suter","51188","665","198","5500",2.4,"79",False,4,""],"8346":["D","Nicklas Lidstrom","51188","659","26","5500",2.5,"70",False,4,""],"8475":["C","Travis Zajac","51190","666","75","5500",1.5,"15",False,0,""],"12843":["C","Adam Henrique","51190","666","1000","5500",2.5,"74",False,0,""],"8342":["RW","Daniel Cleary","51188","659","1000","5500",2.2,"75",False,0,""],"8443":["RW","Andrei Kostitsyn","51188","665","142","5400",2,"72",False,0,""],"9168":["RW","Todd Bertuzzi","51188","659","1000","5400",2.5,"71",False,4,""],"8268":["D","Brian Campbell","51190","661","173","5400",2.1,"82",False,4,""],"8668":["D","Andrej Meszaros","51189","670","1000","5400",1.9,"62",False,2,"Lower back surgery"],"8444":["LW","Sergei Kostitsyn","51188","665","191","5400",2.2,"75",False,0,""],"12494":["LW","Jiri Hudler","51188","659","1000","5400",2.5,"81",False,0,""],"8468":["D","Dan Hamhuis","51191","677","1000","5400",2.2,"82",False,0,""],"8464":["LW","Colin Wilson","51188","665","1000","5400",2.2,"68",False,0,""],"8877":["D","Jason Garrison","51190","661","1000","5300",2.2,"77",False,0,""],"8811":["RW","Jannik Hansen","51191","677","1000","5300",2.1,"82",False,4,""],"8600":["LW","Matt Cooke","51189","672","1000","5300",2.1,"82",False,0,""],"8568":["D","Kimmo Timonen","51189","670","144","5300",2.3,"76",False,0,""],"8579":["RW","Scottie Upshall","51190","661","1000","5200",1.5,"26",False,0,""],"8736":["G","Manny Legace","51191","677","1000","5200",0,0,False,0,""],"9013":["G","Jason Bacashihua","51189","670","1000","5200",0,0,False,0,""],"8795":["G","Johan Backlund","51189","670","1000","5200",0,0,False,0,""],"8476":["RW","Dainius Zubrus","51190","666","1000","5200",2,"82",False,4,""],"9235":["G","Matt Climie","51191","677","1000","5200",2,"1",False,0,""],"8287":["D","Kyle Quincey","51188","659","1000","5200",2.1,"72",False,0,""],"9440":["LW","Scott Parse","51191","662","1000","5200",1.6,"9",False,2,"Hip surgery"],"8457":["C","Marcel Goc","51190","661","1000","5200",2,"57",False,4,""],"9167":["G","Thomas McCollum","51188","659","1000","5200",-2,"1",False,0,""],"8340":["C","Darren Helm","51188","659","1000","5200",1.7,"68",False,0,""],"11370":["G","Eddie Lack","51191","677","1000","5200",0,0,False,0,""],"8934":["G","Tyler Plante","51190","661","1000","5200",0,0,False,0,""],"8257":["RW","Tomas Kopecky","51190","661","1000","5100",1.7,"80",False,4,""],"8679":["LW","Alexei Ponikarovsky","51190","666","1000","5100",1.8,"82",False,0,""],"8279":["LW","Wojtek Wolski","51190","661","1000","5100",1.4,"31",False,0,""],"8564":["RW","Ian Laperriere","51189","670","1000","5100",0,0,False,2,"Post-concussion syndrome"],"8485":["RW","Nicklas Bergfors","51188","665","1000","5100",0.7,"11",False,0,""],"8691":["D","Ian White","51188","659","1000","5000",2.4,"77",False,0,""],"8707":["D","Sami Salo","51191","677","1000","5000",1.9,"69",False,0,""],"8706":["D","Willie Mitchell","51191","662","1000","5000",1.7,"76",False,0,""],"11240":["LW","Eric Wellwood","51189","670","1000","5000",2.1,"24",False,0,""],"8360":["LW","Dustin Penner","51191","662","1000","5000",1.4,"65",False,0,""],"8700":["LW","Mason Raymond","51191","677","1000","5000",2,"55",False,0,""],"8465":["RW","Jordin Tootoo","51188","665","1000","4900",1.8,"77",False,0,""],"8603":["RW","Max Talbot","51189","670","1000","4900",1.9,"81",False,0,""],"8878":["D","Dmitry Kulikov","51190","661","1000","4900",1.9,"58",False,0,""],"8395":["C","Jarret Stoll","51191","662","1000","4900",1.6,"78",False,0,""],"8348":["D","Niklas Kronwall","51188","659","165","4900",1.9,"82",False,0,""],"8435":["C","Maxim Lapierre","51191","677","1000","4900",1.4,"82",False,0,""],"8365":["RW","Zack Stortini","51188","665","1000","4900",2.2,"1",False,0,""],"9325":["RW","Patrick Eaves","51188","659","1000","4900",1.2,"10",False,2,"Broken jaw"],"8504":["RW","Trent Hunter","51191","662","1000","4800",0.9,"38",False,0,""],"8179":["LW","Marco Sturm","51190","661","145","4800",0.7,"48",False,0,""],"9128":["RW","Brandon Yip","51188","665","1000","4800",1.2,"35",False,0,""],"8375":["C","Steve Reinprecht","51191","677","1000","4800",1.3,"29",False,0,""],"8749":["RW","Matt Halischuk","51188","665","1000","4700",1.7,"73",False,0,""],"8967":["D","Alec Martinez","51191","662","1000","4700",1.3,"51",False,0,""],"8969":["D","Viatcheslav Voynov","51191","662","1000","4700",1.9,"54",False,0,""],"11401":["LW","Gabriel Bourque","51188","665","1000","4700",1.6,"43",False,4,""],"15308":["C","Sean Couturier","51189","670","1000","4700",1.8,"77",False,0,""],"8428":["D","Marek Zidlicky","51190","666","188","4700",1.3,"63",False,4,""],"8196":["C","Paul Gaustad","51188","665","1000","4700",1.4,"70",False,0,""],"8567":["D","Braydon Coburn","51189","670","136","4700",1.5,"81",False,4,""],"8569":["D","Matt Carle","51189","670","1000","4700",1.9,"82",False,0,""],"12259":["D","Brendan Smith","51188","659","1000","4600",1.9,"14",False,0,""],"9145":["D","Ben Lovejoy","51189","672","1000","4600",1.1,"34",False,0,""],"8815":["D","Aaron Rome","51191","677","1000","4600",1.1,"43",False,0,""],"9401":["RW","Brian McGrattan","51188","665","1000","4600",0.7,"30",False,0,""],"8486":["D","Paul Martin","51189","672","113","4600",1.5,"73",False,0,""],"9266":["C","Brayden Schenn","51189","670","1000","4600",1.7,"54",False,4,""],"9218":["C","Mike Santorelli","51190","661","1000","4600",1.2,"60",False,0,""],"8935":["RW","Mike Duco","51191","677","1000","4500",1.3,"6",False,0,""],"8341":["LW","Justin Abdelkader","51188","659","1000","4500",1.5,"81",False,0,""],"12262":["D","Roman Josi","51188","665","1000","4500",1.3,"52",False,0,""],"8561":["RW","Arron Asham","51189","672","1000","4500",1.1,"64",False,4,""],"8587":["D","Zbynek Michalek","51189","672","1000","4500",1.1,"62",False,0,""],"8607":["D","Brooks Orpik","51189","672","1000","4500",1.2,"73",False,0,""],"8343":["RW","Tomas Holmstrom","51188","659","65","4500",1.4,"74",False,0,""],"8879":["C","Shawn Matthias","51190","661","1000","4500",1.6,"79",False,0,""],"8469":["D","Kevin Klein","51188","665","1000","4500",1.2,"66",False,0,""],"10815":["RW","Mark Mancari","51191","677","1000","4400",0.3,"6",False,0,""],"11152":["LW","Zack Kassian","51191","677","1000","4400",1.3,"44",False,0,""],"8397":["LW","Brad Richardson","51191","662","1000","4400",1,"59",False,0,""],"8621":["LW","Jody Shelley","51189","670","1000","4400",0.7,"30",False,0,""],"8359":["LW","Ethan Moreau","51191","662","1000","4400",0.8,"28",False,0,""],"8328":["D","Matt Niskanen","51189","672","1000","4400",1.6,"75",False,0,""],"8511":["D","Jack Hillen","51188","665","1000","4400",0.8,"55",False,0,""],"11237":["C","Zac Rinaldo","51189","670","1000","4400",1.5,"66",False,0,""],"8385":["RW","Michal Repik","51190","661","1000","4400",1.5,"17",False,0,""],"8664":["LW","Drew Miller","51188","659","1000","4400",1.6,"80",False,0,""],"8848":["RW","Chris Conner","51188","659","1000","4300",1.6,"8",False,0,""],"9087":["C","Nick Spaling","51188","665","1000","4300",1.2,"77",False,0,""],"8325":["RW","Krys Barch","51190","661","1000","4300",1,"51",False,0,""],"8181":["RW","Byron Bitz","51191","677","1000","4300",1.7,"10",False,0,""],"9275":["LW","Kyle Clifford","51191","662","1000","4300",1.1,"81",False,0,""],"8409":["D","Matt Greene","51191","662","1000","4300",1,"82",False,0,""],"9299":["RW","Jack Skille","51190","661","1000","4300",1.1,"46",False,0,""],"8872":["D","Alexandre Picard","51189","672","1000","4300",1,"17",False,0,""],"8137":["C","Andrew Ebbett","51191","677","1000","4300",1.8,"18",False,0,""],"8386":["D","Keith Ballard","51191","677","1000","4300",1,"47",False,0,""],"9083":["D","Ryan Ellis","51188","665","1000","4200",1.5,"32",False,0,""],"8296":["C","Samuel Pahlsson","51191","677","1000","4200",1,"80",False,0,""],"8850":["D","Deryk Engelland","51189","672","1000","4200",1.3,"73",False,0,""],"8705":["RW","Steve Bernier","51190","666","1000","4200",1,"32",False,0,""],"8349":["D","Brad Stuart","51188","659","1000","4200",1.4,"81",False,0,""],"8548":["D","Anton Volchenkov","51190","666","1000","4200",0.8,"72",False,0,""],"8166":["D","Pavel Kubina","51189","670","129","4200",1.2,"69",False,0,""],"8671":["D","Matt Walker","51189","670","1000","4100",0.7,"4",False,0,""],"8256":["C","John Madden","51190","661","1000","4100",0.6,"31",False,0,""],"8725":["RW","Matt Bradley","51190","661","1000","4100",0.8,"45",False,2,"Concussion"],"9085":["C","Cal O'Reilly","51189","672","1000","4100",0.4,"33",False,0,""],"9281":["C","Oscar Moller","51191","662","1000","4100",1.5,"13",False,0,""],"8597":["RW","Craig Adams","51189","672","1000","4100",0.9,"82",False,0,""],"8490":["D","Andy Greene","51190","666","1000","4100",1.1,"56",False,0,""],"12192":["C","Jacob Josefson","51190","666","1000","4100",1.1,"41",False,0,""],"9043":["D","Jakub Kindl","51188","659","1000","4100",1.2,"55",False,0,""],"8586":["D","Ed Jovanovski","51190","661","1000","4100",0.8,"66",False,0,""],"8140":["C","Ryan Carter","51190","666","1000","4100",0.7,"72",False,0,""],"8852":["C","Dustin Jeffrey","51189","672","1000","4100",1,"26",False,0,""],"9026":["LW","Steve MacIntyre","51189","672","1000","4000",0.1,"12",False,0,""],"8489":["D","Bryce Salvador","51190","666","1000","4000",0.9,"82",False,0,""],"8161":["LW","Eric Boulton","51190","666","1000","4000",0.5,"51",False,0,""],"8350":["D","Jonathan Ericsson","51188","659","1000","4000",1.1,"69",False,0,""],"8943":["RW","Vladimir Zharkov","51190","666","1000","4000",-0.5,"4",False,0,""],"10883":["D","Matthew Corrente","51190","666","1000","4000",1.2,"22",False,0,""],"8734":["C","Manny Malhotra","51191","677","1000","4000",0.8,"78",False,0,""],"8207":["D","Henrik Tallinder","51190","666","1000","4000",0.6,"39",False,2,"Lower left leg"],"12687":["D","Mark Fayne","51190","666","1000","4000",1,"82",False,0,""],"8966":["C","Trevor Lewis","51191","662","1000","4000",0.9,"72",False,0,""],"8863":["LW","Tom Sestito","51189","670","1000","4000",1.5,"14",False,2,"Torn groin muscle"],"8774":["D","Francis Bouillon","51188","665","1000","4000",0.7,"66",False,0,""],"9008":["D","Marc-Andre Gragnani","51191","677","1000","4000",1.2,"58",False,0,""],"8645":["RW","Cam Janssen","51190","666","1000","4000",0.4,"48",False,0,""],"10851":["D","Andreas Lilja","51189","670","1000","3900",0.9,"46",False,0,""],"9341":["D","Jay Leach","51190","666","1000","3900",0.4,"7",False,0,""],"9279":["C","Andrei Loktionov","51191","662","1000","3900",1,"39",False,0,""],"8330":["D","Nicklas Grossman","51189","670","1000","3900",0.8,"74",False,0,""],"11384":["C","Joakim Andersson","51188","659","1000","3900",0.4,"5",False,0,""],"12765":["D","Matt Taormina","51190","666","1000","3900",1.2,"30",False,0,""],"8170":["D","Boris Valabik","51189","672","1000","3900",0,0,False,0,""],"8324":["LW","Fabian Brunnstrom","51188","659","1000","3900",0.7,"5",False,0,""],"8250":["D","Andrew Alberts","51191","677","1000","3900",0.7,"44",False,0,""],"8965":["LW","Dwight King","51191","662","1000","3900",2.1,"27",False,4,""],"8450":["D","Hal Gill","51188","665","1000","3800",0.7,"76",False,0,""],"8756":["C","Colin Fraser","51191","662","1000","3800",0.8,"67",False,0,""],"9267":["RW","Kevin Westgarth","51191","662","1000","3800",0.7,"25",False,0,""],"8197":["C","Adam Mair","51189","670","1000","3800",0.4,"65",False,0,""],"12193":["LW","Mattias Tedenby","51190","666","1000","3800",0.5,"43",False,0,""],"8690":["D","Garnet Exelby","51188","659","1000","3800",0,0,False,0,""],"9277":["D","Peter Harrold","51190","666","1000","3800",0.8,"11",False,0,""],"9115":["D","Tyson Strachan","51190","661","1000","3800",1,"15",False,0,""],"10912":["D","Marc-Andre Bourdon","51189","670","1000","3800",1.2,"45",False,0,""],"8963":["D","Davis Drewiske","51191","662","1000","3800",1.2,"9",False,0,""],"8855":["C","Joe Vitale","51189","672","1000","3800",1,"68",False,0,""],"9023":["D","Tyler Sloan","51188","665","1000","3800",0.5,"33",False,0,""],"9306":["C","Kyle Wilson","51188","665","1000","3700",-0,"5",False,0,""],"8498":["RW","Richard Park","51189","672","1000","3700",1,"54",False,0,""],"9154":["RW","Bill Thomas","51190","661","1000","3700",0.9,"7",False,0,""],"11225":["RW","Dale Weise","51191","677","1000","3700",0.9,"68",False,0,""],"8876":["D","Keaton Ellerby","51190","661","1000","3700",0.7,"40",False,0,""],"8460":["LW","Jerred Smithson","51190","661","1000","3700",0.5,"69",False,0,""],"8881":["RW","Victor Oreskovich","51191","677","1000","3700",1.8,"1",False,0,""],"14564":["D","Adam Larsson","51190","666","1000","3700",1,"65",False,0,""],"9215":["D","Jonathon Blum","51188","665","1000","3700",0.4,"33",False,0,""],"9276":["LW","Richard Clune","51191","662","1000","3700",0,0,False,0,""],"11304":["D","Erik Gustafsson","51189","670","1000","3600",1,"30",False,0,""],"9257":["D","Nolan Baumgartner","51191","677","1000","3600",0,0,False,0,""],"9170":["D","Doug Janik","51188","659","1000","3600",0.9,"9",False,0,""],"9169":["C","Cory Emmerton","51188","659","1000","3500",0.8,"71",False,0,""],"12291":["D","Chris Tanev","51191","677","1000","3500",0.8,"25",False,0,""],"9048":["D","Oskars Bartulis","51189","670","1000","3500",-0,"13",False,0,""],"9172":["LW","Jan Mursak","51188","659","1000","3500",0.7,"25",False,0,""],"9219":["D","Nolan Yonkman","51190","661","1000","3500",0,"1",False,0,""],"9352":["C","Blair Betts","51189","670","1000","3500",0.6,"75",False,2,"Lower-body injury"],"8891":["D","Mike Weaver","51190","661","1000","3500",0.7,"82",False,0,""],"8849":["D","Simon Despres","51189","672","1000","3500",1.4,"18",False,0,""],"9019":["RW","Andrew Gordon","51191","677","1000","3400",0.5,"37",False,0,""],"10965":["RW","Colin McDonald","51189","672","1000","3400",0.5,"5",False,0,""],"11280":["LW","Aaron Volpatti","51191","677","1000","3400",0.7,"23",False,2,"Torn labrum"],"13631":["RW","Harry Zolnierczyk","51189","670","1000","3400",0.9,"37",False,0,""],"9365":["C","Ryan Craig","51189","672","1000","3400",0.9,"6",False,0,""],"8408":["D","Rob Scuderi","51191","662","1000","3400",0.5,"82",False,0,""],"9336":["C","James Wright","51190","661","1000","3400",-2,"1",False,0,""],"8854":["C","Eric Tangradi","51189","672","1000","3400",0.5,"24",False,0,""],"12447":["D","Erik Gudbranson","51190","661","1000","3300",0.7,"72",False,0,""],"8697":["C","Ryan Johnson","51188","659","1000","3300",0.7,"34",False,0,""],"12738":["C","Jordan Nolan","51191","662","1000","3300",1,"26",False,0,""],"8344":["RW","Jason Williams","51189","672","169","3300",1.1,"8",False,0,""],"9321":["C","Tomas Tatar","51188","659","1000","3200",0.6,"9",False,0,""],"12892":["C","Chris Mueller","51188","665","1000","3200",0.2,"4",False,0,""],"13982":["C","Gustav Nyquist","51188","659","1000","3200",1.4,"18",False,0,""],"9021":["RW","Steve Pinizzotto","51191","677","1000","3200",0,0,False,2,"Dislocated shoulder, surgery"],"8942":["D","Alexander Urbom","51190","666","1000","3200",1.5,"5",False,0,""],"10886":["RW","Stephen Gionta","51190","666","1000","3200",4.8,"1",False,0,""],"9343":["C","Tim Sestito","51190","666","1000","3200",-0,"18",False,0,""],"8570":["D","Ryan Parent","51191","677","1000","3200",-0.5,"4",False,0,""],"10889":["C","Brad Mills","51190","666","1000","3200",0.3,"27",False,0,""],"9295":["C","Mark Cullen","51190","661","1000","3100",0.8,"6",False,0,""],"8962":["RW","Marc-Andre Cliche","51191","662","1000","3100",0,0,False,0,""],"11233":["C","Ben Holmstrom","51189","670","1000","3100",0.3,"5",False,0,""],"11008":["D","Anders Eriksson","51191","677","1000","3100",0,0,False,0,""],"10915":["C","Jonathan Matsumoto","51190","661","1000","3100",0,"1",False,0,""],"11204":["D","Jacob Muzzin","51191","662","1000","3100",0.3,"11",False,0,""],"9084":["D","Teemu Laakso","51188","665","1000","3100",0.3,"9",False,0,""],"21921":["C","Riley Sheahan","51188","659","1000","3000",2.2,"1",False,0,""],"8411":["D","Thomas Hickey","51191","662","1000","3000",0,0,False,0,""],"12635":["C","Bracken Kearns","51190","661","1000","3000",0.5,"5",False,0,""],"12714":["C","Ilari Filppula","51188","659","1000","3000",0,0,False,0,""],"14183":["G","Keith Kinkaid","51190","666","1000","3000",0,0,False,0,""],"14456":["D","Mattias Ekholm","51188","665","1000","3000",-0.3,"2",False,0,""],"8424":["RW","Owen Nolan","51191","677","172","3000",0,0,False,0,""],"9402":["C","Steve Zalewski","51190","666","1000","3000",0.1,"7",False,0,""],"8847":["D","Robert Bortuzzo","51189","672","1000","3000",0.5,"6",False,0,""],"9238":["D","Dan Jancevski","51189","670","1000","3000",0,0,False,0,""],"8661":["LW","Todd Fedoruk","51191","677","1000","3000",0,0,False,0,""],"8817":["D","Yann Sauve","51191","677","1000","3000",0.1,"5",False,0,""],"9070":["D","Shaun Heshka","51191","662","1000","3000",0,0,False,0,""],"8177":["C","Steve Begin","51191","677","1000","3000",-0.1,"2",False,0,""],"9057":["G","Timo Pielmeier","51190","666","1000","3000",-3.6,"1",False,0,""],"8924":["LW","Chris Minard","51188","659","1000","3000",0,0,False,0,""],"9300":["LW","Mark Santorelli","51188","665","1000","3000",0,0,False,0,""],"11214":["LW","Ryan Thang","51188","665","1000","3000",0,"1",False,0,""],"11245":["D","Brian Strait","51189","672","1000","3000",0.3,"9",False,0,""],"11386":["D","Carl Sneep","51189","672","1000","3000",3,"1",False,0,""],"10898":["C","Brodie Dupont","51188","665","1000","3000",0.4,"1",False,0,""],"10840":["D","Ray Macias","51191","662","1000","3000",-0.3,"2",False,0,""],"9358":["RW","Stefan Legein","51191","662","1000","3000",0,0,False,0,""],"8882":["C","Scott Timmins","51190","661","1000","3000",0.1,"19",False,0,""],"12164":["LW","Andrew Rowe","51189","670","1000","3000",0,0,False,0,""]}

try:
    conn = MySQLdb.connect(db="FanDueldb",host="localhost",user="root",passwd="password");
    print "Connected<br/>"
except:
    print "Cannot connect to server.</br>"
    sys.exit(1)

try:
    cursor = conn.cursor()
    for playerdata in FD_playerpicker:
        x = FD_playerpicker[playerdata][0]
        cursor.execute("INSERT INTO `fandueldb`.`tblfdsalarytmp` (PlayerID,Position,Player,Placeholder1,Placeholder2,PlaceHolder3,Salary,PPG,GamesPlayed,PlaceHolder4,PlaceHolder5,PlaceHolder6) VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)",(playerdata,FD_playerpicker[playerdata][0],FD_playerpicker[playerdata][1],FD_playerpicker[playerdata][2],FD_playerpicker[playerdata][3],FD_playerpicker[playerdata][4],FD_playerpicker[playerdata][5],FD_playerpicker[playerdata][6],FD_playerpicker[playerdata][7],FD_playerpicker[playerdata][8],FD_playerpicker[playerdata][9],FD_playerpicker[playerdata][10]))

    cursor.execute("SELECT * FROM tblFDSalarytmp WHERE RecordID = 1")
    result = cursor.fetchall()
    for record in result:
        print record[0] , "-->", record[1]

    #cursor.close()
except MySQLdb.Error, e:
    print "query failed<br/>"
    print e

conn.close()
print "Disconnected<br/>"
sys.exit(0) 
```

代码运行无误，调试代码时可以打印出结果。但是当我打开 MySQL 工作台查看写入的数据时，什么都没有。有一个名为 recordID 的自动递增字段已经递增，所以我知道数据已经“触及”了数据库，但是一旦代码停止运行，就好像它被删除了一样。

第一次使用任何这样的数据库，我知道有些东西我只是不理解。任何帮助将不胜感激，谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:42:38.887

我相信 MySQLdb 默认禁用自动提交。执行完所有语句后，您需要调用`.commit()`您的连接。`INSERT`

```
cursor = conn.cursor()
for playerdata in FD_playerpicker:
    x = FD_playerpicker[playerdata][0]
    cursor.execute("INSERT INTO `fandueldb`.`tblfdsalarytmp` (PlayerID,Position,Player,Placeholder1,Placeholder2,PlaceHolder3,Salary,PPG,GamesPlayed,PlaceHolder4,PlaceHolder5,PlaceHolder6) VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)",(playerdata,FD_playerpicker[playerdata][0],FD_playerpicker[playerdata][1],FD_playerpicker[playerdata][2],FD_playerpicker[playerdata][3],FD_playerpicker[playerdata][4],FD_playerpicker[playerdata][5],FD_playerpicker[playerdata][6],FD_playerpicker[playerdata][7],FD_playerpicker[playerdata][8],FD_playerpicker[playerdata][9],FD_playerpicker[playerdata][10]))

# Commit following all INSERT statements
conn.commit() 
```

[从 MySQLdb 常见问题解答：](http://mysql-python.sourceforge.net/FAQ.html)

> 从 1.2.0 开始，MySQLdb 默认禁用自动提交，这是 DB-API 标准 (PEP-249) 的要求。如果您使用 InnoDB 表或其他类型的事务表类型，则需要在关闭连接之前执行 connection.commit() ，否则您的任何更改都不会写入数据库。

# php - xPath - 你可以从节点中删除逗号吗？

> ID：10165872
> 
> 赞同：3
> 
> 时间：2012-04-15T20:39:26.323
> 
> 标签：php, xpath

我有一个 xPath 查询，它从这样的 div 中获取纯文本

```
xpath->query("//div[@id='main']//span[@class='meta']/text()") 
```

此查询返回`The text that I want,`

无论如何，我可以在查询中删除该逗号吗？

谢谢

**编辑：**

使用下面的 Mad 代码，我的查询现在看起来像这样（我已将`,`示例中的 替换为单词`hello`以使其不那么混乱。）

```
$search_term = $xpath->query("translate('//div[@id='main']//span[@class='meta']/text()', 'hello', '')"); 
```

我正在尝试像这样回显查询结果：

```
foreach ($search_term as $st) { 
echo $st->nodeValue; } 
```

我收到的错误是

```
Invalid argument supplied for foreach() in ... on line 50 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:41:43.113

**您可以使用空字符串[`translate()`](http://www.w3.org/TR/xpath/#function-translate)替换字符：`,`**

```
xpath->query("translate(//div[@id='main']//span[@class='meta']/text(), ',', '')") 
```

`text()`但是，如果逗号之前或之后是节点 中的空格，则可能会导致尾随空格。

**然后，您可以使用[`normalize-space()`](http://www.w3.org/TR/xpath/#function-normalize-space)删除前导/尾随空格：**

```
xpath->query("normalize-space(translate(//div[@id='main']//span[@class='meta']/text(), ',', ''))") 
```

尽管如此，它也会将文本中间的空白序列标准化为单个空格。

**您还可以使用[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)选择前面的文本`,`：**

```
xpath->query("substring-before(//div[@id='main']//span[@class='meta']/text(), ' ,')") 
```

但是，如果字符串不包含`,`then`substring-before()`将不会返回任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:41:45.290

[`rtrim`](http://www.php.net/manual/en/function.rtrim.php)如果要删除尾随逗号，看起来是更好的选择。我不明白为什么将 XPath 与此相关联会更可取，但您也可以使用[`fn:replace`](http://www.w3.org/TR/xpath-functions/#func-replace)函数 (XPath 2.0) 来实现。

# ruby-on-rails - 我可以删除随 Rails 安装的默认 application_controller 吗？

> ID：10165873
> 
> 赞同：0
> 
> 时间：2012-04-15T20:39:26.257
> 
> 标签：ruby-on-rails

当我创建一个新应用程序时，会添加一个名为 application_controller 的默认控制器。

这是保存重要信息还是我可以删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:40:59.133

好吧，您生成的每个其他控制器都将继承自`ApplicationController`，所以您有点需要它。你的兴趣纯粹是学术性的，还是你有问题？

# php - $facebook->getUser() 仅在一个 url 中返回 0

> ID：10165875
> 
> 赞同：1
> 
> 时间：2012-04-15T20:39:37.720
> 
> 标签：php, facebook

最近我们无法对 FB 用户进行身份验证。

这无中生有，没有更改任何代码，我们已经成功测试了其他 url 中的代码。似乎 facebook 已经阻止了我们的网址，但我们没有收到任何警告。

请帮助，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:19:24.197

所以你说：

> PHP sdk，没有任何改变。这在其他服务器中完美运行

如果您将 Web 应用程序从某个服务器移动到其他服务器并且站点的实际 url 会更改。

您需要将developers.facebook.com/apps 中的url-address 更改为新的url。

# c# - 为部署设置 web.config - .Net

> ID：10165877
> 
> 赞同：0
> 
> 时间：2012-04-15T20:40:04.243
> 
> 标签：c#, deployment, entity-framework-4, azure, web-config

以下是我的 web.config 文件。我目前正在学习如何自己部署网站，因为我没有找到任何资源来学习如何使用连接到 Azure 数据库的 ADO.NET（实体框架/使用 DB 模型）来部署网站。我创建了一个测试页面，它只是从特定表中获取所有记录。在开发中完美运行。我只是上传了 web.config、default.aspx、default.aspx.cs 和 bin 文件夹。我正在使用 go daddy。不幸的是，我收到一条错误消息，告诉我我没有连接到数据库！谁能帮我？？！！！

以下是我的错误和堆栈跟踪建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

源错误：

```
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5061898
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +239
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure) +52

[EntityException: The underlying provider failed on Open.]
   System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure) +161
   System.Data.EntityClient.EntityConnection.Open() +98
   System.Data.Objects.ObjectContext.EnsureConnection() +81
   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +46
   System.Data.Objects.ObjectQuery`1.GetIListSourceListInternal() +13
   System.Data.Objects.ObjectQuery.System.ComponentModel.IListSource.GetList() +10
   System.Web.UI.DataSourceHelper.GetResolvedDataSource(Object dataSource, String dataMember) +54
   System.Web.UI.WebControls.ReadOnlyDataSource.System.Web.UI.IDataSource.GetView(String viewName) +41
   System.Web.UI.WebControls.DataBoundControl.ConnectToDataSourceView() +266
   System.Web.UI.WebControls.DataBoundControl.GetData() +4
   System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) +24
   System.Web.UI.WebControls.ListControl.PerformSelect() +34
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
   WebApplication1._default.Page_Load(Object sender, EventArgs e) in C:\...\WebApplication1\default.aspx.cs:15
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

以下是我的 web.config 文件：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
    <customErrors mode="Off"/>
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=xxx" />
      </assemblies>
    </compilation>
  </system.web>
  <connectionStrings>
    <add name="xxx"  connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=xxx.database.windows.net;Initial Catalog=xxx;Persist Security Info=True;User ID=xxx;Password=xxx;MultipleActiveResultSets=True;Application Name=EntityFramework&amp;quot&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:50:07.753

GoDaddy 可能正在阻止出站连接。

联系他们的支持，或切换到一个体面的主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:49:38.420

您是否尝试过配置 SQL Azure 防火墙以允许来自 GoDaddy 服务器的连接？

参考：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee621782.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee621782.aspx)

# objective-c - Objective C - 弹出 UITableViewController 场景时不释放内存

> ID：10165879
> 
> 赞同：3
> 
> 时间：2012-04-15T20:40:14.953
> 
> 标签：objective-c, ios, memory, uiviewcontroller, automatic-ref-counting

我有一个使用 Xcode 4.3.2 针对 iOS 5.1 的简​​单项目，使用情节提要和 NavigationController。我刚刚将项目迁移到使用 ARC，现在我注意到当我的 UITableViewController 场景被弹出（按下后退按钮）时内存没有被回收。当我自己管理内存时，我确信这一切正常。我正在使用 Instruments 工具的“分配”功能，我可以看到每次推送场景然后弹出时，“实时字节”都会继续增加。UITableViewController 的接口是：

```
#import <UIKit/UIKit.h>
#import "ASIHTTPRequest.h"

@interface StockListView : UITableViewController <UISearchBarDelegate>
{
    NSMutableArray *tableListArray;         
    IBOutlet UISearchBar *searchBarControl;
}

@property (nonatomic) ASIHTTPRequest *httpDSRequest;

@end 
```

UITableView 使用定义如下的自定义 UITableViewCell 类：

```
#import <UIKit/UIKit.h>

@interface StockListCell : UITableViewCell

@property (nonatomic) IBOutlet UILabel *lblStockCode;
@property (nonatomic) IBOutlet UILabel *lblDescription;
@property (nonatomic) IBOutlet UILabel *lblQtyInStock;
@property (nonatomic) IBOutlet UILabel *lblQtyFree;

@end 
```

我正在使用的属性中是否有一些东西将视图控制器保留在内存中？既然我正在使用 ARC，我是否需要添加一些代码以允许视图控制器完全解除分配？

我还使用了 Instruments 的“泄漏”功能，但这并没有显示出任何泄漏。

任何帮助表示赞赏，很抱歉我还是 iOS 开发的新手。

谢谢乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:45:50.933

您应该使按钮弱引用

```
@property (weak, nonatomic) IBOutlet UILabel *lblStockCode; 
```

也许看看这个：[ARC Transition](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# android - Android 的 Kannel 配置

> ID：10165880
> 
> 赞同：3
> 
> 时间：2012-04-15T20:40:22.687
> 
> 标签：android, kannel

我想将 Android 手机与我的 PC 连接并通过我的 PC 发送短信。**可能吗？** 我想配置Kannel等短信网关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:04:02.400

是的，这是可能的，您可以从 Android 发送短信，也可以从您的应用程序中接受传入的短信。

只需使用 Android 搜索“发送短信”和/或“接受传入短信”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T00:41:29.537

如果您配置 Kannel，您可以使用您的 PC 通过您的 Android 手机作为调制解调器发送短信。您的移动运营商将收取正常的短信费用。

# meteor - 其他浏览器选项卡中未收到反应性更新

> ID：10165881
> 
> 赞同：1
> 
> 时间：2012-04-15T20:40:23.747
> 
> 标签：meteor

Meteor 承诺*响应式更新*，以便在数据更改时自动更新视图。包含的*排行榜*示例演示了这一点。当我测试它时它运行良好：数据在不同浏览器中的多个浏览器选项卡中更新，正如预期的那样。

一切就绪，我开始使用流星进行编码，并且正在取得进展，但是当我测试跨浏览器标签的反应性更新时，我注意到仅在片刻**之后**跨标签的更新才停止。

基于一个新的空流星项目，我将问题归结为以下代码：

**updatebug.html**

```
<head>
  <title>updatebug</title>
</head>

<body>
  {{> form}}
</body>

<template name="form">
  <form onsubmit="return false;">
  {{#each items}}
    {{> form_item }}
  {{/each}}
  </form>
</template>

<template name="form_item">
  <div>
    <label>{{name}}
      <input type="text" name="{{name}}" value="{{value}}">
    </label>
  </div>
</template> 
```

**更新bug.js：**

```
Items = new Meteor.Collection("items");

if (Meteor.is_client) {
  Template.form.items = function () {
    return Items.find();
  };

  Template.form_item.events = {
    'blur input': function(e) {
      var newValue = $(e.target).val();
      console.log('update', this.name, this.value, newValue);
      Items.update({_id: this._id}, {$set: {value: newValue}});
    },
  };
}

if (Meteor.is_server) {
  Meteor.startup(function () {
    if (Items.find().count() === 0) {
      Items.insert({name: 'item1', value: 'something'});
    }
  });
} 
```

在多个浏览器选项卡中运行，开始在一个选项卡中更改输入的值。其他选项卡将反映更改。转到下一个选项卡并更改值。重复几次。

一段时间后，任何其他选项卡都不再收到更新。似乎*一旦选项卡更改了值，它就不再接收/显示任何更新*。

与排行榜示例相比的差异（因为它非常相似）：

*   排行榜不使用表单控件
*   排行榜示例在更新时执行增量操作，而不是集合

我即将提交一个错误报告，但我想确保我没有在这里做任何愚蠢的事情，或者错过了 Meteor Collection 机制的重要部分（是的，安装了 autopublish 包）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:28:36.433

这里的问题是输入元素的保存。Meteor 将在模板重绘中保留任何具有`id`or属性的表单字段的输入状态。`name`重绘将保留表单元素中的旧文本，因为您不想打断其他用户在同一字段中键入内容。如果您`name`从文本框中删除该属性，每个选项卡都会在模糊时更新。

实际上，我不确定为什么第一个更新在您的示例中有效。这可能实际上是错误！

通过在每个浏览器中打开控制台，您可以看到这不是数据问题。在每个模糊事件中，您将在每个打开的选项卡中获得更新的文档。（类型`Items.find().fetch()`）

# javascript - Express JS 创建咖啡脚本脚手架

> ID：10165882
> 
> 赞同：0
> 
> 时间：2012-04-15T20:40:25.993
> 
> 标签：javascript, coffeescript, express, scaffolding

寻找一种方法来立即用咖啡脚本制作一个快速脚手架。

目前`$ express 'myapp'`只创建js文件。

任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:58:05.097

您可以使用 js2coffee 将创建的 app.js 和 routes/index.js 文件转换为咖啡脚本（如 Slace 所述）
有两种方法：
1\. 手动使用[js2coffee.org 转换器](http://js2coffee.org/)
2\. 使用`js2coffee`npm 包并将输出通过管道传输到新文件

```
$ cd my_new_express_app
$ sudo npm install js2coffee -g
Files can now be converted by running js2coffee input.js > output.coffee 
$ js2coffee app.js > app.coffee
$ js2coffee routes/index.js > routes/index.coffee 
```

这样你就可以在 coffeescript 中开始一个新的 express 项目。请注意，转换会删除注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:00:45.583

Express 仅从脚手架生成 JavaScript。您可以使用[js2coffee](http://js2coffee.org/)自己进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:45:35.637

在生成您的 express 应用程序并安装 js2coffee 后，如前所述，将目录更改为您的新应用程序并运行：

```
for f in `find . -type f -path "*.js" ! -path "*node_modules*"`; js2coffee $f > "${f%.*}.coffee" 
```

# java - 如何检查对象是否实现了接口？

> ID：10165887
> 
> 赞同：142
> 
> 时间：2012-04-15T20:40:53.280
> 
> 标签：java, oop, interface

如何检查某个类是否实现了接口？当有：

`Character.Gorgon gor = new Character.Gorgon();`

如何检查是否`gor`实现`Monster`接口？

```
public interface Monster {

    public int getLevel();

    public int level = 1;
}

public class Character {
    public static class Gorgon extends Character implements Monster {
        public int level;
        @Override
        public int getLevel() { return level; }

        public Gorgon() {
            type = "Gorgon";
        }
    }
} 
```

* * *

方法是否`getLevel()`被`Gorgon`正确覆盖，所以它可以返回`level`新`gor`创建的？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-04-15T20:43:05.633

举个例子

```
Character.Gorgon gor = new Character.Gorgon(); 
```

然后做

```
gor instanceof Monster 
```

对于一个 Class 实例做

```
Class<?> clazz = Character.Gorgon.class;
Monster.class.isAssignableFrom(clazz); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-04-15T20:43:52.063

采用

```
if (gor instanceof Monster) {
    //...
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-04-18T06:43:43.153

一般来说，`AnInterface`对于`anInstance`任何类别：

```
AnInterface.class.isAssignableFrom(anInstance.getClass()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-06T11:57:51.307

如果你想要一个这样的方法，`public void doSomething([Object implements Serializable])`你可以像这样输入它`public void doSomething(Serializable serializableObject)`。您现在可以将任何实现 Serializable 的对象传递给它，但使用`serializableObject`您只能从 Serializable 接口访问对象中实现的方法。

# java - 如何将 Long 变量与 null 进行比较

> ID：10165897
> 
> 赞同：1
> 
> 时间：2012-04-15T20:41:41.337
> 
> 标签：java, long-integer, primes, bufferedreader, filereader

所以我制作了一个 txt 文件阅读器，该文件有一堆“长”行，因为它是一个素数查找程序，它将数字写入 txt。当我停止程序，然后重新启动它时，我希望它从停止的地方开始。这意味着我必须让它检查每一行并确保它正在读取某些内容，并且缓冲的阅读器被列为很长。这是代码：

```
try{
        FileReader fileReader = new FileReader(fileLocation);
        BufferedReader bufferedReader = new BufferedReader(fileReader);

        long stringRead = bufferedReader.read();

        while (stringRead != null)
        {
            stringRead = bufferedReader.read();
            currentNum =  stringRead;
        }

        bufferedReader.close();
        }
        catch(FileNotFoundException filenotfoundexxeption){
            System.out.print("file does not exist");
        }
        catch(IOException ioexception){
            ioexception.printStackTrace();
        }
} 
```

所以问题是它不喜欢`stringRead != null`，否则我不知道该怎么做。我是菜鸟，所以请使用已经列出的代码回答。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:46:00.217

你可能应该做

```
String line;
while ((line = bufferedReader.readLine()) != null)
{
    currentNum = Long.parseLong(line);
} 
```

As`readLine()`将在到达文件末尾时返回 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:43:41.030

A`long`是原始类型，因此不能是`null`. 另一方面， a[`Long`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html)是一个引用类型，所以它*可以*是`null`.

无论哪种方式，[`BufferedReader#read()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#read%28%29)返回一个`int`表示**单个字符，**而不是整行。您应该[`#readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)结合使用[`Long#parseLong()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)，

考虑使用 a[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)代替，这将大大简化您的代码。

```
Scanner scanner = new Scanner(new File(fileLocation));

while (scanner.hasNextLong())
{
    currentNum = scanner.nextLong();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:44:01.237

long 不能为 null，它要么为 0（未初始化，或已分配为 0），要么不为 0。您可能希望使用该`readLine`方法并将结果解析为 long using `Long.parseLong()`，而不是使用 读取每个字符`read`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T20:46:04.357

`long`是[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)，不能为空。如果它没有初始化它的`0`. 但是，您可以使用`Long`包装类。例如`Long stringRead = new Long(bufferedReader.read());`. 但是，在您的情况下，情况永远不会如此，因为`read()`永远不会返回`null`，只要`-1`它是文件的结尾。所以你的支票应该是`while(stringRead!=-1)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T20:47:41.843

你每行一个号码？您必须阅读 with `readLine`，这将为您提供作为字符串的行。然后用`Long.parseLong`. 你可以检查你得到的字符串`readLine`不为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T20:47:54.383

根据[官方文档](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#read%28%29)BufferedReader#read 返回 int。

> 读取的字符，为 0 到 65535 (0x00-0xffff) 范围内的整数，如果已到达流的末尾，则为 -1

这意味着您可以检查返回的是否不等于-1。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-15T20:52:20.200

long 是一个原语，所以它不能为空，而且 BufferedReader.read 返回 int 所以你可以通过改变这一行来简单地让它工作

```
long stringRead = bufferedReader.read(); 
```

到

```
Integer stringRead = bufferedReader.read(); 
```

或者

```
 Long stringRead = new Long(bufferedReader.read()); 
```

Java 1.5 及更高版本自动将 int 包装为 Integer。

# python - 在 Python 中创建钉板

> ID：10165900
> 
> 赞同：0
> 
> 时间：2012-04-15T20:41:58.600
> 
> 标签：python

我正在尝试在 python 中创建一个有趣的游戏。如果 n = 10，我希望能够做出类似这样的东西。

```
--------------------------------------------------
(1) (2)  (3)  (4)  (5)  (6)  (7)  (8)  (9)  (10)  
-------------------------------------------------- 
```

上面和下面的虚线。我不断收到错误消息，无法使其正常工作。这似乎是一段很简单的代码，我想知道是否可以得到一些帮助。

这是我第一次在这个网站上发帖，所以我们会鼓励所有的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:57:15.187

```
>>> def PegBoard(n):
    print "-----"*n
    print ("({})  "*n).format(*range(1,n+1))
    print "-----"*n

>>> PegBoard(10)
--------------------------------------------------
(1)  (2)  (3)  (4)  (5)  (6)  (7)  (8)  (9)  (10)  
--------------------------------------------------
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:54:18.420

这是一段应该做你需要的代码：

```
def pegboard(size):
    print "-"*size*4
    for i in range(1, size+1):
        print "(%d)" % i,
    print
    print "-"*size*4

pegboard(10) 
```

我最近也从这里开始，这是一个很棒的社区，不要气馁:)

# html - HTML 5 区别输入 id 和输入名称？

> ID：10165908
> 
> 赞同：26
> 
> 时间：2012-04-15T20:43:26.010
> 
> 标签：html, input

我正忙于用 HTML 5 为学校做一些事情。

所以这是我的代码

```
<label for="name">Name</label>
<input type="text" id="name" name="name" placeholder="your name" required><br> 
```

所以我的问题实际上是：

NAME 和 ID 有什么区别？目的？哪个更重要？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-15T20:47:38.983

简而言之，`name`就是提交表单时发送到服务器的标识符。这`id`是浏览器、客户端、javascript 等的唯一标识符。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-15T20:48:18.417

该`name`属性用于向服务器提交表单元素；许多元素可能共享相同的元素`name`（例如，单选按钮，在集合中**必须**具有相同的名称）。

该`id`属性用于唯一标识任何元素（不仅仅是表单元素）。它在整个文档中**必须是唯一的。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-15T20:49:22.753

该`id`属性在您的文档中应该是唯一的。只有一个元素可以具有给定的 id。`document.getElementById()`找到给定的第一个元素`id`。

提交表单时，表单将`name`属性用作键/值对中的键。该`value`属性既显示在浏览器中，又与表单一起提交。

两者都不是“更重要”，它们只是不同。如果您有 XML 思维方式，那么它们都只是节点上的属性。但在 HTML 中，它们具有更多含义。

# c# - 获取 DataPager 控件中的点击页数

> ID：10165911
> 
> 赞同：2
> 
> 时间：2012-04-15T20:43:39.440
> 
> 标签：c#, asp.net, datapager

我的页面上有一个`Listview`和一个`DataPager`控件，我正在尝试创建一个自定义分页（listview 仅显示结果间隔）。当用户单击任何页面时，`DataPager_PreRender()`会触发包含我的数据源/数据绑定方法的事件。

请告诉我如何获取在 datapager 中单击的页数以在`PreRender`方法中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:53:09.117

```
protected void ListView1_PagePropertiesChanging(object sender,PagePropertiesChangingEventArgs e)    
{

    int CurrentPage = (e.StartRowIndex / e.MaximumRows)+1;
    Response.Write(CurrentPage.ToString());

} 
```

[http://forums.asp.net/p/1391359/2974778.aspx](http://forums.asp.net/p/1391359/2974778.aspx)

希望这可以帮助。

# c# - 从不同表的数据库中获取数据

> ID：10165915
> 
> 赞同：3
> 
> 时间：2012-04-15T20:43:51.640
> 
> 标签：c#, sql, database

我正在使用（ASP + WML）创建这个移动门户/应用程序，如果我需要生成学生在某年某学期所修课程的列表。

我有以下表格：

![在此处输入图像描述](../Images/5d9221476f033b7f1139844dcfc95ba4.png)

我从上一页获得以下参数：

```
string StudentId = Request.Params["StudentId"];
string Year = Request.Params["Year"];
string Semester = Request.Params["Semester"]; 
```

*   ( `Year`) 的值是“2011”或“2012”。
*   ( `Semester`) 的值是“First”或“Second”或“Summer”。
*   ( `StudentId`) 的值是之前从学生表中的 id 中提取的数字。

作为表内数据的样本。

![在此处输入图像描述](../Images/3a2ef89f77277c2ba5ff4740b1478837.png)

**我被困在这里**

```
string connectionString = @"Data Source=.\SQLEXPRESS;AttachDbFileName=|DataDirectory|\Uni.MDF;" +
            "Integrated Security=True;User Instance=True";
           string queryString =" ??????????????????????????? " ; 
```

我想获得一个页面来显示用户注册的课程（在给定的学期）。该信息稍后将通过 URL 传递到将显示该信息的新页面。

就像是：

```
First Semester  2010
Student : Arin Rizk

Course Name     No. of Credit      Mark
    AAA                3            65
    BBB                3            23
    CCC                3            65
    DDD                3            58
    EEE                3            70

Your GPA for this semster is 3.12 
```

**编辑**

稍后我将如何打印页面中的信息？

我该怎么做？我试图创建一个视图，但我不知道为什么它不起作用。

我无法更改表或数据库结构。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:53:29.267

```
select st.firstname + ' ' + st.lastname,se.year, c.coursename,c.credits,ri.mark 
from students st 
inner join RegisteredIn ri on ri.studentid=st.id
inner join semester se on se.id=ri.semesterid
inner join Courses c on c.id=se.courseid 
```

此查询将为您提供姓名、年份、课程名称、学分和分数。

您需要为 gpa 计算编写另一个查询，或者您可以使用上面获得的数据在您的 Web 服务器上进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:56:12.243

对于课程列表，您可以执行以下操作：

```
Select Courses.CourseName, Courses.NumberOfCredits, RegisteredIn.Mark
From dbo.Courses Inner Join dbo.RegisteredIn On Courses.id = RegisteredIn.CourseID
    Inner Join dbo.Semester On RegisteredIn.SemesterID = Semester.id
Where RegisteredIn.StudentID = '20111' AND
    Semester.Title = 'First' AND 
    Semester.Year = 2011
Order By Courses.CourseName 
```

# objective-c - 如何在ObjectiveC（2.0）中将枚举值声明为已弃用

> ID：10165920
> 
> 赞同：19
> 
> 时间：2012-04-15T20:44:15.387
> 
> 标签：objective-c, enums, deprecated

假设很久以前，我创建了以下枚举：

```
typedef enum
{
   GeometricPoint,
   GeometricLine,
   GeometricSquare,
   GeometricRectangle,
   GeometricCircle
}GeometricFigures; 
```

不久前我在我*很棒的引擎*中介绍了这些，现在我终于决定人们不应该再使用`GeometricSquare`了，因为这已经涵盖了`GeometricRectangle`。

首先，我可能会将我的枚举更改为以下内容：

```
typedef enum
{
   GeometricPoint,
   GeometricLine,
   GeometricRectangle,
   GeometricSquare = GeometricRectangle,
   GeometricCircle
}GeometricFigures; 
```

这肯定会保持我*出色的引擎*向后兼容，但另一方面会增加遗留垃圾。因此，我想`GeometricSquare`在可预见的将来完全删除。为了让我的引擎用户明白这一点，我想将其标记`GeometricSquare`为已弃用。

我的目标是文档 (doxygen) 以及代码完成 (Xcode) 以及最后但并非最不重要的编译器 (GCC) 将让用户明白`GeometricSquare`不应再使用并已被`GeometricRectangle`.

对于文档，我会简单地使用`@deprecated`关键字；

```
typedef enum
{
   GeometricPoint,
   GeometricLine,
   GeometricRectangle,
   ///@deprecated Has been replaced by GeometricRectangle
   GeometricSquare = GeometricRectangle,
   GeometricCircle
}GeometricFigures; 
```

但是 Xcode 和 GCC 呢？

不幸的是，通常的 GCC（方法）属性似乎无法完成这项工作。`__attribute__((deprecated))`如下所示添加 会导致语法错误。

```
typedef enum
{
   GeometricPoint,
   GeometricLine,
   GeometricRectangle,
   GeometricSquare = GeometricRectangle __attribute__((deprecated)), 
```

> 预期解析问题 **}**

```
 GeometricCircle
}GeometricFigures; 
```

很明显，要么完全不起作用，要么我只是错误地使用它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-15T20:55:38.810

我认为您将`__attribute__`位附加到赋值运算符的错误一侧。这似乎工作正常：

```
typedef enum
{
   GeometricPoint,
   GeometricLine,
   GeometricRectangle,
   GeometricSquare __attribute__((deprecated)) = GeometricRectangle,
   GeometricCircle
}GeometricFigures; 
```

现在分配`GeometricSquare`给编译器警告：

```
int fig = GeometricSquare;    //'GeometricSquare' is deprecated 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-30T03:36:45.360

稍后添加了一个便利宏：

```
typedef NS_ENUM(NSInteger, GeometricFigures)
{
   GeometricPoint,
   GeometricLine,
   GeometricRectangle,
   GeometricSquare __deprecated_enum_msg("Squares are for squares. Use GeometricRectangle.") = GeometricRectangle,
   GeometricCircle,
}; 
```

# c++ - 如何在 Ubuntu 上手动链接 g++ 中的库

> ID：10165921
> 
> 赞同：3
> 
> 时间：2012-04-15T20:44:18.490
> 
> 标签：c++, ubuntu

我试图在 ubuntu 上手动将外部库与 c++ 链接。因为这是我的第一个 c++ 项目，所以我缺少一些基础知识。这是我的代码（这试图连接到传播）：

```
#include <iostream>
#include <sp.h>

using namespace std;

int main() {
    int status;
    status = SP_connect("4803@localhost", "test1", 0, 0, 0, 0);
    cout << "done\n";
    return 0;
} 
```

如果我只是尝试运行它

```
user@computer:~/thesis$ g++ -o example1 test.cpp
/tmp/cczPLZQ0.o: In function `main':
test.cpp:(.text+0x39): undefined reference to `SP_connect'
collect2: ld returned 1 exit status 
```

据我了解，我需要链接一个库，我尝试使用 -l

```
kristjan@kupo:~/thesis$ g++ -o example1 test.cpp -llibspread
/usr/bin/ld: cannot find -llibspread
collect2: ld returned 1 exit status 
```

我也试过这个（我在这里在黑暗中拍摄）：

```
user@computer:~/thesis$ g++ -o example1 test.cpp $(pkg-config -cflags /usr/local/lib/libspread) $(pkg-config --libs /usr/local/lib/libspread)

-cflags: unknown option
Package /usr/local/lib/libspread was not found in the pkg-config search path.
Perhaps you should add the directory containing `/usr/local/lib/libspread.pc'
to the PKG_CONFIG_PATH environment variable
No package '/usr/local/lib/libspread' found
/tmp/ccU8GTC2.o: In function `main':
test.cpp:(.text+0x39): undefined reference to `SP_connect'
collect2: ld returned 1 exit status 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:07:38.323

正如@Mat 所说，您应该使用`-lspread`和省略`lib`前缀。

# layout - 在 Rails 中为每个控制器正确渲染多个布局

> ID：10165934
> 
> 赞同：8
> 
> 时间：2012-04-15T20:46:10.937
> 
> 标签：layout, view, ruby-on-rails-3.1, render

我在我的**Users_controller**中定义了：

`layout "intro", only: [:new, :create]`

这是我的布局的样子： **Intro.html.haml**

```
!!! 5
%html{lang:"en"}
%head
  %title Intro
  = stylesheet_link_tag    "application", :media => "all"
  = javascript_include_tag "application"
  = csrf_meta_tags
%body{style:"margin: 0"}
  %header
    = yield
  %footer= debug(params) 
```

当我渲染一个要求`intro`作为布局的页面时，它会嵌套在我的`application.html.haml`文件中，这不好。

有没有办法避免这种不受欢迎的布局嵌套？

提前致谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-16T16:12:13.990

问题出在我的控制器中。我正在声明多个布局实例，如下所示：

```
class UsersController < ApplicationController
  layout "intro", only: [:new, :create]
  layout "full_page", only: [:show]
  ...
end 
```

**不要这样做！** 第二个声明将优先，你不会得到你想要的效果。

相反，如果您的布局只是特定于操作的，只需在操作中声明它，如下所示：

```
def show
...
render layout: "full_page"
end 
```

或者，如果它有点复杂，您可以使用符号将处理推迟到运行时的方法，如下所示：

```
class UsersController < ApplicationController
  layout :determine_layout
  ...

  private
    def determine_layout
      @current_user.admin? ? "admin" : "normal"
    end
end 
```

# mercurial - RhodeCode 提交不适用于 tortoisehg

> ID：10165937
> 
> 赞同：0
> 
> 时间：2012-04-15T20:46:24.523
> 
> 标签：mercurial, commit, tortoisehg, rhodecode

我将 RhodeCode 用于 mercurial 的基于 Web 的前端。使用成功的身份验证进行克隆工作，但所有带有 tortoisehg 的提交都以 /dev/null 结尾，就像它们从未存在过一样。即使在任何日志文件中，tortoisehg 也没有显示错误。直接使用 web 界面提交正在工作....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T08:56:34.220

请在通过 Tortoise 进行推送时检查您的 rhodecode 日志中是否有任何消息，也许它在身份验证时失败？从我们这边来看，TurtoiseHG 没有兼容性问题。

# c++ - 在 C++ 中将字节写入 ofstream

> ID：10165938
> 
> 赞同：2
> 
> 时间：2012-04-15T20:46:25.510
> 
> 标签：c++, file, char, byte

我有 char 数组，我想将它写入 txt 文件，但以字节为单位。

```
ofstream sw("C:\\Test.txt");
for(int i = 0; i < 256; i++)
{
  sw << (byte)myArray[i]; 
} 
```

这会将字符写入文件，但我想写入字节。如果有 char 'a' 我想写 '97'。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-02T04:40:55.013

要使用 std::fstream 或 std::ofstream 写入一个字节或一组字节，请使用以下`write()`函数：[std::ostream::write](http://www.cplusplus.com/reference/ostream/ostream/write/) ()

```
const int ArraySize = 100;
Byte byteArray[ArraySize] = ...;

std::ofstream file("myFile.data");

if(file)
{
   file.write(&byteArray[0], ArraySize);
   file.write(&moreData, otherSize);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T20:52:34.623

```
ofstream sw("C:\\Test.txt");
for(int i = 0; i < 256; i++)
{
  sw << (int)myArray[i]; 
} 
```

这会将 char 'a' 转换为 int（或字节）值 97。

# java - 使用数组列表导航屏幕 Android

> ID：10165941
> 
> 赞同：0
> 
> 时间：2012-04-15T20:46:38.020
> 
> 标签：java, android, xml

我创建了一个程序来制作一个列表，用户在其中输入一个名称并按下添加类按钮，它被添加到列表中。尽管可以使用该列表中的项目导航到新屏幕。

在用户输入数学时，然后用户按下“数学”，它会将他们带到一个新屏幕？还是只能通过按钮来完成？这是我的代码：

```
public class toclass extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.classes);

        ListView myClassView = (ListView)findViewById(R.id.myClassView);
        final EditText classEditText = (EditText)findViewById(R.id.classEditText);
        final ArrayList<String> noteList = new ArrayList<String>();
        final ArrayAdapter<String> aa;

        aa = new ArrayAdapter<String>      (this,android.R.layout.simple_list_item_1,noteList);

        myClassView.setAdapter(aa);

        Button btnAddClass = (Button) findViewById(R.id.btnAddClass);

        btnAddClass.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                noteList.add(0, classEditText.getText().toString());
                aa.notifyDataSetChanged();
                classEditText.setText("");

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:20:53.213

在您的列表视图中，使用 setOnItemClickListener

# ant - 如何使用 ANT 将 jUnit 输出折叠到摘要？

> ID：10165945
> 
> 赞同：2
> 
> 时间：2012-04-15T20:47:06.803
> 
> 标签：ant, junit

**我的测试目标如下所示：**

```
<target name="test" depends="compileTest">
    <junit haltonfailure="yes">
        <classpath>
            <pathelement location="bin" />
            <pathelement location="lib/xstream-1.4.2.jar" />
            <pathelement location="lib/jettison-1.2.jar" />
        </classpath>
        <formatter type="plain" usefile="false" />

        <batchtest>
            <fileset dir="${test-src}">
                <include name="**/*Test*" />
            </fileset>
        </batchtest>
    </junit>
</target> 
```

**输出如下所示：**

```
test:
    [junit] Testsuite: app.commons.error.test.ShellErrorMessageTest
    [junit] Tests run: 9, Failures: 0, Errors: 0, Time elapsed: 0.006 sec
    [junit] Testcase: testCreateNormal took 0.003 sec
    [junit] Testcase: testGetSectionSeparatorLine took 0.001 sec
    [junit] Testcase: testGetSectionSeparatorLineMultipleSymbols took 0 sec
    [junit] Testcase: testGetSectionSeparatorLineEmptySymbol took 0 sec
    [junit] Testcase: testGetSectionSeparatorLineEmptySymbolSpace took 0 sec
    [junit] Testcase: testGetSectionSeparatorLineNull took 0 sec 
```

**如何将此输出折叠为 1 行摘要？**

有没有办法按照“运行 500 次测试。0 次失败。0 次错误”这一行接收 1 行输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:06:17.560

您可以通过添加来设置不详细的junit输出

```
 <formatter type="brief" usefile="false"/> 
```

内`<junit>`。

为了进一步减少它，我想到了以下选项：

*   使用标准的 unix/cygwin 工具过滤输出，
*   在 内添加`<junitreport>`-task`<junit>`或
*   查看[“使用 Ant 进行 Java 开发”中的免费示例性章节“使用 JUnit 进行测试”](http://java.sun.com/developer/Books/javaprogramming/ant/ant_chap04.pdf)，他们可能会在其中为您提供一些建议。

# php - 使用 preg_match_all() 提取 unicode 字符串

> ID：10165947
> 
> 赞同：0
> 
> 时间：2012-04-15T20:47:25.757
> 
> 标签：php, regex, unicode, preg-match-all

我正在尝试使用以下代码提取字符串：

```
$item = 'id="firstname" l="Prénom" n="firstname" t="text" v=""';
preg_match_all('#(?:l|label|lbl)\s*=\s*"([\x{00C0}\x{00C1}\x{00C2}\x{00C3}\x{00C4}\x{00C5}\x{00C6}\x{00C7}\x{00C8}\x{00C9}\x{00CA}\x{00CB}\x{00CC}\x{00CD}\x{00CE}\x{00CF}\x{00D0}\x{00D1}\x{00D2}\x{00D3}\x{00D4}\x{00D5}\x{00D6}\x{00D7}\x{00D8}\x{00D9}\x{00DA}\x{00DB}\x{00DC}\x{00DD}\x{00E0}\x{00E1}\x{00E2}\x{00E3}\x{00E4}\x{00E5}\x{00E6}\x{00E7}\x{00E8}\x{00E9}\x{00EA}\x{00EB}\x{00EC}\x{00ED}\x{00EE}\x{00EF}\x{00F0}\x{00F1}\x{00F2}\x{00F3}\x{00F4}\x{00F5}\x{00F6}\x{00F9}\x{00FA}\x{00FB}\x{00FC}\x{00FD}\x{00FF}\sa-zA-Z0-9_-]+)"#is', $item, $m); 
```

当使用像“firstname”这样的非unicode字符串时它工作正常，但是当**$item**包含像**“Prénom”这样的字符串时返回一个空值**

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:50:58.300

只需添加`u`到修改器列表中：`isu`.

# android - Android试图将图像作为ByteArray放入sqlite数据库，put方法出错

> ID：10165949
> 
> 赞同：0
> 
> 时间：2012-04-15T20:47:31.750
> 
> 标签：android, image, sqlite, bytearray, put

我正在尝试将图像与一些字符串一起输入数据库，但我的 put 方法出现以下错误：

```
The method put(String, String) in the type ContentValues is not applicable for the arguments (String, Byte[]) 
```

但是当我在教程中看到它时，它似乎和我的做法完全一样。

以下是相关代码：

```
private static final String DATABASE_CREATE = 
    "CREATE Table " + DATABASE_TABLE_LIST + " ( "
    + LIST_ID + " integer PRIMARY KEY Autoincrement, "
    + LIST_NAME + " text NOT NULL, "
    + LIST_ADDRESS + " text NOT NULL, " 
    + LIST_IMAGE + " BLOB );";

...

public long createItem(String name, String address, Byte[] image) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(LIST_NAME, name);
    initialValues.put(LIST_ADDRESS, address);
    initialValues.put(LIST_IMAGE, image);
    return mDb.insert(DATABASE_TABLE_LIST, null, initialValues);
} 
```

我想这可能与放置字符串和字节数组有关，但我不知道如何解决它，也无法通过谷歌搜索找到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:13:12.930

您尝试插入一个字节数组对我来说似乎很**奇怪**。您的图像数据很可能是一个**字节**数组。由于没有用于 Byte 对象数组的 put 方法，而仅用于原始数据类型*byte*的数组，因此编译器不知道该做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:50:39.023

看这里：

[http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html](http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html)

```
DefaultHttpClient mHttpClient = new DefaultHttpClient();  
HttpGet mHttpGet = new HttpGet("your image url");  
HttpResponse mHttpResponse = mHttpClient.execute(mHttpGet);  
if (mHttpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {  
  HttpEntity entity = mHttpResponse.getEntity();  
    if ( entity != null) {  
      // insert to database  
      ContentValues values = new ContentValues();  
      values.put(MyBaseColumn.MyTable.ImageField, EntityUtils.toByteArray(entity));  
      getContentResolver().insert(MyBaseColumn.MyTable.CONTENT_URI, values);  
    }  
} 
```

# html - 在页面中间居中 HTML 元素

> ID：10165952
> 
> 赞同：5
> 
> 时间：2012-04-15T20:47:54.207
> 
> 标签：html, css, center

我想在页面中间水平和垂直放置一个 HTML 元素，但我很难让它水平对齐。我想将 div “内容”居中。这是我的CSS：

```
#background
{
position:absolute; 
width:100%; 
height:100%; 
margin:0px; 
padding:0px; 
left:0px; 
right:0px;
z-index:1;
text-align: center;
}

#content
{
margin-left: auto;
margin-right: auto;
 width: 200px;
 z-index: 2;
 position: absolute;
} 
```

这是我的 HTML：

```
<html>
<head>
<link REL="STYLESHEET" TYPE="text/css" HREF="style/myStyle.css"> 
</head>
<body style="padding:0px; margin:0px; overflow:hidden;"> 

 <div id="background"><img src="images/backgroundimage.png" width="100%" height="100%">

 </div>

 <div id="content">

 <p>Here is some content</p>
 </div>

</body>
</html> 
```

由于 div 必须被定位为绝对，这样做：

```
 margin: 0 auto; 
```

不会工作。我不知道该怎么办。另外，我希望它垂直位于页面的中心。感谢您的帮助，谢谢。

编辑：我需要将背景放在单独的 div 中，以便它可以重新调整大小，并且如果位置是相对的，则内容不会显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T22:04:14.317

```
<html>
<body> 
 <div id="background">
 <div id="content">
  <p>Here is some content</p>
 </div>     
</div>
</body>
</html> 
```

将内容放在中间的更好结构，不使用 JQuery：

```
#background{
background: url(images/backgroundimage.png) top no-repeat;
width:100%;
height:100%;
position:relative;
}

#content{
position:absolute;
top:50%;
left:50%;
width :200px;
height:200px;
margin-left:-100px;
margin-top:-100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:01:11.433

如果您使用 div id 背景作为背景图像，您可以使用 css 设置 div 样式，更多信息请访问[w3schools](http://www.w3schools.com/css/css_background.asp "CSS 背景")网站。

理想情况下，我会为 body 标签使用背景图像，而不是使用图像创建新的 div。

为了使内容居中，请尝试从我的[示例](http://jsfiddle.net/MattStrange/ESYc2/)中进行操作。

马特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T21:54:27.750

尝试将填充设置为更高的数字，填充是屏幕侧面与文本/表格/图片/对象之间的像素数。所以填充应该是，比如20-40。另外，尝试删除绝对位置；它使文本/表格/图片/对象始终位于左侧而不是中间。

# printing - CaptureScreen() 有效，经过验证，但事件 PrintPage 没有，我错过了什么吗？

> ID：10165955
> 
> 赞同：1
> 
> 时间：2012-04-15T20:48:09.737
> 
> 标签：printing

这是我的打印代码。单击打印并出现对话框。如果您单击“确定”，则会启动捕获屏幕。位图 memoryImage 成为当前窗体正在显示的位图。我验证它是正确的并且图像被成功捕获。

最后 printDocument.Print() 发生。只打印一个空白页。我尝试将其更改为 e.Graphics.Color(Gray); 仍然没有运气只打印一个空白页。

显然与打印机的通信很好。我的猜测是页面实际上是在附加图像之前打印的，但我之前从未编写过打印代码，所以我不确定如何重新排列我的代码。

使用 System.Drawing.Printing；

//显示打印对话框（效果很好）

```
 private void button2_Click(object sender, EventArgs e)
    {         
        PrintDialog printDialog1 = new PrintDialog();
        printDialog1.Document = printDocument1;
        DialogResult result = printDialog1.ShowDialog();
        if (result == DialogResult.OK)
        {
            CaptureScreen();
            printDocument1.Print();
            //this.Close();
        }
    }

    Bitmap memoryImage; 
```

//捕获屏幕（也可以）

```
 private void CaptureScreen()
    {
        Graphics myGraphics = this.CreateGraphics();
        Size s = this.Size;
        memoryImage = new Bitmap(s.Width, s.Height, myGraphics);
        Graphics memoryGraphics = Graphics.FromImage(memoryImage);
        memoryGraphics.CopyFromScreen(
            this.Location.X, this.Location.Y, 0, 0, s);
    } 
```

//从捕获的屏幕中绘制图像（不起作用）

```
 private void printDocument1_PrintPage(System.Object sender,
           System.Drawing.Printing.PrintPageEventArgs e)
    {
        e.Graphics.DrawImage(memoryImage, 0, 0);
    } 
```

# java - 如何故意破坏java中的文件

> ID：10165956
> 
> 赞同：2
> 
> 时间：2012-04-15T20:48:12.963
> 
> 标签：java, file, document, corruption, corrupt

***注意：****请不要判断这个问题。对于那些认为我这样做是为了“欺骗”的人；你错了，反正我已经不在学校了。此外，如果我自己真的想作弊，我会简单地使用已经为此创建的服务，而不是重新创建程序。我接受了这个项目，因为我认为它可能很有趣，仅此而已。在您投反对票之前，请**[考虑问题本身的价值](https://meta.stackexchange.com/questions/130046/when-should-i-vote)**，而不是它的投机用途，因为 SO 的目的不是判断，而只是提供公共信息。*

* * *

我正在用 java 开发一个程序，该程序应该故意损坏文件（特别是 .doc、txt 或 pdf，但其他程序也可以）

我最初尝试过这个：

```
public void corruptFile (String pathInName, String pathOutName) {
    curroptMethod method  = new curroptMethod();
    ArrayList<Integer> corruptHash = corrupt(getBytes(pathInName));
    writeBytes(corruptHash, pathOutName);
    new MimetypesFileTypeMap().getContentType(new File(pathInName));
    //  "/home/ephraim/Desktop/testfile"
}

public ArrayList<Integer> getBytes(String filePath) {
    ArrayList<Integer> fileBytes = new ArrayList<Integer>();
    try {
        FileInputStream myInputStream = new FileInputStream(new File(filePath));
        do {
            int currentByte = myInputStream.read();
            if(currentByte == -1) {
                System.out.println("broke loop");
                break;
            }
            fileBytes.add(currentByte);
        } while (true);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println(fileBytes);
    return fileBytes;
}

public void writeBytes(ArrayList<Integer> hash, String pathName) {
    try {
        OutputStream myOutputStream = new FileOutputStream(new File(pathName));
        for (int currentHash : hash) {
            myOutputStream.write(currentHash);
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //System.out.println(hash);
}

public ArrayList<Integer> corrupt(ArrayList<Integer> hash) {
    ArrayList<Integer> corruptHash = new ArrayList<Integer>();
    ArrayList<Integer> keywordCodeArray = new ArrayList<Integer>();
    Integer keywordIndex = 0;
            String keyword = "corruptthisfile";

    for (int i = 0; i < keyword.length(); i++) {
        keywordCodeArray.add(keyword.codePointAt(i));
    }

    for (Integer currentByte : hash) {

        //Integer currentByteProduct = (keywordCodeArray.get(keywordIndex) + currentByte) / 2;
        Integer currentByteProduct =  currentByte - keywordCodeArray.get(keywordIndex);
        if (currentByteProduct < 0) currentByteProduct += 255;
        corruptHash.add(currentByteProduct);

        if (keywordIndex == (keyword.length() - 1)) {
            keywordIndex = 0;
        } else keywordIndex++;
    }

    //System.out.println(corruptHash);
    return corruptHash;
} 
```

但问题是该文件仍然可以打开。当你打开文件时，所有的单词都被改变了（它们可能没有任何意义，甚至可能不是字母，但仍然可以打开）

所以这是我的实际问题：

**有没有办法让一个文件如此损坏以至于计算机根本不知道如何打开它（即当你打开它时，计算机会说“这个文件无法识别，并且不能打开”）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:00:35.363

我想你想看看[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)。此外，程序几乎总是从一开始就识别它的文件。所以打开文件并打乱前 5 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:22:29.557

完全破坏任意文件的唯一方法是用随机垃圾替换其*所有*内容。即便如此，随机垃圾实际上是有意义的东西的可能性也很小。

根据文件类型，有可能从有限的——甚至不是那么有限的——损坏中恢复。例如：

*   流媒体编解码器的设计考虑了网络丢包。有限的损坏可能会显示为图像伪影，甚至是一些丢失的帧，但内容通常仍然可见。

*   基于块的压缩算法，例如`bzip2`，允许恢复未损坏的块。

*   基于文件的压缩系统，例如`rar`并且`zip`可能能够恢复那些压缩数据未被损坏的文件，而不管存档的其余部分是否损坏。

*   人类可读的文本，例如文本文件和源代码文件，仍然可以在文本编辑器中查看，即使部分内容已损坏 - 更不用说其大小不会改变。除非你破坏了整个事情，否则任何普通的读者都可以判断一个任务是否完成，以及重新传输的文件是否与被破坏的文件相同。

除了道德问题，你有没有想过这只是一次性的事情？确实会发生数据损坏，但它并不那么频繁，也*从来没有*那么方便......

如果您*如此*渴望更多时间，最好还是摔断腿并让自己住院。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:53:45.380

有更好的方法：

1.  您的教授接受 Word 文档。发送前用宏病毒感染它。
2.  “忘记”将文件附加到电子邮件中。
3.  在您的电子邮件上伪造发送日期。如果您的教授是接受 Word 文档的那种，这可能会起作用。

# html - z-index 导致问题

> ID：10165961
> 
> 赞同：0
> 
> 时间：2012-04-15T20:48:36.380
> 
> 标签：html, css

我已经创建了一个网站，但现在我遇到了 1 个问题。我什至无法点击链接和导航。

您可以查看： http: [//www.cambridgekitty.com/business-directory/](http://www.cambridgekitty.com/business-directory/) 以检查真实代码。

**HTML**

```
<div id="main-bg">
    <div id="left-side-logo"></div>
</div> 
```

**CSS**

```
#wrap {
    padding: 0;
    position: relative;
    width: 100%;
}
#main-bg {
    background: url("../img/kittybg2-h.png") no-repeat scroll right top transparent;
    margin: 0 auto;
    min-height: 733px;
    position: relative;
    width: 100%;
    z-index: -9999;
} 
```

只需在左侧添加一个徽标

```
#left-side-logo {
    background: url("../img/norwichkitty-final-logo-bg-02.png") no-repeat scroll 0 0 transparent;
    height: 500px;
    left: -150px;
    opacity: 0.8;
    position: absolute;
    top: -60px;
    width: 500px;
    z-index: -1;
} 
```

并添加

```
 position: relative; 
```

到#wrap。并添加

```
 z-index: -9999; 
```

到#main-bg。

但这样做之后......我无法点击徽标甚至导航链接。

请让我知道我为什么要解决这个问题。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:57:33.867

`z-index`如果您不知道自己在做什么，请不要使用否定词。使用正值，只需将`#left-side-logo`'设置`z-index`为更高的值。

由于`#wrap`有一个负数`z-index`，它被放置在`#inner-wrapper`后者的堆叠索引中的内容之后。

也可以看看：

*   [W3C：CSS2.1：9 视觉格式化模型（第 z-index 部分）](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:03:55.960

如果我是你，我会简单地更改应用不同背景图像的元素。给出`#inner-wrapper`城市图像背景和`#main-bg`标志背景。然后使用该`background-position`属性定位徽标背景（当前`background`规则中的两个零）。此外，如果您想要该徽标的不透明度，您可以通过简单地在 Photoshop 或您喜欢的任何编辑器中设置它来实现。

这个解决方案意味着您不必处理这些`z-index`问题，并且可以进行更多无黑客攻击和语义标记，尽管您确实有一些容器。希望这可以帮助 ：）

# php - 提取部分 HTML 页面

> ID：10165963
> 
> 赞同：1
> 
> 时间：2012-04-15T20:48:43.743
> 
> 标签：php, css, html-parsing

是否可以使用 PHP cURL、HTML DOM 解析器或任何其他方法提取远程 HTML 页面的一部分，并将其打印到另一个页面上，保留原始格式样式、图像、选项卡功能？例如，如何从[http://ru.yahoo.com/](http://ru.yahoo.com/)提取中心列的内容（带有制表符和格式，保留原始文本的外观） ？

据我了解，脚本应该处理外部 CSS，以便返回的内容与原始内容具有相同的外观。如果可能的话，什么是最合适的方式？如果是的话，一个例子将不胜感激。我查看了几个示例，但没有找到适合我的案例的任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:00:11.613

好吧，如果我必须快速完成（阅读：非常脏），我会这样做，我认为：

1.  使用标准 PHP 从远程服务器拉取 HTML
2.  使用您从其他站点~~窃取~~的 HTML，并在底部添加您自己的 HTML。
3.  还添加您自己的 CSS 以隐藏您不希望显示的其他网站的 html，并设置您自己的 html 样式。

小提琴直到它看起来足够好。但是：我认为由于相同的域策略，这会破坏外部 JS 文件的加载。

一个不错的方法是：

1.  使用标准 PHP 从远程服务器拉取 HTML
2.  使用一些 PHP HTML 解析器解析 HTML 并删除所有外部 CSS 和 JS 文件并拉取这些文件。
3.  使用 XPath 提取您需要的部分。
4.  使用您自己的 HTML、您需要的部分、新下载的 CSS 和 JS 文件的新链接创建一个新的 HTML 文档。还可以添加您自己的 CSS 和 JS 来设置结果样式。

您知道：RSS 就是为此而发明的，如果他们不提供 RSS 提要，他们很可能不希望您获取内容并将其发布在您自己的网站上。:P

# android - Android FingerPaint Undo/Redo 实现

> ID：10165965
> 
> 赞同：10
> 
> 时间：2012-04-15T20:48:59.423
> 
> 标签：android, paint, android-view

我正在开发一个类似于`FingerPaint`Android SDK Demos 中的示例的测试项目。我试图在我的项目中实现撤消/重做功能，但是我尝试过的事情并没有像我预期的那样工作。我在互联网和这里发现了一些类似的问题，但他们没有帮助我，这就是我问一个新问题的原因。

这是我实际在做什么的一些想法：

```
 public class MyView extends View {

    //private static final float MINP = 0.25f;
    //private static final float MAXP = 0.75f;

    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);

        mCanvas = new Canvas(mBitmap);
        mCanvas.drawColor(Color.WHITE);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);

        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {

        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
} 
```

任何建议/想法/示例是在我的项目中实现此类功能的最佳方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T19:55:55.817

我不知道这是否是您的想法，但这就是我的做法。不是只将它存储在一个路径中，而是存储一个包含所有路径的数组，这样用户可以绘制多条线，只需稍作修改，您也可以添加多点触控。

要进行撤消和重做，只需从变量中删除或添加最后一个路径路径`paths`并将它们存储在一个新数组中。就像是：

```
public void onClickUndo () { 
    if (paths.size()>0) { 
       undonePaths.add(paths.remove(paths.size()-1))
       invalidate();
     }
    else
     //toast the user 
}

public void onClickRedo (){
   if (undonePaths.size()>0) { 
       paths.add(undonePaths.remove(undonePaths.size()-1)) 
       invalidate();
   } 
   else 
     //toast the user 
} 
```

这是我修改后的面板，我现在无法尝试，但上面的方法应该可以！希望能帮助到你！（有几个额外的变量只是删除它们:)

```
private ArrayList<Path> undonePaths = new ArrayList<Path>(); 
public class DrawingPanel extends View implements OnTouchListener {

private Canvas  mCanvas;
private Path    mPath;
private Paint   mPaint,circlePaint,outercirclePaint;   
private ArrayList<Path> paths = new ArrayList<Path>();
private ArrayList<Path> undonePaths = new ArrayList<Path>(); 
private float xleft,xright,xtop,xbottom;

public DrawingPanel(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

    this.setOnTouchListener(this);

    circlePaint = new Paint();
    mPaint = new Paint();
    outercirclePaint = new Paint();
    outercirclePaint.setAntiAlias(true);
    circlePaint.setAntiAlias(true);
    mPaint.setAntiAlias(true);        
    mPaint.setColor(0xFFFFFFFF);
    outercirclePaint.setColor(0x44FFFFFF);
    circlePaint.setColor(0xAADD5522);
    outercirclePaint.setStyle(Paint.Style.STROKE);
    circlePaint.setStyle(Paint.Style.FILL);        
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(6);
    outercirclePaint.setStrokeWidth(6);        
    mCanvas = new Canvas();
    mPath = new Path();
    paths.add(mPath);             

    cx = 400*DrawActivity.scale;
    cy = 30*DrawActivity.scale;
    circleRadius = 20*DrawActivity.scale;
    xleft = cx-10*DrawActivity.scale;
    xright = cx+10*DrawActivity.scale;
    xtop = cy-10*DrawActivity.scale;
    xbottom = cy+10*DrawActivity.scale;

}

public void colorChanged(int color) {
    mPaint.setColor(color);
}

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {            

        for (Path p : paths){
            canvas.drawPath(p, mPaint);
        }

    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 0;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw            
        mPath = new Path();
        paths.add(mPath);
    }

@Override
public boolean onTouch(View arg0, MotionEvent event) {
      float x = event.getX();
      float y = event.getY();

      switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
              if (x <= cx+circleRadius+5 && x>= cx-circleRadius-5) {
                  if (y<= cy+circleRadius+5 && cy>= cy-circleRadius-5){
                      paths.clear();
                      return true;
                      }
              }
              touch_start(x, y);
              invalidate();
              break;
          case MotionEvent.ACTION_MOVE:
              touch_move(x, y);
              invalidate();
              break;
          case MotionEvent.ACTION_UP:
              touch_up();
              invalidate();
              break;
      }
      return true;
}

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T18:15:23.000

最好的解决方案是您实现自己的撤消/重做引擎。

1.  将您在数组中执行的每个操作都保存到数组中（即 [0] 圆圈在位置 x1、y1、[1] 从 x2、y2 到 x3、y3 等的行）

2.  画

3.  如果您需要撤消，请清除画布并重新绘制从 [0] 到 [n - 1] 的所有 n - 1 个动作

4.  如果您撤消更多操作，只需从 [0] 绘制到 [n - 2] 等

我希望它能给你一个提示

干杯!

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T23:22:11.163

实现做/重做功能的一种方法是将方法调用和调用所需的所有信息封装在一个对象中，以便您可以存储它并在以后调用它——[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。

在此模式中，每个动作都有自己的对象：DrawCircleCommand、DrawPathCommand、FillColorCommand 等。在每个对象中，draw() 方法以独特的方式实现，但始终称为 draw(Canvas canvas)，它允许 CommandManager 迭代命令。要撤消，请遍历调用 undo() 方法的对象；

每个命令对象都实现一个接口

```
public interface IDrawCommand {  
  public void draw(Canvas canvas);  
  public void undo();  
} 
```

一个对象看起来像：

```
public class DrawPathCommand implements IDrawCommand{  
  public Path path;  
  public Paint paint;  

  public void setPath(path){
    this.path = path
  }

  public void draw(Canvas canvas) {  
    canvas.drawPath( path, paint );  
  }  

  public void undo() {  
   //some  action to remove the path
 } 
```

}

您的命令将添加到 CommandManager：

```
mCommandManager.addCommand(IDrawCommand command) 
```

并撤消您刚刚调用的命令：

```
mCommandManager.undo(); 
```

CommandManager 将命令存储在数据结构中，例如允许它迭代命令对象的列表。

[您可以在此处](http://www.tutorialforandroid.com/2010/11/drawing-with-canvas-in-android-undoredo.html)找到有关如何在 Android 上使用 do/undo 为 Canvas 绘图实现命令模式的完整教程。

[这](http://www.javaworld.com/javaworld/javatips/jw-javatip68.html?page=1)是另一个关于如何在 Java 中实现命令模式的教程；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-07T08:28:16.973

幸运的是，我今天解决了这个问题。我找到了一种方法来做到这一点。类似于：

```
private ArrayList<Path> paths       = new ArrayList<>();
private ArrayList<Path> undonePaths = new ArrayList<>();

public void undo() {
    if (paths.size() > 0) {
        LogUtils.d("undo " + paths.size());
        clearDraw();
        undonePaths.add(paths.remove(paths.size() - 1));
        invalidate();
    }
}

public void redo() {
    if (undonePaths.size() > 0) {
        LogUtils.d("redo " + undonePaths.size());
        clearDraw();
        paths.add(undonePaths.remove(undonePaths.size() - 1));
        invalidate();
    }
}

public void clearDraw() {
    mBitmap = Bitmap.createBitmap(mWidth, mHeight, Bitmap.Config.ARGB_8888);
    mCanvas.setBitmap(mBitmap);
    invalidate();
}

public void clear() {
    paths.clear();
    undonePaths.clear();
    invalidate();
} 
```

在活动中。

```
private DrawView            mDrawView;

if (v == mIvUndo) {
        mDrawView.undo();

    } else if (v == mIvRedo) {
        mDrawView.redo(); 
```

在xml中

```
<com.cinread.note.view.DrawView
        android:id="@+id/paintView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/> 
```

如果您有更好的解决方案可以联系我。

[这是我写的博客

[http://blog.csdn.net/sky_pjf/article/details/51086901]](http://blog.csdn.net/sky_pjf/article/details/51086901])

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T21:31:16.593

我认为在这种情况下你可以使用两个画布。您知道用户何时开始绘图以及何时完成。因此，`touch_start`您可以创建当前画布的副本。当用户单击撤消时，您将当前画布替换为以前保存的画布。

这应该保证您将拥有以前的图片状态，但我不确定性能。

# facebook - 如何获取 facebook offline_access 令牌？

> ID：10165967
> 
> 赞同：0
> 
> 时间：2012-04-15T20:49:10.847
> 
> 标签：facebook, api, facebook-graph-api, facebook-apps

如何获取facebook的离线访问令牌？我知道从最近开始时间已经过时了。如果我无法获得离线访问令牌。这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:52:43.447

如果您想获得新的令牌，只需按照[本指南](https://developers.facebook.com/docs/authentication/access-token-expiration/)操作即可。您可以通过 JavaScript SDK 获取它，或者向 Oauth 发出请求。在这两种情况下，用户都不会注意到任何事情，除非他取消了您的应用程序的身份验证。

# r - 如何在R中绘制多个中心圆

> ID：10165970
> 
> 赞同：2
> 
> 时间：2012-04-15T20:50:05.230
> 
> 标签：r, plot, geometry, plotrix

嘿，我想在 R 中画几个不同半径的圆。

我用'plotrix'和draw.circle做了这个：

```
draw.circle (0,0,1)
draw.circle (0,0,1.5)
draw.circle (0,0,2)
... 
```

你知道更快更聪明的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T21:15:14.120

`draw.circle`似乎接受输入向量，因此请使用任何方便的函数来制作输入序列并将其传递给函数。

```
plot(0,0,type = "n", xlim = c(-10,10), ylim = c(-10,10))
draw.circle (0,0,seq(0,4,.5)) 
```

![在此处输入图像描述](../Images/6aa9e9510dd23779270a1d185a976417.png)

# android - Android MediaPlayer：准备好的视频需要 250 毫秒才能开始播放

> ID：10165972
> 
> 赞同：2
> 
> 时间：2012-04-15T20:50:11.490
> 
> 标签：android, android-mediaplayer

当我播放视频时，使用 prepareAsync()，然后在准备好视频时调用 start()，从 start() 调用到视频实际开始播放大约需要 250 毫秒。是这样吗，还是这里发生了什么有趣的事情？请注意，视频位于原始目录中。在我的活动的 OnCreate 我有：

```
private VideoView vv;
private MediaPlayer mp = new MediaPlayer();
vv = (VideoView)findViewById(R.id.vv);
vv.getHolder().addCallback(this);
mp.reset();
mp.setDisplay( vv.getHolder() );
mp.setDataSource( this, Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.moviename) );
Log.d(TAG,"video is preparing");
mp.prepareAsync(); 
```

然后是监听器：

```
@Override
public void onPrepared(MediaPlayer arg0) {
   Log.d(TAG, "video is prepared");
   mp.start();
} 
```

实际上我的代码比这更复杂。用户点击一个按钮来播放视频，也可以选择不同的视频。我有一个隐藏视频的图像，并且在 mp.start() 的某个毫秒数时，我将这个图像拉开并显示视频。在我的设备上，我必须将其设置为 250 毫秒，以可靠地不显示视频以外的其他内容（该内容要么是黑色的，要么是之前播放的视频的最后一帧）。

我想知道的是，您是否可以从我的 logcat 中看出这有什么不对劲的地方。我很好奇没有标题为 ButtonBookActivity 的消息。他们正常吗？这些是mp4。请注意，在这种情况下准备视频只需要 120 毫秒。

```
04-15 13:30:05.600: D/ButtonBookActivity(1238): video is reset
04-15 13:30:05.620: I/NuCachedSource2(83): ERROR_END_OF_STREAM
04-15 13:30:05.630: D/AwesomePlayer(83): Failed to open file, all profile flags have to set through setprop method.
04-15 13:30:05.630: I/MPEG4Extractor(83):  NON-QT MODE DECIDED 
04-15 13:30:05.640: I/SampleTable(83): There are reordered frames present.
04-15 13:30:05.640: D/ButtonBookActivity(1238): video is preparing
04-15 13:30:05.640: I/OMXCodec(83): [OMX.Nvidia.h264.decode] AVC profile = 77 (Main), level = 32
04-15 13:30:05.640: I/OMXCodec(83): [OMX.Nvidia.h264.decode] video dimensions are 800 x 1280
04-15 13:30:05.640: I/OMXCodec(83): [OMX.Nvidia.h264.decode] Crop rect is 800 x 1280 @ (0, 0)
04-15 13:30:05.760: D/ButtonBookActivity(1238): video is prepared
04-15 13:30:06.540: D/ButtonBookActivity(1238): touch event
04-15 13:30:06.540: D/ButtonBookActivity(1238): button clicked
04-15 13:30:06.550: D/ButtonBookActivity(1238): calling playmovie in onTouch callback
04-15 13:30:06.550: D/ButtonBookActivity(1238): playing movie
04-15 13:30:06.550: D/ButtonBookActivity(1238): delaying movie reveal
04-15 13:30:06.560: D/NvOsDebugPrintf(83): Allocating new output: 800x1280 (x 12)
04-15 13:30:06.570: I/OMXCodec(83): [OMX.Nvidia.h264.decode] video dimensions are 800 x 1280
04-15 13:30:06.570: I/OMXCodec(83): [OMX.Nvidia.h264.decode] Crop rect is 800 x 1280 @ (0, 0)
04-15 13:30:06.620: D/ButtonBookActivity(1238): touch event
04-15 13:30:06.620: D/ButtonBookActivity(1238): ignoring touch event
04-15 13:30:06.770: V/NvAudioALSA(83): open called for devices 00000002 in mode 0...
04-15 13:30:06.770: V/NvAudioALSA(83): getAlsaDeviceName::devices 0x2 IsVoiceCallDevice 0 devName music
04-15 13:30:06.770: V/NvAudioALSA(83): Reset buffer size to 4096 and latency to 92879
04-15 13:30:06.770: V/NvAudioALSA(83): Set PLAYBACK PCM format to S16_LE (Signed 16 bit Little Endian)
04-15 13:30:06.770: V/NvAudioALSA(83): Using 2 channels for PLAYBACK.
04-15 13:30:06.770: V/NvAudioALSA(83): Set PLAYBACK sample rate to 44100 HZ
04-15 13:30:06.770: V/NvAudioALSA(83): Buffer size: 4096
04-15 13:30:06.770: V/NvAudioALSA(83): Period size: 1024
04-15 13:30:06.770: V/NvAudioALSA(83): Latency: 92879
04-15 13:30:06.770: V/NvAudioALSA(83): Period Time: 23219
04-15 13:30:06.770: V/NvAudioALSA(83): Periods: 4
04-15 13:30:07.060: V/NvAudioALSA(83): Initialized ALSA PLAYBACK device music
04-15 13:30:09.550: D/ButtonBookActivity(1238): video completed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:32:13.210

[这](http://code.google.com/p/android/issues/detail?id=3434)可能与 android 音频延迟问题有关。对音频文件的 start() 调用需要一些时间，然后才能真正从扬声器中发出声音。也许这也适用于视频，并且媒体播放器需要一些时间才能显示任何视频帧。

因此，您可能无能为力。

# c# - 我无法使用 C# 正确解压缩文件

> ID：10165977
> 
> 赞同：0
> 
> 时间：2012-04-15T20:51:10.490
> 
> 标签：c#, compression

您好，我正在尝试使用 GZipStream 压缩文件。

我创建了自己的扩展，我们称之为 .myextension

我尝试压缩 .myextension 并保留其扩展名。我的意思是我正在尝试将 .myextension 压缩到相同的扩展名。示例：我有 myfile.myextension，我想将它压缩到 myfile.myextension。有用。我可以很好地压缩我的文件。

问题是当我尝试使用 GZipStream 解压缩它时，它说幻数不正确。

我该如何解决？解压缩时我应该将扩展名更改为.gz吗？我应该以某种方式转换它吗？请帮助我，我不知道如何继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:54:45.577

这是一个常见的问题。我想为您提供类似的解决方案：

[http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=427166&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=427166&SiteID=1)

“幻数”通常是一个固定值，而且经常显得有些随意，可能难以辨认。例如，一行代码可能有：

```
If X = 31 then
    'Do Something
End If 
```

在这种情况下，31 是一个“幻数”：它没有明显的含义（就编码而言，这是一个嘲笑的术语）。

文件（不同类型）通常将前几个字节设置为某些值，例如，前两个字节为十六进制数字 42 4D 的文件是位图文件。这些数字是“幻数”（在这种情况下，42 4D 对应于字符 BM）。其他文件也有类似的“幻数”。

[http://forums.microsoft.com/msdn/showpost.aspx?postid=1154042&siteid=1](http://forums.microsoft.com/msdn/showpost.aspx?postid=1154042&siteid=1)

当然，一旦有人（团队）开发了一个支持 zip、bzip2、gzip、rar、cab、jar、data 和 iso 文件的简单压缩/解压缩自定义任务，我就会使用它，直到那个时候，我'将坚持使用开源命令行实用程序。

当然，您可以编写一个解决方案，但这个方案太容易实现了。对于处理 zip 文件，没有原生的 .NET 库（至少现在还没有）。现在支持处理 zip 文件内的压缩流，但不导航存档本身。

现在，正如我之前提到的，有很多像 Sourceforge 上的开源 zip 实用程序。这些在 Win2003 Server x64 上运行良好，我可以证明这一点。

但是，如果您坚持使用 .NET 解压缩 zip 解决方案，请使用[http://www.icsharpcode.net/OpenSource/SharpZipLib/](http://www.icsharpcode.net/OpenSource/SharpZipLib/)，它是开源的，并且具有干净可靠的 100% .NET 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:12:34.423

首先，从其他遇到过[各种问题](https://stackoverflow.com/questions/9471826/why-does-bcl-gzipstream-with-streamreader-not-reliably-detect-data-errors-with/9472049#9472049)的用户那里，GZipStream 不应该使用，因为它有错误。它不会正确压缩短字符串，也不会检测到损坏的压缩数据。这是一个非常糟糕的实现。

至于您的问题，其他使用 GZipStream 的人会看到 gzip 数据的四字节前缀，即未压缩字节数。如果将其写入文件，则会导致您看到的问题。gzip 文件应以十六进制字节开头`1f 8b`。

# javascript - 我们如何或可以通过 npm 和 Meteor 使用节点模块？

> ID：10165978
> 
> 赞同：47
> 
> 时间：2012-04-15T20:51:22.213
> 
> 标签：javascript, node.js, npm, meteor

我们如何或可以通过 npm 和[Meteor](http://en.wikipedia.org/wiki/Meteor_%28platform%29)使用节点模块？

或者那是依赖于包装[API](http://en.wikipedia.org/wiki/Application_programming_interface)的东西？

还是有推荐的规定方法？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-12T01:06:06.543

> [Meteor 1.3](http://info.meteor.com/blog/announcing-meteor-1.3)于 2016 年 3 月 28 日发布，为应用程序提供完整的 ES6 (ES2015) 模块支持和开箱即用的 NPM 支持。应用程序和包现在可以在客户端和服务器上直接轻松地加载 NPM 模块。

如果您可以使用 1.3，请查看[http://guide.meteor.com/using-packages.html#installing-npm](http://guide.meteor.com/using-packages.html#installing-npm)。

例如，要使用 moment.js：

```
meteor npm install --save moment 
```

然后在您的代码中：

```
import moment from 'moment';

// this is equivalent to the standard node require:
const moment = require('moment'); 
```

如果您需要使用旧版本的 Meteor，请阅读下面的其余答案。

* * *

**流星前 1.3**：

[从 v0.6.0 开始，Meteor](http://www.meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)在 3rd 方包的帮助下直接与 NPM 模块集成。例如，要使用类似的模块[`ws`](https://npmjs.org/package/ws)，

1.  运行`sudo npm install -g ws`（或对于本地安装，请参阅[此](https://stackoverflow.com/questions/10587964/where-do-we-put-node-modules-we-install-by-npm-in-a-meteor-project)）
2.  在您的服务器 JavaScript 文件中，

    ```
    var Websocket = Npm.require('ws');
    var myws = new Websocket('url'); 
    ```

要使用核心 Node 模块，只需进行相应的`Npm.require()`调用，例如`var Readable = Npm.require('stream').Readable`.

* * *

借助 Arunoda 开发的[NPM 包](http://meteorhacks.com/complete-npm-integration-for-meteor.html)，您可以直接将[230,000 多个 NPM 模块](https://www.npmjs.com/)中的任何一个与 Meteor 一起使用。

您还可以从智能包中定义对 Npm 包的依赖项 - 从npm 支持[的初始公告中：](https://groups.google.com/d/msg/meteor-talk/b6zQrgk8lYo/7KykCwz19WMJ)

`Npm.depends`您的智能包现在可以通过添加对in的调用直接定义依赖项`package.js`：

```
Npm.depends({
  "awssum": "0.12.2",
  "underscore.string": "2.3.1"
}); 
```

所有这些都适用于热代码重新加载，就像 Meteor 的其余部分一样。当您进行更改时，捆绑器将自动下载丢失的 npm 包并重新固定其依赖项。

要在服务器代码中使用 NPM 模块，`Npm.require`请像通常使用的那样使用 plain `require`。值得注意的是，`__meteor_bootstrap__.require`已被淘汰，其所有用途均已转换为`Npm.require`.

有[一个在你的应用程序中使用 NPM 模块的小例子](https://github.com/avital/meteor-xml2js-npm-demo)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-15T22:07:38.607

> 请注意，此答案适用于 0.6.0 之前的 Meteor 版本，该版本于 2013 年 4 月发布并添加了直接`npm`集成

像往常一样安装模块`npm`，然后使用

```
var require = __meteor_bootstrap__.require,
    pd = require("pd"),
    after = require("after") // etc 
```

加载您想要的任何模块

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-24T05:15:32.413

我在 Meteorpedia 上写了一篇完整的文章：

[http://www.meteorpedia.com/read/npm](http://www.meteorpedia.com/read/npm)

本文介绍了如何在您的应用程序和/或包中使用 npm，以及包装常规回调和事件发射器回调以在 Meteor 和 Fibers 中正常工作的常见模式，并包括对 Arunoda 的 async-utilities 和其他资源的引用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-02T11:34:45.403

你可以使用[Meteor Npm](http://atmospherejs.com/package/npm)包

```
meteor add meteorhacks:npm 
```

`packages.json`然后在项目的根目录中创建一个包含 NPM 模块信息的文件。

```
{
    "redis": "0.8.2",
     "github": "0.1.8"
} 
```

然后就像（服务器端）一样简单

```
var github = Meteor.npmRequire("github");
var redis = Meteor.npmRequire("redis"); 
```

所以你只需使用`Meteor.npmRequire`而不是`require`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-22T13:35:07.957

我写了一篇关于如何从 Meteor 0.6.5 开始执行此操作的 Gist，*[如何将 Node.js npms 添加到您的 Meteor.js 项目](https://gist.github.com/kenyee/6307258)*中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-19T00:52:45.797

我正在使用[这样一个脚本](https://github.com/peerlibrary/meteor-pdf.js/blob/dd85c069e5d94a12f0a2e55ffa29e8b566e62d0b/bootstrap.coffee)，它可以很好地安装所有[Node.js](http://en.wikipedia.org/wiki/Node.js)依赖项。它的行为类似于 Meteor 引擎分支中的官方支持（它在运行时安装依赖项），但它也支持从[Git](http://en.wikipedia.org/wiki/Git_%28software%29)存储库和类似的好东西安装。

# c++ - 如何将用户输入的数据从 datagridview 获取到 Windows 窗体图？

> ID：10165980
> 
> 赞同：0
> 
> 时间：2012-04-15T20:51:58.790
> 
> 标签：c++, database, visual-studio-2010, visual-c++, datagridview

我试图让用户在 windows 窗体 datagridview 中输入的数据到 windows 窗体图表，但我不知道该怎么做。我什至不知道如何从 datagridview 中获取用户输入的数据。

我一直在尝试在 Visual Studio 中设置本地数据库，但我使用的是 C++，并且似乎删除了对 VC++ 2010 中数据库的支持。我也尝试建立一个 SQLite 数据库，但没有成功。

**有没有办法在不使用数据库或使用 Microsoft 选项以外的其他数据库的情况下将用户输入的数据从 datagridview 获取到图表？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:51:38.540

我一直在研究同样的问题，试试这个-> [http://www.functionx.com/vccli/controls/dgv.htm](http://www.functionx.com/vccli/controls/dgv.htm)，如果有帮助，请告诉我

编辑：

## 这只是我在下面发布的原始答案中的代码，格式更好：

我一直在同时解决这个问题。我要编辑值的工作：

`System::String^ dur; this->dataGridView1->Rows[1]->Cells[1]->Value = dur;`

这将给出数据网格中的值：

```
 System::String^ foo;
 foo = (System::String^)this->dataGridView1->Rows[1]->Cells[1]->Value; 
```

这也会给出值，但你不能编辑它：

`System::String^ derp;
this->dataGridView1->CurrentCell = this->dataGridView1[1,1];
derp = (System::String^)this->dataGridView1->CurrentCell->Value;`

没有尝试写或读

```
this->dataGridView1[1,1]->View; 
```

但我认为这也可能有效。

# php - Netbeans、Symfony 和暗示让我发疯

> ID：10165982
> 
> 赞同：5
> 
> 时间：2012-04-15T20:52:00.567
> 
> 标签：php, netbeans, symfony

我是 NetBeans 的用户，因为它曾经是不花钱的最佳选择。代码完成总是很好，即使是像 Symfony 2 这样庞大而广泛的东西。但是，我有一个新的 mac，想下载 Netbeans，安装它等等。

完成总是那么好，我可以这样做，例如：

```
<?php
// assuming a controller scope here.
public function anyAction()
{
    $em = $this->getDoctrine()->getEntityManager();
    $em-> /* and here there would have been a whole lot of possible hints, methods from    
    the EntityManager object on my old NetBeans install, and now it says: no hints */
?> 
```

但他们不再来了。暗示层次不够深。例如，当使用“new”关键字时，它会提示我可能会使用的命名空间和类，但仅此而已，没有比这更深的了。

我尝试了很多设置，但没有任何效果。另外：安装 Symfony 插件似乎对此不起作用。

我该怎么办？

我真的需要这些提示，因为 Symfony 包含数百万个函数并且总是搜索 API 太费时了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T23:06:43.077

这来自 vendor/symfony/src/Symfony/Bundle/Doctrine/Bundle/Registry.php 中出现的修改。getEntityManager() 方法的 phpDoc 已更改为：

```
/**
 * Gets a named entity manager.
 *
 * @param string $name The entity manager name (null for the default one)
 *
 * @return EntityManager
 */
public function getEntityManager($name = null)
{
    // ...
} 
```

NetBeans 的工作 phpDoc 是：

```
/**
 * Gets a named entity manager.
 *
 * @param string $name The entity manager name (null for the default one)
 *
 * @return \Doctrine\ORM\EntityManager
 */
public function getEntityManager($name = null)
{
    // ...
} 
```

这已在 github 存储库中修复，在[symfony/symfony 存储](https://github.com/symfony/symfony)库上提交 353085857ba6d17694e5322e2eefb0d8fec6380d 。

# marklogic - xmdp:http-get 和 xdmp:insert-document

> ID：10165985
> 
> 赞同：1
> 
> 时间：2012-04-15T20:52:22.627
> 
> 标签：marklogic

我正在尝试使用 marklogic XDMP API 从 twitter 获取 XML 提要，我能够在 Xquery 控制台中获取 XML，但无法弄清楚如何转换该 xml 并将其放入命名数据库。我正在做以下事情：

1.  当使用函数点击此网址“ [http://search.twitter.com/search.atom?q=pankaj&since_id=1212121](http://search.twitter.com/search.atom?q=pankaj&since_id=1212121)`xdmp:http-get` ”时，我得到以下 XML：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
      <twitter>
        <entry>
          <id>1212121</id>
          <content>did u hear what he talked about Pankaj</content>
        </entry>
        <entry>
         <id>1212122</id>
          <content>abc xyz abc xyz</content>
        </entry>
     </twitter> 
    ```

2.  现在我想将此 xml 拆分为每个`<entry>`文档并插入到 marklogic 数据库中。

3.  此外，此脚本应每 30 秒安排一次，下一次命中应`since_id`在 URL 的字段中附加最后一个条目的 id。

我正在尝试关注但遇到一些错误，我也不知道在哪里提供数据库名称以及如何附加`since_id`。

```
let $content := xdmp:http-get("http://search.twitter.com/search.atom?q=pankaj&since_id=191622916163641344",
 <options xmlns="xdmp:document-get">
   <encoding>UTF-8</encoding>
 </options>)
return  
for $i in $content//entry
return
xdmp:document-insert(
     "/example.xml", $content//entry,
     xdmp:default-permissions(), 
     xdmp:default-collections(), 
 10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:03:37.110

一个错误可能是对未转义的 & 号的抱怨，在 XQuery（如 XML）中需要使用`&amp;`.

您还需要声明 Atom 命名空间，因为从 Twitter 返回的内容使用它作为其默认命名空间。

您还需要给每个文档一个唯一的名称；否则，MarkLogic 将抛出一个 CONFLICTINGUPDATES 错误。在下面的解决方案中，我在结果文档的 URI 中使用推文 ID（从`<atom:id>`元素中解析它）。

要更新 since_id 值，您有多种选择。不幸的是，来自 Twitter 的 XML 不包含原始推文 ID 作为其自己的元素或属性值，这意味着如果不先在插入时修改文档（包括此类一个字段）。但是我们可以利用我们在 URI 中使用推文 ID 的事实。启用 URI 词典（管理 UI 中的全局数据库选项）将允许您调用`cts:uris()`以轻松获取您存储的最新推文 ID。

这是我使用这种技术提出的完整解决方案：

```
declare namespace atom="http://www.w3.org/2005/Atom";
declare variable $initial-tweet-id := "191622916163641344";
declare variable $uri-prefix := "/tweets/";
declare variable $uri-suffix := ".xml";
declare variable $latest-tweet-uri := cts:uri-match(concat($uri-prefix,"*"))[last()];
declare variable $latest-tweet-id := if ($latest-tweet-uri)
                                     then substring-after(
                                            substring-before($latest-tweet-uri,$uri-suffix),
                                            $uri-prefix)
                                     else $initial-tweet-id;

let $content := xdmp:http-get(
                  concat("http://search.twitter.com/search.atom?q=pankaj&amp;since_id=",
                         $latest-tweet-id),
 <options xmlns="xdmp:document-get">
   <encoding>UTF-8</encoding>
 </options>)
for $entry in $content//atom:entry
let $tweet-id := tokenize($entry/atom:id, ":")[last()]
return
  ( xdmp:log(concat("Adding tweet:", $tweet-id)),
    xdmp:document-insert(
     concat($uri-prefix, $tweet-id, $uri-suffix),
     $entry,
     xdmp:default-permissions(), 
     xdmp:default-collections(), 
     10)
  ) 
```

要每 30 秒运行一次，您可以使用管理 UI 设置计划任务（配置 -> 组 -> 默认 -> 计划任务）。这也是您指定要在哪个数据库上运行它的地方。（在查询控制台中，您只需使用“内容源”下拉菜单。）

替代方法：

*   在加载时插入一个存储推文 ID 的元素，然后在其上使用范围索引来查找最大值。
*   在 上创建一个 dateTime 范围索引，使用它来查找最新的推文，并从值中`<atom:published>`提取推文 ID 。`<atom:id>`

我的解决方案和上述两个替代方案中的第一个不需要任何磁盘读取，因此在这方面它们更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:32:24.673

请参阅 xdmp:http-get 的参考手册页。xdmp:http-get 返回一个项目序列。

从参考手册：

> xdmp:http-get 输出中的第一个节点是来自 http 服务器的响应标头。
> 
> xdmp:http-get 输出中的第二个节点是来自 http 服务器的响应。根据从 http 服务器发送的内容类型标头，响应被视为文本、XML 或二进制。如果节点是html，header应该指明text/html，默认是作为文本文档返回的。文档类型由 mimetypes 映射决定，您可以根据需要在管理界面中更改映射。如果您碰巧知道响应是 XML，即使标头没有将其指定为 XML，并且希望将响应作为 XML 处理，您可以将响应包装在 xdmp:unquote 调用中以将响应解析为 XML。您还可以使用 xml 选项（在 xdmp:document-get 命名空间中）告诉 API 将文档视为 XML。此外，如果您知道响应是 HTML 文档，

您应该检查第一项的响应类型和状态。如果是 text/xml 响应，那么你可以这样做

```
for $i in $content[2]//entry 
```

要每 30 秒运行一次，您可以使用计划任务。如果您只想存储新文档，则可以通过 twitter 为每条推文提供的唯一 twitter URL/ID 存储每个文档。您还可以将数据库中的最后一个“id”存储在文档中，然后在每次运行 fetcher 时将其取出并更新。

# wordpress - Wordpress plugins_url 功能似乎不起作用

> ID：10165989
> 
> 赞同：1
> 
> 时间：2012-04-15T20:52:40.560
> 
> 标签：wordpress

我的网站上有一个插件，它使用 plugins_url 来获取附加的 javascript 文件的正确路径。但是，当我在我的网站上加载它时，它似乎混淆了路径。

我的 wordpress 安装在[http://serverip/~account/](http://serverip/~account/)

并且插件正在尝试访问[http://serverip/~account/~account/yaddayadda](http://serverip/~account/~account/yaddayadda)的 javascript 文件（注意 ~account 目录的重复）

不太确定问题出在哪里，以及如何解决。任何想法从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:19:02.903

您可以使用**WP_PLUGIN_URL**获取插件目录 URL，使用**WP_PLUGIN_DIR**获取目录路径，顺便说一句，您在使用 plugins_url 时遇到什么问题？

# java - 依赖类型推断如何影响代码的可维护性？

> ID：10165993
> 
> 赞同：1
> 
> 时间：2012-04-15T20:53:11.883
> 
> 标签：java, vb.net, type-inference, maintainability, code-inspection

*尽管此问题中的示例使用 Visual Basic.NET 和 Java，但该主题也可能适用于实现类型推断的其他语言。*

到目前为止，我只在 VB.NET 中使用 LINQ 时使用过类型推断。但是，我知道类型推断可以用于语言的其他部分，如下所示：

```
Dim i = 1    'i is inferred to be an Integer
Dim s = "Hoi"    's is inferred to be a string

Dim Temperatures(10) as Double

For T In Temperatures      'T is inferred to be a Double
    'Do something
Next 
```

我可以看到类型推断如何减少我需要编写一段代码的输入量，并且还可以更快地更改基本变量的类型（例如`Temperatures(10)`上面），因为您不需要更改类型访问它的所有其他变量（例如`T`）。但是，我担心缺少明确的类型声明可能会使代码更难阅读，比如在代码检查期间，因为变量的类型可能不是很明显。例如，通过仅查看上面的 For 循环，您可能会正确地假设它`T`是某个浮点值，但如果不回头查看`Temperatures`. 根据代码的编写方式，`Temperatures`可以更早地声明，因此需要读者返回并找到声明，然后继续阅读。诚然，当使用一个好的 IDE 时，这并不是什么大问题，因为将鼠标光标快速悬停在变量名称上会显示类型。

另外，我想在某些情况下使用类型推断可能会在尝试更改代码时引入一些错误。考虑下面的（诚然做作的）示例，假设类`A`和`B`做完全不同的事情。

```
Class A
    Public Sub DoSomething()
    End Sub
End Class

Class B
    Public Sub DoSomething()
    End Sub
End Class

Dim ObjectList(10) As A

For item In ObjectList
    item.DoSomething()
End For 
```

可以更改`ObjectList`from `A`to的类型，`B`代码可以编译，但功能不同，这可能表现为代码其他部分的错误。

通过一些类型推断的例子，我想大多数人都会同意它的使用对可读性或可维护性没有负面影响。例如，在 Java 7 中，可以使用以下内容：

```
ArrayList<String> a = new ArrayList<>();    // The constructor type is inferred from the declaration. 
```

代替

```
ArrayList<String> a = new ArrayList<String>(); 
```

我很想知道人们对这个问题的想法是什么，以及是否有任何关于应该如何广泛使用类型推断的建议。

阿米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:20:47.977

就我个人而言，我倾向于仅在类型清晰且使代码更易于阅读的情况下使用隐式类型推断

```
var dict = new Dictionary<string, List<TreeNode<int>>>(); 
```

比阅读更容易

```
Dictionary<string, List<TreeNode<int>>> dict =
    new Dictionary<string, List<TreeNode<int>>>(); 
```

但类型是明确的。

* * *

在这里，您得到的并不是很清楚，我会明确指定类型：

```
var something = GetSomeThing(); 
```

* * *

在这里使用没有意义，`var`因为它不会简化任何事情

```
int i = 0;
double x = 0.0;
string s = "hello"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:11:30.200

我认为部分是编码风格的问题。我个人选择了更详细的代码。（虽然当我转向 Java 7 项目时，我可能会利用新语法，因为所有内容都在一行中。）

我也认为明确可以避免某些微妙的错误。举个例子：

```
For T In Temperatures      'T is inferred to be a Double
    'Do something
Next 
```

如果`Do something`是一种依赖于 的数值方法`T`，`Double`那么更改`Temperatures`为单精度可能会导致算法无法收敛，或者收敛到不正确的值。

我想我可以用另一种方式争论——明确变量类型在某些情况下会产生很多本来可以避免的微不足道的维护工作。同样，我认为这完全是风格问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-15T21:00:13.723

泛型的使用是为了确保在编译时进行类型安全检查，而不是在运行时进行处理。如果您正确使用类型安全，它将使您免于运行时异常以及在数据检索时编写转换代码。

JAva 在 jdk 1.7 之前不使用这个语法

```
ArrayList<String> a = new ArrayList<>(); 
```

它的

```
ArrayList<String> a = new ArrayList(); 
```

但是在java中使用

```
ArrayList<String> a = new ArrayList(); and
ArrayList<String> a = new ArrayList<String>(); 
```

两者都认为相同，因为引用变量包含安全类型的编译时间信息，它是字符串，您不能在其中添加任何其他内容而不是字符串，即

```
a.add(new Integer(5)); 
```

它仍然是类型安全的，你会得到只能插入字符串的错误。

所以你不能做你期望做的事情。

# php - 允许用户只选择一定数量的复选框

> ID：10165999
> 
> 赞同：-2
> 
> 时间：2012-04-15T20:54:09.397
> 
> 标签：php, javascript

我有一个复选框，我希望用户最多选择 3 个。我不知道该怎么做。

```
artificial intelligence <input type = "checkbox" name = "topic[]" value = "29"  >
computer graphics <input type = "checkbox" name = "topic[]" value  = "30" >
computer animation <input type = "checkbox" name = "topic[]" value = "31" >
software engineering <input type = "checkbox" name = "topic[]" value = "32" > 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T21:10:14.450

你有没有想过 UI 会如何处理这个问题？这是使用 jQuery 的一种方法：

```
// adjust this to be all checkboxes in the group
var theCheckboxes = $("input[type='checkbox']"); 

theCheckboxes.click(function()
{
    if (theCheckboxes.filter(":checked").length > 3)
        $(this).removeAttr("checked");
}); 
```

[http://jsfiddle.net/jyYu5/](http://jsfiddle.net/jyYu5/)

这可以防止在标记三个之后进行检查，但不会在视觉上禁用这些字段。所以这是需要考虑的额外问题。

此外，您仍然需要在服务器端检查是否只标记了三个，因为用户显然可以提交他想要的任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:08:03.313

你可以很容易地用 jQuery 做到这一点。使用直接的 javascript 可能会有点困难，但不是很多。

加载 jQuery，并编写一个函数以在单击复选框时执行。在该函数中有一个 if 语句询问两件事，它是当前未选中的按钮，并且当前检查的按钮数量超过 x 个。如果两者都为真，则防止默认。

它应该是这样的：

`<input class="checkbox"></input>`

```
$('.checkbox').click(function(){
    if ($(this:not(:checked)) && $(".checkbox:checked").length >= 3) {
       event.preventDefault()
    }
}); 
```

这应该防止检查超过 3 个复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:09:35.017

很明显你想要一些客户端验证....使用javascript....

有几种方法可以做到...

像普通的 javascript 你可以做类似的事情

```
<script>
var predefined_limit = 3;
document.getElementByTagName('input').onchange = doSomething

function doSomething(){
    var counter=0;
    var elem = document.getElementByTagName('input');
    for(var i=0; i<elem.length; i++)
        if(elem.type=='checkbox' && elem.checked == true)
            counter ++;
    if(counter > predefined_limit){  
        this.checked = false;   
        alert('You can check only '+ predefined_limit + 'checkboxes')
    } 
}
</script> 
```

那么您也可以使用 jQuery 或其他 javascript 框架，就像其他答案所建议的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T20:15:13.937

使用 jQuery，您可以像这样计算选中的复选框：

```
//Count number of checkboxes

$('input[name="type[]"]').on('click', function() {
    var nbcheck = $('input[name="type[]"]:checked').length;
    if(nbcheck > 2) {
        console.log('FORBIDEN!!!!');
        //Do stuffs you want -->
    }
}); 
```