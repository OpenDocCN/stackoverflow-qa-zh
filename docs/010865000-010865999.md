# StackOverflow 问答 10865000-10865999

# php - How do detect which submit button was sent through POST in PHP

> ID：10865002
> 
> 赞同：0
> 
> 时间：2012-06-02T18:50:17.740
> 
> 标签：php, jquery, forms, post, submit

**Problem:**

To detect with jQuery which submit button was pressed after the form is sent through PHP.

**Scenario:**

I have three buttons:

1.  submit-update1
2.  submit-update2
3.  submit-update3

If $_POST['submit-update1'] is set in PHP then jQuery should add a class to a div with id "collapseOne". For instance:

```
if (PHP POST submit button 1 is submitted)
{
    $('#collapseOne').addClass('in');
}

if (PHP POST submit button 2 is submitted)
{
    $('#collapseTwo').addClass('in');
}

if (PHP POST submit button 3 is submitted)
{
    $('#collapseThree').addClass('in');
} 
```

**DIV elements:**

```
<div class="accordion" id="accordion2">
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
          Title 1
        </a>
      </div>
      <div id="collapseOne" class="accordion-body collapse">
        <div class="accordion-inner">
            Text here
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
          Title 2
        </a>
      </div>
      <div id="collapseTwo" class="accordion-body collapse">
        <div class="accordion-inner">
          Text here
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
          Title 3
        </a>
      </div>
      <div id="collapseThree" class="accordion-body collapse">
        <div class="accordion-inner">
          Text here
        </div>
      </div>
    </div>
</div> 
```

**Submit buttons:**

```
<button type="submit" id="submit-update1" name="submit-update1">Update 1</button>
<button type="submit" id="submit-update2" name="submit-update2">Update 2</button>
<button type="submit" id="submit-update3" name="submit-update3">Update 3</button> 
```

Any advice is welcome and thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:02:49.527

```
 <form method="post" id="many_buttons">
    <input type="hidden" id="submit_button" name="button_pressed" />

    <button type="submit" id="submit-update1" name="submit-update1">Update 1</button>
    <button type="submit" id="submit-update2" name="submit-update2">Update 2</button>
    <button type="submit" id="submit-update3" name="submit-update3">Update 3</button>
  </form>

  <script>
  $('#many_buttons button[type=submit]').click(function(){
    $('#submit_button').val($(this).attr('name'))
  })
  </script> 
```

Then in server side:

```
 <?php
  if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $button = $_POST['button_pressed'];

    if ($button == 'submit-update1')
      $div = 'collapseOne';
    elseif ($button == 'submit-update2')
      $div = 'collapseTwo';
    elseif ($button == 'submit-update3')
      $div = 'collapseThree';
  }
  ?> 
```

Finally you print this javascript:

```
 <?php if (!empty($div)) : ?>
  <script>$('#<?php echo $div ?>').addClass('in')</script>
  <?php endif ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:54:52.887

I assume that you already have the post submit button thing figured out but are having trouble manipulating the page based on those variables. You could use a dynamic script to set some variables based on the post variables like so:

```
echo "<script type='text/javascript'>";
if (isset($_POST['submit-update1']) && $_POST['submit-update1'] == true) {
    echo "var submitUpdate1 = true;";
}
else {
    echo "var submitUpdate1 = false;";
}
///...do similar things for the rest of your post variables
echo "</script>"; 
```

Then in your javascript you would simply access those variables defined above after the document is ready.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:22:59.737

Add this to your html:

```
<input type="hidden" name="submit" value="" /> 
```

And then this is the jQuery:

```
$('button[type="submit"]').on('click', function(e){
    $('form input[name="submit"]').val($(this).attr('name'));
    $('form').serialize();
}); 
```

# c# - 如何将图表控件图片保存到文件中？

> ID：10865006
> 
> 赞同：14
> 
> 时间：2012-06-02T18:50:28.883
> 
> 标签：c#, .net, winforms, charts, mschart

`System.Windows.Forms.DataVisualization.Charting.Chart`在.Net 4.0 WinForms 应用程序中显示带有控件的图表，我可以将其渲染保存到图片文件中吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-02T18:53:02.237

方法如何[`Chart.SaveImage()`](http://msdn.microsoft.com/en-us/library/dd456181.aspx)？

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-02T18:58:30.217

您可以通过传递正确的 ChartImageFormat.* 来使用下面的代码：

```
this.chart1.SaveImage("C:\\mycode\\mychart.png", ChartImageFormat.Png); 
```

如果您遇到任何问题，也请看这个： [使用 .net 图表保存图像](https://stackoverflow.com/questions/8304406/save-image-using-net-chart) 并 [保存更高分辨率的图表而不会弄乱外观](https://stackoverflow.com/questions/9641436/saving-higher-resolution-charts-without-messing-up-the-appearance)

# html - 如何使绑定文本适应 div

> ID：10865007
> 
> 赞同：1
> 
> 时间：2012-06-02T18:50:32.263
> 
> 标签：html, css

我有两个并排的div。问题是，当我在一个 div 中有长绑定文本时，它会溢出到第二个。这是一个例子：http: [//jsfiddle.net/hjZ8F/1/](http://jsfiddle.net/hjZ8F/1/)

如何适应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:55:08.397

这是您的 jsFiddle 的工作版本：http: [//jsfiddle.net/hjZ8F/2/](http://jsfiddle.net/hjZ8F/2/)

只需添加`word-wrap: break-word;`到长跨度的样式属性

# iphone - ios - tableview 附件指示器未显示

> ID：10865015
> 
> 赞同：0
> 
> 时间：2012-06-02T18:52:08.887
> 
> 标签：iphone, ios, ios5, uitableview

在我的表格视图中，我为我的单元格使用背景图像（全黑图像），我还想在我的单元格中使用辅助指示器。在单元格的属性窗口中，我设置了 AccessoryDisclosureIndicator

在我的 .m 文件中，我将这些代码用于 tableview：

```
- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath{

    return UITableViewCellAccessoryDisclosureIndicator;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        cell.backgroundColor = [UIColor clearColor];

    }

    cell.textLabel.backgroundColor=[UIColor clearColor];
    cell.textLabel.text=[arrMagaza objectAtIndex:indexPath.row]; 
    cell.textLabel.textColor=[UIColor whiteColor];

    NSString *distance=[arrDistance objectAtIndex:indexPath.row];
    cell.detailTextLabel.backgroundColor=[UIColor clearColor];
    cell.detailTextLabel.textColor=[UIColor whiteColor];
    cell.detailTextLabel.text=[distance stringByAppendingFormat:@" km"];

    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
   cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tablecell.png"]];
   tableView.backgroundColor=[UIColor blackColor];
   tableView.separatorColor= [UIColor clearColor];
   cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
} 
```

但是当我运行应用程序时，附件指示器未显示在视图上。我究竟做错了什么？是关于我用于单元格的背景图像的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:00:17.370

```
- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath 
```

此方法现已弃用，因此无需实现此方法。尝试删除其他一切看起来都很好。

# jquery - 在 $.post 回调中使用文本返回类型时出错

> ID：10865017
> 
> 赞同：0
> 
> 时间：2012-06-02T18:52:21.593
> 
> 标签：jquery, ajax, return-value, .post

我的回调函数将数据作为文本返回，但我的回调函数无法识别它并始终执行 else 条件。
这是我的“调用”参数

```
$.post('ajaxupdate.php', data, handleAjaxResponse, 'text'); 
```

我的回调函数是：

```
function handleAjaxResponse(response) { 
    if (response == 'worked') {
    alert("hi");
}else{
    console.log(response);
};

} // End of handleAjaxResponse() function. 
```

我的 php `echo`es 是关于 jQuery 成功的字符串代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:54:43.597

如果您正在回显文本/字符串，您可以简单地忽略`text`ajax 调用中的选项，试试这个：

```
$.post('ajaxupdate.php', data, handleAjaxResponse); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:10:13.750

```
$.post('ajaxupdate.php', function(data) {
  alert(data)
}); 
```

试试这个 cde 它可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:36:37.823

您可能有额外的空格或换行符被发送

尝试：

```
function handleAjaxResponse(response) { 
    if ($.trim(response) == 'worked') {
        alert("hi");
    }else{
        console.log(response);
    };

} // 
```

参考： [http ://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

# objective-c - 如何将十六进制值分配给目标c中的变量

> ID：10865019
> 
> 赞同：2
> 
> 时间：2012-06-02T18:52:50.860
> 
> 标签：objective-c, hex

这是一个非常新的问题......

```
??? hexvalue = 0xFFFFFF; 
```

我用什么代替`???`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T18:57:14.917

`0xFFFFFF`相当于说`16777215`，你会放什么类型的`16777215`？

它们只是数字，所以 int32_t、NSInteger、NSUInteger、long 等都是有效的。

# java - JPA / Hibernate - 如何快速获取 EmbeddedId？

> ID：10865024
> 
> 赞同：0
> 
> 时间：2012-06-02T18:53:45.407
> 
> 标签：java, hibernate, jpa

我有以下实体：

```
@Entity(name = "game_users")
public class GameUser {

    private GameUsersPK primaryKey;

    @EmbeddedId
    public GameUsersPK getPrimaryKey() {
        return primaryKey;
    }
    ...
} 
```

使用以下PK：

```
@Embeddable
public class GameUsersPK implements Serializable {
    @ManyToOne
    private Game game;

    @ManyToOne
    private User user;
    ...
} 
```

`GameUser`当我通过执行查询 a时：

```
GameUser gameUser = em.createQuery("from game_users", GameUser.class).setMaxResults(1).getSingleResult(); 
```

我注意到 Hibernate 正在执行两个查询 - 一个 from`game_users`和一个 from `games left outer join users`。

我可以让 Hibernate 在一个查询中获取所有实体`from game_users, games, users`吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:15:41.260

```
select gu from GameUser gu
left join fetch gu.primaryKey.game
left join fetch gu.primaryKey.user 
```

阅读[有关 HQL 和关联的 Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)。

# javascript - 合并/展平数组数组

> ID：10865025
> 
> 赞同：1400
> 
> 时间：2012-06-02T18:53:46.603
> 
> 标签：javascript, arrays, multidimensional-array, flatten

我有一个 JavaScript 数组，例如：

```
[["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]] 
```

我将如何将单独的内部数组合并为一个：

```
["$6", "$12", "$25", ...] 
```

* * *

## 回答 #1

> 赞同：2311
> 
> 时间：2012-06-02T18:56:33.400

您可以使用`concat`合并数组：

```
var arrays = [
  ["$6"],
  ["$12"],
  ["$25"],
  ["$25"],
  ["$18"],
  ["$22"],
  ["$10"]
];
var merged = [].concat.apply([], arrays);

console.log(merged);
```

使用 的`apply`方法`concat`只会将第二个参数作为一个数组，所以最后一行与此相同：

```
var merged2 = [].concat(["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]); 
```

* * *

还有[`Array.prototype.flat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)一种方法（在 ES2019 中引入）可用于展平数组，尽管[它仅在 Node.js 从版本 11 开始可用，而在 Internet Explorer 中根本不可用](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#Browser_compatibility)。

```
const arrays = [
      ["$6"],
      ["$12"],
      ["$25"],
      ["$25"],
      ["$18"],
      ["$22"],
      ["$10"]
    ];
const merge3 = arrays.flat(1); //The depth level specifying how deep a nested array structure should be flattened. Defaults to 1.
console.log(merge3); 
```

* * *

## 回答 #2

> 赞同：580
> 
> 时间：2013-02-22T17:41:10.227

这是一个简短的函数，它使用一些较新的 JavaScript 数组方法来展平 n 维数组。

```
function flatten(arr) {
  return arr.reduce(function (flat, toFlatten) {
    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);
  }, []);
} 
```

用法：

```
flatten([[1, 2, 3], [4, 5]]); // [1, 2, 3, 4, 5]
flatten([[[1, [1.1]], 2, 3], [4, 5]]); // [1, 1.1, 2, 3, 4, 5] 
```

* * *

## 回答 #3

> 赞同：340
> 
> 时间：2013-03-13T22:12:31.610

有一个令人困惑的隐藏方法，它构造一个新数组而不改变原始数组：

```
var oldArray = [[1],[2,3],[4]];
var newArray = Array.prototype.concat.apply([], oldArray);
console.log(newArray); // [ 1, 2, 3, 4 ]
```

* * *

## 回答 #4

> 赞同：237
> 
> 时间：2013-08-19T05:58:33.050

最好通过javascript reduce函数来完成。

```
var arrays = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"], ["$0"], ["$15"],["$3"], ["$75"], ["$5"], ["$100"], ["$7"], ["$3"], ["$75"], ["$5"]];

arrays = arrays.reduce(function(a, b){
     return a.concat(b);
}, []); 
```

或者，使用 ES2015：

```
arrays = arrays.reduce((a, b) => a.concat(b), []); 
```

[js小提琴](http://jsfiddle.net/zAzaH/)

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce?v=control)

* * *

## 回答 #5

> 赞同：178
> 
> 时间：2018-06-23T22:00:00.003

[有一种称为flat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)的新本地方法可以准确地做到这一点。

*（截至 2019 年底，`flat`现已在 ECMA 2019 标准中发布，并且`core-js@3`（babel 的库）将其包含在他们的 polyfill[库](https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#what-changed-in-core-js3)中）*

```
const arr1 = [1, 2, [3, 4]];
arr1.flat(); 
// [1, 2, 3, 4]

const arr2 = [1, 2, [3, 4, [5, 6]]];
arr2.flat();
// [1, 2, 3, 4, [5, 6]]

// Flatten 2 levels deep
const arr3 = [2, 2, 5, [5, [5, [6]], 7]];
arr3.flat(2);
// [2, 2, 5, 5, 5, [6], 7];

// Flatten all levels
const arr4 = [2, 2, 5, [5, [5, [6]], 7]];
arr4.flat(Infinity);
// [2, 2, 5, 5, 5, 6, 7]; 
```

* * *

## 回答 #6

> 赞同：84
> 
> 时间：2016-08-17T14:54:05.610

这里的大多数答案都不适用于大型（例如 200 000 个元素）数组，即使可以，它们也很慢。[polkovnikov.ph 的答案](https://stackoverflow.com/a/25804569/3853934)具有最佳性能，但不适用于深度展平。

这是**最快的解决方案，它也适用于具有多层嵌套的数组**：

```
const flatten = function(arr, result = []) {
  for (let i = 0, length = arr.length; i < length; i++) {
    const value = arr[i];
    if (Array.isArray(value)) {
      flatten(value, result);
    } else {
      result.push(value);
    }
  }
  return result;
}; 
```

## 例子

### 巨大的阵列

```
flatten(Array(200000).fill([1])); 
```

它可以很好地处理巨大的数组。在我的机器上，这段代码大约需要 14 毫秒才能执行。

### 嵌套数组

```
flatten(Array(2).fill(Array(2).fill(Array(2).fill([1])))); 
```

它适用于嵌套数组。此代码产生`[1, 1, 1, 1, 1, 1, 1, 1]`.

### 具有不同嵌套级别的数组

```
flatten([1, [1], [[1]]]); 
```

像这样的展平阵列没有任何问题。

* * *

## 回答 #7

> 赞同：64
> 
> 时间：2016-01-24T19:31:19.990

**更新：事实证明，这个解决方案不适用于大型数组。如果您正在寻找更好、更快的解决方案，请查看[此答案](https://stackoverflow.com/a/39000004/3853934)。**

* * *

```
function flatten(arr) {
  return [].concat(...arr)
} 
```

Is 只是扩展`arr`并将其作为参数传递给`concat()`，它将所有数组合并为一个。它相当于`[].concat.apply([], arr)`.

你也可以试试这个进行深度展平：

```
function deepFlatten(arr) {
  return flatten(           // return shalowly flattened array
    arr.map(x=>             // with each x in array
      Array.isArray(x)      // is x an array?
        ? deepFlatten(x)    // if yes, return deeply flattened x
        : x                 // if no, return just x
    )
  )
} 
```

请参阅[JSBin](https://jsbin.com/pimici/2/edit?js,console)上的演示。

此答案中使用的 ECMAScript 6 元素的参考：

*   [扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)
*   [箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)

* * *

旁注：`find()`并非所有浏览器都支持方法和箭头函数，但这并不意味着您现在不能使用这些功能。只需使用[Babel——](https://babeljs.io/)它将 ES6 代码转换为 ES5。

* * *

## 回答 #8

> 赞同：54
> 
> 时间：2012-06-02T18:58:38.203

您可以使用[下划线](http://underscorejs.org/)：

```
var x = [[1], [2], [3, 4]];

_.flatten(x); // => [1, 2, 3, 4] 
```

* * *

## 回答 #9

> 赞同：45
> 
> 时间：2016-08-18T19:34:18.917

通用过程意味着我们不必在每次需要使用特定行为时重写复杂性。

`concatMap`（或`flatMap`）正是我们在这种情况下所需要的。

```
// concat :: ([a],[a]) -> [a]
const concat = (xs,ys) =>
  xs.concat (ys)

// concatMap :: (a -> [b]) -> [a] -> [b]
const concatMap = f => xs =>
  xs.map(f).reduce(concat, [])

// id :: a -> a
const id = x =>
  x

// flatten :: [[a]] -> [a]
const flatten =
  concatMap (id)

// your sample data
const data =
  [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]]

console.log (flatten (data))
```

### 远见

是的，你猜对了，它只变平**了一层**，这正是它*应该*如何工作的

想象一些这样的数据集

```
// Player :: (String, Number) -> Player
const Player = (name,number) =>
  [ name, number ]

// team :: ( . Player) -> Team
const Team = (...players) =>
  players

// Game :: (Team, Team) -> Game
const Game = (teamA, teamB) =>
  [ teamA, teamB ]

// sample data
const teamA =
  Team (Player ('bob', 5), Player ('alice', 6))

const teamB =
  Team (Player ('ricky', 4), Player ('julian', 2))

const game =
  Game (teamA, teamB)

console.log (game)
// [ [ [ 'bob', 5 ], [ 'alice', 6 ] ],
//   [ [ 'ricky', 4 ], [ 'julian', 2 ] ] ]
```

好的，现在说我们要打印一份名单，显示所有将参加的球员`game`......

```
const gamePlayers = game =>
  flatten (game)

gamePlayers (game)
// => [ [ 'bob', 5 ], [ 'alice', 6 ], [ 'ricky', 4 ], [ 'julian', 2 ] ] 
```

如果我们的`flatten`程序也扁平化了嵌套数组，我们最终会得到这个垃圾结果……

```
const gamePlayers = game =>
  badGenericFlatten(game)

gamePlayers (game)
// => [ 'bob', 5, 'alice', 6, 'ricky', 4, 'julian', 2 ] 
```

* * *

### 滚得很深，宝贝

这并不是说有时您也不想展平嵌套数组——只是这不应该是默认行为。

我们可以`deepFlatten`轻松地制作程序……

```
// concat :: ([a],[a]) -> [a]
const concat = (xs,ys) =>
  xs.concat (ys)

// concatMap :: (a -> [b]) -> [a] -> [b]
const concatMap = f => xs =>
  xs.map(f).reduce(concat, [])

// id :: a -> a
const id = x =>
  x

// flatten :: [[a]] -> [a]
const flatten =
  concatMap (id)

// deepFlatten :: [[a]] -> [a]
const deepFlatten =
  concatMap (x =>
    Array.isArray (x) ? deepFlatten (x) : x)

// your sample data
const data =
  [0, [1, [2, [3, [4, 5], 6]]], [7, [8]], 9]

console.log (flatten (data))
// [ 0, 1, [ 2, [ 3, [ 4, 5 ], 6 ] ], 7, [ 8 ], 9 ]

console.log (deepFlatten (data))
// [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
```

那里。现在每个作业都有一个工具——一个用于挤压一层嵌套，`flatten`一个用于消除所有嵌套`deepFlatten`。

也许你可以打电话给它，`obliterate`或者`nuke`如果你不喜欢这个名字`deepFlatten`。

* * *

**不要重复两次！**

当然，上面的实现既聪明又简洁，但是使用 a`.map`后跟调用`.reduce`意味着我们实际上做了比必要更多的迭代

使用我正在调用的可靠组合器`mapReduce`有助于将迭代保持在最小值；它接受一个映射函数`m :: a -> b`、一个归约函数`r :: (b,a) ->b`并返回一个新的归约函数——这个组合器是*转换器*的核心；如果你有兴趣，[我已经写了关于他们的其他答案](https://stackoverflow.com/search?q=user%3A633183+transducer)

```
// mapReduce = (a -> b, (b,a) -> b, (b,a) -> b)
const mapReduce = (m,r) =>
  (acc,x) => r (acc, m (x))

// concatMap :: (a -> [b]) -> [a] -> [b]
const concatMap = f => xs =>
  xs.reduce (mapReduce (f, concat), [])

// concat :: ([a],[a]) -> [a]
const concat = (xs,ys) =>
  xs.concat (ys)

// id :: a -> a
const id = x =>
  x

// flatten :: [[a]] -> [a]
const flatten =
  concatMap (id)

// deepFlatten :: [[a]] -> [a]
const deepFlatten =
  concatMap (x =>
    Array.isArray (x) ? deepFlatten (x) : x)

// your sample data
const data =
  [ [ [ 1, 2 ],
      [ 3, 4 ] ],
    [ [ 5, 6 ],
      [ 7, 8 ] ] ]

console.log (flatten (data))
// [ [ 1\. 2 ], [ 3, 4 ], [ 5, 6 ], [ 7, 8 ] ]

console.log (deepFlatten (data))
// [ 1, 2, 3, 4, 5, 6, 7, 8 ]
```

* * *

## 回答 #10

> 赞同：37
> 
> 时间：2012-06-02T18:56:40.337

要展平单个元素数组的数组，您不需要导入库，简单的循环是最简单和[最有效](http://jsperf.com/flatten-constant-depht-array)的解决方案：

```
for (var i = 0; i < a.length; i++) {
  a[i] = a[i][0];
} 
```

致反对者：请阅读问题，不要反对，因为它不适合您非常不同的问题。对于所提出的问题，此解决方案是最快和最简单的。

* * *

## 回答 #11

> 赞同：33
> 
> 时间：2013-06-06T04:41:54.540

更一般情况下的解决方案，当您的数组中可能有一些非数组元素时。

```
function flattenArrayOfArrays(a, r){
    if(!r){ r = []}
    for(var i=0; i<a.length; i++){
        if(a[i].constructor == Array){
            flattenArrayOfArrays(a[i], r);
        }else{
            r.push(a[i]);
        }
    }
    return r;
} 
```

* * *

## 回答 #12

> 赞同：30
> 
> 时间：2013-04-30T11:40:08.243

`reduce(callback[, initialValue])`使用方法怎么样`JavaScript 1.8`

```
list.reduce((p,n) => p.concat(n),[]); 
```

会做这项工作。

* * *

## 回答 #13

> 赞同：30
> 
> 时间：2016-02-01T10:49:11.690

函数式风格的另一个 ECMAScript 6 解决方案：

声明一个函数：

```
const flatten = arr => arr.reduce(
  (a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []
); 
```

并使用它：

```
flatten( [1, [2,3], [4,[5,[6]]]] ) // -> [1,2,3,4,5,6] 
```

```
 const flatten = arr => arr.reduce(
         (a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []
       );

console.log( flatten([1, [2,3], [4,[5],[6,[7,8,9],10],11],[12],13]) )
```

还要考虑在现代浏览器的最新版本中提供的本机函数[Array.prototype.flat() （ES6 提案）。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)*感谢@(Константин Ван) 和@(Mark Amery) 在评论中提到它。*

该`flat`函数有一个参数，指定数组嵌套的预期深度，`1`默认为等于。

```
[1, 2, [3, 4]].flat();                  // -> [1, 2, 3, 4]

[1, 2, [3, 4, [5, 6]]].flat();          // -> [1, 2, 3, 4, [5, 6]]

[1, 2, [3, 4, [5, 6]]].flat(2);         // -> [1, 2, 3, 4, 5, 6]

[1, 2, [3, 4, [5, 6]]].flat(Infinity);  // -> [1, 2, 3, 4, 5, 6] 
```

```
let arr = [1, 2, [3, 4]];

console.log( arr.flat() );

arr =  [1, 2, [3, 4, [5, 6]]];

console.log( arr.flat() );
console.log( arr.flat(1) );
console.log( arr.flat(2) );
console.log( arr.flat(Infinity) );
```

* * *

## 回答 #14

> 赞同：27
> 
> 时间：2019-12-03T14:42:41.537

您也可以尝试新[`Array.flat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)方法。它以下列方式工作：

```
let arr = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]].flat()

console.log(arr);
```

该`flat()`方法创建一个新数组，其中所有子数组元素递归连接到其中，直到 1 层深度（即数组内的数组）

如果您还想展平 3 维甚至更高维的数组，您只需多次调用 flat 方法。例如（3 个维度）：

```
let arr = [1,2,[3,4,[5,6]]].flat().flat().flat();

console.log(arr);
```

## 当心！

[`Array.flat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)方法比较新。像 ie 这样的旧浏览器可能没有实现该方法。如果您希望您的代码可以在所有浏览器上工作，您可能必须将您的 JS 转换为旧版本。检查[MDN Web 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)以了解当前浏览器的兼容性。

* * *

## 回答 #15

> 赞同：24
> 
> 时间：2018-06-25T07:04:28.967

```
const common = arr.reduce((a, b) => [...a, ...b], []) 
```

* * *

## 回答 #16

> 赞同：20
> 
> 时间：2019-01-20T14:41:41.883

您可以将[`Array.flat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)with[`Infinity`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity)用于任何深度的嵌套数组。

```
var arr = [ [1,2,3,4], [1,2,[1,2,3]], [1,2,3,4,5,[1,2,3,4,[1,2,3,4]]], [[1,2,3,4], [1,2,[1,2,3]], [1,2,3,4,5,[1,2,3,4,[1,2,3,4]]]] ];

let flatten = arr.flat(Infinity)

console.log(flatten)
```

在此处查看浏览器[兼容性](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#Browser_compatibility)

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2016-08-17T21:00:09.287

**请注意：**当使用`Function.prototype.apply`( `[].concat.apply([], arrays)`) 或扩展运算符 ( `[].concat(...arrays)`) 来展平数组时，两者都可能导致大型数组的堆栈溢出，因为函数的每个参数都存储在堆栈中。

这是一个功能风格的堆栈安全实现，它权衡了最重要的需求：

*   可重用性
*   可读性
*   简明
*   表现

```
// small, reusable auxiliary functions:

const foldl = f => acc => xs => xs.reduce(uncurry(f), acc); // aka reduce

const uncurry = f => (a, b) => f(a) (b);

const concat = xs => y => xs.concat(y);

// the actual function to flatten an array - a self-explanatory one-line:

const flatten = xs => foldl(concat) ([]) (xs);

// arbitrary array sizes (until the heap blows up :D)

const xs = [[1,2,3],[4,5,6],[7,8,9]];

console.log(flatten(xs));

// Deriving a recursive solution for deeply nested arrays is trivially now

// yet more small, reusable auxiliary functions:

const map = f => xs => xs.map(apply(f));

const apply = f => a => f(a);

const isArray = Array.isArray;

// the derived recursive function:

const flattenr = xs => flatten(map(x => isArray(x) ? flattenr(x) : x) (xs));

const ys = [1,[2,[3,[4,[5],6,],7],8],9];

console.log(flattenr(ys));
```

一旦你习惯了柯里化形式的小箭头函数、函数组合和高阶函数，这段代码读起来就像散文一样。然后，编程仅包括将始终按预期工作的小构建块组合在一起，因为它们不包含任何副作用。

* * *

## 回答 #18

> 赞同：13
> 
> 时间：2018-03-22T22:00:19.397

# ES6 单行展平

*见[lodash flatten](https://lodash.com/docs/4.17.5#flatten)，[underscore flatten （浅`true`）](http://underscorejs.org/#flatten)*

```
function flatten(arr) {
  return arr.reduce((acc, e) => acc.concat(e), []);
} 
```

[或者](https://stackoverflow.com/a/10865042/2013580)

```
function flatten(arr) {
  return [].concat.apply([], arr);
} 
```

经测试

```
test('already flatted', () => {
  expect(flatten([1, 2, 3, 4, 5])).toEqual([1, 2, 3, 4, 5]);
});

test('flats first level', () => {
  expect(flatten([1, [2, [3, [4]], 5]])).toEqual([1, 2, [3, [4]], 5]);
}); 
```

# ES6 单行深度展平

*见[lodash flattenDeep](https://lodash.com/docs/4.17.5#flattenDeep)，[下划线展平](http://underscorejs.org/#flatten)*

```
function flattenDeep(arr) {
  return arr.reduce((acc, e) => Array.isArray(e) ? acc.concat(flattenDeep(e)) : acc.concat(e), []);
} 
```

经测试

```
test('already flatted', () => {
  expect(flattenDeep([1, 2, 3, 4, 5])).toEqual([1, 2, 3, 4, 5]);
});

test('flats', () => {
  expect(flattenDeep([1, [2, [3, [4]], 5]])).toEqual([1, 2, 3, 4, 5]);
}); 
```

* * *

## 回答 #19

> 赞同：11
> 
> 时间：2020-01-29T22:48:00.783

使用扩展运算符：

```
const input = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]];
const output = [].concat(...input);
console.log(output); // --> ["$6", "$12", "$25", "$25", "$18", "$22", "$10"]
```

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2012-06-02T19:18:08.310

如果您只有包含 1 个字符串元素的数组：

```
[["$6"], ["$12"], ["$25"], ["$25"]].join(',').split(','); 
```

将完成这项工作。与您的代码示例特别匹配的 Bt。

* * *

## 回答 #21

> 赞同：9
> 
> 时间：2017-05-22T02:32:23.407

我推荐一个节省空间的[生成器函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*)：

```
function* flatten(arr) {
  if (!Array.isArray(arr)) yield arr;
  else for (let el of arr) yield* flatten(el);
}

// Example:
console.log(...flatten([1,[2,[3,[4]]]])); // 1 2 3 4
```

如果需要，创建一个扁平值数组，如下所示：

```
let flattened = [...flatten([1,[2,[3,[4]]]])]; // [1, 2, 3, 4] 
```

* * *

## 回答 #22

> 赞同：8
> 
> 时间：2017-06-01T15:49:26.913

Haskellesque 方法

```
function flatArray([x,...xs]){
  return x ? [...Array.isArray(x) ? flatArray(x) : [x], ...flatArray(xs)] : [];
}

var na = [[1,2],[3,[4,5]],[6,7,[[[8],9]]],10];
    fa = flatArray(na);
console.log(fa);
```

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2017-05-10T12:11:23.043

ES6方式：

```
const flatten = arr => arr.reduce((acc, next) => acc.concat(Array.isArray(next) ? flatten(next) : next), [])

const a = [1, [2, [3, [4, [5]]]]]
console.log(flatten(a))
```

`flatten`用于 N 次嵌套数组的 ES3 后备功能的ES5 方式：

```
var flatten = (function() {
  if (!!Array.prototype.reduce && !!Array.isArray) {
    return function(array) {
      return array.reduce(function(prev, next) {
        return prev.concat(Array.isArray(next) ? flatten(next) : next);
      }, []);
    };
  } else {
    return function(array) {
      var arr = [];
      var i = 0;
      var len = array.length;
      var target;

      for (; i < len; i++) {
        target = array[i];
        arr = arr.concat(
          (Object.prototype.toString.call(target) === '[object Array]') ? flatten(target) : target
        );
      }

      return arr;
    };
  }
}());

var a = [1, [2, [3, [4, [5]]]]];
console.log(flatten(a));
```

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2015-04-29T12:10:50.557

我已经使用递归和闭包完成了它

```
function flatten(arr) {

  var temp = [];

  function recursiveFlatten(arr) { 
    for(var i = 0; i < arr.length; i++) {
      if(Array.isArray(arr[i])) {
        recursiveFlatten(arr[i]);
      } else {
        temp.push(arr[i]);
      }
    }
  }
  recursiveFlatten(arr);
  return temp;
} 
```

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2021-10-18T08:55:54.023

```
var array = [["$6"], ["$12","$16"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]]
var a = array.flat(Infinity);
console.log(a);
```

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2016-01-28T22:42:39.943

前几天我在玩[ES6 Generators](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*)并写了[这个 gist](https://gist.github.com/ashwell/3dcc6702158604978d96)。其中包含...

```
function flatten(arrayOfArrays=[]){
  function* flatgen() {
    for( let item of arrayOfArrays ) {
      if ( Array.isArray( item )) {
        yield* flatten(item)
      } else {
        yield item
      }
    }
  }

  return [...flatgen()];
}

var flatArray = flatten([[1, [4]],[2],[3]]);
console.log(flatArray); 
```

基本上，我正在创建一个循环遍历原始输入数组的生成器，如果它找到一个数组，它将使用[yield*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*)运算符与递归相结合，以不断展平内部数组。如果该项目不是一个数组，它只会[产生](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield)单个项目。然后使用[ES6 Spread 运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)（又名 splat 运算符），我将生成器展平为一个新的数组实例。

我还没有测试过它的性能，但我认为这是使用生成器和 yield* 运算符的一个很好的简单示例。

但同样，我只是在胡说八道，所以我确信有更多高效的方法可以做到这一点。

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2016-09-07T10:20:52.023

只是没有 lodash 的最佳解决方案

```
let flatten = arr => [].concat.apply([], arr.map(item => Array.isArray(item) ? flatten(item) : item)) 
```

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2016-11-01T21:38:02.410

我宁愿将整个数组按原样转换为字符串，但与其他答案不同，会使用`JSON.stringify`而不使用该`toString()`方法来执行此操作，这会产生不需要的结果。

有了这个`JSON.stringify`输出，剩下的就是删除所有括号，再次用开始和结束括号包裹结果，并提供结果`JSON.parse`，使字符串恢复“生命”。

*   可以处理无限的嵌套数组，而无需任何速度成本。
*   可以正确处理包含逗号的字符串的数组项。

## 

```
var arr = ["abc",[[[6]]],["3,4"],"2"];

var s = "[" + JSON.stringify(arr).replace(/\[|]/g,'') +"]";
var flattened = JSON.parse(s);

console.log(flattened)
```

*   *仅适用于字符串/数字的多维数组（不是对象）*

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2012-06-02T18:56:43.870

这并不难，只需遍历数组并合并它们：

```
var result = [], input = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"]];

for (var i = 0; i < input.length; ++i) {
    result = result.concat(input[i]);
} 
```

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2014-04-01T02:36:35.200

看起来这看起来像是 RECURSION 的工作！

*   处理多层嵌套
*   处理空数组和非数组参数
*   没有突变
*   不依赖现代浏览器功能

**代码：**

```
var flatten = function(toFlatten) {
  var isArray = Object.prototype.toString.call(toFlatten) === '[object Array]';

  if (isArray && toFlatten.length > 0) {
    var head = toFlatten[0];
    var tail = toFlatten.slice(1);

    return flatten(head).concat(flatten(tail));
  } else {
    return [].concat(toFlatten);
  }
}; 
```

**用法：**

```
flatten([1,[2,3],4,[[5,6],7]]);
// Result: [1, 2, 3, 4, 5, 6, 7] 
```

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2019-07-21T03:47:37.020

如果你使用 lodash，你可以使用它的`flatten`方法：[https ://lodash.com/docs/4.17.14#flatten](https://lodash.com/docs/4.17.14#flatten)

lodash 的好处是它还有扁平化数组的方法：

i）递归：[https ://lodash.com/docs/4.17.14#flattenDeep](https://lodash.com/docs/4.17.14#flattenDeep)

ii) 最多 n 层嵌套：[https ://lodash.com/docs/4.17.14#flattenDepth](https://lodash.com/docs/4.17.14#flattenDepth)

例如

```
const _ = require("lodash");
const pancake =  _.flatten(array) 
```

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2020-01-14T08:01:33.173

我认为 array.flat(Infinity) 是一个完美的解决方案。但是平面函数是一个比较新的函数，可能无法在旧版本的浏览器中运行。我们可以使用递归函数来解决这个问题。

```
const arr = ["A", ["B", [["B11", "B12", ["B131", "B132"]], "B2"]], "C", ["D", "E", "F", ["G", "H", "I"]]]
const flatArray = (arr) => {
    const res = []
    for (const item of arr) {
        if (Array.isArray(item)) {
            const subRes = flatArray(item)
            res.push(...subRes)
        } else {
            res.push(item)
        }
    }

    return res
}

console.log(flatArray(arr))
```

* * *

## 回答 #33

> 赞同：4
> 
> 时间：2020-02-05T06:05:57.413

这是递归方式...

```
function flatten(arr){
    let newArray = [];
    for(let i=0; i< arr.length; i++){
        if(Array.isArray(arr[i])){
          newArray =  newArray.concat(flatten(arr[i]))
        }else{
          newArray.push(arr[i])
        }
    }
  return newArray; 
}

console.log(flatten([1, 2, 3, [4, 5] ])); // [1, 2, 3, 4, 5]
console.log(flatten([[[[1], [[[2]]], [[[[[[[3]]]]]]]]]]))  // [1,2,3]
console.log(flatten([[1],[2],[3]])) // [1,2,3] 
```

* * *

## 回答 #34

> 赞同：4
> 
> 时间：2020-09-10T11:07:36.443

这是**Typescript**中最快的解决方案，它也适用于具有多级嵌套的数组：

```
export function flatten<T>(input: Array<any>, output: Array<T> = []): Array<T> {
    for (const value of input) {
        Array.isArray(value) ? flatten(value, output) : output.push(value);
    }
    return output;
} 
```

然后：

```
const result = flatten<MyModel>(await Promise.all(promises)); 
```

* * *

## 回答 #35

> 赞同：3
> 
> 时间：2016-11-30T16:11:53.330

我提出了两个没有递归的简短解决方案。从计算复杂度的角度来看，它们并不是最优的，但在一般情况下工作正常：

```
let a = [1, [2, 3], [[4], 5, 6], 7, 8, [9, [[10]]]];

// Solution #1
while (a.find(x => Array.isArray(x)))
    a = a.reduce((x, y) => x.concat(y), []);

// Solution #2
let i = a.findIndex(x => Array.isArray(x));
while (i > -1)
{
    a.splice(i, 1, ...a[i]);
    i = a.findIndex(x => Array.isArray(x));
} 
```

* * *

## 回答 #36

> 赞同：3
> 
> 时间：2017-04-21T11:20:21.803

这里的逻辑是将输入数组转换为字符串并删除所有括号（[]）并将输出解析为数组。我为此使用了 ES6 模板功能。

```
var x=[1, 2, [3, 4, [5, 6,[7], 9],12, [12, 14]]];

var y=JSON.parse(`[${JSON.stringify(x).replace(/\[|]/g,'')}]`);

console.log(y) 
```

* * *

## 回答 #37

> 赞同：3
> 
> 时间：2019-04-18T17:40:15.277

# 制作扁平数组的方法

*   使用 Es6 flat()
*   使用 Es6 reduce()
*   使用递归
*   使用字符串操作

## [1,[2,[3,[4,[5,[6,7],8],9],10]]] - [1, 2, 3, 4, 5, 6, 7, 8, 9 , 10]

```
// using Es6 flat() 
let arr = [1,[2,[3,[4,[5,[6,7],8],9],10]]]
console.log(arr.flat(Infinity))

// using Es6 reduce()
let flatIt = (array) => array.reduce(
  (x, y) => x.concat(Array.isArray(y) ? flatIt(y) : y), []
)
console.log(flatIt(arr))

// using recursion
function myFlat(array) {
  let flat = [].concat(...array);
  return flat.some(Array.isArray) ? myFlat(flat) : flat;
}
console.log(myFlat(arr));

// using string manipulation
let strArr = arr.toString().split(','); 
for(let i=0;i<strArr.length;i++)
  strArr[i]=parseInt(strArr[i]);

console.log(strArr)
```

* * *

## 回答 #38

> 赞同：3
> 
> 时间：2020-07-15T06:11:50.403

```
function flatten(input) {
  let result = [];

  function extractArrayElements(input) {
    for(let i = 0; i < input.length; i++){
      if(Array.isArray(input[i])){
        extractArrayElements(input[i]);
      }else{
        result.push(input[i]);
      }
    }
  }

  extractArrayElements(input);

  return result;
}

// let input = [1,2,3,[4,5,[44,7,8,9]]];
// console.log(flatten(input));

// output [1,2,3,4,5,6,7,8,9] 
```

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2021-11-10T11:58:05.483

好吧，如果您的编码环境支持 ES6 (ES2015)，您无需编写任何递归函数或使用 map、reduce 等数组方法。

一个简单的[扩展运算符](https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab)(...) 将帮助您将**数组的数组**展平为**单个数组**

例如：

```
 const data = [[1, 2, 3], [4, 5],[2]]
  let res = []
  data.forEach(curSet=>{
      res = [...res,...curSet]
  })
  console.log(res) //[1, 2, 3, 4, 5, 2] 
```

* * *

## 回答 #40

> 赞同：2
> 
> 时间：2014-01-17T02:56:27.867

这是现代浏览器的另一个深度扁平化：

```
function flatten(xs) {
  xs = Array.prototype.concat.apply([], xs);
  return xs.some(Array.isArray) ? flatten(xs) : xs;
}; 
```

* * *

## 回答 #41

> 赞同：2
> 
> 时间：2016-01-26T11:32:44.033

如今，最好和最简单的方法是像这样加入和拆分阵列。

```
var multipleArrays = [["$6","$Demo"], ["$12",["Multi","Deep"]], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"], ["$0"], ["$15"],["$3"], ["$75"], ["$5"], ["$100"], ["$7"], ["$3"], ["$75"], ["$5"]]

var flattened = multipleArrays.join().split(",") 
```

该解决方案适用于多个级别，并且也是单线器。

[演示](https://jsfiddle.net/c0bq8ksu/)

**编辑 ECMAScript 6**

由于 ECMAScript 6 已经标准化，您可以将操作更改`[].concat.apply([], arrays);`为 `[].concat(...arrays);`

```
var flattened = [].concat(...input); 
```

[演示](https://jsfiddle.net/c0bq8ksu/1/)

**编辑最有效的解决方案**

解决问题的最有效方法是使用循环。[您可以在此处](http://jsperf.com/flatten-an-array-loop-vs-reduce)比较“操作/秒”速度

```
var flattened=[];
for (var i=0; i<input.length; ++i) {
    var current = input[i];
    for (var j=0; j<current.length; ++j)
        flattened.push(current[j]);
} 
```

[演示](https://jsfiddle.net/c0bq8ksu/2/)

希望能帮助到你

* * *

## 回答 #42

> 赞同：2
> 
> 时间：2017-05-12T23:09:01.693

```
const flatten = array => array.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []); 
```

根据要求，分解一条线基本上就是这样。

```
function flatten(array) {
  // reduce traverses the array and we return the result
  return array.reduce(function(acc, b) {
     // if is an array we use recursion to perform the same operations over the array we found 
     // else we just concat the element to the accumulator
     return acc.concat( Array.isArray(b) ? flatten(b) : b);
  }, []); // we initialize the accumulator on an empty array to collect all the elements
} 
```

* * *

## 回答 #43

> 赞同：2
> 
> 时间：2018-07-06T01:16:55.567

只是为了增加伟大的解决方案。我使用递归来解决这个问题。

```
 const flattenArray = () => {
                let result = [];
                return function flatten(arr) {
                    for (let i = 0; i < arr.length; i++) {
                        if (!Array.isArray(arr[i])) {
                            result.push(arr[i]);
                        } else {
                            flatten(arr[i])
                        }
                    }
                    return result;
                }
            } 
```

测试结果：[https ://codepen.io/ashermike/pen/mKZrWK](https://codepen.io/ashermike/pen/mKZrWK)

* * *

## 回答 #44

> 赞同：2
> 
> 时间：2019-01-31T12:03:18.320

最好以**递归方式**进行，因此如果另一个数组中还有另一个数组，则可以轻松**过滤**...

```
const flattenArray = arr =>
  arr.reduce(
    (res, cur) =>
       !Array.isArray(cur) 
       ? res.concat(cur)
       : res.concat(flattenArray(cur)), []); 
```

你可以这样称呼它：

```
flattenArray([[["Alireza"], "Dezfoolian"], ["is a"], ["developer"], [[1, [2, 3], ["!"]]]); 
```

结果如下：

```
["Alireza", "Dezfoolian", "is a", "developer", 1, 2, 3, "!"] 
```

* * *

## 回答 #45

> 赞同：2
> 
> 时间：2019-03-25T19:28:54.280

这是基于 artif3x 答案的 Typescript 版本，`flatMap`为 Scala 粉丝提供了额外的实现。

```
function flatten<T>(items: T[][]): T[] {
  return items.reduce((prev, next) => prev.concat(next), []);
}

function flatMap<T, U>(items: T[], f: (t: T) => U[]): U[] {
  return items.reduce((prev, next) => prev.concat(f(next)), new Array<U>());
} 
```

* * *

## 回答 #46

> 赞同：2
> 
> 时间：2021-04-13T07:28:05.983

只需使用扩展运算符，我们就可以通过以下方式展平。

```
var OriginalArray = [[5, 1], [6], [2], [8]];
var newArray = [];

for (let i = 0; i < OriginalArray.length; i++) {
  newArray.push(...OriginalArray[i]);
}

console.log(newArray)
```

* * *

## 回答 #47

> 赞同：2
> 
> 时间：2021-05-29T12:09:45.087

**我只是尝试在不使用任何内置功能的情况下解决问题。**

```
var arr = [1, 3, 4, 65, [3, 5, 6, 9, [354, 5, 43, 54, 54, 6, [232, 323, 323]]]];
var result = [];

function getSingleArray(inArr) {
  for (var i = 0; i < inArr.length; i++) {
    if (typeof inArr[i] == "object") {
      getSingleArray(inArr[i]); // Calling Recursively
    } else {
      result.push(inArr[i]);
    }
  }
}

getSingleArray(arr);
console.log(result); // [1, 3, 4, 65, 3, 5, 6, 9, 354, 5, 43, 54, 54, 6, 232, 323, 323] 
```

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2014-02-04T12:00:53.780

如果你的数组只包含整数或字符串，你可以使用这个肮脏的技巧：

```
var arr = [345,2,[34],2,[524,[5456]],[5456]];
var flat = arr.toString().split(','); 
```

有效，在 FF、IE 和 Chrome 中还没有测试其他浏览器。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2014-08-31T19:00:38.743

要在一行中展平二维数组：

```
[[1, 2], [3, 4, 5]].reduce(Function.prototype.apply.bind(Array.prototype.concat))
// => [ 1, 2, 3, 4, 5 ] 
```

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2014-10-22T17:10:30.417

我知道这是 hacky，但是我知道的将字符串数组（任何深度！）展平（不带逗号！）的必须简洁的方法是将数组转换为字符串，然后用逗号分割字符串：

```
var myArray =[["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"], ["$0"], ["$15"],["$3"], ["$75"], ["$5"], ["$100"], ["$7"], ["$3"], ["$75"], ["$5"]];
var myFlatArray = myArray.toString().split(',');

myFlatArray;
// ["$6", "$12", "$25", "$25", "$18", "$22", "$10", "$0", "$15", "$3", "$75", "$5", "$100", "$7", "$3", "$75", "$5"] 
```

这应该适用于仅包含字符串和数字（​​整数和浮点）的嵌套数组的任何深度，但需要注意的是数字将在此过程中转换为字符串。这可以通过一点映射来解决：

```
var myArray =[[[1,2],[3,4]],[[5,6],[7,8]],[[9,0]]];
var myFlatArray = myArray.toString().split(',').map(function(e) { return parseInt(e); });
myFlatArray;
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 0] 
```

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2017-02-22T14:30:44.240

适用于所有数据类型的递归版本

```
 /*jshint esversion: 6 */

// nested array for testing
let nestedArray = ["firstlevel", 32, "alsofirst", ["secondlevel", 456,"thirdlevel", ["theinnerinner", 345, {firstName: "Donald", lastName: "Duck"}, "lastinner"]]];

// wrapper function to protect inner variable tempArray from global scope;
function flattenArray(arr) {

  let tempArray = [];

  function flatten(arr) {
    arr.forEach(function(element) {
      Array.isArray(element) ? flatten(element) : tempArray.push(element);     // ternary check that calls flatten() again if element is an array, hereby making flatten() recursive.
    });
  }

  // calling the inner flatten function, and then returning the temporary array
  flatten(arr);
  return tempArray;
}

// example usage:
let flatArray = flattenArray(nestedArray); 
```

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2017-03-21T01:24:36.420

```
/**
* flatten an array first level
* @method flatten
* @param array {Array}
* @return {Array} flatten array
*/
function flatten(array) {
  return array.reduce((acc, current) => acc.concat(current), []);
}

/**
* flatten an array recursively
* @method flattenDeep
* @param array {Array}
* @return {Array} flatten array
*/
function flattenDeep(array) {
  return array.reduce((acc, current) => {
    return Array.isArray(current) ? acc.concat(flattenDeep(current)) : acc.concat([current]);
  }, []);
}

/**
* flatten an array recursively limited by depth
* @method flattenDepth
* @param array {Array}
* @return {Array} flatten array
*/
function flattenDepth(array, depth) {
  if (depth === 0) {
    return array;
  }
  return array.reduce((acc, current) => {
    return Array.isArray(current) ? acc.concat(flattenDepth(current, --depth)) : acc.concat([current]);
  }, []);
} 
```

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2017-09-12T07:28:44.373

以下代码将展平深度嵌套的数组：

```
/**
 * [Function to flatten deeply nested array]
 * @param  {[type]} arr          [The array to be flattened]
 * @param  {[type]} flattenedArr [The flattened array]
 * @return {[type]}              [The flattened array]
 */
function flattenDeepArray(arr, flattenedArr) {
  let length = arr.length;

  for(let i = 0; i < length; i++) {
    if(Array.isArray(arr[i])) {
      flattenDeepArray(arr[i], flattenedArr);
    } else {
      flattenedArr.push(arr[i]);
    }
  }

  return flattenedArr;
}

let arr = [1, 2, [3, 4, 5], [6, 7]];

console.log(arr, '=>', flattenDeepArray(arr, [])); // [ 1, 2, [ 3, 4, 5 ], [ 6, 7 ] ] '=>' [ 1, 2, 3, 4, 5, 6, 7 ]

arr = [1, 2, [3, 4], [5, 6, [7, 8, [9, 10]]]];

console.log(arr, '=>', flattenDeepArray(arr, [])); // [ 1, 2, [ 3, 4 ], [ 5, 6, [ 7, 8, [Object] ] ] ] '=>' [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ] 
```

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2018-04-18T08:58:22.673

即使数组嵌套更多，您也可以继续使用 Array.flat() 方法来实现这一点。

```
[1,2,3,[2]].flat() 
```

相当于

```
[1,2,3,[2]].flat(1) 
```

因此，随着您的嵌套增加，您可以继续增加数量。

例如：

```
[1,[2,[3,[4]]]].flat(3) // [1, 2, 3, 4] 
```

如果您不确定嵌套级别，您可以将 Infinity 作为参数传递

```
[1,2,3,[2,[3,[3,[34],43],[34]]]].flat(Infinity) //[1, 2, 3, 2, 3, 3, 34, 43, 34] 
```

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2018-04-26T14:40:24.010

您可以使用**Ramda JS** [展平](http://ramdajs.com/docs/#flatten)

```
var arr = [[1,2], [3], [4,5]];
var flattenedArray = R.flatten(arr); 

console.log(flattenedArray)
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/ramda/0.25.0/ramda.js"></script>
```

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2018-09-15T17:18:10.830

```
let arr = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"], ["$0"], ["$15"],["$3"], ["$75"], ["$5"], ["$100"], ["$7"], ["$3"], ["$75"], ["$5"]];
arr = arr.reduce((a, b) => a.concat(b)); // flattened 
```

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2019-07-25T06:55:31.497

我写的简单的扁平化工具

```
const flatten = (arr, result = []) => {
    if (!Array.isArray(arr)){
        return [...result, arr];
    }
     arr.forEach((a) => {
         result = flatten(a, result)
    })

    return result
}

console.log(flatten([1,[2,3], [4,[5,6,[7,8]]]])) // [ 1, 2, 3, 4, 5, 6, 7, 8 ] 
```

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2019-07-25T10:56:49.403

**在 javascript 中定义一个名为 foo 的数组数组，并使用 javascript 的数组 concat 内置方法将该数组展平为单个数组：**

```
const foo = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]] 
console.log({foo}); 

const bar = [].concat(...foo) 
console.log({bar}); 
```

应该打印：

```
{ foo: 
   [ [ '$6' ],
     [ '$12' ],
     [ '$25' ],
     [ '$25' ],
     [ '$18' ],
     [ '$22' ],
     [ '$10' ] ] }
{ bar: [ '$6', '$12', '$25', '$25', '$18', '$22', '$10' ] } 
```

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2019-09-27T07:10:40.780

由于 ES2019 引入了 flat 和 flatMap，那么 flat 任何数组都可以这样完成：

```
const myArr = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]]
const myArrFlat= myArr.flat(Infinity);
console.log(myArrFlat); // ["$6", "$12", "$25", ...] 
```

参考。[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2019-10-14T10:15:56.500

递归调用该`deepFlatten`函数，这样我们就可以在不使用任何外部辅助方法的情况下扩展内部数组是要走的路。

```
const innerArr = ['a', 'b'];
const multiDimArr = [[1, 2], 3, 4, [5, 6, innerArr], 9];

const deepFlatten = (arr) => {
  const flatList = [];
  arr.forEach(item => {
    Array.isArray(item)
     ? flatList.push(...deepFlatten(item)) // recursive call
     : flatList.push(item)
  });
  return flatList;
} 
```

* * *

## 回答 #61

> 赞同：1
> 
> 时间：2019-11-18T08:08:37.653

此解决方案适用于数组的任何深度级别（指定嵌套数组结构的深度）。

```
function flatten(obj) {
    var out = [];
    function cleanElements(input) {
        for (var i  in input){
            if (input[i]instanceof Array){
                cleanElements(input[i]);
            }
            else {
                out.push(input[i]);
            }
        }
    }
    cleanElements(obj);
    return (out);
} 
```

* * *

## 回答 #62

> 赞同：1
> 
> 时间：2020-07-14T08:58:59.860

使用此方法将两个数组展平

```
arr1.concat(...arr2); 
```

* * *

## 回答 #63

> 赞同：1
> 
> 时间：2021-06-18T06:51:01.370

这是使用堆栈进行非递归展平深度的解决方案。

```
 function flatten(input) {
        const stack = [...input];
        const res = [];
        while (stack.length) {
            const next = stack.pop();
            if (Array.isArray(next)) {
                stack.push(...next);
            } else {
                res.push(next);
            }
        }
        return res.reverse();
    }
    const arrays = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]];
    flatten(arrays); 
```

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2013-12-06T00:05:58.783

```
[1,[2,3],[4,[5,6]]].reduce(function(p, c) {
    return p.concat(c instanceof Array ? 
                    c.reduce(arguments.callee, []) : 
                    [c]); 
}, []); 
```

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2014-03-15T04:40:14.750

这是我的版本。它允许您展平可用于更多场景的复杂对象：

**输入**

```
var input = {
   a: 'asdf',
   b: [1,2,3],
   c: [[1,2],[3,4]],
   d: {subA: [1,2]}
} 
```

**代码**

函数是这样的：

```
function flatten (input, output) {

  if (isArray(input)) {
    for(var index = 0, length = input.length; index < length; index++){
      flatten(input[index], output);
    }
  }
  else if (isObject(input)) {
    for(var item in input){
      if(input.hasOwnProperty(item)){
        flatten(input[item], output);
      }
    }
  }
  else {
    return output.push(input);
  }
};

function isArray(obj) {
  return Array.isArray(obj) || obj.toString() === '[object Array]';
}

function isObject(obj) {
  return obj === Object(obj);
} 
```

**用法**

```
var output = []

flatten(input, output); 
```

**输出**

["asdf", 1, 2, 3, 1, 2, 3, 4, 1, 2]

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2014-10-07T14:17:03.137

与使用最佳答案中列出的 merge.concat.apply() 方法相比，有一种更快的方法，而且更快是指速度快**几个数量级**。这假设您的环境可以访问 ES5 数组方法。

```
var array2d = [
  ["foo", "bar"],
  ["baz", "biz"]
];
merged = array2d.reduce(function(prev, next) {
    return prev.concat(next);
}); 
```

这是 jsperf 链接：http: [//jsperf.com/2-dimensional-array-merge](http://jsperf.com/2-dimensional-array-merge)

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2015-06-17T14:11:32.137

如果您需要支持 IE8，因此无法使用 reduce 或 isArray 等方法，这里有一个可能的解决方案。这是一种详细的方法，可帮助您理解递归算法。

```
function flattenArray(a){

    var aFinal = [];

    (function recursiveArray(a){

        var i,
            iCount = a.length;

        if (Object.prototype.toString.call(a) === '[object Array]') {
            for (i = 0; i < iCount; i += 1){
                recursiveArray(a[i]);
            }
        } else {
            aFinal.push(a);
        }

    })(a);

    return aFinal;

}

var aMyArray = [6,3,4,[12,14,15,[23,24,25,[34,35],27,28],56],3,4];

var result = flattenArray(aMyArray);

console.log(result); 
```

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2016-01-29T05:52:19.657

```
var arrays = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"], ["$0"], ["$15"],["$3"], ["$75"], ["$5"], ["$100"], ["$7"], ["$3"], ["$75"], ["$5"]];
var merged = [].concat.apply([], arrays);
alert(merged);
```

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2016-08-11T16:58:36.503

您可以使用`Array.prototype.reduce()`和`Array.prototype.concat()`

```
var data = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"], ["$0"], ["$15"],["$3"], ["$75"], ["$5"], ["$100"], ["$7"], ["$3"], ["$75"], ["$5"]].reduce(function(a, b) {
  return a.concat(b);
}, []);
console.log(data);
```

相关文档： [https ://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/concat](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2016-10-31T21:32:52.117

我最初想使用该`.reduce`方法并递归调用一个函数来展平内部数组，但是当您使用深度嵌套数组的深度嵌套数组时，这可能会导致堆栈溢出。使用 concat 也不是最好的方法，因为每次迭代都会创建一个新的数组浅拷贝。我们可以做的是：

```
const flatten = arr => {
    for(let i = 0; i < arr.length;) {
        const val = arr[i];
        if(Array.isArray(val)) {
            arr.splice(i, 1, ...val);
        } else {
            i ++;
        }
    }
    return arr;
} 
```

我们不是通过 concat 创建新数组，也不是递归调用任何函数。

[http://jsbin.com/firiru/4/edit?js,console](http://jsbin.com/firiru/4/edit?js,console)

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2018-11-17T19:59:37.560

我有一个简单的解决方案，无需使用特殊的 js 函数。（如减少等）

```
const input = [[0, 1], [2, 3], [4, 5]]
let flattened=[];

for (let i=0; i<input.length; ++i) {
    let current = input[i];
    for (let j=0; j<current.length; ++j)
        flattened.push(current[j]);
} 
```

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2020-05-14T12:17:46.253

使用 jQuery $.map() 函数的另一种方法。来自 jQuery 文档：

> 该函数可以返回一个值数组，该数组将被展平为完整数组。

```
var source = [["$6"], ["$12"], ["$25"], ["$25"], ["$18"], ["$22"], ["$10"]];
var target = $.map(source, function(value) { return value; }); // ["$6", "$12", "$25", "$25", "$18", "$22", "$10"] 
```

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2021-10-18T07:52:28.003

```
const arr = [1, 2, [3, 4]];

arr.reduce((acc, val) => acc.concat(val), []); 
```

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2021-12-08T13:42:25.957

您可以使用**"join()"**和**"split()"**：

```
let arrs = [
  ["$6"],
  ["$12"],
  ["$25"],
  ["$25"],
  ["$18"],
  ["$22"],
  ["$10"]
];

let newArr = arrs.join(",").split(",");

console.log(newArr); // ["$6", "$12", "$25", "$25", "$18", "$22", "$10"]
```

此外，您还可以使用**“toString()”**和**“split()”**：

```
let arrs = [
  ["$6"],
  ["$12"],
  ["$25"],
  ["$25"],
  ["$18"],
  ["$22"],
  ["$10"]
];

let newArr = arrs.toString().split(",");

console.log(newArr); // ["$6", "$12", "$25", "$25", "$18", "$22", "$10"]
```

但是，**如果字符串包含逗号，上述两种方法都不能正常工作**：

**“加入（）”**和**“分裂（）”**：

```
let arrs = [
  ["$,6"],
  ["$,12"],
  ["$2,5"],
  ["$2,5"],
  [",$18"],
  ["$22,"],
  ["$,1,0"]
];

let newArr = arrs.join(",").split(",");

console.log(newArr); 
// ["$", "6", "$", "12", "$2", "5", "$2", "5", "", "$18", "$22", "", "$", "1", "0"]
```

**“toString()”**和**“split()”**：

```
let arrs = [
  ["$,6"],
  ["$,12"],
  ["$2,5"],
  ["$2,5"],
  [",$18"],
  ["$22,"],
  ["$,1,0"]
];

let newArr = arrs.toString().split(",");

console.log(newArr); 
// ["$", "6", "$", "12", "$2", "5", "$2", "5", "", "$18", "$22", "", "$", "1", "0"]
```

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2022-03-03T18:10:13.580

```
let arr = [1, [2, 3, [4, 5, [6, 7], [8, 9, 10, 11, 12]]]];

function flattenList(nestedArr) {
  let newFlattenList = [];

  const handleFlat = (array) => {
    let count = 0;
    while (count < array.length) {
      let item = array[count];
      if (Array.isArray(item)) {
        handleFlat(item);
      } else {
        newFlattenList.push(item);
      }
      count++;
    }
  };
  handleFlat(nestedArr);
  return newFlattenList;
}`enter code here`

console.log(flattenList(arr)); 
```

[CodeSandBox 链接](https://codesandbox.io/s/flatten-array-javascript-xijsvr?file=/src/index.js)

* * *

## 回答 #76

> 赞同：-1
> 
> 时间：2016-02-12T19:30:24.873

```
Array.prototype.flatten = Array.prototype.flatten || function() {
    return [].reduce.call(this, function(flat, toFlatten) {
        return flat.concat(Array.isArray(toFlatten) ? toFlatten.flatten() : toFlatten);
    },[])
}; 
```

* * *

## 回答 #77

> 赞同：-1
> 
> 时间：2018-10-18T14:32:49.877

我只是用 来回答这个问题`ES6`，假设深度数组是：

```
const deepArray = ['1',[['a'],['b']],[2],[[[['4',[3,'c']]]],[5]]]; 
```

如果您知道或猜测您的数组的深度不超过一个数字`7`，请使用以下代码：

```
const flatArray = deepArray.flat(7); 
```

但是如果你不知道你的深度数组的深度或者你的`JavaScript`引擎不支持`flat`like `react-native` `JavaScriptCore`，请使用下面的`JavaScript` `reduce`函数：

```
 const deepFlatten = arr =>
         arr.reduce(
           (acc, val) =>
             Array.isArray(val) 
               ? acc.concat(deepFlatten(val)) 
               : acc.concat(val),
             []
         ); 
```

两种方法都返回以下结果：

```
["1", "a", "b", 2, "4", 3, "c", 5] 
```

* * *

## 回答 #78

> 赞同：-1
> 
> 时间：2018-12-17T21:11:45.160

更简单直接的一个；可选择深度压平；

```
const flatReduce = (arr, deep) => {
    return arr.reduce((acc, cur) => {
        return acc.concat(Array.isArray(cur) && deep ? flatReduce(cur, deep) : cur);
    }, []);
};

console.log(flatReduce([1, 2, [3], [4, [5]]], false)); // =>  1,2,3,4,[5]
console.log(flatReduce([1, 2, [3], [4, [5, [6, 7, 8]]]], true)); // => 1,2,3,4,5,6,7,8 
```

* * *

## 回答 #79

> 赞同：-2
> 
> 时间：2014-06-04T18:56:00.533

# 那么深度展平和面向对象呢？

```
[23, [34, 454], 12, 34].flatten();
// -->   [23,34, 454, 12, 34] 
```

* * *

```
[23, [34, 454,[66,55]], 12, 34].flatten();

// -->  [23, 34, 454, [66,55], 12, 34] 
```

### 深度展平：

```
[23, [34, 454,[66,55]], 12, 34].flatten(true);

// --> [23, 34, 454, 66, 55, 12, 34] 
```

# [**演示**](http://jsfiddle.net/X3Xex/4/)

# [**内容分发网络**](https://rawgit.com/abdennour/spl/master/js/jsdk/array.js)

* * *

如果所有数组元素都是 Integer,Float,... 或/和 String ，那么就这样做吧：

```
var myarr=[1,[7,[9.2]],[3],90];
eval('myarr=['+myarr.toString()+']');
print(myarr);
// [1, 7, 9.2, 3, 90] 
```

# [演示](http://jsfiddle.net/abdennour/3fqs93jf/)

* * *

## 回答 #80

> 赞同：-3
> 
> 时间：2015-09-24T19:39:44.630

我相信最好的方法是这样的：

```
var flatten = function () {
  return [].slice.call(arguments).toString().split(',');
}; 
```

* * *

## 回答 #81

> 赞同：-3
> 
> 时间：2016-07-08T08:39:30.797

我只是在寻找更快更简单的解决方案来做到这一点，为什么？因为我把这个作为一个面试问题，我很好奇，所以我做了这个：

```
function flattenArrayOfArrays(a, r){
    if(!r){ r = []}
    for(var i=0; i<a.length; i++){
        if(a[i].constructor == Array){
            flattenArrayOfArrays(a[i], r);
        }else{
            r.push(a[i]);
        }
    }
    return r;
}

var i = [[1,2,[3]],4,[2,3,4,[4,[5]]]], output;

// Start timing now
console.time("flatten");
output = new Array(JSON.stringify(i).replace(/[^\w\s,]/g,"")); 
output
// ... and stop.
console.timeEnd("flatten");

// Start timing now
console.time("flatten2");
output = [].concat.apply([], i)
output
// ... and stop.
console.timeEnd("flatten2");

// Start timing now
console.time("flatten3");
output = flattenArrayOfArrays(i)
output
// ... and stop.
console.timeEnd("flatten3"); 
```

我在这里使用了最受欢迎的答案和我的解决方案。我想有人会觉得这很有趣。干杯!

* * *

## 回答 #82

> 赞同：-3
> 
> 时间：2019-04-19T16:53:39.030

ES6 的纯粹魔法

```
const flat = A => A.reduce((A, a) => Array.isArray(a) ? [...A, ...flat(a)] : [...A, a], []); 
```

* * *

## 回答 #83

> 赞同：-4
> 
> 时间：2014-09-24T04:15:50.843

使用[那里](http://www.codeproject.com/Tips/805364/LINQ-for-JavaScript)的代码。

我会写：

```
myArray.enumerable().selectMany(function(x) { return x; }).array() 
```

# android - Android加载大txt顶点文件

> ID：10865030
> 
> 赞同：0
> 
> 时间：2012-06-02T18:54:39.347
> 
> 标签：android, file, binary, readline, vertices

有什么方法可以比 txt 文件更快地将大文件加载到缓冲区？我在某处读到使用二进制文件要快得多我正在尝试将带有顶点的文件加载到vbo。我正在逐行读取，解析浮点数，然后将它们放入数组列表，然后放入浮点数组，然后加载到缓冲区，但是对于大文件，它很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:03:31.963

映射包含浮点数的大文件并通过字节缓冲区访问它可能是最快的选择，因为它是通过分页而不是通常的随机访问文件获取的。

另一个优点是它不计入您的堆，也不受垃圾收集的影响。缺点是它在不同系统之间的移植性不是很好。

# python - 当输入要求整数时，'ENTER'键在python中带来错误

> ID：10865040
> 
> 赞同：1
> 
> 时间：2012-06-02T18:56:13.377
> 
> 标签：python, task, enter

我正在为一个菜单系统设计一个模板，我已经为初学者很好地整理了它。在过去的几天里，我通过 stackoverflow 得到了一些很好的帮助，我想我会问这里出了什么问题。

这是代码：

```
# Multitasker
# Allows User to Pick an Item that is Defined.

# This is the initial screen.

print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X                                        X
            X            DEMO MULTITASK DEMO         X
            X                                        X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X                                        X
            X               MULTITASKING             X
            X           --------------------         X
            X             MAIN MENU SYSTEM           X
            X            FOR GAME PLATFORMS          X
            X           --------------------         X
            X                                        X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

                     PRESS 'ENTER' TO CONTINUE""",end=" ")

# Input used to prevent the Multitask Selector Menu from Appearing at First!
input(" ")

# Defining Task 1 
def task1():
    print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X    YOU HAVE CHOSEN TO DISPLAY TASK 1   X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end=" ")

# Defining Task 2
def task2():
    print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X    YOU HAVE CHOSEN TO DISPLAY TASK 2   X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end=" ")

# Defining Task 3
def task3():
    print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X    YOU HAVE CHOSEN TO DISPLAY TASK 3   X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end=" ")

# Defining Task 4
def task4():
    print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X    YOU HAVE CHOSEN TO DISPLAY TASK 4   X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end=" ")

# If the Player Selected an innappropriate task number greater than 4, this will   display.
def notatask():
    print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X     THAT IS NOT A POSSIBLE CHOICE.     X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end=" ")

# Starts choice off as having no selection.
choice = None
playername = " "

# While the variable 'choice' is not '0', it will continue to display the menu below
while choice != "0":
    print(
        """
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X                                        X
            X            MULTITASK SELECTION         X
            X                                        X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X                                        X
            X                0 - Quit                X
            X                1 - Task 1              X
            X                2 - Task 2              X
            X                3 - Task 3              X
            X                4 - Task 4              X
            X                                        X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end=" ")

    choice = int(input("\n\t\tPick a Task Between 0-4:\t#"))
    print()

    # Exit
    if choice == int('0'):
        print("""
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X                                        X
            X            DEMO MULTITASK DEMO         X
            X                                        X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            X                                        X
            X               MULTITASKING             X
            X           --------------------         X
            X             MAIN MENU SYSTEM           X
            X            FOR GAME PLATFORMS          X
            X           --------------------         X
            X                                        X
            XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
            """, end="")
        print("\t\t", playername, end="")
        print("""
                    PRESS 'ENTER' TO CONTINUE""", end=" ")
        input(" ")

    # Task 1
    elif choice == int('1'):
        task1()

    # Task 2
    elif choice == int('2'):
        task2()

    # Task 3
    elif choice == int('3'):
        task3()

    # Task 4
    elif choice == int('4'):
        task4()

    # Not a Correct Selection
    elif choice > int('4'):
        notatask()

    # Enter Key
    elif choice == ('ENTER'):
        notatask() 
```

所以，我不明白的是，当有人按下 0、1、2、3 或 4 以外的键时，我需要做些什么才能让它调用 notatask()。

任何人都可以引导我朝着正确的方向前进吗？

提前致谢。

最好的，

史蒂文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:58:42.253

在`elif`任务 4 之后，只需使用`else`.

```
# Task 4
elif choice == int('4'):
    task4()

# Everything else
else:
    notatask() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:06:57.570

不要`int()`马上打电话。首先检查值。像这样：

```
choice = input("\n\t\tPick a Task Between 0-4:\t#")
if not choice:
    notatask()
    continue
choice = int(choice) 
```

# fancybox - 多个画廊的 Fancybox 自定义标题

> ID：10865046
> 
> 赞同：0
> 
> 时间：2012-06-02T18:57:07.643
> 
> 标签：fancybox, title, photo-gallery

1）我在fancybox的两个画廊中有一堆图像。我正在使用下面的代码将我的标题分成单独的行。我的 HTML 有一个带有标题的单独 div，每个标题也在一个 div 中。它有效，但它同时向两个画廊添加标题，因此图像 1 在两个画廊中获得相同的名称。

如何为我的两个画廊插入单独的标题？

```
$(document).ready(function() {
    $(".fancybox").fancybox({
            openEffect  : 'elastic',
            closeEffect : 'elastic',
            arrows :    true,
            helpers : { 
                    title   : { type : 'inside' },
                    buttons : {}
            }, // helpers
            afterLoad : function() {
                this.title = $("#fancyboxTitles div").eq(this.index).html();
            } // afterload
    }); // fancybox
}); // ready 
```

2）当图像显示多行标题时，我单击“下一步”，然后返回，标题消失。我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:07:36.627

您的代码几乎是我[在此处发布](https://stackoverflow.com/a/8425900/1055987)的内容的副本，但是在撰写此类帖子时，fancybox 版本是 2.0.1。从那时起已经进行了一些更改（主要是改进和错误修复），因此我们需要对您的自定义脚本以及您的`html`结构进行一些更改。此外，您可能需要更新到最新版本的 fancybox（今天为 2.0.6）

假设您通过设置不同的`rel`属性对画廊进行了分组，例如：

```
<a class="fancybox" rel="gallery1" href="images/01a.jpg">image 1 - gallery 1</a>
<a class="fancybox" rel="gallery1" href="images/02a.jpg">image 2 - gallery 1</a>

<a class="fancybox" rel="gallery2" href="images/01b.jpg">image 1 - gallery 2</a>
<a class="fancybox" rel="gallery2" href="images/02b.jpg">image 2 - gallery 2</a>
<a class="fancybox" rel="gallery2" href="images/03b.jpg">image 3 - gallery 2</a> 
```

1）。将每个画廊的标题分组到不同的部门，如下所示：

```
<div id="gallery1">
 <div>title image 1 / gallery 1</div>
 <div>title image 2 / gallery 1</div>
</div>
<div id="gallery2">
 <div>title image 1 / gallery 2</div>
 <div>title image 2 / gallery 2</div>
 <div>title image 3 / gallery 2</div>
</div> 
```

**重要提示**：请注意，我已`ID`为父容器分配了一个等于`rel`每个画廊属性的值。

2）。现在，对于 2.0.6 版本，我们不能`afterLoad`像在 v2.0.1 中那样使用回调（这就是它使标题消失的原因）......我们将使用它`beforeShow`。

所以**替换**这部分脚本：

```
afterLoad : function() {
 this.title = $("#fancyboxTitles div").eq(this.index).html();
} // afterload 
```

这样：

```
beforeShow  : function() {
 var gallery = $(this.element).attr("rel");
 this.title = $("#"+gallery+" div").eq(this.index).html();
} // beforeShow 
```

这应该够了吧。

PS。我将在 v2.0.6 的另一篇文章中添加注释

# java - 特定子串的长度

> ID：10865049
> 
> 赞同：2
> 
> 时间：2012-06-02T18:57:29.750
> 
> 标签：java, c#, regex, maxlength, digit

我检查我的字符串是否以数字开头

```
if(RegEx(IsMatch(myString, @"\d+"))) ... 
```

如果这个条件成立，我想得到我的字符串开头的这个“数字”子字符串的长度。

如果每个下一个字符都是从第一个字符开始并增加一些计数器的数字，我可以找到长度检查。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T19:02:34.567

好吧，而不是 using `IsMatch`，您应该*找到*匹配项：

```
// Presumably you'll be using the same regular expression every time, so
// we might as well just create it once...
private static readonly Regex Digits = new Regex(@"\d+");

...

Match match = Digits.Match(text);
if (match.Success)
{
    string value = match.Value;
    // Take the length or whatever
} 
```

请注意，这*不会*检查数字是否出现在字符串的开头。您可以使用`@"^\d+"`which 将匹配锚定到开头。或者，如果您愿意，可以检查它`match.Index`是否为 0...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T19:05:00.957

要检查我的字符串是否以数字**开头**，您需要使用 pattern `^\d+`。

```
string pattern = @"^\d+";
MatchCollection mc = Regex.Matches(myString, pattern);
if(mc.Count > 0)
{
  Console.WriteLine(mc[0].Value.Length);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T19:04:19.217

您的正则表达式检查您的字符串是否包含一个或多个数字的序列。如果要检查它是否以它开头，则需要在开头锚定它：

```
Match m = Regex.Match(myString, @"^\d+");
if (m.Success)
{
    int length = m.Length;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T19:20:11.460

作为正则表达式的替代方法，您可以使用扩展方法：

```
int cnt = myString.TakeWhile(Char.IsDigit).Count(); 
```

如果字符串的开头没有数字，您自然会得到零计数。否则你有位数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T19:02:29.287

不仅要检查`IsMatch`，还要获取匹配项，以便获取有关它的信息，例如长度：

```
var match = Regex.Match(myString, @"^\d+");
if (match.Success)
{
    int count = match.Length;
} 
```

另外，我`^`在模式的开头添加了 a 以将其限制在字符串的开头。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T19:03:09.177

如果您对代码进行更多分解，则可以利用[Regex.Match](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)：

```
var length = 0;

var myString = "123432nonNumeric";
var match = Regex.Match(myString, @"\d+");

if(match.Success)
{
    length = match.Value.Length;
} 
```

# email - Gmail 转发循环，gmail

> ID：10865050
> 
> 赞同：0
> 
> 时间：2012-06-02T18:58:29.483
> 
> 标签：email, gmail

**我向你保证这是一个编程问题：之前有人问过同样的问题，并被告知这不是一个编程问题，但那是因为他没有这样表述。请阅读我的完整描述。**

问题：我刚从大学毕业，想将我大学帐户（以下简称“帐户 O”）中的所有电子邮件转移到一个普通的 gmail 帐户（以下简称 N）。请注意，帐户 O 由 Gmail 提供支持，实际上是一个 gmail 帐户。
Gmail 有一个建议的方法来做到这一点：POP/IMAP。但是，这对我没有用，它也让许多其他人失败（[见这里](https://support.google.com/mail/bin/static.py?hl=en&page=known_issues.cs)）；在尝试通过 IMAP 同步时，我的帐户 N 被大量消息轰炸，内容为“您帐户中的邮件的大小无效。它已留在服务器上。”

尝试批量转发一个人的所有电子邮件似乎很自然。但谷歌不允许这样的行为。其他人说要使用过滤器，因为过滤后的项目可以被大量转发。但是您不能按日期过滤，也没有办法让过滤器选择所有内容。

我的解决方法，以及我需要更多经验程序员建议的地方：我想运行一个程序，登录到我的帐户 O 并找到我收到的第一封电子邮件。然后，我想开始一个 for 循环，它遍历我所有的电子邮件，其中循环的主体执行以下操作：a）单击前进按钮 b）输入我的帐户 N 电子邮件地址 c）点击“下一步”，这样我收到的第二封电子邮件出现了，依此类推。
这将完成我的任务。

不幸的是，我所掌握的只是一个学期的 C++、一些统计脚本语言（即 R）和 VBA 的知识。我不知道如何让代码与互联网交互。有人可以告诉我一种语言以及如何做到这一点吗？

谢谢，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:34:13.430

虽然您说您要解决此问题的方法使其成为编程问题是正确的，但 Ben 提出了一个有效的观点，即您的问题可能与站点指南不相符。

要回答您的问题，几乎所有语言都应该能够处理这个问题，因为几乎所有语言都有用于处理 SMTP 的库。但是，这很可能是矫枉过正，当存在其他替代方案时，我不建议您编写自己的解决方案。

如果您在尝试在 gmail 的 Web 界面中导入邮件（或添加帐户）时收到该消息，则应尝试使用实际的邮件客户端（例如 Thunderbird）导入它们，其过程在[此处](http://email.about.com/od/gmailtips/qt/How_to_Import_Mail_from_Mozilla_Thunderbird_in_Gmail.htm)描述。如果您已经尝试过但仍然遇到错误，您可以使用[GMail Loader](http://www.marklyon.org/gmail/)读取各种格式的存档电子邮件并将它们大量转发到 gmail 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T23:07:59.660

是的，可以创建一个选择所有内容的过滤器。
只需将您的电子邮件放在“收件人”字段中。
如果您有其他帐户转发给 O，也为他们制作一个过滤器（或者我们使用“OR”关键字）。

# spring - 双向多对多和DAO以HibernateException结束

> ID：10865053
> 
> 赞同：0
> 
> 时间：2012-06-02T18:58:39.123
> 
> 标签：spring, hibernate, many-to-many, bidirectional-relation

我正在为学校开发一个基于 Web 的数据库前端。但是我有一个多对多关系的问题。当我注释掉它时，我的服务器启动没有问题。这是启动的堆栈跟踪。

```
 [java] SCHWERWIEGEND: Exception sending context initialized event to listener instance of class org.docadmin.ContextListener
 [java] org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions
 [java]     at org.hibernate.collection.AbstractPersistentCollection.setCurrentSession(AbstractPersistentCollection.java:410)
 [java]     at org.hibernate.event.def.OnUpdateVisitor.processCollection(OnUpdateVisitor.java:43)
 [java]     at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:101)
 [java]     at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:61)
 [java]     at org.hibernate.event.def.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:55)
 [java]     at org.hibernate.event.def.AbstractVisitor.process(AbstractVisitor.java:123)
 [java]     at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:293)
 [java]     at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:223)
 [java]     at org.hibernate.event.def.DefaultUpdateEventListener.performSaveOrUpdate(DefaultUpdateEventListener.java:33)
 [java]     at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
 [java]     at org.hibernate.impl.SessionImpl.fireUpdate(SessionImpl.java:564)
 [java]     at org.hibernate.impl.SessionImpl.update(SessionImpl.java:552)
 [java]     at org.hibernate.impl.SessionImpl.update(SessionImpl.java:544)
 [java]     at org.docadmin.security.DBAuthentication.login(DBAuthentication.java:87)
 [java]     at org.docadmin.ContextListener.contextInitialized(ContextListener.java:74)
 [java]     at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
 [java]     at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
 [java]     at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
 [java]     at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:124)
 [java]     at org.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:146)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:777)
 [java]     at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
 [java]     at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
 [java]     at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
 [java]     at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
 [java]     at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
 [java]     at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
 [java]     at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
 [java]     at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
 [java]     at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
 [java]     at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
 [java]     at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
 [java]     at org.apache.catalina.core.StandardService.start(StandardService.java:525)
 [java]     at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
 [java]     at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:616)
 [java]     at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
 [java]     at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
 [java] 02.06.2012 09:42:54 org.apache.catalina.core.StandardContext listenerStart
 [java] SCHWERWIEGEND: Exception sending context initialized event to listener instance of class org.docadmin.ContextListener
 [java] org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions
 [java]     at org.hibernate.collection.AbstractPersistentCollection.setCurrentSession(AbstractPersistentCollection.java:410)
 [java]     at org.hibernate.event.def.OnUpdateVisitor.processCollection(OnUpdateVisitor.java:43)
 [java]     at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:101)
 [java]     at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:61)
 [java]     at org.hibernate.event.def.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:55)
 [java]     at org.hibernate.event.def.AbstractVisitor.process(AbstractVisitor.java:123)
 [java]     at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:293)
 [java]     at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:223)
 [java]     at org.hibernate.event.def.DefaultUpdateEventListener.performSaveOrUpdate(DefaultUpdateEventListener.java:33)
 [java]     at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
 [java]     at org.hibernate.impl.SessionImpl.fireUpdate(SessionImpl.java:564)
 [java]     at org.hibernate.impl.SessionImpl.update(SessionImpl.java:552)
 [java]     at org.hibernate.impl.SessionImpl.update(SessionImpl.java:544)
 [java]     at org.docadmin.security.DBAuthentication.login(DBAuthentication.java:87)
 [java]     at org.docadmin.ContextListener.contextInitialized(ContextListener.java:74)
 [java]     at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
 [java]     at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
 [java]     at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
 [java]     at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:124)
 [java]     at org.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:146)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:777)
 [java]     at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
 [java]     at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
 [java]     at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
 [java]     at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
 [java]     at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
 [java]     at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
 [java]     at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
 [java]     at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
 [java]     at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
 [java]     at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
 [java]     at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
 [java]     at org.apache.catalina.core.StandardService.start(StandardService.java:525)
 [java]     at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
 [java]     at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:616)
 [java]     at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
 [java]     at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

这是多对多关系的第一个表

```
 @Entity
 @Table(name="VFSUSR")
 @NamedQueries({
    @NamedQuery(name="org.docadmin.db.persistence.vfsusrById",
        query="from VfsUser as vfsusr where vfsusr.id = :id"),
    @NamedQuery(name="org.docadmin.db.persistence.vfsusrByLogin",
        query="from VfsUser as vfsusr where vfsusr.login = :vfsusrlogin"),
      })
      public class VfsUser
        extends AbstractBasePersistableObject
      {
    /**
     * the tables id, primary key
     */
    @Id
    @Column(name="VFSUSR_ID")
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Integer id;

    /**
     * foreign key many to many relationship
     */
    @ManyToMany(mappedBy="user")
    private Set<VfsGroup> group;
 } 
```

多对多关系的第二类。

```
 @Entity
 @Table(name="VFSGRP")
 @NamedQueries({
    @NamedQuery(name="org.docadmin.db.persistence.vfsgrpById",
        query="from VfsGroup as vfsgrp where vfsgrp.id = :id"),
    @NamedQuery(name="org.docadmin.db.persistence.vfsgrpByGroupName",
        query="from VfsGroup as vfsgrp where vfsgrp.groupName = :vfsgrpgroupname"),
 })
 public class VfsGroup {
    /**
     * the tables id, primary key
     */
    @Id
    @Column(name="VFSGRP_ID")
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Integer id;

    /**
     * foreign key many to many relationship
     */
    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(name="VFSGRPUSR",
            joinColumns={@JoinColumn(name="VFSUSR")},
            inverseJoinColumns={@JoinColumn(name="VFSGRP")})
    private Set<VfsGroup> user;
 } 
```

最后是抛出异常的代码。

```
 /* retrieve some beans */
        sessionFactory = (SessionFactory) ApplicationContextProvider.getApplicationContext().getBean("sessionFactory");

        /* retrieve user */
        user = userDAO.getVfsUserByLogin(login);

        /* open session and begin transaction */
        session = sessionFactory.openSession();
        tx = session.beginTransaction();

        securityToken = null;

        try {

            if(user != null && Arrays.equals(user.getPassword(), passwordStoreManager.getPasswordStore().encryptPassword(password))){
                securityToken = generateToken();
                user.setToken(securityToken);
                session.update(user);
            }
        } catch (InvalidKeyException e) {
            e.printStackTrace();
            logger.error("couldn't login as user[" + login + "] with password[****]", e);
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
            logger.error("couldn't login as user[" + login + "] with password[****]", e);
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
            logger.error("couldn't login as user[" + login + "] with password[****]", e);
        } catch (IllegalBlockSizeException e) {
            e.printStackTrace();
            logger.error("couldn't login as user[" + login + "] with password[****]", e);
        } catch (BadPaddingException e) {
            e.printStackTrace();
            logger.error("couldn't login as user[" + login + "] with password[****]", e);
        }finally{
            /* commit transaction */
            tx.commit();

            /* close session */
            session.close();
        }

        return(securityToken); 
```

您可能需要访问 sourceforge.net 上的 docadmin

```
 @Override
    public VfsUser getVfsUserByLogin(final String login) {
        if(login == null){
            return(null);
        }

        return((VfsUser) getHibernateTemplate().execute(new HibernateCallback() {
            public Object doInHibernate(Session session) {
                Query query = getSession().getNamedQuery("org.docadmin.db.persistence.vfsusrByLogin");
                query.setString("vfsusrlogin", login);
                return (VfsUser) query.uniqueResult();
            }
        }));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T02:49:53.753

我会说这个错误是相当明显的。您正在加载一个对象，在这种情况下是在会话中保持打开状态的用户。然后调用 update 尝试将该对象附加到新会话。

这一行：

```
user = userDAO.getVfsUserByLogin(login); 
```

必须打开会话才能加载用户。然后显式打开另一个会话并调用更新。如果用户已经附加到会话，您实际上不需要调用更新，因为 Hibernate 已经自动对其进行脏检查。

# tcp - 使用 Scapy 发送 tcp 有效负载：为什么要吃掉一个字节？

> ID：10865056
> 
> 赞同：2
> 
> 时间：2012-06-02T18:58:50.403
> 
> 标签：tcp, scapy, payload

我的问题如下：我想用scapy实现一个listen服务来刺激蜜罐（因为蜜罐使用的是假ip，所以不能使用OS sockets），我选择了scapy。

我实现了一个非常简单的 TCP 握手过程，但是有件事让我很沮丧：我使用 PSH 发送的数据包的一个字节被吃掉了。

例如，我将“abc”发送给客户端，但客户端的套接字（例如 netcat 或 wget）只接收“bc”。另一个例子是“HTTP/1.1 200 OK”变成“TTP/1.1 200 OK”。我捕获了数据包，wireshark 可以正确地将我的手工数据包识别为 HTTP，但客户端套接字仅缺少 1 个字节。我不知道为什么。

代码如下：192.168.1.100代表server(my) ip addr，9999是端口。例如，我在 192.168.1.100 上运行这个 python 脚本，然后我使用“nc 192.168.1.100 9999”。我希望得到“abc”，但我只能得到“bc”，但是在Wireshark中数据包似乎没有问题。太奇怪了。

```
 '''
    Created on Jun 2, 2012

    @author: root
    '''
    from scapy import all
    from scapy.layers.inet import IP, ICMP, TCP
    from scapy.packet import ls, Raw
    from scapy.sendrecv import sniff, send
    from scipy.signal.signaltools import lfilter
    import scapy.all
    HOSTADDR = "192.168.1.100"
    TCPPORT = 9999 'port to listen for'
    SEQ_NUM = 100

    ADD_TEST = "abc"

    def tcp_monitor_callback(pkt):
        global SEQ_NUM
        global TCPPORT
        if(pkt.payload.payload.flags == 2):
            'A syn situation, 2 for SYN'
            print("tcp incoming connection")
            ACK=TCP(sport=TCPPORT, dport=pkt.payload.payload.sport, flags="SA",ack=pkt.payload.payload.seq + 1,seq=0)
            send(IP(src=pkt.payload.dst,dst=pkt.payload.src)/ACK)
        if(pkt.payload.payload.flags & 8 !=0):
            'accept push from client, 8 for PSH flag'
            print("tcp push connection")
            pushLen = len(pkt.payload.payload.load)
            httpPart=TCP(sport=TCPPORT, dport=pkt.payload.payload.sport, flags="PA", ack=pkt.payload.payload.seq + pushLen)/Raw(load=ADD_TEST)
            'PROBLEM HERE!!!! If I send out abc, the client socket only receive bc, one byte disappers!!!But the packet received by client is CORRECT'
            send(IP(src=pkt.payload.dst,dst=pkt.payload.src)/httpPart)
        if(pkt.payload.payload.flags & 1 !=0):
            'accept fin from cilent'
            print ("tcp fin connection")
            FIN=TCP(sport=TCPPORT, dport=pkt.payload.payload.sport, flags="FA", ack=pkt.payload.payload.seq +1, seq = pkt.payload.payload.ack)
            send(IP(src=pkt.payload.dst,dst=pkt.payload.src)/FIN)
    def dispatcher_callback(pkt):
        print "packet incoming"
        global HOSTADDR
        global TCPPORT
        if(pkt.haslayer(TCP) and (pkt.payload.dst == HOSTADDR) and (pkt.payload.dport == TCPPORT)):
            tcp_monitor_callback(pkt)
        else:
            return
    if __name__ == '__main__':
        print "HoneyPot listen Module Test"
        scapy.all.conf.iface = "eth0"
        sniff(filter=("(tcp dst port %s) and dst host %s") % (TCPPORT,HOSTADDR), prn=dispatcher_callback) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T02:58:45.007

一些建议：

1.  嗅探可能会在数据包的末尾附加一些有效负载，因此`len(pkt.payload.payload.load)`可能不是真正的有效负载长度。可以使用`pkt[IP].len-40`（40是IP+TCP的常用报头长度）。您也可以使用`-len(pkt[IP].options)-len(pkt[TCP].options)`以获得更准确的结果。
2.  通常TCP上面的应用层使用换行符（“\r\n”）来分隔命令，所以你最好`ADD_TEST`改成`"abc\r\n"`

如果以上方法都不起作用，您可以升级到最新的 netcat 并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T21:17:02.930

我测试了你的代码，你错过了发送正确的 tcp 序列

httpPart=TCP(sport=TCPPORT, dport=pkt.payload.payload.sport, flags="PA", ack=pkt.payload.payload.seq + pushLen, seq=pkt.payload.payload.ack)/Raw(load =添加_测试）

应该解决这个问题，您可能有其他数据包长度问题，但吃掉的 1 个字节是由于缺少正确的 tcp 序列造成的

# sql - 如何使用openxml获取新插入行的ID？

> ID：10865064
> 
> 赞同：1
> 
> 时间：2012-06-02T19:00:06.333
> 
> 标签：sql, sql-server, tsql

我有一个要插入数据库的 XML 块。数据库包含 3 个表`itemMapping`，即`links`和`category`。`Links`表将仅具有来自 XML 的链接，`category`表将具有`category`来自 XML 的链接。

```
<item>
<link>http://google.com</link>

<category>search engine</category>
<category>android</category>
<category>gmail</category>
</item> 
```

我的困惑来了，“itemMaping”表包含以下列：

`ID`, `LinkID`,`CategoryID`

在`itemMapping`表中，我必须插入新插入行的 linkID 和 categoryID。因此，根据示例 XML表，每个类别将有 3 条记录，但要在此表中插入记录，`itemMapping`我需要从上面插入记录。我怎样才能做到这一点？如果可能，我想在单个 SP 中执行此操作。`linkID``categoryID`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:57:31.540

嗨考虑下表：

```
Country Table
CountryID CountryName LastEditUser

Province table
ProvinceID ProvinceName CountryID LastEditUser 
```

考虑 CountryID 和 ProvinceID 是身份列。

在 SQL 中，您可以使用单个存储过程将记录插入到这两个表中，看看快速示例

```
CREATE PROCEDURE InsertProvince
(
@ProvinceName VARCHAR(128),
@CountryName VARCHAR(128),
@LastEditUser VARCHAR(128)
)
AS
    DECLARE @CountryID INT

    INSERT INTO Country
    (CountryName, LastEditUser)
    VALUES
    (@CountryName, @LastEditUser)

    @CountryID = SCOPE_IDENTITY();

    INSERT INTO Province
    (ProvinceName, CountryID, LastEditUser)
    VALUES
    (@ProvinceName, @CountryID, @LastEditUser)
END 
```

SQL Server 有一个名为[scope_identity](http://msdn.microsoft.com/en-us/library/ms190315.aspx)的函数，它返回插入到同一范围内的标识列中的最后一个标识值。范围是一个模块：存储过程、触发器、函数或批处理。因此，如果两条语句在同一个存储过程、函数或批处理中，则它们属于同一范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:51:49.683

插入并`Links`捕获变量。在表变量中插入并捕获生成的 ID。使用该表变量作为插入源。`LinkID``scope_identity()``Category``ItemMapping`

假设您的表格看起来像这样。

```
create table Category
(
  CategoryID int identity primary key,
  Name varchar(50)
)

create table Links
(
  LinkID int primary key identity,
  Link varchar(50)
)

create table ItemMapping
(
  LinkID int references Links(LinkID),
  CategoryID int references Category(CategoryID),
  primary key(LinkID, CategoryID)
) 
```

您可以使用 XML 变量来执行此操作`@XML`。

```
declare @IDs table(ID int)
declare @LinkID int

insert into Links(Link)
select T.X.value('.', 'nvarchar(50)')
from @XML.nodes('item/link') as T(X) 

set @LinkID = scope_identity()

insert into Category(Name)
output inserted.CategoryID into @IDs
select T.X.value('.', 'nvarchar(50)')
from @XML.nodes('item/category') as T(X) 

insert into ItemMapping(LinkID, CategoryID)
select @LinkID, I.ID
from @IDs as I 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/71774)

# algorithm - 洗牌一堆钥匙

> ID：10865067
> 
> 赞同：1
> 
> 时间：2012-06-02T19:00:29.500
> 
> 标签：algorithm, shuffle

这个问题主要涉及一个著名的面试问题，即洗牌。我浏览了 SO 并发现了类似的问题，但答案大多不符合标准或被忽略。

给出的问题是建立一个洗牌的功能。

**我的解决方案：**如果我将所有卡片以任何顺序（比如排序或未排序 - 顺序无关紧要）放在链接列表中，这是可能的。我生成一个随机数，将其 mod 设为当前的卡片总数，然后从链表中删除该索引以将卡片存储在我的 shuffledArray 中。

我认为这个解决方案很棒，它具有以下运行时间：O(n) 用于以任何顺序构建链表。O(n) 从链表中删除它。O(1) 用于每次生成一个随机数。

所以或多或少我们有这个算法的 O(n) 下限。

我担心的是空间。目前占用的空间如下： 1) 链表 O(n) 2) shuffledArray O(n)。

再次是 O(n) 的下限。

这可以就地完成吗？我的意思是不使用这个额外的空间。它可以在少于 O(n) 的时间内完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:04:05.323

[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)就地工作，并且恰好生成 n-1 个随机数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:04:03.140

```
void shuffle(vector<T> v)
{
    int n = v.size();
    for (int i = 0; i < n; i++)
        swap(v[i], v[i+rand(n-i)]);
}; 
```

归纳证明：

1.  单个元素向量被简单排序
2.  第一个元素是随机选择的，通过归纳，向量的其余部分被打乱

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T19:08:52.303

如何迭代卡片。在每一步中，您生成一个介于 1 和 52 之间的随机数，并将当前卡与该随机数的卡交换？

你怎么看？

# http - OSGi HTTP 客户端发布方法

> ID：10865071
> 
> 赞同：0
> 
> 时间：2012-06-02T19:01:32.250
> 
> 标签：http, post, osgi

我刚刚开始学习 OSGi。最近被一个问题卡住了。如何发布数据

从 OSGi 包到 HTTP 服务器而不使用外部包/框架？

我希望看到一个简单的 OSGI 包的代码示例，它充当 HTTP

客户端，并且可以将字符串发送到 HTTP 服务器（在我的例子中是龙卷风）。

我已经搜索了很多。但我没有直接的解决方案。有restlets、Felix和所有类型的解决方案。我唯一想要的是将数据从 OSGi 包发送到 HTTP 服务器，而不使用任何外部框架。可能吗？

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:59:31.473

将数据发布到 HTTP 服务器根本与 OSGi 无关，您只需要纯 Java。

如果你想要真正的准系统，你可以使用[HttpURLConnection](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html)来发布你的数据。您还可以选择更舒适一些，并使用[Apache HttpComponents Client](http://hc.apache.org/httpcomponents-client-ga/)。

# ruby-on-rails - 管理命名空间中的 redirect_to 对象

> ID：10865076
> 
> 赞同：9
> 
> 时间：2012-06-02T19:02:03.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, routes

在 Rails 中，`redirect_to`如果您已将对象声明为路由中的资源，则可以将其传递给：

```
redirect_to @post 
```

我有一个`Attachment`属于所有者的多态对象。`@attachment.owner`可以是任何对象。我需要重定向到附件的所有者，但附件及其所有者都是管理命名空间中的资源：

```
namespace :admin do
  resources :attachments, :posts, :comments #etc
end 
```

如果我知道这`@attachment.owner`是一个帖子，我可以`redirect_to admin_post_path(@attachment.owner)`，但既然它可以是任何对象，我该如何进行重定向？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T19:13:48.027

您可以使用[`polymorphic_path`](http://apidock.com/rails/ActionDispatch/Routing/PolymorphicRoutes/polymorphic_path)

```
polymorphic_path([:admin, @attachment.owner]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:14:14.110

redirect_to 将符号作为参数。定义一个具有相同名称的私有方法并评估该方法中的 url。

```
redirect_to :my_owner

private

define my_owner
  <evaluate the path here>
end 
```

# c++ - 多线程——已知的相似性解决方案

> ID：10865077
> 
> 赞同：0
> 
> 时间：2012-06-02T19:02:17.383
> 
> 标签：c++, multithreading, posix

我正在为这种情况寻找一个已知的解决方案（作为**生产者-消费者问题**）。

* * *

就我而言，有两种选择：

*   **图片链接**，
*   **带有**图像链接的文本文件和其他文本文件的链接（带有其他链接）。

**我正在尝试使用posix mutex**和**posix semaphore在****C++**（在 unix 上）创建一个多线程下载器。

 ****应用程序具有指向第一个文本文件的链接。

* * *

1.  线程休眠（信号量 = 0）。
2.  主线程下载第一个文本文件。
3.  解析其他链接——将链接放入某个队列（信号量 += links_count——> 其他线程唤醒）。
4.  其他线程产生其他链接。

主线程呢？如何检查其他线程——完成状态？

* * *

使用有限队列可能会出现死锁：文本文件包含许多链接（队列与其他文本文件一样满）。没有文本文件可以完成。

* * *

谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:37:24.707

好吧，您的问题仍然是生产者/消费者问题，但您的消费者也是生产者。处理问题的一些方法：

*   不要限制您的队列大小。当您的进程内存不足时就会失败。不是很优雅，但可能适用于所有下载场景的 99.99%（假设每个下载链接平均 100 字节和大约 2GB 可用内存，您必须在内存不足之前在队列中存储超过 2000 万个链接）。
*   通过使用硬盘驱动器作为缓冲区来拆分生产者和消费者。将文件下载到临时文件夹中。让一个线程监视该文件夹中的新文件。出现新文件后，对其进行解析并将项目放入消费者队列中。文件解析完成后，将其放入最终下载位置。这样你只受磁盘空间的限制。这样，您的生产者（解析器）与您的消费者（下载者）是不同的线程。

**编辑**

[`pthread_join`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html)您可以在主线程中等待您的工作线程。****

# ios - 如何从 MKMapView 中删除除用户位置注释之外的所有注释？

> ID：10865088
> 
> 赞同：40
> 
> 时间：2012-06-02T19:03:54.930
> 
> 标签：ios, xcode, mkmapview, mkannotation, userlocation

我`removeAnnotations`用来删除我的注释，`mapView`但同样删除用户位置 ann。我该如何防止这种情况，或者如何让用户 ann 重新查看？

```
NSArray *annotationsOnMap = mapView.annotations;
        [mapView removeAnnotations:annotationsOnMap]; 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-03T03:16:40.923

更新：

当我尝试使用 iOS 9 SDK 时，不再删除用户注释。你可以简单地使用

```
mapView.removeAnnotations(mapView.annotations) 
```

* * *

历史答案（适用于 iOS 9 之前在 iOS 上运行的应用）：

试试这个：

```
NSMutableArray * annotationsToRemove = [ mapView.annotations mutableCopy ] ;
[ annotationsToRemove removeObject:mapView.userLocation ] ;
[ mapView removeAnnotations:annotationsToRemove ] ; 
```

编辑：斯威夫特版本

```
let annotationsToRemove = mapView.annotations.filter { $0 !== mapView.userLocation }
mapView.removeAnnotations( annotationsToRemove ) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-19T04:04:04.400

要清除地图中的所有注释：

```
[self.mapView removeAnnotations:[self.mapView annotations]]; 
```

从 Mapview 中删除指定的注释

```
 for (id <MKAnnotation> annotation in self.mapView.annotations)
{
    if (![annotation isKindOfClass:[MKUserLocation class]])
    {
              [self.mapView removeAnnotation:annotation];   
    }

} 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-18T13:49:26.170

对于 Swift，您可以简单地使用单线：

```
mapView.removeAnnotations(mapView.annotations) 
```

编辑：正如 nielsbot 所提到的，它还将删除用户的位置注释，除非您像这样设置它：

```
mapView.showsUserLocation = true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-03T03:13:08.813

如果您的用户位置属于 类`MKUserLocation`，请使用`isKindOfClass`以避免删除用户位置注释。

```
if (![annotation isKindOfClass:[MKUserLocation class]]) {

} 
```

否则，您可以设置一个标志来识别`– mapView:viewForAnnotation:`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-27T09:29:00.577

> Swift 4.2 或更高版本

**在添加注释之前添加此行**

```
mapView.removeAnnotations(mapView.annotations.filter { $0 !== mapView.userLocation }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-14T20:24:37.997

`NSPredicate`加个过滤器怎么样？

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"className != %@", NSStringFromClass(MKUserLocation.class)];
NSArray *nonUserAnnotations = [self.mapView.annotations filteredArrayUsingPredicate:predicate];
[self.mapView removeAnnotations:nonUserAnnotations]; 
```

*使用 NSPredicate 过滤器，生活总是更美好*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-31T14:20:19.033

在**Swift 4.1**中：

通常，如果您不想删除***MKUserLocation***注释，您可以简单地运行：

`self.mapView.removeAnnotations(self.annotations)`.

默认情况下，此方法不会从列表中删除***MKUserLocation***注释。`annotations`

但是，如果您出于任何其他原因需要过滤除***MKUserLocation***之外的所有注释（请参见下面的变量），例如以除***MKUserLocation***注释之外的所有注释为中心，您可以在下面使用这个简单的扩展。`annotationsNoUserLocation`

 *```
extension MKMapView {

    var annotationsNoUserLocation : [MKAnnotation] {
        get {
            return self.annotations.filter{ !($0 is MKUserLocation) }
        }
    }

    func showAllAnnotations() {
        self.showAnnotations(self.annotations, animated: true)
    }

    func removeAllAnnotations() {
        self.removeAnnotations(self.annotations)
    }

    func showAllAnnotationsNoUserLocation() {
        self.showAnnotations(self.annotationsNoUserLocation, animated: true)
    }

} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-30T06:46:35.853

嗨试试这个我从这段代码中得到了解决方案：

```
 NSMutableArray*listRemoveAnnotations = [[NSMutableArray alloc] init];
[Mapview removeAnnotations:listRemoveAnnotations];

 [listRemoveAnnotations release]; 
```*

# php - 比较多个数组

> ID：10865089
> 
> 赞同：5
> 
> 时间：2012-06-02T19:04:00.667
> 
> 标签：php

我试图弄清楚如何编写一个决胜局函数。以下记录都因某种原因而平局，因此为了打破平局，我们对每个结果进行排序，然后遍历每一行。平局在第一点就被打破了，这是有区别的。

在下面的示例中，第一遍 $result[c] 被淘汰，但 a 和 b 仍然并列。然后在第二次通过时，a 被消除，因为它大于 b。所以结果是 b, a, c

```
$result[a] = array(1, 3, 4, 5);
$result[b] = array(1, 2, 3, 7);
$result[c] = array(2, 3, 3, 5); 
```

更复杂的是，我不会总是有相同数量的结果来比较。它可能超过 2 个。

我真的希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:27:09.227

在php中，实际上可以直接使用关系运算符比较数组

```
if ($result['a'] > $result['b']) {

} 
```

php 只会循环遍历子数组，比较它们的元素。如果您想阅读[http://php.net/manual/en/language.operators.comparison.php ，还有更多详细信息](http://php.net/manual/en/language.operators.comparison.php)

无论如何，您可以利用这一点并对其进行排序。

```
asort($result);
print_r($result); 
```

如果您需要一种方法来获得第 n 个位置条目，请执行

```
asort($result);
print_r($result);
$ranked = array_keys($result);
$secondPlace = $ranked[1]; // a
print_r($result[$secondPlace]); 
```

如果你需要一封信的排名指数

```
$letterRanks = array_flip($ranked);
echo $letterRanks['a']; // 1, for second 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:17:42.130

```
$i = 0;
while (count($result) > 1) {
   $winners = array();
   $best = PHP_INT_MAX;
   foreach ($result as $x) {
      if ($x[$i] == $best) {
         $winners[] = $x;
      } else if ($x[$i] < $best) {
         $winners = array($x);
         $best = $x[$i];
      }
   }
   $i++;
   $result = $winners;
} 
```

这只是一段快速而肮脏的代码......它不能处理数组大小不同的情况。主要是因为我不确定 array(1,2,3) 或 array(1,2) 中的哪一个应该“获胜”。此外，它不会进行任何数组边界检查或处理在比较所有元素之后绑定多个数组的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:53:46.613

这是一个有效的解决方案。如果您需要更好地解释它的工作原理，请告诉我。我已将调试语句留在其中，因此您应该能够辨别它在做什么。该解决方案适用于任意数量的竞争者，只要它们`$num_elements`在每个数组中都相同。

```
$result = array();
$result['a'] = array(1, 3, 4, 5);
$result['b'] = array(1, 2, 3, 7);
$result['c'] = array(2, 3, 3, 5);

$num_elements = 4; // In each array
$num_competitors = count( $result);

$finish_order = array();
$keys = $winners = array_keys( $result);

// $i is the current index into each competitor's array
// $j is the current index into the $keys array (telling us the current competitor)
// $k is the next index into the $keys array (telling us the next competitor, i.e. the competitor to compare the current competitor with)
for( $i = 0; $i < $num_elements; $i++) {

    // If we've eliminated all but one winner, we're done!
    if( count( $winners) == 1) { 
        $finish_order[] = array_pop( $winners);
        break;
    }

    echo 'Element number ' . $i . "\n";

    for( $j = 0; $j < $num_competitors; $j++) {

        // If we've already eliminated this competitor, continue;
        if( !isset( $winners[$j])) continue;

        for( $k = $j + 1; $k < $num_competitors; $k++) {

            // If we've already eliminated this competitor, continue;
            if( !isset( $winners[$k])) continue;

            echo "\t - Who wins: " . $result[ $keys[$j] ][$i] . ' from ' . $keys[$j] . ' or ' . $result[ $keys[$k] ][$i] . ' from ' . $keys[$k] . "?\n";

            if( $result[ $keys[$j] ][$i] < $result[ $keys[$k] ][$i]) {

                echo "\t\t *** " . $keys[$k] . ' is out!' . "\n";
                $finish_order[] = $keys[$k];                
                unset( $winners[$k]);
            }

            if( $result[ $keys[$j] ][$i] > $result[ $keys[$k] ][$i]) {

                echo "\t\t *** " . $keys[$j] . ' is out!' . "\n";
                $finish_order[] = $keys[$j];                
                unset( $winners[$j]);
            }

        }
    }
}

echo "Game over - Result order is: " . implode( ', ', array_reverse( $finish_order)); 
```

**输出：**

```
Element number 0
     - Who wins: 1 from a or 1 from b?
     - Who wins: 1 from a or 2 from c?
         *** c is out!
Element number 1
     - Who wins: 3 from a or 2 from b?
         *** a is out!
Game over - Result order is: b, a, c 
```

[演示](http://codepad.viper-7.com/rigtuS)

# c# - 使用 C# 在谷歌地球中移动地标

> ID：10865093
> 
> 赞同：0
> 
> 时间：2012-06-02T19:04:25.687
> 
> 标签：c#, google-earth

我一直在为我的工作使用 Winform GEPlugin 控件示例。

[http://code.google.com/p/winforms-geplugin-control-library/wiki/ExampleForm](http://code.google.com/p/winforms-geplugin-control-library/wiki/ExampleForm)

我的问题是我想移动我的地标（在 C# 中，而不是 KML 中），我尝试了很多但它不起作用。请为此建议我一些解决方案。代码示例也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:47:48.017

我想我们可以通过java脚本来移动它，在winform-GE Plugin中有injectJavascript和invokeJavascript之类的函数，我们可以利用这些函数来执行javascript函数..

即使我无法准确地移动它，但我可以创建一个新的地标并删除以前的地标，这会让人感觉地标正在移动。

```
<script
src="http://www.google.com/jsapi?key=ABQIAAAAuPsJpk3MBtDpJ4G8cqBnjRRaGTYH6UMl8mADNa0YKuWNNa8VNxQCzVBXTx2DYyXGsTOxpWhvIG7Djw"
type="text/javascript"></script>
<script type="text/javascript">
function addSampleButton(caption, clickHandler) {
    var btn = document.createElement('input');
    btn.type = 'button';
    btn.value = caption;

    if (btn.attachEvent)
        btn.attachEvent('onclick', clickHandler);
    else
        btn.addEventListener('click', clickHandler, false);

    // add the button to the Sample UI
    document.getElementById('sample-ui').appendChild(btn);
}

function addSampleUIHtml(html) {
    document.getElementById('sample-ui').innerHTML += html;
}
</script>
<script type="text/javascript">
var ge;
var placemark;

var counter = 0;

google.load("earth", "1");

function init() {
    google.earth.createInstance('map3d', initCallback, failureCallback);

    addSampleButton('Create a Placemark!', buttonClick);
    addSampleButton('Remove last Placemark!', RemovebuttonClick);

}

function initCallback(instance) {
    ge = instance;
    ge.getWindow().setVisibility(true);

    // add a navigation control
    ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);

    // add some layers
    ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
    ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);

    // Get the current view.
    var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
    lookAt.setRange(1000);
    // Set new latitude and longitude values.
    lookAt.setLatitude(11.50);
    lookAt.setLongitude(79.50);

    // Update the view in Google Earth.
    ge.getView().setAbstractView(lookAt);

    createPlacemark();

    document.getElementById('installed-plugin-version').innerHTML = ge
            .getPluginVersion().toString();
}

function failureCallback(errorCode) {
}

function removePlacemark() {
    //counter--;
    // alert("placemark" + (counter -1));
    ge.getFeatures().removeChild(placemark);
}

function createPlacemark() {
    if (counter != 0)
        removePlacemark();
    placemark = ge.createPlacemark('');
    placemark.setName("placemark" + counter);
    ge.getFeatures().appendChild(placemark);

    // Create style map for placemark
    var icon = ge.createIcon('');
    icon
            .setHref('http://www.veryicon.com/icon/png/Transport/Transport%201/Car.png');
    var style = ge.createStyle('');
    style.getIconStyle().setIcon(icon);
    placemark.setStyleSelector(style);

    // Create point
    var la = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
    var point = ge.createPoint('');
    point.setLatitude(la.getLatitude());
    point.setLongitude(la.getLongitude());
    placemark.setGeometry(point);

    placemark.
    counter++;
}

function buttonClick() {
    createPlacemark();
}

function RemovebuttonClick() {
    removePlacemark();
}
</script> 
```

你可以试试这些脚本，如果你能通过给出纬度和经度来移动，那么请告诉我

# r - 为什么我会收到“警告较长的对象长度不是较短的对象长度的倍数”？

> ID：10865095
> 
> 赞同：53
> 
> 时间：2012-06-02T19:04:37.833
> 
> 标签：r

我有数据框dih_y2。这两行给了我一个警告：

```
> memb = dih_y2$MemberID[1:10]
> dih_col = which(dih_y2$MemberID == memb)  
Warning message:
In dih_y2$MemberID == memb :
longer object length is not a multiple of shorter object length 
```

为什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-02T19:13:53.047

您没有给出可重现的示例，但您的警告消息可以准确地告诉您问题所在。

`memb`只有长度为 10。我猜长度`dih_y2$MemberID`不是 10 的倍数。使用时`==`，如果不是倍数，R 会发出警告，让你知道它可能没有做你正在做的事情期待它做到。`==`逐元素检查是否相等。我怀疑您想要做的是找到 的哪些元素`dih_y2$MemberID`也在 vector 中`memb`。为此，您需要使用`%in%`运算符。

```
dih_col <- which(dih_y2$MemeberID %in% memb) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-02T19:15:12.850

当您在 R 中对两个向量进行布尔比较时，“期望”是两个向量的长度相同，以便 R 可以依次比较每个对应的元素。

R 有一个非常受欢迎（或讨厌）的功能，称为[回收](https://cran.r-project.org/doc/manuals/r-release/R-intro.html#The-recycling-rule)，在许多情况下，如果您尝试执行 R 通常期望对象具有相同长度的操作，它会自动扩展或回收较短的对象以强制两者物体长度相同。

如果较长的对象是较短的对象的倍数，这相当于简单地重复较短的对象几次。通常，R 程序员会利用这一点来更紧凑地做事并减少打字。

但是，如果它们不是倍数，R 会担心您可能犯了错误，并且可能并不打算执行该比较，因此会发出警告。

使用以下代码探索自己：

```
> x <- 1:3
> y <- c(1,2,4)
> x == y
[1]  TRUE  TRUE FALSE
> y1 <- c(y,y)
> x == y1
[1]  TRUE  TRUE FALSE  TRUE  TRUE FALSE
> y2 <- c(y,2)
> x == y2
[1]  TRUE  TRUE FALSE FALSE
Warning message:
In x == y2 :
  longer object length is not a multiple of shorter object length 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-10-17T06:01:40.693

我有一个类似的问题，使用`%in%`运算符而不是`==`（平等）运算符是解决方案：

```
# %in% 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-22T16:42:51.917

我有一个类似的问题，但它与对象的结构和类有关。我会检查如何`dih_y2$MemberID`格式化。

# android - Android - 我的 Android SDK 管理器中未显示应用内计费包

> ID：10865096
> 
> 赞同：2
> 
> 时间：2012-06-02T19:04:45.760
> 
> 标签：android, in-app-billing

我正在遵循以下说明：

[http://developer.android.com/guide/market/billing/billing_integrate.html#billing-download](http://developer.android.com/guide/market/billing/billing_integrate.html#billing-download)

他们说要打开 Android SDK 管理器并安装附加功能 --> InApp Billing 包。但我没有那个选项。

在 exras 下，我只有它说我已经下载的 Android 支持包，以及来自英特尔的东西。

但是当我转到我的 C:\program files\android\android-sdk\ 时，那里有很多东西，但没有类似于 inapp 计费包的东西。

任何想法如何获得该包裹以及可能出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:10:16.030

```
C:\program files\android\android-sdk\extras\google\market_billing 
```

# iphone - iOS：从相机获取逐像素数据

> ID：10865100
> 
> 赞同：10
> 
> 时间：2012-06-02T19:05:03.733
> 
> 标签：iphone, ios, camera, avfoundation, pixel

我知道 AVFoundation 及其捕获支持（虽然不太熟悉）。但是，我没有看到任何易于访问的 API 来获取逐像素数据（每像素 RGB 或类似数据）。我确实记得在文档中读到这是可能的，但我真的不知道如何。所以：

1.  这可以做到吗？如果是这样，怎么做？
2.  我会得到原始图像数据，还是 JPEG 压缩的数据？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-02T19:20:47.573

AV Foundation 可以为您返回由视频或静态相机捕获的图像的原始字节。您需要使用适当的 AVCaptureDevice 以及相应的 AVCaptureDeviceInput 和 AVCaptureDeviceOutput（AVCaptureVideoDataOutput 或 AVCaptureStillImageOutput）设置 AVCaptureSession。Apple 在他们的文档中有一些这个过程的例子，它需要一些样板代码来配置。

配置好捕获会话并从相机捕获数据后，您将设置一个`-captureOutput:didOutputSampleBuffer:fromConnection:`委托方法，其中一个参数是 CMSampleBufferRef。这将有一个 CVImageBufferRef ，您可以通过`CMSampleBufferGetImageBuffer()`. 在该像素缓冲区上使用`CVPixelBufferGetBaseAddress()`将返回代表相机帧的原始像素数据的字节数组的基地址。这可以是几种不同的格式，但最常见的是 BGRA 和平面 YUV。

[我在这里](http://www.sunsetlakesoftware.com/sites/default/files/ColorTracking.zip)有一个使用它的示例应用程序，但我建议您也看看[我的开源框架](https://github.com/BradLarson/GPUImage)，它封装了标准的 AV Foundation 样板，并且可以轻松地在 GPU 上执行图像处理。根据你想用这些原始相机字节做什么，我可能已经有了一些你可以在那里使用的东西，或者一种比 CPU 处理更快的方法。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-03-09T12:26:30.927

```
 lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
 float luminance = dot(textureColor.rgb, W);

 mediump vec2 p = textureCoordinate;
 if (p.x == 0.2 && p.x<0.6 && p.y > 0.4 && p.y<0.6) {
     gl_FragColor = vec4(textureColor.r * 1.0, textureColor.g * 1.0, textureColor.b * 1.0, textureColor.a);
 } else {
   gl_FragColor = vec4(textureColor.r * 0.0, textureColor.g * 0.0, textureColor.b * 0.0, textureColor.a *0.0);
 } 
```

# c - valgrind 在运行比较时显示错误

> ID：10865105
> 
> 赞同：1
> 
> 时间：2012-06-02T19:05:41.383
> 
> 标签：c, valgrind

我有以下功能

```
#include <stdio.h>
#include <stdlib.h>
#include "block.h"

bool block_equal(const struct block *block1, const struct block *block2) {
    if ((block1 == NULL) ^ (block2 == NULL))
        return false;
    else if (block1 == NULL & block2 == NULL)
        return true;
    else {
        // ... Some stuff
    }
} 
```

当我使用指向初始化的指针运行它时`struct block`，`NULL`valgrind 显示此错误（第 6 行是第一个比较）：

```
==24444== Conditional jump or move depends on uninitialised value(s)
==24444==    at 0x402E34: block_equal (block.c:6)
==24444==    by 0x4025D3: test_chunks_write (test_chunks.c:22)
==24444==    by 0x4E31FE8: ??? (in /usr/lib/libcunit.so.1.0.1)
==24444==    by 0x4E323C6: ??? (in /usr/lib/libcunit.so.1.0.1)
==24444==    by 0x4E326E7: CU_run_all_tests (in /usr/lib/libcunit.so.1.0.1)
==24444==    by 0x401627: main (tests.c:15) 
```

编辑：这是调用`block_equal`：

```
#include <stdlib.h>
#include <CUnit/CUnit.h>
#include "../chunks.h"
#include "../block.h"

void test_chunks_write(void) {
    struct block *block1, *block2;
    block1 = malloc(sizeof(struct block));
    block2 = malloc(sizeof(struct block));
    block1->type = BLOCK_WOOD;
    block2->type = BLOCK_STONE;
    chunks *chunks = chunks_empty();
    coordinates coord1;
    coordinates coord2;
    for (int i=0; i<SPACE_DIMENSION; i++) {
        coord1[i] = i+1;
        coord2[i] = 2*i+5;
    }
    chunks_write_data(&chunks, coord1, block1);
    CU_ASSERT(block_equal(block1, chunks_select_data(chunks, coord1)))
    CU_ASSERT_FALSE(block_equal(block2, chunks_select_data(chunks, coord1)))
    struct block* block3 = chunks_select_data(chunks, coord2);

    ///////////////////////////////////////////////////////////////////////////////////////////////
    // According to the debugger, at this point block2 is 0x605600 and block3 is 0x0
    CU_ASSERT_FALSE(block_equal(block2, block3))
    // ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:56:50.410

实际上，这个值并没有被初始化，所以 this 可以指向任何东西；我不知道调试器告诉我它是 0x0。我将以不同的方式编写测试（例如，测试地址）。

# ruby-on-rails - Rails：如何获取这些复选框和单选按钮来显示模型中的数据？

> ID：10865106
> 
> 赞同：0
> 
> 时间：2012-06-02T19:05:49.823
> 
> 标签：ruby-on-rails, model, checkbox, formhelper

这是一些基本上用于显示我的数据库中的列表的代码。最后几列只是与模型的特定布尔属性相关联的单选按钮和复选框。我已经对复选框和单选按钮进行了编程。但是如何让它们显示数据库中的值？

index.html.erb：

```
<h1>Listings</h1>

<table class="datatable">
 <tr id="heading" >
  <th >id</th>
  <th >name</th>
  <th>telephone</th>
 </tr>

<% @listings.each do |listing| %>
  <tr id="body">
    <th><%=listing.id%></th>
    <th><%= link_to listing.name, edit_listing_path(listing) %></th>
    <th><%=listing.telephone%></th>

 <%= form_for listing do |f| %>     
 <td id="keep"><%= f.radio_button :keep, "Keep" %></br>
    <%= f.label :keep, "Keep" %>
 </td>
 <td id="delete"> <%= f.radio_button :keep, "Delete" %></br>
    <%= f.label :keep, "Delete" %>
 </td>
 <td id="checked"><%= f.check_box :checked %></br>
    <%= f.label :checked, "checked" %>
 </td>
 <td id="collected"><%= f.check_box :collected %></br>
    <%= f.label :collected, "collected" %>
 </td>
 <td id="digitized"><%= f.check_box digitized %></br>
    <%= f.label :digitized, "digitized" %>
 </td>
 <td id="in_db"><%= f.check_box :in_database  %></br>
    <%= f.label :database, "database" %>
 </td>
    <td id="submit"><%= f.submit "update" %></br>

  </td>
  <% end %>
   </tr>
 <% end %> 
 </table> 
```

另外我在这里选择“表单”的原因是因为最终在我弄清楚如何在这里显示数据之后，如果用户更改复选框中的任何值，我希望这个视图也“更新”模型中的数据。但是，一旦我学会了如何显示模型的值，我就会明白这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:52:49.767

像这样的东西：

```
<%= f.radio_button :keep, "Keep", :checked => listing.keep %> 
```

# github-for-windows - 无法使用 Github for Windows 在 Windows 8 RC 中克隆此存储库

> ID：10865110
> 
> 赞同：7
> 
> 时间：2012-06-02T19:06:36.370
> 
> 标签：github-for-windows

尝试使用 GitHub for Windows 在 Windows 8 RC 中克隆我的一个 GitHub 存储库时，我收到以下错误消息：

*无法克隆此存储库。请检查您的互联网连接。*

*   当我尝试使用 GitHub for Windows 在 Windows 7 中克隆相同的存储库时，它成功了。
*   在出现错误消息之前，Windows 8 中的克隆会进行到大约 9%。

我检查了日志文件 TheLog.txt，说设置证书验证位置时出错：

```
2012-06-02 20:28:12.5876|INFO|GitHub.Extensions.ReactiveScreen|Activating GitHub.ViewModels.AboutViewModel.
2012-06-02 20:28:57.4916|INFO|GitHub.Extensions.ReactiveScreen|Deactivating GitHub.ViewModels.AboutViewModel.
2012-06-02 20:28:57.4916|INFO|GitHub.Extensions.ReactiveScreen|Closed GitHub.ViewModels.AboutViewModel.
2012-06-02 20:28:59.0532|INFO|GitHub.Models.RepositoryModel|Cloning [repository-url].git
2012-06-02 20:28:59.0532|INFO|GitHub.Helpers.GitRemote|Cloning '[repository-url].git' to 'Spotify-Metro-Style-App' in directory 'C:\GitHub
2012-06-02 20:28:59.0562|INFO|GitHub.PortableGit.Helpers.GitEnvSetupExtensions|Configuring SSH Agent: :
2012-06-02 20:28:59.0562|INFO|GitHub.PortableGit.Helpers.GitEnvSetupExtensions|PATH is C:\Users\EivindGussiås\AppData\Local\GitHub\PortableGit_0812189c12ccff4584523d6efce294a33dd2332a\cmd;C:\Users\EivindGussiås\AppData\Local\GitHub\PortableGit_0812189c12ccff4584523d6efce294a33dd2332a\bin;C:\Users\EivindGussiås\AppData\Local\GitHub\PortableGit_0812189c12ccff4584523d6efce294a33dd2332a\mingw\bin;C:\Users\EivindGussiås\AppData\Local\Apps\2.0\7VOQ2HDO.HJX\5506OVG3.2LE\gith..tion_8f45a2159c87c850_0001.0000_70cd4637d2963700;C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319;C:\WINDOWS\System32
2012-06-02 20:28:59.0782|INFO|GitHub.IO.ObservableProcess|git.exe clone --progress --recursive [repository-url].git "Spotify-Metro-Style-App" 
2012-06-02 20:29:02.2949|WARN|GitHub.Extensions.StandardUserErrors|Showing user and error Please check your internet connection.
GitHub.IO.ProcessException: Cloning into 'Spotify-Metro-Style-App'...
error: error setting certificate verify locations:
  CAfile: C:\Users\EivindGussiås\AppData\Local\GitHub\PortableGit_0812189c12ccff4584523d6efce294a33dd2332a/bin/curl-ca-bundle.crt
  CApath: none
 while accessing [repository-url].git/info/refs
fatal: HTTP request failed
2012-06-02 20:29:02.2949|WARN|GitHub.ViewModels.ShellViewModel|User error encountered: Unable to clone this repository. 
```

*   在成功克隆存储库的 Windows 7 中，不会向 TheLog.txt 写入任何内容。
*   在 Windows 8 RC 中，我尝试克隆的任何存储库都会发生相同的错误。
*   我使用 Microsoft 帐户登录 Windows 8，这在使用 GitBash 的 Windows 8 CP 中一直存在问题，因为用户名自动设置为包含 GitBash 不支持的挪威字符。如您所见，我的主目录是 C:\Users\EivindGussiås\。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:56:23.577

*披露：我是 GitHub 的开发人员。*

这应该在我们刚刚发布的 v1.0.8.4 更新中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:10:30.377

当我得到这个时，我通常只是关闭它并重新打开它，如果这不能解决它然后我注销并重新登录，通常其中一个修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:26:47.920

这绝对看起来像一个错误;-)

宣布“GitHub for Windows”发布的**[博客文章指出](https://github.com/blog/1127-github-for-windows)**

> *我们确保阅读 Twitter 上的每一个提及。* **如果您发现错误，请将其提交至 support@github.com。** *每封电子邮件都由真人阅读。*

“GitHub for Windows” 经常更新错误修复和改进。为了尽快解决此问题，我强烈建议您向他们发送电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:58:30.473

这个问题没有了。问题在于很久以前放置在 c:\windows 中的过时 libiconv-2.dll 导致与来自 GIT 的相同 DLL 发生冲突。一旦我放弃旧的，GIT 就开始使用鲜艳的颜色！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-20T13:53:19.130

当帐户上的信用卡过期时，我得到了这个确切的错误。

要检查您是否属于这种情况（当然仅限付费帐户），请访问网站 github.com，使用您的帐户登录，然后检查标题。如果有提及您的信用卡的红色错误文本，您就可以了。

这是确切的文字：

> 我们在为您的信用卡结算时遇到问题。请输入一张新卡或致电您的信用卡提供商，了解交易失败原因的详细信息。如有任何问题，您可以联系 support@github.com。在您修复此错误之前，您的私有存储库已被锁定。感谢您的理解。

# xpath - 如何将XPATH“select //td/text() or //td/p/text()”组合成一句话？

> ID：10865111
> 
> 赞同：0
> 
> 时间：2012-06-02T19:06:37.427
> 
> 标签：xpath, path-combine

我想在以下 HTML 的每一行中选择 text() 。但是，我想要的文本要么在**td**元素中，要么在**p**元素中，所以我必须编写两个语句来确保选择每一行。

如何将这两个语句合二为一？

路径：

```
//table/tr/td[not(p)]/text() | //table/tr/td/p/text() 
```

得到所需的结果：

```
['1', '2', '3', '4'] 
```

原始html：

```
<table>
  <tr>
    <td>1</td>
  </tr>
  <tr>
    <td>
      <p>2
    </td>
  </tr>
  <tr>
    <td>3</td>
  </tr>
  <tr>
    <td>
      <p>4
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:21:33.543

可能你想要这样的东西：

```
//table/tbody/tr/td//text()[normalize-space()] 
```

将找到所有非纯空白文本节点的一层或多层`//table/tr/td`。

# e-commerce - Amazon Checkout 的响应式设计

> ID：10865112
> 
> 赞同：0
> 
> 时间：2012-06-02T19:06:41.197
> 
> 标签：e-commerce, amazon, responsive-design

一位客户正在考虑将 Amazon Checkout (http://www.amazonservices.com/content/amazon-checkout-payments.htm/ref=as_left_cba#!customer-experience) 用于其网站的电子商务部分。他们还希望响应式地创建网站。由于 Amazon Checkout 没有响应，我认为这无法完成。有没有人有这方面的经验，或者对 Amazon Checkout 的灵活性有更多的了解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T20:38:39.010

IMO 作为 Web 开发人员，我们的工作是尽最大努力彻底研究所请求的 API 或服务，而且大多数时候 API 或服务的竞争对手也是如此。作为网络工作者，我们有时可以在帮助客户为其技术服务提供商做出最佳选择方面发挥重要作用。这包括在提供有利于开发人员/公司的服务时进行全面披露，以及用非极客、简单的英语清楚地说明利弊。

***话虽这么说***，如果您的客户只是不让步并且坚持使用无响应或乏味的、需求负载的集成（阅读：无响应`<iframe>`），请考虑使用设计和用户体验在您响应良好的站点之间划清界限，以及他们 1998 年以来的丑陋旧代码。

考虑使用[modals](http://twitter.github.io/bootstrap/javascript.html#modals)之类的东西来区分结帐体验，或者简单地使用 a`target="_blank"`来启动新的选项卡或窗口，只要确保用户可以在结帐完成后轻松找到返回您网站的方式。

如果您有兴趣在移动设备大小的屏幕上获得修改后的购物体验，另一种选择可能是考虑创建[一键式按钮。](https://payments.amazon.com/sdui/sdui/helpTab/Checkout-by-Amazon/Integrating-with-Checkout-by-Amazon/Creating-a-Checkout-Button-HTML-Integration#CreatingACheckoutButton)

# python - tkinter 在 for 循环中创建按钮传递命令参数

> ID：10865116
> 
> 赞同：42
> 
> 时间：2012-06-02T19:07:13.530
> 
> 标签：python, tkinter

我正在尝试在`for`循环中在 tkinter 中创建按钮。并且每个循环都将`i`计数值作为命令值中的参数传递出去。因此，当从`command`值调用函数时，我可以知道按下了哪个按钮并采取相应的行动。

问题是，假设长度为 3，它将创建 3 个带有标题的按钮，`**Game 1**`但是`**Game 3**`当按下任何按钮时，打印的值总是`2`，最后一次迭代。所以看起来按钮是作为单独的实体制作的，但`i`命令参数中的值似乎都是一样的。这是代码：

```
def createGameURLs(self):
    self.button = []
    for i in range(3):
        self.button.append(Button(self, text='Game '+str(i+1),
                                  command=lambda: self.open_this(i)))
        self.button[i].grid(column=4, row=i+1, sticky=W)

def open_this(self, myNum):
    print(myNum) 
```

有没有办法在`i`每次迭代中获取当前值以坚持那个特定的按钮？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-06-02T19:15:21.677

将您的 lambda 更改为`lambda i=i: self.open_this(i)`.

这可能看起来很神奇，但这就是正在发生的事情。当您使用该 lambda 定义函数时， open_this 调用不会在您定义函数时获取变量 i 的值。相反，它创建了一个闭包，这有点像给自己的一个注释，说“我应该*在我被调用时*查找变量 i 的值”。当然，该函数是在循环结束后调用的，所以那时 i 将始终等于循环中的最后一个值。

使用该`i=i`技巧会使您的函数在定义 lambda 时存储 i 的当前值，而不是等待稍后查找 i 的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-02T19:13:41.307

这就是闭包在 python 中的工作方式。我自己曾经遇到过这个问题。你可以用[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)这个。

```
for i in range(3):
    self.button.append(Button(self, text='Game '+str(i+1), command=partial(self.open_this, i))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-29T09:55:16.843

只需将您的按钮范围附加到 lambda 函数中，如下所示：

`btn["command"] = lambda btn=btn: click(btn)``click(btn)`传入按钮本身的函数在哪里。这将创建一个从按钮到函数本身的绑定范围。

特征：

*   自定义网格大小
*   响应式调整大小
*   切换活动状态

* * *

```
#Python2
#from Tkinter import *
#import Tkinter as tkinter
#Python3
from tkinter import *
import tkinter

root = Tk()
frame=Frame(root)
Grid.rowconfigure(root, 0, weight=1)
Grid.columnconfigure(root, 0, weight=1)
frame.grid(row=0, column=0, sticky=N+S+E+W)
grid=Frame(frame)
grid.grid(sticky=N+S+E+W, column=0, row=7, columnspan=2)
Grid.rowconfigure(frame, 7, weight=1)
Grid.columnconfigure(frame, 0, weight=1)

active="red"
default_color="white"

def main(height=5,width=5):
  for x in range(width):
    for y in range(height):
      btn = tkinter.Button(frame, bg=default_color)
      btn.grid(column=x, row=y, sticky=N+S+E+W)
      btn["command"] = lambda btn=btn: click(btn)

  for x in range(width):
    Grid.columnconfigure(frame, x, weight=1)

  for y in range(height):
    Grid.rowconfigure(frame, y, weight=1)

  return frame

def click(button):
  if(button["bg"] == active):
    button["bg"] = default_color
  else:
    button["bg"] = active

w= main(10,10)
tkinter.mainloop() 
```

[![在此处输入图像描述](../Images/71ee74f8ac0ab1f431bac8d11d9fb187.png)](https://i.stack.imgur.com/qia60.png) [![在此处输入图像描述](../Images/5df0b4f904c22063f6417d76ae9f3b97.png)](https://i.stack.imgur.com/uFVLI.png)

[![在此处输入图像描述](../Images/e2923dc8a87e78a0d5ba05cd73a469ae.png)](https://i.stack.imgur.com/tMnQl.png)

# c++ - 声明后如何设置 const char*？

> ID：10865117
> 
> 赞同：1
> 
> 时间：2012-06-02T19:07:16.873
> 
> 标签：c++, c

```
//v is a random number 0 or 1
const char *str;
//str = 48 + v; //how to set?? 
```

我尝试`memcpy`并`sprintf`遇到了“const char *”的问题

我想将“str”设置为“v”定义的 0 或 1。但它必须是“ const char* ”类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:14:46.863

我的猜测是您想在第一次声明 const char 后更改它的值，对吗？虽然您不能直接更改 const char* 的值，但您可以将指针值更改为普通变量。例如在此处查看此页面：[C 和 C++ 中的常量](http://www.possibility.com/Cpp/const.html)

这是使用指针更改 const 值可以做和不能做的事情：（从上面的链接中采用）：

```
const int x;      // constant int
x = 2;            // illegal - can't modify x

const int* pX;    // changeable pointer to constant int
*pX = 3;          // illegal -  can't use pX to modify an int
pX = &someOtherIntVar;      // legal - pX can point somewhere else

int* const pY;              // constant pointer to changeable int
*pY = 4;                    // legal - can use pY to modify an int
pY = &someOtherIntVar;      // illegal - can't make pY point anywhere else

const int* const pZ;        // const pointer to const int
*pZ = 5;                    // illegal - can't use pZ to modify an int
pZ = &someOtherIntVar;      // illegal - can't make pZ point anywhere else 
```

这也适用于您尝试做的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:23:04.020

这是处理`const char *`。它是一个指向`const char`. `const char`表示字符不能改变。指针不是常量，所以它可以改变。

当你这样做时：

```
str = 48 + v; 
```

您正在尝试将指针更改为 48 或 49，具体取决于是什么`v`。这是荒谬的。如果它编译，它将指向随机内存。您想要的是将“str”指向的内容更改为 0 或 1。

由于它只能指向常量字符，它只能指向定义为值的东西，用引号引起来。因此，例如，可以将其设置为指向“0”，即常数字符或“1”，即常数字符。所以你可以做这样的事情：

```
str = "0"; // point to a constant character string "0"
if( v )
    str = "1"; // point to a constant character string "1" 
```

请注意，由于`str`指向常量字符，您*不能*修改它指向的内容：

```
*str = '1'; // Won't work because you are trying to modify "0" directly. 
```

# java - 来自服务器的字符串无法转换为 JSONObject？

> ID：10865118
> 
> 赞同：2
> 
> 时间：2012-06-02T19:07:19.887
> 
> 标签：java, android, json, http

我的服务器通过 HTTP POST 响应的主体返回一个 JSON 对象，但是当我的应用程序尝试将字符串转换为 JSONObject 时出现此错误：

```
06-02 09:05:34.380: E/JSONException_MyAppService(19913): org.json.JSONException: Value {"VALS":{"VAL1":"hello","VAL2":"hello2","VAL3":"hello3"}} of type java.lang.String cannot be converted to JSONObject 
```

看起来我的服务器正在返回可接受的 JSON 编码字符串，但它不会转换为 JSONObject。我什至将服务器响应头的内容类型更改为“application/json”。请帮我解决这个问题，我一直在尝试一整天。

编辑-我使用以下代码：

```
try {
    ResponseHandler<String> responseHandler=new BasicResponseHandler();
    String responseBody = client.execute(post, responseHandler);
    JSONObject response=new JSONObject(responseBody);
} catch (ClientProtocolException e) {
    e.printStackTrace();
    Log.e("ClientProtocol_"+TAG,""+e);
} catch (ClientProtocolException e) {
    e.printStackTrace();
    Log.e("IO_"+TAG,""+e);
} catch (ClientProtocolException e) {
    e.printStackTrace();
    Log.e("JSONException_"+TAG,""+e);
} 
```

我还尝试了 imran khan 的建议：

```
try {
    HttpResponse response = client.execute(post);
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        String retSrc = EntityUtils.toString(entity); 
        // parsing JSON
        JSONObject result = new JSONObject(retSrc); //Convert String to JSON Object
        JSONArray tokenList = result.getJSONArray("VALS");

        JSONObject oj = tokenList.getJSONObject(0);
        String token = oj.getString("VAL1"); 
        String token1 = oj.getString("VAL2");
        String token11 = oj.getString("VAL3");  
    }
} catch (ClientProtocolException e) {
    e.printStackTrace();
    Log.e("ClientProtocol_"+TAG,""+e);
} catch (ClientProtocolException e) {
    e.printStackTrace();
    Log.e("IO_"+TAG,""+e);
} catch (ClientProtocolException e) {
    e.printStackTrace();
    Log.e("JSONException_"+TAG,""+e);
} 
```

:'( :'(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:10:05.983

你怎么样？它应该与：

```
JSONObject object = new JSONObject (yourString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:31:56.300

您可以将字符串转换为 json，如下所示：

```
 String str="{\"VALS\":{\"VAL1\":\"hello\",\"VAL2\":\"hello2\",\"VAL3\":\"hello3\"}}";
  try {
    JSONObject result = new JSONObject(str);
    JSONObject resultf = result.getJSONObject("VALS");
    Toast.makeText(this, resultf.getString("VAL1").toString(), Toast.LENGTH_SHORT).show();
    Toast.makeText(this, resultf.getString("VAL2").toString(), Toast.LENGTH_SHORT).show();
    Toast.makeText(this, resultf.getString("VAL3").toString(), Toast.LENGTH_SHORT).show();
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T20:02:15.867

```
try {
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();

        if (entity != null) {
           String retSrc = EntityUtils.toString(entity); 
           // parsing JSON
            JSONObject result = new JSONObject(retSrc); //Convert String to JSON Object

            JSONObject object2 = result.getJSONObject("VALS");

             String token = object2.getString("VAL1"); 
             String token = object2.getString("VAL2");
             String token = object2.getString("VAL3");  
        }
}
 catch (Exception e) {
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T04:03:31.557

我修好了它！这完全是我的服务器的错。原来我的服务器响应不正确。发生的事情是 Web 框架中存在错误，更新到最新版本后，问题自行解决。我猜旧版本的 Web 框架返回了不正确的内容类型响应标头，或者使用了一些奇怪的编码。

所以这里大家的Java代码应该是100%正确的，因为这里Java没有错。感谢您的所有努力！

米格尔的回答是最接近的解释，所以我会接受他的回答。

# jquery - JQPlot Jquery Legend 在 MVC3 中的绘图后面，颜色被隐藏（未显示）。我如何在屏幕上显示它们

> ID：10865120
> 
> 赞同：0
> 
> 时间：2012-06-02T19:07:44.340
> 
> 标签：jquery, asp.net-mvc-3, jqplot

如何将图例移动到网格旁边？我可以看到图例，但看不到文本旁边的颜色。它只显示 Series1 Series 2 等，但旁边没有颜色。

我正在使用 JQuery 选项卡

```
<form><fieldset>
<div>
<div id="tabs" title="Graphs">
        <ul>
            <li><a href="#tabs-4">Graph 1</a></li>
</ul>
</div>

<div id="tabs-4"><div id="chart1"/></div>
</div>

</fieldset></form>

$(document).ready(function(){
    var s1 = [200, 600, 700, 1000];
    var s2 = [460, -210, 690, 820];
    var s3 = [-260, -440, 320, 200];
    // Can specify a custom tick Array.
    // Ticks should match up one for each y value (category) in the series.
var ticks = ['May', 'June', 'July', 'August'];

var plot1 = $.jqplot('chart1', [s1, s2, s3], {
    // The "seriesDefaults" option is an options object that will
    // be applied to all series in the chart.
    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        rendererOptions: {fillToZero: true}
    },
    // Custom labels for the series are specified with the "label"
    // option on the series option.  Here a series option object
    // is specified for each series.
    series:[
        {label:'Hotel'},
        {label:'Event Regristration'},
        {label:'Airfare'}
    ],
    // Show the legend and put it outside the grid, but inside the
    // plot container, shrinking the grid to accomodate the legend.
    // A value of "outside" would not shrink the grid and allow
    // the legend to overflow the container.
    legend: {
        show: true,
        placement: 'outsideGrid'
    },
    axes: {
        // Use a category axis on the x axis and use our custom ticks.
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ticks
        },
        // Pad the y axis just a little so bars can get close to, but
        // not touch, the grid boundaries.  1.2 is the default padding.
        yaxis: {
            pad: 1.05,
            tickOptions: {formatString: '$%d'}
        }
    }
}); 
```

});

图例出现在图表后面。如何将它移到网格旁边？

我已经尝试过 location:nw、offset、placement，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:25:06.743

添加了 jquery.jqplot.css 并且它起作用了。

# python - 从 Python 命令行调用 Python 时，为什么 Python 找不到并运行我的脚本？

> ID：10865121
> 
> 赞同：1
> 
> 时间：2012-06-02T19:07:44.497
> 
> 标签：python, windows, directory, execute

我在 python 命令行中（使用 python 2.7），并尝试运行 Python 脚本。我的操作系统是 Windows 7。我已将我的目录设置为包含我所有脚本的文件夹，使用：

`os.chdir("location")`.

`os.getcwd()`返回此位置。

当我输入：

`python myscript.py`

我收到此错误：

`File "<stdin>", line 1`

```
python myscript.py
              ^ 
```

`SyntaxError: invalid syntax`.

我做错了什么？

我试图运行的脚本的第一行未注释：

`from game import GameStateData`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T19:11:36.653

听起来您正试图从 Python 中运行您的脚本。这不是它的工作原理。如果你想运行 myscript.py，你需要在*系统*命令提示符下运行，而不是从 Python 解释器内部运行。（例如，通过从开始菜单中选择“命令提示符”。我认为它通常在“附件”或类似的东西下。）从那里您需要使用 CD 命令更改到脚本所在的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:17:24.857

根据您提供的其他信息，看起来您*确实是在 Python 内部发出命令。*

*编辑*：也许混淆的一部分来自这个词`command line`。您在“Windows 命令”shell 和“Python shell”中***都处于命令行。***

这是我在Python shell中在*命令行中得到的：*

```
D:\Users\blabla \Desktop>python

Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.

>>> python testit.py
  File "<stdin>", line 1
    python testit.py
                ^
SyntaxError: invalid syntax
>>> 
```

或这个：

```
>>> os.chdir("..")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'os' is not defined
>>> 
```

我的建议是使用该`cmd`命令打开一个 Windows 命令 shell 窗口，然后`python myscript.py`从那里发出你的命令。

如需更多帮助，请查看您的代码，至少查看发生错误的前几行以及确定发出 python 命令的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T19:12:19.580

正如其他答案所表明的那样，您可能无意中处于 Python shell 中。但是如果你真的想从那里运行你的脚本，试试`execfile("myscript.py")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T00:56:47.503

在 Windows shell 上运行`echo %PATH%`，并检查您的 .py 是否在任何路径下。

# facebook - facebook“发送”按钮打开一个空白框

> ID：10865122
> 
> 赞同：2
> 
> 时间：2012-06-02T19:08:35.887
> 
> 标签：facebook, button, send

我的网站是 alonsart.com...单击我网站上的发送按钮时...打开一个空白框...

这就是我的代码的样子：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'my_id', // App ID
      channelUrl : '//alonsart.com/index.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

当然还有 div

```
 <div style="margin-top:20px" class="fb-like" data-send="true" data-width="450" data-show-faces="true"></div> 
```

知道为什么单击时它不会显示任何内容吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:18:21.363

不知道您是否已经解决了问题，但为了将来参考，我发现Facebook [ [https://developers.facebook.com/tools/debug ] 提供的](https://developers.facebook.com/tools/debug)**调试**工具是解决此问题的救星我正在处理的网站上的问题。

你给它一个 URL，它会抓取它，并给你一个它到底有什么问题的细分（从开放图的角度来看）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:43:30.783

虽然这个问题已经问了很长时间了，但它可能会帮助那些寻找偶尔出现的问题的人喜欢和发送插件。

昨天喜欢和发送插件也停止了对我的网站的工作，并且实施没有任何问题。[甚至http://developers.facebook.com](http://developers.facebook.com)上的发送按钮昨天也停止工作，今天又恢复了。

因此，请检查该插件是否也在其他网站上运行。如果不是，那么问题很可能出在 Facebook 的尽头，而不是您的尽头。

# iphone - ipod/iphone陀螺仪数据的单位？

> ID：10865126
> 
> 赞同：0
> 
> 时间：2012-06-02T19:09:03.280
> 
> 标签：iphone, xcode, ipod-touch

这些事情都不清楚。（CMGyroData）基本上x，y和z给出的1.Data的单位是什么？

一个轴数据的最小和最大变化是多少（例如，x轴）

这个 x 数据是否代表围绕 x 轴的旋转（或摆动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:12:17.633

要看的地方是文档：http: [//developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMGyroData_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMGyroData_Class/Reference/Reference.html)。

> `x`
> 
> X 轴旋转速率，以弧度每秒为单位。符号遵循右手法则：如果右手绕着 X 轴，拇指尖指向正 X，则正向旋转是朝向其他四根手指尖的方向。

等等

# iphone - Apple 会批准使用自签名证书通过 HTTPS 进行通信的应用程序吗？

> ID：10865127
> 
> 赞同：2
> 
> 时间：2012-06-02T19:09:12.793
> 
> 标签：iphone, https, nsurlconnection, self-signed

我对移动应用程序开发和 HTTPs 非常陌生。请多多包涵……我需要你的建议！

我的 iPhone 应用程序使用自签名证书通过 HTTPS 与服务器通信。

为了解决我的服务器不受信任的警告消息的情况，我使用了 NSURLConnection 委托方法和这种方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
    {
        [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    }

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
} 
```

1.  我的第一个问题是：Apple 会批准这种方法吗？在与使用自签名证书的服务器通信时，这是一种处理 HTTPS 请求的允许且合法的方式吗？

2.  当使用上述方法表示同意并仍连接到不受信任的服务器时，我的数据是否将通过 HTTPs 发送并且会被加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:16:12.540

人们总是使用 Apple 应用程序这样做，无论好坏，都不会被应用商店拒绝。但是，更安全的方法是 (1) 使用官方签名的证书，或 (2) 让您的应用程序仅接受您的自签名证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:16:02.323

1.  方法不存在可能导致拒绝的问题。
2.  如果请求是 POST 类型，则数据将被加密。但是为了提高安全性，如果需要，您可以为您的数据添加更多加密。

# sql-server - 数据库调优顾问：推荐索引和统计信息的命名

> ID：10865128
> 
> 赞同：2
> 
> 时间：2012-06-02T19:09:15.630
> 
> 标签：sql-server, database-tuning-advisor

使用 SQL Server 数据库优化顾问时，它会为其推荐的对象（索引、统计信息和视图）生成默认名称。这里有几个：

![在此处输入图像描述](../Images/de200f51c842bad2273352c5469c8875.png)

**这些名字太可怕了。**

是否有一种有效的方法可以为所有这些对象分配合理的名称？我想一次应用大约 100 条建议，而且我不想手动为每个建议输入名称。

这是一个“好”名字的例子：`IX_StudyCourses_Name`

# django - django 使用 @user_passes_test 装饰器上传 302 错误

> ID：10865129
> 
> 赞同：0
> 
> 时间：2012-06-02T19:09:50.943
> 
> 标签：django, uploadify

嗨，我在我的一个 django 应用程序中使用 Uploadify。它工作正常。但是当我使用`@user_passes_test`装饰器时，uploadify 得到一个 Http 302 错误。只有具有特定权限的登录用户才能使用文件上传。

我的观点是这样的：

```
@user_passes_test(lambda u: u.has_perm('cylebrations.can_multiupload'))
def myFileHandler(request):
    if request.method == 'POST':
        for field_name in request.FILES:
            image=Image(gallery_id=gallery.id, image=request.FILES[field_name])
            image.save()
            return HttpResponse("ok", mimetype="text/plain")
    return render_to_response('gallery_upload.html', context_instance=RequestContext(request)) 
```

当我在视图中使用以下内容而不是装饰器时，我也会收到 302 错误。

```
if not request.user.has_perm('cylebrations.can_multiupload'):
    return HttpResponse("You can't upload.") 
```

看起来视图没有获取用户信息。有没有办法通过uploadifys`postData`设置传递必要的用户信息？如何使用带有 django 权限的 uploadify？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:15:51.197

这是一个论坛条目，显示了它是如何完成的： [http ://www.uploadify.com/forum/#/discussion/7195/uploadify-3-0-beta-with-django/p1](http://www.uploadify.com/forum/#/discussion/7195/uploadify-3-0-beta-with-django/p1)

它包含指向[另一个 stackoverflow 问题](https://stackoverflow.com/questions/1348669/uploading-multiple-files-with-django)的链接，这也可能有帮助。

# php - 如果用户不存在不显示 jQuery 和排序

> ID：10865134
> 
> 赞同：2
> 
> 时间：2012-06-02T19:10:18.083
> 
> 标签：php, jquery, ajax

我已经构建了一个应用程序，用户可以注册并链接他们的 Twitter 帐户。

如果有人出于垃圾邮件的目的创建了一个用户，但是 Twitter 然后删除了这个用户，但是他们仍然留在我的网站上。如果另一个用户随后尝试关注他们，我会回复一条消息，说用户不再有效，但这已成为一个严重的问题，并且有很多垃圾邮件帐户。

我当前的解决方案是在页面加载时，使用 jQuery 检查是否加载了 twitter 用户图像，如果没有将该用户设置为不显示。

然而，我想知道，有没有办法在输出我的页面之前检查，所以这样我的用户不会看到一个用户列表，当页面加载时他们中的 X 消失了，但是所有活跃的用户列表？

谢谢

* * *

这是我页面上的 php，我知道它是旧的，但有没有办法检查用户是否存在 Twitter 并将其与我目前拥有的混合？

对不起，我对 PHP 很陌生！

```
$rs = mysql_query("select produgg_users.id, twitterUser, coff, credits from produgg_users where twitterUser != '' and active !='' and credits >= coff and  
                produgg_users.id IN (select concat_ws(',', id) from produgg_users where credits > 0 and id != ".$usersClass->userID().") and produgg_users.id NOT IN (select concat_ws(',', followedID) from produgg_activity where followerID = '".$usersClass->userID()."') and produgg_users.id NOT IN (select concat_ws(',', userid) from produgg_featured) ORDER BY coff DESC LIMIT 30;") or die(mysql_error());    

$nr = @mysql_num_rows($rs);

if($nr != 0) {
    print "<h2>More Friendr Users!</h2><div>";

    while($row=@mysql_fetch_object($rs))
    {
        $divLeft = '<div class="user-box" id="thediv_'.$row->id.'"><div class="twithandlepic"><img src="http://api.twitter.com/1/users/profile_image/';
        $divRight = '<div class="twithandle">';
        $clearDiv = '<div style="clear:both;"></div>';
        $row->coff = $row->coff - 1;

    print $divLeft.strip_tags($row->twitterUser)."?size=bigger\" style=\"width:73px; height:73px;\"/><br \/>".$row->twitterUser.$divRight."<a href='javascript:void(0);'   id='vote_$row->id' class='getPoint'>Get $row->coff <input type='hidden' value='$row->coff' class='credoff' name='credoff'/> credit(s)</a><br /></div>$clearDiv</div></div>"; 

} print "</div>";

echo " <a href='earn-credits.php' class='refreshlist'>Refresh</a>";

}else{

    print "<p>No twitter users to show</p>";    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:23:10.023

您可以发送一个请求`twitter.com/username`并查看响应代码：如果用户存在，则为 200，如果不存在，则为 404。例如，尝试[http://twitter.com/somefakeperson](http://twitter.com/somefakeperson)，你会得到 404。

使用 CURL 它看起来像这样：

```
 while($row=@mysql_fetch_object($rs)) 
    {
      $ch = curl_init('http://twitter.com/'.$row->twitterUser);
      curl_exec($ch);

      if(!curl_errno($ch))
      {
       $info = curl_getinfo($ch);
       if($info['http_code'] == '200') {
        $divLeft = '<div class="user-box" id="thediv_'.$row->id.'"><div class="twithandlepic"><img src="http://api.twitter.com/1/users/profile_image/';
        $divRight = '<div class="twithandle">';
        $clearDiv = '<div style="clear:both;"></div>';
        $row->coff = $row->coff - 1;

        print $divLeft.strip_tags($row->twitterUser)."?size=bigger\" style=\"width:73px; height:73px;\"/><br \/>".$row->twitterUser.$divRight."<a href='javascript:void(0);'   id='vote_$row->id' class='getPoint'>Get $row->coff <input type='hidden' value='$row->coff' class='credoff' name='credoff'/> credit(s)</a><br /></div>$clearDiv</div></div>"; 

       }
     }
     curl_close($ch);
   } 
```

顺便说一句，每当您点击无效用户以以某种方式删除或标记该用户时，将更新发送回数据库也可能会很好。然后，您可以在未来直接在数据库级别过滤掉这些用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:21:04.407

Twitter API 调用[GET users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)允许您查看用户是否处于活动状态。因此，例如在此处向端点发出 REST API 调用：

```
https://api.twitter.com/1/users/lookup.json?
    screen_name=twitterapi&include_entities=true 
```

如果用户存在，会给你一个 HTTP 200 OK 响应。但是，屏幕名称不存在的调用会返回 404，例如：

```
https://api.twitter.com/1/users/lookup.json?
    screen_name=dsklfjdkl&include_entities=true 
```

在向用户显示页面之前，您的服务器可以检查用户名是否存在（如果不存在，只需将它们从页面中删除/在数据库中将它们标记为已死）。

# iphone - iOS自定义navigationBar按钮项

> ID：10865141
> 
> 赞同：0
> 
> 时间：2012-06-02T19:11:38.420
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我想设置像 safari 这样的 navBar 按钮，如下图所示。但是，我只能为工具栏按钮设置自定义图像，但方形按钮容器仍然存在，尽管我设置了普通样式。如何到达？谢谢

![在此处输入图像描述](../Images/96155c9b6e686ca2b2fda8e320aba46c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:27:35.673

`Plain`仅适用于工具栏而不是导航栏，这是实现无边框的唯一方法。您必须在导航栏上使用自定义 UIButton 才能获得相同的结果。

如果您需要类似的图标，可以查看[默认图标](http://defaulticon.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:30:11.990

使用 UIBarButtonItem 方法创建条形按钮

```
- (id)initWithCustomView:(UIView *)customView; 
```

并使用 UIButtonTypeCustom 类型的 UIButton 创建自定义视图

# ruby - ruby - 懒惰地遍历数组

> ID：10865142
> 
> 赞同：3
> 
> 时间：2012-06-02T19:12:09.153
> 
> 标签：ruby, foreach, iteration

我想遍历数组的一部分。例如，我尝试打印除第一个元素之外的所有元素：

```
array[1..-1].each {|e| puts e} 
```

而是`array[1..-1]`构建一个新的`Array`. 如果`array`非常大，那就太浪费了。另一种直接的方法：

```
(1...array.size).each { |i| puts array[i] } 
```

有用。但我想知道是否有一些更优雅的技巧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T19:43:46.327

Ruby 2.0 将发布[Lazy enumerables （好消息！），现在我们可以使用](http://bugs.ruby-lang.org/issues/4890)[enumerable-lazy](https://github.com/yhara/enumerable-lazy)之类的 gem 来预热引擎：

```
require 'enumerable/lazy'
xs.lazy.drop(1).each { |x| puts x } 
```

这还不错，但从概念上讲，它并不完全适用于您的情况，因为您已经有一个数组，而不是您必须遍历以丢弃元素的惰性对象（链表）（好吧，我们只是在这里丢弃一个元素，它不会破坏交易）。因此，您可以抽象出您的解决方案（使用范围的解决方案），就`Enumerable#each_from(start_index)`好像您打算经常使用它一样。

更多：您还可以创建*enumerable-lazy* `Array#lazy_slice(range)`的扩展，这将返回一个`Enumerable#lazy`对象。它看起来也很不错：`xs.lazy_slice(1..-1).each { |x| puts x }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:23:05.330

```
array.each_with_index {|x, i| puts x unless i.eql?0} 
```

# python - 描述符 'date' 需要一个 'datetime.datetime' 对象，但收到了一个 'unicode'

> ID：10865143
> 
> 赞同：3
> 
> 时间：2012-06-02T19:12:10.427
> 
> 标签：python, django, django-piston

我正在使用活塞为我正在编写的处理重复日历事件的应用程序编写 JSON api。

我的 API 适用于常规事件，当我尝试添加逻辑来处理重复事件时，我开始收到以下错误：

> 描述符 'date' 需要一个 'datetime.datetime' 对象，但收到了一个 'unicode'

这是我的`handlers.py`：

```
from piston.handler import BaseHandler
from lessons.models import NewEvent, EachEvent
import calendar
from datetime import datetime, timedelta

class CalendarHandler(BaseHandler):
allowed_methods = ('GET',)
model = EachEvent
fields = ('actualDate', ('manager', ('firstName', 'lastName')))

def next_date(startDate, recurrence, rangeStart):
    sd = startDate
    while (sd < rangeStart):
        print sd;
        sd += datetime.timedelta(recurrence)
    return sd

def read(self, request, uid, month, year):
    qs = NewEvent.objects.filter(manager__boss = request.user).filter(endDate__gte=datetime.date(year, month, 1)).filter(startDate__lte=datetime.date(year, month, calendar.mdays[month]))
    lessonList = []
    qsList = list(qs)
    for l in qsList:
        if l.frequency == 0:
            x = EachLesson()
            x.lessonID = l.id
            x.actualDate = l.startDate
            x.manager = l.manager
            lessonList.append(x)
        else:
            sd = next_date(l.startDate, l.frequency, datetime.date(year, month, 1))
            while (sd <= datetime.date(year, month, calendar.mdays[month])):
                x = EachLesson()
                x.lessonID = l.id
                x.actualDate = sd
                x.manager = l.manager
                lessonList.append(x)
                sd += datetime.timedelta(recurrence)

    return lessonList 
```

`frequency`是一个 IntegerField, `actualDate`, `startDate`, 并且`endDate`都是 DateField。

我的 URLconf 接受 uid、年份和月份，所有这些都作为参数传递给 CalendarHandler.read 方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T19:19:04.373

通过使用`from datetime import datetime, timedelta`，您已经从 datetime 模块导入了 datetime 类型。因此，当您调用时，`datetime.date`您正在调用 datetime 类型的方法。

我认为您想要的是使用 datetime 模块中的日期类型：

1.  将您的导入更改为`from datetime import datetime, timedelta, date`.
2.  调用`date(year, month, 1)`而不是`datetime.date(year, month, 1)`.

# android - ListView 获取滚动位置？

> ID：10865150
> 
> 赞同：6
> 
> 时间：2012-06-02T19:12:57.953
> 
> 标签：android

我正在使用 MergeAdapter（来自 Mark Murphy 的优秀项目系列）。您将它与 ListView 一起使用。我正在尝试在刷新时重建适配器的内容（而不是刷新“就地”并调用 notifyDataSetChange()）。

我想获取列表视图的 y-scroll 值，以便在重建列表后重置为该值。这似乎不可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:18:36.527

为您的列表视图实现 OnScrollListener。

```
@Override
public void onScroll(AbsListView absListView, int firstVisible, int visibleCount, int totalCount) { 
//firstvisible is your first visible item in the list
} 
```

# python - 使用 ord() 将字母转换为整数（非常基础）

> ID：10865152
> 
> 赞同：5
> 
> 时间：2012-06-02T19:13:05.890
> 
> 标签：python, excel, ord

Python初学者在这里。尝试通过阅读这里和那里的代码来学习。在一个旨在用python打开Excel文件的程序中遇到了这个问题。此函数执行一项简单的工作——使用 ord() 将 Excel 列字母标签（'Z'、'BB'或'CCC'）转换为 int。在我看到这部分转换代码之前，我理解得很好：

```
if clen == 1:
    return ord(column[0]) - 64
elif clen == 2:
    return ((1 + (ord(column[0]) - 65)) * 26) + (ord(column[1]) - 64) 
```

**(1 + (ord(column[0]) - 65)**而不是再次使用**(ord(column[0]) - 64)**的目的是什么。“1 +”似乎是多余的。这有目的吗？

这是完整的功能：

```
def column_index_from_string(column, fast=False):
    """Convert a column letter into a column number (e.g. B -> 2)"""

    column = column.upper()

    clen = len(column)

    if not fast and not all('A' <= char <= 'Z' for char in column):
        msg = 'Column string must contain only characters A-Z: got %s' % column
        raise ColumnStringIndexException(msg)

    if clen == 1:
        return ord(column[0]) - 64
    elif clen == 2:
        return ((1 + (ord(column[0]) - 65)) * 26) + (ord(column[1]) - 64)
    elif clen == 3:
        return ((1 + (ord(column[0]) - 65)) * 676) + ((1 + (ord(column[1]) - 65)) * 26) + (ord(column[2]) - 64) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T19:18:19.310

不，它没有目的。`1+x-65 = x-64`即使在 Python 中 :-)

可能最初的开发人员认为 65 的含义比 64 更容易理解。不过，两者都是幻数，最好通过将它们分配给变量来为数字命名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T14:29:08.647

的目的 `-65 +1`主要是原始开发人员尝试优化的结果。我通常使用以下函数将 Excel 列转换为整数值：

```
return reduce(lambda x,y: x*26+ord(y)-ord('A')+1, column.upper(), 0) 
```

有趣的部分是`ord(y)-ord('A')+1`为您提供了问题的关键。假设 column 变量包含一个`A-Z`仅有效的 Excel 列字符串，则列号实际上是给定 char 从`A`char 的移位加一。`ord('A')`结果会给你`65`。开发人员用`ord('A')`其最终值替换。

也就是说，是的，这似乎是一种避免调用的*优化*`ord`，但它确实混淆了代码并消除了可读性，因为我认为获得的时间很少。如果此函数确实是在程序中被调用数百万次的关键函数，那么这不是必须编写来优化代码的代码 - 您将创建一个预先计算的字典，其中映射了所有 Excel 列名条目到它们的整数值，或者类似这样的东西，这将是非常有效的。

在这里，在性能与可读性和代码维护之间进行权衡是一个糟糕的选择；至少您会期待评论解释`# 65 = ord('A')`，并且您不会在这里提出有关它的问题。

关键点：保持代码逻辑，简单，可读，易于维护，不要为了糟糕的优化而改变它。

# php - 从 WordPress 中删除默认网站图标

> ID：10865154
> 
> 赞同：3
> 
> 时间：2012-06-02T19:13:23.683
> 
> 标签：php, wordpress, favicon

如何从 WordPress 主题中删除默认的网站图标链接？我知道我可以替换 favicon，但我正在寻找使用 remove_action 或类似的东西，我可以放在我的 functions.php 中。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-06-23T11:09:32.450

我在主题`functions.php`文件中使用了以下过滤器来删除`wp_head()`函数中输出的原始 WordPress favicon。

```
add_filter( 'get_site_icon_url', '__return_false' ); 
```

此过滤器将所选图像的 URL 删除为网站图标，因此当 WordPress 检查 URL 以显示它时，它会返回 false。

还有一个选项可以创建一个在以下操作中显示网站图标的函数：

*   `wp_head`
*   `admin_head`
*   `wp_head`

使用以下方式：

```
add_action( 'wp_head', 'prefix_favicon', 100 );
add_action( 'admin_head', 'prefix_favicon', 100 );
add_action( 'wp_head', 'prefix_favicon', 100 );
function prefix_favicon() {
    //code of the favicon logic
    ?>
        <link rel="icon" href="LINK TO FAVICON">
    <?php
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-01T23:46:56.330

这个问题似乎很老，但 WordPress 5.4 (03/2020) 的新问题是默认的 WP-Favicon，如果你不想要它可能会很烦人。从 5.4 版开始，每个更新的网站也会激活它。当然，您可以使用自定义程序以正常方式对其进行更改，但不能删除它或需要使用透明图像或其他东西来破解它。像那样。

> 试试这个小功能来删除图标（来自 WP 5.4！），就好像它从未存在过一样。

```
add_action( 'do_faviconico', 'magic_favicon_remover');
function magic_favicon_remover() {
    exit;
} 
```

**有关更多信息，请查看以下内容：**

*   [https://developer.wordpress.org/reference/hooks/do_faviconico/](https://developer.wordpress.org/reference/hooks/do_faviconico/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T19:15:31.557

你可以删除这一行`header.php`：

```
<link rel="icon" type="image/png" href="http://www.example.com/favicon.png" /> 
```

它不会自动加载，因此您无法使用`filter`/将其删除`remove_action`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-13T09:41:05.027

如果存在物理 /favicon.ico 文件，则什么也不做，让服务器处理请求。例如[www.domain.com/favicon.ico](http://www.domain.com/favicon.ico)

[参考](https://make.wordpress.org/core/2020/02/19/enhancements-to-favicon-handling-in-wordpress-5-4/)

# javascript - 设置在选项卡中打开时如何打开自定义大小的 Firefox 窗口？

> ID：10865157
> 
> 赞同：1
> 
> 时间：2012-06-02T19:13:45.077
> 
> 标签：javascript, jquery, firefox

作为一个真实世界使用的 javascript 学习体验，我正在尝试编写一个应用程序，该应用程序将弹出一个 600x400 的窗口，其中包含用户 ID 和密码列表。问题是我将 Firefox 设置为在选项卡中显示新窗口，我不想更改该设置。我尝试过的事情：

1.  我在我的桌面上安装了 apache，所以我尝试使用我需要的内容创建一个网页，但当然它只是在选项卡中打开。我无论如何都找不到将要在新窗口中打开的页面列入白名单。

2.  我尝试了一个使用 jquery ui 对话框的书签。

`<a href="javascript:(function()document.head.appendChild(document.createElement('script')).src='/passwords/passwords_test.js';})();">Test load js</a>`

此代码适用于本地主机打开的页面，但不适用于来自网络的页面。我的 js 文件的路径似乎附加到页面 url，然后 firebug 显示 404 找不到页面错误。如果我能弄清楚为什么会发生这种情况，也许我可以让它发挥作用。

1.  我尝试使用 bash 终端。$ firefox -new-window -width 600 -height 400。这在新窗口中打开了 firefox，但它与我打开的 firefox 窗口大小相同。谷歌搜索显示忽略 -width 和 -height 参数是一个老错误。解决方法是 $ firefox -no-remote -new-window "www.cnn.com" -width 600 -height 400。这有效，但前提是 firefox 没有运行。如果 firefox 正在运行，您会收到一条错误消息，指出 firefox 没有响应，您必须关闭该 firefox 实例或重新启动计算机。

所以我被卡住了，有人有什么想法吗？

# c# - DataGridView 列显示虽然标记为不可见

> ID：10865164
> 
> 赞同：5
> 
> 时间：2012-06-02T19:14:19.587
> 
> 标签：c#, winforms

我在这里有一个绑定到绑定源生成代码的 DGV。

```
 // dgvDocumentList
        // 
        this.dgvDocumentList.AllowUserToAddRows = false;
        this.dgvDocumentList.AllowUserToDeleteRows = false;
        this.dgvDocumentList.AutoGenerateColumns = false;
        this.dgvDocumentList.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dgvDocumentList.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.dMTitleDataGridViewTextBoxColumn,
        this.urlCol,
        this.idCol});
        this.dgvDocumentList.DataSource = this.docListFetchBindingSource;
        this.dgvDocumentList.Dock = System.Windows.Forms.DockStyle.Fill;
        this.dgvDocumentList.Location = new System.Drawing.Point(3, 3);
        this.dgvDocumentList.MultiSelect = false;
        this.dgvDocumentList.Name = "dgvDocumentList";
        this.dgvDocumentList.ReadOnly = true;
        this.dgvDocumentList.SelectionMode = System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect;
        this.dgvDocumentList.Size = new System.Drawing.Size(336, 493);
        this.dgvDocumentList.TabIndex = 0;
        this.dgvDocumentList.CellDoubleClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.dgvDocumentList_CellContentDoubleClick);
        this.dgvDocumentList.SelectionChanged += new System.EventHandler(this.dgvDocumentList_SelectionChanged); 
```

列代码在这里。

```
 // dCBModLinkDataGridViewTextBoxColumn
        // 
        this.dCBModLinkDataGridViewTextBoxColumn.DataPropertyName = "DCBModLink";
        this.dCBModLinkDataGridViewTextBoxColumn.HeaderText = "DCBModLink";
        this.dCBModLinkDataGridViewTextBoxColumn.Name = "dCBModLinkDataGridViewTextBoxColumn";
        this.dCBModLinkDataGridViewTextBoxColumn.ReadOnly = true;
        this.dCBModLinkDataGridViewTextBoxColumn.Visible = false;
        // 
        // dCBIDDataGridViewTextBoxColumn
        // 
        this.dCBIDDataGridViewTextBoxColumn.DataPropertyName = "DCBID";
        this.dCBIDDataGridViewTextBoxColumn.HeaderText = "DCBID";
        this.dCBIDDataGridViewTextBoxColumn.Name = "dCBIDDataGridViewTextBoxColumn";
        this.dCBIDDataGridViewTextBoxColumn.ReadOnly = true;
        this.dCBIDDataGridViewTextBoxColumn.Visible = false;
        // 
        // eQModModelNumberDataGridViewTextBoxColumn
        // 
        this.eQModModelNumberDataGridViewTextBoxColumn.AutoSizeMode = System.Windows.Forms.DataGridViewAutoSizeColumnMode.Fill;
        this.eQModModelNumberDataGridViewTextBoxColumn.DataPropertyName = "EQModModelNumber";
        this.eQModModelNumberDataGridViewTextBoxColumn.HeaderText = "Model Number";
        this.eQModModelNumberDataGridViewTextBoxColumn.Name = "eQModModelNumberDataGridViewTextBoxCol 
```

如您所见，dcbModLinkDataGridViewTextBoxColumn 的列定义显示 visble = false; 它也在属性表中说明了这一点。运行时它仍然在应用程序中可见。

如果我修改列表中列的位置，我会得到以下结果。除了它们出现在列列表中的顺序外，没有任何变化。

DCBID(可见)--DCBModLink(不可见)--EQModModelNumber(可见)

DCBModLink(可见)--DCBID(不可见)--EQModModelNumber(可见)

EQModModelNumber(可见)--EQModModelNumber(不可见)--DCBID(不可见)

我通过将我想要的列留在第一个插槽中掩盖了这个问题的症状，但我不知道为什么这个特定的 DGV 会以这种方式运行。无论列在什么位置，同一表格上还有另一个 DGV 可以正常工作。

我看了这里：[First Column Not Hiding in datagridview](https://stackoverflow.com/questions/2342107/first-column-not-hiding-in-datagridview)，这里[datagridview id 列不会隐藏](https://stackoverflow.com/questions/6359234/datagridview-id-column-will-not-hide) 但是他们只是像我一样将有问题的列移到了右边。

所以。我的问题是。

1.  是否有其他我不知道的设置可以覆盖可见性参数？

2.  有没有其他人看到过这个，他们是如何阻止它的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:37:38.143

我为此使用了我自己的扩展方法..并且效果很好..此方法也以编程方式设置 dgv 客户端高度和宽度..仅使用此 ext 方法

1-) 将 dgv 添加到您的表单中

2-）创建列和标题文本列表作为您要向用户显示的内容

3-) 将该方法称为`yourDGV.showTheGivenColumns(your params, yourparams, yourparams)`

PS：我将名称更改为英文并添加英文摘要..这是代码..

```
/// <summary>
  /// when this method called, it sets visible = false the columns where not in List of column names
  /// The column names List count and header List count must be the same number
  /// </summary>
  /// <param name="dgvName">DGV which calls this ext method</param>
  /// <param name="Method">the data source load method of the DGV which calls this ext method</param>
  /// <param name="ColumnName">The columnNames List which contains the columns will show.. columnName List's type is List<string></param>
  /// <param name="Header">The list where you can set the dgv's headers as you prefer..it's type is also List<string></param>
  /// <returns></returns>
  public static DataGridView showTheGivenColumns(this DataGridView dgvName, object dataSourceLoadMethod, List<string> columnNameList, List<string> headerList)
            {
                dgvName.DataSource = null;
                dgvName.Columns.Clear();
                dgvName.DataSource = dataSourceLoadMethod;
                int j = columnNameList.Count;
                int m = 0;
                int s = headerList.Count;

                if (j == s)
                {

                    foreach (DataGridViewColumn d in dgvName.Columns)
                    {
                        for (int i = 0; i < j; i++)
                        {
                            if (d.Name == columnNameList[i])
                            {
                                d.HeaderText = headerList[i];
                                d.Visible = true;
                                d.Width = d.GetPreferredWidth(DataGridViewAutoSizeColumnMode.AllCells, false);

                                m += d.Width;
                                break;
                            }
                            else
                            {
                                d.Visible = false;
                            }
                        }
                    }
                }
                else
                {
                    MessageBox.Show("Count of Header and ColumnName Lists are not equal..Please Check.");
                } 
```

///如果您的 dgv 具有垂直和/或水平滚动，则在此行之后，方法将使用此选项检查并设置大小

```
bool vscroll = (dgvName.DisplayedRowCount(false) < dgvName.Rows.Count);
                bool hscroll = (dgvName.DisplayedColumnCount(false) < columnNameList.Count);
                if (vscroll == true)
                {
                    int vScrollWidth = (dgvName.Controls.OfType<VScrollBar>().First()).Width;
                    dgvName.Width = m + (vScrollWidth + 5);
                }
                if ( vscroll == false)
                {
                    dgvName.Width = m + 5;
                }
                if (hscroll == true)
                {
                    int hscrollWidth = (dgvName.Controls.OfType<HScrollBar>().First()).Height;
                    dgvName.Height = ((dgvName.RowTemplate.Height * dgvName.RowCount) + dgvName.ColumnHeadersHeight) + hscrollWidth;

                }
                if (hscroll == false)
                {
                    dgvName.Height = ((dgvName.RowTemplate.Height * dgvName.RowCount) + dgvName.ColumnHeadersHeight) + 2;
                }

                dgvName.ClearSelection();
                dgvName.ReadOnly = true;
                return dgvName;
             } 
```

***您可能想知道这些：***

1-) 如果您的 dgv 的大小似乎大于总列数，请在您的表单中设置

```
d.GetPreferredWidth(DataGridViewAutoSizeColumnMode.AllCells, false); 
```

方法的`.AllCells`选项以满足您的表单需求..如果您`false`将`true`

2-) 在检查滚动条代码部分的需求时，添加到宽度或高度的数字取决于屏幕分辨率。我添加的数字不是最好的，但针对 1024*768、1280*800 和 1366 进行了优化*968 分辨率..您可能需要更改这些添加的数字..

# django - 为什么用户对象的字符串表示在我的 Django 应用程序中保持不变？

> ID：10865168
> 
> 赞同：0
> 
> 时间：2012-06-02T19:15:15.533
> 
> 标签：django, django-authentication

我更改了“/home/david/django/django/contrib/auth/models.py”中的用户类，如下所示，以覆盖我的 Django 应用程序中用户的字符串表示。

```
class User(models.Model):
    ...
    def __unicode__(self):
        return self.get_profile().full_name() 
```

我编写了一个`full_name()`在我的用户配置文件模型中调用的函数，以按照我希望的方式显示全名。

但是，在我重新启动 Apache 后，我发现模型表单的选择菜单中的用户仍然由用户名表示。为什么？

![在此处输入图像描述](../Images/e16a0389629a837d2dc6d51089be4d0a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:14:32.123

不要尝试对您的安装进行猴子补丁。这确实是个坏主意。

您可以[在此处阅读](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#modelchoicefield)如何覆盖模型选择表单字段显示其模型实例的方式。

在你的情况下，它看起来像这样：

```
class UserChoiceField(ModelChoiceField):
    def label_from_instance(self, obj):
        return obj.get_profile().full_name() 
```

然后在您的表单中使用此字段。在模型表单中，您必须覆盖使用的默认字段。

# php - 使用 PHP 列出 Web 目录

> ID：10865169
> 
> 赞同：1
> 
> 时间：2012-06-02T19:15:15.380
> 
> 标签：php

我正在尝试使用 PHP列出目录中包含的所有文件：ftp: [//windows.php.net/downloads/releases/ 。](ftp://windows.php.net/downloads/releases/)如果文件列表可以作为数组返回，那就太好了。它不一定是 FTP 协议，但我在某处读到 HTTP 在此应用程序中不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:17:52.960

您可以使用[ftp_nlist()](http://php.net/manual/en/function.ftp-nlist.php)函数。

```
$array = ftp_nlist($ftp_conn, "/downloads/releases/"); 
```

[或者，您可以按照此处所述](https://stackoverflow.com/a/2270921/625231)解析 HTTP 目录列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:22:27.803

使用 ftp_nlist 将返回所有文件的数组。这是我为 FTP 找到的示例：http: [//www.w3schools.com/php/func_ftp_nlist.asp](http://www.w3schools.com/php/func_ftp_nlist.asp)

```
<?php
 $conn = ftp_connect("ftp.testftp.com") or die("Could not connect");
 ftp_login($conn,"admin","ert456");

 print_r(ftp_nlist($conn,"images"));

 ftp_close($conn);
 ?> 
```

在上面的示例中，“图像”是您的返回数组。

HTTP（Web 服务器）的列表目录是通过 Web 服务器设置控制的，并且大多数 Web 服务器已经设置了它。如果任何 http Web 服务器设置为不显示目录列表，则您无法列出任何 Web 服务器上的目录。

# javascript - 动态 FPS 的玩家运动计算（每秒帧数）

> ID：10865174
> 
> 赞同：2
> 
> 时间：2012-06-02T19:15:49.217
> 
> 标签：javascript, game-engine

如果游戏以 177FPS 或 22FPS 运行，玩家的移动是如何计算的？我正在尝试在 Javascript 中执行此操作：

```
setInterval(update, 0);

function update() {
     player_x++;
} 
```

![问题预览](../Images/cdd88046e4a474ae777b730bb6e70bbc.png)

问题是播放器是否会根据帧速率移动得更快/更慢。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:22:35.900

我强烈建议在可用时使用[requestAnimationFrame](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)（这将使您在现代浏览器中获得最佳帧速率），而在不可用时使用 setTimeout。然后根据动画开始后的时间确定您的玩家位置：

```
// Anonymous function used to make variables declared inside it not global
// This avoids conflicts in case variables with the same names are used
// in other scripts
(function(){

    // This checks for the requestAnimationFrame in each browser and store the first
    // it finds into requestAnimationFrame. If none are found it uses setTimeout
    // Attempting 60 frames per second.
    // It's taken from Paul Irish's blog: http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    // and you can use it as is
    var requestAnimationFrame = (function(){
        return window.requestAnimationFrame    || 
               window.webkitRequestAnimationFrame || 
               window.mozRequestAnimationFrame    || 
               window.oRequestAnimationFrame      || 
               window.msRequestAnimationFrame     || 
               function(callback){
                   setTimeout(function(){ callback((new Date).getTime()); }, 1000/60);
               };
    })();

    var speed = 60; // pixels per second

    // This is used so that we only divide by 1000 once instead of every frame
    var calc = speed/1000;

    // Store the current time in start_time
    var start_time = (new Date).getTime();

    // This function is self invoking. It is wrapped in parenthesis and called immediately
    // time is passed in by requestAnimationFrame
    (function draw(time){
        // Calculate the new x position based on the current time
        var pos = (time - start_time)*calc;

        // Update the player's position
        // In my JSFiddle I update the style.left of a div
        player_x = pos;

        // Now that this frame is done request another frame.
        // draw will be called again before that frame is rendered
        requestAnimationFrame(draw);
    })();

})(); 
```

[**JSFiddle**](http://jsfiddle.net/Paulpro/3SGFC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:17:11.523

尝试使用计时器功能，以便玩家根据时间移动而不是帧变化......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T19:21:13.237

距离等于速度（常数）和时间。根据帧速率（以赫兹为单位），时间 t =`1 / framerate`会有所不同。

将其放入代码中：测量后续帧之间的时间并使用该时间来计算距离。

有时一个更好的主意是拥有一个后台线程（在 JavaScript 中，您可以`setInterval()`按照建议使用`CezarisLT`并使用常量时间。但是在实践中，您仍然需要测量后续调用之间的时间，因为`setInterval()`不能保证准确地在预定时间运行（长时间运行功能，高 CPU 使用率）。

顺便说一句，您的代码过于冗长，无法编译：

```
setInterval(update, 0)

function update() {
     player_x++;
} 
```

# sql - 无限触发循环....设计（！）。如何解决？

> ID：10865177
> 
> 赞同：4
> 
> 时间：2012-06-02T19:16:14.600
> 
> 标签：sql, sql-server, sql-server-2008

我知道我会因此而发火，但是......

我有表 ProductA、ProductB 和 ProductC，它们的架构非常相似，但每个都有 2 或 3 列。每个表都有一个插入触发器，它为 A、B 或 C 中的每个插入触发重复行到表 Products，这是所有产品的合并。此外，A、B 或 C 上的更新触发器也将更新它们在表产品中的等效行，删除触发器也是如此。所有工作都完美无缺，直到......我们更新了表格产品列 A，它也存在于表 A、B 和 C 中。

我希望在表产品上开发一个触发器，它将 A 列中的更新传播到每个表 A、B 和 C 中的 A 列，但是，而不调用表 A、B 和 C 上的更新触发器。期望的行为是更新在两个方向上工作而不会产生无限循环。（注意，表产品中只有 2 列需要复制回表 A、B 和 C）

选项是：

1.  重新设计架构，使这种情况不存在（不在卡片中，这是一个快速的解决方案，重新设计可以由其他人完成）；
2.  更新表产品时手动禁用触发器（这都是在应用程序级别完成的，用户在更新表产品时将无法登录 SSMA 并禁用触发器）；
3.  来到 Stack Overflow，希望有人已经遇到过此类问题！

从概念上讲，如何做到这一点？

6/7 更新：

这是表 A 上的触发代码（例如）：

```
 ALTER TRIGGER   [dbo].[GRSM_WETLANDS_Point_GIS_tbl_locations_update]
    ON  [dbo].[GRSM_WETLANDS_POINT]
    after update  
    AS   
    BEGIN   
      SET NOCOUNT ON;  

      update dbo.TBL_LOCATIONS
      set 
    X_Coord = i.X_Coord,
    Y_Coord = i.Y_Coord,
    PlaceName = i.PlaceName,
    FCSubtype = case
    when i.FCSubtype = 1 then 'Point: Too Small to Determin Boundary'
    when i.FCSubtype = 2 then 'Point: Boundary Determined by Contractor but not Surveyed' 
    when i.FCSubtype = 3 then 'Point: Wetland Reported but not yet Surveyed'
    end ,
    Landform = i.Landform

    from dbo.TBL_LOCATIONS
    Join inserted i
    on TBL_LOCATIONS.GIS_Location_ID = i.GIS_Location_ID
      end

GO 
```

和

```
ALTER TRIGGER [dbo].[GRSM_WETLANDS_POINT_GIS_tbl_locations]
ON

[dbo].[GRSM_WETLANDS_POINT]
after INSERT
AS
BEGIN
SET NOCOUNT ON; 
INSERT dbo.TBL_LOCATIONS(
X_Coord, Y_Coord, 
PlaceName, 
FCSubtype, Landform
)

SELECT 
a.X_Coord, a.Y_Coord, 
a.PlaceName, 
a.FCSubtype, a.Landform

From
( 
SELECT 
X_Coord, Y_Coord, 
PlaceName, 
FCSubtype = case
when FCSubtype = 1 then 'Point: Too Small to Determin Boundary'
when FCSubtype = 2 then 'Point: Boundary Determined by Contractor but not Surveyed' 
when FCSubtype = 3 then 'Point: Wetland Reported but not yet Surveyed'
end , 
Landform

FROM inserted 
) AS a 

end

GO 
```

这是当前在表产品上禁用的更新触发器：

```
ALTER TRIGGER   [dbo].[tbl_locations_updateto_geo]
ON  [dbo].[TBL_LOCATIONS]
for update  
AS   

BEGIN 
--IF @@NESTLEVEL>1 RETURN  
  SET NOCOUNT ON;  
  update dbo.GRSM_Wetlands_Point 
  set 
X_Coord = i.X_Coord,
Y_Coord = i.Y_Coord,
PlaceName = i.PlaceName,
FCSubtype = i.FCSubtype,
Landform = i.Landform,
from dbo.TBL_LOCATIONS
Join inserted i
on TBL_LOCATIONS.GIS_Location_ID = i.GIS_Location_ID
where TBL_LOCATIONS.FCSubtype =  'Polygon: Determination Made by GPS Survey'
or TBL_LOCATIONS.FCSubtype =  'Polygon: Determination Derived from NWI' 
 or TBL_LOCATIONS.FCSubtype =  'Polygon: Determination Made by Other Means'
  or TBL_LOCATIONS.FCSubtype =  'Polygon: Legal Jurisdictional Determination';
  end
GO 
```

（tbl 名称已更改以与发布文本保持一致）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T20:03:44.517

递归有两种类型，直接和间接：http: [//msdn.microsoft.com/en-us/library/ms190739.aspx](http://msdn.microsoft.com/en-us/library/ms190739.aspx)

您可以使用 RECURSIVE_TRIGGERS 选项来停止直接递归，但您的情况是间接递归，因此您必须设置嵌套触发器选项。这将解决您的问题，但如果系统中的其他任何内容都依赖于递归，那么这将不是一个好的选择。

```
USE DatabaseName
GO
EXEC sp_configure 'show advanced options', 1
GO
RECONFIGURE
GO
EXEC sp_configure 'nested triggers', 0
GO
RECONFIGURE
GO 
```

编辑以响应您更新的帖子：

我几乎讨厌给你这个解决方案，因为你最终会采用一个非常糟糕的设计并对其进行扩展......比现在更加混乱，而不是花时间了解正在发生的事情并修复它。老实说，您应该只创建另一个表来保存需要在两个表之间同步的值，以便数据仅在一个位置，然后通过键将这些表与该表相关联。但尽管如此...

您需要一个标志来设置您正在一个触发器中更新，以便另一个触发器在看到它为真时可以中止其操作。因为（据我所知）你只能有本地范围的变量，这意味着你需要一个表来存储这个标志值并从中查找。

您可以使用不同级别的复杂性来实现此解决方案，但最简单的方法是让所有触发器在开始时将标志设置为 true，在结束时设置为 false。在他们开始之前，他们检查标志并停止执行，如果它是真的；

这样做的问题是，可能有另一个与同时发生的触发器无关的更新，并且它不会传播到下一个表。如果你想走这条路，那么我会让你自己想办法解决这个问题。

# javascript - 防止方向改变

> ID：10865179
> 
> 赞同：0
> 
> 时间：2012-06-02T19:16:24.960
> 
> 标签：javascript, html, css, smartphone

尽管标题几乎相同，但我的问题与[防止 iOS Safari 中的方向更改](https://stackoverflow.com/questions/5298467/prevent-orientation-change-in-ios-safari)不重复（我更改了答案以制作下面的代码）

我写了下面的代码，所以如果用户旋转 iPad/iPhone/iPod，我会旋转内容，这样他就必须旋转设备才能正常查看内容。

```
if(window.orientation==90)
{
    document.getElementById("orient").style.webkitTransform="rotate("+window.orientation+"deg)";
    document.getElementById("orient").style.webkitTransformOrigin="0px 0px";
    document.getElementById("orient").style.top=screen.height+"px";
} 
```

当我旋转我的设备时，内容消失了。有人可以帮我完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:02:57.757

我认为你的问题是你的变换原点，它应该在你的内容的中间而不是顶角。当您在角落应用变换原点时，它会将您的 div 旋转到可见区域之外，这就是您什么也没看到的原因。如果您希望 div 具有相同的形状，还需要对其进行其他修改。

这是一个简单的例子，应该可以工作并做你想做的事

```
<div id="all" style="-webkit-transform: rotate(90deg); -webkit-transform-origin: 50% 50%; position:absolute; width: 100%; height: 100%;">
    Lorem ipsum dolor sit amet ...
</div>

<script type="text/javascript">
    var all = document.getElementById("all");

    all.style.height = window.innerWidth + "px";
    all.style.width = window.innerHeight + "px";
    all.style.top = (window.innerHeight - window.innerWidth) / 2 + "px";
    all.style.left = (window.innerWidth - window.innerHeight) / 2 + "px";
</script> 
```

注意：它可能与您的问题无关，但我认为您想要`Math.abs(window.orientation)`代替`window.orientation`，因为方向可以是 -90 或 90。

# python - 在 Python 中转储到 JSON 时，字符串中的 Unicode 值会被转义

> ID：10865180
> 
> 赞同：7
> 
> 时间：2012-06-02T19:16:48.353
> 
> 标签：python, json, unicode

例如：

```
>>> print json.dumps('růže')
"r\u016f\u017ee" 
```

（当然，在实际程序中它不仅仅是一个字符串，而且在使用时它在文件中也是这样出现的`json.dump()`）我也希望它输出简单的“růže”，如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-02T19:21:12.670

将参数传递`ensure_ascii=False`给 json.dumps：

```
>>> print json.dumps('růže', ensure_ascii=False)
"růže" 
```

# vb.net - vb.net 删除大量动态创建的按钮

> ID：10865183
> 
> 赞同：3
> 
> 时间：2012-06-02T19:17:11.830
> 
> 标签：vb.net, dynamic, runtime, controls

我是 vb.net 的新程序员，因此为可能的无知道歉。我正在为数据库界面构建一个简单的 gui，其中包含许多父项和子项。在表单上，​​我根据项目（父母/孩子）的数量创建按钮。我已经创建了按钮：

```
For RowNumber As Integer = 0 To NoOfRows
        Dim Buttoni As New Button
        Buttoni.Location = New Point(LocationX, LocationY)
        Buttoni.Width = 100
        Buttoni.Height = 40
        Buttoni.Visible = True
        Buttoni.Text = DatasetA.Tables(0).Rows(RowNumber).Item("Name")
        ButtonName = "Button" + RowNumber.ToString

        If LocationX < FormWidth - (SpacePerButtonX * 2) Then
            LocationX = LocationX + SpacePerButtonX
        Else
            LocationX = 50
            LocationY = LocationY + SpacePerButtonY
        End If

        AddHandler Buttoni.Click, AddressOf DynamicButtonClick
        Me.Controls.Add(Buttoni)
        Buttoni.BringToFront()  'brings newest buttons to front!
    Next 
```

但是我正在努力寻找一种删除按钮的方法，以便为新的一组替换它们让路……我可以在单击时删除一个按钮，但我想删除所有已创建的按钮以这种方式在重新创建它们之前。

我希望这是有道理的，并且有一种相当简单的方法可以实现这一点..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:28:50.037

我将在您的创建循环中为 Tag 属性添加一些值。这将有助于区分动态创建的按钮和表单中静态创建的按钮。

```
Buttoni.Tag = 1 
```

然后，要删除一个按钮，在 Me.Controls 集合上以相反的顺序循环，
检查是否有一个按钮以及 Tag 属性是否为 IsNot Nothing

```
For x as Integer = Me.Controls.Count - 1 to 0 step -1)
    Dim b as Button = TryCast(Me.Controls(x), Button)
    If b IsNot Nothing AndAlso b.Tag IsNot Nothing then
        b.Dispose()       '' NOTE: disposing the button also removes it
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:27:47.560

很难确切地知道你想做什么。我想你可以反过来使用相同的技术，比如

```
 For i As Integer = Me.Controls.Count - 1 To 0 Step -1
            Dim ctrl = Me.Controls(i)

            If TypeOf (ctrl) Is Button Then
               ctrl.Dispose()           '' NOTE: disposing the control also removes it
            End If
        Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T09:51:39.007

创建一个按钮并双击删除它！简易代码：

```
Dim b As New Button
Private btn As Button ' this is a reference object
Private ptX, ptY As Integer
Private drag As Boolean
Private Sub nodebtn_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs)
    If e.Clicks = 2 Then
        b.Dispose()
    End If

    If e.Button = MouseButtons.Left Then
        drag = True
        btn = CType(sender, Button)
        ptX = e.X : ptY = e.Y
    End If
End Sub

Private Sub nodebtn_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs)
    If drag Then
        btn.Location = New Point(btn.Location.X + e.X - ptX, btn.Location.Y + e.Y - ptY)
        Me.Refresh()
    End If
End Sub
Private Sub nodebtn_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs)
    drag = False
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    b.Location = New Point(10, 10)
    b.Size = New Size(110, 29)
    b.BringToFront()
    b.Text = "Button"
    AddHandler b.MouseDown, AddressOf nodebtn_MouseDown
    AddHandler b.MouseMove, AddressOf nodebtn_MouseMove
    AddHandler b.MouseUp, AddressOf nodebtn_MouseUp
    Me.Controls.Add(b)
End Sub 
```

# ruby-on-rails - 除了Ruby on Rails中的一个参数之外，有没有一种方法可以对所有内容使用质量分配？

> ID：10865189
> 
> 赞同：3
> 
> 时间：2012-06-02T19:17:59.653
> 
> 标签：ruby-on-rails

我正在尝试`params[:user][:email]`在我的应用程序中小写，但目前我`@user = User.new(params[:user])`在我的`def create`. 是否可以允许对除单个项目之外的所有内容进行批量分配？

我知道我不能使用批量分配，但我想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:56:08.327

是的。

```
class User
  attr_protected :email
end 
```

下面是你如何使用它：

```
user = User.new(params[:user])
user.email = params[:user][:email].downcase 
```

但是，如果您想自动降低电子邮件属性，您可以简单地覆盖该`email=`方法，我**强烈**建议您这样做：

```
class User < ActiveRecord::Base
  def email=(other)
    write_attribute(:email, other.try(:downcase))                                                                                                                                                         
  end
end

Loading development environment (Rails 3.2.5)
irb(main):001:0> User.new({:email => 'Me@you.com'})
=> #<User id: nil, email: "me@you.com", username: nil, created_at: nil, updated_at: nil>
irb(main):002:0> User.new({:email => nil})
=> #<User id: nil, email: nil, username: nil, created_at: nil, updated_at: nil> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:26:28.870

你应该看看 attr_protected。这使您可以仅定义要防止被批量分配的属性。

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected)

# asp.net-mvc - 为什么我的重定向不起作用...？

> ID：10865191
> 
> 赞同：0
> 
> 时间：2012-06-02T19:18:01.227
> 
> 标签：asp.net-mvc, redirect

我正在尝试从我的非`www`域重定向到我的`www`域，如下所示：

```
protected void Application_BeginRequest(object sender, EventArgs e)
        {
            if (HttpContext.Current.Request.Url.ToString().Contains("http://mydomain.com"))
            {
                HttpContext.Current.Response.Status = "301 Moved Permanently";
                HttpContext.Current.Response.AddHeader("Location", "http://www.mydomain.com");
            }
        } 
```

由于某种原因，重定向没有完成......（好吧，我知道这可以通过定义`CNAME`也来完成，但我只是想知道为什么这不起作用......

我认为这是一些小车……但我看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:18:26.460

使用此[工具](http://www.rexswain.com/httpview.html)进行验证。可能你必须像下面这样更改代码，

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.Request.Url.ToString().Contains("http://mydomain.com"))
    {
        HttpContext.Current.Response.Status = "301 Moved Permanently";
        HttpContext.Current.Response.AddHeader("Location",
               Request.Url.ToString().ToLower().Replace(
                 "http://mydomain.com",
                 "http://www.mydomain.com"));
    }
} 
```

# php - mysql查询帮助插入具有相同字段的多行

> ID：10865195
> 
> 赞同：3
> 
> 时间：2012-06-02T19:18:28.257
> 
> 标签：php, mysql, sql

我怀疑这是否可能。

我有两张桌子

1) 文件主控

```
file_id  |  name
-----------------
1        | readme.txt
2        | readme2.txt
3        | readme3.txt
4        | readme4.txt
5        | readme4.txt

2) user_file

user_id  |  file_id
-----------------
1        | 2
1        | 4 
```

我正在寻找这样的查询

```
INSERT INTO user_file (user_id, file_id) VALUES (1, SELECT file_id FROM file_master WHERE file_id <= 4); 
```

这应该相当于

```
 INSERT INTO user_file (user_id, file_id) VALUES (1, 1);
  INSERT INTO user_file (user_id, file_id) VALUES (1, 2);
  INSERT INTO user_file (user_id, file_id) VALUES (1, 3);
  INSERT INTO user_file (user_id, file_id) VALUES (1, 4); 
```

在 PHP 中，我可以使用 for 循环构造多个插入查询。但我正在寻找一个纯 SQL 解决方案......如果可能的话。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:22:00.367

```
INSERT INTO user_file (user_id, file_id)
    SELECT 1, file_id 
    FROM file_master 
    WHERE file_id <= 4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:21:19.607

```
INSERT INTO user_file (user_id, file_id) 
  SELECT 1, file_id FROM file_master WHERE file_id <= 4; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T19:22:16.353

你几乎是对的：

```
INSERT INTO user_file (user_id, file_id) SELECT 1, file_id FROM file_master WHERE file_id <= 4; 
```

见[`INSERT … SELECT`声明](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)。

# sql-server - 从表中删除后数据库大小变大

> ID：10865201
> 
> 赞同：1
> 
> 时间：2012-06-02T19:19:10.847
> 
> 标签：sql-server, tsql, size

从 SQL Server 数据库表中删除大量数据后，数据库大小增加了。

当我运行`sp_spaceused`它显示我 2625.25 MB。在我从表中删除之前，它曾经是 ~ 1800.00 MB。

即使我删除数据，它是否会持续增长？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:28:09.447

临时事务日志通常是在大量删除后显着增加大小的原因。

它最终会自行消失，但如果您需要回收空间，您可以删除文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:32:08.107

我假设您使用的是 SQL Server ( `sp_spaceused`)。删除已记录，因此您的日志文件已增长。

请参阅[SQL Server 2008 log will not truncate](https://stackoverflow.com/questions/646845/sql-server-2008-log-will-not-truncate-driving-me-crazy)关于如何截断您的日志（取决于您的数据库和恢复模式），然后您可以运行

```
DBCC SHRINKFILE(N) 
```

回收失去的空间

**编辑**根据@Aaron，截断也是一个记录操作。答案更正。

# php - 阻止人们上传带有注射的 GIF 的方法？

> ID：10865202
> 
> 赞同：18
> 
> 时间：2012-06-02T19:19:13.297
> 
> 标签：php, security, image-processing, gd, code-injection

我有一个 PHP 网站，人们可以在其中填写帮助票。它允许他们为他们的票上传屏幕截图。我允许上传 gif、psd、bmp、jpg、png、tif。收到上传后，PHP 脚本会忽略文件扩展名。它仅使用 MIME 信息识别文件类型，对于这些文件类型，这些信息始终存储在文件的前 12 个字节中。

有人上传了几个 GIF，当用浏览器查看时，浏览器说它无效，我的病毒扫描程序提醒我这是注入（或类似的东西）。请参阅下面的包含这些 GIF 的 zip 文件。

我认为仅检查标题信息是不够的。我听说图像可以完全有效，但也包含漏洞利用代码。

所以我有两个基本问题：

1.  有谁知道他们是如何将坏东西注入 GIF 的（*同时仍然保持有效的 GIF MIME 类型*）？如果我知道这一点，也许我可以在上传时检查它。
2.  如何防止有人上传这样的文件？
    *   我在共享主机上，因此无法安装服务器端病毒扫描程序。
    *   将信息提交到在线病毒扫描网站可能太慢了。
    *   有没有办法使用检查这些东西的 PHP 类来检查自己？
    *   如果它无效，使用 GD 调整图像大小会失败吗？还是该漏洞仍然会溜走并出现在调整大小的图像中？如果它失败了，那将是理想的，因为那时我可以使用调整大小作为一种技术来查看它们是否有效。

* * *

**更新：**大家，感谢到目前为止的回复。我正在尝试在服务器上查找已上传的 GIF。如果我找到它们，我会更新这篇文章。

**更新 2：**我为任何感兴趣的人找到了 GIF。我将它们放在使用密码“123”加密的 zip 文件中。它位于此处（请注意，此托管站点上有多个“下载”按钮 - 其中一些用于广告）[http://www.filedropper.com/badgifs](http://www.filedropper.com/badgifs)。我的防病毒软件将名为 5060.gif 的那个标记为木马 (TR/Graftor.Q.2)。我应该注意，这些文件是在我实施前 12 个字节的 MIME 检查之前上传的。所以现在，我对这些特殊的人是安全的。但我仍然想知道如何检测隐藏在正确 MIME 类型后面的漏洞。

* * *

**重要说明：** *我只关心下载这些文件以查看它们的 PC 的风险。* 这些文件对我的服务器没有风险。他们不会被处决。它们使用扩展名为“.enc”的干净名称（十六进制哈希输出）存储，我使用 fwrite 过滤器以加密状态将它们保存到磁盘：

```
// Generate random key to encrypt this file.
$AsciiKey = '';
for($i = 0; $i < 20; $i++)
    $AsciiKey .= chr(mt_rand(1, 255));

// The proper key size for the encryption mode we're using is 256-bits (32-bytes).
// That's what "mcrypt_get_key_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC)" says.
// So we'll hash our key using SHA-256 and pass TRUE to the 2nd parameter, so we
// get raw binary output.  That will be the perfect length for the key.
$BinKey = hash('SHA256', '~~'.TIME_NOW.'~~'.$AsciiKey.'~~', true);

// Create Initialization Vector with block size of 128 bits (AES compliant) and CBC mode
$InitVec = mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC), MCRYPT_RAND);
$Args = array('iv' => $InitVec, 'key' => $BinKey, 'mode' => 'cbc');

// Save encoded file in uploads_tmp directory.
$hDest = fopen(UPLOADS_DIR_TMP.'/'.$Hash.'.enc', 'w');
stream_filter_append($hDest, 'mcrypt.rijndael-128', STREAM_FILTER_WRITE, $Args);
fwrite($hDest, $Data);
fclose($hDest); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T19:27:49.807

至于第**一个问题**，您永远不会真正知道您是否无法检索任何有问题的日志或图像，因为这些漏洞利用可能针对很多东西，并且取决于漏洞利用方式的目标是什么进入文件可以完全不同。

**编辑：** *W32/Graftor*是似乎具有木马特征的程序的[通用名称。](https://www.f-secure.com/v-descs/trojan_w32_graftor.shtml)

在十六进制编辑器中打开文件后`5060.gif`，我注意到该程序实际上是一个[重命名的 windows 程序](http://img560.imageshack.us/img560/3516/izprog1.png)。虽然它不是浏览器漏洞，因此除非它被实际打开并执行，否则它是无害的，但你必须确保它不是由上传者定义的 MIME 类型提供的，因为用户仍然可能被欺骗打开程序；看第二个问题的答案。

至于**第二个问题**：为了防止任何漏洞利用代码被运行或用户，您必须确保所有文件都以安全的扩展名存储在文件名中，以便使用正确的 MIME 类型提供服务。例如，您可以使用这个正则表达式来检查文件名：

```
if(!preg_match ( '/\\.(gif|p(sd|ng)|tiff?|jpg)$/' , $fileName)){
    header("415 Unsupported Media Type");
    die("File type not allowed.");
} 
```

还要确保您使用正确的内容类型提供文件；确保在向用户提供文件时不使用上载文件指定的内容类型。如果您依赖上传者指定的 Content-Type，则该文件可能会被用作`text/html`或任何类似的东西，并将由用户的浏览器进行解析。

请注意，这只防止恶意文件利用用户浏览器中的漏洞，图像解析器除外。

如果你试图阻止对服务器的攻击，你必须确保你不会让 PHP 解析器执行图像的内容，并且你用来处理图像的图像库没有任何已知的漏洞。

另请注意，此代码不会保护您免受包含用户浏览器使用的图像解析器漏洞的图像的攻击；为了防止这种情况，您可以`getimagesize()`按照 Jeroen 的建议检查评估是否为真。

请注意，`getimagesize()`如果您不检查文件名并确保使用正确的标题提供文件，则单独使用是不够的`Content-Type`，因为完全有效的图像可以在注释中嵌入 HTML / PHP 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-23T09:25:35.627

您可以在任何接受上传的 php 脚本上尝试 phpMussel。该文件将使用 ClamAV 签名以及一些专门寻找此类入侵的内部启发式签名进行扫描。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T19:33:13.680

您可以为此使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php)函数。如果图像无效，它将简单地返回`false`。

```
if (getimagesize($filename)) {
    // valid image
} else {
    // not a valid image
} 
```

值得注意的是，这也不是 100% 安全的，但据我所知，这是你能做的最好的。

在此处阅读[有关此内容的](http://ha.ckers.org/blog/20070604/passing-malicious-php-through-getimagesize/)更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T19:36:22.013

我不太了解图像格式，但是重新创建图像然后存储结果，我觉得很有可能消除不必要的棘手内容。特别是如果您剥离所有元数据，如评论和某些图像格式支持的所有其他类型的可选嵌入字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T19:35:05.440

1) 如果您删除了 .gif 并且您的 A/V 没有写入日志，您将永远不会确切知道问题出在哪里。

问：有问题的 .gif 文件还在服务器上吗？

问：您检查过您的 A/V 日志吗？

2) 有许多不同的可能漏洞，它们可能与 .gif 文件格式直接相关，也可能不相关。这是一个例子：

*   [http://www.phpclasses.org/blog/post/67-PHP-security-exploit-with-GIF-images.html](http://www.phpclasses.org/blog/post/67-PHP-security-exploit-with-GIF-images.html)

3) 为了减轻本示例中的风险，您应该：

a) 仅将文件（*任何*文件）上传到服务器上的*安全*目录

b) 仅提供具有特定后缀（.gif、.png 等）的文件

c) 对上传到您网站的任何内容都非常偏执（特别是如果您随后允许其他人从您的网站下载它！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T10:48:01.683

防止注入 PHP 问题的非常有用的提示来自我主机的系统管理员：我有一个站点，人们可以在其中上传自己的内容。我想确保上传图片的目录不运行任何 PHP。这样，有人甚至可以发布一张名为“test.php”的图片，如果它位于上传目录中，PHP 将永远不会对其进行解析。解决方案很简单：在文件夹中，上传的内容是从以下 .htacess 提供的：

```
RewriteEngine On
RewriteRule \.$ - [NC]
php_flag engine off 
```

这将关闭文件夹的 PHP 引擎，从而阻止任何启动任何 PHP 以利用服务器端漏洞的尝试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-10T09:36:25.440

迟到的回应，但可能对某人有用。您可以尝试这样的方法：

```
//saves filtered $image to specified $path
function save($image,$path,$mime) {
    switch($mime) {
        case "image/jpeg"   : return imagejpeg(imagecreatefromjpeg($image),$path);
        case "image/gif"    : return imagegif(imagecreatefromgif($image),$path);
        case "image/png"    : return imagepng(imagecreatefrompng($image),$path);
    }
    return false;
}; 
```

# android - adb 设备丢失

> ID：10865209
> 
> 赞同：0
> 
> 时间：2012-06-02T19:21:03.390
> 
> 标签：android

我正在开发一个 android 应用程序，现在准备将其发布到我的设备 (HTC Desire)。唯一的事情是我正在使用 ubuntu 并且我在这样做时遇到了麻烦。我在互联网上找到了一些关于安装驱动程序的帮助，只有我需要一个叫做“adb devices”的东西，但是在最新的 android sdk 中它已经被移动了，现在我找不到它了。SDK 是最新的。有没有其他人无法让 linux 识别他们的 HTC 设备？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:25:23.317

HTC 设备在 Linux 下运行良好，无需任何驱动程序。我在 ubuntu 下使用了 HTC 野火，没有任何问题。

adb 是一个可执行文件。您可以在 SDK 的 platform-tools 子目录中找到它。“设备”只是该命令的一个参数（adb devices 列出所有连接的设备）。

# java - Java Collection - 基于字典/树的抽象数据结构的具体数据结构

> ID：10865211
> 
> 赞同：1
> 
> 时间：2012-06-02T19:21:10.737
> 
> 标签：java, collections, abstract-data-type

我的问题是关于在实现抽象数据结构实现（如变体映射/树）中使用的基本/具体数据结构（如数组）是什么？

我正在寻找 java 集合中真正使用的东西，而不是理论上的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T19:31:35.940

基于对 Sun/Oracle JDK 的快速代码审查。您可以自己轻松找到详细信息。

* * *

# 列表/队列

## `ArrayList`

生长`Object[] elementData`领域。默认可以容纳 10 个元素，当无法容纳更多对象时增长约 50%，将旧数组复制到更大的新数组。移除物品时不会收缩。

## `LinkedList`

依次引用`Entry`实际元素、前一个和下一个元素（如果有）的引用。

## `ArrayDeque`

类似于`ArrayList`但也持有两个指向内部`E[] elements`数组的指针 -`head`和`tail`. 在任一侧添加和删除元素都只是移动这些*指针*的问题。当太小时，数组会增长 200%。

* * *

# 地图

## `HashMap`

`Entry[] table`拿着所谓的*水桶*的生长领域。每个桶包含具有与关键模块表大小相同的哈希的条目的链接列表。

## `TreeMap`

`Entry<K,V> root`参考持有红黑平衡树的根。

## `ConcurrentHashMap`

类似于`HashMap`但对每个存储桶（称为*段*）的访问是由一个独立的锁同步的。

* * *

# 套

## `TreeSet`

在下面使用`TreeMap`(!)

## `HashSet`

在下面使用`HashMap`(!)

## `BitSet`

使用`long[] words`字段以尽可能提高内存效率。一个元素最多可存储 64 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:24:49.307

当然，每种实现都有一个答案。看看javadocs，他们经常描述这些东西。[http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

# python - 通过没有表单的机械化在 Python 中填充文本框

> ID：10865212
> 
> 赞同：1
> 
> 时间：2012-06-02T19:21:12.457
> 
> 标签：python, input, mechanize

我正在尝试填充[此](http://www.kentkartim.com/bakiyesorgula.php)站点中的文本框，但 mechanize 找不到任何形式。因此，我无法对这些文本框执行任何操作，因为它们的形式不存在。

我尝试了如此不同的解决方案，但我失败了。这是我的代码：

```
import mechanize

def kota():
 br = mechanize.Browser()
 br.open("http://www.kentkartim.com/bakiyesorgula.php")
 a = br.select_form(nr=0)
 print(a) 
```

有了这个，我得到了这个结果：

```
mechanize._mechanize.FormNotFoundError: no form matching nr 0 
```

我认为结果的原因是使用 javascript 的网页。我需要填写文本框并提交它们。

# android - 需要截取多个 WebView 的屏幕截图吗？

> ID：10865216
> 
> 赞同：-1
> 
> 时间：2012-06-02T19:21:21.567
> 
> 标签：android

假设我有一个包含多个 WebView 的 LinearLayout，我需要对其进行截图。

想到的唯一想法是在PageFinished 上获取每个单独的webview 的屏幕，然后将它们组合起来。然而，这是大量的工作，结果不会太准确。

也许有人知道可以在这种情况下使用的一些绝密 :) 方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:25:48.253

您可以将 LinearLayout 绘制到位图。由于它是 WebView 的父级，因此您可以使用它的 draw 方法来获取屏幕截图。

埃克斯。

```
 LinearLayout root = findViewById(R.id.root);
    Bitmap bitmap = Bitmap.createBitmap(root.getWidth(), root.getHeight(), Config.ARGB_8888);
    final Canvas canvas= new Canvas(bitmap);
    root.draw(canvas);

TODO: Do something with the bitmap. 
```

请注意，您需要等到 WebView 完成加载才能使其正常工作...

# google-app-engine - 给定父级获取子实体/键的有效方法

> ID：10865219
> 
> 赞同：5
> 
> 时间：2012-06-02T19:21:36.860
> 
> 标签：google-app-engine, google-cloud-datastore, python-2.7

我想问是否有一种直接有效的方法来获取父实体的子实体。

我正在为追随者/追随者关系建模（如推特）。所以我有一个用户模型和一个消息模型。我有一个 Follower 和 Follower 模型，它有一个用户模型作为父模型。

因此，每当用户写消息（或说推文）时，他的所有关注者都应该能够得到它。在这种情况下，我需要弄清楚谁是用户的追随者（谁发送消息）。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T23:50:54.623

使用祖先查询。[https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_ancestor](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_ancestor) 或 [https://developers.google.com/appengine/docs/python/ndb/queries#ancestor](https://developers.google.com/appengine/docs/python/ndb/queries#ancestor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-27T00:11:14.713

另一种查找实体子代的方法是实例化一个`ndb.Query`对象，并将其传递`ancestor`给它的构造函数：

```
joe = Followed.get_by_id('joe')

query = ndb.Query(ancestor = joe.key)

followers = query.fetch() 
```

这也提供了一种更通用的方法来查找实体的子级，而无需`Kind`事先知道它们。

# objective-c - Objective-C：来自 NSTask 的多个视图和数据

> ID：10865220
> 
> 赞同：0
> 
> 时间：2012-06-02T19:21:37.263
> 
> 标签：objective-c, ios, nsnotificationcenter, nstask

所以，我设法让 NSTask 从程序中异步读取，但我是在故事板中的 UIView 类中完成的。（不是 Obj-C 专家）

我的想法是：我从程序中读取文本将其放在 UITextView 上，然后当有更多时通过重复该过程`NSNotificationCenter`

到目前为止，这是我的代码：

**LView.m:**

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    NSPipe *out_pipe = [NSPipe pipe];
    sshoutput = [out_pipe fileHandleForReading];
    [sshoutput readInBackgroundAndNotify];

    utilT = [[NSTask alloc] init];
    [utilT setLaunchPath:@"/usr/bin/utilfc9"];
    [utilT setArguments:[NSArray arrayWithObjects: @"-p", @"-f", @"log.txt", nil]];

    [utilT setStandardOutput: out_pipe];
    [utilT setStandardError: out_pipe];
    [utilT launch];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(readPipe:) name:NSFileHandleReadCompletionNotification object:nil];
}

-(void)readPipe: (NSNotification *)notification
{
    NSData *data;
    NSString *new_input;

    if( [notification object] != sshoutput ) { return };

    data = [[notification userInfo] objectForKey:NSFileHandleNotificationDataItem];
    new_input = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];

    self.log.text = [self.wifilog.text stringByAppendingFormat: @"\n%@", new_input];

    if( utilT ) {
        [sshoutput readInBackgroundAndNotify];
    }
} 
```

**LView.h：**

```
#import <UIKit/UIKit.h>
#import "NSTask.h"

NSTask *sshT;
NSFileHandle *sshoutput; 
```

到目前为止效果很好，我可以毫无问题地获取数据。

但是，我怎样才能把它`NSTask`放在像 AppDelegate 这样更“全局”的地方`application didFinishLaunchingWithOptions`，然后处理数据并更新另一个类中的多个视图？我试过了，当然我可以在 AppDelegate 里面装东西`log.text = new_input`，因为它来自另一个类，包括它并不能解决问题。

正如您可能注意到的，我对将其发送到 AppStore 不感兴趣。这是一个供我自己在越狱的 iPhone 上使用的应用程序。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:31:47.733

快速的方法是

在您希望收到此相同通知的所有视图中，添加以下内容

接收视图

```
-(void) viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(read:)     name:@"ReadTest" object:nil];
}

//read function
-(void) read:(NSNotification*)notification
{ // Do something with the notification } 
```

现在在 LView.m

```
-(void)readPipe: (NSNotification *)notification
{
    NSData *data;
    NSString *new_input;

    if( [notification object] != sshoutput ) { return };

    data = [[notification userInfo] objectForKey:NSFileHandleNotificationDataItem];
    new_input = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];

    self.log.text = [self.wifilog.text stringByAppendingFormat: @"\n%@", new_input];

    if( utilT ) {
        [sshoutput readInBackgroundAndNotify];
    }
    //Add the following
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ReadTest" object:notification]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:36:16.800

小心，new_input 已分配但未释放 => 内存泄漏

# eclipse - 如何在 rad 7.0 中为 Eclipse 启用 CCRC 扩展，当它已经安装在同一环境中的 rad 8.0 上时

> ID：10865227
> 
> 赞同：1
> 
> 时间：2012-06-02T19:22:17.713
> 
> 标签：eclipse, installation, rad, clearcase-remote-client

我有一台安装了 rad 8.0、RAD 7.0 的 Windows XP 笔记本电脑、clearcase 远程客户端和用于 eclipse 扩展的 clear case 远程客户端。CCRC eclipse 扩展在 rad 8.0 中运行良好，但我需要在 rad 7.0 中启用它，并且 CCRC 扩展选项没有出现在 windows --> 首选项 --> 团队选项中。有没有人曾经在他们的机器上运行过这两个版本的 rad ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:37:04.853

正常的流程是遵循“[如何将 CCRC Extension 与 Rational Application Developer 集成](http://www-304.ibm.com/support/docview.wss?uid=swg21431847)”：

![CCRC RAD 安装](../Images/16ce78297244a6ffcc12f665fbb60d12.png)

如果这是不可能的，那么通过 CCRC 更新站点的简单安装也应该可以从任何 eclipse（包括运行 RAD7.0 的那个）开始。请参阅“[为 Eclipse 和 RSA 安装或更新 CCRC](http://www-304.ibm.com/support/docview.wss?uid=swg21215611) ”：

![CCRC 更新站点](../Images/70ef015f2ebd45390e8d688e79d911c7.png)

# css - 位置固定时隐藏在内容后面的网站标题

> ID：10865237
> 
> 赞同：18
> 
> 时间：2012-06-02T19:23:13.967
> 
> 标签：css, css-position

我正在为一所学校设计一个网站，我希望像 facebook 一样修复网站的标题。我在stackoverflow上尝试了[this](https://stackoverflow.com/questions/7573089/page-navigation-with-fixed-header) question提供的修复，但它在标题中几乎没有任何用处。我有一张图片，基本上是学校的标志，我在哪里做`position: fixed`，但标题隐藏在页面后面。

HTML：

```
<body>
  <div id="header" > <img src="images/iesheader_nnew1.jpg" /></div>

    <div id="menu">
      <ul>
           <li><a href="index.html"><abbr title="Home">Home&nbsp;&nbsp;</abbr></a></li>
           <li><a href="aboutus.html"> <abbr title="About Us">About Us&nbsp;&nbsp;</abbr> </a></li>
           <li><a href="acad.html"><abbr title="Academics">Academics</abbr></a></li>
           <li><a href="admin.html"><abbr title="Administration">Administration</abbr></a></li>
           <li><a href="news.html"><abbr title="News">News</abbr></a></li>
           <li><a href="contact.html"><abbr title="Contact Us">Contact Us</abbr> </a></li>
           <li><a href="photo.html"><abbr title="Photo Gallery">Photo Gallery</abbr> </a></li>
      </ul>     
        <div class="cleaner"></div>
  </div> 
```

CSS：

```
#header {
    margin-left: 0px;
    width: auto;
    height: 90px;
    padding: 0px;
    padding-left:185px;
    font-size: 35px; color:#FFFFFF; 
    background-color: #f6c491;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
}
#menu {
    position: relative;
    clear: both;
    width: auto;
    height: 38px;
    padding: 0;
    padding-left:185px;
    background-color:#FFFFFF;   
    margin-bottom: 10px;
    margin-left:0px;
}

#menu ul {
    float: left;
    width: 960px;
    margin: 0;
    padding: 0;
    list-style: none;
}

#menu ul li {
    padding: 0px;
    margin: 0px;
    display: inline;
}

#menu a {
    float: left;
    display: block;
    padding: 8px 20px;
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    text-decoration: none;
    color: #000;
    outline: none;
    border: none;   
    border-top: 3px solid black;
} 
```

我尝试了许多解决方案，但无论我做什么，标题都放在页面后面。我希望菜单栏也被修复，但它也是一样的......

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-02T19:27:11.733

将 z-index:1000 添加到#header css，并将 padding-top 添加到 body css，它应该比标题的高度多一点。例如，如果标题的高度是 40px，则将 padding-top: 50px 放在 body css 中，它应该可以工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-03T05:01:12.690

当您将位置固定和/或绝对添加到元素时，这意味着该元素将离开自然流，现在它属于与所有元素所在的层无关的“层”与文档的自然流.

这是一个很棒的功能，因为现在您可以将这些元素放置在任何地方，而无需担心页面的其余部分。

所以，关于你的情况。你选对了位置，固定的。现在它上面的元素看不到它，您必须手动将此标题元素的高度添加为边距和/或填充到下一个元素的顶部。

例如，如果您有以下情况：

```
 <div class="header"></div>
   <div class="content"></div> 
```

重复你所做的添加一个固定到标题的位置，并考虑到它的高度是 50 px，内容元素将得到一个 padding-top:50px 并且它应该可以解决问题。

```
 <style>
   .header{position:fixed;top:0;height:50px;}
   .content{padding-top:50px;}
   </style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-25T17:56:20.437

当您将 an 元素设置为具有固定定位时，它假定其他相邻元素不存在。为要修复的元素提供更大的 z-index。然后为了防止重叠，给固定元素前面的元素与固定元素的高度相同的 padding-top。希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-10T16:25:38.113

您可以使用**z-index**

您希望哪个元素位于其他元素之前，将 z-index 值设置得更高。

像这样：

```
z-index: 300;//navbars

z-index: 0;//contents 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T19:26:28.697

CSS Z-index 可能是您的解决方案

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-03T04:13:42.360

```
 #header {
      margin-top:-38px; //solution
      margin-left: 0px;
      width: auto;
      height: 90px;
      padding: 0px;
      padding-left:185px;
      font-size: 35px; 
      color:#FFFFFF;   
      background-color: #f6c491;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
    } 
```

# c# - 我怎样才能让设计师制作的表单事件屈服于其他线程？

> ID：10865241
> 
> 赞同：0
> 
> 时间：2012-06-02T19:24:29.690
> 
> 标签：c#, winforms, multithreading

如何使 GUI 事件屈服于给定线程？GUI 事件是指诸如打开子表单、选择不同的选项卡、最小化/最大化我的表单或更改焦点之类的事情。

当我的工作线程获取数据时，我可以限制它的资源，并拒绝来自我应用程序中其他进程或线程的这些资源吗？

***历史：***
在我的问题[中](https://stackoverflow.com/questions/10834329/how-to-properly-use-realtime-priority)，我解释了一个场景，我担心我的主表单调用会导致我的关键线程挂断。然后向我透露，我可以选择“BeginInvoke”。

现在我发现，虽然 BeginInvoke 让我走到了一半，但我仍然无法避免我的关键线程中的挂断。当我说“关键线程”时，我指的是一个循环大约需要 60 毫秒的线程，但必须在 130 毫秒过去之前完成循环。它坐在那里循环，轮询数据列表。当数据出现时，通常需要 40 到 60 毫秒才能完成处理。

我**有**（从技术上讲，我计划恢复）第二个线程向我的表单抛出 BeginInvokes 以更新用户的运行状态。目前，出于调试目的，我没有这样做。

我做了一些分析，我注意到我几乎总是将我的处理时间远远低于 100 毫秒，这是我需要的，因为我的应用程序需要不迟于下一个数据包出现时输出结果（每 100 毫秒，但对于这个例子我把它减慢到 130 毫秒）。当我与表单交互时，例如改变焦点或最小化/最大化它，我可以看到我的处理时间峰值超过 1 秒。我认为这是因为诸如最小化或最大化或其他重绘事件之类的愚蠢事情正在掠夺我所有宝贵的时钟时间。

***平台：***
我正在使用带有 WinForms 的 Visual C# 2008。目标机器运行 Windows XP。我尝试关闭 Windows 资源管理器，并以 Normal、High 和 Realtime 优先级运行我的应用程序，但在操作表单时我仍然看到几乎相同的影响。

***编辑*** 我试图在工作循环期间的关键时刻使用 Thread.CurrentThread.Priority 来限制我的优先级。这不知何故无法从我的 GUI 中夺走这些资源，涉及重绘 GUI 的操作仍然统治着我可怜的工作线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:42:43.367

[您是否尝试使用Thread.Priority](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx)属性将工作人员类的线程优先级设置为实时？

根据[调度优先级](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)的描述，这应该为您的工作线程提供更高的优先级。但是，这会导致您的 GUI 卡顿，因此您可能只想在关键时间段将优先级设置为高。

# binary-tree - 二叉树中距离最大的两个节点

> ID：10865246
> 
> 赞同：3
> 
> 时间：2012-06-02T19:24:54.057
> 
> 标签：binary-tree

我遇到了问题的修改版本（在二叉树中查找位于距离 k 处的两个节点）。

我试图定义两个节点之间的距离，我相信它是沿着树枝从节点 n1 到节点 n2 所需的最小节点数。

继续这个假设，我遇到了一种情况，我相信我需要知道每个节点是在根的左边还是右边。

案例1：如果n1和n2在不同的一侧，那么我爬到根部（距离等于节点n1的深度-假设n1在左边）然后我跑到右边的节点n2（距离等于n2的深度）。因此，如果两个节点 n1 和 n2 位于根的不同侧，则它们之间的最大距离是它们的深度之和。

案例 2：如果 n1 和 n2 在同一侧，我在树层次结构中找到一个共同的祖先，并重复相同的过程，考虑祖先是我在案例 1 中所做的根。最小距离将是总和它们从根开始的深度 - 共同祖先深度的 2 倍。

现在，这个问题是，我最终坦率地为每一对节点都这样做。如果我知道一对节点的距离超过这个，我可以优化它以不检查一对节点，但是如何？

请提出解决方案的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:37:01.167

[与二叉树](http://www.geeksforgeeks.org/archives/5687)的直径相同的问题（参见自下而上的方法），它定义为树中两个叶子之间最长路径上的节点数。在您的情况下，您还必须找出节点。

# windows-phone - 在 Windows Phone 中扩展 IE Sharepicker

> ID：10865251
> 
> 赞同：2
> 
> 时间：2012-06-02T19:25:37.817
> 
> 标签：windows-phone

有一种很酷的方法可以扩展 Windows Phone Mango 中照片的共享选择器，详见[此处](http://msdn.microsoft.com/en-us/library/ff967563%28v=vs.92%29.aspx)。我想为在 IE 中共享网页做同样的事情，但看起来不可能。你知道一种方法吗？

# iphone - 突出显示单个烛台的核心图

> ID：10865253
> 
> 赞同：1
> 
> 时间：2012-06-02T19:25:39.597
> 
> 标签：iphone, ios, core-plot

我有`CPTTradingRangePlot`一个`CPTTradingRangePlotStyleCandleStick`风格。

我正在寻找一种方法来突出显示具有不同填充颜色（或发光或其他东西）的特定（或几个）烛台，但我找不到以类似于 a 的方式访问单个烛台的`CPTBarPlot`方法和`-(CPTFill *)barFillForBarPlot:(CPTBarPlot *)barPlot recordIndex:(NSUInteger)index;`

我在这里错过了什么吗？我可以在数据加载后以某种方式访问​​特定的烛台，然后更改填充颜色吗？

我也在考虑添加一个注释层，并可能在特定烛台周围画一个圆圈，但我不想使用图像，因为当我调整它的大小时它会被拉伸和像素化。有没有办法在烛台周围绘制基于矢量的形状作为注释？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:44:37.163

[您可以在Core Plot 问题跟踪器](http://code.google.com/p/core-plot/issues/list)上提出对该功能的请求。同时，您可以通过使用多个情节来实现相同的外观，每种不同的风格都有一个情节。

# javascript - KineticJS：禁用拖动

> ID：10865261
> 
> 赞同：0
> 
> 时间：2012-06-02T19:26:48.263
> 
> 标签：javascript, canvas, draggable, kineticjs

我需要找到一种方法来禁用 KineticJS 中的拖动形状

例如，我有一个`draggable`启用了该选项的 Circle。

如果按下 shiftKey，我想禁用拖动这个圆圈，我想以不同的方式处理这种情况。

这是我想做的一个例子：http: [//jsfiddle.net/nL3kb/](http://jsfiddle.net/nL3kb/)

有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T01:32:08.680

你有几个选择。您可以做的一件事是使组可拖动并将圆圈添加到组中。在 mousedown 上，如果按下 shift，您可以取消事件传播，从而取消组拖放功能。

[http://jsfiddle.net/SyMRJ/](http://jsfiddle.net/SyMRJ/)

您还可以添加逻辑，在按下 shift 键时使用 draggable(false) 关闭拖放

干杯!

# android - 当用户关闭特定偏好屏幕时运行一些代码？

> ID：10865267
> 
> 赞同：0
> 
> 时间：2012-06-02T19:27:28.393
> 
> 标签：android, sharedpreferences

有没有办法找出用户何时关闭特定的偏好屏幕？当用户在我的首选项屏幕之一中更改首选项时，我需要进行一些更新。不是当用户点击一个实际的复选框时，而是当他们按下后退按钮并完成编辑首选项时。

到目前为止，我所能找到的只是我可以覆盖我的 PreferenceActivity 的 onPause() 事件，这似乎在用户关闭首选项时发生。它有效，但我不确定这是最好的方法。有什么建议么？

**编辑**

我不知道如何从 PreferenceActivity 中实际调用我的主要活动的方法。尝试使用 putExtra() 和各种东西。最终我想——为什么不做完全相反的事情呢？因此，我在主要活动中实现了 onResume() 方法。当用户关闭首选项时，它非常适合做一些事情，而且我可以忍受每次我恢复我的应用程序时我的更新方法都会运行的事实。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T07:17:16.790

好吧，直到 2 分钟前，我一直在寻找这个问题的解决方案……我想我找到了方法。

```
Preference myPrefScreen = findPreference("myPrefScreen");
    myPrefScreen 
            .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                @Override
                public boolean onPreferenceClick(Preference prefScreen) {
                    // TODO Auto-generated method stub

                    Dialog prefScreenDialog = ((PreferenceScreen) prefScreen)
                            .getDialog();
                    prefScreenDialog
                            .setOnDismissListener(new OnDismissListener() {

                                @Override
                                public void onDismiss(DialogInterface arg0) {
                                    // TODO Auto-generated method stub

                                    ///HERE YOU CAN EXECUTE WHATEVER YOU WANT... 
                                }
                            });
                    return false;
                }
            }); 
```

您需要 OnPreferenceClickListener 正确实例化仅在屏幕上点击 PreferenceScreen 条目后生成的 PreferenceScreen 对话框，并显示带有首选项子项的新窗口。否则，您总是 getDialog() 返回 null 并且无法将 OnDismissListener 附加到它。

一旦你设置了 OnDismissListener，技巧就完成了！！

我希望这会有所帮助。

祝大家编码愉快！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:35:57.720

`onPause`是处理和更新的正确位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:37:21.760

这是最好的方法：覆盖 onPause() 方法。它在您的活动离开前台之前被调用。

# c++ - 如何在 Linux 上处理 C 或 C++ 中的箭头、pageUp、pageDown 键

> ID：10865269
> 
> 赞同：0
> 
> 时间：2012-06-02T19:27:31.330
> 
> 标签：c++, c, linux

如何获取键代码，以便我可以使用简单的 C 或 C++ 处理箭头、pageUp、pageDown 等键？

我可以获得常规密钥，我不知道如何获得这些特殊密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:29:04.213

Ncurses 应该能够处理这个问题。那里有很多教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:49:58.313

基于 Linux 的系统遵循 UNIX 传统，因为这些键是特殊的，它们的值取决于终端设置。

之所以如此，是因为在过去，每个 UNIX 系统都有完全不同类型的键盘。因此，能够编写通用代码来处理这些特殊键有点复杂。

最好的方法是使用终端处理库，如curses 或其后继ncurses。

在这里你可以得到一个关于键盘使用的很好的介绍，

[http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/keys.html](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/keys.html)

# c# - 你调用的对象是空的

> ID：10865276
> 
> 赞同：-2
> 
> 时间：2012-06-02T19:27:56.927
> 
> 标签：c#

我正进入（状态

> 你调用的对象是空的

尝试`GetPersonName()`在我的主要方法中调用该方法时出错。

谁能解释我为什么会发生这个错误？

这是我的代码。谢谢你

```
//My Class
class Program
{
    // Main Method
    static void Main(string[] args)
    {
        DMO dmo = GetPersonName();
        Console.Write(dmo.PersonArray[0].Name);
        Console.ReadKey();
    }

    private static DMO GetPersonName()
    {
        DMO dmo = new DMO();
        dmo.PersonArray[0] = new Person { Name = "XXXXXX" }; // Object reference not set to an instance of an object.
        return dmo;
    }
}

// My Data Model Object
public class DMO
{
    private Person[] _personArray;

    public Person[] PersonArray
    {
        get { return _personArray; }
        set { _personArray = value; }
    }
}

public class Person
{
    private string _name = "";

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:29:11.143

在你的`DMO`课堂上，你永远不会实例化你的`_personArray`.

实例化时`DMO` `_personArray`是`null`，所以这段代码：

```
dmo.PersonArray[0] 
```

`dmo.PersonArray`按原样失败，`null`您无法访问其任何成员。

您需要实例化*整个*数组：

```
dmo.PersonArray = new Person[] { new Person { Name = "XXXXXX" } }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:36:17.487

这是因为您的`_personArray`数组为空，它将始终返回该错误，例如，您可以做的是给它一个默认初始化，例如：

```
private Person[] _personArray = new Person[2]; 
```

# php - 使用 codeigniter 和 php 在单独文件中的 Jquery

> ID：10865278
> 
> 赞同：1
> 
> 时间：2012-06-02T19:28:06.157
> 
> 标签：php, javascript, jquery, codeigniter

我知道您可以将您的 $(document).ready() 代码与 html 分开放入单独的文件中，但是作为我的 javascript 的一部分，我使用一些回调来调用 codeigniter PHP 函数，例如 site_url() 这在部分时不起作用一个单独的 .js 文件。

这是一个例子：

登录页面.php

```
<script type="text/javascript" src="<?php echo site_url('scripts') . '/' . 'app/login_page.js'; ?>"></script> 
<div id="loginForm" class="prepend-2 column span-21">
    <p class="tips"></p>
    <div class="column span-10">
        <dl>                
            <dt><label>Email:</label></dt>
            <dd><input type="text" name="email" id="email" class="text" /></dd>
        </dl>
    </div>
    <div class="column span-10 last">
        <dl>                
            <dt><label>Password:</label></dt>
            <dd><input type="password" name="password" id="password" class="text" /></dd>
        </dl>
    </div>
    <div class="column prepend-7 span-10 append-5 ">
        <dl>                
            <dt><label>&nbsp</label></dt>
            <dd><input type="submit" value="Login" id="loginButton" /></dd>
        </dl>
    </div>
</div> 
```

login_page.js

```
$(document).ready( 
function()
{
    //login
    $("#password").keyup(function(event){ if(event.keyCode == 13){          $("#loginButton").click();}}); //submit on enter key
    $('#loginButton').click(function()
    {            
        do_login($("#email"), $("#password"), $(".tips"), "<?php echo site_url('dashboard'); ?>", "<?php echo site_url('login/log_in'); ?>");
        return false;
    });
}); 
```

所以这里的问题出在我试图调用 PHP site_url 的 do_login 中，但它显然不起作用。如果我的 php 内联中有 javascript，这一切都可以正常工作，但这会使文件相当大，我更喜欢单独的文件。

我需要知道这甚至可能吗？如果是这样，有没有人想出一个优雅的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:39:26.453

您可以将 base_url 定义为 JS 全局变量，或者更好地声明一个 JS 全局对象，`login_page.php`其中包含您稍后可能需要的所有 url `login_page.js`。然后它们将位于一个单独的容器中，并且可以在该声明之后加载的任何 JS 代码中使用，内联或外部。

```
<script type="text/javascript">  
    window.URLS  = {
      "BASE_URL" : "<?php echo site_url(....); ?>",
      "LOGIN_URL" : "<?php echo site_url(....); ?>",
      "DASHBOARD_URL" : "<?php echo site_url(....); ?>",
    };
</script> 
```

然后`login_page.js`像这样使用它

```
do_login($("#email"), 
         $("#password"), 
          $(".tips"), 
          URLS.DASHBOARD_URL, 
          URLS.LOGIN_URL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:33:31.370

最简单的方法是在您的 HTML 中定义一个 JS 变量 - 供您的 JS 文件使用。

```
<script type="text/javascript">  
    _Base_URL = "<?php echo base_url();?>";
</script> 
```

然后在你的 JS

```
do_login($("#email"), $("#password"), $(".tips"), (_Base_URL+"dashboard"), (_Base_URL+"login/log_in) "); 
```

# java - JMX 和两个网络接口

> ID：10865281
> 
> 赞同：2
> 
> 时间：2012-06-02T19:28:22.217
> 
> 标签：java, network-programming, jmx, nic, multihomed

在工作中，我们有两台装有 Windows XP 和 JDK 1.6.0_07 的 PC（目前无法更新 Java），都有两个网络接口 (NIC)，第一个具有 190.1.XXX.XXX 形式的 IP（让我们调用它 IA)，第二个有 190.2.XXX.XXX (IB)。“ipconfig /all”为两个 NIC 带来主机名 HOSTNAME，“nbtstat /a IA”和“nbtstat /a IB”也是如此。从 IB 到 IA 不存在 ping（我想，没有从 IA 到 IB，虽然没有检查）。为了健壮性，我们应该确保我们的实际应用程序在两个 NIC 上都使用 JMX。问题从这里开始。可以通过以下方式观察到相同的行为：

```
java -Dcom.sun.management.jmxremote.port=9000 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -jar <JDK_HOME>/demo/jfc/Java2D/Java2Demo.jar 
```

在第二台 PC 上，带上 JConsole 并使用以下之一附加到远程进程：IA:9000 或 IB:9000 或 HOSTNAME:9000。他们都工作。但是，如果我在第一台 PC（运行 Java2Demo 的地方）上禁用 IA，则根本不可能有任何附件（IB 和 HOSTNAME 都没有）。IB 的 Ping 有效，mstsc 也有效（因此 IB 建立了连接）。但是如果我禁用 IB，我会同时通过 IA 和 HOSTNAME 获得附件。

1.  我只是不明白在这种情况下 JConsole 不会附加到 IB 上是怎么可能的。AFAIK，如果我们没有定义 java.rmi.server.hostname，JMX 使用 0.0.0.0 并监听两个 NIC。如果这与网络本身有关，请提供建议以向 IT 部门询问什么。
2.  我们的实际应用程序有一个解决方法：在第一台 PC 上，它启动 2 个单独的进程，每个进程仅在一个 NIC 上具有 JMX，第三个进程将来自客户端的数据与第三个 JMX 合并。这三个进程分别从 .bat 文件启动。我真的很想改变这一点，在两个 NIC 上都有一个带有一个 JMX 的进程；或者至少，如果可能的话，用两个 JMX 启动一个进程，每个 NIC 一个。是吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:41:10.887

您可以使用 JMXConnectorServerFactory 在同一个 jvm 上启动多个 JMXConnectorServer（网上有很多示例/教程）。您可以公开平台 MBeanServer 或您自己的自定义 MBeanServer。

# c# - 使用 google Api 获取地理位置

> ID：10865282
> 
> 赞同：0
> 
> 时间：2012-06-02T19:28:26.833
> 
> 标签：c#

我想显示特定城市（例如伦敦或任何其他城市）的位置。我想使用 Windows 窗体或 Windows Presentation Foundation 显示位置。但我不知道如何使用 Google API 获取位置。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:39:32.270

也许这就是您正在寻找的： http: [//greatmaps.codeplex.com/](http://greatmaps.codeplex.com/)

# xml - 在 Android 中使用 XMLSerializer 附加到 root

> ID：10865283
> 
> 赞同：0
> 
> 时间：2012-06-02T19:28:35.100
> 
> 标签：xml, xmlserializer, android-xml

我在循环中附加到序列化程序，但是在放置根元素时遇到问题。

使用此代码：

```
serializer = serializer.startTag(null, StaticClass.ROOT);

for (int i = 0; i < categoriesCursor.getCount(); i++) {
    appendToCategoriesXml(serializer, id, name, kind, uses);
    categoriesCursor.moveToNext();
} 
```

我不明白为什么根会自动放在第一个列表元素之后，如下所示：

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
  <root>
    <category id="1">
      <name>fun</name>
      <kind>exp</kind>
      <uses>0</uses>
    </category>
  </root>
    <category id="2">
      <name>food</name>
      <kind>exp</kind>
      <uses>15</uses>
    </category> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:36:13.730

我刚刚发现了问题......这很愚蠢。我在每次迭代时都做了 EndDocument，所以它在第一次迭代之后就结束了 root ......

# css - CSS中的积极前瞻

> ID：10865285
> 
> 赞同：11
> 
> 时间：2012-06-02T19:28:38.283
> 
> 标签：css, regex

我知道在 Perl 正则表达式中，正前瞻的概念，即`q(?=u)`匹配 aq 后跟 au，而不使 u 成为匹配的一部分。我在 css 中寻找类似的东西：我想匹配 a `div`，然后是兄弟姐妹`div.specialClass`。

```
<div>..</div>  <!-- div to match -->
<div class="specialClass">..</div> 
```

我玩过 + 但与 匹配`div.specialClass`，而我想要前面的`div`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T19:30:57.803

您还不能声明选择器的哪一部分是主题。在 CSS 中，主题始终是选择器的最后一个元素，直到我们能够移动它，可能使用`$`or`!`语法。

```
// Always selects the .specialClass div which follows another div
div + div.specialClass {
    color: red;
} 
```

将来，您将能够使第一个 div 成为主题，可能使用以下语法：

```
// Selects any `div` preceding any `div.specialClass`
$div + div.specialClass { // or maybe div! + div.specialClass
    color: red;
} 
```

您在此期间唯一的*解决方法*是使用 JavaScript。像 jQuery 这样的工具会让这变得非常简单：

```
$("div + div.specialClass").prev(); 
```

它现在是对`div`紧接在 any 之前的所有元素的引用`div.specialClass`。

演示： http: [//jsfiddle.net/jonathansampson/HLfCr/](http://jsfiddle.net/jonathansampson/HLfCr/)
来源：[http ://dev.w3.org/csswg/selectors4/#subject](http://dev.w3.org/csswg/selectors4/#subject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T07:49:17.977

现在不是很有帮助，但是，

将来我们可以使用 CSS4 选择器**[`:has()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:has)**来解决这个问题。

目前根本[没有浏览器兼容性](https://github.com/mdn/browser-compat-data/blob/master/css/selectors/has.json)。

```
div:has(+div.specialClass) 
```

# cocoa - 为什么 Cocoa 的 [NSDate distinctPast] 不等于从字符串初始化的相同日期？

> ID：10865287
> 
> 赞同：1
> 
> 时间：2012-06-02T19:29:02.593
> 
> 标签：cocoa, date

如果这段代码在一个空的 Cocoa 应用程序中执行：

```
NSLog([[NSDate distantPast] isEqualToDate:[NSDate dateWithString:[[NSDate distantPast] description]]] ? @"YES" : @"NO"); 
```

我得到`NO`了结果。

考虑到 NSDate 已经存在了多长时间，我不认为它是一个错误，但它看起来有点奇怪，因为`[NSDate dateWithString:@"0001-01-01 00:00:00 +0000"]`实际上返回了`0001-01-03 00:00:00 +0000`。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:35:18.473

罪魁祸首是-[NSDate dateWithString:]。从 10.7 开始，它已被弃用。

```
@interface NSDate (NSCalendarDateExtras)
/*    DEPRECATED DEPRECATED DEPRECATED
 *    These methods are deprecated.
 *    Use NSCalendar for calendrical calculations.
 *    Use NSDateFormatter for date<->string conversions.
 */
...
+ (id)dateWithString:(NSString *)aString;
...
@end 
```

这种方法一直存在问题，从不推荐用于日期解析。NSDateFormatter 允许更好地控制解析。

# java - MVC - 循环依赖

> ID：10865289
> 
> 赞同：8
> 
> 时间：2012-06-02T19:29:04.783
> 
> 标签：java, model-view-controller, circular-dependency

我需要视图来保存对控制器的引用，因为它需要将控制器注册为事件侦听器。我需要控制器来保存对视图的引用，因为单击按钮后，我需要能够在列表中获取选定的文件。（我有一个文件列表和一个“添加集群”按钮，所以当单击该按钮时，我需要获取选定的文件）

简而言之，我有：

```
Controller controller(view);
View view(controller); 
```

我敢肯定这里有一些不好的设计，我只是不知道如何避免它..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T20:21:08.193

我不确定您使用的是什么 Java 技术，但在 GWT 应用程序中 - 并使用 MVP 模式 - 视图不需要引用控制器：控制器（或演示者）和视图之间的所有通信是通过 View 实现的接口实现的。在您的特定情况下，您的代码应如下所示：

定义一个显示接口：

```
public interface Display {
    public void registerEventListener(Listener aListener)
    public List getSelectedFiles ()
} 
```

让 View 实现该接口：

```
public class View implements Display{
//The method implementations
} 
```

并在控制器中进行所有必要的绑定：

```
public class Controller{
    private Display view;
    public Controller(){
        //Or use some DI technology
        this.view = new View();
        //Get a Listener implementation, maybe an Anonymous Inner Class
        this.view.registerEventListener(getListener());
    }

    public void processFiles(){
        List files = view.getSelectedFiles();
        //Do the processing here
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T19:31:15.523

一种可能的解决方案：

*   简单地给Controller一个`addView(View view)`方法
*   同样对于 View 给它一个`addController(Controller controller)`方法。
*   使其成为您的文档的一部分，这些必须在使用前进行设置。
*   确保在使用它们之前检查引用变量不为空，因为它们不会在构造函数中设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T19:35:02.463

好吧，我相信您可以使用封装以及延迟初始化过程。我相信您在控制器初始化时不需要视图，反之亦然。如果不是，您也可以将上述答案与 bean 的惰性初始化属性结合使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:19:10.047

要正确绑定视图和控制器，请右键单击 *.aspx 页面并选择“转到控制器”菜单。现在在受人尊敬的控制器中添加一个具有以下语法的方法。

```
public ActionResult viewName()
{
   return view()
} 
```

其中 viewname 是前视图的名称。在 .net 中，它是没有 aspx 扩展名的页面名称 现在，当您右键单击视图并选择菜单“转到查看”时，这会将您移动到受尊重的页面，这确认您的视图和控制器已很好地绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-16T07:00:35.383

创建四个部分：1-Control 2-Model 3-View 4-ViewInterface

第 4 节是 Control 和 View 之间的中间层。当您初始化 View 时初始化 IControl 接口，如

```
IControl control = new ControlUtil((IViewUtil(new ViewUtil()); 
```

您将视图界面传递给要使用的控件。当视图想要调用控件时，就像在说“嘿控件做某事，这是我的界面，以防你需要它。

# java - 在 Android 上截屏

> ID：10865297
> 
> 赞同：4
> 
> 时间：2012-06-02T19:30:51.170
> 
> 标签：java, android, screenshot, root

我正在尝试为 android 构建一个自定义启动器，该启动器需要在用户按下主页按钮后立即截取设备的屏幕截图，因此在我的应用程序（启动器）返回前台之前。这个想法几乎是在我的启动器/活动/应用程序接管屏幕之前截取设备显示的任何内容。

我知道这样的事情需要root访问权限，但这不是问题。谁能教我怎么截图？一些示例代码？网上有教程吗？我在网上查过，但找不到任何有用的东西。我正在尝试简单地截取屏幕截图，就像 Android 市场上已经使用 root 访问权限的大量应用程序一样。提前致谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:33:13.023

这是一个安全漏洞。你应该有一个根设备才能做到这一点。

您可以将此代码与您自己的应用程序一起使用：（我从另一个问题的答案中获得了此代码：[https](https://stackoverflow.com/a/5651242/237838) ://stackoverflow.com/a/5651242/237838 ）

```
// image naming and path  to include sd card  appending name you choose for file
String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND;   

// create bitmap screen capture
Bitmap bitmap;
View v1 = mCurrentUrlMask.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

OutputStream fout = null;
imageFile = new File(mPath);

try {
   fout = new FileOutputStream(imageFile);
   bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
   fout.flush();
   fout.close();
} catch (FileNotFoundException e) {
   e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
} 
```

尝试查看此代码以获取更多帮助：

*   [code.google.com/p/android-screenshot-library/wiki/DeveloperGuide](http://code.google.com/p/android-screenshot-library/wiki/DeveloperGuide)

**PS**可以使用 DDMS 从 Android 截取屏幕截图，但这是另一回事。

**PPS**如果你想在它下面的活动上透明地绘制你的启动器，你需要将像素格式设置为 RGBA（仅处理 OpenGL）并相应地渲染。您无需截取底层活动的屏幕截图即可执行此操作。

**有根设备：**在有根设备上使用此代码：

```
process = Runtime.getRuntime().exec("su -c cat /dev/graphics/fb0");
InputStream is = process.getInputStream(); 
```

# c# - 你知道 Gauss Newton 和 Levenberg Marquardt 方法的 C# 实现吗？

> ID：10865308
> 
> 赞同：3
> 
> 时间：2012-06-02T19:32:04.133
> 
> 标签：c#, algorithm, mathematical-optimization, nonlinear-optimization

我正在寻找 Gauss Newton 和 Levenberg Marquardt 算法的 C# 实现。那里已经有任何“受托人”C# 库了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:37:17.500

你可以看看这个[数字](http://en.wikipedia.org/wiki/List_of_numerical_libraries#.NET_Framework_Languages_C.23.2C_F.23_and_VB.NET)库列表

# android - 从 ItemizdOverlay 中删除 OverlayItem

> ID：10865311
> 
> 赞同：0
> 
> 时间：2012-06-02T19:32:19.920
> 
> 标签：android, google-maps, overlay

我正在尝试从 ItemizedOverlay 中删除 OverlayItem ，但这似乎是不可能的。我尝试了很多我在互联网上找到的东西，但它不起作用。我想删除它以使用不同的 GeoPoint（用户位置）再次添加它。

```
List<Overlay> listOfOverlays = map.getOverlays();
        listOfOverlays.clear();

        if (!first)
        {
            map.getOverlays().remove(youHere);
            map.getOverlays().remove(overlay2);
        }

        youHere = new OverlayItem(point, "You are here", null);

        overlay2.addOverlay(youHere);

        mapOverlays.add(overlay);
        mapOverlays.add(overlay2); 
```

我怎样才能删除它？先感谢您！

# cakephp - cakephp 模型：字段与设置方法

> ID：10865312
> 
> 赞同：1
> 
> 时间：2012-06-02T19:32:21.800
> 
> 标签：cakephp, model

在我的代码中，我正在使用一些集合调用设置模型的字段，例如

```
$model->set('field','value'); 
```

如果我理解正确，这将设置`$model->data`数组中的字段值。紧接着（即相同的请求，但代码的不同部分），我想访问这些字段以进一步处理它们。我认为这是可能的：

```
$value = $model->field('field'); 
```

但这不起作用，因为（正如我通过查看代码发现的那样）`field()`正在查询表，但不使用`$model->data`数组。现在我的问题：

1.  `$model->set(...)`从刚刚设置但尚未保存到表中的模型中再次读取字段值的“正确”方法是什么？直接访问`$model->data`？
2.  是否需要先调用`$model->save()`才能再次访问字段值？
3.  我觉得有一种方法可以对称地设置和检索字段值而无需在两者之间进行保存是一致的。cakephp 有同感吗？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:27:23.623

1.  用于`$model->data`访问要保存的模型中的当前数据。就像你说的，`field()`做一个查询。要在保存之前修改数据，可以使用`Model::beforeSave()`回调或在为模型设置数据之前修改数据。

2.  如果您的意思是在另一个请求中访问，是的，您必须保存。如果您的意思是在保存之前访问当前请求中的数据，则不。有关如何访问/更改数据的信息，请参见 #1。

3.  不必要的，请参阅#1。

# facebook - PHP - 验证 oauth_token 而不进行 api 调用

> ID：10865316
> 
> 赞同：1
> 
> 时间：2012-06-02T19:32:56.447
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, vbulletin

我正在为 Facebook 连接的 vBulletin 编写一个 PHP 类。我需要一种验证 oauth 令牌的方法，而无需向 Facebook 发出 cURL 请求以进行验证检查。

它必须执行一些字符串格式验证，但不能仅与特定权限 oauth 令牌等绑定，必须相当“通用”。以前有没有人这样做过，如果有，怎么做？

期待您的回复。:)

# iphone - iOS - 选择单元格时如何禁用 UITableView 滚动到顶部？

> ID：10865324
> 
> 赞同：0
> 
> 时间：2012-06-02T19:33:50.147
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

问题是当我触摸/选择任何单元格时，我的 UITableView 会自动滚动到顶部。我不知道可能是什么问题。这是我的 UITableView 的结构：

```
UITableViewController
 -table header:
  -UIView
   -UIScrollView with paging enabled
   -UIPageControl
 -Prototype Cell:
  -UIView
   - 3 UITextLabels 
```

**添加：**

这是我按下单元格时显示详细视图的代码，我不使用`didSelectRowAtIndex`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowEventDetails"]) {

        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
        EventDetailsViewController *detailViewController = [segue destinationViewController];
        detailViewController.event = [listOfEvents.eventsList objectAtIndex:selectedRowIndex.row];
    }
} 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:31:50.160

我已通过禁用`pagingEnabled`. `tableView`谁能解释分页对tableview滚动到顶部的影响？

# python - 确定 lambda 中的参数数量

> ID：10865325
> 
> 赞同：45
> 
> 时间：2012-06-02T19:33:53.240
> 
> 标签：python, lambda

我想知道是否有办法确定（给定一个包含 lambda 的变量）它包含的 lambda 参数的数量。原因是，我希望根据参数的数量有条件地调用一个函数。

我在寻找什么

```
def magic_lambda_parameter_counting_function(lambda_function):
    """Returns the number of parameters in lambda_function

    Args:
        lambda_function - A lambda of unknown number of parameters
    """ 
```

所以我可以做类似的事情

```
def my_method(lambda_function):

    # ... 
    # (say I have variables i and element)

    parameter_count = magic_lambda_parameter_counting_function(lambda_function)

    if parameter_count == 1:
        lambda_function(i)
    elif parameter_count == 2:
        lambda_function(i, element) 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-02T19:37:46.783

Lambda 和其他函数一样。参数计数存储在`func.__code__.co_argcount`.

```
>>> foo = lambda x, y=2: x+y
>>> foo.__code__.co_argcount
2
>>> foo = lambda x, y=2, z=3: x+y+z
>>> foo.__code__.co_argcount
3 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-02T19:37:18.887

我跳过了关于如何计算参数的部分，因为我不知道你想如何考虑可变参数和关键字。但这应该让你开始。

```
>>> import inspect
>>> foo = lambda x, y, z: x + y + z
>>> inspect.getargspec(foo)
ArgSpec(args=['x', 'y', 'z'], varargs=None, keywords=None, defaults=None) 
```

听起来[inspect.getargspec 自 Python 3 起已被弃用](https://docs.python.org/3/library/inspect.html#inspect.getargspec)（感谢@JeffHeaton）。推荐的解决方案使用[inspect.signature](https://docs.python.org/3/library/inspect.html#inspect.signature)。结果的`.parameters`成员包含各种结构，具体取决于所讨论函数的参数排列，但我正在匹配上面 Python 2 示例中的函数。

```
>>> import inspect
>>> foo = lambda x, y, z: x + y + z
>>> inspect.signature(foo).parameters
mappingproxy(OrderedDict([('x', <Parameter "x">), ('y', <Parameter "y">), ('z', <Parameter "z">)])) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-02T19:46:19.453

从[可调用类型](http://docs.python.org/reference/datamodel.html#the-standard-type-hierarchy)的文档中，函数的`func_code`属性包含一个代码对象，并且从代码对象的检查模块文档中，[有](http://docs.python.org/library/inspect.html#types-and-members)一个`co_argcount`包含参数数量的成员（不包括`*`或`**`args）。

因此，从 lambda 函数（或任何函数）获取此信息的最佳方法是使用`func.func_code.co_argcount`：

```
>>> foo = lambda a, b, *args, **kwargs: None
>>> foo.func_code.co_argcount
2 
```

# php - PHP/MySQL - 删除记录

> ID：10865329
> 
> 赞同：-3
> 
> 时间：2012-06-02T19:34:13.407
> 
> 标签：php, mysql

我正在尝试选择删除我网页上的帐户。我似乎无法运行查询...这是我一直在使用的代码。

```
<?php 
if (!$con)
    {
        die("<p class='info'>Cannot delete account. Try again later.</p>" . mysql_error());
    }
$db_query=("DELETE FROM Persons WHERE username='???'");
echo "Account deleted!"
    ?> 
```

谁能告诉我这段代码是否正确，如果正确，里面有什么？？？。

**编辑：**

我想要做的是用户可以点击删除，他们可以删除他们的帐户。$session 变量仍然返回错误。

等等，我意识到 $con 是未定义的。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:39:10.533

代码不正确。我所看到的只是您正在检查是否设置了变量`$con`（在其他地方定义？），然后将字符串分配给`"DELETE FROM Persons WHERE username='???'"`变量`$db_query`。您根本不会在代码中执行任何数据库调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:40:42.523

```
mysql_query("DELETE FROM `Persons` WHERE `username`='$username'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:41:42.850

它应该是这样的

```
<?php 
if (!$con)
{
    die("<p class='info'>Cannot delete account. Try again later.</p>" . mysql_error());
}
$db_query = "DELETE FROM Persons WHERE username='john_smith'");
$result = mysql_query($db_query);

if($result) {
 echo "Account deleted!"
}
?> 
```

这将删除用户名为 *john_smith* 的用户

# extjs - 获取 ExtJS Active Ajax 调用计数

> ID：10865336
> 
> 赞同：1
> 
> 时间：2012-06-02T19:35:19.960
> 
> 标签：extjs, selenium

我正在使用 selenium 来测试 ExtJs 应用程序。我的问题是，我需要确保页面完全呈现。我不能使用 selenium.waitForPageLoad。在普通的 Ajax 应用程序中，我可以使用“Ajax.activeRequestCount”，它会给出 Ajax 调用计数。如果它是'0'，我们可以确保页面完全加载。ExtJs 中是否有类似的功能可用？任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T22:57:57.420

ExtJs 中没有这样的方法。但是，您可以为全局 Ext.Ajax 事件`beforerequest`和`requestcomplete` [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-event-beforerequest](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-event-beforerequest)创建处理程序并自己计算活动连接数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:18:56.490

或者，如果要在现代浏览器中运行 Selenium 测试，您可以尝试[Progress Listeners](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)（使用[这些](https://developer.mozilla.org/en/nsIWebProgressListener)）。

对于 Firefox，您可以创建一个简单的插件来等待异步请求完成，然后将该插件与您的 Selenium 测试一起发布。

# r - R - 如何通过索引向量获取多维数组的值

> ID：10865337
> 
> 赞同：15
> 
> 时间：2012-06-02T19:35:25.987
> 
> 标签：r

假设我有一个名为 的多维数组`pi`，直到运行时才知道它的维数：

```
dims <- rep(3, dim_count)
pi <- array(0, dims) 
```

如您所见，维度计数取决于`dim_count`. 当我有索引向量时，如何从数组中检索值？例如，当我有：

```
dim_count <- 5
indexes <- c(1, 2, 3, 3, 3) 
```

我想找回

```
pi[1, 2, 3, 3, 3] 
```

是否有一种简短、有效且希望优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T02:11:45.450

利用鲜为人知的用法`[`：

> `[`当通过单个参数索引数组时，`i`可以是一个矩阵，其列数与`x`;的维数一样多。结果是一个向量，其元素对应于 的每一行中的索引集`i`。

你可以简单地做：

```
pi[matrix(indexes, 1)] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-02T19:47:44.727

`do.call("[",...)`似乎工作。

```
indexes <- c(1,2,3,3,3)
pi[1,2,3,3,3] <- 17  ## so we know if we succeeded or not
do.call("[",c(list(pi),as.list(indexes))) 
```

请注意，您的示例不起作用-您的维度均为 3，但您的某些索引元素> 3 ...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T20:03:53.547

`do.call()`是一个选项：

```
dim_count <- 5
indexes <- c(1, 2, 2, 2, 3)
dims <- rep(3, dim_count)
pi <- array(seq_len(prod(dims)), dims)

do.call(`[`, c(list(x = pi), as.list(indexes))) 
```

这使：

```
> do.call(`[`, c(list(x = pi), as.list(indexes)))
[1] 202
> pi[1, 2, 2, 2, 3]
[1] 202 
```

棘手的一点是以正确的格式获取参数列表。`pi`应该是第一个参数`"["`（或命名为参数`x`，请参阅`?"["`），而我们希望`indexes`其自身的每个元素都是所提供列表的组成部分，而不是该列表中的向量。因此令人费解`c(list(x = pi), as.list(indexes))`。

构造参数列表的另一种可能更容易遵循的方法是：

```
ARGS <- vector("list", length = dim_count + 1)
ARGS[[1]] <- pi
ARGS[2:length(ARGS)] <- indexes
do.call("[", ARGS) 
```

这使

```
> do.call("[", ARGS)
[1] 202
> pi[1, 2, 2, 2, 3]
[1] 202 
```

# php - 如何获得所有结果的字段组，少于所有等

> ID：10865338
> 
> 赞同：0
> 
> 时间：2012-06-02T19:35:29.123
> 
> 标签：php, mysql, sql, grouping

我需要从用户在文本字段中输入的关键字构建一个查询，它将执行以下操作：获取关键字并在表中搜索，之后汽车具有所有给定的关键字，少于全部并继续向下只有一个关键字的汽车。我的表如下所示：

```
field_id | car_id | keyword |
----------------------------
1        | 5       | 1989   |
-----------------------------
2        | 8       | old    |
-----------------------------
3        | 8       | ford   |
-----------------------------
6        | 8       | cheap  |
-----------------------------
4        | 7       | ford   |
-----------------------------
6        | 7       | cheap  |
-----------------------------
5        | 6       | ford   |
----------------------------- 
```

假设用户搜索“old”、“ford”和“cheap”，则应该返回 car_id 8、7 和 6，因为它们包含关键字。此外，我需要知道哪辆车有哪些关键字（8：“旧”、“福特”、“便宜”和 7：“福特”、“便宜”和 6：“福特”）。我不是 MySQL 专家，所以我现在不知道是否可以在这里创建某种多维数组......

我有一个查询，它只选择输入了所有关键字的汽车，如果它有任何用处：

```
Select car_id from keywords 
Where keyword in ("old","ford", "cheap") 
group by car_id having count(*) = 3; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:38:58.333

您不需要，因为它只会在仅存在 3 辆汽车属于给定关键字时发送。试试这个

```
Select car_id from keywords ,,GROUP_CONCAT(keyword)
Where keyword in ("old","ford", "cheap") 
group by car_id 
```

这将为您提供属于汽车的逗号分隔关键字

# java - 处理 OpenCV 和 QuickTime 视频捕获的问题

> ID：10865341
> 
> 赞同：1
> 
> 时间：2012-06-02T19:36:11.463
> 
> 标签：java, opencv, processing, quicktime

我在处理 OpenCV 库时遇到了困难：

[http://ubaa.net/shared/processing/opencv/index.html](http://ubaa.net/shared/processing/opencv/index.html)

我正在运行绝对最基本的示例代码：

```
import hypermedia.video.*;

OpenCV opencv;

void setup ()
{
    opencv = new OpenCV( this );
    opencv.capture( width, height );
}

void draw ()
{
    opencv.read();
    background( opencv.image() );
} 
```

但每次，我都会收到控制台消息：

```
SGIdle failed in icvGrabFrame_QT_Cam with error -1 
```

并且没有视频输入。我的网络摄像头打开，但程序挂起。

我在网上看到其他人遇到这个问题，但是我没有找到一个单一的来源。我感觉它与 QuickTime 的视频捕获有关，但我不确定。

系统信息：

*   最近配备 iSight 摄像头的 MacBook Pro
*   OS X 10.7.3（狮子）
*   快速时间 10.1
*   开放CV 1.1
*   处理 1.5.1

有谁知道发生了什么？当库的最基本功能不起作用时，很难进入实际项目......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:34:12.050

使用视频库做一个变通方法并将视频帧复制到 openCV 层：[http ://habu.phpfogapp.com/?p=3](http://habu.phpfogapp.com/?p=3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:23:09.950

这是使用标准库捕获图像的解决方法示例

```
// OpenCV cannot capture anymore since a iTunes or QuickTime update.
// It returns this error:
// SGIdle failed in icvGrabFrame_QT_Cam with error -1
// This example shows how to use standard video library to capture then
// pass the image to OpenCV.
//
// Pierre Rossel
// 25.2.2013

import hypermedia.video.*;
import processing.video.*;

OpenCV opencv;
Capture video;
int captureW = 640;
int captureH = 480;

void setup ()
{
  size(captureW, captureH);

  opencv = new OpenCV( this );
  opencv.allocate(captureW, captureH);
  opencv.threshold(255); // Clears allocated image

  video = new Capture(this, captureW, captureH);
  video.start();
}

void draw ()
{
  if (video.available()) {
    video.read();
    opencv.copy(video);
  }

  background( opencv.image() );
} 
```

# javascript - Node.js 获取文件扩展名

> ID：10865347
> 
> 赞同：280
> 
> 时间：2012-06-02T19:37:10.703
> 
> 标签：javascript, node.js, file-type

我使用 express 3 在 node.js 中创建文件上传功能。

我想获取图像的文件扩展名。所以我可以重命名文件，然后将文件扩展名附加到它。

```
app.post('/upload', function(req, res, next) {
    var is = fs.createReadStream(req.files.upload.path),
        fileExt = '', // I want to get the extension of the image here
        os = fs.createWriteStream('public/images/users/' + req.session.adress + '.' + fileExt);
}); 
```

如何在 node.js 中获取图像的扩展名？

* * *

## 回答 #1

> 赞同：608
> 
> 时间：2013-04-03T03:32:55.650

我相信您可以执行以下操作来获取文件名的扩展名。

```
var path = require('path')

path.extname('index.html')
// returns
'.html' 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-02T20:16:53.040

**更新**

由于原始答案，[extname()](http://nodejs.org/api/path.html#path_path_extname_p)已添加到`path`模块中，请参阅 Snowfish 答案

**原答案：**

我正在使用这个函数来获取文件扩展名，因为我没有找到一种更简单的方法（但我认为有）：

```
function getExtension(filename) {
    var ext = path.extname(filename||'').split('.');
    return ext[ext.length - 1];
} 
```

您必须要求“路径”才能使用它。

另一种不使用路径模块的方法：

```
function getExtension(filename) {
    var i = filename.lastIndexOf('.');
    return (i < 0) ? '' : filename.substr(i);
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-09-06T02:26:46.660

```
// you can send full url here
function getExtension(filename) {
    return filename.split('.').pop();
} 
```

如果您使用 express，请在配置中间件（bodyParser）时添加以下行

```
app.use(express.bodyParser({ keepExtensions: true})); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-08-28T13:00:28.937

`substr()`使用该方法而不是`split()`&效率更高`pop()`

看看这里的性能差异：http: [//jsperf.com/remove-first-character-from-string](http://jsperf.com/remove-first-character-from-string)

```
// returns: 'html'
var path = require('path');
path.extname('index.html').substr(1); 
```

[![在此处输入图像描述](../Images/f645e19031936147b327564c21fc374e.png)](https://i.stack.imgur.com/zTAw2.png)

**正如@xentek 在评论中指出的那样，**2019 年 8 月更新；**`substr()`现在被认为是遗留功能（[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substr)）。你可以`substring()`改用。`substr()`和之间的区别在于`substring()`， 的第二个参数`substr()`是要返回的最大长度，而 的第二个参数`substring()`是要停止的索引（不包括该字符）。此外，`substr()`接受负的起始位置作为从字符串末尾的偏移量，而`substring()`没有。**

 *** * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-07-30T17:06:22.050

此解决方案支持查询字符串！

```
var Url = require('url');
var Path = require('path');

var url = 'http://i.imgur.com/Mvv4bx8.jpg?querystring=true';
var result = Path.extname(Url.parse(url).pathname); // '.jpg' 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-07-17T20:32:20.090

一个不需要 require 的简单解决方案，它解决了多期延长问题：

```
var filename = 'file.with.long.extension';
var ext = filename.substring(filename.indexOf('.')); 
//ext = '.with.long.extension' 
```

或者，如果您不想要前导点：

```
var filename = 'file.with.long.extension';
var ext = filename.substring(filename.indexOf('.')+1); 
//ext = 'with.long.extension' 
```

确保测试该文件是否也具有扩展名。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-01-29T07:49:20.227

例如，您可以使用[path.parse(path)](https://nodejs.org/api/path.html#path_path_parse_path)

```
const path = require('path');
const { ext } = path.parse('/home/user/dir/file.txt'); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-07-20T13:49:27.303

我确实认为在请求中映射 Content-Type 标头也可以。即使您上传没有扩展名的文件，这也适用。（当文件名在请求中没有扩展名时）

假设您使用 HTTP POST 发送数据：

```
POST /upload2 HTTP/1.1
Host: localhost:7098
Connection: keep-alive
Content-Length: 1047799
Accept: */*
Origin: http://localhost:63342
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,    like Gecko) Chrome/51.0.2704.106 Safari/537.36
Content-Type: multipart/form-data; boundary=----   WebKitFormBoundaryPDULZN8DYK3VppPp
Referer: http://localhost:63342/Admin/index.html? _ijt=3a6a054pasorvrljf8t8ea0j4h
Accept-Encoding: gzip, deflate
Accept-Language: en-US,en;q=0.8,az;q=0.6,tr;q=0.4
Request Payload
------WebKitFormBoundaryPDULZN8DYK3VppPp
Content-Disposition: form-data; name="image"; filename="blob"
Content-Type: image/png

------WebKitFormBoundaryPDULZN8DYK3VppPp-- 
```

这里的名称 Content-Type 标头包含数据的 mime 类型。将此 mime 类型映射到扩展名将为您提供文件扩展名:)。

Restify BodyParser 将此标头转换为具有名称**类型的属性**

```
File {
  domain: 
   Domain {
     domain: null,
     _events: { .... },
     _eventsCount: 1,
     _maxListeners: undefined,
     members: [ ... ] },
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  size: 1047621,
  path: '/tmp/upload_2a4ac9ef22f7156180d369162ef08cb8',
  name: 'blob',
  **type: 'image/png'**,
  hash: null,
  lastModifiedDate: Wed Jul 20 2016 16:12:21 GMT+0300 (EEST),
  _writeStream: 
  WriteStream {
   ... },
     writable: true,
     domain: 
     Domain {
        ...
     },
      _events: {},
      _eventsCount: 0,
     _maxListeners: undefined,
     path: '/tmp/upload_2a4ac9ef22f7156180d369162ef08cb8',
     fd: null,
     flags: 'w',
     mode: 438,
     start: undefined,
     pos: undefined,
     bytesWritten: 1047621,
     closed: true } 
} 
```

您可以使用此标头并手动进行扩展映射（子字符串等......），但也有现成的库。以下两个是我进行谷歌搜索时的最佳结果

*   **哑剧**
*   **哑剧类型**

它们的用法也很简单：

```
 app.post('/upload2', function (req, res) {
  console.log(mime.extension(req.files.image.type));
 } 
```

**上面的代码片段会将png**打印到控制台。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-09-10T20:58:09.940

import extname 以返回文件的扩展名：

```
import { extname } from 'path';
extname(file.originalname); 
```

其中文件是表单的文件“名称”

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-06-11T09:59:16.900

一个延伸的衬里`String.prototype`：

```
Object.defineProperty(String.prototype, "ext", {get: function(x) {return this.split('.').pop()}})
str = 'fox.fbx';
str.ext 
```

结果：

[![在此处输入图像描述](../Images/4ac7c2d28b8b573b0b1548b1bfd0fb9a.png)](https://i.stack.imgur.com/Bpxop.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-19T03:47:37.343

`path.extname`在大多数情况下都可以解决问题。但是，它将包括 last 之后的所有内容`.`，包括 http 请求的查询字符串和哈希片段：

```
var path = require('path')
var extname = path.extname('index.html?username=asdf')
// extname contains '.html?username=asdf' 
```

在这种情况下，你会想尝试这样的事情：

```
var regex = /[#\\?]/g; // regex of illegal extension characters
var extname = path.extname('index.html?username=asdf');
var endOfExt = extname.search(regex);
if (endOfExt > -1) {
    extname = extname.substring(0, endOfExt);
}
// extname contains '.html' 
```

请注意，带有多个句点的扩展名（例如`.tar.gz`）根本不适用于`path.extname`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-02-20T07:12:15.670

```
var fileName = req.files.upload.name;

var arr = fileName.split('.');

var extension = arr[length-1]; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-30T12:06:39.633

以下函数拆分字符串并返回名称和扩展名，无论扩展名中有多少个点。如果没有，它将为扩展返回一个空字符串。以点和/或空格开头的名称也可以使用。

```
function basext(name) {
  name = name.trim()
  const match = name.match(/^(\.+)/)
  let prefix = ''
  if (match) {
    prefix = match[0]
    name = name.replace(prefix, '')
  }
  const index = name.indexOf('.')
  const ext = name.substring(index + 1)
  const base = name.substring(0, index) || ext
  return [prefix + base, base === ext ? '' : ext]
}

const [base, ext] = basext('hello.txt') 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-02T13:07:15.900

试试这个

```
const path = require('path');

function getExt(str) {
  const basename = path.basename(str);
  const firstDot = basename.indexOf('.');
  const lastDot = basename.lastIndexOf('.');
  const extname = path.extname(basename).replace(/(\.[a-z0-9]+).*/i, '$1');

  if (firstDot === lastDot) {
    return extname;
  }

  return basename.slice(firstDot, lastDot) + extname;
}

// all are `.gz`
console.log(getExt('/home/charlike/bar/file.gz'));
console.log(getExt('/home/charlike/bar/file.gz~'));
console.log(getExt('/home/charlike/bar/file.gz+cdf2'));
console.log(getExt('/home/charlike/bar/file.gz?quz=zaz'));

// all are `.tar.gz`
console.log(getExt('/home/charlike/bar/file.tar.gz'));
console.log(getExt('/home/charlike/bar/file.tar.gz~'));
console.log(getExt('/home/charlike/bar/file.tar.gz+cdf2'));
console.log(getExt('/home/charlike/bar/file.tar.gz?quz=zaz')); 
```**

# jquery - 在 Zencoding 中修改缩写

> ID：10865352
> 
> 赞同：0
> 
> 时间：2012-06-02T19:37:26.517
> 
> 标签：jquery, notepad++, emmet

我使用带有 Zen Coding 的 notepad++。

我想添加一个新的缩写

```
script:jquery17 
```

执行以下操作

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:35:59.197

如果您是 Zen Coding 的 JS 版本（从[https://github.com/sergeche/zen-coding/downloads](https://github.com/sergeche/zen-coding/downloads)或[http://code.google.com/p/zen-coding/downloads/list](http://code.google.com/p/zen-coding/downloads/list)下载），您需要打开`Zen Coding.js`位于下载存档的 NppScripting/includes 目录中的文件。它上面有一个`zen_settings`变量，它描述了所有可用的缩写和片段，并添加您自己的。

如果您使用的是 Python 版本（从[http://sourceforge.net/projects/npppythonscript/files/](http://sourceforge.net/projects/npppythonscript/files/)下载），您必须在其中找到`zen_settings.py`文件。

有关如何添加新元素和片段的更多信息，请阅读本教程：[http ://coding.smashingmagazine.com/2009/11/21/zen-coding-a-new-way-to-write-html-code/](http://coding.smashingmagazine.com/2009/11/21/zen-coding-a-new-way-to-write-html-code/)

# jquery - 从 EF MVC3 中的模型返回 List<>

> ID：10865353
> 
> 赞同：1
> 
> 时间：2012-06-02T19:37:35.020
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我正在文本框中实现 jQuery 自动完成功能，我很好奇我的代码是否正确。

这是我认为的文本框。

```
<div class="editor-field">
  @Html.TextBoxFor(model => model.Customer.CustomerName,  
                                      new {id = "CustByName" })
</div> 
```

这是为文本框 id 实现自动完成的 javascript。

```
$(document).ready(function () {
$("#CustByName").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/Cases/FindByName", type: "GET", dataType: "json",
            data: { searchText: request.term, maxResults: 10 },
            success: function (data) {
                response($.map(data, function (item) {
                    return { 
                       label: item.CustomerName, 
                       value: item.CustomerName, 
                       id: item.CustomerID }
                }))
            }
        })
    }
}); 
```

});

这是由 javascript 调用的控制器操作：

```
public JsonResult FindByName(string searchText, int maxResults)
{
   CustomerFind find = new CustomerFind();
   var result = find.FindCustomerByName(searchText, maxResults);
   return Json(result);
} 
```

这是 CustomerFind 中名为 FindCustomerByName 的函数：

```
internal List<Models.Customer>  
               FindCustomerByName(string searchText, int maxResults)
{
        List<Models.Customer> cust = new List<Customer>();
        var result = from c in cust
                    where c.CustomerName.Contains(searchText)
                    orderby c.CustomerName 
                    select c;
        return result.Take(maxResults).ToList();
} 
```

这是我的布局cshtml文件中用于脚本参考的内容。

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/rls-functions.js")" type="text/javascript"></script>" 
```

一切似乎都正常，除了 LINQ 查询`FindCustomerByName`不返回任何记录，即使它们存在。

任何人都可以提出可能是什么问题或提出更好的自动完成方法吗？

我查看了许多示例并将其拼凑在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:53:27.590

第二次更新。发现几个语法错误

```
$(document).ready(function () {
    $("#CustByName").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Cases/FindByName", type: "GET", dataType: "json",
                data: { searchText: request.term, maxResults: 10 },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { 
                           label: item.CustomerName, 
                           value: item.CustomerName, 
                           id: item.CustomerID }
                    })); // <--- semicolon here
                }
            }); // <--- semicolon here
        },
        minLength: 3 // <-- sets the minimum number of characters to type before ajax fires
    });
}); 
```

基于 OP 的更新没有他从中获取数据的数据库上下文

这是使用 EF 对数据库进行查询的示例。必须首先创建数据库上下文，然后在代码中使用该上下文。

```
public IList<Lender> GetLenders(string partialText) {
    IList<Lender> lenders;

    // Create data connection to the LINQ to SQL class that represents the database
    using (DBDataContext dataContext = new DBDataContext()) {

        // Get all lenders where lender name contains partial text and put them into new Lender objects
        // The final call .ToList() puts all the Lender objects into a collection that can be enumerated
        lenders = (from data
                        in dataContext.LenderDBs
                    orderby data.LenderName
                    where data.IsActive == true
                        && data.LenderName.ToLower().Contains(partialText.ToLower())
                    select new Lender {
                        LenderName = data.LenderName,
                        URL = data.URL
                    }).Take(15).ToList();
    }
    return lenders;
} 
```

* * *

您`TextBoxFor`缺少创建自动完成功能的类，`class="ui-widget"`但还要确保您的布局中有此脚本以用于下拉样式

```
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />

@Html.TextBoxFor(model => model.Customer.CustomerName,  
                                  new {id = "CustByName", @class = "ui-widget" }) 
```

并且您的操作需要通过允许返回中的 Get 来允许 Json 返回

```
public JsonResult FindByName(string searchText, int maxResults)
{
   CustomerFind find = new CustomerFind();
   var result = find.FindCustomerByName(searchText, maxResults);
   return Json(result, JsonRequestBehavior.AllowGet);
} 
```

除了我看到的唯一另一件事是`contentType: "application/json; charset=utf-8"`在您的 ajax 请求中丢失。尝试在您的部分中的语句`alert(data);`之前放置一个。如果这没有命中，那么 Ajax 就会出错`response``success`

* * *

此外，作为一个单独的问题，您正在发送`maxResults`以返回您的数据，但您的数据实际上是返回所有`searchText`匹配的行，然后一旦它到达您的客户端，它就会采用`maxResults`. 我会更改它，以便这`maxResults`是您查询的一部分，因此您不会返回比需要更多的数据。实际上，我会`maxResults`在 web.config 文件中放置一个可配置选项。UI 不需要关心这样的规则。

我已经使用您的原始代码和下面的代码进行了分析。如果您观看 SQL Server 执行，服务器将返回与您上面的代码匹配的所有行。但是下面的代码将创建一个`Top 10`子句，因此只返回 10 行

```
internal List<Models.Customer>  FindCustomerByName(string searchText, int maxResults)
{
        List<Models.Customer> cust = new List<Customer>();
        var result = (from c in cust
                    where c.CustomerName.Contains(searchText)
                    orderby c.CustomerName 
                    select c).Take(maxResults).ToList();
        return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:38:27.340

您正在从一个空列表中获取结果：

```
List<Models.Customer> cust = new List<Customer>(); 
```

你可能需要类似的东西：

```
List<Models.Customer> cust = .......  <- call your db code here. 
```

# javascript - Firefox 为 d3.js svg 库苦苦挣扎？

> ID：10865354
> 
> 赞同：6
> 
> 时间：2012-06-02T19:37:43.503
> 
> 标签：javascript, firefox, svg, d3.js

我编写了一些 d3.j 代码，它是 svg 可视化库，在我的 Mint 安装中，firefox 对于渲染它真的很糟糕。是关于我的安装还是一般情况？

[这是](http://mbostock.github.com/d3/talk/20111018/collision.html)d3.js 示例的示例链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T03:45:40.497

差不多2年过去了，FF中的动画还是FF29的问题。这是一个耻辱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:17:14.820

我有同样的问题。与 Chrome 和 Safari 相比，FF 15 中的转换非常慢。但你应该试试 FF beta 或 Aurora。它们为 SVG 过渡和 d3.js 带来了显着的性能改进。我的过渡现在运行顺利。

# c++ - 使用 Visual Studio 2010 在 MS C++ 中继承

> ID：10865357
> 
> 赞同：2
> 
> 时间：2012-06-02T19:38:25.647
> 
> 标签：c++, visual-studio-2010, inheritance

我一直在浏览从 sourceforge 下载的应用程序的源代码。

我有一个特定的方法，它需要一个指向抽象类的指针作为参数。

```
class A;//abstract class
B::method(A *) 
```

我不能创建一个对象，`A`因为它是抽象的。

所以我只能将指针传递`A`给`B::method()`.

现在的问题是源中有很多类。

我的问题是我怎么知道 Visual Studio 2010 中父类的子类是哪些？

我已经尝试为抽象类的虚拟方法“查找所有引用”（因为它的定义应该在子类中！）但没有运气。

希望我能把我的问题说清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:53:21.273

也许“解决方案资源管理器”->您的项目->右键菜单->“类图”是您正在寻找的？

另一个建议 - 尝试寻找“：public YourBaseClassName”字符串，然后“展开”继承。可用性当然取决于层次结构的深度。如果有多个中间类或多重继承，那么......也许，看看 Eclipse+CDT ？

# session - Kohana 与 Https 的会话

> ID：10865358
> 
> 赞同：0
> 
> 时间：2012-06-02T19:38:32.173
> 
> 标签：session, https, kohana

我有一个主控制器，它检查是否设置了会话安全，如果没有，它将重定向到安全控制器。

问题是安全控制器是通过 https，它检查密码并设置会话并重定向到主控制器。我无法通过 http 中的 https 访问会话集。

那么如何使用 https 并重定向到正常的 http 呢？我需要 http 和 https 中的会话

有任何想法吗？

> **编辑**

好的，我检查了一下，如果不保证安全，这是不可能的。一种选择是让会话通过 GET 发送，但它显然不安全，那么如果在检查登录后我将它们重定向到一个 https 表单，该表单将会话发布到一个普通的 http 页面，在 html 页面上我检查标题并确保它来自我的 https 页面。这听起来对你安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:02:32.147

为什么不让您的整个页面成为安全站点 (https) 的一部分？如果不在站点之间传递 GET 密钥，我看不到一种方法来进行 http => https 转换。

如果您的逻辑是从房子的 http 端的 cookie 中获取会话 id（只有密钥）并在房子的 https 端使其成为 cookie（手动），我认为这不是一个巨大的安全问题. 然后，您可以执行正常的会话处理验证以查看它是否是有效的会话。尽可能将您的逻辑与滥用隔离开来。

在后端，您可以在站点之间共享会话信息，也可以根据检索到的会话 ID 触发从 http 到 https 的复制。取决于你的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:46:34.103

使您的整个应用程序 HTTPS。附件是我用于几乎所有网站的块，将 80 上的所有内容重定向到 443。

```
##
# Sample config for a site needing SSL
#

$HTTP["host"] =~ "^ssl_example.localhost(:[0-9]+)?$" {
    # Serve everything over HTTPS
    $SERVER["socket"] == ":80" {
        url.redirect-code = 301
        url.redirect = ( "/(.*)" => "https://ssl_example.localhost:%1/$1" )
    }

    # This would be a great place to test SSL config for QA/Dev zones...
    $SERVER["socket"] == ":443" {
        ssl.engine = "enable"
        ssl.pemfile = rootdir + "/etc/ssl/example.pem" 
        server.document-root = "/home/crosslight/ssl_example/default"
        accesslog.filename = rootdir + "/var/log/ssl_example.log"
        server.errorlog = rootdir + "/var/log/ssl_example.error.log"
        server.tag = "Crosslight (lighttpd-1.4.28 + php-5.3.3) / SSL"

        // CodeIgniter/Kohana rewrite rules
        url.rewrite-once = (
            "^/index\.php" => "/index.php", #truncate index.php?params to just index.php
            #### Serve static content
            "^/(static.*)" => "/$1",
            "^/(blog.*)" => "/$1",
            "^/(.*)$" => "/index.php/$1"
        )
    }
} 
```

# php - 来自 LAMP 服务器的 PHP_Printer

> ID：10865359
> 
> 赞同：1
> 
> 时间：2012-06-02T19:38:38.247
> 
> 标签：php, lamp

我很想弄清楚这一点。谷歌搜索我的心没有运气。

我正在制作一个 Web 应用程序来打印标签，它应该通过浏览器完成。我的网络服务器是 LAMP，所以我不能使用 PHP_Printer，因为它是基于 Windows 的。

是否有用于从 LAMP 服务器打印到客户端的替代 PHP 解决方案。（即：在线服务器是 LAMP，它们将通过浏览器运行 Web 应用程序并将打印到客户端打印机）。

谢谢你的帮助！

**编辑** 所以这比预期的要难。我的解决方案是使用[http://www.fpdf.org/](http://www.fpdf.org/)使用用户提交的变量创建 PDF。我会在pdf中添加自定义js以在打开后立即打印而没有对话框。

工作流程：用户提交库存变量（数量、产品编号）[提交] -> 添加到 DB 的库存，生成 PDF 并自动打印标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:45:37.857

所以这是我对这个问题的解决方案。我在这里的另一篇文章中找到了它[可以使用 Javascript 打开 PDF 文件的打印对话框吗？](https://stackoverflow.com/questions/687675/can-a-pdf-files-print-dialog-be-opened-with-javascript)

我将使用 FPDF 为标签生成一个 PDF，然后添加一个脚本以在打开 pdf 时自动打印它。

脚本：[http ://www.fpdf.org/en/script/script36.php](http://www.fpdf.org/en/script/script36.php)

谢谢你帮我思考这个问题

# javascript - QUnit、Sinon.js 和 Backbone 单元测试失败：sinon spy 似乎无法检测到 Backbone 模型事件回调

> ID：10865364
> 
> 赞同：6
> 
> 时间：2012-06-02T19:39:21.817
> 
> 标签：javascript, backbone.js, qunit, sinon

在以下单元测试代码中：

```
TestModel = Backbone.Model.extend({
    defaults: {
        'selection': null
    },
    initialize: function() {
      this.on('change:selection', this.doSomething);
    },
    doSomething: function() {
        console.log("Something has been done.");
    }
});

module("Test", {
    setup: function() {
        this.testModel = new TestModel();
    }
});

test("intra-model event bindings", function() {
    this.spy(this.testModel, 'doSomething');
    ok(!this.testModel.doSomething.called);
    this.testModel.doSomething();
    ok(this.testModel.doSomething.calledOnce);
    this.testModel.set('selection','something new');
    ok(this.testModel.doSomething.calledTwice); //this test should past, but fails.  Console shows two "Something has been done" logs.
}); 
```

第三个 ok 失败，即使该函数是从主干事件绑定中有效调用的，正如控制台演示的那样。

![第三次测试失败](../Images/fd42886b1d85853d7cb1dead86c6645e.png) ![在此处输入图像描述](../Images/33bb7673c348569257b76d5ed51a425a.png)

这非常令人沮丧，并动摇了我对 sinon.js 是否适合测试我的骨干应用程序的信心。我做错了什么，或者这是 sinon 如何检测是否已调用某事的问题？有解决方法吗？

编辑：这是我的具体示例的解决方案，基于已接受答案的猴子补丁方法。虽然它在测试本身中有几行额外的设置代码，（我不再需要模块功能）它完成了工作。谢谢，`mu is too short`

```
test("intra-model event bindings", function() {
    var that = this;
    var init = TestModel.prototype.initialize;
    TestModel.prototype.initialize = function() {
        that.spy(this, 'doSomething');
        init.call(this);
    };

    this.testModel = new TestModel();
    . . . // tests pass!
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T20:11:28.070

调用用[新的包装方法](http://sinonjs.org/docs/#sinonspy)`this.spy(this.testModel, 'doSomething')`替换该`testModel.doSomething`方法：

> **var spy = sinon.spy(object, "method");**
> 
> 为 spy 创建一个 spy`object.method`并用 spy 替换原始方法。

所以`this.spy(this.testModel, 'doSomething')`有效地做这样的事情：

```
var m = this.testModel.doSomething;
this.testModel.doSomething = function() {
    // Spying stuff goes here...
    return m.apply(this, arguments);
}; 
```

这意味着`testModel.doSomething`当您在以下位置绑定事件处理程序时，这是一个不同的功能`initialize`：

```
this.bind('change:selection', this.doSomething); 
```

而不是在你附加了你的间谍之后。Backbone 事件调度程序将调用原始`doSomething`方法，但该方法没有 Sinon 检测。当您`doSomething`手动调用时，您调用的是`spy`添加的新函数，并且该函数确实具有 Sinon 检测。

如果您想使用 Sinon 测试您的 Backbone 事件，那么您必须`spy`在绑定任何事件处理程序之前安排将 Sinon 调用应用于模型，这可能意味着挂钩到`initialize`​​.

也许您可以在绑定任何事件处理程序之前对模型进行猴子补丁`initialize`以添加必要的调用：`spy`

```
var init = Model.prototype.initialize;
Model.prototype.initialize = function() {
    // Set up the Spy stuff...
    init.apply(this, arguments);
}; 
```

演示：http: [//jsfiddle.net/ambiguous/C4fnX/1/](http://jsfiddle.net/ambiguous/C4fnX/1/)

您还可以尝试使用以下方法对模型进行子类化：

```
var Model = Backbone.Model.extend({});
var TestModel = Model.extend({
    initialize: function() {
        // Set up the Spy stuff...
        Model.prototype.initialize.apply(this, arguments);
    }
}); 
```

然后使用`TestModel`而不是 Model，这将为您提供 in 的检测版本，`Model`而`TestModel`不必在您的正常 production-ready 中包含一堆特定于测试的代码`Model`。不利的一面是，任何其他使用的东西都`Model`需要被子类化/修补/...才能使用`TestModel`。

演示：http: [//jsfiddle.net/ambiguous/yH3FE/1/](http://jsfiddle.net/ambiguous/yH3FE/1/)

您可能可以通过以下方式解决`TestModel`问题：

```
var OriginalModel = Model;
Model = Model.extend({
    initialize: function() {
        // Set up the Spy stuff...
        OriginalModel.prototype.initialize.apply(this, arguments);
    }
}); 
```

但是您必须获得正确的订购权，以确保每个人都使用新的`Model`而不是旧的。

演示：http: [//jsfiddle.net/ambiguous/u3vgF/1/](http://jsfiddle.net/ambiguous/u3vgF/1/)

# android - 如何提交限时试用申请？

> ID：10865365
> 
> 赞同：5
> 
> 时间：2012-06-02T19:39:24.307
> 
> 标签：android, android-lvl, copy-protection

我希望能够为我的应用程序制作一个限时试用版，但我不确定如何可靠地确定用户是否在过期日期之后尝试重新安装应用程序。

我可能会将初始安装日期存储在卸载时不会被删除的存储位置，但这似乎不是一个理想的方法。Google Play 的[应用程序许可](http://developer.android.com/guide/market/licensing/index.html)是否支持此功能，或者是否有其他可接受的方式来完成此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:44:33.820

回应评论中写的内容：

让设备创建一个 UUID，然后将 UUID 发送到前面提到的服务器。每次使用应用程序或每隔几天（以较长者为准），检查应用程序试用是否已过期，是否应在许可服务政策中禁用。这样，您可以让许可服务为您禁用该应用程序。

# oop - MATLAB 中新图形的奇怪行为

> ID：10865368
> 
> 赞同：1
> 
> 时间：2012-06-02T19:39:58.513
> 
> 标签：oop, matlab, user-interface

我创建了一个类管理的 GUI，其中定义了以下方法

```
function h = make_figure(this)
    h = figure('CloseRequestFcn',@this.close_figure);
    this.openFigures(end+1) = h;
end

function close_figure(this, src, event)
    this.openFigures(this.openFigures == src) = [];
    delete(src);
end 
```

在 GUI 的整个生命周期中，借助上述方法可以创建和关闭图形。现在奇怪的部分...

如果我在 MATLAB 的“当前文件夹”窗口中双击一个图形文件，例如（myfigure.fig），然后尝试关闭它（当 GUI 仍然存在时）`close_figure`，那么 GUI 类的方法会运行，尽管它不是用 of 创建`h = figure('CloseRequestFcn',@this.close_figure);`的`make_figure`方法！！！这是第一个奇怪的部分。第二个奇怪的部分是，尽管执行了代码的无意部分，但它不应该产生问题，因为命令`this.openFigures(this.openFigures == src) = [];`实际上`this.openFigures`保持不变，实际上`close_figure`所做的一切`delete(src)`都是可取的。尽管有上述情况，但我的程序在上述情况发生后表现......很奇怪。

我注意到，如果我`figure`在命令窗口中点击然后关闭它，一切正常，该`close_figure`方法不会执行。只有在打开由 GUI 类创建的 .fig 文件时，才会出现问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T10:05:19.750

我只是想指出，这里有一个其他人可能面临的相关问题。您不应该通过双击 gui.fig 文件来打开您的 GUI。这不是所需的行为，因为您的打开函数将永远不会被调用。如果您在其中有我们许多人所做的代码，它将不会执行，另一个副作用是也不会正确设置句柄变量。

您应该先在 GUIDE 中打开它然后单击运行，或者直接运行 gui.m 文件。这将产生所需的结果，并且 gui 将按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:55:36.827

我刚刚尝试了您描述的场景，并没有看到任何奇怪的行为；创建该类的实例，使用它制作图形，然后从“当前文件夹”文件浏览器中打开一个图形文件，然后将其关闭。

这是我使用的类定义：

```
classdef MyFigureClass < handle
    properties
        openFigures = [];
    end

    methods
        function h = make_figure(obj)
            h = figure('CloseRequestFcn',@(src,evt) close_figure(obj,src,evt));
            obj.openFigures(end+1) = h;
        end

        function close_figure(obj, src, evt)
            obj.openFigures(obj.openFigures == src) = [];
            delete(src);
        end

    end
end 
```

*（在 Windows XP 32 位的 R2012a 中测试。）*

* * *

### 编辑

好的，我想我知道问题出在哪里。这是重现的步骤。首先将以下方法添加到上面的类中：

```
function save_figure(obj, idx)
    saveas(obj.openFigures(idx), sprintf('fig%02d.fig',idx))
end 
```

现在使用我们的类包装器，让我们创建一个图形，并将其保存到图形文件中：

```
f = MyFigureClass();
f.make_figure()
f.save_figure(1)       %# creates fig01.fig 
```

接下来清除您的工作区`clear all`，并将类定义文件移动`MyFigureClass.m`到其他文件夹（不在路径上的文件夹）。现在尝试加载保存的图形`hgload fig01.fig`，它会抛出错误：

```
Warning: Cannot load an object of class 'MyFigureClass':
Its class cannot be found. 
> In C:\Program Files\MATLAB\R2012a\toolbox\matlab\graphics\hgload.p>localLoadFile at 167
  In C:\Program Files\MATLAB\R2012a\toolbox\matlab\graphics\hgload.p>hgload at 59
  In openfig at 72
  In open at 159
  In uiopen at 196 
```

您必须发出以下命令才能强制关闭它：

```
close all force 
```

* * *

### 编辑2

一种解决方案（如评论中所述）是在保存之前[重置图形关闭回调函数。](http://www.mathworks.com/help/techdoc/ref/figure_props.html#CloseRequestFcn)这是我如何修改`save_figure`上面的函数：

```
function save_figure(obj, idx)
    %# backup callback function
    fcn = get(obj.openFigures(idx),'CloseRequestFcn');

    %# set default callback function
    set(obj.openFigures(idx),'CloseRequestFcn','closereq')

    %# save figure
    saveas(obj.openFigures(idx), sprintf('fig%02d.fig',idx))

    %# restore callback function
    set(obj.openFigures(idx),'CloseRequestFcn',fcn)
end 
```

# weka - 为什么 C4.5 算法使用剪枝来减少决策树，剪枝如何影响预测精度？

> ID：10865372
> 
> 赞同：9
> 
> 时间：2012-06-02T19:40:11.400
> 
> 标签：weka, decision-tree, pruning

我在谷歌上搜索过这个问题，但我找不到以简单而详细的方式解释这个算法的东西。

例如，我知道 id3 算法根本不使用剪枝，所以如果你有一个连续的特征，预测成功率会很低。

所以C4.5为了支持连续特性它使用了剪枝，但这是唯一的原因吗？

我也不能真正理解在 WEKA 应用程序中，置信因子究竟如何影响预测的效率。置信度越小，算法的剪枝就越多，但是剪枝和预测的准确性之间的相关性是什么？修剪得越多，预测就越好还是越差？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T22:39:37.460

剪枝是一种减小决策树大小的方法。这将降低训练数据的准确性，但（通常）会提高未见数据的准确性。它用于缓解[过度拟合](http://en.wikipedia.org/wiki/Overfitting)，您可以在训练数据上获得完美的准确性，但是您学习的模型（即决策树）非常具体，以至于它不适用于除训练数据之外的任何东西。

一般来说，如果增加剪枝，在训练集上的准确率会更低。然而，WEKA 确实提供了各种东西来更好地估计准确度，即训练/测试拆分或交叉验证。例如，如果您使用交叉验证，您会在某个地方发现修剪置信度因子的“最佳位置”，它修剪得足以使学习的决策树在测试数据上足够准确，但不会在训练数据。然而，这个最佳位置在哪里取决于您的实际问题，而可靠地确定它的唯一方法是尝试。

# java - 如何在超类型中推断子类型

> ID：10865374
> 
> 赞同：2
> 
> 时间：2012-06-02T19:40:28.037
> 
> 标签：java

假设你有一个超级班。在该超类中，您希望将自身 ( `this`) 的运行时对象作为参数传递给重载方法。诀窍是，这个重载的方法被子类类型重载。当你尝试这样做时，你会得到一个

> 方法...不适用（实际参数...无法通过方法调用转换转换为...）

相反，您需要在每个子类型中分别实现该方法（只是为了获得正确的运行时类），当方法的内容相同时，这是很多重复的工作。

例如：

```
public class InferTypeTest {

    public static void main(String[] args) {
        SubClass1 s1 = new SubClass1();
        s1.sayHi();
    }

    public static void sayHi(SubClass1 clz) {
        System.out.println("clz 1");
    }

    private abstract static class SuperClass{
        public void sayHi() {
            InferTypeTest.sayHi(this);
        }
    }

    private static class SubClass1 extends SuperClass{

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:52:56.120

是的，这就是双重分派的工作方式，您必须像这样覆盖每个子类中的接受方法：

```
 private static abstract class NodeWithChildren implements DomNode {
        /* snip */
        public void accept(DomNodeVisitor visitor) {
            for (DomNode child : children) {
                child.accept(visitor);
            }
        }
    }

    private static class BodyNode extends NodeWithChildren {
        public void accept(DomNodeVisitor visitor) {
            visitor.visit(this);
            super.accept(visitor);
            visitor.visited(this);
        }
    }

    private static class DivNode extends NodeWithChildren {
        public void accept(DomNodeVisitor visitor) {
            visitor.visit(this);
            super.accept(visitor);
            visitor.visited(this);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:13:44.713

BodyNode 是一个NodeWithChildren DivNode 是一个NodeWithChidren NodeWithChildren 是一个DomNode DomPrinterVisitor 是一个DomNodeVisitor DomNodeVisitor 的访问者可以访问“BodyNode”或“DivNode”，但是你是通过“NodeWithChildren”来访问的。这里BodyNode 是一个NodeWithChildren 但NodeWithChildren 不是BodyNode/

```
Theary is if B extends A, you can say B is a A/ not A is a B. 
```

# playframework-2.0 - 使用 initial-data.yml 加载 @ManyToOne 关联

> ID：10865375
> 
> 赞同：3
> 
> 时间：2012-06-02T19:40:38.127
> 
> 标签：playframework-2.0

我正在使用 initial-data.yml 将一组示例数据导入到我在 Play 2.0.1 上运行的应用程序中。我正在尝试加载成员、计划和成员资格。成员和方案导入正常，但成员（具有成员和方案的外键）只导入列表中的最后一个条目。

这是我的 initial-data.yml 文件：

```
# Members

members:

 - !!models.Member
    email:      mark@zucker.com
    name:       Mark Zucker
    created:    null
    last_updated:  null

 - !!models.Member
    email:      vickysmith@email.com
    name:       Vicky Smith
    created:    null
    last_updated:  null

 - !!models.Member
    email:      sjones@yahoo.com
    name:       Simon Jones
    created:    null
    last_updated:  null

 - !!models.Member
    email:      steve@james.com
    name:       Steve James
    created:    null
    last_updated:  null

# Schemes

schemes:

 - !!models.Scheme
    id:         1
    name:       Walmart

 - !!models.Scheme
    id:         2
    name:       Amazon

 - !!models.Scheme
    id:         3
    name:       Outdoors Living

# Memberships

memberships:

 - !!models.Membership
    membership_id: 1234567890
    accrued:       2000
    balance:       1000
    joined_by:     !!models.Member
                     id:    1                
    scheme:        !!models.Scheme
                     id:    1

memberships:

 - !!models.Membership
    membership_id: 6543210000
    accrued:       10000
    balance:       10000
    joined_by:     !!models.Member
                     id:    2                
    scheme:        !!models.Scheme
                     id:    1 
```

这是我的模型定义的相关部分：

```
package models;

import java.util.*;
import play.db.ebean.*;
import play.data.Form;
import play.data.validation.Constraints.*;

import javax.persistence.*;

import models.Membership;

@Entity
public class Member extends Model {

@Id
public Long id;         

@Required
public String email;        
public String name;         
public Date created;         
public Date last_updated; 
```

这是方案模型的一部分：

```
@Entity
public class Scheme extends Model {

@Id
public Long id;
@Required
public String name; 
```

会员模式如下：

```
@Entity
public class Membership extends Model {

@Id
public Long membership_id;      

@Required
@ManyToOne              
public Member joined_by;        

@Required
@ManyToOne                  
public Scheme scheme;       

public Long accrued;        
public Long balance; 
```

这是 Global.java 中的插入方法：

```
public static void insert(Application app) {
        Map<String,List<Object>> all = (Map<String,List<Object>>)Yaml.load("initial-data.yml");

        if(Ebean.find(Member.class).findRowCount() == 0) {
            Logger.info("Loading members from initial-data.yml");
                    Ebean.save(all.get("members"));
        }

        if(Ebean.find(Scheme.class).findRowCount() == 0) {
            Logger.info("Loading schemes from initial-data.yml");
                    Ebean.save(all.get("schemes"));
        }

        if(Ebean.find(Membership.class).findRowCount() == 0) {
            Logger.info("Loading memberships from initial-data.yml");
                    Ebean.save(all.get("memberships"));                
            }

        Logger.info("Loaded "+Ebean.find(Member.class).findRowCount()+" members");
        Logger.info("Loaded "+Ebean.find(Scheme.class).findRowCount()+" schemes");
        Logger.info("Loaded "+Ebean.find(Membership.class).findRowCount()+" memberships");
    } 
```

我已打开登录以计算插入每个表的行数，这是输出：

```
DEBUG - select count(*) 
from member t0
INFO  - Loaded 4 members
DEBUG - select count(*) 
from scheme t0
INFO  - Loaded 3 schemes
DEBUG - select count(*) 
from membership t0
INFO  - Loaded 1 memberships 
```

如您所见，所有成员和方案都已加载，但仅加载了一个成员资格。这始终是列表中的最后一个（因此上面的 initial-data.yml 文件中的成员资格为 6543210000）。如果我交换条目，它仍然是最后一个！

我需要更改哪些内容才能加载 initial-data.yml 中的所有会员数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T08:29:07.243

在#Memberships 下的initial-data.yml 中，您有两个'memberships：'，所以看起来第二个定义是被处理的。删除第二个成员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T16:39:39.920

在 ebean 的 yaml 引导文件中处理多对一关系的正确方法是创建引用。

这是您要引用的对象：

```
- !!models.User &ref
    mail:      b@b.fr
    firstName: bbb
    lastName:  BBB 
```

&ref 注释是此处引用的对象的别名。

现在您可以参考它：

```
- !!models.book
    owner:        *ref
    title:        myBook 
```

*ref 符号代表“与引用 ref 关联的对象”。这本书的所有者将是 bbb ！

# css - TinyMCE 链接按钮和弹出窗口：摆脱类下拉列表中的项目

> ID：10865378
> 
> 赞同：2
> 
> 时间：2012-06-02T19:40:57.060
> 
> 标签：css, hyperlink, tinymce

在 TinyMCE 中，当用户单击链接按钮时，会出现一个弹出窗口，提示输入链接信息。此弹出窗口中的字段之一是 css“类”。

你怎么能清除这个列表？我看到 advlink 有一个插件设置，它允许您提供 css 类的列表，但我不想使用 advlink，因为我不希望链接窗口中的弹出窗口和其他选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:42:11.677

如果您`content_css : "/css/mycss.css"`在 TinyMCE 配置中删除该行，则 Class 下拉菜单将不会出现在链接弹出窗口中，因为它不再知道您网站的 CSS 中存在哪些样式。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:06:55.500

看看[这个 tinymce 示例](http://www.tinymce.com/tryit/custom_formats.php)。查看配置将显示以下设置（[style_formats](http://www.tinymce.com/wiki.php/Configuration%3astyle_formats)）

```
 // Style formats
    style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
    ], 
```

使用此 tinymce 配置设置，您可以定义样式下拉列表和链接弹出窗口的 css 字段中出现的样式。

**更新：**不幸的是，上述内容不会影响弹出窗口中的类下拉列表。下面是配置示例设置的正确方式

```
 advlink_styles: 'Code=code;Excel=excel;Flash=flash;Sound=sound;' 
```

您已经在使用 advlink 插件，因此使用此配置设置没有任何问题。试试看。

# git - 我应该将应用程序的服务器代码和客户端代码保存在同一个 git 目录中吗？

> ID：10865379
> 
> 赞同：1
> 
> 时间：2012-06-02T19:41:05.450
> 
> 标签：git, svn, web-applications, github

我正在制作一款可用作 Web 应用程序的游戏，并且我有一些服务器代码和一些客户端代码。这两个都在各自独立的目录中，然后它们被打包到一个 git 目录中，该目录被推送到 Github。这种做事方式是否有任何缺陷，我应该为同一个项目创建单独的 git 目录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:46:41.113

如果“git 目录”是指单个 git 控制的子目录树，那很好。当然不要为客户端和服务器使用单独的 git 存储库，否则您将不得不设计一个方案来检查客户端连接到服务器时的协议版本一致性（尽管您可能有其他原因需要支持这一点，例如任何时候客户端和服务器单独打包或部署时，您都需要这样做）。

但是，如果您实际上是指文件系统目录，我建议不要。为客户端和服务器需要共享的定义（通常是头文件）创建一个子目录，并将客户端代码和服务器代码保存在另外两个单独的目录中。除非它们非常微不足道，并且总代码量很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:46:43.320

GIT ,SVN 用于版本控制（版本控制系统）。作为 dotnet 开发人员，如果我的单个解决方案中有任意数量的项目（无论是 web、dll 还是 exe），我更愿意将其推送到单个存储库中。

# .net - FsUnit 和 NUnit 不使用对象？

> ID：10865394
> 
> 赞同：1
> 
> 时间：2012-06-02T19:43:20.693
> 
> 标签：.net, unit-testing, f#, nunit

这是一个简单的测试：

```
module Tests

open NUnit.Framework
open FsUnit

[<TestFixture>] 
type simple ()=
   [<Test>] member test.
    ``tautology`` ()=
           true |> should be True 
```

我的项目还没有使用 F# 的任何 OOP 功能——我可以编写没有对象的测试，还是 NUnit 就是这样工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:07:32.193

FsUnit/NUnit 也支持 let-bounds。以下是[FsUnit 官方公告](http://freshbrewedcode.com/danmohl/2012/01/03/announcing-fsunit-1-0/)中的一个示例：

```
module Test.``equalWithin assertions``

open NUnit.Framework
open FsUnit

[<Test>]
let ``should equal within tolerance when less than``() =
    10.09 |> should (equalWithin 0.1) 10.11

[<Test>]
let ``should not equal within tolerance``() =
    10.1 |> should not ((equalWithin 0.001) 10.11) 
```

另一个使用静态函数的例子可以在[FsUnit 的 github 页面](https://github.com/dmohl/FsUnit/blob/master/Examples/NUnit/BowlingGame.fsx)中找到。

# php - 收集两个日期之间的天数

> ID：10865397
> 
> 赞同：-2
> 
> 时间：2012-06-02T19:43:47.260
> 
> 标签：php, ajax

> **可能重复：**
> [如何使用 php 查找两个日期之间的天数](https://stackoverflow.com/questions/2040560/how-to-find-number-of-days-between-two-dates-using-php)

收集两个日期之间的天数，例如 02/11/2012 和 02/12/2012 之间

结果是天数 = 1 天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:47:19.720

尝试这个

```
function dateDiff ($d1, $d2) {

  return round(abs(strtotime($d1)-strtotime($d2))/86400);

} 
```

该函数使用 PHP ABS() 绝对值始终返回一个正数作为两个日期之间的天数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:48:30.917

PHP >= 5.3 你可以使用[DateTime::Diff](http://www.php.net/manual/en/datetime.diff.php)：

```
<?php
  $datetime1 = new DateTime('2009-10-11');
  $datetime2 = new DateTime('2009-10-13');
  $interval = $datetime1->diff($datetime2);
  echo $interval->format('%R%a days');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:47:01.393

```
echo (strtotime('02/12/2012') - strtotime('02/11/2012')) / (24*60*60); 
```

此行将两个日期都转换为 unix 时间戳，减去它们，然后除以一天中的秒数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T19:49:26.547

您可以使用 strtotime() 函数将日期转换为时间戳：

```
$date1 = strtotime("02/11/2012");
$date2 = strtotime("02/12/2012");
$difference = $date1 - $date2; 
```

然后你有一个新时间戳的秒差，所以你可以使用 date() 函数将其转换为天：

```
$days = date("d", $difference); 
```

# html - 如何清除 HTML 画布？

> ID：10865398
> 
> 赞同：2
> 
> 时间：2012-06-02T19:43:49.643
> 
> 标签：html, jquery, canvas

我正在尝试实现一个清除按钮，但它似乎不起作用。

我有一组 x、y 和拖动位置以及相关的颜色。当按下清除按钮时（确实是这样，我检查了一个警告框），我正在清除所有这些数组，然后像这样清除画布：

```
clickX.length = 0;
clickY.length = 0;
clickDrag.length = 0;
clickColor.length = 0;
var context = $('#canvas')[0].getContext('2d');
context.width = context.width;
context.height = context.height; 
```

我听说设置宽度和高度可能会更慢所以我总是尝试：

```
context.clearRect(0, 0, context.width, context.height); 
```

但是，这些似乎都不起作用。数组被清空，但画布的先前内容仍然卡在那里。不知道为什么他们没有被清除。

谢谢阅读。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T19:59:51.770

您应该使用*canvas*元素`.width`的，而不是其*context*。

 **上下文中没有`.width`属性，因此您的`.clearRect`调用实际上被传递为零的最后两个参数。

同样，向上下文添加新`.width`属性也不会做任何事情。

就这样做

```
var canvas = $('#canvas')[0]; // or document.getElementById('canvas');
canvas.width = canvas.width; 
```

如[规范中所述](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)（我的重点）：

> 创建画布元素时，以及随后**无论何时设置宽度和高度属性**（无论是新值还是先前值），**位图和任何关联的上下文都必须清除**回其初始状态并使用新指定的重新初始化坐标空间维度。

请注意，`.clearRect()`它将考虑任何剪切路径和填充样式，因此设置`width`属性是将画布完全重置回其原始状态的唯一方法。但是，如果您没有使用剪切路径`.clearRect()`，那么可能会更快！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T22:12:20.893

Alnitak 的方法是一种方法，但只是为了添加更多信息，您应该知道设置宽度也会重置所有画布状态。这意味着您必须再次设置字体、样式、线宽等。出于性能原因，缓存这些可能会很好（除非绝对必须，否则不要更改它们，尤其`font`是设置缓慢的 ），因此这样做`canvas.width = canvas.width`并不总是理想的。

当然有

`ctx.clearRect(0, 0, canvas.width, canvas.height);`

但是，如果您有一个复杂的转换矩阵，这对您没有多大帮助。如果是这种情况，您始终可以通过执行以下操作临时重置转换矩阵：

```
// I have lots of transforms right now
ctx.save();
ctx.setTransform(1, 0, 0, 1, 0, 0);
// Will always clear the right space
ctx.clearRect(0, 0, canvas.width, canvas.height);
ctx.restore();
// Still have my old transforms 
```**

# c - 预留空间 C

> ID：10865403
> 
> 赞同：0
> 
> 时间：2012-06-02T19:44:44.237
> 
> 标签：c

你能告诉我在 C 中从内存中保留例如 1000 位的最佳方法吗？我正在做一个程序，我需要管理标志（值 = 0 或 = 1）。最有效的方法是什么？我正在考虑保留所需的空间并使用掩码控制标志（位）。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:47:21.930

您可以在 C 中访问/寻址的最少内存量是位宽的字节`CHAR_BIT`（保证至少 8 位长）。所以，如果你正在寻找一个打包的结构，你可以使用`ceil(1000/8)`字节。

您可能想查看[这个](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c)SO question 以了解位操作的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:54:50.440

您可以使用以下`bool`类型：

```
#include <stdbool.h> // for bool
#include <stdlib.h>  // for malloc

#define N  1000

bool *b = malloc(N * sizeof *b);

// for example to set the 42th element to 1
b[41] = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T22:57:22.297

就像是？

```
struct bitf
  {

    unsigned char b:1;
  };
struct bitf[1000]; 
```

如果您不使用位掩码，则最大大小是计算机上变量的最大大小。 [尝试定义 1,024 位（128 字节）位字段时出错](https://stackoverflow.com/q/1590893/1419494)

或最小内存：

```
#include <stdio.h>

int main(void)
{

  struct bitf
  {

    unsigned char a:1;
    unsigned char b:1;
    unsigned char c:1;
    unsigned char d:1;
    unsigned char e:1;
    unsigned char f:1;
    unsigned char g:1;
    unsigned char h:1;

  };

  struct bitf number[125];

  number[100].a = 1;
  number[110].h =1;
  printf("size: %d  a:%d   h:%d\n",sizeof(number), number[100].a ==0, number[110].h ==1);

  return 0;
} 
```

输出：

```
size: 125  a:0   h:1 
```

# java - 通过 BroadcastReceiver 更改页面不起作用

> ID：10865406
> 
> 赞同：0
> 
> 时间：2012-06-02T19:45:11.047
> 
> 标签：java, android, broadcastreceiver

我试图通过广播接收器显示第二页，但应用程序不断崩溃，我不知道为什么。这可能是正确上下文的问题。

```
public class ScreenReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            Log.v("$$$$$", "In Method: ACTION_SCREEN_OFF");

        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
                    Log.v("$$$$$", "In Method: ACTION_SCREEN_ON");
            changeActivity(context);
        } else if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
                    Log.v("$$$$$", "In Method: USER_PRESENT");
        }
    }

public void changeActivity(Context context) {

    Intent intent = new Intent(context, Second_Page.class);

    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

    context.startActivity(intent);
    }
} 
```

我的清单。在那里我声明日志文件状态的类丢失：

```
 <uses-sdk android:minSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".CatchUnlockActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="second_page" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:21:18.967

找到解决方案：类的声明**区分大小写！**

将每次出现都从“second_page”更改为“Second_Page”，现在它可以工作了。

# vb.net - 表单控件数组上的线程安全调用

> ID：10865408
> 
> 赞同：2
> 
> 时间：2012-06-02T19:46:04.177
> 
> 标签：vb.net, thread-safety, controls, stack-overflow

我正在尝试从单独的线程访问动态生成的控件。但是我的代码总是出现“堆​​栈溢出异常”。

我正在使用以下代码：

```
Private _workerThread As Threading.Thread

Private Sub Main_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim Label As New Label
    Label.Name = "Label1"
    Label.Location = New System.Drawing.Point(12, 12)
    Label.Text = String.Empty
    Label.AutoSize = True

    Controls.Add(Label)

    _workerThread = New Threading.Thread(AddressOf DoWork)
    _workerThread.Priority = Threading.ThreadPriority.BelowNormal
    _workerThread.Start()
End Sub

Private Sub DoWork()
    SetLabelText("Label1", "text")
End Sub

Delegate Sub SetLabelTextCallback(ByVal LabelName As String, ByVal text As String)
Private Sub SetLabelText(ByVal LabelName As String, ByVal text As String)
    If CType(Me.Controls(LabelName), Label).InvokeRequired Then
        Dim d As New SetLabelTextCallback(AddressOf SetLabelText)
        d.Invoke(LabelName, text)
    Else
        CType(Me.Controls(LabelName), Label).Text = text
    End If
End Sub 
```

显然 InvokeRequired 永远不会变为 False。但我不明白为什么。也许有人可以告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:17:50.763

您没有在标签的线程上调用方法 SetLabelTextCallback，
因此您将在同一个线程上再次调用，并且 InvokeRequired 永远不会为假

```
Delegate Sub SetLabelTextCallback(ByVal LabelName As String, ByVal text As String) 

Private Sub SetLabelText(ByVal LabelName As String, ByVal text As String) 
    Dim l as Label = CType(Me.Controls(LabelName), Label)
    if l.InvokeRequired then
        Dim d As New SetLabelTextCallback(AddressOf SetLabelText) 
        l.Invoke(d, new Object() {LabelName, text} ) 
    Else 
        l.Text = text 
    End If 
End Sub 
```

# xcode - Xcode 4 存档问题与代码签名

> ID：10865411
> 
> 赞同：0
> 
> 时间：2012-06-02T19:46:22.247
> 
> 标签：xcode, archive, signing

我无法让档案工作，因为代码签名错误发生的消息返回。当我在我的模拟器上构建和运行时它工作正常，但在归档时却不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:53:09.837

这里有很多问题可能会出错，因此您需要逐步解决此问题。

1) 在 " " 中打开 Keychain Viewer 应用程序，`/Applications/Utilities/`并确保您设置用于 Apple Developer 帐户的公钥和私钥在那里。如果不是，请从您最初设置帐户的机器上获取它（或者，您需要重新创建您的公钥和私钥）。

2) 在 iTunes Provisioning Portal 上为您的应用程序创建一个配置文件。这将创建一个证书，允许您的应用程序在您的 iDevices 上运行。下载证书并将其安装到 Xcode 中。我相信，较新版本的 Xcode 在 Organizer 中自动执行此过程。

当我遇到您所描述的问题时，我会转到[Apple 的 iOS 配置门户](https://developer.apple.com/ios/manage/overview/index.action)，在主窗口（“门户资源”）的右侧是“操作方法”，其中包含有关您需要做什么的分步指南设置并正常工作。有时在过去我真的不得不从头开始。配置和代码签名是正确设置的主要难题，但 Apple 一直在努力通过每个新版本的 iOS 和 Xcode 使这变得更容易。

# android - 在我的主要活动中关闭我的 Android 应用程序

> ID：10865415
> 
> 赞同：0
> 
> 时间：2012-06-02T19:47:16.583
> 
> 标签：android, android-activity

我有两个活动：

A：启动画面

B：主要活动

当应用程序启动时，我会用一段短视频显示启动画面，然后调用 B。我希望用户能够使用活动 B 中的后退按钮关闭应用程序。（用户不应再次看到启动画面。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T21:46:31.760

您可以为清单中的启动画面设置 android:noHistory="true"。这不会将活动添加到后台堆栈。

```
<activity
    android:name="SplashScreen"
    android:noHistory="true"
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:50:04.180

在启动 Activity B 时，在启动画面中调用 finish()。

# java - 如何使用 Apache Sanselan 库在 jpg 文件中重写 XMP XML？

> ID：10865424
> 
> 赞同：2
> 
> 时间：2012-06-02T19:48:35.950
> 
> 标签：java, apache-commons, jpeg, xmp

我想将 XMP 写入 jpg。我使用 Apache Sanselan 库。在下面的代码中，我试图读取 XMP XML 并将其再次写入同一个文件，但得到异常（ImageReadException：Unexpected EOF。）。

```
File file=new File("./img/file.jpg");//input file
    if(file.canWrite()){
        try {
            String xmpXml = Sanselan.getXmpXml(file);
            JpegXmpRewriter xmpWriter=new JpegXmpRewriter();
            //File newfile = new File("./img/newfile.jpg"); //output file
            //xmpWriter.updateXmpXml(new ByteSourceFile(file), new BufferedOutputStream(new FileOutputStream(newfile)), xmpXml);    
            xmpWriter.updateXmpXml(new ByteSourceFile(file), new BufferedOutputStream(new FileOutputStream(file)), xmpXml);             
        } catch (ImageReadException | IOException | ImageWriteException e) {
            e.printStackTrace();
        }
    }else {
        System.out.println("Can NOT Write");
    } 
```

如果输入和输出文件不同，则代码可以正常工作。

```
File newfile = new File("./img/newfile.jpg"); //output file
xmpWriter.updateXmpXml(new ByteSourceFile(file), new BufferedOutputStream(new FileOutputStream(newfile)), xmpXml); 
```

但是，如果我读取和写入同一个文件，我会得到一个异常。

```
 org.apache.sanselan.ImageReadException: Unexpected EOF.
    at org.apache.sanselan.common.BinaryFileFunctions.readAndVerifyBytes(BinaryFileFunctions.java:129)
    at org.apache.sanselan.formats.jpeg.JpegUtils.traverseJFIF(JpegUtils.java:61)
    at org.apache.sanselan.formats.jpeg.xmp.JpegRewriter.analyzeJFIF(JpegRewriter.java:204)
    at org.apache.sanselan.formats.jpeg.xmp.JpegXmpRewriter.updateXmpXml(JpegXmpRewriter.java:187)
    at Editor$1.mouseClicked(Editor.java:147)
    at java.awt.AWTEventMulticaster.mouseClicked(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

# ios - NsmutableArray setValue ObjectatIndex？

> ID：10865427
> 
> 赞同：-1
> 
> 时间：2012-06-02T19:49:26.020
> 
> 标签：ios

我无法使用 nsmutablearray 设置选定索引的值。这是我的代码：

```
[[retArray objectAtIndex:1] setValue:str forKey:@"name"]; 
```

这一行给出错误。错误是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:53:07.603

正确的代码应该是

```
[retArray insertObject:str atIndex:1]; 
```

或者

```
[retArray addObject:str]; 
```

或者如果您正在使用字典

```
[retArray insertObject:[NSDictionary dictionaryWithObject:str forKey:@"name"] atIndex:1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:55:34.270

首先，您应该明确告诉我们它给您带来的确切错误，然后您在代码中所做的是：

*   检索索引处的元素`1`
*   假设您从数组中获得的项目符合`NSKeyValueCoding`协议（主要是 a `NSMutableDictionary`）
*   设置检索到的元素的字段

代码是正确的，唯一的问题可能是数组不是可变的（因此`NSArray`而不是`NSMutableArray`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:54:40.273

您正在使用字典的方法...请参阅[NSMutableArray 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

# php - 使用 PHP 从另一个数组动态构建多维数组？

> ID：10865435
> 
> 赞同：2
> 
> 时间：2012-06-02T19:51:44.757
> 
> 标签：php, arrays, dynamic, creation

我有一个数组中包含的数据，就像这样，

```
$file['info']['files'] = array(
    [0] => array(
         'length' => (int),
         'path' => array (
              [0] => 'file.txt',
         ),
    ),
    [1] => array(
         'length' => (int),
         'path' => array (
              [0] => 'directory one',
              [1] => 'file2.txt',
         ),
    ),
    [2] => array(
         'length' => (int),
         'path' => array (
              [0] => 'directory one',
              [1] => 'directory two',
              [2] => 'file3.txt',
         ),
    ),
); 
```

`$file['info']['files']`数组可以包含任意数量的元素。每个数组中`path`包含的`$file['info']['files']`数组是我遇到问题的地方。

它包含有关文件结构的信息。如果仅存在 1 个元素，则它是一个文件。如果存在多个元素，则从顶部开始的每个元素都是下一个元素的父文件夹，最后一个元素是最后一个文件夹中的文件。以上面的示例为例，文件结构为

```
FILE file1.txt
FOLDER directory one
     FILE file2.txt
     FOLDER directory two
          FILE {file3.txt} 
```

我想将这些数据提取到我自己的数组结构中，如下所示，

```
 $sortedFiles = array(
     'file1.txt' => (int),
     'directory one' => array(
         'file2.txt' => (int),
         'directory two' => array(
              'file3.txt' => (int),
         ),
     ),
 ); 
```

到目前为止我有这个代码，

```
foreach($file['info']['files'] as $file) {
    // LENGTH AND PATH ARE SET
    if(isset($file['length'], $file['path'])) {
        // GET COUNT OF FILE PATH ARRAY
        $count = count($file['path']);
        // SINGLE FILE
        if($count == 1) {
            $sortedFiles[$file['path'][0]] = $file['length'];
        // FILES IN DIRECTORY
        } else {
            // BUILD ARRAY STRUCTURE FOR DIRECTORIES
        }
    }
} 
```

在将目录添加到数组时我遇到了麻烦。我可以手动完成，每次检查目录的数组是否存在，如果不创建它，如果它确实存在，则添加到它。我用下面的代码尝试了这个，但它只深入一个目录（代码在上面所说`// BUILD ARRAY STRUCTURE`的地方）。

```
// FOLDER NOT SET
if(!isset($files[$file['path'][0]])) {
    $sortedFiles[$file['path'][0]] = array($file['path'][1] => $file['length'],);
// FOLDER SET
} else {
    $sortedFiles[$file['path'][0]][$file['path'][1]] = $file['length'];
} 
```

如何为每个存在的目录动态创建数组并添加所需的信息，同时记住目录结构可以是任意数量的级别？

感谢您花时间阅读我相当长的问题，我感谢任何人给我的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:46:31.500

您将需要递归调用您的函数，如下例所示：

```
function get_contents_dir( $dir )
{
    $names = array();

    if ( is_dir($dir) && is_readable($dir) )
    {
            foreach ( scandir($dir) as $file )
            {
                    if ( is_dir($dir."/".$file) && is_readable($dir."/".$file) )
                    {
                            $names[] = get_contents_dir($dir."/".$file);
                    }

                    if ( is_file($dir."/".$file) && is_readable($dir."/".$file) )
                    {
                            $names[] = $dir."/".$file;
                    }
            }
    }

    return $names;
} 
```

该函数首先打开设置`$dir`的文件夹并扫描文件列表，将找到的每个文件添加到数组中，扫描文件夹后，`return`作为函数的返回值。

当`scandir()`结果的条目（文件夹中的文件和文件夹列表）实际上是一个文件夹时，就会出现扭曲。如果发生这种情况，函数会从其内部递归调用（参见`$names[] = get_contents_dir($dir."/".$file);`从函数内部调用函数的行），并且子文件夹也将被索引。冲洗并重复，直到所有子文件夹都被索引。

如果您调用该函数并让它执行，将返回一个数组。数组的每个键都是一个条目。如果是文件，则链接到键的值是文件名，如果是文件夹，则值将是嵌套在前一个数组中的另一个数组。

以下是返回数组的示例转储：

```
array (
  0 => './libmysqlclient.so.16.0.0',
  1 => './libmysqlclient_r.so.16.0.0',
  2 => 
  array (
    0 => './libs/libboost_thread-mt.a',
    1 => './libs/libboost_thread-mt.so.1.38.0',
    2 => './libs/libmysql.dll',
    3 => './libs/libmysqlclient16_5.1.41-3ubuntu12_i386.deb',
  ),
  3 => 
  array (
    0 => './radio_sneaker/cl_auto.lua',
    1 => './radio_sneaker/sh_auto.lua',
    2 => './radio_sneaker/sh_coms.lua',
    3 => './radio_sneaker/sh_info.lua',
    4 => './radio_sneaker/sv_auto.lua',
    5 => './radio_sneaker/sv_hooks.lua',
  ),
  4 => './sv_auto.lua',
) 
```

将此输出与`tree`在同一文件夹中运行的命令进行比较：

```
|   libmysqlclient.so.16.0.0
|   libmysqlclient_r.so.16.0.0
|   sv_auto.lua
|   
+---libs
|       libboost_thread-mt.a
|       libboost_thread-mt.so.1.38.0
|       libmysql.dll
|       libmysqlclient16_5.1.41-3ubuntu12_i386.deb
|       
\---radio_sneaker
        cl_auto.lua
        sh_auto.lua
        sh_coms.lua
        sh_info.lua
        sv_auto.lua
        sv_hooks.lua 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:07:02.680

为什么不使用`join`php中的函数来合并路径以检查它是否存在？如果不存在，则逐级检查文件夹是否存在，如果不存在，则创建并进一步移动。我的观点是，首先，创建这样一个动态结构既困难又容易搞砸。为什么不走简单的路呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T20:13:18.097

想象一下，您有一个表示目录结构的数组，该数组最初是空的，将逐个填充。您需要跟踪此数组中的“当前”项并遍历目录名称。在每次迭代中，如果当前项不存在，您将在当前项下创建一个子数组，然后将当前项设置为此子数组。

这可以通过递归或迭代来完成，因为它是 PHP，所以“当前”标记需要作为参考。

考虑到这个概述，看看[这个问题](https://stackoverflow.com/q/8537148/50079)和那里的答案。那里的输入是字符串的形式，但这`implode`与您当前的情况相去甚远。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T20:16:39.877

我会让你在你的代码中解决这个问题，但这是重要的教训。

将平面数组变成嵌套结构

```
$a = array(
    'dir1', 'dir2', 'file.txt'
);

$structure = array(array_pop($a));
foreach (array_reverse($a) as $dir) {
    $structure = array($dir => $structure);
}

print_r($structure); 
```

将一个结构合并到另一个结构中

```
$result = array_merge_recursive($result, $structure); 
```

只需遍历所有结构以进行合并。

# ruby-on-rails - rake db:schema:dump 显示没有带有 rails 3.2.3 和 SQL Server 2008 的字段

> ID：10865437
> 
> 赞同：4
> 
> 时间：2012-06-02T19:51:54.117
> 
> 标签：ruby-on-rails, ruby, sql-server, ruby-on-rails-3, rake

我正在将应用程序从 rails 2.3.8 迁移到 3.2.3。'rake db:schema:dump' 在 rails 2.3 中运行良好，但在 rails 3.2 中只生成没有列名的表名。

即使应用程序通过控制台成功连接，我也必须更改 config/application.rb 以包含

```
ActiveRecord::Base.table_name_prefix = 'dbo.' 
```

我是否需要为 rake 任务做一些不同的事情来获取这些前缀？还是其他原因导致缺少列名问题？

进一步澄清：我正在寻找 rake db:schema:dump 因为现场的程序员停止使用迁移并开始直接对数据库进行更改。现在我正在尝试使用迁移重新启动。该过程中推荐的第一步是使用模式转储作为起点。此外，（我不确定）测试需要从开发数据库重建测试数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T16:01:54.680

# 简短的回答：

`db:schema:dump`不是正确的使用方法，但您可以在 Rakefile 中添加几行代码以获得您想要的结果。

# 更长的答案：

[scuttlebutt](http://www.tutorialspoint.com/ruby-on-rails/rails-and-rake.htm)是任务`db:schema:dump`实际上不应该转储比结构更多的东西。（我知道，这是用词不当。）它类似于`db:structure:dump`，除了一个给你一个 .rb 文件，另一个给你一个 .sql 文件。

您可以通过将以下代码附加到您的 Rakefile 来创建自己的转储 rake 任务：

**对于 SQL 2008**

```
task :mydump do
  ActiveRecord::Base.connection.execute(
    "dbcc traceon(2544, -1) \n go \n dbcc traceon(2546, -1) \n go \n dbcc stackdump"
  )
end 
```

使用 SQL 服务器本身创建转储（这是前面的代码所做的）会限制您，因为转储将始终转到您的日志目录；您不能另行指定。

如果您使用 SqlDumper 或其他一些实用程序，您将拥有更多的自由。您可以从您的 rake 任务中调用这样的实用程序，方法是使用该方法从命令行执行它`system`。（参见下面的 MySQL 示例，它使用 mysqldump 实用程序。）

（我没有测试上述代码，我自己也没有安装 SQL 2008，但是在[这个博客](http://blogs.msdn.com/b/askjay/archive/2010/02/05/how-can-i-create-a-dump-of-sql-server.aspx)上解释了用于从 SQL 服务器创建转储的原始 SQL 代码。）

**运行 rake 任务**

然后在您的命令行上，调用`rake mydump`or `rake mydump RAILS_ENV=production`。

**对于 MySQL**

您可以使用以下方法为 MySQL 执行类似的操作：

```
task :mydump do
    config   = Rails.configuration.database_configuration[Rails.env]
    system "mysqldump -h #{config["host"]} -u #{config["username"]} -p#{config["password"]} #{config["database"]} > db/dump.sql"
end 
```

# html - float:left 会做很多吗 秒/ 留在单行吗？

> ID：10865438
> 
> 赞同：1
> 
> 时间：2012-06-02T19:51:55.167
> 
> 标签：html, css, css-float, inline

我有 5 个菜单按钮一个接一个地显示在一行中。

我输入`float:left`了按钮类的样式。

那为我完成了工作。

看看[这个](http://www.w3schools.com/css/tryit.asp?filename=trycss_display_inline)。如果我更改`display:inline`为`float:left`，它不会排列 2 段。 *哪种方法是正确的？*

编辑：我发现它在 JS Fiddle 中运行良好，但在 w3schools 上却不行。所以这会造成一些混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:25:03.200

**HTML**

```
<div>
    <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
    <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
</div> 
```

**CSS**

```
div { white-space: nowrap }
p { display: inline } 
```

这将使段落始终并排。[例子](http://jsfiddle.net/gxh46/)

如果您需要将段落设置为 display: inline-block，请务必将这些元素更改为默认为 inline-elements 的元素，以使其在较旧的 IE 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:42:24.210

我想你可以使用任何一个。我个人会为您的按钮布局选择浮动元素。

对您的主题问题的回答是肯定的，如果 div-tags 和 p-tags 的宽度总和不大于周围元素的宽度，它们将保持在同一行。

例如：

```
//HTML
<div class="wrapper">
    <div class="button">buttoncontent</div>
    <div class="button">buttoncontent</div>
</div>  

//CSS
.wrapper {
    width: 100px;
}

.button {
    float: left;
    width: 60px;
} 
```

在示例中，第二个按钮将打印在自己的行上，因为按钮的总宽度为 120 像素，而周围元素的宽度仅为 100 像素。如果类按钮的宽度为 40 像素，则两个按钮元素将打印在同一行上。

# java - Java 初学者：如何访问 SortedSet 条目的 Hashmap？

> ID：10865441
> 
> 赞同：3
> 
> 时间：2012-06-02T19:52:29.370
> 
> 标签：java, hashmap, sortedset

我正在上 java 课，老师让我们建立一个像这样的 HashMap：

```
Map<String, SortedSet<Car>> makeSetMap = new HashMap<String, SortedSet<Car>>(); 
```

Car 对象从汽车文件（如`Toyota Corolla 8 90000`）中读取，并进行一些处理以将它们放入 Hashmap 中，如上所述。所以地图的键是一个字符串，它最终是制造商名称（丰田），然后值是汽车的 SortedSet。

稍后在应用程序中我应该设置它，以便用户可以选择他想要显示的模型，然后它将只显示来自该模型的汽车数据。现在我只是想知道如何访问整个事情中的所有数据。我已经为 Hashmap 编写了一些代码，并且可以使用迭代器显示制造商名称，但我不知道如何显示单个汽车数据。:(

这是我到目前为止所拥有的 - 这是一个片段，但我认为你们可以弄清楚：

```
 //I'm starting to have trouble here..
    Set<String> brands = makeSetMap.keySet();
    System.out.println("Brands are: " + brands.toString());
    Iterator<String> brandsIt = brands.iterator();

    while (brandsIt.hasNext())
    {
        SortedSet<Car> brandmodels;
        //brandmodels = brandsIt.next();
        //System.out.println("Working on: " +brandmodels.toString());

    } 
```

帮助！感谢任何可以理顺我的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:14:34.277

要访问所有数据，您可以使用以下内容：

```
for (Map.Entry<String, SortedSet<Car>> entry : makeSetMap.entrySet()) {
    String manufacturer = entry.getKey();
    SortedSet<Car> cars = entry.getValue();
    System.out.println("Working on: " + manufacturer);

    for (Car car : cars) {
        System.out.println(" Car: " + car);
    }
} 
```

要访问特定制造商的汽车，您可以使用以下内容：

```
for (Car car : makeSetMap.get("Toyota")) {
    System.out.println("Car: " + car);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:00:23.233

要打印每个制造商的所有汽车型号：

```
Map<String, SortedSet<Car>> makeSetMap = new HashMap<String, SortedSet<Car>>();

// ...

for(String key: makeSetMap.keySet()) { // loop through all manufacturers
   SortedSet<Car> cars = makeSetMap.get(key);
   for(Car c: cars) { // loop through all cars of that key
       System.out.println(key + " " + car);
   }
} 
```

假设你的`Car`班级有一个`toString`覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:41:44.580

是的，我是根据这个和其他评论想出来的！在这里感谢大家的帮助！哇！基本上，在构建 makeSetMap 时，我还需要构建制造商名称的地图（“makeMap”），例如（1-toyota，2-honda）等。我要在运行时扫描用户输入并收集我是使用，然后以某种方式使用该制造商名称来提取哈希图中的所有汽车并显示它们的数据。此代码片段是我缺少的关键： `SortedSet<Car> carSortedSetTmp = makeSetMap.get(makeMap.get(choice));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:00:36.970

所以你有这样的地图

```
Map<String, Set<? extends Car>> carMap = ... 
```

如果您想要所有丰田汽车，那么您只需执行以下操作：

```
Set<? extends Car> allToyotas = carMap.get("Toyota"); 
```

如果你想迭代，那么你可以这样做：

```
for(Car toyota : allToyotas) {
   System.out.println(toyota);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T20:04:22.660

像这样的东西？

```
Set<String> brands = makeSetMap.keySet();
System.out.println("Brands are: " + brands.toString());

for(String brand : makeSetMap.keySet())    {
    SortedSet<Car> brandmodels = makeSetMap.get(brand);
    for(Car car : brandmodels){
        System.out.println(car);
    }
} 
```

# c++ - C ++中的自动溢出检测？

> ID：10865443
> 
> 赞同：6
> 
> 时间：2012-06-02T19:52:30.447
> 
> 标签：c++, overflow

> **可能重复：**
> [在 C/C++ 中检测整数溢出的最佳方法](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)

通常，当我使用大量数字在 C++ 中编写某些内容时，我无法判断何时发生溢出，即使我使用的是 long long 或其他 64 位数据类型。有没有比目击错误值更有效的方法来检测何时发生溢出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:14:50.947

您可能不会从标准 C++ 中获得太多东西：

> **5 表达式**
> 
> **4**如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。[注意：大多数现有的 C++ 实现忽略整数溢出。除以零的处理，使用零除数形成余数，所有浮点异常因机器而异，通常可以通过库函数进行调整。——尾注]

您最好的选择是使用标准的固定宽度整数类型，`<cstdint>`例如`uint32_t`.

还请查看`<cerrno>`标题以获取错误代码，例如`EOVERFLOW`. 然后有来自的`overflow_error`/`underflow_error`类`<stdexcept>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:27:05.997

实际上，您甚至无法在事后可靠地检测到溢出，因为有符号整数运算中的溢出会导致未定义的行为。如果编译器可以看到仅在发生溢出时才到达代码路径，则允许对其进行完全优化（因为在未定义的行为情况下它可以做任何事情）。无符号类型的不同之处在于它们定义了溢出特性（它们执行模运算）。

因此，检测带符号类型溢出的唯一方法是事先进行适当的检查，这非常昂贵。设计事物的效率几乎总是要高得多，这样您的算法的不变量就可以确保不会出现溢出。

至于在溢出发生之前检测可能的溢出的资源，请参阅[https://stackoverflow.com/a/199413/445525](https://stackoverflow.com/a/199413/445525)

# svg - 'set' 元素 - 循环

> ID：10865444
> 
> 赞同：4
> 
> 时间：2012-06-02T19:52:31.657
> 
> 标签：svg, smil

我有：

```
<set attributeName="visibility" attributeType="CSS" to="visible" begin="5s" fill="freeze"/>
<set attributeName="visibility" attributeType="CSS" to="hidden" begin="10s" fill="freeze"/> 
```

我希望循环执行这些指令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T15:35:42.193

如果您希望该项目连续“闪烁”和关闭，您需要将动画设置为具有持续时间并在另一个结束时开始。例如：

## 演示：http: [//jsfiddle.net/rnSFY/](http://jsfiddle.net/rnSFY/)

```
<svg xmlns="http://www.w3.org/2000/svg">
  <circle fill="red" cx="50%" cy="50%" r="30" stroke="black">
    <set id="show" attributeName="visibility" attributeType="CSS" to="visible"
         begin="0s; hide.end" dur="1s" fill="freeze"/>
    <set id="hide" attributeName="visibility" attributeType="CSS" to="hidden"
         begin="show.end" dur="1s" fill="freeze"/>
  </circle>
</svg>​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-21T15:47:36.053

[`set`](http://www.w3.org/TR/2001/REC-smil-animation-20010904/#setElement)您可以使用单个[`animate`](http://www.w3.org/TR/2001/REC-smil-animation-20010904/#animateElement)在隐藏和可见之间无限 切换，而不是在两个不同的静态元素之间来回切换。

然后您也不必担心将开始时间与另一个命名动画的结束事件联系起来

```
<svg xmlns="http://www.w3.org/2000/svg">
  <circle fill="red" cx="50%" cy="50%" r="30" stroke="black">
    <animate attributeType="CSS"
             attributeName="visibility"
             from="visible" 
             to="hidden"
             dur="1s"
             repeatCount="indefinite"/>
  </circle>
</svg>
```

# ios - 核心数据：自动提交的默认状态

> ID：10865452
> 
> 赞同：0
> 
> 时间：2012-06-02T19:53:25.640
> 
> 标签：ios, core-data, autocommit

我想知道 iOS Core Data 中自动提交的默认状态是什么，是否可以更改它。我在官方文档中找不到任何提及。在 SO 我发现只有[这个](https://stackoverflow.com/questions/6100449/when-i-try-sqlite-on-ios-insert-and-update-does-not-work)据说，原生 sqlite 框架具有确定自动提交状态的低级功能。如果默认设置，也许可以通过取消设置自动提交来提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T23:58:08.797

Core Data 没有自动提交。您必须保存您的上下文。现在，如果您使用的是 UIManagedDocument，它就不同了……因为它确实具有自动保存功能，但您仍然必须告诉它它有脏数据，以便它知道自动保存。

# android - Phonegap / Cordova ChildBrowser 不会运行 Twitter 网络意图（SSL？）

> ID：10865454
> 
> 赞同：1
> 
> 时间：2012-06-02T19:53:40.670
> 
> 标签：android, twitter, cordova, childbrowser

我正在尝试将 Twitter 共享功能集成到我的 Android PhoneGap 应用程序中，而不是重新实现控件来缩短 URL 和跟踪推文长度，我想我会在`https://twitter.com/intent/...`

所以我试图`https://twitter.com/intent/tweet?text=Hello`在 ChildBrowser 窗口中启动一个 URL，这样我就可以让 Twitter 的界面接管。用户可以使用他们的凭据登录，一旦他们登录，来自 URL 参数的文本将出现在 Tweet 框中。

它行不通。当我使用`http://twitter.com/intent/...`而不是 时`https://twitter.com/intent/...`，ChildBrowser 会显示登录屏幕，但是一旦用户提交他们的凭据，屏幕就会变白。我怀疑这是因为 Twitter 切换到了 HTTPS。

我通过尝试简单的`window.open`而不是`window.plugins.childBrowser.showWebPage`. 在 Android 上使用本机浏览器时，我对 HTTP / HTTPS 没有任何问题。但是，本机浏览器提示我接受未经验证的安全证书。我怀疑这是 ChildBrowser 的问题 - 它不知道如何处理该提示。

使用本机浏览器弹出窗口根本不是一种选择：用户需要能够在点击“Tweet”或“Follow”等后退出进程，但 Android 设备上的“后退”按钮只会移动历史记录后退到 POST 操作以了解他们的意图。然后，它会从头开始重新启动应用程序，而不是让您回到原始状态。

**如何配置 ChildBrowser / 我的 Android Phonegap 应用程序以覆盖 Twitter 上的 SSL 问题，以便我可以在 Childbrowser 中运行 Web 意图？**

相关代码为：

```
base="https://twitter.com/intent/tweet?text="; 
URL=base+encodeURIComponent("it works!"); 

// works, but asks to accept a certificate
window.open(URL);

// blank white page
window.plugins.childBrowser.showWebPage(URL, { showLocationBar: true }); 
```

我的`cordova.xml`文件的白名单配置如下：

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages --> 
```

...我不怀疑这应该是一个问题。但是，交换的基本测试`origin=".*"`没有产生行为变化。

我还检查了 Twitter 意图登录页面的 HTTP 和 HTTPS 标头。似乎没有任何异常之处——它们是相同的，除了用于 HTTPS 的 Strict-Transport-Security 标头，它可以在其他地方（例如 Github）使用。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:20:02.347

ChildBrowser 不受白名单的约束。白名单仅用于防止 PhoneGap 主应用程序在受信任域之外运行代码。

我相信如果您从 Android 获取最新的 ChildBrowser 代码，您将不会再遇到这个问题。我们最近进行了一些更改，使其更加强大。

此外，Libby 有一个很好的集成 Twitter 和 ChildBrowser 的教程。

[http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)

# java - Json 日期到 Java 日期并返回到 Json 日期

> ID：10865455
> 
> 赞同：3
> 
> 时间：2012-06-02T19:53:41.153
> 
> 标签：java, json, date

我在这里查看了所有可能的答案，但我很难弄清楚这件事。

我在字符串中有 Json 日期。我想在不浪费时间的情况下转换成 Java 日期。

我也想从 Java 日期转换为 Json 日期字符串。

这就是我所拥有的。

```
String jsonDateString = "/Date(1295157600000-0600)/"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:56:34.990

您的时间有 2 个部分：以毫秒为单位的本地时间，以及以小时和分钟为单位的偏移量。您必须解析它们并“添加”它们以获得毫秒 UTC。

您可以使用此功能：

```
private static Pattern p = Pattern.compile("\\((\\d+)([+-]\\d{2})(\\d{2})\\)");
public static Date jd2d(String jsonDateString) {
    Matcher m = p.matcher(jsonDateString);
    if (m.find()) {
        long millis = Long.parseLong(m.group(1));
        long offsetHours = Long.parseLong(m.group(2));
        long offsetMinutes = Long.parseLong(m.group(3));
        if (offsetHours<0) offsetMinutes *= -1;
        return new Date(
            millis
            + offsetHours*60l*60l*1000l
            + offsetMinutes*60l*1000l
        );
    }
    return null;
} 
```

为了使“返回”一个 JSON 日期，我只需对 UTC 时间进行编码：

```
String jsonDate = "/Date("+date.getTime()+"+0000)/"; 
```

# android - 动画后的TextView重置文本大小

> ID：10865461
> 
> 赞同：1
> 
> 时间：2012-06-02T19:54:29.927
> 
> 标签：android

当我单击 TextView 并且我有类似的代码时，我想使文本大小变大

/res/anim/scale_up.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <scale
        android:duration="500"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:toXScale="1.3"
        android:toYScale="1.3" >

    </scale>

</set> 
```

并在代码中

```
txt.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Animation a = AnimationUtils.loadAnimation(SwipeActivity.this, R.anim.scale_up);
                a.reset();
                v.clearAnimation();
                v.startAnimation(a);
            }
        }); 
```

它会缩放，但是当它完成缩放（500ms）时，它会恢复原来的字体大小。如何防止这种情况，我想保持两倍大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T21:18:25.420

首先，您可以将 textsize 设置为使用动画的 TextView 。对其进行动画处理会使文本变得模糊。

埃克斯：

textView.setTextSize(20);

动画弹回原来大小的原因是你没有使用 setFillAfter。

```
Animation a = AnimationUtils.loadAnimation(SwipeActivity.this, R.anim.scale_up);
a.setFillAfter(true);
v.startAnimation(a); 
```

# dreamweaver - 如何在 Dreamweaver cs6 中更改流体布局的百分比和列数？

> ID：10865467
> 
> 赞同：2
> 
> 时间：2012-06-02T19:55:35.530
> 
> 标签：dreamweaver, fluid-layout

我正在使用 Dreamweaver cs6 创建流畅的布局。当新的文档选项窗口首次打开时，它会为您提供有关每个设备的百分比和列数的选项。我已经这样做了，但想在创建文档后更改百分比和列数。创建文档后，有没有办法在 Dreamweaver cs6 中更改流体布局的百分比和列数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:25:35.230

您可以在 DW 要求您创建的 css 文件中编辑这些值：

```
/*
Dreamweaver Fluid Grid Properties
----------------------------------
dw-num-cols-mobile:     5;
dw-num-cols-tablet:     8;
dw-num-cols-desktop:    10;
dw-gutter-percentage:   25;

Inspiration from "Responsive Web Design" by Ethan Marcotte 
http://www.alistapart.com/articles/responsive-web-design

and Golden Grid System by Joni Korpi
http://goldengridsystem.com/
*/ 
```

保存、退出并重新打开项目后，列和装订线百分比将被更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T12:13:08.347

我有同样的问题，我找到了一个简单的解决方案。您创建一个新的流体网格布局，其中包含您不会保存的更改，以便它为您创建新的 css 和 respond.min.js 文件。您删除了您创建的所有其他新文件，只保留了 respond.min.js，然后将旧文件替换为新文件，然后您就完成了。哦，保留一份旧的副本以确保安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T23:08:06.170

*Dreamweaver CS6：缺失的手册*( [https://www.inkling.com/read/dreamweaver-cs6-missing-manual-david-sawyer-mcfarland-1st/chapter-11/fluid-grid-layouts](https://www.inkling.com/read/dreamweaver-cs6-missing-manual-david-sawyer-mcfarland-1st/chapter-11/fluid-grid-layouts) ) 说：

> 不幸的是，一旦您选择了一个装订线值，就无法返回此 [“新流体网格布局”] 屏幕并对其进行更改。事实上，由于 Dreamweaver 使用此值对您插入的列进行一些复杂的计算，因此一旦您创建了布局，就没有简单的方法来更改此值。

我们或许可以尝试更改现有 FGL CSS 中的宽度和填充数字（Dreamweaver 在创建文件时计算到小数点后四位的数字），但创建一个新的流体网格布局样式表可能更容易。但是，欢迎使用更用户友好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-18T01:45:05.800

我有同样的问题，我找到了一个非常简单的解决方案。
您需要创建一个新的流体网格布局（文件 - 新流体网格布局），根据需要设置列数、宽度和装订线数，然后将新的 css 文件保存在某处。调节布局的样式（即宽度、列之间的边距和列数）在 .gridContainer 下设置，因此您只需将旧流体布局 css 文件中的 .gridContainer 样式替换为新流体布局 css 文件中的 .gridContainer 样式. 确保为您更改的所有屏幕尺寸（桌面、桌面、移动设备或全部）替换 .gridContainer 样式。

# c++ - 使用 CRegKey 在 C++ 中访问 Windows 注册表

> ID：10865469
> 
> 赞同：2
> 
> 时间：2012-06-02T19:55:51.317
> 
> 标签：c++, windows, qt, registry

我尝试使用以下代码访问 Windows 注册表：

```
CRegKey key;
LPTSTR szBuffer = new TCHAR[50];
ULONG cchBuffer = 257;
key.Open(HKEY_CURRENT_USER, L"HARDWARE", KEY_READ);
ULONG chars;
CString str;

if (key.QueryStringValue(L"Test", 0, &chars) == ERROR_SUCCESS)
{
    key.QueryStringValue(L"Test", str.GetBuffer(chars), &chars);
    str.ReleaseBuffer();
}
key.Close(); 
```

它返回 Microsoft Visual C++ 运行时库的错误：

> 调试断言失败！
> 
> 程序： ...
> 
> 文件：C:\Program Files\Microsoft Visual Studio 11.0\VC\ATLMFC\INCLUDE\altbase.h 行：6146
> 
> 表达式：m_hkey != 0
> 
> 求信息啊啊啊

按忽略后它崩溃。

我不确定使用的是什么编译器，因为我（认为我已经）将 Qt Creator 配置为使用 Visual C++，但输出目录操作系统称为 ..._._MinGW_Qt_SDK_DEBUG

现在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T21:54:05.703

我附近没有 Windows 机器，但我认为没有名为`HARDWARE`into的子项`HKEY_CURRENT_USER`：它是 into `HKEY_LOCAL_MACHINE`。

再加上您没有检查`Open`错误调用这一事实表明您真正想要做的是：

```
key.Open(HKEY_LOCAL_MACHINE, L"HARDWARE", KEY_READ); 
```

无论如何，处理错误总是一个好主意，以防万一。

# tomcat - 控制会话的到期

> ID：10865475
> 
> 赞同：3
> 
> 时间：2012-06-02T19:56:31.637
> 
> 标签：tomcat, jsf-2, primefaces

有时几分钟后我必须刷新浏览器才能让我的 Web 应用程序与 JSF 再次工作，也许这是**web.xml的问题**

```
<session-config>
<session-timeout>30</session-timeout> 
</session-config> 
```

30 分钟后，当没有用户与会话进行交互时，会话将存在。在此期间之后，会话将失效。所以我希望我控制我的代码中的会话（直到用户注销）而不是**web.xml中的分钟**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:15:47.770

如果我理解您的问题，您希望您的会话永不过期。如果这是您想要的，您只需将 session-timeout 参数设置为 0。换句话说，将 web.xml 文件中的 30 更改为 0。

# jquery - 使用 jQuery .on 与使用 .live？

> ID：10865478
> 
> 赞同：0
> 
> 时间：2012-06-02T19:57:07.940
> 
> 标签：jquery, jquery-on

一个简单的问题，因为 1.7 版本的 jQuery .live() 已被弃用，取而代之的是 .on(); 但是 .on() 似乎不适用于通过 JavaScript 呈现并加载到 DOM 中的元素。所以我的问题是，是否仍应使用 .live() 或者 .on() 如何捕获这些新生成的元素？

例如，这是我的代码：

```
$("#listitem").append("<li id='removeitem'>" + 
       formdata + ' <a href="#">Remove</a></li>'); 
```

当我尝试通过 .on() 操作这个元素时 - 结果什么都没有，而 .live() 能够抓住这个元素。

```
$("#removeitem").live("click", function(event) { alert($(this).text()); }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T20:00:07.893

`live`版本：

```
$("#removeitem").live("click", function(event) { alert($(this).text()); }); 
```

应改为：

```
$("#containerId").on("click", "#removeitem", function(event) { 
    alert($(this).text()); 
}); 
```

加载到`containerId`的**静态**元素在哪里。`removeitem`

您可以简单地`body`用作静态元素：

```
$("body").on('click', '#removeitem'm fn); 
```

但是代码效率会降低，只需尝试使用它来展示它是如何工作的。

* * *

**笔记：**

1.  我希望你没有多个相同的元素，`id`因为它是无效的标记。
2.  它看起来像是`listitem`代码中的静态元素。

**更新：**

> 也许这就是我的问题 - 我刚刚用 .on 替换了 .live

您不能简单地替换它们......它们以其他方式工作，并且具有不同的参数！

阅读每个函数的文档：

[`on`](http://api.jquery.com/on/)：

```
.on(events [, selector] [, data], handler(eventObject)) 
```

[`live`：](http://api.jquery.com/live/)

```
.live( events, handler(eventObject) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:00:31.607

你应该`.on()`这样尝试：

```
$('#listitem').on('click', '#removeitem', function() {
    alert($(this).text());
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/118/)**

如果您没有固定的 id`removeitem`并且如果它的结构像`removeitem1`,`removeitem1`等等，那么请尝试：

```
$('#listitem').on('click', '[id^=removeitem]', function() {
    alert($(this).text());
}); 
```

# php - 如何从较大的表单中通过 jquery $.ajax 处理文件上传表单？

> ID：10865479
> 
> 赞同：2
> 
> 时间：2012-06-02T19:57:15.793
> 
> 标签：php, javascript, jquery, ajax

我遇到了一个问题。我有一个通过问题提交文章的表单`$.ajax()`，我正在为用户提供上传文件的选项并且我不希望页面刷新，所以我将上传表单放在提交文章的主表单中。看来我不能嵌套表格..而且我还需要`$_FILES`数组中文件的值..

这是我的 HTML 表单：

```
<form action="/" id="upload-form">
    <fieldset>
        <p class="upload-result">
        <!-- result of upload goes here -->
        </p>
        <p class="upload-images">
            <label><?php _e('Upload Images','sofa'); ?></label><a href="" class="button-secondary img_add_upload"><?php _e('Upload Image','sofa'); ?></a><a href="" class="button-secondary img_add_url"><?php _e('Add Image URL','sofa'); ?></a>
        </p>
        <p class="upload-url">
            <input type="text" name="img_url" id="img_url" value="<?php _e('Enter URL of image here...','sofa'); ?>" /><a href="" class="button-secondary img_add"><?php _e('Add Image','sofa'); ?></a>
        </p>
        <p class="upload-file">
            <input type="file" id="async-upload" name="async-upload" size="47" /><a href="" class="button-secondary img_upload"><?php _e('Upload','sofa'); ?></a>
        </p>
        <ol class="upload-images-lib">
            <li></li>
        </ol><div class="clear"></div>
        <p class="upload-images-note"><?php printf(__('Click on image to view full size. To mark image as main/featured, add image then click on %s icon.','sofa'), '<img src="'.get_bloginfo('template_directory').'/img/box.png" alt="" />'); ?></p>
        <p class="upload-input">
            <label for="utitle"><?php _e('Title','sofa'); ?></label>
            <input type="text" name="utitle" id="utitle" value="" />
            <span><?php _e('Enter a good title that describes what you are publishing. Be creative!','sofa'); ?></span>
        </p>
        <p class="upload-input">
            <label for="cat"><?Php _e('Category','sofa'); ?></label>
            <?php wp_dropdown_categories('hide_empty=0'); ?>
        </p>
        <p class="upload-editor">
            <?php wp_editor( '', 'ucontent', $settings = array(
                'textarea_rows' => 8,
                'textarea_name' => 'ucontent'
            )); ?>
        </p>
        <p class="upload-input">
            <label for="utags"><?php _e('Tags','sofa'); ?></label>
            <input type="text" name="utags" id="utags" value="" />
            <span><?php _e('Enter a comme seperated list of tags that perfectly describe your post. e.g. funny, man, public','sofa'); ?></span>
        </p>
        <p class="upload-submit">
            <input type="submit" value="<?php _e('Publish','sofa'); ?>" class="gradient-link-normal" />
        </p>
    </fieldset>
</form> 
```

问题出在这部分。

```
<p class="upload-file">
    <input type="file" id="async-upload" name="async-upload" size="47" /><a href="" class="button-secondary img_upload"><?php _e('Upload','sofa'); ?></a>
</p> 
```

我想处理文件上传，当单击它时，文件上传的 PHP 表单`$_FILES`显然需要数组。

我不确定这是否可能。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:14:28.083

您需要使用 jQuery 插件来处理文件上传，并像您已经做的那样处理来自您的 from 的剩余数据。

**有一些现成的插件来执行文件上传：**

[值 ajax 上传](http://valums.com/ajax-upload/)

[jQuery 多文件上传插件](http://www.fyneworks.com/jquery/multiple-file-upload/)

[Ajax文件上传](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)

[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

您可以在 jQuery 的插件站点上找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-03T18:54:20.953

在页面上的另一个位置拥有嵌套表单的最佳方法，并且仅在您使用“上传”按钮单击时才显示它。

上传表单（小表单）我们最初是不可见的。您可以使用弹出窗口或 jquery 代码来显示。

```
<div id="smallform">
    <form name="upload">
        <input type="file" name="picture">
        <input type="submit" name="upload" value="Upload">
    </form>
</div>

<div id="largeform">
<form name="details">
    <input name="detail1">
    <input name="detail2">
     <a href="#" onclick="showSmallForm()">Upload file</a>
    <input type="submit">
</form>
</div> 
```

函数 showSmallForm() 将在单击上传时将小表单显示为较大的表单。

# javascript - mod_rewrite 到 index.html 会破坏深层 URL 的相对路径

> ID：10865480
> 
> 赞同：2
> 
> 时间：2012-06-02T19:57:18.857
> 
> 标签：javascript, apache, mod-rewrite, single-page-application

对于单页应用程序，我的 .htaccess 文件中有以下 RewriteRule 以将所有流量定向到 index.html，以便 JS 可以解析 URL 并相应地触发控制器。

```
 # html5 pushstate (history) support:
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !index
  RewriteRule (.*) index.html [L] 
```

这适用于顶级 URL，如 www.mydomain.com/resource，但更深层次的 URL，如 www.mydomain.com/resource/123，会在 index.html 中破坏当前目录 ('.') 的值。

例如，我的 index.html 中的脚本标记如下

```
<script src="js/app/config.js"></script> 
```

将转化为 src="resource/app/config.js"

或者，对于像“www.mydomain.com/more/nested/resource/123”这样的 url，同一个 js 文件上的 src 将被解释为“more/nested/resource/app/config.js”。

不用说，这些文件不存在并且应用程序中断。

任何人都可以对这里发生的事情有所了解吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T06:18:24.537

我让它工作，这就是：

当您将以下内容作为 src 时：

```
<script src="js/app/config.js"></script> 
```

您是对的，Apache 正确地重新路由到 index.html（或您拥有的任何后备 URL），然后尝试根据 URL 中的嵌套路径相对访问资源。

要更正此问题，您需要有一个前导“/”来表示根目录，如下所示：

```
<script src="/js/app/config.js"></script> 
```

一旦我为我的 js 库、css 表等执行此操作，它就运行得非常好，backbone.js 处理了所有的 URL。

**注意**：在 Apache 2.2+ 中，您现在可以使用[FallbackResource](http://httpd.apache.org/docs/trunk/mod/mod_dir.html#fallbackresource)代替 mod_rewrite，它需要更少的行并完成相同的事情。

推荐的另一件事是尽可能使用绝对 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T22:25:42.240

我使用它来支持 html5 历史记录——js、css、img 或 svc 目录中的任何内容都未修改。其他所有内容都转到 index.html：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteRule ^(js|css|img|svc)($|/) - [L]
RewriteRule ^(.*)$ index.html [L] 
```

请注意，我刚刚在下面看到您的评论。如果您将脚本引用为

```
<script src="/js/myscript.js"> 
```

那么您不必担心 html 的基本位置。注意“js”之前的斜线。我意识到在另一个答案中已经指出了这一点，但是该技术和重写规则的结合可能会奏效。

# android - 在android中连接模拟器实例

> ID：10865482
> 
> 赞同：-1
> 
> 时间：2012-06-02T19:57:57.040
> 
> 标签：android, android-emulator

我读了一个关于同一主题的帖子：[connecting 2 Emulator Instances](https://stackoverflow.com/questions/4683854/connecting-2-emulator-instances-in-android/4738690#4738690)

监听 6000 端口的服务器端代码：

```
 public class NewServerActivity extends Activity {
   ServerSocket ss = null;
   String mClientMsg = "";
   Thread myCommsThread = null;
   protected static final int MSG_ID = 0x1337;
   public static final int SERVERPORT = 6000;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      TextView tv = (TextView) findViewById(R.id.TextView01);
      tv.setText("Nothing from client yet");
      this.myCommsThread = new Thread(new CommsThread());
      this.myCommsThread.start();
   }

   @Override
   protected void onStop() {
      super.onStop();
      try {
         // make sure you close the socket upon exiting
         ss.close();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

   Handler myUpdateHandler = new Handler() {
      public void handleMessage(Message msg) {
         switch (msg.what) {
         case MSG_ID:
            TextView tv = (TextView) findViewById(R.id.TextView01);
            tv.setText(mClientMsg);
            break;
         default:
            break;
         }
         super.handleMessage(msg);
      }
   };
   class CommsThread implements Runnable {
      public void run() {
         Socket s = null;
         try {
           ss = new ServerSocket(SERVERPORT );
         } catch (IOException e) {
            e.printStackTrace();
         }
         while (!Thread.currentThread().isInterrupted()) {
            Message m = new Message();
            m.what = MSG_ID;
            try {
               if (s == null)
                  s = ss.accept();
               BufferedReader input = new BufferedReader(
                     new InputStreamReader(s.getInputStream()));
               String st = null;
               st = input.readLine();
               mClientMsg = st;
               myUpdateHandler.sendMessage(m);
            } catch (IOException e) {
               e.printStackTrace();
            }
         }
      }
   }
} 
```

客户端代码：

```
public class NewClientActivity extends Activity {
   private Button bt;
   private TextView tv;
   private Socket socket;
   private String serverIpAddress = "10.0.2.2";
   // AND THAT'S MY DEV'T MACHINE WHERE PACKETS TO
   // PORT 5000 GET REDIRECTED TO THE SERVER EMULATOR'S
   // PORT 6000
   private static final int REDIRECTED_SERVERPORT = 5000;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      bt = (Button) findViewById(R.id.myButton);
      tv = (TextView) findViewById(R.id.myTextView);

      try {
         InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
         socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
      } catch (UnknownHostException e1) {
         e1.printStackTrace();
      } catch (IOException e1) {
         e1.printStackTrace();
      }

      bt.setOnClickListener(new OnClickListener() {

         public void onClick(View v) {
            try {
               EditText et = (EditText) findViewById(R.id.EditText01);
               String str = et.getText().toString();
               PrintWriter out = new PrintWriter(new BufferedWriter(
                     new OutputStreamWriter(socket.getOutputStream())),
                     true);
               out.println(str);
               Log.d("Client", "Client sent message");

            } catch (UnknownHostException e) {
               tv.setText("Error1");
               e.printStackTrace();
            } catch (IOException e) {
               tv.setText("Error2");
               e.printStackTrace();
            } catch (Exception e) {
               tv.setText("Error3");
               e.printStackTrace();
            }
         }
      });
   }
} 
```

我在一个模拟器上应用了服务器代码，在另一个模拟器上应用了客户端代码。重定向端口：

```
 telnet localhost 5554
  redir add tcp:5000:6000 
```

我在模拟器 5554 上运行服务器，在 5556 上运行客户端。

我的客户端工作正常，但不幸的是，在启动服务器应用程序时，模拟器会显示一条消息，但不幸的**是 APPLICATION 已停止**。并且 Eclipse在“ ***s = ss.accept();*** ”行显示了一个**java.lang.NullPointerException 。**它是否与我的 AVD 的配置有关。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:45:31.713

发布您的代码和堆栈跟踪。

从您发布的一行中，听起来“ss”为空，而您正试图在空上调用accept()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T20:41:25.997

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

public void mOnClick(View v) {
    switch (v.getId()) {
        case R.id.myButton:
            new Thread(new Runnable() {
                @Override
                public void run() {
                    try {

                        InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
                        socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);

                        EditText et = (EditText) findViewById(R.id.EditText01);
                        String str = et.getText().toString();

                        PrintWriter out = new PrintWriter(new BufferedWriter(
                                new OutputStreamWriter(socket.getOutputStream())),
                                true);
                        out.println(str);

                        Log.d("Client", "Client sent message");

                        out.close();
                        socket.close();
                    } catch (UnknownHostException e) {
                        //tv.setText("Error1");
                        e.printStackTrace();

                    } catch (IOException e) {
                        //tv.setText("Error2");
                        e.printStackTrace();
                    } catch (Exception e) {
                        //tv.setText("Error3");
                        e.printStackTrace();
                    }
                }
            }).start();
            break;
    }

} 
```

需要 xml 更改 android:onClick="mOnClick"

```
<Button
    android:id="@+id/myButton"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="mOnClick"
    android:text="start" /> 
```

这是因为尝试在主线程中运行 connect() 方法*

# python - 使用 Python 以 MySQL 格式打印结果

> ID：10865483
> 
> 赞同：19
> 
> 时间：2012-06-02T19:57:57.473
> 
> 标签：python, mysql

以与 MySQL 在控制台中使用 Python 打印结果相同的方式从 MySQL 查询中打印结果的最简单方法是什么？例如，我想得到类似的东西：

```
+---------------------+-----------+---------+
| font                | documents | domains |
+---------------------+-----------+---------+
| arial               |     99854 |    5741 |
| georgia             |     52388 |    1955 |
| verdana             |     43219 |    2388 |
| helvetica neue      |     22179 |    1019 |
| helvetica           |     16753 |    1036 |
| lucida grande       |     15431 |     641 |
| tahoma              |     10038 |     594 |
| trebuchet ms        |      8868 |     417 |
| palatino            |      5794 |     177 |
| lucida sans unicode |      3525 |     116 |
| sans-serif          |      2947 |     216 |
| times new roman     |      2554 |     161 |
| proxima-nova        |      2076 |      36 |
| droid sans          |      1773 |      78 |
| calibri             |      1735 |      64 |
| open sans           |      1479 |      60 |
| segoe ui            |      1273 |      57 |
+---------------------+-----------+---------+
17 rows in set (19.43 sec) 
```

注意：我不知道每列的最大宽度先验，但我希望能够做到这一点而无需翻过表格两次。我应该为每列添加查询长度（）吗？MySQL 如何做到这一点，以免严重影响内存或处理时间？

*编辑*

我认为这与问题无关，但这是我发送的查询：

```
SELECT font.font as font,count(textfont.textid) as documents, count(DISTINCT td.domain) as domains
FROM textfont 
RIGHT JOIN font
ON textfont.fontid = font.fontid
RIGHT JOIN (
        SELECT text.text as text,url.domain as domain, text.textid as textid 
        FROM text 
        RIGHT JOIN url 
        ON text.texturl = url.urlid) as td 
ON textfont.textid = td.textid
WHERE textfont.fontpriority <= 0 
AND textfont.textlen > 100
GROUP BY font.font 
HAVING documents >= 1000 AND domains >= 10
ORDER BY 2 DESC; 
```

这是我使用的python代码：

```
import MySQLdb as mdb

print "%s\t\t\t%s\t\t%s" % ("font","documents","domains")
res = cur.execute(query , (font_priority,text_len,min_texts,min_domains))
for res in cur.fetchall():
    print "%s\t\t\t%d\t\t%d" % (res[0],res[1],res[2]) 
```

但是由于宽度不同，此代码会产生混乱的输出。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-04T18:26:08.510

不需要外部库。打印出带有列名的数据。如果您不需要列名，则可以删除所有带有 'columns' 变量的行。

```
sql = "SELECT * FROM someTable"
cursor.execute(sql)
conn.commit()
results = cursor.fetchall()

widths = []
columns = []
tavnit = '|'
separator = '+' 

for cd in cursor.description:
    widths.append(max(cd[2], len(cd[0])))
    columns.append(cd[0])

for w in widths:
    tavnit += " %-"+"%ss |" % (w,)
    separator += '-'*w + '--+'

print(separator)
print(tavnit % tuple(columns))
print(separator)
for row in results:
    print(tavnit % row)
print(separator) 
```

这是输出：

```
+--------+---------+---------------+------------+------------+
| ip_log | user_id | type_id       | ip_address | time_stamp |
+--------+---------+---------------+------------+------------+
| 227    | 1       | session_login | 10.0.0.2   | 1358760386 |
| 140    | 1       | session_login | 10.0.0.2   | 1358321825 |
| 98     | 1       | session_login | 10.0.0.2   | 1358157588 |
+--------+---------+---------------+------------+------------+ 
```

神奇之处在于每一`cursor.description`行的第三列（`cd[2]`在代码中调用）。此列表示最长值的字符长度。因此，我们将显示列的大小设置为与列标题本身的长度（`max(cd[2], len(cd[0]))`）之间的较大值。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-02T20:17:16.037

采用[`prettytable`](http://code.google.com/p/prettytable/)

```
x = PrettyTable(["City name", "Area", "Population", "Annual Rainfall"])
x.set_field_align("City name", "l") # Left align city names
x.set_padding_width(1) # One space between column edges and contents (default)
x.add_row(["Adelaide",1295, 1158259, 600.5])
x.add_row(["Brisbane",5905, 1857594, 1146.4])
x.add_row(["Darwin", 112, 120900, 1714.7])
x.add_row(["Hobart", 1357, 205556, 619.5])
x.add_row(["Sydney", 2058, 4336374, 1214.8])
x.add_row(["Melbourne", 1566, 3806092, 646.9])
x.add_row(["Perth", 5386, 1554769, 869.4])
print x

+-----------+------+------------+-----------------+
| City name | Area | Population | Annual Rainfall |
+-----------+------+------------+-----------------+
| Adelaide  | 1295 |  1158259   |      600.5      |
| Brisbane  | 5905 |  1857594   |      1146.4     |
| Darwin    | 112  |   120900   |      1714.7     |
| Hobart    | 1357 |   205556   |      619.5      |
| Sydney    | 2058 |  4336374   |      1214.8     |
| Melbourne | 1566 |  3806092   |      646.9      |
| Perth     | 5386 |  1554769   |      869.4      |
+-----------+------+------------+-----------------+ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-29T14:36:55.103

使用 Python 库将 MySQL 结果打印成 MySQL 表格式的最佳和最简单的方法`tabulate`

`user@system$ pip install tabulate`

**蟒蛇代码：**

```
import mysql.connector
from tabulate import tabulate

mydb = mysql.connector.connect(
                host="localhost",
                user="root",
                passwd="password",
                database="testDB"
              )

mycursor = mydb.cursor()
mycursor.execute("SELECT emp_name, salary FROM emp_table")
myresult = mycursor.fetchall()

print(tabulate(myresult, headers=['EmpName', 'EmpSalary'], tablefmt='psql')) 
```

**输出：**

```
user@system:~$ python python_mysql.py
+------------+-------------+
| EmpName    | EmpSalary   |
|------------+-------------|
| Ram        | 400         |
| Dipankar   | 100         |
| Santhosh   | 200         |
| Nirmal     | 470         |
| Santu      | 340         |
| Shiva      | 100         |
| Karthik    | 500         |
+------------+-------------+ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-02T20:10:53.323

数据似乎在某个列表中，并且正在打印标题。考虑一些这样的格式：

```
res = ['trebuchet ms', 8868, 417]
res = ['lucida sans unicode', 3525, 116] 
```

和

```
print(' {0[0]:20s} {0[1]:10d} {0[2]:10d}'.format(res)) 
```

给你

```
 trebuchet ms               8868        417
 lucida sans unicode        3525        116 
```

请注意，对列表的索引是在字符串内部完成的，`format`只需要提供列表或元组。

*或者*，您可以以编程方式指定宽度：

```
wid1 = 20
wid2 = 10
wid3 = 10
print(' {:{}s} {:{}d} {:{}d}'.format(res[0], wid1, res[1], wid2, res[2], wid3)) 
```

这给出了与上面相同的输出。

您必须根据需要调整字段宽度并循环遍历每行数据的列表，而不是组成样本行。数字自动右对齐，字符串自动左对齐。

对某些人来说，优势当然是它不依赖任何外部库，并且使用 Python 已经提供的功能。

[在此处](https://www.python.org/dev/peps/pep-3101/)了解有关字符串格式的更多信息

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-02T20:20:36.927

你需要做两遍：

1.  计算列宽
2.  打印表格

所以

```
table = cur.fetchall()
widths = [0]*len(table[0])  # Assuming there is always one row
for row in table:
    widths = [max(w,len(c)) for w,c in zip(widths,row)] 
```

现在您可以轻松地打印表格。

记住`string.rjust`打印数字时的方法。

**更新**

一种更实用的计算方式`widths`是：

```
sizetable = [map(len,row) for row in table]
widths = map(max, zip(*sizetable)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-14T16:44:30.877

我修改[了 dotancohen 的答案](https://stackoverflow.com/a/20383011/4795539)，因此只需要 dict 的结果列表作为输入。如果您已经有一个返回结果的库方法，这很有用：

```
def format_table(self, results:list):
    if not len(results):
        return []
    widths = []
    max_widths = {}
    tavnit = '|'
    separator = '+'
    report = []
    # add col headers length to widths
    for key in results[0].keys():
        max_widths[key] = len(key)
    # add max content lengths to widths
    for row in results:
        for key in row.keys():
            if len(str(row[key])) > max_widths[key]:
                max_widths[key] = len(str(row[key]))
    for key in results[0].keys():
        widths.append(max_widths[key])
    for w in widths:
        tavnit += " %-" + "%s.%ss |" % (w, w)
        separator += '-' * w + '--+'
    # build report
    report.append(separator)
    report.append(tavnit % tuple(results[0].keys()))
    report.append(separator)
    for row in results:
        report.append(tavnit % tuple(row.values()))
    report.append(separator)
    return report 
```

# android - Andengine AnimatedSprite 在 1 秒后丢失

> ID：10865486
> 
> 赞同：-2
> 
> 时间：2012-06-02T19:58:39.783
> 
> 标签：android, sprite, delayed-job, andengine

我在下面的和引擎代码中创建了一个动画精灵。我想在 1 秒后丢失它。我该怎么做？

```
 public void fireBullet4() {

    float startXC=player.getX()+10;

    float startYC=player.getY()-70;

    bullet4=new AnimatedSprite(startXC, startYC, HelicopterActivity.this.bulletTextureRegion4);

    scene.attachChild(bullet4); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:49:25.587

安全删除 a 的逻辑`Sprite`非常简单，并由[AndEngine 示例](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/SpriteRemoveExample.java)之一进行了说明。只要确保您在以下位置进行删除`UpdateThread`：

```
this.runOnUpdateThread(new Runnable() {
    @Override public void run() {
        /* Now it is save to remove the entity! */
        pScene.detachChild(SpriteRemoveExample.this.mFaceToRemove);
    }
}); 
```

据我所知，没有内置选项可以`Sprite`在一定延迟后自动删除。但是，您应该能够[`TimerHandler`](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/engine/handler/timer/TimerHandler.java)使用回调创建一个并等待一秒钟的滴答声发生以删除`Sprite`.

# iphone - 我应该如何将文件包含在用户可以传输到他们的膝上/桌面上的应用程序中

> ID：10865488
> 
> 赞同：0
> 
> 时间：2012-06-02T19:59:14.863
> 
> 标签：iphone, ios, file, sync, transfer

我想在 iPhone 应用程序中包含一个 mp3，用户可以在同步期间将其从应用程序复制到他们的台式机或笔记本电脑。我不确定如何实现这一目标。有人可以指出我正确的方向，或者更好地提供这将涉及的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:25:46.870

可能是文件共享是您正在寻找的。

请参阅[文件共享](http://support.apple.com/kb/HT4094)

要为您的应用程序启用文件共享，请执行以下操作：

将 UIFileSharingEnabled 键添加到应用程序的 Info.plist 文件中，并将键的值设置为 YES。

将您想要共享的任何文件放在应用程序的 Documents 目录中。

当设备插入用户的计算机时，iTunes 9.1 会在所选设备的应用程序选项卡中显示文件共享部分。

用户可以将文件添加到该目录或将文件移动到桌面。

# image - 缩放 R 图像

> ID：10865489
> 
> 赞同：3
> 
> 时间：2012-06-02T19:59:18.953
> 
> 标签：image, r, scale

我想在 R 中缩放图像以进行进一步分析，而不是立即绘图。

如果我可以使用 EBImage，EBImage 的 resize() 将是理想的，但我需要避免它，所以我必须找到一个替代方案。

我没有任何运气搜索。我可以手动实现双线性过滤，但在我这样做之前，我想确认没有任何替代方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T22:40:38.697

[最近邻](http://tech-algorithm.com/articles/nearest-neighbor-image-scaling/)调整大小是最常见和最容易实现的。

假设您的图像是一层/通道，因此是一个矩阵：

```
resizePixels = 函数（im，w，h）{
  像素 = as.vector(im)
  # 初始宽度/高度
  w1 = nrow(im)
  h1 = ncol(im)
  # 目标宽度/高度
  w2 = w
  h2 = h
  # 创建空向量
  temp = 矢量（'数字'，w2*h2）
  # 计算比率
  x_ratio = w1/w2
  y_ratio = h1/h2
  # 调整大小
  for (i in 0:(h2-1)) {
    for (j in 0:(w2-1)) {
      px = 楼层（j*x_ratio）
      py = floor(i*y_ratio)
      温度[(i*w2)+j] = 像素[(py*w1)+px]
    }
  }

  m = 矩阵（温度，h2，w2）
  返回（米）
}

```

我会让你弄清楚如何将它应用于 RGB 图像

下面是在此图像的红色通道上运行上述代码的测试：

```
lena = readImage('~/Desktop/lena.jpg')[,,1]
display(lena) 
```

![在此处输入图像描述](../Images/bf4d899b041a3577e38cbc168a52401e.png)

```
r = resizePixels(lena, 150, 150)
display(r) 
```

![在此处输入图像描述](../Images/24b5050918d7113196f4b44ea1c05744.png)

```
r2 = resizePixels(lena, 50, 50)
display(r2) 
```

![在此处输入图像描述](../Images/3bff47a0b223aa5876bee9f7af90edda.png)

笔记：

1.  注意，目标宽度和高度必须保持原始图像的纵横比，否则将不起作用
2.  如果您想避免`EBImage`, 读/写图像，请尝试使用包`jpeg`方法`readJPEG`和`writeJPEG`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-16T12:03:27.393

最近邻缩放（无插值）可以很容易地实现。
虽然@by0 的答案很明确，但我想提供一个替代实现。它适用于图像的矩阵表示，我发现它比索引向量更简单。

```
resizeImage = function(im, w.out, h.out) {
  # function to resize an image 
  # im = input image, w.out = target width, h.out = target height
  # Bonus: this works with non-square image scaling.

  # initial width/height
  w.in = nrow(im)
  h.in = ncol(im)

  # Create empty matrix
  im.out = matrix(rep(0,w.out*h.out), nrow =w.out, ncol=h.out )

  # Compute ratios -- final number of indices is n.out, spaced over range of 1:n.in
  w_ratio = w.in/w.out
  h_ratio = h.in/h.out

  # Do resizing -- select appropriate indices
  im.out <- im[ floor(w_ratio* 1:w.out), floor(h_ratio* 1:h.out)]

  return(im.out)
} 
```

这适用于任意图像缩放，而不仅仅是正方形。另一方面，它只会保留图像的纵横比，如果`w.out/w.in = h.out/h.in`。

# linux - 缺少 foo.c。在 Ubuntu 11.04 中使用 gcc 4.5

> ID：10865500
> 
> 赞同：0
> 
> 时间：2012-06-02T20:00:35.747
> 
> 标签：linux, ubuntu

我试图在虚拟机中运行的 Ubuntu 11.04 中实现 OpenMP。这些是我遵循的步骤：

第一步=> **sudo apt-get install build-essential**

第二步=> **sudo apt-get install gcc 4.5**

现在，当我运行用于实现 OpenMP 的命令时（如果这不是正确的命令，请告诉我）输出是：

**ubuntu@ubuntu:~$ gcc -fopenmp foo.c

gcc: foo.c: 没有这样的文件或目录

gcc：没有输入文件**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:01:56.770

您似乎对“实施” OpenMP 所涉及的内容有一个模糊的概念。您需要编写一个使用 OpenMP（`foo.c`占位符）的程序才能使用该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:03:39.137

To make use of OpenMP in your C code, there are two steps:

1.  Use one of OpenMP's [`#pragma`](http://openmp.org/mp-documents/OpenMP3.1-CCard.pdf) statements in your code where appropriate.
2.  Compile with `-fopenmp`.

Also, I can't help but notice that your installation line is a bit sketchy - to install gcc, you only need to do `sudo apt-get install gcc` (this will pull a recent version for you), and to install OpenMP, you would need to do `sudo apt-get install libgomp1`. If you want a specific version, you would have to make sure that `gcc-4.5` is in Ubuntu 11.04's repositories, which I'm not 100% sure it is.

# sql - DESCRIPTION' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中

> ID：10865503
> 
> 赞同：1
> 
> 时间：2012-06-02T20:00:41.807
> 
> 标签：sql, sql-server, ssis

> **可能重复：**
> [选择列表中的列无效，因为它不包含在聚合函数或 GROUP BY 子句中](https://stackoverflow.com/questions/1114048/column-is-invalid-in-the-select-list-because-it-is-not-contained-in-either-an-ag)

我是 SQL 查询的新手；我收到此错误：

> “DESCRIPTION”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中”

我找不到正确的聚合函数。我需要`unique(DESCRIPTION)`在我的选择语句中

我的描述列是唯一的 varchar 值，知道吗？

```
INSERT INTO myTable2 (ID,INDEX,STATUS,DESCRIPTION,TS)
SELECT ID,min(INDEX),STATUS,DESCRIPTION,min(TS) from myTable2 t1top
WHERE (EXISTS(
        SELECT * FROM myTable1 WHERE ID=t1top.ID AND STATUS='Completed' )) 
GROUP BY ID, STATUS
ORDER BY ID  DESC, STATUS DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:06:03.397

您可以使用**SELECT DISTINCT 描述**。或者是这样的：

```
INSERT INTO myTable2 (ID,INDEX,STATUS,DESCRIPTION,TS)
SELECT ID, min(INDEX), STATUS, DESCRIPTION, min(TS) 
    FROM myTable2 t1top
WHERE (EXISTS(
        SELECT * FROM myTable1 WHERE ID=t1top.ID AND STATUS='Completed' )) 
GROUP BY ID, STATUS, DESCRIPTION
ORDER BY ID  DESC, STATUS DESC 
```

要记住的关键点是，您在聚合查询中选择的每个字段都需要位于*SUM*、*MAX*等聚合函数内，**或者**包含在 group-by 子句中。这与 MySql 不同，MySql 不对查询强制执行该规则，而只是返回不可预测的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:24:10.497

将DESCRIPTION添加到您的GROUP BY列表中，它应该可以工作

```
INSERT INTO myTable2 (ID,INDEX,STATUS,DESCRIPTION,TS)
SELECT ID,min(INDEX),STATUS,DESCRIPTION,min(TS) from myTable2 t1top
WHERE (EXISTS(
    SELECT * FROM myTable1 WHERE ID=t1top.ID AND STATUS='Completed' )) 
GROUP BY ID, STATUS, DESCRIPTION
ORDER BY ID  DESC, STATUS DESC 
```

但这并不意味着您的查询是正确的 - 取决于您想要实现的目标

# javascript - 动态创建新字段以将多行条目提交到表模型中

> ID：10865504
> 
> 赞同：0
> 
> 时间：2012-06-02T20:00:53.893
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含用于创建配方的多个字段的部分 _form。我目前能够为*烹饪步骤添加**一个*条目，并且*烹饪步骤*在提交时会附加到 recipe_id。

 **问题：

显然，每个食谱都**不止**一个烹饪步骤。如何在其下方动态添加另一个/或更多字段以创建步骤 2、步骤 3、步骤 4 等。所有这些步骤都进入模型**Cooking_step.rb**。我已经看过关于嵌套表单的 railscast 视频，不仅有点令人困惑，而且我认为它不适用于我正在做的事情，因为我使用的是**相同的模型**而不是多个模型。

代码：

以下是我的控制器中到目前为止的内容：

```
def create 
    @cookingstep = CookingStep.new(params[:cooking_step])
    @cookingstep.recipe_id = @recipe.id
    @cookingstep.save 
end 
```

以下是我目前在部分 _form.html.erb 中的内容：

```
<%= fields_for @cookingstep do |din| %>
    <%= din.label :instruction %>
    <%= din.text_field :instruction %>
<% end %>

<%= submit_tag "Submit"  %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:28:59.317

您应该从具有许多烹饪步骤的 Recipe 模型开始，然后您就拥有多个模型，如[railscasts](http://railscasts.com/episodes/196-nested-model-form-part-1)视频中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:21:04.250

更简单的设计是将步骤 1、2、3 等以列表格式显示，底部有一个空格用于新条目。在列表中，依次提供编辑、删除和更改位置的选项。当你有这个工作时，你可能想给它一些 ajax。然后，对配方最好的 ajax 处理是使它们可拖动以更改顺序，in_place_editing 用于就地编辑，以及每个旁边的删除按钮用于删除该特定步骤。我希望这有帮助。**

# iphone - NSOperation中的dealloc

> ID：10865505
> 
> 赞同：0
> 
> 时间：2012-06-02T20:00:56.393
> 
> 标签：iphone, ios, nsoperation, nsoperationqueue, dealloc

我有一个带有 NSOperation 的 NSOperationQueue，在我的 NSOperation .hi 中有这个属性：

```
@interface MyOperationClass : NSOperation 
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (strong, nonatomic) NSManagedObject *myObject;
@property (nonatomic, retain) NSMutableArray *myArray;

@end 
```

这在 .m 文件中的 NSOperation 的 dealloc 中：

```
- (void)dealloc {
[__fetchedResultsController release];
[__managedObjectContext release];
[myObject release];
[myArray release];
[super dealloc];
} 
```

在另一个类中，我以这种方式将操作添加到队列中：

```
MyOperationClass *myOperation = [[MyOperationClass alloc] init];
[myOperationQueue addOperation:myOperation];
[myOperation release]; 
```

但是在 [myArray release] 行上给我一个 bad_exc_access；我错了什么？

编辑：我注意到在代码中我这样做：

wikiEpisodeArray = [NSMutableArray arrayWithArray:otherArray];

也许是这个？我没有用 [NSMutableArray alloc] 初始化它？

**编辑2：** 我有另一个类似的问题，我也有这个变量：

```
@property (nonatimc, retain) NSString *previousTime; 
```

我以这种方式初始化它：

```
previousTime = [[NSString alloc] init]; 
```

在代码中我从不释放它，只在dealloc中，现在我在这一行收到一个错误的exc访问：

```
[previousTime release]; 
```

在dealloc ...为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:07:14.207

您可能没有为要释放的对象分配内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:18:02.007

如果你没有弧，那么你必须使用 (nonatomic, retain) （或者如果不保留则分配）。

此外，您未明确分配的任何对象都应自动释放返回。所以不要释放它们。

如果你想创建一个你拥有的可变数组，你应该这样做

```
[NSMutableArray alloc] initWithArray:aArray]; 
```

对于 NSString，使用 (nonatomic, copy)，同样，当您使用 @"something" 分配 nsstring 时，您正在分配一个自动释放的，覆盖先前的 [NSString alloc] init]。

所以，如果你想拥有你应该做的字符串：

```
[NSString alloc] initWithString:aString]; 
```

# android - ScrollView 中的 ViewPager 不会垂直滚动

> ID：10865508
> 
> 赞同：2
> 
> 时间：2012-06-02T20:01:29.050
> 
> 标签：android, android-layout

我有一个自定义内部的*布局*，并且 ViewPager 不会垂直滚动。自定义 ScrollView 用于修复使用 ScrollView 滑动的可怕选项卡。`ViewPager``ScrollView`

是的，有足够的内容可以滚动，我尝试过使用和不使用底部按钮。

我正在使用具有 3 个选项卡的 ActionBar，并且当前代码允许向左/向右滑动就好了。

我的目标是为几个操作项（例如保存和取消）设置底部栏，并且 ActionBar 和底部按钮之间的部分是 ViewPager，它将垂直滚动。

我尝试了太多组合，现在将这封情书寄给你。有任何想法吗？任何帮助表示赞赏，如果需要，请随时询问更多详细信息。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/footer"
        style="@android:style/Holo.ButtonBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/saveButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Save" />

        <Button
            android:id="@+id/cancelButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>

    <com.blah.hootiehoo.ViewPagerCompatScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/footer"
        android:fillViewport="true" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:scrollbarAlwaysDrawVerticalTrack="true"
            android:scrollbars="vertical" >

            <android.support.v4.view.ViewPager
                android:id="@+id/pager"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:scrollbarAlwaysDrawVerticalTrack="true"
                android:scrollbars="vertical" >
            </android.support.v4.view.ViewPager>
        </LinearLayout>
    </com.blah.hootiehoo.ViewPagerCompatScrollView>

</RelativeLayout> 
```

**MainActivity.java**

```
ViewPager mViewPager;
TabsAdapter mTabsAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    mViewPager = (ViewPager)findViewById(R.id.pager);

    // setup action bar for tabs
    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);   

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    Tab tab = actionBar.newTab();
    // tab setup
    mTabsAdapter.addTab(/*** stuff ***/);

    // add 2 more tabs, etc
} 
```

**ViewPagerCompatScrollView.java** [从这里得到，在底部](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)

```
public class ViewPagerCompatScrollView extends ScrollView {
    private float xDistance, yDistance, lastX, lastY;

    public ViewPagerCompatScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                xDistance = yDistance = 0f;
                lastX = ev.getX();
                lastY = ev.getY();
                break;
            case MotionEvent.ACTION_MOVE:
                final float curX = ev.getX();
                final float curY = ev.getY();
                xDistance += Math.abs(curX - lastX);
                yDistance += Math.abs(curY - lastY);
                lastX = curX;
                lastY = curY;
                if(xDistance > yDistance)
                    return false;
        }

        return super.onInterceptTouchEvent(ev);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T07:29:53.390

根据之前的评论：

是否可以交换`ScrollView`和`ViewPager`周围？根据经验，我知道一个`ScrollView`里面的`ViewPager`作品没有任何问题。所以基本上不是`ViewPager`用 a包装，而是`ScrollView`将每个“页面” a`ScrollView`作为根。

很高兴听到这对你有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T21:10:19.623

MH。答案应该有效。

您的代码中的问题是`ViewPager`will 与 the 相同`height`，`ScrollView`因此它不会滚动。中的每个子视图`ViewPager`也将`height`与`ViewPager`.

尝试手动设置`height`，它会滚动得很好......`ViewPager``eks android:layout_height="900dp"`

但是你真的应该使用MH。的答案:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T20:49:01.910

我有类似的问题。这是我解决它的方法。

```
imageGrid.setOnTouchListener(new View.OnTouchListener() {

        int dragthreshold = 30;
        int downX;
        int downY;

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                downX = (int) event.getRawX();
                downY = (int) event.getRawY();
                break;
            case MotionEvent.ACTION_MOVE:
                int distanceX = Math.abs((int) event.getRawX() - downX);
                int distanceY = Math.abs((int) event.getRawY() - downY);

                if (distanceY > distanceX && distanceY > dragthreshold) {
                    imageGrid.getParent().requestDisallowInterceptTouchEvent(false);
                    parentScrollView.getParent().requestDisallowInterceptTouchEvent(true);
                } else if (distanceX > distanceY && distanceX > dragthreshold) {
                    imageGrid.getParent().requestDisallowInterceptTouchEvent(true);
                    parentScrollView.getParent().requestDisallowInterceptTouchEvent(false);
                }
                break;
            case MotionEvent.ACTION_UP:
                parentScrollView.getParent().requestDisallowInterceptTouchEvent(false);
                imageGrid.getParent().requestDisallowInterceptTouchEvent(false);
                break;
            }
            return false;
        }
    }); 
```

值得一试。

# c++ - 如何管理标头的#include？

> ID：10865509
> 
> 赞同：3
> 
> 时间：2012-06-02T20:01:39.097
> 
> 标签：c++, header, include

这可能被回答了很多次，但我似乎找不到合适的帖子来讨论这个问题。

假设我们有类 A、B 和 C，它们是彼此的容器。这意味着他们必须包含彼此的头文件。但是当我在 Visual Studio 2010 中执行此操作时，我收到错误消息“包含文件过多：深度 = 1024”。

在 Java 中，我可以拥有相互导入的类，但 C++ 似乎无法做到这一点（为什么编译器不处理这个问题，真的）。

无论如何，我该如何让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:04:00.193

为了避免循环引用，您可以将每个包含文件“包装”到预处理器#ifdef 中。

档案啊：

```
#ifndef SOMEREALLYUNIQUEIDFileAincluded
#define SOMEREALLYUNIQUEIDFileAincluded

#include "B.h"

class B;

/// Here you can use pointers to B
class A
{
  // something about B*
};

#endif // SOMEREALLYUNIQUEIDFileAincluded 
```

文件 B:

```
#ifndef SOMEREALLYUNIQUEIDFileBincluded
#define SOMEREALLYUNIQUEIDFileBincluded

#include "A.h"

class A;

/// Here you can use pointer to A
class B
{
  // something about A*
};

#endif // SOMEREALLYUNIQUEIDFileBincluded 
```

#ifdef 被称为“包含守卫”

对于现代编译器而不是编写“ifdefs”，您只能编写

```
#pragma once 
```

在每个文件的开头。

编辑：

然后你必须使用 C.cpp 中的所有头文件：

```
#include "A.h"

#include "B.h"

void test() {} 
```

使用“gcc -c C.cpp”（仅编译）对其进行测试。

编辑2：

某种样本。具有可渲染对象的场景。

文件场景.h：

```
#ifndef SceneHIncluded
#define SceneHIncluded

class SceneObject;

class Scene {
public:
   void Add(SceneObject* Obj);
   void Render();
private:
   std::vector<SceneObject*> Objects;
};

#endif // SceneHIncluded 
```

文件场景.cpp：

```
#include "Scene.h"
#include "SceneObject.h"

void Scene::Add() { this->Objects.pusj_back(Obj); Obj->SceneRef = this; }

void Scene::Render() {
   for(size_t j = 0 ; j < Objects.size() ; j++) { Objects[j]->Render(); }
} 
```

文件 SceneObject.h：

```
#ifndef SceneObjHIncluded
#define SceneObjHIncluded

class Scene;

class SceneObject {
public:
   /// This is not the sample of "good" OOP, I do not suppose that
   /// SceneObject needs this reference to the scene
   Scene* SceneRef;
public:
   // No implementation here
   virtual void Render() = 0;
 };

#endif // SceneObjHIncluded 
```

SceneObject 的实现可能是一些带有变换的网格，即

```
 class Mesh: public SceneObject {...} 
```

在 Mesh.h 和 Mesh.cpp 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T23:04:45.710

尽可能在头文件中对类和结构使用前向声明可以最好地避免循环引用。在非循环依赖中，使用前向声明还有一个额外的好处，那就是避免`#include`添加额外的文件，从而缩短编译时间。

在 3 个类 A、B 和 C 的示例中，其中 A 包含 B，B 包含 C，C 包含 A；您可以执行以下操作：

**a.hpp：**

```
#ifndef A_HPP
#define A_HPP

#include <memory>
#include <vector>

// Forward-declare B
struct B;

struct A
{
    std::vector<std::shared_ptr<B>> bs;
};

#endif 
```

**b.hpp：**

```
#ifndef B_HPP
#define B_HPP

#include <memory>
#include <vector>

// Forward-declare C
struct C;

struct B
{
    std::vector<std::shared_ptr<C>> cs;
};

#endif 
```

**c.hpp：**

```
#ifndef C_HPP
#define C_HPP

#include <memory>
#include <vector>

// Forward-declare A
struct A;

struct C
{
    std::vector<std::shared_ptr<A>> as;
};

#endif 
```

**主.cpp：**

```
#include "a.hpp"
#include "b.hpp"
#include "c.hpp"

int main()
{
    std::shared_ptr<A> a(new A);
    std::shared_ptr<B> b(new B);
    std::shared_ptr<C> c(new C);

    a->bs.push_back(b);
    b->cs.push_back(c);
    c->as.push_back(a);
} 
```

示例在 g++-4.7 中编译（*这个概念同样适用于 c++98，你不能使用* `shared_ptr<>`）：

```
g++ -std=c++11 -pedantic main.cpp 
```

在这种情况下，如果您需要使用某个依赖类中的功能，那么在其对应的**.cpp**文件中使用该功能是很重要的。所以除了类本身的名称之外的任何东西。当**a.cpp** `#include` s 标头*a.hpp* & *b.hpp*、**b.cpp** `#include` s *b.hpp* & *c.hpp*和**c.cpp** `#include` s *c.hpp* & *a.hpp*时，循环包含不会有问题，因为每个**.cpp**文件被编译到它自己的翻译单元中，并且链接器将能够毫无问题地整理出多个类定义，只要它们相同（它们将是相同的，因为它们来自相同的文件）。

# php - 会话关闭功能，似乎没有任何工作

> ID：10865513
> 
> 赞同：1
> 
> 时间：2012-06-02T20:02:11.893
> 
> 标签：php, session

我花了几天时间，搜索了很多，在这里和通过 Bing 我已经充分探索了官方 PHP 页面： http: [//php.net/manual/en/ref.session.php](http://php.net/manual/en/ref.session.php)

-- 所有评论，所有功能。

但没有任何帮助。绝对。

我只需要一件事：

在 SESSION 关闭后调用一些函数（例如，用户关闭了他的浏览器）。

重点是：再次 --- 在用户关闭代理后调用某些函数 --- 即会话 ID 不再有效

所以，我尝试过使用旧式方法，即覆盖默认会话处理程序：

通过，

```
session_set_save_handler("sess_open", "sess_close", "sess_read", "sess_write", "sess_destroy", "sess_gc"); 
```

看起来像这样：

```
function sess_close() {
    print "Session closed.\n";
    return true;
}

function sess_read($sess_id) {
    print "Session read.\n";
    print "Sess_ID: $sess_id\n";
    return '';
}

function sess_write($sess_id, $data) {
    print "Session value written.\n";
    print "Sess_ID: $sess_id\n";
    print "Data: $data\n\n";
    return true;
}

function sess_destroy($sess_id) {
    print "Session destroy called.\n";
    return true;
}

function sess_gc($sess_maxlifetime) {
    print "Session garbage collection called.\n";
    print "Sess_maxlifetime: $sess_maxlifetime\n";
    return true;
} 
```

但这在用户关闭浏览器时也不起作用。为什么这不起作用？

# jenkins - 在 jenkins 上持续部署基于 OSGi 的应用程序

> ID：10865515
> 
> 赞同：9
> 
> 时间：2012-06-02T20:02:22.513
> 
> 标签：jenkins, osgi, continuous-deployment, bnd, pax-runner

在花了几个小时试图了解如何在**基于 OSGi 的应用程序**的情况下进行**持续部署**之后，我终于在 stackoverflow 上提出了我的第一个问题，希望能找到一些迹象表明我可能做错了什么或错过了什么——不知何故感觉走错路了。。。

 **这就是我想要实现的目标：

1.  **构建一些包**并将它们安装到 maven 存储库（这里没问题，使用 bnd）

2.  现在有了构成我的应用程序的所有包（通过所有测试等），我想**部署和运行**应用程序，即使用这些包启动一些 OSGi 框架。

3.  *开始*不是问题——“mvn pax:provision -Dframework=equinox”可以解决问题。我的应用程序启动了 jetty，因此很容易通过浏览器进行验证以查看一切是否正常（除了所有测试）

4.  但是，现在，尝试**“连续”**，下次我想应用这个过程时，我真的应该确保首先*关闭*我的应用程序的运行实例（至少释放正在使用的端口）。所以，要**重新运行**一切，我必须先关闭旧的安装。

这就是我的问题开始的地方：有什么可以帮助我解决这个问题吗？我知道有*maven-deploy-plugin*，但这似乎只有在将一些 WAR/EAR 文件部署到一些标准应用程序容器中时才有用（似乎不需要重新启动它）。

我真的只需要运行一些脚本来*启动*OSGi 环境——然后，下一次，在我再次启动它之前优雅地*关闭它。*用tomcat、jetty、jboss之类的，有一些*shutdown.sh*脚本或者*mvn jetty:stop*指令，但是真的要自己写那种脚本吗？这就是我认为我开始走错路的地方，我猜肯定有人在我之前遇到过这些问题并解决了它们；）

我知道我可以以某种方式尝试使用*JMX*或使用*telnet 控制台*来访问正在运行的实例以发出“stop 0”命令，但这*感觉不对*。

从詹金斯开始的进程应该编译/构建/部署项目，但我猜不是启动长时间运行的线程，所以我必须以某种方式启动一些“外部”进程，我想在下次再次尝试时首先杀死它。

有任何想法吗？也许我错过了什么？提前感谢您对此的任何意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:14:38.870

在我看来，telnet 方式似乎是最干净的。

但是，如果您想发挥创意，您​​可以创建一个简单的关闭包，然后在准备重新部署之前安装它。确保您已启用自动部署，以便在安装时激活捆绑包。当这个包激活时，它的工作是彻底关闭当前正在运行的 Equinox 容器。

我仍然建议使用 telnet 方法，因为您需要确保在尝试重新部署之前关闭容器。

如果您不喜欢这些方法中的任何一种，请查看[Apache Karaf](http://karaf.apache.org/)。您可以发送正在运行的容器命令。您甚至可以停止、卸载然后重新安装所有捆绑包，而无需停止 Karaf。

Karaf 可以在 Apache Felix 或 Eclipse Equinox 之上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:32:05.450

也许我遗漏了一些东西，但是当您想要重新部署/更新您的应用程序时，为什么要关闭整个 OSGi 框架？OSGi 的全部意义在于，您无需重新启动整个系统即可更新捆绑包（还记得“您必须重新启动 Windows 才能使更改生效”的东西吗？）。更重要的是，重新启动整个框架将隐藏任何关于在你的包的停止方法中释放资源的错误，所以我绝对建议只更新包进行测试（并在几个启动/停止周期后检查日志和资源消耗！ )

如果我这样做，我将只启动一次完全独立于 maven 的 OSGi 框架，然后使用许多可能的方法之一来部署和更新其中的包，而无需重新启动框架。

例如： * 您可以配置系统，以便始终将更新版本的包放在磁盘上的给定位置，然后使用 OSGi 控制台/telnet/您选择调用的 OSGi 框架附带的任何管理工具“更新 ”。

*   或者您可以使用一些可以连接到正在运行的框架实例并更新捆绑包的工具。例如对于 Eclipse，有一个[来自 ProSyst 的插件可以做到](http://dz.prosyst.com/pdoc/mBS_SDK/um/docs/index.html)这一点。

*   或者你可以使用一些真正的远程管理软件，它可以帮助你同时在多个目标上测试远程部署，也可以直接监控部署状态。一种这样的系统是例如[mPower Remote Manager](http://www.prosyst.com/index.php/de/html/content/98/Other-FOU-|-Products-|-Remote-Management-Server/)

关于释放端口 - 如果你有这个问题，原因很可能是捆绑本身，重新启动 OSGi 框架不会解决它，因为在现实生活场景中，fw 不应该在更新时重新启动一个捆绑包。检查您是否在捆绑软件的 BundleActivator 的 stop() 方法中正确停止所有线程并释放所有资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-03T11:49:31.110

在 bndtools 中，这一切都是自动化的……一旦你保存了一个源文件，它就会构建 jar 并告诉框架在哪些包是新包时要更新或安装。试试吧，大约 3 秒的惊人的短编辑-编译-构建-运行-调试周期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T19:39:01.913

在一些新的见解和检查了很多方法之后，我想记录下我发现最适合我自己关于**持续部署基于 OSGi 的应用程序**的初始问题的方法。

这里的主要问题是*不能*仅仅通过将它们放到某个目录中来更新正在运行的 OSGi 应用程序中的包（例如，可以使用 org.apache.felix.fileinstall 来完成），而是能够持续部署当前的来自 SCM 的软件状态 - 通过 jenkins 自动进行，就像第一次部署时的样子。

对我来说，解决方案非常简单，真的：有一个[守护进程版本](http://team.ops4j.org/wiki/display/paxrunner/Running+as+a+Daemon)的 pax-runner，我可以按如下方式使用它：

在 jenkins 项目配置中，Post-steps，执行 shell 我放了类似的东西：

```
export BUILD_ID=dontKillMe
myproject/etc/scripts/postDeploy.sh & 
```

postDeploy 脚本看起来像

```
#!/bin/bash

cd <myproject>/workspace/skysail.server.ext.osgimonitor/target
cp project.zip /somepath/pax-runner-1.8.5/

cd /somepath/pax-runner-1.8.5/

unzip project.zip

cd project
./rund.sh 
```

最终的 rund.sh 脚本类似于

```
java $JAVA_OPTS -cp .:bin/pax-runner-1.8.5.jar org.ops4j.pax.runner.daemon.DaemonLauncher \
--startd --clean scan-composite:file:rund.composite \
--log=DEBUG 
```

rund.composite 只是一个引用一些这样的配置文件的文件

```
scan-file:bundledefs/core.setup
scan-file:bundledefs/logging.setup
scan-file:bundledefs/restlet.setup 
```

最后，作为这些文件的示例：

```
mvn:commons-lang/commons-lang/2.6
mvn:org.codehaus.jackson/jackson-core-lgpl/1.9.5
mvn:org.codehaus.jackson/jackson-mapper-lgpl/1.9.5
mvn:javax.xml.stream/com.springsource.javax.xml.stream/1.0.1
mvn:org.xmlpull/com.springsource.org.xmlpull/1.1.4.c
mvn:com.thoughtworks.xstream/com.springsource.com.thoughtworks.xstream/1.3.1
mvn:org.codehaus.jettison/com.springsource.org.codehaus.jettison/1.0.1
... 
```

使用此设置，每当 jenkins 构建项目时，都会触发部署后脚本，并以干净的初始状态重新启动应用程序。**

# c++ - 改变链表

> ID：10865517
> 
> 赞同：3
> 
> 时间：2012-06-02T20:02:25.890
> 
> 标签：c++

你会得到一个单链表`a->b->c->d->1->2->3->4->e->f->g->h->5->6->7->8`。您必须将此列表更改为 `a->1->b->2->c->3->d->4->e->5->f->6->g->7->h->8`.

我的方法使用一个额外的列表，我们从列表中删除数字并单独存储它们。然后将列表合并在一起。有人可以建议更好的技术来做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T20:12:26.053

我会有两个迭代器。让一个（迭代器 A）遍历列表，当你碰到一个数字时停止，让另一个（迭代器 B）停留在列表的开头。当您点击一个数字时，在迭代器 B 的节点之后插入迭代器 A 的节点，然后将迭代器 B 向上移动。这样您就不必单独列出清单。

编辑：在迭代器 A 中插入 B 后删除该项目（感谢 Tudor 的捕获）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:35:56.310

取 2 个指针并增加第 2 个指针，直到你得到一个数字，一旦你得到一个数字，就从这里删除节点并在第一个指针之后插入。

由于它是一个面试问题，面试官可能正在查看您如何处理所有极端情况，例如列表为空，只有两个节点（1-char 和 1-int），字符节点和整数节点的数量在一个块等

# sencha-touch-2 - Sencha Touch 2 - 无法从控制器获取参考视图

> ID：10865519
> 
> 赞同：2
> 
> 时间：2012-06-02T20:02:39.753
> 
> 标签：sencha-touch-2

我正在尝试通过 ref 获取视图。在控制器中定义的方法内。我收到错误消息

> 对象 [对象对象] 没有方法“getUserForm”。

这是我的视图和控制器，如果有人可以帮助我，我会很高兴..

提前致谢。

**用户表格**

```
Ext.define(appName + '.view.user.UserForm', {
    extend  : 'Ext.form.FieldSet',
    alias   : 'widget.userform',
    title   : 'User Form',
    instructions: 'Fill your personel information',
    iconCls : 'icon-form',
    fullscreen: true,
    config : {
        items : [{
            xtype       : 'toolbar',
            docked      : 'top',
            title       : 'Registeration Form',
            iconCls     : 'icon-form'
        }, {
            xtype       : 'textfield',
            label       : 'Name ',
            name        : 'name'            
        }, {
            xtype       : 'textfield',
            label       : 'Surname ',
            name        : 'surname'         
        }, {
            xtype       : 'passwordfield',
            label       : 'Password ',
            name        : 'password'
        }, {
            xtype       : 'toolbar',
            dock        : 'bottom',
            defaults    : {
                xtype   : 'button',
                flex    : 1
            },
            layout      : { pack : 'center' },
            items       : [{
                text    : 'Reset',
                iconCls : 'icon-refresh-32',
                ui      : 'action',
                action  : 'reset'
            }, {
                text    : 'Save',
                ui      : 'action',
                iconCls : 'icon-save-32',
                action  : 'save'
            }]
        }]
    }
}); 
```

**用户控制器**

```
Ext.define(appName + '.controller.UserController', {
    extend      : 'Ext.app.Controller',
    stores      : [ 'Users' ],
    models      : [ 'User' ],
    views       : [ 'user.UserList', 'user.UserForm' ],
    refs        : [{
        ref     : 'userList',
        selector: 'userlist'
    }, {
        ref     : 'userForm',
        selector: 'userform'
    }],
    init        : function() {
        this.control({
            'userform button[action=save]' : {
                release : this.saveUserForm
            },
            'userform button[action=reset]' : {
                release : this.resetUserForm
            }
        });
    },
    saveUserForm : function(btn) {
//      Ext.Msg.alert('SUCCESS', 'Form is successfully saved.');
        **var form = this.getUserForm();** // ERROR!
        alert(form);
//      Ext.Msg.alert('Form Values', JSON.stringify(form.getValues(), null, 2));
    },
    resetUserForm : function(btn) {
        **var form = this.getUserForm();** // ERROR!
//      var form = btn.up('form');
        form.reset();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:05:19.040

refs - 一组命名的 ComponentQuery 选择器，可以轻松获取对页面上关键组件的引用。

根据[http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)（它是关于您可以在“refs”中使用的选择器类型）可以使用以下方法检索组件：

1）他们的**xtype**：'panel'，'textfield'等。

2）他们的身份：'# **idOfYourComponent** '

在你的情况下：

1)**用户表单**

```
Ext.define(appName + '.view.user.UserForm', {
    扩展：'Ext.form.FieldSet'，
    xtype：'userForm' 
    别名：'widget.userform'，
```

**用户控制器**

```
Ext.define(appName + '.controller.UserController', {
    扩展：'Ext.app.Controller'，
    商店：['用户']，
    模型：['用户']，
    意见：['user.UserList'，'user.UserForm']，
    参考：{
        mySuperMegaForm: 'userForm'
    }

```

2)**用户表单**

```
Ext.define(appName + '.view.user.UserForm', {
    扩展：'Ext.form.FieldSet'，
    id：“userFormId” 
    别名：“widget.userform”，
```

**用户控制器**

```
Ext.define(appName + '.controller.UserController', {
    扩展：'Ext.app.Controller'，
    商店：['用户']，
    模型：['用户']，
    意见：['user.UserList'，'user.UserForm']，
    参考：{
        mySuperMegaForm: '#userFormId'
    }

```

# ios - 在 Objective-C 文件中组织导入

> ID：10865530
> 
> 赞同：0
> 
> 时间：2012-06-02T20:03:57.823
> 
> 标签：ios, xcode, code-organization, alphabetical, import

我在大型 iOS 项目中使用了一些相当大的 Objective-C 文件。我想以三种方式组织这些导入：

1.  我希望顶部的一些库和底部的单个文件
2.  我想按字母顺序排列所有进口
3.  我想要一种删除未使用的导入的方法

这三个似乎都是 IDE 想要的合理的东西，但 Xcode 似乎不支持它们中的任何一个。任何人都可以推荐任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:10:22.883

您可以通过编写在命令行上运行的脚本（以任何语言）来相当容易地解决前两个问题。第三个有点棘手；您可能可以使用 clang 将某些东西装配在一起，但您可能必须手动完成。

我同意如果 Xcode 内置了这种功能会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T15:16:59.080

我使用[Uncrustify](http://uncrustify.sourceforge.net/ "去壳")自动格式化项目中的源代码。除其他外，它按字母顺序对导入语句进行排序。特别是我有：

*   [使用UniversalIndentGUI](http://universalindent.sourceforge.net/ "通用缩进GUI")创建了一个 Uncrustify 配置文件
*   创建了一个名为“FormatSourcecode”的 Xcode 目标，我的主要目标依赖于它并使用上述配置文件运行 Uncrustify

这样的设置将解决您的第 1 点和第 2 点，因为库导入以“<”开头并且自然地彼此相邻排序。

# python - 修改和推广间隔重复软件的最佳方法

> ID：10865535
> 
> 赞同：7
> 
> 时间：2012-06-02T10:52:21.733
> 
> 标签：python

我想知道如何修改和概括间隔重复软件。具体来说，我想知道如何更改要显示的卡片数量、卡片范围以及指定特定卡片组的能力。

一段时间以来，我一直在涉足间隔重复软件，发现以下问题：

很难保证特定日期将显示的卡片数量保持在一定范围内

与其被告知今天要学习哪张牌，我更愿意随时拿起牌组，根据我有多少时间来翻几张牌

我知道后一点与间隔重复的逻辑有些冲突，但也许可以找到折衷方案。

程序必须解决的问题是“假设我现在被要求出示一张卡片，我应该根据每张卡片的学习历史、重要性等选择哪张卡片。”

我认为这种方法可以很容易地推广到增量阅读和待办事项列表管理。

由于我是一名编程新手，因此将不胜感激有关如何实现这种算法的任何帮助。

请在下面找到我解决该问题的一个非常基本的尝试；这里最明显的问题是代码没有考虑卡片文件随时间的增长。

```
#! /usr/bin/env python

import random

box = []

class flashcard(object):
  def __init__(self, quest, answ, score):
    self.question = quest
    self.answer   = answ
    self.score    = score
# ------------------------------------------------------------------------------
f = open('list.txt','r')
for line in f:
  parts = line.split('\t')
  box.append(flashcard(parts[0],parts[1],int(parts[2])))
f.close()

# ------------------------------------------------------------------------------
keepgoing=True
while keepgoing:
  card = random.choice(box)
  if random.uniform(0,1) * card.score < 1:
    a = raw_input(str(card.score) + ' ' + card.question + ' ')
    if a == card.answer:
      card.score *= 3
    elif a == 'q':
      keepgoing = False
    else:
      card.score = 1
      print 'WRONG -->' + card.answer
  else:
    pass

# ------------------------------------------------------------------------------
f = open('list.txt','w')
for card in box:
  f.write("%s\t%s\t%s\n" % (card.question, card.answer, card.score))
f.close() 
```

最佳，J

* * *

好的谢谢你！虽然您的观点完全有效，但直到现在我才意识到，我提出问题的动机实际上更广泛，因此有些观点对我来说仍然是开放的。

第一，我会对某事感兴趣。对于尽可能简单的命令行 2nd 我想避免基于日期的逻辑，即使这与 SRS 3nd 略有不同我想要一个简单的脚本，我可以破解许多不同的应用程序，例如 todo - 列表管理、阅读列表管理、播放列表管理（如 [http://imms.luminal.org/](http://imms.luminal.org/)）等

所以，我想要一个通用脚本，可以随机呈现项目，但按重要性、容易性、紧迫性、趣味性等加权

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-30T00:29:07.007

关于这个主题有丰富的文献。我推荐的一篇论文是 Lindsey、Shroyer、Pashler 和 Mozer 撰写的“通过个性化审查提高学生的长期知识保留”：[https ://web.archive.org/web/20140331061418/http://laplab.ucsd .edu/articles/LindseyShroyerPashlerMozer2013.pdf](https://web.archive.org/web/20140331061418/http://laplab.ucsd.edu/articles/LindseyShroyerPashlerMozer2013.pdf)（如果链接失效，请务必获取带有附录和补充在线材料的版本，其中提供了他们描述的机器学习算法的详细信息）。

在这篇特别的论文中，描述了一种机器学习算法，给定一组学生对问题列表的正确和错误回答，估计*每个*（学生，问题）对的正确回答的概率。所以这正好回答了你的一个子问题。在任何给定时间，这样的算法都可以告诉您最有可能被遗忘的问题（正确回答的可能性最低）。更重要的是，它为您提供了一个排序的问题列表，以降低遗忘的风险。更重要的是，它会给你一个介于 0 和 1 之间的数字，表示忘记的风险，这样你就可以设置一个阈值，比如“不要问我忘记概率低于 5% 的问题”。

**不是**绝对初学者的项目，但请尝试一下！

另一个小点：*请*随意尝试非 Anki 学习策略。除了受欢迎程度之外，没有任何证据表明 Anki 的工作流程是做任何事情的最佳方式，事实上我非常怀疑它是否适用于所有学习者。

**编辑**我为贝叶斯间隔重复设计了一个算法，并在 Python、JavaScript 等中实现了它，我称之为 Ebisu：[https ://fasiha.github.io/ebisu/](https://fasiha.github.io/ebisu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:58:30.730

您可以按照自己的方式使用[Anki](http://ankisrs.net/)。您不必每天都完成所有到期的卡片，同时您可以选择在到期前查看卡片。甚至应该可以编写一个 Anki 插件来隐藏到期卡片的数量，如果没有到期卡片，它会在卡片到期之前自动审查卡片。

然而，作为一个实际问题，我建议不要改变这个过程。拥有一定数量的到期卡片意味着当您完成每天的卡片堆时您会感到成功。这种成功的感觉可以帮助你养成定期做抽认卡的习惯。

没有按时完成卡片也会增加您的总学习时间。如果您稍后查看卡片，则会增加您会忘记的卡片数量。如果你早点复习它们，你会浪费时间。

如果您仍然想重新发明轮子，您应该从阅读[SM2 算法](http://www.supermemo.com/english/ol/sm2.htm)的工作原理开始。

# javascript - 如何通过 REST API 提交 Jenkins 作业？

> ID：10865538
> 
> 赞同：2
> 
> 时间：2012-06-02T20:04:47.090
> 
> 标签：javascript, groovy, prototypejs, jenkins

以下“执行系统 ​​Groovy 脚本”构建任务更新构建的描述以添加一个按钮，该按钮将提交另一个参数化的 Jenkins 作业：

```
import hudson.model.Cause
import hudson.model.Job
import jenkins.model.Jenkins

final JOB_NAME = 'my-job'

final jenkins = Jenkins.instance
final job = jenkins.getItemByFullName(JOB_NAME, Job.class)
final currentBuild = Thread.currentThread().executable
final buildNumber = currentBuild.getNumber()

job.builds
    .findAll { build -> build.number == buildNumber }
    .each { build ->
        build.setDescription("""
            <button
                type='button'
                onclick='javascript:
                    var another_job = function() {
                        parameters = {json: {parameter: [{name: "P4_CHANGELIST", value: "0"}]}};
                        new Ajax.Request("http://builds/job/another-job/build", {
                            method: "post",
                            parameters: Object.toJSON(parameters)
                        });
                    };
                    another_job()'>Continue</button>""")
    } 
```

但是在单击 Continue 按钮时，请求会返回 400 Bad Request。看起来这是因为构建参数没有正确传递（如果我从另一个作业中删除构建参数并且不发送参数，那么一切正常）。

我不确定问题是由于错误的引用还是我通过构建参数发送的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T20:19:11.527

您需要使用 JSON。请参阅[提交作业](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)。

以下对我有用：

```
<button 
  type='button'
  onclick='javascript:
    var another_job = function() {
      new Ajax.Request("http://localhost:8081/job/JReport2/build", {
        method: "post",
        parameters: {json: Object.toJSON({parameter: [{name: "foo", value: "fobar"}]})}
    });
  };
  another_job()'>
  Start Job
</button> 
```

What's a bit strange that is works when the button that appears next to the build in the build list is pushed, but does not work with the button that appears on the build description itself.

# asp.net - 将脚本注入我正在重定向的页面

> ID：10865544
> 
> 赞同：1
> 
> 时间：2012-06-02T20:06:01.760
> 
> 标签：asp.net, response.redirect, registerclientscriptblock

您好我正在尝试将脚本注入到我要重定向到的页面。

我该怎么做？

一些事情：

我知道我可以在会话或 cookie 或查询字符串中放置一些标志，然后在其他页面中检查它。但我想避免这样做，因为我要重定向到许多页面并且不想复制代码 - 除非我不得不......

相关代码为：

```
 ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), Guid.NewGuid().ToString(), "doSomeThings();", true);
 Response.Redirect(newURL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:25:34.653

或者您可以做另一件事，将 JS 或所需功能添加到您的页面（您要重定向到的页面）并从当前页面传递某种标志。

然后在下一页中，读取标志，如果它满足您的条件，则调用该函数。

正如@Oded 所说，您无法控制下一页会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:09:55.853

您无法控制重定向目标上会发生什么 - 目标只知道它收到的请求，而不知道它来自谁或导致它的原因。

*您必须在要放置脚本的每个*重定向页面上使用某种机制来检测是否需要它（无论是通过 URL 上的参数还是其他方式）。

不要像您想要避免的那样重复代码，而是创建一个*基类*并从中继承您的页面。这种注入行为可以放在基类中，供所有继承页面共享。

# java - java Regex - 忽略引号？

> ID：10865550
> 
> 赞同：0
> 
> 时间：2012-06-02T20:07:05.407
> 
> 标签：java, regex

我想捕获一个单引号文本，但是不应将转义的单引号 (\') 视为分隔符，例如：

> 这不是最好的一天

将返回

> *   不是最好的

谢谢。

我试过这个：

```
 public static List<String> cropQuoted (String s) {

    Pattern p = Pattern.compile("\\'[^']*\\'");
    Matcher m = p.matcher(s);
    ArrayList found = new ArrayList();
    while(m.find()){
        found.add(m.group().replaceAll("\'", ""));
        System.out.println(m.group().replaceAll("\'", ""));
    }
    return found;
} 
```

但它未能捕捉到“\'best'days'to come”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:11:32.583

正则表达式可能如下所示：

```
"'([^'\\\\]|\\\\.)*'" 
```

就像在一个单引号`'`后跟 0 到多个既不是单引号也不是反斜杠的字符中一样，或者是一个反斜杠后跟任何字符，后跟一个单引号。

看到这个[正则表达式](http://regexpal.com/?flags=g&regex=%27%28%5B%5E%27%5C%5C%5D%7C%5C%5C.%29%2a%27&input=This%20%27wasn%5C%27t%20the%20best%27%20day%0AThis%20%27was%20the%20best%27%20day%0A%27This%20%5C%27whole%5C%27%20line%20%5C%27is%5C%27%20a%20match%27%0A%27This%20ending%20quote%20is%20not%20escaped%5C%5C%27.%20It%20just%20comes%20after%20an%20escaped%20backslash%27)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:47:18.023

`(?<!\\\\)'`意思是“前面`'`没有`\`”

使用它我们可以创建这样的东西`(?<!\\\\)'.*?(?<!\\\\)'`

让我们测试一下

```
 String s="This 'wasn\\'t the best' day. Another 't\\'es\\'t Test' t\\'est";
    System.out.println(s.replaceAll("(?<!\\\\)'.*?(?<!\\\\)'", "X"));
    //out -> This X day. Test X t\'est 
```

是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:45:50.493

```
(?<!\\\\)'([^'\\\\]|\\\\.)*' 
```

使用否定的lookbehind确保起始报价不会被转义

# forms - 如何在 Coldfusion 中为某些类型的表单（用户交互等）设置全局表单处理程序？

> ID：10865551
> 
> 赞同：1
> 
> 时间：2012-06-02T20:07:07.880
> 
> 标签：forms, coldfusion, process, application.cfc

我正在寻找在我继承的 Coldfusion8 站点中构建表单处理的最佳方法。

有许多与某些交互相关的形式，例如“用户交互”（注册/登录/注销/更新）。[我已经按照这个示例](http://www.bennadel.com/blog/1557-Object-Oriented-Form-Helpers-And-Reusing-Form-Validation-On-The-Client.htm)设置了一个全局表单/验证处理程序，它工作正常。

我已经稍微改变了设置，因为我是在使用 Coldfusion 的头几个月，所以我想知道以下处理方式是否有意义：

在我的**application.cfc 中**，我为所有“用户交互表单”声明会话默认值，如下所示：

```
<cffunction name="onSessionStart" returnType="boolean" output="false" hint="session initalizer">
    ...
    Session.FormData.User = {
        username="", 
        password="", 
        iln="", 
        companyname="",
        address="",
        ...
        formsubmitted=""
        }
</cffunction> 
```

这个想法是**为所有表单字段设置默认值**，所以我总是提交“完整表单”，无论用户是简单地登录还是注册。

然后在我的**user-form-handler.cfc 中**声明验证标准：

```
 <cfcomponent extends="controllers.form_switch" output="false" hint="Utility for handling all user-related forms">     
    <cfscript>
        <!--- declare validation methods --->
        VARIABLES.Instance.Validation = {
            username = "string|len_6", 
            password="string|len_6",
            iln="spec_iln",
            ...
            companyname="string",
            address="string",
            formsubmitted="pass"
            }
        <!--- grab default values from Session --->
        VARIABLES.Instance.FormData = SESSION.FormData.User;
     </cfscript> 

     <!--- SET FORM DATA --->
     <cffunction name="SetFormData" access="public" returntype="void" output="false">
        <cfargument name="FormData" type="struct" required="true" hint="Form data" />
            <!--- overwrite default values with values passed in form submisson. --->
            <cfset VARIABLES.Instance.FormData = ARGUMENTS.FormData />
        <cfreturn />
    </cffunction>

    <!--- PROCESS --->
    <cffunction name="Process" access="remote" returntype="struct" output="false" hint="Process">

        <cfset var LOCAL = {} />
        <cfset LOCAL.Response = { Success = true, Errors = [], Data = "" } />
        <!--- call setFormData to overwrite defaults with submitted values --->
        <cfif IsStruct( ARGUMENTS[ 1 ] )>
            <cfset THIS.SetFormData( ARGUMENTS[ 1 ] ) />
        <cfelse>                
            <cfset THIS.SetFormData( ARGUMENTS ) />             
        </cfif> 
        ... validation/commit
        <cfreturn LOCAL.Response />
    </cffunction> 
```

每当我提交与用户相关的表单时，我都会提交到 user-form-handler.cfc 中的**PROCESS函数，该函数会覆盖****SETFORMDATA**中设置的会话默认值，然后在提交到数据库并返回响应对象之前验证表单字段.

**我的问题**：虽然这可行，但我不确定是否要在 Application.cfc 中的**onSessionstart**
中为所有表单输入声明默认值。当我想通过这个中央处理程序运行所有与用户相关的表单提交时，有没有更好的方法来做到这一点？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:30:59.950

如果您没有在任何地方更改任何表单提交默认值（例如设置指示登录页面的表单变量以及谷歌搜索字词或任何其他将这些变量更改为空白以外的内容），您可以接受空白字段和​​/或在处理 .cfc 中声明默认值。我通常有一个“填补”缺失字段并设置默认值的功能。然后是一个单独的函数来验证数据。**

# database - 经典 ASP：插入记录

> ID：10865555
> 
> 赞同：0
> 
> 时间：2012-06-02T20:08:36.687
> 
> 标签：database, asp-classic, insert, record

首先我为我糟糕的英语道歉。我正在尝试在表中插入新记录（tblCommentarios）

这是我正在使用的代码

```
conn.Provider = "Microsoft.Jet.OLEDB.4.0"

conn.Open "C:\Users\VilaNova\Documents\aspirador\guestbook.mdb"

sql = "INSERT INTO tblComentarios (nome,comentario) "

sql = sql & "VALUES ('john', 'good job');"

on error resume next

conn.Execute sql, recaffected

if error <> 0 then

   response.write "No permissions!"

else

   response.write "added record!"

end if 
```

当我执行代码时，我没有收到任何错误，并且收到消息“添加记录”但是，当我打开数据库并查看表的内容时，没有值“约翰”和“干得好”的记录

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:23:58.040

尝试替换`error`为[`Err.Number`](http://msdn.microsoft.com/en-us/library/5t7981hw%28VS.84%29.aspx)：

```
If Err.Number <> 0 Then 
```

我的猜测是你没有[`Option Explicit`](http://msdn.microsoft.com/en-us/library/bw9t3484%28VS.84%29.aspx)打开，所以`error`被隐式创建为一个新变量，其值设置为`Empty`. `Empty`为了比较，将其转换为0，因此似乎没有错误。

（顺便说一句，如果我的猜测是正确的，你真的应该`Option Explicit`在你编写的每个脚本的第一行中包含，并养成使用 . 明确声明变量的习惯`Dim`。）

# node.js - node.js + now.js 在整个网站上设置服务器

> ID：10865557
> 
> 赞同：0
> 
> 时间：2012-06-02T20:08:58.877
> 
> 标签：node.js, nowjs-sockets

我成功安装了节点，现在创建了一个有 3 个房间的聊天服务器。

```
var fs = require('fs');
var server = require('http').createServer(function(req, response){
  fs.readFile('/var/www/www.domain.de/htdocs/multiroomchat.html', function(err, $
    response.writeHead(200, {'Content-Type':'text/html'});
    response.write(data);
    response.end();
  });
});
server.listen(8000); 
```

我现在可以通过 www.mydomain.com:8000 访问此页面。现在我这样做只是为了测试目的，但后来我想把那个聊天（类似于 facebook 聊天）放在我的网站上。因此，我必须在整个页面上都有聊天服务器，而不仅仅是在一个文件上，而且在域的末尾没有端口。这怎么可能？聊天服务器应该可以在我的整个网站上访问：www.mydomain.com/start/tutorial www.mydomain.com/imprint ...聊天将显示在每个页面上。

谢谢！

# asp.net-mvc - MVC3 继承问题

> ID：10865558
> 
> 赞同：2
> 
> 时间：2012-06-02T20:09:03.907
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, entity-framework, entity-framework-4

我有一个包含以下表格的数据库

*   业务（包含所有常见字段）
*   Business_Hotel（包含特定于酒店的字段）
*   Business_Restaraunt（包含特定于 Restaraunts 的字段）
*   Business_Airport（包含特定于机场的字段）

我使用继承在 EF 中对这些进行了建模。

*   企业（基地）
*   酒店（从企业继承）
*   餐厅（从企业继承）
*   机场（从企业继承）

我使用基本实体（企业）在 VS2010 中使用控制器创建向导创建了控制器

我想为所有三种类型重复使用相同的创建操作。

```
 [HttpPost]
 public ActionResult CreateHotel(Business business)
    {

        if (ModelState.IsValid)
        {

            db.Businesses.AddObject(business);        
            db.SaveChanges();
            return RedirectToAction("Index");
        } 
```

如果我修改如下所示的函数，它确实正确创建了酒店类型的业务

```
 public ActionResult CreateHotel(Hotels business) 
```

所以问题是我如何动态地做到这一点。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:39:34.060

作为建议，最好不要尝试**重用**单个`Action`（即使 DRY 原则看起来很吸引人）

即使您可以找到一种方法来做到这一点，将来也很难维持。

你想要做的是：

将商务酒店、商务餐厅以及任何商务酒店视为商务机场。你看到有什么问题吗？酒店应该有自己的商业规则，对于机场和餐厅也是如此

如果您将来尝试为它们中的每一个添加一些特定的逻辑，您的操作方法将会增加复杂性（顺便说一句，操作方法应该只调用模型以保持它们干净）。

这在*蓝皮书 (DDD)中有更好的描述*

所以我的建议是不要重用这种逻辑（域逻辑），我个人尝试只重用基础架构逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:23:16.583

实现它的几种方法。但是，自动生成的模型无济于事。

1.  利用经典的构建器设计模式。定义一个视图模型，它可以捕获所有三个模型（Hotels、Restaraunts、Airports）的数据。在视图模型中保留一个区分符，如“BusinessType”等，以及一个通过查看类型来创建适当业务对象的函数。区分器需要在 UI 中静态或动态设置。

    ```
    public class BusinessViewModel 
    {

      // all attributes go here.
      public int BusinessType { get; set; }

      public Businesses CreateBusinessObject()
      {
        if(BusinessType == "1")
            //Create and return a new Hotel
      }
    } 
    ```

在控制器中，它将像这样使用：

```
 [HttpPost]
     public ActionResult CreateHotel(BusinessViewModel businessVM)
    {

        if (ModelState.IsValid)
       {
            Businessess business = businessVM.CreateBusinessObject()

        db.Businesses.AddObject(business);        
        db.SaveChanges();
        return RedirectToAction("Index");
       } 
```

2.在控制器中的action方法中直接将表单集合作为输入，而不是模型/视图模型，然后对其进行解析并创建适当的对象。

# visual-c++ - 致命错误 C1083：无法打开包含文件：'omp.h'：没有这样的文件或目录

> ID：10865561
> 
> 赞同：2
> 
> 时间：2012-06-02T20:09:45.537
> 
> 标签：visual-c++, openmp

我在 MS Visual Express C++ 2010 上运行 .cpp 代码。

它运行良好。之后，我添加了 OpenMP 语句并包含了 omp.h 头文件。当我运行它时，我收到以下错误：

`fatal error C1083: Cannot open include file: 'omp.h': No such file or directory`

有谁知道如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:47:39.077

如果你还在使用 VS express 和 OpenMP，你可以使用这个：[http ://www.ssidelnikov.ru/en/2011/05/openmp-visual-studio-2010-express/](http://www.ssidelnikov.ru/en/2011/05/openmp-visual-studio-2010-express/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T21:27:53.477

OpenMP 在 Visual C++ 2010 Express 版本中不可用。 [msdn链接](http://msdn.microsoft.com/en-us/library/tt15eb9t.aspx)

# objective-c - NSOutlineView 模仿 Photoshop 图层面板

> ID：10865567
> 
> 赞同：2
> 
> 时间：2012-06-02T20:10:47.147
> 
> 标签：objective-c, nstableview, layer, nsoutlineview

我有一个关于在 NSTableViews/NSOutlineViews 中实现一些特定行为的问题。

**我想要达到的目标：**

我正在尝试创建一个模仿 Photoshop 图层面板行为的 NSOutlineView（“图层”列是分层的除外）。我的大纲视图是一个 3 列表，其中包含“层”列、“可见性”列和“锁定”列。我已经将“可见性”和“锁定”列实现为 NSImageCells，并将“层”列实现为自定义文本和图像单元格。

具体来说，这是我正在努力实现的行为：

*   就像 Photoshop 一样，用户应该能够单击可见性（眼球）图标并向上或向下拖动到不同的行，以根据单击的第一行的可见性“打开”或“关闭”其他行的可见性。 . 确切地说 Photoshop 是如何隐藏和显示图层的。请注意，当表中有很多行时，应支持自动滚动。

*   就像 Photoshop 一样，当“图层”列中的一行或多行被选中时，可见性/锁定列的后面不应有高亮条（也就是说，行高亮不应穿过它们的列）。

*   在“可见性”或“锁定”列中单击和/或拖动不应更改表的选择...仅更改它们的状态，如上所述。

一个星期以来，我一直在用头撞墙，试图让它发挥作用。我已经阅读了控件和单元格编程指南、表格视图编程指南、NSCell、NSActionCell、NSTableView、NSControl、NSOutlineView 的类参考，以及 NSOutlineViewDelegate 和 NSOutlineViewDataSource 的协议参考……并且整个星期都在尝试不同的方法。 .而且我只是没有弄清楚这一点。

有人可以引导我朝着正确的方向前进吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:31:08.320

通过一些额外的网络搜索和实验，我可以回答我自己的大部分问题：

**仅突出显示 NSOUTLINEVIEW 中的第一列**

通过继承 NSOutlineView 并实现，我能够使选择突出显示仅出现在第一列的选定行上

```
- (void)highlightSelectionInClipRect:(NSRect)clipRect
{
    NSRange visibleRowIndexes = [self rowsInRect:clipRect];
    NSIndexSet *selectedRowIndexes = [self selectedRowIndexes];

    NSInteger currentRow = visibleRowIndexes.location;
    NSInteger lastRow = currentRow + visibleRowIndexes.length;

    NSColor *highlightColor;

    //Determine color of selection bar based on key/main/first responder status.
    if (self == [[self window] firstResponder] && [[self window] isMainWindow] && [[self window] isKeyWindow]) {
        highlightColor = [NSColor colorWithDeviceRed:0.0 green:0.0 blue:0.3 alpha:1.0];
    } else
        highlightColor = [NSColor lightGrayColor];
    }
    [highlightColor setFill];

    //Get the Rect of only the name column. This is the only column that will be highlighted.
    //We'll intersect this rect with the row rect for the area to fill in.
    NSInteger nameColumn = [self columnWithIdentifier:@"name"];
    NSRect nameColumnRect = [self rectOfColumn:nameColumn];

    while (currentRow < lastRow) {
        if ([selectedRowIndexes containsIndex:currentRow]) {
            NSRect drawRect = NSIntersectionRect([self rectOfRow:currentRow], nameColumnRect);
            NSRectFill(drawRect);
        }
        currentRow++;
    }
} 
```

需要注意的是，我必须重写我的自定义 NSCell 子类的 drawInteriorWithFrame:inView: 方法以防止它绘制标准高亮，如下所示：

```
-(void) drawInteriorWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    //do drawing here...don't call super.
} 
```

所以有一个解决部分问题的方法。如果这不是“正确”的方式，请告诉我:)。

**在 VIS/LOCK 列中单击/拖动不应更改选择** 我现在已经确定我应该在

```
-(NSIndexSet *) outlineView:(NSOutlineView *)outlineView selectionIndexesForProposedSelection:(NSIndexSet *)proposedSelectionIndexes 
```

方法。如果我处于源自可见性或锁定列的拖动中间，我只需返回当前 selectedRows 以保持选择相同。我还没有实现这个，但是一旦我解决了我的最终问题（见下文），它应该很容易。

**在可见性/锁定列中向上或向下拖动以更改其状态**

我和这个非常接近。在我的自定义 NSCell 中，我重写了以下三种方法：

```
-(BOOL) startTrackingAt:(NSPoint)startPoint inView:(NSView *)controlView
-(BOOL) continueTracking:(NSPoint)lastPoint at:(NSPoint)currentPoint inView:(NSView *)controlView
-(void) stopTracking:(NSPoint) lastPoint at:(NSPoint)stopPoint inView:(NSView *)controlView mouseIsUp:(BOOL)flag 
```

我要解决我的最后一个问题，这里是：我需要知道我何时在拖动操作中以及拖动操作何时完成。我有两种方法可以做到这一点：

如果我*不*覆盖

```
+(BOOL) prefersTrackingUntilMouseUp 
```

在我的 NSCell 子类中（所以它返回默认的 NO 值），然后我每次离开一个单元格并*在拖动操作期间*转到下一个单元格时都会收到一个 stopTracking:at:inView:mouseIsUp: 消息......这意味着我可以'不要使用该方法来确定拖动操作何时完成。

相反，如果我*确实*覆盖

```
+(BOOL) prefersTrackingUntilMouseUp 
```

并返回 YES，我得到一个 stopTracking:... 仅在鼠标启动时调用，这很好...但问题是表格似乎没有更新 mouseDown 上的单元格的 UI 或当我拖动时细胞内。例如，在 startTracking:... 方法中，如果我将单元格的 objectValue 设置为 nil（以便不再显示其图像），直到鼠标按钮返回或光标离开细胞。（当 prefersTrackingUntilMouseUp 返回 NO 时，它会立即更新）。

因此，我既需要能够立即（在 mouseDown 上）更新单元格的 UI，也需要有办法知道拖动操作何时完成。这是拼图的最后一块。任何人都可以帮忙吗？

# ios - 没有开发者账号的 iOS 开发（没有 AppStore）

> ID：10865572
> 
> 赞同：0
> 
> 时间：2012-06-02T20:10:59.343
> 
> 标签：ios

有没有办法在没有付费开发者帐户的情况下（合法地）在 iDevice 上试用我们的 iOS 应用程序，或者我们只能用模拟器试用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:14:41.257

如果您越狱了您的设备，您可以轻松地直接在您的设备上测试您的应用程序（如果您愿意，甚至可以在您的设备上编写它）。只需访问[http://jailbrea.kr/](http://jailbrea.kr/)即可了解如何越狱您的设备。然后，您必须设置 xcode 以在不进行代码设计的情况下进行编译。完成此操作后，使用名为“ldid”的程序对二进制文件进行签名：`ldid -S myAppsExecutable`. 然后，只需在 /Applications 中将 .app 文件夹通过 SSH 连接到您的设备，重新启动跳板（`killall SpringBoard`在设备上），然后单击图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T20:20:52.087

如果您将“合法”的意思是“不越狱”（这是错误的，因为越狱是合法的），那么不，这是不可能的。

如果您的意思是正确意义上的“合法”（即不违反法律），那么是的，有可能：越狱您的设备，然后简单地安装您的应用程序。你可能仍然需要伪造它以供 iOS 内核运行它。

# javascript - 当用户剪切和粘贴内容时，从 Wordpress Post 中剥离格式

> ID：10865573
> 
> 赞同：0
> 
> 时间：2012-06-02T20:11:00.800
> 
> 标签：javascript, jquery, wordpress

当用户从外部来源（如 MS Word 文档或其他网页）剪切内容，然后将该内容发布到 Wordpress 所见即所得编辑器中时，它还会粘贴大量臃肿的格式化代码，这些代码会扭曲已发布帖子的格式。

我正在寻找解决此问题的插件。

如果没有可用的插件，我将不得不构建一个。我能想到的最佳选择是在提交帖子之前使用 javascript/jQuery 去除格式。我可能会使用 keyUp() 和 keyDown() 来捕捉粘贴的新内容。

第 1 步：在 keyDown() 上保存光标位置

第 2 步：在 keyUp() 上保存光标位置

第 3 步：使用正则表达式从 keyUp 和 keyDown 之间的所有内容中去除格式。

这将允许我专门对新粘贴的内容进行操作，同时保持用户之前通过所见即所得创建的格式。

尽管似乎使用 Javascript/jQuery 记录字符串中的光标位置比我预期的要复杂。

最好，我喜欢对准备就绪的插件的建议。但如果没有，是否有关于我应该使用哪些函数来捕捉这些光标位置的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T23:31:51.140

我建议将粘贴重定向到文本区域，这将可靠地去除所有格式。不过有一些警告。我在其他答案中对此进行了介绍，例如：

*   [JavaScript 在粘贴事件中获取剪贴板数据（跨浏览器）](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)
*   [粘贴到 contentedittable 会导致随机标签插入](https://stackoverflow.com/questions/6022551/pasting-into-contentedittable-results-in-random-tag-insertion)

保存和恢复插入符号位置/选择的工作比应有的要多，但可能会更糟。例如，请参阅[https://stackoverflow.com/a/5952332/96100 。](https://stackoverflow.com/a/5952332/96100)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:26:37.710

有几个资源可供您使用，它们已经包含此功能。我的选择是使用[CKEditor for Wordpress](http://wordpress.ckeditor.com/)。当您想从 Microsoft Word 之类的程序中粘贴时，可以按一个特定的按钮

您可以在此处试用[CKEditor 的演示，](http://wordpress.ckeditor.com/?page_id=16)您可以实时查看该功能。带有 的剪贴板`W`是您用于从字处理器复制的内容。

为确保它是您想要的，您可以单击“来源”按钮查看粘贴的内容并确保没有包含额外的标签。

希望这可以帮助。

# audio - 使用 ffmpeg 替换 2 个视频

> ID：10865581
> 
> 赞同：0
> 
> 时间：2012-06-02T20:11:38.690
> 
> 标签：audio, video, ffmpeg

这是问题所在：

我有 2 个视频和 3 个间隔；我需要通过混合这两个视频来创建一个视频，以间隔 1 切换视频 A 到 B，间隔 2 切换视频 A 到 A，间隔 3 再次切换 A 到 B。

需要沿着音频文件进行切换。

现在我想出的唯一解决方案是剪切 2 个视频，然后以正确的顺序将它们链接起来，但我在问是否有更优雅的方法来做到这一点！

提前谢谢大家！

# java - 具有顶部和底部边距的自定义按钮

> ID：10865585
> 
> 赞同：0
> 
> 时间：2012-06-02T20:12:02.623
> 
> 标签：java, android, xml, android-layout, android-button

我需要创建一个如下所示的布局。

![安卓](../Images/6ec9aa727bcaa9e494d6425070a0f600.png)

我想出了如何创建这个布局：

![安卓](../Images/246c1ced6c15265b3f142013e6486380.png)

如何添加顶部和底部边距？和按钮背景颜色？我使用以下方法使按钮透明：

```
android:background="@android:color/transparent" 
```

现在我怎样才能使按钮背景颜色为浅蓝色。

如果我使用自定义按钮布局，我该怎么做？我检查了很多 Stackoverflow 问题，但都涉及渐变、点击颜色变化等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:17:40.297

您不想使用*透明*背景颜色...而是将其设置为您想要的蓝色。然后使用*setAlpha*使其部分透明：

```
MyButton.getBackground().setAlpha(50); 
```

要设置边框和透明背景，我认为您必须制作一个 XML 可绘制对象并将其定义为按钮的背景：

```
android:background="@drawable/mybuttonbackground" 
```

那么drawable资源应该是这样的（/res/drawable/mybuttonbackground.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle">
            <stroke android:width="1dp" android:color="#FF000000" />
            <solid android:color="#FFFFFF" />
        </shape>
    </item>

   <item android:top="1dp" android:bottom="1dp"> 
        <shape ="rectangle">
            <stroke android:width="1dp" android:color="#FFDDDDDD" />
            <solid android:color="#FFFFFF" />
        </shape>
   </item>
</layer-list> 
```

# ruby-on-rails - 将 Rails 应用程序与 Google Apps 集成

> ID：10865587
> 
> 赞同：1
> 
> 时间：2012-06-02T20:12:11.483
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, omniauth

我正在启动一个我想与 Google Apps 集成的新应用程序。

我想让用户通过他们的 Google 帐户登录，并访问他们域的 Google API（列出所有域用户，并允许他们登录并共享相同的数据）。

我从来没有这样做过，所以我有点困惑我需要执行哪些步骤才能做到这一点，我已经在网上阅读了一些文档，并且还查看了omniauth。

要求：

*   只能通过谷歌应用程序帐户登录
*   每个用户必须使用自己的用户/密码（谷歌帐户@domain.com）登录
*   同一域的所有用户都必须看到相同的共享数据（当然，该应用会注意哪些是公开的，哪些不是）。

在我看来，我需要做的只是： * 集成 OpenID 客户端（例如omniauth） * 当用户确认 Google 会将用户重定向到我的应用程序的回调 * 我现在有一个可以用来查询的令牌谷歌 API

我对吗？我也看过[这篇文章](http://intridea.com/posts/easy-rails-admin-login-with-google-apps-and-omniauth)，但似乎不是我要搜索的内容，我无法提前知道用户域是什么。

也许我将 gmail 帐户与 google 应用程序帐户混淆了，使用后者将使用户能够使用自己的帐户登录，或者他们都将只为整个域共享一个帐户？

是`omniauth`完成这种登录的正确宝石吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T22:31:09.907

Omniauth 就是答案。我写了一个[gem，它提供了一个 rake 任务来引导](https://github.com/deafgreatdane/google_oauth_calendar)所有的 gem、路由、控制器等，以让应用程序对 google 进行身份验证。gem 让您开始使用日历 API，但其他谷歌应用程序以类似的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T23:23:35.563

OmniAuth is going to be your best bet to auth via 3rd party and meet your requirements. Have you given it a try?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T22:16:07.847

你说得很对。用户将通过其 Google 帐户获得 SSO，并且在获得批准后将从您在 Google API 中设置的回调重定向回来。

您需要使用`omniauth-openid`gem 并在需要时设置您的白名单域。

# android - 打开本地文件 Android

> ID：10865589
> 
> 赞同：0
> 
> 时间：2012-06-02T20:12:23.107
> 
> 标签：android, android-emulator, filepath

我的虚拟文件中有一个文件。我试着这样做：

```
 File file = new File("invoice2.xml");
    if (file.exists()) {
    textview1.setText("file exists");
    }
    else{
    textview1.setText("file dosen't exist");
    } 
```

这显示“文件不存在”。我正在使用 Eclipse，根据 DDMS 文件资源管理器，我的“invoice2.xml”文件位于

数据/数据/发票.digital.namespace/files/invoice2.xml

我究竟做错了什么？如何获得“文件存在”结果？谢谢你

编辑：这个工作 File file = new File(MyActivity.this.getFilesDir(), "invoice2.xml");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:21:28.610

看起来您正在尝试从根文件夹中读取。试试这个方法：

```
File file = new File(mContext.getFilesDir() + "invoice2.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:17:38.323

如果可能的话最好把它放在原始或资产或文件名中应该像这样 System.getProperty("filesDir")+File.separator+YOUR_INTERNAL_FILE_NAME

# javascript - onClick 的动态选择器不起作用

> ID：10865591
> 
> 赞同：1
> 
> 时间：2012-06-02T20:12:37.483
> 
> 标签：javascript, jquery

我想做简单的 onClick 事件

```
$('._1').click(function(){
        window.open('abc.html?parameter=1');
    }); 
```

在上面的例子中，我有 _1 作为一个类，现在有多个这样的元素，这里的 1 也作为 window.open 请求的参数

但是我想绑定多个点击事件

```
var arrayOfValues = [1,2,4,6,7,8];
for(var z=0;z<arrayOfValues.length;z++)
    $('._'+arrayOfValues[z]+'').click(function(){
        window.open('abc.html?parameter='+arrayOfValues[z]);
    }); 
```

但这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:16:21.000

```
var arrayOfValues = [1,2,4,6,7,8];

$.each(arrayOfValues, function(key, val) {

   for(var z=0;z<arrayOfValues.length;z++) {
     $( '._'+arrayOfValues[z] ).click(function(){
                             ^ -- dont need quote here
       window.open('abc.html?parameter='+arrayOfValues[z]);

     });
   }

   // jQuery loop
   $( '._' + val ).click(function(){

        window.open('abc.html?parameter='+arrayOfValues[z]);

    });

}); 
```

但是，如果您在页面加载后将元素添加到文档中，那么您应该尝试使用委托事件处理程序`.on()`。

```
var arrayOfValues = [1,2,4,6,7,8];

$.each(arrayOfValues, function(key, val) {

    $('body').on('click', '._'+ arrayOfValues[z], function(){

        window.open('abc.html?parameter='+arrayOfValues[z]);

    });

}); 
```

# javascript - jQuery的父级和表格的怪异

> ID：10865593
> 
> 赞同：2
> 
> 时间：2012-06-02T20:12:42.653
> 
> 标签：javascript, jquery

我在我的代码中添加了一个占位符 div，以便以后可以用一些 html 替换它。这是针对我正在编写的一个小模板引擎（类似于 handlebars.js），所以我无法控制父元素是什么。

像这样的东西：

```
<div class="container">
    <ul>
        <div id="4FEA2092330"></div>
    </ul>
</div> 
```

如果我得到占位符 div 的父级，我会得到很棒的 ul。

但是，如果占位符位于这样的表中：

```
<div class="container">
    <table>
        <div id="4FEA2092330"></div>
    </table>
</div> 
```

占位符 div 的父级是容器 div 而不是表。

进一步的测试表明，如果我在表中使用 tr（而不是 div），父例程将返回表。

任何想法为什么会发生这种情况以及我如何能够防止这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:17:04.593

您的标记无效。一个表不能直接包含一个`<div>`这样的。避免不良行为的方法是建立一个适当的表。

我*认为*将您包装`<div>`在`<td>`. 表格的其他必要部分将被隐式添加。

# php - 如何使用 PHP 获取服务器的默认页面（例如 index.php）？

> ID：10865594
> 
> 赞同：1
> 
> 时间：2012-06-02T20:12:44.777
> 
> 标签：php, web

不确定这是否可能。我想找出服务器的默认页面值是什么，所以如果它设置为“index.htm”或“index.php”然后返回。它适用于我正在开发的网络应用程序；用户已经提供了他们的 FTP 详细信息和网站 URL（这也可以自动计算出来吗？），但是我需要自动确定它们的默认页面是什么。

我想可能会根据 URL 返回的页面检查 FTP 目录中的文件以查看它们是否匹配，但这似乎有点矫枉过正。

提前致谢，如果我没有提供足够的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:25:36.080

如果 php 专门作为 apache 模块运行，则 php 脚本可以执行子请求并让 apache 为您解析。

[http://www.php.net/manual/en/function.apache-lookup-uri.php](http://www.php.net/manual/en/function.apache-lookup-uri.php)

虽然是常见的组合，但它只是众多 webserver+php 配置组合中的一种。

```
print_r(apache_lookup_uri('/')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:48:37.583

我不相信这是可能的。

因为（[如此处指定](http://www.thesitewizard.com/apache/change-default-page-for-domain.shtml)）人们可以设置自己的自定义默认索引。您当然可以寻找 default.* 和 index.* （我相信 default 会覆盖 index），但这不会捕获边缘情况（如自定义目录索引）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T21:49:38.810

这将为您提供域名以及所有 index.* 和 default.* 文件的数组，其中文件类型作为值，文件路径作为键。

```
<?php
$domain_name = $_SERVER['HTTP_HOST'];
echo $domain_name.'<br/>';

$files = glob($_SERVER['DOCUMENT_ROOT'].'/index.*');
$files = array_merge($files, glob($_SERVER['DOCUMENT_ROOT'].'/default.*'));
$indexes = array();
foreach($files as $index) 
{
    $index_info = pathinfo($index);
    $indexes[$index_info['dirname'].'/'.$index_info['basename']] = $index_info['extension'];
}

echo $_SERVER['DOCUMENT_ROOT'].'</br>';
echo '<pre>'; print_r($indexes); echo '</pre>';
?> 
```

# python-2.7 - 这段代码有什么问题？（Python，语法错误）

> ID：10865598
> 
> 赞同：2
> 
> 时间：2012-06-02T20:13:19.610
> 
> 标签：python-2.7, syntax-error

如果我的问题不是很具体或者标题具有误导性，我很抱歉，我一直在尝试用 Python 2.7 制作游戏。到目前为止，一切都很好，但是有一个问题，我收到了一个语法错误，我不知道如何解决它。错误说：“您的程序中有一个错误： ***无法分配给文字（Text game.py，第 28 行）”在这一行中，我试图将 'n' 分配为 1，这是代码：

```
print """
---------------------------------------------
|                                           |
|     TEXT GAME: THE BEGINNING!             |
|                                           |
---------------------------------------------
"""
print "What is your name adventurer?"
adv_name = raw_input("Please enter a name: ")
print "Welcome " + adv_name + ", I am called Colosso. I am the great hero of the town Isern. \nWhile I was protecting the surrounding forests I was attacked and killed. \nNow I am nothing but a mere spirit stuck in the realm of Life. \nI am here because I swore to slay the corrupt great king Blupri. \nBlupri still lives therefore I cannot travel to the realm of Death. \nI need you to slay him and his minions so I may rest in peace"
print """Do you want to help Colosso?:
1.) Yes (Start playing)
2.) No (Quit)
"""
dside = input("Please enter a number to decide: ")
if dside == 2:
    print "I knew you were a coward..."
    raw_input('Press Enter to exit')
elif dside == 1:
    print "Great! Let's get this adventure started"
    raw_input('Press Enter to continue')
print """This is the tutorial level, here is where you will learn how to play.
To move the letter of a direction, n is north, e is east, s is south, w is west.
Press the '<' key to move up and the '>' key to move down.
Try it!
"""
move = raw_input('Where would you like to go?: ')
"n" = 1
"e" = 2
"s" = 3
"w" = 4
"<" = 5
">" = 6
if move == 1:
    print "You move north."
if move == 2:
    print "You move east."
if move == 3:
    print "You move south."
if move == 4:
    print "You move west."
print move 
```

我已经在没有引号和单引号的情况下尝试过，但都没有工作任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:27:54.877

[Rob 是对的](https://stackoverflow.com/a/10865640/1258041)，而且以下代码行也没有多大意义。

我建议这样做：

```
move = raw_input('Where would you like to go?: ')

if move == 'n':
    print "You move north."
elif move == 'e':
    print "You move east."
elif move == 's':
    print "You move south."
elif move == 'w':
    print "You move west." 
```

或者，如果您出于某种原因真的想将输入映射到数字，请考虑创建一个字典：

```
directions = {"n": 1, "e": 2, "s": 3, "w": 4, "<": 5, ">": 6} 
```

然后你可以这样做：

```
if directions[move] == 1:
     # etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:18:48.590

Python 将“n”解释为字符串文字，这意味着它本身就是一个值，您不能将一个值分配给另一个值。左侧的标记`=`需要是一个变量。

我建议删除第 28 行中 n 周围的双引号。不是 python 编码器，但我会本能地这样做。

# c++ - 派生类成员函数在 C++ 中失败

> ID：10865601
> 
> 赞同：0
> 
> 时间：2012-06-02T20:13:55.040
> 
> 标签：c++

长话短说：

```
class A {
        public:
              A();
              ~A();
              void SetID(char* ID);
              char* GetID();
        protected:
              char ID[10];
};

class B: public A {
        public:
              B();
              ~B();
        protected:
              ...
        private:
              ...
}; 
```

然后主要：

```
 ...
 B *temp = new B;
 temp->SetID("0x12345678");
 ... 
```

然后编译器说“预期的构造函数，析构函数或类型转换之前->令牌”其中“temp->SetID（“0x12345678”）”位于

有人给点提示吗？？

Loki 建议的整个程序：

```
 #include <iostream>

  using namespace std;

  class A {
      public:
         A();
         ~A();
         void SetID(char* id);
         char* GetID();
       protected:
            char ID[10];
   };

   void A::SetID(char* id){
         strcpy(ID,id);          
    }
    char* A::GetID(){
         return ID;
    }
    class B: public A {
             public:
                 B();
                ~B();
             protected:
                int num;
     };

    int main(){
    B *temp = new B;
    B->SetID("0x12345678");
    cout<<B->GetID()<<endl;

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:32:07.407

您正在使用`B`, 这是一种类型，您可能打算在其中使用`temp`which 是变量的名称。

代替：

```
int main(){
B *temp = new B;
B->SetID("0x12345678");
cout<<B->GetID()<<endl;

return 0;
} 
```

你可能的意思是：

```
int main(){
B *temp = new B;
temp->SetID("0x12345678");
cout<<temp->GetID()<<endl;

return 0;
} 
```

这更像是您发布的“摘录”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:44:51.993

让我猜猜。

在得到您`main`认为位于`main`. 所以它在任何函数之外，除了初始化器之外，没有其他表达式的地方。

# android - 如何删除返回堆栈片段的菜单项？

> ID：10865610
> 
> 赞同：6
> 
> 时间：2012-06-02T20:14:56.013
> 
> 标签：android, actionbarsherlock

我有一个片段要替换为另一个片段，同时还将事务添加到后台堆栈。我的两个片段都使用 ActionBarSherlock 向操作栏提供菜单项。但是，我遇到了一个问题——在我的第二个片段中，操作栏同时显示了第一个片段和第二个片段的项目；我只想要第二个的项目。有什么办法可以做到这一点？

（我也在使用支持库。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T21:39:55.613

如果要更新操作栏图标，可以覆盖活动中的 onCreateOptionsMenu() 来定义哪个菜单用于活动片段。然后在替换片段后调用 invalidateOptionsMenu() 重新创建菜单。

如果您只使用下拉菜单，则可以覆盖 onPrepareOptionsMenu() 并从菜单中添加/删除项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-19T22:36:39.410

您可能`ViewPager`在第一个片段中有 a 并`getFragmentManager()`传递给了`FragmentPagerAdapter`构造函数。然后您尝试使用相同的`getFragmentManager()`.

如果是这样，则传递`getChildFragmentManager()`给`FragmentPagerAdapter`.

# sql - SQL Server：将（int）PK-FK表的（某些）行传输到未知状态的db

> ID：10865611
> 
> 赞同：0
> 
> 时间：2012-06-02T20:14:58.770
> 
> 标签：sql, sql-server

现有数据库已推广到多个客户。

现在我开发了一个插件，需要将我新添加的 PK-FK 表行传输到各种目标数据库。但我不能只复制 PK，因为目标可能已经使用该特定 PK，因此在编写更新脚本时对我来说处于未知状态......

除了将源数据库上的 PK 数量增加一万之外，还有什么想法，希望它足够高而不会干扰目标 PK？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:14:59.067

我可能会结束

*   将 GUID 添加到与我的 int PK 和 FK 平行的表中。
*   用 newid() 填充这些字段并将这些值复制到 FK 表中。
*   然后在没有 FK 数据的情况下传输我新添加的行（禁用检查约束后）
*   然后使用我的 GUID 引用纠正 int FK 值。

天哪，剧本要花点时间……

**更新：** 感谢 Mikael 的评论，我在眼前找到了解决方案：

*   我将添加一个新的“PK 阴影”列，默认为 PK 值。
*   然后删除默认值（因此在扩展目标模式时目标数据库具有空值）
*   所以在传输行之后（**没有**身份插入）我仍然会引用旧的 PK
*   并且只需要更新所有使用 PK 影子列加入 FK 表的“损坏”FK

这里是脚本：[http ://www.morrenth.com/transferring-some-rows-having-.aspx](http://www.morrenth.com/transferring-some-rows-having-.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:44:55.230

您可以在脚本中使用变量来保存每个 PK 行的 scope_identity() 并在 FK 表中使用此值。

# android - 如何在调试过程中获取eclipse android中函数的调用堆栈？

> ID：10865613
> 
> 赞同：1
> 
> 时间：2012-06-02T20:15:32.123
> 
> 标签：android, eclipse

在eclipse中调试期间如何获取函数的调用堆栈。调试视图已经显示了一个调用堆栈，但这还不够详细。我想知道调用是从哪里传到我现在正在查看的函数的。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:59:27.513

只看调试视图：

![在此处输入图像描述](../Images/81ef51c7502cbd271b812e5770cde7f5.png)

在上面的示例中，调试器在方法的第 45 行停止`FileSplit.writeBlock()`。

该方法由方法调用`FileSplit.splitFile()`（在第 24 行暂停）。

并且这个`splitFile()`方法被调用`FileSplit.main()`（在第 10 行暂停）。

单击这些节点中的任何一个都可以查看调用方法的代码，并可以检查该方法中涉及的所有变量的值。

# python - 列表中的 Python 泡菜

> ID：10865618
> 
> 赞同：0
> 
> 时间：2012-06-02T20:15:49.033
> 
> 标签：python

我试图将列表存储在一个平面文件中，由于某种原因我没有看到正在创建的文件..在 c:\python27\basics\db.txt

这是我的代码：

make_db_pickle.py

```
from Basics import data
import pickle

db = data.people

dbfilename = 'c:\python27\Basics\db.txt'

try:
    dbfile = open('dbfilename','wb')
except IOError as (errno,strerror):
    print "I/O error({0}): {1}".format(errno, strerror)
except ValueError:
    print "Could not convert data to an integer."
except:
    print "Unexpected Error", sys.exc_info() [0]

pickle.dump(db,dbfile)
dbfile.close() 
```

数据.py

```
bob={'name':'bobs mith','age':42,'salary':5000,'job':'software'}
sue={'name':'sue more','age':30,'salary':3000,'job':'hardware'}

people={}
people['bob'] = bob
people['sue'] = sue 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T20:18:58.767

您是否期望创建文件“c:\python27\Basics\db.txt”？当你调用 open 时，你给它一个文件名'dbfilename'。我不认为你想要那里的报价。检查文件是否正在创建，但在与您运行脚本的目录相同的目录中，并且在文件名“dbfilename”下。

因此，如果您在“C:\MyStuff”下运行此脚本，请检查文件“C:\MyStuff\dbfilename”。

# java - Java代码执行器

> ID：10865622
> 
> 赞同：0
> 
> 时间：2012-06-02T20:16:25.820
> 
> 标签：java

当我执行我的java类时，结果发现当我尝试访问文件时我没有一些特权，我得到了`false`：

```
 file.canRead() 
```

为了获得必要的权利**，我想知道谁执行我的代码**，我的意思是运行 java 类的用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:23:16.927

在（桌面或网络）应用程序中，它很简单：

```
System.getProperty("user.name"); 
```

Web 应用程序可以在另一个用户下运行（小心）。

在互联网上运行的 WebStart 应用程序中，有一个沙箱，即要求客户端允许文件系统访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:21:33.117

虽然这可能会回答您的问题，但将您的程序基于谁通过您的操作系统登录似乎有点愚蠢。您可以通过执行如下调用来查找系统信息：`System.getProperty(nameOS));`

这个网站应该有你需要的所有电话。[http://www.roseindia.net/java/beginners/OSInformation.shtml](http://www.roseindia.net/java/beginners/OSInformation.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:21:54.043

当前登录的用户将是默认用户。

如果登录的用户可以访问该文件，那么 java 应用程序也可以访问。

# javascript - 通过javascript中的正则表达式提取数据

> ID：10865627
> 
> 赞同：3
> 
> 时间：2012-06-02T20:16:58.010
> 
> 标签：javascript, regex, arrays

我有这个字符串：

```
"irrelevant(AB:1;CD:2;EF:3)" 
```

我需要找到一种方法来提取`AB`,`CD`和`EF`值（示例中的 1、2 和 3）作为单个变量或作为数组，仅使用 JS 函数。

不相关的部分可能有`(` `)` `:`，`;`但`(AB:1;CD:2;EF:3)`部分总是在最后。值始终为数字，长度可变，标签始终为 2 个大写字母。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:19:43.093

试试这个代码：

```
var txt = "irrelevant(AB:1;CD:2;EF:3)";
var m = txt.match(/(?:([A-Z]{1,}))\:([0-9]{1,})/gi);
var str = "";
for (var i = 0; i < m.length; i++) {
    var p = m[i].split (":");
    str += "Letters: " + p[0] + " - Number: " + p[1] + "\n";
}
​alert (str)​; 
```

看这个例子在行动[Demo](http://jsfiddle.net/vqDUh/)

问候，维克多

# python - GeocoderDotUS ... Python 检查“无”的语法

> ID：10865630
> 
> 赞同：0
> 
> 时间：2012-06-02T20:17:24.683
> 
> 标签：python, geopy

```
import csv
from geopy import geocoders
import time

g = geocoders.GeocoderDotUS()

spamReader = csv.reader(open('locations.csv', 'rb'), delimiter='\t', quotechar='|')

f = open("output.txt",'w')

for row in spamReader:
    a = ', '.join(row)
    #exactly_one = False
    time.sleep(1)

    place, (lat, lng) = g.geocode(a)

    if None in (lat, lng):
        f.write("none")
    else:
        b = str(place) + "," + "[" + str(lat) + "," + str(lng) + "]" + "\n"
        print b
        f.write(b) 
```

所以我已经确定，如果 GeocoderDotUS 没有找到地址，它将返回 None。我已经编写了一些脚本来尝试检查 None 但是我似乎仍然得到了这个跟踪。我有点困惑。

```
Traceback (most recent call last):
File "C:\Users\Penguin\workspace\geocode-nojansdatabase\src\GeocoderDotUS.py", line 17, in <module>
place, (lat, lng) = g.geocode(a)
TypeError: 'NoneType' object is not iterable 
```

我对 None systax 的检查是否有一些错误？提前感谢您的任何帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:20:46.103

正如您在错误消息中看到的那样，问题出在该`place, (lat, lng) = ...`行中。

是**g.geocode calll**返回**None**（并且您尝试立即将其分配给`place`变量和`lat, lng`元组，这显然必须失败）。

因此，请尝试以下方法：

```
result = g.geocode(a)
if result:
    place, (lat, lng) = result
else:
    # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:22:50.490

I don't know anything about geopy, but it looks like the problem is just what you said: if geocode doesn't find it, it returns None. *Just* None, not a tuple with None as the elements. So you need to check for None before you assign the results to lat and lng. Something like:

```
geoResult = g.geocode(a)
if geoResult is None:
    f.write("none")

# If we get here, the result is not None and we can proceed normally
place, (lat, lng) = geoResult
b = "..." # continue with your processing here 
```

# canvas - 有什么方法可以轻松地将 2d 画布元素转换/渲染为 3d？

> ID：10865632
> 
> 赞同：0
> 
> 时间：2012-06-02T20:17:38.447
> 
> 标签：canvas, 3d, 2d, render

我有一个小问题。我试图将 2d 画布对象转换为 3d 组，然后旋转它们。我想把它们放在 2d 中。我找到了一些教程，但没有一个对我有帮助。它可以像 context.render3D() 或类似的东西转换吗？我卡住了。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:04:32.390

我不完全确定你在问什么，但我几乎完全确定答案是*否定的。*

您的意思是用透视图渲染 2D 图像吗？或者用一些 2D 图像绘制一个立方体并旋转立方体？还是完全不同的东西？

如果您需要真正的 3D，您应该查看 WebGL 画布以及使 WebGL 可访问的众多优秀库之一。

[ThreeJS](https://github.com/mrdoob/three.js/)对您来说可能是一个很好的起点。查看他们的[示例页面](http://mrdoob.github.com/three.js/)，看看其中是否有任何远程像您想要做的那样，然后使用该示例作为指南。

# f# - 作为可区分联合的特定成员的列表元素的计数

> ID：10865634
> 
> 赞同：1
> 
> 时间：2012-06-02T20:17:50.540
> 
> 标签：f#, pattern-matching, discriminated-union

Let's say I have a discriminated union:

```
type foo = Bar | Baz | Batz 
```

Then, I want to check how many members of a list are of type `Baz`:

```
List.sumBy (function Bar -> 1 | _ -> 0) foos 
```

Is there a more idiomatic way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:31:43.683

请注意，您的示例不正确。它应该是：

```
List.sumBy (fun x -> match x with Baz -> 1 | _ -> 0) foos 
```

可以重写为：

```
List.sumBy (function Baz -> 1 | _ -> 0) foos 
```

我认为没有比`List.sumBy`在这里使用更惯用的方式了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T03:18:26.063

这取决于您如何定义“更惯用”。如果它是通过代码性能等因素衡量的语言熟练程度的同义词，那么同样简洁

```
List.fold (fun sum -> function Baz -> sum + 1 | _ -> sum) 0 foos 
```

`List.sumBy`可能被认为更惯用，因为它的执行速度比F# 2.0 以下的版本快 3-4 倍。

`List.fold`由于实现专门针对列表进行了高度优化，因此存在非常显着的性能差异，而实现又`List.sumBy`回到了`Seq.sumBy`通过普通`IEnumerable`遍历的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:22:44.400

...为了完整起见，不要忘记 for 循环可以进行模式匹配这一鲜为人知的事实。但是，您将收到有关不完整模式匹配的警告，这很烦人。

```
open System

type foo = Bar | Baz of int | Batz of string * string

let myList = [Bar; Bar; Baz(1); Batz("x", "y"); Baz(2)]

let count = 
    let mutable acc = 0
    for Baz(_) in myList do
        acc <- acc + 1
acc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T20:14:13.440

这是我本能地做的。过滤器 |> 长度似乎比求和或折叠更自然。没有检查性能。

```
let count = 
    myList 
        |> List.filter (fun elem -> match elem with | Baz -> true | _ -> false)
        |> List.length 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T19:41:48.633

我会定义一个`count`函数。想要计算满足给定谓词的元素数量是一个非常常见的用例。

```
let count pred = List.sumBy (fun x -> if pred x then 1 else 0) 
```

利用：

```
count (fun x -> x = Bar) foos 
```

# java - 数学计算不正确

> ID：10865637
> 
> 赞同：1
> 
> 时间：2012-06-02T20:18:10.123
> 
> 标签：java, android, math

有人可以告诉我什么是错的。当我在计算器中输入低和高等式时，我得到低 = 118.129 高 = 113.629。
但是由于某种原因，当我运行代码时，低和高都显示 119.0。

```
match_FRC = 82;//Double.parseDouble(FRC_match_textbox.getText().toString());
match_DTR = 1.455;//Double.parseDouble(DTR_match_textbox.getText().toString());

//math functions 
low = Math.round((match_FRC * match_DTR)/((1/100)+1));
high = Math.round((match_FRC * match_DTR)/((5/100)+1)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T20:23:39.467

您需要使用浮点常量而不是整数，例如：

```
low = Math.round((match_FRC * match_DTR)/((1.0 / 100)+1)); 
```

实际上，您`((1 / 100) + 1)`是一个整数表达式，其计算结果正好为 1。

使`1`into `1.0`（或`100`into `100.0`）将导致其他操作数（以及整个表达式）提升为浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:37:19.927

你在输入`Math.round()`计算器吗？

`Math.round()`提供 a `long`，没有小数部分。因此，您的期望`low`将包含分数部分是没有根据的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:27:50.213

我像数学一样简单！

```
5/100 (Integer) = 0
0 + 1 = 1
82*1.455 = 119.31
119.31 / 1 = 119.31
round ( 119.31 ) = 119 
```

只需将 100 更改为 100.0

```
low = Math.round((match_FRC * match_DTR)/((1/100.0)+1));
high = Math.round((match_FRC * match_DTR)/((5/100.0)+1)); 
```

# google-apps-script - 如何记录 Apps 脚本库以引用默认服务类型？

> ID：10865638
> 
> 赞同：2
> 
> 时间：2012-06-02T20:18:11.810
> 
> 标签：google-apps-script

我正在使用我的实用程序功能开发一个库，其中之一是：

```
/**
 * Open spreadsheet by passing its link instead of its key
 * @return {Spreadsheet} the spreadsheet object
 * @param {string} link the link to the spreadsheet
 */
function openByLink(link) {
  return SpreadsheetApp.openById(link.match(/key=([^&]*)/)[1]);
} 
```

我的问题是：如何记录此函数返回类型，以便脚本编辑器自动完成我的函数返回值作为[电子表格](https://developers.google.com/apps-script/class_spreadsheet)对象。就像`openById`调用没有包含在我的方法中一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:32:50.270

不幸的是，完成对函数的返回值不起作用，无论它是在库中还是在同一个脚本中。我可以看到这会有什么用，我建议在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上为它打开一个功能请求。

# core-data - 推送 ViewController 和弹出导致核心数据对象丢失值

> ID：10865644
> 
> 赞同：1
> 
> 时间：2012-06-02T20:19:21.370
> 
> 标签：core-data, ios5

我正在推动 View Conroller，然后当我通过段控制器弹出它以返回原始状态时。有几个值会改变。一个是距离值（浮点数），另一个是存储为二进制数据的缩略图。

有没有办法告诉 Core Data 在它推送另一个 View Controller 之前基本上冻结这个数组（它当前是一个数组）？也许将它复制到一个 tmpArray，然后在 viewDidAppear 上复制回该 tmpArray（如果存在）？听起来真的很hacky，但我需要让它工作。

谢谢

**编辑#1**

所以这里有一些关于哪里出错的代码。所以似乎 getAllLocationsWithFinished 导致 self.tmpLocations 改变：

```
 //works
  NSLog(@"#1 locations right before call: %@",[self.locations objectAtIndex:2]);
  self.tmpLocations=[[NSArray alloc] initWithArray:[self.locations copy]];
  //works
  NSLog(@"#2 locations right before call: %@",[self.tmpLocations objectAtIndex:2]);

  [[ModelManager sharedModelManager] getAllLocationsWithFinished:^(NSArray* map_locations) 
  {
    // data is off
    NSLog(@"#3 locations right before call: %@",[self.tmpLocations objectAtIndex:2]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:54:53.207

定音鼓，

如果您在视图控制器中创建这些项目，那么您可以通过保存它们来保证它们保持原样。也就是说，如果 Core Data 是你的罪魁祸首，我会感到非常惊讶。导航控制器是与 Core Data 正交的技术；它们彼此独立。

您确定在推送的视图控制器可见时没有发生内存警告吗？它们经常发生，特别是当涉及 B​​LOB 时，导航控制器。您的代码可能负责更改值。

如果您使用 GCD 在 中执行后台任务`-getAllLocationsWithFinished:`，那么您很可能没有从您的后台 MOC 中捕获确实保存通知。必须抓住这一点，并在线程之间合并对象，以保持主线程的对象与背景同步。

安德鲁

# android - 删除键不起作用

> ID：10865645
> 
> 赞同：4
> 
> 时间：2012-06-02T20:19:25.763
> 
> 标签：android

我为 Enter keyevent 添加了 setOnKeyListener。但是，在我添加 setOnKeyListener 后，删除（退格）键不起作用。当我删除 setOnKeyListener 时，删除键工作正常。

如何修复删除键正常工作？

```
final EditText edittext = (EditText) findViewById(R.id.editText1);

        edittext.setOnKeyListener(new OnKeyListener() {

            @Override
            public boolean onKey(View arg0, int arg1, KeyEvent event) {
                // TODO Auto-generated method stub
                 if (event != null&& (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) {

                     InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        in.hideSoftInputFromWindow(edittext
                                .getApplicationWindowToken(),
                                InputMethodManager.HIDE_NOT_ALWAYS);

                     applySearch();

                 }
                return true;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:29:50.790

如果你 return `True`，你正在处理所有的钥匙。尝试这个：

```
if (event != null && (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) {
    // something here
    return true;
}

// otherwhise
return false; 
```

[Android：为按钮覆盖 onKeyListener 的问题](https://stackoverflow.com/questions/3853200/android-problem-with-overriding-onkeylistener-for-a-button)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T20:28:15.673

根据[文档](http://developer.android.com/reference/android/view/View.OnKeyListener.html) `onKey`，如果侦听器已经消费了事件，则返回`True`，否则返回 false。在你的情况下：

```
@Override
public boolean onKey(View arg0, int arg1, KeyEvent event) {
    ...
    return true; // Try to return false instead
} 
```

当您的方法返回`true`键未处理并且退格不起作用时。

# android - 如何动态注册我的活动来处理 startActivity()？

> ID：10865646
> 
> 赞同：0
> 
> 时间：2012-06-02T20:19:27.550
> 
> 标签：android, android-intent, android-activity, intentfilter

`<intent-filter>`我可以通过添加清单文件来静态注册我的活动以处理 startActivity() 。但是，当我的活动正在运行时，如何动态注册它？例如，单击按钮后如何注册？

我的应用程序要求用户指定一个 URL，然后我想处理对这个 URL 的浏览请求。所以我只能在运行时获取这个 URL。我查看了 registerReceiver()，却发现它只对 sendBroadcast() 有用，对 startActivity() 没有用。

事实上，我正在与服务器进行 OAuth 身份验证，并且我想在 OAuth 之后返回我的活动。所以我想处理`<server-api-path>/auth/displaycode`路径。

我知道我可以使用自定义 URL 方案并在清单文件中静态处理它，但是根据[1](https://stackoverflow.com/a/3472228/448089)，这不是一个好习惯。

在文档中搜索了一个下午后，我仍然无法弄清楚这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:10:33.613

没有 API 可以在运行时动态注册新的 Activity 元素或修改 AndroidManifest 的内容。接收 OAuth 回调的最佳选择是实现包含 的单个 Activity `WebView`，而不是启动浏览器或某些外部应用程序并尝试返回。

您可以通过附加, 并使用其方法（如和）来`WebView`监控 URL 流量，以确定何时跳回上一个 Activity 或执行其他操作。由于您在代码中执行所有这些操作，因此您查找的 URL 可以是动态的，甚至可以通过`WebViewClient``onPageStarted()``shouldOverrideUrlLoading()``Intent``WebView`

高温高压

# java - js- 我可以只使用 javascript-> 客户端和 js/java-> 服务器端的 OAuth 将用户身份验证到我的应用程序吗？

> ID：10865649
> 
> 赞同：3
> 
> 时间：2012-06-02T20:19:53.167
> 
> 标签：java, javascript, oauth

我想在我的一个应用程序中使用 OAuth，特别是 Google Chrome 扩展程序。可以通过 JavaScript 代码完成吗？我唯一的要求是它应该使用客户端 Javascript 代码来完成，并且服务器可以使用 JavaScript 或 Java。

如果无法做到这一点，那么我可以使用简单的用户名密码身份验证吗？

同样，我唯一的要求是它应该使用客户端 Javascript 代码来完成，并且服务器可以使用 javascript 或 java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:56:59.947

您绝对可以在 Google Chrome 扩展程序中使用 OAuth，但请记住，您的应用程序密钥和机密在捆绑包中是可读的。

有关更多信息：[http](http://code.google.com/chrome/extensions/tut_oauth.html) ://code.google.com/chrome/extensions/tut_oauth.html （该示例使用 Google 的 API 端点之一，但您可以使用任何 OAuth1.0a 提供程序）。由于您有兴趣进行 Chrome 扩展，因此您不会受到请求来源（跨站点脚本）限制的正常麻烦的影响。

当然，您也可以使用“普通”用户名和密码授权（尤其是通过 SSL/HTTPS）。如果您打算使用 API 公开，那么我会推荐 OAuth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:34:26.920

JavaScript 是纯客户端脚本语言。它不能用于服务器端。

其次，如果您希望您的客户端获得身份验证，则必须有一个服务器端程序来执行此操作。

# ios - 播放器在不同浏览器中的表现不同

> ID：10865651
> 
> 赞同：2
> 
> 时间：2012-06-02T20:20:21.303
> 
> 标签：ios, firefox, google-chrome, mime-types, mediaelement.js

我正在尝试找到一个真正适用于 HTML5 和 wordpress 的播放器，而你的已经接近了。

我在通过 godaddy 托管的 Apache 服务器上。

下面的链接是我正在测试的页面。在 Chrome 中，它会自动加载一个版本，同时仍显示播放按钮。点击播放后，另一个版本开始，因此同时播放两个。

在Firefox中它根本不会加载。海报框架显示，但视频从不播放（根据 godaddy 的 ogg/ogv mime 类型存在。）

在野生动物园它工作正常。

[http://parkmultimedia.com/test/](http://parkmultimedia.com/test/)

这是我正在使用的代码 -

[视频 mp4="http://www.parkmultimedia.com/flv/2012-reel.mp4" webm="http://www.parkmultimedia.com/flv/2012-reel.webm" ogg="http:// /www.parkmultimedia.com/flv/2012-reel.ogg" flv="http://www.parkmultimedia.com/flv/2012-reel.flv" 海报="http://www.parkmultimedia.com/flv /webstill.png" preload="true" autoplay="false" width="480" height="272" align="center"]

任何帮助，将不胜感激！担

**更新** 好的，经过一些修补，我已经设法让上面的页面工作了。Chrome、Safari、Firefox 似乎都不起作用。我打算让opera和PC朋友测试IE。修复 - 将默认视频设置为 mp4，我使用了此代码 -

[视频 flv="http://www.parkmultimedia.com/flv/2012-reel.flv" mp4="http://www.parkmultimedia.com/flv/2012-reel.mp4" 海报="http:// /www.parkmultimedia.com/flv/webstill.png" preload="true" autoplay="false" width="480" height="270"]

使用我的 iPod（是的 pod，不是 pad），我得到了播放按钮，上面有一条线……虽然我也得到了加载轮……它只是继续加载。

另外，我会搜索这个，但也是一个问题 - 在新旧脚本中，我将自动播放设置为 false，但在 Chrome 和 Safari 中它无论如何都会这样做。是否有覆盖设置或通过浏览器控制的方法？

最后，有没有办法让玩家居中而不是左对齐？

感谢您的帮助，丹

# unit-testing - 部分模拟 - 期望被忽略 (Rhino Mocks)

> ID：10865653
> 
> 赞同：1
> 
> 时间：2012-06-02T20:20:34.653
> 
> 标签：unit-testing, rhino-mocks-3.5, partial-mocks

我正在尝试测试类似于以下示例的类：

```
public class Service : IService
{
    public string A(string input)
    {            
        int attemptCount = 5;
        while (attemptCount > 0)
        {
            try
            {
                return TryA(input);
            }
            catch (ArgumentOutOfRangeException)
            {
                attemptCount--;
                if (attemptCount == 0)
                {
                    throw;
                }
                // Attempt 5 more times
                Thread.Sleep(1000);                        
            }                    
        }
        throw new ArgumentOutOfRangeException();            
    }

    public string TryA(string input)
    {
    // try actions, if fail will throw ArgumentOutOfRangeException
    }
}

[TestMethod]
public void Makes_5_Attempts()
{
    //  Arrange
    var _service = MockRepository.GeneratePartialMock<Service>();
    _service.Expect(x=>x.TryA(Arg<string>.Is.Anything)).IgnoreArguments().Throw(new ArgumentOutOfRangeException());

    //  Act
    Action act = () => _service.A("");

    //  Assert
    //  Assert TryA is attempted to be called 5 times
    _service.AssertWasCalled(x => x.TryA(Arg<string>.Is.Anything), opt => opt.Repeat.Times(5));
    //  Assert the Exception is eventually thrown
    act.ShouldThrow<ArgumentOutOfRangeException>();
} 
```

部分嘲讽似乎无法接受我的期望。当我运行测试时，我收到有关输入的错误。当我调试时，我看到正在执行该方法的实际实现而不是预期。

我做这个测试正确吗？根据文档（[http://ayende.com/wiki/Rhino%20Mocks%20Partial%20Mocks.ashx](http://ayende.com/wiki/Rhino%20Mocks%20Partial%20Mocks.ashx)）：“除非您为该方法定义期望，否则部分模拟将调用该类上定义的方法。如果您有定义了一个期望，它将为此使用正常规则。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T23:22:25.840

值得注意的是，Rhinomocks、Moq 和 NSubstitute 等模拟框架使用 .NET 中称为 DynamicProxy 的功能，该功能在内存中动态生成模拟的派生类。课程必须：

*   是一个接口；或者
*   具有无参数构造函数的非密封类；或者
*   从 MarshalByRefObject 派生（起订量已远离此功能）

方法必须是接口的一部分或虚拟化，以便可以在运行时替换替代行为。

# android - 更改一些代码后，我应该重新启动 Android Emulator 吗？

> ID：10865660
> 
> 赞同：1
> 
> 时间：2012-06-02T20:20:55.957
> 
> 标签：android, android-emulator

我已经为我的第一组代码更改打开了 Android 模拟器。然后我改变了我的一些代码。我是否应该关闭模拟器并重新启动（重新运行）代码以反映我的新更改？或者只是在eclipse中按下运行键会反映这些变化？

请说清楚。

PS：到目前为止，我不会为每次代码更改关闭并重新启动模拟器。但是今天我在控制台中遇到了“应用程序已经运行，卸载应用程序并尝试”之类的错误。这就是为什么我对此表示怀疑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:37:37.393

您不需要重新启动模拟器，在 Eclipse 中按下运行按钮即可。

当您收到与此类似的消息时：

```
Re-installation failed due to different application signatures.
You must perform a full uninstall of the application. WARNING: ...This will remove the application data!
Please execute 'adb uninstall com.antew.code' in a shell. 
```

打开命令提示符并使用：

```
adb uninstall <package name> 
```

例如

```
adb uninstall com.antew.code 
```

然后从 Eclipse 重新启动应用程序以再次安装它。adb exe 位于 SDK 的 /platform-tools/ 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T07:57:00.563

无需重启模拟器！！！

您只需从 eclipse (Ctrl + F11) 再次运行您的应用程序。如果您对代码进行了任何更改（并将它们全部保存），那么在运行应用程序时，您将获得如下所示的输出

```
[2013-06-19 13:19:12 - MyFirstApp] ------------------------------
[2013-06-19 13:19:12 - MyFirstApp] Android Launch!
[2013-06-19 13:19:12 - MyFirstApp] adb is running normally.
[2013-06-19 13:19:12 - MyFirstApp] Performing com.example.myfirstapp.MainActivity activity launch
[2013-06-19 13:19:12 - MyFirstApp] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Micromax_A_68'
[2013-06-19 13:19:12 - MyFirstApp] Uploading MyFirstApp.apk onto device 'emulator-5554'
[2013-06-19 13:19:14 - MyFirstApp] Installing MyFirstApp.apk...
[2013-06-19 13:19:26 - MyFirstApp] Success!
[2013-06-19 13:19:26 - MyFirstApp] Starting activity com.example.myfirstapp.MainActivity on device emulator-5554
[2013-06-19 13:19:28 - MyFirstApp] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.myfirstapp/.MainActivity 
```

以上日志特定于我的应用程序，但您明白了……如果您没有保存任何更改，那么您将获得一些额外的输出行，如下所示

```
...
[2013-06-19 13:22:10 - MyFirstApp] Application already deployed. No need to reinstall.
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:44:38.653

不要为所做的每个更改重新启动模拟器。只需在模拟器上部署您的应用程序。

如果你不会面对`Application already running, uninstall the application and try`确保你的应用程序没有在模拟器中启动。

如果是，只需切换到另一个活动，然后尝试部署您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:26:52.350

完全不需要关闭模拟器......

该消息是由于一段时间应用程序在前面（运行）模拟器拒绝重新运行。为此，只需通过后退按钮关闭应用程序并从 Eclipse 运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T20:26:53.267

不需要重新启动模拟器来更改代码——只需从 Eclipse 中“运行”它就可以了。我认为您收到该错误的原因是您试图在不更改代码的情况下运行它。

# sql - 如果不存在，则插入 NULL 值

> ID：10865670
> 
> 赞同：2
> 
> 时间：2012-06-02T20:23:20.277
> 
> 标签：sql, sqlite, insert, exists

我有两个表：标签和链接表photos_tags。我想添加一个新标签，所以我检查标签是否已经在标签表中，如果没有，我插入一个。我的表格看起来像这样：tags(id, name), photos_tags(photos_id, tags_id)。现在我尝试这样做：

```
IF NOT EXISTS (SELECT * FROM tags WHERE name=*tagsName*)  
  INSERT INTO tags VALUES (NULL, *tagsName*); --NULL used for autonumbering 
```

我也试过：

```
INSERT INTO tags (  
  SELECT NULL, *tagsName*  
  WHERE NOT EXISTS (  
    SELECT * FROM tags  
    WHERE name=*tagsName*  
  )  
); 
```

这两个语句都会导致语法错误：

*   在附近的第一个声明中`if`
*   在附近的第二个声明中`select`

我的查询应该是什么样的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T20:32:05.767

创建一个`UNIQUE`约束`tags.name`并使用它：

```
INSERT  OR IGNORE
INTO    tags (id, name)
VALUES  (NULL, 'tagsName') 
```

如果由于某种原因您不能或不想这样做，请使用：

```
INSERT
INTO    tags (id, name)
SELECT  NULL, 'tagsName'
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    tags
        WHERE   name = 'tagsName'
        ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T20:38:46.453

```
INSERT INTO tags (name)
SELECT 'tagsName'
WHERE NOT EXISTS (SELECT 1 FROM tags WHERE name = 'tagsName'); 
```

或者

```
INSERT  OR IGNORE
INTO tags (id, name)
VALUES (NULL, 'tagsName') 
```

如果你有一个独特的约束

# excel - Excel用什么方法计算时间和年龄

> ID：10865677
> 
> 赞同：1
> 
> 时间：2012-06-02T20:23:53.250
> 
> 标签：excel

我有一个包含 2 列的表：年龄在 10 到 90 之间，可以说：] 和时间（在手机上花费）我需要做的是计算人们在 16 到 40 之间的手机上花费了多长时间。第一部分可能看起来很简单，因为我们可以通过计数来计算 16 到 40 岁之间的人使用手机的数量，但如何评估特定年龄段在手机上的花费时间。我会很感激aaany帮助问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:40:54.420

如果您需要分析数据而不是创建静态函数进行计数，您可以考虑使用[数据透视表。](http://office.microsoft.com/en-us/excel-help/pivottable-reports-101-HA001034632.aspx)

构建一个简单的数据透视表，其中包含行中的年龄和值中的时间。一旦构建了这个简单的数据透视表，您就可以过滤行值，在特定的分组条件中将它们组合在一起，手动选择特定的值等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T23:48:46.600

我喜欢 Boud 给出的使用 Pivots 的想法，但如果你特别想要一个公式，那么你可以使用`SumProduct()`

```
=SUMPRODUCT((A2:A13>16)*(A2:A13<40)*(B2:B13)) 
```

请记住格式化单元格，`[h]:mm:ss`因为您正在添加时间。

**快照**

![在此处输入图像描述](../Images/95b662e6911e39628845a42cd49dedec.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T20:33:21.927

例如，您可以使用以下公式添加其他列：

```
=IF ( AND(A1>16, A1<40), B1, 0 ) 
```

其中A是AGE列，B是Time列，然后简单地求和！

# php - 如何编写一个检查变量是否已定义且是否为数字的函数？

> ID：10865683
> 
> 赞同：0
> 
> 时间：2012-06-02T20:24:34.500
> 
> 标签：php

过去，当我需要检查是否设置了变量**以及**数字时，我会这样做：

```
if( isset($_GET['var']) && is_numeric($_GET['var']) ) 
```

但我觉得这有点难看，尤其是当我需要在同一个 if 语句中检查一堆变量时，所以我做了一个函数：

```
function setAndNum($var)
{
    if(isset($var) && is_numeric($var))
        return 1;
    else
        return 0;
} 
```

问题是当我将未定义的变量传递给函数时，像这样（假设 GET 数组中的变量未定义）：

```
if( setAndNum($_GET['var']) ) 
```

我收到 php 错误：

> 注意：未定义的索引：...

因此，该功能的整个目的基本上都被打败了（或者至少是目的的一半；））。

让我感到困惑的一件事是 isset() 函数是如何工作的，为什么我可以将未定义的变量传递给它，但不能传递给我自己的函数？

是否可以让我的 setAndNum() 函数工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T20:28:45.900

你的问题是`$_GET`作为一个数组。当你传递`$_GET['var']`给你的函数时，这个数组值已经被查找并用作函数的参数。因此，您无法*在*此函数中有效地检查`'var'`in`$_GET`的存在。您可以稍微重写一下以使其适用于数组值，如下所示：

 *```
function setAndNum($key, $array)
{
    if(array_key_exists($key, $array) && is_numeric($array[$key]))
        return 1;
    else
        return 0;
} 
```

然后像这样调用它：

```
if( setAndNum('var', $_GET) ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T20:29:07.350

在使用之前验证密钥是否存在是一种很好的做法：

```
if (array_key_exists($_GET, 'var')) {
  // do stuff with $_GET['var']
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:30:55.657

```
function setAndNum(&$var)
{
    if(isset($var) && is_numeric($var))
        return 1;
    else
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:31:30.237

请尝试使用此版本：

```
function setAndNum(&$var)
{
    if(isset($var) && is_numeric($var))
        return 1;
    else
        return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T20:31:45.000

您可以使用`@`运算符来防止错误报告：

```
setAndNum(@$_GET['var']); 
```

这样就不会打印不存在索引的错误信息，返回值为`0`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T20:35:37.510

您还可以编写两个函数，一个检查数组，一个检查普通变量

```
function setAndNum($var)
{
    if(isset($var) && is_numeric($var))
      return 1;
    else
      return 0;
}

function setAndNumArray($array, $key)
{
    if(isset($array) && isset($array[$key]) && is_numeric($array[$key]))
       return 1;
    else
      return 0;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-02T20:31:39.347

如果您使用 GET 或 POST 方法中的变量，您可能会这样做，因为它们是超级全局变量。

```
function setAndNum()
{
    if(isset($_GET['var']) && is_numeric($_GET['var']))
        return 1;
    else
        return 0;
} 
```

现在来到您的另一个查询。isset 检查一个变量是否设置或不喜欢

```
if(isset($_POST['submit']))
{
// any code under button click
} 
```*

# jquery - 根据选中的单选按钮限制带有 jquery 的复选框

> ID：10865687
> 
> 赞同：0
> 
> 时间：2012-06-02T20:25:42.453
> 
> 标签：jquery, checkbox, radio

所以，我对一些复选框有这个问题。首先让我告诉你关于“项目”本身。这是一个网络表单，用户必须完成它并根据他想要购买的内容选中一些复选框和单选按钮。首先是 2 个无线电子弹，编号为 1 和 2，代表他要购买的产品的数量。旁边是大约 5 个代表产品颜色的复选框，不管它们有多少，问题是......我想要，当用户在单选按钮上选择 1 时，只有 1 个复选框活动，如果他选择 2，那么只有 2 个复选框可供检查。所以..有人可以帮助我吗？我想到了jQuery，但我不知道......

有两个 div，ID 为 #radioButtons 的第一个 div 有 2 个单选按钮，第二个 div 有其余的复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:24:17.063

We might use the *real* HTML source, where the problem appears.

**EDIT**:

I am having trouble understanding why you want to do this. From a usability point of view, this solution is quite unusual, maybe a bit bad. Let me ask *you* a few questions.

*   Why do you want it to work like this?
*   What do you want to let your users chose?

There are lots of inline selection possibilities, famous example would be chosing the iPad type on apple.com. But the most important would be to provide your users with user interfaces which are very easy to understand and a great feeling to use.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:38:39.323

你没有在你的帖子中给出任何标记，所以我猜是这样的：

***HTML***

```
<div id="radioButtons">
  <input type="radio" name="quantity" id="radio1">
  <input type="radio" name="quantity" id="radio2">
</div>
<div class="checkBoxes">
  Color 1:<input type="checkbox" name="color" disabled="disabled">
  Color 2:<input type="checkbox" name="color" disabled="disabled">
  Color 3:<input type="checkbox" name="color" disabled="disabled">
  Color 4:<input type="checkbox" name="color" disabled="disabled">
  Color 5:<input type="checkbox" name="color" disabled="disabled">
</div> 
```

***jQuery***

```
$('#radio1').on('change', function() {
    $('.checkBoxes :checkbox').prop('disabled', true);
    $(':checkbox:eq(0)').prop('disabled', false);
});

$('#radio2').on('change', function() {
    $('.checkBoxes :checkbox').prop('disabled', true);
    $(':checkbox:eq(0), :checkbox:eq(1)').prop('disabled', false);
}); 
```

**[示例锻炼](http://jsfiddle.net/thecodeparadox/6x9NZ/15/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:31:39.067

您可以将单击事件添加到复选框，然后在事件处理程序中检查允许的最大复选框的条件，然后根据是否达到该限制返回 true 或 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:57:14.030

请参阅[示例](http://jsfiddle.net/ewFXd/4/)

我正在维护要在收音机 id 中创建的复选框的数量，并在 div 中动态创建复选框。

**编辑：**

我更新了你给的小提琴。请看一下[更新小提琴](http://jsfiddle.net/C6SpM/13/)

# jquery - 使用 jQuery 清除 IMG

> ID：10865689
> 
> 赞同：35
> 
> 时间：2012-06-02T20:25:59.660
> 
> 标签：jquery, html, image

我正在尝试从`<img>`元素中删除加载的图像，但清除或删除 src 并没有这样做。该怎么办？

**HTML：**

```
<img src='https://www.google.com/images/srpr/logo3w.png'> 
```

**查询：**

```
$('img').attr('src', ''); // Clear the src
$('img').removeAttr('src');​ // Remove the src 
```

图像仍然...

小提琴：http: [//jsfiddle.net/6x9NZ/](http://jsfiddle.net/6x9NZ/)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-02T20:27:40.433

您必须完全[删除](http://api.jquery.com/remove/)该`<img>`元素或将其替换为不同的图像（可能是透明的 gif）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-26T12:26:42.567

这对我有用：

```
var $image = $('.my-image-selector');
$image.removeAttr('src').replaceWith($image.clone()); 
```

但是，请注意您可能附加到图像的任何事件处理程序。**jQuery clone**总是有**withDataAndEvents**和**deepWithDataAndEvents**选项，但我没有用它们测试代码：http: [//api.jquery.com/clone/#clone-withDataAndEvents](http://api.jquery.com/clone/#clone-withDataAndEvents)

 **此外，如果您想对多个图像执行此操作，您可能必须使用**jQuery each**之类的东西。

我在类似问题上发布了相同的答案：[Setting image src attribute not working in Chrome](https://stackoverflow.com/questions/8425817/setting-image-src-attribute-not-working-in-chrome/16236569#16236569)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-07T18:34:37.253

你可以这样做。首先为图像分配一个ID

```
<img id='image_id' src='https://www.google.com/images/srpr/logo3w.png'> 
```

然后删除源属性。

```
jQuery('#image_id').removeAttr('src')
jQuery('#image_id').show(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-02T20:29:17.577

简单地隐藏一个元素怎么样：

```
$('img').hide(); 
```

您不能从标签中删除图像。当您使用 jQuery 时，请记住您不处理标签，而是使用 DOM 元素进行操作。因此，就 jquery 而言，您的标签不是标签，它是一个对象，一个 DOM 元素。这是元素不是标签，它是在 DOM 中表示图像的元素。因此，如果要隐藏图像，则必须隐藏元素。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-14T17:11:18.720

使用删除节点

```
$("img").remove() 
```

或简单地使用隐藏图像

```
$("img").hide() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-14T17:06:50.770

最好的方法是用另一个替换图像。我的意思是不要清理 src，而是设置一个假值，如 .attr('src','notting'); 它不会加载任何图像，并且旧图像的缓存版本将消失

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-18T10:36:55.380

这对我有用。将 div 'custom_preview_image' 中的图像属性 src 替换为空白

```
field = jQuery(this).closest('td').find('.custom_repeatable li:last').clone(true); field.find('.custom_preview_image').removeAttr('src').end(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-14T17:09:13.873

如果您仍然希望元素占用空间但不可见，请使用 css 将其隐藏。给你的图像一个类或 id 并像这样隐藏它：

```
<img id='hide' src='https://www.google.com/images/srpr/logo3w.png'>

$('#hide').css('visibility', 'hidden'); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-08-23T14:45:01.567

而不是在设置为时显示损坏的图像`"src"`，`"#"`有一种解决方法，因此您可以将`alt`属性设置为所需的文本：

```
 $('#thumbnialPreviewImage').attr('src', '#');
 $('#thumbnialPreviewImage').attr('alt', 'Please Select Image'); 
```**

# android - AlarmManager 过早触发 PendingIntent

> ID：10865691
> 
> 赞同：6
> 
> 时间：2012-06-02T20:26:34.203
> 
> 标签：android, alarmmanager, android-pendingintent

我已经搜索了 3 天，但在其他任何地方都没有找到解决方案或类似的问题/问题。这是交易：

1 小时后触发 -> 工作正常

2 小时后触发 -> 1:23 结束

1 天内触发 -> 约 11:00 结束

那么为什么 AlarmManager 如此不可预测并且总是为时过早呢？或者我做错了什么？还有另一种方法可以使其正常工作吗？

这是我在 AlarmManager 中注册 PendingIntent 的方式（精简）：

```
AlarmManager alarmManager = (AlarmManager)parent.getSystemService(ALARM_SERVICE);
Intent myIntent = new Intent(parent, UpdateKlasRoostersService.class);
PendingIntent pendingIntent = PendingIntent.getService(parent, 0, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);

//Set startdate of PendingIntent so it triggers in 10 minutes
Calendar start = Calendar.getInstance();
start.setTimeInMillis(SystemClock.elapsedRealtime());
start.add(Calendar.MINUTE, 10);

//Set interval of PendingIntent so it triggers every day
Integer interval = 1*24*60*60*1000;

//Cancel any similar instances of this PendingIntent if already scheduled
alarmManager.cancel(pendingIntent);

//Schedule PendingIntent
alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, start.getTimeInMillis(), interval, pendingIntent);
//Old way I used to schedule a PendingIntent, didn't seem to work either
//alarmManager.set(AlarmManager.RTC_WAKEUP, start.getTimeInMillis(), pendingIntent); 
```

如果有人有解决方案，那就太棒了。谢谢你的帮助！

更新：2 小时前它以 2 小时的间隔触发它，但之后它在 1:20 小时后触发。它变得非常奇怪。我将使用日志文件跟踪触发器并明天将其发布在这里。

更新：PendingIntent 计划每 3 小时运行一次。从日志的第二行看来，旧的预定 PendingIntent 仍在运行：

```
[2012-5-3 2:15:42 519] Updating Klasroosters
[2012-5-3 4:15:15 562] Updating Klasroosters
[2012-5-3 5:15:42 749] Updating Klasroosters
[2012-5-3 8:15:42 754] Updating Klasroosters
[2012-5-3 11:15:42 522] Updating Klasroosters 
```

但是，我确定我在安排新的之前取消了预定的 PendingIntent。并且每个 PendingIntent 都不会以相同的方式重新创建，因此它应该完全相同。如果不是，则此线程问题不再相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:16:37.507

**重写**：我最终看到了你的错误，但出乎意料。

我确实改变了这个：

```
PendingIntent.getService(parent, 0, myIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

对此：

```
PendingIntent.getService(parent, 0, myIntent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

在与您相同的假设下，*以某种方式*传播旧意图。从那以后我就再也没有见过侥幸...

我唯一一次看到它是在我第一次打电话的时候。另一种方法可能是跟踪 a`current`和`previous`Calendar 对象，如果间隔不是您所期望的，则忽略此“早期”广播。*（虽然考虑到警报的*工作方式，这种方法似乎是多余的，但考虑到警报的*工作*方式，它有助于防止那些无关的调用......）

 *希望对您有所帮助，如果我找到其他任何东西，我会告诉您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:28:43.397

我知道这个问题有点老了，但我自己也有同样的问题。我发现如果我试图在方法之外声明 Calendar 变量，它不会很好地发挥作用，并且警报会提前触发。因为你的类被剥离了，所以很难准确地说出你在哪里调用日历实例。

如果我这样设置它，那么它会准时触发：

```
protected void nextAlarm(Context context, int seconds){
    Calendar nextAlarm = Calendar.getInstance();

    Intent intent = new Intent(context, MyClass.class);
    PendingIntent pending = PendingIntent.getBroadcast(context, MainActivity.REPEATING_ALARM, intent, PendingIntent.FLAG_CANCEL_CURRENT);

    AlarmManager amanager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    nextAlarm.add(Calendar.SECOND, seconds);

    amanager.set(AlarmManager.RTC_WAKEUP, nextAlarm.getTimeInMillis(), pending);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T21:23:50.477

使用日历时，您是否考虑到日历使用的时间精确到毫秒。也许您应该将 Milli second 字段和 seconds 字段设置为零，这样它就可以开始了。

还有一天使用它会更容易

```
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(0);
cal.add(Calendar.DAY_OF_MONTH, 1); 
```

此外，当您使用 getInstance 时，不会将日历时间设置为创建时间，因此不需要再次设置时间对吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-08T10:43:00.997

确保您的服务的 onStartCommand 返回 START_NOT_STICKY，否则会自动重新尝试：

```
public class UpdateKlasRoostersService extends Service {
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        buildUpdate();
        return START_NOT_STICKY;
    }
} 
```*

# asp.net - 在使用 MVP 模式构建的 ASP.NET Web 表单应用程序上应用依赖注入

> ID：10865695
> 
> 赞同：3
> 
> 时间：2012-06-02T20:26:52.517
> 
> 标签：asp.net, dependency-injection, mvp

我正在使用 MVP 模式创建一个 ASP.NET Web 表单应用程序。我的视图结构是这样的：

```
public partial class ShipperView : System.Web.UI.Page, IShipperView
{
       ShipperPresenter presenter;
       public ShipperOperationsView()
        {
            IShipperOperations operations = new ShipperOperations();
            INavigator navigator = new Navigator();
            presenter = new ShipperPresenter(this,operations,navigator);  //Instantiating presenter
        }
        ...
} 
```

我的presenter的基本结构是这样的：

```
public class ShipperPresenter
{
        IShipper shipperView;
        IShipperOperations operations;
        INavigator navigator;
        public ShipperPresenter(IShipperView view,IShipperOperations operations,INavigator navigator)
        {
            shipperView = view;
            this.operations = operations;
            this.navigator = navigator;
        }
        ...
} 
```

我不想使用 new 关键字来实例化我的演示者，我想用解析依赖项来替换它。在依赖解析期间，我想将当前视图的实例传递给依赖解析器。我尝试对此进行了很多搜索，但没有得到任何满意的答案。

是否可以使用任何 IoC 容器（如 StructureMap、Ninject、Unity 或 MEF）来解决此问题？任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T22:28:39.673

要解决此问题，您可以使用属性注入。

首先，在 DI 容器中注册**ShipperOperations**、**Navigator**和**ShipperPresenter 。**

然后，在您的视图的 Page_Load 方法中，调用您选择的 DI 容器的 resolve 方法。

```
public class ShipperPresenter
{
        IShipper shipperView;
        IShipperOperations operations;
        INavigator navigator;
        public ShipperPresenter(IShipperOperations operations,INavigator navigator)
        {
            this.operations = operations;
            this.navigator = navigator;
        }

        public IShipper ShipperView
        {
            get { return shipperView; }
            set { shipperView = value; }
        }
        ...
} 
```

视图看起来像这样：

```
public partial class ShipperView : System.Web.UI.Page, IShipperView
{
       ShipperPresenter presenter;

       protected void Page_Load(object sender, EventArgs e)
       {
           presenter = YourIOC.Resolve<ShipperPresenter>();
           presenter.ShipperView = this;
       }
       ...
} 
```

您还可以使用工厂在运行时创建演示者，同时将您选择的参数传递给它。事实上，在 DI 世界中，当您想要实例化具有仅在运行时才知道的依赖关系的对象时，这是继续进行的方法。在 Castle Windsor 中有一个很好的机制，它被称为[类型化工厂](http://stw.castleproject.org/Default.aspx?Page=Typed-Factory-Facility-interface-based-factories&NS=Windsor&AspxAutoDetectCookieSupport=1)。

使用工厂，无需修改演示者类。相反，为工厂创建一个接口：

```
public interface IShipperPresenterFactory
{
    ShipperPresenter Create(IShipper shipperView);
} 
```

如果使用 Windsor，您唯一需要做的就是将此接口注册为类型化工厂。对于其他 DI 容器，您必须实现一个在内部使用 DI 容器来解析演示者的类。

视图的 Page_Load 方法会像这样使用工厂：

```
protected void Page_Load(object sender, EventArgs e)
{
    var factory = YourIOC.Resolve<IShipperPresenterFactory>();
    presenter = factory.Create(this);
} 
```

# ajax - 在 django 中使用 dajax

> ID：10865698
> 
> 赞同：0
> 
> 时间：2012-06-02T20:27:07.383
> 
> 标签：ajax, django, python, dajaxice

我发布这个问题不是因为我遇到了一些错误，而是因为我想知道应该如何使用 dajax

这是我想做的事情：

我想要我的主页上的一些链接（例如书籍，作者），当用户点击它们时，他会得到书籍/作者的列表。

这是我正在做的事情：

当用户点击书籍时，我调用了一个 dajax 进程。ajax.py 内部：

*   我得到所有的书使用`books = Book.objects.all()`
*   我有一个`template = "{% for book in books %}"... blah blah blah`
*   我渲染模板`a = Template(template).render(Context(locals()))`
*   我做 dajax 分配一个作为一些 div 标签的 innerhtml。

这是做事的正确方法吗？我应该从一些 xyz.html 打开模板然后渲染它，而不是在 ajax.py 中编写模板？还有其他好的、干净的方法来完成类似的任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:44:00.650

我以前从未听说`dajax`过（但由于最近的提交大约有 10 个月大，因此该项目似乎已经变得非常不活跃），所以我将提供与`dajax`.

基本上，您需要做的是显示使用 AJAX 检索的列表。使用以下工具非常简单：

*   jQuery（或其他 JS 框架）
*   JSON

你需要做的是：

1.  配置您的一个视图，使其返回书籍列表（[在此处查找文档](https://docs.djangoproject.com/en/dev/topics/serialization/)）
2.  使用您选择的 JS 框架访问此视图（`jQuery.get()`对于 jQUery）
3.  使用您的 JS 框架，通过添加您通过 get 调用检索到的内容来更新您的页面上的某些内容（并且您可以将其放置在您要显示的某个覆盖层中）`<ul>`。`<ol>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:38:34.437

从专用模板文件加载模板几乎在任何情况下都更干净。一个带有 HTML 的长 python 字符串不是很可读。

当然，您也可以通过发送您的书籍`add_data(data,callback_function)`并编写一个填充列表的 javascript 回调函数，这将是 Thomas Orozco 提出的 Dajax 方式。

但是从渲染模板文件并将其发送到的[分页示例](http://www.dajaxproject.com/pagination/)`innerHTML`来看，这是“正确的方式”。

# c# - 构造函数链接优先级

> ID：10865707
> 
> 赞同：2
> 
> 时间：2012-06-02T20:28:22.377
> 
> 标签：c#, constructor, constructor-chaining

说我有这门课：

```
class FooBar
{
    public FooBar() : this(0x666f6f, 0x626172)
    {
    }

    public FooBar(int foo, int bar)
    {
        ...
    }
 ...
} 
```

如果我这样做：

```
FooBar foobar = new FooBar(); 
```

非参数化的构造函数会先执行，然后是参数化的构造函数，还是相反？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:40:30.993

[MSDN](http://msdn.microsoft.com/en-us/library/ms173115.aspx)有一个类似的例子`base`：

```
public class Manager : Employee
{
    public Manager(int annualSalary)
        : base(annualSalary)
    {
        //Add further instructions here.
    }
} 
```

并指出：

> 在此示例中，基类的构造函数在构造函数块执行之前被调用。

不过，为了确保这是我的测试：

```
class Program
{
    public Program() : this(0)
    {
        Console.WriteLine("first");
    }

    public Program(int i)
    {
        Console.WriteLine("second");
    }

    static void Main(string[] args)
    {
        Program p = new Program();
    }
} 
```

印刷

```
second
first 
```

所以参数化的构造函数在显式调用的构造函数之前执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T20:37:17.470

控件将首先到达默认构造函数。当我们从那里调用参数化构造函数时，默认构造函数中的语句的执行将停止，控件将移至参数化构造函数。一旦参数化构造函数中的语句执行完成，控件将移回默认构造函数。

您可以通过在默认构造函数处放置一个断点来验证它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T20:38:55.173

不知道这是否被记录为“定义的行为”，但`TestClass(int)`先执行然后`TestClass()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-09T16:34:22.390

*调用构造函数的顺序与构造函数是默认*还是*非默认（参数化）*无关，而是由链接关系确定。

详细来说，每一个跟在关键字后面的构造函数`this`都会暂停，程序会跳转到关键字指向的构造函数`this`。当到达最后一个链式构造函数时，它的代码就会运行。然后程序运行链中的前一个构造函数，这将一直回到第一个构造函数。

一个例子可以澄清这一点。

假设在一个类中有 3 个构造函数，如下所示：

```
public class Test
{
    // ctor #1
    public Test() : this(5) // this jumps to the ctor #2
    {
        Console.WriteLine("no params");
    }

    // ctor #2
    public Test(int i) : this("Hi") // this jumps to the ctor #3
    {
        Console.WriteLine("integer=" + i.ToString());
    }

    // ctor #3
    public Test(string str) // this ctor will be run first
    {
        Console.WriteLine("string=" + str);
    }
} 
```

如果使用 调用默认构造函数`var t = new Test()`，您将看到以下输出：

```
// string=Hi    -> ctor #3
// integer=5    -> ctor #2
// no params    -> ctor #1 
```

# php - 对 ClickandBuy 的简单 PHP SOAP 请求？

> ID：10865712
> 
> 赞同：1
> 
> 时间：2012-06-02T20:29:42.483
> 
> 标签：php, soap, payment

ClickandBuy 提供了很多示例，但它们的代码很差而且陈旧。所以我认为应该有一个简单的 PHP 5 SOAP 解决方案，用于在 SoapClient 类中构建 PHP5 的简单 SOAP payRequest。

```
$client = new SoapClient('https://api.clickandbuy.com/webservices/pay_1_1_0.wsdl', array('encoding' => 'UTF-8'));
$client->payRequest(array('authentication'=>array(...), 'details'=>array(...))); 
```

工作，但它返回一个错误：

*SOAP-ERROR：编码：对象没有“描述”属性*

payRequest 方法的参数应该没问题。有没有人尝试在没有 NuSOAP 的情况下实现 ClickandBuy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:50:41.320

尝试将 description 属性添加到 details 数组中：

```
 $client->payRequest(array('authentication'=>array(...), 
    'details' => array(
      'description' => 'paying for shoes'
    )
)); 
```

样品要求：

```
 <?xml version="1.0" encoding="UTF-8"?> 
  <payRequest_Request xmlns="http://api.clickandbuy.com/webservices/pay_1_1_0/">
    <authentication>
       <merchantID>4000</merchantID>
       <projectID>1</projectID>
       <token>20100623104511::9E9C3E21FE38851B8913469F13619BD645BA1DD6</token> 
    </authentication>
    <details>
      <amount>
        <amount>1</amount> 
        <currency>EUR</currency>  
      </amount>
      <orderDetails>
         <text>My Cart</text>
      </orderDetails> 
      <successURL>http://www.mydomain.com/success.php</successURL>
      <failureURL>http://www.mydomain.com/failure.php</failureURL>
      <externalID>Test123</externalID>  
    </details> 
 </payRequest_Request> 
```

# javascript - 标记图像['大小']

> ID：10865716
> 
> 赞同：0
> 
> 时间：2012-06-02T20:30:16.610
> 
> 标签：javascript, ruby-on-rails-3, google-maps, google-maps-api-3, google-maps-markers

有`MarkerImage`画上的`StreetViewPanorama`。每个显示的比例各`MarkerImage`不相同。因此，`MarkerImage`预计每个的大小会有所不同。但是，为每个描述`marker.getIcon()['size']`的返回相同的值。`MarkerImage`关于差异根源的任何想法？

[![](../Images/605d8e2c879be9597c2f99232bfb6b42.png)](https://i.stack.imgur.com/gfaOd.jpg) [![](../Images/b9e28a792d25f9ba6fadbd2607d7ab50.png)](https://i.stack.imgur.com/gCwMa.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:40:50.803

是`MarkerImage.size`指底层图像的实际大小（或者在精灵的情况下，图像部分的大小）。街景全景图扭曲`MarkerImage`以显示深度。MarkerImage的`size`属性与这种失真无关。因此，MarkerImage 对象应始终报告相同的大小。

据我所知，没有办法通过 API 获取当前显示的标记大小。

# javascript - CSS/JavaScript 中的多列垂直滚动

> ID：10865717
> 
> 赞同：9
> 
> 时间：2012-06-02T20:30:19.573
> 
> 标签：javascript, html, css

目前，有没有办法在 CSS 或 CSS 中使用 JavaScript 进行多列滚动？

为了描述我的意思，我在 jsfiddle 上设置了一个快速演示：

[http://jsfiddle.net/S7AGp/](http://jsfiddle.net/S7AGp/)

当 div 中的文本太多时，我希望能够垂直滚动，新文本从最右边一列的底部出现，旧文本从最左边一列上方退出 - 基本上，就像一个文本 -区域，除了两列。

相反，它会创建额外的列，您必须水平滚动。

虽然我可以尝试将每一行文本存储在一个数组中，然后在滚动时更改它，但我很好奇是否已经有一种方法可以在纯 CSS 中执行此操作，或者是否已经存在通过 JavaScript 的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T16:35:13.020

带有垂直滚动的 CSS 列。

[http://jsfiddle.net/MmLQL/3/](http://jsfiddle.net/MmLQL/3/)

HTML

```
 <div runat="server" id="div_scroll">
       <div runat="server" id="div_columns">
          <p> Some text ...</p>
       </div>
    </div> 
```

CSS

```
 #div_scroll {
    overflow-y: scroll;
    overflow-x: hidden;
    width: 1060px; /*modify to suit*/
    height: 340px; /*modify to suit*/
    }

    #div_columns
    {
    direction:ltr; /*column direction ltr or rtl - modify to suit*/
    columns: 3; /*number of columns - modify to suit*/
    overflow-y: hidden;
    overflow-x: hidden;
    width: 1000px; /*width of columns div has to be specified - modify to suit*/
    /* do not specify height parameter as it has to be unrestricted*/
    padding: 20px;  
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:46:49.270

我想您是在询问诸如 css 区域之类的问题：http: [//net.tutsplus.com/tutorials/html-css-techniques/diving-into-css-regions/](http://net.tutsplus.com/tutorials/html-css-techniques/diving-into-css-regions/)

**HTML：**

```
<p class="example-text">"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."</p>

<div class="regions"></div>
<div class="regions"></div> 
```

**CSS：**

```
.example-text {
  -webkit-flow-into: example-text-flow;
  padding: 0;
  margin: 0;
}

.regions {
   -webkit-flow-from: example-text-flow;
   border: 1px solid black;
   padding: 2px;
   margin: 5px;
   width: 200px;
   height: 50px;
} 
```

他们现在支持仅限于 webkit： [http ://caniuse.com/css-regions](http://caniuse.com/css-regions)

不幸的是，我不知道有任何后备或替代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T21:59:46.480

不好：
使用绝对定位快速尝试：http: [//jsfiddle.net/PhilippeVay/S7AGp/1/](http://jsfiddle.net/PhilippeVay/S7AGp/1/)，其想法是使用`bottom: 0;`将文本底部定位在容器底部。

它不起作用，因为绝对定位会从流中删除其内容，并且容器中没有任何内容（例如，您不会使用滚动条 afaik 移动绝对定位的元素）。

好：
所以这是一个**[使用 scrollTop() 的解决方案](http://jsfiddle.net/PhilippeVay/S7AGp/3/)**。

注意：我使用了 jQuery，但如果您在项目的其他地方不使用 jQuery 或其他框架，那么这个应该在 JS 中

# c# - 在 XNA 中应用模型变换后检索模型位置

> ID：10865722
> 
> 赞同：3
> 
> 时间：2012-06-02T20:31:21.240
> 
> 标签：c#, model, matrix, xna, position

对于 goBeyond XNA 教程提供的这种方法，位于[此处](http://msdn.microsoft.com/en-us/library/bb203897%28v=xnagamestudio.31%29.aspx)，如果我可以在将所有变换应用于网格之后检索模型正在绘制的新位置，那将非常方便。我已经根据需要对方法进行了一些编辑。有谁知道我可以做到这一点的方法吗？

```
 public void DrawModel( Camera camera )
    {
        Matrix scaleY = Matrix.CreateScale(new Vector3(1, 2, 1));
        Matrix temp = Matrix.CreateScale(100f) * scaleY * rotationMatrix * translationMatrix * Matrix.CreateRotationY(MathHelper.Pi / 6) * translationMatrix2;
        Matrix[] modelTransforms = new Matrix[model.Bones.Count];
        model.CopyAbsoluteBoneTransformsTo(modelTransforms);
        if (camera.getDistanceFromPlayer(position+position1) > 3000) return;
        foreach (ModelMesh mesh in model.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                effect.EnableDefaultLighting();
                effect.World = modelTransforms[mesh.ParentBone.Index] * temp *  worldMatrix;
                effect.View = camera.viewMatrix;
                effect.Projection = camera.projectionMatrix;
            }
            mesh.Draw();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:42:04.903

使用[Vector3.Transform](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector3.transform)方法将矩阵应用于您的位置向量。

# android - Android中的相对布局

> ID：10865723
> 
> 赞同：2
> 
> 时间：2012-06-02T20:31:22.033
> 
> 标签：android, android-layout, android-xml

我的主要文件中有这个 XMl...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="4px" >

    <include
        android:id="@+id/search"
        layout="@layout/search" />

    <ListView
        android:id="@+id/wordList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/search"
        android:layout_centerHorizontal="true" >

    </ListView>

</RelativeLayout> 
```

我的问题是我的 ListView 没有出现在 android:id="@+id/search" 下面...所以我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:37:16.607

采用

```
android:layout_below="@id/search" 
```

`+`那里不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:00:04.983

另一个假设：包含的布局可能有 height="match_parent" 以便 ListView 没有任何剩余空间......

# java - String 的 replaceAll() 方法和转义字符

> ID：10865724
> 
> 赞同：24
> 
> 时间：2012-06-02T20:31:29.660
> 
> 标签：java, regex, string

线

```
System.out.println("\\"); 
```

打印一个反斜杠 ( `\`)。和

```
System.out.println("\\\\"); 
```

打印双反斜杠 ( `\\`)。明白了！

但是为什么在下面的代码中：

```
class ReplaceTest
{
    public static void main(String[] args)
    {
        String s = "hello.world";
        s = s.replaceAll("\\.", "\\\\");
        System.out.println(s);
    }
} 
```

是输出：

```
hello\world 
```

代替

```
hello\\world 
```

毕竟，该`replaceAll()`方法是将点 ( `\\.`) 替换为 ( `\\\\`)。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-02T20:38:00.937

使用正则表达式替换字符时，您可以使用反向引用，例如`\1`在匹配项中使用分组替换 a。

然而，这意味着反斜杠是一个特殊字符，所以如果你真的想使用反斜杠，它需要被转义。

这意味着在 Java 字符串中使用它时实际上需要对其进行两次转义。（首先是字符串解析器，然后是正则表达式解析器。）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-02T20:38:38.683

[replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)的 javadoc说：

> 请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；请参阅 Matcher.replaceAll。**如果需要，使用 Matcher.quoteReplacement(java.lang.String)**来抑制这些字符的特殊含义。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-30T04:04:07.580

如果您不需要正则表达式进行替换而只需要替换确切的字符串，请在替换之前转义正则表达式控制字符

```
String trickyString = "$Ha!I'm tricky|.|";
String safeToUseInReplaceAllString = Pattern.quote(trickyString); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-02T10:20:52.690

这是我评论的格式化附录

```
s = s.replaceAll("\\.", Matcher.quoteReplacement("\\")); 
```

比

```
s = s.replaceAll("\\.", "\\\\\\"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T20:49:08.017

反斜杠是 Java 字符串中的转义字符。例如，反斜杠在 Java 中具有预定义的含义。您必须使用“\ \”来定义单个反斜杠。如果你想定义“\w”，那么你必须在你的正则表达式中使用“\\w”。如果你想使用反斜杠作为文字，你必须输入 \ \ \ \ 因为 \ 也是正则表达式中的转义字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-13T00:50:43.087

我相信在这种特殊情况下，使用替换而不是全部替换会更容易。当 Gonzo 牧师谈到逃离角色时，他有正确的答案。

使用全部替换：

```
s = s.replaceAll("\\.", "\\\\\\\\"); 
```

使用替换：

```
s = s.replaceAll(".", "\\"); 
```

replace 只需要一个字符串来匹配，而不是正则表达式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-21T17:47:41.257

我不喜欢这种正则表达式的实现。我们应该能够使用单个 '\' 而不是 '\' 来转义字符。但无论如何，如果你想得到 THIS.Out_Of_That 你可以这样做：

```
String prefix = role.replaceFirst("(\\.).*", ""); 
```

所以你得到前缀 = THIS;

# php - Facebook Like 没有显示正确的图像

> ID：10865736
> 
> 赞同：0
> 
> 时间：2012-06-02T20:33:57.013
> 
> 标签：php, facebook, facebook-like

我正在使用 php 并显示存储在 mysql db 中的拇指和记录行。

我还有一个 Like 按钮，用户点击它，它就会出现在用户的 Facebook 墙上。

文本和链接显示正确，但缩略图始终是第一条记录中的缩略图。

如何让 facebook 在 facebook 墙上显示正确的拇指？

这是我正在使用的代码：

```
echo '<li>'; 
echo '<div class="thumb"><a href="inner.php?id='.$db_field['id'].'&title='.$db_field['title'].'&views='.$db_field['views'].'"><img src="images/thumbnails/'.$db_field['image'].'" alt="" /></a></div>';

echo '<div class="text_lvl_1">'.$db_field['title'].'</div>';

echo '<div class="facebook_buttons">';
echo '<fb:like href="http://www.mydomain.com/inner.php?id='.$db_field['id'].'" send="true" align="middle" layout="button_count" width="135px" show_faces="false"></fb:like>';
echo '</div>';
echo '</li>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:27:23.460

每张图片都有单独的页面吗？在每个页面上，在打开的图形标签中显示该页面的图像。

如果您有一页有多个图像，则无法每次都选择不同的图像。这是因为打开的图标签是在JS之前渲染的（所以如果你用JS来操作，你不能。）

您可以使用 Facebook linter 工具对此进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:49:07.997

所以你`inner.php?id=123`实际上是显示单个图像的页面？您是否在这些页面中放置了任何代码来告诉 facebook 图像地址是什么，例如带有`rel="image_src"`或 Open Graph 元元素的链接元素？

# jquery-mobile - JQuery Mobile - 具有本机后退按钮支持的常量 url

> ID：10865742
> 
> 赞同：1
> 
> 时间：2012-06-02T20:34:50.733
> 
> 标签：jquery-mobile

我正在开发一个具有多个页面的 JQM 应用程序，其中大部分可以根据它们需要显示的数据自动生成。

我正在使用 ajax 调用来引入 json 和 mustache 来生成 html。到目前为止，一切都很好。

我想避免每次转换都更改 url，因为这不仅会干扰“应用程序”的概念，而且如果用户刷新“子”页面，也会造成不小的破坏。

所以我直接使用 $.mobile.changePage 处理所有页面转换，这允许我将 changeHash 设置为 false。

问题是当用户点击浏览器后退按钮时，他们会被带出应用程序。

有没有办法在浏览器栏中保持不变的 url 并且仍然支持本机后退按钮？

# c++ - C++ Winsock2 以字节顺序发送整数

> ID：10865745
> 
> 赞同：0
> 
> 时间：2012-06-02T20:35:07.957
> 
> 标签：c++, sockets

我一直在寻找一种使用 Winsock2 通过 Windows 套接字发送整数的方法。我已经查看了人们在 stackoverflow 上提出的大多数问题，如果不是全部的话。

这是我为客户端发送的整数：

```
struct struct_var
{
    int Packet;
    int Number;
};

struct_var *arraystruct;

arraystruct = (struct_var *) malloc(sizeof(struct_var));
(*arraystruct).Packet = 100;
(*arraystruct).Number = 150;
int bytes = send(client,(char*)arraystruct,sizeof(*arraystruct),0);` 
```

我也尝试使用以下方式发送：

```
int int_data = 4;
int bytes = send(server, (char*) &int_data, sizeof(int), 0);` 
```

这是在另一个stackoverflow问题上推荐的 这是接收方，也被推荐：

```
int int_data;
int bytes = recv(server, (char*) &int_data, sizeof(int), 0);
cout << int_data;` 
```

当我运行这些时，我从命令行得到的输出是：`-858993460`

有谁知道为什么会这样？

我还希望它具有正确的字节顺序，因为这将通过多种计算机发送。提前感谢谁能帮助我

完整的服务器代码：

```
int main() {
WSADATA wsaData;
WORD version;
int error;

version = MAKEWORD(2, 0);

error = WSAStartup(version, &wsaData);

if ( error != 0 )
{
    return FALSE;
}

if ( LOBYTE( wsaData.wVersion ) != 2 ||
     HIBYTE( wsaData.wVersion ) != 0 )
{
    WSACleanup();
    return FALSE;
}

SOCKET server;

server = socket(AF_INET, SOCK_STREAM, 0);

sockaddr_in sin;

sin.sin_family = AF_INET;
sin.sin_addr.s_addr = INADDR_ANY;
sin.sin_port = htons(5555);

if (bind( server, (SOCKADDR*)&sin, sizeof(sin) ) == SOCKET_ERROR ){
    DWORD ec=WSAGetLastError();
    cerr << hex << "bind ERROR" << ec << endl;
    return FALSE;
}

if ( listen( server, SOMAXCONN ) == SOCKET_ERROR ) {
    DWORD ec=WSAGetLastError();
    cerr << hex << "listen ERROR" << ec << endl;
    return FALSE;
}

SOCKET client;
int length;

    while(1) {

    if ( listen( server, SOMAXCONN ) == SOCKET_ERROR ) {
    DWORD ec=WSAGetLastError();
    cerr << hex << "listen ERROR" << ec << endl;
    return FALSE;
    }

    length = sizeof sin;
    client = accept( server, (SOCKADDR*)&sin, &length );
    cout << "Client connected" << endl;
    cout << "Sending Instructions..." << endl;

    int int_data;
    int bytes;

    bytes = recv(client, (char*) &int_data, sizeof(int), 0);

    cout << int_data << endl;
} 
```

}

}

完整的客户代码：

```
int main() {

WSADATA wsaData;
WORD version;
int error;

version = MAKEWORD(2, 0);

error = WSAStartup(version, &wsaData);

if ( error != 0 )
{
    return FALSE;
}

if ( LOBYTE( wsaData.wVersion ) != 2 ||
     HIBYTE( wsaData.wVersion ) != 0 )
{
    WSACleanup();
    return FALSE;
}

SOCKET client;

client = socket( AF_INET, SOCK_STREAM, 0 );

sockaddr_in sin;

memset( &sin, 0, sizeof sin );

sin.sin_family = AF_INET;
sin.sin_addr.s_addr = inet_addr("127.0.0.1");
sin.sin_port = htons(5555);

if ( connect(client, (SOCKADDR*)(&sin), sizeof sin ) == SOCKET_ERROR ){
    return FALSE;
}

int int_data = 4;
    int bytes = send(client, (char*) &int_data, sizeof(int), 0); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:47:11.377

这是问题所在：

```
int bytes = recv(server, (char*) &int_data, sizeof(int), 0); 
```

应该：

```
int bytes = recv(client, (char*) &int_data, sizeof(int), MSG_WAITALL); 
```

其他一些挑剔的事情，不会导致您的问题，但您应该知道：

1.  不要将您的服务器套接字绑定到 10.0.0.5。绑定到 0 (INADDR_ANY)。这样，当您在 IP 地址为 10.0.0.6 的机器上运行代码时，您的代码仍然可以工作。

2.  使用 htonl()、htons()、ntohs() 和 ntohl() 与大端框进行互操作。

3.  始终检查套接字调用的返回值。如果 recv 返回 0 或 -1，则表示远程端已断开连接。（从技术上讲，0 意味着客户端已停止发送，但除非您正在关闭半关闭的东西，否则这意味着他已断开连接）。

4.  TCP 套接字不是面向消息的，它们是面向流的。也就是说，仅仅因为您告诉 recv() 获取 N 个字节，并不意味着它将返回 N 个字节。IP 分段、TCP 分段和其他因素可以使 recv() 返回部分数据。根据需要使用 MSG_WAITALL 标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T22:52:38.093

你自己让这几乎是不可能的。与其从代码开始，不如从协议规范开始。您可以查看使用 TCP 的现有协议（例如 HTTP、IMAP 等）的规范，以了解协议规范应包含哪些内容。

*协议规范应该解释在字节*级别发送或接收的所有内容。它应该解释连接是如何建立和拆除的。它应该解释如何从任一端检测到死连接。如果协议有应用层消息，它应该解释它们是如何分隔的以及接收者如何找到消息的结尾。它应该指定谁在何时传输。

然后，调试很容易。遵循此流程图：

1）服务器是否遵循规范？如果没有，服务器坏了。

2) 客户是否遵循规范？如果没有，则客户端已损坏。

3) 如果还是不行，说明规范有问题。

这样可以确保服务器和客户端一起工作。如果他们不这样做，就可以知道哪一侧需要修复。

制定一个协议规范只需要一两个小时，我向您保证，节省的时间将是非常值得的。只需要一次，当某件事不起作用时，您更改了错误的结尾（然后发现很多东西都是新损坏的，因为您修复了其中一个正确的地方）来支付所花费的时间。另外，作为奖励，可以进行其他实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T02:23:55.867

我也被这个问题困住了，我注意到我的客户甚至没有连接。

尝试保存 connect() 和 recv() 返回的值，确保其 > -1 或打印出一些错误。

# c - 大整数程序。X 次乘法后停止

> ID：10865749
> 
> 赞同：1
> 
> 时间：2012-06-02T20:35:39.680
> 
> 标签：c, memory, integer, multiplication

我在 C 中制作了一个大整数乘法器，没有任何其他来源，例如 GMP。它可以将一个 10,000 位的整数乘以另一个。我遇到的问题是在一定数量的乘法之后（对我来说，它是在大约 3 次大乘法或 25 次小和 3 次大之后）我的程序冻结了。它使用大约 1.8 GB 的 RAM，然后停止。我不太确定是什么原因造成的，我知道不同的数字有相同的结果。谢谢你的帮助。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    #define MAX 10001

    struct integer {
    int* digits;
    int size;
    };

    struct integer* add(struct integer* one, struct integer *two);
    void print(struct integer* number);
    void print_op(struct integer* op1, struct integer* op2,struct integer* tempwer,char op);
    struct integer* convert_integer(char* word);
    void free_struct(struct integer* thisint);
    struct integer* multiply(struct integer *p, struct integer *q);

    int main() {

    FILE* ifp = fopen("bigint.txt", "r");

    int loop, numcases;
    fscanf(ifp, "%d", &numcases);

    // Go through each case.
    for (loop=1; loop<=numcases; loop++) {

        // Read in both operands.
        char op1[MAX];
        char op2[MAX];
        fscanf(ifp, "%s%s", op1, op2);

        // Convert and compute.
        struct integer* first = convert_integer(op1);
        struct integer* second = convert_integer(op2);
        struct integer* ans = multiply(first, second);

        printf("Problem #%d: ", loop);
        print_op(first, second, ans, '*');
        printf("\n");

        // After we output, we don't need these any more.
        free_struct(first);
        free_struct(second);
        free_struct(ans);

    }

    return 0;
}

// Pre-conditions: Both one and two are not NULL pointers that point to
//                 linked lists structures that store non-negative digits
//                 at each node.
// Post-conditions: A pointer to a linked list will be returned. The
//                  linked list will store the value of the sum of the
//                  two integers represented by the linked lists passed
//                  into the function.
struct integer* add(struct integer* one, struct integer *two) {

    struct integer *ans;
    int digit1 = 0, digit2 = 0, carry = 0, result, i;

    ans = (struct integer *)malloc(sizeof(struct integer));

    //allocate space for the larger of the 2 arrays
    if(one->size>two->size)
        ans->size=one->size;
    else
        ans->size=two->size;

    ans->digits=(int*)(malloc(sizeof(int)*ans->size));

    for(i=0;i<ans->size;i++){
        // Determine digit to add from first operand.
        if (i<one -> size)
            digit1 = one -> digits[i];
        else
            digit1 = 0;

        // Determine digit to add from second operand.
        if (i<two -> size)
            digit2 = two -> digits[i];
        else
            digit2 = 0;

        // Compute correct addition digit and carry.
        result = (digit1 + digit2 + carry)%10;
        carry = (digit1 + digit2 + carry)/10;

        // Store result in the appropriate linked list.
        ans -> digits[i] = result;

    }//for

    // Take care of the most significant digit if there is a carry.
    if (carry != 0) {

        //copy off the whole array into a new one
        //of size+1 and free the old one in case of carry
        ans->size+=1;
        ans->digits = (int *)realloc(ans->digits, sizeof(int)*ans->size);
        ans->digits[ans->size-1] = carry;
    }

    // Return the ptr. to the added result.
    return ans;
}

// Precondition: number points to a not NULL linked list that contains
//               only single digits stored at each node.
// Postcondition: The integer represented by the linked list pointed to by
//                number will be printed out.
void print(struct integer* number) {

    int i;
    if (number != NULL) {

        // Loop through in backwards order, since number is stored reversed.
        for(i=number->size-1;i>=0;i--){
            printf("%d",number->digits[i]);
        }
    }

}

// Precondition: op1 and op2 point to valid linked lists storing integers,
//               operator is a valid integer operator, and tempwer is the
//               value of applying the first operation to the second.
// Postcondition: The arithmetic operation desired (op1 operator op2) will
//                be printed to the screen in a reasonable manner.
void print_op(struct integer* op1, struct integer* op2,struct integer* tempwer,char op) {

    print(op1);
    printf(" %c ", op);
    print(op2);
    printf(" = ");
    print(tempwer);

}

//Preconditions: the first parameter is a pointer to a
//  pointer variable that points to
//  struct integer. The function skips leading
//  blanks and assumes that no leading zeros are
//  entered at the input.
//Postconditions: The function will read the digits of the
//  large integer character by character,
//  convert them into integers and place them in
//  nodes of a linked list. The pointer to the
//  head of the list is returned as the value of
//  the input parameter.
struct integer* convert_integer(char* word) {

    int i;

    struct integer *ans=(struct integer *)(malloc(sizeof(struct integer)));
    ans->size=0;
    if(word==NULL) ans->digits=NULL;

    else {

        // Allocate space for each of the digits.
        ans->size = strlen(word);
        ans->digits=(int *)(malloc(sizeof(int)*ans->size));

        // Store them in reverse order.
        for(i=0;i< ans->size;i++)
            ans->digits[ans->size-i-1]=word[i] - '0';

    }//if word not NULL

    return ans;
}

//Preconditions: p and q are pointers to struct integers.
//Postconditions: A new struct integer is created that
//                stores the product of the integers
//                pointed to by p and q and a pointer to it
//                is returned.
struct integer* multiply(struct integer *p, struct integer *q){

    struct integer *temp;
    struct integer *ans;

    int digit1 = 0, digit2 = 0, carry = 0, index=0, front=0, result, i, j, pos, preSize;

    temp = (struct integer *)calloc(sizeof(struct integer),1);
    ans = (struct integer *)calloc(sizeof(struct integer),1);

    //allocate space for the larger of the 2 arrays
    //Which ever array is larger will be the starting size of the tempwer array.
    if(q->size>p->size)
        temp->size = q->size;

    else
        temp->size = p->size;

    temp->digits=(int*)(calloc(sizeof(int)*temp->size,1));

    //use a double for loop, one for the top number and one for bottom.
    for(i=0; i<q->size; i++){

        //Make the starting size the size of the biggest number.
        if(q->size>p->size)
            temp->size = q->size;

        else
            temp->size = p->size;

        temp->digits=(int*)(calloc(sizeof(int)*temp->size,1));

        if (i < q->size)
            digit1 = q->digits[i];
        else
            digit1 = 0;

        //Bottom part of the multiplication.
        for(j=0; j<p->size; j++){

            // Determine digit to add from first operand.
            if (j < p->size)
                digit2 = p->digits[j];
            else
                digit2 = 0;

            // Compute correct multiplication digit and carry.
            //gives last digit
            result = (digit1 * digit2 + carry)%10;
            //drops last digit
            carry = (digit1 * digit2 + carry)/10;

            // Store result in the appropriate linked list.
            temp -> digits[j] = result;

        }

        //Add a zero to the end of the next number (like multiplying by hand).
        if(i>0){

            temp->size += i;
            temp->digits = (int *)(realloc(temp->digits, sizeof(int)*temp->size));

            for(j=temp->size; j>0; j--){

                if((j-1-i)<0)
                    break;
                //Shift everthing over by 1.
                else
                    temp->digits[j-1]=temp->digits[j-1-i];

            }
            //Make the new number zero.
            for(j=1; j<=i; j++)
                temp -> digits[j-1] = 0;

        }//if

        //If there is a carry insert it in front of the number.
        if (carry != 0) {

            temp->size += 1;
            temp->digits = (int *)(realloc(temp->digits, sizeof(int)*temp->size));
            temp->digits[temp->size-1]=0;

            //Find the front of the number.
            for(j=temp->size; j>0; j--){

                if(temp->digits[j-1] != 0){

                    front = j;
                    break;
                }
            }

            //Insert it.
            if(result == 0)
                temp->digits[front+1] = carry;
            else
                temp->digits[front] = carry;

            carry = 0;

        }//if

    //Delete any leading zeros.
    if(temp->size != 1){

        for(j=temp->size; j>0; j--){

            //Finds where the zeros end.
            if(temp->digits[j-1] != 0){
                pos =j;
                break;
            }

            //Counts the zeros.
            if(temp->digits[j-1] == 0)
                index++;

            }

        //If they are all zeros then make the temp number 0 of size 1.
        if(index==temp->size) {
            pos=1;
            temp->size = temp->size-(temp->size-pos);
            temp->digits = (int *)realloc(temp->digits, sizeof(int)*temp->size);
        }
        //If not then reallocate with the extra zeros removed.
        else{
            temp->size = temp->size-(temp->size-pos);
            temp->digits = (int *)realloc(temp->digits, sizeof(int)*temp->size);
        }

        index=0;

    }//if

        //If this is the first time saving the answer the allocate memory for it.
        if(i==0){
            ans->size = temp->size;
            ans->digits=(int*)(calloc(sizeof(int)*temp->size,1));
        }

        //Add the temp number to the total (ans).
        ans = add(temp, ans);

        //Clear temp.
        for(j=0; j<temp->size; j++)
            temp->digits[j]=0;

    }//for on top

    free_struct(temp);

    return ans;

}

    // Frees the memory for the struct pointed to by thisint.
    void free_struct(struct integer* thisint) {
    free(thisint->digits);
    free(thisint);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:21:28.987

在您的乘法方法的这一部分中：

```
 temp->digits=(int*)(calloc(sizeof(int)*temp->size,1));// <-- allocate some

    //use a double for loop, one for the top number and one for bottom.
    for(i=0; i<q->size; i++){

        //Make the starting size the size of the biggest number.
        if(q->size>p->size)
            temp->size = q->size;
        else
            temp->size = p->size;

        temp->digits=(int*)(calloc(sizeof(int)*temp->size,1)); // <--allocate again 
```

看起来您正在分配内存而不匹配除函数结束时释放的最后一个之外的释放。自从我使用 c 以来已经有很多年了，所以希望我没有错过一些明显的东西。

# cloud - 必填字段缺失错误

> ID：10865752
> 
> 赞同：0
> 
> 时间：2012-06-02T20:36:17.830
> 
> 标签：cloud, salesforce, apex-code

有人可以看看它。下面是代码和错误

```
global void execute(
Database.BatchableContext BC,
List<sObject> listObj){

    list <Account> inAcc = new list<Account>();
    for (sObject lo : listObj){
        Unprocessed_Agreement__c temp = (Unprocessed_Agreement__c)lo;
        inAcc.add(processor.processAccountRecord(temp));
        }
    insert(inAcc); // This line throws the error
    } 
```

处理器类看起来像这样

```
global class CreateAndModifyProcessor {
global Account processAccountRecord( Unprocessed_Agreement__c temp){
    Account tempAcc = new Account();
    tempAcc.Begining__c = temp.Begining__c;
    tempAcc.Agreement_ID__c = temp.Agreement_ID__c;
    return tempAcc; 
}
} 
```

第一个错误：插入失败。第 0 行的第一个异常；第一个错误：REQUIRED_FIELD_MISSING，缺少必填字段：[名称]：[名称]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T23:21:59.900

客户需要名称字段，因为它位于 Salesforce 中的几乎所有标准对象上。就像您无法通过没有名称的 ui 创建帐户一样，您无法通过设置 Name 字段来插入帐户记录而不给它们一个名称，如下所示：

```
Account acc = new Account();
acc.Name = 'Some Name';
database.insert(acc); 
```

# vb.net - 公共潜艇在这种情况下不起作用

> ID：10865753
> 
> 赞同：0
> 
> 时间：2012-06-02T20:36:30.613
> 
> 标签：vb.net

我有一个名为`FrmDrvouchers`. 它包含一些公共子过程。我从另一个表单中调用这些 subs，该表单从 FrmDrVouchers 作为对话框打开的表单打开。

当我直接打开 FrmDrvouchers 时，一切正常。但是，当我从另一个项目（也是该解决方案的一部分）调用 FrmDrvouchers 时，当我从另一个（对话框）表单调用它们时，它的公共子程序不起作用。

这是我打开 FrmDrvouchers 的按钮单击的代码：

```
Dim FrmDrv As FrmDrVouchers = New FrmDrVouchers()    
FrmDrv.Show() 
```

这行得通，但那些公共潜艇不行。为什么？

* * *

感谢您的回复，

它只是跳过我想做的事情，但不会引发任何异常，现在我正在发布我的代码，，，请看一下，，

这是我的主窗体的 MenuStrip 按钮单击代码：

```
 Private Sub CashPaymentToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CashPaymentToolStripMenuItem.Click
    Dim DrVouchers As Transactions.FrmDebitVouchers = Transactions.New FrmDebitVouchers()
    DrVouchers.Show()
End Sub 
```

* * *

这是不工作的 FrmDebitVouchers 的公共订阅，从某种意义上说，它们跳过了我编写的函数但没有抛出任何异常，

```
Public Sub DrVoucherOPen(ByVal VoucherNo As Integer)

    'Filling the Dataset with selected Voucher No to OPen the record
    DebitVouchersTableAdapter.FillByVoucher(Flr12131DataSet.DebitVouchers, VoucherNo)
    VoucherDateDateTimePicker.Enabled = False
End Sub

Public Sub DrVoucherBodyOPen(ByVal VoucherNo As Integer)

    '---------Procedure to Open DrVouchersBody And to OPen it in Datagridview-------------'
    'Getting the User No, and if it is admin then load fill dataset and allow user to edit the record
    If GetUserNumber() = 1 Then
        'Filling the dataset
        DebitVouchersBodyTableAdapter.FillByVoucher(Flr12131DataSet.DebitVouchersBody, VoucherNo)

        DrBodyDGV.DataSource = Nothing
        Dim Sum As New Decimal

        'Initializing the SerialNumbers variable
        SerialNumbers = New List(Of Integer)

        'Setting datagridview to opend record
        For i = 0 To Flr12131DataSet.DebitVouchersBody.Rows.Count - 1

            DrBodyDGV.Rows.Add()
            DrBodyDGV.Rows(i).Cells(0).Value = Flr12131DataSet.DebitVouchersBody.Rows(i).Item("SerialNo")
            DrBodyDGV.Rows(i).Cells(3).Value = Flr12131DataSet.DebitVouchersBody.Rows(i).Item("AccountNo")
            DrBodyDGV.Rows(i).Cells(6).Value = Flr12131DataSet.DebitVouchersBody.Rows(i).Item("Debit")
            DrBodyDGV.Rows(i).Cells(7).Value = Flr12131DataSet.DebitVouchersBody.Rows(i).Item("Narration")
            'Getting serial No into List
            SerialNumbers.Add(Flr12131DataSet.DebitVouchersBody.Rows(i).Item("SerialNo"))

            'Getting Account Name into Datagridview
            If Not Not IsNumeric(DrBodyDGV.Rows(i).Cells(3).Value) Then
                Dim Qa As New Flr12131DataSetTableAdapters.QueriesTableAdapter
                Dim StrAccountName = Qa.GetAccountName(DrBodyDGV.Rows(i).Cells(3).Value)
                DrBodyDGV.Rows(i).Cells(5).Value = StrAccountName

            Else
            End If

            Sum += DrBodyDGV.Rows(i).Cells(6).Value

        Next

        TxtTotal.Text = Sum

        'Setting the controls properties for admin

        DrBodyDGV.AllowUserToAddRows = True
        DrBodyDGV.AllowUserToDeleteRows = True

        DrBodyDGV.ReadOnly = False
        BtnSave.Enabled = True
        BtnDelete.Enabled = True
        BtnPrint.Enabled = True
        ToUpdate = True
    Else

        'If user is not admin then load all record and not allow user to modify it or delete
        ' Bounding the datagridview

        Dim Sum As Decimal = 0
        BtnSave.Enabled = False
        DebitVouchersBodyTableAdapter.FillByVoucher(Flr12131DataSet.DebitVouchersBody, VoucherNo)
        DrBodyDGV.DataSource = Flr12131DataSet.DebitVouchersBody

        For i = 0 To DrBodyDGV.Rows.Count - 1
            If Not Not IsNumeric(DrBodyDGV.Rows(i).Cells(3).Value) Then
                Dim Qa As New Flr12131DataSetTableAdapters.QueriesTableAdapter
                Dim StrAccountName = Qa.GetAccountName(DrBodyDGV.Rows(i).Cells(3).Value)
                DrBodyDGV.Rows(i).Cells(5).Value = StrAccountName
            Else
            End If

            Sum += DrBodyDGV.Rows(i).Cells(6).Value

        Next

        TxtTotal.Text = Sum

        DrBodyDGV.AllowUserToAddRows = False
        DrBodyDGV.AllowUserToDeleteRows = False
        ' DrBodyDGV.edit()
        DrBodyDGV.ReadOnly = True
        BtnSave.Enabled = False
        BtnDelete.Enabled = False
        BtnPrint.Enabled = True

    End If

End Sub 
```

* * *

这是另一个 DrVouchersRecord 表格，我将其称为 Public Subs：

```
Private Sub DrVouchersRecordDataGridView_CellDoubleClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DrVouchersRecordDataGridView.CellDoubleClick

Dim FrmDrVouchers As FrmDebitVouchers = New FrmDebitVouchers()

    If FrmDrVouchers.DrBodyDGV.Rows.Count > 1 Then

        Dim Ans As Integer
        Ans = MsgBox("Unsaved changes will be lost, want to proceed", vbYesNo + vbInformation, "Alert")
        If Ans = vbYes Then
            Dim VoucherNo As New Integer

            VoucherNo = DrVouchersRecordDataGridView.CurrentRow.Cells(0).Value

            FrmDrVouchers.DrVoucherOPen(VoucherNo)
            FrmDrVouchers.DrVoucherBodyOPen(VoucherNo)
            Me.Close()
        End If

    Else

        Dim VoucherNo As New Integer

        VoucherNo = DrVouchersRecordDataGridView.CurrentRow.Cells(0).Value

        FrmDrVouchers.DrVoucherOPen(VoucherNo)
        FrmDrVouchers.DrVoucherBodyOPen(VoucherNo)
        Me.Close()

    End If 
```

## 结束子

我的表格顺序是：

FrmMain 是我的主要启动形式

之后 FrmDebitVouchers 在 menustripButtonclick 上打开

之后 DebitVouchersRecord 作为对话框从 DrmDebitVouchers 中打开，并且从这些公共订阅中调用

我也添加了参考

等待你的答案，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:24:35.010

这个问题困扰着许多从 VB6 转向 VB.NET 的程序员。

在您的 DataGridView_DoubleCellClick 事件中，您创建一个**FrmDebitVouchers**的新实例。
然后你的代码引用这个新实例的属性/方法/对象，而不是通过 CashPaymentToolStripMenuItem_Click 创建的原始实例。（另请注意，这个新实例永远不会显示在屏幕上，因此您正在向隐藏的表单实例发送/请求更改）

当然，这个实例上的**DrBodyDGV.Rows.Count**为零（称为 FrmDrVouchers），因为可能这个实例从未像第一个实例那样初始化。

尝试在创建后添加一个 FrmDrVouchers.Show()，您将看到表单类 FrmDebitVouchers 的隐藏 SECOND INSTANCE。

要解决您的问题，您需要将第一个 FrmDebitVouchers 实例的引用传递给 DrVouchersRecord 表单（例如在构造函数中或通过公共属性），然后使用该引用而不是创建 FrmDrVouchers

# java - 如何使用共享资源与其他线程通信？

> ID：10865756
> 
> 赞同：0
> 
> 时间：2012-06-02T20:36:47.010
> 
> 标签：java, multithreading, oop

拍卖服务器接受客户端并为每个套接字连接创建一个新线程来服务客户端。每个线程都有它的协议。服务器只有一个拍卖对象实例。`Auction`object 保存对象列表`Lot`。`Auction`对象作为参数传递给客户端线程。`Protocol`必须有办法出价并以某种方式通知所有客户端线程。该`makeBid`方法存在于`Lot`并将投标放入投标列表中。下一步是通知所有客户端线程表单`makeBid`方法。这样做的最佳做法是什么？ ![在此处输入图像描述](../Images/faa1927dc87df655ebb8077a1bf25b3f.png)

我尝试在 Thread 中使用字段 (MSG) 来保存消息。线程检查是否`!MSG.isEmpty()`在`run()`. 如果`!MSG.isEmpty()`然后`ClientThread`打印到套接字 this `MSG`。我认为有更好的解决方案。

* * *

```
public class ClientServiceThread extends Thread  {
public String PRINT_NEW_MSG = "";
while (m_bRunThread) {

                if(!PRINT_NEW_MSG.isEmpty()){
                    out.println("PRINT_NEW_MSG: "+PRINT_NEW_MSG);
                    PRINT_NEW_MSG = "";
                String clientCommand = in.readLine();
                                 ...
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:04:15.850

更好的是，您可以使用此对象同步“makeBid”方法。然后调用 notifyAll 方法

在 makeBid 结束时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:50:11.250

`lotUpdated()`您可以创建一个订阅设计，该设计在客户对 Lot 出价时调用一个方法。每个`ClientThread`人都会订阅`Lots`它想要通知的内容。

```
public class Lot {
  private List<ClientThread> clients = new ArrayList<ClientThread>();
  private List<Integer> bids = new ArrayList<Integer>();

  public synchronized void subscribe(ClientThread t){
    clients.add(t);
  }

  public synchronized void unsubscribe(ClientThread t){
    clients.remove(t);
  }

  public synchronized void makeBid(int i){
    bids.add(i);
    for (ClientThread client : clients){
      client.lotUpdated(this);
    }
  }
}

public ClientThread {
  public void lotUpdated(Lot lot){
    //called when someone places a bid on a Lot that this client subscribed to
    out.println("Lot updated");
  }
} 
```

# c# - NHibernate：将现有对象与新对象相关联？

> ID：10865757
> 
> 赞同：4
> 
> 时间：2012-06-02T20:37:00.793
> 
> 标签：c#, nhibernate, nhibernate-mapping

显然我在搜索错误的关键字。

我有对象`Vendor`，并且`Invoice`在 NHibernate 项目中是这样的：

```
public class Vendor
{
    public string theName { get; set; }
}

public class Invoice
{
    public Vendor theVendor { get; set; }
    public decimal Amount { get; set; }
} 
```

我有一个带有 NH`VendorRepository`和`InvoiceRepository`存储库的 UnitOfWork 样式界面......这些似乎正在工作。

我可以毫不费力地创建一个供应商，有点像这样：

```
public void CreateVendor(string name)
{
    using (var u = new UnitOfWork())
    {
        var v = new Vendor();
        v.theName = name;
        u.Vendors.Add(v);
        u.Save();
    }
} 
```

`Invoice`但是，创建对象需要引用`Vendor`. 我认为这很简单：

```
public void CreateInvoice(decimal theAmount, string vendorName)
{
    using (var u = new UnitOfWork())
    {
        var i = new Invoice();
        i.Amount = theAmount;
        var v = u.Vendors.GetByName(vendorName);
        i.theVendor = v;
        u.Invoices.Add(i);
        u.Save();
    }
} 
```

然而，情况似乎并非如此。我需要为此做一些特殊的 NHibernate 巫术吗？我更愿意将 NHibernate 保留在 UnitOfWork 接口后面，但我想干净地将对象与最少的代码或混淆相关联。

**更新**每个请求：供应商的映射文件（删除了额外的东西）：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="DataModel"
                   namespace="DataModel">
    <class name="Vendor" table="Vendors">
        <id name="APVendorId">
            <generator class="guid" />
        </id>
        <property name="theName" index="ixVendorName" length="100" not-null="true" column="VendorName" />
    </class>
</hibernate-mapping> 
```

对于发票：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                    assembly="C3.DataModel"
                    namespace="C3.DataModel">
    <class name="Invoice" table="Invoices">
        <id name="InvoiceId">
            <generator class="guid" />
        </id>
        <one-to-one name="Vendor" class="Vendor" constrained="true" cascade="none" fetch="join" />
        <property name="theAmount" column="InvoiceAmount" not-null="true" />
    </class>
</hibernate-mapping> 
```

存储库代码类似于：

```
///<summary>
///Auto-generated NHibernate repository for the domain POCO object <strong>APInvoice</strong>
///</summary>
public partial class NHInvoiceRepository : IInvoiceRepository
{
    internal ISession _Session;
    internal ITransaction _Transaction;
    private bool _IndependentSession;

    ///<summary>
    ///Adds a Invoice object to the NHibernate repository.
    ///</summary>
    public void Add(Invoice invoice)
    {
        _Session.Save(invoice);
    }

    ///<summary>
    ///Instantiates the repository in standalone (no associated UnitOfWork) mode.  This should usually be avoided.
    ///</summary>
    internal NHInvoiceRepository()
    {
        _Session = NHibernateHelper.OpenSession();
        _Transaction = _Session.BeginTransaction();
        _IndependentSession = true;
    }

    ///<summary>
    ///Instantiates the repository as a part of a UnitOfWork pattern.
    ///</summary>
    public NHInvoiceRepository(ISession session, ITransaction transaction)
    {
        _Session = session;
        _Transaction = transaction;
        _IndependentSession = false;
    }

    ///<summary>
    ///Instantiates the repository as a part of a UnitOfWork pattern.
    ///</summary>
    public NHInvoiceRepository(ISession session)
    {
        _Session = session;
        _Transaction = _Session.BeginTransaction();
        _IndependentSession = false;
    }

    ///<summary>
    ///Implements the IDisposable interface.
    ///</summary>
    public void Dispose()
    {
        _Transaction.Dispose();
        _Session.Dispose();
        return;
    }

    ///<summary>
    ///Commits the changes in the repository in standalone (no associated UnitOfWork) mode.
    ///</summary>
    public void Save()
    {
        if (_IndependentSession)
        {
            _Transaction.Commit();
            _Transaction = _Session.BeginTransaction();
        }
    }

} 
```

UnitOfWork 代码如下所示：

```
///<summary>
///UnitOfWork Interface.  The primary data interface between the data model and the persistence layer.
///</summary>
public partial class NHUnitOfWork : IUnitOfWork
{
    private ISession _Session;
    private ITransaction _Transaction;
    public IVendorRepository Vendors { get; private set; }
    public IInvoiceRepository Invoices { get; private set; }

    public void Save()
    {
        Vendors.Save();
        Invoices.Save();
        _Transaction.Commit();
    }

    public void Dispose()
    {
        Vendors.Dispose();
        Invoices.Dispose();
        _Transaction.Dispose();
        _Session.Dispose();
    }

    public NHUnitOfWork()
    {
        _Session = NHibernateHelper.OpenSession();
        _Transaction = _Session.BeginTransaction();
        Vendors = new NHVendorRepository(_Session);
        Invoices = new NHInvoiceRepository(_Session);
    }
} 
```

我收到的错误消息是：

```
NHibernate.PropertyValueException: not-null property references a null or transient value 
```

我确实尝试在映射中将一对一更改为多对一，但没有不同的结果。

**第二次重新编译时更新**，（并重建数据库模式）此更改有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T21:31:18.773

`<one-to-one>`我总是在映射方面遇到麻烦。我建议搬到`<many-to-one unique="true">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T21:50:58.210

我认为问题出在这条线上

```
<one-to-one name="Vendor" class="Vendor" constrained="true" cascade="none" fetch="join" /> 
```

尝试将其替换为

```
<many-to-one name="Vendor" unique="true" cascade="all" fetch="join" /> 
```

# colors - 如何更改 Komodo IDE 配色方案的错误颜色

> ID：10865759
> 
> 赞同：6
> 
> 时间：2012-06-02T20:37:16.630
> 
> 标签：colors, komodo

我正在自定义配色方案，并且几乎所有内容都正常工作。除了命令输出选项卡以红色斜体字体显示错误外，我在任何地方都找不到颜色设置！在字体和颜色设置中，有“字体”、“颜色”、“通用语法”、“特定语言”和“指标”选项卡，带有下拉选择器。没有一个选项分配了红色斜体！默认字体为蓝底白字。我在哪里可以找到命令输出错误的颜色设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T23:18:16.023

好吧，没有人回答，我发现了一个有用的技巧。看起来，命令输出中确实没有用于错误文本颜色的 gui 菜单选项，但在 .ksf 文件中有设置。我手动更改了说

```
'Errors': {'Error lines': {'fore': 65535, 'hotspot': 1, 'italic': 0}}, 
```

其中'fore'是前景色，'italic'是斜体字体，是我想要的，它起作用了。我想，“热点”意味着它是可点击的，但我现在不确定/不在乎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T11:41:04.633

我知道这比原来的帖子有点晚了，但我在搜索这个问题时偶然发现了这个，它让我得到了关于在 GUI 中查看位置的提示。

在 Komodo 9.0+ 版本中

*   首选项 > 颜色方案
*   选择“特定语言”选项卡
*   选择“语言错误”（在其他下方）

元素类型错误行似乎反映了 STDERR

# javascript - 元素样式自动添加到滑块 div

> ID：10865764
> 
> 赞同：0
> 
> 时间：2012-06-02T20:38:03.237
> 
> 标签：javascript, image, slider

所以我的网站上有一个图像滑块。在源代码中，每个滑块的 div 都有一个类，但没有元素样式，但是当我播放图像滑块并通过 firefox 中的 firebug 插件以及 chrome 上的 firebug 替代品查看 div 时，有一个元素样式会自动添加到每个 div。我读过文章说图像滑块的 javascript 将为 php 代码添加样式，但我查看了 javascript 并没有发现任何内容。例如，元素样式“left:”被添加到每个滑块的 div 中，但我在 javascript 中找不到任何名为“left:”的属性。我不知道如何添加元素样式。有任何想法吗？我正在尝试将每个滑块中的图像居中，但我可以'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:56:23.877

在您的 css.file 中，将 !important 添加到您不想激活的每个给定样式。

```
.myElement
{
    left:  initial !important;
    right: initial !important;
} 
```

# c - 单元测试 zsh extendedglob 功能

> ID：10865767
> 
> 赞同：2
> 
> 时间：2012-06-02T20:38:09.293
> 
> 标签：c, unit-testing, makefile, zsh, glob

如何在 ac 程序中使用 z shell 提供的功能执行 glob？

到目前为止，我已经创建了我的探索的自述文件。它用于开源库。

[https://bitbucket.org/sentimental/zsh_source_experimentation/src/master/README](https://bitbucket.org/sentimental/zsh_source_experimentation/src/master/README)

我在这里复制它：

* * *

## 开始

让我们获取来源

```
apt-get source zsh
apt-get source zsh-dev 
```

我通过使用 ldd 发现 zsh 不会生成任何库文件::

```
#ldd /bin/zsh4

        linux-gate.so.1 =>  (0xb7775000)
        libcap.so.2 => /lib/i386-linux-gnu/libcap.so.2 (0xb7751000)
        libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0xb774c000)
        libtinfo.so.5 => /lib/i386-linux-gnu/libtinfo.so.5 (0xb772c000)
        libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0xb7700000)
        libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb755b000) 
```

我想我将不得不直接使用源文件。

让我们找到包含对扩展 globbling 的引用的文件（我使用 zsh 作为我的 shell）。::

```
grep -ir EXTENDEDGLOB . |  egrep "\.(c|h):"  | cut -d: -f1 | sort -u

./README
./zsh-4.3.17/Etc/ChangeLog-3.0
./zsh-4.3.17/Src/glob.c
./zsh-4.3.17/Src/Modules/zutil.c
./zsh-4.3.17/Src/options.c
./zsh-4.3.17/Src/pattern.c
./zsh-4.3.17/Src/utils.c
./zsh-4.3.17/Src/Zle/complist.c
./zsh-4.3.17/Src/Zle/zle_tricky.c
./zsh-4.3.17/Src/zsh.h 
```

## 让我们考虑其中的几个文件

```
zsh.h 
```

在这里 EXTENDEDGLOB 被定义为匿名枚举的一部分

有刊物

这里 [http://publications.gbdirect.co.uk/c_book/chapter6/enums.html](http://publications.gbdirect.co.uk/c_book/chapter6/enums.html)

在这里 [http://bytes.com/topic/c/answers/63891-enum-within-function-standard](http://bytes.com/topic/c/answers/63891-enum-within-function-standard)

详述枚举在c中的使用

它使用的一个例子可能是函数的方法参数......

```
 static int
    bin_zregexparse(char *nam, char **args, Options ops, UNUSED(int func)) 
```

在文件中找到
........

```
./zsh-4.3.17/Src/Modules/zutil.c 
```

让我们看看是什么调用了该函数。嗯只有一个电话。对该调用的唯一引用是在该文件中。

```
grep -r  bin_zregexparse . |  egrep "\.(c|h):"  | cut -d: -f1 | sort -u

./zsh-4.3.17/Src/Modules/zutil.c 
```

嗯....如果没有人调用这个函数，它是如何工作的？

好的，让我们看看是否有一些条件配置以某种方式设置或别名此代码？

```
 grep -i regex ./**/conf*

/zsh-4.3.17/config.h.in :/* Define to 1 if you have the `regexec' function. */
./zsh-4.3.17/config.h.in :#undef HAVE_REGEXEC
./zsh-4.3.17/config.h.in :/* Define to 1 if you have the `regexec' function. */
./zsh-4.3.17/config.h.in :#undef HAVE_REGEXEC
./zsh-4.3.17/configure :       regcomp regexecc regerror regfree \
./zsh-4.3.17/configure :       regcomp regexec regexecerror regfree \
./zsh-4.3.17/configure.ac :       regcomp regexec regerrorror regfree \ 
```

让我们调查这些文件。

```
 config.h.in 
```

似乎不存在，也许是生成的？

里面好像有块

```
 configure

 8148 for ac_func in strftime strptime mktime timelocal \     
 8149          difftime gettimeofday clock_gettime \          
 8150          select poll \                                  
 8151          readlink faccessx fchdir ftruncate \           

 etc etc etc ..

 8178          htons ntohs \                                   
 8179          regcomp regexec regerror regfree \              
 8180          gdbm_open getxattr \                            
 8181          realpath canonicalize_file_name \               
 8182          symlink getcwd                                  
 8183 do :                                                     
 8184   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh` 
 8185 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"     
 8186 if eval test \"x\$"$as_ac_var"\" = x"yes"; then :        
 8187   cat >>confdefs.h <<_ACEOF                              
 8188 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1        
 8189 _ACEOF                                                   
 8190                                                          
 8191 fi                                                       
 8192 done 
```

}}}

我不知道那在做什么。待办事项：调查！

在

```
 ./zsh-4.3.17/configure.ac 

  1167 dnl ---------------
  1168 dnl CHECK FUNCTIONS
  1169 dnl ---------------
  1170                                                                                                                                                                                  |     rglobdata.gd_gf_noglobdot
  1171 dnl need to integrate this function
  1172 dnl AC_FUNC_STRFTIME
  1173                                                                                                                                                                                  |     rglobdata.gd_gf_listtypes
  1174 AC_CHECK_FUNCS(strftime strptime mktime timelocal \
  1175          difftime gettimeofday clock_gettime \
  1176          select poll \

  etc etc etc 

  1205          regcomp regexec regerror regfree \                                 
  1206          gdbm_open getxattr \                                               
  1207          realpath canonicalize_file_name \                                  
  1208          symlink getcwd)                                                    
  1209 AC_FUNC_STRCOLL 
```

在这个阶段我不确定如何做到这一点，考虑到我可能想对该功能进行单元测试，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:59:09.903

该函数是[模块](http://zsh.sourceforge.net/Doc/Release/Zsh-Modules.html#The-zsh_002fzutil-Module)提供的内置函数`bin_zregexparse`的实现。它在以下定义[中](http://zsh.git.sourceforge.net/git/gitweb.cgi?p=zsh/zsh;a=blob;f=Src/Modules/zutil.c;h=399c45f46304711e262085249b02375ba6e65f9b;hb=db7d0ac34143ed2378c2fd98845b2ae5eaaf6bbb#l1872)使用：`zregexparse`[`zsh/zutil`](http://zsh.sourceforge.net/Doc/Release/Zsh-Modules.html#The-zsh_002fzutil-Module)[`zutil.c`](http://zsh.git.sourceforge.net/git/gitweb.cgi?p=zsh/zsh;a=blob;f=Src/Modules/zutil.c;h=399c45f46304711e262085249b02375ba6e65f9b;hb=db7d0ac34143ed2378c2fd98845b2ae5eaaf6bbb#l1872)

```
static struct builtin bintab[] = {
    …
    BUILTIN("zregexparse", 0, bin_zregexparse, 3, -1, 0, "c", NULL),
    …
}; 
```

`zregexparse`旨在用于实现[`_regex_arguments`](http://zsh.sourceforge.net/Doc/Release/Completion-System.html#index-_005fregex_005farguments). 这不是最有希望的切入点。

如果你想实现 zsh 的 globbing 特性，你必须将几乎所有的 zsh 代码引入你的程序，因为 glob 模式可以包含任意嵌入代码。您可以在构建期间排除行编辑器，仅此而已。

我建议使用单独的 zsh 二进制文件并通过一对管道向它提供请求。

```
setopt extended_glob null_glob
print -Nr -- **/*(.Om+my_predicate) '' 
```

# apache-flex - 单击具有向下滑动过渡效果的按钮可扩展 Flex AIR 窗口的大小

> ID：10865771
> 
> 赞同：0
> 
> 时间：2012-06-02T20:38:32.147
> 
> 标签：apache-flex

如何在单击具有向下滑动效果的按钮时向下扩展 Flex AIR 窗口。当我们将文件从一个位置复制到另一个位置时，类似于查看更多详细信息按钮的功能。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:02:12.833

You can change Native Window size and add resize effect when size changes.

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" resizeEffect="{resizeEffect}" width="250" height="183">

    <fx:Script>
    <![CDATA[
        protected function expandButton_clickHandler(event:MouseEvent):void
        {
            nativeWindow.height = //height what ever you like
            nativeWindow.width = //width what ever you like

        }
    ]]>
</fx:Script>

    <fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <mx:Resize id="resizeEffect" duration="500" />
   </fx:Declarations> 
```

# php - 如何在下拉列表更改时更新两个文本字段

> ID：10865776
> 
> 赞同：5
> 
> 时间：2012-06-02T20:39:03.337
> 
> 标签：php, ajax, yii

我正在使用 yii 框架构建一个 Web 应用程序。我有一个下拉列表，我正在调用一个操作并使用 ajax 数组`'update'=>'#price'`字段更新一个 div 标记。代码工作正常，它更新了价格 div。

但是我想像这样更新两个字段，我尝试将一个数组传递给更新字段。但它没有用。

知道如何使用一个操作调用更新两个 div 标签并显示两个值吗？

这是我的代码..

```
 echo CHtml::beginForm();
 echo CHtml::dropDownList('amount_'.$position,'', array(1=>1,2=>2,3=>3),
 array(
 'ajax' => array(
     'type'=>'POST', 
 'url'=>CController::createUrl('shoppingCart/updateAmount'), 
     'update'=>'#price_'.$position, //selector to update
  ))); 
  echo CHtml::endForm(); 
```

在我的行动中，我只是在呼应

```
echo 'LKR '.Shop::priceFormat(@$product->getPrice($cart[$position]['Variations'], $value)); 
```

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:08:50.400

它只是 jQuery 选择器。我相信你可以用逗号来表示几个 id。或者您可以使用类选择器。（我认为这里的类选择器会更好）

```
'ajax' => array(
    /* ... */
    'update' => '#price_1, #price_2, #price_3',
    /* or */
    'update' => '.price'
) 
```

# objective-c - 未调用拆分视图弹出框委托方法

> ID：10865781
> 
> 赞同：1
> 
> 时间：2012-06-02T20:40:00.457
> 
> 标签：objective-c, delegates, protocols, uisplitviewcontroller, popover

编辑2：我尝试使用以下代码指向视图控制器：

UIStoryboard *iPadStoryboard = [UIStoryboard storyboardWithName:@"iPadStoryboard" bundle: nil]; GTGiftsIPadViewController *giftsIVC = (GTGiftsIPadViewController *)[iPadStoryboard instantiateViewControllerWithIdentifier: @"giftsTableViewControllerId"]; [giftsIVC setGiftsDelegate:self]; NSLog(@"%@", 礼物IVC); NSLog(@"%@", [[[[[[self parentViewController] parentViewController] childViewControllers] objectAtIndex:0] childViewControllers] objectAtIndex:0]);

但是，这会输出：

```
2012-06-02 14:28:47.148 Gift Manager[3958:707] <GTGiftsIPadViewController: 0xc6b9980>
2012-06-02 14:28:47.152 Gift Manager[3958:707] <GTGiftsIPadViewController: 0xc6a16d0> 
```

这意味着giftsIVC 没有指向正确的视图控制器。它必须指向由 [[[[[[self parentViewController] parentViewController] childViewControllers] objectAtIndex:0] childViewControllers] objectAtIndex:0] 给出的视图控制器。但是，我不能使用此代码，因为它不适用于纵向和横向视图。这似乎应该是非常直截了当的事情，但我正在努力解决这个问题！这让我疯狂！

编辑：我发现了问题，它与我如何设置委托有关。这是我设置委托的（糟糕的）方式：

```
[[[[[[[self parentViewController] parentViewController] childViewControllers] objectAtIndex:0] childViewControllers] objectAtIndex:0] setGiftsDelegate:self]; 
```

基本上 [[[[[[[self parentViewController] parentViewController] childViewControllers] objectAtIndex:0] childViewControllers] objectAtIndex:0] 只是引用我的表视图控制器。有没有另一种方法可以编写这段代码来排除 [[[[[[[self parentViewController] parentViewController] childViewControllers] objectAtIndex:0] childViewControllers] objectAtIndex:0] 部分？

我一直在努力避免创建自己的委托协议，主要是因为我对委托的想法还不是很满意。无论如何，我昨天继续创建了一个，因为我真的需要它，而且效果很好！我有一个拆分视图控制器，当 iPad 处于横向模式时显示两个控制器（一个表视图和表视图中对象的详细视图）。委托协议的目的是允许表视图在选择表视图中的对象时更新详细视图。这适用于横向模式；然而，在纵向模式下，我只有一个视图控制器和一个按钮来显示一个显示表格视图的弹出框（这几乎与 iPad 上的 Notes 应用程序相同）。

我的问题是，当处于纵向模式并选择弹出视图表中的对象时，不会调用 didSelectGift 方法；但是，在横向模式下是这样。请参阅下面的大写评论。

这是我的委托协议代码：

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import "GTAddIPadViewController.h"

@class GTGift, GTGiftCell;

@protocol GTGiftsIPadViewControllerDelegate;

@interface GTGiftsIPadViewController : UITableViewController

@property (nonatomic, assign) id <GTGiftsIPadViewControllerDelegate>giftsDelegate;
@property (nonatomic, strong) IBOutlet UITableView *giftsTable;

@end

@protocol GTGiftsIPadViewControllerDelegate <NSObject>

- (void)didSelectGift:(GTGift *)selectedGift;

@end 
```

在 GTGiftsIPadViewController 中调用 didSelectGift

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    GTGift *gift = [[[GTGiftStore sharedStore] allGifts] objectAtIndex:[indexPath row]];
    [giftsDelegate didSelectGift:gift]; //THIS FUNCTION IS NOT CALLED (TESTED BY PUTTING AN NSLOG INSIDE IT)
    NSLog(@"%@", [gift name]); //THIS OUTPUTS PROPERLY THEREFORE TABLEVIEW:DIDSELECTROWATINDEXPATH: IS CALLED
} 
```

委托在名为 GTDetailIPadViewController 的视图控制器中设置 viewDidLoad 方法

didSelectGift 方法在 GTDetailiPadViewController 中实现：

```
- (void)didSelectGift:(GTGift *)selectedGift 
{
    [self setDetailGift:selectedGift];
    [self populateTable];
} 
```

（populateTable 是使用 detailGift 的实例变量并使用这些值填充详细视图的方法）

我真的不明白为什么当表格显示在拆分视图中时它可以正常工作，但当它显示在弹出视图中时它不起作用。任何帮助将不胜感激，我希望我已经把我的问题说清楚了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:37:12.730

所以，这段代码：

```
[[[[[[self parentViewController] parentViewController] childViewControllers] objectAtIndex:0] childViewControllers] objectAtIndex:0] 
```

引用您的表视图控制器...这有点疯狂:-)

另外，我不认为委托是去这里的方式..

如果您在 XCode 中创建了标准的主/详细拆分视图项目，则主控制器（表视图控制器）应该有一个指向 DetailViewController 的指针（如果我理解正确，那将是您在代码中调用委托的部分） .

因此，无需声明任何委托，您只需直接指向该 detailViewController。

如果由于某种原因，该指针不存在，您会想要创建它，并且每当初始化 master 和 detail 时，都有如下内容：

```
MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
masterViewController.detailViewController = detailViewController; 
```

（如果您的 master 和 detail 没有像这里那样在代码中分配，它们仍然应该可以从一个共同的地方访问，比如说应用程序委托，作为 IBOUtlets，然后您只需使用第三行代码，确保您有主标题中的属性“detailViewController”）

这样，您应该始终从主视图控制器引用 detailViewController，因此您可以从表视图控制器（主）调用任何方法

```
[detailViewController didSelectGift:selectedGift]; 
```

# java - 无法让 VLCJ CaptureTest 工作

> ID：10865782
> 
> 赞同：2
> 
> 时间：2012-06-02T20:40:01.153
> 
> 标签：java, webcam, vlcj

我需要能够在我正在编程的 Java 应用程序中从我的网络摄像头进行录制。我尝试过 JMF，但无法获取捕获设备（它只*看到*了音频设备）。现在我正在尝试使用 VLCJ，但它不起作用。如果我打开 VLC Player，我可以毫无问题地访问相机，所以我知道我的网络摄像头可以正常工作，因为我应该能够通过 VLCJ 使其工作。我只是不知道怎么做。

此处提供的 CaptureTest.java 文件中的代码相同：

[http://code.google.com/p/vlcj/wiki/SimpleExamples](http://code.google.com/p/vlcj/wiki/SimpleExamples)

我所做的只是尝试使用字符串“dshow://”作为 mrl。

我在 Windows 7、JDK 1.6、VLC 2.1 和 Netbeans 7.1 上

有任何想法吗？非常感谢任何可以在这里帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:12:25.740

所有组件都是 32 位的吗？（Windows、Java 6 和 VLC）。如果所有组件都是 64 位，它也应该可以工作，但是这个用户只有在将所有内容切换到 32 位后才能让事情正常工作：

*   [使用 VLCJ 进行设备捕获](https://stackoverflow.com/questions/10839017/device-capture-with-vlcj)

# php - 使用 simplexml_load_string 后仍然保留的标签

> ID：10865785
> 
> 赞同：0
> 
> 时间：2012-06-02T20:40:53.550
> 
> 标签：php, xml, sockets, simplexml

我正在使用`simplexml_load_string`XML 数据包。在我的场景中，我要转换的 XML 字符串称为 k。然而，我的问题是，当我使用 k 时，仍然存在未解析的标签 ( `<k>, <\k>`)。

例如，我使用 `$x->k`，然后返回`<k>DATA I WANT HERE<\EK>`。我该如何摆脱这些？

代码的作用：它连接到游戏并登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:56:47.297

使用*InnerNode*获取不带标签的值：

```
$x->k->InnerNode 
```

您还可以进行类型转换：

```
(string)$x->k 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:58:19.830

我试过这个，似乎得到了字符串。

```
<?php
$str = "<msg t='sys'><body action='rndK' r='-1'><k>qH~e9Gmt</k></body></msg>";

$xml = simplexml_load_string( $str );
echo $xml->body->k; // gives 'qH~e9Gmt'
?> 
```

# java - 开发者网站相互矛盾 regaging webview-shouldOverrideUrlLoading

> ID：10865788
> 
> 赞同：2
> 
> 时间：2012-06-02T20:40:59.383
> 
> 标签：java, android, webview

许多 Android 开发人员实现了自己的 webview。尽管在 stackoverflow 上讨论了很多与此主题相关的问题，但这可能是造成这种不明确的原因。

要在您的 WebView 中打开链接，android 开发人员需要定义自己的 webview。

*   根据[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)返回应该使用，在当前 Webview 中打开 url `false`。 `shouldOverrideUrlLoading`（“当前”意味着大概是最近创建或使用的？）

*   根据[http://developer.android.com/resources/tutorials/views/hello-webview.html](http://developer.android.com/resources/tutorials/views/hello-webview.html)和各种博客：

    ```
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
       view.loadUrl(url);
       return true;
    } 
    ```

    `true`我必须回来。

**开发者网站之一是否有错误？API级别之间有区别吗？shouldOverrideUrlLoading 最干净和最好的用法是什么？**

答案将帮助我们的团队和许多其他使用 android webviews 的开发人员。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T00:04:27.647

In case you decide to implement **WebViewClient**:

```
webView.setWebViewClient(new WebViewClient()
{
  @Override
  public boolean shouldOverrideUrlLoading(WebView view, String url)
  {
    // My own condition to decide if I should skip URL loading
    boolean avoidURLLoading = ...

    if (avoidURLLoading)
    {
      // Ask the WebView to avoid loading the URL,
      // I want to manage this case on my own.
      return true;
    }
    else
    {
      // Let the WebView load the URL 
      return false;
    }
  };
}); 
```

If you don't implement **WebViewClient**, every time you'll ask the *WebView* to load an URL with the `loadUrl` method, it will ask the *Activity Manager* to find a proper app to load the URL (typically a web browser installed in the device).

The default implementation of **shouldOverrideUrlLoading** in **WebViewClient** is

```
public boolean shouldOverrideUrlLoading(WebView view, String url)
{
  return false;
} 
```

So if you just write something like this

```
webView.setWebViewClient(new WebViewClient()); 
```

the URL will load inside your own *WebView* and not in an external web browser.

You'll typically return `true` in **shouldOverrideUrlLoading** when you want to modify the URL and then load the new one with another `loadUrl` call or when you just want to avoid loading the URL and handle the request in a different way.

The behavior in your example

```
public boolean shouldOverrideUrlLoading(WebView view, String url)
{
  view.loadUrl(url);
  return true;
} 
```

is equivalent to

```
public boolean shouldOverrideUrlLoading(WebView view, String url)
{
  return false;
} 
```

because you're telling the *WebView* to avoid handling the URL loading (`return true`), but you're also making another request with `view.loadUrl(url)` so in fact you end up loading the URL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:56:37.577

为了在当前 WebView（不是浏览器）中打开链接，您应该像这样返回 false：

```
mWebView.setWebViewClient(new WebViewClient(){
        public boolean shouldOverrideUrlLoading(WebView view, String url){

            return false;  

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T21:45:35.977

只要你实现 setWebViewClient(..) 我的答案和 axample 做同样的事情。另一方面，如果您不实现它，浏览器将启动 instaed。

# javascript - 将图像嵌入 Chrome 扩展程序

> ID：10865789
> 
> 赞同：13
> 
> 时间：2012-06-02T20:41:36.977
> 
> 标签：javascript, google-chrome, google-chrome-extension, chrome-extension-manifest-v2

我正在构建一个 Google Chrome 扩展，它将 HTML 注入到一个真实的网页中。注入还包含图像，现在我想知道如何在扩展中引用图像。到目前为止，我只能使用[http://example.com/myimage.png](http://example.com/myimage.png)在服务器上引用它们。但这需要一段时间才能加载。

是否可以在扩展程序中打包图像并从浏览器的任何位置引用它们？如何？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T22:43:00.077

您可以使用`chrome.runtime.getURL()`( [docs](http://code.google.com/chrome/extensions/extension.html#method-getURL) ) 获取内部扩展文件夹 URL。将图像相对路径传递给它，您将获得它的完整 URL。

例如，如果您在扩展文件夹中有一个名为“images”的文件夹和一个名为“profile.jpg”的图像，您可以通过执行以下操作将其注入页面正文：

```
var image = document.createElement("img");
image.src = chrome.runtime.getURL("images/profile.jpg");
document.getElementsByTagName("body")[0].appendChild(image); 
```

此外，请查看[此处记录](https://developer.chrome.com/extensions/manifest/web_accessible_resources)`web_accessible_resources`的清单属性- 您可能需要声明您的资源以使它们在此方法中可用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-02T02:50:27.133

将其留在这里，以便人们不必阅读评论。

在 manifest.json 中包括：

```
"web_accessible_resources": ["RELATIVE_PATH_TO_RESOURCE.EXTENTION"] // can be more than one 
```

**例子**

```
{
  ...
  "web_accessible_resources": [
    "images/*.png",
    "style/double-rainbow.css",
    "script/double-rainbow.js",
    "script/main.js",
    "templates/*"
  ],
  ...
} 
```

然后如果你想在你使用的网页上使用这个图像或文件

```
chrome.extension.getURL("images/new-HDSB-logo.png"); // absolute path 
```

# c# - 如何管理 Azure 表中作为代码中的列表属性的关系

> ID：10865791
> 
> 赞同：0
> 
> 时间：2012-06-02T20:42:05.437
> 
> 标签：c#, nosql, azure-table-storage

我有一个关于如何将我的类映射到 Azure 表存储实体的问题。假设我有两个实体，BikeRider 和 BikeRace。在我的 C# 代码中，我有 2 个类，每个类都有一个属性，它是另一个类的集合。所以 BikeRider 类有一个 List 属性，反之亦然。如果这里不理想，请随意发表意见，但这就是我今天所拥有的。

那如何映射到 Azure 表中？我在这里找到了关于 SO 的问题，讨论如何存储多对多关系，但我的问题更具体地说是在保存包含该属性的对象时应该如何处理 List 属性。

谢谢！

更新当我在等待对此的回复时（并且认为我可能没有得到任何回复），我想出了这个解决方案：

如上所述，C# BikeRider 和 BikeRace 类型都具有另一个类型的 List 属性。每个都有一个实例方法来将另一个实例添加到他们的列表中（即 BikeRace 有一个名为“AddBikeRider”的方法，它将 BikeRider 的实例添加到 BikeRace.BikeRiders 列表中，反之亦然）。

但是，当我保存到 Azure 表存储时，有 3 个表包含以下信息：

## 自行车骑手表

*   分区键、行键、

## BikeRider 信息 RiderRace 表

*   PartitionKey：BikeRider RowKey
*   RowKey：BikeRace RowKey
*   其他信息

## 自行车赛表

*   分区键、行键
*   比赛中每个 BikeRider 的 ID 的单独值（BikeRider RowKey - 但可能有很多）。

这样，如果您从 BikeRider 查询并尝试获取他参加过的 BikeRaces，则您拥有分区键，并且该分区中的所有行都是 BikeRaces。如果您从 BikeRace 进行查询，并尝试让所有 BikeRiders 参加比赛，则您拥有 BikeRider ID 可用于查询 BikeRider 表。除了将这些密钥存储在多个位置之外，您不会复制数据，因此如果您的数据发生更改，您不必多个存储位置。

这里的挑战是 Ming 发布的内容 - 如果 Table Service 保存方法为具有 List 属性的类型抛出异常，您是否可以使用自己的初步保存方法创建一个更简单的接口来处理列表类型并将其转换为保存 -首先能够数据类型，以我描述的方式将其持久保存到 Azure 表？这是太复杂了，还是太脆弱了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:51:22.133

这是不支持的。表存储不支持列表属性。如果在 CLR 数据模型中使用列表属性，WCF 数据服务将尝试对其进行序列化，并导致异常。

要模拟关系，您可以在 BikeRace 实体上创建一个属性，例如 BikeRiderID。

如果需要只读集合，可以在 BikeRider 类中创建方法（而不是属性），例如 GetBikeRaces。在实现中，您查询 BikeRace 表以查找 BikeRiderID 是当前骑车人 ID 的所有实体。如果要更新自行车比赛列表，还需要使用单独的请求更新 BikeRider 表。

您可以参考[http://blog.smarx.com/posts/one-to-many-relationships-in-windows-azure-tables](http://blog.smarx.com/posts/one-to-many-relationships-in-windows-azure-tables)获取示例。

# objective-c - 如何将用户上次使用与当前日期进行比较？

> ID：10865794
> 
> 赞同：0
> 
> 时间：2012-06-02T20:42:50.713
> 
> 标签：objective-c, compare, nsdate

我想存储用户最后一次使用应用程序并将其与当前日期进行比较。

根据比较我想在屏幕上弹出一个通知。

如何以及在哪里实现保存最后日期的代码？（不是在 ApplicationWillTerminate 中，因为我在这里的另一个线程中读到了）我如何以及在哪里实现读取该值的代码？

（它应该是 NSDate 并且当然使用 if 语句..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:05:44.033

专为此类事物而构建的用户[`NSUserDefaults`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)（它是具有一些限制的持久键值存储）。这是一个快速的片段：

```
NSUserDefaults *standardDefaults = [NSUserDefaults standardUserDefaults];

// Write current date & time
[sharedDefaults setObject:[NSDate date] forKey:@"lastUsed"];
[sharedDefaults synchronize]; // This makes sure your changes are written to disk

// Read date & time
NSDate *lastStart = [sharedDefaults objectForKey:@"lastUsed"]; 
```

你想把它放在哪里取决于你想测量什么。

# macos - 在 OS X 中更改目录的所有权

> ID：10865795
> 
> 赞同：12
> 
> 时间：2012-06-02T20:43:15.783
> 
> 标签：macos, homebrew, chown

我已经安装了自制软件，并且正在尝试更改 /usr/local/include 目录的写入权限。

当我运行“brew doctor”时，我收到以下错误消息：

> 错误：/usr/local 目录不可写。即使在您安装 Homebrew 时此目录是可写的，其他软件也可能会更改此目录的权限。已知某些版本的 Airfoil 的“InstantOn”组件可以做到这一点。
> 
> 您可能应该将 /usr/local 的所有权和权限更改回您的用户帐户。

我试着用 chown 来做这件事，但我对此很陌生，而且我认为我没有正确运行它。我跑了：

```
chown myusername /usr/local/include 
```

我没有收到任何错误消息，但是当我运行 brew doctor 时，它说我仍然没有写入 /usr/local/include 的权限。

任何帮助将不胜感激！

**编辑：**

我收到“不允许操作”错误。

`cd /usr`

`chown myusername local`

chown：本地：不允许操作

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-03-09T20:24:15.240

对我有用的简单解决方案：

1.  单击您的背景以转到查找器
2.  单击 go 并转到文件夹 /usr
3.  右键单击本地并获取信息
4.  解锁底部的锁
5.  单击 + 符号并将您的用户添加到列表中并授予读/写权限
6.  单击底部的齿轮符号，然后选择应用于包含的项目以在该目录下递归并为其下的所有目录分配权限。

`brew doctor`从命令提示符键入进行测试。我的结果：

> 您的系统已准备好冲泡。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-02T21:36:29.237

在我的系统上，`/usr/local`归. 我的用户是该组的成员，因此具有写入权限。我没有弄乱那里的所有权和权限，我的 Homebrew 安装也没有抱怨，所以我认为我的设置符合它的要求。`root:admin``rwxrwxr-x``admin`

检查您的所有权`/usr/local`；如果它由 group 拥有`admin`，请检查您的非管理员帐户是否是该组的成员。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-20T13:19:27.313

你应该使用：`sudo chown username folder`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-15T00:13:24.703

## 所有权变更需谨慎

**如果您没有在原始问题中发布相同的错误，请**不要尝试更改所有权`/usr/`或递归地更改所有权。 您可能会搞砸您的系统或削弱其安全性。`/usr/local/`

 **一些用户可能会收到带有自制权限的错误，这些错误可以在不更改整个`/usr/`或`/usr/local/`目录的所有权的情况下解决。

根据我的经验，在大多数情况下，恢复所有权就足够了`/usr/local/Cellar`：

```
sudo chown -R "$USER" /usr/local/Cellar/ 
```

或者，如果您有非标准安装

```
sudo chown -R "$USER" "$(brew --prefix)/Cellar" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T20:55:58.773

您可以尝试使用命令`ls -l`。使用此命令，您将看到当前目录中的文件列表以及一些有用的信息，例如谁是该文件的所有者。所以你会看看是否`chown`解决了。我相信这`chown`是改变所有权的正确命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T11:02:54.957

正是这个问题刚刚开始出现在我的 MacBook 上。

/usr/local 的所有者是：

```
drwxr-xr-x   24 root  wheel    768 Apr  9 17:25 local 
```

我无法更改权限并通过 Finder 添加自己 - 我收到“您没有必要的权限”错误。

这可能是由于mac os中的安全性变化吗？（我有 10.13.6）**

# c# - Windows 8 Metro TextBlock 动画

> ID：10865796
> 
> 赞同：4
> 
> 时间：2012-06-02T20:43:22.557
> 
> 标签：c#, windows, animation, windows-runtime, winrt-xaml

在我的 Metro 应用程序中，我有一个文本块，当 if 语句为真时，我会将其设置为 100% 不透明度然后返回 0% 不透明度。我该怎么做呢？

我做了很多环顾四周，但所有的动画教程都让我感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T07:09:07.267

你可以在 C# 中做这样的事情来从 0 到 1 动画：

```
var sb = new Storyboard();
opacityAnimation = new DoubleAnimation
{
    From = 0.0,
    To = 1.0,
    Duration = TimeSpan.FromSeconds(1.5)
};
Storyboard.SetTarget(opacityAnimation, textBlock);
Storyboard.SetTargetProperty(opacityAnimation, "Opacity");
sb.Children.Add(opacityAnimation);
sb.Begin(); 
```

您也可以在 XAML 中定义它：

```
<Storyboard
    x:Name="fadeInStoryboard"
    Storyboard.TargetName="myTextBlock"
    Storyboard.TargetProperty="Opacity">
    <DoubleAnimation
        From="0"
        To="1.0"
        Duration="0:0:1.5" />
</Storyboard> 
```

-- 然后在后面的代码中启动它：

```
fadeInStoryboard.Begin(); 
```

根据您的场景，使用视觉状态并将情节提要定义为视觉状态转换可能是理想的。

# php - PHP循环出现故障

> ID：10865799
> 
> 赞同：-2
> 
> 时间：2012-06-02T20:43:51.820
> 
> 标签：php, loops, for-loop, while-loop

在我的 PHP 中，我遇到了循环问题。它应该是从低到高写的，但它是从高到低写的。这是我的代码非常精简。

变量首先等于这些。

```
$high = 5
$number = 10 
```

环形

```
for ($i=$high; $i<=$number; $i++)
  {

  if (file_exists("blog/" . $i . ".txt")) {
    echo "The file $i.txt exists <br />";
}else{
    echo "This file $i.txt doesnt exist <br />";
}

  } 
```

输出是这样的

```
5
6
7
8
9
10 
```

但不应该这样吗？这就是我需要的。

```
10
9
8
7
6
5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:45:58.450

你应该减少你的 $i 并改变停止条件。

```
$heigh = 10;
$number = 5;

     for ($i=$high; $i>=$number; $i--) {

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T20:46:06.257

需要相反的顺序

```
$i=$number; $i>=$high ; $i-- 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T20:46:35.417

该顺序对于您编写它的方式是正确的。

尝试

```
for ($i=$number; $i>=$high; $i--) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:49:51.483

将 for 语句更改为类似这样

```
for ($i=$number; $i>=$high; $i--) 
```

# rspec - bundle exec rspec spec/requests/static_pages_spec.rb 语法错误

> ID：10865802
> 
> 赞同：0
> 
> 时间：2012-06-02T20:44:23.600
> 
> 标签：rspec

（使用 Hartl 的教程）我通过第 3 章使用 rspec 进行测试没有任何问题，但是在我完成该部分、合并分支等之后 - 我无法再运行 rspec 测试。我在第 4 章尝试进行第一组测试，但出现以下错误：

> C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec /core/configuration.rb:746:in `load': C:/Sites/rails_projects/sample_app/spec/re quests/static_pages_spec.rb:61: syntax error, unexpected $end, expecting keyword _end (SyntaxError) from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 0.1/lib/rspec/core/configuration.rb:746:in`block in load_spec_files' from C:/ RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 0.1/lib/rspec/core/configuration.rb:746:in `map' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 0.1/lib/rspec/core/configuration.rb:746:in`load_spec_files' 来自 C:/RailsInstaller/Ruby1.9.3/ lib/ruby/gems/1.9.1/gems/rspec-core-2.1 0.1/lib/rspec/core/command_line.rb:22:in `run' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 0.1/lib/rspec/core/runner.rb:69:in`run' 来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/ 1.9.1/gems/rspec-core-2.1 0.1/lib/rspec/core/runner.rb:10:in `block in autorun'

可能是什么问题呢？我尝试运行 rails generate rspec:install 并再次尝试但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:52:26.113

首先在 static_pages_spec.rb 文件中存在语法错误...您需要修复...您应该检查 Hartl 的代码以了解正确的语法...

其次，确保您从应用程序的根目录运行 rspec...在 Hartl 的教程中可能称为 sample_app...

如果这些都不起作用，那么您应该给出从 C:/... 开始的 rpsec 和绝对路径

让我知道它是否有效..

# sinatra - 更改为 jruby，得到 RuntimeError: Server handler (thin) not found

> ID：10865807
> 
> 赞同：1
> 
> 时间：2012-06-02T20:44:49.160
> 
> 标签：sinatra, jruby, thin

我的应用程序在 MRI 1.9.2-p290 和 1.9.3-p125 中运行良好，但是当我更改为 jruby-1.7.0-preview1 时，我得到了描述的错误。这是完整的错误：

```
RuntimeError: Server handler (thin) not found.
  detect_rack_handler at /home/qry_dev/.rvm/gems/jruby-1.7.0.preview1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1402
             run! at /home/qry_dev/.rvm/gems/jruby-1.7.0.preview1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1293
           (root) at /home/qry_dev/Ruby/query_engine/query_webserver.rb:320
             load at org/jruby/RubyKernel.java:1017
           (root) at -e:1 
```

（我已经尝试过 jruby-1.6.6，同样的错误。）已经安装了 sinatra 和 Thin gems（以及其他）。事实上，除了 jruby 而不是 mri，一切都一样。

有任何想法吗？我在网上搜索并看到了这个错误，但它通常是针对 3rd 方工具的，似乎没有什么适用的。

编辑：还尝试通过安装thin（我以前从未做过）到linux本身

```
sudo apt-get install thin 
```

但仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T07:44:26.330

sinatra **1.3.2**（默认）仅检查大多数兼容 MRI 的服务器，请参阅： [https ://github.com/sinatra/sinatra/blob/e111243e813ede1f0f4c6918d9a8cc029e776fc3/lib/sinatra/base.rb#L1514](https://github.com/sinatra/sinatra/blob/e111243e813ede1f0f4c6918d9a8cc029e776fc3/lib/sinatra/base.rb#L1514)

*由于本机 C 代码， thin*，*mongrel*不能在 JRuby 上工作（尽管努力让他们在 JRuby 上使用一些“本机”Java 代码）

在 JRuby 上，您有两个选项可以调整设置的服务器，例如：

```
set :server, %w[trinidad webrick] if defined?(JRUBY_VERSION) 
```

或使用给定的处理程序构建您的应用程序`rackup -s trinidad`

不要忘记`gem install trinidad`首先（在 JRuby 下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T08:57:40.383

您可以安装将自动拾取的`thin`服务器。`sinatra`要安装`thin`，您可以执行以下命令

```
gem install thin 
```

# emacs - Emacs 更改为 init.el

> ID：10865812
> 
> 赞同：1
> 
> 时间：2012-06-02T20:45:06.860
> 
> 标签：emacs, elisp

基本上，我的配置是 ~/.emacs.el 和 ~/.emacs.d/，但我听说 init.el 更高级且更现代。

如何迁移到 init.el？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:46:57.890

将您`~/.emacs.el`移入`~/.emacs.d/init.el`. 完毕。

# database - 从最大堆中提取的运行时间是多少？

> ID：10865822
> 
> 赞同：1
> 
> 时间：2012-06-02T20:46:03.083
> 
> 标签：database, runtime, heap, performance

我收到了这个作业问题

> “詹姆斯声称他成功地实现了从最大堆 (ExtractMax) 中提取，这需要 O((log n)^0.5)
> 
> 解释詹姆斯犯错的原因

我知道从最大堆中提取需要 O(log n) 但我如何证明 James 是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T22:34:33.383

[从这里](http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap)可以看出，构建堆可以在 O(n) 中完成。现在如果提取最大值可以在 O((log n)^0.5) 中完成，那么可以通过重复提取最大元素来对整个集合进行排序 n * O((log n)^0.5)。然而，这是不可能的，因为排序的下限是 n*logn。

因此，詹姆斯的不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:06:40.093

@Duh 将您的提取问题转换为排序问题的解决方案实际上非常有创意。找到一些证明排序是 O(n * log n) 的证据应该不难，并且在算法研究中将一个问题转换为另一个问题是很常见的（例如，所有 NP-Complete 问题都是彼此。这就是你如何证明它们是 NP 完全的）。也就是说，我认为有一个更简单的解决方案。

您在问题中直接说明了这一点：从二进制堆中提取是 O(log n)。想想**为什么**它是 O(log n)。二叉堆的结构是什么？从二叉堆中提取需要哪些操作？为什么最坏的情况是 log n 次操作？这些限制是否受到实施的影响？

现在，请记住詹姆斯的主张有两个部分：

1.  他可以在 O((log n)^0.5) 中提取
2.  他正在使用二进制堆。

鉴于您对二进制堆的了解，这两种说法都成立吗？为什么或者为什么不？有矛盾吗？如果有，为什么会有矛盾？最后，想想这对詹姆斯意味着什么。

# c# - DataTable.Select() 不同然后添加值

> ID：10865823
> 
> 赞同：2
> 
> 时间：2012-06-02T20:46:04.737
> 
> 标签：c#

我只需要从 columnA 中选择不同的值，然后添加已加入 columnB 的值

样本：

```
columnA    |    columnB
A                3
B                4
A                3
A                2 
B                1
C                3 
```

结果：

```
columnA        |    columnB
A                    8
B                    5
C                    3 
```

我找到[了这个](https://stackoverflow.com/questions/1199176/how-to-select-distinct-values-from-datatable)，但它只是将列名数组作为参数。

有没有其他方法或使用 DataTable.Select() 的示例

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T20:59:27.197

您可以使用[LINQ-to-DataSet](http://msdn.microsoft.com/en-us/library/bb386977.aspx)和[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534304.aspx)：

```
var colAGroups = tbl.AsEnumerable()
                .GroupBy(row => row.Field<String>("ColumnA"))
                .Select(grp => new
                {
                    Value = grp.Key,
                    Sum = grp.Sum(row => row.Field<int>("ColumnB"))
                });

foreach (var colAGroup in colAGroups)
{
    Console.WriteLine(String.Format("{0} {1}", colAGroup.Value, colAGroup.Sum));
} 
```

# linux - 如何在专用的 apache2 服务器中创建子域

> ID：10865838
> 
> 赞同：2
> 
> 时间：2012-06-02T20:47:47.310
> 
> 标签：linux, apache2, debian

我想创建一个子域，我按照以下步骤操作：

```
cd /etc/apache2/sites-available
nano test.mydomaine.com

<VirtualHost *:80>
        ServerAdmin mymail@gmail.com
        ServerName  test.mydomaine.com
        ServerAlias www.test.mydomaine.com
        DocumentRoot /var/www/testfolder/
<Directory "/var/www/testfolder">
        AuthType Basic
        AuthName "test"
        AuthUserFile /var/www/testfolder/passwords
        Require valid-user test
</Directory>
</VirtualHost> 
```

退出并保存

```
a2ensite test.mydomaine.com
/etc/init.d/apache2 reload 
```

但它不工作我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:15:52.790

为了使其工作，您还必须为新主机名配置 DNS 解析`test.mydomain.com`。如果您只是在本地使用它并且不想创建“真正的”DNS 条目，则必须编辑该文件`/etc/hosts`，以便您的计算机可以将主机名解析为 IP 地址。如果您在与浏览器相同的机器上运行 Web 服务器，您需要映射`test.mydomain.com`到`127.0.0.1`. 如果浏览器位于本地网络上的另一台计算机上，则需要确定服务器的 IP 地址，然后在*浏览器*计算机上进行编辑`/etc/hosts`以添加映射。

在 Windows 上，该文件称为`C:\windows\system32\drivers\etc\hosts`

示例条目将是（对于与服务器在同一台机器上运行的浏览器）：

```
127.0.0.1 test.mydomain.com 
```

如果服务器位于 192.168.0.5，则该条目将是

```
192.168.0.5 test.mydomain.com 
```

编辑：如果服务器有一个真正的可路由 IP 地址，那么如果您希望在`test.mydomain.com`全球 Internet 上解析该地址，则必须让您的服务提供商将其添加到 DNS。出于测试目的，您仍然可以`/etc/hosts`如上所述使用。只需替换服务器的真实 IP 而不是`127.0.0.1`. 在运行浏览器的系统上执行此操作。

# plugins - NPAPI 插件可以在每个页面上执行吗？

> ID：10865839
> 
> 赞同：0
> 
> 时间：2012-06-02T20:48:05.610
> 
> 标签：plugins, browser, npapi

我想构建一个扩展，但意识到一个插件会给我更多的控制权来做我想做的事情。您能否构建在用户加载的每个页面上调用的 NPAPI 插件，就像扩展名一样，或者它们是否仅限于您在插件清单文件中指定的 MIME 类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:27:30.990

插件仅被实例化以处理其定义的 MIME 类型。如果你想让一个插件在每个页面上运行，你必须制作一个扩展，将你的插件实例注入每个页面的 DOM。

# android - 列出名称值对元素

> ID：10865842
> 
> 赞同：5
> 
> 时间：2012-06-02T20:48:57.567
> 
> 标签：android, list, foreach

我正在开发一个 Android 项目，我有以下代码段，它们将信息收集到一个“数组”中：

```
//setup array containing submitted form data
ArrayList<NameValuePair> data = new ArrayList<NameValuePair>();
data.add( new BasicNameValuePair("name", formName.getText().toString()) );
data.add( new BasicNameValuePair("test", "testing!") );

//send form data to CakeConnection
AsyncConnection connection = new AsyncConnection();
connection.execute(data); 
```

我的问题是如何在我的 AsyncConnection 类中读取该数据列表的各个成员？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T21:42:36.497

您应该简单地遍历列表以访问每个`NameValuePair`. 使用`getName()`and`getValue()`方法，您可以检索每对的单个参数。

```
for (NameValuePair nvp : data) {
    String name = nvp.getName();
    String value = nvp.getValue();
} 
```

# javascript - phantomjs javascript逐行读取本地文件

> ID：10865849
> 
> 赞同：19
> 
> 时间：2012-06-02T20:49:37.887
> 
> 标签：javascript, phantomjs

我从来没有使用 javascript 逐行读取文件，而 phantomjs 对我来说是一个全新的球赛。我知道幻影中有一个 read() 函数，但我不完全确定如何在将数据存储到变量后对其进行操作。我的伪代码是这样的：

```
filedata = read('test.txt');
newdata = split(filedata, "\n");
foreach(newdata as nd) {

  //do stuff here with the line

} 
```

如果有人可以用真正的代码语法帮助我，我对 phantomjs 是否会接受典型的 javascript 或什么感到有点困惑。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-01T08:15:53.017

我不是 JavaScript 或 PhantomJS 专家，但以下代码对我有用：

```
/*jslint indent: 4*/
/*globals document, phantom*/
'use strict';

var fs = require('fs'),
    system = require('system');

if (system.args.length < 2) {
    console.log("Usage: readFile.js FILE");
    phantom.exit(1);
}

var content = '',
    f = null,
    lines = null,
    eol = system.os.name == 'windows' ? "\r\n" : "\n";

try {
    f = fs.open(system.args[1], "r");
    content = f.read();
} catch (e) {
    console.log(e);
}

if (f) {
    f.close();
}

if (content) {
    lines = content.split(eol);
    for (var i = 0, len = lines.length; i < len; i++) {
        console.log(lines[i]);
    }
}

phantom.exit(); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-23T18:54:42.307

```
var fs = require('fs');
var file_h = fs.open('rim_details.csv', 'r');
var line = file_h.readLine();

while(line) {
    console.log(line);
    line = file_h.readLine(); 
}

file_h.close(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-04T16:38:48.560

虽然为时已晚，但这是我尝试过并且正在工作的：

```
var fs = require('fs'),
    filedata = fs.read('test.txt'), // read the file into a single string
    arrdata = filedata.split(/[\r\n]/); // split the string on newline and store in array

// iterate through array
for(var i=0; i < arrdata.length; i++) {

     // show each line 
    console.log("** " + arrdata[i]);

    //do stuff here with the line
}   

phantom.exit(); 
```

# winapi - 现代卡片上有些隐藏的二维加速

> ID：10865850
> 
> 赞同：-4
> 
> 时间：2012-06-02T20:49:42.153
> 
> 标签：winapi, opengl, 2d, nvidia

据说现代显卡主要支持 3d 图形硬件加速（在其之上构建了 ogl 和 dx 接口）

几乎有人说这是在现代显卡上使用图形的唯一真正方法，而在现代显卡上做 classicakl 2d 图形实在是没有办法

我认为最后一个必须是错误的，因为例如 Windows 桌面是一些（超出 3d）2d 模式的示例，我不认为它真的是正交投影 2d textyred quad - 但这种模式“超出”打开gl 和直接 x

我在某处读过一些小信息，这种有点神秘的 2d 模式甚至在某种程度上是硬件加速的（但有点差，它在 nvidia 和 ati 上有所不同）

我的问题是如何获得有关这种神秘的 2d 模式和加速的更多信息？在多大程度上存在这样的一个？如何使用它？

（我想了解并最大限度地使用这种 2d 硬件加速在 Windows 上编写 2d 图形，特别是通过一些“开放”界面）

（也许最后一个direct2d与它有关，但我读过一些关于direct2d的批评者（老实说我不喜欢directx，我更接近开放gl家伙，我想在PC上做极快加速的2d /赢）

1.  现代卡片上是否有一些*2d*模式，甚至 Windows 桌面是 3d 中的四边形纹理？
2.  如果是这样，如何在现代卡上使用*2d*模式（甚至 2d 加速），特别是与 open gl（没有 directx 等）合作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:44:59.123

显卡中没有“神秘的二维模式”。如果您谈论的是 AeroGlass 等高级合成系统，那么这一切都是通过 3D 渲染完成的。正如您所说，“正交投影 2d textyred quad”。他们也可能在 CPU 上做一些特殊的操作。

Direct2D 本身只不过是增加了更多。它有一些 CPU 组件，但它的所有 GPU 组件最终只是某种形式的三角形渲染，可能带有纹理和某种形式的帧缓冲区混合。

# python - Facebook Canvas 应用程序 - 循环登录重定向

> ID：10865851
> 
> 赞同：1
> 
> 时间：2012-06-02T20:49:50.717
> 
> 标签：python, facebook, facebook-apps, tornado, facebook-canvas

我正在使用基于 Python 的[Social Cookbook](https://github.com/finiteloop/socialcookbook/blob/master/cookbook.py)模板来创建 Facebook 应用程序，但我遇到了[Canvas 支持的问题，它支持 POST 而不是 GET](https://developers.facebook.com/docs/canvas/post/)。Cookbook 示例不包括如何处理此问题。基于阅读此[Hello World 示例](http://nagmamagaling.blogspot.com/2011/07/hello-world-facebook-app-python-version.html)并查看[Run With Friends](https://github.com/fbsamples/runwithfriends/blob/master/main.py)示例，我能够获取签名请求、读取数据（用户 ID、令牌）并将方法设置为 GET。

然而，随着它的继续，浏览器/龙卷风服务器进入一个循环，它重复运行 LoginHandler。给我一个错误“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。” 两天来我一直试图解决这个问题，并想是否有人可以提供帮助 - 这将是 StackOverflow。感谢您在修改社交食谱以支持 Facebook 画布时提供的任何指导。

```
class BaseHandler(tornado.web.RequestHandler):

    def initialize(self):
        self.init_facebook()

    def init_facebook(self):
        # initial facebook request comes in as a POST with a signed_request
        signed_request = self.get_argument('signed_request', None)
        if signed_request and self.request.method == u'POST':
            app_secret = options.facebook_app_secret
            data = load_signed_request(signed_request, app_secret)
            user_id = data.get(u"user_id")
            mytoken = data.get(u"oauth_token")
            print mytoken
            self.set_secure_cookie("uid", user_id)
            self.request.method = u'GET'  # causes loss of request.POST data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:42:08.970

好的，这就是我最终做的事情（感谢 oDesk - Haiming Yin 的一些帮助）以及我的一些问题。一方面，在 Mac 上运行 FireFox 的系统禁用了第三方 Cookie。这将导致 Facebook 画布出现问题。在 IE 上，您必须设置正确的 P3P 标头。所以所有这些结合起来让人头疼。

```
class BaseHandler(tornado.web.RequestHandler):
    @property
    def prepare(self):
        self.set_header('P3P', 'CP="HONK"')

    def initialize(self):
        if self.request.full_url() == "http://mydomain/a/facebook/":
            self.request.protocol = "https"
        self.init_facebook()

    def init_facebook(self):
        """Sets up the request specific Facebook and User instance"""

        # initial facebook request comes in as a POST with a signed_request
        signed_request = self.get_argument('signed_request', None)
        if signed_request and self.request.method == u'POST':
            app_secret = options.facebook_app_secret
            data = load_signed_request(signed_request, app_secret)
            user_id = data.get(u"user_id")
            if user_id:
                self.set_secure_cookie("uid", user_id)
            self.request.method = u'GET'

class FacebookCanvasHandler(HomeHandler):
    def get(self, *args, **kwds):
        logging.info("Facebook Canvas called.")
        if not self.current_user:
            logging.info("Need user grant permission, redirect to oauth dialog.")
            logging.info(self.settings.get("facebook_canvas_id"))
            oauth_url = self.get_login_url(self.settings.get("facebook_canvas_id"))
            logging.info(oauth_url)
            self.render("canvas_oauth.html", oauth_url=oauth_url)
        else:
            super(FacebookCanvasHandler, self).get(*args, **kwds)

def load_signed_request(signed_request, app_secret):
    try:
        sig, payload = signed_request.split(u'.', 1)
        sig = base64_url_decode(sig)
        data = json.loads(base64_url_decode(payload))

        expected_sig = hmac.new(app_secret, msg=payload, digestmod=hashlib.sha256).digest()

        if sig == expected_sig and data[u'issued_at'] > (time.time() - 86400):
            return data
        else:
            return None
    except ValueError, ex:
        return None

def base64_url_decode(data):
    data = data.encode(u'ascii')
    data += '=' * (4 - (len(data) % 4))
    return base64.urlsafe_b64decode(data) 
```

**canvans_oauth.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>
        Page Title
    </title>
    <meta name="description" content="description of the page" /><meta name="keywords" content="" /><meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/static/favicon.ico" />
    <script>
        window.top.location = "{% raw oauth_url %}";
    </script>

</head>

<body id="inner_body" class="inner_body">
redirecting to oauth...
</body>
</html> 
```

# css - 文本对齐和 div 不居中

> ID：10865853
> 
> 赞同：0
> 
> 时间：2012-06-02T20:49:57.280
> 
> 标签：css, html

我有一个 div 我想在中心对齐，水平说。请注意，`button`里面，可以在中心对齐......遗憾的是我不能为包装纸做同样的事情

[这是现场演示](http://jsfiddle.net/dS9Bc/2/)

**HTML**标记：

```
<div class="wrap">
    <div class="grayContainer">
        <div class="editor-label">
            name:
        </div>
        <div class="editor-field">
            james
        </div>
        <div class="editor-label">
            last name:
        </div>
        <div class="editor-field">
            bond
        </div>
        <div class="alignCenter">
            <input type="submit" value="press me" class="" />
        </div>
    </div>
</div> 
```

**CSS**标记：

```
.grayContainer {
    padding: 15px 10px 10px 10px;
    width: 450px;
    background-color: #E7E7E7;
    border: 2px solid #CCCCCC;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    border-radius: 8px;
    box-shadow: 0px 0px 6px 2px #CCCCCC;
    position:relative;
    behavior: url(/PIE.htc);
}

.grayContainer label
{
    float: left;
    width: 200px;
    text-align: right;
    color: #656565;
    /*font-size: 12px;*/
    text-shadow: 0 1px 0 white;
    padding: 8px 13px 10px 0;
}

.grayContainer .alignCenter
{
    padding: 20px 0;
}

.alignCenter
{
    text-align: center;
}

.wrap
{
     margin: 0 auto;   
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:55:56.627

将左右边距设置为`auto`。

```
margin-left: auto;
margin-right: auto 
```

甚至更好

```
margin: 0 auto; 
```

看到[这个](http://jsfiddle.net/dS9Bc/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:58:42.383

您可能还需要设置一个宽度，要么`.wrap`需要添加一个，要么设置`margin: 0 auto;`为`.grayContainer`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T20:58:47.140

您已将包装器居中，但随着它的宽度填充可用宽度，您将看不到它居中。

我认为您希望将容器置于包装器内部：

[http://jsfiddle.net/dS9Bc/4/](http://jsfiddle.net/dS9Bc/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:53:28.103

使margin right & left auto..并将这种样式添加到您的css中..它不适用于jsFiddle

```
.wrap{
margin:0 auto;
} 
```

# css - 如何在 div 中重复背景图像比页面长度更长？

> ID：10865854
> 
> 赞同：6
> 
> 时间：2012-06-02T20:50:12.427
> 
> 标签：css, html, background

# DIV（长于页面长度）背景停止重复

我有一个带有背景图像的 HTML 网页（在一个 div 中），一个从页面顶部延伸到底部的 div 以及一个用于内容的 div ...但是 DIV 的（从上到下延伸）背景停止重复在页面下方！（一旦你向下滚动，没有更多的背景图像）请帮助！

这是CSS：

```
    html {
     高度：100%；
    }
    身体 {
     背景颜色：#7E6F7F;
     高度：100%；
    }
    #bg { /*这是整个页面的背景图片*/
     位置：固定；
     顶部：0；
     左：0；
     宽度：100%；
     高度：100%；
    }
    #main { /*这是div的问题！！！*/
     填充：0px；
     宽度：85%；
     高度：100%；
     背景颜色：#D2B9D3;
     背景：网址（图片/Background_Content.jpg）；
     背景附件：固定；
     背景位置：0% 0%；
     位置：相对；
     顶部：0；
     左：0；
     z-索引：1；
     边距：自动；
    }
    #content { /*这是内容的div*/
     显示：块；
     宽度：85%；
     背景颜色：#E9CFEC；
     填充：0.9375em；/*0.9375em=15px*/
     边框：0.125em 实心#867687；/*0.125em=2px*/
     文本对齐：对齐；
     -webkit-border-radius:15px;
     -moz-边界半径：15px；
     边框半径：15px；
     -moz-box-shadow: 插图 0 0 5px 5px #BAA6BD;
     -webkit-box-shadow: 插图 0 0 5px 5px #BAA6BD;
     盒子阴影：插图 0 0 5px 5px #BAA6BD;
    }

```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:52:59.717

您需要使用`background-repeat`并将其设置`repeat-x`为`repeat-y`或`repeat-both`。

更多细节可以在[这里](http://www.w3schools.com/cssref/pr_background-repeat.asp)找到。

**编辑**

Ah, i see now. The #main is 100%, of the browser when it loads. You'll notice that the repeat stops onces you scroll. A simple solution would be to add a `bottom:0` to the #main style. That'll make it stretch to the very bottom. Also, remove the `height: 100%`.

# c++ - 在 C++ 中何时使用向量以及何时使用数组？

> ID：10865861
> 
> 赞同：17
> 
> 时间：2012-06-02T20:51:16.707
> 
> 标签：c++, arrays, vector

我通常不确定什么时候使用一个比另一个更好。总的来说，它们似乎都在做同样的事情，但是向量在可以做什么方面更灵活吗？什么时候数组更合适？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T21:01:31.163

通常总是更喜欢使用`std::vector<T>`，因为一旦向量超出范围，销毁将是自动的，分配的内存将整齐地放置在堆上，所有内存都将为您处理。 `std::vector<T>`为您提供数组中的所有内容，甚至保证元素将连续存储在内存中（除了`std::vector<bool>`）。

在这种情况下，`std::vector<bool>`您必须小心，因为这样的代码会中断：

```
 std::vector<bool> vb;
 vb.push_back(true);
 vb.push_back(false);
 vb.push_back(true);
 bool *pB = &vb[0];
 if( *(pB+1) )
 {
     // do something
 } 
```

事实是，`std::vector<bool>`不存储连续`bool`的 s。这是 C++11 中修复的标准中的一个例外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T21:00:19.020

我只在使用嵌入式系统或某些 API 需要它时才真正使用数组（即，将它们作为函数的参数）。此外，如果只有一两个地方我需要使用数组，或者不需要特别需要向量功能，那么使用数组更有意义，因为 vector.h 的额外开销。

否则，只需使用向量:)

# c - 使用 pthreads 作为带队列的线程池？

> ID：10865865
> 
> 赞同：2
> 
> 时间：2012-06-02T20:51:45.733
> 
> 标签：c

我对 C 很陌生，如果这个问题很离谱，我很抱歉。我已经使用 Java 执行器服务来制作固定的线程池，并且无法理解如何在 C 中做类似的事情。

我学会了如何使用 pthreads 在 c 中创建线程（这似乎很容易），但我不确定如何创建一个固定数量的线程消耗的队列？到目前为止，我所做的所有教程要么自行在主语句中启动线程，要么在 for 循环中执行。如果我采用这种方法，那么当我想要的只是 3 或 4 个线程并让它们处理队列时，我将拥有数百万个线程（每个工作项 1 个）。

这可能吗？如果可以，我需要学习什么？如果 pthreads 无法实现，那么我很乐意使用其他东西，我正在 Mac 上开发并将其部署在 linux 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:50:28.350

您可以通过使用条件变量轻松地使用单生产者/多消费者模型来做到这一点。请记住，这是*一种*架构，其他架构当然是可能的。

在主线程中，您只需创建队列、互斥锁和条件变量，然后启动任意数量的线程运行，伪代码如：

```
glbQueue = []
glbMutex = new mutex
glbCondVar = new condvar
for i = 1 to 10:
    start thread using thrdFn 
```

下一步是将您需要的任何工作项添加到队列中（使用互斥锁）并根据需要启动条件变量以唤醒线程：

```
while workitem = getNextWorkItem():
    lock glbMutex
    glbQueue.append (workItem)
    kick glbCondVar
    unlock glbMutex 
```

一旦所有工作项完成，您等待队列清空，然后发布一些哨兵项目以关闭线程，然后等待它们完成后再退出。

```
lock glbMutex
while glbQueue is not empty:
    kick glbCondVar
    unlock glbMutex.
    sleep for a bit
    lock glbMutex
unlock glbMutex.

for i = 1 to 10:
    lock glbMutex
    glbQueue.append (endWorkItem)
    kick glbCondVar
    unlock glbMutex.
    wait for any one thread to exit
exit 
```

完成工作的线程也相对简单。首先，它们在无限循环中运行，等待条件变量被踢出。在该循环中，他们处理工作项，直到没有更多可用项，然后他们重新进入睡眠状态。

一旦线程接收到最终工作项，它就会退出，从而保证每个线程都获得一个最终项。

换句话说，类似：

```
initialise
stillGoing = true
lock glbMutex
while stillGoing:
    wait on glbCondVar using glbMutex
    while stillGoing and glbQueue is not empty:
        extract workItem from glbQueue to thread local storage
        unlock glbMutex.
        if workItem is endWorkItem:
            stillGoing = false
        else:
            do the work specified by workItem
        lock glbMutex
unlock glbMutex
clean up
exit thread 
```

这基本上允许您在队列上拥有固定数量的线程处理项目，并且队列本身受到互斥锁的保护，因此工作线程或主线程之间没有争用。

# javascript - javascript 和 div，在 div 中创建图像和段落。

> ID：10865866
> 
> 赞同：3
> 
> 时间：2012-06-02T20:52:23.893
> 
> 标签：javascript, html

我试图用 javascript 做一些基本的东西，让它自动生成一些网站内容，但这让我抓狂！！！有人可以给我看一个简单的例子，说明如何让 javascript 在 div 中创建新图像和段落.. 可以说我的网站结构是这样的......

```
<html>
<head>
</head>

<body>
<div id ="wrapper">
<div id ="content">
</div>
</div>
</body>
</html 
```

我将如何使用 javascript 函数在“内容”div 中创建图像和 paragraghs 加载页面并单击图像。我知道它必须与 DOM 相关，但我已经在这工作了好几个小时了，我就是无法让它工作！请给我看一个它是如何完成的例子。非常感谢提前！！！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T20:56:59.623

最简单的形式：

```
// gets a reference to the div of id="content":
var div = document.getElementById('content'),
    // creates a new img element:
    img = document.createElement('img'),
    // creates a new p element:
    p = document.createElement('p'),
    // creates a new text-node:
    text = document.createTextNode('some text in the newly created text-node.');

// sets the src attribute of the newly-created image element:
img.src = 'http://lorempixel.com/400/200/people';

// appends the text-node to the newly-created p element:
p.appendChild(text);

// appends the newly-created image to the div (that we found above):
div.appendChild(img);
// appends the newly-created p element to the same div:
div.appendChild(p); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wNJWu/)。

参考：

*   [`element.appendChild()`](https://developer.mozilla.org/en/DOM/element.appendChild).
*   [`document.createElement()`](https://developer.mozilla.org/en/DOM/document.createElement).
*   [`document.createTextNode()`](https://developer.mozilla.org/en/DOM%3adocument.createTextNode).

# sql - 建模 ER 图情况

> ID：10865867
> 
> 赞同：1
> 
> 时间：2012-06-02T20:52:29.903
> 
> 标签：sql, database-design, erd

我有两个实体，名为“总公司”和“分公司”，属于某家公司。总公司可以有 1 个或多个分公司。

但是，一家公司只能有一个主要办公室，这是所有其他主要办公室的中心位置。我应该如何模拟这种情况？

1.  使用 2 个实体，`Main`并且`Branch`，其中`Main`将有一个布尔属性`Central`。我认为这很糟糕，因为它会导致传递依赖？
2.  有 3 个实体 ,`Main`和`Branch`,`Central`办公桌`Central`只有一行？
3.  或者，最后，拥有 2 个实体`Main`和`Branch`， where`Main`将与自身发生关系。

编辑：一家公司可以有多个主要办公室。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:13:45.947

出于建模目的，您可能会拥有三个实体：公司、总部、分支机构。公司将与主要办公室有一对多的关系；总公司与分公司的关系是 0 对多。这似乎捕捉到了数据的*逻辑*结构。

我想你也在问物理结构。逻辑结构可以直接映射到物理结构上，但这不是必需的。问题变成了如何使用数据。

逻辑模型的一种合理实现将有一个公司表和一个办公室表，其中：

*   一个标志，指定它是主要办公室还是分支机构
*   分支办事处指向主办事处的自加入密钥，限制“匹配回”必须是主办事处
*   所有办公室共有的一堆字段
*   一种或另一种类型共有的少量字段

另一种合理的实施方式是将主要办事处和分支机构放在不同的表中。这更接近数据的逻辑模型。但是，我想很多查询会合并这两个表，使单表方法在实践中更有效（但不一定）。

不幸的是，关系数据库并没有很好地实现类继承的思想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:13:53.657

创建实体`Company`和`Entity`办公室。`Company`从到建立 1 到 M 关系`Office`。Office 有一个类型 - 要么`Main`要么`Branch`。`Office`从自身创建 1 到 M 关系。这种递归关系是分支机构与总部的关联。最后添加一个从 Office 到 Company 的 1 对 1 关系，并使用角色名称来区分关系，以标识`Central`Office。

您还可以将 Office 设置为超类型并设置 Main 和 Branch 子类型。这将使您能够对从 Main 到 Branch 的 1 到 M 关系建模，并更明确地显示业务规则。

如果我可以在这里粘贴一个 ER 模型片段，那就太好了！关键是Office是这里唯一的实体，主分支是Office的子类型。Central 根本不是一个实体，而是办公室和公司之间的关系角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T21:00:53.630

`Main office`在和之间建立一对一的关系`Company`，然后在 和 之间建立多对一的`Branch office`关系`Main office`。

`Branch office`和之间没有直接关系`Company`，但可以很容易地通过 传递推断`Main office`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T21:13:07.913

您可能希望在 ER 模型中使用继承。您有一个通用的 Office 超类和 Branch/Main 子类。公司将与 Main Office 建立多对一关系，并与 Main Office 建立一对一关系以代表中央办公室。

# c++ - 在注入的进程中从 DLL 调用函数

> ID：10865868
> 
> 赞同：0
> 
> 时间：2012-06-02T20:52:33.790
> 
> 标签：c++, winapi, dll, dll-injection

有没有办法从该进程调用驻留在 dll 中的函数（将 dll 注入到进程中）？

我的意思是，如果我有`myDLL.dll`导出一个函数，比如说`void f(){do sth}`一个进程`myProcess`，“myDLL.dll”是使用注入的`CreateRemoteThread()`，我可以从中调用`f()`，`myProcess`那么实际上`myProcess`是启动调用这个函数的“用户”吗？

我需要这样做，因为我希望该功能`f()`不依赖于可以在任务管理器中杀死的某个程序，因为员工可以找到该进程并杀死它。我的经理要求我这样做，因为他认为员工在做其他事情而不是工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:43:40.350

只需使用通常的**LoadLibrary()**和**GetProcAddress()**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:43:11.860

您想做的事情可能行不通，而且无论如何都不是正确的方法。可以在[这里](https://stackoverflow.com/questions/6185975/prevent-user-process-from-being-killed-with-end-process-from-process-explorer)找到防止用户杀死进程的正确解决方案。

# javascript - Access-Control-Allow-Origin 不允许 Origin null

> ID：10865869
> 
> 赞同：5
> 
> 时间：2012-06-02T20:52:41.560
> 
> 标签：javascript, soundcloud

我目前正在使用 SoundCloud API，并希望在单击按钮时嵌入轨道。

我收到两个错误：

XMLHttpRequest 无法加载[http://soundcloud.com/oembed.json?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F48419073](http://soundcloud.com/oembed.json?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F48419073)。Access-Control-Allow-Origin 不允许 Origin null。

和

未捕获的类型错误：无法读取 null 的属性“html”

这是我的代码：

```
<button onclick="getPopular()">+1</button>
<div id="track"></div>

<script src="http://connect.soundcloud.com/sdk.js" type="text/JavaScript"></script>
<script type="text/JavaScript">
    SC.initialize({
        client_id: "**************",
    });

    var getPopular = function() {
        SC.get("/tracks", {limit: 1}, function(tracks) {
            var track = tracks[0];
            alert("Latest track: " + track.title);
            SC.oEmbed(track.uri, document.getElementById("track"));
            });
        };
</script> 
```

我在代码中使用警报让我知道它实际上是从 SoundCloud API 获取信息。我只是不确定还有什么阻止它嵌入。

谢谢，提前，或者看我的问题。

*   拼图

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T21:24:05.740

阅读一些关于[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的内容，以更好地了解您的主要问题。Ajax、localhost 和 Chrome/Opera 不能很好地结合在一起。[这个相关的问题](https://stackoverflow.com/a/8456586/1331430)甚至更好。

`html`您的第二个问题是由于 Ajax 调用（在您的 API 中的某处）由于第一个错误而没有返回响应。

我将提供一个解决方案，而不是解释问题（在上面的链接中对此进行了很好的解释）。由于您在 Chrome 上运行，因此有一种解决方法。使用此选项启动 chrome：

> --allow-file-access-from-files

[（我无耻地从Pointy](https://stackoverflow.com/a/5224056/1331430)借来的解决方法）

您也可以尝试在 Firefox 上运行它，或者暂时托管它。:)

* * *

PS 如果您打算从本地机器上进行认真的开发，您可以考虑安装 Apache 来通过 服务和测试内容`http://localhost`，从而解除`file:///`限制。

以下是为开发而预先配置的 Apache 和 PHP 附带的一些出色工具：

*   对于 Windows：[EasyPHP](http://www.easyphp.org/)、[WAMP](http://www.wampserver.com/en/)。
*   跨平台：[XAMPP](http://www.apachefriends.org/en/xampp.html)、[BitNami](http://bitnami.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:04:43.357

如果您要回溯，我会尝试 alert(document.getElementById("track")); 以确保你得到你的 dom 元素。

# c++ - 如何在 OpenGL 中动态添加顶点？

> ID：10865872
> 
> 赞同：2
> 
> 时间：2012-06-02T20:53:19.810
> 
> 标签：c++, opengl

例如，如果我想做这样的事情：

```
createTriangle(1.0,1.0); // Create triangle at (1,1) 
```

我将如何在代码中执行此操作？我很乐意对此进行硬编码，但如果我想动态地执行此操作，我该如何绑定并填充我的缓冲区，然后将其绑定到显示器上？我只是将顶点添加到一个大缓冲区吗？但是那我如何对不同的对象进行不同的转换呢？

编辑：为了澄清我在问我如何创建顶点然后将它们插入到图形管道中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:14:16.097

如果你想制作一款游戏，那就去做吧:) 解决问题，没有一个，是个问题！您是否规划了架构，并有在场景中表示对象及其组件（物理、图形）的想法？如果是这样，您可能在代码中找到了初始化场景的位置（所以让我们在那里创建缓冲区），并让“引擎”对象（或者只是在主/渲染/动画/循环的位置）绘制所有这些。根据对象以及您拥有的模型/3d/2d 数量，您可以将缓冲区 id 存储在对象中（正在绘制，并且在渲染循环中，“引擎”对象绑定缓冲区），或者只是存储在“引擎”中' 目的。

一切都取决于，您正在制作什么游戏，以及您面临什么规模的问题（例如，在这种情况下，您可以创建一些更大的对象管理器，包含对象组等。问题是：您真的需要这些吗？ ?他们可能会制造更多的错误，并且需要更多的时间来维护代码，而且你必须重新编写这个模块。）不要制作你不需要的结构。

一条规则可能会指导您：“让事情尽可能简单，但不要更简单”。制作游戏，而不是你想要的架构，仅仅因为 UDK 有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:57:32.783

您可能不应该有一个大缓冲区，而应该有多个共享共同事物的缓冲区，例如着色器、转换等。但是，减少缓冲区的数量是使图形运行得更快的好方法。

# file - 大量目录是否会对性能产生负面影响？

> ID：10865874
> 
> 赞同：0
> 
> 时间：2012-06-02T20:53:32.050
> 
> 标签：file, directory, directory-structure

我打算使用文件来存储数据作为 PHP 生成文件的一种缓存，以避免每次加载时都必须重新生成它们（它们的内容每天只更改一次）。

我过去注意到的一件事是，如果一个目录中有大量文件，达到数千个，FTP 程序将需要很长时间才能加载其内容，有时甚至会导致试图加载它们的计算机崩溃. 所以我正在研究一个基于树的系统，其中每个文件都根据其 ID 存储在一个子文件夹中。因此，例如 ID 为 123456 的文件将存储为`12/34/56.html`. 这样，每个文件夹最多有 100 个项目（除非有数百万个文件，但这种情况极不可能发生）。

这是一个好主意，是矫枉过正，还是没有必要？这个问题基本上归结为：“组织大量文件的最佳方式是什么？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:21:57.577

1) 答案取决于

*   操作系统（例如 Linux 与 Windows）和

*   文件系统（例如 ext3 与 NTFS）。

2) 请记住，当您随意创建一个新的子目录时，您会使用更多的 inode

3) Linux 通常比 Windows 更好地处理“许多文件/目录”

4）几个额外的链接（假设你在Linux上）：

*   [linux中单个文件夹中有200,000张图像，性能问题与否？](https://stackoverflow.com/questions/4003885/200-000-images-in-single-folder-in-linux-perfomance-issue-or-not)

*   [https://serverfault.com/questions/43133/filesystem-large-number-of-files-in-a-single-directory](https://serverfault.com/questions/43133/filesystem-large-number-of-files-in-a-single-directory)

*   [https://serverfault.com/questions/147731/do-large-folder-sizes-slow-down-io-performance](https://serverfault.com/questions/147731/do-large-folder-sizes-slow-down-io-performance)

*   [http://tldp.org/LDP/intro-linux/html/sect_03_01.html](http://tldp.org/LDP/intro-linux/html/sect_03_01.html)

# php - 指向一个虚拟目录

> ID：10865879
> 
> 赞同：0
> 
> 时间：2012-06-02T20:54:07.020
> 
> 标签：php, heroku

我在 Heroku 上部署了一个应用程序，并使用一个文件夹将所有文件放在其中，因此现在我的应用程序只能从以下位置访问：

```
http://myapp.heroku.com/app/ 
```

是否可以创建一个虚拟根指向

```
http://myapp.heroku.com -> http://myapp.heroku.com/app/ ? 
```

类似于 Apache VirtualHost 的东西？：

```
<VirtualHost 10.1.2.3>
  ServerAdmin webmaster@host.foo.com
  DocumentRoot /www/docs/host.foo.com
  ServerName host.foo.com
  ErrorLog logs/host.foo.com-error_log
  TransferLog logs/host.foo.com-access_log
</VirtualHost> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:06:35.447

是的，您也可以配置 apache，但是，这需要对您的系统进行一些更改。

我最近编译了一篇博客文章，展示了这一点（作为最后一部分），它还展示了如何为 heroku 编译自己的 PHP 扩展：

**[再次在 Heroku 上使用 PHP（作者 hakre；2012 年 5 月 20 日）](http://hakre.wordpress.com/2012/05/20/php-on-heroku-again/)**

它基本上是通过在另一个文件中使用您的附加设置扩展标准配置来工作的。查找**配置 Webroot**部分，这就是它开始的地方：

> 现在是指定 webroot 的下一个棘手部分。指定 webroot 需要更多的工作和背景信息。git-tree 中的 CVBacklogs 应用程序 webroot 是`src/app/public`. 对于 Heroku，默认情况下，webroot 是 git-tree 的根。该目录在内部映射到`/app/www`顺便说一句。`Procfile`因此，这需要创建一个在 Heroku 应用程序 web 节点启动时启动`sh`-script的所谓的。然后该脚本会修改 Apache 配置并包含您自己的配置，该配置将 webroot 设置为`/app/www/src/app/public`. 所以我们创建了 procfile、一个配置目录、脚本和 Apache 配置。准备好？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:57:50.020

你不能在 Heroku 上使用 Apache / Nginx 配置做任何事情——这些都是你无法控制的。您可以在根文件夹中执行某种基于 php 的重定向到 /app 文件夹，或者重新调整 repo，以便应用程序位于顶层。

# git - 检查提交是否是预提交钩子中的第一次提交

> ID：10865880
> 
> 赞同：1
> 
> 时间：2012-06-02T20:54:30.437
> 
> 标签：git, githooks, pre-commit-hook

目前我正在使用 pre-commit 挂钩来禁止提交到主分支（迫使我在其他分支上工作并合并更改）。这不允许我对新创建的存储库进行初始提交。如果它是第一次提交，我想添加一个检查以允许在 master 上提交。

我已经尝试了多个版本，但没有运气...

```
if [[ `git shortlog | grep -E '^[ ]+\w+' | wc -l | tr -d ' '` == 0 -a `git symbolic-ref HEAD` == "refs/heads/master" ]]
then
    echo "You cannot commit in master!"
    echo "Stash your changes and apply them to another branch"
    echo "git stash"
    echo "git checkout branch"
    echo "git stash apply"
    exit 1
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:14:48.413

只执行

```
git commit --no-verify ... 
```

第一次提交。然后你的预提交钩子可以简单地应用于主分支。

# asp.net-mvc-3 - 使用 aspx 视图引擎创建 Orchard 模块

> ID：10865883
> 
> 赞同：3
> 
> 时间：2012-06-02T20:55:12.223
> 
> 标签：asp.net-mvc-3, orchardcms

我有一个现有的 MVC3 应用程序。此应用程序使用 Razor 视图引擎和 aspx Viewengine（用于呈现 Telerik 报告）。我想将此 MVC 应用程序集成到 Orchard（以前从未使用过 Orchard）。我的问题是：这可能吗？果园可以使用 aspx 视图引擎渲染视图吗？谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:51:41.913

Orchard 可以渲染 aspx，是的，但是要使该应用程序在 Orchard 内部工作，您必须将其转换为 Orchard 模块。如果这些 aspx 报告不是 MVC 而是使用 Webforms 回发，除非将它们隔离到单独的应用程序中，否则您可能无法使用它们。

要问的问题是为什么要将此 MVC 应用程序集成到 Orchard？

# c++ - 如何将文件存储在 char* 中

> ID：10865888
> 
> 赞同：-5
> 
> 时间：2012-06-02T20:56:07.940
> 
> 标签：c++, c, arrays, char

**我的问题**是：如何`char*`在 C++ 中将 .txt 文件的内容存储在名为 m_str 的文件中？

请注意，我的文件具有我想要保留的非常明确的格式。我不想将这些行合并在一起。我希望第 1 行保持在第 1 行，第 2 行保持在第 2 行。因为最终我要序列化它`char*`并通过网络发送它，当节点接收到它时，它将反序列化然后将内容放入文件中，并像在原始文件中一样读取这些行。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T20:59:45.357

您可以将矢量用作：

```
std::ifstream file("file.txt");
std::istreambuf_iterator<char> begin(file), end;
std::vector<char> v(begin, end); //it reads the entire file into v

char *contentOfTheFile= &v[0]; 
```

文件的内容存储在`contentOfTheFile`. 你可以使用它，也可以*修改*它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:59:37.227

```
#include <vector>
#include <fstream>
#include <stdexcept>

void foo() {
  std::ifstream stream("file.txt");
  if (!stream) throw std::runtime_error("could not open file.txt.");
  std::vector<char> str(std::istreambuf_iterator<char>(stream),
                        (std::istreambuf_iterator<char>()));
  char* m_str = str.data();
} 
```

应该做你需要的。

# iphone - 添加两个 MKPolylineView

> ID：10865894
> 
> 赞同：3
> 
> 时间：2012-06-02T20:56:55.737
> 
> 标签：iphone, objective-c, mapkit, mkoverlay

我无法在 MKOverlayView 中添加两个不同颜色的不同 MKPolylineView。关于如何实现这一目标的任何想法？谢谢

这是我的代码：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
MKOverlayView* overlayView = nil;
UIColor *mycolor;

self.routeLineView = [[[MKPolylineView alloc] initWithPolyline:self.routeLine] autorelease];

mycolor = [UIColor colorWithRed:85.0/255.0 green:133.0/255.0 blue:255.0/255.0 alpha:0.6];
self.routeLineView.fillColor = mycolor;
self.routeLineView.strokeColor = mycolor;
self.routeLineView.lineWidth = 15;
[overlayView addSubview:self.routeLineView];

self.routeLineView2 = [[[MKPolylineView alloc] initWithPolyline:self.routeLine2] autorelease];
mycolor = [UIColor colorWithRed:85.0/255.0 green:19.0/255.0 blue:25.0/255.0 alpha:0.6];
self.routeLineView2.fillColor = mycolor;
self.routeLineView2.strokeColor = mycolor;
self.routeLineView2.lineWidth = 15;
[overlayView addSubview:self.routeLineView2];   

return overlayView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:21:46.383

`viewForOverlay`将为您添加到地图的每个叠加层单独调用该方法。因此，在该方法中，您只返回当前正在调用的叠加层的叠加层视图（即`overlay`参数）。

检查它正在为哪个叠加层请求视图，并仅为该叠加层创建和返回视图。

例如：

```
if (overlay == self.routeLine)
{
    //create and return overlay view for routeLine...
    //set color, etc...
    return self.routeLineView;
}
else
if (overlay == self.routeLine2)
{
    //create and return overlay view for routeLine2...
    //set color, etc...
    return self.routeLineView2;
}

return nil; 
```

不要做任何事`addSubview`。只需创建覆盖视图并返回它。

# css - css光标指针在ie7上的html select中不起作用？

> ID：10865898
> 
> 赞同：3
> 
> 时间：2012-06-02T20:57:23.883
> 
> 标签：css, internet-explorer-7

我正在尝试将光标设置为 ie7 上 html 选择的指针，但它不起作用，有没有办法解决它？

```
<select style="cursor:pointer;">
    <option>test1</option>
    <option>test2</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:22:56.170

IE7**确实**支持这种`cursor:pointer`风格。——参见[http://quirksmode.org/css/cursor.html](http://quirksmode.org/css/cursor.html)。唯一不支持它的浏览器是 IE5.5 和更早版本，但这些天您可以放心地忽略它们。

因此，如果在这种特定情况下它对您不起作用，那么通常不是 IE7 有问题，所以我怀疑`<select>`标签与它有很大关系。

当 IE 渲染一个`<select>`元素时，它实际上在幕后使用了一个 ActiveX 控件来显示操作系统的下拉选择器小部件。这与它处理其他字段类型的方式不同，这些字段类型是由浏览器渲染引擎直接渲染的。

这种差异通常对用户来说是透明的，但偶尔会出现奇怪的故障。

最常见的故障是`<select>`框会忽略`z-index`IE，并且总是显示在 IE 的顶部，如果您想做一些聪明的事情，例如在选择框和输入字段之间切换，则会使它们更难使用。此故障的解决方法通常涉及 iFrame。

我的猜测是，在选择框上设置光标类型的问题是同样的根本原因造成的另一个故障。

如果是这种情况，那么我怀疑你是否能够对此做任何事情。您可能只需要忍受旧版本的 IE 无法为这些字段设置光标。

# vb.net - VB.Net 如何将不透明度更改为图像或位图？

> ID：10865899
> 
> 赞同：0
> 
> 时间：2012-06-02T20:57:28.327
> 
> 标签：vb.net, graphics, drawing

我在 VB.Net 中有一个子程序来执行图像的不透明度，但是，它不像我期望的那样工作：

```
Public Sub mc_SetOpacity(ByRef Image As Image, ByVal Opacity As Double)
        Dim vGraphics As Graphics = Graphics.FromImage(Image)
        Dim vColorMatrix As New ColorMatrix()
        Dim vImgAtt As New ImageAttributes()

        vColorMatrix.Matrix33 = Opacity

        vImgAtt.SetColorMatrix(vColorMatrix, ColorMatrixFlag.[Default], ColorAdjustType.Bitmap)
        vGraphics.DrawImage(Image, New Rectangle(0, 0, Image.Width, Image.Height), 0, 0, Image.Width, Image.Height, GraphicsUnit.Pixel, vImgAtt)

        vGraphics.Dispose() : vGraphics = Nothing
        vImgAtt.Dispose() : vImgAtt = Nothing
    End Sub 
```

有人可以告诉我我做错了什么吗？

# c++ - 移动圆形数组元素算法？

> ID：10865902
> 
> 赞同：-1
> 
> 时间：2012-06-02T20:57:35.050
> 
> 标签：c++, algorithm

我的意思是反向抱歉，本质上，找到第一个真正的元素，然后循环向后移动，直到找到最后一个有效元素，一旦通过循环反向遍历数组找到最后一个为真的元素，循环前进并推动直到一个假被发现。

我得到了一对 bool,int 的数组。

数组总是有 4 个元素。真实的元素循环连接在一起，例如：

```
TFFT
TTFT
FFTT
FTTT
TFFF
FTTF 
```

这些都是我可以拥有的有效数组。它们包含的数字对此并不重要（对第二个值）。

我需要做的是：只保留真实的。但是我需要它们保持正确的循环顺序，以便最后一个有效的真实元素首先出现。

例如：如果我的数组是：

```
T 1
F 2
F 3
T 4 
```

新数组需要是：

```
T 4
T 1 
```

另一个例子：如果我的数组是：

```
F 1
T 2
T 3
F 4 
```

新数组需要是：

```
T 2
T 3 
```

这只是问题的一个抽象示例。实际代码复杂且难以阅读。但如果我知道该怎么做，我会没事的。

基本上我需要从第一个不连续元素顺时针走到最后一个连续元素。

谢谢

编辑：通过循环链接在一起，我的意思是，如果第 4 个和第一个元素为真，则它们没有断开，这意味着它们不连续，3、4、1 被认为是连续的。

因此，如果您有 TFTT，那么我需要它们按 3、4、1 的顺序排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:27:24.267

您可以将数组视为包含三个段：

1.  开头有 0 个或多个 T 元素
2.  中间1个或多个F元素
3.  末尾有 0 个或多个 T 元素

（如果您的数组可能根本没有任何 F 元素，那么您可以将其作为特殊情况处理。）

你想要的是一个包含段 3 和段 1 的新数组，其中段 2 被擦除。

这是执行此操作的算法的概述：

*   找到数组中第一个 F 的索引。先叫它_F。
*   找到数组中最后一个 F 的索引。称之为last_F。
*   现在您知道您的段分别占用索引 [0, first_F)、[first_F, last_F] 和 [last_F + 1, size_of_array)。
*   遍历段 [last_F + 1, size_of_array) 并将元素添加到结果数组中。
*   遍历段 [0, first_F) 并将这些元素添加到结果数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:27:27.700

假设您像这样存储元素

```
l= [(T, 1),
    (F, 2),
    (F, 3),
    (T, 4),] 
```

然后你需要加倍列表，像这样

```
l= [(T, 1),
    (F, 2),
    (F, 3),
    (T, 4),
    (T, 1),
    (F, 2),
    (F, 3),
    (T, 4),] 
```

现在你需要做的基本上是找到最长的子列表`T`

一个特殊的极端情况是原始列表是所有`T`

# app-store - 在 Apple Store 中更改卖家名称

> ID：10865903
> 
> 赞同：2
> 
> 时间：2012-06-02T20:57:49.520
> 
> 标签：app-store

有谁知道如何更改 Apple Store 中出现的开发者名称（或卖家名称）？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:09:10.400

成立公司，联系 Apple 请求更改公司注册，并准备好在需要时将您的公司文件传真给 Apple。似乎不允许其他名称更改。

# php - php : 解析 xml 文件多行字符串

> ID：10865906
> 
> 赞同：0
> 
> 时间：2012-06-02T20:58:27.497
> 
> 标签：php, xml

我需要为每条道路形成一个表格，其中包含 shape_leng 和每条道路的坐标（多线串）列 一条道路可以有任意数量的线，我需要将它们保存在一行中

xml文件是这样的格式：有几条路是多行字符串，有几条只有一行：

我试图解析它

（注意**shape_leng**对于道路来说是单一的，但对于道路来说坐标线可以是单一的或多条的。）

因此，我无法以特定顺序添加它们，例如*shape_leng*和*坐标*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:53:00.127

如果您想将所有坐标插入到单个数据库行中，我认为您必须构造 XPath 并进行一些不同的循环。遍历道路，然后使用 XPath 获取属于该道路的所有坐标。例如：

```
// get all the roads and loop through them
$roads = $xml->xpath("//e:featureMember/b:AA_ROAD");
$i=0;

while(isset($roads[$i]))
{
    // get the coordinates for the current road
    $coordinates = $roads[i]->xpath("/b:the_geom/e:MultiLineString/e:lineStringMember/e:LineString/e:coordinates");
    $shapel = $roads[i]->xpath("/b:SHAPE_Leng");

    // add a second loop to concatinate all the $coordinates
    $j=0;
    while (isset($coordinates[$j])) {
        // TODO concatinate coordinates
    }

   // insert the row
   $b=mysql_query("INSERT IGNORE INTO `new`.`road1` (`coordstr`, `shapeleng`) values (GEOMFROMTEXT(concat('MULTILINESTRING ($a )')), '$shapel[$i]') ");

    $i++;
    echo "<br />";
    echo $i;    
} 
```

# asp.net-mvc-4 - 什么是 antlr3，为什么在 VS2012 MVC4 项目中默认引用它？

> ID：10865909
> 
> 赞同：25
> 
> 时间：2012-06-02T20:58:47.093
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我在 VS2012 中创建了一个新的 MVC4 项目，并且有一个我从未见过也没有听说过的新参考，谷歌搜索似乎让我偶尔看到语法或语法帖子。你现在可以在 VS2010 中用 T4 以外的东西编写代码生成吗？如果您在项目中定义了一种语言，您可以在同一个项目中使用多种语言编写吗？它是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T09:28:43.093

MVC 4 模板使用的 WebGrease 包 (http://nuget.org/packages/WebGrease) 依赖于这个二进制文件。它与 T4、项目中的多种语言或任何其他与 IDE 相关的东西都没有任何关系。

# ruby-on-rails - 电子邮件失败 - Rails 3 Heroku 暂存应用程序

> ID：10865911
> 
> 赞同：1
> 
> 时间：2012-06-02T20:59:09.247
> 
> 标签：ruby-on-rails, email, heroku, actionmailer, delayed-job

下午好，

我有一个在 Heroku 上运行的应用程序，它具有相同的登台应用程序。两者之间的一切都应该完全相同，除了我已将 environment/production.rb 复制到 environment/staging.rb。

我也更改了环境变量：

```
RACK_ENV=staging
RAILS_ENV=staging 
```

电子邮件将在我的生产应用程序上完全按预期发送，但是当我在我的暂存应用程序中发送一封时，它失败了：

```
!ruby/ActiveRecord:Delayed::Backend::ActiveRecord::Job 
  attributes: 
    id: 6
    priority: 0
    attempts: 2
    handler: |
      --- !ruby/object:Delayed::PerformableMailer 
      args: 
      - 3
      method_name: :admin_notification_signup
      object: !ruby/class UserMailer

    last_error: |-
      {undefined method `index' for :email:Symbol
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/encodings.rb:117:in `value_decode'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/encodings.rb:101:in `decode_encode'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/fields/unstructured_field.rb:64:in `do_decode'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/fields/unstructured_field.rb:46:in `decoded'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/fields/unstructured_field.rb:115:in `fold'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/fields/unstructured_field.rb:96:in `wrapped_value'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/fields/unstructured_field.rb:60:in `do_encode'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/fields/unstructured_field.rb:42:in `encoded'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/field.rb:133:in `method_missing'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/header.rb:190:in `block in encoded'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/header.rb:189:in `each'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/header.rb:189:in `encoded'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:1708:in `encoded'
      /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:433:in `set_payload_for_mail'
      /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:413:in `block in deliver_mail'
      /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
      /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
      /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
      /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:412:in `deliver_mail'
      /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/performable_mailer.rb:6:in `perform'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:94:in `block in invoke_job'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:91:in `invoke_job'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:178:in `block (2 levels) in run'
      /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:178:in `block in run'
      /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:177:in `run'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:234:in `block in reserve_and_run_one_job'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:234:in `reserve_and_run_one_job'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:162:in `block in work_off'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:161:in `times'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:161:in `work_off'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:133:in `block (4 levels) in start'
      /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:132:in `block (3 levels) in start'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:129:in `block (2 levels) in start'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:128:in `loop'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:128:in `block in start'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/plugins/clear_locks.rb:7:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in <class:ClearLocks>'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `block in add'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/worker.rb:127:in `start'
      /app/vendor/bundle/ruby/1.9.1/gems/delayed_job-3.0.2/lib/delayed/tasks.rb:9:in `block (2 levels) in <top (required)>'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
      /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
      /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
      /app/vendor/bundle/ruby/1.9.1/bin/rake:23:in `load'
      /app/vendor/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
    run_at: 2012-06-02 20:49:55.976158 Z
    locked_at: 
    failed_at: 
    locked_by: 
    queue: 
    created_at: 2012-06-02 20:49:31.768212 Z
    updated_at: 2012-06-02 20:49:34.977784 Z 
```

有谁知道这可能是什么原因造成的？我正在使用 Roadie gem 来预先设置我的邮件样式。

user_mailer.rb：

```
class UserMailer < ActionMailer::Base

  default :css => :email, from: "Admin <admin@mysite.com>"

  host = ENV['HOST'].gsub(/http:\/\//, "")
  default_url_options[:host] = host

  ...... 
```

配置：

```
config.action_mailer.delivery_method = :smtp

config.action_mailer.default :charset => "utf-8"

config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => "587",
  :domain               => "gmail.com",
  :user_name            => ENV['EMAIL_USER'],
  :password             => ENV['EMAIL_PASS'],
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:18:34.140

作为数据点，当我遇到以下错误时，我遇到了同样的错误：

```
 default :css => :email 
```

当我没有安装 roadie 时，在我的开发邮件中。因此，您可能会仔细检查您在两个环境中拥有的 gem 是否正确。

对于我们得到的错误，我认为基本上 Rails 的邮件部分会看到该`:css => :email`部分并说“我不知道这个符号是什么意思”。通常 roadie 会拦截它或以某种方式对其进行转换，但是当我没有安装它时，它并没有将它从参数中剥离出来，所以它一直到邮件程序。

# java - 如何显示由 JFileChooser 在 java 中选择的图像（所有主要格式）

> ID：10865915
> 
> 赞同：0
> 
> 时间：2012-06-02T20:59:31.877
> 
> 标签：java, image, jfilechooser, javax.imageio

我正在开发一个图像编辑应用程序，所以想显示由 选择的图像`JFileChooser`，那么最好的方法是什么，以便它可以显示所有格式`jpg`，`png`等等`gif`。`OpenButton`用于调用文件选择器。

```
private void OpenActionPerformed(java.awt.event.ActionEvent evt) {
       int returnVal = fileChosser.showOpenDialog(this);
       if (returnVal == JFileChooser.APPROVE_OPTION) {
           File file = fileChosser.getSelectedFile();
           // What to do with the file
           // I want code for this part
           try {
             //code that might create an exception 
           } 
           catch (Exception e1) {
             e.printStackTrace();
           }
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:05:10.767

最简单的方法可能是从文件的 URL（或从文件的内容作为字节，或从文件名）创建一个 ImageIcon，并将这个 ImageIcon 包装到 JLabel 中：

```
iconLabel.setIcon(new ImageIcon(file.toURI().toURL())); 
```

但是，如果您的应用程序要编辑图像，那么您将必须学习如何操作`java.awt.Image`实例，而最简单的方法是不够的。

# php - 浏览器选项卡中的 Wordpress 导航标签

> ID：10865920
> 
> 赞同：0
> 
> 时间：2012-06-02T21:00:02.493
> 
> 标签：php, wordpress, navigation, page-title

我正在尝试编辑 header.php 以调用页面的***导航标签***，而不是***页面标题***。这是现有的代码...

```
<title><?php wp_title( '' ); ?></title> 
```

调用或回显菜单项的***导航标签的代码是什么？***

![在此处输入图像描述](../Images/477f9e330ffc0f60f4643a08598d02a3.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:32:03.210

您需要`wp_nav_menu_objects`通过首先呈现菜单以提取标签来访问 ，以便在页面上使用它`title`。

**您可以在此链接上看到一个很好的解决方案：**

[如何将当前菜单项标题作为变量？](https://wordpress.stackexchange.com/a/16337)

[先渲染菜单，然后再显示](https://wordpress.stackexchange.com/a/14466)

# android - 使 textswitcher 中的文本进入数组

> ID：10865928
> 
> 赞同：1
> 
> 时间：2012-06-02T21:01:48.287
> 
> 标签：android, arrays, listview, settext

我正在尝试从我的文本切换器中获取文本以进入数组。基本上，每当单击一个框时，我都希望将 textswitcher 中的文本添加到列表中。另外，我将此列表显示在列表视图中。我的代码如下所示：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final List<String> where = new ArrayList<String>();

    mSwitcher = (TextSwitcher) findViewById(R.id.switcher);

    mSwitcher.setFactory(this);

    Animation in = AnimationUtils.loadAnimation(this, R.anim.alpha);
    Animation out = AnimationUtils.loadAnimation(this, R.anim.beta);
    mSwitcher.setInAnimation(in);
    mSwitcher.setOutAnimation(out);

    mSwitcher.setOnClickListener(this);

    ImageView forward = (ImageView) findViewById(R.id.forward);
    forward.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            setContentView(R.layout.listview);
            setListAdapter(new ArrayAdapter<String>(Main.this,
                    android.R.layout.simple_list_item_1, where));
        }
    });   

    ImageView favorites = (ImageView) findViewById(R.id.favorite);
    favorites.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            where.add((String) mSwitcher.getContentDescription());

        }
    });

} 
```

如果有人能解释如何做到这一点以及为什么上面的代码不起作用，那将不胜感激。

# c - C中的多线程：传递结构

> ID：10865929
> 
> 赞同：2
> 
> 时间：2012-06-02T21:01:50.363
> 
> 标签：c, multithreading, pointers

我正在学习 C 中的多线程性能。当我尝试编写示例代码时，我遇到了一个问题：

```
#include <stdio.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>

typedef struct{
    int a;
    char b;
    } args;

void* some_func (void* arg)
{
    args *argsa = malloc(sizeof(args));
//copy the content of arg to argsa, 
//so changes to arg in main would not affect argsa
    *argsa = *(args*) arg; 
    int i = 10;
    for (; i > 0; i--)
    {
        usleep (1); //to give other threads chances to cut in
        printf ("This is from the thread %d\n", argsa->a);
    }
    free (argsa);
}
int main()

{
    pthread_t thread[3];
    args ss;
    int index = 0;
    ss.b = 's';
    for (; index <3 ; index++)
    {
        ss.a = index;
        if (pthread_create (thread+index, NULL, some_func, (void*)&ss ))
        {
            usleep(10);
            printf ("something is wrong creating the thread"); 
        }
    }
        pthread_join ( thread[0], NULL);
        pthread_join ( thread[1], NULL);
        pthread_join ( thread[2], NULL);
    return 0;
} 
```

我知道结构中的 char b 没用，但我只想练习传递结构。我希望代码打印出“这是来自线程 x”，其中 x 是 0、1 或 2。但是，代码目前只给了我 30 次“这是来自线程 2”的信息。我相信有什么问题

```
*argsa = *(args*) arg; 
```

但我找不到解决这个问题并获得所需输出的方法。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T21:06:07.337

因为您将相同的指针传递给所有线程。到线程 0 启动时，您已经将 ss.a 的值增加到 1（然后是 2）。

这更正确一点：

```
void* some_func (void* arg)
{
    args *argsa = (args*)arg;
    int i;
    for (i = 0; i < 10; i++)
    {
        usleep (1); //to give other threads chances to cut in
        printf ("This is from the thread %d\n", argsa->a);
    }
}
int main()
{
    pthread_t thread[3];
    args ss[3];
    int index;
    for (index = 0; index < 3; index++)
    {
        ss[index].a = index;

        if (pthread_create(&thread[index], NULL, some_func, &ss[index] ))
        {
            printf ("something is wrong creating the thread"); 
        }
    }
    pthread_join ( thread[0], NULL);
    pthread_join ( thread[1], NULL);
    pthread_join ( thread[2], NULL);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T02:03:13.260

用于解决此类问题的模式如下：

1.  创建一个结构，该结构将保存您要传递给线程的参数。

2.  用 分配这样的结构`malloc`。

3.  填写结构。

4.  将指向结构的指针传递给线程。

5.  当线程完成结构后，线程将其释放。

这假设您不需要从线程中获取任何信息。如果这样做，您可以更改它，以便加入线程的代码释放结构。这也允许结构保存回复——您加入线程，读取响应信息，然后释放结构。

不需要特殊的锁定或同步，因为当新创建的线程存在时，它是唯一接触结构的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T21:58:53.963

对不起，伙计们，但我试图解决同样的问题，但我认为还没有给出正确的答案，以解决问题。我自己尝试了这个，我想出了以下代码。现在，我编译并运行它，它按预期工作，但我仍然不相信“锁定主进程和解锁子进程”是最优雅的解决方案，所以我想知道你对它的看法. 非常感谢您的任何澄清。

这是代码：

```
#include <stdio.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>

typedef struct{
    int a;
    char b;
    } args;

pthread_mutex_t lock;

void* some_func (void *arg) {
    args argsa = *(args*)arg;
    pthread_mutex_unlock(&lock);
    printf ("This is from the thread %d\n", argsa.a);
}

int main() {
    pthread_t thread[10];
    args ss;
    int i, index=0;
    ss.b = 's';

    if (pthread_mutex_init(&lock, NULL) != 0) {
        printf("\n mutex init failed\n");
        return 1;
    }

    for (index = 0; index < 10 ; index++)
    {
        pthread_mutex_lock(&lock);
        ss.a = index;
        printf("index=%d, ", ss.a);
        if (pthread_create (thread+index, NULL, some_func, (void*)&ss ))
        {
            usleep(10);
            printf ("something is wrong creating the thread"); 
        }
    }
    for(i=0;i<10;i++)
        pthread_join ( thread[0], NULL);
    return 0;
} 
```

输出：

```
#./program
index=0, This is from the thread 0
index=1, This is from the thread 1
index=2, This is from the thread 2
index=3, This is from the thread 3
index=4, This is from the thread 4
index=5, This is from the thread 5
index=6, This is from the thread 6
index=7, This is from the thread 7
index=8, This is from the thread 8
index=9, This is from the thread 9 
```

# javascript - JavaScript 警报/确认错误

> ID：10865931
> 
> 赞同：2
> 
> 时间：2012-06-02T21:03:09.340
> 
> 标签：javascript, html, alert

目前，当新用户在我的网站上注册时，他们必须填写一些表格。如果他们的密码太短、不匹配、他们没有填写所有字段或任何其他错误，我想提醒他们。目前它没有提醒他们，所以我转而确认。那也不起作用，所以我考虑使用`showModalDiaglog`. 那也没用，我没有想法。我目前有这个：

HTML

```
<form>
    First Name:<br/> <input id="firstname"/><br/>
    Last Name: <br/> <input id="lastname"/><br/>
    Age:       <br/> <input id="age"/><br/>
    Your Email:<br/> <input id="email"/><br/>
    Username:  <br/> <input id="username"/><br/>
    Password:  <br/> <input id="password"/><br/>
    Confirm Password:<br/> <input type="password" id="passwordconfirm"/><br/>
    <br/>
    <button size=20 onClick='getRegistrationFields()'>Submit</button>
  </form>​ 
```

JavaScript

```
function getRegistrationFields() {
var first = document.getElementById("firstname").value;
var last = document.getElementById("lastname").value;
var email = document.getElementById("email").value;
var age = document.getElementById("age").value;
var username = document.getElementById("username").value;
var password = document.getElemetnById("password").value;
var confirm = document.getElementById("passwordconfirm").value;
var empty = "";

if ((first === empty) || (last === empty) || (email === empty) || (age === empty)
    || (username === empty) || (password === empty) || (confirm === empty)) {
    var message = "Not all of the fields are filled out";
    prompt(message);
    //showModalWindow("fields");
    return false;
   }

else {
   age = parseInt(age);

   if (password.length < 10) {
        var message2 = "Password must be at least 10 characters long";
        prompt(message2);
        //showModalWindow("passwordlength");
        return false;
       } 

   else if (password != confirm) {
        var message3 = "Passwords Do not match";
        prompt(message3);
        //showModalWindow("passwordmatch");
        return false;
       }

   else if (age < 18) {
        var message4 = "You must be older to register for this software.";
        prompt(message4);
        //showModalWindow("young");
        return false;
       }

   else {
        var message5 = "All of the fields are correct. We will be processing your request";
        prompt(message5);
        //showModalWindow("success");
        return true;
       }
  }
}

function showModalWindow(fileName) {
   window.showModalDialog("alerts/" + url + ".html", "", "resizable: no; height: 150;   width: 350;");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T21:13:39.223

尝试

html:

```
<button size="20" id="btn_submit">Submit</button> 
```

js：

```
var btn_submit = document.getElementById("btn_submit");
btn_submit.onclick = getRegistrationFields; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:13:18.560

有一个错字：

```
var password = document.getElemetnById("password").value; 
```

你写`getElemetnById`而不是`getElementById`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T21:18:39.590

让自己轻松一点。

```
 <input type="password" class="password" />
    <input type="text"  class="age" />
    <script type="text/javascript">
        !(function () {
            var txBxs = document.querySelectorAll('input[type=textbox]'),
                i = txBxs.length;
            while (i--) {
                tkBxs[i].onchange = textBoxCheck;
            };
        }());
        //
        function textBoxCheck() {
            //
            switch (this.class) {
                //
                case 'password':
                    if (this.value.length < 10)
                    { alert('Password to short'); };
                    break;
                    //

                case 'age':
                    if (+this.value < 18)
                    { alert('To young kiddo!'); };
                    break;
            };
        };
    </script> 
```

# php - 查询生成器中的复杂查询

> ID：10865932
> 
> 赞同：2
> 
> 时间：2012-06-02T21:03:25.133
> 
> 标签：php, symfony, doctrine-orm

如何在 Symfony 2 中使用 QueryBuilder 执行此查询

```
SELECT um.id, sv.patentgroup_id, pm.portfolio_id, pp.id
FROM sv_patents sv
LEFT JOIN pm_patentgroups pm ON sv.patentgroup_id = pm.id
LEFT JOIN pm_portfolios pp ON pm.portfolio_id = pp.id
LEFT JOIN um_users um ON pp.user_id 
```

实体类中的关联定义为

在 SvPatents 我有

```
 /**
 * @var PmPatentgroups
 *
 * @ORM\ManyToOne(targetEntity="PmPatentgroups")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="patentgroup_id", referencedColumnName="id")
 * })
 */
private $patentgroup; 
```

在 PmPatentgroups 我有

```
/**
 * @var PmPortfolios
 *
 * @ORM\ManyToOne(targetEntity="PmPortfolios")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="portfolio_id", referencedColumnName="id")
 * })
 */
private $portfolio_id; 
```

在 PmPortfolios 我有

```
/**
 * @var UmUsers
 *
 * @ORM\ManyToOne(targetEntity="UmUsers")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * })
 */
private $user; 
```

我试过了，但它给了我表格中的整个结果，看起来连接工作不正常

```
$repository = $this->getDoctrine()->getRepository('MunichInnovationGroupBundle:SvPatents');
        $qb = $repository->createQueryBuilder('sv')
        ->leftJoin('sv.patentgroup','pm')
        ->leftJoin('pm.portfolio_id','pp')
        ->leftJoin('pp.user','um')
        ->getQuery();
        $patents = $qb->getArrayResult(); 
```

我对 Symfony2 和 Doctorine2 很陌生。我阅读了整个文档，但实际上找不到如此复杂的示例，我对查询构建器如何构建查询感到有些困惑。如果你用简单的话解释一下就好了

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:44:55.223

我找到了解决我的问题的方法。如果您在表中查找特定用户的记录，那么您需要添加一个 where 子句。这就是您的查询的样子

```
$user_id = 1;
        $repository = $this->getDoctrine()->getRepository('MunichInnovationGroupBundle:SvPatents');
        $qb = $repository->createQueryBuilder('sv')
        ->select('sv')
        ->leftJoin('sv.patentgroup','pm')
        ->leftJoin('pm.portfolio_id','pp')
        ->leftJoin('pp.user','um')
        ->where('pp.user = :user_id')
        ->setParameter('user_id', $user_id)
        ->getQuery();
        $patents = $qb->getArrayResult(); 
```

就这样 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:18:34.613

你很亲密。您只需要添加一个`->select()`查询部分：

```
$repository = $this->getDoctrine()->getRepository('MunichInnovationGroupBundle:SvPatents');
$qb = $repository->createQueryBuilder('sv')
                 ->select('um.id, pm.id, pp.id') // add this part
                 ->leftJoin('sv.patentgroup','pm')
                 ->leftJoin('pm.portfolio_id','pp')
                 ->leftJoin('pp.user','um')
                 ->getQuery();
$patents = $qb->getArrayResult(); 
```

# php - 如何快速从多个目录运行相同的 php 文件？

> ID：10865935
> 
> 赞同：0
> 
> 时间：2012-06-02T21:04:24.327
> 
> 标签：php, directory, glob, mkdir

在我的**书夹**中，有近 200 个书夹，例如：

```
--books (folder)  
  |--book1(folder)
  |--book2(folder)
  |--(this continues until 200) 
```

我想要的是我需要通过从 mysql 中获取有关文件夹的数据来在 200 文件夹中创建一些目录。我可以手动制作，但是一个一个制作效率很低。

我编码`create_folder.php`并将其插入 book1 文件夹以查看它如何给出结果：

```
$current_folder = basename(dirname(__FILE__));

// I choose which directories are inserted.
$sql = "SELECT directory FROM ..............WHERE folder = {$current_folder} ";

$result = mysql_query($sql);

while ($row = mysql_fetch_array($result)) {
  mkdir($row['directory']);
} 
```

因此，在我的 book1 文件夹中，我通过数据库创建了目录。
之后，我创建了`glob.php`文件以便`create_folder.php`自动插入所有 200 个目录。（我放入`glob.php`main `books folder`。这里：

```
$content = file_get_contents("create_folder.php");

$files = glob( './*' );
foreach( $files as $file ) {
if( is_dir( $file ) && is_writable( $file ) ) {
    file_put_contents( $file . '/create_folder.php', $content );
    }
} 
```

现在，在 200 个文件夹中，`create_folder.php.`问题是，我必须`create_folder.php`在所有 200 个目录中运行才能创建子目录。有什么快速运行的方法吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:24:28.463

```
$files = glob( './*' );
foreach( $files as $file ) {
if( is_dir( $file ) && is_writable( $file ) ) {
$output = exec('php -l '.$file.'/create_folder.php',$function_output,$return);
print $output."\n";
print $return."\n";
var_dump($function_output);
    }
} 
```

在你的根目录中运行它。因此，如果您的站点位于 /home/user/site1、/home/user/site2 中，则从 /home/user 运行它。

# mobile - 无法将方向更改为纵向、移动空中应用程序

> ID：10865941
> 
> 赞同：0
> 
> 时间：2012-06-02T21:05:09.923
> 
> 标签：mobile, air, flash-builder, blackberry-playbook

我正在 Windows 7 x64 机器上使用 Flash Builder 4.6 开发 Blackberry PlayBook 应用程序。我已经安装了 Blackberry SDK，并且通常可以通过一次捕获来测试我的应用程序 - 菜单中的向左旋转和向右旋转选项显示为灰色。我没有实际的平板电脑（购买平板电脑不是解决方案），因此我绝对无法测试应用程序在纵向模式下的行为方式。

也许问题在于我的分辨率是 1280x800，没有任何办法让它变大（我原以为我能够做到这一点，并且只会激活特殊的桌面滚动机制）。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:45:13.617

您可以在 VMWare Player 中旋转 Playbook 模拟器（我也使用 Win 7，64 位） - 用鼠标拉动它的黑色角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:08:41.343

您可以在 VMWare 模拟器中检查纵向和横向模式。Playbook OS 以这种方式设计以支持两种分辨率的开发，如果您有 1280 x 800 分辨率，您可以使用 Vmware 工具中的滚动条访问大部分内容。BB Playbook os 设计有一些预定义的功能。就像底部一样，如果你从最左下到右使用手势，它将打开虚拟键盘，如果你从最右下到左做同样的事情，就像向下滑动事件一样。它会将方向从横向更改为纵向，反之亦然。

# jquery - 如何使用 eric hynds 空闲超时插件

> ID：10865944
> 
> 赞同：0
> 
> 时间：2012-06-02T21:05:45.530
> 
> 标签：jquery, plugins

我想在[此处](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)使用此插件，它会显示一条消息，说明您是否要继续会话，否则该会话将超时。它几乎是由 eric hynds 创建的插件，如果用户在一段时间内不使用计算机，那么如果用户想要继续，它将显示一条消息。如果是，则继续，如果不是，则用户超时。

但无论如何我的问题是，为了能够使用这个插件，我需要什么文件？有一个 src 文件夹，里面有 2 个 js 脚本，但是我不知道 id 我需要其中一个或两个，所以我想问问用过这个插件的人。

另外，如果我想将插件用于多个文档，那么我是否只需给它们不同的 id/class 名称？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:15:46.650

只需浏览[演示页面的](http://www.erichynds.com/examples/jquery-idle-timeout/example-mint.htm)源代码即可：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"
type="text/javascript"></script>
<script src="src/jquery.idletimer.js" type="text/javascript"></script>
<script src="src/jquery.idletimeout.js" type="text/javascript"></script>
<script type="text/javascript">
    $.idleTimeout('#idletimeout', '#idletimeout a', {
        idleAfter: 5,
        pollingInterval: 2,
        keepAliveURL: 'keepalive.php',
        serverResponseEquals: 'OK',
        onTimeout: function () {
            $(this).slideUp();
            window.location = "timeout.htm";
        },
        onIdle: function () {
            $(this).slideDown(); // show the warning bar
        },
        onCountdown: function (counter) {
            $(this).find("span").html(counter); // update the counter
        },
        onResume: function () {
            $(this).slideUp(); // hide the warning bar
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:11:35.317

您需要在工作区中添加以下两个脚本：

1.  `src/jquery.idletimer.js`
2.  `src/jquery.idletimeout.js`

像这儿：

```
<script src="src/jquery.idletimer.js" type="text/javascript"></script>
<script src="src/jquery.idletimeout.js" type="text/javascript"></script> 
```

下载它并添加到工作区，然后在 JSP 中创建一个 JSP 添加上面的代码，并包括您想要显示会话超时的任何位置。

问候， 瓦夸尔汗

# ios - 旋转 MKMapView

> ID：10865945
> 
> 赞同：2
> 
> 时间：2012-06-02T21:05:47.637
> 
> 标签：ios, ios5, mkmapview, uiinterfaceorientation

我有一个显示用户位置的 MKMapView 的工作应用程序。到现在为止还挺好：

```
- (void)viewDidLoad {
   ...
   [myMapView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
   [myMapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
} 
```

现在，我允许界面旋转：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.
    return YES;
} 
```

如果我现在将设备和中心转到用户位置

```
 [myMapView setCenterCoordinate:[myMapView userLocation].coordinate animated:YES]; 
```

mapView 将按预期旋转，但用户位置不会居中，而是位于屏幕底部（与顶部的距离与纵向模式下的距离相同）。

我希望它是居中的，虽然......

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:11:19.180

尝试在中包含高度，`setAutoresizingMask:`以便当超级视图在旋转时更改其高度时，地图视图的高度将自动更改。现在，只有宽度在调整大小，所以地图中心的 y 位置不会改变。

所以这一行：

```
[myMapView setAutoresizingMask:UIViewAutoresizingFlexibleWidth]; 
```

应该：

```
[myMapView setAutoresizingMask: 
    (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)]; 
```

此外，如果您将跟踪模式设置为`MKUserTrackingModeFollow`（地图会自动完成），则无需手动将地图置于用户位置的中心。您可能已尝试手动将其居中以解决高度问题，但修复自动调整蒙版应该消除显式居中的需要。

# javascript - Javascript 使用保留关键字作为键

> ID：10865946
> 
> 赞同：1
> 
> 时间：2012-06-02T21:05:50.393
> 
> 标签：javascript

这样做

```
var x = new Array();
x['length']=5; 
```

将使 x 成为 5 个未定义项的数组，但我实际上希望将值 '5' 存储在键 'length' 处。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T21:10:05.100

在 javascript 数组中没有键。您正在寻找对象：

```
var x = {}
x.length = 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:12:30.147

> 我必须解析一个包含许多单词的文件并存储每个单词的出现次数

使用一个对象，并让单词成为键。您没有存储顺序/有序数据，因此您不应该使用数组。

```
var word_count = {};
for (var i; i < words.length; i++) {
  var word = words[i];
  if (word_count[word]) {
    word_count[word]++;
  } else {
    word_count[word] = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T21:10:43.417

如果你想这样做，你最好创建一个对象而不是一个数组。这应该给你你想要的。

```
var x = {};
x['length'] = 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T21:15:57.553

您可以使用对象而不是数组来存储数据。但是如果你需要使用数组（你可能需要使用它们的功能），你可以削弱单词并将它们存储为数组键。

使用某种简单的规则来绕过所有可能的关键字。例如，在所有数组键前面加上“_”字符。这样，您始终可以从键中恢复原始单词，只需删除它们的第一个字符，并且您确定您没有引用 Array 对象的任何特定属性（如长度属性）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T21:21:37.670

您可以使用两种不同的语法调用 javascript 对象上的方法。熟悉的“点”语法，带括号来调用方法，以及方括号语法。您可以使用语法在 javascript 对象上“调用”方法`myObj["methodname"](args)`。当您想使用字符串动态构造方法名称时，这很方便。请记住，javascript 中的对象非常类似于哈希表（字典），其中键表示属性和函数名称。如果键的值包含一个函数，则可以调用它（使用括号）。

在您的示例中，Array 有一个名为“length”的方法。您无意中调用了它的设置器（它将数组的长度设置为空值，即未定义）。

撇开这些不谈，在这种情况下，您确实需要一个哈希（关联数组）。数组是偏移索引的数据结构。

一个简单的对象字面`myObj = {}`量就足以为您提供哈希语义（同样，javascript 中的对象已经像哈希一样），然后您可以调用`myObj.whatever = "some value"`

# file - 在 Linux 中将文本附加到多个文件的末尾

> ID：10865947
> 
> 赞同：46
> 
> 时间：2012-06-02T21:05:51.830
> 
> 标签：file, bash, unix

我需要将以下代码附加到目录及其子目录中的所有 php 文件的末尾：

```
</div>
<div id="preloader" style="display:none;position: absolute;top: 90px;margin-left: 265px;">
<img src="ajax-loader.gif"/>
</div> 
```

我试过了

```
echo "my text" >> *.php 
```

但是终端显示错误：

```
bash : *.php: ambiguous redirect 
```

我该怎么办。有数百个文件要添加此代码段，在每个文件中添加它会非常困难。提前致谢。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2014-01-10T22:42:01.270

我通常使用 tee，因为我觉得它看起来更干净一些，而且它通常适合一条线。

```
echo "my text" | tee -a *.php 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-02T21:08:59.353

你没有指定shell，你可以试试这个`foreach`命令。在 tcsh 下（我确信 bash 有一个非常相似的版本），您可以交互式地说：

```
foreach i (*.php)
foreach> echo "my text" >> $i
foreach> end 
```

`$i`每次循环都会使用每个文件的名称。

与往常一样，在对大量文件进行操作时，最好在包含示例文件的小目录中对其进行测试，以确保其按预期工作。

糟糕......`bash`在错误消息中（我会用它标记你的问题）。等效循环将是

```
for i in *.php
do 
   echo "my text" >> $i
done 
```

如果您想覆盖您所在目录下的多个目录，您可以指定

```
*/*.php 
```

而不是`*.php`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-02T21:18:11.093

[BashFAQ/056](http://mywiki.wooledge.org/BashFAQ/056)很好地解释了为什么您尝试的方法不起作用。看一看。

由于您使用的是 bash （根据您的错误），因此该`for`命令是您的朋友。

```
for filename in *.php; do
  echo "text" >> "$filename"
done 
```

如果您想从文件中提取“文本”，您可以这样做：

```
for filename in *.php; do
  cat /path/to/sourcefile >> "$filename"
done 
```

现在......您*可能*在子目录中有文件。如果是这样，您可以使用`find`命令来查找和处理它们：

```
find . -name "*.php" -type f -exec sh -c "cat /path/to/sourcefile >> {}" \; 
```

该命令使用和之`find`类的条件识别哪些文件，然后该命令的运行与我在前面的“for”循环中向您展示的基本相同。final表示这是选项参数的结尾。`-name``-type``-exec``\;``find``-exec`

您可以`man find`了解有关此的更多详细信息。

该`find`命令是可移植的，通常建议用于此类活动，特别是如果您希望您的解决方案可移植到其他系统。但是由于您当前正在使用`bash`，您还可以使用 bash 的`globstar`选项来处理子目录：

```
shopt -s globstar
for filename in **/*.php; do
  cat /path/to/sourcefile >> "$filename"
done 
```

您可以`man bash`搜索“globstar”以获取更多详细信息。此选项需要 bash 版本 4 或更高版本。

**注意**：您正在做的事情可能还有其他问题。PHP 脚本**不需要**以 结尾`?>`，因此您可能会添加脚本将尝试解释为 PHP 代码的 HTML。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-25T05:31:19.733

您可以`sed` 与 结合使用`find`。假设您的项目树是

```
 /MyProject/ 
    /MyProject/Page1/file.php
    /MyProject/Page2/file.php
    etc. 
```

1.  保存要附加的代码`/MyProject/`。称它为`append.txt`
2.  从 `/MyProject/`运行：

    ```
    find . -name "*.php" -print | xargs sed -i '$r append.txt' 
    ```

    解释：

    *   `find`照原样执行，它会查找所有 .php，包括子目录
    *   `xargs`将通过（即运行）`sed`所有刚刚找到的 .php
    *   `sed`将做附加。'$r append.txt' 表示转到文件末尾 ($) 并写入（粘贴）其中的 append.txt 中的任何内容。不要忘记`-i`，否则它只会打印出附加的文件而不保存它。

来源：[http ://www.grymoire.com/unix/Sed.html#uh-37](http://www.grymoire.com/unix/Sed.html#uh-37)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-03T06:31:57.303

您可以这样做（即使文件路径中有空间也可以工作）：

```
#!/bin/bash

# Create a tempory file named /tmp/end_of_my_php.txt
cat << EOF > /tmp/end_of_my_php.txt
</div>
<div id="preloader" style="display:none;position: absolute;top: 90px;margin-left: 265px;">
<img src="ajax-loader.gif"/>
</div>
EOF

find . -type f -name "*.php" | while read the_file
do
    echo "Processing $the_file"
    #cp "$the_file" "${the_file}.bak" # Uncomment if you want to save a backup of your file
    cat /tmp/end_of_my_php.txt >> "$the_file"
done

echo
echo done 
```

PS：必须从要浏览的目录运行脚本

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-06T16:48:46.650

灵感来自@Dantastic 答案：

```
echo "my text" | tee -a file1.txt | tee -a file2.txt 
```

# javascript - jquery 或 js 代码来获取网页中当前选定的表单项/文本/图像的确切节点数据

> ID：10865948
> 
> 赞同：0
> 
> 时间：2012-06-02T21:05:52.303
> 
> 标签：javascript, jquery

我想使用 jquery 在已单击的网页上获取该项目的确切详细信息。

该项目可以是表单项目（如复选框、文本框、文本区域等）或文本部分（在段落或 div 或其他中）或列表或图像......

我想出的是以下——

```
$(function(){
  $('*')
    .bind('click', function(event) {
        //now obtain details of item that has been clicked on...    

    });
}); 
```

现在，我想要确切的详细信息 - 即 div id/form id/paragraph #，即该特定项目的所有详细信息。我如何获得这些数据？我知道这些数据在 DOM 中可用，但我只是不知道在这种特殊情况下如何获取它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:11:27.393

`target`可能是使用事件属性的最佳方式。默认情况下，这会返回一个非 jQuery 对象，这并不是特别有用，但是将其包装起来可以`$()`解决这个问题：

```
$(function() {
    $(document).bind('click', function(event) {
        var element = $(event.target);

        alert(element.height());    // Get height   
        alert(element.attr('id'));  // Get ID attribute
        // ...
    });
}); 
```

* * *

如果你想修复你当前的方法，在你的处理程序中，你可以使用, 和朋友`click()`访问该元素的属性：`.attr()`

```
$(function() {
    $('*').bind('click', function(event) {
        alert($(this).height());    // Get height   
        alert($(this).attr('id'));  // Get ID attribute
        // ...
    });
}); 
```

`$(this)`在函数范围内引用被单击的元素。在 jQuery 文档中有一个函数列表，它们将[在此处](http://api.jquery.com/category/attributes/)和[此处返回属性。](http://api.jquery.com/category/css/)[`$.attr('id')`](http://api.jquery.com/attr/)将返回元素的 ID 以及其他内容，`$.data()`并将返回`data-*`属性。

要获取父元素的属性，只需使用`$(this).parent()`. 例如，要获取包含单击元素的表单的 ID，请使用`$(this).closest('form').attr('id');`. 一切都是相对于被点击的元素（`$(this)`），所以你可以只使用[DOM 遍历函数](http://api.jquery.com/category/traversing/)。

**但是**，使用`$('*').bind()`效率*非常*低；您正在将事件处理程序绑定到页面上的*每个*元素，而实际上您应该使用`.on()`（jQuery 1.7+）委托事件：

```
$(function() {
    $('body').on('click', '*', function(event) {
        alert($(this).height());    // Get height   
        alert($(this).attr('id'));  // Get ID attribute
        // ...
    });
}); 
```

这种方法只将一个事件绑定到页面上的*每个*元素，`<body>`而不是一个事件。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:24:29.093

使用页面点击事件的目标

```
$(document).click(function(event){ 
  /* store native dom node*/
   var tgt=event.target;
  /* store jQuery object of dom node*/
   var $tgt=$(tgt);
    /* example element details*/
    var details={ id : tgt.id, height: $tgt.height(), tag : tgt.tagName}
    console.log( details)

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T22:00:11.527

查看`event.target`，然后可以使用 jQuery 的`.parents()`方法查看每个祖先：

```
$(document).on('click', function(event) {
     var $t = $(event.target); // the element that was actually clicked
     var $p = $t.parents();    // the target's parents

     var $form = $p.filter('form').first(); // the enclosing form, if it exists
}); 
```*

# c - 使用 bash 从 C 中执行一组命令而不将它们存储在文件中

> ID：10865949
> 
> 赞同：1
> 
> 时间：2012-06-02T21:06:05.827
> 
> 标签：c, linux, bash

我有一个程序以单个规则文件的形式接受一组规则。

当我的程序认为满足其中一个条件时，我试图将与条件关联的命令块视为需要执行的独立 bash 脚本。我宁愿不处理将这些命令存储在文件中，因为这会留下不受欢迎的攻击向量。有没有办法将 bash 命令的行分隔列表作为一个组提供给 bash？我希望 bash 脚本中的条件和其他内容能够正常运行，而不仅仅是单独执行每一行。

示例规则文件：

```
if CONDITION
some nice
bash commands
pkill some process
./launching something!
endif 
```

当 CONDITION 为真时，我希望能够将四行 bash 代码作为一组 bash 命令运行，而不是彼此独立，这由我的 C 程序确定。

显然这是来自 Linux，使用 C 作为编程语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:29:12.523

你也可以也许`popen`一个`bash`过程。

但是，您的方法还建议在您的应用程序中嵌入一些脚本解释器。您是否考虑过在其中嵌入例如[lua](http://www.lua.org/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:26:09.803

最简单的方法可能是使用`sh -c "string containing commands to be executed"`. 棘手的是嵌入式换行符。如果命令本身不包含单引号，那么您可以将该多行字符串用单引号括起来。如果它可以包含单引号，您需要转义字符串以确保它们不变。

所以：

*   将命令读入缓冲区
*   对缓冲区进行转义处理；将每个替换`'`为`'\''`（记住反斜杠必须在输出中，因此 C 中的字符串看起来像`"'\\''"`）
*   格式化命令：`snprintf(command, sizeof(command), "sh -c '%s'", escaped_buffer);`
*   确保有足够的空间
*   跑`system(command);`

# php - php glob() 找不到任何文件

> ID：10865950
> 
> 赞同：1
> 
> 时间：2012-06-02T21:06:05.967
> 
> 标签：php, glob

```
$directory = $_SESSION['base_url'] . "assets/images/*.jpg";
$images = glob($directory); 
```

此代码不起作用。如果我打印出 $directory，它将与我放置一些 .jpg 文件的目录匹配。$images 仍然是空的...

正如**bsdnoobz**回答的那样，这是我的解决方案：

```
$directory = dirname(dirname(dirname(__FILE__))) . "\assets\images\\"; //escape
$images = glob($directory . "*.jpg"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T21:08:57.817

它看起来像是`$_SESSION['base_url']`指向您应用的 URL（如`http://example.com`）。您应该使用文件系统路径而不是 URL。尝试这样的事情：

```
$directory = dirname(__FILE__) . '/assets/images/*.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:07:59.487

```
$directory = $_SESSION['base_url'] . "assets/images/*.jpg";
$images = glob($directory); 
```

还有一个额外的`'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T21:08:11.997

你在 the和 the`'`之间有一个额外的`/``.jpg`

# api - 我可以使用 HTTP-Auth 之外的其他方法来对 Delicious.com API 调用进行身份验证吗？

> ID：10865952
> 
> 赞同：0
> 
> 时间：2012-06-02T21:06:14.290
> 
> 标签：api, delicious-api

我正在开发一个使用它的 API 与delicious.com 交互的应用程序。对于我的应用程序，重要的是使用 OAuth 对delicious.com API 调用进行身份验证。[我在http://delicious.com/developers](http://delicious.com/developers)上阅读了文档，除了 HTTP-Auth 之外，没有提及其他身份验证方法。

我的困惑是，当我用谷歌搜索时，有些帖子似乎引用了允许 OAuth 的 API 版本 2，但我没有找到关于 OAuth - Delicious API 和版本 2 - Delicious API 的文档。

有高手知道答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:22:57.703

我在这里复制美味的支持回复：

> 嗨弗兰克，
> 
> 谢谢你的电邮。
> 
> 虽然我们目前只提供 HTTP-Auth 支持，但我们正在开发 oAuth，并希望在未来几个月内准备好发布。
> 
> 如果您有任何其他问题或需要进一步帮助，请告诉我们。
> 
> 干杯，团队美味

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:55:32.107

我的理解是，虽然 Delicious 是 Yahoo! 的一部分！他们将身份验证与使用 OAuth 的 Yahoo 用户模型集成在一起。现在 Delicious 不再是 Yahoo! 的一部分！他们显然不能使用它，所以已经退回到 HTTP-Auth。

干杯，鲁珀特。

# odbc - 如何通过 ODBC 目录函数识别“自动增量”属性

> ID：10865956
> 
> 赞同：1
> 
> 时间：2012-06-02T21:06:53.043
> 
> 标签：odbc

在使用 ODBC 目录函数（如 SQLColumns）时，有没有办法判断列是否是自动增量（又名串行，又名身份）列？我对 MySQL 作为来源特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:09:31.690

我不了解 mysql，但某些驱动程序的 SQLColumns 会返回其他字段，这些字段可以告诉您列是否是标识列。例如，

```
SQL> create table mje(a int identity);

$ perl -e 'use DBI;use Data::Dumper;my $h = DBI->connect("dbi:ODBC:xx","xx","xx");my $s = $h->column_info(undef, undef, "mje", q/%/); print Dumper($s->{NAME});print $s->dump_results;'
$VAR1 = [
          'TABLE_CAT',
          'TABLE_SCHEM',
          'TABLE_NAME',
          'COLUMN_NAME',
          'DATA_TYPE',
          'TYPE_NAME',
          'COLUMN_SIZE',
          'BUFFER_LENGTH',
          'DECIMAL_DIGITS',
          'RADIX',
          'NULLABLE',
          'REMARKS',
          'COLUMN_DEF',
          'SQL_DATA_TYPE',
          'SQL_DATETIME_SUB',
          'CHAR_OCTET_LENGTH',
          'ORDINAL_POSITION',
          'IS_NULLABLE',
          'SS_IS_SPARSE',
          'SS_IS_COLUMN_SET',
          'SS_IS_COMPUTED',
          'SS_IS_IDENTITY',
          'SS_UDT_CATALOG_NAME',
          'SS_UDT_SCHEMA_NAME',
          'SS_UDT_ASSEMBLY_TYPE_NAME',
          'SS_XML_SCHEMACOLLECTION_CATALOG_NAME',
          'SS_XML_SCHEMACOLLECTION_SCHEMA_NAME',
          'SS_XML_SCHEMACOLLECTION_NAME',
          'SS_DATA_TYPE'
        ];
'master', 'dbo', 'mje', 'a', '4', 'int identity', 10, 4, '0', '10', '0', undef, undef, '4', undef, undef, 1, 'NO', '0', '0', '0', '1', undef, undef, undef, undef, undef, undef, '56'
1 rows 
```

以上是针对 Easysoft MS SQL Server ODBC 驱动程序的，它 a) 支持 SS_IS_IDENTITY 并且 b) 显示类型名称的“int identity”。

# c++ - printf 与 std::string?

> ID：10865957
> 
> 赞同：188
> 
> 时间：2012-06-02T21:07:06.060
> 
> 标签：c++, string, namespaces, printf, std

我的理解是，它`string`是命名空间的成员`std`，那么为什么会出现以下情况呢？

```
#include <iostream>

int main()
{
    using namespace std;

    string myString = "Press ENTER to quit program!";
    cout << "Come up and C++ me some time." << endl;
    printf("Follow this command: %s", myString);
    cin.get();

    return 0;
} 
```

![在此处输入图像描述](../Images/65893638e4a585f0138afbeb8ad43fd6.png)

每次程序运行时，都会`myString`打印一个看似随机的 3 个字符的字符串，例如上面的输出。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-06-02T21:09:02.503

它正在编译，因为`printf`它不是类型安全的，因为它使用 C 意义上的变量参数¹。`printf`没有选项`std::string`，只有 C 风格的字符串。使用其他东西代替它所期望的绝对不会给你想要的结果。这实际上是未定义的行为，所以任何事情都可能发生。

由于您使用的是 C++，因此解决此问题的最简单方法是使用 正常打印它`std::cout`，因为`std::string`通过运算符重载支持它：

```
std::cout << "Follow this command: " << myString; 
```

如果出于某种原因，您需要提取 C 风格的字符串，您可以使用 的`c_str()`方法`std::string`来获取一个`const char *`以 null 结尾的字符串。使用您的示例：

```
#include <iostream>
#include <string>
#include <stdio.h>

int main()
{
    using namespace std;

    string myString = "Press ENTER to quit program!";
    cout << "Come up and C++ me some time." << endl;
    printf("Follow this command: %s", myString.c_str()); //note the use of c_str
    cin.get();

    return 0;
} 
```

如果您想要一个类似 但类型安全的函数`printf`，请查看可变参数模板（C++11，自 MSVC12 起在所有主要编译器上都支持）。[你可以在这里](https://web.archive.org/web/20131018185034/http://www.generic-programming.org/~dgregor/cpp/variadic-templates.html)找到一个例子。我知道在标准库中没有这样的实现，但在 Boost 中可能有，特别是[`boost::format`](http://www.boost.org/doc/libs/1_49_0/libs/format/).

* * *

[1]：这意味着您可以传递任意数量的参数，但函数依赖于您告诉它这些参数的数量和类型。在这种情况下`printf`，这意味着具有编码类型信息的字符串，例如`%d`含义`int`。如果您对类型或数字撒谎，该函数没有标准的获知方式，尽管一些编译器能够在您撒谎时检查并发出警告。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-02T21:36:08.567

请不要使用`printf("%s", your_string.c_str());`

改为使用`cout << your_string;`。简短、简单且类型安全。事实上，当您编写 C++ 时，您通常希望`printf`完全避免使用它——它是 C 的遗留物，在 C++ 中很少需要或有用。

至于**为什么**要使用`cout`而不是`printf`，原因很多。以下是一些最明显的示例：

1.  如问题所示，`printf`不是类型安全的。如果您传递的类型与转换说明符中给出的类型不同，`printf`将尝试使用它在堆栈上找到的任何内容，就好像它是指定的类型一样，给出未定义的行为。一些编译器可以在某些情况下警告这一点，但一些编译器不能/根本不会，而且在任何情况下都不能。
2.  `printf`不可扩展。您只能将原始类型传递给它。它理解的一组转换说明符在其实现中是硬编码的，您无法添加更多/其他。大多数编写良好的 C++ 应该主要使用这些类型来实现面向正在解决的问题的类型。
3.  它使体面的格式化变得更加困难。举一个明显的例子，当您打印数字供人们阅读时，您通常希望每隔几位插入数千个分隔符。用作分隔符的确切数字和字符数各不相同，但`cout`也包括在内。例如：

    ```
    std::locale loc("");
    std::cout.imbue(loc);

    std::cout << 123456.78; 
    ```

    无名语言环境（“”）根据用户的配置选择一个语言环境。因此，在我的机器（配置为美国英语）上，它打印为`123,456.78`. 对于将计算机配置为（例如）德国的人，它会打印出类似`123.456,78`. 对于为印度配置它的人，它会打印为`1,23,456.78`（当然还有很多其他的）。我得到`printf`了一个结果：`123456.78`. 它是一致的，但对世界各地的每个人来说都是*错误的。*本质上，解决它的唯一方法是单独进行格式化，然后将结果作为字符串传递给`printf`，因为`printf`它本身根本*无法*正确完成这项工作。

4.  尽管它们非常紧凑，但`printf`格式字符串可能非常难以阅读。即使在几乎每天都在使用的 C 程序员中`printf`，我猜至少有 99% 的人需要查明`#`in 的`%#x`含义，以及它与`#`in 的`%#f`含义有何不同（是的，它们的含义完全不同）。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-06-02T21:08:56.180

`myString.c_str()`如果您希望类似 c 的字符串 ( `const char*`) 与 printf 一起使用，请使用

谢谢

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-11-26T17:27:18.277

使用[std::printf](http://en.cppreference.com/w/cpp/io/c/fprintf)和 c_str() 示例：

```
std::printf("Follow this command: %s", myString.c_str()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-18T10:52:03.717

`printf`接受可变数量的参数。那些只能有普通旧数据（POD）类型。传递除 POD 之外的任何内容的代码`printf`只能编译，因为编译器假定您的格式正确。`%s`意味着相应的参数应该是指向 a 的指针`char`。在您的情况下，它是`std::string`not `const char*`。`printf`不知道它，因为参数类型丢失并且应该从格式参数中恢复。当将该`std::string`参数转换`const char*`为结果指针时，将指向一些不相关的内存区域，而不是您想要的 C 字符串。因此，您的代码会打印出乱码。

虽然`printf`是[打印格式化文本的绝佳选择](http://glampert.com/2014/07-08/they-see-me-printfin-they-hatin/)（尤其是如果您打算使用填充），但如果您没有启用编译器警告，则可能会很危险。**始终启用警告**，因为这样的错误很容易避免。如果家庭能够以更快、更漂亮的方式完成相同的任务，就没有理由使用笨拙的`std::cout`机制。`printf`只要确保您已启用所有警告 ( `-Wall -Wextra`)，您就会很好。如果您使用自己的自定义`printf`实现，您应该使用[使编译器能够根据提供的参数检查格式字符串](http://unixwiz.net/techtips/gnu-c-attributes.html)`__attribute__`的机制来声明它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-17T05:51:09.863

如果大小很重要， Printf 实际上非常好用。这意味着，如果您正在运行一个内存问题的程序，那么 printf 实际上是一个非常好的解决方案。Cout 本质上是移动位来为字符串腾出空间，而 printf 只是接受某种参数并将其打印到屏幕上。如果您要编译一个简单的 hello world 程序，printf 将能够在不到 60、000 位的时间内编译它，而 cout 则需要超过 100 万位才能编译。

对于您的情况，id 建议使用 cout 只是因为它使用起来更方便。虽然，我认为 printf 是一件好事。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-15T20:02:23.483

主要原因可能是 C++ 字符串是一个包含当前长度值的结构，而不仅仅是以 0 字节结尾的字符序列的地址。Printf 及其亲属希望找到这样的序列，而不是结构，因此会被 C++ 字符串混淆。

就我自己来说，我相信 printf 有一个 C++ 语法特性不容易填满的地方，就像 html 中的表结构有一个 div 不容易填满的地方一样。正如 Dykstra 后来关于 goto 所写的那样，他并不打算创立一种宗教，实际上只是反对将其用作弥补设计不佳的代码的工具。

如果 GNU 项目将 printf 系列添加到他们的 g++ 扩展中，那就太好了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-03T15:47:19.713

您可以使用`snprinft`来确定所需的字符数并分配正确大小的缓冲区。

```
int length = std::snprintf(nullptr, 0, "There can only be %i\n", 1 );
char* str = new char[length+1]; // one more character for null terminator
std::snprintf( str, length + 1, "There can only be %i\n", 1 );
std::string cppstr( str );
delete[] str; 
```

这是对 cppreference.com 上[示例](https://en.cppreference.com/w/cpp/io/c/fprintf)的小改编

# winforms - 使自定义 WinForms 控件与讲述人一起使用（辅助功能）

> ID：10865961
> 
> 赞同：3
> 
> 时间：2012-06-02T21:08:27.473
> 
> 标签：winforms, accessibility

我有一个从**Control**类派生的自定义列表控件。

[我需要通过MSAA (Microsoft Active Accessibility)](http://msdn.microsoft.com/en-us/library/windows/desktop/gg712256.aspx)让残障人士可以访问它。

到目前为止，我知道我需要创建从**ControlAccessibleObject**继承的类，然后在**Control.CreateAccessibilityInstance**方法覆盖中返回其实例。

问题是我已经实现了这个，它似乎不适用于 Windows 讲述人工具。

例如，当我单击标准 ListView 中的某个项目时，讲述人会说出所选项目的文本。

但是当我单击控件中的项目时，什么也没有发生（尽管在我的**ControlAccessibleObject**实现中请求了项目文本）

我以为我也需要实现**IAccessible**，但是我查看了 .NET refrence 源代码，而 ListView 没有实现这个接口。我想这可能是在包装的 Win32 控件中实现的，所以我看了一下类似的控件——DataGridView——但这也没有实现 IAccessible。

DataGridView 有辅助功能支持，但是虽然我复制了 DataGridViewAccessibleObject 的所有重要代码，但它在我的控件中仍然不起作用。

是否有人对 WinForms 中的自定义控件可访问性有更多经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:42:22.377

好的，我找到了：**Control.AccessibilityNotifyClients**方法很神奇。必须在派生控件中重写此方法。

但是，为了让屏幕阅读器朗读文本，我不得不调用：

```
AccessibilityNotifyClients(AccessibleEvents.Focus, index);
AccessibilityNotifyClients(AccessibleEvents.Selection, index); 
```

这里的**索引**是新选择的项目的索引。

我在 CheckedListBox 的 .NET 参考源中找到了这段代码。当我单独使用 Focus 或 Selection 事件时，屏幕阅读器没有反应。语音文本还取决于与新选择的项目相对应的**AccessibleObject**状态。

# ruby-on-rails - rails-breadcrumb 和 I18n

> ID：10865962
> 
> 赞同：0
> 
> 时间：2012-06-02T21:08:40.327
> 
> 标签：ruby-on-rails, internationalization, breadcrumbs

自从我本地化了我的应用程序以来，我遇到了[rails-breadcrumb的问题。](https://github.com/fesplugas/rails-breadcrumbs)

在我的控制器中，我有这个：

```
class FooController < PrivateController
  add_breadcrumb I18n.t('breadcrumbs.foo.index'), :foo_url  
end 
```

当我的面包屑显示时，本地化字符串总是取自`en.yml`，无论我设置哪种语言`I18n.locale`

在查看了代码之后，它`add_breadcrumb`充当了 a `before_filter`，经过一些测试，我得出的结论是，即使 的内容`add_breadcrumb`具有正确的语言环境，似乎传递的值也没有。

如果我试试这个：

```
add_breadcrumb I18n.t('breadcrumbs.foo.index', :locale => "fr"), :foo_url 
```

一切顺利。

我如何强制我的字符串正确本地化？

谢谢你提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:45:31.457

我终于得到了这个。在我确定我的问题是因为 I18n 对我的语言环境一无所知，因为我要求它翻译一些东西后，我对 rails-breadcrumb 进行了猴子修补以管理本地化本身。

知道我将符号作为第一个参数传递，然后我调用`I18n.translate()`rails-breadcrumb

```
add_breadcrumb (:'breadcrumbs.foo.index'), :foo_url 
```

d

```
# config/initializers/rails-breadcrumb-fix.rb
module Rails
  module Breadcrumbs

    class ActionController::Base

      protected

      def add_breadcrumb(name, url = '')
        @breadcrumbs ||= []
        # if given `name` is a Symbol, we localize it
        if name.is_a?(Symbol)
          name = I18n.t(name)
        end
        url = send(url) if url.is_a?(Symbol)
        @breadcrumbs << [name, url]
      end

      def self.add_breadcrumb(name, url, options = {})
        before_filter options do |controller|
          controller.send(:add_breadcrumb, name, url)
        end
      end

    end

    module Helper

      def breadcrumbs(separator = "&rsaquo;")
        @breadcrumbs.map do |txt, path|
          link_to_unless (path.blank? || current_page?(path)), h(txt), path
        end.join(" #{separator} ").html_safe
      end

    end

  end
end

ActionController::Base.send(:include, Rails::Breadcrumbs)
ActionView::Base.send(:include, Rails::Breadcrumbs::Helper) 
```

# haskell - 使用 state monad 隐藏显式状态

> ID：10865963
> 
> 赞同：10
> 
> 时间：2012-06-02T21:08:49.130
> 
> 标签：haskell, state, monads, monomorphism-restriction

我正在尝试用 Haskell 编写一个小游戏，并且需要传递大量的状态。我想尝试用 State monad 隐藏状态

现在我遇到了一个问题：接受状态和参数的函数很容易在状态单子中工作。但也有一些函数只将状态作为参数（并返回修改后的状态，或者可能是其他东西）。

在我的代码的一部分中，我有这一行：

```
let player = getCurrentPlayer state 
```

我希望它不带状态，而是写

```
player <- getCurrentPlayerM 
```

目前，它的实现看起来像这样

```
getCurrentPlayer gameState = 
  (players gameState) ! (on_turn gameState) 
```

并且通过这样编写它似乎很简单，使其在 State monad 中工作：

```
getCurrentPlayerM = do state <- get
                       return (players state ! on_turn state) 
```

但是，这引起了 ghc 的投诉！它说，没有因使用“get”而产生 (MonadState GameState m0) 的实例。我已经重写了一个非常相似的函数，除了它的 State monad 形式不是无效的，所以我有预感，我像这样重写了它：

```
getCurrentPlayerM _ = do state <- get
                         return (players state ! on_turn state) 
```

果然，它有效！但是我当然得把它叫做getCurrentPlayerM()，我觉得这样做有点傻。传递参数是我首先要避免的！

另一个惊喜：在 ghci 中查看它的类型我得到

```
getCurrentPlayerM :: MonadState GameState m => t -> m P.Player 
```

但是如果我尝试在我的代码中显式设置它，我会收到另一个错误：“约束 MonadState GameState m 中的非类型变量参数”并提供允许它的语言扩展。我想这是因为我的 GameState 是一种类型而不是类型类，但为什么它在实践中被接受，但当我试图明确说明它时我更困惑。

所以总结一下：

1.  为什么我不能在 State monad 中编写空函数？
2.  为什么我不能声明我的解决方法函数实际具有的类型？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T22:07:34.777

问题是您没有为函数编写类型签名，并且适用单态限制。

当你写：

```
getCurrentPlayerM = ... 
```

您正在编写没有类型声明的顶级一元约束值定义，因此 Haskell 编译器将尝试推断定义的类型。然而，单态限制（字面意思是：单一形状限制）表明所有具有推断类型约束的顶级定义都必须解析为具体类型，即它们不能是多态的。

* * *

为了解释我的意思，举这个更简单的例子：

```
pi = 3.14 
```

在这里，我们定义`pi`没有类型，所以 GHC 推断类型`Fractional a => a`，即“任何类型`a`，只要它可以被视为分数”。然而，这种类型是有问题的，因为它意味着它`pi`不是一个常数，即使它看起来是。为什么？因为 的值`pi`将根据我们想要的类型重新计算。

如果我们有`(2::Double) + pi`，`pi`将是一个`Double`。如果我们有`(3::Float) + pi`，`pi`将是一个`Float`。每次`pi`使用时，都必须重新计算（因为我们不能存储**所有**可能的小数类型的替代版本，可以吗？）`pi`。这对于简单的文字来说很好，但是如果我们想要更多的小数并使用一种奇特的算法来计算它呢？我们不希望每次使用时都重新计算它，对吗？**`3.14``pi``pi`**

 **这就是为什么 Haskell 报告指出顶级一元类型约束定义必须具有单一类型（单态）以避免这个问题。在这种情况下，`pi`将`default`获得`Double`. 如果需要，您可以使用`default`关键字更改默认数字类型：

```
default (Int, Float)

pi = 3.14 -- pi will now be Float 
```

但是，在您的情况下，您将获得推断的签名：

```
getCurrentPlayerM :: MonadState GameState m => m P.Player 
```

这意味着：“对于任何存储`GameState`s 的状态单子，检索一个玩家。” 然而，由于应用了单态限制，Haskell 被迫尝试通过为`m`. 但是，它找不到一个，因为没有像数字那样默认状态单子的类型，所以它放弃了。

你要么想给你的函数一个明确的类型签名：

```
getCurrentPlayerM :: MonadState GameState m => m P.Player 
```

...但是您必须添加`FlexibleContexts`Haskell 语言扩展才能使其工作，方法是在文件顶部添加以下内容：

```
{-# LANGUAGE FlexibleContexts #-} 
```

或者，您可以明确指定您想要的状态 monad：

```
getCurrentPlayerM :: State GameState P.Player 
```

您还可以通过添加扩展来禁用单态限制；但是，添加类型签名要好得多。

```
{-# LANGUAGE NoMonomorphismRestriction #-} 
```

* * *

**PS。**如果您有一个将您的状态作为参数的函数，您可以使用：

```
value <- gets getCurrentPlayer 
```

您还应该考虑将[Lenses](http://hackage.haskell.org/package/data-lens)与[State monads](http://hackage.haskell.org/package/data-lens-fd)一起使用，它可以让您为隐式状态传递编写非常简洁的代码。**

# xcode - Scripting Bridge 和 Apple Mail

> ID：10865969
> 
> 赞同：0
> 
> 时间：2012-06-02T21:09:25.773
> 
> 标签：xcode, cocoa, email, scripting, apple-mail

我正准备第一次尝试实施 Scripting Bridge，特别是允许我的程序构建电子邮件并将其发送给选择加入电子邮件数据库的个人（或所有）成员。

不幸的是，我已经停留在第一步……创建 Mail.h 文件。

根据苹果的文档：

> 要创建头文件，您需要同时运行两个命令行工具（sdef 和 sdp），其中一个的输出通过管道传输到另一个。这是推荐的语法：
> 
> sdef /path/to/application.app | sdp -fh --basename 应用程序名称

但是，当我尝试执行此操作时，我收到以下错误：

> -bash：sdef：找不到命令
> 
> -bash：sdp：找不到命令

我的猜测是我正在尝试执行（显然）未安装在我的系统上的程序，这是运行 Lion（10.7.4）的 MacBook Pro

快速的谷歌搜索找到了 v10.4 的旧版本 sdef，但我现在想知道：这个过程仍然是推荐的过程，还是有另一种方法我应该生成 Mail.h 头文件？Apple 的文档在这一点上相当含糊。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:37:39.797

经过一些额外的研究和实验，我能够通过允许 XCODE 创建头文件，而不是从命令行手动进行，从而使一切正常工作。

XCODE 也使用 sdp 和 sdef 命令，但访问它们没有问题。我仍然不完全确定为什么我不能在 bash shell 中运行命令，但我怀疑它们可能必须从 root 用户运行？

无论如何，这里有一个指向 Apple 文档的链接，其中概述了我为使一切正常工作所采取的步骤：

[https://developer.apple.com/library/mac/#samplecode/SBSystemPrefs/Listings/ReadMe_txt.html](https://developer.apple.com/library/mac/#samplecode/SBSystemPrefs/Listings/ReadMe_txt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:19:45.043

安装命令行工具后，您应该能够使用 sdef 和 sdp。这些是自 XCode 4.3 以来的可选安装。

[http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html#//apple_ref/doc/uid/1006-SW2](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html#//apple_ref/doc/uid/1006-SW2)

# parsing - 使用 Excel 中的 ID 列表以 fasta 格式保存来自 NCBI 的序列

> ID：10865972
> 
> 赞同：1
> 
> 时间：2012-06-02T21:09:45.303
> 
> 标签：parsing, bioinformatics, biopython

我对使用 python 还很陌生，我喜欢它。但是我被这个问题困住了，我希望你能给我一个关于我所缺少的东西。

我在一个 excel 文件中有一个基因 ID 列表，我正在尝试使用 xrld 和 biopython 来检索序列并将我的结果（以 fasta 格式）保存到文本文档中。到目前为止，我的代码允许我在 shell 中查看结果，但它只将最后一个序列保存在文档中。

这是我的代码：

```
import xlrd
import re
book = xlrd.open_workbook('ids.xls')
sh = book.sheet_by_index(0)
for rx in range(sh.nrows):
    if sh.row(rx)[0].value:
        from Bio import Entrez
        from Bio import SeqIO
        Entrez.email = "mail@xxx.com"
        in_handle = Entrez.efetch(db="nucleotide", rettype="fasta", id=sh.row(rx)[0].value)
        record = SeqIO.parse(in_handle, "fasta")
        for record in SeqIO.parse(in_handle, "fasta"):
            print record.format("fasta")
        out_handle = open("example.txt", "w")
        SeqIO.write(record, out_handle, "fasta")
        in_handle.close()
        out_handle.close() 
```

正如我所提到的，文件“example.txt”只有最后一个显示外壳的序列（fasta 格式）。

谁能帮我在同一个文档中获取我从 NCBI 检索到的所有序列？

非常感谢

安东尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T06:14:43.627

快到了我的朋友们！

*主要*问题是您的 For 循环会在每个循环中不断关闭文件。我还修复了一些应该加快代码速度的小问题（例如，您在每个循环中不断导入 Bio）。

***使用这个新代码：***

```
out_handle = open("example.txt", "w")
import xlrd
import re
from Bio import Entrez
from Bio import SeqIO
book = xlrd.open_workbook('ids.xls')
sh = book.sheet_by_index(0)
for rx in range(sh.nrows):
    if sh.row(rx)[0].value:
        Entrez.email = "mail@xxx.com"
        in_handle = Entrez.efetch(db="nucleotide", rettype="fasta", id=rx)
        record = SeqIO.parse(in_handle, "fasta")
        SeqIO.write(record, out_handle, "fasta")
        in_handle.close()
out_handle.close() 
```

**如果还是报错，那一定是你的excel文件有问题。如果错误仍然存​​在，请将此发送给我，我会提供帮助:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:08:55.323

我对 python 也很陌生，也很喜欢它！这是我第一次尝试回答问题，但也许是因为你的循环结构和“w”模式？也许尝试将 ("example.txt", "w") 更改为附加模式 ("example.txt", "a")，如下所示？

```
import xlrd
import re
book = xlrd.open_workbook('ids.xls')
sh = book.sheet_by_index(0)
for rx in range(sh.nrows):
    if sh.row(rx)[0].value:
        from Bio import Entrez
        from Bio import SeqIO
        Entrez.email = "mail@xxx.com"
        in_handle = Entrez.efetch(db="nucleotide", rettype="fasta", id=sh.row(rx)[0].value)
        record = SeqIO.parse(in_handle, "fasta")
        for record in SeqIO.parse(in_handle, "fasta"):
            print record.format("fasta")
        out_handle = open("example.txt", "a")
        SeqIO.write(record, out_handle, "fasta")
        in_handle.close()
        out_handle.close() 
```

# python - 将字典中的键*值相乘？

> ID：10865979
> 
> 赞同：4
> 
> 时间：2012-06-02T21:11:17.427
> 
> 标签：python

```
a = {2: 4, 3: 2, 5: 1, 7: 1} 
```

键代表素数；这些值代表计数器。我想通过遍历字典键*值并对总数求和来计算你得到的数字。最Pythonic的方法是什么？

```
>>> [k*v for k,v in a.items()]
[8, 6, 5, 7] 
```

但

```
>>> sum(k*v for k,v in a.items())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not callable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T21:15:06.220

这边走：

```
sum(k*v for k,v in a.items()) 
```

或使用语义命名：

```
sum(p*c for p,c in primesToCounts.items()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T21:16:00.020

怎么样：

```
>>> a = {2: 4, 3: 2, 5: 1, 7: 1}
>>> [key * val for key, val in a.items()]
... [8, 6, 5, 7]
>>> sum([key * val for key, val in a.items()])
... 26 
```

这很pythonic。

# asp.net - 使用 sql 查询发布数据

> ID：10865980
> 
> 赞同：2
> 
> 时间：2012-06-02T21:11:19.380
> 
> 标签：asp.net, sql-server, post

我正在实施一个短信验证系统。该系统由第三方公司提供。它可以通过使用 GET 和 POST 来完成。两者都完美无缺。

使用获取：

```
http://srviceprovider.com/sms.aspx?text=SomeText&To=ReceiverPhoneNumber&from=SenderPhoneNumber&username=MyUserName&Password=MyPassword 
```

那只是提供我的凭据

提供者在其示例中显示的第二种方式是：

发布使用：

```
Response.Write(); 
```

这看起来比第一个好。但仍然可以访问用户名和密码。我想知道是否有办法从服务器（不是客户端）发布数据，并且可能正在使用 sql 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:47:49.747

1.  使用 SSL 通信。去谷歌上查询。
2.  您不应该在数据库中发送甚至存储纯密码。它必须使用某些加密算法（如 SHA）在任何地方进行加密。例如。密码 abc 将被加密并保存为 123。密码可以在客户端自己加密，然后发送到服务器。即使有人在字符串或数据库表中看到密码值 (123)，他也无法在密码框中使用它，因为 123 的加密值将是 xyz 之类的其他值。阅读有关 SHA 算法的更多信息，您将自己了解一切。干杯，一切顺利！

根据我的理解，您希望发布到网络服务器，而不是从您的客户端。您可以使用 WebRequest 类（在服务器端）将数据发布到第 3 方的 Web 服务器。此外，如果您希望使整个过程异步，您可以使用 Win 服务/WCF 服务在某些 Web 服务器上发布数据。在这里，您将首先使用从客户端触发的查询来更新 db 表中的字段/标志。接下来，您的 win/wcf 服务将从表中选择这些记录，形成所需的查询，最后将其发布到某个 Web 服务器上。有关 WebRequest 类的更多信息，您可以通过此[链接](http://msdn.microsoft.com/en-us/library/debx8sh9%28v=vs.85%29.aspx)。

# sql-server - 艰难的 Sql Server 连接查询

> ID：10865982
> 
> 赞同：0
> 
> 时间：2012-06-02T21:11:58.087
> 
> 标签：sql-server, sql-server-2008, reporting-services

我正在为我的学期考试建立一个申请，该考试将在 20 天内进行。我的应用程序应该可以帮助教师更轻松地制定我们的教师时间表。

我正在使用数据库方法（Sql Server 2008 和 Delphi XE2）。我有几张描述学生编队结构的表格。所以我有`Years`, `Series`,`Specializations`和. 就像图像中的包含、包含、包含和可能包含或不包含。我也有带有, ,和的表格。`Groups``SemiGroups``Years``Series``Series``Specializations``Specializations``Groups``Groups``SemiGroups``Courses``Teachers``ClassRooms``Days``HourlyIntervals`

有几个条件：

1.  教师可以学习一门或多门专业课程，或一个或多个小组，或一个或多个半小组的课程。

2.  第二个条件是课程有 3 种类型：教学课程、神学院、实验室（每个课程名称只有三种可能的两种）。（存储在 Scheduler.CourseType char(3) 列中）

3.  第三个：课程可以保存在一个学期的所有周数，或以奇数周数，或可被2整除的周数。（存储在Scheduler.Week char（3）列中）

所以我将相关性存储在 SchedulerTable 中。

[![在此处输入图像描述](../Images/20e888cbb5718d7b69da1ba5b1383f9e.png "点击放大")](https://i.stack.imgur.com/gUG66.png "点击放大")

因此，如果一个小组有某位老师的课程，我将只介绍相应的 ID。

我构建了几乎所有的数据介绍表格，现在我在应用程序的报告部分。我正在使用 MSSQL 2008 中的 Report Services。我想列出一个调度程序，该调度程序将包括某个专业化的所有相关性（包括组和/或半组）。我已经设法展示了属于特定专业的组的所有相关性，但我无法展示专业和半组课程。

这是从某个专业化返回我组相关性的查询。

```
SELECT    Days.DayName, HourlyIntervals.HourlyIntervalName, Scheduler.Week, Scheduler.CourseType,  Courses.CourseName, ClassRooms.ClassRoomName, Teachers.TeacherName,Specializations.SpecName, Groups.GroupsName
 FROM   Scheduler INNER JOIN
        Groups ON Scheduler.GroupID = Groups.GroupID INNER JOIN
        Days ON Scheduler.DayID = Days.DayID INNER JOIN
        HourlyIntervals ON Scheduler.HourlyIntervalID = HourlyIntervals.HourlyIntervalID INNER JOIN
        Teachers ON Scheduler.TeacherID = Teachers.TeacherID INNER JOIN
        Courses ON Scheduler.CourseID = Courses.CourseID INNER JOIN
        ClassRooms ON Scheduler.ClassRoomID = ClassRooms.ClassRoomID INNER JOIN
        Specializations ON Groups.IDSpec = Specializations.IDSpec

 WHERE  (Specializations.ID = @SpecID)

 ORDER BY Days.DayID, HourlyIntervals.HourlyIntervalID 
```

但我希望它返回特定专业化的半组、组和专业化的关联。我试图用这个 Scheduler.SemiGroupID=Semigroups.SemigroupID 添加一个连接，但查询返回 0 结果。我不知道它是否可以完成我想要的，但我会感谢任何给我指出想法的人。或者我应该为我的相关表 ( `SchedulerTable`) 使用另一种结构。

这是我想获得[的示例报告（PDF 文件）：](http://feaa.ucv.ro/cm/images/stories/docs/Licenta2012/Orar%20anul%20I%2C%20Sem%20II%2C%202011-2012-bun.pdf)

编辑原因：更好地解释问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:47:11.233

那么为什么这不是解决方案呢？

```
SELECT    Days.DayName, HourlyIntervals.HourlyIntervalName, Scheduler.Week, Scheduler.CourseType,  Courses.CourseName, ClassRooms.ClassRoomName, Teachers.TeacherName,Specializations.SpecName, SemiGroups.GroupsName
 FROM   Scheduler 
  INNER JOIN SemiGroups On Scheduler.SemiGroupId = SemiGroups.SemiGroupId        
  INNER JOIN Groups ON SemiGroups.GroupID = SemiGroups.Groups
  INNER JOIN Days ON Scheduler.DayID = Days.DayID 
  INNER JOIN HourlyIntervals ON Scheduler.HourlyIntervalID = HourlyIntervals.HourlyIntervalID 
  INNER JOIN Teachers ON Scheduler.TeacherID = Teachers.TeacherID 
  INNER JOIN Courses ON Scheduler.CourseID = Courses.CourseID 
  INNER JOIN ClassRooms ON Scheduler.ClassRoomID = ClassRooms.ClassRoomID 
  INNER JOIN Specializations ON Groups.IDSpec = Specializations.IDSpec

 WHERE  (Specializations.ID = @SpecID)
 ORDER BY Days.DayID, HourlyIntervals.HourlyIntervalID 
```

尽管我承认对于 Schedules 中的 GroupID 是否是该行中 SemiGroupID 的 GroupID 感到皱眉。看起来那位没有标准化。

# java - 用匹配的正则表达式的一部分替换字符串

> ID：10865985
> 
> 赞同：12
> 
> 时间：2012-06-02T21:12:16.533
> 
> 标签：java, regex

我有一长串。我想用匹配的正则表达式（组）的一部分替换所有匹配项。

例如：

```
String = "This is a great day, is it not? If there is something, THIS IS it. <b>is</b>". 
```

我想`"is"`用，比方说，替换所有的词`"<h1>is</h1>"`。案件应与原案保持一致。所以我想要的最后一个字符串是：

```
This <h1>is</h1> a great day, <h1>is</h1> it not? If there <h1>is</h1> something, 
THIS <h1>IS</h1> it. <b><h1>is</h1></b>. 
```

我正在尝试的正则表达式：

```
Pattern pattern = Pattern.compile("[.>, ](is)[.<, ]", Pattern.CASE_INSENSITIVE); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T21:26:53.663

该类`Matcher`通常与`Pattern`. 使用`Matcher.replaceAll()`方法替换字符串中的所有匹配项

```
String str = "This is a great day...";
Pattern p = Pattern.compile("\\bis\\b", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(str);
String result = m.replaceAll("<h1>is</h1>"); 
```

**注意：**使用`\b`regex 命令将匹配单词边界（如空格）。这有助于确保仅匹配单词“is”而不匹配包含字母“i”和“s”的单词（如“island”）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-02T21:21:05.497

像这样：

```
str = str.replaceAll(yourRegex, "<h1>$1</h1>"); 
```

`$1`指的是您的正则表达式中组 #1 捕获的文本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T21:27:59.010

迈克尔的回答更好，但如果你碰巧只想要`[.>, ]`和`[.<, ]`作为界限，你可以这样做：

```
String input = "This is a great day, is it not? If there is something, THIS IS it. <b>is</b>";
Pattern p = Pattern.compile("(?<=[.>, ])(is)(?=[.<, ])", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(input);
String result = m.replaceAll("<h1>$1</h1>"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-26T14:47:15.623

```
yourStr.replaceAll("(?i)([.>, ])(is)([.<, ])","$1<h1>$2</h1>$3") 
```

`(?i)`表示忽略大小写；用括号包裹你想要重用的所有东西，用 $1 $2 和 $3 重用它们，将它们连接成你想要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T21:21:59.083

只需为此使用反向引用。

`"This is a great day, is it not? If there is something, THIS IS it. <b>is</b>".replaceAll("[.>, ](is)[.<, ]", "<h1>$2</h1>");`应该做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-02T09:14:01.993

这可能是一个较晚的添加，但如果有人正在寻找类似
搜索**“东西”**并且他也需要**“某物”**作为结果，那么

Pattern p = Pattern.compile("([^ ] *)is([ ^ \.]* )");
字符串结果 = m.replaceAll("<\h1>$1is$2</h1>");

也会产生 <\h1>Something</h1>

# assembly - 8086 程序集 ADD 寻址模式

> ID：10865986
> 
> 赞同：2
> 
> 时间：2012-06-02T21:12:17.120
> 
> 标签：assembly, add, x86-16, opcode, addressing-mode

您好，我正在为 8086 编写汇编代码，但我想知道 CPU 如何区分例如

AND AX, [memoryaddress] 和 AND AX, memoryaddress

我们在它周围加上 [] 表示它应该被地址内容替换，但是 CPU 看到这样的指令

00 01 1101001

它如何知道它应该添加值 1101001 还是地址 1101001 的内容。

我在想有不止一个 ADD 命令，并且它们的操作码不同，例如（ADDTHECONTENTS 和 ADDTHEVALUE），但是 a86 允许我们只说 ADD，因为我们可以很容易地将语义与 [] 语法区分开来。这似乎合乎逻辑，但我不确定，所以我想问一下，是否有许多操作码用于对应于不同寻址模式的指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:17:15.480

区别在于[操作码](http://www.mlsite.net/8086/#tbl_map1)。有多个`ADD`操作码（数值为 0、1、2、3、4、5），它们在期望的参数长度以及对参数的作用方面完全不同。

# ruby - 获取没有 C 扩展/库的 URL

> ID：10865988
> 
> 赞同：0
> 
> 时间：2012-06-02T21:12:34.257
> 
> 标签：ruby

我在 RPG Maker VX Ace 的背景下工作。它有一些 Ruby 扩展，并且内置了 Ruby 1.8 库的子集。它还允许我添加自己的 .rb 文件——例如 Ruby 1.9.3 源文件——尽管我不能使用任何代码具有 C 扩展名。如果它需要 .so 文件，它将无法工作——我会收到“此应用程序无法加载扩展程序/插件”的错误消息。

了解了这一点后，我需要一些方法来发出 HTTP 请求。我的意思是：

*   调用 URL（例如[http://myserver.com/blah?data=abcd](http://myserver.com/blah?data=abcd)
*   返回响应（这将是一个字符串——不是完整的 HTML，只是某种标识符）

我试过使用`open-uri`and `net/http`。他们都有不同的问题阻止我使用。一个（我认为是后者） requires `TcpSocket`，它是用 C 实现的，不是“纯”Ruby。另一个给我一个关于与套接字相关的未定义常量的错误。

我也尝试过使用这个`Socket`类，它给了我一个类似的错误。

**TLDR：**有没有什么方法可以用**纯 Ruby 进行 Ruby HTTP 调用，没有 C 扩展**？这就是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:04:30.643

我通过编写一些代码并从 Ruby 调用它来解决这个问题。轻松活泼的。

Using .NET, I created a non-command-line, non-service application; something which I can invoke like a command-line app, but without the command-line window. To do this:

*   Create a new command-line project
*   Go to project properties
*   Change the type to "Windows Forms Application"

When you run your project, it'll run like any command-line project (args, etc.) but no windows will appear.

From there, it was easy to make an asynchronous HTTP request and store the response in a text file. This is sufficient for now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T01:08:51.040

您可以调用 shell 并执行 curl（取决于您的环境和您想要的速度）

```
result = `curl "http://myserver.com/blah?data=abcd" -s` 
```

-s 使 curl 保持沉默。看看这是否会阻止dos框出现。

# java - Eclipse 声称 Commons-Codec 方法不存在

> ID：10865992
> 
> 赞同：0
> 
> 时间：2012-06-02T21:13:30.113
> 
> 标签：java, eclipse, apache-commons-codec

我正在按照[这些指南](http://www.sergiy.ca/how-to-implement-facebook-oauth-2.0-app-authorization-process-in-java/)验证 Facebook API 中的 signed_request 参数，但我遇到了从 Commons Codec 调用 Base64 类的一些方法的问题。我将 commons-codec 1.6 库添加到我的项目 ( ![我引用的库的图片](../Images/b06e9b967b305a5a8bcf9f29101fa17b.png))，但 Eclipse 显示

![带红色下划线的构造函数](../Images/8977bedbfc70a72c1453a329b93fcc09.png)

并说

![错误消息（构造函数 Base64(boolean) 未定义）](../Images/21ca7829e68392385985ff32f60a087e.png)

这很奇怪，因为[这另有说明](http://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Base64.html#Base64(boolean))。

我验证了下载的 md5，所以这不是问题。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:15:46.213

我怀疑在您安装 commons-codec jar 之前，您的类路径中有另一个版本的 commons-codes 类。

确保按下包资源管理器顶部的“Link with Editor”图标按钮，然后在编辑器中按住 ctrl 单击 Base64 类型。然后检查包编辑器中选择的类文件是commons-codec-1.6.jar中的类，还是另一个jar中的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T14:39:54.640

我遇到了同样的问题。在我按构建顺序移动编解码器 jar 后，它得到了解决。但我无法构建 GWT 项目。它显示以下错误

字符串键 = new String(Base64.decodeBase64("xxxx"));

错误：类 Base64 中的方法 decodeBase64 不能应用于给定类型；“实际参数字符串无法通过方法调用转换转换为 byte[]”。

JRE 仍然从 GWT 包中读取编解码器包。如何解决这个问题？

# php - 从数据库中删除成员后无法登录到 ExpressionEngine

> ID：10865996
> 
> 赞同：0
> 
> 时间：2012-06-02T21:13:43.110
> 
> 标签：php, mysql, expressionengine

我在 ExpressionEngine 站点中遇到了新成员垃圾邮件的问题。几天之内，我积​​累了 20k 会员。我禁用了新成员注册，但我仍然必须摆脱所有无关的成员。我运行了一条 SQL 语句来删除所有从未发表评论或论坛帖子的成员，但我没有意识到我使用的管理员成员也被删除了。现在我无法登录来解决问题。

更奇怪的是，我知道我没有删除的帐户也无法再登录了。

有人有帮助我登录的建议吗？

编辑：使用 ee v 1.6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:33:46.770

Evan - 如果您可以通过 phpMyAdmin 或其他方式直接访问您的数据库，只需直接创建一个没有密码的新成员，然后使用密码重置功能（在 EE 登录屏幕上找到链接）生成一个新成员并将其发送给您.

只需输入、 和的值`username`，然后将 设置为。`screen_name``email_address``group_id``1`