# StackOverflow 问答 12201000-12201999

# c#-4.0 - 何时何地初始化自定义成员资格提供程序

> ID：12201001
> 
> 赞同：1
> 
> 时间：2012-08-30T16:02:02.053
> 
> 标签：c#-4.0, asp.net-membership, membership-provider

由于我们的应用程序是现有应用程序并且有大量数据，我们决定实现自己的 MembershipProvider。

在这个过程中，我必须使用不同的签名自定义 CreateUser。这是我的签名。

```
public MembershipUser CreateUser(string firstName, string lastName, string password, string email, string phone, out MembershipCreateStatus status, string title = null, UserRole role = UserRole.User)
    {
        // New user logic
    } 
```

我在初始化我的提供者后调用这个 CeateUser 方法。因为我正在初始化实例，但我没有在该实例上调用 Initialize 方法。如何避免这个初始化部分并调用我的 CreateUser 方法。

```
var provider = new EastpointMembershipProvider(); 

            provider.CreateUser(model.UserName,string.Empty,  model.Password, model.Email, string.Empty,out createStatus,"Mr"); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:05:24.377

浏览了一段时间后，我发现不需要显式初始化自定义成员资格提供程序。

当我们从 Membership.Provders["ProviderName"] 检索提供者时，将调用 Initialize。

```
var membership = (CustomMembershipProvider)Membership.Providers["CustomMembershipProvider"]; 
```

# css - 在 Chrome 中使用 rem 单位进行媒体查询？

> ID：12201003
> 
> 赞同：4
> 
> 时间：2012-08-30T16:02:03.447
> 
> 标签：css, google-chrome, media-queries

是否可以在 Chrome 媒体查询中使用`rem`单位？

`rem`单位在 Chrome 中完美运行，似乎媒体查询不支持它们。这可能吗？或者这个CSS还有其他问题吗？

```
body { background-color: yellow; }

@media only all and (max-width: 40rem) {
    body { background-color: red; }
}

@media only all and (min-width: 40rem) and (max-width: 60rem) {
    body {background-color: green;}
}

@media only all and (min-width: 60rem) {
    body { background-color: blue; }
} 
```

生活在[http://jsfiddle.net/jsQ2N/2/show/](http://jsfiddle.net/jsQ2N/2/show/)，`em`-只有版本在[http://jsfiddle.net/jsQ2N/3/show/](http://jsfiddle.net/jsQ2N/3/show/)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T16:06:36.160

[规范说明了这](http://www.w3.org/TR/css3-mediaqueries/#units)关于相对单位，例如`rem`和`em`：

> 媒体查询中的相对单位基于初始值，这意味着单位从不基于声明的结果。例如，在 HTML 中，“em”单位是相对于“font-size”的初始值的。

（初始值为 ，`font-size`通常`medium`等于浏览器用户首选项中的默认字体大小设置。）

由于 Media Queries 3 没有为任何特定单位定义除上述相对单位引用之外的特殊规则，`rem` *因此应该*像`em`，处理 的初始值`font-size`。如果它在 Chrome 中不起作用，则很可能是一个错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T16:10:34.173

事实证明这是 Webkit 问题 #78295（截至 2012 年 8 月未解决）：[支持媒体查询中的 CSS rem 单元](https://bugs.webkit.org/show_bug.cgi?id=78295)（通过[http://fvsch.com/code/bugs/rem-mediaquery/](http://fvsch.com/code/bugs/rem-mediaquery/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T23:58:02.593

在下面发布答案后，这个问题困扰了我。我在 Chrome 中对我正在开发的网站进行了更多测试。关于 rem 是 Chrome 中的错误的帖子是正确的，它们不起作用，所以我将更改为仅用于媒体查询的像素。

*为了回答您的问题，rems 正在帮助我使用媒体查询来调整内容区域的高度。Chrome 对浏览器宽度的解释方式似乎与 Firefox 不同，但这不是基于 rem 的问题。

请记住，当我使用 rems 和 ems 时，它是在设置 font-size: 1em; 之后。或字体大小：16px；对于 html 或正文。我倾向于坚持使用 font-size: 1em; 在 html 标签上。这将创建一个默认值，该默认值适用于用户为默认字体大小设置的任何内容，在他们使用的任何设备上。Rem 是相对于 1em 的根值。该根值由用户的默认字体大小给出，因此所有内容都应根据用户的字体大小偏好进行缩放，并且与设备/像素密度无关。

这意味着无论用户使用的是“普通”72 或 96 像素/英寸设备，还是 Retina（或其他高像素密度屏幕），设备之间的一切都应该“相对”相同。

# javascript - TD 内的 HTML DIV 作为 href

> ID：12201004
> 
> 赞同：0
> 
> 时间：2012-08-30T16:02:04.210
> 
> 标签：javascript, jquery, html

大家好，我想让 td 中的 div 充当 href。我怎样才能做到这一点？

如果不使用 html，可能使用 jquery 或 javascript？

```
<table class="mgmtview_table" align="center">
    <tr>
    <td class="content" id="content">
       <table class="content_table">
       <tr>
         <td class="topBar">
       <div id="div_view" align="center">FusionCharts will load here!</div> 

    </td> 
        <td class="topBar">
        <div id="div_view2" align="center">FusionCharts will load here!</div> 
    </td> 
        <td class="topBar">
        <div id="div_view3" align="center">FusionCharts will load here!</div> 
    </td> 
    </tr>

        <tr>
         <td class="topBar">
         <div id="div_view4" align="center">FusionCharts will load here!</div> 
    </td> 
    <td class="topBar">
         <div id="div_view5" align="center">FusionCharts will load here!</div> 
    </td> 
    <td class="topBar">
         <div id="div_view6" align="center">FusionCharts will load here!</div> 
    </td> 
    </tr>

        <tr>
         <td class="topBar">
         <div id="div_view7" align="center">FusionCharts will load here!</div> 
    </td> 
    <td class="topBar">
         <div id="div_view8" align="center">FusionCharts will load here!</div> 
    </td> 
    <td class="topBar">
         <div id="div_view9" align="center">FusionCharts will load here!</div> 
    </td> 
    </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:05:17.327

使用 jquery，您可以执行以下操作：

```
$('table.content_table td div').click(function(){
    alert('clicked');
    location.href='http://google.com';
}); 
```

但是如果你想要链接，那么你真的应该使用`<a href="...">`. 这就是他们的目的。:p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:12:32.543

答案是你没有。

使用 html 时要记住的一条重要规则是为您希望完成的工作使用正确的元素。这就是为什么存在这样一系列元素的原因。

一个你开始搞乱切换元素的人，你打开了一罐蠕虫，不仅具有跨浏览器兼容性，而且具有可访问性。

使用 HTML 锚元素。你可以用任何你喜欢的方式来设置它的样式，如果需要的话，你可以用 JavaScript 轻松地覆盖默认行为。有关 Anchor 元素的更多信息，请查看[此处](https://developer.mozilla.org/en-US/docs/HTML/Element/a)包含的信息。

# python - PyGTK - 检索/保存格式化文本 TextBuffer/Sqlite3

> ID：12201005
> 
> 赞同：0
> 
> 时间：2012-08-30T16:02:08.220
> 
> 标签：python, gtk, pygtk

我正在`gtk.TextBuffer`（跨`gtk.TextView`）和`Sqlite3 table`. 文本格式`TextView`正常工作，我的问题是在`Sqlite3 table`（文本类型字段）中保存和检索格式化文本。

基本上我将文本格式化`TextBuffer`如下：

```
class db(object):
   text_tag = 0

def format(self, constant): 
        if self.textbuffer.get_selection_bounds() != ():
            start, end = self.textbuffer.get_selection_bounds()
            self.textbuffer.apply_tag(constant, start, end)

def on_bold_btn_clicked(self, widget):
        db.text_tag = db.text_tag+1
        self.tt_bold = gtk.TextTag("bold_"+str(db.text_tag))
        self.tt_bold.set_property("weight", pango.WEIGHT_BOLD) 
        self.TextTagTable.add(self.tt_bold)

        self.format(self.tt_bold) 
```

在表格中节省时间时，我检索格式如下的文本：

```
textbuffer.get_text (textbuffer.get_start_iter (), textbuffer.get_end_iter (), include_hidden_chars = True) 
```

据我了解文档[gtk.TextBuffer.get_text](http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html#method-gtktextbuffer--get-text)，如果 include_hidden_​​chars 为 False，带有标签的文本将被删除，所以当 True 时，文本会以正确的格式保存吗？

格式化文本显示对象是一个 TextView，它在运行时正确显示格式化文本，但显然，文本没有在格式化完成后保存/恢复。

有谁知道我是否忘记了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:05:17.450

使用序列化（）

[http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html#method-gtktextbuffer--serialize](http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html#method-gtktextbuffer--serialize)

# wpf - ConcurrentDictionary 使用但导致线程错误

> ID：12201009
> 
> 赞同：0
> 
> 时间：2012-08-30T16:02:23.437
> 
> 标签：wpf, vb.net, multithreading

我正在使用一个运行 Tasks.Parallel 的后台工作人员。遵循代码：

```
Public Class SlidertoCanvasBlackWhite
    Implements IValueConverter
    Dim li As New Concurrent.ConcurrentDictionary(Of Integer, ImageBrush)

    Public Sub New()
        Dim bw As New ComponentModel.BackgroundWorker
        AddHandler bw.DoWork, AddressOf bwworkmain
        bw.RunWorkerAsync()

        'For i = 0 To 1535
        '    ' bw.RunWorkerAsync(i)
        'Next
    End Sub

    Private Sub bwworkmain(sender As Object, e As ComponentModel.DoWorkEventArgs)
        Dim c As New SlidertoSolidColorBrush
        Tasks.Parallel.For(0, 1535, Sub(i)
                                        GetImageBrush(i, CType(c.Convert(i, Nothing, Nothing, Nothing), SolidColorBrush).Color())
                                    End Sub)
    End Sub

    Private Sub GetImageBrush(ByVal i As Integer, ByVal c As Color)
        li.TryAdd(i, BlackWhiteColorGenerator(c))
    End Sub

    Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
        If li.ContainsKey(value) Then
            Try
                Return li(value)
            Catch ex As Exception
                Return Nothing
            End Try
        Else
            Try
                Dim c As New SlidertoSolidColorBrush
                Dim z As ImageBrush = BlackWhiteColorGenerator(
                    CType(c.Convert(value, Nothing, Nothing, Nothing), SolidColorBrush).Color)
                Try
                    li.TryAdd(value, z)
                    Return z
                Catch ex As Exception
                    Return li(value)
                End Try
            Catch ex As Exception
                Return Nothing
            End Try
        End If
    End Function

    Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
        Throw New NotImplementedException
    End Function

    Private Function BlackWhiteColorGenerator(ByVal Value As Color) As ImageBrush
       '
       'Code for Returns ImageBrush
    End Function

End Class 
```

我得到的错误是：`Cannot use a DependencyObject that belongs to a different thread than its parent Freezable.`

我正在使用线程安全字典，即 ConcurrentDictionary，请你告诉我错误在哪里。而且这个类是一个在 WPF 窗口中绑定的转换器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:12:53.097

错误很明显：

您正在使用 Bgw/Parallel 代码中“属于”GUI 线程的 DependencyObject。

并行化时，字典不是唯一的问题。

另外：将 CompletedHandler 添加到 bgw 以进行错误处理始终是一个好习惯。

# javascript - 从 observableArray-knockoutjs 中移除

> ID：12201010
> 
> 赞同：6
> 
> 时间：2012-08-30T16:02:23.663
> 
> 标签：javascript, asp.net-mvc, knockout.js

我相信这对某人来说是一个简单的答案。我有以下视图模型：

```
@{
    var initialData = new JavaScriptSerializer().Serialize(Model);
}
var data = @Html.Raw(initialData);
function ViewModel(data) {
    var self = this;
    self.Name = ko.observable(data.Name);
    self.Items = ko.observableArray(data.Items);
    self.addItem = function() { self.Items.push(""); };
    self.removeItem = function(data) { self.Items.remove(data); }
}
$(document).ready(function() {ko.applyBindings(new ViewModel(data)); }); 
```

以及以下视图：

```
<div>
    Name: <span data-bind="text: Name"></span>
</div>
<div>
    Items: <button data-bind="click: addItem">Add Item</button>
</div>
<div>
    <table>
        <tbody data-bind="template: { name: 'itemTemplate', foreach: Items }"></tbody>
    </table>
</div>
<script type="text/html" id="itemTemplate">
    <tr>
        <td>
            <input data-bind="value: $data" />
            <a href="#" data-bind="click: function() {$parent.removeItem($data)}">Remove Item</a>
        </td>
    </tr>
</script> 
```

一切似乎都正常工作，除了`removeItem`. 添加新行并在空的新行上单击“删除项目”时，所有新行都将随之删除。我查看了大量试图让它发挥作用的淘汰教程，我的方法似乎是一种有效的尝试，但显然......我一定遗漏了一些东西。有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T16:26:43.773

observableArray的`remove`函数循环遍历数组并删除与传递给它的值匹配的所有项。在您的情况下，您只是在处理字符串，它会看到所有新的（没有值）都将匹配“”。

有几种处理方法：

*   您可以处理对象，而不仅仅是像`{ value: ko.observable("") }`. 然后，当您传递时，`$data`它只会删除与该对象引用匹配的实际项目。如果您的值是不可观察的并且是数据本身（不是属性），那么您的写入实际上不会返回到您的视图模型。

*   如果这不适用于您的场景，那么您可以`$index`使用 splice 根据索引 ( ) 删除项目。

我可能会这样做：http: [//jsfiddle.net/rniemeyer/N3JaW/](http://jsfiddle.net/rniemeyer/N3JaW/)

另请注意，`event`( `click`is a wrapper to `event`) 绑定会将当前数据作为第一个参数传递给处理程序，因此您可以简化与`click: $parent.removeItem`.

**更新**：这里有几种方法可以控制您的对象如何转换为 JSON：

*   `ko.toJSON`将其第二个和第三个参数传递给`JSON.stringify`. [第二个参数让您运行一个函数来潜在地替换此处](https://developer.mozilla.org/en-US/docs/Using_native_JSON#The_replacer_parameter)描述的值。这是一个示例，用于检查键是否为数字（数组项）并且它具有`value`属性。如果是这样，它只返回字符串而不是对象。 [http://jsfiddle.net/rniemeyer/N3JaW/1/](http://jsfiddle.net/rniemeyer/N3JaW/1/)

*   如果您对对象使用构造函数，则可以按照[此处](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html)`toJSON`所述覆盖该函数。这是具有此功能的示例：http: [//jsfiddle.net/rniemeyer/N3JaW/2/](http://jsfiddle.net/rniemeyer/N3JaW/2/)

*   另一种可以使用的技术是维护一个具有“好”值的计算 observable。这是示例：http: [//jsfiddle.net/rniemeyer/N3JaW/3/](http://jsfiddle.net/rniemeyer/N3JaW/3/)。在这个中`Items`是一个计算的 observable，它返回干净的值。 `Items.asObjects`包含您的值的对象版本。`asObjects`转换为 JSON 时，转换为 JSON时自然会丢弃该部分`Items`。如果您在转换为 JSON 时只需要这个“好”数组，那么其他选项对性能更好（它们仅在您要发送时计算）。

# android - Android GridView 适合列

> ID：12201021
> 
> 赞同：3
> 
> 时间：2012-08-30T16:02:55.927
> 
> 标签：android, xml, gridview

如何拉伸我的 gridview 项目以适应全尺寸，我在下面绘制了一个示例。我尝试了很多方法，但我仍然无法使其适合。我将向您展示我的 xml 代码。我希望它适合 2 列。

GridViewItems.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip"
    android:orientation="horizontal"

     >

    <!--  ListRow Left sied Thumbnail image -->

        <ImageView     
            android:id="@+id/list_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:scaleType="centerCrop"
            android:layout_centerHorizontal="true" 

           />

</RelativeLayout> 
```

Gridview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:stretchMode="columnWidth"
    android:numColumns="2"
    android:verticalSpacing="10dp">
</GridView> 
```

MainGridViewImageLoader.class

```
public class MainGridViewImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public MainGridViewImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

   final int stub_id = R.drawable.no_image;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);

        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;

            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
          else
              photoToLoad.imageView.setImageResource(stub_id);

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

![在此处输入图像描述](../Images/34298eb198b5524859b6bd51b0c30efb.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:21:58.967

```
 <ImageView     
        android:id="@+id/list_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:layout_centerHorizontal="true" 

       /> 
```

改变

```
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

到

```
 android:layout_width="fixed dp(50dp)"  
 android:layout_height="fixed dp(50dp)" 
```

并更改`android:scaleType="centerCrop"`为`android:scaleType="fitXY"`. 它会使每个项目的大小相等。如果你想让图像一起触摸，只需`android:padding`在项目布局中删除并`android:verticalSpacing`

# django - 使用 django ldap 将特定用户设置为员工用户

> ID：12201022
> 
> 赞同：0
> 
> 时间：2012-08-30T16:02:55.993
> 
> 标签：django, ldap, django-authentication

我已经成功地让 django-ldap 与我的活动目录服务器一起工作，但是现在我想让某些用户成为 django`staff`组的一部分。

我看不到如何指定特定的用户帐户（这可能吗？），所以我决定只允许特定组的任何人：

```
# Set up the basic group parameters.
AUTH_LDAP_GROUP_SEARCH = LDAPSearch("OU=mygroup,OU=users,DC=myserver",
    ldap.SCOPE_SUBTREE, "(objectClass=memberOf)"
)
AUTH_LDAP_GROUP_TYPE = ActiveDirectoryGroupType()
AUTH_LDAP_USER_FLAGS_BY_GROUP = {
    "is_active": "OU=mygroup,OU=users,DC=myserver",
    "is_staff": "OU=mygroup,OU=users,DC=myserver",
}

# This is the default, but I like to be explicit.
AUTH_LDAP_ALWAYS_UPDATE_USER = True

# Use LDAP group membership to calculate group permissions.
AUTH_LDAP_FIND_GROUP_PERMS = True

# Cache group memberships for an hour to minimize LDAP traffic
AUTH_LDAP_CACHE_GROUPS = True
AUTH_LDAP_GROUP_CACHE_TIMEOUT = 3600 
```

不幸的是，此配置不起作用，这是日志条目：

```
CN=my_user,OU=mygroup,OU=users,DC=myserver is not a member of OU=mygroup,OU=users,DC=myserver 
```

我真的不明白问题出在哪里，因为组成员船是相同的。是不是`AUTH_LDAP_GROUP_SEARCH`配置不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:41:10.813

组成员身份，正如 django-auth-ldap 使用的术语，与目录树结构没有任何关系。`CN=my_user,OU=mygroup,OU=users,DC=myserver`不是`OU=mygroup,OU=users,DC=myserver`这个意义上的成员，它只是恰好是一个子DN。如果要根据任意属性（包括 DN）分配 Django 用户属性，可以将信号处理程序附加到[django_auth_ldap.backend.populate_user](http://packages.python.org/django-auth-ldap/#django_auth_ldap.backend.populate_user)。

# sql-server - 提取动态 SQL 返回的值

> ID：12201023
> 
> 赞同：7
> 
> 时间：2012-08-30T16:02:58.327
> 
> 标签：sql-server, tsql, dynamic-sql

我有一个存储过程，它生成并执行一段动态 T-SQL，一旦建立起来，看起来像这样

```
SELECT 
    tblUsers.strUserName AS [Username]
    ,tblUsers.strEmail AS [Email]
    ,tblUserAuditLog.strIpAddress AS [IP Address]
    ,tblUserAuditLog.dtAuditTimeStamp AS [Timestamp]
    ,tblUserAuditLog.strAuditLogAction AS [Action]
    ,tblUserAuditLog.strLogDetails AS [Details]
FROM         
    tblUserAuditLog 
        LEFT OUTER JOIN tblUsers 
        ON tblUserAuditLog.intUserIdFK = tblUsers.intUserId
WHERE 
    tblUsers.strUserName = 'a12jun'
    AND tblUserAuditLog.dtAuditTimeStamp >= '2012-08-10' 
```

此查询可以在开发环境中返回数千行，并且会在实时返回更多。

我想在实际返回结果之前找出动态查询返回的行数，这样如果数量超过某个限制，我可以返回“缩小查询”错误消息。

我试过生成另一段这样的 SQL：

```
DECLARE @sqlrowcount NVARCHAR(MAX);
SET @sqlrowcount = 'SELECT COUNT(*) FROM (' + @sql + ') AS TEMP';
EXEC(@sqlrowcount);

IF @@ROWCOUNT > @limit BEGIN .... END 
```

`@sql`动态查询在哪里。然后我尴尬地意识到，`EXEC(@sqlrowcount)`将永远返回`1`，因为它返回一条记录，其*值为*记录数。

是否有一种（相对）优雅的方式来做到这一点，例如不将结果写入临时表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:14:44.680

单程;

```
--base sql
declare @sql  nvarchar(255) = N'select * from master.dbo.spt_values'

--count wrapper
declare @sqlb nvarchar(255) = N'set @count=(select count(*) from (' + @sql + ') T)'

declare @count int
exec sp_executesql @sqlb, N'@count int output', @count output

select 'rows=',@count 
```

您也可以使用`TOP`来强制执行限制，两次运行相同的语句不是很有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:40:46.500

您遇到的问题是 exec 语句保留了先前的[@@rowcount](http://technet.microsoft.com/en-us/library/ms187316.aspx)值，在您的情况下，该值是 set 语句中的 1（所有 set 语句都使 @@rowcount 变为 1）。这是必要的，因为[execute](http://msdn.microsoft.com/en-us/library/ms188332.aspx)创建了自己的批处理。

获取该值的最佳方法是将 sp_executesql 与输出参数一起使用。这看起来像：

```
declare @numRows int
declare @sql nvarchar(max)
set @sql = N'Select @numRows= count(*) from dbo.temp'

exec sp_executesql @sql, N'@numRows int output', @numRows output

--Put your if statement here using @numRows 
```

这使用 sp_executesql 具有输出参数以从计数返回值的能力。

我向所有严肃的 SQL 程序推荐的关于动态查询的更多详细信息的一个很好的来源是[动态 SQL 的诅咒和祝福，](http://www.sommarskog.se/dynamic_sql.html)它解释了如何参数化 sp_executesql 以及为什么您可能想要与其他几个相关主题一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:01:57.537

```
Declare @Rowcount int
SELECT @RowCount = count(1) 
FROM         
dbo.tblUserAuditLog 
    LEFT OUTER JOIN dbo.tblUsers 
    ON dbo.tblUserAuditLog.intUserIdFK = dbo.tblUsers.intUserId

SELECT tblUsers.strUserName AS [Username]
    ,tblUsers.strEmail AS [Email]
    ,tblUserAuditLog.strIpAddress AS [IP Address]
    ,tblUserAuditLog.dtAuditTimeStamp AS [Timestamp]
    ,tblUserAuditLog.strAuditLogAction AS [Action]
    ,tblUserAuditLog.strLogDetails AS [Details]
    , @RowCount
FROM         
dbo.tblUserAuditLog 
    LEFT OUTER JOIN dbo.tblUsers 
    ON dbo.tblUserAuditLog.intUserIdFK = dbo.tblUsers.intUserId 
```

# jsf-2 - JSF 2 数据表：添加单元格值

> ID：12201029
> 
> 赞同：1
> 
> 时间：2012-08-30T16:03:11.003
> 
> 标签：jsf-2

我正在使用具有 5 行和 5 列的 JSF 2 数据表。当用户在列中输入值（例如 column5）时，我需要添加前 4 个单元格的值（row1col5 + row2col5 + row3col5 + row4col5）并动态更新单元格 row5col5 中的新值。这可能吗？通过使用 valueChangeListener 或 f:ajax？

任何帮助是极大的赞赏。

谢谢，苏

# objective-c - 用于弹出视图的自定义故事板 Segue？

> ID：12201032
> 
> 赞同：5
> 
> 时间：2012-08-30T16:03:22.230
> 
> 标签：objective-c, ipad, uinavigationcontroller, storyboard, segue

我的故事板中有一个 UINavigationController 设置，并且我制作了一个自定义 segue 类，您可以在下面看到它在我的视图之间很好地淡入淡出（而不是沼泽标准推送）。

但是，当我点击导航控制器给我的那个返回按钮时，我得到了一个我不想要的推送动画，我想使用那个淡入淡出！我也不想让我的故事板中的segues双向进行，因为它会变得混乱。

自定义淡入淡出：

```
-(void)perform
{
    __block UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
    __block UIViewController *destinationController = (UIViewController*)[self destinationViewController];

    [UIView transitionWithView:sourceViewController.navigationController.view duration:1.0 options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:^
                    {
                        [sourceViewController.navigationController pushViewController:destinationController animated:NO];
                    }
                    completion:^(BOOL finished)
                    {
                        NSLog(@"Transition Completed");
                    }];
} 
```

## 编辑

也许我应该简化。如何在 UINavigationController 中的两个视图控制器之间进行交叉溶解淡入淡出，它推送和弹出视图而不是标准的左右侧边动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T21:36:03.533

如果您正在为 iOS 7 构建，您可以使用 UINavigationControllerDelegate 和新的视图控制器转换 api。

这是一个指南： http: [//www.captechconsulting.com/blog/tyler-tillage/ios-7-tutorial-series-custom-navigation-transitions-more](http://www.captechconsulting.com/blog/tyler-tillage/ios-7-tutorial-series-custom-navigation-transitions-more)

# javascript - Jquery 提交不适用于我的 ajax 调用

> ID：12201034
> 
> 赞同：0
> 
> 时间：2012-08-30T16:03:27.453
> 
> 标签：javascript, jquery, ajax, forms

好吧，所以我遇到了一个我无法理解的非常奇怪的问题。我得到了这段 jquery 代码：

代码

```
<form>
  <input type="text" value="Search for a product" id="name" size="50">
  <input type="submit" id="submit" value="Search">
</form> 
```

JAVASCRIPT代码

```
$("#loader").hide();
$(document).ready(function() {      
  $('#submit').live('click', function(event){
  $("#loader").ajaxStart(function(){
    $(this).show();
  });
  $("#loader").ajaxStop(function(){
    $(this).hide();
  });
  $('.product').remove();
  var query = $("#name").val(); 
  var searchQuery = query.replace(/ /g,"+");     
  $.get("APIsearch.php", {keyword: searchQuery}, function(data){
    $("#content").html(data);
  });  
}); 
}); 
```

顺便说一句，#loader 只是在 ajax 调用期间显示的加载 gif。

它很简单，当我单击 id 为“submit”的按钮时，它会从 id 为“name”的文本字段发送一个字符串，并在单词之间有空格的地方放置一个 +，然后将字符串发送到页面 APIsearch.php在那里我得到一些东西，然后加载到“contetn”div中。现在的问题是，当我在“输入”字段周围添加“表单”元素时，我的 ajaxt 不会返回任何内容，我需要有一个表单，因为我想开始使用 .submit ，所以我可以使用输入按钮作为选择提交文本。为什么它只在我删除这样的“表单”元素时才起作用？

```
<input type="text" value="Search for a product" id="name" size="50">
<input type="submit" id="submit" value="Search"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:16:48.707

当您提交表单时，整个页面都会被提交并在服务器上，您需要以 html 格式回复。正如您所提到的，您将无法仅更新 div 。

但是，您显示的表单元素没有指定“动作”。这表明您希望使用 Ajax 从服务器获取信息。对于 Ajax 响应，您可以对“输入”键进行编程以使其工作：

```
$("#name").keyup(function(event){
    if(event.keyCode == 13){
        $("#submit").click();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:19:51.503

您需要将此行添加到#submit click 方法的顶部。

```
event.preventDefault(); 
```

否则您的表单将提交，刷新页面，而不是执行您的 ajax 调用。

但是请记住，按 Enter 不会激活`click`提交按钮的事件。为此，您必须创建自己的按键处理程序来激活您的点击代码。

# javascript - 使用 jQuery 快速渲染大表

> ID：12201036
> 
> 赞同：4
> 
> 时间：2012-08-30T16:03:43.117
> 
> 标签：javascript, jquery, html-table

我必须特别使用 JavaScript 和 jQuery 动态呈现大表。我这样做是先为表格准备 HTML，然后再追加：

```
var tableHTML = "<table>...</table>";
$("#container").empty().append(tableHTML); 
```

这是解决任务的可接受方式吗？是否有更快的渲染数据方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:06:18.347

是的，这是使用 jQuery 最有效的方法。如果你想变得*非常*快，你可以使用简单的 Javascript：

```
document.getElementById('container').innerHTML = tableHTML 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:10:08.957

而不是使用

```
$("#container").empty().append(tableHTML); 
```

你可以简单地使用

```
$("#container").html(tableHTML); 
```

这将达到同样的效果。使用普通的旧 javascript 可能会加快速度，但您还必须确保在删除旧内容之前删除您使用代码附加到表的任何事件处理程序，因为 jQuery 通常会为您处理这个。

# java - 从 Android 中的 ListView 适配器中删除参数错误

> ID：12201037
> 
> 赞同：0
> 
> 时间：2012-08-30T16:03:42.930
> 
> 标签：java, android, listview

这是我的代码：

```
public class BusinessAdapter extends ArrayAdapter<String[]> {
    private final Context context;
    String[] dataList;

    public BusinessAdapter(Context context,  String[] dataList) {
        super(context, R.layout.business_row,dataList);
        this.context = context;
        this.dataList = dataList;
    } 
```

我在超级中遇到错误。它说我必须从它的参数中删除 dataList 。到目前为止，我使用相同的代码来创建 ListView 适配器，并且没有任何问题。你能看出有什么错误吗？

我已经清理了项目，但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:34:52.777

您的适配器将包含一个列表，`String`因此它应该扩展**ArrayAdapter<String>**而不是**ArrayAdapter<String[]>**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:09:00.553

[如文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html)中所见，您调用的构造函数需要一个泛型类型的数组作为最后一个参数。在您的情况下，它需要一个字符串数组的数组。一种可能的解决方案是将您的课程更改为`... extends ArrayAdapter<String> {`. 如果那不可能，您可以将`BusinessAdapter`构造函数更改为`public BusinessAdapter(Context context, String[][] dataList)`.

# apache-flex - Flex：组件之间的绑定

> ID：12201040
> 
> 赞同：0
> 
> 时间：2012-08-30T16:03:46.317
> 
> 标签：apache-flex, binding

下面的简化示例

我有 2 个视觉组件（PersonPicker 和 PersonViewer），当对象（Person）发生变化时它们需要对应。

PersonViewer 的设置器显然不会被调用，即使该组件中人员的值已更改。我需要这个，因为当人的价值发生变化时，我需要调用另一个函数（calculateSalary）。

此函数最初被正确调用，但在 PersonPicker 中更改人员时，不再调用 setter，这导致薪水标签保持初始值。

**人物类**

```
package
{
    [Bindable]
    public class Person
    {
        private var _name:String;

        public function Person()
        {
        }

        public function get name():String
        {
            return _name;
        }

        public function set name(value:String):void
        {
            _name = value;
        }

    }
} 
```

**主要应用**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*"
               creationComplete="creationCompleteHandler(event)">
    <s:layout>
        <s:VerticalLayout/>
    </s:layout>
    <fx:Script>
        <![CDATA[
            import mx.binding.utils.BindingUtils;
            import mx.events.FlexEvent;

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                // Bind the person property of the personPicker to the person property of the personViewer
                BindingUtils.bindProperty(personViewer, "person", personPicker, "person");

                // Create a new Person and set this as the PersonPicker's person
                var john:Person = new Person();
                john.name = "John";
                personPicker.person = john;
            }

        ]]>
    </fx:Script>
    <local:PersonPicker id="personPicker"/>
    <local:PersonViewer id="personViewer"/>
</s:Application> 
```

**人物选择器**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" 
         width="100%" height="100">
    <fx:Script>
        <![CDATA[
            private var _person:Person;

            [Bindable]
            public function get person():Person
            {
                return _person;
            }

            public function set person(value:Person):void
            {
                _person = value;
            }

        ]]>
    </fx:Script>
    <s:DropDownList selectedItem="@{person.name}">
        <mx:ArrayCollection>
            <fx:String>Phil</fx:String>
            <fx:String>Bill</fx:String>
            <fx:String>John</fx:String>
            <fx:String>Mike</fx:String>
        </mx:ArrayCollection>
    </s:DropDownList>
</s:Group> 
```

**人员查看器**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100">
    <fx:Script>
        <![CDATA[
            private var _person:Person;
            [Bindable]
            public function get person():Person
            {
                return _person;
            }
            public function set person(value:Person):void
            {
                trace ("set person()");

                _person = value;

                calculateSalary();
            }

            private function calculateSalary():void
            {
                trace ("calculateSalary()");
                switch (person.name)
                {
                    case "Phil":
                        salary.text = "1000";
                        break;
                    case "Bill":
                        salary.text = "1200";
                        break;
                    case "John":
                        salary.text = "1400";
                        break;
                    case "Mike":
                        salary.text = "1600";
                }
            }
        ]]>
    </fx:Script>
    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
    <s:Label text="{person.name}"/>
    <s:Label id="salary"/>
</s:Group> 
```

我认为这与仅更改 Person 对象的属性“名称”有关，这不会导致调用 setter。这是正确的，如果是，我该如何纠正我的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:35:14.647

在`PersonPicker`您没有`person`通过在下拉列表中选择一个项目来设置属性，您只是在设置它的`name`.

解决此问题的一种方法是这样的（您绑定到`person`属性而不是它的`name`）：

```
<s:DropDownList selectedItem="@{person}" labelField="name">
    <mx:ArrayCollection>
        <m:Person name="Phil" />
        <m:Person name="Bill" />
        <m:Person name="John" />
        <m:Person name="Mike" />
    </mx:ArrayCollection>
</s:DropDownList> 
```

此外，这里没有理由使用 BindingUtils。写吧：

```
<local:PersonPicker id="personPicker"/>
<local:PersonViewer id="personViewer" person="{personPicker.person}" /> 
```

# mysql - 这三个表最优化的 MySQL 查询是什么？

> ID：12201042
> 
> 赞同：0
> 
> 时间：2012-08-30T16:03:53.163
> 
> 标签：mysql, join, query-optimization, multi-table

我有四个表（但我只会查询其中三个）：

**文章**（文章是“项目”，类型 6）：*a_id、a_title、a_text*

**关键字**（如果关键字是文章，则其类型为 6）：*kw_id, kw_type*

**关键字** _翻译 *kw_id, language_id, kw_name*

**conn_Item_Keyword**（item和keywords之间的多对多连接表）：*kw_id, kw_type, item_id*

假设我要查询一篇 ID 为 15 的英文文章的所有关键词（language_id = 1）。

我可以这样写：

```
SELECT * FROM Conn_Item_Keyword c
LEFT JOIN Keywords k ON (c.kw_id = k.kw_id)
LEFT JOIN Keywords_Translation tr ON (c.kw_id = tr.kw_id)
WHERE c.kw_type = 6 AND c.item_id = 15 AND tr.language_id = 1 
```

但在我看来它很慢，因为它将关键字连接到 Conn_Item_Keyword 的所有行。我在连接中尝试了多个条件（c.kw_id = k.kw_id AND c.kw_type = 6 AND c.item_id = 15），但我无法正确理解。

编写此查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:22:15.547

1) 将“ `SELECT *`”替换为“”，`SELECT col1, col2, expr3, ...`以便查询仅返回您需要的表达式，并仅引用 SELECT 列表中所需的列

2) 从 EXPLAIN 获取输出

3）确保您有合适的索引可以使用，并且它们正在被使用（在适当的情况下覆盖索引）

我真的没有在您的陈述中看到任何可怕的错误，但我注意到由于子句中的谓词， join to`tr`并不是真正的 OUTER join 。您可能不需要加入成为 OUTER 加入，或者您可能根本不需要加入。（但我不清楚你想要返回什么结果集。）`tr.language_id = 1``WHERE``k``k`

此查询返回的结果集有什么“错误”（行太多？缺少某些行？需要额外的列？

```
SELECT c.kw_id
     , tr.kw_name
  FROM Conn_Item_Keyword c
  JOIN Keywords_Translation tr ON tr.kw_id = c.kw_id AND tr.language_id = 1
 WHERE c.kw_type = 6
   AND c.item_id = 15 
```

如果您需要连接到关键字表，那么

```
SELECT c.kw_id
     , tr.kw_name
  FROM Conn_Item_Keyword c
  JOIN Keywords_Translation tr ON tr.kw_id = c.kw_id AND tr.language_id = 1
  JOIN Keywords k ON k.kw_id = c.kw_id
 WHERE c.kw_type = 6
   AND c.item_id = 15 
```

为了提高性能，请验证您是否具有以下索引：

```
Conn_Item_Keyword (item_id,kw_type,kw_id)
Keywords_Translation (kw_id,language_id)
Keywords(kw_id,kw_name) 
```

查看 EXPLAIN 的输出以查看是否正在使用索引。

# java - Axis2 创建持久连接

> ID：12201045
> 
> 赞同：1
> 
> 时间：2012-08-30T16:03:59.777
> 
> 标签：java, wsdl, axis2, keep-alive

我想使用 .NET 制作的网络服务。为了生成我的源代码，我使用了基于 Web 服务的 WSDL 的 Axis2。我在没有选项的情况下启动了 Axis。

我可以调用webservice的第一个方法。这是网络服务的认证方法“连接”。在此之后，我再次调用了一个新方法，但网络服务表明我不再连接。Web服务的支持告诉我这是因为在我调用connect方法后，连接被java关闭了。而这个，网络服务假设我已断开连接并关闭我的会话。

为了解决这个问题，我对这两种方法的成功调用应该保持实时连接。但是，我不确定 Axis2 是否建议使用此功能，是真的吗？

如何保持不同呼叫之间的连接？

这是我的java代码：

```
WinbooksWebServiceStub stub = new WinbooksWebServiceStub("http://myUrl/Service.asmx");
Connect c = new Connect();
c.setKey("KEY");
c.setUser("USER");
c.setPass("PSW");

ConnectResponse resp = stub.connect(c);
ConnectParser connecterParser = new ConnectParser();//works and return the Token

HelloWorld h = new HelloWorld();
HelloWorldResponse Hresp = stub.helloWorld(h); //the result tell me that I'm not connected 
```

如果我按照答案，我在我的存根对象上应用方法，我在线程“main”中得到这个错误异常

```
org.apache.axis2.AxisFault: Attempted read on closed stream.
at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430) 
at org.apache.axis2.builder.SOAPBuilder.processDocument(SOAPBuilder.java:64)
at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:179)
at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)
at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:108)
at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:67)
at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:354)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at com.logidrive.ws.WinbooksWebServiceStub.connect(WinbooksWebServiceStub.java:4251)
at Main.main(Main.java:44) Caused by: java.io.IOException: Attempted read on closed stream.
at org.apache.commons.httpclient.AutoCloseInputStream.isReadAllowed(AutoCloseInputStream.java:183)
at org.apache.commons.httpclient.AutoCloseInputStream.read(AutoCloseInputStream.java:107)
at java.io.FilterInputStream.read(FilterInputStream.java:116)
at org.apache.axiom.om.util.DetachableInputStream.read(DetachableInputStream.java:147)
at java.io.FilterInputStream.read(FilterInputStream.java:116)
at java.io.PushbackInputStream.read(PushbackInputStream.java:169)
at org.apache.axis2.builder.BuilderUtil.getCharSetEncoding(BuilderUtil.java:294)
at org.apache.axis2.builder.SOAPBuilder.processDocument(SOAPBuilder.java:51) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:36:43.553

你有两个问题。我不确定你为什么没有连接，但你可以为大量请求做一个 http 连接池。

这是一个讨论如何做到这一点的[博客 Axis2 博客](http://amilachinthaka.blogspot.com/2009/05/improving-axis2-client-http-transport.html)

另外，这里有一些设置[代码](http://ratheeshpkumar.blogspot.com/2010/09/axis2-15-connectionpooltimeoutexception.html)

**编辑**更新代码

```
import org.apache.axis2.client.Stub;
import org.apache.axis2.context.ConfigurationContext;
import org.apache.axis2.transport.http.HTTPConstants;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.MultiThreadedHttpConnectionManager;
import org.apache.commons.httpclient.params.HttpConnectionManagerParams;

public static void setContextProperties(Stub stub) {

    // Set the max connections to 20 and the timeout to 20 seconds
    MultiThreadedHttpConnectionManager multiThreadedHttpConnectionManager = new MultiThreadedHttpConnectionManager();

    HttpConnectionManagerParams params = new HttpConnectionManagerParams();
    params.setDefaultMaxConnectionsPerHost(20);
    params.setMaxTotalConnections(20);
    params.setSoTimeout(20000);
    params.setConnectionTimeout(20000);
    multiThreadedHttpConnectionManager.setParams(params);

    HttpClient httpClient = new HttpClient(multiThreadedHttpConnectionManager);

    stub._getServiceClient().getServiceContext().getConfigurationContext().setProperty(HTTPConstants.CACHED_HTTP_CLIENT, httpClient);
} 
```

# playframework - 在不使用 AsyncResult 的情况下播放 2 个异步 Web 服务调用

> ID：12201047
> 
> 赞同：4
> 
> 时间：2012-08-30T16:04:12.963
> 
> 标签：playframework, playframework-2.0

Play 2 允许您通过 AsyncResult 进行[异步 Web 服务调用](http://www.playframework.org/documentation/2.0.3/JavaWS)，这不会阻塞线程：

```
public static Result feedTitle(String feedUrl) {
    return async(
        WS.url(feedUrl).get().map(
            new Function<WS.Response, Result>() {
                public Result apply(WS.Response response) {
                    return ok("Feed title:" + response.asJson().findPath("title"));
                }
            }
        )
    );
} 
```

这仅在您执行简单的事情（例如将 WS 调用的结果直接传递给用户）时才有效。但是，如果您必须对结果进行额外的操作怎么办？

查看[文档](http://www.playframework.org/documentation/api/2.0.3/java/index.html)，您似乎可以这样做：

```
Promise<Response> promise = WS.url("http://some.website.com").get();
Response response = promise.get();    // I've got the result, but I've also blocked 
```

这显然是不理想的。**有没有办法在允许 Play 将执行传递给其他线程的同时进行异步调用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:02:25.203

看看[https://github.com/jroper/play-promise-presentation](https://github.com/jroper/play-promise-presentation)。这真的让我明白了如何设计一个可以有多个 Promise 调用等的系统，并将各种 Promise 响应操作为更复杂的响应所需的响应等。

最好的部分是——这个例子感觉不太冗长。它读起来很好，很容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T18:34:20.163

没有必要仅仅为了推迟计算而创建参与者。`Promise.map(Function<A, B>)`您可以使用和将后处理绑定到异步调用`Promise.flatMap(Function<<A>, Promise<B>>)`。这些调用是可链接的。

例子：

```
return async(WS.url("http://someservice.com/").get().map(
        new F.Function<play.libs.WS.Response, SomeData>() {
            @Override
            public SomeData apply (play.libs.WS.Response response) throws Throwable {
                SomeData someData = computeData(response);
                // Do extra computing here
                return someData;
            }
        }).map(
        new F.Function<SomeData, Result>() {
            @Override
            public Result apply(SomeData someData) throws Throwable {
                Result result = doSomethingElse(someData);
                return ok(result); 
            }
        })
 ); 
```

只要最后一个`map`返回 a `Result`，你就可以走了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T05:48:12.003

好的，我找到了一个解决方案，尽管有点冗长。你可以做的就是把所有东西都移到一个 Actor 上。

在全局对象中设置您的 Actor，但将 ActorRef 保存在您可以访问的位置。

```
ActorRef myActor = Akka.system().actorOf(new Props(MyActor.class)); 
```

在您的 Actor 中，执行 WS 调用。

```
public void onReceive(Object message) {
    WSRequestHolder request = WS.url("http://example.com");
    Response response = request.get().get();
    SomeResult result = doFurtherProcessing(response);
    getContext().sender().tell(result);    // reply the asking thread
} 
```

在您的控制器中，只需将对 Actor 的调用包装在 async() 中

```
public static Result method() {
    String message = "hello";
    return async(
        Akka.asPromise(ask(myActor, message, 1000)).map(new Function<Object, Result>() {
            public Result apply(Object result) throws Throwable {
                return ok(result);
            }
        })
    );
} 
```

参考：[http ://www.playframework.org/documentation/2.0.3/JavaAkka](http://www.playframework.org/documentation/2.0.3/JavaAkka)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T23:46:21.623

play2的替代答案

```
String url1 = String.format( "http://localhost:8080/site1", langcode );
String url2 = String.format( "http://localhost:8080/site2", langcode );
String url3 = String.format( "http://localhost:8080/site3", langcode );

F.Promise<WS.Response> remoteCall1 = WS.url(url1).get();
F.Promise<WS.Response> remoteCall2 = WS.url(url2).get();
F.Promise<WS.Response> remoteCall3 = WS.url(url3).get();

F.Promise<java.util.List<WS.Response>> promisesSequence = F.Promise.sequence(remoteCall1, remoteCall2, remoteCall3);

F.Promise<Result> resultPromise = promisesSequence.map(
    new Function<java.util.List<WS.Response>, Result>(){
        @Override
        public Result apply(java.util.List<WS.Response> responses){
            final StringBuffer sb = new StringBuffer();
            for(WS.Response r : responses){
                sb.append(r.getBody());
            }
            return ok( main.render("Output", sb.toString()));
        }
    }); 
```

# c# - 如何在没有外部 IP 地址的主机上访问 Web 服务？

> ID：12201048
> 
> 赞同：0
> 
> 时间：2012-08-30T16:04:13.850
> 
> 标签：c#, asp.net, .net, vb.net, web-services

假设我有一个网站托管在我们 LAN 中名为 Serv1 的服务器上。

我想创建一些网络服务，允许用户将数据下载/上传到网站的后端 SQL 服务器。

我不想在 Serv1 上托管 Web 服务。我想将它们托管在 Serv2 上，它位于我们的 LAN 中，但没有外部 IP 地址。

这会起作用还是我必须为额外的外部 IP 地址付费？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:07:08.917

这不是关于 IP，而是关于 URL。

如果`Serv2.yourdomain.com`不可见，`Serv2.yourdomain.com/service.asmx`则也不可见。

另一方面，有很多方法可以`Serv1.yourdomain.com/service.asmx`从 LAN 上的其他地方提取数据。

**编辑**

我看到这不清楚。

由于两个子域可以使用相同的IP，而一台服务器可以有多个IP，我认为OP强调IP而不是子域掩盖了他的实际要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:08:26.583

如果用户都是*内部*用户，则外部 IP 地址无关紧要。好吧，如果所有用户都在*内部*网络上。

如果您需要在您的网络之外提供此服务，我想我们需要更多信息（至少我会）。如果您有一个可从外部访问的域，我想您可以在域路由上有一个 URL 到您在 Serv2 上的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:07:48.803

如果您不想将服务放在 serv1 中，则必须使 serv2 可用。Web 服务必须可用，除非这一切都可以在 Intranet 上运行并且所有服务器都可用

# infragistics - 基础设施的 TabGroupPaneRegionAdapter 问题

> ID：12201053
> 
> 赞同：0
> 
> 时间：2012-08-30T16:04:54.103
> 
> 标签：infragistics, region

我正在使用来自[https://compositewpfcontrib.svn.codeplex.com/svn/Trunk/src/Extensions.Infragistics/Composite.Wpf.Infragistics/CompositeWPFContrib.Composite.Wpf.Infragistics/XamDockManager/Regions/TabGroupPaneRegionAdapter.cs](https://compositewpfcontrib.svn.codeplex.com/svn/Trunk/src/Extensions.Infragistics/Composite.Wpf.Infragistics/CompositeWPFContrib.Composite.Wpf.Infragistics/XamDockManager/Regions/TabGroupPaneRegionAdapter.cs)的 TabGroupPaneRegionAdapter 。

我遇到的问题是 contentpane 的 Closed 事件执行了两次，这可能是由于行 'contentPane.ExecuteCommand(ContentPaneCommands.Close);' 这意味着当按下十字按钮并第一次调用关闭事件时，它仍然存在于 xamDockManager 中，因此行“contentPane.ExecuteCommand(ContentPaneCommands.Close);” 再次执行并调用关闭事件。任何想法如何解决这个问题。

这是适配器的部分代码：

```
private void OnViewsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e, IRegion region, TabGroupPane regionTarget)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            //Add content panes for each associated view. 
            foreach (object item in e.NewItems)
            {
                UIElement view = item as UIElement;

                if (view != null)
                {
                    ContentPane newContentPane = new ContentPane();
                    newContentPane.Content = item;
                    //if associated view has metadata then apply it.
                    if (view.GetTabGroupPaneMetadata() != null)
                    {
                        newContentPane.Header = (view.GetTabGroupPaneMetadata()).Header;
                    }
                    //When contentPane is closed remove the associated region 
                    newContentPane.Closed += delegate(object contentPaneSender, PaneClosedEventArgs args)
                    {
                        OnContentPaneClosed((ContentPane)contentPaneSender, args, region);
                    };

                    regionTarget.Items.Add(newContentPane);
                }
            }
        }
        else
        {
            if (e.Action == NotifyCollectionChangedAction.Remove)
            {
                //Associated View has been removed => remove the associated ContentPane from XamDockManager
                XamDockManager xamDockManager = regionTarget.FindDockManager();
                IEnumerable<ContentPane> contentPanes = xamDockManager.GetPanes(PaneNavigationOrder.VisibleOrder);

                foreach (ContentPane contentPane in contentPanes)
                {
                    if (e.OldItems.Contains(contentPane.Content))
                    {
                        contentPane.Content = null;
                        contentPane.CloseAction = PaneCloseAction.RemovePane;
                        contentPane.ExecuteCommand(ContentPaneCommands.Close);
                    }
                }

            }
        }
    }

    private void OnContentPaneClosed(ContentPane contentPane, PaneClosedEventArgs args, IRegion region)
    {
        object view = contentPane.Content;
        if (region.Views.Contains(view))
        {
            region.Remove(view);
        }
    } 
```

任何帮助将不胜感激谢谢。伊玛德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:14:35.127

我相信您可以在这里关注 Infragistics 论坛主题关于同样的问题：

[http://www.infragistics.com/community/forums/t/73207.aspx](http://www.infragistics.com/community/forums/t/73207.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T03:31:34.230

这里有一个更好的用于 xamDockManager 的区域适配器。

[http://brianlagunas.com/xamdockmanageran-updated-prism-region-adapter/](http://brianlagunas.com/xamdockmanageran-updated-prism-region-adapter/)

# jquery - 如何使用jquery根据数组的索引位置选择选择器

> ID：12201054
> 
> 赞同：0
> 
> 时间：2012-08-30T16:04:53.337
> 
> 标签：jquery

我设置了 div 来表示支付期的天数和一个包含每天员工时间的数组 - 我想要做的是 .text 输入当天正确 div 中的时间。下面的“wt”是 wArray.length。我错过了什么？我也尝试过使用 jquerys :nth 子选择器，但也没有运气。

```
$('.daysContain:eq(wt)').text('Time In: ' + timeIn); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:05:48.173

尝试如下，

```
$('.daysContain:eq('+ wt +')').text('Time In: ' + timeIn); 
```

或者您可以使用[`.eq`](http://api.jquery.com/eq/)如下功能，

```
$('.daysContain').eq(wt).text('Time In: ' + timeIn); 
```

# c# - 具有相同控制器名称的 asp.net mvc 区域和主站点

> ID：12201056
> 
> 赞同：3
> 
> 时间：2012-08-30T16:04:57.560
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我已经创建了我的主要前​​端站点。我已经添加了我的区域并开始在后端工作。两个部分都进展顺利，除了一件让我烦恼的事情。

我想在这两个区域都有一个 Home 控制器，但得到一个错误，我不能拥有多个。我遵循了一些教程，但没有运气。[这](http://sankarsan.wordpress.com/2012/04/14/asp-net-mvc-areasa-better-way-to-structure-the-application/)是我尝试的最后一个。

我已经开始了一个新项目，只是为了测试这里是我的注册路线代码：

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
            "Default", // Route name 
            "{controller}/{action}/{id}", // URL with parameters 
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },// Parameter defaults 
            new String[] { "Test.Controllers" }
    );
} 
```

我已将此代码放在我的 Global.asax.cs 文件中？这似乎没有任何帮助。这是我的实际错误：

'Home' 的请求找到了以下匹配的控制器：Test.Areas.Portal.Controllers.HomeController Test.Controllers.HomeController

任何提示或指示都会很棒！我已经讨论了这里提出的其他问题，但他们都说要做我已经在做的事情，即添加我上面所做的功能。

* * *

控制器路径：
`Areas - Portal - Controllers - HomeController.cs`
`Controllers - HomeController.cs`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:59:52.720

尝试在 IgnoreRoute 行之后立即插入以下内容

```
AreaRegistration.RegisterAllAreas(); 
```

编辑：

我尝试创建一个新项目并添加一个带有 Home 控制器的新区域。只需运行应用程序，我就能重现您的错误。

进行与您所做的相同的代码更改来解决此问题。

我建议右键单击系统托盘中的 ASP.NET 开发服务器图标并单击退出，然后尝试重新运行应用程序。

If this does not fix it, double check that the namespace you specify in your RegisterRoutes method exactly matches the full namespace of the default controllers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:52:47.743

我认为你需要一个`MapRoute`高于默认的。

```
routes.MapRoute(.....,"Area/Portal/{controller}/{action}/{id},.....,new string[]{...namespce....}); 
```

或者可以查看这篇文章[http://haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx](http://haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx)

# wpf - Gridview.Rows WPF

> ID：12201058
> 
> 赞同：0
> 
> 时间：2012-08-30T16:05:14.580
> 
> 标签：wpf, gridview, row

我的 WPF 应用程序中有一个 Gridview，在我的代码中我想使用 .Rows 属性，但我找不到它 MyGridview.Rows 不存在

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:07:12.463

这`GridView`只是一个视图，它不用于项目管理，您可以从 owner 访问项目（即行）`ListView.Items`。

# c# - 设置只读字段（这是错误吗？）

> ID：12201063
> 
> 赞同：10
> 
> 时间：2012-08-30T16:05:21.450
> 
> 标签：c#, reflection, readonly

刚玩c#的时候，发现了一件奇怪的事情。

这是代码：

```
class Program
{
    static void Main(string[] args)
    {
        System.Diagnostics.Debug.Write(string.Empty);

        typeof(string)
            .GetField("Empty", BindingFlags.Static | BindingFlags.Public)
            .SetValue(null, "Tolgahan");

        Console.WriteLine(string.Empty);

        // output : Tolgahan
    }
} 
```

为什么反射让我们改变只读字段？

* * *

问题是“为什么允许通过反射进行设置”，而不是“如何做”，所以它不是[Can I change a private readonly field in C# using reflection?](https://stackoverflow.com/questions/934930/can-i-change-a-private-readonly-field-in-c-sharp-using-reflection) .

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T16:09:11.340

同样，化学定律说，任何反应都不能导致一种元素的原子变成另一种元素的原子，但物理定律说它一直在发生。化学是物理学的一个受限制的子集，以便将问题简化为更可解决的方式。

在这种情况下，反射是物理学，而正常的编程是化学。它以更简单的心态运作。反射允许您规避那组更简单的规则，使您面临新的流程，但也面临新的危险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T17:15:04.670

因为`readonly`，就像`private`，防范墨菲，而不是马基雅维利*。

我们使用`readonly`and`private`和其他任何限制我们可以做的事情，主要是因为我们希望限制更多不正确、不一致或只是简单愚蠢的事情，而不是我们拥有有用和富有成果的事情。

但它仍然只是一个和零。如果某些内存设置为数字“42”并且我们通过只读字段访问它，则在创建对象时它不是只读的。没有什么能阻止它被改变，除了编译器发现“嘿，首先你说你不想改变它，现在你试图改变它，什么给出了？这两个决定之一肯定是错误的”。

现在，没有保证反射能够改变它，但也没有保证它不会。现在，反射的工作方式和只读的工作方式意味着你可以改变它。至少，要阻止那些可能因为认为自己已经这样做而费心去做这件事的人，需要做很多工作（也许成本会影响我们的用户以及需要实施这项工作的团队）一个很好的理由。

请注意，与反射相关的权限确实阻止了马基雅维利，

*严格地说，墨菲是在谈论我们应该如何设计东西来阻止人们意外地做出灾难性的事情——这`readonly`是一个很好的例子，不能以错误的方式插入更好的插头——而马基雅维利是在教而不是练习技巧。不过，它远不如简明扼要的说法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:24:37.513

这是可能的，因为 .Net 中的反射是以这种方式实现的。我只能猜测这样做的动机，但它是一个强大（但缓慢）的工具，提供了极大的灵活性和滥用的可能性。

这不是实现这种改变的唯一方式，但这种讨论与任何进一步的主观猜测一样，都是题外话和格格不入的。

# javascript - jquery选择器有问题

> ID：12201064
> 
> 赞同：1
> 
> 时间：2012-08-30T16:05:25.067
> 
> 标签：javascript, jquery, jquery-selectors

我正在构建一个网页，其中包含我们公司可以执行的各种分析的信息。我如何设置它是对每个分析进行高级概述的部分，然后是一个“更多详细信息”按钮，该按钮打开一个包含更深入信息的对话框。

如果我使用多行代码来明确引用每个按钮和每个对话框的 ID，我可以正常工作。但是当我尝试使用选择器让它只写几行代码时，我就无法让它工作了。

这是一些 HTML：

```
<div id="van_westendorp" class="solution price1">
    <h3 class="solution_header"><a href="#">Van Westendorp</a></h3>

    <div class="solution_content">
        <ul class="overview">
            <li><em>Price:</em> 
                <div class="dollar ui-state-default ui-corner-all"><img src="images/dollar.png"></div>
                <div class="dollar ui-state-default ui-corner-all"><img src="images/dollar.png"></div>
            </li>
            <li><em>Time:</em> 3-5 days</li>
            <li><em>Pros:</em></li>
                <ul>
                    <li>Easy task for the respondent.</li>
                    <li>Prices can be open-ended.</li>
                </ul>
            <li><em>Cons:</em></li>
                <ul>
                    <li>Deliverables imply more precision than actually exists.</li>
                    <li>Heavy reliance on respondents' understanding of questions.</li>
                </ul>
        </ul>

        <div id="van_westendorp_link" class="center">
            <button class="ui-state-default ui-corner-all detail">More Details</button>
        </div>

        <div id="van_westendorp_window" class="dialog" title="Van Westendorp Details">
            <h2 class="center">How It Works</h2>
            <ul>
                <li>Things happen.</li>
                <li>It's awesome.</li>
            </ul>
            <h2 class="center">Why It Works</h2>
            <ul>
                <li>Science!</li>
            </ul>
        </div>
    </div>
</div> 
```

ID 为“van_westendorp_link”的 div 是按钮，ID 为“van_westendorp_window”的 div 是应该打开的对话窗口。

这是我为 Javascript 尝试过的最新版本：

```
$("[id$='link']").click(function(){
    $(this).next("[id$='window']").dialog('open');
    event.preventDefault();
}); 
```

第一行代码有效；如果我用对对话框 ID 的显式引用替换第二行，那么一切正常。这是我尝试使用选择器引用对话框的第二行，这让我很困惑。

我正在为对话框代码使用查询 UI，如果这很重要的话。任何想法为什么我无法正确引用对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:07:48.440

您忘记`event`了函数参数：

```
$("[id$='link']").click(function(event){
                                   ^
                                  here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:33:38.593

替换`.dialog('open')`为`.dialog()`

但是，如果您需要再次重新打开对话框，则必须使用另一种方法。

HTML：

```
<div id="van_westendorp_window" title="Box Title" style="display: none;">
...
</div> 
```

查询：

```
$(document).ready(function() {
    $("[id$='link']").click(function(){
            var $theBox = $(this).next("[id$='window']");
            var $dialog = $('<div></div>')
            .html($theBox.html())
            .dialog({
                autoOpen: false,
                title: $theBox.attr('title')
            });

        $dialog.dialog('open');
        //event.preventDefault();
    });
}); 
```

# xpages - XPages 内联编辑视图中的文档并在保存后关闭文档

> ID：12201068
> 
> 赞同：0
> 
> 时间：2012-08-30T16:05:36.720
> 
> 标签：xpages, xpages-ssjs

我有一个重复控件，它在特定视图中显示文档。对于每个文档（数据行），用户可以在线编辑和保存这些项目。我有一个额外的按钮，它将单个文档标记为默认值，这仅在编辑模式下可见，在将当前文档标记为默认值之前，它会遍历所有其他文档并将它们取消标记为默认值。此标记为默认值第一次有效，但是当我再次尝试（第二次）时，它会产生复制冲突。

编辑按钮只是将模式更改为编辑模式。

保存执行以下操作（部分刷新）：

```
<xp:this.action>
    <xp:actionGroup>
        <xp:saveDocument var="deliveryDocument"></xp:saveDocument>
        <xp:changeDocumentMode mode="readOnly"
            var="deliveryDocument">
        </xp:changeDocumentMode>
    </xp:actionGroup>
</xp:this.action> 
```

设置默认值执行以下操作（完全刷新）：

```
<xp:this.action>
    <xp:actionGroup>
        <xp:executeScript
            script="#{javascript:markAsDefault(deliveryDocument);}">

        </xp:executeScript>
        <xp:saveDocument var="deliveryDocument"></xp:saveDocument>
        <xp:changeDocumentMode mode="readOnly"
            var="deliveryDocument">
        </xp:changeDocumentMode>
    </xp:actionGroup>
</xp:this.action> 
```

markAsDefault 首先遍历所有现有的交付文档并将 isDefault 设置为空白（当前文档除外），然后为当前文档设置 isDefault 值（它不保存后端文档并且循环执行 doc.recycle ())。

任何帮助，将不胜感激。

**更新：**

```
function markAsDefault(deliveryDoc) {
    try {
        var db:NotesDatabase = deliveryDoc.getParentDatabase();
        var vwDeliveryAddress:NotesView = db.getView("viewName");

        var dc:NotesDocumentCollection = vwDeliveryAddress.getAllDocumentsByKey(deliveryDoc.getItemValueString("fldID"), true);

        var strUniversalID:String;

        strUniversalID = deliveryDoc.getDocument().getUniversalID();

        if (dc.getCount() > 0) {
            var doc:NotesDocument = dc.getFirstDocument()
            var nextDoc:NotesDocument;

            // mark all other docs as not default
            while (doc != null) {
                nextDoc = dc.getNextDocument();

                if (doc.getUniversalID() != strUniversalID) {
                    doc.replaceItemValue("isDefault", "");
                    doc.save();

                    doc.recycle();
                }

                doc = nextDoc;
            }
        }

        deliveryDoc.replaceItemValue("isDefault", "Yes");
    } catch (e) {
        log.logError(e.toString(), SEVERITY_HIGH, e.toString(), null, "website.nsf", "markAsDefault()", null, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:36:21.260

我认为保存冲突的原因是因为您正在处理内存中（在 XPage 上）和磁盘上的相同文档。内存文档的时间戳是在磁盘文档保存之前，因此当您保存内存文档时会发生保存冲突。

如果您不介意在没有冲突的情况下相互覆盖，您可以在表单中设置一个属性以防止保存冲突。在表单属性中，在第一个选项卡上：**冲突处理 - 不要创建冲突**。

在不设置属性的情况下解决此问题的最简单方法是一次仅可编辑一个文档。有一个包含当前可编辑文档的 unid 的 viewScope 变量。设置基于此属性呈现的表单。将字段绑定到 requestScope，使用文档中的默认值。当用户单击保存时，通过 unid/update 从 requestScope 值中查找文档。这样，您只需处理磁盘上的文档。

**编辑 - 示例代码：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:this.data>
        <xp:dominoView var="peopleView" viewName="People"></xp:dominoView>
    </xp:this.data>
    <xp:table id="peopleTable">
        <xp:repeat id="peopleRepeat" rows="30" value="#{peopleView}" var="personRow">
            <xp:panel rendered="#{javascript:return ( viewScope.editableUnid === personRow.getUniversalID() );}"
                tagName="tr">
                <td>
                    <xp:inputText value="#{requestScope.firstName}" defaultValue="#{personRow.first_name}" />
                </td>
                <td>
                    <xp:inputText value="#{requestScope.lastName}" defaultValue="#{personRow.last_name}" />
                </td>
                <td>
                    <xp:button id="saveButton" value="Save">
                        <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="peopleTable">
                            <xp:this.action><![CDATA[#{javascript:var doc = database.getDocumentByUNID( viewScope.editableUnid );
doc.replaceItemValue( 'first_name', requestScope.firstName );
doc.replaceItemValue( 'last_name', requestScope.lastName );
doc.save();
viewScope.editableUnid = null;}]]></xp:this.action>
                        </xp:eventHandler>
                    </xp:button>
                    <xp:button id="cancelButton" value="Cancel">
                        <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="peopleTable">
                            <xp:this.action><![CDATA[#{javascript:viewScope.editableUnid = null;}]]></xp:this.action>
                        </xp:eventHandler>
                    </xp:button>
                </td>
            </xp:panel>
            <xp:panel rendered="#{javascript:return ( viewScope.editableUnid != personRow.getUniversalID() );}" tagName="tr">
                <td>
                    <xp:text value="#{personRow.first_name}" />
                </td>
                <td>
                    <xp:text value="#{personRow.last_name}" />
                </td>
                <td>
                    <xp:button id="editButton" value="Edit">
                        <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="peopleTable">
                            <xp:this.action><![CDATA[#{javascript:viewScope.editableUnid = personRow.getUniversalID();}]]></xp:this.action>
                        </xp:eventHandler>
                    </xp:button>
                </td>
            </xp:panel>
        </xp:repeat>
    </xp:table>
</xp:view> 
```

# html - 标题不会出现在网页上

> ID：12201069
> 
> 赞同：3
> 
> 时间：2012-08-30T16:05:38.100
> 
> 标签：html, css

我正在构建一个站点布局，无论出于何种原因，标题都不会出现在文档的 html 版本中（文本根本不会出现）。我试图弄清楚如何分割页面，以便可以快速且相对容易地插入文本（有点像构建模板）。我也在尝试添加一个菜单栏和一个小页脚。布局应该如下：渐变，与内容重叠。内容布局包含一个标题，其正下方有一个菜单栏，其余内容分为两个部分（“左”和“主”），底部是一个非常小的页脚（刚好足以容纳版权）。代码如下：

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <link href="style.css" rel="stylesheet" type="text/css"/>
    <title>Welcome to AskMeMore.Org!</title>
</head>
<body>
    <div id="background">
        <img src="gradient.jpg" height="50%" width="100%" />
    </div>
    <div id="overlay">
        <div id="content">
            <div id="body">
                <div id="header">Header</div>
                <div id="left">Hi</div>
                <div id="main">Welcome</div>
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
#background {
    background-repeat:repeat-x;
    position:relative;
    z-index:1;
}
#overlay {
    position:relative;
    top:-975px;
    left:15%;
    z-index:10;
    background-color:#FFFFFF;
    width:70%;
}
#content {
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 15px;
    padding-bottom: 15px;
    background-color:#FFFFFF;
}
#header {
    background-color:#FFFFFF;
    position:absolute;
    top:0;
    left:0;
}
#body {
    background-color:#FFFFFF;
}
#left {
    position:absolute;
    top:0;
    left:0;
    background-color:#FFFFFF;
    width:25%;
    padding-top: 20px;
    padding-left: 20px;
}
#main {
    position:absolute;
    top:0;
    right:0;
    background-color:#FFFFFF;
    width:71%;
    padding-top: 20px;
    padding-left: 20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:28:14.463

我不确定您要在这里实现什么，但是 Header 未显示的原因是您已将其定位在与其他元素完全相同的位置；他们正在掩盖它。

我强烈建议您阅读一些 CSS 教程，其中有一些非常容易理解的教程，它们解释了如何完全按照我认为您正在努力实现的目标进行操作。

一个快速的谷歌提供：[http ://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:36:01.857

该设置`top:-975px`将您的overlay-div（及其全部内容）移动到浏览器窗口顶部上方**975像素。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:26:05.843

问题是您的左侧和主 div 都设置为，这`top: 0`意味着它们与也设置为`top: 0`. 因为`left`并且`main`具有不透明（白色）的背景，它们会阻挡后面的内容。

以下是我刚刚玩过背景颜色的小提琴。我已将标题设为红色（以便于准确查看它的位置）`left`和`main`透明。这里的标题是可见的。

[http://jsfiddle.net/chrisvenus/RVxqM/](http://jsfiddle.net/chrisvenus/RVxqM/)

如果您注释掉设置`left`为透明的行，那么上面的行会将其设置为绿色，您可以立即看到它是如何阻挡红色标题单元格的。

有两种解决方案。首先并且可能最好的方法是使您的渐变成为适当的 CSS 背景图像，而不是在`img`其上移动内容。

第二种选择可能是创建一个包含 div 来进行绝对定位，然后更传统地定位其子项（即标题正常，左侧和主要浮动或任何合适的。

确切的解决方案取决于您自己的情况，但这会告诉您为什么会出错，并有望让您找到最适合您的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:10:35.300

您在 div#background 之后立即使用图像。我认为你想要整个页面的背景，所以删除这个：

```
<div id="background">
    <img src="gradient.jpg" height="50%" width="100%" />
</div>

    #background {
    ..remove all styles
    background-repeat:repeat-x; // not required because you never used a background 
```

仅使用覆盖 div 并将其用作#overlay 的样式：

```
background: #00ff00 url('gradient.jpg') no-repeat center; 
```

# python - 更改下载文件的名称 selenium

> ID：12201074
> 
> 赞同：0
> 
> 时间：2012-08-30T16:05:51.430
> 
> 标签：python, selenium

是否可以在下载之前/之后在 python 中使用 selenium 更改文件的文件名？我不想使用 os 模块。谢谢！例如，如果我的文件被下载到`C:\foo\bar`，并且它的名称是`foo.csv`，我可以将其更改为`bar.csv`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:25:56.290

不，这对于任何 Selenium 库都是不可能的。

使用重命名文件的普通 Python 方法。

# java - Jetty 8 HTTPClient 是否支持建立 Comet HTTP 连接？

> ID：12201076
> 
> 赞同：0
> 
> 时间：2012-08-30T16:06:13.637
> 
> 标签：java, jetty, httpclient, comet

我看到 Jetty HTTPClient.java 类中有方法“setIdleTimeout()”和“setTimeout()”。

如果我需要使用它来连接 Comet HTTP 连接，我应该如何设置它才不会超时？

彗星：[http](http://en.wikipedia.org/wiki/Comet_(programming) ://en.wikipedia.org/wiki/Comet_(programming )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T22:46:09.870

jetty 客户端没有，但是有一个基于您可以使用的 jetty 客户端的 java cometd 客户端。它是由 Simone Bordet 编写的，他既是 jetty 提交者又是 cometd 的项目负责人。

[http://cometd.org/documentation/cometd-java/client](http://cometd.org/documentation/cometd-java/client)

# facebook - 第一条 Facebook 评论在发布后不会立即出现，只有在页面刷新后才会出现

> ID：12201079
> 
> 赞同：1
> 
> 时间：2012-08-30T16:06:21.080
> 
> 标签：facebook, plugins, comments

此外，comment.create 事件不会在首次添加评论时触发。

第二个和所有下一个评论立即出现并且事件触发。所以我需要先发表评论，然后重新加载页面以使插件进一步正常工作。

我正在使用 HTML5 方式来声明插件：

```
<div class="fb-comments" data-href="{myPageURL}" data-num-posts="10" data-width="730" data-notify="true"></div> 
```

有任何解决方法的想法吗？

**更新： http:** [//developers.facebook.com/bugs/370026349696283](http://developers.facebook.com/bugs/370026349696283)上的错误描述

# ruby - 如何在 Ruby 中仅使用其实例变量重新打开一个类？

> ID：12201080
> 
> 赞同：1
> 
> 时间：2012-08-30T16:06:21.213
> 
> 标签：ruby

我想创建一个函数来处理传递给它的类。重新打开这些类以添加功能的最惯用的方法是什么？这就是我的意思：

```
def class_messer(target_object)
  #would like to reopen class here with something like:
  class target_object.class
    #add methods
  end
end 
```

显然，该语法不起作用。我可以得到 target_object 的类并评估一些字符串，但这感觉很糟糕。有没有更惯用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:09:49.830

我想你正在寻找`class_eval`. 如果您想重新打开一个类并且您没有按原样的常量，而是一个引用，您可以调用`class_eval`它并传递要在该类上下文中评估的代码块（甚至是字符串）。

```
def class_messer(target_object)

  # assuming that target_object is an instance of desired class

  target_object.class.class_eval do
    #add methods
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:32:22.650

也许改变类是不正确的，例如，如果你有一个 Array 类的实例并改变了它的类，那么这个改变可能会影响到 Array 类的其他实例。所以改为使用[单例类](https://stackoverflow.com/questions/212407/what-exactly-is-the-singleton-class-in-ruby)的实例，方法的定义将是：

```
target_object.send(:define_method, :new_method) do
  #... 
end 
```

或者

```
class << target_object
  def new_method
    #...
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:10:43.413

```
target_object.class.class_exec do
  # add methods
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:21:07.157

你也可以这样做：

```
class << target_object.class

end 
```

# javascript - javascript中的原型继承概念作为基于原型的语言

> ID：12201082
> 
> 赞同：9
> 
> 时间：2012-08-30T16:06:27.193
> 
> 标签：javascript, prototypejs, prototype, prototype-programming, prototypal-inheritance

你知道 Javascript 是一种[基于原型的编程语言](http://en.wikipedia.org/wiki/Prototype-based_programming)。
我读过一些关于 Javascript 及其**原型继承**概念的书，但是：

“如果你不能给一个 6 岁的孩子解释，那你自己就真的不明白。”好吧，我试着给一个 22 岁的朋友解释 JavaScript 原型的概念，完全失败了！

你会如何向一个对这个主题非常感兴趣的 6 岁孩子解释它？
我在 Stack Overflow 中看到了一些示例，但没有帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T16:52:14.037

**经典继承**是关于扩展事物的类型。假设你有一堂课，比如`Bike`. 当您想扩展行为时，您必须设计一种新型自行车（如`MotorBike`）。

这就像建造一座工厂——你制作了很多蓝图，以及引用这些蓝图的蓝图，但为了骑上一辆，你必须拿走蓝图并从中做出一些东西。

**基于原型的继承**是关于扩展事物本身。假设你有一种制作`Bike`物体的方法。您将其中一个`Bike`带入车库，然后将喷气发动机绑在上面。

这不符合蓝图。这是您对这辆特定自行车所做的事情。但是你的朋友看到​​你的装置也想要一个。因此，您不必为您的新设计制定蓝图，而是贴上一个标有“`JetBike`工厂”的标志，然后开始制作更多它们。每次您不记得某些东西如何组合在一起时，您只需查看原始自行车，而不是查看蓝图。您的原始自行车是*原型*自行车，所有新自行车都基于它。

现在，对于一个真正的 6 岁孩子来说，这可能是我要停下来的地方（如果我还没有丢失它们的话），但实际上基于原型的继承不仅仅构造副本，它还做了一些更酷的事情——它实际上将新`JetBike`对象链接到您车库中的原始原型自行车。如果您更换原型自行车的避震器，那么您所有朋友的自行车也会神奇地更换避震器。

让我们看一些 JS-ish 伪代码：

```
function Bike() {
    this.wheels = 2;
}
Bike.prototype = {
    ride: function() {
        // Ride the bike
    },
    crash: function() {
        // Fall off the bike
    }
};

function JetBike() {
    this.engines = 2;
}
// Start with an ordinary bike
JetBike.prototype = new Bike();
// Modify it
JetBike.prototype.fly = function () {
    // Engage thrusters and head for the ramp
}; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-31T04:20:55.553

与大多数其他面向对象的语言不同，JavaScript 实际上没有类的概念。在大多数其他面向对象的语言中，您会实例化特定类的实例，但在 JavaScript 中并非如此。
**在 JavaScript 中，对象可以创建新对象，并且对象可以从其他对象继承。**
这整个概念称为**原型继承**。

但是我们如何制作一个对象呢？
简单地说，您可以使用`{}`.

```
var a = {};
a.prop = "myprop";
console.log(a); //Object { prop="myprop" } 
```

你不能创建实例，`a`因为它不是一个函数。换句话说，它没有特殊的内部方法`[[Construct]]`。

在 JavaScript 中，任何函数也可以实例化为对象。下面的函数是一个简单的函数，它接受一个名称并将其保存到当前上下文中：

```
function User( name ) {
   this.name = name;
} 
```

我们可以看到这`User`是函数的实例：

```
alert(User instanceof Function); //true 
```

使用指定的名称创建该函数的新实例：

```
var me = new User( "My Name" ); 
```

我们可以看到它`name`已被设置为自身的属性：

```
alert( me.name == "My Name" ); //true 
```

它是`User`对象的一个​​实例：

```
alert( me.constructor == User ); //true 
```

现在，既然`User()`只是一个函数，那么当我们这样对待它时会发生什么？

```
User( "Test" ); 
```

由于`this`未设置其上下文，因此默认为全局`window`对象，这意味着它`window.name`等于`name`提供的：

```
alert( window.name == "Test" ); //true 
```

该`constructor`属性存在于每个对象上，并且始终指向创建它的函数。这样，您应该能够有效地复制对象，创建一个具有相同基类但属性不同的新对象。这方面的一个例子可以在下面看到：

```
var you = new me.constructor(); 
```

我们可以看到构造函数实际上是相同的：

```
alert( me.constructor == you.constructor ); //true 
```

# 原型和公共方法

Prototype 只包含一个对象，该对象将作为其父对象的所有新副本的基本引用。本质上，原型的任何属性都将在该对象的每个实例上可用。这个创建/引用过程为我们提供了一个廉价版本的继承。
由于对象原型只是一个对象，因此您可以将新属性附加到它们，就像任何其他对象一样。将新属性附加到原型将使它们成为从原始原型实例化的每个对象的一部分，从而有效地公开所有属性。例子：

```
function User( name, age ){
   this.name = name;
   this.age = age;
} 
```

向构造函数的原型属性添加方法和属性是向该构造函数生成的对象添加功能的另一种方法。让我们再添加一个属性`CardNo`和一个`getName()`方法：

```
User.prototype.CardNo='12345';
User.prototype.getName = function(){
  return this.name;
}; 
```

并在原型中添加另一个功能。请注意，上下文将在实例化对象内。

```
User.prototype.getAge = function(){
   return this.age;
}; 
```

实例化一个新的用户对象：

```
var user = new User( "Bob", 44 ); 
```

我们可以看到我们附加的两个方法都与对象一起使用，并具有适当的上下文：

```
alert( user.getName() == "Bob" ); //true
alert( user.getAge() == 44 ); //true 
```

所以javascript中的每个函数都有一个原型属性。它的初始值是一个空对象 ({})。请注意，通用对象（不是函数）没有原型属性：

```
alert( user.prototype ); //undefined (and it is not useful even you define it) 
```

### 代表团

当您尝试访问 的属性时`user`，假设`user.name`JavaScript 引擎将查看对象的所有属性以搜索被调用的对象`name`，如果找到，则返回其值：

```
alert( user.name ); 
```

如果 javascript 引擎找不到该属性怎么办？它将识别用于创建此对象**的构造函数的原型**（就像您这样做一样`user.constructor.prototype`）。如果在原型中找到该属性，则使用此属性：

```
alert(user.CardNo); // "12345" 
```

等等...
如果您想区分对象自己的属性与原型的属性，请使用`hasOwnProperty()`. 尝试：

```
alert( user.hasOwnProperty('name') ); //true
alert( user.hasOwnProperty('CardNo') ); //false 
```

# 私有方法

当您直接为函数设置属性时，它将是私有的。例子：

```
function User()
{
    var prop="myprop";
    function disp(){
       alert("this is a private function!");
    }
}
var we = new User();
alert(we.prop); //undefined
we.disp(); // Fails, as disp is not a public property of the object 
```

# 特权方法

*特权方法是Douglas Crockford*创造的一个术语，指的是能够查看和操作私有变量（在对象内）同时仍可供用户作为公共方法访问的方法。示例：
创建一个新的 User 对象构造函数：

```
function User( name, age ) {
   //Attempt to figure out the year that the user was born:
   var year = (new Date()).getFullYear() – age;

   //Create a new Privileged method that has access to the year variable, but is still publically available:
   this.getYearBorn = function(){
      return year;
   };
} 
```

创建用户对象的新实例：

```
var user = new User( "Bob", 44 ); 
```

验证返回的年份是否正确：

```
alert( user.getYearBorn() == 1962 ); //true 
```

请注意，我们无法访问对象的私有 year 属性：

```
alert( user.year == null ); //true 
```

本质上，特权方法是动态生成的方法，因为它们是在运行时添加到对象中的，而不是在代码第一次编译时添加的。虽然这种技术在计算上比将简单方法绑定到对象原型更昂贵，但它也更加强大和灵活。

# 静态方法

静态方法背后的前提实际上与任何其他普通函数的前提相同。然而，主要区别在于函数作为对象的静态属性存在。作为一个属性，它们在该对象的实例的上下文中是不可访问的；它们仅在与主对象本身相同的上下文中可用。对于那些熟悉传统类继承的人来说，这有点像静态类方法。
实际上，以这种方式编写代码的唯一好处是保持对象命名空间的整洁。
附加到 User 对象的静态方法：

```
function User(){}
User.cloneUser = function( user ) {
   //Create, and return, a new user
   return new User( user.getName(), user.getAge() );
}; 
```

该`cloneUser`功能只能通过以下方式访问`User`：

```
var me = new User();
me.cloneUser(me); //Uncaught TypeError: Object #<User> has no method 'cloneUser' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T17:04:00.047

Javascript 是一种面向对象的语言，它的独特之处在于它没有类。相反，我们使用函数来创建对象。

所有函数都有一个原型，您使用该函数创建的所有对象都将从该原型继承所有属性和方法。由于 Javascript 没有类，因此您可以使用要继承的实际对象（而不是类）来执行继承。您可以将函数的原型设置为对象，允许您使用该函数创建的所有对象继承该函数原型对象的所有方法和属性。

因此，如果我有一个创建对象的函数：

```
function Foo() {

}
Foo.prototype.someProperty = 'blahblahblah'; 
```

您可以创建另一个创建对象的函数，并通过将函数原型设置为该对象来允许它继承对象的属性和方法。

```
function Bar() {

}
Bar.prototype = new Foo(); 
```

然后你可以访问所有继承的东西。

```
var bar = new Bar();
alert( bar.someProperty ); // blahblahblah 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:24:55.600

有趣的挑战:-)

首先，我永远不会尝试仅用文字向任何人解释这一点，但我会尝试一下 :-)

“原型继承就像一只可以从其他口袋妖怪那里窃取力量的口袋妖怪。”

认为您可以创建自己的口袋妖怪。您可以决定它有多大，它是什么颜色等（构造函数）。然后你可以赋予那个口袋妖怪力量（原型）。您可以根据需要生成任意数量的这些口袋妖怪。原型继承给你的是让一个、几个或所有这些口袋妖怪从其他口袋妖怪那里窃取力量的可能性。您甚至可以从已经从其他口袋妖怪那里窃取力量的口袋妖怪身上窃取力量。这创造了一系列全新的超强口袋妖怪。

也许有点傻，但它反映了原型继承是多么强大......在口袋妖怪意义上:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-19T20:24:53.873

原型继承就像儿子走到哪里都背着父亲。如果有人问儿子：“你的鞋子是什么颜色的？” 他会用他的鞋子颜色来回应，除非他赤脚，否则他会用他爸爸的鞋子颜色来回应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-15T12:46:12.327

```
/* Here is simple way how to inherit objects properties and methods from others object by using prototyping inheritance in plain java script.*/
(function() {  
      // get dom elements for display output`enter code here
      var engTeacherPara = document.getElementById("engTeacher");
      var chemTeacherPara = document.getElementById("chemTeacher");
      // base class 
      var SchoolStaff = function(name, id) {
          this.name = name;
          this.id = id;
        }
        // method on the SchoolStaff object
      SchoolStaff.prototype.print = function() {
        return "Name : " + this.name + " Employee id: " + this.id;
      }

      SchoolStaff.prototype.sayHello = function() {
        return "Hello Mr : " + this.name;
      }

      // sub class engTeacher
      var EngTeacher = function(name, id, salary) {
          SchoolStaff.call(this, name, id);
          this.salary = salary;
        }
        // Inherit the SchoolStaff prototype
      EngTeacher.prototype = Object.create(SchoolStaff.prototype);

      // Set the engTeacher constructor to engTeacher object
      EngTeacher.prototype.constructor = EngTeacher;

      // method on engTeacher object
      EngTeacher.prototype.print = function() {
        return "Name : " + this.name + " Salary : " + this.salary + " Employee id: " + this.id;
      }

      // sub class chemTeacher
      var ChemTeacher = function(name, id, salary, bonus) {
          EngTeacher.call(this, name, id, salary);
          this.bonus = bonus;
        }
        // Inherit the SchoolStaff prototype
      ChemTeacher.prototype = Object.create(EngTeacher.prototype);

      // Set the ChemTeacher constructor to ChemTeacher object
      ChemTeacher.prototype.constructor = ChemTeacher;

      // method on engTeacher object
      ChemTeacher.prototype.print = function() {
        console.log("Name : " + this.name + " Salary : " + this.salary + " Employee id: " + this.id + " bonus : " + this.bonus);
      }

      // create new objcts and check sub class have base class methods access
      var schoolStaff = new SchoolStaff("Base Class", 100);
      console.log(schoolStaff.sayHello()); // Hello Mr : Base Class

      var engTeacher = new EngTeacher("Eng Teacher", 1001, 20000);
      engTeacherPara.innerHTML = engTeacher.sayHello(); // Hello Mr : Eng Teacher  

      var chemTeacher = new ChemTeacher("Chem Teacher", 1001, 30000, 4000);
      chemTeacherPara.innerHTML = chemTeacher.sayHello(); // Hello Mr : Chem Teacher
    })(); 
```

# git - git push 上的“src refspec 不匹配”和“无法推送一些 refs”错误

> ID：12201083
> 
> 赞同：18
> 
> 时间：2012-08-30T16:06:30.253
> 
> 标签：git, git-branch, git-push, git-remote

> **可能重复：**
> [“git push”到 github 时出错](https://stackoverflow.com/questions/959477/error-when-git-push-to-github)

我试图将我的新分支（让我们称之为`new_branch`）推送到远程代表。那里还没有这样的分支，但`git push origin new_branch:new_branch`应该创建它。当我尝试这样做时，这就是我得到的：

```
error: src refspec new_branch does not match any.
error: failed to push some refs to 'ssh://git@***' 
```

我在 SO 上挖掘了数百万个这样的问题，但没有一个同时指定这两个错误，他们只提到`master`分支（我不知道它是否有任何区别）。

我已经尝试过的包括`commit`,`reset`并且`push`在许多配置中。到目前为止，他们还没有工作。我想可能有一些问题`HEAD`，因为我前段时间搞砸了。但这是一个猜测，我什至不知道如何正确检查它，因为 GIT 对我来说仍然是一个*很小的*谜。

那么 - 我怎样才能摆脱这些错误并将我的本地分支推送到远程存储库？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-30T17:26:05.777

您使用的语法`git push`包括一个*refspec* ( `new_branch:new_branch`)。Refspecs 始终采用 形式`source:destination`，因此错误告诉您 refspec 的源部分有问题。

通过尝试推送不存在的分支（`git push origin fake:fake`），我能够重现此错误。我知道这似乎是一个非常愚蠢的问题，但你确定你的分支名称拼写正确吗？请记住，分支名称区分大小写。当你打字时你看到了什么`git branch`？

# javascript - 使用 Javascript 数组或 JSON 存储来自 AJAX 请求的返回值以供以后使用

> ID：12201084
> 
> 赞同：0
> 
> 时间：2012-08-30T16:06:30.840
> 
> 标签：javascript, arrays, json

我有一个 AJAX 请求，要我从服务器获取坐标值。

这是我的代码：

```
locationsObj = []; //Somewhere above the AJAX request

//Below is from the success callback of the request

                        for (var i = 0; i < rowCount; i++) {

                        var storelatlng = new google.maps.LatLng(
                            parseFloat(result.storeLat[i]),
                            parseFloat(result.storeLon[i])
                        );

                        locationsObj.push(??);

                    } 
```

我想要的是能够将返回的值存储在数组或 JSON 对象中，但我已经摆弄了很长时间，我似乎无法让它工作。我相信我可能正确存储它们，但由于我对 [i] 和 [0] 感到困惑，因此无法将它们从数组/对象中取出。

这是我的尝试：

```
locationsObj.push({storelatlng: storelatlng}); 
```

由于这是在 for 循环中，我假设它会循环并将每个 var storelatlng 添加到对象中？？？但是我怎样才能把这些值拿回来呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:09:30.033

这会给你一个像这样的对象数组：

```
locationsObj = [
  { storelatlng: 'some value' },
  { storelatlng: 'some value' },
  { storelatlng: 'some value' }
]; 
```

所以你可以通过以下方式访问它：

`locationsObj[i].storelatlng`;

# wordpress - 如何在WordPress中根据会员的用户名显示不同的子站点？

> ID：12201086
> 
> 赞同：0
> 
> 时间：2012-08-30T16:06:32.710
> 
> 标签：wordpress, wordpress-theming

我为一家公司创建了一个网站，该公司有很多子网站，使用 WordPress 中的多站点。这些子站点受密码保护，适用于不同的客户。

举个例子

*   我的主要网站是`www.example.com`
*   我有两个名为`www.example.com/client_one`and的子站点`www.example.com/client_two`。

我想在我的主站点中有客户端登录窗口`www.example.com`，带有用户名和密码。

我想要做的是，如果来自客户端的成员正确输入了他或她给定的用户名和密码，那么我想将它们重定向到`www.example.com/client_one`页面。

客户二的其他成员的方式相同： `www.example.com/client_two`

可以在 WordPress 中进行吗？我需要任何插件来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:55:16.733

我在以下链接下找到了答案。

[http://wordpress.org/support/topic/automatic-redirection-to-child-site-from-main?replies=15#post-1844523](http://wordpress.org/support/topic/automatic-redirection-to-child-site-from-main?replies=15#post-1844523)

# c - 将matlab文件中的数据读入C

> ID：12201090
> 
> 赞同：8
> 
> 时间：2012-08-30T16:06:41.503
> 
> 标签：c, matlab

我正在尝试学习如何使用 C API 来读取 Matlab`.mat`文件，但它没有像我预期的那样工作：

我只想打开一个非常简单的`.mat`名为`test.mat`的文件，从文件中读取一个值并将其存储在 C 变量中。我`test.mat`使用以下命令在 Matlab 中创建：

```
> value = 3;
> save ("test.mat", "value") 
```

下面是我的 C 代码，它甚至没有编译——编译器似乎找不到头文件。请参阅下面的编译器输出代码。我在这里做错了什么？

**代码：**

```
#include <stdlib.h>
#include <stdio.h>
#include <mat.h>
#include <matrix.h>

int main(int argc, char *argv[]) {
    double value;
    MATFile *datafile;
    datafile = matOpen("test.mat", "r");

    mxArray *mxValue;
    mxValue = matGetVariable(datafile, "value");

    matClose(datafile);
    value = *mxGetPr(mxArray);

    mxFree(mxArray);

    printf("The value fetched from the .mat file was: %f", value);

    return 0;
} 
```

**编译器输出：**

```
$ make animate_shot
cc  -I/usr/local/MATLAB/R2011a/extern/include/   animate_shot.c   -o animate_shot
/tmp/cczrh1vT.o: In function `main':
animate_shot.c:(.text+0x1a): undefined reference to `matOpen'
animate_shot.c:(.text+0x2f): undefined reference to `matGetVariable'
animate_shot.c:(.text+0x3f): undefined reference to `matClose'
animate_shot.c:(.text+0x4b): undefined reference to `mxGetPr'
animate_shot.c:(.text+0x5e): undefined reference to `mxFree'
collect2: ld returned 1 exit status
make: *** [animate_shot] Error 1 
```

（ -I 标志在我的 makefile 中的行中指定`CPPFLAGS=-I/usr/local/MATLAB/R2011a/extern/include/`，并且我已验证该目录存在并包含头文件`mat.h`和`matrix.h`）。

**更新：**
我发现我需要链接的库是`libmat.so`和`libmx.so`（根据[这篇 MathWorks 帮助文章](http://www.mathworks.se/help/techdoc/matlab_external/f19027.html)），驻留在`/usr/local/MATLAB/R2011a/bin/glnxa64/`我的系统中。因此，我将我的 makefile 更新为：

```
CPPFLAGS =-I/usr/local/MATLAB/R2011a/extern/include/
LDFLAGS = -L/usr/local/MATLAB/R2011a/bin/glnxa64 -l mat -l mx 
```

现在，运行`make`给出以下命令：

```
cc  -I/usr/local/MATLAB/R2011a/extern/include/ -L/usr/local/MATLAB/R2011a/bin/glnxa64 -l mat -l mx  animate_shot.c   -o animate_shot 
```

但是，我仍然遇到同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T16:09:41.963

这是链接器故障，而不是编译器故障（与`-I`编译器选项无关）。您需要使用flag指定 matlab`.so`文件所在的目录，并在编译器命令的末尾添加一个选项，以指定 matlab 库的名称。`-L``-l<matlab-lib-name>`

例如：

> cc -I/usr/local/MATLAB/R2011a/extern/include/ -L/usr/local/MATLAB/R2011a/lib animate_shot.c -o animate_shot -lmatlab

*（我不知道 .so 所在的确切目录或 matlab 库的名称）*

* * *

根据提供更多信息的评论：

> cc -I/usr/local/MATLAB/R2011a/extern/include/ -L/usr/local/MATLAB/R2011a/bin/glnxa64 animate_shot.c -o animate_shot -lmat -lmx

# javascript - jQuery each() 不能使用 OOP 方法工作

> ID：12201098
> 
> 赞同：1
> 
> 时间：2012-08-30T16:07:18.110
> 
> 标签：javascript, jquery

这是我在javascript中的情况：

```
EA = {
    DOMElement: $('#example img'),
    photos: '',
    ...

    countSelected: function(){
        var len = 0;
        var id = '';

        EA.DOMElement.each(function(index){
            id = $(this).attr('data-id');
            EA.photos += id + ",";
        });

        len = EA.photos.length;
        return len;
    },   
} 
```

函数 countSelected 返回 0 但如果我使用这个解决方案一切正常：

```
 countSelected: function(){
        var len = 0;
        var id = '';

        $('#example img').each(function(index){
            id = $(this).attr('data-id');
            EA.photos += id + ",";
        });

        len = EA.photos.length;
        return len;
    }, 
```

在我看来，问题出在选择器上：$(this)。你知道有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:10:56.047

问题是，你是什么时候初始化命名空间的？如果您在 DOM 完全准备好之前这样做了，和/或如果稍后在该`#example`元素下添加了图像，那么 jQuery 引用是陈旧的。

你有几个选择。一种是稍后初始化；另一个是每次都使用 jQuery 调用（就像在你的第二个代码片段中一样）；另一个是在命名空间中创建一个函数，该函数将在您需要时调用 jQuery 构造函数（这至少允许您减少选择器重复）。

# python - python pandas：重命名数据框中的系列？

> ID：12201099
> 
> 赞同：1
> 
> 时间：2012-08-30T16:07:19.147
> 
> 标签：python, dictionary, pandas, series

我正在使用 python pandas 进行数据分析，并且我想更改数据框中的系列名称。

这行得通，但似乎效率很低：

```
AA = pandas.DataFrame( A )
for series in A:
    AA[A_prefix+series] = A[series]
    del A[series] 
```

有没有办法更改系列名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T16:14:27.407

当然，您可以使用[重命名](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.rename.html)方法：

```
In [11]: df = DataFrame({"A": [1,2], "B": [3,4]})

In [12]: df.rename(columns={"A": "series formerly known as A"})
Out[12]: 
   series formerly known as A  B
0                           1  3
1                           2  4 
```

但是，这不会改变`df`：

```
In [13]: df
Out[13]: 
   A  B
0  1  3
1  2  4 
```

如果你想使用，你可以得到这种行为`inplace`：

```
In [14]: df.rename(columns={"A": "series formerly known as A"}, inplace=True)
Out[14]: 
   series formerly known as A  B
0                           1  3
1                           2  4

In [15]: df
Out[15]: 
   series formerly known as A  B
0                           1  3
1                           2  4 
```

# ruby-on-rails-3 - 设计会话限制问题

> ID：12201100
> 
> 赞同：1
> 
> 时间：2012-08-30T16:07:21.473
> 
> 标签：ruby-on-rails-3, devise

参考一篇文章：[设计限制每个用户一次会话](https://stackoverflow.com/questions/7068919/devise-limit-one-session-per-user-at-a-time)

我已经按如下方式设置了我的 Rails 应用程序：

**路线.rb**

```
devise_for :users, :controllers => { :sessions => "my_sessions" } 
```

**应用控制器：**

```
 before_filter :check_concurrent_session

  def check_concurrent_session
    if is_already_logged_in?
      sign_out_and_redirect(current_user)
    end
  end

  def is_already_logged_in?
    current_user && !(session[:token] == current_user.login_token)
  end 
```

**my_sessions 控制器：**

```
class MySessionsController < Devise::SessionsController
  skip_before_filter :check_concurrent_session

  def create
    super
    set_login_token
  end

  private
  def set_login_token
    token = Devise.friendly_token
    session[:token] = token
    current_user.login_token = token
    current_user.save
  end
end 
```

当我把它连接起来并重新启动我的 Rails 服务器时，它加载得很好。但是，当尝试登录时，它会快速恢复到登录屏幕。根据我的开发日志，我可以看到它击中了 MySessions 控制器：

```
Started GET "/users/sign_in" for 127.0.0.1 at 2012-08-30 10:51:24 -0500
Processing by MySessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 16ms (Views: 15.8ms | ActiveRecord: 0.0ms) 
```

**设计/会话/新**

```
<h2>Secure Login</h2>

<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
  <div><%= f.label :login %>
  <%= f.text_field :login, :placeholder => 'Username or Email' %></div><br />

  <div><%= f.label :password %>
  <%= f.password_field :password, :placeholder => '••••••••' %></div><br />

  <div><%= f.submit "Login", :class => 'btn btn-inverse' %></div>
<% end %> 
```

即使它击中了覆盖控制器，之后它也没有做任何事情。我已经按照文章进行了发球，它适用于另一个用户。谁能看看我的代码，看看我做错了什么。

我真的很想正确限制会话，因为我的应用程序依赖它。我尝试过使用 Devise Security Extension，但在按照说明操作后不断得到一个未定义的方法“unique_session_id”，所以我想我会试试这个。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:10:56.613

惯于

`current_user && !(session[:token] == current_user.login_token)`

如果您已登录，总是正确的？

这将解释重定向，因为当您重新登录时，您已登录，因此您需要登录，重复。

# c# - 读取 Excel 文件

> ID：12201101
> 
> 赞同：1
> 
> 时间：2012-08-30T16:07:22.663
> 
> 标签：c#, excel, oledb

我正在编写一些代码来读取 excel 文件，但不幸的是 excel 文件包含 300 多列，我需要读取所有 300 列。

我一直在使用一些第 3 部分库来执行此[LinqToExcel](http://code.google.com/p/linqtoexcel/)，但它们最多只能读取**256 列**

```
 var excel = new ExcelQueryFactory(FileName);

        var recs = (from ws in excel.Worksheet<Sample>("data export final")
                    select ws).ToList() 
```

有谁知道我如何阅读所有 300 列，最好不必安装 Microst Office，因为它将在没有安装的服务器上运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:26:00.633

[EPPlus](http://epplus.codeplex.com/downloads/get/329346)可以读取和写入 > 256 列。这是一个显示写入第 300 列的简短示例。

```
FileInfo newFile = new FileInfo(@"C:\Temp\sample300.xlsx");
if (newFile.Exists)
{
    newFile.Delete();  // ensures we create a new workbook
    newFile = new FileInfo(@"C:\Temp\sample300.xlsx");
}

using (ExcelPackage package = new ExcelPackage(newFile))
{
    // add a new worksheet to the empty workbook
    ExcelWorksheet worksheet = package.Workbook.Worksheets.Add("Inventory");
    //Add the headers
    worksheet.Cells[1, 1].Value = "ID";
    worksheet.Cells[1, 300].Value = "Col 300";
    package.Save();
} 
```

从 300+ 列中读取同样容易，但发布包含大型输入文件的独立示例则更加困难 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:15:23.507

有几个选项 - 都涉及一些额外的库：

OpenXML 2.0（来自 MS 的免费库）可用于读取/修改 .xlsx 的内容，因此您可以随心所欲地使用它

一些（商业）第 3 方库带有网格控件，允许您在应用程序（无论是 Winforms/WPF/ASP.NET...）中使用 Excel 文件做更多事情，例如 SpreadsheetGear、Aspose.Cells 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:20:40.197

您可以尝试使用基于 OleDbDataAdapter 的代码

```
 string filename = @"....xls";
            string connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
                                          "Data Source=" + filename + ";" +
                                          "Extended Properties=Excel 8.0;";

            OleDbDataAdapter dataAdapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", connectionString);
            DataSet myDataSet = new DataSet();
            dataAdapter.Fill(myDataSet, "Sample");
            DataTable dataTable = myDataSet.Tables["Sample"];

            var rows = from p in dataTable.AsEnumerable()
                       select new 
                       {
                           Property = p.Field<string>("Column")
                       }; 
```

# visual-studio-2010 - MSI 打包前配置文件中的属性值替换

> ID：12201102
> 
> 赞同：0
> 
> 时间：2012-08-30T16:07:24.413
> 
> 标签：visual-studio-2010, environment-variables, app-config, distribution

我有`Windows.Forms`一个`MSI`使用`Visual Studio Deployment Project`.

My`app.config`有一些配置属性，其值必须替换为正确的值，具体取决于我要将客户端部署到的环境。

例如，我的客户端确实连接到 WCF 外观背后的一组 COM+ 服务，所以我`URL`在配置文件中有一些 s，这些 s 因环境（开发、集成等）而异。

通过这种方式，可以在应用程序配置行中找到这样的：

```
<add ServiceName="MyService" ServiceEndpoint="$(WS_URL)/MyService.svc" MaxMessageSize="xxxxxx"></add> 
```

好吧，问题是我需要执行一个批处理文件（`.bat`）来加载一些变量，然后替换 中的变量`app.config`，但是，我需要在正在打包的应用程序配置文件中进行替换`MSI`，而不是执行替换客户端项目中的“原始”配置文件。

事实上，**我需要的只是获取 VS 即将打包的应用程序配置文件的路径，**并将文件路径传递给我的脚本，以便它进行替换。

**注意：**在上面的示例行中，**$(WS_URL)**是必须根据部署环境配置替换为正确值的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:28:07.667

我会在源代码控制中创建您的 App.Config 的 2 个副本，并将一个与您的项目相关联以进行 F5 构建/开发调试，另一个由安装程序使用以供生产使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:08:34.493

最后，我有了适合我们需求的解决方案。我的需要主要是为 Windows.Forms 客户端提供一个唯一的配置文件，并且能够在文件被打包到 MSI 之前替换其中的一些属性值。

我认为打包在 MSI 中的二进制文件是从项目输出目录中获取的，但它们不是，所以我不能使用该位置来执行我们的“变量替换器”脚本并`App.config`准备好最终文件被打包。

我们有一个`.bat`文件，每种环境配置一个，我们在其中集中了适用于 Windows.Forms、Web-Applications、COM+ Serviced Components 的配置属性，所以我很反感复制客户端的配置文件的想法，因为我的目标也是减少配置文件的数量，降低出错的风险，同时保持创建/维护构建环境的过程简单。

在打包 MSI 之前，我找不到任何文档来告诉我如何获取路径、临时文件夹或其他文件的位置。如果我可以访问它，那么我将执行指向该目录的“变量替换器”脚本并解决问题。

我的解决方法是放置一个自定义的预构建事件，以便我将“模板”复制`App.config`到项目目录，一旦它在那里，我运行脚本来替换属性值。

现在，每次构建部署项目时，我们都确信它包含一个有效的配置文件。

仅供参考，这是预构建事件的样子：

```
XCOPY /Y $(ProjectDir)config\*.* $(ProjectDir)
CALL ..\ScriptsCentral\do_apply_config.bat $(ProjectDir)App.config etc
EXIT 0 
```

注意：我必须`EXIT 0`明确说明，因为我们使用 and 构建所有项目，`msbuild`并且`devenv.com`我在执行构建事件的部分停止了构建过程。

（感谢@ChristopherPainter 的时间和评论。+1 为您的建议）

# php - 使用 MySQL 选择时截断字符串

> ID：12201106
> 
> 赞同：0
> 
> 时间：2012-08-30T16:07:40.747
> 
> 标签：php, mysql, forms, textinput

我使用 MySQL select 提取存储在我的数据库中的文本，以便将其显示在表单中以便可以对其进行编辑。

当表单设置为数据库中保存的字符串时，在第一个空格处被截断，因此“Foo Bar”将显示为“Foo”。使用标签时不会发生这种情况。

我已确保文本字段足够大以容纳整个字符串，并且章程的数量不受限制。

在数据库中存储了整个单词并且不会发生截断。我将类型设置为 varchar(30)，它有足够的空间来存储整个单词。我也尝试将类型更改为文本，但我仍然遇到问题。

我无法在任何地方找到解决方案，有人知道为什么会发生这种情况吗？

```
 <?php echo "<input type=\"text\" name=\"title[" . $row["id"] . "]\" value=" . $row["title"] . ">"; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:10:54.427

没有相关代码，这只是一个猜测，但是您是否在不使用引号的情况下设置表单输入值属性？

例如，您正在这样做吗？

```
<input type="text" value=<? echo $value; ?> name="formInput" /> 
```

而不是正确的语法，这是什么？

```
<input type="text" value="<? echo $value; ?>" name="formInput" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:11:14.003

您应该提供从您的 php 页面生成的 HTML 示例。很可能，您的值字符串没有被引用，例如您的 HTML 表单如下所示：

```
<input type=text value=Foo Bar> 
```

代替

```
<input type=text value="Foo Bar"> 
```

这将产生您所看到的效果

* * *

**更新：**根据您在评论中的示例，您确实缺少引号：

***有问题的旧代码（值*属性值周围缺少引号**） ：

```
<?php echo "<input type=\"text\" name=\"title[" . $row["id"] . "]\"
  value=" . $row["title"] . ">"; ?> 
```

**固定代码**：

```
<?php echo "<input type=\"text\" name=\"title[" . $row["id"] . "]\"
 value=\"" . $row["title"] . "\">"; ?> 
```

请注意，您已经正确引用了该`name`属性，但`value`没有正确引用。

# python - 在 Python 中执行类似 cmd 的命令

> ID：12201107
> 
> 赞同：0
> 
> 时间：2012-08-30T16:07:41.993
> 
> 标签：python, cmd, executable

我想制作一个 Python 代码，它可以像 cmd 一样打开一个程序，然后从文件菜单中导出一个 .txt 文件。cmd的代码如下所示：

```
c:\ESG\Statsvis.exe \\192.168.100.222\c\ESG\S1-424\2012\06\29\S1-42420120629.dsf /output=C:\Users\jessica.macleod\Desktop\outfile.txt /param=RMS Amplitude 
```

在 cmd 中，上面的行正是我想要的。Python 的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:11:06.533

请参阅[subprocess.Popen](http://docs.python.org/library/subprocess.html#popen-constructor)，如下所示：

```
subprocess.Popen(["/bin/ls", "-l"] 
```

或者，根据您想要获得的结果（标准输出、返回码），使用`subprocess.call`、`subprocess.call_check`或此模块中的其他片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:23:12.023

另一种方法是[os.system()](http://docs.python.org/release/3.1.5/library/os.html#os.system)。

```
import os
os.system("c:\\ESG\\Statsvis.exe \\192.16...0629.dsf /output=C:\\...\\outfile.txt ...") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:18:01.167

如果您想获得准确的 shell/cmd 行为，请在调用中将`shell`参数设置为。但是，从文档中：`True``suprocess.Popen()`

> 警告
> 
> 如果与不受信任的输入结合使用，则使用 shell=True 调用系统 shell 可能会带来安全隐患。有关详细信息，请参阅常用参数下的警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:34:55.847

如果您需要命令的输出，请使用子进程：

```
import subprocess
out = subprocess.check_output("dir c:\ /AD", shell = True) 
```

# python - 在 Doxygen 中导出包级 Python 符号

> ID：12201111
> 
> 赞同：2
> 
> 时间：2012-08-30T16:07:48.777
> 
> 标签：python, doxygen

在 Doxygen 中，如果我有以下代码结构：

```
foo/__init__.py
foo/bar.py 
```

包含`foo/bar.py`：

```
def meh():
  """@brief Some cool feature.

  More details...
  """
  print "Hello, world!" 
```

并`foo/__init__.py`包含：

```
# Publicly expose "foo.bar.meh" as "foo.meh".
from foo.bar import meh 
```

在这个方案中，纯粹是出于结构代码布局的原因`meh`在内部`foo.bar`，应该像`foo.meh`在公共 API 中一样出现。

该方案的一个实际示例`os.path`来自标准库，该库公开公开了来自许多特定于操作系统的实现模块之一的符号（例如，这些模块也恰好可用`os.path.nt`）。

* * *

当我在这个源代码树上运行 Doxygen 时，我得到`meh`as`foo.bar.meh`而我不能得到它`foo.meh`。

`meh`我尝试使用该命令明确限定，[`@fn`](http://www.doxygen.nl/manual/commands.html#cmdfn)但随后我收到一些奇怪的警告，并且该函数不在输出中。使用[`@class`](http://www.doxygen.nl/manual/commands.html#cmdclass)for classes 会产生一种情况，我有两个`Meh`类，一个有简短且失败的文档，而另一个有方法和其他成员。据推测，Doxygen 将该`@class`指令解释为另一个模块中的类的文档，并且不将文档与特殊注释块后面的类相关联。

* * *

如何使用 Doxygen 将内部模块符号公开为公共包符号？

* * *

作为记录，这是一个非常大的混合 C++ 和 Python 代码库，其中包含大量 Doxygen 注释，我对转换为 reStrcuturedText 或 Sphinx 不感兴趣（至少在短期内）。

# java - 我可以向 SLF4J 添加自定义级别吗？

> ID：12201112
> 
> 赞同：9
> 
> 时间：2012-08-30T16:07:58.160
> 
> 标签：java, logging, slf4j

SLF4J 似乎支持开箱即用的`TRACE`、、、和`DEBUG`级别`INFO`。`WARN``ERROR`

有没有办法添加我自己的自定义级别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T17:35:22.487

SLF4J 支持的级别是固定的，不能更改。但是，SLF4J 支持[标记](http://www.slf4j.org/apidocs/org/slf4j/Marker.html)，允许在标记/分类日志消息方面具有无限的灵活性。[Logger 接口](http://www.slf4j.org/apidocs/org/slf4j/Logger.html)中的所有打印方法都有一个变体，该变体将 Marker 作为其第一个参数。

# asp.net - requiredField 的位置（在 ListView 内）是否会影响 ValidationSummary 显示错误的方式？

> ID：12201115
> 
> 赞同：0
> 
> 时间：2012-08-30T16:08:17.410
> 
> 标签：asp.net, validation

我在 ListView 中有 2 个RequiredFieldValidator 控件。发生验证时，位于页面顶部（ListView 外部）的 ValidationSummary 控件不会显示任何错误。

**编辑**

这是代码。

```
<asp:TextBox ID="_txtClientName" width="75px" runat="server" TabIndex="4" /><br />
<asp:Button ID="_btnSearch" CssClass="grey_button" width="50px" runat="server" Text="Search" 
     TabIndex="5" CommandArgument="search" ValidationGroup = "SearchClientName" />

<asp:RequiredFieldValidator ID="reqSearch" runat="server" Text = "*" ErrorMessage="Please enter  criteria to search" ControlToValidate = "_txtClientName" ValidationGroup = "SearchClientName" /> 
```

summaryValidation 控件位于 ListView 之外，位于页面的最顶部。

```
<asp:ValidationSummary ID="ValidationSummary1" ShowSummary = "true" runat="server" /> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:10:49.580

添加到您的两个 RequiredFieldValidators ：`Display="None"`

对你的总结：`ShowSummary="true"`

# visual-c++ - 使用 Visual c++ 查询操作系统信息

> ID：12201117
> 
> 赞同：0
> 
> 时间：2012-08-30T16:08:24.337
> 
> 标签：visual-c++, wmi, hardware

下面的代码是msdn( [link](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423%28v=vs.85%29.aspx) )中关于如何使用WMI查询操作信息的示例代码。在 Visual c++ 2010 中运行此代码时，我收到以下错误：

> “ProjectTest.exe 中 0x5a2c47af (msvcr100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccffff。”

谁能帮我解决这个问题？

```
#include "stdafx.h"
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>

# pragma comment(lib, "wbemuuid.lib")

int main()
{
    HRESULT hres;

    // Step 1: --------------------------------------------------
    // Initialize COM. ------------------------------------------

    hres =  CoInitializeEx(0, COINIT_MULTITHREADED); 
    if (FAILED(hres))
    {
        cout << "Failed to initialize COM library. Error code = 0x" 
            << hex << hres << endl;
        return 1;                  // Program has failed.
    }

    // Step 2: --------------------------------------------------
    // Set general COM security levels --------------------------
    // Note: If you are using Windows 2000, you need to specify -
    // the default authentication credentials for a user by using
    // a SOLE_AUTHENTICATION_LIST structure in the pAuthList ----
    // parameter of CoInitializeSecurity ------------------------

    hres =  CoInitializeSecurity(
        NULL, 
        -1,                          // COM authentication
        NULL,                        // Authentication services
        NULL,                        // Reserved
        RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication 
        RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation  
        NULL,                        // Authentication info
        EOAC_NONE,                   // Additional capabilities 
        NULL                         // Reserved
        );

    if (FAILED(hres))
    {
        cout << "Failed to initialize security. Error code = 0x" 
            << hex << hres << endl;
        CoUninitialize();
        return 1;                    // Program has failed.
    }

    // Step 3: ---------------------------------------------------
    // Obtain the initial locator to WMI -------------------------

    IWbemLocator *pLoc = NULL;

    hres = CoCreateInstance(
        CLSID_WbemLocator,             
        0, 
        CLSCTX_INPROC_SERVER, 
        IID_IWbemLocator, (LPVOID *) &pLoc);

    if (FAILED(hres))
    {
        cout << "Failed to create IWbemLocator object."
            << " Err code = 0x"
            << hex << hres << endl;
        CoUninitialize();
        return 1;                 // Program has failed.
    }

    // Step 4: -----------------------------------------------------
    // Connect to WMI through the IWbemLocator::ConnectServer method

    IWbemServices *pSvc = NULL;

    // Connect to the root\cimv2 namespace with
    // the current user and obtain pointer pSvc
    // to make IWbemServices calls.
    hres = pLoc->ConnectServer(
         _bstr_t(L"ROOT\\CIMV2"), // Object path of WMI namespace
         NULL,                    // User name. NULL = current user
         NULL,                    // User password. NULL = current
         0,                       // Locale. NULL indicates current
         NULL,                    // Security flags.
         0,                       // Authority (for example, Kerberos)
         0,                       // Context object 
         &pSvc                    // pointer to IWbemServices proxy
         );

    if (FAILED(hres))
    {
        cout << "Could not connect. Error code = 0x" 
             << hex << hres << endl;
        pLoc->Release();     
        CoUninitialize();
        return 1;                // Program has failed.
    }

    cout << "Connected to ROOT\\CIMV2 WMI namespace" << endl;

    // Step 5: --------------------------------------------------
    // Set security levels on the proxy -------------------------

    hres = CoSetProxyBlanket(
       pSvc,                        // Indicates the proxy to set
       RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx
       RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx
       NULL,                        // Server principal name 
       RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx 
       RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx
       NULL,                        // client identity
       EOAC_NONE                    // proxy capabilities 
    );

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket. Error code = 0x" 
            << hex << hres << endl;
        pSvc->Release();
        pLoc->Release();     
        CoUninitialize();
        return 1;               // Program has failed.
    }

    // Step 6: --------------------------------------------------
    // Use the IWbemServices pointer to make requests of WMI ----

    // For example, get the name of the operating system
    IEnumWbemClassObject* pEnumerator = NULL;
    hres = pSvc->ExecQuery(
        bstr_t("WQL"), 
        bstr_t("SELECT * FROM Win32_OperatingSystem"),
        WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, 
        NULL,
        &pEnumerator);

    if (FAILED(hres))
    {
        cout << "Query for operating system name failed."
            << " Error code = 0x" 
            << hex << hres << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        return 1;               // Program has failed.
    }

    // Step 7: -------------------------------------------------
    // Get the data from the query in step 6 -------------------

    IWbemClassObject *pclsObj = NULL;
    ULONG uReturn = 0;

    while (pEnumerator)
    {
        HRESULT hr = pEnumerator->Next(WBEM_INFINITE, 1, 
            &pclsObj, &uReturn);

        if(0 == uReturn)
        {
            break;
        }

        VARIANT vtProp;

        // Get the value of the Name property
        hr = pclsObj->Get(L"PAEEnabled", 0, &vtProp, 0, 0);
        wcout << " Is PAE enabled? : " << vtProp.bstrVal << endl;
        VariantClear(&vtProp);

        pclsObj->Release();
    }

    // Cleanup
    // ========

    pSvc->Release();
    pLoc->Release();
    pEnumerator->Release();
    CoUninitialize();

    system("PAUSE");

    return 0;   // Program successfully completed.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:22:25.493

实际上它确实返回了完全有效的数据。只是它只为您的调用返回一个布尔值，而没有 bstrVal。

根据 VT_BOOLEAN 检查 vtProp.vt 属性。在 VARIANT 中，您始终必须检查 vt 属性以了解 VARIANT 保存的数据类型。

* * *

原始答案：

即使 pclsObj->Get() 调用的 HRESULT 是 S_OK，您的 vtProp 也是 nullptr。它很可能找不到 PAEEnabled 属性。

当您使用 MSDN 示例中的原始代码时，它使用“名称”而不是“PAEEnabled”，它工作得很好。

# linux - 最少的定制 linux live cd，只有必要的软件和最少的工作量

> ID：12201122
> 
> 赞同：1
> 
> 时间：2012-08-30T16:08:40.903
> 
> 标签：linux, live-cd

我想构建一个自定义的 linux live cd，其中只有绝对必要的软件用于我的目的：

*   基于flask（python）运行1-3个简单的web应用
*   运行 1-3 个基于 sinatra (ruby) 的简单 Web 应用程序
*   运行 1-3 个基于 php 的简单 web 应用程序
*   动态创建的 sqlite3 数据库
*   ssh 服务器
*   NO X 服务器
*   它必须是 Linux，而不是其他操作系统

它并非用于实际刻录到 cd，而是使用虚拟化软件（例如 virtual box、vmware）启动 iso 文件，在每次重新启动时使用 Web 应用程序创建一个干净的新演示环境。

将所有这些都放在最小的尺寸中以使其快速下载会很棒。但是我没有时间或精力从头开始学习构建 linux，所以我愿意在大小上做出妥协，并尝试剥离一开始就已经很小的现有发行版。但是哪一个？

**更新**

我最终使用了[TinyCore](http://distro.ibiblio.org/tinycorelinux/)，我对此非常满意！我在其中构建了一个黑客竞赛，全部不到 30 MB。[您可以从SourceForge](http://sourceforge.net/projects/ctfomatic/files/)下载 CD并在任何虚拟化软件中使用它，甚至可以使用它启动您的 PC。重制脚本的源代码在[GitHub 上](https://github.com/janosgyerik/ctf-o-matic)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:17:27.397

以及如何让这个生活（Jeoss）......

[http://www.vercot.com/~jeoss/default.html](http://www.vercot.com/~jeoss/default.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:22:14.887

我会推荐你[​​ Suse Studio](http://www.susestudio.com)。它允许您在线制作自己的自定义映像 - 您只需下载 .iso 映像。您可以自定义所有内容，它基于 OpenSuse。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:47:35.463

[这就是你想要的。](http://www.damnsmalllinux.org/)尽可能小。

# android - 具有多行支持的 Textview 自动调整

> ID：12201132
> 
> 赞同：1
> 
> 时间：2012-08-30T16:09:30.303
> 
> 标签：android, textview, font-size, multiline

我已经寻找了根据 textView 的大小自动调整字体的解决方案，并发现了很多，但没有一个支持多行并且正确执行（不截断文本并且也尊重重力值）。

有没有其他人进行过这样的解决方案？

是否也可以设置如何找到最佳行数的约束？也许根据最大字体大小或每行最大字符数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:10:48.503

以下对我有用，恕我直言，比使用基于椭圆的解决方案更好。

```
void adjustTextScale(TextView t, float max, float providedWidth, float providedHeight) {

    // sometimes width and height are undefined (0 here), so if something was provided, take it ;-)
    if (providedWidth == 0f)
        providedWidth = ((float) (t.getWidth()-t.getPaddingLeft()-t.getPaddingRight()));
    if (providedHeight == 0f)
        providedHeight = ((float) (t.getHeight()-t.getPaddingTop()-t.getPaddingLeft()));

    float pix = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());

    String[] lines = t.getText().toString().split("\\r?\\n");

    // ask paint for the bounding rect if it were to draw the text at current size
    Paint p = new Paint();
    p.setTextScaleX(1.0f);
    p.setTextSize(t.getTextSize());
    Rect bounds = new Rect();
    float usedWidth = 0f;

    // determine how much to scale the width to fit the view
    for (int i =0;i<lines.length;i++){
        p.getTextBounds(lines[i], 0, lines[i].length(), bounds);
        usedWidth = Math.max(usedWidth,(bounds.right - bounds.left)*pix);
    }

    // same for height, sometimes the calculated height is to less, so use §µ{ instead
    p.getTextBounds("§µ{", 0, 3, bounds);
    float usedHeight = (bounds.bottom - bounds.top)*pix*lines.length;

    float scaleX = providedWidth / usedWidth;
    float scaleY = providedHeight / usedHeight;

    t.setTextSize(TypedValue.COMPLEX_UNIT_PX,t.getTextSize()*Math.min(max,Math.min(scaleX,scaleY)));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T20:27:44.143

后来我问了一个类似的问题并得到了这个问题的答案：

[https://stackoverflow.com/a/17786051/878126](https://stackoverflow.com/a/17786051/878126)

对于自定义行为，需要相应地更改代码。

# javascript - 通过 Javascript 进行 HTML 表单验证

> ID：12201135
> 
> 赞同：-2
> 
> 时间：2012-08-30T16:09:44.640
> 
> 标签：javascript, html, forms, spam, protection

我想阻止观众输入像“fssadf”这样的词，并强制他们输入一个有效的电子邮件，其中必须包含中间的“@”和“.”。以防止垃圾邮件和注入。

我还希望表单显示一条错误消息，上面写着“将电子邮件字段更改为正确的电子邮件”

我使用包含以下内容的 js_function.js：

```
function validEmail()
{   
    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
    var email_address = $("#email").val();  
    if(reg.test(email_address) == false) 
      return false;
    else
        return true;
} 
```

但它不会阻止查看者向我发送“sfdasfd”而不是有效的电子邮件。

我能做些什么来实现上述目标？

查看以下文件： [http ://www.mediafire.com/?kx5bvttc0s2fbrs](http://www.mediafire.com/?kx5bvttc0s2fbrs)

谢谢，拉米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:24:16.417

虽然我没有在我的程序上看到你提供的任何错误，但你仍然可以使用

```
var reg = /^[_a-z0-9]+(\.[a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/; 
```

而不是这个

```
var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; 
```

我认为这会有所帮助。我提供了适合我的全部 Javascript 代码。

```
function validEmail()
    {   

       var reg = /^[_a-z0-9]+(\.[a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
        var email_address = $("#email").val();  
        if(reg.test(email_address) == false) 
          return false;
        else
            return true;
    } 
```

用这个

或者你也可以以其他方式使用它

* * *

HTML

```
<form>
  //Other Codes
  <input type="text" name="email" id="email" onchange="validate(this.value)" />
  //Other Codes
</form> 
```

和 Javascript

```
<script>

function validate(email) 
{
    var reg = /^[_a-z0-9]+(\.[a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
    if(reg.test(email) == false) 
        {
            alert("This is a invalid Email Address!");
            document.getElementById('email').value = '';
        document.getElementById('email').focus();
        return false;
    }
    else{
        return true;
    }
}
</script> 
```

* * *

或者

* * *

HTML

```
<form>
  //Other Codes
  <input type="text" name="email" id="email" onchange="validate()" />
  //Other Codes
</form> 
```

和 Javascript

```
<script>

function validate() 
{
    var reg = /^[_a-z0-9]+(\.[a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
    var email = document.getElementById('email').value;
    if(reg.test(email) == false) 
        {
            alert("This is a invalid Email Address!");
            document.getElementById('email').value = '';
        document.getElementById('email').focus();
        return false;
    }
    else{
        return true;
    }
}
</script> 
```

* * *

我认为最后一个解决方案会更容易应用。

页面而不是弹出窗口上的错误消息

* * *

HTML

```
<form>
      //Other Codes
      <input type="text" name="email" id="email" onchange="validate()" />
       <span id="errormessage"></span>
      //Other Codes
    </form> 
```

和 Javascript

```
<script>

function validate() 
{
    var reg = /^[_a-z0-9]+(\.[a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
       var email = document.getElementById('email').value;
    if(reg.test(email) == false) 
        {
            document.getElementById('errormessage').innerHTML= 'fill your email';
            document.getElementById('email').value = '';
        document.getElementById('email').focus();
        return false;
    }
    else{
            document.getElementById('errormessage').innerHTML= '';
        return true;
    }
}
</script> 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:11:26.897

试试这个

```
$(document).ready(function() {

$('#btn-submit').click(function() { 

    $(".error").hide();
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    var emailaddressVal = $("#UserEmail").val();
    if(emailaddressVal == '') {
        $("#UserEmail").after('<span class="error">Please enter your email address.</span>');
        hasError = true;
    }

    else if(!emailReg.test(emailaddressVal)) {
        $("#UserEmail").after('<span class="error">Enter a valid email address.</span>');
        hasError = true;
    }

    if(hasError == true) { return false; }

}); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:19:22.133

这个问题的重复：

[在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

关于不应忽略的边缘情况的评论中有一些有价值的讨论。

在你问之前你试过谷歌这个吗？IT 是一个/非常/常见的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:20:09.917

如果你想要一个使用 jQuery 的纯 HTML5 解决方案……这里有一个现场[演示](http://jsfiddle.net/adamish/YJuyp/3/)

HTML

```
<form id="form">
    Email <input name="field1" required="required" type="email" /> <br />
    <div id="error"></div>
   <input required="required" name="submit" type="submit" />
</form>​ 
```

代码

```
$(document).ready(function() {
    var validCheckInput = function() {
        if ($(this)[0].checkValidity()) {
            $(this).removeClass("error");
            $("#error").empty();                
        } else {
            $(this).addClass("error");
            $("#error").text("change the email field to the correct email");
        }

        if ($("#form")[0].checkValidity()) {
            $("#form input[type='submit']").removeAttr("disabled");
        } else {
            $("#form input[type='submit']").attr("disabled", "disabled");
        }
    };s

    var binds = function(validCheck) {
        $(this).change(validCheck);
        $(this).focus(validCheck);
        $(this).keyup(validCheck);
        validCheck.call($(this));
    }
    $("#form input").each(function() {binds.call(this, validCheckInput)});

});​ 
```

CSS

```
.error {
  border: 2px solid red;
 }​ 
```

# c# - ListView 正在创建新控件而不是刷新

> ID：12201136
> 
> 赞同：0
> 
> 时间：2012-08-30T16:09:45.703
> 
> 标签：c#, .net, wpf, xaml, listview

我有一个使用 a`ParentObject`作为其 DataContext 的控件。`ParentObject`有一个称为`ChildObject`可能更改的属性。当它发生时，`ParentObject`引发 PropertyChanged 事件。

该控件具有 XAML来`ListView`为. 当 中的属性更改时，将重新创建整个视图，这意味着实例化了新控件。`List``ChildObject``ChildObject``ParentObject`

它`ListView`实际上比下面的示例复杂得多，因此重新创建它是处理器密集型的并且需要很长时间。

我还有哪些其他选择？我可以`ListView`为每个缓存整个`ChildObject`吗？我该怎么做呢？

```
<ListView ItemsSource="{Binding ParentObject.ChildObject.List}">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Error">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <local:ErrorControl DataContext="{Binding ErrorCollection}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:26:10.260

由于您的数据模板，列表视图正在创建新控件。使用数据模板，您可以在数据实例和数据模板内的控件之间建立一对一的关系。你有几个选择：

1) 您是否研究过虚拟化？这只会渲染可见的内容。如果您有大量对象，您肯定要考虑这一点。

2）您是否考虑过重新设计您的视图模型以最大限度地减少您的收藏品的变化？而不是在错误发生变化时添加/删除对象。重复使用集合中的对象，并且仅在总计数发生变化时添加/删除。

我已经完成了这两项以减缓视图模型对视图的更改。它们都显着提高了性能，但我在屏幕上有数百个对象。

# javascript - 使用 Jquery 优化从复选框验证（启用）单选按钮和提交按钮

> ID：12201137
> 
> 赞同：0
> 
> 时间：2012-08-30T16:09:53.220
> 
> 标签：javascript, jquery, html

以下是我的代码，在互联网上搜索了这么多之后；我无法做这个简单的验证事情。

```
 <html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script type="text/javascript">
   $(document).ready(function(){

        $('#myText').click(function(){
           $('#radio1').removeAttr('disabled','disabled');
           $('#radio2').removeAttr('disabled','disabled');
           $('#radio3').removeAttr('disabled','disabled');
           $('#submit').removeAttr('disabled','disabled');
         })
});

    </script>
    </head>
    <body>

    <input type="checkbox" id="myText" value="Click it!">Click it!</input>
    <br/>
    <br/>

    <input type="radio" id="radio1" name="gok" value="Radio 1" disabled="disabled"> Radio 1</input>
    <br/>
    <input type="radio" id="radio2" name="gok" value="Radio 2" disabled="disabled"> Radio 2</input>
    <br/>
    <input type="radio" id="radio3" name="gok" value="Radio 3" disabled="disabled"> Radio 3</input>
    <br/>
    <button type="button" id="submit" disabled="disabled"> Submit</button>
    </body>
    </html> 
```

选中时上面的复选框；单选按钮被启用并且提交按钮也被启用。我不认为这是一个优化的解决方案；请帮助我获得一个优化版本的代码，例如 1）如果我在 div 中保留单选和提交按钮并尝试使用 div 的 id 并启用内部单选按钮 2）在 jquery 中，我可以运行一个迭代器，这将减少我的代码行

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:17:44.770

**Javascript：**

```
$(document).ready(function(){
  $('#myText').click(function(){
    $('#enableMe').children().removeAttr('disabled'); // or $('#enableMe').children().prop('disabled',true/false')
  });
}); 
```

**html:**

```
<div id = 'enableMe'>
  <input type="checkbox" id="myText" value="Click it!">Click it!</input> <br/> <br/>

  <input type="radio" id="radio1" name="gok" value="Radio 1" disabled="disabled"> Radio 1</input> <br/>
  <input type="radio" id="radio2" name="gok" value="Radio 2" disabled="disabled"> Radio 2</input> <br/>
  <input type="radio" id="radio3" name="gok" value="Radio 3" disabled="disabled"> Radio 3</input> <br/>
  <button type="button" id="submit" disabled="disabled"> Submit</button>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:20:12.247

你可以做

```
$('#myText').click(function(){
       // if this is all you are going to have in your html just
       // $(this).siblings().prop('disabled',false) would work
       $(this).siblings('input[type=radio],#submit').prop('disabled',false);
 }) 
```

[http://jsfiddle.net/cj3zY/](http://jsfiddle.net/cj3zY/)

仅供参考，您使用 removeAttr 错误-

```
$('#radio1').removeAttr('disabled'); //<-- should be how you use it.. 
```

但是，如果您使用的是 jQuery 1.6+，那么您真的应该使用 .prop

```
$(element).prop('disabled',true/false); 
```

[.prop() 文档](http://api.jquery.com/prop/)

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

如果您想根据复选框切换禁用的属性..您可以这样做

```
$('#myText').click(function(){
       $(this).siblings('input[type=radio],#submit').prop('disabled',!this.checked);
})​ 
```

[http://jsfiddle.net/cj3zY/1/](http://jsfiddle.net/cj3zY/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:22:53.107

不要`id`为每个元素使用属性，而是使用`class`属性。

试试这个 -[**演示**](http://jsfiddle.net/HN3Ba/6/)

# html - background-image 和 repeat-x 导致 Mac OS、Firefox 14.0.1 上的图像变形

> ID：12201138
> 
> 赞同：2
> 
> 时间：2012-08-30T16:09:54.917
> 
> 标签：html, css, macos, firefox

我试图将背景图像（图案）设置为 div 并且我有图案变形，当我调整浏览器大小时会发生变化。

*   HTML & CSS：http: [//vulntest.16mb.com/](http://vulntest.16mb.com/)
*   截图：[https ://img.skitch.com/20120830-me47twteijh35i3k2nbkbbadnc.jpg](https://img.skitch.com/20120830-me47twteijh35i3k2nbkbbadnc.jpg)

当我删除 repeat-x 并将 div 的宽度设置为图案宽度（8px）时，图像看起来不错 - img.skitch.com/20120830-m69s2a7x4d3fdxjmsjjs8f58f6.jpg （抱歉，不能发布超过 2 个超链接）。我还在 Windows 7 的 IE9、Chrome 21、Firefox 13 和 Opera 12.01 上测试了这段代码，并且带有 repeat-x 的 div 看起来没问题。

所以我的问题是：

1.  那是浏览器的错误吗？
2.  我该如何解决这个问题？

非常感谢。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T12:24:20.780

完全没问题。如果您删除它，`background-repeat: repeat-x;`那么它会在 X 轴和 Y 轴上重复。因为你给了它一个高度，所以它不能显示你重复 Y。只需删除它`repeat-x;`并给它一个更大的宽度。它将在两个轴上重复。

# javascript - 阻止现有脚本

> ID：12201139
> 
> 赞同：0
> 
> 时间：2012-08-30T16:09:58.137
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在为 Firefox 做一个插件。我想从 HTML 页面中提取视频并将其显示在黑色背景上。这就是我所拥有的。

```
//main.js
var pageMod = require("page-mod");

pageMod.add(new pageMod.PageMod({
  include: "http://myserver.fr/*",
  contentStyleFile: data.url("modify.css"),
  contentScriptFile: data.url('hack.js'),
  contentScriptWhen: 'start'
})); 
```

```
//hack.js
video = document.body.innerHTML;
document.body.innerHTML = '';
video = video.substring(video.lastIndexOf("<object"),video.lastIndexOf("</object>"));
video = "<div id='fond'></div><div id='mavideo'>"+video+"</div>"

document.body.innerHTML = video;
document.body.style.backgroundColor = "black";
document.body.style.margin = "0"; 
```

我的代码有效，但问题是我必须等待“几个小时”，而其他 javascript 正在执行。我尝试使用 contentScriptWhen: 'start' 但我没有改变任何东西。

任何想法阻止页面的其他脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:29:07.473

阻止脚本加载会有点困难，我们可以快速删除它们。

```
// remove all scripts
var scripts = document.getElementsByTagName("script");
var parent = null;
for (var i = 0; i < scripts.length; i += 1) {
    parent = scripts.item(i).parentNode;
    parent.removeChild(scripts.item(i));
} 
```

此代码尝试从您的页面中删除所有脚本标记，这将停止加载任何脚本并允许您运行其余代码。把它放在`hack.js`脚本的顶部。

我不知道您正在查看的页面，因此除了您使用 之外，很难知道发生了什么`substring`，而且`lastIndexOf`速度也不会很快。我们可以摆脱这些，看看你是否有任何明显的速度提升。

尝试改用查询选择器和文档片段。这是一个例子：

```
//hack.js
var fragment = document.createDocumentFragment();
var objects = document.getElementsByTagName("object");
// create your div objects and append to the fragment
var fond = document.createElement("div");
fond.setAttribute("id", "fond");
fragment.appendChild(fond);
var mavideo = document.createElement("div");
mavideo.setAttribute("id", "mavideo");
fragment.appendChild(mavideo);
// append all <object> tags to your video div
for (var i = 0; i < objects.length; i += 1) {
    mavideo.appendChild(objects.item(i));
}
// clear and append it all in
document.body.innerHTML = '';
document.body.appendChild(fragment); 
```

该代码将所有对象放入文档片段中，因此您可以擦除整个页面，然后将其全部重新添加；不需要库。你的 div 和 mavideo 也在那里。

*我并没有真正测试所有这些代码，所以希望它能按预期工作。*

# c# - 在 C# 中使用 Kerberos 令牌

> ID：12201141
> 
> 赞同：5
> 
> 时间：2012-08-30T16:10:00.803
> 
> 标签：c#, .net, kerberos

我正在尝试使用`KerberosSecurityTokenProvider`. 不幸的是，有关其使用的文档非常有限，而且我没有取得太大的成功。我编写了以下示例测试应用程序：

```
var oProvider = new KerberosSecurityTokenProvider("MACHINENAME",TokenImpersonationLevel.Identification);
var oToken = (KerberosRequestorSecurityToken)oProvider.GetToken(TimeSpan.FromHours(1));

Console.WriteLine(oToken.ValidFrom);
Console.WriteLine(oToken.ValidTo);
Console.WriteLine(oToken.Id);

var abRequest = oToken.GetRequest();
var sId = oToken.Id;

try
{
    var oReceivedToken = new KerberosReceiverSecurityToken(abRequest, sId);
    var oAuthenticator = new KerberosSecurityTokenAuthenticator();

    var oCol = oAuthenticator.ValidateToken(oReceivedToken);
    foreach (var o in oCol)
    {
        Console.WriteLine(o.Id);
    }
}
catch(Exception e)
{
    Console.WriteLine(e);
} 
```

`MACHINENAME`我的机器的名字在哪里。它成功获得了一个 Kerberos 令牌，但是当我尝试验证它时，我得到：

```
System.IdentityModel.Tokens.SecurityTokenException: The AcceptSecurityContext failed. ---> System.ComponentModel.Win32Exception: The logon attempt failed 
```

这给我留下了许多问题：

*   这是在 C# 中获取/验证 Kerberos 令牌的正确方法吗？
*   如果我只是说我想使用令牌进行识别，为什么它会尝试执行登录？
*   错误是由于我的代码造成的，还是还需要解决域配置问题？

有关如何在 .NET 中使用您自己的 Kerberos 令牌的任何评论？

# c# - 数据网格多列排序

> ID：12201145
> 
> 赞同：1
> 
> 时间：2012-08-30T16:10:21.387
> 
> 标签：c#, .net, wpf, datagrid

我的数据网格是这样设置的：

*   ItemsSource 绑定到 ObservableCollection
*   处理排序事件
    *   e.Handled = true;
    *   清除 observable 集合
    *   使用排序逻辑查询数据库
    *   Foreach 结果添加到可观察集合

这很好用，但我想启用多列排序。据我了解，在单击列标题时按住 shift 是最终用户执行此操作的方式。但是在排序事件中，我不知道如何获取排序描述。

这是我的单列服务器端排序代码，效果很好：

```
public class DataGrid : System.Windows.Controls.DataGrid
{
    public event EventHandler<SortExpressionConstructedEventArgs> SortExpressionConstructed;

    public void OnSortExpressionConstructed(SortExpressionConstructedEventArgs e)
    {
        EventHandler<SortExpressionConstructedEventArgs> handler = SortExpressionConstructed;
        if (handler != null) handler(this, e);
    }

    public DataGrid()
    {
        Sorting += DataGridSorting;
    }

    void DataGridSorting(object sender, System.Windows.Controls.DataGridSortingEventArgs e)
    {
        e.Handled = true;
        e.Column.SortDirection = e.Column.SortDirection != ListSortDirection.Ascending
                                     ? ListSortDirection.Ascending
                                     : ListSortDirection.Descending;

        var sd = new SortDescription(e.Column.SortMemberPath, e.Column.SortDirection.Value);
        OnSortExpressionConstructed(new SortExpressionConstructedEventArgs(sd));
    }
}

public class SortExpressionConstructedEventArgs : EventArgs
{
    public SortExpressionConstructedEventArgs(SortDescription sortDescription)
    {
        SortDescription = sortDescription;
    }

    public SortDescription SortDescription { get; private set; }

    // event handler can use this to sort the query
    public IOrderedQueryable<T> Order<T>(IQueryable<T> queryable)
    {
        switch (SortDescription.Direction)
        {
            case ListSortDirection.Ascending:
                return enumerable.OrderBy(SortDescription.PropertyName);

            case ListSortDirection.Descending:
                return enumerable.OrderByDescending(SortDescription.PropertyName);

            default:
                throw new ArgumentOutOfRangeException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:56:53.533

我的解决方案是手动跟踪派生的 DataGrid 类中的排序列，它运行良好。

[https://github.com/ronnieoverby/RonnieOverbyGrabBag/blob/master/DataGrid.cs](https://github.com/ronnieoverby/RonnieOverbyGrabBag/blob/master/DataGrid.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T06:38:16.073

我的方法对我有用。试试这个代码。

```
if (dgEvents.ItemsSource == null)
    dgEvents.ItemsSource = events.Entries;

CollectionViewSource.GetDefaultView(dgEvents.ItemsSource).Refresh();

dgEvents.Items.SortDescriptions.Clear();

dgEvents.Items.SortDescriptions.Add(new SortDescription(dgEvents.Columns[0].SortMemberPath, ListSortDirection.Descending));

foreach (var col in dgEvents.Columns)
{
    col.SortDirection = null;
}

dgEvents.Columns[0].SortDirection = ListSortDirection.Descending;

dgEvents.Items.Refresh(); 
```

# asp.net - Visual Studio 2012 Web Publish 不复制文件

> ID：12201146
> 
> 赞同：232
> 
> 时间：2012-08-30T16:10:21.373
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2012, msbuild-wpp, visual-studio-publish

我在 VS 2012 中有一个 Web 应用程序项目，当我使用 Web 发布工具时，它会成功构建，但不会将任何文件复制到发布目标（在本例中为文件系统）。

如果我查看构建输出，我可以看到所有内容都被正确复制到 obj\Release\Package\PackageTmp\ 但是我在构建输出中看到的只是：

> 4>完成构建项目“{Project}.csproj”。
> 4>删除现有文件...
> 4>发布文件夹/...
> 4> ========== 构建：3成功，0失败，1最新，0跳过===== =====
> ========== 发布：1 成功，0 失败，0 跳过 ==========

即使它说发布成功，发布的目标目录中也没有文件。

我在多个项目中看到过这种情况，有时似乎是解决方案/平台配置导致了这个问题，但我无法确定确切的原因。

有没有其他人看到这种情况发生或知道如何让它正常工作？

**更新：**

我可能已经找到了解决方法。我刚刚再次发生这种情况，并且我正在搞乱发布设置。一旦我将“设置”选项卡上的选定配置更改为另一种配置，然后返回到我想要使用的所有文件，我的所有文件都重新开始发布。希望这适用于未来的其他项目。

**更新 2：**

我在 Microsoft Connect 上发布了一个错误，并收到了 VS Web 开发团队的一位开发人员的回复。他说他们已经在内部构建中解决了这个问题，并将很快发布发布工具的更新来解决这个问题。

**更新 3：**

这最近已通过 Visual Studio 2012 Update 2 修复

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-09-12T17:07:04.843

同样的问题。解决方法是将发布设置从 Release 更改为 Debug。重新发布，然后改回发布...

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-09-20T02:22:10.697

这可能是由使用 vs2012 的 RC 创建的解决方案/项目引起的。这在几个月前发生在我身上，并通过确保我的解决方案构建配置与我的项目配置相匹配来解决问题......

我最近在使用 VS2012 Express for Web 打开最初在 vs2012RC 中创建的相同解决方案时遇到了同样的问题。我完全按照原始海报的建议做了，它解决了我的问题。

这是引导我找到答案的线索：

[connect.microsoft.com/VisualStudio/feedback/details/746321/publish-web-application-fails](http://connect.microsoft.com/VisualStudio/feedback/details/746321/publish-web-application-fails)

上述对话中对我有帮助的相关回应是：

> Microsoft 于 2012 年 6 月 13 日下午 12:00 发布
> 
> 这是我们如何处理解决方案配置与项目配置的一个错误。我们错误地假设它们是相同的（例如，Solution 的 Release|x86 会将每个项目也设置为 Release|x86），这导致我们使用错误的构建属性来发布文件。
> 
> 解决方法是使解决方案配置和构建配置匹配。此问题将在 Visual Studio 2012 的下一版本中修复。
> 
> 谢谢， - Jimmy Lewis SDET，视觉 Web 开发团队

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-09-24T13:51:50.560

更进一步。创建发布配置文件时创建了两个文件。

*   `NewProfile.pubxml`
*   `NewProfile.pubxml.user`

当您从源代码管理打开一个在 PublishProfile 文件夹中包含这些文件的项目时，它只有`.pubxml`文件而不是`.publxml.user`文件，因此它会`.publxml.user`在您打开项目时动态创建文件。当它动态创建新`.publxml.user`的xml时，它看起来像：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
</Project> 
```

当您创建一个新的配置文件时，它会创建如下所示的 xml：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <LastUsedBuildConfiguration>Release</LastUsedBuildConfiguration>
    <LastUsedPlatform>Any CPU</LastUsedPlatform>
    <TimeStampOfAssociatedLegacyPublishXmlFile />
    <EncryptedPassword />
  </PropertyGroup>
</Project> 
```

如果您将`<PropertyGroup>`节点放入`.pubxml.user`文件中，您的 PublishProfiles 将再次开始工作。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-02-13T15:44:40.773

一个简单的解决方法是删除您的发布配置文件并创建一个新的。

当您右键单击您的解决方案并选择发布时，您有一个配置文件集。删除它并创建一个新的。

这将解决它。

我从 2010 年切换到 2012 年遇到了这个问题

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-11-19T11:59:07.827

我有同样的错误，我将设置从**发布更改为调试**，问题解决了..

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-01-28T17:10:29.133

我遇到了同样的问题，但是这个线程中的答案都没有对我有用。我的问题是有一个目录包含动态生成的（由我的应用程序）静态 HTML 文件。整个目录没有发布。

[在这里](http://www.garrypassarella.co.uk/2012/03/16/all-files-not-being-published-in-visual-studio/)找到了对我有用的解决方案：

> 不久前我遇到的一个问题是，我认为我应该记录的一个问题是，当我发布我的项目时，某些文件类型没有被上传。
> 
> 有问题的文件类型是 .pdf 文件和 .rtf。
> 
> 发生这种情况的原因是这些文件扩展名未被 Visual Studio 识别为需要发布。幸运的是，这可以在 Visual Studio 中进行更改。
> 
> 选择未复制的文件。在**Properties**中确保**Build Action**设置为**Content**。
> 
> 如果这不起作用，可以尝试以下方法。
> 
> 在**Project**菜单下选择**Package/Publish** Web 并注意这个下拉菜单：
> 
> ![在此处输入图像描述](../Images/7bcffa2a347a2cae39afd0ac8caec61c.png)
> 
> 尝试将其更改为此项目文件夹中的所有文件。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-15T17:18:59.437

这是因为 .pubxml.user 包含发布所需的信息，并且该文件不（也不应该）包含在源代码管理中。要修复此 VS 错误，请将 .pubxml.user 文件中的信息复制到 .pubxml 文件中。相关属性为：

```
<LastUsedBuildConfiguration>Release</LastUsedBuildConfiguration>
<LastUsedPlatform>Any CPU</LastUsedPlatform> 
```

把它们放在你的 .pubxml 中，你应该很高兴。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-10-19T03:06:52.330

我尝试了所有这些解决方案，但这是每次都有效的解决方案。

我们只需将“发布方法：”从“文件系统”更改为例如“Web 部署”，然后立即将其更改回“文件系统”。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-09-08T06:30:53.237

我对几个项目有（有）同样的问题。唯一受到打击的似乎是网络项目。删除和重新创建配置文件只能解决一次问题。此外，比较生成的 publishxml 没有任何差异，因此它似乎与配置文件完全无关。

OP 提到的来回更改构建问题的解决方法似乎是目前唯一可靠的解决方案。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-09-05T09:08:47.083

我在 VS 2010 上遇到了同样的问题，在检查了发布输出、事件日志、打开和检查 Visual Studio 日志等之后，我决定删除我认为最近更新到 v1 的网络发布（通过添加/删除）。 0.30810.0。这解决了问题。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-12-20T07:58:44.980

在这里，我们遇到了同样的问题。

我们只需将“发布方法：”从“文件系统”更改为例如“Web 部署”，然后立即将其更改回“文件系统”。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-05-17T10:43:46.047

以下对我有用：

只需从 Release>Debug>Release 更改（反之亦然）然后发布。

无需删除、编辑、发布您不需要的任何内容。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-11-21T13:37:51.417

我的问题是 myproject.csproj 文件的配置错误。'_address-step1-stored.cshtml' 文件在发布时未复制。“无”更改为“内容”，现在可以了。 [![在此处输入图像描述](../Images/a106cab1d75618ef717c5accdc417938.png)](https://i.stack.imgur.com/WpKaH.png)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-12-10T18:29:54.393

带有磁盘发布目标的 VS 2012 Pro 也存在同样的问题。项目用于正确发布，但开始执行此问题，无法将文件复制到目标文件夹。

解决方案是编辑发布配置文件，将模式从 Release (Any CPU) 更改为 debug 然后回到 Release (Any CPU)。这样做会导致 PublishProfiles\projname.pubxml.user 文件被重写（如上所述）。看起来它在 propertygroup 节点下添加了 LastUsedBuild、LastUsedPlatform 和 TimeStampOfAssociatedLegacyPublishXmlFile 元素。发布完成后，它会添加另一个包含单个文件和发布时间的 ItemGroup。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-03-13T14:13:36.923

对于它的价值，我最终放弃了与 Web Deploy 的斗争，以让它做我想做的事情（复制可部署文件而不是其他任何东西），所以我在 PowerShell 中编写了它的脚本，并且对结果非常满意。它比我通过 MSBuild/Web Publish 尝试的*任何*方法都快得多，大概是因为这些方法仍在做我不需要的事情。

这是要点（[字面意思](https://gist.github.com/tmenier/9199441)）：

```
function copy-deployable-web-files($proj_path, $deploy_dir) {
  # copy files where Build Action = "Content" 
  $proj_dir = split-path -parent $proj_path
  [xml]$xml = get-content $proj_path
  $xml.Project.ItemGroup | % { $_.Content } | % { $_.Include } | ? { $_ } | % {
    $from = "$proj_dir\$_"
    $to = split-path -parent "$deploy_dir\$_"
    if (!(test-path $to)) { md $to }
    cp $from $to
  }

  # copy everything in bin
  cp "$proj_dir\bin" $deploy_dir -recurse
} 
```

在我的情况下，我在 CI 环境（TeamCity）中调用它，但它也可以很容易地连接到构建后事件中。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-01-25T03:33:51.233

这个动作对我来说是成功的：

在“Properties>PublishProfiles>xxxx.pubxml”中终止发布配置文件并再次重新设置。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-03-18T10:20:19.720

我发现我可以通过将目标位置从 obj/[release|stage|..] 完全更改为解决方案文件夹之外的新路径来解决这个问题，例如 c:\deployment。似乎 VS 2012 在发布过程中变得困惑并且可能在某个地方放弃了。

马特

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-05-27T17:49:42.970

最近在 VS 2013 中我导入了 Umbraco CMS 的 MVC 项目也遇到了同样的问题。我无法发布。上面的答案有所帮助，尽管我需要一段时间来弄清楚我实际上应该在 VS 中做什么。它需要一些研究，例如在 MS 博客上找到。我试着简单地说：

*   在 VS 工具栏中选择某个配置，例如 Release 和 Any CPU。运行项目。
*   然后在解决方案资源管理器中右键单击相关解决方案，选择发布。创建一个新的发布配置文件或使用给定的配置文件，但始终确保在设置中选择相同的配置（例如发布和任何 CPU），就像您上次运行项目之前一样。
*   此外，在我的情况下，有**必要删除 OBJ**文件夹，因为在这里我上次尝试发布失败的设置卡住了，尽管我重新启动了 VS 并删除了所有发布配置文件。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-01-10T12:27:54.200

我在解决方案中有一个包含其他几个引用项目的 Web 应用程序。过去，我已经多次使用单个发布配置成功部署。对于过去错过的项目，我将项目配置从调试更改为发布。下次我尝试部署时，我得到了这些症状，发布只是悄悄地失败了——它什么也不做，说它成功了：

```
1>------ Build started: Project: Project, Configuration: DeployProduction Any CPU ------
1>  
2>Publishing folder /...
========== Build: 1 succeeded, 0 failed, 9 up-to-date, 0 skipped ==========
========== Publish: 1 succeeded, 0 failed, 0 skipped ========== 
```

恢复它的唯一方法是清除发布配置文件，关闭 Visual Studio 以强制它保存删除，重新打开它，然后从头开始重新创建发布配置文件。一旦我这样做了，我就可以再次发布。

Win8 VS2012，蹩脚的笔记本电脑。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-03-21T10:11:06.617

在 Visual Studio 2012 中，版本之间的切换仍然会导致问题。

我们添加了一个预构建事件来删除`obj`文件夹：`del /s /f /q $(ProjectDir)\obj`它修复了发布问题。清洁有时有效，但并非总是如此。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-11-06T12:44:49.773

我终于自己找到了答案。以上所有解决方案都不适合我。

我所做的是我将项目移动到驱动器 c 将项目文件夹更改为更短的内容并使其发布..

它失败的原因是我的项目名称/层次结构很长。

C:\Users\user\Desktop\Compliance Management System\ComplianceIssueManagementSystem\ComplianceIssueManagementSystem

我想到了这一点，因为有时当我提取 rar 文件时，它说名称/路径太长。我认为它将与 Visual Studio 2012 发布相同。确实如此！

希望它会帮助你们。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-12-21T07:16:40.537

检查您当前的项目是否已经使用相同的类名和不同的页面名进行了备份（类名将继承复制的文件）。最终这会使编译器感到困惑！！！

CodeFile="Consolidated.aspx.vb" Inherits="Consolidated

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-06-30T15:28:04.100

以上解决方案都不适合我。

但我注意到，在我们的主解决方案中的五个 ASP.NET MVC 项目中，其中四个将部署包放在了正确的位置，而一个放在 obj\Debug 下。

我比较了这些项目并发现了差异。 **解决方案是改变这一点**：

```
<Import
    Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

**对此**：

```
<Import
  Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets"
  Condition="'$(VSToolsPath)' != ''" />
<Import
  Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets"
  Condition="false" /> 
```

在我进行此更改后，所有五个项目都将它们的部署包放在了正确的位置。

（对不起，长线，但我找不到更好的方法来压缩它们。）

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-09-05T01:58:30.560

我遇到了这个问题，Visual Studio 生成的**服务参考**文件在整个路径长度方面变得太长。

通过使用 svcutil.exe 重新生成服务引用来缩短它们，删除所有原始服务引用文件。

svcutil 可以这样调用：

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\SvcUtil.exe" /language:CS http://myservice /namespace:*,My.Namespace 
```

My.Namespace 应替换为生成的服务代理中的现有命名空间（通常在 Reference.cs 文件中找到）以避免编译错误。

`http://myservice`应替换为服务端点 url。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-04-02T05:22:36.063

我遇到了同样的问题。以上解决方案都不适合我。

> 因此，我排除了发布时无法复制的文件。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-04-18T05:15:59.123

我曾多次发布该网站。但是有一天我修改了一些 aspx 文件，然后尝试发布网站，结果是一个空的已发布文件夹。

在我的解决方法中，我找到了解决方案。

1.  发布向导将在发布时反映任何错误，但不会将任何文件复制到目标文件夹。

2.  要找出生成错误的文件，只需将网站文件夹内容复制到新文件夹并使用该网站启动 Visual Studio。

3.  现在，当您尝试发布时，它会为您提供包含错误的文件名。

4.  只需纠正原始网站文件夹中的错误并尝试发布，它将像以前一样工作。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-12-07T11:08:57.007

请按照以下步骤解决：

```
Build > Publish > Profile > New 
```

创建一个新配置文件并使用与现有配置文件相同的设置对其进行配置。

该项目现在将正确发布。这通常是由于在较新版本的 Visual Studio 中创建的另一台计算机的源代码控制发布配置文件的结果。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-12-06T04:08:04.397

**已修复**- 提供的各种解决方案对我不起作用。*VS Community 2017，Windows Server 2012 R2*对我有用的是更改用户的 TEMP 和 TMP 环境变量，然后**重新启动系统**并再次部署（重新启动 VS 是不够的）。这些临时变量是 VS 发布临时变量的地方。

[![在此处输入图像描述](../Images/b7cf55aa13d51f4176b5e29c85cbfe1c.png)](https://i.stack.imgur.com/yqH3Y.png)

[![在此处输入图像描述](../Images/6efa055f758a9df4d0cd440f7faab4bc.png)](https://i.stack.imgur.com/MX5Kk.png)

[![在此处输入图像描述](../Images/3ebddb523802f9e7329073c49f053a59.png)](https://i.stack.imgur.com/NnsDB.png)

**更改临时变量后重新启动 Visual Studio 并没有解决问题，必须重新启动系统。**

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-07-02T11:08:19.250

尝试退出 Visual Studio，删除 PublishProfiles 目录中相关的 pubxml.user 文件，重新启动 VS 并发布。在 VS 2019 上工作。

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2016-07-24T04:49:33.930

第一的：

*   构建发布配置。
*   在 Project Properties-> page 中选择 Package/Publish Web 下的所有文件和文件夹。
*   重建解决方案（清洁解决方案后）。
*   现在发布。

在发布时重新检查您选择的内容。
这应该这样做。它对我有用！:)

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2014-01-26T09:21:15.303

最简单的是，

```
 1\. select the file(s) that are not being copied,
   2\. Press <F4> to get the properties window
   3\. Make the "Build Action" property "compile" or "content" depending on what it is.
   4\. Now this particular file will be included! 
```

# c# - 在 MVC3 下通过 LINQ 包含引用的表

> ID：12201152
> 
> 赞同：1
> 
> 时间：2012-08-30T16:10:35.390
> 
> 标签：c#, asp.net-mvc-3, linq

如何`Include`在 MVC3 下正确使用 LINQ？

我创建了**.edmx**文件，它包含所有表格。

他们中的两个有一个relashionships

> UserCategories 1..0 - * 用户

我猜想使用

```
var userCategories = db.UserCategories.Include("Users"); 
```

为了填充`Users`属性。***但它始终是空***的。

（[这里](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4)有一个很好的例子如何使用它。但没有成功。）

我该如何解决？

**PS POCO 类**

```
 public partial class UserCategory
    {
        public UserCategory()
        {
            this.Users = new HashSet<User>();
        }

        public string Name { get; set; } 
        public System.Guid ID { get; set; }

        public virtual ICollection<User> Users { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:36:14.450

好的，首先如果`Users`它是空的，可能是因为您没有数据库中的数据。现在具体重构你的表达方式

```
var userCategories = db.UserCategories.Select(x => x.Users).ToList(); 
```

这将检索数据库中与表 UserCategory 有关系的所有用户

如果您只是尝试获取用户，无论与表的关系如何

```
var users = db.Users.ToList(); // This retrieve all the users in your database 
```

免责声明：请注意，此表达式是沉重的，并谨慎使用数据库的所有记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:57:41.787

```
Class Model
{
   private int userName;
   .....
   public UserName{get{return userName;} set{userName= value;}}
   ....
} 
```

我假设 Model 是传递模型，它有一个 UserName 属性。并且用户表中有一个用户名列。

```
 private dbContext db = new dbContext();

    public List<Model> method(){
    List<Model> m= List<Model>()   
    var userCategories = db.UserCategories.Include("Users");

    return from item in userCategories select new Model
             {
                 UserName = item.Users.userName
                 .......
             }
    } 
```

这个返回值将是一个`IEnumerable<Model>`它将在 foreach 中执行。所以

# mysql - 搜索两个mysql表，服务器变得无响应

> ID：12201153
> 
> 赞同：2
> 
> 时间：2012-08-30T16:10:36.090
> 
> 标签：mysql

我正在尝试从两个表中选择数据。DBA 将表配置为第一个表假脱机记录 5 分钟，然后一个过程将数据移动到第二个表并清理假脱机。这不断重复。问题是我需要从两个表中选择数据。

到目前为止，这是我的查询：

```
select * from table1,table2 
where ( (table1.field>=DATE_SUB(UTC_TIMESTAMP(), INTERVAL 5 MINUTE))  
OR 
(table2.field>=DATE_SUB(UTC_TIMESTAMP(), INTERVAL 5 MINUTE)) ) 
```

单独搜索任何一个条件都很快，但是当我像上面那样将它们放在一起时，系统就停在那里并且变得没有响应。我只是好奇我做错了什么。我应该用工会来代替吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:13:04.190

您正在加入 2 个表**而没有任何加入 where 子句**，因此您正在提取 M*N 记录（笛卡尔积）。

换句话说，如果 table1 有 100 条匹配第一个条件的记录，而 table2 有 10,000 条记录，则您检索的是 1,000,000 条记录，而不是 10,100 条。最重要的是，您要检索的每条记录的大小都是 2 倍，因为它包括 table1 行中的所有字段 + table2 行中的所有字段，因此您不仅将行数增加了 100 倍（使用我的例如#s），您还将检索到的数据大小增加了 200 倍。

**您想要的是使用 UNION 而不是联接。**

```
select * from table1
where table1.field>=DATE_SUB(UTC_TIMESTAMP(), INTERVAL 5 MINUTE))  
UNION
select * from table2
where table2.field>=DATE_SUB(UTC_TIMESTAMP(), INTERVAL 5 MINUTE)) 
```

# c# - winform 中的 C++ 非托管代码

> ID：12201159
> 
> 赞同：1
> 
> 时间：2012-08-30T16:10:55.243
> 
> 标签：c#, c++, winforms, directx

首先：我在 Windows 7 上使用 C# 和 C++。

我用 Directx 10 在 C++ 中创建了一个基本的渲染引擎。它作为一个独立的应用程序运行良好。但是，当我发送 WinForm 的 Form.Handle 时，我想在引擎内部渲染它在 D3D10CreateDeviceAndSwapChain 期间崩溃并出现以下错误：

```
HRESULT: 0x887a0001 (2289696769)
Name: DXGI_ERROR_INVALID_CALL 
```

在加载表单期间，我从 winform 获取句柄。

```
unsafe {
  void *ptr=m_view.Handle.ToPointer();
  uint v = (uint)ptr;
  lhandle = v.ToString();
}; 
```

在 gamedev.stackexchanged 上也提出了问题，建议也在这里提出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:26:33.300

必须为父窗口创建一个**CHILD**，而不是直接使用父窗口句柄。

# android - actionbar sherlock - 如何为主题中的活动区域设置背景图像

> ID：12201161
> 
> 赞同：0
> 
> 时间：2012-08-30T16:10:54.817
> 
> 标签：android, background, actionbarsherlock

我正在使用 actionbar sherlock，效果很好。我唯一的问题是弄清楚如何为活动使用的区域设置背景图像。我最终得到的只是为操作栏本身设置背景图像。

任何建议高度赞赏

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:43:51.320

该`windowBackground`属性非常适合此。

```
<style name="MyTheme" parent="Theme.Sherlock">
    <item name="android:windowBackground">here!</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:23:20.417

只需在您的活动中为您的主要布局设置背景。例如。在您的布局文件中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/myImage" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T08:11:03.170

只需在 onCreate() 中编写以下代码行。

```
getSupportActionBar().setIcon(R.drawable.your_image); 
```

# image - 将 2D 图像转换为 3D 图像

> ID：12201176
> 
> 赞同：0
> 
> 时间：2012-08-30T16:11:32.040
> 
> 标签：image, 3d, 2d

我将开发一个系统，它将 2D 静止图像作为输入和 3D 图像作为输出。所以步骤是： 1\. 从 2D 图像创建深度图 2\. 从深度图和原始图像创建 3D 图像。有人可以建议我生成二维图像深度图的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:12:50.687

据我所知，没有 100% 的防弹算法可以将 2D 图像转换为 3D 模型。简单地说，2D 图像中没有足够的信息来完全构建 3D 的东西。一些 3D 电视机设法从 2D 输入做一些假 3D，但没有什么真正令人信服的（有时是错误的）。

著名的软件（如 Kinect 中的软件）所做的是使用多个源而不是单个 2D 图像。使用不同角度的图片，您可以跟踪图像中的某些特定特征，并通过几何计算输出一些 3D 的东西。有关完整说明，请参阅[http://en.wikipedia.org/wiki/3D_reconstruction_from_multiple_images](http://en.wikipedia.org/wiki/3D_reconstruction_from_multiple_images)。

如果你被单一图像卡住了，最著名的工具就是人眼……人类可以很容易地从一张图片中重建 3D，通过无意识地融合几个因素，比如他们对场景的体验、焦点模糊、“远- 远离雾气效果”等...因此，获得结果的最佳方法是在任何图像编辑软件中自己制作深度图...

朱利安

# c# - 调度 MVC 4 - C# 在特定时间调用函数

> ID：12201177
> 
> 赞同：1
> 
> 时间：2012-08-30T16:11:34.110
> 
> 标签：c#, sms, asp.net-mvc-4, scheduling

我是新手，*`MVC 4`*这是我第一个使用这项技术的项目，我浏览了[ASP.NET中的](http://www.asp.net/mvc/tutorials)[Movie](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)和[ContosoUniversity](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)示例。

该网站声称销售预付费产品。数据库包含用户、经销商、供应商等表。

我正在尝试安排我的系统。

例如，每天晚上 23:59，将调用一个特定的函数，并从数据库中检索满足特定查询的所有用户名和密码。

我还需要在某个日期之前发送短信，我在表格上分配了一个单独的列，它将保持在服务结束时发出的警报。

我很想听听想法以及如何开始搞乱系统调度或实现特定想法。

谢谢并原谅我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:52:51.730

最后我在全球asax内做到了。我不知道这是否是最好的方法，但它有效..

这是代码。

```
protected void Application_Start()
    {
        try
        {

           .
           .
           .
            SetTimer();
        }
        catch (Exception ex)
        {
            ...
        }
    }

    private static void SetTimer()
    {
        DateTime tomorow = DateTime.Now.AddDays(1);
        DateTime midnight = new DateTime(tomorow.Year, tomorow.Month, tomorow.Day, 0, 0, 0);
        TimeSpan d = midnight - DateTime.Now;

        sTimer.Enabled = true;
        sTimer.Interval = d.TotalMilliseconds;
        sTimer.Elapsed += new System.Timers.ElapsedEventHandler(sTimer_Elapsed);
        sTimer.Start();
    }

    static void sTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        sTimer.Interval = TimeSpan.FromHours(24).TotalMilliseconds;
        db = new CompanyContext();

        //some func
        sendInOutUsers();            
        AlartUsers();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:17:47.000

您需要将调度作为 MVC 项目之外的单独组件进行。通常，您将创建一个始终在 IIS 服务器（或其他服务器）上运行的 Windows 服务项目，该项目将包括一个计时器，以按指定的时间表启动不同的任务。您可以在数据库中创建一个配置文件或一个表，其中包含计划和其他执行信息，并从服务中查询此文件或表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:18:42.600

在预定时间运行的服务器上使用单独的 Windows 服务怎么样？我亲自实现了这一点，并且效果很好。

# mysql - 为什么会出现 Hibernate NonUniqueObject 异常？

> ID：12201182
> 
> 赞同：0
> 
> 时间：2012-08-30T16:11:50.617
> 
> 标签：mysql, hibernate, jakarta-ee, database-design, hibernate-mapping

# 我试图弄清楚为什么我很难调试休眠错误，并且我已将触发行为缩小到当我尝试保存将在另一个客户中具有一个 taris 子集的客户对象时。以下是精简的类和 hbm 映射：

```
**<POJOs>**

public class Tarif {
  private Long idTarifRailingLTD;
  private String name;
  private Set<Customer> customers=new HashSet<Customer>();
}

public class Customer extends Society {
    private Company company;
    private boolean actif;
    private String tvaNumber;
    private Set<Tarif> tarifRailings = new HashSet<Tarif>();
}

**<HBMs>**    

<class name="comp.model.accounting.Tarif" table="Tarif" lazy="false">
    <id name="idTarif" type="long">
        <generator class="native"/>
    </id>

    <property name="name" length="50" not-null="true"/>

    <set name="customers"  table="customer_tarifrailing" inverse="true" lazy="false" fetch="select" cascade="all">
        <key column="idTarif"/>
        <many-to-many class="comp.model.customer.Customer" column="idCustomer"/>
    </set>

</class>

<joined-subclass name="comp.model.customer.Customer" table="customer" lazy="false">
    <key column="idSociety"/>
    <property name="actif" type="boolean"/>
    <property name="tvaNumber" length="80"/>

    <many-to-one name="company" class="comp.model.company.Company" column="idCompany" 
                             not-null="true"/>  

    <set name="tarifRailings"  table="customer_tarif" inverse="false" lazy="false" fetch="select" cascade="all">
        <key column="idCustomer"/>
        <many-to-many class="comp.model.accounting.Tarif" column="idTarif"/>
    </set>

</joined-subclass> 
```

触发行为是，当我尝试使用一组费率来坚持客户时，该客户在另一个客户的费率中具有子集（子集的数量必须大于 1）。例如**客户 1**有**tarif #1 #2 #3 #4**，**客户 #2**可以有 tarifs **#1 #5 #6 #7**，但不是 tarif **#1 #2 #5 #6**因为**#1 #2**是**#1 #2 #3 #4**。我现在不确定为什么会这样。

```
 **<The Function>**
    public static void addTarifToCustomer(Customer customer, Tarif tarif) throws UserServiceException, Exception {

                // Begin unit of work
            Session session = HibernateUtil.getSessionFactory().getCurrentSession();
                session.beginTransaction();

                customer.addTarifRailing(tarifRailing);
                    session.saveOrUpdate(customer);
                entKeys = session.getStatistics().getEntityKeys();
                // End unit of work
                session.getTransaction().commit();

            } catch (ObjectNotFoundException ex) {
                HibernateUtil.getSessionFactory().getCurrentSession().getTransaction().rollback();
                throw new NotFoundDAOException("L'object d'identifiant " + customer.getIdSociety()
                        + " n'existe pas dans la base", ex);
            } catch (ConstraintViolationException ex) {
                HibernateUtil.getSessionFactory().getCurrentSession().getTransaction().rollback();
                throw new AlreadyExistDAOException("Nouvel identifiant déja existant en base", ex);
            } catch (Exception ex) {
                ex.printStackTrace();
                HibernateUtil.getSessionFactory().getCurrentSession().getTransaction().rollback();
                throw new Exception(ex);
            }
        } 
```

[堆栈跟踪在这里](http://pastebin.com/zciCaUJF)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:01:53.373

@Luckasz我已经从堆栈跟踪中知道它是这样的，但是由于这是一个继承的项目，因此很难确定是否加载了另一个实例以及最终我不得不通过持久化/更新来解决这个问题动作层（控制器）中的对象，而不是通过 DAO 层。
非常感谢 irc 频道的 sebersole 帮助我找到解决方法。

# android - 离线时，我是否应该在缓存的 html5 应用程序中从 android 浏览器收到警告框？

> ID：12201189
> 
> 赞同：2
> 
> 时间：2012-08-30T16:12:12.013
> 
> 标签：android, html5-appcache, android-2.3-gingerbread

使用 Android 2.3.5 Gingerbread 内置浏览器。使用 html5 创建了一个离线缓存的应用程序。

当我关闭网络时，页面似乎可以缓存，但是从一个页面移动到另一个页面我收到一条消息，警告我没有网络连接（带有设置/确定按钮）。如果我按 OK，您可以移动到下一页（也已缓存），但我的用户不满意每次从一个缓存页面转到下一个时都必须按 OK 按钮。

在 Android 4.0.4 平板电脑上，内部浏览器在网络关闭时不会生成消息。

谁能确认这是缓存 HTML5 应用程序的标准 Gingerbread 行为，还是我做错了什么？是否有任何低级设置来抑制该消息？

我唯一的另一个想法是将所有页面塞进一个页面并显示/隐藏它们，而不是从一个页面导航到另一个页面。或者只是构建一个原生应用程序。

我会切换到 Chrome，但它不会在 Gingerbread 上运行。

# r - 是否有一种简单的方法可以复制已安装的 CRAN 软件包列表（具有确切版本）？

> ID：12201190
> 
> 赞同：5
> 
> 时间：2012-08-30T16:12:17.363
> 
> 标签：r, package

我在多台计算机上用 R 开发代码。所述代码依赖于许多 CRAN 包，我想确保我的代码所依赖的包的版本保持同步。因此，我正在寻找一种在另一台计算机上复制已安装 CRAN 软件包（具有*相同*版本）列表的简单方法。

对于也了解 Python 的人，我正在寻找与`pip freeze`. 运行`pip freeze`打印出与其版本一起安装的软件包列表。然后在另一台计算机上，我可以将此文件反馈给 pip，它会安装与列出的所有软件包完全相同的版本。（我不想要的是在另一台计算机上安装最新版本的东西。）

在 R 中是否有一种简单的方法（或已经这样做的工具），还是我必须自己动手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:18:05.103

你看过`installed.packages()`吗？

```
R> IP <- installed.packages()
R> colnames(IP) 
 [1] "Package"   "LibPath"   "Version"   "Priority"  "Depends"   "Imports" 
 [7] "LinkingTo" "Suggests"  "Enhances"  "OS_type"   "License"   "Built"  
R> dim(IP)
[1] 284  12  
R> 
```

然后，您可以在另一侧滚动相应`install.packages()`的内容，可能还可以从 CRAN 的“存档”部分获取额外的版本。

# android - 在android应用程序中存储我自己的类的最简单方法？

> ID：12201192
> 
> 赞同：1
> 
> 时间：2012-08-30T16:12:25.117
> 
> 标签：android

存储我在 Android 应用程序中创建的类的列表 (LinkedList) 的最佳/最简单方法是什么？

在其他平台的应用程序中，可以使用：

*   ORM 框架
*   数据库
*   序列化和存储文件

但我的问题是：这 3 个中哪一个最容易在 Android 应用程序中实现，而无需花费大量时间来编写此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:21:32.290

在我看来，直接使用 SQLite 是最简单、最直接的方法。只有当我有很多类要存储时，我才会考虑使用 ORM 框架。但我假设这不是你的情况。

直接序列化到文件可能是个好主意，但我更希望**SQLite**能够使用数据库版本、添加索引和轻松地对数据执行更复杂的搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:25:46.957

这取决于您如何使用这些数据。最简单的方法是从 Serializable 继承您的类并将 LinkedList 转储到文件中。如果您不需要随机访问此列表的元素，这将非常有用。

SQLite 很好而且很灵活，但它需要更多的编码工作。

# javascript - 除了网址

> ID：12201195
> 
> 赞同：0
> 
> 时间：2012-08-30T16:12:37.770
> 
> 标签：javascript, html, url

我正在为 CSS 模板开发自己的模板选择器。目前，它工作正常，单击选择框中的名称会更改模板。但是，缺少 1 个功能。

如果你看这里：[http ://www.demo.joomforest.com/?template=corporate](http://www.demo.joomforest.com/?template=corporate)

您可以清楚地看到 URL 包含`?template=corporate`在它的末尾，因此如果您输入该 URL，它会加载**公司**模板。

到目前为止，这是我的选择器：http: [//joomjunk.co.uk/demo](http://joomjunk.co.uk/demo)

如您所见，我在选择模板时在 url 的末尾添加了一个哈希 + 模板名称，但是如果您将该 URL 复制并粘贴到新选项卡中，例如，它会加载默认模板。

所以我的问题是，如何添加类似于 ?template=corporate 的内容并让它在加载该特定 URL 时加载正确的模板？

我不是要完整的代码，而是要为我指明正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:33:01.680

如果你有一个类似的 URL，`http://foo.bar/#corporate`你可以`window.location.hash`在你的 javascript 中检查并立即加载该模板。

看起来很合理，因为您已经在下拉列表中添加了哈希 - 如果用户选择刷新页面，他们将看到相同的模板。

您甚至可以根据`hash`属性触发右侧下拉菜单项的单击事件，但这需要完全加载 DOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:33:16.760

```
window.location.search 
```

这将包含`?`URL 中的任何内容，**包括**`?`

如果

```
window.location.href === "http://www.demo.joomforest.com/?template=corporate" 
```

然后

```
window.location.search === "?template=corporate" 
```

如果要解析查询字符串，有很多可用资源。但是，如果您只想针对这种特定情况执行此操作：

```
var tmpl = window.location.search.split('=')[1];
// tmpl === "corporate" 
```

这将拆分字符串`=`，然后返回数组中的第二个元素

# r - 在 R 中为 ggplot 预设绘图选项的好方法是什么

> ID：12201196
> 
> 赞同：7
> 
> 时间：2012-08-30T16:12:41.997
> 
> 标签：r, ggplot2

我在整个文件中有一堆冗长的重复 ggplot2 指令。到目前为止，我一直在使用变量控制预设值来保持图形一致，将配置集中在一个位置（例如更改所有图形的颜色）。

我真正想要的是一种预设这些指令的好方法，这样我就不必把这些语句都写一遍了。例如，我在文件顶部定义了某处：

```
OPTAX=theme_text(angle=30, hjust=1, vjust=1, size=8) 
```

情节陈述在哪里，我用

```
P<-ggplot(
       data=MYDATA,
       aes(x=Topics, y=value, fill=variable)) +
       ....
       opts(axis.text.x=OPTAX)
) 
```

我想避免写这`axis.text.x=MYVAR`部分并写一些类似的东西

```
... + opts(MYOPTS) + ... 
```

或完全避免 opts 语句并编写

```
... + ALLMYOPTS + ... 
```

所以我的所有选项都在一个语句中预定义。

作为第二件事，最好覆盖该声明。就像是

```
opts(MYOPTS, axis.text.x=theme_text(angle=60) 
```

会很棒，所以我可以保留预设但仍然使用自定义选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T18:43:55.573

您可以通过使用列表来包装各种 ggplot 配置 - 而不仅仅是`opts`- 并将其应用于多个图形：

```
myPrettyOptions = list(
   opts(axis.text.x=OPTAX),
   facet_wrap(~Topic),
   limits(x=c(1,2)),
   scale_x_discrete(expand=c(0,0,5))
) 
```

然后在多个位置使用它：（想想您将节省的空间！）：

```
ggplot(blah) + myPrettyOptions
# in the second plot we can override the options:
ggplot(foo) + myPrettyOptions + opts(axis.text.x=theme_text(angle=60) 
```

您可以更进一步，准备除数据之外的所有内容：

```
graphtemplate = ggplot(blah) + myPrettyOptions
graphtemplate %+% data1
graphtemplate %+% data2 
```

注意`%+%`运算符的使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T18:28:14.667

更简洁的方法涉及使用 theme_update、theme_get 和 theme_set 方法。

```
old.theme <- theme_update(axis.text.x = theme_text(angle=30, hjust=1, vjust=1, size=8))
qplot(1,1) 
```

如果你想恢复到旧的主题使用，简单地说，

```
theme_set(old.theme)
qplot(1,1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:27:08.753

这将起作用：

```
ALLMYOPTS <- opts(axis.text.x = theme_text(angle=30, hjust=1, vjust=1, size=8))
P + ALLMYOPTS 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-17T16:57:46.300

首先将每个参数放入对象中，例如：

```
 a<- theme(axis.title.y = element_text(angle = 0))
    b<- theme(panel.background = element_rect(fill = "#e4e4e4")) + theme(axis.title.y = element_text(angle = 0, size=rel(1.5)))+ theme(axis.title.x=element_text(size=rel(1.5))) + theme(legend.text=element_text(size=rel(1.5)))+ theme(legend.title=element_text(size=rel(1.5), face = "italic")) + theme(plot.title = element_text(size = rel(1.5))) + theme(axis.text = element_text(size=rel(1.0)))
    c<- theme(axis.line.x=element_line(size=0.5, colour="black"))
    d<- theme(axis.line.y=element_line(size=0.5, colour="black"))
    e<- theme(legend.box.just = c("top"), legend.position="bottom",legend.justification=c(1,1), legend.direction="vertical", legend.box="horizontal") + theme(panel.grid.minor.y = element_blank())
    f<- ggplot(blah) + a +b +c +d +e
    f 
```

# android - 活动之间的翻转过渡

> ID：12201200
> 
> 赞同：0
> 
> 时间：2012-08-30T16:13:19.137
> 
> 标签：android, android-layout, android-activity, transition

我希望能够使用可以在 iphone 上实现的翻转过渡在活动之间进行过渡。在活动之间的android中这可能吗？

我需要在活动之间执行此操作，因为似乎我无法在一个活动中将功能操作栏从覆盖样式切换为实体样式。

# ios - 多个自定义单元格在同一个 XIB 中

> ID：12201204
> 
> 赞同：5
> 
> 时间：2012-08-30T16:13:39.907
> 
> 标签：ios, uitableview

在同一个 xib 中是否可以有多个自定义 uitableviewCell？

我正在尝试通过在同一个 xib 中组合不同的自定义单元格然后让表格从中加载不同的单元格来保存 xib 文件。

在 IB 中，我尝试将每个 uiTableViewCell 类设置为不同的自定义类 .m/.h 实现。这是我尝试过的：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *cellIdentifier = @"DevConfigCell";

DeviceInfoCell *cell = (DeviceInfoCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if(cell == nil)
{

    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell~iphone" owner:self options:nil];
    cell = ( DeviceInfoCell *)[nib objectAtIndex:0];

}

return cell;
} 
```

在另一张桌子上，我会重复使用笔尖，但我会这样做：

```
 cell = ( SecondDeviceInfoCell *)[nib objectAtIndex:0]; 
```

由于某种原因，它总是加载第一个单元格。

这一切都应该奏效吗？还是有办法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:17:43.940

> 我正在尝试通过在同一个 xib 中组合不同的自定义单元格来保存 XIB 文件

为什么？您可以创建的 .xib 文件的数量没有限制。

> 然后让表格从中加载不同的表格。

加载 .xib 时，会创建文件包含的*所有对象。*如果您将 10 个自定义单元格放在一个 .xib 中，加载该 .xib 将为这 10 个单元格中的每一个创建一个实例。这可能不是你想要的。将您的单元格保存在单独的 .xib 中可能是一个更好的计划。

> `cell = ( SecondDeviceInfoCell *)[nib objectAtIndex:0];`

您似乎对铸造的作用感到困惑。当您从一种类型转换为另一种类型时，您不会以某种方式选择不同的对象。如果数组具有相同的内容，则返回的对象`[nib objectAtIndex:0]`总是相同的。`nib`强制转换只是改变编译器与值关联的类型；在这种情况下，它会更改指针的类型。

您可以在视图控制器中创建一个`IBOutletCollection`，然后将几个不同的自定义单元连接到该插座集合；这将为您提供一组单元格，您可以使用`objectAtIndex:`. 但同样，这真的不是一个好主意，因为每次只需要一个单元格时，您都会在文件中创建*所有单元格。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T17:24:43.680

```
 NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"PlayerAvgsTableCell" owner:nil options:nil];
    for(id currentObject in topLevelObjects)
    {
        if([currentObject isKindOfClass:[PlayerAvgsTableCell class]])
        {
            cell = (PlayerAvgsTableCell *)currentObject;
            break;
        }
    }
} 
```

# vb6 - Visual Basic 6 清除文本文件中的内容而不引用库6

> ID：12201206
> 
> 赞同：2
> 
> 时间：2012-08-30T16:13:46.593
> 
> 标签：vb6

我想知道如何使用 VB6 删除文本文件中的所有内容，而无需添加对任何对象库的引用。不幸的是，我只知道如何打开它：

```
Open App.Path & "/media/text.txt" For Input As #1 
```

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T16:16:46.567

```
Dim intFile As Integer

intFile = FreeFile

Open App.Path & "/media/text.txt" For Output As #intFile
Close #intFile 
```

[将此](http://www.vb6.us/tutorials/how-read-simple-text-files)用作快速参考

# c - 关于数组下标运算符

> ID：12201210
> 
> 赞同：6
> 
> 时间：2012-08-30T16:14:04.670
> 
> 标签：c, arrays, subscript, c11

引用 C11 标准：

> **数组订阅（§ 6.5.2.1）**
> 
> 下标运算符的定义`[]`与`E1[E2]`相同`(*((E1)+(E2)))`。

我想知道为什么括号是`E1`必要的（C89标准中缺少它们），*即*哪个表达式可以`(*(E1+(E2)))`不同于`(*((E1)+(E2)))`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T17:46:53.860

根据[http://www.open-std.org/jtc1/sc22/wg14/www/docs/n841.htm](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n841.htm)，插入它只是为了清楚起见。这两个表达式在句法上是等价的。

> 公共评论号 PC-UK0103
> 评论 1.
> *类别*：编辑更改/非规范性贡献
> *委员会草案小节*：6.3.2.1
> *标题*：数组下标示例
> *详细说明*：
> 
> > 第 2 款应将“ ”替换`(*(E1+(E2)))`为“ `(*((E1)+(E2)))`”，以避免混淆。是的，我知道句法图表使它非常明确，但是第 2 段中的当前措辞非常混乱。

# jquery - 为每个手风琴提交表格

> ID：12201214
> 
> 赞同：2
> 
> 时间：2012-08-30T16:14:26.003
> 
> 标签：jquery, forms, validation, accordion

我有一个带有 4 个标题/部分的手风琴，每个部分都有一个表格。我需要将每个表单提交到服务器并给出回调，以及验证，然后用户才能继续流程的下一步。我有验证工作 - 我只是使用默认设置。现在如何为每个提交的表单获取回调？我知道我需要分配每个下一步按钮来提交，但我不知道如何使用这个脚本来做到这一点，因为这个脚本是为一个表单的单个提交而设计的。

我也不允许使用 PHP，因为它不是我们在这里使用的东西。我们使用 JSP 进行数据调用，因此请不要使用 PHP 响应。谢谢你。

我的验证脚本：

```
$(document).ready(function(){
// add * to required field labels
$('label.form-field-label-required').append('&nbsp;<strong>*</strong>');

// accordion functions
var accordion = $("#accordion").accordion();
var current = 0; 

$.validator.addMethod("pageRequired", function(value, element) {
    var $element = $(element)
    function match(index) {
        return current == index && $(element).parents("#accordion").length;
    }
    if (match(0) || match(1) || match(2)) {
        return !this.optional(element);
    }
    return "dependency-mismatch";
}, $.validator.messages.required)

    var v = $("#cmaForm").validate({
    errorClass: "warning",
    onkeyup: false,
    onblur: false,
    submitHandler: function() {
        alert("Submitted, thanks!");
    }
});

// back buttons do not need to run validation
$(".prevbutton").click(function(){
    accordion.accordion("activate", 0);
    current = 0;
}); 
$(".prevbutton").click(function(){
    accordion.accordion("activate", 1);
    current = 1;
}); 
// these buttons all run the validation, overridden by specific targets above
$(".open2").click(function() {
  if (v.form()) {
    accordion.accordion("activate", 2);
    current = 2;
  }
});
$(".open1").click(function() {
  if (v.form()) {
    accordion.accordion("activate", 1);
    current = 1;
  }
});
$(".open0").click(function() {
  if (v.form()) {
    accordion.accordion("activate", 0);
    current = 0;
  }
});
}); 
```

我的表单提交脚本：（我不知道表单提交脚本的格式是怎么回事，但它不应该是这样的）

```
$(document).ready(function() { 
var options = { 
    target:        '#output2',   // target element(s) to be updated with server response 
    beforeSubmit:  showRequest,  // pre-submit callback 
    success:       showResponse,  // post-submit callback 
    clearForm: true        // clear all form fields after successful submit     

}; 

$('#cmaForm').submit(function() { 
    $(this).ajaxSubmit(options); 
    return false; 
}); 
```

});

函数 showRequest(formData, jqForm, options) { var queryString = $.param(formData);

```
alert('About to submit: \n\n' + queryString); 
return true; 
```

}

函数 showResponse(responseText, statusText, xhr, $form) {

```
alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + 
    '\n\nThe output div should have already been updated with the responseText.'); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:25:06.613

您需要先验证然后提交。查看[文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)

例如

```
$('#cmaForm').validate({
    submitHandler: function(form) {
        var options = { 
            target: '#output2',  
            beforeSubmit: showRequest,  
            success: showResponse,  
            clearForm: true           
        };

        // Do the submit
        $(form).ajaxSubmit(options);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:01:46.557

好吧，我只是担心这会解决这个问题——这不是我想做的——但无论如何，这是我想出的“解决方案”，但正如我所说，现在验证第二个和第三个部分不起作用。我确信按钮调用很简单，但无论如何我都不是专家。这是我当前的代码：

```
$(document).ready(function(){
// add * to required field labels
$('label.form-field-label-required').append('&nbsp;<strong>*</strong>');

// accordion functions
var accordion = $("#accordion").accordion();
var current = 0; 

$.validator.addMethod("pageRequired", function(value, element) {
    var $element = $(element)
    function match(index) {
        return current == index && $(element).parents("#accordion").length;
    }
    if (match(0) || match(1) || match(2)) {
        return !this.optional(element);
    }
    return "dependency-mismatch";
}, $.validator.messages.required)

var v = $("#cmaForm, #cmaForm1, #cmaForm2").validate({
    errorClass: "warning",
    onkeyup: false,
    onblur: false,
    submitHandler: function() {
        var options = { 
        clearForm: true };          
        alert("Submitted, thanks!");
    } 
```

});

```
$(" .prevbutton").click(function(){
    accordion.accordion("activate", 0);
    current = 0;
}); 
$(" .prevbutton").click(function(){
    accordion.accordion("activate", 1);
    current = 1;
}); 
// these buttons all run the validation, overridden by specific targets above
$(".open2").click(function() {
  if (v.form()) {
    accordion.accordion("activate", 2);
    current = 2;
  }
});
$(".open1").click(function() {
  if (v.form()) {
    accordion.accordion("activate", 1);
    current = 1;
  }
});
$(".open0").click(function() {
  if (v.form()) {
    accordion.accordion("activate", 0);
    current = 0;
  }
}); 
```

});

# php - 阻止无效用户

> ID：12201216
> 
> 赞同：-2
> 
> 时间：2012-08-30T16:14:27.907
> 
> 标签：php, email, ip, email-validation

我正在开发一个基于 PHP 和 MySQL 的在线便士拍卖系统。问题是系统每次注册都会免费提供三个出价。

许多人使用无效的电子邮件帐户注册，例如 y95dka9k7y024qn5@mailcatch.com 或 yopmail.com 或其中任何一个。

如何自动阻止这些帐户？现在我手动操作，当我看到超过 3 个无效帐户时。

但是我怎么能自动做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:19:28.230

在订阅期间，当您检查电子邮件可用性时，还要检查电子邮件是否以下列主机名之一结尾：

*   mailcatch.com
*   yopmail.com
*   ...

如果是这种情况，只需说明这些主机名是被禁止的。

# facebook - 一种在全局或过滤后更改 facebook 帖子隐私的方法

> ID：12201217
> 
> 赞同：-5
> 
> 时间：2012-08-30T16:14:43.240
> 
> 标签：facebook, algorithm

我正在考虑一种方法来自动更改 facebook 上多个帖子的隐私。谁能告诉我一些事情？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:22:53.890

这不是使用任何 Facebook API 都可以做到的。

# three.js - 在 WebGL Globe (Google) 中选择条形图

> ID：12201222
> 
> 赞同：2
> 
> 时间：2012-08-30T16:14:55.907
> 
> 标签：three.js, webgl-globe

我们都知道[http://www.chromeexperiments.com/globe/](http://www.chromeexperiments.com/globe/) WebGL 实验，我真的对他们在那里做了什么很感兴趣。

他们在那里所做的是根据 GPS（JSON 格式）信息在地球上构建条形图。本身就很酷。

在等待three.js 库文档变得更加完整的同时，我想问一个问题。我将如何实现一种方法来调查哪个栏是 ie。点击？

提前致谢， 卡波

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:16:07.317

1.  如果它们还没有，你需要将它们放在一个组中..（网格）
2.  您需要使用 Projector 和 Ray 来确定单击的对象：

    [http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)

从这里开始它会很容易......你需要一种方法来以某种方式区分条......也许使用网格的“名称”属性......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:15:16.870

根据条形图的数量，我将在地球上使用射线并通过纬度和经度选择条形图，这要快得多。它也不依赖于用户点击小条的能力。

# java - 我应该如何在每个 Module 中定义 Pom.xml 以便 web 模块可以与其他两个 ejb 模块通信？

> ID：12201225
> 
> 赞同：0
> 
> 时间：2012-08-30T13:27:38.337
> 
> 标签：java, maven, build

马文，马文，马文。它必须非常好，并且通过一个小应用程序就很好。

现在我要构建一个ear 项目：用两个EJB 模块、一个web 模块和ear 模块来构建一个ear 文件。Web 模块依赖于其他 ejb 模块..

我应该如何在每个模块中定义 Pom.xml 以便 web 模块可以与 ear 中的其他两个 ejb 模块进行通信，并且 ear 模块构建正确的 ear 文件？

我之前做过的事情：

模块 1 --> 基本模块。所有其他模块都依赖于此模块。登录等基本功能。

```
<packaging>ejb</packaging> 
```

模块 1 --> 数据模块。所有实体都在这里类型 EJB

```
<dependency>
    <groupId>com.myCompnay</groupId>
    <artifactId>Modul_Basic</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <type>ejb</type>
</dependency 
```

模块 2 --> 业务模块。Businnes Facades 在这里。类型 EJB

```
<dependency>
    <groupId>com.myCompnay</groupId>
    <artifactId>Modul_Basic</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <type>ejb</type>
</dependency 
```

Web 模块 -> 类型为 WAR

```
<dependency>
        <groupId>com.myCompnay</groupId>
        <artifactId>Modul_Basic</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>ejb</type>
    </dependency 
```

EAR 模块 --> 在这个项目中，我尝试构建项目。

```
<packaging>ear</packaging>

    <dependencies>
            <dependency>
        <groupId>com.myCompnay</groupId>
        <artifactId>Modul_Basic</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>ejb</type>
    </dependency
            <dependency>
        <groupId>com.myCompnay</groupId>
        <artifactId>Modul_Business</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>ejb</type>
    </dependency
    <dependency>
        <groupId>com.myCompnay</groupId>
        <artifactId>Modul_WEB</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>war</type>
    </dependency

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>               
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:28:50.883

您应该有一个单独的 jar 模块，其中*仅*包含您的 ejb 接口和相关的接口对象（即您的 ejb API）。（顺便说一句，这个问题与 maven 无关，使用任何构建系统都会遇到同样的问题）。您当前的设置有 4 个模块（2 个 ejb、1 个战争、1 个耳朵）。相反，您应该有 5 个模块：

*   EJB API (jar)：只是 ejb 接口和这些接口中使用的可能数据对象
*   EJB A,B (ejb)：ejb 实现，依赖于 API jar
*   WEB（战争）：取决于 API jar，*而不是*ejb jar
*   EAR（耳朵）：取决于ejbs和war。

这是典型的客户端/服务器设置。您的服务器通常由一个“公共 API”模块和一个“实施”模块组成。“公共 API”将分发给任何客户端实现。

更新：

我可能误解了你的问题（我已经有一段时间没有做过 Java EE 的东西了）。我认为您可能只需要将您的战争模块中的“基本”依赖项标记为“已提供”范围，例如：

```
<dependency>
    <groupId>com.myCompnay</groupId>
    <artifactId>Modul_Basic</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <type>ejb</type>
    <scope>provided</scope>
</dependency> 
```

这将允许您针对类进行编译，但 ejb jar 不会包含在战争中。我*相信*ejb jar 可以从 war 类加载器中获得。

# javascript - JavaScript 窗口按比例调整大小

> ID：12201227
> 
> 赞同：2
> 
> 时间：2012-08-30T16:15:15.907
> 
> 标签：javascript, events, resize, popup, window

我打开一个窗口，`w=window.open('','', 'width=1000,height=700');`我希望这个窗口以 10/7 的比例调整大小。例如：500/350；100/70 ...

我已经有最大和最小尺寸：

```
 var w;
function openwindow()
{
    w=window.open('','', 'width=1000,height=700');
    w.focus();

    resize(w);
}

function resize(w_obj) {

        w_obj.onresize = function(event) {
            width = w_obj.innerWidth;
            height = w_obj.innerHeight;

            // if popup width is greather then 1000px
            if (width > 1000) {
                w_obj.resizeTo(1000,700);
            }

            // if popup height is greather then 700px
            if(height >700) {
                w_obj.resizeTo(1000,700);
            }

            if (width < 500) {
                w_obj.resizeTo(500,350);
            }

            if(height < 350) {
                w_obj.resizeTo(500,350);
            }

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:29:20.327

你应该使用`outerHeight`as 那就是`resizeTo`参数的意思。然而，一个问题是您无法知道用户是否调整了窗口的宽度或高度。因此，您不知道使用哪个维度作为参考以及计算哪个维度。

无论如何，您想要的是以下内容：

*   夹在其最小和最大尺寸之间`width`。`height`您可以为此使用`Math.min`/ 。`Math.max`
*   将高度设置为`width`乘以`7 / 10`比率。

请参阅[http://jsfiddle.net/bSE9C/1/](http://jsfiddle.net/bSE9C/1/)。

```
var width = w_obj.outerWidth;
var height = w_obj.outerHeight;

width = Math.min(width, 1000);  // may not exceed 1000 maximum
height = Math.min(height, 700);

width = Math.max(width, 500);   // may not exceed 500 minimum
height = Math.max(height, 350);

height = width * 7 / 10;

w_obj.resizeTo(width, height); 
```

# java - 无法在 Play 2 中使用多个 ebean 数据库

> ID：12201228
> 
> 赞同：13
> 
> 时间：2012-08-30T16:15:22.803
> 
> 标签：java, playframework, playframework-2.0, ebean

我们正在使用 Play Framework 2.0.3 设置一个稍微复杂的项目。

我们需要访问几个数据库（预先存在的），并希望使用框架内置设施（即 EBean）来完成它。

我们尝试在“models”包中创建所有模型类，然后将每个类及其 FQN 映射到 application.conf 中相应的 EBean 属性：

```
ebean.firstDB="models.ClassA,models.ClassB,models.ClassC"
ebean.secondDB="models.ClassD"
ebean.thirdDB="models.ClassE,models.ClassF" 
```

这似乎不起作用：

```
PersistenceException: Error with [models.SomeClass] It has not been enhanced but it's superClass [class play.db.ebean.Model] is? (You are not allowed to mix enhancement in a single inheritance hierarchy) marker[play.db.ebean.Model] className[models.SomeClass] 
```

我们查了又查，配置没问题！

然后，我们尝试为每个数据库模型类使用不同的 Java 包，并在 application.conf 中相应地映射它们：

```
ebean.firstDB = "packageA.*"
ebean.secondDB = "packageB.*"
ebean.thirdDB = "packageC.*" 
```

这在从数据库中读取信息时可以正常工作，但是当您尝试保存/更新对象时，我们会得到：

```
PersistenceException: The default EbeanServer has not been defined? This is normally set via the ebean.datasource.default property. Otherwise it should be registered programatically via registerServer() 
```

有任何想法吗？

谢谢！里卡多

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-01T08:41:40.053

您必须在查询中指定要访问的数据库。

例如，如果您想从您的 secondDB 检索所有用户：

```
// Get access to your secondDB
EbeanServer secondDB = Ebean.getServer("secondDB");

// Get all users in secondDB
List<User> userList = secondDB.find(User.class).findList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:34:48.690

使用`save()`、或时`delete()`，您必须指定 Ebean 服务器，例如[save()](http://www.playframework.org/documentation/api/2.0.3/java/play/db/ebean/Model.html#save%28java.lang.String%29)方法：`update()``refresh()`

```
classA.save("firstDB"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-28T16:49:13.840

我也遇到过同样的问题，浪费了一整天的时间去调查，终于搞定了。

1.定义命名的eabean服务器

```
db.default.driver=com.mysql.jdbc.Driver 
db.default.url="jdbc:mysql://localhost:3306/db1"
db.default.user=root
db.default.password=123456

db.aux.driver=com.mysql.jdbc.Driver
db.aux.url="jdbc:mysql://localhost:3306/db2"
db.aux.user=root
db.aux.password=123456 
```

现在您在运行时有两个 ebean 服务器 [default] 和 [aux]。

2.app conf文件ebean.default="models.*"

```
ebean.aux= "secondary.*" 
```

现在包models.*下的实体配置为[default]服务器，包secondary.*下的实体配置为[aux]服务器。我认为这可能与java类增强或其他东西有关。您不需要将实体分成不同的包，但是如果不同的ebean服务器的实体在同一个包下，可能会导致奇怪的麻烦和异常。

3.  使用您的模型时，保存/删除/更新相关方法应添加服务器名称作为参数

    学生 s = new Student(); s.save（“辅助”）；

4.  使用 finder 时，应将 finder 定义为

    public static Finder find = new Finder("aux",Long.class,Student.class);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T11:50:40.967

可能不是同一种情况，我在 Play 2.1.0 中跑到了这个*SomeClass 而不是增强的 PersistenceException*，唯一缺少的是我忘记`public`的模型类中的声明。`SomeClass`

在 Play 2.1.0 中，错误消息有点不同：

```
PersistenceException: java.lang.IllegalStateException: Class [class play.db.ebean.Model] is enhanced and [class models.Address] is not - (you can not mix!!) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-10T15:15:55.767

这解决了我保存到我的数据库表并解决错误的问题：

“javax.persistence.PersistenceException：尚未定义默认 EbeanServer？这通常通过 ebean.datasource.default 属性设置。否则应通过 registerServer() 以编程方式注册”

# java - 在Java中将iso8601字符串日期时间格式转换为日期

> ID：12201233
> 
> 赞同：2
> 
> 时间：2012-08-30T16:15:38.670
> 
> 标签：java, date, format

全部，

我知道我之前在使用 Java 将 ISO8601 日期字符串解析为 Date 时问过类似的问题，但这是使用 SimpleDateFormat 类的更具体的问题。

我已阅读文章[Wiki ISO8601 Date](http://en.wikipedia.org/wiki/ISO_8601)。

我从客户那里获得了一个 XML 文件，该文件的日期和时间采用以下格式：

**2012-08-24T12:15:00+02:00**

根据 Wiki 文章，这是有效的，这很公平。

给定以下代码来解析此字符串，会引发 ParseException，并显示消息“无法解析的日期：“2012-08-24T12:15:00+02:00””。

```
String inputDate = "2012-08-24T12:15:00+02:00";
String format = "yyyy-MM-dd'T'HH:mm:ssz";

SimpleDateFormat sdf = new SimpleDateFormat(format);
Date d = sdf.parse(inputDate); 
```

问题在于时区说明符中的冒号。时区中的 +02:00 会导致引发异常。+0200 工作正常。

问题是，是否可以使用 SimpleDateFormat 解析这种类型的字符串？

谢谢

安德斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:22:29.793

不，使用 SimpleDateFormat，解析这个日期是不可能的（至少在 jdk 6 或更低版本中是不可能的）。我们必须自己为此编写自己的适配器。

请注意，由于此格式是 XML Schema 的有效部分，您可以使用[DatatypeConverter.parseDateTime()](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseDateTime%28java.lang.String%29)方法来解析此日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T01:14:08.917

我找到的最佳答案是关于这个问题。

[将符合 ISO 8601 的字符串转换为 java.util.Date](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)

Quote: The easier solution is possibly to use the data type converter in JAXB, since JAXB must be able to parse ISO8601 date string according to the XML Schema specification. javax.xml.bind.DatatypeConverter.parseDateTime("2010-01-01T12:00:00Z") will give you a Calendar object and you can simply use getTime() on it, if you need a Date object.

# sql - 按名称删除唯一约束

> ID：12201234
> 
> 赞同：1
> 
> 时间：2012-08-30T16:15:43.413
> 
> 标签：sql, constraints, sqlanywhere

在 Sybase Central 中删除唯一约束时，显示的删除语句如下；

```
ALTER TABLE "DBA"."enr_rds_heating_control_validation_t" DROP CONSTRAINT "ASA826"; 
```

ASA826 此处删除的约束来自 SYS.SYSCONSTRAINT 视图，其中值来自约束名称列。

这里的问题是，这是 Sybase 分配给约束的唯一标识符，并且仅对当前数据库有效，因此当针对另一个数据库运行时，此约束可能 a) 不存在或 b) 完全是不同的约束。

但是，在创建约束时，我们将其命名，在这种情况下`enr_rds_heating_control_validation_t UNIQUE (enr_rds_heating_type_id,enr_rds_heating_control_id)`，可以在`SYS.SYSINDEX`视图中的 index_name 列中看到该值，并且该值在所有数据库中将保持唯一。

我试图删除通过 index_name 的约束来代替约束名称，并收到指示未找到约束的错误。

如何使用索引名称而不是约束名称删除唯一约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:21:31.220

我不认为您可以像索引一样删除约束，即使 Sybase 在物理上使用索引并且您在表上看到它作为 sp_help 报告的索引。

DROP INDEX 仅适用于使用 CREATE INDEX 创建的索引。用于你得到的约束：

不能将 DROP 与“abe.c”一起使用，因为“c”是一个约束。使用更改表。

听起来您想将 Sybase Central 创建的约束作为 SQL，然后批量使用 sql，但不是在 Sql 相关的数据库上 - 答案不是您不能这样做吗？

只要您使使用此 Sql Central 输出的脚本“使用”正确的数据库，就可以了。

我无法准确理解您在做什么，但您似乎必须坚持使用 SQL Central 生成的内容。

或者后处理 Sql Central Sql 并在所有约束名称后加上 db_id()？这是一个疯狂的猜测

# asp.net-mvc-3 - DbMigrator 类和 Entity Framework 5.0 更新的问题

> ID：12201235
> 
> 赞同：1
> 
> 时间：2012-08-30T16:15:47.517
> 
> 标签：asp.net-mvc-3, entity-framework, migration, entity-framework-5

嗨，我正在使用 MVC3 应用程序并使用 Code First 迁移来管理我的数据库。昨天我刚刚将我的 EF 库更新到 5.0 版本。我曾经在我的 Global.asax 文件中运行，特别是在 Application_Start() 方法中，所以当应用程序启动时，update-database 命令将运行。是这样的：

```
var configuration = new Configuration();
var migrator = new DbMigrator(configuration);
migrator.Update(); 
```

但是自从更新以来，我在 Migrator.Update() 行中不断收到此异常。

![在此处输入图像描述](../Images/a876ca9eb94eff8f4ee0ef2b592373d9.png)

我没有任何具有该名称的列。我可以理解这个错误。我检查了 Entity Framework 5.0 的详细信息，但没有得到任何线索。顺便说一句，如果我使用 power-shell 命令提示符运行更新数据库，我没有收到任何错误，我的数据库会正确更新。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:10:19.300

看起来您的站点没有使用 EF 5，因为`CreatedOn`列是`__MigrationHistory`4.3.1 中表（在系统表中）的一部分，但在 EF 5 中被删除。

# c++ - C++如何通过回调方法访问成员变量

> ID：12201240
> 
> 赞同：3
> 
> 时间：2012-08-30T16:16:08.563
> 
> 标签：c++, sqlite, callback, static-methods, friend

我正在使用`sqlite3_exec`带有静态回调函数的 SQLite 函数来处理一些信息。我想将结果信息打印到一个名为`sqlite3_exec`. 我说的有点像这样

```
class MakingTheCall{

static int CallBack(void *NotUsed, int argc, char **argv, char **azColName)
{
    for(int x = 0; x < argc; x++)
        File << argv[x];
    File<<"\n";
} 

private:
   static ofstream File;
   void call(){
       sqlite3_exec(database, query, callback, 0, &zErrMsg);
   }
}; 
```

我**真正**想要的是静态函数使用特定于实例的`FILE`. 因此，无论哪个实例`MakingTheCall`进行调用都会传递它唯一的非静态`FILE`对象。

但是因为`CallBack`是静态的并且必须（我认为）是一个回调，所以它无法访问`this`类的指针。所以我的想法是如果函数所在的`friend`函数那么它可以到达`this`指针。这是假设我正确理解[这篇](https://stackoverflow.com/a/2315264/839501)文章。

我觉得我的思路有问题。感觉对于`this`该函数将使用哪个功能可能仍然存在歧义。

作为本次讨论的第 2 部分，是否有任何地方可以使用静态朋友方法的示例？从我在第一条评论中阅读的内容来看，它们并不是互斥的修饰符，[所以](https://stackoverflow.com/q/2315166/839501)你什么时候会同时使用它们？

我是 SQLite 和 CallBacks 的新手，所以我可能会在这里遗漏一些可以让我的生活变得轻松的东西。像`void*`指针我该如何使用它？感觉就像是我想做的事情的关键。

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:19:59.043

在`sqlite3_exec()`调用中传递对象指针：

```
sqlite3_exec(database, query, callback, (void*) this, &zErrMsg); 
```

`NotUsed`你会在回调的参数中取回它：

```
static int CallBack(void *NotUsed, int argc, char **argv, char **azColName)
{
    MakingTheCall* obj = (MakingTheCall*) NotUsed;

    // whatever....
} 
```

严格来说，`Callback()`函数应该是`extern "C"`自由函数，而不是静态成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T16:51:23.077

如果您使用`C++11`-support 进行编译，则可以使用匿名函数（lambda 表达式）。例子：

```
class MakingTheCall
{
private:
   ofstream File;
   void call(){
       sqlite3_exec(database, query,
           [&] (void *NotUsed, int argc, char **argv, char **azColName) -> int
           {
               for(int x = 0; x < argc; x++)
               File << argv[x];
               File<<"\n";
           },
           0, &zErrMsg);
   }
}; 
```

`[&]`意味着，所有可用的变量`call`都通过引用捕获，包括`this`-pointer。有关详细信息，请参见[此处（维基百科）](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:24:44.760

通常，这是通过在注册回调时将指向对象的指针作为*闭包*参数的一部分传递来实现的。API的情况`sqlite3_exec`如下：

```
int sqlite3_exec(
  sqlite3*,                                  /* An open database */
  const char *sql,                           /* SQL to be evaluated */
  int (*callback)(void*,int,char**,char**),  /* Callback function */
  void *,                                    /* 1st argument to callback */
  char **errmsg                              /* Error msg written here */
); 
```

所以我会将指向对象的指针作为参数 4 传递。你的回调函数仍然是静态的，但它应该做的第一件事是将第一个参数转换为指向你感兴趣的对象类的指针。你可以然后调用所需的函数，该函数将允许您写入`File`特定于您已传递的实例的函数。所以你的代码可能看起来像这样：

```
static int CallBack(void *closure, int argc, char **argv, char **azColName)
{
    MakingTheCall* obj = static_cast<MakingTheCall*>(closure);
    obj->WriteToTheFile(argc, argv);
    return 0; // Have to return something.
}

int WriteToTheFile(int argc, char **argv)
{
    for(int x = 0; x < argc; x++)
        File << argv[x];
    File<<"\n";
} 
```

# css-selectors - 奇怪的问题 - cssSelector 无法使用 css 结构找到对象

> ID：12201241
> 
> 赞同：0
> 
> 时间：2012-08-30T16:16:31.960
> 
> 标签：css-selectors, selenium-webdriver

`cssSelector`使用webdriver定位元素时，我遇到了一个奇怪的问题。

在我在 Windows 上设置的新环境中，当使用 CSS 的结构完成识别时，cssSelector 无法找到对象——例如`findElement(By.cssSelector(elementId > div(1) > span(1)))`.

如果仅通过 id 完成识别，则可以正常工作 - `findElement(By.cssSelector(elementId))`。

我们`WebDriverWait`到处都在使用，所以这不是时间问题。事实上，它甚至没有等待指定的时间间隔。它在几毫秒内退出，错误类似于底部给出的堆栈跟踪。

相同的代码在所有新的 Linux 环境和我的旧 Windows 环境上运行良好。我到处都遵循相同的环境设置步骤。

1.  获取 Eclipse Java EE Helios SR2
2.  从“帮助 > 安装新软件”选项安装 Maven – [http://m2eclipse.sonatype.org/sites/m2e](http://m2eclipse.sonatype.org/sites/m2e)
3.  从“帮助 > 安装新软件”选项设置 TestNG – [http://beust.com/eclipse](http://beust.com/eclipse)
4.  在 eclipse.ini 中设置 -vm 参数
5.  将我的项目导入到 eclipse 中——因此，相同的 maven 版本、TestNG 版本等在任何地方都被指定。

知道为什么在我现在设置的所有 Windows 环境中都会发生这种情况吗？

堆栈跟踪示例

> org.openqa.selenium.WebDriverException: Unable to find element with css selector == #GraphicalPane > div:nth-of-type(1) > div:nth-of-type(1) > img （警告：服务器没有提供任何堆栈跟踪信息）命令持续时间或超时：344 毫秒构建信息：版本：'2.19.0'，修订：'15848'，时间：'2012-02-08 16:25:03' 系统信息：os.name： 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_25' 驱动程序信息: driver.version: RemoteWebDriver at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 在 java.org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:170) 在 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java: 123) 在 org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:226) 在 org.openqa.selenium.remote.RemoteWebDriver 的 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:439) .findElementByCssSelector(RemoteWebDriver.java:291) 在 org.openqa.selenium.By$ByCssSelector.findElement(By.java:406) 在 org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:218) 在我的。 domain.product.webconsole.Hardware$10.apply(Hardware.java:589) 在 my.domain.product.webconsole.Hardware$10.apply(Hardware.java:1) 在 org.openqa.selenium.support。ui.FluentWait.until(FluentWait.java:201) 在 my.domain.product.webconsole.Hardware.findobject1(Hardware.java:587) 在 my.domain.product.testsuite.testcase1(HardwareApplianceRack.java:48) 在 sun .reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke (Method.java:597) 在 org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80) 在 org.testng.internal.Invoker.invokeMethod(Invoker.java:714) 在 org.testng.internal.Invoker。在 org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231) 在 org.testng.internal.TestMethodWorker 的 invokeTestMethod(Invoker.java:901)。invokeTestMethods(TestMethodWorker.java:127) at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111) at org.testng.TestRunner.privateRun(TestRunner.java:767) at org.testng.TestRunner.run(TestRunner .java:617) 在 org.testng.SuiteRunner.runTest(SuiteRunner.java:334) 在 org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329) 在 org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)在 org.testng.SuiteRunner.run(SuiteRunner.java:240) 在 org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52) 在 org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86) 在 org.testng。 TestNG.runSuitesSequentially(TestNG.java:1197) at org.testng.TestNG.runSuitesLocally(TestNG.java:1122) at org.testng.TestNG.run(TestNG.java:1030) at org.testng.remote.RemoteTestNG.run （远程测试NG.java：111) 在 org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204) 在 org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:56:08.157

代替

```
(elementId > div(1) > span(1)) 
```

尝试使用

```
elementId>div:first-child>span:first-child 
```

您是否检查过例如在火路中您的元素是否已正确定位？

# asp.net - CS0103：当前上下文中不存在名称“GetSelectedIndex”

> ID：12201244
> 
> 赞同：2
> 
> 时间：2012-08-30T16:16:49.590
> 
> 标签：asp.net, gridview, objectdatasource, html-select, edititemtemplate

`SelectedIndex`在将对象的属性绑定`<asp:DropDownList>`到自定义类（位于我的`app_code`文件夹中）中的方法时，我遇到了一个问题。

`ObjectDataSource`一个和一个对象的文本`GridView`- 使用相同`ObjectDataSource`的数据源 - 可以在下面看到。似乎`GetSelectedIndex`我在自定义类中获得的方法（进一步显示） - 并试图绑定到`SelectIndex`我的`GridView`对象的属性 - 无法找到：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="CarCrash.aspx.cs" Inherits="CarCrash" %>
....
<asp:ObjectDataSource ID="DataBindingODS" runat="server" DataObjectTypeName="EmployeeDetails" 
    TypeName="EmployeeFunctionsClass"
    SelectMethod="GetEmployees" 
    InsertMethod="InsertEmployeeAlternative" 
    UpdateMethod="UpdateEmployeeAlternative"
    EnablePaging="True"
    SelectCountMethod="CountEmployeesAlternative"
    MaximumRowsParameterName="maxRows" 
    OldValuesParameterFormatString="original_{0}"/>
    <asp:GridView ID="GridView1" runat="server" CssClass="style1" PageSize="5"
        DataSourceID="DataBindingODS" AutoGenerateColumns="False">
        <Columns>
        <asp:TemplateField HeaderText="Employee Details">            
            <EditItemTemplate>
                <b>
                    <%# Eval("EmployeeID") %>
                    <asp:DropDownList ID="EditTitle" runat="server" SelectedIndex='<%# GetSelectedTitle(DataBinder.Eval("TitleOfCourtesy")) %>' DataSource='<%# "TitlesOfCourtesy" %>' />
                    <%# Eval("FirstName") %>
                    <%# Eval("LastName") %>
                </b>
                <hr />
                <small><i>
                <%# Eval("Address") %><br />
                <%# Eval("City") %>, <%# Eval("Country") %>,
                <%# Eval("PostalCode") %><br />
                <%# Eval("HomePhone") %>
                </i>
                <br /><br />
                <asp:TextBox Text='<%# Bind("Notes") %>' runat="server" ID="textBox"   TextMode="MultiLine" Width="413px" />
                </small>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Background">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

我尝试绑定的自定义类包含以下内容：

```
public class EmployeeFunctionsClass
{

public string connStr { get; set; }

public EmployeeFunctionsClass()
{
    connStr = WebConfigurationManager.ConnectionStrings["EmployeeConnection"].ConnectionString;
}

public int employeeID { get; set; }
public string firstName { get; set; }
public string lastName { get; set; }
public string titleOfCourtesy { get; set; }

......
public List<EmployeeDetails> GetEmployeesAlternative()
{
    string strGetEmp = "SELECT EmployeeID, FirstName, LastName, TitleOfCourtesy, BirthDate, City from Employees";

    SqlConnection conn = new SqlConnection(connStr);
    SqlCommand cmd = new SqlCommand(strGetEmp, conn);
    cmd.CommandType = CommandType.Text;

    List<EmployeeDetails> employees = new List<EmployeeDetails>();

    try
    {
        conn.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            string city;
            DateTime birthDate;

            if (reader["City"] is System.DBNull)
            { city = ""; }
            else
            { city = (string)reader["City"]; }
            if (reader["BirthDate"] != System.DBNull.Value)
            { birthDate = (DateTime)reader["BirthDate"]; }
            else
            { birthDate = DateTime.MinValue; }

            EmployeeDetails emp = new EmployeeDetails(
            (int)reader["EmployeeID"],
            (string)reader["FirstName"],
            (string)reader["LastName"],
            (string)reader["TitleOfCourtesy"], birthDate,
            city, "", "", "", ""

            );

            employees.Add(emp);

        }
        reader.Close();

        employees.Sort(new Comparison<EmployeeDetails>((x, y) => String.Compare(x.LastName, y.LastName)));

        return employees;

    }

    catch (SqlException err)
    {
        throw new ApplicationException("Data error.");
    }
    finally
    {
        conn.Close();
    }
}

public static string[] TitlesOfCourtesy   //********** This is bound to DataSource property of DropDownList
{
    get { return new string[] { "Mr.", "Mrs.", "Dr.", "Ms.", "Mrs." }; }
}

public static int GetSelectedTitle(object title)  //****** This is bound to SelectedIndex property of DropDownList - and is giving the error at the head of this post.
{
    return Array.IndexOf(TitlesOfCourtesy, title.ToString());
}

....
} 
```

这里使用的类对象是 EmployeeDetails 类，定义如下：

```
[Serializable]
public class EmployeeDetails
{

    public int EmployeeID{get;set;}

    public string FirstName{get;set;} 

    public string LastName{get;set;}

    public string TitleOfCourtesy{get;set;}

    public string City { get; set; }

    public DateTime? BirthDate { get; set; }

    public string Notes { get; set; }

    public string Address { get; set; }

    public string HomePhone { get; set; }

    public string PostalCode { get; set; }

    public EmployeeDetails(int employeeID, string firstName, string lastName, string titleOfCourtesy, DateTime? birthDate, string city = "", string notes = "Blank")
    {
        EmployeeID = employeeID;
        FirstName = firstName;
        LastName = lastName;
        TitleOfCourtesy = titleOfCourtesy;
        City = city;
        BirthDate = birthDate;
        Notes = notes;
    }

    public EmployeeDetails(int employeeID, string firstName, string lastName, string titleOfCourtesy, DateTime? birthDate, string city = "", string notes = "Blank", string homePhone = "", string postalCode = "", string address = "")
    {
        EmployeeID = employeeID;
        FirstName = firstName;
        LastName = lastName;
        TitleOfCourtesy = titleOfCourtesy;
        City = city;
        BirthDate = birthDate;
        Notes = notes;
        HomePhone = homePhone;
        Address = address;
        PostalCode = postalCode;
    }
    public EmployeeDetails() { }
} 
```

恐怕我真的被这件事难住了。我搜索了许多不同的帮助论坛，但还没有真正遇到任何描述/诊断我的确切问题的东西。

如果有人能够提出一种补救/解决方案/启蒙之路，我将不胜感激。

如果这是基本的，请提前道歉 - 但是，在我的辩护中，我对 ASP.NET 的复杂性相当陌生。

问候，

戈登·诺里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:51:05.843

如果`GetSelectedTitle`是除页面本身 ( ) 之外的任何类中的方法，则在`CarCrash`引用它时需要指定类名。试试`EmployeeFunctions.GetSelectedTitle()`。

# facebook - facebook opengraph 爬虫没有给我发送 fb_locale

> ID：12201245
> 
> 赞同：7
> 
> 时间：2012-08-30T16:16:52.290
> 
> 标签：facebook, internationalization, facebook-opengraph

我有一个支持多种语言环境的 opengraph 对象（在此示例中，默认为 en_US 和 fr_FR）。

这是 facebook opengraph 使用的生成的 html 页面的示例，但是当我自己调用它时。

```
Default:
  <meta property="og:locale" content="en_US"/>
  <meta property="og:locale:alternate" content="en_US" />
  <meta property="og:locale:alternate" content="fr_FR" />
  <meta property="og:title" content="chair" />

?fb_locale=en_US
  <meta property="og:locale" content="en_US"/>
  <meta property="og:locale:alternate" content="en_US" />
  <meta property="og:locale:alternate" content="fr_FR" />
  <meta property="og:title" content="chair" />

?fb_locale=fr_FR
  <meta property="og:locale" content="fr_FR"/>
  <meta property="og:locale:alternate" content="en_US" />
  <meta property="og:locale:alternate" content="fr_FR" />
  <meta property="og:title" content="chaise" /> 
```

Facebook 爬虫既不会向我发送 fb_locale 也不会向我发送 X-Facebook-Locale。

**解决方案：** [刷新facebook的缓存](https://stackoverflow.com/a/13821478/684657)

```
curl -X POST -F "id=http://yoururl" -F "scrape=true" -F "locale=fr_fr" "https://graph.facebook.com" -s 
```

（在我的示例中，我使用了 fr_fr）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T08:37:07.030

我编辑了问题，答案在问题中。

# sql - SQL/LINQ 全选，按 2 列分组

> ID：12201247
> 
> 赞同：0
> 
> 时间：2012-08-30T16:17:05.177
> 
> 标签：sql, asp.net-mvc-3, linq, sql-server-2008, entity-framework

我试图为我的问题找到答案，但我找不到。我有带有 ID、WorkerID、Function(int) 和 DateTime 的表。每个工人每天都有多条记录。对于所有工人，我每天只需要获得第一条记录。这个查询给出了我想要的结果：

```
SELECT WorkerID, MIN(DateTime) AS DateTime
FROM Records
GROUP BY WorkerID, LEFT(DateTime, 10)   
ORDER BY WorkerID 
```

但我想选择所有列（ID、WorkerID、Function 和 DateTime）。我怎样才能做到这一点？另外，我需要此查询用于 ASP.NET MVC3 应用程序，因此如果有人可以在 LINQ 中为我编写此查询，并解释如何将该查询转换为 IEnumerable(Record) 或 IQuerible(Record)，我将非常感激。先谢谢各位了，希望你们能救救我。

编辑：您的 LINQ 查询有效，但由于使用了很多视图，而不是表，我在性能方面遇到了很多问题。现在我切换到 Table，我想直接在 Table 上进行查询。结构是一样的，只是没有WorkerID，我有ETAG，是一样的。但我现在有问题。上面提到的 SQL 查询在表上给了我大约 50k 的结果，这是正确的，但现在你的 LINQ 查询给我只有 9k，所以出了点问题。这是查询：

```
from d in Records
group d by new { d.ETAG, Date = d.DateTime.Value.Year + d.DateTime.Value.Month +            d.DateTime.Value.Day } into g
orderby g.Key.ETAG
select g.OrderBy(e => e.DateTime).FirstOrDefault() 
```

拜托，你能帮我解决这个问题吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:24:44.707

```
from r in Records
group r by new { WorkerId = r.WorkerId, Date = r.DateTime.Value.Date } into g
orderby g.Key.WorkerId
select g.OrderBy(e => e.DateTime).First() 
```

*更新*：添加`orderby`子句，`g.OrderBy()`用于强制选择每天的第一条记录，而不是组中的任意元素。

# c# - 使用嵌套 xml 数据文件的数据驱动测试

> ID：12201248
> 
> 赞同：1
> 
> 时间：2012-08-30T16:17:09.377
> 
> 标签：c#, .net, xml, mstest, data-driven-tests

我需要编写一个由包含数据集合的数据文件驱动的单元测试。出于显而易见的原因，csv 文件不合适，但 XML 建议自己。但是我似乎无法让它工作。

这是数据文件的片段（仅显示一个测试记录）：

```
<?xml version="1.0" encoding="utf-8" ?>
<testData>
  <testRecord>
    <displayColumnNames>
      <name>Include</name>
      <name>SampleInt1</name>
      <name>SampleInt2</name>
      <name>SampleInt3</name>
      <name>SampleInt4</name>
      <name>SampleInt5</name>
    </displayColumnNames>
    <valueColIDs>
      <valueColID>1</valueColID>
      <valueColID>3</valueColID>
      <valueColID>5</valueColID>
    </valueColIDs>
    <calculations>
      <calculation colID ="2"><![CDATA[500 * [:5]]></calculation>
      <calculation colID ="5"><![CDATA[500 * [:2]]></calculation>
    </calculations>
    <expected>
      <item>5</item>
    </expected>
  </testRecord>
</testData> 
```

基本上，我希望能够从每个测试记录（例如“displayColumnNames”）中读取多个数据集合并迭代我的测试中的值。每个此类集合中的元素数量将因测试用例而异。

然而，直接的绊脚石是我的代码行：

```
var displayColumnNames = TestContext.DataRow["displayColumnNames"]; 
```

这会引发测试时错误“列'displayColumnNames'不属于表testRecord。”。

我可以让它与简单的“平面”xml 数据文件一起很好地工作，但这对我没有帮助。我是在尝试 VS2008（即 MSTest）无法处理的事情，还是在做一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:03:21.417

您可以使用

```
TestContext.DataRow.GetChildRows("testRecord_displayColumnNames") 
```

访问嵌套节点。可以修改关系名称“testRecord_displayColumnNames”以更深入地了解 xml 层次结构。高温高压

# php - 获取中午 PHP 的时间戳

> ID：12201253
> 
> 赞同：4
> 
> 时间：2012-08-30T16:17:32.243
> 
> 标签：php

假设我有一个时间戳，X。

使用 PHP，我怎样才能找到代表 X 来自当天中午的时间戳？

我想我需要将 X 转换为日期，提取日期，然后将中午从那天转换为时间戳。有没有一种简单的方法可以在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T16:19:18.653

`strtotime('noon', $timestamp)`应该管用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:23:45.823

```
<?php
$timestamp = 1346343553;
$date = getdate($timestamp);

$noon = mktime ( 12, 00, 00, $date['mon'], $date['day'], $date['year'] );

print $noon;
print date(DATE_RSS, $noon); 
```

当然，这是不言而喻的，但根本不考虑时区。也，`strtotime()`可能是首选的方法，但`getdate()`没有得到足够的爱！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:20:06.267

`strtotime`支持许多这样的字符串，检查文档.. [strtotime](http://php.net/manual/en/function.strtotime.php)

```
strtotime('noon', $timestamp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:21:00.277

作为一个字符串：

```
echo date('Y-m-d 12:00:00', $time); 
```

# c - 关于 SNMP 中代理的 MIB 处理

> ID：12201255
> 
> 赞同：0
> 
> 时间：2012-08-30T16:17:38.003
> 
> 标签：c, object, snmp, agent, mib

我正在用 SNMP 开发代理，我有一个与 MIB 文件相关的问题：代理如何从 MIB 获取/设置对象的值（我认为“MIB”仅指没有值的对象的定义）？如何管理 MIB 文件中对象的设备句柄值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:45:19.647

为了编写 SNMP 代理，您必须遵循一些步骤。

> 1.  列表项 首先定义您的 MIB。在 MIB 中公开不同对象的创建/设置/获取操作。这些对象在树中分组。
>     
>     
> 2.  编写解析 MIB 并从中获取数据模型的 Parser 模块。
>     
>     
> 3.  编写传输模块、消息处理器模块和消息调度程序模块。
>     
>     
> 4.  在通过传输（通过网络）定义数据时，请遵守标准 SNMP PDU 格式。
>     
>     
> 5.  从传输接收到消息后，代理端的消息处理模块必须检查一些事情，例如身份验证和授权（在 SNMP v3 的情况下），检查 OID 的可用性（检查它是否在MIB 与否）和其他检查（如果有）。
>     
>     
> 
> 如果一切成功，则创建响应 PDU 并将相同的请求 ID 发送回发起请求的管理器。

查看[net-snmp](http://www.net-snmp.org/)和[snmp4j](http://www.snmp4j.org/)以了解有关开发的更多想法，因为您不必从头开始编写所有内容并使用这些免费提供的库。

# sql-server - SSRS - 报告网站错误处理数据集

> ID：12201260
> 
> 赞同：0
> 
> 时间：2012-08-30T16:17:49.277
> 
> 标签：sql-server, tsql, reporting-services, business-intelligence

将基于 T-SQL 查询的数据集添加到报表并进行部署后，由于以下错误，报表停止工作。

> 报告处理过程中发生错误。(rsProcessingAborted) 数据集“NewDataset”的查询执行失败。(rsErrorExecutingCommand) 有关此错误的详细信息，请导航到本地服务器计算机上的报告服务器，或启用远程错误

数据源：Cube + SQL DB 数据集：Cube + SQL DB

报表上的表格：从 Cube DB 填充的大多数列。增加了一列连接的 T-SQL DB。

在添加 T-SQL 数据集之前，报告在网站上完美显示。SSRS 预览报告完美。

该报表使用连接到 SQL 共享数据源的共享数据集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:26:11.240

通常，由于安全问题，数据集查询在部署时会失败。确保运行 SSRS 报告的帐户对数据集查询中使用的所有 db 对象具有适当的安全性。

在报表管理器中查找数据源。单击位于数据源右侧的向下箭头，然后选择“管理”。在属性中，您可以确定用于连接 SQL 的帐户。

在 SQL 数据库上，确保用于数据源的帐户具有访问查询中使用的数据库对象（可能是查询中引用的表或存储过程，具体取决于数据集的来源）所需的安全权限是）。

尝试使用数据源正在使用的同一帐户连接到 SSMS，然后运行相同的查询。您在此过程中遇到的错误将有助于确定需要安全权限的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T23:04:33.720

在我的情况下，有相同的错误消息，问题的根源不是来自安全角度，而是来自与报告相关的数据库视图。我是这样发现的：

1.  从报表生成器运行相同的报表：在报表管理器中，单击产生错误的报表。您可能需要根据您的报告提供其他参数，然后单击查看报告
2.  您现在应该看到相同的错误消息。消息内容与第一句相同；但它的第二句话将更详细地显示错误的原因。就我而言，我有一个查询表中不存在的列（因为我删除了）的视图。当我更新视图时，它会再次与报告一起使用。

# objective-c - 在搜索模式下从 UITableView 中删除标题

> ID：12201263
> 
> 赞同：0
> 
> 时间：2012-08-30T16:17:57.060
> 
> 标签：objective-c, uitableview, ios5

刚刚注意到我的 UITableView 在搜索模式下出现了一些不受欢迎的行为。这是对该问题的直观描述，底部是我怀疑的方法实现。

**（第 1 步）完整列表 - 好的！**

![在此处输入图像描述](../Images/6a109380f712fdda760a14718a9ad945.png)

* * *

**（第 2 步）搜索结果 - 好的！**

![在此处输入图像描述](../Images/2936acfa9c834ca67d9c3d46d0460edd.png)

* * *

**（第 3 步）深入搜索结果 - 好的！**

![在此处输入图像描述](../Images/17c2584d4556854c42bb8a31b5bb7a6a.png)

* * *

**（第 4 步）导航回搜索结果 - 不行！正在返回所有 Header 索引...**

![在此处输入图像描述](../Images/080f626e0077b96691c62d86a357545f.png)

* * *

这是我返回所有索引的方法实现：

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSArray *sKeysArray = [[listContent allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

    sorted = [sKeysArray sortedArrayUsingComparator:self.mySortBlock];

    if (tableView == self.searchDisplayController.searchResultsTableView){

        return @"";

   } else {

    return [sorted objectAtIndex:section];
  }

} 
```

解决此问题的最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:28:51.403

如果在or`[self.tableView reloadData]`内调用，我观察到了这种行为。`viewWillAppear:``viewDidAppear:`

`reloadData`即使搜索处于活动状态并且只有`searchResultsTableView`应该可见，这似乎也会导致基础表视图的所有部分标题出现。

一个解决方案可能是`reloadData`仅在`[self.searchDisplayController isActive] == NO`.

# node.js - NodeJS：如果我在请求结束时将 mysql 数据返回给客户端，这是否意味着回调没有意义？

> ID：12201274
> 
> 赞同：1
> 
> 时间：2012-08-30T16:18:56.357
> 
> 标签：node.js

我是节点新手。
我需要查询 Mysql 并将该数据同步返回给客户端。
如果我这样做是否意味着即使我使用 evented Mysql lib 我也会阻止 Reactor？我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:38:32.217

我认为那个假的例子会回答你的问题：

```
var http = require('http');
var db = require('db');

http.createServer(function (req, res) {

    db.query('fake query', function(data){
        res.send(data);
    }

}).listen(1337, '127.0.0.1'); 
```

即使您不同步发送响应，也没关系，这就是节点的工作方式。起初我也为这个概念而苦苦挣扎。

# java - JButton GUI 程序，其中按钮根据循环迭代而变化

> ID：12201275
> 
> 赞同：0
> 
> 时间：2012-08-30T16:18:57.497
> 
> 标签：java

我正在尝试创建一个 gui 程序，其中 JButtons 在一个循环中，并且它们随着每次迭代而改变。我在实现这一点时遇到了困难，我不明白为什么，它似乎不应该是一个问题，但无论我尝试什么，我的“q”变量永远不会增加......

在某些情况下，我能够摆脱所有错误，但我的 do-while 循环永远不会执行。在下面的示例中，我收到以下错误：“无法在以不同方法定义的内部类中引用非最终变量 q”。

我已经尝试解决这个问题已经有一段时间了，我很感激任何建议。

提前致谢。

这是我的代码（注意我的 q 变量）：

```
public class MyClass extends JFrame{
        private JTextField item1;
        private JTextField item2;
        private JTextField item3;
        private JTextField item4;
        private JTextField item5;
        private JButton button1 = new JButton("Process Item #1");
        private JButton button2 = new JButton("Confirm Item #1");
        private JButton button3 = new JButton("View Order");
        private JButton button4 = new JButton("Finish Order");
        private JButton button5 = new JButton("New Order");
        private JButton button6 = new JButton("Exit");
        private Scanner x;
        private int exitFlag = 0;
        public String[] idArray = new String[10];
        public String[] recordArray = new String[10];
        public String[] priceArray = new String[10];

        public void openFile(){
            try{
                x = new Scanner(new File("inventory.txt"));
                x.useDelimiter(",|" + System.getProperty("line.separator")); 
            }
            catch(Exception e){
                System.out.println("Could not find file");
            }
        }
        public void readFile(){
            int i=0;
            while(x.hasNext()){
                idArray[i] = x.next();
                recordArray[i] = x.next();
                priceArray[i] = x.next();
                i++;
            }
        }
        public MyClass(){
            super("Matt's World of Music");
            setLayout(new FlowLayout());
            Box itemBox = Box.createVerticalBox();
            Box itemBox2 = Box.createHorizontalBox(); 

            JLabel label1 = new JLabel("Enter number of items in this order:");
            JLabel label2 = new JLabel("Enter CD ID for Item #1:");
            JLabel label3 = new JLabel("Enter quantity for Item #1:");
            JLabel label4 = new JLabel("Item #1 info:");
            JLabel label5 = new JLabel("Order subtotal for 0 item(s):");

            item1 = new JTextField(10);
            item2 = new JTextField(10);
            item3 = new JTextField(10);
            item4 = new JTextField(10);
            item5 = new JTextField(10);

            itemBox.add(label1);
            itemBox.add(item1);
            itemBox.add(label2);
            itemBox.add(item2);
            itemBox.add(label3);
            itemBox.add(item3);
            itemBox.add(label4);
            itemBox.add(item4);
            itemBox.add(label5);
            itemBox.add(item5);
            itemBox2.add(button1);
            itemBox2.add(button2);
            itemBox2.add(button3);
            itemBox2.add(button4);
            itemBox2.add(button5);
            itemBox2.add(button6);
            itemBox.add(itemBox2);
            add(itemBox);
            button2.setEnabled(false);
            button3.setEnabled(false);
            button4.setEnabled(false);
            item4.setEditable(false);
            item5.setEditable(false);

            //*** NOTE Q VARIABLE ****//
            int q=0;

            do{
                //Process Item

                button1.addActionListener(new ActionListener(){
                   public void actionPerformed(ActionEvent e){
                      String y = item1.getText();
                      MyClass obj = new MyClass();
                      button1.setEnabled(false);
                      button2.setEnabled(true);

                      obj.openFile();
                      obj.readFile();

                      //start loop
                      for(int i=0; i < obj.idArray.length; i++){
                          if(item2.getText().equals(obj.idArray[i])==true){
                              //set item4 text field to price id and other details
                              item4.setText(obj.idArray[i] + " " + obj.recordArray[i] + " $" + obj.priceArray[i].replaceAll("\\s",""));

                              //add to cart

                          }
                       }
                      //*** NOTE Q VARIABLE ****//
                      q++;

                    }
                });
                //Confirm Item
                button2.addActionListener(new ActionListener(){
                    public void actionPerformed(ActionEvent e){
                        //Execute when button is pressed
                        JOptionPane.showMessageDialog(null, "Item #1 Accepted");
                    }
                });
                //View Order
                button3.addActionListener(new ActionListener(){
                    public void actionPerformed(ActionEvent e){
                        //Execute when button is pressed
                        System.out.println("View Order");
                    }
                });
                //Finish Order
                button4.addActionListener(new ActionListener(){
                    public void actionPerformed(ActionEvent e){
                        //Execute when button is pressed
                        System.out.println("Finish Order");
                    }
                });
                //New Order
                button5.addActionListener(new ActionListener(){
                   public void actionPerformed(ActionEvent e){
                       //Execute when button is pressed
                       System.out.println("New Order");
                   }
                });
                //Quit
                button6.addActionListener(new ActionListener(){
                   public void actionPerformed(ActionEvent e){

                       //exit program

                   }
                });
            }while(q < Integer.parseInt(item1.getText()));
        }      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:41:29.030

考虑创建一个字段来保存您希望按钮反映的任何状态的值，在按钮按下时更改此字段，然后使用此字段更改按钮的文本。例如：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class ChangeButton extends JPanel {
   private int buttonCount = 1;
   private JButton button = new JButton();

   public ChangeButton() {
      add(button);
      button.setText(makeButtonText());

      button.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent evt) {
            JButton btn = (JButton) evt.getSource();
            btn.setText(makeButtonText());
         }
      });
   }

   private String makeButtonText() {
      String buttonText = "Process number " + buttonCount;
      buttonCount++;
      return buttonText;
   }

   private static void createAndShowGui() {
      ChangeButton mainPanel = new ChangeButton();

      JFrame frame = new JFrame("ChangeButton");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

或者您可以将字段保存在 ActionListener 本身内部：

```
 button2.setAction(new AbstractAction("Process item 1") {
     private int button2Count = 2;

     @Override
     public void actionPerformed(ActionEvent evt) {
        JButton btn = (JButton) evt.getSource();
        btn.setText(makeButton2Text());
     }

     private String makeButton2Text() {
        String button2Text = "Process item " + button2Count;
        button2Count++;
        return button2Text;
     }

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:31:35.690

下面的代码是处理按钮按下事件的方法。

```
button1.addActionListener(new ActionListener(){
  public void actionPerformed(ActionEvent e){
    ...
  }
}); 
```

然而，这是一个位于类构造函数内部的内部类。在这种情况下，当在内部类中使用在构造函数或内部方法中初始化的局部变量时，必须将变量声明为 final。但是，您不能将其声明为 final，因为您想增加它。

无论如何，在`actionPerformed`方法内增加它是错误的。正如我之前所说，该代码在按下按钮时执行。

# sed - 一行中最后一次出现的字符串

> ID：12201276
> 
> 赞同：2
> 
> 时间：2012-08-30T16:19:03.487
> 
> 标签：sed, awk

我是 linux 新手，很难实现以下目标。我在每一行都有一个包含包名的文件。

例如：

```
abc/123/new/package/abc/123/new/package
abc/124/new/package/abc/123/new/package
abc/125/new/package/abc/123/new/package
abc/126/new/package/abc/123/new/package 
```

包名称重复。我只需要从每行的第二个 abc 开始的后半部分，然后将其输出到文件中。

我试图阅读 awk 和 sed，但是，对于我尝试学习这些东西的第一天来说，这似乎有点先进。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:25:47.720

您可以使用以下 sed 命令：

```
sed -E 's#^.*(abc/.*)$#\1#g' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:24:55.540

使用 sed 删除前 4 个级别：

```
sed 's!^[^/]*/[^/]*/[^/]*/[^/]*!!' input_file 
```

或使用重复模式：

```
sed 's!^\([^/]*/\)\{4\}!/!' input_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:55:28.440

这将做：

```
sed -E 's,^.+(abc/),\1,'input_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:18:45.403

有很多方法可以做到这一点。如果要保留的文本始终从同一列位置 (21) 开始，请使用：

```
cut -b 21- < input-file > output-file 
```

如果它始终是您想要的“abc ...”的最后一次出现，请尝试：

```
awk '{print FS $NF}' FS=abc input-file > output-file 
```

# ios - 在不嵌入配置文件的情况下构建 iOS 应用程序

> ID：12201279
> 
> 赞同：0
> 
> 时间：2012-08-30T16:19:11.977
> 
> 标签：ios, xcode, provisioning-profile

我正在为企业内的分发开发一些应用程序。

有什么办法，我可以在没有 XCode 嵌入分发配置文件的情况下构建应用程序，这样我就可以在旧配置文件过期时通过移动设备管理解决方案推送更新的配置文件，而无需重建应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:41:25.500

不，这是不可能的，创建 ipa 需要配置文件

# amazon-ec2 - 不同区域中的 aws 2 vpc 相同区域：使用私有 IP 进行通信

> ID：12201280
> 
> 赞同：1
> 
> 时间：2012-08-30T16:19:16.897
> 
> 标签：amazon-ec2, amazon-web-services, region, zone, vpc

我在一个特定的 AWS 区域设置了两个 VPC，但是每个都属于不同的区域。因此，我试图从区域 A 获取 ec2 实例，以通过私有 IP 与区域 B 中的实例进行通信。有没有人有运气这样做。

目前，一个弹性 IP 连接到区域 A 机器，该机器无法 ping 区域 B 中的私有 IP。在同一区域内进行测试时，ping 私有 IP 是成功的。所有端口和 IP 在两个 VPC 安全组中都是开放的。

区域 a 子网 10.0.0.0/24 区域 b 子网 10.0.1.0/24

两个 VPC 的路由表允许从 10.0.0.0/16 到本地和 0.0.0.0 的流量。到igw

任何意见，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:04:41.830

> 为了让属于 2 个不同 VPC 的 2 个实例进行通信，您需要为每个实例提供一个 EIP，因为流量需要离开 1 个 VPC 并进入第二个 VPC 才能使两个实例进行通信。仅具有私有 IP 的实例只能与同一 VPC 内的实例通信
> 
> NAT 实例主要用于出站连接。
> 
> 这意味着 NAT 将保存有关出站 Internet 访问请求的会话信息，例如，所有响应将通过同一会话返回到同一客户端……类似于 ADSL 路由器的方式
> 
> 在上述情况下，如果您从公共互联网启动到 NAT 的 EIP 的入站连接，它将丢弃数据包，因为它不知道将其路由到哪里。
> 
> 要绕过此问题，您需要在 NAT 设备的 IP 表中设置 PAT 规则，这意味着在端口 11225 上接收到的流量将重定向到私有实例 10.XX10 端口 X
> 
> 如果只有 2 个实例需要 2 个 VPC 之间的通信，则更简单的解决方案是将 EIP 附加到这两个 VPC。

来自aws论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:07:50.060

默认情况下，您无法做您想做的事情。VPC 流量保留在 VPC 内。我建议您将两个 VPC 解析为一个，或者在两个 NAT 实例之间设置一个 VPN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T17:58:42.777

我使用 openvpn 在每个区域中创建了一个带有 EIP 的 debian 机器，因此两个区域都是连接的。

# symfony - Symfony2 + Composer（多域）

> ID：12201284
> 
> 赞同：4
> 
> 时间：2012-08-30T16:19:26.403
> 
> 标签：symfony, symfony-2.1, composer-php

我们目前正在将我们的项目迁移到 symfony2。该网站使用多个域：

*   `domain.com`- 主要网站
*   `help.domain.com`- 常问问题
*   `profile.domain.com`- 对于用户 CP

等等

为了使它工作，我的想法是创建目录“站点”，并为每个子域创建自己的目录，其中包含框架文件 + 供应商目录，其中包含指向根供应商/* 目录的符号链接（除了 composer 和 autoload.php 文件之外的每个目录）。所以结构看起来像这样：

```
root/
    sites/
        domain.com/
            app/
            src/
            web/
            vendor/
                symlinks for each library to root vendor
            composer.json
            composer.lock
        profile.domain.com/
            app/
            src/
            web/
            vendor/
                symlinks for each library to root vendor
            composer.json
            composer.lock
    vendor/ 
```

我需要这样做，因为每个域的自动加载都必须有所不同（我们将域之间共享的代码存储在供应商/公司中，并且每个域唯一的代码存储在域目录的 /src 文件夹中） .

问题是现在我必须`composer install`在每个目录上做“”，它会创建自己的`composer.lock`，如果我以后在任何目录更新，库将被更新，但`composer.lock`文件不会被同步，所以它只会重新安装每个时间。

有没有更好的方法来解决这个问题？（我想只将 composer 放在根目录中，但我没有找到一种方法为每个域转储不同的 autoload.php 文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:31:50.543

您要么拥有一个具有一组依赖项的项目，要么拥有两个具有独立部门的项目。介于两者之间的任何事情都没有意义。似乎您想使用第一个选项，但担心自动加载性能。

问题是，默认情况下，自动加载无论如何都会很慢。因此，即使您有两个单独的自动加载文件，仅包括特定子项目的部门，它也可能仍然很慢。

你真正应该做的是转储一个类映射，它基本上是一个自动加载文件，将所有类名映射到它们所在的文件。这可以保持 stat 调用，因此非常有效。并且在两个子项目中加载整个类映射也不应该给你太多的开销，特别是如果你启用了 APC。

您可以使用以下命令转储类映射文件：

```
$ composer dump-autoload --optimize 
```

现在您应该获得更高的自动加载性能。

**TLDR：使用单个`composer.json`类映射自动加载，它很快。**

# javascript - 为什么 JavaScript 对话框（警告、确认）会停止页面重绘？

> ID：12201290
> 
> 赞同：3
> 
> 时间：2012-08-30T16:19:51.823
> 
> 标签：javascript, browser

在浏览器页面上打开模式对话框会停止页面重绘。异步启动的脚本在后台不间断地运行。

我在这个 JSfiddle [http://jsfiddle.net/YNbux/](http://jsfiddle.net/YNbux/)中说明了行为。该框在显示时停止其动画，`alert()`并在警报关闭时跳转到动画中。

这种行为存在于（至少在我的电脑上）：

*   铬 21.0.1180.82
*   歌剧 12.01
*   Safari 6.0

所以我猜这是预期的行为 - 但会导致动画跳跃，以及其他对最终用户来说似乎是故障的事情。`alert()`那么为什么要`confirm()`停止页面重绘呢？

**编辑：** gif-images 也停止重绘：http: [//jsfiddle.net/YNbux/4/](http://jsfiddle.net/YNbux/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:21:52.330

这些功能是阻塞功能。您的 JavaScript 将停止执行，直到它们返回。

您的动画和不在后台的动画与您的代码调用没有完全分开`alert()`。看似异步的代码仍然需要在循环中执行，如果某些代码阻塞了循环，它们将不会自行运行。这对于您的代码的正确操作至关重要。

# c++ - 从 c++ 到目标 c 的回调

> ID：12201292
> 
> 赞同：13
> 
> 时间：2012-08-30T16:19:57.173
> 
> 标签：c++, objective-c, callback, member-functions

我在objective-c中有ViewController，我的大部分代码都是c++（.mm）。我想从 obj-c（在 c++ 中）设置一些对成员函数的回调，并从 c++ 调用它们。像这样的东西（它非常简化）：

```
@interface MyClass
{ }
-(void)my_callback;
@end

@implementation MyClass

-(void)my_callback
{
   printf("called!\n");
}

-(void)viewDidLoad
{
   // setup_callback( "to my_callback ?" );
}
@end 
```

和：

```
void setup_callback(void(*func)()) { func(); } 
```

这当然是不正确的。请问我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T16:31:00.547

你有几个选择。

# 使用块

您可以使用块来传达您的回调工作。这可能是最简单的解决方案，因为它允许您调用代码而无需将任何参数传递给回调“函数”。块在 C 及其所有带有 Clang 的超集中工作，Clang++ 甚至允许在块和 lambda 之间进行隐式转换。

```
#include <dispatch/dispatch.h>

void setup_callback(dispatch_block_t block)
{
    // required to copy the block to the heap, otherwise it's on the stack
    dispatch_block_t copy = [block copy];

    // setup stuff here
    // when you want to call the callback, do as if it was a function pointer:
    // block();
}

int main()
{
    MyClass* instance = [[MyClass alloc] init];

    setup_callback(^{
        [instance callback_method];
    });
} 
```

这可能需要在 C++ 端进行一些修改以接受函子（或者如果更简单，则只接受块）而不是函数指针。

由于块创建了闭包，因此它们对于此类工作非常方便。

Blocks 是 Apple 对 C、C++ 和 Objective-C 的扩展。[在这里](http://thirdcog.eu/pwcblocks/)查看更多关于它们的信息。

# 使用 Objective-C 运行时获取指向要调用的方法的函数指针

使用 Objective-C 运行时访问选择器的函数指针。这更加繁琐，需要您跟踪三个变量（调用方法的对象、要使用的选择器和方法实现），但即使在您不能使用 Objective-C 的情况下它也确实有效句法。

Objective-C 方法实现是具有此签名的函数指针：

```
typedef void (*IMP)(id self, SEL _cmd, ...); 
```

`self`您所期望的`_cmd`是，导致此方法调用的选择器在哪里（该`_cmd`变量实际上在所有 Objective-C 方法中都可用，尝试一下），其余的被认为是可变参数。您**需要**将`IMP`变量转换为正确的函数签名，因为可变参数 C 函数的调用约定并不总是与 Objective-C 方法调用的调用约定相匹配（Objective-C 方法调用是编译器的标准函数调用约定，可能或者`cdecl`amd64 调用约定，可变参数调用约定*并不总是*相同的）。A`reinterpret_cast`将能够做到。

这是我为类似意图整理的一些代码。它使用 C++11 可变参数模板来帮助获得正确的函数签名。

```
#include <objc/runtime.h>

template<typename TReturnType, typename... TArguments>
auto GetInstanceMethodPointer(Class class, SEL selector) -> TReturnType (*)(id, SEL, TArguments...)
{
    Method m = class_getInstanceMethod(class, selector);
    IMP imp = method_getImplementation(m);
    return reinterpret_cast<TReturnType (*)(id, SEL, TArguments...)>(imp);
}

int main()
{
    MyClass* instance = [[MyClass alloc] init];
    auto foo = GetInstanceMethodPointer<void>(
        [MyClass class],
        @selector(my_callback));
    // foo is a void (*)(id, SEL) function pointer
    foo(instance, @selector(my_callback));
} 
```

还要注意您的实例不在`nil`使用函数调用之前，因为`nil`检查是由 Objective-C 运行时处理的。在这种情况下，我们绕过它。

# 跟踪一个对象和一个`SEL`

用于`-[NSObject performSelector:]`执行回调。基本上是 Objective-C 运行时解决方案的更简单版本。

```
void setup_callback(id object, SEL selector)
{
    // do stuff
    // to execute the callback:
    // [object performSelector:selector];
}

int main()
{
    MyClass* instance = [[MyClass alloc] init];

    setup_callback(instance, @selector(my_callback));
} 
```

# 将您的调用包装在 C++ 函数中

我认为这个真的不需要任何例子。创建一个接受您的对象类型作为第一个参数的函数，并在其上调用您想要的方法。与解决方案类似`SEL`，您需要分别跟踪要调用的函数和调用它的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:39:28.073

因为 C++ 和 Obj-C 都是 C 的超集，所以您可以将 C++ 代码回调到 C 函数。要将回调传回您的 Obj-C 对象，只需确保 C 回调参数包含指向原始 Obj-C 对象的指针。

```
// C++ calls this C function
void exampleCallback(void* classInstance)
{
    // callback arguments include a pointer to the Obj-C object
    [((MYObjCClassType*)classInstance) exampleCallback];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:26:51.163

我认为这是不可能的：在 C++ 代码中调用 Objective-C 回调。反过来也是可能的。

当我遇到这个问题时，我所做的是编写一个在 Objective-C 中永远运行的 EVENT_LOOP，并从 C++实例中获取**事件。**`std::vector`这样，在 C++ 中，如果您想在 Objective-C 中“调用”回调，只需将事件添加到相应的`std::vector`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T16:31:16.297

您可以在 .mm 文件中自由混合 Obj-C 和 C++ - 它被称为“Objective-C++”。

为了保持 C++ 代码和 Objective-C 代码的隔离，你可以在它们之间创建一个轻量级的外观，这将在 C++ 回调中进行 Objective-C 方法调用（以通常的方式）。

# objective-c - 使用核心数据的父实体继承和反向关系

> ID：12201304
> 
> 赞同：1
> 
> 时间：2012-08-30T16:20:51.760
> 
> 标签：objective-c, ios, xcode, core-data

我对核心数据有点陌生，目前正在尝试利用父实体。现在，我有这种模型

> 实体：
> 
> ThemePark -> hasAttractions（一对多关系）
> 
> WaterPark -> hasAttractions（一对多关系）
> 
> Attractions -> inThemePark（hasAttractions 的反比关系）
> 
> Attractions -> inWaterPark（hasAttractions 的反比关系）

我想要的是一个父实体，比如说 GenericPark，它具有属性“hasAttractions”，但我不确定应该如何定义反向关系。

如果我执行以下操作

> Attractions -> inGenericPark（与 GenericPark 中的 hasAttractions 相反）

如何确定 GenericPark 是 waterPark 还是 ThemePark？

我应该如何在使用父实体的同时修改这个模型？

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:02:42.800

每个`NSManagedObject`实例，无论您是否定义了自定义子类，都有一个关联`NSEntityDescription`，它将告诉您它是什么类型的对象。只需调用[`-entity`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/doc/uid/TP30001171-BAJCICGE)有问题的托管对象。

例如：

```
if ([@"WaterPark" isEqualToString:[[somePark entity] name]]) {
  // do watery things
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:33:51.483

您应该为数据模型检查器中的每个实体分配一个自定义类（可以与实体同名），并为每个实体创建 NSManagedObject 子类（如果您还没有这样做的话）。

然后`ThemePark`和`WaterPark`都是 , 的子类`GenericParc`，您可以测试一个`GenericParc`对象，例如

```
if ([genericParc isKindOfClass:[ThemeParc class]]) {
    // It is a ThemePark:
    ThemeParc *themePark = (ThemeParc *)genericPark;
    // ... 
} 
```

# android - 无法在 Android 中覆盖样式 switchStyle 和 NumberPicker

> ID：12201309
> 
> 赞同：8
> 
> 时间：2012-08-30T16:21:01.493
> 
> 标签：android, android-widget, styles

我无法覆盖 android:switchStyle。这是我所做的：

在文件夹 values-v14 中，我有两个文件：

主题.xml：

```
<style name="AppTheme" parent="android:Theme.Holo.Light">
    <item name="android:switchStyle">@style/SwitchAppTheme</item>
</style> 
```

样式.xml：

```
<style name="SwitchAppTheme" parent="android:Widget.Holo.Light.CompoundButton.Switch">
  <item name="android:track">@drawable/switch_track_holo_light</item>
  <item name="android:thumb">@drawable/switch_inner_holo_light</item>
</style> 
```

我有以下错误：

> res/values-v14/styles.xml:4：错误：检索项目的父项时出错：找不到与给定名称“android:Widget.Holo.Light.CompoundButton.Switch”匹配的资源。
> 
> res/values-v14/themes.xml:5：错误：错误：找不到与给定名称匹配的资源：attr 'android:switchStyle'。

我对 NumberPicker 也有同样的问题：

主题.xml：

```
<item name="android:numberPickerUpButtonStyle">@style/NumberPickerButtonUpAppTheme</item>
<item name="android:numberPickerDownButtonStyle">@style/NumberPickerButtonDownAppTheme</item>
<item name="android:numberPickerStyle">@style/NumberPickerAppTheme</item> 
```

样式.xml：

```
<style name="NumberPickerButtonUpAppTheme" parent="android:Widget.Holo.Light.ImageButton.NumberPickerUpButton">
    <item name="android:src">@drawable/numberpicker_up_btn_holo_light</item>
</style>

<style name="NumberPickerButtonDownAppTheme" parent="android:Widget.Holo.Light.ImageButton.NumberPickerDownButton">
    <item name="android:src">@drawable/numberpicker_down_btn_holo_light</item>
</style> 
```

我有以下错误：

> /res/values-v11/themes.xml:26：错误：错误：找不到与给定名称匹配的资源：attr 'android:numberPickerStyle'。
> 
> /res/values-v11/themes.xml:25：错误：错误：找不到与给定名称匹配的资源：attr 'android:numberPickerDownButtonStyle'。
> 
> /res/values-v11/themes.xml:25：错误：错误：找不到与给定名称匹配的资源：attr 'android:numberPickerUpButtonStyle'。

我的项目使用 SDK 16，所以它应该可用...... eclipse 和 IntelliJ 中的相同错误。

如何扩展这些样式？我可以以同样的方式扩展许多其他（buttonStyle、buttonStyleToggle、seekBarStyle...）...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-26T12:58:30.027

Switch 小部件的样式不公开。

您可以使用[android-switch-backport](https://github.com/BoD/android-switch-backport)或[SwitchCompatLibrary](https://github.com/ankri/SwitchCompatLibrary)。它们还适用于[Android Holo Colors](http://android-holo-colors.com/)

Number Picker 还有一个替代方案：[Better Pickers](https://github.com/derekbrameyer/android-betterpickers)

我希望我有帮助。

# c# - 具有嵌入式功能的 Linq

> ID：12201311
> 
> 赞同：3
> 
> 时间：2012-08-30T16:21:18.543
> 
> 标签：c#, .net, linq, salesforce, linq-to-objects

好的，这是我的问题。我正在使用来自 Salesforce API 的 saveresult，并且正在学习 LINQ。我不知道在这里使用它可能不是最好的，但这是我正在尝试做的，只是更有说服力。

顺便说一句，这里的 saveresult[] 类缩小为定义：

```
public partial class SaveResult {

    private Error[] errorsField;
    private string idField;
    private bool successField;

    [System.Xml.Serialization.XmlElementAttribute("errors")]
    public Error[] errors

    [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)]
    public string id

    public bool success 
} 
```

这就是我想要做的事情。检查错误，如果返回的保存结果中有错误则返回，如果没有错误则返回 null。

```
string errors = null;
        foreach (SaveResult s in saved)
        {
            if (s.success) continue;
            else
            {
                foreach (Error e in s.errors)
                {
                    errors += String.Format("Errors on object: {0}. Error Code is: {1}. Error Message: {2}",
                                            s.id,e.statusCode.ToString(),e.message);
                }
            }
        } 
```

到目前为止，我有：

```
return saved
   .Select(i => i.errors
      .Select(j => new { j.statusCode, j.message })
      .Distinct()
      .ToList()
      ).ToString(); 
```

我很确定在继续之前我需要一个匿名函数来评估 i 的错误。

无论如何，就是这样。感谢您的帮助（或指向我帮助的链接！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:32:18.140

使用查询语法：

```
return string.Join("",
    from s in saved
    where ! s.Success
    from e in s.Errors
    select string.Format(
        "Errors on object: {0}. Error Code is: {1}. Error Message: {2}",
        s.id, e.statusCode); 
```

这被翻译成`SelectMany`幕后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:28:27.747

我想你想要这个：

```
errors =
    string.Join(Environment.NewLine, 
        saved.Where(x => !x.success)
             .SelectMany(x => x.errors
                               .Select(y => string.Format("Errors on object: {0}. "
                                                          + "Error Code is: {1}. "
                                                          + "Error Message: {2}",     
                                                          x.id,
                                                          y.statusCode.ToString(), 
                                                          y.message))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:30:36.473

通常在有要遍历的对象图的地方，我更喜欢查询语法。这：

```
from saveResult in saved
where !saveResult.success
from error in s.errors
select 
    string.Format("Errors on object: {0}. Error Code is: {1}. Error Message: {2}",
    s.id, e.statusCode.ToString(), e.message) 
```

将给出一个字符串序列。要执行您目前正在做的事情，您可以将`Join`它们与`string.Empty`分隔符一起使用，但您可能需要一些非空分隔符以提高可读性。

我会说返回`string.Empty`比`null`没有错误时更有意义，但是如果你愿意，没有什么能阻止你进行检查。在所有：

```
var errors = 
    from saveResult in saved
    where !saveResult.success
    from error in s.errors
    select 
        string.Format("Errors on object: {0}. Error Code is: {1}. Error Message: {2}",
        s.id, e.statusCode.ToString(), e.message);

var aggregateErrors = string.Join(string.Empty, errors);

return string.IsNullOrEmpty(aggregateErrors)
    ? null
    : aggregateErrors; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:27:26.410

```
return string.Join(Environment.NewLine, saved
    .Where(save => !save.success)
    .SelectMany(save => save.errors
        .Select(err => Tuple.Create(save.id, err.statusCode, err.message)))
    .Select(i => string.Format("Errors on object: {0}. Error Code is: {1}. Error Message: {2}", 
        i.Item1, i.Item2, i.Item3))); 
```

# c# - 路径 > MAX_PATH 的文件并将二进制文件插入 DB

> ID：12201315
> 
> 赞同：0
> 
> 时间：2012-08-30T16:21:33.850
> 
> 标签：c#, .net-4.0, sql-server-2008-r2

我`SafeFileHandle`通过一些 P/Invoke 拉了一个。这是一个片段：

```
 [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    internal static extern SafeFileHandle CreateFile(
        string lpFileName,
        EFileAccess dwDesiredAccess,
        EFileShare dwShareMode,
        IntPtr lpSecurityAttributes,
        ECreationDisposition dwCreationDisposition,
        EFileAttributes dwFlagsAndAttributes,
        IntPtr hTemplateFile); 
```

然后我可以很容易地抓住把手：

```
SafeFileHandle fileHandle = CreateFile(path, EFileAccess.GenericRead, EFileShare.None, IntPtr.Zero,ECreationDisposition.OpenExisting, 0, IntPtr.Zero); 
```

我必须这样做，因为`System.IO.File`只需要一个字符串路径，并且我需要支持大于 260 个字符的完全限定路径`MAX_PATH`。

无论如何，我在 sql server 上有一个命令过程来执行插入。我目前正在将流的字节数组添加到`varbinary(max)`列中（我的大多数文件都小于 2MB，所以`filestream`似乎不值得去）。

我目前正在填充命令参数，如下所示：

```
using (FileStream s = new FileStream(fileHandle, FileAccess.Read))
{
    byte[] buf = new byte[s.Length];
    s.Read(buf, 0, Convert.ToInt32(s.Length));
    cmd.Parameters.AddWithValue("@File", buf);
} 
```

与`File.ReadAllBytes`我可以在文件路径小于`MAX_PATH`. 有没有更优化的方法将此二进制文件放入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:53:36.063

在 dwFlagsAndAttributes 中传递 FILE_FLAG_NO_BUFFERING 标志。由于您是一次性读取整个文件，因此不需要内置于原生 Windows IO 中的缓冲，并且会增加一点开销。不确定它会为您节省多少，但有时每一点都会有所帮助。

# visual-studio - Visual Studio 内容安装程序错误

> ID：12201317
> 
> 赞同：0
> 
> 时间：2012-08-30T16:21:39.583
> 
> 标签：visual-studio, templates

我正在尝试构建一个 Visual Studio 扩展并在我的 Visual Studio 2010 中部署它。为了演示项目站点模板的创建，我按照以下步骤操作。

1.  手动创建项目网站模板
2.  创建了要包含在网站模板中的文件
3.  在我的项目中创建了一个以 .vstemplate 作为扩展名的文件，其中包含元数据信息
4.  为其他用户部署模板创建 .vsi 文件
5.  .vsi 文件安装成功
6.  但是在通过选择我的模板创建新网站时出现错误找不到文件

“C:\Documents and Settings..\Application Data\Microsoft\Visual Studio\10.0\
ProjectTemplatesCache\Visual C#\C Sharp\webproject.zip\webproject.webproj”

我在 Windows XP-SP3 上运行 VS 2010。我错过了什么。任何人都可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:30:18.010

确保模板 zip 文件包含 webproject.webproj 文件。并且它位于您在 vstemplate 条目中指示的 zip 文件中。

vstemplate 文件告诉 VS 需要哪些文件，在 zip 文件中的何处找到它们，以及将它们放在新创建的项目中的何处。当它说在项目创建过程中缺少文件时，通常表明该文件不在 zip 文件中，或者它不在 vstemplate 文件中的条目所说的位置。

# android - 使用 GraphicsUtil 的斑马打印图像

> ID：12201319
> 
> 赞同：2
> 
> 时间：2012-08-30T16:21:55.737
> 
> 标签：android, zebra-printers

我正在尝试将单个图像从 android 打印到斑马打印机。

我已经尝试过的事情列表（不完全按照这个顺序）。zp 是 ZebraPrinter，zpc 是 ZebraPrinterConnection

版本 1 - 打印空白（但高度似乎是正确的）

```
 zpc.write("! U1 JOURNAL \r\n U1 SETFF 50 2 \r\n");
     zp.getGraphicsUtil().printImage(bmp,0,0,-1,-1,false); 
```

版本 2 - 打印空白（但高度似乎是正确的）

```
 zpc.getToolsUtil.sendCommand("! U1 JOURNAL \r\n U1 SETFF 50 2 \r\n");
     zp.getGraphicsUtil().printImage(bmp,0,0,-1,-1,false); 
```

版本 3 - 打印图像后跟大量空白空间，在这种情况下，图像没有问题，看起来很棒

```
 zp.getGraphicsUtil().printImage(bmp,0,0,-1,-1,false); 
```

笔记：

1.试过ZPL，打印机语言不是ZPL，可能是CPCL（我不知道）

2.文本文件打印正常，所以打印机工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T06:24:53.640

删除多余的空间使用代码作为

```
zpc.write("! UTILITIES\r\nIN-MILLIMETERS\r\nSETFF 10 2\r\nPRINT\r\n".getBytes());
zp.getGraphicsUtil().printImage(bmp,0,0,100,100,false); 
```

其中第 4 和第 5 个参数可以根据您的需要...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:17:41.003

所以，您希望图像正确打印，但最后没有多余的空白，对吗？

如果这就是你想要的，那么你的`SETFF`命令需要被修复。您需要发送类似这样的内容（有关 SETFF 命令的更多选项，请参阅 CPCL 手册：

```
! UTILITIES
IN-MILLIMETERS
SETFF 50 2
PRINT 
```

代码看起来像这样：

```
zpc.write("! UTILITIES\r\nIN-MILLIMETERS\r\nSETFF 10 2\r\nPRINT\r\n".getBytes());
zp.getGraphicsUtil().printImage(bmp,0,0,-1,-1,false); 
```

# css - 点击在 IE8/9 和 Opera 中移动内部文本

> ID：12201320
> 
> 赞同：1
> 
> 时间：2012-08-30T16:21:57.937
> 
> 标签：css, internet-explorer, button, opera

我无法让标签在所有浏览器中以相同的方式对点击做出反应。出于某种原因，当在 IE 8/9 和 Opera 中单击时，标签会将其内部文本向下和向右移动。这在最新的 Firefox 或 Chrome 中不会发生。

[http://codepen.io/jimmykup/pen/vEAyd](http://codepen.io/jimmykup/pen/vEAyd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:27:58.917

尝试删除该`line-height`属性并仅使用`width`,`height`和`padding`所需的大小。

# mysql - 如何将 MySQL 脚本转换为纯 SQL？

> ID：12201322
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:02.267
> 
> 标签：mysql, sql

有没有将 MySQL 脚本转换为纯 SQL 的方法/工具？我使用他们的工具在 MySQL 上设计我的数据库，但我正在尝试使用 Flyway 来处理迁移。我想在纯 SQL 上编写脚本，以便它适用于任何数据库。

我知道我可以将我的脚本翻译成普通的 SQL，我正在寻找一种方法来自动化它，以避免每次数据库模型由于某种原因必须更改时重做。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:20:53.297

[phpMyAdmin](http://www.phpmyadmin.net/)有一个格式选项，可以尝试在 DB2、MSSQL、Oracle、Tradition 中输出导出。

![](../Images/aa97d4f81556f327a85f09a14f6b1d7d.png)

# css - 对 CSS 类进行分组以简化样式表

> ID：12201323
> 
> 赞同：2
> 
> 时间：2012-08-30T16:22:10.463
> 
> 标签：css

这是我的问题，我正在制作一个带有下拉菜单的导航栏。我已经为列表中的所有 li 开设了课程。这是为此的CSS。

```
#menu li:hover {
    border: 1px solid #777777;
    padding: 4px 5px 4px 5px;
}

#menu li a {
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px; 
    color: #EEEEEE;
}

#menu li:hover a {
    color:#161616;
} 
```

这是如何实现的。

```
<ul id="menu">
    <li><a href="#">Button 1</a></li>
    <li><a href="#">Button 2</a></li>
    <li><a href="#">Button 2</a></li> 
```

我想使用上面的 css 创建一个名为 nodropdown 的类。这就是我格式化它的方式，但我认为我做得不对。

```
#menu li.nodropdown :hover {
    border: 1px solid #777777;
    padding: 4px 5px 4px 5px;
}

#menu li.nodropdown a {
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px; 
    color: #EEEEEE;
}

#menu li.nodropdown :hover a {
    color:#161616;
} 
```

我希望能够像这样调用 nodropdown 类并覆盖 Button 2：

```
<ul id="menu">
    <li><a href="#">Button 1</a></li>
    <li class="nodropdown"><a href="#">Button 2</a></li> 
    <li><a href="#">Button 2</a></li> 
```

但我不认为我在上面为 nodropdown 格式化类的方式是正确的吗？你能帮我纠正吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:31:54.827

分组的想法是将 CSS 类/ID 分组在一起，然后例如只列出一次公共属性。

```
/* Attributes for all boxes */
td.Box1, td.Box2, td.Box3 {padding: 3px 6px; font-weight: bold}

/* Unique box attributes */
td.Box1 {background: #fff}
td.Box2 {background: #000}
td.Box3 {background: #ccc} 
```

# hibernate - 带有别名的 GORM createCriteria OR 语句

> ID：12201326
> 
> 赞同：1
> 
> 时间：2012-08-30T16:22:16.213
> 
> 标签：hibernate, grails, grails-orm

我`statuses`将从视图调用的 ID 列表传递给控制器​​。在控制器中，我只是在执行：

```
def statusSelection = params.list('statuses') 
```

我`createCriteria`用来然后获取域类记录列表：

```
MyDC.createCriteria().list(
    max: params.max,
    offset: params.offset,
    order: params.order,
    sort: querySort) {
        statuses { // hasMany statuses: Status
            or {
                statusSelection.each { // loop through params list
                    idEq(it.id)
                }
            }
        }
    } 
```

`status`在视图中请求表的要求允许对属性进行排序之前，这一直运行良好。现在我收到`org.hibernate.QueryException`以下消息：

> 重复关联路径：状态

这是由于`querySort`我确定的值，但我不知道如何为排序别名和维护`or`语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:42:36.280

如果当错误引发 querySort == "statuses" 时，您可以创建别名来替换该 querySort。您应该更改您的 gsp 以返回 statusSort 而不是 statuses

```
MyDC.createCriteria().list(
max: params.max,
offset: params.offset,
order: params.order,
sort: querySort) {
    createAlias('statuses', 'statusSort') //This alias will replace the querySort 
    statuses { // hasMany statuses: Status
        or {
            statusSelection.each { // loop through params list
                idEq(it.id)
            }
        }
    }
} 
```

你可以在这里阅读一个非常有趣的讨论：[Sorting on database server or application server in n-tier architecture](https://stackoverflow.com/questions/5870929/sorting-on-database-server-or-application-server-in-n-tier-architecture?rq=1)

# objective-c - 如何将数据解析为数组或字典

> ID：12201327
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:16.033
> 
> 标签：objective-c, cocoa, nsmutablearray, cocoa-bindings, gcdasyncsocket

我有一个应用程序可以同时与不同的服务器建立多个连接。我想将每个连接记录在一个数组中，以便可以在表格视图中显示它们并在我的应用程序的不同部分中使用它们。这就是我从 GCDAsyncSocket 得到的。

```
{
address = "127.0.0.1";
hostname = "127.0.0.1";
port = 52509;
socket = "<a0471600 01000000>"; } 
```

试图弄清楚如何根据地址将其解析为可变数组或字典，以便我可以在表格视图中显示它。这来自 GCDAsyncSocket

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:43:09.767

不知道哪里有问题。如果我想存储这些数据，我创建了一个类，其参数`address, hostname, port and socket`为 NSString 对象。然后将这个对象类插入到 NSMutableArray。

# python - python通过传入其他raw_input绕过raw_input

> ID：12201328
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:22.243
> 
> 标签：python, python-2.7

我正在创建一个基于文本的冒险游戏。角色正在导航由城市街区组成的地图。我有一个`direction_function`，`raw_input`然后将角色移动到正确的相邻块。然而，我有一些特殊的功能，比如在大多数街区上可以拾取物品或与之互动的人。这里我`raw_input`也用。如果他们输入正确的关键字，他们会进行交互，但如果他们通过输入方向忽略它们，则会将它们传递给再次`direction_function`提示它们的关键字。`raw_input`有没有办法将他们的初始答案传递给他们，`direction_function`这样他们就不必重复他们的答案？

这是我的方向函数：

```
def direction_function(left, right, up, down, re):
    direc = raw_input(">")
    if direc in west:
        left()
    elif direc in east:
        right()
    elif direc in north:
        up()
    elif direc in south:
        down()
    elif direc in inventory_list:
        inventory_check()
        re()
    else:
        print "try again"
        re() 
```

我像这样为每个块指定一个函数

```
def block3_0():
    print "You see a bike lying in your neighbor's yard. Not much else of interest."
    direc = raw_input(">")
    if direc in ("take bike", "steal bike", "ride bike", "borrow bike", "use bike"):
        print "\n"
        bike.remove("bike")
        school_route()
    else:
        direction_function(block2_0, block4_0, block3_1, block3_0, block3_0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:31:12.457

好吧，您可以使用您的默认参数值`direction_function`将最终先前调用的结果传递给`raw_input`，例如：

```
def direction_function(direction=None):
    direction = direction or raw_input()
    # Do something with the input 
```

如果没有提供方向（常规工作流程），测试最终会打电话`raw_input`来获取一些。如果提供了方向（例如，如果您已经阅读过，您将通过的方向），它将直接使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T16:33:27.437

是的，您只需要以某种方式定义您的函数以使其成为可能。

例如，考虑这样的事情：

```
def direction_function(input = 'default_val'):
    if input != 'default_val':
        input = raw_input()

    # do your stuff here 
```

使用上述结构的函数，您可以在调用 direction_function() 方法的代码块中检查交互值或方向条件，并将调用函数的输入值传递给它。所以如果方向是玩家选择的，那么输入应该是'default_val'。

# axis - 带有附加标签的多个垂直轴 - Teechart

> ID：12201330
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:25.817
> 
> 标签：axis, teechart

最近我遇到了一个关于 Teechart Programming 的问题。我得到了一个用 Teechart 8 用 C++ Builder 编写的软件，下面是截图。这就是我对软件的全部了解。我很好奇如何用 teechart 实现这一点。

我浏览了官方教程，通过新的 TChartAxis 我可以将图表分成 n 块。

让我如此困惑的是如何添加附加标签（左对齐）以及如何在代码中设置它们的颜色、字体和大小。

我很抱歉我的英语很差，你会让我开心，我期待你的观点。

最美好的祝愿~:)

![](../Images/9021d1badc0ab03704ecd69bd9110bc5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:10:55.543

如果您在图表中创建一个轴，它需要一个带有链接到它的数据的系列。然后，将绘制轴、网格、标签和系列。[在此处](http://www.steema.com/download/vcl)的“TeeChart 编译演示”中的“所有功能\欢迎！\Axes\Opaque 区域”中查找自定义轴使用的示例（及其代码） 。

# c - 在 Linux 中向 C 程序添加命令

> ID：12201331
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:26.447
> 
> 标签：c, linux, command-line-arguments

我是 C 和 Linux 的新手。在终端中运行已编译的程序时，例如：

```
./myProg --myCommand1 
```

然后`myProg`将根据命令“myCommand1”完成工作。我想向 myProg 添加几个命令。我不确定是否`char *argv[]`可以用于此。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:34:40.473

检查 GNU [getopt](http://www.gnu.org/software/libc/manual/html_node/Getopt.html)以获取解析 cmdline 参数的简单方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:24:39.283

它可以使用。`argv[1]`是第一个命令，`argv[2]`是第二个，等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:25:07.263

是的，您需要为此使用 argc 和 argv 参数。[http://www.cprogramming.com/tutorial/c/lesson14.html](http://www.cprogramming.com/tutorial/c/lesson14.html)有一个关于使用它们的小教程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T16:27:04.150

大多数 Linux 命令行程序使用名为`getopt()`. 仅遍历`argv[]`数组有一些优点，基本上它将处理参数重新排列、短标志和长标志、帮助消息、使用说明以及现在通常在运行良好的命令行程序中被视为理所当然的许多项目。我强烈建议您花一天或更长时间来了解它。

虽然向正在`getopt`使用的程序添加参数很容易，但如果设置了参数，编写执行某项操作的代码可能非常容易，也可能非常困难，这取决于您的设想、您的愿景的详细程度以及如何适合您的详细信息将由计算机程序实施。

# vb.net - VB.NET - 保存由 Web 应用程序打开的 excel 文件

> ID：12201333
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:33.287
> 
> 标签：vb.net

使用 VB.NET，我试图通过单击导出按钮保存由 Web 应用程序打开的 excel 文件（文件保持打开状态，临时名称为“Book1”）。我正在尝试使用 vb.net 创建一个 exe 文件，它将现有的 excel 文件保存为给定的格式，比如 xlsx 或 xls 或 html。这是一个迷你自动化项目，我想用标准产品“VB.NET”来实现

我精通vba，在我使用工作簿索引循环所有现有文件而不知道文件名的情况下，在vb.net（我是新手）中我做不到。这是一个迷你项目，我正在尝试实施。

问题：Excel Interop 无法识别打开的文件。

使用“workbook.count”获取计数时，它报告为零，但如果文件是通过互操作使用“workbook.add”创建的，则它报告计数为 1。

```
Imports Microsoft.Office.Interop.Excel
Imports Microsoft.Office.Interop

Dim xlApp As New Application
fileCount1 = xlApp.Workbooks.Count 
```

filecount1 = 0（在上面代码的最后一行之后观看它）

有人可以指导我找到解决方案。

谢谢！！

**更新：** 主要思想是使用 .net 或 vbscript 或任何其他技术将文件保存为 xls 或 html 格式。这是我们正在尝试实施的自动化测试的一部分。我的目标是 vb.net，因为它可以更好地与 MS Excel 集成。可以从自动化工具触发这段外部 exe (.net) 或函数 (vbscript)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:56:21.843

关于这个问题的更新，有点决定使用 vbscript 来保存从应用程序打开的任何 excel 流。

使用 vb.net 函数时，我遇到了 excel.interop 无法识别已经打开的文件（由某些外部程序打开）的问题。

在某些情况下，vbscript 无法识别 excel 文件，我尝试将焦点设置在浏览器等不同的对象集合上并将其设置回 excel，我能够识别它。

感谢所有的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:34:34.360

您需要获取对由您的 Web 应用程序打开并仍在运行的 Excel 应用程序的引用。当您拥有此参考资料时，您可以使用 Excel.Interop 并使用所需名称保存/关闭您的工作簿

```
public bool SaveOpenExcel(string fileName)
{
    int iSection = 0, iTries = 0;
    Microsoft.Office.Interop.Excel.Application oExcel;

    tryAgain: 
    try 
    {      
        iSection = 1; // Attempting GetObject.
        oExcel = (Microsoft.Office.Interop.Excel.Application)
                System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application");
        iSection = 0; // Resume normal error handling.

        oExcel.ActiveWorkbook.SaveAs(@"d:\temp\running.xlsx", 
                Microsoft.Office.Interop.Excel.XlFileFormat.xlXMLSpreadsheet,
                System.Type.Missing, System.Type.Missing, System.Type.Missing, 
                System.Type.Missing, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, 
                System.Type.Missing, System.Type.Missing, System.Type.Missing, System.Type.Missing, 
                System.Type.Missing);

        oExcel.Quit();
        oExcel = null;
        return true;
    } 
    catch (Exception err) 
    {
        if (iSection == 1) 
        { 
            //GetObject may have failed because the
            //Shell function is asynchronous; enough time has not elapsed
            //for GetObject to find the running Office application. Wait
            //1/2 seconds and retry the GetObject. If you try 20 times
            //and GetObject still fails, assume some other reason
            //for GetObject failing and exit the procedure.
            iTries++;
            if (iTries < 20) 
            {
                System.Threading.Thread.Sleep(500); // Wait 1/2 seconds.
                goto tryAgain; //resume code at the GetObject line
            } 
            else
            {
                Console.WriteLine("GetObject still failing.  Process ended.");
                return false;
            }
        } 
        else 
        {   
            //iSection = 0 so use normal error handling:
            Console.WriteLine(err.Message);
            return false;
        }
    }
} 
```

此代码示例改编自有关 WinWord 的类似问题的 Microsoft 支持文章。您可以[阅读这篇文章](http://support.microsoft.com/kb/316125)以更好地理解这种方法的问题。
我真的建议更改您的 Web 应用程序以完成保存文件的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:03:23.403

```
Dim fileTest As String = "C:\Temp\ExcelTest\test.xlsx"

    If File.Exists(fileTest) Then

        File.Delete(fileTest)

    End If

    Dim oExcel As Object

    oExcel = CreateObject("Excel.Application")

    Dim oBook As Excel.Workbook

    Dim oSheet As Excel.Worksheet

    oBook = oExcel.Workbooks.Add

    oSheet = oExcel.Worksheets(1)

    oSheet.Name = "Test Name"

    oSheet.Range("A1").Value = "SOME VALUE"

    oBook.SaveAs(fileTest)

    oBook.Close()

    oBook = Nothing

    oExcel.Quit()

    oExcel = Nothing 
```

[http://howtodomssqlcsharpexcelaccess.blogspot.ca/2012/08/vbnet-how-to-creae-excel-file-simple.html](http://howtodomssqlcsharpexcelaccess.blogspot.ca/2012/08/vbnet-how-to-creae-excel-file-simple.html)

# ruby-on-rails - 关于 pgresult 和 ActiveRecord::Base.connection().execute 返回的问题

> ID：12201334
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:36.327
> 
> 标签：ruby-on-rails, ruby

我正在学习 ruby​​ 和 ruby​​ on rails，我有一个问题：

我想知道我是否可以在 pgresult 上使用 select 方法。

这是我的代码：

```
connection = ActiveRecord::Base.connection()

allinfosql = "SELECT applications.appli_name, folders.folder_name, folders.is_obsolete, strategies.strategy_name
FROM applications, folders, strategies, folders_strategies
WHERE strategies.id = folders_strategies.strategy_id 
AND folders_strategies.folder_id = folders.id 
AND folders.application_id = applications.id 
ORDER BY applications.appli_name, folders.folder_name ASC"

@allinfos = connection.execute(allinfosql) 
```

我试着这样做

```
test = @allinfos.select {|row| row['appli_name']="SOME_VALUE"} 
```

但结果是 test 等于 @allinfos

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:43:21.193

好吧，我犯了一个大错误。这很好用：

```
test = @allinfos.select {|row| row['appli_name'] == "SOME_VALUE"} 
```

所以我不必将我的 pgresult 转换为数组。pgresult 接受选择方法。

感谢您的回答和帮助。

# android - 安卓：调用 setListAdapter

> ID：12201335
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:38.777
> 
> 标签：android, android-listview, logcat, simplecursoradapter

我的第一个`setListAdapter`来自activity2的工作但如果我`EditText`在activity1（tabhost）中搜索以更新我`setlistadapter`的activity2（无布局）我会收到一个错误

**这是我的 LogCat**

```
08-30 16:03:36.119: D/AndroidRuntime(1482): Shutting down VM
08-30 16:03:36.119: W/dalvikvm(1482): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-30 16:03:36.157: E/AndroidRuntime(1482): FATAL EXCEPTION: main
08-30 16:03:36.157: E/AndroidRuntime(1482): java.lang.IllegalStateException: System services not available to Activities before onCreate()
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.app.Activity.getSystemService(Activity.java:3526)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.widget.ResourceCursorAdapter.<init>(ResourceCursorAdapter.java:49)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:84)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at com.amnisar.pediatric.calculator.MedicineList.changeList(MedicineList.java:105)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at com.amnisar.pediatric.calculator.PediaHome$1.afterTextChanged(PediaHome.java:90)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.widget.TextView.sendAfterTextChanged(TextView.java:6145)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:6328)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.text.SpannableStringBuilder.sendTextHasChanged(SpannableStringBuilder.java:897)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:353)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:269)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:583)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.view.inputmethod.BaseInputConnection.setComposingText(BaseInputConnection.java:384)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:292)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:73)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.os.Looper.loop(Looper.java:123)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at java.lang.reflect.Method.invokeNative(Native Method)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at java.lang.reflect.Method.invoke(Method.java:521)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-30 16:03:36.157: E/AndroidRuntime(1482):     at dalvik.system.NativeStart.main(Native Method)
08-30 16:03:40.378: I/Process(1482): Sending signal. PID: 1482 SIG: 9 
```

**这是我在活动 1（TabActivity）中的代码**

```
etSearch = (EditText) findViewById(R.id.searchBox);

etSearch.addTextChangedListener(new TextWatcher(){

    public void afterTextChanged(Editable arg0) {

        database = entry.getWritableDatabase();
        EditText se = (EditText) findViewById(R.id.searchBox);
        String nametest= se.getText().toString().toUpperCase();
        Cursor cursor = database.query("medicineTable", new String[] {"_id", "Name"}, 
                "name LIKE " + "'%"+etSearch.getText().toString().toUpperCase()+"%'", null, null, null, null);
        cursor.moveToFirst();

        trythis.changeList(cursor);

    } 
```

这是我在活动 2 ( `listActivity`) 中的代码：

```
public void setList(){

    SQLite entry =  new SQLite(this);
    try{
        entry.createDataBase();
    }catch(IOException e){
        throw new Error("Error");
    }

    database = entry.getWritableDatabase();
    data = database.query("medicineTable", fields, null, null, null, null,
            null);

    dataSource = new SimpleCursorAdapter(this, R.layout.medlayout, data, fields,
            //new int[] { R.id.name,R.id.category,R.id.trade});
            new int[] { R.id.name});

    view = getListView();

    view.setHeaderDividersEnabled(true);
    view.addHeaderView(getLayoutInflater().inflate(R.layout.medlayout, null));

    setListAdapter(dataSource);
} 
```

* * *

```
public void changeList(Cursor newData){

    dataSource = new SimpleCursorAdapter(this, R.layout.medlayout, newData, fields,
            new int[] { R.id.name});
    setListAdapter(dataSource);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:07:40.430

正如 Logcat 所说，您正在尝试在框架初始化它们之前调用其他一些 Activity 的方法。我猜您已经`Trythis`使用如下所示的新调用进行了初始化。您不能这样做，因为活动的上下文不会被初始化。移除新来电

```
 trythis = new ListActivity(); 
```

# python - Python 3.2.2 中的用户定义函数 (def)

> ID：12201337
> 
> 赞同：4
> 
> 时间：2012-08-30T16:22:42.790
> 
> 标签：python, python-3.x, function

我目前正在阅读“[如何像计算机科学家一样思考：用 Python 学习](http://www.greenteapress.com/thinkpython/)”（绿茶出版社，2002 年 1 月）。

我无法使任何定义功能起作用。我已经完全按照书中的内容复制了它，但它不起作用。我做错了什么？

这是代码：

```
def printParity(x):
    if (x)%2 == 0:
        print (x), ("is even")
    else:
        print (x), ("is odd") 
```

它只是打印 (x) 输入，而不是 (x) 是奇数还是偶数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:25:44.090

你要：

```
def printParity(x):
    if x % 2 == 0:
        print(x, "is even")
    else:
        print(x, "is odd") 
```

你的陈述`print (x), ("is even")`

实际上是在制作一个元组，如控制台所示：

```
>>> x=2
>>> print (x), ("is even")
2
(None, 'is even') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T16:25:59.777

在 Python 3 中，`print`是一个函数，而不是一个语句。使用 Python 3 教程。

```
def printParity(x):
    print("{0} is {1}".format(x, "odd" if x % 2 else "even")) 
```

正如 DSM 指出的那样，您的代码正在创建一个元组，该元组将 的结果`print(x)`作为其第一个元素（并且由于`print()`不返回任何内容，因此该结果是`None`），并将`"is even"`其作为其第二个元素。但是，它对该元组没有任何作用，因此没有任何可见的事情发生（并且未命名的元组很快就会被垃圾收集）。唯一可见的是函数调用的“副作用”，`print(x)`它当然会输出`x`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:27:07.110

该代码片段中有几个错误。由于您使用 Python 进行编程，因此您必须确保每个代码块都是缩进的。这就是你在 Python 中定义代码块的方式——通过缩进，而不是使用括号。

此外，(x) 没有任何意义。它只会打印 x 或那里的任何东西。

试试这个：

```
def printParity(x):
    if x % 2 == 0:
        print (x, "is even")
    else:
        print (x, "is odd") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:23:16.587

您不需要在变量名周围加上括号。此外，您可以使用格式字符串使打印输出更清晰

```
def printParity(x):
    if x % 2 == 0:
        print ("%s is even" % x)
    else:
        print ("%s is odd" % x) 
```

# javascript - 为在新窗口中打开外部链接创建例外

> ID：12201339
> 
> 赞同：2
> 
> 时间：2012-08-30T16:22:45.520
> 
> 标签：javascript, jquery, hostname

我正在使用一个简单的 Jquery 脚本来强制`target="_blank"`所有外部链接。问题是它会在新窗口中打开子域。我想调整这段代码，以便它允许在同一个浏览器会话中使用子域，而不是强制一个新窗口。

例如，如果我的网站位于[http://pixeltest.com](http://pixeltest.com)并且我有一个指向[http://test.pixeltest.com](http://test.pixeltest.com)的链接，那么它将在新窗口中打开。

编码：

```
$("a").filter(function() {
    return this.hostname && this.hostname !== location.hostname;
}).attr('target', '_blank'); 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:29:12.850

改变

```
return this.hostname && this.hostname !== location.hostname; 
```

到

```
return this.hostname && this.hostname.substr(this.hostname.indexOf('.')) !== location.hostname.substr(location.hostname.indexOf('.')); 
```

这应该只比较第一个点之后的所有内容。

# java - 在子类中调用“super.loadUrl”

> ID：12201340
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:46.283
> 
> 标签：java, android, cordova

（首先，让我声明我的专业领域是 HTML5（和 php/coldfusion），我是 Java/Android 的初学者）

在我的内部，我`onCreateOptionsMenu`有以下代码来处理 android 操作栏中的搜索操作中的查询更改。

```
final SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() {
        public boolean onQueryTextChange(String newText) {
            //I want to call super.loadUrl from here
            return true;
        }
}; 
```

问题是我想在每次文本更改时调用 phonegap 的 loadUrl 方法，但是这是不可能的，因为`super`它似乎指的是其他东西。如果我什至只知道上面所说的构造（它似乎是某种子类定义），我可能可以用谷歌搜索这个，但因为我什至不知道并且`super.super`不允许我在完全的损失。

供参考：我的课看起来像

```
public class MainActivity extends DroidGap implements ActionBar.OnNavigationListener { 
```

这就是 loadUrl 的来源（我也尝试了方向的东西`DroidGap.loadUrl`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:30:57.197

我认为您的问题可能缺少一些关键点。Super 指的是当前对象的超类。在您的情况下，当前对象是 queryTextListener，而 super 是 SearchView.OnQueryTextListener

**根据以下评论进行编辑：** 在您的包含方法中（与最终 SearchView.OnQueryTextListener queryTextListener ... 的范围相同）添加最终引用，例如：

```
final DroidGap droidGap = this;
final SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() {
    public boolean onQueryTextChange(String newText) {
        droidGap.loadUrl(...);
        return true;
    } 
```

};

# asp-classic - 没有任何 HTML 但只有 VBScript 代码的经典 ASP 页面

> ID：12201341
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:48.157
> 
> 标签：asp-classic

是否可以拥有一个经典的 ASP 页面，它只包含零 HTML 的 VBScript 服务器端代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:27:55.170

是的。没什么好说的，输出 HTML（或其他任何东西）完全是可选的，就像大多数服务器端语言一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:56:21.463

是的，您可能只使用 ASP 代码而不编写任何 HTML 代码。在这种情况下，您将拥有一个除了代码输出之外没有任何设计的 HTML 页面。

# sql - SQL*Plus 无法连接到 Oracle

> ID：12201342
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:49.137
> 
> 标签：sql, oracle, sqlplus, oracle-sqldeveloper

这是我在我的计算机上安装 Oracle 11g XE 的交易。使用 system 和 sys 用户连接 SQL*Plus 没有问题。我还创建了 2 个新用户，与这 2 个用户连接没有问题。我安装了 SQLDeveloper，与之前提到的 4 个用户连接没有问题。

我想更改默认日期格式，所以我使用用户 sys 在 SQL*Plus 中执行了下一个命令：

```
ALTER SYSTEM SET NLS_DATE_FORMAT=‘DD-MON-YYYY’ SCOPE=SPFILE; 
```

执行最后一个命令后，我重新启动了 Oracle 服务。

这就是问题所在... 重新启动后，我无法使用之前使用 SQL*Plus 创建的 4 个帐户登录。SQL*Plus 给了我这个错误信息：

```
ERROR: ORA-12638: Credential retrieval failed 
```

奇怪的是，我可以使用 SQLDeveloper 毫无问题地登录。

有人可以帮我修复 SQL*Plus 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:34:03.287

来自 Burleson 先生的提示：[http ://www.dba-oracle.com/t_ora_12638_credential_retrieval_failed.htm](http://www.dba-oracle.com/t_ora_12638_credential_retrieval_failed.htm)

请检查 sqlnet.ora 文件。更改以下条目并尝试，这将起作用。

原始条目

```
SQLNET.AUTHENTICATION_SERVICES= (NTS) 
```

修改条目

```
SQLNET.AUTHENTICATION_SERVICES= 
```

# jquery - jQuery 无法将 chrome 检测为 webkit？

> ID：12201345
> 
> 赞同：0
> 
> 时间：2012-08-30T16:22:56.790
> 
> 标签：jquery, cross-browser

我曾经`$.browser.webkit`检测我的浏览器是否是 Safari/Chrome，现在`false`使用 Chrome 时会返回此检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:24:21.277

`$.browser`已弃用，您应该使用[$.support](http://api.jquery.com/jQuery.support/)来检查可用功能而不是特定浏览器！

`$.browser`在 jQuery 1.8 中仍然可用，但会`Chrome`在 chrome 浏览器等中返回并且不再返回`webkit`.

[**小提琴**](http://jsfiddle.net/SLZNS/1/)

# c# - 发送异步电子邮件

> ID：12201353
> 
> 赞同：10
> 
> 时间：2012-08-30T16:23:56.267
> 
> 标签：c#, asp.net-mvc, mvcmailer

我正在使用带有 MVCMailer 的 ASP.NET MVC 3，我尝试使用 SendAsync 发送电子邮件，但实际上它仍然需要更长的时间。

所以我想像下面的代码一样使用Task.Factory：

```
 var task1 = Task.Factory.StartNew(
            state =>
            {
                var mail = new UserMailer();
                var msg = mail.Welcome("My Name", "myemail@gmail.com");
                msg.SendAsync(); 
            });

   task1.Wait(); 
```

问题是，MVCMailer 需要 HttpContext，但在这个任务中我得到了 HttpContext Null。

如何发送异步电子邮件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-03T04:07:00.213

对此的一个小补充。这是一个可以帮助一些人的扩展方法。

```
using Mvc.Mailer; 
using System.Threading.Tasks;
public static void SendEmailAsync(this MvcMailMessage msg, HttpContext currContext)
{
      //make this process a little cleaner
      Task.Factory.StartNew(() =>
      {
           System.Web.HttpContext.Current = currContext;
           msg.SendAsync();
       });
} 
```

从您的控制器方法中使用它，如下所示。

```
Mailers.UserMailer um = new Mailers.UserMailer();
um.SendWelcomeEmail(dataObject).SendEmailAsync(ControllerContext.HttpContext.ApplicationInstance.Context); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T21:44:26.560

`Task.Factory.StartNew`将创建一个新线程。
如果要访问主线程中的**HttpContext**，则必须执行以下操作：

```
var task1 = Task.Factory.StartNew(() =>
    {
    System.Web.HttpContext.Current = ControllerContext.HttpContext.ApplicationInstance.Context;
    var mail = new UserMailer();
    var msg = mail.Welcome("My Name", "myemail@gmail.com");
    msg.SendAsync();
    });

task1.Wait(); 
```

使用 TPL 或 QueueUserWorkItem 是否更好存在长期争论。
有人试图解决这个[问题](http://blogs.msdn.com/b/pfxteam/archive/2009/10/06/9903475.aspx)。
这是 QueueUserWorkItem 版本：

```
public class HomeController : Controller
{
    private AutoResetEvent s_reset = new AutoResetEvent(false);

    public ActionResult Index()
    {
        var state = new WorkerState() { HttpContextReference = System.Web.HttpContext.Current };
        ThreadPool.QueueUserWorkItem(new WaitCallback(EmaiSenderWorker), state);

        try
        {
        s_reset.WaitOne();
        }
        finally
        {
        s_reset.Close();
        }

        return View();
    }

    void EmaiSenderWorker(object state)
    {
        var mystate = state as WorkerState;

        if (mystate != null && mystate.HttpContextReference != null)
        {
        System.Web.HttpContext.Current = mystate.HttpContextReference;
        }

        var mail = new UserMailer();
        var msg = mail.Welcome();
        msg.SendAsync();

        s_reset.Set();
    }

    private class WorkerState
    {
        public HttpContext HttpContextReference { get; set; }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:40:45.917

```
public class UserMailer : MailerBase    
{
    RegisterService Service = new RegisterService();
    HttpContext Context;
    public UserMailer(HttpContext context)
    {
        Context = context;
        MasterName="_Layout";
    }

    public void ConfirmRegistration(Register model)
    {
        SendAsync(() =>
        {
            model.Conference = Service.Context.Conferences.Find(model.ConferenceID); // load conference bcs it fails to lazy load automatically.
            ViewData.Model = model;
            return Populate(x =>
            {
                x.Subject = "You registered for " + model.Conference.Name + "!"; ;
                x.ViewName = "Confirm";
                x.To.Add(model.Email);
            });
        });
    }

    private void SendAsync(Func<MvcMailMessage> GetEmail)
    {
        Task.Factory.StartNew(() =>
        {
            System.Web.HttpContext.Current = Context;
            GetEmail().Send();
        });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:51:10.027

你不需要任务。SendAsync 是异步的并使用另一个线程自身。任务不会加速你的邮件。

**更新**：当我解决同样的问题时，我使用任务和同步发送。看来 SendAsync 不是那么异步。这是我的代码示例（它不需要 HttpContext）：

```
public void SendMailCollection(IEnumerable<Tuple<string, string, MailAddress>> mailParams)
    {
        var smtpClient = new SmtpClient
        {
            Credentials = new NetworkCredential(_configurationService.SmtpUser, _configurationService.SmtpPassword),
            Host = _configurationService.SmtpHost,
            Port = _configurationService.SmtpPort.Value
        };

        var task = new Task(() =>
                                {
                                    foreach (MailMessage message in mailParams.Select(FormMessage))
                                    {
                                        smtpClient.Send(message);
                                    }

                                });
        task.Start();
    }

    private MailMessage FormMessage(Tuple<string, string, MailAddress> firstMail)
    {
        var message = new MailMessage
            {
                From = new MailAddress(_configurationService.SmtpSenderEmail, _configurationService.SmtpSenderName),
                Subject = firstMail.Item1,
                Body = firstMail.Item2
            };
        message.To.Add(firstMail.Item3);
        return message;
    } 
```

# javascript - 在 JQuery Slider 上添加 -webkit-linear-gradient 时 -moz-linear-gradient 中断

> ID：12201355
> 
> 赞同：2
> 
> 时间：2012-08-30T16:24:08.997
> 
> 标签：javascript, jquery, css, slider, linear-gradients

TL;DR -webkit-linear-gradient 正在破坏 -moz-linear-gradient

所以听到这个难题，我正在使用带有两个手柄的 Jquery Slider 插件，并且我有一个渐变作为背景颜色，以便为外部范围提供一些颜色。我要做的是在滑块移动时更新渐变的百分比。当同时使用 -moz 和 -webkit 标签时，它在 Chrome / Safari 中有效，但在 Firefox 中无效。该值是从第一个滑块的位置拉出的。

当我只有 -moz-linear-gradient 标签时，它可以工作，但是一旦我添加 -webkit-linear-gradient 标签，它就会在 Firefox 中中断。

这是代码

HTML：

```
<div id="traffic-allocation">
    <h4 id="traffic-allocation-hed">Traffic Allocation <small>Change by dragging handles right or left and applying changes</small></h4>
    <div class="slideContainer">
        <div  id="slider-direct" class="slider"></div>
    </div>
</div>

<div class="labelBox">
     <div class="control-box" id="control-box-direct">
         <input id="control-direct" type="text" value="35%" class="allocation-control" />
         <div class='allocation-control-wrapper'>
             <h4 class="variantLabel mycontrol-label" id="mycontrol-label-direct">Control:  </h4>
         </div>
    </div>
</div> 
```

JavaScript：

```
$(function() {
$( '.slider' ).slider({
    range: true,
    values: [35, 70],
    min: 0,
    max: 100,
    step: 5,
    slide: function( e, ui ) {

    //Derive calling (class selector) element's ID and set the IDs for its "companion" value displays:
    theSegment = e.target.id.slice(7);
    theControl = '#control-' + theSegment;

        $( theControl ).val( ui.values[ 0 ] + '%' );

        var slidercolor = $('#control-direct').val();
        $('.ui-slider-horizontal').css({
            background: '#0e76bc', /* Old browsers */
            background: 'linear-gradient(to right,  #0e76bc '+slidercolor+',#e78f08 '+slidercolor+')' ,/* W3C */
            background: '-moz-linear-gradient(left,  #0e76bc '+slidercolor+', #e78f08 '+slidercolor+')', /* FF3.6+ */
            background: '-webkit-linear-gradient(left,  #0e76bc '+slidercolor+',#e78f08 '+slidercolor+')' /* Chrome10+,Safari5.1+ */

        })
    }
}); 
```

CSS：

```
h1 {
    font-family: Helvetica, Arial;   
    font-weight: bold;
    font-size: 18px;
}

body, p{
    font-family: Helvetica, Arial;
}

.ui-slider-horizontal{
    background: '#0e76bc', /* Old browsers */
    background: linear-gradient(to right,  #0e76bc 50%,#e78f08 50%); /* W3C *
    background: -moz-linear-gradient(left,  #0e76bc 50%, #e78f08 50%); /* FF3.6+ */
    background: -webkit-linear-gradient(left,  #0e76bc 50%,#e78f08 50%); /* Chrome10+,Safari5.1+ */

}
.ui-widget-header {
    background: none repeat scroll 0 0 #292668;
    border: 1px solid #CCCCCC;
    color: #292668;
    font-weight: bold;
} 
```

这是一个链接，可以查看发生了什么以及css，因为它有很多:)。（在 chrome/safari 中打开，看看它应该做什么，Firefox 看看它坏了）

[http://jsfiddle.net/DrewLandgrave/bep9A/](http://jsfiddle.net/DrewLandgrave/bep9A/)

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:25:33.923

您只能为给定元素上的任何单个样式属性设置一个值。您所拥有的是您在 CSS 文件中所做的，但这不是该`.css()`方法所做的。`style`它直接在每个受影响的 DOM 元素上弄乱了对象的属性。因此，当您设置“-moz-linear-gradient”时，您正在清除“linear-gradient”，而当您设置时，您正在清除简单的颜色设置。

在 CSS 中按类或其他方式设置样式，然后在 JavaScript 中设置类，当您想选择一种或另一种设置时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:11:05.717

我修改了小提琴。您需要有多个 css 调用，而不是多个背景属性。试试这个：http: [//jsfiddle.net/bep9A/1/](http://jsfiddle.net/bep9A/1/)

# jsf - PrimeFaces 组件不显示，而标准 JSF 组件呈现正常

> ID：12201356
> 
> 赞同：1
> 
> 时间：2012-08-30T16:24:11.070
> 
> 标签：jsf, jsf-2, primefaces

Java EE6/CDI JSF2 Primefaces 3.3.1。我创建了一个搜索页面，其中包含一些用于生成搜索结果表的级联下拉列表如果我使用 jsf：

```
<h:dataTable  var="_employeeVList" value="#{employeeVProducer.employeeVList}"  rendered="#{not empty employeeVProducer.employeeVList}"> 
    <f:facet name="header">  
        Employee Search Results 
    </f:facet>
    <h:column>
        <f:facet name="header">Area</f:facet>
        <h:outputText value="#{_employeeVList.areaName}" />
    </h:column>
    ...
</h:dataTable> 
```

表格呈现输出，html 看起来很正常。但是当我改为primefaces时：

```
<p:dataTable  var="_employeeVList" value="#{employeeVProducer.employeeVList}"  rendered="#{not empty employeeVProducer.employeeVList}"> 
    <f:facet name="header">  
        Employee Search Results 
    </f:facet>
    <p:column>
        <f:facet name="header">Area</f:facet>
        <h:outputText value="#{_employeeVList.areaName}" />
    </p:column>
    ...
</p:dataTable> 
```

表不显示。当我用 firebug 查看源代码时，我发现 html 有点奇怪：

```
 <table id="searchForm:results">
    <tbody>
    <tr>
    <td>
    <p:datatable rendered="true" value="[com.raytheon.myPkg.EmployeeV@f486,                                 com.raytheon.myPkg.EmployeeV@88fe,                              com.raytheon.myPkg.EmployeeV@adaf, 
                                          ...
                                com.raytheon.myPkg.EmployeeV@6a5b]" 
var="_employeeVList">
    <p:column></p:column>
    <p:column></p:column>
    ...                          
    </p:datatable></td>
    </tr>
    </tbody>
    </table> 
```

对象在标签标签中，列是空的。在页面的其他地方，我正在使用 p:panelGrid，它包含下拉列表并且可以正确显示。

我的默认模板页面中有 h:head 和 h:body。

该表由有状态的请求范围 bean 支持。

我没有使用任何外部 JavaScript。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:30:19.167

因此，这些`<p:xxx>`标记根本没有被解析为 JSF 标记，并且在生成的 HTML 输出中显示为普通的普通标记。这可能有以下一个或多个原因：

1.  您忘记`p:`在视图中声明 XML 命名空间，或者您使用了错误的命名空间 URI。它应该是：

    ```
    xmlns:p="http://primefaces.org/ui" 
    ```

2.  您忘记实际安装 PrimeFaces 库。这应该是一个问题

    一个。放入webapp`primefaces.jar`的`/WEB-INF/lib`文件夹中。

    湾。确保您的依赖管理器（例如 Maven）已配置为将 PrimeFaces 添加到项目并将其添加到运行时`/WEB-INF/lib`文件夹

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T20:11:18.623

将另一个原因添加到 BalusC 的列表中：

如果您不将 servlet URL 映射添加到您的 URL，您将得到奇怪的输出并且 JSF 不会解析您的 XHTML 页面！

例如，如果您在 web.xml 中有以下 URL 映射：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

您应该使用`/faces/yourpage.xhtml`JSF 正确呈现输出。

如果你使用`/yourpage.xhtml`你会看到奇怪的输出。

# javascript - CSS 属性更改监听器

> ID：12201358
> 
> 赞同：6
> 
> 时间：2012-08-30T16:24:24.537
> 
> 标签：javascript, css

CSS属性更改侦听器的任何建议实现？也许：

```
thread =

function getValues(){
  while(true){
    for each CSS property{
      if(properties[property] != nil && getValue(property) != properties[property]){alert('change')}
      else{properties[property] = getValue(property)}
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:28:07.120

我想你正在寻找这个：

```
document.documentElement.addEventListener('DOMAttrModified', function(e){
  if (e.attrName === 'style') {
    console.log('prevValue: ' + e.prevValue, 'newValue: ' + e.newValue);
  }
}, false); 
```

如果你用谷歌搜索它，就会出现一堆东西。不过，这看起来很有希望：

> [http://darcyclarke.me/development/detect-attribute-changes-with-jquery/](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-01T20:30:31.117

类似的突变事件`DOMAttrModified`已被弃用。考虑改用 MutationObserver。

例子：

```
<div>use devtools to change the <code>background-color</code> property of this node to <code>red</code></div>
<p>status...</p> 
```

JS：

```
var observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.target.style.color === 'red') {
      document.querySelector('p').textContent = 'success';
    }
  });
});

var observerConfig = {
  attributes: true,
  childList: false,
  characterData: false,
  attributeOldValue: true
};

var targetNode = document.querySelector('div');
observer.observe(targetNode, observerConfig); 
```

# video - ffmpeg 视频到图像序列批处理文件

> ID：12201359
> 
> 赞同：0
> 
> 时间：2012-08-30T16:24:32.647
> 
> 标签：video, batch-file, ffmpeg, batch-processing

我正在使用 ffmpeg 将 .avi 文件转换为 .png 图像序列。这个工作得很好：

```
@ ECHO OFF

FOR %%A IN (*.avi) DO CALL :avi2png "%%A"

:avi2png
ffmpeg.exe -y -i %* -sameq -f image2 -c:v png "%%03d.png"

ECHO.
GOTO :EOF 
```

* * *

但我希望脚本从当前正在处理的 .avi 文件中提取不带扩展名的名称。这是图像序列的样子：***currentavi001.png***，***currentavi002.png***等。我想出的脚本不起作用：

```
@ ECHO OFF

FOR %%A IN (*.avi) DO CALL :avi2png "%%A"

:avi2png
ffmpeg.exe -y -i %* -sameq -f image2 -c:v png "%%~nA%%03d.png"

ECHO.
GOTO :EOF 
```

* * *

`%~nA`和都试过了`%%~nA`，但无济于事。脚本返回这个：

```
Couldn't open file : 
av_interleaved_write_frame(): Input/output error. 
```

我是一个完全的外行，并欢迎每一点帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T18:47:51.267

我无法得到上述答案来为我工作。我采用 2 文件方法，每个批处理文件中有 1 行代码，每秒创建一个文件名为 ORIGINALFILENAME_#####.png 的图像。根据您的 ffmpeg.exe 文件的位置以及您为文件命名的任何内容更新您的路径以创建拇指。我正在使用 Windows 7，这对我有用。

包含视频的文件夹中的批处理文件（随意命名）以调用 CreateThumbs.bat 文件：

**对于 (*.avi) 中的 /r %1 %%i 执行 "c:\Program Files (x86)\ffmpeg\CreateThumbs.bat" %%i**

ffmpeg 文件夹中的 CreatThumbs.bat 以创建拇指：

**"c:\Program Files (x86)\ffmpeg\bin\ffmpeg.exe" -i %1 -r 1 -f image2 %~n1_%%05d.png**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:19:11.100

您不能引用`%%A`:avi2png 中的变量。尝试这个：

```
@ ECHO OFF

set count=0
FOR %%A IN (*.avi) DO CALL :avi2png "%%A"
goto :eof

:avi2png
set /a count=count+1
set Ncount=00%count%
set Ncount=%Ncount:~-3%
ffmpeg.exe -y -i %* -sameq -f image2 -c:v png "%~n1%Ncount%.png"

ECHO.
GOTO :EOF 
```

如果您在当前目录中有一个名为的文件，`my_movie.avi` `ffmpeg`将创建 png `my_movie001.png`。

当您`call`从`for`循环中获得标签时，您不能再使用原始`for`循环变量（在本例中为 %%A），而是`:label`将其视为单独的批处理文件，并且在该行之后的所有变量`:label`都被视为传递给批处理的开关文件。

所以这...

```
Call :label one two thee 
```

...与此一起使用...

```
:label
Echo %1, %2, %3. 
```

...产生这样的输出：

```
one, two, three. 
```

就像它是一个独立的批处理文件一样。

哦，also`%%A`等从未被`%%A%%`（或`%A%`，完全不同的变量）引用。如果你这样做（并且`%%A==Hello`）结果将是`Hello%`，并且可能会在代码中的某个地方吃掉一个字符，从而导致奇怪的错误。

# c# - 使用 C# 以编程方式删除服务

> ID：12201365
> 
> 赞同：13
> 
> 时间：2012-08-30T16:24:52.240
> 
> 标签：c#, .net, windows-services

> **可能重复：**
> [如何在 C# 中以编程方式安装 Windows 服务？](https://stackoverflow.com/questions/358700/how-to-install-a-windows-service-programmatically-in-c)

有没有办法使用 C# 以编程方式删除服务而无需执行“InstallUtil.exe /u MyService.exe”？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T16:30:47.387

您可以使用 System.ServiceProcess.dll 中的[ServiceInstaller.Uninstall 方法](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceinstaller.uninstall.aspx)。例如：

```
ServiceInstaller ServiceInstallerObj = new ServiceInstaller(); 
InstallContext Context = new InstallContext("<<log file path>>", null); 
ServiceInstallerObj.Context = Context; 
ServiceInstallerObj.ServiceName = "MyService"; 
ServiceInstallerObj.Uninstall(null); 
```

此方法将尝试在卸载之前先停止服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:42:01.103

如果您要卸载的服务是您自己编写的，并且您已将安装程序添加到项目中，您可以简单地实例化您的 Installer 类并调用 Uninstall。例如，如果您将安装程序拖到设计器服务上并将该组件命名为“ProjectInstaller”，则可以使用以下代码让您的服务自行卸载：

```
var installer = new ProjectInstaller();
installer.Uninstall(null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:31:28.357

服务在 HKLM\SYSTEM\CurrentControlSet\services 下的 Windows 注册表中列出。如果您删除与服务的给定名称相对应的键（不是显示名称；它注册时使用的名称），您将有效地“取消注册”该服务。您可以使用[Microsoft.Win32.Registry](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)对象以编程方式执行此操作。您需要在执行计算机上具有 CAS 权限才能修改注册表项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T16:30:16.060

```
System.Configuration.Install.ManagedInstallerClass
                            .InstallHelper(new string[] { "/u", executablePath }); 
```

# android - tumblr 异常的 JSON 解析

> ID：12201366
> 
> 赞同：0
> 
> 时间：2012-08-30T16:24:53.457
> 
> 标签：android, json, android-activity

我正在尝试自学在 Eclipse 中创建 android 应用程序。我的项目是创建一个显示来自 tumblr 帐户的图片的应用程序。

我从 twitter 和类似的应用程序中找到了一些现有代码。

我试图以我认为我的 tumblr 应用程序可以运行的方式更改代码。在花了几个小时试图找出问题所在以及模拟器不断崩溃的原因之后，我希望在这里找到一些帮助。

我的代码如下所示：

包 com.example.example；

公共类示例扩展活动{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<Tweet> tweets = getTweets("my api key");

    ListView listView = (ListView) findViewById(R.id.ListViewId);
    listView.setAdapter(new UserItemAdapter(this, R.layout.listitem, tweets));
}

public class UserItemAdapter extends ArrayAdapter<Tweet> {
    private ArrayList<Tweet> tweets;

    public UserItemAdapter(Context context, int imageViewResourceId,
            ArrayList<Tweet> tweets) {
        super(context, imageViewResourceId, tweets);
        this.tweets = tweets;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);
        }

        Tweet tweet = tweets.get(position);
        if (tweet != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(getBitmap(tweet.image_url));
            }
        }
        return v;
    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
    } catch (Exception ex) {
        return null;
    }
}

public ArrayList<Tweet> getTweets(String key) {
    String searchUrl = "http://api.tumblr.com/v2/blog/www.richkidsofinstagram.tumblr.com/posts?api_key="
            + key;

    ArrayList<Tweet> tweets = new ArrayList<Tweet>();

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    try {
        responseBody = client.execute(get, responseHandler);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    JSONObject jsonObject = null;
    JSONParser parser = new JSONParser();

    try {
        Object obj = parser.parse(responseBody);
        jsonObject = (JSONObject) obj;

    } catch (Exception ex) {
        Log.v("TEST", "Exception: " + ex.getMessage());
    }

    JSONArray arr = null;

    try {
        Object j = jsonObject.get("results");
        arr = (JSONArray) j;
    } catch (Exception ex) {
        Log.v("TEST", "Exception: " + ex.getMessage());
    }

    for (Object t : arr) {
        Tweet tweet = new Tweet(((JSONObject) t).get("photos").toString());
        tweets.add(tweet);
    }

    return tweets;
}

public class Tweet {

    public String image_url;

    public Tweet(String url) {

        this.image_url = url;
    }
} 
```

}

eclipse中的登录给了我这些错误

```
08-30 15:58:34.549: D/dalvikvm(330): GC_FOR_MALLOC freed 1827 objects / 187744 bytes in 60ms
08-30 15:58:34.879: D/dalvikvm(330): GC_FOR_MALLOC freed 9343 objects / 277800 bytes in 60ms
08-30 15:58:34.969: D/AndroidRuntime(330): Shutting down VM
08-30 15:58:34.969: W/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-30 15:58:34.989: E/AndroidRuntime(330): FATAL EXCEPTION: main
08-30 15:58:34.989: E/AndroidRuntime(330): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.example/com.example.example.Example}: java.lang.NullPointerException
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-30 15:58:34.989: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
08-30 15:58:34.989: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:521)
08-30 15:58:34.989: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-30 15:58:34.989: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-30 15:58:34.989: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
08-30 15:58:34.989: E/AndroidRuntime(330): Caused by: java.lang.NullPointerException
08-30 15:58:34.989: E/AndroidRuntime(330):  at com.example.example.Example.getTweets(Example.java:119)
08-30 15:58:34.989: E/AndroidRuntime(330):  at com.example.example.Example.onCreate(Example.java:35)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-30 15:58:34.989: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-30 15:58:34.989: E/AndroidRuntime(330):  ... 11 more 
```

任何人都可以发现问题？任何帮助都非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:47:54.413

没有行号很难说，但试试这个`getTweets`：

```
for ( int i=0 ; i<arr.length() ; i++ ) {
    Tweet tweet = new Tweet( arr.getJSONObject( i ).getString( "photos" ) );
    tweets.add( tweet );
} 
```

此外，您需要围绕它进行一些异常处理

* * *

### 与 JSONArray 未定义方法相关：

尝试编辑创建 jsonArray 的代码：

```
try {
    arr = jsonObject.getJSONArray("results");
} catch (Exception ex) {
    Log.v("TEST", "Exception: " + ex.getMessage());
} 
```

尽可能尝试使用[特定的方法](http://developer.android.com/reference/org/json/JSONObject.html)，而不是通用的`get()`

*不确定这是否有助于解决错误，但它有助于保持代码更简洁。*

### 更新

似乎原始代码是针对 JSONSimple 的。

Android 带有 JSON 解析，因此使用它没有多大意义，除非您需要它的特定内容。

要使用 Android 默认值进行解析：

```
import org.json.JSONObject;
import org.json.JSONArray; 
```

-

```
JSONObject jsonObject = new JSONObject(responseBody); 
```

并删除现有`JSONParser`代码。

# java - Android 无法启动活动组件信息

> ID：12201371
> 
> 赞同：3
> 
> 时间：2012-08-30T16:25:07.913
> 
> 标签：java, android, nullpointerexception

我在我的模拟器上收到这些错误，并且应用程序在那里崩溃。

日志猫

```
08-30 22:18:20.066: E/AndroidRuntime(860): FATAL EXCEPTION: main
08-30 22:18:20.066: E/AndroidRuntime(860): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mojoo/com.example.mojoo.main}: java.lang.NullPointerException
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.os.Looper.loop(Looper.java:123)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-30 22:18:20.066: E/AndroidRuntime(860):  at java.lang.reflect.Method.invokeNative(Native Method)
08-30 22:18:20.066: E/AndroidRuntime(860):  at java.lang.reflect.Method.invoke(Method.java:507)
08-30 22:18:20.066: E/AndroidRuntime(860):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-30 22:18:20.066: E/AndroidRuntime(860):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-30 22:18:20.066: E/AndroidRuntime(860):  at dalvik.system.NativeStart.main(Native Method)
08-30 22:18:20.066: E/AndroidRuntime(860): Caused by: java.lang.NullPointerException
08-30 22:18:20.066: E/AndroidRuntime(860):  at com.example.mojoo.main.onCreate(main.java:26)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-30 22:18:20.066: E/AndroidRuntime(860):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-30 22:18:20.066: E/AndroidRuntime(860):  ... 11 more
08-30 22:18:21.965: I/Process(860): Sending signal. PID: 860 SIG: 9
08-30 22:19:08.275: D/AndroidRuntime(894): Shutting down VM
08-30 22:19:08.275: W/dalvikvm(894): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-30 22:19:08.285: E/AndroidRuntime(894): FATAL EXCEPTION: main
08-30 22:19:08.285: E/AndroidRuntime(894): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mojoo/com.example.mojoo.main}: java.lang.NullPointerException
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.os.Looper.loop(Looper.java:123)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-30 22:19:08.285: E/AndroidRuntime(894):  at java.lang.reflect.Method.invokeNative(Native Method)
08-30 22:19:08.285: E/AndroidRuntime(894):  at java.lang.reflect.Method.invoke(Method.java:507)
08-30 22:19:08.285: E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-30 22:19:08.285: E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-30 22:19:08.285: E/AndroidRuntime(894):  at dalvik.system.NativeStart.main(Native Method)
08-30 22:19:08.285: E/AndroidRuntime(894): Caused by: java.lang.NullPointerException
08-30 22:19:08.285: E/AndroidRuntime(894):  at com.example.mojoo.main.onCreate(main.java:26)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-30 22:19:08.285: E/AndroidRuntime(894):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-30 22:19:08.285: E/AndroidRuntime(894):  ... 11 more 
```

这是我的 src main.java

```
package com.example.mojoo;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class main extends Activity {

    ImageView iv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        iv=(ImageView) findViewById(R.id.imageView1);

        Button b = (Button) findViewById(R.id.button1);

        b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                startActivityForResult(intent, 0);
            }
        });

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        Bitmap bm = (Bitmap) data.getExtras().get("data");
        iv.setImageBitmap(bm);
    }

} 
```

**编辑**对于问题的一些参考，我正在添加xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.03"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="307dp"
            android:orientation="vertical" >
<LinearLayout

                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <LinearLayout

                        android:layout_width="172dp"
                        android:layout_height="match_parent"
                        android:orientation="vertical" >

                        <RelativeLayout
                            android:layout_width="match_parent"
                            android:layout_height="fill_parent" >

                            <TextView
                                android:id="@+id/textView2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentRight="true"
                                android:layout_alignParentTop="true"
                                android:text="MOJO ULTIMATE"
                                android:textAppearance="?android:attr/textAppearanceLarge" />

                            <ImageView
                                android:id="@+id/imageView1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignLeft="@+id/textView2"
                                android:layout_alignParentBottom="true"
                                android:layout_alignParentRight="true"
                                android:layout_below="@+id/textView2"
                                android:src="@drawable/mojohdpi" />

                        </RelativeLayout>

                    </LinearLayout>

                    <LinearLayout

                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical" >

                        <RelativeLayout

                            android:layout_width="match_parent"
                            android:layout_height="match_parent" >

                            <ImageButton
                                android:id="@+id/imageButton1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentTop="true"
                                android:layout_centerHorizontal="true"
                                android:layout_marginTop="14dp"
                                android:src="@drawable/camerahdpi" />

                            <ImageButton
                                android:id="@+id/imageButton2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignRight="@+id/imageButton1"
                                android:layout_below="@+id/imageButton1"
                                android:src="@drawable/adohdpi" />

                            <ImageButton
                                android:id="@+id/imageButton3"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_below="@+id/imageButton2"
                                android:layout_centerHorizontal="true"
                                android:src="@drawable/vediohdpi" />

                            <ImageButton
                                android:id="@+id/imageButton4"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_below="@+id/imageButton3"
                                android:layout_centerHorizontal="true"
                                android:src="@drawable/livehdpi" />

                            <ImageButton
                                android:id="@+id/imageButton5"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentBottom="true"
                                android:layout_alignRight="@+id/imageButton4"
                                android:layout_below="@+id/imageButton4"
                                android:src="@drawable/browsehdpi" />

                        </RelativeLayout>

                    </LinearLayout>

                </LinearLayout>

            </LinearLayout>

            <LinearLayout

                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <EditText
                        android:id="@+id/editText1"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentTop="true"
                        android:layout_marginTop="18dp"
                        android:ems="10"
                        android:hint="Write an annotation..."
                        android:inputType="textMultiLine" />

                    <RadioButton
                        android:id="@+id/radioButton2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_alignParentRight="true"
                        android:layout_marginRight="114dp" />

                    <RadioButton
                        android:id="@+id/radioButton1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_toLeftOf="@+id/radioButton2" />

                    <ImageButton
                        android:id="@+id/imageButton6"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_above="@+id/radioButton2"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editText1"
                        android:src="@drawable/okhdpi" />

                </RelativeLayout>

            </LinearLayout>

        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:37:51.283

看来您的 b 为空。确保以下语句中的按钮 ID 正确。

```
 Button b = (Button) findViewById(R.id.button1); 
```

# iphone - UIAlertView，以模式呈现 UIAlertViewStyleSecureTextInput

> ID：12201372
> 
> 赞同：0
> 
> 时间：2012-08-30T16:25:18.720
> 
> 标签：iphone, uialertview

所以我想向用户展示一个警报视图，让他们输入密码。我想检查以确保在键盘上输入了某些内容。我知道在 UIAlertViewDelegate 中，您可以获得文本输入。但是，到目前为止，我唯一的解决方案是，

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"buttonIndex: %i", buttonIndex);

    if (buttonIndex == 0) {
        UITextField *passwordTextField = [alertView textFieldAtIndex:0];
        if (!passwordTextField.text.length == 0) {
            NSLog(@"password: %@", passwordTextField.text);
            // save the password
        }
        else {
            // Show the alert view again asking for the password
        }

    }

} 
```

如果他们没有输入任何内容，我会在他们单击“确定”后立即再次要求输入密码。有没有更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:36:46.967

再次显示警报视图。您可以将警报视图放在一个方法中并调用它。

```
...

} else {

    [self showPassAlert];

} 
```

您还可以查看文本字段何时被编辑，并在警报视图中启用/禁用按钮。如果文本字段的长度为 0，则禁用该按钮。当文本字段被编辑并且其长度大于 0 时，启用该按钮。这比关闭和重新打开视图更优雅。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textDidChange) name:UITextFieldTextDidChangeNotification object:textField];

...

-(void)textDidChange {

    for (UIView *view in alertView.subviews) {

        if ([view isKindOfClass:[UIButton class]]) {

            if (textField.text.length == 0) {

                //you may need to look for the button's title to make sure you are not disabling the cancel button

                ((UIButton *) view).enabled = NO;

            } else {

                ((UIButton *) view).enabled = YES;

            }

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T05:11:52.317

为什么不`iboutlet`为您的 UITextFields 创建 /reference，这将帮助您随时检索其值。

# facebook - 创建日期在夏令时结束之后的 Facebook 事件：应该使用什么 UTC 偏移量？

> ID：12201376
> 
> 赞同：1
> 
> 时间：2012-08-30T16:25:41.837
> 
> 标签：facebook, timezone, timezone-offset

问：**如果我今天使用 Facebook API 为 12 月发生的事件（在我的位置偏移 UTC-4）添加一个事件（在我的位置偏移 UTC-5），它会正确显示吗？或者我是否必须将其作为 UTC-5 提交才能在 12 月正确显示，但现在（可能）不正确？**

更多详细信息：

2012 年 8 月 1 日，Facebook 宣布将向事件添加时区支持，包括通过开发者 API。[在这篇博](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)文中，他们解释了这些变化如何影响读写事件。

**对于事件的写入，您现在需要在定义 start_time 和 end_time 时包含 UTC 偏移量。**因此，如果我在华盛顿特区（东部时区，目前在东部夏令时间）并为今天创建了一个事件，我将输入 UTC-4。但是，如果我今天要创建一个活动，并且活动日期是 12 月 1 日（夏令时结束后），我应该输入**UTC-4（当前偏移量）**还是**UTC-5（12 月 1 日的相关偏移量）**？

我意识到有很多关于 Facebook 和时区的问题，但我发现的问题是在 Facebook 宣布新的时区支持之前编写的，因此它们似乎与这种情况无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:24:03.547

根据我所见，您应该使用您设置的事件时间的正确 UTC 偏移量输入事件。

例如，如果您在纽约市举办的活动于 2012 年 11 月 3 日晚上 7 点开始，2012 年 11 月 4 日早上 7 点结束（美国夏令时于 2012 年 11 月 4 日凌晨 2 点结束），您会将开始时间设置为`2012-11-03T19:00:00-04:00`，结束时间设置为`2012-11-04-T07:00:00-05:00`。

Facebook*应*显示为 DST 更正的时间。

# jsp - Firefox 在刷新时丢失了 JSP 会话 bean 更改

> ID：12201381
> 
> 赞同：0
> 
> 时间：2012-08-30T16:25:48.187
> 
> 标签：jsp, firefox, javabeans

虽然我的 IE、Safari 和 Chrome 都没有问题，但 Firefox（在本例中为 15.0）在刷新时会丢失会话 bean 更改。我可以说它正在应用 Java 代码，但它没有正确地持久化对象。这是一个简单的递增 JSP 来尝试一下。

```
<jsp:useBean id="point" class="java.awt.Point" scope="session"/>
<%point.setLocation(point.getX()+1, 0);%>
<%=(int)point.getX()%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:52:26.097

解决了。它正在生成新会话，因为该浏览器被设置为拒绝 cookie。菜鸟失误，粉笔经验。

# php - 为什么 PHP Mcrypt 返回帖子消息垃圾？

> ID：12201384
> 
> 赞同：0
> 
> 时间：2012-08-30T16:25:58.660
> 
> 标签：php, c++, mcrypt, crypto++

[从这里](https://stackoverflow.com/questions/12187689/crypto-to-php-mcrypt-not-working/)使用相同的（基本）代码但切换到 MCRYPT_RIJNDAEL_128，我现在从 php mcrypt_decrypt 中获取正确的数据，除非在某些情况下，它会在我的消息末尾用看似随机的二进制字符填充换行符。

例如，以下内容从解密请求中返回：

```
{"messageData":{"identity":"test","msg_id":0,"token":"fakeToken58586"},"messageName":"fetchSavedData_request"}\n\b\b\b\b\b\b\b\b 
```

我认为这是一个填充问题，但即使我将字符串填充到正确的长度，我偶尔也会得到垃圾，并且通常需要填充的字符串偶尔会恢复正确。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:58:11.733

正如@Jack 在评论中指出的那样，这显然是一个常见问题。[此处](http://au2.php.net/manual/en/function.mdecrypt-generic.php#107979)的代码用于删除加密数据末尾的控制字符。

在这里转载以供后代使用：

```
$data = preg_replace( "/\p{Cc}*$/u", "", $data); 
```

# c# - JQuery自动完成不会自动完成

> ID：12201388
> 
> 赞同：0
> 
> 时间：2012-08-30T16:26:08.123
> 
> 标签：c#, jquery, json, jquery-autocomplete, jsonresult

我正在尝试编写我的第一个 jQuery 自动完成示例。我需要能够从自动完成中选择多个值，所以我使用了[此处](http://jqueryui.com/demos/autocomplete/#remote)提供的示例。

无论我做什么，当我输入“c”、“ch”等时，我都无法让文本框显示值“chicken”和“chickens”。我做错了什么？

我的控制器有这个动作方法

```
public JsonResult GetBirds()
{
    var result = new JsonResult
        {
            Data = new
                {
                    Birds = new List<string> {"chicken", "chickens"}
                },
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };

    return result;
} 
```

我的前端代码是这样的：

```
<script>
    $(function () {
        function log(message) {
            $("<div/>").text(message).prependTo("#log");
            $("#log").scrollTop(0);
        }

        $("#birds").autocomplete({
            source: "/Results/GetBirds",
            minLength: 1,
            select: function (event, ui) {
                log(ui ?
                "Selected: " + ui :
                "Nothing selected, input was " + this.value);
            }
        });
    });
</script>

<div class="demo">

    <div class="ui-widget">
        <label for="birds">Birds: </label>
        <input id="birds" />
    </div>

    <div class="ui-widget" style="margin-top:2em; font-family:Arial">
        Result:
        <div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
    </div>

</div><!-- End demo --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:38:13.383

使用 Rest Clint 或 Firebug Firefox 插件查看控制器返回的内容。

试试这个：

return Json(new {"chicken", "chickens"},JsonRequestBehavior.AllowGet);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T17:26:20.753

* * *

您需要为每个对象构建一个包含“值”和“标签”的字典列表。

[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T18:16:02.617

您的来源格式不正确，忘记 json 结果中的“Birds”键。只需：

```
Data = new List<string> {"chicken", "chickens"} 
```

或者

```
Data = new Dictionary<string, string> {
    {"chiken", "value1"},
    {"chikens", "value2"},
}; 
```

# symfony - 为学说 mongodb odm 导入更快的持久化和刷新

> ID：12201391
> 
> 赞同：1
> 
> 时间：2012-08-30T16:26:14.877
> 
> 标签：symfony, doctrine-odm, import-from-csv

我正在使用 symfony2 和学说 mongodb odm 从 CSV 文件导入产品数据。我创建了一个控制台命令来创建`Product`对象，然后将它们持久化并刷新`DocumentManager`. 冲洗需要 30 秒以上，而我只有几千种产品。未来可能还会有更多。

我想知道是否有任何优化/最佳实践可以在原则上更快地刷新大量新对象。似乎不需要对对象进行太多处理，因为它们都是新的，只需要添加到集合中即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:21:40.813

我遇到了类似的问题（从 csv 加载数千种产品）。我的问题更多地围绕着内存不足，但解决方案也显示出速度的显着提高。

本质上，我在循环中放置了一个计数器并刷新了管理器，然后每隔一段时间就清除它。我发现 150 批大小产生了最好的结果。我确信这在很大程度上取决于您如何处理它，因为我在插入数据之前进行了大量的数字运算以清理数据。

作为参考，它加载了大约 5,500 个具有 100 多个字段的产品，并在大约 20 秒内对其进行处理。修改前需要 3 多分钟（如果由于内存不足而完全完成的话。）

```
//LOOP  {
   if ($count % $batchSize == 0) {
      $manager->flush();
      $manager->clear();
      gc_collect_cycles();
      if ($count % $batchSize == 0)
         echo $count . ' | ' . number_format((memory_get_usage() / 1024), 4) . " KBs\n";
   }
$count++;
} 
```

不要忘记在循环完成后至少再运行一次 $manager->flush() 以捕获那些不会在循环中触发它的 1-149 条记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-03T13:47:01.640

我有一个非常大的数据库。我发现每次插入代码时进行刷新更有效，可以更好地管理对数据库的访问。

```
$dm->persist($object);
$dm->flush();
$dm->clear(); 
```

# c# - Java/C# 类中实例变量的使用

> ID：12201392
> 
> 赞同：0
> 
> 时间：2012-08-30T16:26:21.210
> 
> 标签：c#, java, methods, instance-variables

假设 2 种不同的方法——一种是静态的，一种是非静态的——需要一个实例变量。

该变量在方法中使用 3-5 次不同的时间来进行比较。

变量不会以任何方式更改。

变量的类型（字符串、集合、集合等）也会对其编码方式产生任何影响。

在私有方法（静态和非静态）中使用实例变量的最佳/正确方法是什么？

1.  作为方法参数传递
2.  本地存储，使用获取值的方法——this.getClaimPropertyVertices();
3.  通过获取值本地存储 - this.claimPropertyVertices;
4.  在方法中直接使用实例变量

当创建一个局部变量来存储值时，如果变量不会被更改，“final”关键字将提供任何优势。

编辑1：根据评论，我正在添加附加信息该值无法在方法中本地创建。它必须来自类或类访问的其他方法。

我基于答案的解决方案：
基于@EricJ 的答案。和@Jodrell。我选择了选项 1，并将其创建为私有静态方法。[我还在这里](http://www.leepoint.net/notes-java/flow/methods/50static-methods.html)找到了一些细节来支持这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:29:00.163

> 当创建一个局部变量来存储值时，“final”关键字将提供任何优势，如果变量不会被改变

在 Java 中，*final*为编译器提供了优化机会。它声明变量的内容不会改变。关键字*readonly*在 C# 中提供了类似的作用。

额外的优化机会是否*有意义*取决于具体问题。在许多情况下，算法其他部分的成本将远远大于编译器由于*final*或*readonly*而能够进行的优化。

使用这些关键字还有另一个好处。他们创建了一个价值不会改变的合约，这有助于代码的未来维护者理解他们不应该改变价值（事实上，编译器不会让他们改变）。

> 在私有方法（静态和非静态）中使用实例变量的最佳/正确方法是什么？

*作为方法参数传递*

该值已存储在实例中。为什么要通过？最好的情况是这并不比使用实例属性/字段更好。最坏的情况是 JITer 没有内联调用，并且会创建一个更大的堆栈帧，花费几个 CPU 周期。注意：如果您正在调用*静态*方法，那么您必须传递变量，因为静态方法无法访问对象实例。

*本地存储，使用获取值的方法——this.getClaimPropertyVertices();*

这就是我通常所做的。Getter/setter 用于为字段提供有意义的包装。在某些情况下，getter 将初始化支持字段（使用不调用对象构造函数的序列化程序时 C# 中的常见模式。不要让我开始讨论该主题......）。

*通过获取值本地存储 - this.claimPropertyVertices;*

不，见上文。

*在方法中直接使用实例变量*

和上面的完全一样。使用*这个*或不使用*这个*应该生成完全相同的代码。

**更新**（基于您的编辑）

如果该值在对象实例外部，并且不应与实例一起有意义地存储，则将其作为值传递给方法调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:46:46.513

如果您尽可能使用 static 关键字编写函数，则有几个明显的好处。

> 1.  很明显，哪些输入会影响签名中的功能。
>     
>     
> 2.  您知道该函数不会有副作用（除非您通过引用传递）。这忽略了非功能性副作用，例如对 GUI 的更改。
>     
>     
> 3.  该函数在编程上与类没有关联，如果您认为从逻辑上讲它的行为与另一个实体有更好的关联，则可以移动它。然后调整任何命名空间引用。

这些好处使函数易于理解并且更易于重用。它们还将使在多线程上下文中使用该函数变得更简单，您不必担心对不断传播的副作用的争用。

* * *

我会承认这个答案。您应该使用 static 关键字编写潜在的可重用函数。简单或明显不可恢复的功能应该只访问私有成员或 getter（如果已实现）。

# pushviewcontroller - 在另一个视图控制器的 removeFromSuperview 发布后推送视图控制器

> ID：12201393
> 
> 赞同：1
> 
> 时间：2012-08-30T16:26:30.577
> 
> 标签：pushviewcontroller

从我当前的视图中，我使用 addsubview 调用了另一个视图，当我单击确定时，我想推送另一个视图，它将作为整个操作的主视图

调用第一个视图：

```
dc=[[DriverConfirmation alloc]init ];
  [[dc view]setFrame:CGRectMake(186, 141, 616, 443)];
  [self view]addSubview:dc.view]; 
```

当我按下确定按钮时，我使用删除它

```
[[self view]removeFromSuperview]; 
```

但我不能使用这个推送下一个视图：

```
RouteManagement *rm=[[RouteManagement alloc]init];
    [self.parentViewController pushViewController:rm animated:NO];
    [rm release]; 
```

感谢您提供的任何帮助。

# debugging - 停止调试时如何防止 Visual Studio 2012 关闭 IE？

> ID：12201395
> 
> 赞同：2
> 
> 时间：2012-08-30T16:26:37.280
> 
> 标签：debugging, web, visual-studio-2012

当我使用 Visual Studio 2010 时，我可以“全部分离”，网站将继续运行，浏览器不会关闭。这将使我能够附加不同的解决方案来调试单独编译的库。现在剩下的就是“停止调试”和“全部终止”。

尽管该网站仍在后台运行，但我必须打开一个新的浏览器窗口并导航回原来的位置。

有没有办法回到 2010 年的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:55:14.287

Detach All 在 VS 2012 中仍然可用。如果在 Main Menu 的 Debug 下没有它，那么您可能需要手动添加它（右键单击工具栏，从上下文菜单中选择 Customize..）。

# tfs - 未找到 TFS 2012 自动构建文件

> ID：12201404
> 
> 赞同：0
> 
> 时间：2012-08-30T16:27:23.003
> 
> 标签：tfs, continuous-integration, visual-studio-2012, tfsbuild

这可能是一个预先存在的问题，我们也升级到 2012 只是巧合。

当我们的自动构建运行时，我们收到错误：

```
Exception Message: Could not find a part of the path 'ui-bg_highlight-soft_75_cccccc_1x100.png'. (type DirectoryNotFoundException)
Exception Stack Trace:    at System.IO.Directory.DeleteHelper(String fullPath, String userPath, Boolean recursive, Boolean throwOnTopLevelDirectoryNotFound)
   at System.IO.Directory.Delete(String fullPath, String userPath, Boolean recursive, Boolean checkHost)
   at Microsoft.TeamFoundation.Common.FileSpec.DeleteDirectory(String path, Boolean recursive)
   at Microsoft.TeamFoundation.Build.Workflow.Activities.DeleteDirectory.Execute(CodeActivityContext context)
   at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
   at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation). 
```

即使删除了该文件的所有出现（我到处找），它似乎仍然在寻找它而不是找到它。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:14:19.207

这似乎是因为构建位置是一个分支，然后被存档（移动到存档文件夹）

# android - Android 键盘输入按钮以保持键盘可见

> ID：12201406
> 
> 赞同：0
> 
> 时间：2012-08-30T16:27:24.897
> 
> 标签：android

我希望我的回车键完成一个动作*而不*隐藏键盘。目前，每次我输入内容并按下回车按钮时，EditText 输入都会被清除以接受下一个输入，但是随着键盘消失，我必须再次单击 EditText，以便键盘再次出现......

现在这是我的布局：

```
<EditText
    android:id="@+id/etCommand"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/commandHint"
    android:inputType="textNoSuggestions"
    android:imeOptions="actionSend" >
</EditText> 
```

和代码：

```
etCommand = (EditText) findViewById(R.id.etCommand);
etCommand.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_SEND) {
            sendCommand();
        }
        return false;
    }
}); 
```

# 编辑

正如 swayam 建议的那样，我必须返回`true`内部`onEditorAction`，以便操作系统认为该操作已处理并不管它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:30:15.377

试试这个代码片段：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:45:09.613

为 Enter 按键添加 EditText 的 KeyListener 并在任务完成后请求再次关注 edittext 将是解决方案

# c++ - 关于 sizeof 运算符的困惑

> ID：12201409
> 
> 赞同：1
> 
> 时间：2012-08-30T16:27:35.767
> 
> 标签：c++, arrays, macos, sizeof

我在 Mac OSX Lion 上使用 C++，并创建了以下代码：

```
float* floatArray = new float[10];

for(int i = 0; i < 10; i++)
{
    floatArray[i] = 0.0 ;
}

std::cout<< "Test size of a float " << sizeof(floatArray[0]) << std::endl;
// The value is 4 byte which is what I would expect.

std::cout<< "Test the size of the whole array" << sizeof(floatArray) <<std::endl;
// the value is 8\. I would have expected the value to be 40 bytes. 
```

我不明白什么？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T16:29:02.023

该表达式`sizeof(floatArray)`返回*指针*的大小，而不是它指向的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:32:25.950

在您的系统中，内存中指针的大小为 8 个字节。Sizeof() 运算符只查看内存中该变量的大小。所以它打印浮点指针的大小。

您可以在此处找到更多详细信息。 [如何找到“sizeof”（指向数组的指针）？](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:36:29.673

将其与此（实际上*是*一个数组）进行比较：

```
float floatArray[10] = {0.0};
std::cout<< "sizeof a float " << sizeof(floatArray[0]) << std::endl;
std::cout<< "sizeof the whole array " << sizeof(floatArray) << std::endl; 
```

然后，如果您需要使用动态大小或分配的数组，请考虑使用 std::vector 代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T16:30:55.703

您的第二个 sizeof(floatArray) 实际上是返回指针的大小，而不是数组的大小。看[这里](http://www.cplusplus.com/faq/sequences/arrays/sizeof-array/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T16:33:03.483

sizeof 运算符不知道指针指向什么以及有多少元素（除非你给它一个**array**，但这又不是一个指针）。所以它返回 sizeof (float *) - 因为你可能是 64 位的，所以指针的大小是 8 个字节长。

# php - 我的时间倒计时脚本在 Google Chrome 中运行良好，但在其他浏览器中打开时出现 Nan Nan

> ID：12201413
> 
> 赞同：-1
> 
> 时间：2012-08-30T16:28:02.163
> 
> 标签：php, javascript, jquery

```
<? 
include("commonfile.php");
$start = date("Y-m-d H:i:s");
$end = $_POST['date']." ".$_POST['time'];
if(isset($_POST['productid']) && $_POST['productid']!=""){
    $productid = $_POST['productid'];
    $expdata = getdata("SELECT expire_date,expire_time from tbl_listing_master WHERE listingid=".$productid." AND currentstatus=0");    
    $time_rs = mysql_fetch_array($expdata);
    $expdate = $time_rs[0];
    $exptime = $time_rs[1];
    $end = $expdate." ".$exptime;
}
$n = array("expdate" => $end); 
echo json_encode($n);  
?> 
```

这是我使用 [http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html) jQuery v1.6.0 的倒计时版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:57:26.943

问题是您的日期解析（我从您的 dup 问题的链接中获取了此代码）。

```
function updateCountdown(el, date, time, productId) {
    $.ajax({
      type: "POST",
      url: "../coding/fetch_time_forquery.php",
      dataType: "json",
      data: {date: date, time: time, productid: productId },
      success: function(data)
      {
        newYear = new Date (data.expdate);
         $(el).countdown({until:newYear} );
      }

    });
} 
```

您需要在这里解析日期：`newYear = new Date (data.expdate);`，但是从您的 php 返回的格式是`2012-08-31 2:33:35`.. 如果您只返回一个时间戳会更容易。

要在 PHP 中执行此操作，您需要将其转换`$end`为时间戳而不是字符串：

```
$n = array("expdate" => strtotime($end) . '000' ); // add milliseconds 
```

在js中：

```
newYear = new Date ( parseInt( data.expdate, 10 ) ); 
```

应该管用

# objective-c - 制作 MPMoviePlayerController 主视图

> ID：12201416
> 
> 赞同：0
> 
> 时间：2012-08-30T16:28:11.133
> 
> 标签：objective-c, mpmovieplayercontroller

我有一个水平滚动视图，例如 Springboard，每个页面上有 16 个按钮。当您单击一个按钮时，我只想看到播放视频的 MPMoviePlayerController 而没有其他内容，就像您在视频应用程序中观看电影一样。因此，我有以下代码：

```
- (void)button: (id) sender {
    NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"video" ofType:@"MOV"];
    NSURL *videoURL = [NSURL fileURLWithPath:moviePath];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlaybackComplete:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayerController];

    moviePlayerController.fullscreen = YES;

    [self.view addSubview:moviePlayerController.view];
    [moviePlayerController play];
}

- (void)moviePlaybackComplete:(NSNotification *)notification
{
    MPMoviePlayerController *moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:moviePlayerController];

    [moviePlayerController.view removeFromSuperview];
    [moviePlayerController release];
} 
```

不幸的是，我只能听到声音并且没有视频显示。有人可以帮我吗？

**更新：**我发现你必须制作一个框架。我使用了以下代码：

```
[moviePlayerController.view setFrame:CGRectMake(0, 0, 768, 1004)]; 
```

但它不是这样全屏的。即使我已将全屏属性设置为 YES。我可以看到，因为视图顶部没有视频控件，但视图底部没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:54:57.570

我找到了解决方案。您应该使用以下代码：

```
NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"1" ofType:@"MOV"];
NSURL *videoURL = [NSURL fileURLWithPath:moviePath];
MPMoviePlayerViewController *playerView = [[MPMoviePlayerViewController alloc] initWithContentURL:videoURL];

[self presentModalViewController:playerView animated:YES]; 
```

# jquery - 点击内点击移除

> ID：12201417
> 
> 赞同：1
> 
> 时间：2012-08-30T16:28:12.913
> 
> 标签：jquery, click, event-bubbling

所以我试图创建一个工具提示并想要它，以便在创建它时它会向正文添加一个单击事件，这样每当单击正文上的任何内容时，工具提示就会消失。从理论上讲，这会传播，因此如果用户单击链接，则工具提示将消失，用户将前往链接指向的任何地方。

我遇到的问题是由于某种原因以下不起作用。甚至在我单击任何位置之前，我都得到了“此处”，它几乎在创建工具提示后立即触发删除，因此不会出现任何工具提示。关于如何做到这一点的任何想法。

```
 $("a").click(function(event){
        event.preventDefault();
        $(document.body).click(function(){
            $('.tooltip').remove();
            console.log('here');
        })

        var text = $(this).attr('title');
        var tooltip = $('<div class="tooltip">' + text + '</div>');
        $(document.body).append(tooltip);
    }); 
```

这是一个 JS Fiddle： http: [//jsfiddle.net/fgRTa/](http://jsfiddle.net/fgRTa/)您应该先单击链接 2 以查看它的工作原理，否则如果您先执行链接 1，然后再执行链接 2，则主体上已经有 click 事件，所以它不会t 允许添加工具提示。从理论上讲，我希望该问题也消失，因此当我单击一次时，单击事件将被删除，但这是一个附带问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:32:42.330

这是因为当您将点击处理程序添加到正文时，当前点击并没有停止传播。

尝试使用`event.stopPropagation();`.

一个小提琴，供您考虑[http://jsfiddle.net/fgRTa/2/](http://jsfiddle.net/fgRTa/2/)

# grails - 链接到自身的 Grails 表

> ID：12201420
> 
> 赞同：2
> 
> 时间：2012-08-30T16:28:19.247
> 
> 标签：grails, one-to-many, many-to-one

我想创建一个链接到自身的 grails 域类。

这个相关的帖子提出了一个解决方案，但我无法让它工作：[Grails domain class relationship to itself](https://stackoverflow.com/questions/1787120/grails-domain-class-relationship-to-itself)

一方面，我不明白可比较的作用，并且需要添加一个 int compareTo(obj) 方法。

在我的代码中添加以下内容而不实现 Comparable 编译，但 grails 在运行时崩溃：

```
//NavMenu parent
SortedSet subItems
static hasMany = [subItems: NavMenu]
static belongsTo = [parent: NavMenu]
static constraints = { parent(nullable:true) } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:56:11.210

当您使用 时`SortedSet`，会在内部执行一个排序算法，但它需要一个排序标准。您需要实现该`Comparable`接口，因为这是为内部算法提供排序标准的标准方式。

如果您不需要特定的订单，您可以删除该`SortedSet subItems`行，从而避免实现`Comparable`接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:30:01.900

如果你不想使用 Comparable 接口，也许你应该使用 List 而不是 SortedSet。

使用列表，您可以按照添加的顺序保存对象，并能够像数组一样通过索引引用它们。

这是来自官方文档的示例：

```
class Author {
    List books

    static hasMany = [books: Book] 
} 
```

# asp.net-mvc - 如何将 SimpleMembershipProvider 设置为需要唯一的电子邮件？

> ID：12201423
> 
> 赞同：0
> 
> 时间：2012-08-30T16:28:34.220
> 
> 标签：asp.net-mvc, asp.net-membership

我使用 VS 2012 启动了一个新的 MVC 4 应用程序，我注意到它推荐使用 SimpleMembershipProvider。

我喜欢 WebSecurity 类的想法和所有优点（这很有帮助）。

我希望能够将 RequiresUniqueEmail 属性设置为 true[文档](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.requiresuniqueemail%28v=vs.99%29.aspx)没有关于如何完成的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:20:30.567

你能把属性添加`requiresUniqueEmail="true"`到

```
<membership>
  <providers>
    <add name="SimpleMembershipProvider" 
         type="whatever your assembly name is"
         ... 
         requiresUniqueEmail="true"/> 
```

在您的 web.config 中添加标签？这就是默认会员提供者的做法。我想简单版本会是一样的（除非该功能没有实现）。

# jquery - 如何使 position().left + 0 工作？

> ID：12201429
> 
> 赞同：2
> 
> 时间：2012-08-30T16:29:03.553
> 
> 标签：jquery

1.  为什么 if (//change b position) part write after (//show a list) part 不能工作，有一些错误？

2.  我怎样才能使它在 (.a-1).hover, (.b) 不移动并且在上次更改后仍然在同一个地方？+0 不能用？

[http://jsfiddle.net/sL8mK/](http://jsfiddle.net/sL8mK/)

jQuery

```
 //change b position
$(".a").hover(function(){
    var newleft = $(".b").position().left + 200;
    $(".b").css('left', newleft + 'px');
},function(){
    var newleft = $(".b").position().left - 200;
    $(".b").css('left', newleft + 'px');
});
$(".a-1").hover(function(){
    var newleft = $(".b").position().left + 0;
    $(".b").css('left', newleft + 'px');
},function(){
    var newleft = $(".b").position().left + 0;
    $(".b").css('left', newleft + 'px');
});

//show a list
$(".a").hover(function(){
    $(".a-1, .a-2").show();
},function(){
    $(".a-1, .a-2").hide();
});
$(".a-1").hover(function(){
    $(".a-1, .a-2").show();
},function(){
    $(".a-1, .a-2").hide();
});
$(".a-2").hover(function(){
    $(".a-1, .a-2").show();
},function(){
    $(".a-1, .a-2").hide();
}); 
```

html,css

```
<div class="a">a</div>
<div class="a-1">a-1</div>
<div class="a-2">a-2</div>
<div class="b">b</div>

.a{
position: absolute;
left: 100px;
top: 150px;
width: 105px;
background: red;
}
.a-1{
position: absolute;
left: 200px;
top: 150px;
width: 100px;
background: maroon;
display: none;
}
.a-2{
position: absolute;
left: 300px;
top: 150px;
width: 100px;
background: olive;
display: none;
}
.b{
position: absolute;
left: 200px;
top: 150px;
width: 100px;
background: blue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:49:41.143

我已经修改了你的代码 - [http://jsfiddle.net/ga5Um/1/](http://jsfiddle.net/ga5Um/1/) （添加了一个容器 div）

这是适合您的解决方案吗？

# c# - 更改数组 ToLower() 中的文件名时，是否需要在将文件名更改为较低后重新填充数组？

> ID：12201434
> 
> 赞同：1
> 
> 时间：2012-08-30T16:29:16.647
> 
> 标签：c#, arrays, path

```
if (fbFolderBrowser.ShowDialog() == DialogResult.OK)
            {
                LastSelectedFolder = fbFolderBrowser.SelectedPath;

                originalFiles = Directory.GetFiles(fbFolderBrowser.SelectedPath).Where(file => !file.EndsWith(".db")).ToArray();

                //lower casing the extensions here.
                foreach (string file in originalFiles)
                {
                    File.Move(file, Path.ChangeExtension(file, Path.GetExtension(file).ToLower()));
                }

                //after im done changing the files to lower case, do I need to repopulate the array with the lowered case file names?
                originalFiles = Directory.GetFiles(fbFolderBrowser.SelectedPath).Where(file => !file.EndsWith(".db")).ToArray();
            } 
```

在我浏览文件夹中的每个文件并确保扩展名是小写之后，我是否需要像上面那样用小写名称重新填充数组（在本例中为 originalFiles）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:33:30.963

() 方法生成的文件扩展名`GetExtension`在 .Net 中区分大小写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:33:32.983

使用适当的重载，[`EndsWith`](http://msdn.microsoft.com/en-us/library/ms131430.aspx)您可以停止关心大小写。

```
// for example
file.EndsWith(".db", StringComparison.OrdinalIgnoreCase) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:35:57.257

如果您的意思是“将在此处更改原始字符串对象”：

```
File.Move(file, Path.ChangeExtension(file, Path.GetExtension(file).ToLower())); 
```

那么答案是否定的，`originalFiles`数组中的每一项都将保持不变。

# javascript - 如何在 windows phone 7 浏览器中通过 javascript 打开新窗口或标签

> ID：12201436
> 
> 赞同：12
> 
> 时间：2012-08-30T16:29:18.993
> 
> 标签：javascript, windows-phone-7, windows-phone

是否可以通过`javascript`在`Windows Phone 7`浏览器中打开新窗口或标签？

`window.open`似乎不支持也不支持`target='_blank'`。

我在这里错过了什么吗？这个基本功能在 iphone 和 android 上运行得很好。关于如何在 Windows Phone 7 中使用它的任何想法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-04T14:37:50.050

在 Windows Phone 7 上，这无法以编程方式实现。这一切都在用户手中。

引用[微软员工](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/51745797-0d3f-4792-8904-80fa7505799c)的话：

> “用户可以通过点击并按住链接以获取上下文菜单来在新选项卡中打开链接，但会忽略定位新窗口的锚点或脚本请求。
> 
> 有几个原因：
> 
> *   不支持跨窗口通信。
> *   Windows Phone 只有一个浏览器实例，因此新的“窗口”必须以选项卡的形式打开。
> *   浏览器体验是全屏的，因此用户没有良好的视觉提示，除非他们明确请求，否则他们已移动到新选项卡。
> *   在新选项卡中导航“返回”会退出浏览器，如果用户不知道创建了新选项卡，这会使他们感到困惑。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T04:15:00.683

如果您尝试为 in-ap 浏览器控制添加此功能，我可以建议您一种方法。

您必须在浏览器控件能够成功加载页面的每个网页上注入一个 java 脚本。在 java 脚本中，使用 window.extern.notify 调用`ScriptNotify`后面代码中的函数。在检测到适当的消息时，创建一个新的浏览器控件实例并将其添加到数组或列表中。因此，您可以模拟应用内浏览器控制的新选项卡功能。

要注入的JS代码可能是这样的`String NEW_TAB_FUNCTION = "window.open = function(__msg){window.external.notify('addnewtab');};";`

可以使用哪个注入`browser.InvokeScript("eval", NEW_TAB_FUNCTION);`

在 ScriptNotify 检查`addnewtab`(keep `IsScriptEnabled = True`)

```
 void WebBrowser_ScriptNotify(object sender, NotifyEventArgs e)
    {
        if (e.Value == "addnewtab")
        {   
            //do work here
        }
    } 
```

请注意，我已经用每次在新网页上注入的函数覆盖了 JS 中的 window.open 函数，以便收到用户输入的通知。

另请注意，这仅适用于 WebBrowser Control 而不是外部浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T19:57:09.340

我的解决方法很简单：

```
window.open 
```

如果失败则返回 null，所以在这种情况下，我在同一个窗口中打开它：

```
var win = window.open(href, '_blank');
    if(!win || win==null){
        window.location.href = href;
    }else{
        win.focus();     
    } 
```

无论如何，这是一个后备的好习惯......

# r - R 函数 fit() 和 predict() 之间有区别吗？

> ID：12201439
> 
> 赞同：54
> 
> 时间：2012-08-30T16:29:28.213
> 
> 标签：r

`fitted()`函数和函数有区别`predict()`吗？我注意到来自 lme4 的混合模型可以使用`fitted()`但不能使用`predict()`.

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-30T16:32:56.947

就在这里。如果存在将线性预测变量与响应的预期值相关联的[链接函数](http://en.wikipedia.org/wiki/Generalized_linear_model#Link_function)（例如泊松回归的 log 或逻辑回归的 logit），则在应用链接函数的倒数*之前*`predict`返回拟合值（将数据返回到与响应变量相同的比例），并在应用*后*显示。*`fitted`*

 **例如：

```
x = rnorm(10)
y = rpois(10, exp(x))
m = glm(y ~ x, family="poisson")

print(fitted(m))
#         1         2         3         4         5         6         7         8 
# 0.3668989 0.6083009 0.4677463 0.8685777 0.8047078 0.6116263 0.5688551 0.4909217 
#         9        10 
# 0.5583372 0.6540281 
print(predict(m))
#          1          2          3          4          5          6          7 
# -1.0026690 -0.4970857 -0.7598292 -0.1408982 -0.2172761 -0.4916338 -0.5641295 
#          8          9         10 
# -0.7114706 -0.5827923 -0.4246050 
print(all.equal(log(fitted(m)), predict(m)))
# [1] TRUE 
```

这确实意味着对于由线性回归 ( ) 创建的模型，和`lm`之间没有区别。`fitted``predict`

实际上，这意味着如果您想将拟合与原始数据进行比较，您应该使用`fitted`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-30T16:55:19.883

该`fitted`函数返回与用于拟合模型的数据关联的 y-hat 值。该`predict`函数返回一组新预测变量的预测。如果您没有指定一组新的预测变量，那么默认情况下它将使用原始数据，给出与`fitted`某些模型相同的结果，但如果您想预测一组新的值，那么您需要`predict`. 该`predict`函数通常还具有返回哪种类型的预测、线性预测变量、转换为响应尺度的预测、最可能的类别、模型中每个项的贡献等选项。**

# c++ - 为什么我机器上的 hash_map 和 unordered_map 非常慢？

> ID：12201441
> 
> 赞同：4
> 
> 时间：2012-08-30T16:29:51.567
> 
> 标签：c++, map, hashmap, unordered-map

我用这段代码测试了它们（在 Visual Studio 2010 sp1 上）：

```
#include <ctime>
#include <iostream>
#include <map>
#include <unordered_map>
#include <hash_map>

int main()
{ 
    clock_t time;
    int LOOP = (1 << 16);
    std::map<int, int> my_map;
    std::unordered_map<int, int> map_unordered_map;
    std::hash_map<int, int> my_hash_map;

    time = clock();
    for (int i = 0; i != LOOP; ++i)
    {
        my_map[i] = i;
    }
    std::cout << "map: " << ((double)(clock() - time) / CLOCKS_PER_SEC) << std::endl;

    time = clock();
    for (int i = 0; i != LOOP; ++i)
    {
        map_unordered_map[i] = i;
    }
    std::cout << "unordered_map: " << ((double)(clock() - time) / CLOCKS_PER_SEC) << std::endl;

    time = clock();
    for (int i = 0; i != LOOP; ++i)
    {
        my_hash_map[i] = i;
    }
    std::cout << "hash_map: " << ((double)(clock() - time) / CLOCKS_PER_SEC) << std::endl;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

结果很奇怪：

在 DEBUG: map: 0.289 unordered_map: 10.738 hash_map: 10.58 按任意键继续。. .

在 RELEASE: map: 0.101 unordered_map: 0.463 hash_map: 0.429 按任意键继续。. .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:46:17.197

1.  您只在每个地图中插入 65536 个项目 - 不足以让 O(log N) 和 O(1) 之间的差异意味着很多。
2.  您*只是*插入项目，之后不进行任何搜索。
3.  您的键都是按递增顺序排列的连续整数 - 不适合任何地图的通常使用方式。

底线：这不太可能告诉您有关数据结构的很多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:15:34.010

这是算法的摊销与最坏情况成本的示例。

std::map 使用具有 O(logN) 插入复杂度的红黑树。
std::hash_map 使用具有 O(1) 摊销插入复杂度的哈希表。

但是，当必须调整表大小并重新散列表时，散列表的最坏情况复杂度为 O(N)。

在您的情况下，您最终会进行大量重新散列，因此哈希表插入达到了最坏的情况，以至于树插入变得更快 - O(N) > O(logN)。

如果您使用足够大的表初始化 hash_map，那么哈希表将永远不会遇到最坏的情况，并且它会比树更快 - O(1) < O(logN)。

# ssl - 更新 SSL 根 CA 证书 - 野外的客户端程序需要更新吗？

> ID：12201443
> 
> 赞同：0
> 
> 时间：2012-08-30T16:29:55.663
> 
> 标签：ssl, certificate, ssl-certificate, x509

这是我的情况：

*   我有一个要分发的客户端应用程序——我们称之为 MyClient。
*   MyClient 与我们的一台服务器进行一些 SSL 通信。
*   MyClient 中嵌入了根 CA，因此它可以正确验证服务器证书。

现在，假设几年过去了，根 CA 到期并被更新。

这是否意味着我需要在野外修补 MyClient ？

换句话说，更改证书上的有效期是否会导致它不再匹配 MyClient 中内置的根 CA？

**附录：**假设我写我的客户不验证证书的日期（但其他一切）。那么，当根CA过期重新签发时，还需要打补丁吗？除了日期之外，参与验证的其他部分是否会发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:16:11.347

如果您的客户端确保 SSL 服务器证书由特定的根 CA 颁发，并且该根 CA 包含在客户端中，那么是的，您需要修补客户端以替换根 CA 证书。

很少有好的方法可以做到这一点。往往会发生的是根 CA 证书的寿命很长，并且使用寿命较短的中间 CA 来颁发 SSL 证书，但听起来这里不是这种情况。

从好的方面来看，我不知道旧的根 CA 证书使用了什么算法，但希望新的根 CA 证书有望使用更大的密钥（2048 位 RSA，而不是 1024 位或 512 位）和更好的散列算法（SHA1 或更好，而不是 MD5），因此这可能是提高安全性的好机会。

# cuda - 将推力::迭代器与原始指针相互转换

> ID：12201446
> 
> 赞同：3
> 
> 时间：2012-08-30T16:30:05.037
> 
> 标签：cuda, thrust

我想使用 Thrust 库来计算 CUDA 中设备数组的前缀和。我的数组分配有`cudaMalloc()`. 我的要求如下：

```
main()  
{  
     Launch kernel 1 on data allocated through cudaMalloc()  
     // This kernel will poplulate some data d.  
     Use thrust to calculate prefix sum of d.  
     Launch kernel 2 on prefix sum.  
} 
```

我想在我的内核之间的某个地方使用 Thrust，所以我需要将指针转换为设备迭代器并返回的方法。下面的代码有什么问题？

```
int main()                                                        
{                                                                 
    int *a;                                                   
    cudaMalloc((void**)&a,N*sizeof(int));   
    thrust::device_ptr<int> d=thrust::device_pointer_cast(a);  
    thrust::device_vector<int> v(N);                    
    thrust::exclusive_scan(a,a+N,v);                          
    return 0;                                                  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T13:18:36.110

您最新编辑的完整工作示例如下所示：

```
#include <thrust/device_ptr.h>
#include <thrust/device_vector.h>
#include <thrust/scan.h>
#include <thrust/fill.h>
#include <thrust/copy.h>
#include <cstdio>

int main()                                                        
{                                                                 
    const int N = 16;
    int * a;
    cudaMalloc((void**)&a, N*sizeof(int));   
    thrust::device_ptr<int> d = thrust::device_pointer_cast(a);  
    thrust::fill(d, d+N, 2);
    thrust::device_vector<int> v(N);                    
    thrust::exclusive_scan(d, d+N, v.begin());

    int v_[N];
    thrust::copy(v.begin(), v.end(), v_);
    for(int i=0; i<N; i++)
        printf("%d %d\n", i, v_[i]);     

    return 0;                                                  
} 
```

你做错的事情：

1.  `N`未在任何地方定义
2.  将原始设备指针`a`而不是`device_ptr` `d`作为输入迭代器传递给`exclusive_scan`
3.  传递`device_vector` `v`to`exclusive_scan`而不是适当的迭代器`v.begin()`

对细节的关注是完成这项工作所缺乏的。它的工作原理：

```
$ nvcc -arch=sm_12 -o thrust_kivekset thrust_kivekset.cu 
$ ./thrust_kivekset

0 0
1 2
2 4
3 6
4 8
5 10
6 12
7 14
8 16
9 18
10 20
11 22
12 24
13 26
14 28
15 30 
```

* * *

编辑：

`thrust::device_vector.data()`将返回`thrust::device_ptr`指向向量第一个元素的 a。`thrust::device_ptr.get()`将返回一个原始设备指针。所以

```
cudaMemcpy(v_, v.data().get(), N*sizeof(int), cudaMemcpyDeviceToHost); 
```

和

```
thrust::copy(v, v+N, v_); 
```

在这个例子中，它们在功能上是等效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T21:19:43.047

将获得的原始指针转换`cudaMalloc()`为`thrust::device_ptr`using `thrust::device_pointer_cast`。这是 Thrust 文档中的一个示例：

```
#include <thrust/device_ptr.h>
#include <thrust/fill.h>
#include <cuda.h>

int main(void)
{
    size_t N = 10;

    // obtain raw pointer to device memory
    int * raw_ptr;
    cudaMalloc((void **) &raw_ptr, N * sizeof(int));

    // wrap raw pointer with a device_ptr 
    thrust::device_ptr<int> dev_ptr = thrust::device_pointer_cast(raw_ptr);

    // use device_ptr in Thrust algorithms
    thrust::fill(dev_ptr, dev_ptr + N, (int) 0);    

    // access device memory transparently through device_ptr
    dev_ptr[0] = 1;

    // free memory
    cudaFree(raw_ptr);

    return 0;
} 
```

使用`thrust::inclusive_scan`或`thrust::exclusive_scan`计算前缀总和。

[http://code.google.com/p/thrust/wiki/QuickStartGuide#Prefix-Sums](http://code.google.com/p/thrust/wiki/QuickStartGuide#Prefix-Sums)

# javascript - 获取多维 JSON 变量的行数

> ID：12201447
> 
> 赞同：3
> 
> 时间：2012-08-30T16:30:07.437
> 
> 标签：javascript, arrays, json

我有一个 PHP 函数，它返回格式为多级 JSON 对象

```
var data = {
  1 : { 
    1: { Object },
    2: { Object },
     ...,
     ...
  }, 
  2: {
    1: { Object },
    2: { Object },
    ...,
    ...
  }
} 
```

我需要获取`data`初始化 for 循环最大值的长度。我的意思是第一级条目的计数。

`data[1].length`返回 22，并`data[2].length`通过`console.log`打印输出返回 23。这是预期的，但`data.length`返回未定义。

有没有比这更好的方法

```
var count = 0;

for (var i=1; i< Number.MAX_VALUE; i++){
  if (typeof data[i] != 'undefined')
    count = i;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:49:11.933

怎么样

```
Object.keys(data).length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:34:17.540

如果可以控制 JSON 格式，嵌套数组似乎是更好的选择。

如果没有，你可以运行类似的东西

```
var length = 0;
for (var i in data) {
    if (isFinite(i) && i > length)
        length = i;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:35:16.713

您可以计算循环中的条目数，如下所示：

```
var length = 0;
for (var key in data) {
  if (data.hasOwnProperty(key)) {
    length++;
  }
} 
```

但是，如果您可以控制返回的数据，则返回数组而不是对象可能会更容易，因为数组已经具有您想要的长度属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:35:06.743

为什么不这样做而不是分配数字属性？数组将具有您希望的长度属性：

```
var data = [
  [ 
    { Object },
    { Object },
     ...,
     ...
  ], 
  [
    { Object },
    { Object },
    ...,
    ...
  ]
] 
```

# c# - WebRequest.Timeout 未按预期工作

> ID：12201448
> 
> 赞同：1
> 
> 时间：2012-08-30T16:30:10.630
> 
> 标签：c#, asp.net

```
var strURL = "http://999.999.999.999"; // invalid IP-address
System.Net.WebResponse objResponse = default(System.Net.WebResponse);
System.Net.WebRequest objRequest = default(System.Net.WebRequest);

objRequest = System.Net.HttpWebRequest.Create(strURL);
objRequest.Timeout = 100;
objResponse = objRequest.GetResponse();

System.IO.StreamReader sr = new System.IO.StreamReader(objResponse.GetResponseStream());
result = sr.ReadToEnd(); 
```

我通过firebug看到的超时是3000毫秒……不应该是这样的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T03:17:47.537

您的问题在于无效 IP 地址的预请求解析。所有正常请求正常超时。根据 MSDN：

> 域名系统 (DNS) 查询最多可能需要 15 秒才能返回或超时。如果您的请求包含需要解析的主机名，并且您将 Timeout 设置为小于 15 秒的值，则可能需要 15 秒或更长时间才能引发 WebException 以指示您的请求超时。

诚然，'999.999.999.999' 不需要 DNS 查找，但 Request 对象一定会感到困惑并需要一段时间来解决它。如果 IP 更改为有效 URL：

```
var strURL = "http://www.myjunkinvalidurl.com"; 
```

或有效的、正常运行的 IP：

```
var strURL = "http://134.170.188.221"; // microsoft.com 
```

或有效的、无法运行的 IP：

```
var strURL = "http://123.123.123.123"; 
```

所有都在大约 115 毫秒内返回（超时时间为 100 毫秒），所以 WebRequest 的无效 IP 地址解析肯定存在问题，对我来说大约在 2300 毫秒内返回。保持IP有效，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T15:21:18.387

超时属性将设置为毫秒。通过设置为“100”，您的超时设置为 0.1 秒（100 毫秒）。尝试设置为更合理的值，例如 30 秒（30,000 毫秒），或者只是不明确设置并保留默认的 100,000 毫秒。

[来自 MSDN](https://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-30T16:40:42.237

根据[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)请求超时前等待的毫秒数。默认值为 100,000 毫秒（100 秒）。

# java - Java-Hibernate 从值列表到多维双精度数组

> ID：12201455
> 
> 赞同：0
> 
> 时间：2012-08-30T16:30:20.067
> 
> 标签：java, hibernate, matlab, dynamic-arrays

使用下面的代码片段，我试图从从 Hibernate 返回的 List 中构建一个多维数组 double[][]：

`data`列表到达，尝试返回一个`makeSet`数组。最佳的，是我不知道我应该有多少阵列。所以我尝试调用，但除非我在代码中创建一个，否则代码不能很好地迭代。`makeSet``[][] double``makeInnerSet``new double[][] ix, iy`

**有没有办法知道数组 [][] 的列？**

**也许还有另一种解决问题的方法？**

**必须取回 Hibernate 的标量值并使它们成为任何大小的 double[][]。有什么帮助吗？**

```
List data = qry.list();
double[][] inputData = makeSet(data);

public double[] makeInnerSet(List data, double[] ix, int col ){
    int i = 0;
    Iterator<?> itr1 = data.listIterator();
    while (itr1.hasNext()) {
        Object[] result = (Object[]) itr1.next();
        if (result[col] != null) {
            double res1 = (Double) result[col];
            ix[i] = res1;
        }else{
            ix[i] = 0;
        }
        i++;
    }
    return ix;
}
public double[][] makeSet(List data){
    Iterator<?> itr1 = data.listIterator();
    double[] ix = new double[data.size()];
    double[] iy = new double[data.size()];
    double[][] x = { makeInnerSet(data, iy,0), makeInnerSet(data, ix,1) };  
    return x;
} 
```

**编辑** 制作代码：

```
double[][] x = { 
            makeInnerSet(data, new double[data.size()],0), 
            makeInnerSet(data, new double[data.size()],1) 
            }; 
```

一半找到我的答案......几秒钟后......我现在当然不需要ix，iy。但是如何获取 List 中的列数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:27:43.597

假设列表中的所有数组都具有相同的大小（因为否则 makeinnerset 也会爆炸）：

```
int columns = ((Object[])data.first()).size() 
```

代码获取第一个数组并获取它的大小，所有数组都应该相同。

# mysql - MySQL Mac OS X 问题

> ID：12201458
> 
> 赞同：1
> 
> 时间：2012-08-30T16:30:47.923
> 
> 标签：mysql

尝试在我的 MacBook Air 上运行 MySQL 服务器时发生了一些奇怪的事情。首先使用 brew install mysql 安装 MySQL。安装成功，没有任何错误。然后问题开始出现......首先我必须使用以下命令来创建空表： cd /usr/local sudo mysql_install_db --user=mysql --ldata=/var/db/mysql

现在我试图启动服务器服务本身，但另一个错误是不允许我这样做：ivankutsarov$ sudo mysql.server start Password: Starting MySQL。错误！服务器退出而不更新 PID 文件 (/usr/local/var/mysql/Ivans-MacBook-Air.local.pid)。

虽然导航到提到的文件夹我看不到 mysql 文件夹，但我也无法在我的 /usr/local/bin 目录中看到它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:49:54.450

伙计们，我发现了问题。安装 mysql 后我忘记运行这两个命令：

首先，运行：**brew help mysql**

阅读命令执行后显示的信息，您会在前 2 行中注意到以下命令，这些命令是启动服务器所必需的！

1.

**未设置 TMPDIR**

2.

**mysql_install_db --verbose --user= `whoami`--basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T09:15:47.197

一天前我遇到了类似的问题。mysql 运行良好，直到出现意外的 PID 文件错误。我尝试了一切来修复安装，替换了十几个文件并尝试了许多不同的设置。

最终起作用的是通过 dmg 包全新安装 mysql，并将我的数据和模式迁移到此安装（使用 mysql 工作台以节省时间），然后卸载通过 brew 安装的版本。

[https://dev.mysql.com/downloads/file/?id=466265](https://dev.mysql.com/downloads/file/?id=466265)

# r - 加载 R 对象并使用 rscript 创建图形

> ID：12201465
> 
> 赞同：1
> 
> 时间：2012-08-30T16:31:06.700
> 
> 标签：r

我一次加载`.RData`一个目录中的所有文件。根据`.RData`文件中的对象，我想创建图表。但是该`print`语句返回`NULL`，所以我的赋值语句`x`不起作用。我究竟做错了什么？

```
for (i in dir("c:\\data", pattern = "^data"))
{
    tmpenv <- new.env()
    load(i, envir=tmpenv)

    for (y in ls(envir=tmpenv))
    {
        x <- tmpenv$y
        print(head(x))
    }
} 
```

# perl - 在 Perl 中的逗号插值数组的最后一个元素之前添加“和”

> ID：12201472
> 
> 赞同：4
> 
> 时间：2012-08-30T16:31:40.960
> 
> 标签：perl

我想创建一个向元素添加逗号并在最后一个元素之前添加“和”的子例程，例如，使“12345”变为“1、2、3、4 和 5”。我知道如何添加逗号，但问题是我得到的结果是“1、2、3、4 和 5”，我不知道如何去掉最后一个逗号。

```
sub commas {
  my @with_commas;
  foreach (@_) {
    push (@with_commas, ($_, ", ")); #up to here it's fine
    }
    splice @with_commas, -2, 1, ("and ", $_[-1]);
    @with_commas;
  } 
```

正如您可能知道的那样，我正在尝试删除新数组中的最后一个元素（@with_commas），因为它附加了逗号，并添加了旧数组中的最后一个元素（@_，传递给子例程来自主程序，没有添加逗号）。

当我运行它时，结果是，例如，“1、2、3、4 和 5”——最后是逗号。那个逗号是从哪里来的？只有@with_commas 应该得到逗号。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T16:40:42.063

```
sub format_list {
   return "" if !@_;
   my $last = pop(@_);
   return $last if !@_;
   return join(', ', @_) . " and " . $last;
}

print format_list(@list), "\n"; 
```

与大多数其他答案不同，这也处理只有一个元素的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:39:08.200

您可以使用[`join`](http://perldoc.perl.org/functions/join.html)和修改最后一个元素以包含`and`：

```
my @list = 1 .. 5;
$list[-1] = "and $list[-1]" if $#list;
print join ', ', @list; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T20:43:21.467

有一个 CPAN 模块，[Lingua::Conjunction](https://metacpan.org/module/Lingua%3a%3aConjunction)。我自己使用它，并推荐它而不是滚动您自己的解决方案。使用语法非常简单：

```
conjunction(@list); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T16:35:43.107

```
#!/usr/bin/perl

use warnings;
use strict;

sub commas {
  return ""    if @_ == 0;
  return $_[0] if @_ == 1;
  my $last = pop @_; 
  my $rest = join (", ", @_);
  return $rest.", and ".$last;
}

my @a = (1,2,3,4,5);
print commas(@a), "\n"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T16:36:08.357

添加逗号，然后添加“和”：

```
use v5.10;

my $string = join ', ', 1 .. 5;

substr 
    $string, 
    rindex( $string, ', ' ) + 2,
    0,
    'and '
    ;

say $string; 
```

因此，在您有两个以上元素的情况下进行操作：

```
use v5.10;

my @array = 1..5;
my $string = do {
    if( @array == 1 ) {
        @array[0];
        }
    elsif( @array == 2 ) {
        join ' and ', @array
        }
    elsif( @array > 2 ) {   
        my $string = join ', ', @array;

        my $commas = $string =~ tr/,//;

        substr 
            $string, 
            rindex( $string, ', ' ) + 2,
            0,
            'and '
            ;

        $string;
        }
    };      

say $string; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T16:48:01.220

只是本着 TIMTOWTDI 的精神（尽管坦率地说，@perreal 的答案在可读性方面更好）：

```
sub commas {
    my $last_index = $#_;
    my @with_commas = map { (($_==$last_index) ? "and " : "") . $_[$_] }
                          0 .. $last_index;
    print join("," @with_commas)
} 
```

这有点类似于 Alan 的回答（更复杂/复杂），但与之相比的好处是，如果您需要在除最后一个元素之外的任何 OTHER 元素中添加“和”，它会起作用；只有当您知道确切的偏移量（例如最后一个元素）时，艾伦才有效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-12T16:04:47.190

小提示

```
for( 1 .. 10 ) {
     print ;
     $_ == 10 ? print '' : ($_ != 9 ? print ', ' : print ' and ');
} 
```

# vtk - 在 vtk 中创建合成相机并以交互方式操作内部参数和外部参数

> ID：12201473
> 
> 赞同：1
> 
> 时间：2012-08-30T16:31:42.083
> 
> 标签：vtk

我想以交互方式渲染场景。已经提供了控件，因此您可以使用鼠标定位相机，但您永远不知道确切的值。

我还想操纵内部相机值，例如焦距。

在外部我想设置相机的平移和旋转。

我想手动给出所有值。任何人都可以帮助指出这样的演示或代码片段来做到这一点。最好在python中。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:53:53.393

您可以使用 renderer->GetActiveCamera() 从渲染器获取相机。然后你可以使用类函数来操作它：[http ://www.vtk.org/doc/nightly/html/classvtkCamera.html](http://www.vtk.org/doc/nightly/html/classvtkCamera.html)

这是一个简单的 Python 示例：[http ://www.vtk.org/Wiki/VTK/Examples/Python/Camera](http://www.vtk.org/Wiki/VTK/Examples/Python/Camera)

# backbone.js - 如何通过“双重”动作触发两个事件？

> ID：12201476
> 
> 赞同：1
> 
> 时间：2012-08-30T16:31:49.390
> 
> 标签：backbone.js

我有一个`Foo`带有输入字段的视图和一个`Bar`带有按钮的包装视图。

当我在输入中写一些东西然后按下按钮时，应该触发 Foo 模型上的“更改”事件，然后触发 Bar 上的“单击”按钮，但只有第一个发生。有没有办法触发两者，最好是按正确的顺序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:19:47.207

嗯，我有点糊涂了。如果您不使用任何主干插件，则工作流程会有所不同。

如果你在屏幕上按下某个东西，事件就会发生在视图中，而不是模型中。您必须监听该事件并相应地更新模型。如果在模型中设置新值，`change`模型事件将会发生。

说，你有一个视图`Foo`，它是 subview`Bar`和 model `Boo`。两个视图都使用相同的模型对象。

鉴于`Bar`，

```
events: {
   'click .button': 'onButtonClicked';
}

onButtonClicked: function () {
   var value = this.$el('.input').val();
   this.model.set({ someValue: value});
} 
```

在`Foo`视图中，可以监听模型变化

```
initialize: function () {
  this.model.on('change:someValue', this.onSomeValueChanged);
} 
```

在`this.onSomeValueChanged`你可以做，你喜欢什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:07:03.913

重申并确认您的问题/设置。根据您的问题，这是您的设置。你想改变`Foo.model`THEN 触发`click`Bar 上的事件。

```
<div id="Bar">
    <div id="Foo">
        <input type="text">
    </div>
    <button id="barButton">Update</button>
</div> 
```

这是一个有点奇怪的设置。@alexanderb 以我对整个问题的看法的方式说明了这一点，但我会解释在你的场景中我会做什么，假设你知道一些我不知道的情况！:-)

如果您希望在`change`Foo.model 上触发，然后在 Bar 按钮上触发 click 事件，您只需从 Foo 视图手动触发按钮点击即可。为此，您可以使用以下几种方法之一。第一种是直接触发你的父（Bar）视图的事件。

```
// When you create your Foo subview, you pass in the parent view so you can access it
var foo = new Foo({
    'parent': this // this = the barView assuming you're creating FooView inside BarView
});

// In Foo after you set your model attribute, you access the parentView
this.options.parent.$el.find('#barButton').click();  // Manually trigger the click event

    // or

this.options.parent.onButtonClick() // Manually run the event handler bypassing the event 
```

这满足了您在您提供的 DOM 上下文中让更改事件后跟按钮单击事件的请求。（不知道为什么在这种情况下，但我可以想象一些可能需要类似的情况。）

第二种方法是使用事件聚合器模式，它允许您的视图相互发送和接收事件。在这种情况下，发生的是您的 Foo 视图，在更新模型后触发了一个由您的父 Bar 视图侦听的事件，在该事件上它执行一些处理程序。

您可以在此处阅读有关 Backbone 中的事件聚合器模式的更多信息： [事件聚合器说明](https://stackoverflow.com/questions/11926707/display-selected-model-from-sidebar-in-information-bar/11926812#11926812)

老实说，我真的认为亚历山大的答案是这种情况下最好的答案，除非我们对您的特殊设置有更多不了解的地方。但是，我希望您可以查看和比较这两者，并了解在特定环境下何时以及为什么一种设置可能是合适的。

# django - 在 django 中使用列表填充模型形式的外键

> ID：12201478
> 
> 赞同：0
> 
> 时间：2012-08-30T16:31:58.197
> 
> 标签：django, django-models, django-forms, django-templates

我正在尝试使用列表限制我的模型形式外键实例：

这是我的模型：

```
class Voicemail(models.Model):
    internalline = models.ForeignKey(InternalLine)
    person = models.ForeignKey(Person) 
```

然后在相应模型形式的 init 方法中，我有

```
class VoicemailForm(ModelForm):
 def __init__(self, *args, **kwargs):
  ....
  ....
 # self.fields['internalline'].queryset = self.person.getPersonLines()  # this throws error in template.
   self.fields['internalline'].queryset = self.person.line.all()

   print(self.person.getPersonLines())
   print(self.person.line.all()) 
```

这两个打印打印相同的输出：

```
[<InternalLine: 1111>, <InternalLine: 5555>]
[<InternalLine: 1111>, <InternalLine: 5555>] 
```

在 getPersonLines 中，我做了一些额外的逻辑并返回一个行列表：

```
def getPersonLines(self):
    lines = []
    for line in self.line.order_by('extension'):
        lines.append(line)
    for phone in self.phonesst_set.all():
        for line in phone.line.order_by('extension'):
            if line not in lines:               
                lines.append(line)   

    return lines 
```

现在，当我尝试在模板中渲染时，如果我使用 getPersonLines 返回的列表，我会得到错误，

```
Caught AttributeError while rendering: 'list' object has no attribute 'all' 
```

但是，如果我使用 self.person.line.all(). 填充查询集，同样的事情会起作用。

尝试使用列表填充我的查询集时，我是否遗漏了什么？

提前致谢！！

**更新**

这是堆栈跟踪

```
self.fields['internalline'].choices = self.person.getPersonLines()  

Traceback (most recent call last):
File "<console>", line 1, in <module>
File "C:\Python26\lib\site-packages\django\utils\encoding.py", line 27, in __str__
    return self.__unicode__().encode('utf-8')
File "C:\Python26\lib\site-packages\django\forms\forms.py", line 95, in __unicode__
    return self.as_table()
File "C:\Python26\lib\site-packages\django\forms\forms.py", line 217, in as_table
    errors_on_separate_row = False)
File "C:\Python26\lib\site-packages\django\forms\forms.py", line 180, in _html_output
   'field': unicode(bf),
File "C:\Python26\lib\site-packages\django\forms\forms.py", line 408, in __unicode__
   return self.as_widget()
File "C:\Python26\lib\site-packages\django\forms\forms.py", line 439, in as_widget
   return widget.render(name, self.value(), attrs=attrs)
File "C:\Python26\lib\site-packages\django\forms\widgets.py", line 516, in render
   options = self.render_options(choices, [value])
File "C:\Python26\lib\site-packages\django\forms\widgets.py", line 533, in render_options
for option_value, option_label in chain(self.choices, choices):
TypeError: 'InternalLine' object is not iterable 
```

**更新 2：**

这是整个`__init__`方法

```
class VoicemailForm(ModelForm):

def __init__(self, *args, **kwargs):
   try: 
        self.person = kwargs.pop('person', None)
        super(VoicemailForm, self).__init__(*args, **kwargs)
        for field in self.fields:
            self.fields[field].widget.attrs['class'] = 'required_field'

        print(self.person.getPersonLines())
        print(self.person.line.all())
        if self.person:
            self.fields['internalline'].choices = self.person.getPersonLines()  
            #self.fields['internalline'].queryset = self.person.line.all()

   except Exception as e:
       print("Error overwriting __init__ of VoicemailForm")
       print(e) 
```

这就是我如何称呼我的表格

```
voicemail = VoicemailForm(person=person, prefix='voicemail') 
```

**更新 3** 我尝试创建一个 django 表单，如下所示：

```
class test(forms.Form):
 line = forms.ChoiceField()
 def __init__(self, *args, **kwargs):
        super(test, self).__init__(*args, **kwargs)
        self.fields['line'].choices=person.getPersonLines() 
```

但我继续得到同样的错误 `for option_value, option_label in chain(self.choices, choices): TypeError: 'InternalLineSST' object is not iterable`

然后我厌倦了这样的事情：

```
test = [1,2,3]
class myform(forms.Form):
    line = forms.ChoiceField()
    def __init__(self, *args, **kwargs):
        super(myform, self).__init__(*args, **kwargs)
        self.fields['line'].choices = test

>>> form = myform()
>>>print(form) 
```

which gives me a similar error

```
File "C:\Python26\lib\site-packages\django\forms\forms.py", line 439, in as_widget
 return widget.render(name, self.value(), attrs=attrs)
File "C:\Python26\lib\site-packages\django\forms\widgets.py", line 516, in render
 options = self.render_options(choices, [value])
File "C:\Python26\lib\site-packages\django\forms\widgets.py", line 533,in render_options
for option_value, option_label in chain(self.choices, choices):
TypeError: 'int' object is not iterable` 
```

Am I missing something here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:53:54.317

Both the `.all()` and the `.order_by()` methods are part of the Django Queryset. They are not the same as a Python list. Although the representation is the same, they are indeed different.

Some code in the Django ModelChoiceField does expect a foreignkey to have a queryset instead of a list of results. If you set `self.fields['internalline'].choices` instead, you won't have this problem.

So try this instead:

```
self.fields['internalline'].choices = self.person.getPersonLines() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:09:45.157

My purpose was using the list was I wanted to merge two query sets to display options for a foreign key.

Based on

[https://groups.google.com/forum/?hl=en&fromgroups=#!topic/django-users/0i6KjzeM8OI](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/django-users/0i6KjzeM8OI)

I modified my method to return a queryset instead of a list:

```
def getPersonLines(self):
    vm_lines = self.line.all()
    for phone in self.phonesst_set.all():
        vm_lines = vm_lines | phone.line.all() 
```

and in the `__inti__` method of the form, I could use the query set

```
self.fields['internalline'].queryset = self.person.getPersonLines() 
```

# c# - 在插入模式下插入不在详细信息视图上的记录

> ID：12201479
> 
> 赞同：0
> 
> 时间：2012-08-30T16:32:00.570
> 
> 标签：c#, asp.net, insert, detailsview

我有一个具有多个字段的详细信息视图，并且始终仅在插入模式下使用。我遇到的问题是，当我将所有值输入到我的详细信息视图中并点击插入按钮时，没有任何反应。好吧，屏幕已刷新，但表中没有插入新记录。

这是我的 aspx 代码：

```
 <td class="style2" colspan="2">
                <asp:DetailsView ID="DetailsView1" runat="server" 
                DataSourceID="ObjectDataSource1" DataKeyNames="requestid"
                Height="29px" Width="928px" AutoGenerateRows="False" CellPadding="4" ForeColor="#333333"
                GridLines="None" Style="margin-right: 0px; text-align: left; margin-top: 0px;" 
                    ondatabound="DetailsView1_DataBound" 
                    onitemcommand="DetailsView1_ItemCommand" 
                    oniteminserting="DetailsView1_ItemInserting" >
                <Fields>
                    <asp:TemplateField AccessibleHeaderText="Request ID" HeaderText="Leave Request ID" Visible="False">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:Label ID="Label19" runat="server" Text='<%# Bind("requestid") %>'></asp:Label>
                            <asp:TextBox ID="TextBox165" runat="server" Text='<%# bind("requestid") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("requestid") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Employee ID" HeaderText="Employee ID" >
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:Label ID="Label21" runat="server" Text='<%# bind("emppid") %>'></asp:Label>
                            <asp:TextBox ID="TextBox17" runat="server" Text='<%# bind("emppid") %>' 
                               ></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label2" runat="server" Text='<%# bind("emppid") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Approver ID" HeaderText="Approver ID">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList4" runat="server" style="text-transform:uppercase;" DataSourceID="SqlDataSourceApprover"
                                DataTextField="APPROVNAME" DataValueField="APPROVERID" 
                                SelectedValue='<%# Bind("approverid") %>'>
                            </asp:DropDownList>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label3" runat="server" Text='<%# Bind("approverid") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Leave Type" SortExpression="reqleavecode">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList6" runat="server" Height="20px"
                                onselectedindexchanged="DropDownList6_SelectedIndexChanged" Width="171px" 
                                ondatabound="DropDownList6_DataBound" AutoPostBack="True" 
                                SelectedIndex='<%# bind("reqleavecode") %>'>
                                <asp:ListItem  Text="-- SELECT LEAVE --" Value ="-1" Selected="True"></asp:ListItem>
                                <asp:ListItem Value="1E">EDUCATION LEAVE</asp:ListItem>
                                <asp:ListItem Value="1X">EXCUSED LEAVE</asp:ListItem>
                                <asp:ListItem Value="1F">FUNERAL LEAVE</asp:ListItem>
                                <asp:ListItem Value="1J">JURY DUTY</asp:ListItem>
                                <asp:ListItem Value="1N">ON THE JOB INJURY LEAVE</asp:ListItem>
                                <asp:ListItem Value="1P">PERSONAL HOLIDAY</asp:ListItem>
                                <asp:ListItem Value="4 ">SICK LEAVE</asp:ListItem>
                                <asp:ListItem Value="3">VACATION</asp:ListItem>
                            </asp:DropDownList>
                            <br />
                            <asp:Label ID="Label26" runat="server" Text='<%# bind("reqleavecode") %>'></asp:Label>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label9" runat="server" Text='<%# Bind("reqleavecode") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Leave Type" HeaderText="Leave Reason" 
                        Visible="False">
                        <ItemTemplate>
                            <asp:Label ID="Label4" runat="server" Text='<%# Bind("leavetype") %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList5" runat="server" AppendDataBoundItems="True" 
                                AutoPostBack="True" DataSourceID="SqlDataSource1" DataTextField="REASON" 
                                DataValueField="REASON" Height="19px" 
                                onselectedindexchanged="DropDownList5_SelectedIndexChanged1" 
                                SelectedValue='<%# Bind("leavetype") %>' Width="163px">
                            </asp:DropDownList>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1Reason" runat="server" 
                                ControlToValidate="DropDownList5" ErrorMessage="*Leave Reason Required" 
                                ForeColor="Red"></asp:RequiredFieldValidator>
                        </InsertItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="start date" HeaderText="Leave Date">
                        <EditItemTemplate>     
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox5" runat="server" 
                                Text='<%# Bind("lstdate",  "{0:MM/dd/yyyy}") %>' Height="21px"
                                Width="67px"></asp:TextBox>
                            <asp:CalendarExtender ID="TextBox5_CalendarExtender" runat="server" Enabled="True"
                                TargetControlID="TextBox5">
                            </asp:CalendarExtender>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                                ControlToValidate="TextBox5" ErrorMessage="*Leave Date Required" 
                                ForeColor="Red"></asp:RequiredFieldValidator>
                            <br />
                            <asp:CompareValidator ID="CompareValidator18" runat="server" 
                                ControlToCompare="TextBox7" ControlToValidate="TextBox5" 
                                ErrorMessage="Leave date cannot be after start date" ForeColor="Red" 
                                Operator="LessThanEqual" ToolTip="Must choose start date before end date"></asp:CompareValidator>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label7" runat="server" Text='<%# Bind("lenddate") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="lenddate" HeaderText="Return Date">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox7" runat="server" 
                                Text='<%# Bind("lenddate",  "{0:MM/dd/yyyy}") %>' Height="21px"
                                Width="67px"></asp:TextBox>
                            <asp:CalendarExtender ID="TextBox7_CalendarExtender" runat="server" Enabled="True" TargetControlID="TextBox7">
                            </asp:CalendarExtender>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
                                ControlToValidate="TextBox7" ErrorMessage="*Return Date Required" 
                                ForeColor="Red"></asp:RequiredFieldValidator>
                            <br />
                            <asp:CompareValidator ID="CompareValidator1" runat="server" 
                                ControlToCompare="TextBox5" ControlToValidate="TextBox7" 
                                ErrorMessage="Return date cannot be before start date" ForeColor="Red" 
                                Operator="GreaterThanEqual"></asp:CompareValidator>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label15" runat="server" Text='<%# Bind("lsttime") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Leave Time" HeaderText="Leave Time">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox15" runat="server" Text='<%# Bind("lsttime") %>' Width="85px"
                                Height="22px" ToolTip="Type 'A' or 'P' to switch AM/PM"></asp:TextBox>
                            <asp:MaskedEditExtender ID="TextBox15_MaskedEditExtender" runat="server" TargetControlID="TextBox15"
                                Mask="99:99" MaskType="Time" AcceptAMPM="True" ErrorTooltipEnabled="True" 
                                CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
                                CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
                                CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" />
                            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
                                ControlToValidate="TextBox15" ErrorMessage="*Invalid Time" ForeColor="Red" 
                                ValidationExpression="^((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?))$"></asp:RegularExpressionValidator>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label8" runat="server" Text='<%# Bind("lendtime") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Return Time" HeaderText="Return Time">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("lsttime") %>' Width="85px"
                                Height="22px" ToolTip="Type 'A' or 'P' to switch AM/PM"></asp:TextBox>
                            <asp:MaskedEditExtender ID="TextBox8_MaskedEditExtender" runat="server" 
                                AcceptAMPM="True" CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
                                CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
                                CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" 
                                ErrorTooltipEnabled="True" Mask="99:99" MaskType="Time" 
                                TargetControlID="TextBox8" />
                            <asp:RegularExpressionValidator ID="RegularExpressionValidator10" 
                                runat="server" ControlToValidate="TextBox8" ErrorMessage="*Invalid Time" 
                                ForeColor="Red" 
                                ValidationExpression="^((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?))$"></asp:RegularExpressionValidator>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label10" runat="server" Text='<%# Bind("standby") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Standby" HeaderText="On Standby">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource10"
                                DataTextField="&quot;Y/N&quot;" DataValueField="&quot;Y/N&quot;" SelectedValue='<%# BIND("standby") %>'>
                            </asp:DropDownList>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label12" runat="server" Text='<%# Bind("rsndecline") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Reason Decline" 
                        HeaderText="Request Decline Reason" InsertVisible="False">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox12" runat="server" Text='<%# Bind("rsndecline") %>' 
                                Visible="False"></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label13" runat="server" Text='<%# Bind("status") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Status" HeaderText="Request Status" InsertVisible="False">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox13" runat="server" Text='<%# Bind("status") %>' Visible="False"></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label14" runat="server" Text='<%# Bind("empremarks") %>' 
                                ToolTip="Additional information pertaining to leave request"></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="empremarks" HeaderText="Leave Request Remarks">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox14" runat="server" style="text-transform:uppercase;" Text='<%# Bind("empremarks") %>' 
                                TextMode="MultiLine" Height="47px" Width="452px" 
                                ToolTip="Additional information pertaining to leave request."></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Button ID="Button1" runat="server" CausesValidation="False" 
                                CommandName="Edit" Height="21px" Text="Edit" Width="65px" />
                            &nbsp; &nbsp;
                            <asp:Button ID="Button2" runat="server" CausesValidation="False" 
                                CommandName="New" Height="21px" Text="New" Width="65px" />
                            &nbsp; &nbsp;
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField ShowHeader="False">
                        <EditItemTemplate>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:Button ID="Button1" runat="server" CommandName="Insert" 
                                Text="Submit Request" />
                            &nbsp;
                            <asp:Button ID="Button2" runat="server" CausesValidation="False" 
                                CommandName="Cancel" Height="21px" onclick="Button2_Click1" Text="Cancel" />
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label5" runat="server" Text='<%# Bind("lstdate") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                        </Fields>
                        </asp:DetailsView>
                    </td>
                </tr>
                <tr>
                    <td class="style2" colspan="2">
                        <asp:Button ID="Button3" runat="server" Height="21px"  onclick="Button3_Click" 
                            Text="With Pay Leave Request" />
                    &nbsp;&nbsp;
                        <asp:Button ID="Button4" runat="server" Height="21px"  onclick="Button4_Click" 
                            Text="Without Pay Leave Request" style="margin-left: 13px" Width="221px" />
                    </td>
                </tr>
            </table>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT REASON, LEAVECODE FROM LEAVRSN">
        <SelectParameters>
            <asp:Parameter Name="LEAVECODE" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="SQLLEAVECODE" runat="server" 
       ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
       ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>"                
       SelectCommand="SELECT LEAVETYPE, LEAVECODE FROM LVTYPE ORDER BY LEAVECODE">
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="SqlDataSourceApprover" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT APPROVERID, APPROVNAME FROM APPROVER ORDER BY APPROVERID">
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="SqlDataSource10" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT * FROM YNSELECT ORDER BY ALPH"></asp:SqlDataSource>
    <asp:ObjectDataSource ID="ObjectDataSource1111" runat="server">

    </asp:ObjectDataSource>
            <br />
            <asp:Label ID="Label17" runat="server" ForeColor="#999999" 
                Text="Exhibit B PP-8"></asp:Label>
            <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" DeleteMethod="DeleteRequestForm"
                InsertMethod="InsertRequestForm" SelectMethod="SelectRequestEMPID" TypeName="DataHandler.DataHandler"  
                UpdateMethod="UpdateRequestFormLastName" OldValuesParameterFormatString="original_{0}">
                <DeleteParameters>
                    <asp:Parameter Name="requestid" Type="Int64" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="requestid" Type="Int64" />
                    <asp:Parameter Name="emppid" Type="Decimal" />
                    <asp:Parameter Name="leavetype" Type="String" />
                    <asp:Parameter Name="lstdate" Type="DateTime" />
                    <asp:Parameter Name="lenddate" Type="DateTime" />
                    <asp:Parameter Name="lsttime" Type="String" />
                    <asp:Parameter Name="lendtime" Type="String" />
                    <asp:Parameter Name="standby" Type="String" />
                    <asp:Parameter Name="status" Type="String" />
                    <asp:Parameter Name="rsndecline" Type="String" />
                    <asp:Parameter Name="empremarks" Type="String" />
                    <asp:Parameter Name="approverid" Type="String" />
                    <asp:Parameter Name="reqleavecode" Type="Int32" />
                </InsertParameters>
                <SelectParameters>
                   <%-- <asp:Parameter Name="emppid" Type="Decimal" />--%>
                   <asp:QueryStringParameter Name="emppid" QueryStringField="emppid" Type="Decimal" />
                </SelectParameters>
                <UpdateParameters>
                    <asp:Parameter Name="requestid" Type="Int64" />
                    <asp:Parameter Name="emppid" Type="Decimal" />
                    <asp:Parameter Name="leavetype" Type="String" />
                    <asp:Parameter Name="lstdate" Type="DateTime" />
                    <asp:Parameter Name="lenddate" Type="DateTime" />
                    <asp:Parameter Name="lsttime" Type="String" />
                    <asp:Parameter Name="lendtime" Type="String" />
                    <asp:Parameter Name="requesreason" Type="String" />
                    <asp:Parameter Name="standby" Type="String" />
                    <asp:Parameter Name="status" Type="String" />
                    <asp:Parameter Name="rsndecline" Type="String" />
                    <asp:Parameter Name="empremarks" Type="String" />
                    <asp:Parameter Name="approverid" Type="String" />
                    <asp:Parameter Name="LASTNAME" Type="String" />
                </UpdateParameters>
            </asp:ObjectDataSource>
                        <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
                            SelectMethod="SelectNameEmployeeForm" 
                            TypeName="DataHandler.DataHandler">
                            <SelectParameters>
                                <asp:Parameter Name="empid" Type="Decimal" />
                                <asp:Parameter Name="firstname" Type="String" />
                                <asp:Parameter Name="lastname" Type="String" />
                            </SelectParameters>
                        </asp:ObjectDataSource>
            <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
            </asp:ToolkitScriptManager>
    <asp:Label ID="Label27" runat="server" ></asp:Label>
</asp:Content> 
```

我背后的代码：

```
 public partial class newRequestForm : System.Web.UI.Page
       {
         public string lvtype;
         public string lvrequest;
       private DataSet GetData()
       {
         ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;
         var sql = "SELECT LEAVETYPE, LEAVECODE FROM TESTBWTIME.BWLVTYPE ORDER BY LEAVECODE";

           using (iDB2Connection conn = new iDB2Connection(GetConnectionString()))
           {
             conn.Open();
             using (iDB2Command cmd = new iDB2Command(sql, conn))
             {
                cmd.DeriveParameters();
                using (iDB2DataAdapter da = new iDB2DataAdapter(cmd))
                {
                   DataSet ds = new DataSet();
                   da.Fill(ds);
                   return ds;
                }
             }
          }
        }

   private String GetConnectionString()
   {
      ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;
      return cssc["connStringNET"].ToString();
   }
   protected void Page_Load(object sender, EventArgs e)
   {    
      if (!IsPostBack)
      {
        DetailsView1.DataBind();
      }
   }

   protected void DetailsView1_DataBound(object sender, EventArgs e)
   {
     TextBox employeeID = (TextBox)(DetailsView1.FindControl("TextBox17"));
     DropDownList approverID = (DropDownList)(DetailsView1.FindControl("DropDownList4"));
       if (DetailsView1.CurrentMode == DetailsViewMode.Insert)
       {
         var CurrUser = "";

         Account.Login uusr = new Account.Login();
         CurrUser = uusr.User.Identity.Name.ToString().ToUpper();
         employeeID.Text = CurrUser.Substring(3, 3);
         string supusrid = "";
         DataHandler.DataHandler Dt = new DataHandler.DataHandler();
         supusrid = Dt.SelectRequestApproverForm(supusrid);
         approverID.SelectedValue = supusrid;
      }
   }

   protected void DropDownList6_DataBound1(object sender, EventArgs e)
   {
     DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList5"));
     DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
     string selectedValue = lvtype.SelectedValue.ToString().ToUpper();
     if (selectedValue == "4 " || selectedValue == "1F")
       {
          SqlDataSource1.SelectParameters["LEAVECODE"].DefaultValue = selectedValue;
          DetailsView1.Fields[4].Visible = true;
          lvreason.Visible = true;
       }
    else
       {
        DetailsView1.Fields[4].Visible = false;
       }
  }
  protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
  {
     DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
     DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList5"));

     if (lvtype.SelectedValue != "")
     {
      if (lvtype.SelectedValue == "3 ")
      {
      lvreason.Text.Equals("VACATION").ToString().Trim().ToUpper();
      lvtype.Text.Equals("VACATION").ToString().Trim().ToUpper();
      }
      else if (lvtype.SelectedValue == "1E")
      {
      lvreason.Text.Equals("EDUCATION LEAVE").ToString().Trim().ToUpper();
      lvtype.Text.Equals("EDUCATION LEAVE").ToString().Trim().ToUpper();
      }
      else if (lvtype.SelectedValue == "1N")
      {
      lvreason.Text.Equals("ON THE JOB INJURY LEAVE").ToString().Trim().ToUpper();
      lvtype.Text.Equals("ON THE JOB INJURY LEAVE").ToString().Trim().ToUpper();
      }
      else if (lvtype.SelectedValue == "1J")
      {
      lvreason.Text.Equals("JURY DUTY").ToString().Trim().ToUpper();
      lvtype.Text.Equals("JURY DUTY").ToString().Trim().ToUpper();
      }
      else if (lvtype.SelectedValue == "1X")
      {
      lvreason.Text.Equals("EXCUSED LEAVE").ToString().Trim().ToUpper();
      lvtype.Text.Equals("EXCUSED LEAVE").ToString().Trim().ToUpper();
      }
      else if (lvtype.SelectedValue == "1P")
      {
      lvreason.Text.Equals("PERSONAL HOLIDAY").ToString().Trim().ToUpper();
      lvtype.Text.Equals("PERSONAL HOLIDAY").ToString().Trim().ToUpper();
      }
     }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:41:54.270

`DetailsView1.DataBind();`在`DetailsView1_ItemInserting`添加记录调用该`DetailsView1.DataBind();`方法后，您缺少详细信息。

```
protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{
           // do your work 
          // .........
          //...... 
    DetailsView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:41:56.087

添加此代码以便在添加数据后进行绑定

```
void DetailsView1_ItemInserted(object sender, 
    DetailsViewInsertedEventArgs e)
  {
    // Refresh the GridView control after a new record is inserted 
    // in the DetailsView control.
    DetailsView1.DataBind();
  } 
```

并将其添加到您的控件中`OnItemInserted="DetailsView1_ItemInserted"`

# c# - 使用 Microsoft Enterprise Library Unity 拦截方法时未返回完整的堆栈跟踪

> ID：12201480
> 
> 赞同：2
> 
> 时间：2012-08-30T16:32:02.963
> 
> 标签：c#, unity-container, aop, enterprise-library, interceptor

我正在使用一个使用 Unity (v2.0) 作为 Microsoft Enterprise Library 一部分的应用程序。它被设置为您可以在方法的顶部添加一个属性，并且在方法执行之前会完成一些事情（跟踪/记录/缓存等）。下面的示例代码：

```
static void Main(string[] args)
{
    IUnityContainer myContainer = new UnityContainer()
        .AddNewExtension<Interception>()
        .RegisterType<IFoo, Foo>(
            new Interceptor<InterfaceInterceptor>(),
            new InterceptionBehavior<PolicyInjectionBehavior>()
        );
    IFoo myFoo = myContainer.Resolve<IFoo>();

    myFoo.fooMethodCall();
}

public class TraceAttribute : HandlerAttribute
{
    public override ICallHandler CreateHandler(IUnityContainer container)
    {
        return new TraceCallHandler();
    }
}

public class TraceCallHandler : ICallHandler
{
    public int Order { get; set; }

    public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
    {
        IMethodReturn methodReturn;
        //Do tracing/chaching/other funky stuff
        methodReturn = getNext()(input, getNext);       
        return methodReturn;
    }
}

public interface IFoo
{
    int fooMethodCall();
}

public class Foo : IFoo
{
    [Trace]
    public int fooMethodCall()
    {
        return 0;
    }
} 
```

现在，我对这种工作方式有两个烦恼，一个非常严重的问题。第一个烦恼是生成的堆栈跟踪的大小![看这里](../Images/c5176f0732fbed16d1f1c577c1b633a3.png)。尝试调试 5 级深度的函数会导致一些难以导航的可怕堆栈跟踪。

第二个烦恼是使用VS2010调试的时候，似乎无法进入`fooMethodCall`. 尝试介入会导致与我尝试跨过方法调用相同的行为。

我遇到的实际问题是错误处理。想象一下，我更改`fooMethodCall`为以下内容：

```
public int fooMethodCall()
{
    throw new Exception();
} 
```

并这样称呼它：

```
try 
{
    myFoo.fooMethodCall();
} 
catch Exception(e)
{
    //do something with the exception
} 
```

如果我检查 e.StackTrace，它是最无用的：

```
at DynamicModule.ns.Wrapped_IFoo_dd88617b4f734f1987dc0099d195ca52.fooMethodCall()
at ConsoleApplication1.Program.Main(String[] args) 
in C:\Projects\ConsoleApplication1\Program.cs:line 152 
```

这一切告诉我的是 fooMethodCall 失败了。它可能在一开始就失败了，或者在嵌套 5 层的方法中失败了。

那么关于这个的几个问题。这段代码看起来对吗？如果是这样，我列出的烦恼/问题是否在拦截方法调用时是不可避免的？有没有更好的方法来做我想要实现的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T22:20:35.720

我在这里问了同样的问题： [Unity 调用站点拦截方法的完整堆栈跟踪](https://stackoverflow.com/questions/11764951/full-stack-trace-for-intercepted-methods-at-call-site-in-unity)，并提供了这个线程：[在 C# 中，如何在不丢失堆栈跟踪的情况下重新抛出 InnerException？](https://stackoverflow.com/questions/57383/in-c-how-can-i-rethrow-innerexception-without-losing-stack-trace)

我们最终添加了另一个拦截器，它最终成为管道中第一个使用第二个链接中的技术保留跟踪的拦截器。我承认，总体而言，这有点巫术和不好的做法，但我们不太担心获得完整的堆栈跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T16:39:54.657

只需将返回值的异常设置为新的异常即可。例如：

```
public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
{
    IMethodReturn r = getNext()(input, getNext);
    if (r.Exception != null) r.Exception = new Exception("NameOfInterceptor", r.Exception);
    return r;
} 
```

# c# - 程序在开发机器上工作，但不会在测试机器上启动

> ID：12201481
> 
> 赞同：0
> 
> 时间：2012-08-30T16:32:08.553
> 
> 标签：c#, startup

我已经编写这个程序有一段时间了，我终于准备好开始测试它了。它在我的开发机器上 100% 工作，但我想在它从未运行过的机器上尝试它。所以，我把我的程序交给了一台测试计算机。当我双击exe时，什么也没发生。我打开任务管理器，又试了一次。我看到这个过程开始了，但大约 5 秒后，它消失了。没有错误，没有例外，没有什么。我将如何尝试找出问题所在？我还很新，我从来没有发生过这种情况。感谢您的任何帮助！

*编辑*

很抱歉之前没有提及。这是一个winforms应用程序。

*编辑 2*

所以，原来发生的事情是我试图将用于 64 位操作系统的 dll 转换为 32 位操作系统。在 Windows XP 中，这会引发 BadImageFormatException。但是，正如我所说，在 Windows 7 中，它一点也不例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:39:52.817

这是一个泡菜，毫无疑问。我以前必须调试过这种类型的东西。

第一点有用的信息是没有抛出异常。这告诉我，实际代码中的某处是解决问题的关键。您要么捕获异常并静默关闭，要么您的代码达到了它认为是“正常”的退出条件并以它认为正常的方式关闭。

为了弄清楚它退出的位置和原因，我将在应用程序的关键点添加调试日志记录，并将一个侦听器附加到写入文件的 Debug/Trace 侦听器集合。“关键点”是应用程序应该退出（或窗口的主窗体应该关闭）的地方，并且在任何“catch”块或错误事件处理程序中。在测试计算机上运行这个新版本，看看它会给你什么。这应该告诉你程序在幕后的基本流程，以及它通过什么机制关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:35:52.957

如果您正在运行控制台应用程序，它可能会运行然后自行关闭。尝试打开命令提示符，然后从那里执行应用程序。如果您的程序有输出，那么您将在该命令窗口中看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:35:58.107

您是否检查过应用程序事件日志？

您是否安装了必要的 .Net 版本？

**也许您应该在整个应用程序中通过调用 MessageBox.Show("I failed here** ") 来处理更多异常。

# javascript - 在 IE8 中创建脚本标签

> ID：12201485
> 
> 赞同：18
> 
> 时间：2012-08-30T16:32:13.347
> 
> 标签：javascript, jquery, internet-explorer-8

我在 IE8 中测试我们的网站并得到了可怕的`Unexpected call to method or property access.`错误。

经过大量调试（IE8 的开发工具很烂），我发现了有问题的行。

```
$('<script>').html(JSData).appendTo('head') 
```

问题是`$('<script>').html(JSData)`。我尝试在控制台中运行它，但仍然出现错误。

为什么 IE8 不能`.html`在新创建的脚本标签上设置？

PS这也失败了：

```
$(document.createElement('script')).html(JSData) 
```

**更新**：我尝试在没有 jQuery 的情况下创建脚本标签：

```
var scriptTag = document.createElement('script');
scriptTag.type = 'text/javascript';
scriptTag.innerHTML = JSData; 
```

上`scriptTag.innerHTML = JSData;`线了，IE8给`Unknown runtime error`. 感谢 IE8。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T16:46:52.603

您的仅 javascript 方法需要将脚本元素添加到文档中。

IE<9 无法识别 script 标签上的 innerHTML 或 childNodes，但所有浏览器都支持 text 属性。

```
var scriptTag = document.createElement('script');
scriptTag.text= JSData;
document.body.appendChild(scriptTag); 
```

# c# - 抽象地如何检查解密尝试是否成功

> ID：12201487
> 
> 赞同：3
> 
> 时间：2012-08-30T16:32:18.227
> 
> 标签：c#, encryption, ascii

我在[Project Euler](http://projecteuler.net/)研究问题集已经有一段时间了，并且很享受所面临的挑战。我目前正在处理涉及加密和解密过程的[问题 59 。](http://projecteuler.net/problem=59)

从任何合理的标准来看，这个问题都是一个非常简单的解密问题。

*   我被告知加密密钥由 3 个小写字母组成。
*   我已经得到了加密/解密过程的描述。
*   我收到了一个加密的文本文件，其中只包含加密的常用英文单词

我完全理解导入数据、循环遍历所有可能的密钥以及尝试使用每个可能的密钥解密文件数据的过程。我的问题是，在尝试使用其中一个密钥进行解密之后，我如何判断该密钥是否是正确的解密密钥？就计算机而言，每个解密密钥只是将数据从一个值转换为另一个值。该值的含义纯粹是主观的/解释的。如何判断解密密钥是否已将数据解密为有意义的内容（即常用英文单词）

**这是我到目前为止的代码（C#）：**

```
 static void Main(string[] args)
    {
        /* Get the data from the file and convert to byte array*/
        StreamReader inData = new StreamReader(@"C:\Users\thantos\Desktop\cipher1.txt");
        string[] strData = inData.ReadLine().Split(new char[] {','});
        byte[]  fileData = new byte[strData.Length];
        foreach (string x in strData) { byte.Parse(x); }

        /* for each three character lowercase password */
        for (uint i = 0; i < 26; i++) {
            for (uint j = 0; j < 26; j++){
                for (uint k = 0; k < 26; k++) {
                    /* create a key */
                    byte[] key = new byte[3];
                    key[0] = (byte)(i + 97);
                    key[1] = (byte)(j + 97);
                    key[2] = (byte)(k + 97);

                    /* create temp copy of data */
                    byte[] dataCopy = new byte[fileData.Length];
                    fileData.CopyTo(dataCopy, 0);

                    /* decrypt using key */
                    for (uint l = 0; l < dataCopy.Length; l++) { 
                        dataCopy[l] = (byte)(dataCopy[l] ^ key[l%key.Length]);
                    }

                    /* cannot figure out how to check 
                     * if data is meaningfully decrypted
                     */
                    bool dataIsMeaningful = isMeaningful(dataCopy);

                    if(dataIsMeaningful) {
                      /* do stuff with data if correct 
                       * decryption key was found 
                       */
                    }
                }
            }
        }
    } 
```

我已经尝试过这种方法`isMeaningful()`：

```
public static isMeaningful(byte[] inData) {
  bool isGood = true;
    for (uint i = 0; good && i < inData.Length; i++) {
      isGood &= (char.IsLower((char)inData[i]));;
    }
   return isGood;
} 
```

但它对所有 17576 个可能的键都返回 true。

如何确定解密密钥是否已将文件数据解密为有意义的数据？我不是在寻找解决方案代码或 Project Euler 问题的答案，我在寻找有关如何检查您的解密尝试是否成功的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:26:47.670

尝试不同的键，并根据正常英语的字母频率对它们进行评分：空格，然后是 E、T、A、O、I、N、S、H、R、D、L、U。首先选择得分最高的键审判。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:58:57.510

好吧，您可以假设只允许有效的 ASCII 值（因为它应该是明文）。因此，对于您解码的每个字母，只需检查生成的异或结果是否为有效值：`if(dataCopy[l] < 32 || dataCopy[l] > 122) continue;`这应该有助于消除绝大多数可能的组合键。

实际上，这种技术甚至可以用来缩小您的键集范围。因此，与其在整个 1200 个字符串上迭代循环 26^3 次，不如最初迭代 26 次并跟踪哪个位置的哪个字母仍然有效。

```
var letters = Enumerable.Repeat(Enumerable.Range((int)'a', 'z'-'a' + 1).Select(e => (char)e), 3).Select (e => e.ToList()).ToList();
for(int i = 0, j = 0; i < passwordBytes.Length; i++)
{
    j = i % 3;
    for(int k = 0; k < letters[j].Count; k++)
    {
        byte r = (byte)(letters[j][k] ^ passwordBytes[i]);
        if(r < 32 || r > 122) letters[j].RemoveAt(k--);
    }
} 
```

这应该使您的有效字符几乎为零，此时您可以迭代剩余的值（这不应该花费太长时间）并寻找一些有效的序列（我听说寻找`" the "`是一个不错的选择）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:38:27.107

您可以将原始消息的校验和与加密消息一起发送吗？解密后，计算校验和并查看它们是否匹配。

~~如果那不可用，那么测试消息呢？您可以先发送一条测试消息，例如“这是我的测试消息”，然后检查解密的消息是否逐字匹配。这不是万无一失的，但它可能会覆盖你。~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T16:43:52.537

当您使用密钥解密数据时，它应该为您提供了一个填充了文本的文本文档。要检查合法数据，是否可以使用空格字符作为分隔符将文本拆分为文本数组，然后根据英语词典检查数组中的每个“单词”？

# javascript - 使用 Javascript 播放 HTML5 视频

> ID：12201488
> 
> 赞同：9
> 
> 时间：2012-08-30T16:32:21.210
> 
> 标签：javascript, html, video, html5-video

如何使用**Javascript**播放 HTML5 `<video>`？

例如，在`onclick`活动中播放视频。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T16:43:19.650

将事件侦听器添加到它调用的播放按钮`videoElem.play()`

HTML：

```
<video id='video'>
    <source src="your-video-source.mp4" type="video/mp4">
</video>

<button id='playVid'>Play</button> 
```

Javascript：

```
document.getElementById('playVid').onclick = function () {
    document.getElementById('video').play();
}; 
```

# android - 位图 Android 上的触摸监听器（覆盖以使位图的部分可点击）

> ID：12201489
> 
> 赞同：0
> 
> 时间：2012-08-30T16:32:21.797
> 
> 标签：android, gesture

我使用位图，作为由部分组成的旋转表盘。意味着用户可以旋转位图。现在我想在 ImageView 上定义一个 singleTap 来导航到不同的部分。

我们可以通过motionevent x 和y 来做，但是section 的位置会动态变化。所以，这是不可能的。

有没有其他方法可以做到这一点？

```
public class TutorialActivity extends Activity {

    private static Bitmap imageOriginal, imageScaled;
    private static Matrix matrix;

    private ImageView dialer;
    private int dialerHeight, dialerWidth;

    private GestureDetector detector;

    // needed for detecting the inversed rotations
    private boolean[] quadrantTouched;

    private boolean allowRotating;
    View viewNew;

    Button aboutus,profile,colleagues,picasa,facebook,twitter,youtube,referral;

    int one_piecewidth,one_pieceheight;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);

        // initialize the matrix only once
        if (matrix == null) {
            matrix = new Matrix();
        } else {
            // not needed, you can also post the matrix immediately to restore the old state
            matrix.reset();
        }

        detector = new GestureDetector(this, new MyGestureDetector());

        // there is no 0th quadrant, to keep it simple the first value gets ignored
        quadrantTouched = new boolean[] { false, false, false, false, false };

        allowRotating = true;

        //viewNew=LayoutInflater.from(TutorialActivity.this).inflate(R.layout.new_view,null,false);
        // load the image only once

        if(imageOriginal==null){
            //imageOriginal=loadBitmapFromView(viewNew);
            imageOriginal=BitmapFactory.decodeResource(getResources(), R.drawable.circular_menu);
        }

        imageScaled=imageOriginal;
        one_piecewidth=((int) imageOriginal.getWidth()/4);
        one_pieceheight=((int) imageOriginal.getHeight()/4);

        dialer = (ImageView) findViewById(R.id.imageView_ring);
        dialer.setImageBitmap(imageOriginal);

        dialer.setOnTouchListener(new MyOnTouchListener());
        dialer.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            @Override
            public void onGlobalLayout() {
                // method called more than once, but the values only need to be initialized one time
                if (dialerHeight == 0 || dialerWidth == 0) {
                    dialerHeight = dialer.getHeight();
                    dialerWidth = dialer.getWidth();

                    // resize
                    Matrix resize = new Matrix();
                    resize.postScale((float)Math.min(dialerWidth, dialerHeight) / (float)imageOriginal.getWidth(), (float)Math.min(dialerWidth, dialerHeight) / (float)imageOriginal.getHeight());
                    imageScaled = Bitmap.createBitmap(imageOriginal, 0, 0, imageOriginal.getWidth(), imageOriginal.getHeight(), resize, false);

                    // translate to the image view's center
                    float translateX = dialerWidth / 2 - imageScaled.getWidth() / 2;
                    float translateY = dialerHeight / 2 - imageScaled.getHeight() / 2;
                    matrix.postTranslate(translateX, translateY);

                    dialer.setImageBitmap(imageScaled);
                    dialer.setImageMatrix(matrix);
                }
            }
        });

    }

    /**
     * Rotate the dialer.
     * 
     * @param degrees The degrees, the dialer should get rotated.
     */
    private void rotateDialer(float degrees) {
        matrix.postRotate(degrees, dialerWidth / 2, dialerHeight / 2);

        dialer.setImageMatrix(matrix);
        //viewNew.po

    }

    /**
     * @return The angle of the unit circle with the image view's center
     */
    private double getAngle(double xTouch, double yTouch) {
        double x = xTouch - (dialerWidth / 2d);
        double y = dialerHeight - yTouch - (dialerHeight / 2d);

        switch (getQuadrant(x, y)) {
            case 1:
                return Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

            case 2:
            case 3:
                return 180 - (Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI);

            case 4:
                return 360 + Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

            default:
                // ignore, does not happen
                return 0;
        }
    }

    /**
     * @return The selected quadrant.
     */
    private static int getQuadrant(double x, double y) {
        if (x >= 0) {
            return y >= 0 ? 1 : 4;
        } else {
            return y >= 0 ? 2 : 3;
        }
    }

    /**
     * Simple implementation of an {@link OnTouchListener} for registering the dialer's touch events. 
     */
    private class MyOnTouchListener implements OnTouchListener {

        private double startAngle;

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:

                    // reset the touched quadrants
                    for (int i = 0; i < quadrantTouched.length; i++) {
                        quadrantTouched[i] = false;
                    }

                    allowRotating = false;

                    startAngle = getAngle(event.getX(), event.getY());

                    Drawable drawable = dialer.getDrawable();
                    Rect imageBounds = drawable.getBounds();

                    //original height and width of the bitmap
                    int intrinsicHeight = drawable.getIntrinsicHeight();
                    int intrinsicWidth = drawable.getIntrinsicWidth();

                    //height and width of the visible (scaled) image
                    int scaledHeight = imageBounds.height();
                    int scaledWidth = imageBounds.width();

                    //Find the ratio of the original image to the scaled image
                    //Should normally be equal unless a disproportionate scaling
                    //(e.g. fitXY) is used.
                    float heightRatio = intrinsicHeight / scaledHeight;
                    float widthRatio = intrinsicWidth / scaledWidth;

                    //do whatever magic to get your touch point
                    //MotionEvent event;

                    //get the distance from the left and top of the image bounds
                    int scaledImageOffsetX = (int) (event.getX() - imageBounds.left);
                    int scaledImageOffsetY = (int) (event.getY() - imageBounds.top);

                    //scale these distances according to the ratio of your scaling
                    //For example, if the original image is 1.5x the size of the scaled
                    //image, and your offset is (10, 20), your original image offset
                    //values should be (15, 30). 
                    int originalImageOffsetX = (int) (scaledImageOffsetX * widthRatio);
                    int originalImageOffsetY = (int) (scaledImageOffsetY * heightRatio);

                    break;

                case MotionEvent.ACTION_MOVE:
                    double currentAngle = getAngle(event.getX(), event.getY());
                if((float) (startAngle - currentAngle)>1.0)
                    rotateDialer((float) (startAngle - currentAngle));
                    startAngle = currentAngle;
                    break;

                case MotionEvent.ACTION_UP:
                    allowRotating = true;
                    break;
            }

            // set the touched quadrant to true
            quadrantTouched[getQuadrant(event.getX() - (dialerWidth / 2), dialerHeight - event.getY() - (dialerHeight / 2))] = true;

            detector.onTouchEvent(event);

            return true;
        }
    }

    /**
     * Simple implementation of a {@link SimpleOnGestureListener} for detecting a fling event. 
     */
    private class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            // get the quadrant of the start and the end of the fling
            int q1 = getQuadrant(e1.getX() - (dialerWidth / 2), dialerHeight - e1.getY() - (dialerHeight / 2));
            int q2 = getQuadrant(e2.getX() - (dialerWidth / 2), dialerHeight - e2.getY() - (dialerHeight / 2));

            System.out.println("q1 and q2"+q1+".."+q2);

            // the inversed rotations
            if ((q1 == 2 && q2 == 2 && Math.abs(velocityX) < Math.abs(velocityY))
                    || (q1 == 3 && q2 == 3)
                    || (q1 == 1 && q2 == 3)
                    || (q1 == 4 && q2 == 4 && Math.abs(velocityX) > Math.abs(velocityY))
                    || ((q1 == 2 && q2 == 3) || (q1 == 3 && q2 == 2))
                    || ((q1 == 3 && q2 == 4) || (q1 == 4 && q2 == 3))
                    || (q1 == 2 && q2 == 4 && quadrantTouched[3])
                    || (q1 == 4 && q2 == 2 && quadrantTouched[3])) {

                dialer.post(new FlingRunnable(-1 * (velocityX + velocityY)));
            } else {
                // the normal rotation
                dialer.post(new FlingRunnable(velocityX + velocityY));
            }

            return true;
        }

          @Override
            public boolean onSingleTapUp(MotionEvent e){

                int pixel = imageScaled.getPixel((int)(e.getX()),(int)(e.getY()));
                System.out.println("pixel"+pixel+"...");

                return true;

          }
    }

    /**
     * A {@link Runnable} for animating the the dialer's fling.
     */
    private class FlingRunnable implements Runnable {

        private float velocity;

        public FlingRunnable(float velocity) {
            this.velocity = velocity;
        }

        @Override
        public void run() {
            if (Math.abs(velocity) > 5 && allowRotating) {
                rotateDialer(velocity / 75);
                velocity /= 1.0666F;

                // post this instance again
                dialer.post(this);
            }
        }
    }

     public static Bitmap loadBitmapFromView(View v) {

         System.out.println("vvv"+v+"....");
         System.out.println("vvvparams"+v.getMeasuredHeight()+"....");
        // System.out.println("vvvparamswidth"+v.getLayoutParams().height+"....");
            Bitmap b = Bitmap.createBitmap( 300, 300, Bitmap.Config.ARGB_8888);                
            Canvas c = new Canvas(b);
            v.layout(0, 0, 300, 300);
            v.draw(c);
            return b;
        }

     public Bitmap addView(View v) {
        v.setDrawingCacheEnabled(true);

        // this is the important code :)  
        // Without it the view will have a dimension of 0,0 and the bitmap will be null  

        System.out.println("mesaure spec"+MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight()); 

        v.buildDrawingCache(true);
        Bitmap b = Bitmap.createBitmap(v.getDrawingCache());
        v.setDrawingCacheEnabled(false);
        return b;// clear drawing cache
     }

     public void onResume(){
         super.onResume();

     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:54:41.987

在触摸事件上添加此代码：

```
 {      
           case MotionEvent.ACTION_DOWN:

             start = e.getEventTime();

                break;

            case MotionEvent.ACTION_MOVE:

            case MotionEvent.ACTION_UP:
                 stop = e.getEventTime();
                 break;
        }
        //delay or use thread
       if (stop - start > 1500) {
           //your code
       }

        return true; 
```

# regex - 通过 IPCONFIG 用于 DNS 服务器的 RegEx

> ID：12201492
> 
> 赞同：1
> 
> 时间：2012-08-30T16:32:24.057
> 
> 标签：regex, command-prompt, ipconfig

**Stack Overflow RegEx Wizards，**我搜索了谷歌并没有找到一个好的解决方案。我需要从 IPCONFIG 结果中提取 1:N DNS 服务器。在下面的示例中，我需要前三个。但是，可能会有更多或更少的情况。

**更新：**最理想的情况是，我们希望将光标放在 DNS 字符串中的第一个冒号 (:) 处，然后捕获 IP，直到我们遇到一个字母字符。因此，如果我们可以从该冒号抓取一个字符串到该字母字符，我们可以运行另一个 RegEx 来匹配 IP。

`DNS.*:`让我们到达第一个冒号 (:)

需要预读直到字母字符。

**重要提示：**由于我们使用的是第三方工具，我们只能使用 RegEx :)

这是我一直用于 IP 的 RegEx 值。这将捕获所有 IP 而不仅仅是 DNS ......

`(([0-9]){1,3}.){1,3}[0-9]{1,3}`

**IPCONFIG 示例**

```
 Subnet Mask . . . . . . . . . . . : 255.255.255.0
    Default Gateway . . . . . . . . . : 152.225.244.1
    DHCP Server . . . . . . . . . . . : 10.204.40.57
    DNS Servers . . . . . . . . . . . : 10.204.127.11
                                        10.207.2.50
                                        10.200.10.6
    Primary WINS Server . . . . . . . : 10.207.40.145
    Secondary WINS Server . . . . . . : 10.232.40.38
    Lease Obtained. . . . . . . . . . : Tuesday, August 28, 2012 6:45:12 AM
    Lease Expires . . . . . . . . . . : Sunday, September 02, 2012 6:45:12 A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:33:30.927

```
#!/usr/bin/env perl

use strict;
use warnings;

my $data = <<END;
Subnet Mask . . . . . . . . . . . : 255.255.255.0
Default Gateway . . . . . . . . . : 152.225.244.1
DHCP Server . . . . . . . . . . . : 10.204.40.57
DNS Servers . . . . . . . . . . . : 10.204.127.11
                                    10.207.2.50
                                    10.200.10.6
Primary WINS Server . . . . . . . : 10.207.40.145
Secondary WINS Server . . . . . . : 10.232.40.38
Lease Obtained. . . . . . . . . . : Tuesday, August 28, 2012 6:45:12 AM
Lease Expires . . . . . . . . . . : Sunday, September 02, 2012 6:45:12 A
END

my @ips = ();

if ($data =~ /^DNS Servers[\s\.:]+((\d{2}\.\d{3}\.\d{1,3}\.\d{1,3}\s*)+)/m) {
    @ips = split(/\s+/, $1);
    print "$_\n" foreach(@ips);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:47:38.590

我会使用[`unpack`](http://perldoc.perl.org/functions/unpack.html)而不是正则表达式来解析基于列的数据：

```
#!/usr/bin/env perl

use strict;
use warnings;

while (<DATA>) {
    my ($ip) = unpack 'x36 A*';
    print "$ip\n";
}

__DATA__
DNS Servers . . . . . . . . . . . : 10.204.127.11
                                    10.207.2.50
                                    10.200.10.6
Primary WINS Server . . . . . . . : 10.207.40.145
Secondary WINS Server . . . . . . : 10.232.40.38 
```

您可能必须将数字调整为`36`应跳过的实际字符数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:56:36.083

匹配

```
DNS.+?:(\s*([\d.]+).)+ 
```

并拉出组。这假设您将整个多行字符串放在一个 blob 中，并且提取的文本可能包含换行符和其他空格。最后一个点是匹配换行符，需要使用`/m`option

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:07:15.840

就个人而言，我会朝着不同的方向前进。我不会手动解析 ipconfig 的输出，而是使用 Win32::IPConfig 模块。 [Win32::IPConfig - Windows NT/2000/XP/2003 的 IP 配置设置](http://search.cpan.org/~jmacfarla/Win32-IPConfig-0.10/lib/Win32/IPConfig.pm)

```
use Win32::IPConfig;
use Data::Dumper;

my $host = shift || "127.0.0.1";
my $ipconfig = Win32::IPConfig->new($host);

my @searchlist = $ipconfig->get_searchlist;
print Dumper \@searchlist; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T17:24:36.540

匹配这个正则表达式（参见[**实际操作**](http://regexr.com?320ji)）：

```
DNS Servers.*:\s*(.*(?:[\n\r]+\s+.*(?:[\n\r]+\s+.*)?)?) 
```

第一个捕获组将是您请求的三个 IP（最多三个）。您肯定需要修剪空格。

**编辑：**正则表达式固定为最多匹配三个 IP。如果 IP 较少，则仅匹配它们。

# c++ - python模块卡住了

> ID：12201494
> 
> 赞同：0
> 
> 时间：2012-08-30T16:32:33.407
> 
> 标签：c++, python, memory, module, boost-python

我制作了一个 python 模块（带有 boost::python），它在某些时候创建了一些大型对象的数组（2D 向量）。对象的总大小大约是几 Gb。开始执行程序时，它会挂起/卡在初始化数组的位置：

```
// my_object.h
class my_object{
   public:
   my_object(n){  create a bunch of 2D arrays (double, int, etc.) of size n x n }
};

// extension.cpp
vector<my_object> arr(t,my_object(n)); // t is big, n is big 
```

如果我减少参数 t，尤其是 n，程序运行良好。因此，在 python 模块中初始化大对象数组的效率或可能性似乎存在一些问题。顺便说一句，我有足够的内存来存储这么大的数组（在 pbs 脚本中保留 ~20 Gb 或内存，这些是集群计算），所以问题几乎不是因为内存（在这种情况下我得到明确的信息，它是足够的内存）。我怎样才能克服这样的问题？先感谢您。

# java - 将 jar 库文件添加到 ant 构建

> ID：12201496
> 
> 赞同：0
> 
> 时间：2012-08-30T16:32:37.407
> 
> 标签：java, xml, ant

我添加`commons-codec.1.2.jar`到我的 Java 构建路径

```
 [javac] C:\Users\souzamor\workspace\tczip\src\tczip\Tczip.java:190: error: c
annot find symbol
    [javac]   mdEnc = new String( Hex.encodeHex( diges
t ));
    [javac]                       ^ 
```

这是我的`build.xml`文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project>

    <target name="clean">
        <delete dir="build" />
    </target>

    <target name="compile">
        <mkdir dir="build/classes" />
        <javac srcdir="src" destdir="build/classes" />
    </target>

    <target name="jar">
        <mkdir dir="build/jar" />
        <jar destfile="build/jar/Tczip.jar" basedir="build/classes">
            <manifest>
                <attribute name="Main-Class" value="tczip.ZipComparison" />
            </manifest>
        </jar>
    </target>

    <target name="run">
        <java jar="build/jar/Tczip.jar" fork="true" />
    </target>

</project> 
```

如何将 jar 文件添加到`build.xml`文件中？我还有另一个`Java`名为`Tczip`which processes的类`MD5`：

```
 [java] Processing: bhmcommonclient.zip
 [java] Exception in thread "main" java.lang.NoClassDefFoundError: org/apach
mmons/codec/binary/Hex
 [java]     at tczip.Tczip.digest(Unknown Source)
 [java]     at tczip.Tczip.execute(Unknown Source)
 [java]     at tczip.ZipComparison.showFiles(Unknown Source)
 [java]     at tczip.ZipComparison.showFiles(Unknown Source)
 [java]     at tczip.ZipComparison.showFiles(Unknown Source)
 [java]     at tczip.ZipComparison.showFiles(Unknown Source)
 [java]     at tczip.ZipComparison.showFiles(Unknown Source)
 [java]     at tczip.ZipComparison.matchMD5(Unknown Source)
 [java]     at tczip.ZipComparison.main(Unknown Source) 
```

我认为我没有将其正确添加到我的 jar 文件中……我该怎么做？我完全陌生`Ant`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:36:05.703

首先像这样声明它：

```
<path id="external.classpath">
    <pathelement location="${lib.dir}/commons-codec-1.2.jar"/>
</path> 
```

然后，在您的 javac 元素中，将其包含在类路径中，如下所示：

```
 <classpath>
    <path refid="external.classpath" />
  </classpath> 
```

# python - Python-如何初始化随机函数

> ID：12201498
> 
> 赞同：1
> 
> 时间：2012-08-30T16:32:41.223
> 
> 标签：python, function, random, python-3.x

我是python初学者。我正在尝试创建一个基本字典，其中单词的随机含义会出现，用户必须输入正确的单词。我使用了以下方法，但随机不起作用。我总是先得到第一个单词，当最后一个单词完成时，我会得到无限的“无”，直到我杀死它。使用python 3.2

```
from random import choice

print("Welcome , let's get started")
input()

def word():
    print('Humiliate')
    a = input(':')
    while a == 'abasement':
        break
    else:
        word()
    #   --------------------------------------------------------- #

def word1():
    print('Swelling')
    a = input(':')
    while a == 'billowing':
        break
    else:
        word()
#   ------------------------------------------------------------ #

wooo = [word(),word1()]
while 1==1:
    print(choice(wooo)) 
```

有没有更快的方法来做到这一点并获得真正的随机性？我尝试了课程，但似乎比这更难。另外，有什么办法可以让python不关心天气输入是否是大写字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:34:04.193

```
wooo = [word, word1]
while 1:
    print(choice(wooo)()) 
```

但无论如何它都会打印你`None`，因为你的两个函数都没有返回任何东西（`None`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:45:44.703

要回答您问题的一部分（“有什么方法可以让 python 不关心天气输入是否为大写字母？”）：使用`some_string.lower()`：

```
>>> "foo".lower() == "foo"
True
>>> "FOO".lower() == "foo"
True 
```

这是为了帮助您如何改进代码的结构：

```
import sys
from random import choice

WORDPAIRS = [('Humiliate', 'abasement'), ('Swelling', 'billowing')]

def ask():
    pair = choice(WORDPAIRS)
    while True:
        answer = raw_input("%s: " % pair[0]).lower()
        if answer == pair[1]:
            print "well done!"
            return

def main():
    try:
        while True:
            ask()
    except KeyboardInterrupt:
        sys.exit(0)

if __name__ == "__main__":
    main() 
```

它是这样工作的：

```
$ python lulu.py 
Swelling: lol
Swelling: rofl
Swelling: billowing
well done!
Humiliate: rofl
Humiliate: Abasement
well done!
Swelling: BILLOWING
well done!
Humiliate: ^C
$ 
```

# matlab - 如何使用matfile Matlab保存数据

> ID：12201499
> 
> 赞同：0
> 
> 时间：2012-08-30T16:32:41.487
> 
> 标签：matlab

matlab 新手，我需要一些帮助。

我需要使用or创建一个`.mat`文件，其中包含将从某个变量传递的一些信息。让我们说这个变量`matObj``save()``x = 1,2,3,4,5`

```
1|2|3|4|5| 
```

然后我需要把它保存在`test.mat`

然后我需要加载该文件并保存类似的内容，

```
6|7|8|9|10| 
```

所以我得到

```
1|2|3|4|5|

6|7|8|9|10| 
```

等等。

所以每次我保存它都会进入一个新行。里面的数字不是随机的，上面的数字只是为了让事情变得简单。

有人可以帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:42:27.913

您在这里描述了两个不同的问题。首先是数据的保存和加载。

保存很容易：

```
x = 1:5;
filename = 'myFile.mat'
save(filename, 'x'); %notice that I used the string name of the variable 
```

同样加载也很简单：

```
filename = 'myFile.mat';
data = load(filename); % loaded variables are placed in a struct to prevent overwriting workspace variables
x = data.x; 
```

第二个问题可以使用连接来解决：

假设您要将向量`1 2 3`转换为矩阵：

```
1 2 3
1 2 3 
```

您可以简单地调用：

```
v = 1:3;
m = cat(1, v, v); 
```

同样，您可以使用相同的命令向现有矩阵添加额外的行：

```
m = cat(1, m, v); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:43:14.917

我敢肯定，任何数量的谷歌搜索都会让您了解如何将变量保存到 mat 文件 - matlab 文档绝对是壮观的，这样一个简单的操作将与展示如何使用这些函数的示例一起介绍。

至于第二部分，使用连接属性

```
new = [old1 old2]; 
```

水平连接，和

```
new = [old1;old2]; 
```

垂直连接。然后用你刚刚通过谷歌学到的同样的方法重新保存。

希望这会有所帮助，并且在将来，如果您在搜索中附加“matlab”，我保证 99% 的新用户问题的答案将出现在前两个谷歌搜索结果中。在我看来，Mathworks 确实为文档设置了标准。（当然，我上次使用 MATLAB 是在 3 年前）

# c# - 如何更改控制台应用程序的堆栈大小？

> ID：12201506
> 
> 赞同：2
> 
> 时间：2012-08-30T16:33:12.127
> 
> 标签：c#, stack-overflow, stack-size

> **可能重复：**
> [如何更改 .NET 程序的堆栈大小？](https://stackoverflow.com/questions/2556938/how-to-change-stack-size-for-a-net-program)

我想更改以下控制台应用程序的堆栈大小：

```
using System;
using System.IO;

class Test {

    static int n;
    static bool[] us;
    static int[,] matr;

    static void dfs(int a) {
        us[a] = true;
        for (int b = 0; b < n; b++) {
            if (!us[b]) {
                dfs(b);
            }
        }
    }

    static void Main() {
        StreamReader input = new StreamReader("input.txt");
        StreamWriter output = new StreamWriter("output.txt");
        string[] snum = input.ReadLine().Split(' ');
        n = int.Parse(snum[0]);      // number of vertices
        int m = int.Parse(snum[1]);  // number of edges
        us = new bool[n];
        matr = new int[n, n];
        for (int i = 0; i < m; i++) {
            snum = input.ReadLine().Split(' ');
            int a = int.Parse(snum[0]) - 1, b = int.Parse(snum[1]) - 1;
            matr[a, b] = matr[b, a] = 1;
        }
        for (int i = 0; i < n; i++) {
            if (!us[i]) {
                dfs(i);
            }
        }
        input.Close();
        output.Close();
    }
} 
```

大约是什么时候`n`。100,000，深度`dfs`约为。100,000 并且应用程序抛出`StackOverflowException`.

我知道默认堆栈大小是 1 MB，但我不知道如何更改它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:37:43.793

```
int stackSize = 1024*1024*64;
Thread th  = new Thread( ()=>
    {
        //YourCode
    },
    stackSize);

th.Start();
th.Join(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:36:08.783

指定更大堆栈大小的最简单方法是创建一个新线程——有一个构造函数重载允许您指定大小。将逻辑移动到新方法中，然后在 Main 方法中创建一个具有更大堆栈大小的新线程来运行新方法。例子：

```
 static void Main() {
        const int stackSize = 0x400000;
        var thread = new Thread(NewMethod, stackSize);
        thread.Start();
        thread.Join();
    }

    static void NewMethod() { 
        StreamReader input = new StreamReader("input.txt"); 
        StreamWriter output = new StreamWriter("output.txt"); 
        string[] snum = input.ReadLine().Split(' '); 
        n = int.Parse(snum[0]); 
        int m = int.Parse(snum[1]); 
        us = new bool[n]; 
        matr = new int[n, n]; 
        for (int i = 0; i < m; i++) { 
            snum = input.ReadLine().Split(' '); 
            int a = int.Parse(snum[0]) - 1, b = int.Parse(snum[1]) - 1; 
            matr[a, b] = matr[b, a] = 1; 
        } 
        for (int i = 0; i < n; i++) { 
            if (!us[i]) { 
                dfs(i); 
            } 
        } 
        input.Close(); 
        output.Close(); 
    } 
```

如果您无法更改源代码，您也可以使用 EDITBIN。有关详细信息，请参阅此答案：[https ://stackoverflow.com/a/2556970/385844](https://stackoverflow.com/a/2556970/385844)

# php - 在drupal中生成时间列表

> ID：12201509
> 
> 赞同：0
> 
> 时间：2012-08-30T16:33:19.583
> 
> 标签：php, drupal

有没有办法使用drupal form api为选择列表元素生成时间列表（例如：上午1:00，上午2:00 .....12PM）？如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:47:28.210

在 PHP 中你可以使用

```
foreach(range(1,24) as $time)
{
    $hours[] = date("g:i a", strtotime($time.":00:00"));
} 
```

# javascript - 有人能解释一下表示层是如何与服务层通信的吗？

> ID：12201511
> 
> 赞同：0
> 
> 时间：2012-08-30T16:33:23.147
> 
> 标签：javascript, wcf, dto

有人可以解释表示层如何与服务层通信吗？

我知道我必须使用这些东西来实现这种魔力（WCF、DTO 和 Javascript），但我不确定如何将它们组合在一起。

WCF - Windows 通信基础 - 用于构建面向服务的应用程序的 MS 技术

DTO - 数据传输对象 - 用于将数据从一层/层传输到另一层/层的特殊类型的对象。

我正在使用 aspx，javascript 作为我的表示层，这与 html 并没有太大的不同。所以我想问题是如何使用 javascript 通过 DTO 与我的 WCF 服务层进行通信？

我的架构：

* * *

| 表示层 (aspx) |

* * *

* * *

| 服务层（使用 WCF）|

* * *

* * *

| 业务层（使用 C#）|

* * *

* * *

| 数据访问层 |

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:23:47.220

如果您打算使用 JavaScript，那么编写 SOAP Web 服务的运气会好得多——这可以在 C# 中轻松完成。

当提供者和消费者都用 .net 编写时，WCF 是最好的。

框 1（Web 服务服务器）层

*   公开服务（WCF Web 服务提供者）
*   商业 (C#)
*   数据访问

框 2（Web 服务器）层

*   查看（ASPX/Javascript）
*   控制器 (C#)
*   模型（WCF Web 服务使用者）

MSDN 示例：http: [//msdn.microsoft.com/en-us/library/ms734712.aspx](http://msdn.microsoft.com/en-us/library/ms734712.aspx)

# node.js - 针对大量出站 HTTP 请求优化 Node.js？

> ID：12201513
> 
> 赞同：10
> 
> 时间：2012-08-30T16:33:29.027
> 
> 标签：node.js

我的 node.js 服务器有时会变慢或无响应，甚至在尝试连接到服务器时偶尔会导致 503 网关超时。

我有 99% 的把握（基于我已经运行的测试）这种延迟主要来自我使用[node-oauth 模块](https://github.com/ciaranj/node-oauth)发出的大量出站请求以联系外部 API（Facebook、Twitter 和许多其他 API）。诚然，发出的出站请求数量相对较大（大约每分钟 30 个左右）。更糟糕的是，这通常意味着对我的服务器的相应入站请求可能需要大约 5-10 秒才能完成。但是，我有一个以前用 PHP 编写的 API 版本，它能够毫无问题地处理这么多的出站请求。实际上，使用我的 Node.js API 处理相同数量（甚至更少）请求的 CPU 使用率大约是我的 PHP API 的 5 倍。

所以，我试图找出我可以改进的地方，最重要的是确保不会发生 503 超时。以下是我读过或尝试过的一些东西：

*   这篇[文章（由 LinkedIn）](http://engineering.linkedin.com/nodejs/blazing-fast-nodejs-10-performance-tips-linkedin-mobile)建议关闭套接字池。然而，当我联系流行的[nodejs-request 模块](https://github.com/mikeal/request)的作者时，他的回答是，这是一个非常糟糕的想法。
*   我听说将“http.globalAgent.maxSockets”设置为一个很大的数字会有所帮助，实际上它似乎确实减少了我的瓶颈

我可以继续，但简而言之，我几乎找不到关于如何优化性能的明确信息，因此这些出站连接不会滞后于来自客户端的入站请求。

提前感谢您的任何想法或贡献。

FWIW，我也在使用 express 和 mongoose，我的服务器托管在 Amazon Cloud 上（2x M1.Large 用于节点服务器，2x 负载均衡器和 3x M1.Small MongoDB 实例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:35:40.703

在我看来，代理将您的请求限制在每个主机 5 个的默认级别。你的测试表明启动代理有`maxSockets`帮助......你应该这样做。

您可以通过启动数据包嗅探器或向应用程序添加更多调试代码来证明这是问题所在，以表明这是限制因素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-15T20:10:26.070

[http://engineering.linkedin.com/nodejs/blazing-fast-nodejs-10-performance-tips-linkedin-mobile](http://engineering.linkedin.com/nodejs/blazing-fast-nodejs-10-performance-tips-linkedin-mobile)

完全禁用代理。

# android - 数据存储在android数据库中的哪里以及如何查看全部？

> ID：12201530
> 
> 赞同：0
> 
> 时间：2012-08-30T16:34:39.507
> 
> 标签：android

我想知道所有存储在android中的位置。就像收件箱消息存储在

```
content://sms/inbox 
```

和发件箱消息

```
content://sms/outbox 
```

或者它们可能没有被存储，但是它们是从这些区域中解析出来的，就像在这个语句中一样

```
contentResolver.query(Uri.parse("content://sms/inbox"),null, null, null, null); 
```

所以我想知道如何在**"content://"**或**"content://sms/"中获取所有****“文件夹**” 。 另外我想知道**通话记录**存储在哪里或从哪里获取它们。有什么办法可以让所有这些存储这些类型的东西的区域？

 ********我想知道的是，有人如何知道“content://sms/inbox”有收件箱短信，“content://sms/outbox”有发件箱？我只想探索整个目录，无论是内置的还是 App 的。请解释答案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:43:55.600

如果您只对通话记录感兴趣，可以参考[这篇文章。](https://stackoverflow.com/a/6447182/824345)

数据存储在 android 的 sqLite 中，[这里](https://stackoverflow.com/questions/1510840/where-does-android-emulator-store-sqlite-database)有一些对您的查询有用的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:50:54.020

如果您想从 Eclipse 中查看数据库的存储方式或位置，请转到 Window>Open Perspective>Other>DDMS。

通话记录检查 Sayyam 的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:21:01.990

从 Eclipse 中的 DDMS 透视图中，使用文件资源管理器从以下路径中查找应用程序的数据库。

```
data/data/your.package.name/databases 
```

您可以将[Questoid SQLite 和 XML Browser Plugin](http://www.questoid.com/Tools/CellObjectSQLiteXMLBrowser.aspx)安装到您的 Eclipse 安装中，并且能够从 Eclipse 本身浏览数据。

这是 Questoid 的实际应用。 ![在此处输入图像描述](../Images/e7988d7d6d664353e4da2f6fbbd3513e.png)******

# jquery - jquery 附加到 div html 文件内容

> ID：12201531
> 
> 赞同：1
> 
> 时间：2012-08-30T16:34:46.773
> 
> 标签：jquery, html, sharepoint, prepend

这该怎么做

```
$('#RibbonContainer-TabRowRight').prepend(load('~/_layouts/1033/nav.html')); 
```

像这样而不是：

```
$('#RibbonContainer-TabRowRight').prepend('<div style="padding-bottom:3px;background:#fff; color:white!important; float:left; margin-right:20px; line-height:40px;"><a style="padding:0 20px; border:1 green solid;" href="#">Sitemap</a> <a style="padding:0 20px; border:1 green solid;" href="#">Help</a><a style="padding:0 20px; border:1 green solid;" href="#">Welcome!</a></div>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:01:29.870

只需使用函数 .load()

像这样

```
$('#RibbonContainer-TabRowRight').load('/_layouts/1033/nav.html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T09:11:39.250

```
$.get("../_layouts/1033/nav.html", function(r){
    $("#RibbonContainer-TabRowRight").append(r);
}); 
```

如果需要，这不会替换和执行脚本。

# gdb - 如何设置 GDB 内存检查 (x) 或打印 (p) 命令的宽度？

> ID：12201533
> 
> 赞同：7
> 
> 时间：2012-08-30T16:34:48.710
> 
> 标签：gdb

我正在尝试获得一个长二维数组的格式化打印，宽度为 8，浮点数。使用该`x`命令时，我将数组打印为四列表：

```
(gdb) x/16f 0x81000000
0x81000000: 0   0   1   0
0x81000010: 2   0   3   0
0x81000020: 4   0   5   0
0x81000030: 6   0   7   0 
```

使用该`p`命令时，我得到一个未格式化的输出，即终端的宽度：

```
(gdb) p/f *(0x81000000)@16
$27 = {0, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6, 0, 7, 0} 
```

所需的输出，例如：

```
(gdb) x/16f 0x81000000
0x81000000: 0   0   1   0   2   0   3   0
0x81000020: 4   0   5   0   6   0   7   0 
```

或者：

```
(gdb) p/f *(0x81000000)@16
$27 = {0, 0, 1, 0, 2, 0, 3, 0,
       4, 0, 5, 0, 6, 0, 7, 0} 
```

**有没有一种简单的方法来格式化特定宽度的输出？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T21:13:54.333

使用python脚本：

我认为这非常接近，如果非常模糊：

`python print "\n".join(", ".join(gdb.execute('x/f 0x%x' % a, False, True).split()[-1] for a in range(s, s+32, 4)) for s in range(0x81000000, 0x81000040, 32))`

# android - 在 BroadcastReceiver 中使用 findViewById

> ID：12201535
> 
> 赞同：0
> 
> 时间：2012-08-30T16:34:53.100
> 
> 标签：android, broadcastreceiver, findviewbyid

我正在创建一个短信应用程序来处理 2 个用户定义列表的接收短信操作。对于每个列表，我创建了一个活动和 xml 文件，例如 favourite_list.xml 和 contact_list.xml。在这些 xml 文件中有 2 个切换按钮。我要做的是，每当收到短信时，了解每个切换按钮的状态（开/关）。

这是我的 SmsReceiver 类

```
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ToggleButton;
import android.telephony.SmsMessage;

public class SmsReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;

        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];    
            String str="";
            for (int i=0; i<msgs.length; i++){                                                  
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();  
            }    
        }     
    }        
} 
```

我知道我应该使用 findViewById() 来达到按钮的状态，但我不能直接使用它，因为 SmsReceiver 不是从 Activity 扩展的。到目前为止，我尝试使用 findViewById

1- 将上下文投射到 Activity

```
try{                    
    tb = (ToggleButton) ((Activity)context).findViewById(R.id.toggleButton3);
    if(tb.isChecked())
        Log.d("sms","SOUND-ON");
    else if(!tb.isChecked())
        Log.d("sms","SOUND-OFF");
}catch(Exception e){
    Log.d("sms","Error " + e);
} 
```

它给出了 java.lang.ClassCastException: android.app.ReceiverRestrictedContext

2- 使用 LayoutInflater

```
try{
    LayoutInflater mInf = LayoutInflater.from(context);
    View myView = mInf.inflate(R.layout.activity_favorite_list, null);
    tb = (ToggleButton) myView.findViewById(R.id.toggleButton3);
    if(tb.isChecked())
        Log.d("sms","SOUND-ON");
    else if(!tb.isChecked())
        Log.d("sms","SOUND-OFF");
}catch(Exception e){
    Log.d("sms","Error" + e);
} 
```

这也不起作用，因为它仅在应用程序启动时提供切换按钮的状态。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:49:35.610

如果您`ToggleButton`在这两个活动中的每一个中都有一个，则可以使用两个首选项字段，每次修改其状态时都会写入活动中。在 中，`BroadcastReceiver`您将使用相同的首选项字段来查看`ToggleButton`的状态。

如果您`ToggleButton`在两个活动的列表的每一行中都有一个，那么您将使用相同的方法，只需要使用另一个结构来保存所有行中的所有值（例如`String`，每行的 `ToggleButton`状态将是一个由 a 分隔的值分隔符（如`|`））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:53:44.107

要使活动中的字段在活动中可用，`BroadcastReceiver`您可以`BroadcastReceiver`在活动中创建匿名类

```
 //within activity
          BroadcastReceiver receiver ;
          ToggleButton tb;

   //         within on create
    receiver =  new BroadcastReceiver(){
        public void onReceive(Context p1, Intent p2)
        {
                  // access tb here         
        }
    }; 
```

# java - 国家特定日历java

> ID：12201541
> 
> 赞同：-1
> 
> 时间：2012-08-30T16:35:21.710
> 
> 标签：java, jakarta-ee, ejb, quartz-scheduler

谁能给我指点图书馆/获取特定国家/地区日历的方式。这是因为我正在寻找实现 Quartz 并且想为不同的国家使用不同的日历。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:39:37.790

我建议尝试 Joda Time

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

，它有不同的年表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:18:17.300

看看这个->

[http://icu-project.org/docs/papers/international_calendars_in_java.html](http://icu-project.org/docs/papers/international_calendars_in_java.html)

正如 Joao 建议的那样，您可以使用

```
Calendar c = Calendar.getInstance(Locale.FRANCE); 
```

你也应该看看这个

[有没有办法使用（仅）国家代码（有效的 ISO-3166 代码）获得时区？](https://stackoverflow.com/questions/1389837/is-there-a-way-to-get-a-timezone-with-only-a-country-code-valid-iso-3166-code)

还有这个

[java.util.Calendar 的非标准语言环境](https://stackoverflow.com/questions/4493976/non-standard-locale-with-java-util-calendar)

其他最好的方法是使用[Joda-Time](http://joda-time.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:29:42.197

JodaTime 是一个非常好的 api 来操作这些东西。

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

# mysql - 通过 PHPMyAdmin 导入一些数据库条目并覆盖

> ID：12201543
> 
> 赞同：6
> 
> 时间：2012-08-30T16:35:41.070
> 
> 标签：mysql, database, import, phpmyadmin, export

我通过 PhpMyAdmin 从本地存储在我的 MySQL 数据库中的数据库中导出了几个条目，我只想替换在线托管的目标数据库中的那些条目。不幸的是，当我尝试这样做时，PHPMyAdmin 说这些帖子已经存在，因此他无法删除它们。

在其余帖子中手动搜索这些条目并一次删除它们将花费我很多时间，所以我想知道是否有任何解决方法可以在导入时覆盖这些条目。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-10-11T18:14:25.190

一个很好的选择是在本地从 phpMyAdmin 初始导出时处理此问题。从 phpMyAdmin 导出时：

1.  导出方式：自定义
2.  格式：SQL
3.  格式特定选项 - 选择“数据”（而不是“结构”或“结构和数据”）
4.  在数据创建选项 - 转储数据时使用的功能：将“插入”切换为“更新”<--这是票！
5.  点击去！

导入您的生产数据库。（始终事先备份您的生产数据库以防万一）

我知道这是一篇旧帖子，但它实际上帮助我找到了 phpMyAdmin 内置的解决方案。希望它可以帮助别人！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T16:39:28.453

这是一种快速而肮脏的方法。其他人可能有更好的解决方案：

听起来您正在尝试运行 INSERT 查询，而 phpMyAdmin 告诉您它们已经存在。如果您使用 UPDATE 查询，则可以更新信息。

我会将那里的查询复制到文本编辑器中，最好是可以处理查找和替换的文本编辑器，例如 Notepad++ 或 Gedit，然后替换一些代码以将查询从 INSERT 更改为 UPDATE。

见： [http ://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

或者，您可以删除它们，然后运行您的 INSERT 查询。

您可能可以使用一些逻辑与查找和替换来进行删除查询，首先摆脱它们。

[http://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T19:17:16.103

签出[insert on duplicate](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。您可以将语法添加到本地存储的条目中，或者导入到临时数据库中，然后运行`INSERT ... SELECT ... ON DUPLICATE KEY UPDATE`​​. 如果您可以发布架构，它将帮助我们更好地指导您。

# java - 在 Android 中创建自己的样式

> ID：12201546
> 
> 赞同：1
> 
> 时间：2012-08-30T16:35:47.163
> 
> 标签：java, android, android-layout

每次我尝试自定义视图的样式时，我都会遇到同样的问题。我可以更改哪些参数；以及如何覆盖系统默认值？例如：

*   `ListView`单击时如何更改a元素的突出显示颜色
*   如何更改`frame`a的默认值`DialogFragment`？我的意思是使用 Style 删除的框架`DialogFragment.STYLE_NO_FRAME`。

我在哪里可以检查我应该使用哪些值来实现我的自定义布局？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:00:05.520

好吧，您可以通过在可绘制文件夹中创建一个新的 xml 文件来更改外观，但不要制作布局 xml，只需从向导中选择 andrid xml，它将提供您可以修改的组件列表，包括颜色。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <shape android:shape="rectangle">
        <solid android:color="@android:color/black" />
    </shape>
</item>
<item android:top="1dp" android:left="2dp" android:right="2dp" android:bottom="25dp">
    <shape android:shape="rectangle">
        <solid android:color="@android:color/holo_purple" />
    </shape>
</item>
<item android:top="1dp" android:left="400dp" android:right="2dp"   android:bottom="1dp">
    <shape android:shape="rectangle">
        <solid android:color="@android:color/holo_purple" />

        <corners android:bottomRightRadius="7dp"
        android:bottomLeftRadius="7dp" android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />
    </shape>
</item>

<item android:top="1dp" android:left="2dp" android:right="400dp"              android:bottom="1dp">
    <shape android:shape="rectangle">
        <solid android:color="@android:color/holo_purple" />

        <corners android:bottomRightRadius="7dp"
        android:bottomLeftRadius="7dp" android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />
    </shape>
</item>
</layer-list> 
```

那么您可以更改所需的内容！但是提供一些代码，我将能够更好地回答..

# css - 不均匀列表的内部 CSS 网格边框

> ID：12201548
> 
> 赞同：1
> 
> 时间：2012-08-30T16:35:52.933
> 
> 标签：css, grid, border

[http://jsfiddle.net/jeepstone/UZejB/](http://jsfiddle.net/jeepstone/UZejB/)

当我有 12 个产品，或者实际上是行长的任意倍数 (3) 时，这个网格可以正常工作，但是当我有剩余的项目时，我的边框不起作用。我追求适用于任意数量项目的内部网格。

如果最后一行只有 1 个项目，则有底部或右侧边框。如果有 2 个，则这些项目只有一个右边框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:42:48.023

在您的小提琴中，您在最后 3 个元素上有“last3”类。我不确定你是如何生成这个的，但是如果你可以生成这个，你应该能够改为使用模来生成一个简单地称为“lastrow”的类，它只会出现在最后一行中的项目上，而不是总是在最后一行3.有了这个，你可以很容易地告诉它显示某些边框。我还将边框顶部更改为边框底部，这样可以保证您始终有一个您应该使用的边框（例如 10 个项目）

**带有新类的 HTML**

```
<section class="products">
    <article class="product-single  cf">1</article><article class="product-single  cf">2</article><article class="product-single  cf">3</article><article class="product-single  cf">4</article><article class="product-single  cf">5</article><article class="product-single  cf">6</article><article class="product-single  cf">7</article><article class="product-single  cf last3 ">8</article><article class="product-single cf">9</article><article class="product-single lastrow cf">10</article><article class="product-single lastrow cf">11</article></section>​ 
```

**修订的 CSS**

```
* {
 -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -o-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
}
section.products {
width: 100%;        
}
section.products article.product-single  {
    width: 33.3333%;
    padding: 2%;
    display: inline-block;
    vertical-align: top;
    position: relative;
    min-height: 260px;
    border-bottom: 1px solid red;
    border-right: 1px solid red;
    position: relative;
}

section.products article.product-single:nth-child(3n) {
    border-right: none;
}

section.products article.lastrow{
    border-bottom: none;
} 
```

​</p>

[这是小提琴。](http://jsfiddle.net/digthedoug/u2mpP/)

# python - 创建 .deb-package 时更改 python 包的安装路径

> ID：12201553
> 
> 赞同：3
> 
> 时间：2012-08-30T16:36:02.950
> 
> 标签：python, package, distutils, deb

我正在尝试从 tarball 中的分发创建一个 deb 包。它有`setup.py`文件。我的行动是：

```
python setup.py --command-packages=stdeb.command sdist_dsc
cd deb_dist/<pkgname>
debuild -uc -us -i -b 
```

一切正常。但是当我这样做时

```
dpkg -i <pkgname>.deb 
```

所有包模块的文件都安装到`/usr/share/pyshared/<pkgname>`目录中，我想更改它。

可能吗？如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:48:29.847

根据[Debian Python Policy](http://www.debian.org/doc/packaging-manuals/python-policy/) ，这是安装 Python 系统库的正确目录。`/usr/lib/python2.*/dist-packages`生成的 deb 源应该根据安装的 Python 版本安排将这些文件符号链接到适当的目录中。这通常会`dh_python2`在包构建期间由工具处理；它应该将调用`update-python-modules`放在生成的 postinst 中。

这种行为是可以改变的，但改变它的正确方法取决于你想要改变它的原因。这个过程的哪一部分不适合你？

# css - 指定 element.class { ... } 与仅指定 .class { ... } 的性能提升？

> ID：12201562
> 
> 赞同：7
> 
> 时间：2012-08-30T16:36:16.093
> 
> 标签：css, performance, optimization

如果我知道某个特定的类只会用于 div 或 p，那么通过指定 div.class 或 p.class 而不是仅 .class 是否会对性能产生最轻微的影响？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T17:00:14.080

如果你有兴趣自己测试，Steve Souders 有一个“CSS Test Creator”，可以让你测试不同 CSS 选择器的速度：

[http://stevesouders.com/efws/css-selectors/csscreate.php](http://stevesouders.com/efws/css-selectors/csscreate.php)

我测试了两者`.class`并`a.class`使用了 10,000 个规则和 10,000 个锚点。每个测试运行 5 次，我得到以下结果：

```
+----------+-----------+----------+
|  Test #  |  a.class  |  .class  |
+----------+-----------+----------+
|    1     |  2915 ms  |  2699 ms |
|    2     |  3021 ms  |  2869 ms |
|    3     |  2887 ms  |  3033 ms |
|    4     |  2990 ms  |  3035 ms |
|    5     |  2987 ms  |  2980 ms |
+----------+-----------+----------+
|  AVERAGE |  2960 ms  |  2923 ms |
+----------+-----------+----------+ 
```

如您所见，`.class`速度稍快，但微不足道（超过 10,000 个元素 37 毫秒）。但是，使用over*是*有原因的，那就是灵活性。如果您有一堆元素稍后更改为元素，那么如果您使用规则，则必须修改您的 CSS。如果您使用，则不需要 CSS 更新。`.class``tag.class``<div class="content">``<section class="content">``div.content``.content`

一般来说，`tag.class`如果您有多个使用同一类的标签类型，并且您只想定位特定的标签类型，我只会使用样式选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:37:53.667

是的，`.class`比`element.class`. 那是因为 CSS 是从左到右读取的，所以`.class`意思是（“匹配所有类名为`.class`”的元素），而`element.class`意思是（“匹配所有类名`.class` **也为`element`**”的元素）。

但是，`element.class`将具有比 更高的特异性值`.class`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T18:52:30.167

我知道这不是问题，但它会影响特异性，因此在下面的示例中，innerClassFails 不会覆盖包含的 tds，而 table.innerClass 会覆盖它。

```
<style>
table.outerClass td {
    color: red;
}

table.innerClass td {
    color: green;
}

.innerClassFails td {
    color: green;
}
</style>
<table class='outerClass'><tr><td><table class='innerClass'><tr><td>Hello!</td></tr></table></td></tr></table>

<table class='outerClass'><tr><td><table class='innerClassFails'><tr><td>Hello!</td></tr></table></td></tr></table> 
```

# c++ - 什么库包含地图 STL 集合？

> ID：12201566
> 
> 赞同：1
> 
> 时间：2012-08-30T16:36:37.100
> 
> 标签：c++, stl, shared-libraries, lnk2001

我正在尝试编译一个项目，但是当我包含一个地图对象时，它给了我一个 LNK2001 错误。我已经包含了正确的头文件，但我不知道我应该包含什么库。

我正在使用 Visual Studio 2008，当我将“忽略所有默认库”设置为“否”时，它会起作用，但是以这种方式设置属性并不是最终结果的允许选项。我以为会有某种全 STL 库，但我的代码中有向量和出队，它们工作正常。只有当我添加地图对象时才会显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:57:48.447

正确的包含应该如下所示：

```
#include <map> 
```

map 的正确初始化应该是这样的：

```
std::map<int, char> mymap; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:14:34.413

所以，一个朋友遇到了类似的问题，我需要的库是 msvcprt.lib 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:04:10.030

这可能是 STL 实现中的一种优化——不依赖于任何模板参数的代码被拆分为一个基类，因此在所有实例中只使用一个副本，这个副本保存在 C++ 标准库中，所以你将无法避免链接到这个库。

# jquery - 按项目数量创建行 django 模板

> ID：12201569
> 
> 赞同：0
> 
> 时间：2012-08-30T16:36:52.247
> 
> 标签：jquery, html, css, django, django-templates

我想做的是：

创建一个

```
<div class="row-fluid center"> 
```

并且只从 list.dias.all 中放置最多 3 个元素，我很难思考这个代码。

```
 <div class="row-fluid center" id="{{list.dias.all.count}}">
    {% for dia in list.dias.all %}  
            <div class="span4" id="element" >
                <div>
                    <h6 style="color: #9937d8">{{dia.tipo_dias.description}}</h6>
                    <small style="color: #b2e300">{{ dia.title_yt }}</small>

                </div>  
                <div id="another div"></div>
            </div>
    {% endfor %}    
    </div> 
```

是一种新手问题，但我不知道使用 Django、django-templates 或 jQuery 解决是否更好。

提前致谢

-- 已编辑

谢谢！但我想迭代，为每三个元素创建一个新行。我现在更接近回答了。

如果列表有 30 个元素，则为每 3 个元素创建一行。不是前3个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:55:13.203

就这样做：

```
{% for dia in list.dias.all|slice:":3" %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:39:57.200

'cycle' 模板标签也许可以做你想做的事。[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#cycle](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#cycle)

我不确定在您的示例中打开和关闭哪些 div，但想法是您使用循环标签在循环中每隔多次关闭和重新打开 div，除非它是最后一次迭代。

```
<div class="row-fluid center" id="{{list.dias.all.count}}">
{% for dia in list.dias.all %}  
    <div class="span4" id="element" >
        <div>
            <h6 style="color: #9937d8">{{dia.tipo_dias.description}}</h6>
            <small style="color: #b2e300">{{ dia.title_yt }}</small>
         </div>
    {% if forloop.revcounter > 1 %}{% cycle '' '' '</div><div>' %}{% endif %}
    </div>
{% endfor %}    
</div> 
```

# expressionengine - 在与一个条目无关的页面上使用评论系统

> ID：12201576
> 
> 赞同：0
> 
> 时间：2012-08-30T16:37:27.770
> 
> 标签：expressionengine

我想为一个页面启用评论，该页面循环遍历每个类别的条目并在底部显示带有评论的摘要（基本上是起始页）。在不是特定条目的情况下，如何使用评论系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:45:13.990

评论需要用ee吗？如果没有尝试disqus。

如果这不是一个选项，您需要为每个类别创建一个 ee 条目以允许评论。一种可能的方法是为每个类别创建一个条目，然后使用自定义类别字段并创建一个 cat-entry-I'd 字段来保存类别条目。这

# python - 如何在 Python 中将 RGB 图像转换为灰度图像？

> ID：12201577
> 
> 赞同：276
> 
> 时间：2012-08-30T16:37:37.940
> 
> 标签：python, matplotlib

我正在尝试使用`matplotlib`读取 RGB 图像并将其转换为灰度。

在matlab中我使用这个：

```
img = rgb2gray(imread('image.png')); 
```

在[matplotlib 教程](http://matplotlib.sourceforge.net/users/image_tutorial.html)中，他们没有涵盖它。他们只是在图像中阅读

```
import matplotlib.image as mpimg
img = mpimg.imread('image.png') 
```

然后他们对数组进行切片，但这与根据我的理解将 RGB 转换为灰度不同。

```
lum_img = img[:,:,0] 
```

我很难相信 numpy 或 matplotlib 没有将 rgb 转换为灰色的内置函数。这不是图像处理中的常见操作吗？

我编写了一个非常简单的函数，可以`imread`在 5 分钟内处理导入的图像。这是非常低效的，但这就是为什么我希望内置一个专业的实现。

Sebastian 改进了我的功能，但我仍然希望找到内置的功能。

matlab的（NTSC/PAL）实现：

```
import numpy as np

def rgb2gray(rgb):

    r, g, b = rgb[:,:,0], rgb[:,:,1], rgb[:,:,2]
    gray = 0.2989 * r + 0.5870 * g + 0.1140 * b

    return gray 
```

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2012-08-30T16:48:29.157

[用Pillow](https://pillow.readthedocs.io/en/latest/)做这件事怎么样：

```
from PIL import Image
img = Image.open('image.png').convert('L')
img.save('greyscale.png') 
```

* * *

如果输入图像中存在 alpha（透明度）通道并且应该保留，请使用 mode `LA`：

```
img = Image.open('image.png').convert('LA') 
```

* * *

使用 matplotlib 和[公式](https://pillow.readthedocs.io/en/3.2.x/reference/Image.html#PIL.Image.Image.convert)

```
Y' = 0.2989 R + 0.5870 G + 0.1140 B 
```

你可以这样做：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.image as mpimg

def rgb2gray(rgb):
    return np.dot(rgb[...,:3], [0.2989, 0.5870, 0.1140])

img = mpimg.imread('image.png')     
gray = rgb2gray(img)    
plt.imshow(gray, cmap=plt.get_cmap('gray'), vmin=0, vmax=1)
plt.show() 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2015-06-30T10:39:19.030

您还可以使用[scikit-image](http://scikit-image.org/docs/stable/api/skimage.color.html#rgb2gray)`ndarray`，它提供了一些将图像转换为`rgb2gray`.

```
from skimage import color
from skimage import io

img = color.rgb2gray(io.imread('image.png')) 
```

**注**：此转换中使用的权重针对当代 CRT 荧光粉进行了校准：Y = 0.2125 R + 0.7154 G + 0.0721 B

或者，您可以通过以下方式读取灰度图像：

```
from skimage import io
img = io.imread('image.png', as_gray=True) 
```

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2017-07-26T23:06:42.440

在 Ubuntu 16.04 LTS（带 SSD 的 Xeon E5 2670）上使用 Python 3.5 运行 1000 个 RGBA PNG 图像（224 x 256 像素）对三个建议方法的速度进行了测试。

**平均运行时间**

`pil :`1.037 秒

`scipy:`1.040 秒

`sk :`2.120 秒

PIL 和 SciPy 给出了相同`numpy`的数组（范围从 0 到 255）。SkImage 提供从 0 到 1 的数组。此外，颜色转换略有不同，请参见[CUB-200 数据集中的示例。](http://www.vision.caltech.edu/visipedia/CUB-200.html)

`SkImage:` [![图像](../Images/dfa4c85a612775da267bcf7140560255.png)](https://i.stack.imgur.com/ZLd5vm.png)

`PIL :` [![太平船务](../Images/c669e012ac3be107ea77bc72404c3e12.png)](https://i.stack.imgur.com/eQ4KIm.png)

`SciPy :` [![科学派](../Images/892f5e36db3e828bf8f6e958d278c28d.png)](https://i.stack.imgur.com/DTjVSm.png)

`Original:` [![原来的](../Images/0d9f58c0cb2fc1a52eab91e3359ba59b.png)](https://i.stack.imgur.com/43cy1m.png)

`Diff :` [![在此处输入图像描述](../Images/c7229d6f72a7d1e33add9811af5ebe76.png)](https://i.stack.imgur.com/f5fy9m.png)

**代码**

1.  表现

    ```
    run_times = dict(sk=list(), pil=list(), scipy=list())
    for t in range(100):
        start_time = time.time()
        for i in range(1000):
            z = random.choice(filenames_png)
            img = skimage.color.rgb2gray(skimage.io.imread(z))
        run_times['sk'].append(time.time() - start_time)

    ```
    start_time = time.time()
    for i in range(1000):
        z = random.choice(filenames_png)
        img = np.array(Image.open(z).convert('L'))
    run_times['pil'].append(time.time() - start_time)

    start_time = time.time()
    for i in range(1000):
        z = random.choice(filenames_png)
        img = scipy.ndimage.imread(z, mode='L')
    run_times['scipy'].append(time.time() - start_time) 
    ```

    for k, v in run_times.items():
        print('{:5}: {:0.3f} seconds'.format(k, sum(v) / len(v))) 
    ```

2.  输出

    ```
    z = 'Cardinal_0007_3025810472.jpg'
    img1 = skimage.color.rgb2gray(skimage.io.imread(z)) * 255
    IPython.display.display(PIL.Image.fromarray(img1).convert('RGB'))
    img2 = np.array(Image.open(z).convert('L'))
    IPython.display.display(PIL.Image.fromarray(img2))
    img3 = scipy.ndimage.imread(z, mode='L')
    IPython.display.display(PIL.Image.fromarray(img3)) 
    ```

3.  比较

    ```
    img_diff = np.ndarray(shape=img1.shape, dtype='float32')
    img_diff.fill(128)
    img_diff += (img1 - img3)
    img_diff -= img_diff.min()
    img_diff *= (255/img_diff.max())
    IPython.display.display(PIL.Image.fromarray(img_diff).convert('RGB')) 
    ```

4.  进口

    ```
    import skimage.color
    import skimage.io
    import random
    import time
    from PIL import Image
    import numpy as np
    import scipy.ndimage
    import IPython.display 
    ```

5.  版本

    ```
    skimage.**version**
    0.13.0
    scipy.**version**
    0.19.1
    np.**version**
    1.13.1 
    ```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2015-01-16T10:56:03.093

您始终可以使用[`imread`](http://docs.opencv.org/3.0-beta/doc/py_tutorials/py_gui/py_image_display/py_image_display.html)OpenCV 从一开始就将图像文件读取为灰度：

```
img = cv2.imread('messi5.jpg', 0) 
```

[`cvtcolor`](http://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)此外，如果您想将图像读取为 RGB，请进行一些处理，然后转换为您可以从 OpenCV使用的灰度：

```
gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY) 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2015-12-02T15:25:32.970

最快和当前的方法是使用[Pillow](http://pillow.readthedocs.org/en/3.0.x/)，通过`pip install Pillow`.

那么代码是：

```
from PIL import Image
img = Image.open('input_file.jpg').convert('L')
img.save('output_file.jpg') 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-08-30T17:11:52.003

该教程是作弊的，因为它是从以 RGB 编码的灰度图像开始的，所以他们只是对单个颜色通道进行切片并将其视为灰度。您需要做的基本步骤是从 RGB 颜色空间转换为使用近似亮度/色度模型（例如 YUV/YIQ 或 HSL/HSV）进行编码的颜色空间，然后切掉类似亮度的通道并将其用作你的灰度图像。 `matplotlib`似乎没有提供转换为 YUV/YIQ 的机制，但它确实允许您转换为 HSV。

尝试使用`matplotlib.colors.rgb_to_hsv(img)`然后切片数组中的最后一个值 (V) 以获得灰度。它与亮度值不太一样，但这意味着您可以在`matplotlib`.

背景：

*   [http://matplotlib.sourceforge.net/api/colors_api.html](http://matplotlib.sourceforge.net/api/colors_api.html)
*   [http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

或者，您可以使用 PIL 或内置`colorsys.rgb_to_yiq()`函数转换为具有真实亮度值的色彩空间。您也可以全力以赴并推出自己的 luma-only 转换器，尽管这可能有点过头了。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-07-28T11:44:21.897

使用[这个公式](https://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale)

```
Y' = 0.299 R + 0.587 G + 0.114 B 
```

我们能做的

```
import imageio
import numpy as np
import matplotlib.pyplot as plt

pic = imageio.imread('(image)')
gray = lambda rgb : np.dot(rgb[... , :3] , [0.299 , 0.587, 0.114]) 
gray = gray(pic)  
plt.imshow(gray, cmap = plt.get_cmap(name = 'gray')) 
```

然而，将颜色转换为灰度图像的[GIMP软件有三种算法来完成这项任务。](https://docs.gimp.org/2.6/en/gimp-tool-desaturate.html)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-11-19T19:02:26.903

你可以这样做：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.image as mpimg

def rgb_to_gray(img):
        grayImage = np.zeros(img.shape)
        R = np.array(img[:, :, 0])
        G = np.array(img[:, :, 1])
        B = np.array(img[:, :, 2])

        R = (R *.299)
        G = (G *.587)
        B = (B *.114)

        Avg = (R+G+B)
        grayImage = img.copy()

        for i in range(3):
           grayImage[:,:,i] = Avg

        return grayImage       

image = mpimg.imread("your_image.png")   
grayImage = rgb_to_gray(image)  
plt.imshow(grayImage)
plt.show() 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-08-19T23:35:17.450

如果你已经在使用 NumPy/SciPy，你也可以[使用](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.imread.html)：

`scipy.ndimage.imread(file_name, mode='L')`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-02-03T07:19:19.767

使用 img.Convert()，支持“L”、“RGB”和“CMYK”。模式

```
import numpy as np
from PIL import Image

img = Image.open("IMG/center_2018_02_03_00_34_32_784.jpg")
img.convert('L')

print np.array(img) 
```

输出：

```
[[135 123 134 ...,  30   3  14]
 [137 130 137 ...,   9  20  13]
 [170 177 183 ...,  14  10 250]
 ..., 
 [112  99  91 ...,  90  88  80]
 [ 95 103 111 ..., 102  85 103]
 [112  96  86 ..., 182 148 114]] 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-11-10T09:05:40.700

我通过谷歌来到这个问题，寻找一种将已经加载的图像转换为灰度的方法。

这是使用 SciPy 的一种方法：

```
import scipy.misc
import scipy.ndimage

# Load an example image
# Use scipy.ndimage.imread(file_name, mode='L') if you have your own
img = scipy.misc.face()

# Convert the image
R = img[:, :, 0]
G = img[:, :, 1]
B = img[:, :, 2]
img_gray = R * 299\. / 1000 + G * 587\. / 1000 + B * 114\. / 1000

# Show the image
scipy.misc.imshow(img_gray) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-05-07T09:50:50.223

使用 OpenCV 很简单：

```
import cv2

im = cv2.imread("flower.jpg")

# To Grayscale
im = cv2.cvtColor(im, cv2.COLOR_BGR2GRAY)
cv2.imwrite("grayscale.jpg", im)

# To Black & White
im = cv2.threshold(im, 127, 255, cv2.THRESH_BINARY)[1]
cv2.imwrite("black-white.jpg", im) 
```

[![在此处输入图像描述](../Images/7eb4706242142998a2a5ddb352c71f56.png)](https://i.stack.imgur.com/J4eEv.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-18T11:40:18.173

**当所有 3 个颜色通道 (RGB) 中的像素值相同时，该像素将始终为灰度格式。**

将 RGB 图像转换为灰度的一种简单直观的方法是获取每个像素中所有颜色通道的平均值并将值分配回该像素。

```
import numpy as np
from PIL import Image

img=np.array(Image.open('sample.jpg')) #Input - Color image
gray_img=img.copy()

for clr in range(img.shape[2]):
    gray_img[:,:,clr]=img.mean(axis=2) #Take mean of all 3 color channels of each pixel and assign it back to that pixel(in copied image)

#plt.imshow(gray_img) #Result - Grayscale image 
```

输入图像： [![输入图像](../Images/d8df225142a35ec71b523e7de0e5a3f1.png)](https://i.stack.imgur.com/0F6KF.jpg)

输出图像： [![输出图像](../Images/7e9b82fef3ab903b7e7c9a893743c79c.png)](https://i.stack.imgur.com/Xy0hW.jpg)

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-03-16T08:35:51.013

```
image=myCamera.getImage().crop(xx,xx,xx,xx).scale(xx,xx).greyscale() 
```

您可以`greyscale()`直接用于转换。

# c# - 条件编译已关闭 VS 2012 razor javascript

> ID：12201578
> 
> 赞同：3
> 
> 时间：2012-08-30T16:37:38.870
> 
> 标签：c#, javascript, razor, visual-studio-2012

我搜索了 SO 并没有找到解决这个问题的方法。我有这样的代码：

```
<script>
$("AddToFavorites").Click(function() {
    var apiLink = "/url/AddToFavorites?id=" + @Model.RecipeId;
    $.ajax({
        url: apiLink,
        type: "GET"
    });
});
</script> 
```

这 。在 Model.RecipeId 中带下划线，我得到一个编译器错误：

```
Conditional compilation is turned off 
```

不能在 javscript 块中使用 c# 代码吗？如果是这种情况，在这种情况下如何绕过它以使 url 动态化？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:14:09.860

尝试将代码更改为

```
<script type="text/javascript">
$("AddToFavorites").click(function() {
    var apiLink = "/url/AddToFavorites?id=" + "@(Model.MerchantID)";
    $.ajax({
        url: apiLink,
        type: "GET"
    });
});
</script> 
```

你也可能想添加

```
/*@cc_on @*/ 
```

如果错误继续发生。

# javascript - 如何在 java 脚本中解析 JSON 数组

> ID：12201583
> 
> 赞同：2
> 
> 时间：2012-08-30T16:37:54.807
> 
> 标签：javascript, jquery, jsp

我将 SQL 查询结果作为 JSONArray 返回到 JSP 页面。现在我想显示数据。我已经编写了一个代码，但如果 JSONArray 包含更多 23 个对象 eval 或 JSON.parse 函数不起作用，则它仅适用于 JSONArray 中的 23 个对象。请让我知道如何解决这个问题。

下面是我编写的用于迭代这个 JSONArray 的 JS 代码。

```
var data = '<%=(JSONArray) request.getAttribute("resultArray")%>';
data = eval("(" + data + ")");
$(document).ready(function() {
   var table = $('<table/>').appendTo($('#column'));

   var rows = $('<tr/>').appendTo(table);
    $.each(data, function(rowid, row) {
       var rows = $('<tr/>').appendTo(table);
       $.each(row, function(column, data) {
           ($('<td/>').text(data)).appendTo(rows);
       })}); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:54:30.680

只是不要让 JSP 将其打印为引号内的 JS 字符串语法（显然需要对其进行解析才能获得 JS 对象）。摆脱那些报价。JSON 已经采用正确的 JS 对象语法。这也是[“JSON”](http://json.org)的全部含义。

```
var data = <%=request.getAttribute("resultArray")%>;
$(document).ready(function() {
    // ...
}); 
```

* * *

顺便说一句，在 JSP 中使用*scriptlet是一种*[不好的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。如果您已经在使用 JSP 2.0（已经使用了将近十年），只需使用[EL](https://stackoverflow.com/tags/el/info)。

```
var data = ${resultArray};
$(document).ready(function() {
    // ...
}); 
```

注意，也在这里，只是不要引用它。否则它会变成 JS 字符串而不是 JS 对象。

* * *

**与具体问题无关**，这里是否绝对有必要引入额外的 JSON/jQuery 步骤？为什么不直接使用例如[JSTL](https://stackoverflow.com/tags/jstl/info)让 JSP 在服务器端生成所需的 HTML 而不是在客户端生成 JS/jQuery？

# delphi - FPC 中的范围单元名称

> ID：12201586
> 
> 赞同：3
> 
> 时间：2012-08-30T16:38:11.280
> 
> 标签：delphi, fpc

是否可以将具有范围名称的 Delphi 单元移植`MyLib.Classes.pas`到 FPC (ver 2.6.0) 而不重命名它以删除范围前缀`MyLib.`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T18:11:51.393

FPC 的开发版本 (2.7.1)**确实支持**虚线单元名称。请参阅[http://wiki.freepascal.org/FPC_New_Features_Trunk#Delphi-like_namespaces_units](http://wiki.freepascal.org/FPC_New_Features_Trunk#Delphi-like_namespaces_units)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:58:46.120

目前当前的 FPC (2.6.0) 不支持带点的单元名称，存在一个[`proposal`](http://wiki.lazarus.freepascal.org/Namespaces#Suggestion_1_-_.22dotted_unit_name_notation.22)关于这个功能甚至一个 [`report`](http://bugs.freepascal.org/view.php?id=14439)，但似乎关闭并标记为`won't fix`

# django - uwsgi：无法识别的选项 '--module=MyProject.wsgi:application'

> ID：12201588
> 
> 赞同：15
> 
> 时间：2012-08-30T16:38:18.430
> 
> 标签：django, uwsgi

我按照[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/uwsgi/](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/uwsgi/)中的说明进行操作，直到几天前我杀死了 uwsgi 进程并尝试重新启动时它工作正常。然后它说

```
uwsgi: unrecognized option '--module=MyProject.wsgi:application' 
```

我一直在努力解决这个问题，......我已经检查了我的提交历史并且我用来启动 uwsgi 的脚本没有改变：

```
#!/bin/bash
# https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/uwsgi/
uwsgi --chdir=/home/MyProject \
    --module=MyProject.wsgi:application \
    --env DJANGO_SETTINGS_MODULE=MyProject.settings \
    --master --pidfile=/tmp/MyProject-masted.pid \
    --socket=/home/MyProject.sock \
    --processes=5 \
    --harakiri=20 \
    --limit-as=128 \
    --max-requests=5000 \
    --vacuum \
    --home=/home/MyProject/env \
    --daemonize=/var/log/uwsgi/MyProject.log 
```

显然有些东西一定发生了变化，但我看不到什么......我没有运行任何更新，脚本没有改变......请帮助！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-30T18:14:00.650

您可能需要将`--plugins`选项添加到命令行以使用系统安装的 uwsgi。至少在 Fedora 17 上，这对我来说是必要的：

```
$ uwsgi --http 127.0.0.1:8000 --module=wsgiref.simple_server:demo_app
uwsgi: unrecognized option '--module=wsgiref.simple_server:demo_app'
getopt_long() error
$ 
```

但这有效：

```
$ uwsgi --http 127.0.0.1:8000 **--plugins python** --module=wsgiref.simple_server:demo_app
*** Starting uWSGI 1.2.4 (64bit) on [Thu Aug 30 14:09:57 2012] ***
[.. snip]
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T16:52:42.210

我最近在 Unbuntu 12.04 repo (1.0.3) 中尝试使用 uWSGI 版本时遇到了这个问题。看起来那个版本有点旧了。只需使用 pip 抓取它（1.2.5）。

```
pip install uwsgi 
```

# internet-explorer - IE8 中的问题，菜单悬停元素上的背景渐变，适用于所有其他浏览器

> ID：12201591
> 
> 赞同：0
> 
> 时间：2012-08-30T16:38:27.793
> 
> 标签：internet-explorer, css

这是网站：[http ://www.mccaonline.com](http://www.mccaonline.com)

我被聘用处理网站上的渐变菜单问题。菜单在 Firefox、Chrome 和 Safari 中正常运行 - 当您将鼠标悬停在菜单元素上时，背景变为浅渐变绿色。然而，在 IE8 和 IE9 中，所有子菜单元素都分配有浅绿色渐变背景。

[这是它在 IE8 中的外观](http://i.imgur.com/vMCZg.jpg)

我只是希望它在 Internet Explorer 中具有相同的功能，并且无法弄清楚是什么导致它在所有子菜单元素上都具有渐变背景。我用于导航的 CSS 如下：

```
#navigation {
    background: rgb(100,135,125); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: -moz-linear-gradient(top,  rgba(100,135,125,1) 0%, rgba(126,181,165,1) 50%,   rgba(126,181,165,1) 52%, rgba(143,190,174,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(100,135,125,1)), color-stop(50%,rgba(126,181,165,1)), color-stop(52%,rgba(126,181,165,1)), color-stop(100%,rgba(143,190,174,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* IE10+ */
    background: linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#64877d', endColorstr='#8fbeae',GradientType=0 ); /* IE6-8 */
}
/*  HOVER STATE OF NAV BAR  */
#navigation ul.nav > li:hover,
#navigation ul.nav > li a:hover,
ul.nav li.current_page_item a,
ul.nav li.current_page_parent a,
ul.nav li.current-menu-ancestor a,
ul.nav li.current-cat a,
ul.nav   li.li.current-menu-item a {
    background: rgb(100,135,125); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: -moz-linear-gradient(top,  rgba(100,135,125,1) 0%, rgba(136,197,158,1) 47%, rgba(196,233,188,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(100,135,125,1)), color-stop(47%,rgba(136,197,158,1)), color-stop(100%,rgba(196,233,188,1))); /*   Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* IE10+ */
    background: linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#64877d', endColorstr='#c4e9bc',GradientType=0 ); /* IE6-8 */
    color: #ffffff;
} 
 #navigation { 
    background: rgb(100,135,125); /* Old browsers */ 
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */ 
    background: -moz-linear-gradient(top,  rgba(100,135,125,1) 0%, rgba(126,181,165,1) 50%,   rgba(126,181,165,1) 52%, rgba(143,190,174,1) 100%); /* FF3.6+ */ 
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(100,135,125,1)), color-stop(50%,rgba(126,181,165,1)), color-stop(52%,rgba(126,181,165,1)), color-stop(100%,rgba(143,190,174,1))); /* Chrome,Safari4+ */ 
    background: -webkit-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* Chrome10+,Safari5.1+ */ 
    background: -o-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* Opera 11.10+ */ 
    background: -ms-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* IE10+ */ 
    background: linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(126,181,165,1) 50%,rgba(126,181,165,1) 52%,rgba(143,190,174,1) 100%); /* W3C */ 
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#64877d', endColorstr='#8fbeae',GradientType=0 ); /* IE6-8 */ 
} 
/*  HOVER STATE OF NAV BAR  */ 
#navigation ul.nav > li:hover, 
#navigation ul.nav > li a:hover, 
ul.nav li.current_page_item a, 
ul.nav li.current_page_parent a, 
ul.nav li.current-menu-ancestor a, 
ul.nav li.current-cat a, 
ul.nav   li.li.current-menu-item a { 
    background: rgb(100,135,125); /* Old browsers */ 
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */ 
    background: -moz-linear-gradient(top,  rgba(100,135,125,1) 0%, rgba(136,197,158,1) 47%, rgba(196,233,188,1) 100%); /* FF3.6+ */ 
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(100,135,125,1)), color-stop(47%,rgba(136,197,158,1)), color-stop(100%,rgba(196,233,188,1))); /*   Chrome,Safari4+ */ 
    background: -webkit-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* Chrome10+,Safari5.1+ */ 
    background: -o-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* Opera 11.10+ */ 
    background: -ms-linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* IE10+ */ 
    background: linear-gradient(top,  rgba(100,135,125,1) 0%,rgba(136,197,158,1) 47%,rgba(196,233,188,1) 100%); /* W3C */ 
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#64877d', endColorstr='#c4e9bc',GradientType=0 ); /* IE6-8 */ 
    color: #ffffff; 
} 
```

让我知道您的想法或可能导致这种情况的原因。我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:01:03.653

将此添加到您的 CSS 中。

```
#navigation ul.nav .sub-menu li:hover , #navigation ul.nav .sub-menu li a:hover {background:none!important 
```

你会得到你的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:47:24.043

取下过滤器标签并在 jquery 中处理菜单。它会影响菜单上的 2 个级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:44:15.417

您的样式不使用 .sub-menu 类，您是否尝试使用以下类删除背景：

```
.sub-menu .menu-item {
  background: ... 
```

# java - 内联代码比 Java 中的函数调用/静态函数慢

> ID：12201592
> 
> 赞同：2
> 
> 时间：2012-08-30T16:38:47.330
> 
> 标签：java, function, inline

我一直在运行一些测试，以了解内联函数代码（在代码本身中明确编写函数算法）如何影响性能。我将一个简单的字节数组写入整数代码，然后将其包装在一个函数中，从另一个类静态调用它，并从类本身静态调用它。代码如下：

```
public class FunctionCallSpeed {
    public static final int numIter = 50000000;

    public static void main (String [] args) {
        byte [] n = new byte[4];

        long start;

        System.out.println("Function from Static Class =================");
        start = System.nanoTime();
        for (int i = 0; i < numIter; i++) {
            StaticClass.toInt(n);
        }
        System.out.println("Elapsed time: " + (double)(System.nanoTime() - start) / 1000000000 + "s");

        System.out.println("Function from Class ========================");
        start = System.nanoTime();
        for (int i = 0; i < numIter; i++) {
            toInt(n);
        }
        System.out.println("Elapsed time: " + (double)(System.nanoTime() - start) / 1000000000 + "s");

        int actual = 0;

        int len = n.length;

        System.out.println("Inline Function ============================");
        start = System.nanoTime();
        for (int i = 0; i < numIter; i++) {
            for (int j = 0; j < len; j++) {
                actual += n[len - 1 - j] << 8 * j;
            }
        }
        System.out.println("Elapsed time: " + (double)(System.nanoTime() - start) / 1000000000 + "s");
    }

    public static int toInt(byte [] num) {
        int actual = 0;

        int len = num.length;

        for (int i = 0; i < len; i++) {
            actual += num[len - 1 - i] << 8 * i;
        }

        return actual;
    }
} 
```

结果如下：

```
Function from Static Class =================
Elapsed time: 0.096559931s
Function from Class ========================
Elapsed time: 0.015741711s
Inline Function ============================
Elapsed time: 0.837626286s 
```

字节码有什么奇怪的地方吗？我自己看过字节码，但我不是很熟悉，我无法判断它的正面或反面。

**编辑**

我添加了`assert`语句来读取输出，然后随机读取读取的字节，基准测试现在按照我认为的方式运行。感谢 Tomasz Nurkiewicz，他向我指出了微基准测试文章。因此，生成的代码是：

```
public class FunctionCallSpeed {
public static final int numIter = 50000000;

public static void main (String [] args) {
    byte [] n;

    long start, end;
    int checker, calc;

    end = 0;
    System.out.println("Function from Object =================");
    for (int i = 0; i < numIter; i++) {
        checker = (int)(Math.random() * 65535);
        n = toByte(checker);
        start = System.nanoTime();
        calc = StaticClass.toInt(n);
        end += System.nanoTime() - start;
        assert calc == checker;
    }
    System.out.println("Elapsed time: " + (double)end / 1000000000 + "s");
    end = 0;
    System.out.println("Function from Class ==================");
    start = System.nanoTime();
    for (int i = 0; i < numIter; i++) {
        checker = (int)(Math.random() * 65535);
        n = toByte(checker);
        start = System.nanoTime();
        calc = toInt(n);
        end += System.nanoTime() - start;
        assert calc == checker;
    }
    System.out.println("Elapsed time: " + (double)end / 1000000000 + "s");

    int len = 4;
    end = 0;
    System.out.println("Inline Function ======================");
    start = System.nanoTime();
    for (int i = 0; i < numIter; i++) {
        calc = 0;
        checker = (int)(Math.random() * 65535);
        n = toByte(checker);
        start = System.nanoTime();
        for (int j = 0; j < len; j++) {
            calc += n[len - 1 - j] << 8 * j;
        }
        end += System.nanoTime() - start;
        assert calc == checker;
    }
    System.out.println("Elapsed time: " + (double)(System.nanoTime() - start) / 1000000000 + "s");
}

public static byte [] toByte(int val) {
    byte [] n = new byte[4];

    for (int i = 0; i < 4; i++) {
        n[i] = (byte)((val >> 8 * i) & 0xFF);
    }
    return n;
}

public static int toInt(byte [] num) {
    int actual = 0;

    int len = num.length;

    for (int i = 0; i < len; i++) {
        actual += num[len - 1 - i] << 8 * i;
    }

    return actual;
}
} 
```

结果：

```
Function from Static Class =================
Elapsed time: 9.276437031s
Function from Class ========================
Elapsed time: 9.225660708s
Inline Function ============================
Elapsed time: 5.9512E-5s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:43:06.307

总是很难保证 JIT 正在做什么，但如果我不得不猜测，它会注意到函数的返回值从未被使用过，并对其进行了很多优化。

如果您实际使用函数的返回值，我敢打赌它会改变速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:43:33.323

您有几个问题，但主要问题是您正在测试一个优化代码的一个迭代。这肯定会给你带来好坏参半的结果。我建议运行测试 2 秒，忽略前 10,000 次左右的迭代。

如果没有保留循环的结果，则可以在某个随机间隔后丢弃整个循环。

将每个测试分解为一个单独的方法

```
public class FunctionCallSpeed {
    public static final int numIter = 50000000;
    private static int dontOptimiseAway;

    public static void main(String[] args) {
        byte[] n = new byte[4];

        for (int i = 0; i < 10; i++) {
            test1(n);
            test2(n);
            test3(n);
            System.out.println();
        }
    }

    private static void test1(byte[] n) {
        System.out.print("from Static Class: ");
        long start = System.nanoTime();
        for (int i = 0; i < numIter; i++) {
            dontOptimiseAway = FunctionCallSpeed.toInt(n);
        }
        System.out.print((System.nanoTime() - start) / numIter + "ns ");
    }

    private static void test2(byte[] n) {
        long start;
        System.out.print("from Class: ");
        start = System.nanoTime();
        for (int i = 0; i < numIter; i++) {
            dontOptimiseAway = toInt(n);
        }
        System.out.print((System.nanoTime() - start) / numIter + "ns ");
    }

    private static void test3(byte[] n) {
        long start;
        int actual = 0;

        int len = n.length;

        System.out.print("Inlined: ");
        start = System.nanoTime();
        for (int i = 0; i < numIter; i++) {
            for (int j = 0; j < len; j++) {
                actual += n[len - 1 - j] << 8 * j;
            }
            dontOptimiseAway = actual;
        }
        System.out.print((System.nanoTime() - start) / numIter + "ns ");
    }

    public static int toInt(byte[] num) {
        int actual = 0;

        int len = num.length;

        for (int i = 0; i < len; i++) {
            actual += num[len - 1 - i] << 8 * i;
        }

        return actual;
    }
} 
```

印刷

```
from Class: 7ns Inlined: 11ns from Static Class: 9ns 
from Class: 6ns Inlined: 8ns from Static Class: 8ns 
from Class: 6ns Inlined: 9ns from Static Class: 6ns 
```

这表明当单独优化内部循环时，它的效率会更高一些。

但是，如果我使用字节到 int 的优化转换

```
public static int toInt(byte[] num) {
    return num[0] + (num[1] << 8) + (num[2] << 16) + (num[3] << 24);
} 
```

所有测试报告

```
from Static Class: 0ns from Class: 0ns Inlined: 0ns 
from Static Class: 0ns from Class: 0ns Inlined: 0ns 
from Static Class: 0ns from Class: 0ns Inlined: 0ns 
```

因为它意识到测试没有做任何有用的事情。;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T17:21:06.927

我将您的测试用例移植到[caliper](http://code.google.com/p/caliper/)：

```
import com.google.caliper.SimpleBenchmark;

public class ToInt extends SimpleBenchmark {

    private byte[] n;
    private int total;

    @Override
    protected void setUp() throws Exception {
        n = new byte[4];
    }

    public int timeStaticClass(int reps) {
        for (int i = 0; i < reps; i++) {
            total += StaticClass.toInt(n);
        }
        return total;
    }

    public int timeFromClass(int reps) {
        for (int i = 0; i < reps; i++) {
            total += toInt(n);
        }
        return total;
    }

    public int timeInline(int reps) {
        for (int i = 0; i < reps; i++) {
            int actual = 0;
            int len = n.length;
            for (int i1 = 0; i1 < len; i1++) {
                actual += n[len - 1 - i1] << 8 * i1;
            }
            total += actual;
        }
        return total;
    }

    public static int toInt(byte[] num) {
        int actual = 0;
        int len = num.length;
        for (int i = 0; i < len; i++) {
            actual += num[len - 1 - i] << 8 * i;
        }
        return actual;
    }
}

class StaticClass {
    public static int toInt(byte[] num) {
        int actual = 0;

        int len = num.length;

        for (int i = 0; i < len; i++) {
            actual += num[len - 1 - i] << 8 * i;
        }

        return actual;
    }

} 
```

确实似乎内联版本是最慢的，而两个静态版本几乎相同（如预期的那样）：

![卡尺](../Images/31f97e4cd648c974935fe7901038770c.png)

原因很难想象。我可以想到两个因素：

*   当代码块尽可能小且易于推理时，JVM 更擅长执行微优化。当函数被内联时，整个代码变得更加复杂，JVM 放弃了。功能更小`toInt()`，JIT 更聪明

*   缓存局部性 - 不知何故 JVM 用两小块代码（循环和方法）而不是更大的代码块表现得更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:07:51.003

你的测试有缺陷。第二个测试受益于第一个测试已经运行。您需要在其自己的 JVM 调用中运行每个测试用例。

# c# - 使用 C# 创建表头

> ID：12201593
> 
> 赞同：1
> 
> 时间：2012-08-30T16:38:54.367
> 
> 标签：c#, asp.net

我正在尝试使用 asp.net C# 表创建类似电子表格的表，以将其用作时间表，现在我可以创建表 numberOFDayInMonth X 4 cols。我需要一些帮助来了解如何将标题名称和文本框控件动态添加到表格中？有人可以帮助我吗？

我的 C# 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Globalization;

namespace Compudata_ProjectManager
{
    public partial class testPage : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DateTimeFormatInfo info = DateTimeFormatInfo.GetInstance(null);

                for (int i = 1; i < 13; i++)
                {

                    //Response.Write(info.GetAbbreviatedMonthName(i) + "<br />");

                    ddl_months.Items.Add(new ListItem(info.GetMonthName(i), i.ToString()));

                }
            }
        }

        protected void ddl_months_SelectedIndexChanged(object sender, EventArgs e)
        {
            // Remove all the current rows and cells.
            // This is not necessary if EnableViewState is set to false.
            tbl_timesheet.Controls.Clear();
            //declare datetime dt
            DateTime dt =  new DateTime();
            int orderOfMonth = Convert.ToInt32(ddl_months.SelectedValue.ToString());
            //get number of date in X month
            int noOfDays = DateTime.DaysInMonth(dt.Year, orderOfMonth);
            int numOfCols = 4;
            for (int row = 0; row < noOfDays; row++)
            {
                // Create a new TableRow object.
                TableRow rowNew = new TableRow();
                // Put the TableRow in the Table.
                tbl_timesheet.Controls.Add(rowNew);
                for (int col = 0; col < numOfCols; col++)
                {
                    // Create a new TableCell object.
                    TableCell cellNew = new TableCell();
                    cellNew.Text = "Example Cell (" + row.ToString() + ",";
                    cellNew.Text += col.ToString() + ")";

                    // Put the TableCell in the TableRow.
                    rowNew.Controls.Add(cellNew);
                }
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:49:50.530

用于 headerrow 和 Dynamic TextBox 控件

```
Table tbl = new Table(); // Creating a new table

TableHeaderRow header = new TableHeaderRow(); // Creating a header row
tbl.Rows.Add(header); // Add the header row to table tbl        

    // Creating Dynamic TextBox Control
TextBox t = new TextBox();
t.ID = "myTextBox"; // assing an ID

    // Now add this in a table row
TableRow rowNew = new TableRow(); // Creating a new table row
rowNew.Cells[0].Controls.Add(t);         // add the textbox control at cell zero
             // or you can add it as
rowNew.Controls.Add(t); 
```

# android - 由动态文本内容重新对齐的布局

> ID：12201599
> 
> 赞同：0
> 
> 时间：2012-08-30T16:39:29.830
> 
> 标签：android, android-layout

我正在尝试布局一个相当基本的屏幕。它只是单击列表项后的详细信息视图屏幕。

最初，我希望实现并排堆叠标签值类型的屏幕。例如，冒号左侧是静态文本，冒号右侧是基于单击的行的动态值。

名字：john
姓氏：doe
最后登录日期：昨天
附加信息：blah

我从一个相对布局开始，其中包含一堆文本视图，所有这些视图都相应地定位，以实现我想要的东西。

当正在显示的动态数据增长并拉伸其封闭的文本视图时，就会出现问题。当然，静态标签不会增长，一切都会错位......

我想知道是否有不同的方式来处理这种布局......

我回避在垂直线性布局中堆叠一堆水平线性布局。

表格布局是要走的路吗？我读过“它们通常不是这样做的最佳工具，因为它们是从 LinearLayout 派生的，而不是最有效的布局控件”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:42:46.180

就在这里。使用在 xml 中预定义布局的列表视图。使用 simplelistadapter 并将您要填充的数据集传递给它。

**编辑**

这是一个很棒的教程： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:49:21.790

对于您想要创建的简单表单，我建议使用 TableLayout。使用简单。正如您所说，TableLayout 的替代方案是父垂直 LinearLayout 中的水平 LinearLayouts。使用 TableLayout 还会自动为您对齐右侧的动态内容。右侧的所有内容都将被视为一列，因此如果调整大小，它们都会调整大小以匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:57:00.947

在您的特定场景中，我相信 TableLayout 会很好地工作（尽管我也听说过类似的效率/性能问题）。只要这个Activity的整个Viewgroup不复杂，我觉得性能不会太显眼。

如果您正在尝试使 RelativeLayout 版本工作，也许您可​​以尝试以下操作：使用 android:layout_alignParentLeft 将所有静态标签与左侧对齐，并使用 android 将每个标签与它们对应的动态 TextView 的顶部对齐：布局_对齐顶部。这应该保持静态 TextViews 与左侧对齐，同时与相对于它的动态视图对齐。

现在这些视图已经对齐，我们可以使用 android:layout_toRightOf 将动态视图水平对齐到最长的静态 TextView。从那里，所有剩余的动态视图也可以 android:layout_alignLeft 到这个锚动态 TextView，或者也可以以与锚相同的方式对齐到最长的静态 TextView。这样就解决了所有动态TextView的水平对齐问题。

最后，我们可以将每个动态 TextView 设置为下一个，因为动态 TextView 是我们确定我们在此 RelativeLayout 中的垂直位置。每个视图都可以使用 android:layout_alignBelow 链接字段以垂直对齐。

我相信这应该对你有用，如果你想要代码示例，我可以在当天晚些时候编辑这篇文章。

# ios - 将 CIDetector（人脸检测）结果转换为 UIImageView 坐标

> ID：12201603
> 
> 赞同：2
> 
> 时间：2012-08-30T16:39:50.380
> 
> 标签：ios, uiimageview, core-image, face-detection

我一直在努力将 CIDetector（面部检测）结果转换为相对于显示图像的 UIImageView 的坐标，以便我可以使用 CGPaths 绘制坐标。

我已经查看了这里的所有问题以及我能找到的所有教程，其中大多数使用在 UIImageView 中显示时未缩放的小图像（[示例](http://nacho4d-nacho4d.blogspot.com/2012/03/coreimage-and-uikit-coordinates.html)）。**我遇到的问题是使用`aspectFit`在 UIImageView 中显示时使用缩放的大图像并确定正确的比例 + 平移值。**

在使用不同尺寸/纵横比的图像进行测试时，我得到的结果不一致，所以我认为我的例程存在缺陷。我已经为此苦苦挣扎了一段时间，所以如果有人有一些提示或可以对我做错的地方进行 X 光检查，那将是一个很大的帮助。

我在做什么：

*   获取人脸坐标
*   使用`frameForImage`下面的例程（在 SO 上找到）来获取 UIImageView 图像的比例和边界
*   为缩放 + 平移创建变换
*   对 CIDetector 结果应用变换

// 我确定变换值的例程

```
NSDictionary* data = [self frameForImage:self.imageView.image inImageViewAspectFit:self.imageView];

CGRect scaledImageBounds = CGRectFromString([data objectForKey:@"bounds"]);
float scale = [[data objectForKey:@"scale"] floatValue];

CGAffineTransform transform = CGAffineTransformMakeScale(scale, -scale);

transform = CGAffineTransformTranslate(transform, 
          scaledImageBounds.origin.x / scale, 
          -(scaledImageBounds.origin.y / scale + scaledImageBounds.size.height / scale)); 
```

CIDetector 结果转换使用：

```
 mouthPosition = CGPointApplyAffineTransform(mouthPosition, transform); 
```

// 错误结果示例：比例似乎不正确

![在此处输入图像描述](../Images/72541785018e1d82e79256f952462dff.png)

// 下面的例程在 SO 上找到，用于确定使用“aspectFit”在 UIImageView 中缩放的图像的界限

```
-(NSDictionary*)frameForImage:(UIImage*)image inImageViewAspectFit:(UIImageView*)myImageView
{
    float imageRatio = image.size.width / image.size.height;
    float viewRatio = myImageView.frame.size.width / myImageView.frame.size.height;

    float scale;
    CGRect boundingRect;
    if(imageRatio < viewRatio)
    {
        scale = myImageView.frame.size.height / image.size.height;
        float width = scale * image.size.width;
        float topLeftX = (myImageView.frame.size.width - width) * 0.5;
        boundingRect = CGRectMake(topLeftX, 0, width, myImageView.frame.size.height);
    }
    else
    {
        scale = myImageView.frame.size.width / image.size.width;
        float height = scale * image.size.height;
        float topLeftY = (myImageView.frame.size.height - height) * 0.5;
        boundingRect = CGRectMake(0, topLeftY, myImageView.frame.size.width, height);
    }

    NSDictionary * data = [NSDictionary dictionaryWithObjectsAndKeys:
                           [NSNumber numberWithFloat:scale], @"scale",
                           NSStringFromCGRect(boundingRect), @"bounds",
                           nil];

    return data;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:47:55.447

我完全理解你想要做什么，但让我为你提供一种不同的方式来实现你想要的。

*   你有一个过大的图像
*   你知道imageView的大小
*   向图像询问其 CGImage
*   确定“比例”因子，即 imageView 宽度除以图像宽度
*   将此值和您的图像高度相乘，然后从 imageViewHeight 中减去结果，以获得 imageView 中的“空”高度，让我们称之为“fillHeight”
*   将“fillHeight”除以 2 并四舍五入得到下面使用的“偏移”值
*   使用 UIGraphicsBeginImageContextWithOptions(imageView.size, NO, 0) 提供的上下文，绘制你想要的任何颜色的背景，然后绘制你的 CGImage

    CGContextDrawImage (context, CGRectMake(0, offset, imageView.size.width, rintf(image.size.height*scale)), [image CGImage]);

*   使用以下方法获取此新图像：

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); 返回图像；

*   设置图像：imageView.image = image;

现在您可以准确地映射回您的图像，因为您知道确切的缩放比例和偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T23:17:02.500

这可能是您正在寻找的简单答案。如果你的 x 和 y 坐标是倒置的，你可以自己镜像它们。在下面的片段中，我循环遍历我返回的功能并需要反转 y 坐标，如果它是前置摄像头，则需要反转 x 坐标：

```
 for (CIFaceFeature *f in features) {
        float newy = -f.bounds.origin.y + self.frame.size.height - f.bounds.size.height;

        float newx = f.bounds.origin.x;
        if( isMirrored ) {
            newx = -f.bounds.origin.x + self.frame.size.width - f.bounds.size.width;
        }
        [[soups objectAtIndex:rnd] drawInRect:CGRectMake(newx, newy, f.bounds.size.width, f.bounds.size.height)];
    } 
```

# asp.net - 更新数据库功能在 Visual Studio 2012 的“发布 Web”对话框中不起作用

> ID：12201606
> 
> 赞同：5
> 
> 时间：2012-08-30T16:40:06.057
> 
> 标签：asp.net, visual-studio-2012, sql-server-2012, webdeploy, database-deployment

我正在 Visual Studio 2012 下开发 ASP.NET Web 窗体应用程序。我正在使用 Web 部署和发布 Web 对话框进行应用程序部署。我正在尝试使用更新数据库功能部署数据库架构。我输入了一个指向远程 SQL Server 的连接字符串。如果我单击“测试连接”按钮，Visual Studio 会说测试连接成功。

![在此处输入图像描述](../Images/8f3235e517528667fdc03a58eb90ffdc.png)

然后我转到预览选项卡并单击预览数据库链接。

![在此处输入图像描述](../Images/5e4ab1da6e863b079a2e56b87eda1f1a.png)

在打开的窗口中我有消息

> Web 部署任务失败。（无法生成部署脚本。无法连接到目标服务器。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_EXECUTING_METHOD) ?LinkId=221672#ERROR_EXECUTING_METHOD 。）

其他项目文件部署正常。我可以使用 SQL Server 管理服务连接到 SQL Server。但是为什么数据库不能更新呢？我试图禁用服务器防火墙 - 没有运气。

*   视觉工作室专业版 2012
*   SQL Server 2012
*   网络部署 3.0

**更新**

如果我在 DatabaseEntitiesRaw 的连接字符串中使用 SQL Server 身份验证`sa`而不是 Windows 身份验证，则一切正常。但 Windows 身份验证适用于 SSMS，我想使用它，因为我只从公司域内的计算机进行部署。dbDacFx 确实不适用于 Windows 身份验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:39:42.193

部署脚本从 AUTHORITY\LOCAL SERVICE 用户运行，因此您必须将此用户添加到 SQL 服务器。不要忘记为用户添加 db_owner 角色。

# regex - YUI 压缩器正则表达式混淆

> ID：12201610
> 
> 赞同：0
> 
> 时间：2012-08-30T16:40:33.200
> 
> 标签：regex, yui, concatenation, minify, yui-compressor

我正在使用 YUI 压缩器来缩小和合并一些 JS 文件。我可以使用这个来缩小单个文件没有问题：

```
TimPeterson$ -jar yuicompressor-2.4.7.jar /assets/js/input1.js -o /assets/js/output.js --charset utf-8 
```

但是，当我尝试合并和缩小多个 JS 文件时，我收到了以下帮助消息：

```
Multiple files can be processed using the following syntax:
TimPeterson$ java -jar yuicompressor.jar -o '.js$:-min.js' *.js 
```

如果我想压缩和缩小`/assets/js/input1.js` **，** `/assets/js/input2.js`用这种语法会怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:48:39.520

java -jar yuicompressor.jar -o '.js$:-min.js' /assets/js/input1.js /assets/js/input2.js

这应该生成 /assets/js/input1-min.js 和 /assets/js/input2-min.js

# c# - ASP.NET 成员资格和 EF

> ID：12201611
> 
> 赞同：0
> 
> 时间：2012-08-30T16:40:38.107
> 
> 标签：c#, asp.net, sql, entity-framework, asp.net-membership

我有一个叫做`Websites`可以有很多用户的表。（网站和用户之间的多对多关系）。但是，我使用 ASP.NET 内置成员 API 和实体框架来处理数据。

我想做的是使用 EF 将用户添加到网站对象：website.Users.Add(MembershipUser object here)。就这么简单，如果这不是 Membership API，它会容易得多。但是在创建新用户时，我想从复选框列表中的网站表中分配对特定网站的访问权限。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:25:39.647

您的问题要复杂得多，您可能无法在一个问题中获得所有答案。我会尽力的。

这是我的方法-

1) 使用新的[ASP.Net Universal Provider](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

2）实现[自定义成员资格提供程序](http://msdn.microsoft.com/en-us/library/aa479048.aspx)并覆盖

```
public override bool ValidateUser(string username, string password) 
```

这样您就可以根据**用户**表和**网站**表验证用户。

3) 自己创建注册，而不是使用 CreateUserWizard。例如，使用常规文本框。

```
MembershipCreateStatus status;

MembershipUser membershipUser = System.Web.Security.Membership.CreateUser(
UsernameTextBox.Text, PasswordTextBox.Text, EmailTextBox.Text, 
PasswordQuestioTextBox.Text, PasswordAnswerTextBox.Text, true, out status);

// Then assign user to website based on the selected checkboxes 
```

**数据库关系**

![在此处输入图像描述](../Images/380ef7ac7937873764b1d8724eb490c0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:46:41.990

您可以`aspnet_Users`在映射中包含该表，并在网站的表中添加相应的约束。然后，EF 将提供一个代表用户的类和这些用户的集合作为`Websites`.

# algorithm - 确定两个频率之间的不和谐程度

> ID：12201617
> 
> 赞同：3
> 
> 时间：2012-08-30T16:40:51.883
> 
> 标签：algorithm, math, audio

使用连分数，我生成频率之间的整数比率以达到一定的精度，以及误差（整数比率与实数比率的差异）。所以我最终得到了类似的东西：

101 Hz 与 200 Hz = 1:2 + 0.0005
61 Hz 与 92 Hz = 2:3 - 0.0036

但是，我在实际决定哪些会比其他更不和谐时遇到了障碍。起初我认为低数字 = 更好，但像 1:51 这样的数字可能不会很不和谐，因为它的频率比另一个高 51 个八度。这可能是一种高亢的尖叫，耳朵流血的音调，但我不认为它会产生不和谐。

在我看来，它一定与比率两侧与成分相比的乘积有关。1 * 51 = 51，从一侧不会“上升太多”。2 * 3 = 6，我认为这表明不和谐比 1:51 更高。但是我需要把这种感觉变成一个实际的数字，所以我可以比较 5:7 和 3:8，或者任何其他组合。

我怎么能错误地解决这个问题？当然 1:2 + 0 会比 1:2 + 1 更不和谐。将适用于上述整数比的算法直接应用于频率本身会更容易吗？或者是否具有错误的整数比率允许更简单的计算？

编辑：考虑一下，一个可以扩展到和弦中任何 N 个频率集合的算法会很棒，但我觉得这会更加困难......

编辑2：**澄清**：让我们考虑一下我正在处理纯正弦波，要么忽略人耳的特定阈值，要么将它们抽象为变量。如果有严重的并发症，则忽略它们。我的问题是在这种情况下如何在算法中表示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:49:52.450

[查看http://homepages.abdn.ac.uk/mth192/pages/html/maths-music.html](http://homepages.abdn.ac.uk/mth192/pages/html/maths-music.html)的第 4 章。从记忆里：

1）如果两个正弦波刚好足够近到让人耳朵混淆，但又不是太近以至于人耳无法分辨它们是不同的，就会出现不和谐。

2) 纯正弦波极为罕见——大多数音调都有各种谐波。不和谐很可能是由碰撞的谐波而不是碰撞的主音引起的——按照你的例子，相隔许多八度的两个音不太可能是不和谐的，因为它们的谐波可能不会相遇，而只有几个八度不同，负载长笛与低音提琴的谐音可能与谐波格格不入。因此，不和谐与否不仅取决于主音的频率，还取决于存在的谐波，这已通过构建具有特殊伪谐波的声音进行了实验证明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:45:07.780

答案在《[音乐：数学奉献》的](http://homepages.abdn.ac.uk/mth192/pages/html/maths-music.html)*第 4 章*。具体看下面两张图：

*   *在4.3*中针对 x 临界带宽绘制了协和/不协和。*和谐与不和谐的历史*

*   *4.5*中的不和谐与频率。*复杂的色调*

当然，您仍然必须找到一种很好的方法将这些数据转换为公式/程序，从而为您提供一定程度的不和谐度，但我相信这会给您一个良好的开端。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:53:11.430

这将有助于：

[http://www.acs.psu.edu/drussell/demos/superposition/superposition.html](http://www.acs.psu.edu/drussell/demos/superposition/superposition.html)

你想看看叠加。

离散或快速傅立叶变换是获得所需内容的最通用方法。

# java - 按位运算，如何检查 0 或 1？

> ID：12201619
> 
> 赞同：2
> 
> 时间：2012-08-30T16:40:58.600
> 
> 标签：java

我有一个整数，如：

```
0x10000010 
```

我想知道某个特定位是 1 还是 0。例如，类似：

```
int number = 0x10000010;
for (int i = 0; i < 8; i++) {
    if (ith bit == 1) {
        System.out.println("bit " + i + " is 1.");
    } else {
        System.out.println("bit " + i + " is 0.");
    }
}

---- output ----
bit 0 is 1
bit 1 is 0
bit 2 is 0
bit 3 is 0
bit 4 is 0
bit 5 is 0
bit 6 is 1
bit 7 is 0 
```

我忘了怎么做，这种操作叫什么，

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T16:42:33.530

`number & (1 << i)`如果该位未设置，则为 0，如果已设置，则为非零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:59:56.920

类似于 dty 的回答

```
int number = 0b10000010; // you are assuming this is binary not hex.
for (int i = 0; i < 8; i++) {
    if((number >> i) & 1 != 0)
        System.out.println("bit " + i + " is 1.");
     else 
        System.out.println("bit " + i + " is 0.");
} 
```

或者

```
int number = 0b10000010; // you are assuming this is binary not hex.
for (int i = 0; i < 8; i++) 
    System.out.println("bit " + i + " is " + ((number >> i) & 1)); 
```

# c# - 为什么此代码仅在一个实例中有效？

> ID：12201620
> 
> 赞同：0
> 
> 时间：2012-08-30T16:41:04.113
> 
> 标签：c#, winforms, keydown, hotkeys, keypreview

我已将表单的`KeyPreview`属性设置为`true`.

我添加了这段代码：

```
private void PlatypusScheduleForm_KeyDown(object sender, KeyEventArgs e) 
{
  if (e.KeyCode == Keys.F9)
  {
    tabControlPlatypi.SelectedTab = tabPageDuckBill;
  }
  else if (e.KeyCode == Keys.F10)
  {
    tabControlPlatypi.SelectedTab = tabPagePlatypus;
  }
} 
```

当我捣碎`F10`时，它按预期工作；`F9`然而，mashing什么都不做。

`tabPageDuckBill`是显示的设计时/默认值`tabPage`。为什么将`F10`我带到“其他”标签页，但`F9`又不回到原来的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:25:46.017

我过去也遇到过同样的问题，即使从 SelectedIndexChanged() 事件中删除了可疑代码，问题仍然存在。然后我使用了一种效果更好的不同技术。我没有使用表单 KeyDown 事件，而是覆盖了表单 ProcessCmdKey 事件，如下所示：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
  if (keyData == Keys.F9)
  {
    this.tabControl1.SelectedTab = tabPage1;
    return true;    
  }
  else if (keyData == Keys.F10)
  {
    this.tabControl1.SelectedTab = tabPage2;
    return true;
  }
  return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:25:54.987

我发现如果我这样做：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
  if (e.KeyCode == Keys.F9)
  {
      tabControl1.SelectedTab = tabPage1;
      e.SuppressKeyPress = true;
  }
  else if (e.KeyCode == Keys.F10)
  {
      tabControl1.SelectedTab = tabPage2;
      e.SuppressKeyPress = true;
  }
} 
```

它会来回切换就好了。但是，如果没有它`e.SuppressKeyPress = true;`，它就会表现出您提到的行为。

# bash - 如何在 BASH 2.05 脚本中获取管道命令的 PID？

> ID：12201621
> 
> 赞同：3
> 
> 时间：2012-08-30T16:41:04.537
> 
> 标签：bash, scripting

我正在尝试在 BASH 脚本中获取管道数据收集命令的 PID，以便在另一个（前台）进程完成后终止该进程。我的数据收集命令超时，但我事先不知道应该多长时间；几分钟到几个小时不等。

这个问题[How to get the PID of a pipeline in a pipeline](https://stackoverflow.com/questions/3345460/how-to-get-the-pid-of-a-process-in-a-pipeline)提供了丰富的信息，但没有成功。可能是因为我使用的是 BASH 2.05（在嵌入式系统上）。

该命令在命令行上的初步测试`jobs -p`看起来很有希望。在实践中，我将`ksmon`下面的命令替换为管道命令 ( `ksmon | {various filters} | gzip -c > file`)，因此 " `$!`" BASH 变量给出了管道中的最后一个进程，而不是`ksmon`我试图杀死的程序：

```
Test:/ $  ksmon > /dev/null & jobs -p
[1] 2016
2016
Test:/ $  ps | grep ksmon
 2016 root        660 S   ksmon
 2018 root        580 S   grep ksmon
Test:/ $  kill $(jobs -p)
[1]+  Terminated              ksmon >/dev/null
Test:/ $  ps | grep ksmon
 2021 root        580 S   grep ksmon
Test:/ $ 
```

哇哦！所以我试图把它放在一个脚本中：

```
Test:/ $  cat > test.sh << EOF
> #!/bin/bash
> # That's bash 2.05
> ksmon > /dev/null & jobs -p
> EOF
Test:/ $  chmod 755 test.sh
Test:/ $  ./test.sh
Test:/ $
Test:/ $  # Nothing ...
Test:/ $  ps | grep ksmon
 2025 root        660 S   ksmon
 2027 root        580 S   grep ksmon
Test:/ $  jobs -p
Test:/ $ 
```

这是我试图让它工作的版本：

```
Test:/ $  bash --version
GNU bash, version 2.05.0(2)-release (arm-Artila-linux-gnu)
Copyright 2000 Free Software Foundation, Inc. 
```

奇怪的是，上面的脚本确实适用于 Ubuntu 主机。

**我必须做什么才能`jobs -p`在 BASH 2.05 脚本中工作，还是有替代方法？**

一个想法是从`$!`变量中减去一个固定数字，但我不确定这是否是个好主意......

**编辑：** 我想杀死管道中的第一个程序的原因是管道中的所有程序，特别是`gzip`在关闭它们的输出流方面会做得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:49:10.653

我建议你使用 $! 获取管道中最后一个进程的 PID；然后[使用 lsof 通过来自 /proc 的打开文件描述符顺序确定链中的先前进程](https://serverfault.com/questions/48330/how-can-i-get-more-info-on-open-pipes-show-in-proc-in-linux)。

# c# - Ruby 和 C# 中的方法连接

> ID：12201622
> 
> 赞同：2
> 
> 时间：2012-08-30T16:41:05.893
> 
> 标签：c#, ruby, ruby-on-rails-3.2

C＃：

```
var articles = Article
                      .OrderBy(x=> x.Name)
                      .Where(x=> x.Name.Contains(pattern))
                      .Select(x=>new {x.Name + " (article)"})
                      .ToList(); 
```

用 C# 编写这种方式很好，它被称为“方法连接”。事实上，我不记得他们是怎么称呼的，我在 Jon Skeet 的书中读到过。这个想法是每个方法都在一个新的行上，这在 C# 中是正常的。

鲁比呢？正常写吗：

```
articles = Article
                  .order(:name)
                  .where("name like ?","%#{pattern}%")
                  .map(&:name)
                  .map {|c| c << " (article)"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:02:59.800

方法链是许多语言的主要内容，包括 Ruby。它的使用很大程度上取决于个人喜好——有些人，比如 tokland，不喜欢可能产生的大表达式，而我很乐意扩展一个表达式以消除临时变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:51:47.563

主观问题，所以她是一个主观的答案（作为 Ruby 程序员）：

1.  我不想创建“洞”，在我的代码中我不会插入那种级别的缩进。

2.  您也可以在行尾插入点。哪个更具可读性？很难说，我更喜欢后者（虽然我不介意在行首，但这没什么大不了的）。所以我可能会写（注意这两个地图可以连接）：

    ```
    article_names = Article.
      order(:name).
      where("name LIKE ?", "%#{pattern}%").
      map(&:name).
      map { |name| name + " (article)"} 
    ```

3.  以我的经验，长链使代码更难遵循。当链增长太多（5、6 个元素？）时，我倾向于打破它，创建具有有意义名称的中间变量，这有助于我进一步描述表达式：

    ```
    filtered_articles = Article.order(:name).where("name LIKE ?", "%#{pattern}%")
    names = filtered_articles.map { |article| "#{article.name} (article)" } 
    ```

# c++ - 使用 __sprintf_chk() 禁用

> ID：12201625
> 
> 赞同：7
> 
> 时间：2012-08-30T16:41:16.173
> 
> 标签：c++, c, printf, fortify-source

我观察到一个 c++ 程序使用`sprintf`sprintf 隐式调用`__sprintf_chk()`. 这`__sprintf_chk()`似乎通过检查堆栈帧来检查缓冲区溢出。

出于我的研究目的，我想知道是否可以禁用 using `__sprintf_chk()`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T18:38:58.243

尝试从此替换程序中对 sprintf 的所有调用：

```
 sprintf(params...); 
```

进入

```
 (sprintf)(params...); 
```

这将禁用任何基于预处理器的 sprintf 更改（* 仅当使用类似函数的宏更改 sprintf 时，例如 的情况`__sprintf_chk`）。

对于 gcc 有选项`-fno-stack-protector -fno-mudflap`。也可能是`-D_FORTIFY_SOURCE=0`（对于任何 glibc）

对于 Ubuntu 和 debian，有一些带有安全功能列表的页面：[http](http://wiki.debian.org/Hardening) ://wiki.debian.org/Hardening和[https://wiki.ubuntu.com/Security/Features](https://wiki.ubuntu.com/Security/Features) 此处列出了一些使用的编译器标志[https://wiki。 ubuntu.com/ToolChain/CompilerFlags](https://wiki.ubuntu.com/ToolChain/CompilerFlags)

还有一篇关于 SSP (stack-protector) 和 Fortify_source (glibc) 的论文： [http ://www.linuxfromscratch.org/hints/downloads/files/ssp.txt](http://www.linuxfromscratch.org/hints/downloads/files/ssp.txt)

PS：同为__fgets_chk __gets_chk __printf_chk __fprintf_chk __vprintf_chk __vfprintf_chk __vsprintf_chk __wmemcpy_chk __wmemmove_chk __wmempcpy_chk __wmemset_chk __wcscpy_chk __wcpcpy_chk __wcsncpy_chk __wcpncpy_chk __wcscat_chk __wcsncat_chk __swprintf_chk __vswprintf_chk __fwprintf_chk __wprintf_chk __vfwprintf_chk __vwprintf_chk __fgetws_chk __wcrtomb_chk __mbsrtowcs_chk __wcsrtombs_chk __mbsnrtowcs_chk __wcsnrtombs_chk __memcpy_chk __memmove_chk __mempcpy_chk __memset_chk __strcpy_chk __strncpy_chk __stpncpy_chk __strcat_chk和其他一些

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-12T09:23:49.233

> 这个 __sprintf_chk() 似乎通过检查堆栈帧来检查缓冲区溢出。...出于我的研究目的，我想知道是否可以使用 __sprintf_chk() 禁用？

我相信那是从`FORTIFY_SOURCE`. 有很多这样的保护功能。我相信以下内容对您有用：

```
CFLAGS += -U_FORTIFY_SOURCE 
```

或者，您可以：

```
CFLAGS += -D_FORTIFY_SOURCE=0 
```

* * *

相关：如果我在该领域遇到禁用 的软件`FORTIFY_SOURCE`，那么我会针对它提出安全缺陷。可以为调试和测试禁用 ot，但不适用于生产软件。

* * *

相关的，这里有一个[可能不完整的]可以保护的功能列表`FORTIFY_SOURCE`：

*   内存
*   内存
*   记忆移动
*   内存集
*   stpcpy
*   字符串
*   字符串
*   strcat
*   字符串猫
*   冲刺
*   snprintf
*   vsprintf
*   vsnprintf
*   得到

请参阅[gcc -D_FORTIFY_SOURCE=1 和 -D_FORTIFY_SOURCE=2 之间的区别](https://stackoverflow.com/questions/13517526/difference-between-gcc-d-fortify-source-1-and-d-fortify-source-2)。

# sql - SQL：控制返回多少记录第 2 部分

> ID：12201626
> 
> 赞同：0
> 
> 时间：2012-08-30T16:41:21.030
> 
> 标签：sql, database, postgresql

[这是我在这里](https://stackoverflow.com/questions/12199719/sql-controlling-how-many-records-get-returned/12200855)提出的问题的后续行动。使用相同类型的查询，如果存在“genre.name = 'Classic Movies' 和 'star.name = Humphrey Bogart' 之类的限制，我如何确保获得 10 部电影。” 需要明确的是，无论过滤限制是什么，查询都必须返回 10 部电影的数据。

```
SELECT movie.id, movie.title, star.name, star.name_url, dir.name, 
       dir.name_url, genre.name, genre.name_url 
FROM 
        (SELECT * FROM movie WHERE movie.id > 0 ORDER BY movie.id LIMIT 10) movie
        LEFT JOIN actor 
             ON (movie.id = actor.movie_id) 
        LEFT JOIN person AS star 
             ON (actor.person_id = star.id) 
        LEFT JOIN director 
             ON (movie.id = director.movie_id) 
        LEFT JOIN person AS dir 
             ON (director.person_id = dir.id) 
        LEFT JOIN genre_classification 
             ON (movie.id = genre_classification.movie_id) 
        LEFT JOIN genre 
             ON (genre_classification.genre_id = genre.id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:52:08.453

问题是您正在使用此子选择从数据库中选择 10 部电影的列表：

```
(SELECT * FROM movie WHERE movie.id > 0 ORDER BY movie.id LIMIT 10) movie 
```

如果您尝试使用该子选择之外的 WHERE 子句更多地过滤该列表，您可能会得到*少于*这 10 行，因为并非所有 10 行都符合您的条件。您可以像这样将新条件添加到子选择中：

```
(SELECT * FROM movie m INNER JOIN genre_classification g on g.movie_id = m.id and g.name = 'Classic Movies' WHERE m.id > 0 ORDER BY m.id LIMIT 10) movie 
```

这会做同样的事情，但*只会*给你（最多）10 部具有匹配类型“经典电影”的电影。

当然，这仍然会返回超过 10 行，因为您正在`JOIN`寻找演员、导演、其他类型等。但是，您应该在结果集中有多达 10 个不同的电影 ID。

**完整查询：**

```
SELECT movie.id, movie.title, star.name, star.name_url, dir.name, 
       dir.name_url, genre.name, genre.name_url 
FROM 
        (SELECT * FROM movie m INNER JOIN genre_classification g on g.movie_id = m.id and g.name = 'Classic Movies' WHERE m.id > 0 ORDER BY m.id LIMIT 10) movie
        LEFT JOIN actor 
             ON (movie.id = actor.movie_id) 
        LEFT JOIN person AS star 
             ON (actor.person_id = star.id) 
        LEFT JOIN director 
             ON (movie.id = director.movie_id) 
        LEFT JOIN person AS dir 
             ON (director.person_id = dir.id) 
        LEFT JOIN genre_classification 
             ON (movie.id = genre_classification.movie_id) 
        LEFT JOIN genre 
             ON (genre_classification.genre_id = genre.id) 
```

# c# - XmlDataDocument 和 XslTransform 的非弃用替代方案是什么？

> ID：12201627
> 
> 赞同：8
> 
> 时间：2012-08-30T16:41:26.557
> 
> 标签：c#, xslt, .net-4.0

我正在修改一些遗留代码以尝试消除警告。 `XmlDataDocument`并且`XslTransform`两者都会生成已过时的警告。在建议更换的情况下`XslTransform`是`XslCompiledTransform`，但不建议更换`XmlDataDocument`。

如何更改此代码以消除 .NET 4 中的警告：

```
var xmlDoc = new System.Xml.XmlDataDocument(myDataSet);
var xslTran = new System.Xml.Xsl.XslTransform();
xslTran.Load(new XmlTextReader(myMemoryStream), null, null);
var sw = new System.IO.StringWriter();
xslTran.Transform(xmlDoc, null, sw, null); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T16:49:49.757

```
XDocument doc = new XDocument();
using (XmlWriter xw = doc.CreateWriter())
{
  myDataSet.WriteXml(xw);
  xw.Close();
}

XslCompiledTransform proc = new XslCompiledTransform();
using (XmlReader xr = XmlReader.Create(myMemoryStream))
{
  proc.Load(xr);
}

string result;

using (StringWriter sw = new StringWriter())
{
  proc.Transform(doc.CreateNavigator(), null, sw);  // needs using System.Xml.XPath;
  result = sw.ToString();
} 
```

我认为应该这样做。当然，我只使用 MemoryStream 加载样式表，使用 StringWriter 发送转换结果，因为您的代码片段使用了这些。通常还有其他输入源或输出目标，如文件、流或 Textreader。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:49:24.667

[XMLDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)确实是您的主要选择。我不是 100% 确定你想用你发布的代码块做什么，但你可以试一试：

```
public void DoThingsWithXml() 
{
  string strXdoc = src.GetTheXmlString(); // however it is you do it
  XmlDocument xdoc = new XmlDocument();
  xdoc.LoadXml(strXdoc);
  // The other things you need to do
} 
```

# mysql - SQL 聚合分组依据

> ID：12201632
> 
> 赞同：1
> 
> 时间：2012-08-30T16:41:33.887
> 
> 标签：mysql, sql

我有一个员工表和一个具有一对多关系的 leave_allocation 表，每个员工在一段时间内都有许多休假分配。我想获得每位员工的最新分配。

我尝试了查询，但日期和天数与同一行不相关

```
select e.employee_number, e.nme, MAX(l.date), l.days 
from employee e, leave_allocation l 
where l.employee_id = e.employee_id
group by e.employee_number, e.nme 
```

如何获得每位员工的最新分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:45:57.180

```
SELECT e.employee_number
      ,e.nme
      ,l.days
  FROM employee e
      , leave_allocation l
      ,(SELECT employee_id
              ,MAX(DATE) date
          FROM leave_allocation
         GROUP BY employee_id) m
 WHERE l.employee_id = e.employee_id
   AND l.employee_id = m.employee_id
   AND l.date = m.date 
```

如果可以有多行具有相同的employee_number 和日期，那么您需要求和。

```
SELECT e.employee_number
      ,e.nme
      ,sum(l.days)
  FROM employee e
      , leave_allocation l
      ,(SELECT employee_id
              ,MAX(DATE) date
          FROM leave_allocation
         GROUP BY employee_id) m
 WHERE l.employee_id = e.employee_id
   AND l.employee_id = m.employee_id
   AND l.date = m.date
GROUP BY e.employee_number
        ,e.nme 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:48:07.597

将`MAX()`日期放在子查询中：

```
SELECT e.employee_number, e.nme, l.leavedate, la.days
FROM employee e
INNER JOIN
(
   SELECT Max(date) leavedate, employee_id
   FROM leave_allocation
   GROUP BY employee_id
) l
   ON e.employee_id = l.employee_id
INNER JOIN leave_allocation la
   ON l.employee_id = la.employee_id
   AND l.leavedate = la.date 
```

我还将查询切换为使用 ANSI 连接语法而不是表之间的逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:48:50.053

试试这个，

```
SELECT  e.employee_number, e.nme, c.maxDate, l.days 
FROM    employee e 
            INNER JOIN leave_allocation l
                ON l.employee_id = e.employee_id
            INNER JOIN
            (
                select employee_id, MAX(date) maxDate
                from    leave_allocation  
                group by employee_id
            ) c ON c.employee_id = l.employee_ID AND
                    c.maxDate = l.date 
```

# azure - 从 Azure 网站访问 Azure 存储服务？

> ID：12201638
> 
> 赞同：1
> 
> 时间：2012-08-30T16:41:58.850
> 
> 标签：azure

我很想知道这是否可行，如果可以，这是个好主意还是坏主意？

我们正在开发一个 Azure 应用程序，该应用程序主要以工作人员角色为中心，这些工作人员角色在 CloudQueue 上接收他们的工作，并将结果放入 CloudBlob，然后客户端下载该应用程序。Web 界面本身是一个非常简单的 ASP.NET MVC 站点，它在 CloudQueue 中抛出作业，并构建 URL 以下载 CloudBlob。

目前，我们通过在我们的解决方案中拥有一个 Azure 云项目来实现这一点，该项目有一个带有 UI 的 Web 角色，以及带有实际工作的 Worker 角色。

我们可以使用 Azure 网站来发布和托管 UI，它会回调我们的 Worker Roles 吗？Azure DLL 只是普通的旧 .NET 库，我假设 Azure 网站不会对它们有任何问题。因此，当我们想要更新 UI 时，我们只需使用 Visual Studio 发布即可。当我们想要更新 Worker 角色（300MB+ 并且有一堆像 Crystal Reports 之类的讨厌的依赖项）时，我们可以构建云捆绑包并通过 Azure 管理门户更新云服务。

在我看来，这样做会更容易更新 UI。我认为托管它也会更便宜，因为我们不必为 Web 角色购买一堆实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:12:24.797

如果您的问题是“我们可以使用 Windows Azure 网站*”，那么根据您的应用程序架构，您肯定可以使用 Azure 网站来部署您的前端并正确配置所有网络连接，以便您可以继续访问其他 Azure 存储服务。由于您主要使用 Blob 和队列，因此您可以继续在 Azure 网站中使用 HTTP/HTTPS 设置。您可以按原样保留辅助角色，但是如果部署非常复杂，则使用 Windows Azure VM 可能是另一个方向。

我可以说，如果您的 Web 应用程序没有在 Web 服务器中配置复杂的东西，那么网站部署可能会更容易，因为与 webrole 和 Azure VM 相比，网站可能无法匹配 Web 服务器级别的配置。回答“更简单、更便宜”可能非常主观，因为这完全取决于负载和分布，因此您必须尝试评估它。

# jquery - 嵌套 Jquery-UI 选项卡

> ID：12201646
> 
> 赞同：2
> 
> 时间：2012-08-30T16:42:26.710
> 
> 标签：jquery, jquery-ui, tabs, nested

我正在尝试嵌套 jquery-ui 选项卡以创建这样的页面：

> 用户信息（选项卡）
> 地址（选项卡）
>       城市（子选项卡）
>      州（子选项卡）

因此，地址选项卡下方将有两个子选项卡（一个带有城市复选框，另一个带有州复选框）。

我用谷歌搜索了这个问题，我[在 jquery 论坛上发现了一个](http://forum.jquery.com/topic/jquery-ui-tabs-is-nesting-possible)描述类似问题的帖子。[海报创建了一个包含嵌套选项卡的示例/演示](http://jsbin.com/ubaqe)，我在本地网络服务器上模拟了他们的设置。

但是，奇怪的是，当我将表格添加到嵌套选项卡时，它会出现在我页面上的选项卡之外。（例如，在 div id="subtabs-1" 中，如果我添加一个表格，当我加载页面时它不会出现在选项卡内）。

我认为我的网站可能有其他 CSS 导致表格元素错位在选项卡之外。我如何确定哪些 CSS 应用于表格以及哪个有问题？或者是否有人对可能出现的问题有其他想法？（不幸的是，我无法链接到我的实际页面，因为它位于我们的 Intranet 中）。谢谢。

# java - 使用带有 NTX 索引的 xbasej

> ID：12201655
> 
> 赞同：2
> 
> 时间：2012-08-30T16:43:12.020
> 
> 标签：java, indexing, vb6-migration, dbf, advantage-database-server

我正在尝试将 Java 中的 DBF 文件用于与大型旧系统交互的新实用程序。我可以使用 Java ODBC 桥接器访问、读取、写入和更新，但这不会更新 NTX 索引。我发现 xbasej 声称能够使用索引，但似乎只能使用 NDX 索引。我总是可以在使用它们之前创建它们，但它仍然不会更新所有其他程序使用的 NTX。这里有几千个程序在交互，所以只切换到 NDX 是不可能的，我也没有预算。

所以我的问题是：有没有办法让 xbasej 使用 NTX 索引，或者如果我在编辑数据库之前打开它们，是否有任何其他免费的 Java 库可以自动更新 NTX 文件？

哦，我已经转发了 6262 端口，甚至在完全关闭防火墙的情况下进行了测试。

任何帮助将不胜感激。

我找到了 Sybase Advantage 驱动程序[链接](http://www.sybase.com/detail?id=1055532)，它显然可以打开 DBF 和 NTX 文件，我可以使用他们的 Data Architect 程序创建一个数据字典来访问我的数据，但我不知道如何从 Java 中使用它，所有的例子似乎需要某种服务器连接。像这样的东西应该工作：

```
try {
        Class.forName("com.extendedsystems.jdbc.advantage.ADSDriver");
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(DBFTest.class.getName()).log(Level.SEVERE, null, ex);
    }

    try {
        ADSConnection conn = (ADSConnection) DriverManager.getConnection("jdbc:extendedsystems:advantage://localhost:6262;catalog=//llama-rog/c/stock/DD.add;user=master;password=master");   
    }catch (SQLException ex) {        
        Logger.getLogger(DBFTest.class.getName()).log(Level.SEVERE, null, ex);
    }        
} 
```

每次我尝试连接时，我都会得到：

```
com.extendedsystems.jdbc.advantage.ADSException: [iAnywhere Solutions][Advantage JDBC]Connection refused: connect
at com.extendedsystems.jdbc.advantage.n.<init>(Unknown Source)
at com.extendedsystems.jdbc.advantage.ADSConnection.<init>(Unknown Source)
at com.extendedsystems.jdbc.advantage.ADSDriver.connect(Unknown Source)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:243)
at dbftest.DBFTest.main(DBFTest.java:30) 
```

我已经搜索了几个小时并且完全没有找到任何示例代码来连接到本地唯一的数据字典（.add），其中列出了我的 DBF 和相关索引。有人提到使用 Data Architect 在 ADS.ini 中创建的别名，但同样没有任何关于如何执行此操作的痕迹。Jar 文件没有附带 javadoc，只有一些 HTML 帮助文件，我翻遍了却一无所获。

有一个测试应用程序据说可以让你测试连接，但仍然需要我输入我的连接字符串、用户名和密码，而且我既不能通过数据字典也不能通过空闲表连接到任何东西，我总是得到同样的错误。

有谁知道如何让它工作。它通过他们的数据架构工具工作的事实证明它应该以某种方式工作，但我不知道我究竟如何复制该功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T23:30:06.553

Advantage JDBC 驱动程序需要 Advantage Database Server，它是产品的客户端-服务器版本。根据评论“没有预算”，我猜你还没有购买服务器。如果是这种情况，那么 JDBC 驱动程序对您没有任何用处。`Connection refused`由于没有服务器接受连接，因此似乎正在发生错误。

如果您能够使用 ODBC 桥接器，那么一种可能性是使用 Advantage ODBC 驱动程序，该驱动程序可以连接到 Advantage Local Server（非客户端服务器版本，根据您的使用情况免费...阅读许可证）。您应该能够安装 Advantage ODBC 驱动程序，设置指定数据字典的数据源（使用与 Advantage Data Architect 相同的路径）。

您可能已经这样做了，但是当您创建数据字典并添加表时，请确保为每个表添加了适当的 .ntx 文件。Advantage 无法确定哪些索引将属于哪个表，否则。

# xpath - 如何从 xml 中删除命名空间

> ID：12201658
> 
> 赞同：2
> 
> 时间：2012-08-30T16:43:20.257
> 
> 标签：xpath, xquery, osb

我有以下格式的 XML

```
<Body xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://schemas.xmlsoap.org/soap/envelope/">
  <TransactionAcknowledgement xmlns="">
    <TransactionId>HELLO </TransactionId>
    <UserId>MC</UserId>
    <SendingPartyType>SE</SendingPartyType>
  </TransactionAcknowledgement>
</Body> 
```

我想为它使用 XQuery 或 XPath 表达式。

现在我只想删除

> xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/"

来自 xml 的命名空间。

有没有办法实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:08:06.553

尝试使用[functx:change-element-ns-deep](http://www.xqueryfunctions.com/xq/functx_change-element-ns-deep.html)：

```
let $xml := <Body xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://schemas.xmlsoap.org/soap/envelope/">
  <TransactionAcknowledgement xmlns="">
    <TransactionId>HELLO </TransactionId>
    <UserId>MC</UserId>
    <SendingPartyType>SE</SendingPartyType>
  </TransactionAcknowledgement>
</Body>

return functx:change-element-ns-deep($xml, "http://schemas.xmlsoap.org/soap/envelope/", "") 
```

但正如 Dimitre Novatchev 所说，这个函数不会改变源 xml 的命名空间，它会创建一个新的 XML。

# javascript - mp3 歌曲不能在 Firefox 中播放

> ID：12201661
> 
> 赞同：0
> 
> 时间：2012-08-30T16:43:38.527
> 
> 标签：javascript, firefox, audio, mp3

我为此苦苦挣扎了几个小时。 [http://www.mysecretathens.gr/Sera/releases.html](http://www.mysecretathens.gr/Sera/releases.html)

我正在为一位音乐家做这个项目，而 mp3 歌曲不能在 Firefox 中播放。Chrome，甚至 IE 都会播放它们。

你知道为什么吗？它不支持mp3文件吗？在脚本的文档中，它说您还应该有每个文件的 .wav 声音，但我有大约 25 首歌曲，如果我也上传 .wav 声音，那就**太重了。**

有黄金解决方案吗？我可以做些什么让 mp3 歌曲在 Firefox 中播放吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:45:21.963

Firefox 不支持 MP3，因为它是受专利保护的编解码器。对于 Firefox，您需要重新编码为 OGG 或 WEBM。

# php - 制作一个 3d 数组

> ID：12201664
> 
> 赞同：-3
> 
> 时间：2012-08-30T16:43:46.797
> 
> 标签：php, mysql, arrays, database

我想从数据库中创建一个包含多维数组的数组。该数据库有 3 个表，一张用于车辆，一张用于损坏，一张用于损坏照片。

**表车辆**有两列**id**和**name**

**表damages**有四列**damagesID**、**vehicleID**、**damagesType**和**damagesDescription**。

**表damagesPhotos**有三列**damagesPhotoID**和**damagesID**和**damagesPhotoUrl**

我需要将这三列组合成一个数组，如下所示：

```
$vehicle = array( 
   "id" => "somestring", 
   "name" => "somestring", 
   "damages" => array( 
       "damagesType" => "somestring", 
       "damagesDescription" => "somestring", 
          "photoOfDamages" => array( 
            "damagesPhotoUrl" => "somestring" 
          ) 
  ) 
); 
```

我的代码看起来像这样，但工作方式不正确。

```
$result = mysql_query( "SELECT * from vehicle v LEFT JOIN damages d ON v.id = d.vehicleID LEFT JOIN damagesPhotos p ON d.damagesID = p.damagesID WHERE d.damagesID = p.damagesID AND v.id = 1") or die(mysql_error());  

$rowsResult  = array();

while ($r = mysql_fetch_assoc($result))
    {
        $rowsResult  [] = $r;       
    }

mysql_free_result($result);

echo json_encode($rowsResult);
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:47:58.543

您可以使用数组来做到这一点，但通过使用域对象和数据映射器来填充它们，您会获得更好的结构。

```
class Vehicle
{
   private $id;
   private $name;
   private $damages; // collection of Damage objects
}

class Damage
{
  private $id;
  private $type;
  private $photos; // collection of photo objects
}

class Photo
{
  private $id;
  private $imageurl;
} 
```

您的数据映射器将在对象上使用 setter 函数来在请求时填充数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:47:10.477

```
$vehicle = array(
    "id" => "somestring",
    "name" => "somestring",
    "damages" => array(
        "type" => "somestring",
        "location" => "somestring",
        "photo" => array(
            "imageurl" => "somestring"
        )
    )
); 
```

对于多辆车，它可能看起来更像这样：

```
$vehicles = array(
    0 => array(  // you can omit the numeric index, I'm just using it for clarity
        "id" => "somestring",
        "name" => "somestring",
        "damages" => array(
            "type" => "somestring",
            "location" => "somestring",
            "photo" => array(
                "imageurl" => "somestring"
            )
        )
    ),
    1 => array(
        "id" => "somestring",
        "name" => "somestring",
        "damages" => array(
            "type" => "somestring",
            "location" => "somestring",
            "photo" => array(
                "imageurl" => "somestring"
            )
        )
    )
); 
```

# java - JPA 删除 . 在这种情况下，推荐的方法是什么？

> ID：12201667
> 
> 赞同：1
> 
> 时间：2012-08-30T16:43:53.660
> 
> 标签：java, hibernate, jpa, orm

这个问题让我很生气：

所以让我们说这个非常简单的案例：

(spring/Hibernate/jpa2/@PersistenceContext(type=PersistenceContextType.TRANSACTION))

我们有 DAO 实体：

```
class User{
private Set<Car> carSet;
... usual setters + getters
}

class Car{
private User user;
... usual setters + getters

} 
```

以下哪一项是通过 carId 删除汽车的推荐方法以及为什么（这将在 http post 请求中完成，除了此删除之外不会进行其他操作）？

1）简单的移除操作；

```
Car  car = dao.find(Car.class, carId);
dao.remove(car); 
```

2）首先清理引用。什么时候推荐这种方法？

```
Car  car = dao.find(Car.class, carId);
car.getUser().getCarSet().remove(car); // this one as far as I know will usually fetch the other cars, and I think is not optimal, am I right?
car.setUser(null);
dao.remove(car); 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:45:29.060

看起来 Car 指向 User，换句话说，Car 有一个指向 User 的外键属性。因此删除 Car 也会删除对 User 的引用。这也会从用户的 Car Set 中移除 Car。因此，选项 1 就是您需要做的所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:07:56.990

简而言之，这取决于关系的拥有方。

为简化起见，让我们假设一个虚拟规则：拥有方始终是具有外键的一方（对于整个故事，我会推荐一本好书，例如[Pro JPA 2: Mastering the Java™ Persistence API](http://www.apress.com/9781430219569)）。由于您与to有`@ManyToOne`关系，根据我们的虚拟规则，是拥有方：`Car``User``Car`

```
 *---------------*       *--------------*     
   |      CAR      |       |     USER     |     
   *---------------*       *--------------*     
   |  CARD_ID (PK) |   ~-> | USER_ID (PK) |     
   |  USER_ID (FK) | --~   *--------------*     
   *---------------* 
```

当您删除拥有方时，无需执行任何其他操作。

在您的情况下，由于汽车是拥有方，您可以简单地移除汽车，即`dao.remove(car);`就足够了。

现在让我们考虑相反的情况。假设您需要删除 a `User`，即被引用的一面。

如果您删除与汽车关联的用户（假设没有级联行为），数据库`DELETE`操作将因 FK 违规而失败。

通俗易懂的规则是：**关系维护是应用程序的责任**。这意味着在关系的相反（拥有）方面调整参考。

如果 car 表中的外键列可以是`NULL`您可以`car.setUser(null);`在删除用户之前使用的。这将在您的数据库中留下一辆孤车。

如果外键列是`NOT NULL`，在删除用户之前，您需要将汽车与另一个用户关联：

```
 car.setUser(anotherUser); 
```

或者一起从数据库中删除汽车：

```
 dao.remove(car); 
```

正如我所说，关系维护远不止这些。JPA 有`@CascadeType`s 等特性；`@ManyToMany`可以任意选择拥有方的双向关系；单向`@OneToMany`（带有连接表）等。但我认为这几乎总结了基础知识。

# ios - 应用程序评论显示在 iTunes Connect 中需要多长时间？

> ID：12201671
> 
> 赞同：6
> 
> 时间：2012-08-30T16:44:08.607
> 
> 标签：ios, iphone, app-store, app-store-connect

我有很多用户评论我的应用程序，但我没有在 iTunes Connect 中看到这些评论。评论通常需要多长时间才能显示？

此外，地区下拉列表仅包含美国。如何查看其他地区的评论？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T18:53:25.330

我发现评论通常会在 24-48 小时内出现。下拉菜单将仅显示您对其进行评论的国家/地区。因此，如果只有美国显示，那么这些是 iTunes Connect 知道的唯一评论。

# java - java 密钥库文件限制

> ID：12201672
> 
> 赞同：0
> 
> 时间：2012-08-30T16:44:14.330
> 
> 标签：java, security, keystore, digital-certificate

我为我的 PFX 证书 ( [PKCS#12](http://en.wikipedia.org/wiki/PKCS12) ) 创建了一个密钥库文件，但我需要知道一个密钥库文件 (JKS) 中可以存储多少密钥。

我目前正在按如下方式加载证书：

```
KeyStore oStore = KeyStore.getInstance("PKCS12");
oStore.load(new FileInputStream(AppConfig.get(AppConfig.SRC_KEY)), 
    "SECRET".toCharArray());
...
oStore.setKeyEntry(idAlias, privateKey, pwd.toCharArray(), chain);
oStore.store(new FileOutputStream(AppConfig.get(AppConfig.SRC_KEY)),  
    "SECRET".toCharArray()); 
```

我可以在此密钥库中存储的密钥和证书的数量是否有限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:54:53.580

AFAIK 密钥库可以持有的证书没有限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:29:27.413

我假设您指的 是 SunJSSE 提供程序提供的[PKCS12 密钥库类型。](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#KeystoreFormats)这是[PKCS #12 标准](http://en.wikipedia.org/wiki/PKCS12)的实现，因此您可以像查看任何 PKCS #12 文件一样查看它。

因此，我建议每个文件都包含一个私钥和证书。

如果您想存储许多带有证书的密钥，我建议您考虑使用普通的密钥库（而不是 PKCS #12 变体）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:38:40.393

> 我可以在此密钥库中存储的密钥和证书的数量是否有限制？

老实说，我不知道你是否真的可以在你的账户中存储超过 1 个私钥，`PKCS12`但即使你可以，这将是一个非常不寻常的用途，不推荐。
这些密钥库用作私有凭据的容器，并不意味着共享，如果您添加多个私钥及其相应的公钥和链，这基本上就是您将要做的事情。
这些容器通常具有访问它所需的加密密码，并且*相同*的密码用于私钥条目。因此，将多个私钥保存在同一个容器中并不是一个好选择，因为它们都将共享相同的密码。
可能有一个提供者（例如 Bouncy Castle）*可以*允许您设置不同的密码，但如果您打算使其可移植，即被任何应用程序使用，则该容器将完全无法使用，因为它不会期望您描述的内容。

**更新：**
您的问题与您链接到的帖子完全无关。*这种*情况下的问题是太多的 http-connector 线程访问了密钥库文件。这是一个线程问题。与你的问题无关。

# cocos2d-iphone - cocos2d 子类化 CCSprite

> ID：12201676
> 
> 赞同：0
> 
> 时间：2012-08-30T16:44:33.533
> 
> 标签：cocos2d-iphone

我正在尝试将 CCSprite 子类化，但由于某种原因，我似乎无法在屏幕上绘制任何东西。我不是 cocos2d 的专家，所以我愿意接受任何建议。这是我的代码。我有这样的场景：

```
#import "cocos2d.h"

@class Animation;

@interface HelloWorldLayer : CCLayer
{

}

+(CCScene *) scene;

@end

#import "HelloWorldLayer.h"
#import "Animation.h"
@implementation HelloWorldLayer

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];
    HelloWorldLayer *layer = [HelloWorldLayer node];
    [scene addChild: layer];
    return scene;
}

-(id) init
{
    if( (self=[super init])) {

        CCLOG(@"super init");

        HelloWorldLayer *animation;
        animation = [Animation animation:self];

 }
    return self;
}

- (void) dealloc
{
    [super dealloc];
}
@end 
```

然后我像这样子类CCSprite：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
@class HelloWorldLayer;

@interface Animation : CCSprite {

    HelloWorldLayer     *ivHelloWorld;
}
+ (id) animation:(HelloWorldLayer*) helloWorld;
- (id) initAnimation: (HelloWorldLayer*) helloWorld;
@end

#import "Animation.h"
#import "HelloWorldLayer.h"

@implementation Animation

+ (id) animation:(HelloWorldLayer *) helloWorld{
    CCLOG(@"animation method");
    return [[[self alloc] initAnimation:helloWorld] autorelease];

}

- (id) initAnimation:(HelloWorldLayer *)helloworld {

     CCLOG(@"InitaAnimation method");
    // cache
    CCSpriteFrameCache *cache=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache addSpriteFramesWithFile:@"FootballAtlas.plist"];

    // frame array
    NSMutableArray *framesArray=[NSMutableArray array];
    for (int i=1; i<60; i++) {
        NSString *frameName=[NSString stringWithFormat:@"Football%d.png", i];
        id frameObject=[cache spriteFrameByName:frameName];
        [framesArray addObject:frameObject];
    }
    CCLOG(@" array count = %i", [framesArray count]);
    // animation object
    id animObject=[CCAnimation animationWithFrames:framesArray delay:0.01];

    // animation action
    id animAction=[CCAnimate actionWithAnimation:animObject restoreOriginalFrame:NO];
    CCRepeatForever *repeat = [CCRepeatForever actionWithAction:animAction];

    id animAction2=[CCAnimate actionWithAnimation:animObject restoreOriginalFrame:NO];
    animAction2=[CCRepeatForever actionWithAction:animAction2];

    // sprite
    CCSprite *bird=[CCSprite spriteWithSpriteFrameName:@"Football0.png"];
    bird.position=ccp(60,160);

    CCSprite *bird2=[CCSprite spriteWithSpriteFrameName:@"Football0.png"];
    bird2.position=ccp(80,160);

    // batchNode
    CCSpriteBatchNode *batchNode=[CCSpriteBatchNode batchNodeWithFile:@"FootballAtlas.png"];
    [self addChild:batchNode];
    [batchNode addChild:bird];
    [batchNode addChild:bird2];

    [bird runAction:repeat];
    [bird2 runAction:animAction2];

    return self;
}
@end 
```

这不会在屏幕上绘制任何东西，但是如果我将动画代码移动到 CClayer，那么一切都会显示得很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:33:57.327

你只是忘了初始化你的动画精灵：

```
- (id) initAnimation:(HelloWorldLayer *)helloworld {
   if ((self = [super init]))
   {
      // PUT YOUR CODE HERE
   }
   return self;
} 
```

并小心您的 HelloWorldLayer，因为您没有将动画添加为子动画（并且变量输入不正确）。如果您想在场景中看到某些内容，请更改它。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:52:53.557

我想通了谢谢。我正在初始化一个需要动画对象的 HelloWorldLayer 对象。

# objective-c - 将文本与 UITableViewCell 对齐的问题

> ID：12201678
> 
> 赞同：0
> 
> 时间：2012-08-30T16:44:52.780
> 
> 标签：objective-c, ios, uitableview, tableview

我在 tableView 中有一个普通单元格，当我想将它的文本对齐时，我使用：

```
if (cell == nil) {
     cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];        
     cell.textLabel.textAlignment = UITextAlignmentRight;           
} 
```

但是现在我想使用`UITableViewCell`用于显示，`detailTextLabel`我也尝试将它再次对齐但没有任何反应：

```
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.textAlignment = UITextAlignmentRight;
    cell.detailTextLabel.textAlignment = UITextAlignmentRight;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:55:46.600

`UILabel`如果要自定义它，请将您自己的作为子视图添加到单元格：

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.textLabel.textAlignment = UITextAlignmentRight;
UILabel *subLabel = [UILabel alloc] initWithFrame:CGRectMake(x,y,w,h)]; //put in the frame variables you desire
subLabel.textAlignment = UITextAlignmentRight;
subLabel.tag = 20;
subLabel.text = @"my text";
[cell.contentView addSubview:subLabel];
[subLabel release]; //dont call this if you are using ARC 
```

...

然后您稍后访问标签：

```
[[cell.contentView viewWithTag:20] setText:@"new text"]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:25:01.567

你有没有检查你的长度`detailTextLabel`是不是没有它的框架那么大？如果框架足够大以完全适合文本，那么它可能看起来`UITextAlignmentRight`不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:38:58.617

尝试实现`tableView:willDisplayCell:forRowAtIndexPath:`委托方法并将您的重新对齐代码放在那里！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-19T14:59:26.123

*UITableViewCellStyleSubtitle*表格单元格中的*textLabel*和*detailTextLabel*的框架是不可能简单的改变的。

 *最好将您的单元格子类化以进行自定义布局。但您也可以使用

```
performSelector:withObject:afterDelay: 
```

*在layoutSubviews*之后更改 textLabel 框架的延迟为零：

```
[self performSelector:@selector(alignText:) withObject:cell afterDelay:0.0]; 
```

在*alignText:*你可以重新定义*textLabel* / *detalTextLabel*框架。

[在此处](https://stackoverflow.com/a/24841582/2066428)查看实施*

# javascript - 警报，提示...不在本地服务器（Tomcat）上工作

> ID：12201681
> 
> 赞同：2
> 
> 时间：2012-08-30T16:44:59.490
> 
> 标签：javascript, tomcat, localhost, alert, prompt

我曾尝试使用警报、提示和结果：

*   如果我打开 html 文件（地址栏：file:///C:/..../index.html），它可以工作，出现一个对话框。
*   如果我将 html 文件、javascript 文件放在 Tomcat 的 webapps 文件夹中，并通过 localhost:8080 打开 index.html，它不起作用。

    *错误：* **未捕获的类型错误：对象 [对象窗口] 的属性“警报”不是函数**

为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:47:13.300

是否安装了弹窗拦截插件？如果这样做，请禁用/删除它并查看错误是否消失。

或者

在您的代码中的某个地方，您覆盖了警报。检查 var alert = ... 或其他类似的声明。还要检查 window.alert 声明。

# performance - 计算 2*2 矩阵秩的最快方法？

> ID：12201682
> 
> 赞同：10
> 
> 时间：2012-08-30T16:45:04.337
> 
> 标签：performance, r, matrix, rank

在 R 中计算矩阵秩的推荐方法似乎是`qr`：

```
X <- matrix(c(1, 2, 3, 4), ncol = 2, byrow=T)
Y <- matrix(c(1.0, 1, 1, 1), ncol = 2, byrow=T)
qr(X)$rank
[1] 2
qr(Y)$rank
[1] 1 
```

通过针对我的特定情况修改此功能，我能够提高效率：

```
qr2 <- function (x, tol = 1e-07) { 
  if (!is.double(x)) 
  storage.mode(x) <- "double"
  p <- as.integer(2)
  n <- as.integer(2)
  res <- .Fortran("dqrdc2", qr = x, n, n, p, as.double(tol),
                  rank = integer(1L), qraux = double(p), pivot = as.integer(1L:p), 
                  double(2 * p), PACKAGE = "base")[c(1, 6, 7, 8)]
  class(res) <- "qr"
  res}

qr2(X)$rank
[1] 2
qr2(Y)$rank
[1] 1

library(microbenchmark)
microbenchmark(qr(X)$rank,qr2(X)$rank,times=1000)
Unit: microseconds
         expr    min     lq median     uq      max
1  qr(X)$rank 41.577 44.041 45.580 46.812 1302.091
2 qr2(X)$rank 19.403 21.251 23.099 24.331   80.997 
```

使用 R，是否可以更快地计算 2*2 矩阵的秩？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T17:13:40.313

当然，只需去掉更多你不需要的东西（因为你知道值是什么），不要做任何检查，设置`DUP=FALSE`，只返回你想要的：

```
qr3 <- function (x, tol = 1e-07) {
  .Fortran("dqrdc2", qr=x*1.0, 2L, 2L, 2L, tol*1.0,
           rank = 0L, qraux = double(2L), pivot = c(1L,2L), 
           double(4L), DUP = FALSE, PACKAGE = "base")[[6L]]
}
microbenchmark(qr(X)$rank,qr2(X)$rank,qr3(X),times=1000)
# Unit: microseconds
#          expr    min      lq  median      uq     max
# 1  qr(X)$rank 33.303 34.2725 34.9720 35.5180 737.599
# 2 qr2(X)$rank 18.334 18.9780 19.4935 19.9240  38.063
# 3      qr3(X)  6.536  7.2100  8.3550  8.5995 657.099 
```

我不提倡取消支票，但它们确实会减慢速度。 `x*1.0`并`tol*1.0`确保双打，所以这是一种检查并增加了一些开销。另请注意，这`DUP=FALSE`可能很危险，因为您可以更改输入对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-21T11:02:07.243

我们可以使用 RcppEigen 做得更好。

```
// [[Rcpp::depends(RcppEigen)]]
#include <RcppEigen.h>
using namespace Rcpp;
using   Eigen::Map;
using   Eigen::MatrixXd;
using   Eigen::FullPivHouseholderQR;
typedef  Map<MatrixXd>  MapMatd;

//calculate rank of a matrix using QR decomposition with pivoting 

// [[Rcpp::export]]
int rankEigen(NumericMatrix  m) {
   const MapMatd  X(as<MapMatd>(m));
   FullPivHouseholderQR<MatrixXd> qr(X);
   qr.setThreshold(1e-7);
   return qr.rank();
} 
```

基准：

```
microbenchmark(rankEigen(X), qr3(X),times=1000)
Unit: microseconds
         expr   min    lq median    uq    max neval
 rankEigen(X) 1.849 2.465  2.773 3.081 18.171  1000
       qr3(X) 5.852 6.469  7.084 7.392 48.352  1000 
```

但是，公差与 LINPACK 中的公差并不完全相同，因为公差定义不同：

```
test <- sapply(1:200, function(i) {
  Y <- matrix(c(10^(-i), 10^(-i), 10^(-i), 10^(-i)), ncol = 2, byrow=T)
  qr3(Y) ==  rankEigen(Y)
})

which.min(test)
#[1] 159 
```

FullPivHouseholderQR 中的阈值定义为：

> 如果一个主元的绝对值严格大于 |pivot|≤ 阈值 * |maxpivot|，则枢轴将被视为非零 其中 maxpivot 是最大的枢轴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T22:39:32.487

如果这个功能在这种情况下缺乏一些预防措施，现在让我说，但它似乎相当快

```
myrank <- function(x)
  if(sum(x^2) < 1e-7) 0 else if(abs(x[1,1]*x[2,2]-x[1,2]*x[2,1]) < 1e-7) 1 else 2

microbenchmark(qr(X)$rank, qr2(X)$rank, qr3(X), myrank(X), times = 1000)
Unit: microseconds
         expr    min     lq median      uq      max
1   myrank(X)  7.466  9.333 10.732 11.1990   97.521
2  qr(X)$rank 52.727 55.993 57.860 62.5260 1237.446
3 qr2(X)$rank 30.329 32.196 33.130 35.4625  178.245
4      qr3(X) 11.199 12.599 13.999 14.9310  116.185

system.time(for(i in 1:10e5) myrank(X))
   user  system elapsed 
   7.46    0.02    7.85 
system.time(for(i in 1:10e5) qr3(X))
   user  system elapsed 
  10.97    0.00   11.85 
system.time(for(i in 1:10e5) qr2(X)$rank)
   user  system elapsed 
  31.71    0.00   33.99 
system.time(for(i in 1:10e5) qr(X)$rank)
   user  system elapsed 
  55.01    0.03   59.73 
```

# coded-ui-tests - 处理 CloseMainWindow() 函数不起作用

> ID：12201685
> 
> 赞同：1
> 
> 时间：2012-08-30T16:45:15.873
> 
> 标签：coded-ui-tests

我有一个测试方法，需要在测试期间多次打开和关闭 Internet Explorer。我一直在创建这样的过程：

> 进程进程 = Process.Start(...);

并像这样关闭它：

> process.CloseMainWindow();

但是，我发现我只能调用一次该方法，否则会收到错误消息“进程已退出，因此请求的信息不可用”。

关闭进程后，我将重新启动 Internet Explorer。例如

> 进程 = Process.Start(...);

但这没有用。我还尝试在调用 Process.Start() 方法之前将 Process 变量清空，但这不起作用。

我也尝试使用 process.Kill()，但这也引起了问题。

这样做的正确方法是什么？

更新：代码

```
Process Browser;

[TestInitialize]
public void TestSetup()
{
    Browser = TestBase.LaunchBrowser();

    ...

    Browser.WaitForInputIdle();
    Browser.CloseMainWindow();

    Browser = null
    Browser = Process.Start("IExplore.exe", ...);
}

[TestMethod]
public void MyTest()
{
   // do things
   Browser.Kill();
   Browser = Process.Start("IExplore", "www.adifferentwebpage");
}

[TestCleanup]
public void TestCleanup
{
   Browser.Kill();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:02:30.803

我建议创建另一个进程而不重用相同的变量。将您的代码封装在 using 语句中以正确关闭和处置流程变量

```
using(Process process = new Process())
{
    // do you stuff 

    process.Start(.....);

    process.CloseMainWindow();
} 
```

还要记住，调用 CloseMainWindow 并不能保证进程将关闭。它只发送一个关闭进程主窗口的请求。如果应用程序在退出前要求用户确认，它可以拒绝退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:54:14.400

我找到了一个解决方案，但它只适用于那些有权访问编码 UI 测试 DLL（我相信 Visual Studio Ultimate 和 Premium 附带）的人。因此，我将更改问题的标签。

如果您创建 Coded UI 测试项目，这些 DLL 引用将已经存在，但您需要的是这个 using 引用：

> 使用 Microsoft.VisualStudio.TestTools.UITesting；

创建浏览器窗口：

> BrowserWindow browser = BrowserWindow.Launch(new System.Uri("www.whatever.com"));

关闭：

> Browser.Close();

无论我需要重新启动浏览器多少次，这都有效。此 API 还包括许多其他方便的功能，例如删除 cookie、更改当前浏览器的 URL、调整窗口大小等。

# android - OnCreateView 多次调用/使用 ActionBar 和 Fragments

> ID：12201695
> 
> 赞同：47
> 
> 时间：2012-08-30T16:45:56.607
> 
> 标签：android, android-fragments, android-activity, android-actionbar

我将我的应用程序的一部分从活动切换到片段，以便我可以使用整洁的 ActionBar 选项卡。

但是，在完成转换后，我遇到了一个问题：每当我切换到另一个选项卡时，都会重新创建该片段。每次进入选项卡时都会调用 onCreate 和 onCreateView 。

我有 4 个选项卡，每个选项卡都用于打开以下片段之一：

```
Fragment ShopFragment = new WebActivity();
Fragment SearchFragment = new SearchActivity(context);
Fragment StoreFragment = new StoreLocatorActivity(context, this);
Fragment BlogsFragment = new BlogsActivity(context, this); 
```

这是我的听众代码：

```
 class MyTabsListener implements ActionBar.TabListener {
        public Fragment fragment;

        public MyTabsListener(Fragment fragment) {
            this.fragment = fragment;
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            ft.hide(fragment);
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.replace(R.id.fragment_container, fragment);
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {          

        }

    } 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-01T14:08:43.243

当您调用[FragmentTransaction.replace(...)](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#replace%28int,%20android.support.v4.app.Fragment,%20java.lang.String%29)时，Android 将有效地执行一系列[FragmentTransaction.remove(...)](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#remove%28android.support.v4.app.Fragment%29)（对于当前添加到该容器的所有 Fragment）和[FragmentTransaction.add(...)](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#add%28int,%20android.support.v4.app.Fragment,%20java.lang.String%29)（对于您提供的分段）。从 will 中移除 Fragment`FragmentManager`会导致 Fragment 被销毁并且其状态将不再被管理。最值得注意的是，当您重新添加片段时，所有视图都将被重置。注意：由于您正在重用相同的 Fragment 实例，因此 Fragment 仍将保留任何实例变量的值。

解决此问题的一种方法是在切换时使用[FragmentTransaction.detach(Fragment)](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#detach%28android.support.v4.app.Fragment%29)和[FragmentTransaction.attach(Fragment)](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#attach%28android.support.v4.app.Fragment%29)。这将导致 Fragment 视图被重新创建（`onDestroyView()`&`onCreateView()`将被调用），但实例状态包将被保存并在调用之间返回给您，因此可以维护视图状态。这是[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)在尝试在 Fragment 之间切换时采用的方法。

或者，您可以允许 Fragments 被销毁，但独立维护它们的保存状态。这将使用更少的内存，但代价是切换时间更慢。注意的方法是[FragmentManager.saveFragmentInstanceState(Fragment)](http://developer.android.com/reference/android/app/FragmentManager.html#saveFragmentInstanceState%28android.app.Fragment%29)和[FragmentManager.setInitialSavedState(Fragment.SavedState)](http://developer.android.com/reference/android/app/Fragment.html#setInitialSavedState%28android.app.Fragment.SavedState%29)，以及添加/删除。这是[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)采用的方法。

您可以查看[FragmentPagerAdapter](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/support/v4/app/FragmentPagerAdapter.java#FragmentPagerAdapter)的[源代码和 FragmentStatePagerAdapter 的源代码以](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/support/v4/app/FragmentStatePagerAdapter.java#FragmentStatePagerAdapter)获取实现提示。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-25T19:00:26.857

有[显示](http://developer.android.com/reference/android/app/FragmentTransaction.html#show%28android.app.Fragment%29)/[隐藏](http://developer.android.com/reference/android/app/FragmentTransaction.html#hide%28android.app.Fragment%29)选项，这样片段就不需要重新绘制/重新创建，`onCreate()`并且`onCreateView()`不会被重新调用。

# python - 在 django admin 的 list_editable 中实现一对多编辑的直接方法是什么？

> ID：12201697
> 
> 赞同：5
> 
> 时间：2012-08-30T16:46:09.627
> 
> 标签：python, django, django-models, django-admin

给定以下模型：

```
class Store(models.Model):
    name = models.CharField(max_length=150)

class ItemGroup(models.Model):
    group = models.CharField(max_length=100)
    code = models.CharField(max_length=20)

class ItemType(models.Model):
    store = models.ForeignKey(Store, on_delete=models.CASCADE, related_name="item_types")
    item_group = models.ForeignKey(ItemGroup)
    type = models.CharField(max_length=100) 
```

`item_types`内联的句柄`Store`在查看单个`Store`.

内容管理团队希望能够批量编辑商店及其类型。是否有一种简单的实现方法`Store.item_types`，`list_editable`其中还允许添加新记录，类似于`horizontal_filter`？如果没有，是否有显示如何实现自定义`list_editable`模板的简单指南？我一直在谷歌搜索，但无法提出任何建议。

此外，如果有更简单或更好的方法来设置这些模型以使其更易于实现，请随时发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:19:36.583

让 ItemType 成为 Store 的 ManyToManyField 怎么样？

对我来说，如果您要更改商店中可用的 ItemTypes，那么您正在更改 Store 的属性（而不是 ItemType），这似乎是合乎逻辑的。

例如：

```
from django.db import models

class ItemGroup(models.Model):
    group = models.CharField(max_length=100)
    code = models.CharField(max_length=20)

class ItemType(models.Model):
    item_group = models.ForeignKey(ItemGroup)
    type = models.CharField(max_length=100)

class Store(models.Model):
    name = models.CharField(max_length=150)
    item_type = models.ManyToManyField(ItemType, related_name="store")

# admin
from django.contrib import admin

class StoreAdmin(admin.ModelAdmin):
    list_display=('name', 'item_type',)
    list_editable=('item_type',)

for model in [(Store, StoreAdmin), (ItemGroup,), (ItemType,)]:
    admin.site.register(*model) 
```

我在这里收到一个错误：

```
File "C:\Python27\lib\site-packages\django\contrib\admin\validation.py", line 43, in validate
% (cls.__name__, idx, field))
django.core.exceptions.ImproperlyConfigured: 'StoreAdmin.list_display[1]', 'item_type' is a ManyToManyField which is not supported. 
```

我通过在 django.contrib.admin.validation 中注释掉第 41-43 行来解决这个问题：

```
#if isinstance(f, models.ManyToManyField):
#    raise ImproperlyConfigured("'%s.list_display[%d]', '%s' is a ManyToManyField which is not supported."
#        % (cls.__name__, idx, field)) 
```

可能不是理想的解决方案，但它似乎对我有用。

# django - 我正在寻找 django mptt 的工作示例

> ID：12201702
> 
> 赞同：2
> 
> 时间：2012-08-30T16:46:16.187
> 
> 标签：django, django-mptt

有没有人有 django mptt 的工作示例。我无法实现它。也许是类别系统。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:40:51.980

这是我的代码，是会计应用程序的一部分：

```
from mptt.models import MPTTModel
from mptt.fields import TreeForeignKey

class Category(MPTTModel):
    ledger = models.ForeignKey(Ledger)
    parent = TreeForeignKey(
        'self', null = True, blank = True, default = None,
        related_name = 'children'
    )
    label = models.CharField(max_length = 60) 
```

这只是遵循文档。哪个特定部分对您来说出了问题？

# jquery - jQuery 插件无法在我的 rails 3 应用程序上运行

> ID：12201704
> 
> 赞同：0
> 
> 时间：2012-08-30T16:46:25.740
> 
> 标签：jquery, ruby-on-rails-3

很抱歉，如果之前已经问过这个问题，我尝试搜索但找不到任何解决方案..有人可以帮我让我的 jQuery 插件在 rails 3 中工作。

我已经在互联网上下载了一个 jquery 插件，尝试在我的 rails 应用程序上安装它，它似乎根本没有加载..

我确定我已经放置了这个插件在资产/图像、样式表和 javascripts 中工作所需的所有必要文件

这是我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

和我的gallery.js.coffee 应该在哪里调用插件

```
jQuery ->
   $('#da-slider').cslider 
```

以及包裹布局的部分

```
<div id="da-slider" class="da-slider"> 
```

我什至尝试通过在我的 gallery.js.coffee 上询问插件来测试我的插件是否正常工作，但它一直说“未加载”

```
if (jQuery).cslider 
  alert('loaded')
else
  alert('not loaded') 
```

非常感谢您的帮助。很抱歉给任何人带来麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:08:21.967

要检查的事项：

*   加载页面时检查 javascript 错误 - 您应该能够在 Safari-> Dev Console 或使用 FireBug 的 Firefox 中看到此错误

*   确保您的 Gemfile 中有 jquery-rail 和 coffee gem

*   检查`application.js`和`application.css`文件 - 它们都是必需的，应该如下所示：

*应用程序/资产/javascripts/application.js*

```
//= require jquery.js
//= require jquery_ujs.js 
```

*应用程序/资产/样式表/application.css*

```
*= require jquery.ui.all.css 
```

但是，请注意，我在使用 jquery.ui.all.css 文件时遇到了一些问题，您可能会像我一样获得更多成功，像这样指定它：

```
*= require jquery.ui.core.css
*= require jquery.ui.slider.css 
```

**注意**由于您使用的是 cSlider - 我认为您**需要**该`jquery.ui.slider.css`文件！确保您需要全部 jquery，或者至少需要滑块 css 文件。

*   最后，确保您的视图中包含 application.css 和 application.js - 没有这些包含，应用程序无法知道您想要它做什么。在您的部分中，这应该看起来像这样`<html><head>`：

`<%= stylesheet_link_tag 'application'%>`

`<%= javascript_include_tag 'application' %>`

# qt - QtSDK第一次编译报错

> ID：12201709
> 
> 赞同：0
> 
> 时间：2012-08-30T16:46:42.137
> 
> 标签：qt

我已经下载了 Windows 的 QtSDK 并安装了它。

我正在使用 QtCreator 运行他们的测试程序，但遇到了这个问题：

```
17:03:30: Running build steps for project keepintouch...
17:03:30: Configuration unchanged, skipping qmake step.
17:03:30: Starting: "C:\QtSDK\mingw\bin\mingw32-make.exe" 
C:/QtSDK/mingw/bin/mingw32-make.exe -f Makefile.Debug
mingw32-make.exe[1]: Entering directory `C:/QtSDK/Examples/QtMobility/keepintouch-  build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug2'
g++ -c -g -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL - DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN  - I"..\..\..\Desktop\Qt\4.8.1\mingw\include\QtCore" -I"..\..\..\Desktop\Qt\4.8.1\mingw\include\QtGui" -I"..\..\..\Desktop\Qt\4.8.1\mingw\include" -I"..\..\src\messaging" -I"..\..\src\contacts" -I"..\..\src\contacts\details" -I"..\..\src\contacts\filters" -I"..\..\src\contacts\requests" -I"..\..\..\Desktop\Qt\4.8.1\mingw\include\ActiveQt" -I"debug" -I"..\keepintouch" -I"." -I"..\..\..\Desktop\Qt\4.8.1\mingw\mkspecs\win32-g++" -o debug\addressfinder.o ..\keepintouch\addressfinder.cpp
mingw32-make.exe[1]: Leaving directory `C:/QtSDK/Examples/QtMobility/keepintouch-build-  desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug2'
 mingw32-make.exe[1]: *** [debug/addressfinder.o] Error 1
 mingw32-make.exe: *** [debug] Error 2
 17:03:31: The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited with code 2.
 Error while building project keepintouch (target: Desktop)
 When executing build step 'Make' 
```

# java - 如何在 JavaFX 中查找具有 ID 的元素？

> ID：12201712
> 
> 赞同：72
> 
> 时间：2012-08-30T16:46:48.353
> 
> 标签：java, javafx

我有一个 ID`history`类型为`TableView`. 如果我有 的实例，如何查找和访问该对象`Scene scene`？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-08-30T17:23:08.307

尝试

```
TableView tb = (TableView) scene.lookup("#history"); 
```

# python - 为什么 [1].append(2) 评估为 None 而不是 [1,2]？

> ID：12201716
> 
> 赞同：2
> 
> 时间：2012-08-30T16:46:58.737
> 
> 标签：python

为什么`print [1].append(2)`评估为无？我预计`[1,2]`

```
>>> print [1].append(2)
None 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T16:49:59.437

那是因为 append 什么都不返回 (= `None`)。

```
>>> print [1].append(2)
None 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:50:18.050

`array.append`不返回您附加到的数组，它返回`None`.

# vbscript - 关于使这个 VBScript 函数更快的任何想法？

> ID：12201718
> 
> 赞同：0
> 
> 时间：2012-08-30T16:47:06.887
> 
> 标签：vbscript

我需要在主脚本的不同部分多次调用此函数。它只是查看是否安装了软件（将软件名称作为参数给出）。

这只是一段代码，也就是这个函数。它的远程方面工作正常。

```
'*************************************************************************
' This Subroutine checks if software is installed on system
'*************************************************************************
Sub CheckInstalledSoftware(item)
   ' This sub is VERY slow
   blnCondition = False 'Simple check to see if software was found
   WScript.Echo("Check if " & item & " is installed.")
   WScript.Echo("------------------------------------")
   Set colSoftware = objWMISrvc.ExecQuery("SELECT * FROM Win32_Product WHERE Name = '" & item & "'")
   For Each objSoftware in colSoftware
                If (objSoftware.InstallState = 5) Then
                   WScript.Echo(item & " is installed" & vbCrLf)
                   blnCondition = True
                End  If
   Next
   If blnCondition <> True Then
      WScript.Echo(item & " is not installed" & vbCrLf)
   End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:30:02.437

不幸的是，没有办法让它更快。Win32_Product 类的开销很大。您唯一的选择是找到不需要使用此特定 WMI 类的方法。如果您有其他代码，则可以在执行其他操作时异步执行这部分。如果您也打开“添加和删除程序”对话框，您会注意到同样糟糕的性能。

# dojo - 如何在道场的 DateTextBox 中突出显示今天的日期

> ID：12201722
> 
> 赞同：4
> 
> 时间：2012-08-30T16:47:12.807
> 
> 标签：dojo

当文本框为空时，有没有办法在 dojo DateTextBox 中突出显示（显示选定的）当前日期？我不想在文本框中显示日期（它应该保持为空），而只是为了显示今天的日期。

我尝试为此使用 dojo 提供的“dropDownDefaultValue”属性，但它不起作用（当前值未显示为选中或突出显示）。

我正在使用 dojo 版本 1.7.1。

在这方面的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T17:24:36.213

如果您查看用于`DateTextBox`弹出窗口的 html，您会看到`td`当前日期的 html 如下所示：

```
<td class="dijitCalendarEnabledDate dijitCalendarCurrentDate dijitCalendarCurrentMonth dijitCalendarDateTemplate" role="gridcell" data-dojo-attach-point="dateCells" aria-selected="false" tabindex="0">
    <span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels">30</span>
</td> 
```

如果要设置当前日期的样式以使其显示不同，则应更新添加一个 CSS 选择器，例如

```
.dijitCalendarDateTemplate.dijitCalendarCurrentDate{
    /*your styling */
    background-color: green;
} 
```

# android - 连接到设备时 GCM Android 演示错误

> ID：12201735
> 
> 赞同：1
> 
> 时间：2012-08-30T16:48:04.050
> 
> 标签：android, google-cloud-messaging, android-networking

我正在尝试了解 GCM 和一个新手......我正在运行演示：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)。但是，由于以下错误，我可以注册我的设备（HTC S）：

```
java.net.ConnectException: failed to connect to localhost/127.0.0.1 (port 8080): connect failed: ECONNREFUSED (Connection refused) 
```

在我的活动中，我收到了这条消息：`From GCM: device successfully registered!`

然后收到这些消息： Trying (attempt %1$d/%2$d) to register device on Demo Server

这些是我的应用程序的参数：

```
static final String SERVER_URL ="http://localhost:8080/Server_Demo";

static final String SENDER_ID = "902733651294"; 
```

我有一种预感，这与我的网络在我的计算机和/或我的设备上的定义方式有关......任何帮助将不胜感激！

编辑：通过使用 Eclipse 的“动态网络项目”的网络服务器图片。 ![在此处输入图像描述](../Images/39b4b672d22355e522207f2c7db798e1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:17:21.457

演示服务器没有在您手机的本地主机（即手机本身）上运行，这是肯定的。它在任何地方运行吗？首先部署演示服务器，然后相应地更改 SERVER_URL。

通常，GCM 假定您有一些云基础设施（即某处托管的 Web 服务器）。这就是 C 的含义。

# function - PostgreSQL：错误：$name$ 不是标量变量

> ID：12201738
> 
> 赞同：2
> 
> 时间：2012-08-30T16:48:07.753
> 
> 标签：function, postgresql, stored-procedures, syntax-error, plpgsql

有一个函数返回 3 个参数，其中一个是复合类型：

```
CREATE OR REPLACE FUNCTION f1(
  p_text text,
  OUT result_status_id smallint,
  OUT result_status_msg text,
  OUT result_my_type my_type
  )
  RETURNS record AS
$BODY$
--body here
$BODY$
LANGUAGE 'plpgsql' VOLATILE SECURITY DEFINER
  COST 100 
```

复合类型 my_type 如下所示：

```
CREATE TYPE my_type AS
   (d_real real,
    d_int1 integer,
    d_int2 integer,
    d_int3 integer,
    d_int4 integer,
    d_int5 integer,
    d_int6 integer,
    d_int7 integer,
    d_int8 integer,
    d_int9 integer,
    d_int10 integer,
    d_bool boolean,
    d_date date,
    d_text text
); 
```

还有另一个函数 f2 在其主体中调用函数 f1：

```
CREATE OR REPLACE FUNCTION f2(
    p_text text
)
  RETURNS record AS
$BODY$
DECLARE
    l_status_id smallint;
    l_status_msg text;
    l_my_type my_type;
BEGIN
--some logic here

--this statement fails
  SELECT * FROM f1(p_text) 'x' 
  INTO l_status_id, l_status_msg, l_my_type;

--logic continues here
END;
$BODY$
  LANGUAGE 'plpgsql' VOLATILE SECURITY DEFINER
  COST 100; 
```

问题是当使用该函数执行 sql 时，我收到以下错误：

```
ERROR: "l_my_type" is not a scalar variable 
```

如何从另一个函数中获取复合类型对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:56:38.697

你违反了规则。[手册：](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-ONEROW)

> 其中***target***可以是记录变量、行变量或简单变量和记录/行字段的逗号分隔列表。

记录或行变量*不能*是多项目`INTO`列表的一部分。
一种解决方法：

```
CREATE OR REPLACE FUNCTION f2(p_text text)
  RETURNS record AS
$BODY$
DECLARE
   r            record;
   l_status_id  smallint;
   l_status_msg text;
   l_my_type    my_type;
BEGIN
   SELECT *
   FROM f1(p_text) x  -- don't single quote 'x'
   INTO r;

   l_status_id  := r.result_status_id;
   l_status_msg := r.result_status_msg;
   l_my_type    := r.result_my_type;

  RETURN r; -- or whatever ..
END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

还有更多的方法。这取决于你要去哪里。我几乎从不返回匿名记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:09:30.230

元组中的复合类型是部分支持的东西之一，您会遇到奇怪的问题（特别是像存储这样的细化，但这是另一个故事）。你可以做到这一点的一种方法是：

```
CREATE TYPE return_type_for_function AS (
       result_status_id smallint,
       result_status_msg text,
       result_my_type my_type
);

CREATE FUNCTION myfunc(....) RETURNS return_type_for_function .... 
```

这是我一直这样做的方式。这比使用 OUT 变量要成熟一点。

这是一个简单的例子：

```
or_examples=# create table rel_examples.tabletest (id int);
CREATE TABLE

or_examples=# create table comp_table_test (test rel_examples.tabletest);
CREATE TABLE

or_examples=# create function test(int) returns comp_table_test
immutable language sql as $$
select row(row($1))::comp_table_test; $$;
CREATE FUNCTION
or_examples=# select test(1);
  test   
---------
("(1)")
(1 row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:12:43.883

但是，@Chris Travers 提出了一个可接受的解决方案，在我的情况下，不幸的是不可能引入一种新类型来从 f1 函数返回数据。

然而，可以在函数 f2() 中调用函数 f1() 并仍然使用以下语法获取数据：

```
CREATE OR REPLACE FUNCTION f2(
    p_text text
)
  RETURNS record AS
$BODY$
DECLARE
    l_status_id smallint;
    l_status_msg text;
    l_my_type my_type;
    l_record record;
BEGIN
--some logic here

--this statement is okay now
  l_record = f1(p_text);
  l_status_id = l_record.result_status_id;
  l_status_msg = l_record.result_status_msg;
  l_my_type = l_record.result_my_type;

--logic continues here
END;
$BODY$
  LANGUAGE 'plpgsql' VOLATILE SECURITY DEFINER
  COST 100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:48:12.453

在您的 f2() 函数中，您可以选择一个记录变量，然后从中提取您需要的内容，例如：

```
CREATE OR REPLACE FUNCTION f2(p_text text )
  RETURNS record AS
$BODY$
DECLARE
    record_var record;
BEGIN
--this statement was failing
  SELECT * FROM f1(p_text) INTO record_var;

 SELECT l_my_type.result_my_type.d_int1; -- this should work

END;
$BODY$
  LANGUAGE 'plpgsql' VOLATILE SECURITY DEFINER
  COST 100; 
```

# mercurial - 如何按名称更新到分支？

> ID：12201739
> 
> 赞同：5
> 
> 时间：2012-08-30T16:48:10.153
> 
> 标签：mercurial, branch

我刚刚在做

```
hg up mybranch 
```

到现在为止，大多数情况下都可以正常工作，但我们有一些分支的名字只有数字。应该如何`up`区分修订号和分支名称？它似乎不支持该`-b`选项，而且我不知道有任何其他按名称更新到分支的方法，那么正确的做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:44:13.113

像这样使用[`branch()`revset 运算符](http://www.selenic.com/mercurial/hg.1.html#revsets)：

```
$ hg update "branch(123)" 
```

这样，如果您设法创建了一个模棱两可的名称，您就可以区分修订号、分支名称、标签等。当然不鼓励一开始就创建这样的名字，但我相信你现在已经明白了:-)

# c# - 有没有办法在环境变量中而不是在 web.config 中设置 Web 引用 URL？

> ID：12201740
> 
> 赞同：0
> 
> 时间：2012-08-30T16:48:11.490
> 
> 标签：c#, .net, api, web-config, environment-variables

我想从我的 web.config 中提取 Web References URL 配置，这样我们就不必为每个环境维护单独的配置文件。

我们决定的路径是将变量存储为环境变量。有没有办法让我指向我的 Web 引用以使用我设置的 URL 变量而不是 web.config？我还没有找到任何东西......

谢谢！

注意，当我说“环境变量”时，这就是我所说的： ![在此处输入图像描述](../Images/5254da2f880e1be5f58ca880da33adf2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:51:38.080

为什么不？它只是一个`string`. 使用[`Environment.GetEnvironmentVariable`](http://msdn.microsoft.com/en-us/library/77zkk0b6.aspx). 您应该在系统级别设置它，以便更容易配置。确保提供后备和适当的错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:52:02.347

您可以在 c# 中像这样访问环境变量：

```
Environment.GetEnvironmentVariable("NameOfVariable") 
```

# macos - 设置 Mac 文件夹的图标

> ID：12201747
> 
> 赞同：0
> 
> 时间：2012-08-30T16:48:35.573
> 
> 标签：macos, packagemaker

我正在为 Mac OS X 制作一个带有 packagemaker 的安装程序，我想将我的包与另一个可执行文件一起放在一个目录中以进行卸载。我遇到的问题是我希望该目录具有自定义图标。所以谁能告诉我最好的方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:57:30.660

这似乎不是一个与编程相关的问题。顺便一提：

1.  选择您想要将其图标添加到另一个上的卷、应用程序、文件夹或文件，只需单击图标将其选中。
2.  从“文件”菜单中，选择“获取信息”或按 Command-I 打开“信息”窗口。
3.  单击信息窗口左上角的图标将其选中。
4.  从“编辑”菜单中，选择“复制”或按 Command-C。
5.  选择要替换其图标的宗卷、应用程序、文件夹或文件。
6.  从“文件”菜单中，选择“获取信息”或按 Command-I。
7.  单击左上角的图标。
8.  从“编辑”菜单中，选择“粘贴”或按 Command-V 替换图标。

[以下](https://stackoverflow.com/questions/5739330/using-cocoa-to-create-an-icon-for-a-folder)是如何使用**cocoa**和**obj-c**以编程方式设置它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T18:26:16.990

或者您可以从 appStore 下载特殊应用程序...

或者这样做：

1.  单击要将其图标粘贴到另一个项目上的卷、应用程序、文件夹或文件。
2.  从“文件”菜单中，选择“获取信息”或按 Command-I 打开“获取信息”窗口。
3.  单击“获取信息”窗口左上角的图标将其选中。
4.  从“编辑”菜单中，选择“复制”或按 Command-C。
5.  选择要替换其图标的宗卷、应用程序、文件夹或文件。
6.  从“文件”菜单中，选择“获取信息”或按 Command-I。
7.  单击左上角的图标。
8.  从“编辑”菜单中，选择“粘贴”或按 Command-V 替换图标。

# macos - 可可：如何为视图添加粗条？

> ID：12201753
> 
> 赞同：0
> 
> 时间：2012-08-30T16:49:08.023
> 
> 标签：macos, cocoa

我想为我的自定义视图添加一个粗条，例如 Finder 搜索，如下所示：

![在此处输入图像描述](../Images/bc668d54ecb575596ec85904e4511f20.png)

Interface Builder中只有工具栏，我只需要添加一个粗条，我可以使用IB自定义其上的按钮，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:50:22.140

Cocoa 中没有“渐变视图”。您必须创建自己的 NSView 子类并使用 NSGradient 自己绘制渐变。不过，在你做出努力之前，请考虑在 github.com 上搜索一些现成的渐变视图。

# rest - 在不违反 REST 的情况下处理长查询

> ID：12201761
> 
> 赞同：2
> 
> 时间：2012-08-30T16:49:41.150
> 
> 标签：rest

我们有一个 REST api，我们在坚持 REST 精神方面做得很好。但是，我们有一个重要的消费者，他们正在请求一种方法来协调他们的数据存储。流程是这样的：

1.  消费者进行 GET 调用以检索在日期范围内创建的所有库存对象。假设这会返回 100 万个库存 VIN。
2.  消费者将有效负载与他们自己的数据存储进行比较，发现他们缺少 5,000 个库存对象
3.  消费者希望使用 5,000 个 VIN id 发出请求，并返回这 5,000 个对象。

问题是长查询字符串（vins 的 JSON 数组）碰到了我们服务器施加的查询字符串长度限制。可能的想法 - 进行 5k 单独调用（看起来很可怕），增加服务器上的查询字符串长度限制（不想这样做），改用 POST（不是 RESTful？）。

所以，我想知道罗伊菲尔丁会做什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:59:07.357

将`POST`带有 id 列表的 JSON 文件提交到新资源（例如，称为 ）`/inventory/difference`怎么样？

如果计算持续很长时间，您可以使用`202 Accepted`和正在生成的资源的 id 来回答，然后在`/inventory/difference/:id`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T18:59:14.717

有点类似于 moonwave99 的建议，但是您创建了一个称为“集合”的资源。

你 POST 到 /set 一个你希望在集合中的标识符列表。POST 的结果是指向指定特定集合的资源的重定向 URL。

所以：

```
POST /set 
```

结果：

```
301 Moved Permanently
Location: /set/123 
```

然后：

```
GET /set/123 
```

返回集合中的项目列表。

集合与“获取差异”的用例正交，它们只是项目的汇编。

如果创建集合需要很长时间，并且您认为集合本身是数据的快照，那么当用户尝试执行 GET /set/123 时，可以简单地回复 202 Accepted 直到实际数据集已完成完全的。

然后你可以使用：

```
GET /set/123/identifiers 
```

例如，如果您愿意，可以获取集合中实际标识符的集合。

你可以做类似的事情

```
POST /setfromquery 
```

并发送标准列表（名称如“John*”、city =“Los Angeles”等）。这实际上并不需要它自己的特定资源，只需定义您的查询“语言”以包括简单的 ID 列表以及可能的其他过滤条件。

集合操作（​​联合、差异等）。使用一组资源可以完成许多强大的事情。

最后，当然，还有曾经流行的：

```
DELETE /set/123 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:04:04.277

我认为没有人会指责您通过使用 POST 处理需要请求正文的请求来解决 GET 不接受请求正文的问题。你只是务实。

我同意，提出 5000 个单独的请求或提高查询字符串限制是丑陋的。POST是前进的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T18:15:24.930

在不创建资源的情况下使用帖子对我来说似乎太脏了。最后，我们做到了，“块”中请求的 id 限制为 100 个。在实践中，这些请求很少会大于 100，因此破解 REST 原则来适应边缘情况似乎是个坏主意。我确保在我们的 API 文档中明确定义了限制，完成并完成......

# selenium-ide - Selenium IDE Parse 存储属性

> ID：12201765
> 
> 赞同：1
> 
> 时间：2012-08-30T16:49:58.800
> 
> 标签：selenium-ide, html-content-extraction

我对编程非常陌生，并且正在尝试通过在 Selenium IDE 中创建自动化测试来工作。

我已经想出了如何使用“storeAttribute”命令保存属性。

**命令**：storeAttribute
**目标**：link=${projectlabel}@onclick
**值**：objectID

然后它存储以下变量：
“parent.loadPod('time_pod','time/index.cfm?action=viewPTE&objectID=2010860')”

我只需要提取**objectID 部分**（这 7 个数字）并将它们存储在一个新的变量名下。

谁能指导我如何做到这一点？或者如果它甚至可能？

谢谢，Orli
Orli.Yatziv@gmail.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:27:51.963

**命令**：storeEval
**目标**：storedVars['longname'].match(/objectID=(\d+)/)[1]
**值**：objectID

注意：如果您已经弄清楚了，您可以发布自己问题的答案。

# php - MySQL Export Import with ID auto_increment for Foreign Key

> ID：12201768
> 
> 赞同：0
> 
> 时间：2012-08-30T16:50:05.050
> 
> 标签：php, mysql

考虑我有 2 个具有相同字段的数据库。
第一个数据库用于导出数据，
第二个数据库作为副本有数据库

数据库 1 将以从 PHP 脚本输出的文件格式 csv 导出数据库。
数据库 2 将从 php 脚本导入数据库。

每个数据库中有两个与外键有关系的表。

**表交易**

```
create table `table_transaction` (
    `id` int auto_increment primary key
    `date` DATE default now()
) engine = innoDB; 
```

样本数据

```
id | date 
1  | 2012-12-31
2  | 2012-12-30
3  | 2012-12-29 
```

**table_transaction_product**

```
create table `table_transaction_product` (
    `id` int auto_increment primary key
    `product` string NOT NULL default '' /* Product Name */
    `fk_transaction` int auto_increment NOT NULL

     foreign key (`fk_transaction`)
         references table_transaction(`id`)
         on update cascade
         on delete cascade
) engine = innoDB; 
```

样本数据

```
id | product     | fk_transaction
1  | shampoo     | 1
2  | soap        | 1
3  | conditioner | 1 
```

这是从数据库 1 导出的 CSV 样本，将被导入表 2，即导出事务 id 1。

```
insert into table_transaction (id, date) values (1, '2012-12-31');
insert into table_transaction_product (id, product, fk_transaction) 
    values 
        (1, 'shampoo', 1),
        (2, 'soap', 1),
        (3, 'conditioner', 1) 
```

**问题**
因为`ID`两个表都是`auto_increment`. 我手动插入表格不会有任何问题。`id`并使 auto_increment mysql 系统崩溃？但是如果没有输入ID，让mysql来判断，那么外键就会不匹配。我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:19:29.530

它不应该引起问题，但我建议更改第二个数据库上的表定义以删除 auto_increment 标志。

# wix - WIX：根据功能选择安装可再发行组件

> ID：12201770
> 
> 赞同：0
> 
> 时间：2012-08-30T16:50:11.213
> 
> 标签：wix

我有一个独特的情况，我正在尝试找出最佳解决方案和最佳实践。我是 Wix 的新手，所以希望有人可以提供一些指导。

现在，我正在构建一个包含可选组件的安装程序（我知道这很令人震惊）。如果您安装可选组件，我们希望能够安装可选的可再发行 MSI。根据我的阅读，我意识到您实际上并不能从现有的 MSI 中运行可选的可再分发 MSI。

所以——这让我有两个选择——引导程序或模块合并。理想情况下，最好做类似的事情，如果他们选择一个可选功能，它将执行安装后的 MSI 安装——这与引导程序相反。

任何人都可以为此提供任何指导吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:59:40.770

> 当您**首先**从用户那里收集所有信息时，安装体验是最好的。

也就是说，我的偏好是使用 WiX 引导程序，然后您可以根据用户输入有条件地安装您的软件包。或者，如果您的 msi 中有可选功能，您可以通过从引导程序传递给 msi 的属性打开或关闭它们。

# java - 系统并发/多线程能力的基准测试

> ID：12201774
> 
> 赞同：0
> 
> 时间：2012-08-30T16:50:26.487
> 
> 标签：java, multithreading, benchmarking

有没有人熟悉，如果是的话，你能推荐我一个运行 JVM 的系统的多线程/并发能力的基准吗？

几年前，我使用非循环障碍来跟踪最大线程数和令人尴尬的并行度，我自己编写了自己的代码。

我有兴趣测量 JVM 在不同系统（包括运行优化的 JVM 的 HPC 平台）上可以维持的启动时间、执行时间和总体/最大线程数的差异。我还对测量标准多线程场景的性能感兴趣，例如读取器/写入器和对 ConcurrentHashMap 等共享数据结构的读写访问。

我想知道现在是否有更官方的东西，严格专注于有人可以推荐的各种并发场景。

提前致谢。（我熟悉 SPEC 的 JVM benchmark 和 DaCapo）

# c# - 抽象/虚拟 OnMethod 的 .NET 设计模式的优缺点

> ID：12201776
> 
> 赞同：0
> 
> 时间：2012-08-30T16:50:28.950
> 
> 标签：c#, .net, design-patterns

我注意到在很多 Microsoft .NET 类中通常有一个非抽象/虚拟公共方法，例如

```
public bool MyAwesomeMethod(object someParameter); 
```

以及受保护的抽象/虚拟方法，例如

```
protected virtual bool OnMyAwesomeMethod(object someParameter); 
```

我最近开始怀疑这是否是一种已知的设计模式，以及这种设计的优点和缺点可能是什么。是否所有关于使基类能够执行类的子类无法阻止的一些逻辑（例如日志记录）？出于某种原因，默认情况下对您知道要在子类中覆盖的方法使用这种排序设计是否不可取？还有其他我没有考虑的因素吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:59:06.883

差不多就是这样；当您希望某些行为始终在派生类覆盖之前和/或之后发生时，您可以使用它。

记录当然是可能的，但在有时完成的更底层的调用中不太可能。不过，这可能是几件事之一，这可能对班级的运作至关重要。

也可以“以防万一”在以后需要之前或之后捕获每个呼叫。正常灵活性与 YAGNI 参数适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:04:43.283

在 MS WinForms/WPF 编码约定中，以“On”开头的函数用于引发事件。这些方法有时（但并非总是）具有相关的公共方法；他们几乎总是有相关的事件代表。

这样做的优点（和缺点）与关注点分离以及 Windows GUI 中固有的消息传递有关。基本上，当您调用一个方法时，比如 Control.Invalidate()，您所做的是告诉控件通过 Windows 消息循环向自身发送消息（在本例中为 WM_PAINT 消息）。程序将其推送到 Windows，然后将其放在消息队列的后端以供应用程序处理。这样，涉及到 UI 的命令以 FIFO 的方式处理，并且像动画或 UI 的不断变化之类的事情不会占用 UI 线程的所有时间。

无论如何，当程序的消息泵从队列中取回 WM_PAINT 消息时，它会将其定向到控件，该控件通过调用 OnPaint() 来响应它。OnPaint() 进行基本的控件绘制（通常通过调用其他方法），然后引发 Paint 事件，其他代码段可能正在侦听该事件，因为它们应该在重新绘制控件时执行某些操作。

# ios - 是否可以创建一个包含 4 个部分的 uitableview，但第一部分没有单元格

> ID：12201777
> 
> 赞同：0
> 
> 时间：2012-08-30T16:50:37.297
> 
> 标签：ios, uitableview

我想在表格的最顶部创建一个部分，但该部分仅用于显示我不想放入单元格中的特殊信息。如果表格不显示空单元格，我将如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:57:14.687

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
NSInteger rows=0;
    switch (section) 

{   case 0:
        rows=0;
        break;

    case 1:
        rows=any number;
        break;
    case 2:
        rows=any number;
        break;
    case 3:
        rows=any number;
        break;
    default:
        break;
};
return rows;
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 4;
} 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:55:11.490

只需将特殊信息作为节标题`tableView:titleForHeaderInSection:`返回并返回 0 行`tableView:numberOfRowsInSection:`。您可以通过在中返回标题来获得该部分标题的自定义视图`tableView:viewForHeaderInSection:`

（或者）

您可以通过将`tableHeaderView`属性分配给任何 UIView（或其子类）来为您的表格创建一个标题。[有关更多信息，请在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)查看 Apple 的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:59:19.367

您可以在此特定部分中使用空单元格。单元格可以是任何东西，也可以是透明的。

# silverlight - 为什么当 SolidColorBrush 存在时，Silverlight Canvas ImageBrush 不作为 CanvasBackground 可见？

> ID：12201782
> 
> 赞同：0
> 
> 时间：2012-08-30T16:50:59.880
> 
> 标签：silverlight, background

我有两个非常简单的 XAML 变体。首先是使用纯色画笔绘制画布背景的变体。

```
<UserControl x:Class="CanvasBackground.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot">
        <Canvas x:Name="SeedCanvas">
            <Canvas.Background>
                <SolidColorBrush Color="Aquamarine" />
            </Canvas.Background>
        </Canvas>
    </Grid>
</UserControl> 
```

这托管在一个相当简单的 HTML 页面中

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>CanvasBackground</title>
<style type="text/css">
    html, body {
        height: 100%;
        overflow: auto;
    }
    body {
        padding: 0;
        margin: 0;
    }
    #silverlightControlHost {
        height: 100%;
        text-align:center;
    }
</style>
</head>
<body>
<form id="form1" runat="server" style="height:100%">
<div id="silverlightControlHost">
    <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
        <param name="source" value="ClientBin/CanvasBackground.xap"/>
        <param name="background" value="transparent" />
    </object>
</div>
</form>
</body>
</html> 
```

当我编译并打开页面时，我看到了我所期望的，一个空的海蓝宝石页面。但是，如果我像这样更改 XAML 以使用 ImageBrush 代替 SolidColorBrush，则页面为黑色。该图像显示在设计视图中（可能是因为它具有设计时设置的高度和宽度）但不在页面中。

```
<UserControl x:Class="CanvasBackground.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot">
        <Canvas x:Name="SeedCanvas">
            <Canvas.Background>
                <ImageBrush ImageSource="/images/Autum.jpg" Stretch="Fill"/>
            </Canvas.Background>
        </Canvas>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:50:59.880

关键在于 Silverlight 项目中图像的“构建操作”属性。我将其设置为“资源”并将其更改为“内容”解决了这个问题。

# c# - 从 javascript 获取带有渲染 html 的网页源

> ID：12201791
> 
> 赞同：5
> 
> 时间：2012-08-30T16:51:40.470
> 
> 标签：c#, asp.net, vb.net, html-agility-pack

如果我用这个

```
WebClient client = new WebClient();
String htmlCode = client.DownloadString("http://test.net"); 
```

我可以使用敏捷包扫描 html 并获取我需要的大部分标签，但它缺少由 javascript 呈现的 html。

我的问题是，如何使用 c# 获得最终呈现的页面源。运行 javascript 后，WebClient 是否还有更多内容可以获取最终呈现的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:56:13.313

仅 HTML Agility Pack 不足以满足您的需求，您还需要一个 javascript 引擎。为此，您可能需要查看 Geckofx 之类的东西，它允许您将功能齐全的 Web 浏览器嵌入到您的应用程序中，而不是允许您在页面呈现后以编程方式访问 dom 的内容。

[http://code.google.com/p/geckofx/](http://code.google.com/p/geckofx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:54:02.523

您需要在应用程序中包装浏览器。

你很幸运！WebKit 有一个 .NET 包装器。 [http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T08:54:33.063

您可以使用 System.Windows.Forms 中的 WebBrowser 类。

```
using (WebBrowser wb = new WebBrowser()) 
{
    //Code here
} 
```

[https://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser(v=vs.110).aspx)

# c# - 使用 mvvm-light 消息在非单例视图模型的多个实例之间进行通信？

> ID：12201797
> 
> 赞同：1
> 
> 时间：2012-08-30T16:52:04.333
> 
> 标签：c#, silverlight, mvvm, mvvm-light

我有一个带有相应视图模型的父视图。该父视图包含具有自己的视图模型的子控件。

过去，在这种父子类型关系中，我通常让父视图模型包含对子视图模型的引用，然后子视图模型通过事件与父视图模型进行通信。

在与其他不相关的视图模型通信时，我使用了消息传递。

在我目前正在进行的项目中，我们正处于早期阶段并使用 mvvm-light，并且有人使用消息传递服务创建了类似的父子关系，这意味着我们更加松散耦合，这很棒。但是，我们没有单例视图模型，因此我们可能会有客户 A 的父视图和子视图和视图模型，然后再有客户 B 的其他实例。如果子视图订阅消息 - 该消息将被广播由家长 A，但孩子 A 和 B 都会收到，但我只希望孩子 A 回应。

这种情况的最佳实践是什么？我试图获得一些时间来比较消息传递方法与视图模型引用和事件方法，但由于一种方法主要通过绑定发生，我发现很难弄清楚在哪里放置秒表代码。有谁知道这两种方法之间是否存在很大的性能差异。

我目前的想法是我们应该使用包含对子视图模型的引用的父视图模型并利用事件和绑定进行通信。或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:31:42.817

我遇到了同样的问题，我正在使用事件在新视图和视图模型中解决它。

您还可以使用消息来识别应该接收它的视图或视图模型（一种 id 或类似的 8-)）。

# c# - Code First MVC 4 EF 5 多对多连接

> ID：12201799
> 
> 赞同：0
> 
> 时间：2012-08-30T16:52:11.970
> 
> 标签：c#, .net, linq, entity-framework-5

在过去的几天里，我一直在为此苦苦挣扎，似乎无法弄清楚。我在 MVC 4 和 EF 5 中使用 Code First 方法。我通过 fluent API 设置了多对多关系。这是示例代码：

```
 public class Class
    {
        public Class()
        {
            Teachers = new List<User>();
        }
        /// <summary>
        /// Unique ID in the system
        /// </summary>
        [Key]
        public long Id { get; set; }

        /// <summary>
        /// Array of users (Teachers and Interventionists) associated with that class
        /// </summary>
        public List<User> Teachers { get; set; }
    } 
```

用户等级：

```
public class User
{
    public User()
    {

    }
    /// <summary>
    ///     Unique Id in the system 
    ///</summary> 
    [Key]
    public long Id { get; set; }

    public List<Class> Classes { get; set; }
} 
```

流畅的 API 在这里：

```
 modelBuilder.Entity<Class>().HasMany(m => m.Teachers).WithMany(t => t.Classes).Map(m =>
            {
                m.ToTable("ClassTeachers");
                m.MapLeftKey("ClassId");
                m.MapRightKey("UserId");
            }); 
```

这是怎么回事：

EF 正在创建 ClassTeachers 表，当我选择所有类时，我会按预期接收数据。这些类在返回的数据中具有正确的教师。

我需要帮助：

我正在尝试返回所有具有特定老师的课程。我正在尝试这样的事情：

```
 var classesTeachers =
        from classes in data.Classes from u in data.Users
        where u.Id == mockUser.Id
        select new { classes.Id, classes.Label, u.FirstName }; 
```

但是，我没有取回正确的数据。通常，我可以加入第三个表以获取所需的结果，但是，这不适用于 EF Code First 方法。我真的很茫然...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:09:07.630

Try this:

```
var classesTeachers = from c in data.Classes
                      where c.Teachers.Any(t => t.Id == mockUser.Id)
                      select c; 
```

# html - 谷歌地图透明

> ID：12201801
> 
> 赞同：0
> 
> 时间：2012-08-30T16:52:20.760
> 
> 标签：html, google-maps, google-maps-api-3, maps

我之前已经使用过地图皮肤。在一个新项目中，我想将地图透明地显示在图片的顶部（仅保留国家+地区线。）

您可以在随附的示例中看到它。

# jpa - JPA 2.0 按业务键检索实体

> ID：12201808
> 
> 赞同：1
> 
> 时间：2012-08-30T16:53:05.307
> 
> 标签：jpa

我知道有很多关于此的*类似*帖子，但我找不到我的问题的明确答案。

为了使其尽可能简单，假设我有这样一个实体：

```
@Entity
public class Person implements Serializable {
  @Id
  private Long id;     // PK

  private String name; // business key

  /* getters and setters */

  /* 
     override equals() and hashCode() 
     to use the **name** field 
   */
} 
```

所以，`id`是PK，`name`是业务关键。假设我得到一个名字列表，可能有重复，我想存储。如果我只是为每个名称创建一个对象，并让 JPA 使其持久化，那么我的最终表格将包含重复的名称 - 不可接受。

我的问题是您认为最好的方法是什么，考虑到我在下面描述的替代方案和（特别欢迎）您自己的替代方案。

## 可能的解决方案1：检查实体管理器

在创建新的人员对象之前，请检查是否已管理具有相同人员名称的对象。 **问题：**实体管理器只能通过PK查询。有什么我不知道的解决方法吗？

## 可能的解决方案2：通过查询查找对象

```
Query query = em.createQuery("SELECT p FROM Person p WHERE p.name = ...");
List<Person> list = query.getResultList(); 
```

**问题：**如果请求的对象已经加载到 em 中，这还会从数据库中获取吗？如果是这样，由于解析查询，我想如果非常频繁地执行它仍然不是很有效？

## 可能的解决方案 3：保留单独的字典

这是可能的，因为 equals() 和 hashCode() 被覆盖以使用 field `name`。

```
Map<String,Person> personDict = new HashMap<String,Person>();
for(String n : incomingNames) {
  Person p = personDict.get(n);
  if (p == null) {
    p = new Person();
    p.setName(n);
    em.persist(p);
    personDict.put(n,p);
  }
  // do something with it
} 
```

**问题 1：**为大型集合浪费内存，因为这本质上是实体管理器所做的（虽然不完全是！）

**问题 2：**假设我有一个更复杂的模式，并且在初始编写后，我的应用程序被关闭，再次启动，并且需要重新加载数据库。如果所有表都显式加载到 em 中，那么我可以轻松地重新填充字典（每个实体一个），但如果我使用延迟提取和/或级联读取，那么就不是那么容易了。

我最近开始使用 JPA（我使用 EclipseLink），所以也许我在这里遗漏了一些基本的东西，因为这个问题似乎归结为一种非常常见的使用模式。

请赐教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:20:53.553

确保该字段可以（正确）用作键的唯一方法是在其上创建唯一约束。您可以使用`@UniqueConstraint(columnNames="name")`或使用`@Column(unique = true)`.

在尝试插入重复键时，EntityManager（实际上是 DB）将引发异常。这种情况也适用于手动设置的主键。

防止异常的唯一方法是对键进行选择并检查它是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:04:15.133

我能想到的最佳解决方案非常简单，使用[唯一约束](http://docs.oracle.com/javaee/5/api/javax/persistence/UniqueConstraint.html)

```
@Entity
@UniqueConstraint(columnNames="name")
public class Person implements Serializable {
    @Id
    private Long id;     // PK

    private String name; // business key
} 
```

# entity-framework - 在实体中编写 tsql 查询

> ID：12201810
> 
> 赞同：0
> 
> 时间：2012-08-30T16:53:07.483
> 
> 标签：entity-framework

我有一张表，它的数据如下所示：

```
 id         name       date
 ---------  ---------  ----------
 1           a          2012-08-30 10:36:27.393
 1           b          2012-08-30 14:36:27.393
 2           c          2012-08-30 13:36:27.393
 2           d          2012-08-30 16:36:27.393 
```

我使用此查询检索最大日期时间：

```
select 
    t1.id
   ,t1.name
   ,t1.date 
from 
 table1 t1
 inner join (
     SELECT id,Max(date) as mymaxdate
     FROM table1
     group by id
 ) mt1
     on t1.id = mt1.id
     and t1.date = mt1.mymaxdate 
```

结果：

```
1   b  2012-08-30 14:36:27.393
2   d  2012-08-30 16:36:27.393 
```

如何在实体中编写此查询？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:31:16.497

棘手的部分是您还希望项目的名称具有最大日期，否则分组会简单得多。但是可以通过几乎 1:1 的 sql 查询复制：

```
from t in table1
join m in
    (from t in table1
    group t by t.id into g
    select new { g.Key, mymaxdate = g.Max (x => x.date) })
on new { t.id, t.date } equals new { id = m.Key, date = m.mymaxdate }
select t 
```

通过创建匿名类型 (`new {t.id, t.date}`和`new {id = m.Key, date = m.mymaxdate}`) 来完成多个字段的连接，其中属性 (`id`和`date`) 的名称和类型应该匹配。

# python - 子类 Python 列表以验证新项目

> ID：12201811
> 
> 赞同：4
> 
> 时间：2012-08-30T16:53:07.547
> 
> 标签：python, list, subclass

我想要一个 python 列表，它在外部将自身表示为其内部列表项的平均值，但在其他方面表现为列表。`TypeError`如果添加的项目不能转换为浮点数，它应该引发 a 。

我坚持的部分是 raise `TypeError`。应该为通过任何列表方法添加的无效项目引发它，例如`.append`, `.extend`, `+=`, 切片设置等。

**有没有办法拦截添加到列表中的新项目并验证它们？**

我尝试在 中重新验证整个列表`__getattribute__`，但是当它被调用时，我只能访问旧版本的列表，而且它甚至不会被称为初始化、运算符（如`+=`）或切片（如`mylist[0] = 5`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:04:20.977

从[MutableSequence](http://docs.python.org/library/collections.html)继承并实现它所需的方法以及任何其他超出 Sequences 范围的方法，例如[此处的运算符](http://docs.python.org/reference/datamodel.html)。这将允许您更改类似列表功能的运算符操作，同时自动生成迭代器和包含功能。

如果您想检查切片顺便说一句，您需要`isinstance(key, slice)`在您的`__getitem__`(and/or `__setitem__`) 方法中执行。请注意，像 myList[0] 这样的单个索引不是切片请求，而是单个索引，而 myList[:0] 是实际的切片请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:57:05.030

该`array.array`课程将负责以下`float`部分：

```
class AverageList(array.array):
    def __new__(cls, *args, **kw):
        return array.array.__new__(cls, 'd')
    def __init__(self, values=()):
        self.extend(values)
    def __repr__(self):
        if not len(self): return 'Empty'
        return repr(math.fsum(self)/len(self)) 
```

还有一些测试：

```
>>> s = AverageList([1,2])
>>> s
1.5
>>> s.append(9)
>>> s
4.0
>>> s.extend('lol')
Traceback (most recent call last):
  File "<pyshell#117>", line 1, in <module>
    s.extend('lol')
TypeError: a float is required 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:10:42.017

该类有 7 个方法`list`可以将元素添加到列表中，并且必须进行检查。这是一个紧凑的实现：

```
def check_float(x):
    try:
        f = float(x)
    except:
        raise TypeError("Cannot add %s to AverageList" % str(x))

def modify_method(f, which_arg=0, takes_list=False):
    def new_f(*args):
        if takes_list:
            map(check_float, args[which_arg + 1])
        else:
            check_float(args[which_arg + 1])
        return f(*args)
    return new_f

class AverageList(list):
    def __check_float(self, x):
        try:
            f = float(x)
        except:
            raise TypeError("Cannot add %s to AverageList" % str(x))

    append = modify_method(list.append)
    extend = modify_method(list.extend, takes_list=True)
    insert = modify_method(list.insert, 1)
    __add__ = modify_method(list.__add__, takes_list=True)
    __iadd__ = modify_method(list.__iadd__, takes_list=True)
    __setitem__ = modify_method(list.__setitem__, 1)
    __setslice__ = modify_method(list.__setslice__, 2, takes_list=True) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:16:57.370

实际上最好的答案可能是：不要。

在将所有对象添加到列表时对其进行检查将在计算上很昂贵。做这些检查你有什么收获？在我看来，您获得的收益很少，我建议您不要实施它。

Python 不检查类型，因此尝试对一个对象进行一点类型检查确实没有多大意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T17:00:03.003

一般的方法是创建您自己的类继承 vom 列表并覆盖特定方法，如 append、extend 等。这可能还包括 Python 列表的魔术方法（有关详细信息，请参阅本文：[http://www.rafekettler。 com/magicmethods.html#sequence](http://www.rafekettler.com/magicmethods.html#sequence)）。

为了验证，您需要覆盖 __setitem__(self, key, value)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T19:10:35.837

`MutableSequence`以下是如何使用模块中的抽象基类作为其基类来创建子`collections`类（未完全测试——读者练习；-）：

```
import collections

class AveragedSequence(collections.MutableSequence):
    def _validate(self, x):
        try: return float(x)
        except: raise TypeError("Can't add {} to AveragedSequence".format(x))
    def average(self):  return sum(self._list) / len(self._list)
    def __init__(self, arg):  self._list = [self._validate(v) for v in arg]
    def __repr__(self):  return 'AveragedSequence({!r})'.format(self._list)
    def __setitem__(self, i, value):  self._list[i] = self._validate(value)
    def __delitem__(self, i):  del self._list[i]
    def insert(i, value):  return self._list.insert(i, self._validate(value))
    def __getitem__(self, i):  return self._list[i]
    def __len__(self):  return len(self._list)
    def __iter__(self):  return iter(self._list)
    def __contains__(self, item):  return item in self._list

if __name__ == '__main__':
    avgseq = AveragedSequence(range(10))
    print avgseq
    print avgseq.average()
    avgseq[2] = 3
    print avgseq
    print avgseq.average()
    # ..etc 
```

# mongodb-.net-driver - MongoDB - 覆盖 C# 原始类型的默认序列化程序

> ID：12201812
> 
> 赞同：9
> 
> 时间：2012-08-30T16:53:16.783
> 
> 标签：mongodb-.net-driver

我想将 C# Doubles 的表示更改为四舍五入的 Int64，并在 MongoDB 的序列化 C# 驱动程序堆栈中移动四位小数。换句话说，将 (Double)29.99 存储为 (Int64)299900

我希望这对我的应用程序是透明的。我已经查看了自定义序列化程序，但我不想覆盖*所有内容*，然后打开 Type 并回退到默认值，因为这有点混乱。

我可以看到 RegisterSerializer() 不会让我为现有类型添加一个，并且 BsonDefaultSerializationProvider 有一个原始序列化器的静态列表，它被标记为内部的私有成员，所以我不能轻易地继承。

我还可以看到，可以将 RepresentAs Int64 用于 Doubles，但这是转换而不是转换。我基本上需要在两个序列化方向上进行强制转换和转换。

我希望我可以给默认序列化器一个自定义序列化器来覆盖它自己的序列化器，但这意味着一个肮脏的黑客攻击。

我错过了一个非常简单的方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-28T14:54:54.677

你绝对可以做到这一点，你只需要把握好时机。当驱动程序启动时，没有注册序列化程序。当它需要一个序列化器时，它会在字典中查找它，它会跟踪它知道的序列化器（即那些已经注册的序列化器）。只有它无法在字典中找到一个，它才会开始找出从哪里获得一个（包括调用序列化提供程序），如果找到一个，它就会注册它。

RegisterSerializer 存在限制，因此您无法*替换*已使用的现有序列化程序。但这并不意味着*如果*你足够早地注册，你就不能注册自己的。

但是，请记住，注册序列化程序是一项全局操作，因此如果您为 double 注册自定义序列化程序，它将用于*所有*双精度数，这可能会导致意外结果！

无论如何，您可以像这样编写自定义序列化程序：

```
public class CustomDoubleSerializer : BsonBaseSerializer
{
    public override object Deserialize(BsonReader bsonReader, Type nominalType, Type actualType, IBsonSerializationOptions options)
    {
        var rep = bsonReader.ReadInt64();
        return rep / 100.0;
    }

    public override void Serialize(BsonWriter bsonWriter, Type nominalType, object value, IBsonSerializationOptions options)
    {
        var rep = (long)((double)value * 100);
        bsonWriter.WriteInt64(rep);
    }
} 
```

并像这样注册它：

```
BsonSerializer.RegisterSerializer(typeof(double), new CustomDoubleSerializer()); 
```

您可以使用以下类对其进行测试：

```
public class C
{
    public int Id;
    public double X;
} 
```

这个代码：

```
BsonSerializer.RegisterSerializer(typeof(double), new CustomDoubleSerializer());

var c = new C { Id = 1, X = 29.99 };
var json = c.ToJson();
Console.WriteLine(json);

var r = BsonSerializer.Deserialize<C>(json);
Console.WriteLine(r.X); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-28T13:45:04.130

您还可以使用自己的序列化提供程序来告诉 Mongo 为某些类型使用哪个序列化程序，我最终这样做是为了减轻在尝试覆盖现有序列化程序时提到的一些时序问题。这是一个序列化提供程序的示例，它覆盖了如何序列化小数：

```
public class CustomSerializationProvider : IBsonSerializationProvider
{
    public IBsonSerializer GetSerializer(Type type)
    {
        if (type == typeof(decimal)) return new DecimalSerializer(BsonType.Decimal128);

        return null; // falls back to Mongo defaults
    }
} 
```

如果您`null`从自定义序列化提供程序返回，它将回退到使用 Mongo 的默认序列化提供程序。

一旦你写好了你的提供者，你只需要注册它：

```
BsonSerializer.RegisterSerializationProvider(new CustomSerializationProvider()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:12:08.560

我查看了驱动程序代码的最新迭代，并检查是否有某种后门来设置自定义序列化程序。恐怕没有；如果您认为需要在驱动程序的未来迭代中查看该问题（https://jira.mongodb.org/），您应该在项目的错误跟踪器中打开一个问题。

就个人而言，我会开一张票——如果需要或需要快速解决方法，我会将 DoubleSerializer 子类化，实现新行为，然后使用反射将其注入到`MongoDB.Bson.Serialization.Serializers.DoubleSerializer.__instance`or`MongoDB.Bson.Serialization.BsonDefaultSerializationProvider.__serializers`中。

# bash - 使用 lftp 执行动态命令 - 多个命令

> ID：12201813
> 
> 赞同：3
> 
> 时间：2012-08-30T16:53:22.320
> 
> 标签：bash, shell, loops, ftp, lftp

我确信有一种简单的方法可以做到这一点，但我没有找到它。我想要做的是使用lftp执行一系列命令，如果可能的话，我想避免重复连接到服务器。

基本上，我在服务器上有一个文件，其中包含一个完整的 ftp 目录列表。我想连接到服务器，然后执行如下操作：（假设此时我已经使用 cat 将文本文件转换为行数组）

```
for f in "${myarray}"
do
cd $f;
nlist >> $f.txt;
cd ..;
done 
```

当然这不起作用，但我必须想象有一个简单的解决方案来解决我想要完成的事情。

在 shell 脚本方面，我非常缺乏经验。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:19:34.037

首先构建一个包含 lftp 命令列表的字符串。然后调用 lftp，在其标准输入上传递命令。Lftp 本身可以使用类似于 shell 的语法将命令的输出重定向到文件。

```
list_commands=""
for dir in "${myarray[@]}"; do
  list_commands="$list_commands
  cd \"$dir\"
  nlist >\"$dir.txt\"
  cd .."
done

lftp <<EOF
open -u $username,$password $site
$list_commands
bye
EOF 
```

请注意，我假设目录名称不包含反斜杠、单引号或通配符。如有必要，添加适当的转义。

顺便说一句，要从文件中读取行，请参阅[为什么`while IFS= read`经常使用，而不是`IFS=; while read..`？](https://unix.stackexchange.com/questions/18886/why-is-while-ifs-read-used-so-often-instead-of-ifs-while-read/18936#18936). 您可能更喜欢结合从目录列表中读取和构建命令：

```
list_commands=""
while IFS= read -r dir; do
  list_commands="$list_commands
  cd \"$dir\"
  nlist >\"$dir.txt\"
  cd .."
done <directory_list.txt 
```

# c - while(*p){p++;} ,while (*++p){;} 和 while(*p++){;} 有什么区别？

> ID：12201815
> 
> 赞同：1
> 
> 时间：2012-08-30T16:53:22.663
> 
> 标签：c

这是关于`strcat`功能的。

```
while (*p)
    p++; 
```

和

```
while (*++p)
    ; 
```

两者都有效，但是

```
while (*p++)
    ; 
```

不起作用。我认为第一个和第三个应该相同，但事实并非如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T16:56:06.207

假设这`p`是一个字符串。

```
while (*p) p++; /* (1) */
while (*++p) ;  /* (2) */
while (*p++) ;  /* (3) */ 
```

*   **(1)与****(2)**不同，如果`p`是空字符串。
*   **(1)与****(3)**不同，因为使用**(3)**，即使 的当前值`*p`是一个`'\0'`字符，`p`也会递增。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T20:55:14.453

两个都

```
while (*p) p++; 
```

和

```
while (*++p) ; 
```

将前进`p`以指向字符串中的 0 终止符，而

```
while (*p++) ; 
```

将前进`p`到超过 0 终止符的一个字符。

要了解原因，让我们假设内存中有以下字符：

```
Address         0x00 0x01 0x02 0x03
-------         ---- ---- ---- ----
0x8000           'a'  'b'  'c'   0
0x8004           ... 
```

假设`p`从地址 0x8000 开始。这是第一个循环的播放方式：

```
1\.  *p = 'a'
2\.  p = 0x8001
3\.  *p = 'b'
4\.  p = 0x8002
5\.  *p = 'c'
6\.  p = 0x8003
7\.  *p = 0
8\.  end loop 
```

这是第二个循环的播放方式：

```
1\.  p = 0x8001
2\.  *p = 'b'
3\.  p = 0x8002
4\.  *p = 'c'
5\.  p = 0x8003
6\.  *p = 0
7\.  end loop 
```

这是最后一个：

```
1\.  *p = 'a'
2\.  p = 0x8001
3\.  *p = 'b'
4\.  p = 0x8002
5\.  *p = 'c'
6\.  p = 0x8003
7\.  *p = 0;
8\.  p = 0x8004
9\.  end loop 
```

在上一个版本中，`*p++`即使 的值为`*p`0，求值也会使指针前进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T17:07:40.307

```
// move p forward as long as it points to a non-0 character,
// leave it pointing to a 0 character.
while (*p) p++;  

// move p forward until it points to a 0 character, skipping the first 
// character before you start
while (*++p);

// move p forward until it points one past a 0 character
while (*p++); 
```

因此，鉴于（1）“有效”：（2）如果`p`最初指向非空字符串也有效。(3) 根本不起作用，因为`p`最终指向不同的地方。

`*++p`递增`p`，然后评估`p`现在指向的任何内容。`*p++`评估`p`最初指向的任何内容，但也会增加`p`. 因此（2）和（3）是不同的。

(1) 和 (3) 不同，因为 (3) 执行`p++`，然后它决定是否停止。(1) 先看`*p`决定是否停止，不停止则执行`p++`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T16:59:10.917

*++p 表示递增该变量，然后使用它
*p++ 表示使用该变量，然后递增它

# javascript - 功能提前触发

> ID：12201816
> 
> 赞同：1
> 
> 时间：2012-08-30T16:53:27.507
> 
> 标签：javascript, jquery, html, jquery-ui

我试图从函数中回调一个值，但是，回调始终是未定义的，因为 jQuery Date Picker 永远没有机会设置 var sdate，因此提醒我它是未定义的。我真的需要你的帮助，似乎无法解决这个问题。

```
var sdate
function test() {

    select_date()
    alert(sdate)

    }

  function select_date() {

    $('#dd').dialog({
        autoOpen: true,
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        title: "title",
        height: 265,
        width: 235,
        draggable: false,
        resizable: false

    }); //end of dialog

    var x
    $('#d1').datepicker({
        onSelect: function() {
            sdate = $(this).val();
            $("#dd").dialog("close");
        }
    });
    return sdate

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:58:47.340

这对你有什么好处？

```
$('#d1').datepicker({
        onSelect: function() {
           sdate = $(this).val(); 
          //set value to the global variable (although not the best approach)
            $("#dd").dialog("close");
        }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:00:00.320

你根本没有设置`sdate`。我想也许你打算这样做`sdate = select_date();`？

# python - Portable Python PyScripter Interpreter 中不可见的提交代码

> ID：12201819
> 
> 赞同：0
> 
> 时间：2012-08-30T16:53:30.243
> 
> 标签：python

我已经安装了 Portable Python，包括 Portable PyScripter。当我在编辑器中选择一些代码并提交时（使用*菜单运行 -> 运行*或*右键单击 -> 源代码 -> 执行选择*），代码在 Python 解释器中很好地提交，但它是不可见的。但是，当我直接在解释器中键入一些代码时，文本的颜色会很好。此外，我在编辑器选项和解释器选项中都找不到任何可能是原因的选项。

由于我对我的英语有点怀疑，我希望我的问题通过下面的截图更清楚：![截图 pyscripter](../Images/19824706e82d4de0bb4fe11a2965662a.png)

我已经`print("hello")`在编辑器中选择了代码并将其提交给解释器。如您所见，该代码未出现在解释器中，但已受到好评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:31:15.563

如果您希望执行的代码出现在解释器窗口中，您可以将代码复制到剪贴板，然后在解释器窗口中右键单击并选择粘贴并执行。

# c# - 使用 C# 读取肥皂消息

> ID：12201822
> 
> 赞同：12
> 
> 时间：2012-08-30T16:53:37.063
> 
> 标签：c#, xml, soap

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Head>
    <h:talkId s:mustknow="1" xmlns:h="urn:schemas-test:testgate:hotel:2012-06">
      sfasfasfasfsfsf</h:talkId>
    </s:Head>
  <s:Body>
    <bookHotelResponse xmlns="urn:schemas-test:testgate:hotel:2012-06" xmlns:d="http://someURL" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <d:bookingReference>123456</d:bookingReference>
      <d:bookingStatus>successful</d:bookingStatus>
      <d:price xmlns:p="moreURL">
        <d:total>105</d:total>
      </d:price>
    </bookHotelResponse>
  </s:Body>
</s:Envelope> 
```

我正在尝试`XmlDocument`使用 C# 阅读上述肥皂消息：

```
XmlDocument document = new XmlDocument();
document.LoadXml(soapmessage);  //loading soap message as string
XmlNamespaceManager manager = new XmlNamespaceManager(document.NameTable);

manager.AddNamespace("d", "http://someURL");

XmlNodeList xnList = document.SelectNodes("//bookHotelResponse", manager);
int nodes = xnList.Count;

foreach (XmlNode xn in xnList)
{
    Status = xn["d:bookingStatus"].InnerText;
} 
```

计数始终为零，并且不读取 bookingstatus 值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T17:08:47.697

`BookHotelResponse`位于命名空间`urn:schemas-test:testgate:hotel:2012-06`（示例 xml 中的默认命名空间）中，因此您需要在查询中提供该命名空间：

```
XmlDocument document = new XmlDocument(); 
document.LoadXml(soapmessage);  //loading soap message as string 
XmlNamespaceManager manager = new XmlNamespaceManager(document.NameTable); 

manager.AddNamespace("d", "http://someURL"); 
manager.AddNamespace("bhr", "urn:schemas-test:testgate:hotel:2012-06"); 

XmlNodeList xnList = document.SelectNodes("//bhr:bookHotelResponse", manager); 
int nodes = xnList.Count; 

foreach (XmlNode xn in xnList) 
{ 
    Status = xn["d:bookingStatus"].InnerText; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:03:57.080

利用`LINQ2XML`

要阅读 bookingStatus，请执行此操作

```
XElement doc = XElement.Load("yourStream.xml");
XNamespace s = "http://schemas.xmlsoap.org/soap/envelope/";//Envelop namespace s
XNamespace bhr="urn:schemas-test:testgate:hotel:2012-06";//bookHotelResponse namespace
XNamespace d="http://someURL";//d namespace

foreach (var itm in doc.Descendants(s + "Body").Descendants(bhr+"bookHotelResponse"))
{
itm.Element(d+"bookingStatus").Value;//your bookingStatus value
} 
```

LINQ2XML 虽然**很酷**.... :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-01T16:56:29.307

首先，您要创建一个类以将 xml 值反序列化为

```
 public class bookHotelResponse {
      public int bookingReference { get; set; }
      public int bookingStatus { get; set; }
   } 
```

然后，您可以利用`GetElementsByTagName`提取肥皂请求的主体并将请求字符串反序列化为对象。

```
 private static T DeserializeInnerSoapObject<T>(string soapResponse)
    {
        XmlDocument xmlDocument = new XmlDocument();
        xmlDocument.LoadXml(soapResponse);

        var soapBody = xmlDocument.GetElementsByTagName("soap:Body")[0];
        string innerObject = soapBody.InnerXml;

        XmlSerializer deserializer = new XmlSerializer(typeof(T));

        using (StringReader reader = new StringReader(innerObject))
        {
            return (T)deserializer.Deserialize(reader);
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-26T07:45:11.530

据我了解，您希望得到肥皂服务的回复。如果是这样，您不必自己完成所有这些艰苦的工作（拨打电话、解析 xml、选择节点以获取响应值）......相反，您需要将服务引用添加到您的项目中，它将完成所有为您休息工作，包括生成类、进行 asmx 调用等...在此处阅读更多相关信息[https://msdn.microsoft.com/en-us/library/bb628649.aspx](https://msdn.microsoft.com/en-us/library/bb628649.aspx)

添加引用后，您需要做的就是调用类似这样的类方法

```
var latestRates = (new GateSoapClient())?.ExchangeRatesLatest();
return latestRates?.Rates; 
```

# php - Magento：在注册时选择客户组

> ID：12201824
> 
> 赞同：6
> 
> 时间：2012-08-30T16:53:50.167
> 
> 标签：php, magento, controller

尝试在**Magento Pro v1.11中添加****group_id**单选按钮

 **跟随
[http://phpmagento.blogspot.com/2012/01/how-to-show-customer-group-selecter-in.html](http://phpmagento.blogspot.com/2012/01/how-to-show-customer-group-selecter-in.html)和
[http://developersindia.info/magento/magento-override-frontend-controller .html](http://developersindia.info/magento/magento-override-frontend-controller.html)，
它工作到一定程度，但 group_id 没有被写入数据库。

我的模块，到目前为止：

目录结构

```
app/code/local
- WACI
-- Customer
--- controllers
---- AccountController.php
--- etc
---- config.xml 
```

**配置文件**

```
<config>
    <modules>
        <WACI_Customer>
            <version>0.1.0</version>
        </WACI_Customer>
    </modules>
    <global>
        <fieldsets>
            <customer_account>
                <group_id><create>1</create></group_id>
            </customer_account>
        </fieldsets>
    </global>
    <frontend>
        <routers>
            <customer>
                <args>
                    <modules>
                        <WACI_Customer before="Mage_Customer_AccountController">
                            WACI_Customer
                        </WACI_Customer>
                    </modules>
                </args>
            </customer>
        </routers>
    </frontend>
</config> 
```

**AccountController.php**

```
<?php
/**
 *Customer account controller
 *
 * @package     WACI_Customer
 */

require_once Mage::getModuleDir('controllers', 'Mage_Customer').DS.'AccountController.php';

class WACI_Customer_AccountController extends Mage_Customer_AccountController
{

    /**
    * Create customer account action
    */
    public function createPostAction()
    {

// contents of createPostAction(), with some extra logic

            /**
             * Initialize customer group id
             */

            /* catch groupid at account creation */

            if($this->getRequest()->getPost('group_id')){ 
                $customer->setGroupId($this->getRequest()->getPost('group_id'));
            } else {
                $customer->getGroupId(); 
            } 

 // rest of method

    }

} 
```

**主题../persistent/customer/form/register.phtml**

```
<div class="input-box">
    <label for="group_id"><?php echo $this->__('Select your customer group') ?></label><br />
    <?php 
        $groups = Mage::helper('customer')->getGroups()->toOptionArray();
        foreach ($groups as $group){
            echo '<input type="radio" name="group_id" value="'.$group['value'].'" class="validate-radio" >'.$group['label'].'</input><br/>';
        }
    ?>
</div> 
```

因此，带有组的单选按钮在注册时显示良好，但数据并未写入数据库，因为组在`admin/manage customers`

*   正如文章所述，我真的不想修改核心文件，
*   我不确定我是否正确地覆盖了法师 `accountController`类（也许有更好的方法来做到这一点？）

**我在搞什么鬼？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:00:19.817

请参阅下面的 URL，我认为这对您很有帮助。

**如何让客户在注册时选择客户组**

[http://www.magentocommerce.com/boards/viewthread/24208/](http://www.magentocommerce.com/boards/viewthread/24208/)

**在magento注册期间选择客户组**

[http://sabujcse.wordpress.com/2010/03/09/selecting-customer-group-during-registration-in-magento/](http://sabujcse.wordpress.com/2010/03/09/selecting-customer-group-during-registration-in-magento/)

**如何在magento中注册时添加客户组字段**

[http://xhtmlandcsshelp.blogspot.in/2010/12/add-customer-group-while-register-in.html](http://xhtmlandcsshelp.blogspot.in/2010/12/add-customer-group-while-register-in.html)

**如何在注册表中添加组**

[http://sapnandu-magento.blogspot.in/2011/07/how-to-add-group-in-register-form.html](http://sapnandu-magento.blogspot.in/2011/07/how-to-add-group-in-register-form.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:04:32.423

检查您的 config.xml：

```
<frontend>
    <routers>
        <customer>
            <args>
                <modules>
                    <WACI_Customer before="Mage_Customer_AccountController">
                        WACI_Customer
                    </WACI_Customer>
                </modules>
            </args>
        </customer>
    </routers>
</frontend> 
```

应该：

```
<frontend>
    <routers>
        <customer>
            <args>
                <modules>
                    <WACI_Customer before="Mage_Customer">WACI_Customer</WACI_Customer>
                </modules>
            </args>
        </customer>
    </routers>
</frontend> 
```

您还需要注意：

```
<WACI_Customer before="Mage_Customer">WACI_Customer</WACI_Customer> 
```

和

```
<WACI_Customer before="Mage_Customer">
    WACI_Customer
</WACI_Customer> 
```

您必须确保 and 和 and 之间`<tag>`没有`content`空格`</tag>`**

# javascript - 地理位置和计算从当前纬度/经度到另一个纬度/经度的距离

> ID：12201826
> 
> 赞同：1
> 
> 时间：2012-08-30T16:53:53.917
> 
> 标签：javascript, ajax, cordova, asynchronous, geolocation

这个函数是异步的，在这种情况下这是我的大部分问题。

我想获取我所在位置的当前经度和纬度，然后我可以在`distanceFromCurrent`函数中使用它们来计算我当前位置和给`georss`定点之间的距离。

除了我不能在它的异步函数之外 使用`currLat`和之外，一切都很好。`currLong`

```
function getCurrentPosition(){
    navigator.geolocation.getCurrentPosition(getCoords, getError);
}

function getCoords(position){
    var currLat = position.coords.latitude;
    var currLon = position.coords.longitude;
}

function getError(error) {
    alert("Error");
}

// convert degrees to radians
Number.prototype.toRad = function() 
{ 
    return this * Math.PI / 180;
} 
```

这是计算与当前纬度和经度的距离的函数，`georss`它可以像现在一样使用设置的纬度/经度。

```
function distanceFromCurrent(georss) 
{  
    getCurrentPosition();
    var currLat = 3.0;
    var currLon = 4.0;

    georss = jQuery.trim(georss);
    var pointLatLon = georss.split(" ");
    var pointLat = parseFloat(pointLatLon[0]);
    var pointLon = parseFloat(pointLatLon[1]);

    var R = 6371;                   //Radius of the earth in Km             
    var dLat = (pointLat - currLat).toRad();    //delta (difference between) latitude in radians
    var dLon = (pointLon - currLon).toRad();    //delta (difference between) longitude in radians

    currLat = currLat.toRad();          //conversion to radians
    pointLat = pointLat.toRad();

    var a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(currLat) * Math.cos(pointLat);
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));   //must use atan2 as simple arctan cannot differentiate 1/1 and -1/-1
    var distance = R * c;   //sets the distance

    distance = Math.round(distance*10)/10;      //rounds number to closest 0.1 km
    return distance;    //returns the distance
} 
```

那么，有没有人有想法/解决方案来以不同的方式获得纬度/经度，或者我是否完全错误地解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:04:22.440

如果下面的调用没有阻塞，那么这根本不起作用。

```
navigator.geolocation.getCurrentPosition(getCoords, getError); 
```

您调用此方法的方式意味着 getCurrentPosition() 的结果在您到达 distanceFromCurrent() 方法的末尾之前不会完成。

相反，您可以执行以下操作并调用 update() 而不是 distanceFromCurrent()。这最终将使用当前的 lat/lng 值调用您的 distanceFromCurrent() 方法。

注意：以下是伪代码，我怀疑它是否会正确传递您的 georss 值。

```
update()
{
 getCurrentPosition();
}
function getCurrentPosition(){
 navigator.geolocation.getCurrentPosition(getCoords, getError);
}

function getCoords(position){
 var currLat = position.coords.latitude;
 var currLon = position.coords.longitude;
 distanceFromCurrent(georss, lat, lng);
}

function distanceFromCurrent(georss, lat, lng) 
{  
    // Remove -> getCurrentPosition();
    var currLat = lat;
    var currLon = lng;

    georss = jQuery.trim(georss);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:01:11.567

在你的 distanceFromCurrent 函数中添加参数，并在你的回调中调用它，其中 georss 是一个全局变量：

```
var georss = "43.12 7.12";

function getCoords(position){
    var currLat = position.coords.latitude;
    var currLon = position.coords.longitude;
    var distance = distanceFromCurrent(lat, lon, georss);
} 
```

和

```
function distanceFromCurrent(georss, currLat, currLon){  
    // getCurrentPosition();
    // var currLat = 3.0;
    // var currLon = 4.0;
    georss = jQuery.trim(georss);
    var pointLatLon = georss.split(" ");
//.... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T17:03:43.390

getCorrentPosition 是异步的。您需要发送一个指针作为第一个参数，该指针指向将处理数据的函数。例子

```
navigator.geolocation.getCurrentPosition(function(position) {
  var latitude = position.coords.latitude
  var longitude =  position.coords.longitude;
  distanceFromCurrent(currLatitude, currLongitude, latitude, longitude);
}); 
```

这应该是您开始的好方法。

问题是你试图以错误的方式解决你的问题。您应该调用 getCurrentPosition 并处理其中所有返回的数据。也许这样的事情（对你的功能进行一些更改）可以解决问题。

请记住，javascript 从不休眠（没有休眠），因此“现在”无法完成的所有事情都需要推迟。这就是这种方法所发生的事情。您需要考虑向函数发送回调而不是返回。因为我没有你所有的代码，所以我不知道如何转换它。但基本上你需要：

```
function distanceFromCurrent(georss, callback) 
{ //... 
```

您可以在这里查看完整信息： [https ://developer.mozilla.org/en-US/docs/Using_geolocation](https://developer.mozilla.org/en-US/docs/Using_geolocation)

# android - 将字符串转换为 TextView

> ID：12201834
> 
> 赞同：2
> 
> 时间：2012-08-30T16:54:39.227
> 
> 标签：android, string, textview

```
String data="tv"; 
```

同样在我的 xml 文件中，我有一个名为 tv1 的 TextView。我已经在 Activity 中投射了 textView。

```
TextView tv1 = (TextView) findViewById(R.id.tv1); 
```

> **我想将字符串转换为 TextView ...**

这样我就可以对字符串执行此操作，而不是在 tv1 上执行此操作。

```
data.setText("abc"); // on the string.. 
```

我能做到这一点吗..还有如何动态地将 id 分配给 textView。谢谢...

这是我的活动代码：

```
public class Winnings extends Activity {

TextView tv1, tv2, tv3, tv4, tv5, tv6, tv7, tv8, tv9, tv10, tv11, tv12,
        tv13, tv14, tv15;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.winnings);
    setupVariables();

    // TODO Auto-generated method stub
    backGroundToChange(7);
}

private void setupVariables() {
    // TODO Auto-generated method stub
    tv1 = (TextView) findViewById(R.id.TextView01);
    tv2 = (TextView) findViewById(R.id.TextView02);
    tv3 = (TextView) findViewById(R.id.TextView03);
    tv4 = (TextView) findViewById(R.id.TextView04);
    tv5 = (TextView) findViewById(R.id.TextView05);

    tv6 = (TextView) findViewById(R.id.TextView06);
    tv7 = (TextView) findViewById(R.id.TextView07);
    tv8 = (TextView) findViewById(R.id.TextView08);
    tv9 = (TextView) findViewById(R.id.TextView09);
    tv10 = (TextView) findViewById(R.id.TextView10);

    tv11 = (TextView) findViewById(R.id.TextView11);
    tv12 = (TextView) findViewById(R.id.TextView12);
    tv13 = (TextView) findViewById(R.id.TextView13);
    tv14 = (TextView) findViewById(R.id.TextView14);
    tv15 = (TextView) findViewById(R.id.TextView15);
}

void backGroundToChange(int position) {

//What i want to do is this..

String data = "tv" + position;

//The casting of string into a TextView and so that I can perform this...

data.setBackgroundResource(R.drawable.option_correct);

// so by this way i don't need the switch and case that was actually used, shown below.....

//We normally implement it this way

    /*
        switch (position) {
    case 1:
        tv1.setBackgroundResource(R.drawable.option_correct);
        break;
    case 2:
        tv2.setBackgroundResource(R.drawable.option_correct);
        break;
    case 3:
        tv3.setBackgroundResource(R.drawable.option_correct);
        break;
    case 4:
        tv4.setBackgroundResource(R.drawable.option_correct);
        break;
    case 5:
        tv5.setBackgroundResource(R.drawable.option_correct);
        break;
    case 6:
        tv6.setBackgroundResource(R.drawable.option_correct);
        break;
    case 7:
        tv7.setBackgroundResource(R.drawable.option_correct);
        break;
    case 8:
        tv8.setBackgroundResource(R.drawable.option_correct);
        break;
    case 9:
        tv9.setBackgroundResource(R.drawable.option_correct);
        break;
    case 10:
        tv10.setBackgroundResource(R.drawable.option_correct);
        break;
    case 11:
        tv11.setBackgroundResource(R.drawable.option_correct);
        break;
    case 12:
        tv12.setBackgroundResource(R.drawable.option_correct);
        break;
    case 13:
        tv13.setBackgroundResource(R.drawable.option_correct);
        break;
    case 14:
        tv14.setBackgroundResource(R.drawable.option_correct);
        break;
    case 15:
        tv15.setBackgroundResource(R.drawable.option_correct);
        break;

    default:
        break;
    }
                   */

} 
```

xml代码....

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/TextView15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="5 Crore"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#D4A017"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="1 Crore"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="50 Lakhs"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView12"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="25 Lakhs"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="12,50,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="6,40,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#D4A017"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView09"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="3,20,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView08"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="1,60,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView07"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="80,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView06"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="40,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView05"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="20,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#D4A017"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView04"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="10,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="5,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="2,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_bar"
            android:gravity="center"
            android:text="1,000"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff"
            android:textStyle="bold" />

    </LinearLayout>

</ScrollView> 
```

使用的图像...

![选项栏](../Images/1bd7bef9c94faf2392a59e218edf4fa3.png)

![选项正确](../Images/2d4fa9f504de30ae33f5637e90b710a6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:01:01.023

*您不能将 a “强制转换”`String`为 a `TextView`，因此我假设您真正要问的是如何`View`根据其名称（而不是其整数 ID）找到 a 。IOW，你有一个`String`包含你的命名标识符的`TextView`.*

通常你需要使用 Java 反射来做这样的事情，但 Android 通过使用[`getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29). 此方法接受一个字符串并返回一个资源 ID (int)，允许您按名称使用资源。尝试这样的事情：

```
private void backGroundToChange(int position) {
    String resourceName = "TextView" + position;
    int resourceID = getResources().getIdentifier(resourceName, "id",
            getPackageName());
    if (resourceID != 0) {
        TextView tv = (TextView) findViewById(resourceID);
        if (tv != null) {
            // Take action on TextView tv here...
            tv.setBackgroundResource(R.drawable.option_correct);
        }
    }
} 
```

第 3 行中的“id”表示您正在查看`R.id.*`常量的名称。您可以使用相同的技术按名称（例如，`Drawable`s）查找其他类型的资源。在这种情况下，您可以将“id”替换为“drawable”并提供其中一个`R.drawable.*`资源的名称。

* * *

最后，请注意 Android 文档中的警告：

> **注意：不鼓励使用此功能。**按标识符检索资源比按名称检索资源效率更高。

上面的代码根本不是很有效，因为你同时调用**了** `getIdentifier()`and `findViewById()`，它们都不是相对便宜的操作。请参阅[我的后续答案](https://stackoverflow.com/a/12202070/1282574)以获得更好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:12:23.787

*我留下我的第一个答案，因为它仍然回答了原始问题，但我认为这不是解决问题的最佳方法，因为你已经改写了它。*

根据您更新的问题，您真正应该做的是将您`TextView`的 s 放入一个数组或`Collection`某种数组中，以便您以后可以按位置访问它们。Even`findViewById()`是一项相对昂贵的操作，因此您应该尽量减少对它的使用。考虑这样的事情：

```
List<TextView> tv = new ArrayList<TextView>();
tv.add((TextView) findViewById(R.id.TextView01));
tv.add((TextView) findViewById(R.id.TextView02));
tv.add((TextView) findViewById(R.id.TextView03));

// This will get TextView02
// Remember Collections are indexed from zero
tv.get(1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T17:06:31.213

为什么你想将一个 TextView 分配给一个字符串？转换的全部目的是为了您自己的方便，您可以利用多态性（即，将父 [View] 转换为子 [TextView、Button 等]），因此您不必编写`findTextViewById()`,`findButtonById()`等。

在 String 上运行 .setData() 是没有意义的，但如果你真的想要，你可以继承 String，添加该方法，并在其中更新 String 的内部值。

而且，在您的 XML 中，您可以说：

```
<TextView id="@+id/new_id" /> 
```

这将在运行时为其生成一个 id。

**编辑：**由于您只是在更新 TextView 的背景，而 TextView 只是一个整数，您可以这样做：

```
public void updateBg( TextView aView )
{
    aView.setBackgroundResource( R.drawable.option_correct );
}

// usage, assuming tv1 is already pointing to a TextView
upodateBg( tv1 ); 
```

**编辑2：**

```
private ArrayList<TextView> views = new ArrayList<TextView>();

//populate
views.add( (TextView)findViewById(R.id.whatever) );

//
public void updateView( int index )
{
  (TextView)views.get(index).setBackgroundResource();
}

//usage
updateView( 7 ); 
```

**编辑 3：**或者，您可以只存储 id：

```
private static final int[] tvIds = { R.id.tv1, ... };

public void updateBg( int index )
{
  ((TextView)findViewById( tvIds[index] )).setBackground(...);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T16:10:06.533

也许这种方法可以为你工作。这是以编程方式在 TextView 中表示字符串文本的方式

```
 mTextViewOutput.append(outputString); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-29T19:20:09.153

TextView 类中有一个 setText() 方法。您需要做的就是这样称呼它：

```
mMyTextViewObject.setText("some text"); 
```

# html - 在 twitter bootstrap 的水平表单中内联表单？

> ID：12201835
> 
> 赞同：201
> 
> 时间：2012-08-30T16:54:52.927
> 
> 标签：html, forms, twitter-bootstrap

在没有任何自制类的 twitter bootstrap 中设计一个看起来像这样的表单（请参见下面的链接）的最佳方法是什么？

是否可以在表单水平内设置内部表单内联，如下例所示：

![UI目标截图](../Images/7714041c8c5e292a8085633caae2e709.png)

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-08-31T09:06:58.827

不要嵌套`<form>`标签，那是行不通的。只需使用 Bootstrap 类。

### 引导程序 3

```
<form class="form-horizontal" role="form">
    <div class="form-group">
      <label for="inputType" class="col-md-2 control-label">Type</label>
      <div class="col-md-3">
          <input type="text" class="form-control" id="inputType" placeholder="Type">
      </div>
    </div>
    <div class="form-group">
        <span class="col-md-2 control-label">Metadata</span>
        <div class="col-md-6">
            <div class="form-group row">
                <label for="inputKey" class="col-md-1 control-label">Key</label>
                <div class="col-md-2">
                    <input type="text" class="form-control" id="inputKey" placeholder="Key">
                </div>
                <label for="inputValue" class="col-md-1 control-label">Value</label>
                <div class="col-md-2">
                    <input type="text" class="form-control" id="inputValue" placeholder="Value">
                </div>
            </div>
        </div>
    </div>
</form> 
```

您可以通过多种方式实现该行为，这只是一个示例。在这个[bootply上测试它](http://www.bootply.com/127431)

### 引导程序 2

```
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="inputType">Type</label>
        <div class="controls">
            <input type="text" id="inputType" placeholder="Type">
        </div>
    </div>
    <div class="control-group">
        <span class="control-label">Metadata</span>
        <div class="controls form-inline">
            <label for="inputKey">Key</label>
            <input type="text" class="input-small" placeholder="Key" id="inputKey">
            <label for="inputValue">Value</label>
            <input type="password" class="input-small" placeholder="Value" id="inputValue">
        </div>
    </div>
</form> 
```

请注意，我`.form-inline`用于在`.controls`.
你可以在[这个](http://jsfiddle.net/simbirsk/nbwNf/)jsfiddle上测试它

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2014-04-07T00:04:52.757

对于上面的 bootstrap 3 示例有效，但过于复杂，而不是使用 form-group 对要内联的字段使用 form-inline。

例如：

```
<div class="form-group">
     <label>CVV</label>
     <input type="text" size="4" class="form-control" />
</div>

<div class="form-inline">
      <label>Expiration (MM/YYYY)</label><br>
      <input type="text" size="2" class="form-control" /> / <input type="text" size="4" class="form-control" />
</div> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-29T17:07:34.190

这使用带有一个 css 类的 twitter bootstrap 3.x 来获取位于输入之上的标签。这是一个[小提琴链接](http://jsfiddle.net/Batteryacid/qzLqy0k1/)，确保将结果面板扩展到足够宽以查看效果。

HTML：

```
 <div class="row myform">
     <div class="col-md-12">
        <form name="myform" role="form" novalidate>
           <div class="form-group">
              <label class="control-label" for="fullName">Address Line</label>
              <input required type="text" name="addr" id="addr" class="form-control" placeholder="Address"/>
           </div>

           <div class="form-inline">
              <div class="form-group">
                 <label>State</label>
                 <input required type="text" name="state" id="state" class="form-control" placeholder="State"/>
              </div>

              <div class="form-group">
                 <label>ZIP</label>
                 <input required type="text" name="zip" id="zip" class="form-control" placeholder="Zip"/>
              </div>
           </div>

           <div class="form-group">
              <label class="control-label" for="country">Country</label>
              <input required type="text" name="country" id="country" class="form-control" placeholder="country"/>
           </div>
        </form>
     </div>
  </div> 
```

CSS：

```
.myform input.form-control {
   display: block;  /* allows labels to sit on input when inline */
   margin-bottom: 15px; /* gives padding to bottom of inline inputs */
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-28T16:00:40.780

由于 bootstrap 4 将 div class="form-row" 与 div class="form-group col-X" 结合使用。X 是您需要的宽度。你会得到很好的内联列。见[小提琴](http://jsfiddle.net/wh3q9j4m/)。

```
<form class="form-horizontal" name="FORMNAME" method="post" action="ACTION" enctype="multipart/form-data">
    <div class="form-group">
        <label class="control-label col-sm-2" for="naam">Naam:&nbsp;*</label>
        <div class="col-sm-10">
            <input type="text" require class="form-control" id="naam" name="Naam" placeholder="Uw naam" value="{--NAAM--}" >
            <div id="naamx" class="form-error form-hidden">Wat is uw naam?</div>
        </div>
    </div>

    <div class="form-row">

        <div class="form-group col-5">
            <label class="control-label col-sm-4" for="telefoon">Telefoon:&nbsp;*</label>
            <div class="col-sm-12">
                <input type="tel" require class="form-control" id="telefoon" name="Telefoon" placeholder="Telefoon nummer" value="{--TELEFOON--}" >
                <div id="telefoonx" class="form-error form-hidden">Wat is uw telefoonnummer?</div>
            </div>
        </div>

        <div class="form-group col-5">
            <label class="control-label col-sm-4" for="email">E-mail: </label>
            <div class="col-sm-12">
                <input type="email" require class="form-control" id="email" name="E-mail" placeholder="E-mail adres" value="{--E-MAIL--}" >
                <div id="emailx" class="form-error form-hidden">Wat is uw e-mail adres?</div>
                    </div>
                </div>

        </div>

    <div class="form-group">
        <label class="control-label col-sm-2" for="titel">Titel:&nbsp;*</label>
        <div class="col-sm-10">
            <input type="text" require class="form-control" id="titel" name="Titel" placeholder="Titel van uw vraag of aanbod" value="{--TITEL--}" >
            <div id="titelx" class="form-error form-hidden">Wat is de titel van uw vraag of aanbod?</div>
        </div>
    </div>
<from> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-29T07:02:29.557

为简单起见，只需`class="form-inline"`在输入之前添加一个。

**例子：**

```
<div class="col-md-4 form-inline"> //add the class here...
     <label>Lot Size:</label>
     <input type="text" value="" name="" class="form-control" >
 </div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-27T13:41:33.747

我知道这是一个旧答案，但这是我通常做的：

CSS：

```
.form-control-inline {
   width: auto;
   float:left;
   margin-right: 5px;
} 
```

然后将要内联的字段包装在 div 中，并将 .form-control-inline 添加到输入中，例如：

HTML

```
<label class="control-label">Date of birth:</label>
<div>
<select class="form-control form-control-inline" name="year"> ... </select>
<select class="form-control form-control-inline" name="month"> ... </select>
<select class="form-control form-control-inline" name="day"> ... </select>
</div> 
```

# css - 从控制器设置身体的背景图像

> ID：12201837
> 
> 赞同：1
> 
> 时间：2012-08-30T16:54:57.883
> 
> 标签：css, ruby-on-rails-3.1, views

我需要帮助。我想从控制器更新 CSS 下面的图像 URL。我也可以使用 LESS 和 SCSS。有办法吗？

```
.background{
    height: 100%;
    width: 100%;
    background: asset-url('ad-rose.jpg', image) no-repeat 0px 40px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:08:25.470

这可能会有所帮助[http://bonamin.org/blog/2012/03/08/dynamic-css-image-background-in-rails/](http://bonamin.org/blog/2012/03/08/dynamic-css-image-background-in-rails/)

# jquery - jquery插件中的奇怪错误或其他东西

> ID：12201839
> 
> 赞同：1
> 
> 时间：2012-08-30T16:55:03.293
> 
> 标签：jquery, jquery-plugins

我的 jquery 插件初始化的所有元素在运行时共享相同的局部变量。我做了一个测试，发现因为这条线：

```
var tmp1 = tmp2 = weird_local_var = 0; 
```

如果我像下面这样写，它不会发生

```
var normal_local_var = 0; 
```

这不是因为 tmp1 & tmp2，只是用于测试的 dummy var。您可以通过[http://jsfiddle.net/7SeRD/](http://jsfiddle.net/7SeRD/)查看测试。发生什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:57:56.167

您可以将您的 init 行更改为：

```
var tmp1=0, tmp2=0, weird_local_var=0, normal_local_var=0;

// or
var tmp1=0; 
var tmp2=0;
var weird_local_var=0;
var normal_local_var=0; 
```

**编辑：**也请参阅此答案：[链接](https://stackoverflow.com/a/3387339/420001)。

从中：

```
var a = b = [] is equivalent to

var a;
b = [];
a = b; 
```

你正在做的是*链接* **assignments**。

本质上，您是在为 tmp2 分配一个奇怪的本地变量（其值为 0）的引用，然后将对该引用（即 tmp1 -> tmp2）的引用分配给 tmp1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:17:23.233

您在声明它们时不使用“var”关键字，将 v2 和奇怪的本地变量创建为全局变量。

尝试事先创建变量的相同方法，它将按预期工作：http: [//jsfiddle.net/MaxPRafferty/2MKgH/](http://jsfiddle.net/MaxPRafferty/2MKgH/)

```
 var v2;
        var weird_local_var;
        var v1 = v2 = weird_local_var = 0; 
```

# drupal - 在 Drupal 中引用资产

> ID：12201843
> 
> 赞同：0
> 
> 时间：2012-08-30T16:55:18.987
> 
> 标签：drupal, drupal-6

我正在帮助一位同事为具有多个站点的现有 Drupal 安装配置一个新盒子。它正在运行，但我注意到所有资产都被引用为`/sites/<site-name>/files/image.png`. 我不知道 Drupal，但令我印象深刻的是 Drupal 应该从代码中抽象出逻辑站点，以便可以引用特定于站点的资产，`/files/image.png`并且 Drupal 会弄清楚——也许基于`HTTP_HOST`——是指哪个站点。

在这种情况下，我们需要同一站点（开发和登台）的单独快照，因此我们希望能够在不专门引用一个站点或另一个站点的情况下存储路径。我们可以进行一些重写来解决这个问题，但我想知道是否有一些我们根本不知道的东西。

Drupal 是否以某种方式在本地执行此操作？如果不是，其他人在做什么来管理这种抽象？当然，我们不是第一个遇到这种情况并认为必须有更好的方法的人。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:10:01.410

那将是一个有趣的模块。Files 目录可以位于以下位置：

```
sites/<site name>/files (standard for multi sites, public) 
```

或者

```
sites/default/files (standard installation for single sites, public) 
```

也就是说，如果您想使用公共文件方法。

如果您想了解私有文件方法（与您的想法非常相似），请阅读此处：http: [//drupal.org/documentation/modules/file](http://drupal.org/documentation/modules/file)

# javascript - d3.scale.ordinal 的问题

> ID：12201845
> 
> 赞同：3
> 
> 时间：2012-08-30T16:55:27.193
> 
> 标签：javascript, charts, axis, d3.js

我有以下代码：

```
var dados = [
    ["Brasil", 20], 
    ["Canadá", 31],
    ["Japão", 29],
    ["USA", 126],
    ["Inglaterra", 81],
    ["Nova Zelândia", 25],
    ["Turquia", 34]
];

dados.sort(function(a, b) { return b[1] - a[1]; });

/* Chart Area */
var chart = d3.select("body").append("svg")
    .attr("class", "grafico")
    .attr("width", 700)
    .attr("height",300);    

/* Define X-axis */
var x = d3.scale.linear()
    .domain([0, d3.max(dados)[1] ])
    .range([0, 500]);    

/* Define Y-axis */
var domainY = dados.map(function(d) {return d[0];})
var y = d3.scale.ordinal()
    .domain(domainY)
    .rangeBands([0, 300]);

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickSize(0);

/* CALL Y-AXIS  */
chart.append("g")
    .attr("class", "y axis")
    .call(yAxis)
    .attr("transform", "translate(120,0)");

/* DRAW BARS */
var bar = chart.selectAll("g.bar")
    .data(dados)
    .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d) { return "translate(130,0)"; });

bar.append("rect")
    .attr("y", y)
    .attr("width", function(d) { return x(d[1]);} )
    .attr("height", y.rangeBand()-6); 
```

**我的问题**

当我在绘制 BARS 之后调用 Y-AXIS 时，`y.domain()`看起来像这样：

```
["USA", "Inglaterra", "Turquia", "Canadá", "Japão", "Nova Zelândia", "Brasil", 
Array[2], Array[2], Array[2], Array[2], Array[2], Array[2], Array[2]] 
```

并且类别（Y 轴）以 NAME/VALUE 对绘制：

```
 USA,126 
 Inglaterra,81
 Turquia, 34
 Canadá,31
 Japão,29
 Nova Zelândia,25
 Brasil,20 
```

当我在绘制 BARS 之前调用 Y-AXIS 时，`y.domain()`看起来是一样的，但是类别被正确绘制：

```
 USA 
 Inglaterra
 Turquia
 Canada
 Japão
 Nova Zelândia
 Brasil 
```

我在域上尝试了许多更改但没有成功。domainY 看起来是正确的，但在将数据绑定到图表后，就会发生重复。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:27:36.853

看起来您将错误的值传递给您的 y 刻度。而不是`attr("y", y)`你需要说的`attr("y", function(d) { return y(d[0]); })`。

# google-apps-script - 如何停止孤立触发器

> ID：12201847
> 
> 赞同：1
> 
> 时间：2012-08-30T16:55:32.100
> 
> 标签：google-apps-script

有趣的用例：
1\. ScriptApp 触发器管理的脚本 1 与 Google 站点中的图像链接关联
2\. 在新帐户下创建脚本的新实例并更新图像链接
3\. 删除了 Google 站点中的容器脚本 1
4\. 用户访问了 Google 站点以调用脚本，但页面被缓存指向之前的脚本 1。
5\. 每次“已删除”脚本运行时，都会通过电子邮件向我发送错误陷阱电子邮件。

如何删除或停止这些触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:12:19.113

如果您知道安装触发器的用户，您可以要求他们对脚本编辑器中的“我的所有触发器”菜单项执行操作，找到触发器并将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:06:00.880

在错误电子邮件中，有一个用于管理触发器的链接。确保触发器真的消失了。我在一组共享电子表格中遇到了这个问题，我以为我已经删除了所有触发器，但我的伙伴仍然启用了一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-26T19:50:19.450

在脚本编辑器中，您还可以以编程方式检查项目的触发器，然后使用该触发器及其源代码：

```
// Get triggers  
var triggers = ScriptApp.getProjectTriggers();

// Loop through each trigger
triggers.forEach(function(trigger) {

    // Get the id
    var id = trigger.getTriggerSourceId();

    // You can then use that id to get the related form or a sheet. E.g. :
    var ss = SpreadSheetApp.openById(id);

    // You can also work with the trigger (i.e. delete it)
    ScriptApp.deleteTrigger(trigger);

  }); 
```

有关更多信息，请参阅[https://developers.google.com/apps-script/reference/script/script-app](https://developers.google.com/apps-script/reference/script/script-app)

# google-custom-search - Google 自定义搜索 - 导致 IE 向左移动页面

> ID：12201864
> 
> 赞同：1
> 
> 时间：2012-08-30T16:56:36.450
> 
> 标签：google-custom-search

我在使用谷歌自定义搜索实现时遇到了一些问题。我让它在开发环境中的 FF、Chrome、Safari 中完美运行。然而，在 IE 中，当单击下一页（底部的数字）时，页面对齐是倾斜的。

我已将代码上传到文本页面上的生产环境中，以便您可以直接看到：[http](http://www.brookson.co.uk/test99/tests/?q=tax) ://www.brookson.co.uk/test99/tests/?q= tax（我已包含搜索参数，如搜索框当前未链接到 google 自定义搜索。

任何帮助，将不胜感激。

# java - 如何使用我的小程序修复此消息？

> ID：12201874
> 
> 赞同：0
> 
> 时间：2012-08-30T16:57:15.967
> 
> 标签：java, applet, runtime-error, noclassdeffounderror

运行 Applet 时出现错误：

```
Ignored exception: java.lang.RuntimeException: java.lang.ExceptionInInitializerError
Ignored exception: java.lang.RuntimeException: java.lang.NoClassDefFoundError: 
    Could not initialize class com.digitalpersona.onetouch.jni.Matcher 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:12:33.753

通常您应该提供更多信息：堆栈跟踪、小程序标记等。

但我可以假设以下。无法初始化的类属于 package `...jni...`。这是否确实意味着它执行 JNI 调用？如果它是正确的，除非您签名，否则您的小程序将无法运行。小程序在受控环境中运行，不能执行许多出于安全原因而被禁止的操作。JNI 调用属于这种类型的操作。

因此，请仔细检查：如果您的小程序执行 JNI 调用，您应该找到其他解决方案或对其进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:59:23.180

我们需要查看一些代码，但我会查看正在初始化的静态变量和您的类`com.digitalpersona.onetouch.jni.Matcher`

# java - HashMap 到 JsonSting？

> ID：12201875
> 
> 赞同：0
> 
> 时间：2012-08-30T16:57:20.850
> 
> 标签：java, json, gwt, hashmap

我正在开发一个 GWT 应用程序。

我想将 hashMap 转换为 JSON 字符串并将其发送到 GWT 服务器

我的 HashMap 就像`HashMap<String, CustomProperties)`

CustomProperties 是具有不同参数的类。此 HashMap 是 file 的属性。

我想上传具有这些属性的文件。

我要做什么：将 json Sting 附加到隐藏字段并通过 formPanel 将其与文件一起发送。

但我不知道如何将 Hashmap 转换为 JSON 字符串。

任何人都可以在这方面指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:22:34.990

考虑使用[GWT AutoBean](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)框架与 JSON 进行序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:52:47.127

JohnS 的回答很有道理。但是，有一个相关且很久以前回答的问题：[GWT HashMap to/from JSON](https://stackoverflow.com/questions/7278471/gwt-hashmap-to-from-json)了解详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:14:26.140

你可以试试杰克逊。

[http://wiki.fasterxml.com/JacksonInFiveMinutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)

```
ObjectMapper mapper = new ObjectMapper(); 
mapper.writeValue(outputStream, yourMap);
yourMapinJson=outputStream.toString(); 
```

# c# - 每当 Web 服务中的变量值发生更改时，调用函数/事件或将数据传递到网站（C#）

> ID：12201877
> 
> 赞同：0
> 
> 时间：2012-08-30T16:57:34.890
> 
> 标签：c#, asp.net, wcf, web-services, windows-applications

我有一个 Windows 应用程序正在侦听附加设备的**事件**（在 USB 端口上）并将事件名称传递给 Web 服务（**实时**）。我有一个网站，我想根据**device(In Real Time) 的事件**在其上执行某些操作。

因此，每当从 Windows 应用程序传递新的**事件值**时，我想在网站上传递数据或调用函数。

我尝试在调用 Web 服务的网页上使用**计时器来获取最新值。**但问题是事态变化非常迅速。

*网络服务有什么方法可以自动将一些数据发送到我的网站？或任何其他解决方案。*

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:33:26.277

据我所知，我认为您不能直接从 Web 服务传递您网站上的数据，因为服务本身不知道它与哪个连接。

对于您的场景，我要做的是创建一个包含一些所需表的数据库，并在您的 Windows 应用程序调用它时通过 Web 方法将数据存储在其中，因为您的应用程序完全建立在 .NET 上，您可以简单地通过DataTable 对象，而不必在另一端解析 XML 数据。现在，创建一个从数据库返回此数据的 Web 方法。从您的网站调用此 Web 方法。数据发送到网站后，您可以将其从数据库中删除，以便在下次调用时发送新数据。

它可能对你有帮助！

# java - 在 JAR 中指定 JVM 堆大小

> ID：12201878
> 
> 赞同：2
> 
> 时间：2012-08-30T16:57:40.193
> 
> 标签：java, memory, jar, jvm, manifest.mf

我正在尝试编写游戏引擎，但它需要比默认设置更多的内存。我知道如果你双击一个罐子，就会使用默认设置。那么无论如何我可以指定JAR在其清单文件（或其他地方）中需要自定义堆大小吗？

此外，引擎在它自己的 jar 中，而游戏在另一个 jar 中，引擎作为库。如果我在两个 JAR 中指定不同的限制，JVM 会优先考虑哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:01:37.387

您不能在 JAR 中指定命令行选项（类路径的库除外）

您可以做的是使用 Runtime.exec() 所需的选项让 JAR 自行重新启动

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:24:35.397

[清单规范](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html#JAR%20Manifest)中没有任何属性可用于控制堆空间。相反，您可以在您的应用程序中编写一个启动器主方法，该方法使用您的真正主方法使用其中一种[`Runtime.exec`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)实现来执行第二个进程。由于您可以访问[java.home](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)系统变量，因此您可以使用运行启动器的 Java 版本来启动游戏。

```
// Fix to use the version appropriate to the OS
String javaPath = System.getProperty("java.home") + "\bin\java.exe";
Runtime.exec("\"" + javaPath + "\" mygame.jar <heap_args>"); 
```

用于`java.home`获取 Java 路径可避免路径问题。如果您决定更改程序的启动方式，这也将使您能够控制将来的启动。例如，可以将其更改为使用[`Process`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)，以便您还可以在启动器中等待进程终止，从而在游戏的 JVM 完全终止时控制运行后清理。

# file - 从 .emacs 访问所需文件

> ID：12201884
> 
> 赞同：1
> 
> 时间：2012-08-30T16:58:14.003
> 
> 标签：file, emacs, input, require

是否可以访问 require 中提到的文件，例如：

```
 (require 'key-chord) 
```

当点击“key-chord”（或其他输入而不是点击）时，您会访问该文件吗？

编辑：鉴于我们要访问文件“key-chord.el”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:18:46.367

将光标放在任何需要的地方，例如“key-chord”中的“k”，然后执行`M-x ffap RET RET`. `ffap`是 的别名，它至少在 lisp 模式下`find-file-at-point`可以理解。`require`我已经`ffap`绑定到`C-x f`，因为我很少使用该键的默认绑定。

一些 Emacs 安装没有 .el 文件（只有 .elc 文件）。在 Debian/Ubuntu 中，您需要安装一个单独的软件包来获取它们（emacs- *version* -el、IIRC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:23:40.503

`locate-library`告诉您文件名，并`find-file`在缓冲区中打开文件进行编辑。（`find-file-read-only`如果您只想检查它，您可能想要。）

```
(find-file (locate-library "key-chord.el" t)) 
```

你可以把它变成一个函数，像这样：

```
(defun find-locate-library (lib)
  "Visit the source for library LIB in a buffer."
  (let ((location (locate-library (concat lib ".el") t)))
    (if location
      (find-file location)
     (message "Could not find library %s" lib)) )) 
```

如何将其连接到查看或编辑缓冲区是一个单独的主题。我想您可以修改 Elisp 模式以使库名称可点击，但我无法立即告诉您如何做到这一点。

感谢@Deokhwan Kim 提出的将搜索限制为仅“.el”文件的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T04:02:17.620

`M-x` `find-library` `RET`提示您输入库的名称，然后访问该文件。

在有效的库名称上使用 point 调用它会使其成为默认提示值。

在语句中的*任何地方*用 point 调用它`require`也会做正确的事情。

I use `find-library` frequently, and bind it to `C-h``C-l` for convenience.

# mysql - 如何确定什么更有效：DISTINCT 还是 WHERE EXISTS？

> ID：12201885
> 
> 赞同：14
> 
> 时间：2012-08-30T16:58:18.790
> 
> 标签：mysql, performance, distinct, inner-join, explain

例如，我有 3 个表：`user`、`group`和`permission`，以及它们之间的两个 many2many 关系：`user_groups`和`group_permissions`。

我需要选择给定用户的所有权限，不重复。每次遇到类似的问题，我都无法确定哪个版本的查询更好：

```
SELECT permisson_id FROM group_permission WHERE EXISTS(
    SELECT 1 FROM user_groups 
        WHERE user_groups.user_id = 42 
          AND user_groups.group_id = group_permission.group_id
)

SELECT DISTINCT permisson_id FROM group_permission
    INNER JOIN user_groups ON user_groups.user_id = 42 
           AND user_groups.group_id = group_permission.group_id 
```

我有足够的经验根据解释得出结论。第一个查询有子查询，但我的经验表明第一个查询更快。可能是因为结果中过滤了大量权限。

在这个情况下，你会怎么做？为什么？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T17:07:27.327

使用 EXISTS 而不是 DISTINCT

您可以使用 DISTINCT 抑制重复行的显示；您使用 EXISTS 检查子查询返回的行是否存在。只要有可能，您应该使用 EXISTS 而不是 DISTINCT，因为 DISTINCT 在抑制重复行之前对检索到的行进行排序。

在你的情况下，应该有很多重复的数据，所以存在应该更快。

通过[http://my.safaribooksonline.com/book/-/9780072229813/high-performance-sql-tuning/ch16lev1sec10](http://my.safaribooksonline.com/book/-/9780072229813/high-performance-sql-tuning/ch16lev1sec10)

# r - 从 R 中的 coeftest 对象创建乳胶表

> ID：12201886
> 
> 赞同：4
> 
> 时间：2012-08-30T16:58:25.937
> 
> 标签：r, latex

我有一个`coeftest`类对象，我为某些`lm`类无法实现的目的而编码，但我需要以`xtable`( `lm`) 的方式导出对象。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:22:52.643

我认为这可以帮助你：

```
library(AER) # I think coeftest() belongs to this package.
library(Hmisc)
latex(coeftest(model), digits=5) 
```

哪里`model`是由 估计的线性模型`lm()`。`latex()`是`Hmisc`包中的一个函数，它比`xtable`.

如果这不是您要查找的内容，请提供一些数据和预期结果，以便我们找出答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-11T22:13:45.830

```
library(stargazer)
stargazer(model, se=coeftest(model), report=vcs) 
```

模型是线性模型。至少根据我的经验，stargazer 比 Hmisc 的 latex() 更通用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T02:11:22.487

或者，如果你想使用 xtable，可以写下一个小函数：

```
library(lmtest)
library(xtable)

xtable.coeftest <- function (x, caption = NULL, label = NULL, align =     NULL, digits = NULL, 
                         display = NULL, ...) 
{
  class(x) <- "matrix"
  li<-list(coef=x)
  return(xtable:::xtable.summary.lm(li, caption = caption, label = label, 
                                align = align, digits = digits, display = display))
}

example(coeftest)
xtable(coeftest(fm)) 
```

诚然，它不是最优雅的（有两个问题，一个是很难转换`coeftest`对象，第二个是`xtable.summary.lm`使用`x$coef`而不是`coef(x)`），但它确实有效！

# ruby-on-rails - TestUnit --> stubbing rails 控制器方法

> ID：12201892
> 
> 赞同：1
> 
> 时间：2012-08-30T16:58:56.717
> 
> 标签：ruby-on-rails, functional-testing, testunit

我有一个具有以下逻辑和语法方法的 Rails 控制器

```
def index
  if get_submission
    render :action => :workspace
  else
    flash[:notice] = t('flashes.no_more_submissions')
    redirect_to root_path
  end
end

...

def get_submission
  ...
end 
```

在我的 testunit 功能测试中，我想存根 get_submission 以便它自动返回 false。我希望

```
controller.stubs(:get_submission) { false } 
```

会做的伎俩，但没有快乐。我来自 rspec 背景，对 testunit 的经验很少。任何建议表示赞赏。

干杯...

# jquery - 突出显示最低值

> ID：12201897
> 
> 赞同：1
> 
> 时间：2012-08-30T16:59:13.250
> 
> 标签：jquery

在 mysql 查询后，我显示此代码

```
<div id="id1" style="border:1px solid red;" data-distance="31.5">
<div id="id2" style="border:1px solid red;" data-distance="1.9"> 
```

div 的数量和输出的“data-distance”的值可以根据 mysql 结果而有所不同。

我想要的是将样式从“边框：1px 纯红色”更改为“边框：1px 纯绿色”的 div，它的“数据距离”值最低。

在上面的例子中，它将是

```
<div id="id1" style="border:1px solid red;" data-distance="31.5">
<div id="id2" style="border:1px solid green;" data-distance="1.9"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:11:45.900

这是一种可能的解决方案：

```
$($("[data-distance]").get().sort(function(a, b) {
    return a.getAttribute("data-distance") - b.getAttribute("data-distance");
})[0]).css("border-color", "green"); 
```

**演示：http:** [//jsfiddle.net/CrCZR/](http://jsfiddle.net/CrCZR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:13:00.160

简单方法：

```
var lowest = {id: '',val: Number.MAX_VALUE};
$('div').each(function() {
    if ($(this).data('distance') < lowest.val) {
        lowest.id = $(this).attr('id');
        lowest.val = $(this).data('distance');
    }
});
$('#'+lowest.id).css('borderColor','green');​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/2TmEh/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:21:10.677

您的代码将如下所示：

```
var arrayOfdistance=new Array(); //defining a Arrar Object
$('div').each(function(){arrayOfdistance.push($(this).attr('data-distance'))});  //Pushed all the distance in array object                     

var minValue= Math.min.apply(null, arrayOfdistance);      //got the min of all             
                         $('div[data-distance="'+minValue+'"]').attr('style','border:1px solid green');// applied css to all containing min value​ 
```

你的工作小提琴

[工作演示](http://jsfiddle.net/pZUYr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:21:37.147

这将更改所有具有最低值的项目的样式：

```
$('[data-distance="'+$('div').map(function(){return parseFloat($(this).data('distance'));}).sort()[0]+'"]').css('border-color','green'); 
```

演示：http: [//jsfiddle.net/Guffa/YBtgV/](http://jsfiddle.net/Guffa/YBtgV/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T17:09:14.950

最简单的方法是设置某种循环。

例如，使用您的模型：

```
var minvalue = 100000; // an arbitrary number.  Should be larger than the probable min element
var $minElement = null;

$('div[data-distance]').css('border-color','red');
$('div[data-distance]').each(function() {
  if ($(this).data('distance') < minvalue) {
    minvalue = $(this).data('distance');
    $minElement = $(this);
  }
});

$minElement.css('border-color','green'); 
```

[http://jsfiddle.net/bhoover10001/2KG6D/](http://jsfiddle.net/bhoover10001/2KG6D/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T17:09:30.317

```
var minRes = -1;
var minObj = null;
$('div[data-distance]').each(function(){
    var val = parseFloat($(this).data('distance'));
    if(val < minRes || minRes < 0){
        minRes = val;
        minObj = this;
    }
});
$(minObj).css('border', '1px solid green'); 
```

应该管用。

# python - authGSSServerInit 从 keytab 中查找错误条目

> ID：12201900
> 
> 赞同：2
> 
> 时间：2012-08-30T16:59:30.570
> 
> 标签：python, kerberos

我正在尝试使用 python-kerberos (1.0.90-3.el6) 为 GSSAPI 服务器端身份验证初始化上下文。**我的问题是 myserver.localdomain 被转换为 myserver - 我给定的主体的一部分在某处被砍掉。为什么会这样？**

失败示例：

```
>>> import kerberos
>>> kerberos.authGSSServerInit("HTTP@myserver.localdomain")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
kerberos.GSSError: (('Unspecified GSS failure.  Minor code may provide more information', 851968), ('Unknown error', 0))
>>> 
```

在 KRB5_TRACE 的帮助下，我得到了原因：

```
[1257] 1346344556.406343: Retrieving HTTP/myserver@LOCALDOMAIN from WRFILE:/etc/krb5.keytab (vno 0, enctype 0) with result: -1765328203/No key table entry found for HTTP/myserver@LOCALDOMAIN 
```

我无法为普通的 HTTP/myserver@LOCALDOMAIN 生成密钥表，因为它还会强制用户使用这样的地址访问服务器。我需要让函数使用正确的 FQDN 名称。据我所见，authGSSServerInit 应该与 FQDN 一起工作而不会破坏它。

我认为 python-kerberos 方法调用了以下 krb5-libs (1.9-33.el6) 提供的函数，问题也可能出在这些函数中：

```
maj_stat = gss_import_name(&min_stat, &name_token, GSS_C_NT_HOSTBASED_SERVICE, &state->server_name);
maj_stat = gss_acquire_cred(&min_stat, state->server_name,GSS_C_INDEFINITE,GSS_C_NO_OID_SET, GSS_C_ACCEPT, &state->server_creds, NULL, NULL); 
```

kerberos 已在此主机上正确配置，并确认可以正常工作。例如，我可以以用户身份 kinit，并对票证进行身份验证。只是 authGSSServerInit 无法正常运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:31:06.680

一些文档具有误导性：

```
def authGSSServerInit(service):
    """
    Initializes a context for GSSAPI server-side authentication with the given service principal.
    authGSSServerClean must be called after this function returns an OK result to dispose of
    the context once all GSSAPI operations are complete.

    @param service: a string containing the service principal in the form 'type@fqdn'
        (e.g. 'imap@mail.apple.com').
    @return: a tuple of (result, context) where result is the result code (see above) and
        context is an opaque value that will need to be passed to subsequent functions.
    """ 
```

事实上，API 只需要类型。例如“HTTP”。主体的其余部分在 resolver(3) 的帮助下生成。尽管 kerberos 的其余部分很乐意使用短名称，但解析器会生成 FQDN，但前提是正确设置了 dnsdomainname。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T19:54:49.763

为了完整起见，请提供更多信息，在 python 命令中包含以下变量：

1.  这是可选的 -> KRB5_TRACE=/path-to-log/file.log
2.  通常这个路径 -> KRB5_CONFIG= /etc/krb5.conf
3.  通常这个路径 -> KTNAME=/etc/security/keytabs/foo.keytab

例如：

```
KRB5_TRACE=/path-to-log/file.log KRB5_CONFIG='/etc/krb5.conf' KTNAME=/etc/security/keytabs/foo.keytab /opt/anaconda3.5/bin/python3.6 
```

在 python 运行中：

```
import kerberos
kerberos.authGSSServerInit("user") 
```

注意事项：

1.  在您的密钥表中，主体必须是 user/host@REALM
2.  两个“用户”必须相同
3.  完整的主体将由您的 kerberos 客户端配置组成

如果返回码为 0，你就完成了！恭喜！

如果没有转到日志文件并享受调试：P

# javascript - Bresenham 同心圆留下空像素

> ID：12201907
> 
> 赞同：4
> 
> 时间：2012-08-30T17:00:01.973
> 
> 标签：javascript, algorithm, geometry, bresenham

我正在使用中点圆算法（也称为 Bresenham 算法）来绘制同心圆。每个圆的半径与下一个圆的半径之差始终为 1，因此最终结果应该是一个完整的圆形区域。

但是，有些像素是空的，如附图所示。

我正在使用 Javascript 在 HTML5 画布上绘画，操作 canvas.getContext("2d").getImageData(...).data 数组。

圆圈交替为白色和红色，空像素为黑色。您可能需要放大才能正确理解我的意思。

![布雷森汉姆同心圆](../Images/ae2de261498659f9a82bd29849f5145f.png)

我正在尝试向算法添加一些代码，以便在绘制相应的弧线时填充这些像素。这些像素中的任何一个似乎都没有理由属于一个弧而不是下一个，所以我不在乎它们是否与具有偶数半径的弧或具有奇数半径的弧一起填充（我希望我说清楚）。

像素似乎遵循一种模式，但我对那可能是什么一无所知。谁能帮我找到它？

```
function drawCircles(radius, x, y){
    var f = 1 - radius;
    var ddF_x = 1;
    var ddF_y = -2 * radius;
    var x = 0;
    var y = radius;

    //Colors
    var red = 255;       
    var green = radius%2==0?255:0;       
    var blue = radius%2==0?255:0;        

    paintPixel(x, y + radius, red, green, blue);
    paintPixel(x, y - radius, red, green, blue);
    paintPixel(x + radius, y, red, green, blue);
    paintPixel(x - radius, y, red, green, blue);    

    while(x < y){
        // ddF_x == 2 * x + 1;
        // ddF_y == -2 * y;
        // f == x*x + y*y - radius*radius + 2*x - y + 1;
        if(f >= 0) 
        {
            y--;
            ddF_y += 2;
            f += ddF_y;
        }
        x++;
        ddF_x += 2;
        f += ddF_x;    
        paintPixel(x + x, y + y, red, green, blue);
        paintPixel(x - x, y + y, red, green, blue);
        paintPixel(x + x, y - y, red, green, blue);
        paintPixel(x - x, y - y, red, green, blue);
        paintPixel(x + y, y + x, red, green, blue);
        paintPixel(x - y, y + x, red, green, blue);
        paintPixel(x + y, y - x, red, green, blue);
        paintPixel(x - y, y - x, red, green, blue);
    }

}

function paintPixel(x, y, red, green, blue){
    imageData.data[grid[y][x]] = red;
    imageData.data[grid[y][x]+1] = green;
    imageData.data[grid[y][x]+2] = blue;
    imageData.data[grid[y][x]+3] = 255; //Alpha
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:47:28.467

如果您设计 Bresenham 风格的圆形抽屉来计算*边界轮廓*而不是像素，您可以生成完美嵌套的圆形。从概念上讲，边界轮廓是像素*边缘*的列表，而不是像素中心。这非常适合 Bresenham 风格的操作：在增加 x 坐标时注册水平边缘，在增加 y 坐标时注册垂直边缘。

对于每个圆，计算两个轮廓：一个为`outer_radius`，另一个为`(outer_radius - pen_diameter)`。*在两个轮廓之间*绘制像素：稍微聪明一点，您应该能够在同一个循环中运行两个轮廓生成器，并在线进行像素绘制。

当然，使用这种边界技术绘制的圆看起来与直接生成的圆不同。但是，IIRC，边界技术可能比直接技术更强大，无论如何......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:37:46.743

Bresenham 的设计是使用一个像素乘 n 个像素的区域绘制一条线。在 45 度时，它将绘制一个像素，然后绘制另一个 (+1,+1) 像素。这给出了两个像素中心之间的平均厚度 1/√2。一个像素粗线的精确图的粗细为 1。黑点是由于 Bresenham 算法线的粗细与真实粗细之间的差异造成的。

如果将绘制的像素扩展为包括真实线中心交叉的所有像素，则它不应有任何间隙，因为它的厚度永远不会小于 1。这样做的一种方法是使用 Bresenham 的两次内半径和外半径，并根据两者之间的差异绘制像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:15:16.863

```
<canvas width="500" height="500" style="background:#000;">
</canvas>​

var canvas = $("canvas")[0];
var cen = $("canvas").width()/2;
var len = cen, i = len;
var ctx = canvas.getContext("2d");
var red = "#f00";
var white = "#fff";

for (; i > 0; i--){
    ctx.beginPath();
    ctx.arc(cen, cen, i, 0, 2 * Math.PI, false);
    ctx.fillStyle = i % 2 ? red : white;
    ctx.fill();
}​ 
```

[http://jsfiddle.net/RmHC3/](http://jsfiddle.net/RmHC3/)

没有黑点。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:04:11.770

这看起来肯定是一个混叠问题。由于丢失的像素在 45° 角处似乎更密集，我怀疑根本问题与距离计算有关。沿着对角线，一个像素的距离比沿着轴测量的距离大约多 41%。这会导致像素中心远离任一圆。没有看到你的代码，很难说更多。

一种解决方法可能是简单地用一种圆圈颜色填充圆圈，然后只绘制另一种圆圈颜色。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-07T06:19:21.717

好吧，我在洪都拉斯科技大学（UTH）教汇编语言，出于某种原因，我试图画线和圆，但我试图找到一种不同于 Bresenham 的算法，我发现这些（用于线和圆）当您用同心圆填充圆形或用斜线填充矩形时，解决原始 Bresenham 中的孔。

注意 1：此算法与 Supercover 算法不同，但您可以将其用于相同目的。

注2：我只使用整数算术和逻辑函数来完成工作。

这是一个屏幕截图（在 Windows XP VirtualBox 中使用 Emu8086 并将程序编译为 .exe 文件）。

[![在此处输入图像描述](../Images/955fb1d375a856c1198971873c0199dc.png)](https://i.stack.imgur.com/NR8Q7.png)

该代码应该进行优化，但由于是出于教学目的，所以我只是以学生可以轻松理解的方式进行编程。

```
 data segment
                ; Las variables que comienzan con _ son variables usadas en los procedimientos
                _migaja         dw ?
                _x              dw ?
                _y              dw ?
                _x2             dw ?
                _y2             dw ?
                _color          dw ?
                _deltaX         dw ?
                _deltaY         dw ?
                _deltaX_abs     dw ?
                _deltaY_abs     dw ?
                _error          dw ?
                _error_x        dw ?
                _error_y        dw ?
                _error_xy       dw ?
                _error_x_abs    dw ?
                _error_y_abs    dw ?
                _error_xy_abs   dw ?
                _cambio_y       dw ?
                _color_inicial  db ?
                _color_relleno  db ?
                _xc             dw ?
                _yc             dw ?
                _radio          dw ?
                ; Variables usadas en la parte principal
                i               dw ?   
                xcentro        dw 160
                ycentro        dw 100
                radio          dw 1
                color          dw 0
            ends

            stack segment
                dw   32767  dup(0)
            ends

            code segment
            start:
                mov ax, data
                mov ds, ax
                mov es, ax
                call videoMode

                mov color, 10

                pre_ciclo:
                    mov radio, 0

                ciclo:
                    cmp radio, 100
                    jge salir_ciclo
                    push xcentro
                    push ycentro
                    push radio
                    push color
                    call circulo
                    inc radio
                    jmp ciclo        
                salir_ciclo:

                mov ah, 1
                int 21h

                mov ax, 4c00h
                int 21h    
            ends

                videoMode PROC
                    mov ah, 0
                    mov al, 13h
                    int 10h
                    ret
                ENDP

                setPixel PROC
                    pop _migaja
                    pop ax
                    pop dx
                    pop cx
                    push _migaja
                    mov ah, 0Ch
                    int 10h        
                    ret
                ENDP

                circulo PROC
                    ; Este procedimiento dibuja un circulo en (x,y) de radio r
                    ; Hecho por Ing. Yury Euceda© para los alumnos de UTH Agosto 2014
                    pop _migaja
                    pop _color
                    pop _radio
                    pop _yc
                    pop _xc
                    push _migaja

                    ; Defino el error inicial
                    pre_ciclo_circle:
                        mov _error, 0
                        mov _x, 0
                        mov ax, _radio
                        mov _y, ax

                    ciclo_circulo:
                        push cx

                        mov cx, _x
                        add cx, _xc
                        mov dx, _yc
                        add dx, _y
                        mov ax, _color
                        mov ah, 0Ch
                        int 10h
                        push dx
                        mov dx, _yc
                        sub dx, _y
                        int 10h
                        push cx
                        mov cx, _xc
                        sub cx, _x
                        int 10h
                        pop cx
                        pop dx
                        mov cx, _xc
                        sub cx, _x            
                        int 10h

                        pop cx
                        cmp _y, 0
                        je salir_ciclo_circulo
                        ; Calculo error si suben ambos
                        mov ax, _x
                        shl ax, 1
                        inc ax
                        add ax, _error
                        mov _error_x, ax
                        mov _error_x_abs, ax
                        mov _error_xy, ax
                        mov _error_xy_abs, ax
                        mov ax, _y
                        shl ax, 1
                        neg ax
                        inc ax
                        add _error_xy, ax
                        add _error_xy_abs, ax
                        add ax, _error
                        mov _error_y, ax
                        mov _error_y_abs, ax

                        ; Calculo los valores absolutos de los errores
                        cmp _error_x_abs, 0
                        jge continuar1_circulo
                        neg _error_x_abs
                        continuar1_circulo:
                        cmp _error_y_abs, 0
                        jge continuar2_circulo
                        neg _error_y_abs
                        continuar2_circulo:
                        cmp _error_xy_abs, 0
                        jge continuar3_circulo
                        neg _error_xy_abs
                        continuar3_circulo:
                        ; Ahora voy a decidir que error absoluto es el menor
                        inc _x            
                        dec _y
                        mov ax, _error_xy
                        mov _error, ax
                        mov ax, _error_xy_abs

                        compare_a_b_circulo:
                            cmp ax, _error_y_abs    ; compare a con b
                            jg compare_b_c_circulo          ; si a > b compare b con c
                            cmp ax, _error_xy_abs   ; sino compare a con c
                            jg continuar_loop_circulo       ; si es mayor continue loop
                            inc _y
                            mov ax, _error_x
                            mov _error, ax                
                            jmp continuar_loop_circulo
                        compare_b_c_circulo:
                            mov ax, _error_y_abs
                            cmp ax, _error_xy_abs
                            jg continuar_loop_circulo
                            dec _x
                            mov ax, _error_y
                            mov _error, ax                
                        continuar_loop_circulo:
                    jmp ciclo_circulo
                    salir_ciclo_circulo:
                    ret
                ENDP

                linea PROC
                    ; Este procedimiento dibuja una linea desde (x1,y1) hasta (x2,y2)
                    ; Hecho por Ing. Yury Euceda© para los alumnos de UTH Agosto 2014
                    pop _migaja
                    pop _color
                    pop _y2
                    pop _x2
                    pop _y
                    pop _x
                    push _migaja

                    mov ax, _x
                    cmp ax, _x2
                    jle calcular_deltaX
                    xchg ax, _x2
                    mov _x, ax
                    mov ax, _y
                    xchg ax, _y2
                    mov _y, ax 

                    calcular_deltaX:
                        ; Calculo deltaX = X2 - X
                        mov ax, _x2
                        sub ax, _x
                        mov _deltaX, ax
                        mov _deltaX_abs, ax
                        cmp ax, 0
                        jge calcular_deltaY
                        neg _deltaX_abs

                    calcular_deltaY:        
                        ; Calculo deltaY = Y2 - Y
                        mov ax, _y2
                        sub ax, _y
                        mov _deltaY, ax
                        mov _deltaY_abs, ax
                        cmp ax, 0
                        jge calcular_cambio
                        neg _deltaY_abs

                    calcular_cambio:
                        mov _cambio_y, 1
                        cmp _deltaY, 0
                        jge pre_ciclo_linea
                        neg _cambio_y        

                    ; Defino el error inicial
                    pre_ciclo_linea:
                        mov _error, 0
                        mov ax, _deltaY_abs
                        cmp _deltaX_abs, ax
                        jge asignar_deltaX
                        mov cx, _deltaY_abs
                        inc cx
                        jmp ciclo_linea

                        asignar_deltaX:
                        mov cx, _deltaX_abs
                        inc cx

                    ciclo_linea:
                        push cx
                        push _x
                        push _y
                        push _color
                        call setPixel
                        pop cx
                        ; Calculo error si suben ambos
                        mov ax, _error
                        add ax, _deltaY_abs         ; ax  = error + deltaY
                        mov _error_x, ax
                        mov _error_x_abs, ax
                        sub ax, _deltaX_abs         ; ax = error + deltaY - deltaX
                        mov _error_xy, ax
                        mov _error_xy_abs, ax
                        sub ax, _deltaY_abs         ; ax = error - deltaX
                        mov _error_y, ax
                        mov _error_y_abs, ax
                        ; Calculo los valores absolutos de los errores
                        cmp _error_x_abs, 0
                        jge continuar1
                        neg _error_x_abs
                        continuar1:
                        cmp _error_y_abs, 0
                        jge continuar2
                        neg _error_y_abs
                        continuar2:
                        cmp _error_xy_abs, 0
                        jge continuar3
                        neg _error_xy_abs
                        continuar3:

                        comparar_x_con_y:
                            mov ax      , _error_y_abs
                            cmp _error_x_abs, ax
                            jge comparar_y_con_xy
                            mov ax      , _error_xy_abs
                            cmp _error_x_abs, ax
                            jg cambiar_xy
                            inc _x
                            mov ax, _error_x
                            mov _error, ax
                            jmp continuar_loop

                        comparar_y_con_xy:
                            mov ax      , _error_xy_abs
                            cmp _error_y_abs, ax
                            jge cambiar_xy
                            mov ax, _cambio_y
                            add _y, ax
                            mov ax, _error_y
                            mov _error, ax
                            jmp continuar_loop

                        cambiar_xy:
                            inc _x
                            mov ax, _cambio_y
                            add _y, ax
                            mov ax, _error_xy
                            mov _error, ax

                        continuar_loop:

                    loop ciclo_linea            
                    ret
                ENDP

                rellenar PROC
                    pop _migaja
                    pop ax
                    pop dx
                    pop cx
                    push _migaja
                    mov _color_relleno, aL
                    mov ah, 0Dh
                    int 10h
                    mov _color_inicial, aL 
                    ; Llamo la recursiva
                    push cx
                    push dx
                    call rellenar_recursiva
                    pop dx
                    pop cx
                    ret
                ENDP

                rellenar_recursiva PROC
                    pop _migaja
                    ; Saco los parametros de la pila
                    pop dx
                    pop cx
                    ; Vuelvo a meterlos a la pila :)
                    push cx
                    push dx
                    push _migaja

                    ; valido que el punto este en rango
                    cmp cx, 0
                    jl salir_rellenar
                    cmp cx, 319
                    jg salir_rellenar
                    cmp dx, 0
                    jl salir_rellenar
                    cmp dx, 199
                    jg salir_rellenar
                    ; Extraigo el color del pixel en CX,DX
                    mov ah, 0Dh
                    int 10h
                    ; Lo comparo con el color inicial
                    cmp _color_inicial, aL
                    ; Si no es igual salgase
                    jne salir_rellenar
                    ; Si es igual entonces lo pinto
                    mov aL, _color_relleno
                    mov ah, 0Ch
                    int 10h

                    ; Pinto el norte
                    dec dx
                    push cx
                    push dx
                    call rellenar_recursiva
                    pop dx
                    pop cx
                    inc dx
                    ; Pinto el este
                    inc cx
                    push cx
                    push dx
                    call rellenar_recursiva
                    pop dx
                    pop cx
                    dec cx
                    ; Pinto el sur
                    inc dx
                    push cx
                    push dx
                    call rellenar_recursiva
                    pop dx
                    pop cx
                    dec dx
                    ; Pinto el oeste
                    dec cx
                    push cx
                    push dx
                    call rellenar_recursiva
                    pop dx
                    pop cx
                    inc cx
                    salir_rellenar:
                    ret
                ENDP

            end start 
```

# javascript - 在这个例子中如何用 Jquery 调用一个函数？

> ID：12201908
> 
> 赞同：1
> 
> 时间：2012-08-30T17:00:01.007
> 
> 标签：javascript, jquery, jquery-ui

在此示例中，如何使用 Jquery 单击“取消”按钮来调用函数并让对话框不断返回？我相信这很容易，但仍然在这里学习一些基础知识。谢谢

```
function definitelyClose() {
    window.location = 'http://www.google.com'
};
var autoCloseTimer;
var timeoutObject;
var timePeriod = 5000;
var warnPeriod = 10000;
$(document).ready(function() {
    $('#proba').dialog({
        autoOpen: false
    });
    setTimeout(function() {
        $('#proba').attr('title', 'Warning').text('Sesion will expire').dialog('open');
        $('#proba').dialog({
            buttons: {
                'Cancel': function() {
                    $(this).dialog('close');
                    clearTimeout(autoCloseTimer);
                }
            }
        });
        autoCloseTimer = setTimeout('definitelyClose()', warnPeriod);
    }, timePeriod);
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:36:43.533

您需要创建具有名称的函数

1.  显示初始警告和
2.  单击取消按钮时调用。

所以你会得到这样的东西：

```
$(document).ready(function() {
  var autoCloseTimer;
  var timePeriod = 5000;
  var warnPeriod = 10000;

  function definitelyClose() {
    window.location = 'http://www.google.com'
  };

  // You need a function with a name
  function showWarning() {
    $('#proba').attr('title', 'Warning')
               .text('Sesion will expire')
               .dialog('open');
    $('#proba').dialog({
      buttons: {
        'Cancel': function() {
          $(this).dialog('close');
          clearTimeout(autoCloseTimer);
          // Now you can recall the function
          setTimeout(showWarning, timePeriod);
        }
      }
    });
    autoCloseTimer = setTimeout(definitelyClose, warnPeriod);
  }

  $('#proba').dialog({ autoOpen: false });
  setTimeout(showWarning, timePeriod);
});​ 
```

# sql - 如何在sql查询中得到正确的结果？

> ID：12201914
> 
> 赞同：0
> 
> 时间：2012-08-30T17:00:39.213
> 
> 标签：sql, oracle

我想要一个 sql 查询返回以下数据：

```
DES_EVENT | DATE_EVENT | INSCRIBED_PARTICIPANTS 
```

我的表格是（其他列被隐藏）

```
**EVENT**
ID
DES_EVENT
DATE_EVENT

**EVENT_ACCESS**
NAME
EVENT_ID

**PARTICIPANT**
EVENT_ID 
```

注意：表参与者注册参与者注册的每个事件。

我想知道给定用户组织了哪些活动以及注册了多少参与者。

我尝试执行以下查询：

```
SELECT
e.des_event,
e.date
FROM
event e,
event_access ea
WHERE
ea.name = ?
AND
ea.event_id = e.id 
```

通过此查询，我无法获得参与者的数量。所以我尝试执行以下查询：

```
SELECT
e.des_event,
e.date
FROM
event e,
event_access ea,
participant p
WHERE
ea.name = ?
AND
ea.event_id = e.id
AND 
p.event_id = ea.event_id 
```

并且每个事件的行都会为每个参加此事件的参与者重复，但我想在 sql 结果的另一列中获得这些重复次数，就像我放在问题的顶部一样。

如果我使用 count() 函数，oracle 会返回错误

> (ORA-00937: 不是单组群功能)

我怎样才能得到正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:05:06.903

如果我理解你，你想要

```
SELECT e.des_event,
       e.date,
       count(*) num_participants
  FROM event e,
       event_access ea,
       participant p
 WHERE ea.name = ?
   AND ea.event_id = e.id
   AND p.event_id = ea.event_id
 GROUP BY e.ddes_event, e.date 
```

如果这不是您想要的，您可以发布一些示例数据并发布您正在寻找的结果吗？像你一样描述结果很好，但一些具体的测试用例可能有助于澄清事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:05:41.457

听起来你想要这个：

```
select e.des_event,
  e.date_event,
  p.NumberOfParticipants
from event e
inner join event_access ea
  on e.id = ea.event_id
inner join
(
  select count(*) NumberOfParticipants, event_id
  from participant
  group by event_id
) p
  on ea.event_id = p.event_id
where ea.name = ? 
```

# objective-c - 在没有 Bonjour 的情况下如何找到所有网络设备？

> ID：12201915
> 
> 赞同：5
> 
> 时间：2012-08-30T17:00:49.793
> 
> 标签：objective-c, ios, macos, network-programming

我正在编写一个 mac 应用程序，我需要发现连接到同一 WIFI 网络的其他 Mac/PC/iPhone/iPad。

Bonjour 似乎是最合理的选择，但事实证明它在许多类型的路由器上都存在问题（例如，在我的路由器上，它无法正常工作，因为它会阻止 Bonjour 服务）。

我只需要找到设备的 iP，然后我将尝试连接到特定于应用程序的端口以确定我的进程是否在那里运行。

在不违反应用商店沙盒的情况下，完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T07:25:14.993

[ARP](https://stackoverflow.com/questions/2258172/how-do-i-query-the-arp-table-on-iphone)是我想到的第一个答案。您的网络设置是否允许这样做？

# iphone - 访问其他类中的标签文本

> ID：12201920
> 
> 赞同：1
> 
> 时间：2012-08-30T17:01:04.283
> 
> 标签：iphone

我有两个`viewcontrollers. --> AViewController,BViewController`  </p>

`AViewController`需要创建一个对象`BViewController`。和`presentmodalcontroller`：去`BViewController`。

并且`BViewController`   还需要创建一个对象`AViewController`   ，这样才能在`BViewController  's`方法里面更新标签文本。

已尝试导入`AViewController`   in `BViewController`  。错误出来。未知类型名称' `ViewController`'，你的意思是' `UIViewController`'吗？

如果我也想访问 AViewController，我该如何解决。

任何人都可以帮助我，提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:09:48.603

在 BViewController 的标头中，在 @interface 之前，放置：

```
@class AViewController; 
```

这将允许您在 BViewController 中声明 AViewController 类型的实例。在BViewController的.m文件中，#import AViewcontroller.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:02:15.113

在你的 BViewController.h

```
#import AViewcontroller.h

@property(nonatomic,retain) AViewcontroller* aViewcontroller; 
```

在你的 BViewController.m

```
@synthesis aViewcontroller; 
```

然后在您创建 BViewcontroller 对象的 AViewcontroller.m 中，可以说 bViewcontroller

```
bViewcontroller.aViewcontroller=self;
//then navigate to bViewcontroller 
```

然后你可以在 BViewController 的方法中更新之前的 AViewController 的标签文本。

```
self.aViewcontroller.label_you_want_to_update.text=@"your_text_here"; 
```

希望这可以帮助

# objective-c - 将 UITapGestureRecognizer 直接实现到 UIView 而不是 ViewController 不起作用

> ID：12201924
> 
> 赞同：1
> 
> 时间：2012-08-30T17:01:23.767
> 
> 标签：objective-c, ios5, uiimageview, uigesturerecognizer

正如[这个 SO-answer](https://stackoverflow.com/questions/5954934/issue-with-a-uitapgesturerecognizer)中所解释的，我正在尝试`UITapGestureRecognizer`在`UIIMageView`. 我的方法可以在下面找到。

的实例`MenuButtonImageView`是 的子视图`homeScreenViewController.view`。

我也实施了`touchesBegan:withEvent:`，`touchesMoved:withEvent:`而且`touchesEnded:withEvent:`工作正常。

**问题**：不知何故`handleSingleFingeredTap:`从未被调用。这可能是什么问题？

```
@interface MenuButtonImageView : UIImageView

@property (nonatomic, weak) IBOutlet HomescreenViewController *homeScreenViewController;
@property (nonatomic, readwrite) Visibility visibility;

- (void)handleSingleFingeredTap:(UITapGestureRecognizer *)recognizer;

@end

@implementation MenuButtonImageView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.visibility = HIDDEN;
        self.userInteractionEnabled = YES;
        UITapGestureRecognizer * singleFingeredTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleFingeredTap:)];
        singleFingeredTap.numberOfTapsRequired = 1;
        [self addGestureRecognizer:singleFingeredTap];
    }
    return self;
}

- (void)handleSingleFingeredTap:(UITapGestureRecognizer *)recognizer {
    NSLog(@"handleTap was called"); // This method is not called!
    [self toggleMainMenu];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { ... }
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event { ... }
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event { ... }

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:21:52.307

`initWithFrame`您在方法中添加识别器。检查您的视图是否以这种方式初始化。它可能是用另一个构造函数创建的`initWithCoder`，然后你的代码不会被执行。在方法中放置一个断点`initWithFrame`以找出答案。

您可以将代码放在单独的方法中，并从两个构造函数中调用它。这取决于你如何使用它。当`initWithFrame`您从代码创建视图时，使用非常普遍。

# openssl - Openssl 证书请求失败

> ID：12201927
> 
> 赞同：14
> 
> 时间：2012-08-30T17:01:36.717
> 
> 标签：openssl

我想用 openssl 创建证书请求。我必须在主题中的电子邮件字段名称中使用“E”。所以我尝试了以下命令：

```
openssl req -new -key privkey.pem -subj "/E=example@example.org" -out request.pem 
```

作为回应，我得到：

```
Subject Attribute E has no known NID, skipped 
```

正如它所说的那样。如果我向主题添加更多参数，则会添加它们，但会跳过电子邮件。

我试过谷歌，同样的错误信息出现了好几次，但我没有找到解决办法。

我已经尝试过 openssl 0.9.8o 和 1.0.1c。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-08-18T01:00:58.013

您要查找的简称是“emailAddress”，而不是“E”。这有效：

```
openssl req -new -key privkey.pem -subj "/emailAddress=example@example.org" -out request.pem 
```

# python - open() 给出 FileNotFoundError/IOError: Errno 2 No such file or directory

> ID：12201928
> 
> 赞同：98
> 
> 时间：2012-08-30T17:01:39.867
> 
> 标签：python, file, file-io, filenotfoundexception, file-not-found

出于某种原因，我的代码无法打开一个简单的文件：

这是代码：

```
file1 = open('recentlyUpdated.yaml') 
```

错误是：

```
IOError: [Errno 2] No such file or directory: 'recentlyUpdated.yaml' 
```

*   当然，我检查了这是文件的正确名称。
*   我试过移动文件，给出文件`open()`的完整路径，但似乎都不起作用。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-30T17:03:23.360

*   确保文件存在：用于`os.listdir()`查看当前工作目录中的文件列表
*   确保你在你认为你所在的目录中`os.getcwd()`（如果你从 IDE 启动你的代码，你很可能在不同的目录中）
*   然后，您可以：
    *   调用`os.chdir(dir)`，`dir`作为文件所在的文件夹，然后像以前一样使用文件名打开文件。
    *   `open`在调用中指定文件的绝对路径。
*   如果您的路径使用反斜杠，请记住使用原始字符串，如下所示：`dir = r'C:\Python32'`
    *   如果您不使用原始字符串，则必须转义每个反斜杠：`'C:\\User\\Bob\\...'`
    *   正斜杠也适用于 Windows `'C:/Python32'`，不需要转义。

让我澄清一下 Python 是如何查找文件的：

*   **绝对路径**是以计算机的根目录开头的路径，例如，如果`C:\Python\scripts`您使用的是 Windows。
*   **相对路径**是不以计算机的根目录开头的路径，而是相对于称为**工作目录**的东西的路径。你可以通过调用来查看 Python 的当前工作目录`os.getcwd()`。

如果你尝试这样做`open('sortedLists.yaml')`，Python 会看到你传递给它一个相对路径，所以它会在当前工作目录中搜索文件。

调用`os.chdir()`将更改当前工作目录。

示例：假设`file.txt`在`C:\Folder`.

要打开它，您可以执行以下操作：

```
os.chdir(r'C:\Folder')
open('file.txt') # relative path, looks inside the current working directory 
```

或者

```
open(r'C:\Folder\file.txt') # absolute path 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-09-08T22:39:52.963

最有可能的问题是您使用[相对文件路径](https://en.wikipedia.org/wiki/Path_%28computing%29#Absolute_and_relative_paths)来打开文件，但[当前工作目录](https://en.wikipedia.org/wiki/Working_directory)未设置为您认为的那样。

相对路径相对于 python 脚本的位置是一个常见的误解，但这是不正确的。相对文件路径总是相对于当前工作目录，并且当前工作目录不一定是你的 python 脚本的位置。

你有三个选择：

*   **使用绝对路径打开文件：**

    ```
    file = open(r'C:\path\to\your\file.yaml') 
    ```

*   **生成相对于您的 python 脚本的文件路径：**

    ```
    from pathlib import Path

    script_location = Path(__file__).absolute().parent
    file_location = script_location / 'file.yaml'
    file = file_location.open() 
    ```

    （另请参阅：[如何获取当前正在执行的文件的路径和名称？](https://stackoverflow.com/questions/50499/how-do-i-get-the-path-and-name-of-the-file-that-is-currently-executing)）

*   **在打开文件之前更改当前工作目录：**

    ```
    import os

    os.chdir(r'C:\path\to\your\file')
    file = open('file.yaml') 
    ```

* * *

其他可能导致“找不到文件”错误的常见错误包括：

*   **在文件路径中意外使用转义序列：**

    ```
    path = 'C:\Users\newton\file.yaml'
    # Incorrect! The '\n' in 'Users\newton' is a line break character! 
    ```

    为避免犯此错误，请记住对文件路径使用[原始字符串文字：](https://stackoverflow.com/questions/2081640/what-exactly-do-u-and-r-string-flags-do-and-what-are-raw-string-literals)

    ```
    path = r'C:\Users\newton\file.yaml'
    # Correct! 
    ```

    （另请参阅：[Python 中的 Windows 路径](https://stackoverflow.com/questions/2953834/windows-path-in-python)）

*   **忘记 Windows 不显示文件扩展名：**

    由于 Windows 不显示已知的文件扩展名，因此有时当您认为您的文件名为`file.yaml`时，它实际上是名为`file.yaml.yaml`. 仔细检查文件的扩展名。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-30T17:07:30.347

该文件可能存在，但可能具有不同的路径。尝试编写文件的绝对路径。

尝试`os.listdir()`使用函数来检查至少 python 是否可以看到该文件。

试试这样：

```
file1 = open(r'Drive:\Dir\recentlyUpdated.yaml') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-15T09:46:57.257

可能，您关闭了“file1”。
只需使用 'w' 标志，即创建新文件：

```
file1 = open('recentlyUpdated.yaml', 'w') 
```

> ***mode***是一个可选字符串，它指定打开文件的模式。它默认为“r”，表示以文本模式打开以供阅读。其他常用值是 'w' 用于写入（如果文件已经存在，则截断文件）......

（另见[https://docs.python.org/3/library/functions.html?highlight=open#open](https://docs.python.org/3/library/functions.html?highlight=open#open)）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-28T11:56:03.627

如果是 VSCode，请查看工作区。如果您在其他工作区，此错误可能会上升

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-03T20:08:53.923

检查已经提到的路径，是绝对的还是相对的。

如果它类似于--> `/folder/subfolder/file` --> 计算机将在根目录中搜索文件夹。

如果它类似于--> `./folder/subfolder/file`--> 计算机将在当前工作目录中搜索文件夹。

# javascript - 在Javascript中将字符串转换为函数

> ID：12201933
> 
> 赞同：2
> 
> 时间：2012-08-30T17:02:03.207
> 
> 标签：javascript, function

我在从字符串创建新函数时遇到了一点问题。示例：我有一个 div 和一些按钮。其中一个按钮只是让我的 div 动画，没有别的。但是另一个按钮使 div 动画，动画完成后，调用一个新函数。

我必须将新的跟随函数作为变量处理，因为在 div 动画之后我必须调用很多函数。

这是我做的一个例子：http: [//jsfiddle.net/AmVSq/3/](http://jsfiddle.net/AmVSq/3/)。我希望你能理解我的问题。

我`new Function();`在 JavaScript 中找到了，但它让我感到怀疑，并且 JS 控制台没有记录任何内容。

有人可以告诉我我做错了什么吗？非常感谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:06:51.657

在 JavaScript 中，函数是“第一类”对象。这意味着您可以将它们分配给变量并将它们作为参数传递给其他函数。

当您可以传递函数名称本身时，无需从字符串创建函数，如下所示：

```
<div><a href="javascript:void(0)" onclick="close_div( alert_me );">Close Div then do something</a></div> 
```

和脚本：

```
function close_div( next_function ) {
    $('#wrap').animate({ 'height': '-=100px' }, 300, function() {
        if ( next_function ) {
            // do the following function
            next_function();
        }
    });
} 
```

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/AmVSq/5/)

实际上，出于您的目的，您可以直接传递`next_function`给`animate`函数，如下所示：

```
function close_div( next_function ) {
    $('#wrap').animate({ 'height': '-=100px' }, 300, next_function);
} 
```

无需检查 if `next_function`is `undefined`，因为`.animate`它会为您执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:05:03.417

你做错的是使用`new Function`。正确的方法是只传递函数，它们是 JavaScript 中的其他对象：

[http://jsfiddle.net/minitech/AmVSq/6/](http://jsfiddle.net/minitech/AmVSq/6/)

```
<div><a href="javascript:void(0)" onclick="close_div();">Close Div</a></div>
<div><a href="javascript:void(0)" onclick="close_div(alert_me);">Close Div then do something</a></div>
<div><a href="javascript:void(0)" onclick="close_div(confirm_me);">Close Div then do another thing</a></div>
<div id="wrap"></div>​ 
```

```
function close_div( next_function ) {
    $('#wrap').animate({ 'height': '-=100px' }, 300, function() {
        if(next_function) {
            next_function();
        }
    });
}

function alert_me() {
    alert( 'The animation is complete' );
}

function confirm_me() {
    confirm('Are you sure?');
} 
```

或者，更简洁地说，`$('#wrap').animate({height: '-100px'}, 300, next_function);`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:04:32.137

chrome 控制台正确显示结果：

```
> f = new Function("alert('hello');");
function anonymous() {
  alert('hello');
}
> f(); //executes it. 
```

但是使用字符串来创建函数，或者将字符串传递给函数来执行它是非常糟糕的做法。

```
function test(callback) {
    callback();
}

test(function() { alert("hello"); }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:04:56.953

您不需要将函数转换为字符串，您可以将函数作为参数传递给 Javascript 中的其他函数。

例如：

```
function get_message1() {
    return "hello world";
}

function get_message2() {
    return "yay for first-class functions";
}

function print_message(message_func) {
    console.log(message_func())
}

print_message(get_message1);
print_message(get_message2); 
```

# gps - 智能手机网页将用户的 GPS 坐标发送到服务器

> ID：12201934
> 
> 赞同：1
> 
> 时间：2012-08-30T17:02:10.553
> 
> 标签：gps, webrequest, smartphone

我是几年前的前专业开发人员（VB.NET 和老派 ASP），但现在我拥有一所驾驶学校已经有几年了，所以我的技能有点过时了，但对我的需求仍然有用。对于我的驾校业务，我创建了一个调度应用程序。这是一个winforms应用程序。它当然会填充一个数据库，网页使用该数据库来显示任何教师的每日日程安排。教师在他们的智能手机上查看他们的日程安排。我刚才描述的一切要么已经有效，要么很快就会有效。

在智能手机网页中（我将其错误地称为“应用程序”，因为我希望它与大多数智能手机兼容）我想为教师添加“签到”到每个约会的功能，然后添加到“每次约会后通过单击（“触摸”）页面上的某处“结帐”。

“签入或签出”操作将提交一个网页请求，该请求将向我的数据库发送一条记录，其中包括：一天中的时间、讲师 ID 和智能手机的 GPS 坐标。

目的：可以从这些数据中生成报告，显示教师是否准时上课，并确认他们没有提前完成课程，并进一步确认当他们“签到”时，他们在学生的一定距离内屋。（这可以防止他们在途中但仍然很远的时候“假登记”。）因此，我可以确认我的员工按时提供约会，并提供适当长度的课程，而无需在我的设备中安装 GPS 跟踪设备汽车。（那些东西很贵！）

最后是我的问题：我不知道网页如何获取智能手机当前的 GPS 坐标，以便将它们包含在后续的网络请求中。例如，可以在提交 Web 请求之前使用经度/纬度填充隐藏字段。如果可行的话，Javascript 是一种可接受的方法。我更喜欢一种适用于尽可能多的智能手机的方法。智能手机上的网页可以获取这些数据吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-29T10:56:40.743

使用我的现代浏览器支持的 HTML5 地理位置。通过 javascript 使用 navigator.geolocation 属性，然后通过隐藏字段、ajax 或任何您喜欢的方式发送其坐标。您可以在浏览器控制台中检查它是如何工作的：

```
navigator.geolocation.getCurrentPosition(function(position) { 
  alert(position.coords.longitude)
}) 
```

在此处查看更多信息[http://www.w3schools.com/html/html5_geolocation.asp](http://www.w3schools.com/html/html5_geolocation.asp)

# bash - 在 BASH 中编辑条件

> ID：12201936
> 
> 赞同：0
> 
> 时间：2012-08-30T17:02:14.470
> 
> 标签：bash

为什么在这种情况下不起作用？

```
if [ -d /home/virt -a $(ls -A /home/virt/) = 0 ] 
```

存在目录 /home/virt 并检查目录是否为 /home/virt/ 为空

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:17:47.313

```
if [ -d $1 -a $(ls -A $1 | wc -l) == 0 ]; then
  echo EMPTY
fi 
```

# groovy - jenkins groovy 脚本检查构建是否被标记

> ID：12201937
> 
> 赞同：0
> 
> 时间：2012-08-30T17:02:21.820
> 
> 标签：groovy, tags, jenkins, tagging, post-build

在 groovy 中如何检查特定构建是否被标记？我正在使用此信息将构建标记为“永久保留”。

我正在使用这个脚本来构建一个特定的工作：

```
item=hudson.model.Hudson.instance.getItem("Build")
//build = item.getLastBuild()   
builds = item.getBuilds()   
//println build.getTime()
abcd=""
  builds.each { result=it.getResult().toString().equals("SUCCESS") 
    if (it.getResult().toString().equals("SUCCESS"))
    {
        abcd+= it.getNumber() +","
        }
    println it.isKeepLog()
  }

println abcd[0..-2] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T11:40:12.547

查看此页面：[Jenkins Javadocs](http://javadoc.jenkins-ci.org/hudson/scm/SubversionTagAction.html#isTagged%28%29)，我认为您应该能够在工作/运行中调用“.isTagged()”。我的 groovy 控制台目前无法正常工作，所以我无法对其进行测试......

如果你得到它的工作，请分享结果！

# c# - 如何在 XAML 中设置从文件加载的 ComboBox DataContext？

> ID：12201939
> 
> 赞同：1
> 
> 时间：2012-08-30T17:02:35.213
> 
> 标签：c#, wpf, xaml, data-binding, combobox

我正在尝试理解 Binding，所以我想出了一个非常简单的程序来尝试和测试它。

我的 MainWindow 中有以下元素：

```
<ComboBox Name="comboBox1" ItemsSource="{Binding ComboItems}" /> 
```

在我的代码中，我有以下可观察的集合：

```
private readonly ObservableCollection<string> comboItems = 
    new ObservableCollection<string>();
public ObservableCollection<string> ComboItems
{
    get {return comboItems; }
} 
```

只要组合框从一开始就位于 MainWindow XAML 中，我就可以在运行时的任何时候以这种方式成功添加项目：

```
ComboItems.Clear();
ComboItems.Add("Item"); 
```

我的问题是，如果我从文件中加载它，如何让这个 ComboBox 更新？我有以下代码来保存和加载文件：

```
File.WriteAllText("ComboBox.xaml", saveComboBox) 
```

这只是我保存的最后一行，我还有其他项目似乎对本次讨论无关紧要。

```
ComboBox comboBox = System.Windows.Markup.Xamlreader.Load(stream) as ComboBox; 
```

这成功保存并加载了我的组合框。我现在遇到的问题是代码：

```
ComboItems.Clear();
ComboItems.Add("Item"); 
```

不再工作。我正在尝试为我将要做的一个新项目学习数据绑定。这个项目需要为用户界面加载 xaml 文件，我需要在加载后填充 ComboBox。

解决这个问题的最简单和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:05:53.493

我不知道是否`XamlReader`会保留绑定，阅读文档，它有限制。无论如何，我不建议这样做。如果绑定消失了，您*可以*在代码中创建一个新的绑定，当然这部分违背了保存它的目的。

# excel - 将范围从一个工作簿复制到另一个工作簿

> ID：12201941
> 
> 赞同：0
> 
> 时间：2012-08-30T17:02:39.243
> 
> 标签：excel, vba

有人可以帮我解决这个问题吗：

我在 workbook1 中有一个宏。我要做的是

'打开workbook2.txt

```
Workbooks.OpenText filename:= _
    "workbook2.txt", Origin:=437, StartRow _
    :=1, DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _
    ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=False, Comma:=True _
    , Space:=False, Other:=False, FieldInfo:=Array(Array(1, 1), Array(2, 1), _
    Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), Array(7, 1), Array(8, 1), Array(9, 1), _
    Array(10, 1), Array(11, 1), Array(12, 1), Array(13, 1), Array(14, 1), Array(15, 1)), _
    TrailingMinusNumbers:=True

' copy a range
Dim test As Range
Set test= Range("G971:M1000")

'close workbook2
 Workbooks("workbook2").Close

'copy test in workbook1
 Windows("workbook1.xlsm").Activate
Sheets("Sheet1").Select
Range("B3").Select
Selection.PasteSpecial Paste:=test, Operation:=xlNone, SkipBlanks _
     :=False, Transpose:=False 
```

这会导致运行时错误 1004。

这将是非常好的人来帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:59:16.237

您必须先复制范围才能粘贴它。你需要的是

`test.Copy`行后`Set test= Range("G971:M1000")`

也关于`Paste:=test`. 这是不正确的。

这`Paste`是一个可选参数，它采用这些值中的任何一个。我建议您查看 Excel 的帮助`PasteSpecial`

```
xlPasteAll
xlPasteAllExceptBorders
xlPasteAllMergingConditionalFormats
xlPasteAllUsingSourceTheme
xlPasteColumnWidths
xlPasteComments
xlPasteFormats
xlPasteFormulas
xlPasteFormulasAndNumberFormats
xlPasteValidation
xlPasteValues
xlPasteValuesAndNumberFormats 
```

用这个

```
bSource.Sheets("Sheet1").Range("B3").PasteSpecial Paste:=xlPasteValues, _
Operation:=xlNone, SkipBlanks:=False, Transpose:=False 
```

# sql - SqlDbType.Date SQL Server 2005

> ID：12201943
> 
> 赞同：2
> 
> 时间：2012-08-30T17:02:45.030
> 
> 标签：sql, sql-server-2008, sql-server-2005, sqlclient, sqldbtype

我有这样的财产：

```
private SqlParameter DateOfBirthSqlParameter
{
    get
    {
        return new SqlParameter("@date", SqlDbType.Date)
            {
                Value = dateOfBirth.ToString("MM/dd/yyyy");
            };
    }
} 
```

`dateOfBirth`是`DataTime`C# 类型。我使用此参数添加到我的 SQL 命令中，如下所示。

```
Select * From mytable Where dob_dt = @date 
```

问题是这在 SQL Server 2005 中不起作用。我遇到了一个异常：

> *System.ArgumentException：正在使用的 SQL Server 版本不支持数据类型“日期”*

这是因为 SQL Server 2005 不支持`Date`，这是更高版本（SQL Server **2008**）的一个特性。

有很多解决方案，例如更改`SqlDbType.Date`为`SqlDbType.DateTime`

我猜这个参考`System.Data`是一个提供 SQL Server 2008 支持的所有功能的版本。我应该把它改成只支持 2005 的东西吗？这将有助于发现其他可能的不匹配？处理这种情况的最佳方法是什么？

谢谢。

**更新：2012 年 8 月 31 日**

在示例中，我使用了出生日期，但在我的应用程序中，我使用了其他东西，例如 purchase_dt 或类似的东西（上面有时间）。我的第一个 Select 语句是：

```
Select * From mytable Where Cast(purchase_dt as Date) = @date 
```

这在我的装有 SQL Server **2008**的电脑上很好，在另一台装有 SQL Server **2005**的电脑上也很好，只是在选择时抛出异常。

但是，一旦我解决了这个问题，使用：

```
Select * From mytable Where Cast(DATEDIFF(dd, 0, purchase_dt) as DateTime) = @date 
```

这破坏了整个 Web 应用程序（在另一台 PC 中）......问题是`SqlDbType.Date`. 但为什么它之前没有打破它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T08:10:20.480

```
private SqlParameter DateOfBirthSqlParameter
{
    get
    {
        return new SqlParameter("@date", SqlDbType.DateTime)
            {
                Value = dateOfBirth.ToString("MM/dd/yyyy");
            };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T11:52:29.700

`DATE`SQL Server 2005 不支持 数据类型， `DATE`SQL Server 2008 版本支持类型。相反，您可以使用`datetime`或`smalldate`

# python - 网站 - 在整个页面加载后加载数据密集型内容

> ID：12201954
> 
> 赞同：0
> 
> 时间：2012-08-30T17:03:29.207
> 
> 标签：python, html, google-app-engine, web

我会直接进入它。我所拥有的是一个需要一段时间才能加载的 div，因为它涉及调用 API 和索引内容。与页面的其余部分相比，div 本身的加载时间要长得多。我想做的是加载整个页面，然后在获取数据后，它会自行加载 div。发生这种情况时，可能会像加载动画一样放置。我只是想知道实现这一目标的最佳方法是什么。

我不确定这是否与这个问题相关，但我在 Python 环境中使用 Google App Engine。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:11:46.277

在 DOM 加载后开始获取数据。

```
<html>

    <body>
    </body>

    //load data here !

</html> 
```

或者，您可以在 DOM 元素加载后使用 jQuery DOM Ready 事件来加载数据：

```
<html>

        <script>
            $(document).ready(function() {
                // DOM is loaded, get data here
            });
        </script>

        <body>
        </body>

    </html> 
```

# java - 错误的maven编译错误（在eclipse中工作）

> ID：12201972
> 
> 赞同：5
> 
> 时间：2012-08-30T17:04:39.530
> 
> 标签：java, maven

当我使用 maven 编译但在 eclipse 中工作时出现编译错误。两者都使用相同的JDK：

```
java -version
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01, mixed mode)

mvn -version
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.6.0_35, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/jdk1.6.0_35/jre
Default locale: es_ES, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-29-generic", arch: "amd64", family: "unix" 
```

这是错误：

```
[ERROR] /blablabla.../myClass.java:    [78,107] inconvertible types
[ERROR] found   : java.util.Collection<java.lang.Object>
[ERROR] required: java.util.Collection<? extends org.springframework.integration.store.MessageGroup>
[ERROR] -> [Help 1] 
```

这是代码（eclipse中没有编译错误）：

```
Collection<? extends MessageGroup> collection = (Collection<? extends MessageGroup>) this.groupMap.values(); 
```

我知道这是一个非常递归的问题，我发现一些帖子问同样的问题，但似乎没有人有标准的修复。有人说这适用于不同的JDK版本。我已经用 1.6.0_30、1.6.0_31、1.6.0_32 和 1.6.0_35 进行了测试，但都失败了。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T17:08:09.473

我怀疑eclipse没有使用你认为的JDK。尝试使用类型擦除。

```
Collection<? extends MessageGroup> collection = 
        (Collection<? extends MessageGroup>)
                (Collection) this.groupMap.values(); 
```

# wcf - 如何将 angularJS 与 WCF 结果一起使用

> ID：12201980
> 
> 赞同：2
> 
> 时间：2012-08-30T17:05:30.040
> 
> 标签：wcf, angularjs

我有一个 WCF 服务定义如下，我知道它正在工作（产生有效结果）：

```
[ServiceContract(Namespace="XXX.CES.Applet")]
public interface IAppletService
{
    [OperationContract(Action = "GetDefinitionJSON")]
    [WebGet(UriTemplate = "/GetDefinitionJSON?request={jsonRequest}", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string GetAppletDefinitionJSON(string jsonRequest);
} 
```

我定义了以下控制器，可以使用 FireBug 验证它是否到达服务并且响应是我期望的（JSON 字符串）：

```
angular.module('Applet',['ngResource']);
function AppletController($scope,$resource) {
  $scope.url = 'http://localhost/CESAppletService/AppletService.svc/:action';
  $scope.appletRequest =
  {
    AppletName: 'FPTotalForgeTime',
    ModelName: 'CES_ProtoType_Rings_Model',
    EntityName: 'ForgeWCTimes_ForgeTimeTotal',
    EntityType: 'Decimal',
    Value: ''
  };
  $scope.getDefinition = $resource($scope.url,
    {action:'GetDefinitionJSON',request:angular.toJson($scope.appletRequest),callback:'JSON_CALLBACK'});
  $scope.AppletInputs = $scope.getDefinition.get();
} 
```

当我在 FireBug 中查看生成的 $scope.AppletInputs 或通过在页面中呈现它们时，该对象如下所示（仅部分）：

""" 1 "{" 2 "\" 3 """ 4 "A" 5 "p" 6 "p" 7 "l" 8 "e" 9 "t" 10 "I" 11 "n" 12 "p " 13 "u" 14 "t" 15 "s" 16 "\" 17 """ 18

实际服务结果为：

```
"{\"AppletInputs\":[{\"AllowedValues\":  [],\"EntityName\":\"Forge_OD\",\"InputLabel\":\"OD\",\"InputType\":\"Decimal\",\"Value\":null},{\"AllowedValues\":[],\"EntityName\":\"Forge_ID\",\"InputLabel\":\"ID\",\"InputType\":\"Decimal\",\"Value\":null},{\"AllowedValues\":[],\"EntityName\":\"Forge_Face\",\"InputLabel\":\"Face\",\"InputType\":\"Decimal\",\"Value\":null},{\"AllowedValues\":[\"G43400XXX\",\"S30403XXX\",\"S31603XXX\",\"N06625XXX\",\"A96061XXX\",\"G43400GE2\",\"E16587M01\"],\"EntityName\":\"MaterialGrade\",\"InputLabel\":\"Grade\",\"InputType\":\"List\",\"Value\":null}],\"AppletName\":\"FPTotalForgeTime\",\"AppletType\":\"Decimal\",\"AppletVersion\":\"\",\"EntityName\":\"ForgeWCTimes_ForgeTimeTotal\",\"ModelName\":\"CES_Prototype_Rings_Model\"}" 
```

我做错了什么，我该如何解决？我真的很想在这个项目中使用 Angular，但这是在吃我的午餐。

# vb.net - 保留用户设置

> ID：12201981
> 
> 赞同：0
> 
> 时间：2012-08-30T17:05:34.753
> 
> 标签：vb.net, visual-studio-2010

我需要在他第一次打开应用程序时保存用户的数据并且不再显示它。

假设我需要用户输入他的名字和其他数据，并将其保存以便应用程序以后可以使用它。用户输入他的名字，并且下次他打开应用程序时，他不会被要求再次输入他的名字。该应用程序只是进入主屏幕。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:13:49.463

您可以使用应用程序设置。打开项目的属性（解决方案资源管理器中的“我的项目”），转到“设置”选项卡，然后进行设置。我假设你叫它`FirstName`。保持一切原样（用户设置，字符串）并保存。

现在您可以像使用任何其他属性一样使用此设置，但它会在运行之间持续存在。`My.Settings`您可以在类中找到该属性。第一次设置：

```
My.Settings.FirstName = userFirstName 
```

以后要使用它，它只是`My.Settings.FirstName`.

# c# - 如何格式化 DateTime 以在 Razor 生成的视图中简单地显示为一天中的时间？

> ID：12201986
> 
> 赞同：1
> 
> 时间：2012-08-30T17:06:19.103
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, datetime, razor

我在以下代码中提供了位于 model.StartDate 的完整日期时间：

```
@Html.DisplayFor(model => model.StartDate.ToString("hh:mm tt"),
CultureInfo.CreateSpecificCulture("hu-HU")); 
```

我的目标是获取完整的 DateTime

```
8/30/2012 11:33:48 AM 
```

并且只显示

```
11:33:48 AM 
```

但是，我收到以下错误：

```
Templates can be used only with field access, property access,
single-dimension array index, or single-parameter custom indexer expressions. 
```

为什么会发生此错误？

* * *

注意：我参考了这个文档来为我的 DateTime 格式化我的 .ToString：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:15:28.657

您可以在模型类上放置一个 DataAnnotation。像这样的东西-> [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:07:35.997

在您的模型上创建一个返回格式化日期的新属性。

```
public class MyModel
{
    // Other fields including your current StartDate

    public class StartDateFormatted
    {
        get 
        { 
            return StartDate.ToString("hh:mm tt"), 
               CultureInfo.CreateSpecificCulture("hu-HU"));
        }
    }
} 
```

然后在 Razor 标记中使用该属性

```
@Html.DisplayFor(model => model.StartDateFormatted); 
```

# eclipse - eclipse 和 tomcat - 无法加载 tomcat 服务器配置

> ID：12201987
> 
> 赞同：0
> 
> 时间：2012-08-30T17:06:28.150
> 
> 标签：eclipse, spring, jakarta-ee, tomcat, web

我尝试通过tomcat运行spring MVC应用程序。我附加到preferences_> server tomcat。但是当我开始`Run On Server`下一步时，我按下完成按钮。而且我看到`couldn't load tomcat server configuration at /Servers/Tomcat v6.0 server at localhost-config. The configuration may by corrupt or incomplete.`项目必须很好，因为它是通过 Spring Tools 从模板生成的示例项目。怎么修？

# php - 更改 Magento 索引全文搜索？

> ID：12201991
> 
> 赞同：0
> 
> 时间：2012-08-30T17:06:43.967
> 
> 标签：php, xml, magento, indexing, full-text-search

我有一个独特的任务，我已经完成了，但这个子任务被证明是非常困难的！所以你有背景：我们运行一个 Magento 站点，并使用自定义构建的 SOLR 搜索页面。我正在使用 phpSolrClient 来解析 Solr XML 并返回可用的结果，然后我从中构建搜索结果页面。

我被赋予的任务是在 Magento 的后端有一个“属性”，我们称之为“search_tags”。目标是能够插入一个标签，它的权重由逗号分隔：

IE`sight^2,hearing^1,smell^3`

我想编辑 Magento 全文重新索引中的代码以分解字符串，并将该标签 X 次插入该`fulltext1_en`字段中。所以它会增加两次“视觉”，一次“听觉”，以及三次“嗅觉”。这将允许我们说，当有人搜索榨汁机时，在页面上放置一个搅拌机，即使“榨汁机”或“果汁”一词没有出现在 fulltext1_en 字符串中。我已经开发了用于拉取、拆分和迭代的代码......但是我处于停滞状态，因为我不知道在重新索引过程中要编辑哪些代码以将其包含在我的 fulltext1_en 中。如果有人对编辑 Magento 的全文重新索引有任何经验，我们将不胜感激！我查看了 Indexer.php，但该文件中的所有内容充其量都是模棱两可的， 所以这无济于事！一定要爱Magento！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:13:16.447

好的，对于那些希望使用 SOLR 在 Magento 中更改并为自定义搜索提供“加权标签”的人来说，我整晚都在做正确的事情，但它确实有效......

首先，在 Magento 中创建一个过滤器并将其应用于所有产品。我将我的命名为“search_tags”。

接下来，在该过滤器中对测试项目使用以下公式：

```
dude^25,crazyman^25,wierdsearch^25 
```

每个单词后面跟着一个克拉，然后是你想给它的重量。（这是单词将重复多少次，然后添加到 fulltext1_en。）

完成后，打开以下文件：

```
/app/code/core/Mage/CatalogSearch/Model/Mysql4/Fulltext.php 
```

我知道它说MySQL4，不用注意，SOLR 使用这个索引。

关于第 500 行，您将看到以下代码块：

```
 if ($selects) {
        $select = '('.join(')UNION(', $selects).')';
        $query = $this->_getWriteAdapter()->query($select);
        while ($row = $query->fetch()) { 
```

在此块下方插入以下内容： 注意：不要使用我在此处列出的属性 ID，这是我的设置所独有的。您将不得不搜索您的数据库以找到此 ID。我使用 JOIN 来加入`eav_attributes`并`catalog_product_entity_varchar`使用 SELECT 来查找`attribut_id`和`value`WHERE entity_id =（在此处插入您的产品 ID）。这是一种痛苦，但这是唯一的方法。这将返回该产品的所有属性。查找具有我们之前输入的标签的标签，并获取它的 ID。将其插入下面的代码中。

```
 $attr_val = $row['value'];  // Set attr_val so that it can be manipulated in following IF

      if ($row['attribute_id'] == 457) {    // 457 is the ID of MY search_tags filter, yours WILL be different!  It can be found by joining eav_attributes table and catalog_product_entity_varchar and searching for the attribute value and ID where entity_id is X
            $input = $row['value'];             // Set $input to value of filter
            $attr_val = "";                         // Create Emtpy string
            $pieces = explode( ',', $input ); // Explode filter by comma

                foreach ($pieces as $val){
                $i=1;
                $val = explode( '^', $val);    // Explode each "tag" by carat
                    while ($i <= $val[1]) {     // Loop while $i is less than or equal to the number on the right side of the carat
                    $i++;
                    $attr_val = $attr_val . " " . $val[0];  // Append $attr_val with the word to the right side of the carat
                    }                   
                }                       
         }

    $result[$row['entity_id']][$row['attribute_id']] = $attr_val;  //  Modified from Original 
```

插入之后...然后注释掉以下块。

```
$result[$row['entity_id']][$row['attribute_id']] = $row['value']; // ORIGINAL BLOCK  --  UNCOMMENT -- DO NOT DELETE 
```

现在运行全文重新索引，您的 fulltext1_en 应该显示您已添加“dude”、“crazyman”和“weirdsearch”所​​有 25 次！索引完成后，在您的站点搜索中搜索任何标签：您添加标签的项目应该显示在靠近顶部（如果不是顶部）的位置。享受！

# mysql - MySQL查询每个用户的最新记录

> ID：12201992
> 
> 赞同：1
> 
> 时间：2012-08-30T17:06:45.903
> 
> 标签：mysql

我有一个看起来像的表：

```
id_primary, id_user, amount, date 
```

如果我的条目看起来像：

```
1, 1, 5, 2012-01-05
2, 1, 8, 2012-01-15
3, 1, 17, 2012-03-30
4, 2, 3, 2012-01-18
5, 2, 9.5, 2012-01-31 
```

我已经尝试了多个查询来获取每个 id_user 的最新结果（按时间顺序），但是无论如何我似乎都可以获得第一行。例如，我希望从这个示例表中得到的是：

```
3, 1, 17, 2012-03-30
5, 2, 9.5, 2012-01-31 
```

我最近的尝试是这样的：

```
SELECT a.* FROM table a GROUP BY a.id_user HAVING MAX(a.date) 
```

我怎样才能解决这个问题？我是否需要以某种方式使用嵌套查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:10:08.553

您可以使用子查询`MAX()`按用户获取日期

```
select t1.id_primary,
  t1.id_user,
  t1.amount,
  t2.maxdate
from yourtable t1
inner join
(
  select max(date) maxdate, id_user
  from yourtable
  group by id_user
) t2
  on t1.id_user = t2.id_user
  and t1.date = t2.maxdate 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/4c405/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:26:41.143

我 100% 同意[@bluefeet 的回答](https://stackoverflow.com/a/12202041/623041)（+1 顺便说一句），但在 MySQL 中可以缩写如下：

```
SELECT yourtable.* FROM yourtable NATURAL JOIN (
  SELECT id_user, MAX(date) date FROM yourtable GROUP BY id_user
) t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/eaa7b/1/0)上查看。

供您参考，这称为[groupwise maximum](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:34:01.023

这是我针对类似情况的声明 $sql = "SELECT INDICADOR_IDIOMA FROM INDICADOR where INDICADOR_PK=(SELECT max(INDICADOR_PK) FROM INDICADOR WHERE INDICADOR_USUARIO=$pkUser)";

# javascript - 使用 JQueryMobile 时 2-3 秒延迟加载页面

> ID：12201995
> 
> 赞同：2
> 
> 时间：2012-08-30T17:06:52.657
> 
> 标签：javascript, jquery, jquery-mobile, uiwebview

我发现如果我在 iOS 中加载网页，那么如果该页面使用 JQueryMobile，则初始加载需要大约 2 到 3 秒的时间。例如，以下页面几乎是瞬间加载的：

```
<!DOCTYPE>
<html>
    <head>
        <title>Hello</title>
    </head>
    <body>
        <h1>Hello</h1>
    </body>
</html> 
```

然而，这个需要几秒钟才能加载：

```
<!DOCTYPE>
<html>
    <head>
    <title>Hello</title>
        <link rel="stylesheet"  href="jquery.mobile-1.1.1.min.css" />
        <script src="jquery-1.7.2.min.js"></script>
        <script src="jquery.mobile-1.1.1.min.js"></script>
    </head>
    <body>
        <h1>Hello</h1>
    </body>
</html> 
```

我能做些什么来摆脱这种延迟吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:08:45.013

如果是脚本耗时过长，您可以将它们移至页面底部：

```
<!DOCTYPE html>
<html>
    <head>
    <title>Hello</title>
        <link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />
    </head>
    <body>
        <h1>Hello</h1>
        <script src="jquery-1.7.2.min.js"></script>
        <script src="jquery.mobile-1.1.1.min.js"></script>
    </body>
</html> 
```

再说一次，这样做会使准确预测会发生什么以及何时发生变得更加困难。但是 DOM 应该在阻塞脚本标签加载之前加载和渲染。

现在你只需要弄清楚如何处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:09:51.817

尝试将JS放在底部

```
<!DOCTYPE>
<html>
    <head>
    <title>Hello</title>
        <link rel="stylesheet"  href="jquery.mobile-1.1.1.min.css" />

    </head>
    <body>
        <h1>Hello</h1>
            <script src="jquery-1.7.2.min.js"></script>
        <script src="jquery.mobile-1.1.1.min.js"></script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:10:50.340

jQueryMobile的[响应能力](http://blog.roveb.com/post/17259708005/our-experience-with-jquery-mobile-and-sencha-touch)[并不那么](http://operationproject.com/2011/adventures-in-html5-part-one/#.UD-euVZ279U)出名。即使在您尝试了所有优化之后。

您可以尝试通过加载脚本`document.createElement()`。（理想情况下，即使这也应该放在底部）

```
function createScript(src){
   var script = document.createElement('script');
   script.src = src;
   document.getElementsByTagName('head')[0].appendChild(script);
} 
```

这实际上是在页面呈现后才开始加载和执行脚本。即有点[异步](https://stackoverflow.com/questions/3248384/document-createelementscript-synchronously)。

如果你有很多这样的。

```
var files = ['1.js', '2.js', '3.js'];
files.map(createScript); 
```

[另外，我会为 SenchaTouch 担保（如果这是您愿意考虑的选项）]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:13:03.340

您可以尝试将脚本标签放在页面底部

```
<!DOCTYPE>
<html>
<head>
<title>Hello</title>
    <link rel="stylesheet"  href="jquery.mobile-1.1.1.min.css" />
</head>
<body>
    <h1>Hello</h1>
</body>
<script src="jquery-1.7.2.min.js"></script>
<script src="jquery.mobile-1.1.1.min.js"></script>
</html> 
```

一切都应该加载得更快，但脚本需要 2-3 秒

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T17:13:08.383

JavaScript 会阻止页面的呈现，因为脚本可能会执行 document.write 或进行其他会使呈现的页面无效的修改，因此最佳做法是将脚本标记放在页面底部。这样做的缺点是您将无法在页面中间使用 jquery，甚至 $(document).ready() 也不行。相反，您必须在加载 jquery 之后放置所有脚本，或者您必须使用本机 window.onload 或编写一个轻量级处理程序来在加载 jquery 后注册您的回调。