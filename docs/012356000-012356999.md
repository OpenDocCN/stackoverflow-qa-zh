# StackOverflow 问答 12356000-12356999

# php - Zend 框架：选择类似查询

> ID：12356006
> 
> 赞同：1
> 
> 时间：2012-09-10T16:41:47.433
> 
> 标签：php, zend-framework

那是我的选择功能：

```
 public function search($for) {
    $q = $this->select()->from($this->_name, array('id', 'title', 'content'))
            ->where('title LIKE ?', "%$for%")
            ->orWhere('content LIKE ?', "%$for%")
            ->orWhere('keywords LIKE ?', "%$for%")
            ->where('is_visible = ?', 0)
            ->where('category = ?', 7);

    return $this->fetchAll($q);
} 
```

但是为什么如果 is_visible = 1 或 category 不同于 7 select 和其他行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:50:13.903

我怀疑 AND/OR 优先级没有被正确解释。尝试这个：

```
$q = $this->select()->from($this->_name, array('id', 'title', 'content'))
        ->where("title LIKE '%$for%' OR content LIKE '%$for%' OR keywords LIKE '%$for%'")
        ->where('is_visible = ?', 0)
        ->where('category = ?', 7); 
```

# jquery - 如果第一个字段通过 jQuery 验证插件返回有效，我如何使第二个字段验证？

> ID：12356015
> 
> 赞同：1
> 
> 时间：2012-09-10T16:42:37.073
> 
> 标签：jquery, validation

我有两个相互依赖的领域。如果这两个字段 barname 和 address 已经存在于数据库中，那么它应该返回无效。

问题是我使用了带有数据功能的远程功能来在更改一个字段时验证这两个字段。但是，如果生成错误，然后使用其中一个字段进行更正，则仅删除最近更改的字段的错误消息。

如果第一个字段返回有效，是否有办法强制第二个字段也进行验证？

```
$('#addbarform').validate({
    rules: {
        barname: {
            required: true,
            minlength: 2,
            remote: {
                url: "2011-content/includes/checkbarname.php",
                data: {
                    address: function() {
                        return $('#address').val();
                    },
                    barname: function() {
                        return $('#barname').val();

                    }
                }
            }
        },
        address: {
            required: true,
            remote: {
                url: "2011-content/includes/checkbarname.php",
                data: {
                    barname: function() {
                        return $('#barname').val();

                    },
                    address: function() {
                        return $('#address').val();

                    }
                }
            }
        }
    },
    messages: {
        barname: {
            remote: 'This bar name already exists at this address.'
        },
        address: {
            remote: 'This bar name already exists at this address.'
        }
    }
}); 
```

我尝试使用以下代码解决它，但它不起作用。

```
$('#barname').blur(function () {
    if ($('#barname').is(".valid") && ($('#address').is(".error"))) {
        $("#address").valid();
    }
});

$('#address').blur(function () {
    if ($('#barname').is(".error") && ($('#address').is(".valid"))) {
        $("#barname").valid();
    }
}); 
```

# sql - 从函数返回多个 ID 并在查询中使用结果

> ID：12356022
> 
> 赞同：0
> 
> 时间：2012-09-10T16:43:16.043
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1

我有这个函数可以返回树节点的所有子节点：

```
CREATE OR REPLACE FUNCTION fn_category_get_childs_v2(id_pai integer)
RETURNS integer[] AS
$BODY$

DECLARE

ids_filhos integer array;

BEGIN

SELECT array ( 

SELECT category_id FROM category WHERE category_id IN (
(WITH RECURSIVE parent AS
(
    SELECT category_id , parent_id  from category WHERE category_id = id_pai
    UNION ALL 
    SELECT t.category_id , t.parent_id FROM parent
    INNER JOIN category t ON parent.category_id =  t.parent_id
)

SELECT category_id FROM  parent
WHERE category_id <> id_pai
) )

 ) into ids_filhos; 

return ids_filhos;

END; 
```

我想在这样的选择语句中使用它：

```
select * 
from teste1_elements 
where category_id in (select * from fn_category_get_childs_v2(12)) 
```

我也尝试过这种方式，结果相同：

```
select * 
from teste1_elements
where category_id=any(select * from fn_category_get_childs_v2(12))) 
```

但我收到以下错误：

```
ERROR:  operator does not exist: integer = integer[]
LINE 1: select * from teste1_elements where category_id in (select *...
                                                    ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

该函数返回一个整数数组，是这个问题吗？

```
 SELECT * from fn_category_get_childs_v2(12) 
```

检索以下数组 ( `integer[]`)：

```
 '{30,32,34,20,19,18,17,16,15,14}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:59:50.117

> 该函数返回一个整数数组，是这个问题吗？

是的。通常，如果您想使用，`where category_id in (select * from fn_category_get_childs_v2(12))`您希望您的函数返回一组行，而不是一个数组。就像是`RETURNS SETOF integer`

手册中的[示例](http://www.postgresql.org/docs/9.2/interactive/plpgsql-control-structures.html#AEN56274)可能会有所帮助：

也可以使用您现有的函数，但是您必须使用不同的语法来与数组进行比较。

我认为这应该更接近：

```
select * 
from teste1_elements 
where category_id = any(fn_category_get_childs_v2(12)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:41:33.237

核心的递归`WITH`查询可以简化为：

```
WITH RECURSIVE children AS (
    SELECT category_id
    FROM   category
    WHERE  parent_id = id_pai

    UNION ALL 
    SELECT c.category_id
    FROM   children ch
    JOIN   category c ON c.parent_id = ch.category_id
    )
SELECT *
FROM   children; 
```

更短，更清洁，更快。
如果你想把它包装成一个函数，对于这个简单的例子，我会使用一个普通的[SQL 函数](https://www.postgresql.org/docs/current/xfunc-sql.html)而不是一个[plpgsql 函数：](https://www.postgresql.org/docs/current/plpgsql.html)

```
CREATE OR REPLACE FUNCTION f_cat_children(_id_pai int, OUT category_id int)
  RETURNS SETOF int
  LANGUAGE SQL AS
$func$
   WITH RECURSIVE children AS (
      SELECT c.category_id
      FROM   category c
      WHERE  c.parent_id = $1

      UNION ALL 
      SELECT c.category_id
      FROM   children ch
      JOIN   category c ON c.parent_id = ch.category_id
      )
   SELECT *
   FROM   children;
$func$; 
```

我使用[`OUT`参数](https://www.postgresql.org/docs/current/sql-createfunction.html)将列名分配给`category_id`结果列 - 稍后简化连接。请注意，这在身体的任何地方都是可见的。这就是为什么您必须对列进行表格限定`c.category_id`以使其明确。

### 参数名称和位置参数

回复您的评论：
自 PostgreSQL 9.2（昨天发布）以来，您可以按名称**或**位置参数（`$1`, `$2`, ...）引用参数。[我在这里](https://www.postgresql.org/docs/current/xfunc-sql.html#XFUNC-SQL-BASE-FUNCTIONS)引用手册：

> SQL 函数的参数可以在函数体中使用名称或数字来引用。这两种方法的示例如下所示。

但是，对于 PostgreSQL 9.1 或更早版本，情况并非如此，在函数体中只理解位置参数。我相应地修改了函数。

PL/pgSQL 函数自 8.0 版引入以来就一直在理解参数*名称。*

您的结果查询可以使用`JOIN`语法而不是更简单`IN`：

```
SELECT t.* 
FROM   teste1_elements t
JOIN   f_cat_children(12) USING (category_id) 
```

或者只是在没有任何功能的情况下在单个查询中执行*所有操作：*

```
WITH RECURSIVE children AS (
    SELECT category_id
    FROM   category
    WHERE  parent_id = id_pai

    UNION ALL 
    SELECT c.category_id
    FROM   children ch
    JOIN   category c ON c.parent_id = ch.category_id
    )
SELECT t.*
FROM   children
JOIN   teste1_elements t USING (category_id); 
```

应该会快一点，但是。

# linq - Right() 函数的等价物

> ID：12356024
> 
> 赞同：1
> 
> 时间：2012-09-10T16:43:25.847
> 
> 标签：linq

有没有可以在 jquery 中使用的等价的 right() 函数。我想用文件扩展名 xlsx 获取记录。

```
 new Guid(context.Documents.Where(T => T.FileName == ".xlsx").Select(T => T.ItemGuid).First().ToString()); 
```

就像是

```
 select * from document where right(filename,4) = 'xlsx' 
```

我不想将文件名存储在变量中，然后再对其进行操作。我希望能够在我的 where 条件下直接使用它。“文档”是我的表名，“文件名”是一个包含我上传的文件名称的字段，现在我只需要过滤扩展名为“xlsx”的文件。我试着做

```
 guid temp = new Guid(context.Documents.Where(T => T.FileName.Substring(T.FileName.Length - 4) == ".xlsm").Select(T => T.ItemGuid).First().ToString()); 
```

但我收到错误“序列不包含元素”错误。

***更新：使用 EndsWith() 获取我想要的信息。这现在有效：

```
 guid temp = new Guid(context.Documents.Where(T => T.FileName.EndsWith("xlsm")).Select(T => T.ItemGuid).First().ToString()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:45:24.700

您可以使用`.slice`（[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice)）函数，考虑到将负值传递给它会使其从末尾剪切字符串。)

```
var test = 'filename.xslx';
if (test.slice(-4) === 'xslx') {
  alert("Passed");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:46:44.053

```
filename.substr(-4) 
```

`.substr`与负索引一起使用将返回字符串末尾的子字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:46:26.553

您可能正在寻找[此处](http://api.jquery.com/attribute-ends-with-selector/)`[name$="value"]`记录的选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:46:38.723

没有，可以用

```
var filename = "file.xlsx";
var extension = filename.substr(filename.length - 4); 
```

或获取点后的字符，您可以使用：

```
var extension = filename.split('.').pop(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T16:46:40.093

`right()`是相同的[`endswith()`](https://stackoverflow.com/a/2548133/175679)

```
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T16:47:36.460

`match()`使用提供正则表达式匹配的can javascript 。

```
var filename = 'somefile.xlsx';
var matches = filename.match('/\.xlsx$/i');
if (matches.length > 0) {
    // you have a match
} 
```

# php - 如何将数组从 Symfony 2 控制器传递到 TWIG 模板？

> ID：12356025
> 
> 赞同：5
> 
> 时间：2012-09-10T16:43:24.930
> 
> 标签：php, symfony, twig

我无法将数组从 symfony 2 控制器传递到 TWIG 模板。我在控制器中使用此代码：

```
$searchTerms['color'] = "Red";
return $this->render('TestBundle::search.html.twig', 
        array(
            "searchTerms" => $searchTerms)); 
```

在树枝模板中，我试图像这样访问变量：

1.  {{ searchTerms['color'] }}
2.  {{ searchTerms.color }}

两者都没有输出空字符串，所以看起来数组来到模板但它的元素是空的。

怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T01:44:18.893

是的，这段代码有效。首先要检查的是您的 twig 代码是否在正确的页面 ( `TestBundle::search.html.twig`) 中。这可能听起来很傻，但有时会发生......

如果这一切都很好，我建议您尝试在模板中进行调试。*调试是最重要的*。你在编程时总会遇到这种问题，尤其是当你尝试新东西的时候。您在调试代码方面做得越好，作为程序员的您就越好，因为您不可能在第一次就将所有事情都做好。

## 那么，如何调试呢？

要在您的 twig 模板中进行调试，您可以使用[twig 的调试扩展](http://twig.sensiolabs.org/doc/extensions/debug.html)。要激活调试选项，您必须快速[更改](http://symfony.com/doc/current/book/templating.html#debugging)配置文件。如果你迷路了，你也可以阅读这个[帖子。](http://hectorpinol.com/twig-debug-in-symfony-2/)

您可以像这样调试模板中的任何变量：

```
<pre>
{% debug searchTerms %}
</pre> 
```

这样，您可以轻松调试变量并测试您的问题是什么：

```
{% debug searchTerms['color'] %} 
```

如果您想快速调试，我强烈建议您使用[LadyBugBundle](https://github.com/raulfraile/LadybugBundle)。这是一个很棒的工具，可以让你做这样的事情：

**在您的控制器中：**

```
ladybug_dump($searchTerms); 
```

**在您的 TWIG 模板中：**

```
{{ searchTerms|ladybug_dump }} 
```

与经典选项没有什么不同`var_dump`，但如果您有长数组或对象，`ladybug`将会给您留下深刻印象。更重要的是，在控制器中，您经常需要在某个点停止代码以避免在您的调试语句之后加载页面，这对于瓢虫来说相当容易：

```
ladybug_dump_die($searchTerms); 
```

你甚至可以用这个简单的语句让**ladybug**将“debugged”变量加载到Symfony profiler 中。

```
$this->get('ladybug')->log($searchTerms); 
```

您现在可以从 Symfony2 分析器的选项卡直接访问该变量。 **Ladybug**可以做更多的事情，但为此，[文档](https://github.com/raulfraile/LadybugBundle/blob/master/README.md)非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:09:20.350

我认为您必须像这样更改模板：

```
{% for item in searchTerms %}
    {{ item.color }}<br/>
{% endfor %} 
```

见官方文档：[Creating and using Templates->embedding-controllers](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

# android - 在代码中为 findViewById(R.id.xxx) 选择资源

> ID：12356031
> 
> 赞同：1
> 
> 时间：2012-09-10T16:43:40.177
> 
> 标签：android

这是我的第一篇文章，对不起标题和解释。对不起我的英语不好。

我用我需要的所有东西定义了一个 .xml。我有 10 个 ImageView，10 个 ImageView 的 id 是 myimage01、myimage02、...、myimage010。我需要为 ImageView 选择一个图像。我可以这样做：

```
String imageName=getImageName();      
  id = getResources().getIdentifier(imageName, "drawable", getPackageName());
  drawable = res.getDrawable(id);
  ImageView cant1= (ImageView)findViewById(R.id.myimage01);
  cant1.setImageDrawable(drawable);
  ImageView cant2= (ImageView)findViewById(R.id.myimage02);
  cant2.setImageDrawable(drawable);
  ImageView cant3= (ImageView)findViewById(R.id.myimage03);
  cant3.setImageDrawable(drawable);
  ImageView cant4= (ImageView)findViewById(R.id.myimage04);
  cant4.setImageDrawable(drawable); 
  ImageView cant5= (ImageView)findViewById(R.id.myimage05);
  cant5.setImageDrawable(drawable);
  ImageView cant6= (ImageView)findViewById(R.id.myimage06);
  cant6.setImageDrawable(drawable);
  ImageView cant7= (ImageView)findViewById(R.id.myimage07);
  cant7.setImageDrawable(drawable);
  ImageView cant8= (ImageView)findViewById(R.id.myimage08);
  cant8.setImageDrawable(drawable);
  ImageView cant9= (ImageView)findViewById(R.id.myimage09);
  cant9.setImageDrawable(drawable);
  ImageView cant10= (ImageView)findViewById(R.id.myimage010);
  cant10.setImageDrawable(drawable); 
```

但这太糟糕了，最好使用循环。但我不知道这样做。

我需要这样的东西：

```
 String cad;
for(int i=0;i<10;i++){
      cad="myimage0";
      String cat= Integer.toString(i);
      cad=cad.concat(cat);
      ImageView cant1= (ImageView)findViewById(R.id.cad);
      cant1.setImageDrawable(drawable);
  } 
```

但是有一个错误：

```
ImageView cant1= (ImageView)findViewById(R.id.***cad***); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:47:48.193

您不能直接将这样的字符串传递给`findViewById`. 您需要先从您的字符串中查找资源。尝试这个：

```
int idResource = getResources().getIdentifier(cad, "id", getPackageName());
ImageView cant1= (ImageView)findViewById(idResource); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:47:37.230

在循环中使用它：

```
getResources().getIdentifier(resName, "id", getPackageName()); 
```

resName 是该 ID 的确切字符串（在您的示例中，它是 myimage01、myimage02、...

所以我们有：

```
String cad;
for(int i=0;i<10;i++){
      cad="myimage0";
      String cat= Integer.toString(i);
      cad=cad.concat(cat);
      int id = getResources().getIdentifier(cad, "id", getPackageName());
      ImageView cant1= (ImageView)findViewById(id);
      cant1.setImageDrawable(drawable);
  } 
```

# javascript - 在这个例子中使用继承最有效的方法是什么？

> ID：12356032
> 
> 赞同：0
> 
> 时间：2012-09-10T16:43:47.193
> 
> 标签：javascript, jquery

所以我一直在搞乱一些 JavaScript 继承技术，这里有一个案例，我试图得出一个强有力的解决方案。

这是一个简单的例子：http: [//jsfiddle.net/JgrYu/](http://jsfiddle.net/JgrYu/)

**问题：**从逻辑上讲，我们希望两个 div 都是 0。但是由于我们只是在更新扩展类，所以我们不会重新生成我们的“c”变量。

一个潜在的解决方法是使用功能继承：http: [//jsfiddle.net/h8xtz/](http://jsfiddle.net/h8xtz/)

```
function mybase() {
    var that = {};
    var c = 0;

    that.hi = function() {
        var ele = $('<div></div>');
        ele.html(c++);
        $('body').append(ele);
    }

    return that;
}

function myextended() {
    var that = mybase();

    that.hi();

    return that;
}

myextended.prototype = new mybase();

$(document).ready(function() {
    var a = myextended();
    var b = myextended();
})​ 
```

**然而**，这样做的问题是我们使全局命名空间变得混乱，并且每个对象都复制了功能属性，而实际上我们只想要复制私有变量。

**所以，**我正在寻找一种比功能继承更好的方法来解决这个问题。我曾考虑过制作一个伪经典继承结构，在其中分离私有和公共变量/函数，但我无法想出一个开销低于函数继承的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:49:51.627

如果要为每个对象创建一组新的私有变量，则需要从子对象[调用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)父对象的构造函数。并且不要使用父级的实例作为子级的原型对象，而只是从父级的原型对象继承的对象。这可以通过以下方式完成[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)：

```
function myextended() {
    mybase.call(this); // apply the parent's constructor on the new object
    this.hi();
}

myextended.prototype = Object.create(mybase.prototype); 
```

（[演示](http://jsfiddle.net/JgrYu/3/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:48:52.340

如何使变量成为原型的一部分：

```
function mybase() {

    this.hi = function() {
        var ele = $('<div></div>');
        ele.html(this.c++);
        $('body').append(ele);
    }
}

mybase.prototype.c = 0; 
```

[这是更新的小提琴](http://jsfiddle.net/briguy37/JgrYu/1/)。

注意：或者，您可以`this.c`在声明 mybase 时进行初始化。

# php - 写入 joomla 资产表的正确模式是什么？

> ID：12356039
> 
> 赞同：3
> 
> 时间：2012-09-10T16:44:18.863
> 
> 标签：php, joomla

我目前正在修改一个组件以包含 ACL 支持。我想为创建的`#_assets`每个类别/项目创建正确的行。`lft`尊重等级、重新计算和`rght`价值观的正确程序是什么？

示例：
组件

*   类别 (lft:0 右:1)
    *   项目 (lft:2 右:3)
*   类别 (lft:4 右:5)
    *   项目 (lft:6 右:7)
    *   **新项目 (lft:? rght:?)**
*   类别 (lft:8 右:9)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:55:06.180

通常，您不会直接写入，`#_assets`通常会[添加 ACL 支持，如教程中所示](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL)，然后在保存每个项目时更新 acl。

您可能还想阅读这篇文章，了解如何[将 ACL 规则添加到您的组件](http://docs.joomla.org/Adding_ACL_rules_to_your_component)中。

最后，如果您正在谈论处理现有记录以添加 ACL，那么最常见的方法是使用更新的模型（现在具有 ACL 支持）处理每条记录以重新保存它们。这将导致正确应用 ACL，而不仅仅是更新`#_assets`表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:09:33.963

如果要将组件的项目添加到资产表中：

我假设您已经添加了带有部分组件、类别和**项目**的文件 access.xml，如下所示：

……

```
**<section name="item">
    <action name="core.delete" title="JACTION_DELETE" description="COM_CONTENT_ACCESS_DELETE_DESC" />
    <action name="core.edit" title="JACTION_EDIT" description="COM_CONTENT_ACCESS_EDIT_DESC" />
    <action name="core.edit.state" title="JACTION_EDITSTATE" description="COM_CONTENT_ACCESS_EDITSTATE_DESC" />
</section>** 
```

……

这里我将section item称为组件的item（即一篇文章、一个banner、一个weblink等）

您的组件项目表**必须具有列 assets_id**，因为该字段的存在会触发将该项目保存到 #__assets 表

```
Jtable class

 ... __construct()
{
...
        if (property_exists($this, 'asset_id'))
        {
            $this->_trackAssets = true;
        }
...
} 
```

如果您遵循 joomla 的组件开发和文件结构指南，那么您的`ComponentTableItem store()`方法将调用`parent::store();`It is in the parent class, `JTable->store()`，将发生对资产表的插入。如果项目记录已成功保存到其表中，则该类继续检查该`asset_id`字段是否存在。

JTable->store() 检查

```
 // If the table is not set to track assets return true.
    if (!$this->_trackAssets)
    {
        return true;
    } 
```

如果存在，则代码继续执行获取资产父 ID、将记录添加到表时使用的资产名称以及该项目的标题。

查看JOOMLA_ROOT/libraries/joomla/database/table.php并搜索方法store()，代码摘录：

```
$parentId = $this->_getAssetParentId();
$name = $this->_getAssetName();
$title = $this->_getAssetTitle(); 
```

如果您想控制资产名称的记录方式，例如 com_yourComponent。**item.12**或 com_yourComponent。**event.14**或 com_yourComponent。**YOURITEM.ID**，（查看您的 joomla 数据库，表 #__assets 以更好地理解我所指的内容，即资产名称的结构）您可以或可能需要重写方法 _getAssetParentID(), _getAssetName() , 和 _getAssetTitle() 在您的组件的表类中。

假设一个新项目，一旦记录到#__assets 表中，该方法用相应的资产id 更新最近添加的项目记录，即# *assets.id = #* _yourComponent_item.asset_id。从 JTable->store() 继续：

```
 if (empty($this->asset_id))
    {
        // Update the asset_id field in this table.
        $this->asset_id = (int) $asset->id;

        $query = $this->_db->getQuery(true);
        $query->update($this->_db->quoteName($this->_tbl));
        $query->set('asset_id = ' . (int) $this->asset_id);
        $query->where($this->_db->quoteName($k) . ' = ' . (int) $this->$k);
        $this->_db->setQuery($query);

        if (!$this->_db->query())
        {
            $e = new JException(JText::sprintf('JLIB_DATABASE_ERROR_STORE_FAILED_UPDATE_ASSET_ID', $this->_db->getErrorMsg()));
            $this->setError($e);

            return false;
        }

    } 
```

当然，正如上面提到的cppl，你必须在你的组件的item表单中实现了ACL规则，并且在保存之前绑定了这些规则。

我强烈建议您阅读 cppl 将您重定向到的文档。

# matlab - 规范化在优化中有用/必要吗？

> ID：12356041
> 
> 赞同：5
> 
> 时间：2012-09-10T16:44:42.487
> 
> 标签：matlab, optimization, mathematical-optimization

我正在尝试使用 Matlab 优化工具箱优化设备设计（`fmincon`精确地使用该函数）。为了快速理解我的观点，我提供了一个小变量集 {l_m, r_m, l_c, r_c}，它的起始值等于 {4mm, 2mm, 1mm, 0.5mm}。

尽管 Matlab 没有特别推荐对输入变量进行归一化，但我的教授建议我将变量归一化为 {l_m , r_m, l_c, r_c} 的最大值。因此，变量现在将取 0 到 1 之间的值（而不是在 l_m 的情况下为 3mm 到 4.5mm）。当然，我必须修改我的目标函数以将其转换回正确的值，然后进行计算。

我的问题是：优化函数`fmincon`是否关心输入变量是否已标准化？由于标准化而预期性能变化是否合理？要考虑的一点是优化器如何改变变量，比如 l_m——在一种情况下，它可以将其从 4mm 更改为 4.1mm，在另一种情况下，它可以将其从 0.75 更改为 0.76。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:53:36.837

当输入归一化时，通常更容易优化。您可以预期收敛速度和输出准确性都会有所提高。

例如，正如您在这篇文章 ( [http://www-personal.umich.edu/~mepelman/teaching/IOE511/Handouts/511notes07-7.pdf](http://www-personal.umich.edu/%7Emepelman/teaching/IOE511/Handouts/511notes07-7.pdf) ) 中看到的，梯度下降的收敛速度在Hessian 矩阵的最大和最小特征值之比很小。通常，当您的数据标准化时，该比率为 1（最佳）。

# php - 从 PHP Web 脚本运行 ffmpeg

> ID：12356043
> 
> 赞同：7
> 
> 时间：2012-09-10T16:44:58.643
> 
> 标签：php, ffmpeg

我需要在运行幻灯片放映以从这些幻灯片中获取视频时管理网站的记录/捕获。

我的做法是：

```
<?php 

define('FFMPEG_LIBRARY', '/usr/bin/ffmpeg ');

$ffmpegcmd = "ffmpeg -f x11grab -r 25 -s 800x600 -i :0.0 /tmp/output.mpg";

shell_exec($ffmpegcmd);  

?> 
```

但我从 php 错误日志中得到这个错误：

```
[x11grab @ 0x81e8aa0] device: :0.0 -> display: :0.0 x: 0 y: 0 width: 800 height: 600
No protocol specified
No protocol specified
[x11grab @ 0x81e8aa0] Could not open X display.
:0.0: Input/output error 
```

来自控制台的类似命令运行良好。

请问，有什么帮助可以显示并能够从浏览器 php 脚本控制 ffmpeg 吗？

提前致谢。

* * *

谢谢你的时间。

我摆脱了 X 显示错误，但我仍然没有捕获。

使用 xvfb 我在 /tmp 处得到一个由 www-data 用户编写的未知文件：-rw-r--r-- 1 www-data www-data 11252 Sep 12 09:49 server-B20D7FC79C7F597315E3E501AEF10E0D866E8E92.xkm

运行 startx 我还在 /tmp -rw------- 1 www-data www-data 59 Sep 12 09:53 serverauth.oLcFlG7tXC 处得到了一个未知文件

两者中的任何一个都会变大，因此它不会捕获任何东西。内容是一些二进制的东西。这些文件是关于什么的？

我正在尝试编写一个脚本，在该脚本中我可以控制 ffmpeg 捕获桌面以从网站上显示的 jquery 幻灯片创建视频的时间。

我从控制台的尝试更接近，但如果我可以通过浏览器完成，我将能够知道幻灯片完成后何时停止发送 AJAX 请求。

这是我从控制台尝试：

```
#!/bin/bash

# start the slide website: I will need to change it to control by querystring the language and course level
firefox http://www.languagecourse.net/vocabulary-trainer.php &
# start recording: I will need to adjust the frame to capture
ffmpeg -f x11grab -r 25 -s 800x600 -i :0.0 /tmp/output2.mpg &
# since I can't control the time a course takes I pause an arbitrary time
sleep 5
# look for the capture PID and close it
for i in $(ps aux | grep ffmpeg | sed "s/  */#/g" | cut -f2 -d#)
do
  echo "proceso $i killed"
  kill -9 $i
done 
```

我想知道一旦网站打开我可以继续从 AJAX 进行控制，但不知道我是否能够获得 ffmpeg PID 来停止命令。

我将不胜感激任何评论。

问候， ·_-

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:51:49.060

您可以使用[Xvfb](http://en.wikipedia.org/wiki/Xvfb)来模拟 x 环境

```
<?php
$ffmpegcmd = "xvfb-run -a  ffmpeg -f x11grab -r 25 -s 800x600 -i :0.0 /tmp/output.mpg";

shell_exec($ffmpegcmd); 
```

或类似的东西

```
<?php 
$ffmpegcmd = "startx -- `which Xvfb` :1 -screen 0 800x600x24 && DISPLAY=:1 && ffmpeg -f x11grab -r 25 -s 800x600 -i :0.0 /tmp/output.mpg");
shell_exec($ffmpegcmd); 
```

摆脱“无法打开X显示”应该很好。错误，并且可能会解决您的问题。

# android - dalvik vm 堆压缩

> ID：12356045
> 
> 赞同：1
> 
> 时间：2012-09-10T16:45:08.193
> 
> 标签：android, dalvik

在dalvik中，它如何处理内存碎片？我知道它有一个车库收集器。但是，如果我的应用程序分配了很多“小”对象，然后释放其中一些并且空闲内存分散在各处，该怎么办。当我的应用程序尝试分配大内存时，dalvik 如何找到内存（有足够的可用内存可用于此分配，但可用内存分散在各处）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:57:26.163

垃圾收集器创建收集树。如果对象引用 null 垃圾收集器从树中删除此对象，则集合树包含对象引用。

# javascript - 将 jquery live 更改为分页

> ID：12356050
> 
> 赞同：1
> 
> 时间：2012-09-10T16:45:22.453
> 
> 标签：javascript, jquery, html, css

我有一个基于下拉列表的分页页面，并将更改加载为

```
$("select#opt-category").change(function () {
                    $(".showgrid").load('portal.php?category='+category);

                    }); 
```

在 portal.php 中（也作为 ajax 发布到 pagination.php

```
if(isset($_GET['category'])) $catgory=$_GET['category'];

    <script type="text/javascript">

            function loading_show(){
                $('#loading').html("<img src='assets/img/ajax-loader.gif'/>").fadeIn('slow');
            }
            function loading_hide(){
                $('#loading').fadeOut('slow');
            }                
            function loadData(page,category){
                loading_show(); 

                $.ajax
                ({

                    type: "POST",

                    url: "pagination_data.php",
                    data: {'page':page,'category':category},

                    success: function(msg)
                    {
                        $("#container").ajaxComplete(function(event, request, settings)
                        {
                            loading_hide();
                            $("#container").html(msg);
                        });
                    }
                });
            }

        loadData(1,<?php echo $catgory?> )  
                      // For first time page load default results
            $('#container .pagination li.active').live('click',function(){
                event.stopPropagation();
                var page = $(this).attr('p');
                var category= $(this).attr('q');

                loadData(page,category);

                //break;

            });

            $('#go_btn').live('click',function(){
                var page = parseInt($('.goto').val());
                var category = parseInt($('.total').attr('b'));

                var no_of_pages = parseInt($('.total').attr('a'));
                if(page != 0 && page <= no_of_pages){
                    loadData(page,category);
                }else{
                    alert('Enter a PAGE between 1 and '+no_of_pages);
                    //$('.goto').val("").focus();
                    return false;
                }

            });

    </script> 
```

它正确显示了所有分页，但是单击页面会触发对 pagination_data.php 的多个 Ajax 调用以及如何更改为 .on()

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:56:58.183

使用最靠近按钮的元素，它不是动态加载的（`document`在极端情况下）。然后在其上附加处理程序，并使用按钮的选择器（在您的情况下为 id）作为[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)的选择器。

假设你`#container`是那个静态元素：

```
$('#container').on('click', '.pagination li.active', function(){…});

$('#container').on('click', '#go_btn', function(){…}); 
```

# lucene - 使用 PDFBox 提取没有页眉和页脚的文本

> ID：12356052
> 
> 赞同：2
> 
> 时间：2012-09-10T16:45:26.647
> 
> 标签：lucene, pdfbox

我使用 PDFTextStripper 类在 Lucene 索引之前提取 pdf 文本。

是否有可能从提取的文本中排除 pdf 页眉和页脚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:28:40.750

如果您知道文档中页眉和页脚的确切位置，则可以使用按区域提取文本。希望这可以帮助。

# ruby-on-rails - 使用 Rails 在 Atom 提要中显示图像？

> ID：12356053
> 
> 赞同：3
> 
> 时间：2012-09-10T16:45:29.910
> 
> 标签：ruby-on-rails, ruby, atom-feed

我正在尝试遍历 Atom 提要中每篇文章的图片。我有以下代码可以很好地呈现 Atom 提要，但不确定这些是否是正确的图像标签。

任何关于最佳设置的建议都是惊人的。

这将呈现下面的 XML；index.atom.builder：

```
atom_feed do |feed|
  feed.title "posts"
  feed.updated @articles.maximum(:updated_at)

  @articles.each do |article|
    feed.entry(article) do |entry|
      entry.title article.title
      entry.content(article.body, type: 'html')
      entry.author do |author|
        author.name article.author

        if article.pictures.any?
          article.pictures.each do |pic|
            entry.logo image_tag pic.photo.url(:large)
          end
        end 
      end
    end
  end
end 
```

XML 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xml:lang="en-US" xmlns="http://www.w3.org/2005/Atom">
  <id>tag:HEROKU APP:/articles</id>
  <link rel="alternate" type="text/html" href="herokuapp.com"/>
  <link rel="self" type="application/atom+xml"herokuapp.com/articles.atom"/>
  <title>posts</title>
  <updated>2012-09-10T16:42:27Z</updated>
  <entry>
    <id>tag:herokuapp.com,2005:Article/9</id>
    <published>2012-09-10T16:42:27Z</published>
    <updated>2012-09-10T16:42:27Z</updated>
    <link rel="alternate" type="text/html" href="herokuapp.com/articles/9-test-lorum"/>
    <title>Test Lorum</title>
    <content type="html">wddsadasdsadasd</content>
    <logo>&lt;img alt="Alaska" src="/assets/articles/12/large/alaska.jpg?1347295345" /&gt;</logo>
    <author>
      <name>Andy</name>
    </author>
  </entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:54:16.227

可能是错的，但你可能只需要一个`html_safe`电话就可以了。

```
 entry.logo image_tag(pic.photo.url(:large)).html_safe 
```

# java - 如何访问给定的 Java 线程

> ID：12356054
> 
> 赞同：0
> 
> 时间：2012-09-10T16:45:36.413
> 
> 标签：java, multithreading

基本上，我希望能够运行多个线程——这些线程将在给定的时间段内使用睡眠命令。我希望能够在线程已经运行一段时间后根据用户输入来操纵这些睡眠线程的持续时间。

例如：

从classA开始线程...

```
private final ExecutorService scheduler = Executors.newCachedThreadPool();

public void startJob(Job job, List <Object> objectList) {
    //Store the results of this in a map using a future and the id of job??
    scheduler.submit(jobThreadInterface.create(job, objectList));
} 
```

JobThreadInterface 启动 classB...

```
public class ClassB implements Runnable{

private Job job;
private List <Object> objectList;
private int changeSleepDuration;

    public ClassB (Job job, List <Object> objectList){
      this.job = job;
      this.objectList= objectList;
    }

     public void run() {
       //It will keep looping through this sleep command until there are no more objects left...
       for (Object object : objectList){
          if (object.getSleepNumber() > 0){
              Thread.sleep(object.getSleepNumber() + changeSleepDuration);
          }
      }

     public setChangeSleepDuration(int i){
          changeSleepDuration = i;
     }
 }
} 
```

所以基本上，我想要做的是`setChangeSleepDuration`从 classA 访问我想要访问的任何线程的 ClassB 中的方法。这可能吗？如果可以，最好的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:54:04.963

我想这`jobThreadInterface.create(job, objectList)`确实会创建一个`ClassB`. 在该方法中，您可以将引用存储在`ClassB`您以后可以访问的集合中。

所以像：

```
ClassB runnable = jobThreadInterface.create(job, objectList);
list.add(runnable);
scheduler.submit(runnable); 
```

稍后在您的代码中：

```
list.get(0).setChangeSleepDuration(1000); 
```

或者，您可以将可运行对象存储在映射中，以将它们与一些有助于您稍后检索它们的键相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:54:25.400

您可以保留 Job 实例。然后，当线程开始处理作业时，将线程保存为作业的属性。然后classA已经知道Job，所以它可以访问线程。

或者，您可能只是想将该`changeSleepDuration`值保存在作业本身中。它归结为语义。代表什么`changeSleepDuration`（线程控制，或者它是工作的一部分？）。听起来是后者。我会选择选项二。

# symfony - KnpMenu，无法设置当前菜单项

> ID：12356056
> 
> 赞同：4
> 
> 时间：2012-09-10T16:45:55.893
> 
> 标签：symfony, symfony-2.1, knpmenu

我已经看到有关此问题的其他错误。我做了同样的事情。当我尝试渲染菜单时，出现此致命错误：

```
Fatal error: Call to undefined method Knp\Menu\MenuItem::setCurrentUri()
in ProjectBundle/Menu/Builder.php on line 23 
```

这就是我的 Builder 的外观：

```
<?php
use Knp\Menu\FactoryInterface;
use Symfony\Component\DependencyInjection\ContainerAware;
use Symfony\Component\HttpFoundation\Request;

class Builder extends ContainerAware
{

private $factory;

public function __construct(FactoryInterface $factory)
{
    $this->factory = $factory;
}

public function createMenu(Request $request)
{

    $menu = $this->factory->createItem('root');
    $menu->setCurrentUri($request->getRequestUri());

    $menu->addChild('Home', array('route' => '_home'));
    $menu->addChild('About', array('route' => '_about'));
    $menu->addChild('Bullshit', array('route' => '_bullshit'));

    return $menu;
}
} 
```

我浏览了 Github 上的问题跟踪器，似乎这个问题已经解决了，但为什么我又遇到了同样的问题？

我的意思是，当我`var_dump($menu)`，它清楚地说它是一个`MenuItem`并且看到 KnpMenu 的文档，`setCurrentUri()`我的`$menu`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-30T15:51:46.037

如果问题是由于请求引起的，它应该不起作用。你可以试试：

```
 public function **CreateMenu**(\Knp\Menu\FactoryInterface $factory, array $options)
{   $menu = $factory->createItem('root');

    $menu->setCurrentUri($this->container->get('request')->getRequestUri());
$menu->addChild('Home', array('route' => '_home'));
$menu->addChild('About', array('route' => '_about'));
..

return $menu;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-25T14:07:03.783

@aurny2420289 提供了一个简单的解决方案。

但现在建议使用 UriVoter

```
use Knp\Menu\Matcher\Voter\UriVoter;
use Knp\Menu\Renderer\ListRenderer;

//...

$matcher = new Matcher();
$matcher->addVoter(new UriVoter($_SERVER['REQUEST_URI']));

$renderer = new ListRenderer($matcher);

//... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:01:27.197

从 v1.1.0 开始，该方法似乎`MenuItem::setCurrentUri()`已被弃用。有关更多信息，请参阅[https://github.com/KnpLabs/KnpMenu/issues/63](https://github.com/KnpLabs/KnpMenu/issues/63)。该问题有几个关于如何设置菜单的当前uri的链接`UrlVoter`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T12:09:16.813

我找到了最简单的解决方案。只需添加：

```
$menu->setCurrent(true); 
```

它将类“当前”添加到当前菜单。方法`setCurrentUri`已被弃用，后来从 knpmenu 中删除。

# php - Twitter API Friendship Create 始终只为某些特定用户返回 403

> ID：12356057
> 
> 赞同：2
> 
> 时间：2012-09-10T16:45:57.537
> 
> 标签：php, error-handling, twitter, twitter-oauth

对于我的 Twitter 应用程序的某些用户，我无法使用 Rest API 创建友谊，因为我得到了这些用户的响应代码 403 FORBIDDEN。每次由于某种原因我无法代表他们创建友谊请求时，都是相同的用户。

我发现如果用户取消对我的应用程序的授权，当我尝试为该用户创建新友谊时，我会收到 401 响应。所以这不是问题。

有没有其他人看过这个？我对 OAuth 或类似的东西没有任何问题，因为我没有问题为我的大多数应用程序用户创建友谊，但其中一些总是返回 403。有什么想法吗？

另外，我知道用户没有达到他们的每日关注限制。一位总是遇到此问题的特定用户拥有数万粉丝，并且仅关注了大约 1,500 人。所以我也不认为这是问题所在，但我在互联网上找不到任何关于其他可能性的信息......

另外...请注意，它不是 403，因为用户已经关注。我通过尝试让用户关注我知道它当前不关注的 Twitter 帐户来验证这一点。

# c++ - c++ 分段错误

> ID：12356061
> 
> 赞同：0
> 
> 时间：2012-09-10T16:46:10.483
> 
> 标签：c++, segmentation-fault

下面是一个简单的 CS 入门课作业问题：

```
#include <iostream>
#include <string>

int main() {
using namespace std;
int num1; int num2; int num3; int ans; 
char oper;
/* 
cout << "Enter an arithmetic expression:" << endl;
cin >> oper >> num1 >> num2 >> num3;
DEBUGGING
*/

cout << "enter an operator" << endl;
cin >> oper; /* Segmentation error occurs here... */
cout << "enter number 1" << endl;
cin >> num1; 
cout << "enter number 2" << endl;
cin >> num2;
cout << "enter number 3" << endl;
cin >> num3;
cout << "okay" << endl;

if (oper = "+") {
    if (num1 + num2 != num3) {
        cout << "These numbers don't add up!" << endl;
    }
    else {
        ans = num1 + num2;
        cout << num1 << "+" << num2 << "==" << ans << endl;
    }
}
else if (oper = "-") {}
else if (oper = "*") {}
else if (oper = "/") {}
else if (oper = "%") {}
else {
    cout << "You're an idiot. This operator clearly does not exist... Try again " << endl;
}

return 0;
} 
```

我对分段错误并不是很熟悉，所以如果有人能解释我是否做错了什么，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:56:51.637

您的代码不能使用 gcc 4.1.2 编译。你用的是什么编译器？此外，“if (oper = '+')”对我来说看起来不正确。您想将“+”分配给那里的变量 oper 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:56:58.340

我在代码中找不到错误。VC++。

```
#include <iostream>
#include <string>
int main() {
    using namespace std;
    int num1; int num2; int num3=0; int ans; 
    char oper;

    cout << "Enter an arithmetic expression: ( [/ 4 2]  or [+ 1 1] or [- 5 4] )" << endl;
    cin >> oper >> num1 >> num2;

    switch (oper)
    {
        case '+':
                ans=num1+num2 ;
            break;

        case '-':
                ans=num1-num2 ;
            break;

        case '*':
                ans=num1*num2 ;
            break;

        case '/':
                ans=num1/num2 ;
            break;

    }

    cout << "\nans= " << ans<<"\n\n";

    return 0;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T18:02:16.193

更改以下内容：

```
if (oper == '+')

else if (oper == '-') {}
else if (oper == '*') {}
else if (oper == '/') {}
else if (oper == '%') {} 
```

使用 ' ' 表示字符， == 表示布尔逻辑！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-10T16:55:14.923

`cin`将尝试放入多个字符`oper`，您需要一个 char 向量来保存`cin`将放入其中的所有字符（包括换行符）

在这种情况下，您可以使用`char oper[10]`它来处理您正在尝试的一个字符输入。

但是，我建议使用 std::getline(); （[http://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)）

# xml - 如何将多条记录转换为一条 XML 记录

> ID：12356062
> 
> 赞同：0
> 
> 时间：2012-09-10T16:46:10.217
> 
> 标签：xml, xslt, tibco

这是 XML 源：

```
<SalesInRecord>
       <ROW_NUM>8</ROW_NUM>
       <BUY_QTY>5</BUY_QTY>
       <HP_PRODUCT_ID>Apj45682#123</HP_PRODUCT_ID>
       <LOCATION_ID>2-PQL-3403</LOCATION_ID>
       <LOCATION_NAME>XYZ el</LOCATION_NAME>
       <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
       <SUPPLIER_ID>2-PQL-3455</SUPPLIER_ID>
    </SalesInRecord>
    <SalesInRecord>
       <ROW_NUM>5</ROW_NUM>
       <BUY_QTY>5</BUY_QTY>
       <PRODUCT_ID>Apj45683#123</PRODUCT_ID>
       <LOCATION_ID>2-PQL-3403</LOCATION_ID>
       <LOCATION_NAME>XYZ el</LOCATION_NAME>
       <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
      <SUPPLIER_ID>2-PQL-3457</SUPPLIER_ID>
    </SalesInRecord>
    <SalesInRecord>
       <ROW_NUM>6</ROW_NUM>
       <BUY_QTY>5</BUY_QTY>
       <PRODUCT_ID>Apj45684</PRODUCT_ID>
       <LOCATION_ID/>
       <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
       <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
       <SUPPLIER_ID>2-PQL-3455</SUPPLIER_ID>
    </SalesInRecord>
    <SalesInRecord>
       <ROW_NUM>7</ROW_NUM>
       <BUY_QTY>5</BUY_QTY>
       <PRODUCT_ID>Apj45685</PRODUCT_ID>
       <LOCATION_ID/>
       <LOCATION_NAME>XYZ XY</LOCATION_NAME>
       <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
       <SUPPLIER_ID>2-PQL-3455</SUPPLIER_ID>
    </SalesInRecord> 
```

当我尝试使用以下 xsd 解析上述数据时，我收到错误 **消息：解析时发生错误：根元素之后的文档中的标记必须格式正确**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
 elementFormDefault="unqualified"
 attributeFormDefault="unqualified">
    <xs:element name="SalesInRecord">
    <xs:complexType>
    <xs:sequence>
    <xs:element name="ROW_NUM" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="BUY_QTY" type="xs:integer" nillable="true" minOccurs="0"/>
    <xs:element name="PRODUCT_ID" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="LOCATION_ID" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="LOCATION_NAME" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="UNIT_BUY_PRICE" type="xs:decimal" nillable="true" minOccurs="0"/>
    <xs:element name="GOODS_RECEIVED_DATE" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="TRANSACTION_CURRENCY" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="TRANSACTION_DATE" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="TRANSACTION_DOCUMENT_ID" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="TRANSACTION_DOCUMENT_TYPE" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_ADDR_ASIAN" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_ADDR_STATE" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_ADDR_TOWN" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_ID" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_ISO_COUNTRY_CODE" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_NAME" type="xs:string" nillable="true" minOccurs="0"/>
    <xs:element name="SUPPLIER_POSTAL_CODE" type="xs:string" nillable="true" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema> 
```

请帮我解析上述数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:05:50.073

您提到的上述 xml 应该有一个根元素。大概是这个样子

```
<SalesInData>
  <SalesInRecord>
    <ROW_NUM>8</ROW_NUM>
    <BUY_QTY>5</BUY_QTY>
    <HP_PRODUCT_ID>Apj45682#123</HP_PRODUCT_ID>
    <LOCATION_ID>2-PQL-3403</LOCATION_ID>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    <SUPPLIER_ID>2-PQL-3455</SUPPLIER_ID>
  </SalesInRecord>
  <SalesInRecord>
    <ROW_NUM>5</ROW_NUM>
    <BUY_QTY>5</BUY_QTY>
    <PRODUCT_ID>Apj45683#123</PRODUCT_ID>
    <LOCATION_ID>2-PQL-3403</LOCATION_ID>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    <SUPPLIER_ID>2-PQL-3457</SUPPLIER_ID>
  </SalesInRecord>
  <SalesInRecord>
    <ROW_NUM>6</ROW_NUM>
    <BUY_QTY>5</BUY_QTY>
    <PRODUCT_ID>Apj45684</PRODUCT_ID>
    <LOCATION_ID/>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    <SUPPLIER_ID>2-PQL-3455</SUPPLIER_ID>
  </SalesInRecord>
  <SalesInRecord>
    <ROW_NUM>7</ROW_NUM>
    <BUY_QTY>5</BUY_QTY>
    <PRODUCT_ID>Apj45685</PRODUCT_ID>
    <LOCATION_ID/>
    <LOCATION_NAME>XYZ XY</LOCATION_NAME>
    <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    <SUPPLIER_ID>2-PQL-3455</SUPPLIER_ID>
   </SalesInRecord>
<SalesInData> 
```

此外，要将 SalesInData 应用于您的 XSLT，只需根据您的要求进行硬编码。

```
<xsl:element name="SalesInData">Dump your required data </xsl:element> 
```

# python - tkinter 点击子级不会传播给父级

> ID：12356068
> 
> 赞同：2
> 
> 时间：2012-09-10T16:46:30.020
> 
> 标签：python, tkinter

为什么单击子元素不会传播到父元素？

```
from tkinter import *

root = Tk()

def handler(event):
    print('clicked at', event.x, event.y)

frame = Frame(root, width=100, height=100)
label = Label(frame, text="Label")
frame.bind('<Button-1>', handler)
frame.pack()
label.pack(side=TOP)

root.mainloop() 
```

当我运行它时，单击标签不会触发处理程序。我知道事件默认传播给父母，如果你不想这样，你必须返回“break”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T18:36:06.013

**您最初对事件传播到其父级的理解是错误的。他们不。**

诚然，作为顶层或根窗口的直接后代的小部件存在边缘情况。即使在那里，它们也不是传播到它们的父级，而是它们被绑定标签定义的其他绑定处理，并且默认情况下，每个小部件都有它的顶级窗口作为它的绑定标签之一。

如果您想将绑定设置为在任何地方都可以使用该`bind_all`方法，因为默认情况下每个小部件都有一个“全部”绑定标签。另一种选择是为多个小部件提供相同的绑定标签（使用该`bindtags`方法），然后使用 .bind 绑定到该绑定标签`bind_class`。您做出的选择取决于您要完成的工作。

bindtags 非常强大——可以说比任何其他工具包中的任何绑定机制都更强大。例如，如果您*需要*传播事件，您可以通过调整每个小部件的绑定标签以包含其所有祖先来实现。然而，根据我的经验，很少需要这种恶作剧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:06:43.667

你错了。 `"break"`导致该事件不会传播到单击的小部件的其他处理程序。

换句话说，如果你将你的动作绑定到`label`，然后你将另一个动作绑定到第一个按钮上`label`，两个回调都将被调用（除非你`"break"`从第一个被调用的回调中返回。）

不过，我不确定是否有解决方法……（我们可能需要等待 BryanOakley 出现；）

# unit-testing - 单元测试是否应该依赖应用程序定义的常量？

> ID：12356070
> 
> 赞同：7
> 
> 时间：2012-09-10T16:46:35.410
> 
> 标签：unit-testing, testing, language-agnostic, constants

考虑以下伪代码。它旨在确定一个成绩是否为及格成绩。

```
class Student:
    int grade

    boolean IsStudentPassing():
        return grade >= MIN_PASSING_GRADE

...

// In another file
constant int MIN_PASSING_GRADE = 70 
```

如果我们正在为 编写单元测试`IsStudentPassing`，我们可以使用常量值：

```
ensure that IsStudentPassing is false when grade is MIN_PASSING_GRADE - 1
ensure that IsStudentPassing is true when grade is MIN_PASSING_GRADE 
```

或者，我们可以手动选择值：

```
ensure that IsStudentPassing is false when grade is 69
ensure that IsStudentPassing is true when grade is 70 
```

对于第二种方法，如果发生更改，我们的测试必须重新编写`MIN_PASSING_GRADE`。第一种方法更灵活，但依赖于`MIN_PASSING_GRADE`具有正确的值。

我不完全确定更喜欢哪种方法，一般会根据具体情况进行选择。一方面，`MIN_PASSING_GRADE`应该通过不同的测试来确保它是理智的。另一方面，我担心所谓的“单元”测试会触及代码库中的太多其他地方。

这是一个人为的例子，但在实际程序中经常会出现类似的情况。解决它们的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:36:02.667

根据偏好，您可以在自己的设计中注入“恒定”值，这样您的单元测试就可以与实际上构成及格分数的变幻莫测隔离开来。做到这一点的难易程度因编程语言而异。考虑一下这个代码，让它变得简单：

```
use MooseX::Declare;
class Student {
    has grade => (
        is => 'ro', isa => 'Num', required => 1,
    );

    method min_passing_grade {
        return MIN_PASSING_GRADE;
    )

    method is_student_passing () {
        return $self->grade >= $self->min_passing_grade
    }
}

class t::Student {
    use Test::Sweet;
    use Test::MockObject::Extends;

    test correctly_determines_student_is_passing () {
        my $student = $self->_make_student($self->_passing_grade);

        ok($student->is_student_passing);
    }

    method _make_student (Num $grade) {
        my $student = Test::MockObject::Extends->new(
            $student->new(grade => $grade)
        );
        # Here's the important line:
        $student->set_always(
            min_passing_grade => $self->_passing_grade
        );
        return $student;
    }

    method _passing_grade () { 40 }

    test correctly_determines_student_is_failing () {
        my $student = $self->_make_student($self->_passing_grade - 1);

        ok(not $student->is_student_passing);
    }
} 
```

现在，这就是 Perl，它使猴子补丁变得非常简单（上面的“重要行”替换了`Student::min_passing_grade`运行时的实现）。您还可以将 questino 中的值设置为默认为常量的属性，甚至提供常量文件的特殊版本以供单元测试使用。

在没有真正强大的性能要求的情况下，我将选择上述方法，而不是让值成为一个真正的常数。只有当我找不到从单元测试中注入我想要的值的方法时，我才会使用常用定义的常量。我认为在几乎任何情况下你都不应该做的是在这个测试中复制常量，毕竟这是为了确保逻辑*是*`Student`正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:36:43.223

首选是根本不使用常量，而是使其成为传递的接口的属性。这就是依赖注入的工作原理（这反过来又有助于 TDD）。

然后，您将使用测试（或模拟）框架来生成测试。注意，您可能希望在目标值的任一侧测试多个值。您还需要测试数据类型的边界以捕获上溢/下溢错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T18:17:29.233

正如我过去一直试图操作的那样：单​​元测试应该检查所有可能的边界条件/压力测试特定功能或整个功能的子集，并且更大的回归套件应该测试整个程序的业务需求有效性边。

因此，在您的示例中，第一个测试将在我的单元测试中，第二个在我的回归中。

然而，我是这个行业的新手，我很想知道我是否走在正确的轨道上。

# ruby-on-rails - 奇怪的字符编码问题

> ID：12356076
> 
> 赞同：1
> 
> 时间：2012-09-10T16:46:44.870
> 
> 标签：ruby-on-rails, postgresql, encoding, character-encoding

我有一些数据已导入 Postgres，用于 Rails 应用程序。然而不知何故，外国口音变得奇怪了：

*   `ä`显示为`âÂ§`
*   `á`显示为`âÂ°`
*   `é`显示为`âÂ©`
*   `ó`显示为`ââ¥`

我很确定问题出在数据的完整性上，而不是 Rails 的任何问题。它似乎与我尝试的任何编码都不匹配：

```
# Replace "cp1252" with any other encoding, to no effect
"TrollâÂ§ttan".encode("cp1252").force_encoding("UTF-8") #-> junk 
```

如果有人能够确定我正在遭受哪种编码混淆，那就太好了。

作为最后的手段，我可​​能不得不手动替换每个损坏的重音字符，但如果有人可以建议一个编程解决方案（或者甚至是解决这个问题的起点——我发现它很难调试），我会五、感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:52:24.590

使用最新版本的 PostgreSQL 几乎不可能在 UTF8 数据库中包含无效的 UTF8。不过，还有其他可能导致该输出的合理可能性。

在`é`显示为的典型情况下`Â©`，要么：

1.  数据库的内容是有效的，但是某些客户端层将数据库中的字节解释为好像它们是 iso-latin-something 而它们是 UTF8。

2.  内容有效且 SQL 客户端层有效，但您正在查看的终端/软件/网页配置为 iso-latin1 或类似的单字节编码（win1252、iso-latin9.. .)。

3.  数据库的内容由具有有效 UTF8 编码的错误字符组成。如果您采用 iso-latin-something 字节，将它们转换为 UTF8 表示，然后将生成的字节流视为仍在 iso-latin 中，然后再次将其重新转换为 UTF8，然后插入进入数据库。

请注意，虽然该`Â©`序列在 UTF8 与 iso-latin 混淆中是典型的，但在所有示例字符串中出现附加`â`字符的情况并不常见。这可能是在主要误解之上的另一种误解的结果。如果您是第 3 种情况，这可能意味着基于搜索替换的自动修复将比已经很棘手的正常情况更难。

# mysql - 选择带有内连接的查询

> ID：12356081
> 
> 赞同：0
> 
> 时间：2012-09-10T16:46:55.800
> 
> 标签：mysql, inner-join

我有两张桌子：`dba_account`和`dba_account_password`。现在我正在尝试从两个表中填充信息。我正在使用这个查询。

```
SELECT da.account_name, da.account_id, da.status, da.manager_firstname, 
dap.live_password_change, dap.dev_password_change FROM dba_account da INNER JOIN 
dba_account_password dap ON da.account_id = dap.account_id 
```

现在，问题是 dba_account 有 1328 条记录（account_name），而 dba_account_password 只有 270 条记录。当我运行这个查询时，它只显示 270 条记录。但我也想显示其他用户名（不在 dba_account_password 中的用户名）。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:48:13.763

更改为`LEFT JOIN`

```
SELECT da.account_name, 
    da.account_id, 
    da.status, 
    da.manager_firstname, 
    dap.live_password_change, 
    dap.dev_password_change 
FROM dba_account da 
LEFT JOIN dba_account_password dap 
    ON da.account_id = dap.account_id 
```

An`INNER JOIN`只会为您提供两个表中匹配的记录。这是一个很好[的连接视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:14:14.003

在这种情况下，您可以使用左连接

```
SELECT da.account_name, da.account_id, da.status, da.manager_firstname, 
dap.live_password_change, dap.dev_password_change FROM dba_account da LEFT JOIN 
dba_account_password dap ON da.account_id = dap.account_id 
```

**左连接小说明**

**

```
table 1
userid  username
1        ABC
2        PQR
3        DEF
table2
userid  userRole
1       ACCOUNTANT
2       HO

RESULT OF LEFT JOIN :-

 left join on table1.userid=table2.userid
    userid   username  userrole
    1        ABC        ACCOUNTANT
    2        PQR        HO
    3        DEF

** 
```

# jms - 使用分布式主题将 JMS 消息传递到 Weblogic 集群中的单个节点

> ID：12356082
> 
> 赞同：0
> 
> 时间：2012-09-10T16:47:11.150
> 
> 标签：jms, weblogic, cluster-computing

我想让我的 Weblogic 集群监听分布式主题。每当发送关于该主题的 JMS 消息时，我希望集群中只有一个节点来处理此消息。这可能吗？

我不能使用分布式队列，因为该主题有多个侦听器（其他集群）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:34:31.963

对于 WebLogic 10.3.4，这可以通过 Partitioned TOpics 实现。为了启用此功能，您应该将复制模式设置为“分区”。默认值为“复制”，它将消息传递到集群中的每个节点。

# jquery - 使用隐藏图像的基本图像滑块

> ID：12356095
> 
> 赞同：0
> 
> 时间：2012-09-10T16:48:09.923
> 
> 标签：jquery, html, css

我正在尝试制作一个图像滑块，我基本上将图像水平排列（每个图像宽度为 700px，高度不同），然后使用 JQuery 为向右或向左滑动 700px 设置动画以显示下一个图像。我是 jQuery 的新手，我不确定我的下一步是什么以及我的 CSS 应该是什么样子才能完成这项工作。

**jQuery**

```
$("#slideRight").click(function() {
$("#slider").animate({right:700});
});

$("#slideLeft").click(function() {
$("#slider").animate({left:700});
}); 
```

**HTML**

```
<div id="slideButtons">
<input type="button" value="next L" id="slideLeft" />
<input type="button" value="next R" id="slideRight" />
</div>

<div id="slider">
<img src="slideTest.jpg" alt="" />
<img src="slideTest2.jpg" alt="" />
<img src="slideTest3.jpg" alt="" />
</div> 
```

**CSS**

```
#slider {
height: auto;
width: 700px;
position: relative;
background-color: blue; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:16:07.863

如果您真的有兴趣在此处构建图像滑块，我很快就会采用这种方式。

注意： - 我使用隐藏和显示方法来实现滑块，您可以使用多种方法来实现。请遵循逻辑而不是直接使用代码。

逻辑很简单

1.  生成 id 值设置为连续整数的图像
2.  通过设置属性 display none 使所有图像隐藏
3.  使第一个元素可见
4.  然后当单击下一个按钮时，检查您是否在最后一张图像，如果是则显示第一张图像，如果不是则显示下一张图像
5.  要查找下一张图像，您可以获取当前可见图像 id 并将其加 1 以获得下一张连续图像
6.  类似地，对于上一个，您可以减去以显示上一个图像
7.  在显示上一张图像时，您必须检查您是否正在查看第一张图像，如果是，则显示最后一张图像。否则通过按照步骤 6 计算 id 来显示上一个图像

这是我尝试为这个问题构建的示例粗略代码，（未经测试）

```
// First make the first image visible 
$(".slide-content img:first-child").show();

// Bind the click handler 
$("#slideRight").click(function() {

// if there is only one image in the slider then return false 
if($(".slide-content > img").length == 1)
{
    return false;

}

// Set current to the visible element 
var current = $(".slide-content > img:visible").attr('id');

// hide the visible element 
$('#'+current).hide();

if(current == $(".slide-content > img").length ) 
{
    current = 1;    
}
else
{
    current = parseInt(current)+1;  
}

$('#'+current).show();

});

$("#slideLeft").click(function() {
if($(".slide-content > img").length == 1)
{
    return false;

}

var current = $(".slide-content  > img:visible").attr('id');
$('#'+current).hide();
if(current == 1) 
{
    current = $(".slide-content > img").length; 
}
else
{
    current = parseInt(current)-1;  
}

$('#'+current).show();

});

<div id="slideButtons">
<input type="button" value="next L" id="slideLeft" />
<input type="button" value="next R" id="slideRight" />
</div>

<div class="slide-content">
<img id = '1' src="slideTest.jpg" alt="" />
<img id = '2' src="slideTest2.jpg" alt="" />
<img id = '3' src="slideTest3.jpg" alt="" />
</div> 
```

# sql-server - 联合并为每条记录获得 Top1..？

> ID：12356098
> 
> 赞同：0
> 
> 时间：2012-09-10T16:48:21.403
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, union

在下面的查询中，我试图过滤类型值为“ABC”和“XYZ”的记录。

每个 ca_id 最多可以有 3 种类型。（ABC、XYZ 和 ''）

而且我必须得到一种空类型，为此我使用联合。

问题是当我使用联合并选择前 1 ..我在任何时候只为一个 ca_id 获得 3 种类型。其余情况有 2 种类型。（ABC 和 XYZ）

有人可以建议如何为每个 ca_id 记录获取空类型。

谢谢

```
select lo_id,ca_id,Type,Status,Category

from (

select lo_id,ca_id,Type,Status,Category

from (

select  distinct  ln.lo_id,cast.ca_id, Type,Status, 
 'Category'= case when Type='ABC' then 'ABC'
when Type='XYZ' then 'XYZ' else ' ' End

 FROM  ln                           
INNER JOIN cast ON cast.ca_id = ln.ca_id
INNER JOIN  Type ON Type.TypeId = cast .TypeId 

 ) as Q1
where  Category in ('ABC','XYZ')

union

select  top 1  lo_id,ca_id,Type,Status,(select Category where Category in (' ',null)) 
from (

select  distinct  ln.lo_id,cast.ca_id, Type,Status, 
 'Category'= case when Type='ABC' then 'ABC'
when Type='XYZ' then 'XYZ' else ' ' End

 FROM  ln   
INNER JOIN cast ON cast.ca_id = ln.ca_id
INNER JOIN  Type ON Type.TypeId = cast .TypeId
)  as Q2
) as Q3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:06:15.697

您可以使用 row_number() 函数在没有联合的情况下执行此操作。以下获取 XYZ 和 ABC 的所有记录，其他类别仅获取第一条记录：

```
select lo_id, ca_id, type, status, category
from (select distinct  ln.lo_id, cast.ca_id, Type, Status, 
             (case when Type='ABC' then 'ABC'
                   when Type='XYZ' then 'XYZ'
                   else ''
              End) as category,
             ROW_NUMBER() over (partition by ca_id, type) as seqnum
      FROM  ln INNER JOIN
            cast
            ON cast.ca_id = ln.ca_id INNER JOIN
            Type
            ON Type.TypeId = cast.TypeId 
     ) t
 where TYPE in ('ABC', 'XYZ') or seqnum = 1 
```

顺便说一句，CAST 和 TYPE 不是用于列和别名的好名称，因为它们在 SQL 中还有其他含义。

# java - 使用 JAVA 按 2 个字段对文件中的行进行排序

> ID：12356101
> 
> 赞同：0
> 
> 时间：2012-09-10T16:48:30.733
> 
> 标签：java, sorting

我在一家拥有许多 COBOL 程序的印刷公司工作，我的任务是将 COBOL 程序转换为 JAVA 程序。我在一次转换中遇到了障碍。我需要制作一个文件，每行都是一条记录，并且每行数据都被阻止。

一条线的例子是

```
60000003448595072410013 FFFFFFFFFFV 80     0001438001000014530020120808060134 
```

我需要按 19-23 个字符的 5 位数字对数据进行排序，然后按一行上的第一个字符对数据进行排序。

```
BufferedReader input;
BufferedWriter output;

String[] sort, sorted, style, accountNumber, customerNumber;
String holder;

int lineCount;

int lineCounter() {

    int result = 0;
    boolean eof = false;

    try {
        FileReader inputFile = new FileReader("C:\\Users\\cbook\\Desktop\\Chemical\\"
             + "LB26529.fil");
        input = new BufferedReader(inputFile);

        while (!eof) {

            holder = input.readLine();
            if (holder == null) {
                eof = true;
            } else {
                result++;
            }
        }

    } catch (IOException e) {
        System.out.println("Error - " + e.toString());
    }

    return result;
}

chemSort(){
    lineCount = this.lineCounter();
    sort = new String[lineCount];
    sorted = new String[lineCount];
    style = new String[lineCount];
    accountNumber = new String[lineCount];
    customerNumber = new String[lineCount];

    try {
        FileReader inputFile = new FileReader("C:\\Users\\cbook\\Desktop\\Chemical\\"
             + "LB26529.fil");
        input = new BufferedReader(inputFile);

        for (int i = 0; i < (lineCount + 1); i++) {
            holder = input.readLine();
            if (holder != null) {
            sort[i] = holder;
            style[i] = sort[i].substring(0, 1);
            customerNumber[i] = sort[i].substring(252, 257);
            }
        }
        } catch (IOException e) {
            System.out.println("Error - " + e.toString());
    }
} 
```

这是我到目前为止所拥有的，我不确定从这里去哪里，或者即使这是对文件进行排序的正确方法。文件排序后，它将被存储到另一个文件中，并用另一个程序再次处理，以便准备好打印。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:03:24.077

```
List<String> linesAsList = new ArrayList<String>();
String line=null;
while(null!=(line=reader.readLine())) linesAsList.add(line);

Collections.sort(linesAsList, new Comparator<String>() {
  public int compare(String o1,String o2){
    return (o1.substring(18,23)+o1.substring(0,1)).compareTo(o2.substring(18,23)+o2.substring(0,1));
  }});

for (String line:linesAsList) System.out.println(line); // or whatever output stream you want 
```

这部手机的自动更正功能搞乱了我的回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:10:36.410

将文件读入 ArrayList（而不是数组）。使用以下方法：

```
// to declare the arraylist
ArrayList<String> lines = new ArrayList<String>();

// to add a new line to it (within your reading-lines loop)
lines.add(input.readLine()); 
```

然后，使用自定义比较器对其进行排序：

```
Collections.sort(lines, new Comparator<String>() {
   public int compare(String a, String b) {
       String a5 = theFiveNumbersOf(a);
       String b5 = theFiveNumbersOf(b);
       int firstComparison = a5.compareTo(b5);
       if (firstComparison != 0) { return firstComparison; }
       String a1 = theDigitOf(a);
       String b1 = theDigitOf(b);
       return a1.compareTo(b1);
   }
}); 
```

（不清楚你想比较什么 5 位或什么数字；我把它们作为函数留给你填写）。最后，将其写入输出文件：

```
BufferedWriter ow = new BufferedWriter(new FileOutputStream("filename.extension"));
for (String line : lines) {
   ow.println(line);
}
ow.close(); 
```

（根据需要添加导入和尝试/捕获）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:20:02.820

此代码将根据大型机排序参数对文件进行排序。

您将 3 个参数传递给类的`main`方法`Sort`。

1.  输入文件路径。
2.  输出文件路径。
3.  大型机排序格式中的排序参数。在你的情况下，这个字符串将是`19,5,CH,A,1,1,CH,A`

第一个类，即`SortParameter`类，保存排序参数的实例。排序参数字符串中的每组 4 个参数都有一个实例。这个类是一个基本的getter/setter类，除了`getDifference`方法。该`getDifference`方法将一些排序比较器代码引入到`SortParameter`类中，以简化类中的比较器代码`Sort`。

```
public class SortParameter {

    protected int fieldStartByte;
    protected int fieldLength;
    protected String fieldType;
    protected String sortDirection;

    public SortParameter(int fieldStartByte, int fieldLength, String fieldType,
            String sortDirection) {
        this.fieldStartByte = fieldStartByte;
        this.fieldLength = fieldLength;
        this.fieldType = fieldType;
        this.sortDirection = sortDirection;
    }

    public int getFieldStartPosition() {
        return fieldStartByte - 1;
    }

    public int getFieldEndPosition() {
        return getFieldStartPosition() + fieldLength;
    }

    public String getFieldType() {
        return fieldType;
    }

    public String getSortDirection() {
        return sortDirection;
    }

    public int getDifference(String a, String b) {
        int difference = 0;

        if (getFieldType().equals("CH")) {
            String as = a.substring(getFieldStartPosition(), 
                    getFieldEndPosition());
            String bs = b.substring(getFieldStartPosition(), 
                    getFieldEndPosition());
            difference = as.compareTo(bs);
            if (getSortDirection().equals("D")) {
                difference = -difference;
            }
        }

        return difference;
    }

} 
```

该类`Sort`包含读取输入文件、对输入文件进行排序和写入输出文件的代码。这个类可能会使用更多的错误检查。

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class Sort implements Runnable {

    protected List<String> lines;

    protected String inputFilePath;
    protected String outputFilePath;
    protected String sortParameters;

    public Sort(String inputFilePath, String outputFilePath,
            String sortParameters) {
        this.inputFilePath = inputFilePath;
        this.outputFilePath = outputFilePath;
        this.sortParameters = sortParameters;
    }

    @Override
    public void run() {
        List<SortParameter> parameters = parseParameters(sortParameters);
        lines = read(inputFilePath);
        lines = sort(lines, parameters);
        write(outputFilePath, lines);
    }

    protected List<SortParameter> parseParameters(String sortParameters) {
        List<SortParameter> parameters = new ArrayList<SortParameter>();
        String[] field = sortParameters.split(",");
        for (int i = 0; i < field.length; i += 4) {
            SortParameter parameter = new SortParameter(
                    Integer.parseInt(field[i]), Integer.parseInt(field[i + 1]),
                    field[i + 2], field[i + 3]);
            parameters.add(parameter);
        }
        return parameters;
    }

    protected List<String> sort(List<String> lines,
            final List<SortParameter> parameters) {

        Collections.sort(lines, new Comparator<String>() {
            @Override
            public int compare(String a, String b) {
                for (SortParameter parameter : parameters) {
                    int difference = parameter.getDifference(a, b);
                    if (difference != 0) {
                        return difference;
                    }
                }
                return 0;
            }
        });

        return lines;
    }

    protected List<String> read(String filePath) {
        List<String> lines = new ArrayList<String>();
        BufferedReader reader = null;
        try {
            String line;
            reader = new BufferedReader(new FileReader(filePath));
            while ((line = reader.readLine()) != null) {
                lines.add(line);
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (reader != null) {
                    reader.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return lines;
    }

    protected void write(String filePath, List<String> lines) {
        BufferedWriter writer = null;
        try {
            writer = new BufferedWriter(new FileWriter(filePath));
            for (String line : lines) {
                writer.write(line);
                writer.newLine();
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (writer != null) {
                    writer.flush();
                    writer.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        if (args.length < 3) {
            System.err.println("The sort process requires 3 parameters.");
            System.err.println("  1\. The input file path.");
            System.err.println("  2\. The output file path.");
            System.err.print  ("  3\. The sort parameters in mainframe ");
            System.err.println("sort format. Example: 15,5,CH,A");
        } else {
            new Sort(args[0], args[1], args[2]).run();
        }
    }

} 
```

# jquery - 带有 Pyramid 对象参数的 jQuery.load() 导致“无法解码 JSON 对象”

> ID：12356102
> 
> 赞同：1
> 
> 时间：2012-09-10T16:48:31.983
> 
> 标签：jquery, python, ajax, json, pyramid

像这样的简单调用：

```
type = 'theType';
category = 'theCategory';
$('#mydiv').load(
  '${request.route_url('theUrl')}',
  {type:type, category:category}
); 
```

当我尝试访问对象时导致“无法解码 JSON 对象”错误`request.json_body`。查看请求，我可以看到它是一个 POST，X-Requested-With: XMLHttpRequest，并且正文是`type=theType&category=theCategory`，当然不是 JSON。

我究竟做错了什么？

我正在使用 Pyramid 1.3、Mako 0.72、jQuery 1.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:50:57.600

`jQuery.load()`不发送 JSON *。*在金字塔中，只需像使用普通 POST 请求一样访问表单变量：

```
request.params['type'] 
```

等等

# jquery - 在捏手势缩放图像

> ID：12356116
> 
> 赞同：4
> 
> 时间：2012-09-10T16:49:47.047
> 
> 标签：jquery, html, mobile, touch, pinch

我正在使用 jQuery [touchy](https://github.com/HotStudio/touchy)插件来检测捏合事件，让用户能够放大/缩小图像。这是我的代码的要点：

```
变量 w = 800,
    h = 600;
$('img').on('touchy-pinch', function (e, $target, data) {
    $(这个).css({
        宽度：w * data.scale，
        高度：h * data.scale
    });
});

```

其中自定义数据对象包含以下内容：

*   规模
*   以前的规模
*   当前点
*   起点
*   开始距离

它在第一次捏合时效果很好，但是一旦我的手指离开屏幕然后我再次尝试这样做，图像就会重新缩放。如何修改我的处理程序以使图像从中断处继续而不是重新缩放？使用数据的 previousScale 并没有帮助，因为 previousScale 也被重置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:53:02.243

这里的问题是您没有将变量 w 和 h 重置为其后缩放值，只有 css，因此样式在另一个缩放事件中恢复为 800x600。`w*data.scale`您需要一个持久的 w和h 设置为`h*data.scale`scale 事件。

# jenkins - jenkins \ 强制项目在带有输入参数的特定从属设备上运行？

> ID：12356119
> 
> 赞同：4
> 
> 时间：2012-09-10T16:49:51.657
> 
> 标签：jenkins, master-slave

如果我有工作在詹金斯中调用一系列工作，我可以给它们所有参数以将它们绑定到特定服务器吗？

我谈论目前我需要在项目级别指定的“限制该项目可以运行的位置”（我可以将其作为输入参数吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-02T21:03:38.073

使用这个插件： [https ://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)

您可以通过 ParameterizedTrigger 或使用 API 为作业提供参数并提供节点名称（或标签）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T23:14:31.033

您应该能够创建一个字符串输入参数，然后在“限制此项目可以运行的位置”框中使用它。因此，如果您的字符串参数被称为 TAG 您将放入`${TAG}`框中。

然后，您可以使用[参数化触发器](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)插件将其传递给下游作业，基本上将它们全部绑定到同一个节点。

# guice - 使用 guice servlet 设置 web.xml 侦听器和上下文参数

> ID：12356128
> 
> 赞同：4
> 
> 时间：2012-09-10T16:50:19.783
> 
> 标签：guice, guice-servlet

我正在使用 guice 和 guice servlet 开发一个 Web 项目。我已经设置了 guice 过滤器和监听器。

通过此设置，我可以使用 serve(...) 和 filter(...) 方法在 servlet 模块中模拟 web.xml 过滤器和 servlet。

现在的问题：

在 guice servlet 页面上，他们声称不再需要 web.xml，但我无法弄清楚如何：

注册上下文监听器（web.xml 中的监听器标签）和

添加上下文参数（我可以设置初始化参数）

这甚至可以使用 guice servlet 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:13:03.183

我不了解监听器，但是管理 servlet 上下文非常简单。在您的 ServletModule.configureServlets() 中：

```
getServletContext().setAttribute("productionMode", "true"); 
```

# java - 如何在 XSL 中添加空间？

> ID：12356131
> 
> 赞同：3
> 
> 时间：2012-09-10T16:50:28.800
> 
> 标签：java, xslt, xslt-1.0

我正在使用 xsl 创建一个 pdf 报告文件。在标题上，我需要一个标题图像和报告标题。我能够做到。现在的问题是报告的其余部分覆盖了图像。我尝试添加一些空白行，但它对我不起作用。

在 xsl Header 中，第一行有一个表格，我正在添加报告名称，第二行我正在添加图像。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T16:55:49.853

使用 Apache FOP，为了输出`&nbsp;`HTML 格式的空格，您必须插入`&#160;`.

所以如果你想插入一个空行，你只需要写一个`fo:block`内容是`&#160;`这样的

```
<fo:block>&#160;</fo:block> 
```

**编辑**

`&#160;`一直为我工作，但你也可以尝试`&#x00A0;`看看它是否有效。

否则你可以使用`fo:leader`输出一个空行，像这样

```
<fo:block>
    <fo:leader />
</fo:block> 
```

[`<fo:leader>`](http://www.w3schools.com/xslfo/obj_leader.asp)没有任何属性将生成一个适合整个页面宽度的空行，生成一个空行。

还有另一种方法涉及使用[`space-before`](http://www.w3schools.com/xslfo/xslfo_blocks.asp)属性指定文本块之前所需的空间量，如下所示

```
<fo:block>
    <!-- your header -->
</fo:block>
<fo:block space-before="1pt">
    blah blah
</fo:block> 
```

# objective-c - 将 NSMutableAttributedString 写入/读取到 Plist

> ID：12356134
> 
> 赞同：3
> 
> 时间：2012-09-10T16:50:47.570
> 
> 标签：objective-c, cocoa, rtf, nstextview, nsattributedstring

好的，我们在这里：

*   我有一个`NSTextView`
*   我得到它的`NSMutableAttributedString`内容
*   我无法将其读/写到 plist

通过使用 Rob 的代码（[在 NSAttributedString 中保存自定义属性](https://stackoverflow.com/questions/2626667/saving-custom-attributes-in-nsattributedstring)），我取得了一些进展（我正在设法将数据写入磁盘），但我无法恢复它（=`NSKeyedUnarchiver`返回`nil`）。

* * *

**编码：**

```
// where MAS --> NSMutableAttributedString

NSData* stringData = [NSKeyedArchiver archivedDataWithRootObject:MAS]; 
```

**解码：**

```
NSMutableAttributedString* mas = (NSMutableAttributedString*)[NSKeyedUnarchiver unarchiveObjectWithData:dat]; 
```

有任何想法吗？任何可能的解决方法（即使不使用`NSCoder`，我怀疑它是否适用于 RTF...）都将受到欢迎！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:56:37.203

这就是它的解决方法。

**`NSAttributedString`-> `NSData`：**

```
NSData* j = [(NSMutableAttributedString*)MAS RTFDFromRange:NSMakeRange(0,[[MAS string] length]) 
                                        documentAttributes:nil]; 
```

**`NSData`->`NSAttributedString`**

```
NSMutableAttributedString* mas = [[NSMutableAttributedString alloc] initWithRTFD:dat 
                                                              documentAttributes:nil]; 
```

* * *

就那么简单。

# c# - 如何从数据库（SQL Server）创建 MenuStrip 动态（在 winform C#.Net 中）？

> ID：12356138
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:50:56.157
> 
> 标签：c#, sql, winforms, c#-4.0

我想从数据库（SQL Server）创建 MenuStrip 动态（在 winform C#.Net 4.0 中）并从用户身份验证中管理它。

现在，我不知道如何为我的菜单创建 SQL 表、菜单和创建事件处理程序。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:01:04.093

只需从数据库加载您想要的数据，选择用户必须看到的内容，
然后将一个容器放在您希望 menuStrip 所在的位置（例如面板）
，然后使用类似的东西：

```
List<string> menuItems = LoadUserMenuItems();
        ContextMenuStrip menu = new ContextMenuStrip();
        menu.Dock = DockStyle.Fill;
        foreach (var menuItem in menuItems)
        {
            MenuItem item = new MenuItem(menuItem);
            item.Text = menuItem;
            item.Click += new EventHandler(item_Click);// item_click is event handler name
            // item.MenuItems.Add(); you could use this to add sub items
        }

        panel1.Controls.Add(menu); 
```

但请下次你表现出一些努力

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T19:32:10.870

您可以在 SQL 中创建表：

```
CREATE TABLE [dbo].[MenuItems]
(
[MenuID] [int] IDENTITY(1,1) NOT NULL,
[MenuTitle] [nvarchar](50) NOT NULL,
[MenuIdParent] [int] NULL,
[MenuEventHandler] [nvarchar](50) NULL,
[MenuLanguageID] [int] NOT NULL
 ) ON [PRIMARY]
 GO
 ALTER TABLE [dbo].[MenuItems] ADD  CONSTRAINT [DF_MenuItems_MenuLanguageID]  DEFAULT ((1)) FOR [MenuLanguageID]
 GO 
```

# types - XSD 类型缩写在哪里定义

> ID：12356140
> 
> 赞同：1
> 
> 时间：2012-09-10T16:51:12.537
> 
> 标签：types, xsd

我正在尝试理解具有以下元素的 XSD 文件

```
<xs:element name="Number" type="an..80M"/> 
```

我熟悉字符串、日期、布尔值、十进制等简单类型。我熟悉在 XSD 或导入的 XSD 中定义的复杂类型。

但是什么是**“an..80M”**？我在哪里可以找到这些缩写的定义（如果这甚至是正确的术语）？

XSD 文件以此开头：

```
<xs:schema xmlns="http://www.surescripts.com/messaging" 
 xmlns:xs="http://www.w3.org/2001/XMLSchema" 
 targetNamespace="http://www.surescripts.com/messaging" 
 elementFormDefault="qualified"> 
```

所以我认为这不能在外部模式中定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:54:09.340

这些是您的架构提供者定义的自定义类型。这些不是标准数据类型。因此，请检查导入或包含的架构。

# html - Wordpress 儿童主题未出现在仪表板中

> ID：12356143
> 
> 赞同：4
> 
> 时间：2012-09-10T16:51:28.770
> 
> 标签：html, css, wordpress, bitnami

据我了解，我转到我的网站仪表板 > 外观 > 主题，在那里我应该选择我创建的子主题。但它没有出现在那里。

这是我的主题文件夹的目录结构：

```
---- wp-content
   ----- themes
      ----- PlatformPro_v1.3.0
           ----- style.css
       ----- PlatformProChildTheme
            ----- style.css 
```

这正是我在 PlatformProChildTheme style.css 中所拥有的：

```
/*
Theme Name:     PChild
Description:    PChild
Author:         John Smith
Template:       PlatformPro_v1.3.0
*/

@import url("../PlatformPro_v1.3.0/style.css"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T23:33:32.947

`Template:`参数错误：

> **模板**。（必填）父主题的目录名，区分大小写。

[http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)

它应该读`Template: PlatformPro_v1.3.0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:08:08.643

子主题是您激活的主题的一部分。因此，如果您激活 Platformpro，并且您在父主题文件夹中有子主题文件夹，那么一旦您激活父主题，它将被激活。

只要你的路径名是正确的，你上面显示的正是你应该做的。

# android - Android手机网页中的日期选择器

> ID：12356151
> 
> 赞同：1
> 
> 时间：2012-09-10T16:51:57.080
> 
> 标签：android, datepicker

我正在编写一个只能在 Android 手机上使用的网页。这是一个 html 页面，里面有一些 javascript 元素。

我想要的只是一个带有日期的预填充字段，然后允许用户选择日期以根据需要选择不同的日期。

有人可以为此推荐所需的工具吗？即 html、javascript、查询等。

我研究过的一些方法似乎不起作用。

谢谢史蒂夫

# php - 如何通过ajax从服务器发送png图像在浏览器中显示

> ID：12356152
> 
> 赞同：12
> 
> 时间：2012-09-10T16:52:04.070
> 
> 标签：php, javascript, ajax, image, png

我一直很难完成一项非常正常的任务。我将图像上传并保存到我的网络服务器，并将文件的路径保存在 MySQL 数据库中（这一切正常）。不起作用的是从服务器获取图像文件并通过 ajax 将其显示在页面上。

最初我试图从数据库中检索路径，并`src`使用图像路径更新标签的属性。这是可行的，但是这样所有的图像都在服务器上的一个文件夹中，人们都可以访问它们。不是很好。我只能让这些用户可以访问属于某些用户的图片。

为了限制对这些照片的访问，我在该文件夹上添加了一个 Apache 指令，它成功地限制了访问。然后问题变成了我无法通过将`src`属性设置为该路径来在浏览器中显示图像。请参阅我的帖子：[https ://serverfault.com/questions/425974/apache-deny-access-to-images-folder-but-still-able-to-display-via-img-on-site](https://serverfault.com/questions/425974/apache-deny-access-to-images-folder-but-still-able-to-display-via-img-on-site)

最后我了解到我必须使用 PHP 直接从服务器读取图像数据并将这些数据发送到浏览器。我使用了[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)函数，该函数用于将服务器上的图像文件 (PNG) 转换为字符串。我在 ajax 调用中将此字符串返回给浏​​览器。我无法得到的是： **如何使用 JavaScript 将此字符串转换回图像？**

请参阅此代码：

```
$.ajax({
    url: get_image.php,
    success: function(image_string){
        //how to load this image string from file_get_contents to the browser??
    }
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T17:03:27.557

您可以向被禁止访问图像的用户显示默认的“禁止访问”图像：

```
<?php

$file = $_GET['file']; // don't forget to sanitize this!

header('Content-type: image/png');
if (user_is_allowed_to_access($file)) {
    readfile($file);
}
else {
    readfile('some/default/file.png');
} 
```

而且，在客户端：

```
<img src="script.php?file=path/to/file.png" /> 
```

* * *

或者，如果您真的想要或需要通过 Ajax 发送数据，您可以对其进行 Base64 编码：

```
<?php

echo base64_encode(file_get_contents($file)); 
```

[并使用Data URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)将响应放在`img`标签中

```
var img = '<img src="data:image/png;base64,'+ server_reponse +'"/>'; 
```

鉴于 Base64 编码的数据比原始数据大得多，您可以发送原始数据并在浏览器中使用[library](http://www.webtoolkit.info/javascript-base64.html)对其进行编码。

* * *

这对你有意义吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T16:58:39.427

与其通过 AJAX 获取 get_image.php，不如直接使用：

```
<img src="get_image.php" /> 
```

这实际上是一样的。您可以只使用 AJAX 来`<img>`动态更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T16:56:43.020

你不能通过ajax来做到这一点。

你可以这样做：

```
<img src="script.php?image=image_name" /> 
```

然后使用 JavaScript 更改查询字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T17:01:16.603

您实际上可以`img`在浏览器的标签内嵌入图像数据，因此 ajax 代码可能如下所示：

```
$.ajax({
    url: get_image.php,
    success: function(image_string){
        $(document.body).append("<img src='data:image/gif;base64," + base64_encode(image_string) + "' />);
    }
}); 
```

请注意，您将需要编写此`base64_encode`函数。看看[这个问题](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript#246813)- 那里给出了函数。

# ios - DatePicker 不返回所选日期 iOS

> ID：12356154
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:52:18.683
> 
> 标签：ios, date, datepicker, selected, picker

我正在尝试从 DatePicker 获取所选日期，而我得到的只是当前系统日期。任何想法为什么？

我是通过模拟器来做的，因为我没有设备。这是我用来获取日期的代码。

```
 [self scheduleLocalNotification:timerPicker.date]; 
```

我也用它来看看它是否有效：

```
 NSDate *d = [timerPicker date];

 [self scheduleLocalNotification:d]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:45:57.073

在多次重新启动 XCode 并且没有更改任何代码后，它神奇地开始工作。

# visual-c++ - 结构->联合结构

> ID：12356155
> 
> 赞同：0
> 
> 时间：2012-09-10T16:52:30.830
> 
> 标签：visual-c++, struct, unions

我有这个结构：

```
struct foo {
   int a;
   union {
      struct {
         int b;
         struct bar
         {
            int c;
            int d;
         } *aBar;
      } in;
   } u;
}; 
```

如何在 Visual C++ 中声明 bar 类型的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:20:51.470

当您声明这样的结构时：

```
struct 
{ 
    int b;  
} in; 
```

您实际上是在创建一个具有 name 的对象`in`，具有未命名的数据类型。此数据类型将由编译器在内部命名，并取决于编译器。上面给出的样式没有声明`in`为类型，而是变量！

如果您想使其成为一种类型，请使用任一给定方法：

```
// Approach 1
struct in{...};

// Approach 2
typedef struct {..} in; // in is now a type, because of `typedef` 
```

如果您有支持 C++0x 的编译器，并且特别是 type`decltype`关键字，您可以将它用于第一种样式（它`in`生成一个变量）。例子：

```
decltype(in) in_var;
in_var.b = 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:30:29.987

谢谢Ajay，我这样解决了：

```
foo *k;
decltype(k->u.in.aBar) j;
j->c = 1;
j->d = 1; 
```

# css - CSS :nth-of-type() 和 :not() 选择器？

> ID：12356158
> 
> 赞同：17
> 
> 时间：2012-09-10T16:53:00.830
> 
> 标签：css, css-float, css-selectors

我将 25% 宽的文章并排放置。我`clear:both`在每四个元素之后添加一个。但是我需要在元素之间插入一个图形分节符。它必须在`<ul>`. 为了有效，我也将“分节符”（下面示例中的第一个 li 项目）包装成 a `<li>`。

```
<ul>
    <li class="year"><h1>THIS IS A SECTION Break and 100% wide</h1></li>
    <li>This is a article and only 25% wide</li>
    <li>This is a article and only 25% wide</li>
    <li>This is a article and only 25% wide</li>
    <li>This is a article and only 25% wide</li>
</ul> 
```

我希望每四个元素都是一个换行符，所以我使用...</p>

```
ul li:nth-of-type(4n+1) { clear: both; } 
```

但是我希望`li.year`不受这种行为的影响，所以我尝试了这个

```
ul li:not(.year):nth-of-type(4n+1) { clear: both; } 
```

现在`<li>`我上面的示例代码中的最后一个浮动到下一行，但这不应该发生，因为第一个`<li>`不是浮动文章之一，而是包含一个标题。

`:not`是否可以将和`nth-of-type()`选择器相互堆叠？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T17:03:37.507

你拥有的选择器——

```
ul li:not(.year):nth-of-type(4n+1) { background: yellow; } 
```

-- 完全正确（[如突出显示选择器所示](http://jsfiddle.net/3Ycu9/)）。

~~问题在于您如何使用`clear`. 如果您使用`clear:right`, 然后`clear:left`在以下元素上使用，它会起作用：~~

 ~~```
ul li:not(.year):nth-of-type(4n+1) { clear: right;  }
ul li:not(.year):nth-of-type(4n+2) { clear: left;  } 
```~~  ~~**根据评论编辑** 删除的文字是胡说八道。根据 BoltClock 的回答，真正的问题是`:not`伪类不会影响`nth-of-type`. `:not`在这种情况下调整选择器偏移是巧合，但如果模式不同，则不会起作用。

```
ul li:not(.year):nth-of-type(4n+2) { clear: left;  } 
```

[http://jsfiddle.net/8MuCU/](http://jsfiddle.net/8MuCU/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T16:56:14.300

您`:not()`似乎不起作用的原因是因为它`li.year`与您的其余`li`元素（自然）具有相同的元素类型，因此`:nth-of-type(4n+1)`无论`.year`类如何都匹配相同的元素。

也不可能按顺序堆叠选择器。这不是他们的工作方式。

`li`由于HTML 标记规则，您无法将元素更改为其他元素，并且`:nth-match()`在[未来的规范](http://www.w3.org/TR/selectors4)中并且尚未实现，因此您必须更改`:nth-of-type()`公式以适应结构：

```
ul li:not(.year):nth-of-type(4n+2) { clear: both; } 
```~~

# .htaccess - 使现有的 CMS 网站与移动网站兼容 不重定向

> ID：12356160
> 
> 赞同：2
> 
> 时间：2012-09-10T16:53:06.133
> 
> 标签：.htaccess, mobile, content-management-system, expressionengine

使现有的 CMS 网站与移动网站兼容 不重定向

大家好。我目前正在创建我们使用的表达式引擎网站的移动版本。

我遇到了这个问题，因为通常我可以只使用媒体查询，或者使用重定向脚本。

然而，移动网站的布局将与桌面完全不同，所以我不能只摆弄 CSS 的媒体请求（因为网站看起来不同）。

如果设备是移动设备，我正在考虑使用 javascript 擦除代码或标记 (php)，但这意味着可能在页面加载时加载两个版本的代码（不适合移动设备）。例如，一个代码用于桌面，另一个代码用于移动。

我无法更改文件名，例如 (mobile_index)，因为它是 CMS，并且链接无法正确链接。我已经尝试了几次，并且还编辑了 .HTACCESS 文件，但它根本不起作用。

因此，如果有人知道如果设备是移动的，我该如何更改页面的代码，但不能更改文件名、目录或其中任何一个:-)

干杯

达拉格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:30:00.090

为什么没有重定向？如果我处于你几个月前的位置，我会以完全不同的方式处理这个问题：

*   通过 ExpressionEngine 安装多站点管理器：http: [//expressionengine.com/user_guide/cp/sites/index.html](http://expressionengine.com/user_guide/cp/sites/index.html)
*   添加另一个网站 - 移动
*   给它一个合适的域名，比如 m.domain.com
*   给它自己的模板组
*   ...并使用[http://github.com/sebarmeli/JS-Redirection-Mobile-Site/重定向](http://github.com/sebarmeli/JS-Redirection-Mobile-Site/)

现在，您可以从同一个 CMS 管理两个安装，并且**两个安装都可以访问现有的频道、模块、扩展和成员**。这将使您的代码保持快速和干净。

添加一堆条件只会减慢安装速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:22:19.000

实际上，您可能会弄乱媒体查询-这是最灵活的。对于这样的事情，JS 真的是矫枉过正。在较大尺寸时，UL>LI 菜单可能会出现，而在较小尺寸时，它们可能会被隐藏（显示：无）并切换到选择列表；可以替换 div，删除元素或调整大小。我还将它们与不同的片段或嵌入相结合，以便您也可以定制内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:58:34.853

您可以尝试类似[MX Mobile Device Detect](http://devot-ee.com/add-ons/mx-mobile-device-detect)。它为您提供了一些变量，可以检测用户是否在移动设备上，您可以在模板的条件中使用这些变量。

# mysql - 在mysql通用查询日志中获取源的IP地址？

> ID：12356162
> 
> 赞同：0
> 
> 时间：2012-09-10T16:53:12.063
> 
> 标签：mysql, database

有什么方法可以让我确定哪个服务器正在执行 sql 插入以及查询的详细信息？我不知道我的插入内容来自哪里，并想确定来源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:02:04.933

如果您使用的是 PHP，那么；

这是显示您的IP地址的代码。

```
$ip=@$REMOTE_ADDR;
echo "<b>IP Address= $ip</b>"; 
```

**如果 register_global 关闭，IP 地址**

如果 at`php.ini`如果 register_global 设置为 Off，那么我们必须稍微更改脚本以获取地址。这里是

```
$ip=$_SERVER['REMOTE_ADDR']; 
```

> 用户查看当前页面的 IP 地址。

请注意，更改寄存器全局设置可能是一个安全问题，特别是在实时托管环境中，因此在这方面也请咨询您的主机。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# web-services - 使用axis2的web services，集成spring

> ID：12356163
> 
> 赞同：2
> 
> 时间：2012-09-10T16:53:16.297
> 
> 标签：web-services, spring, axis2

我用axis2创建了一个webservice。现在我正在与春天整合。在 web.xml 中，当 url 模式为 /services/listServices/PhysicianInfoImpl?wsdl 时，我想同时加载轴 servlet 和 spring 调度程序 servlet。但只有一个正在加载。我的 web.xml 是

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Physician</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
    <welcome-file>/axis2-web/index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <display-name>Apache-Axis Servlet</display-name>
    <servlet-name>AxisServlet</servlet-name>
    <servlet-class>org.apache.axis2.transport.http.AxisServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AxisServlet</servlet-name>
    <url-pattern>/servlet/AxisServlet</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>AxisServlet</servlet-name>
    <url-pattern>*.jws</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>AxisServlet</servlet-name>
    <url-pattern>/services/*</url-pattern>
  </servlet-mapping>
  <servlet>
    <display-name>Apache-Axis Admin Servlet Web Admin</display-name>
    <servlet-name>AxisAdminServlet</servlet-name>
    <servlet-class>org.apache.axis2.transport.http.AxisAdminServlet</servlet-class>
    <load-on-startup>100</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>AxisAdminServlet</servlet-name>
    <url-pattern>/axis2-admin/*</url-pattern>
  </servlet-mapping>
  <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/application-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/PhysicianInfoImpl*</url-pattern>
    </servlet-mapping>
  </web-app> 
```

# c - C中的内存分配运行时错误

> ID：12356167
> 
> 赞同：0
> 
> 时间：2012-09-10T16:53:27.220
> 
> 标签：c, memory-management, runtime-error

我创建了以下代码，一个用于可打印 ascii 的简单蛮力程序。用户传入起始密码长度和结束密码长度的参数。当我的程序运行时，我收到以下错误：

**输入：**

```
~$ Enter START length & END length ex:(8 10): 2 3 
```

**输出：**

```
... (more output above)
~|
~}
~~

*** glibc detected *** ./wordgen: double free or corruption (out): 0x0916e008 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6cbe1)[0x874be1]
/lib/i386-linux-gnu/libc.so.6(+0x6e50b)[0x87650b]
/lib/i386-linux-gnu/libc.so.6(cfree+0x6d)[0x87969d]
./wordgen[0x80486f4]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x81ee37]
./wordgen[0x8048471]
======= Memory map: ========
00110000-0012a000 r-xp 00000000 08:06 3408733    /lib/i386-linux-gnu/libgcc_s.so.1Aborted 
```

**Valgrind 输出：**

```
==11050== Invalid read of size 1
==11050==    at 0x804866F: main (wordgen.c:37)
==11050==  Address 0x41a2027 is 1 bytes before a block of size 3 alloc'd
==11050==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==11050==    by 0x8048600: main (wordgen.c:28)
==11050== 
==11050== Invalid write of size 1
==11050==    at 0x8048675: main (wordgen.c:37)
==11050==  Address 0x41a2027 is 1 bytes before a block of size 3 alloc'd
==11050==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==11050==    by 0x8048600: main (wordgen.c:28)
==11050== 
==11050== Invalid read of size 1
==11050==    at 0x8048689: main (wordgen.c:38)
==11050==  Address 0x41a2027 is 1 bytes before a block of size 3 alloc'd
==11050==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==11050==    by 0x8048600: main (wordgen.c:28)
==11050== 
```

**C代码：**

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  int  sLen = 1;
  int  eLen = 0;

  printf("Enter START length & END length ex:(8 10): ");
  scanf("%d %d", &sLen, &eLen);
  int cLen = sLen;
  while (cLen <= eLen) {

    /* Allocate Memory for String  & Initialize */
    char *outStr = malloc(cLen + 1);
    memset(outStr, ' ', cLen);
    outStr[cLen] = 0;

    int outerControl = 1;
    while (outerControl == 1) {
      int cMod = 1;
      int innerControl = 1;
      while(innerControl == 1) {
        outStr[cLen-cMod] += 1;
        if((int)outStr[cLen-cMod] == 127) {
          //Exit Condition Where The Error Occurred
          if(cLen - cMod == 0) { outerControl = 0;  } 
          outStr[cLen-cMod] = 32;
          cMod += 1;
        }
        else { innerControl = 0; }
      }
      printf("%s\n",outStr);
    }
    free(outStr); // Possible source of Error?
    cLen += 1;
  }

  return 0;
} 
```

我是 C 编程新手，对这个错误完全感到困惑。这是什么意思？我是如何错误地创建我的程序的？我假设它与内存管理有关...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:13:39.947

你的问题是：

```
while(innerControl == 1) {
  printf("%d %d\n", cLen, cMod);
  outStr[cLen-cMod] += 1;                       // <-- this here
  if((int)outStr[cLen-cMod] == 127) {
    //Exit Condition Where The Error Occurred
    if(cLen - cMod == 0) { outerControl = 0;  }
    outStr[cLen-cMod] = 32;
    cMod += 1;
  }
  else { innerControl = 0; }
} 
```

在某些时候，`cMod`增长到大于`cLen`，因此您正在访问`outStr`超出其范围（即：`outStr[-1]`）。此行为未定义。

这个条件：

```
if(cLen - cMod == 0) { outerControl = 0;  } 
```

...似乎是为了防止这种情况发生，但只有在`(int)outStr[cLen-cMod] == 127`. 您可能应该添加以下内容：

```
if (cMod > cLen)
    break;

outStr[cLen-cMod] += 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:56:44.433

您在`while (cLen <= eLen)`循环的每次传递中都释放 outStr ，因此只有在`eLen - cLen`< 1 时它才能正常工作；）

更新：对不起，我错了——你在每次通过时都 malloc 。

我试过你的程序，它在我的mac上运行没有任何错误。尝试使用 valgrind 找出发生了什么。

# java - 是否可以在 Java 中覆盖 String 的 compareTo 方法？

> ID：12356177
> 
> 赞同：4
> 
> 时间：2012-09-10T16:54:19.037
> 
> 标签：java, sorting, compareto

我有一个生成随机 IP 地址的类。我必须对这个列表进行排序，但我需要使用自己的逻辑来比较两个字符串。

我更喜欢这样做的方式是覆盖类`compareTo`中的方法`String`并使用`Arrays.sort()`方法，但我不知道这是否可能。

我之前已经覆盖了该`compareTo`方法，但我总是让它比较同一个类中的实例变量。

```
/* Sorts array in ascending order
 *
 * @param    ips     An array of IP Addresses
 * @return           A sorted array of IP Addresses
 */
 public String[] sort(String[] ips)
 {
     String[] arr = ips;

     Arrays.sort(arr);

     return arr;
 } 
```

我知道还有其他方法可以做到这一点，但我认为这会更优雅。如果您不同意，请随时告诉我。我不仅要学习如何编码，还要学习如何编写好代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-10T16:55:25.010

您不能覆盖 String 的`compareTo`方法，因为该类是最终的。但是[您可以为`Arrays#sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator%29).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T16:58:42.177

我意识到这并不能以您想要的方式回答您的问题，但在我看来，您需要一个[IP 地址](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Inet4Address.html)类而不是一个`String`类。否则，您的解决方案将是*字符串*类型的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T16:55:07.787

这是不可能的。字符串是最终的；没有覆盖它。

您的类应该实现自己的 compareTo 并执行逻辑。

您可以将所有这些封装在自定义类中，也可以实现自定义比较器。

听起来你犯了没有足够考虑对象的类罪。字符串原语不是像这样的自定义逻辑的最佳封装。最好将其全部保存在您自己设计的一个对象中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T17:00:10.193

您可以尝试在类数组中使用以下方法：

公共静态无效排序（T[] a，比较器 c）；

例如

```
Arrays.sort(arr, new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                            // provide your comparison logic here
                return 0;
            }
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T17:21:19.417

您需要实现 Comparable 接口并实现 compareTO(Object) 方法。

```
class IP implements Comparable<IP>{
    String ip;
    IP(String ip){
         this.ip=ip
       }

    String getIP(String ip){
    return ip;

    }

public int compareTo(IP){
return ip.compareTo(ip.getIP());
}

} 
```

现在您可以调用 Collection.sort(object_ip) 并传递 IP 类的对象。

# jquery - 在继承的视图上强制执行 jquery 回调定义

> ID：12356178
> 
> 赞同：1
> 
> 时间：2012-09-10T16:54:22.803
> 
> 标签：jquery, asp.net, jquery-plugins, web, asp.net-mvc-4

我正在使用 jquery 在 MVC 4 中的布局页面上的控件上定义一个 ajax 调用。我已经为此调用设置了功能以更改服务器上的会话变量。我的问题是在使用布局页面的视图上执行回调。

所以我需要的是一种方法，以便其他编写使用布局页面的视图的人很容易知道这个常见的回调。

- 编辑

一个例子

在我的布局中，我有

```
 $('#clickable').click(function () {
        $.ajax({
            url: '@Url.Content("~/UrlGoesHere")',
            type: 'POST',
            data: { somedata : $('#data').val() },
            success: successCallBack(data),
            error: errorCallBack(data)
        });
    }); 
```

在我使用此布局的视图中，我想以一种强制执行视图的方式定义successCallback 或errorCallBack。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:24:43.277

很难“强制”开发人员使用像 Javascript 这样的动态语言来定义方法。我认为您能做的最好的事情就是为您的控件制作一个定义明确的对象，并详细记录开发人员应该如何使用它。如果这是一个控件，我会考虑将其封装为一个 JQuery UI Widget。[在 Silk Project](http://msdn.microsoft.com/en-us/library/hh404102.aspx)中有一个关于使用小部件的很好的讨论，它着眼于在 MVC 中开发应用程序的最佳实践。已经使用 JQuery UI 的开发人员会理解这些约定。小部件的优点之一是小部件可以与其他小部件进行通信。

我仍然不清楚为什么视图应该为布局中定义的控件处理事件的设计目标。事件的处理不应该在布局中吗？为什么处理事件会因视图而异？开发人员如何知道“数据”中返回的对象类型以及如何处理它？

# php - 在 SilverStripe 3.0 中上传多个图像

> ID：12356179
> 
> 赞同：1
> 
> 时间：2012-09-10T16:54:23.373
> 
> 标签：php, file-upload, silverstripe

我正在使用 SilverStripe 3.0，我需要一些帮助。我在页面和图像之间有多对一的关系（我正在创建一个图片库）。图像已上传到正确的文件夹，但 CMS 似乎为它们保存了错误的路径。我会解释得更详细一点：

我在上传器中加载了图像，它在上传时向我显示了一个缩略图。但是当它完成上传时，缩略图会消失。

当我单击编辑按钮时，我看到它正在 /assets 文件夹（如 /assets/picture.jpg）中查找图像，但它已上传到 /assets/Uploads。

我尝试使用 $FileField->setFolderName() 设置不同的上传文件夹，但它总是在 /assets 中查找图像，除了将它们上传到正确的文件夹中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:58:55.323

这是一个[已知的错误](http://open.silverstripe.org/ticket/8006)，应该在 3.0.4/3.0.5 版本中修复。

# ruby - 从 Ruby 代码执行 shell 命令

> ID：12356182
> 
> 赞同：1
> 
> 时间：2012-09-10T16:54:29.513
> 
> 标签：ruby, user-interface, command-line-arguments

*注意：如果您想到更好的标题/问题，请随时提出建议。我不知道如何用一句话来表达这个问题。*

我创建了一个命令行 Mastermind 游戏。要玩游戏，请`play.rb`在命令行中键入。

`play.rb`是一个启动游戏的 Ruby 脚本。在脚本中，游戏被发送一个接口，称为`CommandLineInterface`.

如果您想使用 GUI 进行游戏（我使用的是名为 Limelight 的 Ruby GUI），您可以`cd`进入`limelight`目录并键入`limelight open production`，然后 GUI 就会打开。

*有一个`mastermind_game`目录，其中包含一个`lib`、一个`spec`和一个`limelight`目录。该`limelight`目录包含一个`production`目录。*

现在我正在做一些改变。您可以在命令行向脚本传递参数。要么输入`play.rb "command line game"`要么`play.rb "limelight game"`。

`ARGV`是在命令行传递的参数数组。

```
if ARGV.include?("command line game")
    interface = CommandLineInterface.new
elsif ARGV.include?("limelight game")
    interface = LimelightInterface.new
end 
```

如果我想玩我的命令行游戏，我输入`play.rb "command line game"`它就可以正常工作。

我希望能够`play.rb "limelight game"`在命令行键入并打开 GUI。在`ARGV`中，将找到参数`"limelight game"`，因此`interface`将设置为`LimelightInterface.new`。在我的`LimelightInterface`班级中，我希望初始化方法打开 GUI。`limelight open production`它本质上应该具有与在命令行键入相同的功能。

我不确定这是否可能或如何做到，所以任何帮助将不胜感激！谢谢！

*编辑：我试图`rvm use jruby`通过在我的脚本中包含这一行来执行命令：*

```
system("rvm use jruby") 
```

*我回来了：“RVM 不是一个函数，用 'rvm use ...' 选择红宝石是行不通的。”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:53:18.753

这是谷歌搜索标题的第一个结果：http: [//tech.natemurray.com/2007/03/ruby-shell-commands.html](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)

如果这不是你需要的，我不明白这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:54:06.660

Ryan，有几种方法可以调用系统：

反引号： `ruby -e 'p ARGV' '1 2' '3 4'` # => "[\"1 2\", \"3 4\"]\n"

%x 文字（注意你可以使用任何你喜欢的分隔符，你不限于括号）

```
%x(ruby -e 'p ARGV' '1 2' '3 4') # => "[\"1 2\", \"3 4\"]\n" 
```

`system`命令。这里的区别在于它通过 stdin / out / err 。（上面返回标准输出，这个打印在你的进程的标准输出上）。

```
system('ruby', '-e p ARGV', '1 2', '3 4')
# >> ["1 2", "3 4"] 
```

如果您需要更复杂的用法， stdlib 中的[open3](http://rdoc.info/stdlib/open3/Open3)之类的东西已经让我走得很远。如果你真的需要大枪（​​听起来不像你），有一个 gem [open4](http://rubygems.org/gems/open4)。

* * *

编辑：

听起来你想做这样的事情：

```
require 'open3'

bash_script = <<SCRIPT
source "$HOME/.rvm/scripts/rvm"
rvm use jruby
ruby -v
exit
SCRIPT

out, err, status = Open3.capture3 'bash', stdin_data: bash_script
puts out
# >> Using /Users/joshcheek/.rvm/gems/jruby-1.6.7
# >> jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM) 64-Bit Server VM 1.6.0_29) [darwin-x86_64-java] 
```

但老实说，我不认为这对您的情况是一个很好的解决方案，因为有很多合法的方法可以为您的环境设置 jruby。我认为最好只检查一下limelight 二进制文件是否存在，如果不存在就告诉你的用户修复他们的环境。

# windows - 是否建议在 parallel_for_each 循环中使用 Windows API 'SetThreadPriority'

> ID：12356183
> 
> 赞同：0
> 
> 时间：2012-09-10T16:54:32.507
> 
> 标签：windows, winapi, parallel-processing, thread-priority

我想降低为 parallel_for_each 服务的线程的线程优先级，因为在负载较重的情况下，相对于我系统中的其他线程，它们消耗过多的处理器时间。

问题：

1) parallel_for_each 的服务线程是否继承调用线程的线程优先级？在这种情况下，我大概可以在 parallel_for_each 之前和之后调用 SetThreadPriority，一切都应该没问题。

2) 或者是否建议在parallel_for_each 中调用SetThreadPriority？这显然会为同一个线程多次调用 API。这样做有很大的开销吗？

2.b）假设我这样做，它会在下次调用parallel_for_each 时影响线程优先级 - 即我是否需要在之后以某种方式重置每个线程的优先级？

3）我想知道一般的线程优先级。有人想评论一下吗：假设我有 2 个线程争夺一个处理器，一个设置为“低于正常”，而另一个设置为“正常”优先级。与另一个线程相比，一个线程的处理器时间大约多出百分之几？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:00:37.770

1.  所有线程最初都从`THREAD_PRIORITY_NORMAL`. 所以你必须降低每个线程的优先级。或者降低拥有进程的优先级。

2.  调用的开销很小`SetThreadPriority`。一旦你唤醒了一个线程，额外的调用成本`SetThreadPriority`就可以忽略不计了。一旦您设置了线程的优先级，它将保持该值直到更改。

3.  假设您有一个处理器和两个准备运行的线程。调度程序将始终选择运行具有更高优先级的线程。这意味着在您的场景中，以下正常线程将永远不会运行。实际上，调度远不止这些。例如优先级反转。但是，您可以这样想。如果所有处理器都忙于正常优先级的线程，那么预计较低优先级的线程将缺乏 CPU。

# java - 用于查看表之间关系的插件

> ID：12356184
> 
> 赞同：1
> 
> 时间：2012-09-10T16:54:32.990
> 
> 标签：java, eclipse

我通过数据库资源管理器使用eclipse本身的图形界面连接到数据库，在数据库资源管理器中我也可以看到数据库和表，但在表中有许多主键和外键关系，请告知我可以在eclipse中安装的任何插件通过它我可以以图形方式看到表格之间的关系以及它们如何相互连接..！

各位大侠请指教插件。我使用IBM db2作为数据库，前端连接eclipse

# javascript - Angular.js 延迟控制器初始化

> ID：12356185
> 
> 赞同：15
> 
> 时间：2012-09-10T16:54:37.740
> 
> 标签：javascript, angularjs

我想延迟控制器的初始化，直到必要的数据从服务器到达。

我为 Angular 1.0.1 找到了这个解决方案：[Delaying AngularJS route change until model loaded to prevent flicker](https://stackoverflow.com/questions/11972026)，但无法让它与 Angular 1.1.0 一起使用

**模板**

```
<script type="text/ng-template" id="/editor-tpl.html">
Editor Template {{datasets}}
</script>
    <div ng-view>
</div> 
```

​</p>

**JavaScript**

```
function MyCtrl($scope) {    
    $scope.datasets = "initial value";
}

MyCtrl.resolve = {
    datasets : function($q, $http, $location) {
        var deferred = $q.defer();

        //use setTimeout instead of $http.get to simulate waiting for reply from server
        setTimeout(function(){
            console.log("whatever");
            deferred.resolve("updated value");
        }, 2000);

        return deferred.promise;
    }
};

var myApp = angular.module('myApp', [], function($routeProvider) {
    $routeProvider.when('/', {
        templateUrl: '/editor-tpl.html',
        controller: MyCtrl,
        resolve: MyCtrl.resolve
    });
});​ 
```

[http://jsfiddle.net/dTJ9N/1/](http://jsfiddle.net/dTJ9N/1/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T14:14:49.373

由于 $http 返回一个 Promise，创建自己的 deferred 只是为了在 http 数据到达时返回 Promise 会影响性能。你应该能够做到：

```
MyCtrl.resolve = {
    datasets: function ($http) {
        return $http({method: 'GET', url: '/someUrl'});
    }
}; 
```

如果您需要对结果进行一些处理，请使用 .then，您的 Promise 将免费链接：

```
MyCtrl.resolve = {
    datasets: function ($http) {
        return $http({method: 'GET', url: '/someUrl'})
               .then (function (data) {
                   return frob (data);
               });
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:35:28.067

您总是可以将“ng-show”放在最外层的 DOM 元素上，并将其设置为等于您要等待的数据。

对于 Angular JS 主页上列出的示例，您可以看到它是多么容易：[http://plnkr.co/CQu8QB94Ra687IK6KgHn](http://plnkr.co/CQu8QB94Ra687IK6KgHn) 所要做的就是这样，在设置该值之前表单不会显示。

这种方式更直观，工作更少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:07:51.843

您可以在[此处查看](https://stackoverflow.com/questions/12307501/q-defer-and-promises-and-how-to-use-them-to-load-the-data-for-a-controller-befo)使用资源的几乎相同的问题，但它与 $http 的工作方式相同。我认为这应该有效

```
function MyCtrl($scope, datasets) {    
    $scope.datasets = datasets;
}

MyCtrl.resolve = {
    datasets: function($http, $q) {
        var deferred = $q.defer();

        $http({method: 'GET', url: '/someUrl'})
            .success(function(data) {
                deferred.resolve(data)
        }

        return deferred.promise;
    }
};

var myApp = angular.module('myApp', [], function($routeProvider) {
    $routeProvider.when('/', {
        templateUrl: '/editor-tpl.html',
        controller: MyCtrl,
        resolve: MyCtrl.resolve
    });
});​ 
```

# mysql - 如果我有很多用户、帖子、喜欢，如何组织对数据库的查询

> ID：12356189
> 
> 赞同：2
> 
> 时间：2012-09-10T16:54:49.130
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

我有一个包含用户、关系、帖子和喜欢的应用程序。
我的模型是：

```
class User
  has_many :posts
  has_many :likes
  has_many :relationships, :foreign_key => "follower_id", :dependent => :destroy
end

class Post
  belongs_to :user
  has_many :likes  
end

class Like
  belongs_to :user
  belongs_to :post
end

class Relationship
  belongs_to :follower, :class_name => "User"
  belongs_to :followed, :class_name => "User"
end 
```

所以我想找到至少 100 个喜欢我当前帖子的用户：

```
friends = User.find(user.followers).likes.where(:post => @post, :limit => 100) 
```

It's a simple but not optimized query if there are a lot of users, posts, likes, etc. in DB.
How can I optimize the query (or models) to increase speed and to decrease query's time execution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:01:42.313

嗯，首先要做的是确保所有表都有正确的索引。

因此，用于连接表的所有主键和外键都应该有一个索引。然后，您当然希望在这些表中的任何字段上都有索引，您可能会使用这些索引来进行排序或过滤。

除此之外，我真的没有看到您的数据库架构有任何问题。

但是，如果您想查看非关系数据库，许多开发人员正在使用 NoSQL 存储来解决诸如此类问题，您只有一篇主要帖子，但可能有任意数量的喜欢、评论等。以 JSON 格式维护单个 NoSQL 文档条目真的很容易，其中包含单个帖子的整个树结构，而不是必须从关系数据库结构中的不同表中组装这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:10:07.127

我同意迈克的观点。您的架构看起来不错，但您应该添加一些索引。

如果您确实遇到了性能问题，您最好的选择是对您的一些数据进行非规范化（即预先计算一些查询并缓存结果）。

一个明显的缓存候选者是存储特定用户或帖子的“喜欢”计数。您可以在每次有人单击“喜欢”时更新它，或者您只能偶尔通过 cron 作业或类似的东西更新计数。然后，您无需实际运行 JOIN 查询即可快速报告“234 人这样的人”。如果您只是有时重新计算它，存储的计数可能会不同步，但这对于这个应用程序来说并不是什么大问题（它不像是银行账户余额！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:47:24.283

拥有索引并尝试使用急切加载。就像是

```
users = User.includes(:likes => [:post]).find(user.followers)
friends = users.where(:post => @post).limit(100) 
```

当您有大量数据时，请使用[find_in_batches](http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches)这将节省内存消耗，因为 Activerecord 内存将在每个批处理事务中释放

# selenium - WebDriver 中使用的 AlertOverride 类是什么？

> ID：12356193
> 
> 赞同：1
> 
> 时间：2012-09-10T16:54:56.987
> 
> 标签：selenium, webdriver, selenium-webdriver, alert

在 Selenium 2.0 中，我见过一个与 WebDriverCommandProcessor 一起使用的类，称为 AlertOveride。不幸的是，我似乎找不到任何关于这个类的文档，有没有人知道这个类的用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:38:29.343

查看文件中的 JavaScript，似乎这个类负责覆盖我们在被测应用程序中调用时通常会看到的警报和确认框。selenium 的工作方式无法与那些模态框交互，因此需要覆盖它们的默认值。我看不到覆盖该功能的方法（尽管使用 DesiredCapability 可能是可行的）。

我猜 WebDriver 实例在加载页面时所做的第一件事就是调用 AlertOverride 类中的方法，这样我们就可以尽快处理警报/确认。这对于为什么我们无法处理在 onload 函数上创建的确认框也是有道理的。

# sql-server-2008 - SSIS 包中的数据转换问题 - 文本到 GUID

> ID：12356198
> 
> 赞同：3
> 
> 时间：2012-09-10T16:55:27.367
> 
> 标签：sql-server-2008, excel, ssis, data-conversion

我正在开发一个 SSIS 包，它将打开 Excel 电子表格并将数据导入 SQL Server 2008 中的数据库表。当我尝试将 Excel 列数据类型：`Unicode String [DT_WSTR]`转换为唯一标识符数据类型：`unique identifier [DT_GUID]`时，我收到以下错误：

“强制转换规范的字符值无效”

我需要做什么来解决转换错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T17:02:24.287

我使用派生列转换编辑器并将 excel 列值包装在方括号`{}`中，以便 SSIS 包正确地将 Unicode 字符串转换为 GUID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T15:20:56.100

我想提一下，这不适用于 Visual Studio 中的 SSIS 2012。如果您尝试执行此操作，则会在派生列转换任务中收到错误。这两个我都试过了：

(DT_GUID)[列名]

(DT_GUID)("{" + [列名] + "}")

这两个都会失败。

但是，如果您只是设置为忽略这些错误而不是失败。它会正常工作。真的花了太多时间试图让它发挥作用。

# javascript - 将超链接添加到“标题”标签文本

> ID：12356200
> 
> 赞同：1
> 
> 时间：2012-09-10T16:55:31.417
> 
> 标签：javascript, html

我正在使用一些 Javascript 将文本从“标题”标签交换为页面上大图像下方的描述。

如何在大图像下方添加指向正在交换的文本的链接？

此处的示例页面 -[示例页面](http://sdmxc.net/magic/magicscroll&magiczoomplus01.html)

**js** -

```
 function updateCaption(elm) {
    document.getElementById('captionText').innerHTML = elm.getAttribute('title');
} 
```

**html** -

```
<a href="ipod-blue-large.jpg" onmouseover="updateCaption(this);" title="iPod Blue" rel="zoom-id:ipod" 
```

```
<a href="ipod-blue-large.jpg" class="MagicZoom"  id="ipod"><img src="ipod-blue-large.jpg"></a><span id="captionText">Text to be swapped</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:58:29.837

顾名思义，innerHTML 接受标准 HTML。所以你可以这样做：

```
function updateCaption(elm) {
     document.getElementById('captionText').innerHTML = "<a href=somehref>"+elm.getAttribute('title')+"</a>";
} 
```

假设您希望标题与图像具有相同的 href，您可以这样做：

```
function updateCaption(elm) {
     document.getElementById('captionText').innerHTML = 
          '<a href="'+elm.href+'">'
          + elm.getAttribute('title')
          + '</a>';
} 
```

# c++ - 加法运算符没有影响

> ID：12356201
> 
> 赞同：0
> 
> 时间：2012-09-10T16:55:32.967
> 
> 标签：c++

我试图在 for 循环中添加两个浮点数，它告诉我 '+' 没有影响。我试图让它解析两个范围（begrate 和 endrate）（1 和 2）的每个增量（.25），并且 1+.25 无法正常工作，我得到一个无限循环

```
float begrate,endrate,inc,year=0;

cout << "Monthly Payment Factors used in Compute Monthly Payments!" << endl;
cout << "Enter Interest Rate Range and Increment" << endl;
cout << "Enter the Beginning of the Interest Range:  ";
cin >> begrate;
cout << "Enter the Ending of the Interest Range:  ";
cin >> endrate;
cout << "Enter the Increment of the Interest Range:  ";
cin >> inc;
cout << "Enter the Year Range in Years:  ";
cin >> year;

cout << endl;

for (float i=1;i<year;i++){
    cout << "Year:  " << "     ";
    for(begrate;begrate<endrate;begrate+inc){
        cout << "Test " << begrate << endl;
    }
}
system("pause");
return 0; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T16:59:38.913

那是因为 begrate+inc 对 begrate 的值没有影响。+ 运算符与 ++ 运算符不同。您必须将结果分配给某些东西才能产生效果。你想要的是这样的：

```
begrate = begrate + inc 
```

或者

```
begrate += inc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T17:00:35.980

您可以使用 += 而不是 +，因为这将设置`begrate`为`begrate+inc`. 更好的解决方案是有一个开始等于 begrate 然后递增它的临时循环变量。

```
for (float i=1;i<year;i++){
    cout << "Year:  " << "     ";
    for(float j = begrate;j<endrate;j+=inc){
        cout << "Test " << j << endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T17:08:11.983

```
Just replace the following line

for(begrate;begrate<endrate;begrate+inc){

with

for(begrate;begrate<endrate;begrate+=inc){ 
```

注意这里的 begrate* *+=* *inc

# tkinter - Tkinter - 在 python 3.2 中扩展小部件

> ID：12356203
> 
> 赞同：0
> 
> 时间：2012-09-10T16:55:42.357
> 
> 标签：tkinter, python-3.2

我正在使用 Tkinter 为 python 脚本创建 GUI，并且我希望在 GUI 中有可扩展的小部件。我正在尝试在 pack 函数中使用“填充”和“扩展”属性，但每次我在 python 3.2 中编译代码时都会收到此错误：

```
_tkinter.TclError: unknown option "-expand" 
```

python 3.2 不支持此属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:33:11.507

`expand`或`fill`属性没有任何变化。这是一个工作示例：

```
import tkinter as tk

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        for i in range(1,11):
            label = tk.Label(self, text="This is item #%s" % i,
                             borderwidth=2, relief="groove")
            label.pack(side="top", fill="both", expand=True, padx=2, pady=1)

app = ExampleApp()
app.mainloop() 
```

# r - 组合数据行 R

> ID：12356207
> 
> 赞同：0
> 
> 时间：2012-09-10T16:55:53.780
> 
> 标签：r

我有一个数据框，我想在其中组合数据框行。我的数据框看起来像这样。

```
col id, col1, col2, col3, col4

1, 1, , , 5             
1, , 1, , 5             
1, , , 1, 5 
```

我希望最终结果看起来像

```
col id, col1, col2, col3, col4
1,1,1,1,5 
```

有任何想法吗？我试过聚合，不能让它正常工作。

编辑：

```
data<- data.frame(colID=c(1,1,1,2,2), col1=c(1,NA,NA,NA,2), col2=c(NA,1,NA,2,NA), col3=c(NA,NA,1,NA,NA), col4=c(5,5,5,7,7))

finaldata=data.frame(colID=c(1,2), col1=c(1,2), col2=c(1,2), col3=c(1, NA), col4=c(5,7)) 
```

应该构建数据框和最终数据框

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T20:52:51.117

您可以通过多种方式做到这一点。但首先你需要向自己澄清一些事情。

*   给定组总是只有一个数字吗？即你会有这样的数据吗？

`data.frame(colID=c(1,1,1,2,2), col1=c(1,1,NA,NA,2), col2=c(NA,1,NA,2,NA), col3=c(NA,NA,1,NA,NA), col4=c(5,5,5,7,7))`

如果是这样，您如何处理重复项？`sum`? `mean`?

*   中的组是否`col4`总是与`colID`您的示例中的组一致？还是`col4`只是另一个数据列？

* * *

该包`plyr`为做这种事情提供了令人愉快的语法。我将`median`用于聚合函数。

```
library(plyr)
ddply(data, 
      .(colID), 
      summarise, 
      col1=median(col1, na.rm=TRUE),
      col2=median(col2, na.rm=TRUE),
      col3=median(col3, na.rm=TRUE),
      col4=median(col4, na.rm=TRUE)) 
```

然而，还有许多其他的可能性。该`data.table`软件包非常好，特别是对于大型数据集。您也可以使用基本 R 函数来执行此操作`aggregate`。

# 数据表

一种`data.table`方法：

```
library(data.table)
DT <- data.table(data)
DT[ , lapply(.SD, median, na.rm = T), by= colID, .SDcols = paste0('col',1:4)] 
```

# java - Java小程序在初始化程序错误中抛出异常

> ID：12356208
> 
> 赞同：0
> 
> 时间：2012-09-10T16:56:06.383
> 
> 标签：java, html, eclipse, applet

我在 HTML 文件中有以下代码

```
<html>
<title>Applet Test</title>
<body>
<applet
archive = "TheSlot.jar"
code = "slotMachine/The_Main.class" 
width = "300" 
height = "300">
</applet>
</body>
</html> 
```

但是每当我尝试运行它时，会出现 java 加载圈，但它永远不会加载，而是抛出一个`java.lang.ExceptionInInitializerError`

有人对此有解决方案吗？我的 The_Main 类扩展了 Applet，它在 Eclipse 中运行，并且在我的桌面上作为 jar 文件单独运行。它有多个类文件，所以让我处于需要 jar 文件的位置......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:16:50.037

当你运行它时，它会抛出相同的异常

```
java.lang.ExceptionInInitializerError 
```

检查你的代码是否你已经初始化了导致这个错误的东西，如下例所示，这发生在这一行

```
num[34]=2; 
```

它也在静态初始化程序中检查。

```
class EX
{
static
{
int num[]= {34};
num[34]=2;
  }
 static void display()
 {
 System.out.println("this is display");
 }
 }

class exception1
{

public static void main(String args[])
{
EX.display();
System.out.println("om namah sivaya");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T08:27:47.430

尽管这个线程有点老了：我在我自己的一个小程序上偶然发现了这个。他们在不同的机器上工作，但在一台机器上我得到了这个例外。我的解决方案是修复 deploment.properties 文件。也许这有时会帮助某人。

# asp.net-mvc-2 - 在 ASP.net MVC 2 中实现 SSO

> ID：12356209
> 
> 赞同：2
> 
> 时间：2012-09-10T16:56:10.627
> 
> 标签：asp.net-mvc-2, single-sign-on

我正在尝试使用 ASP.net MVC 2 开发 Web 应用程序。为此，我想使用链接实现单点登录功能。任何人都可以建议我如何实现它以及我可以使用的任何框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:00:18.430

您可以为该[http://www.jasig.org/cas使用 CAS](http://www.jasig.org/cas)

# infragistics - Infragistics.Win.UltraWinGrid.UltraWinGrid.ActiveRowScrollRegion.ScrollRowIntoView() 很慢

> ID：12356212
> 
> 赞同：0
> 
> 时间：2012-09-10T16:56:22.927
> 
> 标签：infragistics, vertical-scrolling, ultrawingrid

我正在使用来自 NetAdvantage 的 Infragistics UltraWinGrid for Windows Forms v10.3。如果有很多行并且我执行 UltraWinGrid.ActiveRowScrollRegion.ScrollRowIntoView()，那么它的滚动速度非常慢。有没有办法加快滚动速度？也许有一种方法可以设置滚动速度？

我试图在 Infragistics 论坛上发布这个问题，但是 WinForms 部分的“新帖子”按钮被禁用。可能它仅对订阅用户启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:15:54.133

现在我正在使用 UltraWinGrid.ActiveRowScrollRegion.ScrollPosition = UltraWinGrid.Rows.IndexOf(row) 立即滚动，但这不是很用户友好，因为用户很难注意到发生了什么。我更喜欢真正的滚动。

# java - 为什么当我通过我的 HTTP 服务器时，此图像无法正确显示？

> ID：12356215
> 
> 赞同：2
> 
> 时间：2012-09-10T16:56:38.787
> 
> 标签：java, webserver, processing

我编写了以下 HTTP 服务器：

```
import processing.net.*;
import java.io.FileInputStream;
import javax.activation.MimetypesFileTypeMap;

Client client = null;
Server server = null;
MimetypesFileTypeMap mimeMap = new MimetypesFileTypeMap();

void setup()
{
  server = new Server(this, 80);
  println(1);

  size(700, 700);

  fill(0);
  mimeMap.addMimeTypes("application/bmp bmp BMP Bmp");
}

void draw()
{
  background(255);

  while ( (client = server.available ()) == null) {
  }
  println(2);
  String req = "";
  String fileN;
  byte[] fileC;
  while (client.available () != 0) {
    req += client.readString();
    try { 
      Thread.sleep(100);
    } 
    catch (Throwable t) {
    }
  }

  println(req);
  fileN = URLDecoder.decode(req.split(" ")[1].substring(1));
  if (!fileN.equals("")) {
    try
    {
      FileInputStream fileS = new FileInputStream("C:\\" + fileN);
      fileC = new byte[fileS.available()];
      fileS.read(fileC);

      server.write(
       concatSB(
        "HTTP/1.0 200 OK\r\nContent-Type: " + 
        mimeMap.getContentType(fileN.substring( fileN.lastIndexOf("/") + 1 )) + 
        "\r\nContent-Length: " + 
        fileC.length + 
        "\r\n\r\n", 
        fileC
       )
      );

      println(3);
      println(fileN);
    }
    catch (Exception e)
    {
      server.write("HTTP/1.0 404 Not Found\r\n".getBytes());
      println(fileN + ": " + e.toString());
    }
  }
  exit();
}

void mouseClicked()
{
  server.stop();
  exit();
}

private byte[] concatSB(final String strng, final byte[] bytes) {     
  final StringBuilder sb = new StringBuilder(strng);
  for (byte b : bytes) {         
    sb.append((char)b);
  }
  println(strng);
  return sb.toString().getBytes();
} 
```

它适用于文本，但是当我发送此 BMP 时：

> ![图形](../Images/55bf6b671cc38df81945d38d17527b93.png)

我得到了这个 BMP，它在 Paint 中自动打开：

> ![损坏的图形](../Images/0ef2f04b5fb3a335418757798dd5c189.png)

当我在 Paint 中将原始图像转换为 GIF 时，结果无法通过服务器读取，在 IE 中，我得到了错误的图像图标（红色 X）；

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:29:49.413

我认为通过 StringBuilder 传递二进制文件 C 不是一个好主意。我宁愿做这样的事情：

```
 server.write(
    "HTTP/1.0 200 OK\r\nContent-Type: " + 
    mimeMap.getContentType(fileN.substring( fileN.lastIndexOf("/") + 1 )) + 
    "\r\nContent-Length: " + 
    fileC.length + 
    "\r\n\r\n"
   );
  server.write(
    fileC
   ); 
```

# java - 在 SWT 项目中使用 JavaFX？

> ID：12356220
> 
> 赞同：2
> 
> 时间：2012-09-10T16:56:57.463
> 
> 标签：java, audio, swt, javafx-2

我正在做一个我想最好跨平台运行的桌面项目。该项目将在 SWT 中完成 99.99%，但是一方面，即播放 Mp3（可能很长）我想使用 JavaFx 的新 MediaPlayer 类，因为它可以很容易地改变音量，寻求不同的部分mp3，获取mp3中的当前时间，获取mp3的总长度等。

是否可以将所有内容构建为 SWT 项目，但包含使 JavaFX 的 MediaPlayer 类工作的最低限度？如果是这样，我需要包括什么？我使用 Netbeans 作为 IDE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:10:56.630

JavaFX 2 支持 SWT 互操作性。您可以使用`javafx.embed.swt.FXCanvas`在 SWT 应用程序中绘制任何 FX 节点。

详见此处： http: [//docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm](http://docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm)

# php - 如何编写 .htaccess 重定向来查找所有数字？

> ID：12356223
> 
> 赞同：2
> 
> 时间：2012-09-10T16:56:57.573
> 
> 标签：php, regex, .htaccess, numbers, hyperlink

我试图找出一个正则表达式，它将在 URL 中找到一些数字并在我重定向到的 URL 中使用它们。

```
Redirect 301 /page.php?id=95485666 http://test.com/profile/info/id/95485666 
```

我在想也许

```
Redirect 301 /page.php?id=([0-9]+) http://test.com/profile/info/id/$1 
```

但它似乎不起作用

另外，如果我进行 301 重定向，我必须将代码保留在 .htaccess 文件中多长时间？谷歌什么时候会发现新链接是好的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:20:49.090

您不能匹配`Redirect`指令中的查询字符串（也不能在`RedirectMatch`/`RewriteRule`中）。您需要使用 mod_rewrite 的`%{QUERY_STRING}`var：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (^|&)id=([0-9]+)($|&)
RewriteRule ^/?page\.php$ http://test.com/profile/info/id/%2? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T17:03:29.617

好吧，我猜语法不正确。尝试这个：

```
RewriteRule ^page.php?id=([0-9]+)  http://test.com/profile/info/id/$1  [R=301,L] 
```

# eclipse - ISelectionListener Eclipse

> ID：12356224
> 
> 赞同：0
> 
> 时间：2012-09-10T16:57:09.583
> 
> 标签：eclipse, eclipse-plugin

我在 Eclipse 中的一个编辑器中添加了一个选择侦听器。在 Eclipse 版本 4.1 和 4.2 中，当我用箭头键移动光标时，选择侦听器工作。实际上不必选择任何文本。在 3.7 版中，我实际上必须为侦听器选择文本才能正常工作。3.7和4.1之间有变化吗？如何在 3.7 中获得相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:56:28.160

我解决了这个问题。我删除了选择侦听器并向我的编辑器添加了插入符号侦听器。插入符号侦听器在 3.7、4.1 和 4.2 中的行为似乎相同

# android - 带有文本和图像的 Android 按钮

> ID：12356226
> 
> 赞同：1
> 
> 时间：2012-09-10T16:57:13.380
> 
> 标签：android, button, android-widget, alignment

我想在我的 Android 应用程序中设置一个按钮，该按钮由文本（左对齐）、图像和另一个文本（右对齐）组成。

![按钮应该是这样的](../Images/0e1ff04221e5e600e9dbba7f29442fed.png)

Text1、Text2 和 image 必须可通过代码自定义。

我是Android开发的菜鸟，我只能猜测Text1和Text2应该定义为TextView，而image应该定义为ImageView。但是不可能将它们设置为 Button 的子项，因为 button 不是 ViewGroup。

如何在 xml 布局文件中指定它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:50:10.183

是的，这很容易。将所有这些组件放在一个相对布局中。然后按照这个：

```
RelativeLayout rl= ( RelativeLayout ) findViewById(R.layout.relative_layout_id);
rl.setOnClickListener(this);
rl.setOnTouchListener(this);
rl.setOnDragListener(this); 
```

在`TouchListener`方法中，您将获得一个视图作为参数。所以你得到视图的 id 使用

```
switch(viewObj.getId()
{
  case R.layout.relative_layout_id :
             //write your logic here
   break;
] 
```

在 OnClick 方法中，编写您的逻辑，因此无论您在哪里执行单击该相对布局，您的`onclick()`方法都会执行。

# asp.net-mvc - EF5 代码首先从 MVC4 视图中查询 ICollection

> ID：12356227
> 
> 赞同：0
> 
> 时间：2012-09-10T16:57:13.613
> 
> 标签：asp.net-mvc, ef-code-first, entity-framework-5

我没有找到答案，所以我问这个问题......抱歉打扰了。

我首先使用代码和文章类看起来像

```
public class Article
{
    ...
    public virtual ICollection<Photos> Images { get; set; }
    ...
}
public class Photo
{
   ...
   public string Location {get;set;}  //can be home, work or anything
   ...
} 
```

现在，在 HomeController 中，我得到所有文章并执行

```
if(articles.Any())
{
      ViewBag.Articles = articles;
} 
```

然后，在视图中

```
foreach(var article in ViewBag.Articles)
{
     ... Do things working great here but...
} 
```

所有这些都很好。我想要做的是从每篇文章的 ICollection 中获取一个带有 location=="home" 的图像（例如）。尝试这样做时，我在法语中遇到了不同的错误，他们说我“无法在另一个动态上执行动态类型的请求”、“数据读取器尚未打开”或“dbContext 已关闭”。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:11:48.637

我认为视图中的 ViewBag.Articles 不包含 Photo 实体。当您尝试访问照片时，上下文已关闭并导致错误。

我的建议是：

在您的控制器中调用 Include 以提前加载 Photo 实体。

[http://msdn.microsoft.com/en-us/library/bb738708.aspx](http://msdn.microsoft.com/en-us/library/bb738708.aspx)

然后，在分配 Articles 时调用 ToList：

> ViewBag.Articles = 文章.ToList();

除此之外，最好使用 ViewModel，而不是将数据对象放入 ViewBag。祝你好运。

# wcf - 测试 wcf 服务的最佳书籍和工具

> ID：12356230
> 
> 赞同：1
> 
> 时间：2012-09-10T16:57:42.733
> 
> 标签：wcf, wcf-data-services

大家好，我是 wcf 服务的初学者，测试 Web 服务的最佳书籍和工具是什么？

谢谢斯拉文·坎德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:12:10.287

互联网上有许多用于 Web 服务的测试客户端。在我看来，测试 WCF 服务的最佳工具是微软提供的*WcfTestClient*，它在 VS2010 中位于以下位置：

```
C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE 
```

另一个有用的测试客户端是*SoapUI*，您实际上可以保存您的测试用例。

至于书，我建议如下：

[Windows 通信基础 4 一步一步](http://www.amazon.ca/Windows-Communication-Foundation-Step/dp/0735645566/ref=sr_1_1?s=books&ie=UTF8&qid=1347296917&sr=1-1)

[专业 WCF 4：带有 .NET 4 的 Windows Communication Foundation](http://www.amazon.ca/Professional-WCF-Windows-Communication-Foundation/dp/0470563141/ref=sr_1_5?s=books&ie=UTF8&qid=1347296874&sr=1-5)

[Pro WCF 4：实用的 Microsoft SOA 实施](http://www.amazon.ca/Pro-WCF-Practical-Microsoft-Implementation/dp/1430233680/ref=sr_1_2?s=books&ie=UTF8&qid=1347296874&sr=1-2)

# python - 如何逐个文件构建和流式传输 zip/tar 存档文件到客户端？

> ID：12356232
> 
> 赞同：1
> 
> 时间：2012-09-10T16:57:44.937
> 
> 标签：python, zip, wsgi, zipfile

我知道在将 zip/tar 归档文件发送到浏览器时可以“动态”构建它们；发送标题然后压缩每个文件并将这些部分流式传输到浏览器，这有助于在服务器内存有限时构建大型档案。

这可以通过 WSGI 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:54:09.337

至少在 Werkzeug，[文档](http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.BaseResponse)说

> 响应可以是任何类型的可迭代或字符串。如果它是一个字符串，它被认为是一个可迭代的，其中一个项目是传递的字符串。

因此，如果您可以构建一个生成器或某种其他类型的迭代器来以块的形式提供数据，它将被连接在一起并作为一个文件提供。（注意：您可能还希望`direct_passthrough`通过 Werkzeug 将标志传递给 Response 对象。）

如果您不能使用 Werkzeug，您可能可以通过调查 Werkzeug 是如何使用它来开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T01:47:33.413

[我在创建和流式传输大型存档而不将其存储在内存或磁盘中](https://stackoverflow.com/questions/10405210/create-and-stream-a-large-archive-without-storing-it-in-memory-or-on-disk)看到另一个类似的问题，提问者最后转向[https://github.com/SpiderOak/ZipStream](https://github.com/SpiderOak/ZipStream)

# c# - 如何在 LINQ to NHibernate 中的查询的选择子句中提供默认值

> ID：12356235
> 
> 赞同：3
> 
> 时间：2012-09-10T16:57:46.030
> 
> 标签：c#, linq, nhibernate

我手头的任务是直接从数据库中提取 DTO。作为 ORM，我使用 NHibernate 和 LINQ 作为一种查询方式。下面是我的域类和我用来将数据返回到客户端的 DTO 类（类被简化为仅包含几个属性来说明这一点）。

```
public class DocLanguage
{
  public Guid Id { get; set; }

  public string Name { get; set; }

  public string PublicCode { get; set; }
}

public class Document
{
  public Guid Id { get; set; }
}

public class OutgoingDocument: Document
{
  public DocLanguage DocLanguage { get; set; }
}

public class OutgoingDocumentDto
{
  public Guid Id { get; set; }

  public Guid DocLanguageId { get; set; }

  public string DocLanguageName { get; set; }
} 
```

这是我用来从数据库加载 DTO 的查询。

```
IQueryable<OutgoingDocument> documents = GetQueryable();

var query = from doc in documents
            select new OutgoingDocumentDto
                       {
                         Id = doc.Id,
                         DocLanguageId = doc.DocLanguage.Id,
                         DocLanguageName = doc.DocLanguage.Name
                       }

var documentList = query.ToList(); 
```

它产生以下 SQL。

```
exec sp_executesql N'select
  outgoingdo0_.documentId as col_0_0_,
  doclanguag1_.Id as col_1_0_,
  doclanguag1_.name as col_2_0_
from OutgoingDocuments outgoingdo0_
  inner join Documents outgoingdo0_1_
    on outgoingdo0_.documentId=outgoingdo0_1_.Id
  left outer join DicDocLanguages doclanguag1_
    on outgoingdo0_1_.docLanguageId=doclanguag1_.Id' 
```

它工作得很好，直到字段中没有`NULL`值`docLanguageId`（这不是强制性的）。在另一种情况下，它会引发异常：

```
NHibernate.Exceptions.GenericADOException was unhandled by user code
  Message=Could not execute query[SQL: SQL not available]
  Source=NHibernate
  SqlString=SQL not available
  StackTrace:
   at NHibernate.Impl.SessionImpl.List(IQueryExpression queryExpression, QueryParameters queryParameters, IList results) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 653
   at NHibernate.Impl.AbstractSessionImpl.List(IQueryExpression queryExpression, QueryParameters parameters) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\AbstractSessionImpl.cs:line 92
   at NHibernate.Impl.ExpressionQueryImpl.List() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\ExpressionQueryImpl.cs:line 61
   at NHibernate.Linq.DefaultQueryProvider.ExecuteQuery(NhLinqExpression nhLinqExpression, IQuery query, NhLinqExpression nhQuery) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Linq\DefaultQueryProvider.cs:line 103
   at NHibernate.Linq.DefaultQueryProvider.Execute(Expression expression) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Linq\DefaultQueryProvider.cs:line 35
   at NHibernate.Linq.DefaultQueryProvider.Execute[TResult](Expression expression) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Linq\DefaultQueryProvider.cs:line 40
   at Remotion.Linq.QueryableBase`1.GetEnumerator() in :line 0
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
  InnerException: System.Reflection.TargetInvocationException
   HResult=-2146232828
   Message=Exception has been thrown by the target of an invocation.
   Source=mscorlib
   StackTrace:
        at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
        at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)
        at System.Delegate.DynamicInvokeImpl(Object[] args)
        at System.Delegate.DynamicInvoke(Object[] args)
        at NHibernate.Linq.ResultTransformer.TransformTuple(Object[] tuple, String[] aliases) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Linq\ResultTransformer.cs:line 25
        at NHibernate.Hql.HolderInstantiator.Instantiate(Object[] row) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Hql\HolderInstantiator.cs:line 80
        at NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.GetResultList(IList results, IResultTransformer resultTransformer) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Hql\Ast\ANTLR\Loader\QueryLoader.cs:line 302
        at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Loader\Loader.cs:line 1497
        at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Loader\Loader.cs:line 1491
        at NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.List(ISessionImplementor session, QueryParameters queryParameters) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Hql\Ast\ANTLR\Loader\QueryLoader.cs:line 288
        at NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.List(ISessionImplementor session, QueryParameters queryParameters) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Hql\Ast\ANTLR\QueryTranslatorImpl.cs:line 112
        at NHibernate.Engine.Query.HQLQueryPlan.PerformList(QueryParameters queryParameters, ISessionImplementor session, IList results) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Query\HQLQueryPlan.cs:line 105
        at NHibernate.Impl.SessionImpl.List(IQueryExpression queryExpression, QueryParameters queryParameters, IList results) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 643
   InnerException: System.NullReferenceException
        HResult=-2147467261
        Message=Object reference not set to an instance of an object.
        Source=Anonymously Hosted DynamicMethods Assembly
        StackTrace:
             at lambda_method(Closure , Object[] )
        InnerException: 
```

我尝试使用以下代码显式检查无效性并为 DTO 属性提供默认值：

```
var query = from doc in documents
            select new OutgoingDocumentDto
                       {
                         Id = doc.Id,
                         DocLanguageId = doc.DocLanguage == null ?
                                             Guid.Empty :
                                             doc.DocLanguage.Id,
                         DocLanguageName = doc.DocLanguage == null ?
                                               Guid.Empty :
                                               doc.DocLanguage.Name
                       } 
```

它会产生这个 SQL。

```
exec sp_executesql N'select
  outgoingdo0_.documentId as col_0_0_,
  doclanguag1_.Id as col_1_0_,
  doclanguag1_.Id as col_2_0_,
  doclanguag1_.Id as col_3_0_,
  doclanguag1_.name as col_4_0_,
  doclanguag1_.Id as Id40_0_,
  doclanguag1_.Id as Id40_1_,
  doclanguag1_.name as nameRU40_0_,
  doclanguag1_.publicCode as publicCode40_0_,
  doclanguag1_.name as nameRU40_1_,
  doclanguag1_.publicCode as publicCode40_1_
from OutgoingDocuments
  outgoingdo0_ inner join Documents outgoingdo0_1_
    on outgoingdo0_.documentId=outgoingdo0_1_.Id
  left outer join DicDocLanguages doclanguag1_
    on outgoingdo0_1_.docLanguageId=doclanguag1_.Id' 
```

似乎 NHibernate LINQ 提供程序直接将 LINQ 查询中的所有成员访问表达式转换为 SQL 查询，从而产生重复的字段选择。事实上，它起作用了，也许优化器使这个查询过程和前一个一样快。但它很丑，而且随着涉及的属性越来越多，它变得越来越丑。

我认为这项任务很常见，我想知道是否存在在 select 子句中提供具有默认值的属性的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:21:17.503

这可能不是最好的解决方案，但我找到了[一篇博](http://weblogs.asp.net/ricardoperes/archive/2011/06/14/linq-to-nhibernate-extensions.aspx)文，向您展示了如何让 NHibernate 识别和翻译 Linq 查询中使用的自定义扩展方法，并且该示例专门处理“coalesce”操作。解决方案是创建一个 Coalesce() 扩展方法，然后通过为该方法指定自定义 HQL 生成器将其“注册”到 NHibernate，然后使用默认配置中指定的自定义注册表生成器将它们添加到 NHibernate 的“知识库”中HQL 生成。

理论上，您可以对任何可以转换为目标架构的有效 SQL 的扩展方法执行此操作；您甚至可以使用它来使 NHibernate 调用您放入数据库中的自定义 SQL 函数（但我离题了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T18:21:22.573

您可以在 DTO 级别解决此问题。您可以将 DB 对象绑定到内部可为空的字段，并将其用作公共属性的支持字段，您将在其中放置默认值逻辑。像这样：

```
internal virtual DocLanguage docLanguage {get;set;}
public int DocLanguageName 
{
    get{ return docLanguage == null ? Guid.Empty : docLanguage.Name; }
} 
```

# android - 如何使用操作栏导航选项卡允许水平选项卡导航（滑动视图）？

> ID：12356238
> 
> 赞同：2
> 
> 时间：2012-09-10T16:58:10.740
> 
> 标签：android, android-actionbar, actionbarsherlock, swipeview

如果我使用操作栏[导航选项卡](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)，如何允许[水平选项卡导航](http://developer.android.com/training/implementing-navigation/lateral.html#horizontal-paging)（滑动视图） ？

![在此处输入图像描述](../Images/9f633e46149d82194c7f65bb2c3aec93.png)

我需要做些什么特别的事情才能让它与[ActionBarSherlock](http://actionbarsherlock.com)一起工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:05:37.677

“Tabs+Swipe”活动的代码生成的东西（来自 Eclipse 中新活动向导中的 BlankActivity）有用于此的代码。基本上，您的选项卡绑定到一个`ViewPager`，调用`setCurrentItem()`以更改页面，而不是运行它们自己的`FragmentTransaction`或以其他方式影响 UI。`ViewPager`处理水平滑动，并且您使用某种形式`PagerAdapter`（一种是为您生成的代码）填充这些页面。有关更多信息，请参阅[这个非常相关的问题和答案](https://stackoverflow.com/questions/12355302/android-need-help-for-tabsswipe-template-in-sdk-20/12355483#12355483)。

> 我需要做什么特别的事情才能让它与 ActionBarSherlock 一起工作吗？

除了使用 ActionBarSherlock 的标准东西外，不需要任何不寻常的东西。`ViewPager`位于 Android Support 包中，ActionBarSherlock 也需要它，因此您的项目中已经有了它。

但请注意，操作栏选项卡有时仅显示为选项卡。在某些屏幕尺寸和方向中，它们会自动转换为下拉列表（每个带有操作栏的“列表导航”而不是“选项卡导航”）。如果您想一直使用选项卡，而不是使用带有 的操作栏选项卡`ViewPager`，请使用`PagerTabStrip`（来自 Android 支持包）或[ViewPagerIndicator](http://viewpagerindicator.com/)中的合适指示器。

# dojo - 在dojo过滤中设置第一项选择onChange

> ID：12356239
> 
> 赞同：2
> 
> 时间：2012-09-10T16:58:18.567
> 
> 标签：dojo, dijit.form

我正在尝试解决在 dojo 中加载两个相关下拉列表（国家/州）的古老问题。

我有两个过滤选择来保存国家和州的列表。当用户选择一个国家/地区时，我可以过滤州列表。但是，我无法为当前选定的国家/地区设置州列表中的第一个值。

在下面的示例中，美国和加拿大是唯一的国家。在页面加载时，默认情况下“US”和“Alabama”会正确显示。当我切换到“加拿大”时，我注意到州列表现在包含所有加拿大省份，但是我仍然看到“阿拉巴马”仍然被列为州。如何以编程方式设置加拿大省或美国第一个州的第一个值。我正在尝试将过滤选择中的第一项设置为默认值。

谢谢阅读。这是我到目前为止所拥有的。

```
var countries = {
    label: "name",
    identifier: "countryId",
    items: [
            {countryId: "USA", name: "United States of America"},
            {countryId: "CAN", name: "Canada"},

                    ]
};

var states = {
    label: "name",
    identifier: "stateId",
    items: [
      {stateId: "NJ", name: "NewJersey", countryId: "USA"},
            {stateId: "IL", name: "Illinois", countryId: "USA"},
            {stateId: "CO", name: "Colorado", countryId: "USA"},
            {stateId: "OH", name: "Ohio", countryId: "USA"},
            {stateId: "AL", name: "Alabama", countryId: "USA"},
            {stateId: "ON", name: "Ontario", countryId: "CAN"},
            {stateId: "BC", name: "British Columbia", countryId: "CAN"},
            {stateId: "QC", name: "Quebec", countryId: "CAN"},  
    ]
};

dojo.addOnLoad(function () {
    dojo.connect(dijit.byId('mycountry'), 'onChange', function (country) {
        console.log("on change event fired");
        loadStates(country);
        // set the default state after loading countries, after onChange event.
        var firstStateinFilteringSelect = ????
        dijit.byId('mystate').attr('displayedValue', firstStateinFilteringSelect);

        });
    // on page load, load only US states (US is set as a default country)
    // the default state is set to "Alabama" 
    loadStates(dijit.byId('mycountry').attr('value'));     
});

function loadStates(country){
    console.log(country);
            dijit.byId("mystate").query = {countryId: country};
}

</script>   
<div dojoType="dojo.data.ItemFileReadStore"
   jsId="countryStore"
   id="countryStore"
   data= "countries"
 </div>
 <select id="mycountry" 
    name="country"
    dojoType="dijit.form.FilteringSelect" 
    store="countryStore"
    searchAttr="name"   
    required="true"
    value="US"
    trim="true">    
 </select>

 <div dojoType="dojo.data.ItemFileReadStore"
    jsId="stateStore"
    id="stateStore"
    data= "states"
  </div>

 <select id="mystate" 
    name="state"
    dojoType="dijit.form.FilteringSelect" 
    store="stateStore"
    searchAttr="name"   
    required="true"
    value="AL"
    trim="true">    
 </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T22:21:32.610

loadStates() 超出了您调用它的范围。尝试这个：

```
var thisWidget = this;

dojo.addOnLoad(function () {
    dojo.connect(dijit.byId('mycountry'), 'onChange', function (country) {
        ...
        // loadStates doesn't exist inside this function, so it has to be called
        // like this
        thisWidget.loadStates(country);
        ...

        });
    ...   
});

function loadStates(country){
    ...
} 
```

或者，您可以只使用 lang.hitch：

```
dojo.addOnLoad(lang.hitch(this, function () {
        dojo.connect(dijit.byId('mycountry'), 'onChange', lang.hitch(this, function (country) {
            ...
            loadStates(country);
            ...

            }));
    ...   
}));

function loadStates(country){
    ...
} 
```

# ruby - 如何在 Windows 中使用带空格的目录名使用 FileUtils cp？

> ID：12356240
> 
> 赞同：0
> 
> 时间：2012-09-10T16:58:20.427
> 
> 标签：ruby, windows, directory, cp, fileutils

我尝试使用此线程中的建议无济于事：[当目录名称中有空格时如何使用复制文件？](https://stackoverflow.com/questions/9500735/how-to-use-copyfile-when-there-are-spaces-in-the-directory-name). 需要明确的是，我正在使用的目录已经在双引号中，并且我尝试转义空格，但仍然得到相同的错误。这是我收到的错误消息：

```
 Error: Failed to open PDF file:
    C:/Documents
    Error: Failed to open PDF file:
    and
    Error: Failed to open PDF file:
    Settings/cpengelly/My
    Error: Failed to open PDF file:
    Documents/Dropbox/theproject/tmp/working/main
    Error: Failed to open PDF file:
    pdf.pdf
    Errors encountered.  No output created.
    Done.  Input errors, so no output created. 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:03:25.137

您只需将目录名称放在双引号中。例子 -

```
FileUtils.cp("C:\\Program Files\\FileZilla\\dbghelp.dll","c:\\temp") 
```

# python - 从损坏的管道读取时，管道 Python 脚本占用 100% 的 CPU

> ID：12356241
> 
> 赞同：4
> 
> 时间：2012-09-10T16:58:21.803
> 
> 标签：python, pipe, readline

我有两个 Python 脚本在 Ubuntu Linux 机器上运行。第一个将其所有输出发送到标准输出，第二个从标准输入读取。它们通过一个简单的管道连接，例如：

```
./step1.py <some_args> | ./step2.py <some_other_args> 
```

step2 所做的是它在无限循环中读取输入行并处理它们：

```
while True:
    try:
        l = sys.stdin.readline()
        # processing here 
```

Step1 不时崩溃。当这种情况发生时（不确定是否总是，但至少在几次情况下）不是崩溃/停止，而是 step2 变得疯狂并开始占用 100% 的 CPU，直到我手动杀死它。

为什么会发生这种情况，如何使 step2 更加健壮，以便在管道破裂时停止？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:19:06.860

当 step1 终止时，您将有一个 while 循环，其中包含一个 try 语句，该语句将引发异常。因此，您将使用 100% 的 CPU 不断尝试并失败，因为 readline 在抛出异常时不会阻塞。

要么为读取添加时间延迟，要么`time.sleep`更好地注意 readline 抛出的错误，并捕获当 step1 停止并退出程序而不是尝试从死管道中读取时抛出的特定错误。

当管道为空时，您可能需要一个睡眠操作员，而当管道死亡时，您可能需要一个退出，但是在每种情况下都会抛出哪个异常以及什么消息，我将作为练习留给您确定。在这种情况下，睡眠运算符不是必需的，但它可以避免在无用工作上导致 CPU 使用率过高的其他情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T17:22:23.337

其他人已经解释了为什么在某些情况下你会陷入无限循环。

在第二个（阅读）脚本中，您可以使用成语：

```
for line in sys.stdin:
    process(line) 
```

这样你就不会陷入无限循环。此外，您实际上并没有显示您尝试在第二个脚本中捕获哪个异常，但我猜您会不时遇到“破管”错误，您可以并且**应该**按照此处所述捕获：[如何处理python中的破损管道（SIGPIPE）？](https://stackoverflow.com/questions/180095/how-to-handle-a-broken-pipe-sigpipe-in-python)

整个方案可能如下所示：

```
try:
    for line in sys.stdin:
        process(line)
except IOError, e:
    if e.errno == errno.EPIPE:
        # EPIPE error
    else:
        # Other error 
```

# permissions - chrome.storage 在 chrome 扩展中未定义

> ID：12356242
> 
> 赞同：10
> 
> 时间：2012-09-10T16:58:26.090
> 
> 标签：permissions, google-chrome-extension, storage, chrome-web-store

我正在开发一个谷歌浏览器扩展，并且已经做了一段时间了。所以它已经安装了一段时间，我更新了清单文件以包含“存储”权限并重新加载了扩展。但是，当我在控制台中尝试时，`chrome.storage`是`undefined`. 我重新启动了 Chrome，但仍然没有。

我的清单文件如下所示：

```
{
    ... snip ...
    "permissions": [
        "tabs",
        "http://*/*",
        "https://*/*",
        "chrome://favicon/",
        "storage"
    ]
} 
```

我可以重新安装该应用程序，但我很犹豫，因为：对于扩展的现有用户，它是否相同？它在文档中说该权限不会显示任何警告或暂时阻止扩展以添加更多权限。

我的问题主要是，我的扩展程序的现有用户将如何受到影响？他们会收到警告并禁用扩展，直到他们主动启用它？还是只是当地的发展问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T20:44:13.133

您的清单看起来不错。进行更改后，您是否重新加载了扩展程序？

我将您的清单权限粘贴到一个新的扩展程序中并调用：

```
console.log(chrome.storage); 
```

并收到以下信息：

![chrome.storage 输出](../Images/1de921382a7ab2f24edf69a052803894.png)

注意“本地”和“同步”，这两种存储类型可用于扩展。

# macos - Sublime Text 2 (Mac) - 应用引擎的自定义构建系统

> ID：12356249
> 
> 赞同：1
> 
> 时间：2012-09-10T16:58:51.857
> 
> 标签：macos, build-automation, sublimetext2

我正在尝试通过 Sublime Text 运行应用程序引擎构建脚本。如果我能`dev_appserver.py`在构建过程中看到日志就好了。

1.  创建了一个 shell 脚本`run.sh`，它可以从 OS X 的终端正确运行
2.  将文件夹添加到`PATH`, 在`~/.MacOSX/environment.plist`
3.  添加了一个自定义构建系统，当调用构建时，我得到这个错误：

> ```
> [Errno 2] No such file or directory
> [cmd:  [u'./run.sh']]
> [dir:  /Users/..../src/ui]
> [path: ...:/Users/..../src]
> [Finished 
> ```

最后一条路径 ,`/Users/..../src`是`run.sh`所在的位置。

谢谢。

# html - Internet Explorer 重定向到贝宝不起作用

> ID：12356250
> 
> 赞同：0
> 
> 时间：2012-09-10T16:59:00.117
> 
> 标签：html, internet-explorer, paypal

我有一个重定向到贝宝的客户端站点在 IE 中不起作用。

我用谷歌搜索了这个并找到了各种“解决方案”并遗憾地应用它们，但它们都不起作用。该站点不使用框架，并且打开 IE7 兼容性也无济于事。

我们使用的是 Micah Carrick 编写的 paypal.class.php，除了 IE 外，所有其他浏览器都可以正常工作，我们只收到“请稍候，您的订单正在处理中……”消息，并且没有重定向到 paypal。

我注意到该类创建了一个具有 body 和 html 标签的表单，这些标签被插入到主页中，所以实际上 html 格式不正确，但在除 IE 之外的所有浏览器中一切正常？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:04:57.287

IE其实很奇怪也很严格。在 的`submit_form`函数中`paypal.class.php`，尝试使用 JavaScript 函数而不是`onload`在`body`标记上使用来提交表单。

例如，

**而不是**

```
<body onLoad="document.form.submit">
<form id ="form" id="form_paypal"></form>
</body> 
```

**利用**

```
<html>
<head>
<script language="javascript">
function test(){document.getElementById('form_paypal').submit();}

window.onload=test;
</script>
</head>
<body>
<form id ="form" id="form_paypal"></form>
</body> 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T17:27:15.367

检查贝宝表单是否嵌套在另一个表单中。

我遇到了类似的问题，我解决了将贝宝表格从另一个包含它的表格中取出的问题。

# c# - 如何添加“用于 Office 运行时的 MS Visual Studio 20xx 工具”？

> ID：12356251
> 
> 赞同：4
> 
> 时间：2012-09-10T16:59:12.827
> 
> 标签：c#, runtime, vsto, ms-office

我最近在 Visual Studio 2011 beta 中开发了一个小的 Excel 2010 插件，并尝试立即部署该解决方案。我选择 .NET Framework 4 作为先决条件，如果目标计算机上尚未安装，则 setup.exe 会下载它。

但是，在构建时尝试将“Office 运行时工具”捕获到“发布”选项卡中的“先决条件”对话框中时，我感到很头疼。奇怪的是：在我的 Office 中，有一个旧的 2010 Visual Studio 安装，有这个设置，我可以选择条目，构建它，然后瞧：运行时已下载。

我如何告诉 Visual Studio：看，我需要这个运行时，请在安装前检查它。因为现在 setup.exe 会安装加载项，它会在第一次 Excel 启动时崩溃。

更多信息：

*   我使用单击一次部署
*   C# VSTO 加载项
*   以 Excel 2010 为目标

**编辑**

我想我找到了解决方案：

*   我从位于“C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages”的办公室 PC 中复制了 VSTOR4 目录，并将其放在我的开发人员笔记本上的同一位置。结果：未找到
*   我将它复制到 ''C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages''
*   我编辑了我的 project.csproj 以包含以下设置：

> ```
>  <BootstrapperPackage Include="Microsoft.VSTORuntime.4.0">
>       <Visible>False</Visible>
>       <ProductName>Microsoft Visual Studio 2010 Tools for Office Runtime %28x86 and x64%29</ProductName>
>       <Install>true</Install>
>  </BootstrapperPackage> 
> ```

问题是：这真的是正确的方法吗？会不会有我现在没有想到的问题？为什么没有选择只下载额外的引导程序（有，但对于 .NET 2.0 和一些我不使用的 MDAC 组件）？

与简单的“MSI 安装程序，完成”过程相比，VSTO 部署很痛苦，而且并不直接。不得不处理这些问题真的让我对整个插件架构有点不舒服，但那是另一回事了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:54:05.110

尽管您是手动完成的，但它会正常工作。或者，您可以转到项目属性、发布选项卡并单击先决条件按钮以调出先决条件对话框，您应该能够在其中看到 VSTOR40 以及其他引导程序组件。如果您在那里没有看到特定的，可能有两个原因：

*   您的 C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages 文件夹中没有引导程序包（替换为 VS2010 的 v7.0）

*   您的 product.xml（可在上述位置找到）包含不正确的信息。

附注：您应该检查您的 product.xml 文件的 HomeSite 属性，并确保您已将其设置为 Microsoft 为该软件包提供的正确“fwlink”。fwlinks 基本上是持久的 Web 链接，ClickOnce 安装程序可以从其中下载包，因此您不必将其与您的产品一起分发。使用 Google 查找不同引导程序包的 fwlink。

# oracle-adf - 从 Oracle ADF 进行异步调用

> ID：12356252
> 
> 赞同：3
> 
> 时间：2012-09-10T16:59:22.933
> 
> 标签：oracle-adf

我的页面上有一个 af:outputText。

它的值需要很长时间才能生成，所以我不想在最初创建页面时生成。

相反，我希望页面在加载后对服务器进行异步调用，然后返回值将填充 outputText。

在 ADF 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:32:49.003

... or you use an af:poll component that checks the available status of the queried data. If the data is available, you disable the poll (ensure you PPR the af:poll component then)

Frank

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T20:05:57.520

这是一个可能可行的愚蠢想法：

将 outputText 的渲染属性设置为 false；这将导致在加载页面时不会评估其值表达式。

在页面加载时，向服务器侦听器触发 javascript AdfCustomEvent，然后该侦听器将切换呈现状态并 PPR 输出文本。

一种更复杂但可能更清洁的方法是研究 ADS 以某种方式延迟加载值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:05:14.743

Active Data Service (ADS) 非常适合这种情况。请参阅[http://docs.oracle.com/cd/E15523_01/web.1111/b31974/adv_ads.htm](http://docs.oracle.com/cd/E15523_01/web.1111/b31974/adv_ads.htm)

[Lucas Jellema 在http://technology.amis.nl/2011/10/19/adf-faces-handle-task-in-background-process-and-show-real-time-progress](http://technology.amis.nl/2011/10/19/adf-faces-handle-task-in-background-process-and-show-real-time-progress-indicator-for-asynchronous-job-using-server-push-in-adf/)上也有一个很好的使用 ADS 的例子[-indicator-for-asynchronous-job-using-server-push-in-adf/](http://technology.amis.nl/2011/10/19/adf-faces-handle-task-in-background-process-and-show-real-time-progress-indicator-for-asynchronous-job-using-server-push-in-adf/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T04:25:26.043

使用 af:poll 并将 af:OutputText 的部分触发设置为 af:poll 以便 OutputText 在第一次轮询时自动刷新。在轮询侦听器中将轮询间隔设置为 -1（禁用它）

# python - 是什么导致了这个 python 代码中的 135k/sec 页面错误？（试除素筛）

> ID：12356257
> 
> 赞同：2
> 
> 时间：2012-09-10T16:59:27.120
> 
> 标签：python, primes, page-fault

以下代码在工作线程中执行，并且很高兴地旋转，接收暂停/报告命令等。我认为它们是软故障，因为我没有 RAM 使用问题并且我的硬盘驱动器没有在周末融化，这与我让结果累积多长时间有关，因为我几天前启动它时只收到约 50 个页面错误。

“计数器”属性当前为 22,496,115，“结果”有 1,418,641 个元素。之所以选择“结果”部分是因为我感到相反，因此从 1 开始。

```
def run(self):
    while self.keep_running:
        self.lock.acquire()

        is_prime = True
        self.counter += 1
        cutoff_val = pow(self.counter,.5)
        for number in self.results[1:]:
            if number > cutoff_val:
                break

            if self.counter % number == 0:
                is_prime = False
                break

        if is_prime:
            self.results.append(self.counter)

        self.lock.release() 
```

注意：我知道我可以使用[Eratosthenes 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)来优化算法并可能减少页面错误，但这不是重点：我试图找出确切的原因 - 或者至少是最严重的违规者 - 背后页面错误，这样我就可以避免将来做同样的事情。当我需要一个“极其昂贵、简单的工作线程”时，该算法仅用于测试 UI 响应能力。

根据要求的附加设置：

```
def __init__(self):
    self.counter = 0
    self.keep_running = False;
    self.lock = threading.Lock()
    self.results = list()

def __call__(self, *args):
    if not self.keep_running:
        self.keep_running = True
        self.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:26:57.593

我认为@John Gaines Jr. 指出了一些你需要改变的地方。如果你的列表真的很大，你不想像那样复制它。

这是一种循环遍历相同值`self.results[1:]`但不复制的好方法：

```
res = iter(self.results)  # get an iterator for the list values
next(res)  # iterate once to throw away first value
for number in res:
    # same code you already have goes here
    ... 
```

编辑：上面的代码是正确和简单的，但不能很好地扩展。我想了想，认为这其中一定有一些东西`itertools`，果然有：

```
import itertools as it
res = it.islice(self.results, 1, None)
for number in res:
    # same code you already have goes here
    ... 
```

`None`编辑：感谢@John Gaines Jr. 指出您可以`len(self.results)`在调用`it.islice()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T17:20:36.033

从 Python 教程[列表](http://docs.python.org/tutorial/introduction.html#lists)部分：

所有切片操作都会返回一个包含请求元素的新列表。这意味着以下切片返回列表 a 的浅表副本：

```
>>> a[:]
['spam', 'eggs', 100, 1234] 
```

因此，在您的 for 循环中，该位`self.results[1:]`会生成结果列表的副本。如果这个例程被一遍又一遍地调用，它很容易导致内存抖动。

# magento - Magento 如何显示完整的错误消息而不是截断一个

> ID：12356260
> 
> 赞同：22
> 
> 时间：2012-09-10T16:59:33.107
> 
> 标签：magento

任何人都知道如何让 Magento 显示完整的错误消息，而不是用...截断它

例子：

```
Warning: include() [function.include]: Filename cannot be empty  in /home/kevinmag/public_html/app/code/core/Mage/Core/Block/Template.php on line 241

0 /home/kevinmag/public_html/app/code/core/Mage/Core/Block/Template.php(241): mageCoreErrorHandler(2, 'include() [fetchView('frontend/base/d...') 
```

我想知道 [fetchView('frontend/base/d...') 它与 ...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-10T19:49:12.327

不要责怪 Magento，这都是 PHP 的错 :) [Exception::getTraceAsString](http://php.net/manual/en/exception.gettraceasstring.php)本机方法会切断回溯输出，似乎没有正常的方法来处理它。

我必须工作的唯一解决方案是下一个：

1.  我添加了一个函数，我从好心的**[Steve](https://stackoverflow.com/users/418819/steve)**先生（[我如何获取 PHP 的 getTraceAsString() 的完整字符串](https://stackoverflow.com/questions/1949345/how-can-i-get-the-full-string-of-phps-gettraceasstring)）到 app\code\core\Mage\Core\functions.php：

    ```
    function getExceptionTraceAsString($exception) {
        $rtn = "";
        $count = 0;
        foreach ($exception->getTrace() as $frame) {
            $args = "";
            if (isset($frame['args'])) {
                $args = array();
                foreach ($frame['args'] as $arg) {
                    if (is_string($arg)) {
                        $args[] = "'" . $arg . "'";
                    } elseif (is_array($arg)) {
                        $args[] = "Array";
                    } elseif (is_null($arg)) {
                        $args[] = 'NULL';
                    } elseif (is_bool($arg)) {
                        $args[] = ($arg) ? "true" : "false";
                    } elseif (is_object($arg)) {
                        $args[] = get_class($arg);
                    } elseif (is_resource($arg)) {
                        $args[] = get_resource_type($arg);
                    } else {
                        $args[] = $arg;
                    }
                }
                $args = join(", ", $args);
            }
            $rtn .= sprintf( "#%s %s(%s): %s%s(%s)\n",
                $count,
                $frame['file'],
                $frame['line'],
                isset($frame['class']) ? $frame['class'] . '->' : '',
                $frame['function'],
                $args );
            $count++;
        }
        return $rtn;
    } 
    ```

2.  我已经修改了 Mage.php 文件（*printException*方法） - 而不是`$e->getTraceAsString()`我已经插入`getExceptionTraceAsString($e)`- 请注意有两种外观：打开和关闭调试模式。

为了演示结果，这里是两个回溯的示例 - 没有修复，并且有相应的修复。

老的：

```
0 C:\apache\htdocs\checkout\lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
1 C:\apache\htdocs\checkout\lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
2 C:\apache\htdocs\checkout\lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
3 C:\apache\htdocs\checkout\lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT COUNT(DI...', Array)
4 C:\apache\htdocs\checkout\lib\Varien\Db\Adapter\Pdo\Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT COUNT(DI...', Array)
5 C:\apache\htdocs\checkout\lib\Zend\Db\Adapter\Abstract.php(825): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
6 C:\apache\htdocs\checkout\lib\Varien\Data\Collection\Db.php(217): Zend_Db_Adapter_Abstract->fetchOne(Object(Varien_Db_Select), Array)
7 C:\apache\htdocs\checkout\lib\Varien\Data\Collection.php(225): Varien_Data_Collection_Db->getSize()
8 C:\apache\htdocs\checkout\lib\Varien\Data\Collection.php(211): Varien_Data_Collection->getLastPageNumber()
9 C:\apache\htdocs\checkout\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(996): Varien_Data_Collection->getCurPage()
10 C:\apache\htdocs\checkout\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(831): Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false)
11 C:\apache\htdocs\checkout\app\code\core\Mage\Review\Model\Observer.php(78): Mage_Eav_Model_Entity_Collection_Abstract->load()
12 C:\apache\htdocs\checkout\app\code\core\Mage\Core\Model\App.php(1299): Mage_Review_Model_Observer->catalogBlockProductCollectionBeforeToHtml(Object(Varien_Event_Observer))
13 C:\apache\htdocs\checkout\app\code\core\Mage\Core\Model\App.php(1274): Mage_Core_Model_App->_callObserverMethod(Object(Mage_Review_Model_Observer), 'catalogBlockPro...', Object(Varien_Event_Observer))
14 C:\apache\htdocs\checkout\app\Mage.php(416): Mage_Core_Model_App->dispatchEvent('catalog_block_p...', Array) 
```

新的：

```
0 C:\apache\htdocs\checkout\lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
1 C:\apache\htdocs\checkout\lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
2 C:\apache\htdocs\checkout\lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
3 C:\apache\htdocs\checkout\lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT COUNT(DISTINCT e.entity_id) FROM `catalog_product_entity` AS `e`
 INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='3' AND cat_index.is_parent=1
 INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 WHERE (d=1) AND (d=1)', Array)
4 C:\apache\htdocs\checkout\lib\Varien\Db\Adapter\Pdo\Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT COUNT(DISTINCT e.entity_id) FROM `catalog_product_entity` AS `e`
 INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='3' AND cat_index.is_parent=1
 INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 WHERE (d=1) AND (d=1)', Array)
5 C:\apache\htdocs\checkout\lib\Zend\Db\Adapter\Abstract.php(825): Varien_Db_Adapter_Pdo_Mysql->query(Varien_Db_Select, Array)
6 C:\apache\htdocs\checkout\lib\Varien\Data\Collection\Db.php(217): Zend_Db_Adapter_Abstract->fetchOne(Varien_Db_Select, Array)
7 C:\apache\htdocs\checkout\lib\Varien\Data\Collection.php(225): Varien_Data_Collection_Db->getSize()
8 C:\apache\htdocs\checkout\lib\Varien\Data\Collection.php(211): Varien_Data_Collection->getLastPageNumber()
9 C:\apache\htdocs\checkout\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(996): Varien_Data_Collection->getCurPage()
10 C:\apache\htdocs\checkout\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(831): Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false)
11 C:\apache\htdocs\checkout\app\code\core\Mage\Review\Model\Observer.php(78): Mage_Eav_Model_Entity_Collection_Abstract->load()
12 C:\apache\htdocs\checkout\app\code\core\Mage\Core\Model\App.php(1299): Mage_Review_Model_Observer->catalogBlockProductCollectionBeforeToHtml(Varien_Event_Observer)
13 C:\apache\htdocs\checkout\app\code\core\Mage\Core\Model\App.php(1274): Mage_Core_Model_App->_callObserverMethod(Mage_Review_Model_Observer, 'catalogBlockProductCollectionBeforeToHtml', Varien_Event_Observer)
14 C:\apache\htdocs\checkout\app\Mage.php(416): Mage_Core_Model_App->dispatchEvent('catalog_block_product_list_collection', Array) 
```

**更新**：以上逻辑只修改了错误/报告输出；要将此逻辑添加到异常日志中，您还需要修改 Mage::logException 方法 - 更改

```
self::log("\n" . $e->__toString(), Zend_Log::ERR, $file); 
```

和

```
self::log("\n" . $e->getMessage() . getExceptionTraceAsString($e), Zend_Log::ERR, $file); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T20:24:57.550

这是 PHP 而不是 Magento。

在此处查看发生截断的位置 - [https://github.com/php/php-src/blob/master/Zend/zend_exceptions.c#L383](https://github.com/php/php-src/blob/master/Zend/zend_exceptions.c#L383)

我个人只是忍受它并使用其他调试方法而不是破解核心文件:)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-23T11:06:32.750

您只需更改文件即可。

`index.php`只需在根文件夹中打开您当前的内容，然后在`<?php error_reporting(E_ALL);`

在此保存并上传您的文件并清除缓存后，现在将显示所有错误。

# sql - SQL，在不同的表中添加列，然后执行表达式，按日期和名称分组

> ID：12356263
> 
> 赞同：1
> 
> 时间：2012-09-10T16:59:54.217
> 
> 标签：sql, ms-access

我有两个表，我的目标是创建一个新列，通过简单地将呼叫数除以小时数来计算每小时的呼叫数。但是，首先我想在进行计算之前将表 2 中的小时数添加到表 1 中，添加相应名称和日期的小时数。

```
Table1:

Name    Calls     Hours     Date
--------------------------------------
John    50        3         9/10/2012
Paul    25        2         9/10/2012
Cindy   60        3         9/10/2012
David   50        2.5       9/10/2012
John    45        4         9/9/2012
Paul    50        5         9/9/2012
Cindy   20        2         9/9/2012
David   20        2         9/9/2012

Table 2:

Date         Name     Hours     
------------------------------
9/10/2012    John       1
9/10/2012    Paul       2
9/10/2012    Cindy      2
9/9/2012     John       2.5
9/9/2012     Paul       1.5
9/9/2012     Cindy      0.5 
```

最终我想要的查询输出是这样的：

```
Name    Calls   TotalHours    CallsPerHour   Date
-----------------------------------------------------
John    50      4             12.5           9/10/2012
Paul    25      4             6.25           9/10/2012
Cindy   60      5             12             9/10/2012
David   50      2.5           20             9/10/2012
John    45      6.5           6.9230         9/9/2012
Paul    50      6.5           7.6923         9/9/2012
Cindy   20      2.5           8              9/9/2012
David   20      2             10             9/9/2012 
```

PS 名称在 db 中是唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:06:51.513

这就是你所追求的吗？

```
select  t1.name, 
        t1.calls,
        t1.hours + t2.hours as TotalHours,
        t1.calls / (t1.hours + t2.hours) as CallsPerHour,
        t1.date
from    table1 t1 inner join table2 t2 on t1.name = t2.name and t1.date = t2.date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T17:29:01.337

您需要`JOIN`表格，然后应用`GROUP BY`

```
select t1.name,
    t1.calls,
    sum(t1.hours + nz(t2.hours, 0)) as TotalHours,
    t1.calls / sum(t1.hours + nz(t2.hours, 0)) as CallsPerHour,
    t1.date
from table1 t1
left join table2 t2
    on t1.name = t2.name
    and t1.date = t2.date
group by t1.name, t1.calls, t1.date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:09:02.990

```
SELECT Name, SUM(Calls) AS TotalCalls, SUM(Hours) AS TotalHours, 
    SUM(Calls) / SUM(Hours)  AS CallsPerHour, Date
FROM (
    SELECT Name, Calls, Hours, Date FROM Table1
    UNION ALL
    SELECT Name, 0, Hours, Date  FROM Table2
) BothTables
GROUP BY Name, Date
ORDER BY Date DESC, SUM(Calls) / SUM(Hours) DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T18:35:50.097

`Name`由于两个表每个per只能有一行`Date`，因此您不需要`GROUP BY`查询。用于`LEFT JOIN`容纳`TableTwo`.

```
SELECT
    t1.Name, 
    t1.Calls,
    t1.Hours + Nz(t2.Hours,0) AS TotalHours,
    t1.Calls / (t1.Hours + Nz(t2.Hours,0)) AS CallsPerHour,
    t1.Date
FROM
    TableOne AS t1
    LEFT JOIN TableTwo AS t2
    ON
        t1.Name = t2.Name
    AND t1.Date = t2.Date; 
```

使用您修改后的样本数据，这是该查询的结果集。

```
Name   Calls TotalHours     CallsPerHour Date
John      50          4             12.5 9/10/2012
Paul      25          4             6.25 9/10/2012
Cindy     60          5               12 9/10/2012
David     50        2.5               20 9/10/2012
John      45        6.5 6.92307692307692  9/9/2012
Paul      50        6.5 7.69230769230769  9/9/2012
Cindy     20        2.5                8  9/9/2012
David     20          2               10  9/9/2012 
```

# ios - 核心数据可同步 & com.apple.syncservices.Syncable

> ID：12356267
> 
> 赞同：7
> 
> 时间：2012-09-10T17:00:13.173
> 
> 标签：ios, core-data, mobileme

Xcode`syncable="YES"`默认设置实体和属性，例如，

```
$ cat AppName/AppName.xcdatamodeld/AppName.xcdatamodel/contents
...
<entity name="Event" representedClassName="Event" syncable="YES">
    <attribute name="timestamp" attributeType="Date" syncable="YES"/>
</entity>
... 
```

我应该设置`syncable`为`NO`吗？（我知道我可以通过`syncable="YES"`从文件中删除或在数据模型检查器的用户信息部分下`contents`添加键值对来做到这一点。）`{com.apple.syncservices.Syncable, NO}`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T17:00:41.737

是的，设置`syncable`为`NO`因为 MobileMe 同步支持已被弃用。[请参阅Xcode 4.4 发行说明](https://developer.apple.com/library/archive/documentation/Xcode/Conceptual/RN-Xcode-Archive/Chapters/xc4_release_notes.html#//apple_ref/doc/uid/TP40016994-CH3-SW145)的“编辑核心数据模型” ：

> **编辑核心数据模型**
> 
> *   不推荐使用 MobileMe 同步支持。但是，在实体和属性的用户信息字典中，syncable 属性仍默认设置为 YES，但模型编辑器不会显示此设置。10787672
> 
> 要为实体或属性显式设置可同步为 NO，请在用户信息字典中添加键/值对：
> 
> 1.  选择要在模型文件上关闭同步的实体或属性。
> 2.  在数据模型检查器的用户信息部分，添加这个键/值对：
>     
>     
>     *   键-“com.apple.syncservices.Syncable”
>     *   值 - “否”

# jquery - 将 jquery ui 选项卡中的 tabselect 绑定到最初选择的选项卡/面板

> ID：12356268
> 
> 赞同：1
> 
> 时间：2012-09-10T17:00:15.573
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试将 piwik 的一些事件/页面跟踪代码添加到选项卡并包含 jQuery UI 小部件的面板。我的代码似乎很好，但有一个例外，最初选择的选项卡在初始化时没有绑定 tabselect 事件。在选项卡之间单击并返回第一个将绑定事件，但我在页面加载时也需要它，以便我可以跟踪在用户移动到另一个选项卡之前发生的任何事件（如果他们这样做的话）。我知道我一定遗漏了一些明显的东西。

我的问题的最小版本在这里：http: [//jsfiddle.net/G2LS7/](http://jsfiddle.net/G2LS7/)

# objective-c - 启用 ARC 时出现模糊内存错误

> ID：12356270
> 
> 赞同：2
> 
> 时间：2012-09-10T17:00:18.207
> 
> 标签：objective-c, memory-leaks

我正在创建一个 Objective-C 库来通过 USB 与一些外部设备通信。调用某个方法时，它会在方法内或某些 C 系统函数（与 malloc 或 pthread 相关）内的随机位置崩溃，并出现以下错误之一“释放对象的无效校验和”，“自动释放池页面 0x1102032 已损坏”，甚至是未知的选择器错误（而选择器确实存在）。

使用 Guard Malloc 功能，它会在此行停止并出现 EXEC_BAD_ACCESS 错误：

```
- (void)theMethod {

// some code

NSMutableData *payloads_pool = [NSMutableData dataWithLength:0x800];
NSUInteger payloads_pool_length = [payloads_pool length];

void *buffer = [payloads_pool mutableBytes];

memset(buffer, 0xCC, payloads_pool_length);

for (i = 0; i < 0x800; i += 0x40) {

    unsigned int *buf = [payloads_pool mutableBytes];

    (buf+i)[0] = 0x405;      <==== STOP ON THIS LINE
    (buf+i)[1] = 0x101;
    (buf+i)[2] = 0x8402B001;
    (buf+i)[3] = 0x8402EB01;
}

// some code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:10:18.910

既然`buf`is `unsigned int*`，是不是指针`+`在`buf+i`添加无符号整数而不是字节，从而在内存中寻找太远？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T17:04:25.900

然后我猜它的字节`payloads_pool`数少于`0x800`。

`i`它崩溃时的价值是多少？

为什么你的 for 循环不是从 0 到`payloads_pool.length`？

# telerik - Telerik RadChart 绑定多个系列

> ID：12356274
> 
> 赞同：0
> 
> 时间：2012-09-10T17:00:30.970
> 
> 标签：telerik, radchart

我想用不同数据集（dtDev、dtProd、dtQA）绑定多个系列的 rad 图表，可以告诉我如何编码吗？

仅举个盲例，因为我们有三个日期 dtDev、dtProd、dtQA。

请治疗，提前谢谢！

```
monthlyradchartcontrole.Clear()
Dim dtDev as dataset = nothing
dtDev = obj.datareturn(parameters)

monthlyradchartcontrole.DataSource = dtDev

monthlyradchartcontrole.DataBind()

monthlyradchartcontrole.Series(0).DataXColumn = "ScheduledStartDate"
monthlyradchartcontrole.Series(0).DataYColumn = "ChamberUtilization"

monthlyradchartcontrole.PlotArea.XAxis.AxisLabel.TextBlock.Text = monthlyXaxislableName
monthlyradchartcontrole.PlotArea.XAxis.AxisLabel.Visible = True
                monthlyradchartcontrole.PlotArea.XAxis.AxisLabel.TextBlock.Appearance.TextProperties.Color = System.Drawing.Color.Red
monthlyradchartcontrole.PlotArea.XAxis.AxisLabel.TextBlock.Appearance.Position.Auto = True

monthlyradchartcontrole.PlotArea.YAxis.AxisLabel.Visible = True
monthlyradchartcontrole.PlotArea.YAxis.AxisLabel.TextBlock.Text = monthlyYaxislableName
                monthlyradchartcontrole.PlotArea.YAxis.AxisLabel.TextBlock.Appearance.TextProperties.Color = System.Drawing.Color.Red
monthlyradchartcontrole.PlotArea.YAxis.AxisLabel.TextBlock.Appearance.Position.Auto = True

monthlyradchartcontrole.Legend.Visible = False 
```

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:09:05.727

您的声明是将 T1 和 T2 中的列彼此相邻：

```
T1.a, T1.b, T2.a, T2.b 
```

我认为这不是你想要的。你可能想要：

```
a, b 
```

所以你应该使用一个联合：

```
select T1.a, T1.b 
  from T1
union select T1.a, T1.b 
  from T2
  into T3 
```

如果您确实希望将多个表的列插入另一个表，请尝试以下操作：

```
select T1.a, T2.b
  from T1 inner join T2 on T1.ClientID = T2.ClientID
  into T3 
```

# mysql - Mysql关系数据库重复与不同的键

> ID：12356275
> 
> 赞同：4
> 
> 时间：2012-09-10T17:00:34.967
> 
> 标签：mysql, foreign-keys, duplicates

我试图纠正一个关系数据库一个月，但我找不到有效的解决方案。

Hier 是我的问题：我有 5.34 亿行关系数据库，其中包含很多外键（30）。

我可以通过插入处理使用 union...group by...havin count(*)=1 的正常重复项，但也有具有不同键的重复项。

***例子：***

表格1

```
id | key1 |  value 
1  | 11   |  a1  
2  | 22   |  a1 
```

表 2

```
key1 | value 
11   |  a2  
22   |  a2 

Foreign key table1(key1) references table2(key1) 
```

我正在尝试查找，删除重复项，纠正父母。我尝试了3种不同的方法，

**1：PHP脚本，数组**

导出表（转储）--> array_unique，查找重复项，更正父数组--> 导入表

它相当快，但需要 80GB 内存，这可能是未来的问题

**2：PHP脚本，SQL查询**

导出表（转储）-> 查找重复项-> 将查询发送到父表

不需要内存，但表非常大，5 个查询需要 1 秒，50 M 重复需要几天、几个月、几年

**3：在重复更新键上：**我添加了一列“重复”来存储重复键，并将除键之外的所有列定义为唯一键，
插入.... .

但是有些表有超过 1 个键，有时我应该再次将 24 列定义为唯一索引和内存问题

我希望我能解释我的问题。你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T13:15:18.487

为什么不简单地在列上创建一个唯一键。只需使用“忽略”关键字即可删除重复记录。
因此，您的查询将类似于：
ALTER IGNORE TABLE `testdb`。`table1` 添加唯一索引`column1`（`column1`ASC）；

# ruby-on-rails - 轮胎（弹性搜索）无比较

> ID：12356280
> 
> 赞同：0
> 
> 时间：2012-09-10T17:00:48.477
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

对于轮胎（ElasticSearch 包装器 gem），您如何查询和过滤出某个属性具有 nil/null 值的索引记录。例如，如果我有这种关系

```
class Article < ActiveRecord::Base
  belongs_to :topic
end 
```

**我已将文章编入索引，但我想避免使用topic_id = nil**拉回记录。我尝试了这段代码，但没有奏效。

```
class Article
  belongs_to :topic

  def search(q)
    tire.search do
       ...
         filter :missing, :field => :topic_id, { :existence => false, :null_value => false }
         ...
         ### filter :range, :topic_id => { :gt => 0 } # ==> I tried this as well but didn't work
       ...
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:27:48.747

如果您只想过滤具有现有值的文档，我认为您应该使用[存在过滤器。](http://www.elasticsearch.org/guide/reference/query-dsl/exists-filter.html)`topic_id`

```
class Article
  belongs_to :topic

  def search(q)
     tire.search do
       ...
       filter :exists, :field => :topic_id
       ...
    end
  end
end 
```

或者您可以将[查询字符串](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)与`_exists_:topic_id`查询一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:16:14.280

请试试：

```
class Article
  belongs_to :topic

  def search(q)
    tire.search do
         ...
         filter :not, :missing => {:field => :topic_id, { :null_value => true } }
         ...
    end
  end
end 
```

这应该有效。如果要检查该字段是否存在，则需要存在。我猜你只需要 null_value 检查。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-10T17:40:57.020

@articles = Article.where('topic_id is not ?' , nil)

# c# - ISO-8859-1 中的特殊字符

> ID：12356281
> 
> 赞同：0
> 
> 时间：2012-09-10T17:00:50.097
> 
> 标签：c#, iso-8859-1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:03:21.597

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:12:33.307

As noted elsewhere in the responses *there is no per-mille* sign in ISO 8859-1.

However you can send is as an entity (`&#8240`). As the underlying model of HTML (like XML) is Unicode, characters that cannot be represented in the text encoding, but are in Unicode, can be included as entities.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:19:08.980

The character `'‰'` is **not** in ISO-8859-1\. However, it **is** in [codepage 1252](http://en.wikipedia.org/wiki/Windows-1252) which is often confused with ISO-8859-1.

The best solution is to use `&#8240;` as Richard suggests, *and/or* to change from ISO-8859-1 to UTF-8.

(There's also the possibilty to switch to codepage 1252 (`Windows-1252`), but there's a risk it won't work for all users. That would be `charset="windows‑1252"`.)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-07T09:45:31.043

```
public static string stringToISO8859str(string textToConvert)
        {
            Encoding iso8859 = Encoding.GetEncoding("iso-8859-1");
            Encoding unicode = Encoding.Unicode;
            byte[] srcTextBytes = iso8859.GetBytes(textToConvert);
            byte[] destTextBytes = Encoding.Convert(iso8859, unicode, srcTextBytes);
            char[] destChars = new char[unicode.GetCharCount(destTextBytes, 0, destTextBytes.Length)];
            unicode.GetChars(destTextBytes, 0, destTextBytes.Length, destChars, 0);
            StringBuilder result = new StringBuilder(textToConvert.Length + (int)(textToConvert.Length * 0.1));
            foreach (char c in destChars)
            {
                int value = Convert.ToInt32(c);
                if (value == 34)
                    result.AppendFormat("&quot;");
                else if (value == 38)
                    result.AppendFormat("&amp;");
                else if (value == 39)
                    result.AppendFormat("&apos;");
                else if (value == 60)
                    result.AppendFormat("&lt;");
                else if (value == 62)
                    result.AppendFormat("&gt;");
                else
                    result.Append(c);
            }
            return result.ToString();            
        } 
```

# node.js - NodeJS 获取和传递变量

> ID：12356286
> 
> 赞同：4
> 
> 时间：2012-09-10T17:01:21.643
> 
> 标签：node.js, variables, asynchronous

鉴于 node.js 的异步特性，我在弄清楚变量“传递”时遇到了一些麻烦（我知道这不是正确的术语，我会解释）。

请查看以下内容：

```
connection.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
  if(err) {
    throw err;
  }
  var solution = rows[0].solution;
});

res.render('index', { title: solution }); 
```

你可以想象，我得到一个`reference error, solution is not defined`. 这是因为这`res.render`是在从 mysql 服务器获取解决方案之前完成的。

定义解决方案后，如何使其呈现页面？我知道它真的很小而且很愚蠢，并且确实是节点的核心，但请帮助我理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T17:09:39.903

connection.query 的第二个参数是在数据库返回后运行的回调。为什么不将 res.render 行放在回调中？这样，在您准备好数据之前，不会调用渲染函数。

```
connection.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
  if(err) throw err;
  var solution = rows[0].solution;
  res.render('index', { title: solution });
}); 
```

当您第一次开始使用 Node.js 时，回调可能会有点棘手。您只需要考虑需要发生的步骤以及哪些是异步的。从那里您只需要确保您的回调允许该过程继续。

# ios - 加载具有 .plist 中定义的特殊字符的图像

> ID：12356288
> 
> 赞同：0
> 
> 时间：2012-09-10T17:01:40.723
> 
> 标签：ios, xcode

我有一个有很多名字的 .plist。
表格视图显示 .plist 中的所有信息。
与字符串同名的图像也会添加到单元格中。

几乎一切正常，只是带有特殊字符的名称不显示图像。

工作：
`<string>The Name</string>`
我有一张名为“The Name.png”的图片

有用。

不工作：
`<string>The Name vs. "Me"</string>`
我有一张名为“The Name vs.”Me“.png”的图片

图像不显示。

为什么 ？我怎样才能使它工作？

谢谢。

添加请求的信息。

列表。
`<dict>`
`<key>Name</key>`
`<string>A</string>`
`<key>type</key>`
`<array>`
`<string>The Name</string>`
`<string>The Name vs. "Me"</string>`
`</array>`
`</dict>`

将图像调用到单元格的代码。
`UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];`
`imgView.image = [UIImage imageNamed:nombreDeDOEnFila];`
`cell.imageView.image = imgView.image;`

更多代码来展示它是如何被使用的。

`// Configure the cell.`
`NSString *nombreDeDOEnFila = [type objectAtIndex:row];`
`cell.textLabel.text = nombreDeDOEnFila;`

`// Call image`
`UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];`
`imgView.image = [UIImage imageNamed:nombreDeDOEnFila];`
`cell.imageView.image = imgView.image;`

`#pragma mark - Table view delegate`

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {`

`NSString *nombreDeDOEnFila = [type objectAtIndex:row];`
`moreInfoController.name = nombreDeDOEnFila;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:04:19.710

plist 编辑器中的字符串是未转义的字符串。您将不得不转义引号

`<string>The Name vs. \"Me\"</string>`

# java - 亚马逊：间歇性发生 SSLHandshakeException

> ID：12356290
> 
> 赞同：1
> 
> 时间：2012-09-10T17:01:51.937
> 
> 标签：java, amazon-web-services

这对我来说是个难题。下面显示了当我尝试进行亚马逊搜索时引发异常的代码部分：

```
AWSECommerceServiceLocator locator = new AWSECommerceServiceLocator(fooConfig);
locator.setAWSECommerceServicePortEndpointAddress(SourceCountry.USA.getPortAddress());
//throws exception
AWSECommerceServicePortType type = locator.getAWSECommerceServicePort(); 
```

继承人例外：

> NativeException：bc.exceptions.FatalException：javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

奇怪的是，这种情况间歇性地发生。有时，一切都很完美。有人有什么想法吗？在这一点上，非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:41:03.517

可能有几个根本原因：

*   过时的 Java 安装，其中不包含某些 Amazon 服务器的有效根证书
*   任何有效颁发者都不信任的无效服务器端证书

要从客户端调试到控制台，请添加`-Djavax.net.debug=all`到命令行。[调试 SSL/TLS 连接](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/ReadDebug.html)的页面可以提供对潜在错误的深入了解。

# javascript - 正则表达式只是电子邮件的开头

> ID：12356292
> 
> 赞同：0
> 
> 时间：2012-09-10T17:02:03.920
> 
> 标签：javascript, jquery, regex, email

我只想验证电子邮件地址的开头。我将强制用户使用我的“@company.com”域，因此使用它并不重要。这是我正在使用的正则表达式：

```
var validateEmail = /^[A-Z0-9._%+-]$/ 
```

我正在用警报测试它。

```
alert(validateEmail.test([$(this).attr('value')])); 
```

通过 jQuery 拉取的值是用户输入。我测试的所有东西都会以`false`. 有人知道为什么吗？据我了解，这应该意味着：行首，字母数字字符集加上`. _ % + -`符号，然后是行尾。我究竟做错了什么？即使只是一个“a”警报`false`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:04:15.697

您的正则表达式仅匹配单个字符。您需要添加 + 号或 {min, max} 来指定最小和最大长度。

```
var validateEmail = /^[A-Z0-9._%+-]+$/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:04:15.963

您的正则表达式将仅匹配您集中的单个字符，添加 a`+`以匹配您集中的至少一个字符：

```
var validateEmail = /^[A-Z0-9._%+-]+$/; 
```

而且您忽略了在您的正则表达式对象中包含小写字符：

```
var validateEmail = /^[A-Za-z0-9._%+-]+$/; 
```

或者设置*忽略大小写*标志：

```
var validateEmail = /^[A-Z0-9._%+-]+$/i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:06:36.373

你有多个问题。

*   `a`失败，因为它是小写的并且您的正则表达式区分大小写。您可以使用`i`忽略大小写的选项。
*   大多数其他有效的电子邮件地址都会失败，因为您的正则表达式只允许 1 个字符。您可以`+`在字符类之后使用`[...]`允许一个或多个字符，或者`*`允许 0 个或多个字符。

`var validateEmail = /^[A-Z0-9._%+-]+$/i;`

# r - 对具有多个级别的变量进行分组

> ID：12356298
> 
> 赞同：1
> 
> 时间：2012-09-10T17:02:29.663
> 
> 标签：r

假设我有一个具有多个级别的因子变量，并且我试图将它们分成几组。

```
> levels(dat$years_continuously_insured_order2)
 [1] "1"    "2"    "3"    "4"    "5"    "6"    "7"    "8"    "9"    "10"   "11"   "12"   "13"   "14"   "15"   "16"   "17"   "18"  
[19] "19"   "20" 

> levels(dat$age_of_oldest_driver)
 [1] "-16" "1"   "15"  "16"  "17"  "18"  "19"  "20"  "21"  "22"  "23"  "24"  "25"  "26"  "27"  "28"  "29"  "30"  "31"  "32"  "33" 
[22] "34"  "35"  "36"  "37"  "38"  "39"  "40 
```

我有一个脚本，它遍历这些变量并将它们分组为几个类别。但是，每次我的脚本运行时，级别的数量可能（并且通常是）不同的。因此，如果我对变量进行分组的原始代码如下（见下文），那么如果在一小时后，我的脚本运行并且级别不同，它就没有用了。我现在可以有 25 个级别，而不是 15 个级别，并且值不同，但我仍然需要将它们分组到特定的类别中。

```
dat$years_continuously_insured2 <- NA
dat$years_continuously_insured2[dat$years_continuously_insured %in% levels(dat$years_continuously_insured)[1]] <- NA
dat$years_continuously_insured2[dat$years_continuously_insured %in% levels(dat$years_continuously_insured)[2:3]] <- "1 or less"
dat$years_continuously_insured2[dat$years_continuously_insured %in% levels(dat$years_continuously_insured)[4]] <- "2"
dat$years_continuously_insured2[dat$years_continuously_insured %in% levels(dat$years_continuously_insured)[5:7]] <- "3 +"
dat$years_continuously_insured2 <- factor(dat$years_continuously_insured2) 
```

如何找到一种更优雅的方式将变量分组到段中？在 R 中有更好的方法来做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:35:24.540

您可以将连续保险变量中的因子水平转换为数字，然后切入您的类别并重新因子（）。第一步在 R-FAQ 中进行了描述（要正确执行，这是一个两步过程）：

```
 dat$years_cont <-  factor( cut(  as.numeric(as.character( 
                                     dat$years_continuously_insured_order2)),
                                 breaks=c(0,2,3, Inf), right=FALSE  ),
                           labels=c( "1 or less", "2", "3 +")
                           )
#-----------------
> str(dat)
'data.frame':   100 obs. of  2 variables:
 $ years_continuously_insured_order2: Factor w/ 20 levels "1","10","11",..: 4 15 19 5 8 4 16 12 12 18 ...
 $ years_cont                       : Factor w/ 3 levels "1 or less","2",..: 3 3 3 3 3 3 3 2 2 3 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:09:52.710

如果您的原始列是一个数字，请将其视为一个数字，而不是一个因素。做你正在做的事情的一个更简单的方法是：

```
bin.value = function(x) {
    ifelse(x <= 1, "1 or less", ifelse(x == 2, "2", "3+"))
}

dat$years_continuously_insured2 = as.factor(bin.value(as.integer(dat$years_continuously_insured))) 
```

# android - 查询中的正确引号

> ID：12356301
> 
> 赞同：1
> 
> 时间：2012-09-10T17:02:54.230
> 
> 标签：android

我尝试了很多组合来引用 OR 部分，但到目前为止没有任何效果。

如果有人能告诉我正确的语法，我会很高兴。

 `````
mCursor = mDb.query(true, SQLITE_TABLE, new String[] {KEY_ROWID,
          KEY_NAME, KEY_PLACE, KEY_INFO}, 
          KEY_INFO + " like '%" + inputText + "%'" + OR KEY_PLACE + " like '%" + inputText + "%'",
null, null, null, null, null); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:07:11.450

您为什么不`query`按原样使用该方法？它具有 where 字符串和 where args 作为参数。尝试类似：

```
mCursor = mDb.query(true, SQLITE_TABLE, new String[] {KEY_ROWID,
          KEY_NAME, KEY_PLACE, KEY_INFO}, 
          KEY_INFO + " like '%?%' OR " + KEY_PLACE + " like '%?%'",
          new String [] {inputText, inputText}, null, null, null); 
`````

# applescript - Monitor System Preferences 中的下拉菜单

> ID：12356302
> 
> 赞同：0
> 
> 时间：2012-09-10T17:02:54.650
> 
> 标签：applescript, system-preferences

```
tell application "System Events"
tell application "System Preferences"
    activate
    set current pane to pane "com.apple.preference.displays"
    set theWindows to windows
    set win2 to item 2 of theWindows
    tell win2
        set index to 1
        set visible to false
        set visible to true
    end tell
    set value of combo box 1 to "90°"
end tell
end tell 
```

我正在尝试通过 Applescript 更改外部屏幕的旋转，但我不知道如何访问此下拉菜单。谷歌似乎给了我很多关于组合框和弹出菜单的信息，但在 Lion 下，至少所有这些东西都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:48:42.917

这在 10.8 上对我有用。

```
tell application "System Preferences"
    reveal anchor "displaysDisplayTab" of pane "com.apple.preference.displays"
end tell
tell application "System Events" to tell process "System Preferences"
    tell pop up button 1 of tab group 1 of window 1
        click
        click menu item 3 of menu 1
    end tell
end tell 
```

# vba - 如何调整 32 位和 64 位 Excel VBA 日期处理之间的差异？

> ID：12356303
> 
> 赞同：6
> 
> 时间：2012-09-10T17:03:14.073
> 
> 标签：vba, excel

### 问题：

当数组分配给一个范围时，64 位 Excel VBA 有一个讨厌的习惯，就是将数组日期转换为数字。另一方面，32 位 VBA 保留日期格式。

### 例子：

下面是一些示例代码来演示不同的日期处理：

```
Sub test()
    Dim arr(0 to 1) As Variant
    arr(0) = "Text"
    arr(1) = #9/12/2007#
    ActiveSheet.Range("A1:B1") = arr
End Sub 
```

*（请注意，如果使用单个日期值，则日期不会在 64 位 Excel 中转换；必须存在第一个文本值）*

### 结果：

在 32 位 Excel 中运行时，输出为`Text, 9/12/2007`

在 64 位 Excel 中运行时，输出为`Text, 39337`

就好像 64 位 VBA 只对所有范围对象使用 Value2 属性。

### 问题：

如何在不编写函数来处理所有数组写入的情况下让 64 位 VBA 表现得像 32 位 VBA？

只是为了阻止可能的善意回应：我知道这些单元格之间的基本公式保持不变。然而，32 位 Excel 会自动将正确的单元格设置为日期格式，这大大简化了我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T20:27:39.160

我之前遇到过这样的问题，并通过确保单元格格式始终设置为日期格式来解决它。

这样的事情应该可以解决问题：

```
Range("A1").Select
Selection.Format = "long date" 
```

# c++ - boost icl interval_map interval_set 模板

> ID：12356306
> 
> 赞同：1
> 
> 时间：2012-09-10T17:03:21.843
> 
> 标签：c++, templates, intervals, boost-icl

我已经开始使用 boost:icl 库，它非常全面和方便。我主要使用 boost::icl::interval_set 和 boost::icl::interval_map 的两种类型的间隔。有时我必须仅使用两种类型的间隔部分进行操作，而且我对执行复制功能不感兴趣。

所以这是我的例子：

```
template<typename T>
void UniqSegmentsInA(T &a,T &b,T &c,int max_gap=200)
{
typename T::iterator __it1 = a.begin();
typename T::iterator __it2 = b.begin();
bool _checking_=true;

while(__it1 != a.end() && __it2 != b.end())
{
    typename T::interval_type __itv1  = getFirst(*__it1);
    typename T::interval_type __itv2  = getFirst(*__it2);

    if(__itv1.upper()>__itv2.upper())
    {
        /*if segments intersect and we should move second segment then segment A should not be included in output*/
        if(intersects(T::interval_type::closed(__itv1.lower()-max_gap,__itv1.upper()+max_gap),__itv2)) _checking_=false;
        __it2++;
    }
    else
    {
        if(!intersects(T::interval_type::closed(__itv1.lower()-max_gap,__itv1.upper()+max_gap),__itv2) && _checking_)
        {
            c.add((*__it1));
        }
        _checking_=true;
        __it1++;
    }
}
if(__it1 != a.end() && !_checking_) __it1++;
while(__it1 != a.end())
{
    c.add(*__it1);
    __it1++;
}
} 
```

getFirst() 当它是一个映射时是一个辅助函数，然后它返回 .first 当它是一个集合然后只是一个迭代器。

```
bicl::interval_map<int,int>::interval_type inline getFirst(bicl::interval_map<int,int>::segment_type a)
{
return a.first;
}

bicl::interval_set<int>::interval_type inline getFirst(bicl::interval_set<int>::segment_type a)
{
return a;
} 
```

所以这个例子像预期的那样工作。我想要改进的是 getFirst() 函数，我不希望在 interval_map/set 中硬编码域和 codomain 类型。我试过这样的事情：

```
template<typename T>
typename bicl::interval_map<T,T>::interval_type inline getFirst(typename bicl::interval_map<T,T>::segment_type a)
{
return a.first;
} 
```

然后我改变了：

```
 typename T::interval_type __itv1  = getFirst<typename T::domain_type>(*__it1);
    typename T::interval_type __itv2  = getFirst<typename T::domain_type>(*__it2); 
```

但它不起作用，编译器给出错误：

```
src/Intersections.cpp:324:35: error: no matching function for call to ‘getFirst(const std::pair<const boost::icl::discrete_interval<int, std::less>, int>&)’
src/Intersections.cpp:324:35: note: candidates are:
src/Intersections.cpp:52:56: note: template<class T> typename boost::icl::interval_map<T, T>::interval_type getFirst(typename boost::icl::interval_map<T, T>::segment_type)
src/Intersections.cpp:57:56: note: boost::icl::interval_set<int>::interval_type getFirst(boost::icl::interval_set<int>::segment_type)
src/Intersections.cpp:57:56: note:   no known conversion for argument 1 from ‘const std::pair<const boost::icl::discrete_interval<int, std::less>, int>’ to ‘boost::icl::interval_set<int>::segment_type {aka boost::icl::discrete_interval<int, std::less>}’ 
```

所以问题是，在这个例子中是否有可能不在 getFirst() 函数中对域和 codomain 类型进行硬编码？

谢谢，安德烈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:17:18.233

您可以使用函数模板

```
key_value 
```

为了这个目的。它定义在

```
boost\icl\concept\set_value.hpp
and
boost\icl\concept\map_value.hpp 
```

像这样

```
template<class Type, class Iterator>
inline typename enable_if<is_set<Type>, const typename Type::key_type>::type&
key_value(Iterator it_)
{
    return *it_;
}

template<class Type, class Iterator>
inline typename enable_if<is_map<Type>, const typename Type::key_type>::type&
key_value(Iterator it_)
{
    return (*it_).first;
} 
```

# javascript - Jquery设置计数器，但在调用函数时重置

> ID：12356316
> 
> 赞同：0
> 
> 时间：2012-09-10T17:03:42.763
> 
> 标签：javascript, jquery, timer, settimeout, setinterval

有谁知道以下场景最适合使用什么功能？

当一首歌开始播放时，我想启动一个以秒为单位的“秒表”。

在任何时候，我都希望能够调用此变量，例如您单击的按钮将`alert(time)`显示计时器的计数。

但是，当我运行一个函数时，`reset-timer();`我希望这一切都重置并重新开始计数。

我在想 settimeout 或 setinterval 但不确定哪个是正确的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:14:10.760

这是一个让您入门的基本概念：http: [//jsfiddle.net/V29qK/1/](http://jsfiddle.net/V29qK/1/)

```
var startTime = new Date();

function SetTime(){
    var curTime = new Date();

    var seconds = Math.round((curTime - startTime) / 1000) + " second(s)";
    document.getElementById("timer").innerHTML = seconds;
}

var interval = setInterval(SetTime, 1000);

function ResetTime(){
    document.getElementById("timer").innerHTML = "0 second(s)";
    startTime = new Date();
}
​ 
```

逻辑是：将全局变量设置为 a`new Date()`以表示开始时间。在间隔（或超时）上，获取当前`new Date()`并从中减去开始时间。这将为您提供以毫秒为单位的差异。然后，您可以使用此数据更新您想要的任何 UI 元素。

要“重置”计时器，您只需将开始时间设置为当前时间`new Date()`

# c - c 中的 for(i=0;0;i ) 只执行一次，为什么？

> ID：12356326
> 
> 赞同：0
> 
> 时间：2012-09-10T17:04:59.523
> 
> 标签：c, loops, for-loop

```
for(i=0; 0; i)
{
    //statement
} 
```

为什么语句只执行一次？它要么不执行该语句，要么该语句应该进入无限循环。但该语句只执行一次。你能帮我么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:08:38.627

实际上，该行不会执行该语句。我会再次查看您的程序，看看是否有一些其他输出/语句被错误识别为块中语句的输出

```
#include <stdio.h>

int main(int argc, char** argv)
{
  int i;
  for (i = 0; 0; i) {
    printf("i is %d\n", i);
  }
  return 0;
} 
```

运行时没有输出。

另一种可能性是您的源代码现在与您的二进制文件不同步，这种情况偶尔会发生在手动 C 构建系统中。尝试删除您的`.o`目标文件、生成的二进制文件，然后从头开始重新编译。如果执行消失了，也许你需要更仔细地看看你是如何实现你的构建的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T17:17:13.003

确保在 for 循环之后没有分号，否则编译器会将分号作为循环的结尾，并且后面大括号中的任何内容都将执行一次。

```
for(i=0; 0; i); // end of loop

{
   // do something once
} 
```

您的示例中没有分号，但我看到人们在编程课程中经常这样做，它运行一次的事实就是这个错误的症状。只是一个建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:13:22.117

这是 C99 标准中关于 for 循环的引用：

> ```
> 6.8.5.3 The for statement 1 The statement 
> ```
> 
> for ( 子句 1 ; 表达式 2 ; 表达式 3 )
> 
> 语句的行为如下： 表达式 expression-2 是在每次执行循环体之前计算的控制表达式。每次执行循环体后，表达式 expression-3 被评估为 void 表达式。如果clause-1 是一个声明，它声明的任何变量的范围是声明的其余部分和整个循环，包括其他两个表达式；它在控制表达式的第一次评估之前按照执行顺序到达。如果 Clause-1 是一个表达式，它在控制表达式的第一次评估之前被评估为一个 void 表达式。134)

由于条件为假，它甚至不应该执行一次。所以这显然是您使用的编译器中的一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T17:08:23.090

尝试

```
for (i = 0; i < 10; i++) 
```

然后在谷歌上查找 for 循环。for循环由三个部分组成

**初始化；循环结束条件；增量。**

为什么你的代码说，可能不是你的意思。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T17:09:26.023

这个循环甚至不会执行一次，因为终止条件为 0 即假

```
for(i=0; 0; i)
{
  printf("%d",&i)
} 
```

不打印任何东西。

# ruby-on-rails - 安全性 - 使用 Devise 创建用户时过滤属性

> ID：12356327
> 
> 赞同：1
> 
> 时间：2012-09-10T17:05:04.260
> 
> 标签：ruby-on-rails, security, devise

我担心恶意用户在我的网站上注册时添加额外参数的可能性。我正在使用 Rails 3.2.8 和 Devise 2.1.2。我有一个`User`带有`admin`属性的类

*用户.rb*

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :trackable,
     :validatable, :token_authenticatable, :lockable
end 
```

*架构.rb*

```
create_table "users", :force => true do |t|
  t.boolean  "admin"
  t.string   "email",                                  :null => false
  t.string   "encrypted_password",     :default => "", :null => false
  # other devise columns are not relevant for the question...
end 
```

我正在使用提供`Devise::RegistrationsController`的用户注册，以及带有 and 的自定义`email`视图`password`：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <div class="form_line">
    <%= f.label :email, 'Email' %>
    <%= f.email_field :email %>
  </div>
  <div class="form_line">
    <%= f.label :password, 'Password' %>
    <%= f.password_field :password %>
  </div>
  <div class="form_line">
    <%= f.label :password_confirmation, 'Password confirmation' %>
    <%= f.password_field :password_confirmation %>
  </div>

  <div class="actions">
    <%= f.submit "Register", class: 'button' %>
  </div>
<% end %> 
```

我工作得很好，但是如果恶意用户在发布请求中添加了一个`admin`带有值的参数`true`，那么用户就会以管理员权限创建。

```
Started POST "/users" for 127.0.0.1 at 2012-09-10 18:46:15 +0200
Processing by RegistrationsController#create as HTML
  Parameters: { "user"=>{"email"=>"test@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "admin"=>"true" } 
```

这是我网站的一个安全漏洞。当用户注册（或更新其个人资料，我想我会遇到同样的问题）时，我可以将 Devise 配置为忽略额外的参数（我只需要电子邮件和密码）吗？如果不可能，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:13:32.390

您需要保护 admin 字段免受批量分配。您应该将其添加到您的模型中： `attr_protected :admin`

在此处阅读更多信息：http: [//apidock.com/rails/v3.2.8/ActiveModel/MassAssignmentSecurity/ClassMethods/attr_protected](http://apidock.com/rails/v3.2.8/ActiveModel/MassAssignmentSecurity/ClassMethods/attr_protected)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:10:03.120

devise 提供了为身份验证配置多个模型的可能性，我认为这是解决问题的更好方法。

“Devise 允许您设置任意数量的角色。例如，您可能有一个 User 模型，并且还想要一个仅具有身份验证和可超时功能的 Admin 模型。如果是这样，只需按照以下步骤操作：”

```
# Create a migration with the required fields
create_table :admins do |t|
  t.string :email
  t.string :encrypted_password
  t.timestamps
end

# Inside your Admin model
devise :database_authenticatable, :timeoutable

# Inside your routes
devise_for :admins

# Inside your protected controller
before_filter :authenticate_admin!

# Inside your controllers and views
admin_signed_in?
current_admin
admin_session 
```

如果您和任何有类似问题的人，请花一些时间查看设计文档，看看您是否喜欢它。[设计文件](https://github.com/plataformatec/devise)

# primefaces - 当我第二次点击 primefaces 下载时出现读取错误

> ID：12356331
> 
> 赞同：4
> 
> 时间：2012-09-10T17:05:16.223
> 
> 标签：primefaces, download, fileinputstream

[嗨，我已经为FileDownload](http://www.primefaces.org/showcase/ui/fileDownload.jsf)实现了 primefaces 展示中给出的示例

当我渲染页面并且第一次单击下载按钮时，我可以下载文件。但是当第二次单击下载时，它给了我以下异常。

```
 javax.faces.FacesException: java.io.IOException: Read error
    at org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.wrap(ExceptionHandlerImpl.java:241)
    at org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:156)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:191)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:147)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1815)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Read error
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(FileInputStream.java:198)
    at org.primefaces.component.filedownload.FileDownloadActionListener.processAction(FileDownloadActionListener.java:71)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:51)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:344)
    at javax.faces.component.UICommand.broadcast(UICommand.java:103)
    at javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:978)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:275)
    at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1289)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:716)
    at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:34)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
    ... 21 more. 
```

我在这里粘贴我的代码 FileDownloadController.java

```
@ManagedBean(name="fileDownloadController")
@SessionScoped
public class FileDownloadController {

    private StreamedContent file;

    public FileDownloadController() {        
        File fileabc=new File("C:/temp/velocitypdf.pdf");
        InputStream stream=null;
        try {
            stream = new FileInputStream(fileabc);
        file = new DefaultStreamedContent(stream, "application/pdf", "velocity.pdf");
        stream.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public StreamedContent getFile() {
        return this. file;
    }  
} 
```

我的 xhtml 文件

```
<h:form>
           <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">  
</p:dialog>  
  </h:form>
<h:form id="form">  

<h:commandLink value="Download" onclick="PrimeFaces.monitorDownload(showStatus, hideStatus)">
<p:fileDownload value="#{fileDownloadController.file}" />
</h:commandLink>

</h:form> 
```

1）我怎样才能让它工作，确切的问题是什么。

2）我在我们的一个共享驱动器上有文件，所以当通过“getResourceasStream”获取流时，我得到空流。为此，我直接使用 FileInputStream 读取文件。这是正确的方法吗？

3）如果我有 3 个文件要下载，我需要写 3 个`<p:fileDownload>`标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:42:47.323

> 第 16 行查看[演示中的第 16 行](http://www.primefaces.org/showcase/ui/file/download.xhtml)

```
InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).
getResourceAsStream("/images/optimusprime.jpg"); 
```

您需要通过 jsf 访问资源。

```
(ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext("your path in project") 
```

因为在 Java EE 中，您无权直接从根路径访问文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T21:59:13.383

您必须创建另一个方法，然后复制代码并将新方法粘贴到构造函数中。

在下载按钮中调用带有action属性的新方法

对不起我的英语不好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T15:35:48.910

如果你的文件是空的，你应该得到文件或下载。这里有一个例子：

```
private UploadedFile file;
private StreamedContent archivoDescargar;
//method get
public StreamedContent getArchivoDescargar() throws IOException {
    if(file != null) 
        return archivoDescargar = new DefaultStreamedContent(this.file.getInputstream(),this.file.getContentType(), this.file.getFileName());
    else
        return archivoDescargar;    
} 
```

# c++ - 复制构造函数和抛出表达式

> ID：12356332
> 
> 赞同：1
> 
> 时间：2012-09-10T17:05:34.140
> 
> 标签：c++, c++11

我有一个关于抛出表达式和复制构造函数的问题。

```
#include <iostream>

class Foo
{
public:
   Foo() { std::cout << "Foo::Foo() \n"; }
   Foo(const Foo&) { std::cout << "Foo::Foo(const Foo&) \n"; }
   ~Foo() { std::cout << "Foo::~Foo() \n"; }  
};

int main()
{
   try
   {
      throw Foo(); 
   }
   catch (...)
   {
      std::cerr << "Error \n"; 
   }     
} 
```

在 C++98 / C++03 中，此代码是否打印：

```
Foo::Foo()
Error
Foo::Foo(const Foo&)
Foo::~Foo() 
```

在 C++11 中，以下之一：

```
Foo::Foo()
Error
Foo::Foo(const Foo&)
Foo::~Foo() 
```

或者

```
Foo::Foo()    
Error
Foo::~Foo() 
```

我只在 C++11 中看到了这一点：

> 12.8 复制和移动类对象[class.copy]
> 
> 31 ... — 在 throw 表达式中，当操作数是非易失性自动对象（函数或 catch 子句参数除外）的名称时，其范围不超出最内层封闭 try 块的末尾（如果有的话），从操作数到异常对象（15.1）的复制/移动操作可以通过将自动对象直接构造到异常对象中来省略

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:14:32.350

未定义异常对象的复制（或在 C++11 中移动），但它必须是可复制的（或在 C++11 中可移动），并且实现可以复制（或移动）它任意多次搞笑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T18:20:47.827

我希望看到：

```
Foo::Foo()             // construction
Foo::Foo(const Foo&)   // copy to special throw location
Error                  // catch and print error
Foo::~Foo()            // at the end of the catch block the exception object is destroyed.

or

Foo::Foo()             // As above but compiler has optimized the copy out.
Error
Foo::~Foo() 
```

这是因为：

```
throw Foo();   // Creates a local temporary object.
               // The throw then copies (moves) the local temporary to an implementation 
               // specific location to preserve it while the stack is unwound. 
```

但请注意：允许编译器删除对象的副本（即使它们有副作用）。因此在这种情况下，编译器可以优化代码以在实现特定位置显式构造它。

另外值得注意的是：

```
catch (Foo e)         // Copies the exception object from the implementation specific location
                      // to e so it can be used in the try block. Note this may also result in
                      // object slicing if you don;t catch the exact type.

 catch (Foo const& e) // No copy required as you are using a reference
                      // Thus no chance of slicing. 
```

# java - 组合相交区间

> ID：12356337
> 
> 赞同：-1
> 
> 时间：2012-09-10T17:06:01.373
> 
> 标签：java, algorithm, intervals

> **可能重复：**
> [区间联合](https://stackoverflow.com/questions/1034802/union-of-intervals)
> [如何有效地重叠区间](https://stackoverflow.com/questions/5313374/how-to-overlap-intervals-efficiently)

给定一个区间列表表示所有整数，如果它们确实相交或重叠，则应该可以将它们折叠成一个区间，否则给定的区间不受影响。比如说，如果输入是 egI [(2-6), (1-4), (8-12)]，那么预期的输出是 [(1-6), (8-12)] eg II [(4- 7), (2-6), (1-4), (8-12), (7-9)] 预期的输出是 [(1-12)]。

更正：错过了排序部分，所以是的，它是 O(nlogn) 时间而不是 O(n)。感谢您指出了这一点。我已经编写并测试了一个有效的 O(nlogn) 时间和 O(2n) 空间算法方法。在下面分享这种方法的代码。我有兴趣听到解决这个问题的不同方法，可能更有效。

//假设每个区间，(2-6)等都表示为“Interval”对象（类定义如下图），其中low = 2 and high = 6 // Step1：按给定的低端点排序间隔 // Step2：找到排序间隔的并集

//输入：

```
List<Interval> intervalList = new ArrayList<Interval>(); 
```

//输出：

```
List<Interval> unionList = new ArrayList<Interval>();    

private static final Comparator<Interval> Low_EPSorter = new LowEPSorter();

class Interval {
  int low, high;

  Interval(int l, int h, int m) {
    low = l;
    high = h;
  }
} 
```

////-------BEGIN：找到给定区间的并集的方法----//////

```
void UnionOfIntervals() {
  //Find intersection and combine intervals as necessary
  int sz = intervalList.size();

  // sort by low endpoint
  Collections.sort(intervalList, Low_EPSorter);

      for(int i = 0; i < sz; i++) {
        int j = i;
        if(j > 0) {
          if( Intervals.intersect(intervalList.get(j), intervalList.get(j-1)) ) {
            Interval v = union(intervalList.get(j), intervalList.get(j-1));
            checkAndAdd(v, unionList);
          }
          else {
            if(i == 1) {
              unionList.add(intervalList.get(j-1));
              unionList.add(intervalList.get(j));
          }
          else {
            unionList.add(intervalList.get(j));
          }
        } //No intersection
      } //If 2 elements atleast
      }

      //Print intervals after union
      System.out.println("Input intervals after sorting:");
      for(Interval v : intervalList) {
        System.out.print(v.low + "," + v.high + " ");
      }
      System.out.println();
      System.out.println("Union of intervals:");
      for(Interval v : unionList) {
        System.out.print(v.low + "," + v.high + " ");
      }
    }

    void checkAndAdd(Interval x, List t) {
      int top = t.size()-1;
      if( top >=0 && Intervals.intersect(unionList.get(top), x) ) {
        Interval v = union(unionList.get(top), x);
        t.remove(top);
        t.add(v);
      }
      else {
        t.add(x);
      }
    } 
```

////-------END：找到给定区间的并集的方法----//////

////--- 辅助方法 --- ////

```
static boolean intersect(Interval a, Interval b) {
      boolean r = false;
      if(b.high < a.low || b.low > a.high)
        r = false;
      else if(a.low <= b.high && b.low <= a.high)
        r = true;
      return r;
}

Interval union(Interval a, Interval b) {
      int l = (a.low < b.low) ? a.low : b.low;
      int max = (a.high > b.high) ? a.high : b.high;
      return new Interval(l, max);
}

private static class LowEPSorter implements Comparator<Interval> {

      public int compare(Interval a, Interval b) {
        int r = 0;
        if(a.low < b.low)
          r = -1;
        else if(a.low > b.low)
          r = 1;
        return r;
      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:21:53.970

取一个大小为 n 的数组（其中 n 是最大数），并分别用 1 和 -1 填充区间开始和结束。

我的意思是如果间隔是

```
{[1-4],[6-8]} 
```

然后数组元素就像

```
array[1]=1,array[4]=-1,array[6]=1,array[8]=-1 
```

其余所有其他数组位置将设置为零。

现在遍历数组并通过扫描数组，我们可以获得间隔，就像这种情况一样

```
{[1-4],[2-5],[7-9]}, 
```

首先如上所述填充数组，数组 A 看起来像（假设起始索引为 1）：

```
A=[1,1,0,-1,-1,0,1,0,1] 
```

现在从头开始遍历数组 A 并取一个变量 sum=0 并将存储在数组位置的值添加到 sum 中。

说明数组每个索引处的总和：

在位置 1: sum = 1 ( 1 at index 1 )

在位置 2: sum = 2 ( 1 at index 2 )

在位置 3: sum = 2 ( 0 at index 3 )

在位置 4: sum = 1 ( -1 at index 4 )

在位置 5：sum = 0（索引 5 处的 -1）

现在总和达到零，这意味着间隔在这里结束，所以新的间隔将是 [1-5]

在位置 6：sum = 0（索引 6 处为 0）

在位置 7：sum = 1（索引 7 处的 1）

（在位置 7，总和再次大于零，这意味着间隔刚刚开始）

在位置 8：sum = 1（索引 8 处为 0）

在位置 9：sum = 0（索引 9 处的 -1）

从位置 7 开始的时间间隔刚刚结束，因此新的时间间隔范围为

```
{[1-5],[7-9]} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:22:55.070

如果你正在为这个问题寻找比 O(n) 更有效的算法，我不相信你会找到它。无论您使用什么数据结构来存储初始间隔值，最坏的情况是没有一个间隔重叠，您必须检查每个间隔以确认这一点，因此 O(n)。即使有`HashMap`一个非常复杂的密钥结构，你仍然在看 O(n)。

话虽如此，我不确定是否有任何其他方法值得研究，因为您已经找到了一种可以在最佳时间 O(n) 解决它的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:23:48.017

只是一个想法：管理一组不相交的间隔。从空集开始，添加传入间隔。如果新区间与一个或两个现有区间相交，请将它们合并。要计算交点，请使用 2 个 TreeMap 引用同一组区间但使用不同的键：下限和上限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T17:42:54.797

只是另一个想法：

*   使用布尔数组
    *   默认情况下将所有值设为 false
    *   对于所有间隔（输入）使值为真
    *   扫描更新后的数组，得到最终的相交结果。

# java - 使用 apache mina 库执行服务器和绑定服务器

> ID：12356342
> 
> 赞同：2
> 
> 时间：2012-09-10T17:06:32.220
> 
> 标签：java, apache-mina

我在使用 Java 时遇到了一点问题。我只是在端口**1883**中运行一个用 Java 编码的服务器；服务器在 Windows 上运行良好，但是在我的 Ubuntu 12.04 机器中，java 发送错误：`"java.net.BindException: address already in use"`. 这个错误让我发疯，因为我很确定我没有在同一个端口上运行任何进程。我正在使用 apache mina 库，所以我不知道它是否会影响 JVM。我也没有成功尝试使用具有 root 权限的 eclipse 执行服务器是否有相同的经历？想法？

# rest - JAX-RS 支持文件上传

> ID：12356344
> 
> 赞同：1
> 
> 时间：2012-09-10T17:06:36.273
> 
> 标签：rest, jersey, resteasy

我研究了编写文件上传应用程序的方法。这些示例使用 Jersey 或 RESTEasy 特定注释来实现应用程序。

JAX-RS 规范本身不支持文件上传吗？我是否必须导入 Jersey 或 RESTEasy 特定类才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:34:39.090

您可以开发自己的 JAX-RS impl-agnostic Multipart 支持（开发 JAX-RS 消息体读取器/写入器和您自己的多部分实体的 Java 表示） - 基本上复制 Jersey 或 RESTEasy 已经通过其专有 API 提供的内容，如果JAX-RS 可移植性对您来说非常重要。

# python - VIM：如何访问重做寄存器

> ID：12356348
> 
> 赞同：3
> 
> 时间：2012-09-10T17:07:03.773
> 
> 标签：python, vim, autocomplete, refactoring, rename

作为 Python 自动完成 (https://github.com/davidhalter/jedi) 的次要任务，我正在编写一个能够重命名（重构）的 VIM 插件。

最舒适的重命名方法是使用`cw`和`autocommand InsertLeave :call do_renaming_func()`。为此，我需要访问`redo-register`(see `help redo-register`) 或类似的东西，它会记录书面文本。

如果可能的话，我喜欢在没有宏的情况下这样做，因为我不想搞砸任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:22:41.583

`.`寄存器 ( `@.`) 包含所有编辑键，不幸的是原始形式，还有and `<Del>`，`<BS>`它们显示为`<80>kD`，并且插入完成不解释。`'[`相反，要仅提取输入的网络文本，请使用由标记和`']`（最后一个除外）分隔的范围。

有关如何执行此操作的示例，请查看我的[PrevInsertComplete 插件](http://www.vim.org/scripts/script.php?script_id=4185)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:06:01.460

`.`寄存器包含最后插入的文本。见`:help quote_.`。

该帮助没有特别提及何时填充此寄存器的任何警告，但是它确实提到它在编辑命令行时不起作用。这对你来说应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T22:30:56.973

问题是不知道它是哪个寄存器，而是访问它。我最终找到了方法：

```
getreg('.') 
```

正如@Ingo Karkat 指出的那样，这个寄存器可能包含一些转义字符。

但是，我最终使用了不同的方法。我只是阅读`expand('<cword>')`以获得新单词（因为重命名始终只有一个单词）。这更容易，更可靠。

Here's the code (line 113): [https://github.com/davidhalter/jedi/commit/6920f15caf332cd14a7833a071765dfa77d82328](https://github.com/davidhalter/jedi/commit/6920f15caf332cd14a7833a071765dfa77d82328)

# c# - 使用 jQuery 使用 JSON 数据填充 div

> ID：12356350
> 
> 赞同：0
> 
> 时间：2012-09-10T17:07:13.767
> 
> 标签：c#, jquery, json, asp.net-mvc-3

假设我有网格表，应该在用户点击时填充数据。请求应该通过 ajax 发送并通过 json 返回数据。我想使用 asp.net mvc3 和 jQuery。

我的问题是如何使用返回的 json 数据填充 div id，如何识别目标 div 并使用 jQuery 填充该 div 中的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:15:47.127

就 div 而言，您可以给它一个 id，稍后您将能够使用 GetElementbyId javascript 函数访问该元素。

对于表格元素，您有多种选择。

1.  不要对静态表进行编码。相反，使用 jquery 或 javascript 向 dom 添加元素。这样，您将能够遍历 xml 并动态添加相关的行和列。

2.  在 html 中静态编码表格，为其分配一个 id，然后使用单元格之间的下一个兄弟、前一个兄弟等关系访问所有单元格，

最后

1.  从 ajax 请求中获取 xhtml 而不是 xml。这样，您就可以将 html 直接放入 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T21:49:59.663

您不能使用 Ajax.ActionLink 将部分视图返回到具有 ID 的特定 div 吗？

在视图中

```
@Ajax.ActionLink("linkText", "action", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "divContainerId" })

<div id="divContainerId"></div> 
```

在控制器中

```
[HttpGet]
public PartialViewResult action()
{
    var jsonData = getData();
    return PartialView("_partialView", jsonData);
} 
```

# html - 图片不占 div 高度的 100%

> ID：12356351
> 
> 赞同：2
> 
> 时间：2012-09-10T17:07:15.183
> 
> 标签：html, css

我正在一个布局相当简单的测试站点上工作。它被分成具有交替宽度的两列的行。我的问题是，无论出于何种原因，插入其中一个列 div 的图像没有占据 div 的 100% 高度。它短了几个像素。这是一个问题，因为同一行中的两列需要看起来“等高”。

我在其中一个有图像问题的 div 上放置了一个红色背景，这样您就可以轻松地看到我在说什么。我确信它相当简单，我只是忽略了一些东西，但是在这个星期一早上我似乎找不到它。任何帮助将非常感激。谢谢！

这是我的测试站点：[http ://hartsfielddesign.com/test2/test.html](http://hartsfielddesign.com/test2/test.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T17:24:20.187

由于内联文本大小/行高，有时内联图像在底部有额外的填充。

将带有图像的 div 设置为

```
font-size:0;
line-height:0; 
```

[http://jsfiddle.net/pxfunc/ZC7Xa/1/](http://jsfiddle.net/pxfunc/ZC7Xa/1/)

编辑：

或者，将 设置`<img />`为`display:block;`以便不应用内联填充

[http://jsfiddle.net/pxfunc/ZC7Xa/3/](http://jsfiddle.net/pxfunc/ZC7Xa/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T17:27:47.937

尝试添加`vertical-align:top`到您的图像规则：

```
img{
    max-width: 100%;
    width: 100%;
    vertical-align:top;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZC7Xa/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:21:13.403

如果我正确理解您要完成的工作，您可以在`<div class="product clearfix color-box">`元素上设置一个高度值，`200px`例如，然后将`.vendor`and`.vendor-images`以及其中`img`包含的内容设置为`height: 100%`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T17:27:56.250

您的图像纵横比错误。它太长了。

您可以做的更简单的事情是将 .vendor-images 图像作为背景，而不是使用 img 标签。然后你可以把它拉长，这样它就不会给你那个错误。

您还可以将左侧的小图像设置为 float:left 值和右侧的 float:right，并在左侧使用 30% 的宽度，在右侧使用 65% 的宽度。不设置填充，剩余的 5% 将为您提供填充。

或者您可以简单地更改图像的纵横比。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T17:28:25.940

删除类 .box-expand、.color-box-expand 边距和填充。然后设置每个 div 的高度。然后它将正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-27T09:14:30.467

这段代码对我来说 100% 有效。

```
font-size:0;
line-height:0; 
```

把它放在 img 标签的父级上。

# silverlight - TabControl 不明显的行为

> ID：12356355
> 
> 赞同：1
> 
> 时间：2012-09-10T17:07:35.473
> 
> 标签：silverlight, tabcontrol

我在 tabcontrol 中添加了一些带有模板的选项卡：

```
<sdk:TabControl x:Name="TabControl">
    <sdk:TabItem Header="Header1" Content="{Binding Path=Content}">
        <sdk:TabItem.ContentTemplate>
            <DataTemplate>
                <TextBlock Text="Header1" Loaded="TextBlock_Loaded" />
            </DataTemplate>
        </sdk:TabItem.ContentTemplate>
    </sdk:TabItem>
    <sdk:TabItem Header="Header2" Content="{Binding Path=Content}">
        <sdk:TabItem.ContentTemplate>
            <DataTemplate>
                <TextBlock Text="Header2" Loaded="TextBlock_Loaded" />
            </DataTemplate>
        </sdk:TabItem.ContentTemplate>
    </sdk:TabItem>
    <sdk:TabItem Header="Header3" Content="{Binding Path=Content}">
        <sdk:TabItem.ContentTemplate>
            <DataTemplate>
                <TextBlock Text="Header3" Loaded="TextBlock_Loaded" />
            </DataTemplate>
        </sdk:TabItem.ContentTemplate>
    </sdk:TabItem>
</sdk:TabControl> 
```

如果我在选项卡之间切换，我在所有选项卡中只看到“Header1”，并且 Loaded 事件只触发一次。我希望在适当的选项卡中看到 Header1、Header2 和 Header3 并处理 3 个加载的事件。

我已经反编译了 TabControl 的代码，我发现了这样的方法：

```
private void UpdateSelectedContent(object content)
{
    TabItem selectedItem = this.SelectedItem as TabItem;
    if (selectedItem != null)
    {
        ContentPresenter contentHost = this.GetContentHost(this.TabStripPlacement);
        if (contentHost != null)
        {
            contentHost.HorizontalAlignment = selectedItem.HorizontalContentAlignment;
            contentHost.VerticalAlignment = selectedItem.VerticalContentAlignment;
            contentHost.ContentTemplate = selectedItem.ContentTemplate;
            contentHost.Content = content;
        }
    }
} 
```

好像我用它更改选项卡内容模板开关。但行为不同。

这里发生了什么？为什么我的期望是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:27:24.570

您引用的 UpdateSelectedContent 方法不会设置标题或加载的处理程序。只需将它们指定为 TabItems 的属性。

```
 <sdk:TabItem Header="Header 1" Loaded="Tab1_Loaded"> 
```

ETC

# android - 如何使用 socket io 从服务器接收消息

> ID：12356357
> 
> 赞同：1
> 
> 时间：2012-09-10T17:07:41.773
> 
> 标签：android, socket.io

我正在使用 Gottox 编写的用于 Java 的 Socket.IO-Client 制作一个 android 应用程序。我知道如何向服务器发送消息，但我想知道如何从服务器接收消息或获取响应，这是我的代码示例

```
 SocketIO socket=new SocketIO();
        try {
            socket = new SocketIO("http://41.69.21.123:1333/");
        } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        socket.connect(new IOCallback() {
            public void onMessage(JSONObject json, IOAcknowledge ack) {
                try {
                    tv.setText(json.toString(2));
                    System.out.println("Server said:" + json.toString(2));

                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            public void onMessage(String data, IOAcknowledge ack) {
                System.out.println("Server said: " + data);
            }

            public void onError(SocketIOException socketIOException) {
                System.out.println("an Error occured");
                socketIOException.printStackTrace();
            }

            public void onDisconnect() {
                System.out.println("Connection terminated.");
            }

            public void onConnect() {
                System.out.println("Connection established");
            }

            public void on(String event, IOAcknowledge ack, Object... args) {
                System.out.println("Server triggered event '" + event + "'");
            }
        });

        socket.send("Hello Server!");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T02:42:30.077

我通过这种方法收到消息

```
 @Override
        public void on(String event, IOAcknowledge ack, Object... args) {
            System.out.println("Server triggered event '" + event + "'");
            //it comes with 3 parameters event, acknowledge and args
            //if you want to get args to String try this
              Object[] arguments = args;
            System.out.println("Args"+ arguments[0].toString());
        } 
```

您可以使用 socket.io 标签在日志中检查服务器响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T07:57:55.570

IOCallback 中的 onMessage 方法可以获取参数“String data”发送的消息服务器 如果该方法从未被消息服务器发送触发，则可能您的连接不活跃

# android - 强制 WebView 视频控件

> ID：12356364
> 
> 赞同：0
> 
> 时间：2012-09-10T17:08:18.213
> 
> 标签：android, html, webview

我有一个播放嵌入式 html5 视频的 Android 应用程序。我收到的 html 代码不包含视频标签中的“控件”属性。我想知道是否有办法强制在视频位于 WebView 时显示控件。在 2.3 中，您可以使用 WebChromeClient 来显示完整的视频。但是在 4.x 中，您似乎需要首先显示完整的控件才能利用这个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:17:39.410

您可以添加控件属性：

```
webView.getSettings().setJavascriptEnabled(true);
webView.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView webView, String url) {
        super.onPageFinished(webView, url);
        webView.loadUrl(
            "javascript:(function() {" +
                 "var video = document.getElementsByTagName('video')[0];" +
                 "video.controls = 'controls';" +
            "})()"
        );
    }
}); 
```

# objective-c - 目标 C 中的全局变量

> ID：12356367
> 
> 赞同：0
> 
> 时间：2012-09-10T17:08:23.837
> 
> 标签：objective-c

我是Objective C的新手，并且已经在这个问题上停留了5天））我要做的是为关于城市和大都市的简单任务编写实现。我有具有属性的 City 类和具有全局数组的类 Metropolis，该数组通过 createCity 方法添加城市对象。我已经实现了这个任务，但是这个数组什么也没返回。有谁能够帮助我？

这是任务的一部分：

```
1\. Write a “City” class, which inherits from NSObject. Your class should contain the following:
Variables:
name, age, population.
Instance methods:
setName:age:population (single method) which set city’s name, age and population. getName, getAge, getPopulation which return city’s name, age and population, respectfully.
nextDay which adds a random number to city’s population, then subtracts a random number from city’s population. Figure out a way to generate random numbers yourself.
2\. Create an instance of City class, set its name, age and population as you want.
3\. Write a for-­‐loop (if in doubt how to do it – google or use Xcode’s help system) for 10 steps. Each step send ‘nextDay’ message to your object and print out the population.

    4\. Write a “Metropolis” class. It should contain the following:
Variable:
array of 10 cities.
Instance method:
createCity:atIndex:withPopulation: (single method) which creates a city with first parameter being a name at index (from the second parameter) and sets its population to that of third parameter. So, you should be able to do this:
[myMetropolis createCity: @”Almaty” atIndex: 2 withPopulation: 1500000]
5\. Create an instance of Metropolis class and create all 10 cities. 
```

这是我的实现：

城市.h

```
#import <Foundation/Foundation.h>

@interface City : NSObject
{
    NSString* name;
    int age;
    int population;
}

-(void)setName: (NSString*)n age: (int)a population: (int)p;
-(NSString*)getName;
-(int)getAge;
-(int)getPopulation;
-(void)nextDay;

@end 
```

城市.m

```
#import "City.h"

@implementation City

-(void)setName:(NSString*)n age:(int)a population:(int)p
{
    name = n;
    age = a;
    population = p;
}

-(NSString*)getName
{
    return name;
}

-(int)getAge
{
    return age;
}

-(int)getPopulation
{
    return population;
}

-(void)nextDay
{
    int r = arc4random() % 100;
    int r2 = arc4random() % 100;
    population = population + r;
    population = population - r2;

}

@end 
```

大都会.h

```
#import <Foundation/Foundation.h>
    #import "City.h"

@interface Metropolis : NSObject{
        NSMutableArray* myArray;
    }

-(void)createCity: (NSString*)n atIndex: (int)a withPopulation: (int)p;

-(NSMutableArray*) getArray;

@end 
```

大都会.m

```
#import "Metropolis.h"
#import "City.h"
@implementation Metropolis

NSMutableArray* myArray = nil;
- (void)initialize {
        myArray = [[NSMutableArray alloc]initWithCapacity:10];
}

-(void)createCity:(NSString*)n atIndex:(int)a withPopulation:(int)p
{
    City* newCity = [[City alloc]init];
    [newCity setName:n age:0 population:p];

    [myArray insertObject:newCity atIndex:a];

}
-(NSMutableArray*)getArray
{
    return myArray;
}

@end 
```

主文件

```
#import <Foundation/Foundation.h>
#import "City.h"
#import "Metropolis.h"
int main(int argc, const char * argv[])
{

    @autoreleasepool {
        Metropolis* myMetropolis = [[Metropolis alloc]init];
        [myMetropolis createCity:@"Aktobe" atIndex:0 withPopulation:15];
        [Metropolis initialize];
        NSMutableArray* c = [[NSMutableArray alloc]init];
        c = [myMetropolis getArray];

        NSLog(@"%@", [[c objectAtIndex:0] getName]);

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:14:01.240

我重写了我的答案以使其更加完整，并结合了其他答案中产生的一些其他想法，尤其是@Hannes Sverrisson

解决问题的简单方法是在 createCity 之前调用 initialize （否则您尝试将对象添加到 nil 数组），并确保您没有从静态上下文调用 initialize 。即改变【大都会初始化】；到 [myMetropolis 初始化]；

更好的方法，更好的意思是与典型的 Objective-C 设计更一致，你应该重写实例方法 init。这是在 Metropolis 实现中完成的，并替换了您的初始化方法。

```
-(id) init { 
    self = [super init]; 
    if (self) { 
        myArray = [[NSMutableArray alloc]initWithCapacity:10]; 
    } 
    return self; 
} 
```

或者为了更有趣，创建一个以城市数量为参数的新 init 方法。

```
 -(id) initWithNumberOfCities:(NSInteger)numCities { 
    self = [super init]; 
    if (self) { 
        myArray = [[NSMutableArray alloc]initWithCapacity:numCities]; 
    } 
    return self; 
} 
```

然后在您的 main 方法中，删除对 [Metropolis initialize] 的调用。原因是当你说：

```
Metropolis* myMetropolis = [[Metropolis alloc]init]; 
```

或者

`Metropolis* myMetropolis = [[Metropolis alloc]initWithNumberOfCities:10];`

init 方法在分配发生后被内联调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:24:35.263

初始化的方法是`-(void)init;`这个方法应该在你的 Metropolis 实现中被覆盖。在这种情况下，您正在调用`- (void)initialize;`这是错误的。

因此，只需在 Metropolis 的实现中更改`- (void)initialize {`为`-(void)init {`并删除行：`[Metropolis initialize];`in main。

在下面的注释之后，正确的 init 方法应该是：

```
-(id) init { 
self = [super init]; 
if (self) { 
    myArray = [[NSMutableArray alloc]initWithCapacity:10]; 
    } 
    return self; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:27:13.803

您不需要编写 getter 或创建支持实例变量。您可以使用 Objective-C 2.0 的 @property 语法。

```
@property (strong) NSString *name;
@property (assign) NSInteger age;
@property (assign) NSInteger population;

- (void)setName:(NSString*)name age:(NSInteger)age population:(NSInteger)population;
- (void)nextDay; 
```

然后使用`self.name`,访问属性`self.age`，`self.population`或者如果您需要访问支持变量本身，`_name`, `_age`, `_population`。

# knockout.js - 处理注释的 HTML 敏捷包

> ID：12356370
> 
> 赞同：0
> 
> 时间：2012-09-10T17:08:26.973
> 
> 标签：knockout.js, html-agility-pack

我正在使用 HTML Agility Pack 打开一个主 HTML 文件，然后使用基本的 StreamReaders 打开帮助文件，读取内容，并将它们放在主文件的正确 div 中。

它可以工作，但由于某种原因，一些 knockoutjs 评论绑定被搞砸了。

这是html

```
<select data-bind="css: { 'required': isrequired }" class="answer-single">
    <option value="">Choose</option>
    <!-- ko foreach: formquestionoptions -->
        <option data-bind="value:text, text:text"></option>
    <!-- /ko -->                              
</select> 
```

（我已经在 Visual Studio 调试器中验证过。）

当它被 HTML Agility Pack 插入时，这就是它的样子，这会导致 Knockout 错误

```
<select data-bind="css: { 'required': isrequired }" class="answer-single">
    <option value="">Choose
    <!-- ko foreach: formquestionoptions -->
        <option data-bind="value:text, text:text">
    <!-- /ko -->                              
</select> 
```

我应该如何告诉 HTML 敏捷包...不要这样做？这是当前代码

```
item.Helpers.ForEach(packet =>
{
    string contents = FileWriter.getFileContents(mapPath(packet.FileName));
    doc.GetElementbyId(packet.DomId).InnerHtml = Environment.NewLine + contents + Environment.NewLine;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:16:30.407

默认情况下，HAP 会特别对待选项标签...所以要关闭此行为，这是您需要的代码

```
HtmlDocument doc = new HtmlDocument();
HtmlNode.ElementsFlags.Remove("option"); 
```

原始答案[在这里](https://stackoverflow.com/a/4759300/352552)

# php - 构建 PHP 代码以链接对象创建和数据库写入？

> ID：12356371
> 
> 赞同：2
> 
> 时间：2012-09-10T17:08:27.397
> 
> 标签：php, mysql, oop, design-patterns, pdo

我正在编写一个站点（PHP + MySQL），其中一些对象（例如文章）按集合组织。每篇文章都属于一个单例集。每个集合可以是独立的，也可以属于更大的集合。集合要么是单例，要么是集合的集合。为了跟踪集合之间的关系，我使用了一个封闭表来跟踪所有“家庭联系”。该表具有一个`ancestor`字段、一个`descendant`字段和一个`length`字段，该字段计算祖先和后代之间的分离程度。

*   每篇新文章都意味着创建一个新的单例集。
*   每个新集合都意味着创建一个新的闭包表条目，其中`ancestor`和`descendant`相同且其中`length`= 0。可以独立于文章创建新集合，因为集合可以是现有集合的集合。

我想构造我的 PHP 程序，这样每次我在数据库中写一篇新文章时，我都会自动编写一个新集合，而每次我加载一个新集合时，我都会自动编写一个新的闭包表条目。

构建代码的正确方法是什么？是否创建嵌套对象（`article`对象包括 a `set`，其本身包括 a `closure`）和一个递归函数来写入数据库，该函数将首先写入嵌套对象（如果对象是闭包表条目，则结束条件是哪里） ? 有没有办法在单个事务中折叠这些递归写入？

我可以使用现有的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T10:25:14.070

答案很简单。嵌套对象有些正确，但顺序相反。

在 is-a 关系中查看它。一篇文章是一个集合的一部分，但在一个集合中可以是多篇文章。一个集合可以是另一个集合的一部分，但在这个另一个集合中可以是多个较低的集合。低的不应该知道高的。

**结构如何？**

```
CREATE TABLE article (
    articleID INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    // some other columns that don't matter for this structure answer
);

CREATE TABLE set (
    setID INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    // some other columns that don't matter
);

CREATE TABLE article_to_set (
    articleID INT(10) NOT NULL,
    setID INT(10) NOT NULL,
    UNIQUE KEY (articleID, setID)
);

CREATE TABLE set_to_set (
    setID INT(10) NOT NULL,
    parentSetID INT(10) NOT NULL,
    UNIQUE KEY (setID, parentSetID)
); 
```

**PHP 类的结构如何？**

从数据库中`Set`知道一篇文章是否属于它（独立集）或其他集（集的集合）。所以它有两个属性。第一个是可为空的文章引用变量，第二个是子集对象的数组（可以为空）。从数据库中只知道它自己的`Article`属性，并且它对与任何集合的关系一无所知。

**链接是如何处理的？**

如果在控制器中创建文章，则`ArticleAdd`创建文章和独立集。然后，将带有 articleID 和 setID 的行插入到表中`article_to_set`。如果您创建一个`a`没有文章的新集合，则它在开始时为空。`a`如果您随后添加新集合（直接或通过文章），您可以通过向表中添加行将它们放入集合中`set_to_set`，其中`parentSetID`是集合`a`的 ID，setID 是您放入集合的集合的 ID `a`。

此解决方案不使用闭包表，但它使设计更适合未来的编辑。通过添加一行可以轻松地将一组放入另一组中。

# ruby - 意外的正则表达式警告“警告：字符类有重复的范围”

> ID：12356372
> 
> 赞同：2
> 
> 时间：2012-09-10T17:08:28.853
> 
> 标签：ruby, regex

在 Ruby 1.9.3 上运行以下命令时，我收到了意外警告：

```
"one two,three;four\rfive\nsix\r\nseven,;\r\n,;\r\neight".split(/[,|;|\r\n]+/m) 
```

我收到的警告是：

```
warning: character class has duplicated range: /[,|;|\r\n]+/ 
```

我得到了我期望的结果——一个如下所示的数组：

```
[
  [0] "one two",
  [1] "three",
  [2] "four",
  [3] "five",
  [4] "six",
  [5] "seven",
  [6] "eight"
] 
```

我想了解的是导致重复范围警告的原因是什么？通过删除三个匹配器选项之一，我无法获得相同的结果，因此我无法理解警告。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:15:18.340

看起来你把事情搞混了。它目前与以下任何一项匹配：

*   ,
*   |
*   ;
*   \r
*   \n

并且您在字符类中有两次竖线 (|)。

要使警告消失，请改用：`/[,|;\r\n]+/`. 注意：只有一根管子。

但我认为您真正想要的是：`/(,|;|\r|\n)+/`或`/[,;\r\n]+/`
这与以下内容匹配：

*   ,
*   ;
*   \r
*   \n

# sass - 如何向 Sass 添加自定义函数（通过 Sass::Script::Functions）？

> ID：12356373
> 
> 赞同：4
> 
> 时间：2012-09-10T17:08:30.970
> 
> 标签：sass

我正在使用 vanilla Sass（没有 Compass/SUZY/Bourbon/etc.），但我无法确定将 *.rb 文件放在哪里。我不是 Ruby 程序员，但我确实找到了一个其他人编写的函数，它可以满足我的需要。我试过搜索，但我想出的结果是死胡同。

官方文档本身没有提供任何线索，只有如何创建自定义函数： [http ://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adding_custom_functions](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adding_custom_functions)

```
sass styles.scss styles.css -r custom.rb 
```

LoadError: no such file to load -- static/sass/modules/lib/custom.rb 在尝试此解决方案时（尽管能够 VI 文件）： [http ://www.seancolombo.com/2010/07/28/如何制作和使用自定义 sass 功能/](http://www.seancolombo.com/2010/07/28/how-to-make-and-use-a-custom-sass-function/)

这是我能找到的最接近的 SO 问题，但我没有使用 Compass 或 Rails，所以这些解决方案对我没有任何意义： [如何将扩展加载到 Sass::Script::Functions 模块？](https://stackoverflow.com/questions/8690372/how-do-i-load-extensions-to-the-sassscriptfunctions-module)

我想将我的自定义函数保留在我的模块目录中（其中包含我自己的自定义引导库）。但如果它必须去其他地方，我可以忍受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T01:14:48.507

在 Rails 4 中，这非常简单。在您的 config/initializer/ 文件夹中创建一个 sass.rb 文件并将您的模块放在那里。

例如，取这个随机函数：[https ://gist.github.com/chriseppstein/1561650](https://gist.github.com/chriseppstein/1561650)

```
module Sass::Script::Functions
  def random(*args)
    #...buncha code
  end
end 
```

只需将其粘贴在 config/initializers/sass.rb 中，您就可以在任何 .scss/sass 样式表中访问它，例如：

```
.greet{
  position: absolute;
  top: random(200px);
  left: random(200px);
  height: random(200px);
  width: random(200px);
  background-color: blue;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T20:32:51.727

尝试按照第二个链接中的说明进行操作，但指定 ruby​​ 文件的绝对路径。在我的机器上，如果给定了相对路径，SASS 似乎在查找文件时遇到问题。

# html - iPhone模拟器中的元标记问题

> ID：12356388
> 
> 赞同：0
> 
> 时间：2012-09-10T17:09:16.817
> 
> 标签：html, css, ios, responsive-design, meta-tags

我正在使用元标记来扩展网站。

这是在 iphone 上的演示，所以**可以忽略最佳实践**。

由于某种原因，当我将页面从横向更改为纵向时，缩放似乎没有改变。（我不是在谈论旋转时的切换，我是在谈论以不同方向重新加载整页）。

我正在 iPhone 模拟器中测试该站点。

我错过了一些简单的东西吗？

```
<meta name="viewport" content="width=320; initial-scale=.675">
<meta name="viewport" content="width=480; initial-scale=1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:22:56.457

你为什么使用两个视口标签？这些不是 if-then 语句；您应该设置一次视口值。就目前而言，我希望第二个覆盖第一个（尽管实际上，任何事情都可能发生）。

也不要将宽度与设备宽度混淆。可能有助于重新阅读[http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

# android - Proguard 是否从 Java 源代码中删除注释

> ID：12356389
> 
> 赞同：8
> 
> 时间：2012-09-10T17:09:17.537
> 
> 标签：android, proguard

我正在使用下面的**proguard-android.txt**文件中的代码

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.** 
```

混淆Android代码。

**我的问题**当我们在 Proguard 中使用上述设置时，Proguard 是否会从 Java 源文件中删除所有注释？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T17:22:04.337

无论设置如何，ProGuard 都不会从源文件中删除任何内容。ProGuard 确保*编译*后的文件具有混淆的方法/类名称，并在可能的情况下完全去除适当的方法/类。

无论您是否使用 ProGuard，编译后的 Java 二进制文件都不包含常规代码注释。

# windows-8 - 为什么 IIS 8.0 通过 WMI 将自己标识为 7.5？

> ID：12356390
> 
> 赞同：0
> 
> 时间：2012-09-10T17:09:19.080
> 
> 标签：windows-8, iis-8

我的 Web 应用程序的安装程序通过 WMI 进行了一些配置，为了处理不同的版本，将向 IIS 询问其版本，代码如下：

```
DirectoryEntry folderRoot = new DirectoryEntry("IIS://localhost/W3SVC/Info");
Version iisVersion = new Version((int)folderRoot.InvokeGet("MajorIIsVersionNumber"), (int)folderRoot.InvokeGet("MinorIIsVersionNumber")); 
```

Server 2012 和 Windows 8 都为此返回 7.5，即使官方版本是 8.0。这不是什么大问题，只是这与 Windows 2008 报告的版本相同。为什么会这样，是否有比检查操作系统版本更好的解决方案？

# html - 如何将文本设置为输入类型=“文本”的背景？

> ID：12356391
> 
> 赞同：1
> 
> 时间：2012-09-10T17:09:23.497
> 
> 标签：html, css

如何将文本设置为`<input type="text">`
它不应该是占位符的背景。但始终可见。
例如：

| 'from:' 用户在此处输入日期 |

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:16:07.163

如果您的意思是占位符文本，请尝试`<input type="text" placeholder="Hint Text!">`

但是，如果需要持久文本，那么可以试试这个：http: [//jsfiddle.net/j8SXZ/](http://jsfiddle.net/j8SXZ/)

编辑：随着更新的问题，[这正是您正在寻找的](http://jsfiddle.net/Debloper/j8SXZ/1/)。

更新：关于背景颜色的评论/反馈 - [http://jsfiddle.net/Debloper/j8SXZ/3/](http://jsfiddle.net/Debloper/j8SXZ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:47:17.667

您总是可以将您的文本和文本字段包装在一个 div 中，然后将整体设置为看起来像一个文本字段。

所以使用这个 HTML：

```
<div>
    <label id="lead" for="from">From: </label>
    <input id="from" type="text" />
</div> 
```

而这个造型：

```
div {
    background-color: white;
    border: 2px inset;
    cursor: auto;
    width: 250px;
}
label {
    color: gray;
}
input, input[type="text"], input:focus {
    border: none;
    outline: none;
} 
```

将导致[这个 JSFiddle 演示](http://jsfiddle.net/FvqEw/1/)。（在 Chrome 和 FF 中测试。）

**编辑**

由于 OP 表示他希望使用 JQuery UI 日期选择器，因此必须稍微调整解决方案以允许标签和文本字段都触发日期选择器。这很简单，并且在[这个问题](https://stackoverflow.com/questions/1262113/how-to-call-bind-a-jquery-datepicker-to-a-label-or-div-instead-of-an-input-field)中有所涉及。

必须更改 HTML 以将类名添加到“包装” div: `<div class="extended-textfield">`。这是因为日期选择器本身也包含在`<div>`一个 CSS 样式中，而且过于通用会导致各种讨厌的样式冲突。

div 的 CSS 选择器将更改为`div.extended-textfield`.

和 JavaScript：

```
$( "#from" ).datepicker();
$("#lead").click(function() {
    $("from").datepicker('show');
});
​ 
```

工作演示在[这里](http://jsfiddle.net/FvqEw/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:46:38.990

几个可能会让你满意的例子 [1]。

*   第一个示例使用 CSS-content，即文本由 CSS 定义并通过 CSS 伪元素插入。请注意，表单元素本身不应该生成伪元素，因此需要一个包装器。
*   第二个示例使用真实内容（即标签的内容）来提供文本。

该技巧的本质是在类似尺寸的包装器中为输入提供透明背景和绝对位置，并将位置设置为相对，以便将其立即放置在下面的任何内容之上，并让它发光。

[1] [http://codepen.io/barneycarroll/pen/bizIm](http://codepen.io/barneycarroll/pen/bizIm)

# iis - 使我的 Windows Azure Web 和服务项目可用于我的局域网？

> ID：12356392
> 
> 赞同：0
> 
> 时间：2012-09-10T17:09:25.297
> 
> 标签：iis, azure

我有一个在本地开发机器上的 Windows Azure 开发实例上运行的项目。

我有一个 运行在 : 上的**Web 项目**`http://127.0.0.1:8080` 和一个运行在`http://127.0.0.1:81`

我想让这两个项目在我的局域网上本地可用以进行开发。

我已关闭防火墙并从防火墙设置中取消阻止端口 8080 和 81。但这仍然行不通。

你能帮我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:21:11.573

就像 Brent 解释的那样，最好的解决方案是在云中进行测试（例如在暂存环境中）。有很多示例可以帮助您将其集成到构建过程中。另一方面，您将为此测试环境付费，这可能并不总是一种选择。

允许外部访问您的模拟器非常简单，只需使用 netsh（包含在 Windows 中）：

```
netsh interface portproxy add v4tov4 listenport=10081 connectport=81 connectaddress=127.0.0.1
netsh interface portproxy add v4tov4 listenport=18080 connectport=8080 connectaddress=127.0.0.1 
```

执行这些命令将使您的 Web 项目在[http://10.1.1.x:18080 上](http://10.1.1.x:18080)可用，您的服务项目在[http://10.1.1.x:10081](http://10.1.1.x:10081)上可用（将 10.1.1.x 替换为您的实际 ip）。请注意，您可能需要打开计算机上的防火墙以允许外部连接到这些端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T17:57:36.320

未创建本地开发模拟器以允许外部访问开发中应用程序的其他服务。虽然有一些不支持的黑客使这成为可能，但官方建议是在云中运行此类服务并从那里访问它们。我意识到这会使调试变得更加困难，但这通常可以通过远程进入托管应用程序的来宾 VM 和/或启用 Intellitrace（前提是您有 VS Ultimate）来解决。或者，正确检测您的应用程序也可以提供适当的证据来帮助解决任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T17:51:22.053

由于您要求“破解”Windows 8 上的当前一个，AFAIK 将转到（假设此处为默认目录结构）：

```
C:\Program Files\Microsoft SDKs\Windows Azure\Emulator\devfabric 
```

并编辑两者：

```
IISConfigurator.exe.config
IISConfigurator.exe.express.config 
```

并修改 /configuration/appSettings 以包含一个项目，显然将“YOUR IP ADDRESS HERE”替换为您的实际 IP 地址，例如 192.168.1.71。这是一个例子：

```
<!-- these settings are for the devfabric scenario -->
  <appSettings>
    <add key="SetupCloudDriveDevPath" value="true"/>
    <add key="SetupMachineKeys" value="false"/>
    <add key="FixedSiteBindingIpAddress" value="192.168.1.71"/>
  </appSettings> 
```

调试器仍将打开到源 127.0.0.1:8* 位置，但只需将 127.0.0.1 替换为您的本地 IP 地址。此外，您可能必须重新启动 Windows 7 才能使这些更改生效，并且您希望以管理员身份编辑配置文件，因为它们受到保护。

# javascript - 由列表制成的表 ( , )，如何选择一行？(:nth-child())？

> ID：12356394
> 
> 赞同：0
> 
> 时间：2012-09-10T17:09:25.753
> 
> 标签：javascript, jquery-selectors, html-lists, jquery

我用一个简单的列表结构制作了一个表格：

```
<html>
    <body>
      <ul id="Column:0">
        <li id="Row:0></li>
        <li id="Row:1></li>
        <li id="Row:2></li>
        <li id="Row:3></li>
        <li id="Row:4></li>
      </ul>
      <ul id="Column:1">
        <li id="Row:0></li>
        <li id="Row:1></li>
        <li id="Row:2></li>
        <li id="Row:3></li>
        <li id="Row:4></li>
      </ul>
      <ul id="Column:2">
        <li id="Row:0></li>
        <li id="Row:1></li>
        <li id="Row:2></li>
        <li id="Row:3></li>
        <li id="Row:4></li>
      </ul>
    </body>
</html> 
```

现在我想为每一行添加一个简单的 .mouseover()，例如在悬停时更改一行的颜色。到目前为止，这就是我想出的：

```
for (var i = 2;  i <= _totalRows; i++) {
    var row = $('#TimeTable ul li:nth-child(' + i + ')')
    row.each(function() {
        $(this).click(function(evt) {
            var $target = $(evt.target);
            console.log($target.nodeName)
            if (evt.target.nodeName == 'DIV') {
                console.log(evt.parent('li'));
            }
        }); //end $(this).click(fn)
    }); // end each(fn)
} 
```

我得到一组`<li>`与 :nth-child(i) 匹配的所有对象，其中`i`是行号。

```
var row = $('#TimeTable ul li:nth-child(' + i + ')') 
```

现在我只是迭代这个集合，为每个 .click(fn) 添加一个 .click(fn) `<li>`。这工作正常。每个单元格都有它的 .click(fn) 附加到它。但是，单击一下要做什么，是我现在被困了几个小时的地方：

```
var $target = $(evt.target);
console.log($target.nodeName)
if (evt.target.nodeName == 'DIV') {
    console.log(evt.parent('li'));
} 
```

我根本不让它运行。你实际上可以忽略这个胡言乱语，因为它只是我已经在这里尝试过的几件事中的最后一个。

我想要做的只是选择每个`<li>`id='Row:X' 并操纵它的 CSS。我所拥有的最好的是，我可以单击一个单元格，但无论该单元格在哪一行，最后一个都会被着色。我记得`i`在发生这种情况时曾用作行索引，所以我可能也会在这里错过对事件处理的一些理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:16:29.883

对重复的元素组使用类名而不是 ID。如果你给第一行一个“Row1”类，选择器很简单：

```
$('.Row1') 
```

然后：

```
$('#TimeTable li').removeClass('highlight');
$('.Row1').addClass('highlight'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:14:46.717

如果您只想在鼠标悬停时更改颜色：

```
$('#TimeTable ul li').mouseover(function(){
    $(this).css('background','red');
});

$('#TimeTable ul li').mouseout(function(){
    $(this).css('background','green');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:16:20.797

1.  使您的 ID 像这样：C1R1 (Column1Row1) 等等

2.  JQuery 阅读/谷歌搜索“每个 jquery”

3.  JQuery 阅读/谷歌搜索“jquery 绑定点击”

4.  JQuery 读取/搜索“jquery attr”和“JQuery val()”

这将为您提供编写自己的知识，最重要的是更好地理解它。您将希望实现以下目标（您的关闭但不需要 for 循环）：

JQuery 将一个单击事件处理程序附加到每个 LI 的列表，然后当单击发生时，可以检索 ID。

PS。表格有时间和地点，它们在显示数据方面几乎总是比 CSS 好 9/10 倍。如果你有一个复杂的多列行并且想要固定的高度并且没有 JS 来修复事情或做任何聪明的事情，你可以有一个表格和 css ：悬停在 TR 上，以便将鼠标悬停在上面和外面等。高度也是恒定的。

PS。PS。如果您的数据是动态的并且来自数据库并且整行是来自数据库的 ID，我倾向于避免为此使用 html ID 属性并自己创建。您可以通过 attr("myattribute");

关于 CSS 和 IDS 的注意事项：ID 的标准做法将在页面上使用一次。可重复内容的类

祝你好运。

# android - 布局名称错误？

> ID：12356400
> 
> 赞同：1
> 
> 时间：2012-09-10T17:09:56.377
> 
> 标签：android, layout, android-activity

我正在使用果冻豆。当我输入布局名称时，此布局名称会自动创建与菜单名称相同。然后我访问主要活动的布局，我无法访问 id。我收到 main 无法解析变量的错误。代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_first);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_my_first, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:06:20.713

我最近也遇到了这个问题。
原来，生成的名称“activity_main”没有被接受。我删除了下划线，它起作用了。在我删除 _ 下划线后，它能够生成 R 文件。

顺便说一句，这是最初生成的代码中的错误。我以前从未见过这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:15:22.420

尝试清理您的项目！

**项目 - > 清洁**

选择“**自动构建**”，这样每次清理项目时，都会重新构建它。是的，确保在清理之前保存文件（我知道这很奇怪，但有时错误会拒绝消失，直到你保存它然后清理它）。确保**布局文件夹**中的文件**没有错误**，因为它有时会阻止 R.java 中代码的自动生成

 **另外，请确保 MainActivity.java 中的代码没有**`import android.R`**. Eclipse 倾向于在您管理导入时添加它。**

# .net - 将表变量传递给存储过程并获取无效的对象名称'@TableVar'

> ID：12356403
> 
> 赞同：0
> 
> 时间：2012-09-10T17:10:09.300
> 
> 标签：.net, sql-server-2008-r2

我正在使用表变量重写存储过程。基本上我有一个列表，我将其传递给 DataTable，然后将数据表作为表变量传递给存储过程。存储过程可以正确编译，但是当我在 SSMS 或 .Net 中执行它时，我得到了 Invalid object name '@TableVar'。我是新手，所以非常感谢你的帮助。

```
 Alter PROCEDURE [dbo].[proc]
    (
        @TableVar [dbo].[TableVar] READONLY
    )
    AS
BEGIN
Set nocount on
Declare @MYID INT
Declare @SOMEDate DateTime
Declare @NEWDate Date

select @MYID = some_id,
@SOMEDate = convert(date, db_some_date) from tbl_some
where someval = (select tb.val1 from [@TableVar] as tb);

Merge OneTabl as target
  using (Select x.val1, x.val2, x.val3,x.val4,
                        x.val5,x.val6, x.val7 from [@TableVar] as x)
  as Source

  on val_id = @MYID
  when matched and  @MYID !=NULL then

 update set MDN= Source.[MDN],
                  val1= Source.[val1],
                  val2=Source.[val2],
                  val3=Source.[val3],
                  val4=Source.[val4],
                  val5=Source.[val5],
                  val6=Source.[val6]

  when not matched and @MYID !=NULL then  
   insert  
   values (Source.[val1],
           Source.[val2],
           Source.[val3],
               Source.[val4],
               Source.[val5],
               Source.[val6],
               Source.[val7],
               [@MYID]
      )      ;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:31:28.143

我按照建议从 tablevar ref 中删除了 [] 括号，谢谢。谢谢@Habo

# php - 旧的 PHP 代码 ':=' 运算符？

> ID：12356408
> 
> 赞同：0
> 
> 时间：2012-09-10T17:10:20.290
> 
> 标签：php, sql, operators

我正在浏览一个带有一些功能问题的旧 php 应用程序。我遇到了以下代码，该代码似乎旨在重置表中的 id：

```
 SET @num := 0;
    UPDATE `pop_table` SET id = @num := (@num+1);
    ALTER TABLE `pop_table` AUTO_INCREMENT =1; 
```

那么... ':=' 运算符到底是干什么用的？- 这个特定片段中的替代方案是什么？

我在这里搜索过，php.net，google，显然“：=”太小或太难找到，或者我只是不知道如何对其进行适当的搜索。感谢您的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:12:06.860

也就是说，SQL is := 是至少 MySQL 的可变赋值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T17:13:08.737

这不是 PHP 代码。这是MySQL。

这是一个 MySQL 函数

```
SET @num := 0 
```

这意味着将值`0`分配给变量`@num`（请参阅[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/assignment-operators.html#operator_assign-equal)）

这用于

`UPDATE pop_table SET id = @num := (@num+1);`

为了使其更易于理解，PHP 等价物将是：

`$num = 0;`（这不是真正的可比性，只是为了得到这个想法）

**更新**

我受到评论的启发，做了*不推荐*的PHP 解决方案。

```
$query = mysql_query("SELECT id FROM pop_table ORDER BY id ASC");
$id = 0;
while($result = $mysql_fetch_assoc($query)) {
    $id++
    mysql_query("UPDATE pop_table SET id = " . $id . " WHERE id=" . $result["id"]);
}
mysql_query("ALTER TABLE `pop_table` AUTO_INCREMENT =1;"); 
```

没有测试它，但应该工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T17:13:58.803

这是[MySQL 使用的赋值运算符](http://dev.mysql.com/doc/refman/5.5/en/assignment-operators.html#operator_assign-equal)。

您通常无法将 MySQL 代码转换为 PHP 代码。MySQL 用于查询数据库表并返回符合某些条件的数据。

PHP 是一种可以用来做很多事情的编程语言，但是用 PHP 代码替换 MySQL 代码（假设您找到了这样做的方法）可能会导致您的 PHP 脚本非常慢。

[PHP 手册](http://php.net/manual)
[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T19:00:30.273

你知道它已经是 Mysql 中的赋值运算符了……@num 是一个数据库变量。

但是整个片段有什么作用呢？它在循环中将整个表中的“id”字段更新为一个不错的增量范围，从 1 到 N，其中 N 是总行数：第一个更新的行获得值 1，下一行获得值 2，然后是 3等.... 最后，它将 id 列的性质更改为自动递增的列。（这可能有助于将自动增量计数器的当前值重置为比当前最大值大一，我不确定。）

为什么需要将其转换为 PHP？这旨在仅运行一次，并且仅用于清理数据库。就这些。而且，如果您想不时运行它，那么在数据库之外运行它根本没有意义。

# visual-studio - 从 VS2012 卸载 AnkhSVN

> ID：12356409
> 
> 赞同：20
> 
> 时间：2012-09-10T17:10:23.837
> 
> 标签：visual-studio, ankhsvn

我想从我的 VS2010 安装中删除 AnkhSVN，但是当我导航到 TOOLS*/Extensions and Updates 时发现卸载选项是灰色的。

以管理员身份启动 Visual Studio 2012 并取消选择 AnkhSVN 作为源代码控制提供程序未启用卸载选项。

**我不是在大喊工具，只是想融入新 UI 的精神 :-)*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-10T17:10:23.837

AnkhSVN 显然无法从 Visual Studio 2012 中禁用或卸载。

请改为执行以下操作：

*   关闭 Visual Studio 的所有实例。
*   运行 AnkhSVN 卸载程序。

*注意：我在 Revo Uninstaller 中运行了卸载程序，并且没有遗留工件（文件、注册表项）。*

卸载 AnkhSVN 后，您可能会发现您的某些项目在 .csproj 文件中仍然存在源代码控制绑定信息。我有一个包含 10 个项目的解决方案，其中只有 8 个有这个问题（所有项目都由 AnkhSVN 控制......不知道为什么不是所有项目都有这个问题）。在这种情况下，您将收到错误消息：

> 项目“X”受源代码控制。将此项目注册到源代码管理时发生错误。建议您不要对此项目进行任何更改。

我可以通过在文本编辑器中编辑 .csproj 文件并删除以下行来解决此问题：

```
<SccProjectName>Svn</SccProjectName>
<SccLocalPath>Svn</SccLocalPath>
<SccAuxPath>Svn</SccAuxPath>
<SccProvider>SubversionScc</SccProvider> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-29T10:37:29.643

我用了

`Windows > Control Panel > Programs > Uninstall a Program > AnkhSVN.`

对我来说似乎没有任何麻烦。VS2012 在卸载过程中没有打开。

# java - 获取数字模型微调器的选定值

> ID：12356410
> 
> 赞同：2
> 
> 时间：2012-09-10T17:10:24.573
> 
> 标签：java, integer, spinner

如何从 Java 中基于数字的微调器中获取选定的值？

正如我旁注的那样，为什么 android 总是出现在搜索词 spinner 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:20:37.243

A`JSpinner`有一个`SpinnerModel`, 存储选定的值、值的边界和步长等。

```
JSpinner spinner;
Object value = spinner.getModel().getValue(); 
```

其他 Spinners 也以这种方式工作。它基于 Model-View-Controller(MVC)-Pattern 并将数据与其表示和操作分开。

# android - 带有 ActionBarSherlock 的选项卡和带有顶部导航栏的片段

> ID：12356422
> 
> 赞同：1
> 
> 时间：2012-09-10T17:11:29.013
> 
> 标签：android, android-fragments, actionbarsherlock

我正在实现与此处所述相同的设计：[Android ActionBarSherlock Top Bar](https://stackoverflow.com/questions/11412841/android-actionbarsherlock-top-bar) and using the accepted answers code。尽管它正在将我的导航栏推到我的标签下方：

[有效的 XHTML http://img255.imageshack.us/img255/8908/tabsa.png](http://img255.imageshack.us/img255/8908/tabsa.png)。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:00:01.170

Its a bug with ActionBarSherlock (from [https://github.com/JakeWharton/ActionBarSherlock/issues/327](https://github.com/JakeWharton/ActionBarSherlock/issues/327) ).

Cause:

> When you call setDisplayShowHomeEnabled(false) in onCreate() and are using a tab navigation mode, the tabs will appear above the action bar as opposed to below it.

Workaround:
Remove the setDisplayShowHomeEnabled call, and add this instead:

```
View homeIcon = findViewById(android.R.id.home);
((View) homeIcon.getParent()).setVisibility(View.GONE); 
```

# javascript - 在 angularjs 中创建自定义控件的推荐方法

> ID：12356423
> 
> 赞同：1
> 
> 时间：2012-09-10T17:11:36.817
> 
> 标签：javascript, angularjs

目前，我正在学习 Angularjs，构建自定义组件有很多要求。其中之一是日期格式化程序 - 这是示例角度模块指令 javascript：

```
var myApp = angular.module('myApp', []);

myApp.directive('datetime', function () {
    return {
        restrict: 'E',
        scope: { value: '@value' },
        template: 
            '<span>{{value | date: "dd/MM/yyyy @ hh:mma"}}</span>'
        }
    }
); 
```

以下html使用它：

```
<tr ng-repeat="item in results.OpenProjects">
    <td><datetime value="{{ item.WhenCreated }}"></datetime></td>
</tr> 
```

以上工作正常，但我想知道我是否要按照我所做的方式编写控件。

有没有人做过这种类型的工作并且可以加入他们的想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:59:47.320

在这种情况下， datetime 指令似乎有点过头了，因为它没有做 ..well..anything..

您的格式化由日期过滤器完成（这是进行格式化的正确位置！）。

您的 datetime 指令也可能类似于

```
<span>{{item.whenCreated | date: "dd/MM/yyyy @ hh:mma"}}</span> 
```

指令用于 DOM 操作。因此，无论您在非角度场景中做什么 $("") ..使用指令。

# x11 - 错误：无法打开显示：本地主机：0.0 - 试图从 CentOS 6.2 64 位打开 Firefox 并在 Win7 上显示

> ID：12356425
> 
> 赞同：20
> 
> 时间：2012-09-10T17:11:47.987
> 
> 标签：x11, x11-forwarding

我在 Windows7 机器上，我试图让 firefox 在 centOS 机器上打开，但显示在我当前的屏幕上。在终端输入`firefox`时，我收到以下错误：

```
Error: cannot open display: localhost:0.0 
```

要设置显示，我使用了命令

```
$ export DISPLAY=localhost:0.0 
```

一些网站建议使用以下内容，但它也不起作用：

```
$ export DISPLAY=:0.0 
```

我正在使用 PuTTY，并且选中了`Enable X11 forwarding`复选框，并且 XMing 正在 Windows 上运行。此外，centOS 文件上的 sshd_config 似乎也已正确设置：

```
$ cat /etc/ssh/sshd_config |grep -i x11
#X11Forwarding no
X11Forwarding yes
#X11DisplayOffset 10
X11UseLocalhost yes 
```

我查看了许多页面并搜索了 StackOverflow，但没有一个能够以任何方式帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T18:11:41.993

因此，事实证明 X11 实际上并没有安装在 centOS 上。似乎没有任何迹象表明它没有安装。我执行了以下命令，现在打开了 Firefox：

```
yum groupinstall 'X Window System' 
```

希望这个答案能帮助其他困惑的人:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T17:03:45.190

我曾经遇到过这个问题，并且能够通过修复我的 /etc/hosts 来解决它。它只是无法解析本地主机名称...详细信息在这里：http: [//itvictories.com/node/6](http://itvictories.com/node/6)

事实上，有 99% 的错误与 /etc/hosts 文件有关

X 服务器无法解析 localhost 并且所有后续操作都失败了。

请确保您有类似的记录

```
127.0.0.1 localhost 
```

在您的 /etc/hosts 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-25T20:38:31.520

我有这个错误信息：

```
Error: Can't open display: localhost:13.0 
```

这为我修复了它：

```
export DISPLAY="localhost:10.0" 
```

你也可以使用这个：

```
export DISPLAY="127.0.0.1:10.0" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-24T10:11:16.267

在开始之前确保安装：

```
yum install -y xorg-x11-server-Xorg xorg-x11-xauth xorg-x11-apps 
```

1.  开始`xming`或`cygwin`
2.  与 X11 转发建立连接（在腻子中不要忘记为 X 显示位置设置 localhost:0.0）
3.  编辑 sshd.cong 并重新启动

```
 cat /etc/ssh/sshd_config | grep X
                             X11Forwarding yes
                             X11DisplayOffset 10
AddressFamily inet 
```

4.  如果没有 X11 转发，您将受到 X11 SECURITY 的约束，然后您必须： 使用方法（例如，xhost 命令）授权远程服务器与本地 X 服务器建立连接 设置显示环境变量以重定向输出到本地计算机的 X 服务器。在本例中： 192.168.2.223 是服务器的 IP 192.168.2.2 是安装 x 服务器的本地计算机的 IP。也可以使用本地主机。

```
blablaco@blablaco01 ~
$ xhost 192.168.2.223
192.168.2.223 being added to access control list

blablaco@blablaco01 ~
$ ssh -l root 192.168.2.223
root@192.168.2.223s password:
Last login: Sat May 22 18:59:04 2010 from etcetc
[root@oel5u5 ~]# export DISPLAY=192.168.2.2:0.0
[root@oel5u5 ~]# echo $DISPLAY
192.168.2.2:0.0
[root@oel5u5 ~]# xclock& 
```

然后必须启动 xclock 应用程序。

在 putty 或 mobaxterm 上检查，不要在远程桌面管理器软件中检查。小心使用 sudo 的用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-04T08:54:45.087

在我的情况下，问题是由于 .Xauthority 文件不匹配引起的。最初出现“Invalid MIT-MAGIC-COOKIE-1”错误，然后出现“错误：无法打开显示：：0.0”

从我运行 vncserver 的用户重新生成 .Xauthorityfile 并通过重新启动 vnc 服务和 dbus 服务来重置密码为我解决了这个问题。

# ruby-on-rails - Joosy 指南文档的挑战

> ID：12356429
> 
> 赞同：-1
> 
> 时间：2012-09-10T17:12:33.237
> 
> 标签：ruby-on-rails, coffeescript, joosy

我在遵循 Joosy Guide 文档 (http://guides.joosy.ws/) 时遇到了很多麻烦。无意冒犯，但英语有点“独特”。我愿意帮助编辑以了解更多关于 Joosy 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:15:21.230

我是业主。非常欢迎拉取请求:)。

# html - 标记内的复选框输入，只会更改检查状态而不打开链接

> ID：12356435
> 
> 赞同：1
> 
> 时间：2012-09-10T17:13:31.040
> 
> 标签：html, css, checkbox

 我正在尝试更改 squirrelmail GUI，以便它可以更轻松地与平板电脑一起使用。我几乎已经对所有内容进行了排序，除了我在`<a>`标签内有一个复选框，我不想在单击复选框时打开链接。

它都在a内，`<li>`因此可以单击整行以打开光标下的邮件。

下面是代码，这里是我到目前为止的链接，除了复选框之外，它适用于我想要做的事情： 

[http://jsfiddle.net/YEpuf/1/](http://jsfiddle.net/YEpuf/1/)

```
 <li>
    <a href="read_body.php?account=0&amp;mailbox=INBOX&amp;passed_id=93&amp;startMessage=1"><dl>
    <dt class="col_check"><input type="checkbox" name="msg[0]" id="mbx_1_msg0" value="93"  onclick=""/></dt>
    <dd class="col_from" >name@domain.com</dd>
    <dd class="col_date">Sep 9, 2012</dd>
    <dd class="col_flag"><img src="../images/themes/outlook/msg_read.png" alt="R" title="(Read)" /></dd>
    <dd class="col_flagx"><img src="../images/themes/outlook/attach.png" alt="A" title="Attachment" /></dd>
    <dd class="col_flagx"><img src="../images/themes/outlook/transparent.png" alt="!" title="Normal priority" width="5" /></dd>
    <dd class="col_subject" >Re:&#32;test&#32;email&#32;36</dd>
    </dl></a></li> 
```

我使用过`<dd>`是因为我发现在 cols 中排列项目很容易，但在内部尝试过但行高`<span>`有`<div>`问题`<li>`。但也许有更好的方法，所以任何建议/建议都会很棒。

编辑：我刚刚在 IE 和 Chrome 中尝试了我的代码，它运行良好，所以看起来这是 FF 的问题。无论如何仍在寻找答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:18:37.033

`a`简单（且正确）的答案是：您的元素中没有复选框。**错误**的答案恕我直言，但仍然可能是使用javascript来防止事件冒泡的答案：

[https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:32:26.503

这应该这样做：

```
var elements = document.querySelectorAll("li > a");
// You can make the query selection easier by adding a class to the anchor tags

for ( var el in elements ) {
    el.addEventListener("click", function (event) {
        event.preventDefault;
    }, false);
} 
```

# python - 在python中从ElementTree中转义xml文本

> ID：12356438
> 
> 赞同：2
> 
> 时间：2012-09-10T17:13:36.670
> 
> 标签：python, xml, decoding, elementtree

我正在尝试从 XML 文档中提取转义节点。节点的原始文本如下所示：

```
<Notes>{&quot;Phase&quot;: 0, &quot;Flipper&quot;: 0, &quot;Guide&quot;: 0,     
&quot;Sample&quot;: 0, &quot;Triangle8&quot;: 0, &quot;Triangle5&quot;: 0,     
&quot;Triangle4&quot;: 0, &quot;Triangle7&quot;: 0, &quot;Triangle6&quot;: 0,     
&quot;Triangle1&quot;: 0, &quot;Triangle3&quot;: 0, &quot;Triangle2&quot;: 0}</Notes> 
```

我将文本拉出如下：

```
infile = ET.parse("C:/userfiles/EXP011/SESAME_60/SESAME_60_runinfo.xml")
r = infile.getroot()
XMLNS = "{http://example.com/foo/bar/runinfo_v4_3}"
x=r.find(".//"+XMLNS+"Notes")
print(x.text) 
```

我希望得到：

```
{"Phase": 0, "Flipper": 0, "Guide&quot": 0,     
"Sample": 0, "Triangle8": 0, "Triangle5": 0,     
"Triangle4": 0, "Triangle7": 0, "Triangle6": 0,     
"Triangle1": 0, "Triangle3": 0, "Triangle2": 0} 
```

但是，相反，我得到了：

```
 {&quot;Phase&quot;: 0, &quot;Flipper&quot;: 0, &quot;Guide&quot;: 0,      
 &quot;Sample&quot;: 0, &quot;Triangle8&quot;: 0, &quot;Triangle5&quot;: 0,   
 &quot;Triangle4&quot;: 0, &quot;Triangle7&quot;: 0, &quot;Triangle6&quot;: 0, 
 &quot;Triangle1&quot;: 0, &quot;Triangle3&quot;: 0, &quot;Triangle2&quot;: 0} 
```

如何获取未转义的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T17:25:42.650

使用`HTMLParser.HTMLParser()`：

```
In [8]: import HTMLParser    

In [11]: HTMLParser.HTMLParser().unescape('&quot;')
Out[11]: u'"' 
```

saxutils 处理`&lt;`,`&gt;`和`&amp;`，但它不处理`&quot;`。

```
In [9]: import xml.sax.saxutils as saxutils

In [10]: saxutils.unescape('&quot;')
Out[10]: '&quot;' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-20T14:25:55.307

由于`python 3.4`您可以使用`html.unescape`.

```
>>> from html import unescape
>>> unescape('&quot;')
'"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T10:23:48.780

由于某种原因，我没有设法`&quot;`在 Python中使用转义符，但我找到了一种解决方法来获取 " 而不是使用以下函数在 XML 文件中：`2.7.5``&quot;``replace`

```
with open(xmlfilename, 'w') as f:
     f.write(myxml.toprettyxml().replace("&quot;",'"')) 
```

# c# - 覆盖附加文本

> ID：12356439
> 
> 赞同：-3
> 
> 时间：2012-09-10T17:13:39.440
> 
> 标签：c#, winforms, properties, user-controls

我制作了自己的自定义 TextBox 控件，但现在我需要添加 AppendText 属性，有人知道如何执行此操作吗？我似乎在 Google 上找不到任何关于此的信息，我只能找到您如何使用它，而不是您如何将其植入自定义控件中。

如果有人感兴趣，这里是 TextBox 的代码[http://pastebin.com/iW4xQCai](http://pastebin.com/iW4xQCai)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:22:10.283

`TextBox`一般来说，直接继承而不是创建复合控件会好得多。

`AppendText` **无论哪种方式，实现该方法**都应该没有问题（[方法和属性之间存在差异](http://msdn.microsoft.com/en-us/library/0wwfsses%28v=vs.80%29.aspx)）。

如果您没有覆盖`TextBox`，只需向您的类添加一个新方法，该方法将调用传递给您的文本框。

```
public void AppendText(string txt)
{
    textBox.AppendText(txt);
} 
```

如果您*要*覆盖`TextBox`，则绝对不需要任何代码，因为该方法已经被继承。

# binary - 二进制可被 10 整除

> ID：12356442
> 
> 赞同：1
> 
> 时间：2012-09-10T17:13:42.627
> 
> 标签：binary, division

如何检查二进制数是否可以除以 10（十进制），而不将其转换为其他系统。例如，我们有一个数字：

```
1010 1011 0100 0001 0000 0100 
```

我们如何检查这个数字是否能被 10 整除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:17:30.320

> 首先将数字分成奇数位和偶数位（我称“偶数”对应于 2 的偶数次方的位）：
> 
> 100100110010110000000101101110 0 1 0 1 0 0 1 0 0 0 1 1 0 1 0 偶数 1 0 0 1 0 1 1 0 0 0 0 0 1 1 1 奇数
> 
> 现在在每一个中，交替添加和减去数字，如在十进制中被 11 整除的标准测试（从右边的加法开始）：
> 
> 100100110010110000000101101110 +0-1+0-1+0-0+1-0+0-0+1-1+0-1+0 = -2 +1-0+0-1+0-1+1-0 +0-0+0-0+1-1+1 = 1
> 
> 现在将奇数的总和加倍并将其添加到偶数的总和中：
> 
> 2*1 + -2 = 0
> 
> 如果结果能被 5 整除，就像在本例中一样，数字本身也能被 5 整除。
> 
> 因为这个数也能被 2 整除（最右边的数字是 0），所以它可以被 10 整除。

[http://mathforum.org/library/drmath/view/55908.html](http://mathforum.org/library/drmath/view/55908.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:51:45.577

如果您在谈论计算方法，则可以进行 5 可整性测试和 2 可整性测试。
下面的数字假定为无符号 32 位算术，但可以很容易地扩展到更大的数字。

我将首先提供一些代码，然后是更文字的解释：

```
unsigned int div5exact(unsigned int n)
{
    // returns n/5 as long as n actually divides 5
    // (because 'n * (INV5 * 5)' == 'n * 1' mod 2^32

    #define INV5 0xcccccccd

    return n * INV5;

}

unsigned int divides5(unsigned int n)
{
    unsigned int q = div5exact(n);
    if (q <= 0x33333333) /* q*5 < 2^32? */
    {
        /* q*5 doesn't overflow, so n == q*5 */
        return 1;
    }
    else
    {
        /* q*5 overflows, so n != q*5 */
        return 0;
    }
}

int divides2(unsigned int n)
{
    /* easy divisibility by 2 test */
    return (n & 1) == 0;
}

int divides10(unsigned int n)
{
    return divides2(n) && divides5(n);
}

/* fast one-liner: */
#define DIVIDES10(n) ( ((n) & 1) == 0 && ((n) * 0xcccccccd) <= 0x33333333 ) 
```

被 2 整除很容易：*(n&1) == 0*意味着*n*是偶数。

被 5 整除涉及乘以 5 的倒数，即 0xcccccccd（因为*0xcccccccd * 5 == 0x400000001*，如果截断为 32 位，则仅为 0x1）。
当你将*n*5*乘以 5的倒数时，你会得到*n * 5*(inverse of 5)*，这在 32 位数学中简化为*n*1*。

现在假设*n*和*q*是 32 位数字，并且*q = n*(inverse of 5) mod 2 ^(32)*。
因为*n*不大于0xffffffff，所以我们知道*n/5*不大于*(2 ^(32) -1)/5*（即0x33333333）。因此，我们知道如果*q*小于或等于*(2 ^(32) -1)/5*，那么我们知道*n*正好除以 5，因为*q * 5*不会被截断为 32 位，因此等于*n*，所以*n*除以*q*和 5。

如果*q*大于*(2 ^(32) -1)/5*，那么我们知道它不能整除 5，因为在可被 5 整除的 32 位数字与 0 和*(2 ^(32) -1)/5*，因此超出此范围的任何数字都不会映射到可被 5 整除的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-21T13:51:06.343

**这是python中使用按位技术检查除以10的代码**

```
#taking input in string which is a binary number eg: 1010,1110
s = input()
#taking initial value of x as o
x = 0
for i in s:
    if i == '1':
        x = (x*2 + 1) % 10
    else:
        x = x*2 % 10
#if x is turn to be 0 then it is divisible by 10
if x:
print("Not divisible by 10")
else:
print("Divisible by 10") 
```

# javascript - Android 键盘不适用于包含 Javascript 的网页

> ID：12356443
> 
> 赞同：3
> 
> 时间：2012-09-10T17:13:47.950
> 
> 标签：javascript, android

我创建了一个链接到另一个站点的应用程序，该站点有一个表单（以及后台的一些 javascript）

由于任何 javascript 页面在任何 Android 2.2-2.3 设备上点击输入字段都不会调出软键盘，当你强制它时你根本无法输入任何东西。

我的 ICS 设备在网站上运行得非常好（我猜是因为更新了移动浏览器）

是否有任何代码可以添加到我的项目中，以允许较旧的 2.2 和 2.3 设备正确运行 javascript 或能够正确处理网站输入字段？

这是我遇到问题的网站：http: [//fhsdschools.revtrak.net/tek9.asp?pg=products &grp=1](http://fhsdschools.revtrak.net/tek9.asp?pg=products&grp=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:49:32.257

我在网络视图中遇到了类似的问题。当我们启用 java 脚本时，焦点存在一些问题。我尝试将焦点重定向到触摸上，问题就解决了。这就是我所做的：

```
wv.requestFocus(View.FOCUS_DOWN);
        wv.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_UP:
                    if (!v.hasFocus()) {
                        v.requestFocus();
                    }
                    break;
                }
                return false;
            }
        }); 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:01:52.773

所有这些Javascript真的有必要吗？对于这样一个静态网页，它肯定有相当多的晦涩的javascript。可能是 jQuery 加载功能失败，导​​致浏览器出错。这有点像是在使用浏览器的功能做一个粉碎和抓取策略，直到它弄清楚什么有效，什么无效。

另外，使用开发者控制台：[https ://android.stackexchange.com/questions/5999/android-browsers-aboutdebug-what-do-those-settings-do](https://android.stackexchange.com/questions/5999/android-browsers-aboutdebug-what-do-those-settings-do)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:56:40.027

如果您的 javascript 已启用并且您已启用会话 cookie 但您仍然无法进入编辑文本，则您当前的浏览器不支持在该页面上运行的脚本。尝试安装一些其他互联网浏览器并检查它是否有帮助。我不认为向项目添加任何代码片段会有所帮助。

# android - 从 Timepicker 的编辑文本中获取时间

> ID：12356444
> 
> 赞同：0
> 
> 时间：2012-09-10T17:13:50.093
> 
> 标签：android, android-edittext, android-softkeyboard, timepicker, numberpicker

我看过较早的帖子，所有答案都建议 clearFocus。

我不能这样做，因为我的 TimePicker 不在对话框中，所以我不知道什么时候应该调用 clearFocus() 函数，如果我之后尝试修改 TimePicker，它可能会使我的应用程序崩溃。

我确信这个问题有一个解决方案，因为 Android 附带的警报应用程序在没有对话框的情况下执行此功能。

欢迎任何答案，问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:48:21.817

如果用户通过点击加号或减号或通过使用键盘手动编辑时间来更改小时或分钟值，您应该使用**TimePicker.OnTimeChangedListener**来处理**onTimeChanged操作。**

这是**我的代码**：

活动：

```
public class MainActivity extends Activity 
    implements TimePicker.OnTimeChangedListener {

    private TextView resultTime;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        resultTime = (TextView) findViewById(R.id.activity_main_textview_resulttime);

        TimePicker timePicker = (TimePicker) findViewById(R.id.activity_main_timepicker);
        {    
            timePicker.setIs24HourView(true);
            timePicker.setOnTimeChangedListener(this);
        }
    }

    @Override
    public void onTimeChanged(TimePicker timePickerView, int hours, int minutes) {
        final String stringNewTime = hours + " : " + minutes;
        resultTime.setText(stringNewTime);
    }   
} 
```

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="vertical" >

    <TimePicker
        android:id="@+id/activity_main_timepicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="14dip"
        android:layout_marginRight="16dip"
        android:focusable="true"
        android:focusableInTouchMode="true" />

    <TextView
        android:id="@+id/activity_main_textview_resulttime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

希望，它会帮助你！

# android - 是否可以更改 GMail 电子邮件客户端上的签名？

> ID：12356449
> 
> 赞同：0
> 
> 时间：2012-09-10T17:14:11.007
> 
> 标签：android, gmail

是否可以通过 GMail 客户端应用程序以编程方式更改电子邮件的签名？喜欢：*从我的 iPhone*签名发送。我知道这是一种侵入性和侵略性，但我只是好奇这是否可能（您认为电子邮件签名存储在哪里？是否可以更改它，即使有黑客攻击？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:45:16.490

不，您不能通过您的应用程序执行此操作。任何应用都不能使用 Android SDK 编辑其他应用的首选项。

如果它是 root 设备，您的应用程序具有 root 访问权限，并且如果您确切知道 Gmail 存储签名的位置和格式（SharedPreferences、SQLite），您也许可以做到这一点。

但我**强烈**建议您不要这样做，因为这种侵犯用户隐私的行为会让您走上被卸载的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T20:02:53.470

这完全可以通过 Google Apps 电子邮件设置 API 实现。在这里查看： [https ://developers.google.com/admin-sdk/email-settings/#manage_signature_settings](https://developers.google.com/admin-sdk/email-settings/#manage_signature_settings)

请注意，您实际上并没有更改手机 gmail 的签名，而是更改了该用户的一般 gmail 的签名，因此可能不是您要查找的内容...

[编辑]：请注意，这仅适用于您自己的域（而不是 gmail.com）的 Google Apps。对不起，如果我让任何人感到困惑......

# npapi - 如何将普通的 NPAPI 插件类对象传递给 javascript

> ID：12356451
> 
> 赞同：0
> 
> 时间：2012-09-10T17:14:13.620
> 
> 标签：npapi

我的 NPAPI 插件中有我的 Plugin.cpp 类我想将这个类对象传递给 javascript 函数，如下所示::

```
function testData(){
 var obj = data.getObject(); 
```

//data 是在 javascript 中创建的对象，getObject 在 Plugin.cpp 中实现，在 Invoke 方法中，在 getObject 中我必须返回 Plugin Class Object 。obj 我必须访问插件方法。

```
 initFS(obj); 
```

}

```
function initFS(obj) {
  obj.testFunc(); //testFunc method is in the Plugin
} 
```

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:15:26.363

您只需创建一个额外的 NPObject 并将其放入您作为参数发送到 InvokeDefault 调用的 NPVariant 中。

请记住，当您调用 InvokeDefault 并将其交给 Javascript 时，如果需要保留该对象，浏览器将保留该对象，因此您需要在完成对象后执行 Release 以避免内存泄漏。

见[http://npapi.com/memory](http://npapi.com/memory)

另见[http://npapi.com/tutorial3](http://npapi.com/tutorial3)

# audio - MediaElement.js - 如何在播放音频之前设置持续时间？

> ID：12356452
> 
> 赞同：5
> 
> 时间：2012-09-10T17:14:20.733
> 
> 标签：audio, mediaelement.js, duration

有没有办法在音频播放器上第一次按下播放之前预加载持续时间。我知道您可以使用 { duration: 120 } 如果每个剪辑的长度为 120 秒，这很好。我在数据库中没有可用的信息来动态填充这个变量，所以必须有另一种方法来调整 MediaElement.JS 脚本来做到这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-03T12:36:30.497

通过设置 preload 属性让浏览器加载元数据。

句法：

```
<audio preload="auto|metadata|none"> 
```

[http://www.w3schools.com/tags/att_audio_preload.asp](http://www.w3schools.com/tags/att_audio_preload.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:33:26.527

我认为 mediaelement.js 没有办法在下载全部或部分文件之前获取持续时间。您可以播放视频，轮询持续时间属性，直到获得一个值，然后将视频重置为开始。虽然那不会很优雅。

您可以使用像这个客户端这样的 JavaScript 库： [https ://github.com/aadsm/JavaScript-ID3-Reader](https://github.com/aadsm/JavaScript-ID3-Reader)

如果您使用的是 PHP，那么您可以在服务器端执行此操作。有关更多信息，请参阅[PHP 函数以获取 MP3 持续时间](https://stackoverflow.com/questions/12053125/php-function-to-get-mp3-duration)。

希望这可以帮助。

# mysql - 进入流程 20/ 20

> ID：12356453
> 
> 赞同：3
> 
> 时间：2012-09-10T17:14:32.043
> 
> 标签：mysql, linux, webserver, httpserver

在我的 Linux 服务器的 Cpanel 上，我看到 Entry Processes 是 20/20 。当我连接到网站时

> `达到资源限制
> 
> 该网站暂时无法满足您的请求，因为它超出了资源限制。请稍后再试。`

1 我想知道导致资源增加的原因和方式

2 在不将其转移到新主机的情况下，我能做些什么来有效地利用它。

Ny 服务器基本上是一个照片查看应用程序。一天，我通常会接待大约 400 名访客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-18T16:28:40.620

我有同样的问题，就我而言，这是一个编程问题。每次通过 PHP 编程向 MySQL 服务器请求查询时，都需要关闭连接，否则会长时间保持打开状态。

如果你用**mysql_close($con);立即关闭它** 然后它释放 PHP 程序的所谓“进入过程”。我在成功执行查询后立即关闭。

因此，我的建议是在您进行查询后立即关闭数据库连接。并确保在 PHP 程序结束时（最后一行代码）再次关闭它，以防万一你错过了关闭其中一个。关闭连接不会损害您的编程，只需确保您没有打开任何打开的连接，因此其他用户可以访问它们，您的条目也被关闭。

祝你好运。

# mysql - 一张表中两列之间的外键关系

> ID：12356458
> 
> 赞同：3
> 
> 时间：2012-09-10T17:14:46.593
> 
> 标签：mysql, database-design

我正在构建一个表示“注释”的数据库表，该表在其中两个列中具有父子关系，如下所示：

```
ID           INT(10) PK NOT NULL UNSIGNED ZEROFILL AUTOINCREMENT  -- Primary key
parent_ID    INT(10) UNSIGNED ZEROFILL                 -- References Primary key
username     VARCHAR(30) NOT NULL
information  VARCHAR(256) NOT NULL
comment      VARCHAR(256) NOT NULL 
```

where`username`是`user`表的外键，是写笔记的人的用户名，是笔记中`information`包含的信息，`comment`是`username`添加的内容。`comment`总会有东西在里面，不一定和以前的用户一样。

这个概念是有人可以“复制”一个便笺并拥有自己的评论，并说“我从 xxx 那里得到了这个便笺”，从而形成了父子关系。可能有点像在 Facebook 上分享。

如何正确形成 parent_ID 列？我应该使用识别关系吗？哪些方面是强制性的？我认为这必须是一对多的关系，因为五个人可以复制同一个笔记。

我希望复制比创建新笔记更多，因此`NULL`记录中的 ' 数量会相对较少，但是要完全摆脱空值，我应该应用约束并简单地使用基本上无意义的记录`NOT NULL`来创建默认父级`0`在`ID 0`软件中并注意这一点？

这甚至是正确的方法吗？我是否应该采用两表系统：

```
ID          INT(10)      PK
information VARCHAR(256)
orig_user   VARHCAR(30)  FK  -- Potentially 
```

和

```
ID          INT(10)      PK FK
username    VARCHAR(30)  PK FK
comment     VARCHAR(256) 
```

哪个按定义消除了任何可能`NULL`的 's ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:48:34.487

> 我应该使用识别关系吗

不，只`ID`应该在PK中，因为它是**独一无二**的。此外，根（无父）注释将具有 NULL`parent_ID`并且 NULL 不能在 PK 中。

> 我认为这必须是一对多的关系，因为五个人可以复制同一个笔记。

正确的。它也是一棵树，因为可以有多个级别的复制。

> ...我是否应该应用 NOT NULL 约束并简单地将默认父级 0 设置为在 ID 0 处具有基本上无意义的记录，并在软件中记下这一点？

不需要，FK 仍会在 0 上强制执行，并且您需要一个“虚拟”行来满足它，正如您已经指出的那样。FK 忽略 NULL，所以只需在根音符的`parent_ID`.

> 我应该采用两桌系统吗？

这不是同一件事的模型。它只允许您连接到原始用户，而不是原始注释。

如果单个音符可能有多个父级，则*不同*的两表设计将是可行的，但这里的情况似乎并非如此。

> 哪个按定义消除了任何可能的NULL？

您似乎很想消除 NULL。有什么理由吗？

* * *

总而言之，您应该将笔记存储在一张表中，如下所示：

```
CREATE TABLE note (
    ID           INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    parent_ID    INT(10) UNSIGNED,
    username     VARCHAR(30) NOT NULL,
    information  VARCHAR(256) NOT NULL,
    comment      VARCHAR(256) NOT NULL,
    FOREIGN KEY (parent_ID) REFERENCES note (ID),
    FOREIGN KEY (username) REFERENCES `user` (username)
); 
```

# c++ - 模板类的模板成员的函数句柄

> ID：12356461
> 
> 赞同：0
> 
> 时间：2012-09-10T17:15:01.273
> 
> 标签：c++, boost-asio

如何为模板类中的模板函数创建函数回调。这是我到目前为止所拥有的：

```
template <typename SocketType> 
class NettyPBSslSerializer {
    ...
    template <typename Handler>
    void async_read(google::protobuf::Message *pbmess,Handler handler ) {
            void (NettyPBSslSerializer<SocketType>::*f1)(
                    const boost::system::error_code&,std::size_t offset,google::protobuf::Message *pbmess,boost::tuple<Handler>)
                    =&NettyPBSslSerializer<SocketType>::async_read_varint <Handler> ;

            boost::asio::async_read (socket_,
                                     boost::asio::buffer(&read_buffer_.at(0), 9),
                                     boost::asio::transfer_at_least(1),
                                     boost::bind(f1,this,boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred, pbmess,boost::make_tuple(handler) )
                                    );
    }
    template <typename Handler>
    void async_read_varint(const boost::system::error_code& e, std::size_t offset,google::protobuf::Message *pbmessp, boost::tuple<Handler> handler) {
    }

    ....
    SocketType socket_; 

} 
```

我使用 g++ 得到以下错误

```
 nettypbserializer.hpp|186| error: expected primary-expression before '>' token
  nettypbserializer.hpp|186| error: expected primary-expression before ';' token 
```

第 186 行是

```
=&NettyPBSslSerializer<SocketType>::async_read_varint <Handler> ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:47:31.837

您不能将指针指向（成员）函数模板，因为它还不存在。一种解决方案是将`Handler`类型参数移动到`NettyPBSslSerializer`(so as `NettyPBSslSerializer<SocketType, HandlerType>`)，然后绑定`&NettyPBSslSerializer::async_read_varint`...

编辑：

这实际上很容易。您不能使用指向成员函数模板的指针，但可以构建一个闭包，该函数模板将在其中使用正确的类型进行实例化并将结果传递给`boost::async`. 这是一个[概念实现](http://ideone.com/93q7U)：

```
#include <iostream>

namespace boost {
    template <typename Stream, typename Handler>
    void async_read(Stream p_Stream, Handler p_Handler)
    {
        p_Handler();
    }
}

template <typename SocketType>  
class NettyPBSslSerializer { 
    SocketType m_Socket;

        template <typename Handler> 
        void async_read_varint(Handler handler) {
                handler();
        } 
public:
        template <typename Handler> 
    void async_read(Handler handler) {
        boost::async_read(m_Socket, [&]() -> void {
            this->async_read_varint(handler);
        });
        } 

    NettyPBSslSerializer(SocketType const & p_Socket) : m_Socket(p_Socket) {}
};

void a_handler()
{
    std::cout << "a_handler called" << std::endl;
}

int main()
{
    NettyPBSslSerializer<int> tTmp(42); 

        tTmp.async_read(a_handler);
} 
```

# android - Android - 光标加载器

> ID：12356462
> 
> 赞同：0
> 
> 时间：2012-09-10T17:15:14.423
> 
> 标签：android, cursor

我一直在尝试使用光标加载器。我开始关注本教程 [http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html](http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html)但可以不明白。教程让我陷入混乱。

据我所知，cursorloader 是一个适配器，适配器的工作是去内容提供商获取数据，然后将数据放入查看。

内容解析器是做什么的？

Android 文档说 SimpleCursorAdapter 已被贬值并说要使用光标适配器，这是我正在谈论的教程 [http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content -provider.html](http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html)

在这里，他同时使用了 simplecursoradapter 和 cursor loader。为什么会这样？谁能解释一下，如何使用游标加载器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:52:19.467

你把两个不同的东西混为一谈。

游标加载器从数据源获取数据并将其加载到游标中，然后管理游标。游标基本上是一种内存数据存储结构。

适配器从光标（或数组或列表）中获取数据并将其放入您的显示布局中以供查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:29:54.827

我认为您仍然可以使用 SimpleCursorAdapter。查看文档，看起来旧的构造函数已被弃用，但您可以使用另一个构造函数，即：

SimpleCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) 标准构造函数。

更多细节在这里：http: [//developer.android.com/reference/android/widget/SimpleCursorAdapter.html](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

# java - Java POI 找不到符号 WorkbookFactory

> ID：12356463
> 
> 赞同：18
> 
> 时间：2012-09-10T17:15:16.990
> 
> 标签：java, apache-poi

我正在将 HSSF 模型转换为 XSSF。我在这里和那里遇到小错误。我下载了最新的 POI 并将所有 jar 文件放入其中，并将 apache 包含在我的 java 类中.....得到这个错误：

```
import org.apache.poi.ss.usermodel.Workbook;

Workbook wb = WorkbookFactory.create(); 
```

275：找不到符号 [javac] 符号：变量 WorkbookFactory [javac] 位置：类 mil.usmc.logcom.chassis.util.HSSFUtils [javac] Workbook wb = WorkbookFactory.create();

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-14T19:41:35.007

如果您要问的问题是如何找到 WorkbookFactory 类，那么这是一个很好的问题。WorkbookFactory 显然不在 poi.jar 中 - 它在 poi-ooxml jar 中。

将此依赖项添加到您的 maven 项目中，您应该能够导入 WorkbookFactory：

```
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi-ooxml</artifactId>
    <version>3.9</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T18:00:09.930

[WorkbookFactory.create()](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/WorkbookFactory.html)没有零参数方法。例如：

```
InputStream inp = new FileInputStream("workbook.xlsx");
Workbook wb = WorkbookFactory.create(inp); 
```

# php - foreach($vars as $a=>$var){} 是什么意思？

> ID：12356465
> 
> 赞同：-1
> 
> 时间：2012-09-10T17:15:20.557
> 
> 标签：php, foreach

我遇到了这段代码，`foreach($vars as $a=>$var){ // some process here}`我想知道使用时有什么区别`foreach($vars as $var){ // some process here}`？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:17:07.940

运算符`=>`表示键和值之间的关系。你可以想象关键指向`=>`价值。

**编辑：**

`foreach`可以通过两种方式使用：

> 1.迭代值：

每次循环时，变量都会设置为数组中的下一个值。

例如：

```
$fruitColours = array(
    "Banana" => "Yellow",
    "Apple"  => "Green",
    "Plum"   => "Purple",
);

foreach ($fruitColours as $colour)
{
    echo "$colour<br/>\n";
}

?> 
```

上面会显示：

```
Yellow
Green
Purple 
```

仅显示数组的值。

> 2.迭代键和值

每次循环，变量都被设置为下一个键值对。

例如：

```
$fruitColours = array(
    "Banana" => "Yellow",
    "Apple"  => "Green",
    "Plum"   => "Purple",
);

foreach ($fruitColours as $fruit => $colour)
{
    echo "$fruit is $colour<br/>\n";
}

?> 
```

上面会显示：

```
Banana is Yellow
Apple is Green
Plum is Purple 
```

检查[php foreach 文档](http://in.php.net/manual/en/control-structures.foreach.php)以获取更多参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T17:17:16.453

```
$vars = array(
  'key1'=>'something',
  'key2'=>'test',
);

foreach($vars as $key=>$value){
  echo "$key:$value" . PHP_EOL;
} 
```

将输出：

```
key1:something
key2:test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:21:38.907

`foreach($vars as $a=>$var){ // some process here}` 遍历一个数组（`$vars`在这种情况下）。在每次迭代中，`$a`都归属于实际数组项的键和`$var`相应的值。

`foreach($vars as $var){ // some process here}`和上面一样，但是用这个，只返回每个数组项的值。不返回键值。

查看php 手册中的[这篇文章以获取更多信息。](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T17:23:42.480

不同的是，`foreach($vars as $var){ // some process here}`你只得到价值，而`foreach($vars as $a=>$var){ // some process here}`你也得到它的钥匙。

```
 $data = array('NAME' => 'Tom', 'AGE' => 20);

foreach($data as $var){
    echo $var . "\n";
}
echo "\n";
foreach($data as $key => $var){
        echo $key .': '. $var . "\n";
} 
```

将输出

```
Tom
20

NAME: Tom
AGE: 20 
```

# apache - URL重写所有损坏

> ID：12356467
> 
> 赞同：1
> 
> 时间：2012-09-10T17:15:30.720
> 
> 标签：apache, mod-rewrite, url-rewriting, rewrite

我现在正处于危机之中，我覆盖了我的 .htaccess 文件，该文件有很多我在 6 个月前所做的 URL 重写。现在我必须全部重做，因为没有它，我的网站的一半都无法正常工作。

我有一个我需要改变的东西的清单，也许他们都使用相同的方法，也许其中一些没有，这里有一个快速列表......

```
Old: http://i.website.com/(Anything)
New: http://www.website.com/images/(Anything) 
```

然后在我需要做这个之后：

```
Old: http://www.website.com/images/(Anything)
New: http://www.website.com/images.php?id=(Anything) 
```

Errr，这是让我开始的两个主要内容......我真的需要这些尽快，我现在有超过 100k 图像离线，因为这些链接已损坏:(

谢谢

编辑：

我在我的框架的 htaccess 底部也有这个：

```
RewriteRule .* index.php/$0 [PT] 
```

我需要第二个重写规则（images.php 之一）来跳过这个规则而不使用它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:48:47.450

尝试这样的事情：

```
RewriteCond %{HTTP_HOST} ^i.website.com$
RewriteRule ^(.+)$ http://www.website.com/images/$1 [R]

RewriteRule %{HTTP_HOST} ^www.website.com$
RewriteRule ^images/(.+)$ /images.php?id=$1 [L] 
```

第一个条目检查请求的主机`i.website.com`并重定向`[R]`到新的 URL。接下来检查请求的主机是否是`www.website.com`，然后匹配`images/`路径中的任何内容并根据您的请求重写 URL，`[L]`告诉它不做进一步的处理。

遵循您提到的包罗万象的规则，将其他查询重定向到您的框架。

# vb.net - 删除 sourceCode 中 td 之间的 breakLine

> ID：12356468
> 
> 赞同：-2
> 
> 时间：2012-09-10T17:15:31.990
> 
> 标签：vb.net, visual-studio-2010

```
Public Function GenerateHtmlReport(ByVal ResultDataset As System.Data.DataSet) As String Implements IValidation.GenerateHtmlReport
        Dim _StrBuil As New StringBuilder()
        Dim clsHtmlBuilder As New HtmlBuilder()
        Try
            _StrBuil.AppendLine(Space(2) & clsHtmlBuilder.AddHr())
            _StrBuil.AppendLine(Space(3) & clsHtmlBuilder.TextBig(ResultDataset.DataSetName))
            _StrBuil.AppendLine(Space(5) & clsHtmlBuilder.AddLineBreak)

            For Each _Tbl As DataTable In ResultDataset.Tables
                If _Tbl Is Nothing OrElse _Tbl.Rows.Count = 0 Then Continue For
                _StrBuil.AppendLine(Space(8) & clsHtmlBuilder.StartTable())

                'set Table Header
                'set Table Name

                _StrBuil.AppendLine(Space(15) & clsHtmlBuilder.StartH4())
                _StrBuil.AppendLine(Space(20) & _Tbl.TableName)
                _StrBuil.AppendLine(Space(15) & clsHtmlBuilder.EndH4())
                _StrBuil.AppendLine(Space(25) & clsHtmlBuilder.StartTableRow())

                'set Column Name
                For Each _col As DataColumn In _Tbl.Columns
                    _StrBuil.AppendLine(Space(35) & clsHtmlBuilder.StartTableHeader())
                    _StrBuil.AppendLine(Space(45) & _col.ColumnName)
                    _StrBuil.AppendLine(Space(35) & clsHtmlBuilder.EndTableHeader())

                Next
                _StrBuil.AppendLine(Space(25) & clsHtmlBuilder.EndTableRow())

                'set Table Rows
                For Each _dr As DataRow In _Tbl.Rows
                    _StrBuil.AppendLine(Space(25) & clsHtmlBuilder.StartTableRow())
                    For Each _col As DataColumn In _Tbl.Columns
                        If (Space(45) & _col.ColumnName = "Result") Then
                            _StrBuil.AppendLine(Space(35) & clsHtmlBuilder.StartTableCell())
                        Else

                            _StrBuil.AppendLine(Space(35) & clsHtmlBuilder.StartTableCell())

                        End If
                        _StrBuil.AppendLine(Space(45) & _dr(_col.ColumnName).ToString())
                        _StrBuil.AppendLine(Space(35) & clsHtmlBuilder.EndTableCell())

                    Next

                    _StrBuil.AppendLine(Space(25) & clsHtmlBuilder.EndTableRow())
                Next

                _StrBuil.AppendLine(Space(8) & clsHtmlBuilder.EndTable())
            Next
            _StrBuil.AppendLine(Space(5) & clsHtmlBuilder.AddLineBreak)
            _StrBuil.AppendLine(Space(2) & clsHtmlBuilder.AddHr())
        Catch ex As Exception
            clsCommon.writeErrorLog("Error in Report Generation", "RuleSet2", "GenerateHtmlReport")
            Throw ex
        End Try
        Return _StrBuil.ToString()
    End Function
End Class 
```

源代码：

```
 <td nowrap = "nowrap">
         4F0B52DC0001
 </td>
 <td nowrap = "nowrap">
         C006411
 </td>
 <td nowrap = "nowrap">
         Christiansen
 </td>
 <td nowrap = "nowrap">
         Cathy
 </td>
 <td nowrap = "nowrap">
         19570406
 </td>
 <td nowrap = "nowrap">

 </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:46:15.127

你的意思是你想要以下？

```
<td nowrap = "nowrap">4F0B52DC0001</td>
<td nowrap = "nowrap">C006411</td>
<td nowrap = "nowrap">Christiansen</td>
<td nowrap = "nowrap">Cathy</td>
<td nowrap = "nowrap">19570406</td>
<td nowrap = "nowrap"></td> 
```

尝试这个：

```
For Each _col As DataColumn In _Tbl.Columns
    If (Space(45) & _col.ColumnName = "Result") Then
        _StrBuil.Append(Space(35) & clsHtmlBuilder.StartTableCell())
    Else
        _StrBuil.Append(Space(35) & clsHtmlBuilder.StartTableCell())
    End If
    _StrBuil.Append(_dr(_col.ColumnName).ToString())
    _StrBuil.AppendLine(clsHtmlBuilder.EndTableCell())
Next 
```

（使用 Append 而不是 AppendLine）

如果您尝试提出更清晰的问题，您可能会得到更相关的回答者。

* * *

**编辑：**
作为对您的评论的回应，您可以通过检查以确保“属性”值不是空白或空值来消除最后一个（空）表格单元格之间的间隙。导致您的问题的代码行是：

```
_StrBuil.AppendLine(Space(45) & _dr(_col.ColumnName).ToString()) 
```

这将打印一行文本（末尾带有换行符），无论是否`_dr(_col.ColumnName)`表示非空/非空白值。如果一个 if 块确保它仅在`_dr(_col.ColumnName)`不为空且不为空时执行，则包装此语句。您可以使用`.Trim()`从值中删除空格并`String.IsNullOrEmpty()`确保存在由字符串表示的非空白值。

* * *

**编辑：**
有关更多信息，请参阅以下链接：

*   [String.IsNullOrEmpty](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)
*   [字符串修剪](http://msdn.microsoft.com/en-us/library/t97s7bs3)

想想你想完成什么，然后把它写成一系列步骤（可能先写在纸上，然后写在代码中）。如果你不能这样做，那么你就不能编程（提示：几乎任何人都可以编程）。

# javascript - 从选择下拉菜单中获取数据

> ID：12356469
> 
> 赞同：0
> 
> 时间：2012-09-10T17:15:36.657
> 
> 标签：javascript, jquery

我正在使用[http://designwithpc.com/Plugins/ddSlick#demo](http://designwithpc.com/Plugins/ddSlick#demo)。一个使用图像、文本等自定义下拉菜单的插件。当我从下拉列表中选择一个选择选项时，我试图获取文本，但我的浏览器控制台日志显示未定义。我已经尝试将数据放入第 7 行的变量中，但它仍然给了我相同的结果。

```
$('#myDropdown').ddslick({
    data:ddData,
    width:300,
    selectText: "Select your preferred social network",
    imagePosition:"right",
    onSelected: function(selectedData){
        var selectedData = $('#myDropdown').data('ddslick');
        console.log(selectedData.text);
    }   
}); 
```

这是ddData的结构：

```
var ddData = [{
    text: "Facebook",
    value: 1,
    selected: false,
    description: "Description with Facebook",
    imageSrc: "http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
}, {
    text: "Twitter",
    value: 2,
    selected: false,
    description: "Description with Twitter",
    imageSrc: "http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
}, {
    text: "LinkedIn",
    value: 3,
    selected: true,
    description: "Description with LinkedIn",
    imageSrc: "http://dl.dropbox.com/u/40036711/Images/linkedin-icon-32.png"
}, {
    text: "Foursquare",
    value: 4,
    selected: false,
    description: "Description with Foursquare",
    imageSrc: "http://dl.dropbox.com/u/40036711/Images/foursquare-icon-32.png"
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:00:27.960

我通过 Json Object 获取数据。

早些时候它只返回 [object Object]

```
<div id="myDropdown"></div>
    <script type="text/javascript">
        var jsonurl = 'dropDown.html';
        $.ajax({
            type : 'GET',
            url : jsonurl,
            data : {},
            success : function(myData) {
                $('#myDropdown').ddslick({
                    data : myData,
                    width : 300,
                    selectText : "Select the bill process",
                    imagePosition : "right",
                    onSelected : function(selectedData) {
                        alert(selectedData);
                    }
                });
            },
            error : function() {
            }
        });
    </script> 
```

但根据我的萤火虫，它显示了我的 json 响应，如下所示

```
[
   {
      "value":1,
      "text":"Process_1",
      "selected":false,
      "imageSrc":"images//priyan.jpg",
      "description":"Process_1"
   },
   {
      "value":2,
      "text":"Process_2",
      "selected":false,
      "imageSrc":"images//priyan.jpg",
      "description":"Process_2"
   },
   {
      "value":3,
      "text":"Process_3",
      "selected":false,
      "imageSrc":"images//priyan.jpg",
      "description":"Process_3"
   }
   ] 
```

然后我就这样改了。。

```
onSelected : function(selectedData) {
                        alert(selectedData);
                    } 
```

至

```
onSelected : function(myData) {
                        alert(myData.selectedData.text);
                    } 
```

# c++ - 将文件读入 stl 向量时删除 \r\n

> ID：12356473
> 
> 赞同：0
> 
> 时间：2012-09-10T17:15:50.820
> 
> 标签：c++, stl

我正在使用以下 C++ stl 构造将文件读入`vector of characters`

```
std::ifstream testFile(inFileName, std::ios::binary);
std::vector<char> fileContents((std::istreambuf_iterator<char>(testFile)), std::istreambuf_iterator<char>()); 
```

但这也读`\r\n`入了向量。

有什么办法可以避免阅读`\r\n`或阅读后删除

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T18:05:08.887

假设您输入的文件是在您阅读它的同一平台上生成的。
然后，您只需在文本模式下打开文件，就可以将 LTS（在这种情况下，它看起来像 '\r\n'）转换为 '\n'：

```
std::ifstream testFile(inFileName); 
```

您可以使用以下`remove_copy`算法删除特定字符：

```
std::vector<char> fileContents;

// Copy all elements that are not '\n'
std::remove_copy(std::istreambuf_iterator<char>(testFile),   // src begin
                 std::istreambuf_iterator<char>(),           // src end
                 std::back_inserter(fileContents),           // dst begin
                '\n');                                       // element to remove 
```

如果您需要删除不止一种类型的字符，您需要创建一个仿函数并使用`remove_copy_if`算法：

```
struct DelNLorCR
{
    bool operator()(char x) const {return x=='\n' || x=='\r';}
};
std::remove_copy_if(std::istreambuf_iterator<char>(testFile),   // src begin
                    std::istreambuf_iterator<char>(),           // src end
                    std::back_inserter(fileContents),           // dst begin
                    DelNLorCR());                               // functor describing bad characters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:34:18.893

在创建流对象时传递标志`ios::binary`告诉流对象在写入或从流中读取时不要翻译换行符或任何其他获得特殊编码的字符。因此，当您以二进制模式编写具有换行符的文件时，您将获得系统用于换行符的任何内容。在 Windows 上，这是一个两字节序列，`0x0A`, `0x0D`. 如果您不想看到这两个字节，请以文本模式打开流，即不要使用`ios::binary`. 如果你这样做，你会得到单字符换行符。

请注意，文本文件中的“\n”字符被写为对应于字符“\r”和“\n”的两个字节只是巧合。这些字符转义和写入的字节之间没有内在联系，这就是为什么我小心引用`0x0A`and的原因`0x0D`。

# php - PHP + MySQL：我可以或应该在数据库事务中包含多少编程？

> ID：12356480
> 
> 赞同：1
> 
> 时间：2012-09-10T17:16:08.220
> 
> 标签：php, mysql, oop, transactions

我可以/应该在单个 MySQL 事务中包含多少 PHP 代码？在单个事务中调用其他类和方法、操作或创建实例等事务的最佳实践是什么？

我在这里所说的“包含”的意思是在`beginTransaction();`和之间输入`commit();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:33:39.620

我习惯于对一个元素及其所有依赖项使用一项事务。

例如，我有一个论坛，用户可以在其中更改他们的昵称。但他们也可以删除他们的帐户，我不想看到帖子被删除。所以我需要在每个帖子的某个地方保存我的用户名`VARCHAR`。

如果用户更改了他的昵称，我将开始一个事务，在任何可能的地方更改他的昵称，如果没有错误，所以我提交。此时我不查看请求的数量，因为如果一个请求失败，我应该能够回滚有关此更改的所有内容。

但是如果管理员在管理面板中更改 2 个昵称并验证一次，我将打开 2 个事务（每个用户一个）以避免单个事务出现问题。

# javascript - 在 javascript 中采用灵活的参数？

> ID：12356491
> 
> 赞同：0
> 
> 时间：2012-09-10T17:16:56.740
> 
> 标签：javascript, jquery, argument-passing

我正在尝试在 javascript 中采用灵活的参数来使用 eyecon colorpicker ( www.eyecon.ro/colorpicker/ [)](http://www.eyecon.ro/colorpicker/)操作颜色

但是，当我尝试更改页面的颜色时，它会卡在 arguments.length 循环中吗？

html是：

```
<div class="colorSelector" id="colorSelector3"><div style="background-color: #0000ff"></div></div> 
```

jquery/javascript 是：

```
$('#colorSelector3').click(function(){
colorPickDynamic('#colorSelector3','h1','color');
});

function colorPickDynamic(cp){

var i;
var j;

for (x=0, i = 1, j = 2; j < arguments.length; i+2, j+2, x++) {

var tag = [];
var colorProperty = [];
tag[x]=arguments[i];
colorProperty[x]=arguments[j];
}

$(cp).ColorPicker({
    color: '#0000ff',
    onShow: function (colpkr) {
        $(colpkr).fadeIn(500);
        return false;
    },
    onHide: function (colpkr) {
        $(colpkr).fadeOut(500);
        return false;
    },
    onChange: function (hsb, hex, rgb) {

                            $(tag[0]).css(colorProperty[0], '#' + hex);

        $(cp + ' div').css('backgroundColor', '#' + hex);
    }
});
} 
```

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T17:18:45.223

你有一个无限循环，你永远不会递增`j`。

`j+2`应该是`j+=2`，`i+2`应该是`i+=2`

# c++ - 了解 C++ 性能的资源？

> ID：12356495
> 
> 赞同：24
> 
> 时间：2012-09-10T17:17:08.940
> 
> 标签：c++, performance

我正在寻找可以帮助我深入了解 C++ 性能的资源（最好是一本书）。这里有一点背景：

我编写具有非常高的吞吐量要求和/或低延迟要求的服务器软件。我们用 C++ 编写；目前还没有真正的争论。我的大多数同事似乎对 C++ 性能有了更好的理解。他们有更好的心智模型，因此他们可以判断某段代码何时会在规模上表现不佳。我缺乏这种理解，所以我正在寻求改善我的心理模型。

我特别感兴趣：

*   了解缓存效果，以及对象布局导致的缓存局部性如何影响我的代码性能。这是我团队的其他成员似乎提出的第一个问题。
*   了解内存分配如何影响性能。我应该使用 TCMalloc（或其他 malloc）吗？我应该怎么知道？我应该如何调整各种分配和释放参数？
*   我怎么知道对象复制的开销何时重要（例如，应该切换到指针）？
*   只要我知道何时使用它们，我通常也对“优化”感兴趣。

我不太感兴趣的事情：

*   “高性能计算”这个术语似乎表示更多面向数学/模拟的应用程序。
*   讨论 C++ 相对于其他语言的性能，因为我坚持使用 C++。

作为起点，有人知道这本书[Efficient C++](https://rads.stackoverflow.com/amzn/click/com/0201379503)是否符合要求？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-10T18:50:38.367

让我把我的建议分成几个部分。

**C++ 优化**

作为起点，我强烈推荐 Agner Fog 的[C++ 优化软件](http://agner.org/optimize/optimizing_cpp.pdf)。本手册很好地概述了常见的 C++ 优化主题。

**总体了解硬件**

要对 C++ 性能有一个良好的心智模型，您还需要了解底层硬件。考虑这个陈述：

```
a[7] = 5; 
```

在 C++ 语言方面，从性能的角度来看，这行代码很无聊：它只是一次内存写入。但是，在真实硬件上，内存写入的性能可能会相差几个数量级。要了解该级别发生了什么，您需要了解缓存、处理器管道、TLB、分支预测等概念。

作为对处理器缓存的快速介绍，我推荐我的文章[处理器缓存效果库](http://igoro.com/archive/gallery-of-processor-cache-effects/)。关于缓存和计算机内存的更深入和更长（>100 页）的讨论是[每个程序员应该了解的内存](ftp://ftp.linux.org.ua/pub/docs/developer/general/cpumemory.pdf)。

为了全面了解现代计算机硬件，计算机体系结构：定量方法是通常推荐的书。我自己没有读过这本书，而是通过阅读博客和实验来学习的。然而，其他人显然发现这本书非常有用。

**了解特定处理器**

在您提高优化技能的过程中，您会发现识别不同处理器的细节很有用。作为众多示例之一，不同的 Intel 和 AMD 处理器对使用未对齐的 SSE 指令（例如 _mm_storeu_ps C++ 内在函数）具有非常不同的惩罚。

要了解不同处理器的细节，我推荐[Intel、AMD 和 VIA CPU 的微架构：汇编程序员和编译器制造商的优化指南](http://agner.org/optimize/microarchitecture.pdf)。事实上，我只是继续推荐 Agner Fog 的所有[优化手册](http://agner.org/optimize/)。此外，硬件供应商为其特定硬件提供文档。

**学习使用工具**

在优化代码时，拥有良好的 C++ 心智模型和硬件性能非常有用。但是，学习使用正确的工具至少同样有用。可以说，优化的最佳建议是“先测量！”。即使是一个简单的代码块，仅仅通过思考也很难理解它的性能。通过运行代码并以各种方式对其进行测量，您将获得大量信息。

这些是一些常见的有用测量：

*   计时：只需运行代码并测量时间
*   采样分析器
*   仪器分析器
*   处理器计数器

我不会对特定工具提出建议，因为可以说我超出了您最初问题的范围。而且，工具本身就是一个大话题：工具因不同的硬件平台、软件平台和成本而异（有些是免费的，有些是昂贵的）。

但是，您当然需要知道，要优化 C++ 代码，您需要了解和使用适当的工具。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-10T17:24:38.217

Valgrind 应该是你的第一个工具。

Valgrind 有很多工具，但 cachegrind 是查看您的算法是否具有良好数据局部性的好方法。这将识别内存瓶颈。Callgrind 是另一个 valgrind 模块，可帮助您识别处理瓶颈。

参考：

缓存研磨：http : [//valgrind.org/docs/manual/cg-manual.html](http://valgrind.org/docs/manual/cg-manual.html)

调用研磨：http : [//valgrind.org/docs/manual/cl-manual.html](http://valgrind.org/docs/manual/cl-manual.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T19:26:03.017

以前的回答给出了最重要的想法。

只有一个警告：做一些分析（valgrind），这就是你快速获胜的地方。在那之后，尝试进行缓存优化，查看 SSE ......将需要更多的努力，因为（至少在开始时）几乎没有改进。

此外，C++ 是一门庞大的语言，编译器确实很神奇。模板、内联等允许编译器进行在 C 等其他语言中无法实现的出色优化。因此，在考虑使用低级数据结构时要非常小心。它可能会导致性能损失（以及内存管理中的更多错误和更多麻烦）。

使用 STL 和 BOOST 可能有助于避免一些错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T21:11:52.100

> 要了解该级别发生了什么，您需要了解缓存、处理器管道、TLB、分支预测等概念。

我想以非常随意的方式进一步讨论这些问题。

1.  缓存 - 基本上，如果您可以尝试将您的工作集放入缓存中，您的应用程序可以看到**巨大的**速度提升。
2.  分支 - 分支需要很长时间，因为它们在内存读取时需要一个块。例如，即使您最终进行了不必要的写入，`x=1`也可能会更快。`if (needWrite) x=1;`
3.  分支预测 - 由于前面的原因，CPU 尝试使用模式匹配算法尝试“猜测”分支的结果。让这个琐碎的猜测可以让你提高速度。
4.  至于处理器流水线、指令级并行、超标量、寄存器重命名等——我认为，这些大多必须由编译器进行优化。

# asp.net-mvc - 如何在浏览器的外部文件夹中显示 PDF 文档

> ID：12356499
> 
> 赞同：0
> 
> 时间：2012-09-10T17:17:21.957
> 
> 标签：asp.net-mvc, asp.net-mvc-3, pdf, razor

目前我正在使用文档管理系统项目技术是 ASP.Net MVC 3 。我想显示位于我硬盘驱动器文件夹中的 pdf 文档（C:,D: E: 等）。我试图`<embed>`标记。但它没有用。它适用于我项目中的文件。我也不需要下载该pdf并阅读。我需要在我认为的某个地方显示它。

我看到了这个代码段。但我不知道如何使用这个..

```
public FileResult GetFile(string fileName)
{
    Response.AppendHeader("Content-Disposition", "inline; filename=" + fileName + ";");
    string path = AppDomain.CurrentDomain.BaseDirectory + "App_Data/";            
    return File(path + fileName, System.Net.Mime.MediaTypeNames.Application.Pdf, fileName);
} 
```

有人可以帮我解决这个问题。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:21:40.790

您可能[`File`](http://msdn.microsoft.com/en-us/library/dd492593%28v=vs.98%29)是 Controller 类的方法。这会将 PDF 返回到浏览器。

```
public ActionResult GetFile(string fileName)
{
  string fullPathToFile=SomeMethodToGetFullPathFromFileName(fileName);
  return File(fullPathToFile,"application/pdf","someFriendlyName.pdf")
} 
```

假设`SomeMethodToGetFullPathFromFileName`是一种返回 PDF 文件完整路径的方法

您可以使用`Server.MapPath`方法来获取文件的完整（物理）路径。

如果您想在浏览器中查看它，您可以像访问它一样访问它

```
yoursitename/someControllername/getfile?fileName=somepdffilenamehere 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:26:19.747

您显示的代码表示从`App_Code`文件夹中提供文件的控制器操作。从硬盘驱动器上的任意位置提供文件将是一个巨大的安全漏洞。所以我建议你坚持这种方法。但是这段代码仍然存在缺陷。恶意用户仍然可以使用特制的 url 在您的硬盘驱动器上显示任意文件。这可以通过以下操作来解决：

```
public ActionResult GetFile(string file)
{
    var appData = Server.MapPath("~/App_Data");
    var path = Path.Combine(appData, file);
    path = Path.GetFullPath(path);
    if (!path.StartsWith(appData))
    {
        // Ensure that we are serving file only inside the App_Data folder
        // and block requests outside like "../web.config"
        throw new HttpException(403, "Forbidden");
    }

    if (!System.IO.File.Exists(path))
    {
        return HttpNotFound();
    }

    return File(path, MediaTypeNames.Application.Pdf);
} 
```

现在您可以使用`embed`标签链接到此控制器操作：

```
<object data="@Url.Action("GetFile", "SomeController", new { file = "test.pdf" })" type="application/pdf" width="300" height="200">
  alt : @Html.ActionLink("test.pdf", "SomeController", "Home", new { file = "test.pdf" })
</object> 
```

或者，`iframe`如果您愿意：

```
<iframe src="@Url.Action("GetFile", "SomeController", new { file = "foo.pdf" })" style="width:718px; height:700px;" frameborder="0"></iframe> 
```