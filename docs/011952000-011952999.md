# StackOverflow 问答 11952000-11952999

# facebook - Facebook 赞按钮在我的主页上不起作用

> ID：11952000
> 
> 赞同：0
> 
> 时间：2012-08-14T12:10:06.927
> 
> 标签：facebook, button, facebook-like

这是喜欢：http: [//portali.com.mk/lajmi/2778](http://portali.com.mk/lajmi/2778)，尝试单击您将看到的点赞按钮结束。

这是html标签内的代码：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

这是 XFBML 代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=212833985438245";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这是我喜欢的布图恩：

```
 <fb:like href="<?php echo CurrentPageURL() ?>" send="true" width="450" show_faces="true"></fb:like> 
```

我做错了什么，这个问题让我死了 1 周？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:12:51.473

facebook对点击Like的回应：

> 顶页面时出错。如果您是页面所有者，请尝试通过 Facebook 开发网站 (https://developers.facebook.com/tools/lint/) 上的 linter 运行您的页面并修复任何错误

[调试器](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fportali.com.mk%2Flajmi%2F)显示页面有任何元标记。您必须为每个可以被喜欢的页面生成此标签。使用[生成器生成](http://developers.facebook.com/docs/reference/plugins/like/#oggenerator)元标记。[将生成的标签放在页面的 HEAD 部分并使用Debugger](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fportali.com.mk%2Flajmi%2F)检查页面。如果调试器没有显示任何错误，则 Like 按钮必须起作用。

# ruby-on-rails-3 - 当我运行“rake db:migrate”时，自定义 rake 任务正在运行。我该如何防止这种情况？

> ID：11952003
> 
> 赞同：0
> 
> 时间：2012-08-14T12:10:15.013
> 
> 标签：ruby-on-rails-3, rake, ubuntu-12.04, rake-task

我在 ubuntu 12.04 上运行 rails。当我运行下面的代码时，我的一项自定义任务出现错误。问题是我不希望我的自定义任务首先运行。只是数据库迁移。

```
rake db:migrate --trace

rake aborted!
cannot load such file -- CSV
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/www/myapp/lib/tasks/import_inventory.rake:1:in `<top (required)>'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `block in load'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/engine.rb:425:in `block in load_tasks'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/engine.rb:425:in `each'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/engine.rb:425:in `load_tasks'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:145:in `load_tasks'
/home/js/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/www/myapp/Rakefile:7:in `<top (required)>'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/js/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/js/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/js/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

正在运行的 Rake 任务：

```
require 'CSV'

namespace :db do
  desc 'Prepare transition database.'
  task :import_inventory => :environment do
    desc 'Import Assets Table'

    file_path = "/Users/js/data/TSI/inventory.csv"

    CSV.foreach(file_path, :headers => true) do |row|
      asset = Asset.new
      asset.asid_tag = row[0]
      asset.description = row[1]
      asset.qty = row[2]
      asset.manufactuer = row[3]
      asset.model = row[4]
      asset.save
    end
   end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:17:45.753

当您运行 Rake 时，所有任务文件 (lib/tasks/*.rb) 都会在 rake 确定哪些任务可用之前被加载和解析。这意味着，无论您是否调用导入任务，`import_inventory.rake`ruby 都会在您请求的实际任务 (db:migrate) 运行之前解析文件。结果`require 'CSV'`被执行，无论您真正尝试运行什么任务。

至于修复，我猜它应该是`require 'csv'`（小写）而不是`require 'CSV'`（大写）？

# python - django电子邮件身份验证

> ID：11952005
> 
> 赞同：0
> 
> 时间：2012-08-14T12:10:23.507
> 
> 标签：python, django, django-forms, django-authentication

# 用户表单

```
class UserForm(forms.ModelForm):
    confirm_password = forms.CharField(label="Confirm Password",widget=forms.PasswordInput(attrs = {'placeholder': 'Confirm Password','class':'required'}))    
    phone =    forms.CharField(max_length = 15,widget = forms.TextInput(attrs = {'placeholder':'Enter mobile no. ','class':'required number'}))
    profession = forms.CharField(max_length= 50,widget = forms.Select(choices = PROFESSION_CHOICES,attrs = {'class':'required'}))

    email = forms.EmailField(label='Email address',max_length = 75,widget = forms.TextInput(attrs={'placeholder':'Enter a valid email.','class':'required email'}))
    sex = forms.CharField(max_length = 20,label="I am :",widget=forms.Select(choices=SEX_CHOICES,attrs = {'class':'required'}))
    password = forms.CharField(label="Password",widget=forms.PasswordInput(attrs = {'placeholder': 'Password','class':'required'})) 
    first_name = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Please enter your real name.','class':'required alphabets'}))
    last_name = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Enter last name.','class':'required alphabets'}))
    def clean_first_name(self):
        first_name = self.cleaned_data['first_name']
        if first_name == '':
            raise forms.ValidationError("This field is required.")
    def clean_phone(self):
        phone = self.cleaned_data['phone']
        if phone == '':
            raise forms.ValidationError("This field is required.")

    def clean_last_name(self):
        last_name = self.cleaned_data['last_name']
        if last_name == '':
            raise forms.ValidationError("This field is required.")
    def clean_email(self):
        email = self.cleaned_data.get("email")
        try:
            user  = User.objects.get(email = email)
            raise forms.ValidationError("Email already in use.")
        except User.DoesNotExist:
            return email
    def clean_profession(self):
        profession = self.cleaned_data['profession']
        if profession == "":
            raise forms.ValidationError("Select a valid option.")

    def clean_sex(self):
        sex = self.cleaned_data['sex']
        if sex == "":
            raise forms.ValidationError("Select a valid option.")

    def save(self,*args,**kw):
        user = super(UserForm,self).save(*args,**kw)
        user.set_password(self.cleaned_data.get("password"))
        user.first_name = self.cleaned_data.get("first_name")
        user.last_name = self.cleaned_data.get("last_name")
        user.email = self.cleaned_data.get("email")
        user.save()
        user.get_profile().phone = self.cleaned_data.get('phone')
        user.get_profile().location = self.cleaned_data.get('location')
        user.get_profile().profession = self.cleaned_data.get('profession')
        user.get_profile().sex = self.cleaned_data.get('sex')
        return user

    class Meta:
        model = User
        fields = ('username','email','password','confirm_password','first_name','last_name','sex','phone','profession')
        widgets = {
            'password': forms.PasswordInput(),
        } 
```

# 用户注册视图

```
def register_user(request):
    if request.POST:
        data = request.POST.copy()

        data["username"] = 'user'
        rform = UserForm(data)
        #form = UserProfileForm()
        if rform.is_valid():
            try:
                user = rform.save()
                user.username = "user"+str(user.id)
                user.save()
                user = authenticate(username = user.username,password=user.password)
                #register user
                login(request,user)
                return redirect(index)
            except:
                print "Unexpected error"
                raise
        else:
        # submit the same form again.
            form = LoginForm();
            sform = LoginForm()
            return render_to_response('register.html',{'rform':rform,'form':form,'sform':sform},context_instance = RequestContext(request))
    else:
        rform  = UserForm()
        #form = UserProfileForm()
        form = LoginForm()
        sform = LoginForm()
        return render_to_response('register.html',{'rform':rform,'form':form,'sform':sform},context_instance = RequestContext(request)) 
```

# 错误

```
IntegrityError at /accounts/register/
auth_user.first_name may not be NULL 
```

# 怀疑

当我使用普通用户身份验证时，一切正常，但是当我将其与电子邮件身份验证一起使用时，它给了我上述错误，我该如何克服这个错误，请帮助，以及我如何制作电子邮件字段独一无二，如我如何向该字段添加索引，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:01:22.790

您的自定义字段清理方法 ( `clean_*`) 不会返回清理后的值。来自表单验证文档：[https ://docs.djangoproject.com/en/1.4/ref/forms/validation/](https://docs.djangoproject.com/en/1.4/ref/forms/validation/)

> 就像上面的通用字段 clean() 方法一样，这个方法应该返回清理后的数据，不管它是否改变了任何东西。

`clean_first_name` does not have a return which is the same as returning `None` and the reason why Django is trying to insert a `NULL` for this field.

# jqplot - 动态地将不同的 y 轴应用于 jqplot 中的数据

> ID：11952010
> 
> 赞同：0
> 
> 时间：2012-08-14T12:10:49.840
> 
> 标签：jqplot

我正在尝试创建一个在其上绘制多条线的 jqplot，其中数据系列的数量取决于用户输入。

现在我想对某些类型的结果使用两个不同的 y 轴，但是 jqplot 文档只显示了如何以静态方式将不同的 y 轴分配给系列。

有动态解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:10:49.787

当您需要不同的 y 轴时，您将需要更改选项字符串，但您仍然需要重新绘制图表。

# php - PHP中的array_multisort问题

> ID：11952012
> 
> 赞同：1
> 
> 时间：2012-08-14T12:10:56.687
> 
> 标签：php, arrays, sorting

我正在使用这条线根据名称字段按升序对我的二维数组进行排序。

```
 array_multisort($contact[0]['name'],SORT_DESC,$contact[0]['image'],$contact[0]['url'],$contact[0]['catimg'],$contact[0]['count']); 
```

但有时它没有正确排序。

有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:20:53.697

如果要用于`array_multisort`工作，则必须创建数据列，大致如下所示：

```
$names = array();
$images = array();
$urls = array();
// ... add more as needed
// make rows of data for sorting
foreach ($contact as $contact_row) {
    $names[]  = $contact_row['name'];
    $images[] = $contact_row['image'];
    $urls[]   = $contact_row['url'];
    // ... add more as needed
}
array_multisort($names, SORT_DESC, $images, $urls, $contact); // the last one is the array you want to sort

var_export($contact); // at this point this should be ordered 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:21:13.707

似乎，传递给函数的参数不是数组。

尝试使用 usort：

```
usort($contact, function($a, $b){
    return strcmp($a['name'], $b['name']);
}); 
```

# java - 更新 JTable

> ID：11952014
> 
> 赞同：2
> 
> 时间：2012-08-14T12:10:59.540
> 
> 标签：java, swing, jtable, defaulttablemodel

我有一点困惑。我正在尝试更新 JTable，但没有更新。这是我现在的代码：

```
private void addTable(){

        table = new JTable();// the table for 'Benchmark' tab
        table.setShowVerticalLines(false);
        table.setBorder(null);  

        data = new Object[][] {
                {"Key", ""},//result[0]
                {"Precision", ""},//result[2]+" %"
                {"Cipher", ""},//result[4]
                {"Language", ""},
                {"Performance", ""},//result[3]
        };

        String [] header = new String[] {"Subject of Interest", "Output"};
        model = new DefaultTableModel(data, header);        

        table.setModel(model);

        table.getColumnModel().getColumn(0).setPreferredWidth(136);
        table.getColumnModel().getColumn(1).setPreferredWidth(550);
        GroupLayout gl_panelBenchmark = new GroupLayout(panelBenchmark);
        gl_panelBenchmark.setHorizontalGroup(
                gl_panelBenchmark.createParallelGroup(Alignment.TRAILING)
                .addComponent(textInfoCrypto, GroupLayout.DEFAULT_SIZE, 759, Short.MAX_VALUE)
                .addGroup(gl_panelBenchmark.createSequentialGroup()
                        .addGap(10)
                        .addComponent(textPane, GroupLayout.DEFAULT_SIZE, 739, Short.MAX_VALUE)
                        .addGap(10))
                        .addGroup(Alignment.LEADING, gl_panelBenchmark.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(table, GroupLayout.DEFAULT_SIZE, 739, Short.MAX_VALUE)
                                .addContainerGap())
                );
        gl_panelBenchmark.setVerticalGroup(
                gl_panelBenchmark.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panelBenchmark.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(textInfoCrypto)
                        .addPreferredGap(ComponentPlacement.UNRELATED)
                        .addComponent(textPane, GroupLayout.PREFERRED_SIZE, 41, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.UNRELATED)
                        .addComponent(table, GroupLayout.PREFERRED_SIZE, 79, Short.MAX_VALUE)
                        .addContainerGap())
                );
        panelBenchmark.setLayout(gl_panelBenchmark);

    } 
```

这就是我在这个阶段尝试更新单行的方式。下面的代码是从另一个方法调用的：

```
data[0][0]= result[0];
model.fireTableCellUpdated(0, 0); 
```

在这个阶段，我只能看到包含行名的表格框架，但看不到数据。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:14:08.283

`data`只是表模型中不包含的本地数据。你需要使用：

[tableModel.setValue(结果[0], 0, 0);](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setValueAt%28java.lang.Object,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:18:08.507

1.  所有`fireXxxXxx`事件均已`DefaultTableModel`实施且正确

2.  JTable 在此从并基于`DefaultTableModel`更新 ModelToView 或 ViewToModel 没有任何问题，没有限制，

3.  必须使用[SSCCE编辑您的任务](http://sscce.org/)

4.  在此之前阅读[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

5.  尤其是[JTable 和 TableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

# python - 为什么 python 在在线教育网站中如此受欢迎？

> ID：11952017
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:11:04.263
> 
> 标签：python

这些天来，我一直在使用 Udacity、Coursera、Khan Academy 等在线网站在线学习很多编程知识。我看到他们中的大多数通过 python 作为示例语言提供了对编程、Web 或其他一些东西的理解。我还了解了谷歌应用引擎，发现 python 是除 java 之外的一种受支持的语言。实际上令人惊讶的是，其他流行的语言，或者我应该说更熟悉的语言，如 java、php 等，并没有在这个类别中找到自己的位置。我在编码和理解 php 和 java 时问这个问题。但是要深入了解这些在线课程，我还需要对 python 有所了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:17:10.763

Python如此受欢迎的原因有很多：

*   很容易学
*   它有一个非常干净的语法
*   对科学计算有好处
*   它可以做很多事情，从桌面应用程序到 Web 编程
*   默认情况下，它在大多数 *nix 系统上都可用
*   它适用于许多操作系统（Linux、Mac OS、Windows...）
*   它可以与 C 一起使用。

这个列表可以继续下去......

# iphone - 功能不可用时隐藏徽标，uiview

> ID：11952019
> 
> 赞同：0
> 
> 时间：2012-08-14T12:11:14.067
> 
> 标签：iphone, objective-c, cocoa-touch, uiview

我有一个 uitableviewcell，它显示一个产品和 5 个或更少的徽标，具体取决于该产品是否可用某些功能。

例如，如果产品具有特征 a、b、c、d、e（在 abcde 上），则应显示：abcde

例如，如果产品具有特征 b、c 和 e（在 abcde 上），则应显示：bce

通过对不显示的徽标执行 removefromsuperview 并执行 setFrame:CGRectZero，我有：“empty space” bc “empty space” e （我不知道如何在此编辑器上创建空白空间）

我找不到获得我想要的东西的方法。如果该功能不可用，我可以使用灰色图标，但在需要时只想使用 3 个徽标

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:22:34.087

加入. `ScrollView`_ 如果是，`UITableviewcell`填`logo`（`imageView.image`）`horizontally``scrollView``logo``present`

arrayoflogo 包含您要显示的徽标

```
 for(int i = 0; i< [arrayoflogo count];i++)
 {
        CGRect frame;
        frame.size = CGSizeMake(30, 30);
        frame.origin.x = (i * 30) + (i * 5) + 5;
        frame.origin.y = 5;

        UIImageView *aimgView = [[UIImageView alloc]initWithFrame:frame];
        [aimgView setTag:j];
        aimgView.contentMode = UIViewContentModeScaleToFill;
        //[aimgView setBackgroundColor:[UIColor redColor]];
        aimgView.image = [UIImage imageNamed:@"youImageName"]];
        aimgView.userInteractionEnabled = YES;
        [cell.scView addSubview:aimgView];
        [aimgView release]; 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:32:32.430

只需将 5 个 UIImageViews 添加到按钮并从左到右填充它们并将不需要的 ImageViews-Images 设置为 nil。

就像是：

```
myCell.ImageView1.Image = imageB;
myCell.ImageView2.Image = imageC;
myCell.ImageView3.Image = imageE;
myCell.ImageView4.Image = nil;
myCell.ImageView5.Image = nil; 
```

您也可以使用数组。

```
NSMutableArray* arr = [[NSMutableArray allo] init];

if (logo1IsNeeded == true) [arr addObject:imageA];
if (logo2IsNeeded == true) [arr addObject:imageB];
if (logo3IsNeeded == true) [arr addObject:imageC];
if (logo4IsNeeded == true) [arr addObject:imageD];
if (logo5IsNeeded == true) [arr addObject:imageE];

for (int i = arr.count; i < 5; i++)
{
   [arr addObject: nil]; //Fill the remaining entries with nil
}

myCell.ImageView1.Image = [arr objectAddIndex:0];
myCell.ImageView2.Image = [arr objectAddIndex:1];
myCell.ImageView3.Image = [arr objectAddIndex:2];
myCell.ImageView4.Image = [arr objectAddIndex:3];
myCell.ImageView5.Image = [arr objectAddIndex:4]; 
```

如果代码中有任何错别字，请原谅。我是从心里做的。

# javascript - 如何从文档 url 获取哈希

> ID：11952020
> 
> 赞同：0
> 
> 时间：2012-08-14T12:11:14.737
> 
> 标签：javascript, jquery, html, css

如果我使用：

```
jQuery(document).ready(function() {

      console.log($(this));

}); 
```

然后在控制台中我有对象：

```
[Document mypage.html#weather] 
```

我怎样才能得到这个最后一个 ID？在此示例中，这是**#weather**。例如，我想在选择器中使用 alert **#weather**`$(data_from_console + '.add').val();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:18:41.263

您想获取最后一个具有 ID 属性的元素吗？

如果是这样的话：

```
$(document).ready(function () {
    console.log($('body *[id]').eq(-1));
}); 
```

**编辑** 仔细看，你在寻找哈希标签吗？IE。如果你的 URL 是`mypage.html#weather`你想要的 #weather ？

在这种情况下尝试：

```
$(document).ready(function () {
    console.log(document.location.hash);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:12:57.107

您可以使用[last()](http://api.jquery.com/last/)方法。试试这个：

```
$(document).ready(function() {
    $('body *').each(function() { //selects all elements in body which got id
      var lastEle = $(this).last();   //selects last one of them
      console.log(lastEle.attr('id'));//returns it's id to console log
    });
}); 
```

# mysql - 从数据库中选择，其中行中的 2 个项目不是特定值

> ID：11952021
> 
> 赞同：0
> 
> 时间：2012-08-14T12:11:16.953
> 
> 标签：mysql

我有一个包含以下列的表：ID、条件 1、条件 2。

我想选择条件 1 AND 条件 2 不是特定单词的所有行。假设这个词是“不”。

因此，我想选择条件 1 和条件 2 不是“否”的所有行以及存在“否”但仅在其中一个条件下的所有行。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:14:56.033

```
select * from yourtable 
where condition1 !='no' or condition2 !='no' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:19:47.813

获取两个条件都不是“否”的行

```
SELECT ID, Condition1, Condition2
FROM Conditions
WHERE Condition1 != 'no'
  AND Condition2 != 'no'; 
```

获取其中一个条件或另一个（但不是两者）不是“否”的行

```
SELECT ID, Condition1, Condition2
FROM Conditions
WHERE Condition1 != 'no'
  XOR Condition2 != 'no'; 
```

同时做两组：

```
SELECT ID, Condition1, Condition2
FROM Conditions
WHERE Condition1 != 'no' OR Condition2 != 'no'; 
```

如果该行在 Condition1 或 2 中没有“no”，则查询的 ETA 扩展返回 id=1 的行：

```
SELECT ID, Condition1, Condition2
FROM Conditions
WHERE Conditions.ID=1
  AND (Condition1 != 'no' AND Condition2 != 'no'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:14:44.033

尝试这个 ：

```
SELECT * FROM Table WHERE Condition1 != 'no' XOR Condition2 != 'no' 
```

# algorithm - 交换哈希图的键和值

> ID：11952022
> 
> 赞同：0
> 
> 时间：2012-08-14T12:11:18.237
> 
> 标签：algorithm

你能告诉我如何交换 Hashmap 的键值。即说我有一个包含以下键和值的哈希图：

```
(1,11),(2,10),(3,10),(4,20) 
```

现在我想将密钥交换为值，将值交换为密钥。输出应该是：

```
(11,1),(10,2),(20,4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:27:06.927

如果您不关心开销的空间，您可以执行以下操作：

```
Hash newHash

foreach (key, value) in oldHash:
    if !newHash.hasKey(value):
        newHash.add(value, key)

oldHash = newHash 
```

**注意：**这假设您的示例中的行为是在输入中多次出现值时使用“第一个”键作为值。这对我来说似乎不是特别理智，但你去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:17:15.067

你可以按照这个想法来做到这一点：

```
1\. Create a Stack S.

2\. Push all the values of your hash to the stack

3\. Clear your hash (the hash should be empty)

4\. While the stack is not empty

5\. E <- S.Pop()

6\. Hash(E.Value) <- E.Key

7\. End While 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T17:07:22.047

```
HashMap<String, String> hm=new  HashMap<String, String>();
hm.put("1","abc");
hm.put("2", "bbc");
hm.put("3", "kbc");
System.out.println(hm);

Hashtable<String, String> h=new Hashtable<String, String>();
Set<String> keySet=hm.keySet();
Iterator<String>itr=keySet.iterator();

while(itr.hasNext())
{
    String key=(String)itr.next();
    String value=(String)hm.get(key);
    if(key!=null&&value!=null)
    {
        h.put(value,key);
    }
}

System.out.println(h); 
```

}

# jasper-reports - Jasper中表名的动态参数

> ID：11952023
> 
> 赞同：2
> 
> 时间：2012-08-14T12:11:18.907
> 
> 标签：jasper-reports

我正在做类似的事情

```
select * from $P{TABLENAME_VAR} 
```

在 JR 报告中，但我收到无效的表名异常，尽管参数包含正确的表名

这里的场景是我想根据用户提供的输入动态填充表的名称，所以我正在做的是

我创建了一个参数。现在，根据用户选择的输入，为该变量分配了一个特定的表名，但是当我尝试将此参数分配为报表中的表名时，我遇到了`Invalid table name`异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:43:24.930

我找到了这个答案

```
select * from $P!{TABLENAME_VAR} 
```

代替

```
select * from $P{TABLENAME_VAR} 
```

# python - PyDev 调试

> ID：11952027
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:11:30.107
> 
> 标签：python, eclipse, pydev

我的解释器是cygwin自带的python 2.6解释器。

我有一个包含链接文件夹的 pydev 项目。在该文件夹中，由于外部限制，我有两个子文件夹，一个包含我开发的一堆脚本，另一个用作我所有运行配置的运行目录。

当我运行项目（而不是调试）时，一切正常。

但是，当我选择调试项目时，找不到我的自定义模块，并且导入失败。

我尝试将我的脚本文件夹添加到 PYTHONPATH，但这没有帮助，当我打印 sys.path 它包含奇怪的东西，所有的形式：

```
<path to run directory>/<path to entry in PYTHONPATH> 
```

我无法从中做出正面或反面。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:08:31.437

不幸的是，这是一个已知问题。PyDev 不支持 Cygwin 进行调试。主要原因是 Python 报告的路径与您在 windows 中配置的路径不匹配，因此，每个路径都需要一个转换步骤（即使是其他一些区域，例如代码完成或代码分析也可能有问题） .

您可能可以在 eclipse/plugins/org.python.pydev_x.xx/pysrc/pydevd_file_utils.py （文件说明）中自己进行此翻译，但请注意，这可能比它的价值更多（推荐的方法是使用本机 Python 安装在 Windows 上而不是通过 cygwin）——或者如果您需要 Linux 上的解释器，请在 Linux 上开发 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T10:54:29.680

谢谢，你让我开心，其实很简单，

您必须将 pydevd_file_utils.py 中的 PATHS_FROM_ECLIPSE_TO_PYTHON 变量更改为，

PATHS_FROM_ECLIPSE_TO_PYTHON = [（r'C:\Users\usernam\workspace-cpp\python-proj\src'，r'/cygdrive/c/Users/usernam/workspace-cpp/python-proj/src'）]

但这需要为您想要调试的所有您自己的 python 源文件进行更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T06:52:20.410

我很高兴地宣布 ePyUnit 的新版本，它解决了“pydevd.py”的加载路径问题。这适用于 Eclipse/PyDev 以及从命令行启动的任意进程。

ePyUnit 现在包括通过“pydevd.py”使用 PyDev 和 Eclipse 进行远程调试的自动化。这可以无缝地用于“子进程”调用以及独立启动的命令行进程。

看：

*   [https://pypi.python.org/pypi/epyunit](https://pypi.python.org/pypi/epyunit)

*   [https://pythonhosted.org/epyunit/](https://pythonhosted.org/epyunit/)

对于远程调试的基础知识：

*   [http://www.pydev.org/manual_adv_remote_debugger.html](http://www.pydev.org/manual_adv_remote_debugger.html)

还增强了与 PyUnit 的 unittest 集成。

欢迎评论和修复。

玩得开心...

# python - 为什么这个 Python 脚本不能在文件的文件夹名称中获取“[]”的文件？

> ID：11952031
> 
> 赞同：0
> 
> 时间：2012-08-14T12:11:35.770
> 
> 标签：python

```
import os
import glob

for root, dirs, files in os.walk('F:\\workspace'):
    for txtfile in glob.iglob(os.path.join(root,'*.txt')):
        print txtfile 
```

我可以得到没有“[]”的文件，如果文件夹名称只有一个符号“[”或“]”，它就可以工作。我认为我以错误的方式使用 glob.iglob；但没有它我不知道如何获取我需要的文件。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:21:28.750

`glob`提到它`fnmatch.fnmatch()`在幕后使用的 Python 文档。

如果您只想匹配文件名而不匹配文件夹名称，请尝试以下代码：

```
for root, dirs, files in os.walk('D:\\Scratch'):
  for file in files:
    if fnmatch.fnmatch(file, '*.txt'):
      print os.path.join(root, file) 
```

# c# - C#：使用参数在 DataGridView 中选择一行

> ID：11952035
> 
> 赞同：0
> 
> 时间：2012-08-14T12:12:01.250
> 
> 标签：c#, datagridview

我有一个 DataGridView 和一个添加新条目按钮。每次向数据库添加新条目时，我希望程序在 DataGridView 中选择新条目所在的行。单击 Add New Entry 按钮后，将调用以下函数，并将 studentName 和 date 参数传递给该函数。DataGridView 的名称是 dvgPontengHistory。

但是抛出了一个异常：

*你调用的对象是空的。*

在这条线上：

```
if(r.Cells["student_name"].Value.ToString().Contains(studentName)) 
```

下面是代码：

> ```
>  private void selectRow(string studentName, string date)
>     {
>         int i = 0;
>         foreach (DataGridViewRow r in dgvPontengHistory.Rows)
>         {
>             if(r.Cells["student_name"].Value.ToString().Contains(studentName)) // error in this line
>             {
>                 if (r.Cells["date"].Value.ToString().Contains(date))
>                 {
>                     dgvPontengHistory.Rows[i].Selected = true;
>                     return;
>                 }
>             }
>             i++;
>         }
>     } 
> ```

有关解决此问题的任何提示？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:15:15.240

可能是结果集中的行中的 student_name 为 null 的情况。这将导致 ToString() 失败。

我的猜测是您的更新语句将 null 放入您的表中。

以下是您的测试方式：

（在投掷线上设置断点）。

```
 private void selectRow(string studentName, string date)
    {
        int i = 0;
        foreach (DataGridViewRow r in dgvPontengHistory.Rows)
        {
            if (r.Cells["student_name"] == null) { throw("can't find cell"); }
            if(r.Cells["student_name"].Value == null) { throw("cell has no value"); }
            if(r.Cells["student_name"].Value.ToString().Contains(studentName)) // error in this line
            {
                if (r.Cells["date"].Value.ToString().Contains(date))
                {
                    dgvPontengHistory.Rows[i].Selected = true;
                    return;
                }
            }
            i++;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:16:40.060

```
private void selectRow(string studentName, string date)
{
    int i = 0;
    foreach (DataGridViewRow r in dgvPontengHistory.Rows)
    {
        if(r.Cells["student_name"].Value == null) return;
        if(r.Cells["student_name"].Value.ToString().Contains(studentName)) // error in this line
        {
            if (r.Cells["date"].Value.ToString().Contains(date))
            {
                dgvPontengHistory.Rows[i].Selected = true;
                return;
            }
        }
        i++;
    }
} 
```

# matlab - 用其他值替换矩阵中的值

> ID：11952037
> 
> 赞同：14
> 
> 时间：2012-08-14T12:12:14.753
> 
> 标签：matlab, matrix

我有一个整数矩阵，我需要用 -5 替换所有出现的 2。最有效的方法是什么？我按照下面的方式做到了，但我相信还有更优雅的方式。

```
a=[1,2,3;1,3,5;2,2,2]
ind_plain = find(a == 2)
[row_indx col_indx] = ind2sub(size(a), ind_plain)
for el_id=1:length(row_indx)
    a(row_indx(el_id),col_indx(el_id)) = -5;
end 
```

而不是循环 II 寻找类似的东西：a(row_indx,col_indx) = -5，这不起作用。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-14T12:15:12.917

`find`在这种情况下不需要。改为使用逻辑索引：

```
a(a == 2) = -5 
```

如果搜索矩阵是否等于`inf`您应该使用

`a(isinf(a)) = -5`

一般情况是：

`Mat(boolMask) = val`

`Mat`您的矩阵在哪里 ，`boolMask`是另一个`logical`值矩阵，并且`val`是分配值

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-14T12:15:36.440

尝试这个：

```
a(a==2) = -5; 
```

稍长的版本将是

```
ind_plain = find(a == 2);
a(ind_plain) = -5; 
```

换句话说，您可以直接使用线性索引来索引矩阵，而无需使用`ind2sub`--非常有用！但如上所示，如果使用布尔矩阵索引矩阵，则可以变得更短。

顺便说一句，如果（通常情况下）您对将语句的结果转储到控制台不感兴趣，则应该在语句后放置分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T14:22:38.417

如果您要更改向量中的值，Martin B 的方法很好。但是，要在矩阵中使用它，您需要获得线性索引。

我找到的最简单的解决方案是使用`changem`函数。非常容易使用：

`mapout = changem(Z,newcode,oldcode)` 在你的情况下：`newA = changem(a, 5, -2)`

更多信息： http: [//www.mathworks.com/help/map/ref/changem.html](http://www.mathworks.com/help/map/ref/changem.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-26T10:18:26.283

`changem`这是 Mapping Toolbox中一个简单的、未优化的、可能很慢的实现。

```
function mapout = changem(Z, newcode, oldcode)
% Idential to the Mapping Toolbox's changem
% Note the weird order: newcode, oldcode. I left it unchanged from Matlab.
    if numel(newcode) ~= numel(oldcode)
        error('newcode and oldcode must be equal length');
    end

    mapout = Z;

    for ii = 1:numel(oldcode)
        mapout(Z == oldcode(ii)) = newcode(ii);
    end
end 
```

# objective-c - 如何使用 iOS5 在 Twitter 中获取私人列表？

> ID：11952039
> 
> 赞同：0
> 
> 时间：2012-08-14T12:12:34.240
> 
> 标签：objective-c, list, ios5, twitter, private

以下代码不返回私人列表：

```
NSURL* url=[NSURL URLWithString:@"http://api.twitter.com/1/noppefoxwolf/lists.json"];
NSDictionary* params=[NSDictionary dictionaryWithObjectsAndKeys:nil];
TWRequest* timeline=[[TWRequest alloc] initWithURL:url parameters:params requestMethod:TWRequestMethodGET];
timeline.account=_account;
[timeline performRequestWithHandler:^(NSData* responseData,
                                      NSHTTPURLResponse* urlResponse,NSError* error) {
    NSError* jsonError=nil;
    id data=[NSJSONSerialization JSONObjectWithData:responseData
                                            options:0 error:&jsonError];
    if (error!=nil) {
        [self showAlert:@"" text:@"Error1"];
    } else if (jsonError!=nil) {
        [self showAlert:@"" text:@"Error2"];
    } else {
        NSArray * listsArray = [data objectForKey:@"lists"];
        for (int i=0;i<listsArray.count;i++) {
            NSDictionary* listDic=[listsArray objectAtIndex:i];
            NSLog(@"NAME:%@\nMODE:%@",[listDic objectForKey:@"name"],[listDic objectForKey:@"mode"]);
        }
    }
}]; 
```

结果

```
NAME:list1
MODE:public
NAME:list2
MODE:public 
```

↑ 不显示私人名单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:52:08.750

从[文档](https://dev.twitter.com/docs/api/1/get/lists)中：

> 如果经过身份验证的用户与返回列表的用户相同，则将包括私人列表。

您没有传入任何参数，因此没有指定 user_id 值（即使文档说它是必需的！）。我猜`noppefoxwolf`不是您的经过身份验证的用户。

# ruby - 请求通过 websocket 读取变得乱码

> ID：11952041
> 
> 赞同：1
> 
> 时间：2012-08-14T12:12:37.330
> 
> 标签：ruby, html, websocket, cramp

我正在尝试使用 Cramp 框架创建一个最小的 Websocket 实现。当 Cramp 成功呈现正常的 Web 内容时，我在尝试使用 HTML5 websockets 时遇到了麻烦。

我的动作类如下：

```
 Cramp::Websocket.backend = :thin

class HomeAction < Cramp::Action
  self.transport = :websocket
  keep_connection_alive

  on_data :recv_data

  def recv_data data
    puts "got message"
    puts "#{data}"
    render "Hello world"
  end

end 

```

我的javascript代码如下：

```
 $(function(){

    window.socket = new WebSocket("ws://localhost:3000/game");
    socket.onmessage = function(evt){
        console.log(evt.data);
        socket.close();
    }
    socket.onclose = function(evt) {
        console.log("end");
    }
    socket.onopen = function() {
        console.log("Now open!");
        socket.send("Hello");
    }

}) 
```

服务器（瘦）检测何时发送数据但读取的文本是乱码。

数据的编码是 ASCII-8BIT（`puts data.encoding`打印“ASCII-8BIT”）。但是，通过 data.force_encoding('UTF-8') 强制 UTF 编码并不能解决问题。此外，在强制编码之后 -`data.valid_encoding?`返回 false ，因为它在强制之前为 true。

我已经在 ruby​​-1.8.7 和 ruby​​-1.9.3 中测试了该应用程序。两种情况下的输出相同。

另一个奇怪的事情是，在客户端永远不会触发 onmessage 事件。

此外，如果我从 HomeAction 中删除 keep_connection_alive 调用，则连接在接收到数据后立即终止，并且客户端仍然没有收到服务器发送的数据（“Hello world”）。

我已经在 Google chrome（最新版本）和 Mozilla firefox（最新版本）中测试了该应用程序。两者的问题完全相同。我的操作系统是 Ubuntu 12.04 LTS（Precise Pangolin）。

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:40:41.363

我遇到了同样的事情，与你从 github repo (https://github.com/lifo/cramp) 得到的相比，这似乎是 cramp 0.15.1 gem 的发布版本的问题。仍标记为 0.15.1。

试试这个对我有用的实验：

1.  在本地克隆 GH 存储库
2.  将 bin/ 和 lib/ 文件夹以及 cramp.gemspec 文件从 repo 复制到您的测试 cramp 项目
3.  更改您的 gemfile，而不仅仅是

    ```
    gem 'cramp' 
    ```

    包括代码的本地副本：

    ```
    gemspec
    gem 'cramp', :path => File.dirname(__FILE__) 
    ```

4.  擦除您的 Gemfile.lock 并重新捆绑，看到捆绑器现在报告它将使用 cramp gem 的本地副本

5.  再次尝试您的应用程序，在我的场景中，这现在完全按预期工作。

似乎在 github 中有一个他们尚未发布的修复程序（但没有在他们的 gemspec 中增加工作版本）或其他一些版本的问题，但无论哪种方式，GH 中的代码都可以工作，而“gem install cramp”却没有t 为您提供 websockets 的工作代码。

# mysql - GROUP_CONCAT 问题并输出到 csv

> ID：11952042
> 
> 赞同：0
> 
> 时间：2012-08-14T12:12:41.090
> 
> 标签：mysql

我在使用 GROUP_CONCAT 并将结果导出到 csv 时遇到问题。

考虑下表
搜索结果
，列搜索 Id | 说明 | 投票 | 搜索类别

```
and consider the following data in the table
1|java, beans|2|java
2|serialization|3| java
3|jquery| 1|javascript
4|mysql joins|5| database 
```

我需要以下格式的输出

```
Search Category| description1 | description 2 | votes 1 | votes 2
java           |java,beans    | serialization | 2       | 3
javascript     |jquery         |              | 1
database       | mysqljoins    |              | 5 
```

我需要将此数据输出到 csv 文件中。

我已将以下查询选择类别、GROUP_CONCAT(description)、GROUP_CONCAT(votes) 从 search_results group by search_category 写入以 ',' 结尾的 outfile '/tmp/out.csv' 字段，由 '"' 以 '\n 结尾';

但是，以下是问题 - 上述查询分别返回一列用于描述和投票，其中显示逗号分隔值。我需要为每个值单独列（如所需的输出所示） - 对于 javascript 类别，输出以格式返回

```
javascript|jquery|5<br/> 
```

我需要 javascript|jquery| 格式的输出 | 5| |

空值应该有一个占位符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:19:46.573

```
SELECT
  s1.search_category
  , s1.description AS description1
  , ISNULL(s2.description, '') AS description2
  , s1.votes AS votes1
  , ISNULL(s2.votes, '') AS votes2
FROM search_results AS s1
LEFT OUTER JOIN search_results AS s2 ON s2.search_category = s1.search_category
WHERE s1.search_id < s2.search_id
INTO OUTFILE ... 
```

LEFT JOINing the table to its self will give you the second column if there is one. If there isn't one, the values will be NULL and the ISNULL will return spaces (or whatever else you want).

If there are more than 2 rows with the same search_category, you will get more than one row in the output which might not be what you're after.

# javascript - 如何通过 Facebook Graph API 使用访问令牌

> ID：11952049
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:13:04.817
> 
> 标签：javascript, html, facebook, facebook-graph-api

我正在尝试向用户发布“活动提要”，但我不明白如何。

这是我的演示应用程序：http: [//bazaar-market.co.uk/facebook_test/car.html](http://bazaar-market.co.uk/facebook_test/car.html)

您可以查看源代码以查看所有代码，因为它都是 HTML。

```
<script type="text/javascript">
  function postView()
  {
      FB.api(
        '/me/fandango-auctions:view',
        'post',
        { item : 'http://bazaar-market.co.uk/facebook_test/car.html' },
        function(response) {
           if (!response || response.error) {
              alert("Error");
           } else {
              alert('View was successful! Action ID: ' + response.id);
           }
           console.log(response);
        });

  }
</script> 
```

我收到错误消息：

> 必须使用应用程序 access_token 调用此方法

如果我在应用程序的设置中禁用 access_token，那么它会说：

> 您必须使用 access_token 访问用户帐户详细信息

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:40:07.750

尝试这个。

[https://developers.facebook.com/docs/authentication/client-side/](https://developers.facebook.com/docs/authentication/client-side/)

```
<html> 
   <head> 
     <title>Client-side OAuth Example</title> 
   </head> 
   <body> 
   <script> 
     function displayUser(user) {
       var userName = document.getElementById('userName');
       var greetingText = document.createTextNode('Greetings, '
         + user.name + '.');
   userName.appendChild(greetingText);
     }

     var appID = YOUR_APP_ID;
     if (window.location.hash.length == 0) {
       var path = 'https://www.facebook.com/dialog/oauth?';
   var queryParams = ['client_id=' + appID,
     'redirect_uri=' + window.location,
     'response_type=token'];
   var query = queryParams.join('&');
   var url = path + query;
   window.open(url);
     } else {
       var accessToken = window.location.hash.substring(1);
       var path = "https://graph.facebook.com/me?";
   var queryParams = [accessToken, 'callback=displayUser'];
   var query = queryParams.join('&');
   var url = path + query;

   // use jsonp to call the graph
       var script = document.createElement('script');
       script.src = url;
       document.body.appendChild(script);        
     }
   </script> 
   <p id="userName"></p> 
   </body> 
  </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:59:46.133

错误在函数中：postView()。当我登录时，我有 access_token ： `AAAFIDJXVUKcBABpW5pcU97CC7sTwdDmJykOKhZAykZC6D8gaTumTsDZBRzCfJ3eqc58R5whIFuGTBnPeeRGmn6N0ccBDLRGNKXJmy5ZCexTvjBqExTmI`

但是函数 postView() 使用另一个已经过期的 access_token ：

```
FB.api(
        '/me/fandango-auctions:view',
        'post',
        {
        access_token : 'AAAFIDJXVUKcBALARwKxJHdwwf7chdqleGsrQtYsIk3xiB4vR111s3Gc4cos3Dgd6CFynoUURci0i3t7lzh5mZA41UqSJzbccjy6JjWLSTk8UfgvEO',
        item : 'http://bazaar-market.co.uk/facebook_test/car.html' 
        },
        function(response) {
           if (!response || response.error) {
              alert("Error");
           } else {
              alert('View was successful! Action ID: ' + response.id);
           }
           console.log(response);
        }); 
```

# jquery - append()'ing 到一个 empty()'d ul

> ID：11952051
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:13:06.863
> 
> 标签：jquery

我正在尝试清除`<ul>`它的`<li>`一部分孩子，然后是`append()`新`<li>`的 empty `<ul>`。

我正在（尝试）为此使用 OOP JS，所以进一步启动代码的 jQuery 是这样的：

```
$('#nav li a').click(function() {
    TutorGroupPoints.yearClick($(this).attr("id"));
}); 
```

该`yearClick`函数中的部分代码为：

```
$('#nav ul').empty();

for (var i = 0; i < this.Sorted.length; i++) {
    $('#nav ul').append('<li id="' + this.Sorted[i].id + '">' + this.Sorted[i].name + '</li>');
} 
```

`this.Sorted`是一个完全填充的项目数组。

HTML 如下所示：

```
<div id="nav">
    <h2>Tutor Groups</h2>
    <ul>
        <li><a class="year" href="javascript:void(0);" title="Year 9" id="9">Year 9</a></li>
        <li><a class="year" href="javascript:void(0);" title="Year 10" id="10">Year 10</a></li>
        <li><a class="year" href="javascript:void(0);" title="Year 11" id="11">Year 11</a></li>
        <li><a class="year" href="javascript:void(0);" title="Year 12" id="12">Year 12</a></li>
        <li><a class="year" href="javascript:void(0);" title="Year 13" id="13">Year 13</a></li>
    </ul>
</div> 
```

* * *

当我单击其中一个`#nav li`锚点时，它只会擦除`<ul>`并且没有`append()`任何新的`<li>`. **但是**，如果我注释掉`empty`，新的 s 会正确地`<li>`附加到现有的 s 上。`<li>`

难道我做错了什么？

* * *

**编辑**

我已经包含`console.log`了函数，并且没有出现任何问题。

![控制台日志](../Images/1a63a602ff94246fb664e04716743419.png)

全文`console.log`如下：

```
[
    Object
    id: "12117"
    name: "11AB/Tp"
    __proto__: Object
    , 
    Object
    id: "12118"
    name: "11ABO/Tp"
    __proto__: Object ,
    Object , Object , Object , Object , Object , Object , Object ,  Object , Object , Object , Object , Object , Object
] compiler.php:32
<li id="12117">11AB/Tp</li> compiler.php:38
<li id="12118">11ABO/Tp</li> compiler.php:38
<li id="12119">11AN/Tp</li> compiler.php:38
<li id="12605">11DR/Tp</li> compiler.php:38
<li id="12626">11DST/Tp</li> compiler.php:38
<li id="12149">11JOR/Tp</li> compiler.php:38
<li id="12150">11LLU/Tp</li> compiler.php:38
<li id="12151">11MDA/Tp</li> compiler.php:38
<li id="12152">11ND/Tp</li> compiler.php:38
<li id="12153">11PD/Tp</li> compiler.php:38
<li id="12154">11RJ/Tp</li> compiler.php:38
<li id="12606">11SDI/Tp</li> compiler.php:38
<li id="12155">11ST/Tp</li> compiler.php:38
<li id="12607">11SW/Tp</li> compiler.php:38
<li id="12156">11VY/Tp</li> 
```

完整的代码可以在[这里](http://pastebin.com/U16SjaD8)找到。我最初没有包含它，因为它使用特定于 VLE 的 API 调用，如果您不熟悉它们，这往往会使事情变得混乱。

* * *

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:04:30.363

现在您已经显示了 ACTUAL 代码和 ACTUAL HTML，我们可以看到您正在执行以下操作：

```
$('#nav').empty(); 
```

然后尝试附加到：

```
$('#nav ul') 
```

但是，`.empty()`删除的`ul`是`$('#nav ul')`一个空的 jQuery 对象（在您的页面中找不到任何内容），因此尝试附加到它不会做任何事情。这也解释了为什么删除`.empty()`线可以`.append()`工作。

改变：

```
$('#nav').empty(); 
```

到：

```
$('#nav ul').empty(); 
```

# actionscript-3 - Flash/ActionScript 中的 cookie 之类的东西

> ID：11952053
> 
> 赞同：0
> 
> 时间：2012-08-14T12:13:20.633
> 
> 标签：actionscript-3, flash, cookies, shared-objects, local-shared-object

我需要在 Flash 文件中实现 cookie 之类的东西....而且我对 ActionScript 没有任何线索。基本上它是一个带有静音/取消静音按钮的视频。如果我将视频静音并刷新浏览器，它不会再次静音。所以我需要以某种方式保持静音状态。

这是我完整的 ActionScript 文件：

```
import flash.net.SharedObject;
var a:Boolean = false;

var cookie:SharedObject = sharedobject.getLocal("muted");
if (cookie.data.muted == true) {
    SoundMixer.soundTransform = new SoundTransform(0);
    Object(root).ton_btn.gotoAndStop(2);
}

ton_btn.addEventListener(MouseEvent.MOUSE_OVER, fl_MouseOverHandler);

function fl_MouseOverHandler(event:MouseEvent):void
{
 Object(root).ton_btn.buttonMode = true;
 Object(root).ton_btn.useHandCursor = true;
}

ton_btn.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);

function fl_MouseClickHandler(event:MouseEvent):void
{
 if (! a)
 {
    var muteStatus:Boolean = true;
    cookie.data.muted = muteStatus;
    SoundMixer.soundTransform = new SoundTransform(0);
    Object(root).ton_btn.gotoAndStop(2);
    trace(a);
 }
 else
 {
    var muteStatus:Boolean = false;
    cookie.data.muted = muteStatus;
    SoundMixer.soundTransform = new SoundTransform(1);
    Object(root).ton_btn.gotoAndStop(1);
    trace(a);
 }
 a = ! a;
} 
```

这不起作用，现在我的静音按钮在闪烁……似乎 if 子句一直在执行。感谢您提前提供任何提示、提示或链接。;)

问候尼尔斯

编辑：太愚蠢了……这只是一个错字。

```
var cookie:SharedObject = sharedobject.getLocal("muted"); 
```

一定是：

```
var cookie:SharedObject = SharedObject.getLocal("muted"); 
```

现在它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:30:46.337

我建议遵循流行的 ActionScript3.0 Cookie 框架的开源。一般来说，框架中的两种cookies是已知的。请参阅开源。更快地解决你的问题，你可以给予。第 1 号是唯一的 Sourcode 和教程，第 2 号是一个完整的框架。

> 1.  [使用 SharedObject 读写和编辑](http://ntt.cc/2008/07/13/the-source-code-of-actionscript-3-cookie-class-enables-you-to-read-write-and-edit-shared-objects-on-the-user-hard-disk.html)
>     
>     
> 2.  [Actionscript3 Cookie 实用程序](http://myflex.wordpress.com/2008/11/12/actionscript-cookie-util/)

# git - git show 打印不需要的标签信息

> ID：11952071
> 
> 赞同：0
> 
> 时间：2012-08-14T12:14:32.770
> 
> 标签：git, git-show

使用此命令时：

```
$ git show -s --pretty=format:%H --all 
```

它打印这个：

```
41b253549d86db3432743c1c8a9f75511779073c
83cfbe4b5a128ab06733fdde24f67171a1cf945c

20c18bee751e681856ee4587bb513400b472f941
ba73e741f3ccf7b719a67436cf8b953a1bdeeb89

tag 1.0
Tagger: <snip>

129cba44e34066bfee7ad19a278ead94c2edece9
tag 1.0.1
Tagger: <snip>

6fcdc763265454e602b746e4d81942a1f0597f2e
tag 1.0.2
Tagger: <snip>

36e56a8bc0d568661fa61cdb0a4e4c69c4c30efb
tag 1.0beta1
Tagger: <snip> 
```

我只想打印提交哈希，而不是标签名称和标签。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:00:18.890

我不确定您是否要列出标记的提交但忽略标记信息或根本不希望包含标记的提交。

如果是第一种情况，那么`git rev-list --all --no-walk`应该做你想做的事。

对于第二种情况`git rev-list --branches --no-walk`，甚至`git show -s --pretty=format:%H --branches`会做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:34:19.720

如果你知道你的第一个提交哈希，假设它是`e562b3`，你可以这样做：

```
git show -s --pretty=format:%H e562b3..HEAD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:46:12.307

您是否尝试使用`git log --pretty=format:%H --all`而不是使用`git show`？

您并没有真正说出您的目标是什么，但您甚至可能只想使用`git rev-list --all`.

（我无法重现您在带有标签但可能使用`git log`或`git rev-list`将解决问题的 repo 上看到的行为）

# c# - 文本框的定时器/刷新功能

> ID：11952075
> 
> 赞同：1
> 
> 时间：2012-08-14T12:14:47.063
> 
> 标签：c#, winforms, multithreading, timer, refresh

在我的应用程序中，我有两个带有两个标签的文本框：“已连接”和“未连接”。如我的代码所示，如​​果建立了连接，“已连接”文本框将填充绿色，表示网络连接。如果没有，它将是红色的。

连接检测的功能工作得很好，但是，我必须重新打开应用程序才能检测到更改。我正在寻找一种每隔 5-10 秒左右自动刷新应用程序以检测连接性变化的方法。我不想清除任何其他字段或框的内容，只是清除颜色文本框。可以说是软轮询循环。我将如何使用 Timer 方法执行此操作。我应该创建一个新线程来运行计时器并刷新框吗？

谢谢。

```
 if (System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable() == false)
        {
            noConnect.Select();  //if not connected, turn box red
            noConnect.BackColor = Color.Red;

        }

        else
        {
            netConnect.Select();  // if connected, turn box green
            netConnect.BackColor = Color.Lime;

        }

        //need to refresh box/application without losing other box/field contents 
        //in order to constantly check connectivity around 5-10 seconds or so
        //constantly check connectivity 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:21:56.940

像这样的东西会起作用

```
 public Form1()
    {
        InitializeComponent();
        var timer = new Timer();
        timer.Tick += new EventHandler(timer_Tick);
        timer.Interval = 10000; //10 seconds
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        if (your_function_call())
        {
            netConnect.BackColor = Color.Green;
        }
        else
            netConnect.BackColor = Color.Red;
    } 
```

timer_Tick 将在每个间隔重复调用，您可以轮询您的状态并更新控件。因为在 UI 线程中调用了计时器回调，所以您可以更新任何 UI 元素。

从[定时器类](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.TIMER%29;k%28TIMER%29;k%28DevLang-CSHARP%29&rd=true)

> Timer 用于以用户定义的时间间隔引发事件。此 Windows 计时器专为使用 UI 线程执行处理的单线程环境而设计。它要求用户代码具有可用的 UI 消息泵，并且始终从同一个线程操作，或者将调用编组到另一个线程。使用此计时器时，使用 Tick 事件执行轮询操作或在指定时间段内显示启动屏幕。只要 Enabled 属性设置为 true 并且 Interval 属性大于零，就会根据 Interval 属性设置每隔一段时间引发 Tick 事件。

此解决方案使用`System.Windows.Forms.Timer`调用 UI 线程上的刻度。如果您使用`System.Timers.Timer`回调将不会在 UI 线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:18:10.653

只需创建[计时器](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。它可以很好地在他自己的线程上运行，而无需您做任何其他事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:19:25.877

您可以在应用程序的某处创建计时器

```
var timer = new System.Timers.Timer();
timer.Interval = 5000; // every 5 seconds
timer.Elapsed = (s, e) => {
    // Your code
};
timer.Start(); 
```

注意：请注意，您在 Elapsed 事件处理程序中的代码可以/将在另一个线程上运行！

# jsf-2 - 导航在 primefaces 轮播中不起作用

> ID：11952089
> 
> 赞同：1
> 
> 时间：2012-08-14T12:15:31.170
> 
> 标签：jsf-2, navigation, primefaces, carousel

我需要在我的模型中设置一些值并将页面导航到另一个值，但是在按钮单击时没有任何反应（页面导航和方法都没有触发）......我的代码在轮播之外完美运行，但在轮播内部它不起作用（不页面导航）

```
<p:carousel value="#{catalog.getServices()}" var="s" rows="1">
    <h:outputLabel for="id" value="Service ID " />
    <h:outputText id="id" value="#{s.id}" />
    <br></br>
    <h:outputLabel for="name" value="Service Name" />
    <h:outputText id="name" value="#{s.name}" />
    <br />
    <h:commandLink action="detail">
    <f:setPropertyActionListener value="#{s}" target="#{sh.currentService}" />
    <h:commandButton value="getService" style="float:right;" />
    </h:commandLink>
</p:carousel> 
```

我的导航在这个旋转木马之外也很完美

```
<h:commandLink action="detail">
    <f:setPropertyActionListener value="#{s}" target="#{sh.currentService}" />
    <h:commandButton value="getService" style="float:right;" />
</h:commandLink> 
```

上面的代码可以使我的页面导航并且我想要触发的方法也可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:41:06.210

你应该避免嵌套`h:commandButton`在里面`h:commandLink`。

只需使用 `h:commandButton`这种方式：

```
<h:commandButton value="getService" action="#{yourBean.yourActionMethod}">
  <f:setPropertyActionListener .../>
</h:commandButton> 
```

并在您的支持 bean 中返回导航目标作为操作方法的结果：

```
public String yourActionMethod() {
  // do your stuff here
  return "detail";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:51:42.800

尝试将 commandButton 放在 p:column 中。我遇到了这个问题，这里[http://forum.primefaces.org/viewtopic.php?f=3&t=16120](http://forum.primefaces.org/viewtopic.php?f=3&t=16120)帮助了我。

# hardware - I/O 磁盘驱动器计算

> ID：11952093
> 
> 赞同：6
> 
> 时间：2012-08-14T12:15:41.083
> 
> 标签：hardware, file-transfer, hard-drive, capacity

所以我正在为即将到来的考试而学习，其中一个问题涉及计算各种磁盘驱动器的属性。我在研究示例问题和公式时花了很多时间，但是因为我对自己的想法有点不确定，所以我想知道您能否帮助确认我的公式/答案？

**提供的信息：**

旋转速度 = 6000 RPM
表面 = 6
扇区大小 = 512 字节
扇区/磁道 = 500（平均）
磁道 / 表面 = 1,000
平均寻道时间 = 8 毫秒
一条磁道寻道时间 = 0.4 毫秒
最大寻道时间 = 10 毫秒

**问题：**

计算以下

(i) 磁盘的容量
(ii) 单个磁道的最大传输率
(iii) 计算所需的柱面倾斜量（以扇区为单位）
(iv) 跨柱面的最大传输率（以字节为单位）（有柱面倾斜） )

**我的回答：**

**(i)** 扇区大小 x 每个轨道的扇区 x 每个表面的轨道 x 表面数量

512 x 500 x 1000 x 6 = 1,536,000,000 字节

**(ii)**每个轨道的扇区 x 扇区大小 x 每秒旋转速度

500 x 512 x (6000/60) = 25,600,000 字节/秒

**(iii)** (Track to Track seek time / Time for 1 Rotation) x Sectors per Track + 4

(0.4 / 0.1) x 500 + 4 = 24

**(iv)** 老实说，真的不确定这个，任何提示或帮助将不胜感激。

我相当肯定我的论文上会出现一个类似的问题，所以如果你们中的任何人能够确认我的公式并为这个示例问题得出答案，那真的会很有帮助。另外，如果有人可以就最后一个问题提供一些帮助，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:34:08.263

```
(iv) The Maximum transfer rate (in bytes) across cylinders (with cylinder skew) 
```

500 s/t（1 rpm = 500 个扇区）x 512 字节/扇区 x 6（最多读取所有 6 个磁头）1 次旋转在 6 个磁头上产生 1536000 个字节，您正在执行 6000 rpm，即每秒 6000/60 或 100 次旋转因此，每秒 153,600,000 字节（除以 100 万是每秒 153.6 兆字节）

读取一个轨道需要 1/100 秒或 10 毫秒，然后您需要磁头移动 0.4 毫秒才能读取下一个轨道。10.0/10.4 为您提供 96.2% 的有效读取率，完美移动磁头。

在第一次搜索后，您将能够以最佳 153.6 或 147.5 Mb/s 的 96% 的速度阅读。其中 1 Mb = 1,000,000 字节

# sencha-touch-2 - 后退按钮 - 浏览视口

> ID：11952095
> 
> 赞同：0
> 
> 时间：2012-08-14T12:15:42.800
> 
> 标签：sencha-touch-2

我正在向我的应用程序视口添加内容，如下所示：

```
Ext.Viewport.animateActiveItem(item, {transition}) 
```

我正在寻找一种方法来“回到”最后一个视图。这是可能的，还是视口会破坏最后一个视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:12:41.993

为什么不直接使用内置的历史支持？您可以像这样向历史对象添加一个条目：

```
this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
    url: 'dashboard'
})); 
```

调用该函数后，它将更改应用程序的 URL 哈希。您可以通过在控制器中使用路由来获取事件...将其添加到配置中，如下所示：

```
config: {
    routes: {
       'dashboard': 'showDashboard'
    },
    control: {
       //controls...
    }
}, 
```

Sencha Touch 将识别 URL 更改并查看您的路由以调用如下函数：

```
showDashboard: function() {
    Ext.Viewport.animateActiveItem(item, {transition});
}, 
```

使用这种方法，原生的后退按钮会带你回到上一个视图，你也可以调用你想去哪个视图等等......在这里查看关于历史对象的文档：http: [//docs.sencha.com /touch/2-0/#!/api/Ext.app.History](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.History)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:16:50.310

那你为什么不在你`Ext.Viewport.animateActiveItem()`的第一个面板上使用呢？

我在这里做到了：[http ://www.senchafiddle.com/#xTZZg](http://www.senchafiddle.com/#xTZZg)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:16:19.510

Ext.app.Action 是一个私有的 Sencha 类，因此不能保证在未来的版本中存在。更好的方法是更换...

```
this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
    url: 'dashboard'
})); 
```

有了这个 ...

```
this.getApplication().redirectTo('dashboard'); 
```

你也可以传递一个模型对象，只要它实现了一个 toUrl() 方法......

```
this.getApplication().redirectTo(myModelObj); 
```

如果需要，您现在可以使用以下命令返回：

```
history.back(); 
```

请参阅触控历史指南：

*   [http://docs.sencha.com/touch/2-2/#!/guide/history_support](http://docs.sencha.com/touch/2-2/#!/guide/history_support)

# android - Android中滑出时类似通知的列表元素删除

> ID：11952099
> 
> 赞同：5
> 
> 时间：2012-08-14T12:16:16.067
> 
> 标签：android, android-listview, android-animation, android-notifications

我想知道如何让 a`ListView`的元素滑出`slide`，就像你可以`slide`从通知栏中的通知一样`Android`。这是我的情况：

我有一个项目列表，当用户想要从该列表中删除一个项目时，她只需将一个元素滑向屏幕边缘即可。我希望这个滑出是可见的，例如使用某种动画来滑出给定`View`的持有项目。

这里有一些图像来说明这一点。

首先，这是通知的正常状态。

![正常通知状态](../Images/68c317ea529b9ce56e719987d4940a96.png)

然后，这是在滑出期间

![滑出时的状态](../Images/4b6f0ccb770082d58554e7ed4ec33859.png)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:25:08.797

Android 类[com.android.systemui.statusbar.policy.NotificationRowLayout](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/com/android/systemui/statusbar/policy/NotificationRowLayout.java?av=f)（Android 4.1.1 版本）似乎是通知栏行的管理器，它使用一个帮助类[com.android.systemui.SwipeHelper](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/com/android/systemui/SwipeHelper.java?av=f)似乎可以正是你想要的那种东西。

所以[NotificationRowLayout](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/com/android/systemui/statusbar/policy/NotificationRowLayout.java?av=f)是一个使用[SwipeHelper](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/com/android/systemui/SwipeHelper.java?av=f)的例子，希望它是你正在寻找的东西！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T00:05:38.040

Roman Nurik（Android 开发者倡导者）创建[了一个快速而肮脏的 swipe-to-dismiss 实现](https://gist.github.com/2980593)。Jake Wharton使用 NineOldAndroids 将[其反向移植到早期的 Android 版本上。](https://github.com/JakeWharton/SwipeToDismissNOA)你可以试试其中一个。

# php - javascript 意外令牌 < ，有什么办法可以逃避错误（或至少跳过那些无用的字符）

> ID：11952101
> 
> 赞同：1
> 
> 时间：2012-08-14T12:16:26.300
> 
> 标签：php, javascript, jquery

在 php 中，我有一个这样的数组：

```
$arr['a'] = "some big data so may contain some chars that bring us headache"
$arr['b'] = "some big data same as above"

$data = json_encode($arr)
echo $data 
```

我的 javascript 代码包含一个 jquery ajax 调用 $.ajax 。它调用包含上述 php 代码的文件，因此，成功后，json_encoded(by php) 将返回到我的 javascript 变量。在我的 javascript 文件中，我这样做：

```
jsdata = JSON.parse(data); //Getting error here

$.ajax({
type: "post",
data: jsdata,
url: "url",
crossDomain: true,
dataType: 'jsonp'
}).done(function(d) {
  print("success");
}); 
```

从上面的代码中，在 jsdata = JSON.parse(data) 行中，我遇到了类似的错误

```
 Error :    UNEXPECTED TOKEN < 
```

由于数据包含很多不同的内容，出现这些错误是正常的。他们需要正确地逃脱。谁能告诉我如何正确地做到这一点。无论数据是什么，我都不应该得到关于数据的错误。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:21:07.560

好吧，您可能应该知道的几件事`jsdata = JSON.parse(data);`试图解析您分配给的任何*json 字符串*`data`，并将其作为 JS 对象返回。我认为你想做相反的事情：`jsdata = JSON.stringify(data);`

此外，由于您使用的是 jQuery，因此您可以省略该行：无论如何，jQuery 都会在发送请求之前将数据转换为适当的格式，无需自己进行*解析或字符串化*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:21:06.300

是的，你忘记了`;`两行末尾的，所以 PHP 输出了一个错误，它不符合 JSON。

总是这样做：

*   捕获错误并以应用程序不稳定的方式输出它们（5xx 状态就足够了）
*   下次遇到此问题时，请使用 Chrome Developper 工具或 Firebug 来查看您的应用真正返回的内容
*   此外，您输出的是 json，而不是 jsonp，它与您的应用程序所期望的不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:23:31.870

```
$.ajax({
  type: "post",
  data: jsdata,
  url: "url",
  crossDomain: true,
  dataType: 'jsonp',
  success: function(d) {
    print("success");
  }
}) 
```

试试这种方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:36:30.237

这比看起来要简单得多。

在编码 JSON 并回显到 JavaScript之前调用`urlencode($arr['a'])`和`urlencode($arr['b'])`（对于 中的每个数据值）。这将对数组中的数据进行[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)，这样就不会给您带来任何问题。`$arr``$data`

解析完 JSON 后，您必须`unescape(string)`对每个大数据值调用 JavaScript 函数。这将使他们恢复到原来的样子。这是一种 PHP 和 JavaScript 的超级英雄组合！

# java - 运行tomcat时设置Java窗口的标题

> ID：11952108
> 
> 赞同：11
> 
> 时间：2012-08-14T12:16:41.677
> 
> 标签：java, cmd

我正在编写一个脚本来启动几个 tomcat 服务器，就像这样

```
cd "F:\...\apache-tomcat-5.5.33\bin"
call "cmd /c startup.bat"
cd "F:\...\apache-tomcat-5.5.33\bin"
call "cmd /c startup.bat"
etc 
```

我正在工作，但每个都在一个 java 窗口中打开，顶部只显示“tomcat”。我可以具体说明这段文字的内容吗？我真的很想能够把它们区分开来！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T12:24:07.227

您必须设置一个环境变量。阅读最后一个说`TITLE`。我在里面找到了这个`catalina.bat`。

```
rem ---------------------------------------------------------------------------
rem Start/Stop Script for the CATALINA Server
rem
rem Environment Variable Prerequisites
rem
rem   Do not set the variables in this script. Instead put them into a script
rem   setenv.bat in CATALINA_BASE/bin to keep your customizations separate.
rem
rem   CATALINA_HOME   May point at your Catalina "build" directory.
rem
rem   CATALINA_BASE   (Optional) Base directory for resolving dynamic portions
rem                   of a Catalina installation.  If not present, resolves to
rem                   the same directory that CATALINA_HOME points to.
rem
rem   CATALINA_OPTS   (Optional) Java runtime options used when the "start",
rem                   "run" or "debug" command is executed.
rem                   Include here and not in JAVA_OPTS all options, that should
rem                   only be used by Tomcat itself, not by the stop process,
rem                   the version command etc.
rem                   Examples are heap size, GC logging, JMX ports etc.
rem
rem   CATALINA_TMPDIR (Optional) Directory path location of temporary directory
rem                   the JVM should use (java.io.tmpdir).  Defaults to
rem                   %CATALINA_BASE%\temp.
rem
rem   JAVA_HOME       Must point at your Java Development Kit installation.
rem                   Required to run the with the "debug" argument.
rem
rem   JRE_HOME        Must point at your Java Runtime installation.
rem                   Defaults to JAVA_HOME if empty. If JRE_HOME and JAVA_HOME
rem                   are both set, JRE_HOME is used.
rem
rem   JAVA_OPTS       (Optional) Java runtime options used when any command
rem                   is executed.
rem                   Include here and not in CATALINA_OPTS all options, that
rem                   should be used by Tomcat and also by the stop process,
rem                   the version command etc.
rem                   Most options should go into CATALINA_OPTS.
rem
rem   JAVA_ENDORSED_DIRS (Optional) Lists of of semi-colon separated directories
rem                   containing some jars in order to allow replacement of APIs
rem                   created outside of the JCP (i.e. DOM and SAX from W3C).
rem                   It can also be used to update the XML parser implementation.
rem                   Defaults to $CATALINA_HOME/endorsed.
rem
rem   JPDA_TRANSPORT  (Optional) JPDA transport used when the "jpda start"
rem                   command is executed. The default is "dt_socket".
rem
rem   JPDA_ADDRESS    (Optional) Java runtime options used when the "jpda start"
rem                   command is executed. The default is 8000.
rem
rem   JPDA_SUSPEND    (Optional) Java runtime options used when the "jpda start"
rem                   command is executed. Specifies whether JVM should suspend
rem                   execution immediately after startup. Default is "n".
rem
rem   JPDA_OPTS       (Optional) Java runtime options used when the "jpda start"
rem                   command is executed. If used, JPDA_TRANSPORT, JPDA_ADDRESS,
rem                   and JPDA_SUSPEND are ignored. Thus, all required jpda
rem                   options MUST be specified. The default is:
rem
rem                   -agentlib:jdwp=transport=%JPDA_TRANSPORT%,
rem                       address=%JPDA_ADDRESS%,server=y,suspend=%JPDA_SUSPEND%
rem
rem   LOGGING_CONFIG  (Optional) Override Tomcat's logging config file
rem                   Example (all one line)
rem                   set LOGGING_CONFIG="-Djava.util.logging.config.file=%CATALINA_BASE%\conf\logging.properties"
rem
rem   LOGGING_MANAGER (Optional) Override Tomcat's logging manager
rem                   Example (all one line)
rem                   set LOGGING_MANAGER="-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager"
rem
rem   TITLE           (Optional) Specify the title of Tomcat window. The default
rem                   TITLE is Tomcat if it's not specified.
rem                   Example (all one line)
rem                   set TITLE=Tomcat.Cluster#1.Server#1 [%DATE% %TIME%]
rem
rem
rem
rem $Id: catalina.bat 1344732 2012-05-31 14:08:02Z kkolinko $
rem --------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T09:40:17.733

在**catalina.bat**中进行以下更改：

```
:doStart
...
if "%TITLE%" == "" set TITLE=MY TOMCAT TITLE 
```

其中**MY TOMCAT TITLE**是您要赋予 java 窗口的标题。

# algorithm - 寻找有限状态机的不同调度算法的比较

> ID：11952109
> 
> 赞同：3
> 
> 时间：2012-08-14T12:16:44.717
> 
> 标签：algorithm, embedded, scheduled-tasks, scheduler, state-machine

是否有任何好的资源（书籍、网站）可以很好地比较没有操作系统的嵌入式系统中有限状态机 (FSM) 的不同调度算法？

我正在设计一个没有操作系统的简单嵌入式 Web 服务器。我想知道用于安排处理系统中发生的不同事件的各种方法是什么。

例如，如果两个事件同时到达，事件的优先级如何？如果我为事件分配不同的优先级，如何确保优先级较高的事件首先得到处理？如果在处理事件时出现更高优先级的事件，如何确保立即处理该事件？

我计划使用 FSM 在事件到达时检查各种条件，然后正确安排事件进行处理。因为嵌入式 Web 服务器没有操作系统，所以我正在考虑使用[循环执行](http://en.wikipedia.org/wiki/Cyclic_executive)方法。但我想看看可以在这种方法中使用的不同算法的优缺点比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T15:15:50.147

如果我知道这个问题的含义，答案可能仍然是 Miro Samek 的[*C/C++ 中的实用 UML 状态图，第二版：嵌入式系统的事件驱动编程*](http://www.state-machine.com/psicc2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T17:35:26.147

您说：“我的意思是例如调度条件，如果两个任务同时到达，则需要优先考虑哪个任务，并且类似于嵌入式网络服务器中的其他情况。”

我将其解释为：“当多个任务同时到达时，用于确定哪个任务首先执行（计划）的规则集是什么。”

我用你的术语“任务”来说明相似性。但克利福德是正确的。正确的术语应该是“事件”或“消息”。

当您说“调度条件”时，我认为您的意思是“确定事件时间表的一组规则”。

算法的定义是：*在计算或其他解决问题的操作中要遵循的过程或规则集，尤其是。通过计算机。*

来自题为[调度算法](http://people.csail.mit.edu/karger/Papers/scheduling.pdf)的论文：

> 考虑必须处理随时间到达的一系列作业的计算机的中央处理单元。应按什么顺序处理作业，以最小化作业从到达到完成在系统中的平均时间？

再一次，听起来像你所说的“调度条件”。

我提出这一点是因为使用正确的词语来描述您正在寻找的内容将帮助我们（SO 社区）为您提供更好的答案。并且会在您自己进一步研究时为您提供帮助。

如果我对您问题的解释仍然不是您的想法，请告诉我，尤其是我所说的错误，我会再试一次。也许更多的例子可以帮助我更好地理解。

关于日程安排的一些进一步阅读（这是你所要求的）：

1.  一个很好的起点当然是关于[调度学科的维基百科文章](http://en.wikipedia.org/wiki/Scheduling_(computing)#Scheduling_disciplines)
2.  比您正在寻找的级别略低但仍然包含有关调度的详细信息的是[高级合成的调度算法](http://ens.ewi.tudelft.nl/Education/courses/et4054/hls_paper.pdf)（**注意：**无论出于何种原因，PDF 的页面顺序都是相反的，所以从底部开始）

**优先级中断调度程序的示例：**

采用优先级 0 最高的架构。两个事件同时出现。一个优先级为 2，另一个优先级为 3。调度算法开始处理优先级为 2 的那个，因为它具有更高的优先级。

在处理优先级为 2 的事件时，另一个优先级为 0 的事件进入。调度程序中断优先级为 2 的事件并处理优先级为 0 的事件。

处理完优先级 0 事件后，它会返回处理优先级 2 事件。处理完优先级 2 事件后，它会处理优先级 3 事件。

最后，当它处理完所有优先级中断时，它会将控制权返回给主处理任务，该任务处理优先级无关紧要的事件。

插图：

![优先中断时序](../Images/6899b72b0969cb3723021801fc545a2d.png)

在上图中，“任务”是DipSwitch 提到的[超级循环](http://en.wikibooks.org/wiki/Embedded_Systems/Super_Loop_Architecture)或您提到的[循环执行](http://en.wikipedia.org/wiki/Cyclic_executive)`main()`程序中发生的无限循环。“事件”是在超级循环或中断中运行的各种例程，如果它们需要优先级，则如上所示。

要搜索的术语是[Priority Interrupt](http://en.wikipedia.org/wiki/Interrupt_priority_level)和[Control Flow](http://en.wikipedia.org/wiki/Control_flow)。一些很好的阅读材料是[Toppers Kernel Spec](http://www.nces.is.nagoya-u.ac.jp/NEXCESS/blog_en/index.php?catid=59&blogid=4)（我从中得到图像）、[ARM Interrupt Architecture](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ihi0048a/CACFJCGE.html)和一篇关于[80196 Interrupt Architecture](http://aeroflex.com/ams/pagesproduct/appnotes/80196intp.pdf)的论文。

我提到 Toppers Kernel Spec 只是因为我从那里得到了图像。但任何实时操作系统的核心都是调度算法和中断架构。

您询问的“事件”处理将由微处理器/微控制器中断子系统处理。如何构建优先级以及如何处理非优先级事件构成了整个调度算法。

**协作调度器的示例：**

```
typedef struct {
    void   (*task)(void); // Pointer to the task function.
    uint32_t period;      // Period to execute with.
    uint32_t delay;       // Delay before first call.
} task_type;

volatile uint32_t elapsed_ticks = 0;
task_type tasks[NUM_TASKS];

void Dispatch_Tasks(void)
{
    Disable_Interrupts();
    while (elapsed_ticks > 0) { // TRUE only if the ISR ran.
        for (uint32_t i = 0; i < NUM_TASKS; i++) {
            if (--tasks[i].delay == 0) {
                tasks[i].delay = tasks[i].period;

                Enable_Interrupts();
                tasks[i].task(); // Execute the task!
                Disable_Interrupts();
            }
        }
        --elapsed_ticks;
    }
    Enable_Interrupts();
}

// Count the number of ticks yet to be processed.
void Timer_ISR(void)
{
    ++elapsed_ticks;
} 
```

上面的例子取自一篇题为[“Simple Co-Operative Scheduling”](http://petevidler.com/2011/03/simple-co-operative-scheduling/)的博文。

协作调度器是超级循环和定时器中断的组合。[来自嵌入式系统的非阻塞硬件编码](http://scholarworks.boisestate.edu/cgi/viewcontent.cgi?article=1183&context=td)第 2.4 节：

> 协作调度器本质上是前面讨论的两个调度器的组合。一个定时器被设置为定期中断，这将是不同任务的最小时间分辨率。然后为每个任务分配一个周期，该周期是中断间隔最小分辨率的倍数。然后不断调用一个函数来更新每个任务的中断计数并运行已达到其中断周期的任务。这导致调度器具有 Superloop 的可扩展性和 Time Triggered 调度器的时序可靠性。这是传感器系统常用的调度程序。但是，这种类型的调度器并非没有局限性。协作调度程序中的任务调用很短仍然很重要。

要进行更深入的分析，请参阅[International Journal of Electrical & Computer Sciences](http://www.ijens.org/Vol_11_I_04/117404-8989-IJECS-IJENS.pdf)的一篇论文。

**抢占式与合作式：**

如果没有某种在其之上运行的[抢占算法，协作调度程序就无法处理异步事件。](http://en.wikipedia.org/wiki/Preemption_(computing))这方面的一个例子是多级队列架构。关于这个问题的一些讨论可以在[这篇](http://myweb.lmu.edu/dondi/share/os/cpu-scheduling.pdf)关于 CPU 调度的论文中找到。当然，各有利弊。这篇关于 RTKernel-32 的[简短文章](http://www.on-time.com/rtos-32-docs/rtkernel-32/programming-manual/advanced-topics/preemptive-or-cooperative-multitasking.htm)中描述了其中的一些。

至于“任何能够满足基于优先级的任务调度的特定类型的抢占式调度调度过程（如图）”，任何基于优先级的中断控制器本质上都是抢占式的。如果您为每个中断安排一个任务，它将如图所示执行。

# php - 来自 URL 的 Google 日历错误日期问题

> ID：11952112
> 
> 赞同：1
> 
> 时间：2012-08-14T12:16:56.497
> 
> 标签：php, url, calendar

所以这就是问题所在......我在[http://lanyrd.com](http://lanyrd.com)上创建了具有相同日期的日历，但由于某种原因，我的代码在同一日期显示日期“从”和“到”，以及其他（来自 Lanyrd网站）正确显示日期，我不知道为什么......有人可以帮助我吗？

Lanyrd 站点生成的 URL 代码：

```
https://www.google.com/calendar/render?action=TEMPLATE&text=Test+Naziv&dates=20120815/20120817&location=Osijek&details=Ajme+meni+ovo+je+test+naziv&pli=1&sf=true&output=xml 
```

我的代码：

```
https://www.google.com/calendar/render?action=TEMPLATE&text=eZ+Publish+Basic+Concepts&dates=20121008/20121009&location=TBD,+USA&details=This+training+is+required+for+all+other+trainings+and+provides+a+perfect+entry+into+the+way+of+thinking+when+you+intend+working+with+eZ+Publish+as+a+developer,+editor+or+administrator.&pli=1&sf=true&output=xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:35:14.620

好吧，检查 URL，我会说 Google Agenda 将 'to'-date 减一。正如您在 Lanyrd 的 URL 中看到的：dates=20120815/20120817

相隔两天，但在 Google Agenda 中显示为 2012-08-16。您的日期仅相差一个，因此将输入相同的日期。再加上你的最新消息，你的问题就解决了。

# iphone - 当 ipad 方向改变时 UIPopoverController 消失

> ID：11952114
> 
> 赞同：0
> 
> 时间：2012-08-14T12:17:08.280
> 
> 标签：iphone, xcode, uipopovercontroller

当我单击按钮时，弹出框会正确显示。

当方向改变时，它会消失并留下一个黑色的顶栏。

下面是参考图片。

任何人都可以建议，为什么会这样？

![在此处输入图像描述](../Images/91b419482b7c4d431c6e197cfecadd1c.png)

![在此处输入图像描述](../Images/ddce7b82fb51dfe5b7b5e7fdc8899960.png)

我的代码：

```
EBFirstViewController *firstViewController = [[EBFirstViewController alloc]init];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:firstViewController];
    navigationController.delegate = self;

    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:navigationController];
    self.popoverController = popover;
    popoverController.delegate = self;

    [popoverController setPopoverContentSize:CGSizeMake(320.0f, 527.0f)];
    [popoverController presentPopoverFromRect:settingsBtn.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:21:16.967

对于以下代码有助于解决您的问题。

```
- (void)application:(UIApplication *)application willChangeStatusBarOrientation:(UIInterfaceOrientation)newStatusBarOrientation duration:(NSTimeInterval)duration {
    // a cheat, so that we can dismiss all our popovers, if they're open.

    if (ObjPopover) {
        // if we're actually showing the menu, and not the about box, close out any active menu dialogs too
        if (menuPopoverVC && menuPopoverVC == ObjPopover.contentViewController)
            [menuPopoverVC.popoverController dismissPopoverAnimated:YES];
        [menuPopoverPC dismissPopoverAnimated:YES];
        menuPopoverPC = nil;
    }
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
    // the user (not us) has dismissed the popover, let's cleanup.
    ObjPopover = nil;
} 
```

# c# - ActiveDirectory 查询在服务器上不起作用

> ID：11952115
> 
> 赞同：0
> 
> 时间：2012-08-14T12:17:08.157
> 
> 标签：c#, active-directory

我正在尝试根据 ActiveDirectory 的组成员身份获取用户详细信息。这适用于我的本地计算机，但不适用于我在服务器上运行它时。

我不明白的是它会正确返回组成员的数量（尽管它必须以特定方式，请参阅代码中的注释），但不会返回组成员的任何详细信息。我最终得到一个 [DirectoryServicesCOMException (0x80072020): An operation error occurred.] 不管我做什么。

```
//DirectoryEntry DEntry = new DirectoryEntry("LDAP://DOMAIN"); //works only locally
DirectoryEntry DEntry = new DirectoryEntry("LDAP://DOMAIN", "Account", "Password"); //works locally and on the server

DirectorySearcher DSearcher = new DirectorySearcher();
DSearcher.SearchRoot = DEntry;
DSearcher.Filter = "(&(objectClass=group)(cn=GroupName))";
SearchResult SResult = DSearcher.FindOne();
DirectoryEntry DEGroup = new DirectoryEntry(SResult.Path);
System.DirectoryServices.PropertyCollection PCollection = DEGroup.Properties;

//Label1.Text = PCollection["member"].Count.ToString(); //works only locally
Label1.Text = SResult.GetDirectoryEntry().Properties["member"].Count.ToString(); //works locally and on the server

//DirectoryEntry DEUser = new DirectoryEntry("LDAP://DOMAIN/" + PCollection["member"][0].ToString()); //works only locally
DirectoryEntry DEUser = new DirectoryEntry("LDAP://DOMAIN/" + SResult.GetDirectoryEntry().Properties["member"][0].ToString()); //works locally and on the server

//Label2.Text = DEUser.Properties["sAMAccountName"][0].ToString(); //works only locally

DEUser.Close();
DEntry.Close();
DEGroup.Close(); 
```

App Pool Identity 是 Network Service，web.config 包含

```
<authentication mode="Windows">
<identity impersonate="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:37:36.423

我怀疑它在您的机器上工作，因为您自己在调试器中运行。根据您的 ActiveDirectory 设置，您不能以匿名用户的身份查询目录（这是网络服务本身所呈现的）。

最简单的测试是对您域中的用户的应用程序池标识（您的作为测试），如果它有效，您将确认根本原因。

# iphone - 翻转动画在 GMGridview 中不起作用

> ID：11952122
> 
> 赞同：0
> 
> 时间：2012-08-14T12:17:34.497
> 
> 标签：iphone, ipad, ios5, xcode4.2, gmgridview

我正在使用 GMGridview 的应用程序中工作。我在 cellforItems 方法中添加了按钮。-

```
 (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index
{
    NSLog(@"Creating view indx %d", index);

    CGSize size = [self GMGridView:gridView sizeForItemsInInterfaceOrientation:[[UIApplication sharedApplication] statusBarOrientation]];

    GMGridViewCell *cell = [gridView dequeueReusableCell];

    if (!cell) 
    {
        cell = [[GMGridViewCell alloc] init];
        cell.deleteButtonIcon = [UIImage imageNamed:@"close_x.png"];
        cell.deleteButtonOffset = CGPointMake(-15, -15);

    }

    [[cell.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

     btn = [UIButton buttonWithType:UIButtonTypeCustom];
     [btn setTag:index];

    [btn setFrame:CGRectMake(0, 0,size.width, size.height)];
    NSLog(@"button frame is %@",btn);

    [[btn layer] setBorderColor:[UIColor redColor].CGColor];
    [[btn layer]setBorderWidth:2.0f];
    [btn addTarget:self action:@selector(SegmentChange:) forControlEvents:UIControlEventTouchUpInside];

    cell.contentView = btn;
    //int btntag=btn.tag;

return cell; 
```

然后我已经使用该方法翻转所有按钮，但它不起作用，我想要的是当我单击翻转按钮时，gridview 中的所有按钮都应该翻转。我该怎么做，我使用的翻转代码在这里,

```
for(ll=0;ll<[Image_array count];ll++) 
    {
       // [UIView setAnimationDelay:2.0];
        [UIView beginAnimations:@"BackButton" context:nil];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [UIView setAnimationDuration:12.0];

        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:btn cache:YES];
        [UIView setAnimationDelegate:self];
        [UIView commitAnimations];
        [btn setImage:[UIImage imageNamed:nil] forState:UIControlStateNormal];
        [arr_check replaceObjectAtIndex:ll withObject:@"uncheck"];

        front = NO;

    }
       [_gmGridView reloadData]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:38:05.807

因为与`FOR`相比，循环要快得多`UIViewAnimation`。因此，即使它正在为您的视图设置动画，您也将无法看到动画效果。

您可以使用`NSTimer`Or`UIViewAnimation`委托方法来确定单视图翻转事件是否完成。然后从委托方法（的`UIViewAnimation`）你可以开始另一个视图动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:42:46.490

我已经从 for 循环中删除了代码，并在 cellForItemAtIndexpath 中使用了相同的代码，并使用单元格来翻转按钮

这是代码：

```
 [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:cell cache:YES];

        [UIView setAnimationDuration:0.7];
        [UIView setAnimationDelegate:self];
        [UIView commitAnimations]; 
```

# java - Kryo 序列化错误仅在选项卡上

> ID：11952123
> 
> 赞同：1
> 
> 时间：2012-08-14T12:17:51.037
> 
> 标签：java, android, serialization, kryo

我遇到了这个问题：我用 kryonet 库开发的多人游戏在每台设备上都像一个魅力，但很少在银河选项卡上崩溃。它显示的错误是：

> E/AndroidRuntime(16861): 致命异常: Thread-30 E/AndroidRuntime(16861): com.esotericsoftware.kryo.KryoException: java.lang.StringIndexOutOfBoundsException: start=0 end=5 data.length=512 index=6 length= 5 E/AndroidRuntime(16861)：序列化跟踪：E/AndroidRuntime(16861)：电子邮件 (com.momasoft.sudokutournament.network.Network$Login) E/AndroidRuntime(16861)：在 com.esotericsoftware.kryo.serializers.FieldSerializer。写（FieldSerializer.java:203）

我真的不知道问题是什么。我的登录类已正确注册，仅包含 2 个字符串。这适用于几乎所有设备，但 Galaxy 选项卡除外。我该如何解决？

# jquery - 使用 jquery 访问外部元素

> ID：11952129
> 
> 赞同：0
> 
> 时间：2012-08-14T12:18:08.453
> 
> 标签：jquery, html, dhtml

我有一个问题，我需要知道使用 jquery 的示例中的外部 li 元素是什么。请问这可能吗？

[http://jsfiddle.net/f5HHj/2/](http://jsfiddle.net/f5HHj/2/)

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:21:40.603

是的，这是可能的。见[`.parents()`](http://api.jquery.com/parents/)和[`.closest()`](http://api.jquery.com/closest/)。

```
$(".some-element-in-li").click(function(){
    var $li = $(this).closest("li");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:24:09.047

使用 .parent() 函数，您可以获得 HTML 元素的父元素，请参阅我的演示：http: [//jsfiddle.net/f5HHj/3/](http://jsfiddle.net/f5HHj/3/)

```
$('.Box a').click(function() {
    alert('You clicked a link in the ' + $(this).parent().parent().attr('class') + ' list item.');                                           
}) 
```

# c# - 如何正确实现 TAP 方法？

> ID：11952131
> 
> 赞同：13
> 
> 时间：2012-08-14T12:18:15.673
> 
> 标签：c#, .net, async-await, task-parallel-library

我想提供一种基于任务的异步模式样式方法。在等待该方法时，我找不到这两种提供该方法的方式之间的任何区别：

```
// GetStats is a delegate for a void method in this example
public Task GetStatsAsync()
{
    return Task.Run(GetStats);
}

public async Task GetStatsAsync()
{
    return await Task.Run(GetStats);
}

// Usage:
await GetStatsAsync();
// Difference? 
```

上面的方法似乎比下面的方法开销少。在查看 MSDN 博客时，我注意到他们似乎使用了 lower 方法。（例如在[这篇文章中](http://blogs.msdn.com/b/dotnet/archive/2012/06/06/async-in-4-5-enabling-progress-and-cancellation-in-async-apis.aspx)）

为什么？究竟有什么区别？它们似乎都有效。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T12:37:20.730

它们在逻辑上都是相同的，但第二个开销更大，因此不推荐使用。

您可能会发现我的介绍以及[基于任务的异步模式文档](http://www.microsoft.com/en-us/download/details.aspx?id=19957)[`async`很有帮助](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

有关 的开销的更多信息`async`，我推荐[Stephen Toub 的 Zen of Async](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)。

您可能还想阅读[“我应该为同步方法公开异步包装器吗？”](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx) 简而言之，答案是“不”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-17T18:45:17.573

我的印象是实现 TAP 模式的正确方法如下：

```
 public Task<IResult> GetLongWindedTaskResult(){
          var tcs = new TaskCompletionSource<IResult>();
            try
            {
               tcs.SetResult(ResultOFSomeFunction());
            }
            catch (Exception exp)
            {
                tcs.SetException(exp);
            }
            return tcs.Task;
} 
```

这种方式可确保您在抛出异常时正确获得异常，并且如果需要，它可以更轻松地实现取消方法。

# r - R中lmer对象的k-fold验证包

> ID：11952134
> 
> 赞同：2
> 
> 时间：2012-08-07T07:36:38.990
> 
> 标签：r, cross-validation

我需要对 lmer 对象运行 10 倍验证。该模型包括非线性增长曲线的分数多项式变换。

我找不到适用于该模型的 k 折交叉验证包！有任何想法吗？

# android - 在android中如何以编程方式清除网络缓存而不清除数据库

> ID：11952137
> 
> 赞同：0
> 
> 时间：2012-08-14T12:18:41.837
> 
> 标签：android, caching, application-data

我正在开发一个 android 应用程序，其中我正在集成 facebook 功能，如本博客[http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)中所建议的那样， 因为我能够第一次登录但是注销后我无法再次登录，因为在我的应用程序数据中创建了 webcache ......有什么方法可以用来解决我的问题......我是否按照这里的建议使用了下面的代码，但它无法删除删除我的网络缓存...

```
static int clearCacheFolder(final File dir, final int numDays) {

    int deletedFiles = 0;
    if (dir != null && dir.isDirectory()) {
        try {
            for (File child : dir.listFiles()) {

                // first delete subdirectories recursively
                if (child.isDirectory()) {
                    deletedFiles += clearCacheFolder(child, numDays);
                }

                // then delete the files and subdirectories in this dir
                // only empty directories can be deleted, so subdirs have
                // been done first
                if (child.lastModified() < new Date().getTime() - numDays
                        * DateUtils.DAY_IN_MILLIS) {
                    if (child.delete()) {
                        deletedFiles++;
                    }
                }
            }
        } catch (Exception e) {
            Log.e("error Tag",
                    String.format("Failed to clean the cache, error %s",
                            e.getMessage()));
        }

    }
    return deletedFiles;
} 
```

请建议另一种方法来删除我的网络缓存而不删除我的数据库.....

# blackberry - 如何在黑莓中使用 GPS 和 AGPS 连续获取位置

> ID：11952138
> 
> 赞同：0
> 
> 时间：2012-08-14T12:18:46.877
> 
> 标签：blackberry

我编写了以下代码来查找黑莓中的位置，但有时我会得到无效的位置实例。应该将什么值传递给位置侦听器以连续获取位置？

```
package com.sims.sendlocation;

                /**
                 * 
                 * @author PramodKumarVishwakarma
                 *
                 */
                import java.util.Calendar;
                import java.util.TimerTask;

                import javax.microedition.location.Criteria;
                import javax.microedition.location.Location;
                import javax.microedition.location.LocationListener;
                import javax.microedition.location.LocationProvider;

                import com.sims.commonmethods.Constants;
                import com.sims.datahandler.GPRSHandler;
                import com.sims.rms.RMSHandler;

                public class LocationTimerTask extends TimerTask implements LocationListener {

                    private String locationStr;
                    private LocationProvider provider;
                    private String exception;

                    public void run() 
                    {
                        try
                        {

                            Criteria criteria = new Criteria();         
                            criteria.setCostAllowed(false);
                            //criteria.setPreferredPowerConsumption(Criteria.POWER_USAGE_LOW);       
                        provider = LocationProvider.getInstance(criteria);      
                        provider.setLocationListener(this, -1, -1, -1);
                    } 
                    catch (Exception e)
                    {
                        RMSHandler.addDataValues(Constants.CURRENT_LOCATION,"Provider Initialization: " + e.getMessage());
                        System.out.println("***********"+e);
                    }

                    if (checkTimeToSendMail())
                        startRequestThread();
                }

                public boolean cancel() {
                    return false;

                }

                private void startRequestThread()
                {
                    final GPRSHandler gprs = new GPRSHandler();

                    Thread thread = new Thread() {
                        public void run() {
                            try {
                                sleep(Constants.MINUTE * Constants.LOC_THREAD_WAIT);
                                {
                                    FindLocationReceiver location = new FindLocationReceiver();

                                    location.sendOrderToServer(RMSHandler.getDataValues(Constants.IP_INFO)+ gprs.updateConnectionSuffix().trim());
                                }
                            } catch (InterruptedException e) 
                            {
                                //Dialog.ask(Dialog.D_OK, "startRequestThread:   " + e);
                                }
                            }
                        };
                        thread.start();
                    }

                    private boolean checkTimeToSendMail() {
                        Calendar calendar = Calendar.getInstance();

                        int hour = calendar.get(Calendar.HOUR);

                        if (calendar.get(Calendar.AM_PM) == 0) {
                            if (hour >= Constants.MNG_TIME)
                                return true;
                        } else {
                            if (hour < Constants.EVNG_TIME)
                                return true;
                        }

                        return false;
                    }

                    public void locationUpdated(LocationProvider provider, Location location)
                {
                        if (location.isValid()) 
                        {
                            locationStr = location.getQualifiedCoordinates().getLatitude()+ "-" + location.getQualifiedCoordinates().getLongitude();

                        RMSHandler.addDataValues(Constants.CURRENT_LOCATION, locationStr);

                    } 
                    else

                        RMSHandler.addDataValues(Constants.CURRENT_LOCATION,"Not valid Location Provider");
                    }

                    public void providerStateChanged(LocationProvider provider, int newState) 
                    {

                    }
                } 
```

有时我能够获得有效的位置，但有时我无法获得有效的位置。Listener 参数列表中应该传递什么值？

# sencha-touch - 如何将图标添加到按钮

> ID：11952144
> 
> 赞同：0
> 
> 时间：2012-08-14T12:19:16.180
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Sencha Touch 2。我想使用框架中包含的图标。目前我正在使用此代码，但是显示的图像出现了一些故障，透明度似乎丢失了。

我想知道他是否是一个正确的方法来实现它谢谢

```
items: [{
  xtype: 'button',
  icon: 'resources/themes/images/default/pictos/settings9.png',
  ui: 'normal',
  itemId: 'settingsButton',
  align: 'right'
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:26:23.080

我建议你参考这个问题的答案来学习如何在标签栏中使用图标：

[sencha touch tabpanel 选项卡的图标](https://stackoverflow.com/questions/6924336/icon-for-sencha-touch-tabpanel-tabs)

希望这可以帮助

# java - java swing JTabbedPane stateChangedEvent

> ID：11952145
> 
> 赞同：1
> 
> 时间：2012-08-14T12:19:19.463
> 
> 标签：java, swing, jtabbedpane

我已经向 JTabbedPane 添加了一个更改侦听器 stateChanged 应该只处理选项卡中的更改，即当我从 index1 切换到 index2 而不是其他 stateChangedEvents 时

即我不希望在以下方法调用中调用此状态侦听器

```
 jTabbedPane.removeTabAt(index)
           or this.tabbedPane.insertTab(tabTitle, null, jPanel,null,this.index);
jTabbedPane.setSelectedIndex(index) 
```

有没有办法我可以做到这一点。

```
 ChangeListener changeListener=new ChangeListener()
            {
              @Override
            public void stateChanged(ChangeEvent e)
              {
              };
           }
tabbedPane.addChangeListener(changeListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:33:51.643

从您的问题中并不清楚您到底想要什么，我认为您正在寻找：

```
 tabbedPane.addChangeListener(new ChangeListener() {    
            @Override
            public void stateChanged(ChangeEvent e) {
                System.out.println("change"); // Or what ever you want
            }
        }); 
```

**更新：**这是你可以做的，有效

```
public class JTabbedPaneDemo {    
    static int tabCount;
    public static void main(String[] args) {
        ...
        tabCount = tb.getTabCount(); // get total number of tabs
        tb.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                JTabbedPane jt = (JTabbedPane) e.getSource();
                if(tabCount == jt.getTabCount()){ // true if no tab is removed
                     System.out.println("change"); // Or what ever you want
                }
            }
        });
        tb.removeTabAt(0); // stateChange will be called but if will not be true
        tabCount = tb.getTabCount(); // update tabCount after tab remove
        ...  
    }
} 
```

# scala - 产生使用播放！框架

> ID：11952146
> 
> 赞同：3
> 
> 时间：2012-08-14T12:19:24.350
> 
> 标签：scala, playframework, playframework-2.0

我正在使用播放框架。我想使用[HTML5 输入类型 'search'](http://www.w3.org/TR/html-markup/input.search.html#input.search.attrs.type)。所以，我想输出：

```
<input type="search" /> 
```

我试过了：

```
@inputText(field = myForm("myField"), 'type -> "search") 
```

但它仍然保留了 type="input"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:31:20.130

该方法`inputText`表示 HTML 输入文本（请参阅[此处](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/inputText.scala.html)的源代码）。

您必须定义自己的模板来定义 type 的输入`search`。查看[Play 文档](http://www.playframework.org/documentation/2.0.2/JavaFormHelpers)。

```
@helper.input(myForm("myField")) { (id, name, value, args) =>
    <input type="search" name="@name" id="@id" @toHtmlArgs(args)>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:41:15.360

很可能您的搜索字段不会使用常见表单元素（如`constraints`或`error`消息）中的许多典型内容，因此您可以使用纯 HTML 插入它，并在适当的属性中添加字段值（如果需要的话）：

```
<input type="search" name="myField" value="@myForm("myField").value" /> 
```

如果它只是一个搜索表单（只有这个字段），你甚至不需要用`Form`类包装它

（当然 Nico 的建议在更复杂的场景中是可取的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:51:38.183

您正在寻找的一些助手可在 play 2 模块中使用。html5 输入助手不在框架的核心部分，因为游戏作者希望保持简洁。这是 github 上的模块页面：[https ://github.com/loicdescotte/Play2-HTML5Tags](https://github.com/loicdescotte/Play2-HTML5Tags)

# node.js - 有没有人在 node-js 中找到或开发了一个好的 couchdb 管理器？

> ID：11952149
> 
> 赞同：1
> 
> 时间：2012-08-14T12:19:32.843
> 
> 标签：node.js, couchdb

我想用一个好看的 nodejs 管理器来管理我的 couchdb。

它应该具有以下功能：

*   创建文档。
*   删除文档。
*   转储整个数据库
*   备份整个数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:42:05.940

[Futon](https://www.npmjs.org/package/futon)，内置管理器具有您需要的所有功能。Futon 有一个 Web 界面，可以通过运行`couchdb`然后将您的 Web 浏览器指向`http://localhost:5984/_utils/`

# java - JPersistentTree (JTree, boundtree) 扩展给定节点的路径

> ID：11952158
> 
> 赞同：1
> 
> 时间：2012-08-14T12:19:50.090
> 
> 标签：java, database, swing, jtree, expand

我正在尝试使用[**这个包**](https://sites.google.com/site/uhilger/artikel_index/boundtree)来实现对商店类别的 CRUD 操作。我不知道在哪里可以找到有使用这个包经验的人，所以我决定在这里问。

我想添加一个快速搜索选项，用户可以在不浏览树的情况下搜索类别，并且选定的路径和节点在 JTree 上展开。

到目前为止，我已经完成了以下工作：

```
ArrayList<FpsInventoryCategory> path;

    // recursive method to find the path to the root of a selected node
    private void findTreePath(FpsInventoryCategory currentNode) throws StorageException{
        Object parentId = currentNode.getParentId();
        FpsInventoryCategory parentNode = (FpsInventoryCategory) store.getItem(parentId);
        if (parentNode.isRoot()){
            path.add(0, parentNode);
        } else {
            path.add(0, parentNode);
            findTreePath(parentNode);
        }

    } 
```

FpsInventoryCategory 实现 HierarchialItem。path 是 FpsInventoryCategory 的 ArrayList。这很好用，我能够获得所需的路径。

我遇到的问题是理解包以便确定如何扩展节点和/或 TreePath。我最初尝试通过 TreePath，但后来意识到，由于 JPersistentTree 的整个想法是动态加载数据，因此 JTree 不会有超过第一行子节点的数据。这是一个正确的假设吗？

如果是这样，那么我假设我必须沿着我尝试的路径加载孩子，如下所示：

```
private void viewTreeNodeAndPath(Long id2) throws StorageException {
        // TODO Auto-generated method stub
gui.getTreeInventoryCategory().getModel().getRoot();
            path = new ArrayList<FpsInventoryCategory>();
            store = gui.getStore();
            FpsInventoryCategory startNode = (FpsInventoryCategory) store.getItem(id);
            path.add(startNode);
            findTreePath(startNode);
            DynamicTreeNode currentTreeNode;
            Iterator it = path.iterator();
            int i = 0;
            FpsInventoryCategory temp;
            while(it.hasNext()){
                temp = (FpsInventoryCategory) it.next();
                System.out.println("temp cat:" + temp.getName());
                currentTreeNode = new DynamicTreeNode(store, temp);
                currentTreeNode.loadChildren();
                gui.getTreeInventoryCategory().expandRow(i);
                i++;
            }

//      selectedTreePath = new TreePath(dynamicNodePath);
//      System.out.println(selectedTreePath);
//      gui.getTreeInventoryCategory().setSelectionPath(selectedTreePath);
//      
//      gui.getTreeInventoryCategory().expandPath(selectedTreePath);

    } 
```

^ 注释掉了路径选择，因为它没有产生结果。这同样行不通。

知道如何让树扩展吗？甚至我可以从哪里获得有关此问题的更多信息？

请随时给我建议或让我知道在哪里可以找到解决此问题的方法。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:44:01.220

好的......让它工作。这是代码。在编码之间做一些其他的事情，所以可能会留下一两件事。

我会先提关键字段（全局变量），然后再指出相关方法。这是来自控制器，MVC 模式。

```
private FpsInventoryCategoryTreeAdapter store;
    ArrayList<FpsInventoryCategory> path;
    TreePath selectedTreePath;
    private Long id;

// expand path and select node in JPersistentTree of category being searched
    private void viewTreeNodeAndPath() throws StorageException {
        // TODO Auto-generated method stub
        path = new ArrayList<FpsInventoryCategory>();
        store = gui.getStore(); // get store from gui (view contains HierarchicalDataStore implementation for JPersistentTree)
        FpsInventoryCategory startNode = (FpsInventoryCategory) store.getItem(id);  // id is the selected node as per quick search
        path.add(startNode);    // add selected node to path
        // find path from root to selected node
        findTreePath(startNode);
        int pathLength = path.size(); 
        TreeModel model = gui.getTreeInventoryCategory().getModel();
        DynamicTreeNode rootNode = (DynamicTreeNode) model.getRoot();
        // traverse through JPersistentTree from root to searched node, returning path to selectedTreePath
        searchThroughTree(model, rootNode, pathLength, 1);
        // expand selectedTreePath (from root to searched node)
        gui.getTreeInventoryCategory().setSelectionPath(selectedTreePath);
        gui.getTreeInventoryCategory().scrollPathToVisible(selectedTreePath);
    }

    // recursive method to find the path to the root of a selected node
    private void findTreePath(FpsInventoryCategory currentNode) throws StorageException{
        Object parentId = currentNode.getParentId();
        FpsInventoryCategory parentNode = (FpsInventoryCategory) store.getItem(parentId);
        if (parentNode.isRoot()){
            path.add(0, parentNode);
        } else {
            path.add(0, parentNode);
            findTreePath(parentNode);
        }

    }

    // recusrive method to get TreePath of searched node
    // pathSize: number of nodes from root to searched path
    // pathPosition: index of current node in path
    private void searchThroughTree(TreeModel model, DynamicTreeNode rootNode, int pathSize, int pathPosition){
        int childCount = model.getChildCount(rootNode);
        for (int i = 0; i < childCount; i++){
            DynamicTreeNode childNode = (DynamicTreeNode) model.getChild(rootNode, i);
            if (model.isLeaf(childNode)){
                if (path.get(pathPosition).getId() == childNode.getUserObject().getId()){
                    selectedTreePath = getPath(childNode);
                    break;
                }
            } else {
                if (path.get(pathPosition).getId() == childNode.getUserObject().getId()){
                    if (pathPosition + 1 == pathSize){
                        selectedTreePath = getPath(childNode);
                        break;
                    } else {
                        pathPosition = pathPosition + 1;
                        searchThroughTree(model, childNode, pathSize, pathPosition);
                    }   
                }
            }
        }
    }

    // find path from root to node
    public TreePath getPath(DynamicTreeNode node){
        List list = new ArrayList();
        // Add all nodes to list
        while (node != null){
            list.add(node);
            node = (DynamicTreeNode) node.getParent();
        }
        Collections.reverse(list);
        // Convert array of DynamicTreeNodes to TreePath
        return new TreePath(list.toArray());
    } 
```

在我的机器上工作正常。

# iphone - 我可以将图像从设备的文档目录加载到 AsyncImageView 吗？

> ID：11952162
> 
> 赞同：0
> 
> 时间：2012-08-14T12:20:00.737
> 
> 标签：iphone, objective-c, ios, ipad, xcode4

实际上，我不确定这一点，但我有这种情况，我检查互联网是否可用，并相应地将图像加载到 AsyncImageView 中。当我从互联网加载任何图像时它工作正常，但是可以将本地图像加载到 AsyncImageView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:04:30.593

实际上我得到了解决这个问题的方法。我所做的就是这个

```
 NSURL *theURL = [NSURL fileURLWithPath:@"/Users/gaurav/Library/Application Support/iPhone Simulator/5.0/Applications/AC6E9B2E-DB25-4933-A338-755B134E1A61/Documents/Attachment290_294_1344928691.jpeg"];
    NSLog(@"local URl is::%@",theURL);
    [self.asyncimageview loadImageFromURL:theURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:25:28.257

也许以下内容会对您有所帮助。

1.  创建一个新文件

2.  继承自 UIImageView

3.  复制/粘贴以下代码。

    # 进口

    # 导入“ASIHTTPRequest.h”

    @interface AsynchronousImageView : UIImageView{ NSMutableData *data; UIActivityIndi​​catorView *activityIndi​​cator; NSString *urlString; // 图像缓存字典的键 ASIHTTPRequest *requestLocal; @property(nonatomic,assign) UIActivityIndi​​catorView *activityIndi​​cator;

    *   (void)loadImageFromURLString:(NSString *)theUrlString;
    *   (void)loadImageFromNSURL:(NSURL *)theUrl;
    *   (void)loadImageFromFile:(NSString *)filePath; -（无效）showLoader；-（无效）停止加载器；@结尾
4.  然后在 .m 文件中粘贴以下内容。

    # 导入“AsynchronousImageView.h”

    # 导入“ASIDownloadCache.h”

    @implementation AsynchronousImageView @synthesize activityIndi​​cator;

    *   (id)initWithFrame:(CGRect)frame { self = [super initWithFrame:frame]; if (self) { // 初始化代码 //[self setContentMode:UIViewContentModeScaleAspectFit]; } 返回自我；} -(void)dealloc { if (requestLocal) { [requestLocal setDelegate:nil]; } requestLocal = nil; 活动指标 = 无；[超级释放]; } /* // 仅覆盖 drawRect: 如果您执行自定义绘图。// 空实现会对动画期间的性能产生不利影响。
    *   (void)drawRect:(CGRect)rect { // 绘图代码 } */ -(void) showLoader{ if(activityIndi​​cator == nil){ activityIndi​​cator = [[UIActivityIndi​​catorView alloc]initWithActivityIndi​​catorStyle:UIActivityIndi​​catorViewStyleWhiteLarge]; [自我 addSubview:activityIndi​​cator]; activityIndi​​cator.frame = CGRectMake(self.bounds.size.width / 2.0f - activityIndi​​cator.frame.size.width /2.0f, self.bounds.size.height / 2.0f - activityIndi​​cator.frame.size.height /2.0f, activityIndi​​cator.frame.size.width,activityIndi​​cator.frame.size.height); 【活动指标发布】；} [activityIndi​​cator startAnimating]; } -(void) stopLoader{ if(activityIndi​​cator){ [activityIndi​​cator stopAnimating]; [activityIndi​​cator removeFromSuperview]; 活动指标 = 无；} }
    *   (void)loadImageFromFile:(NSString *)filePath { UIImage *img = [UIImage imageWithContentsOfFile:filePath]; [自我设置图像：img]；[自停止加载器]; }
    *   (void)loadImageFromURLString:(NSString *)theUrlString { / *if (requestLocal) { [requestLocal setDelegate:nil]; }* / requestLocal = nil; [self showLoader]; NSURL *url = [NSURL URLWithString:theUrlString]; requestLocal = [ASIHTTPRequest requestWithURL:url]; [requestLocal setDelegate:self]; [requestLocal setDidFailSelector:@selector(requestFailed)]; [requestLocal setDownloadCache:[ASIDownloadCache sharedCache]]; [requestLocal setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy]; [requestLocal startAsynchronous]; self.image = [UIImage imageNamed:@"playerDefault.png"]; }

    -(void)loadImageFromNSURL:(NSURL *)theUrl { if (requestLocal) { [requestLocal setDelegate:nil]; } requestLocal = nil; requestLocal = [ASIHTTPRequest requestWithURL:theUrl]; [requestLocal setDelegate:self]; [requestLocal setDidFailSelector:@selector(requestFailed)]; [requestLocal startAsynchronous]; }

    *   (void)requestFinished:(ASIHTTPRequest *)request { requestLocal = nil; [自停止加载器]; UIImage *tempArt = [UIImage imageWithData:[request responseData]]; if (tempArt) { self.image = tempArt; } [数据发布]; 数据=无；} -(void)requestFailed:(ASIHTTPRequest *)request{ requestLocal = nil; [自停止加载器]; 【数据发布】；数据=无；} @结尾
5.  然后在你的 ViewComtroller .h 中导入 AsycnhronousImageView 类并写下这个

    像这样制作图像的 IBOutlet。

    IBOutlet AsycnhronousImageView *image;

6.  更改 xib AsycnhronousImageView 中的类而不是 UIImage View

7.  调用以下方法

    *   (void)loadImageFromFile:(NSString *)filePath;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:47:01.580

我猜你的意思是 Nick Lockwood 的[AsyncImageView ？](https://github.com/nicklockwood/AsyncImageView/)这只是 UIImageView 的一个类别，所以当你已经有了图像时，为什么不直接设置图像属性呢？

# menu - 带图像的 Drupal 菜单

> ID：11952165
> 
> 赞同：1
> 
> 时间：2012-08-14T12:20:10.110
> 
> 标签：menu, drupal-6

我在 Drupal 6.26 项目中工作。我想知道，如何使用 drupal 6.26创建菜单，如[http://www.honda.com.my/ 。](http://www.honda.com.my/)哪个模块有用。我使用了名为 megamenu 的模块，但该模块我无法上传图像并使用菜单显示这些图像。如何显示带有菜单名称的图像以及阅读更多内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:32:26.073

在我的一个项目中，我有相同的要求，我使用[菜单图标](http://drupal.org/project/menu_icons)模块。

> 此模块允许您在菜单项的配置表单中上传图像。
> 
> 上传图片后，图标数据将添加到菜单链接的选项数组中。
> 
> 当菜单链接通过主题层时，它将接收一个额外的类，默认情况下，该类用于将图像作为背景图像附加到相应的菜单项。这些类名也与[Nice Menu 的](http://drupal.org/project/nice_menus).

希望你会得到你想要的。

# google-fusion-tables - 使用 Fusion Tables 时有哪些技术限制？

> ID：11952166
> 
> 赞同：11
> 
> 时间：2012-08-14T12:20:10.217
> 
> 标签：google-fusion-tables

我正在寻找有关使用 Fusion Tables 时的技术限制的信息： - - Fusion Table 中可以存储多少行 - 可以同时针对 Fusion Table 运行多少查询（读/写）。[我在https://developers.google.com](https://developers.google.com)上找不到任何信息 我问了一位 Google 代表，他告诉我 Fusion Tables 仍然是一个实验性/测试版产品，我将在 stackoverflow 上查看。

我计划开发一个应用程序，用户将在其中更新特定位置的属性。我想使用 Fusion Tables，以便将位置及其属性存储在 Fusion Table 中。该应用程序将涉及大量的表读取/更新（一分钟内最多500 000个读取/更新查询），Fusion Table中最多注册3 000 000个位置，所以我想知道我是否会受到技术的限制，技术上或关于服务条款。

我的印象是 Fusion Tables 不应该以如此高的频率更新。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T14:37:19.947

有许多限制需要考虑：

*   25,000 个请求/天
*   每张表 250MB 空间
*   Fusion Tables 中的数据单元格最多支持 100 万个字符
*   [插入限制](https://developers.google.com/fusiontables/docs/v1/using#insertRow)
    *   单个 HTTP 请求的最大数据大小为 1MB
    *   添加的表格单元格总数不能超过 10,000 个单元格（不是行！）
    *   单个请求最多可包含 500 条`INSERT`语句
*   只有前 100,000 条记录被映射或包含在空间查询结果中
*   在地图上查看时，地图图块可能会超过每图块 500 个要素的限制，并且要素将从地图中删除

请注意，上述最后两个限制在文档的[弃用部分中进行了描述](https://developers.google.com/fusiontables/docs/developers_guide#Geo)，我找不到关于它的更新文档。也许限制不再存在，或者只是尚未记录在案。但是，如果您使用[FusionTablesLayer](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)在 Google 地图上显示数据，这些限制肯定适用。

[FusionTablesLayer 限制](https://developers.google.com/maps/documentation/javascript/layers#FusionTablesLimits)：

*   最大限度。每张地图 5 层
*   只能将样式应用于其中一个图层
*   最大限度。该图层可应用 5 种样式
*   只有表中的前 100,000 行数据被映射或包含在查询结果中
*   地图图块可能超过每个图块 500 个要素的限制，并且要素将从地图中删除

如果您是[Google Maps Premier](http://www.google.com/enterprise/earthmaps/maps.html)客户，可以修改某些限制。

# javascript - 使用文本内容创建新的 Google Drive 文件 (javascript)

> ID：11952169
> 
> 赞同：2
> 
> 时间：2012-08-14T12:20:25.463
> 
> 标签：javascript, google-drive-api, google-drive-realtime-api

我可以使用 javascript Google API 来验证我的 webapp 并在 Google Drive 中创建新文件，正如[这篇文章中](https://stackoverflow.com/questions/11280381/google-drive-api-javascript-insert-file)所解释的那样：

```
function createNewFile() {
    gapi.client.load('drive', 'v2', function() {
        var request = gapi.client.request({
            'path': '/drive/v2/files',
            'method': 'POST',
            'body':{
                "title" : "test.txt",
                "description" : "Some"
            }
        });
        request.execute(function(resp) { console.log(resp); });
    });
} 
```

它会在云端硬盘中创建一个空文件。但我不知道如何通过向其添加文本内容（例如“blablabla”）来创建新的非空文件。有人可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:27:16.170

签出我为在插入后更新文件所做的更新功能 [如何通过 API 向 Google Drive 添加/创建/插入文件？](https://stackoverflow.com/questions/10317638/inserting-file-to-google-drive-through-api/13985931#13985931)

阅读页面上的主要答案，这也提示在一次调用 API 中创建/插入。

# c++ - 当操作数小于 129 时，C++ 浮点数不会改变

> ID：11952185
> 
> 赞同：-6
> 
> 时间：2012-08-14T12:21:22.787
> 
> 标签：c++, floating-point

在这里，我从浮点变量中减去 128.0 和 129.0 2M 次。

```
#include "stdafx.h"
#include<stdlib.h> //is this the problem? Or am i doing something wrong?
int main()
{

float d1=3.0e9;
printf("\n before: %f \n",d1);
for(int i=0;i<2000000;i++) d1=d1-128.0; //doesnt change!    
printf("\n after : %f \n",d1);
for(int i=0;i<2000000;i++) d1=d1-129.0; //does change!
printf("\n after2: %f \n",d1);

//is 129 is the minimum step for sub/add ? Isnt this wrong? 
//Is this about exponential part 10^9 ?
getchar();
return 0;
 } 
```

输出：

![在此处输入图像描述](../Images/6c8a8f4defb92478e5ffeed3e9e6039b.png)

**问题：**为什么这个浮点数不会通过添加/替换小于 129 的操作数来改变？因为我选择了初始浮点值 3.0e9 ？

当我选择初始值 3.0e10 时，初始化和减法都不起作用。

当我选择初始值 3.0e8 时，最小变化是 17。所以 16 不会改变。:(

所以，谢谢你的回答，。当初始值变小时，最小步长根据**精度**变小。

VC++ 2010 速成 . windows xp 32位。奔腾-m

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:25:19.807

这是因为你的初始值。浮点数只能包含少量数字，因此它不能表示运算结果，它会将其四舍五入到最接近的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T12:26:10.367

使用`double`而不是`float`.

然后了解“精度”的概念。

*   [http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

类型`float`适用于大约 9 位小数。32位浮点数的完整描述在这里：

*   [http://en.wikipedia.org/wiki/Single-precision_floating-point_format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T12:30:35.410

[我们可以通过查看32 位 float](http://en.wikipedia.org/wiki/Single_precision)的解剖结构来了解发生了什么。`3.0E9`IEEE754 格式的值为`0x4F32D05E`，指数值为 31（您可以使用[此在线计算器](http://babbage.cs.qc.cuny.edu/IEEE-754.old/Decimal.html)查找该值）。

现在我们为尾数留下了 23 个子单位二进制数字。这意味着最小的增量，即尾数的相邻值之间的差异，是一个二进制标度为 31 − 23 = 8 的数字。由于 128 是 2 ⁷，我们看到它小到足以从尾数，而 129 大到可以看到。

# hibernate - 休眠问题

> ID：11952186
> 
> 赞同：0
> 
> 时间：2012-08-14T12:21:26.057
> 
> 标签：hibernate, jpa

我开始学习hibernate，我想澄清一些简单的谷歌搜索无法解决的问题。这些问题涉及 deleteOrphan、级联类型和不同关联映射类型的交互。让我开始吧。提前真诚感谢。

```
@Entity
@Table(name = "t_member", schema = "church")
public class Member implements Serializable {
    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
        @JoinTable(name = "t_event_members", joinColumns = {
                    @JoinColumn(name = "member_id")
                }, inverseJoinColumns = {
                    @JoinColumn(name = "event_id")
                })
    private Set<Event> events;
}

@Entity
@Table(name = "t_event", schema = "church")
public class Event implements Serializable {
    @ManyToMany(fetch = FetchType.LAZY, mappedBy = "events", 
            cascade = CascadeType.ALL)
        private Set<Member> members;
} 
```

1.  成员是拥有方。在活动会话期间，我检索了一个成员。如果我从成员集合中删除一个事件并执行 saveOrUpdate 是否会从该事件中删除相应的成员？
2.  在这种情况下，“拥有方”如何影响级联？
3.  当我们将 orphanDelete 与 CascadeType 混合时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:29:38.323

1) 在这种情况下，简单地从成员中删除事件将无效，因为您没有映射孤立删除。从成员中删除事件的行为使该事件成为孤立事件，这是术语“孤立删除”的基础。并且由于您“在活动会话期间检索了该成员”，因此该成员是“受管理的”；无需调用 saveOrUpdate。托管对象的状态由 Hibernate 跟踪。

2) 大多数级联类型在关联的任一侧都有效（孤儿删除是例外）。级联表示将刚刚对一件事执行的操作级联到另一件事。拥有与否描述了 Hibernate 将使用哪一方来驱动数据库中该关联的状态。为了说明最后一点，这里有双向多对多。't_event_members' 表中的行在内存中表示两次：一次作为 Member.events 中的元素，再次作为 Event.members 中的元素。拥有本质上定义了在这两个可能不同的情况下信任哪一方。

3）孤儿删除实际上是Hibernate的级联类型。JPA 将它与级联类型（作为注释属性）分开定义，因此我们显然也支持它。

顺便说一句，孤儿删除和多对多不兼容。

# android - Android 读取 XML 优化

> ID：11952191
> 
> 赞同：1
> 
> 时间：2012-08-14T12:21:33.230
> 
> 标签：android, xml, parsing, stream

我正在使用以下代码从存储在我的资产文件夹中的 XML 文件中读取数据。这是一个简单的 XML 文件，其结构如下。该文件有大约 10 个节点（总共大约 100 行）。但在我的 Galaxy S2 上，这段代码需要 10 秒才能执行。有没有办法更快地做到这一点？谢谢你！XML结构：

```
 <?xml version="1.0" encoding="utf-8"?>
<root>
    <node>
        <name>test</name>
        <picture>test1</picture>
        <thumbnail>asa</thumbnail>
        <location>fdsf</location>
        <description>sdfsd</description>
    </node>
    <node>
        <name>test</name>
        <picture>test1</picture>
        <thumbnail>asa</thumbnail>
        <location>fdsf</location>
        <description>sdfsd</description>
    </node>
    <node>
        <name>test</name>
        <picture>test1</picture>
        <thumbnail>asa</thumbnail>
        <location>fdsf</location>
        <description>sdfsd</description>
    </node>

    .......

</root> 
```

和代码片段：

```
String XMLText = "";    
InputStream raw = getApplicationContext().getAssets().open(fileName);
            InputStreamReader inputStreamReader = new InputStreamReader(raw);
            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

            String line = ""; 
            while ((line = bufferedReader.readLine()) != null) {
                XMLText += line;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:25:18.720

您应该必须使用 SAX 解析器或[XmlPullParser](http://developer.android.com/training/basics/network-ops/xml.html)。如果您想将数据连接/附加到字符串，请使用`StringBuilder`而不是`String`类型。

# javascript - jQuery jeditable 触发点击

> ID：11952196
> 
> 赞同：3
> 
> 时间：2012-08-14T12:22:01.527
> 
> 标签：javascript, jquery, jquery-plugins, jeditable, jquery-events

我需要在我的应用程序中使用内联编辑。为此，我使用 jQuery 的 Jeditable 插件。

我只想在单击元素时触发元素的可编辑模式。这是我的代码不起作用：

```
var tet = "";
$(".edit-client").click(function(event) {
    tet = "#"+event.target.id;
    //alert(tet);
});

$(tet).editable("/bestcredit/admin.php/request/editClient", {
    submitdata : function (value,settings){
                    return {"Client[id]":'.$model->client->id.' };
                },

    //indicator : "Saving...",
    //tooltip   : "Click to edit...",
    submit   : "OK",
    name : "Client["+tet.substr("1")+"]"
    //alert(1);
 }); 
```

如何添加此功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T15:35:26.603

有很多方法可以做到这一点，这完全取决于您的 HTML，但例如，如果您有以下 HTML：

```
<div class="edit" id="unique_id">Editable text</div> 
<a href="#" class="edit_trigger">Edit me!!</a> 
```

然后您可以使用以下 JavaScript：

```
/* Bind Jeditable instances to "edit" event. */
$(".edit").editable("http://www.example.com/save.php", {
    event     : "edit"
});
/* Find and trigger "edit" event on correct Jeditable instance. */
$(".edit_trigger").bind("click", function() {
    $(this).prev().trigger("edit");
}); 
```

# c# - 图片网址无效

> ID：11952199
> 
> 赞同：0
> 
> 时间：2012-08-14T12:22:14.617
> 
> 标签：c#, image, sharepoint, path

我有这段代码，它应该接收一个作为字符串的 URL，并且这个 URL 应该设置为 Image Url：-

这是代码

```
foreach (SPListItem item in oSpListCln)
{
    if (item.Title.Equals("Rubicks"))
    {
        Title.Text = item.Title;
        lblSyp.Text = item["Sypnosis"].ToString();
        PicPic.ImageUrl = item["PicPic"].ToString();
    }
} 
```

的`item["PicPic"]`值为`http://www.froot.nl/wp-content/uploads/quick-brown-fox-froot.jpg,http://www.froot.nl/wp-content/uploads/quick-brown-fox-froot.jpg`

这不起作用是因为我将字符串设置为图像的 URL，因为当我硬编码它工作的链接时，但是当我将链接设置为字符串并尝试时，它没有。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:49:25.893

鉴于返回的字符串是逗号分隔的，如您在评论中所写，您可以执行以下操作：

```
string[] urlParts = item["PicPic"].ToString().Split(',');
PicPic.ImageUrl = urlParts[0]; 
```

# javascript - 在 iPhone 上使用 Safari 确定已安装的应用程序

> ID：11952202
> 
> 赞同：1
> 
> 时间：2012-08-14T12:22:31.547
> 
> 标签：javascript, iphone, safari

我想在 iPhone Safari 上使用自定义 URL 方案确定已安装的应用程序。

你可能认为这是不可能的，但 JavaScript 帮助我解决了这个问题。

```
 <script>(function(){

var fallbackLink = '<?=$info['failed_url']?>'+window.location.search+window.location.hash;

var isiOS = navigator.userAgent.match('iPad') || navigator.userAgent.match('iPhone'),
    isAndroid = navigator.userAgent.match('Android');

if (isiOS || isAndroid) {
  document.getElementById('loader').src = '<?=$info['scheme']?>://'+window.location.search+window.location.hash;

  fallbackLink = isAndroid ? '<?=$info['failed_url']?>' :
                             '<?=$info['failed_url']?>' ;
}
window.setTimeout(function (){ window.location.replace(fallbackLink); }, 1000);

})();</script> 
```

这是我的脚本。

我已经知道 iPhone 应用程序的自定义 URL 方案。如果它存在于 iPhone 上，它会成功启动应用程序。但是，如果 iPhone 没有该应用程序，它会重定向到不同的页面。

我在失败的网页上放置了某些代码以注意到用户没有应用程序。在我发现这个之前，我的计划是完美的。

**即使应用程序在超时后在 iPhone 上启动，JavaScript 重定向仍然有效。**

如果 iPhone 启动应用程序，有没有办法停止 JavaScript？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:05:02.033

当窗口失去焦点时，您始终可以取消超时。

```
var countdown = window.setTimeout(function (){
    window.location.replace(fallbackLink);
}, 1000);

window.addEventListener("blur", function (){
    window.clearTimeout(countdown);
}, false); 
```

# string - 解析布尔表达式python

> ID：11952207
> 
> 赞同：0
> 
> 时间：2012-08-14T12:23:10.897
> 
> 标签：string, parsing, comparison, boolean-logic, separator

我有一个布尔表达式作为字符串，如：`"Hello, world/earth , how"`等等 where `/`is`OR`和`,`is`AND`

我想将一个字符串与这个布尔表达式进行比较，`True`如果字符串包含则返回`"Hello" AND ("world" OR "earth") AND "how"`

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:34:18.313

如果您现在了解有限自动机，您可以构建一个图[（python-graph） ，其中每个单词都是一个节点，每个节点都指向下一个可能的单词。](http://code.google.com/p/python-graph/)在您的示例中，“Hello”将指向“world”和“earth”，这些将指向“how”。那时应该很容易浏览您的图表。

# java - 在 JSF 中更改语言而不更改语言环境

> ID：11952208
> 
> 赞同：1
> 
> 时间：2012-08-14T12:23:15.787
> 
> 标签：java, jsf, localization, translation

我目前有一个 JSF 应用程序，它根据用户选择的语言设置区域设置。He gets a dropdown, and when choosing English, I set the locale to en, etc. This works very nice with number formats as well as with the language strings loaded from my ResourceBundle.

所以对于 en，我得到英语单词和一个 . 作为小数分隔符。对于 fr，我得到法语和 a ，作为小数分隔符。

但是，现在有一个要求，对于这个网站，数字格式必须始终有一个 , 作为小数分隔符。所以，我正在考虑将语言环境固定为 fr。

用户仍然必须能够更改他的语言。那么，在 JSF 中是否可以在不更改语言环境的情况下加载不同的语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:08:46.337

接缝您需要特殊的格式化解决方案，因此覆盖格式化程序可能是更好的解决方案。我认为 JSF 支持替换默认的数字格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:27:16.520

只需明确指定您在那里使用`locale`的标签的属性。`<f:convertNumber>`

例如

```
<f:convertNumber ... locale="fr" /> 
```

或类似的东西

```
<f:convertNumber ... locale="#{app.defaultNumberLocale}" /> 
```

[`UIViewRoot#getLocale()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#getLocale%28%29)如您所见，否则它确实会默认为。

### 也可以看看：

*   [`<f:convertNumber>`标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertNumber.html)- 读取`locale`属性

# google-maps - 如何在没有纬度和经度的情况下在谷歌地图上显示数据？

> ID：11952210
> 
> 赞同：0
> 
> 时间：2012-08-14T12:23:21.687
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google Maps API 向我的用户显示一些信息。但我希望数据是特定于国家和州的。现在有没有一种方法可以在不提供 LAT 和 LONG 的情况下向州和国家/地区显示数据？

我想突出显示状态，一旦使用单击它会显示一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:29:53.077

Google Maps API v3 使用地理坐标（纬度和经度）作为地图上的位置信息。要在地图上定位州和/或国家多边形，您需要它们的数据（需要包括它们的地理坐标）。有公开可用的多边形，自然地球数据集是 FusionTables 中可用的一种。

看到[这个类似的问题](https://stackoverflow.com/questions/11831968/google-maps-single-country-boundary)

或者[这个](https://stackoverflow.com/questions/11076651/color-in-country)

# javascript - Spring 3.1-找不到javascript文件-404错误

> ID：11952212
> 
> 赞同：3
> 
> 时间：2012-08-14T12:23:27.810
> 
> 标签：javascript, spring, jsp, spring-mvc

我在文件夹 WebContent/resources/js/test.js 中有一个 js 文件。我正在尝试在 jsp 中包含相同的文件。但是jsp文件找不到js文件（浏览器控制台出现404错误）。我已经在 SO 中提出了几个问题：

[SpringMVC 是否可以配置为处理所有请求，但排除静态内容目录？](https://stackoverflow.com/questions/1234298/can-springmvc-be-configured-to-process-all-requests-but-exclude-static-content)

[调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-css-and-images-when-calling-a-servlet-which-forwards-to-a-j)

[STS Spring MVC：如何在 JSP 中包含 JS 文件](https://stackoverflow.com/questions/7941880/sts-spring-mvc-how-to-include-a-js-file-in-a-jsp)

但仍然没有帮助。这是我的代码：

在应用程序上下文中，我使用的是 mvc:resource 标记。

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

在我的jsp中

```
<script src="${contextPath}/resources/js/test.js" type="text/javascript"></script> 
```

尝试给 src 值

```
 <c:url> 
```

也。

我的 web.xml 有

```
<servlet-mapping> 
<servlet-name>TestProject</servlet-name> 
<url-pattern>/</url-pattern>
</servlet-mapping> 
```

萤火虫 说

```
The requested resource (/resources/js/test.js) is not available. 
```

任何帮助，将不胜感激。

**更新**

firebug 中的 GET 请求 URL 是这样的

```
http://localhost:8080/TestProject/resources/js/test.js 
```

这样对吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:12:23.387

你需要做

```
<script src="<c:url value="/resources/js/test.js" />" type="text/javascript"></script> 
```

Spring 正在尝试从容器上下文根而不是应用程序上下文根中查找资源。

# java - 在检查 instanceof 时向上转换混淆

> ID：11952213
> 
> 赞同：1
> 
> 时间：2012-08-14T12:23:29.313
> 
> 标签：java, upcasting

```
class Animal
{

}

    class Dog extends Animal
    {

    }

    class main
    {
      public static void main(String args[])
    Animal g= new Dog();
    System.out.println(g instanceof Dog);      // 1st case

    System.out.println(g instanceof Animal);   // 2nd case

} 
```

问题：为什么在这两种情况下输出都是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:25:31.467

因为在运行时，由局部变量引用的对象是`g`类型的`Dog`（因此也是`Animal`, because `Dog extends Animal`，尽管您的示例中缺少该对象）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T12:25:38.477

这是作用中的多态性。见[这里](http://www.tutorialspoint.com/java/java_polymorphism.htm)和[这里](http://www.javapractices.com/topic/TopicAction.do?Id=31)。

如果您想避免这种行为，请使用`getClass()`而不是`instanceof`. 例如，请参阅我的答案[here](https://stackoverflow.com/questions/9257211/did-i-implement-equals-and-hashcode-correctly-using-google-guava/9258977#9258977)。

# php - 在 CodeIgniter 中点击 flash 正在加载 404 错误视图页面，而不是 flash 文件中的硬编码 URL

> ID：11952216
> 
> 赞同：0
> 
> 时间：2012-08-14T12:23:38.577
> 
> 标签：php, flash, .htaccess, codeigniter, swfobject

如果我使用 clicktag 参数，它可以正常工作，但是当 flash 文件不使用 clicktag 时，它会出错并且 codeigniter 尝试（在单击横幅后）加载一些 url，例如：

```
http://mywebsite.com/hardcodedaddressinflash.com 
```

而不仅仅是：

```
http://hardcodedaddressinflash.com 
```

如果它是纯 html 或 php 文件（不使用 CodeIgniter），它会很好用。

**我想我必须在 codeigniter 的 .htaccess 中为 swf 文件设置一些东西才能直接转到硬编码 URL 指向的位置，但是如何？**

有什么建议吗？

我尝试过 swgobject 并直接嵌入 swf 代码，但都给出了相同的结果。

但不知何故，如果我使用 clicktag 它工作正常。我完全不明白。

**编辑：我的 .htaccess 文件如下所示：**

```
RewriteEngine On

RewriteBase /

#Removes access to the system folder by users.

#Additionally this will allow you to create a System.php controller,

#previously this would not have been possible.

#'system' can be replaced if you have renamed your system folder.

RewriteCond %{REQUEST_URI} ^system.*

RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,

#such as an image or css document, if this isn't true it sends the

#request to index.php

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?/$1 [L]

# If we don't have mod_rewrite installed, all 404's

# can be sent to index.php, and everything works as normal.

# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php 
```

# java - 为什么我会收到“无效代码”警告？

> ID：11952217
> 
> 赞同：2
> 
> 时间：2012-08-14T12:23:39.940
> 
> 标签：java, warnings

```
 if (myCondition1 && myCondition2 && myCondition3)
    {
    ...
    } 
```

我编写了这段代码并成功运行。但我收到了关于（...）部分的警告。警告是“死代码”。这对我来说很有趣。你有什么想法吗？感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:26:18.377

“死代码”是永远不会执行的代码。很可能您的条件之一被硬编码到`false`某个地方，从而使条件内部`if`始终为假。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T12:26:36.183

死代码意味着它永远不会执行。例如

```
void someMethod() {
    System.out.println("Some text");
    return;
    System.out.println("Another Some text"); // this is dead code, because this will never be printed
} 
```

在您的条件检查的情况下相同，例如

```
String obj = "";
if(obj == null && obj.equals("")) { // here you get warning for Dead code because obj is not null and first condition is false so obj.equals("") will never evaluate

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:31:14.017

这可能由于多种原因而发生。整个`if`块都*死了*，由以下原因引起：

```
boolean condition1 = true;
boolean condition 2 = !condition1;

if(condition1 && condition2) {
    //This code is all dead
    Foo f = fooFactory();
    f.barr(new Bazz());
} 
```

或者您使用,或之`if`类的东西无条件地离开该块，如下所示：`return``break``continue`

```
for(Foo f : foos) {
    if(true) {
        f.barr(new Bazz());
        break;
        //Everything after here is dead
        System.out.println("O noes. I won't get printed :(");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:27:02.447

永远不会到达块内的代码。原因很可能是其中一个条件总是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T12:27:13.913

如果 myCondition1、myCondition2 和 myCondition3 中的一个或多个始终为 false（如 private const bool myCondition1 = false;），那么 if 中的代码将永远不会被执行。

# java - LinkedHashMap 按值排序

> ID：11952221
> 
> 赞同：0
> 
> 时间：2012-08-14T12:23:52.647
> 
> 标签：java, sorting, hashmap, linkedhashmap

我正在尝试找到一个类似于 LinkedHashMap 的结构，该结构按其值对其进行排序。我需要能够更新这些值。我会经常检查订单，所以我需要一个避免每次都对地图进行排序的解决方案。

像这样的东西：

```
DynamicSortedMap<String,Integer> map = new DynamicSortedMap<String,Integer>();
map.put("key1",4);
map.put("key2",3);
map.put("key3",6);
System.out.println("Map: "+map);
map.update("key1",1);
System.out.println("Update:"+map); 
```

输出：

```
Map: {key3=6, key1=4, key2=3}
Update: {key3=6, key2=3, key1=1} 
```

是否有任何结构允许这样做？如果没有，关于如何做的任何想法？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:28:10.770

我认为您正在寻找类似 TreeMap 的东西，它是按键排序的：

```
SortedMap<String, Integer> map = new TreeMap<String, Integer>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:17:36.973

尽管 LinkedHashMap 实际上可能是一个很好的基础，但不幸的是它在操作迭代顺序方面非常有限。我认为使用[apache common-collections](http://commons.apache.org/collections/)你会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:41:42.080

```
class SortValueMap extends HashMap<String,Integer>{

    @Override
    public Set<Entry<String,Integer>> entrySet() {
        List<Entry<String,Integer>> entries = new ArrayList<Entry<String,Integer>>(super.entrySet());
        Collections.sort(entries, new Comparator<Entry<String,Integer>>(){

            @Override
            public int compare(Map.Entry<String,Integer> o1, Map.Entry<String,Integer> o2) {
                return o1.getValue().compareTo(o2.getValue());
            }});
        return new LinkedHashSet<Entry<String,Integer>>(entries);
    }
 }
    ...
SortValueMap  map = new SortValueMap();
map.put("key1",4);
map.put("key2",3);
map.put("key3",6);
map.put("key4",1);
System.out.println("Map: "+map); 
```

# wpf - 根据数据类型更改面板模板

> ID：11952222
> 
> 赞同：0
> 
> 时间：2012-08-14T12:23:53.097
> 
> 标签：wpf

我有一个树视图（左侧）和包装面板（右侧）。来自 XMLDataProvider 的 Treeview 显示内容的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Documents>
  <DocFolder Name="Folder">
    <DocFolder DocFolderName="Subfolder">
      <DocItem DocItemName="item" />
    </DocFolder>
  </DocFolder>
</Documents> 
```

`{Binding ElementName=treeView1, Path=SelectedItem}`是否可以根据所选元素的类型（DocFolder 或 DocItem）在绑定到 TreeView 所选项目的 WrapPanel 中显示不同的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:34:50.060

可能是这样的吗？

```
<Control DataContext="{Binding ElementName=treeView1, Path=SelectedItem}"
         Template="{Binding ElementName=treeView1, Path=SelectedItem,
                Converter={StaticResource selectedItemToDataTemplateConverter}}" /> 
```

...和转换器的代码：

```
public class SelectedItemToDataTemplateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, 
                                                         CultureInfo culture)
    {
        if (value is DocFolder)
        {
           return new DocFolderUC(); // Your user control to display DocFolders..
        }
        else if (value is DocItem)
        {
           return new DocItemUC(); // Your user control to display DocItems..
        }
        [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:56:01.627

如果您将变形面板绑定到所选 TreeView 项的 DataContext，并使用两个类型化的 DataTemplate 自动显示不同的内容怎么办？IE`{Binding ElementName=treeView1, Path=SelectedItem.DataContext}`

# c# - 当窗口停靠到屏幕时，如何添加事件处理程序来捕获？

> ID：11952228
> 
> 赞同：0
> 
> 时间：2012-08-14T12:24:14.740
> 
> 标签：c#, wpf, event-handling, docking

我有一个方法可以在 WindowState 随 Window.StateChanged 更改时获取窗口的高度和宽度，但是当我使用 MS Windows 停靠来停靠 Window 时，应用程序检测到更改，运行事件处理程序，然后停靠并给了我错误的窗口高度/宽度。

```
 private void Window_Loaded(object sender, RoutedEventArgs e) {
      Window.StateChanged += new EventHandler(Window_StateChanged);
 }

 void Window_StateChanged(object sender, EventArgs e) {
      EnvironmentalVariables.Instance.WindowHeight = Application.Current.MainWindow.Height - EnvironmentalVariables.MENUBARHEIGHT;
      EnvironmentalVariables.Instance.WindowWidth = Application.Current.MainWindow.Width - EnvironmentalVariables.TREEWIDTH - 55;
 } 
```

手动状态更改

*   窗口状态更改
*   Window_StateChanged() 调用

使用 Windows UI 对接

*   Window_StateChanged() 调用
*   窗口状态更改

如何使事件处理程序在对接发生*后运行？*

为了清楚起见，我没有使用引用的 Windows 对接，我使用的是 Windows 7 中的操作系统对接，您可以将其拖到屏幕的一侧并为您对接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:30:54.017

你试过 ActualHeight\ActualWidth 吗？

编辑：（将答案移至此处）在“StateChanged”之后调用“SizeChanged”事件，大小应该没问题，然后您可以在那里更新大小

# javascript - 如何将文本正确带到 extjs4 中的文本字段

> ID：11952236
> 
> 赞同：1
> 
> 时间：2012-08-14T12:25:09.050
> 
> 标签：javascript, extjs, extjs4

我有一个带有一个文本字段的表单面板。我想做这样的事情：

```
fieldLabel : ___________________ in Kilos. 
```

如何将 Kilos 带入 extjs4 中文本字段的右侧？

使用`afterLabelTextTpl`不会削减它，我希望它在文本字段之后立即显示。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:38:30.930

这是我在应用程序中所做的一个示例：

```
{
    xtype: "fieldcontainer",
    layout: "column",
    width:  300,
    items: [
        {
            xtype: "textfield",
            fieldLabel: "fieldLabel",
            width: 200
        },
        {
            xtype: "displayfield",
            value: "in Kilos",
            width: 100
        }
    ]
} 
```

# java - 为什么 Javac 会为每个 Enum 字面量生成不同的类

> ID：11952241
> 
> 赞同：1
> 
> 时间：2012-08-14T12:25:26.607
> 
> 标签：java, enums

首先，我的评论涉及不包括自己的个人方法的简单枚举。我想不出任何技术上的原因，当主要的课程不够用时，创建这么多的小课程似乎很浪费。

```
DaysOfWeekEnum {
  MON,//
  TUES, //
} 
```

@Aman 感谢您指出我的错误，我一定是在查看输出目录时犯了错误。我会尽可能关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:47:08.740

枚举确实有方法，即使您没有声明它们。每个枚举都覆盖方法 from `java.lang.Enum`以给出枚举特定方法的合理实现，并且 javac 生成`valueOf`特定于该枚举的方法。当第一个用户方法添加到枚举时，必须重新编译所有使用枚举的类似乎也很愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:33:06.463

如果您使用 Jar，则只会创建一个文件。

您可以索引更多条目这一事实是一个优点，因为它允许它们以更精细的粒度延迟加载。

`.class`恕我直言，减少文件将一无所获

> 看起来很浪费

假设浪费 5 MB，您不需要的 10,000 个小文件的成本：0.022 美分。

假设您领取最低工资，您有多少时间值 0.022 美分：11 秒。

如果您尝试保存 10,000 个文件的时间超过 11 秒，那可能是一种浪费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:46:57.470

在线回答：所有枚举都隐式扩展`java.lang.Enum.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T08:30:25.493

枚举的重点是创建具有有限数量值的类型。在 Java 中做到这一点的唯一方法 -*对语言进行微小的更改*- 为枚举生成一个类，将值生成为该类的常量对象，并确保没有人可以实例化该类的其他对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T03:22:52.207

问这个q我犯了一个错误。忽略它是错误的！

# sql - 在 postgres 中选择行号

> ID：11952245
> 
> 赞同：123
> 
> 时间：2012-08-14T12:25:34.780
> 
> 标签：sql, postgresql, window-functions

如何在 postgres 中选择行号。

我试过这个：

```
select
    row_number() over (ORDER BY cgcode_odc_mapping_id)as rownum,
    cgcode_odc_mapping_id
  from access_odc.access_odc_mapping_tb
  order by cgcode_odc_mapping_id 
```

并得到这个错误：

```
错误：“over”处或附近的语法错误
第 1 行：选择 row_number() over (ORDER BY cgcode_odc_mapping_id) as

```

我检查了这些页面：[如何在 PostgreSQL 查询中显示行号？](https://stackoverflow.com/questions/3397121/how-to-show-row-numbers-in-postgresql-query)

* * *

这是我的查询：

```
 select row_number() over (ORDER BY cgcode_odc_mapping_id)as rownum,cgcode_odc_mapping_id from access_odc.access_odc_mapping_tb order by cgcode_odc_mapping_id 
```

这是错误：

错误：“over”处或附近的语法错误 LINE 1：选择 row_number() over (ORDER BY cgcode_odc_mapping_id)as

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-08-14T12:29:26.333

```
SELECT tab.*,
    row_number() OVER () as rnum
  FROM tab; 
```

[这](http://www.postgresql.org/docs/current/interactive/functions-window.html)是文档中的相关部分。

PS这实际上与引用问题中的答案完全匹配。

# wordpress - 尝试修改wordpress模板

> ID：11952248
> 
> 赞同：0
> 
> 时间：2012-08-14T12:25:57.507
> 
> 标签：wordpress, layout

当谈到 wordpress 时，我经常被卡住，因为我习惯于移动所有东西。下面是我的域名，并显示了我正在尝试修改的响应式主题：

[http://govansoven.co.uk/](http://govansoven.co.uk/)

现在我想让标题全宽并将容器保持在 960 像素，所以我计划简单地移动容器 div 的外部。但是我找不到显示此代码的文件。我在 wordpress 的编辑器中看不到它（我已经检查了明显的 index.php、header.php 等） 那么它会被 FTP 隐藏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:42:20.510

容器可能在 page.php

# android - 在居中的自定义视图周围创建边框并删除无用的 LinearLayout？

> ID：11952249
> 
> 赞同：2
> 
> 时间：2012-08-14T12:26:02.220
> 
> 标签：android, xml, android-layout, view, border

目前我有以下布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/editorRootView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout android:id="RL1"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1">
        <!-- LinearLayout needed so we have an border outside of the EditorView -->
        <LinearLayout android:id="LL1"
            android:background="@drawable/border"
            android:layout_centerInParent="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <xenolupus.EditorView
                android:id="@+id/editorView"
                android:layout_width="300dip"
                android:layout_height="216dip" />
        </LinearLayout>
    </RelativeLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/otherImage"
            android:layout_width="150dip"
            android:layout_height="60dip"
            android:text="@string/cardEditor_OtherImageButtonText" />
        <Button
            android:id="@+id/next"
            android:layout_width="150dip"
            android:layout_height="60dip"
            android:text="@string/cardEditor_NextButtonText" />
    </LinearLayout>
</LinearLayout> 
```

和使用的@drawable/border：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid 
        android:color="#FFFFFF" />
    <stroke 
        android:width="10dip" 
        android:color="#FF0099CA" />
    <padding 
        android:left="10dip" 
        android:top="10dip" 
        android:right="10dip"
        android:bottom="10dip" />
    <corners 
        android:radius="5dip" />
</shape> 
```

但是 Eclipse 警告我（带有 ! 的黄色三角形）RelativeLayout RL1 中的 LinearLayout LL1 是无用的，应该删除：

> 这个 LinearLayout 布局或者它的 RelativeLayout 父级是没用的；将背景属性转移到另一个视图。

由于需要 RelativeLayout 使 EditorView 居中，因此我尝试删除 LinearLayout LL1 并将 LinearLayout LL1 的 android:background 添​​加到 EditorView。然而，这样做会让边框消失在 EditorView 的内容后面。

是否有另一种方法可以在 EditorView 之外添加边框，或者我应该忽略警告？

问候异种狼疮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:08:33.400

```
 yes it's right, put the background inside your <xenolupus.EditorView 
        like this    
<xenolupus.EditorView
                    android:background="@drawable/border"
                    android:padding="10dp"
                    android:id="@+id/editorView"
                    android:layout_width="300dip"
                    android:layout_height="216dip" />

    and then  add gravity to it parent the RL1 layout  

    > android:gravity="center" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:17:46.113

View 默认可以绘制背景。如果你开发`EditorView`正确，你可以直接在 XML 中设置背景和填充：

```
<xenolupus.EditorView
    android:id="@+id/editorView"
    android:layout_width="300dip"
    android:layout_height="216dip"
    android:background="@drawable/border"
    android:padding="10dp" /> 
```

“正确开发”是指您的视图使用填充计算它的高度宽度（在**或**`onMeasure`方法`onSizeChanged`中）。换句话说：在计算大小时，您使用了方法。**`getPadding*()`**

 ****笔记**

别忘了打电话`super.onDraw()`！**

# magento - 如何在magento中兑换分配给客户的信用点

> ID：11952260
> 
> 赞同：0
> 
> 时间：2012-08-14T12:26:28.837
> 
> 标签：magento, credits

我有一个要求，我希望客户将信用积分用于未来的购买。我已在我的测试服务器上使用管理员向客户帐户发放信用积分，但我无法使用客户帐户兑换这些积分...

我发现了一些扩展，说它们提供了这个功能，但我不想为可能内置在 magento 中的东西付费。

请指导，谷歌似乎没有关于这个的任何答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T15:14:47.510

我不相信这是 Magento 的内置功能。我不得不对此进行大量研究 - 似乎必须制作插件才能使这成为可能。

我们发现的一个具体是：[客户信用延期](http://www.mageworx.com/customer-credit-magento-extension.html "客户信用延期")

它似乎涵盖了您需要做的所有事情。祝你好运！

# c# - 关于日期的 LINQ 查询问题

> ID：11952266
> 
> 赞同：1
> 
> 时间：2012-08-14T12:26:46.793
> 
> 标签：c#, linq

我想列出所有`CloseDate`大于 的记录`DateTime.Now`。

我已经为此编写了一个查询，但它没有获取`CloseDate`大于`DateTime.Now`.
请参阅下面的查询

```
 var query = (from x in objEntity.VacancyMsts
                     join o in objEntity.OrganizationMst on 
                     x.OrganizationID equals o.OrganizationId into vacorg
                     from o in vacorg.DefaultIfEmpty()
                     where x.Status == true && x.CloseDate >= DateTime.Now
                     select new VacancyMstDTO
                     {}); 
```

我的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:32:46.597

如果你有 FK 关系，你不需要加入这里

```
var query = from x in objEntity.VacancyMsts
            where x.Status && x.CloseDate >= DateTime.Now
            select new VacancyMstDTO
            {
                OrganizationName = x.OrganizationMst.Name,
                ...
            }; 
```

但是**我想知道**您是否真的希望在`CloseDate`今天之前，通常过去会发生关闭日期，不是吗？

而且，**也要小心**时区。我倾向于总是插入/更新数据库，`DateTime.UtcNow`并在阅读时应用用户时区......

# matlab - matlab获取char的值

> ID：11952267
> 
> 赞同：-3
> 
> 时间：2012-08-14T12:26:55.350
> 
> 标签：matlab, matlab-deployment

在 MATLAB 命令行中，当我键入变量 a 时，它会按预期给我值：

```
a =

            value_1
            value_2 
```

我想访问 a 的每个值，我尝试了 a(1) 但这给了我空 a 的类型是 1x49char。我怎么能得到 value_1 和 value_2 ？

```
 whos('a')
  Name      Size            Bytes  Class    Attributes

  a         1x49               98  char 
```

我从 xml 文件中得到一个：

```
<flag ="value">
    <flow>toto</flow>
     <flow>titi</flow>
 </flag> 
```

一个+0：

```
ans =    
    10  32  32   32  32  32  32  32  32  32  32  32  32  98,...
   111 111 108  101  97 110  95  84  10  32  32  32  32  32,...
   32   32  32   32  32  32  32  66  79  79  76  10  32  32,...
   32   32  32   32  32  32  32 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:25:38.753

也许`a`是一个带有换行符的字符串。要制作两个单独的变量，请尝试：

```
values = strtrim(strread(a, '%s', 'delimiter', sprintf('\n'))) 
```

`strread`将 a 拆分为单独的行，`strtrim`并将删除前导/尾随空格。然后您可以使用

```
values{1}
values{2} 
```

（请注意，您必须使用大括号，因为这是一个字符串元胞数组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:53:20.390

您如何阅读 xml 文件？如果您使用的是 xmlread，那么 MatLab 会在其中为您添加大量空白区域，这可能是您出现问题的原因。

[http://www.mathworks.com/matlabcentral/fileexchange/28518-xml2struct](http://www.mathworks.com/matlabcentral/fileexchange/28518-xml2struct)

这会将您的 xml 文件放入一个结构中，您应该可以在其中访问数组中的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:42:44.047

你似乎有一个有点不方便的字符数组。您可以通过执行@Richante 所说的操作以更易于管理的形式将此数组转换为：

```
strings = strread(a, '%s', 'delimiter', sprintf('\n')); 
```

然后你可以参考`toto`and `titi`by

```
>> b = strings{2}
b = 
toto

>> c = strings{3}
c = 
titi 
```

请注意，它`strings{1}`是空的，因为`a`以换行符开头。另请注意，您不需要`strtrim`-- 已经被处理过`strread`。您可以通过这样做来规避最初的换行符

```
strings = strread(a(2:end), '%s', 'delimiter', sprintf('\n')); 
```

*但只有在所有*情况下第一个换行符始终存在时，我才会这样做。我宁愿做

```
strings = strread(a, '%s', 'delimiter', sprintf('\n'));
strings = strings(~cellfun('isempty', strings)) 
```

最后，如果您更愿意使用`textscan`而不是`strread`，则需要额外执行 1 步：

```
strings = textscan(a, '%s', 'delimiter', sprintf('\n'));
strings = [strings{1}(2:end)]; 
```

# webos - 我们可以将基于 mojo 的应用程序转换为基于 enyo 的应用程序吗

> ID：11952271
> 
> 赞同：0
> 
> 时间：2012-08-14T12:27:06.637
> 
> 标签：webos

我有基于 mojo 的应用程序（.ipk），因此可以将这些 ipk 转换为基于 enyo 的 ipk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:54:07.373

不，你不能。Mojo 和 Enyo 是不同的 JavaScript 框架。我制作了一个名为 instagrio 的应用程序并尝试将其转换为 enyo，发现这几乎是不可能的。Enyo 没有场景，在 Enyo2.0 中剥夺了很多 webOS 的功能。

# hibernate - 无法使用@Formula 填充多对多关系的列

> ID：11952273
> 
> 赞同：0
> 
> 时间：2012-08-14T12:27:22.633
> 
> 标签：hibernate, many-to-many

我有 2 个类，评估和响应，与多对多关系相关联。评估代码如下所示：

```
@Entity
public class Evaluation implements Serializable {

private Long id;

@ManyToMany
public List<Reponse> getListOfReponses() {
    return listOfReponses;
}

@Formula("(SELECT COUNT(*) FROM Evaluation_Reponse er, Reponse r, WHERE er.Evaluation_id = id AND r.id = er.listOfReponses_id AND r.correct = 1)")
public Integer getNbCorrectAnswers() {
return nbCorrectAnswers; 
```

}

Correct 是 Reponse 的一个属性，是一个布尔值。

如您所见，我编写了一个休眠公式来填充 nbCorrectAnswers 列。但是，当我保存评估时，一切正常，除了 nbCorrectAnswers 列保持为空。

那么，你能告诉我公式有什么问题，或者如何正确填写我的整个表格吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:38:00.927

公式始终是只读的。hibernate 假设您有一些其他代码/实体可以插入这些值。AFAIK 公式也仅在从数据库加载时进行评估。

# ssl - 如何从现有证书 (abc.crt) 和 abc.key 文件创建密钥库？

> ID：11952274
> 
> 赞同：88
> 
> 时间：2012-08-14T12:27:23.110
> 
> 标签：ssl, keytool

我正在尝试将证书和密钥文件导入密钥库，但我无法做到这一点。

如何通过导入现有证书 (abc.crt) 和 abc.key 文件来创建密钥库？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-08-14T14:41:50.670

最简单的可能是使用 OpenSSL 创建一个 PKCS#12 文件：

```
openssl pkcs12 -export -in abc.crt -inkey abc.key -out abc.p12 
```

您应该能够使用`PKCS12`密钥库类型直接使用生成的文件。

如果你真的需要，你可以使用`keytool -importkeystore`（在`keytool`Java 6 中可用）将其转换为 JKS：

```
keytool -importkeystore -srckeystore abc.p12 \
        -srcstoretype PKCS12 \
        -destkeystore abc.jks \
        -deststoretype JKS 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-02-13T17:51:30.957

您必须使用 OpenSSL 和 keytool。

*CER 和 PVK 文件的 OpenSSL > P12*

> openssl pkcs12 -export -name **servercert** -in **selfsignedcert.crt** -inkey **serverprivatekey.key** -out **myp12keystore.p12**

*p12 的 Keytool > JKS*

> keytool -importkeystore -destkeystore **mykeystore.jks** -srckeystore **myp12keystore.p12** -srcstoretype pkcs12 -alias **servercert**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-29T08:15:23.317

添加到@MK Yung 和@Bruno 的答案.. 输入目标密钥库的密码。当我输入没有密码的命令时，我看到我的控制台挂起。

```
openssl pkcs12 -export -in abc.crt -inkey abc.key -out abc.p12 -name localhost  -passout pass:changeit 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-05T03:48:19.280

除了@Bruno 的回答，还需要提供`-name`for 别名，否则Tomcat 会抛出`Alias name tomcat does not identify a key entry`错误

示例命令： `openssl pkcs12 -export -in localhost.crt -inkey localhost.key -out localhost.p12 -name localhost`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-24T11:09:59.990

如果密钥库是用于 tomcat 的，那么在使用上述答案创建密钥库之后，您必须添加最后一步来为密钥创建“tomcat”别名：

```
keytool -changealias -alias "1" -destalias "tomcat" -keystore keystore-file.jks 
```

您可以通过以下方式检查结果：

```
keytool -list -keystore keystore-file.jks -v 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-07T06:02:08.320

理想情况下，您应该收到 3 个文件：ca_bundle.crt yourname.crt yourname.key

使用以下命令创建它的 pk cs 12 版本：

```
openssl pkcs12 -export -out yourname.pfx -inkey yourname.key -in yourname.crt -certfile ca_bundle.crt 
```

然后您需要将其导入到易于在 Apache 中配置的密钥库中

```
keytool -importkeystore -srckeystore yourname.pfx -srcstorepass yourpassword -srcstoretype pkcs12 -destkeystore yourkeystore.jks -deststoretype jks -deststorepass yourkeystorepassword 
```

# ios - 寻求有关 iOS 中线程性能影响的建议

> ID：11952277
> 
> 赞同：1
> 
> 时间：2012-08-14T12:27:34.193
> 
> 标签：ios, multithreading, performance, cocoa

我一直在研究 JSON 解析器一段时间[https://github.com/nathanday/ndjson](https://github.com/nathanday/ndjson)它解析字节流而不是完整的文档，并直接转换为 CoreData 实体或自定义对象，而不是通常的属性列表对象。我接近 1.0 版，但我已经到了正确支持 NSURLConnection 连接并使解析压缩 JSON 字节流更容易的地步，我必须更改我的解析在内部工作的方式，以便可以重复调用它（使用 NSData例如对象 NSURLConnectionDelegate didReceiveData: 方法）。我有两个我能想到的选择，最简单的是使用线程等待下一条可用数据，或者我可以重写代码的解析部分，以便可以重复调用它，从哪里获取最后是通过为需要在调用之间维护的变量创建自己的权益。使用线程是最简单的，因为它不需要很少的重写（如果有的话），但是由于这应该是一个通用的库，所以我担心在像 iPhone 这样的资源受限设备上创建比需要更多的线程。当然，其他选项会使代码更加复杂，并且必须维护我自己的堆栈不会是无资源的。有没有人有任何好的建议或其他可能的选择。创建线程很昂贵。或许有人可以想到一个创造性的方式使用block，或者是否可以调用NSRunLoop对象来执行下一个事件（NSURLConnectionDelegate方法）。当然，其他选项会使代码更加复杂，并且必须维护我自己的堆栈不会是无资源的。有没有人有任何好的建议或其他可能的选择。创建线程很昂贵。或许有人可以想到一个创造性的方式使用block，或者是否可以调用NSRunLoop对象来执行下一个事件（NSURLConnectionDelegate方法）。当然，其他选项会使代码更加复杂，并且必须维护我自己的堆栈不会是无资源的。有没有人有任何好的建议或其他可能的选择。创建线程很昂贵。或许有人可以想到一个创造性的方式使用block，或者是否可以调用NSRunLoop对象来执行下一个事件（NSURLConnectionDelegate方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:38:10.120

在 iOS 和 OS X 下，Apple 提供了一种很好的方式来处理线程而不会让人头疼：Grand Central Dispatch。线程并不昂贵，系统会为您创建线程。

您可以使用串行队列来处理您的数据，然后使用块在主线程上同步它：

```
// create the queue that will process your data:
dispatch_queue_t dataProcessQueue = dispatch_queue_create("data process queue", NULL); // the name is there for debugging purposes
    //dispatch to the newly created queue, and do not wait for it to complete
    dispatch_async(dataProcessQueue, ^{
        //your asynchronous job
        dispatch_async(dispatch_get_main_queue(), ^{
            // the work that has to be done on your main thread using data from above
    });
});
// don't forget to release the queue
dispatch_release(dataProcessQueue); 
```

如果你需要做并发工作，你应该使用并发队列。

Apple 的文档在[这里](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW1)

# java - Morphia 返回字符串列表，这些字符串是所有文档的字段

> ID：11952281
> 
> 赞同：2
> 
> 时间：2012-08-14T12:27:57.390
> 
> 标签：java, mongodb, morphia

如果我有一个充满以下元素的集合

```
@Entity
public void MyEntity{
  public String name;
  public String type;
  ...
} 
```

我想返回一个`List<String>`（或`Set`）不是元素，而只返回它们的`name`字段。

```
List<String> allNames = datasotre.find(MyEntity.class).asList("name"); 
```

这是示例查询，没有 Morphia 数据存储的这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:19:36.560

To limit the fields returned call the "retrievedFields" method on Query. For example, to only get the name field of all MyEntity objects:

```
datastore.find(MyEntity.class).retrievedFields( true, "name").asList() 
```

Edit - You can get a list Strings using the following query as long as you don't mind that the list will only contain unique values (i.e. no duplicate names):

```
DBCollection m = datastore.getCollection( MyEntity.class );
List names = m.distinct( "name", new BasicDBObject() ); 
```

The "names" list will only contain Strings.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:00:30.953

这里的问题是没有对“键”的实际查询。查询都返回“键/值对”。

理论上，其中的字段`datastore.find()`应该映射到其中的字段，`MyEntity`这样您*就可以*使用反射。但是，如果您有其他人从不同的地方写入数据库，他们可能已经播种了额外的表。

如果是这种情况，您将需要运行 Map/Reduce 以获取所有“键”名称的列表。

这里有[一个样本](https://stackoverflow.com/questions/2997004/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:18:21.573

您正在寻找`datastore.find(MyEntity.class).retrievedFields(true, "name").asList();`. 这将包含 _id 和 name 属性。

请参阅[http://code.google.com/p/morphia/wiki/Query#Ignoring_Fields](http://code.google.com/p/morphia/wiki/Query#Ignoring_Fields)

# objective-c - Cocoa 中的高级 UI

> ID：11952282
> 
> 赞同：3
> 
> 时间：2012-08-14T12:28:00.203
> 
> 标签：objective-c, cocoa, user-interface

我想在Cocoa中学习高级定制UI设计，包括UI元素设计，有什么书或其他好的学习资源吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:43:04.787

Matt Gemmell 为 NSConference 09（在 Vimeo 上免费提供）做了一场名为[Designing and Developing Custom Cocoa Controls](http://vimeo.com/17158932)的精彩演讲。他最近还发表了一篇关于[API 设计](http://mattgemmell.com/2012/05/24/api-design/)的博客文章，其中讨论了设计 GUI 组件的思考过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T12:40:11.307

作为一个很好的起点，我会查看[cocoacontrols.com](http://cocoacontrols.com)，他们有很多高级自定义 UI 项目，其中很多是开源、Apache 和 MIT 许可的。

# asp.net - GDI+ 中出现一般错误

> ID：11952287
> 
> 赞同：0
> 
> 时间：2012-08-14T12:28:23.023
> 
> 标签：asp.net, vb.net, image

我收到错误
在线 GDI+ 中发生一般错误

```
bit.Save(str, Imaging.ImageFormat.Png) 
```

请帮助我这是我的完整代码

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            If IsNothing(Request.QueryString("id")) = False Then
                If Val(Request.QueryString("id")) > 0 Then
                    Dim dsFiles As New DataSet

                    dsFiles = oFileData.GetFile(Val(Request.QueryString("id")))
                    Dim bindata() As Byte = dsFiles.Tables(0).Rows(0).Item("FileData")
                    Dim str As New MemoryStream
                    str.Write(bindata, 0, dsFiles.Tables(0).Rows(0).Item("FileSize"))
                    Dim bit As Bitmap = New Bitmap(str)
                    Response.ContentType = ".png"
                    bit.Save(str, Imaging.ImageFormat.Png)
                    str.WriteTo(Response.OutputStream)
                    str.Close()
                Else
                    Response.Write("<script language=""javascript"" type=""text/javascript"">window.close();</script>")
                End If
            Else
                Response.Write("<script language=""javascript"" type=""text/javascript"">window.close();</script>")
            End If
        End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:31:52.957

可能有很多原因——可能是字节数组的内容不是有效的图像数据。事实上，无需创建`Bitmap`或`MemoryStream`写入图像数据/字节到响应流。

试试这个，

```
Dim bindata() As Byte = dsFiles.Tables(0).Rows(0).Item("FileData")
Response.ContentType = "image/png"
Response.BinaryWrite(bindata)
Response.Flush()
Response.End() 
```

# java - 使用 Java 将补充 unicode 字符序列化为 XML 文档

> ID：11952289
> 
> 赞同：12
> 
> 时间：2012-08-14T12:28:38.927
> 
> 标签：java, xml, xslt, unicode, xml-serialization

我正在尝试使用补充 unicode 字符（例如 U+1D49C（

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T12:36:45.740

由于我没有看到任何答案，而且其他人似乎也有同样的问题，所以我进一步调查了......

为了找到 bug 的来源，我使用了`serializer`来自 的源代码`Xalan 2.7.1`，它也用于`Xerces`.

`org.apache.xml.serializer.dom3.LSSerializerImpl`使用`org.apache.xml.serializer.ToXMLStream`, 扩展`org.apache.xml.serializer.ToStream`.

`ToStream.characters(final char chars[], final int start, final int length)`处理字符，并且不正确支持 unicode 字符（注意：（`org.apache.xml.serializer.ToTextSream`可以与 a 一起使用`Transformer`）在 characters 方法中做得更好，但它只处理纯文本并忽略所有标记；有人会认为 XML 文件是文本，但由于某种原因`ToXMLStream`没有扩展`ToTextStream`）。

`org.apache.xalan.transformer.TransformerIdentityImpl`也在使用`org.apache.xml.serializer.ToXMLStream`（由 返回`org.apache.xml.serializer.SerializerFactory.getSerializer(Properties format)`），所以它遇到了同样的错误。

`ToStream`用于`org.apache.xml.serializer.CharInfo`检查字符是否应替换为`String`，因此该错误也可以在那里修复而不是直接在`ToStream`. `CharInfo`正在使用`org.apache.xml.serializer.XMLEntities.properties`带有字符实体列表的属性文件 ，因此更改此文件也可能是修复错误的一种方法，尽管到目前为止它仅针对特殊 XML 字符（`quot`、`amp`、`lt`、`gt`）设计。`ToXMLStream`使用与包中的属性文件不同的属性文件的唯一方法是`org.apache.xml.serializer.XMLEntities.properties`在类路径之前添加一个文件，这不是很干净......

使用默认的 JDK（1.6 和 1.7），`TransformerFactory`返回 a `com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl`，它使用`com.sun.org.apache.xml.internal.serializer.ToXMLStream`. In `com.sun.org.apache.xml.internal.serializer.ToStream`,`characters()`有时调用`processDirty()`, which 调用`accumDefaultEscape()`, 可以更好地处理 unicode 字符，但实际上它似乎不起作用（可能`processDirty`不调用 unicode 字符）...

`com.sun.org.apache.xml.internal.serialize.DOMSerializerImpl`正在使用`com.sun.org.apache.xml.internal.serialize.XMLSerializer`，它支持 unicode。奇怪的是，`XMLSerialize`r 来自`Xerces`，但它并没有被`Xerces`when`xalan`或`xsltc`are 在类路径中使用。这是因为`org.apache.xerces.dom.CoreDOMImplementationImpl.createLSSerializer`它`org.apache.xml.serializer.dom3.LSSerializerImpl`在可用时使用而不是`org.apache.xerces.dom.DOMSerializerImpl`. with`serializer.jar`在类路径上，`org.apache.xml.serializer.dom3.LSSerializerImpl`被使用。警告：`xalan.jar`并且`xsltc.jar`两者都`serializer.jar`在清单中引用，因此`serializer.jar`如果它位于同一目录中并且要么`xalan.jar`或要么位于类路径上，则最终会出现`xsltc.jar`在类路径上！如果只有`xercesImpl.jar`和`xml-apis.jar`在类路径上，`org.apache.xerces.dom.DOMSerializerImpl`则用作`LSSerializer`，并且正确处理 unicode 字符。

结论和解决方法：该错误存在于 Apache 的`org.apache.xml.serializer.ToStream`类中（`com.sun.org.apache.xml.internal.serializer.ToStream`在 JDK 中重命名）。正确处理 unicode 字符的序列化程序是`org.apache.xml.serialize.DOMSerializerImpl`（`com.sun.org.apache.xml.internal.serialize.DOMSerializerImpl`在 JDK 中重命名）。然而，Apache 更喜欢它`ToStream`何时`DOMSerializerImpl`可用，所以它可能在其他事情上表现得更好（或者它可能只是一个重组）。最重要的是，他们甚至`DOMSerializerImpl`在`Xerces 2.9.0`. 因此，以下解决方法可能会产生副作用：

*   当`Xerces`和 Apache`serializer`在类路径上时，将“ `(doc.getImplementation()).createLSSerializer()`”替换为“ `new org.apache.xerces.dom.DOMSerializerImpl()`”

*   当 Apache`serializer`在类路径上（例如因为`xalan`）而不是`Xerces`，尝试`(doc.getImplementation()).createLSSerializer()`用“new ”替换“ `com.sun.org.apache.xml.internal.serialize.DOMSerializerImpl()`”（回退是必要的，因为这个类将来可能会消失）

这两种解决方法在编译时会产生警告。

我没有解决方法`XSLT transforms`，但这超出了问题的范围。我想可以对另一个 DOM 文档进行转换并用于`DOMSerializerImpl`序列化。

其他一些解决方法，这对某些人来说可能是更好的解决方案：

*   `Saxon`与_`Transformer`

*   使用带`UTF-16`编码的 XML 文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T20:57:14.227

这是一个对我有用的例子。代码是用在 Java 7 上运行的 Groovy 编写的，您可以轻松地将其转换为 Java，因为我在示例中使用了所有 Java API。如果您传入一个具有补充（平面 1）unicode 字符的 DOM 文档，您将得到一个正确序列化这些字符的字符串。例如，如果文档有一个 unicode Script L（参见[http://www.fileformat.info/info/unicode/char/1d4c1/index.htm](http://www.fileformat.info/info/unicode/char/1d4c1/index.htm)），它将在返回的字符串中序列化为`&#x1d4c1`而不是`&#55349;&#56513;`（即Xalan Transformer 将获得什么）。

```
import org.w3c.dom.Document
...

def String writeToStringLS( Document doc ) {
  def domImpl = doc.getImplementation()
  def implLS = domImpl.getFeature("LS", "3.0")
  def lsOutput = implLS.createLSOutput()
  lsOutput.encoding = "UTF-8"
  def bo = new ByteArrayOutputStream()
  def out = new BufferedWriter( new OutputStreamWriter( bo, "UTF-8") )
  lsOutput.characterStream = out
  def lsWriter = implLS.createLSSerializer()
  def result = lsWriter.write(doc, lsOutput)
  return bo.toString()
} 
```

# django-forms - 带有 django-crispy 的内联复选框

> ID：11952295
> 
> 赞同：2
> 
> 时间：2012-08-14T12:29:04.400
> 
> 标签：django-forms, django-crispy-forms

我正在使用 django`ModelForm`并`django-crispy-forms`创建漂亮的引导程序表单。

我没有找到任何方法来生成像[这里可用](http://twitter.github.com/bootstrap/base-css.html#forms)的那样的内联复选框。

即使使用清晰的 FormHelper()，也无法定义如下字段：

```
Field('checkbox1', css_class="inline"),
Field('checkbox2', css_class="inline"),
Field('checkbox3', css_class="inline"), 
```

其中`checkbox1`和在模型中定义`checkbox2`为。`checkbox3``model.BooleanField`

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:07:41.903

我是 django-crispy-forms 的主要开发人员，我只能说目前不支持此功能。我会尽快开发补丁，我会及时通知你。

**更新 2012/9/24**

django-crispy-forms 1.2.0 已于今天发布，包括一个`bootstrap.InlineCheckboxes`布局对象，用于渲染`CheckboxSelectMultiple`带有内联复选框的 Django 小部件。我目前不打算支持以这种方式呈现多个 BooleanField 的布局对象。作为自定义个人布局对象，这可能更有意义。

# .net - 为什么 SQL Server 中有连接超时？我刚刚做了两个测试，无论如何连接都会立即失败

> ID：11952299
> 
> 赞同：0
> 
> 时间：2012-08-14T12:29:16.750
> 
> 标签：.net, sql-server

我做了两个测试，使用 .NET 连接到 Sql Server：

1.  我尝试连接到本地服务器，该服务器已打开但指定的数据库不存在。在这种情况下，它会触发一个`SqlException`错误号`4060`（无法使用指定用户登录）
2.  我试图连接到进程已停止的本地服务器。在这种情况下，它会触发一个 `SqlException`错误号`-1`（与 SQL Server 建立连接时发生与网络相关或特定于实例的错误）。

在这两种情况下，它都会立即失败，即使我在连接字符串中指定了 20 秒。在什么情况下它会等待我告诉它等待的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:31:40.200

听起来您已经成功*连接*- 这不像您在等待网络 - 但您遇到了身份验证或授权问题。我不*希望*这是连接超时的一部分。连接超时的目的是处理网络拥塞 - 而不是延迟身份验证失败。

编辑：对于第二种情况，机器可能会主动拒绝连接。同样，这不是网络拥塞 - 这不是连接超时要处理的那种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:32:42.963

**如果它达到该时间量而没有遇到“永久”错误**，它只会等待超时发生。为什么要等更长时间才能报告问题？

如果网络基础设施很慢，它可能会起作用——它可能需要多次退役。

# jquery - 表单验证插件有问题

> ID：11952300
> 
> 赞同：0
> 
> 时间：2012-08-14T12:29:21.213
> 
> 标签：jquery

我正在尝试使用这个 jQuery 插件[http://bassistance.de/jquery-plugins/jquery-plugin-validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation)所以我可以验证我正在制作的表格。但它似乎没有验证电话字段。谁能帮我理解我做错了什么？

到目前为止，这是我的代码

```
<script type="text/javascript">
 var validator
 jQuery(document).ready(function() {
     validator = jQuery("#participateform").validate();
 });

function sendRequest(){ 
        var validform=validator.form();       
        if(validform)
        {
            alert("Form is valid");
        }
}
</script>

<form id="participateform" >
    <div class="table">
        <div class="tr">
            <div class="td">fullname</div>
            <div class="td">
                <input type="text" value="" id="fullname" name="fullname" class="required" />
            </div>
        </div>
        <div class="tr">
            <div class="td">your e-mail </div>
            <div class="td">
                <input type="text" value="" id="e-mail" name="e-mail" class="required email" />
            </div>
        </div>
        <div class="tr">
            <div class="td">area</div>
            <div class="td">
                <select id="area" name="area"></select>
            </div>
        </div>
        <div class="tr">
            <div class="td">Phone 1</div>
            <div class="td">
                <input type="text" value="" id="phone" name="phone" class="required phone"/>                
            </div>
        </div>
        <div class="tr">
            <div class="td">Phone 1</div>
            <div class="td">
                <input type="text" value="" id="phone2" name="phone2" />
            </div>
        </div>

    </div>

    <input type="button" id="btnsubmit" value="submit" onclick="sendRequest()"> 
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:35:11.330

什么样的验证在手机上失败？

快速浏览一下[源代码](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L274)会发现缺少 phone 作为验证类。

**编辑**

您需要添加自定义规则：

```
$(document).ready(function(){

  $.validator.addMethod("phone", function(value, element) {
    //Any code that will return TRUE or FALSE
    return /^(\d+){10}$/.test(value);
  },
  "Error message");

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:41:52.507

该库的源代码建议该库使用以下电话验证规则：

```
jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, "");
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");

jQuery.validator.addMethod('phoneUK', function(phone_number, element) {
    phone_number = phone_number.replace(/\s+|-/g,'');
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(\(?(0|\+44)[1-9]{1}\d{1,4}?\)?\s?\d{3,4}\s?\d{3,4})$/);
}, 'Please specify a valid phone number');

jQuery.validator.addMethod('mobileUK', function(phone_number, element) {
    phone_number = phone_number.replace(/\s+|-/g,'');
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^((0|\+44)7(0|4|5|6|7|8|9){1}\d{2}\s?\d{6})$/);
}, 'Please specify a valid mobile number');

//Matches UK landline + mobile, accepting only 01-3 for landline or 07 for mobile to exclude many premium numbers
jQuery.validator.addMethod('phonesUK', function(phone_number, element) {
    phone_number = phone_number.replace(/\s+|-/g,'');
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(0[1-3]{1}[0-9]{8,9})$/) || phone_number.match(/^(07[5-9]{1}[0-9]{7,8})$/);
}, 'Please specify a valid uk phone number'); 
```

所以不要这样做：

```
<input type="text" value="" id="phone" name="phone" class="required phone"/> 
```

试试这个美国电话号码：

```
<input type="text" value="" id="phone" name="phone" class="required phoneUS"/> 
```

或者这个英国电话号码：

```
<input type="text" value="" id="phone" name="phone" class="required phoneUK"/> 
```

或者这是一个英国手机号码

```
<input type="text" value="" id="phone" name="phone" class="required mobileUK"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:39:28.393

试试看[这里](http://docs.jquery.com/Plugins/Validation#List_of_built-in_Validation_methods)，似乎你应该使用另一种内置的验证方法，比如`digits()`或`phoneUS()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T12:40:15.600

如前所述，没有电话验证。您可以使用 jQuery.validator.addMethod() 来定义自己的（甚至通过正则表达式或您想要的任何方式），它有据可查。

另请参阅： [http ://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.js)

# android - 检查 GCM 消息的状态

> ID：11952309
> 
> 赞同：11
> 
> 时间：2012-08-14T12:29:38.103
> 
> 标签：android, google-cloud-messaging

我正在尝试使用 GCM 向我的手机发送消息。我收到一条消息 id=0... 响应，但我的手机没有显示任何消息。有没有办法检查消息的状态（发送，等待等）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T15:08:30.933

没有。如果您收到 message_id=xxxx 响应，则 GCM 服务器已接受您的请求并将尽快处理它。无论之后发生什么，你都无法控制。无论消息是否传递到预期的设备，您都不会收到其他响应。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-13T14:37:34.987

Google 最近增加了对查看通过 GCM 发送的消息状态的支持。请按照[以下步骤操作](https://support.google.com/googleplay/android-developer/answer/2663268?hl=en)：

**GCM 统计**

您可以为 Play 和非 Play 应用注册 GCM。但是，GCM 统计信息仅适用于已发布的 Google Play 应用程序。要在您的 Google Play 开发者控制台上查看 GCM 统计信息，以下是如何将 GCM 简单 API 密钥或 C2DM 令牌与您的应用程序相关联：

1.  登录您的 Google Play 开发者控制台。
2.  选择一个应用程序。
3.  在左侧菜单中，单击服务和 API。
4.  单击链接发件人 ID 按钮。
5.  输入您的 GCM API 密钥或 C2DM 客户端登录令牌。
6.  单击链接。
7.  应用发布后，您可以在应用的统计信息页面上查看 GCM 统计信息。

**登录您的 Google Play 开发者控制台。**

1.  选择一个应用程序。
2.  在左侧菜单中，单击 GCM 诊断。

[![在此处输入图像描述](../Images/ceb36462842bc5616e77e585f40dd4ed.png)](https://i.stack.imgur.com/efbVU.png)

# php - 谷歌地图中的区域...定义凹坑区域的点

> ID：11952310
> 
> 赞同：0
> 
> 时间：2012-08-14T12:29:39.013
> 
> 标签：php, google-maps

我的问题是数学和编程之间的中间方式：

我有一组由纬度和经度定义的点。

我必须定义其中哪些描述了最大的凸形，然后以正确的顺序将它们提供给谷歌地图，以定义一个区域，即我们可以用给定点拥有的最大凸形区域......

对于代码我很好......我猜：

```
nazionearea = new google.maps.Polygon({
    paths: nazione,
    strokeColor: '#000000',
    strokeOpacity: 1.0,
    strokeWeight: 2,
    fillOpacity: 0 
}); 
nazionearea.setMap(map); 
```

其中 nazione 是一个包含所有坐标的数组。这并不容易......有什么想法吗？

我想发布一张图片，但作为新手是被禁止的。

* * *

我们发现：quickHull 但仍然无法工作......在 php 中（正是我需要的）

```
include( 'convex_hull.php' );

$q="SELECT `long`, lat FROM geo_punti "; 
$query=mysql_query($q); 
echo mysql_error();      
while($point=mysql_fetch_assoc($query)) 
{ $points[] = $point; } 

$hull = new ConvexHull($points); 
$punti = $hull->getHullPoints(); 
```

但我提供 10 分，结果我只得到 2 分

# java - 在java中使用POI读取单元格范围？

> ID：11952312
> 
> 赞同：0
> 
> 时间：2012-08-14T12:29:42.710
> 
> 标签：java, excel, apache-poi

我正在使用 Apache POI 来阅读 excel 表格。Excel 工作表将有大约 50 列。但我只需要阅读前 20 列。

如何在 Apache POI 中执行此操作，以免读取额外的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:33:22.367

您可以迭代给定行的每个单元格，并忽略超过 20 的所有额外列：

```
Sheet sheet = wb.getSheetAt(0);
for (Row row : sheet) {
    for (int i = 0; i < 20; i++) {
        Cell cell = row.getCell(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T13:11:41.880

使用这个迭代器类

```
public boolean test()
{
 if ( m_excel_workbook != null )
  {
          int zaehler = 0;
          Range r_a = new Range( getSelectedSheet(), 1,  20, 20, 30 );

          Cell c = r_a.first();

          while (( c != null ) && (zaehler < 2000)) {
            c.setCellValue( "A" );

            c=  r_a.next();
            zaehler++;
          }
        }
        return false;
}
```

```
private static class Range 
      {
        private int m_start_zeile = 0;
        private int m_end_zeile = 0;
        private int m_start_spalte = 0;
        private int m_end_spalte = 0;

        private Sheet m_sheet = null;

        public Range( Sheet pSheet, int pStartZeile, int pStartSpalte, int pEndZeile, int pEndSpalte )
        {
          m_sheet = pSheet;
          m_start_zeile = pStartZeile;
          m_end_zeile = pEndZeile;
          m_start_spalte = pStartSpalte;
          m_end_spalte = pEndSpalte;

          m_it_zeile = m_start_zeile;
          m_it_spalte = m_start_spalte;
        }

        private int m_it_zeile = 0;
        private int m_it_spalte = 0;

        public Cell first()
        {
          m_it_zeile = m_start_zeile;
          m_it_spalte = m_start_spalte;

          return getCell( m_it_zeile, m_it_spalte );
        }

        public Cell next()
        {
          m_it_spalte++;

          if ( m_it_spalte > m_end_spalte )
          {
            m_it_zeile++;
            m_it_spalte = m_start_spalte;
          }

          return getCell( m_it_zeile, m_it_spalte );
        }

        private Cell getCell( int pZeile , int pSpalte )
        {
          /*
           * Prüfung: Iteratorzeile gültig?
           */
          if (( m_it_zeile>= m_start_zeile ) && ( m_it_zeile <= m_end_zeile ))
          {
            if (( m_it_spalte>= m_start_spalte ) && ( m_it_spalte <= m_end_spalte ))
            {
               Row row  = m_sheet.getRow( m_it_zeile );

               if ( row == null )
               {
                 row = m_sheet.createRow( m_it_zeile );
               }

               if ( row != null )
               {
                 Cell cell = row.getCell( m_it_spalte );

                 if ( cell == null )
                 {
                   cell = row.createCell( m_it_spalte );
                 }

                 return cell;
               }
            }
          }
          return null;
        }

    //  Sheet sheet = wb.getSheetAt(0);
    //  for (Row row : sheet) {
    //      for (int i = 0; i < 20; i++) {
    //          Cell cell = row.getCell(i);
    //      }
    //  }

        /**
         * Liefert den Wert der Variablen "m_end_spalte".
         * 
         * @return m_end_spalte
         */
        public int getEndSpalte()
        {
          return m_end_spalte;
        }

        /**
         * Liefert den Wert der Variablen "m_end_zeile".
         * 
         * @return m_end_zeile
         */
        public int getEndZeile()
        {
          return m_end_zeile;
        }

        /**
         * Liefert den Wert der Variablen "m_sheet".
         * 
         * @return m_sheet
         */
        public Sheet getSheet()
        {
          return m_sheet;
        }

        /**
         * Liefert den Wert der Variablen "m_start_spalte".
         * 
         * @return m_start_spalte
         */
        public int getStartSpalte()
        {
          return m_start_spalte;
        }

        /**
         * Liefert den Wert der Variablen "m_start_zeile".
         * 
         * @return m_start_zeile
         */
        public int getStartZeile()
        {
          return m_start_zeile;
        }

        /**
         * Setzt den Wert der Variablen "m_end_spalte".
         * 
         * @param pEndSpalte der zu setzende Wert
         */
        public void setEndSpalte( int pEndSpalte )
        {
          m_end_spalte = pEndSpalte;
        }

        /**
         * Setzt den Wert der Variablen "m_end_zeile".
         * 
         * @param pEndZeile der zu setzende Wert
         */
        public void setEndZeile( int pEndZeile )
        {
          m_end_zeile = pEndZeile;
        }

        /**
         * Setzt den Wert der Variablen "m_sheet".
         * 
         * @param pSheet der zu setzende Wert
         */
        public void setSheet( Sheet pSheet )
        {
          m_sheet = pSheet;
        }

        /**
         * Setzt den Wert der Variablen "m_start_spalte".
         * 
         * @param pStartSpalte der zu setzende Wert
         */
        public void setStartSpalte( int pStartSpalte )
        {
          m_start_spalte = pStartSpalte;
        }

        /**
         * Setzt den Wert der Variablen "m_start_zeile".
         * 
         * @param pStartZeile der zu setzende Wert
         */
        public void setStartZeile( int pStartZeile )
        {
          m_start_zeile = pStartZeile;
        }

      // ########################################################################################################################
    //                                                           toString                                                        
      // ########################################################################################################################

        /**
         * Erstellt die String-Repräsentation dieser Klasse
         * 
         * @return pProperties eine Auflistung der Variablen und deren Inhalte
         */
        public String toString()
        {
          String log_string = "";

          /*
           * Ausgabe aller Werte aus der Ini-Datei
           */
          log_string += "\n + END_SPALTE    >" + m_end_spalte    + "<";
          log_string += "\n + END_ZEILE     >" + m_end_zeile     + "<";
          log_string += "\n + SHEET         >" + m_sheet         + "<";
          log_string += "\n + START_SPALTE  >" + m_start_spalte  + "<";
          log_string += "\n + START_ZEILE   >" + m_start_zeile   + "<";

          return log_string;
        }
}
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:37:08.437

只需遍历行和列，请参阅使用[HSSFSheet.getPhysicalNumberOfRows()](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#getPhysicalNumberOfRows%28%29)和[HSSFRow.getPhysicalNumberOfCells()](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRow.html#getPhysicalNumberOfCells%28%29)方法的[HSSFReadWrite.java示例。](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/hssf/usermodel/examples/HSSFReadWrite.java)

还可以查看[Event API](http://poi.apache.org/spreadsheet/how-to.html#event_api)，它将允许您使用电子表格的“事件”样式。

# sql-server - 如何在 mssqlserver 中选择带有“like”的图像数据类型

> ID：11952314
> 
> 赞同：1
> 
> 时间：2012-08-14T12:29:43.187
> 
> 标签：sql-server, getimagedata

我有一个具有图像数据类型列的表，该列包含`Pdf`和`txt`文件。

我的问题是如何在 Sql Example 中用“LIKE”搜索任何单词

```
Select * from tablename where ImageColumn LIKE @searchingword 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:37:02.023

你可以试试这个，但不确定它对 PDF 文件的反应如何......

```
select *
from dbo.tablename
where convert(varchar(max),convert(varbinary(max), ImageColumn)) LIKE @searchingword 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-19T08:52:28.233

```
select
from dbo.tablename
where convert(varchar(max),convert(varbinary(max), ImageColumn)) LIKE '%' + 
CHAR(0x00)+ CHAR(0x01)+ CHAR(0x02) +'%'** 
```

# iphone - 使用 ios sdk 在 youtube 上上传视频的方法

> ID：11952316
> 
> 赞同：2
> 
> 时间：2012-08-14T12:30:05.087
> 
> 标签：iphone

> **可能重复：**
> [如何从 iOS 应用程序中将视频上传到 YouTube？](https://stackoverflow.com/questions/3528568/how-do-i-upload-a-video-to-youtube-from-within-an-ios-application)

我们可以使用 ios sdk 在 youtube 上上传视频吗？

我有使用 Gdata 上传的示例代码。我知道使用 Gdata。

还有其他方法吗？我已经搜索过，但除了 Gdata 之外没有其他方法。

如果有任何想法请回复。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:39:09.597

这是[GDATA 的链接和文档](https://developers.google.com/youtube/2.0/developers_guide_protocol#Uploading_Videos)

下载[GData Objective-C](http://code.google.com/p/gdata-objectivec-client/)客户端并在 XCode 中打开其项目

以下[链接用于实施库步骤](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)

# android - 带有 USB OTG 的 Android 设备是否支持红外线收发器？

> ID：11952317
> 
> 赞同：3
> 
> 时间：2012-08-14T12:30:16.423
> 
> 标签：android, usb, infrared, usb-otg

我正在寻找各种选项来启用我的 Android 设备和一些外部硬件之间的红外 SIR 通信。选项似乎是。1) IOIO 板或类似的 USB 主机适配器（我会在其中包括 Arduino） 2) 许多远程控制类型项目都在吹捧音频->红外线 3) USB OTG 在 Android 设备上获得有限的主机功能。（如果可能的话，我想避免自定义 rom 和生根，因为我希望大多数用户都能访问最终的解决方案）

选项 1 应该可以工作，但对于大多数用户来说，它会很笨重，而且很可能太书呆子了。选项 2 对于远程控制类型的项目是可行的，但我不确定它是否适用于任意串行通信，因为预先录制的音调在这里根本不起作用。没有关闭，但这将是大量的工作......如果USB OTG允许我通过USB访问IR加密狗，那么这似乎是最简单的开发和结束用户。

问题是....USB-OTG 能给我这样的能力吗？我是否仍需要在现有 android 内核中不太可能出现的内核级支持？

我在这里还缺少其他基于 USB 的选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:54:25.907

我提出了两个问题，我对这两个问题都有一些暂定的答案 1) USB-OTG 是否给我对 USB IRdA 的支持？使用运行姜饼的索尼 Xperia Neo，答案暂时是肯定的。

```
[148640.129760] usb 1-1: new low speed USB device using msm_hsusb_host and address 2
[148640.288665] usb 1-1: device v0e9c p0000 is not supported
[148640.288665] usb 1-1: New USB device found, idVendor=0e9c, idProduct=0000
[148640.288696] usb 1-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[148640.288696] usb 1-1: Product: Streamzap Remote Control
[148640.288696] usb 1-1: Manufacturer: Streamzap, Inc.
[148640.289031] usb 1-1: configuration #1 chosen from 1 choice 
```

所以理论上该设备就在那里。现在我只需要弄清楚如何阅读它。设备块驱动程序看起来只是 root rw，所以这最终可能意味着这不是完全可以实现的.....

2) 还有其他基于 USB 的选项吗？可能，但我也可能为 Audio-IR 找到了更有趣的可能性。它需要更多电路，但消除了制作特定 .wav 文件的开销/问题。它使用简单的运算放大器比较器设置来使用来自音频通道的简单二进制高低。[https://play.google.com/store/apps/details?id=re.serialout#?t=W251bGwsMSwxLDIxMiwicmUuc2VyaWFsb3V0Il0](https://play.google.com/store/apps/details?id=re.serialout#?t=W251bGwsMSwxLDIxMiwicmUuc2VyaWFsb3V0Il0)。和[http://hackaday.com/2010/11/10/android-talks-pulsewave/](http://hackaday.com/2010/11/10/android-talks-pulsewave/)

# javascript - 在javascript中模拟动画很慢

> ID：11952320
> 
> 赞同：0
> 
> 时间：2012-08-14T12:30:35.820
> 
> 标签：javascript, html, genetic-algorithm

我正在尝试使用遗传算法优化交通信号灯时间。我在html5中做了一个交通动画，GA是用javascript实现的。所以，当我想运行该动画的模拟时，它会永远运行。

每 20 毫秒的动画绘制信号量和汽车，并为下一次迭代更新值。在模拟中我只调用更新函数，因为我不需要绘制信号量和汽车。

所以动画和模拟之间的区别在于，模拟不在画布上绘制任何东西，它在while循环中运行，而动画在setInterval循环中运行。

有什么想法可以加快模拟速度吗？

我试图计算每辆车的旅行时间，但这真的很难，因为你需要包括红色的等待时间，拥堵等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:17:33.027

如果我在模拟中正确理解了您，您将在 while 循环中运行无限运行的代码（或非常长时间运行的代码）。

这是你的问题。在 C++ 和 Java 等语言中，由于多线程，这是非常正常的做法。当他们咀嚼代码时，其他代码仍然可以运行，屏幕仍然可以更新......等等。

JS 是单线程的。从字面上看，它只是继续运行那个while循环，几乎什么都不做，破坏了程序的任何平稳运行。以这种方式使用 while 循环在单线程语言中绝对是“从不这样做”的事情。

# asp.net - 用于将导出转换为 pdf 的 Microsoft Report Viewer，它将报告减半并放在第二页上

> ID：11952322
> 
> 赞同：0
> 
> 时间：2012-08-14T12:30:44.593
> 
> 标签：asp.net, reporting-services

Microsoft 报告查看器将导出转换为 PDF，它将报告减少一半并将其放在第二页上。当报表从系统转换为 PDF 时，文档被截断超过 2 页。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:46:32.557

查看 Page 控件的尺寸。

通常，PDF 将模拟 8.5" x 11" 的纸张 - 考虑到边距，您应该将报告宽度的宽度保持在小于 7.5"。

如果您想支持非标准尺寸，请查看[如何更改纸张尺寸](http://msdn.microsoft.com/en-us/library/ms155929%28v=sql.100%29.aspx)

为确保您的正文不会溢出您的报告，您可以在报告设计器中检查正文的尺寸小于报告的尺寸。

# objective-c - NSFontSize 实际大小

> ID：11952328
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:31:13.230
> 
> 标签：objective-c, cocoa

我使用 NSFontSize(10,12,13...80) 设置字体大小但我想知道是否有描述字体大小和相关实际大小（像素/点）的详细信息

我欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:50:53.303

看看 UIFont-Documentation：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)

有类似的属性

```
pointSize
lineHeight 
```

# ios - 照片滚动视图

> ID：11952331
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:31:26.990
> 
> 标签：ios, uiscrollview, uiimageview

我需要在 ios 中制作照片应用程序，如照片应用程序。我需要在里面有 uiscrollview 和自定义按钮。那么是否有任何关于如何执行此操作或代码的教程，因为我看到很多应用程序都在使用此功能。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:02:38.637

[https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)

添加按钮。并下次检查 UIScrollView 参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:12:27.037

您还可以查看提供照片库组件的 Three20 库。查看教程[如何使用 Three20 照片查看器](http://www.raywenderlich.com/1430/how-to-use-the-three20-photo-viewer)以获得更好的理解，因为 Three20 库的文档在他们的主页上仍然不存在。

# python-3.x - FTP.retrbinary 失败

> ID：11952332
> 
> 赞同：0
> 
> 时间：2012-08-14T12:31:27.427
> 
> 标签：python-3.x

我是一个完整的 Python 新手，所以如果我的问题的解决方案似乎很明显，我深表歉意。我在编写一些相对简单的代码时遇到了困难。我已经扫描了几个已经发布的相关问题，但我看不出我的代码与建议的解决方案在哪里有任何有意义的不同。

我正在尝试编写一个程序，它将：

1.  建立到远程服务器的 ftp 连接。
2.  更改 ftp 服务器上的工作目录。
3.  从 ftp 服务器检索工作目录中的文件列表。
4.  从检索到的文件列表中查找以特定后缀结尾的文件。
5.  将找到的文件检索到用户本地文件系统上的临时目录（由 tempfile.mkdtemp() 创建）。

步骤 1 到 4 正在按预期工作。可悲的是，最后一步落入了我的除外条款。

任何人都可以就以下代码行可能有什么问题提出建议吗？

```
ftp.retrbinary('RETR ' + file, open(opsys.path.join(localTempDir, fileName)).write) 
```

非常感谢您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:53:51.553

可能出现的问题：

```
- type(file) = incorrect value
- opsys.path.join(localTempDir, fileName) = incorrect value #nonexistent file 
```

这就是查看呈现的代码行时想到的所有内容=）

# c++ - 从 cgi POST 数据中获取输入

> ID：11952333
> 
> 赞同：1
> 
> 时间：2012-08-14T12:31:27.303
> 
> 标签：c++, post, input, cgi, scanf

这是我用 cgi 检索 html 数据的 c++ 代码。

```
char* fileContentLength;
int nContentLength;
fileContentLength = getenv("CONTENT_LENGTH");

if(fileContentLength == NULL)   
    return -1;      

nContentLength = atoi(fileContentLength);   

if(nContentLength == 0) 
    return -1;

data = (char*) malloc(nContentLength+1);

if(data == NULL)    
    return -1;

memset(data, 0, nContentLength+1);  
if(fread(data, 1, nContentLength, stdin) == 0)  
    return -1;

if(ferror(stdin)) 
```

执行此代码后，我得到了变量“数据”的以下结果。

> f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3=

这里 f0,l0,f1,l1 是 HTML 页面的输入框的名称。我需要从这个字符串中分离出 fname0、lname0、fname1、lname1 等值。我使用了 sscanf 函数。但我无法检索到正确的结果。如何将上述字符串中的值分配给名为 firstname 和 lastname 的局部变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:41:22.927

检查例如[`strtok`](http://en.cppreference.com/w/cpp/string/byte/strtok)功能。在循环中使用它来拆分，`'&'`以将所有键值对组合成一个向量（例如）。然后在字符处查看分割每个字符串的向量（您可以`strtok`在此处再次使用）`'='`。您可以将键和值放在 a 中`std::map`，或直接使用。

对于更特定于 C++ 的方法，请使用例如[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)and[`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)而不是`strtok`. 然后，您可以将键和值直接放入映射中，而不是将它们作为字符串临时存储在向量中。

**编辑：**如何获得最后一对

最后一个键值对没有被字符终止，所以你必须在循环*之后*`'&'`检查最后一个键值对。这可以通过复制你的字符串来完成，然后在最后一个. 可能是这样的：*`'&'`*

 *```
char *copy = strdup(data);

// Loop getting key-value pairs using `strtok`
// ...

// Find the last '&' in the string
char *last_amp_pos = strrchr(copy, '&');
if (last_amp_pos != NULL && last_amp_pos < (copy + strlen(copy)))
{
    last_amp_pos++;  // Increase to point to first character after the ampersand

    // `last_amp_pos` now points to the last key-value pair
}

// Must be free'd since we allocated a copy above
free(copy); 
```

我们需要使用字符串的副本的原因，如果因为`strtok`修改了字符串。

我仍然建议您使用 C++ 字符串，而不是依赖旧的 C 函数。它可能会简化一切，包括您不需要为最后一个键值对添加额外的检查。*

# sharepoint - 如何缓存基于 Sharepoint 托管客户端对象模型的对象？

> ID：11952336
> 
> 赞同：3
> 
> 时间：2012-08-14T12:31:41.687
> 
> 标签：sharepoint, caching, object, model, client

我需要缓存某些基于 SharePoint 托管客户端对象模型的对象，例如 ClientContext、GroupCollection、User、List 等。最初我尝试使用 Appfabric 缓存，但它给出了一些问题，例如“无法序列化”。我的问题是“**是否可以序列化基于 SharePoint 托管客户端对象模型的对象？** ”。

接下来我尝试使用 .NET **ObjectCache**，它实际上缓存了 SP 的托管客户端对象，但这里的问题是我需要一种分布式/统一缓存技术。据我所知，我们不能让 ObjectCache 分布在多个托管服务器上。任何人都可以建议我一个解决方案或让我继续前进。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:15:24.480

SharePoint 客户端对象模型将不支持客户端对象的对象缓存。这是客户端对象模型的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T12:00:22.350

您不能序列化上下文或查询结果。也`ListItem`不能序列化。尽管如此：至少在考虑查询结果时，您通常想知道的最重要的信息是返回的字段的内容。所以，`ListItem.FieldValues`是一个简单的`Dictionary<string,object>`，可以很容易地序列化。

您可以将此 Dictionary 与 Listitem 的 ID 结合使用来创建您自己的缓存机制。

# c# - 使用 Monotouch 发送多条短信和电子邮件

> ID：11952337
> 
> 赞同：1
> 
> 时间：2012-08-14T12:31:42.850
> 
> 标签：c#, iphone, email, xamarin.ios, sms

我正在使用 MonoTouch 框架开发一个 iPhone 应用程序，并且我正在尝试一次性发送多个 SMS 和电子邮件。某种

```
foreach (User user in userList)
{
    SendSMS(user.TelephoneNumber);
    SendEmail(user.EmailAddress);
} 
```

我找到了有关[发送 SMS](http://psuh.wordpress.com/2011/03/30/sending-textsms-with-monotouch/)和[电子邮件](http://psuh.wordpress.com/2011/03/30/sending-emails-with-monotouch/)的示例，但每次作者都使用`MFMessageComposeViewController`and `MFMailComposeViewController`。

我不想要 ViewController，只是在我的“加载警报视图”显示进程状态时发送 SMS/电子邮件。

有任何想法吗 ？

提前感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:00:42.383

iOS 不允许您在没有用户交互的情况下发送电子邮件或文本。

如果您想这样做，您将需要使用第三方服务来处理 SMTP 和 SMS。

# html - 为“存储库”网站选择哪个框架/CMS/...

> ID：11952338
> 
> 赞同：0
> 
> 时间：2012-08-14T12:31:43.617
> 
> 标签：html, frameworks, content-management-system, repository

我想创建一个不错的（和现代的？）网站，注册用户可以在其中使用媒体。音频、视频、文档、图像……某种存储库。

用户可以查看和下载数据。

它是否存在一些特定的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:34:59.980

现在几乎所有的 CMS 都有媒体库模块。Drupal，Wordpress MODx，所有这些都有它，一种或另一种方式。

# java - 合并和颜色样式不适用于 Apache POI excel 2003 格式

> ID：11952339
> 
> 赞同：2
> 
> 时间：2012-08-14T12:31:43.787
> 
> 标签：java, excel, excel-2007, apache-poi, excel-2010

在 Apache POI 中，我为某些单元格应用了一些样式并合并了这些单元格。当我在 2010 年或 2007 年打开时，它的工作正常，但在 2003 年，格式样式消失了。它会在每次保存 2003 excel 文件之前打开兼容性检查对话框。

请参考屏幕截图。

![在此处输入图像描述](../Images/f41db5b77bba27abe1c7c9e899395b29.png)

下面是示例代码：

```
.........
style.setFillForegroundColor(IndexedColors.GREY_50_PERCENT.getIndex());
style.setFillPattern(CellStyle.SOLID_FOREGROUND);
.........
cell.setCellStyle(style); 
```

合并单元格

```
CellRangeAddress cr = new CellRangeAddress(10, 10, 18,23);
sheet.addMergedRegion(cr); 
```

我删除了合并代码，我在 2003 年得到了颜色。样式被应用了。但我希望在 2003 版的这些单元格中同时应用颜色和合并。

有什么建议么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:18:40.540

```
int rownum = sheet.getLastRowNum()+1;
sheet.addMergedRegion(new Region(10,10,18,23));
HSSFRow row=sheet.createRow(rownum);
HSSFCell secCell=row.createCell(0);

 HSSFCellStyle cellStyle = workBook.createCellStyle();
 style.setFillForegroundColor(IndexedColors.GREY_50_PERCENT.getIndex());
 style.setFillPattern(CellStyle.SOLID_FOREGROUND);
 cell.setCellStyle(style); 
```

它可能对初学者有所帮助。样式的创建不能在循环中完成。

# java - 如何避免本地声明隐藏更高级别的声明

> ID：11952342
> 
> 赞同：1
> 
> 时间：2012-08-14T12:31:50.977
> 
> 标签：java, scope, naming-conventions

我正在阅读 Java 代码约定 PDF，我注意到了这一点：

> 避免在更高级别隐藏声明的本地声明。例如，不要在内部块中声明相同的变量名：

```
int count;
         ...
         func() {
             if (condition) {
                 int count;
... }
... } 
```

这不是什么新鲜事，我经常发现自己在编写这样的代码。您如何解决此类情况？当然你可以说“找到一个更好的名字”，但这并不总是那么容易。在更高级别名称的前面或后面添加内容是否有任何约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:35:52.203

您可以使用特定于范围的变量命名约定来减少混淆。

```
String[] names;

public void populateNames(String[] theNames) {
    names = theNames;
} 
```

此外，您可以使用`this`关键字明确说明您想要哪个作用域变量。

```
int count = 0;
public void func() {
    int count = 0;
    if (condition) {
        this.count++; // increment the class-scope count variable
    } else {
        count++; // increment the local scope variable
    }
} 
```

一般来说，*只是不要重用你的变量名*。它使那些阅读您的代码的人感到困惑，并使调试变得更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:40:09.050

如果您只处理*方法*变量声明，则可以使用`this`关键字来引用实例变量，如下例所示：

```
public class Foo {
    private int id;

    public void setId(int id) {
        this.id = id;
    }
} 
```

这里，`this.id`指的是实例变量，而`id`指的是传递给setter的参数。

我知道你说过你不想听到使用更好的变量名的建议，但我确实认为你真正应该有重复名称的唯一情况是当你准备为 ivar 设置一个新值时，或者只是读一个伊瓦尔。即便如此，使用具有更多含义的名称通常更具可读性，例如，如果您只需要一个与`barr`临时同时的变量，请将其命名`tmpBarr`或类似的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:35:16.447

```
int count;
count = 1; 
```

不一样

```
int count;
this.count = 1; 
```

因此，如果您使用局部变量，则不要使用“this”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:35:48.287

顶级变量具有比低级变量更“详细”的名称。例如：

```
class A{

    private int mVegetablesCount;

    public void foo(){
        int count;
        if(true){
           int cnt;
             if(true)
                int c;
        }
    }
} 
```

就像变种一样。此外，最好专门命名您的类字段。在我的示例字段中，名为 fith 前缀“m”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T12:42:07.030

我在一个库中看到了这种编码风格：

*   成员变量：`_variable`
*   局部变量：`locVariable`
*   方法参数（参数）：`parVariable`

但我个人认为它会使代码混乱。

任何好的 IDE 都将使用颜色代码，在局部变量和类成员之间做出明显的区别。

# android - 锁屏上的小部件

> ID：11952347
> 
> 赞同：1
> 
> 时间：2012-08-14T12:32:13.247
> 
> 标签：android, android-widget

我在这里阅读了帖子并搜索了它，但没有找到答案。是否可以将小部件添加到锁屏？我需要它来控制音乐播放器。有没有办法或唯一的办法是创建自己的锁屏，解锁实现？我尝试了自定义活动，但它显示在锁定屏幕上，并且在我按回并关闭活动之前，解锁是不可见的。

谢谢，万兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:20:08.887

锁屏音乐播放器控制的解决方案是[RemoteControlClient](http://developer.android.com/reference/android/media/RemoteControlClient.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:56:35.157

您是要为锁屏制作小部件，还是要将预制小部件放到锁屏上？据我所知，使用设置，您无法将小部件放到锁屏上。只有应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:58:51.443

## 我像这样在锁屏上创建指南针：

在 keyguard_screen_tab_unlock.xml 中添加小部件视图；它在 framework/base/core/res/res/layout

```
 <com.android.internal.policy.widget.CompassW6000widgetView
                android:id="@+id/compassWidget"
                android:layout_width="320dip"
                android:layout_height="340dip"
                android:layout_below="@id/carrier"
                android:center_x="98"
                android:center_y="78"
                android:compassImage="@drawable/widget_pointer"
                android:compassbg0Image="@drawable/widget_blackground0"
                android:compassbgImage="@drawable/widget_blackground"
                android:compasscenterImage="@drawable/widget_center"
                android:degress_str_x="157"
                android:degress_str_y="148"
                android:offsety="-5"
                android:pause_action="android.intent.action.SCREEN_OFF"
                android:relative_top_y="10"
                android:resume_action="android.intent.action.SCREEN_ON"
                android:rotate_type="center"
                android:showtype="2" />` 
```

`

然后在 LockScreen.jave 上找到它。它在框架字/基础/政策上

```
CompassW6000widgetView mCompassView;
final LayoutInflater inflater = LayoutInflater.from(context);

    if (true) {
        inflater.inflate(R.layout.keyguard_screen_tab_unlock, this, true);

    } 
mUnlockWidget = findViewById(R.id.unlock_widget); 
```

让你编码，把它推到你的手机里，然后重启它

# xpages - 设置滚动面板的动态高度？

> ID：11952357
> 
> 赞同：1
> 
> 时间：2012-08-14T12:32:54.307
> 
> 标签：xpages

我有一个应用了这个 styleCLass 的面板的视图。

.scrollPanel { 宽度：100%; 高度：375px；溢出：自动；}

该面板嵌套了扩展页面应用程序控件。

我想要设置面板​​的高度和宽度，以便显示面板的滚动条并且不激活浏览器滚动条。

这个 CSS 非常适合宽度。我可以调整浏览器窗口的大小，面板的宽度会根据需要进行调整，并且浏览器水平滚动条永远不会出现。

但是如果我尝试 100% 的高度，它就不会起作用。如果我调整高度大小，则会出现浏览器的垂直滚动条。

此外，最好让面板的高度始终等于可用屏幕的高度。使用 100% 时，如果视图折叠，高度会非常小。视图扩展时高度会扩展。我希望它始终与浏览器的可用高度保持相同的大小百分比。

PS 我设置的 375 大小可以完美地工作，但它不会随浏览器调整大小。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:38:35.960

您需要注册一个 window.onresize 事件来获取窗口的实际大小并相应地修改面板，例如通过使用样式设置其高度。

因此，最好的方法是创建一个根据窗口大小修改面板大小的方法，同时考虑最小值和最大值。一旦该功能完成，您只需将其注册到 onresize 事件，该事件会在任何更改视口显示尺寸（读取、实际调整大小或启用 Windows 滚动条的东西）时触发。

在完美的世界中，您最多可以每 100 毫秒对该方法的执行进行去抖动/限制，以避免在使用鼠标和窗口边框调整窗口大小期间出现过多的 CPU 负载，因为根据浏览器的不同，该事件会在每一个上触发在这种调整大小期间鼠标移动的像素 - 这是相当常见的，可能会导致 UI 响应变慢。

# java - 使用 SWIG 从 Java 访问结构中的指针数组

> ID：11952365
> 
> 赞同：6
> 
> 时间：2012-08-14T12:33:41.480
> 
> 标签：java, c, swig

我有这样的事情：

```
typedef struct {
    char * content;
} Boo;

typedef struct {
    Boo **data;
    int size;
} Foo; 
```

我想使用 SWIG 将 Java 中的元素 ( ) 转换`Boo ** data`为数组。然后读取数组（我不想从 Java 代码编辑、删除和创建一个新数组）。在 SWIG 文档中描述了如何使用and执行此操作，但结构的成员必须是 type 。我的问题有解决方案吗？`Boo``Boo[]``carrays.i``array_functions``data``Boo*`

编辑：我赶时间，忘记写我想用 SWIG 生成 Java 类以与 C 结构配合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:32:42.563

解决方案非常简单。只需在 swig 界面中使用：

```
%include <carrays.i>
%array_functions(Boo *, boo_array); 
```

然后从java访问：

```
SWIGTYPE_p_p_Boo results = foo.getData();
for(int i = 0; i < foo.getSize(); i++) {
    Boo booResult = foo.boo_array_getitem(results, i);
} 
```

检索数组的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:55:13.913

你总是可以做一个 malloc，例如 1d 选项卡将是：

```
int main (void)                                                          
 {                                                                
    int   size;                                                        
    Foo a;

  size = 2;
  if (!(a.data = malloc(size * sizeof(*(a.data)))))
   return (-1);
    // so you will have a.data[0] or a.data[1] ...

    //   for malloc on 2d                                   
    //   if (!(a.data[0] = malloc(size * sizeof(*(a.data)))))                
    //    return (-1);                                                     
  return 0;
 } 
```

但是自从你开始 malloc 之后，你必须在完成选项卡后使用 free

否则，将其更改为 boo data[] 或 data[][] 将需要在编译之前存储精确数量的结构。

# matlab - matlab中的绘图错误不平衡或意外的括号或括号

> ID：11952367
> 
> 赞同：-2
> 
> 时间：2012-08-14T12:33:44.617
> 
> 标签：matlab, parentheses

我想在 Matlab 中绘制这个函数：

```
F(p)=((3/2)*(7.02^2))-(2*18*p((1-(p/18))*(1-(exp(-18/p)))) 
```

我试图按照[此](http://www.mathworks.de/help/techdoc/learn_matlab/f3-27853.html)Mathworks 页面中的描述制作情节。我写了这个：

```
p=0.001:0.001:10;
F=(((3/2)*(7.02^2))-(2*18*p((1-(p/18))*(1-(exp(-18/p)))));
plot(p,y) 
```

但我得到一个错误：

```
??? F=(((3/2)*(7.02^2))-(2*18*p((1-(p/18))*(1-(exp(-18/p)))));
                                                            |
Error: Unbalanced or unexpected parenthesis or bracket. 
```

我也尝试过这样的循环：

```
p=0.01:0.01:10;
F=zeros(1,length(p))
for i = 1:1000
F(i)=(((3/2)*(7.02^2))-(2*18*p(i)((1-(p(i)/18))*(1-(exp(-18/p(i))))));
end
plot(p,y) 
```

但我得到了错误：

```
??? F=(((3/2)*(7.02^2))-(2*18*p((1-(p/18))*(1-(exp(-18/p)))));
                                                            |
Error: Unbalanced or unexpected parenthesis or bracket.

??? Error: File: Untitled2.m Line: 4 Column: 70
Unbalanced or unexpected parenthesis or bracket. 
```

我不明白问题出在哪里...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:39:44.847

你显然有太多`(`或太多`)`。数一数，然后使用 Matlab 编辑器的语法高亮和帮助找到准确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:21:49.193

你这里有几个问题。第一个是您正在使用的`(`和的数量。`)`第二个是你没有考虑到它`p`是一个向量并且需要`.*`和`./`运算符的事实，因为矩阵运算并不总是像`A times B`向量长度不匹配时说的那么简单。

无论哪种方式，这现在应该适合你......

`F=(((3/2)*(7.02^2))-(2*18*p.*(1-(p./18))).*(1-(exp(-18./p))));`

将来它有助于简单地计算@rubenvb 提到的数量`(`和数量。`)`这将为您提供一个很好的指标，表明问题可能出在哪里。

在这种特殊情况下，由于我在上面关于乘法和除法的说明，您会得到矩阵维度不匹配错误。

希望有帮助。

# escaping - ANTLR 词法分析器排除字符串

> ID：11952369
> 
> 赞同：3
> 
> 时间：2012-08-14T12:33:58.057
> 
> 标签：escaping, antlr, antlr3, lexer, antlrworks

# 大家好

我正在尝试构建一个用于解析特定领域语言的词法分析器。我有一组保留令牌（片段 RESERVED）和一个转义字符。每当出现未转义的保留标记时，词法分析器都应该拆分。

## 一个简化的例子：

```
SEP: ';';
AND: '&&';

fragment ESCAPE: '/';    
fragment RESERVED: SEP | AND | ESCAPE;

SINGLETOKEN : (~(RESERVED) | (ESCAPE RESERVED))+; 
```

## 问题：

只要 RESERVED 仅包含单个字符标记，此方法就可以正常工作。否定操作 ~ 仅适用于单个字符。

不幸的是，我也需要它与字符串令牌一起使用。所以标记超过 1 个字符（参见示例中的 AND）。有没有一种简单的方法可以做到这一点？我需要在没有内联 java 或 c 代码的情况下解决问题，因为它必须编译成不同的语言，而且我不想维护单独的副本。

我希望有一个人可以帮助我

* * *

## 来自整个脚本的示例输入

创建；假；假；1.key = bla；trig;true;false;(1.key1 ~ .*thisIsRegex || 2.oldKey1 €) && (1.bla=2.blub || 1.blub=bla);

在 Lexer 之后，这应该看起来像这样 | 是令牌分隔符，空格不重要：|create|;|false|;|false|;|1.|key| = |白|;| 触发|;|true|;|false|;|(|1.|key1| ~| .*thisIsRegex| || |2.|oldKey1| €|)| && |(|1.|bla|=|2.|blub| || |1.|blub|=|bla|)|;|

整个脚本可以在[http://pastebin.com/Cz520VW4](http://pastebin.com/Cz520VW4)上找到 （注意这个链接会在一个月内过期）它目前不适用于正则表达式部分。

* * *

## 可能但可怕的解决方案

我找到了一个可能的解决方案，但它真的很hacky并且使脚本更容易出错。所以我宁愿找更干净的东西。

我目前正在做的是手写否定（~RESERVED）。

```
SEP: ';';
AND: '&&';

fragment ESCAPE: '/';    
fragment RESERVED: SEP | AND | ESCAPE;

NOT_RESERVED:
   :  '&' ~('&' | SEP | ESCAPE)  
   // any two chars starting with '&' followed by a character other then a reserve character
   |  ~('&' | SEP | ESCAPE) ~(SEP | ESCAPE)   
   // other than reserved character followed by '&' followed by any char
   ;
SINGELTON : (NOT_RESERVED | (ESCAPE RESERVED))+; 
```

真正的脚本有超过 5 个多字符标记，以后可能会有更多超过 2 个字符，所以这种解决问题的方法会变得相当复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:04:03.867

> *它目前不适用于正则表达式部分......*

那是因为您已将正则表达式文字声明为几乎任何东西。如果正则表达式文字以保留标记开头怎么办，例如：`1.key1 ~ falser`？

简而言之，我不建议您按照您现在尝试的方式来实现您的词法分析器。相反，几乎所有编程语言都实现了正则表达式：让它们被分隔符（或带引号的字符串）封装：

```
1.key1 ~ /falser/ 
```

或者：

```
1.key1 ~ "falser" 
```

您*可以*在词法分析器中添加一个标志，每当`~`遇到 a 时都会翻转该标志，并根据该标志创建一个正则表达式文字。这是一个关于如何做到这一点的小演示：

```
grammar TriggerDescription;

options {
  output=AST;
}

tokens {

 // seperator
 SEP = ';';

 // md identifier
 OLDMD   =        '1.';
 NEWMD   =        '2.';

 // boolean
 TRUE    =        'true';
 FALSE   =        'false';

//atoms
 EX     =       '€';
 EQ     =       '=';
 SMEQ   =       '<=';
 GREQ   =       '>=';
 GR     =       '>';
 SM     =       '<';

 // literals
 AND    =        '&&';
 OR     =        '||';
 NOT    =        '!';
 OPENP  =        '(';
 CLOSEP =        ')';

 // token identifier
 TRIGGER = 'TRIGGER';
 REPFLAG = 'REPFLAG';
 LOCALFLAG = 'LOCALFLAG';
 TRIGGERID = 'TRIGGERID';
 EVALUATOR = 'EVALUATOR';
 ROOT = 'ROOT';
}

@lexer::members {
  private boolean regexExpected = false;
}

parse
        : trigger+ EOF -> ^(ROOT trigger+)
          //(t=. {System.out.printf("\%-15s '\%s'\n", tokenNames[$t.type], $t.text);})* EOF
        ;

trigger
        : triggerid SEP repflag SEP exeflag SEP mdEval SEP -> ^(TRIGGER triggerid repflag exeflag mdEval)
        ;

triggerid
        : rs = WORD     -> ^(TRIGGERID[$rs])
        ;

repflag
        : rs = TRUE     -> ^(REPFLAG[$rs])
        | rs = FALSE    -> ^(REPFLAG[$rs])
        ;

exeflag
        : rs = TRUE     -> ^(LOCALFLAG[$rs])
        | rs = FALSE    -> ^(LOCALFLAG[$rs])
        ;

mdEval
        : orExp         -> ^(EVALUATOR orExp)
        ;

orExp
        :  andExp (OR^ andExp)* // Make `||` root
        ;

andExp
        :  notExp (AND^ notExp)* // Make `##` root
        ;

notExp
        :  (NOT^)*atom // Make `!` root
        ;

atom
        :       key EX^
        |       key MT^ REGEX
        |       key EQ^ (key | WORD)
        |       key GREQ^ (key | WORD)
        |       key SMEQ^ (key | WORD)
        |       key GR^ (key | WORD)
        |       key SM^ (key | WORD)
        |       OPENP orExp CLOSEP -> orExp // removing the parenthesis
        ;      

key     :       OLDMD rs = WORD -> ^(OLDMD[$rs])
        |       NEWMD rs = WORD -> ^(NEWMD[$rs])
        ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

// chars used for words might need to be extended
fragment CHAR  
        :       'a'..'z' | 'A'..'Z' | '0'..'9'
        ;

// chars used in regex
fragment REG_CHAR
        :       '|' | '[' | '\\' | '^' | '$' | '.' | '?' | '*' | '+' | '(' | ')'
        ;

fragment RESERVED
        :       SEP | ESCAPE | EQ
        ;

// white spaces taps etc
fragment WS
        :       '\t' | ' ' | '\r' | '\n'| '\u000C'
        ;

fragment ESCAPE
        :       '/'
        ;      

MT
        :       '~' {regexExpected = true;}
        ;

REGEX
@after{regexExpected = false;}
        :       {regexExpected}?=> WS* ~WS+
        ;

LINE_COMMENT
        :       '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
        ;

WHITESPACE
        :       WS+    { $channel = HIDDEN; }
        ;

COMMENT
        :       '/*' .* '*/' {$channel=HIDDEN;}
        ;

WORD    :       CHAR+
        ; 
```

这将为您发布的示例输入创建以下 AST：

![在此处输入图像描述](../Images/52d9defb802fdbb0000e027602fb3711.png)

但是，请意识到这只是一个快速演示。我现在定义的方式`REGEX`是它将消耗它看到的任何非空格字符。换句话说，要结束 a `REGEX`，您必须在其后直接放置一个空格。调整我的示例以适合您自己的需要。

祝你好运！

PS。顺便说一句，规则中的奇怪`{ ... }?=>`语法`REGEX`称为*“门控语义谓词”*。在此处了解更多信息：[ANTLR 中的“语义谓词”是什么？](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr)

# c# - 如何检测 CPU 是否支持 Intel Anti-Theft 技术？

> ID：11952370
> 
> 赞同：5
> 
> 时间：2012-08-14T12:33:58.577
> 
> 标签：c#, c++, security, cpu, intel

从[http://ark.intel.com](http://ark.intel.com)我可以找到支持它的处理器。但是如何以编程方式检测它？（C++，C#）。

对于英特尔的芯片组，我发现 FVEC2（特征向量寄存器）用于检测是否启用或禁用了防盗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T23:00:55.813

有一些脚本会告诉您您的系统是否支持它：

[防盗状态工具](https://communities.intel.com/docs/DOC-4463)。此工具报告系统是否能够运行英特尔® 防盗以及是否存在有效的 MEI 驱动程序。如果已安装，它不会输出 MEI 驱动程序的版本。此工具仅在您想知道系统上是否存在有效的 MEI 驱动程序以及系统是否支持英特尔® 防盗时才真正有用。

[SCS Discovery Tool](http://software.intel.com/en-us/articles/download-the-latest-version-of-intel-amt-setup-and-configuration-service-scs)：如果您想对系统进行实际的“发现”，您需要下载 SCS Discovery Tool。该工具通常由可管理性控制台下推至系统，以便进行系统“扫描”。它报告以下内容：MEI 驱动程序/版本、LMS 和 UNS 版本、ME 启用、实施英特尔 AMT 所需的大量信息、英特尔防盗状态、网络配置等。它可以将所有内容写入系统注册表或 XML 输出文件。

您可以让 SCS Discovery 工具将其输出写入寄存器，这样您就可以以编程方式检查寄存器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:45:52.337

好吧，我发现了一些可能会有所帮助的东西。

*   [在c#中获取时钟速度](https://stackoverflow.com/questions/3020449/c-how-to-obtain-the-current-clock-speed-of-an-intel-i-series-cpu-when-turboboo)
*   从上面[c#中的CPUID](http://devpinoy.org/blogs/cvega/archive/2006/04/07/2658.aspx)
*   从上面[关于 cpuid 的英特尔文档](http://www.intel.com/content/www/us/en/processors/processor-identification-cpuid-instruction-note.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T04:03:00.740

除了 ChileAddict 列出的工具，从 SCS v9.0 开始，SCS 下载包还包括另一个名为 PlatformDiscovery 的工具。此工具提供平台中英特尔功能的摘要，包括防盗功能的存在（和版本）。

# java - 多态性错误？

> ID：11952373
> 
> 赞同：0
> 
> 时间：2012-08-14T12:34:17.833
> 
> 标签：java, android, polymorphism

`SimpleCursorAdapter`[是Android 文档](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)`CursorAdapter`中所述的间接子类。但

```
CursorAdapter cursorAdapter = new SimpleCursorAdapter(bla, bla, bla); 
```

从编译器产生错误：

```
Type mismatch: cannot convert from SimpleCursorAdapter to CursorAdapter 
```

然而这没有错误：

```
abstract class  A {
}

class B extends A {
}

class C extends B {
}

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        A c = new C();
    }
} 
```

文档是完全错误的，还是我遗漏了什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T12:36:38.530

我的猜测是你有另一种类型被称为`SimpleCursorAdapter`或`CursorAdapter`某处 - 检查你的导入语句。您应该导入`android.widget.SimpleCursorAdapter`和`android.widget.CursorAdapter`.

# java - 如何使用 Java2D 图形正确绘制具有紧密间距点的粗线？

> ID：11952377
> 
> 赞同：2
> 
> 时间：2012-08-14T12:34:34.433
> 
> 标签：java, graphics, java-2d, shapes

我正在尝试使用 Java2D 绘制地图。当我的地图被缩小时，我的道路上到处都是绘画文物。这是绘制完整美国州时屏幕的一小部分：

![以州级比例绘制的道路部分，展示了绘画文物](../Images/6fe7a91359e5b69070bcd84993b7597b.png)

放大后，这是一段类似的路段：

![以县级尺度绘制的路段，无绘图文物](../Images/c3dcde05e7cbb31f4d9883f4cd0368a7.png)

使用的线条样式是一条蓝色实线，宽度缩放为 2 个像素。我尝试了各种渲染提示和线连接规则，但似乎没有任何帮助。

我在运行 OS/X 10.8 的 Mac 上使用 Open JDK 1.7，这也可以在装有 Sun JDK 1.6 的 Linux 机器上重现。

Java2D 中的所有形状和变换都尽可能是双精度的。线条的几何形状有许多相距很近的点，我怀疑绘图伪影的原因是渲染器被比单个像素更近的连续点弄糊涂了。

有没有办法在不细化点的情况下改善缩小形状的外观？

**编辑** 绘图伪影位于单独的线段相交的点，因此丢失的像素与线帽（末端）不相交有关，即使端点相同。此图像显示了两条线段之间的交汇点。我已经以 7 像素缩放的线条样式（与白色异或）突出显示了每个线段，但如果您仔细观察，您仍然可以看到原始蓝线的一部分（这是由于圆顶重叠和 XOR 绘制模式.) 在普通比例下，两端似乎重叠，但在普通绘画模式下缩小和返回时，会出现断线效果。

一种解决方法是在绘制之前将所有连续的线段连接在一起，但我仍然想知道绘制伪影的真正原因。

![在两个路段之间连接](../Images/0f788e60f7bfe6c8e3088adb5f0ba688.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:23:21.957

请检查[Xiaolin Wu的线路算法](http://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm)它应该回答你的问题！

基本概念

```
function plot(x, y, c) is
plot the pixel at (x, y) with brightness c (where 0 ≤ c ≤ 1)

function ipart(x) is
return integer part of x

function round(x) is
return ipart(x + 0.5)

function fpart(x) is
return fractional part of x

function rfpart(x) is
return 1 - fpart(x)

function drawLine(x1,y1,x2,y2) is
dx = x2 - x1
dy = y2 - y1
if abs(dx) < abs(dy) then                 
  swap x1, y1
  swap x2, y2
  swap dx, dy
end if
if x2 < x1
  swap x1, x2
  swap y1, y2
end if
gradient = dy / dx

// handle first endpoint
xend = round(x1)
yend = y1 + gradient * (xend - x1)
xgap = rfpart(x1 + 0.5)
xpxl1 = xend  // this will be used in the main loop
ypxl1 = ipart(yend)
plot(xpxl1, ypxl1, rfpart(yend) * xgap)
plot(xpxl1, ypxl1 + 1, fpart(yend) * xgap)
intery = yend + gradient // first y-intersection for the main loop

// handle second endpoint
xend = round (x2)
yend = y2 + gradient * (xend - x2)
xgap = fpart(x2 + 0.5)
xpxl2 = xend  // this will be used in the main loop
ypxl2 = ipart (yend)
plot (xpxl2, ypxl2, rfpart (yend) * xgap)
plot (xpxl2, ypxl2 + 1, fpart (yend) * xgap)

// main loop
for x from xpxl1 + 1 to xpxl2 - 1 do
    plot (x, ipart (intery), rfpart (intery))
    plot (x, ipart (intery) + 1, fpart (intery))
    intery = intery + gradient
end function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:53:01.917

我无法重现您使用 OS X 1.6 JDK 的情况，但我仍有一些建议给您。

如果您只是使用它来概述状态，请考虑使用[`GeneralPath`class](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/GeneralPath.html)。您可以使用该`lineTo(x,y)`方法在线上建立每个点。同样，因为我无法使用 重新创建您的问题`Line2D.Double`，所以我不知道这是否真的会有所不同。

其次，可能更重要的是，你是如何放大和缩小的。我在我的对象上使用[`AffineTransform`](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/AffineTransform.html)(with `setScaleTo(x,y)`) `Graphics2D`，一切都在顺利进行。与通过缩放因子（或您可以做的任何其他事情）缩放数据中的点的替代方法相比，这相当容易。您还必须按因子调整线条的笔触，因为它会缩小所有内容。如果您愿意，我可以发布屏幕截图。

# java - 用于更改多个文件中的字符串的脚本

> ID：11952380
> 
> 赞同：1
> 
> 时间：2012-08-14T12:34:51.547
> 
> 标签：java, replace

我想从包含 Java 文件的当前文件夹中替换：

```
ColorTee.testh = new TestH(A,"JavaFileName".class); 
ColorTee.testh.addFile(C,"/folder1/folder2/folder3/file","myFile") 
```

和：

```
ColorTee.testh = new TestH(value1,A,"JavaFileName".class); 
ColorTee.testh.addFile(C,"/folder3/file","myFile") 
```

对于第二行，我只想删除`/folder1/folder2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:26:54.167

就在日食：

[http://www.saltycrane.com/blog/2007/03/how-to-do-global-searchreplace-across/](http://www.saltycrane.com/blog/2007/03/how-to-do-global-searchreplace-across/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:44:04.037

您可以使用 Perl 脚本。例如，这是我的 zsh 中的一个：

```
change () {
        from=$1 
        shift
        to=$1 
        shift
        for file in $*
        do
                perl -i.bak -p -e "s{$from}{$to}g;" $file
                echo "Changing $from to $to in $file"
        done
} 
```

并利用 shell 文件名通配等，例如

```
$ change From To **/*.java 
```

另一种方法是不更改您的方法调用，而是更改方法的工作方式，并剥离初始路径组件。这不是很好，并且还*强烈*依赖于实际的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:41:01.920

你应该这样做：

```
String path = "/folder1/folder2/folder3/file";
ColorTee.testh.addFile(C,path,"myFile")
ColorTee.testh.addFile(C,path.replace("/folder1/folder2", ""),"myFile"); 
```

# html - 如何修复底部的水平线和标签顶部的文本

> ID：11952383
> 
> 赞同：0
> 
> 时间：2012-08-14T12:35:01.907
> 
> 标签：html, css

我有一个带有单个 TR 标签和两个 TD 标签的 HTML 表。每个 TD 中有两条水平线或 HR 标记，带有一些文本。所以我想修复每列底部的 TD 和水平线顶部的文本。

这是示例代码。

```
 <html>
<body>
    <table width="100%">
        <tr>
            <td style="text-align: left; width: 50%;">
                sdbasdbmnsadbmnasdsad
                <br />
                sdbasdbmnsadbmnasdsad
                <br />
                sdbasdbmnsadbmnasdsad
                <br />
                sdbasdbmnsadbmnasdsad
                <br />
                sdbasdbmnsadbmnasdsad
                <hr width="40%" />
            </td>
            <td style="text-align: left; width: 50%;">
                sdbasdbmnsadbmnasdsad
                <br />
                sdbasdbmnsadbmnasdsad
                <br />
                sdbasdbmnsadbmnasdsad
                <br />
                <hr width="40%" />
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:41:28.743

我会删除`<hr>`并简单地在每个底部添加一个边框`<td>`：

```
<td style="text-align: left; width: 50%; border-bottom: 1px solid red;"></td> 
```

如果您想保留`<hr>`（例如，如果它没有那么宽，请`<td>`使用 this 代替：

```
<hr style="display:inline-block; width:40%;"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:42:13.593

我会摆脱这些`hr`元素，并使用`border-bottom`CSS 属性在`td`底部呈现线条，并将`vertical-align`文本强制到顶部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:43:21.450

`hr`在's的文本行下方创建一行

```
<tr>
  <td>
    Text
  </td>
  <td>
    Text
  </td>
</tr>
<tr>
  <td>
    <hr width="40%" />
  </td>
  <td>
    <hr width="40%" />
  </td>
</tr> 
```

现在您可以控制各个行的高度以获得您想要的任何间距

# php - 请帮我猜猜这个混合验证码

> ID：11952389
> 
> 赞同：1
> 
> 时间：2012-08-14T12:35:19.427
> 
> 标签：php, hybridauth

有人可以帮我猜出这段代码吗？这只是一个片段，我想我包含了我的问题所需的所有代码。实际上这段代码来自hybridAuth。我的问题是，最后一行的“user_id”来自哪里？我想知道，因为 $_SESSION["user"] 给出了“id”的值。而且我想制作另一个 $_SESSION[" "] 我可以在其中放置数据库中 email-add 的值（该 user_id 的“id”存在的相同位置）

```
// create an instance for Hybridauth with the configuration file path as parameter
$hybridauth = new Hybrid_Auth( $hybridauth_config );

// try to authenticate the selected $provider
$adapter = $hybridauth->authenticate( $provider );

// grab the user profile
$user_profile = $adapter->getUserProfile();

// load user and authentication models, we will need them...
$authentication = $this->loadModel( "authentication" );
$user = $this->loadModel( "user" );

# 1 - check if user already have authenticated using this provider before
$authentication_info = $authentication->find_by_provider_uid( $provider, $user_profile->identifier );

# 2 - if authentication exists in the database, then we set the user as connected and redirect him to his profile page
if( $authentication_info ){
// 2.1 - store user_id in session
$_SESSION["user"] = $authentication_info["user_id"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:41:21.497

调用`$authentication->find_by_provider_uid()`返回一个关联数组，其中一个键是`user_id`.

要查看该调用返回了哪些其他列：

```
var_dump($authentication_info); 
```

如果`email`是该数组中的键，则可以将其设置为`$_SESSION`：

```
// Store the email into session if it is present in $authentication_info
// Use whatever the appropriate key you find, be it email, email_address, user_email, whatever...
$_SESSION['user_email'] = $authentication_info['email']; 
```

# asp.net - 如何使用来自 flash as3.0 的 aspx 脚本将字节数组转换为 mp3？

> ID：11952395
> 
> 赞同：0
> 
> 时间：2012-08-14T12:35:36.160
> 
> 标签：asp.net, actionscript-3, flash, bytearray, audio-recording

在 Flash as3.0 中，录制的语音存储在一个 BytesArray 变量中。现在需要将录制的声音存储为 .mp3 或 .wav 文件在 aspx 脚本中。任何可以帮助我？如何将字节数组转换为音频格式并将任何概念保存在服务器中，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:38:00.733

请参考我的代码。此代码是关于在录制您的声音后转换为 wav 或 mp3 保存的技能。转换后的输出 mp3 和 wav 文件保证了与 C 和 Java 的套接字通信。我在 Windows-xp(32bit) Windows7(64bit)、MacOSX、Android 中进行了测试。

这里使用的框架是链接。

WAVWriter: [WAVWriter](http://code.google.com/p/ghostcat/source/browse/trunk/ghostcatfp10/src/ghostcat/media/WAVWriter.as?r=424)

ShineMP3Encoder: [ShineMP3Encoder](http://code.google.com/p/flash-kikko/)

```
import com.adobe.audio.format.WAVWriter;
import fr.kikko.lab.ShineMP3Encoder;
import flash.events.SampleDataEvent;
import flash.media.Microphone;
import flash.media.Sound;
import flash.utils.ByteArray;
import flash.events.Event;

var mp3encoder:ShineMP3Encoder;
var microphone:Microphone;
var isRecording:Boolean=false;
var soundRecording:ByteArray;

function startMicRecording():void 
{
    isRecording=true;
    soundRecording = new ByteArray();
    microphone=Microphone.getMicrophone();
    microphone.rate=44;
    microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
}

function stopMicRecording():void {

    isRecording=false;
    microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
    soundRecording.position=0;

    convert2MP3();
}

function gotMicData(micData:SampleDataEvent):void 
{
    soundRecording.writeBytes(micData.data);
}

function convert2MP3():void
{
    var wavWrite:WAVWriter = new WAVWriter();
    wavWrite.numOfChannels=1;
    wavWrite.sampleBitRate=16;
    wavWrite.samplingRate=44100;

    var wav:ByteArray = new ByteArray();

    wavWrite.processSamples(wav, soundRecording, 44100,1);
    wav.position=0;

    /* 
     If the process is compressed into mp3 if you have big problems, 
     just as .wav format save. following code: 
     var file:FileReference = new FileReference();
     file.save(wav,"your_file_name.wav");
    */

    mp3encoder=new ShineMP3Encoder(wav);
    mp3encoder.addEventListener(Event.COMPLETE, onEncoded);
    mp3encoder.start();
}

function onEncoded(e:Event):void 
{
    mp3encoder.mp3Data.position=0;
    mp3encoder.saveAs("your_file_name.mp3");
}

startMicRecording(); 
```

# c# - Visual Studio 2010 安装程序（罗马尼亚语）

> ID：11952397
> 
> 赞同：3
> 
> 时间：2012-08-14T12:35:39.097
> 
> 标签：c#, visual-studio-2010, translation

我想用罗马尼亚语创建一个 Visual Studio 2010 安装程序，但我不知道该怎么做。

我在罗马尼亚语`C:\ProgramFiles\MsVS10.0\Common7\Tools\Deployment\VsdDialogs`的新文件夹中创建了一个新文件夹，并用.`1048``Orca`

然后我尝试修改注册表： `HKEY_CURRENT_USER\SOFTWEARE\Microsoft\VisualStudio\10.0_Config\Deployment\DialogTemplates`

并放`Languages-> Romanian`和。`Identifiers 1048``CodePages 1250`

现在罗马尼亚语出现在下拉菜单中，`VS2010->Setup->Localization`但我无法选择它。

该怎么办？

或任何其他关于如何以 Setup->Localization 中不存在的语言创建 VS2010 安装程序的解决方案。

非常感谢。

# php - 获取由 WINDOWTITLE 过滤的进程列表

> ID：11952402
> 
> 赞同：1
> 
> 时间：2012-08-14T12:35:57.227
> 
> 标签：php, windows-server-2008, exec, shell-exec, tasklist

我想获取具有特定 WINDOWTITLE 的 firefox 进程列表。

我已经通过使用 cron 和批处理文件成功地列出了它们。现在我想做同样的事情但是动态的。

所以我这样做了：

```
 foreach($TASK_LIST as $task){
      $out = array();
      $res = exec("tasklist /FI \"IMAGENAME eq firefox.exe\" /FI \"WINDOWTITLE eq $task\" /FO CSV /V",$out);
      var_dump($out);
   } 
```

问题是：我在 Windows Server 2008 下，tasklist 命令（用 PHP 执行）不返回 WINDOWTITLE，所以 $out 的内容是空的。在我的本地主机上它工作正常。当我在终端上编写相同的命令时，它也可以工作。

我试过了 ：

*   用 wmic 但我不能用这个过滤 WINDOWTITLE
*   将apache用户定义为当前用户
*   授予 apache 与桌面交互的权限
*   “shell_exec”而不是“exec”

有什么想法或建议吗？

# php - 如何将模态框上的选定值传递给 PHP？

> ID：11952407
> 
> 赞同：1
> 
> 时间：2012-08-14T12:36:23.590
> 
> 标签：php, jquery, modal-dialog

我有初始化模态框的代码：

```
<script>
var grid_modal_options = {
    height: 'auto',
    width: '80%',
    modal: true
};
function showProductsModalBox() {
    $("#products_modal_box").dialog(grid_modal_options);
    $("#products_modal_box").parent().appendTo('form:first');
}
</script>

<div id="products_modal_box" title="Products" style="display: none;">
  <div class="in">
    <div class="grid-12-12">
      <form id="products_modal_box_form" action="#" method="post">
    <table>
          <thead>
            <tr>
              <th>&nbsp;</th>
              <th>Product</th>
            </tr>
          </thead>
          <!-- Query for read mysql goes here (I skipped this line because it's not the main thing I'm gonna ask since it's run well) /-->
          <tbody>
          <?php
            //read the results
            while($fetch = mysqli_fetch_array($r)) {                
              print "<tr>";
              print "  <td><a href='#'>Choose</a></td>"; //--> How to return the value of $fetch[0]?
              print "  <td>" . $fetch[0] . "</td>"; //$fetch[0] == Product ID
              print "</tr>";
            }
          ?>
          </tbody>
        </table>
      </form>
    </div>
  </div>
</div> 
```

和：

```
<input type='text' id='products_id_textbox' name='products_id_textbox' />
<a href='#' onclick='showProductsModalBox(); return false;'>Choose products</a> 
```

代码成功显示模态框。但是如何将用户选择的“产品”返回到文本框“products_id_textbox”？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:42:17.097

添加内联javascript：

```
<?php
    while($fetch = mysqli_fetch_array($r)) {                
        print "<tr>";
        print "  <td><a href=\"javascript:;\" onclick=\"$('#products_id_textbox').val('".$fetch[0]."');$('#products_modal_box').dialog('close');\">Choose</a></td>"; //--> How to return the value of $fetch[0]?
        print "  <td>" . $fetch[0] . "</td>"; //$fetch[0] == Product ID
        print "</tr>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:34:03.637

而不是使用内联 JS，你可以这样写（或类似的东西）；

```
// php
while($fetch = mysqli_fetch_array($r)) {                
    print "<tr>";
    print "  <td><a rel='dialog' data-id='{$fetch[0]}'>Choose</a></td>";
    print "  <td>{$fetch[0]}</td>";
    print "</tr>";
}

// js
$(document).ready(function(){
...
$("a[rel=dialog]").each(function(){
   var id = this.getAttribute("data-id");
   $('#products_id_textbox').val(id);
   $('#products_modal_box').dialog('close');
}); 
```

# c# - .Net 中的 Ping.Send(ip, timeout) 返回太快并抱怨超时

> ID：11952413
> 
> 赞同：5
> 
> 时间：2012-08-14T12:36:52.603
> 
> 标签：c#, .net-4.0, network-programming

我反复使用这种方法来监视与本地网络中机器的连接。从 cmd 进行相同的测试时，结果稳定且一致：

```
C:\Windows\system32>ping -t 192.168.11.12

Pinging 192.168.11.12 with 32 bytes of data:
Reply from 192.168.11.12: bytes=32 time=1ms TTL=126
Reply from 192.168.11.12: bytes=32 time=1ms TTL=126 
```

但是，当从 C# 以 500 毫秒超时运行时，即使在超时到期之前它偶尔也会失败：

```
public void TestIpAnswersPing()
{
    var ip = "192.168.11.12";
    var timeout = TimeSpan.FromMilliseconds(500);

    var p = new Ping();

    foreach (var i in Enumerable.Range(0, 1000))
    {
        var start = DateTime.Now;
        PingReply reply = p.Send(ip, (int)timeout.TotalMilliseconds);

        if(reply.Status != IPStatus.Success)
        {
            Debug.Assert(DateTime.Now - start >= timeout);
        }
    }
} 
```

如果我将超时更改为 1 秒 - 全部成功通过，平均 ping 时间为 0.9 毫秒。

我发现的唯一类似的事情是 - [http://support.microsoft.com/kb/2533627](http://support.microsoft.com/kb/2533627)，它没有多大帮助。

为什么会发生这种情况以及如何监控高速连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T18:07:25.887

我有同样的问题并通过多次尝试修复它。而且不知道 Thread.Sleep(50); 是必要的，但它似乎有帮助。

缓冲区、超时、TTL 只是蛇油 ;)

```
 private PingReply Ping(string ip, int tryCount = 0)
    {
        var ping = new Ping();
        byte[] buffer = new byte[65500];

        var pingReply = ping.Send(ip, 500, buffer, new PingOptions(600, false));
        if (pingReply.Status == IPStatus.Success)
        {
            return pingReply;
        }

        if (tryCount < 5)
        {
            Thread.Sleep(50);
            return Ping(ip, tryCount + 1);
        }
        return pingReply;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-24T14:07:51.503

以防万一有人仍然有这个问题：由于某种原因， Thread.Sleep(50) 确实解决了这个问题。

# javascript - 原生 N:N 关系实体 crm 2011 上的 Javascript 选择

> ID：11952414
> 
> 赞同：0
> 
> 时间：2012-08-14T12:36:54.007
> 
> 标签：javascript, dynamics-crm-2011

有人知道如何在 CRM 2011 中查询 N:N 关系实体吗？

我正在使用库 CrmRestKit，我想选择我的关系实体 xxxx_relation_nn_entity1_entity2。

有没有办法知道这个实体中包含哪些字段以便我可以查询它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:27:17.443

有几种方法可以做到这一点，我没有使用过 CrmRestKit，但我假设这可以让你发出所有相同的调用，就好像你没有使用它一样。

您可以发出 FetchXml 查询，[Markus 博客](http://markuserlandsson.wordpress.com/2011/11/29/using-fetch-xml-to-get-data-from-javascript/)有一个如何执行此操作的示例。

您可以使用 Stunnware Tools 4.0 来帮助处理 FetchXml。[Stunnware > 产品 > Stunnware 工具 4.0](http://www.stunnware.com/)。

或者您也可以使用 OData 调用，[Lakshman](http://lakshmanindian.wordpress.com/2012/05/31/retrieve-multiple-using-odata-in-crm-2011/)有一个如何执行此操作的示例，他还包含指​​向 OData 设计器的链接。

Msdn 也有一些关于此的更多信息：[Data Access Using JavaScript](http://msdn.microsoft.com/en-us/library/hh771584#BKMK_DataAccessUsingJavaScript)。

希望有帮助

# ruby - Ruby csv 错误：UTF-8 中的无效字节序列

> ID：11952417
> 
> 赞同：2
> 
> 时间：2012-08-14T12:37:05.933
> 
> 标签：ruby, csv

```
[sagar@BL-53 RcTools]$ irb
1.9.3p0 :001 > require 'csv'
 => true
1.9.3p0 :002 > master = CSV.read("./public/jobs/in/Appexchange_Applications_Companies_487.csv")
ArgumentError: invalid byte sequence in UTF-8
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1855:in `sub!'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1855:in `block in shift'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1849:in `loop'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1849:in `shift'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1791:in `each'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1805:in `to_a'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1805:in `read'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1411:in `block in read'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1354:in `open'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/csv.rb:1411:in `read'
        from (irb):2
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>'
1.9.3p0 :003 > 
```

但是当我这样做时

```
1.9.3p0 :003 > master = CSV.open("./public/jobs/in/Appexchange_Applications_Companies_487.csv","r")
 => <#CSV io_type:File io_path:"./public/jobs/in/Appexchange_Applications_Companies_487.csv" encoding:UTF-8 lineno:0 col_sep:"," row_sep:"\r\n" quote_char:"\"">
1.9.3p0 :004 > 
```

我只想知道为什么会发生这种情况以及解决方案是什么。我想读取 csv，因为它返回该 csv 的数组。因此，如果我以第一种方式读取文件，例如

```
master = CSV.read("./public/jobs/in/Appexchange_Applications_Companies_487.csv") 
```

它返回给我一个数组

```
1.9.3p0 :008 > master.class
 => Array 
```

但在第二种情况下，类是 CSV。以第一种方式读取 csv 的解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:23:10.177

关于错误：首先，确保您使用正确的字符编码。如果你这样做了，那么你的 csv 文件中可能有无效的数据。您可能可以使用 iconv 修复它（请参阅 Chetan Muneshwar 发布的链接）。

关于你问题的第二部分：`CSV.open`只是打开文件进行阅读，但还没有阅读。`CSV.read`将打开文件，读取其内容，然后再次关闭它。因此，只需从文件中获取数据，请使用`CSV.read`.

# c++ - 从 Box 计算 AABB（中心、halfSize、旋转）

> ID：11952429
> 
> 赞同：1
> 
> 时间：2012-08-14T12:38:01.477
> 
> 标签：c++, rotation, game-physics, bounding-box, aabb

我想从我的 Box 类中计算 AABB（轴对齐边界框）。

盒子类：

```
Box{
    Point3D center; //x,y,z
    Point3D halfSize; //x,y,z
    Point3D rotation; //x,y,z rotation
}; 
```

AABB 类（方框，但没有旋转）：

```
BoundingBox{
    Point3D center; //x,y,z
    Point3D halfSize; //x,y,z
}; 
```

Ofc，当`rotation = (0,0,0), BoundingBox = Box`. 但是如何计算包含 Box 中所有内容的最小 BoundingBox when`rotation = (rx,ry,rz)`呢？

如果有人问：旋转是弧度，我在 DirectX 矩阵旋转中使用它：

```
XMMATRIX rotX = XMMatrixRotationX( rotation.getX() );
XMMATRIX rotY = XMMatrixRotationY( rotation.getY() );
XMMATRIX rotZ = XMMatrixRotationZ( rotation.getZ() );
XMMATRIX scale = XMMatrixScaling( 1.0f, 1.0f, 1.0f );
XMMATRIX translate = XMMatrixTranslation( center.getX(), center.getY(), center.getZ() );
XMMATRIX worldM = scale * rotX * rotY * rotZ * translate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:14:52.950

您可以在笛卡尔坐标中使用矩阵旋转。角度 A 绕 x 轴的旋转由矩阵定义：

```
 1     0      0 
    Rx(A) =  0   cos(A)  -sin(A) 
             0   sin(A)   cos(A) 
```

如果你对围绕 y 的角度 B 和围绕 z 的 C 执行相同的操作，你有：

```
 cos(B)     0      sin(B) 
    Ry(B) =    0        1        0 
            -sin(B)     0      cos(A) 
```

和

```
 cos(C)   -sin(C)  0 
Rz(C) =  sin(C)    cos(C)  0 
           0         0     1 
```

有了这个，你可以计算（甚至分析）最终的旋转矩阵。假设您（按此顺序）沿 z 旋转，然后沿 y 旋转，然后沿 x 旋转（注意轴 x、y、z 在空间中是固定的，它们不会在每次旋转时旋转）。最终矩阵是乘积：

```
R = Rx(A) Ry(B) Rz(C) 
```

现在您可以使用六个角的位置构造向量，并将完整的旋转矩阵应用于这些向量。这将给出旋转版本中六个角的位置。然后只需计算对角之间的距离，您就有了新的边界框尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:46:06.797

`x`好吧，您应该在原始边界框的顶点上应用旋转（为了计算的目的） ，`y`然后遍历所有顶点以找到`z`所有顶点的 min 和 max 。这将定义您的轴对齐边界框。这就是它最基本的形式，你应该试着弄清楚细节。我希望这是一个好的开始。:)

# java - Java 并行线程

> ID：11952432
> 
> 赞同：0
> 
> 时间：2012-08-14T12:38:20.270
> 
> 标签：java, multithreading

```
public class Signal2NoiseRatio
{
    public ImagePlus SingleSNR(ImagePlus imagePlus) throws InterruptedException
    {

        new Thread()
        { 
          @Override public void run() 
          { 
              JFrame imageFrame = new JFrame("ROI");
              Container imageFrame_Container = imageFrame.getContentPane();
              IIImagePanel imagePanel = new IIImagePanel();
              imageFrame_Container.add(imagePanel);
              imagePanel.setImage(imagePlus.getImage());
              imagePanel.getDisplayedImage();
              imageFrame.setVisible(true);
              final SNRSingleImageListener sNRSingleListener = new SNRSingleImageListener(imagePanel);  
              imagePanel.addMouseListener(sNRSingleListener);
              imagePanel.addMouseMotionListener(sNRSingleListener);
          }
        }.start();

        new Thread() 
    { 
      @Override public void run() 
      { 

          for (int i = 0; i <= 2000; i++)
          { 
             System.out.println("schleife "+i);
                     // ask if useractions are done ..
          }

          synchronized( Signal2NoiseRatio.this ) 
          { 

             Signal2NoiseRatio.this.notifyAll(); 

          }
      }
    }.start();

        synchronized (this) 
        {
        this.wait();
            // if userinteractions are done, go on
        }

        return imagePlusToProcess;
    }
} 
```

第一个`new Thread()`执行一个在其中呈现图像的帧。我的意图是在新线程中呈现图像以等待图像上的一些用户交互。但是代码将框架引导到一个白色窗口，图像不可见，框架不可用。

在第二个线程中，我想在短时间内询问用户操作是否已完成。

这不是一个很好的解决方案，但有可能吗？这里有什么问题？

谢谢你的堆栈溢出！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:46:49.337

我可以在这里看到一些问题：

1.如果这个

```
synchronized (this) 
{
    this.wait();
    // if userinteractions are done, go on
} 
```

正在 UI 线程上发生，那么您将阻止它接收用户输入（或执行任何其他操作），直到对象发出信号。

2.这部分似乎过于复杂：

```
 new Thread() {
        @Override
        public void run() {

            for (int i = 0; i <= 2000; i++) {
                System.out.println("schleife " + i);
                // ask if useractions are done ..
            }

            synchronized (Signal2NoiseRatio.this) {

                Signal2NoiseRatio.this.notifyAll();

            }
        }
    }.start();

    synchronized (this) {
        this.wait();
        // if userinteractions are done, go on
    } 
```

只需使用：

```
 Thread t = new Thread() {
        @Override
        public void run() {

            for (int i = 0; i <= 2000; i++) {
                System.out.println("schleife " + i);
                // ask if useractions are done ..
            }

        }
    }.start();

    t.join(); 
```

除非你发出的信号比你上面所说的要多。但同样，这是多余的，因为启动一个线程只是为了等待它完成没有多大意义......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:18:36.073

问题解决了。

该方法的调用者是一个 AWT 线程。我为调用者创建了一个新线程，因此 AWT-Thread 没有被阻塞，然后帧和图像可以正确显示。

感谢大家的帮助。

# php - 在一个 pgm 中包含许多 php 文件并捕获错误

> ID：11952435
> 
> 赞同：0
> 
> 时间：2012-08-14T12:38:38.637
> 
> 标签：php, ftp, include, pgm

我在不同的时间为每个 cronjob 调用一个 php pgm。pgm 包含许多 php 文件。每个文件都向合作伙伴发送或获取数据。

我如何处理包括 pgm 在内的错误。

当时，包含的 pgm 中的一个 ftp 连接失败，因此完整的脚本崩溃了。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:47:20.370

您应该将可能崩溃的代码包装到`try/catch`构造中。这将引发异常，但脚本将继续工作。更多[在这里](http://php.net/manual/en/language.exceptions.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:58:28.060

需要更多地了解您的代码才能给您明确的答案。

通常 php 错误是不可捕获的，除非您定义自己的错误处理程序，您自己从中抛出异常。使用下面的代码可以捕获大多数运行时错误（只要它们不被认为是致命的）

```
error_reporing(E_ALL);

set_error_handler(function($errno, $errstr, $errfile, $errline) {
  if($errno == E_STRICT || $errno == E_DEPRECATED) {
    return true;
  }
  throw new RuntimeException('Triggered error (code '.$errno.') with message "'.$errstr.'"');
}); 
```

顺便说一句，您还可以定义自己的异常处理程序，以在未捕获异常时显示带有完整堆栈跟踪的触发错误。

注意！我不建议您在没有经过严格测试的情况下将此代码添加到生产网站，以确保一切仍按预期工作。

编辑：

我不知道您的代码是什么样的，但我想您可以执行以下操作：

```
require 'error-handler.php'; // where you have your error handler (the code seen above)

$files_to_include = array(
  'some-file.php',
  'some-other-file.php',
  ...
);

foreach($files_to_include as $file) {
  try {
    include $file;
  }
  catch(Exception $e) {
    echo "$file failed\nMessage: ".$e->getMessage()."\nTrace:\n".$e->getTraceAsString();
  }
} 
```

# ruby-on-rails - Rails 在应用程序 ubuntu 中连接 Postgresql 数据库

> ID：11952440
> 
> 赞同：0
> 
> 时间：2012-08-14T12:39:21.133
> 
> 标签：ruby-on-rails, database, postgresql

我正在使用**ubuntu 12.04**和**rails 3.2**。我正在创建一个使用**PostgreSQL**数据库的 rails 应用程序。我使用以下命令安装了 postgresql：

```
sudo apt-get install postgresql 
```

作为参考，我查看了[https://help.ubuntu.com/community/PostgreSQL](https://help.ubuntu.com/community/PostgreSQL)。后来我创建了用户 postgres 并使用以下命令设置密码 postgres

```
sudo -u postgres psql postgres
\password postgres 
```

接下来，我使用以下方法创建了数据库：

```
 sudo -u postgres createdb mydb 
```

我尝试使用用户名**postgres**和密码**postgres**连接 Postgresql，并使用以下命令成功连接：

```
psql -U postgres -h localhost
Password for user postgres:
psql (9.1.4)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
postgres=# 
```

在我的 rails 应用程序中，我的 database.yml 具有以下代码：

```
development:
 adapter: postgresql
 encoding: unicode
 database: mydb_development
 pool: 5
 username: postgres
 password: postgres

test:
 adapter: postgresql
 encoding: unicode
 database: mydb_test
 pool: 5
 username: postgres
 password: postgres

production:
 adapter: postgresql
 encoding: unicode
 database: mydb_production
 pool: 5
 username: postgres
 password: postgres 
```

现在，当我运行命令时`rake db:migrate`，出现以下错误：

```
rake aborted!
FATAL:  Peer authentication failed for user "postgres" 
```

我尝试将 host: localhost 添加到每个环境的 database.yml 中，但出现以下错误：

```
rake aborted!
couldn't parse YAML at line 28 column 0 
```

第 28 行是

```
development:
 adapter: postgresql
 encoding: unicode
 database: hackathonio_development
 pool: 5
 username: postgres
 password: testing
 host: localhost {This is line 28} 
```

请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:28:16.353

我想你可能有2个问题。首先，没有像 Shreyas 指出的那样设置主机。但我相信第二个问题是，当您设置主机名时，Rails 试图通过 tcp 套接字而不是本地 ruby​​ 套接字连接到 PostgreSQL。我的猜测是您需要修改`pg_hba.conf`文件以允许 postgres 通过 localhost 登录。以下是一些 SO 问题，其答案可能会有所帮助。

[Rails 无法登录到 postgresql - PG::Error - 密码 - 正确信息](https://stackoverflow.com/questions/9630177/rails-cant-login-to-postgresql-pgerror-password-correct-info)

[pg_hba.conf 中的“local”和“localhost”连接类型有什么区别？](https://stackoverflow.com/questions/11913897/postgres-whats-the-difference-between-local-and-localhost-connection-type)

[无法在 ubuntu 10.04 服务器上的 rails 3 的新数据库中使用 postgres 用户](https://stackoverflow.com/questions/8246950/cant-use-postgres-user-in-new-database-for-rails-3-on-ubuntu-10-04-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:46:18.897

请将主机作为 localhost 添加到您的 yml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:57:41.150

我的建议：

**步骤1**

通过运行创建一个新的、不同的用户

```
$ createuser <username> 
```

在命令行上。系统会提示您输入密码等（示例/文档：[http](http://www.postgresql.org/docs/8.1/static/app-createuser.html) ://www.postgresql.org/docs/8.1/static/app-createuser.html ）

**第2步**

`database.yml`使用新用户的用户名/密码进行更新。至少暂时忘记您创建的第一个用户。

**第2步**

```
$ rake db:create 
```

**第 3 步**

```
$ rake db:migrate 
```

我认为这些步骤比你正在尝试的更有可能奏效。

# json - JSON到可用数组javascript

> ID：11952446
> 
> 赞同：0
> 
> 时间：2012-08-14T12:39:49.923
> 
> 标签：json

我正在尝试将我的 JSON 代码转换为 javascript/jquery 中的可用数组。

我有以下通过 ajax 到达的 JSON 代码：

```
[{"id":"9","firstname":"Greg","surname":"Bril","position":"0","busy":"0","disabled":"0"},{"id":"14","firstname":"Nai","surname":"Brooks","position":"1","busy":"0","disabled":"0"},{"id":"17","firstname":"Margaret","surname":"Grey","position":"1","busy":"0","disabled":"0"},{"id":"1","firstname":"Cameron","surname":"Grover","position":"0","busy":"0","disabled":"0"},{"id":"2","firstname":"Sarah","surname":"Grover","position":"0","busy":"0","disabled":"0"},{"id":"3","firstname":"Margaret","surname":"Hynes","position":"0","busy":"0","disabled":"0"},{"id":"4","firstname":"Stephen","surname":"Hynes","position":"0","busy":"0","disabled":"0"},{"id":"11","firstname":"Ben","surname":"Mills","position":"1","busy":"0","disabled":"0"},{"id":"15","firstname":"Elizabeth","surname":"Mills","position":"1","busy":"0","disabled":"0"},{"id":"10","firstname":"Grant","surname":"Mills","position":"0","busy":"0","disabled":"0"},{"id":"16","firstname":"John","surname":"Mills","position":"1","busy":"0","disabled":"0"},{"id":"13","firstname":"Lucinda","surname":"Ower","position":"1","busy":"0","disabled":"0"},{"id":"12","firstname":"Karina","surname":"Scott","position":"1","busy":"0","disabled":"0"}] 
```

它是使用以下方法创建和解释的：

```
$.getJSON( "tc_search1.php", {
        leave: $("input#leave").val(),
        end: $("input#end").val(),
        override: $("#tc_override").is(":checked"),
        tc_id: $("#tc_id").val()
    }, function(data) {
         //i cant get this part to work
    }); 
```

我似乎无法让成功的功能发挥作用。我在 jquery 文档网站上尝试了 $.each 方法，但我做错了。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:43:13.743

该`getJSON`方法会自动将 JSON 字符串解析为 Javascript 对象。

成功回调函数中的`data`参数将是一个对象数组。例如，表达式`data[0].firstname`将返回`"Greg"`。

# android - android和ios设备之间的数据传输

> ID：11952454
> 
> 赞同：2
> 
> 时间：2012-08-14T12:40:36.500
> 
> 标签：android, ios, p2p

我想将一些数据（应用程序特定数据）从 ios 设备传输到为相应平台运行相同应用程序的 android 设备（反之亦然）。我知道实现这一目标的最简单方法是拥有一个中继服务器，它将从一个设备获取数据并将其传递给另一个设备。但是，我希望这可以在 wifi 网络（点对点）上实现，而无需在两者之间使用任何类型的服务器（就像他们在多人游戏中所做的那样）。

我试过gamekit，但它应该只能在ios设备上工作，不能支持android。也尝试了 alljoyn，但它还不适用于 ios。

任何尝试过这个或对如何进行有一些想法的人都非常欢迎他们的想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:04:29.270

我从来没有尝试过......但也许你可以使用 XML 文件来做到这一点......所以

1.  制作您要发送的数据的 XML 文件...
2.  使用蓝牙或以编程方式使用 wi-fi 发送该文件...
3.  在另一台设备上，您可以从 xml 文件中获取数据..

这就是你可以做到这一点的方法......

# java - android os 确定调用 gc 的策略是什么？

> ID：11952462
> 
> 赞同：0
> 
> 时间：2012-08-14T12:41:24.283
> 
> 标签：java, android, garbage-collection

```
public static class GoBack {
    public static Stack<Bundle> goBackStack;
｝ 
```

在我的 android 应用程序中，我编写了一个父类为 Application 的类，我声明了一个内部类，如上面的代码。

我的问题是，在我的应用程序在后台运行了很长时间然后回到应用程序后，goBackStack 始终为空。我不知道为什么？我该如何避免呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:49:51.323

`goBackStack`当 Android 决定终止您的应用程序时，您将立即变为 null。由于此变量在其他地方初始化，因此在重新启动您的应用程序后它仍然为空（因为它没有在第二次初始化）。

解决方案很简单——不要考虑静态变量，因为它们是持久存储。他们不是。改用`SharedPreferences`,`SQLite`数据库或文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:49:38.367

问题是你的整个过程最终都被杀死了。垃圾收集器不会收集静态引用的对象。

查看重新初始化您的数据或使用`onSavedInstanceState`. 或者，您可以考虑使用数据库或`SharedPreferences`持久化数据。

# installshield - 安装屏蔽 - 将 targetdir 设置为 c:\Test

> ID：11952466
> 
> 赞同：0
> 
> 时间：2012-08-14T12:41:30.607
> 
> 标签：installshield

我正在使用 Installshield 并希望将目标文件夹设置为**c:\test**。问题是对话框不允许这样做。解决方案是什么？

![在此处输入图像描述](../Images/a14cf2a61befc2e559f3933aceee239b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T19:02:53.090

您的对话框看起来像旧版本的 Installshield，但无论如何这可能会帮助其他想要做同样事情的人。

如果您不想（或不能）创建自定义目标路径（其他答案中描述的方法），一个简单的替代方法是将 INSTALLDIR 设置为 [WindowsVolume]test。

这会将工具安装在 C:\test 中。当然，如果系统没有 C: 驱动器，它会安装在可用驱动器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:15:08.860

看：

[Q104964：HOWTO：创建自定义目标路径](http://kb.flexerasoftware.com/selfservice/viewContent.do?externalID=Q104964)

顺便说一句，系统可能没有 C: 驱动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:31:03.267

如果我没记错的话，转到 OnFirstUIBefore 函数中的 Setup.rul 并添加以下行：

```
// Create a list for system information.
listInfo = ListCreate (STRINGLIST);

// Get the boot drive.
if (GetSystemInfo (BOOTUPDRIVE, nvResult, svResult) < 0) then
    szError = "Couldn't get BOOTUPDRIVE info.";
else
    TARGETDIR = svResult ^ "Test";
endif; 
```

这保证了如果 C:\ 不是启动驱动器，它将被更改为启动驱动器。

# php - 使用图形 API 更新 Facebook 事件

> ID：11952468
> 
> 赞同：1
> 
> 时间：2012-08-14T12:41:46.737
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在尝试更新由我的应用程序创建的现有 Facebook 事件。我正在使用 PHP SDK 创建事件，这里是创建事件的代码：

```
$access_token = $facebook->getAccessToken();
$page_id = $_SESSION['FAN_PAGE_ID'];

// Now, getting the PAGE Access token, using the user access token

$page_token_url = "https://graph.facebook.com/$page_id?fields=access_token&" . $access_token;
$response = file_get_contents($page_token_url);

// Parse the return value and get the Page access token
$resp_obj = json_decode($response,true);

$page_access_token = $resp_obj['access_token'];

$event_param = array(
    "access_token" =>$page_access_token,
    "name" => $postEventName,
    "start_time" => $postEventDate,
    "page_id" => $postFanPageID,
    "description" => $eventDescription,
    "location" => $location
);

try
{
   $fb_event_id = $facebook->api("/$postFanPageID/events", "POST", $event_param);
}
catch (FacebookApiException $e)
{
   echo $e->getMessage();
} 
```

这是成功创建事件。但我还没有找到任何关于更新事件的文档。

我尝试使用相同的调用，但提供了我现有的`eventID`：

```
$facebook->api("/$postFanPageID/events/$facebookEventID", "POST", $event_param); 
```

刚刚创建了一个新事件。

我试过使用这个（类似于删除事件的代码）：

```
$facebook->api($facebookEventID, 'UPDATE', $event_param); 
```

但这又回来了：`Unsupported method`由 Facebook。

如何更新活动？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:55:44.933

要编辑事件，您必须仅针对事件 ID 发布 - 所以*不是* `/$postFanPageID/events/$facebookEventID`，而是`/$facebookEventID`相反。

See [https://developers.facebook.com/docs/reference/api/user/#events](https://developers.facebook.com/docs/reference/api/user/#events), [https://developers.facebook.com/docs/reference/api/page/#events](https://developers.facebook.com/docs/reference/api/page/#events)

# php - 在 PHP 中正确防止邮件注入

> ID：11952473
> 
> 赞同：9
> 
> 时间：2012-08-14T12:42:09.197
> 
> 标签：php, sendmail, email

你能告诉我如何在不丢失原始消息数据的情况下防止PHP 中的[电子邮件注入吗？](http://en.wikipedia.org/wiki/Email_injection)`mail()`例如，如果我需要允许用户使用`\r\n`,`To`等`CC`，所以我不想将它们从消息中完全剥离 - 我仍然希望它们被传递，但不添加任何额外的标题或以某种方式允许邮件注入发生。

互联网上的大多数建议都建议完全删除这些数据 - 但我不想这样做。

我通过 PHP`mail()`函数发送纯文本（非 HTML）消息。

你有什么建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T12:52:46.933

要过滤在收件人电子邮件字段中使用的有效电子邮件，请查看[`filter_var()`](http://us3.php.net/manual/en/function.filter-var.php)：

```
$email = filter_var($_POST['recipient_email'], FILTER_VALIDATE_EMAIL);

if ($email === FALSE) {
    echo 'Invalid email';
    exit(1);
} 
```

这将确保您的用户只提供单个有效的电子邮件，然后您可以将其传递给该`mail()`函数。据我所知，没有办法使用 PHP`mail()`函数通过消息体注入标头，因此数据不需要任何特殊处理。

**更新：**

根据[文档`mail()`](http://us3.php.net/manual/en/function.mail.php)，当它直接与 SMTP 服务器通信时，您需要防止消息正文中的句号：

```
$body = str_replace("\n.", "\n..", $body); 
```

**更新#2：**

显然，也可以通过主题注入，但是由于没有`FILTER_VALIDATE_EMAIL_SUBJECT`，您需要自己进行过滤：

```
$subject = str_ireplace(array("\r", "\n", '%0A', '%0D'), '', $_POST['subject']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T12:54:20.643

假设您想将访问者的电子邮件地址放在可选的标题字段中，如下所示：

```
$headers = "From: $visitorEmailAddress"; 
```

然而，如果

> $访问者电子邮件地址

包含

> “地址@email.com\n\n密件抄送：spam@v1agra.com”

你让自己成为垃圾邮件主机，为邮件注入打开了大门。这是一个非常简单的示例，但有创意的垃圾邮件发送者和恶意黑客可能会在您的电子邮件中潜入具有潜在破坏性的脚本，因为电子邮件是作为纯文本文件发送的。甚至附件也被转换为纯文本，并且它们可以通过添加 mimetype 内容行轻松发送附件。

如果您对 FROM 和/或 TO 字段的表单验证没问题，您必须查看电子邮件正文的表单验证。我会去掉 '-=' 和 '=-' 字符，并防止用户使用`strip_tags()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T21:30:15.677

试试这个以查看各种选项：

[http://www.codeproject.com/Articles/428076/PHP-Mail-Injection-Protection-and-E-Mail-Validatio](http://www.codeproject.com/Articles/428076/PHP-Mail-Injection-Protection-and-E-Mail-Validatio)

它涵盖了几个选项，并试图解释每个选项的好处和风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T17:20:57.867

使用指定的 mime 电子邮件库，例如[`Mail_Mime`](https://pear.php.net/manual/en/package.mail.mail-mime.example.php)：

```
<?php
include 'Mail.php';
include 'Mail/mime.php' ;

$mime = new Mail_mime();

$mime->setTXTBody("Message goes here");
$hdrs = $mime->headers(array(
    'From'    => 'you@yourdomain.com',
    'Subject' => 'Test mime message'
));
$body = $mime->get();

$mail = &Mail::factory('mail');
$mail->send('postmaster@localhost', $hdrs, $body);

?> 
```

# c# - 如何将字符代码大于127的字符串正确转换为字节数组？

> ID：11952474
> 
> 赞同：4
> 
> 时间：2012-08-14T12:42:09.490
> 
> 标签：c#, .net, character-encoding, ascii

我正在从另一个系统检索使用代码页 437 编码的 ASCII 字符串，我需要将其转换为 Unicode，以便它们可以与其他 Unicode 字符串混合。

这就是我正在使用的：

```
var asciiString = "\u0094"; // 94 corresponds represents 'ö' in code page 437.

var asciiEncoding = Encoding.GetEncoding(437);
var unicodeEncoding = Encoding.Unicode;

// This is what I attempted to do but it seems not to be able to support the eight bit. Characters using the eight bit are replaced with '?' (0x3F)
var asciiBytes = asciiEncoding.GetBytes(asciiString);

// This work-around does the job, but there must be built in functionality to do this?
//var asciiBytes = asciiString.Select(c => (byte)c).ToArray();

// This piece of code happliy converts the character correctly to unicode { 0x94 } => { 0xF6, 0x0 } .
var unicodeBytes = Encoding.Convert(asciiEncoding, unicodeEncoding, asciiBytes);
var unicodeString = unicodeEncoding.GetString(unicodeBytes); // I want this to be 'ö'. 
```

我正在苦苦挣扎的是，我在 .NET 框架中找不到合适的方法来将字符代码高于 127 的字符串转换为字节数组。这看起来很奇怪，因为那里支持将具有 127 以上字符的字节数组转换为 Unicode 字符串。

所以我的问题是，是否有任何内置方法可以正确进行此转换，或者我的解决方法是正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:44:56.417

```
var asciiString = "\u0094"; 
```

不管你给它起什么名字，它总是一个[Unicode](http://en.wikipedia.org/wiki/Unicode)字符串。.NET 只有 Unicode 字符串。

> 我正在从另一个系统检索使用代码页 437 编码的 ASCII 字符串

将传入数据视为`byte[]`，而不是`string`。

```
var asciiBytes = new byte[] { 0x94 }; // 94 corresponds represents 'ö' in code page 437.

var asciiEncoding = Encoding.GetEncoding(437);    

var unicodeString = asciiEncoding.GetString(asciiBytes); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T12:52:13.750

`\u0094`是*Unicode 代码点*0094，它是一个**控制字符**；它**不是** `ö`。如果你愿意`ö`，正确的字符串是

```
string s = "ö"; 
```

这是带有分音符号的拉丁小写字母 O，又名代码点 00F6。

所以：

```
var s = "\u00F6"; // Identical to "ö" 
```

现在我们得到我们的编码：

```
var enc = Encoding.GetEncoding(437);
var bytes = enc.GetBytes(s); 
```

我们发现它是一个单字节十进制 148，也就是十六进制 94 - 即你所追求的。

这里的意义在于，在 C# 中，当您使用`"\uXXXX"`语法时，XXXX**始终**指的是 Unicode 代码点，*而不是*某些特定编码中的编码值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:48:59.530

您必须更早地查看代码。一旦您将数据作为字符串，它就已经被解码。在该解码中丢失的任何字符都无法找回。

您需要将输入作为字节，以便您可以使用代码页 437 的编码对象将其解码为字符串。

```
byte[] asciiData = new byte[] { 0x94 }; // character ö in codepage 437

Encoding asciiEncoding = Encoding.GetEncoding(437);

string unicodeString = asciiEncoding.GetString(asciiData);

Console.WriteLine(unicodeString); 
```

输出：

```
ö 
```

# php - 检索循环文本框

> ID：11952478
> 
> 赞同：0
> 
> 时间：2012-08-14T12:42:20.843
> 
> 标签：php

page_form.php

```
echo '<div style="text-align:center;margin-left:25px;">
          <form action="grad.php" method="post">               
            <table width-"100%">
                  <tr><th style="padding:12px;">LETTER </th>
                      <th style="padding:12px;">INTERVAL</th>
                      <th style="padding:12px;">GT</th>
                  </tr>';
                 for($i=0;$i<=5;$i++)
                  {
                   echo '<tr><td style="padding:12px;"><input type="text" name="letter_'.$i.'"></td>
                             <td style="padding:12px;"><input type="text" name="interval'.$i.'"></td>
                             <td style="padding:12px;"><input type="text" name="gt'.$i.'"></td>
                         </tr>';
                  }
                  echo '<tr><td><input type="submit" name="submit" value="submit"></td></tr>';
           echo '</table>
         </form>
        </div>'; 
```

毕业文件

```
$letter = $_POST['letter']; 
     $interval = $_POST['interval']; 
     $gt = $_POST['gt']; 
$s = mysql_query("INSERT INTO grad_table(letter,markint,gradepoint) VALUES('$letter',$interval,$gt) "); 
```

我已经在 forloop 中给出了所有文本框。当我单击提交时，我需要获取所有 5 个文本框值，但现在我只获取第一行。

数据库结构

```
 Field   Type          Collation      Attributes     Extra
     id    bigint(10)                    UNSIGNED     AUTO_INCREMENT
   letter  varchar(255)  utf+general_ci  
   markint  bigint(10)
     gt     bigint(10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:45:50.820

您的文本框名称不是`letter`，因为您正在使用它们 - 它们是`letter_0`,`letter_1`等。

此外，`interval`它是一个[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，您需要使用反引号对其进行转义：``interval``.

要检索所有这些，您可以硬编码它们的所有名称，例如`$letter1 = $_POST['letter_1'];`，或者您可以在另一个循环中执行它：

```
for ($i=0; $i<5; $i++) {
    $letter = $_POST['letter_' . $i]; 
    $interval = $_POST['interval' . $i]; 
    $gt = $_POST['gt' . $i]; 
    $s = mysql_query("INSERT INTO `grad_table` (`letter`, `interval`, `gt`) VALUES ('$letter',$interval,$gt)");
} 
```

这里要注意的一件大事是，您应该在将用户输入插入数据库之前真正验证它。首先，您可以`isset()`在访问变量之前使用，以确保用户提交了数据。其次，您可以使用`mysql_real_escape_string()`清理字符串输入和`intval()`整数：

```
for ($i=0; $i<5; $i++) {
    // check that each field is posted
    if (!isset($_POST['letter_' . $i]) || !isset($_POST['interval' . $i]) || !isset($_POST['gt' . $i])) continue;

    // assign & sanitize
    $letter = mysql_real_escape_string($_POST['letter_' . $i]); 
    $interval = intval($_POST['interval' . $i]); 
    $gt = intval($_POST['gt' . $i]); 
    $s = mysql_query("INSERT INTO `grad_table` (`letter`, `interval`, `gt`) VALUES ('$letter',$interval,$gt) ");
} 
```

现在，这不会“验证”您的数据，但至少它有助于防止 SQL 注入和简单的 PHP 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:46:29.243

您的帖子数据应包含`$_POST['interval0']`, `$_POST['interval1']`, `$_POST['interval2']`...

你将不得不通过每一个拖网`$_POST`得到所有的答案。坦率地说，我很惊讶您会使用您的代码获得*任何*发布数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:47:49.363

你应该修改以下

```
for($i=0;$i<=5;$i++)
{
  echo '<tr><td style="padding:12px;"><input type="text" name="letter['.$i.']"></td>
  <td style="padding:12px;"><input type="text" name="interval['.$i.']"></td>
  <td style="padding:12px;"><input type="text" name="gt['.$i.']"></td>
  </tr>';
} 
```

然后你可以做以下

```
foreach($_POST['letter'] as $i=>$v) {
    mysql_query("INSERT INTO grad_table(letter,interval,gt) VALUES('{$_POST['letter'][$i]}',{$_POST['interval'][$i]},{$_POST['gt'][$i]}) ");
} 
```

# c++ - 浮点运算结果的再现性

> ID：11952480
> 
> 赞同：5
> 
> 时间：2012-08-14T12:42:48.463
> 
> 标签：c++, floating-point, fixed-point

浮点算术运算是否可能在不同的 CPU 上产生不同的结果？CPU是指所有x86和x64。并且通过不同的结果，我的意思是即使只有一个最不重要的位不同。我需要知道我是否可以在项目中使用浮点运算，在不同机器上获得与相同输入对应的完全相同的结果至关重要。

编辑：添加了 c++ 标签。
还要澄清：我需要可重现的结果运行时。我不希望从不同的编译中得到相同的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T13:30:39.477

在游戏行业，这被称为*确定性锁步*，对于客户端和服务器需要就物理对象（玩家、射弹、可变形地形等）的状态达成一致的实时网络游戏非常重要。

根据 Glenn Fiedler 的关于[浮点决定](http://gafferongames.com/networking-for-game-programmers/floating-point-determinism/)论的文章，​​答案是“*可能是一个响亮的跛行*”；如果您在相同的架构上运行相同的二进制文件*并*限制使用不如基本浮点指定的功能，那么您可以获得相同的结果。否则，如果您使用不同的编译器，或者允许您的代码使用 SSE 或 80 位浮点，那么不同的可执行文件和不同的机器之间的结果会有所不同。

Yosef Kreinin[建议](http://www.yosefk.com/blog/consistency-how-to-defeat-the-purpose-of-ieee-floating-point.html)：

*   扫描汇编程序输出以进行代数优化并将其应用于您的源代码；
*   抑制融合乘加和其他高级指令（例如`sin`三角函数）；
*   并使用 SSE 或 SSE2，或以其他方式将 FPU CSR 设置为 64 位。（是的，这与 Glenn Fiedler 的建议相冲突。）

当然，在多台不同的机器上*测试你的代码；*获取中间输出的哈希值，这样您就可以知道您的模拟在何时何地发散。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T16:17:24.180

如果你调用一个动态链接库，你可能会在不同的处理器上得到不同的代码。（例如，Mac OS X 上的 Accelerate 库在不同的处理器上使用其例程的不同实现。）

但是，如果您使用相同的可执行映像（包括所有库），这些映像不基于处理器模型进行调度并且具有相同的输入（包括对浮点模式或其他可能影响浮点的全局状态所做的任何更改），那么处理器对所有基本浮点运算（加、减、乘、除、比较、转换）产生相同的结果。

某些操作可能未完全指定为在不同的处理器上返回相同的结果，例如平方根反估计指令。

ecatmur 的回答中提到的关于编译器优化、融合乘加和 SSE/SSE2/FPU 使用的问题不适用于相同的二进制文件。只有当不同的编译（不同的开关、不同的目标平台、不同的编译器版本）可能产生不同的代码时，这些问题才适用。由于您已排除不同的编译，因此这些问题无关紧要。

如果您同时为 32 位目标 (i386) 和 64 位目标 (x86_64) 构建，那么您正在制作两个可执行映像（在一个“胖”文件中），并且需要考虑不同的编译器产品。

# jquery-mobile - Backbone 和 Jquery Mobile 渲染样式不起作用 - 用 CoffeeScript 编写

> ID：11952483
> 
> 赞同：1
> 
> 时间：2012-08-14T12:43:10.743
> 
> 标签：jquery-mobile, backbone.js, coffeescript

我正在使用主干 jquery 移动和咖啡脚本来开发一个简单的 twitter 应用程序。我的问题是 jquery 移动样式无法呈现。我的观点是

```
class HomeView extends Backbone.View
constructor: ->
    super

initialize: ->
    @Twitter= new TwitterCollection

template: _.template($('#home').html())

render: ->
    @loadResults()

loadResults: ->
    @Twitter.fetch({
        success: (data) =>
            $(@.el).html(@template({data: data.models, _:_}))

        error: ->
            alert('Error!')
    }) 
```

这在从 Twitter 中提取信息方面效果很好，但是当

```
$(@.el).html(@template({data: data.models, _:_})) 
```

在 fetch 函数内，jquerys 样式不呈现。谁能告诉我如何刷新样式？帮助将不胜感激！

作为参考，html模板是：

```
<script type="text/template" id="home">

<div data-role="header" data-position="fixed">
    <h1>TWITTER DATA</h1>
</div>

<div data-role="content">
    <ul data-role="listview"  data-inset="true">
        <% _.each(data, function (row) { %>
            <li><a href="#tweet-<%= row.get('id') %>"><%= row.get('text') %></a></li>
        <% }); %>
    </ul>

    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:28:49.510

好的，我通过添加“.listview('refresh').trigger('create');”来修复它 到结束

```
$(@.el).html(@template({data: data.models, _:_})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T14:45:21.750

之后应用修复时（在视图页面由 渲染和显示之后`$.mobile.changePage()`），用户会得到一个令人不快的副作用：由于 jquery mobile 应用的样式更改，视图会闪烁。

我对这个问题的解决方案是在动态渲染完成后从视图中触发自定义事件并将 绑定`$.mobile.changePage()`到该事件。这会导致输出被“缓冲”直到完成，然后完全设置样式。

这是一个例子：

在`initialize`我的视图中，我有代码等待模型/集合在获取时触发一个事件，以及一个渲染html动态部分的函数：

```
window.MyView = Backbone.View.extend({

// some other code here

initialize: function() {
    this.listenTo(this.collection, "fetchCompleted:CollectionName",  this.renderRows);
},

renderRows: function (eventName) {
    $(this.el).find('div[class="content-primary"]').html(this.template_ul({data: this.collection}));
    this.trigger( 'view:ready' );
},
//... 
```

...然后在路由器中，我有以下代码`changePage()`：

```
myViewObject.on( 'view:ready', function() {
    $.mobile.changePage($(next.el), {changeHash:false, transition: transition});
}); 
```

# android - 拆编成包裹

> ID：11952484
> 
> 赞同：0
> 
> 时间：2012-08-14T12:43:11.653
> 
> 标签：android, unmarshalling

嗨，我有一个像这样实现 Parcelable 的类：

```
public class adapterSource implements Parcelable {
   String adiSoyadi;
   String isemriTipi;
   String ililce;
   String mahalle;
   String saat;
   String durum;

   private List<adapterSource> s;

   public adapterSource(String adiSoyadi, String isemriTipi,String ililce, String mahalle, String saat, String durum ) {
      this.adiSoyadi = adiSoyadi;
      this.isemriTipi = isemriTipi;
      this.ililce = ililce; 

      this.mahalle = mahalle;

      this.saat = saat;
      this.durum = durum;
   }

   public adapterSource(Parcel in) {
      s = new ArrayList<adapterSource>();
      in.readList(s, in.getClass().getClassLoader());
      adiSoyadi=in.readString();
      isemriTipi=in.readString();
      ililce=in.readString();
      mahalle=in.readString();
      saat=in.readString();
      durum=in.readString();
   }

   public int describeContents() {
      return 0;
   }

   public void writeToParcel(Parcel arg0, int arg1) {
   }

   public static final Parcelable.Creator<adapterSource> CREATOR = new Parcelable.Creator<adapterSource>() {
      public adapterSource createFromParcel(Parcel in) {
         return new adapterSource(in);
      }

      public adapterSource[] newArray(int size) 
      {
         return new adapterSource[size];
      }
   };
} 
```

我正在尝试在这样的一项活动中创建此类的一个实例：

```
adapterSource[] source = new adapterSource[7];
source[0] = (adapterSource) new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
source[1] = new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
source[2] = new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
source[3] = new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
source[4] = new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
source[5] = new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
source[6] = new adapterSource("isa", "isa", "asd", "asd", "asd", "asd");
Intent in = new Intent().setClass(this, MainListActivity.class);

in.putExtra("source", source);

startActivity(in); 
```

我正在从另一个这样的活动中打电话：

```
adapterSource[] ada= (adapterSource[]) this.getIntent().getParcelableArrayExtra("source"); 
```

我得到了解组错误。问题是什么。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:39:31.970

肯定你错过或忘记了实现`writeToParcel()`，实际的对象序列化/扁平化发生在这里。您需要单独包裹对象的每个元素。

第二件事，您`in.readList();`以错误的方式使用，如果可包裹对象包含自定义对象列表，您需要使您的自定义类也可包裹并且需要使用 -`in.readList();`

那么你的代码应该像

```
public class adapterSource implements Parcelable {
    String adiSoyadi;
    String isemriTipi;
    String ililce;
    String mahalle;
    String saat;
    String durum;

    public adapterSource(String adiSoyadi, String isemriTipi, String ililce,
            String mahalle, String saat, String durum) {
        this.adiSoyadi = adiSoyadi;
        this.isemriTipi = isemriTipi;
        this.ililce = ililce;
        this.mahalle = mahalle;
        this.saat = saat;
        this.durum = durum;
    }

    public adapterSource(Parcel in) {
        adiSoyadi = in.readString();
        isemriTipi = in.readString();
        ililce = in.readString();
        mahalle = in.readString();
        saat = in.readString();
        durum = in.readString();
    }

    public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel arg0, int arg1) {
        arg0.writeString(adiSoyadi);
        arg0.writeString(isemriTipi);
        arg0.writeString(ililce);
        arg0.writeString(mahalle);
        arg0.writeString(saat);
        arg0.writeString(durum);
    }

    public static final Parcelable.Creator<adapterSource> CREATOR = new Parcelable.Creator<adapterSource>() {
        public adapterSource createFromParcel(Parcel in) {
            return new adapterSource(in);
        }

        public adapterSource[] newArray(int size) {
            return new adapterSource[size];
        }
    };
} 
```

# jquery - jQuery mobile - 尝试使用 $.ajax 获取远程内容

> ID：11952485
> 
> 赞同：0
> 
> 时间：2012-08-14T12:43:11.100
> 
> 标签：jquery, jquery-mobile

使用 jQuery Mobile 构建我的第一个 web 应用程序 - 这最终需要与 PhoneGap 一起使用，所以我试图让它保持简单。问题是我正在尝试使用 $.ajax 从网络服务器加载远程内容，但没有得到响应。

代码（为了便于阅读，略作删减）

```
<!DOCTYPE html>
<html>
<head>
<title>App</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no,target-densitydpi=device-dpi;" />

<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>     
<link rel="stylesheet" href="scripts/jquery.mobile-1.1.1.min.css" />
<link rel="stylesheet" href="themes/apptheme.min.css" />
<link rel="stylesheet" href="styles/mobilestyle.css" type="text/css" media="screen" />
<link rel="stylesheet" href="styles/mobilesitetyle.css" type="text/css" media="screen" />
<script src="scripts/jquery-1.7.1.min.js"></script>
<script src="scripts/jquery.mobile-1.1.1.min.js"></script>
<script src="scripts/jquery.url.js"></script>

<script type="text/javascript">
    $(document).bind("pagebeforechange", function (e, data) {
        // We only want to handle changePage() calls where the caller is
        // asking us to load a page by URL.

        if (typeof data.toPage === "string") {
            // We are being asked to load a page by URL, but we only
            // want to handle URLs that request the data for a specific
            // category.

            var u = $.mobile.path.parseUrl(data.toPage);

            var re = /^#productList/;
            if (u.hash.search(re) !== -1) {
                $.ajax({
                    url: "http://myproductwebsite/products.aspx",
                    datatype: "html",
                    success: function (data) {
                        $('.submenu').html(data);
                        alert('Load was performed.');
                    }
                });
            }

        }
    });

</script>
</head>
<body>
<div style="width:100%;font-size:13px;" data-role="page" id="home">
    <div data-role="header" data-position="fixed">          
        <h1>Home</h1>            
    </div>
    <div data-role="content" class="submenu">
        <a href="#productList" data-transition="slide"><img src="images/Icon-Products.png" alt="products" /></a>                
    </div>
    <div data-role="footer" class="ui-bar" data-position="fixed" data-theme="b"></div>
</div>

<div data-role="page" data-theme="a" id="productList" data-add-back-btn="true">
    <div data-role="header" data-position="fixed">          
        <h1>Products</h1>            
    </div><!-- /header -->
    <div data-role="content" class="submenu">product content    
        <!-- content gets put in here -->
    </div><!-- /content -->
    <div data-role="footer" class="ui-bar" data-position="fixed" data-theme="b"></div>
</div><!-- /page -->
</body>
</html> 
```

基本上，传递带有哈希的链接，将其拾取并尝试从远程网络服务器加载内容。这是不显示任何内容的位 - 我可以确认我正在使用的 url 肯定显示 HTML，所以我应该能够将其拾取并注入它。

成功事件中的警报不会触发，但是如果我将警报放在 ajax 代码的任一侧，它们就会触发，所以它只是通过中间。

我在 localhost 设置上使用 .load() 成功地处理了这段代码，但是一旦我将内容数据远程移出并切换到 ajax，它就停止了工作。有没有办法用 .load() 做到这一点？我喜欢你可以从响应中请求一个 div 的方式。

我错过了一些简单的东西吗？来自服务器的内容将只是来自 CMS 系统的简单 HTML 内容页面。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:48:26.840

源的内容是不可访问的。似乎是由于**[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)**。您需要在服务器端执行此操作，或者源应允许跨域访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:47:15.960

我做了一些挖掘，发现现在可以在现代浏览器中通过 ajax 允许跨域脚本。我已将以下代码添加到我的 index.html 中，如上面的初始问题：

```
$(document).bind("mobileinit", function () {
        $.mobile.allowCrossDomainPages = true;
        $.support.cors = true;
    }); 
```

这将打开对请求的支持。在服务器端，您也需要返回从该端启用它的标头，这意味着您可以在需要时将其锁定到单个页面（.Net 示例）：

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

我现在可以从 localhost 使用该应用程序并从远程服务器中提取内容。它也适用于手机。将不得不使用 PhoneGap 进行测试，但从我读过的内容来看，它确实支持它。

此答案的资源：

[https://forum.jquery.com/topic/cross-domain-requests-with-support-cors-and-mobile-allowcrossdomainpages](https://forum.jquery.com/topic/cross-domain-requests-with-support-cors-and-mobile-allowcrossdomainpages)

[http://enable-cors.org/#how-php](http://enable-cors.org/#how-php)

# jquery - jQuery prepend 不适用于 firefox

> ID：11952490
> 
> 赞同：0
> 
> 时间：2012-08-14T12:43:39.527
> 
> 标签：jquery, firefox, prepend

我有一个这样的结构：

```
<div id="container">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

在某些时候，我想在容器中添加更多“孩子”。

```
$("#container").prepend('<div class="child"></div>'); 
```

这适用于除 Firefox 之外的所有浏览器。Firefox**追加**新的孩子。结果，由于在页面加载时使用了相同的代码，孩子们实际上是颠倒的。

我尝试过使用 .innerHTML、.before()、使用 .html(child + old_html) 等的所有内容，但我一辈子都无法让 Firefox 正确地添加 html。

如果有人可以帮我解决这个问题，请提前感谢。

编辑：添加了缺少的“

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:46:35.723

您的选择器字符串未关闭：

改变这个：

```
$("#container).prepend('<div class="child"></div>'); 
```

到：

```
$("#container").prepend('<div class="child"></div>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:32:11.000

经过一番研究，似乎 prepend() 没有错，但 Firefox 实际上反转了我在 json 中的键。为了说明发生了什么，我的 json 看起来像这样：

```
{"shouts":[
"12"{<some data concerning id=12 here>}, 
"11"{<some data concerning id=11 here>}, 
"10"{<some data concerning id=10 here>},
etc ]} 
```

Chrome 和所有其他浏览器在循环中颠倒了这个顺序，因为它们可能假定“12”、“11”和“10”作为数组中的键。循环时，这将产生 10、11 和 12。然而，Firefox 没有这样做，这导致了反转。

解决方案是从 json 中删除 ID（这使得行为统一，即所有浏览器现在都以相反的顺序显示它），然后再次为 json 反转顺序，这将产生：

```
{"shouts":[
{<some data concerning id=10 here>}, 
{<some data concerning id=11 here>}, 
{<some data concerning id=12 here>},
etc ]} 
```

这解决了问题！（现在可以从example.php中看到。）感谢大家的帮助。

# asp.net-mvc-4 - 具有捆绑和缩小功能的 ASP.NET MVC 4 应用程序，为什么在调试模式下启用缩小？

> ID：11952491
> 
> 赞同：20
> 
> 时间：2012-08-14T12:43:57.423
> 
> 标签：asp.net-mvc-4, bundling-and-minification, asp.net-optimization

我刚刚将一个 ASP.NET MVC 3 项目迁移到 MVC 4 / .NET 4.0，并安装了 NuGet 包`Microsoft.AspNet.Web.Optimization`以支持 CSS 和 JavaScript 的捆绑和缩小。我几乎可以进行捆绑/缩小工作，问题是它*始终处于*启用状态。即使应用程序处于调试模式（如 Web.config 中配置的那样），所有 JavaScript 包含都被缩小。从下面的 XML 片段可以看出，在 Web.config 中启用了调试模式：

```
<system.web>
  <compilation debug="true" targetFramework="4.0">
    ...
  </compilation>
  ...
</system.web> 
```

我的捆绑配置的摘录：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        ...

        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-1.*",
                    "~/Scripts/jquery.form.js",
                    "~/Scripts/jquery.format.js"));

        bundles.Add(new StyleBundle("~/Content/css").Include(
            "~/Content/Site.css"));

        ...
    }
} 
```

CSS/JavaScript 包含在 HTML 中呈现，例如：

```
<link href="/content/css" rel="stylesheet" type="text/css">
<script src="/bundles/jquery" type="text/javascript"></script> 
```

有没有人知道为什么在我的情况下启用了缩小？我不知道我在这里缺少什么。为了排除故障，我创建了一个测试 ASP.NET MVC 4 Internet 应用程序，并且可以验证 CSS/JavaScript在该项目的调试模式下*没有*被缩小。

**编辑：**

在我的 _Layout.cshtml 文件中，我呈现如下样式/脚本：

```
@Styles.Render("content/css")
@Scripts.Render("bundles/jquery") 
```

感谢 Hao，我意识到我忘记在包名称前加上“~/”。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T21:07:54.830

危险信号是 HTML 中呈现的链接/脚本标签：

如果您使用的是 Script/Style.Render，这些应该包含版本哈希码，即

```
< script src="/bundles/jquery?v=wvLq7H7qEZB2giyIRn7aEZAxhHOb2RfTYYh2HMd9EqM1"/> 
```

要获得 MVC4 模板正在使用的调试/发布行为，您还必须使用 Script/Style.Render 方法。调用这些方法时，您必须传递虚拟包路径，在您的示例中：

```
@Styles.Render("~/content/css")
@Scripts.Render("~/bundles/jquery") 
```

在调试模式下，您不应该让链接/脚本标签指向捆绑包（它将始终被缩小/捆绑）。相反，您应该在调试模式下获取各个资源的脚本/链接标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-10T19:24:03.007

我刚刚在一个全新的 ASP.NET MVC 项目上发生了这种情况。我`<compilation debug="true" targetFramework="4.5.1" />`在 web.config 中设置为 true 并且仍然得到缩小的输出。

**修复**

BundleConfig.cs（在 App_Start 中）底部有一行`BundleTable.EnableOptimizations = true;`覆盖了我的 web.config 设置....

删除该行和/或将其设置为 false，我将我的脚本作为调试环境中所需的未缩小/未捆绑。

我建议删除该行，因为这将覆盖 web.config。在 web.config 中设置此项具有使用 web.config 转换的优势，因此您可以创建不同的设置以部署到不同的环境。

有关这方面的更多信息，请参阅[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)并阅读*控制捆绑和缩小部分*（大约在文章的一半处）。

# sql - 查询 Abra Alerts 5.1 日志？

> ID：11952495
> 
> 赞同：0
> 
> 时间：2012-08-14T12:44:17.143
> 
> 标签：sql, logging, odbc, visual-foxpro

我们正在尝试追踪一个特定的 ABRA 警报，我们认为该警报附加到某种生成 msaccess`*.snp`文件的自定义代码上。我们相信，通过查看 ABRA 警报的日志并查看在生成文件的时间戳期间运行了哪些警报，我们将有更好的机会追踪警报。

这是 Abra Alert 主窗口的图像，其中列出了很多很多 Abra 警报，并且每个都有很多与之关联的日志条目。

![ABRA 警报 5.1 主窗口列出个别 ABRA 警报](../Images/e47e3238438bc7bcca80ef66a6d07fc2.png)

可以对来自各种警报的日志条目进行排序和过滤，但不能在特定日期/时间范围内过滤它们： ![带有来自单个 ABRA 警报的日志的日志查看器](../Images/175db413e98d5cc639750fd57d6b3f2e.png)

所以我想知道是否有办法直接查询日志文件数据。据我了解，Abra Alerts 5.1 使用 FoxPro 数据库（Sage Abra Suite 使用 Visual Fox Pro 09.00.00）。我认为也许它可以连接到使用 ODBC，以查询特定的日期范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:19:17.773

您应该在安装位置或程序数据文件夹中的 Data 文件夹中找到日志数据库。或者，如果您查看名为 DAS 4.0 日志数据库的系统 DSN，您可以找到路径。如果您转到 View-Options 菜单并查看 Log 选项卡，您可以看到当前的日志数据库定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:54:36.797

您可以使用几种不同类型的驱动程序（包括 OLE DB 和 ODBC）连接到 FoxPro 数据库。您需要下载 FoxPro 专用的驱动程序。

Microsoft 声明他们不再支持 Visual FoxPro ODBC 驱动程序（尽管我从未发现它有任何问题）。但他们确实支持 OLE DB 驱动程序......

[http://www.microsoft.com/en-us/download/details.aspx?id=14839](http://www.microsoft.com/en-us/download/details.aspx?id=14839)

如果有兴趣，这里有一篇文章讨论了为什么他们选择停止支持 ODBC... [http://support.microsoft.com/kb/277772](http://support.microsoft.com/kb/277772)

有许多工具可以让您查看和查询 FoxPro 表。基本上可以使用任何可以使用 OLE DB 驱动程序连接的工具。我使用 Visual Studio。这是我个人没有使用过的另一个，但我听说过它的好消息... [http://www.ultradiff.com/](http://www.ultradiff.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:29:09.353

Abra Alerts 日志数据库实际上是一个名为 DASLOGDB.MDB 的 Access 数据库。这可以使用 Jet 驱动程序进行监控。您看到的 .snp 文件实际上是监视器存储监视器结果的快照文件。它们是二进制文件，不能直接或通过 ODBC/OLEDB 查看。如果您要查找与 .snp 文件关联的进程，只需在 Processes 文件夹中搜索 tsk 文件文本中的 snp 文件名称即可。具有 .snp 文件名的 tsk 文件也将具有进程的名称。

# php - 数据库设计：外键和规范化

> ID：11952497
> 
> 赞同：3
> 
> 时间：2012-08-14T12:44:22.760
> 
> 标签：php, mysql, database, database-design

我是数据库设计的新手，所以请多多包涵。我正在使用 PHP 和 MySQL。我有一个“电影”表，其中包含有关电影的一些详细信息。这包括类型，它与电影具有多对多关系（如果我理解正确的话），这意味着单个电影可以属于不同的类型，而单个类型可以属于不同的电影。

根据我收集到的关于数据库设计的信息，将这种关系存储在一个表中并不是一个好主意，因为它会违反第一范式或第二范式规则。我将如何设计我的桌子来避免这种情况；我必须为每种类型分别创建一个表格还是...？

这引出了我的下一个问题：单独的表需要有外键来识别哪些信息属于哪一行。理论上，如果我有一个唯一的密钥来标识每部电影，然后我想用它来标识单独表中的导演，我将如何在 MySQL 中创建这种关系？

感谢您抽出宝贵时间 - 如果我有任何不清楚的地方，请告诉我，我会尽力澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:54:45.993

> 这包括类型，它与电影具有多对多关系（如果我理解正确的话），这意味着单个电影可以属于不同的类型，而单个类型可以属于不同的电影。

这是正确的。

> 从我收集到的关于数据库设计的信息来看，将这种关系存储在一个表中并不是一个好主意

对。您正在沿着这些思路松散地寻找一些东西。

```
create table movies (
  movie_id integer primary key
  -- other columns
);

create table genres (
  genre varchar(15) primary key
  -- other columns?
);

create table movie_genres (
  movie_id integer not null,
  genre varchar(15) not null,
  primary key (movie_id, genre),
  foreign key (movie_id) references movies (movie_id),
  foreign key (genre) references genres (genre)
); 
```

对于导演，假设每部电影只有一个导演，你可以用这个代替上面的电影表

```
create table movies (
  movie_id integer primary key,
  director_id integer not null,
  foreign key (director_id) references directors (director_id) -- not shown.
  -- other columns
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:51:38.010

您需要一张表 Movies、一张表 Genres 和一张表 Movies_and_Genres。前两个包含唯一的主键，您可以使用 mysql 自动增量字段类型创建它们。第三个表包含这些主键对。

```
create table movies (id integer not null primary key auto_increment, title ... );
create table genres (id integer not null primary key auto_increment, genre ... );
create table movies_and_genres (id_movie integer not null, id_genre integer not null); 
```

至于导演，这是一个数据建模的问题。如果一部电影可以有多个导演，那么您需要一个 director 和一个 movies_and_directors 表。否则，您只需要 director 表和 movies 表中的 director 列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:53:52.647

您需要/应该使用[连接表](http://en.wikipedia.org/wiki/Junction_table)

*表*电影：

```
| id | title | rating |
-----------------------
| 1  | foo   |   5    |
| 2  | bar   |   4    | 
```

*表*类型：

```
| id | name    | 
----------------
| 1  | comedy  |
| 2  | romance | 
```

*表*主任：

```
| id | name    | 
----------------
| 1  | hello   |
| 2  | world   | 
```

*表*电影类型：

```
| id | movie_id | genre_id |
----------------------------
| 1  |     1    |     1    |
| 2  |     1    |     2    |
| 3  |     2    |     1    | 
```

*表*电影导演：

```
| id | movie_id | director_id |
-------------------------------
| 1  |     1    |     1       |
| 2  |     2    |     1       |
| 3  |     2    |     2       | 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T12:55:00.987

你说得对，你需要的是有一张电影表（例如`tbl_movies`）；

```
pk    id
      name
      ... etc 
```

流派表（例如`tbl_genres`）；

```
pk    id
      name
      ... etc 
```

以及将两者联系起来的表格（例如`tbl_movie_genres`）；

```
fk    id_movies
fk    id_genres 
```

您可以将 的 pk 设置为`tbl_movie_geners`两个外键，也可以设置一个独立的 pk（例如上面`id`的`tbl_movies`和`tbl_genres`表中的）。

通过这种方式，您可以列出每部电影尽可能多的类型，并且它们通过`tbl_movie_genres`表格链接；例如：

```
tbl_movies:
id    name
1     Movie 1
2     Movie 2

tbl_genres:
id    name
1     Horror
2     Action
3     Rom Com

tbl_movie_genres
id_movies    id_genres
1            3
2            1
2            2 
```

会告诉你“电影 1”是一部 rom com，而“电影 2”是一部动作恐怖片。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T13:04:06.640

为了满足多对多关系，请使用包含电影和流派表的外键的连接表：

```
MOVIE
-----
ID (PK)

GENRE
-----
ID (PK)

MOVIE_GENRE
-----------
MOVIE_ID (FK that references MOVIE(ID))
GENRE_ID (FK that references GENRE(ID)) 
```

这里`MOVIE`表的主键为`ID`，`GENRE`表的主键为`ID`，`MOVIE_GENRE`表有两个外键引用：一个 to `MOVIE.ID`，另一个 to `GENRE.ID`。的主键`MOVIE_GENRE`可以是 ( `MOVIE_ID`, `GENRE_ID`) 的复合键，因为这将是唯一的，但您也可以使用合成键。

对于director表和关系的处理，如果是一对多的关系（一个director对应很多电影），只需在`MOVIE`表中加一个外键即可：

```
DIRECTOR
--------
ID (PK)

MOVIE
-----
ID (PK)
DIRECTOR_ID (FK TO DIRECTOR(ID)) 
```

如果您需要支持另一个多对多关系（许多电影的许多导演），请使用上面的连接表方法。

# api - Yahoo Answers API可以用来写数据吗

> ID：11952507
> 
> 赞同：3
> 
> 时间：2012-08-14T12:45:22.823
> 
> 标签：api, yahoo

Yahoo Developer 网络上的“我的项目”页面为 Yahoo Answers 权限提供了以下三个选项：

1.  没有任何
2.  **读/写**在您的用户许可下，您可以访问他们的 Yahoo! 代表他们回答私人数据和**发布内容**（例如：问题、答案、评分）。
3.  阅读 在您的用户许可下，您可以阅读他们的 Yahoo! 回答个人数据。

但是 API [http://developer.yahoo.com/answers/](http://developer.yahoo.com/answers/)的文档没有任何方法允许应用程序代表用户发布问题和答案。我错过了什么，或者是这样吗？

# android - 内容：编码的 XMLParser android

> ID：11952511
> 
> 赞同：1
> 
> 时间：2012-08-14T12:45:56.127
> 
> 标签：android, xml, parsing, xml-parsing

好的，关于这个具体情况，我有一个很大的 XML 文件，应该在 Android 中解析和显示，它的一部分在这里：

```
.
.
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/:
.
.
<item>
<title>RTS1</title>
<pubDate>Tue, 14, Aug 2012</pubDate>
<content:encoded><![CDATA[6:00 Vesti<br>06:05 Jutarnji program<br>08:15 Jutarnji dnevnik
<br>09:00 Kamiondzije .................. 23:15 Film<br>]]>
</content:encoded>
<item> 
```

在我的主要应用程序中，我这样做了：

```
public class Main extends ListActivity {  

// All static variables  
static final String URL = "http://tvprofil.net/rss/feed/channel-group-2.xml";  
// XML node keys  
static final String KEY_ITEM = "item"; // parent node  
static final String KEY_NAME = "title";  
static final String KEY_DATE = "pubDate";  
static final String KEY_DESC = "content:encoded";  

@Override  
public void onCreate(Bundle savedInstanceState) {  
super.onCreate(savedInstanceState);  
setContentView(R.layout.activity_main);  

ArrayList<HashMap<String,String>> menuItems = new ArrayList<HashMap<String,String>>();  

XMLParser parser = new XMLParser();  
String xml = parser.getXmlFromUrl(URL); //get XML  
Document doc = parser.getDomElement(xml); // get DOM elem.  

NodeList nl = doc.getElementsByTagName(KEY_ITEM);  
//loop  
for (int i=0; i< nl.getLength(); i++){  
    HashMap<String, String> map = new HashMap<String, String>();  
    Element e = (Element) nl.item(i);  
    //add to map  
    map.put(KEY_NAME, parser.getValue(e, KEY_NAME));  
    map.put(KEY_DATE, parser.getValue(e, KEY_DATE));  
    map.put(KEY_DESC, parser.getValue(e, KEY_DESC));  

    // hash => list  
    menuItems.add(map);  
}  

ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.list_item,  
        new String[]{KEY_NAME, KEY_DESC, KEY_DATE}, new int[]{  
        R.id.name, R.id.description, R.id.date  
});  
setListAdapter(adapter);  

//singleView  
ListView lv = getListView();  

lv.setOnItemClickListener(new OnItemClickListener(){  
    @Override  
    public void onItemClick(AdapterView<?> parent, View view, int position, long id){  
        String name = ((TextView)view.findViewById(R.id.name)).getText().toString();  
        String date = ((TextView)view.findViewById(R.id.date)).getText().toString();  
        String description = ((TextView)view.findViewById(R.id.description)).getText().toString();  

        //intent  
        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);  
        in.putExtra(KEY_NAME, name);  
        in.putExtra(KEY_DATE, date);  
        in.putExtra(KEY_DESC, description);  
        startActivity(in);  
    }  
});  

}  

} 
```

请仔细看：

```
static final String KEY_DESC = "content:encoded"; 
```

我试过：

```
static final String KEY_DESC = "encoded"; 
```

甚至：

```
static final String KEY_DESC = "http://purl.org/rss/1.0/modules/content/encoded"; 
```

但没有任何效果..当我设置它或在手机上时，它既不显示任何东西，也不显示在 Log.w 中......

我什至会发布解析器类，我不想要任何混淆：

```
 public class XMLParser {  

// constructor  
public XMLParser() {  

}  

/** 
 * Getting XML from URL making HTTP request 
 * @param url string 
 * */  
public String getXmlFromUrl(String url) {  
String xml = null;  

try {  
    // defaultHttpClient  
    DefaultHttpClient httpClient = new DefaultHttpClient();  
    HttpPost httpPost = new HttpPost(url);  

    HttpResponse httpResponse = httpClient.execute(httpPost);  
    HttpEntity httpEntity = httpResponse.getEntity();  
    xml = EntityUtils.toString(httpEntity);  

} catch (UnsupportedEncodingException e) {  
    e.printStackTrace();  
} catch (ClientProtocolException e) {  
    e.printStackTrace();  
} catch (IOException e) {  
    e.printStackTrace();  
}  
// return XML  
return xml;  
}  

/** 
 * Getting XML DOM element 
 * @param XML string 
 * */  

public Document getDomElement(String xml){  

Document doc = null;  
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();  
dbf.setCoalescing(true);  
try {  

    DocumentBuilder db = dbf.newDocumentBuilder();  

    InputSource is = new InputSource();  
        is.setCharacterStream(new StringReader(xml));  
        doc = db.parse(is);   

    } catch (ParserConfigurationException e) {  
        Log.e("Error: ", e.getMessage());  
        return null;  
    } catch (SAXException e) {  
        Log.e("Error: ", e.getMessage());  
        return null;  
    } catch (IOException e) {  
        Log.e("Error: ", e.getMessage());  
        return null;  
    }  

    return doc;  
}  

/** Getting node value 
  * @param elem element 
  */  
 public final String getElementValue( Node elem ) {  

 Node child;  
 if( elem != null){  
     if (elem.hasChildNodes()){  
         for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){  
             if( child.getNodeType() == Node.TEXT_NODE  ){  
                 return child.getNodeValue();  
             }  
         }  
     }  
 }  
 return "";  
 }  

 /** 
  * Getting node value 
  * @param Element node 
  * @param key string 
  * */  
 public String getValue(Element item, String str) {       
        NodeList n = item.getElementsByTagName(str);          
        return this.getElementValue(n.item(0));  
    }  
    } 
```

# java - 我想使用 java 集合来加快处理速度但同时避免内存堆异常？

> ID：11952514
> 
> 赞同：1
> 
> 时间：2012-08-14T12:46:06.280
> 
> 标签：java, dictionary, data-structures, collections, heap-memory

我想使用一个 java 集合（列表、地图等）来缓存一些数据，这样我就可以使用这个缓存而不是直接检查数据库。我唯一担心的是集合大小，我希望这个缓存可以保存假设只有 1000 个条目，一旦达到这个计数，我想删除最旧的条目并放置一个新条目。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T12:53:15.363

你应该看看[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)。如果您覆盖`removeEldestEntry`，您可以控制地图中最旧的条目何时被删除（何时`put`或被`putAll`调用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T12:51:08.907

您可以使用 Google Guava 提供的缓存实用程序：[http ://code.google.com/p/guava-libraries/wiki/CachesExplained](http://code.google.com/p/guava-libraries/wiki/CachesExplained)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:51:15.813

根据每个缓存对象的“权重”，有多种变体。选择更适合您的用例的：

*   固定大小的缓存（可以使用 Collection 实现并跟踪其大小）。如果对象相当小并且可以提前很好地估计内存占用，则此方法效果很好。其他答案基本上说明了实现这种类型的方法。

*   通过垃圾收集器自动驱逐的动态缓存。如果要缓存的对象很大（或大小变化很大，例如文件或图像）并且您希望使用尽可能多的堆可用于缓存，这很有效。缓存管理 java.lang.SoftReference 的集合以使对象保持活动状态。*垃圾收集器将在需要内存时*回收缓存的对象（通过清除引用）。这种方法的一个缺点是您无法控制对象驱逐，GC 决定何时以及哪些对象被驱逐。

*   两者的结合，（小）固定大小的缓存用于最近的命中，动态 GC'd 用于第二级。

如果配置得当，它们都不会导致任何 OutOfMemory 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:38:10.067

Apache commons 有一个[循环 fifo 缓冲区](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)。我想这就是你要找的。

从它的文档

```
CircularFifoBuffer is a first in first out buffer with a fixed size that replaces its oldest element if full. 
```

要不然

`AbstractQueue`您可以在 java 库中创建自己的扩展类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T12:51:59.013

Java 提供了一个称为接口的接口`Queue`，以及该接口的一些实现。

您可以看到解决您的问题的最佳选择。看一看

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)

[http://docs.oracle.com/javase/tutorial/collections/implementations/queue.html](http://docs.oracle.com/javase/tutorial/collections/implementations/queue.html)

# java - 转换 ArrayList 的最快方法 进入 int[]

> ID：11952516
> 
> 赞同：3
> 
> 时间：2012-08-14T12:46:12.367
> 
> 标签：java, arrays, arraylist, int

> **可能重复：**
> [如何在 Java 中将 List<Integer> 转换为 int[]？](https://stackoverflow.com/questions/960431/how-to-convert-listinteger-to-int-in-java)

在 Java 中，下面是最快的解决方案：

```
public convert(ArrayList<Integer> IntegerList) {

    int s = IntegerList.size();
    int[] intArray = new int[s];
    for (int i = 0; i < s; i++) {
        intArray[i] = IntegerList.get(i).intValue();
    }
} 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:00:11.110

我想不出比现在使用普通 java 更好的解决方案。但是，如果您使用[Guava](http://code.google.com/p/guava-libraries/)，您可能可以简化它。

```
public convert(List<Integer> list) {
 int[] ar = Ints.toArray(list); //Ints is the class from Guava library
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T12:55:38.887

最快的方法是一开始就不要使用`ArrayList<Integer>`。尝试`TIntArrayList`使用哪个包装 int[]，或者`int[]`从一开始就使用 a。

如果您出于某种原因必须使用 ArrayList 并且无法修复它，那么您需要一种可行且性能不那么重要的方法。

```
int[] ints = new int[list.size()];
for(int i=0, len = list.size(); i < len; i++)
   ints[i] = list.get(i); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:59:15.967

```
public void convert(ArrayList<Integer> IntegerList) {
        int[] intArray = new int[IntegerList.size()];
        int count = 0;
        for(int i : IntegerList){
            intArray[count++] = i;
        }
 } 
```

**更新**： 问：但是 foreach 循环是否比常规 for 循环更快/更好/不同？
A.[这里](https://stackoverflow.com/questions/256859/is-there-a-performance-difference-between-a-for-loop-and-a-for-each-loop)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:50:13.690

```
 Integer[] intArray = IntegerList.toArray(new Integer[IntegerList.size()]); 
```

# linq - 使用 LINQ 从另一个表更新 DataTable

> ID：11952519
> 
> 赞同：3
> 
> 时间：2012-08-14T12:46:20.570
> 
> 标签：linq, datatable

我有 2 个如下所示的数据表：数据表 1：

```
cheie_primara    cheie_secundara   judet    localitate
1                11                A                
2                22                B                
3                33                C                
4                44                D                
5                55                A                
6                66                B                
7                77                C                
8                88                D                
9                99                A 
```

数据表2：

```
ID_CP          BAN             JUDET          LOCALITATE      ADRESA
1              11              A              aa              random
2              22              B              ss              random
3              33              C              ee              random
4              44              D              xx              random
5              55              A              rr              random
6              66              B              aa              random
7              77              C              ss              random
8              88              D              ee              random
9              99              A              xx              random 
```

我想使用加工键 DataTable1["cheie_primara"] 和 DataTable2["ID_CP"] 用字段 ["LOCALITATE"] 更新 DataTable 1。像这样：

```
cheie_primara    cheie_secundara   judet    localitate
1                11                A        aa        
2                22                B        ss        
3                33                C        ee        
4                44                D        xx        
5                55                A        rr        
6                66                B        aa        
7                77                C        ss        
8                88                D        ee        
9                99                A        xx 
```

是否有更新 DataTable1 的 LINQ 方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:47:49.163

这是有效的：

```
 DataTable1.AsEnumerable()
            .Join(  DataTable2.AsEnumerable(),
                    dt1_Row => dt1_Row.ItemArray[0],
                    dt2_Row => dt2_Row.ItemArray[0],
                    (dt1_Row, dt2_Row) => new { dt1_Row, dt2_Row })
            .ToList()
            .ForEach(o => 
                    o.dt1_Row.SetField(3, o.dt2_Row.ItemArray[3])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:33:43.577

如果你想使用 Linq，我会这样做；

```
var a =  (from d1  in DataTable1
        join d2 in DataTable2 on d1.cheie_primara equals d2.ID_CP
        select new {d1, d2.LOCALITATE}).ToList();

a.ForEach(b => b.d1.localitate = b.LOCALITATE); 
```

# asp.net-mvc-3 - kendo ui网格调用未找到操作方法

> ID：11952526
> 
> 赞同：0
> 
> 时间：2012-08-14T12:46:34.973
> 
> 标签：asp.net-mvc-3, controller

我正在尝试使用弹出可编辑属性将新行添加到 Kendo UI 网格中。一切正常，每个添加的行都出现在网格中。问题是 Create 操作方法不存在。萤火虫 说：

```
 A public action method &#39;Create&#39; was not found on controller &#39;test.Controllers.IdeaController&#39;. 
```

但是，action 方法存在于控制器中。

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create([DataSourceRequest] DataSourceRequest request,Idea product)
    {
        using (var db = new test_mockEntities1())
        {
            if (product != null && ModelState.IsValid)
            {
                db.Ideas.Add(product);
                db.SaveChanges();
            }
        }
        return Json(new[] { product }.ToDataSourceResult(request, ModelState));

    } 
```

我究竟做错了什么？

编辑：正如@jesper 所建议的，我用我试图调用的动作更新了这个问题。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create([DataSourceRequest] DataSourceRequest request, Idea product)
    {
        using (var db = new migros_mockEntities1())
        {
            if (product != null && ModelState.IsValid)
            {
                db.Ideas.Add(product);
                db.SaveChanges();
            }
        }
        return Json(new[] { product }.ToDataSourceResult(request, ModelState));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:01:09.477

解决方案非常简单。我没有使用 kendo.aspnetmvc.js，它使 Kendo UI 使用 GET 而不是 POST。

# node.js - Web Matrix 2 - 下载和安装发布设置

> ID：11952531
> 
> 赞同：0
> 
> 时间：2012-08-14T12:46:59.013
> 
> 标签：node.js, azure, webmatrix

我是 azure 客户，但是当我登录到 azure 门户时，我看到的是旧的 azure 门户界面，而无需升级或更新它。我想下载我的发布设置以在 webmatrix 中使用以上传 node.js 网站。

如何使用旧门户界面获取我的 Azure 网站的发布设置？

我曾尝试使用 powershell cmdlet Get-AzurePublishSettingsFile 但是当我指示 webmatrix 使用下载的发布设置文件时，我从 webmatrix 收到一个错误，说发布设置文件有错误。

有没有其他方法可以将我的 webmatrix node.js 网站上传到我的 windows azure 网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:31:49.950

云服务不同于 Windows Azure 网站。在新门户的底部![在此处输入图像描述](../Images/be7e47aac5aba61a6e896155b5127e3e.png)会有一个“+新建”按钮，当你点击它时，你应该得到附加的视图。那是您创建网站的地方。然后它将具有从仪表板下载发布设置的位置。这是可以导入 WebMatrix 以将 node.js 站点部署到 Azure 的发布设置。希望这可以帮助。

-Vishal R. Joshi | [http://vishalrjoshi.com](http://vishalrjoshi.com) | @vishalrjoshi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:56:06.273

要访问新的（预览版）门户，您必须使用[https://manage.windowsazure.com/](https://manage.windowsazure.com/)而不是[https://windows.azure.com/](https://windows.azure.com/)。这将允许您访问您的网站并下载发布配置文件（在您网站的仪表板中，**快速**浏览）。

# python - 在 Python 中使用特殊字符

> ID：11952533
> 
> 赞同：1
> 
> 时间：2012-08-14T12:47:01.503
> 
> 标签：python, string, character

我正在使用 Python 2.7 和 Tkinter 编写程序，有一次我需要在我的 GUI 上显示变量符号。我决定使用 Label 对象，但我需要显示 alpha、beta、ohm 和 pi 等符号。我不知道如何输入它们，更不用说让它们出现在 python 中了。这是我的代码示例：

```
pilabeltext = StringVar()
pilabeltext.set("This is where I want the Pi symbol")
pilabel = Label(app,text=pilabeltext)
pilabel.pack() 
```

我还希望能够让字符串中的字符有下标和上标，所以如果我想写 alpha 下标 1 和 alpha 下标 2，或者 alpha squared，我该怎么做呢？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T12:50:50.983

确保您的脚本是 UTF-8 编码的，那么您应该没有问题

```
# -*- coding: utf-8 -*-

from Tkinter import *

root = Tk()

w = Label(root, text="Hello, pi -> π !")
w.pack()

root.mainloop() 
```

![在此处输入图像描述](../Images/039f93e641560d9246ab86de69cd9106.png)

对于使用下标等，看看[这个答案](https://stackoverflow.com/questions/11953697/how-to-use-subscripts-in-tkinter-label)：

![在此处输入图像描述](../Images/2f302e68ccbc071d95880faef8985279.png)

# php - 右侧php邮件功能表

> ID：11952536
> 
> 赞同：1
> 
> 时间：2012-08-14T12:47:08.520
> 
> 标签：php, sendmail

我已经尝试了几种不同的代码来让 php 发送表单并让邮件在右侧对齐，并且没有工作。当我打开邮件时，它总是在左边

```
<?php
$to = "skatz25@hotmail.com";
$subject = "טופס הפניית מתנדב/ גוף פונה";
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= "Content-type: text/html; charset=utf-8\r\n"; 

$rname = $_POST['rname'];
$date = $_POST['date'];
$name = $_POST['name'];
$age = $_POST['age'];
$refrence = $_POST['refrence'];

$msg = '
<html>        
   <body dir="rtl">
      <table dir="rtl" style="direction:rtl">
         <tr>
           <td style="text-align: right;">מקבל הפנייה:</td>
           <td>' . $rname . '</td>
          <tr>
        </table>
   </body>
<html>
';

mail($to, $subject, $msg, $headers);
?> 
```

当我在 hotmail 中打开邮件时，文本是 rtl，但从页面左侧而不是右侧开始

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:49:41.940

尝试为表格添加宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:51:45.647

首先，您必须绘制一个宽度和高度设置为 100% 的表格，并在该表格中创建另一个向右对齐的表格，例如：`<table width='100%' height='100%'><tr><td align='right'> <table align='right'><tr><td>content</td></tr></table> </td></tr></table>`

# python - 如何使用 Qt/PySide 实现逆霍夫变换？

> ID：11952537
> 
> 赞同：2
> 
> 时间：2012-08-14T12:47:11.147
> 
> 标签：python, image, pyside

我是学生，我必须使用霍夫变换来检测图像的边界，我们会说骨架。我也与 Pyside 合作。

为此，我知道如何执行霍夫变换，我找到了一个带有 Python 插件的网站（[http://scikits-image.org/docs/0.4/api/skimage.transform.html#hough](http://scikits-image.org/docs/0.4/api/skimage.transform.html#hough)），它给我作为回报：H：uint64（霍夫变换累加器）的二维ndarray，距离和theta：ndarray（计算变换的角度。）

所以，有了这些信息，我想反转霍夫变换，以获得图像的“骨架”并将其表示在“正常”空间 y=ax+b （对于所有线条和形状）。

为了做到这一点，我找到了一篇文章 Window-base Inverse Hough Transform。本文讨论了一种通过使用下面的算法（两步）来做到这一点的方法，问题是我真的不知道如何将它放入我的应用程序中，甚至放入 Python 中：s

如果您想要更多信息（我可以发布太多链接，它会出现）所以这个链接，我们将引导您到一个论坛，我已经发布了我的信息（[链接到法语论坛（帖子＃6）](http://www.developpez.net/forums/d1247855/autres-langages/python-zope/gui/pyside-pyqt/transformee-inverse-hough/#post6820831)。

您将在帖子 #6 中看到算法和 pdf 文章站点的链接。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:40:46.537

寻找已知形状的边界是一个不同的挑战。我不确定您是否正确使用了关键字 - 寻找广义霍夫变换可能比寻找逆霍夫变换更好。

上面链接中的霍夫变换已经向您展示了累加器的所有角度的输出：out、angles、d = hough(img)

以弧度为单位的角度和以像素为单位的 d 距离。所以您对 y=ax+b 的要求已经得到满足（a 是 angle[i]，b 是 d[i]）。显然，这种霍夫变换实现仅适用于线条。

# r - 在 R 中使用 biwavelet 包

> ID：11952538
> 
> 赞同：3
> 
> 时间：2012-08-14T12:26:17.597
> 
> 标签：r, wavelet, biwavelet

谁能建议为什么以下示例代码不起作用：

```
require(biwavelet)
t <- seq(1/24, 365, 1/24)
A <- 2
fs <- 1/24
y <- A + sin(2*pi*fs*t)
d = cbind(t,y)
wt.t1 <- wt(d)
plot(wt.t1) 
```

它会生成一个错误说明：

```
Error in image.default(x$t, yvals, t(zvals), zlim = zlims, ylim = rev(range(yvals)),  : 
  invalid z limits 
```

我将如何解决这个问题？

**额外的：**

作为对 Gavin Simpsons 的回答：如果我将数据保留为仅包含一个频率但更改时间向量，则代码可以正常工作。

```
require(biwavelet)
A <- 2
fs <- 1/24
y <- A + sin(2*pi*fs*t)
d <- cbind(seq(1,8760), y) 
wt.t1 <- wt(d)
plot(wt.t1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T07:15:10.057

您在 wt.R 函数中发现了一个错误（错误的括号）。该错误已在 biwavelet 包的 0.12 版本中得到修复，因此您上面的代码的两个版本现在都应该可以工作了。

感谢您发现错误。请不要犹豫，通过电子邮件向软件包的维护者（即我）发送有关未来错误的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:24:27.840

我怀疑这是因为您在这里只有一个频率并且没有为此设置功能。我可以通过添加白噪声得到一个情节`y`：

```
require(biwavelet)
t <- seq(1/24, 365, 1/24)
A <- 2
fs <- 1/24
y <- A + sin(2*pi*fs*t)
d <- cbind(t, y + rnorm(length(y))) ## add some white noise to y
wt.t1 <- wt(d)
plot(wt.t1) 
```

您可能希望联系维护人员报告问题。当我调试它并反转它时，我得到了做某事的情节，`zlim`所以这`diff(zlim)`是积极的，所以可能是该`plot()`方法的作者做出了一个并非在所有情况下都成立的假设。

# c# - 浏览矩阵

> ID：11952539
> 
> 赞同：-5
> 
> 时间：2012-08-14T12:47:14.247
> 
> 标签：c#, matrix

我想浏览像这样的矩阵：

![我要浏览的矩阵示例](../Images/e9963851e08957ece32d447b873f0be1.png)

我想浏览第一行，得到最小的数字，然后浏览与前一个最小数字匹配的行。

例如：我浏览 A 行：我浏览单元格 A,A，我得到 0。我不保留它（因为它是 0）我浏览单元格 A，DI 得到 5。我保留它。我浏览单元格 A，GI 得到 8，但我不保留它，因为它优于 5。我浏览单元格 A，K，得到 4 我保留它（< 5）。

目前没关系，一个简单的循环就足够了。然后我想浏览K行，如果可能的话不要浏览单元格K，A，因为我在浏览A行时已经浏览过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:25:00.180

您需要遍历矩阵的上/下半部分吗？我假设矩阵是一个 int 数组的数组。

```
var matrix = new int[][]{ ... };
int smallest = 0;
for(int i = 0; i < matrix.Length; i++)
{
    for(int j = 0; j < matrix.Length; j++)
    {
        int number = matrix[i][j];
        if (number != 0 && number < smallest)
            smallest = number;
    }
} 
```

虽然，我没有完全明白

> 然后浏览与前一个最小数字匹配的行

部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:09:14.870

这是我找到的解决方案：

```
 private static IEnumerable<int> ComputeMatrix(int[,] matrix)
    {
        // check args
        if (matrix.Rank != 2) { throw new ArgumentException("matrix should have a rank of 2"); }
        if (matrix.GetUpperBound(0) != matrix.GetUpperBound(1)) { throw new ArgumentException("matrix should have the same size");}

        // indice treated
        List<int> treatedIndex = new List<int>();

        for (int i = 0; i <= matrix.GetUpperBound(0); i++)
        {
            if (treatedIndex.Count == matrix.GetUpperBound(0)) 
                break;

            // distance minimum between 2 points
            int distanceMin = Int32.MaxValue;

            // next iteration of index
            int nextI = i;

            // add the index to ignore in the next iteration
            int nextJ = -1;

            for (int j = 0; j <= matrix.GetUpperBound(1); j++)
            {
                if (treatedIndex.IndexOf(j) == -1)
                {
                    if (matrix[i, j] != 0 && matrix[i, j] < distanceMin)
                    {
                        distanceMin = matrix[i, j];
                        nextI = j;
                        nextJ = i;
                    }
                }
            }

            i = nextI - 1;
            treatedIndex.Add(nextJ);
            yield return distanceMin;
        }
    } 
```

# java - mvn exec:java 因 FileNotFoundException 而失败

> ID：11952542
> 
> 赞同：2
> 
> 时间：2012-08-14T12:47:20.730
> 
> 标签：java, maven, exec

我有一个包含 2 个模块的 Maven 项目。有一个爬虫模块，它依赖于核心模块。每个模块在 src/main/resources/ 中都有自己的 config.ini 文件，每个模块有一个主类。

现在我想像这样启动 NewsCrawler：

```
mvn exec:java -Dexec.mainClass="org.aksw.simba.rdflivenews.NewsCrawler" 
```

这适用于加载爬虫自己的配置文件，但无法从核心模块加载配置文件：

```
NewsCrawler.CONFIG = new Config(new Ini(File.class.getResourceAsStream("/newscrawler-config.ini")));
RdfLiveNews.CONFIG = new Config(new Ini(File.class.getResourceAsStream("/rdflivenews-config.ini"))); 
```

第二个配置加载失败并出现 NullPointerException。我检查了jar文件，配置文件在里面。奇怪的是，**同样的两行**代码在测试用例中起作用。同样使用eclipse，我可以毫无问题地开始课程的主要内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:32:37.417

这是**[您的示例的运行良好的源代码](http://cdn.bitbucket.org/jrx/jrxpublic/downloads/11952542.zip)**。

dezip，然后在命令行上，转到包含父 pom 的目录，然后执行：

```
mvn clean test 
```

在调用 getResourceAsStream() 时做这样的事情来知道你在哪里：

```
try {
    IniFile = new Ini(File.class.getResourceAsStream("/newscrawler-config.ini"));
} catch(Exception e) {
    System.out.println("Resource file not found : " + File.class.getResource("."));
} 
```

`/`之前也尝试删除`newscrawler-config.ini`。这取决于您将文件放在层次结构中的位置。`getResourceAsStream`搜索 CLASSPATH，而不是源路径。

您也可以使用`this.getClass().getResourceAsStream()`代替`File.class.getResourceAsStream()`.

通过在 pom.xml 中配置资源，将 src/main/resource 复制到目标/测试类可能是一种解决方案：

```
<build>
  <resources>
    <resource>
      <filtering>false</filtering>
      <directory>${basedir}/src/main/resource</directory>
    </resource>
  </resources>
  <testResources>
    <testResource>
      <filtering>false</filtering>
      <directory>${basedir}/src/main/resource</directory>
    </testResource>
  </testResources>
</build> 
```

并使用准完整路径调用 getResourceAsStream() ：

```
this.class.getResourceAsStream("/com/jeromeradix/stackoverflow/newscrawler/newscrawler-config.ini")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:05:02.640

这解决了我的问题！我想我看错了（类）路径......

```
NewsCrawler.CONFIG = new Config(new Ini(NewsCrawler.class.getResourceAsStream("/newscrawler-config.ini")));
RdfLiveNews.CONFIG = new Config(new Ini(RdfLiveNews.class.getResourceAsStream("/rdflivenews-config.ini"))); 
```

# python - python中的变量范围，它为什么起作用？

> ID：11952548
> 
> 赞同：0
> 
> 时间：2012-08-14T12:47:44.890
> 
> 标签：python, python-2.7, python-2.x

在下面的 python 示例中，方法和属性似乎超出了范围，但它们仍然有效，发生了什么？

```
for module in output:
    a = 1
    attributes=[]
    methods=[]
    for branch in module[2]:

        for leaf in branch[2]:
            if leaf[0]=="method":
                methods.append(leaf[1]) 
            if leaf[0]=="attribute":
                attributes.append(leaf[1])
print methods
print attributes
print module[0]
print a 
```

但如果我再上一层，它就会停止工作

```
for filename in os.listdir("."):
    print filename
    fName, fExtension = os.path.splitext(filename)
    print fName, fExtension
    if fExtension == ".idl":
        f = open(filename)
        idl = f.read()
        f.close()
        output = parse(idl)
        pprint.pprint(output)
        root={}
        for module in output:
            a = 1
            attributes=[]
            methods=[]
            for branch in module[2]:
                for leaf in branch[2]:
                    if leaf[0]=="method":
                        methods.append(leaf[1]) 
                    if leaf[0]=="attribute":
                        attributes.append(leaf[1])
    print methods
    print module[0] 
```

它说： NameError: name 'methods' is not defined 我正在使用 python 2.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:01:57.467

如注释中所示，`for`循环、`while`循环、`if`语句等不会创建新范围。事实上，创建新作用域的唯一事物是函数、类、模块和方法。因此，当您在循环内创建新变量时`for`，它在该循环外可用，因为它们共享相同的范围。

# android - 如何在应用程序中读取 pdf 文件？

> ID：11952552
> 
> 赞同：0
> 
> 时间：2012-08-14T12:48:06.457
> 
> 标签：android, pdf, itext

我正在开发一个应用程序，我必须在我的应用程序中读取下载的 pdf 文件，而不使用任何外部应用程序。

通过谷歌搜索，我发现有一个名为[iText](http://itextpdf.com/index.php)的库是开源的，但问题是我不知道如何在我的应用程序中使用这个库来阅读 pdf。所以你能不能给我任何示例代码，我可以通过它来理解如何使用这个库..

谢谢大家..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:55:50.440

您必须添加 pdf 库。

已经有一个图书馆等等。

[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)

你应该阅读自述文件，里面有你需要的所有解释。

希望可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:58:22.643

我使用过 VuDroid，它使用 NDK，你可以在[这里找到源代码](http://code.google.com/p/vudroid/source/browse/trunk/src/main/java/org/vudroid/pdfdroid/?r=52#pdfdroid%2Fcodec)

您还可以使用其他库......只需谷歌它。但它成功地为我工作。

# ruby-on-rails - 确保 ElasticSearch 与数据库同步

> ID：11952558
> 
> 赞同：2
> 
> 时间：2012-08-14T12:48:24.347
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我正在考虑使用每日脚本来执行以下操作，以解决 ES 服务器上的更新出现问题的任何情况（我还没有高可用性设置，即便如此，它仍然可能是在 DB 和 ES 之间复制数据的情况下的良好做法）。在将这个脚本放在一起之前，我想我会检查我是否以正确的方式进行此操作，以及是否有任何我应该使用的库或技术。

该脚本将简单地从数据库中检索所有 ID，并从 ElasticSearch 中检索所有 ID，其中`created_at < current_time`（当前时间的快照，因为它是脚本运行时的移动目标）。然后它将根据这些 ID 集之间的差异添加和删除 Elastic 搜索。

这听起来像一个合理的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:54:23.807

要回答我的问题，这不是最好的方法。

一种更简单但更耗费资源的方法是定期重新构建整个索引。当然，这在生产中很难做到，因为它会导致几分钟或几小时的停机时间，所以诀窍是重建一个新索引并切换到使用它。在 ElasticSearch 中，您不能重命名索引，但可以使用别名。

这里有关于方法的讨论，[这里](https://github.com/karmi/tire/issues/62)有针对轮胎用户的 rake[任务](https://gist.github.com/3751744)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:05:31.050

请看一下[jdbc-river](https://github.com/jprante/elasticsearch-river-jdbc)插件。这个插件相当稳定，可以用来在 ES 和数据库之间同步数据。

# mysql - 使用多个关键字的 MySQL 全文搜索

> ID：11952559
> 
> 赞同：0
> 
> 时间：2012-08-14T12:48:24.353
> 
> 标签：mysql, full-text-search, keyword

我有一个带有文本列 (VARCHAR(160)) 的表，我想用多个关键字进行搜索。问题是，我到处都在寻找答案，我不想用与该列中该行匹配的关键字来更新另一列。

这是基本代码：
`$sql = "SELECT * FROM table WHERE MATCH (column) AGAINST ('"A1" "A2 "A3" "B1" "B2" "etc."' IN BOOLEAN MODE)";`

这在 phpmyadmin 中有效（关键字实际上长于 4 个字符）但下一步是当“列”中的一行中的单词与 AGAINST 关键字匹配时，其他列 [s]（例如关键字）被更新例如 1 个或多个关键字（例如 A1、B1、C4）和另一列 TRUE 或 1 所以我知道这一行有多个匹配关键字或只有一个匹配项时为 0（例如 A1）。

我该怎么做呢？

**澄清：**我有多个关键字，我不知道*哪些*关键字对应于某个文本。我希望这些关键字与不同列中的文本匹配。这可以是一个关键字，也可以是多个关键字（例如 A1、B3、C2）。因此，我想要一个额外的第二列，它是真或假 (1,0)，分别对应于多个关键字匹配或一个关键字匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:51:51.770

根据（对于“使用多个关键字搜索”）：[https://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html#function_match](https://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html#function_match)。

```
SELECT * FROM `table` WHERE MATCH (column) AGAINST ('+kw1 +kw2 +kw3 etc...') 
```

# javascript - 通过 JQuery 获取单击复选框的值属性

> ID：11952565
> 
> 赞同：8
> 
> 时间：2012-08-14T12:48:48.967
> 
> 标签：javascript, jquery

我有这个`checkbox`值**1**。

```
<input type="checkbox" name="option_1" id="checkbox_1" value="1"> 
```

我也使用这种方法来选中/取消选中它。

```
$('input[id^="checkbox_"]').not('#checkbox_all').click(function () {
            $('#checkbox_all').prop('checked', false);

    // Get 'VALUE' of the checkbox here   

}); 
```

我需要以某种方式获得 clicked 的“VALUE” `checkbox`。所以在那种情况下它应该是**1**。

任何线索如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T12:50:18.977

在您的点击方法中使用它来获取值

```
$(this).attr("value"); 
```

`$(this)`正在引用已单击的对象。

编辑：你也可以使用`$(this).val();`，但有时我对旧版本的 IE 有问题，所以我`$(this).attr("value")`首先推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:51:08.523

```
​&lt;html>

​&lt;head>

​&lt;/head>

<body>
    <input type="checkbox" name="option_1" id="checkbox_1" value="1">
</body>

​&lt;/html>​​​​​​​

$('input[id^="checkbox_"]').not('#checkbox_all').click(function () {
            $('#checkbox_all').prop('checked', false);

   alert($(this).val());  

});​ 
```

[http://jsfiddle.net/heten/](http://jsfiddle.net/heten/)

在职的 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:51:26.440

我认为你只需要`$(this).val();`在你的点击事件中。

此外，如果您以后需要将该值作为 int 使用，请使用

`var x = parseInt($(this).val(),10);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:50:36.670

`val`jQuery 方法应该正确。

```
$('#checkbox_all').val(); 
```

[http://api.jquery.com/val/](http://api.jquery.com/val/)

# backbone.js - 如何在主干视图中交换模板

> ID：11952566
> 
> 赞同：0
> 
> 时间：2012-08-14T12:48:58.383
> 
> 标签：backbone.js

我有一个 Backbone 应用程序，它可以以两个不同的方向显示一组项目。一次只能显示其中一个方向（“缩略图”和“列表”），并且它们都有一个单独的模板。

是否可以只有一个视图并动态换出模板（下划线）？如果是这样，是否有任何示例代码可以显示这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:33:22.090

只需创建两个不同的模板，然后检查要使用哪个模板`render`

```
render: function() {
  if (this.orientation === THUMBNAIL) {
    this.$el.html(_.template(thumbnailTemplateText, thumbnailTemplateData, thumbnailTemplateSettings));
  } else {
    this.$el.html(_.template(listTemplateText, listTemplateData, listTemplateSettings));
  }
} 
```

真的再简单不过了，就`render`在方向改变时。

希望这可以帮助！

# c# - 关于 C# 中的锁定对象

> ID：11952568
> 
> 赞同：3
> 
> 时间：2012-08-14T12:49:07.497
> 
> 标签：c#, object, thread-safety, locking

考虑以下代码：

```
static void AddItem()
{
    lock (_list) 
        _list.Add ("Item " + _list.Count); //Lock 1

    string[] items;
    lock (_list) 
        items = _list.ToArray(); //Lock 2
    foreach (string s in items) 
        Console.WriteLine (s);
} 
```

如果线程 A 获得了锁 2，而线程 B 试图获得锁 1，那么 B 是否会获得锁？考虑到两个锁使用相同的锁定对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:50:48.730

不，线程 B 需要等到线程 A 释放锁。毕竟，这就是它是同一个 lock 对象的意义——只有*一个 lock*。获取或释放锁的位置无关紧要：一次只有一个线程可以“拥有”监视器。

顺便说一句，我*强烈*建议您使用大括号来提高可读性：

```
lock(_list)
{
    _list.Add(...);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:51:07.373

**不，因为它们使用相同的锁定对象，所以它们是互斥的。**

通常代码用于锁定对象（例如列表）以对其执行操作而不受其他线程的干扰。这要求无论执行什么操作，项目都被锁定。

详细地说，假设您有一个设计为线程安全的列表。如果您尝试同时添加和删除多个项目，您可能会损坏列表。通过在需要修改时锁定列表，您可以帮助确保线程安全。

这一切都取决于一个对象将使所有锁互斥这一事实。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:51:53.503

不，B不会。两者都锁定在同一个对象上，因此这两个锁是“链接的”。因此，如果您需要高度优化此类代码，有时您可能会考虑使用多个锁对象。

附带说明一下，您不应该锁定列表本身，而是锁定`object`专门为此目的创建的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:10:05.440

考虑一下：

```
lock(obj)
{
 //Do Stuff;
} 
```

是以下的简写：

```
Monitor.Enter(obj);
try
{
  //Do Stuff;
}
finally
{
  Monitor.Exit(obj);
} 
```

现在考虑这`Monitor.Enter()`是一个与其他方法一样的方法调用。它对代码中调用它的位置一无所知。它唯一知道的是传递给它的对象。

就它而言，你所说的“锁1”和“锁2”是同一个锁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T12:52:03.410

如果线程 A 正在使用锁，则没有其他线程可以使用它（无论在哪里使用锁）。因此，线程 B 将被阻塞，直到该锁空闲。

# watir - 使用 Watir 我如何访问网页的所有链接，然后访问所访问链接的子链接

> ID：11952569
> 
> 赞同：1
> 
> 时间：2012-08-14T12:49:16.813
> 
> 标签：watir

strong text我有一个包含多个链接的网页，当我们单击任何链接时，它会重定向到另一个也包含多个链接的页面，就像所有链接都有多个页面一样。我想点击所有链接，当我点击第一个链接脚本应该点击重定向页面的所有链接等等..当它完成点击链接时，应该再次点击第一页的第二个链接链接就像链接一样明智。

请任何人都可以帮助我，我已经开发了脚本，通过它我可以单击主（第一）页面的所有链接，但不知道如何为应用程序的子页面执行此操作。请尽快恢复，非常紧急。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:41:05.873

你只需要实现一些这样的递归函数：

```
def crawl(link)
  browser.goto link

  # gather all links before navigating to next link
  all_links = browser.links.reduce([]) do |memo, link|
    memo << link if link.href =~ /appdomain/ # do not visit external links
    memo
  end

  all_links.each do |link|
    crawl link
  end
end

crawl "http://appdomain.com/" 
```

这是未经测试的代码，但它可能会工作:)

此外，此代码不会避免从不同位置两次单击指向同一路径的链接 - 存在优化空间。

可能是您在工作中使用了错误的工具 - 至少在阅读您的问题时看起来如此。原来的问题是什么？

# jquery - 如何查看有错误的元素的 jQuery 验证列表

> ID：11952570
> 
> 赞同：33
> 
> 时间：2012-08-14T12:49:18.073
> 
> 标签：jquery, asp.net-mvc-3, validation, jquery-validate

有时，表单不会提交，因为 jQuery 包含一些不会显示在错误消息中的无效元素。

我们如何才能看到这些错误以便更轻松地调试？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-14T12:49:18.073

```
var validator = $("form").validate()
validator.errorList 
```

将显示阻止表单提交的错误数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-15T21:29:24.743

这适用于我获取验证错误列表（错误输入的 ID 和相关的错误消息）：

```
 if ($('#form').valid()) {

        console.log('FORM VALID');

    } else {

        console.log('FORM INVALID');

        var validator = $('#form').validate();

        $.each(validator.errorMap, function (index, value) {

            console.log('Id: ' + index + ' Message: ' + value);

        });

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-28T01:56:55.093

```
 var val = $("#form".validate());
 console.log("error list", val); 
```

对于那些没有让 errorList 以这种方式工作的人，只需转到控制台并单击 errorList

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-24T12:26:09.210

errorList 似乎只在运行带有 valid() 的调用后才对我完全正确。

```
var validator = jQuery('#form1').validate();
if(jQuery('#form1').valid()){
    var submitErrorsList = new Object();
    for (var i=0;i<validator.errorList.length;i++){
        submitErrorsList[validator.errorList[i].element.name] = validator.errorList[i].message;
    }
}
console.log("Submit Errors", submitErrorsList); 
```

# javascript - 查看多个 $scope 属性

> ID：11952579
> 
> 赞同：454
> 
> 时间：2012-08-14T12:49:41.203
> 
> 标签：javascript, angularjs, events, angularjs-watch

有没有办法使用订阅多个对象的事件`$watch`

例如

```
$scope.$watch('item1, item2', function () { }); 
```

* * *

## 回答 #1

> 赞同：595
> 
> 时间：2014-05-06T12:51:28.057

从 AngularJS 1.3 开始，有一个新方法调用[`$watchGroup`](https://docs.angularjs.org/api/ng/type/%24rootScope.Scope#%24watchGroup)来观察一组表达式。

```
$scope.foo = 'foo';
$scope.bar = 'bar';

$scope.$watchGroup(['foo', 'bar'], function(newValues, oldValues, scope) {
  // newValues array contains the current values of the watch expressions
  // with the indexes matching those of the watchExpression array
  // i.e.
  // newValues[0] -> $scope.foo 
  // and 
  // newValues[1] -> $scope.bar 
}); 
```

* * *

## 回答 #2

> 赞同：291
> 
> 时间：2013-06-20T22:25:32.293

从 AngularJS 1.1.4 开始，您可以使用`$watchCollection`：

```
$scope.$watchCollection('[item1, item2]', function(newValues, oldValues){
    // do stuff here
    // newValues and oldValues contain the new and respectively old value
    // of the observed collection array
}); 
```

Plunker 示例[在这里](http://plnkr.co/edit/ADkxrSQQoSFqhbcSO8Bw?p=preview)

文档[在这里](http://code.angularjs.org/1.1.4/docs/api/ng.%24rootScope.Scope#%24watchCollection)

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2012-08-14T13:04:28.700

`$watch`第一个参数也可以是函数。

```
$scope.$watch(function watchBothItems() {
  return itemsCombinedValue();
}, function whenItemsChange() {
  //stuff
}); 
```

如果您的两个组合值很简单，则第一个参数通常只是一个角度表达式。例如，名字和姓氏：

```
$scope.$watch('firstName + lastName', function() {
  //stuff
}); 
```

* * *

## 回答 #4

> 赞同：71
> 
> 时间：2013-01-19T01:05:31.747

这是一个与实际有效的原始伪代码非常相似的解决方案：

```
$scope.$watch('[item1, item2] | json', function () { }); 
```

**编辑：**好的，我认为这更好：

```
$scope.$watch('[item1, item2]', function () { }, true); 
```

基本上我们跳过了 json 步骤，一开始这似乎很愚蠢，但没有它就无法工作。它们的关键是经常省略的第三个参数，它打开对象相等而不是引用相等。然后我们创建的数组对象之间的比较实际上是正确的。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-05-20T23:57:43.953

您可以使用 $watchGroup 中的函数来选择范围内对象的字段。

```
 $scope.$watchGroup(
        [function () { return _this.$scope.ViewModel.Monitor1Scale; },   
         function () { return _this.$scope.ViewModel.Monitor2Scale; }],  
         function (newVal, oldVal, scope) 
         {
             if (newVal != oldVal) {
                 _this.updateMonitorScales();
             }
         }); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-05-12T14:31:54.230

为什么不简单地将它包装在一个`forEach`?

```
angular.forEach(['a', 'b', 'c'], function (key) {
  scope.$watch(key, function (v) {
    changed();
  });
}); 
```

这与为组合值提供函数的开销大致相同，**而实际上不必担心值组合**。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-10-02T08:16:15.993

组合值的更安全的解决方案可能是使用以下作为您的`$watch`函数：

```
function() { return angular.toJson([item1, item2]) } 
```

或者

```
$scope.$watch(
  function() {
    return angular.toJson([item1, item2]);
  },
  function() {
    // Stuff to do after either value changes
  }); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-08-14T13:35:04.467

$watch 第一个参数可以是[角度表达式](http://docs.angularjs.org/guide/expression)或函数。请参阅[$scope.$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)上的文档。它包含许多有关 $watch 方法如何工作的有用信息：何时调用 watchExpression，角度如何比较结果等。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-04-16T19:21:12.590

```
$scope.$watch('age + name', function () {
  //called when name or age changed
}); 
```

Here function will get called when both age and name value get changed.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-11-12T19:45:20.677

怎么样：

```
scope.$watch(function() { 
   return { 
      a: thing-one, 
      b: thing-two, 
      c: red-fish, 
      d: blue-fish 
   }; 
}, listener...); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-04-02T08:47:16.913

Angular`$watchGroup`在 1.3 版中引入，我们可以使用它来观察多个变量，一个`$watchGroup`块 `$watchGroup`将数组作为第一个参数，我们可以在其中包含所有要观察的变量。

```
$scope.$watchGroup(['var1','var2'],function(newVals,oldVals){
   console.log("new value of var1 = " newVals[0]);
   console.log("new value of var2 = " newVals[1]);
   console.log("old value of var1 = " oldVals[0]);
   console.log("old value of var2 = " oldVals[1]);
}); 
```

# c# - 如何定位特定的串行端口？

> ID：11952580
> 
> 赞同：1
> 
> 时间：2012-08-14T12:49:40.470
> 
> 标签：c#, serial-port, firmware

以下代码仅返回三个串行端口（com3、com4 和 com5）。我想访问的固件位于 USB 插头倍增器上。如何访问此乘法器的串行端口以及如何识别包含要向其发送信息的固件的特定 USB？

```
using System;
using System.IO.Ports;

namespace SerialPortExample
{
    class SerialPortExample
    {
        public static void Main()
        {
            string[] ports = SerialPort.GetPortNames();
            Console.WriteLine("The following serial ports were found:");
            foreach (string port in ports)
            {
                Console.WriteLine(port);
            }
            Console.ReadLine();
        }
    }
} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:18:17.620

这是一个相当大的可用性问题，是由 USB 驱动程序采取捷径并模拟串行端口以使其易于与它们交互而引起的。串口是非常原始的设备，这使得它们的 api 非常易于使用。但是缺乏对即插即用的任何支持，没有办法为他们获得体面的通知。驱动程序只是选择一个任意端口号，由用户决定它可能是哪个端口号。试错的东西。过去这不是问题，串行端口的连接器安装在机器的后面板上，上面清楚地标有 COM 端口名称。

您可能会从 WMI 中获得一些好处，它允许您使用[Win32_SerialPort 查询](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394413%28v=vs.85%29.aspx)枚举串行端口设备。你得到的是相当不可预测的，它完全取决于提供数据的驱动程序。最好的试验方法是使用 WMI Code Creator 实用程序，它还可以自动生成您需要的 C# 代码。不幸的是，我再也找不到下载位置了，这似乎在过去几周内已被删除。希望你能找到替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:15:19.410

下面的代码很好地找到了特定的端口：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;
using System.Windows.Forms;
namespace MyNamespace
{
    class Program
    {
        static void Main(string[] args)
        {
            MyClass x = new MyClass();
            var com = x.GetCOMs();
            foreach (string port in com) 
            {
                Console.WriteLine(port);
            }
            Console.ReadLine();
        }

    }

    class MyClass
    {
        public List<string> GetCOMs()
        {
            List<string> coms = new List<string>();
            try
            {
                ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2",
                "SELECT * FROM Win32_PnPEntity WHERE ConfigManagerErrorCode = 0");

                foreach (ManagementObject obj in searcher.Get())
                {
                    object captionObj = obj["Caption"];
                    if (captionObj != null)
                    {
                        string caption = captionObj.ToString();
                        if (caption.Contains("(COM"))
                        {
                            coms.Add(caption);
                        }
                    }
                }

                m_ParseCOMs(ref coms);
            }
            catch (ManagementException ex)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + ex.Message);
                return coms;
            }

            return coms;
        }

        private void m_ParseCOMs(ref List<string> comPorts)
        {
            string[] temp;
            List<string> temp2 = new List<string>();
            int index = 0;
            foreach (string s in comPorts)
            {
                string temp3 = "";
                temp = s.Split(' ');
                temp3 += temp[temp.Length - 1] + " - ";
                for (int i = 0; i < temp.Length - 1; i++)
                {
                    temp3 += temp[i] + " ";
                }
                temp2.Insert(index, temp3);
                index++;
            }
            comPorts = temp2;
        }
    }
} 
```

# algorithm - Magento为什么有3种计税方法？

> ID：11952584
> 
> 赞同：3
> 
> 时间：2012-08-14T12:49:48.560
> 
> 标签：algorithm, magento

今天我正在研究 Magento 税收计算的工作原理，以了解“**基于税收计算方法**”的行为之间的差异。

我深入追踪了**Mage_Tax_Model_Sales_Total_Quote_Tax**，它实现了**_unitBaseCalculation**、**_rowBaseCalculation**、**_totalBaseCalculation**中的所有方法。

我发现它们产生完全相同的结果。那么，他们为什么要经历实施它们的麻烦呢？

例如，单价计算麻烦的是计算单个单元的税，然后将折扣金额除以数量（如果在折扣后应用税），然后将两者相减，然后再乘以数量......这只是引入了舍入误差。

而行总计计算是最直观的计算（从“小计”行中获取价格）减去折扣金额（如果在折扣后应用税收）。

而第三个只是第二个的聚合，一次计算。

这只是给税收计算逻辑带来了混乱和混淆。任何人都可以阐明为什么这样做吗？

（舍入错误？向后兼容性？TheDailyWTF 奖的候选人？）

**编辑**：据记录，这在 Magento 1.6 和 1.7 中是正确的，不知道旧版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:01:25.627

我从以下位置找到了这个：[https](https://gist.github.com/2572772) ://gist.github.com/2572772 （似乎是 Alan Storm）

> 此功能可能是受个别当地规则（或客户要求）关于如何计算税款的推动，因为根据添加和四舍五入发生的时间，小数加起来可能会有所不同。也就是说，我还没有运行代码来查看我的猜测是否正确，所以 YMMV。未来研究需要考虑的其他领域。
> 
> 每种模式如何与购物车价格规则和商店折扣一起玩

对于购物车价格规则，要费尽心思去划分折扣金额（可能不能被报价商品数量整除，从而引入舍入误差），最终结果实际上是相同的过程，只是不同“ when"s 和 "where"s 关于舍入。

# mysql - MySql和subselect，为什么这么慢？

> ID：11952587
> 
> 赞同：2
> 
> 时间：2012-08-14T12:49:51.353
> 
> 标签：mysql, query-optimization, subquery

我在这里有这个选择：

```
select parent_id from sales_flat_order_status_history where status like '%whatever%' group by parent_id having count(parent_id) > 1 
```

此查询仅运行几秒钟。现在我想在另一个选择中使用它，如下所示：

```
select increment_id from sales_flat_order where entity_id in(
select parent_id from sales_flat_order_status_history where status like '%whatever%' group by parent_id having count(parent_id) > 1) 
```

这会永远运行，所以我尝试一一插入 ID：

```
select increment_id from sales_flat_order where entity_id in(329,523,756,761,763,984,1126,1400,1472,2593,3175,3594,3937,...) 
```

这运行得很快，区别在哪里，我怎样才能让我的第一种方法更快地工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:01:09.197

您的查询需要很长时间才能运行，因为它正在执行子查询并查找 sales_flat_order 表的每一行。

加入可能会更快：

```
select increment_id 
from sales_flat_order
  inner join (select parent_id 
              from sales_flat_order_status_history 
              where status like '%whatever%' 
              group by parent_id having count(parent_id) > 1) Sub 
  on sales_flat_order.entity_id  = Sub.parent_ID 
```

这会强制子查询只执行一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:56:35.423

子查询以 foreach 样式处理（对每一行进行子选择）。

认为`in (1,2,3)`不要对某些旧版本的 mysql 使用索引。

# postgresql - 在 Play 1.2.4 框架中显示 BLOB 图像

> ID：11952588
> 
> 赞同：1
> 
> 时间：2012-08-14T12:49:53.173
> 
> 标签：postgresql, playframework, playframework-1.x

我正在做这个项目，我必须存储用户的信息，包括他的图像。我将它作为 blob 图像存储在数据库中。如果“照片”是我的图像列，而不是当我在网页中呈现其他列时，例如：“render.column_name”它工作正常。但是当我为图像执行此操作时，例如“render.photo”，数据库在我的网页中返回“jpa.blob .....”。有人可以帮我如何显示存储在数据库中的这张图片吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:20:17.840

You need a separate controller method to supply the image data. The controller could look like this, assuming you have some meta-information about the file, namely, the mime-type, here in a custom entity `FileStore`.

```
public class ShowFile extends Controller {
    public static void render(String id) {
        FileStore fs = // fetch the file out of the DB  using the id

        notFoundIfNull(fs);

        response.setContentTypeIfNotSet(fs.mimeType);
        response.setHeader("Cache-Control", "public, max-age=31536000");
        renderBinary(new ByteArrayInputStream(fs.content), fs.content.length);
    }
} 
```

In the page you'll link to that method using the `img` tag:

```
<img src="@{ShowFile.render(image.id)}" /> 
```

# shell - 切换用户而不提示在 shell 脚本中输入密码

> ID：11952590
> 
> 赞同：1
> 
> 时间：2012-08-14T12:50:05.767
> 
> 标签：shell, scripting

我需要使用 shell 脚本在两个用户之间切换。

我使用 su 和 sudo 在用户之间切换。最重要的是，它每次都提示输入用户密码，我不希望这种情况发生。

我知道密码；有没有办法可以在脚本本身中对其进行硬编码，这样它就不会提示用户输入密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:28:12.583

`NOPASSWD`一个条款不会`sudoers`起作用吗？例如：

```
user1 ALL=(ALL:ALL) NOPASSWD: /bin/su user2 
```

允许`user1`su 到`user2`没有密码。如果您只需要将某个命令作为 运行`user2`，请将其添加到`sudoers`（通过`visudo`）显式：

```
user1 ALL=(user2) NOPASSWD: /path/to/command 
```

然后`user1`运行：

```
sudo -k user2 /path/to/command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:00:49.877

使用`-S`参数`sudo`接受来自标准输入的密码。请参阅：[如何在不覆盖 TTY 的情况下将密码传递给 su/sudo/ssh？](https://stackoverflow.com/questions/233217/pass-password-to-su-sudo-ssh)

# bash - 获取两个已定义模式之间的字符串并以行尾结束

> ID：11952593
> 
> 赞同：1
> 
> 时间：2012-08-14T12:50:09.450
> 
> 标签：bash, shell, unix, sed

被测文件将具有如下文本模式：

```
name1: function(){

},
 name2: function(){

},
 name3: function(){

}, 
```

在此示例中，我需要获取“name1”“name2”和“name3”。所以使用了这个 bash 脚本：

```
v1='},'
v2=': function'
sed 's/'"$v1"'\(.*\)'"$v2"'/\1/g' test1.js > newfile2 
```

这似乎只有在模式显示如下时才有效：

```
 },name1: function 
```

但当然，文本文件不是以这种方式格式化的。就像这样：

```
 },
name1: function 
```

我应该在正则表达式中添加什么来完成我需要的东西？我不想改变使用`sed`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:52:23.077

```
grep function your_file|awk -F":" '{print $1}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:54:50.440

```
sed -n 's/\s*\([^: ]*\): function.*/\1/p' test1.js 
```

# css - 如何清理样式表的混乱？

> ID：11952594
> 
> 赞同：0
> 
> 时间：2012-08-14T12:50:11.800
> 
> 标签：css, asp.net-mvc, browser, stylesheet

> **可能重复：**
> [如何清理大型网站中的样式？](https://stackoverflow.com/questions/8120048/how-to-clean-up-styles-in-a-large-web-site)

是否有任何类型的解析工具可以扫描我的 *.css 文件跨我的 Web 应用程序的所有页面并组织其内容？通过组织，我的意思是丢弃冗余输入，统一选择器，这些选择器会重复彼此的行为，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:52:43.467

我不确定是否有一个程序会遍历您的所有文件。但是这个会一次做一个

[http://www.cleancss.com/](http://www.cleancss.com/)和[http://www.lonniebest.com/FormatCSS/](http://www.lonniebest.com/FormatCSS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:54:06.940

我在很大程度上使用[了 CleanCSS 。](http://www.cleancss.com/)

这不是您理想的解决方案 - 它无法扫描目录，但您可以复制/粘贴您的 css 文件的内容，它会压缩所有重复的选择器和属性。

# jquery - 将 HTML 表格转换为 JSON

> ID：11952597
> 
> 赞同：0
> 
> 时间：2012-08-14T12:50:18.800
> 
> 标签：jquery, json, html-table

在我`MVC 3 Razor`看来，我有`table with check-boxes`如下

```
 <table border="1" id="permiison">
 <thead>
    <tr><th style="width:0px"></th><th>Menu Name</th><th>Add</th> <th>Edit</th><th>Authorize</th><th>View</th></tr>
</thead>
<tbody>
    <tr id="per_tr">
    <td style="width:0px">10</td><td></td><td><input type="checkbox" checked="True" style="width:80px" id="chkAdd"></td><td><input type="checkbox"   checked="True" style="width:80px"></td><td><input type="checkbox" checked="True" style="width:80px"></td> <td><input type="checkbox" style="width:80px" checked="True"></td>
    </tr>

    <tr id="per_tr"><td style="width:0px">11</td><td><span style="width:150px">Group</span></td><td><input type="checkbox" checked="True" style="width:80px" id="chkAdd"></td><td><input type="checkbox" checked="True" style="width:80px"></td><td><input type="checkbox" checked="True" style="width:80px"></td> <td><input type="checkbox" style="width:80px" checked="True"></td>

    </tr>
</tbody>
</table> 
```

我想`convert the table into json`检查复选框的值。如果有人知道，请分享方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:17:20.163

您可以执行以下操作：

```
(function($){
    var getJsonFromTable = function()
        {
            var rows = [];
            $('#permiison tbody tr').each(function(i, n){
                var $row = $(n);
                rows.push({
                    id: $row.find('td:eq(0)').text(),
                    name: $row.find('td:eq(1)').text(),
                    add: $row.find('td:eq(2) input[type=checkbox]').prop('checked'), 
                    edit: $row.find('td:eq(3) input[type=checkbox]').prop('checked'), 
                    authorize: $row.find('td:eq(4) input[type=checkbox]').prop('checked'), 
                    view: $row.find('td:eq(5) input[type=checkbox]').prop('checked'),                                              
                });                
            });
            return JSON.stringify(rows);
        };
    $(function(){        
    console.log(getJsonFromTable ());
    });
})(jQuery); 
```

[http://jsfiddle.net/PKFaE/](http://jsfiddle.net/PKFaE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:16:29.550

或者查看这里并为您自己的情况做同样的事情（它成功回答的问题）：

[在 jQuery 中将 HTML 表格数据转换为 JSON 对象](https://stackoverflow.com/questions/2240005/convert-a-html-table-data-into-a-json-object-in-jquery)

祝你好运，希望这对你有帮助。

# android - removeAllViews() 和 removeAllViewsInLayout() 有什么区别

> ID：11952598
> 
> 赞同：57
> 
> 时间：2012-08-14T12:50:25.637
> 
> 标签：android, android-layout

我正在动态填充线性布局。根据响应，我必须清除过去的子视图并创建新视图。我已经阅读了文档，但仍然对这几种方法感到困惑，它们看起来都具有相同的功能。我应该使用哪个功能。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-07-14T22:25:43.783

正如 Scott Biggs 指出的那样，差异并不大。唯一的区别是`removeAllViews()`调用`requestLayout()`和`invalidate()`之后。之所以会出现这种差异，关键在于理解`removeAllViewInLayout()`. 令人困惑的是，它的含义并不是“删除此视图布局中的所有视图”。

[如果我们看一下类似的方法，removeViewInLayout()，我们可以理解它应该是什么意思：](https://developer.android.com/reference/android/view/ViewGroup.html#removeViewInLayout(android.view.View))

> 在布局期间删除视图。如果在 onLayout() 方法中需要删除更多视图，这很有用。

所以`removeAllViewsInLayout()`实际上意味着“删除所有视图，并且我们在布局传递期间调用此方法（即 onLayout()）”。这就是为什么`removeAllViewsInLayout()`不调用 to的原因`requestLayout()`，因为它假定您当前已经在布局通道中，因此不需要请求另一个布局通道。

如果您使用`removeAllViewsInLayout()`，那么您有责任确保在布局过程中调用它，或者根据需要正确`requestLayout()`调用`invalidate()`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-22T13:30:17.653

`removeAllViews()`：调用此方法从 ViewGroup 中删除所有子视图。 `removeAllViewsInLayout()`：由 ViewGroup 子类调用以从其自身中删除子视图，此时它必须首先知道其在屏幕上的大小，然后才能计算它将呈现多少子视图。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-06-24T16:30:21.573

好吧，看看源代码，没有太大区别：

```
public void removeAllViews() {
    removeAllViewsInLayout();   // Details implemented here
    requestLayout();
    invalidate(true);
} 
```

因此，除非您想`invalidate()`在您选择的时间打电话，否则您最好使用`removeAllViews()`并节省一些打字时间。

编辑
有关更详细的解释，请参阅[David Lui](https://stackoverflow.com/a/38385205/624814)的回答。总而言之，`removeAllViews()`除非您正在构建视图，否则请使用 - 在这种情况下，您将调用`removeAllViewsInLayout()`.

# jquery - 每次移动鼠标时都会调用jquery .Hover

> ID：11952599
> 
> 赞同：0
> 
> 时间：2012-08-14T12:50:35.163
> 
> 标签：jquery, hover, mouseover

我有一种感觉，这是由我的函数设置方式引起的，但是每次将鼠标移到元素上时，都会多次调用悬停事件（我只希望在鼠标悬停在元素，以及当鼠标离开元素时（因此不再在它上面）。

这是代码：

```
$(document).ready(function(){

$('#about-us-facebook-default').hover(
     function(){
     $(this).css({'display':'none'});
     $('#about-us-facebook-hover').css({'display':'block'});
},
function(){
     $(this).stop(true,true).css({'display':'block'});
     $('#about-us-facebook-hover').css({'display':'none'});

}
);

}); 
```

布局：

```
<div class="about-contact-button">
<a href="http://www.facebook.com/BlackTiePhotographers" id="about-us-facebook-hover" >
<img src="http://blacktiephotographers.com/wp-content/uploads/2012/03/facebook-hover.png" alt="" title="Connect with us on Facebook" width="30" height="30" class="alignnone size-full wp-image-2267" /></a>
<a href="http://www.facebook.com/BlackTiePhotographers" id="about-us-facebook-default">
<img src="http://blacktiephotographers.com/wp-content/uploads/2012/03/facebook.png" alt="Join Black Tie Photographers on Facebook" title="Connect with us on Facebook" width="30" height="30" class="alignnone size-full wp-image-2266" /></a>
<a href="http://www.facebook.com/BlackTiePhotographers">Join on Facebook</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:56:58.947

您正在从鼠标输入方法中隐藏元素，这会导致鼠标再次离开元素，这反过来又会导致元素再次显示。这会重复，导致您观察到的行为。

您可能希望将处理程序附加到外部 div 并处理那里的可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:18:59.453

Try this :

```
$(document).ready(function(){
    $('#about-us-facebook-default').mouseover(function(){
         $(this).css({'display':'none'});
         $('#about-us-facebook-hover').css({'display':'inline-block'});          
    });
    $('#about-us-facebook-hover').mouseout(function(){
        $('#about-us-facebook-default').stop(true,true).css({'display':'inline-block'});
        $(this).css({'display':'none'});
    });
}); 
```

But if I can give you an advice you must do that in css it is simple and quite lite.

[here](http://jsfiddle.net/Wh7vW/2/) you can find the two solutions.

# jquery - jQuery 和 MooTools 冲突在一起

> ID：11952601
> 
> 赞同：0
> 
> 时间：2012-08-14T12:50:35.793
> 
> 标签：jquery, mootools

我将以下代码与 jQuery 一起使用，该代码有效

```
$('.s_switcher').hover(function() {
   $(this).find('.s_options').stop(true, true).slideDown('fast');
},function() {
   $(this).find('.s_options').stop(true, true).slideUp('fast');
}); 
```

更换代码并添加MooTools和Jquery后，没有结果，代码也不起作用。

```
//no conflict jquery
jQuery.noConflict();
//jquery stuff
 $jQuery('.s_switcher').hover(function() {
        $jQuery(this).find('.s_options').stop(true, true).slideDown('fast');
 },function() {
        $jQuery(this).find('.s_options').stop(true, true).slideUp('fast');
})(jQuery); 
```

请告诉我是否有人可以提供帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:51:58.467

使用`jQuery(...)`而不是`$jQuery(...)`. 或者您可以创建`$jQuery`一个别名，`jQuery`如下所示：`$jQuery = jQuery.noConflict()`.
此外，在代码末尾删除`(jQuery)`- 它不会做任何事情。

# c# - 这在 NUnit 中是否可行

> ID：11952609
> 
> 赞同：0
> 
> 时间：2012-08-14T12:50:46.763
> 
> 标签：c#, nunit

我想要的是一个包含多个文件的项目。每个文件都有一组测试。然后我希望能够运行每个测试。

所以现在我有一个项目，但我只有一个文件：Project.cs。当我通过控制台/GUI 运行测试时，所有来自 Project.cs 的测试都在运行（如果我使用 /fixture 命令，则运行一个子集）。我想要（或想知道是否可能）将是以下内容。

有一个名为测试的项目。其中我有几个文件 FileTests.cs、ControlTests.cs、MiscTests.cs 等，每个文件都有各种测试。然后还有一个Program.cs。我将能够运行测试项目并选择我运行的文件测试、控制测试等。

那可能吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:53:08.780

听起来您正在寻找[NUnit 测试类别](http://www.nunit.org/index.php?p=category&r=2.2.10)。您可以将您的测试归为正确的类别，然后只运行属于该类别的测试。与必须将它们物理定义为文件或程序集相比，这为您提供了更大的灵活性。

# asp.net - 错误 - 名称空间“System.Web”中不存在类型或名称空间名称“Extensions”

> ID：11952614
> 
> 赞同：4
> 
> 时间：2012-08-14T12:50:50.823
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

如果我使用 Visual Studio 2010 dot net 4.0 创建一个全新的网站项目，如果我尝试添加“使用 System.Web.Extensions”，则会收到此错误消息。

```
The type or namespace name 'Extensions' does not exist in the namespace 'System.Web' 
```

如果我使用 dot net 3.5 创建网站，我不会收到错误消息

我所做的任何搜索都建议从目标平台 4.0 客户端配置文件更改为纯 4.0

但我没有客户端配置文件作为选项，并且 C:\Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.Extensions.dll 在我的电脑上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T23:27:25.637

您需要添加对 System.Web.Extensions 的引用才能在您的项目中使用它。

![添加 System.Web.Extensions](../Images/f9f3b4ed7fd54aafd54e410da4ab4c1f.png)

# javascript - 使用间隔时间从javascript自动调用jsp

> ID：11952625
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:51:10.040
> 
> 标签：javascript, jsp

我有 2 个不同的 jsp 页面，我需要像幻灯片放映一样一一调用它们。所以我的代码是

```
 function switchPages(){ //here common function to call from my jsp file

    setInterval(pageOne, 20000);
    setInterval(pageSecond, 20000);
}

function pageOne(){

    var path='graph1.jsp';
    window.location.href = path;

}

function pageSecond(){

    var path='graph2.jsp';
    window.location.href = path;

} 
```

当我的 setInterval 被调用时，它会变得模棱两可。有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:59:35.423

当页面已经被重定向时，您希望如何调用第二个函数。这是完全错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:55:53.910

您可以改用 setTimeout ：

```
function startSwitchPages(){
    setTimeout(pageOne, 20000);
};

function pageOne(){
    var path='graph1.jsp';
    window.location.href = path;
    setTimeout(pageSecond, 20000);
};

function pageSecond(){
    var path='graph2.jsp';
    window.location.href = path;
    setTimeout(pageOne, 20000);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:08:05.203

试试这个：

```
setInterval(function(){pageOne(),pageSecond()},20000) 
```

# c# - 在 ldap 中对用户进行身份验证

> ID：11952635
> 
> 赞同：0
> 
> 时间：2012-08-14T12:51:49.773
> 
> 标签：c#

目录的结构是这样的，

```
ou=system,ou=valeteck,cn=mayank 
```

我必须检查用户输入的密码是否正确并与用户的密码匹配，即 mayank。

但系统和`cn='mayank'`密码不同。如果我使用密码创建目录条目对象，`cn`我没有使用 ldap 进行身份验证，但是如果我使用系统目录及其密码，我将获得身份验证，但是如何检查用户的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:58:41.920

```
 private bool LoginS(string userName, string password)
        {
            bool authentic = false;
            try
            {
                DirectoryEntry entry = new DirectoryEntry(LDAP-Path, userName, password, AuthenticationTypes.Secure);
                authentic = true;

                Console.WriteLine("Authentication successful");

            }
            catch (DirectoryServicesCOMException e)
            {
                _logger.Error("Authentification error", e);
                //User doesnt exist or input is false

            }
            return authentic;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:04:18.793

Windows API 使用 advapi32.dll 为您提供了更简单的方法。

例子：

```
[DllImport("advapi32.dll", EntryPoint = "LogonUserW", SetLastError = true, CharSet = CharSet.Auto)]
    public static extern bool LogOnUser(string lpszUserName, string lpszDomain, string lpszPassword,
        int dwLogOnType, int dwLogOnProvider, ref IntPtr phToken); 
```

如果用户确实在域中并且已正确输入其密码，则此方法仅返回 true 或 false。然后，您只需使用自己的登录方法检查针对 advapi32.dll 的身份验证。

```
public ActionResult SignIn(SignInModel model)
    {
        string domainName = CheckSignIn.GetDomainName(model.User.UserName);
        string userName = CheckSignIn.GetUserName(model.User.UserName);
        IntPtr token = IntPtr.Zero;
        bool result = CheckSignIn.LogOnUser(userName, domainName, model.User.UniqueUserCode, 2, 0, ref token);
        if (result)
        {
            if (!string.IsNullOrEmpty(Request.QueryString["ReturnUrl"]) && Request.QueryString["ReturnUrl"] != "/")
            {
                FormsAuthentication.RedirectFromLoginPage(model.User.UserName, false);
            }
            else
            {
                FormsAuthentication.SetAuthCookie(model.User.UserName, false);
                return RedirectToAction("MyVoyages", "Voyage");
            }
        }
        return SignIn(true);
    } 
```

简单，但功能强大。

# java - HtmlEmail 中的 setTo 方法用于将邮件设置为多个收件人的问题

> ID：11952637
> 
> 赞同：0
> 
> 时间：2012-08-14T12:51:56.870
> 
> 标签：java, apache-commons-email

我们有一个发送提醒邮件的模块。我们正在使用`apache commons email`库来发送邮件。`addTo`如果我们使用的 方法只发送一个电子邮件地址，我们没有问题`HtmlEmail`，但是当我们尝试将同一邮件发送给使用`setTo`which 的多个用户时，我们会遇到异常接受`Collection`。
甚至`commons mail`javadoc 也提到这种方法是向一组电子邮件地址发送邮件，但令人惊讶的是它不起作用。
是否有任何解决方法来解决此问题或提示继续正确​​的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:07:33.113

您是否确定您的 Collection 仅包含预期类型的​​对象？摘自 setTo [(java.util.Collection)](http://commons.apache.org/email/api-release/org/apache/commons/mail/Email.html#setTo%28java.util.Collection%29)的 JavaDoc ：

> 设置“TO”地址列表。指定集合中的所有元素都应为 java.mail.internet.InternetAddress 类型。

为您的问题提供源代码或例外可以更轻松地帮助您找到问题的解决方案。

# c - 将数据包从一台linux服务器发送到另一台服务器（LINUX）

> ID：11952640
> 
> 赞同：1
> 
> 时间：2012-08-14T12:52:00.203
> 
> 标签：c, linux, sockets

我是 C 编程新手。我有两台 Linux 机器。我想将一些数据包从一台 Linux 机器发送到另一台 Linux 机器。请推荐一些参考资料。我在网上找到了很多东西，有点困惑如何进行。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:56:16.420

从头开始使用 C 和网络有点困难，但最好的在线套接字教程是[Beej 的网络编程指南](http://beej.us/guide/bgnet/)。

如果您认真学习网络编程，请阅读这本书——您永远不会后悔：[UNIX 网络编程，第 1 卷](http://www.unpbook.com/)，作者：W. Richard Stevens。

# asp.net-mvc - 具有 EntityFramework 分层问题的 ASP.NET MVC 4

> ID：11952641
> 
> 赞同：4
> 
> 时间：2012-08-14T12:52:01.333
> 
> 标签：asp.net-mvc, entity-framework

我的问题与我目前正在研究的解决方案中的分层有关。我觉得我正在走的路正在打破层分离，并希望得到一些反馈。

我当前的项目是一个 ASP.NET MVC4 应用程序，它使用 autofac、EF 5.0 Code First。

我有以下几层：领域、数据、服务和表示

数据层使用一个存储库，该存储库通过 EntityFramework 从数据库返回结果。此存储库返回一个 IQueryable<> 对象作为检索结果的集合。（这是因为 EF 的 DbSet<> 派生自 IQueryable<>）。

```
public interface IRepository<T> where T : BaseEntity
{
    T GetById(object id);
    void Insert(T entity);
    void Update(T entity);
    void Delete(T entity);
    IQueryable<T> Entities { get; }
} 
```

服务层利用上述存储库，因此对 IQueryable<> 对象进行操作。默认情况下，我已经实现了我的 Service 方法来返回 IEnumerbale<> 对象以进行数据检索，因此我的表示层应该始终从服务接收一个 IEnumerable<> 集合。

希望上下文足够清楚。这是我的问题：

我有以下两个域类：

```
public class Video
    {
        public virtual string Title { get; set; }
        public virtual VideoCategory VideoCategory { get; set; }
        public int VideoCategoryId { get; set; }
    }
public class VideoCategory
    {
        public string Title { get; set; }
        public string Description { get; set; }
        public List<Video> Videos { get; set; }
        public VideoCategory()
        {
            Videos = new List<Video>();
        }
    } 
```

此外，我在表示层中定义了以下 VideoCategoryModel 类，我需要在 ui 中进行绑定：

```
public class VideoCategoryModel
    {
        public string Title { get; set; }
        public string Description { get; set; }
        public int VideoCount { get; set; }
    } 
```

如您所见，我想获取代表视频类别的对象集合，其中包含每个类别的视频计数。当然，我想在不获取所有 Video 对象的情况下执行此操作。为了做到这一点，服务方法返回一个 IQueryable< VideoCategory > 到我的演示文稿中，这样我就可以在我的控制器中像这样查询它：

```
 var convertedResults = from videoCategory in service.GetVideoCategories() 
                            select new VideoCategoryModel()
                            { 
                             Title = videoCategory.Title, 
                             Description = videoCategory.Description, 
                             VideoCount = videoCategory.Videos.Count
                            }; 
```

EF 将很好地解释此查询，它将在数据库上运行一个很好、快速的 Select 查询，使用计数而不是获取所有 Video 对象。这是 GetVideoCategories 实现：

```
public IQueryable< VideoCategory > GetVideoCategories()
        {
            return videoCategoryRepository.Entities;
        } 
```

我想知道我是否通过将 IQueryable< VideoCategory > （实际上是 EF DbSet）直接返回到我的控制器而不是返回 List<> 对象来打破我的关注点分离和分层。

此外，在 IQueryable<> 对象上调用 ToList() 方法后，将无法将 Count EF 很好地转换为 SQL，因此我再次无法从服务返回 List<VideoCategory>。

所以总结一下这个问题。将 EFDbSet 直接返回给控制器是个好主意吗？我打破了层分离吗？如果是这样，我有什么选择。

谢谢你。

# iphone - 如何在目标c中打印出bool

> ID：11952646
> 
> 赞同：15
> 
> 时间：2012-08-14T12:52:10.927
> 
> 标签：iphone, objective-c, printing, boolean

我在我的 NSUserDefault 中为键 TCshow 设置了一个布尔值，我想运行一个 nslog 测试键是否保存，并且我试图打印出布尔值。这是我的代码，但它不起作用，有什么建议吗？

```
- (IBAction)acceptAction:(id)sender {
//key store to nsuserdefault
self.storedKey = [[NSUserDefaults alloc] init];
[self.storedKey setBool:YES forKey:@"TCshow"];
//trying to print out yes or not, but not working...
NSLog(@"%@", [self.storedKey boolForKey:@"TCshow"]);

} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-14T12:54:17.460

`%@`是为对象。`BOOL`不是一个对象。你应该使用`%d`.

它将打印出`0`FALSE/NO 和`1`TRUE/YES。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-14T13:03:00.557

你应该使用

```
NSLog(flag ? @"Yes" : @"No"); 
```

这`flag`是你的`BOOL`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T12:56:28.223

```
NSLog(@"The value is %s", [self.storedKey boolForKey:@"TCshow"] ? "TRUE" : "FALSE"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T12:53:53.910

```
NSLog(@"%d", [self.storedKey boolForKey:@"TCshow"]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T12:56:24.090

```
if([self.storedKey boolForKey:@"TCshow"]){
NSLog(@"YES");
}
else{
NSLog(@"NO");

} 
```

我想这会对你有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T13:26:59.600

只是为了使用新语法，您总是可以将 bool 装箱，以便它是一个对象并且可以打印`%@`

```
NSLog(@"%@", @( [self.storedKey boolForKey:@"TCshow"] )); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-25T02:00:03.553

[已经在另一个帖子](https://stackoverflow.com/questions/6358349/how-to-print-boolean-flag-in-nslog/70104953#70104953)中回答了，复制到这里：

* * *

*   直接将 bool 打印为整数

```
BOOL curBool = FALSE;
NSLog(@"curBool=%d", curBool); 
```

->`curBool=0`

*   将布尔转换为字符串

```
char* boolToStr(bool curBool){
    return curBool ? "True": "False";
}

BOOL curBool = FALSE;
NSLog(@"curBool=%s", boolToStr(curBool)); 
```

->`curBool=False`

# string - 基于单词替换动态创建给定类型的所有句子

> ID：11952654
> 
> 赞同：0
> 
> 时间：2012-08-14T12:52:33.600
> 
> 标签：string, formatting, permutation, combinations, replace

目前我有一个 C# 问题，我无法理解。本质上，我需要生成一个字符串列表或字符串数​​组，这些字符串是基于句子中的一个或多个单词可能具有不同的拼写或用途的事实。我打算为句子中的每个单词（可能）提供多种不同的可能性。

例如，如果我定义单词 'are' 可以写成 'are' 或 'r' 并且单词 'you' 写成 'you' 或 'u'，则预期的输出会传递类似于“how are你将成为：

*   “你好吗”
*   “你好吗”
*   “你好吗”
*   “你好吗”

我考虑过可以将 Enums 用于单词类型，例如：

```
public enum Word  
{  
  Are,  
  You  
} 
```

并使用某种辅助方法返回一组可能的用途：

```
public static string GetVariants(Word w)  
{
 switch(w)
 {
   case Word.Are:
   return new string[] { "are", "r" };
   case Word.You:
   return new string[] { "you", "u"};
 } 
```

但是我似乎找不到一种体面的方法来定义一个使用固定字符串和这些可变词类型标识符的组合并创建可能的组合的句子。

单词需要按照正确的顺序书写，我只需要能够生成多种不同的方式来编写相同的内容。一旦我对此有所了解，我还希望它不仅适用于这个特定的句子结构。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:39:06.943

万一有人遇到类似的问题，我最终使用了 Eric Lippert 的笛卡尔产品解决方案的 hack 来实现我想要的工作：

[http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

# python - 发布通知时boto.sns BotoServerError

> ID：11952660
> 
> 赞同：1
> 
> 时间：2012-08-14T12:52:49.007
> 
> 标签：python, boto, amazon-sns

我正在为 Amazon SNS 使用 Python 2.7 和 boto 库。当我收到带有异常详细信息的异常时，我正在尝试发送通知。在某些情况下，异常字符串包含类似“ `--->`”或“ `\`”的字符串。我怀疑这些字符会导致`BotoServerError`错误请求。

完整的异常字符串：

```
boto.exception.BotoServerError: BotoServerError: 400 Bad Request None 
```

防止我的应用程序出现此异常的最佳方法是什么？

编辑：这是我发送消息的代码：

```
sns = boto.sns.connect_to_region(credentials...)
sns.publish(topicArn, message, subject) 
```

这是消息：

```
Type: <type 'exceptions.ValueError'>
Detail: ('invalid literal for int() with base 10: \'{"default":"216","sqs":"216"}\'',) 
```

# sql-server - SQL Server Express 与 Pentaho（或任何非 Microsoft 产品）一起使用

> ID：11952661
> 
> 赞同：1
> 
> 时间：2012-08-14T12:52:48.577
> 
> 标签：sql-server, sql-server-2008-r2, pentaho

我正在尝试将本地 SQL Server 数据库连接到名为 Pentaho 的 ETL 实用程序。Pentaho 很容易连接到完整版本的 SQL 服务器，没有问题。

我设置了混合模式身份验证，并为 sql server express 实例创建了一个 sql server 帐户，可用于通过 SSMS 登录。

当我尝试通过 Pentaho 登录时，我收到关于它的错误，不知道服务器是什么，或者服务器没有响应。我试过 {localhost, myip, localhost\SQLEXPRESS, myip\SQLEXPRESS, just SQLEXPRESS} 作为服务器名称（而 SQLEXPRESS 是实例名称）。

我知道过去我在将其他程序连接到 SQLEXPRESS 数据库时遇到了麻烦。有人可以告诉我为什么它的行为与使用完整安装的 SQL Server 时不同，以及如何解决这些差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:16:46.590

如果 SQL Server Express 在不同的服务器上，您是否启用了 TCP/IP 协议？

# mysql - 使用 txt 文件和 bash 脚本填充 MySQL 表

> ID：11952662
> 
> 赞同：1
> 
> 时间：2012-08-14T12:52:48.883
> 
> 标签：mysql, bash, sed, awk

我正在尝试编写一个 bash 脚本，该脚本将获取一个文本文件并使用其内容来填充 MySQL 表。

文本文件包含许多我需要添加到表中的条目。

文本文件内容示例：

```
Firstname=bob
Surname=ross
Age=9
Firstname=gary
Surname=graeme
Age=19
Firstname=henry
Surname=harry
Age=23 
```

文本文件的结构与上面的示例类似，相同的 3 个变量不断为将进入 mysql 表的每个唯一条目分配新值。

我使用 sed 删除了文本文件中我不想处理的所有空行和以“#”开头的行。

我的问题是如何使用 bash 使用文本文件中的内容每三行插入一次 sql 以生成 mysql 查询。我知道我需要一次遍历文件 3 行，直到到达文本文件的末尾并以某种方式解析“=”之后的每个值并将其分配给循环迭代中的变量以插入 mysql 数据，但我是不知道该怎么做。

我知道我需要每 3 行有一个新的表条目。

```
echo "INSERT INTO $table (Firstname, Surname, Age) VALUES ('$Firstname', '$Surname', '$age');" | mysql $db 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:23:13.653

我拆分输入中的每一行`=`并使用第二部分。
然后我将它传送到我用来填充循环内变量的`while`-loop 。`read fname sname age`我`NR % 3==0 {print("")}`过去每三行在输出中引入一个换行符。

```
awk -F"=" '{printf("%s ", $2)}; NR % 3==0 {print("")}' input_file | \
while read fname sname age; do
    echo "INSERT INTO $table (Firstname, Surname, Age)
      VALUES ('$fname', '$sname', '$age');" | mysql $db
done 
```

**更新：**
输入：

```
Firstname=bob
Surname=ross
Age=9
Activity=1 2 3 4 5
Firstname=gary
Surname=graeme
Age=19
Activity=1 2 3 4 5
Firstname=henry
Surname=harry
Age=23
Activity=1 2 3 4 5 
```

使用此代码：

```
awk -F"=" '{printf("%s ", $2)}; NR % 4==0 {print("")}' input | \
while read fname sname age act; do
    echo "'$fname', '$sname', '$age', '$act');" 
done 
```

给出：

```
'bob', 'ross', '9', '1 2 3 4 5');
'gary', 'graeme', '19', '1 2 3 4 5');
'henry', 'harry', '23', '1 2 3 4 5'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:00:50.633

如果可以更改文件的结构，请尝试使用`LOAD DATA INFILE ...`指令。详细规格在[这里](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)。这比你自己写要快得多:)

如果没有，试试[这个](https://stackoverflow.com/questions/9066854/take-text-from-a-file-and-insert-to-a-mysql-table-using-a-script)。

# iphone - Objective-C 防止 NSString 被释放/释放

> ID：11952663
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:52:54.187
> 
> 标签：iphone, objective-c, dealloc

总新手 Iphone/Obj。C题：

我有一个名为 Location 的类，在 Location.hi 中声明：

```
@interface Location : NSObject
{
     NSString *lat;
     NSString *lon;    
} 
```

在我的 Location.mi 中必须方法：

```
-(void)setLatLon:(NSString*)lati:(NSString*)longi 
{
     NSLog(@"called setLatLon");
     lat = lati; 
     lon = longi; 
} 
```

我从 LocationManager 调用位置更新。现在，当我尝试将其作为 JSON 发送出去时

```
-(void)sendLocation 
{
     NSDictionary *sendData = [NSDictionary dictionaryWithObjectsAndKeys:
                          imei, @"imei",
                          lat, @"lat",
                          lon, @"lon", 
                          nil];
...} 
```

我收到此错误：

```
*** -[CFString retain]: message sent to deallocated instance 0xc05b5d0 
```

所以 lat & lon 似乎被释放了。我怎样才能防止这种情况发生，或者我在这里实施了一个完全愚蠢的“设计”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:07:13.143

您可以像其他回复所建议的那样添加属性，并且当您开始着手进行更高级的项目时，我绝对同意这种方法，特别是如果您想利用 ARC 和其他节省时间和避免错误的目标功能- C。

但是，除此之外，您可以修复当前编写的代码，只需进行最小的更改。改变这个：

```
lat = lati;
lon = longi; 
```

对此：

```
 lat = [lati retain]; 
 lon = [longi retain]; 
```

这将导致您的代码保留对这些变量的引用。如果您采用这种方法，您将需要确保在完成后释放您的变量，通常是在一个 dealloc 方法中。如果您不注意这一点，您将造成内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:58:28.230

您应该为您尝试使用的 iVar 声明保留/强属性。我不确定你是如何存储“imei”的，但是 lat 和 lon 正在被释放，因为那时你没有保留。尝试类似：

```
@interface Location : NSObject 
{
     NSString *lat;
     NSString *lon;
}

@property (retain) NSString *lat;
@property (retain) NSString *lon; 
```

在 .m 文件上：

```
@synthesize lat, lon;

-(void)setLatLon:(NSString*)lati:(NSString*)longi 
{
    NSLog(@"called setLatLon");
    self.lat = lati; 
    self.lon = longi; 
} 
```

和

```
-(void)sendLocation 
{
     NSDictionary *sendData = [NSDictionary dictionaryWithObjectsAndKeys:
                          imei, @"imei", //dunno what is this
                          self.lat, @"lat",
                          self.lon, @"lon", 
                          nil];
...} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:59:30.150

尝试这个：

```
@interface Location : NSObject {

NSString *lat;
NSString *lon;

}

@property (nonatomic, strong) NSString *lon;
@property (nonatomic, strong) NSString *lat;

@implementation Location

@synthesize lon;
@synthesize lat;

-(void)setLatLon:(NSString*)lati:(NSString*)longi
{
    self.lat = lati;
    self.lon = longi;
} 
```

如果您想深入了解 ios 开发，您应该阅读以下文章： [高级内存管理编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)和[Objective-C 编程语言](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163)

# python - 从树递归中返回值列表

> ID：11952667
> 
> 赞同：3
> 
> 时间：2012-08-14T12:53:13.360
> 
> 标签：python, recursion, kdtree

我正在尝试自学数据结构，并且我正在用 Python 实现一个 kd 树。我有一种方法可以在我的 kd 树类中一个点的某个半径内搜索树中的点：

```
def within_radius(self, point, radius, result=[]):
    """
    Find all items in the tree within radius of point
    """
    d = self.discriminator

    if in_circle(point, radius, self.data):
        result.append(self.data)

    # Check whether any of the points in the subtrees could be
    # within the circle
    if point[d] - radius < self.data[d] and self.l_child:
        result.append(self.l_child.within_radius(point, radius, result))

    if point[d] + radius > self.data[d] and self.r_child:
        result.append(self.r_child.within_radius(point, radius, result))

    return result 
```

它可以工作，但它返回的列表非常时髦，带有来自递归调用的重复值`result`。将树递归返回的值“累积”到列表中的好方法是什么？我已经考虑了一段时间，但我真的不知道怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:09:13.550

我不确定这是否是最干净的方法，但是每当我像这样进行递归时，我经常添加一个关键字参数，它是要返回的列表。这样，当我修改列表时，我总是修改为*同一个列表*：

```
def recurse(max, _output=None):
    if _output is None:
        _output = []

    #do some work here, add to your list
    _output.append(max)

    if max <= 0: #Some condition where the recursion stops
        return _output
    else:        #recurse with new arguments so that we'll stop someday...
        return recurse(max-1, _output=_output) 
```

这是有效的，因为当停止条件为`True`时，`_output`列表将被返回并一直传递回堆栈。

我使用带下划线的变量名来表示它只能在函数本身中使用。这是对使用下划线前缀变量的正常方式的轻微扩展（在类中表示变量是“私有的”），但我认为它明白了这一点......

*请注意，这与您所拥有的并没有太大的不同。* 但是，对于您的版本，`result`将在调用之间持续存在，因为*在创建函数时*`result = []`进行评估，而不是在调用它时进行评估。此外，您的版本正在附加返回值（即列表本身）。当您考虑包含对其自身的多个引用的列表时，这会变得非常复杂......

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:40:38.000

我同意 mgilson 的分析。`list`是一个可变类型并且`list.append`是就地的。这是什么意思：

有两种类型：可变的和不可变的。

可变类型存在于内存中的相同位置，即使您更改它也是如此。例如，`list`s 和s 是可变类型。`dict`这意味着如果您创建一个`list`并以某些方式更改它，它仍将位于内存中的同一位置。所以假设你创建了一个`list`名为“myList”。假设这个列表在内存位置 0x9000 中。那么，doing`myList.append(0)`不会改变`myList`内存中的位置。即使您这样做了`myList[0] = 'a'`，该位置也不会改变 - 它仍将位于 0x9000。

当您尝试以任何方式更改它时，不可变类型将“移动”到不同的内存位置。`str`s 和`tuple`s 是不可变的。这就是您收到以下错误的原因：

```
>>> s = 'as'
>>> s[0] = 'b'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment 
```

这意味着即使您定义`s = 'as'`（假设`s`现在位于内存地址 0x5000）并将其重新定义为`s = 'af'`，内存中的位置`s`也会发生变化。

现在，当您重新分配可变类型时，它在内存中的位置会发生变化。例如，

> > > L = [1,2,3] # 说内存位置 0x4000 L = [5,6,7] # 内存位置不再是 0x4000

这就是`list.append`“就地”属性发挥作用的地方。“`list.append`就地”意味着将新元素添加到列表中而不创建新列表。这就是为什么`list.append`没有返回值的原因，如下所示：

```
>>> L = [1,2,3]
>>> ret = L.append(4)
>>> print L
[1, 2, 3, 4]
>>> print ret
None 
```

但是，如果您想创建一个新列表，您可以按如下方式进行：

```
>>> L = [1,2,3]
>>> ret = L + [4]
>>> print L
[1, 2, 3]
>>> print ret
[1, 2, 3, 4] 
```

因此，在您的情况下发生的情况是，在两个递归调用（左和右）中，`point`都将其附加到每个递归调用的列表中。这就是您获得重复值的原因。

您可以通过执行 mgilson 的建议来规避此问题，或者如果您是 lisp 粉丝（这是一个非常好的 lisp 问题），那么您可以使用该`[1,2,3] + [4]`原理并执行此操作（未经测试，但应该可以）：

```
def within_radius(self, point, radius, result=[]):
    """
    Find all items in the tree within radius of point
    """
    d = self.discriminator

    temp = []

    if in_circle(point, radius, self.data):
        temp = [self.data]

    # Check whether any of the points in the subtrees could be
    # within the circle
    if point[d] - radius < self.data[d] and self.l_child:
        temp += self.l_child.within_radius(point, radius, result)

    if point[d] + radius > self.data[d] and self.r_child:
        temp += self.r_child.within_radius(point, radius, result)

    return result+temp 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:44:43.580

这里有一些想法：

*   如果您只想返回唯一的结果，您可能应该使用集合并在返回时将其转换为列表。一个问题是它`self.data`必须是不可变的，例如元组而不是列表。
*   因为您正在`result`遍历递归*并将*递归调用的结果添加到它，所以您明确地将每个命中添加到结果中至少两次。通过递归将结果线程化将使您无法创建和丢弃数据结构，因此您可能就可以这样做。
*   正如 mgilson 指出的那样，由于 Python 处理默认参数的方式，`result`在函数声明中设置为空列表**不会像你想**的那样。每次您`within_radius`在没有明确传入的情况下调用时`result`，都会为每个调用累积点击次数，而不仅仅是单个调用。（这有意义吗？看到[这个](http://www.deadlybloodyserious.com/2008/05/default-argument-blunders/)）。mgilson 的回答也指出了这一点。

考虑到所有这些，我可能会做这样的事情：

```
def within_radius(self, point, radius, result=None):
    d = self.discriminator

    result = set() if result is None else result

    if in_circle(point, radius, self.data):
        result.add(self.data)
    if point[d] - radius < self.data[d] and self.l_child:
        self.l_child.within_radius(point, radius, result)
    if point[d] + radius > self.data[d] and self.r_child:
        self.r_child.within_radius(point, radius, result)

    return list(result) 
```*

# php - 从插件调用 helper-> url 时，Croogo 翻译路由不匹配

> ID：11952669
> 
> 赞同：1
> 
> 时间：2012-08-14T12:53:17.857
> 
> 标签：php, routes, cakephp-1.3

我正在使用带有翻译插件的 Croogo 1.3.4。我的节点的 url 看起来像： fra/page/my-slug-for-page

当我访问页面 fra/page/my-slug-for-page 时，Html->image 方法（调用 app_helper->url）正在呈现以下链接：[http ://www.mysite.com/fra/page/my -slug-for-page](http://www.mysite.com/fra/page/my-slug-for-page)

这是完美的工作。

但是，当我在一个名为 myplugin 的插件中呈现相同的主题布局时，Html->image 方法正在呈现[http://www.mysite.com/myplugin/page/my-slug-for-page/locale：弗拉](http://www.mysite.com/myplugin/page/my-slug-for-page/locale:fra)

我追踪到 Router:url 方法，似乎没有路由匹配，尤其是在其他情况下不匹配的路由。

```
Router::connect('/:locale/:controller/:action/*', array(), array('locale' => '[a-z]{3}')); 
```

图片链接显示如下：

```
<?php echo $html->image('/img.png',array('url' => array('locale'=>'fra', 'controller'=> 'page', 'action'=>'my-page-slug')));?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:53:17.857

我发现问题出在应该指定的插件名称中，即使是空的。Croogo 它使用当前插件名称自动输入插件名称。

```
<?php echo $html->image('/img.png',array('url' => array('locale'=>'fra', 'controller'=> 'page', 'action'=>'my-page-slug', 'plugin'=>'')));?> 
```

# maven - 通过 maven 自动编译指南针式 SASS 的最佳方法

> ID：11952672
> 
> 赞同：12
> 
> 时间：2012-08-14T12:53:28.400
> 
> 标签：maven, sass, maven-plugin, compass-sass

指的[是 Java 的 SASS 实现？](https://stackoverflow.com/questions/1751479)：

在 Maven 目标分别编译包中自动编译 compass-style.org 样式表的最佳方法是什么？

我不想发布太多的自编译库，也不想通过像[https://code.google.com/p/sass-java](https://code.google.com/p/sass-java)（[https://github.com/darrinholst/ ）这样的过滤器来动态发布编译文件萨斯-java](https://github.com/darrinholst/sass-java)）

除了连接需要在客户端安装 ruby​​ 和 compass 的 shellscripts / ant 脚本之外，还有其他选择吗？

SASS 和 Compass 样式表之间的详细区别是什么，经常使用“compass”时“sass-tools”有什么问题吗？=> 哪些 mvn 插件是“指南针感知”的？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:20:51.667

我发现了这个，它不是一个特殊的 compass/sass 插件，但它可以工作

[https://gist.github.com/1671207](https://gist.github.com/1671207)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-16T05:55:42.630

我想你知道这个 Maven 插件（在[SASS implementation for Java 中提到？](https://stackoverflow.com/questions/1751479)）？：[https ://github.com/Jasig/sass-maven-plugin](https://github.com/Jasig/sass-maven-plugin)

（我自己还没试过。）

更新：不再支持该插件。然而，这个分叉目前似乎很健康，所以它可能是一些人的选择：[https ://github.com/GeoDienstenCentrum/sass-maven-plugin](https://github.com/GeoDienstenCentrum/sass-maven-plugin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-11T12:46:59.637

我使用的是 nl.geodienstencentrum.maven 的 Sass Maven 插件，但它使用 Ruby 并且速度非常慢。

我现在切换到：Libsass Maven 插件

> [https://github.com/warmuuh/libsass-maven-plugin](https://github.com/warmuuh/libsass-maven-plugin)

这使用 C 并且我们的编译时间要少得多（8.6 秒到 -> 2 秒）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T12:22:11.143

我尝试了几种方法来编译我的应用程序（java、Wicket、使用 Zurb Foundation Sites、具有 lib-sass 依赖的 node-sass）。说实话，所有的 maven 插件都是死路一条，尤其是当我的 scss 包含 !global 标志时。（这个标志是有基础的。）所以我们的最终解决方案是先用 npm 构建，然后使用 maven。Npm 构建到 src/main/webapp/"myDir" 目录中。我在 git 中排除了这个目录。jason 文件有如下一行：

```
"scripts": {
    ....
    "build-css": "node node_modules/node-sass/bin/node-sass --include-path myScssDir myScssDir/myScss.scss --output  src/main/webapp/myDir/css",
    ....
} 
```

然后用 maven 构建，它会将构建的 css 移动到我的战争中。为了获得一些帮助（创建不存在的“myDir”目录），我使用了 mkdirp。在我的杰森中有：

```
"scripts": {
    "create-dirs": "mkdirp src/main/webapp/myDir/",
    ....
} 
```

所以我运行“npm i”将我所有的依赖项本地安装到节点模块目录中。这是被忽略的。

然后我运行“npm run create-dirs”来创建必要的 myDir。这也被忽略了。

然后我运行“npm run build-css”将我的 css-s 和 js-s 编译到 myDir 中。

最后我做了一个Maven构建。

使用 hudson/jenkins 构建，您可以轻松地在一项工作中完成这些工作。

我能想到的一项改进是在 maven 构建期间通过 ant 运行 npm。当我有一个概念证明时，我会回复你。

//一个额外的提示：如果你是在企业环境和 Windows7 下开发，你可能需要为 npm build 的符号链接添加权限。如果您在 npm 构建中发现错误，值得一试：[https ://superuser.com/questions/104845/permission-to-make-symbolic-links-in-windows-7](https://superuser.com/questions/104845/permission-to-make-symbolic-links-in-windows-7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-04T18:45:47.753

由于[libsass-is-deprecated](https://sass-lang.com/blog/libsass-is-deprecated)，并且[fork](https://github.com/GeoDienstenCentrum/sass-maven-plugin)基于相同的“归档库”：[https](https://github.com/bit3/jsass) ://github.com/bit3/jsass ..bases on libsass ...

[我该如何迁移？](https://sass-lang.com/blog/libsass-is-deprecated#how-do-i-migrate)...有人可能会觉得这很有用：

1.  ```
    [choco|brew|npm] install sass 
    ```

    来源：[https](https://sass-lang.com/install) ://sass-lang.com/install （我*不会*在[ci](/questions/tagged/ci "显示标记为“ci”的问题")中这样做，但我们可以！）

2.  使用从[Spring Petclinic (site](https://projects.spring.io/spring-petclinic/) | [repo](https://github.com/spring-projects/spring-petclinic) )采用的[“好 ole” exec-maven-plugin](https://www.mojohaus.org/exec-maven-plugin/)（以前提取[webjars](/questions/tagged/webjars "show questions tagged 'webjars'") - [bootstrap](/questions/tagged/bootstrap "show questions tagged 'bootstrap'")，最初他们使用相同的 libsass-maven-plugin）：

    ```
    <profile>
      <id>css</id>
      <build>
        <plugins>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>3.0.0</version> 
            <executions>
              <execution>
                <!-- process-resources > genererate-resources (i.e. later)-->
                <phase>process-resources</phase>
              </execution>
            </executions>
            <configuration>
              <!-- must be in $PATH !! -->
              <executable>sass</executable>
              <!-- it is quite silent, when everything works well -->
              <useMavenLogger>true</useMavenLogger>
              <arguments>
                <!-- additional sass path(s), adjust to our suits -->
                <argument>--load-path=${project.build.directory}/webjars/META-INF/resources/webjars/bootstrap/${webjars-bootstrap.version}/scss/</argument>
                <argument>--no-source-map</argument>
                <argument>--verbose</argument>
                <argument>--trace</argument>
                <!-- for more args, see https://stackoverflow.com/a/70228043/592355 // `sass` -->
                <argument>${basedir}/src/main/scss/my.scss</argument>
                <argument>/path/to/my/dest/my.css</argument>
              </arguments>
              <!-- more config, when we like ... -->
            </configuration>
          </plugin>
          <!-- this is not part of the answer, but unpacks us required scss: -->
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
              <execution>
                <id>unpack</id>
                <!-- genererate-resources < process-resources  (i.e. prior)-->
                <phase>generate-resources</phase>
                <goals>
                  <goal>unpack</goal>
                </goals>
                <configuration>
                  <artifactItems>
                    <artifactItem>
                      <groupId>org.webjars.npm</groupId>
                      <artifactId>bootstrap</artifactId>
                      <version>${webjars-bootstrap.version}</version>
                    </artifactItem>
                  </artifactItems>
                  <outputDirectory>${project.build.directory}/webjars</outputDirectory>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile> 
    ```

3.  最后：

    ```
    mvn process-resources -Pcss 
    ```

    （假设没有测试，没有清理，没有编译，“当一切正常时，它非常安静”）

# java - Android ListView 延迟加载的东西行为异常

> ID：11952675
> 
> 赞同：2
> 
> 时间：2012-08-14T12:53:36.470
> 
> 标签：java, android

我正在开发一个 Android 应用程序，其中有一些列表。它比我在这里解释的要复杂，但我发布的场景也表现出意外。
我一直在 Stack Overflow 中浏览几个问题，但我发现没有一个可以解决这个问题。

所以，为了这个问题，我已经建立了这个场景。我有一个带有字符串数组的活动，如下所示：

```
public class TestViewlazyloadActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String[] items = { "lorem", "ipsum", "dolor", "sit", "amet" };

        ListView list = (ListView) findViewById(R.id.testListView);
        TestAdapter adapter = new TestAdapter(this, R.layout.list_item, items);

        list.setAdapter(adapter);
    }
} 
```

以这种方式成为我的两种布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
       android:orientation="vertical" >

    <ListView
        android:id="@+id/testListView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/testTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

很简单。然后我用ViewHolder的思想实现了一个ArrayAdapter类，getView()方法如下：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    String item = this.getItem(position);

    if(convertView == null) {
        LayoutInflater inflater = ((Activity) this.getContext()).getLayoutInflater();
        convertView = inflater.inflate(R.layout.list_item, null);

        holder = new ViewHolder();
        holder.textView = (TextView) convertView.findViewById(R.id.testTextView);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    final ViewHolder auxHolder = holder;
    LoadingService.capitalizeItemWithDelay(item, new LoadedCallback() {
        public void onItemLoaded(String item) {
            auxHolder.textView.setText(item);
        }
    });

    return convertView;
} 
```

作为`LoadedCallback`与 just 的接口`onItemLoaded`。并且`LoadingService.capitalizeItemWithDelay()`只是启动一个随机休眠的线程（以模拟延迟加载）并使用大写字符串调用此回调。

正常行为应该是用户正在查看包含 5 个空白行的列表。一段时间后，项目开始在各自的行中生成，即使在给定随机睡眠计时器的情况下也是随机顺序。

真正发生的是，项目被一个接一个地加载到第一行，最终它们中的一些被设置在它们的真实位置。这就像`auxHolder`在其 TextView 中保留对第一个元素的引用，这很奇怪。我知道这要么是因为视图被回收，要么是因为`auxHolder`存在`final`.

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:04:57.187

摆脱`final`你的`ViewHolder`变量并`ViewHolder auxHolder`进入内部类。

尝试这个：

```
 ... 
    LoadingService.capitalizeItemWithDelay(item, new LoadedCallback() {
        ViewHolder auxHolder = holder;
        public void onItemLoaded(String item) {
            auxHolder.textView.setText(item); 
```

当您将`final`关键字与局部变量（例如）一起使用时`auxHolder`，您是在说您给它的值是它将具有的最后一个值。这就是您遇到问题的原因。这是一个可以更好地解释的链接：[http ://www.javapractices.com/topic/TopicAction.do?Id=23](http://www.javapractices.com/topic/TopicAction.do?Id=23)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:31:16.597

您可能没有在 UI 线程上进行更新。我会尝试在帖子中执行您的加载操作，看看是否可以解决所有问题。尝试做这样的事情

```
convertView.post(new Runnable() {
    @Override
    public void run() {
        LoadingService.capitalizeItemWithDelay(item, new LoadedCallback() {
            ViewHolder auxHolder = holder;
            public void onItemLoaded(String item) {
                auxHolder.textView.setText(item);
            }
        }
   }
}); 
```

# regex - 我需要一些帮助来做一个正则表达式

> ID：11952683
> 
> 赞同：0
> 
> 时间：2012-08-14T12:53:57.260
> 
> 标签：regex

我正在使用 netbeans，我想使用替换功能将 $this->escape(stuff) 包装在更多文件中的特定内容周围，但是有很多条件，例如：

匹配：

```
$this->$variable, $variable

$this->$array['something'], $this->$array[0], $array['something'], $array[0] 
```

不符合：

```
$this->partial, $this->escape, $this->form 
```

到目前为止我所拥有的一切正常

替换这个

```
echo\s+(\$this->[->a-zA-Z_']+[^\s;(]) 
```

有了这个

```
echo \$this->escape\($1\) 
```

它不适用于数组，不排除任何东西，也不匹配 $variable

谁能帮忙，改善一下表达方式，这样就可以减少用手穿过这么多弦的折磨吗？任何帮助表示赞赏。

编辑：只需将排除项添加到我的工作示例中就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:02:40.157

It's not entirely clear what parts you're trying to match. If I understood you correctly then this should work:

```
(?:\$this->)?\$[^,\s-]*(?=[,\s]) 
```

If you meant to match something else, please let me know.

# python - SQLAlchemy/MySQL 的表设计

> ID：11952686
> 
> 赞同：0
> 
> 时间：2012-08-14T12:54:08.030
> 
> 标签：python, mysql, sqlalchemy

我在 MySQL 中创建了一个包含以下表格的数据库

```
Attachment
Sender
Recipient
Message
mr_link
ms_link
ma_link 
```

发件人和收件人是不同的电子邮件地址表 mr_link 包含邮件的 ID 及其关联的收件人（每封邮件每个收件人一个条目）

ms_link 具有消息的 id 及其关联的发件人

ma_link 具有消息的 ID 及其关联文件

我最近发现了 SQLAlchemy，并且喜欢它如何使我的查询等更有效率。

我现在要做的是将这个现有模式转换为具有关系的表，但我的 MySQL-fu 和 SQLAlchemy-fu 仍处于早期阶段。

我是来求指导的。

谢谢，拉里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:41:09.747

在 SA 中实现模型时，您有一个主要选择，即在使用 ORM 和使用直接 SQL 构造之间。起初这可能会令人困惑，因为它们具有相似的方法和行为。一开始，当您深入研究时，根据您使用的类来考虑它们可能会很有用：

*   使用 SQL i/f，您将主要使用表
*   使用 ORM，您将主要使用您的类（消息、收件人、发件人等）

无论哪种情况，您都可能会发现自己首先实现了主要实体，然后在它们之间建立了多对多关系。SA 做了一些很棒的事情，但它很深。我建议给自己一些时间来完成这些工作。

为此，我建议您花一些时间在[Object Relational Tutorial](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html)中。[多对多部分](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#building-a-many-to-many-relationship)中的 BlogPost/Keyword 示例与您的用例有一些共同的有用特征，应该为您提供一个起点。

# mysql - Solr 数据导入编码

> ID：11952687
> 
> 赞同：1
> 
> 时间：2012-08-14T12:54:08.693
> 
> 标签：mysql, encoding, solr, dataimporthandler

我的 data-config.xml 看起来像这样。文件编码为带有 BOM 的 UTF-8。

```
<?xml version="1.0" encoding="UTF-8"?>
<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://192.168.0.2/dasaran_old" 
              user="root" 
              password=""
              encoding="UTF-8"/>
  <document>
    <entity name="user" 
            query="SELECT CONCAT_WS('_', 1, u.`id`) AS id, u.`id` AS entity_id, 1 AS entity_type, fullname AS title, CONCAT_WS(' ', 'Դպրոց՝ ', s.title, 'դաս.՝', cl.title) AS description FROM das_user u INNER JOIN das_ref_student_to_class_to_school sts ON u.id = sts.student_id INNER JOIN das_school s ON sts.school_id = s.id INNER JOIN das_classes cl ON sts.class_id = cl.id WHERE u.role = 'student'">
    </entity>
  </document>
</dataConfig> 
```

从 MySQL 中提取的 unicode 数据是可以的。但是查询中的 unicode 字符没有作为 Unicode 插入到 Solr 索引中。

我得到这样的文件。

```
<doc>
<str name="description">?????? 65 ???.? 5-1</str>
<int name="entity_id">18126</int>
<int name="entity_type">1</int>
<str name="general">Ռուբեն Վարդանյան Արմենի</str>
<str name="id">[B@1bc6e3ce</str>
<str name="title">Ռուբեն Վարդանյան Արմենի</str>
</doc> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:51:35.903

我不认为 data-config.xml 上的编码与 jdbc 连接上使用的编码有任何关系，您应该将其指定为 url 参数，请参阅[此问题中的详细信息](https://stackoverflow.com/questions/3040597/jdbc-character-encoding)

参数为：

```
jdbc:mysql://localhost:3306/administer?characterEncoding=utf8 
```

# html5-video - HTML5 视频播放器以编程方式支持时间标记和跳转

> ID：11952691
> 
> 赞同：0
> 
> 时间：2012-08-14T12:54:22.227
> 
> 标签：html5-video

我正在寻找一个 HTML5 视频播放器，它允许：

(i)（以编程方式）在时间条上标记感兴趣的片段，以便用户可以快速跳转到该部分。类似于 YouTube 的东西。如下所示，`#`视频中有趣的部分在哪里。

```
-------#######---------##-------------##---------------- 
```

(ii) （以编程方式）在给定时间播放视频。所以`javascript:play(5)`将跳到视频的第 5 分钟。

有没有这样的东西是免费的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:07:50.780

Code cue points in this player will be useful. [http://knowledge.kaltura.com/javascript-api-kaltura-media-players#HandlingCodeCuePoints](http://knowledge.kaltura.com/javascript-api-kaltura-media-players#HandlingCodeCuePoints) Also check the comparison of the players [http://html5video.org/wiki/HTML5_Video_Player_Comparison](http://html5video.org/wiki/HTML5_Video_Player_Comparison)

# c# - windows mobile 5.0 使用 GPS 中间驱动程序，总是将 lat lon 设为 0

> ID：11952692
> 
> 赞同：0
> 
> 时间：2012-08-14T12:54:27.533
> 
> 标签：c#, visual-studio-2008, gps, windows-mobile, windows-mobile-gps

您好，我正在使用 CE 工具附带的 GPS 示例。

我已经摆脱了除以零的错误，但 GPS 中间驱动程序总是将纬度和经度设为 0。

我可以看到我的 GPS 设备已打开并正在接收信号。GPS Monitor、全球导航器等其他应用程序正在给我正确的纬度。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:18:14.813

我明白了，首先对于 windows mobile 5.0，我们需要使用“C:\Program Files\Windows Mobile 6.5.3 DTK\”中的示例代码，接下来重要的是我们需要使用正确的端口，尤其是正确的波特率，没有你就无法收到信号，

谢谢所有 Srikanth

# c - 如何从 C 程序调用 unix 命令

> ID：11952693
> 
> 赞同：1
> 
> 时间：2012-08-14T12:54:27.013
> 
> 标签：c, unix, echo

> **可能重复：**
> [在 ac 程序中运行 shell 命令](https://stackoverflow.com/questions/5609074/running-a-shell-command-in-a-c-program)

我想在 C 程序中调用 echo，然后将其输出重定向到文件。但我不确定如何在 C 程序中调用 unix 命令。任何帮助深表感谢。

谢谢，阿什什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:57:06.443

```
#include <stdlib.h>

int main() {
    system("echo test > filename");
    return 0;
} 
```

是做到这一点的简单方法。如果您想对流程进行更多控制，那么您应该调查[fork/exec](http://www.cim.mcgill.ca/~franco/OpSys-304-427/lecture-notes/node16.html)。

但是，您可以使用 C stdlib 文件函数轻松编写文件。这将比产生一个新进程轻得多*。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T15:16:38.557

如果你特别想执行这个程序来获取它的输出，你宁愿想要[popen()](http://pubs.opengroup.org/onlinepubs/009696899/functions/popen.html)而不是 system()。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T13:05:05.247

`system`在 C 中使用执行 UNIX 命令的替代方法是[execlp](http://linux.die.net/man/3/execlp)。

这完全取决于您想要使用它们的方式。如果您想要用户输入，那么您可能想要使用 execlp / [execve](http://linux.die.net/man/2/execve)。否则，`system`这是让 UNIX 与您的 C 程序一起工作的一种快速、简单的方法。

对于重定向，您可以使用[管道](http://linux.die.net/man/2/pipe)。它将帮助您查看要重定向到您打开的文件的数据。您只需`system`设置它，但没有真正的选项可以按照您想要的方式设置或优化它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T12:55:53.793

您可以使用[系统](http://pubs.opengroup.org/onlinepubs/009604499/functions/system.html)函数执行此操作：

```
#include <stdlib.h>

int main() {
  system("echo 'words' > file");
  return 0;
} 
```

或使用 fopen、printf、fclose。

# java - 什么可能导致 QuerySyntaxException: [Entity] is not mapped, 尽管实体已被绑定？

> ID：11952694
> 
> 赞同：3
> 
> 时间：2012-08-14T12:54:35.390
> 
> 标签：java, hibernate, jpa

我想知道为什么我得到了`QuerySyntaxException: [Entity] is not mapped`，尽管 Hibernate 正在记录

```
INFO Hibernate EntityManager 3.5.0-Final
...
INFO Binding entity from annotated class: products.model.ProductGroup
INFO Bind entity products.model.ProductGroup on table GRP
...
INFO table found: GRP
INFO columns: [grp, name, top] 
```

实体类看起来像

```
@Entity(name="GRP")
public class ProductGroup implements IdentifiableEntity {

    @Id
    private String grp;
    private String name;
    private String top;

    ...
} 
```

在这一行抛出错误：

```
Query q = em.createQuery("select g from ProductGroup g"); 
```

都是 JPA，没有 Hibernate API。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:01:20.373

@Entity(name) 为 JPA 设置实体的内部名称。尝试删除该语句并使用 @Table(name = "GRP")

如果这不起作用，请发布完整的堆栈跟踪。

# python - 通过 Pymongo(Python) 在 MongoDB 中使用数据

> ID：11952698
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:54:49.503
> 
> 标签：python, arrays, mongodb, pymongo

我对插入 MongoDB 的快速有效地提取定量数据的最佳方法很感兴趣，但我一无所知。

我将解释我的过程。我使用 MongoDB 来保存从多个 .log 文件中插入的各种定量数据。

现在信息已经插入，我想通过查询提取某些数据，将其格式化为数组，并以 GUI（matplotlib）的形式显示。

我对如何使用提取数据的最佳方法感到困惑。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:38:26.230

有一些关于使用 python 和 mongodb 的很好的教程，例如这个[http://api.mongodb.org/python/current/tutorial.html](http://api.mongodb.org/python/current/tutorial.html) 还有一些关于 matplotplib 和 mongodb 的 SO 的更多信息，例如这个[Mongodb 数据统计使用 matplotlib 进行可视化](https://stackoverflow.com/questions/8559080/mongodb-data-statistics-visualization-using-matplotlib) 最好先尝试一些事情，然后在遇到困难时就 SO 提出具体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:57:00.190

*   使用标准查询 API
*   使用 Map-Reduce
*   使用新的 MongoDB 聚合框架

# spss - 如何在 SPSS 中运行多组回归，而不必每次都重新键入命令？

> ID：11952699
> 
> 赞同：2
> 
> 时间：2012-07-18T08:59:34.677
> 
> 标签：spss

如何在 SPSS 中运行多组回归，而不必每次都重新键入命令或不必每次手动更改因变量？

我需要使用相同的自变量运行大量回归，但我需要更改因变量。有没有可能使这个过程更容易？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:31:10.080

另请注意，如果您必须对每个国家/地区重复此过程，您可以使用带有国家/地区 ID 的 SPLIT FILES，并且统计过程（包括 REGRESSION）将自动遍历每个国家/地区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:34:56.630

假设您有 50 个因变量，每个因变量都需要使用相同的回归选项在相同的预测变量上进行回归。将因变量列表作为垂直列表粘贴到 Excel 中（单元格 b1:b50）。在单元格 a1:a:50 中粘贴因变量名称之前的回归语法部分，直到并包括“/dependent”。在单元格 c1:c50 中粘贴因变量名称后面的语法部分。然后在单元格 d1 中键入“=concatenate(a1,b1,c1)”。将该公式粘贴到单元格 d2:d50 中，您将有 50 个命令粘贴到语法窗口中。它可能会显示网格线；SPSS不会对这些有任何问题。

顺便说一句，什么样的研究背景需要这些相同配置的回归来获得大量结果？

# javascript - 比较主干中的两个模型属性

> ID：11952702
> 
> 赞同：1
> 
> 时间：2012-08-14T12:54:56.727
> 
> 标签：javascript, backbone.js, underscore.js

我想比较我收藏的模型属性并将其存储到新模型中。

```
Collection:
   Model1:
     Apple: 1
     Banana: 0
     Orange: 0
     Status: 1254869
   Model2:
     Apple: 0
     Banana: 1
     Orange: 1
     Status: null 
```

输出应该是：

```
ModelResult:
     Apple: 1
     Banana: 1
     Orange: 1
     Status: 1254869 
```

有任何想法吗？

我手动做

```
ModelResult = collection.at(0); 
collection.each( function(model){
    if(model.get("Apple") != 0){
      ModelResult.set({Apple: model.get("Apple")});
    }
    if(model.get("Banana") != 0){
      ModelResult.set({Apple: model.get("Banana")});
    }
    if(model.get("Orange") != 0){
      ModelResult.set({Apple: model.get("Orange")});
    }
    if(model.get("Status") != ""){
      ModelResult.set({Apple: model.get("Status")});
    }
}); 
```

**笔记：**

是否也可以消除`0`或`null`重视`ModelResult`？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:26:58.147

对于消除`0`和`null`值，您可以使用[该`validate`函数](http://backbonejs.org/#Model-validate)。它总是在`set`或被调用之前`save`调用，如果值与您想要的不匹配，您只需返回错误消息并且更改不会生效。

这也意味着您`ModelResult`必须是一个单独的模型。

```
var ModelResult = Backbone.Model.extend({
  ...
  validate: function(attrs) {
    if (_.intersection([0, null], _.values(attrs))) {
      return "Zeroes and nulls are ignored.";
    }
  },
  ...
}); 
```

现在你的每个功能可能就像

```
function(model) {
  _.each(model.toJSON(), function(value, key) {
    ModelResult.set(key, value);
  }); 
} 
```

现在它将遍历每个模型的每个属性并将它们添加到`ModelResult`，但过滤掉所有`0`s 和`null`s。

希望这可以帮助！

# r - 生成一个虚拟变量

> ID：11952706
> 
> 赞同：91
> 
> 时间：2012-08-02T23:07:38.897
> 
> 标签：r, r-faq

我在 R 中生成以下虚拟变量时遇到了麻烦：

我正在分析年度时间序列数据（时间段 1948-2009）。我有两个问题：

1.  如何为观察 #10 生成一个虚拟变量，即 1957 年（1957 年的值 = 1，否则为零）？

2.  如何生成一个在 1957 年之前为零并从 1957 年及以后到 2009 年取值为 1 的虚拟变量？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-03T01:24:30.833

如果您有许多变量，另一个可以更好地工作的选项是`factor`and `model.matrix`。

```
year.f = factor(year)
dummies = model.matrix(~year.f) 
```

这将包括一个截距列（全为）和一个列，用于数据集中的每一年，除了一个，这将是“默认”或截距值。

`contrasts.arg`您可以通过弄乱in来更改“默认”的选择方式`model.matrix`。

此外，如果您想省略截距，您可以删除第一列或添加`+0`到公式的末尾。

希望这是有用的。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-08-02T23:38:02.827

产生这些虚拟变量的最简单方法如下：

```
> print(year)
[1] 1956 1957 1957 1958 1958 1959
> dummy <- as.numeric(year == 1957)
> print(dummy)
[1] 0 1 1 0 0 0
> dummy2 <- as.numeric(year >= 1957)
> print(dummy2)
[1] 0 1 1 1 1 1 
```

更一般地，您可以`ifelse`根据条件在两个值之间进行选择。因此，如果您出于某种原因想要使用 4 和 7 而不是 0-1 虚拟变量，则可以使用`ifelse(year == 1957, 4, 7)`.

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2016-10-31T13:34:32.787

使用[dummy::dummy()](https://CRAN.R-project.org/package=dummies)：

```
library(dummies)

# example data
df1 <- data.frame(id = 1:4, year = 1991:1994)

df1 <- cbind(df1, dummy(df1$year, sep = "_"))

df1
#   id year df1_1991 df1_1992 df1_1993 df1_1994
# 1  1 1991        1        0        0        0
# 2  2 1992        0        1        0        0
# 3  3 1993        0        0        1        0
# 4  4 1994        0        0        0        1 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-11-10T16:54:22.937

为此目的，套餐`mlr`包括：`createDummyFeatures`

```
library(mlr)
df <- data.frame(var = sample(c("A", "B", "C"), 10, replace = TRUE))
df

#    var
# 1    B
# 2    A
# 3    C
# 4    B
# 5    C
# 6    A
# 7    C
# 8    A
# 9    B
# 10   C

createDummyFeatures(df, cols = "var")

#    var.A var.B var.C
# 1      0     1     0
# 2      1     0     0
# 3      0     0     1
# 4      0     1     0
# 5      0     0     1
# 6      1     0     0
# 7      0     0     1
# 8      1     0     0
# 9      0     1     0
# 10     0     0     1 
```

`createDummyFeatures`删除原始变量。

[https://www.rdocumentation.org/packages/mlr/versions/2.9/topics/createDummyFeatures](https://www.rdocumentation.org/packages/mlr/versions/2.9/topics/createDummyFeatures)
.....

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-12-17T21:59:55.637

此处的其他答案提供了完成此任务的直接途径 - 许多模型（例如`lm`）无论如何都会在内部为您完成。尽管如此，这里有一些方法可以使用 Max Kuhn 的流行包[`caret`](https://topepo.github.io/caret/index.html)和[`recipes`](https://topepo.github.io/recipes/)包制作虚拟变量。虽然有些冗长，但它们都可以轻松扩展到更复杂的情况，并巧妙地融入各自的框架。

* * *

### [`caret::dummyVars`](https://topepo.github.io/caret/pre-processing.html#creating-dummy-variables)

使用`caret`，相关函数是`dummyVars`，它有一种`predict`方法可以将其应用于数据框：

```
df <- data.frame(letter = rep(c('a', 'b', 'c'), each = 2),
                 y = 1:6)

library(caret)

dummy <- dummyVars(~ ., data = df, fullRank = TRUE)

dummy
#> Dummy Variable Object
#> 
#> Formula: ~.
#> 2 variables, 1 factors
#> Variables and levels will be separated by '.'
#> A full rank encoding is used

predict(dummy, df)
#>   letter.b letter.c y
#> 1        0        0 1
#> 2        0        0 2
#> 3        1        0 3
#> 4        1        0 4
#> 5        0        1 5
#> 6        0        1 6 
```

* * *

### [`recipes::step_dummy`](https://topepo.github.io/recipes/reference/step_dummy.html)

，`recipes`相关函数为`step_dummy`：

```
library(recipes)

dummy_recipe <- recipe(y ~ letter, df) %>% 
    step_dummy(letter)

dummy_recipe
#> Data Recipe
#> 
#> Inputs:
#> 
#>       role #variables
#>    outcome          1
#>  predictor          1
#> 
#> Steps:
#> 
#> Dummy variables from letter 
```

根据上下文，使用`prep`and 或`bake`or提取数据`juice`：

```
# Prep and bake on new data...
dummy_recipe %>% 
    prep() %>% 
    bake(df)
#> # A tibble: 6 x 3
#>       y letter_b letter_c
#>   <int>    <dbl>    <dbl>
#> 1     1        0        0
#> 2     2        0        0
#> 3     3        1        0
#> 4     4        1        0
#> 5     5        0        1
#> 6     6        0        1

# ...or use `retain = TRUE` and `juice` to extract training data
dummy_recipe %>% 
    prep(retain = TRUE) %>% 
    juice()
#> # A tibble: 6 x 3
#>       y letter_b letter_c
#>   <int>    <dbl>    <dbl>
#> 1     1        0        0
#> 2     2        0        0
#> 3     3        1        0
#> 4     4        1        0
#> 5     5        0        1
#> 6     6        0        1 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-02-13T18:38:52.310

对于问题中提出的用例，您也可以将逻辑条件与`1`（或者甚至更好，与`1L`）相乘：

```
# example data
df1 <- data.frame(yr = 1951:1960)

# create the dummies
df1$is.1957 <- 1L * (df1$yr == 1957)
df1$after.1957 <- 1L * (df1$yr >= 1957) 
```

这使：

> ```
> > df1
>      yr is.1957 after.1957
> 1  1951       0          0
> 2  1952       0          0
> 3  1953       0          0
> 4  1954       0          0
> 5  1955       0          0
> 6  1956       0          0
> 7  1957       1          1
> 8  1958       0          1
> 9  1959       0          1
> 10 1960       0          1 
> ```

* * *

对于例如@zx8754 和@Sotos 的答案中提出的用例，还有一些其他选项尚未涵盖。

**1）制作自己的`make_dummies`-function**

```
# example data
df2 <- data.frame(id = 1:5, year = c(1991:1994,1992))

# create a function
make_dummies <- function(v, prefix = '') {
  s <- sort(unique(v))
  d <- outer(v, s, function(v, s) 1L * (v == s))
  colnames(d) <- paste0(prefix, s)
  d
}

# bind the dummies to the original dataframe
cbind(df2, make_dummies(df2$year, prefix = 'y')) 
```

这使：

> ```
>  id year y1991 y1992 y1993 y1994
> 1  1 1991     1     0     0     0
> 2  2 1992     0     1     0     0
> 3  3 1993     0     0     1     0
> 4  4 1994     0     0     0     1
> 5  5 1992     0     1     0     0 
> ```

**2) 使用`dcast`data.table或[reshape2中的](/questions/tagged/data.table "显示标记为“data.table”的问题")[-function](/questions/tagged/reshape2 "显示标记为“reshape2”的问题")**

```
 dcast(df2, id + year ~ year, fun.aggregate = length) 
```

这使：

> ```
>  id year 1991 1992 1993 1994
> 1  1 1991    1    0    0    0
> 2  2 1992    0    1    0    0
> 3  3 1993    0    0    1    0
> 4  4 1994    0    0    0    1
> 5  5 1992    0    1    0    0 
> ```

但是，当必须为其创建虚拟对象的列中存在重复值时，这将不起作用。如果需要特定的聚合函数并且需要`dcast`将结果`dcast`合并回原来的：

```
# example data
df3 <- data.frame(var = c("B", "C", "A", "B", "C"))

# aggregation function to get dummy values
f <- function(x) as.integer(length(x) > 0)

# reshape to wide with the cumstom aggregation function and merge back to the original
merge(df3, dcast(df3, var ~ var, fun.aggregate = f), by = 'var', all.x = TRUE) 
```

这给出了（请注意，结果是根据`by`列排序的）：

> ```
>  var A B C
> 1   A 1 0 0
> 2   B 0 1 0
> 3   B 0 1 0
> 4   C 0 0 1
> 5   C 0 0 1 
> ```

**3）使用`spread`来自tidyr 的[-function](/questions/tagged/tidyr "显示标记为“tidyr”的问题")（`mutate`来自[dplyr](/questions/tagged/dplyr "显示标记为“dplyr”的问题")）**

```
library(dplyr)
library(tidyr)

df2 %>% 
  mutate(v = 1, yr = year) %>% 
  spread(yr, v, fill = 0) 
```

这使：

> ```
>  id year 1991 1992 1993 1994
> 1  1 1991    1    0    0    0
> 2  2 1992    0    1    0    0
> 3  3 1993    0    0    1    0
> 4  4 1994    0    0    0    1
> 5  5 1992    0    1    0    0 
> ```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-08-03T09:44:27.117

我通常使用这种虚拟变量做的是：

**(1) 如何为观察 #10 生成一个虚拟变量，即 1957 年（1957 年的值 = 1，否则为零）**

```
data$factor_year_1 <- factor ( with ( data, ifelse ( ( year == 1957 ), 1 , 0 ) ) ) 
```

**(2) 如何生成一个在 1957 年之前为零并从 1957 年及以后到 2009 年取值为 1 的虚拟变量？**

```
data$factor_year_2 <- factor ( with ( data, ifelse ( ( year < 1957 ), 0 , 1 ) ) ) 
```

然后，我可以在我的模型中将此因素作为虚拟变量引入。例如，查看变量中是否存在长期趋势`y` ：

```
summary ( lm ( y ~ t,  data = data ) ) 
```

希望这可以帮助！

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-03-27T17:45:07.820

如果您想获得 K 个虚拟变量，而不是 K-1，请尝试：

```
dummies = table(1:length(year),as.factor(year)) 
```

最好的，

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-05-16T10:37:32.937

我在 kaggle 论坛上读到这个：

```
#Generate example dataframe with character column
example <- as.data.frame(c("A", "A", "B", "F", "C", "G", "C", "D", "E", "F"))
names(example) <- "strcol"

#For every unique value in the string column, create a new 1/0 column
#This is what Factors do "under-the-hood" automatically when passed to function requiring numeric data
for(level in unique(example$strcol)){
  example[paste("dummy", level, sep = "_")] <- ifelse(example$strcol == level, 1, 0)
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-10-06T06:32:19.893

另一种方法是`mtabulate`从`qdapTools`包中使用，即

```
df <- data.frame(var = sample(c("A", "B", "C"), 5, replace = TRUE))
  var
#1   C
#2   A
#3   C
#4   B
#5   B

library(qdapTools)
mtabulate(df$var) 
```

这使，

> ```
>  A B C
> 1 0 0 1
> 2 1 0 0
> 3 0 0 1
> 4 0 1 0
> 5 0 1 0 
> ```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-12-09T22:41:46.153

该[`ifelse`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/ifelse.html)函数最适合像这样的简单逻辑。

```
> x <- seq(1950, 1960, 1)

    ifelse(x == 1957, 1, 0)
    ifelse(x <= 1957, 1, 0)

>  [1] 0 0 0 0 0 0 0 1 0 0 0
>  [1] 1 1 1 1 1 1 1 1 0 0 0 
```

此外，如果您希望它返回字符数据，那么您可以这样做。

```
> x <- seq(1950, 1960, 1)

    ifelse(x == 1957, "foo", "bar")
    ifelse(x <= 1957, "foo", "bar")

>  [1] "bar" "bar" "bar" "bar" "bar" "bar" "bar" "foo" "bar" "bar" "bar"
>  [1] "foo" "foo" "foo" "foo" "foo" "foo" "foo" "foo" "bar" "bar" "bar" 
```

带有嵌套的分类变量...

```
> x <- seq(1950, 1960, 1)

    ifelse(x == 1957, "foo", ifelse(x == 1958, "bar","baz"))

>  [1] "baz" "baz" "baz" "baz" "baz" "baz" "baz" "foo" "bar" "baz" "baz" 
```

这是最直接的选择。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-04-17T11:08:53.877

基础 R 中的这一衬里

```
model.matrix( ~ iris$Species - 1) 
```

给

```
 iris$Speciessetosa iris$Speciesversicolor iris$Speciesvirginica
1                    1                      0                     0
2                    1                      0                     0
3                    1                      0                     0
4                    1                      0                     0
5                    1                      0                     0
6                    1                      0                     0
7                    1                      0                     0
8                    1                      0                     0
9                    1                      0                     0
10                   1                      0                     0
11                   1                      0                     0
12                   1                      0                     0
13                   1                      0                     0
14                   1                      0                     0
15                   1                      0                     0
16                   1                      0                     0
17                   1                      0                     0
18                   1                      0                     0
19                   1                      0                     0
20                   1                      0                     0
21                   1                      0                     0
22                   1                      0                     0
23                   1                      0                     0
24                   1                      0                     0
25                   1                      0                     0
26                   1                      0                     0
27                   1                      0                     0
28                   1                      0                     0
29                   1                      0                     0
30                   1                      0                     0
31                   1                      0                     0
32                   1                      0                     0
33                   1                      0                     0
34                   1                      0                     0
35                   1                      0                     0
36                   1                      0                     0
37                   1                      0                     0
38                   1                      0                     0
39                   1                      0                     0
40                   1                      0                     0
41                   1                      0                     0
42                   1                      0                     0
43                   1                      0                     0
44                   1                      0                     0
45                   1                      0                     0
46                   1                      0                     0
47                   1                      0                     0
48                   1                      0                     0
49                   1                      0                     0
50                   1                      0                     0
51                   0                      1                     0
52                   0                      1                     0
53                   0                      1                     0
54                   0                      1                     0
55                   0                      1                     0
56                   0                      1                     0
57                   0                      1                     0
58                   0                      1                     0
59                   0                      1                     0
60                   0                      1                     0
61                   0                      1                     0
62                   0                      1                     0
63                   0                      1                     0
64                   0                      1                     0
65                   0                      1                     0
66                   0                      1                     0
67                   0                      1                     0
68                   0                      1                     0
69                   0                      1                     0
70                   0                      1                     0
71                   0                      1                     0
72                   0                      1                     0
73                   0                      1                     0
74                   0                      1                     0
75                   0                      1                     0
76                   0                      1                     0
77                   0                      1                     0
78                   0                      1                     0
79                   0                      1                     0
80                   0                      1                     0
81                   0                      1                     0
82                   0                      1                     0
83                   0                      1                     0
84                   0                      1                     0
85                   0                      1                     0
86                   0                      1                     0
87                   0                      1                     0
88                   0                      1                     0
89                   0                      1                     0
90                   0                      1                     0
91                   0                      1                     0
92                   0                      1                     0
93                   0                      1                     0
94                   0                      1                     0
95                   0                      1                     0
96                   0                      1                     0
97                   0                      1                     0
98                   0                      1                     0
99                   0                      1                     0
100                  0                      1                     0
101                  0                      0                     1
102                  0                      0                     1
103                  0                      0                     1
104                  0                      0                     1
105                  0                      0                     1
106                  0                      0                     1
107                  0                      0                     1
108                  0                      0                     1
109                  0                      0                     1
110                  0                      0                     1
111                  0                      0                     1
112                  0                      0                     1
113                  0                      0                     1
114                  0                      0                     1
115                  0                      0                     1
116                  0                      0                     1
117                  0                      0                     1
118                  0                      0                     1
119                  0                      0                     1
120                  0                      0                     1
121                  0                      0                     1
122                  0                      0                     1
123                  0                      0                     1
124                  0                      0                     1
125                  0                      0                     1
126                  0                      0                     1
127                  0                      0                     1
128                  0                      0                     1
129                  0                      0                     1
130                  0                      0                     1
131                  0                      0                     1
132                  0                      0                     1
133                  0                      0                     1
134                  0                      0                     1
135                  0                      0                     1
136                  0                      0                     1
137                  0                      0                     1
138                  0                      0                     1
139                  0                      0                     1
140                  0                      0                     1
141                  0                      0                     1
142                  0                      0                     1
143                  0                      0                     1
144                  0                      0                     1
145                  0                      0                     1
146                  0                      0                     1
147                  0                      0                     1
148                  0                      0                     1
149                  0                      0                     1
150                  0                      0                     1 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-02-15T03:48:46.340

将您的数据转换为 data.table 并使用 set by reference 和行过滤

```
library(data.table)

dt <- as.data.table(your.dataframe.or.whatever)
dt[, is.1957 := 0]
dt[year == 1957, is.1957 := 1] 
```

概念验证玩具示例：

```
library(data.table)

dt <- as.data.table(cbind(c(1, 1, 1), c(2, 2, 3)))
dt[, is.3 := 0]
dt[V2 == 3, is.3 := 1] 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-10-02T02:05:52.853

我们也可以使用`cSplit_e`from `splitstackshape`。使用@zx8754 的数据

```
df1 <- data.frame(id = 1:4, year = 1991:1994)
splitstackshape::cSplit_e(df1, "year", fill = 0)

#  id year year_1 year_2 year_3 year_4
#1  1 1991      1      0      0      0
#2  2 1992      0      1      0      0
#3  3 1993      0      0      1      0
#4  4 1994      0      0      0      1 
```

为了使其适用于数字以外的数据，我们需要明确指定`type`为`"character"`

```
df1 <- data.frame(id = 1:4, let = LETTERS[1:4])
splitstackshape::cSplit_e(df1, "let", fill = 0, type = "character")

#  id let let_A let_B let_C let_D
#1  1   A     1     0     0     0
#2  2   B     0     1     0     0
#3  3   C     0     0     1     0
#4  4   D     0     0     0     1 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-08-18T09:50:00.337

我使用这样的功能（用于data.table）：

```
# Ta funkcja dla obiektu data.table i zmiennej var.name typu factor tworzy dummy variables o nazwach "var.name: (level1)"
factorToDummy <- function(dtable, var.name){
  stopifnot(is.data.table(dtable))
  stopifnot(var.name %in% names(dtable))
  stopifnot(is.factor(dtable[, get(var.name)]))

  dtable[, paste0(var.name,": ",levels(get(var.name)))] -> new.names
  dtable[, (new.names) := transpose(lapply(get(var.name), FUN = function(x){x == levels(get(var.name))})) ]

  cat(paste("\nDodano zmienne dummy: ", paste0(new.names, collapse = ", ")))
} 
```

用法：

```
data <- data.table(data)
data[, x:= droplevels(x)]
factorToDummy(data, "x") 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-06T17:18:08.097

嗨，我编写了这个通用函数来生成一个虚拟变量，它基本上复制了 Stata 中的替换函数。

如果 x 是数据框是 x 并且我想要一个名为的虚拟变量`a`，它将在取值`1`时`x$b`取值`c`

```
introducedummy<-function(x,a,b,c){
   g<-c(a,b,c)
  n<-nrow(x)
  newcol<-g[1]
  p<-colnames(x)
  p2<-c(p,newcol)
  new1<-numeric(n)
  state<-x[,g[2]]
  interest<-g[3]
  for(i in 1:n){
    if(state[i]==interest){
      new1[i]=1
    }
    else{
      new1[i]=0
    }
  }
    x$added<-new1
    colnames(x)<-p2
    x
  } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-05-09T21:09:43.037

另一种方法是使用

```
ifelse(year < 1965 , 1, 0) 
```

# ruby-on-rails - cookie 持久性与omniauth 和linkedin gem

> ID：11952711
> 
> 赞同：0
> 
> 时间：2012-08-14T12:55:10.120
> 
> 标签：ruby-on-rails, session, cookies, session-cookies, omniauth

我正在运行一个 Rails 应用程序，该应用程序允许用户成功通过 LinkedIn 进行身份验证并导入他们的 LinkedIn 个人资料数据。我遇到的（大）问题是，与一个首先登录的用户关联的 cookie 数据即使在他们退出后仍然存在，并且在他们通过 LinkedIn 进行身份验证后被另一个单独的用户提取。第一个用户的数据覆盖了第二个用户的数据……大问题。

非常感谢您的帮助！

这是我的会话控制器：

```
class SessionsController < ApplicationController

    def new
    end

    def create
        if env['omniauth.auth']
            user = User.from_omniauth(env['omniauth.auth'])
            session[:user_id] = user.id
        redirect_to auth_path
        flash[:success] = 'Signed in with LinkedIn.'
        else
            user = User.find_by_email(params[:session][:email])
            if user && user.authenticate(params[:session][:password])
                sign_in user
                redirect_back_or user
                flash[:success] = 'Signed in the old-fashioned way.'
            else
                flash.now[:error] = 'Invalid email/password combination'
                render 'new'
            end         
        end
    end

    def destroy
        cookies.delete(:remember_token)
        session[:user_id] = nil
        redirect_to root_path
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:03:49.710

我遇到了完全相同的问题。在您的omniauth 配置中的某处应该有一个路径配置，用于将用户重定向到的位置。

在 [https://api.linkedin.com/uas/oauth/authenticate之前](https://api.linkedin.com/uas/oauth/authenticate)

之后 - 这为我解决了所有问题，并使控制器操作在执行时始终需要授权，以便同一台计算机上的新用户不会自动使用最后一个用户的 LinkedIn cookie。 [https://www.linkedin.com/uas/oauth/authorize](https://www.linkedin.com/uas/oauth/authorize)

# python - xml.etree 还是 xml.dom？

> ID：11952713
> 
> 赞同：8
> 
> 时间：2012-08-14T12:55:13.923
> 
> 标签：python, xml

我正在尝试阅读一些 xml，但我不确定应该使用哪个库。

什么是更好的 xml.etree 或 xml.dom，为什么？

请解释你的答案并给出论据。

另外，您认为其中一个会被弃用吗？哪一个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T13:03:26.280

两者都不会被弃用。

[ElementTree](http://effbot.org/zone/element-index.htm) (xml.etree) 是一个用于访问 XML 的 pythonic API。[DOM](https://en.wikipedia.org/wiki/Document_Object_Model) (xml.dom) 是一个跨平台、独立于语言的标准。

除非您有令人信服的理由改用 XML DOM，否则请使用 ElementTree。对于 python 代码，ElementTree API 比 DOM API 更容易使用。

如果你不反对安装额外的 python 库，你也应该看看[这个`lxml`库](http://lxml.de)；它还在非常快速的 C 库之上实现了 ElementTree API，并添加了更多选项来有效地使用 XML。

# java - Java 中的 outData.writeInt() 是什么？

> ID：11952720
> 
> 赞同：0
> 
> 时间：2012-08-14T12:55:45.737
> 
> 标签：java, function, mouseevent

我是 Java 编程语言的新手，事实上我只有一些基本的编程概念。我遇到了以下一段 Java 代码，但我无法理解其中的函数。如果有人向我解释'outData.writeInt（）'做什么以及如何使用它，我将不胜感激？谢谢你。

```
 try {
    if(moe.getSource() == forward)outData.writeInt(1);
    if(moe.getSource() == reverse)outData.writeInt(2);
    if(moe.getSource() == leftTurn)outData.writeInt(3);
    if(moe.getSource() == rightTurn)outData.writeInt(4);
    if(moe.getSource() == speedUp)outData.writeInt(6);
    if(moe.getSource() == slowDown)outData.writeInt(7);

    outData.flush(); 
    }
 catch (IOException ioe) {
    System.out.println("\nIO Exception writeInt");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:59:53.977

一个快速的谷歌给了我[DataOutputStream.writeInt()的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataOutputStream.html#writeInt%28int%29)

> 将一个 int 作为四个字节写入底层输出流，先是高字节。如果没有抛出异常，则写入的计数器增加 4

您`DataOutputStream`将写入文件，或者可能是网络连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:00:12.270

[writeInt()](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#writeInt%28int%29)记录在 DataOutputStream

> 将一个 int 作为四个字节写入底层输出流，先是高字节。如果没有抛出异常，则写入的计数器增加 4。

`int`简单来说，它以大端写入一个 32 位值。

* * *

如果你想知道一个方法是做什么的，最好从源代码开始

```
/**
 * Writes an <code>int</code> to the underlying output stream as four
 * bytes, high byte first. If no exception is thrown, the counter
 * <code>written</code> is incremented by <code>4</code>.
 *
 * @param      v   an <code>int</code> to be written.
 * @exception  IOException  if an I/O error occurs.
 * @see        java.io.FilterOutputStream#out
 */
public final void writeInt(int v) throws IOException {
    out.write((v >>> 24) & 0xFF);
    out.write((v >>> 16) & 0xFF);
    out.write((v >>>  8) & 0xFF);
    out.write((v >>>  0) & 0xFF);
    incCount(4);
} 
```

# astyanax - 是否可以使用 Astyanax 运行 CQL3 查询“创建表”、“插入”？

> ID：11952724
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:56:02.380
> 
> 标签：astyanax

现在我只找到了“选择”的例子。

或者是否可以使用例如 MutationBatch？

```
MutationBatch m = keyspace.prepareMutationBatch();
ColumnListMutation<String> cfmStandard = m.withRow(MY_CF, ...); 
```

我的专栏家庭是：

```
 CREATE TABLE my_cf (
                   ... key text,
                   ... timeid timeuuid,
                   ...   flag boolean,
                   ...   data text,
                   ... PRIMARY KEY (key, timeid)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:24:19.497

用于插入和创建：

```
keyspace.prepareQuery(MY_CF).withCql(queryBuilder.toString()).execute(); 
```

# jenkins - 查看 Jenkins 中所有构建的工件的测试结果（不仅是最近的）

> ID：11952725
> 
> 赞同：2
> 
> 时间：2012-08-14T12:56:03.753
> 
> 标签：jenkins

有没有办法在 Jenkins 中显示所有构建（趋势）的测试结果？当我选择一个工件时，右侧的图表仅显示最后几个结果。我假设它与那些构建的时间框架有关。詹金斯会在一定时间后删除所有测试报告吗？

# c++ - 类同时拥有和共享一个对象

> ID：11952727
> 
> 赞同：0
> 
> 时间：2012-08-14T12:56:10.713
> 
> 标签：c++, constructor

我考虑编写一个行为不同的类，具体取决于它的构造方法：

例子：

```
// #1 - Own an object
class MyClass {
    MyClass(std::string const& str) : m_str(str) {}

    std::string m_str;
}

// #2 - Share an object (Can be done by pointer as well)
class MyClass {
    MyClass(std::string& str) : m_str(str) {}

    std::string& m_str;
} 
```

1.  将这两种行为放在同一个类中是个好主意吗？
2.  实现这样一个类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:00:02.647

试试这个：

```
struct MyClass
{
    std::unique_ptr<std::string> dont_touch_me;
    std::string & str;

    explicit MyClass(std::string const & s)
    : dont_touch_me(new std::string(s))
    , str(*dont_touch_me)
    { }

    explicit MyClass(std::string & r)
    : str(r)
    { }
}; 
```

现在只要确保你总是使用`MyClass::str`一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:13:50.063

```
struct ReferenceHolder
{
private:
    std::string& m_str;
public:
    ReferenceHolder(std::string& str) : m_str(str) {}
    // ... all other methods operating on m_str
};

struct ValueHolder : public ReferenceHolder
{
private:
    std::string m_str;
public:
    ValueHolder(const std::string& str) : ReferenceHolder(m_str), m_str(str) {}
}; 
```

将这两种行为结合在一个类中并不是一个好主意，因为使用非常量引用构造的对象不会使用内部字符串。如果调用者可以决定是否将 const 或非 const 引用传递给构造函数，那么在两个类名之间做出决定一定没有困难。

不过，同时持有`std::string`和引用的开销相当小。如果您想通过值无缝传递包含字符串的对象，那么您应该按照 Kerrek SB 的建议进行操作。

# c# - 如何使用 Parallel.For？

> ID：11952730
> 
> 赞同：6
> 
> 时间：2012-08-14T12:56:15.620
> 
> 标签：c#, parallel-for

我想在我的项目 (WPF) 中使用并行编程。这是我的 for 循环代码。

```
for (int i = 0; i < results.Count; i++)
{
    product p = new product();

    Common.SelectedOldColor = p.Background;
    p.VideoInfo = results[i];
    Common.Products.Add(p, false);
    p.Visibility = System.Windows.Visibility.Hidden;
    p.Drop_Event += new product.DragDropEvent(p_Drop_Event);
    main.Children.Add(p);
} 
```

它可以正常工作。我想用 Parallel.For 写它，我写了这个

```
Parallel.For(0, results.Count, i =>
{
    product p = new product();
    Common.SelectedOldColor = p.Background;
    p.VideoInfo = results[i];
    Common.Products.Add(p, false);
    p.Visibility = System.Windows.Visibility.Hidden;
    p.Drop_Event += new product.DragDropEvent(p_Drop_Event);
    main.Children.Add(p);
}); 
```

但是在产品类的构造函数中发生错误是

**调用线程必须是 STA，因为许多 UI 组件都需要这个。**

那么我使用了 Dispatcher 。这是代码

```
Parallel.For(0, results.Count, i =>
{
    this.Dispatcher.BeginInvoke(new Action(() =>
        product p = new product();
        Common.SelectedOldColor = p.Background;
        p.VideoInfo = results[i];
        Common.Products.Add(p, false);
        p.Visibility = System.Windows.Visibility.Hidden;
        p.Drop_Event += new product.DragDropEvent(p_Drop_Event);
        main.Children.Add(p)));
}); 
```

由于我的“p”对象，我得到了错误。它期望“;” 它还表示产品类别；类名此时无效。然后我在 Parallel.For 上方创建了产品对象，但仍然出现错误..

如何修复我的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T12:59:33.813

简单的答案是您正在尝试使用需要单线程的组件，更具体地说，它们看起来只想在 UI 线程上运行。所以使用`Parallel.For`不会对你有用。即使您使用调度程序，您也只是将工作编组到**单个**UI 线程，这否定了`Parallel.For`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T12:57:54.687

您不能从后台线程与 UI 交互。

因此，您不能用于`Parallel.For`管理 UI。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T13:05:09.573

我不会解释有关线程的其他答案，我只是提供您的第二段代码的固定版本：

```
Parallel.For(0, results.Count, i =>
    this.Dispatcher.BeginInvoke(new Action(() =>
        {
            product p = new product();
            Common.SelectedOldColor = p.Background;
            p.VideoInfo = results[i];
            Common.Products.Add(p, false);
            p.Visibility = System.Windows.Visibility.Hidden;
            p.Drop_Event += new product.DragDropEvent(p_Drop_Event);
            main.Children.Add(p);
        }))); 
```

但正如 Coding Gorilla 所解释的那样，不会有任何好处。

# asp.net - css display:none不适用于c#生成的HTML邮件

> ID：11952738
> 
> 赞同：0
> 
> 时间：2012-08-14T12:56:35.563
> 
> 标签：asp.net

在我的代码中，我使用`MailMessage`.Net 类来生成邮件。

我已经设置了 `msg.IsBodyHtml = true;`。仍然在邮件中根本没有应用 CSS ..

我想在邮件中隐藏一些标签。为此，我使用了`Display`财产，但它不起作用......

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:05:07.233

您不应该在 HTML 电子邮件中使用大量 CSS。目前大多数电子邮件客户端不完全支持 CSS，很可能是出于安全原因。以您的情况为例，Outlook 允许某人向我发送一封包含隐藏内容的电子邮件是不明智的。以这种方式进行恶意攻击的空间太大了。

为获得最佳结果，请使用您的 HTML 进行一些老式的学习。**使用表格布局，限制图像数量，仅在内联样式**中使用少量 CSS 。在某些情况下，不要害怕恢复到经典的 HTML 样式标签，例如`<table bgcolor="#F30FF0"></table>`.

# asp.net-mvc - 如何从强类型视图中隐藏实体框架实体属性？

> ID：11952740
> 
> 赞同：7
> 
> 时间：2012-08-14T12:56:44.947
> 
> 标签：asp.net-mvc, entity-framework, data-annotations

我在我的 ASP.NET MVC 4.0 应用程序中使用实体框架，我想知道如何防止或隐藏我的实体中的字段在我的强类型视图中生成？现在，我不想要的视图上正在生成几个主键字段和时间戳字段。

我知道将属性设置`internal`为与`public`作品相反，但我不确定这将产生的总体下游影响。我更喜欢在属性上使用数据注释，但我尝试过的那些可以防止控制器脚手架或将它们作为隐藏字段。我更喜欢它们保持公开状态，但只是不在强类型视图中生成。

**编辑：**

要生成强类型视图，请在 Visual Studio 中添加一个新的“视图”，并在对话框中选择该视图建模的类。这反过来将创建一个视图，其中包含由类的属性表示的所有控件。例如`LastName`创建一个字段如下：

```
@Html.EditorFor(model => model.FirstName) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T14:02:54.973

**回答问题**

属性

```
[ScaffoldColumn(false)] 
```

或者

```
[Display(AutoGenerateField=false)] 
```

在不需要的属性将阻止设计人员为这些属性生成脚手架字段之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T14:32:10.300

要通过数据注释从 UI 中隐藏属性，请使用

```
 [ScaffoldColumn(false)] 
```

并且它们将被编辑器模板忽略。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T12:59:34.390

您应该使用仅包含所需属性的单独 ViewModel 类。

# jquery - 选中复选框时显示表格行

> ID：11952743
> 
> 赞同：0
> 
> 时间：2012-08-14T12:57:00.353
> 
> 标签：jquery, html, wordpress

使用 jquery 如何在选中/取消选中`id="hidden"`复选框时显示/隐藏行`id="post"`？

```
 <tr>
        <td valign="top">
            <p>Contact Method:</p>
        </td>
        <td>&nbsp;</td>
        <td align="left" valign="top">
                <p>
                    <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Phone" id="phone" />
                    <label style="margin-right: 25px;">Phone</label>
                </p>
                <p>
                    <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Email" id="email" />
                    <label style="margin-right: 25px;">Email</label>
                </p>
                <p>
                    <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Post" id="post" />
                    <label style="margin-right: 25px;">Post</label>
                </p>
        </td>
    </tr> 
    <tr id="hidden">    
        <td>
        <p>Address (if applicable):</p>
        </td>
        <td>&nbsp;</td>
        <td colspan="2"><input type="text" name="address" id="address" /></td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:01:33.057

**使用jQuery**的一种紧凑方式：

```
$(document).ready(function() {    
    $("#post").change(function () {
        $("#hidden").toggle();
    });
}) 
```

工作演示：[JSFiddle](http://jsfiddle.net/UP5wd/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:00:25.130

试试这个：

```
$(document).ready(function() {
    $('#post').change(function(){
        $('#hidden').css('display', this.checked ? 'block' : 'none')
    })
}) 
```

[小提琴](http://jsfiddle.net/tTtka/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:08:19.743

试试这个：

```
jQuery( function ($) {
    $('tr#hidden').hide();

    $('input#post').change( function(e) {
        if($(this).attr('checked'))
        {
            $('tr#hidden').show();
        }
        else
        {
            $('tr#hidden').hide();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:03:36.017

试试这个....

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script> $("#post").click(function(){ $("#hidden").toggle(); })); </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:13:43.410

好的例如：

```
<div id="hidden">
<p>Some Sample Content</p>
</div>

<div id="control">
<input type="checkbox" id="check" />
<label for="check">Show Element</label>
</div>​ 
```

像这样使用 Jquery：

```
$(document).ready(function(){
    $('#check').click(function(){
        checkIt();
    });
});

function checkIt(){
    if ($('#check:checked').val() == "on"){
        $('#hidden').css({'display':'block'});
    } else {
        $('#hidden').css({'display':'none'});
    }
} 
```

此外，这是一个工作示例：http: [//jsfiddle.net/dbs3r/](http://jsfiddle.net/dbs3r/)

# java - 您可以在 Java 中声明无参数方法以在 Scala 中使用吗？

> ID：11952744
> 
> 赞同：5
> 
> 时间：2012-08-14T12:57:04.160
> 
> 标签：java, scala, setter, getter

在 Scala 中，我们可以使用无参数方法，这对于 DSL 目的非常有用；它们还用于为类字段自动定义 getter。

我正在开发一个 Java 库，我想尽可能地与 Scala 无缝集成。我想知道是否有一种方法可以用空参数列表注释 Java 方法，以便 Scala 将其识别为无参数。

例如

```
class Foo {
  @ParameterLess
  public String[] bar() { return someArray; }
} 
```

这样在 Scala 中我可以做到：

```
val f = new Foo
f bar (0) 
```

没有编译器抱怨 bar() 有一个空的参数列表？

或者，有没有办法从 Java 定义 Scala 风格的 getter 和 setter？

注意：当然我知道在这个特定的例子中我可以通过定义来解决这个问题

```
public String bar(int i) { return someArray[i]; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:22:03.847

这可能回答了我的问题：

[Java类中的Scala getter和setter](https://stackoverflow.com/questions/10897307/scala-getters-and-setters-in-java-class)

答案是你不能，除非你使用一些涉及特征的诡计。好吧，我想某种注释 à la`@scala.reflect.BeanProperty`会是一个有用的改进。

# sql - 在相关表中搜索字符串

> ID：11952747
> 
> 赞同：0
> 
> 时间：2012-08-14T12:57:28.400
> 
> 标签：sql

我有一个包含多个表的数据库，其中一个用于引用其他表：

主表：

```
MAIN | table1 | table2 | table3
        int   |  int   |  int 
```

该表的每一行对应一个产品，并包含子表中一行的oid

然后我有我的女儿表：

```
TABLE1 | name | adress | phone
       | text | text   | ... 
```

我的问题很简单，即使我刚开始使用数据库，我也找不到答案。

我想获取主表行的 oid，它引用了 table1 的行，其名称等于“bob”。

就像是 ：

```
SELECT * from main where table1.name = "bob" 
```

如果没有完整的解决方案，你能指点我一些文档吗？我想我想念词汇来找到适当的资源来做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:01:50.777

假设 oid 是表 1 和主表中的列：

```
SELECT m.oid
FROM main m
INNER JOIN table1 t
ON m.table1 = t.oid
WHERE t.name = 'bob' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:01:51.693

你的意思是像`SELECT oid FROM MAIN WHERE table1 IN (SELECT oid FROM TABLE1 WHERE name = 'bob')`？

`table1`== 外键 从`MAIN`到`TABLE1`。

# rally - Rally 中的速度图表

> ID：11952748
> 
> 赞同：0
> 
> 时间：2012-08-14T12:57:40.743
> 
> 标签：rally

[在 Rally 中，迭代速度图](http://www.rallydev.com/help/progress-reports#velocity)和[增强速度图](http://www.rallydev.com/help/enhanced-velocity-chart)有什么区别？

在我看来，深绿色和浅绿色条在两者中是相同的，并且迭代速度的红色条与增强速度的清除相同。这是真的？

这两个图表之间有什么区别 - 即为什么看似相同的事物有两个不同的图表？

提前致谢。

# jquery - 改进 textield 的 jQuery 自动完成部分

> ID：11952756
> 
> 赞同：1
> 
> 时间：2012-08-14T12:58:12.700
> 
> 标签：jquery, coffeescript, jquery-autocomplete

我有一个文本区域，在用户键入 @ 符号后自动完成功能启动。类似于 Twitter 处理用户名自动完成的方式。我使用 jQuery[自动完成](http://jqueryui.com/demos/autocomplete/)和[插入符号](https://github.com/DrPheltRight/jquery-caret)插件。

通常，自动完成会用用户选择的任何内容替换整个文本字段。在这种情况下，它只替换@之后的部分。如果文本中有多个 @ 符号，它甚至可以工作。

我的 CoffeeScript 有点生疏，所以我想知道是否有人可以提出一些改进建议。特别是我不喜欢在搜索和源方法之间传递变量（如当前光标位置）的方式。

```
$('.myTextArea').autocomplete
search: (event,ui) ->
  # Figure out where in the text we are currently typing
  # Cursor position:
  target = $("#" + event.target.id)  # I'm sure there's a more elegant solution
  window.cursor_pos = target.caret()
  window.word = getWordAt(event.target.value, window.cursor_pos); 

  if window.word[0] == "@"
    $('#spinner').show()
  else
    return false
open: (event, ui) ->
  $('#spinner').hide()
focus: (event, ui) ->
  return false
source: (request, response)  ->
  $.getJSON("/users/autocomplete_username", { term: window.word.slice(1) }, response);
select: (event,ui) ->
  start_of_word =  window.cursor_pos - window.word.length + 1
  start = event.target.value.substring(0, start_of_word)
  ending = event.target.value.substring(window.cursor_pos, event.target.value.length)

  event.target.value = start +  ui.item.id + ending
  target = $("#" + event.target.id) 
  target.caret(start_of_word + ui.item.id.length ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T09:39:20.793

良好的直觉回复：在搜索和来源之间传递光标位置 - 将东西附加到`window`导致死亡！:) 本地范围的变量可以正常工作并且更安全（见下文）。

我一眼就注意到的另一件事是您对 的使用`word[0]`，这在某些浏览器中是未定义的；对于字符串字符访问，您实际上应该使用[`charAt()`](http://www.w3schools.com/jsref/jsref_charat.asp)跨浏览器友好的。除了 var 作用域之外，我还在这里进行了更改：

```
cursor_pos = word = null

$('.myTextArea').autocomplete
  search: (event,ui) ->
    # Figure out where in the text we are currently typing
    # Cursor position:
    target = $("#" + event.target.id)  # I'm sure there's a more elegant solution
    cursor_pos = target.caret()
    word = getWordAt(event.target.value, cursor_pos); 

    if word.charAt(0) == "@"
      $('#spinner').show()
    else
      return false
  open: (event, ui) ->
    $('#spinner').hide()
  focus: (event, ui) ->
    return false
  source: (request, response)  ->
    $.getJSON("/users/autocomplete_username", { term: word.slice(1) }, response);
  select: (event,ui) ->
    start_of_word =  cursor_pos - word.length + 1
    start = event.target.value.substring(0, start_of_word)
    ending = event.target.value.substring(cursor_pos, event.target.value.length)

    event.target.value = start +  ui.item.id + ending
    target = $("#" + event.target.id) 
    target.caret(start_of_word + ui.item.id.length ) 
```

# correlation - SAS中的大（20x20）相关散点图？

> ID：11952757
> 
> 赞同：0
> 
> 时间：2012-07-17T17:04:36.180
> 
> 标签：correlation, sas

我正在对包含 27 个变量的数据集进行一些探索性分析，其中可能有 24 个具有有趣的数值内容。我想看看一个大绘图员的情节，看看每一对是如何相互作用的，但是当我尝试在 CORR 或 SGSCATTER 中做类似的事情时，它会继续吐出相同的 640x640 情节并缩小图表。

有没有办法让它创建一个大情节，而不是必须通过宏来创建一堆 6x6？

编辑 - 我的代码：

```
ods rtf;
ods graphics on;

proc sgscatter data=home.byEpisode;
 matrix var1
   var2
   var3 %* and so on until 27;
run;

ods rtf close;
ods graphics off; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:44:16.063

您的问题并不完全清楚这是由 PROC CORR 本身引起的，还是输出问题。ODS 允许您调整输出的大小，如下面的链接所示。这允许调整图形，但调整您正在处理的页面的大小也是如此（有关该主题的 SUGI 论文，请参见参考资料 2）。

我建议将纸张大小调整到相当大的大小，然后使用带有 PROC CORR 的 ODS PDF 将输出传输到那里。希望这可以解决您的问题。

1.  [http://support.sas.com/documentation/cdl/en/statug/63033/HTML/default/viewer.htm#statug_odsgraph_sect034.htm](http://support.sas.com/documentation/cdl/en/statug/63033/HTML/default/viewer.htm#statug_odsgraph_sect034.htm)
2.  [http://support.sas.com/resources/papers/proceedings10/011-2010.pdf](http://support.sas.com/resources/papers/proceedings10/011-2010.pdf)

# c++ - 提升 asio 服务器

> ID：11952759
> 
> 赞同：0
> 
> 时间：2012-08-14T12:58:18.777
> 
> 标签：c++, boost, boost-asio

关于答案：[Boost:Asio 的游戏服务器如何异步工作？](https://stackoverflow.com/questions/9718633/how-game-servers-with-boostasio-work-asynchronously)

如果我有一台服务器进行计算并同时发送/接收来自客户端的数据包怎么办？

我的意思是，如果我正在编写一个 http-server，那么答案中的示例就足够了，因为发送的所有数据都是接收到的数据的函数。

假设我的程序计算值并需要根据客户的需要更新客户端（有些人可能希望更新频率为 1 赫兹，而另一个为 10 赫兹等）。

这种结构对我很有帮助：

```
while(1){
pollNetworking(); //<- my function
value1 += 5; value2 = random();
} 
```

在我的 pollNetworking 函数中，我正在考虑调用诸如 acceptor.accept(*socket,10); 之类的东西。其中 10 是以毫秒为单位的超时，但由于没有超时参数，我不知道如何构造它。

可扩展性不是最大的问题，我可以为每个套接字生成一个线程，一个额外的线程用于接受，另一个线程用于计算吗？这很容易实现吗？因为我希望它尽可能稳定，然后是速度，然后是可扩展性。当谈到多线程时，我不相信自己可以干净地编码和调试它。

编辑：我了解到我可以使用 io_service::poll，它只调度就绪事件而不阻塞。所以它是一个 0 超时的同步函数，完全符合我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:37:12.693

服务器可以在从客户端发送和接收数据的同时进行计算。但是，可能需要保护缓冲区和套接字免受并发访问。

对于大多数 Boost.Asio 操作，可移植的超时功能仅适用于异步操作。这需要对实体发出异步操作，设置计时器，然后等待。`async_read`有关超时取消的示例，请参阅[此](https://stackoverflow.com/q/10858719/)问题。

最简单且可扩展性较差的方法是为每个职责指定一个线程（每个套接字的线程、接受和计算）。可能需要进行同步，例如保护计算结果。例如，如果`value1`和`value2`仅在同一迭代中有意义，则套接字线程需要保证将值一起写入，而计算线程不会在写入过程中更改值。各种同步结构，例如[Boost.Thread](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/synchronization.html)提供的那些，都可以用来完成这个。此外，通过最小化正在使用的异步调用的数量，可能更容易实现和调试。

对于一个可扩展的方法，大部分程序将被编写为一系列从异步操作调用的处理程序。这允许程序更容易地利用线程和线程池。但是，它可以将程序逻辑分散到众多功能中，并且很快就会变得难以遵循。通常，考虑到异步操作编写的程序将与 执行同步[`boost::asio::strand`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/overview/core/strands.html)，并通过[`boost::shared_ptr`](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm).

实施的难易程度取决于经验。请记住，网络编程、并发和异步操作天生就很困难。很少有既简单又完整的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:03:28.033

您仍然可以进行异步接受和接收，但在需要发送给客户端时同步发送给客户端。

如果您可以为每个连接的客户端使用单独的线程（我猜您不会期望有数百或数千个连接），那么您可以为每个连接的客户端使用一个线程进行计算和发送，同时保持接收异步。

# spss - 有谁知道在哪里可以找到 SPSS 中的模型规范

> ID：11952765
> 
> 赞同：1
> 
> 时间：2012-04-20T15:35:07.297
> 
> 标签：spss

我已经运行了一个逻辑回归模型是spss。它在哪里存储模型规范？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:02:53.563

模型系数显示在输出数据透视表中。相关设置可在备注表中查看。（可以使用 OUTPUT EXPORT 或 OMS 保存为 xml、html、Excel 和各种其他格式）。

日志文件（如果处于活动状态）也会记录您的所有语法。

二元和多项逻辑过程都可以直接将模型保存到 xml 文件中，并且可以将预测类别等各种输出保存为数据集中的变量。

HTH，乔恩·派克

# c# - 如何执行 LINQ 来读取 XML 文件

> ID：11952769
> 
> 赞同：0
> 
> 时间：2012-08-14T12:58:47.717
> 
> 标签：c#, linq

我正在尝试读取一个 XML 文件，但我只想知道 the 的名称`node`和她的值。

**例子**

```
<User>
    <Contact>
        <Name>Lucas</Name>
        <ID>123</ID>
    </Contact>
</User> 
```

我正在尝试使用下面的代码，但没有成功。我怎样才能只返回`node`名称和她的值？

```
foreach (var name in doc2.Root.DescendantNodes().OfType<XNode>().Select(x => x).Distinct())
{
    string nome = name.ToString();
} 
```

我希望我的字符串接收我的节点的名称，这种情况将是`Name`和她的值，那将是`Lucas`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:00:50.490

```
foreach(var element in doc2.Root.Descendants()) {
    String name = element.Name.LocalName;
    String value = element.Value;
} 
```

# asp.net - 在部署而不是第一次加载时编译 ASCX 文件？

> ID：11952771
> 
> 赞同：5
> 
> 时间：2012-08-14T12:59:00.353
> 
> 标签：asp.net, user-controls

当我将 ASP.NET 项目部署到包含许多 ASCX 文件的服务器时，第一页加载可能需要一段时间，这可能是因为正在编译 ASCX 文件。不过，只有实际在页面上的那些才会被编译，所以我的部署过程的一部分是导航到网站上的一堆页面。导航到所有页面后，该站点即可顺利运行。

我宁愿 ASP.NET 在我部署时立即编译所有这些 ASCX 文件，以删除这个草率的部署步骤。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:07:43.227

听起来您正在寻找[ASP.NET 预编译](http://msdn.microsoft.com/en-us/library/bb398860.aspx)：

> 您可以在网站项目可供用户使用之前对其进行预编译。这提供了许多优势，包括更快的初始响应时间、错误检查、源代码保护和高效部署。这在网页和代码文件频繁更改的大型站点中尤为重要。
> 
> 您还可以使用 Web 应用程序项目模型来编译项目。在该模型中，项目中的所有代码文件（独立、代码隐藏和类文件）都编译为单个程序集并存储在 Bin 目录中。因为编译创建单个程序集，所以您可以指定属性，例如程序集名称和版本。如果不希望输出程序集位于 Bin 目录中，还可以指定输出程序集的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:06:49.700

如果您将 ASP.net 网站转换为“Web 应用程序”，则可以部署已编译的版本。在解决方案资源管理器中右键单击您的网站，然后单击“转换为 Web 应用程序”

请参阅[ASP.NET 网站或 ASP.NET Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)更多细节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:04:16.017

您可以在您的 Web 解决方案上运行[msbuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)，它会编译您的代码，然后您可以沿着已编译的 .dll 部署标记。

执行此操作的示例 NAnt 脚本：

```
<target name="determineMsbuildPath">
    <readregistry property="net.bin" key="SOFTWARE\Microsoft\MSBuild\ToolsVersions\4.0\MSBuildToolsPath"/>
</target>

<target name="msbuild" depends="determineMsbuildPath>
    <exec basedir="${net.bin}\" program="MSBuild.exe">
        <arg value="${solution}"/> <!-- put the path to your web solution here -->
        <arg value="/p:OutputPath=${workdir}"/>
    </exec>
</target> 
```

# windows - 如何检查和复制 .txt 文件中新添加的内容

> ID：11952773
> 
> 赞同：1
> 
> 时间：2012-08-14T12:59:19.590
> 
> 标签：windows, c#-4.0

我需要创建一个文件观察器，它将在目录中查找新添加的文件以获取新添加的数据。

当有新数据添加到`.jrn`文件时。新添加的数据应复制到临时文件。我正在使用窗口服务（`C#`）来开发它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:31:21.537

我按照以下步骤解决了这个问题：

1.  创建一个计时器以检查创建的任何新文件
2.  使用 substring 方法获取新添加的内容
3.  交换最后添加的两个内容

# javascript - Javascript - 揭示对象和变量范围

> ID：11952774
> 
> 赞同：0
> 
> 时间：2012-08-14T12:59:23.313
> 
> 标签：javascript, variables, inheritance, scope

[http://jsfiddle.net/ZLH7J/1/](http://jsfiddle.net/ZLH7J/1/)

下面显示的 jsFiddle 和代码是两个本质上做同样事情的示例。在尝试调用`first();`或`this.first();`在任一示例中，都会引发未定义的错误。我可以稍后通过实例调用函数，但在尝试使用`init(){...}()`构造函数实例化对象时不能。我把 init() 放在底部，认为这是一个操作顺序，但事实并非如此。这不像我认为的那样工作。

我很想知道应该如何做到这一点，以及为什么不能做到这一点。

```
//create and return an obj
var fishSticks = function(){
    return {
        first: function(){
            document.getElementById('output').innerHTML="Success";
        },
        init: function(){
            try{
                first(); //err
                this.first(); // also err
             }catch(e){
                document.getElementById('output').innerHTML=e.toString();
            }
        }()
    }
}   

//do function stuff and then return 'this'
var fishFillet = function(){
    var first = function(){
            document.getElementById('output2').innerHTML="Success";
    }
    var init = function(){
            try{
                first(); //err
                this.first(); // also err
             }catch(e){
                 document.getElementById('output2').innerHTML=e.toString();
            }
    }()
return this;
}

 var test = new fishSticks();    
 var test2 = new fishFillet(); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:07:56.673

Since you are using both as a constructor, format them as such:

```
function fishFillet(){
    this.first = function(){
        document.getElementById('output2').innerHTML="Success";
    }
    this.init = function(){
        try{
            this.first();
        }catch(e){
            document.getElementById('output2').innerHTML=e.toString();
        }
    }
}
var food = new fishFillet();
food.init(); 
```

The reason it wasn't working for you is b/c "first" is created as a local varaible, and is deleted after execultion. Init isn't being called until after the execution of the constructor has finished

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:07:06.807

怎么样...

```
var fishFillet = function () {
    var first = function () {
        document.write( 'Success' );
    };

    var init = function () {
        first();
    };

    init();

    return {
        first: first
    };
}; 
```

接着：

```
var ff = fishFillet(); // calls init() which calls first()
ff.first(); // call first() manually 
```

**现场演示：http:** [//jsfiddle.net/uaCnv/](http://jsfiddle.net/uaCnv/)

因此，首先定义所有函数，然后手动调用`init`，最后返回一个对象，其中包含应该通过结果对象（作为方法）可用的那些函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:04:04.780

在您的第二个示例中，如果您注释掉“init”中的调用，`this.first()`那么您将收到“成功”消息。

第一个版本不起作用，因为 JavaScript 根本不允许在正在构造的对象中对对象本身进行引用。只是没有办法做到这一点。

第二个有效（对“first”的简单引用有效）因为“first”被声明为局部变量。局部变量**不是**任何对象的属性，特别是它们不是使用 调用函数时分配的对象的属性`new`。这就是为什么`this.first()`不起作用。

在第二个中，您可以`this.first()`通过以不同方式声明事物来完成工作：

```
var fishFillet = function(){
    this.first = function(){
            document.getElementById('output2').innerHTML="Success";
    }
    var init = function(){
            try{
                this.first(); //will work
             }catch(e){
                 document.getElementById('output2').innerHTML=e.toString();
            }
    }()
    return this;
} 
```

此外，对于它的价值，奇怪的反模式

```
var something = function() { ... } 
```

不如

```
function something() { ... } 
```

没有理由使用`var`声明代替`function`声明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:05:48.927

你需要明白两点：

1) JavaScript 不会`this`像 Java 那样自动插入，因此`first()`调用只会通过词法范围查找 的定义`first`，它不会查看`this`对象。因此，调用`first()`应该可以工作，但`this`会绑定到您可能期望的其他内容`first`。

2) 构造函数中的局部变量不会成为构造对象的成员。

# r - 您如何在 R 中拟合具有 AR(1) 随机效应相关结构的线性混合模型？

> ID：11952776
> 
> 赞同：0
> 
> 时间：2012-06-29T19:48:53.757
> 
> 标签：r

我正在尝试使用 R 重新运行其他人的项目，因此我们需要在 R 中使用一些宏。

这里有一个非常基本的问题：

`m1.nlme = lme(log.bp.dia ~ M25.9to9.ma5iqr + temp.c.9to9.ma4iqr + o3.ma5iqr + sea_spring + sea_summer + sea_fall + BMI + male + age_ini, data=barbara.1.clean, random = ~ 1|study_id)`

由于该模型在 SAS 中使用 AR(1) [自相关 1 协方差模型] 进行人内方差，因此我不确定如何在 R 中执行此操作。

我在哪里可以看到不同模型的索引，比如非结构化？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T20:18:03.920

我不知道不同模型的“索引”是什么意思，但是要为残差指定 AR(1) 协方差结构，您可以添加`corr=corAR1()`到 lme 调用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:10:26.327

滞后 $1$ 处的相关性为 $r$，其中 $-1< r <1$ 对于固定 $AR(1)$ 模型。滞后 $k \geq 1$ 处的相关性为 $r^k$。这只需乘以 $X_t$ 的方差即可得到自协方差矩阵。

# r - Schur factorization to find Unitary matrix?

> ID：11952783
> 
> 赞同：1
> 
> 时间：2011-11-11T18:12:42.313
> 
> 标签：r, matlab, matrix

After performing the Schur factorization using function Schur in library 'Matrix', how do I find the associated unitary matrix in R?

I can do this in MATLAB with the function Schur (documentation [here](http://www.mathworks.com/help/techdoc/ref/schur.html)), however, the Schur package in R only provides the triangular in the Schur factorization = $$ U * T * U' $$

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-11-11T19:46:08.960

Looking at the docs for the "Matrix" package, I noticed that the 'Schur' class has a slot for `Q`, which is the 'Square *orthogonal* "Matrix"' associated with the decomposition. So you want to do:

```
Sch.A <- Schur(A);
U <- Sch.A@Q 
```

This is mildly confusing because they quote the decomposition as $A = Q^{\top} T Q$, which is perhaps why you missed it.

# iphone - 更改 NSString 中的 html 标签

> ID：11952788
> 
> 赞同：2
> 
> 时间：2012-08-14T12:59:55.670
> 
> 标签：iphone, html, objective-c, ios, ipad

例如我有 html 字符串：

```
<p>
    <img mce_src="http://example.com/apple.png" src="http://example.com/apple.png" width="512" height="512" style="">
    <br mce_bogus="1">
</p> 
```

如何更改此属性：`width="512" height="512"`例如：`width="123" height="123"`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:03:34.483

你可以使用

```
- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target 
                                        withString:(NSString *)replacement 
```

你的例子中的 html`htmlString`

```
htmlString = [htmlString stringByReplacingOccurrencesOfString:@"width=\"512\""
                                     withString:@"width=\"123\""]; 
```

**编辑：**

使用正则表达式替换（未测试）：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(.*width=\").*?(\".*?height=\").*?(\".*)"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

NSString *modifiedString = [regex stringByReplacingMatchesInString:htmlString
                                                           options:0
                                                             range:NSMakeRange(0, [htmlString length])
                                                      withTemplate:@"$1<insert width here>$2<insert height here>$3"]; 
```

参考： [NSRegularExpression](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:34:29.007

您应该使用正则表达式并尝试使用[RegexKitLite](http://regexkit.sourceforge.net/RegexKitLite/)库。

```
NSString *regex = @"(=\"[0-9]+\")";

NSString *replaced = [htmlString stringByReplacingOccurrencesOfRegex:regex usingBlock:^NSString *(NSInteger captureCount, NSString * const capturedStrings[captureCount], const NSRange capturedRanges[captureCount], volatile BOOL * const stop) {
  return(@"123");
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:23:58.010

只需将您的html放在字符串中并使用for循环创建一个函数，并在出现 **宽度**和**高度**时计算其长度和位置，然后用新数据替换它......我这样做了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-05T18:40:14.537

在 img 标签内添加新的 width 和 height 属性

```
NSError *regexError = nil;
    NSRegularExpressionOptions options = 0;

    NSString *pattern = @"(img)";
    NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:pattern options:options error:&regexError];

    wihoutWidth = [expression stringByReplacingMatchesInString:wihoutWidth
                                                       options:0
                                                         range:NSMakeRange(0,wihoutWidth.length)
                                                  withTemplate:@"$1 width=293 height=150"];
    return wihoutWidth; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T00:24:11.733

如何使用此代码替换宽度？我还想在 $1 中插入一个字符串或一个数字

NSError *error = NULL; NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(. *width=\").* ?(\". *?height=\").* ?(\".*)" 选项：NSRegularExpressionCaseInsensitive 错误：&error];

NSString *modifiedString = [regex stringByReplacingMatchesInString:htmlString options:0 range:NSMakeRange(0, [htmlString length]) withTemplate:@"$1$2$3"];

# android - Android中的屏幕导航

> ID：11952789
> 
> 赞同：0
> 
> 时间：2012-08-14T12:59:59.540
> 
> 标签：android, android-intent

我认为这可能是一个冷酷的问题，而且我在 android 中没有太多深入的知识，所以只发布这个问题。考虑我有 2 个屏幕屏幕 A 和屏幕 B。在 A 中我有一个微调器，如果用户选择任何来自微调器的 1 个值我正在重定向到 B。这正常工作。但是当用户从 A 中选择微调器的任何值时，它会产生一种错觉，即它将进入屏幕 A，然后进入屏幕 BI 不知道这不能被改变。

我的代码：

```
 s1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() 
              {
                  public void onItemSelected(AdapterView<?> s2, View arg1,
                            int pos, long id) 
                  {               
                      if(!s1.getItemAtPosition(pos).equals("No recurrence"))
                      {

 Intent intent=new Intent(getApplicationContext(),IncomeStartDate.class);
                      startActivityForResult(intent, 1);    
    }
    }
    } 
```

请发表你的想法..提前谢谢..

# r - 按时间间隔聚合

> ID：11952792
> 
> 赞同：2
> 
> 时间：2012-07-16T12:35:43.133
> 
> 标签：r, time-series

我想分析 R 中的一些测量数据

```
> head(data)
                 Time     Val
1 2011-12-01 10:11:21      20
2 2011-12-01 10:11:24       0
3 2011-12-01 10:11:24      30
4 2011-12-01 10:11:25       0
5 2011-12-01 10:11:29      80
6 2011-12-01 10:13:31       0 
```

我对 Zoo 和 as.Date 都进行了实验，但没有一个能回答以下问题：

1.  如何绘制一天 24 小时内每分钟的直方图？
2.  如何计算和绘制每一天的平均值（不是一个月中的一天，而是一天中的一天）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:25:30.047

`?aggregate`在和上获得帮助`?cut.Date`。

就像是：

```
aggregate (z, format (index (z), "%M"), sum) 
```

和

```
aggregate (z, cut (as.Date (index (z)), breaks="day"), mean) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:39:11.413

plyr 包非常适合这项任务。这里有一些指南：http: [//plyr.had.co.nz](http://plyr.had.co.nz) 您应该为要分别分析的每个时期分配一个因子变量的值 - 我不知道捷径，所以你可以尝试将 substr() 应用于您的 Time 变量。然后使用 plyr 对每个组应用不同的函数（如 mean()）。对于绘图，您可以使用来自同一作者或格子的 ggplot 包。

# java - 'public static void main(String[] args)' 中的'String args[]' 和 static 的解释

> ID：11952804
> 
> 赞同：52
> 
> 时间：2012-08-14T13:00:30.587
> 
> 标签：java, main

**您如何向初学者**很好地解释以下摘录中的含义`String args[]`和用法？`static`

```
class FirstApp {
    public static void main(String[] args) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2015-02-11T14:33:24.997

我会分手

```
public static void main(String args[]) 
```

部分：

> `public`
> 
> 这意味着您可以从当前所在类的外部调用此方法。这是必要的，因为此方法正在由不在您当前类中的 Java 运行时系统调用。

* * *

> `static`
> 
> 当 JVM 调用 main 方法时，被调用的类不存在对象，因此它必须具有静态方法才能允许从类调用。

* * *

> `void`
> 
> Java 是独立于平台的语言，如果它会返回一些值，那么该值对于不同的平台可能意味着不同的东西。还有其他方法可以在多线程系统上退出程序。[详细解释](https://stackoverflow.com/questions/540396/why-is-main-in-java-void)。

* * *

> `main`
> 
> 这只是方法的名称。此名称是固定的，因为它被 JVM 称为应用程序的入口点。

* * *

> `String args[]`
> 
> 这些是您的 Java 应用程序在运行时接受的 String 类型的参数。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-14T13:11:03.543

我会将初学者指向[有关 Main 功能的 Wiki 文章](http://en.wikipedia.org/wiki/Entry_point#Java)，然后用它来补充它。

*   Java 仅开始运行具有特定`public static void main(String[] args)`签名的程序，并且可以将签名想象为他们自己的名字——这就是 Java 可以区分别人的签名和真实的签名的`main()`方式`main()`。

*   `String[] args`是`String`s的集合，用空格隔开，可以在终端输入程序。很多时候，初学者不会使用这个变量，但它总是在那里以防万一。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-07-11T18:08:50.147

```
public static void main(string [] args) 
```

`public`-它的访问说明符意味着我们可以从任何地方访问它； `static`-access 修饰符意味着我们可以直接使用类名调用此方法，而无需创建它的对象； `void`- 它的返回类型； `main`- 方法名称 `string [] args`- 它只接受字符串类型的参数......并将其存储在字符串数组中

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-17T12:58:50.477

*   `public`：它是一个访问说明符，这意味着它将被公开访问。
*   `static`：它是访问修饰符，这意味着当加载 java 程序时，它将自动在内存中创建空间。
*   `void`：它是一个返回类型，即它不返回任何值。
*   `main()`: 它是一个方法或函数名。
*   `string args[]`：它是一个命令行参数，它是字符串格式的变量集合。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-14T13:41:09.863

如果我要向某人解释这一点，我会说我们稍后再讨论，您需要知道运行程序的方法是使用：

```
public static void main(String[] args) {
        ...
    } 
```

假设他/她知道数组是什么，我会说 args 是一个参数数组，你可以展示一些很酷的例子。

然后，在您了解了一些关于 Java/JVM 之类的东西之后，您最终会接触到修饰符，也就是 static 和 public。

然后你可以花一些时间谈论这些恕我直言的含义。

您可以提及其他“很酷”的东西，例如可以在更高版本的 Java 中使用的可变参数。

```
public static void main(String ...args) {
        //...
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T13:09:25.223

为了保持初学者的态度，您可以解释所有命令行都自动拆分为一个字符串数组（the `String[]`）。

因为`static`你必须解释，它不是一个像另一个字段：它在 JVM 中是唯一的，即使你有数千个类的实例

静态也是如此`main`，因为它是在`jar`.

在你看过编码之后，你的工作就开始了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-11T15:04:22.580

我只是想我会参与这个。不过，其他人已经很好地回答了。

完整的主要方法声明应该是：

```
 public static void main(final String[] args) throws Exception {

 } 
```

args 被声明为 final，因为从技术上讲，它们不应被更改。它们是用户给定的控制台参数。

您通常应该指定 main throws Exception 以便可以轻松地将堆栈跟踪回显到控制台，而无需执行 e.printStackTrace() 等。

至于数组语法。我更喜欢这种方式。我想这有点像法语和英语之间的区别。在英语中是“a black car”，在法语中是“a car black”。哪个是重要的名词，汽车还是黑色？

我不喜欢这种事情：

```
String blah[] = {}; 
```

这里重要的是它是一个字符串数组，所以它应该是

```
String[] blah = {}; 
```

废话只是一个名字。我个人认为在 Java 中有时可以以这种方式声明数组是一个错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T07:25:26.373

静态的正常用法是直接访问函数而不创建任何对象。与在 java main 中相同，我们无法为该类创建任何对象来调用 main 方法。它将自动执行。如果我们想手动执行，我们可以在类内使用 main() 并从类外使用 ClassName.main 来调用。

# java - 将数据放入 null Map

> ID：11952806
> 
> 赞同：0
> 
> 时间：2012-08-14T13:00:34.547
> 
> 标签：java, collections, map

我在 Java 中偶然发现了这个奇怪的东西。在编码时，我不小心忘记实例化地图。在将数据放入其中时，一切都没有错误，但是在获取它们时，我得到了明显的 NullPointerException。这是我使用的代码片段：

```
public class Loader {
   private static Map<String, Object> map;
   public static load() {
       //...
       // read lines and put them into map
       map.put(line, new Object()); // <-- NO ERROR
       //...
   }

   public static parse(){
       //...
       for(...){
           map.get(key); //<-- ERROR on map (NullPointerException)
       }
       //...
   }
} 
```

提供的代码是存根，主要目的是演示奇怪的地图行为。那么为什么可以将数据插入null呢？我正在使用 Java *1.6.0_29*。

请注意此代码是完整的，地图未在其他任何地方初始化；代码是完整的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:03:21.027

简而言之，你不能这样做。相反，我怀疑在某个地方抛出的异常`map.put()`被*吞没*了，而你没有看到它。

例如

```
try {
    (new Loader).load();
}
catch (Exception e) {
   // swallowed with no info here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:03:49.557

此代码不完整...或者，您可能正在运行代码的先前编译版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:22:54.130

我觉得很笨。正如@assylias 指出的那样，发生放置的代码永远不会执行。它在 for-each 循环中非常深入，由于之前的错误而没有执行。我感到惭愧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:54:17.050

这可能是您正在使用的 IDE 或 JDK 的问题，也可能是您的代码，因为当我尝试复制您的案例时，在编译时抛出了 java.lang.Error 异常，并显示本地变量映射不是初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:48:40.473

要么“map”被实例化，要么“put”行不可达。

# iphone - 如何查找 UIViewController 处于活动或非活动 iPhone 应用程序中？

> ID：11952809
> 
> 赞同：0
> 
> 时间：2012-08-14T13:00:41.583
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, badge

我在基于 tabBar 的 iPhone 应用程序中工作。

*   我在标签栏控制器中有 5 个 UIViewControllers。
*   在我的应用程序中，我使用了 APNS。收到 APNS 后，我想在`UIViewController`4 中更新数据。
*   如果用户在`UIViewController`1、2、3 和 5 中工作，我想更新`UIViewController`4 中的数据并显示徽章。
*   我刷新并更新了 UIViewController 4 中的数据，但如果用户不在 4 中，我想显示徽章`UIViewController`。
*   如果用户目前在`UIViewController`4 我不想显示徽章。

我如何从其他人那里找到另一个`UIViewController`处于活动状态或不活动状态`UIViewController`？

**编辑**

我尝试了下面的代码来获取 UITabBarController 的 selectedIndex。

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSLog(@"%d", appDelegate.tabBarController.selectedIndex); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:06:05.450

由于您正在使用 a`UITabBarController`您可以轻松地询问当前选择的选项卡，这应该会导致活动视图控制器。尝试方法： [selectedViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBarController/selectedViewController)或 [selectedIndex](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBarController/selectedIndex)

# r - 是否可以轻松地从先前计算的统计数据中绘制箱线图（在 R 中？）

> ID：11952819
> 
> 赞同：11
> 
> 时间：2012-05-03T18:55:58.250
> 
> 标签：r, data-visualization, boxplot

> **可能重复：**
> [在给定 25、50、75 个百分位数以及最小值和最大值的情况下，在 R 中绘制 bloxplots](https://stackoverflow.com/questions/11129432/draw-bloxplots-in-r-given-25-50-75-percentiles-and-min-and-max-values)

我有许多来自各种数据集的汇总统计数据集：最大值、最小值、平均值、中位数等。我想绘制这些的箱线图 - 或者至少，类似于箱线图的图（我没有 UQ 和LQ 统计数据，尽管有可能获得这些数据）。

我没有原始数据，所以我不能只使用 R 中的`boxplot`函数。当你只有汇总统计数据时，在 R 中是否有一种简单的方法可以做到这一点？如果没有，是否有一种简单的方法可以使用另一个免费工具来做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-03T19:43:33.623

R 中的 boxplot 函数使用一个名为 bxp 的低级函数，它接受汇总统计信息。一个简单的例子（下胡须=1，第一个四分位数=2，中位数=3，第三个四分位数=4，上胡须=5）如下所示：

```
summarydata<-list(stats=matrix(c(1,2,3,4,5),5,1), n=10)
bxp(summarydata) 
```

如果您想了解更多关于 bxp 接受作为输入的数据结构，请查看一些虚拟数据的高级箱线图函数的返回值，即尝试

```
sd<-boxplot(dummydata)
str(sd) 
```

# android - 捕获或拍摄照片并将其放入 GridView 或图库中

> ID：11952821
> 
> 赞同：5
> 
> 时间：2012-08-14T13:01:14.237
> 
> 标签：android, gridview, camera, gallery, photos

我已经编写了打开Android相机的代码，拍照并保存到手机图库。

我想将拍摄的每张照片添加到照片的 GridView 或我要创建的画廊：

```
public class Upload extends Activity {
    private static final int IMAGE_CAPTURE = 0;
    private Button startBtn;
    private Uri imageUri;
    private ImageView imageView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.upload_layout);
    imageView = (ImageView)findViewById(R.id.img);
    startBtn = (Button) findViewById(R.id.startBtn);
    startBtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            startCamera();
        }
    });
}

public void startCamera() {
    Log.d("ANDRO_CAMERA", "Starting camera on the phone...");
    String fileName = "testphoto.jpg";
    ContentValues values = new ContentValues();
    values.put(MediaStore.Images.Media.TITLE, fileName);
    values.put(MediaStore.Images.Media.DESCRIPTION,
            "Image capture by camera");
    values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");
    imageUri = getContentResolver().insert(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
    startActivityForResult(intent, IMAGE_CAPTURE);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == IMAGE_CAPTURE) {
        if (resultCode == RESULT_OK){
            Log.d("ANDRO_CAMERA","Picture taken!!!");
            imageView.setImageURI(imageUri);
        }
    }
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<Button android:text="Start Camera"
    android:id="@+id/startBtn"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
</Button>

<ImageView
    android:id="@+id/img"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ImageView>

<Gallery
    android:id="@+id/gallery1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

# c - 不知道为什么程序崩溃

> ID：11952822
> 
> 赞同：-3
> 
> 时间：2012-08-14T13:01:15.873
> 
> 标签：c, crash

我编写了一个代码来查找第 n 个丑数（一个至少有一个大于 5 的素因子的数字），其中 n 是给定的输入。如果用户输入小于 240 的值，我的程序运行良好。但如果输入大于该值，程序就会崩溃！我的问题是，如果这是一个耗时的问题，那么它应该需要时间，但为什么程序会崩溃？我在任何地方都使用过 double 所以它可能不是可变容量的问题！我的代码如下：

```
#include<stdio.h>
#include<math.h>
double primes[1000]={2,3,5};
int serial=3;
double next_prime()
{
    double f=primes[serial-1]+2;
    int count;
    for(count=1;primes[count]<=(sqrt(f)+1) && count<serial;count++){
        if(fmod(f,primes[count])==0){
            f+=2;
            count=1;
        }
    }
    return primes[serial++]=f;
}
int main()
{
    double ugly_serial=12,ugly_number=16,j;
    int c,count,loop,input;
    scanf("%d",&input);
    while(ugly_serial<input)
    {
        loop=0;
        for(c=3;primes[c-1]<=sqrt(ugly_number);c++){
            j=next_prime();
        }
        for(count=3;count<c;count++){
            if(fmod(ugly_number,primes[count])==0){
               loop=1;
                break;
            }
        }
        if(loop==0){ugly_serial++;}
        ugly_number++;
    }
    printf("%.0lf",ugly_number);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:15:32.037

我已经编译并运行了你的代码。该程序适用于我尝试过的所有输入，包括 56565。

您确定您正在运行您的程序的最新编译版本吗？

# database - DDL和VDL的区别

> ID：11952829
> 
> 赞同：2
> 
> 时间：2012-08-14T13:01:36.203
> 
> 标签：database, ddl

什么是*视图定义语言*？

*数据定义语言*和*视图定义语言*有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-22T09:04:47.170

视图定义语言是一种用于指定用户界面的语言。据我了解，是 SQL 或其他数据库中的语句检索数据并将其显示给用户。

您可以在此链接中阅读更多内容 [https://www.it.uu.se/research/project/ikaros/vdl.pdf](https://www.it.uu.se/research/project/ikaros/vdl.pdf)

数据定义语言或数据描述语言 (DDL) 是一种类似于计算机编程语言的语法，用于定义数据结构，尤其是数据库模式。换句话说，它的目的是定义数据如何存储（不显示）的语句，如 CREATE、ALTER、DROP、TRUNCATE 等。

你可以在这里阅读更多： [http ://en.wikipedia.org/wiki/Data_definition_language](http://en.wikipedia.org/wiki/Data_definition_language)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-09T17:41:47.647

DBMS 支持多种用户并提供适当的语言和界面或每一类用户。

**数据定义语言（DDL）：**该语言用于定义数据结构和特别是数据库模式。这些语句用于创建、更改或删除数据结构。ALTER、CREATE、DROP 是 DDL 的一些示例。

**视图定义语言 (VDL)：**此语言用于指定用户视图及其到概念模式的映射。它定义了用户类别可用的记录子集。它创建虚拟表，并且视图像概念级别一样向用户显示。它指定用户界面。

# google-maps - GMaps：延迟加载多个标记

> ID：11952836
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:01:53.960
> 
> 标签：google-maps, geocoding

我有大约 100 个地址（标记），纬度/经度未知。大约 10 个标记后，地理编码需要很长时间。有什么办法可以加快速度吗？不保存纬度/经度值？在 GMap v3 或 v2.

也许 bing 地图或 Open Street Map 更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:07:23.497

> 有什么办法可以加快速度吗？

不可以。速率限制和配额是为了防止您滥用服务。付费许可证可能会给您更高的限制（但我不这么认为）。

> 不保存纬度/经度值？

更快地对地址进行地理编码的唯一方法是创建自己的地理编码器或支付访问非 Google 地理编码器的费用，我对非 Google 免费地理编码器没有任何经验。美国有免费的代码和数据（免费数据的质量低于谷歌的）。其他国家会更贵。

最好的解决方案是离线对地址进行地理编码，并使用生成的坐标来显示标记。

> 在 GMap v3 或 v2 中。

v2 API 的正式生命还剩不到一年，不推荐用于新的开发。

# r - 记录替换函数时的 S4method 错误

> ID：11952842
> 
> 赞同：2
> 
> 时间：2012-08-14T13:02:12.013
> 
> 标签：r, function, namespaces, documentation

我想在 R 中记录一个替换函数，但是当我运行 R CMD 检查时，我收到以下错误消息：

```
Bad \usage lines found in documentation object 'timestamps':
  <unescaped bksl>S4method{"timestamps<-"}{.MoveTrack}(this, value)

Functions with \usage entries need to have the appropriate \alias
entries, and all their arguments documented.
The \usage entries must correspond to syntactically valid R code. 
```

文档如下所示：

```
\name{timestamps}

\alias{timestamps}
\alias{timestamps,.MoveTrack-method}
\alias{timestamps,.MoveTrackSingle-method}
\alias{"timestamps<-",.MoveTrack-method}

\docType{methods}

\title{Extract the timestamps of a Move or MoveStack object}

\description{The timestmaps method returns or sets the timestamps of a track from a Move or MovesStack object.}

\usage{
\S4method{timestamps}{.MoveTrackSingle}(this)
\S4method{timestamps}{.MoveTrack}(this)
\S4method{"timestamps<-"}{.MoveTrack}(this, value)
}

\arguments{
  \item{this}{Move or MoveStack object}
  \item{value}{timestamps from class POSIXct}
} 
```

实际功能如下：

```
setGeneric("timestamps", function(this) standardGeneric("timestamps"))
setMethod("timestamps", ".MoveTrack",
   function(this) {
      this@timestamps
   })

setMethod("timestamps", ".MoveTrackSingle",
          function(this) {
            this@timestamps
          })

setGeneric("timestamps<-", function(this, value) standardGeneric("timestamps<-"))
setReplaceMethod("timestamps", ".MoveTrack",
   function(this, value) {
      this@timestamps <- value
      this
   }) 
```

我搜索了错误消息，但我发现的只是 Roxygen 文档，这对我没有帮助。我还尝试了不同的文档样式，例如：

```
\S4method{"timestamps<-"}{.MoveTrack}(this, value)
\S4method{"timestamps<-."}{.MoveTrack}(this, value)
\S4method{"timestamps<-$"}{.MoveTrack}(this, value)
\S4method{'timestamps<-'}{.MoveTrack}(this, value)
\S4method{timestamps<-}{.MoveTrack}(this, value)
\S4method{"timestamps\<\-"}{.MoveTrack}(this, value)
\S4method{"timestamps\\<\\-"}{.MoveTrack}(this, value) 
```

但他们都没有工作。任何的想法？提前非常感谢。最好的，马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:06:49.420

尝试

```
\S4method{timestamps}{.MoveTrack}(this) <- value 
```

在第二个 {} 中以逗号分隔列表的形式进行多次调度。

# cordova - windows phone save base64 to png (in an Cordova/Phonegap app)

> ID：11952843
> 
> 赞同：2
> 
> 时间：2012-08-14T13:02:14.297
> 
> 标签：cordova, png, base64, windows-phone

I'm writing an app that merges images on a canvas element and then saves it to disk. Got this working in iOS and android but I can't find anything on how I can convert a base64 string to png ( or jpg, bmp dont really care...) and save it to the file system.

I'm using cordova 1.7 and the windows phone 7.1 sdk.

Any help would be greatly appreciated.

Thanks

# sockets - Control a raw socket from a web interface

> ID：11952845
> 
> 赞同：0
> 
> 时间：2012-08-14T13:02:19.813
> 
> 标签：sockets, tomcat, webserver, jetty

I have an microprocessor which I can control through a raw tcp socket. I can control the device through a desktop application, but I now want to be able to control it via the web. I've done lots of reading but I'm struggling to find the best method to do this. So far it seems creating a socket server in a webserver such as Tomcat or Jetty is the best option. When the user clicks a button the command is then sent to the micro processor. Is this a viable approach or are there better methods?

It is important that the system is very responsive, in other words, when the user clicks a button on the web page, the microprocessor must receive it as soon possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:32:36.677

imo ...分开你的担忧

首先编写代码，以通常有用的方式使用微处理器实现您想要的行为，然后插入您想要的任何类型的控制器，无论是网页、junit 测试、命令行界面等等。

# php - PHP + Wordpress：每隔n次foreach重复html结构

> ID：11952846
> 
> 赞同：0
> 
> 时间：2012-08-14T13:02:27.773
> 
> 标签：php, wordpress, loops, foreach, repeat

我试图在 foreach 循环中使用以下结构来实现结果，在每两个图像之后它将重复整个结构。

我对可以使用的东西有一些基本知识，例如。计数器++；并且比 %2 但不知道语法以及如何将其用于我的代码。

```
<?php
    function dt_attached($postid=0, $size='thumbnail', $attributes='', $linksize='full', $count=-1) {
        if ($postid<1) $postid = get_the_ID();
        if ($images = get_children(array(
            'post_parent' => $postid,
            'post_type' => 'attachment',
            'numberposts' => $count,
            'post_mime_type' => 'image',)))

            foreach($images as $image) {
                $attachment=wp_get_attachment_image_src($image->ID, 'thumbnail');
                $small_image = wp_get_attachment_image_src($image->ID, 'midium');
                $big_image = wp_get_attachment_image_src($image->ID, 'full');
                ?>

                <div class="mainrow">

                    <div class="block">
                        <a href='<?php echo $big_image[0]; ?>' class='cloud-zoom-gallery' title='Thumbnail 1' rel="useZoom: 'zoom1', smallImage: '<?php echo $small_image[0]; ?>' ">
                            <img src="<?php echo $attachment[0]; ?>" <?php echo $attributes; ?> />
                        </a>
                    </div>

                    <!--[I want to get two images in mainrow]-->
                    <div class="block">
                        <a href='<?php echo $big_image[0]; ?>' class='cloud-zoom-gallery' title='Thumbnail 1' rel="useZoom: 'zoom1', smallImage: '<?php echo $small_image[0]; ?>' ">
                            <img src="<?php echo $attachment[0]; ?>" <?php echo $attributes; ?> />
                        </a>
                    </div>

                </div>

                <?php //the_attachment_link($image->ID, false, true, false); ?>
        <?php }
    }
?> 
```

所以我想要的是，如果有两个以上的图像，它将重复整个 html 结构。非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:09:33.830

我从您的评论中收集到的是，您希望每行显示两个图像，如果有一个额外的图像，则在最后一行显示一个占位符。

您所需要的只是计算有多少图像，以及它是偶数还是奇数。然后，一旦你知道你在最后一张图像（使用递增计数器），你添加占位符：

您的代码*不做*的是在一行中放置两个图像。为此，我们还需要取`%`计数器的模 ( )。

```
<?php
$counter = 0;
$imgCount = count($images);

foreach ($images as $image) {
    $attachment  = wp_get_attachment_image_src($image->ID, 'thumbnail');
    $small_image = wp_get_attachment_image_src($image->ID, 'midium');
    $big_image   = wp_get_attachment_image_src($image->ID, 'full');

    if ($counter % 2 == 0): ?>
    <div class="mainrow">
    <?php endif; ?>

        <div class="block">
            <a href='<?php echo $big_image[0]; ?>' class='cloud-zoom-gallery' title='Thumbnail 1' rel="useZoom: 'zoom1', smallImage: '<?php echo $small_image[0]; ?>' ">
                <img src="<?php echo $attachment[0]; ?>" <?php echo $attributes; ?> />
            </a>
        </div>

    <?php if ($counter++ % 2 == 1): ?>
    </div>
    <?php endif; ?>

    <?php //the_attachment_link($image->ID, false, true, false); ?>
<?php
}

// Since (if there are an odd number of images) the loop may not close the <div>, 
// we have to make sure it does.
if ($counter % 2 == 0) {
    ?>
    <!-- placeholder goes here -->
    </div>
<?php
} 
```

# php - Separating email server and application server

> ID：11952847
> 
> 赞同：0
> 
> 时间：2012-08-14T13:02:37.890
> 
> 标签：php, email, pear, mail-server

I have been assigned a task to separate email server and application server. I have little knowledge of server. I am using PHP. Earlier I use to send using phpmailer class. Now I have been asked to implement using PEAR and separating email server and application server. I have been told that we need to provide only the IP of the email server from the application server while sending email from the application server. Please suggest me I don't know how to proceed with it. Thanks in advance

# r - For-loop error and min 2.5% and max 97.5% percentile in R

> ID：11952849
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:02:39.167
> 
> 标签：r, for-loop, percentile

I have a data set with 41 rows and 21 columns. In DF, each row represents energy data in 15 minute interval of the day (from 10am-8pm). each column represents selected days within a month month.

I need to figure out load variability (standard deviation/ mean) b/w two lines in each column using the following equation.

![http://i.stack.imgur.com/inOKV.jpg](../Images/0859385372226faae18c997b562ff6ed.png)

I.e, between the 1st and 2nd; 1st, 2nd and 3rd; 1st-4th; 1st-5th; etc. element of each column.

I keep getting NA values in "lv" and wonder why. The end result, lv should have a dataframe of 41x21, same as df but with load variability.

Also, how do I also get 2.5 and 97.5 percentiles within the loop other than load variability?

```
x <- df[1:41,1:21]

#calculate load variability 
count = 0
i=1{
for (i in 1:41){
     count = count+1  
     mean = sum (x[1:l,])/count
     diff = ((x-mean)^2)
     lv= sqrt((diff/(count+1)-1)/mean)
         i = i+1
  }
}
lv 
```

lv ends up with null values (NA).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:18:43.680

If you want to calculate sd/mean for each row, try:

```
apply(x, 1, sd)/rowMeans(x) 
```

If you want the 2.5% and 97.5% confidence level for each row try:

```
apply(x, 1, quantile, c(.025, 0.975)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:10:13.323

好的，经过几次尝试（以及[这个问题](https://stackoverflow.com/questions/2765374/efficient-calculation-of-matrix-cumulative-standard-deviation-in-r)的一些帮助），我终于有了：

```
cumul_loading <- function(x, leave.nan=FALSE){
  ind_na <- !is.na(x)
  nn <- cumsum(ind_na)
  x[!ind_na] <- 0

  cumul_mean <- cumsum(x) / nn
  cumul_sd <- sqrt(cumsum(x^2) / (nn-1) - (cumsum(x))^2/(nn-1)/nn)

  if(leave.nan) return(cumul_sd / cumul_mean) else 
    return((cumul_sd / cumul_mean)[-1])
} 
```

它应该有一些错误（例如如何处理 NA），但它现在应该可以与`apply`函数一起使用。`leave.nan`参数可选地留下产生的 NaN时`n_len - 1 = 0`

```
apply(x, 2, cumul_loading) 
```

# css - CSS - Make SPAN extend to end of its container / fill empty space?

> ID：11952852
> 
> 赞同：13
> 
> 时间：2012-08-14T13:02:57.363
> 
> 标签：css, css-float, width, html

I have the following HTML layout for a website (powered by Network Solutions nsCommerceSpace) I am designing a theme for:

```
<div id="ctl00_breadcrumb" class="breadcrumb">
   <span id="ctl00_breadcrumbContent">
      <span><a href="/">[Name of Webstore]</a></span>
      <span>&nbsp;&gt;&nbsp;</span>
      <span><a href="/page.aspx">Page</a></span>
      <span>&nbsp;&gt;&nbsp;</span>
      <span>Here is a very long title of a product that is causing me much frustration because it jumps out of place.</span>
   </span>
</div> 
```

The span tags with `<span>&nbsp;&gt;&nbsp;</span>` in them are automatically generated to separate each item.

Here is a Fiddle of my problem: [http://jsfiddle.net/5fvmJ/](http://jsfiddle.net/5fvmJ/)

Is there a way I can make the last SPAN tag fill the empty space, and just end when it hits the right side? I would just use `overflow: hidden;` to hide the extra text.

Any ideas? I know having all SPAN's makes this tough, but it's built-in functionality of the site that I cannot change.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T14:16:02.093

我想我找到了一个纯 CSS 解决方案。你只错过了两件事：

*   您只能`display: inline-block`在`<span>`没有 的标签中使用`float: left`，因为浮动实际上与 inline-block 元素相矛盾。
*   你必须`white-space: nowrap`在 parent中使用`<div>`。

这样你就不需要为任何东西指定宽度。:)

### JSFiddle 演示

[http://jsfiddle.net/yz9TK/](http://jsfiddle.net/yz9TK/)

### CSS

（我稍微清理了一下）

```
@import url(https://fonts.googleapis.com/css?family=Open+Sans);

body {
    background: #212121;
    color: #FFF;
}

#ctl00_breadcrumb {
    height: 45px;
    width: 960px;
    background-color: #707070;
    line-height: 45px;
    font-size: 16px;
    font-family: Helvetica, sans-serif;
    border-radius: 10px;
    border: 1px solid #585858;
    text-shadow: 0px -1px 0px rgba(0,0,0,0.5);
    -webkit-box-shadow:  0px 0px 15px 0px rgba(0, 0, 0, .75);
    box-shadow:  0px 0px 15px 0px rgba(0, 0, 0, .75);
    white-space: nowrap;
    overflow: hidden;
}

#ctl00_breadcrumbContent span {
    display: inline-block;
    padding: 0px 10px;
    line-height: 45px;
    font-size: 18px;
    font-family: Helvetica, sans-serif;
}

#ctl00_breadcrumbContent span a { 
    padding: 0;
    margin: 0;
    color: #FFF;
    text-decoration: none;
    line-height: 45px;
    font-size: 18px;
    font-family: Helvetica, sans-serif;
}

#ctl00_breadcrumbContent span:nth-child(even) {
    width: 0;
    height: 0;
    padding: 0;
    margin: -22px -4px -16px -4px;
    overflow: hidden;
}

#ctl00_breadcrumbContent span:nth-child(1) { 
    border-radius: 10px 0px 0px 10px;
    background-color: #404040;
}

#ctl00_breadcrumbContent span:nth-child(2) {
    border-top: 22px solid #505050;
    border-bottom: 23px solid #505050;
    border-left: 15px solid #404040;
}

#ctl00_breadcrumbContent span:nth-child(3) {
    background-color: #505050;
}

#ctl00_breadcrumbContent span:nth-child(4) { 
    border-top: 22px solid #606060;
    border-bottom: 23px solid #606060;
    border-left: 15px solid #505050;
}

#ctl00_breadcrumbContent span:nth-child(5) {
    background-color: #606060;
}

#ctl00_breadcrumbContent span:nth-child(6) { 
    border-top: 22px solid #707070;
    border-bottom: 23px solid #707070;
    border-left: 15px solid #606060;
}

#ctl00_breadcrumbContent span:nth-child(7) { 
    background-color: #707070;
}

#ctl00_breadcrumbContent span:nth-last-child(1) {
    background-color: #707070;
}

#ctl00_breadcrumbContent span:nth-last-child(2) {
    border-top: 22px solid #707070;
    border-bottom: 23px solid #707070;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T17:50:00.463

这个跨度类为我做了诀窍......

```
span.empty_fill {
    display:block;
    overflow:hidden;
    width:100%;
    height:100%;
} 
```

基本上是这样使用的...

```
<div class='banner'><a href='/'><span class='empty_fill' /></a></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:19:21.333

Two different kind of answers, both not great:

1.  [http://jsfiddle.net/5fvmJ/14/](http://jsfiddle.net/5fvmJ/14/): Set a `max-width` for the last span, to make sure that the background doesn't jump. You should then make sure that the text doesn't fall out.

2.  Without any width changing, get the text dimensions, and only display the substring with `...` appended, which stays inside the bar: [http://jsfiddle.net/5fvmJ/19/](http://jsfiddle.net/5fvmJ/19/). You should do that dynamically. ( [Calculate text width with JavaScript](https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:20:26.003

Try styling the span with `display:block` EX:

`<span style="display:block"> Here is a... </span>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T10:36:50.517

您无需指定宽度。只需添加 'display:block; 浮动：无；' 到 CSS 类。如果您不喜欢从新行开始的超出文本，可以选择添加“溢出：隐藏”。

# unix - How to check if the variable value in AWK script is null or empty?

> ID：11952854
> 
> 赞同：53
> 
> 时间：2012-08-14T13:03:01.420
> 
> 标签：unix, awk

1.  I am using **AWK** script to process some logs.
2.  At one place I need to check if the variable value is **null** or **empty** to make some decision.

Any Idea how to achieve the same?

```
awk '

{
    {
       split($i, keyVal, "@")
       key=keyVal[1];
       val=keyVal[2];
       if(val ~ /^ *$/)
       val="Y";

    }

}

' File 
```

I have tried with

```
1) if(val == "")

2) if(val ~ /^ *$/) 
```

not working in both cases.

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-14T13:06:24.403

与的比较`""`应该有效，所以这有点奇怪

作为另一种选择，您可以使用该`length()`函数，如果为零，则您的变量为空/空。例如，

```
if (length(val) == 0) 
```

另外，也许内置变量`NF`（字段数）可以派上用场？由于我们无权访问您的输入数据，因此很难说，但还有另一种可能性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-08-24T14:41:51.327

您可以直接使用变量而不进行比较，考虑空/空/零值`false`，其他一切都是`true`。

看这里 ：

```
# setting default tag if not provided
if (! tag) {
        tag="default-tag"
} 
```

因此，此脚本将具有`tag`带有值的变量，`default-tag`除非用户这样调用它：

```
$ awk -v tag=custom-tag -f script.awk targetFile 
```

这是真实的：GNU Awk 4.1.3，API：1.1（GNU MPFR 3.1.4，GNU MP 6.1.0）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-14T13:15:14.883

它对我来说很好用

```
$ awk 'BEGIN{if(val==""){print "null or empty"}}'
null or empty 
```

您无法区分变量为空和空，当您访问“未设置”变量时，awk 只是用默认值初始化它（这里是`""`- 空字符串）。您可以使用某种解决方法，例如，在访问变量时将`val_accessed`变量设置为`0`然后设置为`1`。或更简单的方法（有点“hackish”）将 val 设置为`"unitialized"`（或运行程序时无法出现的其他值）。

PS：你的脚本对我来说看起来很奇怪，嵌套括号是做什么用的？

# android - Can't dismiss my custom Dialog

> ID：11952855
> 
> 赞同：0
> 
> 时间：2012-08-14T13:03:05.960
> 
> 标签：android, dialog

The dialog:

```
public class ClearDialog extends Dialog {

    private MainActivity context;

    public ClearDialog(MainActivity context) {
        super(context);
        this.context = context;
        setContentView(R.layout.clear_dialog);
        setTitle("something");
        setCanceledOnTouchOutside(false);
        setCancelable(true);
    }
    /* not overriding anymore
    @Override
    public void onBackPressed() {
        return;
    }
    still doesnt work */

    @Override
    protected void onStart() {
        super.onStart();
        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);
        SharedPreferences.Editor editor = preferences.edit();
        editor.clear();
        editor.commit();
        ResourceHelpers.removeAllResources();
        context.onResourcesDeleted();
    }

} 
```

The Activity:

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.itemLogoff:
            loginDialog.show(); //this is another dialog
            break;
        case R.id.itemSync:
            Intent syncer = new Intent(MainActivity.this, SyncActivity.class);
            MainActivity.this.startActivity(syncer);
            break;
        case R.id.itemClear:
            new AlertDialog.Builder(this)
            .setIcon(R.drawable.ic_action_alert)
            .setTitle("something")
            .setMessage("something")
            .setPositiveButton("something", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    showDeleteDialog();
                }
            })
            .setNegativeButton("something", null)
            .show();
            break;
        }
        return true;
    }

    private void showDeleteDialog() {
        cd = new ClearDialog(this); //this is the dialog
        cd.show();
    }

    public void onResourcesDeleted() {

        cd.dismiss();
        loginDialog.show();
    } 
```

So.. The user clicks on "Delete all data" from the ActionBar (optionsmenu). I open an AlertDialog asking if he's sure. Then if he's sure, I open a dialog that shows a spinning `ProgressBar`.

The problem: it won't dismiss!

The loginDialog (all data is lost so I want the user to login again...) comes up in the background. The ClearDialog won't dismiss...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:08:12.053

I think that the problem is here (don't override in this way that method):

```
@Override
    public void onBackPressed() {
        return;
    } 
```

You can already obtain a modal dialog with .setCancelable(false)

Please take a loog at this documentation: [http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:17:03.103

为对话提供以下属性 .setCancelable(true);

就像代码中的 .setTitle() 或 .setMessage 一样......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:24:09.753

除了您应该遵循的 StErMi 的答案之外，还要在 onResourcesDeleted() 方法中切换两行。登录对话框被调用，并在你的解雇被调用之前接管。

```
public void onResourcesDeleted() {
    cd.dismiss();
    loginDialog.show();
} 
```

# spring - Are Spring's @Autowired object reused?

> ID：11952858
> 
> 赞同：3
> 
> 时间：2012-08-14T13:03:12.817
> 
> 标签：spring, dependency-injection

And if they are, How to stop that?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T13:09:59.720

这取决于被注释`scope`的对象。`bean`如果它是有范围的`singleton`，那么它在 Spring 中的任何地方都将使用相同的实例`ApplicationContext`。如果它是 scope `prototype`，那么将在每个位置使用一个新实例。

```
<bean id="id" class="some.NewObject" scope="prototype"/>
<bean id="id2" class="some.AnotherNewObject" scope="singleton"/> 
```

这些 bean 定义加上以下代码将有助于说明。

```
class Class1 {
    @Autowired
    some.AnotherNewObject obj;
}

class Class2 {
    @Autowired
    some.AnotherNewObject obj;
}

class Class3 {
    @Autowired
    some.NewObject obj;
}

class Class4 {
    @Autowired
    some.NewObject obj;
} 
```

`Class1`并将`Class2`收到对同一实例的引用`some.AnotherNewObject`。 `Class3`并将`Class4`收到对不同实例的引用`some.NewObject`。

如果您使用注解和包扫描进行配置，那么您可以使用`@Scope`注解来指定您的范围：

```
@Component
@Scope("prototype")
class NewObject {
    ...
}

@Component
@Scope("singleton")
class AnotherNewObject {
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:17:31.777

```
@Service
@Scope("prototype")
public class CustomerService 
{} 
```

# php - 从 for 循环输出数据

> ID：11952862
> 
> 赞同：0
> 
> 时间：2012-08-14T13:03:33.297
> 
> 标签：php

你能帮我从这个for循环中获取数据吗？它实际上应该打印 3 个月的名称，如果我不在那里使用 $ period 变量而是使用 echo 来代替它。但我想将值放入 $period 变量中，这样我就可以在脚本中的其他位置使用它。现在，它只打印了一个月。

```
for ($i=1; $i<=3; $i++)
  {
  $period = '<option value="">';
  $period .= date('F, Y', strtotime('+'.$i.' month'));
  $period .= '</option>';
  }         

  echo $period; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:04:08.923

您将在每次迭代中覆盖 $period 的值。试试下面的代码：

```
$period = "";
for ($i=1; $i<=3; $i++)
{
    $period .= '<option value="">';
    $period .= date('F, Y', strtotime('+'.$i.' month'));
    $period .= '</option>';
}         

echo $period; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:04:50.870

您需要在`$period`每次迭代时输出您的值。

```
for ($i=1; $i<=3; $i++)
{
    $period = '<option value="">';
    $period .= date('F, Y', strtotime('+'.$i.' month'));
    $period .= '</option>';
    echo $period;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:17:37.723

试试这个：

```
$numPeriods = 3;
$period = '';

for($i=1; $i<=$numPeriods; $i++)
{
    $period .= '<option value="'.$i.'">';
    $period .= date('F, Y', strtotime('+'.$i .' month'));
    $period .= '</option>';
} 

echo $period; 
```

# c# - PrimaryScreen.Bounds.Height is not the full screen

> ID：11952865
> 
> 赞同：1
> 
> 时间：2012-08-14T13:03:37.713
> 
> 标签：c#, winforms

I have a windows form. I'm setting it's size using the following code. My desired behaviour is to have it take the full width and half the height of the primary display.

```
this.Location = new Point(0, 0);
this.WindowState = FormWindowState.Normal;
this.Size = new System.Drawing.Size(Screen.PrimaryScreen.Bounds.Width,Screen.PrimaryScreen.Bounds.Height / 2); 
```

The problem is there is a space on the right form (it's not taking up the full screen). Does anyone have any suggestions as to why?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:14:01.403

尝试使用

```
Screen.PrimaryScreen.WorkingArea 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T02:41:56.763

使其全屏的两种方法：

```
// maximize the form
this.WindowState = FormWindowState.Maximized; 
```

或者

```
// hide the border
this.FormBorderStyle = FormBorderStyle.None; 
```

你可以一起尝试，但要[注意顺序](https://stackoverflow.com/questions/6054457/c-sharp-fullscreen-hiding-the-taskbar?answertab=active#tab-top)，先隐藏边框，然后将窗口状态设置为最大化。

# android - I want my app to be installed only in tablet

> ID：11952868
> 
> 赞同：2
> 
> 时间：2012-08-14T13:03:40.920
> 
> 标签：android

I have an android application. I need to upload in the android market. I have developed this app in "Honeycomb".This app is only for android tablets. *I designed the layouts for tablets only (600x1024).* I want this app to install only in tablets from android market and not in android phones. I really don't know how to do this..? Do i have to check programmatically..? if so, how to do that..? **My intention is that only tablets can install my app..! Please share your valuable suggestions..!**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:06:00.213

你没试过这个 -

```
<supports-screens
        android:largeScreens="true"
        android:normalScreens="false"
        android:requiresSmallestWidthDp="600"
        android:smallScreens="false"
        android:xlargeScreens="true" />

 <uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="14" /> 
```

看看[这个](https://stackoverflow.com/a/10540882/940096)。有一篇来自 android 开发者页面的好文章。[支持屏幕元素](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)和[屏幕支持](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:07:11.843

将此添加到您的清单文件中。

```
<supports-screens
        android:largeScreens="true"
        android:normalScreens="false"
        android:requiresSmallestWidthDp="600"
        android:smallScreens="false"
        android:xlargeScreens="true" />

 <uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="14" /> 
```

在这里查看更多详细信息。 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:13:03.497

有两种（好的）方法可以做到这一点。

一种方法是在代码中添加一些变量

[设计一个仅限安卓平板电脑的应用程序](https://stackoverflow.com/questions/10540646/designing-an-android-tablet-only-app)

优点： - 如果有新平板电脑，易于处理

缺点：-也许该应用程序将显示给每台设备（但并非每台设备都可以安装）

另一种方法是在市场中限制它

[如何将 android 应用程序限制为特定设备品牌？](https://stackoverflow.com/questions/9510649/how-to-restrict-android-app-to-specific-device-make)

优点： - 选择您想要或不想要的每个设备

缺点： - 新设备将可用，因此您必须对其进行更新

还有一些其他的方法，也有另一种。但我现在不记得了。

希望可以帮助你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:06:45.503

我不知道您是否可以绝对排除手机/小型设备，但值得一试：http: [//developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

# c# - Can't we use StringComparison in HashSet?

> ID：11952869
> 
> 赞同：0
> 
> 时间：2012-08-14T13:03:42.540
> 
> 标签：c#

C# 3.5: I can't get this code to compile:

```
HashSet<string> classDeclarations = new HashSet<string>(StringComparison.InvariantCultureIgnoreCase); 
```

I get this error:

> *Argument 1: cannot convert from 'System.StringComparison' to 'System.Collections.Generic.IEqualityComparer'*

So I can't pass a comparison?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:05:03.733

`StringComparison`是许多与字符串相关的函数使用的枚举。
由于`HashSet<T>`与字符串无关，因此采用`StringComparison`.

您需要使用`StringComparer`实现`IEqualityComparer<String>`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T13:06:09.513

你需要这样做

```
HashSet<string> myHashSet = new HashSet<string>(StringComparer.InvariantCultureIgnoreCase); 
```

# javascript - Icon Arrow position in Twitter Bootstrap - Collapse Plugin

> ID：11952871
> 
> 赞同：1
> 
> 时间：2012-08-14T13:03:44.817
> 
> 标签：javascript, twitter-bootstrap, collapse

I have a special request on my table collapse. When i click on the icon arrow down I need it going on the bottom of the div .accordion-group and not staying in the middle as in the Example. I hope that explanation is clear.

How can i achieve that?

Look the example

[http://jsfiddle.net/STqCF/70/](http://jsfiddle.net/STqCF/70/)

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:17:50.587

只需在向上箭头和向下箭头类上注册单个点击事件。它们需要是实时处理程序（使用 JSON 的“on”），因为代码运行后类会发生变化。

```
$('.icon-arrow-down').on('click', function() { move it to the bottom; });
$('.icon-arrow-up').on('click', function() { move it to the top; }); 
```

# google-app-engine - 带有 GWT 的 GAE 数据存储，使密钥更友好/更小

> ID：11952874
> 
> 赞同：1
> 
> 时间：2012-08-14T13:03:49.397
> 
> 标签：google-app-engine, gwt, jpa, google-cloud-datastore

我目前正在使用 GWT、GAE 并使用 JPA 作为我的 ORM。我有一个问题，GAE 生成的密钥太大而无法在带有 RequestFactory 的移动设备上使用。由于转换为 String 时 ID/KEY 的大小，小列表中的数据量非常大。

我使用字符串作为我的密钥，以便我可以处理继承。

```
 @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  @Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")  
  protected String key; 
```

这会创建一个非常长的键，例如“agxzbWFydGJhcnNpdGVyFAsSDUVzdGFibGlzaG1lbnQYuAIM”，并且由于在键中存储对象类型和父级而变得更大。

我需要一种方法来创建一个较小的唯一 ID，但仍然能够在 GAE 中处理继承。我尝试将 Long 作为 @Id/key，但由于 String/Key 键中内置的关系，我无法在我的对象上使用 @OneToMany 关系。

另一种选择是为每个类创建一个序列并为该 id 使用 Long 属性。下面有一个示例，但我不确定如何在应用引擎中处理生成的长序列。

@GeneratedValue private Long friendlyClassSpecificKey;

任何意见，将不胜感激。如果除了对我感兴趣的每个类类型使用序列之外还有其他选择，但如果没有，是否有为特定类创建序列（不是@ID）的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:13:35.347

我为较小的键想出了一个很好的解决方案。我认为干净地做到这一点的最好方法是将 jpa/jdo 2 用于具有无主关系的应用程序引擎。这样，您可以仅使用它们的类型从 (Long) id 获取密钥，而不必使用父关系。

这是基本 datstore 对象，请注意我正在使用应用程序引擎密钥。

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class DatastoreObject {

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Key key;

  public Long getId() {
    return key.getId();
  }

} 
```

此类将使用 jpa 2 中支持的 @Unowned 属性，以便清单的密钥不包含父机构密钥。否则，您还必须传递父 id 并将其解析为基于类型的键。这是因为在拥有关系中，子键也包含父键。

```
@Entity
public class Establishment extends DatastoreObject {

    @Unowned
    @OneToOne(cascade = CascadeType.ALL)
    private Inventory inventory;

} 
```

然后在我的 dao 基类中，我使用该类

```
public class DaoBase<T extends DatastoreObject> {

protected Class<T> clazz;

    @SuppressWarnings("unchecked")
    public DaoBase() {
        clazz = (Class<T>) ((ParameterizedType) getClass()
                .getGenericSuperclass()).getActualTypeArguments()[0];
    }

    /**
     * Find an object by it's shortened long id
     * @param id
     * @return
     * @throws EntityNotFoundException
     */
    public T find(Long id) {
        if (id == null) {
            return null;
        }
        EntityManager em = ThreadLocalPersistenceManager.getEntityManager();

        Key key = getKey(id);

        T obj = em.find(clazz, key);
        return obj;
    }

    protected Key getKey(Long id) {
        return KeyFactory.createKey(clazz.getSimpleName(), id);
    }
} 
```

# c# - 防止数字字符串值降低其十进制精度的更有效方法

> ID：11952879
> 
> 赞同：1
> 
> 时间：2012-08-14T13:04:04.497
> 
> 标签：c#, .net, performance

我有一个程序，它输出从 3rd 方应用程序接收的字符串值列表。

已提出要求最终用户希望看到所有小数精度级别保持在其设置的最高级别。由于每个新值都会覆盖最后一个值，因此无需向后应用，只需向前应用即可。

因此，如果它达到 3 个精度级别，那么之后它应该保持在该级别。例如。如果收到的值是：1、15、15.2、4.25、1.111、3.4、1，那么输出将是：

1、15、15.2、4.25、1.111、3.400、1.000

我编写了以下代码来完成这项工作，但对我来说似乎不是很优雅。性能在这里也很重要，因为可能会有 100 个样本出现，所以这不会影响性能。事实上，如果确定这会导致应用程序明显变慢，则可能会放弃该要求。

```
 int numberOfDecimals = 0;

    private string FormatValueToMinimumNumberOfDecimals(string value)
    {            
            decimal doubleValue;                

            if (decimal.TryParse(value, out doubleValue))
            {
                int numberOfDecimals = this.CountDecimalPlace(doubleValue);
                if (this.numberOfDecimals > numberOfDecimals)
                {
                    value = doubleValue.ToString(String.Format("N{0}", this.numberOfDecimals.ToString()));
                }
                else
                {
                    this.numberOfDecimals = numberOfDecimals;
                }
            }

        return value;
    }

    private int CountDecimalPlace(decimal val)
    {
        int decimalCount = 0;
        decimal ten = 10;
        while (val != Math.Floor(val))
        {
            val *= ten;
            decimalCount++;
        }
        return decimalCount;
    } 
```

所以问题是任何人都可以想到更好/更快的方法吗？

此外，如果提供的工作解决方案有任何明显的问题，请随时指出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:17:44.063

要从字符串中获取小数位数，请使用`IndexOf`：

```
var sep = NumberFormatInfo.CurrentInfo.CurrencyDecimalSeparator; 
var pos = val.IndexOf(sep); 
var pre = (pos == -1) ? 0 : val.Length - pos - 1; 
```

要从十进制类型中获取精度，请使用`Decimal.GetBits`：

```
var pre = (Decimal.GetBits(val)[3] >> 16) & 0x000000FF; 
```

此外，您可以使用 NumberFormatInfo 代替`String.Format()`.

```
NumberFormatInfo nfi = new NumberFormatInfo();
nfi.NumberDecimalDigits = this.numberOfDecimals;
value = doubleValue.ToString("N", nfi); 
```

# python - 使用最少内存/cpu 对 3D 数据网格进行矩阵运算

> ID：11952888
> 
> 赞同：1
> 
> 时间：2012-08-14T13:04:21.040
> 
> 标签：python, arrays, performance, memory

问题设置：我有一个大小为 n1,n2,n3=nx,ny,nz 的 3D（空间）数据网格，对于 a 或 b，可能 nz=1。该网格中的每个点具有每个网格点大小为 NDIM（通常 = 4）的数据向量 (a) 和每个网格点大小为 NDIMxNDIM 的另一个矩阵 (b)。我想为内存和 CPU 最有效地计算（每点）诸如 ab 或 ba 之类的东西。

本质上，我想[在 python 中概括 A loopless 3D matrix multiplication](https://stackoverflow.com/questions/5344843/a-loopless-3d-matrix-operation-in-python)。我似乎有一个有效的结果。但我不明白。搜索 google 和 stackoverflow 没有任何帮助。请解释并进一步概括！谢谢！

```
import numpy as np
# gives a.b per point:
nx=5
ny=8
nz=3
a = np.arange(nx*ny*nz*4).reshape(4, nx,ny,nz)
b = np.arange(nx*ny*1*4*4).reshape(4, 4, nx,ny,1)
ctrue=a*0.0
for ii in np.arange(0,nx):
    for jj in np.arange(0,ny):
        for kk in np.arange(0,nz):
           ctrue[:,ii,jj,kk] = np.tensordot(a[:,ii,jj,kk],b[:,:,ii,jj,0],axes=[0,1])

c2 = (a[:,None,None,None] * b[:,:,None,None,None]).sum(axis=1).reshape(4,nx,ny,nz)
np.sum(ctrue-c2)
# gives 0 as required

# gives b.a per point:
ctrue2=a*0.0
for ii in np.arange(0,nx):
    for jj in np.arange(0,ny):
        for kk in np.arange(0,nz):
                ctrue2[:,ii,jj,kk] = np.tensordot(a[:,ii,jj,kk],b[:,:,ii,jj,0],axes=[0,0])

btrans=np.transpose(b,(1,0,2,3,4))
c22 = (a[:,None,None,None] * btrans[:,:,None,None,None]).sum(axis=1).reshape(4,nx,ny,nz)
np.sum(ctrue2-c22)
# gives 0 as required

# Note that only the single line for c2 and c22 are required -- the rest of the code is for testing/comparison to see if that line works.

# Issues/Questions:
# 1) Please explain why those things work and further generalize!
# 2) After reading about None=np.newaxis, I thought something like this would work:
    c22alt = (a[:,None,:,:,:] * btrans[:,:]).sum(axis=1).reshape(4,nx,ny,nz)
    np.sum(ctrue2-c22alt)
# but it doesn't.
# 3) I don't see how to avoid assignment of a separate btrans.  An np.transpose on b[:,:,None,None,None] doesn't work. 
```

其他相关链接： [Numpy: Multiplying a matrix with a 3d tensor -- Suggestion](https://stackoverflow.com/questions/4490961/numpy-multiplying-a-matrix-with-a-3d-tensor-suggestion) [How to use numpy with 'None' value in Python?](https://stackoverflow.com/questions/962343/how-to-use-numpy-with-none-value-in-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:57:53.243

首先，您的代码非常复杂。产品`a.b`和`b.a`可以简化为：

```
c2 = (a * b).sum(axis=1)
c22 = (a * b.swapaxes(0, 1)).sum(axis=1) 
```

请注意，`np.sum(ctrue - c2)`您应该使用`np.all(ctrue == c2)`;而不是 如果这两种方法恰好给出相同和的结果，则前者可能会给出错误的结果！

为什么这行得通？考虑一个元素：

```
a0 = a[:, 0, 0, 0]
b0 = b[:, :, 0, 0, 0] 
```

取张量点`np.tensordot(a0, b0, axes=(0, 1))`等价于`(a0 * b0).sum(axis=1)`。这是因为广播；的`(4, )`形状`a0`被广播到的`(4, 4)`形状，`b0`并且数组按元素相乘；`1`然后在轴上求和给出张量点。

对于其他点积，`np.tensordot(a0, b0, axes=(0, 0))`相当于`(a0 * b0.T).sum(axis=1)`where `b0.T`is same as `b0.transpose()`which is the same as `b0.swapaxes(0, 1)`。通过转置`b0`，`a0`有效地对着另一个轴进行广播`b0`；我们可以通过 得到相同的结果`(a0[:, None] * b0).sum(axis=0)`。

NumPy elementwise 操作的伟大之处在于，只要它们的形状对应或可以广播，您就可以完全忽略更高的轴，因此适用于`a0`并且`b0`（大部分）适用于`a`和`b`同样适用的方法。

最后，我们可以使用[Einstein summation](http://en.wikipedia.org/wiki/Einstein_notation)更清楚地说明这一点：

```
c2 = np.einsum('i...,ji...->j...', a, b)
c22 = np.einsum('i...,ij...->j...', a, b) 
```

# facebook - 如何标记随机好友上传图片

> ID：11952889
> 
> 赞同：0
> 
> 时间：2012-08-14T13:04:22.587
> 
> 标签：facebook, api, tags

我想知道当我使用此代码显示图像时如何标记随机朋友此代码打开相册并上传图像。

如果这里有人可以帮助我改变什么，并添加代码”

谢谢

```
<?php
    require 'facebook.php';
    $facebook = new Facebook(array(
        'appId'  => '',
        'secret' => '',
        'cookie' => true,
    ));

    $user = $facebook->getUser();
    if ($user) {
        $facebook->setFileUploadSupport(true);

        //Create an album
        $album_details = array(
            'message'=> 'Album desc',
            'name'=> 'Album name'
        );
        $create_album = $facebook->api('/me/albums', 'post', $album_details);

        //Get album ID of the album you've just created
        $album_uid = $create_album['id'];

        //Upload a photo to album of ID...
        $photo_details = array(
            'message'=> 'Photo message'
        );
        $file='images/logo.jpg'; //Example image file
        $photo_details['image'] = '@' . realpath($file);

        $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details);
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:55:52.243

根据[文档](http://developers.facebook.com/docs/reference/api/photo/#tags)，我向您的脚本添加了代码

```
<?php
define('COUNT_FRIENDS', '10');

require 'facebook.php';
$facebook = new Facebook(array(
    'appId'  => '',
    'secret' => '',
    'cookie' => true,
));

$user = $facebook->getUser();
if ($user) {
    $facebook->setFileUploadSupport(true);

    //Create an album
    $album_details = array(
        'message'=> 'Album desc',
        'name'=> 'Album name'
    );
    $create_album = $facebook->api('/me/albums', 'post', $album_details);

    //Get album ID of the album you've just created
    $album_uid = $create_album['id'];

    //Upload a photo to album of ID...
    $photo_details = array(
        'message'=> 'Photo message'
    );
    $file='images/logo.jpg'; //Example image file
    $photo_details['image'] = '@' . realpath($file);

    $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details);

    /*
    *  Make tags on photo
    */
    $photo_id = $upload_photo['id'];

    /*
    * Get friends info from FB
    */
    $result = $fb_app->api('/me/friends');

    $friend_uids = array();
    if($result && $result['data']){
       foreach($result['data'] as $friend){
          $friend_uids[] = $friend['id'];
       }
    }

    /*
    * Choose random friends UID's
    */
    $rand_keys = array_rand($friend_uids, COUNT_FRIENDS);
    foreach($rand_keys as $key){
       $friends[] = $friend_uids[$key];
    }

    foreach($friends as $friend_uid){
        $tag_params = array(
            'to'       => $friend_uid,
            'tag_text' => 'Sample tag text',
            'x'        => 0,
            'y'        => 0
        );
        $result = $facebook->api('/' . $photo_id . '/tags', 'POST', $tag_params);
    }
}
?> 
```

只需实现返回 UID 列表的函数“getRandomFriends()”。

# c - c 发送和接收文件

> ID：11952898
> 
> 赞同：16
> 
> 时间：2012-08-14T13:04:52.827
> 
> 标签：c, sockets, sendfile

这是服务器（发送文件）部分：

```
offset = 0;
for (size_to_send = fsize; size_to_send > 0; ){
  rc = sendfile(newsockd, fd, &offset, size_to_send);
  if (rc <= 0){
    perror("sendfile");
    onexit(newsockd, sockd, fd, 3);
  }
  offset += rc;
  size_to_send -= rc;
}
close(fd); /* la chiusura del file va qui altrimenti rischio loop infinito e scrittura all'interno del file */

memset(buffer, 0, sizeof(buffer));
strcpy(buffer, "226 File Successfully transfered\n");
if(send(newsockd, buffer, strlen(buffer), 0) < 0){
  perror("Errore durante l'invio 226");
  onexit(newsockd, sockd, 0, 2);
}
memset(buffer, 0, sizeof(buffer)); 
```

这是客户端（recv 文件）部分的一部分：

```
 fsize_tmp = fsize;
    sInfo.filebuffer = malloc(fsize);
  if(sInfo.filebuffer == NULL){
    perror("malloc");
    onexit(sockd, 0, fd, 4);
  }

  while(((uint32_t)total_bytes_read != fsize) && ((nread = read(sockd, sInfo.filebuffer, fsize_tmp)) > 0)){
    if(write(fd, sInfo.filebuffer, nread) != nread){
            perror("write RETR");
            onexit(sockd, 0, 0, 1);
        }
        total_bytes_read += nread;
        fsize_tmp -= nread;
    }
  close(fd); /* la chiusura del file va qui altrimenti client entra in loop infinito e si scrive all'interno del file */

    memset(buffer, 0, sizeof(buffer));
    if(recv(sockd, buffer, 34, 0) < 0){
    perror("Errore ricezione 226");
    onexit(sockd, 0, 0, 1);
  }
  printf("%s", buffer);
  memset(buffer, 0, sizeof(buffer));
  memset(dirpath, 0, sizeof(dirpath));
  free(sInfo.filebuffer); 
```

问题是字符串*“226 File etc etc”*写**在**已发送的文件中。
我试图做一个小调试，所以我`printf`在 for 循环（服务器`printf`发送文件）和 while 循环（客户端）之后添加了一个，我注意到文件已发送但在客户端它没有因为`printf`没有打印，所以暂时退出...
为什么我会出现这种奇怪的行为？
br>

**编辑：**
服务器使用以下代码将文件大小发送给客户端：

```
 fd = open(filename, O_RDONLY);
    if(fd < 0){
    error!!
    }

    if(fstat(fd, &fileStat) < 0){
        perror("Errore fstat");
        onexit(newsockd, sockd, fd, 3);
    }
    fsize = fileStat.st_size;
    if(send(newsockd, &fsize, sizeof(fsize), 0) < 0){
      perror("Errore durante l'invio della grandezza del file\n");
      onexit(newsockd, sockd, fd, 3);
     } 
```

客户端使用以下代码从服务器接收 fsize：

```
if(read(sockd, &fsize, sizeof(fsize)) < 0){
    perror("Errore durante ricezione grandezza file\n");
    onexit(sockd, 0 ,0 ,1);
}
fd = open(sInfo.filename, O_CREAT | O_WRONLY, 0644);
if (fd  < 0) {
    perror("open");
    onexit(sockd, 0 ,0 ,1);
}
fsize_tmp = fsize; 
```

两者都`fsize`被声明为`uint32_t`...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-15T07:19:49.300

试试这个代码：

客户端：

```
/* Client code */
/* TODO : Modify to meet your need */
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <netinet/in.h>

#define PORT_NUMBER     5000
#define SERVER_ADDRESS  "192.168.1.7"
#define FILENAME        "/home/toc/foo.c"

int main(int argc, char **argv)
{
        int client_socket;
        ssize_t len;
        struct sockaddr_in remote_addr;
        char buffer[BUFSIZ];
        int file_size;
        FILE *received_file;
        int remain_data = 0;

        /* Zeroing remote_addr struct */
        memset(&remote_addr, 0, sizeof(remote_addr));

        /* Construct remote_addr struct */
        remote_addr.sin_family = AF_INET;
        inet_pton(AF_INET, SERVER_ADDRESS, &(remote_addr.sin_addr));
        remote_addr.sin_port = htons(PORT_NUMBER);

        /* Create client socket */
        client_socket = socket(AF_INET, SOCK_STREAM, 0);
        if (client_socket == -1)
        {
                fprintf(stderr, "Error creating socket --> %s\n", strerror(errno));

                exit(EXIT_FAILURE);
        }

        /* Connect to the server */
        if (connect(client_socket, (struct sockaddr *)&remote_addr, sizeof(struct sockaddr)) == -1)
        {
                fprintf(stderr, "Error on connect --> %s\n", strerror(errno));

                exit(EXIT_FAILURE);
        }

        /* Receiving file size */
        recv(client_socket, buffer, BUFSIZ, 0);
        file_size = atoi(buffer);
        //fprintf(stdout, "\nFile size : %d\n", file_size);

        received_file = fopen(FILENAME, "w");
        if (received_file == NULL)
        {
                fprintf(stderr, "Failed to open file foo --> %s\n", strerror(errno));

                exit(EXIT_FAILURE);
        }

        remain_data = file_size;

        while ((remain_data > 0) && ((len = recv(client_socket, buffer, BUFSIZ, 0)) > 0))
        {
                fwrite(buffer, sizeof(char), len, received_file);
                remain_data -= len;
                fprintf(stdout, "Receive %d bytes and we hope :- %d bytes\n", len, remain_data);
        }
        fclose(received_file);

        close(client_socket);

        return 0;
} 
```

服务器端：

```
/* Server code */
/* TODO : Modify to meet your need */
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <netinet/in.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/sendfile.h>

#define PORT_NUMBER     5000
#define SERVER_ADDRESS  "192.168.1.7"
#define FILE_TO_SEND    "hello.c"

int main(int argc, char **argv)
{
        int server_socket;
        int peer_socket;
        socklen_t       sock_len;
        ssize_t len;
        struct sockaddr_in      server_addr;
        struct sockaddr_in      peer_addr;
        int fd;
        int sent_bytes = 0;
        char file_size[256];
        struct stat file_stat;
        int offset;
        int remain_data;

        /* Create server socket */
        server_socket = socket(AF_INET, SOCK_STREAM, 0);
        if (server_socket == -1)
        {
                fprintf(stderr, "Error creating socket --> %s", strerror(errno));

                exit(EXIT_FAILURE);
        }

        /* Zeroing server_addr struct */
        memset(&server_addr, 0, sizeof(server_addr));
        /* Construct server_addr struct */
        server_addr.sin_family = AF_INET;
        inet_pton(AF_INET, SERVER_ADDRESS, &(server_addr.sin_addr));
        server_addr.sin_port = htons(PORT_NUMBER);

        /* Bind */
        if ((bind(server_socket, (struct sockaddr *)&server_addr, sizeof(struct sockaddr))) == -1)
        {
                fprintf(stderr, "Error on bind --> %s", strerror(errno));

                exit(EXIT_FAILURE);
        }

        /* Listening to incoming connections */
        if ((listen(server_socket, 5)) == -1)
        {
                fprintf(stderr, "Error on listen --> %s", strerror(errno));

                exit(EXIT_FAILURE);
        }

        fd = open(FILE_TO_SEND, O_RDONLY);
        if (fd == -1)
        {
                fprintf(stderr, "Error opening file --> %s", strerror(errno));

                exit(EXIT_FAILURE);
        }

        /* Get file stats */
        if (fstat(fd, &file_stat) < 0)
        {
                fprintf(stderr, "Error fstat --> %s", strerror(errno));

                exit(EXIT_FAILURE);
        }

        fprintf(stdout, "File Size: \n%d bytes\n", file_stat.st_size);

        sock_len = sizeof(struct sockaddr_in);
        /* Accepting incoming peers */
        peer_socket = accept(server_socket, (struct sockaddr *)&peer_addr, &sock_len);
        if (peer_socket == -1)
        {
                fprintf(stderr, "Error on accept --> %s", strerror(errno));

                exit(EXIT_FAILURE);
        }
        fprintf(stdout, "Accept peer --> %s\n", inet_ntoa(peer_addr.sin_addr));

        sprintf(file_size, "%d", file_stat.st_size);

        /* Sending file size */
        len = send(peer_socket, file_size, sizeof(file_size), 0);
        if (len < 0)
        {
              fprintf(stderr, "Error on sending greetings --> %s", strerror(errno));

              exit(EXIT_FAILURE);
        }

        fprintf(stdout, "Server sent %d bytes for the size\n", len);

        offset = 0;
        remain_data = file_stat.st_size;
        /* Sending file data */
        while (((sent_bytes = sendfile(peer_socket, fd, &offset, BUFSIZ)) > 0) && (remain_data > 0))
        {
                fprintf(stdout, "1\. Server sent %d bytes from file's data, offset is now : %d and remaining data = %d\n", sent_bytes, offset, remain_data);
                remain_data -= sent_bytes;
                fprintf(stdout, "2\. Server sent %d bytes from file's data, offset is now : %d and remaining data = %d\n", sent_bytes, offset, remain_data);
        }

        close(peer_socket);
        close(server_socket);

        return 0;
} 
```

**编辑**：添加该人关于`offset`

发送文件的手册页说：

> 如果 offset 不为 NULL，则它指向一个保存文件偏移量的变量，sendfile() 将从该文件偏移量开始从 in_fd 读取数据。
> **当 sendfile() 返回时，此变量将设置为读取的最后一个字节之后的字节的偏移量**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:50:36.970

客户端不知道文件何时结束。它只是继续读取，直到它收到`fsize`字节。在您当前的实现中，客户端仅适用于完全为`fsize`字节的文件。

我建议您更改协议并添加包含文件大小的标头。为什么不使用http协议？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:53:38.013

我认为您应该提供更详细的代码，至少包含使用的变量声明和初始化。

客户端部分如何获得 fsize 值？

您还应该像这样检查 while 条件：

```
while(((uint32_t)total_bytes_read < fsize) && ( ..... 
```

不要使用“ **!=** ”，因为如果（由于未知原因）total_bytes_read 变得大于 fsize，您将陷入无限循环，直到套接字连接关闭（并且 read 返回错误）。

我还认为（但不确定）您应该在客户端部分使用**recv**而不是**read**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:03:57.053

您应该始终确定您作为协议的一部分发送的文件大小，例如，您可以在实际发送之前将文件大小作为前 4 个（或更多，取决于您希望处理的文件大小）字节发送溪流。

如果您希望使用恒定大小的文件，您的实现应该可以工作，在这种情况下，请为 fsize 和 total_bytes_read 添加打印。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:24:41.720

您使用的`sendfile`API 不正确。由于您在第三个参数中传递了一个非 NULL 值，因此`sendfile`将为您更新偏移量。`sendfile`但是因为您的发送循环也在更新偏移量，所以在无法在一次调用中发送整个文件的情况下，您将跳过一些字节。

从[手册页](http://linux.die.net/man/2/sendfile)：

> 如果`offset`不为 NULL，则它指向一个保存文件偏移量的变量，`sendfile()`将从中开始读取数据`in_fd`。返回时`sendfile()`，此变量将设置为读取的最后一个字节之后的字节的偏移量。

您应该从发送循环中删除这一行：

```
 offset += rc; 
```

**编辑：** ~~在您的更新中，您使用从文件`fpl`中获取`fstat`信息，但在您的`sendfile`代码中，您使用`fd`. 我会确保这些是你所期望的。~~（这在另一个更新中得到了修复。）无论如何，我已经[使用您提供的代码（以及我建议的修复）编写了一个测试程序](http://pastebin.com/ZpCSNnND)，并且它似乎可以在小于 2KB 的文件和 3MB 的文件中正常工作。

# android - 摩托罗拉的麦克风无法静音

> ID：11952899
> 
> 赞同：1
> 
> 时间：2012-08-14T13:04:55.273
> 
> 标签：android, microphone, android-audiomanager

我正在做一个安卓项目。我想在舔按钮时将麦克风设置为静音。使用此代码：

```
AudioManager audioManager = ((AudioManager) getApplicationContext().getSystemService(Context.AUDIO_SERVICE));
audioManager.setMicrophoneMute(true); 
```

一切正常，**除了摩托罗拉**。

在 morotola 上，麦克风未设置为静音。有人可以给我一个建议吗？

### 编辑

我找到了这个：

```
Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
buttonUp.putExtra(Intent.EXTRA_KEY_EVENT,new KeyEvent(KeyEvent.ACTION_UP,KeyEvent.KEYCODE_MUTE));
getBaseContext().sendOrderedBroadcast(buttonUp,"android.permission.CALL_PRIVILEGED"); 
```

现在如何使用此代码取消静音呼叫？

# php - 使用 PHP 获取域（无 TLD）

> ID：11952907
> 
> 赞同：0
> 
> 时间：2012-08-14T13:05:08.480
> 
> 标签：php

> **可能重复：**
> [从 URL 获取子域](https://stackoverflow.com/questions/288810/get-the-subdomain-from-a-url)

我看过有关使用 parse_url 获取 www.domain.tld 的帖子，但我怎样才能使用 php 获取“域”？

我目前有这个正则表达式

```
$pattern = '@https?://[a-z]{1,}\.{0,}([a-z]{1,})\.com(\.[a-z]{1,}){0,}@'; 
```

但这仅适用于 .com，我需要它适用于所有 TLD（.co.uk、.com、.tv 等）

有没有可靠的方法来做到这一点，我不确定正则表达式是否是最好的方法？或者可能在“。”上爆炸。但是子域又会搞砸了。

**编辑**

所以期望的结果是

```
$url = "https://stackoverflow.com/questions/11952907/get-domain-without-tld-using-php#comment15926320_11952907";

$output = "stackoverflow"; 
```

做更多的研究会有人建议使用 parse_url 获取 www.domain.tld 然后使用 explode 获取域吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:10:40.427

Try this regex :

```
#^https?://(www\.)?([^/]*?)(\.co)?\.[^.]+?/# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:12:20.160

您可以使用该`parse_url`功能。医生在[这里](http://php.net/manual/en/function.parse-url.php)。

就像是：

```
$url = 'http://username:password@hostname/path?arg=value#anchor';
print_r(parse_url($url)); 
```

然后你可以采取`$url['host']`并做：

```
$arr = explode('.',$url['host']);
return $arr[count($arr) - 2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:11:51.043

I think you don't need regex.

```
function getDomain($url){
    $things_like_WWW_at_the_start = array('www');
    $urlContents = parse_url($url);
    $domain = explode('.', $urlContents['host']);

    if (!in_array($domain[0], $things_like_WWW_at_the_start))
        return $domain[0];
    else
        return $domain[1];
} 
```

# jquery - 悬停时在容器 div 中显示另一个 div

> ID：11952908
> 
> 赞同：0
> 
> 时间：2012-08-14T13:05:09.693
> 
> 标签：jquery, html, css

我该怎么做：当光标经过容器 div 时，该容器内的另一个 div 具有其他属性，例如，我有一个容器 div，其中包含另一个 div，背景图片不透明度为 0.2。我想制作子 div，当光标经过容器时，100% 可见，属性不透明度：1；我怎样才能做到这一点？

这是一个示例，但不幸的是，它仅在我将光标传递到子 div 时才有效：

**[http://jsfiddle.net/Vqmaw/2129/](http://jsfiddle.net/Vqmaw/2129/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:11:49.090

`#maifis:hover`将规则更改为`#container:hover #maifis`。这基本上意味着当**#container**悬停时，将规则应用于其子**#maifis**。

工作演示：[jsFiddle](http://jsfiddle.net/Vqmaw/2132/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:12:16.500

在现代浏览器中，这将起作用：

```
#maifis {
    opacity:0.2;
}
#container:hover #maifis {
    opacity:1;
} 
```

第二个 CSS 行表示当`#container`鼠标悬停在上面时，`#maifis`它所包含的元素的不透明度为 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:24:59.057

AFAIK，这对于纯 CSS 是不可能的。根据您的信息和 jsfiddle，使用这个 JQuery JS

```
$(function() {
    $('#container').bind('mouseover', function(){
        $('#maifis').addClass('visible');
    })
    $('#container').bind('mouseout', function(){
        $('#maifis').removeClass('visible');
    })
}); 
```

并在您的CSS中`#maifis:hover`简单地更改为。`.visible`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:10:29.240

这与 JQuery：

```
$('#maifis').hover( function(){
    $(this).animate({'opacity':1}, 300);
}, function(){
    $(this).animate({'opacity':0.2}, 300);
}); //Hover on maifis div 
```

或者：

```
$('#container').hover( function(){
    $('#maifis').animate({'opacity':1}, 300);
}, function(){
    $('#maifis').animate({'opacity':0.2}, 300);
}); //Hover on container div 
```

# sparql - 使用“SPARQL”用户以外的其他权限设置 SPARQL 端点

> ID：11952917
> 
> 赞同：2
> 
> 时间：2012-08-14T13:06:07.113
> 
> 标签：sparql, endpoint, virtuoso

我在 Virtuoso Conductor 中设置了另一个虚拟目录，以便通过另一个端口访问第二个 SPARQL 端点。

我的问题：为什么我只能选择“dba”用户来运行端点？有没有办法从用户“SPARQL”向我的第二个端点授予除这些权限之外的其他权限？

我知道如何授予/撤销对“SPARQL”的权限，但是否有可能将新端点与名为“SPARQL2”的用户匹配？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:26:25.137

不幸的是，不可能将 SPARQL 端点映射到具有不同权限的用户。

本指南显示了目前可能的情况：

[http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtTipsAndTricksGuideSPARQLEndpoints](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtTipsAndTricksGuideSPARQLEndpoints)
和
[http://docs.openlinksw.com/virtuoso/rdfsparql.html#rdfsupportedprotocolendpoint](http://docs.openlinksw.com/virtuoso/rdfsparql.html#rdfsupportedprotocolendpoint)

# php - 如何从其他两个数组（如“group by”）构建分层关联数组

> ID：11952919
> 
> 赞同：0
> 
> 时间：2012-08-14T13:06:10.170
> 
> 标签：php, associative-array

我需要有关阵列问题的帮助。

首先，我有一个数组，就像您从 sql 查询中收到的一样：

```
$aRows=array(
  array("one" => 1, "two" => 2, "three" => 3, "a" => "4", "b" => "lala"),
  array("one" => 1, "two" => 2, "three" => 3, "a" => "5", "b" => "lolo"),
  array("one" => 1, "two" => 2, "three" => 3, "a" => "6", "b" => "lili")
) 
```

然后我有另一个定义层次结构的数组 - 让我们说

`$aArray=array("one", "two", "three");`

现在我想构建一个分层关联数组：

```
$newArray = 
  array(
    "one" => array(
      "two" => array(
        "three" => array(
          array("a" => "4", "b" => "lala"),
          array("a" => "5", "b" => "lolo"),
          array("a" => "6", "b" => "lili"),
        )
      )
    )
  ); 
```

想象一个“按” sql分组，我想要分层表示。

编辑：在示例一、二、三中包含相同的值，但在现实生活中并非如此 - 假设：

```
select one,two,three,a,b from a_table group by one,two,three; 
```

当然，SQL 会将一、二、三中的相等值组合在一起，这种冗余信息是无用的。但是sql不能显示分层数据，所以字段是多余的。

编辑2：感谢Waygood，完整的解决方案是：

```
$aRows=array(
    array("one" => 1, "two" => 2, "three" => 3, "a" => "4", "b" => "lala"),
    array("one" => 1, "two" => 2, "three" => 4, "a" => "5", "b" => "lolo"),
    array("one" => 1, "two" => 2, "three" => 4, "a" => "6", "b" => "lili")
);

$aArray=array("one", "two", "three");

$output=array();
foreach($aRows as $row)
{
    $newKey = "";
    foreach($aArray as $key) // loop through the hierarchy to get the fields names
    {
        eval('$exist = array_key_exists(\'' . $row[$key] . 
        '\', $output' . $newKey . ');');

        if (!$exist)
        {
            $newKey .= "['" . $row[$key] . "']";
            eval('$output' . $newKey . '=array();');
        }
    }

    eval('$output' . $newKey . '[]=$row;');
}

echo(var_export($output, true)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:30:04.730

如果您想使用层次结构中指定的字段的值，您可以：

```
$output=array();
foreach($aRows as $row)
{
    reset($aArray);
    $eval='$output';
    foreach($aArray as $key) // loop through the hierarchy to get the fields names
    {
        if(is_numeric($row[$key]))
        {
           $eval.='['.$row[$key].']';  // build the key based on the number $row value of each field named
        }
        else
        {
           $eval.='[\''.$row[$key].'\']';  // build the key based on the string $row value
        }
        unset($row[$key]); // remove the field from the $row
    }
    $eval.='=$row;';
    eval($eval);  // evaluate the built up index and set it to the remaining data
} 
```

# java - InvalidKeyException：Java 中使用 RSA 密钥的密钥格式无效

> ID：11952922
> 
> 赞同：0
> 
> 时间：2012-08-14T13:06:14.397
> 
> 标签：java, web-applications, rsa

我使用 java keygenerator 生成了一个公共：

> 孙RSA公共密钥，1024位模数：106394877608018766537720801416655991345106535990850729605963854419450103716730599362154190537257597233014065015311499176359112816419965961469419756050290964343366687334245741905264407605904082573446954295309549250335299907317631410981650257400135070254491184426528002396792285738067623733919575203674519111607公用指数：65537

我从客户端（通过复制、粘贴）发送了这个密钥，并收到了与字符串完全相同的信息。然后我试图重建它：

```
byte [] bytes = publicKey.getBytes("UTF-8");
Key key = KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(bytes)); 
```

然后我从函数中返回。我`Invalid Key Exception`从第 2 行开始，在那里我形成了 Key。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:39:47.307

您需要使用 RSAPublicKeySpec

```
String modulus="106394877608018766537720801416655991345106535990850729605963854419450103716730599362154190537257597233014065015311499176359112816419965961469419756050290964343366687334245741905264407605904082573446954295309549250335299907317631410981650257400135070254491184426528002396792285738067623733919575203674519111607";
    RSAPublicKeySpec spec = new RSAPublicKeySpec(new BigInteger(modulus),BigInteger.valueOf(65537));

    Key key = KeyFactory.getInstance("RSA").generatePublic(spec); 
```

# javascript - 在 ActionLink mvc3 razor 中使用 java 脚本变量

> ID：11952923
> 
> 赞同：0
> 
> 时间：2012-08-14T13:06:22.917
> 
> 标签：javascript, asp.net-mvc, razor

我有一个文本框，我必须在其中写入一个值，如果我使用 ActionLink 调用我的控制器，如何在我的控制器中传递这个值，这是我的代码：

看法：

```
@Html.TextBox("tisch", "", new { @class = "teschChange"})
@Html.ActionLink("Apply Command", "ApplyCommand", "Work") 
```

这是脚本

```
<script type="text/javascript">
    $(function test() {
        $(".teschChange").change(function () {
            var tisch = $(this).attr('value');
        });
    });
</script> 
```

我必须在 ApplyCommandController 中发送 tisch 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:09:42.320

不要使用操作链接，而是使用标准链接：

```
<a id="l" href="@Url.Action("ApplyCommand", "Work")">Apply Command</a> 
```

然后，您可以使用此脚本：

```
<script type="text/javascript">
    $(function test() {
        $(".teschChange").change(function () {
            var tisch = $(this).attr('value');
            $("#l").attr("href", "@Url.Action("ApplyCommand", "Work")/" + tisch);
        });
    });
</script> 
```

这将分配一个href `/Work/ApplyCommand/tisch`：。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:50:34.953

这是正确的脚本：

```
 $("#l").attr("href", "@Url.Action("ApplyCommand", "Work")?tisch=" + tisch); 
```

# javascript - jQuery绑定到keyup

> ID：11952925
> 
> 赞同：1
> 
> 时间：2012-08-14T13:06:34.017
> 
> 标签：javascript, jquery

我在绑定到 textarea 控件的 keyup 事件时遇到了一些问题。我正在尝试以下

```
var shortDescInput = $('nobr:contains("Short Description")').closest('tr').find($('textarea[title="Short Description"]'));

    // this doesn't work
    shortDescInput.bind('keyup', function () {
        countShortDescChars();
    });

    // Nor this
    shortDescInput.keyup(function () {
        countShortDescChars();
    }); 
```

我在这里遗漏了一些非常明显的东西吗？这适用于其他控件，例如将事件绑定到单选按钮。我已经检查过了，我挑衅地选择了正确的文本区域

```
var shortDescInput = $('nobr:contains("Short Description")').closest('tr').find($('textarea[title="Short Description"]')); 
```

我只是似乎从来没有得到 keyup 事件....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:08:48.723

`find($('textarea[title="Short Description"]'))`是非常低效的。出于您的目的，`find`应该将选择器作为参数。

当您将 jQuery 对象传递给 时`find`，jQuery 首先从顶部查询 DOM 并找到与该选择器匹配的所有元素。然后，`find`遍历**所有**这些结果，直到找到与指定父项匹配的结果。

相反，您应该使用：

```
find('textarea[title="Short Description"]') 
```

另外，使用`.on`代替`.bind`. `.bind`由于效率低下，将在未来的版本中弃用。

```
shortDescInput.on("keyup", countShortDescChars); 
```

以及修改后的代码：

```
$(function () {
    var shortDescInput = $('nobr:contains("Short Description")').closest('tr').find('textarea[title="Short Description"]');

    shortDescInput.on("keyup", countShortDescChars);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:11:41.670

要验证选择器是否正常工作，请使用带有 console.log() 或老式 alert() 的**.length ：**

```
var shortDescInput = $('nobr:contains("Short Description")').closest('tr').find('textarea[title="Short Description"]');

alert(shortDescInput.length); 
```

您还可以逐步确定不返回任何内容的人：

```
alert($('nobr:contains("Short Description")').length);
alert($('nobr:contains("Short Description")').closest('tr').length);
alert($('nobr:contains("Short Description")').closest('tr').find('textarea[title="Short Description"]').length); 
```

第二次尝试。**使用 .on() 而不是 .bind()**：

```
shortDescInput.on('keyup',function(){countShortDescChars();}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:14:52.747

所以我和你的小提琴一起演奏...... **你的选择器有问题。**

*   首先，我从 js 部分中删除脚本标签。
*   然后删除 html 中的脚本标记，因为它破坏了小提琴。
*   切换到 jQuery 1.8.0 导致 MooTools 不是我们想要的。
*   `shortDescInput = $('textarea');`在您的巨型选择器之后添加，**事件被触发！**
*   在您的函数中再次添加`shortDescInput = $('textarea');`以使计数器工作。

再说一次，让我们现在试着弄清楚为什么**你的选择器不工作**:-)

**编辑：**

找到了！

我**用 .parent().next() 替换了你的 .closest()**因为我有点认为 .closest() 是针对 parent 的。

```
var shortDescInput = $('nobr:contains("Short Description")').parent().next().find('textarea[title="Short Description"]'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:22:12.933

问题是，至少在小提琴中，`<tr>`不在 a 中`<table>`，所以它被浏览器从 DOM 中删除了。包裹`<tr>`在一个`<table>`使小提琴工作。
演示：http: [//jsfiddle.net/kNkXE/9/](http://jsfiddle.net/kNkXE/9/)

# c# - 恢复已删除文件后出现不明确的引用错误

> ID：11952931
> 
> 赞同：0
> 
> 时间：2012-08-14T13:06:54.763
> 
> 标签：c#, visual-studio-2010

我试图通过复制/粘贴将 .aspx 页面移动到新项目。之后，我将其从原始解决方案中删除。当我意识到这是一个错误时，我尝试恢复并将其添加回原始解决方案。我可以打开它并查看代码/设计器，但我在 .aspx 页面中的所有对象上都收到错误“引用不明确”和“已经包含该定义”...请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:10:24.447

您可能`.Designer.cs`在 ASPX 下嵌套了两个文件。
删除其中之一。

# android - 安卓平板相机不工作

> ID：11952932
> 
> 赞同：0
> 
> 时间：2012-08-14T13:07:04.690
> 
> 标签：android, memory, android-camera

我正在为 Android ICS 的 7 英寸平板电脑开发应用程序。在应用程序中有使用相机功能来捕捉图像。当有人打开活动并且下班后完成相机发布时，我会分配相机。这工作正常。当我以 4~5 次打开和关闭活动的频率连续测试这个东西 50 次时，应用程序不响应应用程序，内置应用程序也不响应，突然屏幕变黑，我需要再次重新启动系统才能继续以前的工作。为什么这个问题会出现在系统中？有什么解决办法。谢谢你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:15:26.757

这可能与 Nexus 7 没有后置摄像头有关。[这可能会导致此处](http://android-developers.blogspot.co.uk/2012/07/getting-your-app-ready-for-jelly-bean.html)指定的问题

我现在想不出别的。尝试在您的答案中添加堆栈跟踪，以便我们查看问题所在。

# iphone - 我应该使用 UIAlertView 还是自定义视图？

> ID：11952941
> 
> 赞同：0
> 
> 时间：2012-08-14T13:07:30.940
> 
> 标签：iphone, objective-c, cocoa-touch, uialertview

我想知道 Apple 是否接受 UIAlertView 用作自定义视图，因为我想将 UITextField 添加到 UIAlertView 或者他们是否希望 UIAlertView 仅用于向用户提供警告/信息。我应该使用 UIAlertView 还是创建自定义视图？

有关我要创建的视图的一些详细信息：

我的视图就像 UIAlertView 一样，有一个标题、消息、2 个按钮（1 个取消和 1 个接受）和一个用于输入将返回的 IP 地址的文本字段。

如果可能的话，请保持到 iOS 4.0 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:09:38.603

看看类文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

UIAlertView 默认支持文本字段（看看 textFieldAtIndex :)。

因此，您当然可以使用它来获取用户的输入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:11:26.830

Apple 不拒绝对此类事实进行此类修改。无论如何，如果你想将 a 添加`UITextField`到 a`UIAlertView`那么它已经是默认的了。您可以在您的`UIAlertView`.

# caching - drush fails to clear cache: Fatal error: Call to undefined function lock_acquire()

> ID：11952949
> 
> 赞同：1
> 
> 时间：2012-08-14T13:07:52.013
> 
> 标签：caching, drupal, drush, drupal-5

I have installed Drush 5.6 on my ubuntu machine, and I am now working on a Drupal theme, so I need to clear the cache frequently, but I cannot seem to do it with drush...

When I run the `drush cc all` inside my drupal site folder, I get the message that it successfully cleared the drush cache.

When I instead run `drush cc` inside my drupal site folder I get only 3 options (even though I have seen other people get more options here...): to cancel, to clear drush cache, or to clear registry cache. Here I tried to clear the registry cache and got the following error:

```
Fatal error: Call to undefined function lock_acquire() 
```

pointing me to some bootstrap.inc file

I will be very happy if someone could help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T08:11:42.303

我只是有同样的问题。原因是`drush`无法`php`与 MAMP 一起使用。因此，您需要将 MAMP`php`位置的路径添加到`~/.bash_profile`.

对我来说，它是这样的：

```
export PATH=/Applications/MAMP/bin/php/php5.3.14/bin:$PATH 
```

我在 MAMP 中使用 PHP 5.3，检查您使用的版本并编写绝对路径，然后执行 source `~/.bash_profile`。

重新启动 MAMP 并重新检查。

# entity-framework - 端到端的类似 RIA 的客户端/服务器模式？非实体框架上下文？

> ID：11952951
> 
> 赞同：0
> 
> 时间：2012-08-14T13:07:59.860
> 
> 标签：entity-framework, wcf-ria-services

我在 msdn 论坛上发布了同样的问题，但还没有.. [http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/60cf36d1-c11a-4d8a-9446-f1d299db1222](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/60cf36d1-c11a-4d8a-9446-f1d299db1222)

我正在开发一个 MVC 应用程序项目，该应用程序将通过 WCF 服务获取数据，该服务可能会或可能不会通过 EF 获取数据，但肯定会使用存储过程。

MVC 应用程序将在会话中维护状态，并且该状态的实体跟踪部分的功能最好与 RIA 服务 DomainContext 非常相似。这个上下文是否封装了保存和变更集并不是那么重要，但实体如何加载到上下文中并相互关联（导航属性）才是最重要的。

问题1：是否存在这样的模式/解决方案？

问题 2：MVC 和 WCF 层是否应该通过类库共享相同的 DTO/实体？（从而在管道的两端保持状态感知、导航属性等？）

问题 3：使用 WCF 数据服务是否有助于解决这些问题？

问题 4：这一切都被误导了吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:37:56.663

这里很基本的东西..

解决方案是使用 WCF 数据服务，并在客户端添加指向它的服务引用。客户端代理将包括一个代理和我正在寻找的上下文类，类似于 RIA。如果您习惯于 RIA，会有一些差异和注意事项，但总的来说，它很容易通过并为您的服务器端 ObjectContext（或您通过 DataService 公开的任何存储库）提供客户端代理

# c++ - 动态多态和运算符重载的真实示例

> ID：11952952
> 
> 赞同：5
> 
> 时间：2012-08-14T13:08:01.163
> 
> 标签：c++, oop

这是在一次采访中被问到的，因为我提到 OOPS 是我最喜欢的主题。

谁能给出一些动态多态性和运算符重载的真实例子？

我只能从编码的角度来解释，比如计算不同形状的区域（虚函数+覆盖）和添加复数或字符串连接（运算符重载）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:13:26.570

多态性。

我们有车，对。想想一辆抽象的汽车。每辆车都可以加速。那将是一个多态函数。因此，在每辆（嗯，大多数，我们不计算异国情调的东西）汽车中，您都需要踩下踏板来加速。但是，不同的汽车按下它后会发生什么（阅读：定义的实现）。

运算符重载。

你有复数。您可以像使用普通数字一样对它们进行加、减、除（等）操作。但是，您执行此操作的方式*完全*不同。

**upd：**没有看到您在问题中提到了复数（（我会想到一个更好的。

**upd2：**你可以想到烹饪的过程。当你做饭时，你需要混合一些配料。您可以添加它们（例如将它们放在同一个盘子中），将它们分开（切割），将它们相乘（例如混合饮料）等等。我想这会导致这些运算符重载：P

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T13:22:53.620

`std::cout`是运算符重载的典型代表之一。虽然实际操作员的选择是……值得商榷……，`<<`与之前的所有东西相比，它的可扩展性是巨大的，几乎所有之后的东西也是如此。此外，考虑所有的`Matrix`and`Vector`类、迭代器、函数对象，所有那些`<`重载的类，因此它们可以是 a 的键`map`或排序为`std::string`.

多态性非常简单。想想如果你没有模板形式的参数多态性，生活会是什么样子。天哪，那会很糟糕。我是否要为一个新类型重复这个容器的代码，这是一个非常糟糕的主意，或者我是否应该使用那些`void*, size`无法处理复杂类型并且完全不安全的垃圾？类似的东西的界面`qsort`也无法使用。参数多态性允许代码重用*和*类型安全。

或动态多态性。`std::function`没有虚函数和继承就无法工作，这是一件非常重要的事情。还有基于继承的嵌入式端优化。当您需要在运行时可互换地处理不同类型时，它很有用。此外，有许多东西实际上是*动态*多态性，即使它们在技术上不是。例如，您从 Windows API 调用的每个函数都通过动态链接器固定的函数指针表。它们是多态的，具有符合相同接口的那些函数的任何实现。如果没有操作系统 API，生活会怎样？不宜居住。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T07:30:06.960

我对动态多态性有一个想法：

假设我们有一个类`Car`有几个子类型`Maruti-800`, `Indica`, `Zen`, `Inova`。

假设在赛车游戏中，我们必须停下一辆到达其最终目的地的汽车。此时我们不知道我们拥有哪种类型的汽车（无论是`Maruti-800`还是`Indica`其他类型的汽车）。所以我必须通过在运行时`Car`调用动作来按下超类引用（即）的中断。`Break``Car`

这是动态多态性的一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:28:17.850

动态多态性：自动车上的运动模式。当我们将其切换到运动模式时，我们仍然使用相同的油门踏板施加相同的压力，但自动齿轮会以更高的转速进行更换。

运营商重载：手机。根据您打开的菜单，按钮执行不同的操作。游戏中的 D 是前锋，在短信中它会打印字符 d。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:34:55.577

*运算符重载*的一个示例是在[iostream operator<<](http://www.cplusplus.com/reference/iostream/iostream/)中，或者另一个示例是在“制作”[仿函数时](http://www.cprogramming.com/tutorial/functors-function-objects-in-c++.html)

*动态多态性*基本上是覆盖父级的虚方法，它允许您“编程到接口”（纯虚函数）。这与静态多态性相反，*静态多态性*迫使您使用具体类型来使用“覆盖”方法。[这](https://stackoverflow.com/a/2391781/1114171)是一个很好的例子。

# java - SQL rawQuery 如果包含

> ID：11952957
> 
> 赞同：0
> 
> 时间：2012-08-14T13:08:28.743
> 
> 标签：java, android, sql, sqlite

一个简单的问题，我在互联网上找不到它，可能我在看错误的“术语”。`if contains`但是如何用“ ”做一个SQL查询语句

```
"SELECT something FROM " + TABLE_NAME + " WHERE name **contains** '*String*'", null); 
```

我知道你有这些陈述：`=` `>` `<` `>=` `<=`但有什么用`if contains`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:10:33.163

你想要`LIKE`关键字

取决于通配符的各种 SQL。

```
...Where name like '%string%' 
```

SQLite 使用 % 表示 0 个或多个未指定字符（如 *）的序列，下划线 _ 表示任何单个字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:10:25.000

`SELECT something FROM table WHERE name LIKE '%spam%'`

（百分号在“常规”搜索中就像星号一样，给予或接受。）

[使用 dbms 特定功能（例如，这里是 Oracle 的](http://www.regular-expressions.info/oracle.html)）可以使您变得更加复杂，这些功能可以根据情况添加正则表达式和其他搜索方式。

与往常一样，请注意整理问题和案例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T13:11:35.960

你可以使用喜欢

```
"SELECT something FROM " + TABLE_NAME + " WHERE name like '%yourstring%'"; 
```

参考：[http ://www.sqlite.org/lang_expr.html](http://www.sqlite.org/lang_expr.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:16:14.837

您可以使用“like”语句来代替“if contains”...

查询将是...

```
"SELECT something FROM tablename where name like %'string'%" 
```

这将返回你想要的，，，

例如：您的表名“abc”包含 Jarry,Jack,John,Josh,..... 如果您运行查询

select * from abc where name like %Ja%

它会回来

贾里，杰克..

# c# - 使用 Clipboard.SetText(string) 复制空字符串

> ID：11952960
> 
> 赞同：8
> 
> 时间：2012-08-14T13:08:30.580
> 
> 标签：c#, clipboard

`Clipboard.SetText("")`给我一个错误-“值不能为空”。那么如何使用 复制空字符串`Clipboard.SetText`？

我已经做了`Clipboard.Clear()`。它确实清除了剪贴板，但它不能帮助我**粘贴一个空字符串**

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T13:10:19.343

我认为你需要做

```
Clipboard.Clear() 
```

来自[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.CLIPBOARD.CLEAR%29;k%28CLEAR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)

> 清除系统剪贴板中的所有数据。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T13:14:22.247

如果您尝试使用它来保存 null 或空字符串`Clipboard.SetText`，它将永远无法工作。

请参阅*[Clipboard.SetText 方法（字符串）](http://msdn.microsoft.com/en-us/library/ydby206k.aspx)*（MSDN）。它提到如果文本为 null 或`Empty`for ，则会引发 ArgumentNullException `Clipboard.SetText`。

因此，您无法实现您想要实现的目标。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T13:11:50.153

请参阅*[Clipboard.Clear 方法 (System.Windows.Forms)](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.clipboard.clear.aspx)* (MSDN)。

```
Clipboard.Clear(); 
```

将清除剪贴板，因此您将“粘贴”一个空字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-29T17:09:46.727

引用`PresentationCore`并调用[`System.Windows.Clipboard.SetText(string)`](http://msdn.microsoft.com/en-us/library/ms597043%28v=vs.110%29.aspx)而不是[`System.Windows.Forms.Clipboard.SetText(string)`](http://msdn.microsoft.com/en-us/library/ydby206k.aspx). 我使用[clipview](http://www.peterbuettner.de/develop/tools/clipview/)来验证`System.Windows.Clipboard.SetText("");`（不引发异常）将空字符串存储到剪贴板中。

这种方法使您不必有条件地调用`Clear()`或`SetText()`根据您尝试有效地设置到剪贴板的字符串。如果您尝试编写代码以将剪贴板设置为**任何字符串值**而事先不知道是否需要支持空字符串，这将特别有用。即，此方法使您能够避免将空字符串视为特殊情况（IMO，它不应该是特殊情况，因为这只是令人困惑）。

此外，从 clipview 可以看出，`Clear()`实际上清空了剪贴板，而不是在其中放置一个空字符串。调用`System.Windows.Clipboard.SetText("")`实际上将一个空字符串值放入剪贴板。当您粘贴时，目标应用程序可以分辨出差异，并且如果它愿意，它实际上会表现出不同的行为。

# c# - 在 TreeView 中查找从根到叶的所有路径

> ID：11952962
> 
> 赞同：0
> 
> 时间：2012-08-14T13:08:31.367
> 
> 标签：c#, xml, treeview

我正在使用此[链接](http://support.microsoft.com/kb/317597)上描述的方法，在 TreeView 控件中显示 XML 文件。

但我需要得到从根到叶子的所有路径如何得到它？

请帮帮我！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:48:29.510

Your referenced page answers your question and describes completely how to get all the paths from root to leaves. This is steps 1 through to 8.

# c++ - 计算具有旋转前位置和旋转角度的点的绝对位置

> ID：11952967
> 
> 赞同：1
> 
> 时间：2012-08-14T13:08:52.727
> 
> 标签：c++, math, rotation, directx

如何将点围绕各自的轴旋转`(x, y, z)`角度？`(rx, ry, rz)`

也就是说，我如何确定由旋转角度`(x1, y1, z1)`旋转产生的点？`(x, y, z)``(rx, ry, rz)`

是否有任何 DirectX 例程可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:37:33.217

您要问的是如何使用[欧拉角](http://en.wikipedia.org/wiki/Euler_angles)进行旋转。您可以选择多种约定，但在我看来，您有兴趣应用绕 Z 轴旋转，然后绕 Y 旋转，然后绕 X 旋转。为此，您将发布乘以矩阵

![在此处输入图像描述](../Images/22acd77259577a0c3aec36f881d0747a.png)

在哪里

```
c1 = cos(rx)    s1 = sin(rx)
c2 = cos(ry)    s2 = sin(ry)
cs = cos(rz)    s3 = sin(rz) 
```

这种方法有几个问题，其中一个更常见的是[gimbal lock](http://en.wikipedia.org/wiki/Gimbal_lock)。首选方法是使用角轴公式之一。其中最常见的两个是[Unit Quaternion Rotation](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)和[Euler-Rodreigues Rotation Matrices](http://en.wikipedia.org/wiki/Euler%E2%80%93Rodrigues_parameters)。通过显式定义三个旋转轴及其相关的旋转角度，然后以相反的顺序将结果旋转表示相乘，它们将被组合以生成 12 个欧拉旋转矩阵中的任何一个，以将它们应用于要旋转的向量。

DirectX 使用[四元数来执行旋转](http://msdn.microsoft.com/en-us/library/windows/desktop/bb281652%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:18:05.723

在我的电子（EM）课程中，我学会了使用公式将笛卡尔坐标转换为极坐标

> x = r sinq cosf, y = r sinq sinf, z = r cosq

[更多信息在这里](http://electron9.phys.utk.edu/vectors/3dcoordinates.htm)

q 是 theta，f 是 phi。

# qt - PyQt QTreeView 可检查的列标题，可能吗？

> ID：11952971
> 
> 赞同：1
> 
> 时间：2012-08-14T13:09:02.653
> 
> 标签：qt, header, qtreeview, columnheader

我有一个带有 QStdarItemModel 的 TreeView 类，我想在“可检查模式”中设置一列，如果它被选中，那么该列中的所有项目都会被选中。列中的 CheckAll 复选框。

# asp.net - 无法将 Visual Web Developer 连接到 SQL Server

> ID：11952974
> 
> 赞同：0
> 
> 时间：2012-08-14T13:09:23.540
> 
> 标签：asp.net, sql-server, database-connection

我有一个非常好，工作数据库和网站出现，出于某种原因，我突然登录并收到错误：

> 无法打开登录请求的数据库“BookDatabase”。登录失败。用户登录失败

和堆栈跟踪：

> > [SqlException（0x80131904）：无法打开登录请求的数据库“BookDatabase”。登录失败。用户 'GSCC-L10017\acallus' 登录失败。]
> > System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔型 breakConnection）+5096342
> > System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
> > System.Data.SqlClient。 TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2294
> > System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +35
> > System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +245
> > System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString连接选项，TimeoutTimer 超时）+703
> > System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
> > System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
> > System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33 System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
> > System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) + 66
> > System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
> > System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
> > System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
> > System .Data.SqlClient.SqlConnection.Open() +125
> > System.Web.DataAccess.SqlConnectionHolder.Open(HttpContext context, Boolean revertImpersonate) +95
> > System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation) +206
> > System.Web.Security.SqlMembershipProvider.GetPasswordWithFormat(String username, Boolean updateLastLoginActivityDate, Int32& status, String& password, Int32& passwordFormat, String& passwordSalt, Int32& failedPasswordAttemptCount, Int32& failedPasswordAnswerAttemptCount, Boolean& isApproved, DateTime& lastLoginDate, DateTime& lastActivityDate) +827
> > System.Web.Security.SqlMembershipProvider.CheckPassword(String username, String password, Boolean updateLastLoginActivityDate, Boolean failIfNotApproved, String& salt, Int32& passwordFormat) +105
> > System.Web.Security.SqlMembershipProvider.ValidateUser(String username, String password) +106
> > System. Web.UI.WebControls.Login.AuthenticateUsingMembershipProvider(AuthenticateEventArgs e) +60
> > System.Web.UI.WebControls.Login.OnAuthenticate(AuthenticateEventArgs e) +129 System.Web.UI.WebControls.Login.AttemptLogin() +127
> > System.Web .UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e) +101 System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
> > System.Web.UI.WebControls.Button.OnCommand(CommandEventArgs e) +125
> > System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +167
> > System.Web.UI.WebControls.Button.System.Web.UI。 IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
> > System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
> > System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page。 ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563

我已经尝试了我能找到的所有方法来解决这个问题，并且发现了以下问题： - 数据库一次只能连接到 SQL Server Management Studio 或 Visual Web Developer - 我永远无法让它工作同时在两个程序中。- 即使我将它连接到 Visual Web Developer，我仍然无法在连接到数据库的站点上实际执行任何操作（我收到上述错误）。

我通过 Windows 身份验证连接到我的服务器实例，数据库位于我网站的 App_Data 文件夹中 - 我最初将它附加到 Management Studio。

我的 web.config 如下：

```
 <configuration>
  <system.web>
    <authorization>
      <allow roles="Administrator"/>
    </authorization>
    <roleManager enabled="true"/>
    <authentication mode="Forms"/>
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <membership>
      <providers>
        <remove name="AspNetSqlMembershipProvider"/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="true" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/>
      </providers>
    </membership>
  </system.web>
  <connectionStrings>
    <remove name="LocalSqlServer"/>
    <add name="LocalSqlServer" connectionString="Data Source=.\IPT2012;Initial Catalog=BookDatabase;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
</configuration> 
```

我什么都试过了。在我真正沮丧地扯掉头发之前，有人可以解释一下这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:13:43.887

在您的连接字符串中添加用户 ID 和密码属性

```
<connectionStrings>
 <remove name="LocalSqlServer"/>
 <add name="LocalSqlServer" connectionString="Data Source=.\IPT2012;Initial Catalog=BookDatabase;Integrated Security=True; User ID = userName; Password = yourpassword;" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

# ruby-on-rails - 如何使用 soundmanager2 和 rails？

> ID：11952975
> 
> 赞同：1
> 
> 时间：2012-08-14T13:09:23.627
> 
> 标签：ruby-on-rails, ruby-on-rails-plugins, soundmanager2

我在我的 rails 应用程序中安装了 soundmanager2 作为插件。

安装后，我尝试了以下命令来使用声音管理器

```
rails generate sound_manager2 
```

它显示未找到生成器错误:(

尝试使用 rails 3，但实际上想使用 rails 2 和 ruby​​ 1.8.6

有谁知道，它是如何在rails下工作的？或者有没有其他方法可以用 rails app 播放声音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:26:39.593

手动将以下 SoundManager2 文件添加到`vendor/assets/javascripts/soundmanager2`：

*   `soundmanager2-nodebug-jsmin.js`（或[其他脚本](http://www.schillmania.com/projects/soundmanager2/doc/getstarted/)之一，取决于您的需要）
*   `soundmanager2.swf`
*   `soundmanager2_debug.swf`
*   `soundmanager2_flash9.swf`
*   `soundmanager2_flash9_debug.swf`

然后您应该在应用程序的 JavaScript 清单文件 ( )中有一个`//= require tree .`或其中一个。`//= require soundmanager2/soundmanager2-nodebug-jsmin``app/assets/javascripts/application.js`

**或者**，只需使用[soundmanager-rails](https://github.com/glaszig/soundmanager-rails) gem。我自己没有用过，所以不能保证它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:10:50.510

您可以将来自 soundmanager2 下载的 JavaScript 和/或 Flash 文件拖放到您的 rails 应用程序中，该插件只是一个 JavaScript 包装器，您根本不需要它。

然后按照官方[入门指南](http://www.schillmania.com/projects/soundmanager2/doc/getstarted/)

# c++ - Blackberry 10 SDK beta 2 中的 ListView 滚动问题

> ID：11952980
> 
> 赞同：5
> 
> 时间：2012-08-14T13:09:35.047
> 
> 标签：c++, qml, blackberry-10

我需要在我的 ListView 中添加新项目并自动滚动它。我创建了一个应用程序，它适用于 SDK Beta 1，但不适用于 Beta 2。例如，我在 ListView 中有 20 个项目，其中前 5 个项目在屏幕上可见。如果我从我的 C++ 方法调用类似：

```
listView->scrollTo(ScrollPosition::End) 
```

我只能看到 ListView 顶部的最后一项。我可以手动向下滚动它，它会很好地工作，但我不能从代码中做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:04:33.227

API 文档并不明确，但确实暗示了您所看到的行为。您可能想使用另一种方法：[scrollToItem()](https://developer.blackberry.com/cascades/reference/bb__cascades__listview.html#scrolltoitem)

# azure - 无法加载文件或程序集 Microsoft.ApplicationServer.Caching.Core

> ID：11952986
> 
> 赞同：6
> 
> 时间：2012-08-14T13:09:48.827
> 
> 标签：azure, azure-caching

我正在尝试使用 Windows **Azure Caching Preview**。

我有一个专用的缓存工作者角色，一个使用前缓存的 webrole，以及一个持续更新缓存的工作者角色。

我按照[Windows Azure 指南中的说明进行操作，](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)但仍然出现错误：

> 无法加载文件或程序集“Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我将检查依赖项加倍三倍 1000000，有正确的。我注意到有两组 dll：我想使用的版本 1.0.0.0 和我不想要的另一组版本 101.0.0.0。我在所有 .config 文件中添加了`BindingRedirect`语句以将 101 个版本映射到 1.0.0.0 我检查了 \bin 文件夹，用 Jetbrains 反编译了 dll，它们是正确的。我开始失去耐心。为什么 .NET 在我放置显式路径时不采用我指定的 DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:12:17.097

好的，我找到了另一种方法：我刚刚将 C:\Program Files\Microsoft SDKs\Windows Azure.NET SDK\2012-06\ref\Microsoft.ApplicationServer.Caching.Core.dll 重命名为 Microsoft.ApplicationServer.Caching.Core.dll_old。

这对我来说已经足够了。

这是对这个问题的更具体的描述：单独进行项目时，它似乎工作得很好：我有 3 个工作角色和一个 Web 角色。每次我一个一个地构建我的项目时，我在输出目录中看到了正确的dll，我只有Windows Azure Cloud包的问题，​​似乎忽略了BindingRedirect指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-01T22:51:03.493

AppFabric 未设置为在安装后注册自己的 DLL。

您必须手动注册它们。在 powershell 中运行它来修复所有问题：

```
Set-location "C:\Program Files\AppFabric 1.1 for Windows Server"            
[System.Reflection.Assembly]::Load("System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")            
$publish = New-Object System.EnterpriseServices.Internal.Publish            
$publish.GacInstall("C:\Program Files\AppFabric 1.1 for Windows Server\Microsoft.ApplicationServer.Caching.Core.dll")
$publish.GacInstall("C:\Program Files\AppFabric 1.1 for Windows Server\Microsoft.ApplicationServer.Caching.Client.dll")
$publish.GacInstall("C:\Program Files\AppFabric 1.1 for Windows Server\Microsoft.WindowsFabric.Common.dll")
$publish.GacInstall("C:\Program Files\AppFabric 1.1 for Windows Server\Microsoft.WindowsFabric.Data.Common.dll")             
iisreset 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T13:30:17.177

只是建议存储在相关位置。

我遇到了问题中描述的问题，唯一的区别是它找不到 Caching.Client 而不是 Caching.Core。我尝试按照先前答案中的建议删除 SDK ref 文件夹中的库，但没有帮助。

无论如何，我的解决方案似乎相当特别。

对我来说有帮助的是我发现了一些没有被引用的库，但是它们是在我的项目工作的唯一环境中的包中找到的。它们是：* System.Web.Providers.1.1 * System.Web.Providers.Core.1.0

由于某种原因，它们在 packages.config 文件中丢失，因此无法从 nuget 提要中更新它们。因此，您可以尝试直接引用它们或以其他方式使它们可供您尝试运行的项目访问。

# javascript - 使用 javascript 反序列化

> ID：11952988
> 
> 赞同：0
> 
> 时间：2012-08-14T13:09:55.923
> 
> 标签：javascript, jquery, serialization

我正在尝试反序列化以下字符串：

> a:1:{i:0;a:9:{s:12:"model_number";s:8:"TTN037-7";s:5:"价格";s:4:"2935";s: 10： “UNIT_PRICE”; d：2405.32000000000016370904631912708282470703125; S：8： “id_price”; d：2935; S：9： “sales_tax”; d：223.68000000000000682121026329696178436279296875; S：5： “销售”; d：2380.32000000000016370904631912708282470703125; S：7： "服务";s:2:"25";s:7:"货运";s:3:"306";s:13:"comm_category";s:3:"X24";}}

使用以下js代码：

```
function unserialize(data) {
    // http://kevin.vanzonneveld.net
    // +     original by: Arpad Ray (mailto:arpad@php.net)
    // +     improved by: Pedro Tainha (http://www.pedrotainha.com)
    // +     bugfixed by: dptr1988
    // +      revised by: d3x
    // +     improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +        input by: Brett Zamir (http://brett-zamir.me)
    // +     improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +     improved by: Chris
    // +     improved by: James
    // +        input by: Martin (http://www.erlenwiese.de/)
    // +     bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +     improved by: Le Torbi
    // +     input by: kilops
    // +     bugfixed by: Brett Zamir (http://brett-zamir.me)
    // +      input by: Jaroslaw Czarniak
    // %            note: We feel the main purpose of this function should be to ease the transport of data between php & js
    // %            note: Aiming for PHP-compatibility, we have to translate objects to arrays
    // *       example 1: unserialize('a:3:{i:0;s:5:"Kevin";i:1;s:3:"van";i:2;s:9:"Zonneveld";}');
    // *       returns 1: ['Kevin', 'van', 'Zonneveld']
    // *       example 2: unserialize('a:3:{s:9:"firstName";s:5:"Kevin";s:7:"midName";s:3:"van";s:7:"surName";s:9:"Zonneveld";}');
    // *       returns 2: {firstName: 'Kevin', midName: 'van', surName: 'Zonneveld'}
    var that = this,
    utf8Overhead = function (chr) {
        // http://phpjs.org/functions/unserialize:571#comment_95906
        var code = chr.charCodeAt(0);
        if (code < 0x0080) {
            return 0;
        }
        if (code < 0x0800) {
            return 1;
        }
        return 2;
    },
    error = function (type, msg, filename, line) {
        throw new that.window[type](msg, filename, line);
    },
    read_until = function (data, offset, stopchr) {
        var i = 2, buf = [], chr = data.slice(offset, offset + 1);

        while (chr != stopchr) {
            if ((i + offset) > data.length) {
                error('Error', 'Invalid');
            }
            buf.push(chr);
            chr = data.slice(offset + (i - 1), offset + i);
            i += 1;
        }
        return [buf.length, buf.join('')];
    },
    read_chrs = function (data, offset, length) {
        var i, chr, buf;

        buf = [];
        for (i = 0; i < length; i++) {
            chr = data.slice(offset + (i - 1), offset + i);
            buf.push(chr);
            length -= utf8Overhead(chr);
        }
        return [buf.length, buf.join('')];
    },
    _unserialize = function (data, offset) {
        var dtype, dataoffset, keyandchrs, keys,
            readdata, readData, ccount, stringlength,
            i, key, kprops, kchrs, vprops, vchrs, value,
            chrs = 0,
            typeconvert = function (x) {
                return x;
            };

        if (!offset) {
            offset = 0;
        }
        dtype = (data.slice(offset, offset + 1)).toLowerCase();

        dataoffset = offset + 2;

        switch (dtype) {
            case 'i':
                typeconvert = function (x) {
                    return parseInt(x, 10);
                };
                readData = read_until(data, dataoffset, ';');
                chrs = readData[0];
                readdata = readData[1];
                dataoffset += chrs + 1;
                break;
            case 'b':
                typeconvert = function (x) {
                    return parseInt(x, 10) !== 0;
                };
                readData = read_until(data, dataoffset, ';');
                chrs = readData[0];
                readdata = readData[1];
                dataoffset += chrs + 1;
                break;
            case 'd':
                typeconvert = function (x) {
                    return parseFloat(x);
                };
                readData = read_until(data, dataoffset, ';');
                chrs = readData[0];
                readdata = readData[1];
                dataoffset += chrs + 1;
                break;
            case 'n':
                readdata = null;
                break;
            case 's':
                ccount = read_until(data, dataoffset, ':');
                chrs = ccount[0];
                stringlength = ccount[1];
                dataoffset += chrs + 2;

                readData = read_chrs(data, dataoffset + 1, parseInt(stringlength, 10));
                chrs = readData[0];
                readdata = readData[1];
                dataoffset += chrs + 2;
                if (chrs != parseInt(stringlength, 10) && chrs != readdata.length) {
                    error('SyntaxError', 'String length mismatch');
                }
                break;
            case 'a':
                readdata = {};

                keyandchrs = read_until(data, dataoffset, ':');
                chrs = keyandchrs[0];
                keys = keyandchrs[1];
                dataoffset += chrs + 2;

                for (i = 0; i < parseInt(keys, 10); i++) {
                    kprops = _unserialize(data, dataoffset);
                    kchrs = kprops[1];
                    key = kprops[2];
                    dataoffset += kchrs;

                    vprops = _unserialize(data, dataoffset);
                    vchrs = vprops[1];
                    value = vprops[2];
                    dataoffset += vchrs;

                    readdata[key] = value;
                }

                dataoffset += 1;
                break;
            default:
                error('SyntaxError', 'Unknown / Unhandled data type(s): ' + dtype);
                break;
        }
        return [dtype, dataoffset - offset, typeconvert(readdata)];
    }
;
    return _unserialize((data + ''), 0)[2];
}

function utf8_decode(str_data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)
    // +      input by: Aman Gupta
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Norman "zEh" Fuchs
    // +   bugfixed by: hitwork
    // +   bugfixed by: Onno Marsman
    // +      input by: Brett Zamir (http://brett-zamir.me)
    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // *     example 1: utf8_decode('Kevin van Zonneveld');
    // *     returns 1: 'Kevin van Zonneveld'
    var tmp_arr = [],
    i = 0,
    ac = 0,
    c1 = 0,
    c2 = 0,
    c3 = 0;

    str_data += '';

    while (i < str_data.length) {
        c1 = str_data.charCodeAt(i);
        if (c1 < 128) {
            tmp_arr[ac++] = String.fromCharCode(c1);
            i++;
        } else if (c1 > 191 && c1 < 224) {
            c2 = str_data.charCodeAt(i + 1);
            tmp_arr[ac++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));
            i += 2;
        } else {
            c2 = str_data.charCodeAt(i + 1);
            c3 = str_data.charCodeAt(i + 2);
            tmp_arr[ac++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
            i += 3;
        }
    }

    return tmp_arr.join('');
} 
```

但是这样做时我无法取回任何值：

```
function testPHP() {
    var ret;

    ret = unserialize('a:1:{i:0;a:9:{s:12:"model_number";s:8:"TTN037-7";s:5:"price";s:4:"2935";s:10:"unit_price";d:2405.32000000000016370904631912708282470703125;s:8:"id_price";d:2935;s:9:"sales_tax";d:223.68000000000000682121026329696178436279296875;s:5:"sales";d:2380.32000000000016370904631912708282470703125;s:7:"service";s:2:"25";s:7:"freight";s:3:"306";s:13:"comm_category";s:3:"X24";}}');
    alert(ret[0]);
    alert(ret[1]);
    alert(ret[2]);
    alert(ret[3]);
} 
```

我已经为大家设置了一个 jsfiddle 来测试 > [http://jsfiddle.net/XRrFS/2/](http://jsfiddle.net/XRrFS/2/)

我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:21:15.790

它工作得很好。将警报替换为`console.log(ret)`并在输出中记录。它看起来像这样：

```
Object
  0: Object
    comm_category: "X24"
    freight: "306"
    id_price: 2935
    model_number: "TTN037-7"
    price: "2935"
    sales: 2380.32
    sales_tax: 223.68
    service: "25"
    unit_price: 2405.32 
```

[http://jsfiddle.net/TrHpc/](http://jsfiddle.net/TrHpc/)

# java - 对目录树进行多线程递归遍历的好方法是什么？

> ID：11952989
> 
> 赞同：3
> 
> 时间：2012-08-14T13:09:56.300
> 
> 标签：java, python

我正在考虑一种在目录树上进行多线程递归遍历的好方法。

我现在正在做的是获取根目录下的文件夹并在单独的线程中对每个文件夹运行递归遍历。

这大大提高了性能，但我仍然有一个“长尾”问题 - 大文件夹需要很多时间。

有什么方法比这更好？

我为此使用python和java。

谢谢。

编辑：我不需要将文件加载到内存中。只需处理文件路径，并可能获取一些元数据信息，如文件大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:41:07.560

这是错误的方法，因为您不知道目录节点的深度和大小。即使您知道，在目录树上的**迭代本身**也不会通过在多个线程中执行来加速。您要做的是在单个线程中遍历目录并将您在文件/目录上所做的工作提交给[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。另见[执行者](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:05:10.423

好吧，严格回答多线程问题，您可以提出一些规则，以便在递归中剥离新线程，例如，每个甚至填充的深度都被拆分为线程。在 Python 式的伪代码中观察：

```
depth = 0
while true:
    subDirCount = countSubDirs()
    if subDirCount = 0:
        break
    else:
        if depth % 2 = 0:
            for dir in subDirs:
                newThread(dir)
        else:
            for dir in subDirs:
                recurse(dir) 
```

现在这个解决方案不能处理你在[线程安全方面的](http://docs.python.org/library/threading.html)*可怕*时间。这是您将要获得的不稳定异步返回的最佳设置。

# javascript - 如何在 Web 客户端上扩展基本字段小部件

> ID：11952990
> 
> 赞同：1
> 
> 时间：2012-08-14T13:09:57.750
> 
> 标签：javascript, web, openerp

我正在尝试自定义 Web 客户端上的基本 Field 对象。这是我的代码：

```
openerp.web_mymodule = function(openerp) {

    openerp.web.form.Field = openerp.web.form.Field.extend({
        init: function(view, node) {
            console.log('mine');
            this._super(view, node);
        }
    });
    [...]

} 
```

但不工作。AFAIK 这应该和以下代码（在同一个文件中）一样工作：

```
[...]
openerp.web.form.FieldChar = openerp.web.form.FieldChar.extend({

    init: function (view, node) {
        this._super(view, node);
        console.log('mine')
    }

}); 
```

我能看到的唯一区别是所有小部件（包括 FieldChar）都注册了，`view_form.js`而`Field`没有注册。

我是否错过了这背后的一些“黑魔法”？tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:28:04.620

您是否尝试使用包含而不是扩展？

```
openerp.web_mymodule = function(openerp) {

    openerp.web.form.Field.include({
        init: function(view, node) {
            console.log('mine');
            this._super(view, node);
        }
    });
    [...]
} 
```

xmo 在这里写了一个解释：[openerp web client 6.1: how to override base javascript functions](https://stackoverflow.com/questions/8817467/openerp-web-client-6-1-how-to-override-base-javascript-functions)

# c# - 将 DataGridView 控件中的列中的数据绑定到 .NET 图表控件

> ID：11952999
> 
> 赞同：2
> 
> 时间：2012-08-14T13:10:28.130
> 
> 标签：c#, .net, winforms, datagridview, mschart

我有一个`DataGridView`充满数据的存在。我在`DataGridView`名为“SignalStrength”的列中有一个列，我希望在`Chart`控件上绘制该数据。

我认为最简单的方法就是绑定数据，但我无法找出正确的语法。我想做这样的事情：

```
Chart1.Series[0].Points.DataBindY(DataGridView1, "SignalStrength"); 
```

这不会编译，因为我没有将正确的类型传递给`DataBindY`函数。它想要一个`IEnumerable`类型。这样做的正确方法是什么？我不想不得不遍历我的整个`DataGridView`来添加积分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:17:47.707

弄清楚了。

```
Chart1.Series[0].Points.DataBindY((DataView)DataGridView1.DataSource, "SignalStength"); 
```