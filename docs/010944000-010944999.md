# StackOverflow 问答 10944000-10944999

# mysql - 减少给定数据库处理 Python 2.7 程序的执行时间。

> ID：10944000
> 
> 赞同：-2
> 
> 时间：2012-06-08T06:27:29.110
> 
> 标签：mysql, performance, python-2.7

以下函数从数据库中获取数据：

```
def findid(name,parent):
    conn = MySQLdb.connect (host = "localhost",
                       user = "arunkamaly",
                        passwd = "code",
                       db = "se")
    cursor=conn.cursor()

    cursor.execute(" select xbrl_id from se_xbrl_concepts where xbrl_name=%s;",name)
    name=cursor.fetchone()
    cursor.execute(" select xbrl_id from se_xbrl_concepts where xbrl_name=%s;",parent)
    pname=cursor.fetchone()
    cursor.close()
    if pname==None:
            return name[0],0
    return name[0],pname[0] 
```

而这里用到了上面的函数，还介绍了insert方法：

```
def prsentparse():
    conn = MySQLdb.connect (host = "localhost",\
                       user = "arunkamaly",\
                        passwd = "code",\
                       db = "se")
    cursor=conn.cursor()

    f = open(csvfile, 'rb')
    spamReader = csv.reader(f, delimiter=',', quotechar='"')
    for clist in spamReader:
            if clist[0]=='LinkRole' or clist[0] =='' or clist[0]=='prefix':
                    continue
            name=clist[0]+':'+clist[1]

            parent=clist[6].strip()
            xid,pid=findid(name,parent)
            prio=0 if clist[5].strip()=='' else clist[5]
            order=0 if clist[4].strip()=='' else clist[4]
            depth=0 if clist[3].strip()=='' else clist[3]
    #print clist
            #cursor.execute("INSERT INTO se_xbrl_presentation (xbrl_id,xbrl_parent_id,priority,order,depth) VALUES (%s,%s,%s,%s,%s);",(xid,pid,prio,order,depth) )
    #sql = "insert into se_xbrl_presentation (xbrl_id, xbrl_parent_id, priority, order, depth) values (" + xid + ", " + pid + ", " + prio + ", " + order + ", " + depth + ");"
    try:
        cursor.execute("INSERT INTO `se_xbrl_presentation`(`xbrl_id`, `xbrl_parent_id`, `priority`, `order`, `depth`) VALUES (%s,%s,%s,%s,%s);",(xid,pid,prio,order,depth) )
    except MySQLdb.Error,e:
        print "mysql Error %d:%s"%(e.args[0],e.args[1])
conn.commit
cursor.close() 
```

这种方法似乎太慢了。您能否建议任何提高性能的改进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:34:44.563

您正在 findid 函数中打开一个连接。这意味着您在 for 循环的每次迭代中都打开了一个连接。相反，将您已经拥有的连接传递给 findid 函数，您不必每次都打开一个。

另一件可能很重要的事情：你在 se_xbrl_concepts 表的 xbrl_name 字段中有索引吗？您在 for 循环的每次迭代中都进行了两次选择。

# magento - 不同付款方式的 Magento 购物车价格规则

> ID：10944001
> 
> 赞同：1
> 
> 时间：2012-06-08T06:27:32.623
> 
> 标签：magento

我需要在以下条件下应用购物车价格规则。

1.  付款方式 -> 信用卡 = 免运费。
2.  付款方式->货到付款=运费（100Rs）+货到付款（100Rs）小计小于2000。
3.  付款方式 -> 货到付款 = 免运费 + 货到付款（100Rs）小计大于 2000 时。

任何人都可以解释购物车价格规则的上述条件或任何合适的条件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:03:32.573

您可以定义“购物车价格规则”。您可以在**促销 -> 购物车价格规则下找到它**

# javascript - 如何将“this”传递给窗口 setInterval

> ID：10944004
> 
> 赞同：12
> 
> 时间：2012-06-08T06:27:43.727
> 
> 标签：javascript

假设我有一个函数：

```
function a() {
    this.b = 1;
    this.set = setInterval(function() {console.log(this.b);}, 200);
} 
```

因此，当调用 a.set() 时，将调用匿名函数。但这不起作用，因为在触发函数时 this 指向窗口对象。此外，使用 ab 也不是一个好主意，因为 a 可能有多个实例。

这个问题有什么好的解决方案？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-08T06:30:20.860

存储对 的引用`this`：

```
function a() {
    var self = this;
    self.b = 1;
    self.set = setInterval(function() {console.log(self.b);}, 200);
} 
```

您传递给的匿名函数可以`setInterval`访问其包含范围内的任何变量，即`function a()`. JS 闭包的魔力即使在`a()`完成后也能让这些变量保持活跃，并且每次调用`a()`都有自己的闭包。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-15T23:28:48.470

既然我们现在有 ES6，我认为我们需要另一个答案：

使用箭头函数：

```
function a() {
  this.b = 1;
  this.set = setInterval(() => {console.log(this.b);}, 200);
} 
```

与普通函数相反，箭头函数本身没有`this`上下文。这意味着您可以访问外部`this`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-05T14:46:42.700

这将是最干净的解决方案，因为大多数时候您实际上希望为连续的方法调用切换 this 上下文：

```
 // store scope reference for our delegating method
    var that = this;
    setInterval(function() {
        // this would be changed here because of method scope, 
        // but we still have a reference to that
        OURMETHODNAME.call(that);
    }, 200); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T06:29:45.553

只需将您的`this`引用保存在其他变量中，`window`稍后不会被 -call 覆盖。稍后您可以使用该变量来引用您开始使用的对象。

```
function a() {
    this.b = 1;
    var that = this;
    this.set = setInterval(function() {console.log(that.b);}, 200);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T06:29:48.783

在您的情况下，您可以简单地：

```
function a() {
    var _this = this;
    this.b = 1;
    this.set = setInterval(function () {
      console.log(_this.b);
    }, 200);
} 
```

通常，我们也可以有一个辅助方法来[`Function.prototype.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)修复**引用**`this`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-24T08:56:32.050

这个问题太老了，但我不喜欢这里的解决方案，因为这个想法主要是将实例附加到*public*。

这是另一个可行的想法：

问题是，当从区间作为回调调用时，范围不在 inside `this`。但是，您可以通过定义一个 Function 变量来强制它。

```
function a() {
  var localCallback: () => {
    // access `this` as you will
    console.log(this);
  };
  this.timer = setInterval( localCallback, this.saveInterval );
} 
```

希望这有帮助！

# php - PHP 复选框数组将“数组”输入 MySQL 数据库

> ID：10944006
> 
> 赞同：0
> 
> 时间：2012-06-08T06:27:54.167
> 
> 标签：php, mysql

在几个 Stack Overflow 成员的指导下，我得到了一个 PHP 表单来与我的 MySQL 数据库进行通信。现在，我为我的复选框使用了一个数组，并且信息确实到达了 MySQL 表……有点……

下面的代码会将所有记录插入数据库，但复选框对应的列具有值“数组”而不是分配的值...：

```
<?php
 function renderForm($articletitle, $articleorganization, $articledate, $articleurl,     $articletags )
 {
 ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="stylized" class="myform">
      <form id="form" name="form" action="" method="post">
. . .
          <input type="checkbox" name="articletags[]" value="checkbox" id="articletags_0" />
          <input type="checkbox" name="articletags[]" value="checkbox 2" id="articletags_1" />
. . .
        <footer><input type="submit" name="submit" value="Add this Article"></footer></form>
    </div>
  </body>
</html><?php 
 }
. . .

 if(count($articletags) > 0)
{
 $articletags_string = implode(",", $articletags);
}

 if (isset($_POST['submit']))
 { 
 $articletitle = mysql_real_escape_string(htmlspecialchars($_POST['articletitle']));
 $articleorganization = mysql_real_escape_string(htmlspecialchars($_POST['articleorganization']));
 $articledate = mysql_real_escape_string(htmlspecialchars($_POST['articledate']));
 $articleurl = mysql_real_escape_string(htmlspecialchars($_POST['articleurl']));
 $articletags = ($_POST['articletags']);

. . .
 mysql_query("INSERT articles SET articletitle='$articletitle',     articleorganization='$articleorganization', articledate='$articledate',     articleurl='$articleurl', articletags='$articletags' ")
 or die(mysql_error()); 

 header("Location:addsuccess.html"); 
 }
 }
 else

 {
 renderForm('','','','');
 }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:29:26.277

由于`$_POST['articletags']`是一个数组，因此您必须在保存到表之前将其转换为字符串。替换这一行：

```
$articletags = ($_POST['articletags']); 
```

有了这个：

```
$articletags = implode(',', $_POST['articletags']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:35:51.477

是的，您正在将数组值传递给您的数据库字段..为此，您必须执行一些转换方法。

您可以通过多种方式做到这一点。首先，您可以将数组值转换为字符串。

```
$articletags = implode(',', $_POST['articletags']); 
```

其次，您可以将数组值转换为 json 格式，然后您可以输入数据库..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T20:17:56.357

好的，我现在正在经历这个，这就是我的想法。

最好的方法，因为你有一个多对多的关系，是有三个表，让我们称它们为“main_table”、“tag_table”和“key_table”。如果我没记错的话，这将为您提供 3 级标准化。

将复选框的值放入数组中。当您上传信息时，首先将其他数据上传到“main_table” - 不要担心您的标签。然后获取您刚刚上传的 main_table 行的 ID 号。

现在在您的“标签”数组上使用 foreach 运算符，并生成一个字符串值以进入您的 INSERT INTO key_table VALUES $string。

我认为这至少是一种正确的方法，当然从 MySQL 的角度来看。这是我刚刚编写和测试的一些准系统代码。有很多关于错误、安全性等方面的小细节缺失。

这是表格，它将从数据库中下载并填写表格。（``它确实包含一个自动值（checked='checked'），因此如果出现问题，表单不会被删除。）

```
 $query1 = "SELECT * FROM tag_table";
            $res1 = mysqli_query ($dbc, $query1);
            while ($row1 = mysqli_fetch_array($res1, MYSQLI_NUM)) {
                    $tag_id = $row1[0];
                    $tag = $row1[1];
                    echo "<div class='check'><label for='tags[]'>$tag</label> "; 
                    echo "<input type='checkbox' name='tags[]' value='$tag_id'";
                    if (in_array("$tags",$tag_id)) echo " checked='checked' ";
                    echo "/></div>";
                } 
```

这是表单处理程序的基本框架，您已经在其中建立了由变量 $dbc 保存的数据库连接。这在您上传基本信息后立即进行，以便 mysqli_insert_id 将获取最近插入的 id 号：

```
 $tags = $_POST (tags);
    if ($tags) {
        $new_main_id =  mysqli_insert_id($dbc);
    foreach ($tags as $value) {
           $qvalues .= "('$new_main_id','$value'),";
    }
    $qvalues = substr("$qvalues", 0, -1); 

    $q2 = "INSERT INTO key_table (id_main,id_tag_table) VALUES $qvalues";
    $res2 = mysqli_query($dbc, $q2);

} 
```

这将为您提供一个漂亮干净的规范化数据库。请注意，我们使用 PHP 函数 substr() 将逗号从要插入的值列表的最后一个去掉。

因此，如果您有一个包含三行两列的标签表，例如 1 个红色、2 个蓝色、3 个绿色，并且您的用户检查了红色和绿色，并且您的 main_table 中用于主插入的 id 编号为 18，则查询($q2) 将显示为：

插入 key_table (id_main,id_tag_table) 值 ('18','1'),('18','3')

# javascript - 谷歌地图 api v3 中的 403 禁止

> ID：10944007
> 
> 赞同：3
> 
> 时间：2012-06-08T06:28:01.693
> 
> 标签：javascript, google-maps, google-maps-api-3, ruby-on-rails-3.1

据说谷歌地图 v3 中不需要 Api 密钥，但使用`http://maps.google.com/maps/api/js?sensor=false`我只能使用地图 3 天，然后我开始收到 403 Forbidden 错误。我每天只发送大约 300-400 个请求，所以这不应该是个问题。

然后，我决定获取api密钥并使用它，它也可以正常运行3天；之后它产生了同样的 403 禁止错误。

如果我遗漏了什么或获得谷歌 api 的商业计划是唯一的方法，谁能指导我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:07:04.643

尽管建议使用密钥，但您不需要密钥（除其他外，它可以让您在 API 控制台中查看您的使用情况）。

您是否有指向您网站的链接，以便我们查看 403 发生的其他潜在原因？

# css - 如何水平对齐两个 div，容器宽度以百分比为单位？

> ID：10944008
> 
> 赞同：2
> 
> 时间：2012-06-08T06:28:08.697
> 
> 标签：css, html

问题：

我有下面的 HTML 并希望有两个水平相邻的 div。
左 div 的高度应与右 div 的高度相同（反之亦然，如果左 div 的高度大于右 div 的高度）。
左 div 的大小应该是固定大小（以像素为单位），右 div 应该扩展以填充容器（无需设置宽度），在本例中为 500 像素。

我不想在第二个 div 上设置宽度，因为最终我想将包装器的大小设置为百分比。

使用下面的 HTML，第二个 div 位于第一个 div 之下。谁能告诉我如何根据我的意愿解决这个问题（也应该在 IE 9 中工作）？

```
<!DOCTYPE html>

<html>
<head>
    <title>Index</title>

    <style type="text/css" media="all">

        #wrapper 
        { 
            width: 500px; /* or say, 25% */
            border: 1px solid black; 
            overflow: hidden; /* add this to contain floated children */ 
        }

        #first 
        { 
            width: 100px; 
            float:left;
            border: 1px solid red; 
        }

        #second 
        { 
            border: 1px solid green; 
            width: 400px; /* don't want this */
            float: left;
        } 

    </style>

</head>

<body>

<div id="wrapper">
    <div id="first">
        Test left
        <br />
        Test left
    </div>
    <div id="second">
        Test right
        <br />
        Test right
        <br />
        Test right
        Auf der Registerkarte 'Einfügen' enthalten die Kataloge Elemente, die mit dem generellen Layout des Dokuments koordiniert werden sollten. Mithilfe dieser Kataloge können Sie Tabellen, Kopfzeilen, Fußzeilen, Listen, Deckblätter und sonstige Dokumentbausteine einfügen. Wenn Sie Bilder, Tabellen oder Diagramme erstellen, werden diese auch mit dem aktuellen Dokumentlayout koordiniert. Die Formatierung von markiertem Text im Dokumenttext kann auf einfache Weise geändert werden, indem Sie im Schnellformatvorlagen-Katalog auf der Registerkarte 'Start' ein Layout für den markierten Text auswählen. Text können Sie auch direkt mithilfe der anderen Steuerelemente auf der Registerkarte 'Start' formatieren. Die meisten Steuerelemente ermöglichen die Auswahl zwischen dem Layout des aktuellen Designs oder der direkten Angabe eines Formats. Wählen Sie neue Designelemente auf der Registerkarte 'Seitenlayout' aus, um das generelle Layout des Dokument s zu ändern. Verwenden Sie den Befehl zum Ändern des aktuellen Schnellformatvorlagen-Satzes, um die im Schnellformatvorlagen-Katalog verfügbaren Formatvorlagen zu ändern. Die Design- und die Schnellformatvorlagen-Kataloge stellen beide Befehle zum Zurücksetzen bereit, damit Sie immer die Möglichkeit haben, das ursprüngliche Layout des Dokument s in der aktuellen Vorlage wiederherzustellen. Auf der Registerkarte 'Einfügen' enthalten die Kataloge Elemente, die mit dem generellen Layout des Dokuments koordiniert werden sollten.
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:30:08.547

如果您使用边框，那么您的宽度有额外的 2px。所以将 4px 添加到包装宽度

```
#wrapper 
{ 
    width: 504px; /* or say, 25% */
    border: 1px solid black; 
    overflow: hidden; /* add this to contain floated children */ 
}

#first 
{   
    width: 100px; 
    float:left;
    border: 1px solid red; 
}

#second 
{  
    border: 1px solid green; 
    width: 400px; /* don't want this */
    float: left;
} 
```

更新：-为这个简单的事情使用表格布局

```
 #wrapper 
        { display:table-row;
            width: 500px; /* or say, 25% */
            border: 1px solid black; 
            overflow: hidden; /* add this to contain floated children */ 
        }

        #first 
        { display:table-cell;
            width: 100px; 
            border: 1px solid red; 
        }

        #second 
        { display:table-cell;
            border: 1px solid green; 
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:33:54.087

尝试将此添加到您的CSS：

```
div{
  margin:0;
  border:0;
} 
```

并删除之前指定的任何边框......否则减少你想要在右边的 div 的宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:37:52.410

检查小提琴 - [http://jsfiddle.net/bwuzm/](http://jsfiddle.net/bwuzm/)

边框增加了 2px 宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:38:54.383

我想你可能想看看[css 灵活的盒子模型](http://www.html5rocks.com/en/tutorials/flexbox/quick/)

我不知道是否所有浏览器都支持这一点，但如果你希望#wrapper 灵活，#first 具有固定大小，然后 #second 根据#wrapper 宽度消耗所有剩余空间，也许这会做诀窍。

或尝试有人遇到麻烦的答案，如果您没问题，使用 table 是一个快速的解决方案。

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T06:47:36.883

边框使`<div>`s 太大（by `2px`），所以要么删除边框（[jsFiddle Example](http://jsfiddle.net/wdMca/2/)），要么创建一个负数`margin`（[jsFiddle Example](http://jsfiddle.net/wdMca/1/)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T06:51:09.670

如果你想放弃旧的浏览器，试试[CSS Tables](http://thinkvitamin.com/design/tables-the-next-evolution-in-css-layout/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-08T06:58:23.863

改变：

```
#wrapper 
        { 
            width: 504px; /* or say, 25% */
            border: 1px solid black; 
            overflow: hidden; /* add this to contain floated children */ 
        } 
```

因为#first 和#second 块周围的边框在块的每一侧增加了1px。[例子](http://jsfiddle.net/ghu7j/)

或者删除带有边框的样式添加你会看到一切都会落到地方。[例子](http://jsfiddle.net/ghu7j/1/)

并将 display: inline-block 添加到 #first 和 #second 块。[例子](http://jsfiddle.net/ghu7j/)

# javascript - 将rails值分配给全局变量并在javascript中使用它

> ID：10944011
> 
> 赞同：4
> 
> 时间：2012-06-08T06:28:36.347
> 
> 标签：javascript, ruby-on-rails

我有一个 javascript 函数，它采用 rails 值，例如

```
<body onload="myFunction(<%p%>)"> 
```

我正在尝试像这样传递来自控制器的值

```
<% if logged_in? -%><%p= current_user.id %><% end -%> but here the p doesn't contain the value. this works if I put code like this
<body onload="myFunction(<%= current_user.id%>)">
<% if logged_in? -%><%= current_user.id %><% end -%> 
```

但我需要进一步的要求，所以应该添加另一行这样的

```
<% if logged_out? -%><%p= current_user.id %><% end -%> 
```

因此，如果用户已注销，则值 p 将传递给 javascript 函数。我知道这是一件小事，但不知道怎么做在将来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:31:36.290

希望它会有所帮助：

[将数据传递给 JavaScript](http://railscasts.com/episodes/324-passing-data-to-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:33:00.993

赋值时请这样使用

```
 <body onload="myFunction('<%=p%>')"> 
```

希望工作

# java - org.icefaces.application.SessionExpiredException

> ID：10944013
> 
> 赞同：0
> 
> 时间：2012-06-08T06:28:39.057
> 
> 标签：java, jsf, spring-security, icefaces

这是我的场景。

我正在使用 icefaces (3.0.1) + spring security (3.1.0)，一切似乎都很好。我可以对应用程序进行身份验证并很好地使用它。当我尝试以下操作时，问题就来了：

我打开了应用程序的两个窗口（其中一个在向服务器执行许多推送请求的页面中），然后我点击了注销按钮。此时，堆栈跟踪显示

```
java.lang.NullPointerException
    at java.io.Writer.write(Unknown Source)
    at org.icefaces.impl.context.DOMPartialViewContext.renderState(DOMPartialViewContext.java:521)
    at org.icefaces.impl.context.DOMPartialViewContext.processPartial(DOMPartialViewContext.java:222)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:390)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
7-Jun-2012 10:51:24 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/WEB-INF/views/signin.xhtml]
java.lang.NullPointerException
    at java.io.Writer.write(Unknown Source)
    at org.icefaces.impl.context.DOMPartialViewContext.renderState(DOMPartialViewContext.java:521)
    at org.icefaces.impl.context.DOMPartialViewContext.processPartial(DOMPartialViewContext.java:222)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:390)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
7-Jun-2012 10:51:24 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/Sharely] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: CDATA tags may not nest] with root cause
java.lang.IllegalStateException: CDATA tags may not nest
    at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
    at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172)
    at javax.faces.context.PartialResponseWriter.startError(PartialResponseWriter.java:342)
    at org.icefaces.ace.context.CallbackPartialResponseWriter.startError(CallbackPartialResponseWriter.java:120)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123)
    at org.icefaces.impl.application.ExtendedExceptionHandler.handle(ExtendedExceptionHandler.java:113)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

但仍然重定向到注销页面。当用户尝试再次登录并且浏览器显示具有以下内容的 XML 页面时，真正的问题出现了：

```
 <?xml version='1.0' encoding='UTF-8'?> <partial-response><error><error-name>class               org.icefaces.application.SessionExpiredException</error-name><error-message><![CDATA[Session has expired]]></error-message></error><changes><extension aceCallbackParam="validationFailed">{"validationFailed":false}</extension></changes></partial-response> 
```

一次刷新显示应该显示的页面。但是有没有人知道可能发生了什么以及如何解决这个问题？我已经尝试了几乎所有...

# iphone - 我可以移动 UIKeyboard 的框架吗？

> ID：10944017
> 
> 赞同：3
> 
> 时间：2012-06-08T06:29:15.783
> 
> 标签：iphone, objective-c, ios, uikeyboard

我正在尝试做的事情：

我正在使用新的 Facebook 和 Path 应用程序使用的相同类型的侧边样式菜单。这是我所基于的代码：[https](https://github.com/pkluz/ZUUIRevealController) ://github.com/pkluz/ZUUIRevealController （也可以单击链接查看图片）。

基本上，在我的“主”视图中，总是显示键盘。当我“显示”侧视图时，我希望键盘与主视图的其余部分一起滑开，就好像键盘连接到主视图一样。目前，它只是覆盖其他所有内容。

-

我是否应该尝试找出实现这一目标的方法？还是键盘的框架锁得很紧？

更好的是，如果你能解释一种方法来做到这一点，使用我所基于的 GitHub 代码 - 我肯定会给予赏金（虽然还不能设置它，因为这个问题需要几天） ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T02:50:00.163

解决了...事实证明实际上有一种非常干净的方法可以做到这一点。

```
UIView * activeKeyboard = activeInputView.inputAccessoryView.superview;
activeKeyboard.frame = newFrame; 
```

就这么容易。没有未记录的 API 调用，但我仍然祈祷它通过了审批流程。

请记住，这段代码只是重要的一点，它周围还有其他代码等来实现这一切——但这不应该很难弄清楚你是否需要实现同样的目标:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:45:44.477

有可能，我已经尝试过类似的东西来复制消息应用程序的行为（用户可以通过滚动消息列表来拖动键盘）。

也就是说，没有官方认可的方法可以做到这一点，因此任何解决方案都可能是 hacky 并且可能会因操作系统更新而中断。

我这样做的方式基本上是找到`UIWindow`键盘所在的位置并修改其`transform`属性。键盘窗口当前使用 private class `UITextEffectsWindow`，但这可能随时更改，所以我不会依赖它。即使键盘位于您完全可以访问的窗口中（通过`[[UIApplication sharedApplication] windows]`）这一事实也没有记录在任何地方并且可能会更改。

我不确定我是否会在已发布的应用程序中做这样的事情。如果您尝试，您必须*非常*防御性地编写代码，以确保在将来键盘的实现细节发生变化时它不会中断。

# css - 如何使用 SASS 获得计算结果的长版本

> ID：10944045
> 
> 赞同：1
> 
> 时间：2012-06-08T06:32:01.877
> 
> 标签：css, sass

在 sass 中，我正在这样做：

```
#myid
  width: (500 / 960) /*also need to convert it to % 
                     (* 100%) but that works fine*/
} 
```

我得到的结果是：

```
#myid{
  width: 0.521;
} 
```

现在在“响应式网页设计”一书中，它指出我们不应该缩短结果。所以我需要的是

```
 #myid{
      width: 0.52083333333333;
    } 
```

那么在这种情况下，有没有办法用 sass 获得完整的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:48:41.663

在你的末尾添加这个`config.rb`：

```
Sass::Script::Number.precision = 13 
```

# python - 如何从日期时间对象中删除 pytz 时区？

> ID：10944047
> 
> 赞同：170
> 
> 时间：2012-06-08T06:32:37.100
> 
> 标签：python, timezone, pytz

有没有一种简单的方法可以从 pytz 日期时间对象中删除时区？例如，从这个例子中
重建：`dt``dt_tz`

```
>>> import datetime
>>> import pytz
>>> dt = datetime.datetime.now()
>>> dt
datetime.datetime(2012, 6, 8, 9, 27, 32, 601000)
>>> dt_tz = pytz.utc.localize(dt)
>>> dt_tz
datetime.datetime(2012, 6, 8, 9, 27, 32, 601000, tzinfo=<UTC>) 
```

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2012-06-08T06:39:17.200

要从日期时间对象中删除时区 (tzinfo)：

```
# dt_tz is a datetime.datetime object
dt = dt_tz.replace(tzinfo=None) 
```

如果您使用的是像[arrow](http://crsmithdev.com/arrow/)这样的库，那么您可以通过简单地将箭头对象转换为 datetime 对象来删除时区，然后执行与上面示例相同的操作。

```
# <Arrow [2014-10-09T10:56:09.347444-07:00]>
arrowObj = arrow.get('2014-10-09T10:56:09.347444-07:00')

# datetime.datetime(2014, 10, 9, 10, 56, 9, 347444, tzinfo=tzoffset(None, -25200))
tmpDatetime = arrowObj.datetime

# datetime.datetime(2014, 10, 9, 10, 56, 9, 347444)
tmpDatetime = tmpDatetime.replace(tzinfo=None) 
```

你为什么要这样做？一个例子是 mysql 不支持其 DATETIME 类型的时区。因此，当您将`datetime.datetime`对象插入数据库时​​，使用 ORM 之类的 sqlalchemy 将简单地删除时区。解决方案是将您的`datetime.datetime`对象转换为UTC（因此数据库中的所有内容都是UTC，因为它无法指定时区）然后将其插入数据库（无论如何都会删除时区）或自己删除它。另请注意，您*无法*比较`datetime.datetime`一个对象是时区感知的对象，而另一个对象是时区敏感对象。

```
##############################################################################
# MySQL example! where MySQL doesn't support timezones with its DATETIME type!
##############################################################################

arrowObj = arrow.get('2014-10-09T10:56:09.347444-07:00')

arrowDt = arrowObj.to("utc").datetime

# inserts datetime.datetime(2014, 10, 9, 17, 56, 9, 347444, tzinfo=tzutc())
insertIntoMysqlDatabase(arrowDt)

# returns datetime.datetime(2014, 10, 9, 17, 56, 9, 347444)
dbDatetimeNoTz = getFromMysqlDatabase()

# cannot compare timzeone aware and timezone naive
dbDatetimeNoTz == arrowDt # False, or TypeError on python versions before 3.3

# compare datetimes that are both aware or both naive work however
dbDatetimeNoTz == arrowDt.replace(tzinfo=None) # True 
```

# excel - 用VB跳转到excel中新生成的行

> ID：10944048
> 
> 赞同：0
> 
> 时间：2012-06-08T06:32:38.187
> 
> 标签：excel, vba, row

你好，亲爱的 Stackoverflow 用户，

我在谷歌和so论坛上搜索，但没有找到任何东西。

我正在使用类似的 Excel 进行报告。在此报告中，用户可以创建一个新实例。可以创建许多实例。

**创建新度量时，会创建新行并将度量信息保存在这些新行中。**

创建**新度量时，新度量并不总是位于度量列表的底部**，而是位于列表中的某个位置，因为它是一个有序列表。

我的问题如下。我**需要能够通过让光标自动移动到最后生成的行来查看最后创建的度量。**

通过搜索列中的所有值，然后转到包含该特定值的单元格，或者如果可能的话，跳转到最后生成的行。

我不知道可以使用什么功能。

我知道我可以移动到指定的单元格

和 `' ActiveSheet.Cells(yColumn, xRow).Select ' This selects C5 on the active sheet: ActiveSheet.Cells(5, 3).Select`

非常感谢任何提示；)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:40:16.550

我可以考虑一些方法来跟踪每列的最新条目。

*   **例如，将单元格涂成红色**

> Selection.Interior.ColorIndex = 3

*   **将行号存储在另一个单元格中**

> Range("A1").Value = ActiveCell.Row

*   **使用定义的名称**

假设您要将最新的条目单元格称为“LastEntry”

> ActiveWorkbook.Names.Add Name:="LastEntry", RefersTo:=ActiveCell

然后，搜索非常简单。

# javascript - 使用coffeescript +咖啡烤面包机的backbone.js Model.get()返回未定义的范围？

> ID：10944049
> 
> 赞同：4
> 
> 时间：2012-06-08T06:32:47.087
> 
> 标签：javascript, backbone.js, coffeescript, scoping

我正在编写一个使用咖啡脚本和咖啡烤面包机（用于拼接的很棒的 NPM 模块）的应用程序，它构建了我的 app.js 文件。

我的许多应用程序类和模板都需要有关当前用户的信息，因此我有一个用户类实例（扩展 Backbone.Model）存储为我的主应用程序类（扩展 Backbone.Router）的属性。

作为初始化例程的一部分，我从服务器获取用户（它负责身份验证、角色、帐户切换等）。这是咖啡脚本：

```
@user = new models.User
@user.fetch()
console.log(@user) 
console.log(@user.get('email')) 
```

第一个日志语句在控制台中输出正确的 Backbone.Model 属性对象，就像它应该的那样：

```
User
_changing: false
_escapedAttributes: Object
_pending: Object
_previousAttributes: Object
_silent: Object
attributes: Object
  account: Object 
  created_on: "1983-12-13 00:00:00"
  email: "ben@accomplicecreative.com"
  icon: "0"
  id: "1"
  last_login: "2012-06-07 02:31:38"
  name: "Ben Ipsen"
  roles: Object
__proto__: Object
changed: Object
cid: "c0"
id: "1"
__proto__: ctor
app.js:228 
```

然而，第二个返回*undefined*尽管模型属性在记录时明确存在于控制台中。

为了让事情变得更有趣，在控制台中手动输入“window.app.user.get('email')”会返回“ben@accomplicecreative.com”的预期值......？

仅供参考，下面是初始化方法如何编译到我的 app.js 文件中：

```
Application.prototype.initialize = function() {
  var isMobile;
  isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);
  this.helpers = new views.DOMHelpers().initialize().setup_viewport(isMobile);
  this.user = new models.User();
  this.user.fetch();
  console.log(this.user);
  console.log(this.user.get('email'));
  return this;
}; 
```

我在我的静态 HTML 中初始化 Application 控制器，如下所示：

```
jQuery(document).ready(function(){
   window.app = new controllers.Application();
}); 
```

请提出建议，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:49:25.833

这里有两点你需要了解：

1.  `fetch`是异步的。
2.  有些`console.log`s是异步的。

所以这就是正在发生的事情：

1.  你打电话`@user.fetch()`，它会启动一个 AJAX 调用。
2.  您调用`console.log(@user)`它会进行另一项异步工作，但是（这是一个很大的但是！），它需要一个对它的引用，当调用执行其日志记录`@user`时，该引用将被取消引用。`console.log`
3.  你调用`console.log(@user.get('email'))`，这会带走`@user.get('email')` *返回*的，`get`调用会立即执行。
4.  **来自(1)**的 AJAX 调用为`@user`.
5.  这些`console.log`调用可以在控制台中记录事情。

`console.log`from **(2)**携带对`@user`填充`fetch`在**(4)**中的的引用；到**(4)**执行时，`@user`已填充，因此您在控制台中看到一个完整的用户。当你调用`@user.get('email')`( **3)**时，还`fetch`没有填充，你实际上是在说`@user``@user.get('email')``undefined`

```
console.log(undefined) 
```

调用的参数将在您调用函数时`console.log`进行评估（但传递给的最终结果`console.log`不会取消引用！），而不是在它完成执行并将内容放入控制台时。

因此，您将各种异步事物混合在一起，其中就存在混乱。

如果您将代码更改为此：

```
@user = new models.User
@user.fetch(success: =>
    console.log(@user) 
    console.log(@user.get('email'))   
) 
```

你会得到你期望的结果。

# jquery - jQuery focus() on textbox on button click ipad

> ID：10944051
> 
> 赞同：2
> 
> 时间：2012-06-08T06:32:55.990
> 
> 标签：jquery, ipad, focus

我正在使用 jQuery 和 HTML5 在 iPad 上开发应用程序。

我想将焦点`textbox`放在按钮单击上。按钮功能是清除`textbox`值。清除值后，我希望焦点在`textbox`.

我的代码是：

```
function onclickclearbtn(){
    $('#txtbox').val('');
    $('#txtbox').focus();
} 
```

我正在使用 jquery 1.4.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:55:43.883

我建议在文本字段内覆盖按钮。如[http://cor.to/focustest](http://cor.to/focustest) (http://fiddle.jshell.net/tomasdev/W8udu/show/light/)

为什么？iOS 没有提供一种方法，`.focus()`因为用户不断弹出键盘可能会很烦人。因此，它需要对输入进行真实的用户操作才能显示键盘。

我们所做的？只需在按钮上放置一个透明输入：)

# java - 如何在 Java Applet 中进行网站身份验证？

> ID：10944053
> 
> 赞同：0
> 
> 时间：2012-06-08T06:33:01.833
> 
> 标签：java, jakarta-ee, applet, http-authentication

我有一个无线网络摄像机，我想制作自己的网页来显示它的实时流。流的地址是`"http://192.168.1.2:8082/index.cgi"`（假定的），它需要用户身份验证。这意味着当我们在浏览器中输入上述 URL 时，它会要求输入用户名和密码。

我想要的是制作一个Java小程序，在加载Java小程序时，它应该验证URL并显示图像/流。

情况就是这样，现在的基本问题是

Q：Java小程序中如何进行Http认证？

我会感谢每一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:35:01.210

您可以通过创建一个[HttpURLConnection](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/HttpURLConnection.html)并在 URL 中附加用户名和密码来实现它。作为：

```
URL myURL = new URL("http://192.168.1.2:8082/index.cgi?username=user&password=");
HttpURLConnection myConnection = (HttpURLConnection) myURL.openConnection();
myConnection.setDoOutput(false);
int status = ((HttpURLConnection) myConnection).getResponseCode(); 
```

或者（而不是将用户名/密码附加到 url），您可以尝试（不确定 Applet 中是否允许）为 http 请求设置默认身份验证器，如下所示：

```
Authenticator.setDefault (new Authenticator() {
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication ("username", "password".toCharArray());
    }
}); 
```

您还可以使用非常易于使用的[Apache HttpComponents HttpClient 。](http://hc.apache.org/httpcomponents-client-ga/)要了解有关 HTTP 请求如何在 Java 中工作的更多信息，请参阅此[**答案**](https://stackoverflow.com/a/2793153/945945)。

# oracle10g - 按依赖顺序导入表的代码

> ID：10944054
> 
> 赞同：-1
> 
> 时间：2012-06-08T06:33:09.220
> 
> 标签：oracle10g, sqlplus, sqldependency

我在 Windows 环境中工作，并使用 Oracle SQL Developer。我有一个由大约 50 个 csv 文件组成的组织的整个数据库。每个对应一个表。有两个任务要执行

1.  我需要从头开始将整个数据导入到 oracle 数据库中。所以我需要考虑表的依赖关系，因此按特定顺序加载它们。我想自动化它，就像为它编写脚本或代码一样。我有整个依赖树。
    （即使它实际上只会执行一次）。
    您能否建议哪种语言适合该目的或我应该如何开始这项工作？

2.  完成所有上传后，如果我收到更新表的查询，则应更新所有必要的表。

顺便说一句，必须为许多其他组织完成这个过程。

我是 Oracle 的新手，所以如果你也可以为我提供一个很好的链接来学习

我找到答案的最接近的是 -> [Oracle Forms Dependency](https://stackoverflow.com/questions/10708887/oracle-forms-dependency)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:14:40.793

使用[SQL Loader](http://docs.oracle.com/cd/E11882_01/server.112/e22490/part_ldr.htm#i436326)完成此任务，它是为将文件加载到 Oracle 中而设计的。另请阅读有关外部表的信息，因为您可以避免完全加载它们。

# javascript - 获取 Facebook 用户 IP 地址

> ID：10944061
> 
> 赞同：0
> 
> 时间：2012-06-08T06:33:50.117
> 
> 标签：javascript, facebook, facebook-graph-api, ip

在我的项目中，用户通过 Facebook 登录按钮登录到我的应用程序。我得到了用户的所有详细信息，但如果用户没有位置，我需要根据他们的 IP 地址找到他的位置。有没有办法使用 Facebook API 根据用户的 IP 地址查找用户的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:50:09.627

使用 PHP，您可以使用`$_SERVER['REMOTE_ADDR']`. 我不知道是否可以通过 Javascript 获取 IP，但是您可以对您的服务器进行 AJAX 调用并让您的服务器以这种方式处理它。

您可以将 IP 与地理位置数据库进行比较，这里是[数据库列表](http://whatismyipaddress.com/geolocation-providers)。

请注意：本周早些时候启用了 IPv6，因此可能需要考虑两组 IP 地址。

# android - 将文件从计算机复制到 Android 手机

> ID：10944063
> 
> 赞同：0
> 
> 时间：2012-06-08T06:33:51.590
> 
> 标签：android, adb, file-copying

我尝试将文件从我的 PC 复制到手机，但它得到 IOException 错误。我为此任务编写了以下代码：

运行时 rt = Runtime.getRuntime(); rt.exec("adb pull mnt/sdcard/Samsung/Music/test.mp3 E:/");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:43:39.477

可能有两个原因：

1.  您可能没有访问该文件的权限。

2.  您的工作目录无权访问`adb`. 尝试将命令运行为：

    " `cmd /c /pathtoadb/adb.exe pull /pathtofile e:/tryadifferentdirectory/`"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:44:04.000

您还可以使用 Eclipse 中的 DDMS 工具将文件推送到设备中。从文件资源管理器中选择 mnt/sdcard，然后单击推送文件按钮。

# vba - 在 Excel 中更改单个列表框项的字体

> ID：10944064
> 
> 赞同：2
> 
> 时间：2012-06-08T06:33:51.630
> 
> 标签：vba, excel, excel-2007

我想更改列表框中单个项目的属性。我目前让用户从列表框中选择一个项目，然后将其作为参数传递以进行处理。我希望能够从列表中删除项目，或者更好的是，更改字体以便他们可以看到哪些项目必须处理，哪些项目已经完成。

我有以下代码：

```
Sub updateLaunchScreen_CrossDayOff()

Dim i As Long

     With ReadingsLauncher

        With .dayListBox
            For i = 0 To .ListCount - 1
                If .Selected(i) Then
                    .Font.Strikethrough = True
                End If
            Next i
        End With

    End With

End Sub 
```

但是，这会更改列表中的每个项目。

我已经用谷歌搜索了这个问题，但无法找到与更改列表框中单个列表项的属性相关的任何内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:14:56.293

> 我希望能够从列表中删除项目

如果您想删除该项目，那么我建议您这样做

```
Option Explicit

Private Sub CommandButton1_Click()
    If ListBox1.ListIndex > -1 Then
        ListBox1.RemoveItem (ListBox1.ListIndex)
    End If
End Sub 
```

> 或者，更好的是，更改字体，以便他们可以看到哪些项目需要处理，哪些项目已经完成。

如果您想查看哪些项目已被处理，则可以使用此选项。

使您的列表框成为带有复选框选项的多选列表框。见快照

![在此处输入图像描述](../Images/b37d67942c5c18b2cdf1db3369a185ba.png)

要获得这种类型的列表框，您可以在设计时或运行时设置属性。例如

**设计时间**

![在此处输入图像描述](../Images/076518c6571499d26b16b65d7804cf74.png)

**运行**

```
Private Sub UserForm_Initialize()
    With ListBox1
        .MultiSelect = fmMultiSelectMulti
        .ListStyle = fmListStyleOption
    End With
End Sub 
```

# java - 如何从arraylist检索多个值到jsp页面

> ID：10944065
> 
> 赞同：0
> 
> 时间：2012-06-08T06:33:52.817
> 
> 标签：java, jsp, servlets

我正在设置值的数组列表，例如

```
 <%  while (rss.next()) {
                arrlist.add(rss.getString("Trx_No"));
                arrlist.add(rss.getString("Trx_Date"));
                arrlist.add(rss.getString("Trx_amount"));
                arrlist.add(rss.getString("Trx_Admin")); } %> 
```

我有 20 个值

我想在字段的 Jsp 页面中设置这些。

我确实喜欢 `<%=Trx_No%>`，`<%=Trx_Date%>` `<%=Trx_amount%>` `<%=Trx_Admin%>`

问题是当我喜欢这个时，我得到了数组列表中最后 4 的值。我想要所有的值 intlo 表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:40:47.100

更好的方法是创建一个代表这个表的类，例如

```
class TrxHelper{
 private Integer no;
 private Date date;
 private Double amount;
 private Long admin;
 //accessors, and other required stuff
} 
```

从 servlet 从 DB 中获取数据并创建一个`List<TrxHelper>`并将其设置为请求属性并将其传递给 JSP，

在 jsp 上使用`<c:forEach>`并`<c:out>`以表格形式呈现它们

* * *

**看**

*   [Hello World #2（预处理请求）](https://stackoverflow.com/tags/servlets/info)

# wix - WiX Visual Studio 安装项目：如何在一个项目中构建不同的 msi，具体取决于预处理器变量

> ID：10944067
> 
> 赞同：3
> 
> 时间：2012-06-08T06:33:58.377
> 
> 标签：wix, setup-project

这样的情况：我有一个 wxs 构建文件。它基于 3 个预处理器变量：

```
Build=[Client\Server] 
Platform=[Win32\x64]
Configuration=[Release\Debug] 
```

我唯一需要做的就是创建一个 setup Visual Studio 项目，它可以一次构建我的安装包的所有这 8 个配置。

例如

```
Cmd.exe «candle.exe –dPlatform=Win32 –dConfiguration=Debug –dBuild=Server Product.wxs»
Cmd.exe «light.exe –ext WixUIExtension –ext WiXIISExtension Product.wixobj –out Product_Server(Release)_x86.msi» 
```

和

```
Cmd.exe «candle.exe –dPlatform=Win32 –dConfiguration=Release –dBuild=Server Product.wxs»
Cmd.exe «light.exe –ext WixUIExtension –ext WiXIISExtension hsm.wixobj –out Product_Server(Release)_x86.msi» 
```

但我不能使用基于命令提示符的解决方案。需要一个完全 WiX 设置解决方案。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:57:14.637

似乎是一个无法解决的问题。唯一的方法 - 创建不同的项目......从 vs 我们只能操作诸如“平台”和“配置”之类的预处理器变量。每个额外的预处理器变量都会迫使我们在“variable_range”中使用多个解决方案。

显而易见的建议是将您的源代码分开在不同的文件中。只是为了同意您对每个构建的正确开发方式的关注。但是这种方式给源代码带来了更多的可读性。

可能会被删除......但是，如果有人知道这个问题的真正解决方案......请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T10:15:13.383

您可以通过创建新的构建配置来创建单独的输出。例如，我们有两种使用非常相似的来源构建的产品。您可以在属性组中指定输出名称。它将手动编辑您的 wixproj，但会在 Visual Studio 中正常加载。

做这样的事情：

```
<PropertyGroup Condition=" '$(Configuration)' == 'Debug (App1)' ">
    <OutputName>App1</OutputName>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)' == 'Debug (App2)' ">
    <OutputName>App2</OutputName>
</PropertyGroup> 
```

Visual Studio 应显示两种配置 - 调试 (App1) 和调试 (App2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T16:02:17.640

我花了最后 1/2 天试图解决这个问题。在我看来，唯一的方法是单独的项目。我*正在*尝试对项目进行命令行重新编译，但似乎 MSBuild 在编译 wixproj 文件时没有检测到构建属性的更改，然后在我运行“干净”后 WiX 编译器没有拾取正确的源文件强制重新编译。

至少对于多个​​项目，源代码可以共享并在一个解决方案中全部使用。

# php - 解析 X509 证书

> ID：10944071
> 
> 赞同：4
> 
> 时间：2012-06-08T06:34:25.110
> 
> 标签：php, parsing, openssl, x509certificate, mdm

我想在 php 中解析 X.509 证书。

**该证书采用 DER 编码的 X.509 格式。**

我尝试`openssl_x509_parse method`在 php 中使用，但它不起作用。证书数据是在 mdm 中为 CertificateList 触发命令后收到的有效数据。

我正在使用以下代码：

```
$data = 'MIIDizCCAnMCCQDCpCAUbA2P4TANBgkqhkiG9w0BAQUFADBrMSIw
    IAYDVQQKDBkqLnNtYXJ0c291cmNpbmdnbG9iYWwubmV0MSEwHwYD
    VQQLDBhEb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxIjAgBgNVBAMM
    GSouc21hcnRzb3VyY2luZ2dsb2JhbC5uZXQwHhcNMTIwNTI5MTM1
    NTU0WhcNMTMwNTI5MTM1NTU0WjCBozELMAkGA1UEBhMCTlkxCzAJ
    BgNVBAgTAk5KMQswCQYDVQQHEwJOSjEiMCAGA1UEChMZU21hcnRz
    b3VyY2luZyBHbG9iYWwgSU5DLjEPMA0GA1UECxMGTW9iaWxlMRYw
    FAYDVQQDEw1TbWl0YSBZZWRla2FyMS0wKwYJKoZIhvcNAQkBFh5z
    bWl0YXlAc21hcnRzb3VyY2luZ2dsb2JhbC5jb20wggEiMA0GCSqG
    SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDHDx238L+j6fA9h9lNnrl5
    f/wXZoWWw72rChisVOszBl8uoT6DATngvCdBPJgJP/ddpAzJnFWW
    N8bCbB+88siae2kO2a6mg3+NPNRUqpOJOpPIrWlgS5qf9Gs6WQi3
    DRJvLSZ3uoalAvSpfveCbuHW0yFuzvnriwV3phd9fVbORi+qNW/b
    RofF1PjA+Bx8E2WfNUTHL71K+pfbVvCV1E5bQNrz6mpbRbzNThQz
    y92Y/Lp4VW/AYK6Jk6davxNcKSbTk/pHYNTD8Y/g1l1xhY3YpXfD
    xhehEL9/1LmwpmG+JZcmjIQX6LzBoUHbRrmsV8magfZ/cODR3/YY
    qfu6QnVLAgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAEH3LA7IpfRb
    ylzHjm4DmiTYMMoTKV8I3VX98F2DQEZ0S7OTT2xA7qnyeHDUUAMw
    Amx/v/PS1fWNzFoD3DaAZlRvkd0LD9bPA3bXnzPrX90o2e9Y+4UY
    iy1LvPRiwqoLiOikpxBI3ZVhBqQpYBvw2xedFCEFwlhz7QcfdpRl
    1XNWedpHT+icGrn/h12SJvL5FTFAh2LapRXb5EmT2mbFVAIqfW2Q
    IRCDpyrPxX+61p4wvyJ0SP1EoEvbtMmeRfpyuKKhWlYTqmuOOYU2
    8C2REc5qhPkbSDdGpeme0w/hPlwG6+0UEXHUeArSKlQOM/YR4vao
    OKwh1dJL4RZWgmwwHq9=';

$fp = fopen('cert.txt','w+');
fwrite($fp, 'data=>'.openssl_x509_parse($data,true));
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T07:38:32.297

那么您的证书缺少 PEM 附件。如果您将这些`BEGIN CERTIFICATE`和`END CERTIFICATE`标记添加到您的证书中，它应该可以工作：

```
<?php
$data = // ... your certificate

// Add the missing PEM-enclosing
$x509Data =
      "-----BEGIN CERTIFICATE-----\n"
    . $data
    . "\n-----END CERTIFICATE-----";

// this is the same but I've added "print_r" so it is nicely formated
$fp = fopen('cert.txt','w+');
fwrite($fp, 'data=>'.print_r(openssl_x509_parse($x509Data,true), true));
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T20:21:37.763

[phpseclib 是一个纯 PHP X.509 解析器](http://phpseclib.sourceforge.net/)，可以处理您的字符串，而无需将其封装在任何东西中。例如。

```
<?php
include('File/X509.php');

$x509 = new File_X509();
$cert = $x509->loadX509('MIIDizCCAnMCCQDCpCAUbA2P4TANBgkqhkiG9w0BAQUFADBrMSIw
    IAYDVQQKDBkqLnNtYXJ0c291cmNpbmdnbG9iYWwubmV0MSEwHwYD
    VQQLDBhEb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxIjAgBgNVBAMM
    GSouc21hcnRzb3VyY2luZ2dsb2JhbC5uZXQwHhcNMTIwNTI5MTM1
    NTU0WhcNMTMwNTI5MTM1NTU0WjCBozELMAkGA1UEBhMCTlkxCzAJ
    BgNVBAgTAk5KMQswCQYDVQQHEwJOSjEiMCAGA1UEChMZU21hcnRz
    b3VyY2luZyBHbG9iYWwgSU5DLjEPMA0GA1UECxMGTW9iaWxlMRYw
    FAYDVQQDEw1TbWl0YSBZZWRla2FyMS0wKwYJKoZIhvcNAQkBFh5z
    bWl0YXlAc21hcnRzb3VyY2luZ2dsb2JhbC5jb20wggEiMA0GCSqG
    SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDHDx238L+j6fA9h9lNnrl5
    f/wXZoWWw72rChisVOszBl8uoT6DATngvCdBPJgJP/ddpAzJnFWW
    N8bCbB+88siae2kO2a6mg3+NPNRUqpOJOpPIrWlgS5qf9Gs6WQi3
    DRJvLSZ3uoalAvSpfveCbuHW0yFuzvnriwV3phd9fVbORi+qNW/b
    RofF1PjA+Bx8E2WfNUTHL71K+pfbVvCV1E5bQNrz6mpbRbzNThQz
    y92Y/Lp4VW/AYK6Jk6davxNcKSbTk/pHYNTD8Y/g1l1xhY3YpXfD
    xhehEL9/1LmwpmG+JZcmjIQX6LzBoUHbRrmsV8magfZ/cODR3/YY
    qfu6QnVLAgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAEH3LA7IpfRb
    ylzHjm4DmiTYMMoTKV8I3VX98F2DQEZ0S7OTT2xA7qnyeHDUUAMw
    Amx/v/PS1fWNzFoD3DaAZlRvkd0LD9bPA3bXnzPrX90o2e9Y+4UY
    iy1LvPRiwqoLiOikpxBI3ZVhBqQpYBvw2xedFCEFwlhz7QcfdpRl
    1XNWedpHT+icGrn/h12SJvL5FTFAh2LapRXb5EmT2mbFVAIqfW2Q
    IRCDpyrPxX+61p4wvyJ0SP1EoEvbtMmeRfpyuKKhWlYTqmuOOYU2
    8C2REc5qhPkbSDdGpeme0w/hPlwG6+0UEXHUeArSKlQOM/YR4vao
    OKwh1dJL4RZWgmwwHq9=');

print_r($cert);
?> 
```

它总体上也更加通用。与[OpenSSL 一样，要求每行长度为 64 个字符且不再需要](https://stackoverflow.com/a/13908986/569976)。phpseclib otoh 不在乎。

# php - 通过 php &ajax 列出美国的名字

> ID：10944073
> 
> 赞同：0
> 
> 时间：2012-06-08T06:34:33.900
> 
> 标签：php, ajax

我正在尝试编写程序，它要求用户输入一些字母或字符串，并通过这个字符串，列出这些城市，这个字符串或字母是我有以下 html 文件的前缀

```
<html>
<head>
<script>
function showHint(str)
{
var xmlhttp;
if (str.length==0)
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","USA.php="+str,true);
xmlhttp.send();
}
</script>

</head>
<body>
<h3>entering  any city names which you like  </h3>
<form action="USA.php" method="post" >
CITY :<input type="text" name="city" value=" " onkeyup="showHint(this.value)"></br>
<input type="submit" value="Submit"/>
</form>

<p>Suggestions: <span id="txtHint"></span></p> 
</body>
</html> 
```

还有 USA.php 文件

```
<html>
<body>
<?php
$c=$_GET['city'];
$d=strlen($c);

$filename=file("UScities.txt");
$out=" ";
foreach ($filename as $line)
{

if (strtolower($c)==substr($line,0,$d)){
if($out=="")
{
$out=$line;
}
else
{
$out=$out. ' , ' . $line;
}
}
}
echo $out

?>
</body>
</html> 
```

但是当我在Firefox中运行它时，它给了我以下错误

> 注意：未定义索引：第 4 行 C:\xampp\htdocs\united\USA.php 中的城市

但我无法理解这个错误，为什么城市未定义索引？编辑：

```
html code
<html>
<head>
<script>
function showHint(str)
{
var xmlhttp;
if (str.length==0)
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET", "USA.php?city="+str, true);
xmlhttp.send();
}
</script>

</head>
<body>
<h3>entering  any city names which you like  </h3>
<form action="USA.php" method="post" >
CITY :<input type="text" name="city" value=" " onkeyup="showHint(this.value)"></br>
<input type="submit" value="Submit"/>
</form>

<p>Suggestions: <span id="txtHint"></span></p> 
</body>
</html> 
```

.php 文件

```
<html>
<body>
<?php
$c=$_POST['city'];
$d=strlen($c);

$filename=file("UScities.txt");
$out=" ";
foreach ($filename as $line)
{

if (strtolower($c)==substr($line,0,$d)){
if($out=="")
{
$out=$line;
}
else
{
$out=$out. ' , ' . $line;
}
}
}
echo $out

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:37:42.997

您在 JavaScript 中查询字符串是错误的。更改以下行：

```
xmlhttp.open("GET", "USA.php?city="+str, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:38:06.383

这里试试这个：

```
xmlhttp.open("GET","USA.php?city="+str,true); 
```

好的，这就是问题所在。您请求提示`USA.php`并且您也提交了您的表格`USA.php`。然而，在请求提示列表时，您使用了

`xmlhttp.open("GET","USA.php?city="+str,true);`

但是你形成了使用过的 post 方法

`<form action="USA.php" method="post" >`

问题出在`USA.php`你用过的帖子上

`$c=$_POST['city'];`

我建议你改变ff。

`$c=$_POST['city'];`=>`$c=$_GET['city'];`

`<form action="USA.php" method="post" >`=>`<form action="USA.php" method="get" >`

* * *

最后编辑：将您的条件更改为我的朋友。和你的一切！

`if (strtolower($c)==strtolower(substr($line,0,$d)))`

# cakephp - cakephp - 在非管理员操作中禁用 ACL

> ID：10944080
> 
> 赞同：0
> 
> 时间：2012-06-08T06:35:00.120
> 
> 标签：cakephp, acl

我不再是蛋糕里的菜鸟了。尽管使用现金机制，但我在网站上传时遇到了糟糕的性能问题。我怀疑 ACL 机制是性能不佳的罪魁祸首。由于我不需要每个用户执行不同的操作，我宁愿为非管理员功能禁用此功能，但为管理员启用它。可以做到吗？请指教。谢谢奥利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:42:22.033

你不需要ACL！我建议您删除 ACL 并使用 Auth 组件。

对 admin 部分使用 Auth 组件和 Admin 前缀。

# wpf - WPF PreviewKeyDown 错误

> ID：10944081
> 
> 赞同：1
> 
> 时间：2012-06-08T06:35:01.793
> 
> 标签：wpf, textbox

我有下面的代码。有个小问题，当我在“.”后面输入两个以上的数字时，它会一直提示我（“不超过两位小数。”）...

当我有 .XX 并单击退格键时，它也会提示我消息。

如何自动擦除“。”之后的第三个数字？

```
private void textbox1_PreviewKeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Space)
    {
        MessageBox.Show("No space allowed.");
        e.Handled = true;
    }
    string[] array = textbox1.Text.Split(new char[] { '.' });
    if (array.Length == 2)
    {
        if (array[1].Length == 2)
        {
            MessageBox.Show("No more than two decimal places.");
            e.Handled = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:52:47.913

我用了

```
if (e.Key != Key.Back) 
```

停止退格问题。

现在没事了。

# java - JVM 崩溃时，Sun JDK 能否生成核心/堆转储文件？

> ID：10944082
> 
> 赞同：10
> 
> 时间：2012-06-08T06:35:05.517
> 
> 标签：java, coredump, jvm-crash

当JVM崩溃时，是否有生成核心/堆转储文件？因为这些文件通常非常有助于找出代码中的错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T06:39:25.967

使用以下 JVM 选项：

```
-XX:+HeapDumpOnOutOfMemoryError 
-XX:HeapDumpPath="/tmp" 
```

JVM 会将堆的内容转储到指定目录中的文件中。请注意，这仅在`OutOfMemoryError`抛出时发生，因为如果 JVM 由于其他原因而崩溃，则不需要转储。

*编辑：“布尔选项使用 -XX:+ 打开并使用 -XX:- 关闭。” [文档](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:38:58.273

您可以使用[`-XX:HeapDump`JVM 选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)。

# bash - 解析带引号的字符串

> ID：10944089
> 
> 赞同：0
> 
> 时间：2012-06-08T06:36:02.053
> 
> 标签：bash

我正在尝试从 http 日志文件中检索主机。通常，我会做类似的事情：

```
cat proxy.log | awk '{ print $16 }' 
```

但是，日志文件的格式如下：

```
2012-05-21 05:55:01 503 <client_ip> - - - OBSERVED "Entertainment" - 200 TCP_RESCAN_HIT GET text/xml;%20charset=UTF-8 http <server_ip> <server_host> 80 / ?feed=rss2 - "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3; MS-RTC LM 8; Microsoft Outlook 14.0.6025; ms-office; MSOffice 14)" <proxy_ip> 13356 479 - 
```

如您所见，一些字段被引用，并且具有动态数量的空格。这意味着 16 美元并不总是返回主机。我可以使用 shlex.split() 在 python 中解决这个问题，它返回一个数组。

但是我使用的一些系统没有安装 python，我想知道这如何使 bash 脚本（使用标准 gnu 工具）以我可以一致地解决即 16 美元的方式拆分日志条目。

如果读者有同样的问题并且有 python 可用，这是我的 python 解决方案：

```
#!/usr/bin/env python

import shlex, sys, string
EOF = ""
if len(sys.argv) == 2:
        try:
                field = int(sys.argv[1])
        except ValueError:
                print "error: <field_no> must be a positive integer"
                sys.exit(1)
else:
        print "usage: %s <field_no>" % sys.argv[0]
        sys.exit(1)

def process(line):
        line = string.strip(line)
        line = shlex.split(line)
        return line[int(sys.argv[1])]

line = sys.stdin.readline()
while not line == EOF:
        sys.stdout.write(process(line)+"\n")
        line = sys.stdin.readline() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:15:06.360

如果该`GET (something) http <server_ip>`位可靠，您可以像这样使用 GNU sed：

```
$ cat proxy.log
2012-05-21 05:55:01 503 <client_ip> - - - OBSERVED "Entertainment" - 200 TCP_RESCAN_HIT GET text/xml;%20charset=UTF-8 http <server_ip> <server_host> 80 / ?feed=rss2 - "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3; MS-RTC LM 8; Microsoft Outlook 14.0.6025; ms-office; MSOffice 14)" <proxy_ip> 13356 479 -
$ cat proxy.log | sed -r 's/^.*(GET|POST) [^ ]+ http ([^ ]+) .*$/\2/'
<server_ip> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:39:51.937

我会尝试匹配一个字段，其中前一个字段是 IP 地址，下一个字段是整数：

```
perl -MRegexp::Common -ane '
  $n=16;
  while ($n < @F) {
    if ($F[$n-2] =~ /$RE{net}{IPv4}/ and $F[$n] =~ /^\d+$/)
      print "$F[$n-1]\n";
      break;
    }
    $n++;
  }
' filename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:25:39.500

如果您只想摆脱可变数量的空格，可以在 awk 之前使用 sed

```
cat proxy.log | sed 's/  */ /g' | awk '{ print $16 }' 
```

使用替换 s/ */ /g 任何正数的空格都被剥离为一个

# algorithm - 在搜索引擎查询日志中查找趋势

> ID：10944091
> 
> 赞同：1
> 
> 时间：2012-06-08T06:36:04.133
> 
> 标签：algorithm, data-mining

我正在尝试对搜索查询日志进行一些研究。我的第一个兴趣是发现趋势。例如：冬天人们经常患唇疱疹。所以我想在冬天我们可以看到这种类型查询的增长。

我想如何检测趋势：

1.  使用先验算法或其他东西来获得频繁项集。
2.  计算时间范围内每组的数量（一小时，一天等）
3.  如果这是回归 ax + b，则使用线性回归找到相对函数变化，然后我们只需计算 (a*(first_date)+b)/(a*(second_date)+b)

所以我有一个问题：很难在大量数据集上找到频繁项集（我有数百万个查询）。我已经实现了 apriory 算法，但它的工作速度很慢，支持率很低（例如 200k 查询中的 2 次可能需要一天时间）

在我的情况下，最好的算法是什么？也许我可以用另一种方式解决我的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:25:52.820

这是一个将其缩小到仅计算请求时间范围内的字符串的方法，而不是整个集合。
将您的查询存储在排序的可扩展数据结构中 - 我认为[跳过列表](http://en.wikipedia.org/wiki/Skip_list)非常适合这里。
跳过列表中的查询顺序将按时间升序排列。
注意：将新查询添加到跳过列表很容易 - 您总是附加它，因为它总是“更大”然后（发生在所有现有查询之后）。

现在，当您需要搜索时间范围时 - 您不需要遍历所有查询，而是仅在它的相关部分上进行迭代，因为可以在跳过中快速找到时间范围的第一个和最后一个元素列表。

为了提高效率，我会使用双映射为每个字符串提供唯一的 ID，并且只存储 ID。从 ID 中创建直方图可能比为原始字符串创建直方图更容易（从计算上讲）。找到最常见的 ID 后 - 您可以从映射中推断出它们引用的字符串。

# asp.net - 将数据从一个数据库复制到另一个位于远程位置的数据库

> ID：10944093
> 
> 赞同：0
> 
> 时间：2012-06-08T06:36:11.903
> 
> 标签：asp.net, sql-server

我在本地有一个数据库，在远程位置有一个类似类型的数据库，现在每分钟我的本地数据库将插入大约 50 到 100 条记录。同时，我必须将这些记录插入到远程数据库中，该数据库位于具有公共 IP 的数据库服务器中。不会有任何 LAN 或 WAN，这必须使用 Internet 完成，但是可以使用公共 IP 访问该服务器，是否有可能我可以使用触发器或 SQL 服务器本身的某些东西来做到这一点？或者我应该使用.NET编写一些网络服务（基本上.net应用程序正在将数据记录到这个数据库中。请帮助我。谢谢，Rama

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:21:37.070

您还可以创建一个 Windows 服务，该服务将更新远程服务器中的数据。如果您不想使用数据库的复制。

基本的想法是这样的。

Windows 服务将监视数据库更改以及是否有任何更改。它将使用 SQLBulkyCopy 类上传所有更改。

要了解有关 SQLBulkCopy 类的更多信息，请访问以下链接。 [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

这是 SQLBulkCopy 类的一个工作示例 - [http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server](http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:05:38.997

[事务复制](http://msdn.microsoft.com/en-us/library/ms151176#HowWorks)可以通过 Internet 部署，建议[使用 VPN](http://msdn.microsoft.com/en-us/library/ms152569.aspx)（或[DirectAccess](http://technet.microsoft.com/en-us/network/dd420463.aspx)）。另一种方法是使用[Service Broker 而不是 Replication](http://itknowledgeexchange.techtarget.com/sql-server/using-service-broker-instead-of-replication/)。

**不起作用**的东西是 Web 服务调用、触发器、.Net 自定义应用程序和类似的东西。当涉及到保持事务完整性（保证*两台*服务器上的提交或回滚）、检测数据更改、远程数据库关闭或可访问时的应用程序可用性（考虑修补）、可维护性、可服务性，更不用说处理任何一个的[HR/DR](http://msdn.microsoft.com/en-us/library/ms190202.aspx)解决方案网站，所有这些解决方案在现实生活中都失败了。

# asp.net-mvc-3 - ajax 仅适用于表的第一行

> ID：10944095
> 
> 赞同：0
> 
> 时间：2012-06-08T06:36:23.813
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我正在使用 asp.net MVC3 在我看来，我在表中显示一个表我有一个名为“附加文件”的每一行的链接，此链接将通过 ajax 调用调用控制器函数

```
@Html.HiddenFor(modelItem => item.CourseID, new { @id = "CourseID", @Class="courseiding"})
@Html.HiddenFor(modelItem => item.PrtfID, new { @id = "prtfID" , @Class="prtfiding"})
@Html.ActionLink("Attach a file", "Index", null, new { @Id = "attchlink" }) 
```

阿贾克斯：

```
 $('#attchlink').click(function (e) {
        window.formCount = 0;
        e.preventDefault();
       var id = $('.prtfiding').val();
        var size1 = $('.sizing').val();
        var url2 = '@Url.Action("Index")';
        $.ajax({
            url: url2,
            data: { pid: id, size: size },
            cache: false,
            type: 'POST',
            success: function (data) {
                $('#result').html(data);
            }
        });
    }); 
```

这对所有行都有效，但是在传递 id 和 size 中的值时……它只为所有行传递第一行的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:45:15.120

元素的[Id 属性](http://www.w3schools.com/tags/att_standard_id.asp)在页面上应该是唯一的。

你的问题是你有多个相同的链接，`Id = "attachlink"`当你调用`$('#attachlink')`jQuery 时只使用第一个。

要解决这个问题，您应该使用类而不是`Id`：

```
@Html.ActionLink("Attach a file", "Index", null, new { @class = "attachlink" })

$('.attachlink').click(function (e) {

} 
```

然后您可以使用该`.closest()`函数在单击事件中获取“最大”值：

```
var id = $(this).closest('.prtfiding').val();
var size1 = $(this).closest('.sizing').val(); 
```

`data-`或者，您可以将所有必需的数据以属性的形式放在 ActionLink 上：

```
@Html.ActionLink("Attach a file", "Index", null, 
    new 
    { 
         @Id = "attchlink",
         data_courseID = item.CourseID,
         data_prtfID = item.prtfID
    }) 
```

在您的 js 函数中，您可以通过以下方式访问它们：

```
var courseID = $(this).data('courseID');
var prtfID = $(this).data('prtfID'); 
```

如果您在其他地方不需要隐藏字段，则可以使用这种方法将其删除。

# mysql - MySQL 索引 | 与 LIKE 一起使用

> ID：10944098
> 
> 赞同：0
> 
> 时间：2012-06-08T06:36:37.543
> 
> 标签：mysql, indexing

我有一张桌子说“abcd”

内容如下

```
ID | email       | 

24 | abcd@g.com  | 
23 | asdsa@gm.com|
32 |asd@ggm.com  | 
```

现在，我在（ID，电子邮件）上创建了一个索引

当我执行查询时， EXPLAIN SELECT * FROM abcd WHERE ID='23'; 我可以看到正在使用该索引。

但是，当我将查询更改为 EXPLAIN SELECT * FROM abcd WHERE ID LIKE '2%';

该索引不再被使用

为什么会这样？不应该在这两种情况下都使用索引吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:45:38.880

MySQL 使用基于[成本的优化器](http://dev.mysql.com/doc/refman/5.1/en/optimizer-issues.html)。它将评估使用索引的成本与不使用索引的成本。

*   如果您的表只有三行，则是否使用索引几乎没有什么区别，因此 MySQL 可以选择任一计划。
*   不正确的统计数据可能会导致本应使用的索引不被使用。
*   如果您的表中有两列以上并且只有几行，那么不使用索引可能会更便宜，因为无论如何都必须扫描所有行（对于 int 类型的列没有 LIKE 优化）。当您进行完全扫描并拥有时，使用索引几乎没有优势`SELECT *`（顺便说一句，这是一种不好的做法）。

话虽如此，我无法重现您的结果。当我尝试您的查询时，MySQL 总是使用索引。

在线查看：[sqlfiddle](http://sqlfiddle.com/#!2/04522/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T06:54:52.190

如果你的 ID 是整数类型，它的索引不会像字符串索引那样工作：它不会在内部使用十进制数字，而是使用固定长度的二进制表示

想一想：“2%”必须匹配这些数字：

```
2
20
200
2000
... 
```

但是对于 MySQL 引擎来说，将 '2%' 与这些表示相匹配并不是一件容易的事：

```
0x0002
0x0014
0x00C8
0x07D0
0x4E20
... 
```

虽然理论上它可以在内部将“2%”模式转换为以下内容：

```
 ID BETWEEN   20 AND   29
OR ID BETWEEN  200 AND  299
OR ID BETWEEN 2000 AND 2999 
```

我觉得极不可能。

# xamarin.ios - 如何从静态库访问 Interface Builder 中的自定义类

> ID：10944099
> 
> 赞同：4
> 
> 时间：2012-06-08T06:36:49.337
> 
> 标签：xamarin.ios, interface-builder, static-libraries

再会，

我有一个静态库（libGPUImage.a），它包含一个类`GPUImageView`，我想`GPUImageView`在 Interface Builder 中使用。

我试图将静态库添加到 XCode 中的项目中。它没有显示在自定义类下拉列表中，当我手动编写它时，我在构建时收到错误“ **IPLab [7909:1507] Unknown class GPUImageView in Interface Builder file.** ”。

`GPUImageView`如果我在静态库中有 Interface Builder，我该如何介绍它？

顺便说一句，我正在使用 MonoTouch 并试图绑定库。

谢谢你。

# jquery - jquery在img src中添加变量

> ID：10944102
> 
> 赞同：2
> 
> 时间：2012-06-08T06:36:59.190
> 
> 标签：jquery

我有一些用 php 创建的图像，我想把它们中的每一个都放在一个 li 中。这是我的工作代码：

```
 for ( i = 0; i < MaxNum; i++) {
            $('li#' + i + '').html('<img src="http://www.address.com/somephp.php?Num=1" />')
        } 
```

我现在要做的就是将 i 变量放入图像源中，以便获得如下内容：

```
 for ( i = 0; i < MaxNum; i++) {
            $('li#' + i + '').html('<img src="http://www.address.com/somephp.php?Num="+i />') 
```

此代码不起作用。有可能用这种方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T06:39:15.103

```
for ( i = 0; i < MaxNum; i++) {
 $('li#' + i).html('<img src="http://www.address.com/somephp.php?Num='+ i +'" />')
} 
```

**你的代码有问题**

`'<img src="http://www.address.com/somephp.php?Num="+i />'`在此代码`i`中被视为**String**，而不是变量。

### 不是问题，但更好

从 中删除`+ ''`部分`$('li#' + i + '')`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:39:23.870

i 仍然在你的字符串中，你需要这样的东西：

```
for ( i = 0; i < MaxNum; i++) {
  $('li#' + i + '').html('<img src="http://www.address.com/somephp.php?Num='+i+'" />');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T06:38:35.243

你只是有报价问题。用这个 ：

```
 for ( i = 0; i < MaxNum; i++) {
$('li#' + i).html('<img src="http://www.address.com/somephp.php?Num='+i+'"/>') 
```

SO 用不同的颜色显示字符串中的内容和不包含的内容。选择一个执行相同着色的文本编辑器，以便更容易发现这些错误。

我还删除`+ ''`了选择器中的无用处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T06:41:16.553

```
for ( i = 0; i < MaxNum; i++) {
  $('li#' + i + '').html('<img src="http://www.address.com/somephp.php?Num="'+i+'" />');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T06:49:37.547

```
for ( i = 0; i < MaxNum; i++) {
 $('li#' + i).html('<img src="http://www.address.com/somephp.php?Num='+ i +'" />')
} 
```

# c++ - 多个继承类引用

> ID：10944106
> 
> 赞同：0
> 
> 时间：2012-06-08T06:37:16.593
> 
> 标签：c++, class, multiple-inheritance, virtual-functions

假设我有一对基类：

```
class A
{};

class B
{
    virtual void foo(A* ref);
    virtual void foo2(A* ref);
}; 
```

从他们那里，一些派生类：

```
class C : virtual public A
{
   int data;
};

class D : public B
{
    virtual void foo(A* ref)
    {
        ((C*) (ref)).data = 5;
    }
};

class E : virtual public A
{
    int otherData;
};

class F : public B
{
    virtual void foo2(A* ref)
    {
        ((E*) (ref)).otherData = 6;
    }
}; 
```

最后，我们有一个效仿的类，如下所示：

```
class G : public E, public C
{
}; 
```

主要功能如下：

```
int main()
{
   B* myD = new D();
   B* myF = new F();

   A* myA = new G();

   myD->foo(myA);
   myF->foo2(myA);

   return 0;
} 
```

好的，忽略这是一个“可怕的钻石”的明显事实（由于 ，“多重 As”问题已被避免`virtual`），一般的想法是我希望我的所有对象都是 Gs、Ds 和 Fs，但是存储为对 As 和 Bs 的引用。我希望能够使用 B（实际上总是 D 或 F）虚函数来修改 G 的值......但是，A 和 B 不知道它们的任何子类，因此不能使用声明他们。这意味着虚函数参数必须始终是指向 A 的指针。但是，D 希望它的输入始终是 C，而 F 希望它的输入始终是 E。虽然如果 G 是，这可能不是问题仅从一个父级继承，我们当前的 G 是从两个父级继承的；我不知道如何`this`指针实际上在这种情况的基础上下文中工作......但是，我不认为这将是一种可能的情况。

是否有人愿意阐明将指针转换为父/子类的机制，以及是否有任何方法可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:00:02.940

假设您已打开 RTTI，您很可能会这样做，您可以使用**dynamic_cast**尝试将基类指针向上转换为派生（或兄弟）类指针。引用的对象在运行时进行测试以查看它是否是兼容的类，如果这不是有效的向上转换，则它将返回 0，在这种情况下，您可以测试该对象并进行分支。

[http://en.wikipedia.org/wiki/Dynamic_cast](http://en.wikipedia.org/wiki/Dynamic_cast)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:47:37.607

由于`A`是 的虚拟基础`G`，因此您不能将`A`指针`G`静态转换为指针。的全部含义`virtual`是“在运行时确定”，因此`A`您拥有指针的 -subobject 的性质只能在运行时知道。例如，在您的情况下，请考虑：

```
A * p = new G, q = new C; 
```

现在`p`和都`q`指向*某个* `A`子对象，但包含它们的最派生对象的性质仅由实际派生最多的类型决定。因此，不可能有一个单一的、固定的转换规则 from `A*`to`G*`或 from `A*`to `C*`。

执行强制转换的唯一方法是动态的，即通过`dynamic_cast<C*>(p)`等。

（相比之下，在非虚拟继承中，始终知道子对象与其更多派生对象的关系，因此*可以*静态转换指针。如果您有多个重复的基，可能会出现命名歧义的问题，但没有问题定位基础子对象。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:41:27.713

正如 Kerrek 和 Andrew 所说，您应该使用`dynamic_cast`. 但是，如果 的孩子`A`是静态的，您可以使用不同的技巧，这可能比`dynamic_cast`（因为它不依赖于 RTTI，请参阅[此问题](https://stackoverflow.com/questions/4050901/performance-of-dynamic-cast)以获取更多信息）更快。

```
class C;
class D;
class E;
class F;

class A
{
public:
    virtual C * isC () { return 0; }
    virtual E * isE () { return 0; }
};

class C : virtual public A
{
    friend class D;
    int data;
    C * isC () { return this; }
};

class E : virtual public A
{
    friend class F;
    int otherData;
    E * isE () { return this; }
}; 
```

现在，`D`可以`F`查询`A`是否`isC`或`isE`返回一个有效的指针。

# php - 多个 jQuery.ajax 和数据

> ID：10944108
> 
> 赞同：0
> 
> 时间：2012-06-08T06:37:30.460
> 
> 标签：php, jquery, ajax

您好，我正在 php 中做一个应用程序，我有一个项目列表，其中包含另一个项目的列表。所以我有一个加载第一个项目列表的代码，但想法是里面的另一个项目可以由 ajax 加载：

```
function cargar(ids) {
  jQuery.ajax({
    url: "index.php?controller=descripcion&id=ids",
    dataType: "HTML",
    type: "POST",
    start: document.getElementById('orden_descripcion').innerHTML = '... Cargando',
    success: function(datos) {                      
      //document.getElementById('orden_descripcion').innerHTML = datos;
      $('#data-1').html(datos);
      $('#data-1').html(datos); 
```

这个想法是在每个#data-# 中收取大量 jQuery ajax，但我希望“datos”会有所不同，请遵循 var ids（我的控制器将处理不同数据的 id），但我没有不知道怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:00:39.093

好吧，我在嵌套列表中放入了一个 javascript 函数，例如：

```
 <div id="orden-<var_id>">
                    <script type="text/javascript">     
                        cargar(<var_id>);       
                    </script>       
            </div> 
```

注意：有很多 orden-# div，因为它是数据库中的一个列表。

所以该函数是一个 jQuery.ajax 函数，其中显示不同类型的数据。

```
 <script type="text/javascript">
        function cargar(var_id) {
            jQuery.ajax({
                url: "index.php?controller=orden",
                data: "var_id="+var_id,
                dataType: "HTML",
                type: "POST",
                success: function(datos) {
                    $('#orden-'+var_id).html(datos);                
                }
            });
        }
    </script> 
```

非常感谢！

# linux - Linux 用户空间程序显示其内部计数器，类似于 /proc/meminfo

> ID：10944110
> 
> 赞同：0
> 
> 时间：2012-06-08T06:37:42.793
> 
> 标签：linux

在 Linux 中，我希望我的用户空间程序使用类似于 /proc/meminfo 的方法提供有关其内部计数器的信息：用户只需读取文件即可获取信息。

我正在考虑使用常规文件 /tmp/my_counters （/tmp 在易失性内存中）。但这可能会导致某些情况下，文件的读取可能会导致部分内容（如果程序没有同时完成写入）。

还有其他好的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:50:11.627

我通过实现一个简单的 libfuse 文件系统来做到这一点。当文件句柄打开时，计数器被原子读取到 fs 实现内的缓冲区中 - 然后客户端的 read 系统调用从该内存缓冲区中读取。这避免了您描述的同步问题，因为计数器的图像是在文件打开时拍摄的。

[http://fuse.sourceforge.net/](http://fuse.sourceforge.net/)

# php - 按自定义字段打印帖子 + 将它们分组到 div 中以进行滑动切换

> ID：10944115
> 
> 赞同：-4
> 
> 时间：2012-06-08T06:38:02.027
> 
> 标签：php, html, sql, wordpress, custom-post-type

我正在尝试使切换功能起作用，但由于我只有基本的 PHP 知识，我只是不知道如何让我`<div>`的 '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''“让我的 100

我的问题不是（jQuery）切换，而只是用于从数据库中获取 Wordpress 自定义帖子类型特定内容的 HTML/PHP 组合。这适用于我的代码，但现在我根本不知道如何将输出包装到我的 jQuery 函数所需的 div 中。

**所以首先：**

按 post_type 打印出所有 meta_values。在这种情况下，post_type = 艺术家，meta_value = 艺术家国家。

我打印了属于特定国家的所有艺术家，如下所示：

```
Argentina (artists_country)
 - Capitan Tifus (artist title)
 - Kapanga (artist title) 
```

这是我的div问题。我需要对属于一个国家的艺术家头衔进行分组（使用'main1'），但不对国家本身进行分组。

```
<div class="group">
<h3><a class="trigger">Country 1</a></h3>
<div id='main' class='side-toggle'>
   <h4 class="date"><a href="<?php the_permalink(); ?> rel="fancybox" title="the title">The Artist 1 of that country</a></h4>
   <h4 class="date"><a href="<?php the_permalink(); ?> rel="fancybox" title="the title">The Artist 2 of that country</a></h4>
</div><!--main--></div><!--group-->

<div class="group">
<h3><a class="trigger">Country 2</a></h3>
<div id='main1' class='side-toggle'>
   <h4 class="date"><a href="<?php the_permalink(); ?> rel="fancybox" title="the title">The Artist 1 of country 2</a></h4>
   <h4 class="date"><a href="<?php the_permalink(); ?> rel="fancybox" title="the title">The Artist 2 of country 2</a></h4>
</div><!--main--></div><!--group--> 
```

我试图弄清楚如何对艺术家进行分组。但是，无论我把 div 放在哪里，每个国家/地区都会有 1 位艺术家，我们的所有内容都会循环多次。所以我猜这是与我如何从数据库中获取内容有关的问题？

这是我的代码：

```
 // List posts by a Custom Field's values
    $meta_key = 'artists_country';  // The meta_key of the Custom Field
    $sql = "
   SELECT p.*,m.meta_value
   FROM $wpdb->posts p
   LEFT JOIN $wpdb->postmeta m ON (p.ID = m.post_id)
   WHERE p.post_type = 'artists'
      AND p.post_status = 'publish'
      AND m.meta_key = '$meta_key'
   ORDER BY 
    m.meta_value ASC, 
    p.post_title ASC
    ";
    $rows = $wpdb->get_results($sql);
    if ($rows) {

   foreach ($rows as $post) {
      setup_postdata($post);
      if ($post->meta_value != $current_value) {
          $current_value = $post->meta_value;
            echo ('<div class="group">'); 
                echo "<h3><a class='trigger' title='Click to expand'  rel='nofollow' href='#'>$post->meta_value  +</a></h2>";
                echo ("<div id='main1' class='side-toggle'>");
        }

      // Put code here to display the post
      echo ('<h4 class="date">');
      echo ('<a href="');
      the_permalink();
      echo ('" class="postlink" rel="fancybox" title="the title">');
      the_title();
      echo ('</a>');
      echo('</h4>');
     }
   echo('</div><!--main--> ');echo('</div><!--group--> '); 

    } 
```

ETC...

我在这里有一个链接：http: [//www.musicamestiza.nl/?page_id=4311](http://www.musicamestiza.nl/?page_id=4311)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:05:31.447

我认为您需要为此使用 js 或 jquery

```
$("#groupId").toggle(); 
```

无论如何试试这个

```
<div class="group">
<h2><a href="<?php echo $_SERVER['PHP_SELF']."?div=main2&display="; if(isset($_GET['div']) && $_GET['div']=='main2' && isset($_GET['display']) && $_GET['display']=='block'){ echo 'none'; } else { echo 'block'; } ?>" class="trigger">Country 2</a></h2>
<div id='main2' <?php if(isset($_GET['div']) && $_GET['div']=='main2' && isset($_GET['display']) && $_GET['display']=='block') { echo "style='display:none;'"; } else { echo "style='display:block;'"; } ?> class='side-toggle'>
<h2 class="date"><a href="<?php  ?> rel="fancybox" title="the title">The Artist 1 of country 2</a></h2>
<h2 class="date"><a href="<?php  ?> rel="fancybox" title="the title">The Artist 2 of country 2</a></h2>
</div><!--main--></div><!--group--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:03:51.410

在长时间使用 div 并尝试了许多不同的方法以按上述顺序按自定义字段打印帖子之后，将结束 div 移动到输出的开头做了一些技巧，如何与添加其他 div 相结合（谁不有任何其他功能）。（所以我用而不是开始输出。这不是一个好方法，但它符合我的目的，它可能是其他人的目的。如果有人有更好的解决方案，我当然想知道。

```
<?php /* Template Name: Count */ ?>
<div class="test">
<?php // List posts by a Custom Field's values
$meta_key = 'artists_country';  // The meta_key of the Custom Field
$sql = "
SELECT p.*,m.meta_value
FROM $wpdb->posts p
LEFT JOIN $wpdb->postmeta m ON (p.ID = m.post_id)
WHERE p.post_type = 'artists'
  AND p.post_status = 'publish'
  AND m.meta_key = '$meta_key'
ORDER BY 
m.meta_value ASC, 
p.post_title ASC 
";
$rows = $wpdb->get_results($sql);

if ($rows) {
echo ('<div class="test">'); 

foreach ($rows as $post) {

    setup_postdata($post);
    if ($post->meta_value != $current_value) {
            $current_value = $post->meta_value;
            echo "</div></div><div class='group2'><h3><a class='trigger2' title='Click to expand' rel='nofollow' href='#'>$post->meta_value  +</a></h3><div id='main1' class='side-left-toggle'>";
        }

    echo ('<h4 class="date">');
            echo ('<a href="');
            the_permalink();
            echo ('" class="postlink" rel="fancybox" title="the title">');
            the_title();
            echo ('</a>');
            echo('</h4>'); 
    }
    echo ('</div>');

 } //end if rows

?>
</div> 
```

# mongodb - 密码 SHA512 x 两次

> ID：10944118
> 
> 赞同：1
> 
> 时间：2012-06-08T06:38:07.497
> 
> 标签：mongodb, passwords, md5, sha

好的，我正在使用 MongoDB 作为我的数据库，我想知道我可以将这种类型的密码存储在 mongoDB 中吗

这是我的密码保存的内容，有谁知道这个密码是否可以被黑客入侵？

```
æýÛ¯'éÀP‡ÙÏß¼„Šg€ÝÜ-…eÒ$T¨(OKñÅ£ÌùÚJÕµÔ¤D4#—)g½Ð¸èËæVêæ#¥ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:38:37.133

可以这么说，每个密码最终都可能被破解。

记住散列和加密是两个不同的东西-> [http://en.m.wikipedia.org/wiki/Cryptographic_hash_function](http://en.m.wikipedia.org/wiki/Cryptographic_hash_function) & [http://en.m.wikipedia.org/wiki/Salted_hash](http://en.m.wikipedia.org/wiki/Salted_hash)。

散列是一种单向函数，因此攻击者通常会遍历单词列表中的一堆密码，对它们进行散列并搜索与他们窃取的散列密码匹配的内容。您的密码越长越复杂，以及使用随机盐对密码进行哈希处理，那么正如您所说，破解密码就越难。

如果您想了解有关密码的更多信息，请查看此链接 - [http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)。

以下是 MongoDB 网站上关于安全和身份验证的信息 - [http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-ChangingPasswords](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-ChangingPasswords)

这种类型的问题更适合[http://security.stackexchange.com](http://security.stackexchange.com)，那里有很多关于最近的 LinkedIn 和 LastFM 密码问题的讨论。

# php - Yii CGrid 分页和使用 CArrayDataProvider 排序不起作用

> ID：10944119
> 
> 赞同：6
> 
> 时间：2012-06-08T06:38:13.063
> 
> 标签：php, yii, yii-cmodel, zii-widgets

我在模型中构建了一个自定义函数并返回原始数据：

```
function(){
...
$connection=Yii::app()->db;
$command=$connection->createCommand($sql);
$rows=$command->queryAll();
return $rows;
} 
```

$campModel = $model->函数..

然后我在 CArrayDataProvider 中使用这些行：

```
$dataProvider=new CArrayDataProvider($campModel); 
```

最后我尝试使用 CGrid 查看：

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'bo-campaigns-grid',
'dataProvider'=>$campModel,... 
```

我猜这与 CGrid 分页的方式有关......但我迷路了谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T13:19:47.377

Create a new CSort and CPagination objects and assign them to your dataprovider, because CArrayDataProvider doesn't have them defined. Here is an example of CSort creation:

```
$dataProvider=new CArrayDataProvider($campModel);
$sort = new CSort();
$sort->attributes = array(
            'fecha'=>array(
                'asc'=>'dateA DESC',
                'desc'=>'dateA ASC',
            ),
);
$sort->route = 'myController/myMethod';
$dataProvider->sort = $sort;
$dataProvider->sort->defaultOrder='dateA DESC'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:57:09.567

尝试这个，

```
$this->widget('zii.widgets.grid.CGridView', array(
  'id' => 'bo-campaigns-grid',
  'dataProvider'=> new CArrayDataProvider($campModel, array(
        'pagination' => array(
            'pageSize' => 10
        )
    )),
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:55:40.640

You could also look at CSqlDataProvider. Not sure if it would give you the SQL flexibility you need, but it should handle sorting for you more easily than CArrayDataProvider

# c# - 非重放热可观察

> ID：10944121
> 
> 赞同：5
> 
> 时间：2012-06-08T06:38:15.687
> 
> 标签：c#, .net, system.reactive, subject

### 原始问题

我有一个场景，我有多个`IObservable`想要组合`Merge`然后收听的序列。但是，如果其中一个产生错误，我不希望它使其他流的所有内容崩溃，也不想重新订阅序列（这是一个“永恒的”序列）。

我通过`Retry()`在合并之前将 a 附加到流中来做到这一点，即：

```
IEnumerable<IObservable<int>> observables = GetObservables();

observables
    .Select(o => o.Retry())
    .Merge()
    .Subscribe(/* Do subscription stuff */); 
```

但是，当我想对此进行测试时，问题就出现了。我想测试的是，如果其中一个`IObservable`s in`observables`产生一个`OnError`，其他的应该仍然能够通过它们发送它们的值并且它们应该得到处理

我以为我只用两个`Subject<int>`s 代表两个`IObservable`s in `observables`; 一个发送 an `OnError(new Exception())`，另一个发送`OnNext(1)`. 但是，它似乎`Subject<int>`会为新订阅重播所有先前的值（实际上`Retry()`是），将测试变成无限循环。

我试图通过创建一个手册来解决它，该手册`IObservable`在第一次订阅时产生错误，然后是一个空序列，但感觉很hacky：

```
var i = 0;
var nErrors = 2;
var testErrorObservableWithOneErrorAndThenCompletion = Observable.Create<int>(o => {
    i++;
    if (i < nErrors) {
        return Observable.Throw<int>(new Exception()).Subscribe(o);
    } else {
        return Observable.Empty<int>().Subscribe(o);
    }
}); 
```

我是否以错误的方式使用`Subject`或思考？`Retry()`对此还有其他想法吗？你将如何解决这种情况？

### 更新

好的，这是我想要和*想到* `Retry()`的大理石图。

```
o = message, X = error.
------o---o---X
               \
     Retry() -> \---o---o---X
                             \
                   Retry() -> \... 
```

我的问题可能更多是因为我没有一个好的股票类来使用前测试，因为`Subject`我想重播我以前的所有错误。

### 更新 2

这是一个测试用例，它显示了我对`Subject`重放其值的意思。如果我说它以*冷酷*的方式这样做，我是否正确使用了该术语？我知道`Subject`这是一种创建热可观察对象的方法，但这种行为对我来说仍然感觉“冷”。

```
var onNext = false;
var subject = new Subject<int>();

subject.Retry().Subscribe(x => onNext = true);
subject.OnError(new Exception());
subject.OnNext(1);

Assert.That(onNext, Is.True); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:10:15.457

根据您更新的要求（您想重试失败的可观察对象，而不是只想忽略它们），我们可以提出一个可行的解决方案。

首先，重要的是要了解冷可观察对象（在每个订阅上重新创建）和热可观察对象（无论订阅如何都存在）之间的区别。您不能`Retry()`使用热可观察对象，因为它不知道如何重新创建基础事件。也就是说，如果一个 hot observable 错误，它就永远消失了。

`Subject`创建一个 hot observable，从某种意义上说，您可以在`OnNext`没有订阅者的情况下进行调用，并且它将按预期运行。要将热 observable 转换为冷 observable，您可以使用`Observable.Defer`，它将包含该 observable 的“订阅创建”逻辑。

综上所述，这是修改后的原始代码：

```
var success = new Subject<int>();
var error = new Subject<int>();

var observables = new List<IObservable<int>> { Observable.Defer(() => {success = new Subject<int>(); return success.AsObservable();}), 
                                               Observable.Defer(() => {error = new Subject<int>(); return error.AsObservable();}) };                                            

observables
.Select(o => o.Retry())
.Merge()
.Subscribe(Console.WriteLine, Console.WriteLine, () => Console.WriteLine("done")); 
```

和测试（与之前类似）：

```
success.OnNext(1);
error.OnError(new Exception("test"));
success.OnNext(2);
error.OnNext(-1);
success.OnCompleted();
error.OnCompleted(); 
```

和预期的输出：

```
1
2
-1
done 
```

当然，您需要根据您所观察到的底层内容来显着修改此概念。使用主题进行测试与实际使用它们不同。

我还想指出这条评论：

> 但是，似乎 Subject 会为新订阅重放所有以前的值（实际上是 Retry() ），从而将测试变成无限循环。

不是真的 -`Subject`不这样做。基于`Retry`重新创建订阅的事实，您的代码的其他一些方面会导致无限循环，并且订阅会在某些时候产生错误。

* * *

**原始答案**（完成）

问题是它`Retry()`没有做你想做的事。从这里：

[http://msdn.microsoft.com/en-us/library/ff708141(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff708141(v=vs.92).aspx)

> 重复源 observable 序列 retryCount 次或直到它成功终止。

这意味着`Retry`它将不断尝试并重新连接到底层的 observable，直到它成功并且不抛出错误。

我的理解是，您实际上希望 observable 中的异常被**忽略**，而不是重试。这将做你想做的事：

```
observables
.Select(o => o.Catch((Func<Exception,IObservable<int>>)(e => Observable.Empty<int>())))
.Merge()
.Subscribe(/* subscription code */); 
```

这用于`Catch`捕获异常的可观察对象，并在此时将其替换为空的可观察对象。

这是使用主题的完整测试：

```
var success = new Subject<int>();
var error = new Subject<int>();

var observables = new List<IObservable<int>> { success.AsObservable(), error.AsObservable() };

observables
.Select(o => o.Catch((Func<Exception,IObservable<int>>)(e => Observable.Empty<int>())))
.Merge()
.Subscribe(Observer.Create<int>(Console.WriteLine, Console.WriteLine, () => Console.WriteLine("done")));

success.OnNext(1);
error.OnError(new Exception("test"));
success.OnNext(2);
success.OnCompleted(); 
```

正如预期的那样，这会产生：

```
1
2
done 
```

# mysql - 创建表后如何自动增加mysql中的特定列

> ID：10944133
> 
> 赞同：0
> 
> 时间：2012-06-08T06:38:59.680
> 
> 标签：mysql

谁能帮我..

我创建了一个没有自动递增 Sl.no（序列号）的表，但现在我想自动递增它。我该怎么做。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:43:27.320

你需要改变它

```
alter table document modify column serial_id int(10) NOT NULL auto_increment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:43:48.020

```
ALTER TABLE
        mytable
MODIFY  id INT NOT NULL AUTO_INCREMENT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:45:35.527

看看这个文档页面 - [ALTER TABLE Syntax](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)。首先，您的字段必须是整数和主键。

您可以使用这样的查询 -

```
-- add AUTO_INCREMENT:
ALTER TABLE table
  CHANGE COLUMN id id INT(11) NOT NULL AUTO_INCREMENT;

-- add primary key and AUTO_INCREMENT:
ALTER TABLE table
  CHANGE COLUMN id id INT(11) NOT NULL AUTO_INCREMENT,
  ADD PRIMARY KEY (id); 
```

此外，您可以使用 MySQL GUI 工具之一，例如 - [dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)（免费快速版）中的表编辑器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:11:33.673

您的序列号列似乎不是您的表的主键。MySQL 不允许将 AUTO_INCREMENT 属性分配给不是您的主键的列。

我可以看到两种可能的行动方案：

*   从任何其他列中删除主键属性并将其添加到您的序列号。这仅在序列号列中的值是唯一的情况下才有效。根据表的设置方式以及序列号字段的格式，这可能会对表上后续查询的性能产生不利影响。

    ALTER TABLE [表] 删除主键；

    ALTER TABLE [table] ADD [fieldname] [integer type] NOT NULL AUTO_INCREMENT PRIMARY KEY;

*   您可以通过选择表中序列号列的最后一个（最高）值（以编程方式）并在插入之前手动（也以编程方式）递增它，然后简单地将其与您的其余部分一起插入，以编程方式伪造自动增量（新纪录。

# c# - 在 Intellisense 中看不到数组的长度

> ID：10944137
> 
> 赞同：0
> 
> 时间：2012-06-08T06:39:23.067
> 
> 标签：c#, c#-4.0

现在我将消息数组作为查询字符串发送到另一个页面。但是当我赶上下一页时，我们有一个 arr.Length 知道（通常它显示智能感知），但在这种情况下它不显示。

这是 msg_arr 传递到另一个页面

```
 private void check(string keyword , params Array[] msg_arr)
    {
        switch (keyword.ToUpper())
        {
            case  "SETTELG":
                Response.Redirect("../SMSFunction/SeenSMS.ascx?value=1&arr" + msg_arr);

                break; 
```

下面的代码是我想捕捉传递的值和数组（msg_arr）的下一页。但是长度不起作用

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            string Moose = Request.QueryString[1];
        }

        if (msg_arr != null)
        {
            if ((msg_arr.Length == 3) && (msg_arr[1].ToLower() == "slett"))

            {

            }

        }
    } 
```

这是第二个代码截图，你可以看到长度没有显示 ![这是第二个代码截图，你可以看到长度没有显示](../Images/15d52bdfc4ad4534adf01fac3ee0c730.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:47:28.627

这里有很多问题。

```
private void check(string keyword , params Array[] msg_arr) 
```

这个函数*真的*`Array`被传递了一个s数组吗？我本来想`string[]`或者`object[]`是一个更有*可能*被通过的类型。

```
Response.Redirect("../SMSFunction/SeenSMS.ascx?value=1&arr" + msg_arr); 
```

这将调用`ToString()`on `msg_arr`，它是一个数组，将产生如下结果：

```
"../SMSFunction/SeenSMS.ascx?value=1&arrSystem.Array[]" 
```

`Array`不会覆盖`ToString()`，因此您可以从中获得[`Object`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)输出类型的完全限定名称的名称-我认为这不是您想要的。

最后，我们到达了您的第二段代码，但您甚至没有向我们展示任何尝试设置新`msg_arr`变量的代码。但它无法获得 的原始值`msg_arr`，因为您还没有传递它。

* * *

您需要决定如何将数组打包到查询字符串中。如果，比如说，`msg_arr`应该是一个可读字符串数组（`params string[] msg_arr`在`check`定义中），那么你可以尝试类似：

```
Response.Redirect("../SMSFunction/SeenSMS.ascx?value=1&arr=" + string.Join("|",msg_arr)); 
```

where`|`是不应出现在传递的字符串中的字符。( [`String.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx))

然后，您可以使用以下内容将其重建回数组：

```
protected void Page_Load(object sender, EventArgs e)
{
    string[] msg_arr = Request.QueryString["arr"].Split('|');
    /* rest of method */ 
```

( [`String.Split`](http://msdn.microsoft.com/en-us/library/b873y76a))

当然，如果字符串的长度（或字符串的数量）太大，现在可能会担心，通过查询字符串传递它们可能根本不合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:41:47.983

您不能在查询字符串中传递整个集合。你唯一能做的就是传递一个集合元素。即 array 不能被传递，但 array[0].toString() 可以。请通过会话变量以简单的方式执行此操作。将数组存储在 Page1.aspx 的 Session 变量中并在 Page2.aspx 上检索。示例代码如下

第1页.aspx

```
 protected void Page_Load(object sender, EventArgs e) 
    { 
      int[] array = { 1, 2, 3, 4, 5 }; 
      Session["Array"] = array; Response.Redirect("About.aspx"); 
    } 
```

Page2.aspx

```
 protected void Page_Load(object sender, EventArgs e) 
    { 
      int[] array; 
      if (Session["Array"] != null) 
      { 
         array = (int[])Session["Array"]; 
         if (array.Length == 3) 
         { 
            /////implementaion 
         } 
      } 
    } 
```

# mysql - 如何在mysql中的if语句中使用between？

> ID：10944146
> 
> 赞同：0
> 
> 时间：2012-06-08T06:40:10.273
> 
> 标签：mysql, sql

我想在这里使用日期条件

```
SELECT COALESCE(SUM(IF(a=1 OR b=0 OR c=1 OR d=0 AND date BETWEEN '1336544083' AND '1336544081'  1, 0)),0) AS AC FROM tbl_people WHERE `Id` = '2' 
```

这种方法正确吗？

# android - 如何在 Android 中设计复杂的接口

> ID：10944148
> 
> 赞同：1
> 
> 时间：2012-06-08T06:40:15.727
> 
> 标签：android

我想在 android Tab 中设计这种界面。我尝试了很多使用不同的布局，但不能。

![应用程序界面](../Images/ff4659625aa7425759071c0a7be4fb91.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:45:09.520

这里有什么复杂的？ **根据需要更改 id** **管理高度和宽度**

```
 <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >
                </ListView>

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >
                </ListView>
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/button1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Button" />

                    <Button
                        android:id="@+id/button2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Button" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <ListView
                        android:id="@+id/listView1"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >
                    </ListView>
                </TableRow>
            </LinearLayout>
        </TableRow>        
    </LinearLayout> 
```

**编辑：1**

这对对齐有很大帮助

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:stretchColumns="6" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="0"
                android:text="Button" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="1"
                android:text="Button" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="2"
                android:layout_span="4"
                android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_column="0"
                android:layout_span="4"
                android:orientation="horizontal" >

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >
                </ListView>

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >
                </ListView>
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_column="1"
                android:layout_span="2"
                android:orientation="horizontal" >

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/button1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Button" />

                    <Button
                        android:id="@+id/button2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Button" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <ListView
                        android:id="@+id/listView1"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >
                    </ListView>
                </TableRow>
            </LinearLayout>
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

# c#-4.0 - 支持多个数据库的 ORM 工具

> ID：10944158
> 
> 赞同：0
> 
> 时间：2012-06-08T06:41:28.883
> 
> 标签：c#-4.0, orm, multiple-databases

我正在寻找一个可以支持SQLServer/Oracle/MySql等的ORM工具。我之前使用过实体框架，不太确定是否可以实现这种灵活性。但我也喜欢视觉工作室中的轻松和出色的集成。我也考虑过NHibernate，但我没有这方面的经验。所以我有点犹豫不决，谷歌返回了很多 ORM 工具，比如 SubSonic、FluentNHibernate 等。

因为，我非常接近 NHibernate 并且不确定它所存在的问题，曾在 NHibernate 和实体框架上工作过的人可以快速比较易用性、所需的学习曲线、对 LINQ 的支持等休眠？

注意：对我来说最重要的因素是能够切换到不同的数据库类型（SQLServer/Oracle 等）和性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:49:42.650

这是Entity Framework 和 NHibernate[的功能比较](http://temebele.wordpress.com/2011/06/06/entity-framework-vs-nhibernate-feature-by-feature-comparison/)。

# sencha-touch - 从 sencha touch 2.0 构建 android 本机应用程序时出现 Java 主页错误

> ID：10944161
> 
> 赞同：0
> 
> 时间：2012-06-08T06:42:29.657
> 
> 标签：sencha-touch

这是我第一个从 sencha 为 android 原生应用程序构建的应用程序。我已经按照煎茶入门视频教程进行操作，但遇到了一些错误。

错误说：

> -compile: ""D:android-sdk-windows/tools/android" 创建项目 --target android-7 --name GetStarted --activity STActivity --path "c:\wamp\www\GS\build\native/ “ --package com.mycompany.myAppID” 无法运行 ant 并出现错误：1 无法打包应用程序 [ERROR] BUILD FAILED D:\android-sdk-windows\tools\ant\build.xml:602：发生以下错误执行此行时： D:\android-sdk-windows\tools\ant\build.xml:622: Unable to find a javac compiler;
> 
> com.sun.tools.javac.Main 不在类路径中。

也许 JAVA_HOME 不指向 JDK？

当前设置为“ `C:\Program Files\Java\jre7`”

它说`java_home error`，但我已经像这样设置了java_home：

> 变量名：- JAVA_HOME 变量值：- c:/programes files/java/jdk 1.6/bin

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:55:17.030

你能创建一个环境变量 JAVA_HOME

```
JAVA_HOME=c:/Program Files/java/jdk 1.6 
```

并在您的 PATH 变量中

```
PATH=%JAVA_HOME%\bin 
```

所有这一切都在 OS Win XP/7 中。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T11:19:15.997

您*可能*在路径中拼错了“程序文件”

改变

```
 c:/programes files/java/jdk 1.6/bin 
```

至

```
c:/Program Files/java/jdk 1.6/bin 
```

# php - 如何在mysql中将前导零添加到不同的字符长度？

> ID：10944167
> 
> 赞同：3
> 
> 时间：2012-06-08T06:42:56.387
> 
> 标签：php, mysql

嗨，我有一个针对不同表的查询，并且它们都有不同的长度，这需要前导零`ID`。是否可以使用一个查询将前导零添加到任何表？

可以说第一个查询是`insert to tbl1_field1(CHAR 3) 001`，然后下一个查询是`insert to tbl2_field2(CHAR 4) 0001`然后下一个是`insert to tlb3_field3(CHAR 10) 0000000001`。我在用`php and mysql`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:55:17.223

您可以使用[LPAD](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_lpad)函数在 SELECT 查询中执行此操作 -

```
SELECT LPAD(id, 4, 0) FROM table; 
```

查询将显示这样的字符串 - `'0001'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T14:39:09.173

```
UPDATE table
SET field1 = LPAD(id, 3, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:48:56.283

我很确定我在您的问题中遗漏了一些东西，但是您没有调整查询，而是考虑了表结构中的 ZEROFILL 选项？

```
CREATE TABLE `test`.`TEST_LEADING_ZERO` (
    `ID` INTEGER UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (`ID`)
)
ENGINE = InnoDB; 
```

# php - 以编程方式将视频从 php 服务器流式传输到 android

> ID：10944175
> 
> 赞同：11
> 
> 时间：2012-06-08T06:43:44.543
> 
> 标签：php, android, video, stream

我有一个视频的网址。我想将视频流式传输到我的应用程序。我可以完全下载视频文件然后播放它，但我希望在下载视频时也应该播放视频，就像在 youtube 中一样。我有一个 php 服务器正在运行，上面有视频。我看到有人问过这个问题，但没有任何问题的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T07:35:28.170

你可以通过代码

```
void playvideo(String url) 
{
     String  link=url;
     Log.e("url",link);
     view1 = (VideoView) findViewById(R.id.myVideoView); 
      getWindow().setFormat(PixelFormat.TRANSLUCENT);

      MediaController mc = new MediaController(this); 
      mc.setMediaPlayer(view1); 

      view1.setMediaController(mc); 
      view1.setVideoURI(Uri.parse(link)); 
      view1.requestFocus(); 
      view1.start();

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:00:21.807

假设您使用的是 .mp4 容器或类似容器，您需要使用诸如`qt-faststart`（在 linux 下）之类的程序将 moov atom（我相信包含关键帧上的数据等）移动到视频的开头。这样，视频就可以在整个视频被下载之前播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:09:41.007

您的视频文件可能未设置为渐进式下载，这是 HTTP 流式传输所必需的

# c++ - 检查 NULL 节点时出现分段错误

> ID：10944179
> 
> 赞同：0
> 
> 时间：2012-06-08T06:43:58.787
> 
> 标签：c++, tree, segmentation-fault

我正在创建一个具有合并、插入和提取功能的优先级队列。测试程序通过提供数据和优先级来插入节点，我创建节点并尝试将其放置在左派树堆优先级队列中。

这是类节点的代码：

```
template <class DATA>
class Node {
    public :
    DATA data ;
    double priority ;
    unsigned distance ;
    Node<DATA> * left , * right ;

    Node ( DATA & d , double prio ) : data (d) , priority(prio) ,
    distance(0) , left(NULL) , right(NULL) {} ;
} ; 
```

这是我使用合并和交换插入节点的代码：

```
template<class DATA> 
Node<DATA> *
PQueue<DATA> :: merge ( Node<DATA> * p , Node<DATA> * q )
{
    unsigned d1, d2;

    if ( p == NULL ) return q ;
    if ( q == NULL ) return p ;

    if ( (p->priority) < (q->priority) ) // p is final root.
        swap(p,q) ;

    p->right = merge ( p->right , q );

    d1 = p->left->distance;
    d2 = p->right->distance;

    if ( d1 < d2 ) 
        swap(p->left,p->right) ; // leftist tree.

    p->distance = 1 + p->right->distance ;

    return p ;
}

template<class DATA>
void
PQueue<DATA> :: swap (Node<DATA> * p, Node<DATA> * q )
{
    Node<DATA> * temp;
    temp = p;
    p = q;
    q = temp;
    delete temp;
}

template < class DATA >
bool 
PQueue<DATA> :: insertPQ ( DATA & data , double priority )
{
    root = merge(root, new Node<DATA>(data, priority));
    return true;
} 
```

插入的测试代码是这样的：

```
pq.insertPQ( data[i] , data[i] ) 
```

第一个插入工作正常。第二次插入进入合并函数，进入第一个递归循环，`p->right = merge ( p->right , q );`并在 if 上给出一个段错误。在此时`( p == NULL ) return q ;`做了一些检查 p do = NULL 但我在检查 if 时得到了错误`p == NULL`。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:42:04.473

我怀疑它并没有真正在你认为的地方崩溃。

不过，您有几个错误。首先，请注意您的交换函数交换了它给出的指针，但这对树没有任何影响。我认为您打算将这些论点作为参考：`swap (Node<DATA> *&p, Node<DATA> *&q)`

其次，请注意您在那里删除了一个节点，但您还没有分配一个。您正在释放 p 节点。这可能会导致段错误。

# jsf-2 - primefaces：在 actionlistner 之前调用的 managedbean 构造函数

> ID：10944180
> 
> 赞同：0
> 
> 时间：2012-06-08T06:44:02.357
> 
> 标签：jsf-2, primefaces

我创建了托管 bean（CourtUitility.java），它有两个属性 court（CourtBean.java 的对象）和 courtAll（List 对象包含 courtbean 的数组列表）。我的代码如下 CourtUitility.java

```
@ManagedBean 
@RequestScoped
public class CourtUitility {

private CourtBean court =new CourtBean();
private List<CourtBean> courtAll = new ArrayList<CourtBean>();
/** Creates a new instance of CourtUitility */

public CourtUitility() {
    courtAll = new ArrayList<CourtBean>();
    int userID = Integer.parseInt(FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("USER_ID").toString());
    courtAll = CourtService.GenerateCourtList(userID);
}

public CourtBean getCourt() {
    return court;
}

public void setCourt(CourtBean court) {
    this.court = court;
}

public List<CourtBean> getCourtAll() {
    return courtAll;
}

public void setCourtAll(List<CourtBean> courtAll) {
    this.courtAll = courtAll;
}

public void save(ActionEvent actionEvent) {
     court.setUserID(Integer.parseInt(FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("USER_ID").toString()));
    System.out.println("Court ID : " + court.getCourtID());
    System.out.println("User ID : " + court.getUserID());
    CourtService.AddCourt(court);
    court = new CourtBean();
    courtAll = CourtService.GenerateCourtList(Integer.parseInt(FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("USER_ID").toString()));
    FacesMessage msg = new FacesMessage("Court Record Created", "");
    FacesContext.getCurrentInstance().addMessage(null, msg);
}
} 
```

clientMaster.xhtml

```
<ui:composition template="/template/mainLayout.xhtml" >
        <ui:define name="pageContent">
 <h:form id="co">
                <p:growl life="5000" showDetail="true" showSummary="true" id="courtmessage" />
                <p:panel id="courtDetail" header="Court Details">
                    <p:messages id="panelMessage" showDetail="true" showSummary="false" autoUpdate="true" globalOnly="true" />

                    <h:panelGrid columns="4" styleClass="grid">
......
<p:commandButton id="addCourt" immediate="true" value="Add Court" actionListener="#{courtUitility.save}" update=":co,:cot" async="true" >
                        </p:commandButton>
                    </h:panelGrid>
                </p:panel>
            </h:form>
<ui:include id="abc" src="CourtEditDatatable.xhtml"/> 
        </ui:define>
    </ui:composition> 
```

当我通过命令按钮输入提交表单时，数据库中的所有数据都为空。调试后发现，提交表单时，首先调用托管bean构造函数并重新初始化所有属性。在调用该动作侦听器之后，它在数据库中为空。我也尝试过查看范围，但问题仍然存在。有没有办法在调用动作监听器时停止调用构造函数？？？

要分享的另一件事是，我在同一个项目中使用向导创建了具有相同模式的客户端主控。它工作正常。保存记录时不会引起问题。是因为巫师吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:40:31.833

> *有没有办法在调用动作监听器时停止调用构造函数？？？*

如果停止 bean 的构建，那么根本就没有 bean 实例，JSF 将无法调用 bean 上的操作。所以，不，这没有任何意义。

您的问题是在其他地方引起的。太糟糕了，您的表单不完整，但我至少`immediate="true"`在提交按钮上看到了一个。我不确定为什么你需要在“保存”按钮上使用它，这对于“取消”按钮来说更为典型。如果您在同一表单中的任何输入字段上都*没有此属性，则根本***不会**处理它们。

从按钮中删除`immediate="true"`，JSF 将处理提交的输入值，它们将在更新模型值阶段以通常的方式在 bean 中设置。

# actionscript-3 - addEventListenerDocument 是如何工作的？

> ID：10944183
> 
> 赞同：1
> 
> 时间：2012-06-08T06:44:07.270
> 
> 标签：actionscript-3, apache-flex, sdk, adobe-indesign

我目前正在开发 flex 和 as3 中的 indesign 扩展。我可以理解以下内容：

```
addEventListenerDocument    ()  method
public function addEventListenerDocument(eventTypeParam:String = null, handlerParam:Object = null, capturesParam:Boolean = false):EventListener 
```

我使用这个如下：

```
document.addEventListenerDocument(DocumentEvent.AFTER_SAVE, afterSaveHandler); 
```

然后是以下功能

```
private function afterSaveHandler(e:DocumentEvent):void {
    trace("test");
} 
```

这不起作用。我收到一个错误，我应该添加一个文件或 javascript 函数而不是一个函数。

有人可以解释一下我怎样才能让它工作吗？

有关活动的更多信息在[这里](http://cssdk.host.adobe.com/sdk/1.5/docs/WebHelp/references/csawlib/com/adobe/indesign/Document.html#addEventListenerDocument%28%29 "这里")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:16:09.007

您包含的帮助包含信息，尽管我承认在阅读时并不明显：

> handlerParam:Object (default = null) — (Object) 事件处理程序。可以接受：文件或 JavaScript 函数

您可能会对阅读这本食谱感兴趣： [http ://cookbooks.adobe.com/post_Communicating_between_JavaScript_and_the_Creative-17383.html](http://cookbooks.adobe.com/post_Communicating_between_JavaScript_and_the_Creative-17383.html)

祝你好运 ;）

# yii - 加入 YII 框架

> ID：10944185
> 
> 赞同：-4
> 
> 时间：2012-06-08T06:44:36.227
> 
> 标签：yii

我将如何在 yii 框架中编写以下查询

```
function Get_Services($user_id, $isResultSet = true){
    $sql = $this->select()
                ->setIntegrityCheck(false)
                    ->from(array('p' => 'phone_service'))
                    ->join(array('u' => 'user_preferences'), 'u.phone_service_id = p.phone_service_id')
                    ->where('u.user_preferences_name = ?', 'is_user_package_active')
                    ->where('p.user_id = ?', $user_id);

    if($isResultSet){
        return $sql->query()->fetchAll();
    }else{
        return $sql;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:32:51.460

大致：

```
$sql = Yii::app()->db->createCommand()
   ->from('phone_service p')
   ->join('user_preferences u', 'u.phone_service_id = p.phone_service_id')
   ->where('u.user_preferences_name = :upn', array(':upn' => 'is_user_package_active'))
   ->where('p.user_id = :uid', array(':uid' => $user_id)
   ->queryAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:56:08.450

尝试这个...

```
function Get_Services($user_id, $isResultSet = true){
        $sql = $this->select()
                    ->setIntegrityCheck(false)
                        ->from(array('p' => 'phone_service'))
                        ->join(array('u' => 'user_preferences'), 'u.phone_service_id = p.phone_service_id')
                        ->where('u.user_preferences_name = ?', 'is_user_package_active')
                        ->where('p.user_id = ?', $user_id);

        if($isResultSet){
            return $sql->queryAll();
        }else{
            return $sql;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T10:31:42.317

```
$sql = Yii::app()->db->createCommand()
->from('phone_service p')
->join('user_preferences u', 'u.phone_service_id = p.phone_service_id')
->where('u.user_preferences_name=:preferences',array(':preferences'=>'is_user_package_active'))
->where('p.user_id = :uid', array(':uid' => $user_id)
->queryAll(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-20T04:31:17.843

我建议您为此创建模型，`Yii`使用活动记录和`with()`呼叫深入了解关系并进行加入。

喜欢后可能是一个简单的电话

```
$records = PhoneServices::model()->with(array('userPreferences' => 
 array('condition' => 'userPreferences.user_preferences_name = 
 "is_user_package_active" ')))->findAllByAttributes(array('user_id' => $user_id)); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-01T06:39:51.503

尝试以下

```
$sql = $this->select()
                ->setIntegrityCheck(false)
                    ->from(array('p' => 'phone_service'))
                    ->join(array('u' => 'user_preferences'), 'u.phone_service_id = p.phone_service_id')
                    ->where('u.user_preferences_name = ?', 'is_user_package_active')
                    ->where('p.user_id = ?', $user_id);
$query= $model->findAll($sql); 
```

# macos - 支持代理的 MacOS 类 WinSCP 程序

> ID：10944189
> 
> 赞同：0
> 
> 时间：2012-06-08T06:44:53.747
> 
> 标签：macos, proxy, winscp

我在旧 Windows 机器上通过 WinSCP 访问部署服务器。因为我在部署站点上只有一个代理点；WinSCP 的代理功能对我来说非常棒。

在我搬到 Mac OS XI 之后，找不到像 WinSCP 这样具有代理功能的 SFTP 客户端。

你能推荐一个像 Mac 上的 WinSCP 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:46:45.947

Max OSX 是一个类似 BSD 的操作系统。为什么不使用 shell 命令？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:44:02.543

我不是 scp 及其功能方面的专家，但我使用[fetch](http://fetchsoftworks.com/)获得了一个不错的 sftp gui，它对我来说非常有用。

# php - 将 PHP 变量保存为 JSON

> ID：10944194
> 
> 赞同：0
> 
> 时间：2012-06-08T06:45:25.323
> 
> 标签：php, json, variables

我有一个从数据库中获取一些数据的查询，并将其保存到 PHP 变量中。

我想知道如何将 PHP 变量传递给 JSON 变量？

IE：

```
$content = $row['content']; 

class Foo 
{ 
    public $a = "$content"; 

} 

$obj = new Foo(); 
echo json_encode($obj); 
```

谁能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:50:00.423

如果您为对象创建构造函数并将值传入，则上述内容应该有效。

例如

```
$content = $row['content']; 

class Foo 
{ 
    public $a;

    public function __construct($val) {
       $this->a = $val;
    }

} 

$obj = new Foo($content); 
echo json_encode($obj); 
```

或者，作为一个数组：

```
$content = $row['content']; 
$array = array('a' => $content);
echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:48:00.497

怎么样：

```
echo json_encode(array('a' => $obj->a)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:55:18.497

```
//assuming  $row['content'] is an array

    class foo{
       public $a;
      public function __construct($content){
           $this->a = $content;
       }
    }
    $content = $row['content'];
    $obj = new foo($content);
    echo json_encode($obj->a); 
```

# c# - 使用 c# aforge.net 对图像进行 2D FFT

> ID：10944197
> 
> 赞同：1
> 
> 时间：2012-06-08T06:45:33.890
> 
> 标签：c#, visual-studio, image-processing, neural-network, aforge

是否可以使用 aforge.net 获取图像的 2d-fft 我想从原始图像中获取数值以与其他图像不同

注意：我在捕获种子图像后进行种子识别项目检测种子形状和边缘图案（使用一些图像处理功能）之后我需要获取每个种子图像（那些是黑白图像）的 2d-fft 并存储到数据库中

我使用 aforge.net 完成了其余部分，但有些人说使用 Mathlab 可以轻松完成这项任务，但 Mathlab 不能让人们在这里有任何想法吗？

我对数学和神经网络了解不多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:31:55.713

显然，AForge.NET 中的[ComplexImage](http://www.aforgenet.com/framework/docs/html/8ec218c8-628b-e6b9-c398-3d65f14280d5.htm)类包含进行正向和反向傅里叶变换的[方法。](http://www.aforgenet.com/framework/docs/html/f41aa9cf-a0ed-ef1b-a966-2e86a9954f4b.htm)

# java - 如何抽象 poi 功能

> ID：10944202
> 
> 赞同：1
> 
> 时间：2012-06-08T06:45:58.973
> 
> 标签：java, apache-poi

我希望在我的程序中实现 apache-poi 的文本提取和稍后的摘要信息功能。也就是说，poi 对 .doc、docx、.xls 和 .xlsx 文件使用不同的库。

为了从调用 poi 的函数中隐藏这种复杂性，我创建了以下类和方法，我可以调用这些类和方法从 4 种文档类型中的任何一种中提取文本：

```
public class DocExtractor {
private WordExtractor w = null;
private XWPFWordExtractor wx = null;
private ExcelExtractor x = null;
private XSSFExcelExtractor xx = null;

public DocExtractor(File f){
      String fileExtension = FilenameUtils.getExtension(f.toString());
      if (fileExtension.equals("doc")){
          try{
              FileInputStream is = new FileInputStream(f.getAbsolutePath());
              HWPFDocument doc = new HWPFDocument(is);
              w = new WordExtractor(doc);
          }
            catch (Exception e){e.printStackTrace();}
      } 
```

...构造函数中还有 3 个“ifs”

和方法：

```
 public String getText(){
    String text ="";
    if(this.w != null){
        String[] texted = w.getParagraphText(); //for .doc
        text = this.joiner(texted);
    } 
```

......还有更多的“如果”

这有效，并隐藏了实现，

```
 DocExtractor dm = new DocExtractor(doFile);
  text = dm.getText(); 
```

但我讨厌所有的“如果”。我不禁认为必须有更好的，完全不同的方式来做到这一点，或者可能是一些多态的诡计......

这些私有变量是以前在本课程尝试中遗留下来的，因此请随意将它们扔到您建议的任何解决方案中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:53:36.687

这是一个非常常见的 Java 编程问题的示例。它通常使用所谓的 Java 工厂设计模式来解决。以下链接对工厂模式有一个很好的简单解释 - [http://www.allapplabs.com/java_design_patterns/factory_pattern.htm](http://www.allapplabs.com/java_design_patterns/factory_pattern.htm)

还有许多其他设计模式，您可能会发现它很有用。阅读它们将使您深入了解许多 Java 程序员如何解决常见问题。同一作者在[http://www.allapplabs.com/java_design_patterns/java_design_patterns.htm解释了大多数常见的设计模式](http://www.allapplabs.com/java_design_patterns/java_design_patterns.htm)

现在，至于你的具体问题。首先，POI 作者使用工厂设计模式。例如，看下面的代码：

```
Workbook wb1 = WorkbookFactory.create(new FileInputStream("myXlsFile.xls"));
Workbook wb2 = WorkbookFactory.create(new FileInputStream("myXlsxFile.xlsx"));
// this prints "wb1 class = org.apache.poi.xssf.usermodel.XSSFWorkbook"
System.out.println("wb1 class = " + wb1.getClass().getName());
// this prints "wb2 class = org.apache.poi.hssf.usermodel.HSSFWorkbook"
System.out.println("wb2 class = " + wb2.getClass().getName()); 
```

因此，作为 POI 的用户，无论您处理的是 xls 文件还是 xlsx 文件，您都可以使用相同的属性和方法处理相同的 Workbook 对象。然而，POI 的作者显然需要根据文件类型有两种截然不同的实现。

他们是如何在没有大量 if 语句的情况下做到这一点的，例如您的代码中的内容？我将重做您的示例，向您展示如何完成同样的事情。

您要做的第一件事是定义一个 DocExtractor 类，如下所示：

```
public abstract class DocExtractor {

    // constructor
    public DocExtractor(File f) {
       poiFile = f;
    }

    // the getText method must be defined by all derived classes
    public abstract String getText();

    // this protected field is visible to all classes which extend DocExtractor
    protected File poiFile;

} 
```

我建议您使 DocExtractor 抽象的原因是您不希望代码能够创建 DocExtractor 类。将 getText 方法设为抽象的原因是您希望确保扩展 DocExtactor 的类将定义它们自己的 getText 版本。希望当您继续阅读时，这个推理将变得清晰。

您现在定义所谓的 DocExtractor 派生类（它们“扩展”DocExtractor）。在这个例子中，我将定义两个类，一个用于 doc 文件，一个用于 xls 文件。

```
// this handles doc files
public class DocExtractorDoc extends DocExtractor {

    // constructor
    public class DocExtractorDoc(File f) {
        // this calls the DocExtractor constructor which has common code for all constructors
        super(f);
        // put code specific to the DocExtractorDoc constructor here
    }

    // concrete implementation of the getText method specific to doc files
    public String getText() {
        // getText code for doc files goes here
    }
}

// this handles xls files
public class DocExtractorXls extends DocExtractor {

    // constructor
    public class DocExtractorXls(File f) {
        // this calls the DocExtractor constructor which has common code for all constructors
        super(f);
        // put code specific to the DocExtractorXls constructor here
    }

    // concrete implementation of the getText method specific to xls files
    public String getText() {
        // getText code for xls files goes here
    }
} 
```

您现在使用单个静态创建方法定义 DocExtractorFactory 类：

```
public class DocExtractorFactory {

    public static DocExtractor create(File f) {
        // create the appropriate DocExtractor derived class based on the file extension
        String extension = FilenameUtils.getExtension(f.getName());
        if (extension.equals("doc") {
            return new DocExtractorDoc(f);
        } else if (extension.equals("xls") {
            return new DocExtractorXls(f);
        } else {
            // error handling code here -- perhaps throw an exception
        }
    }
} 
```

最后，这是一些使用上述类的代码

```
// this actually creates a DocExtractorDoc object (but you don't care)
DocExtractor de1 = DocExtractorFactory.create(new File("myDocFile.doc"));
// this actually uses DocExtractorDoc.getText (but again you don't care)
String s1 = de1.getText();
// this actually creates a DocExtractorXls object
DocExtractor de2 = DocExtractorFactory.create(new File("myDocFile.xls"));
// this actually uses DocExtractorXls.getText
String s2 = de2.getText(); 
```

因此，我们基本上完成的只是将 if 语句放在一个地方，即工厂创建方法。您显然可以根据需要创建任意数量的 DocExtractor 派生类，只需为类编写代码并对 create 方法进行简单更改即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:52:35.647

如果您想支持从各种 Office 文件格式中提取文本，那么最好不要在前面编写自己的包装器，最好使用[Apache Tika](http://tika.apache.org/)。Apache Tika 是一个文本和元数据提取工具包/库/thingy。

为了从 Microsoft Office 文件中提取文本，Tika 调用 Apache POI 来完成实际工作。然而，这一切都是在内部完成的，并为您隐藏了不同格式的复杂性。相反，您只需将文件交给它，Tika 就会计算出它是什么，调用什么库，执行文本提取，然后将文本返回给您。

使用 Apache Tika 时，您可以选择获取纯文本或 HTML。假设你想要纯文本（因为这是所有低级 POI 提取器提供的），你会想要这样的东西：

```
Tika tika = new Tika();
Metadata metadata = new Metadata(); 
metadata.set(Metadata.RESOURCE_NAME_KEY, "myfile.name");
String text = tika.parseToString(new File("myfile.name")); 
```

就是这样。无论您有 .xls、.ppt 还是[许多其他受支持的格式](http://tika.apache.org/1.1/formats.html)之一，您都将获得纯文本内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:18:44.943

您可以抽象 excel/word/whatever 文件和 getText 部分的加载。

为这两种方法创建一个公社接口，然后为每个 if 实现这两种方法。

```
interface Extractor {
    public void setInputStream(FileInputStream fis);
    public String getText();
} 
```

Word 的实现

```
class ConcreteWordExtractor implements Extractor {
    private WordExtractor w;

    public void setInputStream(FileInputStream fis) {
        HWPFDocument doc = new HWPFDocument(fis);
        this.w = new WordExtractor(doc);
    }

    public String getText() {
        String[] texted = this.w.getParagraphText();
        // rest of your logic for word
    }
} 
```

Excel 的实现

```
class ConcreteExcelExtractor implements Extractor {
    private ExcelExtractor x;

    public void setInputStream(FileInputStream fis) {
        // load the Excel workbook from input stream
        this.x = new ExcelExtractor(...);
    }

    public String getText() {
        // your logic for Excel
    }
} 
```

Doc Extractor，利用之前的实现

```
public class DocExtractor {
    private final Extractor extractor;
    // you could use spring or any injector to create this and avoit it being in your code
    private final Map<String, Extractor> extractors = new HashMap<String, Extractor>() {{
            put("doc", new ConcreteWordExtractor());
            put("xls", new ConcreteExcelExtractor());
    }};

    public DocExtractor(File f) {
        String extension = FilenameUtils.getExtension(f.getName());
        if (!this.extractors.containsKey(extension))
            throw new IllegalArgumentException("No such extractor for extension `" + extension + "`.");
        this.extractor = this.extractors.get(extension);
        try {
            FileInputStream fis = new FileInputStream(f);
            extractor.setInputStream(fis);
        } catch (Exception e) {
            // do what you want
        }
    }

    public String getText() {
        return extractor.getText();
    }
} 
```

通过这种方式，您可以为每种格式和文本检索部分抽象文件的加载，当您需要支持新格式时，您必须实现`Extractor`接口并将其添加到地图中，或者按照评论中的建议，您可以使用任何依赖注入库/框架（例如 Spring）从您的代码中提取它。

# c# - WriteableBitmapEx 不适用于 C# Metro 应用程序

> ID：10944203
> 
> 赞同：2
> 
> 时间：2012-06-08T06:46:05.427
> 
> 标签：c#, windows-runtime, microsoft-metro, writeablebitmap, writeablebitmapex

我为 winrt（win 8 metro）下载了 WriteableBitmapEx。我使用扩展方法添加了对 dll 的引用，在我的代码中使用了它们，一切都可以编译。

问题是扩展方法没有效果。这是我的代码的一部分：

```
WriteableBitmap wb = new WriteableBitmap((int)pictureSize.Width,   (int)pictureSize.Height);
wb.SetSource(fileStream);
var newWB = wb.Flip(FlipMode.Vertical);
ImageControl.Source = newWB;     
newWB.Invalidate(); 
```

图像不会出现在屏幕上。但是，如果我尝试在图像上画一些东西，比如一条线，图像就会在屏幕上显示不变。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:44:49.057

我猜当你使用 wb.Flip 时图像没有完全加载。IIRC wb.SetSource 异步运行。

WriteableBitmapEx 库中还有另一种方法，称为 FromContent。有了它，您可以从应用程序的内容中加载图像，该方法会在后台为您处理所有内容。

下面的代码片段只是加载 logo.png，翻转它并将 WriteableBitmap 分配给图像控件。

```
var wb = await BitmapFactory.New(1, 1).FromContent(new Uri(BaseUri, @"///assets/logo.png"));
wb = wb.Flip(WriteableBitmapExtensions.FlipMode.Vertical);
Viewport.Source = wb; 
```

如果您查看 WinRT 版本的 WriteableBitmapEx.FromContent 方法的源代码，您将看到流如何转换为 WriteableBitmap。使用以下代码段将任何图像格式 IRandomAccessStream 解码为 WriteableBitmap：

```
// Decode image format
var decoder = await BitmapDecoder.CreateAsync(fileStream);
var transform = new BitmapTransform();
var pixelData = await decoder.GetPixelDataAsync(decoder.BitmapPixelFormat, decoder.BitmapAlphaMode, transform, ExifOrientationMode.RespectExifOrientation, ColorManagementMode.ColorManageToSRgb);

// Swap R and B channels since it's reversed
var pixels = pixelData.DetachPixelData();
for (var i = 0; i < pixels.Length; i += 4)
{
    var r = pixels[i];
    var b = pixels[i + 2];
    pixels[i] = b;
    pixels[i + 2] = r;
}

// Copy pixels to WriteableBitmap
var wb = new WriteableBitmap((int)decoder.PixelWidth, (int)decoder.PixelHeight);
using (var bmpStream = wb.PixelBuffer.AsStream())
{
    bmpStream.Seek(0, SeekOrigin.Begin);
    bmpStream.Write(pixels, 0, (int)bmpStream.Length);
}

// Your original code
var newWB = wb.Flip(FlipMode.Vertical);
ImageControl.Source = newWB; 
```

是的，这比一个代码要多得多，尤其是。如果您之前在 Silverlight 或 WPF 中这样做过。

# php - 自动调整可变高度的图像

> ID：10944207
> 
> 赞同：0
> 
> 时间：2012-06-08T06:46:13.090
> 
> 标签：php, jquery, wordpress

我有一个图像列表（缩略图），显示为画廊。这些图像具有固定宽度和可变高度。

但是由于图像高度可变，页面看起来很有线

[http://www.geoffreywarnerstudio.com/live-edge-2](http://www.geoffreywarnerstudio.com/live-edge-2)

是否有任何可能的解决方案使用 jQuery 或 PHP 使其看起来不错，即连续自动调整图像 4？

* * *

**更新：**

我创建了一个 jsFiddle 以便更轻松地测试代码：http: [//jsfiddle.net/alokjain_lucky/vHVcP/](http://jsfiddle.net/alokjain_lucky/vHVcP/)

请我不希望图像被裁剪或拉伸以使它们具有相同的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:50:15.507

如果您不想在缩略图上压缩图像高度，只需为缩略图添加一个固定高度。

例如：添加`height: 100px;`到`ul.small-thumb-3 li img`style.css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:52:11.093

作为 CSS 的替代方案，这里有一个[Wordpress 插件](http://ditio.net/2010/01/02/jquery-image-resize-plugin/)，它基本上可以为您完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:04:54.287

用于创建相同大小的缩略图的有用链接：

[http://www.plus2net.com/php_tutorial/php_thumbnail.php](http://www.plus2net.com/php_tutorial/php_thumbnail.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T08:14:36.800

您可以尝试获取每个缩略图的高度，将它们放入数组中，然后使用 natsort 或类似方法将它们从最高到最低或其他方式排序。那就是如果订单无关紧要。这样，您将获得彼此相邻的大小相似的图像，并且看起来会稍微好一些。

要获取图像大小： http: [//php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

你也说“请我不希望图像被裁剪或拉伸以使它们具有相同的高度。” 因此，如果无法以任何方式更改图像，则几乎没有其他方法..

编辑：这里有更好看的版本：http: [//jsfiddle.net/vHVcP/10/](http://jsfiddle.net/vHVcP/10/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T15:25:40.780

在图像周围放置边框，然后在边框内动态居中图像。

[http://jsfiddle.net/saluce/vHVcP/19/](http://jsfiddle.net/saluce/vHVcP/19/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T05:31:36.663

我为我的要求创建了以下解决方案：http: [//jsfiddle.net/alokjain_lucky/vHVcP/](http://jsfiddle.net/alokjain_lucky/vHVcP/)

# php - 某行后无法回显

> ID：10944208
> 
> 赞同：0
> 
> 时间：2012-06-08T06:46:16.910
> 
> 标签：php, echo

我的 php 脚本中有一些奇怪的行为。出于某种原因，在某行之后，我无法创建回声。

```
include 'class/core.class.php';
include 'class/tp.class.php';

$tps = new tps;
$system = $_GET['system'];

$file = @fopen(getcwd() . "/csv/" . $system . ".csv", "r");
if(!$file) {
    echo "No data in " . getcwd() . "/csv";
    exit;
}

$tps->dropSystemData($system);

$counter = 0;

$data = array();

while($csv = fgetcsv($file, 0, ";")) {
    $data[$counter]['date'] = $csv[0];
    $data[$counter]['time'] = $csv[1];
    $data[$counter]['tp'] = $csv[2];

    $counter++;
}

foreach($data as $row) {
    $date = explode(".", $row['date']);
    echo 1; // Works
    $date = $date[2] . "/" . $date[1] . "/" . $date[0];
    echo 2; // Works
    $time = $row['time'];
    echo 3; // Works
    $tp = $row['tp'];
    echo 4; // Doesn't work
    echo $tp; // Doesn't work
    var_dump($tp); // Doesn't work
    var_dump($data); // This doesn't output anything like the echos and var_dumps before
} 
```

我没有看到任何特殊原因，为什么这不起作用。完全没有错误。

var_dump 的`$data`

```
array(445) {
  [0]=>
  array(3) {
    ["date"]=>
    string(10) "03.01.2012"
    ["time"]=>
    string(8) "12:30:06"
    ["tp"]=>
    string(10) "EN1K945540"
  }
  [1]=>
  array(3) {
    ["date"]=>
    string(10) "04.01.2012"
    ["time"]=>
    string(8) "12:30:07"
    ["tp"]=>
    string(10) "EN1K945588"
  }
  [2]=>
  array(3) {
    ["date"]=>
    string(10) "04.01.2012"
    ["time"]=>
    string(8) "12:30:09"
    ["tp"]=>
    string(10) "EN1K945592"
  }
  [3]=>
  array(3) {
    ["date"]=>
    string(10) "04.01.2012"
    ["time"]=>
    string(8) "12:30:09"
    ["tp"]=>
    string(10) "EN1K945594"
  } 
```

在开头添加了以下内容，但没有错误或警告：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

更新：我现在更改了变量名，但它仍然不起作用。

更新 2：我的坏，一些缓存问题，现在关闭并打开浏览器，现在它正在工作。重复的变量名称导致了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:53:45.907

您这样做`$tp = new tp;`并分配给Class`$tp`的一个实例`tp`

相反，进入循环，你给它分配一个`String`，然后把所有的事情都搞砸了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:55:59.480

你在浏览器中吗？你的 $row['tp']; 包含无效的 HTML 代码或角括号？它们可能被解释为 HTML 标记，因此可能不会显示任何代码。签入 HTML/源代码...

# ruby-on-rails - 在 Ruby on Rails 中将 HAML 用于静态页面

> ID：10944214
> 
> 赞同：0
> 
> 时间：2012-06-08T06:46:50.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, haml

我想创建一个静态页面，该页面将由 Nginx 而不是 rails 提供。我想用 HAML 写它。有没有办法为此使用资产管道，而不是在我的构建文件中添加一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:45:16.343

如果是静态页面，请确保您的页面可以被浏览器或服务器缓存。这并不能完全回答您的问题，但我猜想达到相同的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:36:44.707

我认为这里的问题是需要*一些东西*来启动你的转换。无论您使用的是 HAML、sprockets、jekyll 还是其他东西都不是重点；仍然需要某种监视或定期过程来启动转换过程。

每当您的 HAML 文件的内容发生变化时，您可能想要使用 guard、autotest、cron、inotify 或任何其他许多工具来启动您的转换脚本。就个人而言，我认为 cron 是最简单的选择，但 inotify 回调可能是最节省资源的选择。你的旅费可能会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:41:33.433

`haml`您可以使用以下命令将您的 Haml 文件编译为 HTML 文件：

```
haml -qf html5 [infile] [outfile] 
```

然后你可以在没有 Rails 的情况下使用它。

# java - 用运行时异常替换检查异常？

> ID：10944216
> 
> 赞同：9
> 
> 时间：2012-06-08T06:47:07.080
> 
> 标签：java, exception-handling

鉴于我基本上想消除检查异常的使用并将它们转换为运行时异常，我通常会做这样的事情：

```
try {
    file.read();
} catch (IOException e){
    throw new RuntimeException(e); 
} 
```

这样做有几个缺点，但最让我恼火的是我的运行时异常将包含嵌套的堆栈跟踪。基本上我想用原始消息和堆栈跟踪将“IOException”重新抛出为 RuntimeException（或“IORuntimeException”），这样我就可以避免无用的嵌套堆栈跟踪。我在中间某处重新抛出异常的“事实”对我来说似乎只是无用的噪音。

这可能吗 ？有没有这样做的图书馆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:49:12.603

[Project Lombok](http://projectlombok.org/disableCheckedExceptions.html)允许您完全禁用已检查的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:17:33.517

从我的评论跟进。这是[一篇文章](http://robaustin.wikidot.com/rethrow-exceptions)，必须对这个问题有所了解。它用于`sun.misc.Unsafe`重新抛出异常而不包装它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T06:52:50.003

```
class IORuntimeException extends RuntimeException {

    final IOException ioex;

    public IORuntimeException(IOException ioex) {
        this.ioex = ioex;
    }

    @Override
    public String getMessage() {
        return ioex.getMessage();
    }

    @Override
    public StackTraceElement[] getStackTrace() {
        return ioex.getStackTrace();
    }

    //@Override
    // ...
} 
```

[（此处](http://ideone.com/swUom)提供完整类，由 Eclipse“生成委托方法”宏生成。）

用法：

```
try {
    ...
} catch (IOException ioex) {
    throw new IORuntimeException(ioex);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T12:22:29.613

如果您正在考虑使用其他答案的 Unsafe （我建议不要，但无论如何），另一种选择是滥用泛型以使用这对邪恶的方法引发检查异常（来自[http://james-iry.blogspot.co .uk/2010/08/on-removing-java-checked-exceptions-by.html](http://james-iry.blogspot.co.uk/2010/08/on-removing-java-checked-exceptions-by.html)）：

```
 @SuppressWarnings("unchecked")
   private static <T extends Throwable, A> 
     A pervertException(Throwable x) throws T {
      throw (T) x;
   }

   public static <A> A chuck(Throwable t) {
      return Unchecked.
        <RuntimeException, A>pervertException(t);
   } 
```

您也可以签出`com.google.common.base.Throwables.getRootCause(Throwable)`并打印其（根）堆栈跟踪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T15:38:15.460

听起来你实际上需要检查异常

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-29T08:25:52.943

从 Java 8 开始，还有另一种方法：

```
try {
  // some code that can throw both checked and runtime exception
} catch (Exception e) {
  throw rethrow(e);
}

@SuppressWarnings("unchecked")
public static <T extends Throwable> RuntimeException rethrow(Throwable throwable) throws T {
    throw (T) throwable; // rely on vacuous cast
} 
```

* 更多信息[在这里](https://stackoverflow.com/a/39719455/435605)。

# android - 如何保存 WebView 状态？

> ID：10944218
> 
> 赞同：0
> 
> 时间：2012-06-08T06:47:18.617
> 
> 标签：android, webview

我正在使用 HTML5 开发 Android 应用程序。在我的应用程序中有一个主要的 HTML 页面，我从该页面打开弹出页面。但是当方向改变弹出页面被关闭时。

我想在方向改变时打开那个弹出页面

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:32:49.933

当屏幕方向改变时，活动再次开始。因此，在您对 create 方法的活动中再次调用，这就是 pop 关闭的原因。您必须了解 Android 中的 SingleInstence 概念。通过使用 SingleInstence，我们可以防止在方向更改时重新创建对象，并且您可以通过在活动类中使用 onConfigurationChanged 覆盖方法来通知方向更改。如果您的应用程序是在 Html 中，那么更喜欢 phonegap ..

# ruby - Xmpp4r Google Talk 无法设置状态

> ID：10944223
> 
> 赞同：1
> 
> 时间：2012-06-08T06:47:37.117
> 
> 标签：ruby, gmail, google-talk, xmpp4r

我希望能够通过 ruby​​ 脚本为我的 google talk 设置我的状态（即状态和可用性）。我似乎无法使用 xmpp4r 使其工作。我认为可能是 google talk 不再通过此 xml 协议设置存在（即存在标记），和/或我需要使用 xmpp4r 中包含的 pubsub 库。非常感谢您的帮助！到目前为止我的代码：

```
class Simplified
  require 'xmpp4r'
  include Jabber

  def initialize(usr, pwd, host, rsrc='', port=5222)
    @usr = usr
    @pwd = pwd
    @host = host
    @rsrc = rsrc
    @port = port

    @cl = Client.new(JID.new("#{@usr}/#{@rsrc}"))
    @cl.connect(host, port)
    @cl.auth(pwd)
  end

  # :chat, nil, :dnd, :away, :xa, :unavailable, :error
  def status(presence, msg)
    @presence = presence
    @stat_msg = msg
    stat_msg = Presence.new.set_show(:chat)
    # stat_msg = Presence.new(@presence, @status_message, 24)
    send stat_msg
  end

  def send(msg)
    @cl.send(msg)
  end
end

usr = 'joeuser@gmail.com'
pwd = 'password'
host = 'talk.google.com'
rsrc = 'test'

me = Simplified.new(usr, pwd, host, rsrc)
me.status(:dnd,'new status') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:19:11.693

如果您使用的是常规 xmpp4r 库：

您的客户必须发送一个“存在”节：

```
@cl.send(Jabber::Presence.new.set_type(':available')) 
```

# jasper-reports - 在 ireport 2.0.2 和 4.1.1 中使用函数 $ X {} 有什么区别

> ID：10944226
> 
> 赞同：0
> 
> 时间：2012-06-08T06:48:01.200
> 
> 标签：jasper-reports, ireport

我想问一下名单。如何在 iReport 2.0.2 中使用公式 $X{}。你能告诉我一个例子，让我知道这个功能。

更新问题：- 在 ireport ireport 2.0.2 和 4.1.1 中使用函数 $ X {} 有什么区别。为什么 ireport 2.0.2 无法读取数据字段，而 ireport 4.1.1 可以读取数据？是否有任何示例可以更正此类情况列表。![在此处输入图像描述](../Images/d3d56c3b99e1ad750e6c1d0d20bf8823.png)

![在此处输入图像描述](../Images/11a3b9c970ef4c561dfbaaca62f1db59.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:50:13.467

我提示我的用户提供药房的名称（参数是一个集合），然后将其输入到查询的 where 子句中，如下所示：

WHERE $X{IN, PHAR_CODE, 药房}

在我的数据库中，药房标识符可以在一个名为 PHAR_CODE 的字段中找到，用户提供的参数名称是 pharmacy。用户可以查询一个或多个药房，所以我使用 $X。使用默认值可提供所有药店的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:54:15.337

看看这个错误报告： http: [//jasperforge.org/plugins/mantis/view.php ?id=4301](http://jasperforge.org/plugins/mantis/view.php?id=4301)

# joomla2.5 - 我在每篇文章中都显示了类别名称。如何禁用它？

> ID：10944228
> 
> 赞同：0
> 
> 时间：2012-06-08T06:48:13.653
> 
> 标签：joomla2.5

.我在 Joomla 2.5.4 工作。我创建了具有外部 URL 菜单类型的菜单并链接到带有文章的子菜单。在每篇文章上都会显示类别名称。我尝试了全局配置中的所有设置。任何人都知道?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:48:36.607

检查管理站点中的组件-> 文章管理器。然后点击右上角的“选项”。模式中应该有一个选项可以打开以禁用类别标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T15:04:26.663

该解决方案非常愚蠢，但我最终发现它 - 转到类别管理器 - 在基本选项选项卡中的类别文章更改为博客。在一般文章选项中，我设置为隐藏类别标题，仅此而已。;)

# ubuntu - 在 Ubuntu localhost 上安装 Joomla 扩展

> ID：10944231
> 
> 赞同：1
> 
> 时间：2012-06-08T06:48:34.637
> 
> 标签：ubuntu, joomla

我的 Joomla 2.5.4 安装文件夹是 /var/www/Joomla_2.5.4/

当我尝试安装新的扩展、模板等时，会出现错误，因为 /var/www/ 需要 root 访问权限才能移动或创建目录或文件。我如何授予 Joomla root 访问权限，或者是否有其他解决此问题的方法？

干杯和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T16:33:37.913

同意上面的杰森。我知道这是一个旧线程，但在我的环境中 777 是危险的，因为任何用户都可以读取/写入/修改这些文件，所以只需将您的 joomla 目录的所有权更改为 apache（这是针对 Ubuntu，不确定其他的 apache 用户/组发行版）

```
chown -R www-data.www-data /var/www/Your_Joomla_File 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:59:47.183

为什么不为您的项目创建一个虚拟主机？创建虚拟主机：

1.  去终端=> `$ sudo etc/hosts/` =>`127.0.0.1 joomla`
2.  创建并写入该主机：=>

    $ sudo touch /etc/apache2/sites-available/joomla $ sudo gedit /etc/apache2/sites-available/joomla 然后在该文件中写入以下内容：

    ```
     <VirtualHost *:80>
                DocumentRoot /home/usr/path/your_joomla_project/
                ServerName joomla
                <Directory />
                   Options FollowSymLinks
                   AllowOverride All
                   Order allow,deny
                   allow from all
                </Directory>
          </VirtualHost> 
    ```

3.  启用该主机 =>`$ sudo a2ensite joomla`

4.  重新启动 apache2 =>`$ sudo service apache2 restart`

这里我觉得`'your_joomla_project'`文件夹还不能写，那么

```
 => `$ sudo chmod 777 -R /home/usr/path/your_joomla_project/` 
```

*   要访问您的网站，只需`joomla`在浏览器地址栏中输入。

然后我确定它不会再次向您征求任何许可。

# javascript - 为什么这个 javascript 单例方法有效

> ID：10944235
> 
> 赞同：0
> 
> 时间：2012-06-08T06:48:46.993
> 
> 标签：javascript

```
function foo() {
    if (arguments.callee.self)
        return arguments.callee.self;
    arguments.callee.self = this;
    //do sth
} 
```

我明白什么时候这样称呼它：

```
var a = foo(); 
```

当 foo 被执行时，arguments.callee 就是 foo 本身。所以它将这个传递给未定义的变量self。下次当另一个函数调用 foo 时，它会返回 this。显然这会起作用。

当它被这样调用时，事情似乎变得更加棘手：

```
var b = new foo(); 
```

我认为 js 引擎会创建另一个 foo 实例并执行其代码。但它似乎将 this 引用传回，因为 self 已经定义，就像 foo 的同一个实例一样。那么“新”在这里实际上做了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:55:47.707

`new`调用函数作为构造函数。如果目标函数显式返回一个对象，则该对象将返回而不是刚刚创建的对象。

由于您在非严格模式下运行此代码，因此该函数在第一次调用后显式返回全局对象，因此它不会返回新创建的对象`new foo()`

# java - 基于 Java opengl 块的游戏性能

> ID：10944236
> 
> 赞同：4
> 
> 时间：2012-06-08T06:48:47.537
> 
> 标签：java, performance, opengl, lwjgl

我正在使用 lwjgl 和 Java 来构建一个基于块的 3d 游戏，比如 Minecraft。我目前有一个包含函数 void Update() 和 void Draw() 的 Block 类，我在游戏循环的每个循环中按 Update() 和 Draw() 的顺序调用它们。函数 draw 在请求时包含一个 texture.bind() 以在块上应用纹理，然后有 6 个 if 条件来检查是否需要分别渲染 6 个边。例子：

```
if(rendertop)
GL11.glVertex3f(position.x, position.y, position.z);
..... 
```

目前它工作得很好，除了当我画了很多这些块时，它会减慢 fps，所以游戏无法玩。在谷歌上进行一些搜索后，我发现有更好的方法可以将 3d 对象绘制到屏幕上，然后在每次绘制中一次又一次地将每个顶点发送到显卡。我尝试使用列表，但它似乎只需要更多的内存。我为块的每一侧创建了一个新列表，如果需要渲染的一侧与上面的示例相同，则调用它，这意味着每个块有 6 个列表。这就是我制作列表的方式：

```
GL11.glNewList(displayListId, GL11.GL_COMPILE);
GL11.glBegin(GL11.GL_QUADS);
...... (Calling GL11.glVertex3f to draw the side)
GL11.glEnd();
GL11.glEndList(); 
```

我这样称呼它：

```
if(rendertop)
GL11.glCallList(displayListId); 
```

但正如我之前所说，它只会让游戏变得很慢，我知道这可能与我实现它的方式有关。使用该方法的另一个问题是您破坏了删除显示列表所需的块，而我不知道该怎么做。

任何人都可以建议一种使用显示列表或其他方法来提高性能的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:52:05.627

使用[顶点数组](http://www.opengl.org/wiki/Vertex_Arrays)或[顶点缓冲区对象](http://www.opengl.org/wiki/Vertex_Buffer_Object)来批量渲染。

每个 VA 或 VBO 应包含（例如）一个 16x16x16 的立方体块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:41:40.273

如果您已经在代码中实现了显示列表，您可能不会注意到将每个块单独放在其自己的顶点缓冲区中会显着提高速度。

按照 genpfault 所说的去做，但我强烈建议使用八叉树、四叉树或其他类型的树来确定某些块是否可见（[隐藏表面确定](https://en.wikipedia.org/wiki/View_frustum_culling)）。有了这个，您会注意到性能大幅提升。

# sql - 在 Oracle 中使用特殊字符

> ID：10944241
> 
> 赞同：1
> 
> 时间：2012-06-08T06:49:04.387
> 
> 标签：sql, oracle, stored-procedures, quoted-identifier

我有桌子

```
create table loan 
(loan_id varchar2(20),
cust_id varchar2(10),
loan_amt number,
start_date date,
loan_plan varchar2(20),
end_date date,
Credit_bureau_score varchar2(20),
"small char" varchar2(20),
"special_char3^%#$@#^%*&" varchar2(20)
); 
```

只有列名是特殊字符。现在在一个过程中，我使用 select column_name into some_variable from dba_tab_column where table_name='loan' 现在我必须将 some_variable 传递给其他一些过程，但在这里我收到错误为 **ORA-00600：内部错误代码，参数：[17090]， [], [], [], [], [], [], [], [], [], [], []**

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:04:09.647

ORA-00600 大多数时候表示 Oracle 中的错误。

您可以提交错误报告并希望获得补丁，或者您可以简单地停止在列名中使用这些字符。

我强烈建议您使用后一种方法并删除那些特殊字符。即使它会通过 ORA-00600，我敢肯定，从长远来看，您会因为它们而遇到*很多*问题。

# c# - 如何从数据库中检索日期并将其绑定到日期选择器？

> ID：10944244
> 
> 赞同：0
> 
> 时间：2012-06-08T06:49:13.403
> 
> 标签：c#, sql-server, sql-server-2005, ado.net

我正在使用 SQL Server 2005，我想检索存储在数据库中的特定记录的日期，并希望将该日期设置为 datechooser。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:36:37.447

```
System.Windows.Forms.DateTimePicker dateTimePicker1 = new System.Windows.Forms.DateTimePicker();            
dateTimePicker1.Name = "dateTimePicker1";
dateTimePicker1.Size = new System.Drawing.Size(200, 20);            

SqlConnection connection= new SqlConnection(@"Data Source=DATASOURCE;Initial Catalog=DBNAME;Persist Security Info=True;User ID=USERNAME;Password=PASSWORD"); 
using (SqlCommand command = new SqlCommand("SELECT Top 1 colDate From tblTemp", connection)) 
{     
    connection.Open();

    SqlDataReader reader = command.ExecuteReader();     
    if (reader.Read())     
    {          
        DateTime dt=new DateTime();
        dt=DateTime.Now;
        bool b=DateTime.TryParse(reader["CreatedAt"].ToString(),out dt);
        dateTimePicker1.Value = dt;
    }

    connection.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:54:21.987

```
using (SqlConnection connection= new SqlConnection("CONNECTIONSTRING");
using (SqlCommand command = new SqlCommand("SELECT-QUERY", connection))
{
    //set parameters if you need them
    //command.Parameters.AddWithValue("@paramName", paramValue);

    connection.Open();
    SqlDataReader reader = command.ExecuteReader();
    if(reader.Read())
    {
         object date = reader["COLUMNNAME"];
         //Do something with the date...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:50:14.077

怎么样

```
mytextbox.Text = Result_returned_from_Execute_Scalar(); 
```

# objective-c - iPad2 可以使用分辨率为 2048 x 1536 的图像而没有审美问题吗？

> ID：10944245
> 
> 赞同：1
> 
> 时间：2012-06-08T06:49:24.510
> 
> 标签：objective-c, resolution, ipad-3

我正在为 iPad 开发一个 iOS 应用程序。目前我正在使用分辨率为 2048×1536 像素（iPad3 分辨率）的图像。如果我在 iPad2 或 iPad1 上运行这个应用程序，它会适应它的分辨率（1024×768 像素）吗？或者我应该使用 1024×768 图像并为 iPad3 指定 image@2x 吗？

因为我只有 iPad3 ，所以不知道如何在较低分辨率的设备中看到图像。但它也应该在他们身上完美地工作。

非常感谢任何帮助。请引用您的消息来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:53:16.890

如果您没有非视网膜设备，您可以在模拟器中尝试此操作。

这当然是可能的并且通常看起来不错（至少对于照片，文本和图标在按比例缩小时可能看起来更糟），但是您浪费了相当多的内存，这在 iPad 1 上非常稀缺（它只有 256 MB），所以你通常还应该包括非视网膜图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:58:17.400

自动缩小图像通常会导致视觉伪影，这就是为什么 SDK 提供了一种简单的方法来包含任何图像的不同版本，而不仅仅是一个大的图像。

据我所知，所有 iOS 设备（在同一个系列中）的分辨率都是彼此的倍数，因此自动缩放伪影有所缓解，但最好还是包含正确的分辨率。

# javascript - 为什么javascript不能在复选框上工作？

> ID：10944248
> 
> 赞同：0
> 
> 时间：2012-06-08T06:49:34.620
> 
> 标签：javascript, html, radio-button, checkbox

我有两组复选框，当我单击第一组复选框时，应取消选中第二组复选框。但是当我两次单击第一个复选框时，第二个复选框未选中。这是我的 javascript 代码

```
 <script>
            function uncheck0(){
                for(var ii=1; ii<=3; ii++){
                    if(document.getElementById("q6_"+ii).checked==true){
                       document.getElementById("q6_"+ii).checked=false;
                    }
                }
            }
            function uncheck(id, from, to){
                for(var ii=from; ii<=to; ii++){
                    if(document.getElementById(id+ii).checked==true){
                       document.getElementById(id+ii).checked=false;
                    }
                }
            }
        </script> 
```

这是我的**html 代码**，第一组有**单选按钮**，第二组有复选框

```
<p>IF YES: When will the review begin?</p>
            <label  for="q6"><input type="radio" class="styled" value="Within the next 12 months" name="q6[]" id="q6_1">Within the next 12 months</label>
            <label  for="q6"><input type="radio" class="styled" value="Within the next 24 months" name="q6[]" id="q6_2">Within the next 24 months</label>
            <label  for="q6"><input type="radio" class="styled" value="We are currently doing it" name="q6[]" id="q6_3">We are currently doing it</label><br>
        <br>
        <p>IF NO: Why Not</p>
            <label onclick="uncheck('q6_',1,3);" for="q6"><input type="checkbox" class="styled" value="Lack of budget" name="q6[]" id="q6_4">Lack of budget</label>
            <label onclick="uncheck('q6_',1,3);" for="q6"><input type="checkbox" class="styled" value="Lack of resource" name="q6[]" id="q6_5">Lack of resource</label>
            <label onclick="uncheck('q6_',1,3);" for="q6"><input type="checkbox" class="styled" value="Do not see the need" name="q6[]" id="q6_6">Do not see the need</label>
            <label onclick="uncheck('q6_',1,3);" for="q6"><input type="checkbox" class="styled" value="Lack of know how/expertise" name="q6[]" id="q6_7">Lack of know how/expertise</label>
            <label onclick="uncheck('q6_',1,3);" for="q6"><input type="checkbox" class="styled" value="Complexity" name="q6[]" id="q6_8">Complexity</label>
            <label onclick="uncheck('q6_',1,3);" for="q6"><input type="checkbox" class="styled" value="Contractual obligations" name="q6[]" id="q6_9">Contractual obligations</label>
            <label onclick="uncheck('q6_',1,3);" for="q5"><input type="checkbox" class="styled" value="Other" name="q6[]" id="q6_10">Other </label>
            <label onclick="uncheck('q6_',1,3);" for="q5a">Please state</label><input type="text" value="" id="q6a" name="q6a"> 
```

我已使用 javascript 文件“custom-form-element.js”进行复选框和单选样式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:02:36.687

您需要有一个默认的“检查”值

```
 <input type="checkbox" checked="true"> 
```

否则，您的代码会认为它未选中，然后将值设置为“选中”，然后第二次单击将“取消选中”它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:02:45.237

将`onclick="uncheck('q6_',1,3);"`标签从标签移到输入框。
您的最终代码应类似于：

```
<label for="q6">
    <input type="checkbox" onclick="uncheck('q6',1,3);" class="styled" value="Lack of budget" name="q6[]" id="q6_1">Lack of budget</label>
<label onclick="uncheck('q6_',1,3);" for="q6_2"><input type="checkbox" class="styled" value="Lack of resource" name="q6[]" id="q6">Lack of resource</label> 
```

# python - SQLAlchemy 重新连接到数据库

> ID：10944259
> 
> 赞同：2
> 
> 时间：2012-06-08T06:50:18.160
> 
> 标签：python, mysql, sqlalchemy

我编写了用于 DB SQLAlchemy 的守护进程。数据库 MySQL。如果守护程序空闲很长时间，则连接断开并且我看到错误。是否可以在守护进程工作时使无法关闭的连接或如何重新连接到数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:09:06.270

创建引擎时有一个选项“pool_recycle”，请参阅[http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html?highlight=pool_recycle](http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html?highlight=pool_recycle)

# javascript - 如何将javascript代码更改为Jquery？

> ID：10944260
> 
> 赞同：-3
> 
> 时间：2012-06-08T06:50:28.583
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何将 Javascript 代码转换为 Jquery 代码？](https://stackoverflow.com/questions/10828381/how-to-convert-javascript-code-to-jquery-code)

我需要将此 javascript 代码转换为 Jquery 吗？

`eval("document.forms[0].strKey" + intDimId).value + "," + tarr[i];`

你能帮我把上面的代码改成jQuery吗

谢谢，

拉贾塞卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:55:47.613

一个字：***不要***。

如果您有工作的 JavaScript，那么将其“转换”为 jQuery 是一种降级。

但是你真的应该了解数组。说真的，只需将您的代码重写为：

```
document.forms[0]['strKey'+intDimId].value + "," + tarr[i]; 
```

# azure - Azure 网站的裸域支持

> ID：10944263
> 
> 赞同：6
> 
> 时间：2012-06-08T06:50:51.557
> 
> 标签：azure, dns, azure-web-app-service

从外观上看，新的[Azure 网站](http://weblogs.asp.net/scottgu/archive/2012/06/07/meet-the-new-windows-azure.aspx)功能仍然不支持将它们托管在裸域下，例如 example.com 而不是 www.example.com。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:38:21.017

Azure 网站现已发布对裸域的支持。在共享或预留实例上运行的网站确实通过 A 记录支持裸域。域管理可通过 Azure 管理门户获得。

**2012 年 10 月 21 日更新：**

我之前说过免费实例可以依靠 CNAME 将子域重定向到他们的免费 Azure 网站，但这似乎是不正确的，至少目前是这样。*正如MemeDeveloper*在他的评论中所报告的那样，对您的 Azure 网站进行 CNAME 将导致 HTTP 404 。

~~但是，如果您在免费实例上运行您的网站，您仍然仅限于 CNAME，因此对于这些网站，裸域是不可能的。~~

**更新：**

正如*MemeDeveloper*在他的评论中建议的那样，您可以使用一些网络服务来获取您的裸域`example.com`并将其重定向到`www.example.com`您。对于您的`www`子域，您可以将 CNAME 指向您的 Azure-URL。

~~不像可用于付费网站的简单 A 记录那样干净，而是免费网站的解决方法。~~

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-20T02:31:09.733

上面的对话有点过时了。但是，当人们正在寻找/搜索 Azure 裸域支持时，此条目会出现在列表顶部。我会更新答案。

Azure 现在在共享和 > 计划中提供 IP，您可以配置裸域。

查看以下文章了解更多信息：

*   [https://azure.microsoft.com/en-us/documentation/articles/web-sites-custom-domain-name/](https://azure.microsoft.com/en-us/documentation/articles/web-sites-custom-domain-name/)
*   [http://blogs.msdn.com/b/waws/archive/2014/10/01/mapping-a-naked-url-to-your-azure-web-site-url-with-no-www.aspx](http://blogs.msdn.com/b/waws/archive/2014/10/01/mapping-a-naked-url-to-your-azure-web-site-url-with-no-www.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:04:01.033

Azure 不支持裸域，因为这需要明确地将 IP 地址映射到域名。要映射裸域名，您需要在 DNS 中有 1 条记录。因此，在这种情况下，负载均衡之类的服务更难以落实到位。

大多数注册商提供了一种通过 HTTP 重定向机制将裸域请求重定向到另一个名称的方法。例如，您可以将 example.com 重定向到 www.example.com。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T00:36:22.570

对此似乎有些困惑。我不知道网站的处理方式是什么，但正常的 Azure Web 角色提供了一个虚拟 IP 地址，除非您删除 webrole 部署，否则该地址保证不会更改。

您可以将域名 A 记录绑定到该 VIP，如此[处](http://msdn.microsoft.com/en-us/library/windowsazure/gg981933.aspx)所述。

实际上，这意味着当我想更新我的网站时，我必须先进行临时部署；然后与生产部署切换，最后删除暂存部署。我知道的唯一警告是，如果您切换端点配置（甚至不是名称），您将无法执行此操作。

我目前正在寻找网站是否有相同类型的保证，但还没有找到合适的文档。

# c# - C# 或其他语言的 Scala 风格的抽象模块？

> ID：10944264
> 
> 赞同：6
> 
> 时间：2012-06-08T06:50:52.073
> 
> 标签：c#, java, scala, architecture, dependency-injection

我正在阅读 Martin Odersky 的书 Programming in Scala 中关于抽象模块的部分，以及他的论文 Scalable Component Abstractions：

[http://lampwww.epfl.ch/~odersky/papers/ScalableComponent.pdf](http://lampwww.epfl.ch/~odersky/papers/ScalableComponent.pdf)

我的收获是，通过使您的模块成为*抽象类*而不是*对象*（或Java 中的经典*静态全局模块）：*

```
abstract class myModule{ 
    // this is effectively an abstract module, whose concrete 
    // components can be configured by subclassing and instantiating it
    class thing{}
    class item{}
    object stuff{}
    class element{}
    object utils{}
} 
```

您可以实例化具有不同具体特征的模块的多个子类和实例。这使您可以根据情况对模块进行不同的配置（例如，在测试期间替换数据库组件，或在开发环境中替换 IO 组件）以及实例化多个模块，每个模块都有自己的一组模块范围的可变状态。

据我了解，在基本层面上，唯一的硬性要求是您可以拥有嵌套类，以便封闭类可以充当模块。

另一个实际要求是您可以将类定义分布在多个文件中，因为其中包含一堆类的模块可能比大多数人在单个源文件中接受的代码行多。

Scala 使用 Traits 来做到这一点，它带来了一些其他的好东西，这些东西很好，但不是整个*散布在多个源文件上的抽象模块类的*核心思想。C# has `partial classes`，它提供相同的功能，并且还允许嵌套类。大概其他一些语言对嵌套类以及将一个类拆分为多个文件有类似的支持。

这种模式是否出现在 C# 或任何其他语言的任何地方？我认为许多语言的大型项目都面临*抽象模块*要解决的问题。这个“抽象类作为抽象模块”的东西不起作用，因此没有被使用，有什么原因吗？在我看来，与提供相同功能的各种 DI 框架相比，它是一个更简洁的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:39:22.150

通常的比较是与 ML 模块，其中 Scala 特征（或抽象类）扮演 ML 签名的角色，而它们的具体实现（通常是 Scala 对象）扮演 ML 结构的角色。[此处](http://en.wikipedia.org/wiki/Standard_ML#Module_system)对 ML 模块的讨论应该使连接相当清晰。

Scala 和 ML 之间的类比是经过深思熟虑的，如果您查看 Scala 编译器的源代码，您会发现 Scala 对象通常使用包含“模块”作为一部分的名称来引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:39:08.840

您描述的*抽象模块*具有以下核心属性：

*   它是一个封闭的模块，这意味着它提供了允许与模块交互的所有接口
*   您可以在模块上指定操作
*   您可以指定属于模块的类型——通常这些类型由上述模块操作
*   没有提供实现——这是*抽象*部分：可以有许多具体的实现，程序中实际使用的实现将由程序指定和选择，因为它最适合需要

能够使用多个源文件指定模块的功能不是核心要求，但它肯定会派上用场。

在其最基本的形式中，模块描述了一种抽象数据类型（例如队列）：哪些操作可用于与数据类型交互，以及交互所需的任何辅助类型。

在更复杂的形式中，它可以描述整个子系统（例如网络）。

在命令式语言中，您通常将*接口*用于相同目的：

*   它是封闭的
*   您可以指定操作
*   您可以指定属于接口的类型
*   没有实施

正如您所提到的，如果您的模块有一个大接口（例如描述一个子系统），那么在一个文件中编写实现丰富接口的类通常是不切实际的。如果该语言不支持将同一类拆分为单独的源（或更准确地说：将同一类的不同部分从不同的源文件“粘合”在一起），解决方案通常是放弃*附带*的要求并提供一系列指定它们之间交互的接口——因此您获得了子系统的 API（它是最纯粹意义上的 API：它是与子系统交互的接口，还没有实现）。

在某些方面，后一种方法可能比封闭类型更通用（在您可以用它实现的意义上通用）：您可以提供来自不同作者的各种子类型（通过接口指定）的实现：只要子类型之间只依赖于指定的接口进行交互，这种混合匹配方法将起作用。

大多数函数式编程语言的优势之一是参数化数据类型，您可以在其中实例化一个dayatype，并将另一个作为其参数（例如整数队列）。Java/C# 中的泛型（以及 C++ 中的模板）实现了同样的灵活性。当然，确切的含义和表达能力可能因语言的类型系统而异。

整个讨论是独立形式的依赖注入（DI），它试图通过显式提供所需的部分（而不是让实现选择）来放松类型的具体实现与其支持部分之间的强依赖关系，作为用户该类型可能对这些部分的哪些实现最能实现其目标有更好的理解——例如，为测试功能提供模拟实现。

DI 试图解决的问题是命令式语言所独有的，您也可以在函数式语言中遇到相同的依赖问题：抽象模块的实现可能会选择使用子类型的特定实现（从而将其自身耦合到这些实现）而不是将子类型实现作为参数（这是 DI 的目标）

# mysql - 如何使这个查询更快

> ID：10944269
> 
> 赞同：0
> 
> 时间：2012-06-08T06:51:27.213
> 
> 标签：mysql, sql

```
SELECT D.A1, D.A2, D.A3  from D, l1
     ,l2 where
     l1.Z = "90001"and substring(D.A1,1,5) = substring(l2.A1,1,5) and substring(D.A2,1,5) = substring(l2.A2,1,5)
    AND 3959 * (PI()/180) * SQRT(
        POW( (l2.A2-l1.A2)*COS((PI()/180)*(l2.A1+l2.A1)/2), 2 ) + 
         POW( l2.A1-l1.A1, 2 ) ) <= 10'); 
```

这需要永远运行。我不知道如何使这更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:50:23.560

coll_cs，你可以试试这个

```
select D1.A1, D1.A2, D1.A3
     from 
     ( 
        SELECT substring(D.A1,1,5) AS A1,
                substring(D.A2,1,5) AS A2,
                D.D3 AS D3
        from D
     ) as D1
     ,
     (
        select 
        substring(l2.A1,1,5) AS A1,
        substring(l2.A2,1,5) AS A2
        l1,l2
        where l1.Z = "90001"
        and
        3959 * 
        (PI()/180) * 
        SQRT(
        POW( (l2.A2-l1.A2)*COS((PI()/180)*(l2.A1+l2.A1)/2), 2 ) + 
        POW( l2.A1-l1.A1, 2 ) 
        ) <= 10
     ) as L
     where D1 = L.A1
     and   D1 = L.A2 
```

我没有关于表的足够信息，例如字段类型、行数、键和索引

更新格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:53:24.887

你有什么索引？你有索引`l1.Z`吗？如果没有，这将是一个明显的开始方式。

您还可以将表达式的结果存储`substring(l2.A1,1,5)`在表本身中。这将允许您索引表达式的结果，这意味着您的连接会更快。

看起来您还试图在太空中寻找“附近”的东西。如果是这样，请查看 MySQLs[空间扩展](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:56:12.910

你的数据库设计对我来说看起来很奇怪，我很确定 MySQL 不能在这些条件下使用 INDEX

```
substring(D.A1,1,5) = substring(l2.A1,1,5) and substring(D.A2,1,5) = substring(l2.A2,1,5) 
```

从此以后表现不佳：/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:04:51.603

您应该首先使用连接重写查询，看看是否有帮助：

```
select D.A1, D.A2, D.A3
from D
inner join l2 on substring(D.A1,1,5) = substring(l2.A1,1,5) and substring(D.A2,1,5) = substring(l2.A2,1,5)
inner join l1 on 3959 * (PI()/180) * SQRT( POW( (l2.A2-l1.A2)*COS((PI()/180)*(l2.A1+l2.A1)/2), 2 ) + POW( l2.A1-l1.A1, 2 ) ) <= 10
where l1.Z = "90001" 
```

# javascript - 根据 LI 职位添加课程

> ID：10944273
> 
> 赞同：3
> 
> 时间：2012-06-08T06:52:12.450
> 
> 标签：javascript, jquery

我有以下标记，

```
<ul>
<li>1</li> //light BG
<li>2</li>
<li>3</li>
<li>4</li> //light BG
<li>5</li>
<li>6</li>
......
</ul> 
```

我想根据位置添加类`dark`和。`light``li`

*   首先`li`应该是`light`
*   2、3应该是`dark`
*   4、5应该是`light`
*   一样的图案……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:58:33.003

```
$('ul li:nth-child(3n-2)').addClass('light');

$('ul li::not(:nth-child(3n-2))').addClass('dark'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/185/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:03:50.790

玩模运算符，很有趣！

```
$( 'li' ).each( function() {
    // Cache some variables
    var el = $( this ),
        index = el.index();

    if ( index % 3 === 0 || index % 3 === 1 ) {
        el.addClass( 'light' );
    }
    else {
        el.addClass( 'dark' );
    }
} ); 
```

[PS：感谢[Zeta](https://stackoverflow.com/users/1139697/zeta)帮助我进行模运算 /o/]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:00:14.407

这是你所追求的模式：

[http://jsfiddle.net/rCkQV/](http://jsfiddle.net/rCkQV/)

如果其他人是黑暗的，他们可以只继承一个为所有 LI 设置的类，而光会覆盖它。

```
$("ul li:nth-child(4n),ul li:nth-child(4n+1)").addClass("light"); 
```

# kohana-3 - 在 kohana 中将文件下载为损坏的文件

> ID：10944275
> 
> 赞同：0
> 
> 时间：2012-06-08T06:52:27.783
> 
> 标签：kohana-3

大家好，我在 kohana 中遇到文件上传和下载问题

```
my controller is like this:

class Controller_Test extends Controller
{
     public function action_display()
     {
        $type = $_FILES['file']['type'];

          switch ($type)
          {
          case 'image/gif':
             $otype='.gif';   break;
         case 'image/jpeg':
         case 'image/pjpeg':
            $otype= '.jpg';   break;
         case 'image/png':
            $otype= '.png';   break;
          case 'application/octet-stream':
              $otype='.doc';   break;
          case 'txt': $otype='.txt'; break;
          case 'application/pdf': $otype='.pdf'; break;
           }
     //rename the file
     $name = time() . '_' . mt_rand(1000,9999).$otype;
     $directory = $_SERVER['DOCUMENT_ROOT'].URL::base().'media';

      //uploading a file 
     $filename = Upload::save($_FILES['file'],  $name, $directory);

           $this->auto_render = false;
           $this->response->send_file($filename);

    }//action
}//controller 
```

当我调用这个函数文件上传正常

但将文件下载为损坏的文件

帮我解决这个问题..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:28:13.947

首先，您可以在此处进行一些简单的调试检查。

*   `$directory`有效吗？
*   是`$filename`一个有效的文件路径，还是它`FALSE`？（见[http://kohanaframework.org/3.2/guide/api/Upload#save](http://kohanaframework.org/3.2/guide/api/Upload#save)）

我会假设`$directory`是无效的。

您想使用绝对路径常量来构建目录路径。而不是使用`$_SERVER['DOCUMENT_ROOT'].URL::base()`（在任何情况下都是错误的）

而是使用`APPPATH`or `DOCROOT`，例如`$directory = APPPATH.'media';`参见[https://github.com/kohana/kohana/blob/3.2/master/index.php#L57-74](https://github.com/kohana/kohana/blob/3.2/master/index.php#L57-74)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:59:29.853

您不应该`URL::base()`在路径名中添加，因为这可能会在文件路径中添加类似“http://...”的内容。尝试删除并重`URL::base()`试。

# mysql - 使用 PDO Mysql/MSSQL 返回表中最接近日期的日期

> ID：10944276
> 
> 赞同：1
> 
> 时间：2012-06-08T06:52:28.470
> 
> 标签：mysql, sql-server, pdo

我有 2 个 PDO 数据库连接。我正在 MS SQL 表中搜索与日期（mysql 日期时间）行最匹配的行。

我已将 mysql.table1.date 传递给 mssql.table，我正在根据 mssql.table.date 寻找最接近的日期。它也被定义为日期时间字段。我只需要返回 1 行，最接近时间，所以本质上：

```
 SELECT * FROM table ORDER BY CLOSEST(mysqldate = mssql.table.date) LIMIT 1; 
```

我知道上面的语法不正确，但基本上输出了我需要的东西，但我真的不知道如何用 mssql 来做到这一点。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:11:41.167

基本上你可以找到mysql日期与mssql.Table.Date列中所有日期的差异。然后你需要从上面的查询中选择最小的差异值。希望下面的查询可以帮助你

```
 ;with CTE as 
 (
 Select mssql.table.date,row_number() 
 over (order by    abs(datediff(day,mysqlDate,mssql.table.date))) rowNumber
 from mssql.Table)
 select mssql.table.date from CTE where rowNumber=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:51:45.220

一个对我有用的简单解决方案是执行以下操作：

```
 SELECT * FROM `table` WHERE `date` < `startDate` ORDER BY `date` LIMIT 1; 
```

这将返回与我经过的时间最近的时间匹配的 1 行:)

# c# - Telerik 渲染报告

> ID：10944282
> 
> 赞同：0
> 
> 时间：2012-06-08T06:53:17.417
> 
> 标签：c#, telerik-reporting

我对 Telerik 报告有一些问题。感觉好像我错过了一些东西......我想创建一个报告列表，然后将它们写入一个文件。但是当我写出来时，我只得到一页。第 1 页上的作家 writer all foreach，所以它只写一页。但我想要几页...在这种情况下 10\. 尝试使用 FileStream、File 等进行写入...有没有人有好主意？

```
 public void WriteToFile()
   {
       string path = @"C:\";
       string test = "test";

       var report = new Report2();

       var procceser = new ReportProcessor();

      var list = new List<RenderingResult>();
       for (int i = 0; i < 10; i++)
       {
           var res = procceser.RenderReport("PDF", report, null);
           list.Add(res);
       }

       string filePath = Path.Combine(path, test);

       var Writer = new BinaryWriter(File.Create(filePath));

       foreach (var renderingResult in list)
       {
           Writer.Write(renderingResult.DocumentBytes);
       }

       Writer.Flush();
       Writer.Close();

   } 
```

# java - 未记录显式 GC

> ID：10944283
> 
> 赞同：1
> 
> 时间：2012-06-08T06:53:20.777
> 
> 标签：java, garbage-collection

我正在使用以下标志启动一个 java 1.6.0.32 实例

```
set JAVA_OPTS=%JAVA_OPTS% -XX:+UseConcMarkSweepGC -XX:+UseParNewGC
set JAVA_OPTS=%JAVA_OPTS% -XX:+UseBiasedLocking -XX:+ExplicitGCInvokesConcurrent
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintGCDetails
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintGCTimeStamps
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintGCApplicationStoppedTime
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintGCApplicationConcurrentTime
set JAVA_OPTS=%JAVA_OPTS% -Xloggc:gc.log
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintHeapAtGC
set JAVA_OPTS=%JAVA_OPTS% -XX:+HeapDumpOnOutOfMemoryError
set JAVA_OPTS=%JAVA_OPTS% -XX:HeapDumpPath=heap-dump.core
set JAVA_OPTS=%JAVA_OPTS% -server -XX:MaxTenuringThreshold=8 -XX:+CMSIncrementalMode 
set JAVA_OPTS=%JAVA_OPTS% -XX:+CMSIncrementalPacing -XX:+DoEscapeAnalysis 
set JAVA_OPTS=%JAVA_OPTS% -XX:+OptimizeStringConcat
REM set JAVA_OPTS=%JAVA_OPTS% -XX:+UseCompressedOops REM for 64 bit only
set JAVA_OPTS=%JAVA_OPTS% -XX:+UseCompressedStrings -XX:+UseFastAccessorMethods 
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintTenuringDistribution -XX:+UseStringCache 
set JAVA_OPTS=%JAVA_OPTS% -verbose:gc 
```

在我的应用程序初始化后，我明确要求进行完整的垃圾回收，并等待它使用[此](https://stackoverflow.com/a/6915221/222867)技术完成。我已经确认堆使用 jvisualvm 大幅压缩，但完整的 GC 似乎没有记录在我的 gc 日志中。我已经为“Full GC”而苦苦挣扎，但没有结果。请注意，`-XX:+DisableExplicitGC`已关闭。我做错什么了吗？显式 GC 没有记录吗？任何指针都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:59:01.887

`FullGC`是 Stop-the-World mark-sweep-compact 系列的标志。

您正在使用`-XX:+ExplicitGCInvokesConcurrent`，此标志告诉 JVM 在调用 System.gc() 时使用并发收集而不是 STW。

[您可以在本文](http://blog.ragozin.info/2011/12/garbage-collection-in-hotspot-jvm.html)中查看并发收集器 (CMS) 的日志示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:19:30.677

我一直认为 DisableExplicitGC 禁用了显式 GC，因此您不应该在日志中看到任何内容。

您似乎正忙于等待其他事情触发 GC。

# html - 在页面内获取请求

> ID：10944286
> 
> 赞同：1
> 
> 时间：2012-06-08T06:53:35.383
> 
> 标签：html, get, request

我一直在四处寻找，但我不太确定要搜索什么......

我想让一个网页在您第一次打开页面时向 python 脚本发送一个 Get 请求，也许可以选择使用按钮刷新它。有没有办法发送请求（“script.py?var=test”）并在页面中显示结果？

我之前尝试使用的东西：（没用..）我在做一些愚蠢的事情吗？我对 JavaScript 一无所知

```
 <p>Highscores:</p> 
    <p id='scores'>text</p> 
<input type='button' onclick='changeText()' value='Change Text'/>
<script type="text/javascript">
function changeText(){
    var request = new XMLHttpRequest();
    request.open("GET", "../../cgi-bin/highScore.py?scoreMethod=load&game=ulama", true)
    request.onreadystatechange = function(){
        var done = 4, ok = 200;
        if (request.readyState == done && requeset.status == ok){
                document.getElementById('scores').innerHTML = request.responseText;
        }
    };
    request.send();
}
</script> 
```

另外，我是否应该让 python 脚本返回带有标题和所有内容的完整页面？还是只是相关部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:59:29.150

在这种情况下使用 Jquery 调用来稍微清理一下您的代码。

同样在这种情况下，由于“野兽”的性质，您应该使用帖子:)

```
function changeText(){
$.ajax({
 method  : "POST",
 URL     : "../../cgi-bin/highScore.py",
 data    :  {   
                "scoreMethod" : "load",
                "game"        :  "ulama"
            },
 success  :  function(data) {
       $("#scores").html(data);
 }
});

} 
```

我还会考虑返回 JSON 和 jquery，因为从长远来看它可能会更容易（尽管我从来没有玩过 python.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:01:34.450

为什么不使用 jquery 来执行此操作？

```
$('#scores').load('../../cgi-bin/highScore.py?scoreMethod=load&game=ulama', function(responseText, textStatus) {
      alert(textStatus);//check here whether textStatus equals 'success' or something else (maybe an error)
}); 
```

# php - mysql 和 php 命令有时不发布。难道是因为我的身体？

> ID：10944289
> 
> 赞同：0
> 
> 时间：2012-06-08T06:53:57.550
> 
> 标签：php, mysql, html, post

所以，我有以下 PHP 命令发布到我的数据库。

```
$sql = "INSERT INTO `db`.`tab;e` (`id`, `type`, `subtype`, `image1`, `image2`, `image3`, `title`, `body`, `price`, `googlecode`, `date`) VALUES (NULL, '$type', '$subType', '$image1', '$image2', '$image3', '$title', `$body`, '$price', '$googleCode', '$date');"; 
```

正在通过帖子获取数据。例如，类型是

```
$type = $_POST[type]; 
```

ETC..

但是，在发布内容时，我的代码有时有效，有时无效。

我认为这是因为我使用[niceEdit](http://nicedit.com/)来抓取正文，当它发布时，我担心 ' 和 " 会干扰我的帖子......

此外，它`$googlecode`是一堆带有引号和其他内容的 div。

这可能是我的代码断断续续工作的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:58:10.193

我猜它有时会失败，因为您没有转义这些值，而是直接将它们添加到查询中。这样，某些值可能会破坏 SQL 语句，并且该语句容易受到 SQL 注入的影响。

要解决此问题，您必须[转义这些值](http://ch2.php.net/manual/en/function.mysql-real-escape-string.php)，甚至更好的是，使用[准备好的语句](http://www.php.net/manual/en/pdo.prepare.php)。还强烈建议添加一些错误处理，以便您可以更轻松地获得有意义的完整错误消息（谢谢 Pekka）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:09:04.077

```
foreach($_POST as $key => $value) {
    if (get_magic_quotes_gpc()) {
        $value = stripslashes($value);
    }
    $_POST[$key] = mysql_real_escape_string($value);
}

$type = $_POST[type];
//etc...

$sql = "INSERT INTO `db`.`table` (`id`, `type`, `subtype`, `image1`, `image2`, `image3`, `title`, `body`, `price`, `googlecode`, `date`) VALUES (NULL, '$type', '$subType', '$image1', '$image2', '$image3', '$title', '$body', '$price', '$googleCode', '$date');"; 
```

# facebook - 将用户凭据远程发送到 facebook

> ID：10944290
> 
> 赞同：0
> 
> 时间：2012-06-08T06:53:57.997
> 
> 标签：facebook, facebook-graph-api

有谁知道如何在不使用浏览器的情况下从 java 代码远程将登录用户名和密码发送到 facebook ...我想创建一个使用 facebook 数据更新状态的桌面应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:04:24.467

Facebook 不支持通过第三方应用程序登录。您必须使用 facebook open auth 来验证用户。

# jquery - jquery悬停问题并单击切换

> ID：10944295
> 
> 赞同：-1
> 
> 时间：2012-06-08T06:54:40.353
> 
> 标签：jquery, html, css, click, hover

我有一张充满区域的地图，如果您将鼠标悬停在某个区域上或单击它，则会出现一个框（div）。

当我将鼠标悬停在一个区域上时，框（div）会出现，但在将鼠标移开后不会消失，所以如果我做对了，这意味着我需要一个切换或类似的东西，但要悬停。我花了几个小时在这里和其他地方搜索，尝试了一些代码，但没有一个有效。

所以我想知道切换 a`.hover`和切换的代码`.click` 是什么我在这里做错了什么，还是我完全使用了错误的代码？

这是我正在测试的网页：http: [//iseeit.no/maptest/](http://iseeit.no/maptest/)

这是我在 jquery 中的代码：（`.no19`, `.no2`,`.no1`是区域）

```
$(".no19").hover(function() {
$("#vest-agder").css({"display":"block"});
});

$(".no2").hover(function() {
$("#aust-agder").css({"display":"block"});
});

$(".no1").hover(function() {
$("#akershus").css({"display":"block"});
}); 
```

我尝试了类似这样的方法和其他一些方法，这似乎是正确的代码，但我无法让它正常工作：

```
 $(".no19").hover(function() {
     $(this).toggleClass('active');
        $('#vest-agder').toggleClass('active');
}); 
```

这是css的一个片段：

```
#vest-agder {
    background: #111;
    background: rgba(0,0,0,.8);
    color: #eee;
    position:absolute;
    display: none; 
```

这是html的一个片段：

```
<div id="vest-agder">
    <!-- agent address in the first region -->
  <p>text</p>
  </div> 
```

我还将 html、jquery 和 css 的所有编码都放在了 jsfiddle 中：http: [//jsfiddle.net/cpKFf/1/](http://jsfiddle.net/cpKFf/1/) 我从未使用过 jsfiddle，所以我不知道如何正确设置它但我猜它需要所有图形组件才能正确显示地图。你看到的代码是这样的结果：http: [//iseeit.no/maptest/](http://iseeit.no/maptest/)

希望我说清楚了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:17:54.573

您需要执行以下操作：

```
$(".no1").hover(function() {
  $("#akershus").css({"display":"block"});
  ,

  function()  {  $("#akershus").css({"display":"none"});   }

 }); 
```

悬停有两个功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:06:18.387

我不是 jquery 方面的专家，但不应该是`$(this).toggleClass('display');`

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# backbone.js - Backbone：一一验证属性

> ID：10944296
> 
> 赞同：10
> 
> 时间：2012-06-08T06:54:44.523
> 
> 标签：backbone.js

我需要验证一个包含大量输入的表单。并且，如果输入无效，请在表格中直观地指示特定属性无效。为此，我需要**单独**验证每个表单元素。

我有一个模型和一个代表整个表单的视图。现在当我更新一个属性时：

```
this.model.set('name', this.$name.val()) 
```

将调用模型上的 validate 方法。

但是，在该方法中，我正在验证**所有**属性，因此在设置上述属性时，也会验证所有其他属性，如果任何一个属性无效，则会返回错误。这意味着即使我的 'name' 属性有效，我也会得到其他人的错误。

那么，如何只验证一个属性呢？

我认为不可能只通过 validate() 方法验证一个属性。一种解决方案是不使用 validate 方法，而是验证 'change' 事件的每个属性。但这会产生很多变更处理程序。这是正确的方法吗？我还可以做些什么？

我也认为这指出了骨干网中一个更大的问题：

> 每当您`model.set()`在模型上设置属性时，都会运行您的验证方法并验证**所有**属性。这似乎违反直觉，因为您只想验证单个属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T08:48:04.687

`Validate``silent:true`用于使您的模型保持有效状态，除非您传递选项，否则它不会让您设置无效值。

您可以一次性设置所有属性：

```
var M=Backbone.Model.extend({
    defaults:{
        name:"",
        count:0
    },

    validate: function(attrs) {
        var invalid=[];
        if (attrs.name==="") invalid.push("name");
        if (attrs.count===0) invalid.push("count");

        if (invalid.length>0) return invalid;
    }
});

var obj=new M();
obj.on("error",function(model,err) {
    console.log(err);
});
obj.set({
    name:"name",
    count:1
}); 
```

或者在设置之前一一验证

```
var M=Backbone.Model.extend({
    defaults:{
        name:"",
        count:0
    },

    validate: function(attrs) {
        var invalid=[];
        if ( (_.has(attrs,"name"))&&(attrs.name==="") )
            invalid.push("name");
        if ( (_.has(attrs,"count"))&&(attrs.count===0) )
            invalid.push("count");

        if (invalid.length>0) return invalid;
    }
});

var obj=new M();
obj.on("error",function(model,err) {
    console.log(err);
});

if (!obj.validate({name:"name"}))
    obj.set({name:"name"},{silent:true}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T14:57:28.707

我最近创建了一个小的 Backbone.js 插件[Backbone.validateAll](https://github.com/gfranko/Backbone.validateAll)，它允许您通过传递**validateAll**选项仅验证当前正在保存/设置的模型属性。

[https://github.com/gfranko/Backbone.validateAll](https://github.com/gfranko/Backbone.validateAll)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:23:14.967

这不是 Backbone 的问题，它不会强迫您以某种方式编写验证。验证模型中持久存在的所有属性是没有意义的，因为通常您的模型不包含无效属性，`set()`如果验证失败，原因不会更改模型，除非您通过静默选项，但这是另一回事。但是，如果您选择这种方式，由于上述要点，验证总是会通过未更改的属性。

您可以自由选择另一种方式：仅验证要设置的属性（作为参数传递给`validate()`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:39:53.337

您还可以使用自己的自定义函数重载模型的 set 函数以传递 silent: true 以避免触发验证。

```
set: function (key, value, options) {
    options || (options = {});
    options = _.extend(options, { silent: true });
    return Backbone.Model.prototype.set.call(this, key, value, options);
} 
```

这基本上在选项中传递 {silent:true} 并使用 {silent: true} 调用 Backbone.Model 设置函数。这样，您就不必在任何地方将 {silent: true} 作为选项传递，您可以调用 this.model.set('propertyName',val, {silent:true})

对于验证，您还可以使用 Backbone.Validation 插件 [https://github.com/thedersen/backbone.validation](https://github.com/thedersen/backbone.validation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T17:53:35.927

我不得不对backbone.validation.js 文件进行修改，但它使这项任务对我来说变得更加容易。我将下面的代码段添加到验证函数中。

```
validate: function(attrs, setOptions){
            var model = this,
                opt = _.extend({}, options, setOptions);
            if(!attrs){
                return model.validate.call(model, _.extend(getValidatedAttrs(model), model.toJSON()));
            }

            ///////////BEGIN NEW CODE SNIPPET/////////////
            if (typeof attrs === 'string') {
                var attrHolder = attrs;
                attrs = [];
                attrs[attrHolder] = model.get(attrHolder);
            }
            ///////////END NEW CODE SNIPPET///////////////

            var result = validateObject(view, model, model.validation, attrs, opt);
            model._isValid = result.isValid;

            _.defer(function() {
                model.trigger('validated', model._isValid, model, result.invalidAttrs);
                model.trigger('validated:' + (model._isValid ? 'valid' : 'invalid'), model, result.invalidAttrs);
            });

            if (!opt.forceUpdate && result.errorMessages.length > 0) {
                return result.errorMessages;
            }
        } 
```

然后我可以像这样对单个属性调用验证

```
this.model.set(attributeName, attributeValue, { silent: true });
this.model.validate(attributeName); 
```

# html - 定期刷新网页

> ID：10944297
> 
> 赞同：5
> 
> 时间：2012-06-08T06:54:44.893
> 
> 标签：html, page-refresh

我的要求是我有一个 .php 页面，该页面必须根据数据库中的数据显示一些图形/数据。我想自动并定期刷新页面，以便可以更新图形/数据，因为数据仅在加载页面时获得。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T07:17:11.383

也许您可以尝试 setTimeout javascript 方法

```
setTimeout("location.reload(true);",timeoutPeriod); 
```

这将在每个 timeoutPeriod 间隔刷新页面。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T06:58:23.070

您可以使用 JavaScript。

JS函数

```
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
} 
```

在正文标签上添加以下行。

```
 <body onload="JavaScript:timedRefresh(5000);"> // time : 5000= 5 secs 
```

# javascript - Twitter Bootstrap：如何关闭模式对话框？

> ID：10944302
> 
> 赞同：18
> 
> 时间：2012-06-08T06:55:11.310
> 
> 标签：javascript, ajax, twitter-bootstrap, modal-dialog

我正在尝试使用 Twitter 的引导程序实现模式加载对话框。我目前的尝试是：

```
$(document).ready(function () {

    $('#loading_dialog')
        .ajaxStart(function () {
            $(this).modal('show');
        })
        .ajaxStop(function () {
            $(this).modal('hide');
        });
}); 
```

问题是对话框不会关闭。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-08T07:00:33.517

我没有对其进行测试，但问题可能取决于 ajaxStart/Stop 匿名函数的上下文。

你能试试这个吗？

```
var loading_dialog = $('#loading_dialog');
loading_dialog
    .ajaxStart(function () {
        loading_dialog.modal('show');
    })
    .ajaxStop(function () {
        loading_dialog.modal('hide');
}); 
```

# javascript - 使用“显示更多”按钮隐藏列表项

> ID：10944304
> 
> 赞同：5
> 
> 时间：2012-06-08T06:55:15.723
> 
> 标签：javascript, jquery, html-lists

我有一个问题。我正在从 MySQL 数据库中获取数据，并列出它。这一切都很好，而且工作正常，但如果我不限制它，现在这个列表已经超过 100 项了。我试过谷歌搜索如何缩短列表，并用 jQuery 和 JavaScript 找到了一些东西，但效果不太好。

我正在寻找的是一种使列表限制为 10 个项目的方法，其下方有一个 [更多] 按钮。按下时，会显示接下来的 10 个项目，再次按下时，会显示另外 10 个项目，以此类推。

我有正常`<li>`和`<ul>`位的列表。如果需要更多信息，请询问我。这是它的网页：http: [//lolmewn.nl/stats/](http://lolmewn.nl/stats/)

我的一些 PHP 代码：

```
echo "<li><a href=\"?player=" . $row['player'] . "\">" . $row['player'] . 
     "</a></li>\n"; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-08T07:51:24.267

也许你可以试试[这个](https://jsfiddle.net/kiirosora/jn8VW/314/)。在这个例子中，我使用了 2 个项目而不是 10 个项目。我使用 css 来隐藏从 ul 中的第 3 个 li 元素开始的所有 li 元素。每次单击显示更多时，我都使用 jQuery 显示额外的 2 个 lis。

希望这可以帮助

再次更新链接...

**编辑**

```
$(function () {
    $('span').click(function () {
        $('#datalist li:hidden').slice(0, 2).show();
        if ($('#datalist li').length == $('#datalist li:visible').length) {
            $('span ').hide();
        }
    });
});
```

```
ul li:nth-child(n+3) {
    display:none;
}
ul li {
    border: 1px solid #aaa;
}
span {
    cursor: pointer;
    color: #f00;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<ul id="datalist">
  <li>dataset1</li>
  <li>dataset1</li>
  <li>dataset2</li>
  <li>dataset2</li>
  <li>dataset3</li>
  <li>dataset3</li>
  <li>dataset4</li>
  <li>dataset4</li>
  <li>dataset5</li>
  <li>dataset5</li>
</ul>
<span>readmore</span>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:14:15.997

一种方法是使用 ajax 加载列表项并使用[mysql limit](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)将它们限制为 10 个项目。

否则，如果您一次加载所有内容，则可以执行以下操作：（自己编写代码）

*   将它们全部加载到 a 中`ul`并显示全部无。

*   然后使用[`jquery eq selector`](http://api.jquery.com/eq-selector/)显示前 10 个`li`元素。

*   单击更多时，只需切换`li`要显示的那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:08:27.617

你有没有尝试过[jquery 数据表](http://datatables.net/)？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T07:14:33.627

纯javascript中的简单解决方案：

```
var ul = document.getElementsByTagName("ul")[0], //Your <ul>
    readmore = document.createElement("li"),
    lisColl = ul.getElementsByTagName("li"),
    len = lisColl.length,
    lis = [],
    pos = 0;
readmore.textContent = "Read more";
for (var i = 0; i < len; i++) {
    lisColl[i].style.display = "none";
    lis.push(lisColl[i]);
}
readmore.onclick = function () {
    if (this.parentNode) {
        this.parentNode.removeChild(this);
    }
    for (var c = 0; pos < len; pos++) {
        if ((c++) === 10) {
            ul.insertBefore(this, lis[pos + 1]);
            break;
        }
        lis[pos].style.display = "";
    }
}
readmore.onclick.call(readmore); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-25T15:48:18.060

如果你想要这是纯 javascript 我[在 jsfiddle 上做了一个例子](http://jsfiddle.net/gq1u6kef/)

**Javascript**

```
function showMore() {

    var listData = Array.prototype.slice.call(document.querySelectorAll('#dataList li:not(.shown)')).slice(0, 3);

  for (var i=0; i < listData.length; i++)
  {
    listData[i].className  = 'shown';
  }
  switchButtons();
}

function showLess() {
    var listData = Array.prototype.slice.call(document.querySelectorAll('#dataList li:not(.hidden)')).slice(-3);
  for (var i=0; i < listData.length; i++)
  {
    listData[i].className  = 'hidden';
  }
  switchButtons();
}

function switchButtons() {
    var hiddenElements = Array.prototype.slice.call(document.querySelectorAll('#dataList li:not(.shown)'));
  if(hiddenElements.length == 0)
  {
    document.getElementById('moreButton').style.display = 'none';
  }
  else
  {
    document.getElementById('moreButton').style.display = 'block';
  }

  var shownElements = Array.prototype.slice.call(document.querySelectorAll('#dataList li:not(.hidden)'));
  if(shownElements.length == 0)
  {
    document.getElementById('lessButton').style.display = 'none';
  }
  else
  {
    document.getElementById('lessButton').style.display = 'block';
  }
}

onload= function(){
    showMore();
} 
```

**HTML**

```
<ul id="dataList">
    <li class="hidden">One</li>
    <li class="hidden">Two</li>
    <li class="hidden">Three</li>
    <li class="hidden">Four</li>
    <li class="hidden">Five</li>
    <li class="hidden">Six</li>
    <li class="hidden">Seven</li>
    <li class="hidden">Eight</li>
    <li class="hidden">Nine</li>
    <li class="hidden">Ten</li>
    <li class="hidden">Eleven</li>
</ul>
<input id="moreButton" type="button" value="More" onclick="showMore()"/>
<input id="lessButton" type="button" value="Less" onclick="showLess()"/> 
```

**CSS**

```
.shown{
  display:block;
}
.hidden{
  display:none;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T07:12:37.010

如果要限制来自数据库的结果数量，请将`LIMIT 10`（或任何数量）添加到 MySQL 查询中。

如果您想真正隐藏列表，但让它们可用，您将需要 CSS 来最初隐藏它们，并使用 Javascript/Jquery 来取消隐藏它们。（CSS3 可能让你在没有 Javascript/Jquery 的情况下取消隐藏它们，但它还没有在所有地方都得到完全支持）。

假设所有列表项都具有相同的 CSS `class`，那么类似下面的 javascript 循环可能会起作用：

```
function unhide(number) {
    var items = document.getElementsByClassName('tagnamehere');
    var shown=0;
    for (var i=0; shown<number && i<items.length; i++) {
        if (items[i].style.display=="" || items[i].style.display=="none") {
            items[i].style.display="list-item";
    shown+=1;
        }
    }
} 
```

在 CSS 中，您需要添加的只是`.tagnamehere {display:none;}`

随意替换为您自己的标签。

# iphone - 返回表格视图时如何更改 UITableViewController 的选定单元格？

> ID：10944307
> 
> 赞同：0
> 
> 时间：2012-06-08T06:55:21.653
> 
> 标签：iphone, ios, uitableview

当您选择一个单元格并移动到详细视图并通过点击返回表格视图时`back button`，您上次选择的单元格的背景颜色会突出显示。

从详细信息视图返回表格视图时，如何突出显示之前未选择的另一个单元格？

例如，对于 Apple 的`Music`应用程序，当您选择并播放歌曲并通过点击更改歌曲`next track button`并返回歌曲表视图时，突出显示的单元格不是您上次收听的歌曲，而是您上次选择的歌曲表视图。
但我想强调你上次听的那首歌。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:59:18.087

您需要在调用 didSelectRow 函数时保存 NSI​​ndexPath 。

在 viewWillAppear 方法中，您应该使用此方法为保存的 indexpath 选择行。

```
- (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:05:48.403

在视图中将出现方法，您必须使用以下功能取消选择先前的选择

– 取消选择RowAtIndexPath：动画：

之后选择你必须调用下面的方法 In view 会出现

– selectRowAtIndexPath:animated:scrollPosition:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:01:04.477

在提问之前，请阅读[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)。你会找到：

```
- (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition 
```

# json - 使用 Linq 为 Json 序列化构建结构

> ID：10944309
> 
> 赞同：0
> 
> 时间：2012-06-08T06:55:42.263
> 
> 标签：json, linq, c#-4.0

我有一个非常简单的结构，看起来像这样：

```
var list = new List<CategoryInTimeItem>
        {
            new CategoryInTimeItem { Name = "Food", Year = 2012, Month = 1, Amount = 100 },
            new CategoryInTimeItem { Name = "Food", Year = 2012, Month = 2, Amount = 110 },
            new CategoryInTimeItem { Name = "Food", Year = 2012, Month = 3, Amount = 130 },
            new CategoryInTimeItem { Name = "Food", Year = 2012, Month = 4, Amount = 130 },
            new CategoryInTimeItem { Name = "Transport", Year = 2012, Month = 1, Amount = 1000 },
            new CategoryInTimeItem { Name = "Transport", Year = 2012, Month = 2, Amount = 1101 },
            new CategoryInTimeItem { Name = "Transport", Year = 2012, Month = 3, Amount = 1301 },
            new CategoryInTimeItem { Name = "Transport", Year = 2012, Month = 4, Amount = 1301 }
        }; 
```

我想重塑这个结构，以便当它被序列化为 json 时，结果应该如下所示，每个名称一个数组：

```
[
[["2012-1", 100], ["2012-2", 110], ["2012-3", 130], ["2012-4", 130]],
[["2012-1", 1000], ["2012-2", 1101], ["2012-3", 1301], ["2012-4", 1301]]
] 
```

我的 linq 查询如下所示：

```
 result.Values = 
                from d in list
                orderby d.Name , d.Year , d.Month
                group d by d.Name
                into grp
                select new[]
                {
                    grp.Select(y => new object[] {y.DateName, y.Amount})
                }; 
```

这几乎可以工作，但是我得到了一个额外的“级别”数组，所以当序列化为 json 时，结果如下所示：

```
[
[[["2012-1", 100], ["2012-2", 110], ["2012-3", 130], ["2012-4", 130]]],
[[["2012-1", 1000], ["2012-2", 1101], ["2012-3", 1301], ["2012-4", 1301]]]
] 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:58:42.370

你几乎到过那里，而不是

```
from d in list
...
select new[]
{
    grp.Select(y => new object[] {y.DateName, y.Amount})
} 
```

简单地：

```
from d in list
...
select grp.Select(y => new object[] {y.DateName, y.Amount}).ToList() 
```

您只是在最后添加了不必要的数组级别。

# openerp - 如何将甘特图导出为pdf？

> ID：10944311
> 
> 赞同：4
> 
> 时间：2012-06-08T06:55:45.133
> 
> 标签：openerp

我正在使用 openerp 6.1，并且我创建了一个项目，其中每个阶段都有我的阶段和任务。

我想打印甘特图，但那里没有选项。请建议我如何完成这项工作。

![在此处输入图像描述](../Images/2c678d64266d5c0576fe6892f19ce27a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:59:04.703

它们是在 PDf 上使用它的默认方法，但您始终可以做的是准备一份报告以在 pdf 上绘制该报告，例如您在 project_scrum 模块上的燃尽图，使用 Pychart 和 reportlib 引擎，您可以产生有效的结果，或者您可以在最后使用现代网络浏览器屏幕截图实用程序。

谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:12:48.930

我同意，每个页面都应该有打印/PDF按钮来保存当前视图:(

我能想到两种解决方法：

1.  使用报告生成您自己的图表报告（我建议使用 webkit_report）
2.  将 HTML 视图打印为 PDF。即，捕获视图的 html 代码并打印，或发送到另一个系统以转换为 PDF（使用 wkhtmltopdf）。我这里有一个例子可以帮助你：[http ://timothysolomon.co.za/work/openerp-printing-with-javascript/](http://timothysolomon.co.za/work/openerp-printing-with-javascript/)

祝你好运，也许在第 7 版中，他们默认会有这个。

# asp.net-mvc - MvcBuildViews 实际上有什么作用吗？

> ID：10944315
> 
> 赞同：0
> 
> 时间：2012-06-08T06:56:06.733
> 
> 标签：asp.net-mvc

我刚刚在 MVC 项目中发现了这个属性，但我很难确定它是否有任何实际影响。以下让我相信这个属性几乎没有开箱即用的实际效果：

1.  它对站点（AFAICT）进行就地编译，并使站点“可更新”，这样标记文件就不会受到影响。这对于就地编译很重要，因此不会消除源。
2.  因为它在 WAP 项目中，所以无论如何，所有代码文件都将编译到项目的输出程序集中（除非它们在 App_Code 中，但这很奇怪）。

所以项目中的源代码已经编译好了，标记文件不受影响。使用 MvcBuildViews 的实际影响是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:53:00.957

当`<MvcBuildViews>`设置为 true 时，如果视图包含任何服务器端代码问题，则构建 Web 项目会导致错误。请注意，这包括 C# 错误（编译时/类型安全等），但不包括 JavaScript 错误，因为它们本质上是非编译的。

此功能适用于**Razor**和**WebForms视图，但在使用****Spark**视图引擎时似乎无效。

# java - 如何在 Java 中创建带有一些修改的音频正弦波文件？

> ID：10944319
> 
> 赞同：0
> 
> 时间：2012-06-08T06:56:36.317
> 
> 标签：java, audio, wave

我想创建一个正弦波文件并在特定时间间隔对正弦函数应用一些修改，例如幅度变化等。关于如何去做的任何建议？相当于[https://ccrma.stanford.edu/software/stk/hello.html](https://ccrma.stanford.edu/software/stk/hello.html)这个 c++ 库。关于java中一些好的外部库有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:17:42.837

使用 java 声音 api。[在此处](http://docs.oracle.com/javase/1.5.0/docs/guide/sound/programmer_guide/chapter7.html#114640)阅读有关允许您编写包括 wave 在内的不同格式的转换器的信息。

Java 声音 api 包含在 jdk 中，因此不需要第三方库。

# android - 在android中显示图像，文件名中有空格，来自在线

> ID：10944320
> 
> 赞同：1
> 
> 时间：2012-06-08T06:56:42.677
> 
> 标签：android, imageview

我需要在我的 android 应用程序中显示图像。问题是我想从网上的某个地方获取这张图片。网址是这样的：

> [http://www.mydomain.com/hello](http://www.mydomain.com/hello) world image.png

如您所见，图像名称中包含一些空格。每次我执行我的代码时，这都会向我显示 FileNotFound 异常。什么也没有发生。

以下是我的代码

```
String imagePathCon = "hello world image.png";      
String imagePath = "http://www.mydomain.com/" + imagePathCon;
try {
  URL url;
  url = new URL(imagePath);

  // url = new URL("http://www.azuma-kinba.com/wp-content/uploads/2012/05/Android-Make-Google-Loss-in-2010.png");

  InputStream content = (InputStream)url.getContent();
  Drawable d = Drawable.createFromStream(content , "src"); 
  im.setImageDrawable(d);

 } catch (MalformedURLException e) {
            e.printStackTrace();
 } catch (IOException e) {
            e.printStackTrace();
 } 
```

我用“+”替换空格，但没有任何反应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:03:44.020

这将起作用。

```
String imagePathCon = "hello world image.png";   
imagePathCon=imagePathCon.replaceAll(" ", "%20");

String imagePath = "http://www.mydomain.com/" + imagePathCon; 
```

你必须知道[http://en.wikipedia.org/wiki/Percent-encoding#Character_data](http://en.wikipedia.org/wiki/Percent-encoding#Character_data)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:05:55.200

请使用正确的 URL 来获取图像并使用下面的代码，这些代码肯定会帮助你......

使用...替换 URL 的空间

```
 imagePath=imagePath.replaceAll(" ", "%20"); 
```

现在...

```
 HttpGet httpRequest = new HttpGet(new URL(params[0]).toURI());
         HttpClient httpClient = new DefaultHttpClient();
         HttpResponse response = (HttpResponse) httpClient.execute(httpRequest);
         HttpEntity entity = response.getEntity();
         BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity); 
             InputStream is = bufHttpEntity.getContent();
        //image_value = new URL("image Url is here");
            bm = BitmapFactory.decodeStream(new FlushedInputStream(is));
    //imageLoader is object of iamge view
           imageLoader.setImageBitmap(bm); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:58:49.663

您需要对路径进行 url 编码，如下所示：

```
String imagePathCon = URLEncoder.encode("hello world image.png", "UTF-8"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:08:22.757

您还可以使用 http get 请求：最简单的方法是简单地调用 URLEncoder，它会自动将字符串中的所有字符替换为 url 编码格式。

```
HttpParams httpParameters = new BasicHttpParams(); 
HttpConnectionParams.setConnectionTimeout(httpParameters, 30000); 
HttpConnectionParams.setSoTimeout(httpParameters, 30000);
HttpClient httpclient = new DefaultHttpClient(httpParameters); 
HttpGet httpGet = new HttpGet(URLEncoder.encode(url, "UTF-8"));
HttpResponse httpResponse = httpclient.execute(httpGet); 
in = httpResponse.getEntity().getContent(); 
//Bitmap bmp = BitmapFactory.decodeStream(instream); 
//create a bitmap or an image from the input stream 
```

# c# - C# DirectX 使用 DrawUserPrimitives 画线工作正常，但 DrawPrimitives 不起作用

> ID：10944323
> 
> 赞同：0
> 
> 时间：2012-06-08T06:56:56.483
> 
> 标签：c#, drawing, directx, lines

我在 C# 中遇到了 DirectX 的问题。我想画一些线。首先，我用 DrawUserPrimitives 完成了它，一切都很好。但后来我切换到 vertexBuffer 因为我想做旋转和其他相机动作。我什么也看不见。

有一部分代码填充 vertexBuffer 并在平面上绘制顶点。

```
vertexBuffer = new VertexBuffer(typeof(CustomVertex.PositionColored), 
   8 * (CurrentPanel.ElementsCount() + 1), m_device, Usage.None,
   CustomVertex.PositionColored.Format, Pool.Default);
CustomVertex.PositionColored[] verts =
   (CustomVertex.PositionColored[])vertexBuffer.Lock(0, 0);
//this function returns array of verts based on given points.
verts = CurrentPanel.GetLines(); 
vertexBuffer.Unlock();
m_device.Clear(ClearFlags.Target, System.Drawing.Color.FromArgb(255, 255, 255).ToArgb(), 1.0f, 0);
m_device.BeginScene(); //m_device is my DirectX.Device
SetupViewport(); //Set all of matrixes...
m_device.SetStreamSource(0, vertexBuffer, 0);
m_device.VertexFormat = CustomVertex.PositionColored.Format;
//m_device.DrawUserPrimitives(PrimitiveType.LineList, CurrentPanel.ElementsCount() * 4, verts); // <- WHEN I USE THIS ALL IS OK
m_device.DrawPrimitives(PrimitiveType.LineList, 0, 4*(CurrentPanel.ElementsCount()+1)); //<-DO NOT WORK
m_device.EndScene();
m_device.Present(); 
```

我想补充一点，此代码基于 Microsoft DirectX 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:04:04.163

您没有将顶点写入 VertexBuffer。

您创建了一个名为的变量`verts`并使用它来引用从该`Lock`方法返回的 Array，然后您将引用的数组替换为`verts`from 的返回值`CurrentPanel.GetLines()`。但是您实际上并没有向 VertexBuffer 写入任何内容。

# iphone - iphone视网膜显示中的UIView动画不流畅

> ID：10944326
> 
> 赞同：0
> 
> 时间：2012-06-08T06:57:45.350
> 
> 标签：iphone, animation, uiview, retina-display

我想要一个 uiview 的滚动动画。所以我正在为 mainscrollview 和 rollupboard 制作动画。所以在 viewDidLoad 我将这两个视图的框架设置为：

```
 dashRollUpStand=[[UIImageView alloc]initWithFrame:CGRectMake(0,346,320,0)];
    mainScrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(10,346,300,0)]; 
```

我也有这个 mainScrollView 的许多子视图。

现在我正在使用以下代码加载带有滚动动画的视图：

```
 [UIView beginAnimations:nil context:nil];
 [UIView setAnimationDuration:1];
 [UIView setAnimationCurve:UIAnimationCurveLinear];

 [dashRollUpStand setFrame:CGRectMake(0,0,320,346)];
 [mainScrollView setFrame:CGRectMake(10,9,300,337)];
 [UIView commitAnimations]; 
```

此汇总动画在 iphone 中运行良好。但在 iphone 视网膜显示器上，这个动画一点也不流畅。那么我怎样才能使它在 iphone 视网膜显示中平滑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:14:15.127

您是否有理由在 viewDidLoad 中添加视图并将它们移出屏幕？

~~在我看来，你应该这样做。下面的代码`containerView`是*包含您的视图的视图*，`toView`是您要翻转*到*的视图，也是您*要从*`fromView`其翻转的视图。~~

 *~~```
[UIView transitionWithView:containerView
                  duration:1.0
                   options:UIViewAnimationOptionTransitionFlipFromRight
                animations:^{ 
                    [fromView removeFromSuperview]; 
                    [containerView addSubview:toView]; 
                }
                completion:NULL]; 
```~~  ~~我还选择使用基于块的动画/过渡 API，这是自 iOS 4 以来[推荐的方式。](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)

### 编辑：

由于您实际上并没有转换视图，即使您的原始代码确实如此。您可以只使用普通的动画块

```
[UIView animateWithDuration:1.0
                 animations:^{
                     [dashRollUpStand setFrame:CGRectMake(0,0,320,346)];
                     [mainScrollView setFrame:CGRectMake(10,9,300,337)];
                 }
                 completion:NULL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:58:25.110

问题不在于您使用的动画类型，而更可能是您在视图之外拥有的动画。首先尝试确保动画视图中的子视图是不透明的，不透明是 UIView 的一个属性，但是如果视图的 alpha 小于 1，它会被覆盖。渲染系统需要更多的 cicles 来混合清晰的视图，如果你可以选择不透明的。~~*

# rabbitmq - RabbitMQ msg_store_transient 目录吃掉所有可用磁盘空间

> ID：10944327
> 
> 赞同：5
> 
> 时间：2012-06-08T06:57:47.963
> 
> 标签：rabbitmq

我对 RabbitMQ 2.8.2 服务器有疑问。使用一两天后，我收到来自 RabbitMQ 的磁盘空间警告，我发现的唯一解决方案是清除目录**/var/lib/rabbitmq/mnesia/rabbit@linux-3blg/msg_store_transient**并重新启动 RabbitMQ。我在我的程序中使用了相当大的消息 1-50MB 可能有问题，但我真的需要稳定性。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:53:37.187

这意味着消息没有被确认和消费。使用 Time-To-Live Extensions 可能会有所帮助。请参阅[http://www.rabbitmq.com/ttl.html#per-queue-message-ttl](http://www.rabbitmq.com/ttl.html#per-queue-message-ttl)并设置消息的过期时间。

# jquery - 如何使用 jQuery 检查 ajax 请求是否完成并再次发送新请求？

> ID：10944331
> 
> 赞同：0
> 
> 时间：2012-06-08T06:58:09.670
> 
> 标签：jquery

在页面加载时，我使用 jQuery .ajax 函数发送一个 AJAX。在我得到响应后，我想发送另一个 ajax 请求，它将是递归的。

因此，在获得先前的 ajax 请求的响应后，我想发送另一个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:02:10.943

在这里我试着给你一个样本

```
function recursiveAjax(url, method, dataType, ) {
  $.ajax({
     url: url,
     method: method,
     dataType: dataType,
     success: function(response) {  // success function call after a successful response
         if(response) {
            recursiveAjax('script_url', 'POST', 'json');
         }
     }
  })
} 
```

**初始调用：**

```
recursiveAjax('script_url', 'POST', 'json'); 
```

阅读更多关于$ **[.ajax](http://api.jquery.com/jQuery.ajax/)**`success()`和`complete()`方法的信息。

您还可以使用`.done()`如下方法：

```
function recursiveAjax() {
  $.ajax({
    url: url,
    method: method,
    dataType: dataType
  }).done(function ( response ) {
    if(response) {
       recursiveAjax(...);
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:03:27.203

参考[jQuery 文档](http://api.jquery.com/jQuery.ajax/)`complete`中的or`success`参数

# jaxb - 针对 xsd 文件验证使用 jaxb 创建的 xml

> ID：10944332
> 
> 赞同：9
> 
> 时间：2012-06-08T06:58:09.897
> 
> 标签：jaxb, jaxb2, xml-validation

我有一个使用 jaxb 创建的 xml 文件。我需要根据 xsd 文档对其进行验证。是否可以只进行验证而不进行编组。然后我需要在 xml 文件中打印错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T12:37:48.640

是的，您可以使用从 1.5 开始的 java 中的验证器。这是参考[**文档**](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html)

除此之外，您还可以使用基于 dom 或基于流的 API 来针对 xsd 文件验证您的 XML 文档。如果您希望将 SAX API 用于您的任务，那么请听下面的示例：

```
try {
    String schemaLang = "http://www.w3.org/2001/XMLSchema";

    SchemaFactory factory = SchemaFactory.newInstance(schemaLang);

    Schema schema = factory.newSchema(new StreamSource("sample.xsd"));
    Validator validator = schema.newValidator();

    validator.validate(new StreamSource("test.xml"));

} catch (SAXException e) {
    System.out.println(" sax exception :" + e.getMessage());
} catch (Exception ex) {
    System.out.println("excep :" + ex.getMessage());
} 
```

否则，您可以使用 DOM、DOM4J 或 XOM API。如需进一步参考，您可以[**在此处查看**](http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html)。

stackoverflow 中也有一个相关的[答案](https://stackoverflow.com/questions/9094662/validate-an-xml-against-an-xsd-in-java-getting-a-hold-of-the-schemalocation)。

# mysql - MySQL In Clause 在列表具有重复元素且未排序的情况下性能

> ID：10944339
> 
> 赞同：4
> 
> 时间：2012-06-08T06:58:26.597
> 
> 标签：mysql

如果 mysql 中子句的值列表`IN`具有重复值且未排序，是否会影响查询性能。

例如

```
SELECT * FROM `t1` WHERE `id` IN (2,2,3,1,1); 
```

v/s

```
SELECT * FROM `t1` WHERE `id` IN (1,2,3); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:01:30.770

`MySQL`将摆脱不同的值并在优化阶段对它们进行排序。

这会略微影响性能，但对于大多数实际查询，您不会注意到任何差异（它的数量级为毫秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:08:15.530

当您使用以下查询时，您需要担心这一点：

```
SELECT * FROM `t1` WHERE `id` IN (SELECT `id` FROM `t2`); 
```

并且返回的行数`t2`大于 1000！

# algorithm - 从递归到迭代

> ID：10944340
> 
> 赞同：0
> 
> 时间：2012-06-08T06:58:32.517
> 
> 标签：algorithm, optimization, recursion, iteration

我的函数需要更改为迭代，因为它的执行速度非常慢。
有两个递归调用，取决于哪个条件为真。

是这样的：（
我有函数之外的静态类数组，比如说数据）

```
void func(int a, int b, int c, int d) {
    //something
    //non-recursive
    //here..

    for (i=0; i<data.length; i++) {
        if (!data[i].x) {
            data[i].x = 1;
            if (a == data[i].value1)
                func(data[i].value2,b,c,d);
            else if (a == data[i].value2)
                func(data[i].value1,b,c,d);

            data[i].x = 0;
        }
    }
} 
```

！！
编辑：这是我的算法： http: [//pastebin.com/F7UfzfHv](http://pastebin.com/F7UfzfHv)
函数在图中搜索从一个点到另一个点的每条路径，但只返回（到数组）一个只有唯一顶点的路径。！！

而且我知道管理它的好方法是使用堆栈......但我不知道如何。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:48:17.197

您的函数很有可能一次又一次地计算相同的东西，在技术术语中称为`overlapping sub-problems`（如果您熟悉，`dynamic programming`那么您可能知道）。首先尝试确定是否是这种情况。由于您没有告诉任何有关功能的功能，因此我无法说出确切的问题。

此外，您所说的使用 a`stack`并没有太大用处，因为递归在内部使用堆栈。使用外部堆栈而不是内部堆栈更容易出错，但没有多大用处。

# java - 想要一些解密tomcat错误的指导

> ID：10944342
> 
> 赞同：1
> 
> 时间：2012-06-08T06:58:35.933
> 
> 标签：java, tomcat, servlets

我对 tomcat 7 有这些错误。我正在使用 JDK 1.6 上传到服务器并运行 Tomcat 7.02X，无论我做什么，我都会不断收到这些错误。这是什么意思？

**错误1**

> 信息：部署 Web 应用程序存档 user2.war 2012 年 6 月 8 日上午 2:51:30 org.apache.catalina.core.ContainerBase addChildInternal 严重：ContainerBase.addChild：开始：org.apache.catalina.LifecycleException：无法启动组件 [ StandardEngine[Catalina].StandardHost[yuppie.com].StandardContext[/user2]] at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152) at org.apache.catalina.core.ContainerBase.addChildInternal( ContainerBase.java:812) 在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607) 在 org.apache.catalina .startup.HostConfig.deployWAR(HostConfig.java:932)

**它也会出现这个错误**

> 引起：java.lang.UnsupportedClassVersionError: com/yuppie/Populator : org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2824) 不支持 major.minor 版本 51.0 (无法加载类 com.yuppie.Populator) ) 在 org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)

对于列出错误，我深表歉意。我知道它在这个社区中非常讨厌，但我不知道这些错误就是为什么。谢谢

**最后一个错误**

> 严重：部署 Web 应用程序存档 user2.war java.lang.IllegalStateException 时出错：ContainerBase.addChild：启动：org.apache.catalina.LifecycleException：无法启动组件 [StandardEngine[Catalina].StandardHost[credify.me].StandardContext[/ user2]] 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:816)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T07:02:31.500

```
Caused by: java.lang.UnsupportedClassVersionError: com/yuppie/Populator : 
Unsupported  major.minor version 51.0 (unable to load class com.yuppie.Populator) at 
org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2824) 
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150) 
```

原因是您的 java 文件是使用更高版本的 JDK（例如 Java 7）编译的，而您的 JRE 是早期版本（例如 Java 6）。

也许你可以先解决这个问题，看看你是否有新的错误。

如果您使用的是外部库，那么与您使用的 JRE 相比，外部库很可能是使用更新版本的 Java 编译器编译的。我建议您将 JRE 升级到最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:03:31.430

[LifecycleException](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/LifecycleException.html)表示您很可能遇到了生命周期问题。

当类文件的版本号[不受支持时，会抛出 UnsupportedClassVersionError。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/UnsupportedClassVersionError.html)

[IllegalStateException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalStateException.html)顾名思义，Java 应用程序的状态不合法或不适合处理当前请求。

可移植的修复：

UnsupportedClassVersionError：[https ://stackoverflow.com/a/2467356/828625](https://stackoverflow.com/a/2467356/828625)

生命周期异常：[https ://stackoverflow.com/a/8512930/828625](https://stackoverflow.com/a/8512930/828625)

IllegalStateException：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=50737](https://issues.apache.org/bugzilla/show_bug.cgi?id=50737)

# c# - 编译时未找到用户控件成员的定义

> ID：10944343
> 
> 赞同：1
> 
> 时间：2012-06-08T06:58:36.783
> 
> 标签：c#, wpf, user-controls

我遇到了以下问题：

我有一个用户控件，上面有一个我开发的图表组件。我正在尝试在主应用程序中使用用户控件，并从主应用程序的代码中访问图表组件成员，如下所示：

```
((VibraLysisUserControls.UC_SensorMonitor)(docContent.Content)).TimeDomainGraph 
```

其中 TimeDomainGraph 是驻留在项目中单独的 dll 中的 copmonent。有趣的一点就在这里：当我将上面的代码放入后面的代码中时，我在编译时收到以下错误消息：

> “VibraLysisUserControls.UC_SensorMonitor”不包含“TimeDomainGraph”的定义，并且没有扩展方法“TimeDomainGraph”接受“VibraLysisUserControls.UC_SensorMonitor”类型的第一个参数（您是否缺少 using 指令或程序集引用？）

如果我注释掉该行并去调试应用程序，当我在我想使用它的地方停止应用程序时，我可以在 QuickWatch 窗口中找到该成员。事实上，我只是从 QuickWatch 窗口中复制了代码，它运行良好。

任何人都有一些想法，这到底是怎么回事？为什么我无法访问代码中的某个属性，该属性在调试期间在 QuickWath 窗口中完美运行？

**更新：**

问题已经解决了。我在一些帮助下发现了。这是 XAML 中的可见性问题。谢谢你的帮助。

兄弟，恰巴

# google-analytics - 为什么“实验”菜单项在 Google Analytics（分析）的“内容”部分不可见？

> ID：10944346
> 
> 赞同：2
> 
> 时间：2012-06-08T06:58:51.200
> 
> 标签：google-analytics

我听说 Google Optimize 将从 Google 转移到 Google Analytics 中，并且还看到[一些新的文章](http://www.webpronews.com/content-experiments-in-google-analytics-replace-google-website-optimizer-2012-06)表明已经完成。

不幸的是，谷歌分析中的可见性实验存在一些**问题，**我看不到这样的菜单位置。

您是否知道如何打开此功能，为什么它不可见或如果您认为这是错误，如何有效地报告此问题。

这是我在每个站点的内容选项卡中看到的内容。我目前正在使用 Google Optimizer，所以可能是一些冲突，但它很快就会**过时**并且想要切换工具。

![Google Analytics 中的隐形实验](../Images/48e6a4f84e5087a6fa48c2a6f7952033.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:01:07.610

有一些用户没有此选项。
Google 仅在 6 月 4 日推出了此选项，并且需要一些时间才能惠及所有用户。

等待时间。

参考：[Google Analytics 中没有内容实验选项](http://productforums.google.com/forum/#!topic/analytics/11aJG3uciR0)

# c# - 您可以将“内联”内容配置与“应用程序/八位字节流”一起使用吗？

> ID：10944347
> 
> 赞同：3
> 
> 时间：2012-06-08T06:58:54.943
> 
> 标签：c#, asp.net, httphandler, file-type

我需要浏览器打开它直接在浏览器中理解的文件类型（即没有“打开/保存/取消”对话框。

这是我的代码，目前效果很好！...除了每个文件都会弹出对话框并且不直接打开文件：

```
string filePath = Path.Combine(WebConfigurationManager.AppSettings["NewsAttachmentPath"], context.Request.QueryString["FileName"]);
byte[] bytes = System.IO.File.ReadAllBytes(filePath);
context.Response.Clear();
context.Response.ContentType = "application/octet-stream";
context.Response.Cache.SetCacheability(HttpCacheability.Private);
context.Response.Expires = -1;
context.Response.Buffer = true;
context.Response.AddHeader("Content-Disposition", string.Format("{0};FileName=\"{1}\"", "inline", context.Request.QueryString["FileName"]));
context.Response.BinaryWrite(bytes);
context.Response.End(); 
```

如您所见，即使我将 Content-Disposition 更改为“内联”，它仍然会提示下载。这是我知道我的浏览器可以理解的文件。换句话说，我可以去某个随机站点并单击 PDF，它会在浏览器中打开。我的网站会让我保存它以便查看它。

先发制人地回答“为什么要使用 application/octet-stream？” 因为我不想为每个文件类型创建一个处理程序。如果这是错误的，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T07:02:17.693

您**不需要为每个文件类型创建处理程序**。您只需更改行：

```
context.Response.ContentType = "application/octet-stream"; 
```

成为：

```
string contentType = //your logic here, possibly many lines in a separate method
context.Response.ContentType = contentType; 
```

但是不行：你不能“内联”一个应用程序/八位字节流。这意味着“这里有一些字节，但我不知道它们是什么”。浏览器对此无能为力，只能将其保存在某处，因此会出现下载提示。不过，您*可以*使用 content-disposition 来建议文件名。

浏览器不适用于文件扩展名 - 它适用于内容类型。所以：您需要在回复中报告正确的内容类型。这可能意味着根据您知道的文件扩展名编写`switch`/ 查找，或者可能意味着将显式内容类型与文件信息一起单独存储为元数据。

# ant - 是否可以从另一个构建文件引用一个构建文件中定义的类路径？

> ID：10944349
> 
> 赞同：0
> 
> 时间：2012-06-08T06:58:57.433
> 
> 标签：ant

在项目 A 的构建文件中，有一个`<path>`;

在项目B的构建文件中，我想通过`<java>`任务在项目A中执行一个工具类。

该`<java>`任务需要在其“classpathref”属性中使用该路径。

项目A的`<path>`构建文件非常复杂，所以我不想将它复制到项目B的构建文件中。

那么是否可以从另一个构建文件中引用一个构建文件中定义的类路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T02:21:28.430

使用[导入](http://ant.apache.org/manual/Tasks/import.html)或[包含](http://ant.apache.org/manual/Tasks/include.html)ANT 任务是执行此操作的方法......但是，这些都是设计构建的多模块构建。以这种方式耦合两个不同的项目通常是一个非常糟糕的主意......

我理解动机，类路径管理是 Java 构建中最重要且最容易出错的部分之一。我的建议是采用[Apache ivy](http://ant.apache.org/ivy/)并让它管理您构建的第 3 方依赖项。

# 例子：

ivy [cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务使用依赖声明创建您的 ANT 路径。

```
 <ivy:cachepath pathid="test.path">
        <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.4" conf="default"/>
        <dependency org="junit" name="junit" rev="4.10" conf="default"/>
    </ivy:cachepath> 
```

jars 本身可以在本地存储或从[Maven 中央](http://search.maven.org/)存储库中检索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:22:38.663

Ant 允许[将](http://ant.apache.org/manual/Tasks/import.html)一个项目文件导入另一个。您可以检查“根据导入的文件解析文件”部分，因为在大多数情况下都需要这样做。

# iphone - MGSplitViewController 在细节端带有导航控制器

> ID：10944350
> 
> 赞同：1
> 
> 时间：2012-06-08T06:59:09.150
> 
> 标签：iphone, ipad, ios5, uisplitviewcontroller

我目前正在研究 MGSplitViewController 。所以在这个自定义拆分视图控制器中，根视图控制器已经存在于导航控制器（MainWindow.xib）中，但我的主要目标是让 MGSplitViewController 在细节方面也与 NavigationController 一起工作？

我该怎么做，谁能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:24:53.757

我在一个项目中这样做。

将 UINavigationController 放入 MainWindow.xib 并让它包含您的普通细节控制器。（您可以直接配置细节控制器或告诉它引用另一个 xib 文件。）将`detailViewController`MGSplitViewController 中的出口链接到细节导航控制器。

让我知道其中的某些部分是否给您带来了麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:22:21.093

试试 SlavaBushtruk 的 github 上的这个[APSplitViewController](https://github.com/SlavaBushtruk/APSplitViewController/)项目。

这将满足您的要求。

谢谢

# view - 使用 sencha touch 2.0 登录后加载另一个视图

> ID：10944351
> 
> 赞同：1
> 
> 时间：2012-06-08T06:59:17.453
> 
> 标签：view, load, touch, extjs, sencha-architect

我有一个愚蠢的问题，我希望你帮我一把。在此先感谢。

情况如下：我有 2 个视图（均使用 sencha architect 2.0 创建），一个用于登录，另一个用于一般用途。我想在尝试登录时加载成功响应的第二个视图，这是在任何成功登录之后。主要问题是我尝试过使用 Ex.create、Ext.Viewport.add、Ext.Viewport.setActiveItem，但我无法让第二个视图出现在屏幕上，登录屏幕只是保持在那里并且应用程序不会加载其他视图。另一件事，我不必为此使用导航视图。

这是我的控制器的代码，我想从中加载我的第二个视图。正如您将看到的，我什至创建了视图的引用，它启用了 autoCreate 并且 ID 为“mainTabPanel”：

```
Ext.define('MyApp.controller.Login', {
extend: 'Ext.app.Controller',
config: {
    refs: {
        loginButton: {
            selector: '#login',
            xtype: 'button'
        },
        username: {
            selector: '#user',
            xtype: 'textfield'
        },
        password: {
            selector: '#pass',
            xtype: 'passwordfield'
        },
        mainTabPanel: {
            selector: '#mainTabPanel',
            xtype: 'tabpanel',
            autoCreate: true
        }
    },

    control: {
        "loginButton": {
            tap: 'onLoginButtonTap'
        }
    }
},

onLoginButtonTap: function(button, e, options) {
    Ext.Ajax.request({
        url: '../../backend/auth.php',

        method: 'POST',

        params: {
            user: this.getUsername().getValue(),
            pass: this.getPassword().getValue()
        },

        success: function(response) {
            var json = Ext.decode(response.responseText);
            if (json.type == 'success') {
                // LOAD THE DAMN SECOND VIEW HERE!
                //var paneltab = Ext.create('MyApp.view.MainTabPanel');
                //Ext.Viewport.add(paneltab);
                //Ext.Viewport.setActiveItem(this.getMainTabPanel());
            } else {
                alert(json.value);
            }
        },

        failure: function(response) {
            alert('The request failed!');
        }
    });
}
}); 
```

这是我的登录视图的代码：

```
Ext.define('MyApp.view.LoginForm', {
extend: 'Ext.form.Panel',

config: {
    id: 'loginForm',
    ui: 'light',
    items: [
        {
            xtype: 'fieldset',
            ui: 'light',
            title: 'Log into the system',
            items: [
                {
                    xtype: 'textfield',
                    id: 'user',
                    label: 'User',
                    name: 'user'
                },
                {
                    xtype: 'passwordfield',
                    id: 'pass',
                    label: 'Pass',
                    name: 'pass'
                }
            ]
        },
        {
            xtype: 'button',
            id: 'login',
            ui: 'confirm',
            text: 'Login'
        }
    ]
}
}); 
```

最后，我要加载的视图代码。如果我将其设置为初始视图，此视图会正常加载，但在成功登录时不会加载：

```
Ext.define('MyApp.view.MainTabPanel', {
extend: 'Ext.tab.Panel',

config: {
    id: 'mainTabPanel',
    layout: {
        animation: 'slide',
        type: 'card'
    },
    items: [
        {
            xtype: 'container',
            layout: {
                type: 'vbox'
            },
            title: 'Tab 1',
            iconCls: 'time',
            items: [
                {
                    xtype: 'titlebar',
                    docked: 'top',
                    title: 'General Report',
                    items: [
                        {
                            xtype: 'button',
                            iconCls: 'refresh',
                            iconMask: true,
                            text: '',
                            align: 'right'
                        }
                    ]
                },
                {
                    xtype: 'container',
                    height: 138,
                    flex: 1,
                    items: [
                        {
                            xtype: 'datepickerfield',
                            label: 'From',
                            placeHolder: 'mm/dd/yyyy'
                        },
                        {
                            xtype: 'datepickerfield',
                            label: 'To',
                            placeHolder: 'mm/dd/yyyy'
                        },
                        {
                            xtype: 'numberfield',
                            label: 'Hours'
                        }
                    ]
                },
                {
                    xtype: 'dataview',
                    ui: 'dark',
                    itemTpl: [
                        '<div style="height:50px; background-color: white; margin-bottom: 1px;">',
                        '    <span style="color: #0000FF">{user}</span>',
                        '    <span>{description}</span>',
                        '</div>'
                    ],
                    store: 'hoursStore',
                    flex: 1
                }
            ]
        },
        {
            xtype: 'container',
            title: 'Tab 2',
            iconCls: 'maps'
        },
        {
            xtype: 'container',
            title: 'Tab 3',
            iconCls: 'favorites'
        }
    ],
    tabBar: {
        docked: 'bottom'
    }
}
}); 
```

拜托，我需要帮助... :) 我被困在这里 3 天了，无法弄清楚问题出在哪里。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:53:31.050

你也可以发布你的 app.js 吗？我在这里尝试您的代码，它按预期加载视图。这是我的 app.js：

```
Ext.application({
    name: 'MyApp',

    requires: [
        'Ext.MessageBox'
    ],
    controllers: ['Login'],
    views: ['LoginForm','MainTabPanel'],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

    startupImage: {
        '320x460': 'resources/startup/320x460.jpg',
        '640x920': 'resources/startup/640x920.png',
        '768x1004': 'resources/startup/768x1004.png',
        '748x1024': 'resources/startup/748x1024.png',
        '1536x2008': 'resources/startup/1536x2008.png',
        '1496x2048': 'resources/startup/1496x2048.png'
    },

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view
        //Ext.Viewport.add(Ext.create('MyApp.view.Main'));
        Ext.Viewport.add(Ext.create('MyApp.view.LoginForm'));
    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?",
            function(buttonId) {
                if (buttonId === 'yes') {
                    window.location.reload();
                }
            }
        );
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T00:22:15.087

这里有几个问题：

*   您的 autoCreate 规则使用 xtype: 'tabpanel' ，它只会创建一个没有项目的普通 Ext.TabPanel。您需要为您的 MyApp.view.MainTabPanel 分配一个 xtype 属性，例如 xtype: 'mainTabPanel' ，然后在您的 autoCreate 规则中使用该 xtype 值。

*   这就解释了为什么这段代码不起作用，因为 this.getMainTabPanel() 将返回错误的对象。更简单的是只使用 Ext.Viewport.setActiveItem(paneltab)。

    *   通常，您通常不希望为视图分配 id (id: 'mainTabPanel')。只使用 xtype 来获取它更安全。尽管在这种情况下您不需要它，但避免全局 id 允许您创建视图（或任何其他类类型）的多个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:22:22.390

销毁登录面板，您不再需要它了...

```
success: function(response) {
        var json = Ext.decode(response.responseText);

        if (json.type == 'success') {
            // LOAD THE DAMN SECOND VIEW HERE!
            var paneltab = Ext.create('MyApp.view.MainTabPanel');
            Ext.getCmp('loginForm').destroy();
            Ext.Viewport.add(paneltab);

        } else {
            alert(json.value);
        }
    }, 
```

# iphone - 如何为从一个控制器到另一个控制器的 webview 创建对象

> ID：10944358
> 
> 赞同：0
> 
> 时间：2012-06-08T06:59:36.953
> 
> 标签：iphone, ios, webview, viewcontroller

在我的应用程序中，我有 8 个文件

ApplicationDelegate.h、**ApplicationController.h**和 .m 文件用于此 RecordDelegate.h、**RecordController.h**和 .m 文件用于此

**我在Applicationcontroller**中声明了 webview

 **在运行应用程序时

webview 在此加载**main.html**文件我有按钮**记录**，当我单击按钮导航到**record.html**文件时，我有**录制音频**和**录制视频**按钮，

在这里，我单击**录制音频**它导航到**RecordController.xib**文件在这里我已经完成了记录操作我想要的意思是在完成记录后我想使用**ApplicationController** webview .. 在这里我想在记录 voiddidload 中将一些值传递给 javascript方法我添加了以下代码

```
ApplicationController *obj=[ApplicationController alloc]init];
[self.view addsubview:obj.Web_View]; 
```

它不工作任何人都知道原因你有任何疑问让我知道吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:27:58.593

从 RecordController 导航到应用程序控制器。

Application Controller 中已经有 webview，因此在 RecordController 中合成 webview 对象，并在导航时将值传递给 Application Controller。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:10:53.597

这是制作单例的绝佳教程：http: [//getsetgames.com/2009/08/30/the-objective-c-singleton/](http://getsetgames.com/2009/08/30/the-objective-c-singleton/)

当你想使用它时，你只需调用 MySingleton.sharedMySingleton.yourVariable 或者如果你想调用一个方法，你输入 [[MySingleton sharedMySingleton] yourMethod]**

# jquery - 是否可以在 asp.net mvc 中使用 jquery.ajax 获取多个项目？

> ID：10944359
> 
> 赞同：0
> 
> 时间：2012-06-08T06:59:41.433
> 
> 标签：jquery, asp.net-mvc

我想使用 jquery.ajax 在 asp.net mvc 应用程序中从服务器检索一些数据。

我正在寻找一种将多个项目发回（服务器到客户端）的方法

我可以在 asp.net mvc 端做什么以在结果中包含更多项目

```
function AjaxSucceeded(result) { 
```

以某种方式可以在javascript代码中轻松使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:05:30.537

当您序列化一个列表时，它的 JSON 表示也是一个列表。考虑这个例子：

```
public JsonResult Fetch() {
    return Json(new[] { 1, 2, 3 });
} 
```

此方法将返回以下 JSON：

```
[1, 2, 3] 
```

在 JavaScript 中很容易枚举：

```
$.get("/fetch/", function(response) {
    for(var i = 0; i < response.length; i++) {
         alert("Item " + response[i]);
    }
}); 
```

JSON 序列化程序当然可以处理复杂的对象。

# deployment - 在 24x7 系统 asp.net 平台上部署的最佳实践

> ID：10944362
> 
> 赞同：1
> 
> 时间：2012-06-08T07:00:13.617
> 
> 标签：deployment, web-deployment

我们在 asp.net 平台上构建了一个企业 Web 应用程序，该应用程序在多个服务器之间实现了良好的负载平衡。我们在进行常规部署方面有些挣扎，因为应用程序已定义为零停机时间的 SLA。

对于实施最佳实践以支持不间断部署，我们将不胜感激任何指导/提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:34:49.290

我最喜欢的两本涵盖其中一些主题的书是 Humble/Farley 的 Continuous Delivery 和 Allspaw/Robbins 的 Web Operations。

我认为这里“简单”的部分是进行滚动部署，将节点从负载均衡器中拉出，升级它，运行冒烟测试，然后将其放回负载均衡器中。不同的用户会遇到不同版本的应用程序，但您的停机时间为零。

困难的部分是这些网络应用程序可能会遇到的后端系统/数据库。您基本上需要同时使用新旧模式，这是具有挑战性的。将诸如[扩展/收缩数据库模式](http://exortech.com/blog/2009/02/01/weekly-release-blog-11-zero-downtime-database-deployment/)之类的技术视为实现这一目标的一种方法。

# xcode - 如何在不将信息存储在 iCloud 上的情况下将文件下载到机器？

> ID：10944364
> 
> 赞同：0
> 
> 时间：2012-06-08T07:00:17.080
> 
> 标签：xcode, download, icloud

如何在不将信息存储在 iCloud 上的情况下下载文件？

我的应用程序是用于将 pdf 下载到机器的应用程序。它被Apple拒绝，原因是“特别是，我们发现下载两个问题后，您的应用程序存储了56.5 MB。要检查您的应用程序存储了多少数据： - 转到设置> iCloud。> 存储和备份> 管理贮存 ”。如果信息未存储在 iClound 上，我想知道如何编写。

我的脚本：

```
- (void) DownloadFile:(NSURL *)url Name:(NSString *)name Folder:(NSString *)folder{

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSData *myData = [NSData dataWithContentsOfURL:url];
    NSString *file = [NSString stringWithFormat:@"%@/%@",folder,name];

    if(![fileManger fileExistsAtPath:file]){
        [fileManger createFileAtPath:file contents:myData attributes:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:00:19.030

只需将 PDF 存储在应用程序文档目录中即可。您仍然可以使用 iCloud 的键值存储来跟踪哪些文件已下载到哪些设备上。但是，要下载到设备上的文件必须来自非 iCloud 服务器。

您可能还必须实现一个 UI 来显示哪些文件已下载，哪些文件可用，并在需要时从设备中删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:38:38.803

哦 谢谢 完成了

```
#import <sys/xattr.h>
....

-(BOOL) addSkipBackupAttributeToItemAtURL:(NSURL *)URL{
     if(&NSURLIsExcludeFromBackupKey == nil){
         const char* filePath = [[URL path] fileSystemRepresentation];
         const char* attrName = "com.apple.MobileBackup";
         u_int8_t attrValue = 1;
         int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
         return result == 0;
     }else{
         return [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];
     }
} 

- (void) DownloadFile:(NSURL *)url Name:(NSString *)name Folder:(NSString *)folder{

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSURL *curfile = [NSURL fileURLWithPath:folder];
    [self addSkipBackupAttributeToItemAtURL:curfile];
    NSData *myData = [NSData dataWithContentsOfURL:url];
    NSString *file = [NSString stringWithFormat:@"%@/%@",folder,name];

    if(![fileManger fileExistsAtPath:file]){
        [fileManger createFileAtPath:file contents:myData attributes:nil];
    }
} 
```

谢谢

# javascript - 找出元素的有效宽度并调整其中的文本大小

> ID：10944367
> 
> 赞同：2
> 
> 时间：2012-06-08T07:00:35.203
> 
> 标签：javascript, html, css, html-table

我想找出已定义的 TD 的宽度`style='width: 200px;`，但文本使其更长（不中断）。我想找出有效宽度，只要它大于 200px，每次将其中的文本大小缩小约 2px。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:26:18.377

这可以在 javascript 中完成，但有点复杂。

这是完整的工作示例：http: [//jsfiddle.net/dystroy/kdrrA/](http://jsfiddle.net/dystroy/kdrrA/)

的HTML：

```
<table><tr><td id=txtcell nowrap><span id=txt>My long text is long. My long text.</span></td></tr></table>
<br>Font Size : <span id=mes></span>​ 
```

的CSS：

```
#txtcell{ max-width:200px;} 
```

的JavaScript：

```
var fontSize = 20; 
var reduce = function() { 
    while ($('#txt').width() > 200) { 
        fontSize -= 1; 
        $('#txt').css('font-size', fontSize); 
    }
    $('#mes').html(fontSize); // this line is only for demonstration, remove it in "production"
}; 
reduce(); 
```

请注意，我必须在单元格中添加一个跨度，因为 jquery 的 TD 宽度计算效果不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:10:42.410

你需要 JavaScript 来实现它。但是如果你想单独使用 CSS，你可以使用 CSS 表达式和`expression`.

```
td {width: expression(this.style.width);} 
```

希望能帮助到你！:)

# java - 如何将<符号放在要由java程序读取的xml文件中？

> ID：10944369
> 
> 赞同：3
> 
> 时间：2012-06-08T07:00:44.140
> 
> 标签：java, sql, xml

我在 xml 文件中放置了一个 SQL 查询（包含 < 符号），并且我试图在 java 程序中读取该查询。但它显示异常

> “org.xml.sax.SAXParseException：元素的内容必须由格式良好的字符数据或标记组成。”

谁能帮我解决上述问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T07:02:52.243

您需要使用 XML 实体进行转义：

*   `&`编码为`&amp;`
*   `<`编码为`&lt;`

从技术上讲，您不需要逃避以下内容，但这样做很常见：

*   `>`编码为`&gt;`
*   `"`编码为`&quot;`
*   `'`编码为`&apos;`

有关更多信息，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)了解更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T07:04:18.913

使用 CDATA

[**CDATA -（未解析的）字符数据**](http://www.w3.org/TR/REC-xml/#sec-cdata-sect)

**CDATA**代表字符数据，这意味着这些标签之间的数据包括可以解释为 XML 标记的数据，但不应该

CDATA 一词用于表示不应由 XML 解析器解析的文本数据。

“<”和“&”之类的字符在 XML 元素中是非法的。

"<" 将产生错误，因为解析器将其解释为新元素的开始。

"&" 将产生错误，因为解析器将其解释为字符实体的开始。

一些文本，如 JavaScript 代码，包含很多“<”或“&”字符。为避免错误，脚本代码可以定义为 CDATA。

***解析器会忽略 CDATA 部分中的所有内容。***

例子：

```
<![CDATA[ select <abcddata> ]]> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T07:03:07.867

```
< = &gt;
> = &lt; 
```

这些是 HTML 实体，应该被接受

# hibernate - 外键的JPA级联删除

> ID：10944376
> 
> 赞同：1
> 
> 时间：2012-06-08T07:01:34.033
> 
> 标签：hibernate, jpa, jpa-2.0

我有一个双向关系映射为

```
@Entity
public class Customer {

  @OneToMany(mappedBy = "customer", cascade = CascadeType.ALL, orphanRemoval = true)
  private List<Servers> servers;

} 
```

和

```
@Entity
public class Server {

  @ManyToOne
  @JoinColumn(name = "...")
  private Customer customer;

} 
```

问题是我有一个（Oracle）数据库强制外键引用，但是当我对客户进行删除时，我最终得到一个错误，指出服务器中父关系的 @JoinColumn 值不能设置为无效的。

我尝试了各种可选属性，@ManyToOne 上的 cascade=ALL，客户上的 @PreRemove 方法（试图清除服务器列表）但无济于事。它不是首先为客户端删除所有服务器，而是首先尝试清除关系，导致不好。

在此先感谢，尼克

# c - 打开另一个终端窗口时创建两个进程？

> ID：10944378
> 
> 赞同：0
> 
> 时间：2012-06-08T07:01:35.490
> 
> 标签：c, terminal, multiprocessing

这个话题可能听起来很奇怪，但这是我想要实现的目标：

1.  在终端 A 中，键入以下命令行：

    ```
    ./create proA 
    ```

2.  创建第一个过程 proA。它输出类似

    ```
    This is process A. 
    ```

3.  打开另一个终端窗口（称为终端 B）。在终端 B 中，键入以下行：

    ```
    ./create proB 
    ```

4.  创建第二个进程proB。它输出：

    ```
    This is process B. 
    ```

更新：我正在尝试创建两个相互通信的进程。在详细介绍之前，我只想尝试在打开另一个终端窗口时是否可以创建另一个与第一个进程有某种关系的进程。

有可能实现这样的目标吗？如果是这样，有人可以提供有关如何从 c 开始的任何提示吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:47:47.957

终端对于进程间通信无关紧要。进程之间的通信方式有很多，因此在这里突出显示它们中的任何一种都是没有意义的。

关于每个进程都有自己的终端。出色地：

```
(xterm -e "${COMMANDLINE1}" &) ; (xterm -e "${COMMANDLINE2}" &) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:07:13.240

如果你只想看到错误，你应该使用：

```
 ./process > /dev/null 2>&1 
```

如果您不理解 2>&1，请阅读下文）

可能的数字：

```
0 — STDIN, 1 — STDOUT and 2 — STDERR 
```

这意味着，所有的标准错误都将在标准输出中打印出来。

# svn - svn db文件在哪里？

> ID：10944379
> 
> 赞同：0
> 
> 时间：2012-06-08T07:01:37.250
> 
> 标签：svn

我在命令下创建 repo 使用。

```
svnadmin create ./repo/big_repo
svn checkout file:///repo/big_repo
cd big_repo && dd if=/dev/zero of=500MB bs=1m count=500
svn add 500MB && svn commit -m "big file" 
```

我检查使用的 loca 文件大小`du -m big_repo`为 1001MB，但为什么 repo/big_repo 远程 repo 没有任何文件更改？

svn db 文件存储在哪里？tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:45:54.363

`big-repo/db`在目录中查找。例如，`big_repo/db/revs/0`将包含逐个修订版本的更改（但不要期望 500MB 的更改 - 它将被压缩）。

# android - 检测应用程序终止，Android

> ID：10944382
> 
> 赞同：0
> 
> 时间：2012-06-08T07:01:48.140
> 
> 标签：android, session-variables, android-lifecycle

我需要一种方法来检测我的应用程序何时关闭，以便我可以告诉 Web 服务器清除它正在存储的会话变量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T07:06:08.007

我假设您的应用程序扩展了 Activity。

您可以使用以下`onDestroy()`方法：

从[文档](http://developer.android.com/reference/android/app/Activity.html)：

> *onDestroy() 是*您在活动被销毁之前收到的最后一个调用。这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

您的代码如下所示：

```
public class YourAppActivity extends Activity {
     ...
     ...

     @Override
     protected void onDestroy() {
         super.onDestroy();
         //clear your session variable. 
         //you may want to do this quick, and on another thread 
         //to prevent android from killing your app
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:07:05.437

检查 [活动生命周期](http://developer.android.com/reference/android/app/Activity.html)，我认为你可以做到`onDestroy()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:10:37.663

您可以尝试`onDestroy()`在应用程序被系统销毁或`onStop()`应用程序失去可见性（通常在销毁之前）时运行哪个。您的代码将如下所示：

`public void onDestroy() { super.onDestroy(); //Enter your code here to do stuff }`

但是，在销毁您的应用程序时，它使用的变量将与它一起被销毁。

请参阅：[如何释放或清除变量或对象的值？](https://stackoverflow.com/questions/6716130/how-to-release-or-clear-the-value-of-variable-or-object)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:11:28.867

为此，您必须为整数类型的计数器创建静态变量。On OnCreate 方法将变量递增 1，在 OnDestroy() 方法上将变量值递减。并在 OnDestroy() 方法上检查静态变量值是否为 0，如果为 0，则调用 web 服务清除会话

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T21:51:57.303

我将使用 Activity 的**onDestroy()**方法检查用户是否正在终止应用程序或操作系统是否因为**isFinishing()**方法的内存不足而终止进程的活动。要部署“销毁 Web 会话”逻辑，您可以启动 IntentService 来启动此操作。

希望能帮助到你。

# jquery - 拖放一个 div 并放在一个动态创建的 div 上

> ID：10944386
> 
> 赞同：0
> 
> 时间：2012-06-08T07:02:20.383
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我想在按钮单击事件上使用 javascript 创建的动态创建的 div 上放置一个 div 这是我的代码

```
$("#add").click(function() {

   var d = document.createElement("div");

   d.className = "machine";

   document.getElementById("cloud").appendChild(d);

}); 
```

这是我要拖放到上面创建的 div 上的 div 这是我的可拖动代码

```
$("#Softwares-List div").draggable({

   helper:"clone"

});

<div id="Softwares-List">

      <div id="java">Java</div>

      <div id="ror">Ruby on Rails</div>

      <div id="dotnet">Visual Studio 10</div>

</div> 
```

假设我想将 java 拖放到动态创建的 div 上，即 div.machine

我在动态创建的 div 上写了这个可放置的代码，这是我的代码

```
$("div.machine").droppable({    

     accept: "#Softwares-List > div",

         activeClass: 'ui-state-hover',

         hoverClass: 'ui-state-active',

         drop: function(event, ui) {

             var dropElem = ui.draggable.html();

             clone = $('dropElem').clone(); 

         clone.id="newId";

         clone.css("position", "absolute");

         clone.css("top", ui.absolutePosition.top);

         clone.css("left", ui.absolutePosition.left);

             clone.draggable({ containment: 'parent' ,cursor: 'crosshair'});

             $(this).append(clone);

            alert("done dragging");

            },

}); 
```

但它不起作用，droppable 函数没有被调用。如果在 droppable 中对我进行了任何更改，请帮助我，然后请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:14:45.513

你`$("div.machine").droppable({`在创建 div 之前打电话吗？

只需将其移至#add click 事件处理程序的末尾即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:23:13.633

你测试的是什么浏览器？

最后一个参数末尾的逗号将某些版本的 IE

```
 $(this).append(clone);

            alert("done dragging");

            },  <<----

}); 
```

# cocoa - 在 Cocoa 中捕获 Webkit 重定向

> ID：10944387
> 
> 赞同：-1
> 
> 时间：2012-06-08T07:02:29.217
> 
> 标签：cocoa, webkit

我有一个带有特殊身份验证页面的 WebKit 对象，并且在成功身份验证后，用户被重定向到带有令牌的特殊 URL，例如`http://example.com?token=foo`

如何在 Cocoa 中捕获 WebKit 重定向并检查令牌的最终 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:28:12.373

请在发布前搜索文档。快速搜索“ [webkit redirect](https://developer.apple.com/library/mac/search/?q=webkit%20redirect) ”的文档会发现[WebFrameLoadDelegate 协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html)是最热门的。该文档的第一段说（强调我的）：

> 当框架加载开始时、页面标题或图标加载**时、重定向发生时**、...

页面内搜索显示方便的“客户端和服务器**重定向**消息”标题，其中显示了与重定向相关的委托方法的集合。

# knockout.js - 无法将 ko.observable 数组绑定到 foreach 循环

> ID：10944390
> 
> 赞同：0
> 
> 时间：2012-06-08T07:02:40.350
> 
> 标签：knockout.js, knockout-mapping-plugin, ko.observablearray

我有一个简单的 viewModel，我从 MVC 创建到 json 字符串，我正在使用 ko.mapping 来完成这个。

```
var initialTicketData = {"Ticket": [{"ID":1,"EventID":506596,"Name":"General Admission","Quantity":100,"Price":15.0},{"ID":2,"EventID":506596,"Name":"Backstage Passes","Quantity":25,"Price":50.0}]};

var ticketViewModel = ko.mapping.fromJS(initialTicketData);

ko.applyBindings(ticketViewModel); 
```

我想遍历这个数组并在页面上显示数据。我正在尝试使用 foreach 数据绑定。

```
<tbody data-bind="foreach: ticketViewModel.Ticket">
    <tr>
        <td data-bind="text: ticketViewModel.Name"></td>
        <td data-bind="text: ticketViewModel.Price"></td>
        <td data-bind="text: ticketViewModel.Quantity"></td>
    </tr>
</tbody> 
```

但是，当我尝试运行时，出现以下错误。

> “无法解析绑定。消息：ReferenceError：ticketViewModel 未定义；绑定值：foreach：ticketViewModel.Ticket”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:12:55.783

试试这个：

```
<tbody data-bind="foreach: Ticket">
    <tr>
        <td data-bind="text: Name"></td>
        <td data-bind="text: Price"></td>
        <td data-bind="text: Quantity"></td>
    </tr>
</tbody> 
```

绑定总是相对于当前上下文。当您说`ko.applyBindings(ticketViewModel);`您将“根”上下文设置为`ticketViewModel`. 然后，当您使用“foreach”时，您会添加一个新上下文，“foreach”内的绑定现在与每个 Ticket 元素相关。

# javascript - 如何在Javascript中计算自午夜以来的毫秒

> ID：10944396
> 
> 赞同：29
> 
> 时间：2012-06-08T07:03:17.687
> 
> 标签：javascript, time

以毫秒为单位计算自（最后一个）午夜以来经过的时间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-08T07:05:15.797

使用当前日/月/年创建一个新日期，并获取差异。

```
var now = new Date(),
    then = new Date(
        now.getFullYear(),
        now.getMonth(),
        now.getDate(),
        0,0,0),
    diff = now.getTime() - then.getTime(); // difference in milliseconds 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-06-08T09:25:51.847

一堆答案，所以这里有另一个：

```
var d = new Date(), e = new Date(d);
var msSinceMidnight = e - d.setHours(0,0,0,0); 
```

作为一个函数：

```
function getMsSinceMidnight(d) {
  var e = new Date(d);
  return d - e.setHours(0,0,0,0);
}

alert(getMsSinceMidnight(new Date())); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-03T16:28:44.920

[除了RobG's (recommended answer)](https://stackoverflow.com/a/10946213/139361)、[Kolink's](https://stackoverflow.com/a/10944417/139361)和[Lai's](https://stackoverflow.com/a/10944444/139361)之外的许多答案在这里都是错误的

让我们一起仔细看看

* * *

*第一个错误*

[OptimusCrime](https://stackoverflow.com/a/10944456/139361)和[Andrew D.](https://stackoverflow.com/a/10944701/139361)回答：

正如[Mala](https://stackoverflow.com/users/146587/mala)所建议的那样，如果夏令时校正是在最近的午夜应用的，我们会得到不正确的值。让我们调试：

1.  假设是三月的最后一个星期日
2.  时间固定在凌晨 2 点。
3.  如果我们在时钟上看到上午 10 点，实际上从午夜过去了 11 个小时
4.  但相反，我们计算`10 * 60 * 60 * 1000`ms
5.  当午夜发生在与当前不同的 DST 状态时，就会播放这个技巧

* * *

*第二个错误*

[肯尼贝克的](https://stackoverflow.com/a/10947970/139361)回答：

正如[RobG](https://stackoverflow.com/users/257182/robg)所写，如果您两次获得系统时间，时钟就会滴答作响。我们有时甚至可以出现在不同的日期。您可以在循环中重现它：

```
for (var i = 0; true; i++) {
    if ((new Date()).getTime() - (new Date()).getTime()) {
        alert(i); // console.log(i);  // for me it's about a 1000
        break;
    }
} 
```

* * *

*第三*是你可能会遇到的我个人的陷阱

考虑以下代码：

```
var d = new Date(),
    msSinceMidnight = d - d.setHours(0,0,0,0); 
```

`msSinceMidnight`总是`0`在减法运算之前的计算过程中改变对象

* * *

最后，这段代码有效：

```
var d = new Date(),
    msSinceMidnight = d.getTime() - d.setHours(0,0,0,0); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-08T11:29:05.590

如果您不介意创建两个日期，则编写起来更简单。

```
var msSinceMidnight= new Date()-new Date().setHours(0,0,0,0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-08T07:28:52.130

```
var d=new Date();
// offset from midnight in Greenwich timezone
var msFromMidnightInGMT=d%86400000;
// offset from midnight in locale timezone
var msFromMidnightLocale=(d.getTime()-d.getTimezoneOffset()*60000)%86400000; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T07:07:04.160

```
var today = new Date();
var d = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0, 0); 

var difference = today.getTime() - d.getTime(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-08T07:07:46.313

从午夜开始的秒数只是显示时间，但不是使用小时：分钟：秒，而是将所有内容转换为秒。

我认为应该这样做：

```
var now = new Date();    
var hours = now.getHours()*(60*60);
var minutes = now.getMinutes()*60;
var seconds = now.getSeconds();

var secSinceMidnight = hours+minutes+seconds; 
```

# ruby-on-rails-3 - 警告：已初始化常量 PDF

> ID：10944399
> 
> 赞同：31
> 
> 时间：2012-06-08T07:03:41.197
> 
> 标签：ruby-on-rails-3, rubygems, wicked-pdf, rails-3-upgrade

现在我正在使用rails 3.0.0。如果我在终端中运行我的项目，我会收到此警告。请帮我。

/usr/share/ruby-rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.0.0/lib/action_dispatch/http/mime_type.rb:98：警告：已初始化常量 PDF

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-20T05:35:30.453

你的`config/initializers/mime_types.rb`文件中可能有这个。

```
Mime::Type.register 'application/pdf', :pdf 
```

看起来新版本的 rails 已经注册了它。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-07-16T00:26:51.900

[`lookup_by_extenstion`](http://apidock.com/rails/v4.2.1/Mime/Type/lookup_by_extension/class)在定义它之前尝试使用。

我的`config/initializers/mime_types.rb`档案上有这个。

```
Mime::Type.register "application/pdf", :pdf unless Mime::Type.lookup_by_extension(:pdf) 
```

# .net - 您能否将 Char 0x05 放入 XDocument 中，然后将其扔到 XDocument.ToString 上？

> ID：10944404
> 
> 赞同：1
> 
> 时间：2012-06-08T07:04:05.900
> 
> 标签：.net, linq-to-xml, invalid-characters

我有一个`XDocument`在`ToString`.

为了帮助找到我可以在哪里允许 0x05 字符在 XDocument API 中的哪个位置，你可以让 0x05 字符在那时没有任何异常，只是被抛出`ToString`？

具体来说，据我回忆，我只使用新的 Linq XML API，除了我确实通过扩展方法使用了一些 XmlSerialization 来将其返回到`XElement`.

[在我找到简单答案之前表明这是一个有价值的问题：包含 0x05 字符时`XElement:Parse` *会抛出。*]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:27:32.713

我发现简单地设置`.Value`an`XElement`不会检查无效字符:-(

```
element.Value = "test" & Chr(5) & "5" 
```

上面不会抛出，直到你调用`XDocument.ToString`包含的 Xml。

# vb.net - 关于使用 .net 的 ODBC 连接字符串

> ID：10944412
> 
> 赞同：0
> 
> 时间：2012-06-08T07:04:34.363
> 
> 标签：vb.net, odbc

连接到 oracle DB 时出现错误。我正在使用使用 ODBC DRIVER 的连接字符串语句。我想从 orcle db 中获取一些数据并将其绑定到某个控件中。oracle客户端安装在我的机器上。

```
my db name is PINDB it's in another server. Not in localhost. 
am creating oracle driver named as obdialer il localhost
local host ip adress is 10.103.1.166
the DB is placed in this server (IP 172.23.6.217)
user id is RAM 
password is RAM 

in my programme am using the connection string as like this.

code
----
conn.ConnectionString = ("Driver ={Microsoft ODBC for Oracle};server=172.23.6.217.PINDB;Uid =OEARENEWAL;Pwd =OEARENEWAL;Persist Security Info=False;Trusted_Connection=Yes")
try
  con.open()
  ----------
  ----------
 catch ex as exception
    msgbox(ex.message)
 end try

i didnt get any error and also the values are not bind to that particular control.
pls help me to correct the error in connectionstring. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:12:20.663

根据[此示例](http://www.connectionstrings.com/oracle#p17)，您的连接字符串基本上是正确的，但请尝试删除最后两个属性。当您指定用户名和密码时，它不是受信任的连接：

```
conn.ConnectionString = "Driver={Microsoft ODBC for Oracle};server=172.23.6.217.PINDB;Uid=OEARENEWAL;Pwd=OEARENEWAL" 
```

# c++ - 如何在特定时间后重新启动窗口服务

> ID：10944421
> 
> 赞同：1
> 
> 时间：2012-06-08T07:05:28.853
> 
> 标签：c++, visual-studio-2010, visual-c++, service

我正在使用 C++ 在 VS2010 中创建窗口服务，想知道是否有任何方法可以在特定时间后重新启动服务，实际上我会让用户在 INI 文件中写入重新启动时间，并且服务应该能够在那个时候重新启动.任何示例代码或任何可用的api？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:49:44.067

您可以使用加载并使用[_execl](http://msdn.microsoft.com/en-us/library/xwy0k9bb%28v=vs.71%29)执行新的子进程。

这是一个简单的代码，说明了我是如何打开 Notepad++ 实例的：

```
#include <process.h>

int main(){
    _execl("C:\\Program Files\\Notepad++\\Notepad++.exe", "\\0");
    return 0;
} 
```

这样，您可以拥有另一个进程，该进程实际上会停止您当前的进程并重新启动您的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:11:08.823

添加[计划任务](http://technet.microsoft.com/en-us/library/cc772785%28WS.10%29.aspx)以调用批处理文件

```
net stop servicename
net start servicename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:18:33.750

*StartService* API 可以启动 Windows 服务，而ControlService *API*可以停止 Windows 服务。

# jsp - 为 <%@include file=" ..."%> 使用 URL 模式

> ID：10944433
> 
> 赞同：0
> 
> 时间：2012-06-08T07:05:59.430
> 
> 标签：jsp, servlets

我想将另一个 JSP 页面（示例：标题页）添加到主 JSP 页面。我想避免写真正的jsp页面名称。所以我写了一些别的名字，比如说“topbanner”。这是代码

```
<%@include file="topbanner"%> 
```

真正的页面是 topheader.jsp，它位于 project
->web->header->topheader.jsp

在我的部署描述符 (web.xml) 中，我在 web.xml 中映射了 topheader.jsp

```
 <servlet>
        <servlet-name>pagetop</servlet-name>
        <jsp-file>/header/topheader.jsp</jsp-file>
    </servlet>
<servlet-mapping>
        <servlet-name>pagetop</servlet-name>
        <url-pattern>/topbanner</url-pattern>
    </servlet-mapping> 
```

但这不起作用。它抛出异常

```
org.apache.jasper.JasperException: /index.jsp (line: 11, column: 1) File "/topbanner" not found 
```

任何人都让我知道问题出在哪里以及如何使用示例代码解决它。

**编辑**
我不能`<%@include file=" ..."%>`用于映射的 jsp 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:02:14.190

静态**<%@ ...>** JSP 包含给定路径内的文本。如果您希望在顶部或底部包含另一个 JSP，您应该使用`prelude and code`.

**这是示例：**

```
<jsp-config>
  <jsp-property-group>
     <url-pattern>*.jsp</url-pattern>
     <include-prelude>/header.jsp</include-prelude>
     <include-coda>/footer.jsp</include-coda>
  </jsp-property-group>
</jsp-config> 
```

*   `Prelude`是在开头添加的。
*   `Coda`最后添加。

**这里有一些教程：**

*   [自动包括前奏曲和尾声](http://www.java-samples.com/showtutorial.php?tutorialid=602)

*   [定义隐式包含](http://docs.oracle.com/cd/E19575-01/819-3669/bnajl/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:07:42.253

尝试类似：

1.  在 web.xml 中创建一个带有“tapbanner”映射的 servlet
2.  覆盖servlet中的`doGet()`方法`Topbanner`
3.  `Forward`或`Include`在使用`topbanner.jsp`中`doGet()``RequestDispatcher`

# python - 如何检查字符串是否仅包含字母数字字符和破折号？

> ID：10944438
> 
> 赞同：24
> 
> 时间：2012-06-08T07:06:33.597
> 
> 标签：python, regex, string, alphanumeric

我正在测试的字符串可以与`[\w-]+`. 我可以在 Python 中测试一个字符串是否符合这一点，而不是列出不允许的字符并对其进行测试吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-08T07:10:39.900

如果要针对正则表达式测试字符串，请使用[re](http://docs.python.org/library/re.html)库

```
import re
valid = re.match('^[\w-]+$', str) is not None 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T07:11:03.367

Python 也有正则表达式：

```
import re
if re.match('^[\w-]+$', s):
    ... 
```

或者您可以创建一个**允许**的字符列表：

```
from string import ascii_letters
if all(c in ascii_letters+'-' for c in s):
    ... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-27T09:11:15.520

在不使用纯 python 导入任何模块的情况下，删除除破折号之外的任何非字母、数字。

```
string = '#Remove-*crap?-from-this-STRING-123$%'

filter_char = lambda char: char.isalnum() or char == '-'
filter(filter_char, string)

# This returns--> 'Remove-crap-from-this-STRING-123' 
```

或者在一行中：

```
''.join([c for c in string if c.isalnum() or c in ['-']]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T19:24:32.140

要测试字符串是否*仅*包含字母数字和破折号，我会使用

```
import re
found_s = re.findall('^[\w-]+$', s)
valid = bool(found_s) and found_s[0] == s 
```

# c++ - C++ 算法稳定性

> ID：10944439
> 
> 赞同：-3
> 
> 时间：2012-06-08T07:06:38.590
> 
> 标签：c++, algorithm

如何判断算法是否稳定？...

此外，此算法 Bucketsort 与 Mergesort、Quicksort、Bubblesort 和 Insertionsort 相比如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:59:57.473

乍一看，如果您的队列是 FIFO，那么它似乎是稳定的。但是，我认为课堂或其他家庭作业中的一些背景可以帮助您做出更坚定的决心。

来自维基百科：

> 稳定性 稳定的排序算法保持具有相同键的记录的相对顺序。如果所有的键都不同，那么这种区别就没有必要了。但是如果有相等的键，那么排序算法是稳定的，如果每当有两条记录（比如 R 和 S）具有相同的键，并且 R 在原始列表中出现在 S 之前，那么 R 将始终出现在 S 之前排序列表。当相等的元素无法区分时，例如整数，或者更一般地说，任何以整个元素为关键的数据，稳定性都不是问题。但是，假设以下成对的数字将按它们的第一个组件排序：

[http://en.wikipedia.org/wiki/Sorting_algorithm#Stability](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)

与其他算法相比。维基百科上有一个简洁的条目：

[http://en.wikipedia.org/wiki/Bucket_sort#Comparison_with_other_sorting_algorithms](http://en.wikipedia.org/wiki/Bucket_sort#Comparison_with_other_sorting_algorithms)

另外：[https ://stackoverflow.com/a/7341355/1416221](https://stackoverflow.com/a/7341355/1416221)

# android - 捕获 AsyncTask 的异常。需要思考

> ID：10944442
> 
> 赞同：8
> 
> 时间：2012-06-08T07:06:58.683
> 
> 标签：android, exception-handling

我想在 doInBackground 中捕获线程异常并在 onPostExcecute 中打印错误消息。问题是我在 onPostExecute 中没有 Throwable 对象。如何**在非 UI 线程中捕获异常并在 UI 线程**中**打印错误消息**？

```
public class TestTask extends AsyncTask<Void, Void, List<String>> {

    @Override
    protected List<String> doInBackground(final Void... params) {
        try {
            ...
            return listOfString;
        } catch(SomeCustomException e) {
            ...
            return null;
        }       
    }

    @Override
    protected void onPostExecute(final List<String> result) {
        if(result == null) {
            // print the error of the Throwable "e".
            // The problem is I don't have the Throwable object here! So I can't check the type of exception.
        }

    }
} 
```

**Arun回答后更新：**

这是我的 AsyncTask 包装类。它打算在 doInBackground 中处理异常，但我找不到一个好的解决方案。

```
public abstract class AbstractWorkerTask<Params, Progress, Result>
extends AsyncTask<Params, Progress, Result>
implements Workable {
    protected OnPreExecuteListener onPreExecuteListener;
    protected OnPostExecuteListener<Result> onPostExecuteListener;
    protected ExceptionHappenedListener exceptionHappendedListener;
    private boolean working;

    @Override
    protected void onPreExecute() {
        if (onPreExecuteListener != null) {
            onPreExecuteListener.onPreExecute();
        }
        working = true;
    }

    @Override
    protected void onPostExecute(final Result result) {
        working = false;
        if(/* .........*/ ) {
            exceptionHappendedListener.exceptionHappended(e);
        }
        if (onPostExecuteListener != null) {
            onPostExecuteListener.onPostExecute(result);
        }
    }

    @Override
    public boolean isWorking() {
        return working;
    }

    public void setOnPreExecuteListener(final OnPreExecuteListener onPreExecuteListener) {
        this.onPreExecuteListener = onPreExecuteListener;
    }

    public void setOnPostExecuteListener(final OnPostExecuteListener<Result> onPostExecuteListener) {
        this.onPostExecuteListener = onPostExecuteListener;
    }

    public void setExceptionHappendedListener(final ExceptionHappenedListener exceptionHappendedListener) {
        this.exceptionHappendedListener = exceptionHappendedListener;
    }

    public interface OnPreExecuteListener {
        void onPreExecute();
    }

    public interface OnPostExecuteListener<Result> {
        void onPostExecute(final Result result);
    }

    public interface ExceptionHappenedListener {
        void exceptionHappended(Exception e);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T07:18:32.643

更改 to 的返回类型，`doInBackground()`当`Object`您收到结果时，`onPostExecute(Object result)`使用`instanceOf`运算符检查返回的结果是 an`Exception`还是`List<String>`.

**编辑**

由于结果可以是异常或正确的列表，您可以使用以下内容：

```
protected void onPostExecute(final Object result) {
    working = false;
    if(result instanceof SomeCustomException) {
        exceptionHappendedListener.exceptionHappended(result);
    }
    else{
        if (onPostExecuteListener != null) {
            onPostExecuteListener.onPostExecute(result);
        }
    }
} 
```

还要更改以下语句：

```
public abstract class AbstractWorkerTask<Params, Progress, Object> extends AsyncTask<Params, Progress, Object> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T11:04:39.337

只需将异常存储到列表中并稍后处理，因为 onPostExecute() 总是在 doInBackground() 之后调用：

```
public class TestTask extends AsyncTask<Params, Progress, Result> {

  List<Exception> exceptions = new ArrayList<Exception>();

  @Override
  protected Result doInBackground(Params... params) {
    try {
      ...
    } catch(SomeCustomException e) {
      exceptions.add(e);
    }
    return result;
  }

  @Override
  protected void onPostExecute(Result result) {
    for (Exception e : exceptions) {
      // Do whatever you want for the exception here
      ...
    }
  }

} 
```

这是可行的，但很少使用，因为在大多数情况下，我们希望在异常被抛出和捕获后立即处理：

```
public class TestTask extends AsyncTask<Params, Progress, Result> {

  @Override
  protected Result doInBackground(Params... params) {
    try {
      ...
    } catch(SomeCustomException e) {
      // If you need update UI, simply do this:
      runOnUiThread(new Runnable() {
        public void run() {
          // update your UI component here.
          myTextView.setText("Exception!!!");
        }
      });
    }
    return result;
  }

} 
```

希望这是有道理的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-04T20:36:41.820

将 to的返回类型更改`doInBackground`为`Object`可能传递一个`Exception`然后使用`instanceof()`是代码异味的来源（糟糕的编程习惯）。总是最好将您的返回类型限制为您想要返回的非常具体的东西。

基于这个[答案](https://stackoverflow.com/a/14211991/2926226)，只需添加一个私有成员来存储抛出的异常`doInBackground`，然后首先在`onPostExecute`.

只`Exception`需要捕获一个，因为`doInBackground`一旦抛出异常，您应该立即停止操作，并`onPostExecute`在您可以访问 UI 元素的地方优雅地处理它，以便将事故通知用户。

通用示例（AsyncTask 的主体）：

```
private Exception mException

@Override
protected Result doInBackground(Params... params) {
    try {
          // --- Do something --- //
    }
    catch( SomeException e ){ mException = e; return null; }
}

@Override
protected void onPostExecute(Result result) {
    if (mException != null) {
        // --- handle exception --- //
        return;
    }

    // --- Perform normal post execution actions --- //
} 
```

# javascript - javascript中的全局变量无法正常工作

> ID：10944447
> 
> 赞同：0
> 
> 时间：2012-06-08T07:07:10.577
> 
> 标签：javascript, jquery

我有一个 iframe 问题（对我来说有点奇怪）。问题是我的文档中有一个 iframe，并且有几个函数在该 iframe 上执行不同的任务，并用于访问我们使用的 iframe 的内容：

```
$("iframe").contents(); 
```

所以我没有写这个长语句，而是使用了一个全局变量：

```
var i = $("iframe").contents(); 
```

但这不是很好，比如

```
alert( i.find("someelement") ); 
```

=>`undefined`

```
alert($("iframe").contents().find("someelement") 
```

=>`[object]`

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:12:24.610

代替

```
var i = $("iframe").contents(); 
```

和

```
window.i = $("iframe").contents(); 
```

As`i`的作用域比`window`, 小，后者用于在 JavaScript 中声明全局变量。

`iframe`但还有一件事是，如果它来自不同的域，则您不能修改 中的任何项目。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:09:42.707

您可能正在覆盖`i`某个地方，或者它不是全局的。为确保它是全局的，请不要使用 var。相反，定义`window.i = ...;`并始终引用`window.i`. 这避免了可能与局部变量混淆（这可能经常发生，因为`i`它几乎总是用作迭代器变量）。`i`如果您将它用于除 iframe 之外的任何内容（例如前面提到的迭代器），还要额外确保您始终声明为本地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:11:36.860

您的 iframe 的内容与它所在的页面是否在同一个域中？

更多：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# java - instanceof 与 isInstance()

> ID：10944448
> 
> 赞同：5
> 
> 时间：2012-06-08T07:07:12.913
> 
> 标签：java, instanceof, isinstance

```
class A{

    public A(){
        System.out.println("in A");
    }
}

public class SampleClass{

    public static void main(String[] args) {
        A a = new A();

        System.out.println(A.class.isInstance(a.getClass()));
    }
} 
```

输出：

```
false 
```

为什么是假的？两者都不应该返回同一个类`A.class`！`a.getClass()`

在哪种情况下，我们将从该`isInstance()`方法中得到正确的结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T07:08:51.820

因为`a.getClass()`返回`Class<A>`，但[你应该传入一个`A`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)：

```
System.out.println(A.class.isInstance(a)); 
```

如果您有两个`Class`实例并且想要检查分配兼容性，那么您需要使用[`isAssignableFrom()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)：

```
System.out.println(A.class.isAssignableFrom(Object.class)); // false
System.out.println(Object.class.isAssignableFrom(A.class)); // true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:08:59.310

因为`a.getClass()`返回的是类型`Class<? extends A>`，而不是类型`A`。

测试的是`A.class.isInstance`传递的对象是否具有 type `A`。

# javascript - 有没有办法防止 TinyMCE 自动关注页面加载？

> ID：10944450
> 
> 赞同：11
> 
> 时间：2012-06-08T07:07:24.100
> 
> 标签：javascript, jquery, tinymce

我的表单上有许多输入字段，其中一个是使用 TinyMCE（版本 3.5.2）。一旦 TinyMCE 加载，它就会将焦点设置为自身。我怎样才能防止这种情况发生？我想默认选择第一个输入。

这就是我的代码现在的样子

```
var tinymce = $('#Content');
tinymce.tinymce({
    theme: "advanced",
    plugins: "...",
    theme_advanced_buttons1: "...",
    theme_advanced_buttons2: "...",
    theme_advanced_buttons3: "...",
    theme_advanced_buttons4: "...",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "bottom",
    theme_advanced_resizing: true,
    content_css: [...],
    template_external_list_url: "lists/template_list.js",
    external_link_list_url: "lists/link_list.js",
    external_image_list_url: "lists/image_list.js",
    media_external_list_url: "lists/media_list.js",
    template_replace_values: {
        username: "Some User",
        staffid: "991234"
    }
}); 
```

**更新：**

经过一些更多的测试，这个问题似乎只存在于 IE9 中。Chrome、FireFox、Opera 和 Safari 不会在页面加载时将焦点设置到编辑器。IE7 和 IE8 模式下的 IE9 也不会在页面加载时设置焦点，但即使您尝试将焦点设置到另一个输入，IE9 本身也会将焦点设置到编辑器。

但是，一旦您在 textarea 中加载具有值的页面，这一切都会发生变化。当你这样做时，IE9 就像其他浏览器一样工作。现在，我在 textarea 中用一个空格加载页面，这使得 IE9 可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:41:10.593

将有助于让您的剩余输入和表单结构了解更好的方法，但沿着这条线的东西应该会有所帮助：

**查询**

```
function myCustomOnInit() {
    $('form *:input[type!=hidden]:first').focus();
}

tinyMCE.init({
        ...
        oninit : myCustomOnInit
}); 
```

**从[文档](http://www.tinymce.com/wiki.php/Configuration:oninit)：**

> 此选项使您能够指定在所有编辑器实例完成初始化时要执行的函数。这很像 HTML 页面的 onload 事件。
> 
> **注意：**您也可以将函数名称作为字符串传递。但在这种情况下，函数必须在页面的全局范围内声明。

**这里的技巧是为第一个可见输入设置焦点：**

```
$('form *:input[type!=hidden]:first').focus(); 
```

**请参阅**此[工作示例](http://dl.dropbox.com/u/76169930/stackoverflow/question/10944450/tinymce/examples/index.html)！

* * *

# 已编辑

我花了一些时间来测试它并让它在 IE9 上工作，但这里是：

请参阅此[工作解决方案](http://dl.dropbox.com/u/76169930/stackoverflow/question/10944450/tinymce/examples/no_contents_inside_textarea.html)！

**jQuery**

```
setup : function(ed) {
  ed.onLoadContent.add(function(ed, o) {
    var controlLoad = setTimeout(function() {
      if ($('.mceIframeContainer').size()==1) {
        $('form *:input[type!=hidden]:first').focus();
        clearTimeout(controlLoad);
      }
    }, 100);
  });
} 
```

这样做是在`.mceIframeContainer`找到类之前运行超时，这意味着加载完成。找到后，为第一个输入元素设置焦点并清除超时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-03T07:27:04.250

```
setup: function(ed){
   ed.on('postRender', function (editor, cm) { editor.preventDefault(); }); 
} 
```

如果您在函数内执行单个命令，它会忽略 preventDefault 并继续聚焦和滚动！！！:D

# ruby-on-rails - 如何使用不同的密钥 ID 和秘密授予对存储桶的访问权限？

> ID：10944453
> 
> 赞同：0
> 
> 时间：2012-06-08T07:07:35.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, security, amazon-s3, amazon-web-services

如果我想让我的开发和生产应用程序访问具有不同密钥 ID 和秘密的不同存储桶，这可能吗？还是我需要创建另一个 AWS 账户？

我环顾四周，但找不到任何有用的东西。理想情况下，如果我可以在一个 AWS 账户中拥有多个存储桶，并且这些存储桶访问具有不同的密钥 ID 和秘密，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:31:02.433

就将凭据获取到您的应用程序而言，您可以将单独的 YAML 文件复制到服务器上，或者（在 heroku 上）使用环境变量，正如 John 所说。

但是，您不需要多个 AWS 账户。您可以使用[iam](http://aws.amazon.com/documentation/iam/)在您的帐户中创建额外的用户，使用他们自己的访问密钥/秘密密钥，然后授予他们适当的权限。例如，您可以创建一个只能访问 S3 存储桶但不能执行任何其他操作的帐户。如果您要在实例上保存密钥，我强烈建议您走这条路线，而不是为您的账户使用“主”访问密钥（它允许不受限制地访问您的 AWS 账户）

您可以通过 IAM api 创建/配置这些用户，也可以在亚马逊控制台使用 GUI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:26:50.650

在你的配置目录中创建一个名为 s3.yml 的文件，里面放：

```
development:
  bucket: development_bucket_name
  access_key_id: development_amazon_key
  secret_access_key: development_secret_key 
```

为生产创建一个类似的文件 (s3.yml)。

> ```
> production:
>   bucket: production_bucket_name
>   access_key_id: production_amazon_key
>   secret_access_key: production_secret_key 
> ```

**不要将文件签入源代码管理。** 而是将生产版本放在服务器上的配置目录中进行开发，只需将其留在本地配置中即可。

在 environment/development.rb 和 production.rb

> S3_CONFIG = YAML.load_file Rails.root.join("config/s3.yml")

无论您在哪里明确调用 bucket_name、amazon_key、secret_key 代替使用

```
S3_CONFIG[Rails.env]["bucket"], etc 
```

# ruby - 遍历枚举器的一部分（外部迭代器）？

> ID：10944455
> 
> 赞同：1
> 
> 时间：2012-06-08T07:07:42.743
> 
> 标签：ruby, enumerator

如果我想要一个数组的一部分，我可以使用`[]`or `split`：

```
arr = [1,2,3,4,5]
arr[1..3]
=> [2, 3, 4] 
```

但是有一个“通用”版本`[]`吗？我可以把它应用到任何地方`Enumerator`吗？

```
enum = arr.each
enum.xxx_method(1..3) # is equal to arr[1..3].each 
```

当然也可以`arr[1..3]`直接使用。但我正在寻找一种处理任何枚举器的通用方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:39:56.803

如果你有一个枚举器，你可以指望 Enumerable 方法`drop`和`take`：

```
# abstract if necessary as enum_slice(range)
enumerator.drop(2).take(3) 
```

如果该枚举器是您不需要遍历它的数组，请检查`Array#lazy_slice`我[要求添加](https://github.com/yhara/enumerable-lazy/issues/1)到与[您之前的问题相关的](https://stackoverflow.com/questions/10865142/ruby-lazily-iterate-through-an-array)[enumerable_lazy](https://github.com/yhara/enumerable-lazy)的方法：

```
require 'enumerable/lazy'

class Array
  def lazy_slice(range)
    Enumerator.new do |yielder|
      range.each do |index|
        yielder << self[index]
      end
    end.lazy
  end
end

some_big_array = (0..10000).to_a # fake array, it won't generally be a range
p some_big_array.lazy_slice(9995..10000).map { |x| 2*x }.to_a
#=> [19990, 19992, 19994, 19996, 19998, 20000] 
```

# iphone - Objective-c 中的“测试类平等”

> ID：10944460
> 
> 赞同：29
> 
> 时间：2012-06-08T07:08:18.720
> 
> 标签：iphone, objective-c, ios

我在理解苹果指南中定义的“测试类平等”的这一部分时遇到问题。

> 在动态创建的子类中，类方法通常被重写，以便子类伪装成它所替换的类。因此，在测试类相等性时，您应该比较类方法返回的值，而不是低级函数返回的值。就 API 而言，以下不等式适用于动态子类：
> 
> ```
> [object class] != object_getClass(object) != *((Class*)object) 
> ```
> 
> 因此，您应该测试两个类的相等性，如下所示：
> 
> ```
> if ([objectA class] == [objectB class]) { //... 
> ```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-08T07:18:56.643

在某些情况下，人们会在运行时添加新类。一个例子是键值观察：当你观察一个对象时，Foundation 框架会创建一个被观察对象类的新子类。这个动态类的行为与其超类相同，但将 KVO 通知添加到其所有 mutator 方法。

您引用的段落说，Objective-C 运行时可以将这个新类与原始类区分开来。然而，因为它只是 KVO 构建方式的一个实现细节，你不应该知道或关心它。因此，开发人员重写了`-class`他们的新类的方法，假装对象仍然是原始类的成员。

如果要检查两个对象是否属于同一类，则必须比较它们的`-class`方法的结果（其中考虑了 KVO 之类的技巧），而不是使用运行时函数。

这是一个例子：

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSObject *observer = [NSObject new];
        NSObject *model = [NSObject new];

        [model addObserver: observer forKeyPath: @"count" options: 0 context: NULL];

        //using -class methods:
        NSLog(@"model is a %@, observer is a %@", [model class], [observer class]);

        //casting to Class:
        NSLog(@"model is a %@, observer is a %@", *(Class*)model, *(Class*)observer);

        //using the runtime:
        NSLog(@"model is a %@, observer is a %@", object_getClass(model), object_getClass(observer));

        [model removeObserver: observer forKeyPath: @"count" context: NULL];
        [model release];
        [observer release];
    }
    return 0;
} 
```

你看我所做的只是创建两个对象，告诉其中一个观察另一个，然后找出它们的类是什么。结果如下：

> 2012-06-08 08:37:26.904 无标题 2[896:707] 模型是 NSObject，观察者是 NSObject
> 
> 2012-06-08 08:37:26.907 无标题 2[896:707] 模型是 NSKVONotifying_NSObject，观察者是 NSObject
> 
> 2012-06-08 08:37:26.907 无标题 2[896:707] 模型是 NSKVONotifying_NSObject，观察者是 NSObject

因此，正如文档所暗示的那样，它只是第一种情况（我们比较的地方`-class`）可以执行应用程序代码可以合理预期的任何事情。找出类的另外两种方法——询问运行时，以及将对象指针转换为`Class *`a——都泄露了关于 KVO 如何从我们下面改变类的实现细节，并且意味着类比较现在不会显示班级是平等的。

因为其他答案和评论指的是`-isMemberOfClass:`and `-isKindOfClass:`，所以我也会介绍这些要点：

*   `-isKindOfClass:`不是*对*阶级平等的测试。`[object isKindOfClass: aClass]`如果`object`是 的实例`aClass` *或其任何子类*，则为真。因为您引用的段落是关于阶级平等的，`-isKindOfClass:`所以在这里不相关。也就是说，这通常是您希望在应用程序代码中进行的测试。更常见的是关心“我可以将此对象用作`Foo`？”的答案。而不是“这个对象是一个完全的实例`Foo`吗？”。

*   `-isMemberOfClass:`是对类相等性的测试：`[object isMemberOfClass: aClass]`仅当 object 是`aClass`. 该测试是使用该`-class`方法的结果完成的，这意味着在此示例`model` *中将*测试`[model isMemberOfClass: [NSObject class]]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:11:15.827

它应该是：

```
if([objctA isKindOfClass [MyClass class]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T06:11:58.637

Maybe can you use the 'NSStringFromClass' method and compare the obtained strings thanks to 'isEqualToString' ?

# iphone - UIView 子类不可见

> ID：10944461
> 
> 赞同：0
> 
> 时间：2012-06-08T07:08:21.083
> 
> 标签：iphone, objective-c, ios, ipad, custom-component

我正在创建一个 UIView (MultiColumnTableView) 的子类，它将包含几个表视图。但是，当我将自定义视图作为子视图添加到视图控制器时，它永远不可见，我真的不知道为什么？

我在我的根视图控制器中使用此代码添加它：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    _multiColumnTableView = [[MultiColumnTableView alloc] initWithNumberOfColums:3 columnWidth:200 frame:CGRectMake(100, 100, 0, 400)];
    _multiColumnTableView.dataSource = self;
    _multiColumnTableView.delegate = self;

    [self.view addSubview:_multiColumnTableView];
    [_multiColumnTableView reloadData];
} 
```

自定义类初始化程序包含以下代码：

```
- (id)initWithNumberOfColums:(NSInteger)columns columnWidth:(float)width frame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.numberOfColumns = columns;
        self.columnWidth = columnWidth;

        self.bounds = CGRectMake(0, 0, columnWidth * numberOfColumns, self.bounds.size.height);

        _tableViews = [NSMutableArray new];

        // Create all the desired colums (= tableViews)
        for (int i = 0; i < numberOfColumns; i++) {
            UITableView *t = [[UITableView alloc] initWithFrame:CGRectMake(columnWidth * i, 0, columnWidth, self.bounds.size.height)];
            [_tableViews addObject:t];
            t.tag = i;
            t.backgroundColor = [UIColor blueColor];
            t.dataSource = self;
            t.delegate = self;
            [self addSubview:t];
        }

    }
    return self;
} 
```

我期待看到一些蓝色的表格视图，但它们不可见，因此它们从不调用 cellForRowAtIndexPath:，但它们确实调用 numberOfRowsInSection。我的自定义子视图被添加到根视图。计算子视图时，它返回 1。任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:15:04.297

检查表格视图的每一帧是否正确分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:17:37.277

在构造函数中进行以下更改。

```
- (id)initWithNumberOfColums:(NSInteger)columns columnWidth:(float)width frame:(CGRect)frame
{
     self = [super initWithFrame:CGRectMake(frame.origin.x, frame.origin.y, columns*width, frame.size.height)];
     if (self) {
          self.numberOfColumns = columns;
          self.columnWidth = columnWidth;

          _tableViews = [NSMutableArray new];

               // Create all the desired colums (= tableViews)
          for (int i = 0; i < numberOfColumns; i++) {
               UITableView *t = [[UITableView alloc] initWithFrame:CGRectMake(columnWidth * i, 0, columnWidth, frame.size.height)];
               [_tableViews addObject:t];
               t.tag = i;
               t.backgroundColor = [UIColor blueColor];
               t.dataSource = self;
               t.delegate = self;
               [self addSubview:t];
          }

     }
     return self;
} 
```

# php - 在 Vim + Eclim 中，如何在垂直窗口中打开“SearchContext”

> ID：10944465
> 
> 赞同：1
> 
> 时间：2012-06-08T07:08:42.837
> 
> 标签：php, autocomplete, vim, eclim

我正在使用 Eclim，在文档[Suggested Vim Mappings](http://eclim.org/vim/mappings.html)中，我知道 PHP 的映射

```
nnoremap <silent> <buffer> <cr> :PhpSearchContext<cr> 
```

但它打开一个水平窗口，如何将其更改为垂直窗口？

就像和之间的`:help`差异`:vert bo help`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:56:58.193

放置在您`.vimrc`的以下内容中：

```
let g:EclimDefaultFileOpenAction = 'vsplit' 
```

或者，您可以仅为 PHP 添加此类设置：

```
let g:EclimPhpSearchSingleResult = 'vsplit' 
```

不幸的是， Eclim 的文档[中没有说明](http://goo.gl/us97V)`vsplit`这样的值 ' ' ，我只记得 eclim-user 邮件列表中的相同问题。

# modbus - 使用 JAMOD 读取线圈

> ID：10944467
> 
> 赞同：0
> 
> 时间：2012-06-08T07:08:56.170
> 
> 标签：modbus

我编写了以下程序来了解如何使用 JAMOD 访问线圈。不幸的是，它抛出了错误-

```
java.lang.IndexOutOfBoundsException
at java.io.BufferedInputStream.read(Unknown Source)
at java.io.DataInputStream.read(Unknown Source)
at net.wimpi.modbus.io.ModbusTCPTransport.readResponse(ModbusTCPTransport.java:177)
at net.wimpi.modbus.io.ModbusTCPTransaction.execute(ModbusTCPTransaction.java:193)
at TempReader.main(TempReader.java:27)
. x2 more times 
.

java.io.EOFException
at java.io.DataInputStream.readUnsignedByte(Unknown Source)
at net.wimpi.modbus.io.BytesInputStream.readUnsignedByte(BytesInputStream.java:153)
at net.wimpi.modbus.io.ModbusTCPTransport.readResponse(ModbusTCPTransport.java:182)
at net.wimpi.modbus.io.ModbusTCPTransaction.execute(ModbusTCPTransaction.java:193)
at TempReader.main(TempReader.java:30)
net.wimpi.modbus.ModbusIOException: Executing transaction failed (tried 3 times)
at net.wimpi.modbus.io.ModbusTCPTransaction.execute(ModbusTCPTransaction.java:197)
at TempReader.main(TempReader.java:30) 
```

在程序第 27 行是“trans.execute()”。我试图读取的线圈地址是 0x7D1 (2001) 或通道 0 数据类型是 2 个字。-

```
import java.net.*;
import java.io.*;
import net.wimpi.modbus.*;
import net.wimpi.modbus.msg.*;
import net.wimpi.modbus.io.*;
import net.wimpi.modbus.net.*;
import net.wimpi.modbus.util.*;

public class TempReader {

    public static void main(String Args[]){
        TCPMasterConnection con = null; 
        ModbusTCPTransaction trans = null; 
        ReadCoilsRequest rcreq=null;
        ReadCoilsResponse rcres=null;
        InetAddress addr = null; 
        int port = Modbus.DEFAULT_PORT;
        byte byteArray[]={(byte)192, (byte)168, (byte)0, (byte)182};
        try {
            addr=InetAddress.getByAddress(byteArray);
            con=new TCPMasterConnection(addr);
            con.setPort(502);
            con.connect();
            rcreq=new ReadCoilsRequest(2001, 1);
            trans=new ModbusTCPTransaction(con);
            trans.setRequest(rcreq);
            trans.execute();
            rcres=(ReadCoilsResponse)trans.getResponse();
            System.out.println("Response : "+rcres.getCoils().toString());
            con.close();
        }
        catch(Exception e){
            con.close();
            e.printStackTrace();
        }
    }
} 
```

错误当然会重复 3 次，如 ModbusTCPTransport 类中设置的（我检查了类源），即在退出和程序退出之前尝试 3 次。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:30:37.103

我的示例 Modbus TCP ReadMultipleRegistersRequest。

```
 public static void main(String[] args) {
    try {           

         /**************************************/

        //Read And Write Register Sample
        int port = Modbus.DEFAULT_PORT;
        String refe = "4000";//HEX Address
        int ref=Integer.parseInt(refe,16);//Hex to int          
        int count = 98; //the number Address to read
        int SlaveAddr=1;
        String astr = "192.168.1.202"; //Modbus Device                  

        InetAddress addr = InetAddress.getByName(astr);
        TCPMasterConnection con = new TCPMasterConnection(addr); //the connection
        ModbusTCPTransaction trans = null; //the transaction

        //1.Prepare the request
        /************************************/
        ReadMultipleRegistersRequest Rreq = new ReadMultipleRegistersRequest(ref,count);
        ReadMultipleRegistersResponse Rres = new ReadMultipleRegistersResponse();

        Rreq.setUnitID(SlaveAddr); //set Slave Address  
        Rres.setUnitID(SlaveAddr); //set Slave Address

        //2\. Open the connection
        con.setPort(port);
        con.connect();
        con.setTimeout(2500);

        //3\. Start Transaction
        trans = new ModbusTCPTransaction(con);
        trans.setRetries(5);

        trans.setReconnecting(true);
        trans.setRequest(Rreq);
        trans.execute();

        /*Print Response*/
        Rres = (ReadMultipleRegistersResponse) trans.getResponse();

        System.out.println("Connected to=  "+ astr + con.isConnected() + " / Start Register " + Integer.toHexString(ref));
        count=1;
    for (int k=0;k<count;k++){
       System.out.println("The value READ: " + Rres.getRegisterValue(k));
    }       

    /****************Close Connection**************/
        con.close();
        System.out.println("\nConnected = " + con.isConnected());
        System.exit(0);//edit Java bug error

    } catch (Exception ex) {
      ex.printStackTrace();
    } 

  }//main 
```

如果你想让奴隶试试这个例子：

```
import net.wimpi.modbus.net.*;
import net.wimpi.modbus.procimg.*;
import net.wimpi.modbus.ModbusCoupler;

public class TCPSlaveTest {

  public static void main(String[] args) {
    try {

/* The important instances and variables */
ModbusTCPListener listener = null;
SimpleProcessImage spi = null;
int port = Modbus.DEFAULT_PORT;

  //1\. Set port number from commandline parameter
  if(args != null && args.length ==1) {
    port = Integer.parseInt(args[0]);
  }

//2\. Prepare a process image
spi = new SimpleProcessImage();
spi.addDigitalOut(new SimpleDigitalOut(true));
spi.addDigitalOut(new SimpleDigitalOut(false));
spi.addDigitalIn(new SimpleDigitalIn(false));
spi.addDigitalIn(new SimpleDigitalIn(true));
spi.addDigitalIn(new SimpleDigitalIn(false));
spi.addDigitalIn(new SimpleDigitalIn(true));
spi.addRegister(new SimpleRegister(251));
spi.addInputRegister(new SimpleInputRegister(45));

//3\. Set the image on the coupler
ModbusCoupler.getReference().setProcessImage(spi);
ModbusCoupler.getReference().setMaster(false);
ModbusCoupler.getReference().setUnitID(15);   

//4\. Create a listener with 3 threads in pool
listener = new ModbusTCPListener(3);
listener.setPort(port);
listener.start();  

    } catch (Exception ex) {
      ex.printStackTrace();
    }
  }//main

}//class TCPSlaveTest 
```

# php - 如何从 iFrame php 获取 Facebook ID

> ID：10944471
> 
> 赞同：0
> 
> 时间：2012-06-08T07:09:18.163
> 
> 标签：php, facebook, iframe, assign

我正在尝试从 iframe 中提取 facebook id，以更新将显示在用户网站上并链接到 fb 页面的模块。

例如，当我加载这个 iframe 时：

```
<iframe src=https://graph.facebook.com/zuck></iframe> 
```

您可以看到 Mark Zuckerberg 的 id 为 4。我只想将这个值从 iframe 中提取出来并通过 php 将其分配给一个变量。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:41:52.203

您可以使用 FB javascript API 轻松完成此操作。

在你的脑海中，添加一个 JS 块：

```
window.fbAsyncInit = function() {
    FB.api("/zuck", function(response){
        alert(response.id);
    });
};​ 
```

... 用想要的用户名替换 zuck，例如。“/” +*用户名*

异步加载 FB JS ...

```
<script type="text/javascript">
// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));
</script>​ 
```

由于 ID 是一个公共字段，因此您不需要任何额外的用户登录信息；你可以打电话。

请注意......这是缺少一些常见的 FB 东西：
FB.init - 因为我们不需要做任何与用户会话相关的东西。
[div id="fb-root"][/div] - 因为我们没有显示任何来自 FB 的东西；对话框等（但带有方括号！:-P）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:16:50.037

据我所知，不幸的是这是不可能的。因为这是一个安全问题。如果您想从来源来自您自己域的 iframe 中提取值，则可能没有任何问题。但是当 iframe 的来源是第三方 url 时，访问其中的 dom 元素是一个安全问题。

# sql-server-2005 - 无法连接到安装在 Win7 虚拟机上的 SQL Server 2005

> ID：10944479
> 
> 赞同：0
> 
> 时间：2012-06-08T07:10:04.033
> 
> 标签：sql-server-2005, virtual-machine

我无法连接到 Win7 虚拟机上托管的 SQL Server 2005。我是VM新手，有人可以帮我找到问题吗？

我能够连接安装在本地计算机上的另一个 SQL 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:10:30.027

当你说你无法联系时——这可能意味着很多事情——你真的需要更加具体。

除了这里已经存在的评论和答案 - 如果您在 Sql Server Management Studio 中连接到它时遇到问题 - 您应该在 VM 本身上打开配置管理器并确保启用共享内存和命名管道（打开 SQL Server树中的网络配置节点）。

例如，SQL Server Express 实例默认配置为拒绝 SSMS 默认打开的远程连接类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:04:46.643

首先检查您的连接字符串（供参考）： http:
[//www.connectionstrings.com/](http://www.connectionstrings.com/)

其次，您需要在客户机防火墙中添加一个例外或完全禁用它（端口 1433 用于 sql tcp/ip 访问）。

这对我来说很好：

```
SQLConn.ConnectionString = "Network Library=DBMSSOCN; Data Source=xxx.xxx.xxx.xxx,1433;
Initial Catalog=mySQLServerDBName; User ID=myUsername;Password=myPassword" 
```

祝你好运

# php - 如何将 javascript 变量传递给 php 文件，以运行 db 查询并返回 true 或 false

> ID：10944481
> 
> 赞同：0
> 
> 时间：2012-06-08T07:10:30.743
> 
> 标签：php, javascript, get, return

这个问题很直接。我在 JS 中有两个变量。我想首先将这些传递给一个 php 文件以更新数据库，然后返回原始文件，根据查询返回一个 true 或 false 值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:19:15.760

考虑检查现有用户名的 PHP 文件为：

```
<?php
    if(mysql_num_rows(mysql_query($query)) === 1)
        die('true');
    else
        die('false');
?> 
```

在您的 HTML 文件中，您可以这样调用（使用 jQuery）：

```
<script type="text/javascript">
function checkUsername()
{
    $.ajax({
      url: 'checkuser.php?username' = $('#username').val(),
      success: function(data) {
        if(data == 'true')
          alert('Username Available!'); // User Exists!
        else
          alert('Username not Available!'); // User not Exist!
      }
    });
}
</script> 
```

在 HTML 中：

```
<input type="text" name="username" id="username" />
<a href="#" onclick="checkUsername(); return false;">Check</a> 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:21:19.890

HTML <'input type = "TEXT" Id="TEXTTOPARSE"> <'Span id="ResultVALue> 加载页面

```
 $(document).ready(function(){
   $('#TEXTTOPARSE').bind('onChange', function(){
       var val = $(this).val();
       updatePage(val);

   });
 });

function updatePage(value){

$.ajax({
  method:"POST",
  url:"YourPageLink"
  data:{"textValue" : value},
   success: function(data){
   $('#ResultVAlue').html(data);
  }

  });

  } 
```

# javascript - Django - simplejson 响应

> ID：10944482
> 
> 赞同：1
> 
> 时间：2012-06-08T07:10:31.370
> 
> 标签：javascript, jquery, python, django, jquery-plugins

我正在使用 jQuery 自动完成插件[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)在我想要以 json 格式发送响应的 Web 应用程序中提供搜索建议。

用于发送建议响应的Django **views.py ：**

```
def keywords_suggestions(request):
        if request.is_ajax():
                suggestions = []
                q = request.POST.get('q')
                try:
                        g = KeywordsModel.objects.filter(keyword__startswith=q).order_by('count')
                except KeywordsModel.DoesNotExist:
                        return HttpResponse("")
                else:
                        for i in range(0,len(g)):
                                global suggestions
                                suggestions.append(g[i].keyword)
                                to_json = {
                                        "query": q,
                                        "suggestions": suggestions
                                }
                        return HttpResponse(simplejson.dumps(to_json), mimetype='application/json') 
```

Django**模型.py**：

```
class KeywordsModel(models.Model):
        keyword = models.CharField(max_length=40, blank=False)
        count = models.IntegerField(max_length=20)

        def __unicode__(self):
            return self.keyword 
```

jQuery代码：

```
$("#add-keywords").keyup(function() {
    $('#add-keywords').autocomplete({ 
            serviceUrl:'/keywords_suggestions',
            minChars:3, 
            maxHeight:220,
            width:280,
            zIndex: 9999,
            params: { q: $('#add-keywords').val() },
            onSelect: function(value, data){ $('#add-keywords').val(value); },
    });
}); 
```

我在**#add-keywords 文本框**上键入时收到此错误。

```
Request URL:http://127.0.0.1:8000/keywords_suggestions/?q=web&query=web
Request Method:GET
Status Code:500 INTERNAL SERVER ERROR 
```

**更新**

```
ValueError at /keywords_suggestions/
The view information.views.keywords_suggestions didn't return an HttpResponse object. 
```

**更新-2**

我对建议变量有疑问，也许全局建议会有问题。我做对了吗？

谁能指导我让它工作？

**更新-3**

```
<input type="text" id="add-keywords" name="add-keywords" title="e.g. Web developer, Javascript, Musician, Jazz" /> 
```

如何在 Django views.py 中获取#add-keywords 文本框的值。这行得通`q = request.POST.get('add-keywords')`吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:19:59.160

判决`request.is_ajax()`返回`False`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:09:48.437

条件分支

```
try:
    g = KeywordsModel.objects.filter(keyword__startswith=q).order_by('count')
except KeywordsModel.DoesNotExist:
    return HttpResponse("")
else:
    ... 
```

也可能失败`ValueError`，例如，`request.POST.get('q')`结果`None`

另外，请尝试`'/keywords_suggestions/'`，注意后缀斜杠，而不是在行`'/keywords_suggestions'`中`serviceUrl:'/keywords_suggestions',`

# java - 查找 Eclipse 项目中的错误数量

> ID：10944487
> 
> 赞同：14
> 
> 时间：2012-06-08T07:10:54.937
> 
> 标签：java, eclipse

如何以编程方式查找 Eclipse 项目中的错误数（标记为红色）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T07:35:08.030

有两个主要步骤：

1.  您需要访问 Eclipse API - 为 Eclipse 编写自己的插件或使用像[Groovy Monkey这样的脚本插件](http://groovy.codehaus.org/Groovy+Monkey)

2.  使用 Eclipse API 获取您感兴趣的资源的问题标记 - 检查此链接：[如何使用资源标记](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/resAdv_markers.htm)

如果您只想检索 JDT 错误标记，您应该编写如下内容：

```
public static IMarker[] calculateCompilationErrorMarkers(IProject project)
{
    ArrayList <IMarker> result = new ArrayList <IMarker>();
    IMarker[] markers = null;
    markers = project.findMarkers(IJavaModelMarker.JAVA_MODEL_PROBLEM_MARKER, true, IResource.DEPTH_INFINITE);
    for (IMarker marker: markers)
    {
        Integer severityType = (Integer) marker.getAttribute(IMarker.SEVERITY);
        if (severityType.intValue() == IMarker.SEVERITY_ERROR)
                result.add(marker);
    }
    return result.toArray(new IMarker[result.size()]);
} 
```

# php - ajax 和可移植操作系统

> ID：10944489
> 
> 赞同：0
> 
> 时间：2012-06-08T07:11:07.843
> 
> 标签：php, ajax

好吧，我的 php 页面中有一个选择列表，我只想用我的数据库中的新数据刷新它。使用 ajax 完成它，但在 android 或其他手机操作系统上，这会弄乱布局。可移植操作系统和ajax？你能给我任何提示来解决这个问题吗？

已编辑

```
/*function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      var sel1 = document.getElementById("select1");
      var selectedI = sel1.selectedIndex;

      var i=0;
      var excode = excur[selectedI];
      var val = sel1.options[selectedI];

      excursioncode=excode;
      excindex = selectedI;
      val.innerHTML = xmlhttp.responseText;
      //alert(xmlhttp.responseText);

      //setTimeout("loadXMLDoc();",10000);
    }
  }

xmlhttp.open("POST","<?php echo SITE_ROOT;?>ajaxphp/ajax_get_seats.php?excode="+excursioncode+"&date="+selected_date,true);
xmlhttp.send();
}

function timedRefresh(timeoutPeriod) {
    tm=setTimeout("loadXMLDoc();",timeoutPeriod);
}
*/ 
```

这是一些正在完成工作的代码。在普通电脑上可以工作，但在移动浏览器上会出现问题。Anyu 的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:13:24.733

如果问题出在 AJAX 上，则不会导致布局问题。相反，问题很可能与您使用 AJAX 检索的数据的实现有关。但是，我无法提供更多见解，因为我不知道您在做什么，也从未遇到过这样的问题。

# documentation - erlide edoc 生成器

> ID：10944492
> 
> 赞同：1
> 
> 时间：2012-06-08T07:11:27.357
> 
> 标签：documentation, erlang, erlide

有谁知道如何在 ErlIde 中添加自动 edoc 功能？

在 java eclipse 中，当我在函数名之前放置 /* 时，可以理解并添加一些 java doc，ErlIde 是否有类似的功能？

提前致谢

`%%%===================================================================`
`%% @spec ${function_name}(${function_parameters})->${function_result}`
`%%`
`%% where`
`%% ${function_parameters}`
`%%`
`%% @doc`
`%%`
`%% @end`
`%%%===================================================================`
我想这种东西会很好

Ps：（对不起，我无法在评论中进行这种格式化，我很新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:40:48.137

从我[在 Erlide 主页上](http://erlide.sourceforge.net/erlide.html)看到的内容来看，包含了一个 EDoc 查看器，但似乎不支持自动生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:43:55.997

我们还没有这个功能。您希望生成的 edoc 中有哪些默认内容？

# binding - KnockoutJs 光标位置丢失父点击事件

> ID：10944494
> 
> 赞同：1
> 
> 时间：2012-06-08T07:11:31.713
> 
> 标签：binding, click, knockout.js, lost-focus

**带有点击事件的嵌套 div。**

我有几个嵌套的 div，它们绑定到我使用 knockoutjs 绑定的公共 viewModel 对象。父 div 和子 div 有几个绑定，包括父上的单击事件。父 div click 事件是一种选择元素的方式，该元素显示一些默认情况下隐藏的视觉提示。

*绑定代码如下：*

```
<div data-bind="foreach : cardElements">

        <div data-bind="if: isArea(),
                attr: { id : ElementName },
                visible: isArea(),
                click : selectElement.bind($data),
                css : { layoutContainer : isEditMode() && isSelected(),
                        drag: isEditMode(),
                        selectedElement : isSelected() && isEditMode() },
                style : defaultStyle()">

 ... visuals elided for clarity(hidden by default viewable when parent is selected)

        @* Regular display fields. *@
        <div data-bind="if: isInput(),
                    attr : { contenteditable : isEditMode() },
                    visible : isInput(),
                    css: { layoutDiv :  isEditMode() },
                    style: { cursor : 'text' },
                    text: Value">
        </div>

 ... visuals elided for clarity

    </div>
</div> 
```

**点击事件后的焦点问题。**

按住鼠标按钮会显示在 contenteditable div 中显示的光标（文本光标），它应该在单击后结束。释放后，焦点丢失并且光标消失（我也尝试使用输入元素并出现同样的问题）。这个想法是 mousedown/click 应该将光标放在输入文本的所需位置。

**移除父点击事件**

删除父级上的单击事件表明，如果没有它，contenteditable div 内的选择将按预期工作，并且单击后可以正常继续键入。但是，没有设置视觉提示，这当然是 click 事件处理程序的主要工作！

有谁知道为什么在点击事件期间失去焦点？

**也许一个 hack 可以工作** 一个我还没有尝试过的 hack 是根据 div 本身顶部的光标位置将焦点设置在 contenteditable div 上。这似乎不是一个微不足道的黑客，我也不知道它甚至可能。

对此主题的任何帮助将不胜感激。

**也许越来越近**

我可以通过做一些回归测试来缩小范围。如果我从父 div 中删除 css 样式，它似乎像往常一样单击。

删除了以下内容：

```
 css : { layoutContainer : isEditMode() && isSelected(),
                        drag: isEditMode(),
                        selectedElement : isSelected() && isEditMode() }, 
```

这仍然给我留下了不完整的行为。

**可以吗？**

似乎当添加父类时，焦点从 contenteditable div 中丢失了。

这是使用的更多代码。
... // 映射函数。

```
this.isSelected = ko.dependentObservable(function () {
    return (this === viewModel.selectedCardElement());
}, this);

this.selectElement = function (element, evt) {
     viewModel.selectedCardElement(element);
}, 
```

selectElement是被**调用**的函数，注意**isSelected**是一个dependentObservable，附加到模板中绑定的卡片元素。在我看来，一旦**viewModel.selectedCardElement**设置插入符号位置焦点并在视图中丢失。

# ruby-on-rails-3 - 保护特定的 /assets 文件免受路由中的直接访问或以其他方式？

> ID：10944496
> 
> 赞同：0
> 
> 时间：2012-06-08T07:11:36.173
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, assets

保护特定的 /assets 文件免受路由中的直接访问或以其他方式？

我的资产里面有fronted.css 和backend.css 这个后端css 文件我会禁用从URL 的直接访问，所以它只能从我的backend_controller.rb 内部加载。

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:58:16.453

在生产中，Rails 不控制资产，这适用于网络服务器。您只能通过从网站的公共部分中排除来隐藏它们。

您可以为前端和后端使用不同的布局，或者为自定义操作注入一些数据。

排版方式：

1.  在 backend_controller.rb 中：

    ```
    class BackendController...
      layout 'backend' #you can use :only or :except parameter if you need
      ...
    end 
    ```

2.  在 /your_app/app/assets/stylesheets 创建 backend.css 和文件夹 'backend'，将所有后端样式表移动到 'backend' 文件夹中，然后在 backend.css 中插入：

    ```
    /*
     *= require_self
     *= require_tree ./backend
    */ 
    ```

3.  在 /your_app/app/views/layouts 文件 backend.html.erb 中创建。这是您的后端布局。插入那里`<%= stylesheet_link_tag "backend" %>`

4.  不要忘记从 /your_app/app/assets/application.css 行中删除`*= require_tree .`（此指令是递归的，包括 /your_app/app/assets/stylesheets 中的所有文件和你的 backend.css ）。如果您需要一些文件或目录，请使用`*= require file_name_without_extension`或`*= require_tree ./directory_name`

注入方式：

1.  在 /your_app/app/views/layouts/application.html.erb

    ```
    <!DOCTYPE html>
    <html>
      <head>
        <%= stylesheet_link_tag    "application", :media => "all" %>
        ...
        <%= yield :my_custom_css %>
      </head>
      ... 
    ```

2.  在任何文件中，您都需要自定义样式表（例如 /your_app/app/views/categories/new.html.erb）：

    ```
    <% content_for :my_custom_css do %>
      <%= stylesheet_link_tag 'backend' %>
    <% end %> 
    ```

3.  并`*= require_tree .`从 /your_app/app/assets/application.css 中删除，否则您的自定义 css 文件将包含在应用程序布局中

[content_for 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)

# backbone.js - 主干中的集群渲染

> ID：10944501
> 
> 赞同：0
> 
> 时间：2012-06-08T07:12:09.227
> 
> 标签：backbone.js

我有一个包含 20 个项目的集合。现在我可以将它们全部渲染（这很容易），但我想要将它们分组。以使用此代码的正常渲染方式

```
this.collection.each(function(model){
    this.view(model)
}); 
```

结果会是这样

```
<ul><li>Item1</li><li>Item2</li></ul> 
```

我想做的是这种格式。

```
<div>
  <ul>
    <li>
      <div>
         <a>Item1</a>
         <a>Item1</a>
         <a>Item1</a>
         <a>Item1</a>
      </div>
    </li>

    <li>
      <div>
         <a>Item1</a>
         <a>Item1</a>
         <a>Item1</a>
         <a>Item1</a>
      </div>
    </li>
  </ul>
</div> 
```

我已经有了对它们进行分组的代码，所以不用担心我不太了解如何将其渲染为所需的输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:44:02.230

我认为您需要提供更多信息才能回答此问题。这实际上取决于您的分组代码以及您需要如何处理结果输出。

根据您使用的模板模块，您可以使用智能模板在一个视图中完成所有操作，但我更倾向于认为每个列表项至少需要另一个视图。这是否为每个模型呈现视图我不确定您提供的信息。

# c++ - 从偏移量中删除数组

> ID：10944506
> 
> 赞同：2
> 
> 时间：2012-06-08T07:12:26.830
> 
> 标签：c++, delete-operator

假设我分配了一个整数数组

```
int test[] = new int[100]; 
```

我把指针指向中间的某个地方

```
int *temp = &test[50]; 
```

然后我在 temp 上调用 delete[]

```
delete[] temp 
```

在这种情况下，编译器如何知道要删除的元素的大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T07:13:30.630

它不会（或者会，我不知道）。您正在调用**未定义的行为**。您只能调用`delete[]`分配给`new[]`.

例如，我在 MSVS 中遇到了崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:14:16.010

您*必须*传递由 返回的相同内存位置`new[]`，传递其他任何内容都是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:15:27.323

你不能这样做。编译器必须跟踪它分配的内存大小。该标准没有说明它必须如何做到这一点。一些编译器在返回地址之前存储分配内存的大小。在这种情况下，您正在做的事情可能会导致未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T07:17:04.687

答案是不。因为delete操作需要定位内存块的位置和它的大小，这主要是在分配数组的第一个成员之前。你应该看看“Inside c++ object model”

# c# - WebClient 调用在 WinXP 中有效，但在 Win7 中无效

> ID：10944507
> 
> 赞同：0
> 
> 时间：2012-06-08T07:12:33.953
> 
> 标签：c#, .net, windows-7, bluesnap

以下调用在 WinXP 中返回结果，但在 Win7 中不返回：

```
 using (WebClient client = new WebClient())
            {
                var result = client.DownloadString("https://secure.plimus.com/jsp/validateKey.jsp");
            } 
```

我得到“System.Net.WebException：操作已超时”异常

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:14:20.287

您应该尝试查看 System.Net 跟踪是否可以为您提供有关连接尝试的更多信息，

[http://blogs.msdn.com/b/asiatech/archive/2009/04/08/using-system-net-trace-to-troubleshooting-ssl-problem-in-net-2-0-application.aspx](http://blogs.msdn.com/b/asiatech/archive/2009/04/08/using-system-net-trace-to-troubleshooting-ssl-problem-in-net-2-0-application.aspx)

更好地从 Windows XP 和 Windows 7 收集跟踪文件。比较它们，您将看到原因。

# java - 连接到 WSDL URL 会引发 MalformedURLException: no protocol

> ID：10944512
> 
> 赞同：0
> 
> 时间：2012-06-08T07:12:45.900
> 
> 标签：java, web-services, wsdl, cxf

我们有一个在 Web 服务器上运行的 Web 服务。一个 Web 应用程序（当前在 localhost 上运行）尝试访问它。我可以在浏览器中调用该位置，它会显示 WSDL，以便 Web 服务正常工作。此外，如果我针对在本地主机上运行的相同服务运行 Web 应用程序，它将起作用。

但是，如果我尝试连接到远程 Web 服务，它会给我一个

`java.net.MalformedURLException: no protocol: <URL here>`

它将由 wsdl2java 生成的 Service 类包装成

```
Can not initialize the default wsdl from <web service location here> 
```

是的，该 URL 确实有效。它在那里并且正在运行...

什么可能导致这种情况？我是否需要在远程 Web 服务服务器上设置权限或打开端口？（我们将 CXF 用于 Web 服务）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:53:44.790

感谢[Thihara](https://stackoverflow.com/users/272451/thihara)，我发现了问题：访问我使用的本地wsdl服务时

```
"http://localhost/pathToWsdl" 
```

但是当尝试访问我使用的远程 wsdl

```
"ip.add.res.s/pathToWsdl" 
```

所以显然后者没有协议，因此是例外。

# excel - Excel 公式未在运行时执行，选择并双击特定单元格

> ID：10944519
> 
> 赞同：0
> 
> 时间：2012-06-08T07:13:16.017
> 
> 标签：excel, spreadsheet

我的情况是，我有一张 Excel 表格。在单元格 A2 的同一张表上，我通过代码和单元格 B2 插入数据，在将数据插入单元格 A2 之前，我已经手动放置了数据，在单元格 C2 中，我编写了公式 =EXACT(A2,B2)。

现在当我运行代码时，代码将值放在单元格 A2 中，状态应该根据给定的条件和两个单元格上的数据而改变。但它不会根据单元格 C2 中的公式更改状态，并且当我双击该特定单元格并输入条件时，状态会更改。请告诉我如何在不双击特定单元格的情况下实现？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T12:29:10.827

**如果打开自动计算**（Excel 选项-> 公式-> 计算选项），这将有效（我已经测试过）。

这是代码（我使用的是 A1、B1、C1）：

```
Private Sub CommandButton1_Click()
  Cells(1, 1).Value = 2
End Sub 
```

# facebook - Facebook 注册插件请求在时间轴上发布的权限

> ID：10944524
> 
> 赞同：0
> 
> 时间：2012-06-08T07:14:05.403
> 
> 标签：facebook, xfbml, facebook-javascript-sdk

我正在使用 FB 注册插件来注册用户（因为我希望每个用户都有一个唯一的 mysite_username）但是这不允许我访问在用户时间轴上发布的权限，例如 FB 登录按钮。
我想知道一些标准技术来“连接”我的用户与他们的 Facebook 时间线，以便他们可以选择将他们在我的网站上获得的成就发布到他们的 Facebook 时间线！

类似于[FBML Promt 权限](https://developers.facebook.com/docs/reference/fbml/prompt-permission/ "FBML 提示权限")的东西，但它已被弃用，所以我不太确定使用它。但这样的事情肯定会有所帮助！

很高兴接受最合适的答案！阿迪特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:19:49.227

只需使用 JavaScript SDK 中的 FB.login，并在范围参数中指定所需的权限。

# jquery - JQuery UI 日期选择器短月

> ID：10944525
> 
> 赞同：1
> 
> 时间：2012-06-08T07:14:14.613
> 
> 标签：jquery, jquery-ui

我第一次使用jqueryUI datepicker，我正在显示日历

```
<div id="datepicker"></div> 
```

现在我试图在标题中只显示一个短暂的月份“十月、十一月等”，但它不起作用，任何想法我都缺少什么。

```
$("#datepicker").datepicker(
            {
                numberOfMonths: [3, 1],
                firstDay: 1,
                dateFormat: "d/mm/yy",
                monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                                  "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                onSelect: function (dateText, inst) {
                    navigatedate(dateText, inst);

                }
            }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-19T17:19:49.477

您可以在短月份使用 alt 格式“M”。

```
$("#datepicker").datepicker({
    numberOfMonths: [3, 1],
    firstDay: 1,
    dateFormat: "d/M/yy",
    onSelect: function (dateText, inst) {
        navigatedate(dateText, inst);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:09:45.417

来自[评论](https://stackoverflow.com/questions/10944525/jquery-ui-datepicker-short-month#comment14282992_10944525)

> 这有效

```
$("#datepicker").datepicker({
    numberOfMonths: [3, 1],
    firstDay: 1,
    dateFormat: "d/mm/yy",
    monthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                 "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    onSelect: function (dateText, inst) {
        navigatedate(dateText, inst);
    }
}); 
```

# javascript - javascript facebook login OPERA 和 SAFARI 不工作

> ID：10944536
> 
> 赞同：2
> 
> 时间：2012-06-08T07:15:09.210
> 
> 标签：javascript, facebook, sdk, safari, opera

我的网站中有这段代码，但是当我尝试在 apps.facebook.com/xyz 下登录时，它不起作用 - 最近的 Opera 弹出窗口，但在最近的 Safari 中保持空白（空白弹出窗口保持打开状态）并关闭弹出窗口并刷新页面，但它不会让我登录到我的应用程序：

```
<script type="text/javascript">
window.fbAsyncInit = function() 
{
    if ($.browser.opera) //kvoli opere
    {   

    FB.init({
      appId      : '123', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      channelUrl : 'https://www.sss.tld/channel.html'
    });
    FB.XD._transport="postmessage";
    FB.XD.PostMessage.init();

    }
    else
    {   
    FB.init({
      appId      : '123', // App ID
      status     : true, // check login status
      cookie     : true // enable cookies to allow the server to access the session
    });
    }

  // Additional initialization code here
};

// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));

function loginJSokno() {      
 FB.login(function(response) { 
   // handle the response
   location.reload(true); //po prihlaseni si refreshneme page

 }, {scope: 'publish_stream,email,offline_access,create_event'});

}
</script> 
```

这有什么问题？

PS for safari 看起来像 iframe 第三方 cookie 问题，但如何解决？我试过但没有运气。对于歌剧，我不知道有什么问题

# php - php preg 在长字符串中多次替换相同的字符串

> ID：10944542
> 
> 赞同：2
> 
> 时间：2012-06-08T07:15:29.007
> 
> 标签：php, preg-replace, match

我有一长串

```
$str = "#10:19.out.#7:970.in.#8:19.out.#7:3128.in.#10:101.out.#7:3131.in.#15:19.out.#7:170917.in.#10:4517.out.#7:170909.in.#12:17593" 
```

如果我使用模式

```
$pattern = "/out\..*in/"
$replacement = "";
$path = preg_replace($pattern, $replacement, $str); 
```

然后输出是`#10:19..#12:17593`

这是我的模式中最长的匹配。

我想替换字符串中的每个匹配项，并得到类似的结果

```
#10:19.#8:19.#10:101.#15:19.#10:4517.#12:17593 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:18:57.927

使量词不贪婪。紧跟`?`在`*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:28:25.350

```
$str = "#10:19.out.#7:970.in.#8:19.out.#7:3128.in.#10:101.out.#7:3131.in.#15:19.out.#7:170917.in.#10:4517.out.#7:170909.in.#12:17593";

$pattern = "/out\..*?in./";
$replacement = "";
$path = preg_replace($pattern, $replacement, $str); 
```

# java - maven插件安装：安装文件错误

> ID：10944543
> 
> 赞同：3
> 
> 时间：2012-06-08T07:15:33.100
> 
> 标签：java, maven

我使用 install:install-file 将 jar 安装到我的本地存储库。我的 pom.xml 编写如下：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-install-plugin</artifactId>
<version>2.3.1</version>
<executions>
    <execution>
    <id>install-paho</id>
    <phase>generate-resources</phase>
    <goals>
        <goal>install-file</goal>
    </goals>
    <configuration>
        <file>${basedir}/lib/paho.jar</file>
        <groupId>org.eclipse</groupId>
        <artifactId>paho</artifactId>
        <version>1.0.0</version>
        <packaging>jar</packaging>
    </configuration>
    </execution>
</executions>
</plugin> 
```

你可以发现我将它绑定到阶段'generate-resources'。然后，我使用 order 。`mvn eclipse:eclipse`它工作得很好，jar 被复制到我的本地存储库。但是当我使用 order 时，`mvn install:install-file`我得到了错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.3.1:install-file (default-cli) on project xxx: 
The parameters 'file' for goal org.apache.maven.plugins:maven-install-plugin:2.3.1:install-file are missing or invalid -> [Help 1] 
```

使用时的错误信息`mvn compile`

```
[ERROR] Failed to execute goal on project android-engine: Could not resolve dependencies    for project com.youku.wireless:android-engine:jar:1.0-SNAPSHOT: Could not find artifact org.eclipse:paho:jar:1.0.0 in spring-milestone (http://maven.springframework.org/milestone) ->   [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1]     http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T09:25:16.057

由于您已将目标绑定`install:install-file`到`generate-sources`阶段，因此您应该运行`mvn compile`或`mvn install`使用定义的配置。

`mvn eclipse:eclipse`之所以有效，是因为 Maven 在`generate-sources`调用`eclipse:eclipse`.

**编辑：** 从评论看来，您希望`paho.jar`通过首先将其安装到`generate-sources`阶段中的本地存储库，然后将其用作项目中的项目来使用项目中的本地可用`dependency`。

这是行不通的，因为 maven`dependencies`在开始执行其生命周期目标之前会检查可用性。

`mvn install:install-file`您可以在 pom 的上下文之外使用一次性手动安装它。更好的是，您可以将它部署到 a`repository manager`然后像任何其他依赖项一样访问它。

但是，如果您仍想走这条路，另一种方法是使用`system`提供 jar 路径的范围来指定依赖项。参考[这个](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)。

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>org.eclipse</groupId>
      <artifactId>paho</artifactId>
      <version>1.0.0/version>
      <scope>system</scope>
      <systemPath>${basedir}/lib/paho.jar</systemPath>
    </dependency>
  </dependencies>
  ...
</project> 
```

# ios - 内存警告后在 iOS 上运行 OpenGL 崩溃

> ID：10944551
> 
> 赞同：0
> 
> 时间：2012-06-08T07:16:24.860
> 
> 标签：ios, memory, opengl-es, crash

我在使用带有 OpenGL 组件的应用程序在 iPad 上崩溃时遇到问题。该应用程序会引发内存警告并崩溃，但它似乎并没有使用那么多内存。我错过了什么吗？

该应用程序基于 Vuforia 增强现实系统（大量借鉴 ImageTargets 示例）。我需要在我的应用程序中包含大约 40 个不同的模型，因此为了节省内存，我会根据需要在应用程序中动态加载对象（和渲染纹理等）。我试图复制 UIScrollView 延迟加载的想法。三个 4mb 的分配是我已经加载到内存中的纹理，当用户选择不同的模型来显示时。

这里有什么奇怪的吗？

![仪器 - 泄漏](../Images/a731bce68f6325c2c9b87c1fe8a57edb.png)

我对 OpenGL 了解不多（我选择 Vurforia 引擎的部分原因）。下面这个屏幕截图中的任何内容都应该与我有关吗？请注意，Vurforia 的 ImageTagets 示例应用程序也有未初始化的纹理数据（每帧大约一个），所以我认为这不是问题所在。

![仪器 - OpenGL ES 分析器](../Images/0558a3586e3428b7318f4a7eb6734913.png)

任何帮助，将不胜感激！！

这是生成 3D 对象的代码（在 EAGLView 中）：

```
// Load the textures for use by OpenGL
-(void)loadATexture:(int)texNumber {

if (texNumber >= 0 && texNumber < [tempTextureList count]) {
    currentlyChangingTextures = YES;

    [textureList removeAllObjects];
    [textureList addObject:[tempTextureList objectAtIndex:texNumber]];

    Texture *tex = [[Texture alloc] init];
    NSString *file = [textureList objectAtIndex:0];

    [tex loadImage:file];

    [textures replaceObjectAtIndex:texNumber withObject:tex];
    [tex release];

    // Remove all old textures outside of the one we're interested in and the two on either side of the picker.
    for (int i = 0; i < [textures count]; ++i) {

        if (i < targetIndex - 1 || i > targetIndex + 1) {
            [textures replaceObjectAtIndex:i withObject:@""];
        }
    }

    // Render - Generate the OpenGL texture objects
    GLuint nID;
    Texture *texture = [textures objectAtIndex:texNumber];
    glGenTextures(1, &nID);
    [texture setTextureID: nID];
    glBindTexture(GL_TEXTURE_2D, nID);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, [texture width], [texture height], 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid*)[texture pngData]);

    // Set up objects using the above textures.
    Object3D *obj3D = [[Object3D alloc] init];

    obj3D.numVertices = rugNumVerts;
    obj3D.vertices = rugVerts;
    obj3D.normals = rugNormals;
    obj3D.texCoords = rugTexCoords;

    obj3D.texture = [textures objectAtIndex:texNumber];

    [objects3D replaceObjectAtIndex:texNumber withObject:obj3D];
    [obj3D release];

    // Remove all objects except the one currently visible and the ones on either side of the picker.
    for (int i = 0; i < [tempTextureList count]; ++i) {

        if (i < targetIndex - 1 || i > targetIndex + 1) {
            Object3D *obj3D = [[Object3D alloc] init];
            [objects3D replaceObjectAtIndex:i withObject:obj3D];
            [obj3D release];
        }
    }

    if (QCAR::GL_20 & qUtils.QCARFlags) {
        [self initShaders];
    }

    currentlyChangingTextures = NO;
} 
```

}

这是纹理对象中的代码。

```
- (id)init
{
self = [super init];
pngData = NULL;

return self;
}

- (BOOL)loadImage:(NSString*)filename
{
BOOL ret = NO;

// Build the full path of the image file
NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
NSString* fullPath = [resourcePath stringByAppendingPathComponent:filename];

// Create a UIImage with the contents of the file
UIImage* uiImage = [UIImage imageWithContentsOfFile:fullPath];

if (uiImage) {
    // Get the inner CGImage from the UIImage wrapper
    CGImageRef cgImage = uiImage.CGImage;

    // Get the image size
    width = CGImageGetWidth(cgImage);
    height = CGImageGetHeight(cgImage);

    // Record the number of channels
    channels = CGImageGetBitsPerPixel(cgImage)/CGImageGetBitsPerComponent(cgImage);

    // Generate a CFData object from the CGImage object (a CFData object represents an area of memory)
    CFDataRef imageData = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));

    // Copy the image data for use by Open GL
    ret = [self copyImageDataForOpenGL: imageData];
    CFRelease(imageData);
}

return ret;
}

- (void)dealloc
{
if (pngData) {
    delete[] pngData;
}

[super dealloc];
}

@end

@implementation Texture (TexturePrivateMethods)

- (BOOL)copyImageDataForOpenGL:(CFDataRef)imageData
{    
if (pngData) {
    delete[] pngData;
}

pngData = new unsigned char[width * height * channels];
const int rowSize = width * channels;
const unsigned char* pixels = (unsigned char*)CFDataGetBytePtr(imageData);

// Copy the row data from bottom to top
for (int i = 0; i < height; ++i) {
    memcpy(pngData + rowSize * i, pixels + rowSize * (height - 1 - i), width * channels);
}

return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:49:37.187

奇怪的是，您没有看到应用程序的真实内存使用情况。正如我在[这个答案](https://stackoverflow.com/questions/5518918/instruments-with-ios-why-does-memory-monitor-disagree-with-allocations/5627221#5627221)中解释的那样，Allocations 工具对 OpenGL ES 隐藏了内存使用情况，因此您不能使用它来测量应用程序的大小。相反，请使用 Memory Monitor 工具，我打赌它会显示您的应用程序使用的 RAM 比您想象的要多得多。这是人们在尝试使用 Instruments 在 iOS 上优化 OpenGL ES 时遇到的常见问题。

如果您担心哪些对象或资源可能会在内存中累积，您可以使用 Allocations 工具的堆快照功能来识别在应用程序中执行重复任务时已分配但从未删除的特定资源。这就是我追踪未正确删除的纹理和其他项目的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:44:09.423

看到一些代码会有所帮助，但我可以做一些猜测：

> 我需要在我的应用程序中包含大约 40 个不同的模型，因此为了节省内存，我会根据需要在应用程序中动态加载对象（和渲染纹理等）。我试图复制 UIScrollView 延迟加载的想法。三个 4mb 的分配是我已经加载到内存中的纹理，当用户选择不同的模型来显示时。(...)

这种做法并不理想；如果内存没有正确释放，这很可能是您的问题的原因。最终，如果您不采取适当的预防措施，您将耗尽内存，然后您的进程就会终止。使用的引擎很可能有一些内存泄漏，由您的访问方案暴露。

今天的操作系统不区分 RAM 和存储。对他们来说，这只是内存，所有地址空间都由块存储系统支持（如果实际上连接了一些存储设备并不重要）。

所以这就是你应该做的：而不是将你的模型*读*入内存，你应该对它们进行内存映射（mmap）。这告诉操作系统“这部分存储应该在地址空间中可见”并且操作系统内核将在它们到期时执行所有必要的传输。

> 请注意，Vurforia 的 ImageTagets 示例应用程序也有未初始化的纹理数据（每帧大约一个），所以我认为这不是问题所在。

这是一个强有力的指标，表明 OpenGL 纹理对象没有被正确删除。

> 任何帮助，将不胜感激！！

我的建议：停止像 1970 年代那样编程。今天的计算机和操作系统的工作方式不同。另见[http://www.varnish-cache.org/trac/wiki/ArchitectNotes](http://www.varnish-cache.org/trac/wiki/ArchitectNotes)

# clojure - Clojure 中的慢速“快速排序”

> ID：10944554
> 
> 赞同：1
> 
> 时间：2012-06-08T07:16:37.980
> 
> 标签：clojure, quicksort

我在 clojure 中写了一个快速排序函数，但运行速度非常慢。有时，如果输入集合变得更大，它甚至可能会溢出堆栈？

我的代码有什么问题吗？

```
(defn qsort [coll]
  (if (<= (count coll) 1)
    coll
    (let [pivot (last coll)
          head-half (filter #(< % pivot) (drop-last coll))
          tail-half (filter #(>= % pivot) (drop-last coll))]
      (concat (qsort head-half) (vector pivot) (qsort tail-half))))) 
```

我还阅读了 clojure.core 中的排序功能，但它让人感到困惑。

```
01 (defn sort
02   "Returns a sorted sequence of the items in coll. If no comparator is
03   supplied, uses compare. comparator must
04   implement java.util.Comparator."
05   {:added "1.0"
06    :static true}
07   ([coll]
08    (sort compare coll))
09   ([^java.util.Comparator comp coll]
10    (if (seq coll)
11      (let [a (to-array coll)]
12        (. java.util.Arrays (sort a comp))
13        (seq a))
14      ()))) 
```

递归发生的唯一地方是第 12 行。它只是交换两个输入参数！你能解释一下为什么这段代码会运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:27:40.387

`(. java.util.Arrays (sort a comp))`此调用是对数组排序函数的调用，而不是对 clojure.core 排序函数的递归调用。

您的代码很慢，因为快速排序是`imperative algorithm`基于命令式编程的概念，例如就地数组突变。您的代码很好，但问题是它多次遍历集合，并且创建了许多中间集合。

您可以使用数组和就地数组突变来快速进行快速排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:29:32.660

Clojure 的排序功能只是在内部使用了 Java 的标准 java.util.Arrays/sort 方法；它不是 100% 的 clojure 实现。

Quicksort 对于惯用的 clojure 来说并不是一个很好的匹配，因为它依赖于具有快速 O(1) 元素交换的集合类型。另请注意，在您的实现中，您正在执行 (last coll) 和 (count coll) 每次调用，其中 coll 是一个惰性序列，因此两者都是 O(n) - 您应该能够通过采用它来提高性能考虑到 ~ 可能是通过使用 java Array 而不是不可变的 seq 作为中间集合类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:30:03.057

堆栈溢出的问题是您将惰性过滤器递归地放在过滤器上。这在这里解释得很好：

[递归函数导致堆栈溢出](https://stackoverflow.com/questions/2946764/recursive-function-causing-a-stack-overflow)

关于您的另一个问题：在第 12 行，这不是对 clojure 排序函数的调用，而是对数组排序函数的调用。在用户代码中，您通常会编写`(java.util.Arrays/sort a comp)`而不是点语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T07:31:44.787

您的 qsort 可能大部分时间都在分配对象。

*   对过滤器的调用为每次传递的每个数字分配一个惰性缺点实例
*   对连接的调用为每个数字分配另一个对象

虽然我认为你的版本读起来更好

# ruby - m.one + m.two + m.three 不起作用

> ID：10944555
> 
> 赞同：0
> 
> 时间：2012-06-08T07:16:43.923
> 
> 标签：ruby, return, null

这是我的代码：

```
class Person
  def initialize(first_name, last_name, age)
    @first_name = first_name
    @last_name = last_name
    @age = age
  end

  def first_name
    puts @first_name
  end

  def last_name
    puts @last_name
  end

  def age
    puts @age
  end
end

class Musician < Person
  def initialize(first_name, last_name, age, instrument)
    @first_name = first_name
    @last_name = last_name
    @age = age
    @instrument = instrument
  end

  def instrument
    puts @instrument
  end
end 
```

然后当我尝试执行以下操作时：

```
m = Musician.new("George", "Harrison", 58, "guitar")
m.first_name + " " + m.last_name + ": " + m.age.to_s 
```

我收到一个错误：

> 在`<main>': undefined method`+' 中表示 nil:NilClass (NoMethodError)

为什么我不能只连接对象方法的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:23:52.383

你所有的方法都返回 nil 而不是你想要的值，也就是说，“puts”返回 nil。只需消除“看跌”，然后再试一次

# jquery - jquery 将数组发布到 php

> ID：10944559
> 
> 赞同：0
> 
> 时间：2012-06-08T07:16:56.160
> 
> 标签：jquery, arrays

我试图用 jquery 和 ajax 发布 2 个数组。这是我的 2 个数组： myArray1[id] ， myArray2[id] （id 可以从 0 到变量 Num-1 取值）所以例如我可以使用像这样的简单 For 循环访问它们

```
for(id=0; id<Num; id++){
 console.log(myArray1[id]);
 console.log(myArray2[id]);
  } 
```

当我触发一个事件以将这两个表的所有内容与 ajax 发布到 php 时，是否有可能？如果没有表而只有变量（myArray1 和 myArray2），我会这样做：

```
data : "myArray1ID"+ id + "=" + (myArray1) + "&" +"myArray2ID" + id + "=" + (myArray2) 
```

那么我可以做这样的事情来发布数组，也许是一个 For 循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:18:14.553

```
$.post(
  url, 
  {myArray1ID: myArray1, myArray2ID: myArray2},
  function() {
    // success function
  }
) 
```

如果您的数据块很大，那么尝试制作一个字符串并发送它`{data: YOUR_QUERY_STRING}`

# android - Android：以编程方式启用/禁用相机

> ID：10944562
> 
> 赞同：2
> 
> 时间：2012-06-08T07:17:13.717
> 
> 标签：android, android-camera, android-camera-intent, android-capture

我想在我的应用程序中以编程方式启用/禁用相机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:30:02.263

您无法从常规应用程序执行此操作。您可以从设备管理员处执行此操作，但用户必须明确启用它，并且它仅在 ICS 上可用。这是参考：http: [//developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T03:45:14.377

OP 要求任何想法，我有一个想法，即使不使用 ICS 提供的 API，它也可能工作。

对于低于 ICS 的 API 版本，您可以启动一个服务，该服务将在屏幕打开时锁定相机，并在屏幕关闭时释放它。这是为了尽量减少电池的使用。

由于一次只有一个进程可以使用相机，因此相机应用程序等其他应用程序将无法使用相机。

现在的挑战是如何确保占用相机的服务始终在运行并防止它被用户卸载。

好吧，只是一个想法；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-15T23:22:05.937

是的，您可以使用[DeviceAdministration 类](https://developer.android.com/guide/topics/admin/device-admin.html)并控制摄像头源（阻止和解除阻止）。这是一个带有示例的[仓库。](https://github.com/barneyElDinosaurio/LockCamera)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T11:47:05.543

是的，您可以禁用或启用相机，但您的应用必须启用设备管理员。以下启用或禁用相机：-

```
devicePolicyManager.setCameraDisabled(compName, isCameraOn);

**isCameraOn** is boolean true or false 
```

# objective-c - Dropbox API - 使用 Dropbox 作为服务器

> ID：10944564
> 
> 赞同：3
> 
> 时间：2012-06-08T07:17:19.797
> 
> 标签：objective-c, dropbox, file-sharing, dropbox-api

我想使用文件共享服务器来使某些文件在多台计算机上的应用程序的多个实例中保持最新和恒定 - 例如（例如）编写多人游戏，它将所有玩家的位置存储在文本文件中, 并使用 Dropbox 之类的东西在所有应用程序中保持文本文件不变，每个应用程序实例都可以使用该应用程序的播放器位置更改文件，然后其余应用程序可以相应地更新。这只是一个例子，并不是我打算使用这项技术做的事情。我想要做的并不依赖于非常快速地快速共享数据——而只是定期下载和更新文本文件。

我想知道如何在不提示用户输入任何 Dropbox 用户名/密码的情况下使用 Objective-C 的 Dropbox API 来做到这一点 - 只需存储单个 Dropbox 帐户的登录信息，自动登录并更新/下载存储的文件在上面？

根据我从实验中发现，Dropbox 通过网络浏览器提示用户输入密码，并且旨在容纳多个帐户，而我只需要容纳“服务器”帐户。

那么，有没有使用 Dropbox API 来做这种事情，或者我应该使用其他东西。还是我需要了解如何编写自己的服务器。使用某种文件共享 API 对我来说似乎比编写一个实际的服务器要容易得多。

谢谢你的帮助，

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:15:02.213

您可能会考虑使用 Google App Engine (GAE)。我最近有类似的要求，我认为当您想要集中数据时这是一个不错的选择。另外，您可以使用自己的自定义身份验证进行无浏览器帐户登录，或者我认为甚至可以通过 OAuth？取决于我猜数据的敏感程度。我刚刚推出了自己的。

根据我的研究，我发现使用 Dropbox 作为服务器在可扩展性方面存在一些问题，因为您每天最多只能进行 5,000 次调用。 [source](http://forums.dropbox.com/topic.php?id=48876) 它是基于 Amazon S3 构建的，因此您也可以直接使用它。

GAE 提升上限为 675,000，但可以免费增加到 9100 万。 [https://developers.google.com/appengine/docs/quotas](https://developers.google.com/appengine/docs/quotas)

[我确实找到了一个使用 Java 执行此](http://www.vosao.org/)操作的开源项目，或者您可以查看[Python 示例](https://stackoverflow.com/questions/6711382/google-appengine-custom-authentication?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:11:51.880

我个人不是 iOS 开发人员，但我在寻找其他东西时遇到了这个问题，并认为我会为 OP 的问题提供另一个潜在的解决方案。

微软刚刚发布了一个名为 Azure 移动服务的东西，它支持 iOS 开发（以及其他平台）。这基本上是一种方便的方式来设置一个后端系统，包括推送通知、身份验证等，而无需自己动手。您无需了解有关 Azure 或服务器的任何信息，因为设置过程将引导您完成大部分工作。它是新的，所以请记住这一点，但在这种情况下它看起来很有希望。

这是一个 10 分钟的视频，解释了如何将它与 iOS 开发的应用程序一起使用，以及更多文档的链接： http: [//channel9.msdn.com/posts/iOS-Support-in-Windows-Azure-Mobile-Services/](http://channel9.msdn.com/posts/iOS-Support-in-Windows-Azure-Mobile-Services/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:29:18.920

我编写了一个守护进程，它不断检查更新的文件并同步它们。我为我自己的文件管理器 iOS 应用程序编写了它。你可以在这里找到实现：

[https://github.com/H2CO3/MyFile/tree/master/DropboxDaemon](https://github.com/H2CO3/MyFile/tree/master/DropboxDaemon)

# java - PHP/Java 桥 UnsupportedClassVersionError

> ID：10944568
> 
> 赞同：1
> 
> 时间：2012-06-08T07:17:38.197
> 
> 标签：java, tomcat, php-java-bridge

我需要在 php 上运行一些 java 代码所以我发现了这个

```
http://php-java-bridge.sourceforge.net/pjb/index.php 
```

所以我下载了 tomcat 并将 JavaBridge.war 放在 webapps 目录中，我得到了示例工作（我花了一段时间才弄清楚）

我什至可以加载内置的 java 内容`Java("java.lang.System")` 并使用我自己的 PHP 代码运行示例 jar。

我不能做的是制作自己的 jar 并运行它我尝试了各种不同的编译器（Eclipse、Netbeans、命令行），但这并没有帮助。

我正在尝试做这样的事情[http://www.developer.com/java/other/php-with-java-using-php-java-bridge-tutorial.html](http://www.developer.com/java/other/php-with-java-using-php-java-bridge-tutorial.html)

这是我的java代码：

```
package m1sk;

/**
 *
 * @author M1sk
 */
public class Hello implements java.io.Serializable{

    String hi() {return "This is my hello message";}
    String hello(String name) {return "Hello" + name;}
} 
```

php代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        require_once ("java/Java.inc");
    //  $t1 = new Java("java.lang.System"); 
    //echo $t1->getProperties(); //this works
        $world = new java("m1sk.Hello");
      //  echo $world->hi();
      echo "Hello Working Thingy\n\n";
        ?>
    </body>
</html> 
```

我将 jar 放在 ...\tomcat\webapps\JavaBridge\WEB-INF\lib 中，将 php 文件放在 ...\tomcat\webapps\JavaBridge

我在测试时收到以下错误`http://localhost:8080/JavaBridge/mytest.php`：

```
javax.servlet.ServletException: java.lang.RuntimeException: PHP Fatal error:  Uncaught [[o:Exception]:"java.lang.Exception: CreateInstance failed: new m1sk.Hello. Cause: java.lang.UnsupportedClassVersionError: Bad version number in .class file (unable to load class m1sk.Hello) VM: 1.5.0_20@http://java.sun.com/" at:
#-13 org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1854)
#-12 org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:890)
#-11 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1354)
#-10 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
#-9 java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
#-8 java.lang.Class.forName0(Native Method)
#-7 java.lang.Class.forName(Class.java:242)
#-6 php.java.bridge.Util.classForName(Util.java:1518)
#-5 php.java.bridge.JavaBridge.CreateObject(JavaBridge.java:445)
#-4 php.java.bridge.Request.handleRequest(Request.java:458)
#-3 php.java.bridge.Request.handleRequests(Request.java:500)
#-2 php.java.bridge.http.C in C:\xampp\tomcat\webapps\JavaBridge\java\Java.inc on line 195

    php.java.servlet.fastcgi.FastCGIServlet.handle(FastCGIServlet.java:499)
    php.java.servlet.fastcgi.FastCGIServlet.doGet(FastCGIServlet.java:521)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    php.java.servlet.PhpCGIFilter.doFilter(PhpCGIFilter.java:126) 
```

我在堆栈中搜索发现我的错误： [UnsupportedClassVersionError 的原因是什么？](https://stackoverflow.com/questions/6066103/what-is-the-reason-for-unsupportedclassversionerror)

```
C:\Users\M1sk\Desktop>java -version
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b22)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode)

C:\Users\M1sk\Desktop>javac -version
javac 1.6.0_25 
```

版本不同，但这应该仍然有效，所以我不相信这是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:32:21.827

原因`UnsupportedClassVersionError`是因为您的类文件是使用更高版本的 JDK（例如 Java 7）编译的，而您的 JRE 是早期版本（例如 Java 6）。

如果您使用的是外部库，那么与您使用的 JRE 相比，外部库很可能是使用更新版本的 Java 编译器编译的。我建议您将 JRE 升级到最新版本。

如果您使用应用程序服务器运行它，请检查您的应用程序服务器是否也在使用最新版本的 JRE。您的环境变量可能指向最新版本的 JRE，但您的应用程序服务器可能不会这样做。

# ejb - @EJB 未注入到 JAX-RS

> ID：10944583
> 
> 赞同：2
> 
> 时间：2012-06-08T07:18:33.827
> 
> 标签：ejb, jax-rs

我`@LocalBean`在一个耳朵的不同包中拥有 s 和 JAX-RS 资源。

而且我在这些资源之前还有一个 ServletFilter 过滤。

我发现这`@EJB`适用于 ServletFilter 但不适用于那些资源。

```
@Stateless
@LocalBean
class MyBean { // in ejb jar
}

@WebFilter(urlPatterns = {"/*"})
class MyFilter implements Filter { // in the same war
    @EJB MyBean myBean; // not null
}

@ApplicationPath("/")
class MyApplication extends Application { // in the same war
}

@Path("/my")
class MyResource { // in the same war
    @EJB MyBean myBean; // null
} 
```

没有特殊的日志，只是 MyResource 方法中的 NPE。有谁能够帮助我？

更新 - - - - - - - - - - - - - - - - - - - - - - - -

使这些资源类`@Stateless`正常工作。

但我只是好奇那些 ejb-jar 和 web-war 组合成一个耳朵。

然后网络战争是一个网络组件，不是吗？

UPDATE2 ------------------------------------------------- -----

哦，对不起。也`MyApplication`有使 MyResource 成为 JAX-RS 资源的原因。

当我部署`ear`GF 时，将其检测为“企业应用程序”。

UPDATE3 ------------------------------------------------- --------------

这是我的application.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
  <display-name>sngp-v0-ear</display-name>
  <module> <!-- EJBs are here -->
    <ejb>sngp-v0-beans-1.0-alpha-1-SNAPSHOT.jar</ejb>
  </module>
  <module>
    <web> <!-- JAX-RS are here -->
      <web-uri>sngp-v0-mobile-resources-1.0-alpha-1-SNAPSHOT.war</web-uri>
      <context-root>/sngp-v0-mobile-resources</context-root>
   </web>
  </module>
  <library-directory>lib</library-directory>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:37:11.877

`MyResource`类既不是 Web 组件也不是企业 bean，但您正试图将 EJB 注入其中。只有当客户端是 Web 组件或另一个企业 bean 时，才能保证 EJB 注入有效。

尝试制作`MyResource` `@Stateless`.

看看这个关于注入的 Java EE 6[教程。](http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html)`EJB`如果您使用的是 NetBeans，我还发现使用内置向导创建 RESTFul Web 服务很有用。以防万一，请查看此[链接](http://netbeans.org/kb/docs/websvc/rest.html)。

# symfony - Symfony2 + Doctrine2 / 从 2 个连接的实体对象构建一个表单

> ID：10944589
> 
> 赞同：3
> 
> 时间：2012-06-08T07:19:10.080
> 
> 标签：symfony, doctrine-orm

是否可以从 2 个连接的实体对象构建表单？

我有两个实体`property`&`propertylanguage`加入了 onetomany 关系。（一个属性可以有多种语言）

语言有 a`title`和`description`分栏。因此，一处房产可以有英文、法文、德文标题。

我正在尝试建立一个表格。见下文。

**控制器：** addProperty.php

```
class AddPropertyController extends Controller
{
    // ....

    public function indexAction(Request $request)
    {
        $property = new  property;
        $language = new  propertyLanguage;
        $property ->addpropertylanguage($language);

        $form = $this->createForm(new propertyType($this->getDoctrine()),$property);

       // ..... 

    } 
```

**表单类型**：propertType.php

```
public function buildForm(FormBuilder $builder, array $options)
    {

        $builder
            ->add('title', 'text');
           // other ->add() below.

    } 
```

它返回以下错误：

> 类“\defaultBundle\Entity\property”中不存在属性“title”、方法“getTitle()”和方法“isTitle()”

当然属性中没有属性Title，但是propertylanguage中有一个。即使我尝试： ->add('title', 'entity', array('class'=>defaultBundle:propertylanguage)); 它不起作用。

谢谢你有时间帮助我。

最好的，

皮埃尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:35:05.070

您要做的是创建一个 PropertyLanguageType 类以及一个 PropertyType。

然后，在您的 PropertyType 中，您将嵌入 PropertyLanguageType：

```
public function buildForm(FormBuilder $builder, array $options)
{

    // $builder->add('propertyLanguage', new PropertyLanguageType());

    // Since we have a 1 to many relation, then a collection is needed
    $builder->add('propertyLanguage', 'collection', array('type' => new PropertyLanguageType())); 
```

PropertyLanguageType 是您添加标题的位置。

这一切都在手册的表格部分中，但可能需要多次阅读。

第二种方法是向您的 Property 实体添加一个 getTitle，它将从 PropertyLanguage 实体返回标题。通过这样做，您的原始表单将起作用。但是当您开始与多个属性建立多个关联时，它可能会有点混乱。最好只为每个实体定义一个类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:35:40.323

您可以在定义表单时使用 query_builder。这是您的表单类的外观。当然，它肯定不会完全如此，但这会给你一个好的开始；）

```
public function __construct($id)
{
    $this->propertylanguageId = $id;
}   

public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('propertylanguage', 'entity', array(
                    'label' => 'Property Language',
                    'class' => 'YourAdressToBundle:Propertylanguage',
                    'query_builder' => function(EntityRepository $er) use ($propertylanguageId) {
                                            return $er->createQueryBuilder('p')
                                            ->join('p.property', 'prop', Expr\Join::WITH, 'prop.id = :propertylanguageId')
                                            ->setParameter('propertylanguageId', $propertylanguageId);
                                       },
                ));
} 
```

希望这会有所帮助

# jquery - jquery删除[[和]]之间的部分字符串

> ID：10944593
> 
> 赞同：0
> 
> 时间：2012-06-08T07:19:21.250
> 
> 标签：jquery, string

使用 Jquery 我想删除方括号之间包含的任何内容，例如：

[[即将被删除]]

我已经尝试了一些事情，但任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:24:15.210

这不是 jQuery，只是 JavaScript。

```
"[[to be removed]]".replace(/\[{2}[^\]]+\]{2}/ig, "[[]]"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:28:25.297

使用`replace`功能：

```
yourStr.replace(/\[\[.*?\]\]/g,"[[]]"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T07:33:59.717

**还有一个不同的演示** [http://jsfiddle.net/amVS9/](http://jsfiddle.net/amVS9/)

**代码**

```
$('div').text(function(_, text) {

   return text.replace(/\[\[.*?\]\]/g, "[[]]");
});
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T07:23:36.570

您应该查看 JavaScript replace() 函数。

# iphone - 将图像保存在具有视网膜显示的高分辨率 iPhone 照片库中

> ID：10944596
> 
> 赞同：-2
> 
> 时间：2012-06-08T07:19:43.357
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

我正在开发一个应用程序，我必须将图像保存在 iPhone 照片库中。当我以编程方式在应用程序的 iPhoto 库中保存图像时，我希望图像以高分辨率和视网膜显示保存。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:58:21.423

如何在应用程序中保存图像取决于您的要求。如果您在保存图像时调整图像大小，那么您也可以尝试保存更好的版本，以便它可以在两种分辨率下工作。但是，这个问题非常模糊。请做更多的解释。

# ios - Restkit，停止记录？

> ID：10944597
> 
> 赞同：25
> 
> 时间：2012-06-08T07:19:54.213
> 
> 标签：ios, cocoa-touch, restkit

我想知道.. Restkit 不断显示可达性信息，在我使用它时请求信息。这会在生产版本中自动停止，还是我需要做一些事情来阻止它们显示，比如设置 RKLog 级别？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-08-02T01:27:35.380

要关闭所有内容，请将其添加到您的应用程序委托中。

```
RKLogConfigureByName("*", RKLogLevelOff); 
```

注意：至少在 RestKit v0.20.x 中，您仍然会在开发版本中看到“RestKit logging initialized...”消息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-24T20:52:04.840

要仅抑制可达性消息，请使用以下命令：

```
RKLogConfigureByName("RestKit/Network/Reachability", RKLogLevelCritical); 
```

查看**`lcl_config_components.h`**完整列表：

```
 "restkit"                           "RestKit" 
 "restkit.network"                   "RestKit/Network" 
 "restkit.network.cache"             "RestKit/Network/Cache" 
 "restkit.network.queue"             "RestKit/Network/Queue" 
 "restkit.network.reachability"      "RestKit/Network/Reachability" 
 "restkit.object_mapping"            "RestKit/ObjectMapping" 
 "restkit.core_data"                 "RestKit/CoreData" 
 "restkit.core_data.cache"           "RestKit/CoreData/Cache" 
 "restkit.core_data.search_engine"   "RestKit/CoreData/SearchEngine" 
 "restkit.support"                   "RestKit/Support" 
 "restkit.support.parsers"           "RestKit/Support/Parsers" 
 "restkit.three20"                   "RestKit/Three20" 
 "restkit.ui"                        "RestKit/UI" 
 "restkit.testing"                   "RestKit/Testing" 
 "app"                               "App" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-08T11:02:15.047

RestKit 应用程序中的日志消息由 RKLog 调用控制。例如：

```
 RKLogConfigureByName("RestKit", RKLogLevelWarning); 
    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace);
    RKLogConfigureByName("RestKit/Network", RKLogLevelTrace); 
```

RKLog 是使用 Aren Harren 的 lcl_log（参见[http://0xc0.de/LibComponentLogging](http://0xc0.de/LibComponentLogging)）库实现的。我只是简单地浏览了 lcl 的代码，我没有看到任何会阻止它在生产版本中打印的代码，所以我会确保我的 RKLog 代码不会出现在生产代码中。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-10T15:47:44.650

RestKit 配置为在 DEBUG 构建中显示信息消息及更高版本。在非调试版本中，仅记录警告、错误和关键消息。这是通过`RKLogLevelDefault`in定义的`RKLog.h`。

如果要更改 RestKit 日志组件之一的日志级别，可以`RKLogConfigureByName(component, level)`使用`component`name 和`RKLogLevel`log调用`level`。`RKLogConfigureByName("*", RKLogLevelOff)`可用于禁用所有组件的日志记录。确保`RKLogInitialize()`之前调用过，因为`RKLogInitialize()`在第一次调用时会覆盖 RestKit 组件的日志级别设置。

如果要从生产构建中删除所有日志记录代码，只需将预处理器定义添加`_LCL_NO_LOGGING`到构建设置中即可。有关详细信息，请参阅 [http://0xc0.de/LibComponentLogging](http://0xc0.de/LibComponentLogging)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-27T07:33:08.010

凯尔的解决方案是正确的。Swift 版本有点不同：

```
 RKlcl_configure_by_name("*", RKlcl_vOff.rawValue) 
```

# android - 如何在android中使用列表片段显示自定义列表视图

> ID：10944601
> 
> 赞同：6
> 
> 时间：2012-06-08T07:20:32.727
> 
> 标签：android, android-listview, baseadapter, android-listfragment

我已将我的 android 屏幕分成 2 个片段。在第一个片段中，我从服务器数据库到 android mobile 制作了一个列表视图。问题是我无法在基本适配器类中调用 getview 方法。帮帮我

```
 public class MyListFragment1 extends ListFragment {

ImageView back;
String url = Main.url;
String Qrimage;
Bitmap bmp;
ListView  list ;

AppetiserFragment adapter;
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.applistviewfragment, container, false);

}
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // back=(ImageView)findViewById(R.id.backfoodmenu);
    /*
     * back.setOnClickListener(new OnClickListener() {
     * 
     * public void onClick(View v) { // TODO Auto-generated method stub
     * Intent intent=new Intent(getApplicationContext(),FoodMenu.class);
     * intent.putExtra("url", url); startActivity(intent); } });
     */
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    InputStream is = null;
    String result = "";
    JSONObject jArray = null;
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url + "test.php3");
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        // TODO: handle exception
        Log.e("Log", "Error in Connection" + e.toString());

        // Intent intent = new Intent(ViewQRCode.this, PimCarder.class);

        // startActivity(intent);

    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        jArray = new JSONObject(result);

        JSONArray json = jArray.getJSONArray("appetiser");

        Context context = null;
        context = this.getActivity().getApplicationContext();
                   //(Here i want give lisid from xml)
                     list=(Listview)findViewById(R.id.list);//i type here it shows an error
        adapter = new AppetiserFragment(context, json);

        context = getActivity().getApplicationContext();
        list.setAdapter(adapter);

    } catch (Exception e) {
        // TODO: handle exception
        Log.e("log", "Error in Passing data" + e.toString());
    }
} 
```

}

AppetiserFragment.java

```
 public class AppetiserFragment extends BaseAdapter {

String url = Main.url;
public Context Context;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, price, desc, itemno;
String[] itemnames, checkeditems, itemnos;
String[] prices;
String[] descs;
HashMap<String, String> map = new HashMap<String, String>();

public AppetiserFragment(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =

    System.out.println(imageArrayJson);
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.prices = new String[imageArrayJson.length()];
    this.descs = new String[imageArrayJson.length()];
    this.itemnos = new String[imageArrayJson.length()];
    try {

        for (int i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);

            qrimage = image.getString("itemimage");
            itemname = image.getString("itemname");
            itemno = new Integer(i + 1).toString();
            price = image.getString("price");
            desc = image.getString("itemdesc");
            System.out.println(price);//here i can print price
            itemnames[i] = itemname;
            prices[i] = price;
            descs[i] = desc;
            itemnos[i] = itemno;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public AppetiserFragment() {
    // TODO Auto-generated constructor stub
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View view = convertView;
    final ViewHolder viewHolder;
    if (view == null) {
        view = inflater.inflate(R.layout.appetiserlistview, null);
        System.out.println("prakash");
        viewHolder = new ViewHolder();
        viewHolder.image = (ImageView) view
                .findViewById(R.id.appetiserimage);
        viewHolder.text = (TextView) view.findViewById(R.id.appetisertext);
        viewHolder.desc = (TextView) view.findViewById(R.id.appetiserdesc);
        viewHolder.price = (TextView) view
                .findViewById(R.id.appetiserprice);
        viewHolder.appitemnum = (TextView) view
                .findViewById(R.id.appitemno);
        // viewHolder.checkbox = (CheckBox) view.findViewById(R.id.bcheck);

        view.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) view.getTag();
    }
    viewHolder.image.setImageBitmap(bmps[position]);
    viewHolder.appitemnum.setText(itemnos[position]);
    viewHolder.price.setText(prices[position]);
    viewHolder.desc.setText(descs[position]);
    // viewHolder.checkbox.setTag(itemnames[position]);
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(itemnames[position]);

    return view;
}

static class ViewHolder {

    protected TextView text, price, desc, appitemnum;
    protected ImageView image;

}

 } 
```

我可以在基础 adpater 类中打印 json 数据。现在我想将 json 数据传递给文本、图像。我认为 getview 方法没有调用。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-26T12:42:17.350

您也可以使用 ListActivity 而不是 ListFragment。它将像正常活动一样运行，您可以轻松找到所有与列表相关的方法。

像这样..，

```
 public class MainActivity extends ListActivity {
oncreate() {
** code
ListView list = getListView();

 **code
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T07:17:07.000

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {    
...
    list=(Listview)findViewById(R.id.list);//i type here it shows an error
...
} 
```

这是因为您试图在`onCreate()`方法中找到视图；此时，片段的布局尚未膨胀，因此所有`findViewById()`调用都将返回 null。

只能找到布局膨胀后的视图，即在`onCreateView()`. 所以重写该`onCreateView()`方法并调用`findViewById()`并在那里设置列表的适配器！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:29:04.537

我认为当您使用 id 为“R.id.list”的自定义列表时，无需使用 listFragment 扩展您的片段，仅使用片段扩展。

否则`if you want use the listFragment` ，在 XML 中使用 like

```
<ListView  android:id="@id/android:list"  android:layout_height="fill_parent"
        android:layout_width="fill_parent" android:layout_weight="1.0"
        android:layout_marginTop="2dip" android:scrollingCache="false"
        android:clickable="true" android:cacheColorHint="#00000000"
        android:focusable="true"
         android:background="@drawable/listfocused"
        android:dividerHeight="1dip"  xmlns:android="http://schemas.android.com/apk/res/android"/> 
```

在java中获取列表为

```
ListView  list = this.getListView(); 
```

# html - 修复所有显示器分辨率的视图

> ID：10944602
> 
> 赞同：0
> 
> 时间：2012-06-08T07:20:34.213
> 
> 标签：html, css, resolution, media-queries

我制作了一个使用`div`标签的应用程序，但一个问题是在其他或大分辨率显示器中显示该屏幕上的不同视图，而其他一些显示器显示我网站的另一个视图。那么如何修复所有显示器分辨率的视图。请帮我。

提前致谢。
米特什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:41:42.450

`@media`规则帮助您
[演示站点：](http://mediaqueri.es/)
![在此处输入图像描述](../Images/e7786bfa1914d187b99db1dad56eeb57.png)

使用此技术规则的关于响应式网页设计的[智能演示](http://johnpolacek.github.com/scrolldeck.js/decks/responsive/)

## [链接到规范](http://www.w3.org/TR/css3-mediaqueries/)

> 媒体查询由媒体类型和零个或多个检查特定媒体功能条件的表达式组成。可以在媒体查询中使用的媒体特征包括“宽度”、“高度”和“颜色”。通过使用媒体查询，可以为特定范围的输出设备定制演示文稿，而无需更改内容本身。

还有来自[http://css-tricks.com/](http://css-tricks.com/)的两篇文章：

*   [CSS 媒体查询和使用可用空间](http://css-tricks.com/css-media-queries/)
*   [标准设备的媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# android - 高清设备的 Android UI 布局

> ID：10944603
> 
> 赞同：0
> 
> 时间：2012-06-08T07:20:36.347
> 
> 标签：android, layout, screen

为什么支持所有多屏幕密度的应用程序这么难？是否可以？为什么有些应用程序有单独的高清 apk？EG愤怒的小鸟太空HD等

我有 res/layout 和 res/drawable 可以正常工作（在手机和平​​板电脑上工作），除了在高清设备上。高清设备是具有深度密度的智能手机（4 英寸标准尺寸屏幕），例如三星 Google Nexus 9250 和索尼 Xperia S，屏幕分辨率为 720x1280 和 300+ dpi

当我添加文件夹 res/layout-xlarge 和文件夹 res/drawable-xhdpi 时。它在高清设备上运行良好，但奇怪的是在平板电脑上布局变得丑陋。

为什么会这样？我期望平板电脑布局不会查看 res/layout-xlarge 和 res/drawable-xhdpi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:53:17.493

> 为什么有些应用程序有单独的高清 apk？EG愤怒的小鸟太空HD等

一个原因是定价——常见的业务逻辑会告诉您高清版本比普通版本更贵。由于盗版甚至是 Android 中的付费应用程序都很容易，他们不希望用手机购买的 apk 在平板电脑上以高清格式运行。

另一个是资产和 apk 大小。你不想用高清图像填充你的低清晰度版本 apk，因为它永远不会使用它们。

> 当我添加文件夹 res/layout-xlarge 和文件夹 res/drawable-xhdpi 时。它在高清设备上运行良好，但奇怪的是在平板电脑上布局变得丑陋。为什么会这样？

如果您向我们展示您的代码，我相信我们可以很容易地指出它有问题。您的情况不能太特殊，以至于某些东西适用于其他开发人员但不适用于您。

> 我期望平板电脑布局不会查看 res/layout-xlarge 和 res/drawable-xhdpi

[那么你期望它看起来在哪里？](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

# java - GAE 上的 HttpClient

> ID：10944604
> 
> 赞同：0
> 
> 时间：2012-06-08T07:20:42.483
> 
> 标签：java, google-app-engine

我真的很好奇[JIQL](http://code.google.com/p/jiql/)管理员演示如何能够在 Appengine 云 (appspot.com) 上运行

而在我尝试移植可用资源（如留言簿和 Jqladmin 应用程序）的地方，我收到此错误：

```
Caused by: java.lang.ClassNotFoundException: org.apache.commons.httpclient.HttpException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 44 more 
```

但是，有一个运行在 GAE 之上的 JiqlAdmin，我已经尝试过并且能够执行 SQL 查询：

[http://jiqladmin.appspot.com/Jiqladmin.html](http://jiqladmin.appspot.com/Jiqladmin.html)

只是想知道我的应用程序出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:25:27.940

错误似乎很明显，您应该添加 Apache commons Http 客户端作为依赖项。尝试将其放入您的 war/WEB_INF/lib 或将其添加为 Eclipse 中的依赖项。

# iphone - 如何从我在 iphone 中的应用程序中设置默认警报声音

> ID：10944605
> 
> 赞同：0
> 
> 时间：2012-06-08T07:20:46.160
> 
> 标签：iphone, ios, ios5

我有使用警报按钮来提醒一些事情。我的问题是当我点击我的应用程序中的警报按钮时如何去默认的 iphone 警报声音。任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:31:25.147

如果没有越狱，您将无法访问 iPhone 中的默认警报应用程序。

# iphone - 我如何在 iOS 中实现 GTMOAuth

> ID：10944608
> 
> 赞同：0
> 
> 时间：2012-06-08T07:21:13.637
> 
> 标签：iphone, ios, xcode, oauth

我需要在我的 iOS 应用程序中实现 GTMOAuth ..为此我已经下载了 OAuth 库并编写了一些代码

```
- (GTMOAuthAuthentication *)myCustomAuth {

NSString *myConsumerKey = @"f964039f2d7bc82054";    // pre-registered with service
NSString *myConsumerSecret = @"c9a749c0f1e30c9246a3be7b2586434f"; // pre-assigned by service

GTMOAuthAuthentication *auth;
auth = [[[GTMOAuthAuthentication alloc] initWithSignatureMethod:kGTMOAuthSignatureMethodHMAC_SHA1
                                                    consumerKey:myConsumerKey
                                                     privateKey:myConsumerSecret] autorelease];

// setting the service name lets us inspect the auth object later to know
// what service it is for
auth.serviceProvider = @"Custom Auth Service";

return auth;
}

- (void)signInToCustomService {

NSURL *requestURL = [NSURL URLWithString:@"http://alpha.easyreceipts.com/api/v1/oauth/request_token"];
NSURL *accessURL = [NSURL URLWithString:@"http://alpha.easyreceipts.com/api/v1/oauth/access_token"];
NSURL *authorizeURL = [NSURL URLWithString:@"http://alpha.easyreceipts.com/api/v1/oauth/authorize"];
NSString *scope = @"http://alpha.easyreceipts.com/api/v1/";

GTMOAuthAuthentication *auth = [self myCustomAuth];

// set the callback URL to which the site should redirect, and for which
// the OAuth controller should look to determine when sign-in has
// finished or been canceled
//
// This URL does not need to be for an actual web page
[auth setCallback:@"http://alpha.easyreceipts.com/api/v1/"];

// Display the autentication view
GTMOAuthViewControllerTouch *viewController;
viewController = [[[GTMOAuthViewControllerTouch alloc] initWithScope:scope
                                                            language:nil
                                                     requestTokenURL:requestURL
                                                   authorizeTokenURL:authorizeURL
                                                      accessTokenURL:accessURL
                                                      authentication:auth
                                                      appServiceName:@"My App: Custom Service"
                                                            delegate:self
                                                           finishedSelector:@selector(viewController:finishedWithAuth:error:)] autorelease];
viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"myID"];

[[self navigationController] pushViewController:viewController
                                       animated:YES];
} 
```

但进一步我不知道如何实现它。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:15:05.620

首先，如果你想用 GTM 库实现一个 OAuth 认证系统，你应该得到这个。[您可以在此处](https://github.com/jdg/gtm-oauth)找到 GTMOAuth 的完整来源。

其次，您也可以在 git 存储库中找到如何使用它的示例。您应该找到至少进行身份验证所需的一切。如果您还有任何问题，请提供更多信息。

# android - 如何通过 Windows 7 在三星 gts5360 设备上调试 Android 应用程序

> ID：10944612
> 
> 赞同：1
> 
> 时间：2012-06-08T07:21:22.463
> 
> 标签：android, windows, usb

我想通过 Windows 7 在三星 gts5360 设备上调试 Android 应用程序。Android 端的 USB 调试已启用，但连接时设备未在 Eclipse 中显示。我在 Ubuntu 中没有这样的问题。
所以请建议我如何通过 Window 7 在 Android 设备上调试应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:47:57.120

尝试重置 adb。当使用连接的设备时，我通常在后台运行 Dalvik 调试监视器，因此我可以验证 AVD 和/或设备是否确实已注册。您可以在`C:\Program Files (x86)\android-sdk\tools`安装了 Android SDK 的地方或任何地方找到此工具。它被称为 ddms.exe。

如果您在那里看不到您的设备，请转到菜单`Actions --> Reset asb`。现在，所有的 AVD 和设备都应该弹出，并且可以在 Eclipse 中使用。至少，这对我有用。

# c# - 正则表达式在 html 标记后查找缺失的空格

> ID：10944616
> 
> 赞同：2
> 
> 时间：2012-06-08T07:21:34.620
> 
> 标签：c#, javascript, regex

从超过 10000 行文本中，我需要找到缺少一组 html 标记后空格的字符串的所有实例。一组 HTML 标签是有限的，它们如下。

`<b> </b>, <em> </em>, <span style="text-decoration: underline;" data-mce-style="text-decoration: underline;"> </span> <sub> </sub>, <sup> </sup>, <ul> </ul>, <li> </li>, <ol> </ol>`

运行 Regx 后，应该会出现以下字符串。

`Hi <b>all</b>good morning.`

在这种情况下，我们在粗体标记后错过了 sapce。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:29:30.883

假设 C#：

```
StringCollection resultList = new StringCollection();
Regex regexObj = new Regex("^.*<(?:/?b|/?em|/?su[pb]|/?[ou]l|/?li|span style=\"text-decoration: underline;\" data-mce-style=\"text-decoration: underline;\"|/span)>(?! ).*$", RegexOptions.Multiline);
Match matchResult = regexObj.Match(subjectString);
while (matchResult.Success) {
    resultList.Add(matchResult.Value);
    matchResult = matchResult.NextMatch();
} 
```

将返回文件中的所有行，其中列表中的标签之一后至少有一个空格。

输入：

```
This </b> is <b> OK
This <b> is </b>not OK
Neither <b>is </b> this. 
```

输出：

```
This <b> is </b>not OK
Neither <b>is </b> this. 
```

**解释：**

```
^      # Start of line
.*     # Match any number of characters except newlines
<      # Match a <
(?:    # Either match a...
 /?b   #  b or /b
|      # or 
 /?em  #  em or /em
|...   # etc. etc.
)      # End of alternation
>      # Match a >
(?! )  # Assert that no space follows
.*     # Match any number of characters until...
$      # End of line 
```

# matlab - HOG 描述符训练需要多长时间？

> ID：10944619
> 
> 赞同：4
> 
> 时间：2012-06-08T07:21:48.060
> 
> 标签：matlab, opencv, image-processing, object-detection, matlab-cvst

我们有一个项目可以从图像中识别徽标。我们最初使用 Haar 分类器，但训练 Haar 分类器需要大量时间（在我们的 Core i5 机器上每个徽标需要 4 天）。为 300 多个徽标训练它需要很长时间（我们没有任何高性能计算机）。因此，我们决定转向基于 HOG 的目标检测器，希望它的训练时间会大大减少。

有谁知道 HOG 描述符训练需要多少时间？我们将针对每个徽标（在配备 Core i5 处理器的机器上）大约 100 个正面和 100 个负面 600x800 像素图像进行训练。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:32:56.457

无法回答，取决于 bin 的数量和其他实现细节。可能也在图像的内容上。不过，不要指望它在 60k 图像上会超快。如果我是你，我会认真考虑缩小图像，600x800 比你需要识别的要大得多。150x200 应该仍然可以识别，但所有的计算都会快 16 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:16:14.380

您绝对应该缩小输入图像的比例。例如，HOG 描述符通常从 64x128 行人图像中提取，以训练准确的行人检测器。训练 Haar 分类器总是很耗时，而且很难预测需要多长时间，因为它可以在特定阶段阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T15:30:09.437

很难给你任何具体的数字，但使用 HOG 进行训练比使用 Haar 类特征进行训练要快几个数量级。HOG 也使用更少的内存。此外，您可以选择在 OpenCV 和`trainCascadeObjectDetector`MATLAB 中使用 LBP 功能。使用 LBP，也比使用 Haar 快得多。

# python - 在 matplotlib 中动态更新绘图

> ID：10944621
> 
> 赞同：136
> 
> 时间：2012-06-08T07:22:07.973
> 
> 标签：python, matplotlib, tkinter

我正在用 Python 制作一个应用程序，它从串行端口收集数据并绘制收集到的数据与到达时间的关系图。数据到达的时间是不确定的。我希望在收到数据时更新绘图。我搜索了如何做到这一点，发现了两种方法：

1.  清除绘图并重新绘制所有点的绘图。
2.  通过在特定间隔后更改情节来制作动画。

我不喜欢第一个，因为程序运行并长时间收集数据（例如一天），重绘情节会很慢。第二个也不可取，因为数据的到达时间不确定，我希望绘图仅在收到数据时更新。

有没有一种方法可以仅在收到数据时才通过添加更多点来更新绘图？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-06-08T07:49:21.193

> *有没有一种方法可以通过添加更多点来更新情节......*

matplotlib 中有多种动画数据的方法，具体取决于您拥有的版本。您看过[matplotlib 食谱](http://www.scipy.org/Cookbook/Matplotlib/Animations)示例吗？此外，请查看 matplotlib 文档中更现代的[动画示例](http://matplotlib.sourceforge.net/examples/animation/index.html)。最后，[动画 API](http://matplotlib.sourceforge.net/api/animation_api.html)定义了一个函数[FuncAnimation](http://matplotlib.sourceforge.net/api/animation_api.html#matplotlib.animation.FuncAnimation)，它可以及时为函数设置动画。此功能可能只是您用来获取数据的功能。

每个方法基本上都设置了`data`正在绘制的对象的属性，因此不需要清除屏幕或图形。该`data`属性可以简单地扩展，因此您可以保留以前的点并继续添加到您的线（或图像或您正在绘制的任何内容）。

鉴于您说您的数据到达时间不确定，您最好的选择可能只是执行以下操作：

```
import matplotlib.pyplot as plt
import numpy

hl, = plt.plot([], [])

def update_line(hl, new_data):
    hl.set_xdata(numpy.append(hl.get_xdata(), new_data))
    hl.set_ydata(numpy.append(hl.get_ydata(), new_data))
    plt.draw() 
```

然后，当您从串口接收数据时，只需调用`update_line`.

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-06-17T19:44:34.670

为了在没有 FuncAnimation 的情况下执行此操作（例如，您想在生成绘图时执行代码的其他部分，或者您想同时更新多个绘图），`draw`单独调用不会生成绘图（至少使用qt 后端）。

以下对我有用：

```
import matplotlib.pyplot as plt
plt.ion()
class DynamicUpdate():
    #Suppose we know the x range
    min_x = 0
    max_x = 10

    def on_launch(self):
        #Set up plot
        self.figure, self.ax = plt.subplots()
        self.lines, = self.ax.plot([],[], 'o')
        #Autoscale on unknown axis and known lims on the other
        self.ax.set_autoscaley_on(True)
        self.ax.set_xlim(self.min_x, self.max_x)
        #Other stuff
        self.ax.grid()
        ...

    def on_running(self, xdata, ydata):
        #Update data (with the new _and_ the old points)
        self.lines.set_xdata(xdata)
        self.lines.set_ydata(ydata)
        #Need both of these in order to rescale
        self.ax.relim()
        self.ax.autoscale_view()
        #We need to draw *and* flush
        self.figure.canvas.draw()
        self.figure.canvas.flush_events()

    #Example
    def __call__(self):
        import numpy as np
        import time
        self.on_launch()
        xdata = []
        ydata = []
        for x in np.arange(0,10,0.5):
            xdata.append(x)
            ydata.append(np.exp(-x**2)+10*np.exp(-(x-7)**2))
            self.on_running(xdata, ydata)
            time.sleep(1)
        return xdata, ydata

d = DynamicUpdate()
d() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-03-14T08:12:23.437

这是一种允许在绘制一定数量的点后删除点的方法：

```
import matplotlib.pyplot as plt
# generate axes object
ax = plt.axes()

# set limits
plt.xlim(0,10) 
plt.ylim(0,10)

for i in range(10):        
     # add something to axes    
     ax.scatter([i], [i]) 
     ax.plot([i], [i+1], 'rx')

     # draw the plot
     plt.draw() 
     plt.pause(0.01) #is necessary for the plot to update for some reason

     # start removing points if you don't want all shown
     if i>2:
         ax.lines[0].remove()
         ax.collections[0].remove() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-28T22:41:00.077

我知道我回答这个问题迟到了，但是对于您的问题，您可以查看“操纵杆”包。我设计它是为了从串行端口绘制数据流，但它适用于任何流。它还允许交互式文本记录或图像绘图（除了图形绘图）。无需在单独的线程中执行自己的循环，包会处理它，只需提供您希望的更新频率。此外，终端在绘图时仍可用于监控命令。见[http://www.github.com/ceyzeriat/joystick/](http://www.github.com/ceyzeriat/joystick/)或[https://pypi.python.org/pypi/joystick](https://pypi.python.org/pypi/joystick)（使用pip install joystick安装）

只需将 np.random.random() 替换为从以下代码中的串行端口读取的真实数据点：

```
import joystick as jk
import numpy as np
import time

class test(jk.Joystick):
    # initialize the infinite loop decorator
    _infinite_loop = jk.deco_infinite_loop()

    def _init(self, *args, **kwargs):
        """
        Function called at initialization, see the doc
        """
        self._t0 = time.time()  # initialize time
        self.xdata = np.array([self._t0])  # time x-axis
        self.ydata = np.array([0.0])  # fake data y-axis
        # create a graph frame
        self.mygraph = self.add_frame(jk.Graph(name="test", size=(500, 500), pos=(50, 50), fmt="go-", xnpts=10000, xnptsmax=10000, xylim=(None, None, 0, 1)))

    @_infinite_loop(wait_time=0.2)
    def _generate_data(self):  # function looped every 0.2 second to read or produce data
        """
        Loop starting with the simulation start, getting data and
    pushing it to the graph every 0.2 seconds
        """
        # concatenate data on the time x-axis
        self.xdata = jk.core.add_datapoint(self.xdata, time.time(), xnptsmax=self.mygraph.xnptsmax)
        # concatenate data on the fake data y-axis
        self.ydata = jk.core.add_datapoint(self.ydata, np.random.random(), xnptsmax=self.mygraph.xnptsmax)
        self.mygraph.set_xydata(t, self.ydata)

t = test()
t.start()
t.stop() 
```

# ios - 如何使用 RestKit 映射 JSON 数组

> ID：10944624
> 
> 赞同：5
> 
> 时间：2012-06-08T07:22:21.430
> 
> 标签：ios, json, restkit

我有这种格式的json字符串：

```
[{"image":"/0001.jpg","link":"/index.php"},
{"image":"/0001.jpg","link":"/index.php"}] 
```

它在顶层没有键。

```
[mapping mapKeyPath:@"image" toAttribute:@"image"]; 
```

像这样的映射不起作用，它给了我错误：

```
restkit.object_mapping:RKObjectMapper.m:81 Adding mapping error: Could not find an object mapping for keyPath: '' 
```

如何映射这种类型的 json ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:55:11.887

利用

```
[[RKObjectManager sharedManager].mappingProvider addObjectMapping:myObject]; 
```

您应该检查Restkit Object Mapping Docs 上的“ [Mapping without KVC ”部分。](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md#mapping-without-kvc)

这是文档中的一个示例：

```
[
    { "title": "RestKit Object Mapping Intro",
      "body": "This article details how to use RestKit object mapping...",
      "author": {
          "name": "Blake Watters",
          "email": "blake@restkit.org"
      },
      "publication_date": "7/4/2011"
    }
] 
```

你像这样映射：

```
// Our familiar articlesMapping from earlier
RKObjectMapping* articleMapping = [RKObjectMapping mappingForClass:[Article class]];
[articleMapping mapKeyPath:@"title" toAttribute:@"title"];
[articleMapping mapKeyPath:@"body" toAttribute:@"body"];
[articleMapping mapKeyPath:@"author" toAttribute:@"author"];
[articleMapping mapKeyPath:@"publication_date" toAttribute:@"publicationDate"];

[[RKObjectManager sharedManager].mappingProvider addObjectMapping:articleMapping]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T10:49:18.440

对我来说，解决方案是：

添加此响应描述符，使用 de 数组中的对象

```
[manager addResponseDescriptor:[ObjectInsideTheArray getResponseDescriptor]]; 
```

并在成功响应中

NSArray *response = (NSArray *)[mappingResult **array** ]; //而不是firstObject

# php - 闯入和退出php

> ID：10944625
> 
> 赞同：0
> 
> 时间：2012-06-08T07:22:26.550
> 
> 标签：php

很抱歉出现这样一个 nOOb 问题，但我已经为此工作了一段时间，无法弄清楚如何闯入和退出 php - 特别是当它进入下面的 do while 循环时。请问有人帮忙吗？

```
if (!$_POST){
$display .= '<div class="aptitle">
            <h2>Add Product</h2>
          </div><!-- aptitle -->

          <div class="apsubtitle">
            <h3>Step 1 of 6</h3>
          </div><!-- apsubtitle -->

          <div class="selectcategorytitle">Please select a category for your item</div><!--selectcategorytitle-->
          <div class="selectcategory">
          <form action="addproducts2.php" method="post" enctype="multipart/form-data" name="step1">
             <div class="selected">Category: <select name="category" class="addproductselect" value=" ' . $selectedcategory . ' " id="select">
                <option value="0">Select a Category</option>
                <?php do { ?>

                <option value="<?php echo $categorylist['pk_cat_id'];?>">
                <?php echo $categorylist['category']; ?> </option>
                <?php } while ($categorylist = mysql_fetch_assoc($category_query)); ?>
             </select>
             <input name="submit" class="submitbtn" type="submit" value="Next Step" /></div><!--selected -->
          </form>

          </div><!--selectcategory-->';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:24:14.120

当您将字符串放入变量时，您已经在 PHP 中了。您不需要更多`<?php`标签，只需要一个关闭引号和一个`;`.

```
<?php
if (!$_POST){
$display .= '<div class="aptitle">
                <h2>Add Product</h2>
            </div><!-- aptitle -->

            <div class="apsubtitle">
                <h3>Step 1 of 6</h3>
            </div><!-- apsubtitle -->

            <div class="selectcategorytitle">Please select a category for your item</div><!--selectcategorytitle-->
            <div class="selectcategory">
                <form action="addproducts2.php" method="post" enctype="multipart/form-data" name="step1">
                    <div class="selected">Category:
                        <select name="category" class="addproductselect" value=" ' . $selectedcategory . ' " id="select">
                            <option value="0">Select a Category</option>';

do {
    $display .= '<option value="' . $categorylist['pk_cat_id'] . '">' . $categorylist['category']; . '</option>';
} while ($categorylist = mysql_fetch_assoc($category_query));

$display .= '</select>
<input name="submit" class="submitbtn" type="submit" value="Next Step" /></div><!--selected -->
          </form>

          </div><!--selectcategory-->';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:40:56.837

使用[HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)，因此在放置变量时不需要引号或 php 开始/结束标签。所以你的代码看起来像：

```
if (!$_POST){

do {
    $more_options = '<option value="' . $categorylist['pk_cat_id'] . '">' . $categorylist['category'] . '</option>';
} while ($categorylist = mysql_fetch_assoc($category_query));

$display .= <<<HEREDOC
        <div class="aptitle">
            <h2>Add Product</h2>
          </div><!-- aptitle -->

          <div class="apsubtitle">
            <h3>Step 1 of 6</h3>
          </div><!-- apsubtitle -->

          <div class="selectcategorytitle">Please select a category for your item</div><!--selectcategorytitle-->
          <div class="selectcategory">
          <form action="addproducts2.php" method="post" enctype="multipart/form-data" name="step1">
             <div class="selected">Category: <select name="category" class="addproductselect" value="$selectedcategory" id="select">
                <option value="0">Select a Category</option>
                $more_options
             </select>
             <input name="submit" class="submitbtn" type="submit" value="Next Step" /></div><!--selected -->
          </form>

      </div><!--selectcategory-->';

HEREDOC;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:44:50.820

这可能有效，您正在添加可能是原因的 PHP 标记。

```
<?php

if (!$_POST) {
    $display .= '<div class="aptitle">
            <h2>Add Product</h2>
          </div><!-- aptitle -->

          <div class="apsubtitle">
            <h3>Step 1 of 6</h3>
          </div><!-- apsubtitle -->

          <div class="selectcategorytitle">Please select a category for your item</div><!--selectcategorytitle-->
          <div class="selectcategory">
          <form action="addproducts2.php" method="post" enctype="multipart/form-data" name="step1">
             <div class="selected">Category: <select name="category" class="addproductselect" value=" ' . $selectedcategory . ' " id="select">
                <option value="0">Select a Category</option>';
    do {
        $display .= '<option value=" ' . $categorylist['pk_cat_id'] . '">
    ' . $categorylist['category'] . ' </option>';
    } while ($categorylist = mysql_fetch_assoc($category_query));
    $display .= '</select>
    <input name="submit" class="submitbtn" type="submit" value="Next Step" /></div>
</form>
</div>';
}
?> 
```

# .net - 从我的应用程序打开外部 exe 文件时无法访问已处置的对象

> ID：10944626
> 
> 赞同：0
> 
> 时间：2012-06-08T07:22:39.377
> 
> 标签：.net, vb.net, objectdisposedexception

我在工作中必须使用的应用程序有问题。该应用程序位于 .net 中（由我的公司创建）。应用程序调用一些 .exe 文件的对象。当我尝试打开它时，我收到以下错误：

```
cannot access a disposed object 
```

我知道这并不是很重要，但我在我的电脑上遇到了这个问题，而我的同事使用相同的应用程序没有收到那个错误。

我已经检查了他们的配置，我和我们一样。我认为与框架或类似的东西存在一些兼容性问题。

你能有个主意吗？

堆栈跟踪

```
 ************** Exception Text **************
System.ObjectDisposedException: Cannot access a disposed object named "Form".
Object name: "Form".
   at System.Windows.Forms.Control.CreateHandle()
   at System.Windows.Forms.Form.CreateHandle()
   at System.Windows.Forms.Control.get_Handle()
   at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)
   at OSP.ScriptEditor.Model.OSPState.ShowUI_Exe(Boolean autoOK) in d:\documents and settings\slan\my documents\visual studio projects\script editor\model\ospstate.cs:line 1851
   at OSP.ScriptEditor.Model.OSPState.ShowUI(Boolean autoOK) in d:\documents and settings\slan\my documents\visual studio projects\script editor\model\ospstate.cs:line 1980
   at OSP.ScriptEditor.Model.OSPState.ModifyCompo() in d:\documents and settings\slan\my documents\visual studio projects\script editor\model\ospstate.cs:line 996

************** Operating System **************

Microsoft Windows XP Service Pack 3  -  English (United States)
Current Culture: French (Belgium)

************** Loaded Assemblies **************

mscorlib
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/microsoft.net/framework/v1.1.4322/mscorlib.dll
    Last Modified on: 25/12/2011 10:06:44
----------------------------------------
ScriptEditor24
    Assembly Version: 2.4.2.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/ScriptEditor24.exe
    Last Modified on: 24/05/2006 9:39:06
----------------------------------------
System
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system/1.0.5000.0__b77a5c561934e089/system.dll
    Last Modified on: 6/06/2012 16:36:11
----------------------------------------
System.Windows.Forms
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.windows.forms/1.0.5000.0__b77a5c561934e089/system.windows.forms.dll
    Last Modified on: 6/06/2012 16:36:11
----------------------------------------
AxInterop.DataInter
    Assembly Version: 1.0.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/AxInterop.DataInter.DLL
    Last Modified on: 7/02/2003 19:27:22
----------------------------------------
OSP.ScriptEditor
    Assembly Version: 2.4.2.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/OSP.ScriptEditor.DLL
    Last Modified on: 24/05/2006 9:39:02
----------------------------------------
System.Drawing
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.drawing/1.0.5000.0__b03f5f7f11d50a3a/system.drawing.dll
    Last Modified on: 6/06/2012 16:36:39
----------------------------------------
Interop.DataInter
    Assembly Version: 1.0.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/Interop.DataInter.DLL
    Last Modified on: 7/02/2003 19:27:22
----------------------------------------
System.Management
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.management/1.0.5000.0__b03f5f7f11d50a3a/system.management.dll
    Last Modified on: 9/05/2011 13:21:59
----------------------------------------
System.Data
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.data/1.0.5000.0__b77a5c561934e089/system.data.dll
    Last Modified on: 9/05/2011 13:21:59
----------------------------------------
System.Xml
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.xml/1.0.5000.0__b77a5c561934e089/system.xml.dll
    Last Modified on: 9/05/2011 13:21:59
----------------------------------------
OSP.Shared
    Assembly Version: 2.4.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/OSP.Shared.DLL
    Last Modified on: 8/05/2006 10:06:26
----------------------------------------
Syncfusion.Shared.Base
    Assembly Version: 3.201.1.0
    CodeBase: file:///c:/winnt/assembly/gac/syncfusion.shared.base/3.201.1.0__3d67ed1f87d44c89/syncfusion.shared.base.dll
    Last Modified on: 7/06/2012 16:20:21
----------------------------------------
Syncfusion.Core
    Assembly Version: 3.201.1.0
    CodeBase: file:///c:/winnt/assembly/gac/syncfusion.core/3.201.1.0__632609b4d040f6b4/syncfusion.core.dll
    Last Modified on: 7/06/2012 16:20:19
----------------------------------------
Syncfusion.Tools.Windows
    Assembly Version: 3.201.1.0
    CodeBase: file:///c:/winnt/assembly/gac/syncfusion.tools.windows/3.201.1.0__3d67ed1f87d44c89/syncfusion.tools.windows.dll
    Last Modified on: 7/06/2012 16:20:28
----------------------------------------
Northwoods.Go
    Assembly Version: 2.2.1.1
    CodeBase: file:///c:/winnt/assembly/gac/northwoods.go/2.2.1.1__a4e3b7b70161cfe8/northwoods.go.dll
    Last Modified on: 7/06/2012 16:20:18
----------------------------------------
System.DirectoryServices
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.directoryservices/1.0.5000.0__b03f5f7f11d50a3a/system.directoryservices.dll
    Last Modified on: 9/05/2011 13:22:00
----------------------------------------
System.Runtime.Serialization.Formatters.Soap
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.runtime.serialization.formatters.soap/1.0.5000.0__b03f5f7f11d50a3a/system.runtime.serialization.formatters.soap.dll
    Last Modified on: 9/05/2011 13:21:58
----------------------------------------
Syncfusion.Grid.Windows
    Assembly Version: 3.201.1.0
    CodeBase: file:///c:/winnt/assembly/gac/syncfusion.grid.windows/3.201.1.0__3d67ed1f87d44c89/syncfusion.grid.windows.dll
    Last Modified on: 7/06/2012 16:20:24
----------------------------------------
AxInterop.SHDocVw
    Assembly Version: 1.1.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/AxInterop.SHDocVw.DLL
    Last Modified on: 29/09/2004 20:47:04
----------------------------------------
Interop.SHDocVw
    Assembly Version: 1.1.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/Interop.SHDocVw.DLL
    Last Modified on: 29/09/2004 20:47:04
----------------------------------------
Accessibility
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/accessibility/1.0.5000.0__b03f5f7f11d50a3a/accessibility.dll
    Last Modified on: 9/05/2011 13:20:55
----------------------------------------
Syncfusion.Edit.Windows.Legacy
    Assembly Version: 3.201.1.0
    CodeBase: file:///c:/winnt/assembly/gac/syncfusion.edit.windows.legacy/3.201.1.0__3d67ed1f87d44c89/syncfusion.edit.windows.legacy.dll
    Last Modified on: 7/06/2012 16:20:20
----------------------------------------
OSP.SibUI
    Assembly Version: 2.4.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/OSP.SibUI.DLL
    Last Modified on: 24/05/2006 9:38:53
----------------------------------------
System.Design
    Assembly Version: 1.0.5000.0
    CodeBase: file:///c:/winnt/assembly/gac/system.design/1.0.5000.0__b03f5f7f11d50a3a/system.design.dll
    Last Modified on: 9/05/2011 13:21:57
----------------------------------------
dao
    Assembly Version: 10.0.4504.0
    CodeBase: file:///c:/winnt/assembly/gac/dao/10.0.4504.0__31bf3856ad364e35/dao.dll
    Last Modified on: 7/06/2012 16:20:17
----------------------------------------
Interop.VXPLibrary
    Assembly Version: 1.0.0.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/Interop.VXPLibrary.DLL
    Last Modified on: 14/07/2003 22:24:46
----------------------------------------
OSP.Net.SmfServer
    Assembly Version: 2.4.2.0
    CodeBase: file:///C:/Program Files/Alcatel/OSP/Toolchain/in24/OSP.Net.SmfServer.DLL
    Last Modified on: 24/05/2006 9:38:48
---------------------------------------- 
```

问候，

朱琳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:20:13.883

好的，它已通过删除 KB2656353 修复。这不是很安全，但它的工作。

# android - 在Android弹出页面在方向改变时强制关闭

> ID：10944627
> 
> 赞同：0
> 
> 时间：2012-06-08T07:22:46.663
> 
> 标签：android

我正在使用 HTML5 开发 Android 应用程序

我创建了一个主 html 页面并在 web 视图中加载此 html 页面

页面运行良好，但是当我想从我的主 html 页面弹出页面时，它会打开，但是当我更改方向时，弹出页面会强制关闭

方向改变时如何保持弹出页面保持不变

# c# - 遍历 LibGit2Sharp 中的差异变化

> ID：10944629
> 
> 赞同：1
> 
> 时间：2012-06-08T07:23:00.110
> 
> 标签：c#, .net, libgit2, libgit2sharp

[`TreeChanges`](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/TreeChanges.cs)在 LibGit2Sharp中迭代的最佳（如高性能、简单）方法是什么？

如果我访问该`.Patch`属性，我会检索更改的全文。这对我来说还不够……理想情况下，我希望能够遍历 diff 行，并且每行检索行的状态（修改、添加、删除）并从中构建我自己的输出。

**更新：**

假设我想建立自己的差异输出。我想做的是迭代更改的行，在迭代期间我会检查更改的类型（添加、删除），并构造我的输出。

例如：

```
var diff = "";
foreach (LineChange line in changes) // Bogus class "LineChange"
{
    if (line.Type == LineChange.TYPE_ADDED)
        diff += "+";
    else
        diff += "-";

    diff += line.Content;
    diff += "\n";
} 
```

以上只是一个简单的例子，我正在寻找什么样的灵活性。能够通过更改，并根据行更改类型运行一些逻辑。该`Patch`属性已经“构建”，一种方法是解析它，但库首先构建输出然后我解析它似乎很愚蠢......我宁愿直接使用构建成分。

我需要这种功能，以便我可以显示更改的视觉差异，这涉及比我上面给出的简单示例更多的代码和逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:07:08.520

@svick is right. It's not exposed.

It might be useful to **[open an issue/feature request](https://github.com/libgit2/libgit2sharp/issues)** to further discuss this topic. Indeed, exposing a full blown line based diffgram might not fit the current "grain" of the library. However, provided you can come up with a scenario/use case that would benefit most of the users, some research may be invested in order to widen the API.

Beside this option, there might be other solutions: **post-process the current produced patch** against the previous version of the file

*   See this **[SO question](https://stackoverflow.com/questions/138515/text-diff-visualization-control-for-winforms-or-wpf)** for potential leads
*   **[Neil Fraser's "Diff Strategies" paper](https://neil.fraser.name/writing/diff/)** is also a great source of strategies and potential caveats regarding what a diff tool might aim at
*   **[DiffPlex](https://archive.codeplex.com/?p=diffplex)**, as a working visualization tool, might be inspirational as well
*   With some more work, one might even achieve something similar to the following kind of visualization (from Perforce 4 viewer)

[![p4merge](../Images/23d4dca5702c6138b75fabb273e55c71.png)](https://i.stack.imgur.com/edQA5.jpg)
[(source: [macworld.com](http://images.macworld.com/images/news/graphics/132450-perforce.jpg))]

**Note:** In order to ease this, it might be useful to expose in C# the libgit2 **[diffing options](https://github.com/libgit2/libgit2/blob/development/include/git2/diff.h#L36-49)**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:52:04.437

据我所知，libgit2sharp 并未公开此信息，但在 blob 差异（但不适用于树差异）的情况下，它是由 libgit2 提供的。相关代码在 中[`ContentChanges.cs`](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/ContentChanges.cs)，特别是在构造函数和`LineCallback()`方法中（树差异的代码在 中[`TreeChanges.cs`](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/TreeChanges.cs)）。

因此，我认为您有两种选择：

1.  调用您自己`git_diff_blobs()`内部使用的方法`ContentChanges`，或者使用反射（它是 中的内部方法`NativeMethods`），或者通过将 PInvoke 签名复制到您的项目。您很可能还需要`Utf8Marshaler`.
2.  修改 的代码`ContentChanges`，使其符合您的需要。如果您这样做，为该更改创建一个拉取请求可能是有意义的，以便其他人也可以使用它。

# jquery - 在JQuery的gridview中查找文本框

> ID：10944630
> 
> 赞同：1
> 
> 时间：2012-06-08T07:23:06.283
> 
> 标签：jquery, asp.net, validation, gridview

我有一个包含图像按钮的gridview。单击该图像按钮时，会填充另一个网格，其中包含一些文本框。如果插入在文本框中的值大于 gridview 的列值之一，我想对那些失去焦点的文本框进行 JQuery 验证。该列值正在使用绑定字段来绑定数据。

如何使用 Jquery 实现这一点？我是 JQuery 的新手。

我试过这样的事情。

```
<script type="text/javascript" language="javascript">
    $(function () {

        var GridView = $('#grdSalesOrder tr').each(function () {
            var btn = $(this).find('img[id*=imgdesign1]');
            alert(btn);
        });

    });
</script> 
```

首先，我找到了该网格视图的主网格视图和图像按钮。单击按钮时，会填充另一个网格视图。所以我认为我应该编写代码以在此图像按钮的单击事件上找到另一个网格，因为在页面加载事件时，另一个网格将不可用。但是在这段代码中，我没有得到主网格视图中的按钮。如果我犯了任何错误，请编辑我的 Jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:27:36.083

这是一些您可以配置以满足您的需求的 JQuery。

它假定您已将 CssClass 添加到网格视图中，如下所示：

```
<asp:GridView ID="Products" runat="server" CssClass="grid_view"> 
```

文本框的 CssClass 如下所示：

```
<asp:TextBox ID="txtUserInput runat="server" CssClass="user_input" /> 
```

并且绑定的列值在您的标题行中。

因此，如果您的网格视图中的 html 表格输出与此类似

```
<table class="grid_view" cellspacing="0" rules="all" border="1" id="Products" style="border-collapse:collapse;">
<tr>
    <th scope="col">12</th><th scope="col">4</th><th scope="col">21</th>
</tr>
<tr>
    <td>3</td><td>1</td><td>5</td>
</tr>
<tr>
    <td>3</td><td>1</td><td>5</td>
</tr>
<tr>
    <td>3</td><td>1</td><td>6</td>
</tr>
<tr>
    <td>3</td><td>1</td><td>5</td>
</tr>
<tr>
    <td><input type="text" class="user_input" /></td>
    <td><input type="text" class="user_input" /></td>
    <td><input type="text" class="user_input" /></td>
<tr>
</table> 
```

你可以使用这个 JQuery

```
<script type="text/javascript">
    $('.user_input').blur(function() {
    var enteredVal = $(this).val();
    var currentCell = $(this).closest("td");

    col = $(currentCell).prevAll().length;
    var obj = $(this).parents('table').find('th').eq(col);
    var hrVal = obj.text();

    // your validation here
    if (parseInt(enteredVal,10) > parseInt(hrVal,10)) {
        alert('too big');
    }
});​
</script> 
```

​<br> 请参阅此[小提琴](http://jsfiddle.net/Nicholas_Murray/Sr9H9/2/)以获取工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:14:56.920

这里的诀窍是如何在网格上找到您希望的每个元素。没有 html 代码，我可以给你一些点击开始。

此代码是选择 GridView 中的所有文本框，ID 为 YourGridViewID

```
jQuery('#<%=YourGridViewID.ClientID%> input[type=text]') 
```

添加您设置的丢失焦点

```
jQuery('#<%=YourGridViewID.ClientID%> input[type=text]').blur{
    // add the code for the validation
}); 
```

现在，如果您从网格中写出两行，也许我可以帮助您更多地找到其他数据。

# javascript - 如何在javascript中显示带有文本框和浏览按钮的弹出窗口？

> ID：10944636
> 
> 赞同：2
> 
> 时间：2012-06-08T07:24:00.643
> 
> 标签：javascript, html

在我的 asp 页面中，我想在用户单击按钮时显示一个弹出窗口。弹出窗口包含一个文本框和提交按钮，用于从用户那里获取文件路径。

例如：我想要在 stackoverflow 站点中出现这样的弹出窗口...

![在此处输入图像描述](../Images/feb45b429adbb4b96f103608be7cae84.png)

请帮我拿这个...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:34:16.377

这是一个[编辑：演示](http://jsfiddle.net/Z5vas/1/)。自定义它以满足您的需求。如果需要进一步的帮助，请告诉我。我添加了一个链接，该链接将在单击时显示弹出窗口。之后 popup div 是实际的 popup ， popup div 包含另一个 div ，只是为了保存内容，在本例中为 textbox 和按钮。这是 Html 部分。

```
<a id="popuplink" href="#">Click Me</a>
<div id="popup">
<div id="content">
<input type="text"/><input type="Button" value="Browse..."/>
    <input id="popupclose" type="Button" value="Close"/>   
 </div>   

</div>​ 
```

这是CSS：

```
#popup
{
    display:none;
    position:fixed;
    width:250px;
    height: 150px;
    top: 50%;
    left: 50%;
    margin-left:-155px;
    margin-top:-110px;
    border:5px solid red;
    background-color:#DEDFDE;
    padding:30px;
    z-index:102;
    font-family:Verdana;
    font-size:10pt;
    border-radius:10px;
    -webkit-border-radius:20px;
    -moz-border-radius:20px;
    font-weight:bold;
}
#content
{
    height:auto;
    width:250px;
    margin:60px auto;
}
#popupclose
{
    margin:35px 0 0 80px;
    width:50px;

}​ 
```

**编辑：** 要获取文本框的值，请检查[此演示](http://jsfiddle.net/Z5vas/3/)

要在单击 Asp.Net Button 时调用 javascript 函数，请尝试执行类似的操作。创建一个将显示弹出窗口的函数。

```
function ShowPopUp()
{
  $('#popup').show("slow");
} 
```

然后点击按钮试试这个，

```
ClientScript.RegisterStartupScript(GetType(), "popup", "ShowPopUp()", true); 
```

**附加信息** [MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:26:00.563

如果我理解正确你想使用`window.open`，这里有一些信息：[https ://developer.mozilla.org/en/DOM/window.open](https://developer.mozilla.org/en/DOM/window.open)

你需要这样的东西吗（这是一个粗略的例子，因为我不知道你的页面的名称等等......）：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function open_win() {
window.open("mypage.html");
}
</script>
</head>    
<body>
<form>
<input type="button" value="Open Window" onclick="open_win()">
</form>
</body>

</html> 
```

但是，我建议以不引人注目的方式执行此操作。

# powerpoint - PowerPoint中的超链接后如何从另一张幻灯片返回首页幻灯片

> ID：10944648
> 
> 赞同：6
> 
> 时间：2012-06-08T07:25:10.827
> 
> 标签：powerpoint, powerpoint-2007

我正在使用 Powerpoint 2007，并且在同一个文档中设置了从幻灯片 A 到幻灯片 B 的超链接。在幻灯片放映中，超链接运行良好。

但是在幻灯片 B 之后，**我怎样才能回到幻灯片 A**本身呢？

我的幻灯片结构如下：

```
Slide A -> Link 1 to Slide B (after viewing slide B, should return back to Slide A)
           Link 2 to Slide C
           Link 3 to Slide D 
```

我怎样才能做到这一点？当我设置超链接时，有一个像 SHOW AND RETURN 这样的选项，但默认情况下它是禁用的。如何启用它？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T15:14:02.377

链接到上次查看的幻灯片（或类似的文字）。

这将始终使您返回到当前幻灯片之前立即查看的幻灯片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T21:07:57.620

标记超链接，然后首页 -> 绘图 -> 动作设置，会有设置最后一张幻灯片查看

# jquery - 具有自动宽度调整功能的 3 个 div

> ID：10944649
> 
> 赞同：0
> 
> 时间：2012-06-08T07:25:15.650
> 
> 标签：jquery, css

我有3个div：

*   需要并排（连续）
*   都有背景图片
*   center div需要自动调整宽度，center div的宽度依赖于已经插入到div中的内容（长文本=长宽度
*   center div 也需要位于页面的中心。
*   两侧的 div 具有不同的背景 img。

HTML 代码：

```
<div class="spanl"></div>
<div class="center">Headline</div>
<div class="spanr"></div> 
```

请注意，侧面的 div 是空的。

像这样的东西：http: [//jsfiddle.net/fsnuh/134/](http://jsfiddle.net/fsnuh/134/)

这可能与css或css3有关吗？如果不是，我怎么能用 jquery 或 raw javascript 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:16:33.360

表的胜利！[小提琴](http://jsfiddle.net/VJyBw/ "测试")

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            #container {  display: table; width: 100% }
            #left, #right { display: table-cell; width: 50%; background: #ffd }
            #content { display: table-cell }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="left"></div>
            <div id="content">
                <div style="white-space: nowrap" onclick="this.firstChild.nodeValue += ' blah'">blah</div>
            </div>
            <div id="right"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:56:28.123

如果可以的话，给标题一个固定的宽度。然后使用 jQuery 计算宽度并相应地设置它们。

这是一个工作演示：http: [//jsfiddle.net/rniestroj/fsnuh/135/](http://jsfiddle.net/rniestroj/fsnuh/135/)

html:

```
<div>
     <h3 class="headline2">
     <div class="spanl"></div>
     <div class="center">Kontakt 11111111111 22222</div>
     <div class="spanr"></div>
     </h3>
</div> 
```

CSS：

```
*{
    padding: 0;
    margin: 0;    
}

h3{
    width: 600px;
    overflow: auto;
}

.spanr, .spanl {
    background: url("../img/headline2.png") no-repeat scroll right center gold;
    float: left;
    height: 33px;
    position: relative;
    width: 33%;
}
.center {
    background: none repeat scroll 0 0 #E6B043;
    float: left;
    height: 33px;
    line-height: 33px;
    padding: 0 10px;
    position: relative;
    text-transform: uppercase;
    width: auto;
} 
```

js：

```
var h3Width = $("h3").width();
var centerWidth = $(".center").width();
var asideWidth = 0;
asideWidth = ((h3Width - centerWidth) / 2) - 12;

$(".spanl").width(asideWidth );
$(".spanr").width(asideWidth ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:20:13.040

试试这个仅限 CSS 的解决方案：

[jsFiddle 示例](http://jsfiddle.net/fsnuh/137/)。

**HTML：**

```
<div id="headlines">
    <h3 class="headline2">
        <span>Kontakt</span>
    </h3>
</div> 
```

**CSS：**

```
#headlines {
    background-image: url('../img/headline2.png'), url('../img/headline2.png');
    background-repeat: no-repeat;
    background-position: left center, right center
}
.headline2, .headline2 > span {
    height: 33px;
    text-align: center;
    text-transform: uppercase;
    line-height: 33px
}
.headline2 > span {
    background-color: #E6B043;
    display: inline-block;
    padding: 0 10px
} 
```

# android - adb突然没有权限错误

> ID：10944657
> 
> 赞同：4
> 
> 时间：2012-06-08T07:25:49.220
> 
> 标签：android, adb, udev, dragonboard

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T06:59:58.913

Instead of:

`adb kill-server`

`adb start-server`

I tried:

`sudo adb kill-server`

`sudo adb start-server`

somehow this works. I dont know why.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:39:08.253

It sounds like your udev rule is broken and at one point you started the adb daemon as the root user. This is pretty easy to do accidentally since executing adb with any command will launch the daemon if it isn't already started. Using the root user to manually launch the daemon is fine as workaround, but tools like Eclipse that automatically start the service will still attempt to as an unprivileged user (which will cause the reported problem). The proper fix is to follow the official steps under [Configuring USB Access](http://s.android.com/source/initializing.html).

# c# - 在 c# 中，如何计算字符串数组的每个索引中的单词数？

> ID：10944658
> 
> 赞同：2
> 
> 时间：2012-06-08T07:25:51.963
> 
> 标签：c#, arrays, string, count, split

例如，我有一个文本文件，我已将它放入一个数组中，然后我使用以下命令将该数组按句号拆分（因此每个句子都在新数组的自己的索引中）：

```
textSplitArray = textArray[j].Split('.'); 
```

然后我将如何计算 textSplitArray 的每个索引中的单词数以确定哪个句子的单词最多？有可能做到这一点还是我必须以另一种方式做到这一点？

我试过到处搜索，但似乎找不到答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:27:42.107

如果您想知道哪个句子最长（即包含最多单词），请使用

```
var result = textSplitArray.OrderByDescending(x => x.Split(' ').Length)
                           .FirstOrDefault(); 
```

如果您想知道最长句子中的单词数，请使用

```
int Max = textSplitArray.Max(x => x.Split(' ').Length); 
```

或者

```
int Max = result.Length; 
```

由于句子中的每两个单词都可以用空格分隔，这就是我根据`' '`空格分隔每个句子的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:29:25.320

```
string[] textSplitArray = textArray[j].Split('.');
        foreach (string s in textSplitArray)
        {
            int NumberOfWords = s.Split(' ').Length;                
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:36:15.747

你可以像这样使用 lambda 表达式：

```
 var max = textSplitArray.Select((s,i) =>
    {
        return new { value = s.Split(' ').Count() , index = i};
    }).OrderByDescending(item=>item.value).FirstOrDefault();
 int maxValue = max.value;
 int maxPos = max.index;

 //this will return anonymous object that has two properties : {index  , value} that refers to item's value and it's position in the sequence. 
```

检查是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:37:20.987

```
 string[] source = textSplitArray.Split(new char[] { '.', '?', '!', ' ', ';', ':', ',' }, StringSplitOptions.RemoveEmptyEntries); 
```

`source.Length()`是你的计数。

# json - 使用 JSONObject 列表的 ZK Grid / Listbox

> ID：10944659
> 
> 赞同：1
> 
> 时间：2012-06-08T07:25:57.990
> 
> 标签：json, grid, zk, zul

任何人都可以帮助我使用 zk (zkoss) 框架吗？我是这个框架的新手。我想使用 jsonobject 列表制作一个网格/列表框。我没有找到可以帮助我使用 jsonobject 列表创建网格/列表框的示例。我想创建这样的简单列表框：

```
<?page title="Table of Users" contentType="text/html;charset=UTF-8"?>
<?init class="org.zkoss.zkplus.databind.AnnotateDataBinderInit" ?>
<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?>
<zk>
<window id="windowUsers" width="500px" apply="${userController}" viewModel="@id('vm')">
    <groupbox mold="3d">
        <caption label="Table of Users" />
        <listbox model="@load(vm.listUser)" width="400px">
            <listhead>
                <listheader label="User Id"/>
                <listheader label="Name"/>
                <listheader label="Address"/>
                <listheader label="Phone"/>
            </listhead>
            <template name="model" var="list">
                <listitem>
                    <listcell label="@load(list.id)" />
                    <listcell label="@load(list.name)" />
                    <listcell label="@load(list.address)" />
                    <listcell label="@load(list.phone)" />
                </listitem>
            </template>
        </listbox>
    </groupbox>
</window> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:34:31.133

ZK 通常用作服务器端页面，由服务器上的 java 评估。因此，上面的示例通常会在服务器上呈现一个 java 对象列表，该列表作为交互式 dhtml 输出到浏览器。要解释的图表是[here](http://java.dzone.com/articles/using-desktop-model-view)。

考虑到这一点，服务器上不会有 json 对象列表；您可以将它们解析为服务器上的 java 对象并将 java 对象呈现到页面中。ZK 确实具有“客户端融合”，能够与其浏览器端渲染引擎进行交互。然而，这更像是一个高级功能。您应该能够使用 ZK 编写整个系统，而无需进行任何浏览器端编程。这是一个[演示](http://java.dzone.com/articles/using-desktop-model-view)，但我从未使用过自己

（警告：无耻插件）查看我的演示应用程序，它有一个简单的页面，可以像您的[示例](http://java.dzone.com/articles/using-desktop-model-view)一样呈现和编辑对象列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T03:45:43.983

谢谢你的回答，它教会了我足够多的关于 ZK 的知识。我有办法获取列表框中显示的 JSON 对象列表，如下所示：

```
<listitem forEach="${userController.list}">
    <listcell label="${each.id}" />
    <listcell label="${each.name}" />
    <listcell label="${each.address}" />
    <listcell label="${each.phone}" />
</listitem> 
```

# ruby-on-rails - 一个如何在开发和生产环境中存储凭据？

> ID：10944663
> 
> 赞同：2
> 
> 时间：2012-06-08T07:26:07.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, security

我在以下位置阅读了解决方案：[为我的 Rails 应用程序创建自定义配置选项的最佳方式？](https://stackoverflow.com/questions/592554/best-way-to-create-custom-config-options-for-my-rails-app)这似乎很有希望。即将开发和生产凭证存储在`config/config.yml`. 但后来我想。

如果我们有一个由开发人员和实习生组成的团队，他们将接触到包含所有生产凭证的文件。共识是相信你的团队。但诚实的人为错误确实会发生：电脑开机/解锁、木马、朋友使用电脑等。

我知道 Heroku 有一个叫做[config vars](https://devcenter.heroku.com/articles/config-vars) + [foreman](https://github.com/ddollar/foreman)的东西。但是，对于 AWS 之类的东西，它并不像创建新的访问密钥并将该访问密钥委托给特定的存储桶那么简单。它不是那样工作的。我能想到的唯一方法是仅出于开发目的创建一个新的 AWS 账户。如果我走这条路，我也必须为其他类似的第 3 方服务创建开发帐户。

有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:03:30.810

我使用[SettingsLogic](https://github.com/binarylogic/settingslogic)。

我为此创建了两个模型：Settings 和 PrivateSettings。我将设置分开：密码、令牌、api 密钥……在 PrivateSettings 中，其余在 Settings 中。

对于设置：

```
class Settings < Settingslogic
  source "#{Rails.root}/config/settings.yml"
  namespace Rails.env
end 
```

该`settings.yml`文件存储在 Git 中。

对于 PrivateSettings ：

```
class PrivateSettings < Settingslogic
  source "#{Rails.root}/config/private_settings.yml"
  namespace Rails.env
end 
```

我将`private_settings-sample.yml`文件存储在 Git 中，以保持示例同步。生产数据显然没有填充。开发人员克隆存储库，并将其重命名`private_settings.yml`为能够工作。

`config/private_settings.yml`也是`.gitignore`为了避免错误地包含在内。

去生产，我使用 Capistrano 中的一个特定任务来创建一个符号链接，指向`private_settings.yml`存储在服务器中的正确文件（在,和`config`旁边的目录中）：`current``releases``shared`

```
namespace :deploy do
  task :config_settings do
    run "cd #{current_path}/config && ln -sf #{shared_path}/../config/private_settings.yml private_settings.yml"
  end
end
after "deploy:update", "deploy:config_settings" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:19:10.017

我不确定您是否可以阻止开发人员知道密码。即使您拥有为您提供正确凭据/密钥的完全独立的服务，开发人员也可以随时调试工作应用程序、添加记录密码的代码等。这些都是您必须信任的人。我认为可能的唯一方法是让管理员将所需的密钥放在类路径上并始终进行代码审查以防止在运行时读取凭据的所有尝试

# sql - 根据条件在存储过程中调用标量值函数

> ID：10944668
> 
> 赞同：1
> 
> 时间：2012-06-08T07:26:22.100
> 
> 标签：sql, tsql

您好我正在使用标量函数来计算一些值并将其添加为列，同时检索表。我使用的查询是

```
Select * ,dbo.funcnme(@userid,itemid) as newvalue  from items 
```

现在我有一个场景，我必须根据项目值调用一个函数，但我不能正确。我尝试的查询是

```
select *,
    Case when items.Value=4 
        then dbo.funcnme(@userid,itemid) as newvalue 
        else dbo.newfuncnme(@userid,itemid)  
    as newvalue  from items 
```

表明

> 关键字“as”附近的语法不正确。

这里有什么问题。我该怎么做，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:29:43.603

我错过了`END`的`CASE`，除此之外，别名也应该在末尾：

```
select *,
    Case when items.Value=4 
        then dbo.funcnme(@userid,itemid) 
        else dbo.newfuncnme(@userid,itemid)  
    END as newvalue  
from items 
```

# android - Android - 在 AtionBarCompat 上的按钮之间删除/添加填充

> ID：10944670
> 
> 赞同：1
> 
> 时间：2012-06-08T07:26:23.413
> 
> 标签：android, android-layout, android-emulator, android-actionbar

我正在使用 ActionBar 兼容性，一切都很好，除了默认情况下，按钮（操作）周围有一些填充。

如何更改特定按钮的填充，将其删除，并在某些情况下进行调整。 ![在此处输入图像描述](../Images/545eeadf5a3cd32af20af20b7e10fdaa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:49:24.383

通过配置样式，我设法通过创建自定义布局并将其附加到 ActionBar 来解决此问题：

```
<style name="ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
   <item name="android:displayOptions">showHome|useLogo|showCustom</item>
   <item name="android:customNavigationLayout">@layout/actionbar_custom_title</item>
</style> 
```

现在出现了另一个问题：如果您能帮助我，请查看此线程：[Android - 从 ActionBar 中删除“更多操作”按钮](https://stackoverflow.com/questions/10961107/android-remove-more-actions-button-from-the-actionbar)

# jsf - 如何使用 在 ui:repeat 中使用 DefaultStreamedContent？

> ID：10944673
> 
> 赞同：9
> 
> 时间：2012-06-08T07:26:43.900
> 
> 标签：jsf, primefaces, uirepeat, graphicimage

我试图显示一个面板，用户可以在其中看到项目类别列表（显示为图像），单击时他们可以查看类别中的产品（将显示图像）

为了显示项目类别，我使用了 ui:repeat 和支持的 bean calss 下面是我的 xhtml 代码

```
<ui:repeat id="repeat" value="#{getData.images}" var="img" varStatus="loop">
<h:panelGroup>
<p:graphicImage id="img1" value="#{img}" alt="image not available" >
</p:graphicImage>
</h:panelGroup>
</ui:repeat> 
```

和托管 Bean 代码部分

```
private ByteArrayOutputStream baos = new ByteArrayOutputStream();
private List<StreamedContent> imageList = new ArrayList<StreamedContent>();

public List<StreamedContent> getImages(){
  for (int i = 0; i < sdh.getNumOfImages(); i++) {
    imageID = imageIDArray.get(i);
    ImageService imgSer = new ImageService();
    imgList.add(imageID);
    imgSer.setData(imageID);
    baos = imgSer.getImage();
    try {
      imageList.add(new DefaultStreamedContent(new 
            ByteArrayInputStream(baos.toByteArray())));
    } catch (Exception ex) {
        ex.printStackTrace();
    }
  }
  imageNum = 0;
  return imageList;
}

public StreamedContent getData() {
    baos = imageList.get(imageNum);
    //imageList.add(baos);
    imageNum++;
    return new DefaultStreamedContent(new ByteArrayInputStream(baos.toByteArray()));
} 
```

现在我的问题是，如果我不取消注释“getData”中的“imageList.add(baos)”，则不会显示图像。现在我真的很想知道“ui:repeat”是如何工作的，因为“imageList”包含图像，如果需要，我可以在任何一种方法中保存相同的图像。如果我在 'getData' 方法中指定一个固定数字（例如：'imageList.get(0)'），那么同一个图像会显示多次。好像我在没有“imageList.add（baos）”的情况下放置了“imageNum”，它会抛出错误“流动态资源中的错误”

我厌倦了 Bjorn Pollex 的建议并进行了必要的更改，但现在没有出现图像

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T14:53:17.473

不可能使用`<p:graphicImage>`这种方式。您应该遍历唯一图像标识符的集合，而不是遍历`StreamedContent`. 然后必须将这些唯一的图像标识符作为 a 传递`<f:param>`给`<p:graphicImage>`它，进而为浏览器生成正确的 URL。

```
<ui:repeat value="#{data.imageIds}" var="imageId">
    <p:graphicImage value="#{imageStreamer.image}">
        <f:param name="id" value="#{imageId}" />
    </p:graphicImage>
</ui:repeat> 
```

您的`#{data}`托管 bean 必须只有一个：

```
private List<Long> imageIds; // +getter 
```

应该是一个单独的`#{imageStreamer}`应用程序范围的托管 bean，基本上看起来像这样：

```
@ManagedBean
@ApplicationScoped
public class ImageStreamer {

    @EJB
    private ImageService service;

    public StreamedContent getImage() throws IOException {
        FacesContext context = FacesContext.getCurrentInstance();

        if (context.getCurrentPhaseId() == PhaseId.RENDER_RESPONSE) {
            // So, we're rendering the view. Return a stub StreamedContent so that it will generate right URL.
            return new DefaultStreamedContent();
        }
        else {
            // So, browser is requesting the image. Get ID value from actual request param.
            String id = context.getExternalContext().getRequestParameterMap().get("id");
            Image image = service.find(Long.valueOf(id));
            return new DefaultStreamedContent(new ByteArrayInputStream(image.getBytes()));
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:43:26.600

您使用了错误的 ui:repeat 标签。您有 var 属性，但不能在 p:graphicImage 标记值属性中使用它。请参阅示例用法，

```
 <ui:repeat value="#{yourBean.images}" var="img">
           <p:graphicImage value="/images/#{img}" />
        </ui:repeat> 
```

# java - JSP 不显示从 POST 请求到 Servlet 的数据

> ID：10944676
> 
> 赞同：0
> 
> 时间：2012-06-08T07:26:50.823
> 
> 标签：java, html, jsp, servlets

我有一个 index.jsp 页面，其中包含名为“刷新”、“转发”和“编辑”的按钮。如果我单击刷新按钮，那么它会调用一个 Servlet，并且值会显示在 index.jsp 页面上。

当我单击“转发”按钮时，它会调用另一个 servlet 并转到另一个页面 forward_call_log.jsp。在此页面中，当我单击“转发”按钮时，它会调用另一个 servlet，并且该 servlet 会显示 index.jsp 页面。显示 index.jsp 页面，但数据库中的值不可用。

我该如何解决这个问题？

**索引.jsp**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Pager Example - www.javaworkspace.com</title>
</head>
<body>
<form method="post" action="./Problem_retrive" >
<input type="submit" value="Refresh">
</form>
<form action="./edit_call_log" method="post">
<%
ResultSet rs=null;
try
{
    rs=(ResultSet)request.getAttribute("rs");
    //request.setAttribute("rs",rs);
    if(rs.next())
    {
    %>
    <table border=1 cellspacing=1 cellpadding=1>
        <tr>
            <th>check box</th>
            <th>Problem ID</th>
            <th>user ID</th>
        </tr>
        <%
            do
            {
        %>
                <tr>
                    <td><input type="checkbox" name="checkbox"   value="<%=rs.getString(1) %>"></td>
                    <td><%=rs.getString(1) %></td>
                    <td><%=rs.getString(2) %></td>
                </tr>
        <%
            }
            while(rs.next());
        %>
    </table>
<%
    }
    else
    {
        out.println("hiiiiiiii");
    }
}
catch(Exception e)
{
    e.printStackTrace();
}
 %>

<input type="submit" name="act" value="EditCall"/>
<input type="submit" name="act" value="Forward"/>   
</form>
</body>
</html> 
```

单击**刷新**按钮后调用**Edit_call_servlet.java**

```
import database.problemdesc.Problem_retrive_class;
import database.user_master.User_master;
import java.sql.*;
public class Edit_call extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doPost(HttpServletRequest request, HttpServletResponse response)   throws ServletException, IOException 
{
    response.setContentType("text/html");
    HttpSession session = request.getSession(true);
    ResultSet rs=null;
    Problem_retrive_class prc=new Problem_retrive_class();
    int checkbox=Integer.parseInt(request.getParameter("checkbox"));
    session.setAttribute("problem_id", checkbox);
    String act=request.getParameter("act");
    if(act.equals("EditCall"))
    {

        try
        {

            rs=prc.select_table(checkbox);
            RequestDispatcher rd =   request.getRequestDispatcher("edit_call_log.jsp");
            request.setAttribute("rs", rs);
            rd.forward(request, response);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
    else if(act.equals("Forward"))
    {
        System.out.println("Forward page");
        try
        {
            ResultSet rs1=null;
            User_master um=new User_master();
            rs=prc.select_table(checkbox);
            if(rs.next())
            {
                System.out.println("Value retrieve from PRC select_table");
                rs1=um.select_table(rs.getString(7));
                System.out.println("Value retrieve from PRC   select_table"+rs.getString(7));
                RequestDispatcher rd = request.getRequestDispatcher("forward_call_log.jsp");
                request.setAttribute("rs1", rs1);
                request.setAttribute("user_type", rs.getString(7));
                rd.forward(request, response);
            }
            else
            {
                RequestDispatcher rd =  request.getRequestDispatcher("index.jsp");

                rd.forward(request, response);
            }

        }
        catch(Exception e)
        {

        }
    }

}

} 
```

单击**Forward**按钮后，调用**Problem_retrive_servlet.java**

```
import database.problemdesc.Problem_retrive_class;

public class Problem_retrive extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    response.setContentType("text/html");
    PrintWriter out=response.getWriter();
    Connection con=null;
    ResultSet rs=null;
        try
        {
            Problem_retrive_class prc=new Problem_retrive_class();
            DBBean db=new DBBean();
            con=db.getDBConnection();
            rs=prc.select_table();

            RequestDispatcher rd = request.getRequestDispatcher("index.jsp");

            rd.forward(request, response);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:29:09.113

看起来您没有将任何数据附加到请求对象，因此 index.jsp 没有可显示的内容。我假设这是发生问题时正在执行的代码。

```
public class Edit_call extends HttpServlet {

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    ...

    else if(act.equals("Forward"))
    {
        try
        {
            ...
            {
                ...
            }
            else
            {
                RequestDispatcher rd =  request.getRequestDispatcher("index.jsp");

                / *** YOUR PROBLEM IS HERE ***/

                rd.forward(request, response);
            } 
```

**[编辑]**

根据您的问题，我假设您的 JSP 上的“刷新”按钮按预期工作（即数据库中的数据按预期显示）。从以下 JSP 代码...

```
<form method="post" action="./Problem_retrive" >
    <input type="submit" value="Refresh">
</form> 
```

在服务器上执行的方法是`Problem_retrive.doPost()`

基于此，我们需要了解单击“前进”按钮时正在执行的代码`forward_call_log.jsp`。您已经描述了这个“前进”按钮显示`index.jsp`但不包括来自数据库的数据。让我们假设它的调用`Edit_call.doPost()`*.

**我建议您在所有 doPost() 方法中放置调试器断点以确认此假设，或者如果您无法调试，请参考您的 System.out.println() 语句。*

因此，您需要将正在发生的事情与没有显示数据时`Problem_retrive.doPost()`未发生的事情进行比较`Edit_call.doPost()`。我怀疑你没有打电话`request.setAttribute()`

```
rs=prc.select_table();
RequestDispatcher rd = request.getRequestDispatcher("index.jsp");
request.setAttribute("rs", rs);
rd.forward(request, response); 
```

**关于良好设计的旁注**

您可以阅读[MVC 设计模式](http://en.wikibooks.org/wiki/Computer_Science_Design_Patterns#Model-View-Controller_Pattern)，以更好地设计代码。

# php - 在 php 页面中包含什么来使用 wordpress 的功能？

> ID：10944678
> 
> 赞同：1
> 
> 时间：2012-06-08T07:27:03.497
> 
> 标签：php, include, wordpress

我有一个 wordpress 网站，我想创建一个也有 javascript 的页面，并且在某个用户操作后，javascript 使用 AJAX 请求调用服务器。这是对我创建的 php 脚本的 GET 请求。因为我用我的插件扩展了wordpress，所以我把这个php放在我插件的文件夹中。

问题是，我想从这个 php 脚本访问 wordpress 提供的所有内容，例如数据库访问，但我不知道如何。

为了访问 wordpress 提供的功能，我必须在这个 php 文件中包含什么？我想使用数据库访问，所以我包含了 wp-db.php 文件并声明了全局 wpdb 变量，但它没有帮助。

谁能告诉我如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:04:00.867

Wordpress 在 ajax 中有自己的构建： http: [//codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)
使用它而不是您自己的 ajax 脚本。

在这个 ajax 脚本中，您可以使用所有 WP 函数。它还将使您的插件更像 wordpress 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:34:34.880

正如[WordPress Codex](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)本身所推荐的那样。

```
<?php 
/* Short and sweet */
define('WP_USE_THEMES', false);
require('./wp-blog-header.php');
?> 
```

通过使用博客标题，默认情况下不执行任何数据库查询，您必须提供`get_posts`将根据应用程序参数获取所需文章的内容：

```
<?php $posts = get_posts('numberposts=10&order=ASC&orderby=post_title'); ?>
<?php foreach ($posts as $post) : start_wp(); ?>
    <?php the_date(); echo "<br />"; ?>
    <?php the_title(); ?>    
    <?php the_excerpt(); ?> 
<?php endforeach; ?> 
```

# c# - 如何在 Windows 窗体中对单选按钮组进行分组

> ID：10944679
> 
> 赞同：3
> 
> 时间：2012-06-08T07:27:10.233
> 
> 标签：c#, radio-button, windows-forms-designer

我有一个带有许多单选按钮的表单，一次只能选择一个。

一些单选按钮已连接，需要通过标题进行解释。为此，我将它们放在 Groupbox 中。但是，组框内的单选按钮不再连接到外面的单选按钮，并且可以从中选择两个。

有没有办法连接单选按钮，以便它们相互反应？或者有没有更好的方法来分组和解释单选按钮然后使用组框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T07:53:46.323

根据 MSDN，这是按其容器分组的[RadioButton](http://msdn.microsoft.com/en-us/library/d5hxcyah%28v=vs.100%29.aspx)的设计行为：

> 当用户在组中选择一个选项按钮（也称为单选按钮）时，其他选项按钮会自动清除。给定容器（如 Form）中的所有 RadioButton 控件构成一个组。要在一个窗体上创建多个组，请将每个组放在其自己的容器中，例如 GroupBox 或 Panel 控件

您可以尝试对要链接的 RadioButtons 使用通用事件处理程序并自己处理 Checking/UnChecking，或者您可以将 RadioButtons 放在 GroupBox 顶部，而不是将它们添加到 GroupBox 然后 BringToFront。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:33:46.853

这是可能的，但代价高昂。您必须将其 AutoCheck 属性设置为 false 并自行取消选中其他按钮。不再正常工作的最尴尬的事情是制表位，一组分组按钮只有一个制表位，但如果您设置 AutoCheck = false 那么每个按钮都可以被制表符。

最大的问题无疑是你会给用户带来相当大的混乱。如此之多，以至于您可能应该考虑使用复选框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T07:50:06.267

在 Windows 窗体中，我认为没有简单的方法（如设置 GroupName 等属性）来对单选按钮进行分组。最快的方法是简单地将单选按钮分组到一个集合中并监听 checkedchanged 事件。例如：

```
 var rbuttons = new List<RadioButton>{ radioButton1, radioButton2, radioButton3, radioButton4 }; //or get them dynamically..
        rbuttons.ForEach(r => r.CheckedChanged += (o, e) =>
        {
            if (r.Checked) rbuttons.ForEach(rb => rb.Checked = rb == r);
        }); 
```

如果列表中的任何单选按钮被选中，其他的将自动取消选中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-16T14:55:00.860

我通过处理 CheckChanged 事件解决了这个问题。

```
private void radio1_CheckedChanged(object sender, EventArgs e)
{
    if (radio1.Checked)
    {
        // do stuff
        radio2.Checked = false;
    }
}
private void radio2_CheckedChanged(object sender, EventArgs e)
{
    if (radio2.Checked)
    {
        // do stuff
        radio1.Checked = false;
    }
} 
```

# javascript - 谷歌地图 API 地图以 0,0 为中心并完全放大

> ID：10944680
> 
> 赞同：0
> 
> 时间：2012-06-08T07:27:16.020
> 
> 标签：javascript, html, google-maps, kml

我正在尝试编写一个基本的“从 KML 显示地图”网站，但遇到了不透明的失败。我希望有人可以看看下面的代码，并告诉我是否有任何新手错误。

故障是当我运行它时，地图完全放大到 (0,0)，而不是显示我在 KML 中编码的所有指针。它指向的 KML*应该*是有效的。它在一段时间前工作，我不确定我改变了什么，如果有的话。它非常基于 Google 示例。

为这个问题的一般性道歉 - 我真的才刚刚开始。提前谢谢了。

标记

```
<html>
<head>
<meta name="viewport" content="initial-scale=0.5, user-scalable=yes" />
<meta http-equiv="refresh" content="1800">
<style type="text/css">
html { height: 100% }
body { height: 100%; width: 500px; margin: 0px auto; text-align:center; padding: 0 }
map_canvas { height: 65% }
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAQylgnaeGmmExmZio2e2zixSRHOaWUj2I&amp;sensor=false">
</script>
<script type="text/javascript">
function initialize() {
var latlng = new google.maps.LatLng(55, 2); 
var myOptions = {
zoom: 6,
center: latlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
} 
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var trip_layer = new google.maps.KmlLayer('http://mc711.user.srcf.net/vacation/trip.1339139845.kml');
trip_layer.setMap(map);
}
</script>
</head>
<body onload="initialize()">
<div id="Notes" style="width: 75%; font-size:48; font-family:sans-serif;  text-align:center; margin:0px auto;">Mark's location</div>
<div id="map_canvas" style="width: 100%; height: 480px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:53:45.570

问题是您的 KML 文件不存在，因此它返回 404 - 未找到： http: [//mc711.user.srcf.net/vacation/trip.1339139845.kml](http://mc711.user.srcf.net/vacation/trip.1339139845.kml)

# java - 如何防止我的while循环停止？

> ID：10944686
> 
> 赞同：-1
> 
> 时间：2012-06-08T07:27:49.307
> 
> 标签：java, swing, loops, while-loop

我最近一直在做一个小型RPG游戏。目前，我遇到了一个问题，即当我选择 Go！从图形用户界面。我的主方法文件 RPGv6 中有 while 循环，另一个文件 BattleUI 中有 GUI。我应该从按钮行中选择一个动作（例如“攻击”），然后单击我要攻击的敌人。这将动作类型和目标提供给 executeSkills 方法，而 while 循环提供 currentActor。但是，每当我按下Go！按钮并执行此方法，while 循环停止。当我按下按钮时，该玩家的 turnTaken 应该设置为 true，而 while 循环应该将 currentActor 设置为 1（对于下一个演员）。

在以前的版本中，我设法让一个 while 循环和一个 GUI 以这种方式进行交互，所以我知道这是可以做到的——我只是不知道如何解决这个当前的问题。

```
 public class RPGv6 
{
public static actor[] player = new actor[3];
public static actor[] enemy  = new actor[3];
public static String selectionName = "";
public static boolean actionDetermined = false;
public static boolean targetDetermined = false;
public static boolean permission       = false;
public static int currentActor = 0;
public static Abilities actionSkills;

boolean placeholder = true;

public static void main(String[] args)
{

    createActors();
    System.out.println("actors created");
    BattleUI.createAndShowGui(player, enemy);
    System.out.println("gui created");

    boolean //Using these booleans as loop conditions does not work; not sure why; works in the if statements just below
    playerWin       = (enemy[0].dead == true && (enemy[1].dead == true) && (enemy[2].dead == true)),
    enemyWin        = (player[0].dead == true && (player[1].dead == true) && (player[2].dead == true));

    while(!playerWin && !enemyWin)
    {
        if(enemy[1].dead == true && (enemy[2].dead == true) && (enemy[3].dead == true))
            break;
        if(player[1].dead == true && (player[2].dead == true) && (player[3].dead == true))
            break;

        // player turn
        if(!player[0].turnTaken)
        {
            currentActor = 0;
                                    //System.out.println("loop executing");
        }
        if((!player[1].turnTaken) && (player[1].turnTaken))
        {
            currentActor = 1;
        }
        if((!player[2].turnTaken) && (player[2].turnTaken) && (player[1].turnTaken))
        {   
            currentActor = 2;
        }

        checkForDeath(player, enemy);
        checkForPermission();

        // enemy turn
        while(permission)
        {
            if(!enemy[1].turnTaken)
            {
                currentActor = 1;
            }
            if((!enemy[2].turnTaken) && (enemy[1].turnTaken))
            {
                System.out.println("entered player two");
                currentActor = 2;
            }
            if((!enemy[3].turnTaken) && (enemy[2].turnTaken) && (enemy[1].turnTaken))
            {   
                currentActor = 3;
            }
        }

        checkForDeath(player, enemy);
    }
}

public static void createActors()
{
    player[0] = new actor(1, "Knight");
    player[1] = new actor(1, "Mage");
    player[2] = new actor(1, "Rogue");

    enemy[0]  = new actor(1, "Slime");
    enemy[1]  = new actor(1, "Skeleton");
    enemy[2]  = new actor(1, "Necro");
}

public static void checkForPermission()
{
    if((player[1].turnTaken) && (player[2].turnTaken) && (player[3].turnTaken))
    {
        permission = true;
    }
}

public static void checkForDeath(actor[] player, actor[] enemy)
{
    for(int i = 1; i < player.length; i++)
    {
        if(player[i].HP <= 0)
            player[i].dead = true;
        if(player[i].dead == true)
            player[i].turnTaken = true;
        if(enemy[i].HP <= 0)
            enemy[i].dead = true;
        if(enemy[i].dead == true)
            enemy[i].turnTaken = true;
    }
} 
```

}

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class BattleUI extends JFrame implements MouseListener
{
public static actor[] player = RPGv6.player;
public static actor[] enemy  = RPGv6.enemy;

public static int
actionType = 0,
actionName = 0,
target = 0;
static actor[] targetType;

static JButton
jbtAttack    = new JButton("Attack"), jbtSkills  = new JButton("Skills"),
jbtMagic     = new JButton("Magic"), jbtInventory = new JButton("Inventory"), 
jbtGo        = new JButton("Go!"),
kntSk1, kntSk2, kntSk3, mgSk1,
mgSk2, rgSk1, rgSk2, rgSk3, rgSk4, kntMgc1, kntMgc2,
mgMgc1, mgMgc2, mgMgc3, mgMgc4, rgMgc1, rgMgc2, rgMgc3,
invt1, invt2, invt3, invt4, invt5, invt6;
public static JButton
jbtply1 = new JButton(), jbtply2 = new JButton(), jbtply3 = new JButton(),
jbtnmy1 = new JButton(), jbtnmy2 = new JButton(), jbtnmy3 = new JButton();
public static JLabel 
ply1Name, ply1HP, ply1MP, ply1SP, ply1Status,
ply2Name, ply2HP, ply2MP, ply2SP, ply2Status,
ply3Name, ply3HP, ply3MP, ply3SP, ply3Status,
nmy1Name, nmy1HP, nmy1MP, nmy1SP, nmy1Status,
nmy2Name, nmy2HP, nmy2MP, nmy2SP, nmy2Status,
nmy3Name, nmy3HP, nmy3MP, nmy3SP, nmy3Status;
private static JPanel
pStatusField1, pStatusField2, pStatusField3,
eStatusField4, eStatusField5, eStatusField6;

public static JTextArea jta;
static Color defaultColor;

//CardLayout
private static CardLayout cardManager;
private static JPanel deck;
private static String names[] = { "KnightSkillsCard", "MageSkillsCard", "RogueSkillsCard",
                                  "KnightMagicCard", "MageMagicCard", "RogueMagicCard",
                                  "InventoryCard"};

public BattleUI(actor[] player, actor[] enemy)
{
    //begin pStatus
        // Labels displaying actor statuses
        ply1Name   = new JLabel(player[0].name);
        ply1HP     = new JLabel("HP: "+player[0].HP);
        ply1MP     = new JLabel("MP: "+player[0].MP);
        ply1SP     = new JLabel("SP: "+player[0].SP);
        ply1Status = new JLabel("OK"); // placeholder; will need to replace with a method to generate icons symbolizing status

        ply2Name   = new JLabel(player[1].name);
        ply2HP     = new JLabel("HP: "+player[1].HP);
        ply2MP     = new JLabel("MP: "+player[1].MP);
        ply2SP     = new JLabel("SP: "+player[1].SP);
        ply2Status = new JLabel("OK");

        ply3Name   = new JLabel(player[2].name);
        ply3HP     = new JLabel("HP: "+player[2].HP);
        ply3MP     = new JLabel("MP: "+player[2].MP);
        ply3SP     = new JLabel("SP: "+player[2].SP);
        ply3Status = new JLabel("OK");

        nmy1Name   = new JLabel(enemy[0].name);
        nmy1HP     = new JLabel("HP: "+enemy[0].HP);
        nmy1MP     = new JLabel("MP: "+enemy[0].MP);
        nmy1SP     = new JLabel("SP: "+enemy[0].SP);
        nmy1Status = new JLabel("OK");

        nmy2Name   = new JLabel(enemy[1].name);
        nmy2HP     = new JLabel("HP: "+enemy[1].HP);
        nmy2MP     = new JLabel("MP: "+enemy[1].MP);
        nmy2SP     = new JLabel("SP: "+enemy[1].SP);
        nmy2Status = new JLabel("OK");

        nmy3Name   = new JLabel(enemy[2].name);
        nmy3HP     = new JLabel("HP: "+enemy[2].HP);
        nmy3MP     = new JLabel("MP: "+enemy[2].MP);
        nmy3SP     = new JLabel("SP: "+enemy[2].SP);
        nmy3Status = new JLabel("OK");

        // Panels holding the statuses for each actor
        pStatusField1 = new JPanel();
            pStatusField1.setLayout(new GridLayout(5, 1));
            pStatusField1.add(ply1Name);
            pStatusField1.add(ply1HP);
            pStatusField1.add(ply1MP);
            pStatusField1.add(ply1SP);
            pStatusField1.add(ply1Status);
        pStatusField2 = new JPanel();
            pStatusField2.setLayout(new GridLayout(5, 1));
            pStatusField2.add(ply2Name);
            pStatusField2.add(ply2HP);
            pStatusField2.add(ply2MP);
            pStatusField2.add(ply2SP);
            pStatusField2.add(ply2Status);
        pStatusField3 = new JPanel();
            pStatusField3.setLayout(new GridLayout(5, 1));
            pStatusField3.add(ply3Name);
            pStatusField3.add(ply3HP);
            pStatusField3.add(ply3MP);
            pStatusField3.add(ply3SP);
            pStatusField3.add(ply3Status);

        eStatusField4 = new JPanel();
            eStatusField4.setLayout(new GridLayout(5, 1));
            eStatusField4.add(nmy1Name);
            eStatusField4.add(nmy1HP);
            eStatusField4.add(nmy1MP);
            eStatusField4.add(nmy1SP);
            eStatusField4.add(nmy1Status);
        eStatusField5 = new JPanel();
            eStatusField5.setLayout(new GridLayout(5, 1));
            eStatusField5.add(nmy2Name);
            eStatusField5.add(nmy2HP);
            eStatusField5.add(nmy2MP);
            eStatusField5.add(nmy2SP);
            eStatusField5.add(nmy2Status);
        eStatusField6 = new JPanel();
            eStatusField6.setLayout(new GridLayout(5, 1));
            eStatusField6.add(nmy3Name);
            eStatusField6.add(nmy3HP);
            eStatusField6.add(nmy3MP);
            eStatusField6.add(nmy3SP);
            eStatusField6.add(nmy3Status);

        // Add the labels for actor status fields into buttons
        jbtply1.add(pStatusField1);
        jbtply2.add(pStatusField2);
        jbtply3.add(pStatusField3);

        jbtnmy1.add(eStatusField4);
        jbtnmy2.add(eStatusField5);
        jbtnmy3.add(eStatusField6);

        // Divides information display for player and enemy actors
        JPanel pStatusFieldPlayer    = new JPanel();
            pStatusFieldPlayer.setLayout(new FlowLayout());
            pStatusFieldPlayer.setBorder(BorderFactory.createTitledBorder("Player"));
            pStatusFieldPlayer.add(jbtply1);
            pStatusFieldPlayer.add(jbtply2);
            pStatusFieldPlayer.add(jbtply3);

        JPanel pStatusFieldEnemy     = new JPanel();
            pStatusFieldEnemy.setBorder(BorderFactory.createTitledBorder("Enemy"));
            pStatusFieldEnemy.add(jbtnmy1);
            pStatusFieldEnemy.add(jbtnmy2);
            pStatusFieldEnemy.add(jbtnmy3);

        // Panel for displaying actor information to user
        JPanel pStatus   = new JPanel();
            pStatus.setLayout(new GridLayout(2, 1));
            pStatus.add(pStatusFieldPlayer, BorderLayout.NORTH);
            pStatus.add(pStatusFieldEnemy, BorderLayout.SOUTH);
    //end pStatus

    // Panel for displaying action options
    JPanel pActions   = new JPanel();
        pActions.setLayout(new GridLayout(5, 1));
        pActions.add(jbtAttack);
        pActions.add(jbtSkills);
        pActions.add(jbtMagic);
        pActions.add(jbtInventory);
        pActions.add(jbtGo);

    // Text Area for displaying a narration of the executed actions
    JScrollPane scrollPane = new JScrollPane(jta = new JTextArea(5, 22));
        scrollPane.getVerticalScrollBar().addAdjustmentListener
        (new AdjustmentListener() 
            {   
                public void adjustmentValueChanged(AdjustmentEvent e) 
                {   
                    e.getAdjustable().setValue(e.getAdjustable().getMaximum());   
                }
            }
        ); 
        jta.setWrapStyleWord(true);
        jta.setLineWrap(true);
        jta.setSize(250, 90);
        jta.setEditable(false);

    // begin CardLayout
        // CardLayout Panel for displaying the abilities available to the current actor
        deck = new JPanel();
        cardManager = new CardLayout(); 
        deck.setLayout( cardManager );

        JPanel
        card1 = new JPanel(),
        card2 = new JPanel(), 
        card3 = new JPanel(),
        card4 = new JPanel(), 
        card5 = new JPanel(), 
        card6 = new JPanel(), 
        card7 = new JPanel(); 

            //card1
        kntSk1 = new JButton("Deadly Blow 20SP");
        kntSk2 = new JButton("Cripple 35SP");
        kntSk3 = new JButton("Maim 40SP");
            //card2
        mgSk1 = new JButton("Meditate");
        mgSk2 = new JButton("Balm 15SP");
            //card3
        rgSk1 = new JButton("Poison 35SP");
        rgSk2 = new JButton("Brew 20SP");
        rgSk3 = new JButton("Blind 30SP");
        rgSk4 = new JButton("Backstab 45SP");
            //card4
        kntMgc1 = new JButton("Ward 15MP");
        kntMgc2 = new JButton("Bless 20MP");
            //card5
        mgMgc1 = new JButton("Fireball 40MP");
        mgMgc2 = new JButton("Acid Burn 50MP");
        mgMgc3 = new JButton("Heal 25MP");
        mgMgc4 = new JButton("Time Stop 75MP");
            //card6
        rgMgc1 = new JButton("Dazzle 20MP");
        rgMgc2 = new JButton("Sting 30MP");
        rgMgc3 = new JButton("Heal 20MP");
            //card7
        invt1 = new JButton("Health Potion");
        invt2 = new JButton("Mana Potion");
        invt3 = new JButton("Stamina Potion");
        invt4 = new JButton("Shield Gem");
        invt5 = new JButton("Water of Life");
        invt6 = new JButton("Shuriken");

        card7.setLayout(new GridLayout(3, 3));

        card1.add(kntSk1);
        card1.add(kntSk2);
        card1.add(kntSk3);

        card2.add(mgSk1);
        card2.add(mgSk2);

        card3.add(rgSk1);
        card3.add(rgSk2);
        card3.add(rgSk3);
        card3.add(rgSk4);

        card4.add(kntMgc1);
        card4.add(kntMgc2);

        card5.add(mgMgc1);
        card5.add(mgMgc2);
        card5.add(mgMgc3);
        card5.add(mgMgc4);

        card6.add(rgMgc1);
        card6.add(rgMgc2);
        card6.add(rgMgc3);

        card7.add(invt1);
        card7.add(invt2);
        card7.add(invt3);
        card7.add(invt4);
        card7.add(invt5);
        card7.add(invt6);

        deck.add(card1, names[0]);
        deck.add(card2, names[1]);
        deck.add(card3, names[2]);
        deck.add(card4, names[3]);
        deck.add(card5, names[4]);
        deck.add(card6, names[5]);
        deck.add(card7, names[6]);
    // end CardLayout

    // Add Listeners to the Buttons
        kntSk1.addActionListener(new SkillListener());
        kntSk2.addActionListener(new SkillListener());
        kntSk3.addActionListener(new SkillListener());
        mgSk1.addActionListener(new SkillListener());
        mgSk2.addActionListener(new SkillListener());
        rgSk1.addActionListener(new SkillListener());
        rgSk2.addActionListener(new SkillListener());
        rgSk3.addActionListener(new SkillListener());
        rgSk4.addActionListener(new SkillListener());
        kntMgc1.addActionListener(new MagicListener());
        kntMgc2.addActionListener(new MagicListener());
        mgMgc1.addActionListener(new MagicListener());
        mgMgc2.addActionListener(new MagicListener());
        mgMgc3.addActionListener(new MagicListener());
        mgMgc4.addActionListener(new MagicListener());
        rgMgc1.addActionListener(new MagicListener());
        rgMgc2.addActionListener(new MagicListener());
        rgMgc3.addActionListener(new MagicListener());
        invt1.addActionListener(new InventListener());
        invt2.addActionListener(new InventListener());
        invt3.addActionListener(new InventListener());
        invt4.addActionListener(new InventListener());
        invt5.addActionListener(new InventListener());
        invt6.addActionListener(new InventListener());

        jbtply1.addActionListener(new SelectionListener());
        jbtply2.addActionListener(new SelectionListener());
        jbtply3.addActionListener(new SelectionListener());

        jbtnmy1.addActionListener(new SelectionListener());
        jbtnmy2.addActionListener(new SelectionListener());
        jbtnmy3.addActionListener(new SelectionListener());

        jbtnmy1.addMouseListener(this);
        jbtnmy2.addMouseListener(this);
        jbtnmy3.addMouseListener(this);

        jbtAttack.addMouseListener(this);
        jbtSkills.addMouseListener(this);
        jbtMagic.addMouseListener(this);
        jbtInventory.addMouseListener(this);

        jbtAttack.addActionListener(new ButtonListener());
        jbtSkills.addActionListener(new ButtonListener());
        jbtMagic.addActionListener(new ButtonListener());
        jbtInventory.addActionListener(new ButtonListener());

        jbtGo.addActionListener(new GoListener());

    // Add everything in
    JPanel pNarration = new JPanel();
        pNarration.add(scrollPane, BorderLayout.SOUTH);
    JPanel pHolder    = new JPanel();
        pHolder.setLayout(new GridLayout(2, 1));
        pHolder.add(pActions, BorderLayout.WEST);
    JPanel pHolder2   = new JPanel();
        pHolder2.setLayout(new GridLayout(2, 1));
        pHolder2.add(pStatusFieldPlayer, BorderLayout.NORTH);
        pHolder2.add(pStatusFieldEnemy, BorderLayout.SOUTH);
    JPanel pHolder3   = new JPanel();
        pHolder3.setLayout(new GridLayout(2, 1, - 200, 0));
        pHolder3.add(deck);
        pHolder3.add(pNarration);

    // add contents into frame
    add(pHolder, BorderLayout.WEST);
    add(pHolder2);
    add(pHolder3, BorderLayout.SOUTH);
}

class ButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        // Action Selection
        if(e.getSource() == jbtAttack)
        {
            actionType = 0;
            actionName = 0;
            RPGv6.actionDetermined = true;
            System.out.println("attack button pressed");
        }
        if(e.getSource() == jbtSkills)
        {
            // Selecting these buttons determines what card and options are displayed to the user
        }
        if(e.getSource() == jbtMagic)
        {

        }
        if(e.getSource() == jbtInventory)
        {

        }
    }
}

class GoListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == jbtGo)
        {
            System.out.println(RPGv6.currentActor);
            System.out.println(actionName);
            System.out.println(actionType);
            System.out.println(target);
            if(RPGv6.actionDetermined && RPGv6.targetDetermined)
            {
                executeSkill(actionType, actionName, player[RPGv6.currentActor], targetType[target]);
                player[RPGv6.currentActor].turnTaken = true;
                System.out.println("Go button pressed");
            }
            else
            {
                jta.append("You need to select an action and a target!");
            }
        }
    }
}

class SkillListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        // Knight Skills
        if(e.getSource() == "")
        {   //Deadly Blow
            actionType = 1; // 0 = Attack; 1 = Skill; 2 = Magic; 3 = Inventory
            actionName = 0; // Determines which skill to use
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 2;
            RPGv6.actionDetermined = true;
        }

        // Mage kills
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 0;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }

        // Rogue Skills
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 0;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 2;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 1;
            actionName = 3;
            RPGv6.actionDetermined = true;
        }
    }
}

class MagicListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 0;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }

        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 0;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 2;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 3;
            RPGv6.actionDetermined = true;
        }

        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 0;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 2;
            actionName = 2;
            RPGv6.actionDetermined = true;
        }
    }
}

class InventListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == "")
        {
            actionType = 3;
            actionName = 0;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 3;
            actionName = 1;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 3;
            actionName = 2;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 3;
            actionName = 3;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 3;
            actionName = 4;
            RPGv6.actionDetermined = true;
        }
        if(e.getSource() == "")
        {
            actionType = 3;
            actionName = 5;
            RPGv6.actionDetermined = true;
        }
    }
}

class SelectionListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        // Player Targets
        if(e.getSource() == jbtply1)
        {
            targetType = player;
            target = 0;
            RPGv6.targetDetermined = true;
        }
        if(e.getSource() == jbtply2)
        {
            targetType = player;
            target = 1;
            RPGv6.targetDetermined = true;
        }
        if(e.getSource() == jbtply3)
        {
            targetType = player;
            target = 2;
            RPGv6.targetDetermined = true;
        }

        // Enemy Targets
        if(e.getSource() == jbtnmy1)
        {
            targetType = enemy;
            target = 0;
            RPGv6.targetDetermined = true;
            System.out.println("enemy0 selected");
        }
        if(e.getSource() == jbtnmy2)
        {
            targetType = enemy;
            target = 1;
            RPGv6.targetDetermined = true;
            System.out.println("enemy1 selected");
        }
        if(e.getSource() == jbtnmy3)
        {
            targetType = enemy;
            target = 2;
            RPGv6.targetDetermined = true;
            System.out.println("enemy2 selected");
        }
    }
}

public void mouseClicked(MouseEvent e) 
{
    //if(e.getSource() == jbtAttack)
    //{
    //  //ui.deColorButtonBackGrounds();
    //  jbtAttack.setBackground(Color.orange);
    //}
    //if(e.getSource() == jbtSkills)
    //{
    //  //ui.deColorButtonBackGrounds();
    //  jbtSkills.setBackground(Color.orange);
    //}
    //if(e.getSource() == jbtMagic)
    //{
    //  //ui.deColorButtonBackGrounds();
    //  jbtMagic.setBackground(Color.orange);
    //}
    //if(e.getSource() == jbtInventory)
    //{
    //  ui.deColorButtonBackGrounds();
    //  jbtInventory.setBackground(Color.orange);
    //}
}
public void mouseEntered(MouseEvent e) 
{
    //if(e.getSource() == )
    //{
    //  eStatusField4.setBackground(Color.red);
    //}
    //if(e.getSource() == jbtOpt2)
    //{
    //  eStatusField5.setBackground(Color.red);
    //}
    //if(e.getSource() == jbtOpt3)
    //{
    //  eStatusField6.setBackground(Color.red);
    //}
}
public void mouseExited(MouseEvent e) 
{
    //if(e.getSource() == jbtOpt1)
    //{
    //  eStatusField4.setBackground(defaultColor);
    //}
    //if(e.getSource() == jbtOpt2)
    //{
    //  eStatusField5.setBackground(defaultColor);  
    //}
    //if(e.getSource() == jbtOpt3)
    //{
    //  eStatusField6.setBackground(defaultColor);
    //}
}
public void mousePressed(MouseEvent e) 
{

}
public void mouseReleased(MouseEvent e) 
{

}

public static void createAndShowGui(actor[] player, actor[] enemy)
{
    BattleUI frame = new BattleUI(player, enemy);
    frame.setTitle("Battle");
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setResizable(false);
    frame.setVisible(true); 
}

public static void executeSkill(int actionType, int actionName, actor caller, actor target)
{
    if(actionType == 0)//Attack
    {
        actions.attack(caller, target);
    }
    if(actionType == 1)
    {

    }
    if(actionType == 2)
    {

    }
    if(actionType == 3)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:57:23.497

对于初学者，我认为您需要将其分解为多个块并遍历它并逐步查看您的逻辑。

我开始通读并立即发现了一些逻辑问题。例如：

```
if((!player[2].turnTaken) && (player[2].turnTaken) && (player[1].turnTaken))
{   
    currentActor = 2;
} 
```

注意`(!player[2].turnTaken) && (player[2].turnTaken)`这种状态是不可能的，因为它不能同时为真和假。我有一种感觉，可能还有更多这样的地方。（此外，除非您尝试将逻辑组聚集在一起，否则您不需要将`a == b`条件包装起来。）`()`

IE `if((a == true) && (b == true) && (c == true)) {}`

是相同的：

`if(a == true && b == true && c == true) {}`

而且，更容易阅读（个人意见）

`if(a && b && c) {}`

# iphone - 从 uitabbarController 视图中关闭模态视图

> ID：10944687
> 
> 赞同：1
> 
> 时间：2012-06-08T07:27:52.993
> 
> 标签：iphone, objective-c, uitabbarcontroller, modalviewcontroller

我呈现了一个模态视图，其中呈现的视图包含一个选项卡控制器。视图显示正确，但是当我将dismissModalViewController 添加到选项卡视图控制器中的按钮时，它没有被解散。视图没有发生任何事情。

我怎么能解雇那个模态视图控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:43:54.680

呈现视图控制器也应该是处理模态视图控制器的解散的控制器。您应该使用委托来通知呈现视图控制器它可以关闭它呈现的视图控制器：

在模态视图控制器中：

```
@protocol SomeProtocol<NSObject>
- (void)didFinishDoingWhatItNeedsToDo:(id)sender;
@end

@interface ModalViewController : UIViewController
@property (nonatomic, weak) id <SomeProtocol> delegate;
@end

@implementation

- (IBAction)buttonClicked:(id)sender {

    [self.delegate didFinishDoingWhatItNeedsToDo:self];

} 
```

然后在呈现视图控制器中：

```
@interface SomeObject : UIViewController <SomeDelegate>
@end

@implementation

- (void)someMethod {

    ModalViewController *mvc = [[ModalViewController alloc] init];
    mvc.delegate = self;

    [self presentViewController:mvc animated:YES completion:nil];
}

- (void)didFinishDoingWhatItNeedsToDo:(id)sender {

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:32:26.083

当您使用标签栏呈现控制器时，您必须使用：

```
[self presentModalViewController:newTabBarController animated:YES]; 
```

所以当你想辞退时，你必须说，

```
[self.tabBarController dismissModalViewControllerAnimated:YES] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:35:37.850

```
[[self parentViewController] dismissModalViewControllerAnimated:YES]; 
```

# javascript - 加载本地 Java 脚本文件

> ID：10944699
> 
> 赞同：0
> 
> 时间：2012-06-08T07:28:40.047
> 
> 标签：javascript, cordova

在我`index.html`的身上，我正在做以下事情：

```
<script  src="jquery/jquery.js"></script> 
<script  src="managment.js"></script>
<script  src="jquery/jquery.mobile-1.1.0.js"></script> 
```

做了一些计算后，我需要使用**managment.js**文件中的一个函数：

```
 $.getScript("managment.js", function(){

                            alert("Script loaded and executed.");
                            login();
                            });
            } 
```

最后是`managment.js`文件：

```
<script type="text/javascript">
function login(){
    alert("asdasdasdasdasdasd");
}
</script> 
```

我的问题是该`login()`函数从未被调用。实际上，我内部`getScript`函数的警报也没有被调用，但奇怪的是，如果我检查`jquery.js`文件是否已加载，则会调用警报。更多，如果我尝试调用 login() 而不做`getScript`任何事情，则预期会发生。我的文件结构如下：

![在此处输入图像描述](../Images/f7fa98ac7b55be0e7ef6ef954a543da4.png)

（**注意：您可以看到我正在使用 2 个`managment.js`文件。我尝试了这两种方法来查看问题是否出在文件的路径上。**）

我在这里想念什么？为了相关性，我使用的是PhoneGap，但这也不适用于浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:35:44.410

该`management.js`文件不应包含`<script type="text/javascript">`标签。它应该是：

```
function login(){
    alert("asdasdasdasdasdasd");
} 
```

希望能帮助到你！:)

# java - JiBX Eclipse 插件未在 Rational Application Developer 8 中显示

> ID：10944708
> 
> 赞同：0
> 
> 时间：2012-06-08T07:29:14.430
> 
> 标签：java, eclipse, jibx

我想在 IBM Rational Application Developer 8 中安装 JiBX Eclipse 插件。安装工作正常。但是在重新启动 IDE 后，JibX 也没有上下文菜单条目。

如何为 Jibx 添加条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:51:25.893

否决，
检查您的 Rational Application Developer 安装的“插件”目录以确保 JiBX 插件在那里。它应该命名为：
org.jibx.eclipse_1.2.3.jar。
听起来 RAD 和 eclipse 处理插件的方式可能略有不同。如果它不存在，请从此处下载我们的 jar：http:
[//jibx.sourceforge.net/eclipse/plugins/](http://jibx.sourceforge.net/eclipse/plugins/)
并将其放在 RAD 'dropins' 目录中。
希望这有助于
唐

# php - 使用 PHP 从非布尔 MySQL 导出复选框状态

> ID：10944714
> 
> 赞同：0
> 
> 时间：2012-06-08T07:29:47.170
> 
> 标签：php, mysql

目前我有一个使用字段和复选框的表单。字段和复选框都完美地更新了数据库：

```
<?php
 function renderForm($articletitle, $articleorganization, $articledate, $articleurl, $articletags )
 {
 ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="stylized" class="myform">
      <form id="form" name="form" action="" method="post"> 
```

. . . . . .

```
 if(count($articletags) > 0)
{
 $articletags_string = implode(",", $articletags);
}

 if (isset($_POST['submit']))
 { 
 $articletitle = mysql_real_escape_string(htmlspecialchars($_POST['articletitle']));
 $articleorganization = mysql_real_escape_string(htmlspecialchars($_POST['articleorganization']));
 $articledate = mysql_real_escape_string(htmlspecialchars($_POST['articledate']));
 $articleurl = mysql_real_escape_string(htmlspecialchars($_POST['articleurl']));
 $articletags = implode(',', $_POST['articletags']); 
```

. . .

```
mysql_query("INSERT articles SET articletitle='$articletitle',   articleorganization='$articleorganization', articledate='$articledate',   articleurl='$articleurl', articletags='$articletags' ")
 or die(mysql_error()); 

 // once saved, redirect to success page
 header("Location:addsuccess.html"); 
 }
 }
 else

{
 renderForm('','','','');
 }
?> 
```

不过，现在我想知道是否应该使用布尔复选框来代替。

原因是我也构建了一个编辑表单，它完全遵循新的输入表单，除了值已经通过 MySQL DB 填写。

所以，我假设使用布尔值会容易得多，对吧？

因此，我应该为复选框指定不同的名称，而不是使用数组，并且在 edit.php 页面上我可以使用如下内容：

```
<?php
 function renderForm($id, $articletitle, $articleorganization, $articledate, $articleurl, $articletags)
 {
 ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="stylized" class="myform">
      <form id="form" name="form" action="" method="post">
      <input type="hidden" name="id" value="<?php echo $id; ?>"/>
        <h1>Edit Details for &nbsp; &nbsp;<?php echo $articletitle; ?></h1>
        <fieldset>
          <legend>Article details</legend>
          <div class="row">
            <div class="field"><label>Article Title</label><input type="text" name="articletitle" value="<?php echo $articletitle; ?>"/></div>
          </div>
          <div class="row">
            <div class="field"><label>Article Author </label><input type="text" name="articleorganization" value="<?php echo $articleorganization; ?>"/></div>
            <div class="field"><label>Article Date </label><input type="text" name="articledate" value="<?php echo $articledate; ?>"/></div>
          </div>
          <div class="row">
            <div class="field"><label>Article Url: </label><input type="text" name="articleurl" value="<?php echo $articleurl; ?>"/></div>
          <div class="row">

          <input type="checkbox" name="articletags1" value="checkbox" id="articletags_0" />
          <input type="checkbox" name="articletags2" value="checkbox 2" id="articletags_1" />

          </div>
        </fieldset>
        <footer><input type="submit" name="submit" value="Submit"></footer></form>
    </div>
  </body>
</html>
<?php
 }

 include('settings.php');

 if (isset($_POST['submit']))
 { 
 if (is_numeric($_POST['id']))
 {
 $id = $_POST['id'];
 $articletitle = mysql_real_escape_string(htmlspecialchars($_POST['articletitle']));
 $articleorganization = mysql_real_escape_string(htmlspecialchars($_POST['articleorganization']));
 $articledate = mysql_real_escape_string(htmlspecialchars($_POST['articledate']));
 $articleurl = mysql_real_escape_string(htmlspecialchars($_POST['articleurl']));
 $articletags = implode(',', $_POST['articletags']);

 if ($articletitle == '' || $articletags == '')
 {
 $error = 'ERROR: Please fill in all required fields!';
 renderForm($id, $articletitle, $articletags);
 }
 else
 {
 mysql_query("UPDATE articles SET articletitle='$articletitle', articleorganization='$articleorganization', articledate='$articledate', articleurl='$articleurl', articletags='$articletags' WHERE id=$id")
 or die(mysql_error()); 

 header("Location: editsuccess.html"); 
 }
 }
 else
 {
 echo 'Error!';
 }
 }
 else
 {
 if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
 {
 $id = $_GET['id'];
 $result = mysql_query("SELECT * FROM articles WHERE id=$id")
 or die(mysql_error()); 
 $row = mysql_fetch_array($result);
 if($row)
 {
 $articletitle = $row['articletitle'];
 $articleorganization = $row['articleorganization'];
 $articledate = $row['articledate'];
 $articleurl = $row['articleurl'];
 $articletags = $row['articletags'];

 renderForm($id, $articletitle, $articleorganization, $articledate, $articleurl, $articletags, '');
 }
   else
 {
   echo "No results!";
 }
 }
   else
 {
   echo 'Error!';
    }
     }
?> 
```

问题在于，我在 edit.php 页面上的复选框仍然没有显示选中状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:34:35.190

您需要以与使用`checked="checked"`相同的方式使用`value`. 见解决方案底部：

```
<input type="checkbox" <?php if(isset($_POST[articletags1])) echo 'checked="checked" ' ?>name="articletags1" value="checkbox" id="articletags_0" />
<input type="checkbox" <?php if(isset($_POST[articletags2])) echo 'checked="checked" ' ?>name="articletags2" value="checkbox 2" id="articletags_1" /> 
```

希望这有效。**更新了正确的代码。**用于`ini_set('display_errors', 1);`获取生成的错误。

# c# - 数据绑定 Run 的 Text 属性

> ID：10944716
> 
> 赞同：3
> 
> 时间：2012-06-08T07:30:00.620
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我正在尝试在运行时对代码中`Run`的 a进行数据绑定`TextBlock`，但我终生无法弄清楚如何。

Internet 上的一些消息来源表明，如果没有一些（不太漂亮）额外的解决方法，这是不可能的，更重要的是，当您尝试在 XAML 中执行此操作时，它应该完全失败。

然而，在我的应用程序中，我有以下内容，效果很好：

```
<DataTemplate x:Key="PitchTemplate">
    <Grid Width="120" Height="120" HorizontalAlignment="Center" VerticalAlignment="Center">
        <TextBlock HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   TextAlignment="Center">
            <Run Text="{Binding}" FontFamily="{StaticResource PhoneFontFamilySemiBold}" FontSize="36"/>
            <LineBreak/>
            <Run Text="{Binding Frequency, StringFormat=\{0:n2\}Hz}" FontFamily="{StaticResource PhoneFontFamilyNormal}" Foreground="{StaticResource PhoneSubtleBrush}"/>
        </TextBlock>
    </Grid>
</DataTemplate> 
```

所以我想：如果可以在 XAML 中完成，那么应该可以在代码中完成。

到目前为止，无济于事。在代码中使用“常规”绑定方式是行不通的；该类`Run`不继承自`FrameworkElement`，因此没有`SetBinding`方法，并且它的`Text`属性不是`DependencyProperty`.

使用`BindingOperations.SetBinding`不起作用，因为该`Text`属性不是`DependencyProperty`.

我已经到了我愿意接受它不能在运行时完成的点上（尽管不是没有最后一次尝试 StackOverflow），但我仍然很好奇是否

*   这可以在运行时在代码中完成吗？

如果不：

*   它如何在 XAML 中工作？

**编辑：**

显示的示例只是为了表明它*可以*在 XAML 中完成。我需要在代码中创建绑定的原因是我有一个控件可以动态创建其他元素，这些元素需要进行数据绑定。

**更新：**

As Pete and I both found out, there *is* a dependency property for `Text`, but it's private. I assume that's why it does work through XAML (the xaml parser probably has more rights when it comes to reflection, and more knowledge in general about classes).

The upside is, that this means (tried & tested) it also works through XamlReader.Load(), which is (sofar) the cleanest solution I've come up with.

But if anyone has anything better, I'd be glad to hear about it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:46:23.347

Run.Text is backed by the private TextProperty which means you can't directly set its value without some reflection gimmicks, something like this:

```
 Run r=new Run();
        r.Text = "Moo";
        var field=r.GetType().GetField("TextProperty", BindingFlags.Static | BindingFlags.NonPublic);
        var dp=field.GetValue(null) as DependencyProperty;
        BindingOperations.SetBinding(r, dp, new Binding {...}); 
```

This is rather ugly, but perhaps it can be useful.

You can find various workarounds for this. [This](https://stackoverflow.com/questions/5253622/databinding-textblock-runs-in-silverlight-wp7) SO post uses a custom attached property to configure binding. The attached property is used because Run is a sealed class in Silverlight so you can't create you own Run that supports binding.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:40:17.260

The reason that it works in XAML but not in code-behind might be that there is a dependency property for Text, but it is private. It's a little bit 'black magic' to me though, so that's just a guess! This is a strange one, as in WPF the Run does inherit from FrameworkContentElement and has a SetBinding method...

Could you create a subclass of Run that contains a public DependencyProperty for text? I'm afraid I don't have the Silverlight dev tools to hand to try it out at the moment, but I'll try and take a look later.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:38:08.793

Thanks both to Pete & Panagiotis for their efforts and suggestions (both 1 up).

In the end, I decided to go with my own solution (found in the "Update" section of the question): Create dedicated XAML strings containing the `Run` including the binding, and use XamlReader.Load() to parse it, and return a `Run` object.

The situation I'm working on is quite specific, so a local solution to the problem is good enough (for now). Reflection, as suggested by Panagiotis, won't work due to restrictions imposed by Silverlight. Lastly, the [`BindableRuns`](https://stackoverflow.com/questions/5253622/databinding-textblock-runs-in-silverlight-wp7) solutions would need either extensive work to deal with nested properties, or I would have to "uglify" my view model, so I discarded it (also for now).

Thanks all for your input.

# java - 在 1 个请求中将多个文件从 Android 上传到 AppEngine

> ID：10944718
> 
> 赞同：4
> 
> 时间：2012-06-08T07:30:14.010
> 
> 标签：java, android, google-app-engine, servlets, blobstore

我知道我可以使用 multipart/form POST 请求一次将 1 个文件上传到 AppEngine。AppEngine 还支持[上传多个文件](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#getUploads%28HttpServletRequest%29)，但您必须做一些花哨的 JSP 工作才能使其正常工作。

我有一个应用程序需要我上传一些表单数据、2 个图像和 3 个文本字段。这可以通过 AppEngine 完成吗？我一直在努力寻找这方面的信息，但很难满足我需要的灵活性。我将把数据存储在 blob 存储/数据存储中。

我需要一个 Java 解决方案。

这是我的 POST 方法的签名：

```
import javax.ws.rs.Consumes;
import javax.ws.rs.POST;

@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void post(
       @Context HttpServletRequest request,
       @Context HttpServletResponse response)
       throws FileUploadException, IOException {} 
```

如果您确实需要，请复制并粘贴 Java Servlet。以上是问题和相关的 servlet 片段。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.channels.Channels;
import java.util.Iterator;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;

import org.apache.commons.fileupload.FileItemHeaders;
import org.apache.commons.fileupload.FileItemIterator;
import org.apache.commons.fileupload.FileItemStream;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

import com.google.appengine.api.blobstore.BlobstoreService;
import com.google.appengine.api.blobstore.BlobstoreServiceFactory;
import com.google.appengine.api.files.AppEngineFile;
import com.google.appengine.api.files.FileReadChannel;
import com.google.appengine.api.files.FileService;
import com.google.appengine.api.files.FileServiceFactory;
import com.google.appengine.api.files.FileWriteChannel;

@Path("/upload")
public class FileUploadServlet {

    private BlobstoreService blobstoreService = BlobstoreServiceFactory
            .getBlobstoreService();

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    public void post(@Context HttpServletRequest request,
            @Context HttpServletResponse response) throws FileUploadException,
            IOException {

        final ServletFileUpload upload = new ServletFileUpload();
        final FileItemIterator fileIter = upload.getItemIterator(request);

        while (fileIter.hasNext()) {
            final FileItemStream item = fileIter.next();
            String name = item.getName();
            String fieldName = item.getFieldName();
            String contentType = item.getContentType();
            Log.d("Name  =  " + name);
            Log.d("Field-Name  =  " + fieldName);
            Log.d("Content-Type  =  " + contentType);
            FileItemHeaders headers = item.getHeaders();
            if(headers != null) {
                Iterator<String> it = (Iterator<String>)headers.getHeaderNames();
                while(it.hasNext()) {
                    String h = it.next();
                    Log.d(h + "  =  " + headers.getHeader(h));
                }
            }
            if (item.isFormField()) {
                // Nothing
            } else {
                RawImageData data = new RawImageData();
                data.load(item.openStream());
                            // RawImageData reads the stream and stores it into a large byte[] called data.imageData
                ByteBuffer bb = ByteBuffer.wrap(data.imageData);
                FileService fs = FileServiceFactory.getFileService();
                AppEngineFile file = fs.createNewBlobFile(contentType);
                FileWriteChannel write = fs.openWriteChannel(file, true);

                write.write(bb);
                write.closeFinally();
                String path = file.getFullPath();
                Log.d(path);

                // Later, read from the file using the file API
                boolean lock = false; // Let other people read at the same time
                FileReadChannel readChannel = fs.openReadChannel(file,
                        false);
                            // CRASHES WITH java.nio.charset.IllegalCharsetNameException: image/jpeg
                            // contentType = "image/jpeg"
                // Again, different standard Java ways of reading from the
                // channel.
                BufferedReader reader = new BufferedReader(Channels.newReader(readChannel, contentType));

                readChannel.close();
            }
        }

        response.setContentType("text/html");
        response.getOutputStream().write("success".getBytes());
    }
} 
```

完全例外：

```
WARNING: /api/upload
java.nio.charset.IllegalCharsetNameException: image/jpeg
    at java.nio.charset.Charset.checkName(Charset.java:284)
    at java.nio.charset.Charset.lookup2(Charset.java:458)
    at java.nio.charset.Charset.lookup(Charset.java:437)
    at java.nio.charset.Charset.forName(Charset.java:502)
    at java.nio.channels.Channels.newReader(Channels.java:381)
    at com.futonredemption.starstarstar.FileUploadServlet.post(FileUploadServlet.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    blah blah blah 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:44:38.163

您可以创建自己的[多部分文件上传处理程序，然后通过](https://developers.google.com/appengine/kb/java#fileforms)[Blobstore FileService API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)保存文件。

# css - 使背景图像位置垂直居中向左

> ID：10944720
> 
> 赞同：1
> 
> 时间：2012-06-08T07:30:19.937
> 
> 标签：css, background, background-image, css-sprites, background-position

我有我工作的图片，

![在此处输入图像描述](../Images/a835fdc4ecb7b59e3583adbb6cfb159f.png)

我希望左侧的图标应该位于相同的位置，但垂直对齐中心...图标大小不同...这可以通过我想要的 css 实现吗..?？

这是我的代码，

```
.iconSmall {
    background-attachment: scroll;
    background-clip: padding-box;
    background-color: transparent;
    background-origin: padding-box;
    background-position: 2% 50%;
    background-repeat: no-repeat;
}

<a href="index.html" style="background-image:url(images/001_56.png);" class="iconSmall">Beauty and Spas</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:42:13.950

直到并且除非您的所有图标大小相同，否则代码不会按照您的意愿对齐。

但你能做的是

```
.iconSmall {
background-attachment: scroll;
background-clip: padding-box;
background-color: transparent;
background-origin: padding-box;
background-position: 2% 50%;
background-repeat: no-repeat;
} 
```

然后让你的每个列表项都有另一个类，就像

```
<li class="iconSmall foodResturant">....</li>
.foodResturant {
background-position:1px 2px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T07:42:59.493

是的，这很好用。您只需要指定位置并重复：

```
.iconSmall {
    background-position: 5px center;
    background-repeat: no-repeat;
    padding-left: 30px;
} 
```

您可能想要使用像素而不是百分比。如果您愿意，可以使用`center`关键字代替。`50%`

提示：您可以在元素上使用多个类，以便您可以将背景图像放在样式表中：

```
.iconSmall.beauty {
    background-image: url(images/001_56.png);
}

<a href="index.html" class="iconSmall beauty">Beauty and Spas</a> 
```

演示：http: [//jsfiddle.net/Guffa/UrXA2/](http://jsfiddle.net/Guffa/UrXA2/)

# c++ - 从另一个字符串、一个 int 和一个字符串文字定义一个字符串

> ID：10944729
> 
> 赞同：0
> 
> 时间：2012-06-08T07:31:42.473
> 
> 标签：c++, string

首先，有问题的功能。

```
bool Animation::loadFrames()
{
        sf::Texture frame[frameCount];
        std::string pathToFrame;
        for(int i = 1; i < frameCount; i++)
        {
            pathToFrame = pathToAnimation + i + ".jpg";
            if(!frame[i].loadFromFile(pathToFrame)) return false;
        }
        return true;
} 
```

给我带来麻烦的线路是

```
pathToFrame = pathToAnimation + i + ".jpg"; 
```

pathToAnimation 是另一个 std::string，frameCount 是一个 int。我想以某种方式制作一个看起来像这样的字符串：“./Assets/Sprites/Player/Stand/1.jpg”

我知道为什么我的代码不起作用，我只是不知道正确的代码是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:34:11.150

您可能正在寻找[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)：

```
std::ostringstream ostr;
ostr << pathToAnimation << 123 << ".jpg"

std::cout << ostr.str(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:44:22.717

除了使用[std::ostringstream](http://en.cppreference.com/w/cpp/io/basic_ostringstream)之外，C++11 还为[std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)提供了整数 anf 浮点类型的重载。与`std::to_string`：

```
pathToFrame = pathToAnimation + std::to_string(i) + ".jpg"; 
```

与`std::ostringstream`：

```
std::ostringstream os;
os << pathToAnomation << i << ".jpg";
pathToFrame = os.str(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:41:08.070

使用[boost::format](http://www.boost.org/doc/libs/1_49_0/libs/format/)你可以写：

```
pathToFrame = (boost::format("%1%%2%.jpg") % pathToAnimation % i).str(); 
```

使用[boost::lexical_cast](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)你也可以写

```
pathToFrame = pathToAnimation + boost::lexical_cast<std::string>(i) + ".jpg"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:46:49.727

除了 Joachim 的回答，您还可以使用 C++11 的新`to_string`函数将 an`int`转换为`std::string`

```
pathToFrame = pathToAnimation + std::to_string(i) + ".jpg"; 
```

# java - 如何解决“org.hibernate.QueryException：未设置所有命名参数”错误？

> ID：10944733
> 
> 赞同：1
> 
> 时间：2012-06-08T07:31:52.600
> 
> 标签：java, mysql, hibernate

我正在使用 java-hibernate-mysql 组合

当我进行更新查询时，我得到以下错误。我不明白休眠有什么问题。在我发布了我得到的错误之后：

```
org.hibernate.QueryException: Not all named parameters have been set: [0] [update       sequence s set s.cmd_output='neox     tty1         2012-06-08 09:40 (:0)
neox     pts/1        2012-06-08 09:41 (:0)
neox     pts/0        2012-06-08 09:41 (:0)
neox     pts/2        2012-06-08 09:41 (:0)
neox     pts/3        2012-06-08 12:48 (deval-PC.local.lan)
[neox@localhost ~]$ ', s.cmd_output_time='2012-06-08 12:48:58' where s.id=43]
at org.hibernate.impl.AbstractQueryImpl.verifyParameters(AbstractQueryImpl.java:106)
at org.hibernate.impl.QueryImpl.executeUpate(QueryImpl.java:85)
at db_model.sequence_db.insert_Sequence_new(sequence_db.java:242)
at views.CaptureNavigationView$10.widgetSelected(CaptureNavigationView.java:555)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2696)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2660)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2494)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:674)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:667)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at nspl.test.ui.Application.start(Application.java:43)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at    org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLaunch    er.java:110)
at     org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

谁能告诉我为什么我得到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:35:41.337

您是否正在执行带有`:`字符的 sql 字符串？如果是这样，Hibernate 需要一个参数，而您没有设置它。

```
String sql = "update SomeTable set someColumn = :value"; 
```

使用它，您通常会使用设置 value 参数

```
SQLQuery query = getSession().createSQLQuery(sql);
query.setString("value", "Some value with : in it"); 
```

或类似的。我只能假设您的值中有一个`:`不表示参数的值，因此您应该将其构建为字符串并将其设置为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:42:44.487

问题在于这里的粗体部分：2012-06-08 09:41 ( **:0** )

您不应该连接 String 来构建您的查询，而是使用参数。这是在 hql 查询中转义 : 字符的唯一方法。

例子 ：

```
String param1 = "neox     tty1         2012-06-08 09:40 (:0)\n" +
                "neox     pts/1        2012-06-08 09:41 (:0)\n"+
                "neox     pts/0        2012-06-08 09:41 (:0)\n" +
                "neox     pts/2        2012-06-08 09:41 (:0)\n" +
                "neox     pts/3        2012-06-08 12:48 (deval-PC.local.lan)\n" +
                "[neox@localhost ~]$ ";
String param2 = "2012-06-08 12:48:58";
String id = 43;

String hqlQuery = "update sequence s set s.cmd_output = :cmd_output, " +
                  "s.cmd_output_time = :cmd_output_time where s.id = :cmdId";

getHibernateTemplate().findByNamedParam(hqlQuery, 
   new String[] {"cmd_output", "cmd_output_time", "cmdId"},
   new Object[] {param1, param2, id}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:48:45.997

总结

1.你应该设置所有命名参数 2.当你动态设置值到命名参数时，不应该有 : 在里面。如果你有：你应该使用字符串连接并放弃命名参数的方法。如第一个答案所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T06:40:25.623

如果条件是动态的，您可以通过 puttong 绕过命名参数查询。

因此，您将其作为查询字符串，然后通过放置条件来附加您的命名参数。

您不必删除命名参数方法。

# xpath - 使用 XPath 表达式如何获得紧跟节点的第一个文本节点？

> ID：10944735
> 
> 赞同：5
> 
> 时间：2012-06-08T07:31:56.133
> 
> 标签：xpath

我想找到具有此文本的确切节点：“公司”。到达该节点后，我想立即到达该节点之后的下一个文本节点，因为它包含公司名称。我怎样才能用 Xpath 做到这一点？

XML的片段是：

```
<div id="jobsummary">
    <div id="jobsummary_content">
        <h2>Job Summary</h2>
        <dl>
            <dt>Company</dt>
            <!-- the following element is the one I'm looking for -->
            <dd><span class="wrappable">Pinpoint IT Services, LLC</span></dd>
            <dt>Location</dt>
            <dd><span class="wrappable">Newport News, VA</span></dd>
            <dt>Industries</dt>
            <dd><span class="wrappable">All</span></dd>
            <dt>Job Type</dt>
            <dd class="multipledd"><span class="wrappable">Full Time</span></dd><dd class="multipleddlast"><span class="wrappable"> Employee</span></dd>
        </dl>
    </div>
</div> 
```

我使用以下 xpath 到达 Company 标签：`//*[text()= 'Company']` 现在我想到达下一个文本节点。我的 XML 是动态的。所以我不能像`<dd>`获取公司价值那样对节点类型进行硬编码。但这可以肯定该值在**紧邻的下一个文本节点**中。

**那么如何在文本为 Company 的节点之后立即到达文本节点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:49:16.900

如果您无法对`following-sibling`节点的任何部分进行硬编码，您的 xpath 应如下所示：

```
//*[text()='Company']/following::*/*/text() 
```

假设所需的文本始终包含在另一个元素中，例如`span`.

* * *

要测试给定的`dt`文本，请将您的 xpath 修改为

```
//*[text()='Company' or text()='Company:' or text()='Company Name']/following::*/*/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:34:29.953

**使用这个通用 XPath 表达式来选择所需的文本节点，即使它包含在静态未知的标记元素中**：

```
(//*[text()='Company']/following-sibling::*[1]//text())[1] 
```

**当根据提供的 XML 文档评估此 XPath 表达式时**：

```
<div id="jobsummary">
    <div id="jobsummary_content">
        <h2>Job Summary</h2>
        <dl>
            <dt>Company</dt>
            <!-- the following element is the one I'm looking for -->
            <dd><span class="wrappable">Pinpoint IT Services, LLC</span></dd>
            <dt>Location</dt>
            <dd><span class="wrappable">Newport News, VA</span></dd>
            <dt>Industries</dt>
            <dd><span class="wrappable">All</span></dd>
            <dt>Job Type</dt>
            <dd class="multipledd"><span class="wrappable">Full Time</span></dd><dd class="multipleddlast"><span class="wrappable"> Employee</span></dd>
        </dl>
    </div>
</div> 
```

**正是选择了想要的文本节点**：

```
Pinpoint IT Services, LLC 
```

**即使我们将 XML 更改为这个**：

```
<div id="jobsummary">
    <div id="jobsummary_content">
        <h2>Job Summary</h2>
        <div>
            <p>Company</p>
            <!-- the following element is the one I'm looking for -->
            <dd><span class="wrappable"><b><i><u>Pinpoint IT Services, LLC</u></i></b></span></dd>
            <dt>Location</dt>
            <dd><span class="wrappable">Newport News, VA</span></dd>
            <dt>Industries</dt>
            <dd><span class="wrappable">All</span></dd>
            <dt>Job Type</dt>
            <dd class="multipledd"><span class="wrappable">Full Time</span></dd><dd class="multipleddlast"><span class="wrappable"> Employee</span></dd>
        </div>
    </div>
</div> 
```

**上面的 XPath 表达式仍然选择想要的文本节点：**

```
Pinpoint IT Services, LLC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:42:09.490

用于`//*[text()='Company']/following-sibling::dd`获取下一个 dd。

您甚至可以为该 dd 插入条件并在其中走得更远。 `following-sibling::elementName`只需在满足您要求的同一父级别查找下一个兄弟姐妹。在没有条件的情况下，像上面一样，它将获得 'Company' 之后的下一个 dd。

文本在跨度中，因此您可以尝试

`//*[text()='Company']/following-sibling::dd/span`

另一个明确的例子是，假设您还想获取当前选定的“公司”的下一个行业文本。

有`//*[text()='Company'`，

你可以像这样修改它：`//*[text()='Company']/following-sibling::dt[text()='Industries']/dd/span`

**当然，您可以使用变量，而不是硬编码 text() 的值。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T08:03:07.233

您可以使用 XPathNavigator 并逐个处理每个节点类型

我认为 XPathNavigator::MoveToNext 是您正在寻找的方法。

也有示例代码。 [http://msdn.microsoft.com/en-us/library/9yxc3x24.aspx](http://msdn.microsoft.com/en-us/library/9yxc3x24.aspx)

# iphone - 为什么 XCode 静态分析器无法检测到未发布的保留属性？

> ID：10944736
> 
> 赞同：1
> 
> 时间：2012-06-08T07:32:00.640
> 
> 标签：iphone, objective-c, ios, xcode, static-analysis

我有这样声明的保留属性：

```
@property (nonatomic, retain) NSMutableDictionary *codes; 
```

然后我合成这个：

```
@synthesize codes; 
```

我使用这样的属性：

```
self.codes = [NSMutableDictionary dictionary]; 
```

然后，我忘记`[codes release];`在我的`dealloc`.

当我在 XCode 4.3.2 中运行分析器时，这不会显示为问题。我的基础 SDK 是 iOS 5.1，我的编译器是 Apple LLVM 编译器 3.1

为什么分析仪不选择这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:59:19.140

我想这是因为分析器无法可靠地检测跨方法/库边界的保留/释放问题。

您可以想象将您的`codes`数组的所有权传递给某个外部方法或库，这些方法或库稍后会为您释放它。这将是不好的做法，因为接收方法应该在需要时保留它，但我见过没有经验的开发人员做过这种事情。

所以你可能会在课堂上的某个地方看到这个：

```
[SomeAPI takeThisArrayAndReleaseItLater:codes]; 
```

分析器无法知道您的类不再负责释放数组。尽管您没有遵循良好的内存管理实践，但给您一个警告是不正确的。

该分析器非常擅长仅对实际问题发出警告。我认为我从未在 beta 版本之外看到过误报，这是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:40:39.363

如果您没有从配置中更改任何内容，那么无论何时您以 ios5+ 为目标，您都将自动使用不需要您释放或保留的 ARC（自动引用计数）。

> iOS 5 中最具颠覆性的变化是增加了自动引用计数，简称 ARC。ARC 是新的 LLVM 3.0 编译器的一项功能，它完全消除了所有 iOS 开发人员都喜欢讨厌的手动内存管理。

*这是 iOS 教程团队成员 Matthijs Hollemans 的帖子，他是一位经验丰富的 iOS 开发人员和设计师。*

# php - .HTACCESS - 将 www.example.com/side.php?id=* 重定向到 www.example.com

> ID：10944738
> 
> 赞同：-1
> 
> 时间：2012-06-08T07:32:00.993
> 
> 标签：php, string, .htaccess, redirect, root

我最近协助将一个网站从一个纯开发域迁移到一个实时站点，在该站点上，曾经有一个由另一个 CMS 系统处理的站点，而不是我们目前使用的站点。当前系统是 Joomla，但我认为这对我的问题并不重要。

因此，对于当前站点，URL 是从标准 Joomla 格式重写的，以去除 index.php 并在地址中添加 .html 后缀，这意味着 URL 看起来像这样：

[http://example.com/folder/page.html](http://example.com/folder/page.html)

在由另一个 CMS 系统处理的旧站点中，URL 具有以下结构：

[http://example.com/side.php?id=1](http://example.com/side.php?id=1)

我们是一个社会组织，有许多网站链接到我们——还有很多我们甚至不知道的——所以我需要处理的问题是：我需要重定向其他网站上的所有这些死链接，以便他们简单地得到指向我们网站的根目录。

任何人都可以向我解释如何进行 .htaccess 重定向，如下所示：

/side.php?id=* 到 example.com 的根目录

在这种情况下，我的意思是 * 表示任何数字，因为自然有很多具有不同 ID 的页面。

如果他们指向 www，对我来说没有任何意义。前缀与否。

提前感谢您的帮助，我希望我之前没有问过一个已经回答过的问题，但是我对 .htaccess 的经验非常有限，并且搜索并尝试了不同的解决方案并没有为我做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:37:09.743

在根文件夹的 .htaccess 中，添加以下内容：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} id=\d+
RewriteRule ^side\.php$ http://%{SERVER_NAME}/ [R=301,L,QSD] #Remove the ",QSD" for Apache <2.4.0, or to keep the query string. 
```

R=301 将告诉浏览器/搜索引擎该页面已被永久移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:35:38.087

像这样的规则应该有效：

```
RewriteCond %{HTTP_HOST} .*
RewriteCond %{QUERY_STRING} id=\d+
RewriteRule ^side.php http://example.com [L,R=301] 
```

这将在外部重定向，并带有 HTTP 301 响应（永久移动）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:41:58.137

您需要的是一些[301 Moved Permanently](http://en.wikipedia.org/wiki/HTTP_301)响应，让浏览器和搜索引擎知道您正在将页面移动到新位置。我不会使用 mod_rewrite 将*所有*请求重定向到此 side.php 页面，而是分析您旧网站的每个页面并确定所有内容已移动到何处。有了这个，使用 htaccess[重写指令](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirect)通知浏览器个别页面正在移动

```
Redirect 301 /side.php?id=123 /about_us.html
Redirect 301 /side.php?id=456 /contact_us.html 
```

我推荐这种方法，因为它将那些导航到过时页面的人重定向到与他们请求的旧页面具有相似内容的新页面，而不是仅仅将他们全部重定向到您的主页。

# mysql - MySQL 查询优化与 group by 和 order by rand

> ID：10944739
> 
> 赞同：1
> 
> 时间：2012-06-08T07:32:01.637
> 
> 标签：mysql, optimization

我对以下非常慢的查询有疑问：

```
    从 B 中选择 A.*  
    A.id=B.fk_A 上的内部连接  
    WHERE A.creationDate BETWEEN '20120309' AND '20120607'  
    按 A.id 分组  
    兰德订购（）
    限制 0,5

```

解释 ：

```
    id select_type table type possible_keys key key_len ref rows Extra
    1 SIMPLE B 索引 fk_A fk_A 4 \N 58962 使用索引；使用临时的；使用文件排序
    1 SIMPLE A eq_ref PRIMARY,creationDate PRIMARY 4 B.fk_A 1 使用 where

```

索引：

```
    A.id (int) = PRIMARY 索引
    A.creationDate（日期）=索引
    B.fk_A = 索引

```

你有什么要优化的吗？

非常感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:50:45.887

我认为 RAND() 函数将为每一行创建一个 Rand() 值（这就是`using temporary`显示的原因，`filesort`因为它不能使用索引。

最好的方法是`SELECT MAX(id) FROM a`获得最大值。然后在 1 和 MAX(id) 之间创建 5 个随机数并进行`SELECT ... WHERE a.id IN (...)`查询。

如果结果少于 5 行（因为一条记录已被删除），则重复该过程，直到您没问题（或最初创建 100 个随机数并将查询限制为 5。

这不是 100% 的 mysql 解决方案，因为您必须在代码中执行逻辑，但我相信会快得多。

**更新** 刚刚在网上找到了一篇有趣的文章，基本上是一样的： http: [//akinas.com/pages/en/blog/mysql_random_row/](http://akinas.com/pages/en/blog/mysql_random_row/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:14:18.300

一种可能的查询重写：

```
SELECT A.*
FROM A   
WHERE A.creationDate BETWEEN '20120309' AND '20120607'  
  AND EXISTS
      ( SELECT *
        FROM B
        WHERE A.id = B.fk_A
      )  
ORDER BY RAND() 
LIMIT 0,5 
```

# iphone - 将参数传递给 Soap 请求

> ID：10944742
> 
> 赞同：0
> 
> 时间：2012-06-08T07:32:15.693
> 
> 标签：iphone, xcode

我正在尝试将几个参数传递给 SOAP 服务。我尝试在下面列出的代码块的最后执行此操作。出于某种原因，我无法让它工作。有人可以帮我一下吗。提前致谢！

```
 NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                         "<soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">"
                         "<soap12:Body>"
                         "<UserLogin xmlns=\"http://tempuri.org/\">"
                         "<username>string</username>"
                         "<password>string</password>"
                         "</UserLogin>"
                         "</soap12:Body>"
                         "</soap12:Envelope>, %@, %@", txtUsername.text, txtPassword.text]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:38:29.817

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                         "<soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">"
                         "<soap12:Body>"
                         "<UserLogin xmlns=\"http://tempuri.org/\">"
                         "<username>%@</username>"
                         "<password>%@</password>"
                         "</UserLogin>"
                         "</soap12:Body>"
                         "</soap12:Envelope>", txtUsername.text, txtPassword.text]; 
```

# ruby-on-rails - 从另一个 EC2 实例访问 Heroku 应用程序上的服务

> ID：10944748
> 
> 赞同：0
> 
> 时间：2012-06-08T07:32:30.900
> 
> 标签：ruby-on-rails, heroku, amazon-ec2, amazon-web-services

嗨，我正在开发一个项目，可能正在 Heroku 上使用 RoR，它为另一个运行 C++ 服务器的 EC2 实例提供 Web 服务。我知道有从 Heroku (https://devcenter.heroku.com/articles/external-services) 访问 EC2 实例的材料，但我还没有看到相反的材料。

我想知道如果两个实例都托管在美国东部地区，是否有办法从 EC2 C++ 服务器向 Heroku 服务发出低延迟请求？（沿着上面链接中提到的路线，只是在相反的方向。）

我确信在 C++ 实例和 Heroku 之间使用普通的 HTTP 请求会起作用，但我想知道是否有更好的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:26:39.240

我不熟悉 Heroku，但由于它们在 EC2 连接上运行，因此两个实例都应该相当简单。为了最大限度地减少每个实例之间的延迟，您应该在美国东部区域内设置您的 C++ 实例并使用实例的内部 DNS。

如果你想从 Heroku 实例访问你的 C++ 实例，你可以使用[net-ssh gem](http://rubygems.org/gems/)，它允许你通过 ssh 连接并直接在你的 C++ 实例上做任何你想做的事情。

在某些情况下，您的 C++ 实例上的处理将需要一些时间，并且您的 Rails 应用程序将不得不“等待”结果，因此您可以考虑使用队列服务在您的实例之间进行通信。一个例子是 Amazon 的 SQS 服务：只需设置一个队列，然后让 C++ 实例将 rails 应用程序需要的信息发布到队列中。您必须编写一个由 cron 定期启动的 rake 任务，或者您可以编写一个在后台连续运行的守护进程，让 rails 应用程序从队列中收集信息。

编写 rake 任务很容易，这应该可以帮助您入门：[rake, rake, rake your boat](http://nubyonrails.com/articles/rake-rake-rake-your-boat)，这是一个 Railscast，它应该为您提供一些编写守护程序的指导： [#129 自定义守护程序](http://railscasts.com/episodes/129-custom-daemon)。

# android - 添加许多叠加层后，MapView 平移和缩放很慢

> ID：10944749
> 
> 赞同：4
> 
> 时间：2012-06-08T07:32:39.123
> 
> 标签：android, performance, overlay, android-mapview, panning

所以我花了很多时间试图弄清楚如何加快速度，但我现在没有想法。我有一堂课，`mapPopup`其中 a`MapView`显示在整个屏幕上。有一个 in 数组的数组`GeoPoint`，`mapPopup`我想在数组的第二维中的每个 GeoPoint 之间画线。我已经使用`mapOverlay`扩展的自定义类完成了这项任务`Overlay`，但我遇到的问题是，一旦绘制了所有地图叠加层，地图的缩放或平移速度非常慢。将所有叠加层添加到地图后，通常会超过 2000 个，但它们都非常小。

考虑到如果叠加层较少，地图会更快地工作，我将所有线绘制到三个单独的叠加层，而不是每条线的单独叠加层。这实际上导致地图的平移和缩放速度变慢，所以我恢复到许多小的叠加层。

我将不胜感激一些信息丰富且易于理解的方法描述，我可以用来使地图更快。潜在方法的伪代码或真实代码也将帮助我更好地理解它。我的代码发布在下面。再一次，请注意我的叠加层和地图正确显示；我只是想要一种允许更快平移和缩放的方法。

mapOverlay 类

```
public class mapOverlay extends Overlay {

private Projection projection;
private GeoPoint gp1;
private GeoPoint gp2;
private int color;

public mapOverlay(int color, MapView map, GeoPoint geo1, GeoPoint geo2) {
    // super();
    this.projection = map.getProjection();
    this.gp1 = geo1;
    this.gp2 = geo2;
    this.color = color;
}

public void draw(Canvas canvas, MapView mapv, boolean shadow) {
    super.draw(canvas, mapv, false);

    Paint mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(4);
    mPaint.setColor(this.color);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path1 = new Path();

    projection.toPixels(gp1, p1);
    projection.toPixels(gp2, p2);
    path1.moveTo(p1.x, p1.y);
    path1.lineTo(p2.x, p2.y);
    canvas.drawPath(path1, mPaint);

}

} 
```

mapPopup 类

```
public class mapPopup extends MapActivity {

public String[] trailNames;
public String tableName = "";
public int numTrails = 0;
public static GeoPoint[][] geoPoints;
public int[] colors = new int[] { Color.WHITE, Color.BLUE, Color.CYAN,
        Color.RED, Color.YELLOW, Color.MAGENTA, Color.GRAY, Color.LTGRAY };
public int[] newColors;
// public Bitmap b;
public GeoPoint firstP;

public void loadMapData(Bitmap b, MapView map, int[] colors,
        GeoPoint[][] GPAA, int ZoomLevel) {
    // GPAA holds an array of an array of GeoPoint
    Log.i("DEBUG", "starting loadMapDataTask");

    map.setSatellite(true);
    MapController mc = map.getController();

    mapOverlay[][] mapOverlay = new mapOverlay[GPAA.length][];
    Log.i("DEBUG", "length of GPAA is: " + GPAA.length);

    // i cycles through the first dimension of GPAA
    for (int i = 0; i < GPAA.length; i++) {
        GeoPoint[] geoPoints = GPAA[i];
        int length = geoPoints.length - 1;
        mapOverlay[i] = new mapOverlay[length]; //
        int pointCount = 0;
        // z cycles through the second dimension of GPAA
        for (int z = 0; z < length; z++) {
            mapOverlay[i][z] = new mapOverlay(colors[i], map,
                    geoPoints[pointCount], geoPoints[pointCount + 1]);
            pointCount++;
        }
    }

    // Actually adds overlays to map
    List<Overlay> mapOverlays = map.getOverlays();
    for (int i = 0; i < mapOverlay.length; i++) {
        int length = mapOverlay[i].length;
        Log.i("DEBUG", "Adding map overlays for trail: " + i);
        Log.i("DEBUG", "Length of mapOverlay[i] is: " + length);
        for (int z = 0; z < length; z++) {
            mapOverlays.add(mapOverlay[i][z]);
        }
    }

    mc.animateTo(GPAA[0][0]);
    mc.setZoom(ZoomLevel);
    Rect r = new Rect();
    map.getDrawingRect(r);
    map.invalidate(r);
}

public static class runBGLoad extends
        AsyncTask<bgLoadParam, Integer, GeoPoint[][]> {

    public GeoPoint[][] geoPoints;

    protected GeoPoint[] getGPa(Context context, String name, int ID) {
        File file = context.getFileStreamPath(name);
        if (file.exists() == false) {
            Log.i("DEBUG", "Creating file");
            InputStream is;
            FileOutputStream fos;

            try {
                Log.i("DEBUG", "id is " + ID);
                is = context.getResources().openRawResource(ID);
                byte[] buffer = new byte[is.available()];
                is.read(buffer);
                fos = context.openFileOutput(name, Context.MODE_PRIVATE);
                fos.write(buffer);
                fos.close();
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

        } else {
            Log.i("DEBUG", "File already exists");
        }

        // Log.i("DEBUG", "starting to get geopoints");

        List<Location> gpsPoints = XMLParser.getPoints(file);

        int i = 0;
        int index = 0;

        GeoPoint[] geoPoints = new GeoPoint[gpsPoints.size()];

        // makes list of gpsPoints into GeoPoint[]
        ListIterator<Location> it = gpsPoints.listIterator();

        while (it.hasNext()) {
            index = it.nextIndex();
            Location loc = gpsPoints.get(index);
            geoPoints[i] = new GeoPoint((int) (loc.getLatitude() * 1E6),
                    (int) (loc.getLongitude() * 1E6));
            it.next();
            i++;
        }

        return geoPoints;
    }

    @Override
    protected GeoPoint[][] doInBackground(bgLoadParam... params) {

        Context context = params[0].getContext();
        int tNLength = params[0].getTNames().length;
        geoPoints = new GeoPoint[tNLength][];

        for (int i = 0; i < params[0].getTNames().length; i++) {
            String modName = params[0].getTNames()[i].toLowerCase()
                    .replace(' ', '_');
            int identifier = context.getResources().getIdentifier(modName,
                    "raw", context.getPackageName());
            geoPoints[i] = getGPa(params[0].getContext(), modName
                    + "_mapfile", identifier);
        }
        Log.i("DEBUG", "TEST");
        mapPopup.geoPoints = geoPoints;
        Log.i("DEBUG", "TEST2");
        return geoPoints;
    }

    @Override
    protected void onPostExecute(GeoPoint[][] result) {
        Log.i("DEBUG", "The points are loaded.");
        mapPopup.geoPoints = result;
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    Intent intent = getIntent();
    String[] extras = intent.getStringArrayExtra("strings");

    tableName = extras[1];
    numTrails = Integer.parseInt(extras[2]);
    trailNames = intent.getStringArrayExtra("trailNamesA");

    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_popup_layout);

    newColors = new int[numTrails];
    for (int i = 0; i < numTrails; i++) {
        newColors[i] = colors[i];
    }
    ViewGroup layout = (ViewGroup) findViewById(R.id.map_popup);
    TextView[] tVs = new TextView[numTrails];

    for (int i = 0; i < numTrails; i++) {
        LayoutParams params = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        tVs[i] = new TextView(getApplicationContext());
        tVs[i].setText(trailNames[i]);
        tVs[i].setId(i + 700);
        tVs[i].setTextColor(colors[i]);
        tVs[i].setBackgroundColor(Color.BLACK);

        if (i > 0) {
            params.addRule(RelativeLayout.BELOW, (699 + i));
        }

        layout.addView(tVs[i], params);
    }

}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    MapView map = (MapView) findViewById(R.id.popupMV);
    Bitmap b = Bitmap.createBitmap(map.getWidth(), map.getHeight(),
            Bitmap.Config.RGB_565);

    try {
        trailsActivity.mapPreLoad.get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }

    loadMapData(b, map, newColors, geoPoints, 17);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:24:37.397

I'm currently facing the same problematic, and I just found a workaround : prevent the overlays from drawing when zooming or panning. That's not perfect and I'm still looking for a better solution, but at least the map is usable without waiting 5 seconds for each pan or zoom.

Here is the code I used in my `Overlay` extension. It's not Java but C# (using Monodroid) - but it should be easily understandable.

```
public override bool OnTouchEvent (MotionEvent e, Android.GoogleMaps.MapView mapView)
{
    if (e.Action == MotionEventActions.Down)
        _mustDraw = false;
    else if (e.Action == MotionEventActions.Up)
        _mustDraw = true;
    return base.OnTouchEvent (e, mapView);
}

public override void Draw (Android.Graphics.Canvas canvas, Android.GoogleMaps.MapView mapView, bool shadow)
{
    if (shadow || !_mustDraw)
        return;
    // ...
} 
```

That solution works for every map-touch based action, and now performs with a good speed, I just lack implementation of the same behaviour when zooming in or out using built-in zoom controls, but I first need to fight some of my bugs before doing this part, I'll come back on this part later.

# sql-server-2008 - SQL Server - 在 1 个数据库上更改数据库排序规则的最佳策略（不更改服务器默认值）

> ID：10944750
> 
> 赞同：1
> 
> 时间：2012-06-08T07:32:45.503
> 
> 标签：sql-server-2008

问题：有没有一种有效的方法可以在 SQL Server 中切换 1 个数据库的排序规则？

我已经通过属性 -> 选项 -> 排序规则设置了数据库的排序规则。尽管此排序规则是为新字段设置的，但数据库中现有的基于文本的字段均未更改。这是我需要完成的。

我需要在其上切换排序规则的数据库很大（50+GB，750+ 个表），因此手动更改数据库中的所有字段不是一种选择。

以下情况如何：

*   为数据库结构创建脚本
*   导出所有数据
*   删除数据库
*   使用正确的排序规则创建一个空数据库
*   创建数据库结构 - 所有基于文本的字段现在都应设置为数据库默认值
*   导入数据
*   巴达兵，巴达繁荣？

其他策略？

我可以查询主数据库并在那里更改排序规则吗？

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:49:59.113

我之前遇到过这个问题，我发现的唯一方法是保存-删除-加载并填充该数据库。

另外，我猜你已经浏览过这个[页面](http://msdn.microsoft.com/en-us/library/ms175835.aspx)了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:14:50.630

您可以想象创建一堆查询，这些查询将产生像“Alter table [schema].[TableName] alter column [ColName] [type] collat​​e [New Collat​​ion] [nullability]”这样的行作为输出。这可以使用内置的 sys.Schemas、sys.Tables 和 sys.Columns 系统视图来完成。

样本：

```
select 'alter table [' + s.name + '].[' + t.name + '] alter column [' + c.name 
    + '] nvarchar(' + CAST(c.max_length/2 as nvarchar) +') ' 
    + ' collate Finnish_Swedish_CI_AI ' 
    + (case when c.is_nullable = 1 then ' null ' else ' not null ' end) 
from sys.tables t
    join sys.schemas s on t.schema_id = s.schema_id
    join sys.columns c on t.object_id = c.object_id
where t.type='U' and c.system_type_id = 231 
```

该示例将查找类型为 nvarchar([length]) 的列并生成更改语句以将排序规则更改为 Finnish_Swedish_CI_AI。

请注意，此示例仅作为**概念证明**。如果您想探索这种可能的解决方案，您必须花一些时间研究上述系统视图。

您可能必须单独查询来处理 nvarchar、nchar、ntext 和 varchar、char、文本字段。Nvarchar/Varchar(max) 字段可能需要特别考虑，以及任何潜在的字符类型计算列。

# c - 编译器行为？

> ID：10944754
> 
> 赞同：4
> 
> 时间：2012-06-08T07:32:57.240
> 
> 标签：c, visual-studio-2010, compiler-construction, cpu, compiler-optimization

我正在查看一些源代码，我想知道以下是否是线程安全的？我听说过编译器或 CPU 指令/读取重新排序（它与分支预测有关吗？）并且下面的 Data->unsafe_variable 变量可以随时由另一个线程修改。

我的问题是：根据编译器/CPU 重新排序读/写的方式，下面的代码是否有可能允许两次获取 Data->unsafe_variable？（见第二个片段）

**注意**：我不担心第一次访问，只要不通过'if'，任何数据都可以在那里，我只是担心在'if'之后再次获取数据的可能性。我还想知道在这里转换为 volatile 是否有助于防止双重获取？

```
int function(void* Data) {

    // Data is allocated on the heap
    // What it contains at this point is not important
    size_t _varSize = ((volatile DATA *)Data)->unsafe_variable;

    if (_varSize > x * y)
    {
        return FALSE;
    }

    // I do not want Data->unsafe_variable to be fetch once this point reached,
    // I want to use the value "supposedly" stored in _varSize
    // Would any compiler/CPU reordering would allow it to be double fetched?

    size_t size = _varSize - t * q;

    function_xy(size);

    return TRUE;
} 
```

出于安全原因，基本上我不希望程序像这样运行：

```
 _varSize = ((volatile DATA *)Data)->unsafe_variable;
    if (_varSize > x * y)
    {
        return FALSE;
    }

    size_t size = ((volatile DATA *)Data)->unsafe_variable - t * q;
    function10(size); 
```

我在这里简化，他们不能使用互斥锁。但是，在第一行之后使用 _ReadWriteBarrier() 或 MemoryBarrier() 而不是 volatile 演员表会更安全吗？（VS编译器）

编辑：为代码提供更多上下文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:35:53.343

代码被破坏的原因有很多。我将只指出一个更微妙的，因为其他人已经指出了更明显的。对象不是`volatile`。将指针转换为指向 volatile 对象的指针不会使对象变得 volatile，它只是对编译器有欺骗性。

但还有更重要的一点——你正在以完全错误的方式处理这件事。您应该检查代码是否正确，即是否保证可以工作。你不够聪明，没有人能想出系统可能无法按照你的假设去做的所有可能方式。因此，请不要做出这些假设。

考虑诸如 CPU 读取重新排序之类的事情是*完全*错误的。您应该期望 CPU 执行并且只执行它需要执行的操作。你绝对不应该考虑它可能失败的具体机制，而只考虑它是否*保证*工作。

你所做的就像试图通过检查员工是否接种流感疫苗、检查他是否还活着等等来确定员工是否可以保证上班。您无法检查，甚至无法想到他可能无法出现的所有可能方式。所以如果发现你必须检查那些东西，那就不能保证，依赖它是坏的。时期。

你不能通过说“CPU 没有做任何可以破坏它的事情，所以没关系”来编写可靠的代码。您可以通过说“我确保我的代码不依赖于相关标准无法保证的任何内容”来制作可靠的代码。

为您提供了完成这项工作所需的所有工具，包括内存屏障、原子操作、互斥体等。请使用它们。

你不够聪明，无法想出不能保证有效的事情可能会失败的所有方式。而且你有很多东西可以保证工作。修复此代码，如果可能，与编写它的人讨论如何使用*正确的*同步。

这听起来有点啰嗦，对此我深表歉意。但是我见过太多使用这种“技巧”的代码，这些“技巧”在测试机器上运行良好，但在新 CPU、新编译器或新版本的操作系统出现时就崩溃了。像这样修复代码可能会令人难以置信的痛苦，因为这些黑客隐藏了实际的同步要求。正确的答案几乎总是清晰而准确地编写你真正想要的代码，而不是假设你会得到它，因为你不知道你不会得到它的任何原因。

这是来自痛苦经历的宝贵建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:36:39.913

标准很明确。如果任何线程可能正在修改对象，则所有线程中的所有访问都必须同步，否则您将有未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:17:20.710

C++ 的唯一可移植解决方案是[C++11 atomics](http://en.wikipedia.org/wiki/C++11#Threading_facilities)，它在[即将推出的 VS 2012](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)中可用。

至于 C，我不知道最近的 C 标准是否带来了一些可移植的设施，我没有遵循，但由于您使用的是 Visal Studio，无论如何都没关系，因为微软没有实施最近的 C 标准。

不过，如果您知道自己正在为 Visual Studio 开发，则可以依赖[此编译器提供的保证，该保证](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686355%28v=vs.85%29.aspx)适用于 C 和 C++。其中一些是隐式的（访问 volatile 变量也意味着应用了一些内存屏障），一些是显式的，例如使用[_MemoryBarrier](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684208%28v=vs.85%29.aspx)内在。

[内存模型的整个主题在Xbox 360 和 Microsoft Windows 的无锁编程注意事项中进行](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418650%28v=vs.85%29.aspx)了深入讨论，这应该会给您一个很好的概述。请注意：您输入的主题充满了棘手的主题和令人讨厌的惊喜。

注意：依赖 volatile 是不可移植的，但是如果您使用旧的 C / C++ 标准，无论如何都没有可移植的解决方案，因此如果需要，请准备好面对针对不同平台重新实现它的需求。在编写可移植线程代码时，[volatile 被认为几乎没用](http://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming/)：

> 对于多线程编程，volatile 经常被错误地认为要解决两个关键问题：
> 
> *   原子性
>     
>     
> *   内存一致性，即另一个线程看到的线程操作的顺序。

# c# - 如果 UDP 数据包在线，我能保证在应用层得到它们吗？

> ID：10944755
> 
> 赞同：4
> 
> 时间：2012-06-08T07:33:03.510
> 
> 标签：c#, windows, udp, reliability, ethercat

首先，我理解 UDP 不是一个可靠的协议，并且我不能保证通过网络接收数据包。

但是，如果数据包确实到达了我的机器，我是否可以保证在应用程序级别接收它，或者网络堆栈可以将其丢弃而不受惩罚？

我问的原因是我似乎偶尔会丢失数据包，即使我知道它们在线上（简单的 EtherCAT 总线，所以数据包总是环回）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:57:36.977

不，即使数据包到达您的机器，也不能保证数据包会到达您的应用程序。

内核的 UDP 接收队列是有限的，如果数据包到达的速度比您的应用程序处理它们的速度快，则队列将填满并且一些数据包将被丢弃。

您可以增加接收缓冲区的大小（请参阅[此问题](https://stackoverflow.com/questions/2090850/specifying-udp-receive-buffer-size-at-runtime-in-linux)），但不能使其不受限制。

# microphone - “如何使用 NAudio API 操作麦克风（笔记本电脑嵌入式麦克风）？”

> ID：10944756
> 
> 赞同：-1
> 
> 时间：2012-06-08T07:33:08.493
> 
> 标签：microphone, naudio

我想问：“如何使用 NAudio API 操作麦克风（笔记本电脑嵌入式麦克风）？”

我不喜欢记录来自麦克风的声音，而是以 dB 为单位进行测量。

它就像一个水龙头打开并通过滤水器提取随水而来的所有污垢（数据）。

谢谢你。

注意：编程语言 = C#。编程知识 = UnderGrad

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:09:37.943

如果您使用的是 NAudio，您将在`DataAvailable`事件中以字节数组的形式获取记录的数据。假设您以 16 位录制，那么您将每两个字节使用`BitConverter`类或进行自己的位操作将其转换为短 (Int16)。

这为您提供了可以根据需要处理的示例值。要获得 dB 值，您可以将样本的绝对值除以 32768，取其对数（以 10 为底），然后乘以 20。

# sql-server-ce - SQL Server CE 替换子选择

> ID：10944757
> 
> 赞同：0
> 
> 时间：2012-06-08T07:33:26.283
> 
> 标签：sql-server-ce, subquery

我有这个 SQL 语句：

```
SELECT *
FROM history
WHERE (fk_person = 2119) AND (action = 2) AND (date =
                                                      (SELECT MAX(day) AS maxDay
                                                       FROM history AS hist
                                                       WHERE (fk_person = 2119))) 
```

据我所知 SQL Server CE 不支持子查询。

我该如何更换它？

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:38:34.370

尝试

```
SELECT h1.*
FROM history h1
inner join FROM history h2 on h1.fk_person = h2.fk_person
WHERE h1.fk_person = 2119
AND h1.action = 2
AND h1.day = MAX(h2.day) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:43:33.683

我不确定有多少记录相同`MAX(day)`，但如果您只需要一个，以下可能对您有用：

```
SELECT TOP (1) *
FROM history
WHERE (fk_person = 2119)
AND (action = 2) 
ORDER BY day DESC 
```

# javascript - 在谷歌地图中设置信息窗口圆角

> ID：10944763
> 
> 赞同：4
> 
> 时间：2012-06-08T07:34:18.140
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个多标记谷歌地图，它工作正常，但我想将信息窗口设置为圆角

我的**代码是：**

```
<script type="text/javascript">

var locationList = new Array( '23.2531803, 72.4774396', '22.808782, 70.823863' );

var message = new Array('Kalol , Gujarat , India , 382721<br /><br /> Go to <a href="/joomla_1.5/index.php?option=com_content&amp;view=article&amp;id=9:chinta-ta-ta-chita-chita-wwwsongspk&amp;catid=1:cat1&amp;Itemid=7">Kalol</a>', 'Morbi , Gujarat , India , 363641<br /><br /> Go to <a href="/joomla_1.5/index.php?option=com_content&amp;view=article&amp;id=9:chinta-ta-ta-chita-chita-wwwsongspk&amp;catid=1:cat1&amp;Itemid=7">Morbi</a>');

var map;
var lat_min = 22.808782;
var lat_max = 23.2531803;
var lng_min = 70.823863;
var lng_max = 72.4774396;
 window.onload = function() {
    var myOptions = {
              mapTypeId: google.maps.MapTypeId.ROADMAP
             }
           map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
           map.setCenter(new google.maps.LatLng(
                        ((lat_max + lat_min) / 2.0),
                        ((lng_max + lng_min) / 2.0)
                       ));

            map.fitBounds(new google.maps.LatLngBounds(
                     new google.maps.LatLng(lat_min - 0.01 , lng_min - 0.01),
                     new google.maps.LatLng(lat_max + 0.01, lng_max + 0.01)
                    ));
             for (var i = 0; i < locationList.length; i++)
             {
                 var args = locationList[i].split(",");
                 var location = new google.maps.LatLng(args[0], args[1])
                 var marker = new google.maps.Marker({
                  position: location,
                  map: map,
                  animation: google.maps.Animation.DROP
                  });
                  var j = i + 1;
                   marker.setTitle(message[i].replace(/(<([^>]+)>)/ig,""));
                   attachSecretMessage(marker, i);
        }
}
function attachSecretMessage(marker, number) {
var infowindow = new google.maps.InfoWindow(
{ 
content: message[number],
});
google.maps.event.addListener(marker, 'click', function() {
infowindow.open(map, marker);
});

}
</script>
<div id="map_canvas" style="width:615px; height:400px;"></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T07:38:26.203

infoBox 构造函数接受一个`boxClass`使用字符串值调用的参数，该参数可以设置此信息框的 css 类，然后您可以使用它来自定义它。

这是一个示例：

```
 var label1 = new InfoBox({
        content: "<div id='label1'>1\. Click Me! <br><small>Pane: floatPane (above)</small></div>",
        boxClass: "labelMap label1",
        disableAutoPan: true,
        position: new google.maps.LatLng(49.24660149427584,-123.11008930206299),
        closeBoxURL: "",
        isHidden: false,
        pane: "floatPane" ,    // Pane 2
        enableEventPropagation: true,
});
label1.setMap(_map); 
```

# jquery - 将多个值插入隐藏字段

> ID：10944765
> 
> 赞同：2
> 
> 时间：2012-06-08T07:34:25.913
> 
> 标签：jquery, select

我有一个选择列表，您可以在其中选择多个城市 - 选择城市时，我想将邮政编码添加到隐藏字段，我现在的解决方案将值插入隐藏字段，但是，它会在 fx 时覆盖值：单击一个新城市 - 它应该只是附加到值，例如： value="value1|value2|value3"

```
 $jq('.select-cities').click(function () {
    var zipcodeValue = $jq(this).val();
    //alert(zipcodeValue);
    $jq('.hiddenFieldChosenAreas').val(zipcodeValue);
    $jq('.select-cities option:selected').appendTo('.chosen-cities');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:38:12.943

试试这个：

```
$jq('.select-cities').click(function () {
    var zipcodeValue = $jq(this).val();
    //alert(zipcodeValue);
    var oldVal = $jq('.hiddenFieldChosenAreas').val();
    $jq('.hiddenFieldChosenAreas').val(oldVal+"|"+ zipcodeValue);
    $jq('.select-cities option:selected').appendTo('.chosen-cities');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:44:50.110

```
$jq('.select-cities').click(function () {
    var zipcodeValue = $.trim( this.value );
    $jq('.hiddenFieldChosenAreas').val(function(i, oldVal) {
       return oldVal + '|' + zipcodeValue;
    });
    $jq('option:selected', this).appendTo('.chosen-cities');
}); 
```

# c# - 为什么 Powershell 没有看到它已经加载了这个程序集？

> ID：10944771
> 
> 赞同：2
> 
> 时间：2012-06-08T07:35:03.037
> 
> 标签：c#, plugins, powershell, .net-assembly, assembly-resolution

这是一个很长的，所以请紧紧抓住。

这个想法是，当引用 Core.dll（见下文）时，应用程序将创建一个类型为的新对象`Core`，并且在这样做时，构造函数将扫描`C:\Problems`文件夹以查找包含使用该`IPlugin`接口的类型的任何 DLL。

当我从控制台应用程序引用 Core.dll 时，它可以工作。当我从 PowerShell 执行等效操作时，它不起作用，除非 Core.dll 在 GAC 中。

这些是详细信息：

我有一个程序集（Core.dll），它是以下结果：

```
public class Core
{
    List<IPlugin> plugins = new List<IPlugin>();

    public Core(string path)
    {
        LoadPlugins(path);
        foreach (IPlugin plugin in plugins)
            plugin.Work();
    }

    void LoadPlugins(string path)
    {
        foreach (string file in Directory.GetFiles(path))
        {
            FileInfo fileInfo = new FileInfo(file);
            Assembly dllAssembly = Assembly.LoadFile(file);
            foreach (Type type in dllAssembly.GetTypes())
            {
                Type typeInterface = type.GetInterface("Problems.IPlugin");
                if (typeInterface != null)
                    plugins.Add((IPlugin)Activator.CreateInstance(
                                    dllAssembly.GetType(type.ToString())));
            }
        }
    }
}

public interface IPlugin
{
    string Name {get; set;}
    void Work();
} 
```

然后，我有一个单独的程序集 MyPlugin.dll，其中包含以下内容：

```
public class MyPlugin : IPlugin
{
    public string Name { get; set; }
    public void Work()
    {
        Console.WriteLine("Hello, World. I'm a plugin!");
    }
} 
```

我用第三个项目 TestApp.exe 测试了这一切（以 Core.dll 作为参考）：

```
static void Main(string[] args)
{
    Core core = new Core(@"C:\Problems");
    Console.ReadLine();
} 
```

我将 Core.dll 和 MyPlugin.dll 都放入 C:\Problems，TestApp.exe 就像一个魅力！因此，我编写了这个 PowerShell 脚本：

```
Add-Type -Path "C:\Problems\Core.dll"
$core = New-Object Problems.Core "C:\Problems" 
```

这是我的结果（想象一堆红色）：

```
New-Object : Exception calling ".ctor" with "1" argument(s): "Unable to load one or more o
f the requested types. Retrieve the LoaderExceptions property for more information."
At line:1 char:11
+ New-Object <<<<  Problems.Core "C:\Problems"
    + CategoryInfo          : InvalidOperation: (:) [New-Object], MethodInvocationException
    + FullyQualifiedErrorId : ConstructorInvokedThrowException,Microsoft.PowerShell.Commands.NewObjectCommand 
```

深入研究异常，我发现：

```
PS C:\Problems> $Error[0].Exception.InnerException.LoaderExceptions
Could not load file or assembly 'Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified. 
```

到目前为止，我的结论是，当我将 GetTypes() 作为插件加载器的一部分运行时，它看到 MyPlugin 继承自 Problems.IPlugin，它不知道在哪里找到它。但是，我不是已经在 Core.dll 中加载它了吗？

我可以解决这个问题的唯一方法是签署 Core.dll 程序集并将其添加到 GAC，但这既烦人又不符合我的目的。

（所有类都在 Problems 命名空间中，我省略了大量的清理和过滤逻辑来说明问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:00:33.987

您可以通过确保在正确的位置处理程序集解决问题来解决此问题，即将您的核心类更改为如下所示：

```
public class Core
{
    List<IPlugin> plugins = new List<IPlugin>();
    string path;

public Core(string path)
{
    this.path = path;
    AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);
    LoadPlugins();
    foreach (IPlugin plugin in plugins)
        plugin.Work();
}

Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
{
    var currentAssemblies = AppDomain.CurrentDomain.GetAssemblies();

    foreach (var assembly in currentAssemblies)
    {
        if (assembly.FullName == args.Name)
        {
            Console.WriteLine("resolved assembly " + args.Name + " using exising appdomain");
            return assembly;
        }
    }

    var file = args.Name.Split(new char[] { ',' })[0].Replace(@"\\", @"\");
    var dll = Path.Combine(path, file) + ".dll";
    Console.WriteLine("resolved assembly " + args.Name + " from " + path);
    return File.Exists(dll) ? Assembly.LoadFrom(dll) : null;
}

void LoadPlugins()
{
    foreach (string file in Directory.GetFiles(this.path, "*.dll"))
    {
        FileInfo fileInfo = new FileInfo(file);
        Assembly dllAssembly = Assembly.LoadFile(file);
        foreach (Type type in dllAssembly.GetTypes())
        {
            Type typeInterface = type.GetInterface("Problems.IPlugin");
            if (typeInterface != null)
                plugins.Add((IPlugin)Activator.CreateInstance(
                                dllAssembly.GetType(type.ToString())));
        }
    }
}

} 
```

# ruby-on-rails - 在 Rails 的页面中间创建一个 span-12 拆分

> ID：10944774
> 
> 赞同：0
> 
> 时间：2012-06-08T07:35:15.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, haml

我正在使用 rails 3 和 haml 作为我的视图生成器。基本上，我希望能够用 span-12 将视图分成两半，这样我就可以有两个相邻的表。我认为必须有一种简单的方法来使用 span 标签。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:54:28.857

如果我遵循您想要的（并且我假设您正在使用引导程序），那么：

```
.row
  .span6
    .row
      %table
  .span6
    .row
      %table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:56:18.917

使用 css 浮动元素执行此操作对您来说更灵活吗？有一个教程将引导您完成多列布局、浮动首字下沉、图像和内联列表。你会在这里找到它：

[http://css.maxdesign.com.au/floatutorial/](http://css.maxdesign.com.au/floatutorial/)

~查尔斯

# c - 除了使用数字外，我如何在 C 中创建常量

> ID：10944776
> 
> 赞同：0
> 
> 时间：2012-06-08T07:35:25.060
> 
> 标签：c, macros

我正在研究一个 C 数学库，它使用宏来完成大部分工作，我现在面临一个问题。

这是宏的样子：

```
the_macro(a, b, c) 
```

宏本身会执行以下操作： `(a - b > 0) ? error_function : 1`

error_function 用于在编译时停止用户，因此如果`(a - b > 0)`is `true`，则宏将扩展为没有定义的函数。所以这会导致链接错误。

一切似乎都很好，但今天我的老板告诉我我们需要做一些单元测试，所以我写了一个包装宏的函数：

```
int my_func(int a, int b, int c)
{
    return the_macro(a, b, c);
} 
```

问题来了，代码不能传递链接，因为如果我使用var而不是常量来调用the_macro，这些`error_functions`都会在`.o`文件中，因为`int a, int b, int c`在运行时都是已知的，所以我只能调用宏函数带常量：`the_macro(2, 3, 4)`有什么办法可以避免这种情况？还是有更好的解决方案来对此宏进行单元测试？

**编辑：**

我正在处理的代码是机密的......但我做了一个例子来说明这个问题：

```
#include <stdio.h>

#define the_macro(a, b)\
    (a > b)?error_function():1

// Comment out my_func(), then the program will run normaly
// But if you don't comment it out, the linkage error will come out.
void my_func(int a, int b)
{
    the_macro(a, b);
}

int main()
{
    printf("%d\n", the_macro(1, 10));
    return 0;
} 
```

我正在使用 gcc-4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:48:25.363

不管你在哪里使用宏，如果`error_function`没有声明，你应该得到一个编译器错误。如果它已声明但未定义，则您有未定义的行为。宏的参数是否为常量在这方面没有任何改变。（在未定义行为的情况下，它可能会影响实际行为。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:46:02.863

当您使用常量调用宏时，编译器知道该值，因此，也许作为优化，表达式`the_macro (5, 4, 0)`被替换为`1`而不是`error_function`. 当您的表达式`a-b`计算结果为 时`<= 0`，您的编译器会将其替换为`error_function`，并停止编译。

另一方面，当您使用变量时，编译器不知道表达式的结果，并且必须使用宏的完整扩展，其中包含对未定义函数的调用，因此会出现链接错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:47:04.257

出于您单元测试的目的（仅）为什么不将其定义`error_function()`为单元测试的一部分并让它无条件地返回您的测试框架可以检测到的错误。这样，您应该能够使用常量或变量来模仿您在编译时看到的行为。

这并不*完全*是您想要的，但单元测试框架本质上总是运行时测试机制，因此自动编译时测试可能是不可能的。

或者，您可以使用`system()`运行包含库的命令行构建，将输出（包括错误）重定向到文件中。然后，您可以打开文件并扫描链接错误的已知文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T07:59:39.447

让我们看看我是否理解正确：

你想要一种打破编译的方法`a-b>0`吗？除非您使用 C11，否则这实际上是不可能的。根本没有办法让编译器根据条件中止。在您的情况下，您正在尝试使用优化器和链接器的组合来获得所需的行为。但这不能可靠地工作。

`(a - b > 0) ? error_function : 1` **如果 ab>0，优化器可能会将**表达式减少为 1，但这不能保证。有一个保证行为编译器必须显示由 C 标准定义，并且该标准没有提到优化器。相同的优化器有时可能会减少表达式，有时不会减少它，具体取决于代码中的其他内容。或者它可能会或可能不会减少它，具体取决于您传递的命令行标志。

因此，使用此宏您正在编写代码，当您切换编译器、编译器版本、操作系统、添加或删除链接库或目标体系结构时，可能会突然意外中断。因此类更改而突然中断的代码非常糟糕。不要对你的开发人员这样做。

最好编写可移植的代码，因为它遵循标准，因此您可以确定未来的编译器会理解它。在 C11 之前，没有办法做到这一点。如果你真的需要这个，告诉你的老板唯一的方法是使用 C11，它有一个`static_assert`关键字可以让你有条件地中止编译。

# symfony - 动态更改记住我 cookie 的生命周期

> ID：10944778
> 
> 赞同：4
> 
> 时间：2012-06-08T07:35:29.717
> 
> 标签：symfony, remember-me, fosuserbundle

我正在使用带有 FOSUserBundle 的 Symfony2 框架。我想动态更改记住 cookie 的生命周期：例如，当用户单击链接时。所以我不能只更改 security.yml 文件中“remember_me”的值。我正在浏览 Symfony2 API 并找到 Symfony\Component\Security\Http\RememberMe 但我找不到实现我的目标。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:39:29.607

“记住我” cookie 由类处理[`TokenBasedRememberMeServices`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/RememberMe/TokenBasedRememberMeServices.php)。从某个事件侦听器创建[事件订阅者](http://symfony.com/doc/current/components/event_dispatcher/introduction.html#using-event-subscribers)和调用方法。[`onLoginSuccess`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/RememberMe/TokenBasedRememberMeServices.php#L95)

# c - 使用 Clang 在 C 中重复符号

> ID：10944784
> 
> 赞同：3
> 
> 时间：2012-06-08T07:35:45.420
> 
> 标签：c, duplicate-symbol

我目前正在开发我的第一个“严肃”C 项目，一个 16 位 vm。当我将一个大源文件中的文件拆分为多个源文件时，链接器（无论是通过 clang、gcc、cc 还是 ld 调用）都会显示错误：

```
ld: duplicate symbol _registers in register.o and main.o for inferred 
    architecture x86_64 
```

`registers`主文件中没有任何地方的声明。如果有帮助，它是一个`uint16_t`数组。我在 Mac OS 10.7.3 上使用内置编译器（不是 GNU gcc）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-13T08:26:14.277

听起来您已经在标头中*定义*了一个变量，然后将其包含在两个不同的源文件中。

*首先，您必须了解声明*某事物（声明它存在于某处）和*定义*它（实际上是创建它）之间的区别。假设您有以下文件：

```
header.h:
    void printIt(void);           // a declaration.
    int xyzzy;                    // a definition.

main.c:
    #include "header.h"
    int main (void) {
        xyzzy = 42;
        printIt();
        return 0;
    }

other.c:
    #include <stdio.h>
    #include "header.h"
    void printIt (void) {         // a definition.
        printf ("%d\n", xyzzy);
    } 
```

当您编译 C 程序时，*每个*生成的目标文件都会调用一个变量，`xyzzy`因为您通过包含头文件有效地在两者中定义了它。这意味着当链接器尝试组合这两个对象时，会遇到多个定义的问题。

解决办法是在头文件中声明东西，在C文件中定义，比如：

```
header.h:
    void printIt(void);           // a declaration.
    extern int xyzzy;             // a declaration.

main.c:
    #include "header.h"
    int xyzzy;                    // a definition.
    int main (void) {
        xyzzy = 42;
        printIt();
        return 0;
    }

other.c:
    #include <stdio.h>
    #include "header.h"
    void printIt (void) {         // a definition.
        printf ("%d\n", xyzzy);
    } 
```

这样，`other.c`知道`xyzzy`存在，但只`main.c`创造它。

# php - 如何在mysql中插入额外的文本？

> ID：10944787
> 
> 赞同：0
> 
> 时间：2012-06-08T07:36:09.527
> 
> 标签：php, mysql, forms, input, insert

我只想在从表单发布的输入顶部添加一些额外的文本，如下例所示：

```
$username = $_POST['username'];

$sql = mysql_query("INSERT INTO customers (Username) VALUES('$username')"); 
```

但我希望表中的值是：'username*text' 也就是说，如果用户将用户名输入为 'john'，我希望将其作为 'john*text' 输入表中。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:39:06.243

尝试：

```
$username = mysql_real_escape_string($_POST['username']) ."*text"; 
```

转义用户的输入以避免[sql注入](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:54:58.990

利用：

```
$username = $_POST['username'].'*text';//hence you get *text postfix to every value

$sql = mysql_query("INSERT INTO customers (Username) VALUES('$username')"); 
```

现在检查你的结果，它肯定会工作。

# python - Python字典优化这个脚本

> ID：10944790
> 
> 赞同：0
> 
> 时间：2012-06-08T07:36:15.550
> 
> 标签：python

我有一个字符串，比如`rdb_master_mongodb`where `rdb_`is fixed ，`master`它是一个数据库名称，可以是任何东西，可以`mongodb`是`mysql`、`mongodb`、或. 我需要从字典中获取该字符串的值，该值在. 为了得到这个，我需要拆分字符串并获取 and 的值。我不能使用 split 因为有时字符串会变成. 因此，我必须使用来获取确切的密钥。但是，不适用于列表。`postgres``mssql``bdb``myDict[master][mongodb]``rdb_master_mongodb``master``mongodb``rdb_master_test_mongodb``endswith``endswith`

我必须从元组中获取匹配的元组值。现在我这样做：

```
import re 
name = 'rdb_master_mongodb'
s = re.sub('rdb_', "", name)
VALID_DB = ('mysql', 'postgres', 'mongodb', 'mssql', 'bdb')
(a, b, c, d, e) = VALID_DB
if s.endswith(a):
   db = a
if s.endswith(b):
  db = b
if s.endswith(c):
  db = c
if s.endswith(d):
  db = d
if s.endswith(e):
  db = e
db_name = re.sub('_'+db, "", s)
print db_name+" is "+db 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:41:34.480

```
db = name.rsplit('_', 1)[1]
if db not in VALID_DB:
    raise ValueError('Incorrect DB name: %s' % db) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:41:55.807

如果格式`name`总是一样的，可以先拆分成几部分：

```
rdb, temp = name.split('_', 1)
master, db = temp.rsplit('_', 1) 
```

然后检查是否`db`有效：

```
VALID_DB = ('mysql', 'postgres', 'mongodb', 'mssql', 'bdb')
if db in VALID_DB:
   ... 
```

然后使用这三个变量`rdb, master, db`来构建所需的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:42:50.773

所以只有词尾很重要，如果我理解你的话，在这种情况下，我会尝试：

```
>>> VALID_DB = ('mysql', 'postgres', 'mongodb', 'mssql', 'bdb')
>>> name = 'rdb_master_mongodb'
>>> db_name = [db for db in VALID_DB if name.endswith(db)][0]
>>> db_name
'mongodb'
>>> name_test = 'rdb_master_test_mongodb'
>>> db_name = [db for db in VALID_DB if name_test.endswith(db)][0]
>>> db_name
'mongodb' 
```

# javascript - 导航栏删除间距 - CSS 还是 JavaScript？

> ID：10944792
> 
> 赞同：0
> 
> 时间：2012-06-08T07:36:21.400
> 
> 标签：javascript, css, navbar

所以我有这个我正在制作的导航栏；我有一个[Jsfiddle](http://jsfiddle.net/pZy8V)来演示。如果您将鼠标悬停在一个元素上，则会出现子列表，但如果您仔细观察，它的左边缘距离调用它的导航栏元素仅 1 个像素。

有没有我可以添加的 CSS 规则来摆脱这个问题，即将子列表移回一个像素？我知道可以使用 JS 来实现这一点（获取每个导航栏元素，计算它与左侧的距离，获取它的子列表并给它一个比元素的左值小 1 的左值），但现在我想暂时避免它。

如果可能，我更喜欢 CSS 解决方案，但当然不是，请告诉我，如果可以，请提供 JS 替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:42:40.753

负利润救援 [http://jsfiddle.net/pZy8V/4/](http://jsfiddle.net/pZy8V/4/)

```
#nav li:hover ul {
    display: block;
    position: absolute;
    margin: 0 0 0 -1px; /* margin: 0; */
    list-style: none;
    padding: 0;
}
#nav li:hover li {
    float: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:43:29.587

只需添加`margin-left: -1px;`到您`#nav li:hover ul`将其向左推 1 个像素。

[看到它在这里工作。](http://jsfiddle.net/pZy8V/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:41:19.730

如果您删除所有边框，问题就会消失。所以答案可能在于重新设计您的 HTML/CSS 边框使用

请参阅此修改后的[JSFiddle](http://jsfiddle.net/sLQeV/1/)

如果您只是想要一个快速而肮脏的修复，您可以将以下内容添加到您的原始 CSS

```
#nav li {
    float: left;
    position:relative;
    left:-1px;
} 
```

# javascript - CSP：如何允许给定 URI 前缀的不安全评估 (Firefox)

> ID：10944794
> 
> 赞同：26
> 
> 时间：2012-06-08T07:36:28.917
> 
> 标签：javascript, security, firefox, mathjax, content-security-policy

我正在尝试使用[MathJax](http://mathjax.org/)作为我们使用非常严格的[内容安全策略 (CSP)](http://www.w3.org/TR/CSP/)的 Web 应用程序的一部分。问题是 MathJax 被编码为使用`eval()`[确切地说，以`Function()`] 的形式，默认情况下 CSP 认为它不安全。

我目前正在使用以下 CSP 标头：

```
X-Content-Security-Policy: allow 'self'; img-src *; media-src *; frame-src *; font-src *; frame-ancestors 'none'; style-src *; report-uri '/:save-csp-violation'; 
```

这会导致 MathJax 2.0 代码失败，因为它使用`Function()`. 我试图只允许`Function()`位于 path 下同一原点内的 MathJax 的 unsafe-eval （即）`/:static/math/`。为此，我尝试添加

```
unsafe-eval '/:static/math/*' 
```

使完整的标题看起来像

```
X-Content-Security-Policy: allow 'self'; img-src *; media-src *; frame-src *; font-src *; frame-ancestors 'none'; style-src *; report-uri '/:save-csp-violation'; unsafe-eval '/:static/math/*' 
```

但我仍然无法 Firefox 13.0 运行代码。我收到一条发给 Firefox Web 控制台（位于工具 - Web 开发人员）的错误消息：

```
[10:09:59.072] call to Function() blocked by CSP @ http://localhost:8080/:static/math/2.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML:29 
```

但是，我没有收到“report-uri”的 CSP 报告。（如您所见，我目前正在通过没有 SSL 的自定义 localhost 端口运行测试，以防万一。前面的冒号`static`不是错字，我保留所有以冒号开头的路径部分供内部使用应用程序，所有用户内容都可以自由定义其他 URL。）

**我对`unsafe-eval`属性的使用是不正确的，还是不可能只对“自我”的子集允许不安全评估？**目的是只允许 unsafe-eval 用于相同的源路径前缀`/:static/math`，严格的 CSP JS 代码执行 ' `self`' 并且不允许任何其他方法的 JS 代码。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T12:45:47.297

有多个问题：

1.  ( `Content-Security-Policy`CSP) 标头不能以这种方式工作。CSP 仅具有单个主机+端口组合（来源）的粒度。如果您不能允许所有脚本都拥有`unsafe-eval`，则任何脚本都不能拥有它。唯一可能的解决方法是不使用需要的脚本`unsafe-eval`（幸运的是，MathJax 不再需要，`unsafe-eval`因为[MathJax 错误 256](https://github.com/mathjax/MathJax/issues/256)已修复）。

2.  该`allow`语法是旧的 Mozilla 变体，不应使用。当前的语法是说`default-src`后跟允许作为所有内容的来源的方案或主机名或来源，然后`script-src`根据需要覆盖每个子类型的默认值（例如 ）。除了 .之外，某些来源可能还支持其他来源关键字`self`。例如，`script-src`支持`unsafe-eval`意味着任何允许执行的脚本都可以运行 eval() 或 Function()，`unsafe-inline`这意味着任何可以支持某种内联脚本的标记都可以执行。允许`unsafe-eval`可能是可以接受的，但`unsafe-inline`几乎不能使用 script-src（否则，您根本不应该为 CSP 烦恼）。

3.  正确的语法`script-src`如下：

    ```
     script-src 'self' cdnjs.cloudflare.com 
    ```

    结合从[https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js加载 MathJax](https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js)

4.  MathJax 还使用内联样式属性，因此需要以下内容（除非已经允许），否则 MathJax 将`Exception`在尝试渲染数学时引发：

    ```
     style-src 'self' 'unsafe-inline' 
    ```

    不能使用 CSP 让 JS 插入样式属性，并且没有 HTML 源中已经插入的样式属性生效。

5.  在违反 CSP 的情况下，Firefox 13.0（至少）似乎不会立即“打电话回家”。大多数违规报告都会在事件发生后的某个时间提交。Chrome 在报告提交方面似乎更加积极，这将使其更容易测试。根据我的经验，Firefox 并不总是发送 CSP 报告——它可能使用某种启发式方法来不发送重复的消息。

最后，要使 MathJax 与 Content-Security-Protection 一起使用，您需要以下标头（假设您通过 CDNJS 使用 MathJax）：

```
Content-Security-Policy: default-src 'self'; script-src 'self' cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; 
```

较旧的浏览器（例如 Firefox 13）过去需要额外的参数，例如`options`或需要使用非标准的标头名称，例如`X-Content-Security-Policy`或`X-WebKit-CSP`。由于用户代理现在支持标准标头，因此不再需要这些 hack。（*除了 MSIE 与 MS Edge 相反。*）

**2021 年更新：**

CSP 版本 2 也允许在源中指定路径。但是，请注意，[使用路径是一项重大更改](https://www.w3.org/TR/CSP2/#changes-from-level-1)，其中向后兼容性有点未知。有问题的部分是服务器需要在知道用户代理是否支持 CSP1 或 CSP2 之前发出 CSP 标头。

# jquery - 在加载事件中动态获取 IMG 的尺寸

> ID：10944797
> 
> 赞同：1
> 
> 时间：2012-06-08T07:36:42.033
> 
> 标签：jquery

的尺寸`11.jpg`不是`100*100`，但我想在加载事件中获得图像的真实尺寸。我怎么能做到？

```
<img id="t" src="img/11.jpg" width="100px" height="100px" />

$('#t').load(function() {

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:52:44.703

我不一定知道这是*最好*的方法，或者如果您需要内部`img.onload`本身，但您可以使用`Image`对象来获取`img`没有`width`and`height`属性的对象。

```
$('#t').load(function() {
    var img = new Image();
    img.src = this.src;

    img.onload = function(){
        console.log(img.width);
        console.log(img.height);
    };
}); 
```

演示（打开你的控制台）：http: [//jsfiddle.net/ZgKGG/1/](http://jsfiddle.net/ZgKGG/1/)注意，`img`标签上的属性给了它`100x100`尺寸，但图像实际上是`128x128`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:47:31.377

使用 jQuery，

```
$(document).ready(function() {
    alert("Widht :" + $("#t").width() + "\nHeight :" + $("#t").height());    
});​ 
```

使用普通的 javaScript

```
var imgObj = document.getElementById("t");
 alert("Widht :" + imgObj.width + "\nHeight :" + imgObj.height); 
```

如果您想使用 jQuery 方式，请删除高度和宽度。你的 html 应该是，

```
<img id="t" src="http://www.gravatar.com/avatar/8953449b7b29d04cb89adaf912d84980?s=32&d=identicon&r=PG" /> 
```

[在此处](http://jsfiddle.net/U2Qcg/3/)尝试此工作示例

# java - android解析数据时出错org.json.JSONException

> ID：10944798
> 
> 赞同：0
> 
> 时间：2012-06-08T07:36:49.823
> 
> 标签：java, android, json

我有两个网址。

1.  [https://wimp.supremosolutions.com/api/v1/spot/?format=json](https://wimp.supremosolutions.com/api/v1/spot/?format=json)
2.  [https://wimp.supremosolutions.com/api/v1/spot/?format=json&latitude=45.200375&longitude=9.992465000000001](https://wimp.supremosolutions.com/api/v1/spot/?format=json&latitude=45.200375&longitude=9.992465000000001)

如果我通过我的 android 活动运行第一个，那么结果会毫无问题地加载到我的列表中。但是，如果我运行第二个 URL，那么我就会收到此错误。

```
05-30 16:20:30.473: ERROR/JSON Parser(1740): Error parsing data org.json.JSONException: Value Invalid of type java.lang.String cannot be converted to JSONObject
05-30 16:20:30.633: ERROR/AndroidRuntime(1740): FATAL EXCEPTION: AsyncTask #1
        java.lang.RuntimeException: An error occured while executing doInBackground()
        at android.os.AsyncTask$3.done(AsyncTask.java:278)
        at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
        at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856)
        Caused by: java.lang.NullPointerException
        at com.supremosolutions.wimp.AroundMeParking$LoadInbox.doInBackground(AroundMeParking.java:162)
        at com.supremosolutions.wimp.AroundMeParking$LoadInbox.doInBackground(AroundMeParking.java:138)
        at android.os.AsyncTask$2.call(AsyncTask.java:264)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        ... 5 more 
```

我已经通过 json 验证器（如[http://jsonlint.com/](http://jsonlint.com/) ）运行了这两个 URL，并且都进行了验证。

代码似乎在`jsonParser.makeHttpRequest`：

```
protected String doInBackground(String... args) {
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    JSONObject json = jsonParser.makeHttpRequest(callableUrl, "GET", params);
    // Check your log cat for JSON response
    Log.d("JSON FOR LOGCAT: ", json.toString()); 
```

有时我可以在 Logcat 中看到 JSON FOR LOGCAT 字符串，它看起来像这样[http://pastebin.com/6CWBAyys](http://pastebin.com/6CWBAyys)（尽管仍然会因该异常而崩溃）但有时该字符串甚至不会进入 logcat。

这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:21:28.783

我拥有的 jsonParser 类附加了参数。我已经添加了基本 url + 参数，因此发送的 url 无效。而不是像这样发送我的 URL [https://wimp.supremosolutions.com/api/v1/spot/?format=json&latitude=45.200375&longitude=9.992465000000001](https://wimp.supremosolutions.com/api/v1/spot/?format=json&latitude=45.200375&longitude=9.992465000000001)

[我必须像https://wimp.supremosolutions.com/api/v1/spot/](https://wimp.supremosolutions.com/api/v1/spot/)一样发送它，然后添加 NameValuePair 参数以传递给我的 jsonParser 类。

```
 // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("format", "json"));
        params.add(new BasicNameValuePair("format", "json"));
        params.add(new BasicNameValuePair("format", "json"));
        JSONObject json = jsonParser.makeHttpRequest(URL, "GET", params); 
```

**正如 Ken YN 和 Alex 提到的，此错误是由无效的 url 引起的。如果您收到此 DOUBLE，请检查您是如何创建 URL 并查看发送的确切内容**

# java - ThreadMXBean.getThreadCpuTime() 是否包括在所有状态下花费的时间，或者只是 RUNNABLE？

> ID：10944800
> 
> 赞同：8
> 
> 时间：2012-06-08T07:36:53.647
> 
> 标签：java, multithreading, jmx

就像主题所说的那样，它是否包括在 BLOCKED 和 WAITING 等状态中花费的时间，或者这只是 RUNNABLE ？文档只是说“cpu time”，这有点含糊......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:56:15.600

ThreadMXBean.getThreadCpuTime() 仅包括在 RUNNABLE 状态下花费的时间，但请注意，计算方式取决于平台。

这是一个程序，它显示 getThreadCpuTime() 仅涵盖线程实际执行某些操作的时间：

```
import java.lang.management.*;

public class Test implements Runnable {
    public static void main(String[] args)
        throws Exception {

        long time = System.nanoTime();
        Test test = new Test();
        synchronized (test) {
            new Thread(test).start();
            while (test.cpu == -1) {
                test.wait();
                }
            }
        System.out.println("time: " + (System.nanoTime() - time));
        System.out.println("cpu: " + test.cpu);
        }

    private long cpu = -1;

    public synchronized void run() {
        try {
            ThreadMXBean thread = ManagementFactory.getThreadMXBean();
            long cpu = thread.getCurrentThreadCpuTime();
            Thread.sleep(300);
            long time = System.nanoTime();
            while (System.nanoTime() - time < 700000000);
            this.cpu = thread.getCurrentThreadCpuTime() - cpu;
            }
        catch (InterruptedException _) {}
        finally {
            notify();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:00:27.343

是的，这只是`RUNNABLE`，您可以通过[ThreadInfo](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ThreadInfo.html)使用以下方法进一步统计在其他状态中花费的时间：

*   [获取阻塞时间（）](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ThreadInfo.html#getBlockedTime%28%29)
*   [获取等待时间（）](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ThreadInfo.html#getWaitedTime%28%29)

`TIMED_WAITING`和之间没有进一步`WAITING`的区别`getWaitedTime()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:39:03.760

*仅可运行。*就是这样，否则就没用了。

# java - 纯 Java 应用程序移植到 glassfish

> ID：10944819
> 
> 赞同：1
> 
> 时间：2012-06-08T07:38:55.907
> 
> 标签：java, jakarta-ee, web-applications, glassfish

我有一个用纯/基本 Java 编写的应用程序，没有 GUI。我有三个带有主要方法的类，因此它们每个都可以自己运行。现在我按照特定的顺序用 ant 运行它们。

在 glassfish 中，我仅使用 RESTful 服务部署了 Web 应用程序。

我现在要做的是将这三个类转移到 glassfish 中，因此我将按照与以前完全相同的顺序从 RESTful 服务中调用它们。

我在 youtube 上观看了有关 Java EE 6 API 的系列视频，但没有找到任何有助于将纯 Java 应用程序转移到 glassfish 的视频。我应该为此使用 EJB API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:04:18.797

没有什么特别的事情要做。`.war`只需将这三个类与您的 Web 服务一起打包到文件中。调用 Web 服务方法时，创建每个类的实例并调用适当的方法。

当然，您也可以为每个类创建 EJB，并将每个类的一个实例注入 Web 服务类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:10:51.993

我想以最简单的形式，您可以为通常在命令行上调用的每个类创建 servlet。然后，确实可以将它们打包到一个战争文件中并部署到 glassfish 中。顺便说一句，你不必使用 glassfish。您可以使用 tomcat、jetty 或任何其他 servlet 容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:55:29.843

我假设您希望应用程序在没有用户交互的情况下运行，例如人类单击页面。创建一个单例 ejb，它会在应用程序上传到 Web 服务器后立即创建，在单例中创建类的实例并调用一个方法，该方法应复制每个类中主方法的行为。

```
`@Startup  
@Singleton  
public class StartupBean {  
private MyClass obj;  
private MyClass2 obj2;  
@PostConstruct  
initializeMyClasses(){  
obj = new MyClass();  
obj.start();//the start method contains code copy pasted from main  
obj2 = new MyClass2();  
obj2.start();` 
```

# blackberry - 如何在 BlackBerry 中解析 JSON 数据？

> ID：10944820
> 
> 赞同：-4
> 
> 时间：2012-06-08T07:38:55.937
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

如何在 BlackBerry 中解析 JSON 数据？需要帮助来解析以下数据。

```
{
    "menu": {
        "id": "Home",
        "menuitem": [
            {
                "type": "form",
                "name": "Order",
                "url": "http://domain/oredr.aspx",
                "Row": [
                    {
                        "Index": "1",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "User Name"
                            },
                            {
                                "type": "TB",
                                "align": "Right",
                                "send": "Yes",
                                "param": "username",
                                "maxlength": "25",
                                "ctype": "Alpha"
                            }
                        ]
                    },
                    {
                        "Index": "2",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Mobile No"
                            },
                            {
                                "type": "TB",
                                "align": "Right",
                                "send": "Yes",
                                "param": "MobileNo",
                                "maxlength": "10",
                                "ctype": "Numeric"
                            }
                        ]
                    },
                    {
                        "Index": "3",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Email ID"
                            },
                            {
                                "type": "TB",
                                "align": "Right",
                                "send": "Yes",
                                "param": "email",
                                "maxlength": "50",
                                "ctype": "Email"
                            }
                        ]
                    },
                    {
                        "Index": "4",
                        "Control": [
                            {
                                "type": "None",
                                "align": "Left",
                                "send": "No"
                            },
                            {
                                "type": "BT",
                                "align": "Center",
                                "send": "No",
                                "value": "Submit",
                                "ctype": "Submit"
                            }
                        ]
                    }
                ]
            },
            {
                "type": "form",
                "value": "Stock",
                "url": "http://domain/stock.aspx",
                "Row": [
                    {
                        "Index": "1",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Select Medium"
                            },
                            {
                                "type": "CB",
                                "align": "Right",
                                "send": "Yes",
                                "param": "medium",
                                "Item": [
                                    {
                                        "name": "Yes"
                                    },
                                    {
                                        "name": "No"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "Index": "2",
                        "Control": [
                            {
                                "type": "None",
                                "align": "Left",
                                "send": "No"
                            },
                            {
                                "type": "BT",
                                "align": "Center",
                                "send": "No",
                                "value": "Submit",
                                "ctype": "Submit"
                            }
                        ]
                    }
                ]
            },
            {
                "type": "form",
                "value": "Custom",
                "url": "http://domain/custom.aspx",
                "Row": [
                    {
                        "Index": "1",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Offer Type"
                            },
                            {
                                "type": "DD",
                                "align": "Right",
                                "send": "Yes",
                                "param": "offertype",
                                "Item": [
                                    {
                                        "name": "Marketing"
                                    },
                                    {
                                        "name": "Promotional"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "Index": "2",
                        "Control": [
                            {
                                "type": "None",
                                "align": "Left",
                                "send": "No"
                            },
                            {
                                "type": "BT",
                                "align": "Center",
                                "send": "No",
                                "value": "Submit",
                                "ctype": "Submit"
                            }
                        ]
                    }
                ]
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:34:54.573

首先参考这个链接 - [json](http://www.json.org/)

试试这个 - 首先下载 json parser .jar 文件并将其导入您的项目。

```
JSONObject data = new JSONObject(data);
JSONObject menu = data.getJSONObject("menu"); 
```

要获取`String`字段的值，请使用以下代码 -

```
String id = menu.getString("id");
JSONObject menuitem = json.getJSONObject("menuitem"); 
```

等等。

# sharepoint-2010 - 是否可以返回 SharePoint 2010 搜索索引中的所有文档？

> ID：10944823
> 
> 赞同：0
> 
> 时间：2012-06-08T07:39:07.350
> 
> 标签：sharepoint-2010, sharepoint-search

我想执行一个返回所有文档的搜索，以便最终用户可以通过应用不同的精简程序来浏览文档。

这可能吗？

我尝试将搜索框留空并单击搜索，但会弹出一条消息“请输入一个或多个搜索词”。

我也尝试在没有任何查询参数的情况下打开 result.aspx，然后我收到此消息“没有可用的结果。没有指定查询，或者查询来自高级搜索（联合 Webparts 不支持高级搜索查询）。 "

任何人？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:51:24.100

如果您输入放置井号标记 (#)（或井号，无论您如何称呼它），您将返回 SharePoint 搜索中的所有项目。

您也可以进行搜索：IsDocument:1

杰森

# php - 如何防止有人直接运行我的 PHP 文件一百万次

> ID：10944826
> 
> 赞同：-1
> 
> 时间：2012-06-08T07:39:11.283
> 
> 标签：php, iphone, objective-c

*嘿，我已经完成了我的应用程序的开发在我的 iphone 应用程序中，我有一个字符串（由用户创建）和一个按钮，当触摸按钮时，php 被用户给定的字符串激活如何防止有人运行我的 PHP 文件每次使用不同的字符串直接一百万次？

那可能吗 ？如何 ？这是重要的，因为 php 文件激活 MySQL 查询插入命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:43:16.587

方法太多，但最简单的方法是增加一个计数器，该计数器存储在每个请求的会话变量中，并在计数器达到某个数字时显示拒绝页面。

当然，这意味着您信任客户端对每个请求使用相同的会话 ID。如果您愿意做更多的工作，那么让应用程序在每个请求中发送设备 UUID（并拒绝不包含它的请求），并将您的计数器基于 UUID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:44:00.897

代码是否运行 100 万次并不重要，但是，如果它对您很重要，那么您可以执行以下操作：

将用户的 IP 地址存储在另一个数据库中。大约 1 小时后删除条目，然后如果来自该 IP 地址的条目超过 100 个（或很多），则拒绝运行其他 PHP 代码，直到一个小时过去并且其他条目已从数据库中删除。

# jquery - jQuery延迟函数中断

> ID：10944830
> 
> 赞同：3
> 
> 时间：2012-06-08T07:39:38.887
> 
> 标签：jquery, delay, interrupt

我在 jQuery 中有一个淡入淡出的弹出窗口，如果不被用户关闭，它将在 10 秒内淡出。

我有代码：

```
$modalElement.fadeIn(1000).delay(10000).fadeOut(1000); 
```

这适用于淡入、延迟和淡出 - 但`'close'`表单上的按钮直到超时后才起作用！

我需要`'close'`按钮来中断`delay`，以便用户可以阅读弹出窗口并自己关闭它，比如 5 秒 - 然后如果他们自己没有关闭它，那么它将在 10 秒延迟后自动关闭。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:10:09.387

您可以使用该[`.clearQueue()`](http://api.jquery.com/clearQueue/)方法。

在您的**关闭处理程序**中，您可以这样做：

```
$modalEleement.clearQueue(); 
```

默认情况下，两者都对队列[`.delay()`](http://api.jquery.com/delay/)进行操作，但您可以传递自定义队列名称。[`.clearQueue()`](http://api.jquery.com/clearQueue/)`fx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:07:36.107

只需在带有出队的关闭按钮上添加一个单击事件。

例如：

```
$modalElement.fadeIn(1000).delay(10000).fadeOut(1000);

$modalElement.find('a.close').click(function(){
  // If you want fadeout being triggerd
  $modalElement.dequeue() 
  // If you just want to delete the box without the fadeOut
  $modalElement.remove() 
}); 
```

# size - 如何查找离子 zip 文件的未压缩大小

> ID：10944831
> 
> 赞同：3
> 
> 时间：2012-06-08T07:39:39.643
> 
> 标签：size, dotnetzip, compression

我有一个使用[Ionic zip](http://dotnetzip.codeplex.com/)压缩的 zip 文件。在提取之前，我需要验证可用的磁盘空间。但是我如何事先找到未压缩的大小？zip 文件中是否有任何标题信息（由 ionic 提供）以便我可以阅读它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T07:51:58.770

这应该可以解决问题：

选项1

```
static long totaluncompressedsize;
    static string info;

    foreach (ZipEntry e in zip) {
        long uncompressedsize = e.UncompressedSize;
        totaluncompressedsize += uncompressedsize;
    } 
```

或选项 2 - 需要筛选大量信息

```
using (ZipFile zip = ZipFile.Read(zipFile)) {
        info = zip.Info;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-18T15:50:54.863

```
public static long GetTotalUnzippedSize(string zipFileName)
{
    using (ZipArchive zipFile = ZipFile.OpenRead(zipFileName))
    {
        return zipFile.Entries.Sum(entry => entry.Length);
    }
} 
```

# c# - 非法语法需要有效的开始名称字符

> ID：10944834
> 
> 赞同：5
> 
> 时间：2012-06-08T07:40:15.977
> 
> 标签：c#, .net, xml, app-config

如何`&`在应用程序设置中转义？我试过`\`但没有用？

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="preset" value="iPhone & iPod Touch"/>
    </appSettings>
</configuration> 
```

`&`预设键值中的导致错误`Illegal Syntax Expecting valid start name character`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T07:42:40.303

您不应该*逃避*它，而是将其*编码*为`&amp;`：

```
<add key="preset" value="iPhone &amp; iPod Touch"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:43:47.320

```
Try &amp; 
```

试试上面的字符串而不是 &

# drupal - 匿名用户无法访问条件字段

> ID：10944836
> 
> 赞同：0
> 
> 时间：2012-06-08T07:40:39.197
> 
> 标签：drupal, drupal-6

在用户注册时，我想在单选按钮的“是”选项中显示一个字段。当我以管理员身份登录时，这工作正常。但匿名用户看不到该字段。当我看到页面的源代码时，并没有任何条件字段相关的js。从权限来看，条件字段“管理员条件字段”只有一个权限，即使在为匿名用户启用该权限后，仍然看不到该字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:28:06.717

我还没有看到这个模块，但我会推荐使用自定义模块和 javascript 来满足这么小的要求。

# objective-c - 是否有类似于 isUpdated 的方法通知我 NSManagedObject 的关系是否已更新？

> ID：10944838
> 
> 赞同：0
> 
> 时间：2012-06-08T07:40:40.820
> 
> 标签：objective-c, cocoa, core-data

NSManagedObject 中的 isUpdated 方法会通知我实体是否已更新。

但是，如果与实体有关系的实体已更新，它不会通知我。

我应该自己经历所有的关系吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:13:41.533

需要考虑的几种方法是...观察上下文以查看是否有任何对象已更改，使用一些键路径运算符来深入了解细节...这种方法可能容易出错且很麻烦...

更好的方法是发出特殊通知并在该通知中发送适当的信息......然后观察者只需观察该通知，而不是 kvo 所有的键。

也许是这样的：

```
static NSString * kClassADidChangeKey = @"kClassADidChangeKey";
static NSString * kClassAKeyKey = @"kClassAKeyKey";
@interface ClassA : NSManagedObject

@property (nonatomic,copy) NSString * keyOfInterest;

@end

@implementation ClassA

@dynamic keyOfInterest;

-(void)setKeyOfInterest:(NSString*)theValue
{
    [self willChangeValueForKey:@"keyOfInterest"];

    NSMutableDictionary * userInfo = [NSMutableDictionary dictionary];
    [userInfo setValue:key forKey:kClassAKeyKey];
    [[NSNotificationCenter defaultCenter] postNotificationName:kClassADidChangeKey object:self userInfo:userInfo];
    [self setPrimitiveValue:theValue forKey:@"keyOfInterest"];
    [self didChangeValueForKey:@"keyOfInterest"];
}

@end 
```

# javascript - 选择框 onChange 事件

> ID：10944842
> 
> 赞同：0
> 
> 时间：2012-06-08T07:41:09.333
> 
> 标签：javascript, drop-down-menu

我对此有点困惑：`onChange`如果其中只有一个选项，如何触发选择框的 javascript 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:46:29.927

如果你只有一个值，它不会改变，但是如果他们关注它，然后点击它，`onBlur`事件就会触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:51:59.973

那是你需要的吗？[http://jsfiddle.net/j3Xga/1/](http://jsfiddle.net/j3Xga/1/)我知道这不是一个 jQuery 问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:52:08.850

添加一个默认的空选项，例如 Select...

```
<select>
    <option>Select...</option>
    <option value="val_1">Option 1</option>
</select> 
```

# css - box-shadow, float:left 和 overflow:auto 不喜欢对方的情况

> ID：10944844
> 
> 赞同：1
> 
> 时间：2012-06-08T07:41:13.550
> 
> 标签：css

如果我使用带有溢出：自动的父 div，我的 box-shadow 就会停止。我该如何解决？ [在这里](https://stackoverflow.com/questions/5992590/box-shadow-over-floating-divs)我发现我需要使用 position:relative 和 z-index，但这似乎不起作用。

HTML：

```
<ul>
    <li><img src="http://lorempixel.com/100/100" />Tri-tip fatback sausage speck, pork chop pastrami flank sirloin filet mignon t-bone rump ribeye chicken venison. Shankle ground round pancetta pastrami, sirloin beef ribs pork chop short loin. Salami pork boudin, ham hock flank tri-tip drumstick turkey shank short loin beef ribs kielbasa tail pastrami. Kielbasa beef ribs chicken, turkey drumstick bresaola sirloin ball tip chuck pig andouille. Cow sirloin shoulder beef ribs strip steak tongue jerky. Spare ribs capicola swine fatback, corned beef jerky kielbasa frankfurter pancetta flank sirloin short loin.</li>
    <li><img src="http://lorempixel.com/100/100" />Strip steak speck tri-tip drumstick pork chop spare ribs.</li>
    <li><img src="http://lorempixel.com/100/100" /></li>
    <li><img src="http://lorempixel.com/100/100" /></li>
</ul>​ 
```

CSS：

```
ul{margin:10px;position:relative;z-index:18;}
li{overflow:auto;margin-bottom:10px;position:relative;z-index:19;}
li:hover{background:lightblue;}
li img{float:left; box-shadow:0 0 10px black; margin: 0 10px 10px 0;display:block;position:relative;z-index:20;} 
```

演示：http: [//jsfiddle.net/suNUK/1/](http://jsfiddle.net/suNUK/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:48:03.093

为此，您可以**为此 clearfix**方法。像这样写：

```
li{margin-bottom:10px;position:relative;z-index:19;}
li:after{
    content:'';
    clear:both;
    display:block;
} 
```

检查这个[http://jsfiddle.net/suNUK/2/](http://jsfiddle.net/suNUK/2/)

# apache - simple mod_rewrite, getting internal server error

> ID：10944862
> 
> 赞同：0
> 
> 时间：2012-06-08T07:42:14.323
> 
> 标签：apache, mod-rewrite

I'm trying to setup a very very simple mod_rewrite .htaccess:

```
RewriteEngine on
RewriteRule ^contact$ contact.php
RewriteRule ^contact/$ contact.php 
```

But when I upload the .htaccess file, I get an Internal Server Error. What are happening?

I just checked the httpd.conf file, and the mod_rewrite module is here, without any #. Also the mod_rewrite is working with another domain in the server (I didn't worked with this domain).

Is any way to activate the mod_rewrite domain by domain maybe? How can I activate it? Thank you very much.

EDIT:

I just checked the apache error log, I'm getting this:

```
[Fri Jun 08 09:36:05 2012] [alert] [client 87.216.xxx.xxx] /var/www/vhost/domain.com/home/html/.htaccess: RewriteEngine not allowed here 
```

Any clue? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:42:31.957

Generally that means that on server/vhost level, in the main configuration file, or in a .htaccess file higher up there will be an 'AllowOverride' blocking.

Check higher directories for .htaccess files with AllowOverride/Options changes - and then check the main httpd.conf files (http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride - Options).

Dw

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T09:36:01.847

Seems like mod_rewrite is not enabled.

# c - 当全局变量和局部变量同名时访问全局变量

> ID：10944863
> 
> 赞同：2
> 
> 时间：2012-06-08T07:42:15.860
> 
> 标签：c, extern

我对下面的代码有一些疑问

```
 #include<stdio.h>
   int i=6;
    int main()
     {
      int i=4;
      {
       extern int i;
       printf("%d",i); //prints 6
      }
      printf("%d",i); //prints 4
     } 
```

我们知道`extern`关键字说编译器，变量在外面的某个地方。所以问题是为什么`extern`关键字访问的是全局`i`变量而不是`i`主函数中的变量？我在想一定存在矛盾，因为这两个变量都可以作为全局变量供内括号使用。extern 关键字访问函数外部的变量还是访问大括号外部的变量也是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:40:31.987

`extern`并不意味着在当前范围之外，它意味着具有外部链接的对象。自动变量从不具有外部链接，因此您的声明`extern int i`不可能引用它。因此它隐藏了它，就像自动变量隐藏了全局一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:48:21.297

在`printf`打印 6 之前，您要求编译器`i`使用`#include`. 然后右大括号告诉编译器`extern`不再有效，因此它使用`i`设置为 4 的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:55:29.060

**int i=4**不是全局变量，如果您尝试访问另一个函数中 main 内部的**var i ，您的编译器将抛出有关****var i is undeclared**的错误。这段代码说明了这一点。

```
void func() {
    printf("i is %d\n",i);
}

main() {
    int i=10;
    func();
} 
```

而 main 之外的 i 是全局变量，您可以在所有函数中访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T16:55:31.783

/* Ed Heal 所说的 */ 然而，我认为最好用额外的例子来说明它。我修改了你的例子来做更多的事情。代码中的注释说明了大部分内容：

```
#include <stdio.h>
int i = 6;
int main(void)
{
    int i = 4;
    printf("%d\n", i); /* prints 4 */
    {
        extern int i; /* this i is now "current". */
        printf("%d\n", i); /* prints 6 */
        {
            int *x = &i; /* Save the address of the "old" i,
                          * before making a new one. */
            int i = 32; /* one more i. Becomes the "current" i.*/
            printf("%d\n", i); /* prints 32 */
            printf("%d\n", *x); /* prints 6 - "old" i through a pointer.*/
        }
        /* The "previous" i goes out of scope.
         * That extern one is "current" again. */
        printf("%d\n", i); /* prints 6 again */
    }
    /* That extern i goes out of scope.
     * The only remaining i is now "current". */
    printf("%d\n", i); /* prints 4 again */
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T08:20:17.510

我认为您是在问您是否正确地认为`extern int i`声明应该导致第一个`printf`解析`i`为，`4`因为该`int i=4`声明位于声明 extern 的范围的父范围内。

答案是否定的，因此您所看到的行为。函数内的`extern`声明用于声明*外部*变量的存在，并且永远不会解析为*局部*变量（在函数*内*声明的变量）。

# java - 无法确定自动增长默认值的属性类型

> ID：10944867
> 
> 赞同：2
> 
> 时间：2012-06-08T07:42:40.913
> 
> 标签：java, spring, spring-mvc

*来自[Spring Projects 问题跟踪器](https://jira.springsource.org/browse/SPR-7839)*

豆子：

```
public class JavaBean {

    private NestedBean nested;

}

public class NestedBean {

    private String foo;    
    private List<NestedBean> list;      
    private Map<String, NestedBean> map;

} 
```

绑定：

```
http://localhost:8080/mvc-showcase/convert/bean?nested.foo=bar&nested.list[0].foo=baz&nested.map[key].list[0].foo=bip 
```

例外：

```
NullValueInNestedPathException: Invalid property 'nested.map[key]' of bean class [org.springframework.samples.mvc.convert.JavaBean]: Could not determine property type for auto-growing a default value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:42:41.833

使用`LazyMap`如下：

```
public class LazyMap<K, V> implements Map<K, V> {

    private Map<K, V> nestedMap;
    private Class<V> valueType;

    public LazyMap(Class<V> valueType) {
        nestedMap = new HashMap<K, V>();
        this.valueType = valueType;
    }

    @Override
    public void clear() {
        nestedMap.clear();
    }

    @Override
    public boolean containsKey(Object key) {
        return nestedMap.containsKey(key);
    }

    @Override
    public boolean containsValue(Object value) {
        return nestedMap.containsValue(value);
    }

    @Override
    public Set<java.util.Map.Entry<K, V>> entrySet() {
        return nestedMap.entrySet();
    }

    @SuppressWarnings("unchecked")
    @Override
    public V get(Object key) {
        if (!containsKey(key)) {
            try {
                put((K) key, valueType.newInstance());
            } catch (Exception e) {
                throw new IllegalArgumentException(e);
            }
        }
        return nestedMap.get(key);
    }

    @Override
    public boolean isEmpty() {
        return nestedMap.isEmpty();
    }

    @Override
    public Set<K> keySet() {
        return nestedMap.keySet();
    }

    @Override
    public V put(K key, V value) {
        return nestedMap.put(key, value);
    }

    @Override
    public void putAll(Map<? extends K, ? extends V> m) {
        nestedMap.putAll(m);
    }

    @Override
    public V remove(Object key) {
        return nestedMap.remove(key);
    }

    @Override
    public int size() {
        return nestedMap.size();
    }

    @Override
    public Collection<V> values() {
        return nestedMap.values();
    }

} 
```

豆：

```
public class NestedBean {

    private String foo;    
    private List<NestedBean> list;      
    private Map<String, NestedBean> map = new LazyMap<String, NestedBean>(NestedBean.class);

} 
```

# facebook - 您必须使用此操作类型将至少一项操作发布到您的时间轴

> ID：10944871
> 
> 赞同：1
> 
> 时间：2012-06-08T07:42:50.930
> 
> 标签：facebook, facebook-graph-api, facebook-apps

嗨，我只是使用开放图在 facebook 上定义我的自定义操作。在我想提交操作时创建操作后，它会创建错误。

```
 Publish Actions
You must publish at least one action to your Timeline using this action type. Review the documentation. 
```

并给我这个[页面](https://developers.facebook.com/docs/opengraph/actions/)的链接，我只能看到图形 api 的 url。如果我做错了什么？

任何人都可以告诉我如何摆脱这个错误吗？如何在我的时间线上发布操作，以便我可以提交我的操作以供批准？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:11:50.750

我有同样的问题。转到[Graph API Explorer](https://developers.facebook.com/tools/explorer/)页面，在“应用程序”下拉列表中选择您的应用程序。

将方法设置为 'POST 并在 url 中输入格式[https://graph.facebook.com/YOUR_ID/YOUR_APP_NAMESPACE:YOUR_APP_ACTION](https://graph.facebook.com/YOUR_ID/YOUR_APP_NAMESPACE:YOUR_APP_ACTION)

然后单击“添加字段”并在名称中输入您的操作类型对象的名称，并在值中输入您网站上对象的 url。还要确保在每个对象页面上都包含 OpenGraph 元标记，其中关键的 og:type 标记设置为 YOUR_APP_NAMESPACE:ACTION_OBJECT。我的一个例子是

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:49:44.560

您应该首先在您的网站/应用程序上测试该操作。Facebook 将检查您的时间线，然后只有 Facebook 批准。

**[编辑]**

提交是为了允许公众使用这些。但是管理员/开发人员可以在 Facebook 上使用发布操作。要在时间轴上发布这些操作，您可以使用[graph api explorer](https://developers.facebook.com/tools/explorer?method=GET&path=1274834235)或使用 php 或 js 等

**[编辑]**

> 操作是通过 App Dashboard 定义的。一旦应用程序定义了它发布的操作的类型，应用程序就可以调用 Graph API 将操作实例发布到 Open Graph——这通过操作将当前用户与适当的对象实例连接起来。

`POST /me/{namespace}:{action-type-name}`

> 以下调用在当前用户和南瓜派（Recipe 对象类型的实例）之间建立了 Cook 连接：

```
https://graph.facebook.com/me/recipebox:cook?  
 recipe=http://www.example.com/pumpkinpie.html&access_token=YOUR_ACCESS_TOKEN 
```

> 这是另一个使用 Javascript SDK 的示例：

```
 FB.api('/me/recipebox:cook', 'post',    { recipe :
 'http://www.example.com/pumpkinpie.html' }); 
```

仅供参考：[在时间轴上发布操作](https://developers.facebook.com/docs/opengraph/actions/)

# visual-studio-2010 - MFC 命令按钮控件如何在多字节字符集项目中显示？

> ID：10944872
> 
> 赞同：0
> 
> 时间：2012-06-08T07:42:51.343
> 
> 标签：visual-studio-2010, mfc

我在 Visual Studio 2010 中使用“命令按钮”MFC 控件时遇到问题。

创建基于对话框的非 Unicode MFC 项目时

![捕获巫师](../Images/b8d97253c2591bdf65c635c53f0c0f11.png)

并且在将命令按钮控件添加到初始对话框时

![添加了命令按钮控件](../Images/06de096e64df3e57a805747874b8a819.png)

当我构建并运行我的项目时，我得到：

![我的命令按钮控件不可见](../Images/e641d8f2071b16086f1d45a38f69fc7e.png)

当我单击其中一个按钮应该是复选框的区域时：

![所以我的控件在这里并做出反应](../Images/d444740f8f41dc0a399ae28986e8fac2.png)

现在，我编辑项目属性并切换到 Unicode 字符集：

![项目配置窗口](../Images/f2eb4b9149cbd94bbea77e643207909e.png)

当我构建并运行时，宾果游戏。

![我的对话框正常运行](../Images/e96f9546623ed405441690fc42e1c2de.png)

我的问题是：**有没有办法可以在多字节字符集中工作**？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:38:20.027

Common Control DLL 的多字节版本不支持某些内容。

我已经发现 CEdit::SetCueBanner 不适用于多字节构建，但似乎所有[“Windows Vista 通用控件”都要求您使用 Unicode 字符集进行构建](http://msdn.microsoft.com/es-es/library/bb531404%28v=vs.90%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T12:07:48.140

所有 Windows 通用控件和 Windows 内核本身都在内部作为 UNICODE 实现。确实存在对 MBCS 的支持以实现向后兼容性。因此，如果您使用 ASCII/MBCS 版本的 API（如`SetWindowTextA()`. 微软正试图迫使开发人员从 MBCS 迁移到 UNICODE。

为了解决您的问题，没有 MBCS 版本的命令按钮。所以你必须切换到 UNICODE 字符集。时机已到。

# jquery - 在phonegap android中添加滚动条的问题

> ID：10944874
> 
> 赞同：1
> 
> 时间：2012-06-08T07:43:02.853
> 
> 标签：jquery, android, cordova, scrollbar

我动态创建了一个 div，我尝试使用 iscroll js 添加滚动条。

但是我的应用程序引发了错误。

有人可以指导我吗？

```
// here to add scroll bar 

function loaded() {
    myScroll = new iScroll('wrapper', { scrollbarClass: 'myScrollbar' });
}
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', loaded, false);

// here i created a div dynamically

$results_list = $('<div id="wrapper" class="'+options.resultsClass+'" style="width:92%;height:10%;overflow:auto;position:absolute;"></div>').hide();//here i need to add scroll bar?
doIscrollRefresh(); 
```

**错误信息**

`TypeError: Result of expression 'that.wrapper' [null] is not an object. at file:///android_asset/www1/iscroll.js:60`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:24:27.837

在您的代码中添加以下 div 并检查它：

```
<div style="width:100%; float:left;  overflow-x:scroll;  padding-top:260px;>
  </div> 
```

# javascript - 如何在函数之外获取数组？

> ID：10944876
> 
> 赞同：1
> 
> 时间：2012-06-08T07:43:10.057
> 
> 标签：javascript, jquery

```
$("#div").click(function(){
 $('#myselect').change(function() {
     var names = [];
     $('.checkbox input').each(function() {
           if(this.value != ''){
                 names.push(this.value);
                }
             });
     console.log(names);
  });
}); 
```

我需要使用该功能的`names`外部才能在另一个功能上使用它。谁能告诉我该怎么做？

```
$("#dropdown").change(function(){
  console.log(names);
}); 
```

`names`是一个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:45:46.730

在函数之外定义“名称”...

```
var names = [];

    $('#myselect').change(function() {

         $('.checkbox input').each(function() {
               if(this.value != ''){
                     names.push(this.value);
                    }
                 });
         console.log(names);
      }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:52:27.273

您应该从该更改事件处理程序中调用另一个函数。在它之外定义数组是没有意义的，它绑定到那个事件。

```
function gotNewNames(names) {
    // do something every time the value changes
}

$("#div").click(function(){
    $('#myselect').change(function() {
        var names = [];
        $('.checkbox input').each(function() {
            if(this.value != ''){
                names.push(this.value);
            }
        });
        gotNewNames(names);
    });
}); 
```

如果您只需要能够在其他地方获取当前值，您应该在更高的范围内声明变量，例如在点击处理程序中：

```
$("#div").click(function(){
    var names;
    $('#myselect').change(function() {
        names = []; // don't forget to reset before filling
        $('.checkbox input').each(function() {
            if(this.value != ''){
                names.push(this.value);
            }
        });
    });
    $("#dropdown").change(function(){
        console.log(names);
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:44:36.543

你的意思是这样的：

如果我错过了什么，请告诉我。

否则希望这会有所帮助，

**代码**

```
 var names = []; // Move the name array to outer scope 

 $("#div").click(function(){

    $('#myselect').change(function() {

        $('.checkbox input').each(function() {
            if(this.value != ''){
                names.push(this.value);
            }
        });
        console.log(names);
    });

    alert(names);
}); 
```

# node.js - nodejs套接字失败

> ID：10944888
> 
> 赞同：0
> 
> 时间：2012-06-08T07:43:47.810
> 
> 标签：node.js

当我尝试启动我的脚本时，我不断收到错误消息。如果我删除调用“check();”的行 然后它工作正常。

错误： node: ../src/node_io_watcher.cc:160: static v8::Handle node::IOWatcher::Set(const v8::Arguments&): Assertion `!io->watcher_.active' 失败。

我相信我使用的是第 6 版。

失败的代码如下

```
function check(){
  hosts.forEach(function(item) {
    var sock = new net.Socket();
    sock.setTimeout(7500);
    ports.forEach(function(item1) {
      sock.on('connect', function() {
          console.log(item[0]+':'+item1[1]+' is up.');
          sock.destroy();
          serverstatus[item[1]][item1[0]] = "online";
      }).on('error', function(e) {
          console.log(item[0]+':'+item1[1]+' is down: ' + e.message);
          serverstatus[item[1]][item1[0]] = "offline";
      }).on('timeout', function(e) {
          console.log(item[0]+':'+item1[1]+' is down: timeout');
          serverstatus[item[1]][item1[0]] = "timeout";
      }).connect(item1[1], item[0]);
    });
  });
} 
```

# hibernate - 使用JPA的persist（）方法的瞬态异常..实体持久性的疑问..要坚持哪一方？

> ID：10944889
> 
> 赞同：0
> 
> 时间：2012-06-08T07:43:52.120
> 
> 标签：hibernate, jpa, transient, persist

我第一次在项目中使用 persist() 方法。使用 JPA，我使用 Hibernate 作为提供程序。这个案子很简单。我有 2 张桌子

1.  公司 - Company_id（PK，一个序列），G_Company_id（也是唯一的）
2.  CP_Doc - Chronicle_id (PK), Company_id (FK 到上面的 Company_id))

现在我有一些特定公司的 CP_Docs。我已成功创建实体（为 JPA 的 createNativeQuery、createQuery 工作）。我还提到了集合的 cascade = CASCADE.ALL。

为了坚持，我编写了以下代码。

```
Company company = new Company();
    company.setGCompanyId(7);
    for(/* Get all docs for a particular company having id = 7 */) {
        CP_Doc cpDoc = new CP_Doc();
        cpDoc.setChronicleId(/* some chronicle id from the loop */);    
        cpDoc.setCompany(company);
        entityManager.persist(cpDoc);
    } 
```

表之间的关系是一个公司可以有多个cp_docs。所以 CP_Doc 表是所有者表。我尝试从 CP_Doc 方面坚持下去。我也可以从公司实体方面坚持下去吗？请帮助专家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:55:48.307

如果我理解正确，您的数据库中已经有一家公司，ID 为 7，您尝试将 CPDoc 添加到该公司。

在这种情况下，保留公司几乎没有意义，因为它已经存在。而且创建一家新公司也没有任何意义，因为它已经存在。您应该改为从数据库中加载公司，并将公司附加到新的 CPDocs（反之亦然）：

```
Company company = entityManager.find(Company.class, 7);
for(...) {
    CP_Doc cpDoc = new CP_Doc();
    cpDoc.setChronicleId(...);    
    cpDoc.setCompany(company);
    company.getCPDocs().add(cpDoc);
    entityManager.persist(cpDoc);
} 
```

# iphone - 点击时 UISearchBar 没有响应

> ID：10944891
> 
> 赞同：4
> 
> 时间：2012-06-08T07:43:55.593
> 
> 标签：iphone, objective-c, uisearchbar, uisearchbardelegate

我一直在努力寻找解决方案几个小时，但可惜没有骰子......我一直在尝试纯粹以编程方式实现 UISearchBar（没有 xib，没有界面构建器）。

这是我的 .h 标头：

```
@interface RLCASearchMasterViewController : UIViewController<UISearchBarDelegate>

@property (strong, nonatomic) RLCAGUIElements *gui;
@property (strong, nonatomic) RLCAUITableView *table;
@property (strong, nonatomic) UISearchBar *searchBar;

@end 
```

和我的 .m 实现：

```
@synthesize searchBar;

- (void)loadView
{

[super loadView];

searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, self.view.frame.size.width, searchBar.frame.size.height)];
searchBar.delegate = self;
[self.view addSubview:searchBar];  

} 
```

我已经检查过这个我不知道多少次，并且不知道我做错了什么...... UISearchBar 被添加到视图中就好了，具有正确的大小和所有内容，但是当单击/点击时，键盘没有出现。但是，如果我唤起以下内容：

```
[searchBar becomeFirstResponder]; 
```

键盘确实显示了，所以它可能不是委托，而是实际检测它是否被点击......我不希望它在加载时编辑，并且只能通过请求......

请帮忙。谢谢！:)

真诚的，彼得。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T09:18:35.937

好的，我得到它的工作。

它有效，但我不知道为什么。如果有人有任何见解，我将非常感激......

所以：

我更换了：

```
searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(self.view.frame.origin.x,         self.view.frame.origin.y, self.view.frame.size.width, searchBar.frame.size.height)];
searchBar.delegate = self;
[self.view addSubview:searchBar]; 
```

和：

```
searchBar = [[UISearchBar alloc] init];
searchBar.delegate = self;
[searchBar sizeToFit];
[self.view addSubview:searchBar]; 
```

……啊，薇奥拉！;)

不过，感谢所有答案，并且如前所述，将不胜感激解释为什么这样做以及它做了什么。

一切顺利，彼得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:59:59.477

```
searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(self.view.frame.origin.x,         self.view.frame.origin.y, self.view.frame.size.width, searchBar.frame.size. 
```

您不应访问 searchBars 框架以在其自己的 init 方法中使用。我想，因为那时它还没有被初始化，所以它会是 0 从而给你一个没有高度的矩形，或者可能是一个 NSZeroRect 因为 makeRect 完全失败了

我认为这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:56:47.193

尝试定义它的委托方法并将成为第一响应者的方法放在 searchBarShouldBeginEditing 方法中。如果它仍然不起作用，请确保此视图之上是否没有任何其他视图。这样，它将覆盖触摸。

# asp.net - 报告无法识别正在传递的参数

> ID：10944899
> 
> 赞同：1
> 
> 时间：2012-06-08T07:44:07.683
> 
> 标签：asp.net, reporting-services, ssrs-2008

我创建了一个报告并部署在 Reporting Services 服务器上。此报告使用接收输入参数的存储过程填充：@RecordID。

在报告中，我还添加了一个名为 RecordID 的变量。

在我的 Visual Studio 项目中，我添加了 Report Viewer 控件并设置了服务器报表的路径。当我在网页上打开此报告时，它显示错误：

```
Parameter 'RecordID' does not exist on this report 
```

代码隐藏文件中的代码是：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Microsoft.Reporting.WebForms.ReportParameter Param = new Microsoft.Reporting.WebForms.ReportParameter("RecordID","3");
        ReportViewer1.ShowParameterPrompts = false;
        ReportViewer1.ServerReport.SetParameters(Param);
        ReportViewer1.ServerReport.Refresh();
    } 
```

**已编辑**

我在 Business Development Studio 中使用报表属性添加了一个变量。下面是图片。此变量设置为接收参数的值。

![在此处输入图像描述](../Images/756bb97fe0fb0655c58d949c1d533e7d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:21:46.077

在此![图片](../Images/49c6a9aeed8ac15afb1f9a44442b9116.png)您会看到添加新参数并将其链接到数据集的步骤。

# android - 排除的文件夹仍然出现在编译的应用程序中？

> ID：10944901
> 
> 赞同：1
> 
> 时间：2012-06-08T07:44:09.617
> 
> 标签：android, intellij-idea

我通过`Project Structure -> Modules -> Sources -> Right-click+Exclude on some layout files`. 之后我重新加载了项目，编译了它，但是排除的布局文件夹的内容仍然出现在正在运行的应用程序中。

例如，我排除了文件夹`layout-large-mdi`，编译了应用程序，但该文件夹中的内容仍然出现在应用程序中，而不是`/res/layout/`dir 中的内容。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:51:35.293

我不确定 IDE 功能对您有什么作用，但我很确定它不是为了阻止 Android 构建过程包含这些文件。为此，您需要删除目录或临时移动它。

# python - Python：取消转义“\ xXX”

> ID：10944907
> 
> 赞同：13
> 
> 时间：2012-06-08T07:44:31.100
> 
> 标签：python

我有一个带有*转义数据*的字符串，例如

```
escaped_data = '\\x50\\x51'
print escaped_data # gives '\x50\x51' 
```

什么 Python 函数会取消它，所以我会得到

```
raw_data = unescape( escaped_data)
print raw_data # would print "PQ" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T07:49:07.353

您可以使用解码`string-escape`。

```
>>> escaped_data = '\\x50\\x51'
>>> escaped_data.decode('string-escape')
'PQ' 
```

在[Python 3.0](http://en.wikipedia.org/wiki/History_of_Python#Version_3.0)中没有`string-escape`，但您可以使用`unicode_escape`.

从一个`bytes`对象：

```
>>> escaped_data = b'\\x50\\x51'
>>> escaped_data.decode("unicode_escape")
'PQ' 
```

从 Unicode`str`对象：

```
>>> import codecs
>>> escaped_data = '\\x50\\x51'
>>> codecs.decode(escaped_data, "unicode_escape")
'PQ' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T07:48:29.173

您可以使用“unicode_escape”编解码器：

```
>>> '\\x50\\x51'.decode('unicode_escape')
u'PQ' 
```

或者，'string-escape' 会给你一个经典的 Python 2 字符串（Python 3 中的字节）：

```
>>> '\\x50\\x51'.decode('string_escape')
'PQ' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T07:48:34.593

`escaped_data.decode('unicode-escape')`有帮助吗？

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-08T07:48:15.500

尝试：

```
eval('"' + raw_data + '"') 
```

它应该工作。

# sql - 如何将列标题及其值转换为sql中的行？

> ID：10944910
> 
> 赞同：7
> 
> 时间：2012-06-08T07:44:38.477
> 
> 标签：sql, sql-server-2008

我有一个列的表说`col1, col2, col3`。该表中有许多行。

让我们假设`val1, val2, val3`是这样的一行。我想得到结果

```
Col1, Val1
Col2, Val2
Col3, Val3 
```

那是 3 行 - 每列一个及其值。

我正在使用 SQL Server 2008。我阅读了有关枢轴的信息。枢轴是解决这个问题的方法吗？有人可以向我介绍一些如何解决此问题的示例或解决方案吗？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T07:55:36.790

也许是这样的：

**测试数据**

```
DECLARE @T TABLE(Col1 INT, Col2 INT, Col3 INT)
INSERT INTO @T
VALUES (1,1,1) 
```

**询问**

```
SELECT
    *
FROM
(
    SELECT
        t.Col1,
        t.Col2,
        t.Col3
    FROM
        @T AS t
) AS SourceTable
UNPIVOT
(
    Value FOR Col IN
    (Col1,Col2,Col3)
) AS unpvt 
```

**输出**

```
1   Col1
1   Col2
1   Col3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:46:03.700

要执行此类操作，请阅读以下内容：[使用 PIVOT 和 UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

枢轴功能允许您从列中转换行值..

另请检查：[SQL Server 中的动态透视](http://www.codeproject.com/Articles/27776/Dynamic-Pivoting-in-SQL-Server)

例子 ：

```
create table #temptable(colorname varchar(25),Hexa varchar(7),rgb varchar(1), rgbvalue tinyint)    
GO   
insert into #temptable values('Violet','#8B00FF','r',139);   
insert into #temptable values('Violet','#8B00FF','g',0);   
insert into #temptable values('Violet','#8B00FF','b',255);   
insert into #temptable values('Indigo','#4B0082','r',75);   
insert into #temptable values('Indigo','#4B0082','g',0);   
insert into #temptable values('Indigo','#4B0082','b',130);   
insert into #temptable values('Blue','#0000FF','r',0);   
insert into #temptable values('Blue','#0000FF','g',0);   
insert into #temptable values('Blue','#0000FF','b',255);

SELECT colorname,hexa,[r], [g], [b]   
FROM  
(SELECT colorname,hexa,rgb,rgbvalue   
    FROM #temptable) AS TableToBePivoted   
PIVOT   
(   
sum(rgbvalue)   
FOR rgb IN ([r], [g], [b])   
) AS PivotedTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-25T10:20:07.113

创建临时表：

```
CREATE TABLE #table2
(
name NCHAR,
bonus INT
) 
```

如果有空，现在选择并执行以下语句。

```
SELECT * FROM #table2

INSERT INTO #table2 (name,bonus) VALUES ('A',10)
INSERT INTO #table2 (name,bonus) VALUES ('B',20)
INSERT INTO #table2 (name,bonus) VALUES ('C',30) 
```

将值插入表后。如果您获得记录，请选择并执行以下行：

```
SELECT * FROM #table2 
```

输入：

```
name    bonus
A   10
B   20
C   30 
```

将输入更改为这样的结果

结果：

```
Cost        A    B  C
Bonus   10  20  30 
```

通过使用此代码：

```
SELECT 'Bonus' AS Cost, 
[A],[B],[C]
FROM
(SELECT name, Bonus 
FROM #table2) AS TempTbl 
PIVOT
(
    AVG(bonus)
    FOR [name] IN ([A],[B],[C])
) AS PivotTable; 
```

# asp.net-mvc-3 - ASP.NET MVC3 中的一个控制器中的多个模型

> ID：10944914
> 
> 赞同：1
> 
> 时间：2012-06-08T07:44:52.260
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

我有 2 个模型，ComanyModel 和地址模型。在公司模型中，有一个 AddressId 连接数据库中的两个表。我想注册一家公司并将信息保存在两个单独的表中的数据库中。现在我希望用户在同一页面中输入公司信息和地址，但不知道如何去做。我可以在 ASP 中做到这一点，但现在我在 MVC3 中非常新。

请告诉我如何存档。

这是我的两个模型类：

公共类CompanyModel

```
{

    public Guid AddressId { get; set; }
    public string CompanyEmailAddress { get; set; }
    public string DirectorName { get; set; }
    public Guid Id { get; set; }
    public string Name { get; set; }
    public int RegNo { get; set; }
    public string VatNo { get; set; }

} 
```

公共类地址模型

```
{

    public string City { get; set; }
    public string Code { get; set; }
    public Guid Id { get; set; }
    public string Line1 { get; set; }
    public string Line2 { get; set; }
    public string Suburb { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T07:59:12.420

您必须为两个表创建一个视图模型

例如：

```
public class nameViewModel
{
    public Company Company { get; set; }
    public Address Address { get; set; }
} 
```

然后在视图中

```
 @Html.LabelFor(model => model.Company.Name)

 @Html.EditorFor(model => model.Company.Name)
 @Html.ValidationMessageFor(model => model.Company.Name)

 @Html.LabelFor(model => model.Address.Name)

 @Html.EditorFor(model => model.Address.Name)
 @Html.ValidationMessageFor(model => model.Address.Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:08:03.490

正如 Murat 之前提到的，您可以创建一个新的视图模型，然后使用 和 访问类的`@Model.Company`实例`@Model.Address`。如果你很懒（像我一样），你可以从每个类创建强类型视图，然后将视图组合成一个。或者您可以从类中创建部分视图并通过`@Html.Action("CreateCompany", Model.Company)`或获取它们`@Html.Partial("CompanyView", Model.Company)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:52:02.600

你需要另一个像这样的课程

```
public class CompanyAddressModel
{
public CompanyModel Company { get; set; }
public AddressModel Address { get; set; }
} 
```

# jquery - 不支持无休止的滚动缓冲区

> ID：10944916
> 
> 赞同：0
> 
> 时间：2012-06-08T07:45:04.157
> 
> 标签：jquery, infinite-scroll

我正在尝试构建一个在网格视图中显示图像的网络应用程序。我已经实现了一个所谓的无限滚动功能，效果很好。问题是我添加了一个 500 像素的缓冲区，以便新图像的加载应该在到达页面末尾之前开始，但是这个缓冲区不被尊重。在触发之前，我必须滚动到绝对底部。我能做些什么？

我正在使用这个解决方案：[http ://www.hawkee.com/snippet/9445/](http://www.hawkee.com/snippet/9445/)

**这是我的滚动代码：**

```
$(window).scroll (function () {

 if ($(window).scrollTop () >= $(document).height () - $(window).height () - 500) {

  if (!self.loading) {

   if (self.stop) { return; }

    if (!self.pause) { self.append (); }

   }

  }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:35:31.607

您使用的是什么版本的 jQuery？我最近刚刚实现了几乎完全符合您所描述的内容，并且效果很好。您可能想尝试查看`$(document).offset()['top']`您的`body`元素是否向上移动。

也有可能所有的`if()`语句都在减慢您的浏览器和`scroll()`事件率。如果发生这种情况，您可能会在触发事件之前深入缓冲区。

加快速度的提示：

*   将您的简单/二进制检查移至复杂比较之前。这样，如果它们返回 false，您就不会浪费时间计算任何东西
*   将`>=`操作员替换为`>`以节省一些（可能可以忽略不计）处理能力。

如果以下内容不起作用，则可能是您的 jQuery 版本或其他代码行。

```
$(window).scroll(function(e){
  if(!self.loading && !self.stop && !self.pause && ($(window).scrollTop() + $(window).height()) > $(document).offset()['top'] + $(document).height() - 500){
    self.append();
  }
}) 
```

干杯，

麦克风

# android - Android facebook 等待 AsyncFacebookRunner 完成？

> ID：10944918
> 
> 赞同：1
> 
> 时间：2012-06-08T07:45:14.460
> 
> 标签：android, facebook, multithreading

在我的应用程序中，当应用程序执行某些操作时，我有一个 ProgressDialog 显示：

```
mProgressDialog = ProgressDialog.show(
            ((FriendListActivity) ctx).getParent(), "Please wait...",
            "Getting data...", true);
    updateDisplay(true); 
```

在 updateDisplay 方法中，它执行如下操作：

```
items = new ArrayList<FriendInfo>();
    fa = new FriendListAdapter(ctx, R.layout.friendlist_item, items);
    setListAdapter(fa);

Thread t = new Thread() {
            public void run() {
                getFriendList(); //This is where the problem occured

                initFriendList();
                handler.post(new Runnable() {
                    public void run() {
                        mProgressDialog.dismiss();
                        fa.notifyDataSetChanged();
                    };
                });
            }
        };
        t.start(); 
```

在`getFriendList()`中，我拨打电话以获取 Facebook 用户的信息：

```
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(
                    facebook);
            mAsyncRunner.request("me/friends&fields=name,picture",
                    new FriendsRequestListener((FriendListActivity) ctx,
                            currentuser)); 
```

之后，用户的信息将保存在我的数据库中。该`initFriendList();`方法（如下`getFriendList()`）将使用该数据来初始化视图。

问题是我希望 initFriendList() 等到 getFriendList() 完成获取数据。但是在 中`getFriendList()`，我使用 AsyncFacebookRunner，所以 initFriendList() 会立即运行。如何让 initFriendList() 在运行之前等待 AsyncFacebookRunner 完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:18:04.937

我是android世界的新手，也许这些可以帮助？

[http://developer.android.com/guide/components/processes-and-threads.html#AsyncTask](http://developer.android.com/guide/components/processes-and-threads.html#AsyncTask)

特别是异步任务

1.  您可以使用泛型指定参数的类型、进度值和任务的最终值。
2.  doInBackground() 方法在工作线程上自动执行。
3.  onPreExecute()、onPostExecute() 和 onProgressUpdate() 都在 UI 线程上调用。
4.  doInBackground() 返回的值被发送到 onPostExecute()。
5.  您可以随时在 doInBackground() 中调用 publishProgress() 以在 UI 线程上执行 onProgressUpdate()。
6.  您可以随时从任何线程取消任务。

这里解释的很好。。

[http://www.youtube.com/watch?v=uzJmi59b6oI&feature=bf_next&list=PL3B389D29207777C7](http://www.youtube.com/watch?v=uzJmi59b6oI&feature=bf_next&list=PL3B389D29207777C7)

在正确的轨道上？

--

# eclipse - STS 将 .groovy 编译为 .java

> ID：10944922
> 
> 赞同：0
> 
> 时间：2012-06-08T07:45:56.047
> 
> 标签：eclipse, grails, groovy

在编写一些与 grails 一起使用的 groovy 脚本时，我在使用 Springsource Tool Suite 时遇到了问题。

我真的不知道发生了什么变化，但是自从今天开始 STS 以来，它试图编译我的。groovy 文件为 .java。你可以想象没有任何成功。

我浏览了eclipse的所有设置，但没有发现任何设置错误。任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:46:35.003

你最近有更新吗？这个问题听起来像是您的 groovy-JDT 补丁不再安装。首先，查看您的错误日志。您可能会在其中一个条目中看到类似这样的内容：

> 创建 Groovy 语言支持时出错

如果是这样，那么您应该更新到最新的 Groovy-Eclipse 开发快照。使用以下更新站点：

> [http://dist.codehaus.org/groovy/distributions/greclipse/snapshot/e3.7/](http://dist.codehaus.org/groovy/distributions/greclipse/snapshot/e3.7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:54:29.960

毕竟我不知道发生了什么，但这是解决问题的方法：

*   删除 .project 和 .classpath
*   运行 grails 与 --eclipse 集成

# exception-handling - ASP.NET Web API：非描述性 500 内部服务器错误

> ID：10944938
> 
> 赞同：74
> 
> 时间：2012-06-08T07:47:26.713
> 
> 标签：exception-handling, asp.net-web-api

正如标题所说，我从 GET 请求到 IQueryable 操作有 500 内部服务器错误。错误正文为空。该错误发生在我的操作返回结果之后。

我使用 ASP.NET Web API RC。

如何获得该错误的堆栈跟踪？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-08T19:29:05.660

您可以尝试添加：

```
GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = 
    IncludeErrorDetailPolicy.Always; 
```

到您`Application_Start()`在 Global.asax 中。此解决方案适用于许多常见错误。

但是，如果您没有得到令人满意的信息，您应该考虑编写一个 l**异常过滤器**并在全局范围内注册它。

[这篇文章](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)应该让你开始。您需要的核心是编写和注册以下内容：

```
public class NotImplExceptionFilter : ExceptionFilterAttribute {
  public override void OnException(HttpActionExecutedContext context) {
     if (context.Exception is NotImplementedException) {
       context.Response = new HttpResponseMessage(HttpStatusCode.NotImplemented);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T20:59:23.330

发布 RC，此问题已得到修复，除了 500 内部服务器错误之外，您还将获得错误详细信息。（此问题仅适用于 Web 主机方案）。

您可以执行以下操作以获取在格式化程序的 WriteToStream 方法期间可能发生的实际异常的详细信息。

```
ObjectContent<IEnumerable<Product>> responseContent = new ObjectContent<IEnumerable<Product>>(db.Products.Include(p => p.ProductSubcategory).AsEnumerable(), new XmlMediaTypeFormatter()); // change the formatters accordingly

            MemoryStream ms = new MemoryStream();

            // This line would cause the formatter's WriteToStream method to be invoked.
            // Any exceptions during WriteToStream would be thrown as part of this call
            responseContent.CopyToAsync(ms).Wait(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T20:05:10.417

我遇到了同样的问题。我发现[Kiran Challa 的回应](https://stackoverflow.com/a/11004784/204065)有助于让实际异常被抛出我的行动之外。

为了解决我的问题，[将上下文的 ProxyCreationEnabled 属性设置为 false](http://social.msdn.microsoft.com/Forums/en/adonetefx/thread/1c37447a-e303-4947-a3ee-d2e6592aac0a)让我更进一步。

在我的场景中，我的下一个例外是由于我的模型中的循环引用。清理完之后，幻象 500 响应消失了。如果你还没有解决这个问题，祝你好运！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-18T09:12:22.487

在我的案例中，一个看似简单的路由弱点导致了这个问题：在我的 Api 控制器中有另一个具有相同签名（不是名称）的 HttpPost。默认路由没有解决名称差异，ServiceError 500 是它在到达任一 Api 函数之前给出的响应。解决方案：更改默认路由或您的签名，然后重试。

这是我的 RouteConfig.cs，它非常适合标准 WebApi2 使用：

```
 public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        // Default is required in any case.
        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-17T18:38:37.330

这可能与循环引用有关。

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references)

尝试将以下代码添加到 Global.asax 文件中的 Application_Start 方法：

```
 var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
 json.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.All; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-19T00:52:37.507

当我没有以正确的顺序指定查询参数时，我在 RC 中遇到了问题。例如，如果您指定`$skip=0`，它将得到 500，但如果您指定`$orderby=xxx&skip=0`没有错误。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-07T04:39:20.783

这个场景是由于以下原因引起的

1.  该问题是由于 Web.config 格式错误而发生的。（多个配置部分）

2.  我没有在**bin**文件夹中创建 **roslyn**文件夹，而是在根目录下创建了它。（部署位置。）

 **诊断此问题的最佳方法是在应用程序位置放置一个简单的 HTML 页面并尝试浏览它。500 错误描述将​​显示在此 html 页面上。

并且不要忘记添加

> `<customErrors mode="Off"></customErrors>`

到 Web.config

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-13T21:09:36.450

我通常使用 Global.asax 来捕获所有错误。这是您可以使用的代码片段

```
public void Application_Error(object sender, EventArgs e)
{
  Exception exc = Server.GetLastError();
  MvcApplication mvcApplication = sender as MvcApplication;
  HttpRequest request = null;
  if (mvcApplication != null) request = mvcApplication.Request;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-20T08:34:56.420

我有同样的问题，但它的来源略有不同：我设置的`CORS`策略不正确，这给了我`500 Internal server error`，但由于`CORS`不起作用，`Access-Control-Allow-Origin`标题没有在响应中显示，浏览器无法读取实际响应

我使用 ChromeDevTools 选项解决了这个问题，`Copy as cURL`这让我可以看到响应并了解错误来源

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-22T13:26:43.890

Fredrik Normén 就该主题写了一篇很棒的博客文章，名为[ASP.NET Web API 异常处理](http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-handling.aspx)。他的解决方案使用自定义异常类和可应用于所有`ApiController`操作方法的异常过滤器属性。**

# process - Minix 内核进程产量（如何调用软件中断）

> ID：10944939
> 
> 赞同：1
> 
> 时间：2012-06-08T07:47:28.060
> 
> 标签：process, interrupt, yield, minix

我试图在 Minix 源代码中找到内核进程可以调用以产生，导致软件中断和后续任务切换的代码。

# facebook-android-sdk - 使用android将照片上传到粉丝页面

> ID：10944941
> 
> 赞同：0
> 
> 时间：2012-06-08T07:47:33.233
> 
> 标签：facebook-android-sdk, fan-page

我想将照片上传到粉丝专页的墙（不是专页管理员），

现在我可以在粉丝专页墙上发帖，但我用同样的方法上传照片，它确实有效。

这是hackbook示例中的上传照片部分，

```
 public void onClick(DialogInterface dialog, int which) {
                                        /*
                                         * Source tag: upload_photo_tag
                                         */
                                        Bundle params = new Bundle();
                                        params.putString("url",
                                                "http://www.facebook.com/images/devsite/iphone_connect_btn.jpg");
                                        params.putString("caption",
                                                "FbAPIs Sample App photo upload");
                                      //id  148778808589468
                                        String access_token = Utility.mFacebook.getAccessToken();

                                        Utility.mAsyncRunner.request("me/photos", params,
                                                "POST", new PhotoUploadListener(), null);
                                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:17:34.333

如果您不是该页面的管理员，则无法将照片对象上传到粉丝页面。当然，您可以作为用户发布照片或视频的链接，但不能发布照片对象本身。尽管 Facebook 文档说用户可以将照片对象发布到粉丝页面，但它并没有这样做。每个人都面临同样的问题。如果您尝试根据文档发布照片对象，则照片将被发布到您的墙上，而不是粉丝页面墙上。

# jquery - 使用选择器加载 Jquery

> ID：10944944
> 
> 赞同：1
> 
> 时间：2012-06-08T07:47:54.040
> 
> 标签：jquery, ajax, load, css-selectors

我想知道如何或是否可以在 jQuery 的 ajax 请求中使用选择器

我想要实现的，是这样的

```
$(".classname").load("something.html $(".classname:contains('some text')").parent()"); 
```

换句话说，我想将一个复杂的选择器传递给请求的页面，而不仅仅是一个类或一个 ID。

任何人都可以提供帮助，或者这是不可能的？我似乎找不到任何其他被问到的线程！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:01:10.590

`.get`如果选择器很复杂，您可以改用。

```
$.get("something.html", function(data){
  $(".classname").html($(".classname:contains('some text')", data).parent().html());
}, "html"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T07:56:26.727

[`.load`](http://api.jquery.com/load/)假定 URL 后面的空格后面的文本是选择器。它必须是一个[文本选择器](http://api.jquery.com/category/selectors/)。您不小心在字符串中包含了等效的 javascript。试试这个：

```
$('.classname').load('something.html .classname:contains("some text"):parent'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:20:52.720

```
$('.classname').load('something.html *:has(.classname:contains("some text"))') 
```

# dynamic - ActiveMQ 高可用性动态从属配置

> ID：10944957
> 
> 赞同：0
> 
> 时间：2012-06-08T07:48:23.990
> 
> 标签：dynamic, configuration, activemq, high-availability, master-slave

我对 ActiveMQ 很陌生。我正在尝试实现高可用性功能。我在 ActiveMQ 中注意到的是，如果我必须指定故障转移 url，我必须在代码中指定它，例如，

```
String url = "failover://(tcp://localhost:61616,tcp://localhost:62001)?randomize=false";
ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(url); 
```

所以这意味着，如果我必须再添加一个 Slave，我需要在此处更改 URL 并重新部署更改。或者我需要在某个属性文件中有这个 URL。

是否有任何其他替代配置可用于自动选择动态添加的从站

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:12:11.690

如果您正在使用代理网络（而不仅仅是主/从），则有一个名为“updateClusterClients”（5.4 中的新功能）的选项可以做到这一点。当设置为“true”时，它会根据网络中代理的可用性自动更新客户端故障转移列表......

见[http://activemq.apache.org/failover-transport-reference.html](http://activemq.apache.org/failover-transport-reference.html)

# objective-c - 给定一个具有可选一对一关系的 NSManagedObject，我如何检查它们是否为空？

> ID：10944960
> 
> 赞同：0
> 
> 时间：2012-06-08T07:48:33.873
> 
> 标签：objective-c, ios, core-data

这是一个纯粹理论上的“假设”问题，因此没有急于回答的压力。我更喜欢在子类 NSManagedObject 的上下文中工作的答案，但我会接受基于父级的答案。

我知道如果关系是对多的，我只是检查并查看 NS(Ordered)Set 的计数，但是当你有一对一的关系时，我不确定我会做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:50:26.700

检查它是否为零。

# sql-server - 创建 SSIS 包 - 将数据从 Oracle 复制到 SQL Server

> ID：10944968
> 
> 赞同：6
> 
> 时间：2012-06-08T07:49:24.067
> 
> 标签：sql-server, oracle, ssis, package

我想编写一个 SSIS 包，用于将数据从 oracle 复制到 MS Sql 服务器。而且条件是，通过在 SQL 中选择一个表，可以知道哪些数据必须从 oracle 移动到 SQL。基本上 SQL Server 中的 Table1.Column1 必须从 oracle 填充，如果 SQL Server 中的该表中不存在该值。我们在该表中也有公共列值，以将记录映射到 sql server 和 oracle。所以要做到这一点，我计划在 SSIS 包中做到这一点。

任何人都可以详细解释我如何为上述场景创建一个 SSIS 包。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T08:37:29.827

您应该使用 Lookup 连接 SQL Server 和 Oracle 的公共列（相同数据类型），并从 Oracle 中检索在 SQL Server 中没有匹配记录的值。

设计 ![设计](../Images/f7a70be4a2d702adcedde45970150bc0.png)

1.使用SSIS 2005

1.  拖动一个 OleDB 源并指向您的 Oracle 数据库并选择表。
2.  拖动查找并选择 SQL Server 连接并指向其表。
3.  在列选项卡中加入公共列并在右侧选择您需要检索的列。 ![抬头](../Images/46e3191a86a62586a15a8c89ade82def.png)
4.  单击配置错误输出并为连接列选择重定向行。 ![抬头](../Images/1517e84d7ec2af84c3b91e9ad7b1d151.png)
5.  拖动 Oledb 命令并将其连接到查找的错误输出。6.在Oledb命令中写一个insert语句 ![奥尔德布](../Images/5e85a993c1eea68b017fc5c6da52cd88.png) ![奥尔德布](../Images/721cb374dfe7132c9ecf340730af2dd1.png)

2.如果您使用的是 SSIS 2008，则无需在查找中配置错误输出。只需将不匹配输出从查找拖到 SQL Server 目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:27:07.493

我建议[这个](http://sqlblog.com/blogs/andy_leonard/archive/2007/07/09/ssis-design-pattern-incremental-loads.aspx)实现。

我使用了 praveen 的解决方案，但有时它可能不是最好的。特别是当目标上的记录增加时的数量。此外，它不处理“更新”

# javascript - javascript 将数组转换为字符串

> ID：10944970
> 
> 赞同：0
> 
> 时间：2012-06-08T07:49:29.883
> 
> 标签：javascript, arrays

您好，我有 2 个数组，我想将它们放在一个字符串中。我的数组可以取从 0 到 maxNum-1 的值。所以假设我有 myArray1[i] 和 myArray2[i] 我想创建一个这样的字符串：

```
string = "myArray1ID" + 1 + "=" + (myArray1[1])
    + "&" +"myArray2ID" + 1 + "=" + (myArray2[1])
    + "&" + "myArray1ID" + 2 + "=" + (myArray1[2])
    + "&" + "myArray2ID" + 2 + "=" + (myArray2[2])
    + ......
    + "myArray1ID" + (maxNum - 1) + "=" + (myArray[maxNum-1])
    + "&" "myArray2ID" + (maxNum - 1) + "=" + (myArray2[maxNum-1]); 
```

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:54:34.857

使用循环的力量。

```
var output = [];

for (var i = 1; i < maxNum; ++i) {
    output.push(
        'myArray1ID' + i + '=' + myArray1[i],
        'myArray2ID' + i + '=' + myArray2[i]
    );
}
return output.join('&'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:55:38.257

```
var myString = '';

for(var i; i < myArray1.length; i++){
  myString += "myArray1ID" + i + "=" + (myArray1[i]) + "&";
  myString += "myArray2ID" + i + "=" + (myArray2[i]) + "&";
}

//remove trialing "&"
var myString = myString.substring(0, myString.length-1); 
```

这假设两个数组的长度相等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:54:49.987

使用循环：

```
var stringArray = sep = ""; 
for(var i = 1; i < maxNum; i++) {
    stringArray += sep + "myArray1ID" + i + "=" + myArray1[i];
    stringArray += "&myArray2ID" + i + "=" + myArray2[i];
    sep = "&";
} 
```

var`stringArray`应该包含您的数组值。

# git - 将 git 分支拆分为单独的仓库

> ID：10944972
> 
> 赞同：12
> 
> 时间：2012-06-08T07:49:47.140
> 
> 标签：git

我有以下 git 树：

```
branch v2 =>                    / --- [lots of work] --- [new version] --- ref_d
                               /
  root --- ref_a --- ... --- ref_b (project reset)
             \
branch v1 =>  \ --- [some works] --- ref_c 
```

由于 v1 和 v2 确实不同，两个不同的团队将维护 v1 和 v2，我希望两个单独的分支两个到不同的 git 存储库：

```
repo_v1 : from root to ref_c
repo_v2 : from ref_b to ref_d 
```

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T07:52:56.437

以下假设您将两个单独的新存储库设置为名为`repo_v1`和的遥控器`repo_v2`。

v1 分支很简单：

```
git push repo_v1 ref_c:v1 
```

v2 分支并不难：

```
git checkout --orphan v2 ref_b
git cherry-pick ref_b..ref_d
git push repo_v2 v2 
```

（`git checkout --orphan <branchname> <startpoint>`创建一个从指定点开始但没有任何该提交的父级的全新历史记录。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-08T16:01:01.693

根据项目设置我宁愿

1）为`v1`

```
git checkout v1
git remote add v1_repo git@gitlab.com:andrej/project-v1.git
git push v1_repo v1:master 
```

2a）合并`v2`到`master`分支。

```
git checkout master
git merge v2 
```

2b）如果您坚持创建 2 个新项目，那么您可以从新合并的 master 创建新项目：

```
git remote add v2_repo git@gitlab.com:andrej/project-v2.git
git push v2_repo master 
```

3）您可以通过删除 v1 和 v2 分支来整理原始仓库：

```
git checkout master
git branch -D v1
git branch -d v2 
```

您必须在此处使用`-D`强制删除分支`v1`，因为`v1`分支未合并。

# ios - 对 SSPI 的调用失败，请参阅内部异常。上下文已过期，无法再使用

> ID：10944982
> 
> 赞同：2
> 
> 时间：2012-06-08T07:51:07.527
> 
> 标签：ios, certificate, mdm, sspi

> 对 SSPI 的调用失败，请参阅内部异常。上下文已过期，无法再使用。

这个错误是什么意思？

我的 MDM 服务器上有一个证书，该设备从 SCEP 获取其身份证书。我正在尝试使用 MDM 和 SCEP 安装配置文件，但无济于事。控制台告诉我 MDM 服务器的证书无效。

我觉得奇怪的是设备登录到 MDM URL 并且我执行了“authenticateasserver”并且它工作正常，流已经过身份验证。一旦我单击安装 MDM 的配置文件，我就会收到上述错误。

```
 Console.WriteLine("Listening for clients...");
                TcpClient tcpClient = tcpListener.AcceptTcpClient();
                Stream s = tcpClient.GetStream();
                clientSSLStream = new SslStream(s, false, ValidateRemoteCertificate);

                try
                {
                    clientSSLStream.AuthenticateAsServer(cert, false, SslProtocols.Default, false);

                    if (clientSSLStream.IsAuthenticated)
                    {
                        Console.WriteLine("iPhone client is authenticated");
                    }
                    Console.WriteLine("iPhone Client connected");
                    string messagest = ReadMessage(clientSSLStream);

                    Payloads payloads = AddPayloads();
                    XDocument XMLPayloads = payloads.Generate();
                    string text = System.IO.File.ReadAllText("MDM Profile NEW.mobileconfig");
                    string XMLData = generateStringFromXML(XMLPayloads);
                    //string XMLData = "<html> <body><b>Hello</b> World</html>";
                    byte[] requestData = Headers.SendPOST(MDMServer.serverURL, text);
                    clientSSLStream.Write(requestData);
                } 
```

# database - 在Visual C++中读取数据库结构

> ID：10944984
> 
> 赞同：0
> 
> 时间：2012-06-08T07:51:22.020
> 
> 标签：database, visual-c++, ms-access, mfc

我正在尝试编写代码来帮助我阅读 .accdb 数据库结构，这意味着它将为我提供那里的表数量，它们的结构，即字段的数量和名称，每个表的索引信息。简而言之，所有与结构有关的东西。我不是说存储在表中的值或数据。

例如，如果我有一个数据库，比如说 xyz.accdb，它有 3 个表 - table1、table2、table3

table1 有文件名，没有
table2 -> 地址，名字
table3 -> 名字，职业

现在我的代码应该返回表数，即 3，每个表中的字段数，在每种情况下为 2，加上每个表中各个字段的名称。

任何建议、想法、代码、任何东西——最好是在 MSVC++ 中——将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:14:38.557

您应该能够从`MSysObjects`表中获得所需的信息：

表的示例查询：

```
SELECT MSysObjects.Name
FROM MsysObjects
WHERE (Left$([Name],1)<>"~")
AND (Left$([Name],4) <> "Msys")
AND (MSysObjects.Type)=1
ORDER BY MSysObjects.Name; 
```

请参阅[如何使用查询检索数据库对象的名称（查询 /forms/table/reports/modules/macros）？](http://access.mvps.org/access/queries/qry0002.htm)更多示例。

# javascript - 使用 Javascript 中的 onblur 事件在表格底部动态添加一行（没有按钮）

> ID：10944987
> 
> 赞同：3
> 
> 时间：2012-06-08T07:51:24.997
> 
> 标签：javascript, jquery, html-table

我的要求是，我有一个 3 列 5 行的表。当我使用最后一行时，应该在最后一行之后动态添加一个新行，当我再次使用新创建的行时，最后应该动态添加一个新行等等..但问题是我们不应该使用按钮要添加行，我们必须使用 onblur 或 onchange 事件。谁能建议我解决上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:01:14.150

为什么不使用`focus`事件，以便在开始使用最后一行时添加行？您可以将委托添加到表中，以便该事件即使对新添加的行也有效：

```
$(function(){
  $('#TheTable').on('focus', 'input', function(){
    if ($(this).closest('tr').is(':last-child')) {
      $('#TheTable').append('<tr><td><input type="text"/></td></tr>');
    }
  });
}); 
```

德米奥：http: [//jsfiddle.net/Guffa/2mcp3/](http://jsfiddle.net/Guffa/2mcp3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:57:08.987

检查以下链接，我正在使用按钮单击事件来调用该函数。您可以简单地将其更改为任何文本字段或其他内容的 onblur 功能。希望它会奏效。[检查此答案链接](http://adesignersnotes.blogspot.in/2012/02/dynamically-adding-rows-and-styles-to.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:58:43.993

以下函数可用于向表中添加行。

```
function addrow() {
    var table = document.getElementById('tableid');
    var row = table.insertRow(table.rows.length);
    row.id = 'row'+table.rows.length; //ID the rows however you like, make each one unique though.
} 
```

您可以考虑`onClick`为表格行添加一个新行。您可以在函数中添加类似这样的内容`addrow()`：`row.onClick = addrow();`，但如果您只希望最后一行执行此操作，请确保使用`document.getElementById('otherrow').onClick = "";`CSS ID“otherrow”重置旧行。

# c# - WinForms MVC 示例方法

> ID：10944988
> 
> 赞同：1
> 
> 时间：2012-06-08T07:51:26.093
> 
> 标签：c#, winforms, model-view-controller

我是 C# 的新手，我想通过 Win-from 示例学习 MVC 纯模式。我有几乎大部分的 SO 链接，但其中大多数都提到了一些有用的链接，这些链接解释了这些概念。[为 C# 寻找干净的 WinForms MVC 教程](https://stackoverflow.com/questions/955973/looking-for-clean-winforms-mvc-tutorial-for-c-sharp) 我试图从一些链接下载源代码，但我无法成功。

据我所知，MVC 是什么意思：

*   View 获取用户输入并将其发送到控制器。
*   控制器通知模型响应用户输入。
    *   可以直接修改视图
*   模型通知视图的变化。
*   View 根据模型的更改自行更新。

如果上述概念是错误的，请纠正我。

我正在做一个小项目来了解 MVC Winfroms。我在这些链接中分享了我的项目。 [https://rapidshare.com/files/328097704/MVCCustomerRecords.rar](https://rapidshare.com/files/328097704/MVCCustomerRecords.rar) [https://skydrive.live.com/redir?resid=8FE34CB77340CAA9!145](https://skydrive.live.com/redir?resid=8FE34CB77340CAA9!145)

这个项目的想法是创建一个客户记录并将其保存在一个 XML 文件中。我有四个功能`1.Create 2.Update 3.Remove and 4.Search by ID`

我已经完成了第一个功能，但我不知道如何继续其他功能。请协助我完成示例项目，如果此项目中的 MVC 模式错误，请纠正我。

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfCustomerRecordsItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <CustomerRecordsItem>
    <CustomerID>67868</CustomerID>
    <FirstName>ert</FirstName>
    <LastName>ert</LastName>
    <Address>ertreer</Address>
    <Mobile>677786868</Mobile>
    <Country>retret</Country>
  </CustomerRecordsItem>
</ArrayOfCustomerRecordsItem> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:26:36.487

看看这个博客，它可能会对你有所帮助。[http://uiftw.blogspot.com](http://uiftw.blogspot.com)

你说：

> 据我所知，MVC 是什么意思
> 
> 可以直接修改视图

我认为这是不正确的，因为这会在控制器中创建对视图的依赖。那时，它开始看起来更像 MVP 或 Presentation Model（即您的控制器开始看起来像一个演示者）。

# php - 动态 SQL 插入查询

> ID：10944989
> 
> 赞同：1
> 
> 时间：2012-06-08T07:51:30.740
> 
> 标签：php, mysql

嗨朋友我正在创建一个 php 页面来将数据从 csv 文件导入到 sql 数据库中。

这里数据库表和字段数由用户自己指定..

如果用户指定 4 个字段，则使用 for 循环创建它，如下所示。

```
<?php
include('connect.php');
$name = $_POST['table_name'];
//echo $name;

$create_tab = "CREATE TABLE $name(id varchar(15) PRIMARY KEY)";

if(mysql_query($create_tab,$con))
            {
                echo "Table <b><i>$name</i></b> created successfully... <br/> <br/>Add columns...";
            }
            else {
                die('Error1'.mysql_error());
            }

$field = $_POST['number_of_fields'];
//echo $name.$field;
echo '<form id="form1" name="form1" method="post" action="update-table.php">';
echo "<p>
          <label for='tablename'></label>
          <input type='hidden' name='tablename' id='tablename' value='$name' size='5'/>
        </p>";

echo "<p>
          <label for='fields'></label>
          <input type='hidden' name='fields' id='fields' value='$field' size='5'/>
        </p>";
echo '<table border="1" cellpadding="5" cellspacing="5">';
for ( $i = 1; $i <= $field; $i ++) {
    echo '<tr>';
    echo '<td>';
    echo "<p>
          $i
        </p>";
        echo'</td>';

    echo '<td>';
    echo "<p>
          <label for='textfield$i'></label>
          <input type='text' name='field$i' id='textfield$i' />
        </p>";
        echo'</td>';
            echo '<td>';
            echo "
            <select name='select$i' id='select$i'>
                    <option value='varchar(200)'>varchar</option>
                    <option value='int'>int</option>
                    <option value='float'>float</option>
                                        <option value='date'>date</option>
                  </select>";
                echo '</td>';
                                echo '</tr>';

    }
            echo '</table>';
?>
        <p>File Location :
          <input type="text" name="fileField" id="fileField" />
      </p>
<br/>
<INPUT type="image" name="search" src="images/alter.gif" border="0" height="75" width=120">

</form> 
```

然后表创建和更改如下..

```
 <?php
    include('connect.php');
$field = $_POST[fields]; 
$name = $_POST[tablename];    

for ( $i = 1; $i <= $field; $i++) {
//getting field names
  $varname = ($txtfield . $i);
    $$varname = $_POST[field.$i]; 
  // echo $$varname;
   $fi = $$varname;

//getting field types
  $selname = ($selfield . $i);
    $$selname = $_POST[select.$i]; 
     $dt = $$varname;

$sql = "ALTER TABLE $name ADD $fi $dt";

if(mysql_query($sql,$con))
            {
                echo "Field <b><i>$fi</i></b> added successfully...<br/>";
            }
            else {
                die('Error1'.mysql_error());
            }

    }

?> 
```

如上数据库表和字段被装箱...

我得到了使用静态变量插入数据的概念，如下所示..

```
<?php
// data import
include('connect.php');

$field = $_POST['fileField']; //file directory

echo "<br/><br/>Import file path: ";
echo $field;

 $file = $field; 

$lines = file($file);
$firstLine = $lines[0];

foreach ($lines as $line_num => $line) {
    if($line_num==0) { continue; } //escape the header column
    $arr = explode(",",$line);
    $column1= $arr[0];
    $column2= $arr[1];
// ' escape character
    if (strpos($column2, "'") == FALSE)
{
    $column21 = $column2;
}
else{
$column21 = str_replace ("'", "\'", $column2);
}
        $column3= $arr[2];
            $column4= $arr[3];

//print data from csv
echo "<table border='1' width='800' cellpadding='5' cellspacing='2'>";
echo "<tr>";
echo "<td width='8'>";
echo $column1;
echo "</td>";
echo "<td width='100'>";
echo $column21;
echo "</td>";
echo "<td width='5'>";
echo $column3;
echo "</td>";
echo "<td width='5'>";
echo $column4;
echo "</td>";
echo "</tr>";
echo "</table>";

     $import="INSERT into $name (id,name,year1,year2) values(

     '$column1','$column21','$column3','$column4')";
     mysql_query($import) or die(mysql_error());

}

?> 
```

现在，我的问题是我怎样才能使这个插入语句动态，因为它从表创建和更改查询中的for循环获得的数据在插入查询中动态创建字段名称和值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:57:34.090

如果我正确理解您的问题，听起来您想将插入组合到一个查询中（这在性能方面非常聪明）。SQL 允许您一次插入多行，如下所示：

```
INSERT INTO table (id, first, last) VALUES(NULL, 'Ryan', 'Silvers'),(NULL, 'Oscar', 'Smith'),(NULL, 'Jessica', 'Owens') 
```

因此，通过创建一个 VALUES 数组并使用 implode 加入它们，您可以进行一个查询：

```
//Create rows
foreach($rows as $row) {
    $queryRows[] = "(NULL, '".$row['first']."', '".$row['last']."')";
}

//Create query
$query = 'INSERT INTO table (id, first, last) VALUES'.implode(',', $queryRows); 
```

* * *

既然我理解了你的真正问题，我可以给你一个基本的概述，说明你需要做些什么来实现这个目标。您需要创建一个表单，允许用户输入将插入到表中的数据。

```
<form method="post" action="process.php">
    <input name="field1" />
    <!-- and more -->
</form> 
```

然后你需要编写一个PHP脚本来处理表单提交并将数据插入MySQL：

```
<?php
    //Check form submission and validate entries, then...

    $stmt = $pdo->prepare('INSERT INTO table (field1) VALUES(:field1)');
    $stmt->execute(array(':field1', $_POST['field1']));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T13:11:19.307

然后你需要编写一个PHP脚本来处理表单提交并将数据插入MySQL：

功能插入（$平板电脑，$datad）{

```
 if(empty($tablet)) { return false; }

    if(empty($this->CONN)){ return false; }

    $conn = $this->CONN;

    $query1 = "select * from user"; 
    $result1 = mysql_query($query1); 
    $numcolumn = mysql_num_fields($result1); 

    $addd = "";
    $count = 0;
    for ( $i = 1; $i < $numcolumn; $i++ ) 
    { 
        $columnnames = mysql_field_name($result1, $i); 
        if(($numcolumn-1) == $i)
        {
            $addd .= $columnnames;
            $data .= "'".$datad[$count]."'";
        }
        else
        {
            $addd .= $columnnames.",";
            $data .= "'".$datad[$count]."',";
        }
        $count++;
    }
    $ins = "INSERT INTO ".$tablet."(".$addd.")"."VALUES(".$data.")";
    mysql_query($ins);
    header('Location: index.php');
    exit;
} 
```

# perl - perl -n 来自管道和@ARGV 的输入

> ID：10944992
> 
> 赞同：1
> 
> 时间：2012-06-08T07:51:46.213
> 
> 标签：perl, command-line-arguments

我有一个这样的单行：

```
date +%H | perl -ne 'printf "%02d", $_ - ($ARGV[0] - 1);' 1 
```

它说：

```
Can't open 1: Datei oder Verzeichnis nicht gefunden. 
```

错误消息的意思是“找不到文件或目录”。

我希望它同时获取日期和命令行参数的输出。

本质上，它应该让我得到当前小时减去参数减去一。如果有更好的方法来实现这一点，我会很乐意接受它们。对于为什么这不起作用的解释，我仍然很感激。

假设现在是上午 10 点之后。

```
Param Output
    1     10
    2     09
    3     08 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:03:02.583

结果可能是昨天甚至更早的过去，仅打印小时没有多大意义。

```
perl -mDateTime -e'
    my $dt = DateTime->now;
    $dt->subtract(hours => 1);
    $dt->subtract(hours => shift @ARGV);
    print $dt->hour;
' 4 
```

尽可能使用标准的日期时间戳，例如广泛使用的 RFC3339。

```
perl -mDateTime -mDateTime::Format::RFC3339 -e'
    my $dt = DateTime->now;
    $dt->subtract(hours => 1);
    $dt->subtract(hours => shift @ARGV);
    print DateTime::Format::RFC3339->new->format_datetime($dt);
' 4 
```

* * *

您的 Perl 单行代码解析为：

```
LINE: while (defined($_ = <ARGV>)) {
    printf '%02d', $_ - ($ARGV[0] - 1);
} 
```

……因为[`-n`](http://p3rl.org/run#%2a-n%2a)。[`ARGV`](http://p3rl.org/var#ARGV)：

> 在@ARGV 中迭代命令行文件名的特殊文件句柄。

但是您没有文件名作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:31:05.560

`perl -n`如果没有参数，则创建一个隐式循环读取作为参数或 STDIN 列出的文件；这与您使用不同的论点相冲突。`@ARGV`您可以通过在 BEGIN 块中清除来修复它：

```
date +%H | perl -ne 'BEGIN{ $arg=shift } printf "%02d", $_ - ($arg - 1);' 1 
```

但是对于这个特定的任务，你最好还是完全在 perl 中进行日期计算。

# android - 从 Android Gallery 获取完整的可访问路径

> ID：10944993
> 
> 赞同：0
> 
> 时间：2012-06-08T07:51:46.503
> 
> 标签：android, gallery

我需要从 Android Gallery 访问文件并使用 POST 将其上传到 URL。

没有问题。我只是做这些事情的新手，比如访问设备数据。我需要一个提示来获取我使用 Intent 和 StartActivityForResult 从图库中选择的图像的完整路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:56:20.283

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Uri uri = data.getData();
    Bitmap bt = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:59:23.837

```
startActivityForResult(new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI), SELECT_IMAGE); 
```

获取 SD Card.Uri 上的图像将是

`android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI`

onActivityResult 方法：

```
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    if (resultCode == RESULT_OK) {
        Uri photoUri = intent.getData();

        if (photoUri != null) {
            try {
                Bitmap bitmap = MediaStore.Images.Media.getBitmap(this
                    .getContentResolver(), photoUri);

                //Now you can upload this bitmap to server or do something else.
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

# sql - WPF 数据网格和 SQL 关系数据

> ID：10944998
> 
> 赞同：1
> 
> 时间：2012-06-08T07:52:01.147
> 
> 标签：sql, wpf, datagrid

我有以下问题：我有 2 个 Datagrids 通过 Collectionviewsource 绑定到一个数据集。数据集包含 2 个相互关联的表。

第一个 DG 显示父数据，第二个显示关系（依赖）数据。

现在，最初我尝试像以前在 WInForms 中使用 DataGridView 控件一样遍历第二个 DG 中显示的行。

经过一番研究，我发现 DataGrid 中没有行属性，因为它只显示绑定到它的数据。

现在如何访问第二个数据网格中显示的数据，以便可以在列表视图的某些列中列出内容？

谢谢

最大限度