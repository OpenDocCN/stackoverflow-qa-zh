# StackOverflow 问答 12043000-12043999

# freetds - 通过 gem install tiny_tds 在 OSX 10.6 上安装 TinyTDS 时出错

> ID：12043003
> 
> 赞同：7
> 
> 时间：2012-08-20T18:25:29.990
> 
> 标签：freetds, tiny-tds

我一直在尝试在装有 OSX 10.6 的 Macbook 上安装 TinyTDS gem。我成功安装了 Free TDS - 确认它可以通过以下方式工作：

```
tsql -H SERVER -p 1433 -U username. 
```

我从**gem install tiny_tds**得到的错误是：

```
Building native extensions.  This could take a while...
ERROR:  Error installing tiny_tds:
    ERROR: Failed to build gem native extension.

        /Users/jason/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... yes
checking for sybfront.h... yes
checking for sybdb.h... yes
checking for tdsdbopen() in -lsybdb... no
-----
freetds is missing.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我试过指定 TDS 库并包含目录（/usr/local/lib 和 /usr/local/include），但没有运气。我尝试过手动以及通过自制软件从源代码重新安装 FreeTDS，但这没有任何区别。

我已经看到发布了一些类似的问题，但它们似乎引用了我似乎正在超越的定位 iconv 库的问题。

我可能忽略了任何建议或参考资料？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-28T12:06:25.180

Ubuntu 14.04 上的相同问题通过以下方式解决：

```
sudo apt-get install freetds-dev

gem install tiny_tds 
```

日志输出：

```
Building native extensions.  This could take a while...
/home/david/.rvm/rubies/ruby-2.1.0/lib/ruby/site_ruby/2.1.0/rubygems/ext/builder.rb:73: warning: Insecure world writable dir /mnt/datapart/david in PATH, mode 040777
Successfully installed tiny_tds-0.6.1
Parsing documentation for tiny_tds-0.6.1
Installing ri documentation for tiny_tds-0.6.1
Done installing documentation for tiny_tds after 0 seconds
1 gem installed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T15:31:34.570

您需要使用 homebrew 安装 freetds

```
brew update  # always a good idea to update homebrew before installing anything!
brew install freetds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-20T19:59:37.997

就我而言，似乎符号链接配置不正确，并且使用“brew link freetds”会引发需要打开一些权限的错误。我几乎尝试了其他所有方法，这终于奏效了：

```
devMac:0.95.18 Me$ sudo chown -R $USER /usr/local/share/doc/freetds/images
devMac:0.95.18 Me$ sudo chown -R $USER /usr/local/share/doc/freetds/reference
devMac:0.95.18 Me$ sudo chown -R $USER /usr/local/share/doc/freetds/userguide
devMac:0.95.18 Me$ sudo chown -R $USER /usr/local/share/man/man5
devMac:0.95.18 Me$ brew link --overwrite freetds
Linking /usr/local/Cellar/freetds/0.95.18... 2812 symlinks created
devMac:0.95.18 Me$ sudo gem install tiny_tds 
Building native extensions.  This could take a while...
Successfully installed tiny_tds-0.6.2
Parsing documentation for tiny_tds-0.6.2
Installing ri documentation for tiny_tds-0.6.2
Done installing documentation for tiny_tds after 0 seconds
1 gem installed 
```

免责声明：我处于学习此框架的早期阶段，不了解使用覆盖或更改这些权限的后果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-21T03:35:47.503

就我而言，使用安装 Ruby 2.3.0是可行的`brew install ruby`。我从这个问题中得到了这个想法[Cannot install tiny_tds on os.x 10.9.4](https://stackoverflow.com/questions/24931638/cannot-install-tiny-tds-on-os-x-10-9-4)。

# jsp - Looping through ArrayList in JSP

> ID：12043004
> 
> 赞同：0
> 
> 时间：2012-08-20T18:25:45.133
> 
> 标签：jsp

I have an ArrayList in JSP that is storing values that I have from exploding a string. These values are numbers. I can print the Arraylist out to the page just fine and I can also access individual values just fine. However, when I go to put the ArrayList in a for loop to loop through the values the page will not load(how the serer is set up).

Here's the code for what I am trying:

```
String dds = request.getParameter("dds"); 
    //"1,2,3,4,5,6,7";
String ddm = "this";
ArrayList ddr=new ArrayList();
if(dds == "null" || dds == null){
    ddr.add("99");
}else{
String[] ddq = dds.split(",");
int g = 0;
for(g=0;g<ddq.length;g++){
    ddr.add(ddq[g]);
}
} 
```

This works fine and then here are the things I have tried that work (for my tests I just made the ArrayList = 1,2,3,4,5,6,7,8):

```
int h=0;
 for(h=0;h<ddr.size();h++){
    if(h>0){           
     out.print(","+ddr.get(h));
    }else{
     out.print(ddr.get(h));
    } 
```

It also works if I just call:

```
ddr.get(0) 
```

But the when I try to throw it in an if statement it does not work. Like so:

```
 int h=0;
 for(h=0;h<ddr.size();h++){
    if(ddr.get(h) == i){           
     out.print("This does not work");
    }
} 
```

Also I have tried converting it to an int:

```
if(Integer.parseInt(ddr.get(h)) == i) 
```

But this just leads to the page not loading again.

This may be something simple and I'm just missing it. But I'm just trying to add a feature to preexisting code I didn't make in the first place. Thanks for any help beforehand.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:12:07.050

我想通了。这有点令人费解，所以我仍然对其他想法持开放态度，但它完成了工作。我所做的是将我正在比较的值和数组值都转换为字符串，然后再转换回整数。我不知道为什么这有效，只是做数组值没有，但它似乎已经成功了。

# php - 什么是在 php 中处理 xml 到 MySql 的最佳方法

> ID：12043005
> 
> 赞同：-1
> 
> 时间：2012-08-20T18:25:51.973
> 
> 标签：php, mysql, xml

嗨，伙计们已经为此苦苦挣扎了一段时间，我可以对数据进行 xsl 转换，并且可以输出数据，但是我想保存我尝试过自动生成数组的数据，如[使用 foreach 显示的复杂多维关联数组过程](https://stackoverflow.com/questions/12042496/complex-multidimentional-associative-array-process-with-foreach)但这不起作用，因为有多个房间帐户，我只能在数组中使用名称 ['room']

所以我需要知道使用 php 将 xml 获取到 MySql 的最佳方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:28:19.437

一个简单的方法是使用 PHP 的集成 SimpleXML

# cron - questions on crontab

> ID：12043016
> 
> 赞同：-1
> 
> 时间：2012-08-20T18:26:36.337
> 
> 标签：cron, crontab

I have following questions on cron.

1.  What is the preferred way for automating cron jobs? Using *a)* crontab command-line options (eg. `crontab -e`) or *b)* editing `/etc/crontab`. What is the difference between the two? It's not exactly clear to me.

2.  Is crontab user specific? If I am logged in as a a user say "anup", and add jobs using `crontab -e`, will the job be user-specific? However, in some of the cron examples I checked online, username is provided as a field between the time string and the command to be executed.

3.  Can the 'Mail to user" option be controlled for each job? As in, for job 1: `MailTO: root` for job 2: `MailTO: anup`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:51:32.980

1.  crontab 实用程序是一个命令行工具，用于维护单个用户的 crontab 文件。

    **crontab -l**列出/查看当前用户的 crontab

    **crontab -e**编辑 crontab

    您可以键入**man crontab**以获取大多数 linux/mac 系统上的完整文档。

2.  crontab 是特定于用户的。如果您以 anup 身份登录，则 crontab -e 将编辑 anup 的 crontab 文件。您可以使用 -u 标志指定用户（crontab -u）

3.  我不是 100% 确定，但我相信您可以指定一个新的 MAILTO= 设置，它将对之后执行的所有进程生效。

# sql - 我想将两个 SQL 查询合二为一

> ID：12043017
> 
> 赞同：1
> 
> 时间：2012-08-20T18:26:37.993
> 
> 标签：sql, oracle

如果可能的话，我想将两个 SQL 查询合并为一个。第一个是获取有关车间订单的信息，第二个是从具有相同 shop_order_id 的所有先前记录中获取修订信息。

第一个查询：

```
SELECT so.shop_order_id, so.shop_order_suffix, so.status, so.mfg_method, so.description
  FROM shop_order so
  WHERE so.shop_order_id = 'ZZ1810C'
    AND so.shop_order_suffix = '000';` 
```

第二个查询：

```
SELECT so.user_att27, so.user_att28 
  FROM shop_order so
  WHERE so.shop_order_id LIKE 'ZZ1810C%'
  ORDER BY shop_order_suffix DESC;` 
```

是否可以将它们组合在一起，以便它们一次运行，如果可以，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:30:17.313

我认为你需要一个 JOIN ：

```
 SELECT so.shop_order_id, so.shop_order_suffix, so.status, so.mfg_method, so.description,  so2.user_att27, so2.user_att28
    FROM shop_order so 
    JOIN shop_order so2 ON so2.shop_order_id LIKE 'ZZ1810C%'
    WHERE so.shop_order_id = 'ZZ1810C' AND so.shop_order_suffix = '000'
    ORDER BY shop_order_suffix DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:32:45.940

你希望结果是什么？一个例子会很有帮助。

下面结合了这两个条件：

```
SELECT so.shop_order_id, so.shop_order_suffix, so.status, so.mfg_method,
      so.description, so.user_att27, so.user_att28
FROM shop_order so
WHERE so.shop_order_id LIKE 'ZZ1810C%'
ORDER BY shop_order_suffix DESC; 
```

这将列出车间订单的所有行，每行都重复初始信息。附加字段会告诉您有关修订的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:36:41.150

您提到第二个查询的目的是获取具有相同 shop_order_id 的所有先前记录，但第二个查询过滤了以提供的文本开头的 shop_order_ids，如 LIKE 子句所指定。

如果意图包括所有这些，则两个查询来自同一个表，因此只需获取所有此类条目的所有列的并集。我会按 shop_order_id 订购，以便首先显示没有任何附加后缀文本的那个：

从 shop_order 中选择 so.shop_order_id、so.shop_order_suffix、so.status、so.mfg_method、so.description、so.user_att27、so.user_attr28 所以在哪里 so.shop_order_id LIKE 'ZZ1810C%' AND so.shop_order_suffix='000' ORDER BY so.shop_order_id DESC；

# python - 使用flask/jinja，在用户生成的文本块中安全地呈现链接的可行方法是什么？

> ID：12043021
> 
> 赞同：4
> 
> 时间：2012-08-20T18:27:11.423
> 
> 标签：python, regex, security, flask, jinja2

想想 twitter，你在一些纯文本旁边粘贴了一个链接，当你的推文被渲染时，那个 url 现在是一个可点击的链接。

我是否：

*   通过扫描文本中的 html 标签并用 html 实体代码替换它们，用我自己的替换 jinja 的 autoescape

*   使用正则表达式检测文本中包含的 url 并将其替换为 a href=

    *   如果检测到任何# of .tld、http/https、www/any 子域，这个表达式会是什么样子？
*   并在模板中将这一切渲染为 ¦safe？

还是有一个 python/flask/jinja '功能'可以更好地处理这种事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T18:30:09.487

Jinja 有一个内置的过滤器，[`urlize`](http://jinja.pocoo.org/docs/templates/#urlize)它应该完全符合您的要求。

# objective-c - ARC 不允许从 Objective-C 指针到 int * 的隐式转换

> ID：12043024
> 
> 赞同：1
> 
> 时间：2012-08-20T18:27:41.483
> 
> 标签：objective-c, ios, xcode

我有一个 DMGStatController 类，它有一个 DMGSecondaryStatViewController 类型的委托。我写

```
DMGStatController *controller = [[DMGStatController alloc] init]; 
controller.delegate = self; 
```

正是这第二行代码给了我错误“ARC不允许从Objective-C指针到int *的隐式转换”。我不知道编译器在说什么... DMGStatController 的属性委托是 DMGSecondaryStatViewController 类型，而不是 int *。任何帮助将非常感激。

另外，这里是我声明委托的地方。

```
#import <UIKit/UIKit.h>
#import "DMGSecondaryStatViewController.h"

@interface DMGStatDescriptionViewController : UIViewController{

}

@property(nonatomic , retain) DMGSecondaryStatViewController *delegate; 
@property(nonatomic , retain) NSString *finalStatChosen; 

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:33:54.307

确保`#import "DMGStatController.h"`，并且标题包含`@class DMGSecondaryStatController`. 您可能会收到一个警告，即它不知道是什么`DMGSecondaryStatController`并且默认为`int`. 确保您的 ObjC 代码中没有警告。大多数 ObjC 的“警告”实际上都是错误的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T03:20:49.527

我觉得你应该改变

`#import "DMGSecondaryStatViewController.h"`

到

`@class DMGSecondaryStatViewController;`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-02-24T11:19:42.333

教训：编译器是对的。“我不知道编译器在说什么”的心理态度使您无法找到解决方案。你坚持你的代码是正确的，所以你找不到错误。正确的态度是“我犯了错误。我犯了什么错误？”

如果你再打开几个警告，你可能会发现编译器找不到委托方法，因此对委托方法的参数做了一些假设，然后抱怨不允许转换.

# c++ - 继承和演员表

> ID：12043030
> 
> 赞同：0
> 
> 时间：2012-08-20T18:28:13.167
> 
> 标签：c++, class, inheritance, casting, parent-child

我在 C++ 中的类转换时遇到了一些问题。
为了学习，我想创建一个只进行运算的类，比如求和，但每次启动它似乎都会崩溃。

这是我的简单课程：

```
#include <iostream>

class CCalculation {
public:
CCalculation() {};
virtual int calculate() = 0;
};

class CCalc_CONST : public CCalculation {
    int x;
public:
    CCalc_CONST(int a) : x(a) {};
    int calculate() { return x; };
};    

class CCalc_ADD : public CCalculation {
    CCalculation *x;
    CCalculation *y;
public:
    CCalc_ADD(CCalculation *a, CCalculation *b) {
        this->x = a;
        this->y = b;
    };
    int calculate() {
        std::cout << "Calculation...\n";
        return x->calculate() + y->calculate();
    };
}; 
```

我的测试：

```
 CCalculation *a = &CCalc_CONST(4);
    CCalculation *b = &CCalc_CONST(1);
    CCalculation *c = &CCalc_ADD(a,b);

    std::cout << "res: " << c->calculate() << "\n"; 
```

它似乎每次都崩溃（我没有收到编译器错误或警告）。我发现运行它的唯一方法是在 CCalc_ADD 构造中打印 a->calculate 和 b->calculate 时。我完全不知道为什么我需要调用计算函数才能使其工作。

有人可以向我解释如何实际做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:42:33.110

首先，您应该打开所有警告（请参阅编译器的文档，在 `gcc` `-Wall`）

然后你会看到，你的编译器会责怪你：

```
1.cpp: In function 'int main()':
1.cpp:56:37: error: taking address of temporary [-fpermissive]
1.cpp:57:37: error: taking address of temporary [-fpermissive]
1.cpp:58:37: error: taking address of temporary [-fpermissive] 
```

其实这里

```
CCalculation *a = &CCalc_CONST(4); 
```

您只需创建临时对象，该对象将在创建后立即销毁，并且指针损坏。

您有 2 个选择：

1.  在动态内存中创建对象（但在这种情况下，我建议让复杂的计算所有者更简单）

    ```
    class CCalc_ADD : public CCalculation {
        std::unique_ptr<CCalculation> x;
        std::unique_ptr<CCalculation> y;
    public:
        CCalc_ADD(CCalculation *a, CCalculation *b):x(a), y(b)
        {
        };
        int calculate() {
            std::cout << "Calculation...\n";
            return x->calculate() + y->calculate();
        };
    };

    std::unique_ptr<CCalculation> a(new CCalc_CONST(4));
    //... 
    CCalc_ADD c (std::move(a), std::move(b)); 
    ```

2.  用引用替换指针。然后你可以使用值语义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:55:05.873

要获得一个工作程序，您甚至不需要使用`new`：

```
CCalc_CONST a(4);
CCalc_CONST b(1);
CCalc_ADD   c(&a,&b);

std::cout << "res: " << c.calculate() << "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:31:51.997

您正在尝试访问不再存在的临时对象。使用运算符`new`为对象分配内存并调用其构造函数。

```
CCalculation *a = new CCalc_CONST(4);
CCalculation *b = new CCalc_CONST(1);
CCalculation *c = new CCalc_ADD(a,b); 
```

我已经使用 GCC 进行了尝试，它对此发出了非常明确的警告：

```
test.cpp: In function ‘int main()’:
test.cpp:35:33: error: taking address of temporary [-fpermissive]
test.cpp:36:37: error: taking address of temporary [-fpermissive]
test.cpp:37:37: error: taking address of temporary [-fpermissive] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:32:15.780

你没有用新的。像这样测试：

```
CCalculation *a = new CCalc_CONST(4);
CCalculation *b = new CCalc_CONST(1);
CCalculation *c = new CCalc_ADD(a,b); 
```

您可以通过编译来清除临时对象上的地址之类的东西`-Wall`，这会启用所有编译器警告。编译器是您的朋友，可以提供帮助。喜欢编译器。

# java - Curl cacert to Java HttpClient equivalent

> ID：12043033
> 
> 赞同：5
> 
> 时间：2012-08-20T18:28:25.917
> 
> 标签：java, ssl, httpclient, keytool, jks

I wonder if I am able to make a connection using curl like the following command,

> curl --cacert some.pem [https://someurl.com/resource](https://someurl.com/resource)

How do I convert this to httpclient code? I understands I need to convert the pem file and create a new keystore, etc. But all these openssl, keytool commands, keystore, truststore confuses me, I don't know which one to use and in which order.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:15:44.983

您需要从 PEM 文件创建一个密钥库（您将用作信任库）。这可以如下进行。

```
keytool -import -file cacert.pem -alias myca -keystore truststore.jks 
```

然后，您需要将此密钥库用作信任库。

如果您希望仅针对特定连接执行此操作，则应遵循[此答案](https://stackoverflow.com/a/859271/372643)。

如果您想对应用程序中的所有连接（或至少那些不更改默认值的连接）执行此操作，您可以使用`javax.net.ssl.trustStore`（和相关的）系统属性（请参阅[JSSE 参考指南的自定义部分](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)）。如果您想为整个应用程序执行此操作，问题是默认的受信任 CA 将不包括在内。解决此问题的一种简单方法是制作与 JRE 捆绑在一起的文件的副本，`cacerts`并将其用作`truststore.jks`.

或者，您可以将证书直接导入到全局`cacerts`文件中，但这将使该证书默认在此 JRE 上运行的所有应用程序上受信任。

[（您还可以在此答案](https://stackoverflow.com/a/6341566/372643)中找到有关密钥库和信任库之间区别的更多信息。）

# java - HTML to PDF using iText External CSS

> ID：12043035
> 
> 赞同：2
> 
> 时间：2012-08-20T18:28:30.107
> 
> 标签：java, pdf-generation, itext, flying-saucer

I am using Flying Saucer to render some PDF documents from strings to HTML.

```
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
InputStream is = new ByteArrayInputStream(html.getBytes("UTF-8"));
Document doc = builder.parse(is);

response.setContentType("application/pdf; charset=UTF-8");
response.setHeader("Content-disposition", "inline; filename=\"" + outFileName + "\"");

OutputStream os = response.getOutputStream();

ITextRenderer iTextRenderer = new ITextRenderer();
iTextRenderer.setDocument(doc,null);
iTextRenderer.layout();
iTextRenderer.createPDF(os);
os.flush();
os.close(); 
```

This works fine When I have plain text. I have referenced an external CSS in my HTML content. But, When PDF gets generated CSS doesn't get applied.

I have read that The `setDocument()` method takes two parameters: document and url. The url parameter indicates the base url used to prepend to relative paths that appear in the xhtml, such as an external CSS

So, I have tried to supply

> context path/css

direcotry in the baseURL and used it in the `setDocument()`. Still no result

So, My Question What is the correct URL to pass as baseURL ?

```
String baseURL = ""; // What goes here as root URL for resources
iTextRenderer.setDocument(doc,baseURL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:06:29.143

[常见问题解答](https://code.google.com/p/flying-saucer/wiki/FAQ#How_do_I_use_the_setDocument%28...%29_constructor?)告诉我们：

> url 是“基础”，对于普通的 URL，它是父位置——父目录，或者你正在渲染的文档所在的位置。如果你的文档有 CSS 和图像的绝对 URI，或者它没有如果您的文档有任何 CSS 或图像的相对 URI，则基本 URL 不应为空，而应指向当前文档所在的目录或地址。

您是否测试了文档的路径而不是 css 的路径？但是，我在链接 CSS 时也遇到了一些麻烦，所以我插入了 URI（到目前为止没有问题 :-)）。如果您使用我上面发布的链接，它有效吗？

*很抱歉有新帖子，但评论告诉我我只剩下负字符了......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T05:10:59.410

问题不在于文件路径，而在于媒体。一件事是渲染到屏幕，另一件事是渲染到打印媒体，如 pdf 文件。因此，您需要在 XML 文件中的样式表 TAG 中添加一个属性。

来自 code.google.com/p/flying-saucer/wiki/FAQPDF

> **我的 PDF 没有拾取我的 CSS！**
> 
> > PDF 被视为“打印”媒体；请参阅有关媒体类型的 CSS 2.1 规范部分。确保在链接或嵌入 CSS 时指定了媒体类型；使用类型“打印”或“全部”。

快速的答案是将属性添加 `media="all"`到 XML 样式表 TAG 中，如下所示：

```
<?xml-stylesheet href="foo.css" media="all" type="text/css"?> 
```

您可以使用的替代方案 `media="print"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:26:16.203

`<link rel="stylesheet" type="text/css" href="file://path/to/your.css" />`
您可以通过放入文档（头部）来插入 CSS 路径。

（在某些情况下，您可以使用简单路径而不是 URI）

# select - 我可以在 SQL 的 Select 语句中临时存储一个值吗？

> ID：12043037
> 
> 赞同：0
> 
> 时间：2012-08-20T18:28:38.427
> 
> 标签：select, store, formula, ssms, temporary-objects

在我的 select 语句中，我有两个计算结果。它看起来像这样：

```
 SELECT
     a.FormRate AS 'F-Rate'
     ,a.LoI AS 'Liability'
     ,CAST((A.FormRate * a.LoI / 100) AS DECIMAL(38,2)) 'F-Premium'
     ,a.EndorsementRate AS 'E-Rate'
     ,CAST((A.EndorsementRate * a.LoI / 100) AS DECIMAL(38,2)) 'E-Premium' 

FROM tblAspecs a 
```

一旦我在选择中有这五个语句，我希望能够将 E-Premium + F-Premium 总计到一个新列中。我总是可以这样做：

```
 ,CAST(((A.EndorsementRate * a.Loi / 100) + (a.FormRate * a.LoI / 100)) AS DECIMAL(38,2)) 'Total Premium' 
```

...但这似乎是相当草率和笨重。有没有办法存储个人保费，这样我就可以做一个简单的`CAST((F-Premium + E-Premium) AS DECIMAL(38,2)) 'Total Premium'`

笨重的方式也不会让 F-Premium 和 E-Premium 保持动态，因此如果我更改它们的计算方式，我还必须更改 Total Premium 列中的计算。

使用 Microsoft SQL Server Management Studio 2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:46:16.720

研究[常用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)。

它看起来像这样：

```
;WITH [Data]
(
    [FormRate],
    [Liability],
    [FormPremium],
    [EndorsementRate],
    [EndorsementPremium]
)
AS
(
    SELECT
         a.[FormRate],
         a.[LoI] AS [Liability],
         CAST((a.[FormRate] * a.[LoI] / 100) AS DECIMAL(38,2)),
         a.[EndorsementRate],
         CAST((a.[EndorsementRate] * a.[LoI] / 100) AS DECIMAL(38,2)) 
    FROM 
        tblAspecs a
)
SELECT
    [Data].*,
    CAST(([Data].[FormPremium] + [Data].[EndorsementPremium]) AS DECIMAL(38,2)) 'Total Premium'
FROM
    [Data] 
```

# ant - Ant 和 Jacoco：需要将 junit 的 fork 设置为“true”，而不是设置为 true 的属性

> ID：12043041
> 
> 赞同：5
> 
> 时间：2012-08-20T18:28:47.787
> 
> 标签：ant, junit, jacoco

我正在使用 Jacoco Junit 任务并尝试了以下操作：

```
 <!-- run the junit tests -->
    <echo>DEBUG: $${junit.fork} = "${junit.fork}"</echo>
    <jacoco:coverage
        destfile="${target.dir}/jacoco.exec"
        append="false">
        <junit fork="${junit.fork}" includeAntRuntime="true">
            <classpath>
                <pathelement path="${main.destdir}"/>
                <pathelement path="${test.destdir}"/>
            </classpath>
            <classpath refid="test.classpath"/>
            <formatter type="${junit.formatter.type}"/>
            <batchtest      todir="${junit.batchtest.todir}">
                <fileset dir="${test.destdir}" />
            </batchtest>
        </junit>
    </jacoco:coverage> 
```

并得到以下信息：

```
test:
     [echo] DEBUG: ${junit.fork} = "true"
[jacoco:coverage] Enhancing junit with coverage

BUILD FAILED
D:\build.xml:233: Coverage can only be applied on a forked VM

Total time: 6 seconds

D:\> 
```

如您所见，`${junit.fork}`属性设置为`true`，我在`<junit fork="${junit.fork}"/>`.

但是，我没有使用该属性，而是简单地设置`<junit fork="true">`了它，它可以正常工作：

```
 <jacoco:coverage
        destfile="${target.dir}/jacoco.exec"
        append="false">
        <junit fork="true" includeAntRuntime="true">
            <classpath>
                <pathelement path="${main.destdir}"/>
                <pathelement path="${test.destdir}"/>
            </classpath>
            <classpath refid="test.classpath"/>
            <formatter type="${junit.formatter.type}"/>
            <batchtest      todir="${junit.batchtest.todir}">
                <fileset dir="${test.destdir}" />
            </batchtest>
        </junit>
    </jacoco:coverage> 
```

当我使用该属性时，我已经运行`ant -d test`以验证 Java JVM 是否正在分叉。`${junit.fork}`

为什么 JaCoCo 坚持不分叉 JUnit 测试，除非我将`fork`参数设置为字符串`true`而不是设置为 equals 的属性`true`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:20:51.703

根据[Jacoco 覆盖任务源代码](https://eclemma.svn.sourceforge.net/svnroot/eclemma/jacoco/trunk/org.jacoco.ant/src/org/jacoco/ant/CoverageTask.java)：

```
...
public void enhanceTask(final Task task) {
    final RuntimeConfigurable configurableWrapper = task.getRuntimeConfigurableWrapper();

    final String forkValue = (String) configurableWrapper.getAttributeMap().get("fork");
    if (!Project.toBoolean(forkValue)) {
        throw new BuildException("Coverage can only be applied on a forked VM", getLocation());
    }
    addJvmArgs(task);
}
... 
```

从可配置包装器中读取 forkValue。使用由 调用`${junit.fork}`的方法评估属性映射值（如） 。而当你继续查看 Jacoco 源代码时： `RuntimeConfigurable.maybeConfigure``Task.mayBeConfigure`

```
...
public void addTask(final Task task) {
    if (childTask != null) {
        throw new BuildException("Only one child task can be supplied to the coverge task", getLocation());
    }
    this.childTask = task;
    final String subTaskTypeName = task.getTaskType();
    final TaskEnhancer enhancer = findEnhancerForTask(subTaskTypeName);
    if (enhancer == null) {
        throw new BuildException(format("%s is not a valid child of the coverage task", subTaskTypeName), getLocation());
}
    if (isEnabled()) {
        log(format("Enhancing %s with coverage", childTask.getTaskName()));
        enhancer.enhanceTask(task);
    }
    task.maybeConfigure();
}
... 
```

此方法 ( `mayBeConfigure`) 在任务已增强 ( `enhancer.enhanceTask(task);`) 后调用。我猜这是你的问题和一个错误......我们应该将它报告给 jacoco 错误跟踪器。

[雅可可问题](http://sourceforge.net/apps/trac/eclemma/ticket/213)

# sql - select all columns but make certain columns equal to a scalar in sql

> ID：12043042
> 
> 赞同：0
> 
> 时间：2012-08-20T18:28:50.280
> 
> 标签：sql, sql-server, sql-server-2008-r2

Something like:

```
SELECT *, COLUMN1 = 3, COLUMN2 = 1 FROM TABLE1 
```

However, I would like the order of the columns to be the same as when select only `SELECT *` and not add any extra columns like `column1` and `column2` but replace the existing ones that are included in `*`. `TABLE1` contains the columns `COLUMN1` and `COLUMN2`.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:53:57.703

列的顺序是表中列出的顺序，由表 INFORMATION_SCHEMA.COLUMNS 中的 ORDINAL_POSITION 确定。

这与它们在 SQL Server Management Studio 中呈现的顺序相同。所以，这里有一个技巧。进入查询窗口并输入“选择”。然后，转到 SQL Server Management Studio 的对象资源管理器部分，打开数据库，然后打开表，直到看到“列”标题旁边有一个文件夹。

现在，将文件夹拖到“选择”之后。

瞧！列出现，用逗号分隔。

填写查询所需的其余内容。让你想要的保持不变。你完成了。

否则，您将不得不使用动态 SQL 来完成此操作。

# eclipse - how to install jdk 7 in eclipse

> ID：12043045
> 
> 赞同：3
> 
> 时间：2012-08-20T18:29:05.747
> 
> 标签：eclipse, macos, java-7

I downloaded and installed jdk7 on my mac and wanted to find out the actual content of it so that I can install it in eclipse. There is no jdk 7 related content in /System/Library/Java.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T18:50:18.597

你需要让eclipse知道JRE 7在哪里，你可以这样做：

1.  转到 Eclipse 的首选项窗格
2.  在左侧窗格中打开 Java
3.  单击已安装的 JRE
4.  添加按钮 ---> 标准 JVM 和下一步
5.  插入：`/Library/Java/JavaVirtualMachines/jdk1.7.0_06.jdk/Contents/Home`在 JRE 主页文本框中
6.  下一步并保存配置

![示例配置](../Images/ff7f08e6f96099d2a337eb3803738640.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:32:18.503

您需要将 JDK 7 添加到 Windows-> 首选项-> java -> 已安装 JRE 中的已安装 JRE 列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:45:39.973

它位于 /Library/Java/JavaVirtualMachines/... 所以在 /Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home 您可以找到 bin 文件夹、lib 文件夹等。

# facebook - 如何在 Open Graph 中引用好友？

> ID：12043046
> 
> 赞同：2
> 
> 时间：2012-08-20T18:29:05.757
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在创建一个支持 Facebook 的游戏，用户可以在其中发布“朋友通行证”；玩家将能够（自动）发布，例如：“我在 MY_GAME 上超过了詹姆斯布朗”。我正在使用 Open Graph 发布我的操作。我创建了一个名为“pass”的动作和一个名为“friend”的对象。这是我的属性（其中“friendpass”是朋友参考）：

![通过行动](../Images/a061d49aa82b33f6ccf527a85153a794.png)

我正在尝试发布诸如“迈克尔在 MY_GAME 上传递了一个朋友”之类的操作，并标记了我传递的朋友[s?]。如何启用此功能？目前，我已经设置了一个页面（实际上只是元标记）渲染器，这是一个示例渲染页面：

```
 <html and other headers...>
    <meta property="fb:app_id" content="345390505541783">
    <meta property="og:type" content="smileys-game:friendpass">
    <meta id="ogurl" property="og:url" content="http://apps.canpoyrazoglu.com/smileys/pass/mehmet/sucuk">
    <meta property="og:title" content="Friend passed!">
    <meta property="og:image" content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png">
    <meta id="friendid" property="smileys-game:friend" content="735475141">
    <meta id="ogdesc" property="og:description" content="something comes here.">
    <rest of header and page...> 
```

我使用调试工具来获取 Facebook 看到的内容，并且有一个指向该操作的链接作为 Graph API 调用。当我单击它时，它会返回 OAuth 错误，当我将该 URL 键入到 Graph API 资源管理器时，我会得到以下信息：

![图 api 调用结果](../Images/6655e976e4be0bcdff6904b7e6572774.png)

Graph API 将我的“朋友”对象视为网页，它实际上是对 Facebook ID（我自己的 ID）的引用。如何利用该好友 ID 并在帖子中创建指向该好友的链接？

谢谢，坎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:00:23.877

创建动作类型时，您需要使用`profile`对象类型（也称为连接对象类型）。在这里，我创建了一个动词来“高五”一个人：

![动作类型配置](../Images/0634f0e4f6dbf3afa5303fc1e427b2f5.png)

对象类型将自动配置，因为`profile`它是 FB 提供的内置对象类型。因此，您不必配置对象类型，除非您需要高级设置。

然后创建一个聚合：

![聚合配置](../Images/58772f63693d3c151ca1dd60d80a29a1.png)

然后，您的对象的 og 元标记需要使用类型`profile`（此示例的文件路径为 /og/profile2.html）：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# high_fiver: http://ogp.me/ns/fb/high_fiver#">
   <meta property="fb:app_id"      content="27877347222" />
   <meta property="og:url"         content="http://www.rottentomatoes.com/celebrity/tom_hanks/" />
   <meta property="og:type"        content="profile" />
   <meta property="og:title"       content="Tom Hanks" />
   <meta property="og:description" content="Tom Hanks profile on RT" />
   <meta property="og:image"       content="http://content6.flixster.com/rtactor/40/37/40376_pro.jpg" /> 
```

请注意，您可以指向任何`profile`，而不仅仅是 FB 配置文件。上面，我使用的是 Tom Hanks 在烂番茄上的个人资料，它使用 Open Graph 并具有 og:type `profile`。

我发布这样的操作：

```
<script type="text/javascript">
 function postAction() {
   FB.api(
     '/me/high_fiver:high_five' + '?profile=http://www.plooza.com/og/profile2.html',
     'post',
     function(response) {
       if (!response || response.error) {
         alert('Error occured');
         console.log(response.error);
       } else {
         alert('Post was successful! Action ID: ' + response.id);
       }
     }
   );
 }
</script> 
```

**最后，我的应用程序的用户将在他/她的时间轴上（以“时间轴单元”）发布 OG 故事：**

![简介故事单元](../Images/e5b80f6ef267c8930f168978a4a6620f.png)

当您单击故事单元中的“汤姆汉克斯”链接时，它会加载烂番茄个人资料。

您可以在此处尝试此演示应用程序：http: [//plooza.com/og/profile2.html](http://plooza.com/og/profile2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:15:58.873

那么“朋友”是你自己的对象类型吗？它究竟是如何定义的？

我认为对于您打算在这里执行的操作，内置对象类型[Profile](https://developers.facebook.com/docs/opengraph/objects/builtin/#external_profile)可能更适合您的需求 - 因为这已经创建了与 Open Graph 可识别的 Facebook 个人资料的联系。

# c# - Default style for ReadOnly cells in DataGridView

> ID：12043053
> 
> 赞同：1
> 
> 时间：2012-08-20T18:29:30.590
> 
> 标签：c#, winforms, visual-studio-2010, datagridview

The question is about standard .NET DataGridView control.
Is there a way to specify **once** some style for all ReadOnly cells so it will be **automatically** applied to all of them?
Please don't propose me to handle events - I believe it can be done using events.
I'm asking about **some DataGridView built-in technique** to do this.

I'd like style to include Bold font or different background color.
Thanks.

# intellisense - How to set UI language in English and IntelliSense hint Language in another language in Visual Studio 2012 ?

> ID：12043055
> 
> 赞同：17
> 
> 时间：2012-08-20T18:29:35.663
> 
> 标签：intellisense, visual-studio-2012

I have a problem: I want set UI of my Visual Studio 2012 in default (English) language, but also I want that IntelliSense hints about .NET types are displayed in another language. In Visual Studio 2010 it was a very simple.

I installed before localized version, after - English version, after going in to the location

> Tools -> Options -> Environment -> International Settings.

There was displayed two languages: local and english. I set language on Englist, restarting Visual Studio, and get what I wanted.

In Visual Studio 2012 this method is not working. I can only install language package. It change all in Visual Studio - UI, Intellisense hints, .NET Framework errors messages, e.t.c. How to set Visual Studio UI in English and Intellisense hints and .NET Framework errors messages in another language?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:52:18.387

微软提供[这篇](http://msdn.microsoft.com/en-us/library/ms246590.aspx)文章来改变 VS 2012 的 UI 等。

我只是做了从西班牙语到英语的所有事情，我得到了英语用户界面，包括提示等，

试试看。这个对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-20T02:42:22.920

问题是链接并不总是改变语言包。这是微软开发人员的问题。如果您想获得英文版的 Visual Studio，请在打开 .exe 文件时检查您正在安装的包语言。检查它是否显示“ENU”。

[![在此处输入图像描述](../Images/abf0989831a399f337ee35d1aa9555f2.png)](https://i.stack.imgur.com/6lLiK.png)

这是 Visual Studio 2015 的正确链接：

[https://www.microsoft.com/en-us/download/confirmation.aspx?id=48157](https://www.microsoft.com/en-us/download/confirmation.aspx?id=48157)

有时您切换语言但它下载相同的文件，并且当您打开它时，您会看到正在安装相同的语言，并且您认为您选择了更正的语言，并且您做到了，但是微软您是否给了您正确的文件，并且只有在安装标题中看到时，才能知道您正在安装正确的语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T13:59:54.850

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-26T07:39:05.587

VS 选项中的*国际设置*似乎只改变了 UI 语言，而不是 IntelliSense 提示。

我无法确定究竟是什么修复了它，但我从 Windows 控制面板中卸载了所有（在我的情况下为德语）似乎与 .NET 框架和 Visual Studio 相关的语言包（包括用于 Office 开发的语言包）和 .NET Framework 目标包语言包）。重新启动 VS 后，IntelliSense 提示终于变成了英文。

# c++ - 无法从类型 void*(classname::) () 转换为类型 void*(*)(void*)

> ID：12043057
> 
> 赞同：8
> 
> 时间：2012-08-20T18:29:53.737
> 
> 标签：c++, multithreading

```
class Scoreget{
    private:
        //some variables
    public:
        Scoreget(){
            //something here
        }

        void* basicgetscore(){
            //somthing here
        }

        void getscore(Scoreget s){
            pthread_t t;
            if(pthread_create(&t,NULL,s.basicgetscore,NULL)==-1){
               printf("Error 3\n");
               exit(3);
            }
            void *a;
            if(pthread_join(t,&a)==-1){
               printf("Error \n);
               exit(4);
            }
        }
}; 
```

我正在尝试运行一个单独的线程来调用一个函数，因为它使用对 execl() 的调用，因此会停止我的程序（我在 Windows 上并且不能使用 fork()）。将线程与类结合起来给我带来了困难。

通过一些谷歌搜索，我了解到我需要将最后一个函数设为朋友或静态并使用某种 this 指针。我已经尝试过，但零件不合身。我什至无法更改错误类型。现在让我很沮丧。得到同样的错误：

> 无法将 Scoreget::basicgetscore 从类型 void*(Scoreget::)() 转换为类型 void* (*) (void *)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T18:36:28.167

将其声明为静态，并添加另一个辅助方法：

```
static void* basicgetscore(void * object){
    return ((Scoreget *) object)->dobasicgetscore();
}

void * dobasicgetscore() // new helper method
{
    // do stuff here
    return NULL;
} 
```

使用以下命令创建 pthread：

```
if (pthread_create(&t,NULL,basicgetscore,&s) == -1) { ... 
```

另外，要非常小心。你给这个线程一个临时变量的地址。在这种特定情况下是安全的，因为 pthread_join 在同一个函数中，但是如果您要在线程退出之前从该函数返回，您将释放您在其中运行线程的对象，这可能会导致各种讨厌的行为。考虑将您的函数更新为 1) 获取引用或指针或 2) 对`this`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T18:35:46.710

您不能将非静态方法传递给 pthread_create

最简单的方法，创建可以运行的静态方法`basicgetscore`

像这样的东西

```
static void *Scoreget::basicgetscore_starter(void *p) {
    Scoreget *t = (Scoreget *)p;
    t->basicgetscore();
}

pthread_create(&t,NULL,&Scoreget::basicgetscore_starter,(void *)&s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:36:07.420

您需要定义一个非成员（静态）函数作为线程函数传递给`pthread_create()`. 从您的对象引用没有帮助，因为这是该函数所期望的函数指针。不过，您可以使用用户 args void* 指针将指针传递给您的对象实例。

# ruby-on-rails-3 - 实施一个标签解决方案，用户可以在那里提交自己的标签？

> ID：12043062
> 
> 赞同：1
> 
> 时间：2012-08-20T18:30:05.320
> 
> 标签：ruby-on-rails-3, model, controller, tags, modeling

我一直在寻找一个 gem 来支持应用程序的可靠标签功能，但还没有找到任何令人满意的东西。它不必过于复杂的精益和平均更好。现在研究创建我自己的标签模型控制器和解决方案的选项。

有没有人创建了一个标签解决方案，什么是一个好方法？此外，我希望用户可以选择提交自己的标签，以便“标签库”可以随着许多用户的输入而增长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:51:07.947

如果您使用的是 MongoDB，这可能会为您指明正确的方向。使用我在下面发布的 gem，可以使用对象创建标签并可用于查询。需要更详细的代码，但它可能会让你开始：

[https://github.com/mauriciozaffari/mongoid_search](https://github.com/mauriciozaffari/mongoid_search)

# xml - 处理无效 XML 的建议方法

> ID：12043065
> 
> 赞同：3
> 
> 时间：2012-08-20T18:30:16.290
> 
> 标签：xml, delphi, delphi-xe2

我正在尝试使用 Delphi XE2 将程序与 3rd 方服务集成。我遇到的问题是该服务没有转义他们发送给我的 XML 文档中的任何值。

这是他们的“示例”xml 文档之一

```
<plans type="array">
  <plan>
    <id type="integer">1</id>
    <series-title>A New Plan</series-title>
    <dates>January 16 & 17, 2010</dates>
   <plan-title>A New Plan For Your Family</plan-title>
 </plan>
 ...
</plans> 
```

我最初的计划只是将所有数据包装在`CDATA`标签中，但这似乎不是一个理想的解决方案。

我还考虑过搜索该`&`字符并将其替换为，`&amp;`但它不会逃避任何用户输入，包括`<`and`>`并且对每个无效的 xml 字符进行搜索和替换听起来也是个坏主意。

关于我应该如何处理无效的 xml 文档的任何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T18:59:39.600

首先拒绝将这些文档称为“XML”——它们不是 XML。

让您的供应商相信许多人已经采用 XML 并从中受益，如果他们也这样做，那将是一个好主意。

如果您的供应商认为他们正在向您发送 XML，请纠正他们。几乎是 XML 并没有帮助。这就像向您发送无法编译的 Java 代码一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T18:36:17.460

无效的 XML 文档是*无效*的。处理它们的正确方法是显示清晰的错误消息，并让向您发送“XML”的人修复他们的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T18:50:40.193

[如果从服务中获取真正有效的 XML 是不可能的，那么通过Tidy](http://tidy.sourceforge.net/)之类的东西运行 XML并解析生成的文档可能会有所帮助：

```
tidy --xml-input true --xml-output true input.xml 
```

如果您不想将文件写入磁盘只是为了通过类似的方式运行它，也可以通过 stdin 提供整洁的文档并使用 stdout 和 stderr 接收结果。

但是，这样做总是有风险的，因为根据源文档中的“畸形”，“清理”的文档总是有可能缺少属性、元素等。

# mysql - 如何优化此查询以不重复获取重复信息

> ID：12043067
> 
> 赞同：0
> 
> 时间：2012-08-20T18:30:17.643
> 
> 标签：mysql, sql, database, distinct, one-to-many

假设我有两张桌子，作者和书。每个作者可以拥有多本书，由 book 表的 authorId 列标识，该列链接到 author 表的 id 字段。

我想获取具有特定类别 ID 的所有书籍，并且对于每本书，我希望将作者的姓名和照片 url 显示在书名旁边。

所以我做了这样的查询：

```
SELECT author.name, author.photoUrl, book.title
    FROM author, book
    WHERE book.categoryId = '3' AND author.id = book.authorId 
```

问题是，如果作者在该类别中有多本书怎么办？（例如，小说作家写了多本小说书）。在这种情况下，是否会为每一行单独获取作者的信息，从而获取重复的信息，或者是否有任何方法，例如使用`DISTINCT`这样一个作者的信息只获取一次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:34:57.527

首先，您应该使用标准连接语法：

```
SELECT author.name, author.photoUrl, book.title
FROM author join
     book
     on author.id = book.authorId
WHERE book.categoryId = '3' 
```

您所说的“重复”信息正是 SQL 在连接中所做的。这没有问题。如果您举例说明您想要返回的内容，那么可能有一种方法可以减少数据。

令我震惊的是，您可能想要作者的书籍列表，作为分隔列表。在这种情况下，试试这个：

```
SELECT author.name, author.photoUrl,
       group_concat(book.title separator ', ') as books
FROM author join
     book
     on author.id = book.authorId
WHERE book.categoryId = '3'
group by author.name, author.photoUrl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:31:35.627

您的原始查询（已修复）：

```
SELECT author.name     ,
       author.photoUrl ,
       book.title
FROM author
join book   on book.categoryId = '3'
               book.authorId   = author.id 
```

完全按照您的要求执行：它将为类别 3 中的每本书返回一行，以及作者的姓名和照片 URL。

您可以将其分解为两个结果集：

```
--
-- retrieve category 3 books
-- 
select *
from book b
where b.category = 3

--
-- retrieve related author data
--
select *
from author a
where exists ( select *
               from book b
               where b.authorId = a.id
                 and b.category = 3
             ) 
```

现在由您决定将每本书与其作者匹配，但您可以选择这样做。第一个结果集应该带有作者的主键；第二个是作者表的外键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T19:20:16.163

是的，它会返回作者的重复项，但我认为这不是问题。
另一种方法是使用两个查询，一个针对书籍，一个针对作者，然后在代码中在结果之间建立关系（在 a 中`DataSet`或使用 a `Dictionary<int, Author>`）`AuthorId`。

图书

```
SELECT 
  book.title,
  book.authorId
FROM 
  book
WHERE 
  book.categoryId = '3' 
```

作者

```
SELECT 
  author.Id,
  author.name, 
  author.photoUrl
FROM
  author
WHERE
  EXISTS(
     SELECT NULL
     FROM book
     WHERE 
       book.categoryId = '3' AND
       author.id = book.authorId
  ) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T18:35:12.317

您可以使用[组 concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
SELECT author.name, author.photoUrl, GROUP_CONCAT(DISTINCT title ORDER BY title SEPARATOR ',')
FROM author
    INNER JOIN book on author.id = book.authorId
WHERE book.categoryId = '3'
GROUP BY author.name 
```

这将获取给定作者的所有标题并将它们作为逗号分隔的字符串返回。

# android - Android 与 EJB 服务器的通信

> ID：12043069
> 
> 赞同：2
> 
> 时间：2012-08-20T18:30:29.983
> 
> 标签：android, json, web-services, jboss, ejb

Android 有一个内置的 JSON 库，如果有人对 JBoss 后端的 EJB 有任何经验，我正在徘徊。是否可以将会话 bean 与向 Android 客户端发送和接收 JSON 对象的 Web 服务集成。你会从哪里开始？我找不到

目的是让客户端和服务器定期相互发送信息。

这种连接还有其他选择吗？我们已经启动了服务器的逻辑，我们希望继续使用 EJB 和 Web 服务。替代品也是受欢迎的，我想问问它是否可以很好地扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:47:35.913

您使用的是哪个版本的 JBoss？

在 JEE6 (JBoss 7) 中，您拥有 JAX-RS，它允许您使用 EJB 轻松支持 restful ws，它可以使用和生成 JSON。

您可以查看 JEE6 教程 ( [http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html) ) 和 JBoss 实现 RESTEasy，您可以使用旧版本的 JBoss ( [https://www. jboss.org/resteasy](https://www.jboss.org/resteasy)）。

对于 JAX-RS 与 EJB 的集成，您可以查看此处：[Inject an EJB into JAX-RS (RESTful service)](https://stackoverflow.com/questions/3027834/inject-a-ejb-into-jax-rs-restfull-service)

# php - 使用 PHP 在页面顶部显示验证错误

> ID：12043071
> 
> 赞同：0
> 
> 时间：2012-08-20T18:30:38.313
> 
> 标签：php, forms, validation

我编写了一个表单对象（代码： http: [//pastebin.com/U1xMRhdn](http://pastebin.com/U1xMRhdn)）来验证在表单字段中输入的信息是否有效。一个例子：

```
<?php
$f = Form(...);
//I would like to output the amount of errors up here.
$f->textBox(...);
$f->radioArea(...);
if($f->getErrors()>0)
    echo "You have "+$f->getErrors();+" errors, go back and try again";
?> 
```

如果用户没有在文本框中输入任何内容，则错误计数器会增加。问题：我想在页面顶部显示用户有多少错误。但是，当我尝试这样做时，错误计数器检索到 0 个错误，因为这些项目尚未在函数`textBox`和`radioArea`. 有没有办法在脚本末尾捕获一个值并将其返回到脚本顶部？还是我必须找到另一种计算错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:35:43.070

您是否考虑过使用*输出缓冲区*？

像这样：

```
<?php
ob_start(); // start buffering
$f = Form(...);
//I would like to output the amount of errors up here.
$f->textBox(...);
$f->radioArea(...);
$form_html = ob_get_clean(); // end the buffer, get it, and clean it
if($f->getErrors()>0)
    echo "You have "+$f->getErrors();+" errors, go back and try again";
echo $form_html;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:33:51.083

使用获取数据请求并将答案吐回您选择的 div 中。每次用户输入内容时，如果出现错误，ajax 将调用 php，答案将被 ajax 输入。如果您希望每次在 textarea 中有击键时都运行验证，则可以使用 on key press

# ruby-on-rails - Rails嵌套表单error_messages不显示

> ID：12043085
> 
> 赞同：0
> 
> 时间：2012-08-20T18:31:55.337
> 
> 标签：ruby-on-rails, validation

整个代码来自这个问题：[Nested form validations not working in rails app](https://stackoverflow.com/questions/12041011/nested-form-validations-not-working-in-rails-app/12041191#12041191)

验证有效，但现在问题出在 error_message 上。它根本没有出现。

我发现由于我的控制器中的 redirect_to 它不起作用：

```
class MessagesController < ApplicationController

  def create
    @trip = Trip.find(params[:trip_id])
    @message = @trip.messages.create(params[:message])     
  if @trip.messages.create
    MessageMailer.send_message(@message).deliver
    redirect_to thank_you_path        
  else    
    redirect_to trip_path(@trip)
  end
 end
end 
```

我必须改用渲染。但问题是如何？

此消息表单位于另一个模型显示页面中，如果消息未通过验证，我想在同一显示页面中查看错误消息。

你能帮我吗 ？谢谢！

**更新：**

耙路线

```
 messages GET    /messages(.:format)                         {:action=>"
 index", :controller=>"messages"}
             POST   /messages(.:format)                         {:action=>"
 create", :controller=>"messages"}
  new_message GET    /messages/new(.:format)                     {:action=>"
 new", :controller=>"messages"}
  edit_message GET    /messages/:id/edit(.:format)                {:action=>"
 edit", :controller=>"messages"}
     message GET    /messages/:id(.:format)                     {:action=>"
 show", :controller=>"messages"}
              PUT    /messages/:id(.:format)                     {:action=>"
 update", :controller=>"messages"}
              DELETE /messages/:id(.:format)                     {:action=>"
 destroy", :controller=>"messages"}
 trip_messages GET    /trips/:trip_id/messages(.:format)          {:action=>"
 index", :controller=>"messages"}
              POST   /trips/:trip_id/messages(.:format)          {:action=>"
 create", :controller=>"messages"}
 new_trip_message GET    /trips/:trip_id/messages/new(.:format)      {:action=>"
 new", :controller=>"messages"}
 edit_trip_message GET    /trips/:trip_id/messages/:id/edit(.:format) {:action=>"
 edit", :controller=>"messages"}
 trip_message GET    /trips/:trip_id/messages/:id(.:format)      {:action=>"
 show", :controller=>"messages"}
              PUT    /trips/:trip_id/messages/:id(.:format)      {:action=>"
 update", :controller=>"messages"}
              DELETE /trips/:trip_id/messages/:id(.:format)      {:action=>"
 destroy", :controller=>"messages"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:37:00.620

```
class MessagesController < ApplicationController

     def create
         @trip = Trip.find(params[:trip_id])
         @message = @trip.messages.build(params[:message])     
         if @message.save
              MessageMailer.send_message(@message).deliver
              redirect_to thank_you_path        
         else    
              render "edit"
         end
     end
end 
```

然后你应该有一个包含你的表单和代码来呈现错误`_edit.html.erb`的部分调用。`views/messages`

你`edit.html.erb`可以像`render "edit"`

* * *

快速评论：

你应该改变这个：

```
form_for([@trip, @trip.messages.build]) 
```

到

```
form_for([@trip, @message]) 
```

并在动作中设置`@message`( `@message = @message.new`) 。`new`这样，您可以对新建和编辑操作使用相同的表单。

您还可以考虑使用这样的 gem，这样`simple_form`可以更轻松地创建表单，并且您会内联显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:36:45.443

```
render "/other_model/show" 
```

渲染会保留当前的实例变量，因此如果您的“if”语句失败，验证将加载`@trip`带有错误的变量，并将反映在新渲染的表单中。

# mongodb - 图形数据库与文档数据库与三重存储

> ID：12043086
> 
> 赞同：31
> 
> 时间：2012-08-20T18:32:02.420
> 
> 标签：mongodb, graph, neo4j, rdf, nosql

这是一个有点抽象和笼统的问题。我对使用大量内部引用（类似图形）和大量属性（类似 JSON）的不同方法的固有（以及特定于实现）属性来保存非结构化数据感兴趣。

*   由于图是树的超集，您可以将图 DB（例如 Neo4j）视为文档 DB（例如 MongoDB）的超集。也就是说，图形数据库提供了文档数据库的所有功能，另外还允许循环或具有本机指针类型，因此您不必手动取消引用外键/ID。那么，当您向对象/资源添加更多引用时，您是否会遇到一些转折点，您最好使用图形数据库，但以前使用文档存储更好？文档数据库（存储空间、性能？）是否有优势？还是应该始终使用图形数据库以防万一将来需要更多参考？

*   同样，图数据库和三元存储（例如 RDF 存储）如何比较？图 DB（其中节点和边具有属性）似乎是简单三元组的超集。那么对于什么问题（如果有的话）执行三元存储实际上更好，比如 Neo4j？（RDF 存储的一个优点是有一种标准化的查询语言——SPARQL——尽管似乎有很多人不喜欢 SPARQL，因此将其称为缺点。）

我想我的问题是：图模型（带有属性）似乎能够巧妙地表达各种数据，当你进入现实时有什么问题？我认为图形数据库的关键在于性能，所以我希望看到一些数字或经验法则，了解加载、查询和修改数据以及内存和持久存储要求时会出现什么样的减速（与文档相比）和三重商店）。水平可扩展性又如何？我的印象是那里的比赛场地相当公平。

您是否认为具有可表达性的图有可能成为没有超大数据的项目的新默认存储模型，或者我们注定要十年[多语言持久性](http://martinfowler.com/bliki/PolyglotPersistence.html)与 RDBMS、JSON 存储和 Graph DB 并存必须与更多胶水代码集成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T19:37:53.543

我不确定我是否同意很多人不喜欢 SPARQL 的观点。SPARQL 1.0 确实有一些缺点，但它很好地解决了它的设计目的，新的迭代 SPARQL 1.1 在此基础上添加了许多人们期望在原始规范中看到的 SQL 构造，包括子查询、聚合& 更新语义。我认为它是标准的，你可以期望在每个三元存储中看到相同的解析和语义，而不是 SQL 的方言，这是一个很好的特性。

我还声称所有三元存储都是图形数据库；您可以将属性放在 RDF 中的特定边上，尽管不如使用 Neo4j 的那么好。但是三元存储具有真正的查询语言的优势，一种 w3c 标准数据表示，可以轻松地将数据带到另一个三元存储，并且对于许多三元存储，能够执行基于 OWL 的推理。

我对大多数图形数据库的可伸缩性一无所知，但一般来说，商业 RDF 数据库的伸缩性很好。所有这些都可以扩展到数十亿个三元组，可以处理大量用例。尽管他们处理规模的方式因供应商而异，以扩大或横向扩展、集群等。您还将看到完全不同的内存和硬件要求，以匹配每个供应商的实现。对我来说，我倾向于去获取一个 EC2 实例，通常是 2XL 或 4XL，安装一个足够大的 EBS 来保存数据，我已经准备好了。

此外，一些三元存储与 Lucene 或类似技术集成以提供数据的倒排索引，并且许多现在开始包含地理空间和时间索引。这些是非常有用的功能，我不确定它们在 Neo4j 之类的东西中是否可用。

话虽如此，它们的扩展性不如关系数据库，它们还不够成熟。但是，当您拥有“真实”数量的数据时，您也不会被搞砸。当然，三元存储的优势之一是推理，大规模执行是很棘手的，但这也是创建各种 OWL 配置文件的主要原因。但是如果你不提前考虑，你可以把自己画到一个角落里。

我认为图形数据库，特别是三重存储，可以很好地匹配许多正在构建的应用程序，但我不认为这意味着一切都应该用它们来完成。像其他任何东西一样，它们是具有优点和缺点的工具，因此您必须根据您的应用程序做出正确的选择。但如今，它们可能总是至少值得考虑。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-22T15:00:23.637

只是对 amk 答案的一个小更正：Tinkerpop 还包含 ArangoDB 的适配器，请参阅[https://github.com/triAGENS/blueprints-arangodb-graph/wiki/Gremlin](https://github.com/triAGENS/blueprints-arangodb-graph/wiki/Gremlin)。因此，您可以将 Gremlin 查询与 ArangoDB 一起使用。

一般来说，像 ArangoDB 或 OrientDB 这样的多模型数据库允许您将文档数据库的所有优秀特性（无模式、索引）与图形结构一起使用。顶点或边只是文档数据库中的文档。您可以拥有任意数量的属性甚至嵌入文档。您可以在这些文档上定义哈希、范围、全文或地理索引。或者您可以忘记文档结构，将文档视为顶点和边，使用 Gremlin 或一些遍历语言来研究底层图。

至于“我们注定要使用多语言持久性”这个问题：独立于文档/图形数据库问题，我相信 RDBMS 会存在一段时间。所以，这个问题的答案是：“是的，这很有可能”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T09:26:13.730

图形数据库有一个临时标准 - [Tinkerpop](http://tinkerpop.com/)，包括 Gremlin（命令式）查询语言，除 ArangoDB 之外的所有东西都支持。

为了进一步搅浑水，还有混合文档图数据库 OrientDB 和 ArangoDB。

让我感到震惊的是，使用图形数据库中的边存储子关系与作为文档数据库中的嵌入对象存储子关系之间的主要区别在于，使用前者，子关系可以廉价地移动到另一个父级，并且没有出现它的风险。两个地方有两个不同的地方。

# architecture - 在分层项目中放置依赖注入相关代码的最佳层

> ID：12043091
> 
> 赞同：3
> 
> 时间：2012-08-20T18:32:16.110
> 
> 标签：architecture, dependency-injection, domain-driven-design, n-tier-architecture, onion-architecture

我计划为我的新应用程序遵循洋葱架构。

解决方案层次结构如下

*   域 - 定义了服务和存储库的所有接口。
*   基础设施——这是放置所有数据访问的层。这些类通常实现域中定义的接口。
*   Web - 这是我的应用程序的演示部分。在同一层内，我有一个单独的文件夹用于实现域中定义的服务。

我的计划是使用依赖注入进行依赖解析。最初，我想将与 DI 相关的代码放在 Infrastructure 中。但问题是在我映射服务时它会导致循环引用因为实际的服务实现在我的 Web 项目中，并且 Web 项目已经在引用基础设施。我不能将具体服务移动到另一层，因为它违反了洋葱架构的原则（传递依赖）。

任何线索表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:06:39.267

答案取决于您如何定义“DI 相关代码”。

如果您将 DI 定义为一组促进松散耦合和关注点分离的原则和模式，那么这些模式（例如构造函数注入）应该应用于应用程序的所有层。就像您将应用 SOLID 原则和其他 OO 最佳实践一样。

如果 DI 是指直接依赖于该容器的特定容器和代码，那么该代码应该只存在于您的应用程序的入口点中。在您的方案中，这是一个 Web 层。或者，如果这是一个控制台应用程序，它可以是一个“主要”程序。应用程序的这一部分称为[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)：

> *很容易理解，每个类都应该通过其构造函数来获取其依赖项，但这将组合类及其依赖项的责任推给了第三方。那应该在哪里？在我看来，大多数人都渴望尽早作曲，但正确的答案是：*
> 
> 尽可能靠近应用程序的入口点。
> 
> *这个地方称为应用程序的组合根，定义如下：*
> 
> 组合根是模块组合在一起的应用程序中的（最好）唯一位置。
> 
> *这意味着所有应用程序代码仅依赖于构造函数注入（或其他注入模式），但从不组合。只有在应用程序的入口点，才最终组成了整个对象图。*

# php - 使用控制器中的变量在 CakePHP 中的模型中使用

> ID：12043095
> 
> 赞同：0
> 
> 时间：2012-08-20T18:32:23.263
> 
> 标签：php, cakephp, model, controller

我想在我的控制器中有一个可以在我的模型中访问的变量。例如，

```
<?php class MyController extends AppController{
   function myFunction(){
      // codes here
      myvariable = "anything";
   }
}
?> 
```

在我的模型中，

```
<?php class myModel extends AppModel
 function myModelFunction(){
  // here i will use my variable to check on something.
 if(myVariable != 0){ // myVariable here is from the controller
   // do something here
 }

 }
?> 
```

现在，我的代码是否可行，我的意思是是否可以从我的控制器访问一个变量，然后在我的模型上使用它进行检查或其他什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:35:35.690

是的，将它作为参数传递给您的模型方法。

```
// controller
function myFunction(){
    // codes here
    $myvariable = "anything";
    $this->Model->myModelFunction($myvariable);
}

// model
function myModelFunction($myVariable) {
    // $myVariable will have the value of "anything"
} 
```

# php - file_get_contents 停止工作，返回一个空字符串

> ID：12043105
> 
> 赞同：0
> 
> 时间：2012-08-20T18:33:20.293
> 
> 标签：php, file-get-contents, string

我编写了这个广泛使用的[脚本](https://github.com/AzizLight/fire)`file_get_contents`。但它在一个地方停止工作，这里是有问题的片段：

```
private function patch_codeigniter_file($file_location)
{
    $this->backup_file($file_location);
    $tmp = explode(DIRECTORY_SEPARATOR, $file_location);
    $file_name = end($tmp);
    $file = file_get_contents($file_location);

    // ...
} 
```

`file_get_contents`返回一个空字符串。以下是有关上下文的一些事实：

*   `$file_location`是**本地**文件的绝对路径。
*   `$file_location`指向存在的文件（是的，这是事实）
*   `file_get_contents`不返回任何错误。
*   `error_reporting`被设定为`-1`
*   我在 OS X Mountain Lion 上使用 PHP 5.4.4 附带的最新版本的 MAMP

有谁知道问题可能是什么？就在今天早上`file_get_contents`工作正常，我尝试了 Windows 7 虚拟机，它也工作正常。

# qt - 无模式弹出 Qt ToolButton

> ID：12043107
> 
> 赞同：1
> 
> 时间：2012-08-20T18:33:34.283
> 
> 标签：qt, qt4, pyqt, pyqt4, pyside

我们有一个 PyQt4/PySide Qt4 视频播放器应用程序，它在 GUI 中具有 QToolButton 对象以及关联的 QMenu，并添加了 QToolButton#setMenu()。目前，当用户与菜单交互时，它会接管事件循环并停止视频播放。事件循环接管发生在私有 QToolButtonPrivate::popupTimerDone() 中。

我们想重写/修改 QToolButton 使其不是无模式的，但似乎没有任何简单的选择：

1.  在 C++ 中复制和修改 QToolButton，然后使用 PyQt4 或 PySide 的 C++ 包装为 Python 包装类。更简单，但现在我们的构建系统需要编译一个 C++ 类并知道它在哪个环境中运行，PySide 或 PyQt4。
2.  在 Python 中完全重写 QToolButton，因此它会继承 QAbstractButton，并进行修改。大量需要重写和维护的代码。
3.  在 Python 中，继承 QToolButton 并在必要时覆盖。这看起来不错，但是看看 QToolButtonPrivate::popupTimerDone() 引用的内部状态，无论如何我们大部分都会重写整个事情。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:26:03.100

我建议考虑使用 QToolButton.clicked 信号与 QMenu.popup 方法与 setMenu - 这可能会破坏模态。

我尝试为您设置一个示例 - 但它不会阻止 QMovie ......所以也许您可以使用此示例来测试视频播放器与 Qmovie 的不同选项，看看它是否仍然阻止您的事件循环：

```
from PyQt4 import QtGui, QtCore

MOVIE_FILE = '/path/to/ajax_loader.gif'

class MyDialog(QtGui.QDialog):
    def __init__( self, parent = None ):
        super(MyDialog, self).__init__(parent)

        self._menu = QtGui.QMenu(self)
        self._menu.addAction('Action A')
        self._menu.addAction('Action B')

        self._menuButton     = QtGui.QToolButton(self)
        self._modalButton    = QtGui.QToolButton(self)
        self._nonModalButton = QtGui.QToolButton(self)
        self._feedbackLabel  = QtGui.QLabel(self)
        self._startTime      = QtCore.QDateTime.currentDateTime()

        self._menuButton.setPopupMode(self._menuButton.InstantPopup)

        movie = QtGui.QMovie(self)
        movie.setFileName(MOVIE_FILE)
        movie.start()

        self._feedbackLabel.setMovie(movie)

        hlayout = QtGui.QHBoxLayout()
        hlayout.addWidget(self._menuButton)
        hlayout.addWidget(self._modalButton)
        hlayout.addWidget(self._nonModalButton)
        hlayout.addStretch()

        vlayout = QtGui.QVBoxLayout()
        vlayout.addLayout(hlayout)
        vlayout.addWidget(self._feedbackLabel)

        self.setLayout(vlayout)
        self.adjustSize()

        # setup different menu examples
        self._menuButton.setMenu(self._menu)
        self._modalButton.clicked.connect(self.showModalMenu)
        self._nonModalButton.clicked.connect(self.showNonModalMenu)

        self._menu.triggered.connect(self.showAction)

    def showModalMenu( self ):
        point = self._modalButton.rect().bottomLeft()
        global_point = self._modalButton.mapToGlobal(point)
        self._menu.exec_(global_point)

    def showNonModalMenu( self ):
        point = self._nonModalButton.rect().bottomLeft()
        global_point = self._nonModalButton.mapToGlobal(point)
        self._menu.popup(global_point)

    def showAction( self, action ):
        print action.text()

if ( __name__ == '__main__' ):
    app = QtGui.QApplication([])
    dlg = MyDialog()
    dlg.show()
    app.exec_() 
```

# rss - 需要帮助从 pinterest rss 提要中提取图像 src url

> ID：12043109
> 
> 赞同：0
> 
> 时间：2012-08-20T18:33:48.310
> 
> 标签：rss, expressionengine, pinterest, magpie

基本上，我正在尝试将 Pinterest 提要小部件添加到 ExpressionEngine 站点。我发现[本教程](http://www.emtwowebstudios.com/play/adding_your_pinterest_feed_to_expressionengine/)非常有帮助，但问题是我无法使用引用的标签剥离插件，因为我正在帮助的网站使用 ExpressionEngine 1x，而该插件仅适用于 2x。

如果您查看 Pinterest rss 源的来源，例如：[http](http://pinterest.com/amazon/feed.rss) ://pinterest.com/amazon/feed.rss ，您会看到`<description>`标签中包含 Pinterest 图像的 url 以及 pin 的标题、标签和相关信息链接到 pinterest 上的图钉。我希望能够仅提取“img src”之后双引号之间的值。

本教程还使用了一个名为 Magpie 的插件，该插件已经加载到网站上，所以我很好。

理想情况下，我希望我的代码看起来像这样：

```
{exp:magpie url="http://pinterest.com/amazon/feed.rss" parse="inward"
refresh="720" limit="5"} {items}<a href="{link}" target="_blank"><img
src="<?php code-to-grab-the-img-src->{description} ?>"
alt="{title}"></a>{/items} {/exp:magpie} 
```

显然“code-to-grab-the-img-src->{description}”不起作用，所以我正在寻找一个函数或其他东西。如何告诉 Magpie 在不使用 SuperGeekery Tag Stripper 插件的情况下仅提取 img src 值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:50:25.243

我建议构建一个简单的插件来处理这个问题，您可以使用与[我的其他答案](https://stackoverflow.com/a/12044282/174299)相同的正则表达式（由于无法将`{description}`内容导入 PHP 而失败）。

这是您的插件的外观：

```
<?php

$plugin_info = array(
  'pi_name' => 'Get Pinterest Image',
  'pi_version' => '1.0',
  'pi_author' => 'Derek Hogue',
  'pi_author_url' => 'http://amphibian.info',
  'pi_description' => 'Grabs the image URL from a Pinterest RSS feed description element.',
  'pi_usage' => Get_pinterest_image::usage()
  );

class Get_pinterest_image
{

var $return_data = "";

  function Get_pinterest_image()
  {
    global $TMPL;
    $fallback = $TMPL->fetch_param('fallback_image');
    preg_match("/src=\"(.+)(?=\"&gt;&lt;\/a&gt;)/ui", $TMPL->tagdata, $matches);
    $this->return_data = (!empty($matches)) ? $matches[1] : $fallback;
  }

  function usage()
  {
  ob_start(); 
  ?>
    {exp:get_pinterest_image fallback="/path/to/fallback_image.png"}{description}{/exp:get_pinterest_image}

    Where {description} is the "description" XML node from the Pinterest RSS feed (likely parsed via the Magpie plugin).
  <?php
  $buffer = ob_get_contents();
  ob_end_clean(); 
  return $buffer;
  }  

}

?> 
```

根据 EE 约定，这将被命名为**get_pinterest_image.php**，并进入您的**/plugins/**文件夹。然后在您的模板中：

```
{exp:magpie url="http://pinterest.com/amazon/feed.rss" refresh="720" limit="5" parse="inward"}
    {items}
        <a href="{link}" target="_blank"><img src="{exp:get_pinterest_image fallback="/path/to/fallback_image.png"}{description}{/exp:get_pinterest_image}" alt="{title}" /></a>
    {/items}
{/exp:magpie} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:58:58.280

当然 - 在输出上启用 PHP，然后使用这个正则表达式：

```
{exp:magpie url="http://pinterest.com/amazon/feed.rss" refresh="720" limit="5"}
{items}
<?php
    preg_match("/src=\"(.+)(?=\"&gt;&lt;\/a&gt;)/ui", '{description}', $matches);
    $src = (!empty($matches)) ? $matches[1] : '/path/to/default-image.png';
?>
    <a href="{link}" target="_blank"><img src="<?php echo $src; ?>" alt="{title}"></a>
{/items}
{/exp:magpie} 
```

此代码包含另一个图像的后备，以防由于`src`某种原因无法找到该图像。

未经测试，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:19:29.530

RSS解析很难！如果您愿意稍微复杂一点并将提要内容带入 EE，那么我对仅限 EE2 的 DataGrab 很幸运，因此您可能会从免费的 EE1 前身：[FeedGrab](http://brandnewbox.co.uk/products/details/feedgrab)中找到一些快乐。

# python - 使用 Python3 (MacOS) 安装 lxml 的问题

> ID：12043111
> 
> 赞同：1
> 
> 时间：2012-08-20T18:33:53.100
> 
> 标签：python, macos, python-3.x, lxml

一直在尝试按照此处的说明在 Mountain Lion OSX 机器上安装我的 Python 3 安装 lxml：http: [//lxml.de/build.html#building-lxml-on-macos-x](http://lxml.de/build.html#building-lxml-on-macos-x)

运行后出现以下错误`python3 setup.py build --static-deps`：

（**编辑**：编辑了我收到的错误消息。下面只有尾行，因为它很长。）

```
 ..
config.status: executing depfiles commands
config.status: executing libtool commands
rm: libtoolT: No such file or directory
make  all-recursive
Making all in libxslt
/bin/sh ../libtool --tag=CC   --mode=compile cc -DHAVE_CONFIG_H -I. -I.. -I.. -I../libxslt -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2 -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include    -g -O2 -Wall -c -o xsltutils.lo xsltutils.c
/bin/sh ../libtool --tag=CC   --mode=compile cc -DHAVE_CONFIG_H -I. -I.. -I.. -I../libxslt -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2 -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include    -g -O2 -Wall -c -o security.lo security.c
libtool: compile:  cc -DHAVE_CONFIG_H -I. -I.. -I.. -I../libxslt -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2 -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include -g -O2 -Wall -c xsltutils.c -o xsltutils.o
libtool: compile:  cc -DHAVE_CONFIG_H -I. -I.. -I.. -I../libxslt -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2 -I/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include -g -O2 -Wall -c security.c -o security.o
xsltutils.c:1541:30: warning: incompatible pointer types passing 'xmlBufPtr'
      (aka 'struct _xmlBuf *') to parameter of type 'xmlBufferPtr' (aka
      'struct _xmlBuffer *') [-Wincompatible-pointer-types]
                xmlBufferWriteQuotedString(buf->buffer, result->version);
                                           ^~~~~~~~~~~
/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2/libxml/tree.h:1122:43: note: 
      passing argument to parameter 'buf' here
                xmlBufferWriteQuotedString(xmlBufferPtr buf,
                                                        ^
xsltutils.c:1554:30: warning: incompatible pointer types passing 'xmlBufPtr'
      (aka 'struct _xmlBuf *') to parameter of type 'xmlBufferPtr' (aka
      'struct _xmlBuffer *') [-Wincompatible-pointer-types]
                xmlBufferWriteQuotedString(buf->buffer, (xmlChar *) encoding);
                                           ^~~~~~~~~~~
/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2/libxml/tree.h:1122:43: note: 
      passing argument to parameter 'buf' here
                xmlBufferWriteQuotedString(xmlBufferPtr buf,
                                                        ^
xsltutils.c:1758:26: error: incomplete definition of type 'struct _xmlBuf'
        *doc_txt_len = buf->conv->use;
                       ~~~~~~~~~^
/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2/libxml/tree.h:104:16: note: 
      forward declaration of 'struct _xmlBuf'
typedef struct _xmlBuf xmlBuf;
               ^
xsltutils.c:1759:37: error: incomplete definition of type 'struct _xmlBuf'
        *doc_txt_ptr = xmlStrndup(buf->conv->content, *doc_txt_len);
                                  ~~~~~~~~~^
/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2/libxml/tree.h:104:16: note: 
      forward declaration of 'struct _xmlBuf'
typedef struct _xmlBuf xmlBuf;
               ^
xsltutils.c:1761:28: error: incomplete definition of type 'struct _xmlBuf'
        *doc_txt_len = buf->buffer->use;
                       ~~~~~~~~~~~^
/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2/libxml/tree.h:104:16: note: 
      forward declaration of 'struct _xmlBuf'
typedef struct _xmlBuf xmlBuf;
               ^
xsltutils.c:1762:39: error: incomplete definition of type 'struct _xmlBuf'
        *doc_txt_ptr = xmlStrndup(buf->buffer->content, *doc_txt_len);
                                  ~~~~~~~~~~~^
/Users/Salem/Desktop/lxml-2.3.5/build/tmp/libxml2/include/libxml2/libxml/tree.h:104:16: note: 
      forward declaration of 'struct _xmlBuf'
typedef struct _xmlBuf xmlBuf;
               ^
2 warnings and 4 errors generated.
make[2]: *** [xsltutils.lo] Error 1
make[2]: *** Waiting for unfinished jobs....
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2
Traceback (most recent call last):
  File "setup.py", line 233, in <module>
    **setup_extra_options()
  File "setup.py", line 145, in setup_extra_options
    STATIC_CFLAGS, STATIC_BINARIES)
  File "/Users/Salem/Desktop/lxml-2.3.5/setupinfo.py", line 56, in ext_modules
    multicore=OPTION_MULTICORE)
  File "/Users/Salem/Desktop/lxml-2.3.5/buildlibxml.py", line 335, in build_libxml2xslt
    cmmi(libxslt_configure_cmd, libxslt_dir, multicore, **call_setup)
  File "/Users/Salem/Desktop/lxml-2.3.5/buildlibxml.py", line 266, in cmmi
    cwd=build_dir, **call_setup)
  File "/Users/Salem/Desktop/lxml-2.3.5/buildlibxml.py", line 249, in call_subprocess
    raise Exception('Command "%s" returned code %s' % (cmd_desc, returncode))
Exception: Command "make -j5" returned code 512 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:02:40.127

你可以看到错误：`checking whether the C compiler works... no`

转到 xcode 并安装“命令行工具”

它位于“Xcode / Preferences / Downloads”下

如果您没有 Xcode，请先从 App Store 获取。

# asp.net - 服务器不支持安全连接 asp.net

> ID：12043113
> 
> 赞同：0
> 
> 时间：2012-08-20T18:33:57.973
> 
> 标签：asp.net, security, connection

我将重复已经提出的问题，希望得到解决方案。在我的电脑中，以下功能可以正常工作。

```
void sendEmail(string mailto, string subject, string body)
        {
            try
            {
                mydataTableAdapter mta = new mydataTableAdapter();
                string email = mta.GetData().Rows[0]["email"].ToString();
                string password = mta.GetData().Rows[0]["password"].ToString();
                MailMessage objMail = new MailMessage(email, mailto, subject, body);
                NetworkCredential objNC = new NetworkCredential(email, password);
                SmtpClient objsmtp = new SmtpClient("smtp.mail.ru",25);
                objsmtp.EnableSsl = true;
                objsmtp.Credentials = objNC;
                objsmtp.Send(objMail);
            }
            catch (Exception ex) { Response.Write(ex.Message); }
        } 
```

但是当我在 web 服务器上运行这个项目时，出现了以下错误：**服务器不支持安全连接**并且发送电子邮件失败。

我试过了：

```
EnableSsl = false

objsmtp.UseDefaultCredentials = true; 
```

但是，这些都不能解决问题

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T07:08:02.233

首先尝试通过GMAIL配置发送邮件，如果成功则原因是由于我的smtp服务器的限制。

请联系您的网络管理员并寻求帮助。

在您的情况下，也可能是由于主机和端口问题。

# javascript - 获取下拉信息的按钮

> ID：12043116
> 
> 赞同：0
> 
> 时间：2012-08-20T18:34:08.313
> 
> 标签：javascript, html, css, function

我创建了一个下拉菜单，在 javascript 中用作日历。我正在尝试设置一个按钮，以便在单击它时，id 'date' 将显示当前选择的年、月和日。但是按钮什么也没做。我相信我已经正确设置了该功能，但它不起作用，我怀疑它放置不正确。有人可以帮助编辑我的代码以使其工作吗？

随意玩弄我的 jsfiddle .. [http://jsfiddle.net/FQnEy/](http://jsfiddle.net/FQnEy/)

这是我尝试过的...

```
<html>
<head>
<title>Life Event Picker Calendar</title>
</head>
<body>
<div id="date">Date</div>
<div id="event">Event</div>
Life Event Picker Calendar<br>
<hr align="left" width="200px"/>
--Year ------ Month ----- Day<br>
<div id="calendar-container"></div>
<br>Event: <input type="text" name="evname" /><br />
 <button onclick="getInfo()"type="button">Click Me!</button> 

<script type="text/javascript">
function getInfo() {
    document.getElementById("date").innerHTML = sel_year.value + sel_month.value + sel_day.value;
}

(function() {
    //variables and values for years
    var yr1 = 2011, yr2 = 2012, yr3 = 2013, yr4 = 2014;
    var years = [yr1, yr2, yr3, yr4];
    //array with months and associated days
    var calendar = [
        ["January", 31],["February", 28],["March", 31],["April", 30],["May", 31],["June", 30],["July", 31],["August", 31],["September", 30],
        ["October", 31],["November", 30],["December", 31]],
        //this is the variable that accesses the content
        cont = document.getElementById('calendar-container');
    //creates the element variables for the drop downs
    var sel_year = document.createElement('select'), sel_month = document.createElement('select'), sel_day = document.createElement('select');

    function createOption(txt, val) {
        //this creates the option but it seems that it is making the value -1 than what the text node is
        var option = document.createElement('option');
        option.value = val;
        option.appendChild(document.createTextNode(txt));
        return option;
    }

    //creates the values and text drop down values for years
    function createYearOption(val) {
        var option = document.createElement('option');
        option.value = val;
        option.appendChild(document.createTextNode(val));
        return option;
    }

    //this clears any elements for days, months, years
    function clearChildren(ele) {
        while (ele.hasChildNodes()) {
            ele.removeChild(ele.lastChild);
        }
    }

    //this function is only triggered when you recalculate the months
    function recalculateDays() {
        var year_index = sel_year.value;
        var month_index = sel_month.value,
            df = document.createDocumentFragment();
        if ((month_index == 1) && (year_index % 4 == 0)) {
            for (var i = 0, l = calendar[month_index][1]; i < l + 1; i++) {
                //the first variable is what number will be displayed in the day drop down
                df.appendChild(createOption(i + 1, i + 1));
            }
        } else {
            //l is the variable for the number of days in the month from the array above ex:28, 30, 31
            for (var i = 0, l = calendar[month_index][1]; i < l; i++) {
                //the first variable is what number will be displayed in the day drop down
                df.appendChild(createOption(i + 1, i + 1));
            }
        }
        clearChildren(sel_day);
        sel_day.appendChild(df);
    }

    //this function is triggered only when you change the year
    function recalculateDays2() {
        var month_index = sel_month.value,
            df = document.createDocumentFragment();
            year_index = sel_year.value;
        //this checks to see if the month selected is Feb and the year is a leap year   
        if ((month_index == 1) && (year_index % 4 == 0)) {
            //l is the variable for the number of days in the month from the array above ex:28, 30, 31
            for (var i = 0, l = calendar[month_index][1]; i < l + 1; i++) {
                //the first variable is what number will be displayed in the day drop down
                df.appendChild(createOption(i + 1, i + 1));
            }
        //if not a leap year and not Feb give values of normal year to all months
        } else {
            for (var i = 0, l = calendar[month_index][1]; i < l; i++) {
                //the first variable is what number will be displayed in the day drop down
                df.appendChild(createOption(i + 1, i + 1));
            }
        }
        clearChildren(sel_day);
        sel_day.appendChild(df);
    }   
    //this creates the month values
    function generateMonths() {
        var df = document.createDocumentFragment();
        for(var i=0; i<calendar.length; i++) {
            df.appendChild(createOption(calendar[i][0], i));
        }
        //clears past months
        clearChildren(sel_month);
        //appends new months onto variable df
        sel_month.appendChild(df);
    }
    //this creates the year values
    function generateYears() {
        var df = document.createDocumentFragment();
        for(var i=0; i<years.length; i++) {
            df.appendChild(createYearOption(years[i]));
        }       
        //clears past months
        clearChildren(sel_year);
        //appends new months onto variable df
        sel_year.appendChild(df);
    }

    //anytime the month selector is changed this calls the function to change the days
    sel_month.onchange = recalculateDays;
    sel_year.onchange = recalculateDays2;

    //runs the months and days functions
    generateMonths();
    generateYears();
    recalculateDays();

    //this is what displays each of the individual drop downs after everything has been done to them
    cont.appendChild(sel_year);
    cont.appendChild(sel_month);
    cont.appendChild(sel_day);

}());

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:41:17.587

您的年、月和日变量的范围是错误的。**[您需要像在这个jsFiddle 示例](http://jsfiddle.net/j08691/FQnEy/1/)**中那样将它们拉出来。

# mysql - Eclipse / Netbeans 能否在 PostgreSQL 中运行“内联”PHP / Perl

> ID：12043119
> 
> 赞同：1
> 
> 时间：2012-08-20T18:34:38.207
> 
> 标签：mysql, database, eclipse, postgresql, netbeans

我搜索了 StackOverflow 和网络的其余部分，但找不到任何这些问题的答案。

我的问题是——Eclipse 或 Netbeans 可以运行“内联”代码吗？基本上，如果我在 PostgreSQL 中编写代码，我可以使用某种符号来指示下一段代码将是 PHP，然后使用某种结束符号来指示 PHP 的结束，剩下的的代码将是 PostgreSQL？Perl 或其他语言也可以“嵌入”到这样的代码中吗？这仅适用于“脚本”或“标记”语言吗？如果你运行这段代码，它会成功编译 postgreSQL 和 PHP 代码吗？这可以通过 Windows 系统上的 IDE 运行吗？如果有人可以提供有关其中任何内容的链接或屏幕截图，将不胜感激。

类似地，Netbeans 或 Eclipse 是否具有 PostgreSQL 的本机语法检查或自动完成功能？或者这些东西的唯一选择是 Toadext 插件？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:37:30.600

不会。内联语言功能特定于特定语言，与您的 IDE 无关。

例如，PHP 支持 HTML 和 JavaScript 的内联块，因为 PHP 解释器和语言是为处理这些而编写的。同样，PostgreSQL 的过程语言在其`$$ $$`引用的块中接受各种语言，因为它们被明确设计为：`$$`无论如何，带引号的块只是字符串文字的特殊情况。

有了适当的支持，NetBeans 可能会`$$`在 PostgreSQL SQL 代码中的引用过程块中识别和检查 PL/PHP。不过，我怀疑是否有人实现了这样的功能，*据我所知，* NetBeans 不支持任何类型的“魔术注释”，您可以使用它来告诉它块使用的语言。

内联代码块不是泛化所有语言的概念。您通常需要将不同语言的代码保存在不同的文件中，或者将其中一种作为字符串文字包含在另一种中。这对于将 SQL 嵌入另一种语言的情况非常常见，您通常将 SQL 代码保存在字符串文字中：

```
String someSQL = "SELECT ...." 
```

当然，NetBeans 将其视为字符串，而不是 SQL，因此它通常不会为您进行类型检查。怎么可能？它不知道这是否是一个完整的 SQL 语句，是您打算使用字符串连接与其他片段粘合在一起的片段，还是恰好*看起来*像 SQL 的东西。

在某些情况下，Eclipse 可以在 Java 代码中执行一些 SQL 语法检查，但通常您需要自己做。如果您想要对 SQL 进行语法检查和突出显示，请将其保存在与主代码不同的文件中。

# visual-studio-2010 - 如何在 Visual Studio 中在客户端的 PC 上进行调试

> ID：12043120
> 
> 赞同：1
> 
> 时间：2012-08-20T18:34:49.293
> 
> 标签：visual-studio-2010, debugging

我的应用程序是 Excel 插件，我需要在客户端的 PC 上进行调试才能找出问题所在。

安装我的插件的调试版本，将所有 pdb 文件复制到客户端的 PC（Win 7 64 位，office 2010 32 位）也复制 x64 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Remote Debugger from我的电脑到客户端

然后我启动客户端的 Excel，然后运行 ​​msvsmon.exe

现在在我的 PC 上的 Visual Studio 2010 中，我尝试进行调试->附加以处理我将客户端的域\客户端的 PC 名称放在限定符字段中，然后刷新。我收到此消息“无法连接到名为*** * 的 Microsoft Visual Studio 远程调试监视器。所需的名称有效，但未找到所请求类型的数据。”

我想知道如何在客户端的 PC 上进行调试。当然，客户的 PC 与我的位于不同的域中。顺便说一句，我的电脑也有 win 7 64 位

谢谢

# jquery - 在 Rails 中使用部分和 Ajax 搜索和查找或创建字段

> ID：12043124
> 
> 赞同：0
> 
> 时间：2012-08-20T18:35:06.030
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, coffeescript

假设我正在根据作者创建一本书，因此我必须选择现有作者或创建一个。好吧，我以为我可以有一个搜索字段；通过 CoffeeScript，我将`$.ajax()`返回一个视图，其中包含一个带有结果的表格和一个用于选择项目的按钮。如果没有记录，会有作者表单部分的链接。*不过，我不确定这是最好的方法。*

问题是我无法将`f`变量传递给返回视图，以防用户需要填写表单。我尝试将表单的链接保留在原始视图中，但我不知道何时通过 JS 触发它。

![基本表示](../Images/0dd84f2cf73dadbcf8fa1b68d7d54660.png)

这就是我现在所拥有的：

```
# new.html.erb
<%= simple_form_for @author do |f| %>
    <%= render 'search', f: f %>
    ...
<% end %> 
```

```
# _search.html.erb
<%= text_field :author_search_name %>
<%= link_to 'Search', '#', id: 'author_search_submit',
    ajax_path: author_search_path %>

<div id="author_search_result"></div> 
```

```
# author.js.coffee
$('#author_search_result').hide
$('#author_search_submit').click (event) ->
    $.ajax
        url: $(this).attr('ajax_path'),
        params: { chassi: $('#author_search_name').val() },
        success: (data) ->
            $('#author_search_result').html(data).show 
```

还有几个文件，但这些是最重要的。这`author_search_path`是带有结果记录的视图或必须填写表格的警告。我真的很困惑，因为我已经解决这个问题好几天了，但似乎没有任何效果。我希望这足以解释我的问题。

**更新：**

```
# author_search.html.erb
<% if @authors.size > 0 %>
    <table>
        ...
        <% @authors.each do |author| %>
            <tr>
                ...
                <td><%= link_to "Select", '#', data_author_id: author.id %></td>
            </tr>
        <% end %>
    </table>
<% else %>
    <p>There are no authors with this name.
    You can create a new one by <%= link_to_add_fields 'clicking here', f %></p>
<% end %> 
```

在上面的代码中，我无法访问该`f`变量，这不能让我呈现表单。

```
# application_helper.rb
def link_to_add_fields(name, f)
    link_to name, '#', data: { fields: render('fields', f: f).gsub("\n", "") }
end 
```

```
# _fields.html.erb
<%= f.input :name %>
<%= f.input :age %>
... 
```

是不是太奇怪太复杂了？我想不出任何其他方式来搜索/查找或填写表格。

# c# - 我可以让这个方法返回通用返回类型吗？

> ID：12043125
> 
> 赞同：1
> 
> 时间：2012-08-20T18:35:06.037
> 
> 标签：c#, generics

我可以使这种方法通用吗？

```
 public static List<int> GetUnshippedOrders(string server,string port,string database,string username,string password, string orderStatus)
  {
        var orderNumbers = new List<int>();
        using (var conn = ConnectToMySql(server, port, database, username, password))
        {            
           var command = new MySqlCommand("SELECT OrderNumber FROM orders WHERE OrderStatus = @orderStatus;", conn);
            command.Parameters.AddWithValue("@orderStatus", orderStatus);
            var reader = command.ExecuteReader();
            while (reader.Read())
            {
                orderNumbers.Add(Convert.ToInt32(reader[0])); 
            }
        } 
        return orderNumbers;
   } 
```

我希望能够处理各种返回类型，因为引用的订单号会根据所连接的数据库的架构而变化，我不想为每种可能的返回类型重载这个方法（另外我想学习泛型）。

数据库模式由各种 Web 服务决定，这些服务都不受我的控制。还要特别注意，orderStatus 也可以是多种类型（主要是字符串和 int）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:37:50.433

也许是这样的：

```
public static List<T> GetUnshippedOrders<T>(string server,string port,string database,string username,string password, string orderStatus) where T : class
{
    var orderNumbers = new List<T>();
    using (var conn = ConnectToMySql(server, port, database, username, password))
    {            
       var command = new MySqlCommand("SELECT OrderNumber FROM orders WHERE OrderStatus = @orderStatus;", conn);
        command.Parameters.AddWithValue("@orderStatus", orderStatus);
        var reader = command.ExecuteReader();
        while (reader.Read())
        {
            orderNumbers.Add((T)(reader[0])); 
        }
    } 
    return orderNumbers;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:41:24.213

像这样的东西（不要忘记使用）：

```
public static List<T> GetUnshippedOrders<T>(string server,string port,string database,string username,string password, string orderStatus, Func<IDataReader, T> factoryMethod)
  {
        var results = new List<T>();
        using (var conn = ConnectToMySql(server, port, database, username, password))
        {            
           using (var command = new MySqlCommand("SELECT OrderNumber FROM orders WHERE OrderStatus = @orderStatus;", conn))
            {
               command.Parameters.AddWithValue("@orderStatus", orderStatus);
               using (var reader = command.ExecuteReader())
               {
                 while (reader.Read())
                 {
                   results.Add(factoryMethod(reader)); 
                 }
               }
             }
        } 
        return results;
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T18:38:29.137

如果确定返回类型的逻辑在方法内部，那么泛型返回类型将无济于事，因为您需要能够在调用泛型方法时指定返回类型。您可以将返回类型更改为`List<object>`，然后在方法返回后处理转换回具体类型。这很丑陋，但它有效。

如果调用者知道调用方法时期望什么类型，您可以简单地更改`List<int>`为`List<T>`并支持泛型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:38:20.497

**如果调用者知道返回类型**

如果调用者知道订单号的类型，您可以将定义更改为

```
public static List<T> GetUnshippedOrders<T>(string server,string port,string database,string username,string password, string orderStatus) 
```

用法：

```
List<int> orderNumbers = GetUnshippedOrders<int>(...); 
```

**如果方法知道返回类型**

如果*GetUnshippedOrders*方法必须确定订单号的类型，则不能使用泛型。

# c++ - 不调用任何与窗口相关的函数

> ID：12043130
> 
> 赞同：-2
> 
> 时间：2012-08-20T18:35:38.873
> 
> 标签：c++, visual-studio-2010, window

我的程序不需要任何窗口（它只是进行文件 I/O 和一些计算），我正试图使其尽可能小。我曾经一开始就拥有这一切：

```
WNDCLASS wc;
wc.style = 0;
wc.lpfnWndProc = WindowProc;
wc.cbClsExtra = 0;
wc.cbWndExtra = 0;
wc.hInstance = hInstance;
wc.hIcon = NULL;
wc.hCursor = NULL;
wc.hbrBackground = NULL;
wc.lpszMenuName = NULL;
wc.lpszClassName = TEXT("");
RegisterClass(&wc);
HWND hwnd = CreateWindow(TEXT(""),TEXT(""),0,0,0,0,0,HWND_MESSAGE,NULL,hInstance,NULL); 
```

我把它拿出来了，所以现在我的程序只是 WinMain 和有用的东西，没有与窗口相关的调用。我还取消了 user32.lib 的链接。它似乎运行良好，但这是不好的做法/会导致任何不可预见的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:22:57.340

最好从“Win32 控制台应用程序”开始，默认情况下，Visual Studio 向导会为您提供一个根本不执行任何操作的基本应用程序：

```
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

如您所见，Windows 应用程序根本*不需要*做任何事情。这同样适用于 GUI 应用程序，如果这确实是您需要的（基本区别是 GUI 项目不会在控制台窗口中启动）。尽管项目向导一开始就给你一堆乱七八糟的代码，但你可以安全地删除所有内容。一直到：

```
#include "stdafx.h"

int APIENTRY _tWinMain(HINSTANCE, HINSTANCE, LPTSTR, int)
{
    return 0;
} 
```

头`stdafx.h`文件是一个预编译头文件，基本上相当于`#include <windows.h>`. 但由于预编译头文件的工作方式，您必须首先包含`stdafx.h`。这完全是一个不同的主题，已经在这个网站上进行了广泛的介绍。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T18:45:39.007

不知道你删除了什么，你留下了什么。如果留下了什么，那么它可能会在未来引起干扰。

看这个简单的代码开始使用 Winmain

```
#include <stdio.h>
#include <Windows.h>
#pragma comment(linker,"/SUBSYSTEM:WINDOWS") 

int _stdcall WinMain( HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpCmdLine,int nCmdShow)
{

    return 0;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T19:37:05.217

Win32 窗口的最低要求。[http://www.codeproject.com/Articles/215690/Minimal-WinApi-Window](http://www.codeproject.com/Articles/215690/Minimal-WinApi-Window)

```
#include <windows.h>

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{

 MSG msg          = {0};
 WNDCLASS wc      = {0}; 
 wc.lpfnWndProc   = WndProc;
 wc.hInstance     = hInstance;
 wc.hbrBackground = (HBRUSH)(COLOR_BACKGROUND);
 wc.lpszClassName = L"minwindowsapp";
 if( !RegisterClass(&wc) )
   return 1;

 if( !CreateWindow(wc.lpszClassName,
                   L"Minimal Windows Application",
                   WS_OVERLAPPEDWINDOW|WS_VISIBLE,
                   0,0,640,480,0,0,hInstance,NULL))
    return 2;

    while( GetMessage( &msg, NULL, 0, 0 ) > 0 )
        DispatchMessage( &msg );

    return 0;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{

 switch(message)
 {
   case WM_CLOSE:
     PostQuitMessage(0);
     break;
   default:
     return DefWindowProc(hWnd, message, wParam, lParam);
 }
 return 0;

} 
```

更多阅读：http:
[//msdn.microsoft.com/en-us/library/bb384843.aspx](http://msdn.microsoft.com/en-us/library/bb384843.aspx)

[http://groups.engin.umd.umich.edu/CIS/course.des/cis577/lecture/win.htm](http://groups.engin.umd.umich.edu/CIS/course.des/cis577/lecture/win.htm)

# asp.net - VS2012 - 服务器/数据库资源管理器中未显示“创建表”或“显示表数据”菜单选项

> ID：12043135
> 
> 赞同：3
> 
> 时间：2012-08-20T18:35:55.390
> 
> 标签：asp.net, sql, visual-studio-2012, sql-server-2012

> **可能重复：**
> [让 Sql Server Data Tools 与 Visual Studio 2012 Express 候选版本一起工作](https://stackoverflow.com/questions/11707824/getting-sql-server-data-tools-to-work-with-visual-studio-2012-express-release-ca)

我已经为 Web 和 SQL Server 2012 安装了 VS 2012，并且正在打开一个内置于 VWD 2010 和 SQL 2008 中的解决方案。该应用程序运行良好，我能够使用该应用程序添加/编辑/删除记录。但是，当我转到数据库资源管理器并右键单击表时，我不再获得“显示表数据”选项。当我右键单击数据库时，我也没有得到“创建表”选项。这是一个 .mdf 文件。我尝试连接到另一台 SQL 服务器（不是我本地机器上的那个），我得到了所有这些选项，与 localdb 相同。知道为什么我不会为安装在本地计算机上的 SQL 服务器获得这些选项吗？Pipes/Shared/TCP 全部启用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:40:28.840

我认为此类选项仅适用于 Sql 数据库，不适用于 Access 数据库。

**更新的答案**

然后我会推荐你​​去 Sql Server Management Studio，微软的免费工具来探索 Sql Server 数据库。比内置的 VS 插件更灵活。从那里可以做很多事情。

它的下载量很大（615Mb）。这里 id FileHippo 链接[Sql Management Studio 2012 Express](http://www.filehippo.com/download_sql_server_studio/)

我不确定您的机器上安装了哪个版本，无论是 express 版本还是标准版本。如果它是快递，那么它肯定会与上面的链接一起使用。但在下载之前，请确保您已安装 Express Edition。我也猜想，其他版本可能与 Management Studio 捆绑在一起。您也可以从那里安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:48:38.213

看到[这个](https://stackoverflow.com/questions/11707824/getting-sql-server-data-tools-to-work-with-visual-studio-2012-express-release-ca)答案。

总而言之，SSDT 和 Visual Studio Express for Web 是不兼容的。您需要使用 VS 2010 shell 才能使用 SSDT。

# php - 如何在 tcpdf 中使用 imagemagick

> ID：12043137
> 
> 赞同：6
> 
> 时间：2012-08-20T18:35:55.560
> 
> 标签：php, imagemagick, tcpdf

我需要处理 TCPDF 中的图像

我收到此错误.. Imagemagick 已安装，但我如何告诉 TCPDF imagemagick 的路径？

```
TCPDF ERROR: TCPDF requires the Imagick or GD extension to handle PNG images with alpha channel. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-09-12T16:31:07.967

只需在执行任何其他操作之前安装缺少的 GD 扩展程序即可。

PHP 5

```
sudo apt-get install php5-gd 
```

PHP 7.1

```
sudo apt install php7.1-gd 
```

PHP 7.2

```
sudo apt install php7.2-gd 
```

PHP 7.3

```
sudo apt install php7.3-gd 
```

然后重启 Apache/NGINX

```
#Apcahe
sudo service apache2 restart
#NGINX
service nginx restart 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T18:45:11.587

您需要为 PHP 启用 GD 或 ImageMagick 扩展（其中一个都可以）。如果您选择 ImageMagick，您需要确保已安装软件包。

编辑 php.ini 文件以启用扩展。在 Windows 上：

```
extension=php_imagick.dll 
```

或者

```
extension=php_gd2.dll 
```

在 Unix/Linux 上：

```
extension=imagick.so 
```

或确保您已使用 --with-gd 选项编译 PHP 或安装 php5-gd 包。（对于某些发行版，它可能被称为 php54w-gd 之类的东西）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-20T18:42:18.723

```
sudo yum install php56-gd
sudo service httpd restart 
```

对于 CentOS 的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-15T10:59:01.197

对于 CentOS 上的 PHP7.X：

```
sudo yum install php-gd 
```

然后重新启动您的网络服务器。

如果某个`gd.ini`文件出现在 的“已解析的其他 .ini 文件”部分中`phpinfo.php`，则说明它已成功安装。

# groovy - 访问地图值

> ID：12043143
> 
> 赞同：2
> 
> 时间：2012-08-20T18:36:34.380
> 
> 标签：groovy, map

嗨，当我使用以下输出`allLang[:]`打印出地图的所有内容时，我调用了以下地图：`println allLang`

```
[1:[en, de], 2:[en, de], 3:[en, de], 4:[en, de], 5:[en, de], 6:[en, de], 7:[en,
de], 8:[en], 9:[en], 10:[en, de], 11:[en, de], 12:[en, de], 13:[en, de], 14:[en,
 de], 15:[en], 16:[en], 17:[en], 18:[en], 19:[en], 27:[de], 33:[de], 34:[de], 35
:[de], 36:[de]] 
```

但是，当我尝试打印附加到特定键的值时，例如：

```
println allLang[2] 
```

输出为空。我尝试以多种方式访问​​该值：

```
println allLang['2']
println allLang.get(2)
println allLang.get('2') 
```

而且这些都不起作用，我仍然为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:53:47.620

你如何定义数组？难道索引不是'2'而是'2'（或其他一些不可打印的字符）？

找出答案的最简单方法是...

*   `println allLang.inspect()`

这将为您提供更好的输出：

```
def allLang = [1:['en','de'],'2':['en','de'],3:['en','de']]
println allLang.inspect()

=> [1:["en", "de"], "2":["en", "de"], 3:["en", "de"]] 
```

*   或者您可以遍历地图并检查键：

    allLang.each {key, value -> println key.dump() }

    `=> <java.lang.Integer@1 value=1>`

    `=> <java.lang.String@32 value=2 offset=0 count=1 hash=50>`

    `=> <java.lang.Integer@3 value=3>`

这应该可以帮助您找到正确的索引....

**更新：**明白了！以下代码重现了您的问题：

```
def allLang = [:] 
def codes = ['en','de']
def query = [0:[id:0l],1:[id:1l],2:[id:2l],3:[id:3l],4:[id:4l]]; 
for(def i = 0; i < query.size(); i++){ 
  allLang[(query[i].id)] = codes; 
}
println allLang
println allLang[2]
println allLang['2'] 
```

解决方案是“ `used by hibernate is a`id Long”。所以你必须通过长值访问你的地图：

```
println allLang[2l] 
```

避免您的问题的最佳解决方案是避免使用数字索引：

```
allLang[''+(query[i].id)] = codes; 
```

将让您通过以下方式访问您的地图

```
println allLang['2'] 
```

# css - Compass Vertical Rhythm - HR 标签打破垂直网格

> ID：12043155
> 
> 赞同：1
> 
> 时间：2012-08-20T18:37:22.523
> 
> 标签：css, sass, compass-sass, susy-compass, vertical-rhythm

我试图了解垂直节奏并阅读一整天，尝试了几件事，但我的布局不断中断，因为我未能正确应用指南针填充拖车，如您在屏幕截图中看到的那样：

！[截屏](http://cl.ly/IsJX/compass-vertical-rhythm-hr-tag.png)

*   黄色背景的线是我的 hr 标签。
*   橙色背景的是文章。

这是我的代码：

**HTML：**

```
<article>…&lt;/article>
<hr/>
<article>…&lt;/article> 
```

**CSS：**

```
hr {
  background: rgba(yellow, 0.3);
  @include trailing-border;
  //border: 0;
  //height: 0;
  //border-top: 1px solid rgba(0, 0, 0, 0.1);
  //border-bottom: 1px solid rgba(255, 255, 255, 0.3);
} 
```

为了简单起见，我评论了我的 HR 造型。

这是另一个差距更明显的例子：

！[截图2](http://cl.ly/IrsR/compass-vertical-rhythm-hr-tag2.png)

```
hr {
  background: rgba(yellow, 0.3);
  @include trailer(1.5);
  @include trailing-border;
  @include leader(1.5);
  border: 0;
  height: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
} 
```

我不知道我在这里做错了什么。请帮助我了解此属性。

* * *

### 链接：

*   [http://compass-style.org/reference/compass/typography/vertical_rhythm/#mixin-trailing-border](http://compass-style.org/reference/compass/typography/vertical_rhythm/#mixin-trailing-border)
*   [http://www.youtube.com/watch?v=ls3Clk-kz3s&feature=player_detailpage#t=464s](http://www.youtube.com/watch?v=ls3Clk-kz3s&feature=player_detailpage#t=464s)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:46:22.553

你在这里有几个问题。

1) 浏览器应用您需要覆盖或重置的默认顶部/底部边距。完全`<hr/>`重置看起来像这样：

```
hr {
  border: 0;
  height: 0;
  margin: 0;
} 
```

2) 重置到位后，`trailing-border`mixin 将起作用（我将黄色留在原处，以便您可以看到它添加的填充以及边框）：

```
hr {
  @include trailing-border; // adds padding-bottom and border-bottom properties
  background: rgba(yellow, .3); // shows in the padding
} 
```

您也可以在此处添加您的`leader`和`trailer`。这将有助于创建一条符合节奏并在其周围留出空间的单行，但我认为这不是你想要做的。

3）通过将顶部和底部边框设置为不同的颜色，看起来您想要一个双色调边框。这可以工作，但你不想使用`trailing-border`. 事实上，没有任何来自垂直节奏的 mixin 可以帮助你解决这个问题——你必须手动完成。通过添加两个 1px 的边框，你知道你正在打破 2px 的节奏。因此，只需将这些 px 取回，您就可以开始了：

```
hr {
  border: 0;
  height: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
  margin: -2px 0 0 0;
} 
```

您可以从顶部或底部减去这 2px，并且可以将领导者或预告片添加到另一侧（但不能同时添加）。您将不得不从文章的边距中获得额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:09:37.277

我有类似的问题。

就我而言，我的基本字体大小为 12 像素，基线为 18 像素。

正如 Eric 所说，“通过添加两个 1px 的边框，你就知道你正在打破 2px 的节奏”。

这就是`leading-border`和`trailing-border`mixins 可以帮助你的地方。

1.  `leading-border($width: 1px, $lines: 1, $font-size: $base-font-size, $border-style: $default-rhythm-border-style)`

2.  `trailing-border($width: 1px, $lines: 1, $font-size: $base-font-size, $border-style: $default-rhythm-border-style)`

不幸的是，默认情况下，这些 mixins 会将边框与填充相结合，但没有边距（我的 hr 标签所需的顶部和底部边框各为 1px）。

我所做的是覆盖默认mixins以添加边距属性（不确定这样做是否是个好主意）：

```
@function rhythm($lines: 1, $font-size: $base-font-size, $offset: 0) {
    @if not $relative-font-sizing and $font-size != $base-font-size {
        @warn "$relative-font-sizing is false but a relative font size was passed to the rhythm function";
    }

    $rhythm: $font-unit * ($lines * $base-line-height - $offset) / $font-size;

    // Round the pixels down to nearest integer.
    @if unit($rhythm) == px {
        $rhythm: floor($rhythm);
    }

    @return $rhythm;
}

/*override original apply-side-rhythm-border mixin to include property variable - now you can use padding or margin for adding whitespace*/
@mixin apply-side-rhythm-border($side, $width: 1px, $lines: 1, $font-size: $base-font-size, $border-style: $default-rhythm-border-style, $property: padding) {

    @if not $relative-font-sizing and $font-size != $base-font-size {
        @warn "$relative-font-sizing is false but a relative font size was passed to apply-side-rhythm-border"; }

    border-#{$side}: {
        style: $border-style;
        width: $font-unit * $width / $font-size; };

    #{$property}-#{$side}: rhythm($lines, $font-size, $offset: $width);
}

/*override original leading-border mixin to include property variable - now you can use padding or margin for adding whitespace*/
@mixin leading-border($width: 1px, $lines: 1, $font-size: $base-font-size, $border-style: $default-rhythm-border-style, $property: padding) {
    @include apply-side-rhythm-border(top, $width, $lines, $font-size, $border-style, $property);
}

/*override original trailing-border mixin to include property variable - now you can use padding or margin for adding whitespace*/
@mixin trailing-border($width: 1px, $lines: 1, $font-size: $base-font-size, $border-style: $default-rhythm-border-style, $property: padding) {
    @include apply-side-rhythm-border(bottom, $width, $lines, $font-size, $border-style, $property);
} 
```

现在我的 hr 标签：

```
hr {
    @include leading-border($property:margin);
    @include trailing-border($property:margin);
    border-bottom-color: #353535;
    border-top-color: #0d0d0d;
} 
```

将编译为：

```
hr {
    border-bottom: 0.083em solid #353535;
    border-top: 0.083em solid #0D0D0D;
    margin-bottom: 1.417em;
    margin-top: 1.417em;
} 
```

而且我的垂直节奏不再中断。

试一试，让我知道它是否有效。

# javascript - 在 Marionette for Backbone.js 中将 HTML 表格的元素指定为区域

> ID：12043157
> 
> 赞同：15
> 
> 时间：2012-08-20T18:37:27.093
> 
> 标签：javascript, backbone.js, marionette

**问题**

使用[Backbone.Marrionette.Layout](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.layout.md)呈现一些表格数据。表格的`<tbody>`一部分是[Backbone.Marionette.Region](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.region.md)，用于显示[Backbone.Marionette.CollectionView](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.collectionview.md)。

我无法弄清楚如何使用 Marionette 的“区域”来做到这一点，而不会通过在元素内插入一个额外的 HTML 元素来弄乱表格显示`<tbody>`。

**示例代码**

`Layout`看起来像这样：

```
Backbone.Marionette.Layout.extend({
    template:...
    regions:{
        list_region: '#list-region'
    }
    onRender:function(){
        var collection = new TheCollection()
        var collectionView = new TheCollectionView({
            collection: collection
        })
        // PROBLEM: The region seems to needs its own HTML element,
        //   and the CollectionView also seems to need its on HTML
        //   element, but as far as I can see, there is only room 
        //    for one element: <tbody>?
        this.list_region.show(collectionView);
}); 
```

布局的模板包含整个表格：

```
<table>

    <tbody id='list-region'>

    </tbody>

    <tfoot id='footer-region'>
        Some other stuff goes here that is not a collection, so I was able 
        to make the View's 'tagName' property 'tr', which worked fine.
    </tfoot>

</table> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T20:10:58.213

这种布局的目的仅仅是为了方便一张桌子吗？如果是这样，您应该考虑改用 CompositeView。

```
 RowView = Marionette.ItemView.extend({
  tagName: "tr",
  template: ...
});

TableView = Marionette.CompositeView.extend({
  template: ...,

  childView: RowView,

  childViewContainer: "#list-region"
}); 
```

差不多就是这样。这会将您的所有 itemViews 呈现到 tbody 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-10T15:43:41.507

Marionette 3 弃用了`CompositeView`该类。相反，区域现在可以使用[新](http://marionettejs.com/docs/v3.0.0-pre.4/marionette.region.html#additional-options)[选项](http://marionettejs.com/docs/v3.0.0-pre.4/marionette.region.html#additional-options)`el`覆盖其内部视图的渲染内容。[`replaceElement`](http://marionettejs.com/docs/v3.0.0-pre.4/marionette.region.html#additional-options)

请参阅[此示例](http://marionettejs.com/docs/v3.0.0-pre.4/marionette.collectionview.html#tables-using-marionette-3)以呈现表格：

```
var RowView = Marionette.View.extend({
  tagName: 'tr',
  template: '#row-template'
});

var TableBody = Marionette.CollectionView.extend({
  tagName: 'tbody',
  childView: RowView
});

var TableView = Marionette.View.extend({
  tagName: 'table',
  className: 'table table-hover',
  template: '#table',

  regions: {
    body: {
      el: 'tbody',
      replaceElement: true
    }
  },

  onRender: function() {
    this.showChildView('body', new TableBody({
      collection: this.collection
    }));
  }
});

var list = new Backbone.Collection([
  {id: 1, text: 'My text'},
  {id: 2, text: 'Another Item'}
]);

var myTable = new TableView({
  collection: list
});

myTable.render(); 
```

# php - PHP - 当 javaw 可执行文件仍在运行时，proc_get_status 'running' 返回 false

> ID：12043159
> 
> 赞同：0
> 
> 时间：2012-08-20T18:37:36.530
> 
> 标签：php, proc-open

我正在使用一个无限循环的java文件执行javaw：

```
$descriptorspec = array(
                                0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
                                1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
                                2 => array("pipe", "w") // stderr is a file to write to
                        );

 // e.x. $javaCmd = "java -cp "../Fully Diversified Sequences of Sets" SuperEasyProblemSolution2 > /dev/null 2>&1 < h.in"
$proc = proc_open($javaCmd, $descriptorspec, $pipes);//, $cwd, $env);
 stream_set_blocking($pipes[0], 0) ;

 $status = proc_get_status($proc);  
 var_dump($status);
  $timeOut = 5;
  $currentSecond = 0;

  while( $currentSecond < $timeOut ) {
        echo '<br/>';
        sleep(1);
        $currentSecond = $currentSecond +1;
        if( ! $status["running"] )
        {
            echo 'process exited before timing out'; // Process must have exited, success!
            return;
        }
        $status = proc_get_status($proc);
        var_dump($status);
  } // end while
  if($currentSecond  == $timeOut)
  {
      // kill KILL KILL!
      exec("taskkill /PID ".$status['pid']);
  } 
```

在第一次调用时[`proc_get_status`](http://php.net/manual/en/function.proc-get-status.php)，`running`属性返回**true**。在第二次调用（一秒后）到 时`proc_get_status`，`running`返回**false**。但是，应用程序 javaw.exe**仍在运行**（我调用`proc_get_status`了一个最终会超时的 while 循环。）

我的目标是在超时后终止程序。[在这里](https://stackoverflow.com/questions/9356250/creating-a-php-online-grading-system-on-linux-exec-behavior-process-ids-and-g)看到一个类似的问题。我在 Win7 64 位 PHP 5.3 上运行

Var dump on `$status`：（注意；我尝试申请`stream_set_blocking($pipes[0], 0) ;`，同样的问题）

在进入超时循环之前：

```
 array(8) { 
["command"]=> string(157) "java -cp "../Fully Diversified Sequences of Sets" SuperEasyProblemSolution2 /dev/null 2>&1 < h.in" 
["pid"]=> int(3264) 
["running"]=> bool(true) 
["signaled"]=> bool(false) 
["stopped"]=> bool(false) 
["exitcode"]=> int(-1) 
["termsig"]=> int(0) 
["stopsig"]=> int(0) 
} 
```

在第一次迭代/睡眠（1）之后：

```
 array(8) { 
["command"]=> string(157) "java -cp "../Fully Diversified Sequences of Sets" SuperEasyProblemSolution2 /dev/null 2>&1 < h.in" 
["pid"]=> int(3264) 
["running"]=> bool(false) 
["signaled"]=> bool(false) 
["stopped"]=> bool(false) 
["exitcode"]=> int(1) 
["termsig"]=> int(0) 
["stopsig"]=> int(0) 
} 
    process exited before timing out 
```

经过测试，$status['pid'] 似乎与 Windows 资源监视器下 javaw.exe 的 pid 不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:06:51.657

尽管我们无法确定 proc_get_status 返回不正确的布尔值的问题，但我们能够找到一个很好的解决方法（对于 Unix），使用

`if (file_exists("/proc/".$status["pid"])) { // process still running }`

检查进程是否仍在运行。

这是完整的代码摘录：

```
$proc = proc_open($javaCmd, array(array("pipe", "r"), array("pipe", "w"), array("pipe", "w")), $pipes);

$status = proc_get_status($proc);

if($status["pid"] === false)
{
    // Process did not execute correctly
}
else
{
        $timeOut = 0;
        $forceKill = true;

        while($timeOut < $timeLimit)
        {
            $timeOut++;
            sleep(1);
            echo 'Timeout is at '.$timeOut.' and timelimit: '.$timeLimit.'<br/>';

            if (file_exists("/proc/".$status["pid"])) {
            // process still running
            }
            else
            {
                echo 'Finished running after '.$timeOut.' seconds<br/>';
                $forceKill = false;
                break;
            }

        }
        if($forceKill == true)
        {
            echo ' Manual killing pid '.$status['pid'];
            exec("sudo kill ".$status['pid']);
            $runTime = $timeLimit;
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:56:04.497

如果 Java 应用程序作为守护程序运行，那么它将具有不同的 PID。

Java 应用程序是否尝试输出任何内容？如果是这样 - 那么您没有读取管道，因此脚本最终会填满缓冲区并挂起（这可能会导致 Java 停止运行）

如果您不关心输出，请将其发送到`/dev/null`以摆脱它：

```
/cmd/to/run > /dev/null 2>&1 
```

如果您选择从管道读取数据，如果没有数据，读取函数将阻塞 - 绕过您可能想要使用的问题：

```
stream_set_blocking($pipes[0], 0) 
```

这将关闭阻塞模式（`FALSE`如果没有数据等待，读取函数将立即返回）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T22:47:10.037

既然你提到你在 Windows 上这样做，我意识到发生了什么-

javaw（带有 W）将其作为 Windows 应用程序启动并立即返回（这就是为什么 running=false）

您需要使用 java（不带 w）在控制台中运行它。

```
java = console application
javaw = windows application with no console 
```

# vb.net - 如何使组合框向上/向下键在 DroppedDown = True 时模拟鼠标

> ID：12043160
> 
> 赞同：0
> 
> 时间：2012-08-20T18:37:37.187
> 
> 标签：vb.net, combobox

我有绑定到绑定源的组合框。问题是当我在组合框中打开下拉菜单并单击向上或向下键盘键时，它会导致绑定源更改其位置并且事件开始触发，但不应该如此。只有当我按下 Enter 或 Tab 键或用鼠标单击它时，它才会触发。

到目前为止我尝试的是：

我试图继承文本框并自己处理事件

```
Protected Overrides Sub OnKeyDown(ByVal e As System.Windows.Forms.KeyEventArgs)
    If Me.DroppedDown Then
        e.Handled = True
    Else
        MyBase.OnKeyDown(e)
    End If
End Sub 
```

但问题是当按下向上或向下键时，突出显示不会移动到任何地方。当组合框处于下拉模式时，我想模仿鼠标的行为。当鼠标悬停在项目上时，它会突出显示当前项目，但不会导致绑定源更改。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:08:57.210

我认为，如果您将 SelectedIndexChanged 中的内容移至 SelectionChangeCommited，它应该可以解决问题。每当您使用 SelectedIndexChanged 更改索引时，它都会自动触发。SelectionChangeCommited 在做出最终选择时发生。

# asp.net-mvc - 如何测试 MVC3 剃须刀布局中是否存在变量？

> ID：12043161
> 
> 赞同：4
> 
> 时间：2012-08-20T18:37:40.263
> 
> 标签：asp.net-mvc, razor

我只是在使用 razor 语法深入研究 .NET 视图。我的大部分编码知识都在 javascript 中，所以这可能是一个基本问题（或者我的方法完全错误！）。在我的 html 中，我正在构建基于模板顶部声明的数组的 dns 预取标签。也许由于我的 javascript 背景，我正在接近这个错误，但如果我的一个视图不需要任何预取标签，我想避免声明 DNSPrefetch 变量。

如何测试变量是否存在，然后根据结果执行一些代码？我使用 try/catch 让它工作，但我认为有更好的方法。谢谢！

在 _Layout 中（使用 try/catch）：

```
 @{
    try {
      foreach (var dns in ViewBag.DNSPrefetch) {
        <link rel="dns-prefetch" href="//@dns" />
      }
    }
    catch{}
  } 
```

在模板中：

```
 @{
    Layout = "~/Views/Shared/_Layout.cshtml";

    // DNS prefetching for improved performance. More reading: http://html5boilerplate.com/docs/DNS-Prefetching/
    string[] DNSArray = { "ajax.googleapis.com", "mpsnare.iesnare.com" };
    ViewBag.DNSPrefetch = DNSArray;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T18:41:17.110

您可以检查该值是否为空：

```
@{
  if (ViewBag.DNSPrefetch != null) {
    foreach (var dns in ViewBag.DNSPrefetch) {
      <link rel="dns-prefetch" href="//@dns" />
    }
  }
} 
```

（或者，您可以在不需要时将 DNSArray 声明为空数组，然后您可以在所有情况下按原样使用*foreach块。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:41:27.920

该错误是因为 null 不提供迭代器，因此当 foreach 开始时会引发异常。首先使用条件检查值是否在视图包中。

```
@{
 if( ViewBag.DNSPrefect != null ){
  foreach (var dns in ViewBag.DNSPrefetch) {
    <link rel="dns-prefetch" href="//@dns" />
  }
 }
} 
```

但是，这*应该*在您的视图模型中完成。使用强类型视图模型来完成此操作。您将在控制器操作中组合视图模型，然后将视图模型传递到视图中，该视图将被强类型化到该视图模型。这将允许您在 a 上使用 foreach 循环，`string[]`而不必担心它是否为空，因为如果不添加任何内容，则该值已经被初始化为空。

查看模型`SomeActionVM.cs`

```
public class SomeActionVM
{
 public string[] DNSArray { get; set; }
 //other variables to pass in
} 
```

行动：

```
// Get: SomeAction
[HttpGet]
public ActionResult SomeAction()
{
 var vm = new SomeActionVM();
 vm.DNSArray = { "ajax.googleapis.com", "mpsnare.iesnare.com" };
 return View(vm);
} 
```

看法：

```
@model namespace.SomeActionVM

@foreach (var dns in Model.DNSPrefetch) {
    @:<link rel="dns-prefetch" href="//@dns" />
} 
```

# javascript - Google Charts Treemap - 如何更改响应式网页设计的字体大小？

> ID：12043163
> 
> 赞同：1
> 
> 时间：2012-08-20T18:37:47.193
> 
> 标签：javascript, html, css, google-visualization

我有一个谷歌图表树形图，可以很好地响应分辨率的变化。它重新调整大小并以新大小重新渲染。这是调整大小的代码

```
function resize() {
      var tree = new google.visualization.TreeMap(document.getElementById('chart_div'));
      tree.draw(data, {
        headerHeight: 15,
        fontColor: 'white',
        showScale: true});
      }

      window.onload = resize();
      window.onresize = resize;
    } 
```

我想根据分辨率的变化来改变字体大小。因此，我想在图表中为较小的分辨率设置较大的字体，反之亦然。我怎样才能做到这一点 ？

# android - 如何在 WebView 中显示 Android 操作栏

> ID：12043166
> 
> 赞同：3
> 
> 时间：2012-08-20T18:38:00.457
> 
> 标签：android, android-layout, webview, android-webview, android-actionbar

如何在 web 视图中启用 ActionBar。我当前的代码直接在网络浏览器中加载页面并跳过我所有的其他活动逻辑，但我不知道为什么。

**主要活动**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.webview);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setTitle("My Page");
    actionBar.setDisplayShowHomeEnabled(false);

    WebView myWebView = (WebView) findViewById(R.id.webview);
    myWebView.loadUrl(http://www.google.com);
} 
```

**XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="5dip"
/>

</LinearLayout> 
```

我也尝试过创建一个对话框来显示 webview，但这也被证明是不成功的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:21:53.660

> 如何在 web 视图中启用 ActionBar。

您不会，就像您在`Button`. 操作栏是活动的 UI 组件，而不是小部件。

> 我当前的代码直接在网络浏览器中加载页面并跳过我所有的其他活动逻辑，但我不知道为什么。

我相当肯定它正在执行您的所有语句`onCreate()`。如果您使用调试器，您可以自己观看。

如果您的真正问题是操作栏没有出现，请确保您：

*   将清单中的目标 SDK 版本设置为 11 或更高版本
*   [根据 ActionBarSherlock 文档](http://actionbarsherlock.com/usage.html)，将您的活动主题设置为 Sherlock 他们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T23:30:23.140

好的，所以我找到了问题的答案，但这更多的是技术性问题。

问题是该链接是一个重定向页面，因此内置的网络浏览器应用程序正在劫持我的会话，将其添加到我的 onCreate 方法中解决了它。

不过感谢您的回复！

```
myWebView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return false;
        }
}); 
```

# android - 解析 XML 不匹配标签时出错

> ID：12043170
> 
> 赞同：6
> 
> 时间：2012-08-20T18:38:15.300
> 
> 标签：android, xml, parsing, tags, mismatch

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:id="@+id/tab1"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="wrap_content"
            android:layout_height="match_parent">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:gravity="center"
                    android:text="About the course"
                    android:textColor="#0000ff"
                    android:textSize="20dp" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:text="This course equips you the skills to handle and manage the technology that is so vital in the field of media and communication, namely digital communication, wireless devices, broadband, media design and other emerging media and telecommunication technologies."
                    android:textColor="#0000ff"
                    android:textSize="14dp" />
                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="214dp"
                    android:layout_height="171dp"
                    android:layout_marginTop="10dp"
                    android:adjustViewBounds="true"
                    android:padding="10dp"
                    android:scaleType="fitStart"
                    android:src="@drawable/cinema4d"
                    android:layout_gravity="center" />
                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:textColor="#0000ff"
                    android:text="What you learn:"
                    android:textSize="14dp" />
                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:textColor="#0000ff"
                    android:textSize="14dp" 
                    android:text="Enrol in subjects on the fundamentals of media and communication technology and refine your specialisation by choosing elective subjects in areas such as multimedia networking and applications, wireless and mobile communications, and digital broadcasting with emphasis on a 'hands-on. minds-on' approach."/>
                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="214dp"
                    android:layout_height="171dp"
                    android:layout_marginTop="10dp"
                    android:adjustViewBounds="true"
                    android:padding="10dp"
                    android:scaleType="fitStart"
                    android:src="@drawable/fdmp"
                    android:layout_gravity="center" />                
        </ScrollView>
    </LinearLayout>    
</LinearLayout> 
```

我的代码很好，我测试了几次，直到出现解析 xml 不匹配的错误，我似乎找不到错误。添加图像视图后，当我尝试构建时出现以下错误：在此行找到多个注释：-错误：解析 XML 时出错：标签不匹配-元素类型“LinearLayout”必须由匹配的结束标签“”终止。有人知道我的代码有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T18:49:13.710

错误信息非常准确：

> 在此行发现多个注释： - 错误：解析 XML 时出错：标签不匹配 -**元素类型“LinearLayout”必须由匹配的结束标签终止**

您的 xml 打开两个`<LinearLayout>`标签（一个在第一行，一个作为 的第一个元素`<ScrollView>`），但它只关闭一个。

添加`</LinearLayout>`之前`</ScrollView>`应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T19:21:32.573

你需要一个`</LinearLayout>`标签`</ScrollView>`

# gwt - 将 div 标签添加到 GWT InlineHyperlink

> ID：12043176
> 
> 赞同：0
> 
> 时间：2012-08-20T18:38:51.727
> 
> 标签：gwt

添加的正确方法是什么

`<div class="GFPVJEUDHL GFPVJEUDHEB badge-for-user"></div>`

到 GWT InlineHyperlink 对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:18:55.110

```
new InlineHyperlink(new SafeHtml("<div class="GFPVJEUDHL GFPVJEUDHEB badge-for-user"></div>")) 
```

但是，`GFPVJEUDHL GFPVJEUDHEB`似乎是混淆了 CSS-Classes。

你真的想做什么？将链接包裹在小部件周围？

[API 文档：GWT 2.4](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/InlineHyperlink.html)

# git-tfs - 简单的 git-tfs unshelve 回退“系统找不到指定的文件”

> ID：12043182
> 
> 赞同：2
> 
> 时间：2012-08-20T18:39:06.900
> 
> 标签：git-tfs, unshelve

我在 TFS 搁置集上做了很多工作，想改用 git-tfs。事情开始顺利，但我被困在下面的错误中。这是我的序列，从一个空目录工作。

```
> git-tfs quick-clone http://my-server/tfs/collection $/my/tfs/path
3145 objects created...
blah = longhashcode

> cd path

> git checkout -b MyWork
Switched to new branch 'MyWork'

> git-tfs unshelve MyTfsShelfName MyWork
The system cannot find the file specified 
```

我已经尝试添加 -u "myuser"、新的分支名称等，但无法比“系统找不到指定的文件”更进一步。难住了。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:37:21.437

我很确定您收到的错误消息是由 git-tfs 无法找到 git.exe 引起的。（默认情况下添加到路径中的是 git.cmd）。尝试使用“git tfs”而不是“git-tfs”，如下所示：

```
git tfs unshelve MyTfsShelfName MyWork 
```

更多信息：[https ://github.com/git-tfs/git-tfs/issues/31](https://github.com/git-tfs/git-tfs/issues/31)

# android - Galaxy Tab 2 模拟器

> ID：12043184
> 
> 赞同：2
> 
> 时间：2012-08-20T18:39:20.540
> 
> 标签：android, emulation, tablet, galaxy-tab

我需要做什么才能在 Eclipse 中获得 Galaxy Tab 2 (ICS 4.0) 10.1 的工作模拟器？在 SDK 管理器中，我可以看到“Galaxy Tab”插件，但它适用于 Android 2.2 (API8)。

我可以在 AVD 管理器中使用一些特定的分辨率、屏幕密度等设置来创建它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:17:04.847

> 我需要做什么才能在 Eclipse 中获得 Galaxy Tab 2 (ICS 4.0) 10.1 的工作模拟器？

首先，“模拟器”和“模拟器”在 Android 中的含义不同。你说的是模拟器。

（我通常不会对此争论不休，但最近一位 Google 员工对这个问题感到困惑，所以我试图确保每个人都使用“模拟器”这个词）

其次，据我所知，三星尚未为 Tab 2 或其大多数设备发布任何特定的仿真器图像。

> 我可以在 AVD 管理器中使用一些特定的分辨率、屏幕密度等设置来创建它吗？

您可以找到您感兴趣的设置并尝试设置与这些设置匹配的 AVD。例如，IIRC，选项卡 2 是 WXGA800，“抽象 LCD 密度”为 240。

# java - 从 HttpPost Android 中提取 URL

> ID：12043185
> 
> 赞同：3
> 
> 时间：2012-08-20T18:39:19.917
> 
> 标签：java, android, http, http-post

我有一个正在使用的长 URL，`nameValuePairs`我目前正在尝试弄清楚为什么**该帖子在某些设备上导致 500 错误，而在其他设备上却导致 200 错误。**我需要从中提取完整的 URL，`httppost`尽管据我所知，它应该只是以下格式：

```
http://xx.com/site.asmx?var1=blah?var2=blah 
```

同样的构建适用于手机**，但不适用于平板电脑**。我尝试查看我的代码并捕获平板电脑可能无法定义此类变量的任何地方，例如这种情况：

```
final TelephonyManager tm = (TelephonyManager) getBaseContext()
                .getSystemService(Context.TELEPHONY_SERVICE);
        String tmDevice;
        try{
        tmDevice = "" + tm.getDeviceId().toString();
        }
        catch (NullPointerException e)
        {
            tmDevice = "null";
        } 
```

以下是一些`nameValuePairs`外观和代码发布部分的摘录：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs
            .add(new BasicNameValuePair("CurrentOwnerUsername", name));
    nameValuePairs.add(new BasicNameValuePair("OSVersion",
            Build.VERSION.RELEASE));
    nameValuePairs.add(new BasicNameValuePair("hash",
            "xxx"));
    nameValuePairs.add(new BasicNameValuePair("OSName", "Android"));
    nameValuePairs.add(new BasicNameValuePair("Model", Build.MODEL));
    nameValuePairs.add(new BasicNameValuePair("Manufacturer",
            Build.MANUFACTURER));
    nameValuePairs.add(new BasicNameValuePair("IMEI", id));
    try {
        nameValuePairs.add(new BasicNameValuePair("SerialNumber",
                Build.SERIAL));
    } catch (NoSuchFieldError e) {
        nameValuePairs.add(new BasicNameValuePair("SerialNumber",
                "NotAvailable"));
    }
    nameValuePairs.add(new BasicNameValuePair("CarrierName", carrier));
    // .add(new BasicNameValuePair("FriendlyName", Build.DEVICE));
    nameValuePairs.add(new BasicNameValuePair("Type", " "));
    nameValuePairs.add(new BasicNameValuePair("VisitorID", VisitorID));
    nameValuePairs.add(new BasicNameValuePair("PhoneNumber", phoneNumber));
    nameValuePairs.add(new BasicNameValuePair("SSID", ssid));
    nameValuePairs.add(new BasicNameValuePair("MACAddress", macAddr));
    nameValuePairs.add(new BasicNameValuePair("UserDepartment",
            department_val));
    nameValuePairs.add(new BasicNameValuePair("BatteryLevel", batteryText));

    int toastDuration = Toast.LENGTH_SHORT;
    try {
        HttpPost httppost = new HttpPost(URL); // post object
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost); // execution
        int result = response.getStatusLine().getStatusCode();
        if (result == 200) {
            CharSequence toastText = "Success";
            Toast.makeText(context, toastText, toastDuration).show();
        } else {
            CharSequence toastText = "Failure";
            Log.d("checkin", String.valueOf(response.getStatusLine()
                    .getStatusCode()));
            Toast.makeText(context, toastText, toastDuration).show();
        }
    } catch (ClientProtocolException e) {
        CharSequence toastText = "ClientProtocolException";
        Toast.makeText(context, toastText, toastDuration).show();
    } catch (IOException e) {
        CharSequence toastText = "IOException";
        Toast.makeText(context, toastText, toastDuration).show();
    } 
```

所以我需要一种从`httppost`. 当前`URL`传递的字符串只是一个基本 url，例如：http: [//xx.com/](http://xx.com/)并`nameValuePairs`跟随它。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T18:56:08.347

对于`HttpPost`，值作为请求的主体传递，因此 URL 将与您传入的 URL 相同。但是，您可以使用[`EntityUtils.toString(HttpEntity entity)`](http://developer.android.com/reference/org/apache/http/util/EntityUtils.html)UrlEncodedFormEntity 来打印将在`HttpPost`.

# javascript - 如何检查十六进制颜色是否“太黑”？

> ID：12043187
> 
> 赞同：135
> 
> 时间：2012-08-20T18:39:25.697
> 
> 标签：javascript, colors

我正在尝试评估颜色选择器选择的颜色的暗度，以查看它是否“太黑”，如果是，请将其设置为白色。我想我可以使用十六进制值的第一个字符来解决这个问题。它正在工作，但它也在切换一些合法的“浅色”颜色。

我有这样做的代码：

```
 if (lightcolor.substring(0,3) == "#00"|| lightcolor.substring(0,3) == "#010"){
            lightcolor="#FFFFFF";
            color=lightcolor;
        } 
```

必须有一种更有效的十六进制数学方法来知道颜色已经超过了一定程度的黑暗？就像如果 lightcolor + "some hex value" <= "some hex value" 然后将其设置为白色。

我添加了 tinyColor，它可能对此有用，但我不确定。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-08-20T18:42:20.667

您必须分别提取三个 RGB 分量，然后使用标准公式将生成的 RGB 值转换为它们的感知亮度。

假设有六个字符的颜色：

```
var c = c.substring(1);      // strip #
var rgb = parseInt(c, 16);   // convert rrggbb to decimal
var r = (rgb >> 16) & 0xff;  // extract red
var g = (rgb >>  8) & 0xff;  // extract green
var b = (rgb >>  0) & 0xff;  // extract blue

var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b; // per ITU-R BT.709

if (luma < 40) {
    // pick a different colour
} 
```

**编辑**

自 2014 年 5 月以来，`tinycolor`现在有了一项`getBrightness()`功能，尽管使用的是 CCIR601 加权因子而不是上面的 ITU-R 加权因子。

**编辑**

生成的亮度值范围是 0..255，其中 0 是最暗的，255 是最亮的。大于 128 的值被 认为是轻的`tinycolor`。（无耻地抄袭@pau.moreno 和@Alnitak 的评论）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-07-28T02:36:40.917

我找到了这个 WooCommerce Wordpress PHP 函数 ( [wc_hex_is_light](https://github.com/woocommerce/woocommerce/blob/master/includes/wc-formatting-functions.php) ) 并转换为 JavaScript。工作正常！

```
function wc_hex_is_light(color) {
    const hex = color.replace('#', '');
    const c_r = parseInt(hex.substr(0, 2), 16);
    const c_g = parseInt(hex.substr(2, 2), 16);
    const c_b = parseInt(hex.substr(4, 2), 16);
    const brightness = ((c_r * 299) + (c_g * 587) + (c_b * 114)) / 1000;
    return brightness > 155;
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-09-07T15:32:56.117

TinyColor库（您已经提到过）提供了几个用于检查和操作颜色的函数，其中包括[：](https://bgrins.github.io/TinyColor/)

*   [获得亮度](https://github.com/bgrins/TinyColor#getbrightness)

    > [根据Web Content Accessibility Guidelines (Version 1.0)](http://www.w3.org/TR/AERT#color-contrast)的定义，返回颜色的感知亮度，范围为 0-255 。
    > 
    > ```
    > tinycolor("#fff").getBrightness(); // 255 
    > ```

*   [是光](https://github.com/bgrins/TinyColor#islight)

    > 返回一个布尔值，指示颜色的感知亮度是否为浅色。
    > 
    > ```
    > tinycolor("#fff").isLight(); // true
    > tinycolor("#000").isLight(); // false 
    > ```

*   [是黑暗的](https://github.com/bgrins/TinyColor#isdark)

    > 返回一个布尔值，指示颜色的感知亮度是否暗。
    > 
    > ```
    > tinycolor("#fff").isDark(); // false
    > tinycolor("#000").isDark(); // true 
    > ```

*   [获取亮度](https://github.com/bgrins/TinyColor#getluminance)

    > [根据Web Content Accessibility Guidelines (Version 2.0)](http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef)的定义，返回颜色的感知亮度，范围为 0-1 。
    > 
    > ```
    > tinycolor("#fff").getLuminance(); // 1 
    > ```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-20T18:43:43.213

您可以计算[亮度](http://en.wikipedia.org/wiki/Luminance)：

> 因此，亮度是表面看起来有多亮的指标。

因此，最好选择文本应该是白色还是黑色。

```
var getRGB = function(b){
    var a;
    if(b&&b.constructor==Array&&b.length==3)return b;
    if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])];
    if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return[parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55];
    if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],
16)];
    if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)];
    return (typeof (colors) != "undefined")?colors[jQuery.trim(b).toLowerCase()]:null
};

var luminance_get = function(color) {
    var rgb = getRGB(color);
    if (!rgb) return null;
        return 0.2126 * rgb[0] + 0.7152 * rgb[1] + 0.0722 * rgb[2];
} 
```

上面的方法可以让你传递不同格式的颜色，但算法基本上只是在`luminance_get`.

当我使用它时，如果亮度大于 ，我将颜色设置为黑色`180`，否则设置为白色。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-11T08:50:27.970

这与十六进制一起工作，例如#fefefe

```
function isTooDark(hexcolor){
    var r = parseInt(hexcolor.substr(1,2),16);
    var g = parseInt(hexcolor.substr(3,2),16);
    var b = parseInt(hexcolor.substr(4,2),16);
    var yiq = ((r*299)+(g*587)+(b*114))/1000;
    // Return new color if to dark, else return the original
    return (yiq < 40) ? '#2980b9' : hexcolor;
} 
```

* * *

您可以将其更改为返回`true`或`false`更改

```
return (yiq < 40) ? '#2980b9' : hexcolor; 
```

至

```
return (yiq < 40); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-20T19:13:49.863

亮度和亮度之间有一个重要的区别。归根结底，亮度是衡量有多少能量穿过某个区域的量度，完全忽略了我们的感知系统如何感知该能量。另一方面，亮度是衡量我们如何感知能量的量度，并考虑了亮度与我们的感知系统之间的关系。（作为一个混淆点，有一个术语称为相对亮度，它似乎与亮度术语同义。它让我很受挫）。

准确地说，您正在寻找其他人建议的“亮度”或“价值”或“相对亮度”。你可以用几种不同的方式来计算（这就是人类！）[http://en.wikipedia.org/wiki/HSL_and_HSV#Lightness](http://en.wikipedia.org/wiki/HSL_and_HSV#Lightness)

1.  取 R、G 和 B 的最大值。
2.  取 R、G 和 B 的最大值和最小值的平均值。
3.  取三者的平均值。
4.  正如其他人在这里建议的那样，使用一些加权平均值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-20T18:43:05.860

一种可能的解决方案是将您的颜色[从 RGB 转换为 HSB](https://github.com/mjackson/mjijackson.github.com/blob/03ac0138b971a8e0f11e7edc110171508587ddd5/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt)。HSB 代表色调、饱和度和亮度（也称为 HSV，其中 V 代表值）。然后你只需要检查一个参数：亮度。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-20T13:40:45.640

我意识到这个对话已经有几年的历史了，但它仍然是相关的。我想补充一点，我的团队在 Java (SWT) 中遇到了同样的问题，发现这更准确一点：

```
private Color getFontColor(RGB bgColor) {
    Color COLOR_BLACK = new Color(Display.getDefault(), 0, 0, 0);
    Color COLOR_WHITE = new Color(Display.getDefault(), 255, 255, 255);

    double luminance = Math.sqrt(0.241 
       * Math.pow(bgColor.red, 2) + 0.691 * Math.pow(bgColor.green, 2) +  0.068 
       * Math.pow(bgColor.blue, 2));
    if (luminance >= 130) {
        return COLOR_BLACK;
    } else {
        return COLOR_WHITE;
    }
} 
```

# mysql - Mysql语句不适用于jsp

> ID：12043190
> 
> 赞同：0
> 
> 时间：2012-08-20T18:39:38.850
> 
> 标签：mysql, jsp

我与 DB 的连接很好，这行代码运行良好：

```
//res=stmt.executeQuery("SELECT UzID FROM uzsakymas"); 
```

但这不是：

```
res=stmt.executeQuery("SELECT UzID FROM uzsakymas inner join klientas on uzsakymas.KlientID=klientas.KlientID and klientas.vardas='Ramūnas' and klientas.KlientID='1'"); 
```

我尝试将它粘贴到 phpmyadmin 查询中，它也工作得很好

所以我与 db 的连接很好，声明很好，为什么它不起作用？：/

# javascript - javascript 令牌变量

> ID：12043191
> 
> 赞同：-2
> 
> 时间：2012-08-20T18:39:47.023
> 
> 标签：javascript

我不断收到错误消息，提示意外令牌变量

在这些线上

```
var isSplash =true;
//------DocReady-------------
$(document).ready(function()
if(location.hash.length == 0){
location.hash="!/"+$('#content > ul > li').eq(2).attr('id'); 
```

请帮助我是 javascript 的 n00b

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:49:38.803

该行本身是完全有效的 javascript。然而，它前面的那一行很可能不是。如果您的解释器需要一个右括号`}`或右括号`)`，而它看到的是“var”，您将收到错误消息`Unexpected token: var`。

检查错误前的行是否有任何语法错误。

编辑：前面的行有一个结束脚本标记作为字符串。浏览器会将其视为结束脚本标记，而不管它是否在字符串中，并破坏脚本的其余部分。

要解决此问题，只需在结束脚本标记的中间拆分您的字符串。例如

```
document.write('<script src="'+ url + '" type="text/javascript" ></scr' + 'ipt>'); 
```

请参阅此[相关问题](https://stackoverflow.com/questions/1659749/script-tag-in-javascript-string)。

# kml - KML / Google Earth 限制 InnerBoundaryIs 多边形的数量/复杂性

> ID：12043196
> 
> 赞同：0
> 
> 时间：2012-08-20T18:40:02.490
> 
> 标签：kml, google-earth, google-earth-plugin

GE 可以显示的内部多边形的数量是否有限制？KML 文件位于： [http ://www.gmapsapi.net/kml/westyard280.kml](http://www.gmapsapi.net/kml/westyard280.kml)

在 Google 地球中显示时，一些内部多边形或岛屿是倾斜的（因为缺乏更好的术语）。

KML 在 Google 地图中正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T03:16:52.000

内部多边形的数量不应有限制。但是，您确实有一些多边形，其中边界（内部和外部）彼此相交，并且您的大多数边界似乎都是自相交的。虽然这不违反 KML 规范，但如果您通过验证器运行它，它将触发警告，因为在不同 KML 客户端（例如地球与地图）中使用的渲染器可能对其渲染的多边形的拓扑有不同的要求. 我相信你所看到的是地球使用的三角测量方法的产物。

我会在您的工作流程中添加一个步骤来简化您想要显示的任何多边形。大多数 GIS 软件，无论是否开源，都可以做到这一点。简化也可能有助于提高性能，因为这是相当多的坐标。通常，您可以为您希望如何进行填充简化设置一个标志，并且您可以选择以您想要的方式填充的填充规则（如谷歌地图的规则）。

# google-analytics - Google Analytics V3 .Net 客户端库，错误“代码 400 消息'错误无效值'”

> ID：12043197
> 
> 赞同：1
> 
> 时间：2012-08-20T18:40:05.540
> 
> 标签：google-analytics, google-api, google-analytics-api

我正在使用谷歌分析 API 的 V3 和 .Net 客户端。我有一切工作我遇到的唯一问题是当我尝试运行以下

**指标：** ga:visits **维度：** ga:country, ga:region, ga:city, ga:latitude, ga:longitude, ga:networkDomain, ga:networkLocation, ga:date, ga:hour

我收到这个错误

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "invalid",
    "message": "Invalid Value"
   }
  ],
  "code": 400,
  "message": "Invalid Value"
 }
} 
```

当我运行以下它的工作 **指标：** ga:visits **维度：** ga:country, ga:region, ga:city, ga:latitude, ga:longitude, ga:networkDomain, ga:networkLocation

我使用谷歌的工具[https://developers.google.com/analytics/devguides/reporting/core/dimsmets#cats=geonetwork,session,trafficsources,system,time,pagetracking,internalsearch](https://developers.google.com/analytics/devguides/reporting/core/dimsmets#cats=geonetwork,session,trafficsources,system,time,pagetracking,internalsearch)来确保我的指标和维度有效。我还使用了 api explorer 并得到了同样的错误。[https://developers.google.com/apis-explorer/#p/analytics/v3/analytics.data.ga.get](https://developers.google.com/apis-explorer/#p/analytics/v3/analytics.data.ga.get)

我真的不知道问题是什么或如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:30:19.047

一次只能查询 7 个维度。

从[文档](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#dimensions)：

> **方面**
> 
> (...)
> 
> *   您可以在任何查询中提供**最多 7 个维度。**
> *   您不能发送仅由维度组成的查询：您必须将任何请求的维度与至少一个指标结合起来。
> *   在同一查询中只能查询某些维度。使用[维度和指标参考](https://developers.google.com/analytics/devguides/reporting/core/dimsmets)中的有效组合工具来查看哪些维度可以一起使用。

# jfreechart - JFreeChart：ChartMouseClicked 不起作用

> ID：12043199
> 
> 赞同：0
> 
> 时间：2012-08-20T18:40:20.230
> 
> 标签：jfreechart, mouseclick-event

我正在使用 JFreeChart 库并创建了一个`chartPanel`带有`chartMouseListener`. 奇怪的是，它`chartPanel`确实响应了`chartMouseMove`事件，但`chartMouseClicked`即使我非常努力地点击，它也永远不会触发。

任何人都可以对这个问题有所了解吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:54:47.747

如果没有看到您的代码，很难猜测它发生了什么。您必须`ChartMouseListener`在某处实现，然后将其添加到图表面板。

```
public class MyChart implements ChartMouseListener 
```

之后

```
chartPanel.addChartMouseListener(this) 
```

然后覆盖 chartMouseClicked 方法

```
@Override
public void chartMouseClicked(ChartMouseEvent e){
    if(e.getTrigger().getButton() ==  MouseEvent.BUTTON1) {
        //do something interesting
    }
} 
```

# aspnetdb - 在创建网站时使用 aspnetdb 数据库是否有益？

> ID：12043203
> 
> 赞同：1
> 
> 时间：2012-08-20T18:40:28.343
> 
> 标签：aspnetdb

我正在创建一个新网站，这样做时我对 Aspnetdb 数据库有点困惑，它包含用于授权和身份验证检查的现成功能，那么我应该使用这个数据库进行用户控制吗？有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:59:46.190

您可以将内置的 Aspnetdb 数据库用于网站，它肯定不会损害您的网站。此外，如果网站有非常多的访问者或创建自己的数据库的成员在功能方面更有利，这还取决于您正在构建的网站类型和可扩展性。

# c# - C# 生成代码在下一行继续

> ID：12043204
> 
> 赞同：0
> 
> 时间：2012-08-20T18:40:30.470
> 
> 标签：c#, mysql, database, random

我的世界生成代码有一点问题。我将在下面发布代码：

```
 #region generate world
    private void genworld()
    {
        string world = tb_value1.Text;
        int worldID = 9999;
        int size = 0;

        int col = 0;
        int row = 0;

        string sql = "SELECT * FROM " + variables.tbl_worlds + " WHERE worlds_name='" + world + "'";
        MySqlCommand cmd = new MySqlCommand(sql, connection);
        MySqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
            worldID = int.Parse(reader["worlds_ID"].ToString());
            size = int.Parse(reader["worlds_x"].ToString());
        }
        reader.Dispose();

        if (worldID != 9999)
        {
            addtolog("server", "World " + world + " exists!");

            while (row < size)
            {
                while (col < size)
                {
                    int above = row - 1;
                    int nextto = col - 1;
                    int tileabove = 9999;
                    int tilenextto = 9999;
                    int tile = 9999;

                    if (above >= 0)
                    {
                        string sql2 = "SELECT * FROM " + variables.tbl_tiles + "WHERE tiles_col='" + col + "' AND tiles_row='" + above + "' AND tiles_world='" + worldID + "'";
                        MySqlCommand cmd2 = new MySqlCommand(sql2,connection2);
                        MySqlDataReader reader2 = cmd.ExecuteReader();

                        while (reader2.Read())
                        {
                            if (reader2.IsDBNull(1))
                            {
                                tileabove = int.Parse(reader["tiles_type"].ToString());
                            }
                        }

                        reader2.Dispose();
                    }

                    if (nextto >= 0)
                    {
                        string sql2 = "SELECT * FROM " + variables.tbl_tiles + "WHERE tiles_col='" + nextto + "' AND tiles_row='" + row + "' AND tiles_world='" + worldID + "'";
                        MySqlCommand cmd2 = new MySqlCommand(sql2, connection2);
                        MySqlDataReader reader2 = cmd.ExecuteReader();

                        while (reader2.Read())
                        {
                            if (reader2.IsDBNull(1))
                            {
                                tilenextto = int.Parse(reader["tiles_type"].ToString());
                            }
                        }
                        reader2.Dispose();
                    }

                    if (tile == 9999 && (tileabove == 9999 || tilenextto == 9999))
                    {
                        tile = gentile(10, 10);
                    }
                    if (tile == 9999 && tileabove == 0 && tilenextto == 0)
                    {
                        tile = gentile(200, 10);
                    }
                    if (tile == 9999 && tileabove == 1 && tilenextto == 1)
                    {
                        tile = gentile(10, 200);
                    }
                    if (tile == 9999 && tileabove == 1)
                    {
                        tile = gentile(10, 10000);
                    }
                    if (tile == 9999 && (tileabove == 1 || tilenextto == 1))
                    {
                        tile = gentile(20,80);
                    }

                    string sql4 = "INSERT INTO " + variables.tbl_tiles + " (tiles_ID,tiles_row,tiles_column,tiles_world,tiles_type) VALUES ('','" + row + "','" + col + "','" + worldID + "','" + tile + "')";
                    MySqlCommand cmd3 = new MySqlCommand(sql4, connection2);
                    cmd3.ExecuteNonQuery();

                    col++;
                }
                row++;
                col = 0;
            }

        }
        else
        {
            addtolog("server","World " + world + " does not exist!");
        }
    }
    #endregion 
```

和外邦人的方法

```
 #region generate tile
    private int gentile(int grass, int desert)
    {
        int totalchance = grass + desert;

        //addtolog("server","TEST");

        Random random = new Random();
        int number = random.Next(1,totalchance);

        if (number <= grass)
        {
            return 0;
        }
        else if (number <= grass + desert)
        {
            return 1;
        }
        else
        {
            return 0;
        }
    }
    #endregion
    #endregion 
```

我的问题是它似乎继续在下一行，而它不应该。一个例子：

![我的生成代码示例](../Images/2f6c7910da54c1a2be11f7a0ec16b5ea.png)

如果您仔细查看图像，您会看到绿色（0 作为 tiletype）和黄色（1 作为 tiletype）继续在下一行，而我认为它没有检查最后一个瓷砖上一排...

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:25:58.620

```
MySqlCommand cmd2 = new MySqlCommand(sql2,connection2);
MySqlDataReader reader2 = cmd.ExecuteReader(); 
```

现在看到问题了吗？（复制粘贴也使情况变得更糟）我不能绝对肯定地说这是你的问题，但我不会进一步挖掘，直到你说这不能解决你的问题。

```
MySqlCommand cmd2 = new MySqlCommand(sql2,connection2);
MySqlDataReader reader2 = cmd2.ExecuteReader();  //<-- using cmd2 instead 
```

* * *

添加代码审查。

如果您将“世界”保存在内存中并避免所有数据库命中直到最后，调试就会变得更容易。

如果 ReSharper 没有指出它（所以得到它），我可能不会抓住这一点，因为这段代码做的一切都很糟糕，而不是做得很好。

* * *

简化代码：

```
[Test]
public void X()
{
    var tiles = genworld();

    for(int i = 0; i < tiles.Length; i++)
    {
        for(int j = 0; j < tiles[i].Length; j++)
        {
            Console.Write(tiles[i][j]);
        }

        Console.WriteLine();
    }
}

private int[][] genworld(int size = 25)
{
    /* the solution with the database "worked" because it was slow. 
       going in memory will cause this to run faster so you need to
       declare a Random first and use it later.  this approach avoids
       a class-level variable.
    */
    var r = new Random();
    Func<int, int, int> gentile = (grass, desert) =>
                                        {
                                            var number = r.Next(1, grass + desert);
                                            return number < desert ? 1 : 0;
                                        };

    var tiles = new int[size][];

    for (int i = 0; i < size; i++)
    {
        tiles[i] = new int[size];
    }

    for (var row = 0; row < size; row++)
    {
        for (var col = 0; col < size; col++ )
        {
            int tileabove = 9999;
            int tilenextto = 9999;
            int tile = 9999;

            if (row >= 1)
            {
                tileabove = tiles[row - 1][col];
            }

            if (col >= 1)
            {
                tilenextto = tiles[row][col - 1];
            }

            if (tile == 9999 && (tileabove == 9999 || tilenextto == 9999))
            {
                tile = gentile(10, 10);
            }
            if (tile == 9999 && tileabove == 0 && tilenextto == 0)
            {
                tile = gentile(200, 10);
            }
            if (tile == 9999 && tileabove == 1 && tilenextto == 1)
            {
                tile = gentile(10, 200);
            }
            if (tile == 9999 && tileabove == 1)
            {
                tile = gentile(10, 10000);
            }
            if (tile == 9999 && (tileabove == 1 || tilenextto == 1))
            {
                tile = gentile(20, 80);
            }

            tiles[row][col] = tile;
        }
    }

    return tiles;
} 
```

# php - 房间和可用日期 PHP/MySQL

> ID：12043207
> 
> 赞同：3
> 
> 时间：2012-08-20T18:40:40.027
> 
> 标签：php, mysql

因此，我正在设计一个适用于酒店的 Web 应用程序，它最终应该会成为为每个酒店网站安装一些额外代码的简单方法。该应用程序**正在使用 php 和 mysql**。因此，正如您可能猜到的那样，我对数据库结构感到非常困惑。不过，我已经进行了一些研究，而且我不只是要求一个完整的预订系统。

因此，酒店的主人必须拥有多种类型的房间。所以我想可能一张房间的桌子是“必须的”。开始了：

```
---------- Rooms Table (example)

ID     NAME         ADULTS     ROOM_COUNT     PRICE/NIGHT     

1      DoubleRoom   2          5              45$
2      Family       3          2              75$
3      Single       1          3              35$ 
```

这很简单。**可以通过我的应用程序添加房间**，我还将为每个房间附上适当的描述以及各种图像。但让我们回到正题。人们应该预订所以...

```
---------- Bookings Table (example)

ID    ROOM_ID      BOOKING_USER     CHECKIN (timestamp)   CHECKOUT (timestamp)

1     2            A full name      208420842042          308230482042824
2     3            A full name      208423242525          529752972595272
... 
```

所以，这是 -**希望**是 -数据库结构。现在，我正在考虑一种**检查可用性**的方法。我知道，这听起来可能很愚蠢，但我想不出一个聪明而简单的方法。在网站的形式中，应该有以下字段：`check-in date`然后`check-out-date`将转换为时间戳和..这是我卡住的时间！

当我只有上述表格时，如何查看空房情况。有什么办法或者我需要改变我的数据库结构吗？即使我设法检查可用性，**房间总数**( `ROOM_COUNT`)怎么**算**？我的意思是，如何查看多种类型房间的空房情况？我想是这样的：

```
SELECT count(ROOM_ID) FROM bookings WHERE
bookings.checkin < DATE_GIVEN_AS_CHECKIN_INPUT and
bookings.checkout > DATE_GIVEN_AS_CHECKOUT_INPUT 
```

然后根据此查询的输出，我会知道是否有可用的房间。但是房间数呢？有没有更好的方法？

如果这里有人可以启发我，我会非常高兴。提前致以最诚挚的问候和感谢，即使是阅读本文！
布兰

PS哦，这不是作业！:PI 反正也不去上学 :D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:46:46.050

以下查询将查找所有没有预订的房间，或在签入/结账输入之前或之后的预订。

```
SELECT r.*
FROM rooms r
LEFT JOIN bookins b ON b.room_id = r.id
WHERE b.id IS NULL
OR (b.checkout >= DATE_GIVEN_AS_CHECKIN_INPUT AND b.checkin >= DATE_GIVEN_AS_CHECKOUT_INPUT)
OR (b.checkout <= DATE_GIVEN_AS_CHECKIN_INPUT AND b.checkout <= DATE_GIVEN_AS_CHECKOUT_INPUT) 
```

要获得房间数，只需替换`SELECT r.*`为`SELECT COUNT(DISTINCT r.id)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:09:31.217

如果您在时间轴中查看您请求的时间段 [SDATE,EDATE]，则有四个预订案例 (1)、(2)、(3)、(4) 可以（全部/部分）占用请求的时间段：

```
 SDATE    EDATE
      |--------|              <-- requested period

  |--1--|   |--2--|           <-- booking periods
    |-----3------|            <-- relevant for
        |-4--|                <-- occupancy test

|-5-|            |--6--|      <-- periods not relevant 
```

您可以使用以下语句找到这些期间案例（1、2、3 和 4）：

案例 1、2 和 3

```
WHERE (b.checkout >= SDATE AND b.checkin >= EDATE) 
```

案例4：

```
WHERE (b.checkout <= SDATE AND b.checkin >= EDATE) 
```

然后结合这两种情况，将列出给定期间 [SDATE,EDATE] 内所有已占用房间的房间 ID 的查询是：

```
SELECT DISTINCT b.roomid FROM bookings AS b
WHERE (b.checout >= SDATE AND b.checkin <= EDATE)
OR (b.checkout <= SDATE AND b.checkin >= EDATE) 
```

由于您需要相反的情况 - 请求期间的所有可用房间，您的查询将如下所示：

```
SELECT r.roomid FROM rooms AS r WHERE r.roomid NOT IN
(
  SELECT b.roomid FROM bookings AS b
  WHERE (b.checout >= SDATE AND b.checkin <= EDATE)
  OR (b.checkout <= SDATE AND b.checkin >= EDATE)
) 
```

子查询中不需要 DISTINCT（如果 1 不在 [1,2] 中，那么它也不在 [1,1,2] 中）。

# sql - 返回受 SQL Server 报表生成器中的指标影响的行数

> ID：12043208
> 
> 赞同：0
> 
> 时间：2012-08-20T18:40:41.743
> 
> 标签：sql, reporting-services, ssrs-2008

我创建了一个 tablix，其中有一个截止日期列。我还实现了一个指标，它可以做两件事之一。如果到期日期 <= 当前日期，则指示器显示绿色复选标记，否则显示红色 x。我想计算受“绿色复选标记”指示器影响的行数。我将如何做到这一点？

抱歉，如果这似乎是一个微不足道的问题，我对 SQL Server Report Builder 还很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:55:32.853

这是一种方法。把它放在你想要计数的地方：

=SUM(IIF(到期日 <= 当前日期,1,0))

# ruby - 路由到 CSV 文件？

> ID：12043216
> 
> 赞同：0
> 
> 时间：2012-08-20T18:41:21.310
> 
> 标签：ruby, ruby-on-rails-3

我正在将查询输出写入我的“report_runs”视图文件夹中名为“reports_output”的文件夹中的 CSV 文件。文件名需要根据运行报告的用户给出的名称和当前时间等其他参数生成。我有两个问题：

1.  如何使用 Time.now 生成唯一文件名转换为数字字符串（如 db/migrate 中的版本号）？和
2.  如何正确路由到所有这些 .csv 文件？

我能够编写具有简单名称的文件，例如下面的 Item_List.csv，但无法通过在浏览器的显示视图中单击文件的 url 来查看文件。错误说：

```
No route matches "/report_runs/report_outputs/Item_List.csv" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:12:31.347

1：您可以使用简单的字符串插值生成包含当前时间的文件名，并且可以使用[Time#strftime](http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)格式化字符串：

```
file_name = "item_list#{Time.now.strftime('%Y%m%d%H%M%S')}.csv" 
```

2：如果您想提供像 .csv 文件这样的静态资产，那么您可以将它们写入公共文件夹。因此，例如，如果您在其中创建一个文件，`public/report_runs/report_outputs/Item_List.csv`则可以从示例中给出的路径访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-14T13:14:42.013

如果您在控制器中动态生成 CSV，那么您可以像这样路由到它：

```
<%= link_to item_list_path(:format => "csv") %> 
```

假设您的控制器是`ItemList`.

# java - JVM 的“-server”选项是否需要成为第一个选项？

> ID：12043220
> 
> 赞同：2
> 
> 时间：2012-08-20T18:41:48.077
> 
> 标签：java, jvm, jvm-hotspot

JVM 的“-server”选项是否需要成为第一个选项？我在某处读到就是这种情况，我再也找不到文档了。另一方面，甲骨文给出的每一个“例子”都表明情况就是如此。有谁知道答案并知道链接是什么来证明它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T18:48:59.600

如果我在其主要方法中编写一个只有这个的类：

```
System.out.println(System.getProperty("java.vm.name")); 
```

并在没有 的情况下运行它`-server`，我得到了这个：

```
Java HotSpot(TM) Client VM 
```

但是，如果我`-server`在任何地方使用标志运行它，包括第一个选项或最后一个选项，我会得到：

```
Java HotSpot(TM) Server VM 
```

所以它似乎没有任何区别。使用 Oracle 的 Java 6 和 7 对此进行了测试。

在 linux 上，使用 JDK 1.5.0_22，它似乎默认为服务器 VM。无论我是否使用`-server`，它都会作为服务器 VM 出现，除非我使用`-client`，我可以在命令行选项列表的任何位置使用它。

# image - 如何将小图像设置为在 magento 1.6+ 中显示（在前端）作为批量更改？

> ID：12043229
> 
> 赞同：1
> 
> 时间：2012-08-20T18:42:21.680
> 
> 标签：image, magento

我遇到了以下代码，我认为可以解决我的问题，但它似乎没有做任何事情（查询成功但应用于零行）：

```
UPDATE catalog_product_entity_media_gallery AS mg,
       catalog_product_entity_media_gallery_value AS mgv,
       catalog_product_entity_varchar AS ev
SET    ev.value = mg.value
WHERE  mg.value_id = mgv.value_id
AND    mg.entity_id = ev.entity_id
AND    ev.attribute_id IN (86,87,88)
AND    mgv.position = 1 
```

对我来说，这些属性 ID 对应于查看 eav_attribute 表的小图像、缩略图和媒体库。

图像显示在后端，媒体库图像可以在前端看到，但小图像和缩略图不会显示在前端。

查看 catalog_product_entity_media_gallery 表，它只包含媒体库属性 (88)。我是否需要复制这些，将属性更改为 86，使其显示在前端？如果是这样，我该怎么做？

SQL 对我来说是新的，虽然我知道如何复制和粘贴 ;)

提前干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T02:00:28.837

我和你在同一条船上。我确实找到了这个问题和答案： [Magento，我需要将第一个产品图像定义为缩略图](https://stackoverflow.com/questions/9875026/magento-i-need-define-first-product-image-as-thumbnail/20587300)

但我也在寻找如何找到正确的值来设置。

我相信如果您使用每个 ev.attribute_id 运行此代码 3 次，它应该可以工作。

```
 UPDATE catalog_product_entity_media_gallery AS mg,
    catalog_product_entity_media_gallery_value AS mgv,
    catalog_product_entity_varchar AS ev
SET ev.value = mg.value
    WHERE  mg.value_id = mgv.value_id
    AND mg.entity_id = ev.entity_id
    AND ev.attribute_ID = '76'
    AND mgv.position = 1; 
```

为每个属性 ID（86、87、88）运行一次。

我认为这应该有效！

# git - 将远程分支拉入不同名称的本地仓库？

> ID：12043236
> 
> 赞同：135
> 
> 时间：2012-08-20T18:43:25.830
> 
> 标签：git, github, repository

好吧，我对此做了一些研究，但我找不到确切的答案，所以我不得不问。

我有 2 个遥控器：origin 和 repo2。

我想做类似的事情

```
git pull repo2 master 
```

但这会将 repo2 的 master 分支拉到我的 master 中。我可以为我的本地分支指定一个不同的分支吗？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-08-20T18:45:02.213

```
git checkout -b myBranchName repo2/master 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T18:45:37.320

该`git pull`命令是一个方便的函数，它执行`git fetch`和`git merge`。如果您只想从新远程检索分支而不尝试将其合并到任何工作副本分支中，您可以使用`git fetch`. 然后，您可以参考`git branch -av`查看所有本地和远程分支，并根据需要在任一远程上操作。

# android - ActionBarSherlock + maven + eclipse：在工作区中找不到依赖项

> ID：12043237
> 
> 赞同：18
> 
> 时间：2012-08-20T18:43:26.417
> 
> 标签：android, eclipse, maven, actionbarsherlock, m2e

我已经更新到最新版本的 ADT 插件，我遇到[了这个问题](https://stackoverflow.com/q/11379670/787375)，也解决了更新 m2e-android eclipse 插件的问题。现在，我可以通过控制台编译我的项目，但不能使用 Eclipse。`pom.xml`这是eclipse中文件抛出的异常：

`dependency=[com.actionbarsherlock:library:apklib:4.1.0:compile] not found in workspace`

在以前版本的 ADT/m2e-android 中，我能够毫无问题地构建控制台和 eclipse。

*有谁知道如何解决这个问题？也许我的 pom.xml 错了？*

谢谢你的时间。

* * *

目前使用：

*   Eclipse classic 3.7.2（使用 Juno 问题仍然存在）
*   ADT 20.0.3
*   m2e-安卓 0.42
*   android-maven-插件 3.3.0
*   行家3.0.4
*   m2e 1.1.0（作为依赖项包含在 m2e-android 0.42 中）

pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.jelies</groupId>
    <artifactId>my-project</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>apk</packaging>

    <dependencies>
        <dependency>
            <groupId>android</groupId>
            <artifactId>android</artifactId>
            <version>4.1_r2</version>
            <scope>provided</scope>
        </dependency>

        <!-- some unrelated dependencies -->

        <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>library</artifactId>
            <version>4.1.0</version>
            <type>apklib</type>
        </dependency>

    </dependencies>

    <build>
        <finalName>${project.artifactId}</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <version>2.1.2</version>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <phase>verify</phase>
                        <goals>
                            <goal>jar-no-fork</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.0</version>
                <configuration>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                    <emulator>
                        <avd>avd-4.1</avd>
                    </emulator>
                    <deleteConflictingFiles>true</deleteConflictingFiles>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>eclipse</id>
            <activation>
                <!-- This profile is only activated when m2e.version is present (only 
                    in eclipse) -->
                <property>
                    <name>m2e.version</name>
                </property>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>com.google.android</groupId>
                    <artifactId>support-v4</artifactId>
                    <version>r7</version>
                    <scope>provided</scope>
                </dependency>
            </dependencies>
        </profile>
    </profiles>
</project> 
```

**编辑：**

答案是对的。在我的工作区中 mavenized ABS 库项目，错误消失了！但是，出现了另一个问题：我的项目中添加了ABS传递依赖项，导致eclipse无法启动应用程序。这是一个已知问题，您可以[在此处](https://github.com/rgladwell/m2e-android/issues/104)关注。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T07:28:29.710

从 Android 0.4.2 开始，您现在需要在 Eclipse 工作区中对 Android 库项目进行 mavenise，以便 m2e-android 成功检测到它们。ActionBarSherlock 的 POM 可以在这里找到：

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/pom.xml#](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/pom.xml#)

**注意：** m2e-android 是测试版软件，因此可能会影响功能的更改可能会在版本之间发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T20:31:24.213

对于那些不知道“MAVENIZED”意味着什么的人来说，它将一个简单的项目转换为一个 Maven 项目。

在 Eclipse 中，右键单击您的项目，配置 -> 转换为 Maven 项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:02:02.653

将此作为依赖项添加到您的父 pom.xml 文件中：

```
<dependency>
  <groupId>com.actionbarsherlock</groupId>
  <artifactId>actionbarsherlock</artifactId>
  <type>apklib</type>
  <version>4.2.0</version>
</dependency> 
```

并将以下几行添加到您的项目 pom.xml：

```
<dependency>
    <groupId>com.actionbarsherlock</groupId>
    <artifactId>actionbarsherlock</artifactId>
    <version>4.2.0</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:16:30.863

仅当通过配置文件使用 Eclipse 时，您才能将 actionbarsherlock 依赖项包含为 jar 文件

```
<profile>
  <id>m2e</id>
  <activation>
    <property><name>m2e.version</name></property>
   </activation>
   <dependencies>
    <dependency>
      <groupId>com.actionbarsherlock</groupId>
      <artifactId>actionbarsherlock</artifactId>
      <version>${abs.version}</version>
      <type>jar</type>
    </dependency>
  </dependencies>
</profile> 
```

并且不需要在eclipse中包含整个actionbarsherlock作为项目

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T09:06:09.413

我已经写了关于 mvn + eclipse + action bar sherlock 集成的详细教程[http://v.zasadnyy.com/blog/abs-maven-eclipse-integration/](http://v.zasadnyy.com/blog/abs-maven-eclipse-integration/)

希望它会有所帮助。

# html - css 箭头在 IE 8 中未正确显示

> ID：12043239
> 
> 赞同：0
> 
> 时间：2012-08-20T18:43:29.800
> 
> 标签：html, css, navigation, doctype

我正在使用以下**[JSFiddle](http://jsfiddle.net/zBB3B/4/)中提供的 html 和 css 。**

它在其他浏览器中运行良好，但箭头在 IE 8.0 中显示不正确。 ![以下是我在 IE 8.0 中看到的内容](../Images/6cf09f835f41da6be715e37280f79161.png)

发生这种情况是由于HTML 文档中不存在**缺少的 DOCTYPE 声明。**不幸的是，我无法添加 DOCTYPE 声明，因为它会导致现有应用程序中断很多事情。我只是想知道是否可以在不添加 DOCTYPE 声明的情况下解决此问题。

请帮忙！

**编辑：** 我发现以下 css 代码可以在三角形以怪异模式工作后制作（有点）

```
.wizard-steps .a-after{
BORDER-BOTTOM: transparent 12px dashed;
BORDER-LEFT: transparent 12px dashed;
BORDER-TOP: transparent 12px dashed; 
BORDER-RIGHT: transparent 12px dashed;
line-height: 0;
POSITION: relative; 
WIDTH: 0px; 
DISPLAY: inline-block; 
HEIGHT: 0px; 
VERTICAL-ALIGN: middle; 
} 
```

用它更新了**[一个 JSFiddle](http://jsfiddle.net/zBB3B/6/)**。我无法使前三角形工作，也无法从正常步骤中删除后三角形。

我对CSS不是很精通，有人可以帮忙吗！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:12:39.213

简短的回答：**没有**。

您自己指出了错误：*发生这种情况是由于 HTML 文档中不存在 DOCTYPE 声明。*

在没有说明文档类型的情况下，IE 默认进入 quirks 模式（想想 ie6）。您可以采取一些额外的步骤来**避免进入**怪癖模式。

[这是关于 IE 如何确定显示哪种模式的图表](http://blogs.msdn.com/b/ie/archive/2010/03/02/how-ie8-determines-document-mode.aspx)，[此页面提供有关定义文档兼容性的信息](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)。

然后......你的页面的其余部分将会中断，因为它**需要**怪癖模式。解决方案是重做此代码以*兼容怪癖模式*。（*“我无法添加 DOCTYPE 声明，因为它会导致现有应用程序中断”*）或者......重做整个应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:39:10.723

由于您已经找到了答案，即缺少的 doctype，我只想指出，您会发现其他浏览器问题没有声明 doctype。需要它是有原因的。这只是您发现的第一个问题，如果我是您，我会期待更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:20:28.947

遵循 CSS 工作（即使在 quirk 模式下）并给了我足够接近的结果来实现我正在尝试的结果。

```
/*navigation css*/
.wizard-steps{ position:relative;clear:both;font-family:"Helvetica Neue", Helvetica,   Arial, sans-serif;font-weight:700;margin:20px 10px 0;padding:0}
.wizard-steps .step{position:relative}
.wizard-steps div{float:left;}
.wizard-steps span{display:block;float:left;font-size:10px;text-align:center;width:15px;line-height:15px;color:#ccc;background:#FFF;border:2px solid #CCC;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;margin:2px 5px 0 0}
.wizard-steps label{position:relative;display:block;height:24px;float:left;font-size:11px;line-height:24px;color:#666;background:#ECECEC;text-decoration:none;text-shadow:1px 1px 1px rgba(255,255,255,0.8);padding:0 10px 0 3px}
.wizard-steps .a-before{width:0px;height:0px;border-top:12px solid #ECECEC;border-bottom:12px solid #ECECEC;border-left:12px solid transparent;line-height: 0;POSITION: relative;}
.wizard-steps .a-after{BORDER-BOTTOM: transparent 12px dashed;BORDER-LEFT: transparent 12px dashed;BORDER-TOP: transparent 12px dashed;BORDER-RIGHT: transparent 12px dashed;line-height: 0;POSITION: relative;WIDTH: 0px;DISPLAY: inline-block;HEIGHT: 0px;VERTICAL-ALIGN: middle;}
.wizard-steps .step .a-after{border-left:12px solid #ECECEC}
.wizard-steps .completed-step label{color:#163038;background:#7EBFE6}
.wizard-steps .completed-step .a-before{border-top:12px solid #7EBFE6;border-bottom:12px solid #7EBFE6}
.wizard-steps .completed-step .a-after{border-left:12px solid #7EBFE6}
.wizard-steps .completed-step span{border:2px solid #7EBFE6;color:#163038;text-shadow:none}
.wizard-steps .active-step label{color:#FFF;background:#019BDB;text-shadow:1px 1px 1px rgba(0,0,0,0.8)}
.wizard-steps .active-step .a-before{border-top:12px solid #019BDB;border-bottom:12px solid #019BDB}
.wizard-steps .active-step .a-after{border-left:12px solid #019BDB}
.wizard-steps .active-step span{color:#293E68;-webkit-box-shadow:0 0 2px rgba(0,0,0,0.8);-moz-box-shadow:0 0 2px rgba(0,0,0,0.8);box-shadow:0 0 2px rgba(0,0,0,0.8);text-shadow:none;border:2px solid #A3C1C9}
.wizard-steps .completed-step:hover label,.wizard-steps .active-step:hover label{color:#fff;background:#8F061E;text-shadow:1px 1px 1px rgba(0,0,0,0.8)}
.wizard-steps .completed-step:hover span,.wizard-steps .active-step:hover span{color:#8F061E}
.wizard-steps .completed-step:hover .a-before,.wizard-steps .active-step:hover .a-before{border-top:12px solid #8F061E;border-bottom:12px solid #8F061E}
.wizard-steps .completed-step:hover .a-after,.wizard-steps .active-step:hover .a-after{border-left:12px solid #8F061E} 
```

还更新了**[JS Fiddle](http://jsfiddle.net/zBB3B/7/)**

# ruby-on-rails - 联系表格邮件程序未定义方法错误 Rails

> ID：12043240
> 
> 赞同：0
> 
> 时间：2012-08-20T18:43:40.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

整个周末我都遇到了一些严重的麻烦，试图让这个基本的联系表格正常工作。

实际上，我希望用户能够填写表格，点击发送并将消息直接发送到预定义的电子邮件地址。

我不断得到的错误是：

```
 NoMethodError in Messages#new

  Showing C:/Sites/jobapp_v2/app/views/messages/new.html.erb where line #1 raised:

   undefined method `[]' for nil:NilClass

  Extracted source (around line #1):

  1: <%= form_for @message, :url => contact_path do |f| %>
  2: 
  3:    <div class="field">
  4:      <%= f.label :name %> 
```

我有以下设置：

消息控制器

```
class MessagesController < ApplicationController

def new
   @user = current_user
    @message = Message.new
end

def create
        @message = Message.new(params[:message])

    if  @message.valid?
        NotificationsMailer.new_message(@message).deliver
        redirect_to(root_path, :notice => "Message was successfully sent.")
    else
        flash.now.alert = "Please fill all fields."
    render :new
    end
 end
end 
```

消息模型

```
 class Message < ActiveRecord::Base

   include ActiveModel::Validations
   include ActiveModel::Conversion
   extend ActiveModel::Naming

   attr_accessor :name, :email, :subject, :body

   validates :name, :email, :subject, :body, :presence => true
   validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

   def initialize(attributes = {})
 attributes.each do |name, value|
   send("#{name}=", value)
 end
   end

   def persisted?
  false
   end

  end 
```

路由.rb

```
 JobappV2::Application.routes.draw do
   devise_for :users

   resources :newsletters

   match "contact" => "messages#new", :as => "contact", :via => :get
   match "contact" => "messages#create", :as => "contact", :via => :post

   get "pages/about"

   get "pages/contact"

   get "pages/terms"

   resources :jobs

   resources :users do
   resources :jobs
   end

   root :to => 'jobs#index'

   end 
```

NotificationsMailer.rb

```
 class NotificationsMailer < ActionMailer::Base

   default :from => "advertise@artisanmag.co.uk"
   default :to => "tom.pinchen@artisanmag.co.uk"

   def new_message(message)
     @message = message
     mail(:subject => "Hello")
   end
 end 
```

视图/notification_mailer/new_message.text.erb

```
 Name: <%= @message.name %>

 Email: <%= @message.email %>

 Subject: <%= @message.subject %>

 Body: <%= @message.body %> 
```

视图/消息/new.html.erb

```
 <%= form_for @message, :url => contact_path do |f| %>

<div class="field">
  <%= f.label :name %>
  <%= f.text_field :name %>
</div>

<div class="field">
  <%= f.label :email %>
  <%= f.text_field :email %>
</div>

<div class="field">
  <%= f.label :subject %>
  <%= f.text_field :subject %>
</div>

<div class="field">
  <%= f.label :body %>
  <%= f.text_area :body %>
</div>

<%= f.submit "Send" %>

   <% end %> 
```

我真的无法弄清楚是什么导致了这个未定义的方法错误，所以人们可以提供的任何帮助将不胜感激！提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:58:57.253

你把事情联系起来的方式，你不需要 :url => contact_path

```
<%= form_for @message do |f| %> 
```

会工作得很好。

# c# - 使用 GemBox 3.1 API 在 Excel 中启用宏

> ID：12043241
> 
> 赞同：0
> 
> 时间：2012-08-20T18:43:40.887
> 
> 标签：c#, excel, gembox-spreadsheet

好吧，最近 GemBox.SpreadSheet 3.1 出现了问题。现在程序会写一个excel文件，但是当打开文件时它会尝试打开文件说“Excel发现不可读的内容”然后询问是或否如果你想尝试恢复文档。单击是，然后显示“该文件是无宏文件，但包含启用宏的内容”。

但是，当程序在没有宏的情况下制作不同的文件时，它并没有说它已损坏并且工作正常。

所以我的问题是，如何使用 GemBox API 启用宏内容？或者只是某个地方的编码不好？

编辑：我发现程序保存了错误的扩展名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:17:40.237

我发现为了获得启用宏的内容，文件需要存储在 XLSM 中，而不是 XLSX！

# objective-c - 我可以重构它以不使用方法调用吗？

> ID：12043243
> 
> 赞同：1
> 
> 时间：2012-08-20T18:43:47.610
> 
> 标签：objective-c, cgrect

假设我有这些方法：

```
+(CCSprite *)a {
    return [self shapeFromRect:CGRectMake(0, 224, 224, 288) rotate:0];
}

+(CCSprite *)b {
    return [self shapeFromRect:CGRectMake(0, 224, 224, 288) rotate:0];
}

+(CCSprite *)c {
    return [self shapeFromRect:CGRectMake(0, 100, 50, 50) rotate:0];
}

+(CCSprite *)d {
    return [self shapeFromRect:CGRectMake(0, 100, 50, 50) rotate:90];
} 
```

有冗余，所以我可以像这样重构它：

```
+(CCSprite *)a {
    return [self shapeFromRect:[self abRect] rotate:0];
}

+(CCSprite *)b {
    return [self shapeFromRect:[self abRect] rotate:0];
}

+(CCSprite *)c {
    return [self shapeFromRect:[self cdRect] rotate:0];
}

+(CCSprite *)d {
    return [self shapeFromRect:[self cdRect] rotate:90];
}

+(CGRect)abRect {
    return CGRectMake(0, 224, 224, 288);
}

+(CGRect)cdRect {
    return CGRectMake(0, 100, 50, 50);
} 
```

但我想知道，有没有更有效的方法来做到这一点？

有没有办法可以将这些 CGRects 存储在 typedef 枚举或其他形式的常量中，这样我就不必执行方法调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:03:33.840

```
+ (CCSprite *)sprite:(NSInteger)type
{
    float r = (type == 3)? 90 : 0;
    if (type < 2) {
        return [self shapeFromRect:CGRectMake(0, 224, 224, 288)] rotate:r];
    } else {
        return [self shapeFromRect:CGRectMake(0, 100, 50, 50)] rotate:r];
    }
} 
```

也许类似的东西？

# java - HIbernate 创建数据库表

> ID：12043244
> 
> 赞同：2
> 
> 时间：2012-08-20T18:43:50.993
> 
> 标签：java, hibernate

我正在学习 JPA - Hibernate。

我正在关注这篇[文章](http://uaihebert.com/?p=57) 在 Dog.java 中它被称为`@Table(name = "dog")`. 在`persistence.xml`我有以下

```
<property name="hibernate.hbm2ddl.auto" value="create"/> 
```

这会在数据库中创建表狗吗？我还没有在数据库中创建表 Dog。因此，在生产环境中，这可能很危险。在这种情况下，理想值应该是什么 `hibernate.hbm2ddl.auto`？

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:51:50.707

这在所有意义上都是危险的，您的应用程序用户不应该拥有 DDL 权限（更改表、创建表）您的应用程序用户应该只执行 DML（SELECT、INSERT、UPDATE、DELETE 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:48:44.547

**是的，每次**部署您的应用程序时它都会创建新表。更好地使用：

```
<property name="hibernate.hbm2ddl.auto" value="validate"/> 
```

如果您已经有数据。

以下是*可能的*选项：

*   validate：验证模式，不更改数据库。
*   更新：更新架构。
*   create：创建模式，销毁以前的数据（！）
*   create-drop：在会话结束时删除模式（！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:48:51.490

**不要`<property name="hibernate.hbm2ddl.auto" value="create"/>`在生产**中设置，因为每当你重新启动服务器时，所有的表都会被删除并重新创建。`hibernate feature`如果要从一个数据库迁移到另一个数据库，则可以使用此属性 ( )。

如果要设置，请`<property name="hibernate.hbm2ddl.auto" value="update"/>`在开发中设置（而不是在生产中）。如果您在`pojo classes`（注释）中进行了任何更改，这将更新架构。

还要检查：[Hibernate: hbm2ddl.auto=update in production？](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production)

[Hibernate hbm2ddl.auto 可能的值以及它们的作用？](https://stackoverflow.com/questions/438146/hibernate-question-hbm2ddl-auto-possible-values-and-what-they-do)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T18:49:57.970

在生产环境中将其设置为“无”。

# android - 在android模拟器中自动旋转屏幕

> ID：12043245
> 
> 赞同：0
> 
> 时间：2012-08-20T18:44:02.633
> 
> 标签：android, linux, testing, ipc

有 api 调用`activity.setRequestedOrientation(orientation)`执行“软”旋转，而不是“硬件”旋转。也就是说，它不同于手动按下来`Ctrl+F11/F12`旋转屏幕。

在测试某些应用程序时，由于这种细微的差异，应用程序的行为实际上可能会有所不同。例如，`ConnectBot`当我使用 api 调用来回旋转多次时崩溃。

我的问题：我们如何将主机键事件发送到主机模拟器进程？

更新：我添加了对 的调用`instrumentation.waitForIdleSync();`，但没有帮助。

# c++ - 尝试使用具有未知类型的模板非类型参数

> ID：12043247
> 
> 赞同：2
> 
> 时间：2012-08-20T18:44:21.570
> 
> 标签：c++, templates, c++11, traits, decltype

> **可能重复：**
> [是否可以模拟模板<auto X>？](https://stackoverflow.com/questions/5628121/is-it-possible-to-emulate-templateauto-x)

考虑以下工作代码：

```
#include <iostream>

template<typename T> struct Traits {};

template<typename T, typename A>
struct Traits<void(T::*)(A)>
{
   typedef T Class;
   typedef A Arg;
};

template<typename T, typename U, void(T::*MemFun)(U)>
void Builder()
{
   std::cout <<  typeid(T).name() << std::endl;
   std::cout <<  typeid(U).name() << std::endl;
   std::cout <<  typeid(MemFun).name() << std::endl;
}

template<typename T, T arg>
void Builder()
{
   return Builder<Traits<T>::Class,Traits<T>::Arg,arg>();
}

class Class
{
public:
   void foo(int) { }
};

int main()
{
   Builder<decltype(&Class::foo), &Class::foo>();
} 
```

我想做的是这样的事情来获得相同的结果，而不使用宏。

```
int main()
{
   Builder<&Class::foo>();
} 
```

我似乎无法创建一个模板来获取成员的指针并推断出类型。有什么想法吗？指向成员的指针必须用作模板参数而不是函数参数，因为它用于创建模板函数（未显示）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:39:29.583

无法完成。要拥有非类型模板参数，您必须提供类型。因此，要么将 Builder 限制为仅一种特定类型，要么需要一个额外的参数（列表中的第一个），即第二个参数的类型。现在，如果您愿意不将成员指针用作 constexpr... 那很简单。

```
template <typename T, typename M>
struct Builder {
   M T::*ptr;
   Builder( M T::*ptr ) : ptr(ptr) {}
};
template <typename T, typename M>
Builder<T,M> createBuilder( M T::*ptr ) {
   return Builder<T,M>(ptr);
}
int main() {
   auto bld = createBuilder( &Class::member );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T19:09:45.133

我花了一些时间尝试自己做类似的事情。

我认为不使用`Class::foo`两次函数名称是不可能的。我的推理如下：

*   要获得类型，`foo`我们必须使用`decltype`或`foo`作为模板函数的参数
*   在上述任何一种情况下，`foo`（允许将其用作模板参数）的 constexpr-ness 都丢失了
*   此外，我们不能`foo`在模板类或函数中“复制”，因为它会面临与上述相同的问题
*   结论：我们必须`foo`在外部范围内键入两次

似乎没有“肮脏”的宏技巧就无法逃脱，即使在 C++11 中也是如此……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:56:05.250

不幸的是，没有办法对非类型模板参数的类型进行类型推导。宏实际上是这里唯一的选择。

# algorithm - 从偶数个节点的树中获取森林

> ID：12043252
> 
> 赞同：32
> 
> 时间：2012-08-20T18:44:39.490
> 
> 标签：algorithm, tree

我被困在一个代码挑战中，我想要一个**提示**。

**问题**：给你一个树数据结构（没有循环），并被要求删除尽可能多的“边”（连接），创建具有偶数个节点的更小的树。这个问题总是可以解决的，因为有偶数个节点和连接。

你的任务是计算删除的边缘。

输入：输入的第一行包含两个整数 N 和 M。N 是顶点数，M 是边数。2 <= N <= 100。接下来的 M 行包含两个整数 ui 和 vi，它们指定了树的边缘。（基于 1 的索引）

输出：打印移除的边数。

样本输入

10 9
2 1
3 1
4 3
5 2
6 1
7 2
8 6
9 8
10 8

样本输出：2

解释 : 移除边 (1, 3) 和 (1, 6)，我们可以得到想要的结果。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T16:49:38.523

我使用 BFS 遍历节点。首先，单独维护一个数组来存储子节点的总数+1。因此，您可以在此数组中初始分配值为1的所有叶节点。现在从最后一个节点开始计算每个节点的子节点数。这将以自下而上的方式工作，存储子节点数量的数组将有助于在运行时优化代码。

在获得所有节点的子节点数后获得数组后，只需计算节点数为偶数的节点即可得到答案。注意：我没有在最后一步计算根节点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T00:50:50.317

这是我的解决方案。我没有使用 bfs 树，只是分配了另一个数组来保存每个节点及其子节点的总数。

```
import java.util.Scanner;
import java.util.Arrays;

public class Solution {
        public static void main(String[] args) {
                int tree[];
                int count[];

                Scanner scan = new Scanner(System.in);

                int N = scan.nextInt(); //points
                int M = scan.nextInt();

                tree = new int[N];
                count = new int[N];
                Arrays.fill(count, 1);

                for(int i=0;i<M;i++)
                {
                        int u1 = scan.nextInt();
                    int v1 = scan.nextInt();

                    tree[u1-1] = v1;

                    count[v1-1] += count[u1-1];

                    int root = tree[v1-1];

                    while(root!=0)
                    {
                        count[root-1] += count[u1-1];
                        root = tree[root-1];
                    }
                }

                System.out.println("");

                int counter = -1;
                for(int i=0;i<count.length;i++)
                {
                        if(count[i]%2==0)
                        {
                                counter++;
                        }

                }
                System.out.println(counter);

        }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T21:40:21.827

如果你观察输入，你会发现计算每个节点下的节点数是很容易的。将 (ab) 视为边缘输入，在每种情况下，a 都是孩子，b 是直接父母。输入始终具有自下而上表示的边缘。

所以它本质上是具有偶数计数的节点数（不包括根节点）。我在 Hackerrank 上提交了以下代码，所有测试都通过了。我猜输入中的所有案例都满足规则。

```
def find_edges(count):
    root = max(count)

    count_even = 0

    for cnt in count:
        if cnt % 2 == 0:
            count_even += 1

    if root % 2 == 0:
        count_even -= 1

    return count_even

def count_nodes(edge_list, n, m):
    count = [1 for i in range(0, n)]

    for i in range(m-1,-1,-1):
        count[edge_list[i][1]-1] += count[edge_list[i][0]-1]

return find_edges(count) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-28T04:05:44.113

我知道这已经在这里得到了很多很多时间的回答。我仍然想在这里了解我的解决方案的评论。我试图构建子计数，因为边缘通过输入并且它通过了所有测试用例。

```
namespace Hackerrank
{
    using System;
    using System.Collections.Generic;
    using System.Linq;

    class Program
    {
        static void Main(string[] args)
        {
            var tempArray = Console.ReadLine().Split(' ').Select(x => Convert.ToInt32(x)).ToList();
            int verticeNumber = tempArray[0];
            int edgeNumber = tempArray[1];

            Dictionary<int, int> childCount = new Dictionary<int, int>();

            Dictionary<int, int> parentDict = new Dictionary<int, int>();

            for (int count = 0; count < edgeNumber; count++)
            {
                var nodes = Console.ReadLine().Split(' ').Select(x => Convert.ToInt32(x)).ToList();
                var node1 = nodes[0];
                var node2 = nodes[1];

                if (childCount.ContainsKey(node2))
                    childCount[node2]++;
                else childCount.Add(node2, 1);

                var parent = node2;
                while (parentDict.ContainsKey(parent))
                {
                    var par = parentDict[parent];
                    childCount[par]++;
                    parent = par;
                }

                parentDict[node1] = node2;
            }

            Console.WriteLine(childCount.Count(x => x.Value % 2 == 1) - 1);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T18:53:29.047

我的第一个倾向是从叶节点开始工作，因为你不能切割它们的边缘，因为这会留下单顶点子树。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-22T04:32:28.190

这是我用来成功通过所有测试用例的方法。

1.  将顶点 1 标记为根
2.  从当前根顶点开始，考虑每个孩子。如果孩子及其所有孩子的总和是偶数，那么你可以削减那条边
3.  下降到下一个顶点（根顶点的子节点）并让它成为新的根顶点。重复步骤 2，直到遍历所有节点（深度优先搜索）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-24T07:49:20.683

以下是另一种方法的概要：

1.  找出图中的所有关[节点](https://stackoverflow.com/questions/15873153/explanation-of-algorithm-for-finding-articulation-points-or-cut-vertices-of-a-gr)。
2.  检查每个关节点，看看是否可以去除那里的边缘。
3.  去除合法边缘并寻找更多的关节点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-19T03:13:01.573

解决方案 - 遍历所有边，并计算偶数边的数量

如果我们从树中删除一条边，它会导致两棵树的顶点数为偶数，我们称该边为偶数边

如果我们从树中删除一条边并导致两棵树的顶点数为奇数，我们称该边为奇数边

这是我在 Ruby 中的解决方案

```
num_vertices, num_edges = gets.chomp.split(' ').map { |e| e.to_i }
graph = Graph.new
(1..num_vertices).to_a.each do |vertex|
  graph.add_node_by_val(vertex)
end

num_edges.times do |edge|
  first, second = gets.chomp.split(' ').map { |e| e.to_i }
  graph.add_edge_by_val(first, second, 0, false)
end

even_edges = 0
graph.edges.each do |edge|
  dup = graph.deep_dup
  first_tree = nil
  second_tree = nil
  subject_edge = nil
  dup.edges.each do |e|
    if e.first.value == edge.first.value && e.second.value == edge.second.value
      subject_edge = e
      first_tree = e.first
      second_tree = e.second
    end
  end
  dup.remove_edge(subject_edge)
  if first_tree.size.even? && second_tree.size.even?
    even_edges += 1
  end
end
puts even_edges 
```

注意 -[单击此处](https://github.com/Satnam14/beginning-ruby-problems/tree/master/lib/graph_node)查看 Graph、Node 和 Edge 类的代码

# ruby-on-rails - SimpleCaptcha 和 Formtastic 错误

> ID：12043253
> 
> 赞同：1
> 
> 时间：2012-08-20T18:44:44.653
> 
> 标签：ruby-on-rails, ruby, gem, activeadmin, formtastic

我想为我的应用程序安装 activeadmin gem，但是当我将它写入我的 gemfile 时：

> 宝石“活动管理员”宝石“元搜索”

当rails s，然后我得到错误，如果我从我的gemfile中删除simplecaptcha一切正常，那么simplecaptcha和activeadmins formtastic gems，如何解决它？

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
#gem 'haml'
gem 'haml-rails'

gem 'kaminari'
gem "galetahub-simple_captcha", :require => "simple_captcha"

gem "authlogic"
gem "rails3-generators"

gem 'activeadmin'
gem "meta_search"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

和错误：

```
rails s
=> Booting WEBrick
=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /media/_Projects/Amis/config/environment.rb:5)
Exiting
/home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/galetahub-simple_captcha-0.1.3/lib/simple_captcha/formtastic.rb:2:in `<module:SimpleCaptcha>': uninitialized constant Formtastic::SemanticFormBuilder (NameError)
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/galetahub-simple_captcha-0.1.3/lib/simple_captcha/formtastic.rb:1:in `<top (required)>'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/galetahub-simple_captcha-0.1.3/lib/simple_captcha/engine.rb:19:in `block in <class:Engine>'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `call'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `each'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/finisher.rb:59:in `block in <module:Finisher>'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from /media/_Projects/Amis/config/environment.rb:5:in `<top (required)>'
        from /media/_Projects/Amis/config.ru:4:in `block in <main>'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from /media/_Projects/Amis/config.ru:1:in `new'
        from /media/_Projects/Amis/config.ru:1:in `<main>'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
        from /home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:52:52.487

已经过时了，`galetahub-simple_captcha`因为它使用了一个旧的 formtastic 构建器类 ( `Formtastic::SemanticFormBuilder`)，它在最近的 formtastic 版本中不再存在。您有以下选择：

1.  使用另一个 gem 进行验证
2.  使用旧版本的 formtastic
3.  猴子在初始化程序中修补验证码宝石

我会推荐 1\. 因为 gem 看起来很旧，并且已经有将近一年没有更新了。我不推荐 2\. 因为 activeadmin 也依赖于 formtastic。我不会推荐 3\. 因为你也不知道还有什么坏了。

# xpath - jaxb bindingx.xml“导致目标节点过多”

> ID：12043255
> 
> 赞同：20
> 
> 时间：2012-08-20T18:44:50.287
> 
> 标签：xpath, jaxb, xsd

我试图为每种类型的元素只制作一个适配器，所以我创建了一个 bindings.xml 文件：

```
<jxb:bindings node="//xs:attribute[@type='Id']" 
```

因此，我的意图是针对“Id”类型的每个属性。问题是 xjc 告诉我“目标节点太多（3）”......但这正是我想要的！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-07T17:27:54.957

尝试添加 multiple="true" 属性：

```
<jxb:bindings multiple="true" node="//xs:attribute[@type='Id']" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T12:26:23.253

我最终遇到了类似的问题“目标节点过多（3）”，但是在任何网站上都找不到任何答案...发布我在经过大量跟踪和错误后找到的解决方案...解决的基本思路“目标节点太多（3）”是提供完整的 XPATH 节点，这是您的 XSD 中的多个节点。

下面是我的 XSD：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="document">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="asset">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="attribute" maxOccurs="unbounded" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="string" minOccurs="0">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="value" use="optional"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="date" minOccurs="0">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="value" use="optional"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="array" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="struct"  maxOccurs="unbounded" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="field" maxOccurs="unbounded" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="integer" minOccurs="0">
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="xs:string">
                                              <xs:attribute type="xs:byte" name="value"/>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="assetreference" minOccurs="0">
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="xs:string">
                                              <xs:attribute type="xs:string" name="type"/>
                                              <xs:attribute type="xs:long" name="value"/>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                    <xs:attribute type="xs:string" name="name" use="optional"/>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="integer" minOccurs="0">
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="xs:string">
                                  <xs:attribute type="xs:long" name="value"/>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="file" minOccurs="0">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="name" use="optional"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="integer" minOccurs="0">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:short" name="value"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute type="xs:string" name="name" use="optional"/>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute type="xs:long" name="id"/>
            <xs:attribute type="xs:string" name="type"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

以下是适用于上述 XSD 的 JAXB 绑定文件：

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          version="2.1">
    <bindings schemaLocation= "../assetproduct.xsd" version="1.0">
        <!-- Customise the package name 
        <schemaBindings>
            <package name="com.example.schema"/>
        </schemaBindings> -->

        <!-- rename the value element -->
        <bindings node="//xs:element[@name='document']">
            <bindings node="//xs:element[@name='asset']">
                <bindings node="//xs:element[@name='attribute']">

                    <bindings node="//xs:element[@name='string']">
                        <bindings node=".//xs:attribute[@name='value']">
                            <property name="ValueAttribute"/>
                        </bindings>
                    </bindings>

                    <bindings node="//xs:element[@name='date']">
                        <bindings node=".//xs:attribute[@name='value']">
                            <property name="ValueAttribute"/>
                        </bindings>
                    </bindings>

                    <bindings node="//xs:element[@name='array']">

                        <bindings node=".//xs:element[@name='struct']">
                            <bindings node=".//xs:element[@name='field']">

                                <bindings node=".//xs:element[@name='integer']/xs:complexType">
                                    <bindings node=".//xs:attribute[@name='value']">
                                        <property name="ValueAttribute"/>
                                    </bindings>
                                </bindings>

                                <bindings node=".//xs:element[@name='assetreference']">
                                    <bindings node=".//xs:attribute[@name='value']">
                                        <property name="ValueAttribute"/>
                                    </bindings>
                                </bindings>

                            </bindings>
                        </bindings>

                    </bindings>

                    <bindings node=".//xs:element[@name='array']/xs:complexType/xs:sequence/xs:element[@name='integer']">
                            <bindings node=".//xs:attribute[@name='value']">
                                <property name="ValueAttribute"/>
                            </bindings>
                    </bindings>

                    <bindings node="//xs:element[@name='attribute']/xs:complexType/xs:sequence/xs:element[@name='integer']">
                        <bindings node=".//xs:attribute[@name='value']">
                            <property name="ValueAttribute"/>
                        </bindings>
                    </bindings>
                </bindings>
            </bindings>
          </bindings>
    </bindings>
</bindings> 
```

# git - 带有 rev-list 的完整列表

> ID：12043257
> 
> 赞同：2
> 
> 时间：2012-08-20T18:45:02.537
> 
> 标签：git, command

我有一个 git 存储库的克隆，我使用它来让原子化收集周期指标（KLOC 等）

我每周收集一次这些指标，但偶尔我想回到过去并重新运行指标（如果我添加了新指标，或者系统中的其他内容发生了变化）。

要签出特定时间点，我使用以下命令：

```
git checkout `git rev-list -n 1 --before=2012-8-20 master` --force 
```

但我发现 rev-list 命令没有保持最新状态。在我开始使用此过程的日期之后发生的新修订不会出现在 rev-list 命令中。如果我从头开始克隆，我会看到额外的修订，但我不希望每次都克隆整个存储库。

我在 rev-list 上是否缺少一个选项来让它知道 master 分支的所有最新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:33:03.233

我认为这里的交易是 revlist 不会相对于远程主机自动更新。因此，我需要添加以下命令：

```
git checkout master # to go back onto the master branch
git pull            # to update from the master 
```

现在 rev 列表将是最新的，我可以准确地运行：

```
git checkout `git rev-list -n 1 --before=2012-8-20 master` --force 
```

现在上面的命令可以作为时间机器正常工作，所以我可以计算我的代码指标。

# java - Eclipse 打开项目中包含的文件

> ID：12043259
> 
> 赞同：11
> 
> 时间：2012-08-20T18:45:12.290
> 
> 标签：java, eclipse

如何通过仅指定文件名来打开项目中包含的文件？我正在寻找相当于“Open Type”（Shift-Control-T）但寻找（非Java）文件？换句话说，我知道文件名但不知道确切的路径。IntelliJ 具有此功能 - 转到文件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T18:46:32.397

您可以“打开资源”，快捷方式是`CTRL`++ `SHIFT`。`R`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T20:44:47.583

我需要从 Eclipse 附带的默认资源搜索中获得更多信息。直到不久前，我一直在使用 GotoFile 插件（[1](https://web.archive.org/web/20121013050850/http://www.muermann.org/gotofile)或[2](https://github.com/adelarsq/eclipse-gotofile-plugin-kai)）并取得了很大的成功。

它最好的部分是`fuzzy-search`。因此，例如，如果您必须搜索，`struts-config.xml`您可以输入`strc`或`sr-c`等等。这对我来说是一个巨大的节省时间。默认情况下`Open Resource`，您必须执行以下操作之一（例如，搜索`struts-config.xml`using `Open Resource`）：

1.  按顺序键入字符：`struts`
2.  如果你想在中间省略几个字符来模拟穷人的模糊搜索，你可以输入：`st*config`
3.  某些类型（Java 类）支持驼峰式搜索。因此要搜索 MyClass.java，您可以键入`MC`

然而，使用插件，模糊搜索消除了搜索的繁琐。我发现它非常有用，但不确定它是否仍然适用于 Indigo。我最后一次使用它是 Eclipse Helios。我将报告它在 Indigo SR2 中的运行情况。

**安装**

似乎我无法从更新站点获取 GotoFile 插件。所以我开始使用它并尝试将插件直接复制到 eclipse/plugins 文件夹中。这适用于 64 位和 32 位 Eclipse Indigo SR2，如以下快照所示：

Eclipse 3.7.2 - 32 位（在 Parallels VM 中的 Ubuntu 内）。 ![在此处输入图像描述](../Images/018ea49f376ba2ada8b2c99e0cc533c2.png)

Eclipse 3.7.2 - 64 位（在 OSX Snow Leopard 中）

![在此处输入图像描述](../Images/cd88d7d6ecebb95b1d6f04cb1111d7ba.png)

## 好东西 - 模糊搜索

`user_helper.rb`使用模糊搜索词搜索文件`ushlrb`：

![在此处输入图像描述](../Images/71f60c25dee976b08f307abdd64711fc.png)

# linux - 如何找出linux驱动程序中定义的预处理器

> ID：12043260
> 
> 赞同：1
> 
> 时间：2012-08-20T18:45:13.610
> 
> 标签：linux, kernel, driver

有没有办法在构建时找出您的 linux 驱动程序/内核代码中定义的预处理器？我可以使用文本搜索工具（我确实这样做了），但我继承了一大棵 linux 驱动程序/内核代码树。它太大了，当我在整个代码树中搜索某个预处理器时，我的文本搜索工具会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:07:59.457

gcc 可以在预处理模式下将所有定义的宏转储到标准输出：

```
gcc -E -dM foo.c 
```

这包括编译器预定义的任何宏，这可能有点烦人。无论如何，您应该能够破解您的 Makefile 以包含一个目标，该目标将此信息转储到每个编译单元的文件中。

# jquery - 如何使用 jquery 显示/添加/修改字符串中的文本

> ID：12043261
> 
> 赞同：-1
> 
> 时间：2012-08-20T18:45:13.840
> 
> 标签：jquery, string, text

我有一个标题和一个无序列表

```
<h2> here is some interesting links </h2>
 <ul>
  <li>link 1</li>
  <li>link 2</li>
  <li>link 3</li>
 </ul> 
```

我喜欢的是在标签末尾添加一个 [+]，并隐藏以下内容

改变它的最好方法是什么？

它看起来像：

**关闭**：标题 [+]

**打开**：标题 [-]

*   -link1
*   -链接2
*   -链接3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:49:22.260

这是我的快速即兴创作。它应该工作。

*HTML：*

```
<h2>
    here is some interesting links
    <span class="toggle" data-target="list1">-</span>
</h2>
<ul id="list1">
    <li>link 1</li>
    <li>link 2</li>
    <li>link 3</li>
</ul> 
```

*jQuery：*

```
$(".toggle").on("click", function() {
    var target = $(this).text(function(i, val) {
        return val == "+" ? "-" : "+";
    }).data("target");
    $("#" + target).toggle();
}); 
```

**演示：http:** [//jsfiddle.net/L3jep/](http://jsfiddle.net/L3jep/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:52:24.887

假设您当前的 HTML 没有更改，并且所有修改都通过 jQuery：

```
$('h2').html(
    function(i,h) {
        return h + '<span>[+]</span>';
    }).on('click', 'span', function(){
        var that = $(this);
        that.closest('h2').next('ul').toggle();
        that.text(
            function(){
                return that.text().indexOf('+') !== -1 ? '[-]' : '[+]';
            });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eQhVF/)。

* * *

**编辑**以解释上述代码的这一部分：

```
 return that.text().indexOf('+') !== -1 ? '[-]' : '[+]'; 
```

这是一个三元运算符，它评估条件 ( `return that.text().indexOf('+') !== -1`) 为真或假。后面是`?`“if-true”响应，后面`:`是“if-false”响应。

因此，条件评估是否在从当前元素`+`返回的字符串中找到该字符。`text()`我们将结果与`-1`因为`indexOf()`返回找到的子字符串的索引进行比较。因为子字符串可以在`0`（字符串的开头）找到，所以在找不到字符串时`indexOf()`返回`-1`。因此，如果在元素的文本`+`中找到 （因此返回的结果将*不*等于`-1`），则`span`文本将更改为`[-]`，而如果`+` *找到*，则将文本更改为`[-]`。

该`return`语句只是将更改后的文本返回给`text()`方法。

* * *

**更新**以修改`text()`方法的功能，并利用元素的文本可用作函数中的第二个参数这一事实：

```
$('h2').html(
    function(i,h) {
        return h + '<span>[+]</span>';
    }).on('click', 'span', function(){
        var that = $(this);
        that.closest('h2').next('ul').toggle();
        that.text(
            function(i,t){
                return t.indexOf('+') !== -1 ? '[-]' : '[+]';
            });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eQhVF/1/)。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`html()`](http://api.jquery.com/html/).
*   [`next()`](http://api.jquery.com/next/).
*   [`on()`](http://api.jquery.com/on/).
*   [JavaScript 三元运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)。
*   [`text()`](http://api.jquery.com/text/).
*   [`toggle()`](http://api.jquery.com/toggle/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:52:40.400

假设你有这样的标记

```
<h2> here is some interesting links </h2>
<a  class="aExpand" href="#">+</a>
 <ul class="sub" style="display:none;">
  <li>link 1</li>
  <li>link 2</li>
  <li>link 3</li>
 </ul> 
```

这个脚本会做

```
$(function(){
     $(".aExpand").click(function(e){
       var item=$(this);  
        if(item.next("ul").is(":visible"))
        {         
          item.text("+").next("ul").hide();

        }
        else
        {           
            item.text("-").next("ul").show();
        }

    });    
}); 
```

工作样本：http: [//jsfiddle.net/BqKn5/8/](http://jsfiddle.net/BqKn5/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T01:40:21.940

我的最终代码基于您的帮助并从这里开始：[如何在 JavaScript 中进行字符串替换以将 '9.61' 转换为 '9:61'？](https://stackoverflow.com/questions/2145988/string-replace-in-jquery)

```
<script type="text/javascript">
$(function(){

    $('.bulletlisttohide').hide();

    $(".plus").click( function () {
        $(this).next('.bulletlisttohide').slideToggle(500, function (){
            if ($(this).is(":visible")) { $(this).prev('.plus').html(function(i, val) { return val.replace('[+]', '[-]'); }); }
            else { $(this).prev('.plus').html(function(i, val) { return val.replace('[-]', '[+]'); }); }
        });

        return false;
    });
})
</script> 
```

# ruby-on-rails - 活动管理员自定义过滤器。按天过滤日期 | 月 | Date 属性的年份

> ID：12043265
> 
> 赞同：5
> 
> 时间：2012-08-20T18:45:38.593
> 
> 标签：ruby-on-rails, activeadmin, meta-search

我有一个带有 :birthday 属性的模型，我想按表单中指定的月份过滤掉那些日期（ActiveAdmin 的 DSL :select）。

这是一个仅提取生日月份的简单范围示例。也许可以帮助：

```
scope :birthday_month, where('extract(month from birthday) = ?', Date.today.month) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T21:04:40.537

这是一个解决方案：

在我的 Active Admin 资源 (app/admin/employees.rb) 上，我输入：

```
filter :month, :as => :select, :collection => (1..12) 
```

在我的模型（app/models/employee.rb）上：

```
scope :month_eq, lambda{ |month| where("strftime('%m', birthday) + 0 = ?", month.to_i) }

search_methods :month_eq 
```

这种方法定义了“_eq”范围方法（MetaSearch）并通过`search_methods :month_eq`（MetaSearch）将其变为可用。

**注意：**
如果您不使用 sqlite，也许您会希望使用它`where('extract(month from birthday) = ?', month.to_i)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-29T12:45:05.593

Active Admin 最新版本的解决方案：

```
#app/admin/employees.rb
filter :month, :as => :select, :collection => (1..12)

#app/models/employee.rb
scope :month_eq, ->(month) { where('MONTH(birthday) = ?', month.to_i) } # for MySQL

def self.ransackable_scopes(_auth_object = nil)
  [:month_eq]
end 
```

# ios - 如何检测 UIWebView 的视图布局是否完成

> ID：12043268
> 
> 赞同：1
> 
> 时间：2012-08-20T18:45:47.557
> 
> 标签：ios, pdf, uiwebview

我希望允许用户将缩放因子与文档相关联，并在 UIWebView 中显示该文档时将其用作起点。然而，这似乎`webViewDidFinishLoad:`只表示内存加载的结束，不包括渲染或布局。这是演示该问题的示例代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIWebView *webView = (UIWebView *)self.view;
    webView.delegate = self;
    webView.scalesPageToFit = YES;
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    NSString *urlString = [[NSBundle mainBundle] pathForResource:@"Doc" ofType:@"pdf"];
    NSURL *file = [NSURL fileURLWithPath:urlString];
    [(UIWebView *)self.view loadRequest:[NSURLRequest requestWithURL:file]];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    if (!webView.isLoading) {
        [webView.scrollView setZoomScale:1.5 animated:YES];
    }
} 
```

对 setZoomScale: 的调用没有任何效果（即文件以 1.0 的缩放系数显示），显然是因为它发生在滚动视图处于可以处理它的某种状态之前。如果我将上面的最终方法更改为下面的方法，一切都会如我所愿。

```
- (void)delayedZoomMethod {
    [((UIWebView *)self.view).scrollView setZoomScale:1.5 animated:YES];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [self performSelector:@selector(delayedZoomMethod) withObject:nil afterDelay:1.0];
} 
```

当然，这是一个坏主意，因为 1.0 延迟是任意的，对于绝大多数情况来说可能太长，并且在某些未知的条件下可能太短。

文档说：“*如果您的应用程序想要自定义 Web 视图的滚动行为，它可以访问滚动视图。* ”有谁知道我可以观察到的通知或 Web 视图或其滚动视图中的属性**当**那个陈述成为真的时被告知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:03:52.377

如果您可以控制 html 代码，这可能会有所帮助。我已经能够通过以下方式让 html 事件触发 objC 方法。

html 事件触发 javascript 将字符串写入 window.location uiwebview 然后使用 uiwebviewdelegate 通过此函数 webView:shouldStartLoadWithRequest:navigationType 接收字符串：

这有点骇人听闻。

但是我认为没有办法知道web视图已经完成渲染，除非你写了html页面并且可以在页面末尾放入一个js函数来执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:11:51.500

如果您使用 UIWebView 预览 PDF 文件，那么它可能不是最好的方法。有一个用于此目的的 QLPreViewController（来自 iOS 4.0）。Quick Look 预览控制器可以显示以下项目的预览：

*   iWork 文档
*   Microsoft Office 文档（Office '97 和更高版本）
*   富文本格式 (RTF) 文档
*   PDF 文件
*   图片
*   统一类型标识符 (UTI) 符合 public.text 类型的文本文件（请参阅统一类型标识符参考）
*   逗号分隔值 (csv) 文件

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T10:06:18.080

> 如果我将上面的最终方法更改为下面的方法，一切都会如我所愿。
> 
> 当然，这是一个坏主意，因为 1.0 延迟是任意的，对于绝大多数情况来说可能太长，并且在某些未知的条件下可能太短。
> 
> 文档说：“如果您的应用程序想要自定义 Web 视图的滚动行为，它可以访问滚动视图。”

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    if (!webView.isLoading) //WEBDIDFINISHLOAD? {
        [webView.scrollView setZoomScale:1.5 animated:YES];
    }
} 
```

看，didFinishLoadMethod 是由来自 NSURLConnection 的异步通知调用的，它不一定在主线程中（因为您的 UI 更新不起作用）

performSelector..after 延迟方法很好。延迟甚至没有任何意义，您只是跳到主线程进行 UI 更新并允许 NSURLConnection 通知完成。

如果你说 afterDelay:0.0 可能没关系

这是 iOS 和 OSX 中的常见情况，您必须弄清楚哪些线程能够更新 UI、GCD、NSOperationQueues 和创建线程上的后台 runLoops 都使这变得复杂。

您找到了解决方案，但您需要知道它的含义。在 mainThread 上调用 performSelector，设置一个短暂的延迟并对其进行修复。

# html - 字体平滑：抗锯齿对比。变换：透视（0）；

> ID：12043271
> 
> 赞同：2
> 
> 时间：2012-08-20T18:46:02.603
> 
> 标签：html, css, safari, webkit

我正在查看我正在开发并且他们正在使用的网站的 CSS

```
-webkit-transform: perspective(0) 
```

在文本上，这使它的外观与

```
-webkit-font-smoothing: antialiased 
```

我创建了一个[示例](http://jsfiddle.net/pxqEc/6/)。

网站上没有转换，所以我认为这纯粹是为了更好的外观。

我从未见过这种黑客行为，也无法在网上找到任何提及它的内容。是否有任何理由使用它来代替字体平滑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:17:47.727

他们使用的 hack 触发了硬件加速模式。这具有将亚像素抗锯齿更改为标准抗锯齿的副作用。

这种行为的原因是亚像素抗锯齿对文本的背景进行了假设。当文本被渲染到硬件层时，这些假设不再安全，并且文本使用标准抗锯齿渲染以避免潜在的伪影。

# android - 在 Java 中重新格式化字符串

> ID：12043274
> 
> 赞同：2
> 
> 时间：2012-08-20T18:46:17.547
> 
> 标签：android, string, text, replace, split

对于我的应用程序，我创建了一个 QR 码，然后获取该位图并将文本添加到位图中，但是我需要文本不要延伸得比位图更长。所以我想要做的是通过取 25 个字符创建一个文本数组，然后在该 25 个字符部分中找到 (" ") 的最后一个索引。在那个空间，我希望能够用 \n 替换那个空间来开始一个新行。

所以计划是如果我有一个看起来像“ `Hello this is my name and I am longer than 25 charters and I have lots of spaces so that this example will work well.`”的字符串

我想让它出来

```
Hello this is my name and
I am longer than 25 
charters and I have lots 
of spaces so that this 
example will work well. 
```

为了做到这一点，我数了 25 个字符，然后回到最讨厌的空间，此时我按 Enter，我希望我的应用程序为我执行此操作。

我的英语不是很好，所以如果有什么不明白的地方告诉我，我会尽力解释。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:58:14.120

我尚未对此进行测试，但您可以尝试并根据需要进行调整

```
String fullText = "your text here";
String withBreaks = "";
while( fullText.length() > 25 ){
    String line  = fullText.substring(0,24);
    int breakPoint = line.lastIndexOf( " ");
    withBreaks += fullText.substring(0,breakPoint ) + "\n";
    fullText = fullText.substring( breakPoint );
withBreaks += fullText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:20:25.787

char [] 方式（更像 C）：

```
 public static String reduceLength(String s, int len){
    char [] c = s.toCharArray();
    int i=len, j=0, k;
    while(true){
     for(k=j; k<=i; k++){
         if (k >= s.length()) return new String(c);
         if (c[k] == ' ') j=k;
     }
     c[j] = '\n';
     i= j+ len;
    }
} 
```

这不安全，只是我拼凑的东西。

# java - NetBeans 平台查找和 CardLayout

> ID：12043279
> 
> 赞同：2
> 
> 时间：2012-08-20T18:46:31.283
> 
> 标签：java, swing, lookup, netbeans-platform

我在同一个模块中有 3 个类：

1.  MenuAPI（接口）
2.  菜单JPanel (JPanel)
3.  演示（JPanel）

我正在尝试使用 NetBeans 平台查找在 MenuJPanel 上使用 CardLayout 在面板之间切换。由于某种原因，仅打印 System.out 文本，但未显示/切换卡片。以下只是一个简短的代码示例（我在原始代码中正确创建并定义了 CardLayout。）：

```
 public interface MenuAPI {

        public void showPanel1();

        public void showPanel2();
    }

    @ServiceProvider(service = MenuAPI.class)
    public class MenuJPanel extends javax.swing.JPanel implements MenuAPI {

        private void displayPanel(String s) {
            CardLayout cardLayout = (CardLayout) this.getLayout();
            cardLayout.show(this, s);
        }

        @Override
        public void showPanel1() {
            System.out.println("Panel1");
            displayPanel("panel1");
        }

        @Override
        public void showPanel2() {
            System.out.println("Panel2");
            displayPanel("panel2");
        }
    }

    public class Demo extends javax.swing.JPanel{

//This is just a button with an Event Listener
        private void btnShowPanel1ActionPerformed(java.awt.event.ActionEvent evt) {
            MenuAPI menuAPI = Lookup.getDefault().lookup(MenuAPI.class);
            menuAPI.showPanel1();
        }
} 
```

# visual-studio-2010 - 如果所有项目都指向同一个输出文件夹，“复制本地”是否重要？

> ID：12043281
> 
> 赞同：1
> 
> 时间：2012-08-20T18:46:34.937
> 
> 标签：visual-studio-2010, visual-studio, msbuild

我有大约 50 个项目的解决方案。

我将大部分项目（非测试项目）设置为输出到单个文件夹。

我听说“复制本地”可以减慢构建时间（对于项目引用），因为它必须将文件复制到它被引用的任何地方。

但是，如果每个项目都复制到同一个位置，那么 Visual Studio 是否足够聪明，可以看到文件已经存在并且不再复制它？

所以，这里有一个例子：

```
SolutionA
   |
   +---ProjectA (Output set to C:\MyProj)
   |
   +---ProjectB (Output set to C:\MyProj)
   |        References ProjectA
   |
   +---ProjectC (Output set to C:\MyProj)
   |        References ProjectB
   |
   +---ProjectD (Output set to C:\MyProj)
            References ProjectA 
```

在正常的解决方案中，本地复制将控制对每个项目的 bin\Debug 文件夹的引用的副本。

但是我已经更新了项目属性的“输出”部分，以便它们都放到 C:\MyProj 而不是 bin\Debug。

**如果我没有将 Copy Local 设置为 false 进行引用，ProjectA.dll 会被复制到 C:\MyProj 四次吗？还是 Visual Studio 足够聪明，只做一次？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:16:31.477

我认为您要问的是“将文件复制到自身上是否需要任何时间？” 如您所料，事实并非如此。您可以通过在 Microsoft.Build.Tasks 程序集中使用 Reflector 或 ILSpy 看到这一点，Copy 类执行复制。它的 DoCopyIfNecessary() 方法包含这行代码：

```
 if (string.Compare(sourceFileState.Name, destinationFileState.Name, StringComparison.OrdinalIgnoreCase) != 0)
    {
        flag = this.DoCopyWithRetries(sourceFileState, destinationFileState, copyFile);
    } 
```

或者换句话说，如果源文件和目标文件相同，它会跳过副本。必然如此， File.Copy() 不会高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:56:31.423

~~将本地副本复制到 bin 目录。通常 Visual Studio 会在 Clean 命令上清空该目录。如果您不设置“复制本地”，则可能会冒着将所有引用都放在 bin 文件夹中的风险。~~

~~我想你可以用另一种方式将它们复制到 bin 文件夹中；但是如果您曾经运行过 Clean...~~

据我所知，VS 不够聪明，无法看到每个项目都有相同的 bin 目录，所以它会复制四次（尽管测试和验证）。在上述情况下，您可能只有一个带有 Copy Local 的项目并避免这种情况。但是，您至少需要一个 Copy Local ，否则您将遇到 bin 目录没有该文件的情况。

# php - PHP数组输出错误

> ID：12043282
> 
> 赞同：0
> 
> 时间：2012-08-20T18:46:40.757
> 
> 标签：php, html

当我提交表单数据时，我在 PHP 代码的第 13 行 (array_push($order,$add_order);) 收到此错误：“警告：为 foreach() 提供的参数无效...”

让这个 PHP 代码工作的最佳方法是什么？

这是**当前的电子邮件输出**（除了姓名和电话号码字段外，似乎没有正确发送数据）：

```
Name: Alex
Phone: 5104545778

Item: Array
Quantity:
Add:
Message: 
```

**PHP：**

```
<?php

if(isset($_POST['submit'])) {
$to = "test@mywebsite.com"; 
$subject = "New Order";
$name_field = $_POST['name'];
$email_field = $_POST['email'];

$order = array();
foreach($_POST['item'] as $item => $name) {
    if ($_POST['quantity_'.$name] > 0) {
        $add_order = array('pretty'=>$_POST['pretty-name_'.$name],'qty'=>$_POST['quantity_'.$name],'message'=>$_POST['message_'.$name]);
        array_push($order,$add_order);
    }
}

$body = "From: $name_field\nE-Mail: $email_field\n";

$body .= "Their Order:\n";
foreach ($order as $item){
    $body .= "--".$item['qty']."x ".$item['pretty']."\n
    Extra: ".$item['message']."\n\n";
}

echo "Data has been submitted to $to!";
mail($to, $subject, $body);
}

?> 
```

**HTML：**

```
<form method="POST" action="neworder.php">

<div class ="item_left">
<img src="images/mexicantortas.jpg" border="2" width="200px" height="150px"><br>
Mexican Torta - $8.50<input name="item[]" type="hidden" value="torta"/>
<input name="pretty-name_torta" type="hidden" value="Mexican Torta"/><br>
How Many? <input name="quantity_torta" type="text" /><br>
<input name="message_torta" type="text" value="Enter special order instructions here..." />
</div><!-- ITEM_LEFT -->
<br />

<div class ="item_center">
<img src="images/fishsandwich.jpg" border="2" width="200px" height="150px"><br>
Fish Sandwich - $8.50<input name="item[]" type="hidden" value="fish"/>
<input name="pretty-name_fish" type="hidden" value="Fish Sandwhich"/><br>
How Many? <input name="quantity_fish" type="text" /><br>
<input name="message_fish" type="text" value="Enter special order instructions here..." />
</div><!-- ITEM_CENTER -->
<br />

<div class ="item_right">
<img src="images/hamburgers.jpg" border="2" width="200px" height="150px"><br>
Hamburger w/ Fries - $7.00<input name="item[]" type="hidden" value="hamburger"/>
<input name="pretty-name_hamburger" type="hidden" value="Hamburger"/><br>
How Many? <input name="quantity_hamburger" type="text" /><br>
<input name="message_hamburger" type="text" value="Enter special order instructions here..." />
</div><!-- ITEM_RIGHT -->
<br />

<div class="horizontal_form">
<div class="form">
<h2>Place Your Order Now: <font size="3"><font color="#037B41">Fill in the form below,    and we'll call you when your food is ready to be picked up...</font></font></h2>
<p class="name">
<input type="text" name="name" id="name" style="text-align:center;" onClick="this.value='';" value="Enter your name"/>
</p>
<p class="phone">  
<input type="text" name="phone" id="phone" style="text-align:center;" onClick="this.value='';" value="Enter your phone #"/>
</p>
<p class="submit">
<input type="submit" value="Place Order" name="submit"/>
</p>
</div><!-- FORM -->
</div><!-- HORIZONTAL_FORM -->

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:48:46.373

如果`item`在任何地方都没有值，则不会将其发布到接收页面。

用于`isset`检查值是否存在并`is_array`检查它是否为数组。

# java - 泽西路径正则表达式导致方法不允许用于 PUT

> ID：12043284
> 
> 赞同：1
> 
> 时间：2012-08-20T18:46:46.170
> 
> 标签：java, rest, jersey

我正在测试泽西岛，但我似乎无法弄清楚为什么`405 Method Not Allowed`我打电话时会得到一个`PUT`：

```
@Singleton @Path("images")
public class ImageResource {
    private static final String IMAGE_ID_PATH_PARAM = "{imageId : [A-Za-z0-9_\\-]+}";
    private static final String EXTENSION_PATH_PARAM = "{extension : (\\.[A-Za-z]+)?}";

    @GET @Path(IMAGE_ID_PATH_PARAM + EXTENSION_PATH_PARAM)
    @Produces("image/*")
    public Response getImage(@PathParam("imageId") String imageId,
        @PathParam("extension") String extension, @QueryParam("mods") String mods) {
        ...
    }

    @PUT @Path(IMAGE_ID_PATH_PARAM)
    @Consumes("image/*")
    public Response putImage(@PathParam("imageId") String imageId, File image) {
        ...
    }
} 
```

`PUT`仅当我将`@GET`路径设置为`@Path(IMAGE_ID_PATH_PARAM)`. 当我添加扩展部分时，我得到一个`405`状态码。`GET`似乎在这两种情况下都有效。这是失败的输出`PUT`：

```
$ curl -v --header "Content-Type: image/jpeg" --upload-file /Users/andy/Desktop/test.jpg http://localhost:9090/images/abcde
* About to connect() to localhost port 9090 (#0)
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 9090 (#0)
> PUT /images/abcde HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:9090
> Accept: */*
> Content-Type: image/jpeg
> Content-Length: 48198
> Expect: 100-continue
> 
< HTTP/1.1 100 Continue
< HTTP/1.1 405 Method Not Allowed
< Content-Type: text/html; charset=iso-8859-1
< Date: Mon, 20 Aug 2012 18:35:59 GMT
< Allow: GET,OPTIONS,HEAD
< Transfer-Encoding: chunked 
```

我也尝试过没有`@Produces`and`@Consumes`注释的测试，它也没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:48:05.687

让我们看看发送请求时会发生什么。

## 情况一：没有延期

您的方法如下所示：

```
 @GET @Path(IMAGE_ID_PATH_PARAM)
    @Produces("image/*")
    public Response getImage(@PathParam("imageId") String imageId,
        @PathParam("extension") String extension, @QueryParam("mods") String mods) {
        ...
    }

    @PUT @Path(IMAGE_ID_PATH_PARAM)
    @Consumes("image/*")
    public Response putImage(@PathParam("imageId") String imageId, File image) {
        ...
    } 
```

当您发送以下请求时：

`PUT http://localhost:9090/images/abcde`

首先，Jersey 查找具有相关 URI 的资源： `http://localhost:9090/images/abcde`

找到资源后，它会检查可以使用哪些方法来访问它。在这种情况下，您有一个资源，其路径由`IMAGE_ID_PATH_PARAM`. 这个资源可以被一个`GET`或多个`PUT`请求访问。就像您在注释中指定的一样。

## 情况2：扩展添加到`getImage`

你的方法现在看起来像这样：

```
@GET @Path(IMAGE_ID_PATH_PARAM + EXTENSION_PATH_PARAM)
@Produces("image/*")
public Response getImage(@PathParam("imageId") String imageId,
    @PathParam("extension") String extension, @QueryParam("mods") String mods) {
    ...
}

@PUT @Path(IMAGE_ID_PATH_PARAM)
@Consumes("image/*")
public Response putImage(@PathParam("imageId") String imageId, File image) {
    ...
} 
```

同样，您发送相同的请求： `PUT http://localhost:9090/images/abcde`

再一次，Jersey 找到了与 URL 匹配的第一个资源。资源由您的`getImage`方法表示，就像第一次一样。这一次，`@GET`注释与您的请求不匹配。和以前一样，Jersey 会尝试为资源找到另一种可用的方法，以匹配您的请求。

但是，这一次没有找到这样的方法，所以它返回 405。

发生这种情况的原因是方法`getImage`和`putImage`现在代表不同的资源。如果你仔细看，路径可以这样读取（为了清楚起见，我将省略正则表达式）：

`@Path({imageId}{extension})`为了`getImage`

和

`@Path({imageId})`为了`putImage`

虽然考虑到正则表达式，这两条路径可以成为同一事物，但 Jersey 仍将它们视为单独资源的标识符。

如果您查看由 Jersey 生成的 WADL（如果您不熟悉标准，请随意查看[此处](http://www.w3.org/Submission/wadl/)`http://localhost:9090/application.wadl`）文件（它应该在 中可用），您会注意到这正是正在发生的事情。

```
<application xmlns="http://research.sun.com/wadl/2006/10">
<resources base="http://localhost:9090/">
<resource path="images">
  <resource path="{imageId : [A-Za-z0-9_\-]+}">
    <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="imageId" style="template" type="xs:string"/>
    <method id="putImage" name="PUT">
      <request>
        <representation mediaType="image/*"/>
      </request>
      <response>
        <representation mediaType="*/*"/>
      </response>
    </method>
  </resource>
  <resource path="{imageId : [A-Za-z0-9_\-]+}{extension : (\.[A-Za-z]+)?}">
    <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="extension" style="template" type="xs:string"/>
    <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="imageId" style="template" type="xs:string"/>
    <method id="getImage" name="GET">
      <request>
        <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="mods" style="query" type="xs:string"/>
      </request>
      <response>
        <representation mediaType="image/*"/>
      </response>
    </method>
  </resource>
</resource>
</resources>
</application> 
```

请注意如何`images`有两个独立的子资源，每个子资源都有一个方法。

## 解决方案

将`EXTENSION_PATH_PARAM`段添加到`putImage`的`@Path`注解会导致这两个方法再次映射到单个资源，因此问题消失了。由于正则表达式使这部分是可选的，因此您可以随意省略它并假装它不存在。

在生成的 WADL 中可以清楚地看到差异。

```
<application xmlns="http://research.sun.com/wadl/2006/10">
  <resources base="http://localhost:9090/">
    <resource path="images">
      <resource path="{imageId : [A-Za-z0-9_\-]+}{extension : (\.[A-Za-z]+)?}">
        <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="extension" style="template" type="xs:string"/>
        <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="imageId" style="template" type="xs:string"/>
        <method id="putImage" name="PUT">
          <request>
            <representation mediaType="image/*"/>
          </request>
          <response>
            <representation mediaType="*/*"/>
          </response>
        </method>
        <method id="getImage" name="GET">
         <request>
           <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="mods" style="query" type="xs:string"/>
         </request>
         <response>
           <representation mediaType="image/*"/>
         </response>
        </method>
      </resource>
    </resource>
  </resources>
</application> 
```

在这种情况下，`images`只有一个子资源，而子资源又具有两种可用的方法。

就个人而言，我发现 WADL 的自动生成是 Jersey 的一个很棒的功能。这是一种查看资源方法发生情况的好方法，无需花费太多时间使用 curl 或其他 REST 客户端。

# mysql - 插入/合并到 MySQL 视图

> ID：12043288
> 
> 赞同：0
> 
> 时间：2012-08-20T18:47:05.707
> 
> 标签：mysql, view, upsert

*   我知道 MySQL 视图可以是可插入/可更新的[链接](http://dev.mysql.com/doc/refman/5.0/en/view-updatability.html)
*   我也知道您可以通过重复语法[链接上的插入在 MySQL 中执行合并/更新插入](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

**但**我的问题是：你能在 MySQL 的视图上执行 upsert/merge（重复插入）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T18:56:02.107

我怀疑您是否可以插入/合并到视图中，因为它恰好只是内存中可以跨越多个表的特定数据集的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T04:31:40.130

在 MySQL 中，视图不仅可查询而且可更新。这意味着您可以使用 INSERT 或 UPDATE 语句通过可更新视图插入或更新基础表的行。但是，要创建可更新视图，定义视图的 SELECT 语句不得包含以下任何元素：

聚合函数，如 MIN、MAX、SUM、AVG、COUNT 等 DISTINCT GROUP BY 子句 [阅读更多](http://www.jayakumar.xyz/2015/11/creating-mysql-updatable-views.html)

# magento - 如何在 Magento 数据库中启用 exception.log 和 system.log？

> ID：12043291
> 
> 赞同：8
> 
> 时间：2012-08-20T18:47:13.723
> 
> 标签：magento, exception, logging

在 Magento 中，我如何在数据库级别启用`exception.log`和启用？`system.log`

我知道我可以通过管理后端来做到这一点（**我不想这样做**）。

什么值需要改变？我认为`dev/log/active`需要将其设置为`1`in `core_config_data`，但我这样做并没有启用日志记录。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T19:26:17.357

你的解决方案是对的。这是在数据库中启用它的正确位置。如果它不适合您，请尝试清除缓存。如果仍然无法正常工作，请尝试`select * from core_config_data where path = "dev/log/active";`检查是否没有针对覆盖您设置的特定范围禁用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-23T14:48:36.687

使用以下查询

```
INSERT INTO `yourmagentodbname`.`core_config_data` (`scope`, `scope_id`, `path`, `value`) VALUES ( 'default', '0', 'dev/log/active', '1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T16:48:26.983

检查文件夹权限。您需要为运行 apache 的用户授予权限。

在我的情况下，只是子目录“log”不属于正在运行的 apache 用户。

**我的 apache 用户是 bitnami:daemon ...**

所以对我来说，解决方案是：

```
sudo chmod -R 777 var/
sudo chown -R bitnami:daemon var/ 
```

# php - 两个循环的 JS 函数相互冲突

> ID：12043292
> 
> 赞同：0
> 
> 时间：2012-08-20T18:47:14.690
> 
> 标签：php, javascript, jquery, loops

所以我有这两组 JavaScript 函数，它们不断地连接我的服务器，如果数据库已经更新，这些函数会做一些事情。两组功能彼此无关；它们唯一的关系是它们同时发生。然而，由于某种原因，一个功能与另一个功能发生冲突。这是我的代码的样子：

```
<!DOCTYPE html>
<html>
<head>
<title>Stage</title>
<link href="stage.css" rel="stylesheet" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script type="text/javascript">

 ///////////////////// FUNCTION SET 1 

function loadThumbnail(){
  $.ajax({
    url: 'process_stage_show.php',
    data: 'value=<?php echo $_GET["session"]; ?>',       
    dataType: 'json',                           
    success: function(data){
      var idCurrent = data[0];
      var idVideo = data[1];
      var idSession = data[2];
      var state = data[4];
      if (state ==  1) {
        $('#tv').html('<img src="http://i.ytimg.com/vi/'+ idVideo +'/hqdefault.jpg" width ="800" height="533"/>');
        setTimeout(function(){timedCount2(idCurrent);},1000);
      }
      else {
        setTimeout(function(){timedCount2(idCurrent);},1000);
      }
    }
  });
}

function timedCount2(idCurrent){
  $.ajax({                                      
    url: 'process_stage_show.php',                
    data: 'value=<?php echo $_GET["session"]; ?>',       
    dataType: 'json',
    success: function(data) {  
      var idNew = data[0];  
      var idVideo = data[1];
      var idSession = data[2];          
      var state = data[4];          
      if (!(idCurrent == idNew)) {
        window.location.reload();
      }
      else{
        setTimeout(function(){timedCount2(idCurrent);},1000);
      }
    } 
  });
}

 ///////////////////// FUNCTION SET 2 

function loadStage(){
  $.ajax({
    url: 'process_stage_play.php',            
    data: 'value=<?php echo $_GET["session"]; ?>',       
    dataType: 'json',                               
    success: function(data){                    
      var idVideo = data[0];        
      var idCurrent = data[1];
      var idSession = data[2];
      var state = data[4];
      if (state ==  2) {
        //alert("State equal to 2\. Do nothing.");
        setTimeout(function(){timedCount(idCurrent);},1000);
      }
      else if (state == 1) {
        //alert("State equal to 1\. Open window.");
        popupwindow = window.open ("http://www.youtube.com/watch_popup?v="+ idVideo);
        setTimeout(function(){timedCount(idCurrent);},1000);
      }
      else if (state == 0) {
        //alert("State equal to 0\. Close window.");
        popupwindow.close();
        setTimeout(function(){timedCount(idCurrent);},1000);
      }
    }
  });
}

function timedCount(idCurrent){
  $.ajax({                                      
    url: 'process_stage_play.php'             
    data: 'value=<?php echo $_GET["session"]; ?>',
    dataType: 'json',                               
    success: function(data) {  
      var idVideo = data[0];  
      var idNew = data[1];
      var idSession = data[2];          
      var state = data[4];          
      if (idCurrent == idNew) {
        setTimeout(function(){timedCount(idCurrent);},1000);
      }
      else{
        //alert("ID has changed. Re-load stage.");
        loadStage();
      }
    } 
  });
}

</script>
</head>

<body onload="loadStage(); loadThumbnail();">

<div id="tv"></div>

</body>
</html> 
```

我不想详细介绍这些函数集的作用（除非要求），因为我不希望这篇文章真的很长。但问题是这两组函数本身都可以正常工作，但由于某种原因，如果你同时运行它们，第二个函数组一直说当 state 等于 0 时没有定义 popupwindow。

这没有任何意义！为什么第一个函数集会导致这种情况发生？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:51:04.630

好吧，第一个函数有时会做的一件事是重新加载窗口。一旦发生这种情况，全局变量“popupwindow”就会消失。

让弹出窗口中的代码定期检查其“打开器”窗口以查看它是否应该自行关闭可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:51:51.377

我是否正确理解这些功能都打开一个弹出窗口？如果是这样，某些浏览器确实每个网页只打开一个弹出窗口，如果打开另一个弹出窗口，旧的将用新的 url 刷新。

因此，这些功能之一可能会丢失“它的”弹出窗口来解释您的问题。

# file - 如何循环文件，提取矩阵芯片，然后将所有芯片编译成一个新矩阵

> ID：12043293
> 
> 赞同：0
> 
> 时间：2012-08-20T18:47:16.340
> 
> 标签：file, matlab, matrix, indexing, sequence

假设我有文件：

```
famcal.2012000000000000000000625502.stellar.blu
famcal.2012000000000000000000625502.stellar.grn
famcal.2012000000000000000000625502.stellar.red
famcal.2012000000000000000000625502.stellar.nir

famcal.2012000000000000000000625503.stellar.blu
famcal.2012000000000000000000625503.stellar.grn
famcal.2012000000000000000000625503.stellar.red
famcal.2012000000000000000000625503.stellar.nir

famcal.2012000000000000000000625504.stellar.blu
famcal.2012000000000000000000625504.stellar.grn
famcal.2012000000000000000000625504.stellar.red
famcal.2012000000000000000000625504.stellar.nir

famcal.2012000000000000000000625505.stellar.blu
famcal.2012000000000000000000625505.stellar.grn
famcal.2012000000000000000000625505.stellar.red
famcal.2012000000000000000000625505.stellar.nir

famcal.2012000000000000000000625506.stellar.blu
famcal.2012000000000000000000625506.stellar.grn
famcal.2012000000000000000000625506.stellar.red
famcal.2012000000000000000000625506.stellar.nir

famcal.2012000000000000000000625507.stellar.blu
famcal.2012000000000000000000625507.stellar.grn
famcal.2012000000000000000000625507.stellar.red
famcal.2012000000000000000000625507.stellar.nir 
```

我希望能够按此顺序使用所有这些文件，以生成一个新矩阵。

所以本质上，一段代码可以通过以下顺序：

```
625502
625503
625504
625505
625506
625507 
```

并且对于这些数字集合中的每一个，请执行以下顺序：

```
blu
grn
red
nir 
```

我目前正在使用从每个文件中提取小矩阵的代码，然后将它们保存到新矩阵中的新位置。例如：

```
a = 2000;
star_block = repmat(a,[41,78]); %populates matrix with 2000 
```

这将创建一个填充 2000 的矩阵。我想用上面文件的输出替换这个矩阵的某些部分。

```
star_block(2:10,4:12) = 625502 blu
star_block(12:20,4:12) = 625502 grn
star_block(22:30,4:12) = 625502 red
star_block(32:40,4:12) = 625502 nir

star_block(2:10,17:25) = 625503 blu
star_block(12:20,17:25) = 625503 grn
star_block(22:30,17:25) = 625503 red
star_block(32:40,17:25) = 625503 nir

star_block(2:10,30:38) = 625504 blu
star_block(12:20,30:38) = 625504 grn
star_block(22:30,30:38) = 625504 red
star_block(32:40,30:38) = 625504 nir

star_block(2:10,43:51) = 625505 blu
star_block(12:20,43:51) = 625505 grn
star_block(22:30,43:51) = 625505 red
star_block(32:40,43:51) = 625505 nir

star_block(2:10,56:64) = 625506 blu
star_block(12:20,56:64) = 625506 grn
star_block(22:30,56:64) = 625506 red
star_block(32:40,56:64) = 625506 nir

star_block(2:10,69:77) = 625507 blu
star_block(12:20,69:77) = 625507 grn
star_block(22:30,69:77) = 625507 red
star_block(32:40,69:77) = 625507 nir 
```

**编辑：**

```
band_files = dir([star_path '/*.blu']);
for i=1:length(band_files)
    blue01 = band_files(1).name; 
    green01 = strrep(blue01, 'blu', 'grn');
    red01 = strrep(blue01, 'blu', 'red');
    nir01 = strrep(blue01, 'blu', 'nir');

    blue02 = band_files(2).name; 
    green02 = strrep(blue02, 'blu', 'grn');
    red02 = strrep(blue02, 'blu', 'red');
    nir02 = strrep(blue02, 'blu', 'nir');

    blue03 = band_files(3).name; 
    green03 = strrep(blue03, 'blu', 'grn');
    red03 = strrep(blue03, 'blu', 'red');
    nir03 = strrep(blue03, 'blu', 'nir');

    blue04 = band_files(4).name; 
    green04 = strrep(blue04, 'blu', 'grn');
    red04 = strrep(blue04, 'blu', 'red');
    nir04 = strrep(blue04, 'blu', 'nir');

    blue05 = band_files(5).name; 
    green05 = strrep(blue05, 'blu', 'grn');
    red05 = strrep(blue05, 'blu', 'red');
    nir05 = strrep(blue05, 'blu', 'nir');

    blue06 = band_files(6).name; 
    green06 = strrep(blue06, 'blu', 'grn');
    red06 = strrep(blue06, 'blu', 'red');
    nir06 = strrep(blue06, 'blu', 'nir'); 
end 

blue1 = [star_path '\' blue01];
green1 = [star_path '\' green01];
nir1 = [star_path '\' nir01];
red1 = [star_path '\' red01];

%blue
fid=fopen(blue1,'rb'); % opens the file for reading
fseek (fid, 800, -1);% Skip past header, which is 800 bytes long
blue = fread(fid, [3552,6536], '*uint16', 'ieee-be');%reads in and converts .RAS file
blue_chip = extract_region_fwd(blue);
star_block(2:10,4:12) = blue_chip;%inserts star chip into main matrix

%green
fid=fopen(green1,'rb'); % opens the file for reading
fseek (fid, 800, -1);% Skip past header, which is 800 bytes long
green = fread(fid, [3552,6536], '*uint16', 'ieee-be');%reads in and converts .RAS file
green_chip = extract_region_fwd(green);
star_block(12:20,4:12) = green_chip;%inserts star chip into main matrix

%red
fid=fopen(red1,'rb'); % opens the file for reading
fseek (fid, 800, -1);% Skip past header, which is 800 bytes long
red = fread(fid, [3552,6536], '*uint16', 'ieee-be');%reads in and converts .RAS file
red_chip = extract_region_fwd(red);
star_block(22:30,4:12) = red_chip;%inserts star chip into main matrix

%nir
fid=fopen(nir1,'rb'); % opens the file for reading
fseek (fid, 800, -1);% Skip past header, which is 800 bytes long
nir = fread(fid, [3552,6536], '*uint16', 'ieee-be');%reads in and converts .RAS file
nir_chip = extract_region_fwd(nir);
star_block(32:40,4:12) = nir_chip;%inserts star chip into main matrix 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:04:36.600

您可以生成这些数字，但更可靠的方法是使用`dir`然后通过返回的结构访问文件：

```
blu_files = dir('*.blu');
for i=1:length(blu_files)
  blu_file = blu_files(i).name;
  grn_file = strrep(blu_file, 'blu', 'grn');
  red_file = strrep(blu_file, 'blu', 'red');
  nir_file = strrep(blu_file, 'blu', 'nir');

  % load files ...   
end 
```

### 编辑

将相同的过程放入函数中。

根据您在问题编辑中发布的代码示例，以下功能将是有意义的：

**apply_chips.m**

```
function [] = apply_chips(blue, bx, by, green, gx, gy, red, rx, ry, nir, nx, ny)
  %insert star chips into main matrix
  star_block(bx, by) = read_block(blue );  
  star_block(gx, gy) = read_block(green);
  star_block(rx, ry) = read_block(red  );
  star_block(nx, ny) = read_block(nir  ); 
```

**读块.m**

```
function [block] = read_block(filename)
  fid = fopen(filename, 'rb');                          % opens the file for reading
  fseek(fid, 800, -1);                                  % Skip past header, which is 800 bytes long
  data = fread(fid, [3552,6536], '*uint16', 'ieee-be'); % reads in and converts .RAS file
  block = extract_region_fwd(data); 
```

您现在应该能够：

```
ranges.blue.x  = { 2:10,  2:10,  2:10,  2:10,  2:10,  2:10};
ranges.blue.y  = { 4:12, 17:25, 30:38, 43:51, 56:64, 69:77};
ranges.green.x = {12:20, 12:20, 12:20, 12:20, 12:20, 12:20};
ranges.green.y = { 4:12, 17:25, 30:38, 43:51, 56:64, 69:77};
ranges.red.x   = {22:30, 22:30, 22:30, 22:30, 22:30, 22:30};
ranges.red.y   = { 4:12, 17:25, 30:38, 43:51, 56:64, 69:77};
ranges.nir.x   = {32:40, 32:40, 32:40, 32:40, 32:40, 32:40};
ranges.nir.y   = { 4:12, 17:25, 30:38, 43:51, 56:64, 69:77};

blu_files = dir('*.blu');
for i=1:length(blu_files)
  blu_file = blu_files(i).name;
  grn_file = strrep(blu_file, 'blu', 'grn');
  red_file = strrep(blu_file, 'blu', 'red');
  nir_file = strrep(blu_file, 'blu', 'nir');

  apply_chips([star_path '\' blu_file], ranges.blue.x{i} , ranges.blue.y{i} , ...
              [star_path '\' grn_file], ranges.green.x{i}, ranges.green.y{i}, ...
              [star_path '\' red_file], ranges.red.x{i}  , ranges.red.y{i}  , ...
              [star_path '\' nir_file], ranges.nir.x{i}  , ranges.nir.y{i}  , ...);

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:04:22.773

[这可以帮助你](http://matlab.wikia.com/wiki/FAQ#How_can_I_create_variables_A1.2C_A2.2C....2CA10_in_a_loop.3F)

这显示了您可以使用数组做什么，但是将其转换为矩阵应该不会太难

# haskell - 为什么yesod在这里需要授权？

> ID：12043295
> 
> 赞同：1
> 
> 时间：2012-08-20T18:47:18.997
> 
> 标签：haskell, authorization, yesod

我对 yesod 和授权有疑问。

在未登录的情况下尝试查看博客文章时，我进入了登录页面。

那不是我想要的。

即使未登录，我也希望能够查看博客文章。

我试图修复它，但没有任何效果。

以下是代码的相关部分：

```
mkMessage "Blog" "messages" "en"

mkYesod "Blog" [parseRoutes|
/ RootR GET
/blog BlogR GET POST
/blog/#EntryId EntryR GET POST
/auth AuthR Auth getAuth
|]

instance Yesod Blog where
    approot = ApprootStatic "http://localhost:3000"
    defaultLayout = defLayout
    authRoute _ = Just $ AuthR LoginR

    isAuthorized BlogR True = do
      mauth <- maybeAuth
      case mauth of
        Nothing -> return AuthenticationRequired
        Just (Entity _ user)
             | isAdmin user -> return Authorized
             | otherwise    -> unauthorizedI MsgNotAnAdmin

    isAuthorized (EntryR _) True = do
      mauth <- maybeAuth
      case mauth of 
         Nothing -> return AuthenticationRequired
         Just _  -> return Authorized

    isAuthorized _ _ = return Authorized

isAdmin :: User -> Bool
isAdmin user = userEmail user == "email@something.com"

instance YesodPersist Blog where
    type YesodPersistBackend Blog = SqlPersist
    runDB f = do
      master <- getYesod
      let pool = connPool master
      runSqlPool f pool

type Form x = Html -> MForm Blog Blog (FormResult x, Widget)

instance RenderMessage Blog FormMessage where
    renderMessage _ _ = defaultFormMessage

instance YesodNic Blog

instance YesodAuth Blog where
    type AuthId Blog = UserId
    loginDest _ = RootR
    logoutDest _ = RootR
    authHttpManager = httpManager
    authPlugins _ = [authBrowserId]
    getAuthId creds = do
      let email = credsIdent creds
          user = User email
      res <- runDB $ insertBy user
      return $ Just $ either entityKey id res

getRootR :: Handler RepHtml
getRootR = defaultLayout $ do
             setTitleI MsgHomepageTitle
             [whamlet|
<p>_{MsgWelcomeHomepage}
<p>
    <a href=@{BlogR}>_{MsgSeeArchive}
|]

entryForm :: Form Entry
entryForm = renderDivs $ Entry
            <$> areq textField (fieldSettingsLabel MsgNewEntryTitle) Nothing
            <*> aformM (liftIO getCurrentTime)
            <*> areq nicHtmlField (fieldSettingsLabel MsgNewEntryContent)
            Nothing

getBlogR :: Handler RepHtml
getBlogR = do
  muser <- maybeAuth
  entries <- runDB $ selectList [] [Desc EntryPosted]
  (entryWidget, enctype) <- generateFormPost entryForm
  defaultLayout $ do
             setTitleI MsgBlogArchiveTitle
             [whamlet|
$if null entries
    <p>_{MsgNoEntries}
$else
    <ul>
        $forall Entity entryId entry <- entries
            <li>
                <a href=@{EntryR entryId}>#{entryTitle entry}
$maybe Entity _ user <- muser
    $if isAdmin user
        <form method=post enctype=#{enctype}>
              ^{entryWidget}
              <div>
                  <input type=submit value=_{MsgNewEntry}>
$nothing
    <p>
        <a href=@{AuthR LoginR}>_{MsgLoginToPost}
|]

postBlogR :: Handler RepHtml
postBlogR = do
  ((res, entryWidget), enctype) <- runFormPost entryForm
  case res of
    FormSuccess entry -> do
              entryId <- runDB $ insert entry
              setMessageI $ MsgEntryCreated $ entryTitle entry
              redirect $ EntryR entryId
    _ -> defaultLayout $ do
              setTitleI MsgPleaseCorrectEntry
              [whamlet|
<form method=post enctype=#{enctype}>
    ^{entryWidget}
    <div>
        <input type=submit value=_{MsgNewEntry}>
|]

-- comment form
commentForm         :: EntryId -> Form Comment
commentForm entryId = renderDivs $ Comment
                      <$> pure entryId
                      <*> aformM (liftIO getCurrentTime)
                      <*> aformM requireAuthId
                      <*> areq textField (fieldSettingsLabel MsgCommentName) Nothing
                      <*> areq textareaField (fieldSettingsLabel MsgCommentText) Nothing

getEntryR :: EntryId -> Handler RepHtml
getEntryR entryId = do
  (entry, comments) <- runDB $ do
          entry <- get404 entryId
          comments <- selectList [] [Asc CommentPosted]
          return (entry, map entityVal comments)
  muser <- maybeAuth
  (commentWidget, enctype) <- generateFormPost (commentForm entryId)
  defaultLayout $ do
    setTitleI $ MsgEntryTitle $ entryTitle entry
    [whamlet|
<h1>#{entryTitle entry}
<article>#{entryContent entry}
    <section .comments>
        <h1>_{MsgCommentsHeading}
        $if null comments
            <p>_{MsgNoComments}
        $else
             $forall Comment _entry posted _user name text <- comments
                 <div .comment>
                      <span .by>#{name}
                      <span .at>#{show posted}
                      <div .content>#{text}
        <section>
            <h1>_{MsgAddCommentHeading}
            $maybe Entity _ user <- muser
                <form method=post enctype=#{enctype}>
                    ^{commentWidget}
                    <div>
                        <input type=submit value=_{MsgAddCommentButton}>
            $nothing
                <p>
                    <a href=@{AuthR LoginR}>_{MsgLoginToComment}
|] 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:58:56.530

好的，我自己发现了问题。

这条线给了我问题：

```
<*> aformM requireAuthId 
```

我还必须删除对应用程序中使用的用户 ID 字段的引用。

我不知道为什么这个问题首先存在，因为小部件只应在用户登录时显示。

但是，我希望拥有发布评论的用户的用户 ID，是否有另一种方法可以在不重新引入我遇到的问题的情况下做到这一点？

还是您认为这是yesod中的错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:02:29.660

（如果我被允许，这将是一条评论）我目前正在自己​​学习 Yesod，所以这可能不是最好的方法，但是您可以避免在表单中使用 requireAuthId，并且仍然在下面的持久字段中记录用户 ID如果您将表单设置为不同类型，请使用评论实体。代替

```
commentForm :: EntryId -> Form Comment 
```

这是一个简写

```
commentForm  :: EntryId -> Html -> MForm Blog Blog (FormResult Comment, Widget) 
```

您可以重新排列字段并拥有

```
commentForm  :: EntryId -> Html -> MForm Blog Blog (FormResult (UserId -> Comment), Widget) 
```

并在 POST 处理程序中提供用户 ID。您甚至可以将表格简化为

```
commentForm  :: Html -> MForm Blog Blog (FormResult (Text, Textarea), Widget)
commentForm = renderDivs $ (,)
           <$> areq textField (fieldSettingsLabel MsgCommentName) Nothing
           <*> areq textareaField (fieldSettingsLabel MsgCommentText) Nothing 
```

并在 POST 处理程序中提供所有其他内容。

或者，您可以将 generateFormPost 放在案例分支下，以便在您未登录时不会生成表单，而不是显然只是不显示。

# python - 使用 PyInstaller 构建 wxpython exe

> ID：12043299
> 
> 赞同：1
> 
> 时间：2012-08-20T18:47:35.410
> 
> 标签：python, module, matplotlib, wxpython, pyinstaller

我正在尝试使用 PyInstaller（使用 Python 2.7）构建一个 exe 并且被难住了。我的 python 代码使用模块 wx、matplotlib、底图（matplotlib 的一部分）和 pylab。还有其他的，但这些似乎是主要的。

我已经安装了 PyInstaller，然后我做了：

```
python pyinstaller.py C:/Python27/Convertthisfile.py 
```

它经历了整个过程，但是当我尝试运行最终的可执行文件时，它出现了错误：

“没有名为 PyQt4.QtCore 的模块”

我已经为 Python 2.7 安装了 PyQt GPL 4.9.1。但是，我什至不知道 PyQt 在我的代码中的什么地方使用。我没有在我知道的任何地方指定它。

有人有什么想法吗？我所做的一切似乎都不起作用。我什至尝试过 GUI2EXE.py——我无法让 py2exe、pyinstaller 或 cx_freeze 工作。

帮助！

我在下面添加了我的代码，希望能有所帮助。要回答评论，是的，我的代码位于 C:\Python27。我用pyinstaller“构建”它没有问题，但是当我尝试运行给定的可执行文件时出现上述错误。我已经搜索了代码，没有看到 PyQt4 的任何用途。

当我运行 cx_freeze 时，我遇到了底图数据文件的问题——当我构建它时，它们似乎没有包含在“.zip”中。此外，我的模块似乎也没有包含在内。

这是我为我的代码导入的内容（其中一些函数是我自己的——主要是列出的最后一个）。

```
import wx
import time
from matplotlib.backends.backend_wx import FigureCanvasWx as FigureCanvas
from mpl_toolkits.basemap import Basemap
from matplotlib.figure import Figure
from datetime import datetime
import wx.calendar as cal
import wx.lib.mixins.listctrl as listmix
from pylab import *
from decimal import *
import adodbapi
import annote_new
import cPickle as pickle
import calc_dist
import Game_Score
import Calculate_Distance
import Duplicate_Finder
import copy 
```

希望这能解决问题吗？

# javascript - 阻止 Javascript 事件影响子元素

> ID：12043301
> 
> 赞同：1
> 
> 时间：2012-08-20T18:47:59.047
> 
> 标签：javascript, events

我有一个创建元素的脚本，创建过程的一部分是添加一个onclick事件（使用addEventListener），但是当我点击一个子元素时，会触发父元素的onclick事件。当源是子元素时，如何防止检测到点击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:51:03.937

使用[`event.stopPropagation()`](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation). 这会阻止 Javascript 事件的冒泡，并且只允许应用到目标元素的事件执行；

```
window.addEventListener("click", function(event){

    // event here

    event.stopPropagation();
}, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:51:19.023

问题是事件正在冒泡到父级。

在孩子的`onclick`事件中，告诉事件停止传播：

```
onclick = function (event) {
    // ...
    event.stopPropagation();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:52:46.610

父点击处理程序：（检查被点击元素的 id）

```
function handler(e){
  if(e.target.id != "parentID") return;
  ....
} 
```

# php - 即使将随机值添加到 php 请求中，IE 也会缓存 JSON 结果

> ID：12043309
> 
> 赞同：1
> 
> 时间：2012-08-20T18:48:40.100
> 
> 标签：php, jquery, ajax, json

这种方法适用于 JS/AJAX/PHP/JSON，但是当我将请求转换为 JQuery 时 - IE 开始再次缓存结果......场景是当用户更改列表框中的选择选项（my_lstbx）时，会调用php/ajax 和结果返回到一个数组中。

```
$(document).ready(function() {
    $('#my_lstbx').change(function() {
        $.getJSON('Code/my_details.php'+'?'+'Math.round(new Date().getTime())', {request_id:this.value}, function(response) {
         .......
          ........
           ......... 
```

这是我之前问过的 JS 版本，它正在工作 - [PHP - IE 不显示数据库中的更新值。铬，FF，歌剧 - 好的](https://stackoverflow.com/questions/11616202/php-ie-doesnt-display-updated-values-from-database-chrome-ff-opera-ok)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:51:42.843

你`Math.round(new Date().getTime())`作为一个字符串传递！:D 它不会被执行，但总是一样的。

改成：

```
$.getJSON('Code/my_details.php?' + new Date().getTime(), {request_id:this.value}, function(response) { 
```

# ajax - CakePHP 2.2：预填充 AJAX“更新”div？

> ID：12043311
> 
> 赞同：1
> 
> 时间：2012-08-20T18:48:44.250
> 
> 标签：ajax, forms, cakephp

这个问题有点n00b-ish，但我无法在CakePHP 文档或通过谷歌找到令人满意的解决方案。

我正在尝试制作一个简单的 AJAX 表单，它将更新数据库中的一些信息，并在页面上显示该信息。整个过程看起来很简单，除了我不知道如何预填充更新 div。

在我的视图代码中，我有

```
<div id="interestingContent"></div>
<?
  echo $this->Form->create();
  // create form fields here
  echo $this->Js->submit('Save', array('update'=>'#interestingContent');
  echo $this->Form-end();
  echo $this->Js->writeBuffer();
?> 
```

这很好用，当提交表单时，我的控制器正确调用

```
$this->render('ajaxview','ajax') 
```

并适当地更新`#interestingContent`div。

`#interestingContent`所以，问题是：从数据库预填充的最佳方法是什么？当然我可以从`ajaxview.ctp`内部重复代码`#interestingContent`，但似乎必须有一种 DRY 方法来做到这一点。

我的第一个想法是制作`ajaxview.ctp`一个元素，因为我基本上是在尝试将一个视图嵌入到另一个视图中。不过，这对我来说似乎很骇人听闻，因为我的控制器将直接渲染元素的视图。我还考虑了 2.1/2.2 中的新视图块，但这似乎也不对。

我敢肯定，这种事情总是会出现。有没有普遍接受的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:14:55.793

我有同样的问题。这可能有点骇人听闻，但使用一个元素就可以完成这项工作。首先，创建一个元素来表示您的 bd 内容。在您的表单视图中，您使用该元素。然后创建另一个仅包含元素的视图。此视图将是对您的 ajax 请求的响应。通过使用元素，您可以防止代码重复。

# coldfusion - 如何更改 CFCHART 标题字体？

> ID：12043316
> 
> 赞同：3
> 
> 时间：2012-08-20T18:49:03.007
> 
> 标签：coldfusion, charts, cfchart

我正在使用 WebCharts3D 界面来创建和修改图表，然后在我的 Coldfusion 代码中使用生成的 XML 样式作为内联样式。

所以这在 WebCharts3D 中正确显示：

```
<?xml version="1.0" encoding="UTF-8"?>
<pieChart depth="Double" style="Solid">
          <title font="Arial-18-bold">
               <decoration style="None"/>This is a title
          </title>
</pieChart> 
```

这只是显示示例标题，周围没有框，并设置为所需的字体大小和粗细。您可以获取此代码，将其复制到 WebCharts“XML 样式”窗口中，应用它，然后查看它是否有效。

我在我的 Coldfusion 代码中使用它，如下所示：

```
<cfsavecontent variable="piecontent">
<?xml version="1.0" encoding="UTF-8"?>
<pieChart depth="Double" style="Solid">
          <title font="Arial-18-bold">
               <decoration style="None"/>This is a title
          </title>
</pieChart>
</cfsavecontent>

<cfchart name="mychart" format="png" 
    style="#piecontent#">
  <cfchartseries type= "pie">
        <cfchartdata item="sample1" value="10">
        <cfchartdata item="sample2" value="20">
  </cfchartseries>
</cfchart> 
```

标题正确地将“装饰”设置为“无”，因为它周围没有框，但标题字体大小和粗细完全被忽略了。这是一个错误吗？有解决方法吗？

编辑：似乎忽略字体大小和重量的问题对于整体字体也是如此，就像你把这个：`<pieChart depth="Double" style="Solid" font="Arial-16-Bold">`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:29:58.403

似乎这些特定设置被忽略了，有利于 cfchart 标记的字体属性。尝试使用那些：

```
<cfchart format="png" font="Arial" fontBold="true" fontSize="18"> 
```

**编辑：**虽然上述方法（仅）适用于饼图，但它似乎是另一个错误......*起作用*的是[直接与 webcharts 交互](http://www.raymondcamden.com/index.cfm/2008/1/18/Coolest-CFCHART-Trick-Ever)。它涉及更多，但提供对图表设置的完全控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:05:11.290

我的经验是，除了我自己的测试之外，我在网上找不到任何证据，但 ColdFusion 的 Webcharts 实现不支持标题样式。

# c# - 如果我需要按特定顺序执行事件处理程序怎么办？

> ID：12043317
> 
> 赞同：2
> 
> 时间：2012-08-20T18:49:04.193
> 
> 标签：c#

我有事件，例如：

```
public event EventHandler<NewReadyMessageEventArgs> NewReadyMessage 
```

问题是我需要为其附加两个处理程序，并且我需要在另一个之前执行一个（因为最后一个取决于第一个）。即我需要一定的处理程序执行顺序。

我知道实际上处理程序将被一一执行，因此我只需要按正确的顺序附加它们，但这将是非常容易出错的设计。

我想创建单独的处理程序并附加它。在这个处理程序中，我只想按正确的顺序执行我的两个处理程序。你怎么看，你有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T18:51:34.107

> 问题是我需要为其附加两个处理程序，并且我需要先执行一个（因为最后一个取决于第一个）

在这种情况下，我会重新考虑你的设计。“第一个”处理程序引发自己的事件可能更有意义。

第二个处理程序可以附加到该事件，并具有两个项目的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:53:03.207

我不会依赖内部实现来确保以特定顺序调用处理程序。

如果处理程序不能相互了解，但您需要它们以特定顺序运行，我将创建一个“父”处理程序，以正确的顺序调用其他两个处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:51:31.520

`add`如果您不希望使用默认事件`add`/实现的默认多播委托，我建议您实现自己的`remove`实现。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/cc713648.aspx](http://msdn.microsoft.com/en-us/library/cc713648.aspx)

如果不明显，如果您不使用默认的多播委托，则需要手动实现订阅者的调用。上面的链接详细说明了如何编写自定义添加/删除以使用多播委托。此答案假设*您不使用多播委托* 例如，类似：

```
 private List<EventHandler> eventList = new List<EventHandler>();

   public event EventHandler Event1 
   {
      add { eventList.Add(value); }
      remove { eventList.Remove(value); }
   }

    private void RaiseEvent1()
    {
        foreach(var e in eventList)
        {
            e(this, EventArgs.Empty);
        }
    } 
```

`SortedList`如果您想要特定的订单，请使用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:10:49.013

听起来这可能是您只需要拥有多个 (2) 事件的地方。

如果顺序很重要，则有两个事件，并且有一个在另一个之后立即被触发。例如，您可以在 ASP 中的页面生命周期中看到这一点。有很多事件，在某些情况下，它们都一个接一个地被触发，除了保证前一个事件的所有处理程序都运行之外，它们之间确实存在一些事情。这听起来就像你在这里的情况。

# html - 使用画布和输入文件上传图像

> ID：12043319
> 
> 赞同：1
> 
> 时间：2012-08-20T18:49:11.433
> 
> 标签：html, file, canvas, input, upload

所以在我开始之前，我会让你知道我已经阅读[了这个问题](https://stackoverflow.com/questions/1590965/uploading-canvas-image-data-to-the-server)并且我的问题很相似。基本上，我需要能够让用户从计算机上传文件或从网络摄像头拍照，将照片放在画布上并上传。有没有办法改变使用javascript的来源（我想将文件源更改为dataURL）？这是我到目前为止所拥有的。

在主 html 页面中：

```
<form name="uploadFile" action="upload.php" method="post" enctype="multipart/form-data"    onSubmit="return validate();">
<input type="file" id="imageupload" name="ufile" onKeyPress="return false;">(* jpg,png)
</form> 
```

在一个单独的 JS 文件中，我有：

```
button2.addEventListener('click', function(){
imgdata=canvas.toDataURL('image/png');
$("#imageupload").attr("src", imgdata);
}); 
```

这段代码确实做了应该做的事情（它改变了#imageupload的属性），但这就是如何改变文件的来源。任何帮助，将不胜感激！

# facebook - Corona SDK 登录到 facebook

> ID：12043321
> 
> 赞同：1
> 
> 时间：2012-08-20T18:49:20.413
> 
> 标签：facebook, facebook-graph-api, coronasdk

我想从 Corona SDK 应用程序向 facebook 发布一条消息，但它一直无法登录。我的步骤：

```
1\. I have generated key for my Android app: app name is "myapp.APK", package name is com.myapp (http://corona.techority.com/2011/09/24/how-to-generate-a-key-for-your-android-app/)
2\. I have selected "Native Android App" in facebook and filled in folowing: 
"Android Package Name": com.myapp
"Android Class Name": com.myapp.activity
"Android Key Hash": key hash which I have generated in step 1.
"Configured for Android SSO": Enabled 
```

我的移动应用程序完全复制自： http: [//developer.coronalabs.com/content/facebook](http://developer.coronalabs.com/content/facebook) PS 我输入了有效的应用程序 ID 和应用程序密码。但仍然登录失败:((

我错过了什么？不知道该怎么办...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:05:18.260

我发现出了什么问题。问题是，由于某种原因，Android App Hash 与 Facebook Android App Hash 字段中的密钥不匹配，因此我收到错误：“您的密钥与应用程序设置中允许的密钥不匹配”解决方案：我已更改 Facebook 中的哈希到错误消息中的哈希键。现在它工作正常。

# javascript - 如何将 window.setTimeout 与 javascript 和模块模式一起使用

> ID：12043325
> 
> 赞同：0
> 
> 时间：2012-08-20T18:49:28.760
> 
> 标签：javascript, jquery, settimeout, module-pattern

我有这个例子：

```
var myApp = (function() {

    var inputClick = function() {
        console.log('inputClick');
    };

    var loadRecentTimeout = function()
    {
    window.setTimeout("inputClick()",3000);
    };

    return {
      loadRecentTimeout:loadRecentTimeout,
      inputClick:inputClick
    };

})();

myApp.loadRecentTimeout(); // this returns inputClick() undefined

window.setTimeout("myApp.inputClick();",3000); // this one seems to work , but it calls that method only one time and not every 3 seconds 
```

谁能解释我如何让这段代码`inputClick()`每 3 秒调用一次该方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:51:24.003

你想调用 setInterval 而不是 setTimeout

```
var eventInterval = window.setInterval(function () { 
                        myApp.inputClick(); 
                    },3000); 
```

您还应该将函数作为函数而不是字符串传递。

如果您需要取消重复活动，您可以致电`clearInterval`

```
clearInterval(eventInterval) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:58:07.910

当您使用字符串“functionName()”时，它会在窗口范围内对其进行评估。相反，只需使用名称即可分配对函数的引用。setTimeout 只触发一次，您想使用 setInterval。

```
var myApp = (function() {

    var inputClick = function() {
        console.log('inputClick');
    };

    var loadRecentTimeout = function()
    {
        window.setInterval(inputClick,3000); 
    };

    return {
      loadRecentTimeout:loadRecentTimeout,
      inputClick:inputClick
    };

})(); 
```

# java - 为什么当我 setBackgroundDrawable 时绘制没有背景但不绘制到画布？

> ID：12043329
> 
> 赞同：0
> 
> 时间：2012-08-20T18:49:39.673
> 
> 标签：java, android, bitmap, drawable, android-canvas

当我在视图上设置背景时。

```
//background
    Bitmap back_bmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.background); 
    BitmapDrawable backTiled = new BitmapDrawable(back_bmp);
    backTiled.setTileModeXY(Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);
    backTiled.setBounds(0, 0, this.getWidth(), this.getHeight());
    this.setBackgroundDrawable(backTiled); 
```

我的动画对象根本不渲染

```
 public void render(Canvas canvas) {
    elaine.draw(canvas);
    }

    public void update() {
    elaine.update(System.currentTimeMillis());
    } 
```

虽然没有背景设置它画得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:47:08.110

在我看来，我称背景为背景，虽然它可能奏效了，但实际上效果并不好。

在重构和放弃之后，我回到了我认为它应该如何工作的方式。我应该检查一些不起作用的东西（只是因为当我第一次尝试它时，代码没有设置边界或有效地加载图像。）可能会再次起作用。

我做到了，并意识到如果在渲染中加载，一切都会完美无缺。

```
 public void render(Canvas canvas) {
    //background
    Bitmap _back_bmp = BitmapFactory.decodeResource(mainContext.getResources(), R.drawable.background); 
    backTiled = new BitmapDrawable(_back_bmp);
    backTiled.setTileModeXY(Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);
    backTiled.setBounds(0, 0, this.getWidth(), this.getHeight());
    backTiled.draw(canvas);
    elaine.draw(canvas);

    } 
```

# javascript - 按 iframe 内的 Youtube 订阅表单按钮

> ID：12043331
> 
> 赞同：0
> 
> 时间：2012-08-20T18:49:43.580
> 
> 标签：javascript, html

我正在寻找如何从 Youtube 订阅表单中按下订阅按钮，但我没有找到任何可以帮助我的东西......我是 JS 的新手，所以我希望你能帮助我。

[要在此处](http://www.youtube.com/subscribe_widget?p=aaaa)按订阅按钮，我使用以下代码：

```
document.getElementById("subscribe-button").click(); 
```

现在我的问题是当它被放置在像下面这样的 iframe 中时如何按下订阅按钮？

```
<html>
<body onload="">
     <iframe src="http://www.youtube.com/subscribe_widget?p=aaaa" name="iframesub" 
       style="overflow: hidden; height: 105px; width: 300px; border: 0;" 
       scrolling="no" frameBorder="0">
    </iframe>
</body>
</html> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:55:10.530

您将无法操作外部 i-frame 的内容。它被称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。您将需要要求用户单击该按钮。

在未经用户同意的情况下单击按钮将是一种非常糟糕的做法。

- 编辑 -

如果您想在用户不点击按钮的情况下为用户订阅您的频道，请阅读有关[Youtube API](https://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions#Adding_a_subscription)的文档，了解如何为用户订阅频道。那是你最好的选择。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:54:33.697

这是不可能的。Javascript 安全策略不允许跨域访问嵌入 (i) 框架的文档。

# actionscript-3 - 如何控制通过 FileReference 对象上传的标头？

> ID：12043332
> 
> 赞同：0
> 
> 时间：2012-08-20T18:49:45.437
> 
> 标签：actionscript-3

在长期开发 C++ 和 C# 之后，我最近开始使用 Flash Builder。

我正在使用对象使用其方法`FileReference`将文件上传到服务器。`upload`但是，在服务器端，我需要接收一个`X-File-Name`标头。如何控制通过 Flex/ActionScript 中的 Flash 对象发送哪些标头？

我在任何地方都找不到有关此的任何资源。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:15:32.363

恐怕你不能。FileReference 对象是开箱即用的，并且没有太多可配置性。

但是您可以加载文件，创建自己的套接字并根据需要重新实现协议（如果您不需要很多功能，这是可行的）。

这是它如何工作的示例：[http ://googolflex.com/?p=367](http://googolflex.com/?p=367)

# html - 从 html 页面调用 python 脚本

> ID：12043333
> 
> 赞同：0
> 
> 时间：2012-08-20T18:49:55.333
> 
> 标签：html, ajax, django, python-3.x, cherrypy

我必须使用 css 和 javascript 制作一个 html 页面，我必须在表单中输入一个 url。使用这个 url，我必须使用 Python 3.2 脚本从页面的 html 中获取一些信息。

几天前我开始学习 Python，我有一个问题：

1.  我需要 CherryPy/Django 来做到这一点吗？（我问是因为我执行了一个脚本来获取整个 html 而不使用 CherryPy/Django 并且它可以工作 - 没有与浏览器交互）
2.  CherryPy 示例在 python 代码中构建了 html。我必须在 python 脚本中编写 html，或者我可以有一个用 Ajax（或其他任何东西）调用脚本的 html 页面吗？
3.  如果我可以使用 Ajax，那么 XmlHttpRequest 是一个不错的选择吗？

谢谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:05:04.467

1.  不，您不需要 Web 框架，但总的来说这是一个好主意。对此，Django 似乎是残酷的矫枉过正。CherryPy 或 Pyramid 或一些微框架似乎更好。

2.  您可以有一个调用 CherryPy 服务器的 HTML 页面，但由于此页面显然是您正在构建的系统/服务的一部分，因此从服务器提供它更有意义。

3.  当然，为什么不呢。

# css - 当我说位置：固定时，我如何告诉移动浏览器我是认真的？

> ID：12043337
> 
> 赞同：1
> 
> 时间：2012-08-20T18:50:15.040
> 
> 标签：css, mobile, orientation

我想在浏览器出现的页面顶部添加一条通知：

*   支持媒体查询
*   处于纵向
*   太窄，纵向无法工作

为此，我有一个`#portrait_alert`具有以下 CSS 的元素：

```
#portrait_alert {
    display:none;
    position:fixed;
    font-size:8pt;
    top:0;
    left:0;
    right:0;
    /* a few more styles such as background, text color, etc. */
}
@media all and (orientation:portrait) and (max-width:500px) {
    #portrait_alert {display:block}
} 
```

当我在我的桌面上测试它并将窗口大小更改为高于它的宽度并且小于 500px 宽时，它工作得很好。但是，在移动浏览器上，这`right:0`似乎只适用于初始视口。当我缩小视图时，它会在右侧留下一个间隙，而当我放大视图时，它会溢出屏幕，因此您无法阅读。

我怎样才能解决这个问题？

（奖励问题：为什么我在指定时仍然可以缩小`minimum-scale=1.0`？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:15:09.057

您不能像使用 window.resize 甚至 css 宽度和高度那样捕获移动浏览器的缩放活动。原因是视口仍然是 x 像素宽，只是放大了，没有变大或变小。如果有人进出，页面上的所有元素都会保持最初加载的状态。这样做的原因是他们不希望程序员在用户放大时更改页面上的元素，例如调整文本大小，因为这可能会否定用户首先放大的原因。用户想要放大您的文本，而当他们放大您不断调整文本大小时，可能会很烦人，对吧？

试试jquery mobile、sencha touch、jqmobi等。这些框架已经预建了固定位置的页眉和页脚。这是一个示例[http://jquerymobile.com/test/docs/toolbars/bars-fixed.html](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)

# jquery - IE 兼容性视图更改溢出值

> ID：12043341
> 
> 赞同：0
> 
> 时间：2012-08-20T18:50:36.000
> 
> 标签：jquery, overflow

这是我的第一篇文章。

我有一个正在加载包含文件的应用程序

```
 <div id="formChangeResult" class="innerWhiteContainer ">
      <jsp:include page="queryJSP/nameChangedDepot.jsp">
      </jsp:include>    
    </div><!-- end formChangeResult --> 
```

nameChangedDepot.jsp 包含一个表，其中包含来自数据库查询的结果集。表格上有一个“滚动”类，它告诉 jQuery 表格适合（上图）内部并且要滚动。

当用户的浏览器为此应用启用了兼容性视图时，这非常有效。该表被放置在另一个（在*formChangeResult*内）具有“overflow-y:auto,overflow-x:auto”。

我的问题是当用户没有为应用程序启用兼容性视图时，div 的溢出值为“溢出：隐藏”。

我的需要是找到一种方法在退出兼容性视图时删除此“更改”，或者能够强制此应用程序的兼容性视图。

我尝试了不同的 jQuery 版本，从 1.2.6 到 1.7.1，我尝试过的所有版本都表现相同。我尝试过 IE8 v. IE9，两者的行为相同。唯一似乎有所作为的是打开兼容性视图。这是一个足够简单的解决方法，但我不能仅仅依靠用户合规性来使用我的应用程序。

谢谢。

# python - 导入模块中包含的类

> ID：12043345
> 
> 赞同：1
> 
> 时间：2012-08-20T18:50:51.107
> 
> 标签：python

我的目录中有以下文件：

```
foo/
  foo.py
  foolib/
    __init__.py
    bar.py 
```

在 __init__.py 中：

```
__all__ = ["bar"] 
```

在 bar.py 中：

```
class Bar:
    def __init__(self):
        None
    def hello(self):
        print("Hello World")
        return

def hi():
    print("Hi World") 
```

现在，如果我在 foo.py 中有以下代码：

```
from foolib import *

bar.hi()

foobar = Bar()
foobar.hello() 
```

打印“Hi World”，但我得到 Bar() 的 NameError。如果我显式导入模块：

```
from foolib.bar import * 
```

我得到了预期的输出“Hello World”。

有没有办法让我从模块中导入类，而不显式调用它们？我觉得我在 __init__ 文件中遗漏了一些东西。要么就是这样，要么我公然违反了一些 Python 最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:55:01.330

要导入该类，您必须在某处导入该类。当你这样做时`from foolib import *`，因为你的`__init__.py`this 导入了模块`bar`。它不允许您访问该模块内的任何内容。

如果您想自动访问包中`bar`的所有内容`foolib`而无需导入`bar`，您可以将其放入`__init__.py`：

```
from bar import * 
```

这使得所有内容都`bar`可以直接在`foolib`.

# ios - 自定义 iOS 锁应用

> ID：12043347
> 
> 赞同：0
> 
> 时间：2012-08-20T18:51:00.833
> 
> 标签：ios, locking, app-store, jailbreak

我正在寻找编写一个自定义锁应用程序来替换 iOS 上的默认 PIN 锁。

由于目前 App Store 上没有类似的应用程序，很明显 Apple 会拒绝这些类型的应用程序，或者使用当前可用的 API 是不可能的。

该应用程序仅供个人使用，但我只想在开始之前知道它是否可能。有谁知道是什么情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:54:06.100

使用当前的 API 是不可能的。一旦有人按下主页按钮，您的应用程序将被发送到后台或终止，具体取决于它的配置方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:57:51.997

除了越狱设备，您无法更换标准锁屏或 PIN 输入键盘。首先，官方SDK无法做到这一点。其次即使有苹果也不会让你修改任何系统应用程序。如果您认真考虑“个人使用”并且可以取消保修（和/或可能使您的设备变砖），您可以查看越狱和可用的工具。正确方向的提示是尽可能多地了解 SpringBoard 和移动基板。希望有帮助。

# php - 我怎样才能把这个jQuery点击功能变成一个keyup功能？

> ID：12043362
> 
> 赞同：0
> 
> 时间：2012-08-20T18:51:57.213
> 
> 标签：php, jquery, mysql, html

所以基本上我有一个企业内部网，员工可以登录并执行各种任务。为了提高效率，我实现了我所谓的“*快速任务*”功能，员工可以在登录之前通过下拉菜单选择任务，以便直接进入。由于有不同的部门，我制作了一个脚本，员工可以在其中输入他们的用户名并按下提交按钮，它会填充与其部门相关的任务列表，这只是暂时的，因为提交按钮需要用于实际登录。但是，我想更改此设置，以便在他们键入用户名时填充列表。我怎么能这样做？

我有 3 个文件。

**1\. index.php（登录页面）**

**2\. quickTask.js（jQuery函数）**

**3.determine_department.php（quickTask.js正在与之通信的文件）**

这是代码：

**索引.php：**

```
<form action="javascript:void(0);" method="post">
    Username: <input type="text" id="username" name="username" /><br />
    Password: <input type="password" name="password" /><br />
    <i>QuickTask:</i><div id="quickTask"></div>
    <br />
    <a href="reset_password.php">Forgot Password?</a><br />
    <input class="test" type="submit" id="thing" value="Log In" />
</form> 
```

**快速任务.js**

```
$(document).ready(function() {
    $('input#thing').on('click', function() {
        var username = $('input#username').val();
        if ($.trim(username) != '') {
            $.post('../inc/determine_department.php', {
                username: username
            }, function(data) {
                $('div#quickTask').html(data);
            });
        }
    });
}); 
```

**确定部门.php：**

```
<?php

$username = $_POST['username'];

if(isset($username) === true && empty($username) === false) {

    mysql_connect("localhost", "root", "24Bottlesofgin24");
    mysql_select_db("intranet");

    $sql = "SELECT DEPARTMENT FROM `employees` WHERE USERNAME='$username'";
    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result)){
        $depID = $row['DEPARTMENT'];
    }

    $sql2 = "SELECT * FROM `quicktask` WHERE DEP_ID='$depID'";
    $result2 = mysql_query($sql2);
    echo "<select name=\"QT\">";
    echo "<option value=\"\" selected=\"selected\" disabled>-- Please Pick One --</option>";
    while($row2 = mysql_fetch_array($result2)){
        echo "<option value=\"" . $row2['DEP_ID'] . "\">" . $row2['TASK'] . "</option>";
    }
    echo "</select>";

}

?> 
```

**这是一个活生生的例子：**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:04:27.880

这是您想要的，从[如何延迟 .keyup() 处理程序直到用户停止输入？](https://stackoverflow.com/questions/1909441/jquery-keyup-delay)根据您的需要。如果/当用户停止输入 200 毫秒时，它将运行查询，时间由第二个参数设置为延迟，你可以拥有它任何你喜欢的时间。但是，我真的支持那些建议使用自动填充插件的人——为什么要重新发明轮子？

```
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
  };
})();

$(document).ready(function() {
    $('input#username').on('keyup', function() {
        delay(function(){
          var username = $('input#username').val();
        if($.trim(username) != '') {
            $.post('../inc/determine_department.php', {username: username}, function(data){
                $('div#quickTask').html(data);
            });
        }

        },200)
    });

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:54:50.287

```
$('input#username').on('keyup', function() {...}); 
```

但最好确保一次只运行一个 ajax 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:55:11.887

改变

```
 $('input#thing').on('click', function() { 
```

到

```
 $('input#username').on('keyup', function() { 
```

应该这样做，您希望`#username`输入上的 keyup 事件而不是 click 事件`#thing`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:57:23.420

基本上，点击功能仍然相同。您只需要将其影响到您的用户名输入的 keyup 事件：

```
$('#username').keyup( function() {
    var username = $('input#username').val();
    if($.trim(username) != '') {
        $.post('../inc/determine_department.php', {username: username}, function(data){
            $('div#quickTask').html(data);
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T18:57:47.830

javascript:

```
$('input#thing').keyup(function() 
```

mysql:

```
 $sql = "SELECT * FROM `quicktask` WHERE DEP_ID IN (SELECT DEPARTMENT FROM `employees` WHERE USERNAME like '".$username."%')";
    $result = mysql_query($sql);
    echo "<select name=\"QT\">";
    echo "<option value=\"\" selected=\"selected\" disabled>-- Please Pick One --</option>";
    while($row = mysql_fetch_array($result)){
        echo "<option value=\"" . $row['DEP_ID'] . "\">" . $row['TASK'] . "</option>";
    }
    echo "</select>"; 
```

# asp.net-mvc - Entity Framework4.3 和单元测试。访问冲突异常。尝试读取或写入受保护的内存

> ID：12043364
> 
> 赞同：0
> 
> 时间：2012-08-20T18:52:07.760
> 
> 标签：asp.net-mvc, unit-testing, entity-framework-4, asp.net-mvc-4, vs-unit-testing-framework

我正在使用 EF4.3、ASP.NET MVC4、Microsoft.VisualStudio.TestTools.UnitTesting。

代码工作正常。我添加了单元测试来测试控制器。单元测试失败，但有以下异常：

> 访问冲突异常。尝试读取或写入受保护的内存。这通常表明其他内存已损坏。
> 
> 在 ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(MyBusinessEntity).Assembly);

我已将 [assembly: InternalsVisibleTo("TestProject")] 添加到我的 Web 项目 AssemblyInfo.cs

有什么建议么 ？

单元测试代码：

```
 [TestMethod]
    public void GetEntity()
    {
        // Arrange
        MyControllercontroller = new MyController();

        // Act
        var result = controller.GetEntity("737464305") as JsonResult;

        dynamic data = result.Data;

        // Assert
        Assert.IsNotNull(data);
        Assert.AreEqual("0", data.ProcessStatus);

    } 
```

控制器操作使用 Entity Framework4.3 DBContext 调用存储过程。SP 调用的结果映射到一个复杂类型。SP 调用的 DBContext 代码是：

```
public virtual ObjectResult<MyEntity> MYSP(string inparam)
    {
        ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(MyEntity).Assembly);

        var inparamParameter = inparam != null ?
            new ObjectParameter("inparam", inparam) :
            new ObjectParameter("inparam", typeof(string));

        return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<MyEntity>("MYSP", inparamParameter );
    } 
```

**一般来说，代码工作正常。但是，当使用单元测试测试控制器操作时，会引发访问冲突错误。在行 ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(MyEntity).Assembly);**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:50:57.593

我发现了问题。dbContext 的 iF ProxyCreationEnabled 属性设置为 false，然后通过实体框架调用 SP 的控制器或 BL 方法上的单元测试因 AccessViolation 异常而失败。

# python - python通过字符串匹配遍历列表

> ID：12043365
> 
> 赞同：1
> 
> 时间：2012-08-20T18:52:09.073
> 
> 标签：python

我有一个字符串列表，如果列表中的字符串出现在文件名中，那么我希望 python 打开文件。问题是，我希望 python 按照字符串出现在列表中的顺序打开文件。我当前的代码按照 python 想要的顺序打开文件，并且只检查列表中的字符串是否出现在文件名中。

文件

```
dogs.html
cats.html
fish.html 
```

Python

```
list = ['fi', 'do', 'ca']
for name in glob.glob('*.html'):
  for item in list:
    if item in name:
      with open(name) as k: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:55:22.380

```
lis = ['fi', 'do', 'ca']

for item in lis:
   for name in glob.glob('*.html'):
      if item in name:
         with open(name) as k: 
```

或首先创建所有文件的列表，然后在每次迭代时过滤该列表`list`：

```
>>> names=glob.glob('*.html')
>>> lis=['fi','do','ca']
>>> for item in lis:
...    for name in filter(lambda x:item in x,names):
...         with open('name') as k: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:54:44.670

您可以创建一组匹配项：

```
matching_glob = set([name for name in glob.glob('*.html')]) 
```

然后过滤您的列表

```
list_matching_glob = filter (lambda el: el in matching_glob) filter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:01:13.373

您可以通过重复 glob 调用来简单一点：

```
names = ['fi', 'do', 'ca']
patterns = [s + "*.html" for s in names]

for pattern in patterns:
    for fn in glob.glob(pattern):
        with open(name) as k:
            pass 
```

您可以使用 os.listdir 和 glob.fnmatch 排除重复的文件系统访问，以防您处理数千个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:01:39.083

我会做这样的事情：

```
filenames = glob.glob('*.html')

for my_string in my_strings:
    for fname in (filename for filename in filenames if my_string in filename):
        with open(fname) as fobj:
            #do something. 
```

# iphone - 使用 gem 命令时越狱 iPhone 上的“懒惰符号绑定失败：找不到符号：__OSSwapInt16”

> ID：12043368
> 
> 赞同：4
> 
> 时间：2012-08-20T18:52:26.047
> 
> 标签：iphone, ios, ruby, gem, jailbreak

我在 iOS 5.1.1 上遇到了 Ruby 的问题。任何`gem`命令都会失败。如果我尝试`gem update`：

```
mobile$ gem update

Updating installed gems
dyld: lazy symbol binding failed: Symbol not found: __OSSwapInt16 Referenced from: /usr/lib/ruby/1.9.1/arm-darwin9/socket.bundle
Expected in: flat namespace

dyld: Symbol not found: __OSSwapInt16
Referenced from: /usr/lib/ruby/1.9.1/arm-darwin9/socket.bundle
Expected in: flat namespace

Trace/BPT trap: 5 
```

有趣的是`ruby -v`显示 1.9.2：

```
mobile$ ruby -v
ruby 1.9.2p0 (2010-08-18 revision 29036) [arm-darwin9] 
```

关于如何解决的任何想法？我试过通过 Cydia 删除 Ruby 包并重新安装，但它是一样的。我认为这可能与像我一样尝试在他们的 iOS 设备上使用 gems 的人有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:40:56.970

我有同样的问题。删除（重命名）socket.bundle 不出所料地产生了以下结果：

```
 ERROR:  Loading command: update (LoadError)
        no such file to load -- socket.so
    ERROR:  While executing gem ... (NameError)
        uninitialized constant Gem::Commands::UpdateCommand 
```

`gem update`编辑：通过从 ruby​​ 1.9.2-p0-10 降级到 ruby​​ 1.9.1-p429-6，我能够成功运行。使用 1.9.2 时，仍然有对 1.9.1 的引用似乎导致了上述错误。

# iphone - 适用于 iOS 的 Facebook SDK

> ID：12043373
> 
> 赞同：0
> 
> 时间：2012-08-20T18:52:43.750
> 
> 标签：iphone, objective-c, ios, facebook, facebook-ios-sdk

我有点困惑，在我的上一个项目中，我使用了 Facebook sdk，我通过下载项目[facebook / facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)并将`src`文件夹添加到我的项目中来做到这一点。

然后我将 FBConnect.h 标头导入到我的代码中并使用该`FBConnect`对象进行连接。

现在我看到我可以安装这个[适用于 iOS 的 Facebook SDK](http://developers.facebook.com/ios/)，然后使用`FBSession`对象进行连接。

这是新的吗？两者有什么不同？一个简短的解释将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:46:39.263

一旦用户登录，FBSession 就会存储您的 access_token 和有关用户的其他一些信息。如果我没记错的话，它符合单例模式，因此您不必创建它并实例化它，而是调用类方法来获取某些对象，例如 access_token。

您仍然可以使用旧类，因为它与 Facebook.h 和 FBConnect.h 在新 SDK 中的已弃用标头下一起提供。您可以用新的替换该文件夹中的所有内容，因为它同时符合旧 SDK 和新 SDK。尽管这可能不推荐，因为顾名思义，它们已被弃用。但它们现在工作得非常好。

# ruby-on-rails - Ruby on Rails：如何将用户建模为项目的“所有者”？

> ID：12043376
> 
> 赞同：1
> 
> 时间：2012-08-20T18:52:46.317
> 
> 标签：ruby-on-rails

我希望能够在代码中查询**user.items**和**item.owner**：

```
class Item < ActiveRecord::Base
  has_one :owner, :class_name => "User"
end

class User < ActiveRecord::Base
  # What goes here?
  has_many :items
end 
```

我在 Item 模型中添加了一列 owner_id，如何构造 User 模型，以便在调用 user.items 时使用 owner_id 而不是 user_id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:56:55.110

item 表需要包含一个 user_id 列。如果你想手动设置这个键，那么你应该使用：

```
... ,:foreign_key => 'owner_id' 
```

看一下：

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

和

[为 Rails 模型定义外键关系](https://stackoverflow.com/questions/904421/defining-foreign-key-relationships-for-rails-models)

# html - 文件声明错误 IE9

> ID：12043377
> 
> 赞同：0
> 
> 时间：2012-08-20T18:52:58.323
> 
> 标签：html, internet-explorer, css, internet-explorer-9

**注意：我正在回答我自己的问题，因为我无法在 SE 中找到任何关于我偶然发现并意外找到修复的特定错误的参考。希望它可以帮助某人。. . . .**

```
 <!-- some comment-->
 <! DOCTYPE html>
  . . . . .come css3 stuff here 
```

上面的 html 在 Mozilla 和 Chrome 中完美运行。. .但是，为什么它不能在 IE9 中工作？

**回答：**

在 IE9 中，文档声明显然不应该有任何注释。以下代码适用于 IE9

```
 <! DOCTYPE html>
 <!-- some comment-->
  . . . . .come css3 stuff here 
```

我不知道为什么会这样，但我在这个问题上打破了我的头脑，因为我有一些其他文件在 IE9 中运行良好（他们在文档类型之前没有评论）。. .我重新安装了IE9，终于发现了这个问题。. .

希望能帮助到你 。. . .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:38:32.887

在 Doctype 之前放置任何东西会导致它，而不仅仅是注释。

空行也会触发它。

W3C 建议您在任何浏览器中都不要在 Doctype 之前放置任何内容，即使是那些允许在其之前使用字符的浏览器，例如 Chrome 和 FF。

# c# - 使用 .EDMX 在 MVC 中定义 FK 关系

> ID：12043379
> 
> 赞同：0
> 
> 时间：2012-08-20T18:53:08.153
> 
> 标签：c#, asp.net-mvc, entity-framework, foreign-keys, asp.net-mvc-4

我刚刚开始使用 MVC 4，并且在我的应用程序中遇到了一个错误，我需要一些帮助来修复。

我有一个 Author & Book 表。Author 表是父表，您可以有多个 Books 与每个作者关联。

在我尝试删除仍然分配有书籍的作者之前，一切都运行良好。发生这种情况时，我在 SaveChanges() 收到一条错误消息，说明：

> DELETE 语句与 REFERENCE 约束“FK_Book_Author”冲突。

该错误非常有意义，但我希望应用程序向用户提供一个很好的错误消息，而不是简单地爆炸。

如何在模型中定义这种关系，以便在删除与关联的子项的记录时不会导致应用程序爆炸？

## 作者类

```
public partial class Author
{
    public Author()
    {
        this.Book = new HashSet<Book>();
    }

    [Key]
    public int AuthorId { get; set; }

    [Required]
    public string AuthorName { get; set; }

    public virtual Book Book { get; set; }
} 
```

## 书类

```
public partial class Book
{
    [Key]
    public int BookId { get; set; }

    [Required]
    public string BookName { get; set; }

    [Required]
    [ForeignKey("Author")]
    public string AuthorId { get; set; }
} 
```

## 模型

我最近开始尝试覆盖 OnModelCreating，但它似乎没有任何影响。

```
public partial class BookEntities : DbContext
    {
        public BookEntities()
            : base("name=BookEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Book>().HasRequired(p => p.Author)
                .WithMany(b => b.Books)
                .HasForeignKey(p => p.AuthorId);

            modelBuilder.Entity<Author>()
                .HasMany(p => p.Books)
                .WithRequired(b => b.Author)
                .WillCascadeOnDelete(false);

            modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
        }

        public DbSet<Book> Books { get; set; }
        public DbSet<Author> Authors { get; set; }
    } 
```

* * *

## 部分更新

*   这是关于 0..1-To-Many 关系的问题
*   我正在使用 .edmx。我刚刚了解到这完全否定了 OnModelCreating 方法。
*   看来我可以在 DeleteConfirmed 方法中添加一个 Linq 语句来阻止它崩溃，但我真的不喜欢这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:16:02.660

如果我也在使用 fluent API，我一般不使用属性，所以这段代码将完全是约定和 fluent API。

您的帖子未指定，但经典书籍=>作者模型是多对多关系。您的实体代码似乎在说只有一位作者和一本书，而您流畅的代码似乎暗示有书籍和作者的集合。

FWIW，这就是我想要的：

```
public class Author
{
    public int AuthorId { get; set; }
    public string AuthorName { get; set; }

    public virtual ICollection<Book> Books { get; set; }
}

public class Book
{
    public int BookId { get; set; }
    public string BookName { get; set; }

    public virtual ICollection<Author> Authors { get; set; }
} 
```

并在覆盖中：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Author>()
            .HasMany(a => a.Books)
            .WithMany(b => b.Authors)
            .Map(m =>
                {
                    m.ToTable("AuthorBooks");
                    m.MapLeftKey("AuthorId");
                    m.MapRightKey("BookId");
                });
} 
```

这将产生以下数据库：

![在此处输入图像描述](../Images/acf8637b0acf4ce0cb6be81a4f1c1671.png)

我相信这就是获得级联所需的全部内容，按照惯例，它应该执行级联。

如果这不是您想要的，请发布。

塔尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:58:42.937

## 解决方案

在这个问题上苦苦挣扎了一天之后，我决定将一些自定义代码放入 DeleteConfirmed 方法中，以防止出现错误并提醒用户无法删除此记录。这可能不是处理这种情况的最佳方法，但它是有效的。

```
[HttpPost, ActionName("Delete")]
public ActionResult DeleteConfirmed(int id)
{
    Author author = db.Authors.Find(id);

    // Count # of Books for this Author
    int count = (from book in db.Books
                        where book.BookId == id
                        select book.BookId).Count();

    // Prevent deletion of this record has any associated records
    if (count> 0)
    {
        TempData["errors"] = "Bad user! You can't delete this record yet!";
        return RedirectToAction("Delete");
    }
    else
    {
        db.Categories.Remove(category);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
} 
```

# c# - 表达式树参数是否需要重用相同的实例？

> ID：12043390
> 
> 赞同：3
> 
> 时间：2012-08-20T18:53:47.753
> 
> 标签：c#, expression-trees

我正在使用反射和表达式树的组合，并希望将某些属性访问器从类传回调用方法。我当前的代码有一个遍历类并返回`MemberExpression`s 列表的方法。然后调用者遍历成员表达式并创建 lambda，然后应该使用被检查类的实例调用它以返回属性的值。

以下是没有方法调用的示例（LINQPad 中的 Runnable）：

```
void Main()
{
    var t = new Test { Prop = "Test" };

    var property = t.GetType().GetProperty("Prop");

    var baseType = Expression.Parameter(typeof(Test), "baseType");
    var memberAccess = Expression.MakeMemberAccess(baseType, property);
    var lambda = Expression.Lambda<Func<Test, string>>(memberAccess, Expression.Parameter(typeof(Test), "baseType"));
    var func = lambda.Compile();
    var result = func(t);
    result.Dump();
}

class Test {
    public string Prop { get; set; }
} 
```

这不起作用，抛出此异常：

> InvalidOperationException：从范围“”引用的“UserQuery+Test”类型的变量“baseType”，但未定义

但是，如果我将 lambda 的创建更改为：

```
var lambda = Expression.Lambda<Func<Test, string>>(memberAccess, baseType); 
```

也就是说，将 替换为`Expression.Parameter`之前使用的变量，然后它就可以工作了。在我想使用它的情况下，这不是（很容易）可能的，因为我必须将原始参数与列表一起返回（当然，我可以返回一个元组，但我不希望这样做，如果它是没有必要）。

为什么它会这样工作？检查`DebugView`lambda，无论使用什么方法，它们都是完全相同的：

```
.Lambda #Lambda1<System.Func`2[UserQuery+Test,System.String]>(UserQuery+Test $baseType)
{
    $baseType.S
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:02:40.190

是的，您需要参考`ParameterExpression`，之前使用过。这也不会编译：

```
private String Foo(Test myParam)
{
  return myAnotherParam.MyProperty;
} 
```

在 lambda 中创建 new`ParameterExpression`时，您正在做同样的事情（但请注意，在制作 lambda 时，您正在以相反的顺序进行操作 - 首先，您正在构造一个方法体，然后是 - 一个方法声明）：

```
// return myAnotherParam.MyProperty;
var baseType = Expression.Parameter(typeof(Test), "baseType");
var memberAccess = Expression.MakeMemberAccess(baseType, property);

// private String Foo(MyClass myParam)
var lambda = Expression.Lambda<Func<Test, string>>(memberAccess, Expression.Parameter(typeof(Test), "baseType")); 
```

# php-5.3 - php 5.3 框架/类/函数 php 5.2

> ID：12043393
> 
> 赞同：1
> 
> 时间：2012-08-20T18:53:53.537
> 
> 标签：php-5.3, php, php-5.2

我有一个为 php 5.3 制作的网站，它使用了 php 5.3 中包含的许多功能。

我的网络服务器（至于共享主机）使用 php 5.2，而公司不支持 php 5.3。

所以我想知道是否有一个 php 框架、类、一堆函数或任何我可以用来在 php 5.2 服务器上“模拟”php 5.3 的东西？

如果是这样，什么是最好的，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:54:38.710

我不认为你可以。PHP 5.3 为该语言添加了一些新选项，这些选项甚至无法向后兼容 PHP 5.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:35:45.210

你可能会得到 80%，为 PHP 5.3 中引入的一些内容编写解决方法。但是，在语言级别上引入了很多使用 PHP 5.2 根本无法模拟的东西。

如果您真的致力于您的主机，那么您最好的机会是准确评估您现有代码正在使用 PHP 5.3 的哪些功能，然后确定这些事情是否属于您可以找到解决方法的范围内。或者，您可以简单地重写任何使用 PHP 5.3 功能的代码，以便在 5.2 下正常运行。无论哪种方式，这都可能需要大量的工作而不会带来很大的好处（假设更改主机是一种选择）。

所以有两个选择：

1.  如果这是代码*必须*在此主机上运行的情况（例如它是托管在学校服务器上的学校项目，或者类似地是公司服务器上的公司项目），我认为您最好的选择是重构您的代码以运行PHP 5.2。

2.  如果您*可以*更改主机，我建议您将其作为最佳选择。

# sql - 获取多行匹配的“和”列表的 SQL 模式？

> ID：12043395
> 
> 赞同：2
> 
> 时间：2012-08-20T18:54:00.023
> 
> 标签：sql, sqlite, list

我不是数据库程序员，但我有一个简单的数据库支持的应用程序，其中有带有标签的项目。每个项目可能有多个标签，所以我使用一个典型的联结表（像[这样](https://stackoverflow.com/questions/444251/how-to-store-a-list-in-a-db-column)），其中每一行表示具有适当 ID 的项目具有具有适当 ID 的标签的事实。

当我想做一些事情，比如选择具有给定标签的所有项目时，这非常合乎逻辑。

但是，**进行搜索的典型模式是什么`AND`？**也就是说，如果我想找到所有具有某组标签的所有项目怎么办？这是一个如此常见的操作，我认为一些介绍教程会涵盖它，但我想我没有找对地方。

我尝试的方法是`INTERSECT`首先直接使用，然后使用子查询和`IN`. 这很有效，但在我添加搜索词时会快速构建看起来很长的查询。而且，至关重要的是，这种方法似乎比将所有标签作为文本推入一个“标签”列并使用 SQLite 的全文搜索的方法慢一个数量级。（而且，正如我所期望/希望的那样，当我添加更多术语时，FTS 搜索会变得更快，而 INTERSECTS 方法似乎并非如此。）

什么是正确的设计模式，什么是让它变得活泼的正确方法？在这种情况下，我使用的是 SQLite，但我最感兴趣的是一个一般性的答案，因为这*一定*是一件很常见的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:33:38.127

以下是标准的 ANSI SQL 解决方案，它避免同步 id 的数量和 id 本身。

```
with tag_ids (tid) as (
   values (1), (2)
)
select id
from tags
where id (select tid from tag_ids)
having count(*) = (select count(*) from tag_ids); 
```

`values`PostgreSQL 和 DB2 支持子句（“行构造函数”）。对于不支持该功能的数据库，您可以将其替换为简单的“选择”，例如在 Oracle 中，这将是：

```
with tag_ids (tid) as (
   select 1 as tid from dual
   union all 
   select 2 from dual
)
select id
from tags
where id (select tid from tag_ids)
having count(*) = (select count(*) from tag_ids); 
```

对于 SQL Server，您只需省略“from dual”，因为它不需要 a`FROM`子句`SELECT`。

这假设一个标签只能被分配一次。如果不是这种情况，则需要`count(distinct id)`在`having`子句中使用 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:57:24.230

我倾向于通过以下方式使用组：

```
select id
from tags
where id in (<tag1>, <tag2>)
group by id
having count(*) = 2 
```

这将保证两者都出现。

对于无限大小的列表，您可以将 id 存储在字符串中，例如 '|tag1|tag2|tag3|' （注意结束处的分隔符）。然后你可以这样做：

```
select id
from tags
where @taglist like '%|'+tag+'|%'
group by id
having count(*) = len(@taglist) - (len(replace(@taglist, '|', '') - 1) 
```

这是使用 SQL Server 语法。但是，它说的是两件事。WHERE 子句表示标签在列表中。HAVING 子句表示匹配的数量等于列表的长度。它通过计算分隔符的数量并减去 1 来实现这一点。

# jquery - JQuery 因升级而损坏

> ID：12043397
> 
> 赞同：1
> 
> 时间：2012-08-20T18:54:05.717
> 
> 标签：jquery, jquery-ui

所以我有一个脚本可以从 NetTuts 站点移动小部件，但它使用 1.2.6 版的 JQuery。由于网站上的其他内容需要它，我需要使用更新的版本。谁能告诉我它在我的 JQuery 中失效导致它停止工作的原因。

网站可以在这里查看：

[http://dev.evaske.com/HXWP/wp-content/themes/habboxv7/test.html](http://dev.evaske.com/HXWP/wp-content/themes/habboxv7/test.html)

如您所见，这些框根本不可拖动，但当我使用 v1.2.6 时它们是可拖动的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:58:26.187

尝试将 jquery 1.7.2 与 jquery UI 一起使用。

还查看您的代码，我没有看到任何在 DOM 就绪等上运行的脚本。

打开您的 jquery.widget.js 文件并更改以下方式

```
jQuery(function() {

 .... all file content goes here ....

}); 
```

# ajax - f:ajax 动作方法没有被调用

> ID：12043398
> 
> 赞同：3
> 
> 时间：2012-08-20T18:54:11.893
> 
> 标签：ajax, jsf-2, richfaces

我正在使用具有丰富面孔的 JSF2 4。我的目标是将后端中的方法生成的请求 ID 显示到使用 ajax 的输入文本字段中。

这是我的代码片段：

* * *

```
....
    <h:outputText value="Drawer No" /> 
    <h:outputText value="*" style="color:#ff0000;"/> 
    <h:inputText id="drawer" value="#{requestBean.drawerNumber}" required="true" 
         requiredMessage="Please enter drawer number">
        <f:ajax event="change" action="#{requestBean.generateRequestId}" 
            execute="@form" render="requestId"/>
    </h:inputText>

    <h:outputText value="Request Id" /> 
    <h:inputText id="requestId" value="#{requestBean.requestId}"  readonly="true" required="true" >
    </h:inputText>
</td>
<td>
    <h:message for="requestId"  style="color:red;font-size:10pt"/>
.... 
```

豆：

```
public void generateRequestId(ActionEvent e) 
{
    FacesContext context = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) context.getExternalContext().getSession(false);
    String emp=(String) session.getAttribute("loginUser");
    System.out.println("inside ajax event" + emp);
    try {
        requestId = AdminDAO.getRequestId(emp);
    } catch (ParseException e1) {
        e1.printStackTrace();
    }
} 
```

* * *

一旦调用该方法，它将生成一个请求 ID，该请求 ID 需要呈现回请求 ID。

这段代码甚至没有调用该方法，如果我使用`<a4j:ajax`而不是`f:ajax`，它告诉我该方法不存在。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T19:56:30.093

这里，

```
<f:ajax event="change" action="#{requestBean.generateRequestId}" 
    execute="@form" render="requestId"/> 
```

`action`属性不对。你可能会混淆`<h:commandButton action>`. 您需要该`listener`属性。

```
<f:ajax listener="#{requestBean.generateRequestId}" 
    execute="@form" render="requestId" /> 
```

*（请注意，我删除了该属性；`event`它已经默认`change`为`<h:inputText>`*

和这里，

```
public void generateRequestId(ActionEvent e) 
```

`ActionEvent`论据是错误的。你可能会混淆`<h:commandButton actionListener>`. 你需要这个[`AjaxBehaviorEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/AjaxBehaviorEvent.html)论点。

```
public void generateRequestId(AjaxBehaviorEvent e) 
```

如果您不需要任何东西，您也可以在必要时将其完全删除。这是可选的。

```
public void generateRequestId() 
```

### 也可以看看：

*   [`<f:ajax>`标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)

# javascript - 我可以将社交按钮脚本放入一个组合文件中吗？

> ID：12043399
> 
> 赞同：0
> 
> 时间：2012-08-20T18:54:13.050
> 
> 标签：javascript, facebook, social, pinterest

我正在处理的网站有多个社交按钮 - Facebook、Twitter、Google+、Pinterest 等。

其中大多数都有自己的外部 .js 文件以包含在您的页面上。对于一个关注 http 请求的网站，将所有社交 .js 文件合并为一个有什么缺点？

我最关心的是供应商何时更新脚本。这种情况的通常协议是什么？保留额外的请求，还是冒着使用过时代码的风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:57:32.750

浏览器缓存应该已经为您解决了这个问题。使用供应商脚本的一个巨大好处是每个网站都链接到该供应商脚本的同一个副本，因此它们很可能已经缓存在浏览器中（由于浏览器访问之前的页面），因此没有 http 请求当它们已经在浏览器缓存中时需要加载它们。如果您使用自己的副本，则必须为您的站点重新下载该副本，并且您将无法利用该代码已缓存在浏览器中的事实。

除了缓存之外，大多数像这样的供应商都使用 CDN 来托管脚本，这是一个分布式和优化的位置，可以更快地下载，应该能够比您的托管站点更快地下载脚本。

除了缓存问题之外，这些脚本需要保留在供应商的站点上，并由供应商在供应商认为合适的时候进行维护。如果他们想改变他们，那是他们的特权。您不能将它们组合成您自己的组合脚本，也不应该。他们可以随时更改其网站的工作方式，如果您使用复制的过时脚本，您的功能很容易中断。

根据您使用它们的方式，您可能能够更改第三方脚本，以便动态加载它们并在加载常规页面脚本后加载。这可能会延迟他们 UI 的呈现，但可能会让您的页面加载得更快一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:59:46.797

合并的缺点：

*   无法轻松更新供应商的 JS 文件。
*   无法利用供应商的 CDN。（您将合并的版本存储在您的服务器上。）

第一个问题的解决方案是在您的服务器上运行一个定期合并最新版本的社交库的 cron 作业。此组合版本将提供给您的用户。

# database - Neo4j ...如何获得我的数据的可视化表示？

> ID：12043402
> 
> 赞同：1
> 
> 时间：2012-08-20T18:54:23.513
> 
> 标签：database, nosql, neo4j, embedded-database

我已经用一些数据加载了 Neo4j 的嵌入式实例，并且想知道我现在如何查看这个图表。我在这里看到了一个介绍视频：http: [//video.neo4j.org/m9FD/how-to-get-started-with-neo4j-119/](http://video.neo4j.org/m9FD/how-to-get-started-with-neo4j-119/)。在这里，这个人在他的网络浏览器中打开了一个实例，`Heroku`不仅可以看到图表中的数据，还可以输入新数据并搜索`nodes`和`relationships`。如何查看我输入到图形数据库中的数据？

```
graphDb = new GraphDatabaseFactory().newEmbeddedDatabase( "var/graphDb" );
        registerShutdownHook(graphDb);

        WrappingNeoServerBootstrapper srv = new WrappingNeoServerBootstrapper( graphDb );
        srv.start();

        for (Statement s : statements){

            Transaction tx = graphDb.beginTx();
            try{
                firstNode = graphDb.createNode();
                firstNode.setProperty("message", s.getFirstTerm());
                secondNode = graphDb.createNode();
                secondNode.setProperty( "message", s.getSecondTerm());

                relation = firstNode.createRelationshipTo(secondNode, s.getRelationshipType());
                //relation.setProperty("message", "crazy cruel");
                tx.success();
            }
            finally{
                tx.finish();
            }
        }
        srv.stop();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T20:43:36.837

你也可以

*   启动服务器作为嵌入式实例的一部分，请参阅[http://docs.neo4j.org/chunked/snapshot/server-embedded.html](http://docs.neo4j.org/chunked/snapshot/server-embedded.html)
*   使用Neoclipse并将其指向您的（关闭）数据库，请参阅[http://vimeo.com/12014944和](http://vimeo.com/12014944)[https://github.com/neo4j/neoclipse](https://github.com/neo4j/neoclipse)

*   安装 Neo4j 服务器[http://docs.neo4j.org/chunked/snapshot/server.html](http://docs.neo4j.org/chunked/snapshot/server.html)，指出你的数据库并使用 webadmin 工具进行可视化。

那行得通吗？

# c# - 在 Azure Worker Role 中使用 kernel32 CreateThread/TerminateThread

> ID：12043408
> 
> 赞同：1
> 
> 时间：2012-08-20T18:54:50.927
> 
> 标签：c#, azure, dllimport, azure-worker-roles, native-code

我有这段代码需要使用，但让我望而却步的是，[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717%28v=vs.85%29.aspx)说 TerminateThread*适用于：仅桌面应用程序*。我想知道我是否可以在 azure Worker 角色中使用此代码，特别是在`waiishost.exe`我用来运行 Worker 线程的进程中？

```
[DllImport("Library.dll")]
public static extern void InfiniteLoop();

[DllImport("kernel32")]
private static extern int CreateThread(
   IntPtr lpThreadAttributes,
   UInt32 dwStackSize,
   IntPtr lpStartAddress,
   IntPtr param,
   UInt32 dwCreationFlags,
   UInt32 lpThreadId
 );

[DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
public static extern int TerminateThread(int hThread);

[DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
public static extern int GetLastError();

private delegate int InvokeInfiniteLoop(IntPtr args);

static void Main(string[] args)
{
      InvokeInfiniteLoop invokeInfiniteLoop = (args1) =>
                                                    {
                                                        InfiniteLoop();
                                                        return 0;
                                                    };
     IntPtr infiniteLoopPtr = Marshal.GetFunctionPointerForDelegate(invokeInfiniteLoop);
     int handle = CreateThread(IntPtr.Zero, 0, infiniteLoopPtr, IntPtr.Zero, 0, 0);
     Thread.Sleep(TimeSpan.FromSeconds(5));
     int terminated = TerminateThread(handle);
     Console.WriteLine(terminated);
} 
```

**编辑：**

经过进一步的研究（正如我从一开始就怀疑的那样），这种解决方法是完全错误的。创建和终止非托管代码将泄漏堆栈。我将不得不创建一个单独的可执行文件，该可执行文件将被 Process.Kill(); 终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:31:20.487

“仅适用于：桌面应用程序”是指 Windows 8 桌面应用程序和 Windows 8 Metro 应用程序之间的区别。

# java - X 和 Y 作为浮点数而不是整数

> ID：12043416
> 
> 赞同：4
> 
> 时间：2012-08-20T18:55:13.390
> 
> 标签：java, swing, canvas, game-loop

最近我决定开始做一个项目，一个小型 2D 游戏。我已经有一些重力工作了。我开始在 java 方面变得更好，但在这个项目之前我从未使用过 java AWT 或与渲染相关的任何东西，基本上这是我的问题：

我有一个角色以每刻 1 个像素的速度行走，这太慢了。如果我把它提高到只有 2 滴答，它太快了，而且角色几乎是在奔跑。我想要介于两者之间，但问题是 X 和 Y 存储为`int`，如果我将它们更改为`float`，我将不得不将它们转换为`int`带有 (int) 之类的东西，这将导致删除浮动数字.

我尝试的是每 2 个滴答声而不是 1 个滴答声更新角色的 X，或者使游戏循环变慢，但它看起来相当不稳定。如果有人对此有好的解决方案，请留言。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:00:14.840

从*模型*中拆分*视图*（并查找 MVC 模式！）

 *在模型中使用浮点坐标，仅在视觉显示中将它们转换为整数像素。*

# c++ - 条件是每 x 次循环只做一次

> ID：12043422
> 
> 赞同：3
> 
> 时间：2012-08-20T18:55:46.557
> 
> 标签：c++, math, conditional-statements

我无法弄清楚，所以也许这里有人可以帮助我。我有一个带有一个参数的函数，并且在该函数内部有我想每 x 次运行一次的代码。

```
void doSomething(int _arg){
    // do something every 250 times
} 
```

该函数被重复调用，但参数不增加 1。例如，函数调用可能看起来像这样，我希望函数内部的条件每 250 次运行一次。

```
doSomething(1); // do something
doSomething(130);
doSomething(230);
doSomething(310); // 250 was passed, do something
doSomething(420);
doSomething(570); // 2*250 was passed, do something 
```

我不能只做类似的事情，`if(_arg % 250 == 0)`因为 的值`_arg`是不规则的（但间隔总是小于 250）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T18:58:42.080

静态变量怎么样：

```
void doSomething(int _arg){
    static int x = 0;

    if (_arg > x) {
        x += 250;  //update x to be crossed next time
        // do something
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:01:51.757

您可以使用额外的变量，例如全局变量或静态变量：

```
void doSomething(int _arg)
{
    static unsigned int next_target = 0;
    if (_arg >= next_target)
    {
        // do something special
        next_target = _arg - _arg % 250 + 250;  // set next_target to smallest
                                                // multiple of 250 above _arg
    }
} 
```

这假设接收`10`then`1002`意味着该动作必须发生 خدمغ 两次。

如果每次调用函数以赶上时它必须继续执行操作`next_target`，您可以这样做：

```
void doSomething(int _arg)
{
    static unsigned int next_target = 0;
    if (_arg >= next_target)
    {
        // do something special
        next_target += 250;
    }
} 
```

或者，如果它应该立即采取行动直到赶上`next_target`，您可以这样做：

```
void doSomething(int _arg)
{
    static unsigned int next_target = 0;
    while (_arg >= next_target)
    {
        // do something special
        next_target += 250;
    }
} 
```

# python - 无法在 Python 中创建目录（可以手动创建..需要管理员权限）

> ID：12043424
> 
> 赞同：0
> 
> 时间：2012-08-20T18:55:48.723
> 
> 标签：python, windows

当我`os.mkdir()`为某个目录运行时。我无法创建目录。但是，我可以手动执行此操作（在创建之前会出现管理对话框，这是 Windows 7 顺便说一句）。我将如何`os.mkdir()`以管理员身份运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:00:59.847

Python 是一种脚本语言。为了拥有管理权限，Python 进程也必须以管理员身份运行。此外，您可能对以下内容感兴趣：[从 Python 脚本中请求 UAC 提升？](https://stackoverflow.com/questions/130763/request-uac-elevation-from-within-a-python-script)

# php - 提交表单时丢失我的 $_GET 变量

> ID：12043427
> 
> 赞同：2
> 
> 时间：2012-08-20T18:56:04.920
> 
> 标签：php, html, forms, url, get

我正在创建一个允许潜在员工列出参考的小型应用程序。列出的参考文献会收到一封电子邮件，其中包含`URL`末尾带有唯一字符串的 a。

（例如：）`www.the-address.com?url=503241c65b8fe4_07914393`。然后，该引用遵循此唯一`URL`性以代表员工上传一封信。

但是每次提交任何表单时，URL的随机字符串部分都会消失

（例如：） `www.the-address.com?url=`。

我不明白为什么会发生这种情况，因为我提交了这样的表格：

```
<form action="upload_letter.php?url="' . $url . '" id="form_id" method="POST">; 
```

哪里`$url = $_GET['url']`。

发生这种情况的任何一般原因？如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:02:07.600

```
<?php
$data = array('url' => $url);

?>
<form action="upload_letter.php?<?php echo http_build_query($data) ?>" id="form_id" method="POST"> 
```

或者您可以将 URL 添加为隐藏`<input>`

```
<form action="upload_letter.php" id="form_id" method="POST">
    <input type="hidden" name="url" value="<?php echo htmlentities($url); ?>">
    .
    .
    .
</form> 
```

然后您可以通过 访问 URL `$_POST['url']`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:04:04.353

如果你真的有你写的代码，你会`action`用第二个`"`字符过早地关闭属性。试试这个：

```
echo '<form action="upload_letter.php?url='.urlencode($url).'" id="form_id" method="POST">'; 
```

你拥有它的方式最终会像 HTML 一样：

```
<form action="upload_letter.php?url="google.de" id="form_id"...> 
```

带有 google.de 之外的属性值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:14:33.100

如果您的代码是您在 PHP 文件中所写的：那就错了。不 ”;” 在 HTML 行的末尾，不能用“.”连接字符串 在 HTML 中。您必须打开 PHP 标记并在其中编写 PHP 代码。例如：

```
<form action="upload_letter.php?url=<?php echo $url; ?>" id="form_id" method="POST"> 
```

但是你也可以使用像 Wolfgang 这样的回声回答

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:57:36.083

更改`method="POST"`为`method="GET"`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-20T18:58:53.217

可能 $url 为空或未定义。检查 HTML 代码以查看其是否已写入表单的操作中。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-20T18:59:15.227

为什么要加上单引号：

```
 . $url . 
```

?

编辑：另一种说法：你确定你在`<?php ?>`标签上吗？

# c# - 为什么这个正则表达式不适用于多个扩展？

> ID：12043432
> 
> 赞同：-3
> 
> 时间：2012-08-20T18:56:47.697
> 
> 标签：c#, regex

以下代码并非一直有效。我看过无数的正则表达式示例，但很少有解决多个扩展名的使用。

```
public bool FAQPNFileCheck(string name)
{
    if (name.Length > 0)
    {

        Match match = Regex.Match(name, 
                                  @"\\([A-Za-z0-9_-]+)\.(jpg|doc|pdf)$", 
                                  RegexOptions.IgnoreCase);

        // Here we check the Match instance.
        if (match.Success)
        {
            // Finally, we get the Group value and display it.
            string key = match.Groups[1].Value;
            return true;
            //Console.WriteLine(key);
        }

    }
    if (name == "")
    {
        return true;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:59:55.283

如果您正在寻找这样的东西：this_is_not_a_picture.jpg.doc，正如安德烈所问的那样，您不允许`.`在正则表达式中使用文字点 ( ) 直到最后。

这应该这样做：

`\\([A-Za-z0-9._-]+)\.(jpg|doc|pdf)$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:06:11.890

尝试从`RightToLeft`

```
Regex r=new Regex(@"([A-Za-z0-9_-]+)\.(jpg|doc|pdf)$",RegexOptions.RightToLeft); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T19:06:05.527

好的，所以毕竟，您想允许带有**jpg**、**doc**或**pdf**扩展的文件，对吗？

让我们试试这个：

```
Regex.Match(name, @"^(?i:[A-Z0-9\_\-]+)\.(?i:jpg|doc|pdf)$", RegexOptions.Compiled); 
```

正如**latkin 所**指出的，如果您打算使用该`Regex`对象一次，那么`RegexOptions.Compiled`这不是一个好的选择，因为实例化该对象需要更长的时间。但是，匹配会运行得更快，因此如果您要在多个文件上使用它（正如我所假设的那样），最好保留它，然后将其保留在一个`Regex`实例中。

# python - mod_wsgi 中是否有清理阶段？

> ID：12043434
> 
> 赞同：1
> 
> 时间：2012-08-20T18:57:17.413
> 
> 标签：python, django, django-views, mod-wsgi

我正在尝试在视图的 Django (mod_wsgi) 中进行一些日志记录。然而，我想这样做，这样客户端就不会像[mod_perl](http://perl.apache.org/docs/2.0/user/handlers/http.html#PerlCleanupHandler)中可用的 perlcleanuphandler 阶段那样被阻止。请注意“它用于在服务请求后立即执行一些代码（客户端离开）”这一行。这正是我想要的。

我想为客户提供服务，然后我想进行日志记录。mod_wsgi 或 Django 中的代码是否有一个很好的插入点？我[在这里](https://stackoverflow.com/questions/4313508/execute-code-in-django-after-response-has-been-sent-to-the-client)和[这里](http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode)查看了建议。但是，在这两种情况下，当我在 url 上放置一个简单`time.sleep(10)`的 curl/wget 时，curl 都不会在 10 秒内返回。

我什至尝试`__del__`按照其中一条评论的建议将 time.sleep 放入 HttpResponse 对象中的方法中，但仍然没有骰子。

我知道我可能可以将日志记录数据放入队列并进行一些背景处理来存储日志，但如果有其他更简单/更容易的方法，我想避免这种方法。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:14:32.750

请参阅以下位置的文档：

[http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode](http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode)

对于特定于 WSGI（不是特定于 mod_wsgi）的方式。

正如其他人指出的那样，Django也可能有自己的做事方式，尽管我不知道在所有响应内容写回客户端之后是否会触发它。

# mysql - 使用 sum() 来模拟行的 count()

> ID：12043436
> 
> 赞同：0
> 
> 时间：2012-08-20T18:57:17.357
> 
> 标签：mysql

我想计算特定字段 = 'Q1' 的行数。

我通常使用 count(particular_field)，但这不允许我仅在该字段 = 'Q1' 时进行计数。

查询是否`SUM(particular_field = 'Q1')`适用于这个问题？还是我能做到`count(particular_field = 'Q1')`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:00:14.403

你可以做

```
select count(*)
from table
where particular_field = 'Q1' 
```

或者

```
select sum(case when particular_field ='Q1' then 1 else 0 end)
from table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:59:28.583

您应该能够使用`CASE`您的语句`SUM()`（参见[SQL Fiddle](http://sqlfiddle.com/#!2/48eec/2)）

```
SELECT SUM(CASE WHEN particular_field = 'Q1' THEN 1 ELSE 0 END) yourCount
FROM yourTable 
```

或者（参见[SQL Fiddle](http://sqlfiddle.com/#!2/48eec/3)） - 这将为您提供计数和每个字段的列表。如果您只想要一个值，则使用`WHERE`子句进行过滤：

```
select count(*), particular_field 
from yourTable
group by particular_field 
```

# ldap - 如何使用 LDAP 配置 WSO2 身份？

> ID：12043440
> 
> 赞同：0
> 
> 时间：2012-08-20T18:57:26.620
> 
> 标签：ldap, wso2, identity, openldap, wso2is

如何使用 LDAP 配置 WSO2 身份？

我将我的 user-mgt.xml 更改为：

```
 <UserManager>
    <Realm>
        <Configuration>
            <AdminRole>admin</AdminRole>
            <AdminUser>
            <UserName>admin</UserName>
            <Password>admin</Password>
            </AdminUser>
        <EveryOneRoleName>everyone</EveryOneRoleName>
        <Property name="url">jdbc:h2:repository/database/WSO2CARBON_DB;DB_CLOSE_ON_EXIT=FALSE</Property>
        <Property name="userName">wso2carbon</Property>
        <Property name="password">wso2carbon</Property>
        <Property name="driverName">org.h2.Driver</Property>
        <Property name="maxActive">50</Property>
        <Property name="maxWait">60000</Property>
        <Property name="minIdle">5</Property>
        </Configuration>

        <UserStoreManager class="org.wso2.carbon.user.core.ldap.ApacheDSUserStoreManager">
        <Property name="ReadOnly">true</Property>
        <Property name="ConnectionURL">ldap://ldap.curitiba.pr.gov.br:389</Property>
        <Property name="ConnectionName">o=ICI</Property>
        <Property name="UserNameListFilter">(objectClass=person)</Property>
        <Property name="UserEntryObjectClass">wso2Person</Property>
        <Property name="UserSearchBase">ou=users,dc=ICI,ou=domains,o=ICI</Property>
        <Property name="UserNameSearchFilter">(&amp;(objectClass=person)(uid=?))</Property>
        <Property name="UserNameAttribute">uid</Property>
        <Property name="PasswordJavaScriptRegEx">[\\S]{5,30}</Property>
        <Property name="UsernameJavaScriptRegEx">[\\S]{3,30}</Property>
        <Property name="UsernameJavaRegEx">^[^~!@#$;%^*+={}\\|\\\\&lt;&gt;]{3,30}$</Property>
        <Property name="RolenameJavaScriptRegEx">[\\S]{3,30}</Property>
        <Property name="RolenameJavaRegEx">^[^~!@#$;%^*+={}\\|\\\\&lt;&gt;]{3,30}$</Property>
        <Property name="ReadLDAPGroups">false</Property>
        <Property name="WriteLDAPGroups">false</Property>
        <Property name="EmptyRolesAllowed">false</Property>
        <Property name="GroupSearchBase">ou=Groups,dc=wso2,dc=org</Property>
        <Property name="GroupNameListFilter">(objectClass=groupOfNames)</Property>
        <Property name="GroupEntryObjectClass">groupOfNames</Property>
        <Property name="GroupNameSearchFilter">(&amp;(objectClass=groupOfNames)(cn=?))</Property>
        <Property name="GroupNameAttribute">cn</Property>
        <Property name="MembershipAttribute">member</Property>
        <Property name="UserRolesCacheEnabled">true</Property>
        </UserStoreManager> 
    </Realm>
    </UserManager> 
```

但它不起作用。

以下是日志的内容：

```
[2012-08-20 18:32:03,209]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Starting WSO2 Carbon...
[2012-08-20 18:32:03,209]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Operating System : Linux 2.6.37.6-smp, i386
[2012-08-20 18:32:03,209]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java Home        : /usr/lib/java
[2012-08-20 18:32:03,209]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java Version     : 1.6.0_25
[2012-08-20 18:32:03,210]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java VM          : Java HotSpot(TM) Server VM 20.0-b11,Sun Microsystems Inc.
[2012-08-20 18:32:03,210]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Carbon Home      : /soa/srvapp/IdentityServer
[2012-08-20 18:32:03,210]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java Temp Dir    : /soa/srvapp/IdentityServer/tmp
[2012-08-20 18:32:03,210]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  User             : root, en-US, America/Sao_Paulo
[2012-08-20 18:32:06,645]  INFO {org.wso2.carbon.ldap.server.configuration.LDAPConfigurationBuilder} -  KDC server is disabled.
[2012-08-20 18:32:06,649]  INFO {org.wso2.carbon.ldap.server.DirectoryActivator} -  Initializing Directory Server with working directory /soa/srvapp/IdentityServer/repository/data/org.wso2.carbon.directory and port 10390
[2012-08-20 18:32:10,665] ERROR {org.wso2.carbon.user.core.internal.Activator} -  Cannot start User Manager Core bundle
java.lang.NullPointerException
        at org.wso2.carbon.user.core.config.RealmConfigXMLProcessor.buildRealmConfiguration(RealmConfigXMLProcessor.java:170)
        at org.wso2.carbon.user.core.common.DefaultRealmService.buildBootStrapRealmConfig(DefaultRealmService.java:150)
        at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:86)
        at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:124)
        at org.wso2.carbon.user.core.internal.Activator.startDeploy(Activator.java:64)
        at org.wso2.carbon.user.core.internal.BundleCheckActivator.start(BundleCheckActivator.java:54)
        at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:782)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:773)
        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:754)
        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:352)
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:370)
        at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1068)
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:557)
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:464)
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:248)
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:445)
        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:220)
        at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:330) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:39:37.060

这看起来像是完整堆栈跟踪的一部分。无论如何，我在 user-mgt.xml 中看到一个明显的无效配置。您使用了一个组织单位对象作为错误的连接名称。

```
<Property name="ConnectionName">o=ICI</Property> 
```

您必须使用 OpenLDAP 中的有效用户作为连接名称。例如，

```
<Property name="ConnectionName">cn=SomeUser,ou=users,dc=ICI,ou=domains,o=ICI</Property> 
```

# linux - CRON 闹钟 Linux Mint 突然停止

> ID：12043446
> 
> 赞同：0
> 
> 时间：2012-08-20T18:58:07.473
> 
> 标签：linux, bash, cron, clock, alarm

我是 linux 新手，我正在学习使用 bash 和 cron 编写闹钟脚本。该脚本在 bash 中运行良好，通过双击它可以正常工作，但不能从 cron 运行；一旦 cron 调用脚本，警报就会响起一次（似乎是一个循环），然后停止，甚至不显示对话框（zenity）。我正在使用 Linux Mint 13 Maya XFCE。

这是我的 crontab 设置

```
* * * * * /home/x/Documents/MyScripts/Cron/BeepAlarm "Wake Up" 
```

这是我的脚本

```
!#/bin/bash

# Initialize Variables
Text=$1
Title="Alarm"
OkLabel="Snooze"
CancelLabel='Shut It Up!'
Icon=/home/x/.icons/actions/48/appointment-new.png # Won't work
SnoozeTimeout=120
AlarmCycles=100
shopt expand_aliases
alias vol='amixer -q -c 0 sset Beep'
vol 25% # Heart friendly
rm -f LoopMode # Just in case =P

# Dialog Box Function
_MsgBox () {
    if zenity --question --title="$Title" \
    --window-icon=$Icon --ok-label="$OkLabel" \
    --cancel-label="$CancelLabel" --text="$Text"
    then
        echo 1 > LoopMode
    else
        echo 2 > LoopMode
        #kill -TERM `jobs -p` # Won't work
    fi
}

# Alarm Loop
while [ $AlarmCycles -gt 0 ]; do
    case `cat LoopMode` in
        "") # Question Box
            echo 0 > LoopMode
            _MsgBox &
            ;;

        1)  # Snooze
            vol 25%
            rm -f LoopMode
            sleep $SnoozeTimeout
            ;;

        2)  # Stop Alarm
            break # But don't sleep again
            ;;

        *)  # Get on my nerves
            beep -r 4 -l 20 -f 2000; sleep 0.5
            beep -r 4 -l 20 -f 4000; sleep 0.5
            AlarmCycles=$((AlarmCycles-1))
            vol 5%+

    esac
done

# Housekeeping~
kill $(($!+2)) # I don't know a better way to kill zenity Dialog
vol 25%   #  =)
rm -f LoopMode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:14:43.063

正如罗布建议的那样：

```
* * * * * env DISPLAY=:0.0 /home/x/Documents/MyScripts/Cron/BeepAlarm "Wake Up" 
```

PS：不好意思，没注意手续

# php - 当我收到 PayPal 付款时运行脚本

> ID：12043448
> 
> 赞同：0
> 
> 时间：2012-08-20T18:58:09.537
> 
> 标签：php, paypal, notifications

我想进行设置，以便当用户通过 PayPal 向我付款时，将运行 PHP 脚本。如何设置这种通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:59:07.920

它被称为[IPN](https://developer.paypal.com/api/nvp-soap/ipn)。您只需要进入您的设置，启用 IPN，告诉它哪个文件将处理回调，然后编写您的 php 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:07:03.723

这是我使用 php 处理 paypal ipns 的方法

```
<?php
if($_POST){

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {
// check the payment_status is Completed

// assign posted variables to local variables - NOT NECESSARY..
$receiver_email = mysql_real_escape_string($_POST['receiver_email']);
$payer_email = mysql_real_escape_string($_POST['payer_email']);
$business_id = mysql_real_escape_string($_POST['item_number']);
$payment_gross = mysql_real_escape_string($_POST['mc_gross']);
$item_name = mysql_real_escape_string($_POST['item_name']);
$currency = mysql_real_escape_string($_POST['mc_currency']);
$payment_date = mysql_real_escape_string($_POST['payment_date']);
$payment_status = mysql_real_escape_string($_POST['payment_status']);
$address_street = mysql_real_escape_string($_POST['address_street']);
$first_name = mysql_real_escape_string($_POST['first_name']);
$last_name = mysql_real_escape_string($_POST['last_name']);
$address_street = mysql_real_escape_string($_POST['address_street']);
$address_city = mysql_real_escape_string($_POST['address_city']);
$address_state = mysql_real_escape_string($_POST['address_state']);
$address_country_code = mysql_real_escape_string($_POST['address_country_code']);
$address_zip = mysql_real_escape_string($_POST['address_zip']);
$quantity = mysql_real_escape_string($_POST['quantity']);
$payment_fee = mysql_real_escape_string($_POST['mc_fee']);
$address_name = mysql_real_escape_string($_POST['address_name']);
$payment_type = mysql_real_escape_string($_POST['payment_type']);
$payer_business_name = mysql_real_escape_string($_POST['payer_business_name']);
$item_number = mysql_real_escape_string($_POST['item_number']);
$transaction_subject = mysql_real_escape_string($_POST['transaction_subject']);
$parent_txn_id = mysql_real_escape_string($_POST['parent_txn_id']);
$txn_id = mysql_real_escape_string($_POST['txn_id']);
$custom = mysql_real_escape_string($_POST['custom']);

//insert into payments table
    $result = mysql_query("INSERT INTO payments (payment_date, payment_type, receiver_email, payer_email, gross_amt, quantity, currency, payment_status, paypal_fee, transaction_subject, item_name, item_number, first_name, last_name, payer_business_name, address_name, address_street,address_city,address_state,address_zip,address_country_code,parent_txn_id, txn_id, custom) VALUES ('$payment_date','$payment_type', '$receiver_email', '$payer_email', '$payment_gross','$quantity','$currency','$payment_status','$payment_fee','$transaction_subject','$item_name','$item_number','$first_name','$last_name','$payer_business_name','$address_name','$address_street','$address_city','$address_state','$address_zip','$address_country_code','$parent_txn_id','$txn_id','$custom')") or die(mysql_error());       

//end of if invalid 
}
else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation
}
}
fclose ($fp);
}

//end of post
}

 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:08:31.763

PayPal 提供即时付款通知系统，您必须通过您的帐户进行设置。

这是他们指南的链接，可帮助您入门。 [https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf)

他们还为您的 IPN 侦听器提供模板。这是PHP中的一个：

```
<?php
// read the post from PayPal system and add 'cmd'
$req = 'cmd=' . urlencode('_notify-validate');

foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: www.paypal.com'));
$res = curl_exec($ch);
curl_close($ch);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

if (strcmp ($res, "VERIFIED") == 0) {
    // check the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment
}    
else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

# javascript - 未复制 JavaScript 原型

> ID：12043454
> 
> 赞同：0
> 
> 时间：2012-08-20T18:58:39.563
> 
> 标签：javascript, node.js, coffeescript

出于某种原因，我用 CoffeeScript 编写的类没有复制原型。

这是我正在使用的确切代码：

```
module.exports = class ListQueue
  constructor: ->
    @queue = []
    @queueIds =[]
    @currentId = 0

  # Adds the given element to the queue.
  # Returns the index of the element.
  add: (el) ->
    @queueIds.push @currentId
    @queue.push el
    @currentId++ # return @lastIndex, then increment

  shift: ->
    @queueIndexes.shift()
    @queue.shift()

  # Returns the index in the @queue array for the given id.
  queueIndex: (id) ->
    for queueIndex, i in queueIndexes
      if queueIndex is id
        return i
    undefined

  get: (id) ->
    index = @queueIndex id
    @queue[index]

  length: ->
    @queue.length

  remove: (id) ->
    index = @queueIndex id
    if index?
      @queueIds = @queueIds.slice index, index
      @queue = @queue.slice index, index
      true
    else
      false 
```

正如预期的那样，这是该类的原型：

```
 { add: [Function],
  shift: [Function],
  queueIndex: [Function],
  get: [Function],
  length: [Function],
  remove: [Function] } 
```

但这很奇怪：`new ListQueue`实际上给了我这个：

```
 { queue: [], queueIds: [], currentId: 0 } 
```

我正在使用 Node.JS 0.8.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:05:00.390

do 函数实际上是存在的，如果你执行

```
new Test().do() 
```

你会得到“测试”

如果您想要智能感知类型支持，请先尝试添加构造函数。它将创建函数变量并绑定它们，如下所示：

```
this.LoadData = __bind(this.LoadData, this); 
```

这将允许您显式调用它们。

# magento - Magento - 如何创建“十进制”属性类型

> ID：12043457
> 
> 赞同：9
> 
> 时间：2012-08-20T18:58:51.937
> 
> 标签：magento, magento-1.5, entity-attribute-value

我在网上做了一些搜索，但我还没有找到这个问题的任何答案。我有一种情况，我需要一个十进制值的产品属性，它必须支持负数和正数，并且还必须是可排序的。出于某种原因，Magento 没有“十进制”属性类型。唯一使用十进制值的类型是价格，但它不支持负数。如果我使用“文本”作为类型，它支持我想要的任何内容，但它不能正确排序，因为它将值视为字符串而不是浮点数。通过手动编辑 eav_attribute 表并将“frontend_input”从“price”更改为“text”，但保留“backend_type”，我已经能够解决这个问题，就像其他人在我发现的帖子中一样 作为“十进制”。这很好用......直到有人在管理面板中编辑该属性。保存属性后，Magento 会注意到 frontend_input 是 'text' 并将 'backend_type' 更改为 'varchar'。我能想到的唯一解决方法是创建一个自定义属性类型，但我不确定从哪里开始，我在网上找不到任何详细信息。

有没有其他人遇到过这个问题？如果是这样，你做了什么来纠正它？如果我需要创建自定义属性类型，您是否有任何提示，或者您可以在任何教程中指出我这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:19:24.103

您要做的是创建自定义属性类型。

这可以通过首先创建一个安装程序脚本来完成（这会更新数据库）。

```
startSetup();

$installer->addAttribute('catalog_product', 'product_type', array(
    'group'             => 'Product Options',
    'label'             => 'Product Type',
    'note'              => '',
    'type'              => 'dec',    //backend_type
    'input'             => 'select', //frontend_input
    'frontend_class'    => '',
    'source'            => 'sourcetype/attribute_source_type',
    'backend'           => '',
    'frontend'          => '',
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE,
    'required'          => true,
    'visible_on_front'  => false,
    'apply_to'          => 'simple',
    'is_configurable'   => false,
    'used_in_product_listing'   => false,
    'sort_order'        => 5,
));

$installer->endSetup(); 
```

之后，您需要创建一个名为的自定义 php 类：

无论_Sourcetype_Model_Attribute_Source_Type

并在那里粘贴：

```
class Whatever_Sourcetype_Model_Attribute_Source_Type extends Mage_Eav_Model_Entity_Attribute_Source_Abstract
{
    const MAIN = 1;
    const OTHER = 2;

public function getAllOptions()
{
    if (is_null($this->_options)) {
        $this->_options = array(
            array(
                'label' => Mage::helper('sourcetype')->__('Main Product'),
                'value' =>  self::MAIN
            ),
            array(
                'label' => Mage::helper('sourcetype')->__('Other Product'),
                'value' =>  self::OTHER
            ),
        );
    }
    return $this->_options;
}

public function toOptionArray()
{
    return $this->getAllOptions();
}

public function addValueSortToCollection($collection, $dir = 'asc')
{
    $adminStore  = Mage_Core_Model_App::ADMIN_STORE_ID;
    $valueTable1 = $this->getAttribute()->getAttributeCode() . '_t1';
    $valueTable2 = $this->getAttribute()->getAttributeCode() . '_t2';

    $collection->getSelect()->joinLeft(
        array($valueTable1 => $this->getAttribute()->getBackend()->getTable()),
        "`e`.`entity_id`=`{$valueTable1}`.`entity_id`"
        . " AND `{$valueTable1}`.`attribute_id`='{$this->getAttribute()->getId()}'"
        . " AND `{$valueTable1}`.`store_id`='{$adminStore}'",
        array()
    );

    if ($collection->getStoreId() != $adminStore) {
        $collection->getSelect()->joinLeft(
            array($valueTable2 => $this->getAttribute()->getBackend()->getTable()),
            "`e`.`entity_id`=`{$valueTable2}`.`entity_id`"
            . " AND `{$valueTable2}`.`attribute_id`='{$this->getAttribute()->getId()}'"
            . " AND `{$valueTable2}`.`store_id`='{$collection->getStoreId()}'",
            array()
        );
        $valueExpr = new Zend_Db_Expr("IF(`{$valueTable2}`.`value_id`>0, `{$valueTable2}`.`value`, `{$valueTable1}`.`value`)");

    } else {
        $valueExpr = new Zend_Db_Expr("`{$valueTable1}`.`value`");
    }

    $collection->getSelect()
        ->order($valueExpr, $dir);

    return $this;
}

public function getFlatColums()
{
    $columns = array(
        $this->getAttribute()->getAttributeCode() => array(
            'type'      => 'int',
            'unsigned'  => false,
            'is_null'   => true,
            'default'   => null,
            'extra'     => null
        )
    );
    return $columns;
}

public function getFlatUpdateSelect($store)
{
    return Mage::getResourceModel('eav/entity_attribute')
        ->getFlatUpdateSelect($this->getAttribute(), $store);
}
} 
```

希望这可以帮助。

有关详细信息，请参见[此处。](http://inchoo.net/ecommerce/magento/how-to-create-custom-attribute-source-type/)

# bash - bash 脚本自动

> ID：12043462
> 
> 赞同：-3
> 
> 时间：2012-08-20T18:59:08.020
> 
> 标签：bash, shell

我写了以下脚本：

```
#!/bin/bash

./vlc $nom > $fichier
gedit $fichier 
```

在执行我的脚本时。第一个命令 ( `. / vlc $ name> $ file`) 会在视频播放后运行。不执行第二个命令。对于第二个命令运行，我将不得不返回到控制台，我会这样做：`Ctrl`+`C`

我希望一切都自动完成。

请问你有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:01:11.710

也许您想要的是第一个程序在后台运行：

```
./vlc $nom > $fichier &
gedit $fichier 
```

# c++ - 在 Linux 中运行 exe

> ID：12043471
> 
> 赞同：1
> 
> 时间：2012-08-20T18:59:33.140
> 
> 标签：c++, linux, executable

我在 c++ vs2010 中构建了一个简单的控制台应用程序，它只显示一行文本。是否可以从 Linux 的 Release 文件夹运行此可执行文件？假设我将 Release 文件夹放在拇指驱动器上，然后在 linux 机器上打开它？

我的印象是用 c++ 编写的控制台应用程序可以在 linux 的两个窗口中运行？我有多大的误导？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T19:01:08.333

a) 您需要使用 wine 运行可执行文件并模拟 Windows 环境
-**或者**-
b) 您需要为 Linux 发行版编译代码。

# php - 如何在 mongo db 中引用子集合

> ID：12043473
> 
> 赞同：0
> 
> 时间：2012-08-20T18:59:33.153
> 
> 标签：php, mongodb

我想按以下格式的数据集合中的目标进行分组。

```
[unique_id] => 649083802  
[objectives_compleeted_log_queue] => Array (  
)  
[objectives] => Array (      
        [37] => Array (  
            [is_completed] =>   
            [tasks] => Array (  
            [56] => Array (  
                [completed_count] => 0  
                [actions] => Array (  
                    [0] => 0  
                )  
            )  
        )  
    )  
    [96] => Array (  
        [is_completed] =>   
        [tasks] => Array (   
            [123] => Array (  
                [completed_count] => 0  
                [actions] => Array (  
                    [0] => 0  
                )  
            )  
        )  
    )  
    [97] => Array (  
        [is_completed] =>   
        [tasks] => Array (  
            [124] => Array (  
                [completed_count] => 0  
                [actions] => Array (  
                    [0] => 0  
                )  
            )  
        )  
    ) 
```

在上面的示例中，我需要对每个目标（37、96、97...）的 unique_ids 进行分组。对不起，对 mongo db 很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:34:49.287

根据经验，在文档中使用动态字段名称（例如`objectives.37`）会降低索引和查询的灵活性。对于初学者，您将无法利用[多键索引](http://www.mongodb.org/display/DOCS/Multikeys)。

不过，我们可以使用[map/reduce](http://www.mongodb.org/display/DOCS/MapReduce)来聚合和计算现有架构中的不同 ID。为了使以下示例保持简洁，我将字段名称缩短为`o`数据夹具中的不相关数据。

```
<?php

$m = new Mongo();
$db = $m->test;

$db->foo->drop();
$db->foo->insert(['o' => [36 => [], 63 => [], 64 => []]]);
$db->foo->insert(['o' => [12 => [], 36 => [], 97 => []]]);

$result = $db->command([
  'mapreduce' => 'foo',
  'map' => new MongoCode('
    function() {
      for (var key in this.o) emit(key, { count: 1 });
    }
  '),
  'reduce' => new MongoCode('
    function(key, values) {
      var r = { count: 0 };
      values.forEach(function(v) { r.count += v.count; });
      return r;
    }
  '),
  'out' => ['inline' => 1]
]);

echo json_encode($result, JSON_PRETTY_PRINT); 
```

在这里，我们在整个集合中执行 map 函数，在`o`我们处理的对象中发出每个唯一键。对于每次发射，我们发射的初始值为`{count: 1}`。映射后，我们有一大堆由密钥和`{count: 1}`对组成的排放量。然后调用我们的 reduce 方法来处理不同键的这些中间结果。参数中的每个对象都`values`遵循相同的结构（即我们之前发出的相同值），并且我们期望返回相同结构的单个简化值。

该脚本将产生以下输出：

```
$ php mr.php 
{
    "results": [
        {
            "_id": "12",
            "value": {
                "count": 1
            }
        },
        {
            "_id": "36",
            "value": {
                "count": 2
            }
        },
        {
            "_id": "63",
            "value": {
                "count": 1
            }
        },
        {
            "_id": "64",
            "value": {
                "count": 1
            }
        },
        {
            "_id": "97",
            "value": {
                "count": 1
            }
        }
    ],
    "timeMillis": 17,
    "counts": {
        "input": 2,
        "emit": 6,
        "reduce": 1,
        "output": 5
    },
    "ok": 1
} 
```

如果您改为重新设计架构，使其`objectives`成为嵌套对象数组，我们可以利用 MongoDB 2.2+ 中的[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)来更轻松地计算相同的结果：

```
<?php

$m = new Mongo();
$db = $m->test;

$db->foo->drop();
$db->foo->insert(['o' => [['id' => 36], ['id' => 63], ['id' => 64]]]);
$db->foo->insert(['o' => [['id' => 12], ['id' => 36], ['id' => 97]]]);

$result = $db->command([
  'aggregate' => 'foo',
  'pipeline' => [
    ['$project' => ['o' => 1]],
    ['$unwind' => '$o'],
    ['$group' => ['_id' => '$o.id', 'count' => ['$sum' => 1]]],
  ],
]);

echo json_encode($result, JSON_PRETTY_PRINT); 
```

在这里，我们使用聚合管道依次进行三个操作：

*   投影扫描文档的`o`字段，类似于在查找查询中选择特定的输出字段。
*   `o`展开我们遇到的每个数组。将管道视为文档流，我们将有两个文档进入此步骤，每个文档在各自的`o`字段中都有三个嵌套对象。展开将产生六个文档进行下一步，每个`o`数组字段由数组的一个元素替换。
*   此时对流中的所有文档进行分组，使用`o.id`字段作为分组标识符，并使用总和作为每个元素的组值。对于每个分组的元素，`count`值字段将增加一。

此脚本产生输出：

```
$ php af.php 
{
    "result": [
        {
            "_id": 12,
            "count": 1
        },
        {
            "_id": 63,
            "count": 1
        },
        {
            "_id": 97,
            "count": 1
        },
        {
            "_id": 64,
            "count": 1
        },
        {
            "_id": 36,
            "count": 2
        }
    ],
    "ok": 1
} 
```

# mysql - 在 MySql Workbench 中自定义键盘快捷键

> ID：12043478
> 
> 赞同：60
> 
> 时间：2012-08-20T18:59:44.903
> 
> 标签：mysql, keyboard-shortcuts, customization, mysql-workbench

多年来，我主要使用 MS SQL Server（以及用于常见任务的 SQL Server Management Studio），现在我开始使用 MySql。迄今为止，我一直在使用*MySQL Workbench*，并且总体上对它感到满意。

但是，我希望能够为某些命令（例如来自[此列表的命令）分配](http://dev.mysql.com/doc/workbench/en/wb-keys.html)**自定义键盘快捷键**。例如，我更愿意坚持使用“F5”的 MS-SQL 方法来执行查询，而不是点击“修改器+返回”。我还没有遇到一个简单的方法来做到这一点。我的问题是：

*   这在 MySQL Workbench 中是否可能（例如附加插件）？
*   如果没有，MySQL Workbench 的任何替代品是否提供此功能？

环境：

*   Ubuntu 12.04 LTS，32 位
*   MySQL 服务器版本 5.5.24-0ubuntu0.12.04.1
*   MySQL 工作台版本 5.2.38，修订版 8753

干杯!

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-16T15:16:06.960

您可以修改该`main_menu.xml`文件（对我来说，在 Ubuntu 12.04 上是在 中`/usr/share/mysql-workbench/data/`）。修改后，您需要重新启动 MySQL Workbench。

看起来像这样

```
 <value type="object" struct-name="app.MenuItem" id="com.mysql.wb.menu.query.exec"> 
      <link type="object" key="owner" struct-name="app.MenuItem">com.mysql.wb.menu.query</link> 
      <value type="string" key="caption">Execute (All or Selection)</value> 
      <value type="string" key="name">query.execute</value> 
      <value type="string" key="command">builtin:query.execute</value> 
      <value type="string" key="itemType">action</value> 
      <value type="string" key="shortcut">Modifier+E</value>
    </value> 
```

倒数第二行 (Modifier+E) 是我编辑的。以前它说“Modifier+Shift+Return”。请注意，这不是别名（不能同时拥有）。

# iphone - UIPageControl 子类覆盖

> ID：12043483
> 
> 赞同：2
> 
> 时间：2012-08-20T18:59:57.483
> 
> 标签：iphone, objective-c, ios, uipagecontrol

我正在尝试制作左对齐的 UIPageControl（而不是居中）。我看到子类可以覆盖`- (CGSize)sizeForNumberOfPages:(NSInteger)pageCount`，但它似乎没有被调用。下面是我的子类的样子：

```
@implementation CustomPageControl

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (CGSize)sizeForNumberOfPages:(NSInteger)pageCount {
    CGSize size = self.bounds.size;
    NSLog(@"%f, %f", size.width, size.height);
    return size;
}

@end 
```

我什至明确地尝试调用`[pageControl sizeToFit]`,`[pageControl setNeedsLayout]`和`[pageControl setNeedsDisplay]`. 永远不会被调用。

关于为什么不调用它的任何想法，如果这是正确的覆盖方法，或者是否有关于如何解决此问题的示例？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:30:44.183

实际上，我认为我可以使用`- (CGSize)sizeThatFits:(CGSize)size`，但后来意识到它不是必需的。

只是根据页数使页面控件的框架更小。

```
self.pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, y, 16*([photos count]+1), width)]; 
```

# c - 正常阻塞后检测到堆损坏（#55）

> ID：12043485
> 
> 赞同：0
> 
> 时间：2012-08-20T19:00:07.447
> 
> 标签：c

调试后，我收到此错误消息：正常块后检测到 HEAP CORRUPTION (#55)。如果我增加数组的大小`(no_of_days+1)`，它可以工作，但我不知道它是否正确。我做错了什么？

```
int main()
{

    int no_of_days=0;
    int no_operations=0;
    int *a;
    int i;
    FILE *pfile1=NULL;
    FILE *pfile2=NULL;
    char *filename1="input.txt";
    char *filename2="output.txt";

    pfile1=fopen(filename1, "r");
    if(pfile1==NULL)
    {
        printf("Error on opening the file %s.",filename1);
        return 0;
    }
    fscanf(pfile1,"%d%d",&no_of_days,&no_operations);
    a=(int*)malloc((no_of_days)*sizeof(int));
    if(a==NULL)
    {
        printf("Memory allocation failed.");
        return 0;
    }
    for(i=1;i<=no_of_days;i++)
    {
        fscanf(pfile1,"%d",&a[i]);
    }
    pfile2=fopen(filename2,"a");
    if(pfile2==NULL)
    {
        printf("Memory allocation failed!",filename2);
    }
    for(i=1;i<=no_of_days;i++)
    {
        fprintf(pfile2,"%d",a[i]);
    }
    free(a);
    fclose(pfile1);
    fclose(pfile2); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T19:02:08.520

> ```
> a=(int*)malloc((no_of_days)*sizeof(int));
> /* ... */
> for(i=1;i<=no_of_days;i++) 
> ```

索引从 0 开始，因此访问`a[no_of_days]`是非法的。将该`for`行更改为：

```
for(i = 0; i < no_of_days; i++) 
```

# objective-c - 如何呈现（无笔尖）ViewController

> ID：12043489
> 
> 赞同：2
> 
> 时间：2012-08-20T19:00:21.483
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, modal-dialog

我已经创建了一个 ViewController（没有 nib 文件），那么如何在应用程序委托中加载这个 viewController？我当前的代码是：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
viewController = [[MyCustomViewController alloc] init...]; // I use a custom init method
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES; 
```

以及如何使用 presentModalViewController 方法来显示相同​​“CustomViewController”类的新视图控制器？

谢谢您的帮助！

注意：顺便说一句，我确实看到这段代码确实调用了我的初始化方法，并且我的 customViewController 中的 ViewDidLoad 方法正在被调用，但是屏幕仍然是黑色的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:07:23.313

看起来您的属性设置不正确。

检查这一行：

```
viewController = [[MyCustomViewController alloc] init...]; // I use a custom init method
self.window.rootViewController = self.viewController; 
```

检查 self.viewController 是否正常，没有什么能阻止你这样做：

```
self.window.rootViewController = viewController; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:12:45.470

糟糕，我只是在 viewDidLoad 方法中遗漏了这段代码：

```
self.view.frame = CGRectMake(0, 0, 320, 480);
self.view.backgroundColor = [UIColor whiteColor]; 
```

所以一切正常，但默认情况下屏幕是黑色的并且没有框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:12:27.383

我必须在我正在开发的一个应用程序中做到这一点。尝试对视图控制器进行类型转换

```
CDViewController *viewController = (CDViewController*)self.window.rootViewController;
viewController.managedObjectContext = self.managedObjectContext;
viewController.managedObjectModel = self.managedObjectModel;

// Override point for customization after application launch.
return YES; 
```

# git - git checkout commit，做事，然后回到master

> ID：12043491
> 
> 赞同：4
> 
> 时间：2012-08-20T19:00:50.213
> 
> 标签：git, branch, git-checkout

我有一个构建系统，它需要一个 git 存储库，返回到特定的提交，然后将这些文件上传到某个地方。然后是回到主人那里。

我不确定我是否使用了正确的 Git 命令，因为每当我执行以下命令时，Git 都会给我这个消息`git checkout SHA`：

```
You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

git checkout -b new_branch_name 
```

我唯一想做的就是将我的工作目录重置为特定的提交，上传这些文件，然后返回 HEAD/master。当我转到特定的提交 SHA（将 XML 转换为 JSON 或其他东西）时，我可能会对文件进行一些更改，但是当我回到 master 时，我只想放弃所有这些更改。现在这是我的代码

```
git checkout SHA

# do a bunch of conversion and uploading

git checkout master 
```

这是做我想做的事的首选方式吗？我是否总是能够从原点进行拉取而不发生任何文件冲突（我不想在结帐之间保留我正在做的任何事情）？

我之所以问，是因为我有时会看到“您的主人和起源/主人分歧”，尽管我不确定这是由此引起的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:12:39.560

这样做完全没问题。当 HEAD 与分支名称不对应时，它将显示为分离的 HEAD。没有错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:47:39.603

您还可以使用`git show SHA1:relative/path`在特定点拍摄文件的快照。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:09:44.553

对于您所描述的，您可以执行以下操作：

git archive -o /some/where/archive.tar.gz --prefix=<something> <commit> <file list>

查看 git archive 的手册以获取血淋淋的细节。您可以创建 zip 文件、tar 文件（压缩或未压缩），可选择在打包文件的“上方”放置一个前缀，所有这些都取自引用的提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T03:18:34.370

这是我在成功构建 Bamboo 后用于将 API、测试和代码覆盖率报告发布到我的 github 页面（gh-pages 分支）的工具。它是一个执行您描述的事情的 Ant 目标。（这里有很多好的答案，但发布以防万一）。

```
<target name="--publish.site">
    <echo file="${temp.dir}/publish-site.sh">
        #!/bin/sh
        cd ${basedir}
        cp -fr ${basedir}/schema ${reports.dir}
        git remote set-url origin git@github.com:jasperblues/my-project.git
        git fetch origin gh-pages:gh-pages
        git checkout gh-pages
        git pull
        rm -fr ./coverage
        cp -fr ${reports.dir}/coverage/ ./coverage
        git add ./coverage
        rm -fr ./api
        cp -fr ${reports.dir}/api ./api
        git add api
        cp -fr ${reports.dir}/schema ./schema
        git add schema
        git commit -a -m "publish reports to gh-pages"
        git push -u origin gh-pages
        git checkout master
    </echo>
    <chmod perm="+x" file="${temp.dir}/publish-site.sh"/>
    <exec executable="${temp.dir}/publish-site.sh" failonerror="true" failifexecutionfails="true">
        <env key="PATH" value="${tools.paths}"/>
    </exec>
</target> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T19:15:33.357

您提到从原点拉取更改。在您的情况下，您还可以使用`git reset --hard SHA1`返回到特定提交，然后`git pull`从`origin/master`.

# php - php auth 将特定用户发送到特定页面

> ID：12043492
> 
> 赞同：0
> 
> 时间：2012-08-20T19:00:49.970
> 
> 标签：php

首先是我问的第三个问题，所有问题都得到了很好的回答！所以感谢所有阅读我帖子的人（我猜还有其他人）

在没有完全帮助的情况下，我已经尽我所能。我需要创建一个用户名和密码部分。我在使用 htaccess`htauth`文件之前已经这样做了。效果很好。安全，并很好地登录它们。我正在寻找的是某种脚本，它将在登录后将特定用户带到特定页面。

```
User1= user1.php
user2= user2.php 
```

等等。

如果没有大量工作，这可能吗？我可以解决用户登录到主索引，然后去他们需要的地方，但是任何登录的人都可以去任何人的页面。

我不是要求任何人编写代码。但即使是一些教程的一些指导也会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:03:13.947

htauth 是 .. 旧 :D

好吧，无论如何。您可以从某处的变量中获取用户凭据`$_SERVER`并基于此进行切换。

`var_dump($_SERVER);`查看您需要的属性。

然后用于`header("Location: /go/here.html");`重定向用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:05:12.990

如果页面使用 .htaccess 进行身份验证，则在成功登录后，用户名将作为 .htaccess 使用`$_SERVER['PHP_AUTH_USER']`。

因此，您可以使用 Location 重定向用户，或者更好的是直接包含（）所需的文件。

您可以将 user1.php、user2.php、... 文件放在它们自己的目录中，并带有不允许直接访问的 .htaccess。这不会阻止 PHP 包含文件，这样只有经过身份验证的用户才能访问他的文件。

```
if (isset($_SERVER['PHP_AUTH_USER']))
{
    $pvdir = './user_private_files/';
    // "basename" in case we log in little Jack Folders (Bobby Tables's cousin)
    $user = basename(strtolower($_SERVER['PHP_AUTH_USER']));
    $file = $pvdir.$user.'.php';
    if (file_exists($file))
    {
        include $pvdir."any_common_code_at_the_beginning_of_user_files.php";
        include $file;
        include $pvdir."any_common_code_at_the_end_of_user_files.php";
        exit();
    }
    include ugly_error.php;
} 
```

# wpf - 带有分组的 WPF ListBox 中失去焦点问题

> ID：12043494
> 
> 赞同：2
> 
> 时间：2012-08-20T19:00:54.167
> 
> 标签：wpf, listbox, focus, grouping

我正在尝试制作一个在 WPF 上进行分组的列表框。这可以很容易地完成，如 WPF4 Unleashed 和 Web 上的任何其他教程中所述。

XAML（这里有两个列表，有和没有分组 + 按钮来更新它们的公共项目源）：

```
<Window x:Class="GroupTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        Loaded="Window_Loaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ListBox Grid.Row="0" ItemsSource="{Binding Path=Items}" x:Name="_listBox1">
            <ListBox.GroupStyle>
                <x:Static Member="GroupStyle.Default" />
            </ListBox.GroupStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Name}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <ListBox Grid.Row="1" ItemsSource="{Binding Path=Items}" x:Name="_listBox2">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Name}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <Button Grid.Row="2" Content="Update Items" Click="Button_Click" Focusable="False"/>
    </Grid>
</Window> 
```

代码（这里我在页面加载时设置分组并在单击按钮时更新/替换项目源）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace GroupTest
{
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public class Item
        {
            public string Name { get; set; }
            public bool Flag { get; set; }
        }

        private List<Item> _items;
        public List<Item> Items
        {
            get { return _items; }
            set
            {
                if (_items != value)
                {
                    _items = value;
                    NotifyPropertyChanged("Items");
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public MainWindow()
        {
            InitializeComponent();
            MakeItems();
            DataContext = this;
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(_listBox1.Items);
            view.GroupDescriptions.Add(new PropertyGroupDescription("Flag"));
        }

        private void MakeItems()
        {
            _items = new List<Item>();
            _items.Add(new Item() { Name = "1", Flag = true });
            _items.Add(new Item() { Name = "2", Flag = true });
            _items.Add(new Item() { Name = "3", Flag = false });
            _items.Add(new Item() { Name = "4", Flag = true });
            _items.Add(new Item() { Name = "5", Flag = false });
        }

        private void UpdateItems()
        {
            Items = new List<Item>(_items);
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            UpdateItems();
        }

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

    }
} 
```

它可以工作，但是有一个我无法解决的奇怪错误。每次我更新其项目源时，带有分组的列表 #1 都会失去焦点。而没有分组的列表＃2保持焦点。

这是完整项目源的链接：[https ://dl.dropbox.com/u/60611528/GroupTest.zip](https://dl.dropbox.com/u/60611528/GroupTest.zip)

有什么建议么？提前致谢！

**更新** 我尝试将 Items 设为 ObservableCollection<>，但这并没有帮助。焦点仍然从分组列表中消失。

**更新 2** 我的真实应用程序在模型类中有项目，它不知道列表框。我希望有一个解决方案可以在不紧密耦合窗口和模型类的情况下解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:18:56.810

这是解决问题的方法。

我已经对其进行了修改，以明确数据正在发生变化。可能有一个更简单的解决方案。

这个想法是检测 Grouped`ListBox`是否将焦点放在其任何项目上......如果是这样，那么焦点将恢复回列表框......因为这就是丢失的内容。

我想它与货币有关，并且`ListCollectionView`在分组模式下，或者它可能与 UI 虚拟化有关......当您在 a 上使用 Grouping 时禁用`ListBox`（因为 Style sets `ScrollViewer.CanContentScroll=False`）

（您可以查看参考源代码以更深入地了解行为）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace GroupTest
{
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public class Item
        {
            public string Name { get; set; }
            public bool Flag { get; set; }
        }

        public ObservableCollection<Item> Items { get; set; }

        public event PropertyChangedEventHandler PropertyChanged;

        public MainWindow()
        {
            Items = new ObservableCollection<Item>();
            InitializeComponent();
            MakeItems();
            DataContext = this;
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(_listBox1.Items);
            view.GroupDescriptions.Add(new PropertyGroupDescription("Flag"));
        }

        bool bFlip = false;

        private void MakeItems()
        {
            Items.Clear();
            if (bFlip)
            {
                Items.Add(new Item() { Name = "1", Flag = true });
                Items.Add(new Item() { Name = "2", Flag = true });
                Items.Add(new Item() { Name = "3", Flag = false });
                Items.Add(new Item() { Name = "4", Flag = true });
                Items.Add(new Item() { Name = "5", Flag = false });

                bFlip = false;
            }
            else
            {
                Items.Add(new Item() { Name = "1", Flag = true });
                Items.Add(new Item() { Name = "2", Flag = true });
                Items.Add(new Item() { Name = "3", Flag = false });
                Items.Add(new Item() { Name = "4", Flag = true });
                Items.Add(new Item() { Name = "5", Flag = false });
                Items.Add(new Item() { Name = "A", Flag = false });
                Items.Add(new Item() { Name = "B", Flag = false });

                bFlip = true;
            }
        }

        private void UpdateItems()
        {
            bool bListBox1HadFocus = false;
            IInputElement focussedelement = Keyboard.FocusedElement;
            ListBoxItem lbifocussed = focussedelement as ListBoxItem;
            Item itemwithfocus = (lbifocussed != null ? lbifocussed.Content as Item : null);

            for (int i = 0; i < Items.Count; i++)
            {
                ListBoxItem lbi = _listBox1.ItemContainerGenerator.ContainerFromIndex(i) as ListBoxItem;

                if (lbi == lbifocussed)
                {
                    bListBox1HadFocus = true;
                    break;
                }
            }

            Item oldselecteditem1 = _listBox1.SelectedItem as Item;
            Item oldselecteditem2 = _listBox2.SelectedItem as Item;

            MakeItems();

            // Set back the selections to what they were

            foreach (Item item in Items)
            {
                if (oldselecteditem1 != null && item.Name == oldselecteditem1.Name)
                {
                    _listBox1.SelectedItem = item;
                }
                if (oldselecteditem2 != null && item.Name == oldselecteditem2.Name)
                {
                    _listBox2.SelectedItem = item;
                }
            }

            if (bListBox1HadFocus)
            {
                _listBox1.Focus();
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            UpdateItems();
        }

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

* * *

如果您想要一个更接近原始版本的版本，那么：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace GroupTest
{
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public class Item
        {
            public string Name { get; set; }
            public bool Flag { get; set; }
        }

        private List<Item> _items;
        public List<Item> Items
        {
            get { return _items; }
            set
            {
                if (_items != value)
                {
                    _items = value;
                    NotifyPropertyChanged("Items");
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public MainWindow()
        {
            InitializeComponent();
            MakeItems();
            DataContext = this;
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(_listBox1.Items);
            view.GroupDescriptions.Add(new PropertyGroupDescription("Flag"));
        }

        private void MakeItems()
        {
            _items = new List<Item>();
            _items.Add(new Item() { Name = "1", Flag = true });
            _items.Add(new Item() { Name = "2", Flag = true });
            _items.Add(new Item() { Name = "3", Flag = false });
            _items.Add(new Item() { Name = "4", Flag = true });
            _items.Add(new Item() { Name = "5", Flag = false });
        }

        private void UpdateItems()
        {
            bool bListBox1HadFocus = false;
            IInputElement focussedelement = Keyboard.FocusedElement;
            ListBoxItem lbifocussed = focussedelement as ListBoxItem;
            Item itemwithfocus = (lbifocussed != null ? lbifocussed.Content as Item : null);
            bool blistbox1hasfocus = (lbifocussed != null ? lbifocussed.IsFocused : false);

            for (int i = 0; i < Items.Count; i++)
            {
                ListBoxItem lbi = _listBox1.ItemContainerGenerator.ContainerFromIndex(i) as ListBoxItem;

                if (lbi == lbifocussed)
                {
                    bListBox1HadFocus = true;
                    break;
                }
            }

            Items = new List<Item>(_items);

            if (bListBox1HadFocus)
            {
                _listBox1.Focus();
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            UpdateItems();
        }

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

# java - 根据整数数组对字符串列表进行排序

> ID：12043498
> 
> 赞同：-6
> 
> 时间：2012-08-20T19:01:05.620
> 
> 标签：java

我有一个数组列表`[Mod8, Mod5, Mod9, Mod10]`和一个整数数组`[1, 0, 2, 3]`。`[Mod5, Mod8, Mod9, Mod10]`我需要一个根据整数数组中的数字的输出列表。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:04:50.233

```
List<String> original = new ArrayList<String>();
original.add("Mod8");
original.add("Mod5");
original.add("Mod9");
original.add("Mod10");

int[] sortIndexArray = new int[] { 1, 0, 2, 3 };

List<String> sorted = new ArrayList<String>(original.size());
for (int i = 0; i < sortIndexArray.length; i++) {
  sorted.add(original.get(sortIndexArray[i]));
}

System.out.println(sorted); // [Mod5, Mod8, Mod9, Mod10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:10:23.850

由于您的 2 个列表似乎紧密联系在一起，因此我将创建一个`Pair<Int,String>`对象将它们联系在一起，并为该`Pair`对象编写一个比较器。

否则，您必须在两者更改时保持同步，这将是有问题的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:12:07.767

一种方法是创建一个实现类似接口的类。然后使用整数值覆盖 compareTo() 函数，以您需要的方式比较它们。希望有帮助！

# java - 计算2个单独字符串中的破折号，如果每个字符串的相同位置有相同数量的破折号，则返回true？

> ID：12043502
> 
> 赞同：0
> 
> 时间：2012-08-20T19:01:17.710
> 
> 标签：java, string, boolean

我必须用 Java 编写一个程序来比较两个字符串的破折号。仅当每个字符串在字符串中的相同位置具有相同数量的破折号时，测试才会返回 true。

例子：

比较以下两个字符串

" String string1 = "二二十九"
String string2 = "十四十五，我饿了。"

符合上述条件将返回 true。一根绳子是否比另一根长并不重要。

任何援助将不胜感激！

我尝试过：
- 将字符串转换为 char 数组，然后比较索引
- 对每个字符串使用 String.indexOf()，然后创建一个变量 int newStart = String.indexOf() ，并将前一个破折号的索引作为新的出发点

```
`   public static void sameDashes(String string1, String string2) {
    int count = 0;
    char index1 = ' ';
    char index2 = ' ';
    char dash = '-';
    char[] string1Array = string1.toCharArray();
    char[] string2Array = string2.toCharArray();
    while (count < string1Array.length && count < string2Array.length) {
        if (string1Array[index1] == dash && string2Array[index2] == dash) {
            System.out.println("true");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:12:26.570

由于我怀疑这是家庭作业，因此我将概述一个解决方案。

*   使用该方法遍历*string1*`indexOf`，得到一个代表破折号位置的s `List`。`Integer`
*   以相同的方式遍历*string2*。（您可以调用一个通用方法两次。一次使用*string1*，一次使用*string2*。）
*   比较你`List`的 s，看看它们是否相同`size()`。
*   如果它们的大小相同，则遍历两个列表并查看位置是否相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:00:59.677

超级简单的使用[`String.split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)：

1.  在两个字符串的每一端都用一个字符填充（即`str = " " + str + " "`）。
2.  调用`.split("-")`两个字符串并存储结果数组。
3.  如果数组的长度不同，则字符串不匹配。
4.  否则，比较每个数组中对应字符串的长度，如果任何一对的长度不匹配，则字符串不匹配。除非它是最后一对字符串——那么它们可以是不同的长度并且它们仍然匹配（即忽略最后一对字符串——你不需要比较数组中最后一个索引处的字符串）。
5.  否则，两个字符串匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:05:38.970

解决这个问题的一个简单算法是使用`indexOf()`and`charAt()`并循环遍历字符串的一个实例`-`。

1.  从 开始索引偏移量`0`。
2.  从给定的偏移量中获取 a `-`in的下一个位置。`string1`
3.  检查`string2`找到的位置是否包含字符，如果是，检查它是否为`-`. 如果不是`-`，则检查失败。
4.  将 index-offset 设置为下一个`-`in`string1`并重复 #2。
5.  在 中找到所有`-`'后`string1`，检查是否在字符串中比所包含的更远的点`string2`包含 a 。如果是，则检查失败。如果没有，则检查通过！`-``string1`

示例概念验证：

```
int index = string1.indexOf("-", 0);
while (index > 0) {
    // if string2 doesn't contain a dash at the current position, return false
    if ((string2.length() <= index) || (string2.charAt(index) != "-")) return false;
    index = string1.indexOf("-", (index + 1));
}
// do one last final check to see if string2 contains a dash that's further than string1's last dash
return !(string2.indexOf("-", string1.lastIndexOf("-") + 1) > 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:36:02.000

我将为这个问题放置一个算法：

*   检查哪个`String`是最短的：s1 或 s2。我们称短字符串为 ss。
*   使用 ss，用于[`String#indexOf`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28int,int%29)获取破折号的下一个位置（或您需要的 w/e 字符）。
*   使用该位置，检查另一个位置`String`是否有破折号（或您要查找的字符）。您可以[`String#charAt`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)为此目的使用方法。
*   如果字符匹配，保持循环直到你得到索引 -1（这意味着字符不再在 ss 中）。
*   检查另一个字符串是否包含最后一个有效索引中的字符。如果没有更多，则两个字符串具有相同数量的破折号。没有，否则。

在这个解决方案中，不需要使用额外的数组来检查位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T16:38:41.757

试试这个：

```
package samedashes; 
```

导入 java.io.IOException；导入 java.util.Scanner；

公共类 SameDashes {

```
public static void main(String[] args) throws IOException {
      sameDash();
}

public static void sameDash() {
    String s1;
    String s2;
    char dash = '-';
    float cnt = 0;
    float s1dash = 0;
    float s2dash = 0;
    float totaldash1 = 0;
    int minlength=0;
    Scanner in = new Scanner(System.in);

    System.out.print("Enter a string->");
    s1 = in.nextLine();

    System.out.print("Enter a string->");
    s2 = in.nextLine();

    if(s1.length()<s2.length()){
        minlength=s1.length();
    }else{
        minlength=s2.length();
    }

    for (int i = 0; i < s1.length(); i++) {
        if (s1.charAt(i) == dash) {
            s1dash++;
        }
    }

    for (int i = 0; i < s2.length(); i++) {
        if (s2.charAt(i) == dash) {
            s2dash++;
        }
    }

    System.out.println("String1 dashes->" + s1dash);
    System.out.println("String2 dashes->" + s2dash);

    totaldash1 = s1dash + s2dash;

    if (totaldash1 % 2 == 0 && s1.contains("-") && s2.contains("-")) {
        for (int i = 0; i < minlength; i++) {
            if (s1.charAt(i) == dash && s2.charAt(i) == dash) {
                cnt++;
            }
        }
        if (cnt >=1) {
            System.out.println("true");
        } else {
            System.out.println("false");
        }
    } else {
        System.out.println("false");
    }
} 
```

}

# css - 如何应用：悬停在 SVG 内部 元素？

> ID：12043504
> 
> 赞同：3
> 
> 时间：2012-08-20T19:01:50.003
> 
> 标签：css, svg, hover

我有一个 SVG 图，想在另一个元素`:hover`中的一个元素上应用属性`<rect>`。但它不起作用：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg">

    <style type="text/css"><![CDATA[
        #rec1 {
            fill:black;   // outer element
        }
        #rec2 {
            fill:white;      // inner element
            display:none;   // and element not visible
        }
        #rec1:hover #rec2 {
            display:block;   // when hover outer lets inner become visible
                             // but it doesn't work
        }
        #rec1:hover  {
            fill:red;       // strange but this hover works
        }

    ]]></style>

        <g id="g">
            <rect id="rec1" x="0" y="0" width="200" height="50" />
            <rect id="rec2" x="100" y="20" width="20" height="20" />
        </g>

</svg> 
```

在这种情况下应用悬停的正确方法是什么？

**UPD：**找到一个解决方案。

首先，它不是另一个`<rect>`元素中的一个元素。他们是兄弟姐妹。并且就这种样式`#rec1:hover #rec2`仅适用于嵌套元素而言，它在这里不起作用。所以我在最外面的`<g>`元素上应用了样式：

```
#g:hover #rec2 {
    display:block;   // it works just fine
} 
```

但是还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:19:56.577

只需使用：

```
#rec1:hover + #rec2 {
     display: block;                 
} 
```

The `+` selector is used for selecting siblings (children of the same element -- `g` in this case), which is the case here.

Hope that helped!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:08:05.853

就 CSS 而言，这些矩形不是嵌套的。

`#rec1:hover #rec2`仅当 #rec2 嵌套在 #rec1 元素内并且 #rec1 元素被悬停时，此样式才适用。

只需将样式应用为`#rec2:hover`

# apache - Apache 重写 URL - 将参数更改为页面

> ID：12043508
> 
> 赞同：0
> 
> 时间：2012-08-20T19:02:03.167
> 
> 标签：apache, .htaccess, mod-rewrite

我知道这很简单，但我无法正确处理。如何改变这个：

```
http://example.com/page.php?type=article 
```

进入

```
http://example.com/page/article 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:03:19.580

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f    
RewriteRule ^page/([^/\.]+)/?$ page.php?type=$1 [NC,B,L] 
```

# java - 从 Java 字符串中删除空格不起作用

> ID：12043513
> 
> 赞同：0
> 
> 时间：2012-08-20T19:02:16.697
> 
> 标签：java

字符串输入 = “c_Name == V-GE-DO50 或 c_Name == V-GE-DO-C”；

我试过了

```
input.replaceAll(" ", "");
input.trim(); 
```

两者都没有从字符串中删除空格

希望字符串看起来像 c_Name==V-GE-DO50ORc_Name==V-GE-DO-C

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T19:04:19.403

请注意，这些`String`方法返回一个应用了转换的*新* `String`方法。`Strings`是不可变的——即它们不能被改变。所以这是一个常见的错误：

```
input.trim(); 
```

你应该分配一个变量：

```
String output = input.trim(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T19:03:24.077

以下对我来说很好：

```
 String input = "c_Name == V-GE-DO50 OR c_Name == V-GE-DO-C";
   input = input.replaceAll(" ", "");
   System.out.println(input); 
```

输出

```
c_Name==V-GE-DO50ORc_Name==V-GE-DO-C 
```

字符串是不可变的，我强烈怀疑您没有在`replaceAll`(or)之后再次分配字符串`trim()`；

还有一件事，`trim`不删除中间的空格，它只是删除最后的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:03:31.923

input.replaceAll("\s","") 应该可以解决问题

[http://www.roseindia.net/java/string-examples/string-replaceall.shtml](http://www.roseindia.net/java/string-examples/string-replaceall.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:05:17.650

```
String input = "c_Name == V-GE-DO50 OR c_Name == V-GE-DO-C";
input = input.replaceAll(" ", "");
System.out.println(input); 
```

结果：

> > c_Name==V-GE-DO50ORc_Name==V-GE-DO-C

但是，replaceAll 将正则表达式作为输入值（用于替换），这种情况包括消除变量中的空格。因此，如果您想简单地摆脱字符串中的空格，请使用 input = input.replace(" ", "") 来提高效率。

# mysql - 合并多对多结果

> ID：12043515
> 
> 赞同：0
> 
> 时间：2012-08-20T19:02:31.710
> 
> 标签：mysql, sql, database

我正在使用以下`SELECT`语句：

```
SELECT *
FROM prefix_site_tmplvars
LEFT JOIN prefix_site_tmplvar_contentvalues 
ON prefix_site_tmplvar_contentvalues.tmplvarid = prefix_site_tmplvars.id
LEFT JOIN prefix_site_content
ON prefix_site_tmplvar_contentvalues.contentid = prefix_site_content.id
WHERE prefix_site_tmplvar_contentvalues.value = "chocolate" 
```

这是我回来的：

```
[id] => 2  
[name] => flavor  
[value] => chocolate

[id] => 2 
[name] => type 
[value] => cookie 
```

这是我想要得到的结果：

```
[id] => 2
[flavor] => chocolate
[type] => cookie 
```

有没有办法组合我的结果，所以我没有一堆引用相同 ID 的行？如果现在，我应该如何处理？

我正在使用 Modx，这正在使用模板变量表：[http ://wiki.modxcms.com/index.php/Template_Variable_Database_Tables](http://wiki.modxcms.com/index.php/Template_Variable_Database_Tables)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:14:49.693

您可以只使用 case 语句：

```
SELECT 
    id,
    MAX( CASE WHEN name = 'flavor' THEN value ELSE NULL END ) AS flavor,
    MAX( CASE WHEN name = 'type' THEN value ELSE NULL END ) AS type
FROM prefix_site_tmplvars
    LEFT JOIN prefix_site_tmplvar_contentvalues 
    ON prefix_site_tmplvar_contentvalues.tmplvarid = prefix_site_tmplvars.id
    LEFT JOIN prefix_site_content
    ON prefix_site_tmplvar_contentvalues.contentid = prefix_site_content.id
WHERE prefix_site_tmplvar_contentvalues.value = "chocolate"
GROUP BY id 
```

当然，这种方法只有在您提前知道要选择哪些键时才有效；但在这种情况下，您似乎确实知道（风味+类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:20:16.800

您可以通过以下方式与组一起执行此操作：

```
SELECT id,
       max(case when name = 'flavor' then value end) as flavor,
       max(case when name = 'type' then value end) as type
FROM prefix_site_tmplvars LEFT JOIN
     prefix_site_tmplvar_contentvalues
     ON prefix_site_tmplvar_contentvalues.tmplvarid = prefix_site_tmplvars.id LEFT JOIN
        prefix_site_content ON prefix_site_tmplvar_contentvalues.contentid = prefix_site_content.id
WHERE prefix_site_tmplvar_contentvalues.value = "chocolate" 
group by id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:14:33.260

问题是，你可能有

```
{ "id": 2, "flavor": "chocolate", "type": "cookie" } 
```

和另一排

```
{ "id": 3, "flavor": "vanilla", "calories": "375" } 
```

...我不认为有一种简单的方法可以解决 MySQL 中的问题；您需要决定要查找的密钥。

另一方面，您可以折叠 PHP 中的行：

```
while($tuple = ...fetch tuple from mysql cursor...)
{
    list ($id, $name, $value) = $tuple;
    if (!isset($objs[$id]))
    {
        // You might want to add also "'id' => $id" to the array definition
        $objs[$id]= array ($name => $value);
    }
    else
    {
        $obj = $objs[$id];
        $obj[$name] = $value;
        $objs[$id] = $obj;
    }
} 
```

现在 $objs 包含所需的数据；不过，您仍然需要将其重新放入 Modx。

# asp.net-mvc - 将 MVC 视图值传递给控制器

> ID：12043519
> 
> 赞同：0
> 
> 时间：2012-08-20T19:02:54.777
> 
> 标签：asp.net-mvc, asp.net-mvc-3, query-string

我正在使用查询字符串在我的 MVC 视图上显示一个值。例如 ..

在我看来，我有：

```
<h3>Selected Game <%=Request["GameId"]%> </h3> 
```

这将显示用户在视图上选择的游戏 ID（通过查询字符串）

现在我希望能够使用视图上显示的这个值并在控制器/服务层代码中运行查询。如何将此值传递给控制器​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:23:32.440

您可以从控制器以相同的方式访问请求。

```
string gameid = Request["GameId"]; 
```

但是，我会提醒您注意您从请求中获得的信任值。这是黑客喜欢通过输入他们自己的值来攻击的地方，这些值甚至可能不是数字。

验证您从客户端获得的所有数据，包括查询字符串参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:05:47.693

您不能将它传递给同一个控制器.. 视图已经呈现。您似乎知道`ajax`，因此只需提出另一个请求即可。使用参数向有问题的控制器发出`ajax`请求`GameId`。

# ravendb - 根据 RavenDB 中引用实体的属性查询

> ID：12043520
> 
> 赞同：1
> 
> 时间：2012-08-20T19:02:59.143
> 
> 标签：ravendb

我在 RavenDB 中有两个集合：一个用于产品，另一个用于每个产品的定价策略。每个定价策略都按产品 ID 引用单个产品。例如，产品可能如下所示：

```
products/1
{
 "Brand":"Dewalt",
 "Model":"ABC123",
 "Category":"Tools"  
} 
```

策略可能如下所示：

```
strategies/1
{
 "ProductId":"products/1",
 "PriceCalculation":{
   "$type":"...",
   "Margin":0.2
 }
} 
```

我需要能够通过它们的属性以及相关产品的属性来查询策略。例如 - 返回产品属于特定类别且具有特定利润的所有策略。如果产品数据被非规范化并与策略一起存储，那么我可以简单地将产品属性添加到索引中。有没有办法在不进行非规范化的情况下做到这一点？

我了解 Include 方法允许在结果集中包含引用的实体，因此不必加载它们，但它不支持对包含的实体进行*查询。*实时投影也是如此——它们允许在结果集中包含引用的实体，但不支持通过引用实体的属性进行*查询*。

我可以跨两个索引运行两个查询——一个用于策略，另一个用于产品，然后在产品 ID 上加入两个结果集。这种情况下的问题是产品集合可能并不总是与策略引用的产品集同步。更具体地说，产品集合可能包含比策略引用的产品更多的产品，因此查询可能会返回没有定价策略的产品，因此在占据结果集中的位置时不能一直加入策略.

如果我可以解析 Map 函数中的引用实体，然后在索引中包含引用实体的属性，那么可行的方法是。

**编辑** 我似乎正在寻找这个：[https ://groups.google.com/d/msg/ravendb/k3qvdEb870U/95OWtjL3U3YJ](https://groups.google.com/d/msg/ravendb/k3qvdEb870U/95OWtjL3U3YJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:18:42.010

经过一些实验，我发现最好的方法是使用[Multi-Maps / Reduce Index](http://ayende.com/blog/89089/ravendb-multi-maps-reduce-indexes)。指定了两个映射函数，一个用于产品，另一个用于策略。reduce 函数按产品 ID 对两个结果集进行分组，然后在输出中合并。这个索引的声明有点尴尬，因为您必须确保结果的形状匹配 - 如果 Raven 自动执行此操作并带有覆盖选项会很好。在 reduce 函数中合并结果也很尴尬，因为您必须从来自所需映射函数的组中选择一个值。总的来说，多映射/减少索引允许将不同的集合连接到单个索引投影中。

# javascript - python 等效于 Meteorserver 或 Derbyjs 或 Angularjs？

> ID：12043522
> 
> 赞同：1
> 
> 时间：2012-08-20T19:03:14.433
> 
> 标签：javascript, python, web-frameworks, serverside-javascript

有没有类似于meteorserver、derbyjs、angularjs 的python 框架？基本上类似于pyjs，但支持在knockoutjs中见证的UI数据绑定，以及具有单个模型库的angularjs以立即更新UI（meteorserver，derbyjs）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T23:23:25.937

如果你有很多钱，那就是[Planet](http://www.planetframework.com/)。

# wpf - 鼠标悬停时停止按钮颜色更改

> ID：12043523
> 
> 赞同：1
> 
> 时间：2012-08-20T19:03:14.947
> 
> 标签：wpf, button, user-interface

好的..这很奇怪..我已经定义了一个按钮，实际上是 5 个按钮，每个按钮都有不同的颜色，但是在鼠标悬停时，它们只是将颜色更改为冰蓝色....我试图覆盖它通过使用以下代码：

```
 <Button Name="btn1" Content="Button" Width="65" Height="45" Background="Green" Margin="1,1,0,1" FontWeight="Bold">
            <Button.Style>
                <Style>
                    <Style.Triggers>
                        <Trigger Property="Button.IsMouseOver" Value="True">
                            <Setter Property="Button.Background" Value="Yellow" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
            <Button.LayoutTransform>
                <RotateTransform Angle="270"/>
            </Button.LayoutTransform>
        </Button> 
```

但它仍然不起作用......我想要的是它应该保持它已经给出的背景颜色（每个按钮不同），所以问题是：我是否必须为每个按钮一次又一次地定义它（触发器不起作用，颜色变成冰蓝色）或者我可以在资源文件中使用通用值定义它，它要么停止颜色更改，要么只是将背景设置为现有属性编辑：为了清楚起见，我希望按钮停止在鼠标悬停时更改其颜色并保留我分配给它的任何颜色.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:49:42.683

根据我链接的评论和 SO 帖子：那篇文章将样式应用于任何类型的东西`Button`，这就是为什么它适用于所有按钮（这不一定是坏事）。但要从那篇文章中删除的重点是，您需要修改的是`ControlTemplate`.

所以你会想做这样的事情：

```
 <Style x:Key="ButtonStyle1" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border x:Name="Chrome" BorderBrush="Black" BorderThickness="2" CornerRadius="2" Background="{TemplateBinding Property=Background}">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

这并不完美，因为它失去了所有的交互性（即，你不能说你已经推动它，悬停在它上面或任何东西）。但它为您提供了一个很好的起点。

这里的关键点之一是 的`Background`属性`Border`绑定到`TemplateParent Property=Background`，这意味着它将读取它正在模板化的按钮的背景属性并使用它的背景颜色。这使您可以更轻松地使用单一样式来覆盖所有 5 个按钮。您可以（并且可能想要）对该`BorderBrush`物业做类似的事情。

还要注意我的风格有一个`x:Key`价值，所以为了使用它，你会这样做：

```
 <Button x:Name="btn1" Content="Button" Width="65" Height="45" Background="Green" Margin="1,1,0,1" FontWeight="Bold" Style="{DynamicResource ButtonStyle1}">
        <Button.LayoutTransform>
            <RotateTransform Angle="270"/>
        </Button.LayoutTransform>
    </Button> 
```

您可以删除该`x:Key`属性，并且样式确实将应用于您声明资源的任何容器内的所有按钮。

# javascript - AngularJS 服务（更新/保存）

> ID：12043532
> 
> 赞同：6
> 
> 时间：2012-08-20T19:03:46.350
> 
> 标签：javascript, angularjs

AngularJS 新手，试图掌握框架，并尝试构建一个基本的 CRUD 应用程序。我似乎无法弄清楚更新现有记录需要什么。这是我的服务：

```
 angular.module('appServices', ['ngResource']).
factory('App', function ($resource) {
    var Item = $resource('App/:AppId', {
        //Default parameters
        AppId: '@id'
    }, {
        //Actions
        query: {
            method: 'GET',
            isArray: true
        },
        getById: {
            method: 'PUT'
        },
        update: {
            method: 'POST'
        }
    });
    return Item;
}); 
```

我可以运行基本的 Get all 查询和 getById 来填充编辑表单，但这就是我遇到的问题。这是 getById 的示例代码

```
 $scope.apps = App.query();

$scope.getEdit = function(AppId) {
    App.getById({id:AppId}, function(app) {
        $scope.original = app;
        $scope.app = new App(app);
    });
};

$scope.save = function() {
    //What type of information should go here?
    //Do I need to make changes to the appServices?
}; 
```

我想，我只是不确定下一步更新现有信息是什么，或者“app”对象如何传递给 API，谁能指出我正确的方向，或者告诉我一个快速更新方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-28T00:34:53.193

这是处理角度保存操作的一种非常混乱的方式。一方面 - 您不应该将 PUT 操作用于检索请求，其次 - 所有这些都已内置于 angular。见下文。

```
var Item = $resource( 'App/Details/:AppId', { AppId: '@id' } );

var item = Item.get({ id: 1 }, function( data ) {
    data.setAnothervalue = 'fake value';
    data.$save();
); 
```

我在这里做的是检索一个“项目”，然后在它返回后立即用新数据保存它。

Angular JS 已经提供了一组默认值，包括查询、保存、删除/删除、get.etc。对于大多数 RESTful API，你真的不需要添加太多，如果有的话。有关更多信息，请参阅资源文档，特别是有关默认值的信息：http: [//docs.angularjs.org/api/ngResource](http://docs.angularjs.org/api/ngResource) .$resource

此外，一旦您掌握了这一点 - 您可能希望将 $save 用于创建/更新操作，但使用 POST/PUT（RESTful 约定）。如果你这样做，请参阅我不久前写的文章：http: [//kirkbushell.me/angular-js-using-ng-resource-in-a-more-restful-manner/](http://kirkbushell.me/angular-js-using-ng-resource-in-a-more-restful-manner/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T12:42:17.857

在进行了更多研究并查看了 Daniel 的链接（谢谢）之后。我让它工作了。

控制器方法：

```
 $scope.save = function() {
    $scope.app.update();
}; 
```

服务工厂：

```
 var Item = $resource('App/Details/:AppId', {
        //Default parameters
        AppId: '@id'
    }, {
        //Actions
        query: {
            method: 'GET',
            isArray: true
        },
        getById: {
            method: 'PUT'
        },
        update: {
            method: 'POST'
        }
    });

    Item.prototype.update = function (cb) {
        console.log(this.AppId);
        return Item.update({ AppId: this.AppId },
        angular.extend({}, this, { AppId: undefined }), cb);
    };

    return Item; 
```

# c# - 将 DateTime 格式化为 MySql 日期

> ID：12043537
> 
> 赞同：0
> 
> 时间：2012-08-20T19:04:18.990
> 
> 标签：c#, asp.net, mysql, date, datetime-format

我有一个 ASP.Net 应用程序。我在后端使用 MySql。我有3个问题。

我在 MySql 中有一个名为 BeginDate 的字段，它是 DataType：Date。它以这种格式写入数据库：**2012-06-17**。

当我编写一个选择语句并将日期拉入 formview 文本框时，格式更改为：06/17/2012 **12:00:00 AM**

当我尝试更新日期时，我收到一条错误消息，指出第 1 行的日期格式错误。

很公平。我以存储在数据库中的相同格式键入：**2012-06-17**。

并且更新有效。

我感到困惑的是，如果格式起源于：数据库中的**2012-06-17**

1.  为什么 asp.net 将其翻转并将其格式化为：**06/17/2012 12:00:00 AM**，而我没有明确告诉它。为什么它***不***翻转回原来的 DB 格式？

2.  如何告诉 Mysql 接受这种格式，2012 年 6 月 17 日并且没有收到错误？

3.  我需要截断文本框中显示的时间戳。我只想要日期。

添加注释。日期是由 Ajax 控件日历选择器设置的，它会格式化它：06/17/2012 没有时间戳。这就是我想要的。

**编辑这是我的更新命令和参数：

```
 Update discount set DiscountPromotionalID = @DiscountPromotionalID,
 isActive =@isActive, Title = @Title, BeginDate = @BeginDate, EndDate = @EndDate, 
 DiscountPercentage = @DiscountPercentage
  where DiscountPromotionalID = @DiscountPromotionalID;" 

    <UpdateParameters>
      <asp:Parameter Name="oDiscountPromotionalID" Type="Int32" />
      <asp:Parameter Name="oisActive" Type="Object" />
      <asp:Parameter Name="oTitle" Type="String" />
      <asp:Parameter Name="oBeginDate" Type="DateTime" />
      <asp:Parameter Name="EndDate" Type="DateTime" />
      <asp:Parameter Name="oDiscountPercentage" Type="Decimal" />
    </UpdateParameters> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:09:13.163

日期没有“格式”；它们只是一个值。当 ASP.NET 显示 DateTime 值且未指定[格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)时，它使用运行它的机器（本例中为服务器）的默认格式。在您的情况下，默认格式是`"MM/DD/YYYY hh:mm:ss tt"`. 由于您的 MySQL 字段是日期（无时间），因此包含时间组件会导致错误。

在发送回 MySQL 之前，格式化 DateTime 以剥离时间组件。由于您没有详细说明如何执行更新（SQL 连接？参数）？我不能举一个具体的例子。

**更新**

尝试使用该[`DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)函数提取 DateTime 值的日期部分：

```
Update discount set 
    DiscountPromotionalID = @DiscountPromotionalID,
    isActive = @isActive, 
    Title = @Title, 
    BeginDate = DATE(@BeginDate),
    EndDate = DATE(@EndDate), 
//etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:12:32.063

1）没有看到你的代码很难说。我怀疑这是因为您将日期值分配给 DateTime 变量。

2）我不会这样做。我只会使用 ToString 方法将其转换为您需要的格式。（见下文）

3）如果您正在处理 DateTime ，那么您可以使用[ToString(string format)](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)方法来格式化您喜欢的日期。您将不得不检查，但我认为以下内容对您有用：`myDateTime.ToString("yyyy-MM-dd");`

# sql - 从 sql server 视图显示信息

> ID：12043540
> 
> 赞同：-2
> 
> 时间：2012-08-20T19:04:24.400
> 
> 标签：sql, sql-server, vbscript

使用 sql server 的新视图，不知道如何查看它使用 vbscript 收集的信息。我知道这并不简单：

```
select * from EXAMPLE_VIEW 
```

我想从我的示例视图循环中获取信息并显示它，但是当我尝试执行该 sql 查询时，我得到无效的对象名称。

我的问题是你如何 sql 查询视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:12:10.300

```
select * from EXAMPLE_VIEW 
```

...**是**查询 SQL Server 视图的正确方法。

如果它不适合您，那么您将遇到另一种问题：可能没有权限，可能没有服务器连接，可能调用的视图`EXAMPLE_VIEW`不存在，可能还有其他问题。
不管是什么——我们需要准确的错误信息和尽可能多的示例代码来帮助您。

但是 SQL 本身是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:16:54.667

你可能应该这样做：

```
SELECT column1, column2 FROM dbo.EXAMPLE_VIEW; 
```

这是因为如果您的用户具有与 dbo 不同的默认架构，它可能会在不同架构下检查具有相同名称的其他视图。（你也知道不要使用 SELECT *，对吧？）

因此，您还应该确保您的用户帐户对视图和/或其后面的表具有选择权限。

*   [要踢的坏习惯：使用 SELECT * / 省略列列表](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)

*   [要改掉的坏习惯：避免使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:47:53.037

建立连接后您当前的数据库设置是否正确？可以使用连接字符串 (http://www.connectionstrings.com/) 或通过在查询本身中指定它来设置它：

```
SELECT * FROM MYDB.dbo.EXAMPLE_VIEW; 
```

# c# - VisualStudio 生成的类图不会自行更新

> ID：12043546
> 
> 赞同：5
> 
> 时间：2012-08-20T19:04:54.210
> 
> 标签：c#, visual-studio-2010

VS 2010 Pro：我为我的库生成了一个类图，现在向其中添加了更多类，但类图只显示较旧的类并且不会自动更新。所以我想知道这是不是这样，我应该每次都删除并重新添加类图？或者这些是我应该在 VS IDE 中做些什么来更新它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T19:07:51.013

只需将新类*拖放***到图表上，**或从新类的*contextMenu*中选择**生成类图**。

 *新课程不会自动显示。一旦课程出现在图表上，它将在您更改其成员时随时更新！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:10:33.087

> 所以我想知道这是不是这样

是的。

> 我应该每次都删除并重新添加类图吗？

不可以。您可以查看对已添加的课程所做的更改。要查看新类，您可以将它们**拖放**到设计器表面。

如果要查看动态类依赖关系，可以使用架构资源管理器。我猜它只适用于 VS Ultimate。不确定Pro。您可以通过程序集或命名空间生成依赖关系图。很好很花哨:) 探索循环依赖或识别图中的中心非常有用。这是您不需要创建的。它是自动生成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T07:43:42.903

您需要重新构建您的课程所在的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T13:32:54.913

关闭 Visual Studio 删除位于解决方案文件旁边的“.ncb”文件。使用 Visual Studio 打开您的解决方案 重建解决方案。类图现已更新。*

# colors - 将 8 位颜色分量转换为 16 位颜色分量

> ID：12043547
> 
> 赞同：2
> 
> 时间：2012-08-20T19:04:56.343
> 
> 标签：colors, gtk, pango

我正在编写一个`GTK+`应用程序，它使用`Pango`文本属性来确定写入到 a 上的文本的颜色和其他方面，`GtkLabel`使用如下所示：

```
attributes = pango_attr_list_new();
pango_attr_list_insert(attributes, pango_attr_foreground_new( G_MAXUINT16, G_MAXUINT16, G_MAXUINT16));
pango_attr_list_insert(attributes, pango_attr_size_new (18 * PANGO_SCALE));
pango_attr_list_insert(attributes, pango_attr_weight_new( PANGO_WEIGHT_BOLD ));

lblTotalCredits = gtk_label_new(NULL);
gtk_label_set_text(GTK_LABEL(lblTotalCredits),"0");
gtk_label_set_attributes(GTK_LABEL(lblTotalCredits), attributes); 
```

`pango_attr_foreground_new()`期望每个颜色分量（ R,G,B ）为 16 位。使用 Photoshop 或其他图像处理工具，我可以找到我想要使用的颜色，但 R、G、B 值显示为 8 位 R、G、B 分量。

如何将 8 位 R、G、B 值转换为等效的 16 位 R、G、B 值，以便最终得到相同的颜色？

例如，金色被指定为 RGB ( 229, 202, 115 ) 或十六进制 e5ca73。如何将其转换为每个颜色分量为 16 位的`pango`函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:12:17.943

最大 8 位：0xFF
最大 16 位：0xFFFF

转换（我使用红色作为演示）（未经测试）：

```
guint32 colorhex = 0xe5ca73;
const guint8 red8 = (guint8)((colorhex & 0xFF0000) >> 16);
//    guint16 red16 = (guint16)(((guint32)(r * 0xFFFF / 0xFF)) & 0xFFFF);
guint16 red16 = ((guint16)red8 << 8) | red8; 
```

# sql-server - 从一个 sp 插入两个表

> ID：12043549
> 
> 赞同：0
> 
> 时间：2012-08-20T19:05:01.103
> 
> 标签：sql-server, tsql, stored-procedures

我正在研究将数据插入两个表的 sp。这两个表是 features 和 features 类型，都有一个 pk featuresid，每次添加时都会自动递增。我有：

```
 insert into featured
        (title,text,imageURL, priority )
        values
        (@title,@text,@imageURL, @priority),

        insert into featuredtype
        (loginPage, indexPage, mobilePage)
        values
        (@loginPage, @indexPage, @mobilePage) 
```

但是，这似乎不是从一个 sp 插入两个表的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:07:44.427

你需要去掉逗号之后`@priority),`

你可以用分号替换它`;`或者什么都不用，所以

```
create proc yourproc
(
   -- parameter definitions here
)
as
begin
        insert into featured 
        (title,text,imageURL, priority ) 
        values 
        (@title,@text,@imageURL, @priority)

        insert into featuredtype 
        (loginPage, indexPage, mobilePage) 
        values 
        (@loginPage, @indexPage, @mobilePage) 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:23:33.097

你甚至可以尝试

```
insert into featured (title,text,imageURL, priority ) 
select @title,@text,@imageURL, @priority

insert into featuredtype (loginPage, indexPage, mobilePage) 
select @loginPage, @indexPage, @mobilePage 
```

# ruby - 捕获 Sequel::Error 异常

> ID：12043551
> 
> 赞同：3
> 
> 时间：2012-08-20T19:05:05.757
> 
> 标签：ruby, sinatra, sequel

我有一个使用 Sequel 和 Postgres 的 Sinatra 应用程序......这是一个非常简单的模块，可以插入数据库。我想从插入中捕获任何错误并返回有用的消息。

我的代码如下：

```
begin
   sql = DB["INSERT INTO table (id, firstname, lastname, ...) values (......)"]
   ds.insert
rescue Sequel::Error
   ...
end 
```

如何捕获实际错误是什么？我可以输入“出现错误”并打印出来，但我想要更具体的内容 - 例如“需要名字”、“需要姓氏”。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T19:32:19.037

您可以使用最后一个异常对象魔术常量`$!`：

```
rescue Sequel::Error
  p $!.message
end 
```

您还可以更改救援块以将异常对象放入变量中：

```
rescue Sequel::Error => e
  p e.message
end 
```

两者都会打印异常消息。

# url - Google Plus 计数网址

> ID：12043558
> 
> 赞同：0
> 
> 时间：2012-08-20T19:05:46.960
> 
> 标签：url, client-side, google-plus, google-plus-one

我正在尝试计算我对 google plus 的计数，我正在检查我的计数是否正确

```
https://plusone.google.com/u/0/_/%2B1/fastbutton?count=true&url=MY_URL 
```

我看到 google plus 拒绝了我的网址（不返回 0 或任何内容）

我想知道是否有人可以告诉我我的网址是否有任何问题，我的网址中有字母和数字之外的这些符号

```
:
/
.
?
=
&
_ 
```

我的网址格式如下

```
(protocol)://(server [such as www]).(domain)/(text).php?(text)=(text)&(text)=(digits)&(text)=(text) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:22:32.537

Use the URL

```
https://plusone.google.com/_/+1/fastbutton?url=http%3A%2F%2Fwww.yoursite.com%2Fpath%2Fyour%2fcontent 
```

instead and follow the solution found in [this question](https://stackoverflow.com/questions/7403553/how-do-i-get-the-counter-of-a-google-plus-1-button) (parse for `window.__SSR = {c:`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:38:02.927

[我想你正在寻找这个。](http://shinraholdings.com/870/count-facebook-likes-twitter-links-and-google-pluses-with-php/#google-plus)这很丑陋，谷歌显然不支持它，但它仍然有效。

```
function shinra_gplus_get_count( $url ) {
    $contents = file_get_contents( 
        'https://plusone.google.com/_/+1/fastbutton?url=' 
        . urlencode( $url ) 
    );

    preg_match( '/window\.__SSR = {c: ([\d]+)/', $contents, $matches );

    if( isset( $matches[0] ) ) 
        return (int) str_replace( 'window.__SSR = {c: ', '', $matches[0] );
    return 0;
} 
```

# fortran - 如何在 fortran 中更改目标机器配置？

> ID：12043566
> 
> 赞同：1
> 
> 时间：2012-08-20T19:06:17.457
> 
> 标签：fortran, cross-compiling

我在 Linux 上使用 Intel Fortran 编译器。我知道如果我输入“ifort -dumpmachine”，它将为编译提供目标机器配置（例如“x86_64-linux-gnu”），但如果我想为不同的操作进行编译，我需要知道如何更改它系统（例如不同版本的 linux）。“-arch”编译器选项允许您更改处理器架构，但我需要知道如何更改操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:47:22.113

交叉编译是高度依赖处理器的东西，所以没有通用的 Fortran 答案。据我所知，英特尔 Fortran 仅适用于有限数量的架构 - x86 和 x86-64。Linux、Windows 和 OS X 有单独的产品，您不能在它们之间进行交叉编译。

您没有指定不同版本的 Linux 是什么意思。您应该在您的编译器版本的手册中找到哪些内核版本需要生成的可执行文件。原则上，您可以定位所有此类分布。正确的英特尔运行时库和 glibc 以及您使用的其他库也可能存在问题。您可以通过静态链接您机器上的库来解决此问题（仅使用`-static`或`-static-intel`用于 Intel 运行时库），但请注意，它们还必须与您的目标架构兼容（特别是，如果它们需要高级指令集，例如SSE(2) 或 AVX)。

# javascript - 更快的 SVG 路径操作

> ID：12043573
> 
> 赞同：1
> 
> 时间：2012-08-20T19:06:56.630
> 
> 标签：javascript, jquery, svg, jquery-svg

所以我想用SVG制作一个绘图工具，我使用一种相当幼稚的方法来改变我的Path的d属性：

```
$("div#drawarea").bind("mousemove", function(ev) {

  ev.preventDefault();

  ev.stopPropagation();

  var pX= (ev.pageX - this.offsetLeft);

  var pY= (ev.pageY - this.offsetTop);

  $path.attr("d", $path.attr("d") + " L" +pX+ "," + pY); //using jquery-svg here to change the d attribute

}); 
```

如您所见，我在 mousemove 函数上执行此操作。该代码有效，但是当我真正希望它是平滑线时，当鼠标快速移动创建许多直线时，它变得无响应。我认为这是因为我在 mousemove 事件上执行的大量字符串连接（当单击长时间保持时，路径上的 d 属性可能会变得非常大，实际上是数千个字符）。

我想知道是否有任何本机方法可以在路径末尾添加新值，而不是直接操作 d 属性。我检查了 jquery-svg 源代码，似乎该库在内部也使用了朴素的字符串连接模式，因此使用它的方法不会有任何好处。

另外我想知道是否是这种情况，或者浏览器是否只是限制了可以触发的 mousemove 事件的数量（每 X 毫秒一次？），因此没有性能优化可以改善这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:25:09.730

使用[SVG 路径，例如 DOM](https://stackoverflow.com/questions/8053487/scripting-path-data-in-svg-reading-and-modifying)方法。您必须编写更复杂的代码，但浏览器不必重新解析整个路径属性。例如，Firefox 确实利用了这一点，其他浏览器也很可能也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T16:21:56.500

如果其他人不知道什么是更新 SVG-Path 数据属性（用于实时应用程序）的最快方法的问题，我对此进行了一个小测试：

[http://jsperf.com/svg-path-test](http://jsperf.com/svg-path-test)

是的，将它设置为字符串意味着它需要被解析，这不是 DOM SVG 接口的情况，但第一种方法仍然更快。Maybee 界面会随着添加的每个点更新 DOM，从而减慢整个过程。

# android - SQLiteException：某些手机出现无法打开数据库文件

> ID：12043577
> 
> 赞同：2
> 
> 时间：2012-08-20T19:07:17.797
> 
> 标签：android, sqlite

我在市场上发布了一个应用程序。我收到一条评论说它不会在 SG3 上运行。我的一位朋友告诉我，她的手机上没有。他有 SG1 (2.3.3)，所以可能是星系特定的问题（它适用于 Galaxy S）。她给我发了堆栈跟踪：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.b2creative.b2callstats/com.b2creative.b2callstats.Calllogs}：android.database.sqlite.SQLiteException：无法在 android.app.ActivityThread.performLaunchActivity（ActivityThread .java:1651) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java :935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:123) 在 android.app.ActivityThread.main(ActivityThread.java:3687) 在 java .lang.reflect.Method.invokeNative(Native Method) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller 的 java.lang.reflect.Method.invoke(Method.java:507)。在 dalvik.system.NativeStart.main(Native Method) 的 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600) 运行(ZygoteInit.java:842) 原因：android.database.sqlite.SQLiteException：无法在android.database.sqlite.SQLiteDatabase.(SQLiteDatabase.java:1849)在android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java: 820) 在 android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854) 在 android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847) 在 android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:630) ) 在 android.database.sqlite.SQLiteOpenHelper 的 android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)。getWritableDatabase(SQLiteOpenHelper.java:118) at com.b2creative.b2callstats.HotOrNot.open(HotOrNot.java:69) at com.b2creative.b2callstats.Calllogs.refreshList(Calllogs.java:1579) at com.b2creative.b2callstats.Calllogs .onCreate(Calllogs.java:277) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) ... 11 更多

谷歌搜索时，我发现了几个类似的错误，但我无法找出导致此问题的原因，而且很难测试，因为它不会出现在我的手机、中兴 Blade 和三星我家里有的galaxy mini。

我想检查她手机上的数据库路径，但由于它在一开始就强制关闭，所以我无法得到它。在我的手机上，它是默认路径：/data/data/com.b2creative.b2callstats/databases/CallDatabase。

也许她的手机上没有这样的路径？

我的 sqliteopenhelper 类的一部分：

```
private static class DbHelper extends SQLiteOpenHelper {
        public DbHelper(Context context) {
        super (context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
              KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
              KEY_NAME + " VARCHAR(200) NOT NULL, " +
              KEY_PHONE + " VARCHAR(70) NOT NULL, " +
              KEY_TYPE + " CHAR(1) NOT NULL, " +
              KEY_DURATION + " VARCHAR(70) NOT NULL, " +
              KEY_DATE + " VARCHAR (20) NOT NULL, " +
              KEY_CONTACTID + " VARCHAR (50) NOT NULL)"
              );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
        }
    }

    public HotOrNot(Context c){
        ourContext = c;
        }

    public HotOrNot open() throws SQLException{ 
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();    //error line 08.19.2012 6:32:57 PM
        return this;
        }

    public void close(){
        ourHelper.close();
        } 
```

PS：她看起来不错... :)

# php - 如何通过php条件销毁cookie

> ID：12043578
> 
> 赞同：0
> 
> 时间：2012-08-20T19:07:29.730
> 
> 标签：php, cookies

我想通过 php 条件销毁 cookie，但是在对 google 和 php 手册进行了大量研究之后，我没有任何事情要做。我在某个地方读过，`setcookie('cookie_name');`但它只是删除了 cookie，所以我的问题是如何通过 php 销毁 cookie？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T19:12:55.843

删除 cookie 时，您应确保过期日期已过，以触发浏览器中的删除机制

```
setcookie ("cookie_name", "", time() - 3600); // set the expiration date to one hour ago 
```

[**手动**](http://php.net/manual/en/function.setcookie.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:10:02.557

没有办法在 PHP 中删除 cookie。`setcookie("cookie_name");`它的作用是指示浏览器将 cookie 保留到*现在*，这意味着它可以清理它（您通常在将来的某个时间给它一个日期）。

您不能强制删除 cookie。

如果您需要更好地控制当前会话中保存的数据，请使用服务器端会话存储。只保留`session_id`cookie 中的 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T19:12:43.493

销毁 cookie 取决于浏览器，但是您可以通过将日期设置为过去来删除 cookie（对于您的应用程序也是如此）：

```
setcookie($cookie_name, "", 1); 
```

大多数将时间设置为`1970`.

哈！@MikeBrant 提出了一个很好的观点。由于 PHP 无法理解是否在发出此命令后仍设置`setcookie`了删除 cookie `$_COOKIE`，因此您必须这样`unset`做。

# android - EditText 和 Button 对 TabHost 内的触摸输入无响应

> ID：12043579
> 
> 赞同：0
> 
> 时间：2012-08-20T19:07:35.893
> 
> 标签：android

我正在为朋友乐队制作一个应用程序，并且正在使用一个名为 parse 的云存储 API。我正在尝试从云中获取一个字符串，然后将其显示在我的编辑文本中，其想法是使文本成为您想要的，然后将其上传到数据库。我可以这样做，但是每当我更改文本然后将手机水平翻转然后再次垂直时，它都会删除我的编辑。此外，触摸似乎已停止对该特定布局起作用。我有一个 TabHost 并且切换选项卡工作正常，但是每当我尝试单击该按钮时，我什么也得不到，也无法在 EditText 中移动光标。我在我的按钮的 onClick 方法中放置了断点和 toast，没有任何东西被触发。我不知道发生了什么。请帮忙！

爪哇

```
package com.example.undaunted.admin;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RelativeLayout;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import android.widget.Toast;

import com.parse.GetCallback;
import com.parse.Parse;
import com.parse.ParseException;
import com.parse.ParseFile;
import com.parse.ParseObject;
import com.parse.ParseQuery;
import com.parse.SaveCallback;

public class UndauntedAdminMain extends Activity {
TabHost tabHost;
Button saveWelcomeText;
EditText welcomeText;
ParseFile file;
ParseObject welcomeTextObject;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.undaunted_main);
    welcomeText = (EditText) findViewById(R.id.editText1);
    Parse.initialize(this, "REMOVED",
            "REMOVED");
    initialize();

}

public void initialize() {
    tabHost = (TabHost) findViewById(R.id.tabHost);
    tabHost.setup();

    TabSpec spec = tabHost.newTabSpec("Welcome");

    spec.setContent(R.id.welcomeTab);
    spec.setIndicator("Welcome");
    tabHost.addTab(spec);

    TabSpec spec3 = tabHost.newTabSpec("Biographies")
            .setContent(R.id.biographyTab).setIndicator("Biographies");
    tabHost.addTab(spec3);
    // tabHost.newTabSpec("Biographies").setIndicator("Biographies").setContent();
    TabSpec spec2 = tabHost.newTabSpec("Gallery");
    RelativeLayout relativeLayout = (RelativeLayout) findViewById(R.id.galleryTab);
    relativeLayout.setBackgroundColor(Color.BLACK);
    spec2.setContent(R.id.galleryTab);
    spec2.setIndicator("Gallery");
    tabHost.addTab(spec2);

    ParseQuery query2;
    query2 = new ParseQuery("Welcome");
    query2.getInBackground("fdZL8G4PIk", new GetCallback() {

        @Override
        public void done(ParseObject arg0, ParseException arg1) {
            // TODO Auto-generated method stub
            if (arg1 == null) {
                // welcomeTextObject = arg0;

                // welcomeText.setText(welcomeTextObject.getString(
                // "WelcomeText").toString());
            } else {
                welcomeText.setText("Failed to load data");
            }

        }
    });

    saveWelcomeText = (Button) findViewById(R.id.saveWelcomeText);
    saveWelcomeText.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            welcomeTextObject.saveInBackground(new SaveCallback() {

                @Override
                public void done(ParseException arg0) {
                    // TODO Auto-generated method stub
                    welcomeTextObject.put("WelcomeText",
                            welcomeText.getText());

                    welcomeTextObject.saveInBackground();
                    Toast.makeText(getApplicationContext(), "Data sent",
                            Toast.LENGTH_SHORT).show();

                }
            });
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_undaunted_admin_main, menu);
    return true;
}

} 
```

XML

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tabHost" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">

        <TabWidget 
            android:id="@+android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

        <FrameLayout 
            android:id="@+android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <RelativeLayout
                android:id="@+id/welcomeTab"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" 
                android:orientation="vertical">

                    <Button
                        android:id="@+id/saveWelcomeText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_centerHorizontal="true"
                        android:text="Save" />

                    <EditText
                        android:id="@+id/editText1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentRight="true"
                        android:layout_alignParentTop="true"
                        android:ems="10" >

                        <requestFocus />
                    </EditText>

            </RelativeLayout>    

                   <RelativeLayout 
                android:id="@+id/galleryTab"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                </RelativeLayout>

         <RelativeLayout
             android:id="@+id/biographyTab"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content">

             <ListView
                 android:id="@+id/memberList"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:layout_alignParentTop="true"
                 android:layout_above="@+id/biographyTab"/>
                </RelativeLayout>

         <RelativeLayout 
             android:id="@+id/showDatesTab"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:orientation="vertical">

             <ListView 
                 android:id="@+id/showDateList"
                 android:layout_height="fill_parent"
                 android:layout_width="fill_parent"
                 android:layout_alignParentTop="true"
                 android:layout_above="@+id/showDatesTab">
             </ListView>

         </RelativeLayout>
         </FrameLayout>
    </LinearLayout>
</TabHost> 
```

其他详细信息，我正在使用一个名为 Parse 的云存储库。我不知道这里是否有人熟悉它，或者它是否会造成干扰，但我真的很感激一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:23:00.263

我修好了它！我的 TabHost 没有使用 RelativeLayout，因此破坏了我的观点。我将布局添加到我的 TabHost，现在一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:02:16.087

删除里面的内容`initialize()`并将代码直接放在你的`onCreate()`方法中。我不知道为什么会这样，但我遇到了这个确切的问题，这样做对我有帮助

# jquery - 勾选未出现在复选框中

> ID：12043588
> 
> 赞同：1
> 
> 时间：2012-08-20T19:08:25.557
> 
> 标签：jquery, html

当用户单击相应的复选框时，我正在尝试使用 jQuery 显示和隐藏 div。这可以正常工作，但无论出于何种原因，支票都不会出现在框中。有什么建议么？

jfiddle - [http://jsfiddle.net/p4m8c/](http://jsfiddle.net/p4m8c/)

HTML

```
<p id="contingent-check"><label for="no-contingent"><input type="checkbox" name="no-contingent" value="yes" id="" />&nbsp;&nbsp;&nbsp;Do not want to add Contingent Beneficiary</label></p>

      <div id="contingent"><h2>Contingent Beneficiary</h2>
      <label for="contingent-name" class="label">Beneficiary Name:</label><br />
        <input name="contingent-name" type="textfield" id="name" class="name-field">
        <p class="or-select">Or select from the list below</p>
        <label for="contingent-potential" class="label">Potential Beneficiary:</label><br />
        <select name="contingent-potential" class="drop-down">
          <option value="estate">Estate</option>
        </select>
        <p></p>
        <label for="contingent-relationship" class="label">Relationship:</label><br />
        <select name="contingent-relationship" class="drop-down">
          <option value="estate">Estate</option>
        </select>
        <p></p>
      </div> 
```

Javascript

```
$('#contingent-check').toggle(
    function(){
    $('#contingent input').attr('disabled' , true)
                          .css('backgroundColor', '#FCFCFC');
    $('#contingent select').attr('disabled' , true)
                          .css('color', '#BEBEBE')
                          .css('backgroundColor', '#FCFCFC');
    $('#contingent label').css('color', '#AEAEAE');
    $('#contingent .or-select').css('color', '#B2B2B2');
    $('#contingent h2').css('color', '#CACACA');
    },
    function(){
        $('#contingent input').attr('disabled' , false)
                          .css('backgroundColor', '');
    $('#contingent select').attr('disabled' , false)
                          .css('color', '')
                          .css('backgroundColor', '');
    $('#contingent label').css('color', '');
    $('#contingent .or-select').css('color', '');
    $('#contingent h2').css('color', '');
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:17:28.190

不要绑定到 p 上的切换。绑定到复选框上的更改：

我将 HTML 更改为：

```
<p id="contingent-check"><input type="checkbox" name="no-contingent" value="yes" id="no-contingent" /><label for="no-contingent">&nbsp;&nbsp;&nbsp;Do not want to add Contingent Beneficiary</label></p> 
```

然后脚本：

```
$('#no-contingent').change(
function() {
    if ($(this).attr("checked") == "checked") {
        $('#contingent input').attr('disabled', true).css('backgroundColor', '#FCFCFC');
        $('#contingent select').attr('disabled', true).css('color', '#BEBEBE').css('backgroundColor', '#FCFCFC');
        $('#contingent label').css('color', '#AEAEAE');
        $('#contingent .or-select').css('color', '#B2B2B2');
        $('#contingent h2').css('color', '#CACACA');
    }
    else {
        $('#contingent input').attr('disabled', false).css('backgroundColor', '');
        $('#contingent select').attr('disabled', false).css('color', '').css('backgroundColor', '');
        $('#contingent label').css('color', '');
        $('#contingent .or-select').css('color', '');
        $('#contingent h2').css('color', '');
    }
});​ 
```

小提琴：http: [//jsfiddle.net/p4m8c/12/](http://jsfiddle.net/p4m8c/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:23:12.470

将更改事件绑定到您的复选框......并使用三元来缩短您的代码。我还假设您使用的是 jQuery 1.7，因为这就是您设置 jsfiddle 的方式。您应该使用`prop`而不是`attr`设置您的`disabled`财产

```
$('#no-contingent').change(function() {
    var $checked = this.checked; // <-- store boolean - if checkbox is checked -  to use for ternary and set disabled property
    // added select in here since select gets same treatment for disabled and background color
    $('#contingent input,#contingent select').prop('disabled', $checked).css('backgroundColor', $checked ? '#FCFCFC' : '');
    $('#contingent select').css('color', $checked ? '#BEBEBE' : '');
    $('#contingent label').css('color', $checked ? '#AEAEAE' : '');
    $('#contingent .or-select').css('color', $checked ? '#B2B2B2' : '');
    $('#contingent h2').css('color', $checked ? '#CACACA' : '');
}); 
```

并`p`从 html 中删除标签。添加`id`到输入

```
<input id='no-contingent' type="checkbox" name="no-contingent" value="yes"
id="" />
<label for="no-contingent">&nbsp;&nbsp;&nbsp;Do not want to add Contingent Beneficiary</label> 
```

[http://jsfiddle.net/wirey00/p4m8c/19/](http://jsfiddle.net/wirey00/p4m8c/19/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:24:24.263

这有效，我将它绑定到单击[http://jsfiddle.net/p4m8c/17/上的复选框](http://jsfiddle.net/p4m8c/17/)

```
$('#contingent-check input[type=checkbox]').click(
function(){
    if ($(this).is(":checked")) {
        $('#contingent input').attr('disabled' , true).css('backgroundColor', '#FCFCFC');
        $('#contingent select').attr('disabled' , true).css('color', '#BEBEBE').css('backgroundColor', '#FCFCFC');
        $('#contingent label').css('color', '#AEAEAE');
        $('#contingent .or-select').css('color', '#B2B2B2');
        $('#contingent h2').css('color', '#CACACA');
    }
    else {
        $('#contingent input').attr('disabled' , false).css('backgroundColor', '');
        $('#contingent select').attr('disabled' , false).css('color', '').css('backgroundColor', '');
        $('#contingent label').css('color', '');
        $('#contingent .or-select').css('color', '');
        $('#contingent h2').css('color', '');
    }
} 
```

);​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:18:05.817

您已将复选框放在段落中，并且单击事件发生在段落上，而不是复选框上。

最好的办法可能是将复选框移出段落，或者您可以在`toggle()`函数中切换复选框：

```
$('#contingent-check').toggle(
    function() {
        var checkbox = $('[name="no-contingent"]')[0];
        checkbox.checked = !checkbox.checked;
        $('#contingent input').attr('disabled', true).css('backgroundColor', '#FCFCFC');
        $('#contingent select').attr('disabled', true).css('color', '#BEBEBE').css('backgroundColor', '#FCFCFC');
        $('#contingent label').css('color', '#AEAEAE');
        $('#contingent .or-select').css('color', '#B2B2B2');
        $('#contingent h2').css('color', '#CACACA');
    }, function() {
        var checkbox = $('[name="no-contingent"]')[0];
        checkbox.checked = !checkbox.checked;
        $('#contingent input').attr('disabled', false).css('backgroundColor', '');
        $('#contingent select').attr('disabled', false).css('color', '').css('backgroundColor', '');
        $('#contingent label').css('color', '');
        $('#contingent .or-select').css('color', '');
        $('#contingent h2').css('color', '');
});​ 
```

[**小提琴**](http://jsfiddle.net/p4m8c/14/)

# ios - UIImageView 图像未显示

> ID：12043589
> 
> 赞同：0
> 
> 时间：2012-08-20T19:08:30.410
> 
> 标签：ios, uiimageview, uiimage

```
_topBar = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 45)];

UIImageView *bar = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"top_bar.png"]];
bar.frame = CGRectMake(0, 0, 320, 45);
[_topBar addSubview:bar];

_up = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"up.png"]];
[_topBar addSubview:_up]; 
```

_up 没有出现在我的构建中。如果我将“up.png”交换为资源文件夹中的任何其他图像，它会显示，但 up.png 拒绝显示。有什么我可以做的吗？我只使用 UIImage、静态分配的 UIImageView 对其进行了初始化，删除并重新添加了 .png 文件，将它们从资源文件夹中取出并将它们放在其他地方，重新保存它们，除了扔掉它们之外的一切。

**编辑：** 该文件保存为 up.png 但实际上是 up.png.psd。只是阅读细则的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T19:18:42.107

检查 Finder 中的种类。它可能不是 png，因此不会显示。

自从您发表评论以来，我现在知道这是真的:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T19:18:37.347

有几件事。在右侧窗格中选择文件，打开最右侧（第 3 个）文件检查器窗格，并确保此图像包含在您的 Target 中。

在代码中，打破这个：

```
UIImage *image = [UIImage imageNamed:@"up.png"];
NSLog(@"image %@", image);
_up = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"up.png"]];
NSLog(@"UP FRAME: %@", NSStringFromCGRect(_up.frame) );
// maybe set the frame to what you want?
_up.frame = (CGRect){ {0,0}, image.size }; // set origin where you want it 
```

# perl - 从已读取的文件句柄中重新读取

> ID：12043592
> 
> 赞同：17
> 
> 时间：2012-08-20T19:08:36.727
> 
> 标签：perl, filehandle

我打开一个文件逐行读取：

```
open(FH,"<","$myfile") or die "could not open $myfile: $!";
while (<FH>)
{
    # ...do something
} 
```

稍后在程序中，我尝试重新读取文件（再次遍历文件）：

```
while (<FH>)
{
    # ...do something
} 
```

并意识到好像文件中的控件位于 EOF 并且不会从文件的第一行迭代......这是默认行为吗？如何解决这个问题？该文件很大，我不想将其作为数组保存在内存中。那么我唯一的选择是关闭并再次打开文件吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-20T19:14:55.807

使用 seek 倒回文件的开头：

```
seek FH, 0, 0; 
```

或者，更冗长：

```
use Fcntl;
seek FH, 0, SEEK_SET; 
```

请注意，如果您必须搜索输入，它会极大地限制您的工具的实用性，因为它永远不能用作过滤器。能够从管道中读取是非常有用的，并且您应该努力安排您的程序，以便不需要查找。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T19:15:42.923

你有几个选择。

*   重新打开文件句柄
*   正如 William Pursell 建议的那样，使用[seek将位置设置为文件的开头。](http://perldoc.perl.org/functions/seek.html)
*   使用诸如[Tie::File](http://search.cpan.org/perldoc?Tie%3a%3aFile)之类的模块，它可以让您将文件作为数组读取，而无需将其加载到内存中。

# php - Doctrine2 和原始 sql：获取最后插入的 ID

> ID：12043595
> 
> 赞同：2
> 
> 时间：2012-08-20T19:08:42.810
> 
> 标签：php, symfony, doctrine-orm

我有这样的事情：

```
$stmt = $this->getDoctrine()->getConnection()->prepare(
        'insert into someTable (columnList) values (parameters);');

/* 
bind parameters
*/

$stmt->execute(); 
```

如何获取最后插入的 ID？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T19:13:43.267

您需要使用 lastInsertId()。

例子：

```
$dbh = Doctrine_Manager::getInstance()->getCurrentConnection();
$sth = $dbh->prepare("INSERT INTO continent (created_at, updated_at) VALUES ( NOW(), NOW() )");
$sth->execute();

$conn = Doctrine_Manager::getInstance()->getCurrentConnection();
$conn->lastInsertId('continent_id'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-02T07:01:07.967

下面的代码正确回答了这个问题：

```
//This call will get the doctrine connection from inside a symfony2 controller
$conn = $this->getDoctrine()->getConnection();
$stmt = $conn->prepare(
        'insert into someTable (columnList) values (parameters);');

/* 
bind parameters
*/

$stmt->execute();
$id = $conn->lastInsertId(); 
```

要从您创建的学说存储库类中获取连接：

```
$conn = $this->getEntityManager()->getConnection(); 
```

# python - Python 请求 JSON 格式

> ID：12043596
> 
> 赞同：1
> 
> 时间：2012-08-20T19:08:50.503
> 
> 标签：python, urllib2

我正在尝试从 python 发出一个 bitbucket 请求以返回我的存储库列表。它正在响应，但格式包含“\n”字符，我认为我的编码错误，但不知道如何修复它。

如何将我的响应编码为 JSON 格式。

```
theurl = 'https://api.bitbucket.org/1.0/user/repositories/';
username = 'xxxxx';
password = 'xxxxx';

passman = urllib2.HTTPPasswordMgrWithDefaultRealm();
passman.add_password(None, theurl, username, password);

authhandler = urllib2.HTTPBasicAuthHandler(passman);
opener = urllib2.build_opener(authhandler);
urllib2.install_opener(opener);
pagehandle = urllib2.urlopen(theurl);
output = pagehandle.decode('utf-8');
responseH = output.read(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:22:12.907

你为什么不尝试使用`python-bitbucket`？[下面的例子](https://bitbucket.org/kveroneau/python-bitbucket/src/e5df90d9f7b2/examples/get_repository.py)

```
from api import API
import datetime

    api = API("username", "**password**")
    repos = api.get_repositories()

    for repo in repos:
      print "Name: %s" % repo.name
      print "Owner: %s" % repo.owner
      print "Website: %s" % repo.website
      print "Description: %s" % repo.description
      print "Created on: %s" % datetime.datetime.strftime(repo.created_on, "%c")
      print "Language: %s" % repo.language
      print "SCM: %s" % repo.scm
      for issue in repo.get_issues():
        # Yes, this works too!
        print "Issue title: %s" % issue.title
        print "Issue priority: %s" % issue.priority
        print "Issue content:\n%s\n\n" % issue.content
      for change in repo.get_changesets(limit=5):
        print "Revision/Node: %d:%s" % (change.revision, change.node)
        # Since change.timestamp is a datetime object, we can use formatting on it.
        print "Timestamp: %s" % datetime.datetime.strftime(change.timestamp, "%c")
        print "Commit message:\n%s" % change.message
        print "Affected files: %s" % len(change.files)
        for f in change.files:
          print f.filename
        print "\n" 
```

# seo - 制作 robots.txt

> ID：12043599
> 
> 赞同：-1
> 
> 时间：2012-08-20T19:09:00.597
> 
> 标签：seo, robots.txt

我正在为我的网站制作一个 robots.txt。任何人都可以证明我做得对吗？如果我错了，请告诉我如何以正确的形式书写。 *admincp*，*adminpp*等是我的托管服务器中的文件夹：

```
User-agent: *
Disallow: /admincp/
Disallow: /adminpp/
Disallow: /Advertise with us/
Disallow: /ajax/
Disallow: /banner/
Disallow: /cont_img/
Disallow: /corcel/
Disallow: /css/
Disallow: /fbold/
Disallow: /images/
Disallow: /img/
Disallow: /js/
Disallow: /pic/
Disallow: /Scripts/
Disallow: /textpimg/
Disallow: /thumb_uploadtopics/
Disallow: /upload_p1/
Disallow: /uploadtopics/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:11:41.977

您可以阅读这篇文章以更好地掌握编写 Robots.txt

[http://seoroi.com/seo-faq/robotstxt-what-it-is-why-its-used-and-how-to-write-it/](http://seoroi.com/seo-faq/robotstxt-what-it-is-why-its-used-and-how-to-write-it/)

例如，您可以编写：

```
User-agent: *
Disallow: /src/
Disallow: /cgi-bin/
Disallow: /~zohaib/
Disallow: /temp/ 
```

是的，你似乎做得对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:59:59.267

如果您正确地写下您的文件夹名称和页面名称而不是正确的，那么我在您的 robots.txt 文件中没有看到任何问题。

## 如果你想知道一些说明。

用户代理：* --> 表示您允许所有搜索引擎机器人进行爬网。

Disallow : ---> 表示您不想允许访问者访问哪个文件夹和页面。

# c# - 如何减慢动画 gif

> ID：12043601
> 
> 赞同：4
> 
> 时间：2012-08-20T19:09:09.113
> 
> 标签：c#, winforms, gif, animated

我有一个 WinForms 应用程序，它以最简单的方式显示动画 gif - 有一个直接加载 .gif 的 PictureBox。

WinForms 设计器生成的代码如下所示：

```
 // 
        // pictureBoxHomer
        // 
        this.pictureBoxHomer.BackgroundImageLayout = System.Windows.Forms.ImageLayout.None;
        this.pictureBoxHomer.Dock = System.Windows.Forms.DockStyle.Fill;
        this.pictureBoxHomer.Image = ((System.Drawing.Image)(resources.GetObject("pictureBoxHomer.Image")));
        this.pictureBoxHomer.Location = new System.Drawing.Point(3, 3);
        this.pictureBoxHomer.Name = "pictureBoxHomer";
        this.pictureBoxHomer.Size = new System.Drawing.Size(905, 321);
        this.pictureBoxHomer.SizeMode = System.Windows.Forms.PictureBoxSizeMode.CenterImage;
        this.pictureBoxHomer.TabIndex = 0;
        this.pictureBoxHomer.TabStop = false; 
```

图片当然是这样的：http: [//media.tumblr.com/tumblr_m1di1xvwTe1qz97bf.gif](http://media.tumblr.com/tumblr_m1di1xvwTe1qz97bf.gif)

问题：虽然这个动画 gif 在浏览器中显示得非常好，但它在 WinForms 应用程序中运行得太快了，这并不像需要的那样快乐。所以：

问题：有没有办法在 WinForms 应用程序中减慢动画 gif 的速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:52:11.037

我相信答案与 C# 相比与图像相关。如果您在 GIMP 之类的工具中编辑该特定图像并查看图层，您会看到它由 10 个图层（帧）组成，但它们之间没有设置“延迟时间” - 它在图层中有 (0ms)属性。您可以编辑图层的属性并通过右键单击它并在菜单中选择该选项来更改它。当然，最后您必须导出新图像并将其保存为 GIF，在选项中选择“动画”。

我相信在这种情况下（当没有指定帧之间的延迟时间时）Web 浏览器和 C# PicutureBox 会强制使用它们自己不同的默认值。所以，如果你设置一个延迟，比如说 100 毫秒，就像步骤 3 中描述[的](http://www.gimp.org/tutorials/Simple_Animations/)那样，你会让动画变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:53:38.317

为了将来参考，可以覆盖图片框中 GIF 的延迟时间。这是一个粗略的例子：

```
 public partial class Form1 : Form
{
    private FrameDimension dimension;
    private int frameCount;
    private int indexToPaint;
    private Timer timer = new Timer();

    public Form1()
    {
        InitializeComponent();

        dimension = new FrameDimension(this.pictureBox1.Image.FrameDimensionsList[0]);
        frameCount = this.pictureBox1.Image.GetFrameCount(dimension);
        this.pictureBox1.Paint += new PaintEventHandler(pictureBox1_Paint); 
        timer.Interval = 100;
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        indexToPaint++;
        if(indexToPaint >= frameCount)
        {
            indexToPaint = 0;
        }
    }

    void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        this.pictureBox1.Image.SelectActiveFrame(dimension, indexToPaint);
        e.Graphics.DrawImage(this.pictureBox1.Image, Point.Empty);
    }
} 
```

# c# - Bypassing SAFE CLR Managed Procedure limitation on DROP TABLE

> ID：12043603
> 
> 赞同：0
> 
> 时间：2012-08-20T19:09:12.013
> 
> 标签：c#, sql, stored-procedures, clrstoredprocedure

I need advice on the best way of doing this.

Currently I have a clr procedure in MSSQL 2012 that bulk inserts a delimited data file into a temporary table it creates, then processes all the rows via various text/math logic into live data table.

Once its done, i would like to get rid of the table it created. DROP TABLE xxx is where I get the following error.

```
Msg 6522, Level 16, State 1, Procedure SyncAgents, Line 0
A .NET Framework error occurred during execution of user-defined routine or aggregate "SyncAgents": 
System.Security.HostProtectionException: Attempted to perform an operation that was forbidden by the CLR host.

The protected resources (only available with full trust) were: All
The demanded resources were: ExternalThreading

System.Security.HostProtectionException: 
   at StoredProcedures.SyncAgents()
. 
```

Basically means it needs to be UNSAFE. Which is something I would like to avoid. So the question is:

What is the best way of dropping this table after I am done with it? Should it be a scheduled task? Is there some kind of clever trigger that can be set up to do it?

I am thinking of creating a scheduled procedure that looks in the queue (simple varchar/bit with tablename/isprocessed table) and then executes drops based on that queue.

Am I thinking of the problem wrong from the outset?

Would appreciate your suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:28:06.367

If you use a proper temporary table (ie: one prefixed with a `#`) rather than a user table, you'll have the required permissions.

# ios - 在报亭中处理应用内购买

> ID：12043605
> 
> 赞同：0
> 
> 时间：2012-08-20T19:09:18.737
> 
> 标签：ios, in-app-purchase, newsstand-kit

我正在开发一个使用报亭进行订阅购买的应用程序。IAP 使用服务器收据验证是否是 Apple 批准要求？

可以在应用程序中实现 IAP，而无需使用服务器来验证收据。我只是想知道是否可以在报亭应用程序中采用这种方法（我知道这样做会失去一定程度的安全性，但也会降低复杂性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:13:41.587

简单的答案是这不是批准要求，但正如 MSK 所说。推荐。我决定进行服务器验证，这无论如何都不会太麻烦。但是，如果您有兴趣，这里有一个从应用程序本身进行验证的示例。 [http://www.viggiosoft.com/blog/blog/2011/10/29/at-newsstand-and-subscriptions](http://www.viggiosoft.com/blog/blog/2011/10/29/at-newsstand-and-subscriptions/)

# javascript - 将默认图标更改为 MarkerWithLabel

> ID：12043606
> 
> 赞同：2
> 
> 时间：2012-08-20T19:09:22.073
> 
> 标签：javascript, google-maps-api-3

我一直在搜索有关使用 google maps api V3 使用标记显示动态文本的方法。最后我找到了一个使用 MarkerWithLabel 的简单解决方案。链接后的完整文档

[关联](http://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/markerwithlabel/src/markerwithlabel.js?r=131)

我现在遇到的问题是我想更改markerwithlabel 的默认图标，或者如果这不可能，就不要显示它。

我真的很想知道是否有人有同样的问题因为我无法在 thje web 上找到任何相关的内容

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T01:05:34.070

我认为你所要做的就是将'icon'参数传递给你的构造函数，就像这样：MarkerWithLabel extends Marker，它说。

```
x = new MarkerWithLabel({
  icon: 'http://www.mysite.com/myimage.png'
}); 
```

[https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

# python - PyDev 项目的 PYTHONPATH 自动重命名。我该如何正确配置它？

> ID：12043607
> 
> 赞同：0
> 
> 时间：2012-08-20T19:09:30.520
> 
> 标签：python, eclipse, pydev, pylons, reddit

我是 PyDev 的新手，在 Python 中相当生疏。首先尝试使用一个简单的 reddit 应用程序重新进入它。所以这是我的设置：

我有 2 个 PyDev 项目：`reddit`和`pylons`（reddit api.py 从 pylons 导入）。

当我进入`reddit`项目中的任何文件时，对于尝试从 pylons 导入的任何内容，我都会得到“未解析的导入”。在`reddit`的 PYTHONPATH 中，我尝试添加 /pylons 和 /pylons/pylons，但是每当我刷新项目时，PyDev 似乎将我对 /reddit 和 /reddit/pylons 的引用重命名。

我该如何解决？如何正确地将`pylons`项目添加到 PYTHONPATH 中`reddit`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:27:39.200

将另一个项目源包含到您的 PYTHONPATH 中的最正确方法是从您的项目引用另一个项目。为此，请执行以下步骤：

1.  `PyDev Package Explorer`在（通常是左侧的树状面板）中选择您的项目。
2.  按`Alt + Enter`。
3.  单击`Project References`选项卡。
4.  在选项卡内容框架中检查 Pylons 项目。

> **请注意**，必须将包含两个项目的源的路径添加到 python 路径中，以便 Eclipse 为它们构建引用。
> 
> **注意 #2**此外，当您安装一些新的 Python 包时，您需要在`Window > Preferences > PyDev > Interpreter - Python`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:24:50.303

由于 Rostyslav 的解决方案不适合您，也许您应该尝试将 pylons 添加为外部库。在 reddit 的属性窗口中单击`PyDev-PYTHONPATH`选项卡和`External Libraries`选项卡。单击`Add source folder`并找到 pylons 的源文件夹。不监视对外部库的更改。所以你必须`Force restore internal info`在 pydev 找不到新的引用时使用（特别是当你对 pylons 的结构进行更改时）。

# javascript - Google Maps API v3：如何以 2 个动态地址为中心？

> ID：12043609
> 
> 赞同：0
> 
> 时间：2012-08-20T19:09:39.687
> 
> 标签：javascript, api, google-maps, google-maps-api-3, centering

在过去的 8 个小时里，我一直在尝试做一些非常简单的事情。

问题是我对 JavaScript 和 Google Maps API 都不是很熟悉。

**我想做的就是找到2个不同位置的中心并相应地缩放。**

这两个地址是动态的，因为用户将输入信息。

我所有的搜索都以 API v2 或固定位置结束。

有人可以帮我吗？

对此，我真的非常感激！

非常感谢提前！！！

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&region=BR"></script>
<script>
  var geocoder;
  var map;
  var query = "<?php echo $endCercompleto; ?>";
  var query2 = "<?php echo $endFescompleto; ?>";
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var mapOptions = {
      zoom:8,
      center: new google.maps.LatLng(0, 0),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        codeAddress();
  }
  function codeAddress() {
    var address = query;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
    var address2 = query2;
    geocoder.geocode( { 'address': address2}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker2 = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:31:14.730

这应该有效。请注意，每个地理编码器回调例程中的 bounds.extend 和 map.fitBounds。你不知道哪个会先完成。

[概念证明小提琴](http://jsfiddle.net/geocodezip/y32r2kvy/)

```
<script src="https://maps.googleapis.com/maps/api/js?region=BR"></script>
<script>
  var geocoder;
  var bounds = new google.maps.LatLngBounds();
  var map;
  var query = "<?php echo $endCercompleto; ?>";
  var query2 = "<?php echo $endFescompleto; ?>";
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var mapOptions = {
      zoom:8,
      center: new google.maps.LatLng(0, 0),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        codeAddress();
  }
  function codeAddress() {
    var address = query;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        bounds.extend(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
        });
        map.fitBounds(bounds);
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
    var address2 = query2;
    geocoder.geocode( { 'address': address2}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        bounds.extend(results[0].geometry.location);
        var marker2 = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
        });
        map.fitBounds(bounds);
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
}
</script> 
```

# magento - 多个 Magento 商店需要在多个域中可见

> ID：12043614
> 
> 赞同：0
> 
> 时间：2012-08-20T19:09:54.400
> 
> 标签：magento, iis, dns

我安装了多个商店的 Magento，需要在不同的域中显示。

例如。

magento1.com - 需要在当前域可见 magento1.com/store1 - 需要在 store1.com 可见 magento1.com/store2 - 需要在 store2.com 可见

我拥有这些域并尝试对其进行设置 - 但由于某种原因无法使其正常工作。我在服务器上运行 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:10:28.610

[http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)

# java - 如何将 Spring MVC 控制器映射到带有和不带有斜杠的 uri？

> ID：12043618
> 
> 赞同：23
> 
> 时间：2012-08-20T19:10:13.857
> 
> 标签：java, tomcat, spring-mvc

我有一个 Spring 控制器，其中包含用于不同 URI 的多个 RequestMappings。我的 servlet 是“ui”。servlet 的基本 URI 仅适用于尾部斜杠。我希望我的用户不必输入斜杠。

此 URI 有效：

```
http://localhost/myapp/ui/ 
```

这个没有：

```
http://localhost/myapp/ui 
```

它给了我一个 HTTP 状态 404 消息。

我的 web.xml 中的 servlet 和映射是：

```
<servlet>
    <servlet-name>ui</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>ui</servlet-name>
    <url-pattern>/ui/*</url-pattern>
</servlet-mapping> 
```

我的控制器：

```
@Controller
public class UiRootController {

    @RequestMapping(value={"","/"})
    public ModelAndView mainPage() { 
        DataModel model = initModel();
        model.setView("intro");     
        return new ModelAndView("main", "model", model);
    }

    @RequestMapping(value={"/other"})
    public ModelAndView otherPage() { 
        DataModel model = initModel();
        model.setView("otherPage");     
        return new ModelAndView("other", "model", model);
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-12-16T20:49:37.097

使用 Springboot，我的应用程序可以通过将 @RequestMapping 的“值”选项设置为空字符串来回复带有和不带有斜杠的回复：

```
@RestController
@RequestMapping("/some")
public class SomeController {
//                  value = "/" (default) ,
//                  would limit valid url to that with trailing slash.
    @RequestMapping(value = "", method = RequestMethod.GET)
    public Collection<Student> getAllStudents() {
        String msg = "getting all Students";
        out.println(msg);
        return StudentService.getAllStudents();
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-22T15:13:58.247

例如，如果您的 Web 应用程序存在于 Web 服务器的 webapps 目录中，`webapps/myapp/`则可以在`http://localhost:8080/myapp/`假定默认 Tomcat 端口时访问此应用程序上下文的根目录。*我认为*默认情况下，这应该使用或不使用斜杠- 当然在 Jetty v8.1.5 中就是这种情况

一旦您点击`/myapp`Spring [DispatcherServlet](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html)接管，将请求路由到您的`<servlet-name>`配置`web.xml`，在您的情况下是`/ui/*`.

然后 DispatcherServlet 将所有请求路由`http://localhost/myapp/ui/`到`@Controller`s。

在*控制器*本身中，您可以使用**`@RequestMapping(value = "/*")`**mainPage *()*方法，这将导致两者都`http://localhost/myapp/ui/`被`http://localhost/myapp/ui`路由到*mainPage()*。

[注意：由于SPR-7064](https://jira.springsource.org/browse/SPR-7064)，您还应该使用 Spring >= v3.0.3

为了完整起见，以下是我测试过的文件：

### src/main/java/controllers/UIRootController.java

```
package controllers;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class UiRootController {
  @RequestMapping(value = "/*")
  public ModelAndView mainPage() {
    return new ModelAndView("index");
  }

  @RequestMapping(value={"/other"})
  public ModelAndView otherPage() {
    return new ModelAndView("other");
  }
} 
```

### WEB-INF/web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
  version="3.0" metadata-complete="false">
  <servlet>
    <servlet-name>ui</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <!-- spring automatically discovers /WEB-INF/<servlet-name>-servlet.xml -->
  </servlet>

  <servlet-mapping>
    <servlet-name>ui</servlet-name>
    <url-pattern>/ui/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

### WEB-INF/ui-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="controllers" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
  p:order="2"
  p:viewClass="org.springframework.web.servlet.view.JstlView"
  p:prefix="/WEB-INF/views/"
  p:suffix=".jsp"/>
</beans> 
```

还有 2 个 JSP 文件位于`WEB-INF/views/index.jsp`和`WEB-INF/views/other.jsp`.

结果：

*   `http://localhost/myapp/`-> 目录列表
*   `http://localhost/myapp/ui`和`http://localhost/myapp/ui/`-> index.jsp
*   `http://localhost/myapp/ui/other`和`http://localhost/myapp/ui/other/`-> other.jsp

希望这可以帮助！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-07-22T20:02:31.490

> [PathMatchConfigurer](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/PathMatchConfigurer.html) api 允许您配置与 URL 映射和路径匹配相关的各种设置。根据最新版本的 spring，默认启用路径匹配。如需自定义，请查看以下示例。

**对于基于 Java 的配置**

```
@Configuration
@EnableWebMvc
public class AppConfig extends WebMvcConfigurerAdapter {
    @Override
    public void configurePathMatch(PathMatchConfigurer configurer) {
        configurer.setUseTrailingSlashMatch(true);
    }
} 
```

**对于基于 XML 的配置**

```
<mvc:annotation-driven>
    <mvc:path-matching trailing-slash="true"/>
</mvc:annotation-driven> 
```

> *对于@RequestMapping("/foo")，如果尾部斜杠匹配设置为**false**，example.com/foo/ != example.com/foo 并且如果它设置为**true**（默认），example.com/foo/ == example .com/foo*

干杯!

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T16:24:51.333

我最终添加了一个新的 RequestMapping 来将 /ui 请求重定向到 /ui/。还从 mainPage 的 RequestMapping 中删除了空字符串映射。无需对 web.xml 进行编辑。

在我的控制器中结束了这样的事情：

```
 @RequestMapping(value="/ui")
    public ModelAndView redirectToMainPage() {
        return new ModelAndView("redirect:/ui/");
    }

    @RequestMapping(value="/")
    public ModelAndView mainPage() { 
        DataModel model = initModel();
        model.setView("intro");     
        return new ModelAndView("main", "model", model);
    }

    @RequestMapping(value={"/other"})
    public ModelAndView otherPage() { 
        DataModel model = initModel();
        model.setView("otherPage");     
        return new ModelAndView("other", "model", model);
    } 
```

现在 URL`http://myhost/myapp/ui`重定向到`http://myhost/myapp/ui/`，然后我的控制器显示介绍页面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-24T19:43:01.410

我发现的另一个解决方案是不给 mainPage() 的请求映射一个值：

```
@RequestMapping
public ModelAndView mainPage() { 
    DataModel model = initModel();
    model.setView("intro");     
    return new ModelAndView("main", "model", model);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-14T14:06:53.273

尝试添加

`@RequestMapping(method = RequestMethod.GET) public String list() { return "redirect:/strategy/list"; }`

结果：

```
 @RequestMapping(value = "/strategy")
    public class StrategyController {
    static Logger logger = LoggerFactory.getLogger(StrategyController.class);

    @Autowired
    private StrategyService strategyService;

    @Autowired
    private MessageSource messageSource;

    @RequestMapping(method = RequestMethod.GET)
    public String list() {
        return "redirect:/strategy/list";
    }   

    @RequestMapping(value = {"/", "/list"}, method = RequestMethod.GET)
    public String listOfStrategies(Model model) {
        logger.info("IN: Strategy/list-GET");

        List<Strategy> strategies = strategyService.getStrategies();
        model.addAttribute("strategies", strategies);

        // if there was an error in /add, we do not want to overwrite
        // the existing strategy object containing the errors.
        if (!model.containsAttribute("strategy")) {
            logger.info("Adding Strategy object to model");
            Strategy strategy = new Strategy();
            model.addAttribute("strategy", strategy);
        }
        return "strategy-list";
    } 
```

** 学分：

[高级@RequestMapping技巧——控制器根和URI模板](http://duckranger.com/2012/04/advanced-requestmapping-tricks-controller-root-and-uri-templates/)

# visual-studio - 有没有办法“覆盖” .csproj 文件设置？

> ID：12043619
> 
> 赞同：6
> 
> 时间：2012-08-20T19:10:20.720
> 
> 标签：visual-studio, msbuild

我的解决方案中有很多项目。

我想让每个人都有一个设置被覆盖。我可以去编辑它们。但这对于跟随我的开发人员来说是乏味且容易出错的。

所以，我希望有一种方法可以在构建实际开始之前将自定义 .proj 文件合并到 .csproj 中。

我要更改的设置是输出设置（用于调试配置）。我想将其设置为 $(SolutionDir)\bin\Debug。

我是个一厢情愿的人？或者有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T06:32:37.763

您可以创建一个自定义 .targets 文件，该文件设置您希望所有项目通用的属性。

在您的自定义 .targets 文件中，设置属性：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'">
    <OutputPath>$(SolutionDir)\bin\Debug</OutputPath>
</PropertyGroup> 
```

您仍然必须在每个 .csproj 文件中包含此目标文件，并删除先前设置的 OutputPath 属性（否则，它将覆盖 .targets 文件中的设置）。

```
<Import Project="<PathToYourTargetsFile>"/> 
```

虽然这仍然涉及编辑每个 .csproj 文件，但它比直接在每个文件中设置该属性更易于维护，特别是如果您认为将来可能有更多设置希望每个项目都有共同点。在任何添加的项目中，开发人员都必须记住导入该 .targets 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:42:34.743

从 msbuild 命令行设置输出参数：

/p:OutputPath="$(SolutionDir)\bin\Debug"

OutputPath - 指定输出目录的路径，相对于项目目录，例如“bin\Debug”。

另一种选择是在 csproj 文件中放置一个配置覆盖。像下面这样。不确定这是否是您想要做的事情。

```
<Config
Name = “Release”
AllowunsafeBlocks = “false”
BaseAddress = “285212672”
CheckForOverflowUnderflow = “false”
ConfigurationoverrideFile = “debug. web. config”
DefineConstants = “TRACE”
DocumentationFile = “
DebugSymbols = “false”
FileAlignrnent = “4096”
IncrementalBuild = “false”
Optimize = “true”
OutputPath = “bin\”
RegisterForcomlnterop = “false”
RemovelntegerChecks = “false”
TreatWarningsAsErrors = “false”
WarningLevel = “4”
/> 
```

# asp.net - 没有显式登录的 ASP.NET 登录重定向

> ID：12043629
> 
> 赞同：3
> 
> 时间：2012-08-20T19:11:16.737
> 
> 标签：asp.net, ajax, asp.net-mvc, asp.net-ajax

带有 MVC 3.0 的 ASP .NET 4.0

所以情况是这样的：我是 MVC 和 ASP.NET 的新手，我有一个 MVC 应用程序，它在**web.config**中使用 FormAuthentication 和以下内容：

```
<authentication mode="Forms">
   <forms loginUrl="~/LogOn/LogOn" timeout="2" requireSSL="true" />
</authentication> 
```

通常发生的情况是，如果用户在会话过期后导航到某个页面，他们会被定向到 LogOn 页面，这很好。如果请求是 Ajax 调用，我想要做的是防止该页面被发回，而是发回一个 JSON 对象以指示失败。
我已经捕获了请求，通过以下方式检查 XMLHttp 类型：

```
void MvcApplication_AuthenticateRequest(object sender, EventArgs e)
{
        if (s_identityProvider == null)
            return;
        IClaimsPrincipal principal = GetClaimsPrincipal();
        Context.User = principal;
        if (principal != null)
            ClaimProvider.CheckAndPopulateRoles(principal);
        else
        {
            if (Context.Request.Headers["X-Requested-With"] == "XMLHttpRequest")
            {
                Context.Response.Write( "<?xml version='1.0' encoding='ISO-8859-1'?>"+
                                        "<note>"+
                                        "</note>";
            }
            else
            {
                FormsAuthentication.SignOut();
            }
        }
} 
```

现在，我测试了我对 AJAX 调用的检查似乎有效，唯一奇怪的是在捕获之后，登录页面仍然作为响应发送。我已经检查了 FormsAuthentication 方法的所有用途，以确保没有其他人强制使用 a`FormsAuthentication.RedirectToLoginPage()`并检查了，事实上，FormsAuthentication 的所有用途都没有做任何奇怪的事情。我还检查了登录页面 URL（通过`GetRedirectUrl()`）的查询，但仍然没有。

有谁知道自动重定向会做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:17:50.363

我唯一的猜测是该`AuthenticateRequest`方法不是这里请求生命周期的结束。因此，`Response`最终返回给用户的是重定向响应。您应该尝试在捕获并修改 AJAX 响应后显式结束，`Response`以避免 MVC 框架进一步操作

```
if (Context.Request.Headers["X-Requested-With"] == "XMLHttpRequest")
{
    Context.Response.Write( "<?xml version='1.0' encoding='ISO-8859-1'?>"+
                            "<note>"+
                            "</note>";
    Context.Response.End(); // Calling End here should complete the response.
 }
 else {
            // ... other stuff
 } 
```

# jplayer - 如何让 jPlayer 在播放之前显示曲目持续时间？

> ID：12043634
> 
> 赞同：0
> 
> 时间：2012-08-20T19:11:56.960
> 
> 标签：jplayer

我正在使用 jPlayer 显示 mp3 文件的音频播放器，并且持续时间字段显示`00:00`，直到我点击播放按钮，然后它在播放时显示正确的持续时间。（请注意，这是与[此类似问题](https://stackoverflow.com/questions/10101446/html5-audio-duration-issue)**不同**的症状。）

如何让 jPlayer在用户点击播放按钮*之前*获取并显示持续时间（以便他们知道音频剪辑在决定播放之前有多长）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:49:22.753

事实证明，jPlayer 支持 HTML5`preload`参数，因此添加`preload: 'auto'`到 jPlayer 构造函数选项可以解决此问题并显示轨道持续时间。但是，这也会下载整个音频文件，这很烦人，因为它可能会为用户可能永远不会播放的音轨使用大量带宽。就我而言，情况更糟，因为我有一个包含十几个用户故事的页面，并且该页面会下载*所有*用户故事。

令人沮丧的是，有一个选项`preload: 'metadata'`，听起来它应该完全符合我的要求，即下载轨道元数据而不下载整个文件，但这似乎不起作用。这显然是浏览器*应该*支持的东西，但还没有。

现在，我将跳过此功能，或者构建一个服务器端片段来检查持续时间并通过单独的 AJAX 调用对其进行流式传输。

# uipagecontrol - UIPage 控件仅在第 4 页点后响应

> ID：12043645
> 
> 赞同：0
> 
> 时间：2012-08-20T19:12:31.433
> 
> 标签：uipagecontrol

这是代码，当页面超过 5 时，点仅在单击第 4 页及更高页面后才会响应，而反过来，第 2 和第 3 个点是可选的

```
 if(self.eventDetailPages != Nil)
              [self.eventDetailPages removeFromSuperview]; 
            self.eventDetailPages = [[UIPageControl alloc] init];
            self.eventDetailPages.numberOfPages = self.evtListData.iTotalPages;
            NSLog(@"The total number of pages - %d", self.evtListData.iTotalPages);
            CGSize pageControlSize = [self.eventDetailPages sizeForNumberOfPages:self.eventDetailPages.numberOfPages];
            NSLog(@"The total width of pages - %f", pageControlSize.width);
            self.eventDetailPages.frame = CGRectMake(0, 150, pageControlSize.width,30);
            self.eventDetailPages.backgroundColor   = [UIColor blackColor];
            self.eventDetailPages.center = CGPointMake(self.view.frame.size.width/2, 150);
            self.eventDetailPages.clearsContextBeforeDrawing = TRUE;
            [self.eventDetailPages addTarget:self action:@selector(pageChanged:)  forControlEvents:UIControlEventValueChanged];
            [self.view addSubview:self.eventDetailPages]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:34:03.420

在我的情况下，有 4 个点，点仅在单击第 3 个点及以上时或之后响应，而反过来，第 2 个和第 3 个点是可选的 [m_pPageControl addTarget:self action:@selector(gotonextPage:) forControlEvents:UIControlEventTouchUpInside];

```
 -(void)gotonextPage:(UIPageControl *) pageControl
     {   
      int page = m_pPageControl.currentPage;
       NSLog(@"PAGEVALUE%d",page);
      [m_pScrollView setContentOffset:CGPointMake(page * m_pScrollView.frame.size.width,    0)animated:YES];

     } 
```

我应该怎么办？如果我点击第二个点，当前页面的值不会改变。如果我点击第三个，那么当前页面的值正在改变......

# java - 静态变量生成：非静态变量无法从静态上下文错误中引用

> ID：12043659
> 
> 赞同：2
> 
> 时间：2012-08-20T19:13:31.023
> 
> 标签：java, static, jdialog

我在这里不知所措。

我可以看到为什么会发生以下情况的任何原因：

```
 public class UI extends javax.swing.JFrame {
            .
            .
            .
            .
377:        private static JDialog dialog;
378:
379:        static void conflict_dialog(){
380:        dialog =  new conflict(this, true,new File("C:\\Users\\Soumya\\Desktop\\a.sh"), 2242);
381:        dialog.setVisible(send_mode);
            .
            .

            }

        } 
```

> 无法编译的源代码 - 无法从 new_file_transfer.UI.conflict_dialog(UI.java:380) 的静态上下文中引用的非静态变量

关于我为什么会收到此错误的任何想法都会非常有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:16:52.707

您正在使用对`this`具有静态方法内部的对象实例的引用，该方法没有`this`.

您需要`UI`在调用内部创建一个新实例： `dialog = new conflict(New UI(), true, ...);`

或将方法更改为非静态并从`UI`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:14:38.957

而不是`this`用于`new UI()`

```
dialog =  new conflict(this, true,new File("C:\\Users\\Soumya\\Desktop\\a.sh"), 2242); 
```

（或者）

去除静电`static void conflict_dialog(){`

因为“conflict_dialog”是静态的（类范围），所以您不能访问实例范围（`this`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:17:14.483

这是问题所在：

```
dialog =  new conflict(this, ...); 
```

你在一个静态方法中 - 你期望`this`是什么？根据thinksteep的答案构建一个新的*可能*`UI`是合适的 - 或者您可能想使用其他地方的现有参考。很难确定。当您编写该代码时，您*想* `this`引用什么？

（请注意，要遵循 Java 命名约定，您的`conflict`类应该重命名为`Conflict`；您的方法可能应该重命名为，`showConflictDialog`而您的`send_mode`变量可能应该是`sendMode`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:52:11.053

静态方法在程序第一次加载类时执行。

要访问静态方法或变量，不需要对象

```
 'ClassName.mystaticethod();' 
```

这里我们还没有创建任何对象。

而“this”指的是我们正在使用的当前对象调用方法或变量。

即使不创建任何对象，我们也可以访问静态方法。

所以在静态方法的情况下，“this”没有任何意义。因为没有创建对象，所以没有“this”（当前对象）。

# spring - Spring Security 还是完全自定义过滤器？

> ID：12043661
> 
> 赞同：0
> 
> 时间：2012-08-20T19:13:34.570
> 
> 标签：spring, rest, spring-mvc, spring-security

我想以某种方式保护我的 RESTful web 服务，我在过去的几个小时里阅读了有关 spring 安全性的内容，但我不确定我是否能用它实现我想要的。这是典型的场景：

1.  用户尝试访问 www.address.com/rest/getSomething - 他得到 401 Unauthorized 并且他*没有*被重定向。
2.  他使用用户名和密码参数访问 www.address.com/rest/login
    1.  他的凭据会根据数据库中的凭据进行检查（我在 Hibernate 上使用 JPA）
    2.  如果他们是正确的用户收到200 OK，并且他登录的信息存储在会话中，因此他在访问其他地址时不需要发送用户名和传递。他成功（或不成功）登录的信息存储在数据库中
    3.  如果登录不成功，他会收到 401
3.  用户尽可能多地使用网络服务（在每次访问时，都会检查他的会话）
4.  在假设 10 分钟不活动后，他的会话结束，他需要再次登录
5.  他可以访问 www.address.com/rest/logout 以正确注销（会话无效可能吗？）

我还想介绍某种密码恢复，如果用户访问 www.address.com/rest/remindPass，将发送一封包含新生成密码的电子邮件。

编辑：我忘了，还有一件事。我还需要另一个过滤器来检查用户是否有足够的权限来访问地址。

# android - 通知点击：活动已开启

> ID：12043671
> 
> 赞同：180
> 
> 时间：2012-08-20T19:14:25.737
> 
> 标签：android, notifications, android-activity

我有一个带有通知的应用程序，如果我单击它们会打开某个活动。我想要那个，如果我点击通知并且活动已经打开，它**不会**再次启动，而只是被带到前面。

我以为我可以用 flag`FLAG_ACTIVITY_BROUGHT_TO_FRONT`或来做到这一点`FLAG_ACTIVITY_REORDER_TO_FRONT`，但它会再次打开它，所以我有两次活动。

这是我的代码：

```
event_notification = new Notification(R.drawable.icon,
            mContext.getString(R.string.event_notif_message), System.currentTimeMillis()); 
Intent notificationIntent = new Intent(mContext, EventListActivity.class);
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
sendNotification(event_notification, notificationIntent, mContext.getString(R.string.event_notif_title),
                body, Utils.PA_NOTIFICATIONS_ID); 
```

我可以用标志管理它还是应该在 SharedPreferences 中存储一个变量来检查它是否打开？

谢谢！

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2012-08-20T19:16:32.350

你需要设置你开始的`launchMode`属性。这将导致传入的 Intent 被传递到现有实例，而不是在该实例已经位于任务堆栈的顶部时启动一个新实例。`Activity``singleTop``Activity`

这是通过添加`android:launchMode="singleTop"`到`<activity>`元素在清单中完成的。要访问最新的 Intent（如果您对可能随它传入的任何数据感兴趣），请覆盖`onNewIntent()`您的`Activity`.

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-20T19:19:52.787

尝试将标志设置为`Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP`。

从[FLAG_ACTIVITY_CLEAR_TOP 的文档](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)（强调我的）：

> **如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。**
> 
> 例如，考虑一个由以下活动组成的任务：A、B、C、D。如果 D 调用 startActivity() 的 Intent 解析为活动 B 的组件，则 C 和 D 将完成，B 接收给定的 Intent ，导致堆栈现在是：A，B。
> 
> 上面示例中当前运行的活动 B 实例将在其 onNewIntent() 方法中接收您在此处启动的新意图，或者自身完成并使用新意图重新启动。如果它已声明其启动模式为“多重”（默认）并且您没有在同一意图中设置 FLAG_ACTIVITY_SINGLE_TOP，那么它将完成并重新创建；对于所有其他启动模式，或者**如果设置了 FLAG_ACTIVITY_SINGLE_TOP，则此 Intent 将被传递到当前实例的 onNewIntent()。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-10T21:24:05.233

用于`onNewIntent()`处理来自通知单击和刷新活动的新数据。

`onNewIntent`从新意图（由新通知提供服务）中获取新数据并捕获它们，例如：

`title = intent.getStringExtra("title")`

在 `onCreate`以前:)

它将使用新的通知数据刷新当前活动。

您也可以按照[本教程进行操作。](http://androidrace.com/2016/12/10/how-to-refresh-activity-on-new-notification-click-android-developer/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-03T04:43:21.453

```
Notification.Builder mBuilder =
            new Notification.Builder(this)
            .setSmallIcon(R.drawable.cmplayer)
            .setContentTitle("CoderoMusicPlayer")
            .setContentText("PLayer0!");

    Intent resultIntent = new Intent(this, 

    AndroidBuildingMusicPlayerActivity.class);
        resultIntent.setAction(Intent.ACTION_MAIN);
        resultIntent.addCategory(Intent.CATEGORY_LAUNCHER);

        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
                resultIntent, 0);

        mBuilder.setContentIntent(pendingIntent);
        NotificationManager mNotificationManager =
            (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        mNotificationManager.notify(1, mBuilder.build()); 
```

只需复制代码并将其粘贴到您的主启动器活动中。

[这是原始答案](https://stackoverflow.com/a/21424959/1149398)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-02T22:02:45.133

我认为您应该添加一些逻辑以使其正常工作，也许这会有所帮助：

**例如，我有一个 APP 的启动画面（启动器和 MAIN）：**

```
public class SplashScreen extends AppCompatActivity {
    private final int TIME_OUT = 2000;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash_screen);

        // Suscribirse al tema Notificaciones
        FirebaseMessaging.getInstance().subscribeToTopic("NOTA");
        if (getIntent().getExtras() != null) {
            if (getIntent().getExtras().size()>1){
                Intent home_activity = new Intent(getApplicationContext(), Home.class);
                home_activity.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                if (getIntent().getExtras() != null) {
                    for (String key : getIntent().getExtras().keySet()) {
                        String value = "" + getIntent().getExtras().getString(key);
                        Log.d("TAG", key + "=" + value);
                        switch (key) {
                            case "url":
                                home_activity.putExtra("url", value);
                                break;
                        }
                    }
                }
                startActivity(home_activity);
                finish();

            }else{
                new Handler().postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            Intent home_activity = new Intent(getApplicationContext(), Home.class);
                            home_activity.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(home_activity);
                            finish();
                        } catch (Exception ex) {
                            ex.printStackTrace();
                        }
                    }
                }, TIME_OUT);
            }

        } else {
            new Handler().postDelayed(new Runnable() {
                @Override
                public void run() {
                    try {
                        Intent home_activity = new Intent(getApplicationContext(), Home.class);
                        home_activity.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(home_activity);
                        finish();
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                }
            }, TIME_OUT);
        }

    }

} 
```

**在我的 FirebaseService 中，我做了以下事情：**

```
public class FCMessagingService extends FirebaseMessagingService {

    private final String TAG = "PUSH";
    private String body = "";
    private static String _url = "";
    private static int numMessage = 0;

    @Override
    public void onMessageReceived(RemoteMessage remoteMessage) {
        super.onMessageReceived(remoteMessage);

        String from = remoteMessage.getFrom();
        Log.d(TAG, "Mensaje recibido de: " + from);

        if (remoteMessage.getNotification() != null) {
            Log.d(TAG, "Notificación: " + remoteMessage.getNotification().getBody());

            if (remoteMessage.getData().size() > 0) {
                Log.d(TAG, "Data: " + remoteMessage.getData());
                try {
                    JSONObject data = new JSONObject(remoteMessage.getData());
                    String url = data.getString("url");
                    Log.d(TAG, "onMessageReceived: \n" + "Extra Information: " + url);
                    this._url = url;
                    Log.d("_URL",_url);
                    mostrarNotificacion(remoteMessage.getNotification().getTitle(), remoteMessage.getNotification().getBody());
                    mensaje(url, remoteMessage.getNotification().getTitle(), remoteMessage.getNotification().getBody());
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }

    }

    private void mensaje(String url, String title, String body){
        boolean acti =  Util.comprobarActivityALaVista(getApplicationContext(), "com.dev.android.subagan.MainActivity");
        if(acti){

            Intent imain = new Intent(MainActivity.URL);

            imain.putExtra("key_url",url);
            imain.putExtra("key_title",title);
            imain.putExtra("key_body",body);

            LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(imain);

        }else{

            Intent ihome = new Intent(Home.URL);

            ihome.putExtra("key_url",url);
            ihome.putExtra("key_title",title);
            ihome.putExtra("key_body",body);
            LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(ihome);

        }

    }

    private void mostrarNotificacion(String title, String body) {

        final int NOTIFICATION_ID = 3000;

        Intent intent = new Intent(this, MainActivity.class);
        intent.putExtra("url",_url);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent,PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT  );

        Uri soundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
                .setSmallIcon(R.mipmap.ic_launcher)
                .setContentTitle(title)
                .setContentText(body)
                .setAutoCancel(true)
                .setSound(soundUri)
                .setTicker(body)
                .setContentIntent(pendingIntent);

        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.notify(0, notificationBuilder.build());

    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-27T11:49:54.480

```
Intent intent = new Intent(this, MainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
PendingIntent contentIntent = PendingIntent.getActivity(this, new Random().nextInt(), intent, 0); 
```

# python - 如何在 MatPlotLib 中为散点图/绘图绘制平均线？

> ID：12043672
> 
> 赞同：20
> 
> 时间：2012-08-20T19:14:31.907
> 
> 标签：python, matplotlib

我的数据如下：

```
x = [3,4,5,6,7,8,9,9]
y = [6,5,4,3,2,1,1,2] 
```

我可以获得以下两个图表。

![在此处输入图像描述](../Images/769ecbc21fee59b37ead469d140e4279.png)

和

![在此处输入图像描述](../Images/0cdca286fc4451dd3db1dd3d5a97c29a.png)

但是，我想要的是*这个*（沿途所有点的平均值）： ![在此处输入图像描述](../Images/c32d976b2d4b0bffa57e4d6406ffb4d2.png)

在matplotlib中可以吗？还是我必须手动更改列表并以某种方式创建：

```
x = [3,4,5,6,7,8,9]
y = [6,5,4,3,2,1,1.5] 
```

**相关代码**

```
ax.plot(x, y, 'o-', label='curPerform')
x1,x2,y1,y2 = ax.axis()
x1 = min(x) - 1 
x2 = max(x) + 1
ax.axis((x1,x2,(y1-1),(y2+1))) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-11T13:53:15.473

我认为这可以通过做最简单的方式来完成`y_mean = [np.mean(y) for i in x]`

**示例**：

```
import matplotlib.pyplot as plt
import random
import numpy as np

# Create some random data
x = np.arange(0,10,1)
y = np.zeros_like(x)    
y = [random.random()*5 for i in x]

# Calculate the simple average of the data
y_mean = [np.mean(y)]*len(x)

fig,ax = plt.subplots()

# Plot the data
data_line = ax.plot(x,y, label='Data', marker='o')

# Plot the average line
mean_line = ax.plot(x,y_mean, label='Mean', linestyle='--')

# Make a legend
legend = ax.legend(loc='upper right')

plt.show() 
```

**结果图**： ![在此处输入图像描述](../Images/9395bad78b0af02fee76fd387892003c.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T19:19:52.333

是的，您必须自己进行计算。 `plot`绘制你给它的数据。如果您想绘制一些其他数据，您需要自己计算这些数据，然后再绘制它。

编辑：进行计算的快速方法：

```
>>> x, y = zip(*sorted((xVal, np.mean([yVal for a, yVal in zip(x, y) if xVal==a])) for xVal in set(x)))
>>> x
(3, 4, 5, 6, 7, 8, 9)
>>> y
(6.0, 5.0, 4.0, 3.0, 2.0, 1.0, 1.5) 
```

# css - 带有 CSS 的 Formtastic 提交按钮样式

> ID：12043677
> 
> 赞同：1
> 
> 时间：2012-08-20T19:14:49.487
> 
> 标签：css, ruby-on-rails, ruby, button, formtastic

我需要一些关于表单提交按钮样式的帮助。

# 看法

```
<%= semantic_form_for @comment || NewsComment.new, :url => news_ncomments_url(@news) do |f| %>
   <%= f.inputs do %>
       <%= f.input :body, :label => false, :required => true %>
   <% end %>
   <%= f.actions do %>
       <%= f.action :submit, :label => "Kommentar absenden" %>
   <% end %>
<% end %> 
```

# css

```
#news_comment_submit_action {
    background: rgb(93,190,232);
    background: -moz-linear-gradient(top, rgb(93,190,232) 0%, rgb(53,156,218) 50%, rgb(35,141,211) 51%, rgb(34,139,207) 89%, rgb(32,131,196) 95%, rgb(32,131,196) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgb(93,190,232)), color-stop(50%,rgb(53,156,218)), color-stop(51%,rgb(35,141,211)), color-stop(89%,rgb(34,139,207)), color-stop(95%,rgb(32,131,196)), color-stop(100%,rgb(32,131,196)));
    background: -webkit-linear-gradient(top, rgb(93,190,232) 0%,rgb(53,156,218) 50%,rgb(35,141,211) 51%,rgb(34,139,207) 89%,rgb(32,131,196) 95%,rgb(32,131,196) 100%);
    background: -o-linear-gradient(top, rgb(93,190,232) 0%,rgb(53,156,218) 50%,rgb(35,141,211) 51%,rgb(34,139,207) 89%,rgb(32,131,196) 95%,rgb(32,131,196) 100%);
    background: -ms-linear-gradient(top, rgb(93,190,232) 0%,rgb(53,156,218) 50%,rgb(35,141,211) 51%,rgb(34,139,207) 89%,rgb(32,131,196) 95%,rgb(32,131,196) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5dbee8', endColorstr='#2083c4',GradientType=0 );
    background: linear-gradient(top, rgb(93,190,232) 0%,rgb(53,156,218) 50%,rgb(35,141,211) 51%,rgb(34,139,207) 89%,rgb(32,131,196) 95%,rgb(32,131,196) 100%);text-decoration: underline;
    color: #fff;
    text-decoration: none;
    width: 134px;
    height:32px;
    padding: 5px;
    position: relative;
    display: block;
    left: -5px;
    margin-bottom: 12px;
    -webkit-box-shadow: 0 0 6px #999;
    -moz-box-shadow: 0 0 6px #999;
    box-shadow: 0 0 6px #999;
} 
```

# 图片

[http://img.i7x.de/i/PMkmqY/button_display_error.png](http://img.i7x.de/i/PMkmqY/button_display_error.png)

有谁知道我可以如何禁用这个丑陋的灰色背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:22:20.733

您必须设置按钮本身的样式：

```
input[type="submit"] {
    background: transparent;
    border: 0;
} 
```

您可能应该比 更具体`input[type="submit"]`，但您明白了。

在您的图片中，您似乎在设置按钮容器的样式，而不是按钮本身。

# ruby-on-rails - 有子文件夹显示 index.html - Rails / nginx

> ID：12043678
> 
> 赞同：2
> 
> 时间：2012-08-20T19:14:50.003
> 
> 标签：ruby-on-rails, nginx, ruby-on-rails-2

我的 Rails 应用程序上有一个子目录，我希望它完全是静态的。我的问题是我无法访问 /subdirectory/ 并让它显示 index.html，我必须去 /subdirectory/index.html。

如何显示子目录的索引文件？我正在使用 nginx 和 rails 2.3.11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:54:01.087

您使用 [http://nginx.org/en/docs/http/ngx_http_index_module.html#index中描述的 index 指令设置索引文件的内容](http://nginx.org/en/docs/http/ngx_http_index_module.html#index)

或者，您可以将尝试 index.html 显式添加到您的子目录位置的 try_files 指令中：

```
location /static-subdir/ {
  try_files $uri $uri/index.html;
} 
```

# objective-c - 为什么我的图表如此不稳定？

> ID：12043684
> 
> 赞同：0
> 
> 时间：2012-08-20T19:15:17.817
> 
> 标签：objective-c, macos, cocoa, core-plot

我使用 Core Plot 创建了一个散点图。但是，我的图表需要动态刷新（不断添加和删除点）。我需要情节流畅并且看起来“在图表上滑动”。相反，我似乎得到了一条断断续续的线，它一次添加多个值，冻结并再次添加多个值。什么可能导致这种行为？

```
-(void)updateDataWithVal:(double)percentageUsage
{
    if ([self.graphData count] >= 10)
    {
        [self.graphData removeLastObject];
    }
    [self.graphData insertObject:[NSNumber numberWithDouble:percentageUsage]  atIndex: 0];
    [self.graph reloadData];
} 
```

上面是每次我希望图表改变时调用的函数。问题不在于正在更新的数据。我调试了函数并注意到数据正在流畅地更新（每秒从数据数组中添加和删除一个点）。问题在于图形实际上在变化。什么可能导致图表冻结并一次添加多个点（每 6-7 秒），而不是像数据那样每秒不断更新？

我怀疑这是由于在短时间内添加了许多点造成的。每秒只删除和添加*一个点。*此外，我的图表只有*一个*情节。

我的图表在 OSX*而不是*iOS 上运行。所有代码都在 Objective-C 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:17:07.197

根据要求，我可以将我的评论转换为答案，以便结束。

Core Plot 图严重依赖显示元素，因此对它们的任何更新都必须在主线程上执行。否则，您将看到奇怪的渲染行为，例如不一致的更新、视觉伪影，并且您的应用程序很可能会在某个时候崩溃。

我必须做你在我的一个 Mac 应用程序中描述的同样的事情。为此，我使用一个后台 GCD 队列来处理数据采集和处理，以避免阻塞主线程。但是，每次我需要将结果插入图表并对其进行更新时，我都会使用`dispatch_async()`将适当的代码包装在要在主线程上执行的块中。这应该可以保护您免受呈现像您在此处看到的那样的奇怪现象。

# iphone - 苹果游戏中心得分

> ID：12043685
> 
> 赞同：3
> 
> 时间：2012-08-20T19:15:21.647
> 
> 标签：iphone, ios, game-center

在我看来，GC 不会覆盖低于当前分数的分数。这是一个相当大的问题，因为我应该如何覆盖存储诸如射击精度（例如 56%、66% 等）等参数的排行榜？我也找不到任何方法来重置分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:24:28.617

这取决于您如何在 iTunes Connect 中拥有它。

在 iTunes Connect 中，您可以选择想要的排行榜类型，从低到高，从高到低。并且每个值都发送到游戏中心，他们只是不会保存更好的分数。

分数越高，从低到高越大，从高到低最低。

关于重置排行榜，你不能这样做。Apple 为您提供 25 个排行榜，仅此而已。您只能重置档案。

您可以做的工作是创建一个新的排行榜，将旧的重命名为`Archives`，并将新的重命名为您想要的名称，但是当您达到 25 个排行榜的上限时，您将无能为力。

# jquery - 在 Jquery 中使用元素标题作为选择框名称

> ID：12043686
> 
> 赞同：0
> 
> 时间：2012-08-20T19:15:29.777
> 
> 标签：jquery, jquery-ui, title, drop-down-menu

我正在使用以下 jQuery UI MultiSelect 小部件[http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#selectedlist](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#selectedlist)为我网站上的选择框设置样式/添加其他功能。

当页面加载所有选择框时，它会使用 jquery.multiselect.js 中定义的默认值“选择选项”。

问题是我不知道每个盒子是什么，因为它们都说同样的话。

有谁知道是否可以将未选择的消息状态更改为选择元素的标题？例如，如果选择标题=“名字”，则选择框将使用该标题作为选择框，而不是仅仅将其称为“选择选项”。

我浏览了整个互联网，似乎找不到以这种方式使用标题的任何参考。

```
 */
    (function($, undefined){

    var multiselectID = 0;

    $.widget("ech.multiselect", {

        // default options
        options: {
            header: true,
            height: 175,
            minWidth: 150,
            classes: '',
            checkAllText: 'Check all',
            uncheckAllText: 'Uncheck all',
            noneSelectedText: 'Select options',
            selectedText: '# selected',
            selectedList: 0,
            show: '',
            hide: '',
            autoOpen: false,
            multiple: true,
            position: {}
        }, 
```

我现在添加了一个 Jsfiddle 的问题：http: [//jsfiddle.net/FYEeu/](http://jsfiddle.net/FYEeu/)

在顶部显示“3 Selected”的地方，我希望它说出选择框的标题，所以不要在顶部说“3 selected”，而只会说“Title”，这是那个特定的标题标签元素。

脚本的更多属性可以在这里找到>> [http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

# solr - 如何不降低 solr 中多值字段的分数？

> ID：12043688
> 
> 赞同：1
> 
> 时间：2012-08-20T19:15:36.257
> 
> 标签：solr

我在 solr 中有一些多值字段，当它匹配但该字段还包含许多其他值时，它的分数较低。有没有办法让分数保持不变，就好像它只有一个值一样？

# iphone - 显示 UIImageView 的问题

> ID：12043689
> 
> 赞同：0
> 
> 时间：2012-08-20T19:15:37.853
> 
> 标签：iphone, ios, xcode, uiimageview

我正在尝试显示`UIImageView`使用 `[self.view addSubview:imageView];`但没有任何反应。`imageView`不是空的。我使用以下代码从图像库中分配图像；

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = [info
                           objectForKey:UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info 
                          objectForKey:UIImagePickerControllerOriginalImage];

        [imageView setImage:image];
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image, 
                                           self,
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
    }
} 
```

为什么它不起作用？

imageView 创建如下；

```
UIImageView *imageView;
@property (nonatomic, retain) IBOutlet UIImageView *imageView;
@synthesize imageView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:26:46.420

声明和综合属性`imageView`不会创建`UIImageView`. 因此，`imageView`在`nil`以下行中：

```
[imageView setImage:image]; 
```

`UIImageView`在使用它之前，您必须在某个时候创建​​一个实例。例如：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    //...
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    self.imageView = [[UIImageView alloc] initWithFrame:(CGRectMake(100, 100, 100, 100)];
    self.imageView.image = image;
    [self.view addSubview:self.imageView];

    //...
} 
```

`imageView`或者，如果您正在使用它，您可能忘记从 Interface Builder链接到它。

# php - 粉丝页面的长期访问令牌。manage_pages 权限

> ID：12043692
> 
> 赞同：3
> 
> 时间：2012-08-20T19:15:48.000
> 
> 标签：php, facebook, facebook-graph-api, token

我想创建一个长期页面访问令牌。我已遵循这些步骤。

**找到您的用户令牌（2 小时）** developers.facebook.com/tools/access_token/

**生成长期令牌（2 个月）** graph.facebook.com/oauth/access_token？
client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN

EXISTING_ACCESS_TOKEN 是您从上面的 Find your user Token 中获得的。

**页面访问令牌**

转到[https://developers.facebook.com/tools/explorer?method=GET&path=me%2Faccounts](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Faccounts) 插入长期访问令牌在第二个文本框中输入[https://graph.facebook.com/me/accounts](https://graph.facebook.com/me/accounts)点击提交 Json 数据将返回从中选择您的粉丝页面的访问令牌

我的问题是，当我在 Graph API Explorer 中输入长期访问令牌时，我只能取回名称、类别和 ID。而不是访问令牌。这使我相信长访问令牌没有 manage_pages 权限，但是当我去设置它时。我用权限集取回了一个短期令牌。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:05:37.503

您确定您没有使用错误的令牌或对 /me/accounts 的请求的错误权限吗？

通过调用来检查`/app`（查看它是否是正确的应用程序）并`/me/permissions`检查它的权限是否正确，前提是您拥有`manage_pages`权限并且它是长期到期令牌（您可以在[Facebook 的 Debug Tool](https://developers.facebook.com/tools/debug)中检查）它应该没问题

# python - “之后”无限循环：从不进入主循环

> ID：12043693
> 
> 赞同：7
> 
> 时间：2012-08-20T19:15:51.503
> 
> 标签：python, event-handling, tkinter, tetris

这是我的第一篇文章。两个月前，我在考虑转行时开始编码，并且正在研究俄罗斯方块的克隆。我已经实现了大部分核心功能，但无法通过 after 循环让游戏不断刷新。

我正在使用 Tkinter 来制作我的 Gui，并正在尝试面向事件的编程。

我的理解是`after(Time, Event)`from`Tkinter`应该安排`Event`在指定的延迟之后发生的任何回调函数`Time`。我认为代码应该在此之后继续执行后续项目。

我的帧刷新函数 ( `game.updateBoard()`) 完成了俄罗斯方块工作所需的大部分事件，然后使用 after 调用自身。我在初始化游戏实例时调用它一次。

`mainloop()`该函数没有继续执行，而是通过无限期地`game.updateboard()`调用自身。`after`

我怀疑它没有表现出我认为`after`的工作方式，即继续执行脚本直到发生指定的延迟。我认为它正在等待回调终止以继续。

我试图找到这方面的资源，但找不到。

如果您有解决此问题、附加代码或一般编码的建议，我很高兴听到这些建议！这是一个学习过程，我很乐意尝试您提出的任何建议。

这是代码的相关部分：

```
class game():
    def __init__(self): #Set up board and image board
        self.pieces = ["L","J","S","Z","T","O","I"]
        self.board = boardFrame()
        self.root = Tk()
        self.root.title("Tetris")
        self.root.geometry("250x525")

        self.frame = Frame(self.root)

        #set up black and green squares for display
        self.bSquare = "bsquare.gif"
        self.gSquare = "square.gif"
        self.rSquare = "rsquare.gif"
        self.image0 = PhotoImage(file = self.bSquare)
        self.image1 = PhotoImage(file = self.gSquare)
        self.image2 = PhotoImage(file = self.rSquare)

        #get an initial piece to work with
        self.activeBlock = piece(self.pieces[random.randint(0,6)])

        #Tells program to lower block every half second
        self.blockTimer = 0
        self.updateBoard()

        self.root.bind('<KeyPress-Up>', self.turn)
        self.root.bind('<KeyPress-Right>', self.moveR)
        self.root.bind('<KeyPress-Left>', self.moveL)
        self.root.bind('<KeyPress-Down>',self.moveD)
        print("Entering mainloop")
        self.root.mainloop()

    def turn(self, event):
        self.activeBlock.deOccupy(self.board)
        self.activeBlock.turn()
        self.activeBlock.occupy(self.board)
        self.drawGrid(self.board.grid)

    def moveR(self, event):
        self.activeBlock.deOccupy(self.board)
        self.activeBlock.updatePos([1,0], self.board)
        self.activeBlock.occupy(self.board)
        self.drawGrid(self.board.grid)

    def moveL(self, event):
      if self.activeBlock.checkLeft(self.board) == False:
        self.activeBlock.deOccupy(self.board)
        self.activeBlock.updatePos([-1,0], self.board)
        self.activeBlock.occupy(self.board)
        self.drawGrid(self.board.grid)

    def moveD(self, event): #find
        self.activeBlock.deOccupy(self.board)
        self.activeBlock.updatePos([0,-1],self.board)
        if self.activeBlock.checkBottom(self.board) == True:
            self.activeBlock.occupy(self.board)
            self.activeBlock = piece(self.pieces[random.randint(0,6)])
##            self.activeBlock = piece(self.pieces[1])
            print("bottomed")
            self.activeBlock.occupy(self.board)

        self.activeBlock.occupy(self.board)
        self.drawGrid(self.board.grid)

    def drawGrid(self, dGrid):

        #Generate squares to match tetris board
        for widget in self.frame.children.values():
            widget.destroy()

        self.activeBlock.occupy(self.board)

        for x in range(9,-1,-1):
            for y in range(20,-1,-1):
                if self.board.grid[x][y] == 1:
                    self.frame.displayA = Label(self.frame, image=self.image1)
##                    self.frame.displayA.image = self.image1
                    self.frame.displayA.grid(row=21-y, column=x)

                else:
                    self.frame.displayA = Label(self.frame, image = self.image0)
##                    self.frame.displayA.image = self.image0
                    self.frame.displayA.grid(row=21-y, column=x)

        self.frame.displayA = Label(self.frame, image = self.image2)
        self.frame.displayA.grid(row = 21 - self.activeBlock.center[1], column = self.activeBlock.center[0])

        self.frame.grid()

    def updateBoard(self):
        self.blockTimer += 1
        "print updateBoard Loop"

        ## 1)check for keyboard commands
        #1.1 move block by keyboard commands
        #2) see if block has bottomed out, if it has, have it enter itself into the grid and generate a new block.
        if self.activeBlock.checkBottom(self.board) == True:
            self.activeBlock.occupy(self.board)
            self.activeBlock = piece(self.pieces[random.randint(0,6)])
            print("bottomed")
            self.activeBlock.occupy(self.board)

        #2.2 - if block has not bottomed and 50 frames (~.5 seconds) have passed, move the active block down a square after clearing its old space. 
        elif self.blockTimer%12 == 0:
            self.activeBlock.deOccupy(self.board)
            self.activeBlock.updatePos([0,-1], self.board)
            self.activeBlock.occupy(self.board)

    ## 4) check for filled rows
        for y in range(1,21):
            for x in range(10):
                rowFull = True
                if self.board.grid[x][y] == 0:
                    rowFull == False  
            #4.1 if any row is filled, delete it and then move all rows above the deleted row down by one
            if rowFull == True:
                for x2 in range(10):
                    self.board.grid[x2][y] = 0
                    for y2 in range(y+1,21):
                        if self.board.grid[x2][y2] == 1:
                            self.board.grid[x2][y2] = 0
                            self.board.grid[x2][y2-1] = 1

            #4.11 if the row is full and the row above it was full, delete the row again as well as the row above it, and move all rows down by 2
                for x in range(10):
                    rowFull = True
                    if self.board.grid[x][y] == 0:
                        rowFull == False
                        if rowFull == True:
                            for x2 in range(10):
                                try:
                                    self.board.grid[x2][y] = 0
                                    self.board.grid[x2][y+1] = 0
                                except:
                                    pass
                                for y2 in range(y+2,21):
                                    try:
                                        if self.board.grid[x2][y2] == 1:
                                            self.board.grid[x2][y2] = 0
                                            self.board.grid[x2][y2-2] = 1
                                    except:
                                        pass

        #5) if there is a block in the top row, end the game loop
        for x in range(10):
            if self.board.grid[x][20] == 1:
                game = "over"

        #6) update image
        self.activeBlock.occupy(self.board)
        self.drawGrid(self.board.grid)
        self.frame.after(500, self.updateBoard())

Game = game() 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T19:20:00.653

你想做的`self.frame.after(500, self.updateBoard)`。

这里的区别是微妙的，（`self.updateBoard`而不是`self.updateBoard()`）。在您的版本中，您将*函数的结果*传递给`after`方法，而不是传递*函数*。这会导致您描述的无限递归。

# iphone - 获取数组中相同字符串的多个位置

> ID：12043695
> 
> 赞同：0
> 
> 时间：2012-08-20T19:16:17.563
> 
> 标签：iphone, objective-c, xcode, arrays, nsstring

有没有办法在单个数组中获取相同字符串（出现多次）的索引？我知道我可以使用以下方法找到特定字符串的位置：

```
[nameOfArray indexOfObject:@"apple"] 
```

当然，我可以使用上面相同的代码创建一个 for 循环，而忽略之前找到的“苹果”。我不禁觉得在objective-c中有一种更简单的（内置）方法可以做到这一点。我对吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:18:14.510

您可以`indexesOfObjectsPassingTest`将“测试”块用作测试相等性的块。

# exception - 如何避免在加载网页时因 watir-webdriver 超时错误导致程序终止？

> ID：12043696
> 
> 赞同：3
> 
> 时间：2012-08-20T19:16:21.133
> 
> 标签：exception, exception-handling, timeout, webdriver, watir

我使用 watir-webdriver 来自动化一些日常任务，最近我完美的工作脚本在开始时中止了。当我使用 browser.goto "webpage" 时，网页没有完全加载，因为页面底部有一个计数器，并且计数器服务似乎暂时关闭。有时它会加载，有时不会。否则，我需要的所有 html 元素都已加载且可见，但页面无法完全加载，因此 30 秒后我总是收到 tiemout 错误，并且我的 Ruby 脚本以以下错误消息终止：

```
/opt/ruby1.8/lib/ruby/1.8/timeout.rb:64:in `rbuf_fill': execution expired (Timeout::Error)
    from /opt/ruby1.8/lib/ruby/1.8/net/protocol.rb:134:in `rbuf_fill'
    from /opt/ruby1.8/lib/ruby/1.8/net/protocol.rb:116:in `readuntil'
    from /opt/ruby1.8/lib/ruby/1.8/net/protocol.rb:126:in `readline'
    from /opt/ruby1.8/lib/ruby/1.8/net/http.rb:2028:in `read_status_line'
    from /opt/ruby1.8/lib/ruby/1.8/net/http.rb:2017:in `read_new'
    from /opt/ruby1.8/lib/ruby/1.8/net/http.rb:1051:in `request'
    from /opt/ruby1.8/lib/ruby/1.8/net/http.rb:1037:in `request'
    from /opt/ruby1.8/lib/ruby/1.8/net/http.rb:543:in `start'
    from /opt/ruby1.8/lib/ruby/1.8/net/http.rb:1035:in `request'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:99:in `get'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/navigation.rb:14:in `to'
    from /opt/ruby1.8/lib/ruby/gems/1.8/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:63:in `goto' 
```

有什么方法可以避免程序终止并使用未完全加载的页面？我的意思是如果可能的话，任何超时异常处理，最重要的是我的 Ruby 脚本继续没有终止。我试过这个，但没有奏效，因为我只是 3 天的 ruby​​ 程序员：

```
begin
  browser.goto "http://example.com"
rescue Watir::Exception::NavigationException => e #catch the Exception
  puts "Page did not load: #{e}" 
  # program continues from here 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:38:00.917

尝试救援`Timeout::Error`而不是`Watir::Exception::NavigationException`.

# ms-access - 数据表视图调整大小

> ID：12043697
> 
> 赞同：0
> 
> 时间：2012-08-20T19:16:24.260
> 
> 标签：ms-access, ms-access-2010

我有一个表单 - DatasheetView，它不断显示过多的列（无字段/数据），我想调整表单的视口大小以仅包含显示的字段。

目前，我将表单上的所有字段调整为 Bestfit ( `ColumnWidth = -2`) 并且不确定这是否是导致显示过多列的原因。

如何将数据表视口的宽度设置为仅包含的列？还有，有没有办法关闭左间隔列？

此表格将用于数据输入和编辑

# javascript - 我如何抛出异常？

> ID：12043698
> 
> 赞同：2
> 
> 时间：2012-08-20T19:16:23.973
> 
> 标签：javascript, jquery

所以我有一个 if 语句，我想要它，这样如果条件为真，就会抛出一个错误。这是一种供用户从名为 myArr 的数组中删除项目的表单，如果该项目在 myArr 中不存在，我希望它引发错误。

```
$('#remove_user').submit(function(){
    id = $('#user_num').val();
    diffVal = $.grep(myArr, function(value, i){
        return value != id;
    });
    if (diffVal.length == myArr.length) {
        //I want the error here to say "Does not exist."
    } else {
        myArr = diffVal
    };
    $('#user_list').html('');
    for (var i=0; i < myArr.length; i += 1) {
        $('#user_list').append('<li>' +myArr[i]+ '</li>');
    };
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:17:34.453

您可以使用

`throw "Item does not exist!"`

但我发现最好扔一个`Error`物体，像这样：

`throw new Error("Item does not exist!");`

如果你抛出一个，`Error`你会得到更好的可追踪性。遗憾的是，JavaScript 中的错误处理仍然很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:20:06.170

我个人最喜欢的是在抛出错误时也使用跟踪

```
if (diffVal.length == myArr.length) {
    //I want the error here to say "Does not exist."
    Console.log("Error: Does not exist");
    Console.trace();
    throw new Error("Item does not exist");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T19:17:19.553

只需使用*[throw](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/throw)*：

```
if (diffVal.length == myArr.length) {
    //I want the error here to say "Does not exist."
    throw "Item does not exist in the array";
} 
```

# hibernate - 使用 GORM 按单向分组

> ID：12043700
> 
> 赞同：1
> 
> 时间：2012-08-20T19:16:36.657
> 
> 标签：hibernate, grails, grails-orm

我有一对相当常见的模型：

```
class Parent {
    static hasMany = [children: Child]
}

class Child {
    String someProperty
} 
```

现在我要做的是通过 Child.someProperty 执行一个组，但我在 View 上并没有太成功。

在控制器中，我可以这样做：

```
def children = parentInstance.children.groupBy{child -> child.someProperty} 
```

我想要实现的是在每个`someProperty`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:14:20.800

我最终解决了我自己的问题。我通过简单地向 Parent 模型添加一个方法来简化功能，以返回所有具有相关 Parent id 或按所需属性排序的实例的子级。

# printing - 在gdb中可以限制结构打印吗？

> ID：12043702
> 
> 赞同：0
> 
> 时间：2012-08-20T19:16:39.267
> 
> 标签：printing, stl, gdb

当我在 gdb 中打印一个类时，如果我的类包含 STL 成员，则会生成很多无用的输出，从而很难看到有用的东西。像这样的东西会更好：

```
(gdb) p foo
$2 = {
  count = 0,
  name = <std::string> ...,
  other = 0x4f06f58
} 
```

这在香草 gdb 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:31:12.743

[如果您的 gdb 配置为在 Python](http://sourceware.org/gdb/wiki/STLSupport)中使用漂亮的打印机，这应该不是问题。使用正确配置的漂亮打印机，具有 STL 成员的类应该如下所示：

```
(gdb) p foo
$2 = {
  count = 0,
  name = "some string",
  other = 0x4f06f58
} 
```

请注意，某些发行版已经配置了漂亮的打印机。

# vba - Excel-VBA 中的计算不准确

> ID：12043707
> 
> 赞同：-1
> 
> 时间：2012-08-20T19:17:02.277
> 
> 标签：vba, excel

> **可能重复：**
> [Excel VBA 双重加法错误](https://stackoverflow.com/questions/3207453/excel-vba-double-addition-error)

我在 Excel 中有一个非常简单的 VBA 宏，可以计算两个数字之间的差异。当我尝试计算 0.7 和 0.65 之间的差异时，它返回 4.99999999999999E-02。为什么？

这是我的功能：

```
Public Function Diff(x As Double, y As Double) As Double
    Diff = x - y
    Debug.Print Diff
End Function 
```

这是我在“立即”窗口中看到的内容：

```
4.99999999999999E-02 
```

要复制此“错误”，您可以在“立即”窗口中键入“？0.7-0.65”，然后查看您得到的回报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:23:19.570

浮点表示只是近似值 - 不可能以二进制存储任意小数。谷歌“浮点错误”的一些背景和例子，或见[维基百科](http://en.wikipedia.org/wiki/Floating_point)文章浮点

# css - 如果我在 a 上设置 display:block ，它现在是块级元素吗？

> ID：12043711
> 
> 赞同：0
> 
> 时间：2012-08-20T19:17:24.713
> 
> 标签：css

主要问题的症结在于，这个**DT**是否有效？

```
<dl>
    <dt><span style="display:block;">Dog</span><dt>
    <dd>A type of pet</dd>
    <dd>Man's best friend</dd>
</dl> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T19:19:06.813

不，它不是块元素。它看起来像一个块，但它仍然是一个内联元素。没有 CSS 可以改变这一点。因此，HTML 是有效的。

# actionscript-3 - AIR 加载服务器托管 swf 到同一个沙箱

> ID：12043716
> 
> 赞同：2
> 
> 时间：2012-08-20T19:17:42.550
> 
> 标签：actionscript-3, security, air, sandbox

我有一个正在开发的 AIR 应用程序，需要加载一个 swf（总是从本地主机），它将访问其父级中的一些方法，反之亦然。不过，我并不担心在桌面应用程序中打开巨大的安全漏洞。我一直在搜索，但在每个实现中都遇到了困难。

我当前的设置加载到 swf 中并且它可以播放，但是我从沙箱中收到一个小错误，因为我与应用程序不在同一个中。有谁知道如何克服这个错误，以便在 AIR 应用程序和 swf 之间打开完全的自由？

*** 违反安全沙盒 ***

SecurityDomain 'http://localhost/test.swf' 试图访问不兼容的上下文 'app:/Test_Player.swf'

```
public function loadSWF():void {

//var context:LoaderContext = new LoaderContext();
//context.checkPolicyFile = true;
//context.applicationDomain = ApplicationDomain.currentDomain;
//context.securityDomain = SecurityDomain.currentDomain;

var req:URLRequest = new URLRequest(swfURL);
adLoader = new Loader();

videoCanvas.rawChildren.addChild(adLoader);

loader.contentLoaderInfo.addEventListener(Event.INIT, adLoadedHandler, false, 0, true);
loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, ioError, false, 0, true);

//loader.load(req, context);
loader.load(req);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:16:48.563

您需要使用 UrlLoader 加载远程 SWF，然后通过 loadByte 重新加载。使用这种方法，您将通过安全性。

```
package
{
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLLoader;
    import flash.net.URLLoaderDataFormat;
    import flash.net.URLRequest;
    import flash.system.ApplicationDomain;
    import flash.system.LoaderContext;

    public class TestDistantSwf extends Sprite
    {
        private var _urlLoader : URLLoader = new URLLoader;
        private var _loader : Loader = new Loader;

        public function TestDistantSwf()
        {

            addChild(_loader);
            // Won't work
            //_loader.load(new URLRequest("http://localhost/test.swf"));

            // Load it as binary
            _urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
            _urlLoader.addEventListener(Event.COMPLETE, onLoad);
            _urlLoader.load(new URLRequest("http://localhost/test.swf"));
        }

        private function onLoad(e : Event) : void
        {
            // Load distant swf data locally
            _loader.loadBytes(_urlLoader.data, new LoaderContext(false, ApplicationDomain.currentDomain));
        }
    }
} 
```

如果你需要像 flash var 这样传递参数，有两种方法，如果使用 Air 2.6 或更高版本，你可以使用 LoaderContext.parameters ：

```
private function onLoad(e : Event) : void
{
    var lc : LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
    lc.parameters ={
        foo:"hello !"
    };
    lc.allowCodeImport = true;

    // Load distant swf data locally
    _loader.loadBytes(_urlLoader.data, lc);
} 
```

然后在加载的 SWF 中使用 loaderInfo.parameters 获取它。

或者您可以调用已加载的 Swf 函数：

```
private function onLoadBinary(e : Event) : void
{
    e.target.content.init("hello 2 !");
}

private function onLoad(e : Event) : void
{
    var lc : LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
    lc.allowCodeImport = true;

    // Load distant swf data locally
    _loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadBinary);
    _loader.loadBytes(_urlLoader.data, lc);
} 
```

这将从其主类中加载的 swf 调用：

```
public function init(foo : String) : void
{
    trace(foo);
} 
```

# excel - 从 Access 打开 Excel 工作簿宏

> ID：12043718
> 
> 赞同：1
> 
> 时间：2012-08-20T19:17:52.267
> 
> 标签：excel, ms-access, vba, ms-access-2007

首先，我搜索并阅读了类似的线程，我尝试了提出的解决方案并解决了其他人的问题（主要在工作簿名称周围使用单引号），但在我的情况下它不起作用。

我想做的很简单：我想从 Access 调用 Excel 工作簿。工作簿已经打开（使用 VBA），所以这不是工作簿被关闭的问题。这是我尝试运行宏的方式：

```
Application.Run "'" & xlWb.Path & "\" & xlWb.Name & "'" & "!mainParcourirTrouverItem" 
```

结果是：

`'I:\47491\...\Trouver items global.xlsm'!mainParcourirTrouverItem`

我尝试了一些变体，例如不使用完整路径（仅文件名），不使用单引号，在子名称末尾添加括号......

此外，我仔细检查了子名称的拼写是否正确。真的没看出来:|

哦，只是为了提供上下文，这里是围绕此代码的完整子：

```
Private Sub Commande10_Click()
    Dim xlApp As Excel.Application
    Dim xlWb As Excel.Workbook

    Set xlApp = New Excel.Application

    With xlApp
        .Visible = False
        Set xlWb = .Workbooks.Open(FichierImportExcel, ReadOnly:=True)
    End With

    Application.Run "'" & xlWb.Path & "\" & xlWb.Name & "'" & "!mainParcourirTrouverItem"

'    Call importer_transitsrubriques_Click
End Sub 
```

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T19:26:11.510

`xlApp.Run` 不是`Application.Run`

`Application`将引用 Access，而不是 Excel。

# mysql - 我在哪里可以获得 mysql 4.1.3b-beta-nt-max 版本？

> ID：12043719
> 
> 赞同：1
> 
> 时间：2012-08-20T19:17:54.337
> 
> 标签：mysql, version

我需要在生产中重现完全相同的系统环境，它使用 mysql **4.1.3b-beta-nt-max**版本，我可以在哪里获得这个确切的版本？我在谷歌上找过，但似乎它在任何地方都不再可用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:29:02.013

尝试搜索历史数据库，例如

[http://www.oldapps.com/mysql_server.php?old_mysql_server=131](http://www.oldapps.com/mysql_server.php?old_mysql_server=131)

...在紧要关头，您可以安装“类似”版本（例如上面的版本，4.1.3beta-win），然后将二进制文件替换为生产版本。MySQL 不会对注册表做奇怪的事情，所以这个过程就足够了。

# mongodb - Mongo - 2.2 中的复合分片索引

> ID：12043724
> 
> 赞同：1
> 
> 时间：2012-08-20T19:18:10.873
> 
> 标签：mongodb, indexing, sharding, mongodb-indexes

我正在阅读 2.2 的 Mongo Shard 密钥的文档，发现它有点混乱。

> **所有分片集合必须有一个以分片键开头的索引。**如果您对尚未包含文档且没有此类索引的集合进行分片，则 shardCollection 将在分片键上创建索引。如果集合已包含文档，则必须在使用 shardCollection 之前创建适当的索引。
> 
> **在 2.2 版更改: shard key 上的索引不再需要与 shard key 相同**。该索引可以像以前一样是分片键本身的索引，也可以是分**片键是索引前缀的复合索引。**此索引不能是多键索引。
> 
> 如果您有一个名为 people 的集合，使用字段 { zipcode: 1 } 进行分片，并且您想将其替换为字段 { zipcode: 1, username: 1 } 上的索引，则：
> 
> 在 { zipcode: 1, username: 1 } 上创建索引： db.people.ensureIndex( { zipcode: 1, username: 1 } ); 当 MongoDB 完成索引构建后，您可以安全地删除 { zipcode: 1 } 上的现有索引： db.people.dropIndex( { zipcode: 1 } ); **警告分片键上的索引不能是多键索引。**如上所述，如果用户名字段没有数组值，则 { zipcode: 1, username: 1 } 上的索引只能替换 zipcode 上的索引。
> 
> 如果您删除了分片键的最后一个适当索引，请通过仅在分片键上重新创建索引来恢复。

我有几个关于分片键和索引的问题。

i) 从文档来看，2.2 之前似乎支持多键索引。如果是这种情况，复合索引与多键索引有何不同？

ii) [a] 以分片键开头的索引和 [b] 以分片键为前缀的索引有什么区别？

iii）关于分片键上的索引不应该是多键索引的警告说明是什么？db.people.ensureIndex( { zipcode: 1, username: 1 } 不是多键索引吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:30:23.190

**复合索引与多键索引有何不同？：**

复合索引是类似于您在示例中描述的索引：

`{ zipcode: 1, username: 1 }`

多键索引是对数组中的项目进行索引的索引，例如`tags`用于返回包含标签“mongoDB”的所有文档的索引，

**[a] 以分片键开头的索引和 [b] 以分片键为前缀的索引有什么区别？：**

没有。

**关于分片键上的索引不应该是多键索引的警告说明是什么？：**

当您认为多键索引是数组上的索引时，这很有意义。考虑我们在标签数组上的索引。如果一个文档在数组中有正确的值集合，它可以很容易地存在于许多（或所有）分片中。

换句话说，文档仍然必须基于单个值进行分片，而不是对象或数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:41:29.597

我注意到关于索引的 MongoDB 文档可能会造成混淆。多键索引是一种为数组中的每个元素创建单独索引条目的方法：[http](http://www.mongodb.org/display/DOCS/Multikeys) ://www.mongodb.org/display/DOCS/Multikeys 。另一方面，复合索引在两个或多个字段上创建索引条目：[http](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys) ://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys 。

1.  以前版本的 MongoDB 不支持多键分片键索引。由于 MongoDB 根据分片键值的范围拆分分片集合，因此无法使用多键索引。

2.  假设我理解你的问题，没有区别。分片键索引可以是单个字段的索引，也可以是以分片键开头的复合索引。

3.  这是一个复合索引的示例，可用于分片键索引。

* * *

如果 zipcode 是分片键，则这些索引将起作用：

```
db.people.ensureIndex({ zipcode: 1}) 

db.people.ensureIndex({ zipcode: 1, username: 1 }) 
```

多键索引示例：

```
{_id: 1, array: [{zipcode: x}, {username: y}]}

db.people.ensureIndex({array: 1}) 
```

# django - Django 链接被附加到 URL

> ID：12043727
> 
> 赞同：3
> 
> 时间：2012-08-20T19:18:14.743
> 
> 标签：django, django-templates

我正在将 Django 用于一个项目，并试图创建一个指向名为“index”的页面的链接，该页面是带有 url 的页面的起始页面

```
http://localhost:8000/index/result 
```

我添加了这样的链接：

```
<a href="index">Start over </a> 
```

因此，该链接指向：

```
http://localhost:8000/index/result/index 
```

而不是必需的：

```
http://localhost:8000/index 
```

我在 urls.py 和 views.py 中设置了所有页面。

任何帮助表示赞赏。tnx

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T20:04:57.987

```
<a href="/index">Start over </a> 
```

甚至更好

```
<a href="{% url "index" %}">Start over </a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T20:15:26.540

以 Daniel Roseman 的正确答案为基础，这与 Django 无关；你会在纯 HTML 中遇到这个问题。

`/`按照 Daniel 的建议（或指定协议）在 URL 的开头添加会将其转换为绝对链接。以任意名称开头会导致浏览器将其视为相对链接。那里有[很多解释差异](http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm)，但实际上很简单。假设您有以下文件：

```
/var/www/html/
├── directory/
│   └── three.html
├── two.html
└── one.html 
```

`one.html`然后你可以从like链接到其他页面

```
<a href='two.html'>2</a>
<a href='directory/three.html'>3</a> 
```

或者

```
<a href='/two.html'>2</a>
<a href='/directory/three.html'>3</a> 
```

你可以从`three.html`like链接到其他页面

```
<a href='../one.html'>2</a>
<a href='../two.html'>2</a> 
```

（`../`意思是“上升一级）。

或者

```
<a href='/one.html'>2</a>
<a href='/two.html'>2</a> 
```

因此，当您创建一个带有类似 的链接的 Django 模板时`<a href="index">Start over</a>`，它会将`href`值添加到当前页面的 URL，将其视为相对链接。

# c# - 将 Web 引用部署到 azure 网站

> ID：12043728
> 
> 赞同：0
> 
> 时间：2012-08-20T19:18:17.147
> 
> 标签：c#, visual-studio-2010, azure, azure-web-roles

我正在尝试将此 Web 引用部署到 azure。

[https://pal-test.adyen.com/pal/Payment.wsdl](https://pal-test.adyen.com/pal/Payment.wsdl)

该参考似乎取决于无法找到的 sgen.exe。我在天蓝色构建时收到此错误（它在本地构建没有问题）。

远程：D:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2249,9): error MSB3086: Task could not find "sgen.exe" using the SdkToolsPath "" or the registry key “HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Window s\v7.0A”。确保设置了 SdkToolsPath，并且该工具存在于 Sdk ToolsPath 下的正确处理器特定位置，并且安装了 Microsoft Windows SDK。

这似乎是一个已知问题，这里有一些讨论[http://dukelupus.wordpress.com/2008/02/05/task-failed-because-sgenexe-was-not-found-solution/](http://dukelupus.wordpress.com/2008/02/05/task-failed-because-sgenexe-was-not-found-solution/)

但不知道如何让它在天蓝色上运行。

是否可以强制 build/azure 在我的应用程序目录中查找此 exe？

谢谢

# http - 在 Spring 控制器中调用 DefaultHttpClient 时无法查看 http 流量

> ID：12043730
> 
> 赞同：0
> 
> 时间：2012-08-20T19:18:23.363
> 
> 标签：http, traffic

我有一个 Spring MVC 控制器，它使用 apache DefaultHttpClient 进行 json RESTful webservice 调用。我想查看那个 web 服务调用的 http 请求/响应数据，我试过 firebug、wireshark、fiddler，但没有成功。

当我使用浏览器时，它们确实显示了流量。

下面是 webservice 调用的 jist

```
 System.getProperties().put("http.proxyHost", "localhost");
    System.getProperties().put("http.proxyPort", "8888");  // set proxy to fiddler 
                DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost postRequest = new HttpPost(targetUrl);
     // sample targetUrl = "http://localhost:9080/SampleBackend/sample-backend-json.jsp"
            StringEntity input = new StringEntity("{\"qty\":100,\"name\":\"iPad 4\"}");
            input.setContentType("application/json");
            postRequest.setEntity(input);

            HttpResponse response2 = httpClient.execute(postRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:18:07.653

您必须在服务器的环回接口上运行数据包捕获（最有可能是 tcpdump）。然后，您可以下载捕获的数据并在 Wireshark 中查看，与实时捕获相同。

# php - yii view.php 中的“试图获取非对象的属性”

> ID：12043734
> 
> 赞同：1
> 
> 时间：2012-08-20T19:18:41.187
> 
> 标签：php, yii

我的 yii 应用程序有一个奇怪的问题。我的数据库 Players 中有两个表 - id、name、team_id 和 Teams - id、name。我可以创建新玩家，但是当我想查看玩家的个人资料时，会出现错误 - “尝试获取非对象的属性”：

```
'value'=>$model->team->NAME, 
```

最奇怪的问题是，当我为 ID 1 和 2 的玩家测试 url 时，一切正常，我看到了正确的信息，但对于其他 ID，我遇到了这个问题。这是我的代码的一部分：

视图.php

```
<?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    'ID',
    'NAME',
    'TEAM_ID', 
    array(
        'label'=>'Отбор',
        'type'=>'text',
        'value'=>$model->team->NAME,
    ),
),
)); ?> 
```

玩家.php

```
public function relations()
    return array(
      'team' => array(self::BELONGS_TO, 'TEAMS', 'ID'),
    );
} 
```

团队.php

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'player' => array(self::HAS_MANY, 'PLAYERS', 'ID'),
    );
} 
```

玩家控制器.php

```
public function actionView($id)
{
    $teams = new CActiveDataProvider('Teams');
    $players = new CActiveDataProvider('Players');
    $this->render('view', array(
        'model'=>$this->loadModel($id),
    ));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:50:28.643

似乎您需要修复模型`relations`中的错误`Players`：

```
public function relations()
    return array(
      'team' => array(self::BELONGS_TO, 'TEAMS', 'TEAM_ID'), // TEAM_ID instead of ID
    );
} 
```

# ruby-on-rails - 使用 link_to Rails 设置会话变量

> ID：12043737
> 
> 赞同：4
> 
> 时间：2012-08-20T19:18:47.020
> 
> 标签：ruby-on-rails, facebook, session, hyperlink

是否可以使用 link_to 设置会话变量？我不想设置参数，因为我有几个重定向，它会被抹去。

即我想通过链接将会话变量“modelid”设置为“you”。

我想在 FB 登录 oauth 运行时设置一个会话变量...

```
<%= link_to "New Post", "#", {:class => "btn btn-primary btn-large inline pull-left", :onclick => "FB.login(function(response){},{perms:'email, publish_stream, user_photos'});" } %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T20:46:27.737

您可以在其中一个控制器中创建一个设置此会话变量的操作，然后使用 AJAX 请求调用它。

路线：

```
post "/myroute", :to=>"some_controller#set_my_session_var" 
```

some_view.html.erb（jQuery 示例）：

```
$(function(){
  $("#my-button").click(function(){
    $.post('/myroute');
  })
}) 
```

some_controller.rb：

```
def set_my_session_var
  session[:somekey]='somevalue'
end 
```

# sql-server - 如何在插入之前将触发器写入哈希值？

> ID：12043739
> 
> 赞同：1
> 
> 时间：2012-08-20T19:18:48.940
> 
> 标签：sql-server, sql-server-2008, triggers

我有一个名为`employees`3 列的表：`FirstName`、`LastName`和`SSN`。

.Net 服务每晚将数据输入此表，我不愿意更新。

我想要一个触发器，上面写着：

> 嘿，我看到你正试图在 SSN 列中插入一些东西......让我们在它进入之前对其进行哈希处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:24:43.693

一种方法是使用 INSTEAD OF TRIGGER：

```
CREATE TRIGGER dbo.HashSSN
ON dbo.tablename
INSTEAD OF INSERT
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.tablename(FirstName, LastName, SSN)
    SELECT FirstName, LastName, HASHBYTES('SHA1', SSN)
    FROM inserted;
END
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:20:09.243

## 业务规则合规性和暂存表

另一种方法是不插入到最终表中，而是使用临时表。暂存表是一种永久临时表，它没有约束，允许`NULL`s，位于诸如此类的模式中，`import`并且只是外部数据源将数据放入其中的容器。其概念是可以设置具有适当业务逻辑的业务流程来对容器中的数据进行操作。

这是一种“数据清理”层，可以在其中完成 SSN 散列，以及其他业务流程操作或正在执行的业务规则，例如可空性或允许遗漏、大写、长度、命名、重复消除、键查找、更改通知等，然后最后执行插入。这样做的好处是一组坏数据，而不是被试图插入，被强制回滚，然后炸毁原来的进程，而是可以被检测到，完好无损地保存并最终得到妥善处理（例如被移动到错误队列、发送的通知等）。

许多人会使用 SSIS 来完成这样的任务，尽管我个人发现 SSIS 很难使用，因为它存在的问题包括脆弱性、难以使用包含临时表的 SP、部署挑战、不是数据库备份的一部分等等。

如果这样的方案对您来说太过分了，以至于您甚至都不会考虑它，请退后一步并考虑一下：您有一个外部进程，它应该插入正确、准确、已清理和肯定已知的数据放入表中。但是，它没有这样做。相反，它插入了不符合业务规则的数据。我认为触发触发器可能是一种处理它的方法，但这也是一个让您更多地思考系统架构并探索为什么首先会遇到这个问题的机会。

您认为不可信或不符合业务规则的数据应该如何变得可信且符合业务规则？诸如散列 SSN 列之类的转换任务属于哪里？

插入过程是否应该知道这样的业务规则？如果是这样，这在整个组织、架构、插入器的流程类型中是否一致？如果没有，你将如何解决这个问题，所以你不会在 kluges 上修复补丁？

## SSN 哈希的不安全性

此外，我想指出其他一点。如果没有 TIN，则可能只有大约 8.89 亿个 SSN (888,931,098)。您认为遍历所有这些并将哈希与表中的哈希进行比较需要多长时间？散列当然会减少快速曝光——你不能轻易地读出 SSN。但鉴于只需要 10 亿次尝试，根据资源和计划，将它们全部弹出只需几天甚至几小时的时间。

包含所有 SSN 及其 SHA1 哈希值的彩虹表仅占用 25-30 GB 的量级——即使在相对便宜的家用计算机上也可以实现，一旦创建它就可以在瞬间弹出任何 SSN。即使使用更长或更昂贵的哈希值也无济于事。在几天或几周内，可以建造一张彩虹桌。如今，几百美元可以购买数 TB 的存储空间。

您可以对 SSN 哈希进行加盐，这意味着如果有人对您的表进行暴力破解，他们将不得不为每一行执行一次，而不是一次获取所有行。这当然更好，但它只会延迟不可避免的事情。一个严重的黑客可能有一个僵尸军队支持他，可以在几秒钟内破解一个简单的 SSN + salt。

## 进一步的想法

我会对业务规则感兴趣，这些规则一方面要求您能够验证 SSN 并将其用作一种密码，但另一方面不允许您存储完整值。您对数据库有安全顾虑吗？既然你已经更新了你的问题，说这些是员工，我关于为什么排除非 SSN 持有者的问题是没有实际意义的。但是，我仍然很好奇为什么您需要对这些值进行哈希处理而不能只存储它们。雇主拥有员工的 SSN 不仅可以，而且还*要求它可以向政府报告收入和扣除额。*

另一方面，如果您真正关心的不是安全性，而是更多关于可否认性（“您的 SSN 永远不会存储在我们的服务器上！”），那么这不是真的，现在，是吗？您所做的只是以一种可以通过蛮力逆转的方式对其进行转换，并且搜索空间足够小，蛮力是相当合理的。如果有人给你数字 42，你把它乘以 2 并保存 84，然后告诉这个人他的数字没有被存储，但你可以简单地将 84 除以 2 得到原始数字，那么你不是真的完全直截了当。

当然，“单向”散列比乘法更难逆转，但我们不是在处理诸如“从其散列中找到原始的 20 万字符文档（或其他）”之类的问题，而是“找到一个 9 位来自其哈希的数字”。当然，许多不同的输入将散列到与一个特定 SSN 相同的值，但我怀疑是否存在很多完全由数字组成的 9 字符字符串的冲突。

## 实际 SHA-1 SSN 哈希反转测试

我只是做了一些测试。我有一张桌子，里面有大约 3200 个真实的 SSN。我使用 SHA1 对它们进行哈希处理，并将这些哈希值放入仅包含一列的临时表中。我能够在大约 8 分钟内弹出 1% 的 SSN，从`001-01-0001`. 根据处理速度和总搜索空间，它将在不到 3 小时内完成（每 1000 万个 SSN 大约需要 2 分钟，因此 88.89 * 2 分钟）。这是来自SQL Server*内部*，而不是运行一个可以更快、更快的编译程序。这不是很安全！

# php - 当用户单击链接以继续访问站点时，使用 php-ga 和维护会话的 Google Analytics（分析）电子邮件视图

> ID：12043742
> 
> 赞同：3
> 
> 时间：2012-08-20T19:18:58.377
> 
> 标签：php, email, session, google-analytics, tracking

我在我的服务器上使用 php-ga 和一个 php 页面来提供电子邮件中的图像，但同时也跟踪我们网站的谷歌分析的页面视图（/email-viewed）。因此，当用户打开启用图像的电子邮件时，我的 php 脚本会将页面视图触发到谷歌分析。现在发生这种情况后，用户经常点击电子邮件中的一些链接，将他们返回到我们的网站。我可以告诉人们正在点击这些链接，因为登陆页面记录在谷歌分析中。

我遇到的问题是谷歌分析不认为这两个动作是一个会话。有什么办法可以强迫/欺骗谷歌分析相信这两个页面视图是一个会话？

这是我的 email-tracking.gif 图像，由我的服务器加载并被视为 php：

```
// Initilize GA Tracker
$tracker = new GoogleAnalytics\Tracker('UA-REMOVED-1', 'www.REMOVED.com');

// Assemble Visitor information
// (could also get unserialized from database)
$visitor = new GoogleAnalytics\Visitor();
$visitor->setIpAddress($_SERVER['REMOTE_ADDR']);
$visitor->setUserAgent($_SERVER['HTTP_USER_AGENT']);
$visitor->setScreenResolution('1024x768');

// Assemble Session information
// (could also get unserialized from PHP session)
$session = new GoogleAnalytics\Session();

if(isset($_GET['location'])){
  $img='./images/'.$_GET['location'].'.gif';
  // Assemble Page information
  $page = new GoogleAnalytics\Page('/quote-email');
  $page->setTitle('Quote Email Viewed');
}
else {

}

// Track page view
$tracker->trackPageview($page, $session, $visitor);

header("Content-Type: image/gif");
readfile($img);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:22:10.190

谷歌分析页面浏览量/事件与 GA 服务器的像素调用一起记录，会话由 GA cookie 跟踪。现在，尝试跟踪电子邮件打开和保留会话存在多个问题。

1.  默认情况下，并非所有客户端都获取图像。
2.  当服务器端 api 用于跟踪事件时，如 php-ga 的情况，直到用户实际点击并登陆请求 ga 像素的实际页面并因此使用新的 sessionID 设置 cookie 时，ga cookie 仍未设置。

要解决这个问题，可以在所有页面视图上仅使用服务器 api。一个人将能够

1.  在电子邮件公开调用中将 php-ga 会话对象序列化为客户端会话。
2.  在正常的页面视图中，如果有会话信息，请将其反序列化并构造 GoogleAnalytics\Session 对象，然后再将其传递给 trackPageView 调用。

然而，这种方法需要重新设计整个 ga 跟踪方案，并用 php-ga 替换 javascript api 使用。有一种可能的解决方法，包括创建 ga 像素 url 并将其设置为邮件中的 src 属性。此方法已在[此处讨论，并](https://stackoverflow.com/questions/4456592/tracking-email-opens-in-google-analytics)[在此处](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)进行详细说明。但是，文档提到您需要使用移动设备特定的跟踪代码来创建 url，因此它可能会或可能不会仍然合并会话。但它看起来仍然非常接近模拟电子邮件活动中打开和点击的无缝跟踪。

即使此设置有效，电子邮件不会在 Web 浏览器上打开（在 Outlook 或 Mail 等邮件客户端的情况下），事件仍不会在同一个会话中。希望这可以帮助。

# c# - 这些工作，但恐怕有更好的方法。

> ID：12043743
> 
> 赞同：0
> 
> 时间：2012-08-20T19:19:01.637
> 
> 标签：c#, winforms

我正在制作一个文本编辑器，我想知道是否有更快/更可靠的方法来执行这些功能。我在这里写的是我认为我能做的最好的并且可能能做到的，除了我有一种感觉 FirstVisibleLine 和 LineCount 已经完成但 VisibleLines 可以更快地返回......？

VisibleLines 应该返回在文本区域中可见的文本行数。FirstVisibleLine 应该返回文本区域中的第一条可见行 LineCount 应该返回文本区域中的行数

```
 private int VisibleLines()
    {
        int topIndex = this.GetCharIndexFromPosition(new Point(0, 0));
        int bottomIndex = this.GetCharIndexFromPosition(new Point(0, this.Height - 1));

        int topLine = this.GetLineFromCharIndex(topIndex);
        int bottomLine = this.GetLineFromCharIndex(bottomIndex);

        return bottomLine - topLine;
    }

    private int FirstVisibleLine()
    {
        return this.GetLineFromCharIndex(this.GetCharIndexFromPosition(new Point(0,0)));
    }

    public int LineCount
    {
        get
        {
            Message msg = Message.Create(this.Handle, EM_VISIBLELINES, IntPtr.Zero, IntPtr.Zero);
            base.DefWndProc(ref msg);
            return msg.Result.ToInt32();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:22:30.473

您可以通过向文本框发送消息以获取第一行而不是使用`GetCharIndexFromPosition`and`GetLineFromCharIndex`一次来获取第一条可见行。我不确定为什么 TextBox（或 TextBoxBase）类没有实现这一点。

```
private const int EM_GETFIRSTVISIBLELINE = 206;
private int GetFirstVisibleLine(TextBox textBox) 
{
    return SendMessage(textBox.Handle, EM_GETFIRSTVISIBLELINE, 0, 0);
} 
```

至于 VisibleLines，我认为您将不得不继续计算`bottomLine`.

# vb.net - 将 WMF 图像粘贴到 Word 的 VSTO 外接程序中（选择当前文档）

> ID：12043747
> 
> 赞同：1
> 
> 时间：2012-08-20T19:19:34.427
> 
> 标签：vb.net, ms-word, vsto, add-in, paste

我正在 vb.net 中创建一个 VSTO Word 加载项，以将图像粘贴为 Windows 元文件（不是 Word 2010 中默认的增强元文件）。我之前在 VBA 中使用以下代码完成了此操作：

```
Selection.PasteSpecial datatype:=wdPasteMetafilePicture 
```

我正在寻找资源和帮助

1.  获取光标在Word文档中的位置（选择）
2.  检查图像是否属于特定类型（在本例中为 WMF）
3.  将图像粘贴到文档的选择处

您可以提供的任何帮助/链接将不胜感激！

- -编辑 - -

我已经能够成功粘贴 Windows 图元文件图像，但我不确定如何选择当前文档。我可以使用新文档创建一个新的单词应用程序对象，然后将图像粘贴到那里，但我似乎无法选择已经打开的单词实例。请参阅下面的代码（请注意，我尝试过 oWord = GetObject(, "Word.Application") 没有成功）

```
 Dim oWord As Word.Application
    Dim oDoc As Word.Document
    Dim objDataTypeMetafile As New Object
    objDataTypeMetafile = Word.WdPasteDataType.wdPasteMetafilePicture

    oWord = CreateObject("Word.Application")
    oWord.Visible = True
    oDoc = oWord.Documents.Add

    oWord.Selection.PasteSpecial(, , , , objDataTypeMetafile, , )
    oWord = Nothing
    oDoc = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:30:33.780

将 oWord 声明为 Glocals.ThisAddIn.Application 是诀窍。现在完美运行。

```
 Dim oWord As Word.Application = Globals.ThisAddIn.Application
    Dim objDataTypeMetafile As New Object
    objDataTypeMetafile = Word.WdPasteDataType.wdPasteMetafilePicture

    oWord.Visible = True
    oWord.Selection.PasteSpecial(, , , , objDataTypeMetafile, , )
    oWord = Nothing 
```

# jquery - 如何消除多次点击功能？

> ID：12043750
> 
> 赞同：3
> 
> 时间：2012-08-20T19:19:51.520
> 
> 标签：jquery, code-cleanup

有谁知道简化我丰富的点击功能的方法？

这是我的例子：

```
$("#info01_v1_btn").click(function(){
    $("#info01_v1").slideToggle("fast");
    $("#info01_v1_btn a").toggleClass("open");
    return false;
});

$("#info02_v1_btn").click(function(){
    $("#info02_v1").slideToggle("fast");
    $("#info02_v1_btn a").toggleClass("open");
    return false;
});

$("#info03_v1_btn").click(function(){
    $("#info03_v1").slideToggle("fast");
    $("#info03_v1_btn a").toggleClass("open");
    return false;
});

$("#info04_v1_btn").click(function(){
    $("#info04_v1").slideToggle("fast");
    $("#info04_v1_btn a").toggleClass("open");
    return false;
});

$("#info05_v1_btn").click(function(){
    $("#info05_v1").slideToggle("fast");
    $("#info05_v1_btn a").toggleClass("open");
    return false;
}); 
```

如果这些函数没有在同一页面上一起被调用，我可能只使用一个类而不是一个 id，但我正在使用一个包含多个地址信息的模块，所以不知道该怎么做。为了记录，这行得通，只是看起来真的很乱。不确定添加循环是否有助于清理它。

注意*：我是一名网页设计师，自学 jquery'ier，因此正在寻找任何好的技术来使此代码更小，任何可能在其他地方重用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:26:11.093

将事件绑定到所有以 结尾的元素`_v1_btn`，并使用 ID 定位下一个元素，并使用`this`关键字查找`<a>`您需要定位的元素：

```
$('[id$="_v1_btn"]').on('click', function(){
    var ID = this.id.replace('_btn', '');
    $("#"+ID).slideToggle("fast");
    $('a', this).toggleClass("open");
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:33:59.063

```
$(".YourClassName").click(function(){
    var t = $(this).attr('id').replace('_btn','');
    $( '#' + t ).slideToggle("fast");    
    $(this).find('a').toggleClass("open");
    return false;
}); 
```

# git - 如何在git中获取所有跟踪分支的摘要

> ID：12043761
> 
> 赞同：1
> 
> 时间：2012-08-20T19:20:15.880
> 
> 标签：git

当我在 git 中检查一个跟踪分支时，它告诉我：

“您的分支领先于 'origin/foo' 1 次提交”

有没有办法为我所有跟踪远程的分支输出这个，例如：

"foo 比 'origin/foo' 提前 1 次提交" "bar 比 'origin/bar' 提前 2 次提交" ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:51:44.393

尝试这个：`git branch -v`

它应该列出您的所有分支，包括它们是领先还是落后。

# perl - 在 CSV 列“城市”中搜索提供的 list.csv 中的值，标题列为“城市”。如果发现删除

> ID：12043762
> 
> 赞同：-1
> 
> 时间：2012-08-20T19:20:16.770
> 
> 标签：perl

我有大约 10-20K 记录，只需要某些城市。我想在 perl 中完成这项工作，但我似乎找不到我所需要的示例。如果找到城市，则 searchme.csv 和 list.csv 删除记录/行。我正在对屏幕进行分类和拆分，但现在有很多人可以手动挑选。请任何帮助将不胜感激。我只是一个新人。

1.  searchme.csv 包含带有标题的“名称、地址、城市、州、邮编、电话”的行。
2.  list.csv 包含 1 行标题为“城市”和 50 多行我想保留的城市。
3.  因此，对于 searchme.csv 中的每一行，将“城市”放入 $variable 并循环遍历 list.csv，如果找到匹配项，则将 searchme.csv 中的完整行写入新文件 new.csv。我玩的越多，我就越让它循环搜索me.csv，我想我需要将city.csv加载到数组中，然后在while循环中循环遍历数组。如果找到打印到 new.csv。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:55:23.343

我不能从你最后的评论中看出你是否还在做这件事。无论如何，这是一个需要考虑的解决方案。

```
use strict;
use warnings FATAL => 'all';
use autodie qw(:all);

# slurp files into arrays
open my $RECORDSFILE, '<', 'searchme.csv';
my @records = <$RECORDSFILE>;
close $RECORDSFILE;

open my $LISTFILE, '<', 'list.csv';
my @citychecklist = <$LISTFILE>;
close $LISTFILE;

open my $NEWFILE, '>>', 'new.csv';

my $cityidx = 2;
my $item;
my $record;

# loop through each record and extract the city string
foreach $record (@records) {
    my @data = split qr/,/, $record;
    my $city = $data[$cityidx];
    # skip the header
    next if $city eq 'city';

    # compare the city string with each city in our other list
    foreach $item (@citychecklist) {
        chomp $item;
        # if we find a match write out the record to another file
        if ($city eq $item) {
            print {$NEWFILE} $record;
        }
    }
}

close $NEWFILE; 
```

# r - 链接到 .rd 文件中的 S4 方法？

> ID：12043765
> 
> 赞同：4
> 
> 时间：2012-08-20T19:20:38.643
> 
> 标签：r, package, s4, generic-method

我正在编写一个带有 S4 类的包，并且我已经为该类编写了`as.POSIXct`方法`as.POSIXlt`。我已经编写了文档，一切看起来都很好，除了我想引用`as.POSIXct`文档中的方法，`as.POSIXlt`反之亦然。我试过`\S4method{coerce}{abc, POSIXct}(from, to)`, （其中 'abc' 是 S4 类），但这应该只放在该`\usage`部分中，这不是我想要的。有没有办法做到这一点？对我来说这似乎很奇怪，这不会被允许。

我意识到可以组合这些 .rd 文件并避免这个问题，但我正在尝试尽可能多地了解 R 中的类和包，所以无论如何这对我来说很感兴趣。

这是 .Rd 文件之一的骨架：

```
\name{as.POSIXct-methods}
\docType{methods}
\alias{as.POSIXct-methods}
\alias{as.POSIXct,ANY-method}
\alias{as.POSIXct,abc-method}
\title{\code{abc} Method for Function \code{as.POSIXct}}
\description{
\code{as.POSIXct} method to coerce timestamps in \code{abc} objects into 
\code{POSIXct} format.
}
\section{Methods}{
\describe{
~~description here~~

\item{\code{signature(x = "ANY")}}{
default implementation (from base)
}

\item{\code{signature(x = "abc")}}{
implementation for \code{\link{abc}} objects. 
~~more description of function~~
See \code{\linkS4class{abc}} for more about abc objects.
See also \code{\link[abc]{as.POSIXlt}} for the corresponding \code{POSIXlt} method.
}
}}
\keyword{methods} 
```

倒数第四行是引起问题的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:27:25.783

根据编写 R 扩展的[交叉引用部分](http://cran.r-project.org/doc/manuals/R-exts.html#Cross_002dreferences)，您可以创建指向其他帮助页面的链接，如下所示：

```
\code{\link[base]{as.POSIXct}} 
```

其中“base”是包的名称（我认为 [base] 不是必需的，但如果它是另一个包，那就是）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T20:23:20.390

链接的基本格式是

```
\link{foo} 
```

where`foo`出现在一些帮助页面（在同一个包中）作为`\alias{foo}`. 所以如果你的其他包有 \alias{as.POSIXlt,abc-method} （注意没有空格）那么

```
\link{as.POSIXlt,abc-method} 
```

仅当链接到其他包时才需要添加`[abc]`，然后语义会令人困惑（在 中`\link[abc]{foo}`，foo 是 HTML 帮助页面的*名称*，而不是例如别名）。添加`\code{}`是标记，因此与建立链接没有直接关系。上面的链接将“as.POSIXlt,abc-method”插入到帮助页面中，这可能比可能存在的任意 \alias 标记提供更多信息（或没有）。

# javascript - replaceWith() 后的日期选择器

> ID：12043766
> 
> 赞同：0
> 
> 时间：2012-08-20T19:20:40.130
> 
> 标签：javascript, jquery, datepicker, replacewith

如果在加载网站时创建了文本字段，但如果我让它以 . `replaceWith()`功能，它不会工作。

这是我在加载网站时出现的代码：http: [//jsfiddle.net/ZnKMX/3/](http://jsfiddle.net/ZnKMX/3/)

这是我使用replaceWith创建文本字段的代码：http: [//jsfiddle.net/ZnKMX/4/](http://jsfiddle.net/ZnKMX/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:22:39.467

您需要`$( "#datepicker" ).datepicker();`在创建元素后执行
[FIDDLE](http://jsfiddle.net/ZnKMX/5/)

# android - 如何使布局可用于对话框

> ID：12043769
> 
> 赞同：0
> 
> 时间：2012-08-20T19:20:41.903
> 
> 标签：android

在我的活动中有 3 个按钮。通过单击第一个按钮，我希望出现一个带有图形的对话框（在布局本身中它工作正常）。

```
 btn1 = (Button)findViewById(R.id.btn1);
        btn1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                 dialog = new Dialog(ChartsDuration.this);
                 dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                 dialog.setContentView(R.layout.dialog_charts1);     

// code to show a graph. Here I have a function that calls  drawChartAll(), 
// but since the layout is declared outside the dialog it cannot render it to the
// linearlayout, and my graph1 linearlayout will be empty.

                 dialog.show();

            }
        }); 
```

Tha 图使用在外部函数中查询的数据，例如

```
public void drawChartAll()
   {
//blablabla and this is how I define the layout and render the graph to it:
LinearLayout layout = (LinearLayout) findViewById(R.id.graph1);   
mChartView = ChartFactory.getBarChartView(ChartsDuration.this, buildBarDataset(titles, values),renderer,Type.DEFAULT);
mChartView.setBackgroundColor(renderer.getBackgroundColor());
layout.addView(mChartView);
} 
```

因此，如果没有对话框，我可以轻松地在 graph1 LinearLayout 中显示图形，例如在按钮下方，因为它们“处于同一级别”，但我想在单击按钮打开的对话框中显示图形。因为如果我在对话中，我会这样做：`LinearLayout layout = (LinearLayout)dialog.findViewById(R.id.graph1);` 但现在我不能这样做，因为我在对话之外。

我如何达到这个布局？

**编辑**：

user113215 我这样做了：

在活动中：

```
 LayoutInflater inflater = LayoutInflater.from(ChartsDuration.this);
 customDialog = (ViewGroup) inflater.inflate(R.layout.dialog_charts1, null);

        btn1 = (Button)findViewById(R.id.btn1);
        btn1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                 dialog.setContentView(customDialog);
                 //queries

                 dialog.show();

            }
        }); 
```

在 drawChartAll 中：

```
 public void drawChartAll()
       {
    //code
     LinearLayout layout = (LinearLayout) customDialog.findViewById(R.id.graph1);
    } 
```

你是这个意思吗？这会向我抛出一个空指针异常`dialog.setContentView(customDialog);`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:25:56.357

如果我正确理解了这个问题，那么您将无法在进入对话框的布局上进行操作。与其调用`setContentView(int)`，不如自己扩充布局，然后使用`setContentView(View)`.

```
LayoutInflater inflater = LayoutInflater.from(this);
ViewGroup customDialog = (ViewGroup) inflater.inflate(R.layout.dialog_charts1, null);

// Do chart things here
// Prefix all calls to findViewById with "customDialog."
LinearLayout layout = (LinearLayout) customDialog.findViewById(R.id.graph1);
mChartView = ChartFactory.getBarChartView(ChartsDuration.this, buildBarDataset(titles, values),renderer,Type.DEFAULT); 
mChartView.setBackgroundColor(renderer.getBackgroundColor()); 
layout.addView(mChartView);

// Put the manipulated layout into the dialog
dialog.setContentView(customDialog); 
```

您可以使用相同的技巧来利用[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)类，同时仍然使用自定义布局填充对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:44:23.807

使`dialog`变量成为 Activity 类中的字段。你可以从任何地方到达它。您仍然可以`dialog.findviewbyid`在整个活动中使用。只需确保`setcontentView`在您致电之前已被致电`findviewbyid`

编辑：我希望你写**`since I am outside the dialog.`**的时候意味着你不能访问变量

# android - 基本 android 浏览器的正确布局

> ID：12043770
> 
> 赞同：0
> 
> 时间：2012-08-20T19:20:43.277
> 
> 标签：android, android-layout, android-widget

我需要为 android 创建一个基本浏览器：一个 WebView 顶部的工具栏带有后退按钮，底部的工具栏带有更多按钮。

这样做的最佳方法是什么？

这是我到目前为止所拥有的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/browserBackButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Back" />

    <WebView
        android:id="@+id/webView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/backButton"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@drawable/back" />

        <ImageButton
            android:id="@+id/forwardButton"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@drawable/forward" />

        <ImageButton
            android:id="@+id/reloadButton"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@drawable/reload" />

        <ImageButton
            android:id="@+id/browserButton"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@drawable/safari" />
    </LinearLayout>

</LinearLayout> 
```

按钮的底部 LinearLayout 根本不显示。只有顶部的后退按钮和 WebView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:57:31.113

线性布局没问题。

您应该更改控件​​的高度`WebView`并将权重设置为 1

这样做：

```
<WebView android:layout_height="fill_parent" android:layout_weight="1" android:layout_width="fill_parent" 
```

甚至如此，正如 Lint 工具所推荐的那样：

```
<WebView android:layout_height="0dip" android:layout_weight="1" android:layout_width="fill_parent" 
```

权重很重要，它强制视图填充剩余空间。

如果还是不行，你也可以尝试将底部面板的高度设置为某个常数值，或者将图片按钮的高度设置为wrap_content，那么你可以确定它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:37:09.227

就个人而言，我不喜欢嵌套`LinearLayouts`，当您的布局变得更复杂时，它会影响性能。对于小事来说可能没什么大不了的。但是，使用`RelativeLayouts`.

`xmlns:android="http://schemas.android.com/apk/res/android"`此外，在你的第二个中失去`LinearLayout`。你不需要它。

希望这可以帮助。

# regex - 重定向的正则表达式

> ID：12043772
> 
> 赞同：0
> 
> 时间：2012-08-20T19:21:07.563
> 
> 标签：regex, wordpress

如何使用单个正则表达式将以下所有 URL 重定向到“/”？

*   成员/卡莱姆/
*   成员/kaleem/活动/just-me/
*   成员/kaleem/活动/
*   会员/kaleem/活动/收藏/
*   成员/kaleem/活动/组/
*   会员/kaleem/朋友/

我正在使用它的 wordpress 重定向插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:27:44.973

它似乎`members/`是通用标识符。正确的？如果是这样，您只需要匹配：`^members/`. 否则它会变得有点复杂：`^members/kaleem/(?:friends|activity/(?:(?:just-me|favorites|groups)/)?)`. 见：[http ://regex101.com/r/jJ4rM8](http://regex101.com/r/jJ4rM8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:29:29.247

我不确定 Wordpress 的重定向插件是如何工作的，但是这个正则表达式将匹配以上所有内容，以及`members/kaleem`.

```
members/kaleem[[\w\-\/]* 
```

抓取出现在 . 之后的单词字符、破折号和斜线`members/kaleem`。如果之后有某些页面`members/kaleem`不*应该*匹配，它会变得更加复杂。我假设您展示的示例是模式的一部分。

如果你只想匹配`kaleem/activity`and `kaleem/friends`，加上它们的子页面，你可以使用这个：

```
members/kaleem/((activity|friends)[\w\/\-]*)? 
```

# android - Android 上仅手写笔输入模式

> ID：12043774
> 
> 赞同：0
> 
> 时间：2012-08-20T19:21:42.067
> 
> 标签：android, tablet

如何在运行 ICS 4.0.3 的 Lenovo Thinkpad Tablet 上以编程方式打开“仅笔”模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:47:02.257

很抱歉，我无法回答您的问题，尽管我认为 WebnetMobile 可能是正确的 - 似乎没有用于仅笔模式的 API 方法。但是，如果您访问这篇文章[http://knowledge.lapasa.net/?p=490](http://knowledge.lapasa.net/?p=490)，它指出您应该关注输入设备的直径（手指的触摸直径远大于触控笔的直径） ）。

至于 WebnetMobile 说在纯笔模式下使用平板电脑毫无意义，我想说任何艺术家或笔记记录者都渴望能够将手放在正在绘画的表面上/写作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T00:33:48.003

如果您正在开发一个应用程序，您实际上可以实现这一点。如果您的触控笔在触摸之前可以“悬停”在屏幕上，您可以`OnHoverListener`在 Activity 的最高视图上添加一个以将全局变量设置`isPen`为 true。然后在您的活动中覆盖`dispatchTouchEvent()`并在您的应用程序中传递事件之前检查变量。

```
rootView.setOnHoverListener(new View.OnHoverListener() {
    @Override
    public boolean onHover(View view,MotionEvent event) {
        isPen = true;
        return true;
    }
}); 
```

和

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    if(isPen) {
        return super.dispatchTouchEvent(event);
    } else {
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T21:21:56.697

我知道这是旧的，但我在这个问题上没有发现其他任何东西，我最终提出了这个解决方案：你需要扩展你的视图并覆盖 onTouchEvent：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    // Disable multitouch
    if (event.getPointerCount() != 1)
        return false;

    // If not stylus return  
    MotionEvent.PointerProperties pp = new MotionEvent.PointerProperties();
    event.getPointerProperties(0, pp);
    if (pp.toolType != MotionEvent.TOOL_TYPE_STYLUS)
        return false;

    // Dispatch event to the original view 
    return super.onTouchEvent(event);
} 
```

# php - PHP 命令行参数和选项

> ID：12043775
> 
> 赞同：7
> 
> 时间：2012-08-20T19:21:42.667
> 
> 标签：php

我正在用 php 编写一个小型命令行应用程序。

处理命令行参数和选项的正确方法是什么？

似乎有 argv 数组、$_SERVER['argv'] 和 getopt，但是什么时候使用它们令人困惑？

另外关于选项，即“argument --option”，获得这些的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-03-08T13:30:58.803

## 论据，变得容易

有一天，我决定一劳永逸地打败这个怪物。我伪造了一个秘密武器——一个充当存储的函数、一个解析器和一个参数查询函数。

```
 //  You can initialize it with a multiline string:

    arg("

        -a  --alpha         bool    Some explanation about this option
        -b  --beta          bool    Beta has some notes too
        -n  --number        int     Some number you need for the script
        -   --douglas       int     There is no short form of this
        -o  --others        str     A string of other things

    ");

    //  ... and now you have your arguments nicely wrapped up:

    print arg("alpha");        //  returns the value of -a or --alpha
    print arg("a");            //  same thing
    print arg();               //  returns the whole parsed array
    print arg(1);              //  returns the first unnamed argument
    print arg(2);              //  returns the second unnamed argument
    print arg("douglas",42);   //  value of "douglas", or a reasonable default 
```

### 解释

*   您需要做的就是将参数列表写为多行字符串。四列，看起来像一个帮助，但`arg()`会解析你的行并自动找出参数。

*   用两个或多个空格分隔列 - 就像你一样。

*   解析后，每个项目将由一个字段数组表示，分别命名为*char、word、type*和*help*。如果参数没有短 (char) 或长 (word) 版本，只需使用破折号。显然，两者都不是。

*   类型就是它们看起来的样子：*bool*表示参数后面没有值；如果缺少则为假，如果存在则为真。*int*和*str*类型意味着必须有一个值，而int*确保*它是一个整数。不支持可选参数。值可以用空格或等号分隔（即“-a=4”或“-a 4”）

*   在第一次调用之后，您将所有参数整齐地组织在一个结构中（转储它，您会看到），您可以按名称或编号查询它们的值。

*   函数 arg() 具有用于默认值的第二个参数，因此您永远不必担心缺少值。

### 函数`arg()`本身

```
function arg($x="",$default=null) {

    static $arginfo = [];

    /* helper */ $contains = function($h,$n) {return (false!==strpos($h,$n));};
    /* helper */ $valuesOf = function($s) {return explode(",",$s);};

    //  called with a multiline string --> parse arguments
    if($contains($x,"\n")) {

        //  parse multiline text input
        $args = $GLOBALS["argv"] ?: [];
        $rows = preg_split('/\s*\n\s*/',trim($x));
        $data = $valuesOf("char,word,type,help");
        foreach($rows as $row) {
            list($char,$word,$type,$help) = preg_split('/\s\s+/',$row);
            $char = trim($char,"-");
            $word = trim($word,"-");
            $key  = $word ?: $char ?: ""; if($key==="") continue;
            $arginfo[$key] = compact($data);
            $arginfo[$key]["value"] = null;
        }

        $nr = 0;
        while($args) {

            $x = array_shift($args); if($x[0]<>"-") {$arginfo[$nr++]["value"]=$x;continue;}
            $x = ltrim($x,"-");
            $v = null; if($contains($x,"=")) list($x,$v) = explode("=",$x,2);
            $k = "";foreach($arginfo as $k=>$arg) if(($arg["char"]==$x)||($arg["word"]==$x)) break;
            $t = $arginfo[$k]["type"];
            switch($t) {
                case "bool" : $v = true; break;
                case "str"  : if(is_null($v)) $v = array_shift($args); break;
                case "int"  : if(is_null($v)) $v = array_shift($args); $v = intval($v); break;
            }
            $arginfo[$k]["value"] = $v;

        }

        return $arginfo;

    }

    //  called with a question --> read argument value
    if($x==="") return $arginfo;
    if(isset($arginfo[$x]["value"])) return $arginfo[$x]["value"];
    return $default;

} 
```

我希望这可以帮助很多迷失的灵魂，就像我一样。愿这个小函数阐明不必编写帮助和解析器并使它们保持同步的美妙之处......此外，一旦解析，这种方法非常快，因为它缓存了变量，所以你可以调用它尽可能多随心所欲。它就像一个超全球。

也可以在我的[GitHub Gist](https://gist.github.com/DenesKellner/29a696e4420a4f3e162a935e5cb9ab4f)上找到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T19:29:08.367

您可以使用 $argv 检索“原始”参数。另见：[http ://www.php.net/manual/de/reserved.variables.argv.php](http://www.php.net/manual/de/reserved.variables.argv.php)

例子：`php file.php a b c`

`$argv`将包含`"file.php", "a", "b"`和`"c"`。

用于`getopts`获取“已解析”的参数，PHP 将为您完成这项肮脏的工作。因此，这可能是您想要传递参数的最佳方式`--options`。仔细看看[http://www.php.net/manual/de/function.getopt.php](http://www.php.net/manual/de/function.getopt.php) 很好的描述了这个函数。

# mysql - 将空值和逗号导入 MYSQL

> ID：12043777
> 
> 赞同：1
> 
> 时间：2012-08-20T19:21:47.450
> 
> 标签：mysql, csv, import, null

我正在将文件导入 MYSQL，如下所示：

```
LOAD DATA LOCAL INFILE 'C:\\Users\\Justin.Mathieu\\Documents\\data.csv' into table Ingredients
fields terminated by ','
optionally enclosed by '"' 
lines terminated by '\n'
(iVendor, iName, iOrderNumber, iCaseQty, iUnitSize, iDrainSize, iUnitSoldBy, iCaseCost, iVolumeConversion, iUnitLabel, iIngredients) 
```

以及一些导入数据的样本：

```
VendorName,"Apple Whole Peeled Cored Grd A Fz",61318,1,\N,\N,\N,38.17,\N,\N,\N
VendorName,"Apples- Applesauce Sweetened",10738,6,\N,\N,-1,24,\N,\N,\N
VendorName,"Applesauce Unswtn Fancy",10676,6,106,\N,-1,23.97,\N,\N,"Apples, Water, Erythorbic Acid (To Maintain Color)"
VendorName,Apron 24"X42" White Reg Wt - Dispenser ,81463,1,\N,\N,\N,9.98,\N,\N,\N
VendorName,"Artichoke Heart 40-50Cnt Quartered,     Marintated",10722,6,88,\N,-1,71.46,\N,,"Artichoke Hearts, Vegetable Oil (Soya Or Sunflower), Water, Vinegar"
VendorName,"Artichoke Heart Crse Ct",77334,6,\N,55,\N,49.16,\N,\N,\N
VendorName,"Artichoke Heart Quarters",11804,6,\N,\N,-1,62.46,\N,\N,"Artichoke Hearts, Water, Salt And Citric Acid"
VendorName,"Artichoke Quarters Mixed Cuts",D6808,6,\N,\N,\N,60.26,\N,\N,\N
VendorName,"Bacon Bit Real Ref",56188,2,\N,\N,\N,51.22,\N,\N,\N
VendorName,"Barley Pearled Dry Us #1 Standard",33050,2,\N,\N,\N,21.38,\N,\N,\N 
```

第一个问题是使用\N。在导入后查看我的数据库时，我没有得到空值，而是在 iIngredients 字段中得到“N”。

第二个问题是大多数行没有被导入，这是我得到的错误示例：

```
164 row(s) affected, 64 warning(s): 
1262 Row 3 was truncated; it contained more data than there were input columns 
1262 Row 5 was truncated; it contained more data than there were input columns 
1262 Row 9 was truncated; it contained more data than there were input columns 
1262 Row 10 was truncated; it contained more data than there were input columns 
1262 Row 11 was truncated; it contained more data than there were input columns 
1262 Row 12 was truncated; it contained more data than there were input columns 
Records: 164  Deleted: 0  Skipped: 0  Warnings: 94 
```

我已经验证每一行都有任何可能包含逗号的数据，这些逗号被包裹在“”中。

任何想法可能会发生什么？

**编辑：**我能够解决 \N 问题，只需将 "" 用于字符串行，将 \N 用于非字符串行。

**编辑 2：**在被截断的行中，iIngredients 字段包含下一行的所有数据，就好像它没有检测到以“.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:49:39.413

好吧，在闲逛了足够多之后，我想通了。

问题是，当我将文件转换为为空字段插入“/N”时（在 C# 中），我使用的是：

```
Write(rowData + Environment.NewLine); 
```

显然 MySQL 真的不喜欢这样，所以我将其更改为：

```
Write(rowData + "\n"); 
```

这似乎工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T05:42:01.517

看起来行分隔符有问题，请检查它们是否在您的文件中为 '\n'，或者尝试在 LOAD DATA 命令中使用 '\r\n'。

另外，我看不出 \N 有什么问题，它按原样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T15:39:46.173

mysql 无法识别 '\n' 换行

# .net - 在 WPF 中与相关资源绑定时操作高度

> ID：12043779
> 
> 赞同：1
> 
> 时间：2012-08-20T19:22:08.283
> 
> 标签：.net, wpf, binding

我有一个树视图，想设置`height`=*窗口的高度 -120*。

我试过这个，但它不起作用。你能帮帮我吗？

谢谢，

张。

```
<TreeView x:Name="MyTreeView"  
    ItemsSource="{Binding  NavigationData}" 
    Height="{Binding Path=Height -120, RelativeSource={RelativeSource AncestorType={x:Type  Window}}}" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:32:19.497

你需要一个转换器。

创建转换器

```
public class HeightConverter : IValueConverter
{
   public object Convert(object value, Type targetType,
      object parameter, System.Globalization.CultureInfo culture)
     {
        return ((int) value) - 120;
     }
} 
```

将转换器添加到资源

```
<UserControl.Resources>
   <local:HeightConverter x:Key="myConverter" />
</UserControl.Resources> 
```

在绑定中设置转换器

```
ItemsSource="{Binding NavigationData}" Height="{Binding Path=Height, Converter={StaticResource myConverter}, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:33:00.203

`Binding`不支持`Path`您在示例（-120）中的逻辑。根据您要完成的任务，您可以使用`VerticalAlignment`(将其设置为`Stretch`) 和`Margin`.

```
<TreeView VerticalAlignment="Stretch" Margin="0,60,0,60"/> 
```

否则，如果您需要数据绑定，您可以使用`Converter`从传入的值中减去一个值的 a。

# architecture - 学习 ACME 的资源

> ID：12043786
> 
> 赞同：0
> 
> 时间：2012-08-20T19:22:36.940
> 
> 标签：architecture

我需要在短时间内为我的学校项目学习 ACME（卡内基梅隆大学开发的一种架构描述语言）。您能否向我介绍一个有用且全面的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:35:23.400

尽管它在学术界颇具影响力，但对于想要使用它的人来说，ACME 上并没有一个很好的参考资料。

正如 darlinton 所说，官方网站上的语言概述是一个很好的起点：[http ://www.cs.cmu.edu/~acme/docs/language_overview.html](http://www.cs.cmu.edu/~acme/docs/language_overview.html)

您还可以下载 ACME Studio (http://www.cs.cmu.edu/~acme/AcmeStudio/index.html) 并按照教程进行操作。这将帮助您理解语言结构。

还有定义语言的原始论文，作为 CMU 技术报告发布：[http](http://repository.cmu.edu/tepper/322) ://repository.cmu.edu/tepper/322 （您会在那里找到更多 ACME 案例研究和相关工作）。

# c++ - c变量在内存中的存储

> ID：12043787
> 
> 赞同：2
> 
> 时间：2012-08-20T19:22:37.823
> 
> 标签：c++, c, variables, memory

我想知道哪些变量存储在堆栈、堆等中。假设我有一个变量、一个数组、一个指针等。这些将存储在哪里（堆栈、堆、未知）？静态变量存储在哪里。当变量、数组、指针被声明为静态时，它们将存储在哪里？全局变量和声明为 extern 的变量在哪里存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:24:30.657

静态和全局变量存储在全局数据存储器（不是堆栈或堆）中。extern 对存储有影响。

# javascript - 一种在应用 .appendTo() 方法时具有回调函数的方法

> ID：12043789
> 
> 赞同：0
> 
> 时间：2012-08-20T19:22:40.023
> 
> 标签：javascript, jquery, callback

所以我有一些我用 jQuery 方法附加的 html 代码`.appendTo()`，然后在那个 html 上运行了一个 jQuery 插件：

```
$(str).appendTo(target);
    self.initiate_jpages_plugin(self.cluster_public_classes.items_navigation, {
        containerID: self.cluster_public_ids.items_wrapper,
        previous: self.cluster_public_classes.previous_items,
        next: self.cluster_public_classes.next_items,
        perPage: 16,
        midRange: 8,
        animation: self.cluster_animations[17],
        links: "blank",
        keyBrowse: true,
        callback: function(pages) {
            /*var data = {
                current_page: pages.current,
                total_pages: pages.count
            }
            self.set_local_storage_data(self.local_storage_key, JSON.stringify(data));*/
        }
    }); 
```

以上是它的外观，但是那里有很多变量不太有意义（：我只是在寻找一种解决方案，只要不应用插件，就可以将 html 隐藏起来（插件将再次附加所有的html），所以我能想到的最好的事情是一个回调函数，我知道该`.appendTo()`方法没有。

那么会有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:34:21.483

**编辑：我将添加一个类，而不是添加一个 id。`$(str)`可以是任何东西，并且可能已经有一个 id。如果您确信 id 就足够了，请随意使用它。**

我所做的只是隐藏`$(str)`并给它一个独特的类，以便我可以在回调中定位它并显示它。那是你要找的吗？

```
var uniqueClass = "str" + new Date().getTime();
$(str).addClass(uniqueClass).hide().appendTo(target); 
self.initiate_jpages_plugin(self.cluster_public_classes.items_navigation, {
    containerID: self.cluster_public_ids.items_wrapper,
    previous: self.cluster_public_classes.previous_items,
    next: self.cluster_public_classes.next_items,
    perPage: 16,
    midRange: 8,
    animation: self.cluster_animations[17],
    links: "blank",
    keyBrowse: true,
    callback: function(pages) {
        $('.' + uniqueClass).show(); // show it!
        /*var data = {
            current_page: pages.current,
            total_pages: pages.count
        }
        self.set_local_storage_data(self.local_storage_key, JSON.stringify(data));*/
    }
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-20T19:25:26.903

您是否尝试过[ajaxComplete 处理程序？](http://api.jquery.com/ajaxComplete/)

# android - 执行 I/O 时的 Adob e AIR UI 性能问题

> ID：12043790
> 
> 赞同：0
> 
> 时间：2012-08-20T19:23:00.907
> 
> 标签：android, actionscript-3, flash, mobile, air

我正在为 Android 平板电脑 @ work 开发一个应用程序。它需要定期加载图像和外部 SWF 文件。

问题是，当 I/O 发生时（使用 Loader 类），UI 中的帧速率下降非常陡峭（实际上它似乎将 UI 从半秒冻结到一整秒）。根据我对 AS3、Flash 和 AIR 的了解，加载应该是异步的，但感觉并不像这样。

这种减速非常烦人，甚至没有放置带有“加载图标”的影片剪辑（如 AJAX 应用程序）只是停留在那里没有动画，直到加载完成（并且不再需要所述图标）。

有没有人遇到过这个问题？有什么想法可以解决，或者至少可以最小化这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T03:53:38.507

默认情况下，如果您使用 a`Loader`加载 PNG 或 JPEG 图像，则图像数据仅在使用时才被解码。这发生在主线程上，当从加载的图像创建位图或纹理时，可能会导致 UI 卡顿。

将图像解码策略标志设置为 可能会有所帮助`ON_LOAD`，这将在 Loader 的后台线程中解码图像：

```
import flash.system.ImageDecodingPolicy;

...

loaderContext.imageDecodingPolicy = ImageDecodingPolicy.ON_LOAD;
loader.load(url, loaderContext); 
```

[在LoaderContext 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html#imageDecodingPolicy)中了解有关此主题的更多信息。文档状态`ON_LOAD`可能会使用更多内存。

此外，如果您使用的是 Stage3D（Starling、Away3D 等），实际上可能是纹理上传需要时间。GPU 优化是一个完全不同的问题，但您可以在[Starling Performance Optimization wiki](http://wiki.starling-framework.org/manual/performance_optimization)上进行一些研究。简短的回答是您想要 1) 一次上传所有纹理（例如在加载屏幕期间），2) 您想要将纹理一起批处理到图集中，以及 3) 您甚至可以使用 Adob​​e ATF 工具压缩纹理以便他们更快地上传并使用更少的 GPU 内存。如果您想了解更多详情，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:12:13.293

对于并发，请使用 ActionScript Worker。 [http://www.bytearray.org/?p=4423](http://www.bytearray.org/?p=4423)

# objective-c - 通过 OCMock 存根覆盖方法

> ID：12043791
> 
> 赞同：0
> 
> 时间：2012-08-20T19:23:04.880
> 
> 标签：objective-c, ocunit, ocmock

我正在尝试测试完成关卡后计时器对象是否停止。我有以下代码：

```
-(void)advanceLevel {
    int nextLevelId = self.currentLevel.id + 1;

    self.currentLevel = [[Level alloc] initWithIdentifier:nextLevelId];

    [self.timer stop];
    [self prepareLevel];
} 
```

...

prepareLevel 方法重置计时器值并在其上调用“start” --- 所以为了测试advanceLevel 实际停止计时器，我需要覆盖prepareLevel 方法。

所以在我的单元测试中，我做了以下事情：

```
-(void)testItStopsTheTimer {
    [timer start];

    id mockGame = [OCMockObject partialMockForObject:game];
    [[[mockGame stub] andReturn:nil] prepareLevel];

    [game advanceLevel];

    STAssertFalse(timer.active, nil);
} 
```

这导致 XCode 说“testItStopsTheTimer（Gametests）失败。最终出现在 Game-0x12383060 的子类转发器中......”

那么，是不是不可能把现有的方法存根，然后用虚无来代替呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:10:04.283

OCMock 绝对可以实现您想要做的事情。

方法签名有什么用`prepareLevel`？如果它返回 void，您的模拟设置应该是：

```
[[mockGame stub] prepareLevel]; 
```

不是：

```
[[[mockGame stub] andReturn:nil] prepareLevel]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:53:08.607

OCMock 可以让您尝试做的事情。在您的测试代码中，有一行突出：

```
id mockGame = [OCMockObject partialMockForObject:game]; 
```

问题是，“游戏”从何而来？是否在多个测试中使用了相同的实例？您看到的错误可能是由以下顺序引起的：您在部分模拟上使用了 expect，调用了预期的方法，然后再次调用了该方法，但是现在没有期望了，部分模拟也不知道该怎么办。

更新：我刚刚更改了 OCMock，以便在这种情况下，模拟只是将方法转发给真实对象。见：[https ://github.com/erikdoe/ocmock/commit/e03d4fe74465b4fe3fa33552e036de8986f8dec2](https://github.com/erikdoe/ocmock/commit/e03d4fe74465b4fe3fa33552e036de8986f8dec2)

# objective-c - 如何在没有密钥的情况下解析 JSON？

> ID：12043795
> 
> 赞同：2
> 
> 时间：2012-08-20T19:23:15.513
> 
> 标签：objective-c, json

我正在尝试解析大量 JSON，结果发现它是一个包含 20 个字典的大数组。我只是想知道如何将其解析为多个 NSDictionaries？我习惯于用 JSON 做这个：

```
NSDictionary *tDic = [NSJSONSerialization JSONObjectWithData:responseObject options:kNilOptions error:&error]; 
```

但我试图解析的 JSON 看起来像这样：

```
[{
"key": "value"
"key": {
    "key": "value"
    "key": "value"
    }
},
{
"key": "value"
"key": {
    "key": "value"
    "key": "value"
    }
},
{
"key": "value"
"key": {
    "key": "value"
    "key": "value"
    }
}] 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:38:43.770

您所要做的就是将其更改为：

```
NSDictionary *tDic = [NSJSONSerialization JSONObjectWithData:responseObject options:kNilOptions error:&error]; 
```

至：

```
NSArray *tArray = [NSJSONSerialization JSONObjectWithData:responseObject options:kNilOptions error:&error]; 
```

那么你所拥有的是一个`NSArray`完整的`NSDictionary`'。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T19:38:41.503

你能指望什么？您的 JSON 是一个字典数组，所以这就是`NSJSONSerialization`返回给您的内容。其他任何事情都是错误的。

此外，这个方法应该如何返回“多个 NSDictionaries”给你？可以做到这一点的唯一方法是将它们粘贴到某种容器中，例如`NSArray`or `NSSet`。而且由于 JSON 规范说您的 JSON 是一个数组`NSArray`（或者`NSMutableArray`您可以通过指定正确的标志来获得）是唯一合乎逻辑的选择。

# git - git checkout origin/master 不起作用？

> ID：12043807
> 
> 赞同：1
> 
> 时间：2012-08-20T19:23:56.427
> 
> 标签：git, github, git-checkout

我在`git checkout origin/master`命令行输入，首先给出以下提示：

```
Deletion of directory 'dirname1/dirname2' failed. Should I try again? (y/n) 
```

每次我尝试时它几乎都会失败，所以我最终击中了 n。然后我得到这个：

```
You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at c2850cd... - change description 
```

之后我会这样做`git branch`，这就是我所看到的：

```
* (no branch)
  remote/branchname
  master 
```

为什么这样做？鉴于此，我如何对 origin/master 做出承诺？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:40:39.383

我在猜测 - 看起来您的工作副本中有一个目录在 origin/master 中不存在。通常，当您更改分支时，git 只会删除该目录。但在这种情况下，由于某种原因它不能。可能存在权限问题：该目录可能由不同的用户拥有，或者可能是只读的。

尝试删除 git 抱怨的目录。您可能需要更改其权限或使用`sudo`. 然后你可以使用命令`git checkout .`把它放回去——希望这次有正确的权限。如果我是对的，那么切换分支应该在那之后工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T01:52:57.233

只是`master`没有前缀的：

```
git checkout master 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-08-18T15:07:25.450

GitHub用main替​​换master，所以你必须这样做

```
git checkout main 
```

# delphi - Delphi 例程以任意语言以任意编码显示任意字节

> ID：12043808
> 
> 赞同：3
> 
> 时间：2012-08-20T19:24:12.650
> 
> 标签：delphi, utf-8, delphi-2007

我有一些字节流可能会或可能不会被编码为 1) 扩展 ASCII、2) UTF-8 或 3) UTF-16。它们可能是英文、法文或中文的。我想编写一个简单的程序，允许用户输入一个字节流，然后选择一种编码和一种语言，看看以这种方式解释字符串会是什么样子。或者简单地以 9 种可能的方式解释每个字符串并将它们全部显示出来。我想避免不得不反复切换区域化。我正在使用 Delphi 2007。我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T20:47:18.097

在 Delphi 2009 或更高版本中，这会更容易，因为它支持 Unicode 并且可以透明地完成大部分操作。对于旧版本，您必须做更多的手动工作。

您要做的第一件事是将文本转换为通用代码页；最好是 UTF-16，因为那是 Windows 上的本机代码页。为此，您使用[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072(v=vs.85).aspx)函数。对于 UTF-8 到 UTF-16，语言无关紧要；对于“扩展 ASCII”，您需要选择适当的源代码页（例如 Windows-1252 用于英语和法语，以及 GB2312 或 Big5 或其他一些中文代码页 - 这取决于您希望收到的内容）。要存储这些，您可以使用 WideString，它直接存储 UTF-16。

一旦你有了它，你必须以某种方式绘制文本——这需要你要么获得一个支持 Unicode 的控件（一个标签可能就足够了），要么写一个，或者直接调用适当的 Windows API 函数来绘制 - 和这就是它可能会变得有点混乱的地方，因为有几个函数可以做到这一点。[TextOutW](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145133.aspx)可能是这里最简单的选择，但另一个选择是[DrawText](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498(v=vs.85).aspx)。确保显式调用这些函数的 W 版本以便使用 Unicode。（另请参阅相关问题[How do I draw Unicode text?](https://stackoverflow.com/questions/5840719/how-do-i-draw-unicode-text)）。

*请注意*：由于 CJK 统一 - 在 Unicode 的相同代码点处对等价的中文汉字、日文汉字和韩文汉字字符的编码 - 您需要选择一种与预期的中文（繁体或简体）相匹配的字体，以便获得预期的渲染。引用[Michael Kaplan](http://www.siao2.com/2005/06/18/430507.aspx)的一篇相关文章：

> 归根结底，有许多角色可以有四种不同的外观：
> 
> *   **日语**将默认使用 MS UI Gothic（回退到 PMingLIU，然后是 SimSun，然后是 Gulim）
> *   **韩语**将默认使用 Gulim（回退到 PMingLiu，然后是 MS UI Gothic，然后是 SimSun）
> *   **简体中文**将默认使用 SimSun（回退到 PMingLiu，然后是 MS UI Gothic，然后是 Batang）
> *   **繁体中文**将默认使用 PMingLiu（回退到 SimSun，然后是 MS Mincho，然后是 Batang）

除非您有想要/需要使用的特定字体，否则请为您想要使用的语言变体选择列表中的*第一个*字体，因为这些是标准字体（在 XP 上，您需要先启用东亚语言支持，然后再启用它们可用，在 Vista 及更高版本上，它们始终包含在内）。如果您不*这样*做，那么 Windows 可能根本不呈现字符（而是显示丢失的字符字形），或者它可能使用不适当的回退（例如 PMingLiu 用于简体中文） - 确切的行为取决于您使用的 API 函数用于渲染文本。

# android - Android：以编程方式在 EditText 中居中文本

> ID：12043809
> 
> 赞同：28
> 
> 时间：2012-08-20T19:24:17.603
> 
> 标签：android, android-edittext

有没有办法让输入的文本在一个`EditText`字段中居中？更具体地说，不是光标从框的左侧开始，而是应该从中心开始并在填充输入时向左向外移动。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-20T19:32:58.247

你应该使用

```
 textView.setGravity(Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-20T19:26:10.023

尝试`android:gravity="center_horizontal"`在布局文件中定义小部件。这不会严格地“向外向左移动”——它应该在两个方向上均匀地向外移动。如果您真的是说您希望文本仅位于 的左侧`EditText`，我怀疑这是可能的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-25T01:46:09.187

在 EditText 中对齐文本的更简单解决方案是在布局 xml 中添加 android:gravity="center"。无需添加 Java 代码。

测试示例代码-

```
<EditText
                android:id="@+id/FieldName"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/back"
                android:inputType="numberDecimal"
                android:gravity="center" /> 
```

# .net - 如何在 MongoDB 中查看由 linq 构造的查询？

> ID：12043811
> 
> 赞同：1
> 
> 时间：2012-08-20T19:24:25.107
> 
> 标签：.net, mongodb, mongodb-.net-driver, nosql

> **可能重复：**
> [将 Queryable<T> 翻译回 IMongoQuery](https://stackoverflow.com/questions/10261156/translate-queryablet-back-to-imongoquery)

我想查看由 linq 在 MongoDB 中构造的查询。我已经检查了有关分析的文档，但我找不到有关此的信息。system.profile 表未提供有关已执行查询的足够信息。

例如

我想查看由以下查询构造的本机 NoSql MongoDb 查询。

```
var col = Queryable.Where(o => o.Id == id).Select(o => o.Definitions.Take(10)); 
```

我尝试按照以下论坛中的建议获取查询文本

```
var queryText = (col as MongoQueryable<IEnumerable<Definition>>).GetMongoQuery().ToJson();

// queryText = "{ \"_id\" : ObjectId(\"503376c0e1e28f09449b64d6\") }" 
```

如您所见，queryText 不是我要查找的查询。

如何通过官方 .net 驱动程序或 MongoDB 分析工具查看查询？

# jsf - JSF 从托管更改为 CDI 时我丢失了会话状态

> ID：12043812
> 
> 赞同：1
> 
> 时间：2012-08-20T19:24:28.030
> 
> 标签：jsf, jsf-2, cdi, managed-bean, session-scope

编辑：这是一个史诗般的手掌情况。SessionScoped 的导入错误。昨晚检查它时太累了，我确定我正在使用企业会话范围导入，而我仍在使用面部会话范围导入。我把它留下来帮助像我这样的笨蛋。:)

* * *

这是该项目的早期阶段。在使用托管 bean 实现这一点之后，我将托管 bean 更改为 CDI bean，因为这似乎是关于最佳处理方式的最新共识，*但这破坏了以前的工作代码。*我终其一生都无法弄清楚为什么。帮助和建议表示赞赏。

快乐的道路（摘要......代码摘录下面的详细信息）

*如果用户未登录，则显示登录或注册链接。
如果用户登录显示用户首选项或注销链接。*

现在 CDI 的糟糕路径（我不怪 CDI）

*如果用户未登录，则显示登录或注册链接。
如果用户登录仍然看到登录或注册链接。（糟糕，糟糕的应用程序）*

涉及的对象是

1.  一个 facelet 菜单面板（带有一个 primefaces 登录对话框......我认为这与它没有任何关系，但为了完整性而包括在内）如果登录或未登录，则带有渲染属性，
2.  会话范围的用户 bean，
3.  一个请求范围的身份验证 bean，用于登录和注销用户。

下面列出了使用的对象。实现为 CDI bean。

小面

```
<h:panelGroup id="loginPanel" rendered="#{!user.loggedIn}">
    Show login buttons and stuff
</h:panelGroup>

 <h:panelGroup id="logoutPanel" rendered="#{user.loggedIn}">
    Show logout buttons and stuff
</h:panelGroup 
```

身份验证 bean

```
@Named(value = "webAuthenticationBean") //formerly managedbean
@RequestScoped
public class WebAuthenticationBean implements Serializable {

    @Inject private UserBean user; //formerly a managed property which worked
...
request.login(uername, password);
user.setuserdata(username); // sessionscoped user state here used to check login state among other things later.
...
return(true) // they are now logged in 
```

用户 bean

```
@Named(value = "user") //formerly managedbean
@SessionScoped
public class UserBean implements Serializable {

    @EJB
    private UserService userService; //stateless session bean
    private userInfo = new UserInfo(); // keeps user state and can be used as a DTO/VO

@PostConstruct
    public void init() {
    //sets default state to "guest user". This is NOT a logged in state
    }

public void setuserdata(String username){
     userInfo = userService.getUserInfo(username);
    // method called from WebAuthenticationBean 
    // sets the user state to a non-guest user (they're logged in).
    // I can see in debug mode that this is being called and retrieving
   //  the user data from the database and setting "userInfo"
}

public void isLoggedIn() throws InvalidUserException{
    // checks state to see if they are logged in, basically a bit more than are they still a guest or not
   returns (true) if logged in 
    returns (false) if not logged in
    // this worked with managed beans
}
... 
```

所以这是我在调试模式下观看时的实际用例：

Happy Path（更改为 CDI bean 之前）

1) 用户导航到欢迎页面
2) 查询用户 bean 以查看他们是否已登录（facelet 中的 user.loggedIn）。
3) userbean 检查登录状态。如果他们仍然是访客，则未登录。
4) 他们被标识为访客，因此 isLoggedIn() 返回 false。
5) 显示登录按钮。
6) 用户请求登录
7) 认证bean 开始登录过程：request.login 返回成功
8) authenticationbean 设置用户数据：user.setuserdata(username) 返回成功。
9）身份验证bean loginMethod返回（他们在服务器上记录了userprincipal）

此处的备用（蹩脚）路径分支（快乐路径继续）

10) 菜单重新检查登录状态 (user.loggedIn)
11) userbean 检查适当的状态并确定它们是有效的非访客用户
12) userbean 返回 (true) 他们已登录
13) 菜单显示注销按钮

糟糕的路径（我将这些更改为 CDI bean 后会发生什么）

10) 菜单重新检查登录状态 (user.loggedIn)
11) userbean 检查适当的状态并看到他们是访客 //更新的用户状态似乎在此会话中从该用户中消失了。
12) userbean 返回 (false) 他们没有登录 // 但他们是
13) 菜单显示登录按钮 // 他们无论如何都无法登录，因为服务器已经看到他们登录，在这个会话中 (ServletException: Attempt to re -在用户身份已经存在时登录）。

为什么使用 managedbeans 可以看到 userbean 在会话范围内维护其数据，但使用 cdi bean 却不能？我难住了。如果必须，我会切换回托管 bean，这不是一个大问题，但我想找出我搞砸了。

* * *

我在 UserBean 的 init 方法中添加了一些调试代码，看起来好像系统将 SessionScoped UserBean 视为 RequestScoped。那就是它在每次调用时都进行初始化。

```
@PostConstruct
public void init() {
    if (userInfo == null) {
        userInfo = new UserInfoDTO();
        userInfo.setUserName("Guest");
        List<String> guestGroup = Arrays.asList(CoreUserGroupType.GUEST.toString());
        userInfo.setUserGroups(guestGroup);
        System.out.println("UserBean.init INSIDE Init If Statement");
    }
    System.out.println("UserBean.init OUTSIDE Init If Statement");
} 
```

如果它真的像 SessionScoped 一样，那么 userInfo 对象就不会每次都为空，并且不会每次都执行“if”语句。但它会在每次调用 UserBean 时执行。所以这是问题的症结所在。事实上，如果它的行为就像在会话范围内，它不会在每次调用时都命中 init 方法，因为它仍然会被初始化。

我没有正确创建会话范围的 bean 吗？看起来是这样，但我不知道如何。如前所述，此代码在定义为 managedbean 时运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:08:32.550

更改为正确的 sessionscoped 导入，一切都很好。没有什么伤害我的骄傲。

# python - 试图了解网站使用什么身份验证通过 python 登录

> ID：12043815
> 
> 赞同：1
> 
> 时间：2012-08-20T19:24:42.347
> 
> 标签：python, html, authentication, login

我正在尝试登录[这个网站](https://www.edline.net/)，但是当我查看源代码时，我无法确定它的登录是如何工作的。该文件是一个让我感到困惑的“.page”，围绕登录的代码是：

`<input type="text" id="screenName" name="screenName" tabindex="1"/>`

和

`<input type="password" id="password" name="kclq" maxlength="104" tabindex="2"/>` 但是当我提交密码时并不清楚：

登入

我尝试使用模块*请求*和*机械化*，但似乎都没有成功：

```
import requests
import sys
USERNAME = 'username'
PASSWORD = 'password'
URL = 'http://edline.net/Index.page'

def main():
     session = requests.session(config = {'verbose': sys.stderr})

     login_data = {
     'screenName': USERNAME,
     'btnSignIn' : 'signIn',
     'password' : PASSWORD,
     }

     r = session.post(URL,data=login_data)

     r = session.get("https://www.edline.net/UserDocList.page?") 
     #access a page requiring login
     print r.text
if __name__ == '__main__':
    main() 
```

我该怎么做呢？该网站本身在登录时似乎使用javascript，但我现在只想在登录时能够访问页面。

另外，我是否可以被引导到一个好的起点，足以阅读 html 并知道我正在处理什么样的网站？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-07T16:48:16.683

使用登录请求：

```
import requests
url = 'url'
data = {
      "screenName" : "username",
      "password" : "password",
      "btnSignIn" : "signIn",
}
r = requests.post(url, data=data) 
```

这很容易

# objective-c - 可以在主线程中初始化一个对象并在单独的线程中执行其方法吗？

> ID：12043818
> 
> 赞同：0
> 
> 时间：2012-08-20T19:24:50.773
> 
> 标签：objective-c, ios, multithreading

我有一个在应用程序的主线程中初始化的对象，但我在后台线程中使用`performSelectorInBakground`. 但是，该方法似乎没有响应。进一步来说 ：

AccHandler.m

```
#import "AccHandler.h"

@implementation AccHandler
@synthesize accelerationOnYaxis;
-(void)startAccelerationUpdates
{
    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    motionManager.deviceMotionUpdateInterval = 0.01; 
    [motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue]
                                       withHandler:^(CMDeviceMotion *motion, NSError *error)
     {
         self.accelerationOnYaxis = motion.userAcceleration.y;
     }
     ];
}
@end 
```

测试者.m

```
#import "Tester.h"

@interface Tester()
{
   AccHandler *accHandler;
}
@end

@implementation Tester
- (id) init
{
    //....
    accHandler = [[AccHandler alloc] init]; // initialized in main thread
}

-(void)test
{
    [accHandler startAccelerationUpdates]; // but -(void)test will be executed in a background thread..
    NSLog(@"current acceleration is %f", accHandler.accelerationOnYaxis;
} 
```

稍后在我的代码中，我`test`从 a 调用该方法，`performSelectorInBackground`但我得到 0 加速度值..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:31:38.087

> 可以在主线程中初始化一个对象并在单独的线程中执行其方法吗？

是的。

您的错误似乎是您没有等待背景材料产生结果。

另一个问题可能是`motionManager`某些强引用似乎没有保留。所以它可能会在初始化后立即消失。

# objective-c - 相似的代码行，截然不同的性能

> ID：12043823
> 
> 赞同：1
> 
> 时间：2012-08-20T19:25:18.873
> 
> 标签：objective-c, ios, performance, core-graphics

我正在为 iPad 编写一个绘图应用程序，并且正在做一些时间分析，以便我可以看到我的绘图可能会加速到哪里。

在我的绘图方法中，我有以下 4 行代码：

```
 CGContextDrawImage([DrawingState sharedState].context, CGRectMake(0.0f, 0.0f, [DrawingState sharedState].screenWidth, [DrawingState sharedState].screenHeight), unzoomedBufferImage);

    CGImageRef image = CGBitmapContextCreateImage([DrawingState sharedState].context);
    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, 768, 1024), image);
    CGImageRelease(image); 
```

第一行占18.8%的时间，第二、三、四行只占4.5%的时间，CGContextDrawImage行占3.5%。

为什么这两个 CGContextDrawImage 函数的性能差别如此之大（18.8% vs 3.5%）？

注意：[DrawingState sharedState].screenWidth 和 [DrawingState sharedState].screenHeight 分别是 768 和 1024，所以理论上，我正在做相同数量的绘图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T19:35:01.627

由于您使用的是抽样，因此这可能不是您花费时间的完全准确的图片。

我会试试这个代码：

```
DrawingState * state = [ DrawingState sharedState ] ;
CGContextRef context = state.context ;
CGRect r = { .size = { state.screenWidth, state.screenHeight } } ;

CGContextDrawImage( context, r, unzoomedBufferImage);

CGImageRef image = CGBitmapContextCreateImage( context );
CGContextDrawImage(context, r, image);
CGImageRelease(image); 
```

Just to get more info.

i.e. When things don't make sense, try changing your assumptions about what you "know to be true"

If this doesn't reveal any info, you could try instrumenting your code with my profiling macros: [https://gist.github.com/1905396](https://gist.github.com/1905396) :)

# node.js - Windows 上的基本 Node.js 设置

> ID：12043824
> 
> 赞同：0
> 
> 时间：2012-08-20T19:25:19.710
> 
> 标签：node.js

我正在尝试让 node.js 运行我创建的示例脚本。我正在使用 Windows。`mysamplescript.js`与 node.js 可执行文件位于同一文件夹中。当我输入

```
node mysamplescript.js 
```

我`...`在下一行返回。node 的文档并不完全出色。我错过了什么吗？

# android - ListView 随机选择 CheckBoxes onItemClick

> ID：12043829
> 
> 赞同：-1
> 
> 时间：2012-08-20T19:25:28.480
> 
> 标签：android, listview

我有一个 ListView，其中每个 ListItem 在其布局中保留一个 CheckBox。我希望在单击它们的 ListItems 时激活 CheckBoxes。问题是每当我单击 ListItem 时，复选框都会随机激活。例如：我点击ListItem1，ListItem4的CheckBox被激活。等等。我怎样才能防止这种情况？这是我的 OnItemClickListener：

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, R.layout.listitem, R.id.listcontent, valueslist);

lv = (ListView) findViewById(R.id.list);
lv.setAdapter(arrayAdapter);
lv.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
CheckBox cb = (CheckBox) findViewById(R.id.cb); 
if (cb.isChecked() == false) {
cb.setChecked(true); 
} else {
cb.setChecked(false); 
}
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:37:52.723

而不是这个

```
CheckBox cb = (CheckBox) findViewById(R.id.cb); 
```

你应该使用

```
CheckBox cb = (CheckBox) view.findViewById(R.id.cb); 
```

编辑：声明一个如下所示的类，然后使用 CArrayAdapter 而不是 ArrayAdapter。试试看。可能工作

用这个

```
 private class CArrayAdapter extends ArrayAdapter<String>{

    public CArrayAdapter(Context context, int resource,
            int textViewResourceId, String[] objects) {
        super(context, resource, textViewResourceId, objects);

    }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view =  super.getView(position, convertView, parent);

    CheckBox cb =(CheckBox)findViewById(R.id.cb);
    cb.setChecked(false);
    return view;

}

} 
```

# css - div 拉伸 100% 页面高度，无论内容如何

> ID：12043830
> 
> 赞同：5
> 
> 时间：2012-08-20T19:25:37.223
> 
> 标签：css, html, height

[现场（进行中）网站](http://parlourdc.com/wp)

基本上，无论内容的实际长度如何，我的所有网站内容都集中在一个指定宽度和 100% 预期高度的 div 中。我已经指定`height:100%;`了`html`, `body`，`#main`但是 div 仍然很短，如[本页](http://parlourdc.com/wp/products)所示- 我不希望它们成为`#main`' 的灰色框和屏幕底部之间的任何间隙。这可能吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:35:09.753

看到这个[jsfiddle](http://jsfiddle.net/sheriffderek/yVDXQ/)

```
html, body {height: 100%;}
.container {min-height: 100%;} 
```

也在这里讨论这个......

[适当的 css 以确保 body 元素填满整个屏幕](https://stackoverflow.com/questions/11963813/proper-css-to-ensure-that-the-body-element-fills-the-entire-screen)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:41:41.227

您可以设置`position:absolute`，并且应该将其拉伸到底部。似乎这至少在 Opera 和 Chrome 中可以正常工作。

但是，这将与下面的视频播放器发生冲突，并且还会将您的版权声明推到页面下方。也许您可以将通知移到灰色框中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-20T10:52:28.543

您可以通过两种方式实现：

1) 如果您不知道页面可能有多长，请将高度设置为 100%。

```
html, body {
    height: 100%;
}
.yourContainerClass {
    min-height: 100%;
} 
```

2）如果你知道你需要垂直拉伸多少，那么你可以在“vh（垂直高度）”中使用高度。

```
.yourContainerClass{
    height:80vh;
} 
```

我希望它会帮助你。谢谢！

# java - JDK 7 中关于私有成员访问的 javac 行为更改

> ID：12043831
> 
> 赞同：14
> 
> 时间：2012-08-20T19:25:41.953
> 
> 标签：java, javac, java-7, private-members

此代码使用 javac JDK 版本 1.6.0_33-b03-424 编译正常，但不使用 javac JDK 版本 1.7.0_06 编译。

```
public class Test {
    private final int i = 0;

    void test(Object o) {
        if (getClass().isInstance(o)) {
            System.out.println(getClass().cast(o).i);
        }
    }
} 
```

javac的输出是：

```
Test.java:6: error: i in Test is defined in an inaccessible class or interface
        System.out.println(getClass().cast(o).i);
                                             ^
1 error 
```

更改代码以将结果存储`getClass.cast()`在临时变量中可以使程序编译时不会出错。

这很容易解决，但我在 JLS 7 中找不到这种更改的任何理由，或者在 JDK 7 发行说明中没有提及此类更改。提到了关于泛型类型参数的私有成员的访问更改，但这不适用于此处。

这是javac中的回归吗？它现在是否正在执行以前没有执行的限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T00:14:48.360

好吧，我对此感到困惑，我可以冒险的唯一解释是两件事的结合。

1_[`getClass()`文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)说以下内容：

> 实际结果类型是`Class<? extends |X|>`在哪里擦除调用`|X|`的表达式的静态类型。`getClass`

2_ [Java 7 中引入的不兼容性之一](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#behavioral)是**编译器不再允许访问类型变量的私有成员**。

因此，编译器不确定它是对基类还是子类进行强制转换，并且它会阻止访问私有成员，因为如果将强制转换分配给子类，即使在原始父类中定义也是非法的，如下例所示：

```
class BaseTest {
    private final int i = 1;

    void test(Object o) {
        if (getClass().isInstance(o)) {                
            TestAccess to = TestAccess.class.cast(o);
            //System.out.println(to.i);  // ERROR: i has private access in BaseTest
        }
    }
}

class TestAccess extends BaseTest{} 
```

因此，我想这是 Java 的另一种怪癖，因为规则在更复杂的示例中更有意义。

# objective-c - 从 NSMutableArray 复制和检索对象

> ID：12043846
> 
> 赞同：0
> 
> 时间：2012-08-20T19:26:43.627
> 
> 标签：objective-c

我有一个正在复制到 NSMutableArray 的类的对象。我这样做了5次。但是，每当我尝试从该数组中检索对象时，它们都是相同的。

这是示例代码：

```
[myProperty setAddress:@"Av. dos Estados, 70."]; 
[myProperty setPropType:casaRua];
[myProperty setRentalPrice:1430.0];
[propertiesArray addObject:myProperty];

myProperty = [propertiesArray objectAtIndex:0];
NSLog(@"Price 0  %.2f\n", [myProperty rentalPrice]); //In this I got 1430.0

[myProperty setAddress:@"Av. das Nações, 10\. Ap: 103."];
[myProperty setPropType:apto];
[myProperty setRentalPrice:450.0];
[propertiesArray addObject:myProperty];

myProperty = [propertiesArray objectAtIndex:0];//indexPath.row];
NSLog(@"Price 0  %.2f\n", [myProperty rentalPrice]); **//In this I got 450.0???**

myP = [propertiesArray objectAtIndex:1];//indexPath.row];
NSLog(@"Price 1  %.2f\n", [myP rentalPrice]); //In this I got 450.0 
```

我究竟做错了什么？似乎该数组已被 addObject 覆盖

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:31:04.033

您一遍又一遍地重新修改相同的“属性”对象。

在添加前一个对象之后，您需要在`copy`每次修改它之前或实例化一个新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:30:53.317

看起来您正在从数组中获取相同的对象，更改值并将其放回。如果您想复制它并将另一个对象添加到数组中，您必须执行类似的操作

```
myProperty = [[propertiesArray objectAtIndex:0]copy]; 
```

# git - git-svn：如何同步到 svn 版本？

> ID：12043848
> 
> 赞同：1
> 
> 时间：2012-08-20T19:26:54.287
> 
> 标签：git, svn

我有一个克隆的 git-svn 存储库。使用“git svn rebase”可以获得最新的 svn 版本，但是如何像使用“svn update -rXXXXX”一样获得 svn 版本？

# 编辑：

我的意思是更新到上游 svn 版本，而不是本地 git 更改集。

# 更新：

我接受了 Greg Hewgill 的回答，尽管真正的解决方案在他的评论中，如下步骤：

1.  git svn 变基
2.  git log，并找到在步骤 1 之前的本地 svn 修订版和最新的上游 svn 修订版之间的提交 ID。
3.  git checkout 提交ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:28:39.677

找出哪个 Git 提交标识符对应于您感兴趣的 Subversion 修订版（`git log`可以在此处提供帮助），然后用于`git checkout`检查该提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:31:26.103

`git-svn`为每个修订创建一个提交。您可以使用`git checkout <branch> <commit-id>`来签出该提交。

您可以使用它`git log`来查找适当的提交，尤其是带有`grep`标志的： `--grep=<pattern> Limit the commits output to ones with log message that matches the specified pattern (regular expression).`

这很重要，因为修订应该在 git-svn 创建的提交消息中。

# jquery - 在 Rails 3.2.8 中未显示 select2

> ID：12043850
> 
> 赞同：0
> 
> 时间：2012-08-20T19:27:02.800
> 
> 标签：jquery, ruby-on-rails, jquery-select2, select2-rails

按照此处的说明进行操作：

[http://rubydoc.info/gems/select2-rails/3.1.0/frames](http://rubydoc.info/gems/select2-rails/3.1.0/frames)

我仍然无法在我的简单 Rails 应用程序中显示*select2*显示。我已确保 gem 已安装、添加`//= require select2`到. 此外，我在 a 中包含了以下内容：`application.js``*= require select2``application.css``users.js.coffee`

```
jQuery ->
  $('#user_position_ids').select2 
```

我有一个有很多*职位的**用户*模型：

 *```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, 
                  :first_name, :last_name, :position_ids

  has_many :positions
  has_one :current_position, :class_name => "Position", 
          :conditions => { :is_current => true }
end 
```

我试图让 select2`collection_select`在我的`users/index.html.erb`页面上显示：

```
<%= form_for(@user) do |f| %>
  <%= f.collection_select(:position_ids, Position.order(:industry), :id, 
         :industry, {include_blank:true}, {multiple:true}) %>
<% end %> 
```

因此`$('#user_position_ids').select2`我的javascripts中的行。由于某种原因无法让*select2*显示，所以非常感谢有人指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:47:08.843

我跑了同样的问题。将括号添加到我的咖啡脚本后，它可以正常工作。

所以，在你的情况下：

user.js.coffee：

```
jQuery ->
  $('#user_position_ids').select2() 
```

或有一些选项：

```
jQuery ->
    $('#user_position_ids').select2({
        placeholder: "Tags...",
        width: "element",

    }) 
```*

# c# - ASP.Net MVC 执行命令需要一个开放且可用的连接。连接的当前状态已断开

> ID：12043851
> 
> 赞同：2
> 
> 时间：2012-08-20T19:27:07.673
> 
> 标签：c#, asp.net-mvc-3, ninject

我们的一些内部应用程序是 MVC3 并且都使用 Ninject.MVC。

我们遇到了一个同时影响所有工具的问题。首先我们得到错误：

```
Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'. 
```

其次是：

```
Execution of the command requires an open and available connection. The connection's current state is broken. 
```

这可能在使用该工具的任何时候发生。我们已经将我们的 ninjects 更新到了最新版本，它帮助了很多，错误已经很少见了，但是当工具被大量使用时仍然会发生。我一直在简单地通过 nuget 包管理器设置 Ninject.MVC3 并将适当的服务注册到 NinjectWebCommon.cs。

这是我们的控制器，NinjectWebCommon 和 global.asax 已设置，我们在这里做错了吗？

我们知道肯定会解决这个问题的一个方法是完全摆脱 Ninject 并在每个控制器上实例化我们的存储库。但我猜这不是一个好的解决方案。

Global.asax（删除了一些路线）：

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Index", // Route name
            "", // URL with parameters
            new { controller = "Home", action = "Index" } // Parameter defaults
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

NinjectWebCommon.cs：

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IToolRepository>().To<ToolRepository>();
    }        
} 
```

家庭控制器：

```
public class HomeController : Controller
{
    private IBattleStationRepository _repository;
    private LoginEntities _loginEntities;
    private SpecialLib _speclib;
    private AccessManager _accessManager;

    public HomeController(IBattleStationRepository repository)
    {
        _repository = repository;
        _speclib = new SpecialLib();
        _loginEntities = new LoginEntities();
        _accessManager = new AccessManager();

    }

    public virtual ActionResult Index()
    {
        var byPassHomePage = false;
        var urlReferrer = HttpContext.Request.UrlReferrer;
        var user = _accessManager.GetUserByUserName(User.Identity.Name);
        if (urlReferrer == null)
        {
            byPassHomePage = true;
        }

        if (user.TeamId != null && byPassHomePage == true)
        {
            return RedirectToAction("Release", "Release", new { shortTeamName = user.Team.ShortName });
        }

        return View();
    }
} 
```

# apache - WAMP 403 cgi-bin 错误

> ID：12043853
> 
> 赞同：0
> 
> 时间：2012-08-20T19:27:32.423
> 
> 标签：apache, wamp, httpd.conf, http-status-code-403, cgi-bin

我正在尝试在我的 wamp 设置中执行 CGI。我已经在网上搜索了没有aviel。

cgi.test - 位于 D:\Programs\wamp\bin\apache\apache2.4.2\cgi-bin

```
#!D:/Programs/wamp/bin/php/php5.4.3/php-cgi.exe
phpinfo(); 
```

索引.html

```
<form id="upload-form" action="/cgi-bin/test.cgi" method="post" enctype="multipart/form-data">

</form> 
```

httpd.conf

```
<Directory "cgi-bin">
   AllowOverride All
   Options Indexes FollowSymLinks Includes ExecCGI
   Order Allow, Deny 
   Allow from All
</Directory>

<IfModule alias_module>
    ScriptAlias /cgi-bin/ "cgi-bin/"
</IfModule>

<IfModule mime_module>
    TypesConfig conf/mime.types

    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType application/x-httpd-php .php
    AddType application/x-httpd-php .php3

    AddHandler cgi-script .cgi
</IfModule> 
```

# extjs - 在 ExtJS 4.1 dragdropzones 示例中，我如何将患者移动到医院并通过多选来完成？

> ID：12043854
> 
> 赞同：0
> 
> 时间：2012-08-20T19:27:36.013
> 
> 标签：extjs, drag-and-drop, extjs4.1

在ExtJS 4.1的这个[例子](http://docs.sencha.com/ext-js/4-1/#!/example/dd/dragdropzones.html)中，实际上左侧元素（患者）是从视图克隆到右侧网格（医院）我想在拖放到右侧网格时删除左侧视图的患者，并添加容量将项目从右网格移动到左视图：

我用一个技巧（slideOut）制作了第一部分（向右移动）我这样做了：

在函数 initializePatientDragZone 之前我添加了：

```
return v.dragData = {
    sourceEl: sourceEl,
    repairXY: Ext.fly(sourceEl).getXY(),
    ddel: d,
    patientData: v.getRecord(sourceEl).data,
    patientElement: sourceEl //This part
}; 
```

然后我在 onNodeDrop 函数中添加了一个像这样的 slideOut 技巧：

```
onNodeDrop : function(target, dd, e, data){

var rowBody = Ext.fly(target).findParent('.x-grid-rowbody-tr', null, false),
    mainRow = rowBody.previousSibling,
    h = gridView.getRecord(mainRow),
    targetEl = Ext.get(target);

    targetEl.update(data.patientData.name + ', ' + targetEl.dom.innerHTML);

    //this slideOut
    Ext.get(data.patientElement).slideOut('t', {
    easing: 'easeOut',
    duration: 500,
    remove: true,
    useDisplay: true
});

return true;
} 
```

* * *

你可以看到它现在的样子：[在这个动画中](http://img833.imageshack.us/img833/544/celvindraganddropcustom.gif)

现在我只想将右侧网格中的项目移动到左侧视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:27:19.063

我在早期的项目中使用网格到网格 DND 插件实现了这种功能。

例如，一个患者网格，三个医院的其他三个网格。

将网格布局为兄弟姐妹，您需要的唯一额外配置是：

```
multiSelect: true,
viewConfig: {
    plugins: {
        ptype:'gridviewdragdrop'
    }
}, 
```

您将能够来回选择它们，而不必弄乱拖放区。这是实现所需功能的最简单方法。

# asp.net-mvc - 如何正确地将实体映射到 n 层架构中的域模型？

> ID：12043856
> 
> 赞同：1
> 
> 时间：2012-08-20T19:27:41.073
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, n-tier-architecture, dto

[我按照Project Silk 的](http://silk.codeplex.com/)结构创建了一个中型项目。但是，我无法将我从存储库中检索到的实体映射到域模型对象中以便在 Web 项目中使用。我在[这里发布了一个包含所有代码的类似问题](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/a923a1e2-75f6-4248-a8ec-e8d81c242eee)，但没有收到我正在寻找的帮助。

我的应用程序的架构非常接近 Project Silk 的架构。数据层包含存储库和模型 POCO。业务逻辑层保存服务。在这些服务中，我们将对象从数据层映射到业务层中的模型对象。

```
internal static Model.User ToDataModelUser(User userToConvert)
{
    if (userToConvert == null)
    {
        return null;
    }

    Model.User modelUser = new Model.User()
    {
        UserId = userToConvert.UserId,
        AuthorizationId = userToConvert.AuthorizationId,
        DisplayName = userToConvert.DisplayName,
        Country = userToConvert.Country,
        PostalCode = userToConvert.PostalCode,
        HasRegistered = userToConvert.HasRegistered,
    };
    return modelUser;
}

internal static User ToServiceUser(Model.User dataUser)
{
    if (dataUser == null)
    {
        return null;
    }

    User user = new User()
    {
        UserId = dataUser.UserId,
        AuthorizationId = dataUser.AuthorizationId,
        DisplayName = dataUser.DisplayName,
        Country = dataUser.Country,
        PostalCode = dataUser.PostalCode,
        HasRegistered = dataUser.HasRegistered,
    };
    return user;
} 
```

我的问题是当它们具有多对多关系时如何映射这样的对象？例如，假设用户有一个 ICollection 角色。这意味着我的角色有一个 ICollection 用户。当我通过 ToDataModelUser 或 ToServiceUser 映射用户时，我现在有一个 Roles 属性要填充。因此，上面的代码将如下所示：

```
internal static Model.User ToDataModelUser(User userToConvert)
{
    if (userToConvert == null)
    {
        return null;
    }

    Model.User modelUser = new Model.User()
    {
        UserId = userToConvert.UserId,
        AuthorizationId = userToConvert.AuthorizationId,
        DisplayName = userToConvert.DisplayName,
        Country = userToConvert.Country,
        PostalCode = userToConvert.PostalCode,
        HasRegistered = userToConvert.HasRegistered,
        Roles = new Collection<Role>()
    };

    foreach (Role role in userToConvert.Roles)
        modelUser.Roles.Add(RoleServies.ToDataModelRole(role));

    return modelUser;
}

Now here comes the problem, if you look at RoleServices.ToDataModelRole(Role role) this is what you get:

internal static Model.Role ToDataModelRole(Role roleToConvert)
{
    if (roleToConvert == null) return null;

    Model.Role role = new Model.Role()
    {
        Description = roleToConvert.Description,
        RoleId = roleToConvert.RoleId,
        RoleName = roleToConvert.RoleName,
        Users = new Collection<User>()
    };

    foreach (User user in roleToConvert.Users)
        roleToConvert.Users.Add(UserServices.ToDataModelUser(user));

    return role;
} 
```

如您所见，如果您运行此程序，您将收到堆栈溢出错误 b/c，我们将在尝试进行映射时从用户 >> 角色 >> 用户 >> 角色 >> 等进行。如果我不映射导航属性，我将无法在 Web 项目中访问它们。我有一种感觉，我在这里完全错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:41:29.420

您可以为方法创建重载`ToDataModelX`。传递 a`Boolean`以取消/激活从属对象的加载。与其总是加载角色的用户，不如仅在被指示时加载它们。

```
internal static Model.User ToDataModelUser(User userToConvert)
{
    return ToDataModelUser(userToConvert, true);
}

internal static Model.User ToDataModelUser(User userToConvert, Boolean loadRoles)
{
    if (userToConvert == null)
    {
        return null;
    }

    Model.User modelUser = new Model.User()
    {
        ....
        Roles = new Collection<Role>()
    };

    if (loadRoles)
    {    
        foreach (Role role in userToConvert.Roles)
            modelUser.Roles.Add(RoleServies.ToDataModelRole(role, false));
    }

    return modelUser;
}

internal static Model.Role ToDataModelRole(Role roleToConvert)
{
    return ToDataModelRole(roleToConvert, true);
}

internal static Model.Role ToDataModelRole(Role roleToConvert, Boolean loadUsers)
{
    if (roleToConvert == null) return null;

    Model.Role role = new Model.Role()
    {
        ....
        Users = new Collection<User>()
    };

    if (loadUsers) 
    {
        foreach (User user in roleToConvert.Users)
            roleToConvert.Users.Add(UserServices.ToDataModelUser(user, false));
    }

    return role;
} 
```

# javascript - 在 zendesk.com 上创建“浮动”顶部导航？

> ID：12043861
> 
> 赞同：0
> 
> 时间：2012-08-20T19:27:50.817
> 
> 标签：javascript, jquery, css, navigation, css-position

我想创建一个“浮动”顶部导航，就像在[这里](http://www.zendesk.com)看到的那样。

当向下滚动页面时，顶部导航当然会从浏览器窗口中消失，但它会回到视图中，并一直保持在顶部。

我可以看到 CSS 正在更改`div#nav-bar-content`，但我无法弄清楚这些样式何时应用于 JavaScript。

如果有人指出如何使用 jQuery 实现它，或者在[Zendesk](http://www.zendesk.com)源代码中我可以找到一个示例，那就太好了。

非常感谢您！

问候金

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:35:04.040

`scroll`您应该在每个事件上重新定位您的菜单。

```
<div class='menu'>Menu content</div> 
```

* * *

```
$(window).scroll(function(e) {

    if ($(window).scrollTop() > 20) // 20 - offset from the top
        $('.menu').css({
            position: 'fixed',
            top: '0'
        });
    else
        $('.menu').css({
            position: 'static'
        });
}); 
```

**更新：**以及使用 CSS 的静态解决方案：

```
div.menu {
    position: fixed;
    top: 10px;
    z-index: 5000;
} 
```

# database - 一个产品有一个价格，一个价格有一个产品 - 有没有休眠关系？

> ID：12043862
> 
> 赞同：0
> 
> 时间：2012-08-20T19:27:51.610
> 
> 标签：database, nhibernate, mapping, fluent

[我对“我认为你的意思是多对一”文章中](http://www.jagregory.com/writings/i-think-you-mean-a-many-to-one-sir/)的一对一关系解释有点恼火。

例如，在这种情况下，产品有一个价格，因为所讨论的业务规模小、利基市场、本地化并且只支持单一货币。在这种情况下，每种产品的多个价格没有意义吗？我怀疑我是否正确地掌握了这个概念，因为我读到的所有地方都说它可能是多对一的，即使你认为它不是？

有人可以启发我吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T20:35:25.240

为了获得更多声誉，以便我可以在评论中提供帮助而不是“答案” 一对多与一对一是这样的

查看一对一作为您正在查看的表格的扩展。

表 B 扩展了表 A。这意味着信息不一定足够相关以直接包含在表中，但彼此之间具有双向关系。基本上就是说作为A表，我不依赖B表的信息，但是B表的信息非常依赖我。对于价格示例，这意味着表 A 有一行与表 B 中的行相关。因此，如果您在价格表中围绕要匹配表 A 中的每个项目在价格表中输入唯一信息，那么这将很有用。就像说您在价格表中有一个关于该项目的描述列。否则，这种情况下的价格表可能与模式中的价格表无关。

in a one-to-many relationship Table B usually has no reference back to Table A. So in the case of price, the items you are looking at do have a price, but prices aren't exclusive to items. So to better define, A number of things may have the price 9.99, but 9.99 only needs to exist in your pricing table once.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:36:14.660

我对你提到的那篇文章不熟悉。然而，价格是一个缓慢变化的维度的典型例子。价格可能在任何时间点保持不变，但随着时间的推移，价格会发生变化。

此类维度通常通过确定相关期间的生效日期和结束日期来实施。

现在，在给定的时间点，一种产品可能只有一个价格。影响价格的因素——例如优惠券、购买者折扣、批量折扣——不是产品的属性。这些是交易的属性。

也就是说，在某些情况下，固定数量折扣可能没有意义。因此，产品的“价格”可能包括数量和时间。

无论如何，我同意你的观点，即价格不是 1-1 关系的好例子。还有其他因素，例如影响它的时间和数量。

# javascript - 如何在 JavaScript 中将鼠标指向某个角度

> ID：12043863
> 
> 赞同：2
> 
> 时间：2012-08-20T19:27:53.897
> 
> 标签：javascript, geometry, html5-canvas, trigonometry, angle

我一直在使用 JavaScript/HTML5 画布开发应用程序。这是一个带有一些代码的 JSFiddle，可以向您展示我在做什么：[JSFiddle](http://jsfiddle.net/howlermiller/JV7aR/)

正如您在小提琴中看到的，在创建两个点后，光标开始分别捕捉到 90° 和 180°。但是有一个错误，我不知道如何修复它。它完美地捕捉到 90°，除非您离最后创建的点太近，然后它会有点晃动。180° 捕捉是相同的，只是它比 90° 摇晃得更远。他们都使用相同的代码，所以我不知道为什么他们的行为不同，我也不知道如何摆脱这种摇摆。那么问题来了，让我试着解释一下我的一些代码。

我认为搞砸的部分就在顶部，`checkAngle`and`snapMouseToAngle`函数。

`checkAngle`非常简单，它采用最后两个创建的点和鼠标光标所在的点，测量它们的边长，并使用余弦定律测量当前角度（另外，我不是数学家，如果有更好的方法来做到这一点，那么请赐教）。

`snapMouseToAngle`稍微复杂一点。首先它检查当前鼠标预览是水平的还是垂直的。然后它检查角度，将 8 个像素（或我称之为一英尺）添加到当前预览坐标，然后再次检查角度。然后它通过`snap`函数（那个巨大的逻辑块）检查鼠标是否在`angleSnapDistance`. 如果是，则它从当前角度中减去它应该捕捉到的角度，并将该值放入`leftOver`. `leftOver`然后除以差值，给我们留下一个从鼠标位置减去的数字。

那么我做错了什么？我不知道是什么导致它像那样摇晃，但我肯定会感谢任何能告诉我如何解决它的人。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:59:07.307

设置 pxPerFoot = 1 会消除摆动。pxPerFoot 真的有必要吗？它为观察到的鼠标坐标增加了抖动。干得好，不过！

# c# - 是否可以在不先执行查询的情况下更新 WCF 数据服务 (oData) 实体？

> ID：12043864
> 
> 赞同：3
> 
> 时间：2012-08-20T19:27:55.663
> 
> 标签：c#, entity-framework, wcf-data-services, odata, windows-phone

我一直在为这个问题绞尽脑汁，也许我没有正确看待它。

我有一个服务器端架构，看起来像这样 SQL Server --> EF --> WCF Data Service (oData)

有没有一种方法可以在不首先查询服务器的情况下更新服务器端实体。

从我读过的所有文档中，似乎需要查询才能将实体添加到上下文中以进行跟踪。一旦被跟踪，就可以对实体进行更改，然后可以调用 BeginSaveChanges 来执行更新。

我正在从 Windows Phone 应用程序访问我的 oData 服务，在该应用程序中，我将服务器实体（及其 ID）作为 POCO 对象存储在隔离存储中。我不存储从 WCF 代理客户端创建的 DTO。

我不想先查询实体，以节省带宽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T20:06:51.503

是的，您需要创建一个虚拟实体，然后附加并保存它。

例如

```
using(var ctx = new MyContext())
{
   var dummyEntity = new MyEntity{ Id = 1 };
   ctx.MyEntities.Attach(dummyEntity); // EF now knows you have an entity with ID 1 in your db but none of its properties have changed yet
   dummyEntity.SomeProperty = 1; //the change to SomeProperty is now tracked
   ctx.SaveChanges();// a single update is called to set entity with Id 1's 'SomeProperty' to 1  
} 
```

但是，这有一些问题，如果您有任何其他具有相同 ID 的实体附加到您的上下文，则附加将失败。因此，在执行此类操作时，最好将上下文的范围保持在非常小的范围内。

# javascript - 将 JSON 对象成员字符串值连接在一起

> ID：12043865
> 
> 赞同：5
> 
> 时间：2012-08-20T19:28:04.490
> 
> 标签：javascript, jquery, json, jsonp

```
"category": [{
      "id": 28,
      "name": "Dogs"
  },
  {
      "id": 14,
      "name": "Cats"
  },
  {
      "id": 878,
      "name": "Sheep"
  }], 
```

我已经解析了上面的 JSON（使用 .ajax 和 jsonp 作为回调），我想将“name”的所有值加入一个字符串。即“狗、猫、羊”。我怎样才能做到这一点？我尝试过简单地加入“类别”和名称，即

```
var cats = categories.join(", "); 
```

或者

```
var cats = categories.name.join(", "); 
```

但是由于我们正在查看它的成员及其字符串值，所以它不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T19:37:28.183

这看起来像是一份工作`$.map`！

```
var data = {
    "category": [{
          "id": 28,
          "name": "Dogs"
      },
      {
          "id": 14,
          "name": "Cats"
      },
      {
          "id": 878,
          "name": "Sheep"
      }]
}

var cats = $.map(data.category, function(v){
    return v.name;
}).join(', '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:33:29.300

```
var text = "";
for(var i=0; category.length; i++)
{
   text += category[i].name;
   if(i!=category.length-1)
       text += ", ";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-02T06:05:18.950

更简单、更短的版本：

```
const category = [{
      "id": 28,
      "name": "Dogs"
  },
  {
      "id": 14,
      "name": "Cats"
  },
  {
      "id": 878,
      "name": "Sheep"
  }] 
```

```
let cats = category.map((item) => {
             return item.name;
           }).join(", "); 
```

在第一部分，map 函数将返回一个包含内容的字符串数组`item.name`。

```
[ "Dogs", "Cats", "Sheep" ] 
```

因为在数组上，我们有能力调用`join`它将把数组中的所有项目放在一起，但由我们传递给的任何内容分隔`join`（在这种情况下，我们`", "`将用逗号和空格分隔）

最后我们有：

```
Dogs, Cats, Sheep 
```

# ajax - js 文件中的 Json 调用返回 NetworkError: 404 Not Found

> ID：12043869
> 
> 赞同：0
> 
> 时间：2012-08-20T19:28:29.470
> 
> 标签：ajax, json, knockout.js, asp.net-mvc-4

我在我的应用程序中使用 asp.net mvc 4, knockout-js。我想问一下如何从js文件调用控制器？

当我将此代码写入视图（剃刀）页面时，它可以工作：

```
<script type="text/javascript">
    $(document).ready(function () {
        var url = '@Url.Action("GetTechnicians", "Ticket")';
        $.post(url, null, function (data) {                    
            alert("get data");
        });
    });     
</script> 
```

现在我想在 *.js 文件中进行调用。问题是`Url.Action`在 js 文件中无效。

我在 global.asax 中的 url 映射是：`"{culture}/{controller}/{action}/{id}",` 我的控制器的签名看起来像： `public JsonResult GetTechnicians()`

当我在 js 文件中使用时：

```
var url = "/Ticket/Technicians"; 
```

我收到一个错误：`"NetworkError: 404 Not Found - http://localhost/Ticket/Technicians"`

我想知道如何完成从js文件的调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:09:13.253

您可以执行以下操作...

在你的 JS 文件中

```
var app = {
  urls: {
    getTechnicians: null
  },
  culture: "en",
  getTechnicians: function () {
        if (!app.urls.getTechnicians) {
          throw new Error("getTechnicians URL not set");
        }
        $.post("/" + app.culture + app.urls.getTechnicians, null, function (data) {                    
            alert("get data");
        });
  }
}; 
```

在你看来

```
<script type="text/javascript" src="myscriptfile.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
     app.urls.getTechnicians = '@Url.Action("GetTechnicians", "Ticket")';
     app.culture = "en-us";

     // Later on...
     app.getTechnicians();

    });     
</script> 
```

# php - 检查字符串中是否有 5 位数字

> ID：12043870
> 
> 赞同：-8
> 
> 时间：2012-08-20T19:28:33.297
> 
> 标签：php, search, expression

```
$st1='dsdsdsd 97537 sdsdd dsddd';
$st2='fdsf 23e  sdsd 434  432443454';
$st3='fdf97537 ds344dsddd'; 
```

我想检查字符串中是否有 5 位数字。

st1-- 有 5 位数字

st2---不是

st3-- 有 5 位数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:40:16.737

`preg_match()`用or试试这个正则表达式`preg_match_all()`

```
preg_match("/\b[^\d]*\d{5}[^\d]*\b/", $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:32:33.853

一个简单的正则表达式就可以完成这项工作。

```
preg_match('/\d{5}/', $input) 
```

另见[http://www.php.net/preg_match](http://www.php.net/preg_match)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:35:36.653

假设每个要检查的元素是否是五位数字，在字符串中用空格分隔。因此，您可以使用`explode`函数将字符串转换为子字符串数组。接下来，您可以使用`is_numeric`函数来检查这是否是数字以及检查该子字符串是否为五长。您也可以为此使用正则表达式。

在这里，RegEx 要好得多。当我看到@Matt 的回答符合这些要求时，我的评论将是不必要的。

# java - Java 泛型：通配符捕获误解

> ID：12043874
> 
> 赞同：22
> 
> 时间：2012-08-20T19:28:52.173
> 
> 标签：java, generics, wildcard

阅读 Java 在线教程，我对通配符捕获一无所知。例如：

```
 import java.util.List;
    public class WildcardError {
     void foo(List<?> i) {
      i.set(0, i.get(0));
     }
    } 
```

为什么编译器不能保持赋值安全？

它知道，例如，通过执行带有`Integer`List 的方法，它会从`i.get`一个`Integer`值中获取。因此它尝试将`Integer`索引`0`处的值设置为相同的整数列表（`i`）。

那么，怎么了？为什么要写通配符助手？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T19:59:20.297

> 为什么编译器不能保持赋值安全？它知道，例如，通过执行带有 Integer List 的方法，它会从 i.get 获取一个 Integer 值。因此它尝试将索引 0 处的整数值设置为相同的整数列表 (i)。

换句话说，为什么编译器不知道通配符类型的两种用法`List<?>`在

```
i.set(0, i.get(0)); 
```

指的是相同的实际类型？

那么，这将要求编译器知道`i`对于表达式的两个评估包含相同的实例。由于`i`它甚至不是最终的，编译器必须检查是否`i`可能在计算两个表达式之间进行了赋值。这种分析只对局部变量很简单（谁知道调用的方法是否会更新特定对象的特定字段？）。这在编译器中是相当多的额外复杂性，因为它很少表现出好处。我想这就是为什么 Java 编程语言的设计者通过指定相同通配符类型的不同用途具有不同捕获来保持简单的原因。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-20T19:32:46.077

> 为什么编译器不能保持赋值安全？

根据的定义，编译器对 中的元素类型*一无所知*。通配符并不*意味着*“任何类型”；它的意思是“某种未知的类型”。`List<?> i``?`

 *> 它知道，例如，通过执行带有 Integer List 的方法，它会从 i.get 获取一个 Integer 值。

这是真的，但正如我上面所说：编译器*只能*知道——在**编译时**，记住——`i.get(0)`返回一个`Object`，它是 的上限`?`。但是不能保证`?`在*运行时* `Object`，所以编译器无法知道这`i.set(0, i.get(0))`是一个安全的调用。就像这样写：

```
List<Foo> fooz = /* init */;
Object foo = fooz.get(0);
fooz.set(0, foo); // won't compile because foo is an object, not a Foo 
```

### 更多阅读：

*   [无法使用通配符泛型类型向 Java 集合添加值](https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type)
*   [使用通配符的 Java 集合](https://stackoverflow.com/questions/69702/java-collections-using-wildcard)
*   [java中的通用集合和通配符](https://stackoverflow.com/questions/7363170/generic-collection-wildcard-in-java)
*   [泛型 - 无法使用无界通配符添加到列表](https://stackoverflow.com/questions/9637125/generics-cannot-add-to-a-list-with-unbounded-wildcard)
*   [Collection<?> 和 Collection<T> 有什么区别](https://stackoverflow.com/questions/10777701/what-is-the-difference-betwen-collection-and-collectiont)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-11T19:29:11.377

根据Get-Put原理：

1.  如果您在 中具有扩展通配符`List<? extends Something>`，则：

    1A。您可以从结构中获取使用`Something`或其`superclass`参考。

    ```
    void foo(List<? extends Number> nums) {
       Number number = nums.get(0); 
       Object number = nums.get(0); // superclass reference also works.
    } 
    ```

    1B。您不能向结构中添加任何内容（除了`null`）。

    ```
    void foo(List<? extends Number> nums) {
       nums.add(1); Compile error
       nums.add(1L); Compile error
       nums.add(null); // only null is allowed.
    } 
    ```

2.  同样，如果你有超级通配符`List<? super Something>`，那么：

    2A。您可以添加到结构 which is`Something`或其`subclass`. 例如：

    ```
    void foo(List<? super Number> nums) {
        nums.add(1); // Integer is a subclass of Number
        nums.add(1L); // Long is a subclass of Number
        nums.add("str"); // Compile error: String is not subclass of Number         
    } 
    ```

    2A。您无法从结构中获取（通过对象引用除外）。例如：

    ```
    void foo(List<? super Integer> nums) {
        Integer num = nums.get(0); // Compile error
        Number num = nums.get(0); // Compile error
        Object num = nums.get(0); // Only get via Object reference is allowed.        
    } 
    ```

回到 OP 的问题，`List<?> i`只是`List<? extends Object> i`. 而且由于它是`extends`通配符，因此`set`操作失败。

剩下的最后一块是为什么操作失败？或者为什么首先要使用 Get-Put 原则？- 这与 Jon Skeet[在这里](https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type)回答的类型安全有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-13T13:26:28.223

解决方案将是，

```
import java.util.List;

    public class WildcardError {

    private void fooHelper(List<T> i){
         i.set(0, i.get(0));
    }
    public void foo(List<?> i){
         fooHelper(i);
    }
} 
```

这里 fooHelper 将捕获类型 T 的通配符？（如名称通配符捕获）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-23T15:59:04.977

我也觉得这个问题很难理解；将单个命令分成两个命令对我有帮助。

下面的代码是在检查和编译原始方法时在后台实际发生的情况，编译器生成自己的局部变量：`i.get(0)`调用的结果放在局部变量堆栈上的寄存器中。

那就是——为了理解这个问题——与制作一个局部变量相同，为方便起见，我给出了这个名称`element`。

```
import java.util.List;
public class WildcardError {
 void foo(List<?> i) {
  Object element = i.get(0);  // command 1
  i.set(0, element);          // command 2
 }
} 
```

检查命令 1 时，它只能将类型设置`element`为`Object`（--> 上限概念，参见马特的回答），因为它不能`?`用作变量类型；仅用于`?`指示泛型类型未知。

变量类型只能是真实类型或泛型类型，但由于您在此方法中不使用泛型类型，`<T>`例如，它**被迫**使用真实类型。由于 java 规范 (jls8, 18.2.1) 中的以下行，执行此强制：

> ‹Expression → T›形式的约束公式简化如下：
> 
> [...]
> 
> — 如果表达式是类实例创建表达式或方法调用表达式，则约束减少到绑定集 B3，当以 T 为目标时，约束集将用于确定表达式的调用类型，如第 18.5.2 节中定义的那样。（对于类实例创建表达式，用于推理的相应“方法”在 §15.9.3 中定义）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-13T14:14:15.187

我想你误解了`?`泛型。它不是运行时的“通配符捕获”。它是编译时的“通配符捕获”。由于该捕获在编译后消失了，因此`List<?>`通常会成为`List<Object>`某个接口或公共基类的列表，这些接口或公共基类是根据泛型类型在实例之间共享的最低子类。

因为 Java 必须使泛型系统与支持 JVM 的非泛型系统兼容，所以在运行时没有泛型类型。这意味着在运行时不存在所有检查/捕获。编译器在编译时允许非常窄范围的兼容泛型类型分配，或者抛出错误。

现在，如果您想在运行时保存一个泛型类型，有一些方法。其中大多数涉及将 Class 对象作为参数传递给构造函数，构造函数将其保存在字段中。然后您可以参考该字段以获取确切传递的类型。您可以将此类型与您的泛型参数纠缠在一起；并且通过这样做，您可以在运行时代码中的“泛型类型参数”已被真实 Java 类型系统支持的最宽松类型替换的地方拥有实际类型。我不建议在很多情况下这样做，因为它需要做很多工作（而且不太可能给你更多的安全性）；但是，有时你确实需要这种类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-07T05:32:34.697

我猜你对限制的误解来自于替换`?`for `any type`，`Object`或者你脑海中的类似东西。但这种假设并不正确，`?`实际上意味着`unknown type`。所以在下面一行

```
fooz.set(0, foo); 
```

您正在尝试将某种类型的变量分配给未知类型的变量（因为函数签名就像`void set(int, ?)`），无论是哪种类型，`foo`这都是不可能的。在您的情况下， foo 的类型是`Object`并且您不能将其分配给某种未知类型的变量，实际上可能是`Foo`，`Bar`或任何其他类型。*

# c# - ArgumentNullException - 如何简化？

> ID：12043875
> 
> 赞同：21
> 
> 时间：2012-08-20T19:28:52.350
> 
> 标签：c#, exception

我注意到这段代码在我的构造函数中出现了很多：

```
if (someParam == null) throw new ArgumentNullException("someParam");
if (someOtherParam == null) throw new ArgumentNullException("someOtherParam");
... 
```

我有几个构造函数，其中注入了一些东西，并且都必须是非空的。任何人都可以想出一种方法来简化这个吗？我唯一能想到的是以下几点：

```
public static class ExceptionHelpers
{
   public static void CheckAndThrowArgNullEx(IEnumerable<KeyValuePair<string, object>> parameters)
   {
      foreach(var parameter in parameters)
         if(parameter.Value == null) throw new ArgumentNullException(parameter.Key);
   }
} 
```

但是，它的用法类似于：

```
ExceptionHelper.CheckAndThrowArgNullEx(new [] {
    new KeyValuePair<string, object>("someParam", someParam),
    new KeyValuePair<string, object>("someOtherParam", someOtherParam),
    ... }); 
```

...这并不能真正帮助简化代码。Tuple.Create() 而不是 KVP 不起作用，因为 Tuple 的 GTP 不是协变的（即使 IEnumerable 的 GTP 是协变的）。有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T19:56:34.510

**C# 7 的更新**

您可以将[throw 表达式](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#throw-expressions)与 null 合并运算符一起使用。这是该页面的示例：

```
public string Name
{
    get => name;
    set => name = value ?? 
        throw new ArgumentNullException(paramName: nameof(value), message: "New name must not be null");
} 
```

**原始答案**

就个人而言，我使用`ThrowIfNull`扩展方法。我不知道该归功于谁，但绝对[不是我发明](http://www.google.com/search?q=throwifnull)的。这很好，因为您可以使用返回值进行赋值：

```
public static T ThrowIfNull<T>(this T argument, string argumentName)
{
    if (argument == null)
    {
        throw new ArgumentNullException(argumentName);
    }
    return argument;
} 
```

用法：

```
this.something = theArgument.ThrowIfNull("theArgument");
// or in C# 6
this.something = theArgument.ThrowIfNull(nameof(theArgument)); 
```

（虽然有些人认为在空实例上调用扩展方法很奇怪）

如果您真的想一次检查多个参数，如果您使用`params`这样的签名，您的示例可能会更加简化：

```
public static void CheckAndThrowArgNullEx(params object[] argsAndNames)
{
    for (int i = 0; i < argsAndNames.Length; i += 2)
    {
        if (argsAndNames[i] == null)
        {
            string argName = (string)argsAndNames[i + 1];
            throw new ArgumentNullException(argName);
        }
    }
} 
```

用法是：

```
CheckAndThrowArgNullEx(arg1, "arg1", arg2, "arg2");
// or in C# 6
CheckAndThrowArgNullEx(arg1, nameof(arg1), arg2, nameof(arg2)); 
```

* * *

再想一想，正如 KeithS 在评论中提到的那样，最好将其实现为一组重载，而不是`params object[]`像这样使用：

```
static void Check(object arg1, string arg1Name) { ... }
static void Check(object arg1, string arg1Name, object arg2, string arg2Name) { ... }
// and so on... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-06T17:03:00.197

试试这个：一条线。

```
accounts = accounts ?? throw new ArgumentNullException(nameof(accounts)); 
```

此外，使用`nameof()`，如果变量被重命名，您将不必寻找所有“变量”，让我们`nameof()`这样做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-11-06T08:19:48.477

## .NET 6 及更高版本

.NET API 中 有一个[新方法](https://docs.microsoft.com/en-us/dotnet/api/system.argumentnullexception.throwifnull?view=net-6.0)`ArgumentNullException.ThrowIfNull(someParameter)`。

这种方法可能是您可以获得的最佳选择。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-20T19:31:26.727

有几种方法可以解决这个问题。

选项 A：

将您的函数分成两部分 - 验证和实现（您可以在 Jon Skeet 的[EduLinq](https://codeblog.jonskeet.uk/category/edulinq/)中看到这方面的示例）。

选项 B：

使用期望参数为非空的[代码协定。](http://research.microsoft.com/en-us/projects/contracts/)

选项 C：

使用代码编织等面向方面的技术将这些检查提取到一个方面。（正如 J Torres[回答](https://stackoverflow.com/a/12043907/1583)的那样）。

选项 D：

使用[Spec#](http://research.microsoft.com/en-us/projects/specsharp/)，正如 CodeInChaos[评论](https://stackoverflow.com/users/445517/codesinchaos)的那样。

选项 E：

？？？

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-20T20:41:31.777

对你们大多数人来说都是上升的；您的回答促成了我最终得出的解决方案，该解决方案包含了点点滴滴，但最终与所有这些都不同。

我创建了几个静态方法，它们适用于特定形式的 lambda 表达式（**编辑**- 小的变化；这些方法不能是通用的，否则它们将要求所有表达式返回相同的类型。Func 很好，但有一个额外的条件在 GetName 方法中解开演员表）：

```
public static class ExpressionReader
{
    /// <summary>
    /// Gets the name of the variable or member specified in the lambda.
    /// </summary>
    /// <param name="expr">The lambda expression to analyze. 
    /// The lambda MUST be of the form ()=>variableName.</param>
    /// <returns></returns>
    public static string GetName(this Expression<Func<object>> expr)
    {
        if (expr.Body.NodeType == ExpressionType.MemberAccess)
            return ((MemberExpression) expr.Body).Member.Name;

        //most value type lambdas will need this because creating the 
        //Expression from the lambda adds a conversion step.
        if (expr.Body.NodeType == ExpressionType.Convert
                && ((UnaryExpression)expr.Body).Operand.NodeType 
                     == ExpressionType.MemberAccess)
            return ((MemberExpression)((UnaryExpression)expr.Body).Operand)
                   .Member.Name;

        throw new ArgumentException(
           "Argument 'expr' must be of the form ()=>variableName.");
    }
}

public static class ExHelper
{
    /// <summary>
    /// Throws an ArgumentNullException if the value of any passed expression is null.
    /// </summary>
    /// <param name="expr">The lambda expressions to analyze. 
    /// The lambdas MUST be of the form ()=>variableName.</param>
    /// <returns></returns>
    public static void CheckForNullArg(params Expression<Func<object>>[] exprs)
    {
        foreach (var expr in exprs)
            if(expr.Compile()() == null)
                throw new ArgumentNullException(expr.GetName());
    }
} 
```

...可以这样使用：

```
//usage:

ExHelper.CheckForNullArg(()=>someParam, ()=>someOtherParam); 
```

这将样板文件减少到一行，无需第三方工具。ExpressionReader 以及异常生成方法适用于在调用者中编译的 ()=>variableName 形式的任何 lambda，这意味着它至少适用于局部变量、参数、实例字段和实例属性。我还没有检查它是否适用于静力学。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-20T19:57:30.387

```
public class TestClass
{
    public TestClass()
    {
       this.ThrowIfNull(t=>t.Str, t=>t.Test);
       //OR
       //this.ThrowIfNull(t => t.X)
       //    .ThrowIfNull(t => t.Test);
    }
    string Str = "";
    public TestClass Test {set;get;}
}

public static class SOExtension
{
    public static T ThrowIfNull<T>(this T target, params Expression<Func<T, object>>[] exprs)
    {
        foreach (var e in exprs)
        {
            var exp = e.Body as MemberExpression;
            if (exp == null)
            {
                throw new ArgumentException("Argument 'expr' must be of the form x=>x.variableName");
            }

            var name = exp.Member.Name;
            if (e.Compile()(target) == null)
                throw new ArgumentNullException(name,"Parameter [" + name + "] can not be null");

        }
        return target;
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-11-28T11:48:43.720

在 c# 10 中，您可以这样做：

```
ArgumentNullException.ThrowIfNull(z); 
```

你会得到这个错误：

```
System.ArgumentNullException: Value cannot be null. (Parameter 'z')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at ConsoleApp1.SomeClass.Join(String a, String b) 
```

在底层，它使用新的[CallerArgumentExpression](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-10.0/caller-argument-expression)属性。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-03-19T15:19:18.603

在 c# 7 中可以这样做：

```
_ = someParam ?? throw new ArgumentNullException(nameof(someParam)); 
```

发布优化后您将获得：

```
if (someParam == null)
    throw new ArgumentNullException(nameof(someParam)); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-20T19:31:27.640

如果您不反对第三方实用程序，PostSharp 提供了注入此类验证的简洁方法。 [这篇博文](http://badecho.com/2012/04/wrapping-up-parameter-validation-using-postsharp/)为您的问题提供了解决方案。

更新：查看[PostSharp 3 中的新验证参数功能](http://www.postsharp.net/blog/post/Validating-parameters-field-and-properties-in-PostSharp-3.aspx)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-20T19:42:03.507

好吧，样板是很难避免的。您可以改用 Bertrand Meyers 的[Eiffel 编程语言](http://en.wikipedia.org/wiki/Eiffel_%28programming_language%29)和[EiffelStudio](http://www.eiffel.com/products/)，而不是 C# 和 Visual Studio，并开始练习“[按合同设计^™](http://www.eiffel.com/developers/design_by_contract_in_detail.html) ”。

如今，Eiffel 完全符合 CLR 标准。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-20T19:34:45.373

扩展方法怎么样？

```
public static void ThrowExceptionIfNull(this object argument, string argumentName)
{
    if(argument == null)
        throw new ArgumentNullException(argumentName);
} 
```

然后你的代码至少读起来更流利一点：

```
someParam.ThrowExceptionIfNull("someParam"); 
```

否则，我会同意其他人拆分功能或使用 AOP（即 PostSharp）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-20T20:33:48.223

已经有很多有效的解决方案，但这是我的看法：

```
using System.Diagnostics;
using System.Reflection;

public SomeConstructor(int? par1, int? par2, string par3)
{
    CheckThrowNull(par1, par2, par3);
    //rest of constructor code...
}

///<param name="values"> Values must be given in order </param>
public static void CheckThrowNull(params object[] values)
{
    StackTrace stackTrace = new StackTrace();
    ParameterInfo[] parameters = stackTrace.GetFrame(1).GetMethod().GetParameters(); //get calling method's parameters (or constructor)
    if (parameters.Length != values.Length)
    {
        throw new ArgumentException("Incorrect number of values passed in");
    }
    for (int i = 0; i < parameters.Length; i++)
    {
        if (values[i] == null)
        {   
            //value was null, throw exception with corresponding parameter name
            throw new ArgumentNullException(parameters[i].Name);
        }
    }
} 
```

总体思路是建立两个并行数组，一个是 ParameterInfo 类型，一个包含参数的值。后者必须传入，因为参数值不容易（而且我认为不可能）通过反射获得。为了给予应得的荣誉，我在这里找到了如何获取调用方法：[http ://www.csharp-examples.net/reflection-calling-method-name/](http://www.csharp-examples.net/reflection-calling-method-name/)

就个人而言，除了调试之外，我不喜欢使用 System.Diagnosics，所以我会稍作修改，调用代码为：

```
CheckThrowNull(MethodBase.GetCurrentMethod(), par1, par2, par3); 
```

和方法是

```
CheckThrowNull(MethodBase method, params object[] values)
{
    ParameterInfo[] parameters = method.GetParameters();
    //rest of code same
} 
```

不利的一面是它有点不可扩展，并且不能轻易检查是否只有一些参数为空。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-07-06T18:52:20.187

我编写了具有多种提取参数名称的基准应用程序（通过**匿名类 + 反射**/ **MemberExpression** / **Func** / 等）

基准测试源的 Github 链接：[https ://github.com/iXab3r/NullCheckCompetition](https://github.com/iXab3r/NullCheckCompetition)

我得到的结果表明，最快的方法是使用匿名类。

**.NET 40 / X64**

失败（即参数为空且执行名称提取方法）

*   *失败*AnonymousClass **67.87 ns**
*   *失败*DoubleLambda 643.98 ns
*   *失败*LazyAnonymousClass 69.36 ns
*   *未通过RawCheck* 1.08 ns
*   *失败*SingleLambda 643.27 ns

成功（即参数不为空）

*   SuccessAnonymousClass **6.33 ns**
*   SuccessDoubleLambda 8.48 ns
*   SuccessLazyAnonymousClass 8.78 ns
*   SuccessRawCheck 1.08 ns
*   SuccessSingleLambda 628.28 ns

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-15T15:04:32.027

C# 10 (.NET >= 6) 的更新：

```
_person = person.ThrowIfNull();

public static T ThrowIfNull<T>(this T? argument, string? message = default, [CallerArgumentExpression("argument")] string? paramName = default)
{
    return argument ?? throw new ArgumentNullException(paramName, message);
} 
```

参考： [https ://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-10.0/caller-argument-expression](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-10.0/caller-argument-expression)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-09T08:28:47.573

我认为以上大部分内容都可以，但它们都不是对你已有的东西的真正改进，所以我会选择 KIS，保持简单，这就是你开始的。

它干净、易读且速度快。唯一有点长

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-07-26T10:43:06.057

实际上可以从 lambda 表达式中检索参数名称，而无需通过 Expression 类型。这是可以做到的：

```
static void SampleMethod(string arg1)
{
    ThrowIfNull(() => arg1);
    // continue to other normal stuff here...
}

public static void ThrowIfNull<T>(Func<T> lambda) 
    where T : class
{
    if (lambda() == null)
    {
        throw new ArgumentNullException(lambda.Target.GetType().GetFields()[0].Name);
    }
} 
```

# javascript - Javascript 公共成员无法访问

> ID：12043879
> 
> 赞同：0
> 
> 时间：2012-08-20T19:29:11.727
> 
> 标签：javascript, object, member

我有一个非常简单的结构：

```
var FORMS = [];

function FormObject(type)
{
    this.FormId = FORMS.length;
    //alert(this.FormId); returns results 0 and 1 respectively.
    this.Type = type;
    FORMS.push(FormObject); 
    this.generate = generate();
}

function generate()
{
    return 5;
} 
```

然后我做这样的事情：

```
var new_form = new FormObject('fruit');
var another  = new FormObject('vegetable');
alert(another.FormId);//as expected, I get 1 as a result 
```

然后最后尝试做这样的事情：

```
alert(FORMS.length);//result is 2 so I assume the objects got created successfully
alert(FORMS[0]);//prints the whole code of the constructor into the dialog box 
```

但是，当我尝试这样的事情时：

```
alert(FORMS[0].FormId);//result is undefined!!!
alert(FORMS[0].generate());//it shows an error that the object does not have such method 
```

**为什么它是未定义的？**我尝试阅读[http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)它说：

```
Patterns

Public

function Constructor(...) {
    this.membername = value;
}
Constructor.prototype.membername = value; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T19:31:52.607

代替：

```
FORMS.push(FormObject); 
```

和

```
FORMS.push(this); 
```

当你推送`FormObject`对象时，你推送的是构造函数，而不是实例。

# objective-c - 对我的 3 个选项卡使用共享的 TableView

> ID：12043881
> 
> 赞同：1
> 
> 时间：2012-08-20T19:29:23.280
> 
> 标签：objective-c, xcode

我想对我的 3 个选项卡使用相同的 TableView，而不是使用 3 个相同的 TableView。我创建了三个导航控制器（每个选项卡一个）并将它们链接到同一个表视图控制器但是如果我使用如下图所示的情节提要运行应用程序，它适用于第一个共享选项卡，但对于另外两个我在 tableView 应该在的地方出现黑屏。所以我想知道是否有可能让它与这个设置一起工作？

![在此处输入图像描述](../Images/7f249ad99e3848b00410fae4c903236d.png)

我正在尝试这个，所以我不必在 tableview 中进行 3 次微小的更改。这 3 个选项卡也填充了相同的数据，只是过滤方式不同，所以只需根据哪个父导航控制器过滤数组我想会很简单..但我需要知道这是否是共享视图的一种可能方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:58:38.453

我会建议一种不同的方法。只需三个不同的表格视图。但是由于问题不在于正确的方法，我想说最好的方法是通过代码来完成，从超级视图（视图控制器的视图）中删除 tableview 并将其移动到新的视图控制器当来自 tabbarcontroller 的委托被调用时。请记住，您还必须为每个视图控制器分配委托和数据源。

# c# - 带有 Google Drive API 的 C# Winform 应用程序。自动登录的方法？

> ID：12043884
> 
> 赞同：0
> 
> 时间：2012-08-20T19:29:35.113
> 
> 标签：c#, google-drive-api

我正在用 C# 创建一个桌面应用程序，它将作为备份程序。我想要做的是允许用户创建一个备份应该发生的时间表。我创建了一个在后台运行的 Windows 服务，它将根据这个时间表运行。

现在，我的程序会将用户选择的文件复制到另一个本地用户选择的文件夹中。但是，我想扩展它以允许用户按计划将他们的文件备份到云中，特别是他们的 Google Drive 帐户。

不过，我不确定这是否可能，或者如何去做。我有代码可以将文件上传到云端硬盘帐户，但是，这需要用户每次运行我的程序时都授予权限。我的问题是，我怎样才能做到这一点自动完成？有没有办法让用户输入他的登录凭据一次，然后允许程序自动访问他们的云端硬盘帐户，而无需他们每次都授予权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:56:37.987

您需要将用户的访问令牌存储在某处，并在您进行备份时使用它来请求新的短期访问令牌。来自 Google Drive API 文档：

> Google Drive 应用程序仅在第一次交换授权码时才会收到长期刷新令牌。此刷新令牌用于在短期访问令牌过期后请求新的访问令牌，并且必须将其存储在应用程序的数据库中，以便每次用户返回应用程序时进行检索。

[请参阅此处的文档以在您的应用程序中设置 OAuth](https://developers.google.com/drive/examples/dotnet#setting_up_the_client_id_client_secret_and_other_oauth_20_parameters)

# javascript - 将纪元时间转换为人类可读时间

> ID：12043885
> 
> 赞同：0
> 
> 时间：2012-08-20T19:29:43.233
> 
> 标签：javascript, date, time, epoch

有谁知道是否只有一种 JavaScript 方法可以将纪元数字转换为人类可读的日期？我有这个代码，但我不断收到一个号码。如果可能，我想将此数字转换为人类可读的日期（例如：2012/3/23）。

这是我用于代码的资源... [http://www.epochconverter.com/programming/](http://www.epochconverter.com/programming/)

玩我的 jsfiddle ... [http://jsfiddle.net/4FSEp/](http://jsfiddle.net/4FSEp/)

```
var myDate=new Date();

myDate = myDate.setFullYear(2012,3,23);

document.write(myDate);

document.write(myDate.toGMTString()+"<br>"+myDate.toLocaleString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:31:34.690

改变

```
myDate = myDate.setFullYear(2012, 3, 23); 
```

到

```
myDate.setFullYear(2012, 2, 23); 
```

（*编辑*-哇，我不知道`setFullYear()`也可能需要一个月和一天中的一天:-)

这些例程会修改日期对象，因此无需重新分配。

*编辑*——如果你有一个日期，并且你想把它移到那个日期前五天，你可以这样做：

```
myDate.setDate( myDate.getDate() + 5 ); 
```

# jquery - 带有多个分类 div 框的 jQuery Cookie

> ID：12043886
> 
> 赞同：1
> 
> 时间：2012-08-20T19:29:46.217
> 
> 标签：jquery, css, class, html, cookies

我目前拥有一个成就站点，用户可以在其中查看成就（存储在所有样式为**.unselect**的 div 框中），然后在使用 jQuery 单击时更改为样式**.select 。**这还会在页面的右上角添加一个计数，以便用户可以看到他们选择了多少。

我现在要做的是通过 cookie 记住这些选定的框，以便当用户重新加载或返回页面时，他们之前选择的框仍然保留在那里，以及数量。

我一直在尝试整夜试图让这个工作，并在这里查看所有修复它的答案都是为了隐藏 div 类，而不是简单地改变样式，我修改它们的尝试几乎失败了.

这是迄今为止我编写的 HTML 部分的缩短版本：

```
<body>

    <div id="header">
        <h1>Header Title here</h1>
        <p class="navigation">Some navigation links</p>
    </div>

    <div id="counter">
        <h1>Counted:</h1>
        <p class="numCount">0</p>
    </div>

    <div id="container">

        <h2>Plus Achievements</h2>

        <div class="unselect">
            <table width="100%" border="0" cellpadding="6">
                <tr>
                    <td width="64" valign="middle">
                        <img src="http://dl.dropbox.com/u/1733724/tf2icons/tf_complete_training.png"/>
                    </td>
                    <td valign="top" align="left">
                        <h3>Title Here</h3>
                        <p>Description Here</p>
                    </td>
                </tr>
            </table>
        </div>

        <div class="unselect">
            <table width="100%" border="0" cellpadding="6">
                <tr>
                    <td width="64" valign="middle">
                        <img src="http://dl.dropbox.com/u/1733724/tf2icons/tf_complete_training.png"/>
                    </td>
                    <td valign="top" align="left">
                        <h3>Title Here</h3>
                        <p>Description Here</p>
                    </td>
                </tr>
            </table>
        </div>

        <script>

            $(".unselect").click(function() {
                $(this).toggleClass("select");

                var numSelect = $('.select').length
                $('#counter').html('<h1>Counted:</h1><p class="numCount">' + numSelect + '</p>');
            });

        </script>

</body>

</html> 
```

您可以在此处访问我用来设置页面样式的文档：http: [//dl.dropbox.com/u/1733724/cgl-pascal.css](http://dl.dropbox.com/u/1733724/cgl-pascal.css)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:54:00.310

为了简化，使用[jquery cookie 插件](https://github.com/carhartl/jquery-cookie)，其余的应该很容易。

这是一个[演示](http://jsfiddle.net/unloco/5AxV2/2/)
，您必须为每个 div 添加特定的 ID

```
<div class="unselect" id="div1"></div>
<div class="unselect" id="div2"></div>
...

var selectedDivs = $.cookie("selected");//get the cookie
if(selectedDivs){
    var IDs = selectedDivs.split(' '); //split by space and get array of IDs
    for(i=0;i<IDs.length;i++){
     var ID = IDs[i];
     if(ID) $('.unselect'+ID).toggleClass("select"); //select only the specific ID            
    }
    $('#counter').html('<h1>Counted:</h1><p class="numCount">' +    $('.select').length + '</p>');
} 
```

那么你应该添加到处理程序

```
 var selectedDivs = "";
 $('div.select').each(function(){
     selectedDivs += " #" + $(this).attr('id');//add the ID with a space
 });
 $.cookie("selected",selectedDivs, { expires: 30 }); //store all selected IDs 
```

# java - 使用 java 和端口发送文件

> ID：12043887
> 
> 赞同：0
> 
> 时间：2012-08-20T19:30:05.137
> 
> 标签：java, networking

我正在阅读这个问题的答案： [如何使用 Java 通过网络将文件从一台计算机传输到另一台计算机？](https://stackoverflow.com/questions/1109307/how-to-transfer-files-from-one-computer-to-another-over-the-network-using-java)

我不明白 jjnguy 的部分答案。LISTENING_PORT 应该是什么？你如何决定使用哪个端口？什么是 CONNECTION_ADDRESS？

我意识到这些是非常基本的网络问题，所以也许有人可以为我指出一个好的教程的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:42:16.807

Socket 调用具有此签名

公共套接字（字符串主机，int 端口）

[查看文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)

CONNECTION_ADDRESS 是四无符号字节形式的字符串（可能）（对于 IPV4），即 192.168.0.2

LISTENING_PORT 可以是 0 到 65535 之间的任何数字，尽管小于 1024 的数字被分配给众所周知的服务（在 IANA 上阅读）

这是一个例子：

如果你把它放在你的浏览器地址栏中：74.125.132.94:80 你应该会看到 google。

请注意，在这种情况下它是 CONNECTION_ADDRESS:LISTENING_PORT （有一个分隔：）

这表示在端口 80 (HTTP) 上连接到 74.125.132.94

基本上每台机器都有一个 IP 地址 (CONNECTION_ADDRESS)，您正在创建的应用程序将侦听特定的 LISTENING_PORT。根据您的应用程序正在执行的操作，您将分配一个适当的 IANA 服务端口或高于 IANA 范围的任意端口号，所以......

例如，如果您正在创建 Web 服务器应用程序，那么您可以将应用程序设置为侦听端口 80，因为这是标准 HTTP Web 端口

或者

假设您正在创建一个随机游戏应用程序，该应用程序为您的游戏中的人们提供服务，您只需选择一个高于 1024 的随机数，即 12345

然后，您将创建您的客户端并将其连接到服务器所在 IP 上的端口 12345 / 80（您可以通过运行 IPCONFIG (Windows) 或适用于您的服务器操作系统环境的任何命令来计算该服务器 IP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:38:39.497

任何[端口](http://en.wikipedia.org/wiki/TCP_and_UDP_port)，即 0 到 65535 之间的数字。接受连接的服务器的 IP[地址](http://en.wikipedia.org/wiki/IP_address)或名称。[尝试解释TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)的 Wikipedia 文章或这个[Sun/Oracle 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/definition.html)。

# c# - DataGridView CellTemplate 设置无法正常工作

> ID：12043888
> 
> 赞同：1
> 
> 时间：2012-08-20T19:30:16.290
> 
> 标签：c#, dynamic, datagridview, format, celltemplate

我尝试了几个小时为动态创建的列创建模板。这是代码（它不是来自我的主要项目，但我简化了代码以重现我的问题）：

首先，我创建了一个包含 Column 设置的类：

```
public class ColumnBLO
{
    public string foreColor { get; set; }
    public string backColor { get; set; }
    public string Label { get; set; }
} 
```

然后这是我的主窗口的代码：

```
 private Dictionary<string, DataGridView> dgViews;
    private List<ColumnBLO> columns;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        tabControl1.TabPages.Clear();
        tabControl1.TabPages.Add(new TabPage("laUNe"));

        //Simulating Format settings
        columns = new List<ColumnBLO>();
        columns.Add(new ColumnBLO { backColor = "Black", foreColor = "Black", Label = "one" });
        columns.Add(new ColumnBLO { backColor = "Blue", foreColor = "Blue", Label = "two" });
        columns.Add(new ColumnBLO { backColor = "Red", foreColor = "Red", Label = "three" });

        //Creating datagridviews and populate with data
        dgViews = new Dictionary<string, DataGridView>();
        DataGridView dgv = new DataGridView();

        DataTable dt = new DataTable("laTable");
        dt.Columns.Add("one");
        dt.Columns.Add("two");
        dt.Columns.Add("three");
        dt.Rows.Add("un", "deux", "trois");
        dt.Rows.Add("un", "dos", "tres");
        dt.Rows.Add("uno", "due", "tre");
        dgv.DataSource = dt;

        dgViews.Add("one", dgv);

        tabControl1.TabPages[0].Controls.Add(dgv);

        //Formatting
        foreach (DataGridViewColumn dgvcol in dgViews["one"].Columns)
        {
            ColumnBLO colB = columns.Where(x => x.Label == dgvcol.HeaderText).First();
            DataGridViewCell dgvc = new DataGridViewTextBoxCell();
            dgvc.Style.BackColor = Color.FromName(colB.backColor);
            dgvc.Style.ForeColor = Color.FromName(colB.foreColor);
            dgvcol.CellTemplate = dgvc;
        }

    }
} 
```

当我执行此代码时，不显示格式，因为我单击标题列（对列进行排序），或者如果我调用自己的 Sort 方法。

我在 DGV 上尝试了很多方法，例如 Refresh()、Invalidate() 和 InvalidateColumns()，但没有任何效果...

如果有人可以帮助我;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:49:01.280

用以下内容替换您的`foreach`循环...

```
...

//Formatting
foreach(DataGridViewColumn dgvcol in dgViews["one"].Columns)
{
     ColumnBLO colB = columns.First(x => x.Label == dgvcol.HeaderText);
     dgvcol.DefaultCellStyle.BackColor = Color.FromName(colB.BackColor);
     dgvcol.DefaultCellStyle.ForeColor = Color.FromName(colB.ForeColor);
}

... 
```

如果您使用`DefaultCellStyle`而不是`CellStyle`单元格，则默认情况下您的模板将呈现... Soulds like Captain Obvious )))

# node.js - socket.io 通过 XHR 轮询强制断开连接

> ID：12043893
> 
> 赞同：5
> 
> 时间：2012-08-20T19:30:48.567
> 
> 标签：node.js, socket.io, long-polling

我有一个客户端/服务器应用程序，在服务器上使用 nodejs 和 socket.io 作为连接机制。出于与我的应用程序相关的原因，我希望每个浏览器只有一个活动连接，并拒绝来自其他选项卡的所有连接，这些连接可能稍后在会话期间打开。这适用于 WebSockets，但如果浏览器不支持 WebSockets 而使用 XHR 轮询，则永远不会发生断开连接，因此如果用户只是刷新页面，这不会被解释为重新连接（我有延迟重新连接和会话恢复），但作为一个新选项卡，它以连接被拒绝而结束，因为由同一选项卡建立的旧连接仍然处于活动状态。

我正在寻找一种在发生刷新时有效地结束来自客户端的连接的方法。我已经尝试绑定到客户端`beforeunload`并调用`socket.disconnect()`，并且还发送了一条消息，例如`socket.emit('force-disconnect')`并触发与服务器的断开连接，但没有成功。我在这里错过了什么吗？感谢你的帮助！

我已经阅读[了这个问题](https://stackoverflow.com/questions/5048231/force-client-disconnect-from-server-with-socket-io-and-nodejs)，但找不到它对我的特定情况有用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T16:19:41.493

解决了这个问题，原来[是](https://github.com/LearnBoost/socket.io/issues/461)在`socket.io 0.9.5`. 如果您遇到此问题，只需将您的服务器和客户端代码都更新为`socket.io > 0.9.9`并将 socket.io 客户端选项设置`sync disconnect on unload`为`true`，一切就绪。

选项是这样设置的：

```
var socket = io.connect('http://yourdomain.com', {'sync disconnect on unload' : true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T11:08:39.700

如果您用完了可用的打开文件描述符，您也可能会收到“错误：xhr 轮询错误”。这很可能发生在负载测试期间。

检查当前打开的文件描述符大小：

```
ulimit -n 
```

将其增加到一个较高的数字：

```
ulimit -n 1000000 
```

# haskell - 使用 Haskell 的 Project Euler #4

> ID：12043895
> 
> 赞同：2
> 
> 时间：2012-08-20T19:30:54.433
> 
> 标签：haskell

我希望这可以通过粘贴和运行“runghc euler4.hs 1000”来实现。由于我很难学习 Haskell，有人可以告诉我如何在这里改进吗？特别是所有那些“fromIntegral”都是一团糟。

```
module Main where
import System.Environment

main :: IO ()
main = do 
    args <- getArgs
    let 
        hBound = read (args !! 0)::Int
        squarePal = pal hBound
        lBound = floor $ fromIntegral squarePal / 
                   (fromIntegral hBound / fromIntegral squarePal)
        euler = maximum $ takeWhile (>squarePal) [ x | y <- [lBound..hBound], 
                                                       z <- [y..hBound],
                                                       let x = y * z,
                                                       let s = show x,
                                                       s == reverse s ]
    putStrLn $ show euler

pal :: Int -> Int
pal n
    | show pow == reverse (show pow) = n
    | otherwise = pal (n-1)
    where
        pow = n^2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:17:11.143

如果你想要的是整数除法，你应该使用`div`而不是来回转换`Integral`以使用普通`/`的 .

```
module Main where                                                              
import System.Environment                                                      

main :: IO ()                                                                  
main = do                                                                      
    (arg:_) <- getArgs                                                         
    let                                                                        
        hBound = read arg :: Int                                               
        squarePal = pal hBound                                                 
        lBound = squarePal * squarePal `div` hBound                            
        euler = maximum $ takeWhile (>squarePal) [ x | y <- [lBound..hBound],
                                                       z <- [y..hBound],       
                                                       let x = y * z,          
                                                       let s = show x,         
                                                       s == reverse s ]        
    print euler                                                                

pal :: Int -> Int                                                              
pal n                                                                          
    | show pow == reverse (show pow) = n                                       
    | otherwise = pal (n - 1)                                                  
    where                                                                      
        pow = n * n 
```

（我重写`lbound`了使用两个 的表达式，`/`并修复了一些由 . 突出显示的样式问题`hlint`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:39:11.710

好的，有几件事：

首先，为这个问题传入一个下限和一个上限可能会更好，这使它更具可扩展性。

如果您只打算使用 CL 中的前两个（前一个案例中的一个）参数，我们可以通过模式匹配轻松处理这个问题，并避免像这样的令人讨厌的语句`(args !! 0)`：

```
(arg0:arg1:_) <- getArgs 
```

让我们将它们转换为`Int`s：

```
let [a, b] = map (\x -> read x :: Int) [arg0,arg1] 
```

现在我们可以参考`a`和`b`，我们的上限和下限。接下来，让我们创建一个函数，遍历上限和下限之间的所有数字并获取它们的产品列表：

```
products a b = [x*y | x <- [a..b], y <- [x..b]] 
```

我们不必重复每个数字两次，因此我们从`x`当前`y`开始获取所有不同的产品。

从这里开始，我们将要创建一种方法来过滤掉某些数据集中的非回文：

```
palindromes xs = filter palindrome xs
  where palindrome x = show x == reverse $ show x 
```

最后，在我们的 main 函数中：

```
print . maximum . palindromes $ products a b 
```

如果您想查看它，这是完整的代码：

```
import System.Environment
main = do
  (arg0:arg1:_) <- getArgs
  let [a, b] = map (\x -> read x :: Int) [arg0,arg1]
  print . maximum . palindromes $ products a b

products a b = [x*y | x <- [a..b], y <- [x..b]]

palindromes = filter palindrome
  where palindrome x = (show x) == (reverse $ show x) 
```

# windows - 在非 Apple 操作系统上运行的 QMacStyle

> ID：12043896
> 
> 赞同：1
> 
> 时间：2012-08-20T19:30:57.803
> 
> 标签：windows, macos, qt

我意识到[QMacStyle](https://doc.qt.io/qt-4.8/qmacstyle.html)类只能在 Mac OS X 上运行。是否有任何 3rd-party 样式可用于使我的应用程序看起来与该样式有些相似，但不一定相同 - 并在其他平台上正确运行，如 MS Windows ?

我意识到我可以自己写一个，但我正在寻找可以节省大量工作的东西。

# java - 使用 Restfulie 访问 HttpRequest？

> ID：12043908
> 
> 赞同：0
> 
> 时间：2012-08-20T19:31:30.820
> 
> 标签：java

这似乎是一个简单的问题，但我在 Restfulie 文档中找不到它，谷歌也没有提供示例。

我已经定义了一个资源，正在调用该方法，但是我需要获取所使用的 URL 上的查询参数，这可能意味着获取 HttpRequest。有人知道你是如何使用 Restfulie 做到这一点的吗？

```
@Resource
public class Subscribers
{

    private final Result result;

    public Subscribers(Result result ){
        this.result = result;
    }

    @Get
    @Path("/subscribers")
    public void get() {

        // Need to get at the query parameters here...

        result.use( json() ).from( "You got me" ).serialize();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:41:16.207

试试这个方法

```
@Get
@Path("/subscribers")
public void get(@QueryParam("name") String name) {

} 
```

您必须将键和值附加到请求 URL。您还需要对值进行编码。 `http://mydomain/subscribers?name=abcde`

# java - 将 PDF 转换为纯文本时的转换 API NPE

> ID：12043912
> 
> 赞同：0
> 
> 时间：2012-08-20T19:31:42.267
> 
> 标签：java, google-app-engine

我正在编写一些代码来使用 GAE 的转换 API 对 PDF 进行验证。目前，运行“ConversionResult result = service.convert(conv);”时出现空指针错误。我试图复制教程（https://developers.google.com/appengine/docs/java/conversion/overview）中包含的代码，但我不得不从 BlobStore 获取 Asset 对象。我在下面粘贴了代码和堆栈跟踪；任何想法可能有什么问题？我尝试过尝试... catch，但这只会导致该方法安静地失败。此外，我不能使用内置的错误代码方法，因为没有创建 ConversionResult 对象。我一直在寻找解决这个问题的方法，虽然我发现了一些类似问题的帖子，但我没有找到任何解决方案。此外，每个人似乎都在使用我上面链接的相同示例代码；谷歌真的没有更多关于转换的文档吗？

感谢您的帮助！

```
public static void parse(String key, BlobKey bkey) throws IOException {

        BlobstoreInputStream in = new BlobstoreInputStream(bkey);
        byte[] attachmentData = IOUtils.toByteArray(in);
        in.read(attachmentData);

        System.out.println(attachmentData.toString());
        System.out.println(attachmentData.length);
        System.out.println("parse(): blob fetched");

        //Prep for conversion
        Asset fileAsset = new Asset("application/pdf", attachmentData);
        System.out.println(fileAsset.getData().toString());
        Document pdfDoc = new Document(fileAsset);

        ConversionOptions options = ConversionOptions.Builder
                .withOcrInputLanguage("en");
        Conversion conv = new Conversion(pdfDoc, "text/plain", options);
        if (conv.equals(null))
            System.out.println("Conversion is null!");

        // Actual conversion (takes a while!)
        ConversionService service = ConversionServiceFactory.getConversionService();
        if (service.equals(null))
            System.out.println("Service is null!");
        // Fails below!!
        // ¯\(°_o)/¯
        ConversionResult result = service.convert(conv);
        ConversionErrorCode err = result.getErrorCode();
        System.out.println(err.toString());

        // Check for success, return conversion as String
        System.out.println("parse(): 7");
        if (result.success()) {
            System.out.println("parse(): 8");
            // Usually, there will only be 1 asset, but running it through a for loop to be sure
            System.out.println("parse(): 9");
            for (Asset asset : result.getOutputDoc().getAssets()) {
                System.out.println("parse(): 10");
                String text = new String(asset.getData());
                System.out.println("parse(): 11");
                System.out.println(text);

            }
        }
        else { //PDF not converted
            System.out.println("Error: PDF not converted");
            // Maybe add more error handling

        }
} 
```

**警告**

2012 年 8 月 20 日下午 3:10:55 com.google.apphosting.utils.jetty.JettyLogger 警告

> 警告：com.google.appengine.api.conversion.ConversionServicePb$AssetInfo$Builder.setName(ConversionServicePb.java:886) 处的 /verifyPDF.jsp java.lang.NullPointerException com.google.appengine.api.conversion.AssetProtoConverter.doForward (AssetProtoConverter.java:30) 在 com.google.appengine.api.conversion.AssetProtoConverter.doForward(AssetProtoConverter.java:17) 在 com.google.appengine.repackaged.com.google.common.base.Converter.convert(Converter .java:52) 在 com.google.appengine.api.conversion.DocumentProtoConverter.doForward(DocumentProtoConverter.java:33) 在 com.google.appengine.api.conversion.DocumentProtoConverter.doForward(DocumentProtoConverter.java:18) 在 com。 com.google.appengine.api.conversion 上的 google.appengine.repackaged.com.google.common.base.Converter.convert(Converter.java:52)。ConversionProtoConverter.doForward(ConversionProtoConverter.java:38) 在 com.google.appengine.api.conversion.ConversionProtoConverter.doForward(ConversionProtoConverter.java:16) 在 com.google.appengine.repackaged.com.google.common.base.Converter。 convert(Converter.java:52) 在 com.google.appengine.api.conversion.ConversionRequestProtoConverter.doForward(ConversionRequestProtoConverter.java:40) 在 com.google.appengine.api.conversion.ConversionRequestProtoConverter.doForward(ConversionRequestProtoConverter.java:19)在 com.google.appengine.repackaged.com.google.common.base.Converter.convert(Converter.java:52) 在 com.google.appengine.api.conversion.ConversionServiceImpl.convertAsync(ConversionServiceImpl.java:94) 在 com .google.appengine.api.conversion.ConversionServiceImpl.convert(ConversionServiceImpl.java:66) 在 com.google.appengine.api.conversion.ConversionServiceImpl.convert(ConversionServiceImpl.java:59) 在 coupflipsite.PDFVerify.parse(PDFVerify.java:73) 在 org.apache.jsp.verifyPDF_jsp._jspService(verifyPDF_jsp.java :65) 在 org.apache.jasper.servlet.JspServletWrapper 的 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 的 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)。 service(JspServletWrapper.java:377) at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) at com.google .appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23) 在 com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59) 在 java.security.AccessController.doPrivileged(Native Method) 在 com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:第 717 章.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter (ServeBlobFilter.java:60) 在 com.google 的 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)。apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.StaticFileFilter。 doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security.SecurityHandler .handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.appengine.tools.development.DevAppEngineWebAppContext.handle( DevAppEngineWebAppContext.java:94) at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370) at org org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542 ) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint .java:409) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:24:23.687

首先： Conversion API[将于 2012 年 11 月停用](https://developers.google.com/appengine/docs/java/conversion/overview)。你应该切换到别的东西。

关于您的问题-尝试将“名称”参数添加到`Asset`构造函数：

```
Asset fileAsset = new Asset("application/pdf", attachmentData, "filename.pdf"); 
```

# python - Python 和 Powers 数学

> ID：12043913
> 
> 赞同：42
> 
> 时间：2012-08-20T19:31:45.493
> 
> 标签：python, math, multiplication, exponent

我一直在学习 Python，但我有点困惑。当我试图加注到某个数字时，在线教练告诉我使用运算符 ** 而不是 ^。例子：

```
print 8^3 
```

给出 11 的输出。但我正在寻找的（我被告知）更类似于： print 8**3 它给出了 512 的正确答案。但是为什么呢？

谁可以给我解释一下这个？为什么 8^3 不等于 512 因为它是正确答案？在什么情况下 11（8^3 的结果）？

我确实尝试过搜索，但我只看到有关在除法时获取模数的信息。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-20T19:35:35.457

运算符`^`是[*按位运算符*](http://wiki.python.org/moin/BitwiseOperators)，它**按位异或**。

[幂运算符](http://docs.python.org/reference/expressions.html#the-power-operator)是`**`，比如**`8**3`**等于`512`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-20T19:33:14.143

这些符号代表不同的运算符。

[`^`表示按位异或( `XOR`)](http://wiki.python.org/moin/BitwiseOperators)。

> 如果 y 中的该位为 0，则输出的每个位与 x 中的相应位相同，如果 y 中的该位为 1，则它是 x 中该位的补码。

`**`代表幂运算符。这就是语言的结构方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:34:17.817

只是这`^`并不意味着 Python 中的“指数”。它的意思是“按位异或”。请参阅[文档](http://docs.python.org/reference/expressions.html#binary-bitwise-operations)。

# jquery - wijmo 有没有像剑道这样的细节模板？

> ID：12043914
> 
> 赞同：1
> 
> 时间：2012-08-20T19:31:49.940
> 
> 标签：jquery, kendo-ui, wijmo

我一直在环顾四周，似乎 wijmo 有很多东西可以让我使用，文档也比 kendo 好得多。但是，我似乎找不到与 wijmo 的剑道细节模板等效的东西。

也许一些 wijmo 专家可以引导我做相当于这个 [http: //demos.kendoui.c​​om/web/grid/detailtemplate.html 的方向](http://demos.kendoui.com/web/grid/detailtemplate.html)

与威莫。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T03:23:13.293

开箱即用这不是默认功能，但是您可以使用数据网格的模板功能实现相同的功能。

# git - 同一台机器上的两个 git repos

> ID：12043916
> 
> 赞同：0
> 
> 时间：2012-08-20T19:31:59.673
> 
> 标签：git

我计划展示我的编码技能，为此我将我的一些代码推送到 BitBucket 的远程仓库中。我面临的问题是我的代码在不同的工作区中，例如 eclipse java、dr-java java、drupal 和 salesforce。我现在的做法是

```
 git init 
```

在每个文件夹中，并将我的更改推送到远程仓库。我的问题是：

这是做事的正确方法还是对这种情况有更好的想法。我要求一个更好的主意，因为有了这个实现，我无法在不先拉动的情况下推送我的更改，这意味着我的一段代码位于所有四个工作区中，其中三个是完全不必要的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:40:09.543

我相信，假设彼此不相关，您有 4 个不同的代码。如果是这种情况，您应该使用 4 个不同的 repo，而不是在一次 repo 中推送所有代码，这会使代码变得更大且难以管理。

您也可以尝试使用 GIT HUB 来托管您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:44:39.313

克隆您的 bitbucket 存储库，然后复制不属于该代码库的所有文件夹？

# php - 如何有效地使用 ajax 自动刷新？

> ID：12043917
> 
> 赞同：0
> 
> 时间：2012-08-20T19:32:12.723
> 
> 标签：php, ajax

我希望在 Facebook 主页上自动刷新。我已经实现了 Ajax 代码，但我想知道进行刷新的最佳方法是什么。

我可以做一个 setInterval 并让它每 X 分钟刷新一次，但是当站点在选项卡中打开但未使用时，这似乎是不必要的。

我可以将它绑定到诸如 mouseover 之类的事件（我测试过），但是每次鼠标移到 div 上时它都会刷新，并且在大多数情况下是不必要的。（以及在服务器上造成沉重的负载。）

我想理想的情况是当鼠标悬停时，它会检查上次更新的时间，如果超过 X 分钟，请进行刷新。我想这是上述两种方法的结合。

有什么我不知道的方法吗？在我的 div 内容来自的页面（我自己的页面位于同一服务器上）上实现的某种方法怎么样，它等待新材料然后将其“推送”到我的 div，而不是我的 div 去和从页面“拉”信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:37:06.780

Facebook 使用保持活动连接来做到这一点。

这意味着，一个带有 Keep-Alive 标头的 ajax 请求被发送到服务器。它将保持活动状态，直到有新内容可用，然后服务器返回响应并关闭连接。一旦发生这种情况，将建立一个新的保持连接等。

在 PHP 方面，您可以结合使用 sleep() 和无限循环来检查新内容。

但是，我不知道这对您服务器的 cpu 使用率有多大影响......

# cordova - 如何将使用 Phonegap 制作的 IOS 应用程序发送给 beta 测试人员

> ID：12043932
> 
> 赞同：3
> 
> 时间：2012-08-20T19:33:27.283
> 
> 标签：cordova

我的 ios 开发设备上一切正常，但我不明白如何在将 ipa 文件提交到应用商店之前将其发送给 beta 测试人员。

我尝试从网站安装 ipa 文件，但安装停止并说无法安装该应用程序。我查看了苹果开发者网站配置部分的说明，但我不明白我需要做什么。他们详述的一些步骤似乎不起作用和/或面向使用 xcode。

任何人都可以逐步提供如何执行此操作吗？

是否需要使用与开发版本不同的配置通过 phonegap 构建重新生成 ipa？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T20:08:05.087

您可能需要使用所有 beta 测试设备的 UUID 创建分发配置文件。这是发送临时构建的说明的链接：[http](http://www.raywenderlich.com/1669/how-to-host-a-beta-test-for-your-ios-app) ://www.raywenderlich.com/1669/how-to-host-a-beta-test-for-your-ios-app并查找“我如何发送Beta 测试人员是 Ad-Hoc Build 吗？” 您不需要`ipa`使用`phonegap`build 生成。您仍然可以使用您的机器生成`ipa`并将`mobileprovision`文件发送给 beta 测试人员。

或者，有一个可用于 phonegap 的新仿真：http://emulate.phonegap.com/[这](http://emulate.phonegap.com/)可能是另一种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:00:26.127

我认识一些成功使用试飞的人。

[https://testflightapp.com/](https://testflightapp.com/)

# python - 如果在循环中，则无类型

> ID：12043935
> 
> 赞同：0
> 
> 时间：2012-08-20T19:33:45.110
> 
> 标签：python, python-3.x

我正在编写一些代码，在其中我尝试使用 for 循环和 if 语句检查范围内的每个数字。循环在第一次检查后停止，并抛出错误消息 *错误类型，，无，，预期整数*，我会给你我被要求做的事情：

定义一个函数 findLine(prog, target) 来执行以下操作。假设 prog 是一个包含 BASIC 程序的字符串列表，例如 getBASIC() 生成的类型；假设 target 是一个包含行号的字符串，它是 GOTO 语句的目标。该函数应返回索引 i（一个介于 0 和 len(prog)-1 之间的数字），使得 prog[i] 是其标签等于 target 的行。提示示例输入/输出：如果您调用 findLine(['10 GOTO 20','20 END'],'10')

```
def findLine(prog, target):
  L=[]
  for i in range(0, len(prog)):
     L=L+prog[i].split()
  for j in range(0,len(L)):
     i=L.index(L[j])
     if j == int(target):
       i=i//3
       return i 
```

这些是一些信息：

```
Running findLine(['10 GOTO 20', '20 END'], '20')… Error: findLine(['10 GOTO 20', '20 END'], '20') has wrong type "None" Type, expected Integer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:38:56.237

第一次检查后循环并没有停止：相反，它永远不会成功返回。此函数基于以下循环返回：

```
for j in range(0,len(L)):
    i=L.index(L[j])
    if j == int(target):
        i=i//3
        return i 
```

但如果条件`j == int(target)`永远不满足，循环将结束，函数`findLine`将返回`None`。

ETA：既然您已经解释了任务是什么：您对`L`列表的构建不是解决问题的正确方法：

```
 for i in range(0, len(prog)):
     L=L+prog[i].split() 
```

这将产生`['10', 'GOTO', '20', '20', 'END']`. 在这种情况下，您不知道哪条线是哪条线！不过，拆分它是正确的方向。如果您只是从每个分割线添加标签怎么办：

```
 for i in range(0, len(prog)):
     L.append(prog[i].split()[0]) 
```

这将产生一个`L`等于`['10', '20']`，这更接近于您正在寻找的内容。最后一步是获取该数组中目标的索引（您已经知道该怎么做！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:40:12.830

它是 None 的原因是你的代码从函数的末尾掉了下来。该`if j == int(target)`块永远不会运行。

你的代码真的没有意义。在您的循环中，`j`将采用从 0 到您传递给函数的 BASIC 代码的行数。因此，在您的示例`j`中将等于 0，然后是 1。它永远不会等于 20，这是您的目标行。看来你想做`if L[j][0] == target`。

除此之外，您还通过使用列表的长度以非 Python 的方式迭代列表。您应该阅读[Python 教程](http://docs.python.org/tutorial/)以了解如何以 Python 方式使用 for 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T19:50:58.057

```
def findLine(prog, target):
  for i in range(0, len(prog)):
      if prog[i].startswith(target):
          return i 
```

这应该是您的问题陈述的答案。

# session - qpid AMQConnection.createSession() 产生重复的 Session 对象？

> ID：12043936
> 
> 赞同：0
> 
> 时间：2012-08-20T19:33:45.153
> 
> 标签：session, jms, hashcode, qpid

我有一堆线程，每个线程创建一个`org.apache.qpid.client.AMQConnection`，然后创建一个会话。

```
public void run() {
    Connection connection = new AMQConnection("amqp://*******:*****@clientid/test?brokerlist='tcp://********:****?sasl_mechs='ANONYMOUS''");
    connection.start();

    Session ssn = connection.createSession(false,Session.AUTO_ACKNOWLEDGE);    
    System.out.println(ssn.toString());

    ssn.close();
    connection.close();
} 
```

在某些运行中，我在两个不同的线程中得到相同的 Session.hashCode() ，如下所示：

```
org.apache.qpid.client.AMQSession_0_10@420e44
org.apache.qpid.client.AMQSession_0_10@d76237
org.apache.qpid.client.AMQSession_0_10@d76237
org.apache.qpid.client.AMQSession_0_10@7148e9 
```

现在我明白`hashcode()`了不能保证是唯一的，我如何证明或反驳`createSession()`在两个单独的线程上返回相同的会话对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:51:58.780

结果更多的是Java对象等效问题，而不是与qpid或消息传递有关。

我没有打印哈希码，而是将`Session`对象本身插入到 a 中`Vector<Session>`并比较它们 ( `==`)。事实证明，它们在所有线程中都是独一无二的。

# jquery - 自定义 jquery 手风琴

> ID：12043939
> 
> 赞同：-1
> 
> 时间：2012-08-20T19:33:49.267
> 
> 标签：jquery, jquery-ui-accordion

我是 jQuery UI 的新手，我刚开始使用手风琴示例。我想在标题文本旁边的标题中放置一个图像或图标。有人可以让我知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:46:37.597

给你，手风琴没有样式，但你可以看到白色图像，[jsfiddle](http://jsfiddle.net/4MKHd/)

# c++ - C++ 用 cin 做 while 循环

> ID：12043940
> 
> 赞同：1
> 
> 时间：2012-08-20T19:33:54.923
> 
> 标签：c++

下面是我用 cin 做的 while 循环 有一点问题，当用户输入全名然后按回车。指针将转到下一行。直到用户再次按回车键，然后它提示电子邮件地址，我如何在下面的代码中输入全名后立即提示电子邮件地址

终端外观：

```
Full Name: John
Email Address: some_email@gmail.com 
```

我的 test.cpp 代码：

```
emailAddress= "";
fullname = "";
counter = 0;

if(department_selection!="")
{

while(fullname=="")
{
if(counter>0)
{
//so it wont print twice
cout << "Full Name: ";
}

getline(cin,fullname);
cin.clear();
cin.ignore();
counter++;
}

counter = 0;

while(emailAddress=="")
{
if(counter>0)
{
//so it wont print twice
cout << "Email Address: ";
}

getline(cin,emailAddress);
cin.clear();
cin.ignore();
counter++;
}

}// if department selection not blank 
```

还是同样的问题。我需要输入一次，然后它会提示输入电子邮件地址。

**最新更新：设法修复它。我对代码进行了更改，它是这个版本：**

```
do
{
  if(counter==0)
  {
     //so it wont print twice
     cout << "Full Name: ";
  }
  if(counter>1)
  {
     //so it wont print twice
     cout << "Full Name: ";
  }

  getline(cin,fullname);
  counter++;
} while (fullname=="");

counter = 0;

do
{
  if(counter==0)
  {
     //so it wont print twice
     cout << "Email Address: ";
  }
  if(counter>1)
    {
         cout << "Email Address: ";
    }

  getline(cin,emailAddress);
  counter++;
} while (emailAddress==""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:38:43.693

而不是`if(counter>0)`使用`if(counter==0)`

我的工作测试应用程序：

```
int counter = 0;
string fullname, emailAddress;
do
{
  if(counter==0)
  {
     //so it wont print twice
     cout << "Full Name: ";
  }

  getline(cin,fullname);
  counter++;
} while (fullname=="");

counter = 0;

do
{
  if(counter==0)
  {
     //so it wont print twice
     cout << "Email Address: ";
  }

  getline(cin,emailAddress);
  counter++;
} while (emailAddress==""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:46:55.963

检查长度，然后@。

```
 do
    {
    ...
    }while(fullname.length()<2);

    do
    {
    ...
    }while(emailAddress.length()<3||emailAddress.find("@")==string::npos); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:36:07.707

也使用 clear() 和 ignore() 函数来忽略已经存储在输入中的单词

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T20:04:37.590

定义一个函数以避免重复代码：

```
#include <iostream>
#include <string>
#include <limits>

using namespace std;

string get_input(const std::string& prompt)
{
    string temp;
    cout << prompt;
    while (!getline(cin, temp) || temp.empty()) {
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
    return temp;
}

int main()
{
    string fullname = get_input("Full Name: ");
    string email = get_input("Email Adress: ");
} 
```

# python - python tkinter treeview右键单击（Button-3）事件以选择树视图中的项目

> ID：12043942
> 
> 赞同：7
> 
> 时间：2012-08-20T19:34:09.377
> 
> 标签：python, treeview, tkinter

使用 Python 3.2 和 tkinter。如何让 Button-3（右键单击）选择 Treeview 小部件中鼠标光标悬停的项目？我基本上希望 Button-3 事件以与当前单击左键相同的方式选择项目。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-09T09:21:07.477

你一半回答了你自己的问题。刚刚编写并测试了我的代码，所以认为在这里发布我的解决方案片段没有什么坏处。

```
def init(self):
    """initialise dialog"""
    # Button-3 is right click on windows
    self.tree.bind("<Button-3>", self.popup)

def popup(self, event):
    """action in event of button 3 on tree view"""
    # select row under mouse
    iid = self.tree.identify_row(event.y)
    if iid:
        # mouse pointer over item
        self.tree.selection_set(iid)
        self.contextMenu.post(event.x_root, event.y_root)            
    else:
        # mouse pointer not over item
        # occurs when items do not fill frame
        # no action required
        pass 
```

# ios - Iphone-操作无法完成

> ID：12043945
> 
> 赞同：1
> 
> 时间：2012-08-20T19:34:20.877
> 
> 标签：ios, smtpclient

我是这个话题的新手，请帮助我...

我正在使用帮助 Skpsmtpmessage 类将用户信息发送到 SMTP 服务器。但我收到“操作无法完成”。在`-(void)messageFailed:(SKPSMTPMessage *)message error:(NSError *)error)`

请帮帮我。

```
- (void) sendMessage {

    SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];

    NSString *myString;

    testMsg.relayHost = @"smtp.gmail.com";
    testMsg.requiresAuth = YES;
    testMsg.login =  @"my gmail id";

    testMsg.pass = @"my gmail password"; 

    testMsg.subject =  [NSString stringWithFormat:@"CLIENT iPhone App - %@", self.navigationItem.title];
    testMsg.bccEmail = emailField.text;
    testMsg.wantsSecure = YES; // smtp.gmail.com doesn't work without TLS!
    testMsg.fromEmail = emailField.text;
    NSString *ff = [[UIDevice currentDevice] uniqueIdentifier];
    NSString *gg = [[UIDevice currentDevice] model];
    NSString *hh = [[UIDevice currentDevice] localizedModel];
    NSString *ii = [[UIDevice currentDevice] name];
    NSString *jj = [[UIDevice currentDevice] systemName];
    NSString *kk = [[UIDevice currentDevice] systemVersion];
    NSString *path;
    if ([self.navigationItem.title isEqualToString:@"Request Authorization"])
    {
        path = [[NSBundle mainBundle] pathForResource:@"ThankYou" ofType:@"txt"];
        testMsg.toEmail = @"myname@gmail.com";
    }
    else
    {
        path = [[NSBundle mainBundle] pathForResource:@"ThankYou2" ofType:@"txt"];
        testMsg.toEmail = @"myanme@gmail.com";
    }

    NSString *fileText = [NSString stringWithContentsOfFile:path];
    myString = [NSString stringWithFormat:@"LEADERS %@-\n\n%@\n\nName:  %@\nCompany:  %@\nAddress:  %@\nCity:  %@\nState:  %@\nZip:  %@\nPhone:  %@\nFax:  %@\nEmail:  %@\nComments:  %@\nRequire New Merchant Account:  %@\nReferral Code:  %@\nIdentifier:  %@\nModel:  %@\nLocalized Model:  %@\nName:  %@\nSystem Name:  %@\nSystem Version:  %@",self.navigationItem.title,fileText, firstNameField.text,companyField.text,addressField.text,cityField.text,stateField.text,zipCodeField.text,phoneField.text,faxField.text,emailField.text,countryField.text,customerIdField.text,lastNameField.text,ff,gg,hh,ii,jj,kk];

    NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain",kSKPSMTPPartContentTypeKey,
                           myString,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,nil,nil];
    testMsg.delegate= self;

    [testMsg send]; 

    [self.navigationController popViewControllerAnimated:TRUE];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:44:28.587

```
-(void)sendMail
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];
    testMsg.fromEmail = [defaults objectForKey:@"fromEmail"];

    testMsg.toEmail   = [defaults objectForKey:@"toEmail"];
    testMsg.bccEmail  = [defaults objectForKey:@"bccEmal"];
    testMsg.relayHost = [defaults objectForKey:@"relayHost"];

    testMsg.requiresAuth = [[defaults objectForKey:@"requiresAuth"] boolValue];

    NSLog(@"%@",testMsg.fromEmail);

    if (testMsg.requiresAuth) 
    {
        testMsg.login = [defaults objectForKey:@"login"];
        testMsg.pass  = [defaults objectForKey:@"pass"];
    }

    testMsg.wantsSecure = [[defaults objectForKey:@"wantsSecure"] boolValue]; // smtp.gmail.com doesn't work without TLS!

    testMsg.subject = @"SMTPMessage Test Message";

    // Only do this for self-signed certs!
    // testMsg.validateSSLChain = NO;

    testMsg.delegate = self;

    NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain",kSKPSMTPPartContentTypeKey,
                               @"This is a tést messåge.",kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.jpg"];

    NSData *jpgData = [NSData dataWithContentsOfFile:getImagePath];

    NSDictionary *jpgPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/directory;\r\n\tx-unix-mode=0644;\r\n\tname=\"savedImage.jpg\"",kSKPSMTPPartContentTypeKey,
                                 @"attachment;\r\n\tfilename=\"savedImage.jpg\"",kSKPSMTPPartContentDispositionKey,[jpgData encodeBase64ForData],kSKPSMTPPartMessageKey,@"base64",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,jpgPart,nil];

    [testMsg send];

}

- (void)messageSent:(SKPSMTPMessage *)message
{
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"SMTP Mail"
                              message:@"Yay! Message was sent!"
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil,
                              nil];
    [alertView show];
    [alertView release];
    [message release];
}

- (void)messageFailed:(SKPSMTPMessage *)message error:(NSError *)error
{
    NSString *str = [NSString stringWithFormat:@"Darn! Error!\n%i: %@\n%@", [error code], [error localizedDescription], [error localizedRecoverySuggestion]];
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"SMTP Mail"
                              message:str
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil,
                              nil];
    [alertView show];
    [alertView release];
    [message release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:47:30.987

我们必须使用发送邮件

```
-(void)sendMail
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];
    testMsg.fromEmail = [defaults objectForKey:@"fromEmail"];

    testMsg.toEmail   = [defaults objectForKey:@"toEmail"];
    testMsg.bccEmail  = [defaults objectForKey:@"bccEmal"];
    testMsg.relayHost = [defaults objectForKey:@"relayHost"];

    testMsg.requiresAuth = [[defaults objectForKey:@"requiresAuth"] boolValue];

    NSLog(@"%@",testMsg.fromEmail);

    if (testMsg.requiresAuth) 
    {
        testMsg.login = [defaults objectForKey:@"login"];
        testMsg.pass  = [defaults objectForKey:@"pass"];
    }

    testMsg.wantsSecure = [[defaults objectForKey:@"wantsSecure"] boolValue]; 
    // smtp.gmail.com doesn't work without TLS!

    testMsg.subject = @"SMTPMessage Test Message";

    // Only do this for self-signed certs!
    // testMsg.validateSSLChain = NO;

    testMsg.delegate = self;

    NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain", kSKPSMTPPartContentTypeKey, @"This is a tést messåge.", kSKPSMTPPartMessageKey, @"8bit", kSKPSMTPPartContentTransferEncodingKey, nil];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.jpg"];

    NSData *jpgData = [NSData dataWithContentsOfFile:getImagePath];

    NSDictionary *jpgPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/directory;\r\n\tx-unix-mode=0644;\r\n\tname=\"savedImage.jpg\"",kSKPSMTPPartContentTypeKey, @"attachment;\r\n\tfilename=\"savedImage.jpg\"",kSKPSMTPPartContentDispositionKey,[jpgData encodeBase64ForData],kSKPSMTPPartMessageKey,@"base64",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,jpgPart,nil];

    [testMsg send];
} 
```

# c# - 尝试更新标签中的文本并使用线程时出现 nullreferenceexception

> ID：12043947
> 
> 赞同：0
> 
> 时间：2012-08-20T19:34:27.210
> 
> 标签：c#, asp.net

```
public partial class _Default : System.Web.UI.Page
{
    private static Stopwatch timer = new Stopwatch();
    Thread timeThread = new Thread(timeKeeper);
    private static int min = 0, sec = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
    }
    protected void startstop_Click(object sender, EventArgs e)
    {
        timeThread.Start();
        if(timer.IsRunning()) {timer.Stop}
        else timer.Start();
    }
    private static void timeKeeper()
    {
        while (timer.IsRunning)
        {
            mydelegate();
        }
    }
    private static void mydelegate()
    {
        _Default temp = new _Default();
        temp.Update();
    }
    private void Update()
    {
        min = timer.Elapsed.Minutes;
        sec = timer.Elapsed.Seconds;
        time.Text = min + ":" + sec;
    }
} 
```

我想要做的是有一个控制秒表的按钮，当你点击它时，它开始，再次点击它停止。如果我希望 time.text 显示继续更新并仍然能够单击按钮，我认为最好的方法是使用线程。当我运行上面的程序时，它得到 time.text = min + ":" + sec; 并抛出一个空引用异常。任何有关如何解决此问题的帮助将不胜感激。我对使用 C#/asp.net 进行编程是半新手。

那么有没有更好的方式与代表合作。我花了几个小时来查找如何使用它们，而通常/易于理解的教程或博客并不多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:45:38.123

我不知道从哪里开始。

请记住，您正在对网页进行编程，每次调用服务器都会在服务器上产生一个新的网页生命周期。因此，在网页中使用线程不会导致正确的行为。

要获得您想要的那种行为，您必须在客户端而不是服务器上执行计时器并单击处理。您可以使用 jQuery 来促进这一点。如果您必须使服务器保持最新状态，另一种选择是使用 ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:42:32.103

看来问题出在这里：

```
_Default temp = new _Default(); 
```

新类没有通过 ASP.Net 管道，因此当您尝试更新标记 ( *time* ) 中的控件时，它实际上并没有加载。

我认为你在这里的方法有点缺陷。如果您想在服务器端执行此操作，则需要使用重复的 Ajax 请求（或 Web 套接字）来使浏览器与服务器上的计时器对象保持同步。更不用说，当您有多个用户并且线程开始冲突时会发生什么？使用Javascript似乎要好得多。

# java - 线程安全的 LinkedList 交替使用

> ID：12043948
> 
> 赞同：1
> 
> 时间：2012-08-20T19:34:35.517
> 
> 标签：java, multithreading, thread-safety

目前我正在使用`LinkedList`添加所有`Command`信息。如何使以下`List<Command>`线程安全？我应该在这里使用其他选项`LinkedList`吗？

```
private static List<Command> commands;

Command command = new Command();
command.setName(commandName);
command.setExecutionPercentage(Double.parseDouble(percentage));
command.setAttributeIDGet(attributeIDGet);
command.setAttributeIDSet(attributeIDSet);
command.setDataUsageCriteria(dataCriteria);
command.setUserLoggingCriteria(userLoggingCriteria);
command.setSleepTime(sleepTimeOfCommand); 
```

我正在添加`command`通过从文本文件中读取并将其放入`LinkedList of command`如下所示的所有内容。所以假设如果我有，`three command`那么我需要将所有这些添加`three command`到`LinkedList`我正在做的事情中。

```
commands.add(command); 
```

如果我做下面的事情怎么办？ -

```
Collections.synchronizedList(commands.add(command)); 
```

或者我需要做这样的事情-

```
commands = Collections.synchronizedList(new LinkedList<Command>()); 
```

**更新：-**

根据您的建议，如果我使用 -

```
private static Queue<Command> commands;

commands = new ConcurrentLinkedQueue<Command>(); // Using linked list to ensure iteration order

Command command = new Command();
command.setName(commandName);
command.setExecutionPercentage(Double.parseDouble(percentage));
command.setAttributeIDGet(attributeIDGet);
command.setAttributeIDSet(attributeIDSet);
command.setDataUsageCriteria(dataCriteria);
command.setUserLoggingCriteria(userLoggingCriteria);
command.setSleepTime(sleepTimeOfCommand);

commands.add(command); 
```

在基本上完成所有初始化之后，我需要`command information`从队列中获取 ，所以我以前使用`LinkedList`. 但是在更改为之后`ConcurrentLinkedQueue`，这`get call is giving me an error`就像有一个`error line on get call`

```
commands.get(commandWithMaxNegativeOffset); 
```

**我得到的错误 -**

```
 The method get(int) is undefined for the type Queue<Command> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T19:36:46.543

> 如何使以下 List 线程安全？我应该在这里使用其他选项而不是 LinkedList 吗？

[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)是一个并发链接队列。引用 javadocs：

> 基于链接节点的无界线程安全队列。此队列对元素进行 FIFO（先进先出）排序。队列的头部是在队列中时间最长的元素。队列的尾部是在队列中时间最短的元素。新元素被插入到队列的尾部，队列检索操作获取队列头部的元素。当许多线程将共享对公共集合的访问时，ConcurrentLinkedQueue 是一个合适的选择。此队列不允许空元素。

所以你会做这样的事情：

```
 Queue<Command> concurrentQueue = new ConcurrentLinkedQueue<Command>();
 Command command = new Command();
 ...
 concurrentQueue.add(command); 
```

您还可以`List`使用`Collections.synchronizedList(...)`. 是否执行此操作或使用`ConcurrentLinkedQueue`取决于您需要该集合的高性能。

```
// turn the commands list into a synchronized list by wrapping it
commands = Collections.synchronizedList(commands); 
```

如果您提供有关如何使用此队列的更多信息，我们可以在正确的 JDK 并发集合方面提供更多替代方案。

> Collections.synchronizedList(commands.add(command));

您编辑了您的问题并询问了上述代码。它不会编译，因为`List.add(...)`返回一个布尔值。

# java - 反思在 Groovy 脚本中声明的函数

> ID：12043949
> 
> 赞同：3
> 
> 时间：2012-08-20T19:34:39.047
> 
> 标签：java, reflection, groovy

有没有办法获取在已通过`GroovyShell`对象评估的 Groovy 脚本中声明的函数的反射数据？具体来说，我想枚举脚本中的函数并访问附加到它们的注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:37:15.530

把**它**放在Groovy 脚本的最后一行——它将作为脚本的返回值，a-la：

```
 // x.groovy
 def foo(){}
 def bar(){}
 this 
```

然后，您可以从 Java 代码执行以下操作：

```
 GroovyShell shell = new GroovyShell();
 Script script = (Script) shell.evaluate(new File("x.groovy")); 
```

现在似乎没有选择直接从 Java 内省 Groovy 脚本的注释。但是，您可以在同一个 Groovy 脚本中实现一个方法并从 Java 代码中调用该方法，例如：

```
//groovy
def test(String m){
  method = x.getMethod(m, [] as Class[])
  assert method.isAnnotationPresent(X)
}

//java
script.getMetaClass().invokeMethod(script, "test", "foo"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:38:59.657

经过一些实验，我发现这是最简单的方法：

```
GroovyShell shell = new GroovyShell();
Script script = (Script)shell.parse(new FileReader("x.groovy"));
Method[] methods = script.getClass().getMethods(); 
```

该`method`数组具有脚本中定义的所有函数，我可以从中获取注释。

# java - 如何在 java 中转义这个字符串。我将它用作 Pattern.compile 的正则表达式

> ID：12043950
> 
> 赞同：-3
> 
> 时间：2012-08-20T19:34:40.457
> 
> 标签：java, regex

我收到此字符串的无效转义序列错误。如何在我的 java 代码中转义它？

```
 "^(?:(2\d\d\d)\s+)?(?:Comm\. Rep\.\s+)?(?:CONG\s+)?(\S+)\s+(\S+)\s+(?:No\.\s+)?(\S+)(?:\s+\(.*?\))?$" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:37:02.450

反斜杠 ( `\`) 本身[必须](http://www.regular-expressions.info/java.html)转义：

```
"^(?:(2\\d\\d\\d)\\s+)?(?:Comm\\. Rep\\.\\s+)?(?:CONG\\s+)?(\\S+)\\s+(\\S+)\\s+(?:No\\.\\s+)?(\\S+)(?:\\s+\\(.*?\\))?$" 
```

# amazon-s3 - 是否可以限制来自 EC2 实例的访问以仅使用来自特定账户的 S3 存储桶？

> ID：12043951
> 
> 赞同：0
> 
> 时间：2012-08-20T19:34:42.623
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, amazon-vpc

**目标**：我想将敏感数据保存在 s3 存储桶中，并在位于私有云中的 EC2 实例上处理它。我研究了通过 IP 和用户（iam）arn 设置 S3 存储桶策略的可能性，因此我认为 s3 存储桶中的数据是“安全的”。但我担心下一个场景：
1）有 vpc
2）里面有一个 ec2 实例
3）有一个受控（允许）帐户的用户有权连接和使用 ec2 实例和存储桶。存储桶被定义和配置为仅与已知（授权）ec2 实例一起使用。
**安全漏洞：**用户在 ec2 实例上上传恶意软件应用程序，并在处理数据期间执行恶意软件应用程序，将数据传输到不同 AWS 账户下的其他（未经授权的）存储桶。
在我的情况下，禁用将数据上传到 ec2-instance 不是一个选项。
**问题：**是否可以限制对 vpc firewal 的访问，使其可以访问某些特定的 s3 存储桶，但会被拒绝访问任何其他存储桶？假设用户可能将恶意软件应用程序上传到 ec2 实例，并在其中将数据上传到其他存储桶（在第三方 AWS 账户下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T06:46:44.057

您所问的问题并没有真正的解决方案，但话又说回来，您似乎试图解决错误的问题（如果我正确理解您的问题）。

如果您遇到不值得信任的用户能够“连接并使用 ec2 实例和存储桶”并在您的 VPC 中上传和执行应用程序代码的情况，那么所有的赌注都已经结束，游戏已经结束。关闭您的应用程序是您唯一可用的修复方法。尝试通过阻止恶意代码将敏感数据上传到 S3 中的其他存储桶来限制损害应该是您最不必担心的事情。除了将数据放回 S3 但在不同的存储桶中之外，恶意用户还有许多其他选项可用。

我对“连接并使用 ec2 实例和存储桶”的解释可能比您预期的更广泛，您的意思是用户能够将数据上传到您的应用程序。好吧，好吧...但是您的关注点似乎仍然集中在错误的点上。

我有用户可以上传数据的应用程序。他们可以上传他们想要的所有恶意软件，但是他们上传的数据中包含的任何代码——无论是恶意的还是良性的——都不会被执行。我的系统永远不会将上传的数据与要执行的东西混淆，或者以一种远程可能的方式处理它。如果您的代码可以，那么您又遇到了只能通过修复代码来解决的问题——而不是通过限制您的实例可以访问的存储桶。

实际上，当我说没有解决方案时，我撒了谎。有一个解决方案，但它相当荒谬：

在 EC2 或外部某处设置反向 Web 代理，但当然要使其配置对恶意用户无法访问。在此代理的配置中，将其配置为仅允许访问所需的存储桶。例如，对于 apache，如果存储桶被称为“mybucket”，它可能看起来像这样：

```
ProxyPass /mybucket http://s3.amazonaws.com/mybucket 
```

代理上的其他配置将拒绝从您的实例以外的任何地方访问代理。然后，不要让您的实例直接访问 s3 端点，而只允许向代理发送出站 http（通过受感染实例的安全组）。对您以外的存储桶的请求将无法通过代理，这是现在唯一的“出路”。问题解决了。至少，您希望解决的特定问题应该可以通过这种方法的一些变体来解决。

*更新澄清：*

要以正常方式访问名为“mybucket”的存储桶，有两种方法：

```
http://s3.amazonaws.com/mybucket/object_key
http://mybucket.s3.amazonaws.com/object_key 
```

使用此配置，您将通过安全组配置阻止（不允许）从您的实例对所有 S3 端点的所有访问，这将阻止使用任何一种方法访问存储桶。相反，您将允许从您的实例访问代理。

例如，如果代理位于 172.31.31.31，那么您将访问存储桶及其对象，如下所示：

```
http://172.31.31.31/mybucket/object_key 
```

代理被配置为仅允许转发路径中的某些模式——而任何其他模式被拒绝——将控制特定存储桶是否可访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-24T18:59:58.970

使用[VPC 终端节点](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-endpoints.html)。这允许您限制 VPC 中的 EC2 实例可以访问的 S3 存储桶。它还允许您在 VPC 和 S3 服务之间创建私有连接，因此您不必允许广泛开放的出站 Internet 访问。有[示例 IAM 策略](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-endpoints.html#vpc-endpoints-s3-bucket-policies)显示如何控制对存储桶的访问。

S3 的 VPC 端点还有一个[额外](https://treyperry.com/2015/06/07/improving-performance-and-security-with-vpc-endpoints/)的好处，即某些主要软件存储库（例如 Amazon 的 yum 存储库和 Ubuntu 的 apt-get 存储库）托管在 S3 中，因此您还可以允许您的 EC2 实例获取它们的补丁，而无需为其提供广泛的互联网访问权限. 这是一个很大的胜利。

# forms - 小程序中的 Java 文本字段历史记录

> ID：12043953
> 
> 赞同：0
> 
> 时间：2012-08-20T19:34:46.743
> 
> 标签：forms, caching, applet, field, history

我有一个简单的 Java 小程序，其中包含几个用于输入的文本字段。我希望能够以某种方式缓存用户在这些字段中输入的内容，以便下次他们运行小程序时，他们可以从先前输入的列表中进行选择。

我一直在搜索论坛和站点，但找不到任何方法可以为小程序执行此操作。

有没有人有正确方向的建议或踢球？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:41:39.600

如果您在浏览器中运行它，您可以尝试使用 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:44:10.697

除了cookies，这里还有更多的可能性。

*   HTML5 提供了可以使用 JS 从小程序访问的[Web 存储。](http://www.w3.org/TR/webstorage/)
*   可以使用[JWS](https://stackoverflow.com/tags/java-web-start/info)部署在 Plug-In 2 JRE 中运行的小程序，并使用它`PersistenceService`来存储数据。这是一个[演示。的`PersistenceService`](http://pscode.org/jws/api.html#ps)。
*   受信任的小程序可以读/写本地文件系统，但可能会为此过度杀伤。

# javascript - 具有多种功能的 Onclick 属性

> ID：12043954
> 
> 赞同：0
> 
> 时间：2012-08-20T19:34:51.367
> 
> 标签：javascript

有什么方法可以调用三个将输入作为参数并且什么都不返回的函数？我不想使用 jquery 的单击事件，我希望在属性级别传递三个函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:39:23.230

如果您想要更具体的答案，请提出更具体的问题。以下答案适用于

> 有什么方法可以调用三个将输入作为参数并且什么都不返回的函数？我不想使用 jquery 的单击事件，我希望在属性级别传递三个函数。

```
<button onclick="first(1);second(2);third(3);">go</button> 
```

# performance - 多连接 LINQ 查询性能

> ID：12043955
> 
> 赞同：3
> 
> 时间：2012-08-20T19:34:52.670
> 
> 标签：performance, linq

我是 LINQ 新手，知识很少。我有以下复杂的查询。它的运行速度比我翻译成 LINQ 的存储过程慢 3 到 4 倍。

有什么建议可以让它跑得更快吗？

```
var result = from a in db.A 
    join al in db.AL.Where(q => q.CurrentLocation == 1) on a.AID equals al.AID into tmp_al
    from al in tmp_al.DefaultIfEmpty()
    join l in db.Lon al.LID equals l.LID into tmp_l
    from l in tmp_l.DefaultIfEmpty()
    join r in db.R on l.RID equals r.RID into tmp_r
    from r in tmp_r.DefaultIfEmpty()
    join b in db.B on r.BID equals b.BID into tmp_b
    from b in tmp_b.DefaultIfEmpty()
    join ap in db.AP.Where(q => q.CurrentProtocol == 1) on a.AID equals ap.AID into tmp_ap
    from ap in tmp_ap.DefaultIfEmpty()
    join p in db.P on ap.PID equals p.PID into tmp_p
    from p in tmp_p.DefaultIfEmpty()
    join s in db.S on a.SID equals s.SID into tmp_s
    from s in tmp_s.DefaultIfEmpty()
    join ans in db.AS on a.ASID equals ans.ASID into tmp_ans
    from ans in tmp_ans.DefaultIfEmpty()
    join pr in db.P on p.PI equals pr.PID into tmp_pr
    from pr in tmp_pr.DefaultIfEmpty()
    where a.Active == 1
    group a by new { a.Active, pr.LN, pr.FN, b.BN, r.RID, r.R1, p.PN, s.S1, ans.AS1 }
      into grp
      orderby grp.Key.BN, grp.Key.R1, grp.Key.PN, grp.Key.S1, grp.Key.AS1
      select new
      {
          PIName = grp.Key.LN + " " + grp.Key.FN,
          BN = grp.Key.BN,
          RID = grp.Key.RID,
          R = grp.Key.R1,
          PN = grp.Key.PN,
          S = grp.Key.S1,
          AS = grp.Key.AS1,
          NumberOA = grp.Count()
      }; 
```

感谢您的回答。@Albin Sunnanbo：我不知道如何检查执行计划。我的 LINQ 运行正确并产生所需的输出。只是很慢。我想加快速度。@usr：原始sql如下：对愚蠢的表名感到抱歉。原始代码是保密的。所以我没有发布完整的表名。

```
CREATE PROCEDURE [dbo].[report_CBRP] --  
AS
SELECT LN + ' ' + FN As PIN, BN, R.RID, R, PN, 
S, AS, COUNT(*) As NOA 
FROM A 
LEFT JOIN AL 
ON A.AID = AL.AID 
AND AL.CL = 1
LEFT JOIN L 
ON AL.LID = L.LID 
LEFT JOIN R
ON L.RID = R.RID 
LEFT JOIN B 
ON R.BID = B.BID 
LEFT JOIN AP
ON A.AID = AP.AID 
AND AP.CPl = 1
LEFT JOIN P 
ON AP.PID = P.PID 
LEFT JOIN S 
ON A.SID = S.SID 
LEFT JOIN AS
ON A.ASID = AS.ASID
LEFT JOIN P
ON P.PI = P.PID 
GROUP BY A.A, LN , FN , B.BN, R.RID, R.R, P.PN, 
S.S, AS.AS 
HAVING A.A = 1 
ORDER BY B.BN, R.R, P.PN, S, AS
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T12:57:56.090

看来你在这里做 SQL 艰苦的生活。

1.  一般来说，尽量避免这么多的连接，而是将它们分解成几个小的查询。
2.  不仅如此，您正在执行一个本身就是一项昂贵的操作的组，更不用说有这么多列了
3.  我注意到您正在加入每个表中的**所有**列。尝试只选择相关的列。
4.  还注意到，像*al*、*ap*和*l*这样的组中没有使用很少的表。你需要它们吗？
5.  对来自 EF 的只读数据使用 AsNoTracking()。这样你就可以加快速度。
6.  使用 SQL 视图

# javascript - 视口大小更改时自动刷新页面

> ID：12043956
> 
> 赞同：8
> 
> 时间：2012-08-20T19:34:53.383
> 
> 标签：javascript, html, css

我正在为我的网站使用响应式和自适应媒体查询以适应智能手机......现在的问题是我的最大宽度移动查询以 480 像素结束，这是大多数手机旋转的显示宽度（当手机侧放时...... .)。现在有些手机，比如 HTC 的愿望有 533px 的最大屏幕宽度，现在当用户第一次在垂直位置（320px 屏幕宽度）加载页面并且他/她旋转将屏幕旋转到 533px 宽度时，它超出了我的设计规范它看起来有点蹩脚......（因为布局是为了最大 480 像素......）

现在解决这个问题的唯一方法是在视口尺寸发生变化后刷新页面。如何强制刷新？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T19:43:14.293

如果设备旋转窗口调整大小。

```
window.onresize = function(event)
{
document.location.reload(true);
} 
```

# javascript - jQuery 函数在 IE7 中不起作用

> ID：12043957
> 
> 赞同：0
> 
> 时间：2012-08-20T19:34:55.260
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-7

我目前正在处理这个小型 AJAX 新闻信函注册表单，以允许用户订阅邮件列表。虽然这适用于几乎所有浏览器，但它不适用于 IE7 及以下版本。我想知道我的源代码是否有问题，或者是否有另一种方法可以在纯javascript中执行相同的功能？

下面是我的javascript：

```
$(document).ready(function(){
/* Form Appear Effect */
$('#exists').hide();
$("#formParts").hide();
$("#thanks").hide();
$("#wait").hide();

$('#exists').css({"visibility":"hidden"});

$('#email').click(function() {
    $('#formParts').slideDown();
});

/* AJAX Form Submission */
$('#submitButton').click(function () {
    //Reset Form
    $('.blogSignUp').css('border', '1px solid #E6E6E6');
    $('.blogSignUp').attr('enabled','true');

    // Extract Variable
    var firstName = $('#firstName').val();
    var lastName = $('#lastName').val();
    var email = $('#email').val();

    // Check for Blank Bields
    if (firstName == "" || lastName == "" || email == "") {
        if (email == "")
            $('#email').css('border', '1px solid #E42217');
        if (firstName == "")
            $('#firstName').css('border', '1px solid #E42217');
        if (lastName == "")
            $('#lastName').css('border', '1px solid #E42217');
        return false;
    } else {

        // Check Email
        if (echeck(email) == false) {
            $('#email').css('border', '1px solid #E42217');
            return false;
        } else {
            // Disable and Hide Forms for now...
            $('#formParts').slideUp ();
            $('#form').slideUp();
            $('#exists').fadeOut();

            // Show processing message...
            $("#wait").fadeIn();    

            var data = $('#signup').serialize();

            // Show processing message...
            $("#wait").fadeIn();

            $.ajax({
                type: 'POST',
                url: '../signup.php',
                data: {
                    action: 'signupFunction',
                    firstName: firstName,
                    lastName: lastName,
                    email: email,
                },
                error: function(MLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                },
                success: function(result, status) {
                    //alert(result);
                    if (result == "Good") {
                        $("#exists").fadeOut();
                        $("#wait").fadeOut();
                        $("#thanks").fadeIn();
                    }
                    if (result == "Exists") {
                        $('.blogSignUp').css('border', '1px solid #E6E6E6');                    
                        $('#email').css('border', '1px solid #E42217');
                        $("#wait").fadeOut();
                        $("#exists").fadeIn();
                        $('#formParts').slideDown();
                        $('#form').slideDown();
                        return false;
                    }
                }
            });
        }
    }      
}); }); function echeck(str) {

    var at="@"
    var dot="."
    var lat=str.indexOf(at)
    var lstr=str.length
    var ldot=str.indexOf(dot)
    if (str.indexOf(at)==-1){
       return false
    }

    if (str.indexOf(at)==-1 || str.indexOf(at)==0 || str.indexOf(at)==lstr){
       return false
    }

    if (str.indexOf(dot)==-1 || str.indexOf(dot)==0 || str.indexOf(dot)==lstr){
        return false
    }

     if (str.indexOf(at,(lat+1))!=-1){
        return false
     }

     if (str.substring(lat-1,lat)==dot || str.substring(lat+1,lat+2)==dot){
        return false
     }

     if (str.indexOf(dot,(lat+2))==-1){
        return false
     }

     if (str.indexOf(" ")!=-1){
        return false
     }

     return true                    } 
```

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:54:19.570

```
data: {
                action: 'signupFunction',
                firstName: firstName,
                lastName: lastName,
                email: email,
            } 
```

应该

```
data: {
                action: 'signupFunction',
                firstName: firstName,
                lastName: lastName,
                email: email
            }, 
```

将逗号插入数组的最后一个变量时，IE 会中断，而 firefox 不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:39:52.097

假设你的代码没有错误，你总是可以为 IE7 做一个硬编码的解决方法。

[jQuery浏览器检测](http://api.jquery.com/jQuery.browser/)

**用户jQuery**来检测用户正在使用什么浏览器，并创建一个条件来***说明***他们是否在 IE7 中**，*****执行**此*操作***制作一个ie7补丁。*

 *（如果您想知道“为什么要使用 IE7？”，请节省时间并停下来。浏览器因引起开发人员问题而臭名昭著，尤其是 jQuery。这可能不是您的错，而是浏览器的问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:52:01.987

嘿，我认为唯一的问题是

```
Problem at line 62 character 33: Extra comma.
email: email, 
```

还尝试使用 JSLINT 检查您的代码是否有错误。IE 对这些错误非常有针对性。*

# ruby - 你如何创建一个副本/复制一个 mongoid 对象？

> ID：12043958
> 
> 赞同：11
> 
> 时间：2012-08-20T19:34:55.517
> 
> 标签：ruby, mongodb, mongoid

ActiveRecord 安全地[支持 dup](https://stackoverflow.com/questions/60033/what-is-the-easiest-way-to-duplicate-an-activerecord-record)，但 mongoid 似乎无法正确处理它。

我想做以下事情：

```
x = MyModel.new
x.save
y = x.dup
y.save 
```

并且 y 应该是一个全新的对象，这样：

```
x != y
x.id != y.id 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-21T23:12:04.777

尝试这个：

```
x = Item.new
x.save
y = x.clone
y.save 
```

它应该更改 _id 并复制所有其他字段。我注意到这似乎不适用于嵌入式文档。对于原始文档中的每个嵌入文档，它会在克隆中创建一个带有新 ID 的空白嵌入文档，但不会填充任何其他字段。

如果使用嵌入式文档，最好编写自己的类方法。

# php - PHP 多维数组（导入 Twitter 结果）

> ID：12043962
> 
> 赞同：0
> 
> 时间：2012-08-20T19:35:04.563
> 
> 标签：php, arrays, codeigniter

我有一个包含多个数组的数组结果。我需要获取第二级数组的所有“文本”字段并将它们组合成一个变量。我对如何做到这一点持空白

大批：

```
大批 （
[0] => 标准类对象 (
    [created_at] => 2012 年 8 月 20 日星期一 18:31:50 +0000
    [from_user] => 收集硬件
    [from_user_id] => 769712384
    [from_user_id_str] => 769712384
    [from_user_name] => 收集风火轮
    [地理] =>
    [id] => 237617956643827712
    [id_str] => 237617956643827712
    [iso_language_code] => zh
    [元数据] => 标准类对象 (
        [result_type] => 最近）
    [profile_image_url] => 网址
    [profile_image_url_https] => 网址
    [来源] =>网络**
    [文本] => 第二条推文#step2**
    [to_user] =>
    [to_user_id] => 0
    [to_user_id_str] => 0
    [to_user_name] => )
[1] => 标准类对象 (
    [created_at] => 2012 年 8 月 20 日星期一 16:41:53 +0000
    [from_user] => 收集硬件
    [from_user_id] => 769712384
    [from_user_id_str] => 769712384
    [from_user_name] => 收集风火轮
    [地理] =>
    [id] => 237590287504011264
    [id_str] => 237590287504011264
    [iso_language_code] => zh
    [元数据] => 标准类对象 (
        [result_type] => 最近）
    [profile_image_url] => 网址
    [profile_image_url_https] => 网址
    [来源] =>网络**
    [文本] => 第一条推文#step1**
    [to_user] =>
    [to_user_id] => 0
    [to_user_id_str] => 0
    [to_user_name] => )
)
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:46:32.600

```
for($i = 0; $i < count($array); $i++) {
    echo "The text for $i is: " . $array[$i][text] . "\n";
} 
```

**结果**

```
0 的文本是：第二条推文#step2**
1 的文字是：First Tweet #step1**
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:42:52.157

尝试：

```
$text = '';

foreach($array as $item) {
    $text .= $item['text'];
} 
```

编辑：由于数组包含 stdClass 实例，您可能需要这样做：

```
$text = '';

foreach($array as $item) {
    $text .= $item->text;
} 
```

几乎是一样的。我不确定 PHP 对象是否可以使用数组表示法访问它们的属性。所以，尝试第一个，如果它不起作用，则执行第二个。

# tags - 无法为标签“sec:authorize”加载标签处理程序类“org.springframework.security.taglibs.authz.AuthorizeTag”

> ID：12043963
> 
> 赞同：1
> 
> 时间：2012-08-20T19:35:05.133
> 
> 标签：tags, spring-security

我正在使用 Netbeans 7.1.2 开发 Spring MVC 应用程序。有安全问题。当我想为未经授权的当前用户隐藏页面上的某些操作时。这是具有安全性的 pom 的一部分：

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>3.0.6.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>3.0.6.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-taglibs</artifactId>
    <version>3.0.6.RELEASE</version>
    <scope>compile</scope>

</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>3.0.6.RELEASE</version>
</dependency> 
```

这是jsp的一部分：

```
<%@taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>...
<sec:authorize>  bla-bla </sec:authorize> 
```

所以我包含了所需的依赖项，包含了 taglib，但得到了下一个错误

```
HTTP Status 500 - /WEB-INF/views/showEmployees.jsp (line: 56, column: 21) Unable to load tag handler class "org.springframework.security.taglibs.authz.AuthorizeTag" for tag "sec:authorize"

type Exception report

message /WEB-INF/views/showEmployees.jsp (line: 56, column: 21) Unable to load tag handler class "org.springframework.security.taglibs.authz.AuthorizeTag" for tag "sec:authorize"

description The server encountered an internal error (/WEB-INF/views/showEmployees.jsp (line: 56, column: 21) Unable to load tag handler class "org.springframework.security.taglibs.authz.AuthorizeTag" for tag "sec:authorize") that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: /WEB-INF/views/showEmployees.jsp (line: 56, column: 21) Unable to load tag handler class "org.springframework.security.taglibs.authz.AuthorizeTag" for tag "sec:authorize"
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:199)
    org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1226)
    org.apache.jasper.compiler.Parser.parseElements(Parser.java:1452)
    org.apache.jasper.compiler.Parser.parse(Parser.java:138)
    org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
    org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

# shell - 解析 rsync 输出

> ID：12043965
> 
> 赞同：1
> 
> 时间：2012-08-20T19:35:10.103
> 
> 标签：shell, tar, rsync

我正在尝试解析 rsync 命令的进度条输出。我想使用 rsync 进度条中的百分比数据并将其显示在对话框仪表实用程序上。

rsync 进度条数据如下所示：

```
32768   0%    0.00kB/s    0:00:00  
   330563584   8%  315.22MB/s    0:00:11 
```

到目前为止，我已经尝试过 sed 来提取数据：

```
rsync -a --progress test.tar.gz /media/sdb1 \
    | sed -u -E 's/(^|.*[^0-9])([0-9]{1,3})%.*/\2/p' 
```

我能够单独获得最终值 100。我无法获得中间值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-30T10:50:26.503

这个答案 [1] 最终将我引向了主要问题，为什么没有按我预期的方式工作。

有了这个，下面的代码片段为您提供了*所有*可以用于解析的输出。“最终”行（例如 100%，还有要考虑的 xxx 文件）以及仅用 ^M 分隔的中间内容。

```
/usr/bin/rsync --info=progress2 --no-i-r -avr /foo /boar | \
 gawk '1;{fflush()}' RS='\r|\n' | \
while read -r i
do
 echo Got: -$i-
done 
```

请注意原始答案中有关分隔行尾的注释。

[1][实时去除shell中的回车](https://stackoverflow.com/questions/16319179/realtime-removal-of-carriage-return-in-shell)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:46:42.553

I found a possible solution to this problem. It could be done as follows:

```
 rsync -a --progress test.tar.gz /media/sdb1 |
    unbuffer -p grep -o "[0-9]*%" | 
    tr -d '% 
```

# php - 使用带有 PDO 的数组更新多个 MySQL 表列

> ID：12043967
> 
> 赞同：6
> 
> 时间：2012-08-20T19:35:30.113
> 
> 标签：php, mysql, pdo, sql-update

我正在尝试将所有 MySQL 连接从旧的 mysql_query 切换到 PDO。我正在尝试使用不同的数组更新 MySQL 表的多行和多列，但收到以下错误：

[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 '(accnt, car, radio, misc) values ('admin', '300.00', '400.00', '10.00') WHERE ID' at line 附近使用1

从以下代码：

```
$account = $_POST['account'];
$car_lease = $_POST['car_lease'];
$radio_lease = $_POST['radio_lease'];
$misc_lease = $_POST['misc_lease'];
$lease_ID = $_POST['lease_ID'];

//$data = array_map(null,$account,$car_lease,$radio_lease,$misc_lease);
$A = count($lease_ID);

try {
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
    $STH = $DBH->prepare('UPDATE lease (accnt, car, radio, misc) values (:account, :car_lease, :radio_lease, :misc_lease) WHERE ID = :lease_ID');
    $i = 0;
    while($i < $A) {
        $STH->bindParam(':account', $account[$i]);
        $STH->bindParam(':car_lease', $car_lease[$i]);
        $STH->bindParam(':radio_lease', $radio_lease[$i]);
        $STH->bindParam(':misc_lease', $misc_lease[$i]);
        $STH->bindParam(':lease_ID', $lease_ID[$i]);
        $STH->execute();
        $i++;
    }
}
catch(PDOException $e) {  
    echo "I'm sorry, but there was an error updating the database.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
} 
```

我相信这个问题是由我调用语句句柄的方式引起的，但我不确定我的语法的哪一部分不正确。另外，这是处理这种情况的最佳方法吗？还是有更好的方法来更新表中的多行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T19:49:00.943

您混淆了`INSERT`and`UPDATE`语句之间的语法。`VALUES()`您需要一个`SET`子句，而不是一个列表：

```
$STH = $DBH->prepare('
    UPDATE lease 
    SET 
      accnt = :account, 
      car = :car_lease, 
      radio = :radio_lease, 
      misc = :misc_lease 
    WHERE ID = :lease_ID
'); 
```

查看[MySQL`UPDATE`语法参考](http://dev.mysql.com/doc/refman/5.0/en/update.html)以获取使用 with`UPDATE`语句的完整规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-13T07:19:20.900

如果您可以信任您的键和值，我认为这将是最简单和最简单的解决方案：

```
$update = 'SET ';
$fields = array_keys($_POST);
$values = array_values($_POST);
foreach ($fields as $field) {
    $update .= $field . '=?,';
}
$update = substr($update, 0, -1);
$db->query("update sub_projects ${update} where id=${_GET['id']}");
$db->execute($values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T16:53:16.680

更新多个字段的简单方法。但非常重要的是，编辑页面上的输入必须与数据库表的顺序相同。

希望它的帮助

```
if (isset($_POST['pageSubmit'])) {
echo '<pre>';
print_r($_POST['page']);
echo '</pre>';

 $fields = array('id','name','title','content','metaKey','metaDescr','metaTitle');//fields array

$fields = array_map(function($field){
return "`$field`";
},$fields);

$queryArray = array_combine($fields,$_POST['page']);//createng array for query

$countFields = count($queryArray);//getting count fields

$id = array_splice($queryArray , 0,-($countFields-1));//getting id of page

$insertArray = $queryArray;//getting new fields array without first key and value

function updatePage($db, array $fields, array $id){

    $where = array_shift($id);  
    $sql = array();
foreach ($fields as $key => $value) {

   $sql[] = "\n".$key."" ." = "."'".$value."'";
}
$sql = implode(",",$sql);

   try {

       $query = $db->prepare("UPDATE `pages` SET $sql WHERE `id` = $where ");           

       $query->execute();

   } catch (Exception $e) {

    echo $e->getMessage();

   }

 }

   updatePage($db, $insertArray, $id);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T15:22:36.510

更好的方法是[CASE](https://dev.mysql.com/doc/refman/5.0/en/case.html)，它比准备好的 stmt 快 3-4 倍

# python - 如何使用 openpyxl 读取 xlsx 颜色信息

> ID：12043973
> 
> 赞同：5
> 
> 时间：2012-08-20T19:36:09.793
> 
> 标签：python, excel, openpyxl

我正在使用 openpyxl 读取 excel 文件。

对于我的应用程序，我需要读取 xlsx 文件中单元格的背景颜色，但我找不到如何加载这些颜色信息。

我尝试使用 cell.style.fill.color.index，但它只返回 FFFFFFFF 作为背景，这与我读取的文件不正确。

openpyxl 是否支持读取颜色格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T21:45:44.460

## 更新（2014）：

我将[openpyxl](/questions/tagged/openpyxl "显示标记为“openpyxl”的问题")更新到 v. 2.2。他们似乎已经解决了我在原始答案中记录的问题（见下文）。通过 Excel 手动设置背景颜色后，我现在能够成功检索背景颜色。但是，语法略有变化：

```
somecell.fill.start_color.index 
```

## 原始回复（2012 年）：

我对此进行了试验，并注意到如果我像这样通过 openpyxl 设置背景颜色：

```
_cell.style.fill.fill_type = Fill.FILL_SOLID
_cell.style.fill.start_color.index = Color.DARKGREEN 
```

然后像这样检索值：

```
_style.fill.start_color.index 
```

然后我得到正确的回应：

```
'FF008000' 
```

但是，如果我在 Excel 中设置背景颜色并保存文件，然后通过 openpyxl 访问它，那么我会得到与您相同的结果：

```
'FFFFFFFF' 
```

因此，结果似乎是 opepyxl 样式仍然不可靠。请参阅问题下的我的评论，其中包含指向 openpyxl 的作者的评论的链接。

# entity-framework - 更改 LocalDb 的默认位置

> ID：12043975
> 
> 赞同：15
> 
> 时间：2012-08-20T19:36:18.933
> 
> 标签：entity-framework, localdb

我首先使用 EF5 代码进行编程，并想使用 LocalDb。如何更改 LocalDb 数据库文件的默认位置？根据[http://blogs.msdn.com/b/sqlexpress/archive/2011/10/28/localdb-where-is-my-database.aspx ，默认位置是 %USERPROFILE% 目录](http://blogs.msdn.com/b/sqlexpress/archive/2011/10/28/localdb-where-is-my-database.aspx)

以前我使用的是接受数据库路径/名称参数的 SqlCe DbConnectionFactory。如果我使用 AttachDbFileName 参数，那么如果数据库不存在（它应该创建它！），它会引发异常。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-21T14:05:09.930

由于[这篇文章](https://stackoverflow.com/questions/11989371/can-i-specify-the-filename-for-a-localdb-database-in-entity-framework-5)，我得到了这个工作。答案很简单。基本上我加了

```
 <connectionStrings>
<add name="DataModel.Context" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=database;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\database.mdf" providerName="System.Data.SqlClient" /> 
```

到 app.config 的配置部分，它神奇地将“数据库”替换为我的实际数据库（DbContext）名称。如果数据库不存在，EF 代码首先也可以完美地创建数据库。

# selenium - 使用 Selenium 执行一组 Web 管理任务所需的教程或提示（初级查询）

> ID：12043980
> 
> 赞同：1
> 
> 时间：2012-08-20T19:36:40.677
> 
> 标签：selenium, selenium-ide

我正在查看一些指针/教程，甚至可能是另一个问题来帮助我完成任务。我正在寻找自动化网络管理任务。我想做的是：

1.  登录到应用程序。
2.  导航到特定菜单。
3.  通过搜索栏搜索特定项目。
4.  如果该项目显示在搜索项目中，则单击 UI 上的一组按钮并继续执行任务。
5.  如果搜索结果中没有显示该项目，则继续搜索直到显示该项目，然后执行步骤 4。

我已经能够使用 Firefox 的 selenium IDE 插件执行第 3 步。但我不太确定如何进行以及在何处合并步骤 4 和 5 的逻辑。我是否使用编程语言？（如果是，那么如何？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:59:38.613

您很快就达到了 IDE 的极限。IDE 不包含逻辑，但它适用于快速而肮脏的自动化任务，找出定位器 ID，并帮助人们学习 selenium 的基础知识。我建议查看学习如何在 Selenium Webdriver 中编写脚本。文档：[http ://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

因此，例如，如果您使用的是 Java（这是从文档中窃取的）：

```
public class Selenium2Example  {
    public static void main(String[] args) {
        // Create a new instance of the Firefox driver
        WebDriver driver = new FirefoxDriver();

        // And now use this to visit Google
        driver.get("http://www.google.com");;

        // Find the text input element by its name
        WebElement element = driver.findElement(By.name("q"));

        // Enter something to search for
        element.sendKeys("Cheese!");

        //Pseudocode
        if(element.isDisplayed()){
           // Now submit the form. WebDriver will find the form for us from the element
           element.submit();
        }
        else{
        // Check the title of the page
           System.out.println("Page title is: " + driver.getTitle());
        }

        // Google's search is rendered dynamically with JavaScript.
        // Wait for the page to load, timeout after 10 seconds
        (new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return d.getTitle().toLowerCase().startsWith("cheese!");
            }
        });

        // Should see: "cheese! - Google Search"
        System.out.println("Page title is: " + driver.getTitle());

        //Close the browser
        driver.quit();
    }
} 
```

# android - 带有 TabHost 活动的 findViewById

> ID：12043981
> 
> 赞同：-1
> 
> 时间：2012-08-20T19:36:42.027
> 
> 标签：android, android-layout

我是 Android 编码的新手，所以我希望有人可以帮助我.. 我发现了。有一个类似的问题[，我如何从选项卡主机内的活动中找到选项卡主机内的视图的viewbyid？](https://stackoverflow.com/questions/10023058/how-do-i-findviewbyid-of-a-view-inside-a-tabhost-from-an-activity-thats-inside-t) 但答案对我不起作用......我的应用程序包括一个 main.xml 和 tab1.xml 和 tab2.xml 每个都有一个 Activity 类这里的代码：

```
public class MainActivity extends TabActivity {  

/** Called when the activity is first created. */ 
Intent tab1, tab2;

@Override 
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);  

    TabSpec firstTabSpec = tabHost.newTabSpec("tid1");  
    TabSpec secondTabSpec = tabHost.newTabSpec("tid2");  

    tab1 = new Intent(this, tab1Activity.class);
    tab2 = new Intent(this, tab2Activity.class);

    firstTabSpec.setIndicator("TAB1").setContent(tab1);  
    secondTabSpec.setIndicator("Tab2").setContent(tab2);  

    tabHost.addTab(firstTabSpec);  
    tabHost.addTab(secondTabSpec);  

} 
```

这里是 tabHost 的 Activity

```
 public class tab1Activity extends Activity
  {

/** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.xml);

    EditText t = (EditText) findViewById(R.id.note);
    t.setText("Test"); // here it crashes!

}

 } 
```

所以我的问题是如何使用 findViewById global？我应该有意图地工作吗？如果有人帮助我会很棒！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:23:32.023

我认为您应该检查您在 contentView 中设置的布局。可能是你问题的根源。

```
 public class tab1Activity extends Activity
  {

/** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.xml);　// <-------- your problem could be here

    EditText t = (EditText) findViewById(R.id.note);
    t.setText("Test"); // here it crashes!

}

 } 
```

# css - 如何为平板电脑和 iPhone 制作样式表

> ID：12043983
> 
> 赞同：3
> 
> 时间：2012-08-20T19:36:57.160
> 
> 标签：css, media, tablet

我在想样式表上的链接目标会使我的 css 文件仅在平板电脑或 iPhone 上加载时才加载。但我试图隐藏的元素仍然存在。我目前正在使用 (media="handheld")

```
 <link rel="stylesheet" type="text/css" hrf="css/media.css" media="handheld" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T20:11:46.977

有太多的移动设备模型需要为其编写样式表；你最好根据**Screen Size**调整你的 CSS 。

这对于定位不同尺寸的 Android 平板电脑特别有用。

请参阅此有用的教程以获取更多说明：

[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

因此，与其针对特定的屏幕尺寸（随着更多设备的发布而不断变化），您希望样式表根据屏幕尺寸而变化。

然后您将添加几个样式表：

```
<link rel="stylesheet" media="screen and (min-width: 480px) and (max-width: 700px)"     href="css/small.css" />
<link rel='stylesheet' media='screen and (min-width: 701px) and (max-width: 900px)'     href='css/medium.css' /> 
```

等等

所以 iPhone 会使用 small.css，大于 700px 的平板电脑会使用 medium.css。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:43:22.997

`Handheld`与 iOS 或 Android 设备相比，它更适用于 PDA 或功能手机等设备。您最好使用媒体查询来检测设备功能，然后进行相应调整。这是一篇示例文章：http: [//mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# ms-access - Access 97 到 2003 转换丢失 MSCOMCTL.OCX

> ID：12043988
> 
> 赞同：0
> 
> 时间：2012-08-20T19:37:10.323
> 
> 标签：ms-access, ms-office

我正在将我的 Access97 FE 迁移到 2003。一段时间以来，我一直在编译 97 前端和 2003 前端（我的 XP 机器为 97，Win7 机器为 2003）。就在最近（上周？）.. 转换时我开始丢失我的 MSCOMCTL.OCX 参考。然而，奇怪的是它只发生在我运行 Office 2003 (SP3) 的 Windows 7（32 位）机器上。如果我在另一台 Win7 64 位 Office 2003 (SP3) 机器上转换它，我不会丢失引用的文件。

我现在已经注册/取消注册 C:\windows\system32\mscomctl.ocx 好几次了（确保以管理员身份运行命令提示符）.. 并重新启动。我已经在有问题的机器上卸载了 Office 2003 并重新加载它无济于事。我已经确定 C:\windows\system32 在路径中..（它是）

如果我在我的 Win7 64 位机器上编译 FE，并将其分发到这台有问题的机器上，它将无限期地无法正确启动应用程序（在底部获得一个初始化栏）。如果我在故障机器上重新引用该文件并重新创建一个 MDE，它适用于 Windows 7 的 32 位版本和 64 位版本（即使 64 位在 C:\windows\syswow64 中有 mscomctl.ocx） ..

我的 Win7 32 位设置有问题吗？我可以使用旧版本的 FE（我在进行更改时会保留一个 repo），而且这些似乎不会丢失参考。有问题的 FE 在我的 Acc97 机器和 Win7 64 位机器上编译得很好。我曾经在“现在”有问题的 Win7 32 位机器上编译我所有的 2003 FE...？

我也多次在 MDB 文件上运行 decompile/repair/compile/compact。

任何人都可以建议尝试一下吗？

***更新*** 好吧，我把“问题”工作站吹走并重新加载了 Win7 Pro 64 位，无论如何这将使 WSUS 工作更容易。但是问题仍然存在......所以现在我不确定该怎么想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:44:53.740

您应该确认您的 Access 应用程序使用的 MSCOMCTL.OCX 版本与您可能编译它的任何机器上使用的版本相同。通过以下方式检查引用正在使用哪个文件：

```
函数列表引用（）

    暗淡一长
    暗淡 b 只要

    a = References.count

    对于 b = 1 到 a
        Debug.Print b & ": " & References(b).Name & vbTab & vbTab & References(b).FullPath
    下一个 b

结束功能

```

这将为您提供 Access FE 中所有引用的文件名和路径列表。

使用 Windows 资源管理器找到 Access 引用的 MSCOMCTL.OCX。右键单击该文件并记下版本。确认您在所有其他计算机上使用的 MSCOMCTL.OCX 是相同的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T05:25:46.223

也许`MSCOMCTL.OCX`您机器上的 已被自动 Windows 更新的较新版本取代？

在工作中，上周自动安装[某个更新](http://support.microsoft.com/kb/2687441/en-us)后，我们在某些机器上遇到了问题。
引用上述链接的“此安全更新的已知问题”部分：

> 基于 Windows Common Control 的嵌入式 ActiveX 控件可能无法在预先存在的 Office 文档、第三方应用程序中以及在开发人员模式下插入新控件时加载。

显然我们不是唯一遇到问题的人：
[安装 KB2687441 使用 MSCOMCTL.ocx 中的组件访问表单后无法打开](http://social.technet.microsoft.com/Forums/en-US/office2007deploymentcompatibility/thread/7faa69b8-a60a-436b-9058-3f87b9866f47)

# html - 从书签 HTML 文件创建多个 Windows URL 快捷方式

> ID：12043989
> 
> 赞同：6
> 
> 时间：2012-08-20T19:37:12.380
> 
> 标签：html, windows, google-chrome, vbscript, bookmarks

我在 Google Chrome 中有大量书签。我想将它们全部转移到 Windows 文件夹中，这样每个书签都将成为网站的快捷方式（我想要一个快捷方式列表，就像任何常规应用程序快捷方式列表一样）。我还想保留书签的名称和图标。

我寻找一种方法来实现我的目标，但我能找到的只是在 Chrome 中手动，或者*手动* *将*链接从从 Chrome 书签管理器中的书签导出的 HTML 文件拖放到文件夹中。`Create application shortcuts`

 *由于没有简单的解决方案（AFAIK），我考虑以另一种方式实现它。

基本上，我所拥有的是一个名为`bookmarks.html`（由.里面的菜单中的`Export bookmarks to HTML file`功能创建的 HTML 文件。它是一长串链接（s）-我有 250 多个书签。 `Organize``Bookmark Manager``<a>`

我可以轻松地从文件中提取我需要的数据，可能使用 XML 解析器，尽管即使使用正则表达式也是可能的，因为结构是已知的并且在整个文件中是相同的：

```
...
<DT><A HREF="http://data.stackexchange.com/" ADD_DATE="1342120101" ICON="data:image/png;base64,iVBORw0......">Stack Exchange</A>
<DT><A HREF="http://www.istockphoto.com/" ADD_DATE="1285715116" ICON="data:image/png;base64,iVBORw0.......">Web Design</A>
<DT><A HREF="http://icons.mysitemyway.com/" ADD_DATE="1287435657" ICON="data:image/png;base64,iVBORw0........">Ico.etc</A>
<DT><A HREF="http://www.shutterstock.com/" ADD_DATE="1285715294" ICON="data:image/png;base64,iVBORw0.....">Shutterstock</A>
... 
```

问题是我不知道如何创建一个脚本来获取数据 - 即 URL、图标（在 base64 中）和名称 - 并使用该数据制作 Windows URL 快捷方式。我知道很少有 VB 脚本可以创建自定义快捷方式，但不能同时创建多个（嗯，大约 300 个）快捷方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:12:37.520

嗯，结合任何有用的工具，只有您需要定期进行操作。我想必须可以从 chrome 中获取您的源代码，无论如何这里有一个脚本可以满足您的要求。

```
Const ForReading = 1, ForWriting = 2, ForAppending = 8, CreateIfNeeded = true
outpath = "g:\script\shortcut\url2\"
Set objFSO = CreateObject("Scripting.FileSystemObject")
bookmarkfile = "bookmarks.html"
Set bookmarks = objFSO.OpenTextFile(bookmarkfile, ForReading)
Set regEx = New RegExp
regEx.Global = True
Set regEx2 = New RegExp
regEx2.Global = True
regEx2.Pattern = "[^a-zA-Z0-9-_.]"

regEx.Pattern = "<DT><A HREF=""(.*)"" ADD_DATE.*>(.*)</A>"
do until bookmarks.AtEndOfStream
  line = bookmarks.readline()
  if regEx.test(line) then
    shortcut = regEx.Replace(line,"$1")
    filename = trim(regEx.Replace(line,"$2"))
    filename = Regex2.Replace(filename, "_")
    filename = outpath & left(filename, 80) & ".url"
    wscript.echo filename
    'the following skips invalid filenames, you should add a routine to filter out invalid filename characters in your codeset
    on error resume next
    Set objFile = objFSO.OpenTextFile(filename, ForWriting, CreateIfNeeded)
    if err.number <> 0 then
      wscript.echo err.description
    end if
    objFile.write "[InternetShortcut]" & vbcrlf & "URL=" & shortcut
    objFile.close
  end if
loop 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-17T09:32:32.410

## - 这真的很有效 -

我将 CHROME BOOKMARKS（也对我的 GOOGLE BOOKMARKS 执行此操作）导出为单个 .html 文件。这可以在 Chrome 中通过书签管理器的 ORGANIZE | 完成。导出下拉菜单。然后我打开了我的 USER\Favorites 文件夹。我不使用 IE，所以它具有 IE 附带的所有默认链接。我创建了一个名为 CHROME BOOKMARKS 的新文件夹。我打开 IE 并单击星形 FAVORITES 按钮。我拉下添加到收藏夹菜单并选择导入和导出。这启动了一个导入向导。我告诉它我正在导入收藏夹，并将其定向到 Chrome 导出的 .html 文件（#1），并告诉它导入我创建的 CHROME BOOKMARKS 文件夹（#2）。

这为我在 Chrome 中的每个书签创建了一个 .url 文件，其中包括书签栏和其他书签。

我测试并确认通过双击或拖放在 Chrome 中启动了一个 .URL 文件。

## -这个答案来自你在超级用户的问题 -*

# soap - 防止以“多部分/相关”的内容类型发送 SOAP 消息

> ID：12043991
> 
> 赞同：2
> 
> 时间：2012-08-20T19:37:26.753
> 
> 标签：soap, http-headers, ibm-rad

我正在从 web 服务客户端（代码由 IBM RAD 7.5 生成）向主机发送 SOAP 消息，并且它带有 web 服务故障，并且主机日志中的消息读取为“prolog 中不允许的内容”。当我使用 SoapUI 或简单的 apache HttpClient 测试客户端发送相同的内容时，主机会接收并处理消息，并得到预期的响应。

据我所知，不同之处在于正在发送的 HTTP 标头。

RAD 生成的客户端：

```
POST /ws/mycompany/webservice/SomeWebServiceName/soap11 HTTP/1.1
主机：http://host.com/ws/mycompany/webservice/SomeWebServiceName/soap11
接受：application/soap+xml,multipart/related,text/*
用户代理：IBM WebServices/1.0
缓存控制：无缓存
Pragma：无缓存
SOAPAction：“”
连接：保持活动
保存连接：7814631881345232300226
IBM-WAS-CLIENT：是的
内容类型：多部分/相关；边界=MIMEBoundaryurn_uuid_E54EE0B5F8ED486B811345232300773；类型=“应用程序/xop+xml”；开始=“”；开始信息=“文本/xml”
内容长度：2553
日期：格林威治标准时间 2012 年 8 月 17 日星期五 19:38:20

--MIMEBoundaryurn_uuid_E54EE0B5F8ED486B811345232300773
内容类型：application/xop+xml；字符集=UTF-8；类型=“文本/xml”
内容传输编码：二进制
内容 ID：

<soapenv:信封...
--MIMEBoundaryurn_uuid_E54EE0B5F8ED486B811345232300773--

```

对于 SoapUI：

```
POST /ws/mycompany/webservice/SomeWebServiceName/soap11 HTTP/1.1
接受编码：gzip,deflate
内容类型：文本/xml；charset=UTF-8
SOAPAction：“”
内容长度：2732
主机：本地主机：9111
连接：保持活动
用户代理：Apache-HttpClient/4.1.1 (java 1.5)

<soapenv:信封...

```

还有一个使用 apache HttpClient 实现的非常简单的客户端：

```
POST /ws/mycompany/webservice/SomeWebServiceName/soap11 HTTP/1.1
用户代理：Jakarta Commons-HttpClient/3.1
传输编码：分块
主机：本地主机：9111

8da
<soapenv:信封...
0

```

据我所知，这三者之间的区别在于，由 RAD 生成的客户端生成的请求具有内容类型“多部分”并定义了 MIME 边界。我无权访问主机系统，但主机似乎无法处理多部分消息。

有没有办法强制 IBM 客户端代码像 SoapUI 或 HttpClient 一样简单地发送消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:20:28.353

看起来问题是`true`在 BindingProvider 中将 MTOM 设置为。

我将代码更改为：

```
 SOAPBinding soapBinding = (SOAPBinding) bindProvider.getBinding();
    soapBinding.setMTOMEnabled(false); 
```

一切正常。我认为 MTOM 设置为`true`是因为应用程序中的其他客户端需要它，并且此代码看起来像是基于其他客户端的代码。由于此 Web 服务调用实际上不需要 MTOM，因此将其关闭是没有问题的。

另请参阅：[http ://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftwbs_enablemtom.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftwbs_enablemtom.html)

# php - 使用 html 和 php 的复选框数组

> ID：12043994
> 
> 赞同：1
> 
> 时间：2012-08-20T19:37:46.720
> 
> 标签：php, html, arrays, checkbox

我有一段代码如下：

```
<td><?
    $days = array("Sun","Mon","Tue","Wed","Thur","Fri","Sat");
    for($i=1;$i<8;$i++)
    {
        echo $days[$i-1]?><input type="checkbox" name="labDays[]" value="<?=$days[$i]?>" checked="checked"><?
    }?>
</td> 
```

但是，当我跑步时`print_r($_REQUEST['labDays']);`

我明白了`Array ( [0] => [1] => [2] => [3] => [4] => [5] => [6] => )`

我期望`Array ( [0] => Sun[1] => Mon[2] => Tue[3] => Wed[4] => Thur[5] => Fri[6] => Sat)`

我确定这很愚蠢，但我不确定我错过了什么......

`print_r($_REQUEST)`呕吐物：`Array ( [pg] => 12 [msg] => Facility Already Exist [facilityname] => kjgkjhgkjhg [facorgtype] => [facilitytype] => [administratorsname] => [divisionname] => [streetaddress1] => [streetaddress2] => [city] => [state] => [zipcode] => [phonenumber] => [faxnumber] => [email] => [mainstate] => [labDays] => Array ( [0] => [1] => [2] => [3] => [4] => [5] => [6] => ) [facBillingContact] => [facBillingPhone] => [facBillingFax] => [facBillingRep] => [facBillingAccNum] => [facNotes] => [submit] => Create )`

`var_dump($_REQUEST['labDays'])`：

```
array
  0 => string 'Sun' (length=3)
  1 => string 'Mon' (length=3)
  2 => string 'Tue' (length=3)
  3 => string 'Wed' (length=3)
  4 => string 'Thur' (length=4)
  5 => string 'Fri' (length=3)
  6 => string 'Sat' (length=3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:51:23.630

我相信这就是您正在寻找的：

```
 <?php
    $days = array("Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat");
    foreach ($days as $day) {
        echo <<<HTML
    <label>$day
        <input type="checkbox" name="labDays[]" value="$day" checked>
    </label>
HTML;

    }
    ?> 
```

几点注意事项：

**PHP**

*   不推荐使用简写语法（`<? ?>`尤其是）。`<?= ?>`
*   对于迭代数组，`foreach`比 a 更适合`for`。
*   我对字符串使用 PHP 的 heredoc 语法。这样我就避免了引号混淆。
*   使用`$_POST`or`$_GET`而不是`$_REQUEST`，这样被认为更安全。

**HTML**

*   在 HTML 中为表单元素使用标签，这会将文本与表单控件相关联，此外，当您单击文本时，它也会标记相应的复选框！
*   该`checked`属性不需要任何值。它在那里就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:39:47.550

如果你想遍历数组，`foreach`是最好的选择

```
$days = array("Sun","Mon","Tue","Wed","Thur","Fri","Sat");
foreach($days as $k=>$v)
{
    echo $k?><input type="checkbox" name="labDays[]" value="<?=$v?>" checked="checked"><?
}?> 
```

使用`for`，您可以这样做：

```
$days = array("Sun","Mon","Tue","Wed","Thur","Fri","Sat");
for($i=0;$i<=6;$i++)
{
    echo $i;?><input type="checkbox" name="labDays[]" value="<?=$days[$i]?>" checked="checked"><?
}?> 
```

推荐的方式..

```
$days = array("Sun","Mon","Tue","Wed","Thur","Fri","Sat");
foreach($days as $k=>$v)
{
    echo $k . ' <input type="checkbox" name="labDays[]" value="'.$v.'" checked="checked">'; //you can give your styles and css ofcourse to make it better..
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T19:52:55.343

也许用*echo*打印值：

```
<input type="checkbox" name="labDays[]" value="<?php echo $days[$i]; ?>" checked="checked"> 
```

# entity - MVC4 实体框架不重建类

> ID：12043998
> 
> 赞同：1
> 
> 时间：2012-08-20T19:37:58.050
> 
> 标签：entity, asp.net-mvc-4

我有一个新的 MVC4 应用程序。每当我添加/更改我的 SQL Server 数据库并在 EDMX 设计器中运行从数据库更新模型选项时，它似乎都可以工作（我可以看到字段添加和新的存储过程）但是，这些更改在我的代码中不可用。我必须删除 EDMX 文件并重新开始，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:03:11.117

您可以右键单击并选择运行自定义工具。这将重新运行 t4 模板并重新生成代码。您可能必须对 edmx 文件下的每个 TT 文件执行一次。