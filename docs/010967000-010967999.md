# StackOverflow 问答 10967000-10967999

# html - 无法在 div 中选择文本

> ID：10967000
> 
> 赞同：0
> 
> 时间：2012-06-10T07:20:14.203
> 
> 标签：html, css, css-float

我有一个布局，其中三列全部通过浮动向左堆叠。在内部 div 中，我有 4 列，其中 3 列向左浮动，1 列向右浮动。这导致无法选择任何文本。如果我删除浮动，我可以选择东西，但它会弄乱布局。

该页面可以在这里找到：http: [//2006scape.com/services/hiscores](http://2006scape.com/services/hiscores)

我尝试过的：我尝试更改各种 div 上的 z-index，检查所有浮点数以查看是否存在任何冲突，但我一直无法找到问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:25:28.587

内部布局应该用一张**桌子**来完成。排名**表**是**表格数据**。

你知道，桌子并不全是邪恶的……

**[现场示例](http://dabblet.com/gist/2904396)**

# python - 装饰器不传递参数？

> ID：10967001
> 
> 赞同：0
> 
> 时间：2012-06-10T07:20:22.753
> 
> 标签：python, sqlite, functional-programming, decorator, pysqlite

我一直致力于将 n 维数组序列化为一维“数组”数据库：

```
from collections import Iterable, Mapping
import sqlite3

def pass_many(vals, some_funct, args=()):
    if not vals:
        return
    if isinstance(vals, Iterable) and not isinstance(vals, (basestring, Mapping)):
        for v in vals:
            pass_many(v, some_funct, args)
    else:
        some_funct(vals, *args)

def counter(func):
    def wrapper(v, *args, **kwargs): # added 'v' arg to no avail
        wrapper.count = wrapper.count + 1
        test_var_args(v, *args, **kwargs)
        #return func(*args, **kwargs)
    wrapper.count = 0

    return wrapper

def test_var_args(farg, *args):
    print "formal arg:", farg
    for arg in args:
        print "another arg:", arg

@counter
def insert(val, cursor, table="wordlist", logfile="queries.log"):
    print val, cursor, table, logfile
    if val:
        if isinstance(val, (basestring, Mapping)):
            val = '\"' + val + '\"'
        else: val = str(val)
        query = "insert into tablename values (?);".replace('tablename', table).replace('?', val)
        #if logfile: to_logfile(query + '\n', logfile)
        cursor.execute(query)

if __name__ == '__main__':
    connection = sqlite3.connect('andthensome.db')
    cursor = connection.cursor()
    cursor.execute("create table array (word text);")
    pass_many([["foo", "bar"], "pew"], insert, cursor)
    connection.commit()
    cursor.execute("select * from array;") # wrapped select function omitted for brevity
    print "insert() was called", insert.count, "times, and db now contains:\n", cursor.fetchall()
    cursor.close() 
```

输出：

```
formal arg: foo
formal arg: bar
formal arg: pew
insert() was called 3 times, and db now contains:
[] 
```

输出取消注释`#return func(*args, **kwargs)`：

```
formal arg: foo
Traceback (most recent call last):
    Line 42, in <module>
        pass_many([["foo", "bar"], "pew"], insert, cursor)
    Line 9, in pass_many
        pass_many(v, some_funct, args)
    Line 9, in pass_many
        pass_many(v, some_funct, args)
    Line 11, in pass_many
        some_funct(vals, *args)
    Line 17, in wrapper
        return func(*args, **kwargs)
    TypeError: insert() takes at least 2 arguments (0 given) 
```

预期输出（省略调试功能）：

```
insert() was called 3 times, and db now contains:
["foo","bar","pew"] 
```

`insert`不幸的是，用装饰的函数似乎没有`counter`正确传递参数。

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T07:47:12.127

一个问题似乎是您正在使用`*args`来扩展您的`args`论点，但是您`cursor`作为该论点的值传入而没有将其包装在一个元组中。因此，您最终的电话是`insert("foo", *cursor)`，当您似乎想要它时`insert("foo", cursor)`。尝试做`pass_many([["foo", "bar"], "pew"], insert, (cursor,))`。

我认为正在发生的事情是，当您这样做时，您的函数正在使用游标对象（这显然是可迭代的），因此在随后调用真实函数`test_var_args`时不再留下要扩展的参数。`insert`

在您回复后编辑：您真的不想传递`v`给您的`func`电话吗？您编写的插入函数需要两个参数，`v`和`cursor`，但您只用 . 调用它`cursor`。你为什么要包装`insert`？额外的参数应该做什么？你没有在包装器中使用它，也没有将它传递给底层函数，那么它的目的是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:10:32.560

有几件事：首先，在`wrapper()`：

```
def counter(func):
    def wrapper(v, *args, **kwargs): # added 'v' arg to no avail
        wrapper.count = wrapper.count + 1
        test_var_args(v, *args, **kwargs)
        return func(*args, **kwargs)
    ... 
```

您已将第一个参数映射到`v`，但没有将其传递给真实的`func`。最好彻底删除。

其次，也是最重要的：

```
def pass_many(vals, some_funct, args=()):
    if not vals:
        return
    if isinstance(vals, Iterable) and not isinstance(vals, (basestring, Mapping)):
        for v in vals:
            pass_many(v, some_funct, args)
    else:
        some_funct(vals, *args) 
```

请注意，当您调用 时`some_funct()`，您正在解构`args`参数。问题是，当你调用 时`pass_many()`，**你给了它一个`cursor`对象作为`args`参数**。这将巧妙地失败。要解决此问题，您可以删除 splat 运算符`*`，或者更好的选择，您可以`cursor`在调用时将对象包装在一个元组中`pass_many`，如下所示：

```
pass_many([["foo", "bar"], "pew"], insert, (cursor,)) 
```

这仍然会给出“没有这样的表：wordlist”的错误，但这实际上是因为你还没有定义这样的表。（'wordlist' 是 的默认参数`insert()`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:02:56.437

根据@BrenBarn 的建议，我已将其修改为：

```
def counter(func):
    def wrapper(v, *args, **kwargs):
        wrapper.count = wrapper.count + 1
        test_var_args(v, *args, **kwargs)
        return func(v, *args, **kwargs)
    wrapper.count = 0

    return wrapper

pass_many([["foo", "bar"], "pew"], insert, [cursor]) 
```

# string - 在haskell中将字符串拆分为字符串

> ID：10967007
> 
> 赞同：1
> 
> 时间：2012-06-10T07:22:45.480
> 
> 标签：string, list, haskell, split

如何在不使用函数的情况下将一个拆分`string`为另一个？更具体一点：变成`string``Data.List.Split``"Abc"``"['A','b','c']"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T09:49:00.347

如果您想要字符串`"['A','b','c']"`而不是表达式`['A','b','c']`，`"Abc"`因为在 Haskell 中`String`类型是 的同义词`[Char]`，那么类似以下的内容将起作用：

```
'[': (intercalate "," $ map show "Abc") ++ "]" 
```

函数`intercalate`在`Data.List`类型中

```
intercalate :: [a] -> [[a]] -> [a] 
```

它将第一个参数散布在作为第二个参数给出的列表元素之间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T07:48:01.623

我假设你的意思是如何`"Abc"`变成`["A", "b", "c"]`. 这很简单，如果要拆分的字符串是`s`，那么这就可以解决问题：

```
map (\x -> [x]) s 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T10:00:33.687

启动 ghci 看看你写的表达式是一样的：

```
Prelude> ['A','b','c']
"Abc" 
```

# perl - 检查 perl 的 getopt 中的多个互斥选项

> ID：10967008
> 
> 赞同：5
> 
> 时间：2012-06-10T07:23:05.280
> 
> 标签：perl

如何检查是否只定义了`-a`or `-b`or之一`-c`？

所以不在一起`-a -b`，也不`-a -c`，也不`-b -c`，也不`-a -b -c`。

现在有

```
use strict;
use warnings;
use Carp;
use Getopt::Std;

our($opt_a, $opt_b, $opt_c);
getopts("abc");

croak("Options -a -b -c are mutually exclusive")
        if ( is_here_multiple($opt_a, $opt_c, $opt_c) );

sub is_here_multiple {
        my $x = 0;
        foreach my $arg (@_) { $x++ if (defined($arg) || $arg); }
        return $x > 1 ? 1 : 0;
} 
```

以上工作，但不是很*优雅*。

[这里](https://stackoverflow.com/q/888864/869025)已经是类似的问题，但这是不同的，因为检查*两个*独占值很容易 - 但这里有多个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T07:48:43.660

或者您可以：

```
die "error" if ( scalar grep { defined($_) || $_  } $opt_a, $opt_b, $opt_c  ) > 1; 
```

标量上下文中的 grep 返回匹配元素的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T07:27:38.170

```
sub is_here_multiple { ( sum map $_?1:0, @_ ) > 1 } 
```

`sum`由[List::Util](http://search.cpan.org/perldoc?List%3a%3aUtil)提供。

* * *

哦，对了，`grep`在标量上下文中计数，所以你只需要

```
sub is_here_multiple { ( grep $_, @_ ) > 1 } 
```

# java - 当一个线程正在做某种口味时暂停其他线程？

> ID：10967009
> 
> 赞同：1
> 
> 时间：2012-06-10T07:23:06.287
> 
> 标签：java, multithreading

是否可以在线程执行特定操作时暂停所有其他线程运行？为了提出我的问题，假设我有以下方法

```
public void doActions()
{
  ......
  ......
  ......
  if(count == 30)
  {
    //This is where I want to pause all other running threads

  }
  ......
  ......
  ......
} 
```

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:07:10.673

1.  您可以尝试使用`CountDownLatch`，这将在您希望在其他进程启动之前访问少量资源的情况下为您提供帮助。

2.  好吧，您也可以尝试使用 Semaphore 一次只访问一个线程

    信号量 s = new Semaphore(1);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:08:13.500

我最近发布了一个[PauseableThread](https://stackoverflow.com/a/10669623/823393)作为另一个问题的可能解决方案。尽管它的工作方式与您想要的略有不同（您需要一个线程来停止许多其他线程，而它有许多其他线程可以停止一个线程），但将其转换为您正在寻找的应该非常简单。

请注意，其他线程只会在预定义的点暂停，它们不会停止在它们所在的位置。

# jsf - 使用jsf在HashMap中绑定字段时的空值

> ID：10967013
> 
> 赞同：0
> 
> 时间：2012-06-10T07:24:33.733
> 
> 标签：jsf, primefaces, hashmap, el, cdi

我有一个请求范围的 CDI 管理 bean（也尝试使用 jsf 托管 bean，但同样的问题！）：

```
@Named
@RequestScoped
public class myController{

private HashMap<String, MyModel> modelMap;

@PostConstruct
private void init() {
  logModelMap = new HashMap<String, MyModel>();
  logModelMap.put("CONSTANT_1", new MyModel());
  logModelMap.put("CONSTANT_2", new MyModel());
  logModelMap.put("CONSTANT_4", new MyModel());
}
public HashMap getModelMap() {
   return logModelMap;
}
} 
```

MyModel 类是一个简单的 pojo：

```
public class MyModel{

private String type = "";
private Date date;

//constructor, getter and setter methods
} 
```

我已经使用 jsf 编写了一个合成组件并将字段绑定到文本框和日历，我想访问 hashmap 中的字段并设置一些值：

```
#{myController.modelMap['CONSTANST_1'].type}
#{myController.modelMap['CONSTANST_1'].date}

#{myController.modelMap['CONSTANST_2'].type}
#{myController.modelMap['CONSTANST_2'].date}

#{myController.modelMap['CONSTANST_3'].type}
#{myController.modelMap['CONSTANST_3'].date} 
```

但是只有前两行 constant_1 有效，而对于其他两个常量， type 和 date 为 null ！我在萤火虫中看到值已正确发送到服务器，但未设置地图内的字段！顺便说一句，我正在使用带有 ajax 的 primefaces 命令按钮将数据发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:28:17.123

最后我找到了问题所在。我有嵌套表格！！！一种包装我的复合组件的表单和一种我使用我的复合组件的表单！

# c++ - 创建 CALayer 的实例

> ID：10967014
> 
> 赞同：0
> 
> 时间：2012-06-10T07:24:43.430
> 
> 标签：c++, objective-c, core-animation

我正在使用 CoreAnimation 在 C++ 中进行编码。

在 Objective-C 中，CALayer 实例是使用 [CALayer layer] 消息调用创建的。

如何在 C++ 中创建 CALayer 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:47:14.097

您应该使用 Objective-C++（为您的文件提供 .mm 扩展名）。然后它也只是`[CALayer layer]`。否则，必须使用基于 C 语言的 Objective C 运行时，非常麻烦。

# java - MouseWheelMotion 事件期间窗口变为空白

> ID：10967016
> 
> 赞同：4
> 
> 时间：2012-06-10T07:25:02.563
> 
> 标签：java, swing, awt, mousewheel, event-listener

我编写了这个简单的程序，它显示按键，绘制短语“Hello World”，其中一个光标移动（单​​击时带有轨迹模式），并且还循环选择“Hello World”的颜色，当鼠标滚轮滚动。但是这样做有一个问题：当鼠标滚轮滚动时，整个窗口变为空白（显示从您第一次使组件可见时的默认灰色），然后将随着颜色的变化而重新绘制（仅对“Hello World”似乎不需要重绘整个框架。

出现空白的时间似乎与滚动鼠标滚轮的力相关，如果我轻轻滚动，只有很小的一瞬间没有显示所有内容，但是非常用力滚动会使窗口变为空白2-3 秒。

我试过双缓冲——认为这可能是某种屏幕闪烁——但它没有改变，我不知道是什么导致了这种奇怪的效果。就好像在 Wheel 运动事件发生时正在加载帧图像。（有没有办法立即退出轮子事件以减少加载时间？（这只是我对可能解决方案的猜测））。

代码如下。任何想法将不胜感激。

```
package keymouse;

    import java.awt.*;
    import java.awt.event.*;
    import java.awt.image.BufferStrategy;
    import java.util.LinkedList;
    import javax.swing.JFrame;

    public class KeyMouse implements KeyListener,
            MouseMotionListener, MouseListener, MouseWheelListener, Runnable {

        boolean trailMode = false;
        boolean exists = false;
        display window;
        LinkedList wordList;
        LinkedList trailList;
        LinkedList colorList;
        Point mousePoint;
        int TRAIL_SIZE = 10;
        boolean init = true;
        int FONT_SIZE = 32;
        int mouseY;
        int mouseX;
        int y;
        int colorCount = 0;

        public static void main(String[] args) {
            KeyMouse k = new KeyMouse();
            k.run();
        }

        public KeyMouse() {
            window = new display();
            window.addKeyListener(this);
            window.addMouseMotionListener(this);
            window.addMouseListener(this);
            window.addMouseWheelListener(this);
            window.setBackground(Color.WHITE);
            window.setForeground(Color.BLACK);
            wordList = new LinkedList();
            trailList = new LinkedList();
            colorList = new LinkedList();
            colorList.add(Color.BLACK);
            colorList.add(Color.BLUE);
            colorList.add(Color.YELLOW);
            colorList.add(Color.GREEN);
            colorList.add(Color.PINK);

        }

        @Override
        public void keyTyped(KeyEvent e) {
            // do nothing
        }

        @Override
        public void keyPressed(KeyEvent e) {
            int keyCode;
            if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                stop();
            }

            keyCode = e.getKeyCode();
            addMessage("Pressed:" + e.getKeyText(keyCode));
        }

        @Override
        public void keyReleased(KeyEvent e) {
            //do nothing
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            Point p = new Point(e.getX(), e.getY());
            addLocation(p);
        }

        @Override
        public void mouseMoved(MouseEvent e) {
            Point p = new Point(e.getX(), e.getY());
            addLocation(p);
        }

        @Override
        public void mouseClicked(MouseEvent e) {
        }

        @Override
        public void mousePressed(MouseEvent e) {
            trailMode = true;

        }

        @Override
        public void mouseReleased(MouseEvent e) {
            trailMode = false;
        }

        @Override
        public void mouseEntered(MouseEvent e) {
            //do nothing
        }

        @Override
        public void mouseExited(MouseEvent e) {
            //do nothing
        }

        @Override
        public void mouseWheelMoved(MouseWheelEvent e) {

            System.out.println(e.getWheelRotation());
            colorCount++;
            if (colorCount > 4) {
                colorCount = 0;
            }

            window.setForeground((Color) colorList.get(colorCount));

        }

        @Override
        public void run() {
            window.createBufferStrategy(2);
            BufferStrategy strategy = window.getBufferStrategy();

            while (true) {
                draw(strategy.getDrawGraphics());
                strategy.show();
                try {
                    Thread.sleep(20);
                } catch (Exception ex) {
                }
            }
        }

        public void draw(Graphics g) {
            //draw background

            g.setColor(window.getBackground());
            g.fillRect(0, 0, window.getWidth(), window.getHeight());

            //draw Text
            g.setColor(window.getForeground());
            g.setFont(new Font("sansserif", Font.BOLD, 32));

            int count = trailList.size();
            if (trailList.size() > 1 && trailMode == false) {
                count = 1;
            }

            if (exists == true) {
                for (int i = 0; i < count; i++) {
                    Point p = (Point) trailList.get(i);
                    g.drawString("Hello World", p.x, p.y);
                }
            }

            g.setColor(Color.BLACK);
            y = 56;
            for (int i = 0; i < wordList.size(); i++) {
                String word = (String) wordList.get(i);
                g.drawString((String) wordList.get(i), 100, y);
                y += 32;
            }

        }

        public void addMessage(String message) {
            if (y >= window.getHeight()) {
                wordList.remove(0);
            }
            wordList.add(message);
        }

        public void addLocation(Point h) {
            exists = true;
            trailList.addFirst(h);
            if (trailList.size() > TRAIL_SIZE) {
                trailList.removeLast();

            }
        }

        public void printMessages() {
            for (int i = 0; i < wordList.size(); i++) {
                System.out.println(wordList.get(i));
            }
        }

        private void stop() {
            System.exit(0);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:46:10.910

没有完整的例子，我无法重现你描述的效果。您可以将您的代码与此示例进行比较，该示例没有显示明显的空白。

一般来说，

*   `JPanel`默认情况下是双缓冲的；需要不同的缓冲策略是不寻常的。
*   [`AnimationTest`](https://stackoverflow.com/a/3256941/230513)说明 Swing`Timer`以及如何显示平均绘制周期。
*   `MouseAdapter`方便覆盖少量方法。
*   如果可能，请使用泛型参数以确保类型安全。

![ColorWheel 图像](../Images/8b39307c25e7c5a98cbca636b12c80e9.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseWheelEvent;
import java.util.LinkedList;
import java.util.Queue;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

/**
* @see https://stackoverflow.com/a/10970892/230513
*/
public class ColorWheel extends JPanel {

    private static final int N = 32;
    private final Queue<Color> clut = new LinkedList<Color>();
    private final JLabel label = new JLabel();

    public ColorWheel() {
        for (int i = 0; i < N; i++) {
            clut.add(Color.getHSBColor((float) i / N, 1, 1));
        }
        this.setBackground(clut.peek());
        label.setText(getBackground().toString());
        this.add(label);
        this.addMouseWheelListener(new MouseAdapter() {

            @Override
            public void mouseWheelMoved(MouseWheelEvent e) {
                setBackground(clut.peek());
                label.setText(getBackground().toString());
                clut.add(clut.remove());
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(320, 240);
    }

    private void display() {
        JFrame f = new JFrame("ColorWheel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ColorWheel().display();
            }
        });
    }
} 
```

# algorithm - 找到两个总和相等的子集时出错

> ID：10967017
> 
> 赞同：1
> 
> 时间：2012-06-10T07:25:04.403
> 
> 标签：algorithm, set, dynamic-programming, data-partitioning

我一直在尝试将一个数组划分为两个非空的不相交子集，以使它们的总和相等。

```
eg. A = {1,2,3,6,88,55,29}  
one possible answer = 1+2+3  and 6 
```

我已经阅读了关于平衡分区问题的 mit 教程，但我的限制不同。我不必考虑整个集合 A（意味着 A1 U A2 不一定会导致 A）。另一个问题是 N 的限制。每个最多有 100 个不同的元素 (<= 100 ) 。
我也阅读 了与我的问题相关的[*这篇*](https://stackoverflow.com/questions/525559/equal-sum-subsets-hybrid)*文章，但我什么也得不到*。

```
My present Algo -- 
p[1][a[0]] = 1
for i = 2 to n
   for j = 0 to n*n
     if( p[i][j] >= 2) stop

            p[i][j] += j - a[i] > 0 ? ( p[i-1][j] + p[i-1][j-a[i]] ):0
            p[i][j] += j == a[i] ? 1:0
            p[i][j] += j < a[i] ? p[i-1][j]:0 
```

解释 ：

```
Search for sum j at position i. If we got count at position j >=2 means 
there are more than two possibilities for summing up to j. 
```

[这是我的示例工作代码](http://ideone.com/Ab02d#)

我知道这种方法不能处理不相交的集合，但我无法找出任何其他方法。

我正处于 Dynamic Prog 的学习阶段。我觉得有点困难。有人可以帮我找出我当前算法中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:58:12.323

您的代码似乎没有遍历所有子集。一组大小的[幂集](http://en.wikipedia.org/wiki/Power_set)`n`有`2^n-1`非空元素，所以我认为这是算法复杂度的下限。您需要找到一种适当的方法来枚举子集，这与[其他关于 SO的问题有关](https://stackoverflow.com/q/728972/1122645)

通常，子集生成是通过逐个添加元素来生成的。如果您使用动态编程，这允许您在一次加法中计算单个集合的总和。事实上，如果你有`{1,2,3,6}`并将值保存到`12`，你只需要添加`88`即可找到 的总和`{1,2,3,6,88}`。

您可以在基本 DP 之外找到进一步的优化。例如，如果您测试

```
 {88} > {1,2,3,6,29} 
```

首先，您不需要`{1,2,3,6,29}`使用`{88}`. 同时你不需要测试任何包含 88 的集合`{1,2,3,6,29}`，因为它总是更大......现在它需要使用从更大的集合到更小的集合的递归。

# ios - iOS UITableView 重载

> ID：10967025
> 
> 赞同：0
> 
> 时间：2012-06-10T07:26:51.050
> 
> 标签：ios, uitableview

我遇到了一段 UITableView 的代码，单击单元格并重新加载，但数据源到底是什么？这一点我也不是很清楚。

```
 [xTable reloadRowsAtIndexPaths:[NSArray arrayWithObjects:[NSIndexPath indexPathForRow:button.tag inSection:0],nil] withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T07:41:39.167

它运行以下“tableview cellForRowAtIndexPath”方法并加载指定单元格的更新信息。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T07:41:46.643

DataSource 是 UITableView 中的一个协议，它定义了 UITableView 发送给此对象（数据源）的一组消息。这些消息返回填充在 tableview 内部的数据一些消息如下：

`numberOfRowsInSection`：您将返回此表将具有的行数 `cellForRowAtIndex`：您将在此处返回给定索引的 UITableViewCell 对象 `numberOfSectionsInTableView`：您将返回此表将具有的部分数

这在您将调用的类中如何工作`tableView.dataSource = self;` `[UITableView reloadData]`被执行，数据源消息被发送到数据源对象（在本例中，它将是设置在右侧的对象`.dataSource = self;`

表视图将使用这些连续调用来构建表视图本身

如需进一步深入阅读，请转至

[关于如何在 iphone 中实现数据源的简单教程](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)

[数据源设计模式](http://www.informit.com/articles/article.aspx?p=1398618)

# playframework - 如何使用 Play Morphia 删除数组项

> ID：10967029
> 
> 赞同：0
> 
> 时间：2012-06-10T07:27:59.777
> 
> 标签：playframework, morphia

我有一个类似以下的结构，并试图从数组中删除一项。到目前为止，我还无法弄清楚这一点。有什么建议么？

```
{
   "_id" : "4fd4466c03644ec6ec6d5fe1",
   "fruit" : [

         { "id" : "4fd4466c03644ec6ec6d5fdf", "name" : "avocado", "quantity" : "2"  },
         { "id" : "4fd4466c03644ec6ec6d5fe0", "name" : "apple",   "quantity" : "34" },

   ]
} 
```

我有一个“购物车”模型，其中包含一个名为“fruit”的嵌入式文档。是的，它们是虚假的例子，但解释一车水果比我正在研究的要简单。我得到的最远的电话。

```
MorphiaQuery q = Cart.q().filter("_id",cartid);
Cart.o().removeAll("fruit", ?????).update(q); 
```

任何指导在这里都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:18:12.903

首先找出您要从中取出一种水果的购物车：

```
Cart cart = Cart.findById(cartid); 
```

其次找到水果并将其取出：

```
for (Fruit f: cart.fruit) {
    if (f.name.equals("apple")) {
        cart.fruit.remove(f);
        cart.save();
        break;
    }
} 
```

# forms - jquery mobile和淘汰表单提交绑定

> ID：10967034
> 
> 赞同：4
> 
> 时间：2012-06-10T07:28:53.487
> 
> 标签：forms, binding, jquery-mobile, knockout.js, submit

在表单提交行为方面，我偶然发现了 knockoutjs 和 jquery mobile 之间的明显不兼容。

考虑以下标记：

```
<form data-bind="submit: myKoSubmitAction">
   <!-- form fields here -->
</form> 
```

目的是敲除阻止服务器发布/获取，而是调用 myKoSubmitAction。jqm 也将阻止仅针对 jqm 的标准提交行为，原因是表单提交被 ajax 请求替换。

因此，虽然淘汰赛（大概）成功地阻止了标准服务器请求，但它未能阻止 jqm 发送 ajax 请求。

我在一个谷歌小组中找到了这个问题的答案，并认为它也应该在 SO 上。见下文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:46:52.497

您也可以添加`data-ajax="false"`到`<form>`元素中。

请参阅[提交表格](http://jquerymobile.com/test/docs/forms/forms-sample.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T07:30:17.247

我能找到的最佳解决方案是以下自定义 ko 绑定：

```
//This binding fixes apparent incompatibility between knockout and jqm
ko.bindingHandlers.jqmsubmit = {
  init: function (el, accessor, allbindings, vm) {
    ko.bindingHandlers.submit.init(el, accessor, allbindings, vm);
    $(el).submit(function (e) {
        // prevent the submit behavior
        e.preventDefault();
        e.stopPropagation();
        return false;
    });
  }
}; 
```

用于代替标准提交 ko 绑定：

```
<form data-bind="jqmsubmit: myKoSubmitAction">
  <!-- form fields here -->
</form> 
```

# html - HTML：在移动站点中解析、分析和重构

> ID：10967035
> 
> 赞同：2
> 
> 时间：2012-06-10T07:29:01.030
> 
> 标签：html, web-applications, mobile, computer-science

我正在为我的 CS 课做一个学校项目，我们要找到一个我们感兴趣的应用程序并弄清楚它是如何工作的。我在[dudamobile.com上选择了这项技术](http://dudamobile.com)

该应用程序获取一个 URL，然后将网站的桌面版本转换为移动版本。

我想我对它的工作原理有一个基本的了解......

1.  清理 HTML
2.  解析 HTML 并查找关键标签
3.  将关键标签存储在变量中
4.  将变量应用到预制的移动 HTML 模板
5.  插入自定义 CSS 以适应移动设备

这是一个相当高级的分析，我的问题是我可以使用哪些特定工具来为我的项目创建类似的东西？你认为我的分析正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:26:54.110

在我看来，他们只是去掉了大部分 css 并用对移动设备更友好、图形密集度较低的 css 取而代之。它似乎也在导航中选择奇怪的链接来制作顶部链接，所以那里有某种算法（我网站的顶部链接都是我为移动设备所拥有的）。

我会首先对站点使用的 css 文件做一些技巧，然后去除背景图像，将超过一定宽度的图像更改为块级元素，更改字体大小等，直到你让它看起来更像一个简单的布局和然后添加您认为合适的其他移动元素（但使其在不缩放的情况下可读可能是最重要的）。

如果站点使用 html5，您可以将不同的 css 规则应用于导航部分，使其成为链接列表并将其移至顶部。

不要指望它是一个完美的交叉点，除非该站点相当简单。

您需要后端技术来检索和解析 .css 文件以重新提供它。我会建议你喜欢的任何语言。我在 PHP 方面没有太多经验，但我相信它非常适合该应用程序。

# php - 当文件太大时，PHP 添加斜杠失败

> ID：10967040
> 
> 赞同：-1
> 
> 时间：2012-06-10T07:30:13.433
> 
> 标签：php

我有一组 PHP 脚本，可以将文件加载到数据库中，供以后使用的自动更新程序使用。该程序可以正常工作，直到文件超过 10MB 范围。该脚本的粗略想法是它从磁盘中特定位置的文件中提取文件，并将它们加载到数据库中。这允许我们存储在源代码管理中，并根据需要在集合中更新。

最初，我认为根据我的初始搜索，我正在达到数据库 SQL 的限制。然而，经过进一步测试，它似乎是 PHP 特有的。我检查了 Apache 错误日志，但我没有看到此脚本或包含的任何错误。一旦 PHP 脚本到达 addlashes 函数，脚本似乎停止执行。（我在每个脚本语句之间添加了 echo 语句。）

我希望这是我缺少的一些简单的东西，但是经过几个小时的在线搜索后，我找不到与 addlashes 失败相关的任何内容。

有任何想法吗？

提前致谢。

```
mysql_connect('localhost', '****', '****') or die('Could not connect to the database');
mysql_select_db('****') or die('Could not select database');

function get_filelist($path)
{
        return get_filelist_recursive("/build/".$path);
}
function get_filelist_recursive($path)
{
        $i = 0;
        $list = array();
        if( !is_dir($path) )
                return get_filedetails($path);

        if ($handle = opendir($path))
        {
                while (false !== ($file = readdir($handle)))
                {
                        if($file!='.' && $file!='..' && $file[0]!='.')
                        {
                                if( is_dir($path.'/'.$file) )
                                {
                                        $list = $list + get_filelist_recursive($path.'/'.$file);
                                }
                                else
                                {
                                        $list = $list + get_filedetails($path.'/'.$file);
                                }
                        }
                }
                closedir($handle);
                return $list;
        }
}
function get_filedetails($path)
{
        $item = array();
        $details = array();
        $details[0] = filesize($path);
        $details[1] = sha1_file($path);
        $item[$path] = $details;
        return $item;
}

$productset = mysql_query("select * from product where status is null and id=".$_REQUEST['pid']);
$prow = mysql_fetch_assoc($productset);

$folder = "product/".$prow['name'];
$fileset = get_filelist($folder);
while (list($key, $val) = each($fileset))
{
    $fh = fopen($key, 'rb') or die("Cannot open file");
    $data = fread($fh,$val[0]);
    $data = addslashes($data);
    fclose($fh);
    $filename = substr( $key, strlen($folder) + 1 );
    $query = "insert into file(name,size,hash,data,manifest_id) values('".$filename."','".$val[0]."','".$val[1]."','".$data."','".$prow['manifest_id']."')";
    $retins = mysql_query($query);
    if( $retins == false )
        echo "BUILD FAILED: $key, $val[0] $val[1].<br>\n";
}

header("Location: /patch/index.php?pid=".$_REQUEST['pid']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:48:07.400

不要使用addlashes，`mysql_real_escape_string`在这种情况下使用。此外，您可能会通过尝试插入如此大的文件来达到[max_allowed_pa​​cket限制。](http://dev.mysql.com/doc/refman/4.1/en/packet-too-large.html)默认值为 1MB。

如果您使用[mysqli](http://php.net/mysqli)（推荐），您可以指示该列是二进制的，并且它将以块的形式发送查询。

还要确保您没有达到任何 PHP 内存限制或最长执行时间。

# jsp - JSTL 是否会使 JSP 页面运行缓慢？

> ID：10967050
> 
> 赞同：1
> 
> 时间：2012-06-10T07:33:39.663
> 
> 标签：jsp, jstl

有的时候，更多的JSP servlet 开发者可能会说JSP 中必须使用JSTL 而不是scriptlet。我的问题不是问该不该。但是，如果JSTL 用在JSP 页面中，是否会导致制作jsp 页面？运行缓慢或影响性能，效率，因为它与jsp servlet一起加载其他一些类？（我们在jsp页面效果中使用JSTL的次数也是如此吗？）
或者
即使有一点性能问题，也可以由于 JSTL 相对于普通 scriptlet 的好处/优势而被忽略了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T07:43:51.173

Web 应用程序的响应时间主要取决于网络延迟和服务器端代码中的 IO（例如数据库请求）（这里我忽略了浏览器渲染的成本，这也是不可忽略的，特别是如果必须加载图像、脚本等）。

JSTL 与 scriptlet 的时间差异可以忽略不计，您应该更喜欢干净的代码、最佳实践、可维护性和关注点分离，而不是试图通过使用 scriptlet 来获得几纳秒的时间。如果 JSTL 引起了性能问题，它们会被注意到，并且已经被修复（或者没有人会使用它并推荐它）。

# mysql - Grails MySQL 导入转储

> ID：10967053
> 
> 赞同：0
> 
> 时间：2012-06-10T07:34:22.607
> 
> 标签：mysql, grails

我正在尝试编写一个将 mysql 转储导入数据库的函数。我的代码如下所示：

```
def sout = new StringBuffer()
def serr = new StringBuffer()
String pathToDump = "C:\\Users\\Lojza\\AppData\\Local\\Temp\\protetika-dump-temp-13393134598714336471323836046295.sql"
def process = "mysql --host=localhost --user=protetika --password=protetika --port=3306 --default-character-set=utf8 < \"${pathToDump}\" ".execute()
process.consumeProcessOutput(sout, serr)
process.waitForOrKill(10000)
println 'sout: ' + sout // => test text
println 'serr: ' + serr 
```

我在 Grails 控制台中尝试了此代码，但它返回给我：

```
mysql  Ver 14.14 Distrib 5.5.21, for Win64 (x86)
Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
...... (and many more lines) 
```

我无法弄清楚上面的代码有什么问题......当我尝试在 cmd 中执行生成的进程行时，它可以工作并导入数据库。我执行的命令如下所示：

```
mysql --host=localhost --user=protetika --password=protetika --port=3306 --default-character-set=utf8 < "C:\Users\Lojza\AppData\Local\Temp\protetika-dump-temp-13393134598714336471323836046295.sql" 
```

谢谢你的帮助！

问候，

洛伊扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:06:01.657

重定向在 Java 下的工作方式与在 Windows 命令提示符下的工作方式不同。解决此问题的一种方法是执行带有 -e 选项的 source 命令来读取文件。所以从命令行你可以做

```
mysql --host=localhost --user=protetika --password=protetika --port=3306 --default-character-set=utf8 –e “source C:\Users\Lojza\AppData\Local\Temp\protetika-dump-temp-13393134598714336471323836046295.sql" 
```

从 groovy 执行此操作的代码（未经测试），

```
def process = "mysql --host=localhost --user=protetika --password=protetika --port=3306 --default-character-set=utf8 -e \"source "${pathToDump}\"\" ".execute() 
```

# hibernate - 使用 Hibernate Evict 方法时传递的分离异常持续存在

> ID：10967055
> 
> 赞同：0
> 
> 时间：2012-06-10T07:35:18.467
> 
> 标签：hibernate, jpa, seam

更新托管实体时，数据不直接反映到数据库，所以我在 Hibernate 中使用 evict。我得到的例外是传递给持久化的分离实体。

```
MobeeAgent agent= agentsList.get(rowIndex);
BeanUtils.copyProperties(agent, doMobeeAgent);
agentsList.set(rowIndex, agent);
((Session)getEntityManager().getDelegate()).evict(agentsList.get(rowIndex)); 
```

问候

唠叨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:16:14.217

“ *detached entity passing to persist* ” 意味着你试图调用`persist()`一个被 Hibernate 认为已经存在的实体（因为它已经有一个 ID，或者一个非零的 @Version 属性）。*persist()*用于*创建*新*实体*。如果要*更新**现有*实体，必须`merge()`使用。

# label - 如何使 Tk 标签中的文本可选？

> ID：10967056
> 
> 赞同：2
> 
> 时间：2012-06-10T07:35:28.247
> 
> 标签：label, tcl, tk

我在 Tcl Tk 中创建标签，但它们的文本不可选择（用于复制粘贴）。我如何使是可选择的？

我使用以下方法创建标签：

```
set n 0
foreach t $list_of_labels {
    incrr n
    set lbl2 [label .prop_menu.main_frame.val_$n    -text $t]
    grid $lbl2 ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:54:33.193

为了使标签中的文本可以整体选择*，*必须应用绑定，以便程序知道何时选择它（而不是其他东西），并且必须有一些代码将代码放入选择中（或而不是剪贴板）。后者实际上很容易使用`clipboard`命令：

```
clipboard clear
clipboard append $text 
```

尴尬的是设置绑定并*显示*选择已经发生。最简单的就是做这样的蹩脚的事情（绑定到鼠标点击）：

```
bind .lbl <1> {
    clipboard clear
    clipboard append [%W cget -text]
    bell
} 
```

好吧，这绝对是蹩脚的；你可以做得更好！您不会得到 Windows 自己的内置标签通常支持的突出显示样式（您可以在其中拖出选择并只需按`Ctrl`+ `C`），因为这需要绘制突出显示的能力，而 Tk 的标签小部件根本不有。（您可以使用条目来破解某些内容，但它们不能执行多行文本，或者您可以使用文本小部件，但是您必须对绑定进行*大量*工作以使其按您想要的方式运行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:21:44.967

您不能不从其他一些小部件中获取大量绑定代码并将其应用于您的标签。如果你需要这个，你最好使用一个入口小部件，让它看起来像一个标签。就像是：

```
entry .e1 -textvar t -relief flat -background [$parentWindow cget -background] 
```

如果您不希望焦点移到这些上，请添加`-takefocus 0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:13:57.130

我通过使用只读条目解决了它，我将标签的创建替换为：

```
set lbl2 [entry .prop_menu.main_frame.val_$n -relief flat]
$lbl2 insert 0 $t
$lbl2 configure -state readonly 
```

并且能够创建类似于标签但可选择的条目。

# javascript - 组织对象原型的更好方法是什么？

> ID：10967060
> 
> 赞同：-1
> 
> 时间：2012-06-10T07:36:28.573
> 
> 标签：javascript

这就是我尝试组织原型的方式：

但是我必须编写一个额外的“方法”属性来访问原型的功能是相当低效的。

```
var Gallery = function(name) {
    this.name = name;
}

Gallery.prototype.methods = {
    activeCnt: 0,
    inc: function() {
        this.activeCnt++;
    },
    dec: function() {
        this.activeCnt--;
    },
    talk: function() {
        alert(this.activeCnt);
    }
}

var artGallery = new Gallery('art');
var carGallery = new Gallery('car');
artGallery.methods.inc();
artGallery.methods.talk();
carGallery.methods.talk();​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T07:48:36.027

只需删除该`methods`属性并将一个新对象分配`prototype`给`Gallery`. 还要确保它有一个名为`constructor`which 指向的属性`Gallery`。这是代码：

```
var Gallery = function (name) {
    this.name = name;
}

Gallery.prototype = {
    activeCnt: 0,
    inc: function() {
        this.activeCnt++;
    },
    dec: function() {
        this.activeCnt--;
    },
    talk: function() {
        alert(this.activeCnt);
    },
    constructor: Gallery
};

var artGallery = new Gallery('art');
var carGallery = new Gallery('car');

artGallery.inc();
artGallery.talk();
carGallery.talk(); 
```

# mysql - MySQL“列计数与值计数不匹配”但计数匹配

> ID：10967063
> 
> 赞同：5
> 
> 时间：2012-06-10T07:37:31.607
> 
> 标签：mysql

当我尝试执行列数匹配的查询时，MySQL 发出此错误。这是表的结构：

```
mysql> desc S_3068; 
+-------------------+----------------------+------+-----+---------+-------+ 
| Field             | Type                 | Null | Key | Default | Extra | 
+-------------------+----------------------+------+-----+---------+-------+ 
| SfmID             | smallint(5) unsigned | NO   | PRI | 1       |       | 
| DatValue          | float                | NO   |     | 0       |       | 
| DatRawValue       | int(10) unsigned     | NO   |     | 0       |       | 
| DatTime           | int(10) unsigned     | NO   | PRI | 0       |       | 
| DatBusOrder       | tinyint(3) unsigned  | NO   | PRI | 1       |       | 
| DatFormulaVersion | tinyint(3) unsigned  | NO   |     | 0       |       | 
+-------------------+----------------------+------+-----+---------+-------+ 
6 rows in set (0.00 sec) 
```

执行此查询时出现上述错误：

```
mysql> insert ignore into S_3068 values (133, 15.82, 5542, 1339309260, 0, 1); 
ERROR 1136 (21S01): Column count doesn't match value count at row 1 
```

如您所见，列计数确实与值计数匹配。现在更令人费解的是，查询在 SfmID = 132 时工作得非常好：

```
mysql> insert ignore into S_3068 values (132, 15.82, 5542, 1339309260, 0, 1); 
Query OK, 1 row affected (0.00 sec) 
```

SfmID 是一个无符号的 smallint，这对我来说没有任何意义。

对此问题的任何帮助将不胜感激。

编辑：错误是由与表关联的触发器引起的。请参阅评论以获取更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:53:59.753

该错误是由与表关联的触发器引起的，在另一个表上为值 133 而不是为值 132 进行侧面插入。 MySQL 发出的错误是关于另一个表（列数确实错误）而不是关于我在其中插入数据的主表。

# ios - UITableView 中带有单元格子视图的滚动性能不佳。

> ID：10967064
> 
> 赞同：0
> 
> 时间：2012-06-10T07:38:17.700
> 
> 标签：ios, uitableview

我有一个包含很多行的 UITableView。每行都有一个 UIView，我在 cellForRowAtIndexPath 中进行了编辑。我的问题是这在 iPod touch 上非常滞后。我不确定为什么会发生这种情况，因为 iPod 应该能够一次在屏幕上显示超过 11 个 UIView？有谁知道为什么会这样？

编辑 - 这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UIView *colorView = (UIView *)[cell viewWithTag:1];
    UILabel *label = (UILabel *)[cell viewWithTag:2];
    colorView.layer.cornerRadius = 10;
    colorView.layer.borderColor = [UIColor blackColor].CGColor;
    colorView.layer.borderWidth = 2.0f;
    colorView.layer.masksToBounds = YES;
    switch (indexPath.row) {
        case 0:
            label.text = @"White";
            colorView.backgroundColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:1];
            break;
        case 1:
            label.text = @"Olive";
            colorView.backgroundColor = [UIColor colorWithRed:0.814 green:0.551 blue:0.119 alpha:1];
            break;
        case 2:
            label.text = @"Dark Blue";
            colorView.backgroundColor = [UIColor colorWithRed:0.036 green:0 blue:1 alpha:1];
            break;
        case 3:
            label.text = @"Dark Green";
            colorView.backgroundColor = [UIColor colorWithRed:0 green:0.387 blue:0.006 alpha:1];
            break; 
        case 4:
            label.text = @"Orange";
            colorView.backgroundColor = [UIColor colorWithRed:1 green:0.500 blue:0 alpha:1];
            break; 
        case 5:
            label.text = @"Dark Brown";
            colorView.backgroundColor = [UIColor colorWithRed:0.399 green:0.269 blue:0.137 alpha:1];
            break;
        case 6:
            label.text = @"Dark Red";
            colorView.backgroundColor = [UIColor colorWithRed:0.530 green:0.017 blue:0 alpha:1];
            break; 
        case 7:
            label.text = @"Maroon";
            colorView.backgroundColor = [UIColor colorWithRed:0.502 green:0 blue:0.251 alpha:1];
            break; 
        case 8:
            label.text = @"Yellow";
            colorView.backgroundColor = [UIColor colorWithRed:0.865 green:0.864 blue:0.002 alpha:1];
            break; 
        case 9:
            label.text = @"Purple";
            colorView.backgroundColor = [UIColor colorWithRed:0.460 green:0 blue:0.865 alpha:1];
            break; 
        default:
            label.text = @"";
            colorView.backgroundColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:1];
            break;
    }
    return cell;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:11:49.860

您可以在这里做几件事。

打开石英调试（在设备上使用仪器或最近在模拟器中）。颜色混合层 - 你应该看到大部分是绿色。如果您不这样做，请确保您的新视图被标记为不透明。滚动透明视图需要很多性能。

如果这没有帮助，请使用仪器中的时间分析器进行分析。时间花在哪里？例如，您是否应该缓存用于背景的颜色？

理想情况下，您的图层属性应该只设置一次。自定义单元子类中的 awakeFromNib 将是执行此操作的好地方。

# css - 使用 Wordpress 插件覆盖 CSS

> ID：10967065
> 
> 赞同：0
> 
> 时间：2012-06-10T07:38:26.103
> 
> 标签：css, wordpress

请问我可以手吗？我正在努力覆盖 Wordpress 自定义字段搜索插件上的 CSS，该插件似乎对出现在小部件和页面中的搜索框使用相同的样式。如果您查看[http://www.landedhouses.co.uk/parties/](http://www.landedhouses.co.uk/parties/)，小部件中的搜索框可以看到白色文本，但在页面上却不那么明显。任何想法如何解决这一问题！？不幸的是，将此添加到页面的 php 中并没有实现任何效果：

```
 <h2>By size and price</h2>
<p style="color:000;"><?php if(function_exists('wp_custom_fields_search')) 
wp_custom_fields_search(); ?></p> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:43:43.277

这是导致您出现问题的样式规则。

```
/* searchforms.css line 15 */
.searchform-label {
  display: block;
  float: left;
  width: 200px;
  overflow: hidden;
  font-size: 1.1em;
  font-family: sans-serif;
  font-weight: bold;
  padding-top: 4px;
  color: white;
} 
```

您可以使用 css 做一些事情。您可以在样式表中制定覆盖规则：

```
.searchform-label {
  color: black;
} 
```

如果这不起作用，您可以制定更具体的规则：

```
label.searchform-label {
  color: black;
} 
```

或者您可以在最坏的情况下制定`!important`规则。

```
.searchform-label {
  color: black !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:05:47.307

作为上述答案的延伸（我仍然无法评论：（）

一般来说，如果原件没有使用！important，则更具体的规则将覆盖该属性，

因此，作为原始目标 .searchform-label，您只需要定位更具体的内容，例如 label.searchform-label，如果这不起作用，请包含直接父元素和 a，`>`例如，如果标签包含在 P 中，利用`p>label.searchform-label`

应该很少需要！important，尽管他们应该做一个！notimportant，以便于覆盖：D

# objective-c - 当父 UIView 动画时，UILabel 大小突然变化

> ID：10967067
> 
> 赞同：3
> 
> 时间：2012-06-10T07:39:05.263
> 
> 标签：objective-c, animation, uiview, size, uilabel

我想`UIView`用动画从我的超级中发送一个子视图，它工作正常，但是当我试图在动画期间更改大小时`UILabel`，我在子视图中的任何东西突然变得太小了。这是我的代码的一部分

```
-(void)pushOutScreen:(UIViewController *)pop{
    [UIView animateWithDuration:1
                      delay:0.0
                    options: UIViewAnimationTransitionFlipFromLeft
                 animations:^{

                     CGRect frame = pop.view.frame;
                     frame.size.height = frame.size.height /4;
                     frame.size.width = frame.size.width /4;
                     frame.origin.x = -500;
                     frame.origin.y = 318;

                     pop.view.frame = frame;
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }];
} 
```

注意：我的子视图中的任何`UIButton`或`UIImage`那个动画都很好，但我只有`UILabel`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:40:59.830

`UIView`动画不是这样做的好选择，而不是 try `CAKeyframeAnimation`。这是缩放的示例代码`UIView`：

```
- (void) scaleView:(UIView *)popView {
    CAKeyframeAnimation *animation = [CAKeyframeAnimation
                                  animationWithKeyPath:@"transform"];
    animation.delegate = self;

    // CATransform3DMakeScale has 3 parameter (x,y,z)
    CATransform3D scale1 = CATransform3DMakeScale(1.0, 1.0, 1);
    CATransform3D scale2 = CATransform3DMakeScale(0.2, 0.2, 1);

    NSArray *frameValues = [NSArray arrayWithObjects:
                        [NSValue valueWithCATransform3D:scale1],
                        [NSValue valueWithCATransform3D:scale2],
                        nil];
    [animation setValues:frameValues];

    NSArray *frameTimes = [NSArray arrayWithObjects:
                       [NSNumber numberWithFloat:0.0],
                       [NSNumber numberWithFloat:1.0],
                       nil];    
    [animation setKeyTimes:frameTimes];

    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;
    animation.duration = 1.0;

    [popView.layer addAnimation:animation forKey:@"popup"];
} 
```

你可以在添加`UIView`as之后使用它，`subView`然后你可以调用这个方法来缩放它。要使用此方法推出子视图，您需要`removeFromSubView`在动画完成后使用。因为知道它什么时候用完

```
-(void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
{
    [subView removeFromSuperview];
} 
```

我希望它有用！

# html - 尽管有位置，为什么子菜单会发生变化：绝对？

> ID：10967072
> 
> 赞同：0
> 
> 时间：2012-06-10T07:40:53.503
> 
> 标签：html, css, drop-down-menu, menu, submenu

about 链接下的子菜单虽然我给了它，但还是从左边稍微偏移了一点`position: absolute; left: 0px`。

基本上，我希望所有菜单项（包括子菜单）都重叠。这是代码。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<style type="text/css">
.nav{
position:relative;

}

#menu {

position:absolute;
left:0px;
margin: 0;
padding: 0;

}

#menu ul{
    position:absolute;

    left:0px;
    list-style: none;
}

#menu li {

line-height:40px;
font: 100%;
font-family:Arial, Helvetica, sans-serif;
margin: 0;
padding: 0;
background: #333333;
border-bottom:#444444 thin solid;
}
#menu a {
color: #CCCCCC;
text-decoration: none;

margin: 0;

padding: 8px 12px;*/
text-decoration: none;
font-weight:bold;
}
#menu a:hover {

color: #fff;
padding-bottom: 8px;
}

</style>

</head>
<body>
<div class="nav">

            <ul id="menu">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a>
                <ul>
                    <li><a href="#">Bio</a></li>
                    <li><a href="#">Blog</a>                        
                        <ul>
                            <li><a href="#">Bloger   Blog</a></li>
                            <li><a href="#">Wordpress Blog</a></li>
                            <li><a href="#">other</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Hobby</a></li>
                </ul>
                </li>

            <li><a href="#">Gallery</a></li>
            <li><a href="#">News</a></li>
            <li><a href="#">Links</a></li>
            <li><a href="#">Contact</a></li>
            </ul>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:44:02.843

尝试添加`margin: 0; padding: 0;`到`#menu UL`.

# asp.net-mvc - 将表单数据从视图传递到控制器并保存到 asp.net mvc3 中的数据库

> ID：10967073
> 
> 赞同：1
> 
> 时间：2012-06-10T07:41:09.623
> 
> 标签：asp.net-mvc, asp.net-mvc-3, view, controller, html.beginform

我的数据库中有一个表，它在`nvarchar`数据类型中有一个名为 title 的列。我想将用户在文本框中输入的标题保存到表格中。在我看来，我用

```
@using (Html.BeginForm("savetodb", "Advertise", FormMethod.Post, new { enctype = "multipart/form-data" })) { 
    @Html.TextBoxFor(m => m.AdTitle)
} 
```

此视图是来自具有此属性的 ViewModel 的强类型视图

```
public string AdTitle { get; set; } 
```

我知道如何将数据从控制器保存到数据库，但我不知道如何访问控制器中的数据（在`savetodb()`函数中）。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T07:44:25.763

```
public ActionResult SaveToDB(YourViewModel model)
{
    // Do what you want with AdTitle here.
    SaveInDB(model.AdTitle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:33:41.197

查看模型可能是一种方式，但在这种情况下，我认为最好使用 MVC 3 的自动模型绑定。所以如果你定义了一个名为 AdTitle 的字符串参数。

```
 public ActionResult SaveToDB(String AdTitle)
{
    // Do what you want with AdTitle here.
    SaveInDB(AdTitle);
} 
```

# slider - 单击按钮后如何使slidesJS暂停

> ID：10967074
> 
> 赞同：1
> 
> 时间：2012-06-10T07:41:18.460
> 
> 标签：slider

我在主页中使用slidesJS。现在我想单击一个按钮使其暂停，但slidesJS文档中似乎没有暂停选项。

SlidesJS 文档： [http ://slidesjs.com/](http://slidesjs.com/)

HTML化妆

```
 <!--slider start-->
     <div id="slides">
          <div class="slider">
           <div class="slide"><a href="#"><img src="http://www.fotolovec.cz/foto/albums/Fauna/Ptaci/normal_Brhlik02.jpg" /></a></div>
           <div class="slide"><a href="#"><img src="http://mw2.google.com/mw-panoramio/photos/medium/34484850.jpg" /></a></div>
          </div>

          <div id="navbar">
             <a id="prev" href="#">Prev</a> 
             <a id="next" href="#">Next</a>
             <a href="#" id="control">Pause</a>
          </div>
      </div>
      <!--slider end--> 
```

JS：

```
<script type="text/javascript">
        jQuery(function(){
             $('#slides').slides({
                    preload: true,
                    preloadImage: 'loading.gif',
                    play: 2000,
                    pause: 2000,
                    hoverPause: true,
                    autoHeight: true,
                    effect:'slide',
                    container: 'slider'
            });
         });
     </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T11:35:21.680

```
function sliderPause(){
            clearInterval($('#slides').data('interval'));
            }`` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T08:59:14.203

在您的 jquery.slides.js 文件中搜索 _this.stop(true);

它显示大约 3-4 次，下一次和上一次点击.. 您还将看到它显示为 paginationLink.click

我遇到的问题是单击上一个、下一个或分页后滑块停止滑动。我需要重新启动滑块..所以我所做的就是添加一个 setTimeout 到 play()

```
_this.stop(true);

setTimeout(function ()
{ _this.play(true) }, 3000); 
```

# java - 无法运行“播放”命令

> ID：10967075
> 
> 赞同：0
> 
> 时间：2012-06-10T07:41:23.757
> 
> 标签：java, playframework

我已经下载了 play-2.0.1 并尝试对其进行配置。但是当我尝试在提取的播放目录中执行“播放”命令时，我收到以下消息

> ```
>  _            _  _ __ | | __ _ _  _| | | '_ \| |/ _' | || |_| |  __/|_|\____|\__ (_) |_|            |__/ 
> ```
> 
> 玩！2.0.1，[http: //www.playframework.org](http://www.playframework.org)
> 
> 这不是一个游戏应用程序！
> 
> 用于`play new`在当前目录中创建新的 Play 应用程序，或转到现有应用程序并使用`play`.
> 
> 您还可以在 [http://www.playframework.org](http://www.playframework.org)浏览完整的文档。

有什么想法吗 ！！我正在使用以下版本的 java

> java 版本 "1.7.0-ea" Java(TM) SE Runtime Environment (build 1.7.0-ea-b66) Java HotSpot(TM) Client VM (build 16.0-b06, 混合模式, 共享)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:55:03.953

假设您使用 . 创建一个新的 Web 应用程序`play new testApp`，然后您需要进入该目录然后才能执行`play`. 您刚刚提取的播放目录包含许多可以运行的示例。前任。`cd`进入文件夹 {您提取的播放目录}\samples\java\comet-clock。进入此文件夹后，您可以运行`play`然后`run`和其他命令进行播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T05:13:20.383

我正在使用 Mac OSX 10.7。我支持这里有混淆空间的操作，因此我的回答。

## **答案：**

单独的“播放”命令不是完整的命令。您需要在它之后添加新的、运行的或帮助。

**要创建**一个新的 play 应用程序，命令将如下所示：

```
kerr$ /Applications/play/play new HelloWorld 
```

*（我将下载的二进制文件和解压缩的播放文件夹拖放到应用程序文件夹中，并将文件夹重命名为“播放”以保持简单）*

它会说“新应用程序将在 /Users/kerr/HelloWorld 中创建”

**要运行**HelloWord 应用程序，命令将如下所示：

```
kerr$ cd HelloWorld
kerr$ /Applications/play/play run 
```

*（重要提示：如果在其目录中运行它，则不需要应用程序名称，这是我遇到错误的地方。）*

它将显示“（服务器已启动，使用 Ctrl+D 停止并返回控制台...）”

打开`http://localhost:9000`以检查它是否有效。

* * *

## **困惑：**

在官方安装指南中，要求您输入的步骤之一是：

```
$ play 
```

显示的预期结果是：

```
new Create a new application
run Run the application in the current shell 
```

[http://www.playframework.com/documentation/1.0.1/install](http://www.playframework.com/documentation/1.0.1/install)

但是，按照步骤操作后我使用 play-2.2.1 得到的结果有不同的结果，并带有明显的警告：

```
kerr$ /Applications/play/play
       _
 _ __ | | __ _ _  _
| '_ \| |/ _' | || |
|  __/|_|\____|\__ /
|_|            |__/

play 2.2.1 built with Scala 2.10.2 (running Java 1.7.0_17), http://www.playframework.com

This is not a play application! 
```

没有预期的结果，因此混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T08:25:45.403

使用 cd 命令进入目录。然后执行方法“play run XXX”</p>

# apl - 在 APL 中定义一个普遍的函数

> ID：10967076
> 
> 赞同：6
> 
> 时间：2012-06-10T07:41:29.397
> 
> 标签：apl

如何在 APL 中定义一个普遍的功能？

我所做的是

```
function←{
    (⊃⍣(⍬≡⍴⍵)){the function that apply to scalar}¨⍵
} 
```

我认为应该有更好的方法来做到这一点，我没有看到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:59:23.363

APL 中的大多数原始函数已经无处不在。所以，除非你做一些花哨的事情，否则你的自定义函数已经很普遍了。例如

```
f←{÷1+*-⍵}    ⍝ sigmoid, f(x)=1/(1+exp(-x)) 
```

将适用于数组和标量。

如果你确实做了一些花哨的事情并且你有一个非普及的功能`f`，你可以通过以下方式将它变成一个普及的功能

```
g←{0=⍴⍴⍵:f⍵ ⋄ ∇¨⍵}   ⍝ the pervasive version of f 
```

可以理解为：如果参数是标量，则应用`f`它，否则递归地进入参数的每个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-12T19:21:18.550

[`dfns`工作区](http://dfns.dyalog.com/)包含一个运算符，该[`perv`运算符](http://dfns.dyalog.com/n_perv.htm)导致其操作数函数被普遍应用，带有一个或两个参数：

```
perv←{⍺←⊢               ⍝ Scalar pervasion
    1=≡⍺ ⍵ ⍵:⍺ ⍺⍺ ⍵     ⍝ (⍺ and) ⍵ depth 0: operand fn application
             ⍺ ∇¨⍵      ⍝ (⍺ or) ⍵ deeper: recursive traversal.
} 
```

[在线尝试！](https://tio.run/##SyzI0U2pTMzJT/8PBJrJ@QWVCilpecUKBalFZQopmcUFXHmpxSWpKY/aJmioJyapK6gnp6Sqa2qop6VnADkZmVnqmlwgdQoQdRC2eqK6gg7YCIgoAA "APL (Dyalog Unicode) – 在线试用")

# linux - 如何将目录中的每 100 个文件组合在一起？

> ID：10967091
> 
> 赞同：0
> 
> 时间：2012-06-10T07:44:39.113
> 
> 标签：linux, bash, shell

我在一个目录中有大量的小文本文件。我想将每 100 个文件合并成一个大文件。任何人都可以帮助我使用 Linux Shell 脚本来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:06:47.290

下面的草图将做到这一点：

```
files=( * )                                 # list of files
idx=0                                       # start index of actual package
len=100                                     # files per package
pcount=0                                    # package counter

while [ $idx -le ${#files[@]} ] ; do
  cat "${files[@]:idx:len}" > pack${pcount}   # process subarray
  ((idx+=len))                              # start of next package
  ((pcount++))                              # number of next package 
done 
```

结果是名为'pack0'，'pack1'，...的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T07:47:14.110

将输出附加到 new.txt

```
cat *.txt >> new.txt 
```

覆盖 new.txt

```
cat *.txt > new.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:00:18.293

如果文件可以（重新）移动，那么它相当简单：

```
find text_files_dir/ -name '*.txt' | \
head -n 100 | \
while read f; do cat "$f" >> big_file && rm "$f"; done 
```

或者

```
find text_files_dir/ -name '*.txt' | \
head -n 100 | \
while read f; do cat "$f" >> big_file && mv "$f" some_place_else/; done 
```

你可以把它放在一个循环中，直到没有更多的文本文件。

# javascript - 带有 google earth api 的地标 ID 数组

> ID：10967096
> 
> 赞同：0
> 
> 时间：2012-06-10T07:46:20.260
> 
> 标签：javascript, html, google-earth-plugin

任何人都知道如何获取使用以下代码创建的多个地标的 id：

```
terrainPlacemark = makePlacemark(hitTestResult.getLatitude(), hitTestResult.getLongitude(),
          hitTestResult.getAltitude(), ge.ALTITUDE_ABSOLUTE, 'T'); 

//set placemark name
terrainPlacemark.setName("placemark" + counter);

//set the placemark on the map
ge.getFeatures().appendChild(terrainPlacemark);

function makePlacemark(lat, lng, alt, altMode, iconStr) {
      var icon = ge.createIcon('');
      icon.setHref('http://maps.google.com/mapfiles/kml/paddle/' + iconStr + '.png');

      var style = ge.createStyle('');
      style.getIconStyle().setIcon(icon);
      style.getIconStyle().getHotSpot().set(0.5, ge.UNITS_FRACTION, 0, ge.UNITS_FRACTION);

      var pt = ge.createPoint('');
      pt.set(lat, lng, alt, altMode, false, false);

      var pm = ge.createPlacemark('');
      pm.setGeometry(pt);
      pm.setStyleSelector(style);

      return pm;
} 
```

它们是通过单击 google earth api 创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:26:55.707

它们没有 ID，因为您没有通过将空字符串传递给`createPlacemark`方法来明确设置 ID

相反，尝试`ge.createPlacemark('anyUniqueID')`

# c# - 在后台工作人员、wp7 电话应用程序中使用计时器发出声音

> ID：10967098
> 
> 赞同：0
> 
> 时间：2012-06-10T07:47:03.730
> 
> 标签：c#, .net, windows-phone-7, windows-phone-7.1, backgroundworker

我碰壁了，来到这里希望你们能帮助我解决以下问题：

我正在设计一个 wp7 应用程序，我会定期（每 700 毫秒）发出声音。我希望这些声音在 UI 线程之外的另一个线程上播放。因此，我不能使用 a `dispatch timer`，因为在这些声音触发的同时 UI 线程将被大量使用。

在看这个问题时，我做了一个`backgroundworker`with`Thread.Sleep(700)`命令。这是可行的，但正如人们所预料的那样，发出声音可能需要超过 700 毫秒的时间。所以有时我会听到延迟。

`backgroundworker`所以我求助于你们——我怎样才能在一个或另一个线程中每 700 毫秒接近一次声音？是`Timer`一个明智的想法吗？

这里有一些代码可以更好地说明：

```
 private void RunBackgroundWorker()
    {
        backgroundWorker = new BackgroundWorker ();
        backgroundWorker.WorkerSupportsCancellation = true;
        backgroundWorker.DoWork += new DoWorkEventHandler(StartSounds); 

        backgroundWorker.RunWorkerAsync();
    }

    public void StartSounds(object sender, EventArgs e)
    {

        for (currentsoundchoice = 0; currentsoundchoice <= max; currentsoundchoice ++)
        {
            if (backgroundWorker.CancellationPending == true)
            {
                backgroundWorker.CancelAsync();
                currentsoundchoice = max + 1; //just to ensure it stops.
            }
            else
            {
                Time_Tick();
                if (max == 12)
                    currentsoundchoice = -1; //repeats the loop when it reaches max.

            }

        }
    }

    void Time_Tick()
    {
        Thread.Sleep(700);
        FrameworkDispatcher.Update();

        switch (sounds)
            case 0: //code 
                    break;
            // ETC, So forth.......
    } 
```

我听说使用 Timer 也是解决此问题的好方法，但是是否可以在后台工作程序中运行计时器，如果可以，它的结构如何？更重要的是，它是否能让我在没有任何延迟的情况下获得尽可能接近我想要的 700 毫秒发射时间？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:13:04.360

`BackgroundWorker`在这里是错误的选择。它旨在允许您在后台线程上执行昂贵的工作，然后将结果同步回 UI。您不需要任何同步。此外，您需要定期进行工作 - 而不是一次性的任务。

A`Timer`会更合适。它将允许您每 700 毫秒运行一次逻辑，并删除`Thread.Sleep()`当前代码中的讨厌调用。将`Timer`像这样做一样使用后台线程`BackgroundWorker`。

但是请注意，它只能保证在700 毫秒过去*之前不会运行。*例如，如果您绝对在锤击设备，它可能很难定期运行您的代码，并且您可能会注意到延迟。

# sql - 从sql表中删除记录并更新sql表

> ID：10967104
> 
> 赞同：0
> 
> 时间：2012-06-10T07:47:18.990
> 
> 标签：sql, database, sqlite

我正在尝试删除 sqlite 中的记录。我有四个记录记录 1、记录 2、记录 3、记录 4，其中 id 作为主键。

所以它会为我插入的每条记录自动增加。现在当我删除记录 3 时，主键没有递减。如何根据我要删除的记录来减少 id。

当我从数据库中删除记录 3 时，我希望 id 为 1、2、3。现在是 1,2,4。是否有任何 sql 查询来更改它。我试过这个

```
DELETE FROM TABLE_NAME WHERE name = ? 
```

注意：我在 xcode 中实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:56:35.140

自动增量的意义始终是创建一个新的唯一 ID，而不是填补删除记录造成的空白。

编辑

您可以通过**特殊的桌子设计**来达到它。没有已删除的记录，但有一个字段“del”标记为已删除。

例如，使用“ `select ... where del> 0`”将查找所有活动记录。

或者放置没有“位置”的所有记录，则 ID 不受影响。使用“if del = 0 continue”循环遍历数组。因此，数组总是按连续顺序排列。

它非常灵活。根据选择...你得到。

*   所有活动记录
*   所有删除的记录
*   所有记录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T07:56:42.103

我不知道你为什么想要这个，但我建议保留这些 ID。将 ID 设置为 1、2、4 有什么问题？如果您在其他地方使用这些 ID 值作为外键，您也可能会破坏事物（参照完整性）。

另请参阅此页面以更好地了解自动增量字段的工作原理 [http://sqlite.org/autoinc.html](http://sqlite.org/autoinc.html)

# javascript - JSON.stringify 无需转义

> ID：10967105
> 
> 赞同：31
> 
> 时间：2012-06-10T07:47:23.860
> 
> 标签：javascript, jquery, json, serialization

JSON.stringify 正在将我的 json 对象转换为以下字符串

> {\"2003\":{\"1\":{\"2\":[\"test\"],\"3\":[\"test2\"]}}}

当它不应该逃脱时。结果应该是下面引用的字符串

> {"2003":{"1":{"2":["test"],"3":["test2"]}}}

而不是使用所有转义引号的一般替换并删除可能在输入中的引号。如何设置 JSON.stringify 不双重转义变量？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-10T07:52:45.957

您正在对字符串进行字符串化，而不是对象：

```
var str = '{"2003":{"1":{"2":["test"],"3":["test2"]}}}';
var obj = {"2003":{"1":{"2":["test"],"3":["test2"]}}};

console.log( JSON.stringify(str) );  // {\"2003\":{\"1\":{\"2\":[\"test\"],\"3\":[\"test2\"]}}} 
console.log( JSON.stringify(obj) );  // {"2003":{"1":{"2":["test"],"3":["test2"]}}} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2021-06-18T08:06:42.950

在浏览器的控制台中尝试这两个示例：

```
let obj = {2003:{1:{2:["test"],3:["test2"]}}};
JSON.stringify(obj);

-> "{\"2003\":{\"1\":{\"2\":[\"test\"],\"3\":[\"test2\"]}}}" 
```

和

```
let obj = {2003:{1:{2:["test"],3:["test2"]}}};
console.log(JSON.stringify(obj));

-> {"2003":{"1":{"2":["test"],"3":["test2"]}}} 
```

在这两种情况下，**返回的字符串`JSON.stringify`都是有效的**

**在第一种情况下，您将****“原始”字符串**打印到以双引号开头和结尾的控制台，并且所有嵌套的双引号都需要转义（`\"`而不是`"`）。JSON 验证器会将此字符串标记为**格式错误的 JSON**，但仍可使用`JSON.parse`

**在第二种情况下，您将****字符串“解释”**打印为 JSON by `console.log`。JSON 验证器会将其标记为**有效 JSON**，但无法解析，`JSON.parse`因为它不是字符串（周围没有引号）

# google-api - Chrome 扩展的谷歌翻译 API

> ID：10967106
> 
> 赞同：2
> 
> 时间：2012-06-10T07:47:28.777
> 
> 标签：google-api, google-translate

我正在创建一个简单/快速的翻译器，它只是即时翻译选定的单词，我想将它作为免费扩展发布，有没有我可以使用谷歌翻译 API 而无需付费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:21:34.330

不，您不能在没有 Billing 的情况下使用谷歌翻译 API，此外您可以尝试创建一个扩展程序，该扩展程序采用选定的单词并通过生成翻译 url 使用 traslate.google.com 进行翻译，例如： [http ://translate.google.com/ #en|ru|hello 会将](http://translate.google.com/#en|ru|hello) 单词 hello 从英语翻译成俄语，或者您可以考虑使用例如一些 CURL 脚本从服务器端打开该 URL，并从结果框中获取内容并将结果通过 ajax 发送到您的扩展程序。

# visual-studio-2010 - 有没有办法在 Visual Studio 中有多个 main？

> ID：10967107
> 
> 赞同：0
> 
> 时间：2012-06-10T07:47:39.860
> 
> 标签：visual-studio-2010

有没有办法在项目中有多个 main 并且每个 main 都可以执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T07:52:37.253

如果你想多线程你的应用程序，你应该看看线程库。否则，您将无法拥有多个主要功能。编译器将 main 函数存储为要执行的第一组指令。如果只运行一个线程，则不能同时执行两组相同的指令。你到底想做什么？

# php - Facebook connect php - 保持登录状态

> ID：10967118
> 
> 赞同：1
> 
> 时间：2012-06-10T07:49:21.763
> 
> 标签：php, facebook, facebook-php-sdk

我正在尝试使用 facebook 与 php 连接，即使在会话被破坏后用户仍将保持登录到我的网站，这一点很重要。

我已经从 SDK 运行了[with_js_sdk.php](https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php)示例。在这种情况下，用户必须在每个会话中重新登录。使用[example.php](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)方法，它不会发生，并且用户永远保持登录状态。

我想问这是为什么？是否可以让第一种方法使用户始终登录？

顺便说一句，我认为我需要 PHP + JS 组合，因为我不想在登录时刷新页面。这是真的吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:13:03.217

这两个示例都应该让用户保持登录状态。必要的登录数据存储在 cookie 中并重复使用。

可能是什么问题：我发现“$user = $facebook->getUser();” 即使用户登录，调用有时也会失败。我的建议是不要依赖该调用，而是跳到下面的 try/catch 块，然后从那里设置用户。

试试 { $user_profile = $facebook->api('/me'); $user = $user_profile['user_id']; } 捕捉 (FacebookApiException $e) { $user_profile = false; $用户=空；}

因为这看起来更可靠。

* * *

做不到这一点，你可以自己控制这一切。步骤是：

1.  告诉 Javascript 不要使用 cookie
2.  登录用户并使用“getAccessToken”函数获取登录用户的访问令牌。将其存储在您自己的名称/持续时间的 cookie 中。
3.  下次加载页面时，检查您创建的访问令牌 cookie，并使用“setAccessToken”，然后遵循相同的 try/catch 块。如果用户返回无效，则清除您自己的 cookie，因为这意味着访问令牌已被用户无效。

您不应该需要最后一种方法（除非在会话/设备之间共享令牌，或希望离线访问），因为这正是 facebook SDK 所做的 - 但它确实可以帮助您更多地控制和理解 hte 过程。

* * *

最后，您可以通过 JavaScript 完成所有 login / getAccessToken / store cookie 方法，从而在不刷新页面的情况下登录并记住用户。只需检查 auth.login 上的适当操作以记住 cookie 并更改页面内容 - 不要重新加载页面。

下次用户刷新页面/返回站点时，PHP 将读取 cookie。记得在注销时清除 cookie。

所以你可以做你想做的，是的。

# javascript - 比较javascript中的变量

> ID：10967122
> 
> 赞同：0
> 
> 时间：2012-06-10T07:51:15.387
> 
> 标签：javascript, html, css

我陷入了困境。我一直在尝试比较 javascript 中的两个变量，然后将一个类分配给父元素（如果匹配）。但我在这方面没有成功。我已经搜索了所有可能的代码并尝试了它们，但无法使其正常工作。到目前为止我写的代码如下：

```
$('div#encased a').click(function(){
        $('ul#filter .current').removeClass('current');
        var class_name = ($(this).parent().attr('class').replace('-',' '));
        var className = class_name.toString();
        alert(className);
        $('ul#filter li').each(function(){
            /*1st version
            var filterValue = $(this).text().toLowerCase();
            var filterValstr = filterValue.toString();
            alert(filterValstr);
            if(filterValstr==className)
            {
                alert("match!")
                $(this).parent().addClass('current');   
            }*/

            /*2nd version*/
            if($(this).text().toLowerCase() == class_name)
            {
                $(this).parent().addClass('current');   
            }
            /*this works which according to me means it is not entering the if clause
            else{
                $(this).parent().fadeOut('slow').addClass('hidden');    
            }*/
        });
    }); 
```

据我所知，当我尝试使用 else 函数时，该值根本不会进入 if 命令中，并且有效。我确信我正在做一些愚蠢的错误。我在这里尝试了 2 种方法，我评论了其中一种，但在这里介绍了两种方法，以了解它们中的任何一种是否正确。

基本上，在我的 div#encased 元素中单击图像时，会获取图像的类名，然后与上面过滤器菜单中的文本进行比较。如果它与匹配的过滤器文本匹配，则应为其分配 current 类。希望你得到我想要解释的东西。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:59:33.150

您的代码不清楚，有点像意大利面条，但也许您的问题是空格，请尝试修剪它们

```
var filterValue = $.trim($(this).text().toLowerCase()); 
```

而且您应该知道`string.toString()`返回字符串...
示例：

```
var str = "bla bla bla";
alert(str.toString === str); // true! 
```

# java - 如何在 Java 中创建表？

> ID：10967123
> 
> 赞同：-1
> 
> 时间：2012-06-10T07:51:18.897
> 
> 标签：java, database, dictionary

我想在 Java 中创建一种表。我最初尝试使用 HashMap：

```
public Map<String, Double> namesAndPrices = new HashMap<String, Double>(); 
```

当我想像这样添加另一个字符串时，这不起作用：

```
public Map<String, Double, String> namesAndPrices = new HashMap<String, Double, String>(); 
```

我可以使用什么类在 Java 中创建一种表，我可以在其中轻松查找值以及不查找值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T07:54:20.667

使用对象，而不是试图将非结构化数据放入集合中。

您的地图应该是 a `Map<String, Product>`，其中 Product 对象包含您的产品的名称、价格和其他属性。

[顺便说一句，您在上一个问题](https://stackoverflow.com/questions/10966855/how-to-create-an-associative-list-in-java)中已经被告知要这样做，您甚至接受了答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T07:53:58.343

您需要使用一个对象作为包装双精度和字符串的第二个参数：

```
class Container
{
    public String str;
    public double dbl;
}

public Map<String, Container> container = new HashMap<String, Container>(); 
```

您可能希望使用更好的名称，没有公共成员，但希望能说明总体思路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T07:55:49.703

您最好创建一个自定义对象占位符。

```
Map<String, Database> namesAndPrices = new HashMap<String, Database>();

public class Database {
    private double doub;
    private String str;

    public Database(double doub, String str) {
        this.doub = doub;
        this.str = str;
    }

    // getters
} 
```

# java - EditText.setText 错误

> ID：10967124
> 
> 赞同：-2
> 
> 时间：2012-06-10T07:51:24.953
> 
> 标签：java, android

解决！问题是我使用了this.findViewById，但我将使用dialog.findViewById。TNX 所有人，请原谅！

我有一个奇怪的（对我来说）问题。我尝试用从光标读取的字符串写入edittext，我知道这是正确的方法：

```
EditText myText;

     final Dialog dialog = new Dialog(this);
     dialog.setContentView(R.layout.login);
     dialog.setTitle("Login");
     dialog.setCancelable(true);

     Cursor lista=db.listaParametri();

     try
        {
            while (lista.moveToNext())
            {

                if (lista.getString(0).equals("username"))
                {

                    myText =  (EditText) this.findViewById(R.id.username);

                    Log.d("log", lista.getString(1));

                    myText.setText( lista.getString(1) );

                }

            }
        }
        finally
        {
            lista.close();
        } 
```

但是当尝试编写 whit settext() 返回此错误：

```
06-10 09:43:01.829: E/AndroidRuntime(279): FATAL EXCEPTION: main
06-10 09:43:01.829: E/AndroidRuntime(279): java.lang.NullPointerException
06-10 09:43:01.829: E/AndroidRuntime(279):  at it.axiomatic.epsoft.sms.EpsoftSMSActivity.setup_parametri(EpsoftSMSActivity.java:147)
06-10 09:43:01.829: E/AndroidRuntime(279):  at it.axiomatic.epsoft.sms.EpsoftSMSActivity.onOptionsItemSelected(EpsoftSMSActivity.java:73)
06-10 09:43:01.829: E/AndroidRuntime(279):  at android.app.Activity.onMenuItemSelected(Activity.java:2195)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
06-10 09:43:01.829: E/AndroidRuntime(279):  at android.view.View$PerformClick.run(View.java:8816)
06-10 09:43:01.829: E/AndroidRuntime(279):  at android.os.Handler.handleCallback(Handler.java:587)
06-10 09:43:01.829: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-10 09:43:01.829: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
06-10 09:43:01.829: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-10 09:43:01.829: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
06-10 09:43:01.829: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-10 09:43:01.829: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-10 09:43:01.829: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method) 
```

这是怎么回事？天呐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:35:01.433

解决！问题是我使用了this.findViewById，但我将使用dialog.findViewById。TNX 所有人，请原谅！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:16:33.830

任何一个：

1.  你的 textedit 没有被正确定义（但如果你可以用它做其他事情那么它应该没问题）
2.  `lista.getString(1)`为空，请尝试使用 catlog 打印它，说明`Log.d("log", lista.getString(1));`哪个应该输出字符串的值。

# android - 搜索后始终返回到带有附加功能的 android 中的相同活动

> ID：10967126
> 
> 赞同：2
> 
> 时间：2012-06-10T07:51:48.873
> 
> 标签：android, search, android-activity

好的，我们开始：

我有一个搜索界面/对话框（由系统创建的类型）这调用*FilesList*，当没有搜索意图调用时将显示所有用户*项*的活动（从主活动调用时工作正常）

来自搜索的查询很好地过滤了这些结果，但是当用户选择其中一个结果时，它将返回到上一个活动，而我希望它始终返回到主活动，并传递所选项目的 id（我可以好起来）

此外，在我调用搜索的任何活动中，都不会调用 onActivityResult（因为搜索意图不是为了结果？）

基本上，搜索后总是返回主活动，返回在*FilesList中选择的项目*

编辑：

要选择一个项目，用户单击列表视图并调用此方法：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    Log.d("onclick ID", ((Note)data.get(position)).ID);
    Note array=(Note)data.get(position);
    intent.putExtra("id", array.ID);
    intent.putExtra("tag", currentTag);
    setResult(RESULT_OK, intent);
    finish();
} 
```

搜索是这样启动的：http: [//developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:06:36.997

好的，我没有尝试返回该活动，而是将搜索点指向我的主要活动，然后从那里获取查询，对结果进行排序并将其返回到要打开的主要活动。

基本上重新安排了程序流程，这篇文章有点帮助：[Android：将搜索查询返回到当前活动](https://stackoverflow.com/questions/5094222/android-return-search-query-to-current-activity)

# javascript - javascript onmouseout 也适用于鼠标悬停

> ID：10967128
> 
> 赞同：1
> 
> 时间：2012-06-10T07:51:57.200
> 
> 标签：javascript, onmouseover, onmouseout

我正在尝试在按钮中显示/隐藏***一些***文本。按钮是

```
<button id="SOS" onmouseover="show()" onmouseout="hide();">
    <p>S.O.S</p>
    <div id="sos_left"> <?=$text_to_show_hide?></div>
</button> 
```

和javascript代码是

```
<script type="text/javascript">
function show()
    {
        sos_left=document.getElementById('sos_left');
         alert("mouseover");
         sos_left.style.color = "red";
         sos_left.style.fontSize = "28";

    }
function hide(){

       sos_left=document.getElementById('sos_left');
       alert("mouseout");
       sos_left.style.color = "blue";
       sos_left.style.fontSize = "0";
}
</script> 
```

问题是即使我将鼠标悬停在鼠标上也会发出警报。

注意：我不能使用 jquery，因为该站点是基于 vbulletin 的，并且我在其中一个模板上使用了此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T08:19:25.323

问题是事件冒泡`mouseover`，`mouseout`这意味着当您的光标进入和退出作为按钮后代的元素时，按钮上定义的事件侦听器也会被触发。

您可以做的是检查生成事件的元素是否实际上是`<button>`元素。像这样修复 DOM：

```
<button id="SOS" onmouseover="show(event)" onmouseout="hide(event);">... 
```

然后你的JS代码：

```
function show(e) {
    if ((e.target || e.srcElement).id !== "SOS") return;
    ...

function hide(e) {
    var tgt = e.target || e.srcElement;
    if (tgt.id !== "SOS") return;
    // If the cursor enter in one of the descendants, mouseout is fired, but
    // we don't want to handle this
    if (tgt.contains) {
        if (tgt.contains(e.relatedTarget || e.toElement)) return;
    } else if (this.compareDocumentPosition)
        if (tgt.compareDocumentPosition(e.relatedTarget)
                & Node.DOCUMENT_POSITION_CONTAINS) return;
    ... 
```

在 Internet Explorer 中（现在也在 Opera 中）有这些事件`mouseenter`，`mouseleave`它们的行为非常相似，但不会冒泡。对于其他浏览器，它们在 jQuery 等通用框架中进行模拟。

最后一点，我建议您使用比传统方法更现代的方法来附加事件侦听器。另外，您定义的方式`sos_left`意味着它成为一个全局变量。`var`在定义前面使用关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T07:56:45.870

你什么都不藏。。

用于`display:none`“删除”元素或`visibility:hidden`隐藏元素。

要“重新添加”元素，请使用`display: block`或`visibility:visible`，如果您使用了可见性属性来隐藏。

尝试两者以查看差异。

另一个问题是，

您尝试将其`sos_left`用作变量，但您没有将其声明为变量。

使用`var sos_left`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T08:09:50.453

那是因为您将事件应用于`div`not `button`。尝试这个：

```
sos_button=document.getElementById('SOS'); 
```

# vector - 如何计算相对于 3D 相机视角的方位角和仰角......？

> ID：10967130
> 
> 赞同：2
> 
> 时间：2012-06-10T07:52:44.117
> 
> 标签：vector, 3d, camera, elevation, azimuth

我这里有点生疏了。

我有一个向量 (camDirectionX, camDirectionY, camDirectionZ) 代表我的相机视图方向。我有一个 (camX, camY, camZ) 这是我的相机位置。

然后，我在 (objectX, objectY, objectZ) 放置了一个对象

如何从相机的角度计算我的对象的方位角和仰角？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T03:47:39.087

为了简化问题，我要做的第一件事是转换坐标空间，使相机位于 (0, 0, 0) 并直接指向其中一个轴（所以方向是 (0, 0, 1) ）。翻译使相机位于 (0, 0, 0) 非常简单，所以我不会深入讨论。旋转以使相机方向为 (0, 0, 1) 有点棘手...

一种方法是构建相机的完整正交基础，然后将其粘贴在旋转矩阵中并应用它。相机的“标准正交基”是指从相机指向前方、上方和右侧的三个向量的一种奇特方式。它们都应该彼此成 90 度（这是正交位的含义），并且它们的长度都应该是 1（这是正常位的含义）。

您可以通过一些叉积技巧获得这些向量：两个向量的叉积与两者垂直（成 90 度）。

为了获得向右的向量，我们可以将相机方向向量与 (0, 1, 0) （一个指向正上方的向量）进行交叉乘积。您需要对从叉积中得到的向量进行归一化。

为了获得相机的向上矢量，我们可以将相机方向矢量与我们刚刚计算的向右矢量进行交叉乘积。假设两个输入向量都被归一化，这不应该需要归一化。

我们现在有了相机的正交基础。如果我们将这些向量粘贴到 3x3 矩阵的行中，我们会得到一个旋转矩阵，它将转换我们的坐标空间，因此相机直接指向其中一个轴（哪个轴取决于您粘贴向量的顺序）。

现在计算物体的方位角和仰角相当容易。

要获得方位角，只需`atan2`在对象的 x/z 坐标上执行。

要获得高程，请将对象坐标投影到 x/z 平面上（只需将 y 坐标设置为 0），然后执行以下操作：

```
acos(dot(normalise(object coordinates), normalise(projected coordinates))) 
```

这将始终给出一个正角度——如果对象的 y 坐标小于 0，您可能想要否定它。

所有这些的代码将类似于：

```
fwd = vec3(camDirectionX, camDirectionY, camDirectionZ)
cam = vec3(camX, camY, camZ)
obj = vec3(objectX, objectY, objectZ)

# if fwd is already normalised you can skip this
fwd = normalise(fwd)

# translate so the camera is at (0, 0, 0)
obj -= cam

# calculate the orthonormal basis of the camera
right = normalise(cross(fwd, (0, 1, 0)))
up = cross(right, fwd)

# rotate so the camera is pointing straight down the z axis
# (this is essentially a matrix multiplication)
obj = vec3(dot(obj, right), dot(obj, up), dot(obj, fwd))

azimuth = atan2(obj.x, obj.z)

proj = vec3(obj.x, 0, obj.z)
elevation = acos(dot(normalise(obj), normalise(proj)))
if obj.y < 0:
    elevation = -elevation 
```

需要注意的一件事是，当您的相机直上或直下时，原始相机矢量与 (0, 1, 0) 的叉积将返回零长度矢量。为了完全定义相机的方向，我假设它总是“直的”，但这并不意味着当它直上或直下时——你需要另一个规则。

# php - wordpress wp_insert_user 用户未注册

> ID：10967132
> 
> 赞同：0
> 
> 时间：2012-06-10T07:52:53.623
> 
> 标签：php, wordpress

我使用此代码在 wordpress 多站点上插入新的 wordpress 用户。

```
 require_once("../../../../wp-config.php");
    require_once(ABSPATH . 'wp-admin/includes/admin.php');
    $user=array('user_pass'=>$password,'user_login'=>$username,'user_email'=>$email,'role'=>'subscriber);
    $status = wp_insert_user( $user); 
```

我没有收到任何错误，甚至获得了新的用户 ID，但我在管理面板上看不到新用户。

当尝试使用相同的电子邮件添加新用户时，它表示该用户已经注册。

我的问题是什么？

# clojure - 使用相对链接和非根上下文路径将 Clojure webapps 部署到 Jetty 时链接断开

> ID：10967134
> 
> 赞同：4
> 
> 时间：2012-06-10T07:53:12.087
> 
> 标签：clojure, jetty, compojure, ring, enlive

我一直在尝试用 Clojure 编写 webapps，直到现在还很容易。我按照 Chas Emerick 的出色截屏视频[开始 clojure](http://cemerick.com/2012/05/02/starting-clojure/)，并快速启动并运行了一个 url 缩短器。接下来我希望能够部署它，这就是麻烦开始的时候。

当我在开发中运行它或将它作为根 webapp 部署到 Jetty 时，一切都很好，但是当我使用上下文路径部署它时，它就不行了。或者，更确切地说，它几乎可以工作。我所有的 Compojure 路由仍然有效，但`FORM`HTML 文件中的操作链接已损坏并给我 404。

这是 Compojure 路由设置：

```
 (defroutes app*
    (rt/resources "/")
    (GET "/" request (homepage request))
    (POST "/shorten" request
          (let [id (shorten (-> request :params :url))]
            (response/redirect "/")))
    (GET "/:id" [id] (redirect id)))

  (def app (compojure.handler/site app*)) 
```

这是主页模板的 HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>Insert title here</title>
    <link type="text/css" rel="stylesheet" href="site.css" />
</head>
<body>
    <form method="POST" action="shorten">
        <input type="text" name="url" />
        <input type="submit" value="Shorten!" />
    </form>
</body>
</html> 
```

问题是`action="shorten"`网址。当使用上下文路径部署到 Jetty 时`/example`一切正常，直到我触发表单提交。然后 Jetty 抱怨它找不到`localhost:8080/shorten`哪个意味着（我认为）它没有被视为相对路径，而是绝对路径。

所以，我的问题是：如何解决这个问题？我想我可以只在操作链接中指定完整路径，但这会很不灵活，并且会使开发中的 servlet 更难运行。有没有办法配置我的出路？或者一些神奇的 URL 前缀（比如`~/`在 Razor 中）会做正确的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T21:05:26.750

我有同样的问题。换行：

```
(POST "/shorten" request 
```

至

```
(POST "shorten" request 
```

它应该可以工作（嗯，它对我有用）

# android - 在eclipse中复制或重命名android项目

> ID：10967135
> 
> 赞同：1
> 
> 时间：2012-06-10T07:53:26.230
> 
> 标签：android, eclipse

我试图在同一个工作区中复制和粘贴一个项目。该项目被复制但不在我的设备上运行。

如果我保留默认名称，例如“myProject 的副本”，它就可以工作。

如果我尝试使用 refractor 选项重命名项目显示错误：“Android 需要编译器合规级别 5.0 或 6.0。找到 '1.7' 而不是。请使用 Android 工具 > 修复项目属性..”当我按照建议修复项目时无法加载到我的设备

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:42:49.370

转到项目属性文件并更改项目名称并清理并构建项目。它应该可以工作

# objective-c - UIImagePickerControllerCameraDeviceFront 每隔一段时间才有效

> ID：10967139
> 
> 赞同：3
> 
> 时间：2012-06-10T07:54:14.663
> 
> 标签：objective-c, ios, cocoa-touch, uiimagepickercontroller

在我的应用程序中，我尝试在`UIImagePicker`. 我知道，看起来很简单......

```
imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceFront; 
```

Now, the first time I launch my picker everything works fine and the front camera is initialized, but when the picker is dismissed, and presented again the back camera is used. 从那以后，如果我不断打开和关闭选择器，相机使用的将是：正面，背面，正面，背面，正面，背面......

我已将此代码剥离为选择器的基本知识，试图隔离问题并且它仍然存在。有没有人遇到过这个问题？任何指针或方向将不胜感激！

**编辑：**问题解决了！我打电话`imagePicker = [[UIImagePickerController alloc] init];`而`viewDidLoad`不是`viewDidAppear`！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:25:46.120

问题**必须**在于您如何尝试初始化/呈现/关闭您的控制器。

那么，为什么在摄像机之间来回切换呢？

似乎底层`AVCaptureSession`由于某种原因在控制器被解雇后继续运行。所以下次你展示它时，它试图添加输入但它很忙，所以转到下一个可用的（后置摄像头），中断自己（从而释放前一个）等等。

# ruby - Ruby Regex 半反斜杠同时保留换行符

> ID：10967142
> 
> 赞同：0
> 
> 时间：2012-06-10T07:54:41.477
> 
> 标签：ruby, regex

我有以下字符串：

```
coolStr = '<!--  \\n    @author       Phil R\\n    @date         6.5.2012\\n    @description  Me T\\\\nesting S\\\\\\\\ntuff\\n-->' 
```

该字符串似乎已被双重转义。我想把字符串变成：

```
newCoolStr = "<!--  \n    @author       Phil R\n    @date         6.5.2012\n    @description  Me T\\nesting S\\\\ntuff\n-->" 
```

所以如果你写：

```
puts newCoolStr 
```

你会得到：

```
<!--  
    @author       Phil R
    @date         6.5.2012
    @description  Me T\nesting S\\ntuff
--> 
```

我一直没能做到这一点。我能得到的最接近的是能够将反斜杠减半：

```
coolStr.gsub(/\\\\/) {'\\'} 
```

但是由于我不明白的原因，这不会捕获“\\n”的实例，然后您最终会陷入这种情况，换行符与最初显示为“\\\\n”的内容之间没有区别。示例是：

```
<!--  \\n    @author       Phil R\\n    @date         6.5.2012\\n    @description  Me T\\nesting S\\\\ntuff\\n--> 
```

似乎是一个相当简单的问题，但我似乎无法理解。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:15:58.657

一个问题是，根据 ruby​​，字符串中的换行符不是换行符。*它是与n*字符相邻的转义反斜杠。

你可以

```
gsub(/\\+n/,"\n") 
```

但是您需要一种方法来区分所需的换行符和描述中您不想转义的内容。这与您的应用程序更相关。

在这种情况下，你可以做一个快速的脏话，说如果换行符后面跟着一个单词字符，把它当作文本。

```
str =  "coolStr = '<!--  \\n    @author       Phil R\\n    @date         6.5.2012\\n    @description  Me T\\\\nesting S\\\\\\\\ntuff\\n-->'"

puts str.gsub(/\\+n(?!\w)/,"\n")

coolStr = '<!--  
@author       Phil R
@date         6.5.2012
@description  Me T\\nesting S\\\\ntuff
-->' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:30:03.140

我遇到了 GreyCat 的解决方案：

[如何从 ruby​​ 中取消转义 c 样式的转义序列？](https://stackoverflow.com/questions/4265928/how-do-i-unescape-c-style-escape-sequences-from-ruby)

这正是我所需要的。它消除了双重转义并解决了我的问题。支持 GreyCat 的解决方案并将其标记为我自己问题的答案。

# html - 当我最小化浏览器时如何缩放 div 以使 div 不会相互折叠

> ID：10967143
> 
> 赞同：0
> 
> 时间：2012-06-10T07:54:42.967
> 
> 标签：html, scale

我有一个小问题。如果我最小化窗口，如何设置 2 个 div 的高度以便它们不会折叠而是动态缩放？我在 js 中做到了这一点：

```
$(document).ready(function(){
    var footer = document.getElementById('footer').offsetHeight;
    var sidebar = document.getElementById('sidebar').offsetHeight;
    document.getElementById('sidebar').style.height = sidebar - footer + 'px';

}); 
```

这是有效的，但当我最小化时不起作用，我是否必须在一个函数中执行它并在 window.load 期间调用它？现在的问题是，当我最小化浏览器时，div 会再次相互重叠..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:06:36.227

我认为您需要绑定到 resize 事件

```
$(document).ready(function(){
  var sidebar = document.getElementById('sidebar').offsetHeight;
  $(window).resize(function(){
    var footer = document.getElementById('footer').offsetHeight;
    document.getElementById('sidebar').style.height = sidebar - footer + 'px';
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:53:06.533

对于那些曾经搜索过这种设置的人来说，这也是解决方案......

```
<script type="text/javascript">
$(document).ready(function(){
     var winh = document.body.clientHeight;
     var footer = document.getElementById('footer').offsetHeight;
     document.getElementById('sidebar').style.height = winh - 5/2*footer + 'px';
     document.getElementById('sidebar').style.marginBottom = footer + 'px';
$(window).resize(function(){
     var winh = document.body.clientHeight;
     var footer = document.getElementById('footer').offsetHeight;
     document.getElementById('sidebar').style.height = winh - 5/2*footer + 'px';
     document.getElementById('sidebar').style.marginBottom = footer + 'px';
     });
});
</script> 
```

此代码在 document.ready 期间和调整大小期间动态设置侧边栏的高度。特别感谢 Bart 的帮助！

# .net - 如何只允许 A-Za-z 字符

> ID：10967152
> 
> 赞同：0
> 
> 时间：2012-06-10T07:57:39.150
> 
> 标签：.net, vb.net

我尝试了以下代码：

```
 Private Sub txtName_KeyPress(sender As Object, e As System.Windows.Forms.KeyPressEventArgs) Handles txtName.KeyPress
  ' allow upper and lower case A-Z, and backspace
  If Not Chr(KeyAscii) Like "[A-Za-z]" And KeyAscii <> 8 Then KeyAscii = 0
 End Sub 
```

但它给出了：

> 未声明“KeyAscii”。由于其保护级别，它可能无法访问。

关于如何只允许字母表的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T08:01:34.153

看起来您试图逐字翻译 VB6 代码。您需要重新学习该语言，VB.NET 完全不同，只是名称不同。

在您的特定情况下，`KeyAscii`已被替换为[`KeyPressedEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.aspx)具有两个成员的 :`KeyChar`和`Handled`.

此外，.NET 区分字符和字符串（= 字符集合），您不能简单地获取一个字符并将`Like`运算符应用于它，您也不应该这样做。

相反，请执行以下操作：

```
If Character.IsLetter(e.KeyChar) Then
    e.Handle = True
End If 
```

设置`Handled`为通常与在 VB6`True`中设置为 0 具有相同的效果（请阅读文档！）。`KeyAscii`

此外，由于您显然只是在切换，请确保在项目选项中启用这两个选项，`Option Explicit`并`Option Strict`在 Visual Studio 设置中将其设为其他项目的默认设置。这有助于为您捕获很多错误。

最后，**这段代码不利于可用性**。人们普遍认为，字段不应*以*这种方式限制用户输入（而且也不安全：如果用户使用复制和粘贴来输入无效文本怎么办？）。[`Validating`相反，您应该在文本框的event](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)中测试输入的有效性，因为它存在这个目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T08:04:57.140

您应该使用以下正则表达式：

```
Dim reg_exp As New RegExp
reg_exp.Pattern = "^[a-zA-Z]*$"
If reg_exp.Test(txtName.Text.Trim()) Then
   MessageBox.Show("Input name is correct")
Else
   MessageBox.Show("Input name is not correct")
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T08:01:25.180

KeyAscii 在哪里定义？看起来它超出了范围。

由于您不能仅将其作为参数传递，因此请尝试先全局声明它。然后你应该能够在你的方法中访问它。

免责声明：虽然我以前使用过它，但我对 VB.NET 的了解非常有限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T08:24:33.047

```
Private Sub Form1_KeyPress(ByVal sender As Object, ByVal e As     System.Windows.Forms.KeyPressEventArgs) Handles Me.KeyPress

Dim keyAscii As Char
keyAscii = e.KeyChar

        If keyAscii > Chr(64) And keyAscii < Chr(91) Then
        'char is A-Z

    End If

    If keyAscii > Chr(96) And keyAscii < Chr(123) Then
        'char is a-z
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-20T04:04:30.323

```
If (Microsoft.VisualBasic.Asc(e.KeyChar) < 65) _
 Or (Microsoft.VisualBasic.Asc(e.KeyChar) > 122) Then
e.Handled = True
End If
If (Microsoft.VisualBasic.Asc(e.KeyChar) = 8) Then
e.Handled = False
End If 
```

# php - 在 AJAX 请求上为空 $_SESSION 超全局，但保留会话 ID

> ID：10967156
> 
> 赞同：4
> 
> 时间：2012-06-10T07:58:54.473
> 
> 标签：php, session, sessionid

我`$_SESSION`在 AJAX 请求上遇到了超全局问题。

`session_start()`在任何会话编码之前调用函数。会话 ID 在调用代码和 AJAX 响应代码中也相同（通过`session_id()`在两个脚本中回显进行测试）。AJAX PHP 文件位于同一个域中。一切都应该按照标准的定义工作，但是当我`print_r($_SESSION)`在调用的 AJAX 脚本文件中进行操作时，我会得到`Arrray( )`输出。

我撞到了砖墙...我不知道为什么这不起作用...

在 Chrome 和 Firefox 中都检查过。

有任何想法吗？

**更新：**

问题在于`$.ajax(...)`请求！当我执行 AJAX 请求时，它知道正确的会话 ID，并且该`session_start()`函数返回`TRUE`（成功继续会话）但随后它重置了我的`$_SESSSION`超全局！它清空了...我还不知道为什么...

代码：

索引.php：

```
<?php

session_start();

$_SESSION['Test']='O.K.';

echo("SESSION_ID: " . session_id());
echo("SESSION_SIZE:" . sizeof($_SESSION));

?>

... Standard HTML stuff and jQuery include ...

<script>
    $.ajax(
    {
        type: "POST",
        url: "AJAXTest.php",
        data: null,
        success: function(sData) { alert(sData); }
    });

</script> 
```

AJAXTest.php：

```
<?php

session_start();

echo("SESSION_ID: " . session_id());
echo("SESSION_SIZE:" . sizeof($_SESSION));

?> 
```

index.php 输出：

```
SESSION_ID: xxxxxxxxxxxxxxxxxxxxxxx
SESSION_SIZE: 1 
```

警报输出：

```
SESSION_ID: xxxxxxxxxxxxxxxxxxxxxxx (right session id)
SESSION_SIZE: 0 
```

并且在 AJAX 调用之后 $_SESSION 为空。在同一会话的所有其他脚本中......我很困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:34:06.710

问题出在我的自定义 php.ini 文件中......它显然搞砸了一些重要的会话设置（即使它们没有定义-> 更改）。

结果是每次调用 session_start() 都会重置 $_SESSION 超全局并将其清空，但留下相同的会话 ID，这让我感到困惑并朝错误的方向抛出。直到我把一切都剥离到骨子里，很明显错误不在我的代码中。

感谢所有感兴趣的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:09:47.397

这可能不是 AJAX 的问题，而是会话本身的问题。现在您只是在测试 $_SESSION 数组和会话 ID，而不是会话存储本身。尝试查看会话状态在多个非 AJAX 请求中是否保持相同。例如，使用这个：

```
$_SESSION['Test' . time()]='O.K.'; 
```

而不是这个：

```
$_SESSION['Test']='O.K.'; 
```

刷新页面时，您的 SESSION_SIZE 计数应该会增加。如果不增加，可能是php.ini中的session存储参数不对？例如，将会话写入文件时出现问题，或者如果您将其用于会话，则会出现 memcache 问题。

还要确保在页面和 ajax 调用之间没有其他请求 - 也许某些调用脚本会重置您的 $_SESSION 数组？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T08:16:10.430

这可能是因为如果你没有在`$_SESSION`. 它会告诉你 array()`print_r($_SESSION)`

尝试设置一个值`$_SESSION['user']='frankie'`

，然后`print_r($_SESSION);`
session_id() 永远不会显示在 $_SESSION 数组中。

# xml - 有条件的xpath

> ID：10967157
> 
> 赞同：3
> 
> 时间：2012-06-10T07:59:19.860
> 
> 标签：xml, xpath

如何使用复杂条件在 Xpath 中获取元素？

例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<stock xmlns="http://localhost/aaabbb">
<item item-id="1">
 <name xml:format="short">This is a short name</name>
 <name xml:format="long">This is a LONG name</name>
</item>
</stock> 
```

**目标：**获取标签的文本 WHERE xml:format="long"。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T08:03:35.460

看看这个：[http](http://www.w3schools.com/xpath/xpath_syntax.asp) ://www.w3schools.com/xpath/xpath_syntax.asp 。您要求的示例：

XML 文档：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>

<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book>

</bookstore> 
```

XPATH：

```
//title[@lang='eng']    Selects all the title elements that have an attribute named lang with a value of 'eng' 
```

所以你应该这样做：

```
//name[@xml:format='long'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:24:58.257

**在您的特定情况下，XML 文档不在默认命名空间中，因此 XPath 表达式如下：**

```
/stock/item/name 
```

**不选择任何节点**。

**使用**：

```
/*/*/*[name()='name' and @xml:format = 'long']/text() 
```

**或使用**：

```
string(/*/*/*[name()='name' and @xml:format = 'long']) 
```

第一个表达式选择所有元素的所有文本子节点，其名称为`name`（无论名称空间如何）并且是 XML 文档中顶部元素的孙子节点。

第二个表达式生成 XML 文档中第一个元素的字符串值，使其名称为`name`（无论名称空间如何），并且它是 XML 文档中顶部元素的孙子元素。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*/*/*[name()='name' and @xml:format = 'long']/text()"/>
===========
     <xsl:copy-of select="string(/*/*/*[name()='name' and @xml:format = 'long'])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<stock xmlns="http://localhost/aaabbb">
    <item item-id="1">
        <name xml:format="short">This is a short name</name>
        <name xml:format="long">This is a LONG name</name>
    </item>
</stock> 
```

**计算两个 Xpath 表达式，并将选定元素（第一个）和生成的字符串结果（第二个）复制到输出**：

```
This is a LONG name
===========
This is a LONG name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:24:12.393

具有以下 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<stock xmlns="http://localhost/aaabbb">
<item item-id="1">
 <name xml:format="short">This is a short name</name>
 <name xml:format="long">This is a LONG name</name>
</item>
</stock> 
```

首先指定`xPath`节点列表的：

```
XmlNodeList nodeList = root.SelectNodes("/stock/item"); 
```

第二个指定您想要的列表的哪个名称节点：（具有“长”属性值的节点）

```
XmlNode name = nodeList.Item(0).SelectSingleNode(string.Format("/stock/item/name[@xml:format="Long"]")); 
```

第三次检索该节点内的文本：

```
string result = name.InnerText; 
```

# sql-server - 使用高效数据库查找的动态 MVC 路由删除 ID

> ID：10967161
> 
> 赞同：0
> 
> 时间：2012-06-10T07:59:50.467
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3, fluent-nhibernate, asp.net-mvc-routing

我有一个 MVC 3 应用程序，其中我想要不包含控制器或键名的动态 Url。一个很好的例子是如果我有一个博客，并且用户添加了新帖子。

假设用户创建了一个名为

**我的博文**

我有一个方法可以创建一个 url SLUG 并将其与条目一起存储在数据库中，所以我希望 Url 是

**/我的博客帖子**

现在 url 中没有控制器或键名？如何使用 MVC 路由实现这一点？目前，我正在通过将 Url 与**/my-blog-post_1234 之**类的 ID 匹配并使用流利的 nhibernate 将该 ID 作为 DB 查找键来做到这一点，但是一旦我删除了 ID，我就有点迷失了？

因为我仍然可以获得字符串/slug，但这意味着我现在必须根据字符串“my-blog-post”进行 SQL 查找？我读过这效率不高，可能会影响速度，其中一些标题可能很长。

我听说有人说自定义路由表？这对我有帮助吗？我想主要是以最快最有效的方式从数据库中获取数据。

非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:29:08.987

MVC 框架在这里不会提供任何帮助。您的要求是通过 slug 查询，所以这就是您需要在数据库中执行的操作。

您只需要确保您在数据库中的该列上有一个索引，以确保查询不需要进行表扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:15:33.323

听起来您真正想要的是文档数据库。再加上MVC。我强烈推荐ravendb，

# html - 使用 html 的表格背景图像顶部居中 - 不是 css

> ID：10967165
> 
> 赞同：1
> 
> 时间：2012-06-10T08:00:27.540
> 
> 标签：html, css

我有一张桌子（暗淡：100 像素 * 500 像素），背景图片 - 1 像素 * 10 像素。我用css编写后台代码：

```
background:  white url(../Images/line.png) repeat-x scroll top center; 
```

但我想将其转换为表格标签中的 html 代码而不是 css 代码，例如：

```
<table bgcolor="#FFF" background="....."> 
```

如何将此代码转换为 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:09:00.943

```
<table style="background: white url(../Images/line.png) repeat-x scroll top center;"> 
```

如果你想内联元素的样式，只需将 style 属性和 CSS 属性写入（如本例所示）。

如果您的 CSS 文件与 HTML 文档不在同一个位置，您可能需要调整路径，这是您在内联元素样式时出现的第一个问题。
最好通过 CSS 文件来执行此操作，因为您的 HTML 标记变得更清晰，并且更改布局的成本会更低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:13:58.133

情况不妙。

但 ：

```
<table background="http://yoursite/images/bg.png" width="500" height="500">
  <tr>
   <td>This is a test ...</td>
  </tr>
</table> 
```

# map - 从两个或多个序列创建地图序列

> ID：10967166
> 
> 赞同：5
> 
> 时间：2012-06-10T08:00:27.817
> 
> 标签：map, clojure, hashmap, seq

我是 Clojure 的新手，我想知道是否有办法从两个或多个序列创建一系列映射。

假设您有：

```
(def numbers '(1 2 3))
(def letters '("a" "b" "c"))
(def shapes '("circle" "square" "triangle")) 
```

如果你合并了这些，我想得到 Ruby 中的哈希数组，或者 Clojure 中的一系列映射？

```
({:number 1, :letter "a", :shape "circle"} {:number 2, :letter "b", :shape "square"} {:number 3, :letter "c", :shape "triangle"}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:15:57.750

```
 (map (fn [n l s] {:number n, :letter l, :shape s})  numbers letters shapes) ;;=> 
 ({:number 1, :letter "a", :shape "circle"} {:number 2, :letter "b", :shape "square"} {:number 3, :letter "c", :shape "triangle"}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T08:15:58.413

我确信有一种更惯用的方式来做到这一点，但是：

```
(map (fn [n l s] {:number n, :letter l, :shape s}) numbers letters shapes) 
```

甚至

```
(map #(do {:number %1, :letter %2, :shape %3}) numbers letters shapes) 
```

# delphi - 为了发布列表框项 IDHTTP？

> ID：10967167
> 
> 赞同：-1
> 
> 时间：2012-06-10T08:00:57.897
> 
> 标签：delphi, for-loop

对不起..我不懂英文...

我想向他们发送所有列表框项目。

我的代码（发送到第一项）；

```
var
  i: Integer;
  satir: Integer;
  str: TStringList;
  response: TStringStream;
begin
  str := TStringList.Create;
  Response:= TStringStream.Create('');
  satir := ListBox1.Items.Count;
  try
    str.Clear;
    IdHTTP1.Disconnect;

    str.Add('author='+Edit1.Text+'');
    str.Add('email='+Edit2.Text+'');
    str.Add('url='+Edit3.Text+'');
    str.Add('comment='+Memo1.Text+'');
    str.Add('comment_post_ID='+'1'); // Hidden items. When I delete the error does not.
    for i:= 0 to satir do 
    begin 
      IdHTTP1.Post(ListBox1.Items.strings[i],str,Response);
      IdHTTP1.Disconnect;
      MessageDlg('Ok.', mtinformation,[mbOK],0);
    end;
  except
    on e: exception do 
    begin
      str.Free;
      Response.Free;
    end;
  end;
end; 
```

如果你纠正我的错误，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:12:25.853

您的代码中有一些拼写错误和泄漏。尝试这个：

```
var
  i: Integer;
  satir: Integer;
  str: TStringList;
begin
  satir := ListBox1.Items.Count;
  str := TStringList.Create;
  try
    IdHTTP1.Disconnect;

    str.Add('author='+Edit1.Text+'');
    str.Add('email='+Edit2.Text+'');
    str.Add('url='+Edit3.Text+'');
    str.Add('comment='+Memo1.Text+'');
    str.Add('comment_post_ID='+'1'); // forgot it. Hidden item. Could this be the problem?
    for i:= 0 to satir-1 do 
    begin 
      try
        IdHTTP1.Post(ListBox1.Items.Strings[i], str);
        MessageDlg('Ok', mtinformation, [mbOK], 0)
      except
        on E: Exception do
          MessageDlg('Error: ' + E.Message, mtError, [mbOk], 0);
      end;
      IdHTTP1.Disconnect;
    end;
  finally
    str.Free;
  end;
end; 
```

# linux - xargs 无法获得用户输入？

> ID：10967168
> 
> 赞同：0
> 
> 时间：2012-06-10T08:01:01.550
> 
> 标签：linux, shell

我有一个这样的示例代码：

```
CMD="svn up blablabla | grep -v .tgz"
echo $CMD | xargs -n -P ${PARALLEL:=20} -- bash -c 
```

目的是并行运行 svn update。但是当遇到冲突时，应该提示几个选项供用户选择，它只是通过，而不等待用户输入。并显示错误：

```
Conflict discovered in 'blablabla'.
Select: (p) postpone, (df) diff-full, (e) edit,
    (mc) mine-conflict, (tc) theirs-conflict,
    (s) show all options: svn: Can't read stdin: End of file found 
```

有没有什么办法解决这一问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:50:35.540

是的，有办法解决这个问题！[请参阅如何从使用 xargs 运行的脚本中提示用户](https://stackoverflow.com/questions/10223296/how-to-prompt-a-user-from-a-script-run-with-xargs)的答案。长话短说，使用

```
xargs -a FILENAME your_script 
```

或者

```
xargs -a <(cat FILENAME) your_script 
```

第一个版本实际上从文件中读取行，第二个版本伪造从文件中读取行，这便于在带有 awk 或 perl 的管道链中使用 xargs。如果您不想在空格上中断，请记住使用 -0 标志！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T13:10:13.810

另一个不依赖 Bash 而是依赖[GNU 风格的 xargs 的](https://www.gnu.org/software/findutils)解决方案是使用`-o`or`--open-tty`选项：

```
echo $CMD | xargs -n -P ${PARALLEL:=20} --open-tty -- bash -c 
```

从手册页：

```
-o, --open-tty
       Reopen  stdin as /dev/tty in the child process before executing the command.  This is use‐
       ful if you want xargs to run an interactive application. 
```

# facebook - 点击喜欢按钮后选择发布到 Facebook

> ID：10967172
> 
> 赞同：1
> 
> 时间：2012-06-10T08:01:42.013
> 
> 标签：facebook, facebook-social-plugins

我在[9gag.com/fast](http://9gag.com/fast)上注意到，如果您单击该`Like`按钮，则会打开一个小选项以在用户的​​墙上共享该链接。

我相信这不是默认选项，因为我已经在我的网站上实现了“赞”按钮，但它并不能那样工作。

如何获得此功能...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:09:26.803

当用户喜欢您的页面时，按照[此处](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)`FB.Event.subscribe('edge.create')`所述与 JS SDK 一起使用以捕获事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T09:00:57.703

您无需订阅 like 事件。您在该链接中描述的行为是默认行为。转到此处的链接生成器：[https](https://developers.facebook.com/docs/reference/plugins/like/) ://developers.facebook.com/docs/reference/plugins/like/来玩弄它。任何时候你点击一个小评论框都会弹出。

# google-app-engine - 优化幻灯片和图片库 [GAE / GWT]？

> ID：10967177
> 
> 赞同：2
> 
> 时间：2012-06-10T08:02:50.130
> 
> 标签：google-app-engine, gwt, slideshow, image-gallery

我想实现我自己的幻灯片和图片库（用于照片报告网站）。是否有与以下相关的最佳方法或技术（使用 GAE 和 GWT）：

*   减少幻灯片的加载时间（例如，包含 30 张图像（960 像素 * 780 像素）的幻灯片，我应该先加载它们然后让用户导航吗？）

*   我应该在服务器端还是客户端进行缩放操作（图像的分辨率大于浏览器的分辨率）？

*   关于存储是否有一些众所周知的问题（如果我有很多图像）？

如果您对此主题有一些建议或链接，请您发布它们吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:37:17.057

**问题 1：**预加载与延迟
**答案：** 加载越多，实例启动所需的时间就越长，带宽也就越长越大。所以一般来说你应该使用一个惰性加载器，但预取缩略图和下一张图片。

**问题 2：**图像缩放
**回答：** 我建议在上传时创建一个缩放版本，然后允许用户下载完整尺寸的图像。不要再在客户端上这样做，带宽会吃掉你。

**问题 3：**存储
**答案：** 使用[blobstore/python](https://stackoverflow.com/a/10924018/1352012)或[blobstore/java](https://developers.google.com/appengine/docs/java/blobstore/)而不是 db.BlobProperty，因为它可以节省存储费用并允许超过 1mb 的文件。

# c# - 提交按钮在 Colorbox 模式窗口中不起作用

> ID：10967179
> 
> 赞同：0
> 
> 时间：2012-06-10T08:03:38.997
> 
> 标签：c#, jquery, asp.net, colorbox

我在 ColorBox 模式窗口中有一个提交按钮。如果我单击该按钮，则不会发生任何事情。

如果我将 ColorBox 窗口之外的按钮移动到主页内容，它工作正常。

ColorBox 会显示一些隐藏的 div 内容：

```
$.colorbox({
                inline: true,
                href: "#popup",
                width: "580px",
                height: "350px",
                top: "100px",

                opacity: 0.8,
                modal: true,
                scrolling: false,
                onCleanup: function () {
                    $("div#popup").hide();
                }
            }); 
```

该按钮只是一个简单的 asp 按钮：

```
<asp:Button ID="cashBtn" runat="server" Text="Button" onclick="Button1_Click"  /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:53:40.897

请检查您的颜色框对话框是否呈现在您的表单标签内。

您应该将对话框附加到表单标签。

# html - SELECT Dropdown 无需 Javascript 即可重定向

> ID：10967182
> 
> 赞同：2
> 
> 时间：2012-06-10T08:03:51.727
> 
> 标签：html, drop-down-menu

当用户选择没有javascript的选项时，是否可以创建一个重定向用户的下拉菜单？

当用户在下拉列表 A 中选择一个类别时，我会使用 Javascript 显示下拉列表 B（具有子类别）。我想让它为没有 Javascript 的用户提供类似的工作。我的想法是当用户在第一个下拉列表中选择一个选项时将他们重定向到不同的页面。

没有javascript这可能吗？如何做呢？（如果可能的话，建议一些东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T17:48:04.113

虽然公认不优雅，但我已经找到了这个解决方案；

```
<form action="/" method="GET">
    <select name="path">
        <option value="home">Home</option>
        <option value="services">Our services</option>
        <option value="portfolio">Portfolio</option>
    </select>

    <input id="fallback-go" type="submit" value="Go" />
</form> 
```

选择 `` `Our Services`'' 然后单击`Go`将导致它们被发送到`/?path=services`

不幸的是，我无法理解在选择更改时自动执行此操作的方法，如果我这样做了，我会回复。

为了对`Go`支持 JavaScript 的用户隐藏按钮，可以实现这一点；

```
<head>
    <style>
        #fallback-go { display: none; }
        .no-script #fallback-go { display: block; }
    </style>
</head>

<body class="no-script">
    <script>document.body.classname = '';</script>

    [ other HTML ]
</body> 
```

至于你的双层下拉菜单；这可以使用纯 CSS 解决方案来实现。纯 CSS 解决方案的问题在于它不能很好地与 IE7 配合使用，因为它缺乏对伪元素的支持。

如果您想要全方位的支持，我建议您实施 JavaScript 解决方案以保持 IE7 达到标准，并实施纯 CSS 解决方案以保持 noscript 满意。

作为 noscript 用户，我非常感谢您的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:09:02.140

不，最简单的解决方案是在 HTML 中使用内联 JS。

* * *

注意：您要支持哪种浏览器？甚至 IE7 也有你需要的 JS 支持。

# macos - 将多个 .txt 快速转换为多个 ascii 文件 - 在 Matlab 中可能吗？

> ID：10967186
> 
> 赞同：0
> 
> 时间：2012-06-10T08:05:00.077
> 
> 标签：macos, matlab, file-io, text-files

我有超过 120 个 .txt 文件（都命名为 s1.txt、s2.txt、...、s120.txt），我需要将它们转换为 ASCII 扩展名才能在 MATLAB 中使用。

```
my .txt (comma , delimited .txt) files look like the following:
20080102,43.0300,3,9.493,569.567,34174.027,34174027
20080102,43.0600,3,9.498,569.897,34193.801,34193801 
```

在 MATLAB 中，我希望使用类似于以下的代码：

```
for i = svec; 
   %# where svec = [1 2 13 15] some random number between 1 and 120\. 
   eval(['load %mydirectory', eval(['s',int2str(i)]),'.ascii']);
end; 
```

如果我没记错的话，我不能将上述命令与 .txt 文件一起使用，因此我必须使用 ASCII 文件。

由于我有很多文件要转换并且它们很大，是否有一种快速的方法可以通过 MATLAB 转换我的所有文件，或者网络上有一个适用于 Mac 的出色转换软件？有人会有比使用上面的代码更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:10:53.647

你能显示一个示例文件吗？并非每个文本文件都对`load`命令有效。如果您的文件格式无效，则将文件名的扩展部分从更改`.txt`为`.ascii`根本没有帮助。相反，在这种情况下，数据必须要么转换为有效的`load`命令格式，要么通过其他方式加载到 MATLAB 中，例如。通过使用`fscanf`or `xlsread`。两种方法都需要文件结构来解决这个问题。

另请参见[matlab 加载空白文件中的加载命令](https://stackoverflow.com/questions/10337828/load-command-in-matlab-loading-blank-file)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:45:18.743

一种更清洁的方式：

```
for i=1:120
    fname = fullfile('mydirectory', sprintf('s%d.txt',i));
    X = load(fname, '-ascii');
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T14:29:11.647

添加到nrz的答案：

我不确定你到底想做什么，但知道你可以在 MATLAB 中打开任何文件，无论是文本（ASCII）还是二进制模式。后者可以使用[`fread`](http://www.mathworks.com/help/techdoc/ref/fread.html).

作为旁注，您还要求为您的代码提供更好的建议。
那么，你试图通过这两个`eval`调用来实现什么？为什么不直接调用命令？改为这样做：

```
for i = svec
   load (['%mydirectory\s', int2str(i), '.txt'], '-ascii');
end 
```

我还冒昧地添加了一个反斜杠，我认为你已经省略了。

在大多数情况下，您最好不使用`eval`. 检查[替代方案](http://www.mathworks.com/help/techdoc/matlab_prog/brqy1gs-2.html#brqy1gs-3)...

# ruby - Ruby 将变量分配给两个已定义的备选方案之一

> ID：10967187
> 
> 赞同：0
> 
> 时间：2012-06-10T08:05:17.210
> 
> 标签：ruby

我正在寻找执行以下操作的正确方法。

```
 a = b or c 
```

其中仅定义 b 或 c 之一。

编辑：感谢您的回答，只是为了澄清未定义它们根本没有定义（即不是零）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:10:47.790

如果实际上只存在一个或另一个，则需要使用`defined?`局部变量。

```
a = defined? b ? b : c 
```

使用实例变量会更容易一些，假设两个值都不应该是虚假的，因为它们`nil`在定义之前是隐式的：

```
a = @b || @c 
```

# relational-database - 我是否正确回答了这个问题？

> ID：10967188
> 
> 赞同：-1
> 
> 时间：2012-06-10T08:05:17.877
> 
> 标签：relational-database, normalization, canonical-form

昨天我参加了数据库考试，关于标准化的问题很奇怪。我们有表 R(ABCDEFG) 和函数依赖 G->B、C->DG、CF->E、FA。哪些是 R 的候选键？我只找到了一个：CF。那么 R1(DFG)，哪些是 R1 的候选键？我只找到了一个：DFG。为 R 陈述一个正确的 3NF 归一化。我陈述了 ((C,F), E), ((G, B)), ((F), A), ((C), D)

然后添加了功能依赖 GDF->C。现在 R 的正确 3NF 归一化是什么？我说 ((G, D, F, C)), ((G), B), ((F, ); A), ((C), D), ((C, F), E)

我解决了吗？

那么更奇怪的是，当列出以下内容时，我们应该说明什么是什么：

*   产品编号
*   订单号
*   客户ID
*   数量
*   顾客姓名
*   产品名称
*   日期

我得出结论

```
G= Product ID
C= Order number
F= Customer ID
D= Quantity
A= Customer name
B= Product name
E= Date 
```

它是否正确？FD GDF->C 在简单的英语中是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:37:21.470

> “昨天我参加了一个数据库考试，关于规范化的问题很奇怪。我们有表 R(ABCDEFG) 和函数依赖关系 G->B、C->DG、CF->E、FA。哪些是 R 的候选键？我只找到了一个：CF。

这似乎没问题。

> 那么 R1(DFG)，哪些是 R1 的候选键？我只找到了一个：DFG。

用同一套FD的？？？根本没有FD？？？无论如何，这似乎也是正确的。

> 为 R 陈述一个正确的 3NF 归一化。我陈述了 ((C,F), E), ((G, B)), ((F), A), ((C), D)

((G), B) 而不是 ((G, B)) 会更像它。

((C), DG) 而不是 ((C), D) 也会更像它。

> 然后添加了功能依赖 GDF->C。现在 R 的正确 3NF 归一化是什么？我说 ((G, D, F, C)), ((G), B), ((F, ); A), ((C), D), ((C, F), E)

添加此 FD (/constraint) 不会改变 3NF 形式。在 3NF 设计中可表达的所有依赖项仍然是“不完整的键”。分解无法保留这种额外的依赖关系这一事实并没有降低范式。这是一个依赖关系保留问题，而不是正常形式的问题。

> 我解决了吗？

最好的办法是问老师。

> “那更奇怪的是，下面列出来的时候，我们应该说明是什么：”

愚蠢的。问题本身迫使你做出假设。日期。那是什么日子？下订单的客户的出生日期？为订购的产品指定当前名称的日期？或者下订单的日期？大概是这样，但问题是，这应该在规范中明确说明，并且应该真正教导数据库设计人员永远不要假设任何关于规范的事情。假设是所有错误的根源。

> FD GDF->C 在简单的英语中是什么意思？

用简单的英语，假设你的回答，这意味着一旦在一个订单中使用了{customer id, product id and quantity}的某种组合，就不能再出现第二个订单（具有不同的订单id）非常相同的{客户 ID、产品 ID 和数量}。或者，iow ：每个客户只能订购特定数量的特定产品一次。

# jsf - Richfaces + Eclipse EE + tomcat 7

> ID：10967190
> 
> 赞同：1
> 
> 时间：2012-06-10T08:06:00.550
> 
> 标签：jsf, tomcat, configuration, richfaces

在配置带有richfaces的tomcat时遇到问题。我复制了：

```
richfaces-components-ui-4.2.2.Final.jar
richfaces-components-api-4.2.2.Final.jar
richfaces-core-api-4.2.2.Final.jar
richfaces-core-impl-4.2.2.Final.jar 
```

jar 到 tomcat 的 \lib 并重新启动我的服务器。我的 xhtml 页面的定义如下所示：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:a4j="http://richfaces.org/a4j"
     xmlns:rich="http://richfaces.org/rich"> 
```

但是eclipse会产生一个警告，上面写着

```
NSL missing: CANNOT_FIND_FACELET_TAGLIB in : org.eclipse.jst.jsf.core.validation.internal.facelet.messages 
```

还有什么我需要配置的吗？我浏览了很多教程，但几乎所有教程都使用 JBoss。有没有办法用我的eclipse和tomcat配置richfaces？

* * *

已编辑

当我将 jars 添加为外部 jars 并添加依赖项时，它不会使站点崩溃，尽管在控制台中它会产生一个：

```
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.PRETTY_HTML' found, using default value true
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.ALLOW_JAVASCRIPT' found, using default value true
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.RENDER_CLEAR_JAVASCRIPT_FOR_BUTTON' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.RENDER_HIDDEN_FIELDS_FOR_LINK_PARAMS' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.SAVE_FORM_SUBMIT_LINK_IE' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.READONLY_AS_DISABLED_FOR_SELECTS' found, using default value true
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.RENDER_VIEWSTATE_ID' found, using default value true
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.STRICT_XHTML_LINKS' found, using default value true
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.RENDER_FORM_SUBMIT_SCRIPT_INLINE' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getLongInitParameter
INFO: No context init parameter 'org.apache.myfaces.CONFIG_REFRESH_PERIOD' found, using default value 2
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.VIEWSTATE_JAVASCRIPT' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getStringInitParameter
INFO: No context init parameter 'org.apache.myfaces.REFRESH_TRANSIENT_BUILD_ON_PSS' found, using default value auto
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.REFRESH_TRANSIENT_BUILD_ON_PSS_PRESERVE_STATE' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.VALIDATE_XML' found, using default value false
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig getBooleanInitParameter
INFO: No context init parameter 'org.apache.myfaces.WRAP_SCRIPT_CONTENT_WITH_XML_COMMENT_TAG' found, using default value true
Jun 10, 2012 2:15:55 PM org.apache.myfaces.shared_impl.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Jun 10, 2012 2:15:55 PM org.apache.myfaces.config.FacesConfigurator feedStandardConfig
INFO: Reading standard config META-INF/standard-faces-config.xml
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator getWebAppConfig
INFO: Reading config /WEB-INF/faces-config.xml
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: Starting up MyFaces-package : myfaces-api in version : 2.0.2 from path : file:/D:/Programming/Eclipse%20Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/OnTheRun/WEB-INF/lib/myfaces-api-2.0.2.jar
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: Starting up MyFaces-package : myfaces-impl in version : 2.0.2 from path : file:/D:/Programming/Eclipse%20Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/OnTheRun/WEB-INF/lib/myfaces-impl-2.0.2.jar
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : tomahawk not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : tomahawk12 not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : tomahawk-sandbox not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : tomahawk-sandbox12 not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : tomahawk-sandbox15 not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : myfaces-orchestra-core not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : myfaces-orchestra-core12 not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : trinidad-api not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : trinidad-impl not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : tobago not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : commons-el not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator startLib
INFO: MyFaces-package : jsp-api not found.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.util.ExternalSpecifications isBeanValidationAvailable
INFO: MyFaces Bean Validation support disabled
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.FacesConfigurator handleSerialFactory
INFO: Serialization provider : class org.apache.myfaces.shared_impl.util.serial.DefaultSerialFactory
Jun 10, 2012 2:15:56 PM org.apache.myfaces.config.annotation.DefaultLifecycleProviderFactory getLifecycleProvider
INFO: Using LifecycleProvider java.lang.String
Jun 10, 2012 2:15:56 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
INFO: ServletContext 'D:\Programming\Eclipse Workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\OnTheRun\' initialized.
Jun 10, 2012 2:15:56 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces 
```

我认为是因为缺少一些库

* * *

更新

这是我的配置文件：

```
<faces-config
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0">
<application>
    <resource-bundle>
        <base-name>on.run.messages</base-name>
        <var>msgs</var>
    </resource-bundle>
</application>

<navigation-rule>
        <from-view-id>/login.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>secret</from-outcome>
        <to-view-id>/restricted/transactions.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule>

</faces-config> 
```

和

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>OnTheRun</display-name>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>

<filter>
        <filter-name>AuthFilter</filter-name>
        <filter-class>on.run.AuthFilter</filter-class>
 </filter>
 <filter-mapping>
        <filter-name>AuthFilter</filter-name>
        <url-pattern>/restricted/*</url-pattern>
 </filter-mapping>

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
</web-app> 
```

我也尝试过 tomahawk lib，但我删除了它并清理了项目。我试过这个例子来测试[richface](http://www.mastertheboss.com/web-interfaces/271-richfaces-calendar-example.html)，但没有显示任何内容。

控制台消息仍然有效，即使我没有对 tomahawk 的任何引用，我的构建路径中也没有它，并且项目和服务器是干净的。我也尝试将myfaces-impl.jar 添加到buildpath，没有帮助。出现相同的控制台消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:49:46.433

> *但是eclipse会产生一个警告，上面写着*
> 
> ```
> NSL missing: CANNOT_FIND_FACELET_TAGLIB in : org.eclipse.jst.jsf.core.validation.internal.facelet.messages 
> ```

那是因为您将 RichFaces 库放在 Tomcat 中，而不是放在 webapp 本身中。这些库应该放在 webapp 自己的`/WEB-INF/lib`. 否则，您需要将 RichFaces 库添加到 Eclipse 项目构建路径设置中的服务器提供的库中。Eclipse 即不希望您修改 Tomcat 的默认库。

* * *

> *当我将 jars 添加为外部 jars 并添加依赖项时，它不会使站点崩溃，尽管在控制台中它会产生一个：*

这些只是 INFO 消息，而不是 WARNING 消息。这是特定于 MyFaces 的，这些只是为了通知开发人员/服务器管理员 MyFaces 对设置一些应用程序范围的参数采取了哪些操作。只是忽略他们。只有当您收到警告、严重、错误或致命时，您才可能开始担心。您不一定*需要*战斧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:12:47.783

[需要](https://stackoverflow.com/questions/5987933/adding-richfaces-to-existing-jsf2-project)以下依赖项：

*   `sac-1.3.jar`,
*   `cssparser-0.9.5.jar`- 用于 CSS 样式。
*   `guava-r09.jar`- 核心运行时依赖。

当然`javax.faces.jar`对于 JSF（或 myfaces 替代品），看看[这里](http://docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/chap-Developer_Guide-Getting_started_with_RichFaces.html)

**更新：**

@BalusC[建议](https://stackoverflow.com/questions/7546219/nls-missing-message-cannot-find-facelet-taglib)了以下步骤：

*   关闭/重新打开项目。
*   右键单击项目 >*验证*。
*   *项目 > 清理*... 并清理选定的项目。
*   重新启动 Eclipse。

**更新 2：**

我已经准备了一个基于 mojarra JSF 2.1的**工作初始（动态 Web）项目，你可以**[在这里下载](http://www.sendspace.com/file/7it774)。[将此库](http://resize.like.cz/images/62_168_44_170_11-06-12-07-06-27_1339391187libs.jpg)放到其 WEB-INF\lib 文件夹中，在 tomcat7 服务器上启动它：

```
http://localhost:8080/TEST/ 
```

# ruby-on-rails-3 - Rails 3 Paperclip 设置-extent的背景颜色，像素为0,0

> ID：10967194
> 
> 赞同：0
> 
> 时间：2012-06-10T08:07:54.680
> 
> 标签：ruby-on-rails-3, imagemagick, paperclip

我使用以下内容：convert_options

```
-auto-orient -gravity center -background transparent -extent '50x50>' 
```

对于我的 has_attached_file 调用，我想做的不是使用透明，而是将图像的背景颜色设置为图像 0,0 处的颜色。

使用

```
convert rose: -format "%[pixel:u.p{0,0}]" info:- 
```

我得到输出

```
srgb(48,47,45) 
```

这很好，但我无法在实际通话中使用它来代替透明......

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:38:13.770

为此编写了一个自定义插值器。

```
module Paperclip
  class BgExtrapolator < Processor
    def initialize(file, options = {}, attachment = nil)
      super

      @file             = file
      @instance         = options[:instance]
      @current_format   = File.extname(@file.path)
      @basename         = File.basename(@file.path, @current_format)
    end

    def make
      src = @file
      dst = Tempfile.new([@basename, @format ? ".#{@format}" : ''])
      dst.binmode

      begin
        # grab the image
        logo = Magick::Image.read(src.path).first

        # determine the color of the upper left most pixel
        bg_color = logo.pixel_color(0,0)

        # construct an rgba value to provide to imagemagick
        bg_color_value = "rgba(#{bg_color.red >> 8},#{bg_color.green >> 8},#{bg_color.blue >> 8},#{bg_color.to_hsla[3]})"

        parameters = []
        parameters << ":source"
        parameters << "-resize '#{options[:geometry].to_s}' -auto-orient -gravity center -background '#{bg_color_value}' -extent '#{options[:geometry].to_s}'"
        parameters << ":dest"

        # clean the command
        parameters = parameters.flatten.compact.join(" ").strip.squeeze(" ")

        # run the command
        success = convert(parameters, :source => File.expand_path(src.path), :dest => File.expand_path(dst.path))
      rescue Cocaine::ExitStatusError => e
        raise Paperclip::Error, "There was an error processing the thumbnail for #{@basename}" if @whiny
      rescue Cocaine::CommandNotFoundError => e
        raise Paperclip::Errors::CommandNotFoundError.new("Could not run the `convert` command. Please install ImageMagick.")
      end

      dst
    end
  end
end 
```

# c# - 在监视窗口中搜索值

> ID：10967196
> 
> 赞同：7
> 
> 时间：2012-06-10T08:08:16.663
> 
> 标签：c#, visual-studio-2010

我在 Visual Studio 中调试 c#

我添加了一个对象`watch window`

给定一些值，有没有办法搜索哪个字段包含这个值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-03-29T21:36:44.903

### ***这现在在Visual Studio 2019***中原生支持

 **[在Leslie Richardson](https://devblogs.microsoft.com/visualstudio/author/lerich/)的 Watch、Autos 和 Locals 窗口中 [搜索对象和属性](https://devblogs.microsoft.com/visualstudio/enhanced-in-visual-studio-2019-search-for-objects-and-properties-in-the-watch-autos-and-locals-windows/)

[![VS 代码搜索](../Images/d4d0941524b605685ab9f38cc0ee4180.png)](https://devblogs.microsoft.com/visualstudio/enhanced-in-visual-studio-2019-search-for-objects-and-properties-in-the-watch-autos-and-locals-windows/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T08:24:59.773

恐怕在 VS2010 的监视窗口中没有这样的内置搜索功能（虽然监视窗口有[很多很酷的功能](http://www.codeproject.com/Articles/121623/10-Tips-you-should-know-about-Watch-Window-While-d)）。

另请参阅这个未解决的问题：[Searching for text in an Object watch window in visual studio](https://stackoverflow.com/questions/3921681/searching-for-text-in-an-object-watch-window-in-visual-studio)

但是，有一些商业扩展可以提供该功能。

例如：摘自[OzCode](https://visualstudiogallery.msdn.microsoft.com/36925113-cdce-4953-a5d6-fb3d2912dad7) VS 扩展功能列表：

> **搜索**
> 
> 在调试对象和集合时，您通常会寻找特定的属性或字段，或者在属性或字段中保存的值。不幸的是，这通常涉及大量的点击和滚动，或者编写自定义调试特定的代码。即使在简单的结构中查找项目也不容易，更不用说在复杂的对象图中这样做了。使用我们的“搜索”功能，情况不再如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-12T08:26:46.050

我喜欢使用即时窗口（Debug ==> Windows ==> Immediate）和 LINQ 来搜索数据结构。例如：

```
queries.Find(q => q.Name.Equals("HTTP_Response_Splitting")) 
```**

# xml - 使用 XSLT 从另一个 xml 文件中获取 XML 节点描述

> ID：10967198
> 
> 赞同：2
> 
> 时间：2012-06-10T08:08:38.667
> 
> 标签：xml, xslt

我需要使用 xsl 将值从一个 xml 获取到另一个的帮助，我有以下 xml：

```
<metadata>
  <idinfo>Node Text</idinfo>
</metadata> 
```

我有一个通用的 xsl 来显示如下节点：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:dmd="http://www.digitalmeasures.com/schema/data-metadata"
  xmlns:dm="http://www.digitalmeasures.com/schema/data">
    <xsl:output method="html" encoding="utf-8"/>
    <xsl:template match="*[(child::*)]">
        <fieldset>
            <legend><xsl:value-of select="local-name()"/></legend>
            <xsl:apply-templates/>
        </fieldset>
    </xsl:template>
    <xsl:template match="*[not(child::*)]">
        <strong><xsl:value-of select="local-name()"/></strong>
            <i><xsl:apply-templates/></i>
    </xsl:template>
</xsl:stylesheet> 
```

输出将是：

```
<fieldset>
<legend>metadata</legend>
  <strong>idinfo</strong><i>Node Text</i>
</fieldset> 
```

现在我想要的是用另一个 xml 替换节点名称，所以我想用**标识信息替换 idinfo**

我要使用的 xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<labels>
<element name="idinfo">
<label>Identification Information</label>
</element>
</label> 
```

我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:30:59.907

首先，设置您的参考表，如：

```
<xsl:variable name="labels_info" select="document('another.xml')/labels"/> 
```

然后像这样使用它：

```
<xsl:value-of select="$labels_info/element[@name=local-name(current())]/label"/> 
```

万一它不起作用（我听说过这方面的报告），请使用一个变量：

```
<xsl:variable name="current_name" select="local-name"/> 
<xsl:value-of select="$labels_info/element[@name=$current_name]/label"/> 
```

# c++ - Qt 程序在 Windows 中绘制折线时崩溃

> ID：10967199
> 
> 赞同：1
> 
> 时间：2012-06-10T08:08:59.183
> 
> 标签：c++, windows, qt, cross-platform, qgraphicsscene

我开发了一个跨平台的 Qt 程序，它在 QGraphicsScene 上绘制折线：

```
QPolygonF polygon;
//Init polygon here
for(int i = 0; i < (polygon.size()-1); i++) {
  float x1 = polygon[i].x();
  float y1 = polygon[i].y();
  float x2 = polygon[i+1].x();
  float y2 = polygon[i+1].y();
  QGraphicsLineItem* item = new QGraphicsLineItem(x2, y2, x1, y1);
  item->setPen(QPen(QBrush(color), 2));
  item->setZValue(30);
  item->setData(0, QVariant((int)value));
  addItem(item);
} 
```

当程序收到以下值时，程序在 Windows 上崩溃：

```
 float x1 = 249.573;
 float y1 = 183.471;
 float x2 = 303.983;
 float y2 = 183.45; 
```

这条折线由一条几乎水平的线组成。当直线水平或 y1 和 y2 之间的绝对差为 0 或大于 0.5 时，不会发生崩溃。它不会在 Ubuntu 上崩溃。

当我将折线更改为多边形时，程序不会崩溃。我最好但丑陋的解决方案是将折线绘制为多边形 - 将相同的点两次附加到多边形：

```
QPolygonF polygon;
//Init polygon here
for(int i = polygon.size()-1; i > 0; i--) {
   QPointF point(polygon[i].x(), polygon[i].y());
   polygon.append(point);
}
QGraphicsPolygonItem* item = new QGraphicsPolygonItem(polygon);
item->setPen(QPen(QBrush(color), 2));
item->setZValue(30);
item->setData(0, QVariant((int)value));
addItem(item); 
```

我试图在一个小型且独立的程序中重新创建该错误，该程序在 QGraphicScene 上绘制一条具有相同坐标的线。没有观察到崩溃。

为什么会发生这种崩溃？这个错误有更漂亮的解决方案吗？

顺便说一句，VS2008 调试器中的调用堆栈告诉我崩溃是在由 QtGui4.dll 调用的 msvcr90.dll 中的 malloc.c 中。

技术：

Qt版本：4.7.0

操作系统：Windows 7 和 Ubuntu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:02:02.950

你知道还有[`QGraphicsPathItem`](http://qt-project.org/doc/qt-4.8/qgraphicspathitem.html)吗？（`QGraphicsPolygonItem`仅适用于闭合多边形，不适用于折线。路径项适用于**一般路径**。）

您需要`QPainterPath`从您的`QPolygon`:

```
QPainterPath path;
if(polygon.size() > 0) // check this, because we use [0] outside the loop!
{
    path.moveTo(polygon[0]);
    for(int i = 1; i < polygon.size(); ++i) // starting from 1 (0 was a "moveTo")
       path.lineTo(polygon[i]);
} 
```

然后制作并使用路径项：

```
QGraphicsPathItem* item = new QGraphicsPathItem(path);

// your additional code from above:
item->setPen(QPen(QBrush(color), 2));
item->setZValue(30);
item->setData(0, QVariant((int)value));

addItem(item); 
```

* * *

但是请注意，由于您发布的代码似乎没有错误，因此您的程序中必须存在**严重的错误**（可能在代码中的不同（可能相关）位置），无论如何您都应该修复它！

可能坐标的生成有错误？或者甚至在生成 QPolygonF 之前进行一些计算？您是否尝试注释掉生成该项目的代码？

您也可以尝试使用适用于 Windows 的 valgrind 替代方案。有关某些工具，请参阅[此 Stackoverflow 问题](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)。

# php - iframed 网页 - 从包含页面获取数据

> ID：10967209
> 
> 赞同：0
> 
> 时间：2012-06-10T08:11:09.827
> 
> 标签：php, javascript, html

我被要求研究为一个网站构建一个小部件，该小部件查看其所在页面的内容，然后显示相关的搜索结果。我的方法是使用元关键字或计算文档中使用的单词并使用出现次数最多的单词。不过，在我做任何这些之前，我需要能够从 iframed 页面获取包含页面的内容；这是可能吗？从我所看到的情况来看，它不是，我只能获取文档引用者（我想在 url 中可能有有用的信息）。

任何人都知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:01:56.990

正如我在对 OP 的评论中所述，由于 XSS（跨站点脚本）限制，浏览器将阻止任何尝试在不同域的站点之间执行任何操作（无论是读取还是写入）。

所以答案是否定的，您将无法按照客户的要求去做。

您最多可以获得推荐信息，或者（如您所说）通过主机站点愿意提供的查询字符串提供的任何信息

# php - 如何从网站上传图片到脸书

> ID：10967210
> 
> 赞同：-2
> 
> 时间：2012-06-10T08:11:17.297
> 
> 标签：php, facebook, facebook-graph-api

我想使用 facebook api 将图像上传到 facebook 相册，如果发现使用的文件来自 pc，我会搜索很多。我想将图像上传到 facebook 相册以及我想从网站获取的图像路径？

```
$File_path='http://example.com/sample.jpg';
$args = array('message' => 'Photo Caption');
$args['image'] = '@' . realpath($FILE_PATH);

$data = $facebook->api('/'. $ALBUM_ID . '/photos', 'post', $args);
print_r($data); 
```

可以像我上面提到的那样给出文件路径吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:22:50.460

您的代码中有几个严重的错误：

1.  `$File_path`不一样`$FILE_PATH`- 请记住变量区分大小写！
2.  [`realpath`](http://php.net/realpath)接受路径而不是 URL 并将`false`在您的情况下返回

您只能使用参数上传本地文件，并且应该使用`image`远程图像参数。`url`

对于本地文件，考虑使用以下示例之一来实现所需的结果：

```
$facebook->api("/{$ALBUM_ID}/photos", "post", array(
  'message' => 'Photo caption',
  'image'   => '@'.realpath('./path/to/local/image/file.jpg')
)); 
```

对于远程文件：

```
$facebook->api("/{$ALBUM_ID}/photos", "post", array(
  'message' => 'Photo caption',
  'url'   => 'http://example.com/url/of/image/file.jpg'
)); 
```

# java - 如何在java中声明这样的数字？

> ID：10967211
> 
> 赞同：2
> 
> 时间：2012-06-10T08:11:19.023
> 
> 标签：java

我有一个数组，其中包含这样的数字，如 0221、0223 等。我可以在那里使用什么类型的数据？如果我尝试使用long或int，则表明每个数字后第一个0需要写逗号。数组看起来像那里：

```
TYPE? isAvailable[] = {0221, 0223}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T08:15:09.490

如果你想要没有逗号但前导零并且你想将它存储在数组中，我认为你只能使用`string`. 如果您不介意存储前导零，并且格式始终为 4 个字符，则可以使用`int`，并且在显示数字时，相应地格式化它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:22:38.350

使用字符串。

```
String isAvailable[] = {"0221", "0223"}; 
```

# .net - LiveReload（和其他类似的应用程序）在技术上是如何工作的？

> ID：10967222
> 
> 赞同：11
> 
> 时间：2012-06-10T08:13:00.907
> 
> 标签：.net, python, browser, live

有一些很棒的 Web 开发工具可以让开发人员的生活变得轻松。[LiveReload](http://livereload.com/)和[CodeKit](http://incident57.com/codekit/)等应用程序就是很好的例子。

我对它们感兴趣的只是当文件更改写入硬盘驱动器时，它们使网页在网络浏览器（无论是 Chrome、Firefox 或其他什么）中实时重新加载的方式。

他们实际上是如何做到的？是否有 Web 浏览器供应商公开的 API 来执行此操作？或者它只是在到达浏览器之前注入到网页的自定义服务器端脚本（实际上不是由网络开发人员编写的），并且当驱动器上的文件发生更改时会发生一些 Ajax 魔法。

我计划在 Python 或 Vala (Linux) 和 .NET (Windows) 中开发类似的东西，所以如果有可用的文档，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-01T19:37:28.507

来自[LiveReload 常见问题解答](http://feedback.livereload.com/knowledgebase/articles/87979-how-do-i-choose-the-best-integration-method)：

> 为了与您的浏览器通信，LiveReloads 需要将其 JavaScript 代码注入您的网页。有3种安排方式：
> 
> 1.  手动将脚本标签添加到您的 HTML 代码中，或者
> 2.  安装浏览器扩展（激活后，将脚本标签即时添加到访问过的页面），或
> 3.  为您的 Web 框架使用插件（在服务请求时动态添加脚本标签），目前仅适用于 Rails/Rack。

另外，我知道这个问题很老，但对于那些也来这里搜索“ *livereload python* ”的人来说，有一个很棒的[用 python 编写的 LiveReload 服务器](https://github.com/lepture/python-livereload)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:18:33.937

这些通常（总是？）基于一个相当简单的概念 - 每隔一段时间，一些客户端代码会触发询问服务器脚本文件是否已更新。当且仅当它具有时，它才会重新加载页面 - 或者，对于某些网站（想想 SO 和一些社交网站），它只会下载新信息并就地加载。

对于您在本地沙箱中开发的情况，他们有时还可以侦听操作系统的“文件已更改”信号，而不必设置能够响应 AJAX 请求的服务器。大多数操作系统都提供这些信号——例如，在 Linux 上你有[inotify](http://en.wikipedia.org/wiki/Inotify)。从他们的网页上可以看出，LiveReload 使用了这样的系统——他们套件的一部分是一组浏览器插件，这些插件可能为操作系统服务提供 Javascript API，并调整浏览器沙箱规则以允许它。

# android - 如何将此 JSON 字符串转换为等效的类列表

> ID：10967230
> 
> 赞同：0
> 
> 时间：2012-06-10T08:14:22.547
> 
> 标签：android, json

我可以使用以下代码解析简单的 JSON 字符串

```
HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(
            URL.toString() );

    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(content));

            finalResult.setText("Done") ;

            Result = reader.readLine();

        } else {
             Result = "error";
        }
    } catch (ClientProtocolException e) {
         Result = "error";
        e.printStackTrace();
    } catch (IOException e) {
         Result = "error";
        e.printStackTrace();
    } 
```

但现在我有以下 JSON 字符串

```
[{"Name":"Ali" ,"Age":35,"Address":"cccccccccccc"} ,{"Name":"Ali1" ,"Age":351,"Address":"cccccccccccc1"} ,
{"Name":"Ali2" ,"Age":352,"Address":"cccccccccccc2"}
] 
```

和阶级代表它

```
package com.appnetics;

import android.R.string;

public class Encounter {
    public string Name;
    public string Address;
    public int Age;
} 
```

我想遍历这个 JSON 并将其转换为`list<Encounter>`

任何想法如何做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:31:33.620

另一种更简单的方法是使用[Gson 另一个库](http://code.google.com/p/google-gson/)来简化您的实现，与 Android 平台附带的 org.json 实现相比，它更易于使用。

如果你对域对象没问题。然后你只有两行代码来解析 json ......就像

```
Gson gson = new Gson();
YourDomainObject obj2 = (YourDomainObject) gson.fromJson(jsonString,
   YourDomainObject.class); 
```

它也可以处理集合 n 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T08:24:51.263

使用`org.json`命名空间。对于您的具体示例，您可以执行以下操作：

```
ArrayList<Encounter> encounters=new ArrayList<Encounter>();
JSONArray array=new JSONArray(Result);
for(int i=0;i<array.length();i++){
    JSONObject elem=(JSONObject)array.get(i);
    Encounter encounter=new Encounter();
    Encounter.Name=elem.getString("Name");
    Encounter.Age=elem.getInt("Age");
    Encounter.Address=elem.getString("Address");
    encounters.add(encounter);
} 
```

# android - 使用 jsoup 获取 null 解析 img

> ID：10967231
> 
> 赞同：1
> 
> 时间：2012-06-10T08:14:42.860
> 
> 标签：android, parsing, image, jsoup

我在解析此 html 时遇到问题：

```
 <div class="big-photo report-photo"> 
    <img alt="Europa" src="/media/asset_publics/resources/000/004/121/news_landscape/europa.jpg?1339265409" /> 
```

和我的代码：

```
 Element img = doc.select("div[class=big-photo report-photo] img").first(); 
```

我成功地将 jsoup 与 html 连接，但 img 为空，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T20:52:46.210

`String url = img.attr("src");`在您的代码之后添加。祝你好运

# winforms - Winform 与边缘的距离

> ID：10967234
> 
> 赞同：0
> 
> 时间：2012-06-10T08:15:25.573
> 
> 标签：winforms

调整父窗体或容器控件的大小时，视觉控件的哪个属性允许与父窗体或容器控件的边缘保持恒定距离

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:21:17.583

它是`Margin`属性`Margin="0,10,0,25"`（左、上、右、下）。

# mysql - 索引表以加快排序的最佳方法

> ID：10967250
> 
> 赞同：0
> 
> 时间：2012-06-10T08:18:54.863
> 
> 标签：mysql, indexing

我有以下表结构。

```
town:

id (MEDINT,PRIMARY KEY,autoincrement), 
town(VARCHAR(150),not null),
lat(FLOAT(10,6),notnull)
lng(FLOAT(10,6),notnull) 
```

我经常使用“SELECT * FROM town ORDER BY town”查询。我尝试索引城镇，但没有被使用。那么索引的最佳方法是什么，以便我可以加快查询速度。

使用解释（唯一索引出现在城镇）：

```
 mysql> EXPLAIN SELECT * FROM studpoint_town order by town \G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: studpoint_town
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 3
    Extra: Using filesort 
```

一组中的 1 行（0.00 秒）

拉加兹，拉维。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:29:50.610

您的`EXPLAIN`输出表明当前`studpoint_town`表只有 3 行。如[手册中所述](http://dev.mysql.com/doc/en/how-to-avoid-table-scan.html)：

> 当 MySQL 使用表扫描来解析查询时，列中[`EXPLAIN`](http://dev.mysql.com/doc/en/explain.html)显示的输出。这通常发生在以下情况下：`ALL``type`
> 
> [...]
> 
> *   该表是如此之小，以至于执行表扫描比费心查找键要快。这对于少于 10 行且行长度较短的表很常见。在这种情况下不要担心。

# java - 投射到按钮控件（Android）：那到底是什么？

> ID：10967251
> 
> 赞同：2
> 
> 时间：2012-06-10T08:19:07.493
> 
> 标签：java, android, controls

关于“铸造”的可用（类似）问题并没有真正阐明这是什么或做什么（顺便说一下，刚刚开始 Android 编程）。人们在哪里以及如何注意到“铸造”的效果？

有什么区别：

```
Button b = (Button) findViewById(R.id.btn_second) 
```

和

```
Button b = findViewById(R.id.btn_second) 
```

?

亲切的问候，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:28:14.470

尝试这个，

```
findViewById(R.id.btn_second)  will return a View. 
```

但它是一个什么样的视图，一个Button，一个List，一个TextView，EditView等等。

这里 findViewById(R.id.btn_second) 返回一个 Button 类型的 View，所以我们将它转​​换为 Button 类型。

```
Button b = (Button) findViewById(R.id.btn_second); 
```

好的，我会给你一个例子。

```
public abstract class Animal{
    public abstract void sound();
}

public class Dog extends Animal{
    public void sound(){
        System.out.println("Wooffffff");
    }
}

public class Cat extends Animal{
    public void sound(){
        System.out.println("Meowwwwwwww");
    }
} 
```

现在，如果我创建 1 只狗和 1 只猫对象..

```
Dog d = new Dog();
Cat c = new Cat();

public class CloneAnimal{

    public void doIt(Animal a){
        if(a instanceof Dog)
            Dog d1 = (Dog) a;
        else 
            Cat c1 = (Cat) a ;
    }
} 
```

(Dog) 和 (Cat) 是显式转换，如 (Button)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:24:11.780

这是一个Java继承问题。

findViewByID 方法返回 View 类型的对象。所有的小部件类都继承自 View，所以我们说“A Button IS A View”

您不能将 View 对象分配给 Button 引用。演员表操作员告诉编译器“我很确定这个 View 对象恰好是一个按钮”

如果这没有意义，您需要查看有关继承和引用对象转换的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T08:26:25.157

在 Java 对象类型转换中，一个对象引用可以类型转换为另一个对象引用。转换可以是它自己的类类型，也可以是它的子类或超类类型或接口之一。在 java 中有用于强制转换的编译时规则和运行时规则。

强制转换运算符（类型）用于将值从一种类型转换为另一种类型或将对象引用更改为兼容类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T08:57:30.533

类型不是 Android 独有的，如果你想做好面向对象编程，你需要很好地理解它。我建议阅读有关[继承](http://en.wikipedia.org/wiki/Type_conversion)、[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)和[类型转换](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的内容。这些将帮助您了解我们为什么使用我们所做的对象类型。

为了回答您的问题，Android UI 对象都派生自一个名为（[此处](http://developer.android.com/reference/android/view/View.html)`View`的文档）的类型。这定义了一个接口，即这种类型的所有对象必须能够做什么，例如能够“绘制”自己。这允许 Android 使用任何类型的可显示对象，只要它实现/扩展接口，因此您可以创建自己的自定义 UI 对象，Android 不需要知道它是一个新类型的事实，只需知道它可以像任何其他对象一样与之交互。`View``View`

在您的问题中，您正在[向下转换](http://en.wikipedia.org/wiki/Downcasting)，您可以更具体地了解对象的类型，以便您可以使用您向下转换到的类型的已定义接口以不同的方式与对象交互。向上转型是另一种方式，在这种情况下，您要使专用对象更通用，前提是它是该类型的子类型，这意味着它实现了相同的接口。

# javascript - jquery选择第n个孩子之后的所有孩子

> ID：10967258
> 
> 赞同：6
> 
> 时间：2012-06-10T08:21:04.103
> 
> 标签：javascript, jquery, jquery-selectors

我正在使用 jquery 并创建显示隐藏列表，我需要隐藏 ul 中第 6 个孩子之后的所有子列表项。通常我会通过设置高度然后在单击时更改高度来做到这一点，但是为了使其工作，我需要添加`overflow:hidden`到我的 css 中，这不是一个选项。

如何获得大于第 7 个孩子的所有子列表元素？

就像是，

`$("ul li:6n").domeSomething()`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T08:23:44.497

> 如何获得大于第 7 个孩子的所有子列表元素？

选择元素索引 = 7+

```
$("ul li:gt(6)").domeSomething() 
```

[**`:gt`选择器**](http://api.jquery.com/gt-selector/)

选择器使用**零基索引**：

> 请注意，由于 JavaScript 数组使用从 0 开始的索引，因此这些选择器反映了这一事实。这就是为什么 $('.myclass:gt(1)') 选择文档中类 myclass 的第二个元素之后的元素，而不是选择第一个之后的元素。相反， :nth-child(n) 使用基于 1 的索引来符合 CSS 规范。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T10:33:15.090

我想写我的答案只是为了讨论之前的两个答案：来自**gdoron**[的答案](https://stackoverflow.com/a/10967296/315935)[和](https://stackoverflow.com/a/10967278/315935)来自neu **-rah**的答案。如果我们在投票计数上看到，大多数读者会发现 doron 的答案更好。我不同意，我试图解释原因。

 ****您将找到 Selector 文档的说明（请参阅[此处](http://api.jquery.com/gt-selector/)`:gt()`的“附加说明：” ）：

> 因为`:gt()`是 jQuery 扩展而不是 CSS 规范的一部分，所以使用的查询`:gt()`不能利用原生 DOM`querySelectorAll()` 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请 `$("your-pure-css-selector").slice(index)`改用。

您可以使用[此处](http://jsfiddle.net/Wffvm/1/)或更好的[此处](http://www.ok-soft-gmbh.com/jQuery/jQueryGtTest1.htm)测试代码（使用 jQuery 1.7.2 的非最小化代码）。该代码仅使用语句`$("ul li:gt(6)").css("color", "red");`。**如果您在 Chrome 的开发者工具中使用激活的按钮“Pause on exceptions”**启动演示，您将更好地理解该问题。您将看到以下异常（它不会是第一个）：

![在此处输入图像描述](../Images/d4172bd8082da3c5e1d45aa5ef3bd889.png)

所以你可以看到，当前的 jQuery 实现尝试使用web 浏览器的*native* `querySelectorAll()`来获得最佳性能。之后，函数[$.makeArray](http://api.jquery.com/jQuery.makeArray/)将用于从`NodeList`. 如果出现异常[，该行](https://github.com/jquery/sizzle/blob/1.5.1/sizzle.js#L1189)

```
return oldSizzle(query, context, extra, seed); 
```

因此，如果您使用`querySelectorAll()`. 例如

```
$("ul li").slice(7) 
```

更好的是

```
$("ul li:gt(6)") 
```

我会建议您尽可能使用更精确的选择器。例如，如果父`<ul>`元素有`id="menu1"`那么你可以使用

```
$("#menu1 >li").slice(7) 
```

以获得最佳效果。如果您的页面上有*多个* 元素，它将另外提供帮助。`<ul>`

有人可以提一下：选择器的`"ul li:gt(6)"`工作速度足够快。这是正确的，但您不应该忘记，您有时会在循环内部使用选择器，或者在将在循环内部调用的函数内部使用它。因此，如果执行时间乘以 100，则 10ms 和 30ms 之间的差异会更加明显。

此外，如果有人问自己如何实现一些选择并得到答案，他/她将*永久*使用代码模式。我认为使用具有性能优势的模式会更好。是不是这样。

**更新**：为了清除我另外制作的演示和选择器`$("ul li:gt(6)")`的[性能](http://www.ok-soft-gmbh.com/jQuery/jQueryGtTest2.htm)`$("ul li").slice(7)`差异。每个人都可以测试他使用的网络浏览器的差异。您还不应忘记，如果页面有*许多其他*元素，则 id 选择器会更好地工作。`$("#menu1 >li").slice(7)`

 *`$("ul li").slice(7)`在我的计算机上，和的执行时间`$("#menu1 >li").slice(7)`大致相同（页面元素很少），并且比for**好 2.5-4.5 倍**`$("ul li:gt(6)")`。结果可能取决于`li`项目数、页面上的元素数和许多其他东西，但我希望测试能清楚地表明，与使用`slice`相比，使用具有性能优势`:gt`（就像我们可以阅读之前引用的 jqGrid 文档）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T08:25:09.733

使用 slice 减少集合

```
.slice(start[,end]) 
```

[http://api.jquery.com/slice/](http://api.jquery.com/slice/)

示例（已编辑）

```
$("ul li").slice(6).doSomething(...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T08:25:06.193

尝试这个：

```
$('ul li:eq(6)').nextAll().domeSomething() 
```*****

# sql-server - 无法理解 SQL 代码

> ID：10967259
> 
> 赞同：-1
> 
> 时间：2012-06-10T08:21:16.403
> 
> 标签：sql-server, count, subquery, calculated-field

我发现很难理解下面的代码。你能给我一个代码如何工作的逻辑流程吗？

问题 - 假设您想在“客户”表中显示每个客户下达的订单总数。订单与相应的客户 ID 一起存储在 Orders 表中。

步骤 -

1.  从客户表中检索客户列表。
2.  对于检索到的每个客户，计算 Orders 表中关联订单的数量。

解决方案 -

```
SELECT cust_name, cust_state, 
    (SELECT COUNT(*)
        FROM Orders
        WHERE Orders.cust_id = Customers.cust_id
    )
AS order_nos
FROM Customers
ORDER BY cust_name 
```

我无法理解括号内的 count(*) 部分。请帮我弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:14:53.010

它被称为相关子查询。从本质上讲，对于每个客户，您将获得该客户拥有多少订单的计数。“魔法”在`WHERE Orders.cust_id = Customers.cust_id`子查询的子句中。这是将此结果与您的主要查询相关联的部分。它的意思是“从主查询中获取 cust_id，现在找到 cust_id 是那个 cust_id 的订单数”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:24:12.950

它只是计算行数。在这种情况下，这是每个客户的订单数量。替代**COUNT(column_name)**为您提供*column_name*不为空的行数。

没有子查询的等价物（使用组代替）：

```
SELECT cust_name, cust_state, COUNT(orders.cust_id) order_nos
FROM Customers
    LEFT OUTER JOIN Orders on Customers.cust_id = Orders.cust_id
GROUP BY cust_name, cust_state
ORDER BY cust_name 
```

# c++ - 我可以将继承的类指针用作父类指针吗？

> ID：10967262
> 
> 赞同：2
> 
> 时间：2012-06-10T08:21:34.077
> 
> 标签：c++, inheritance, pointers, constructor

我的两个类： Parent 和 Child 是相同的（现在）并且具有相同的构造函数。

```
class Parent{
protected:
  string name;
public:
  Parent(string &n, vector <int> &v) {
  /* read n and v into vars */
};

class Child : public Parent {
public:
  Child(string &n, vector <int> &v) : Parent(n, v) {}
};
vector <int> val;
string nam, numb;
if(val[0] == 0) 
  Child* ptr = new Child(nam, val);
else
  Parent* ptr = new Parent(nam, val);

myMap.insert(Maptype::value_type(numb, ptr) ); 
```

将 Child* ptr 对象作为 Parent* ptr 对象传递是否合法？我听说它们具有相同的指针类型，所以应该没问题。那为什么我会收到警告：未使用的变量“ptr”警告：未使用的变量“ptr”错误：“ptr”未在此范围内声明？我的程序仅适用于 Parent 类。我觉得我没有继承父母的权利。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T08:25:14.200

该代码创建了两个名为 的单独变量`ptr`，它们的范围都非常有限。

考虑以下：

```
if(val[0] == 0) 
  Child* ptr = new Child(nam, val);
else
  Parent* ptr = new Parent(nam, val); 
```

它相当于：

```
if(val[0] == 0) {
  Child* ptr = new Child(nam, val);
} else {
  Parent* ptr = new Parent(nam, val);
}
// neither of the `ptr' variables is in scope here 
```

这是修复代码的一种方法：

```
Parent* ptr;
if(val[0] == 0) 
  ptr = new Child(nam, val);
else
  ptr = new Parent(nam, val); 
```

一旦你这样做了，你还需要确保它`Parent`有一个虚拟析构函数。请参阅[何时使用虚拟析构函数？](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T11:21:22.407

因为您仅在 if 语句中声明 ptr，所以请尝试在 if 语句上方声明它，这样它可能就像 aix answer

# iphone - UITableViewCellStyleSubtitle 文本对齐

> ID：10967264
> 
> 赞同：0
> 
> 时间：2012-06-10T08:21:40.423
> 
> 标签：iphone, uitableview

我做了很多谷歌搜索，但没有找到解决方案:(

有没有办法改变`UITableViewCellStyleSubtitle`文本对齐方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:24:23.987

似乎您无法更改它，我也遇到了同样的问题，经过大量谷歌搜索后，我发现编写自己的自定义单元格（花了我 10 分钟）比做进一步研究更有效率所以我的建议是，放弃搜索并开始使用字幕对自己的单元格进行编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:16:38.903

是的，align-subtitle 的唯一方法是制作您自己的自定义单元格类。

# eclipse - 是否有适用于 Eclipse Indigo (3.7) 的 MDT UML2 工具？

> ID：10967266
> 
> 赞同：1
> 
> 时间：2012-06-10T08:21:55.513
> 
> 标签：eclipse, uml, mdtool, eclipse-mdt

是否有适用于 Eclipse Indigo (3.7) 的 MDT UML2 工具？我有点困惑，在此页面[模型开发工具 (MDT)](http://www.eclipse.org/projects/project.php?id=modeling.mdt)上它说版本应该在 6 月 22 日（2010 年？？），但是该页面后面没有列出任何版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:22:18.213

看看子项目。大多数 MDT 的东西都是通过标准发布系列发布的。Indigo 有一个版本，Juno 也会有一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:14:21.067

您可以使用 Papurus 或 Topcased for Eclipse Indigo 作为 UML 建模器。其他 Ecipse 建模工具已停产。

# java - spring getbean case 是否敏感？

> ID：10967279
> 
> 赞同：21
> 
> 时间：2012-06-10T08:23:56.070
> 
> 标签：java, spring

当我使用`getBean("test")`

我有一个像

```
@Component
public class TEST {
} 
```

这个bean可以加载吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-10T08:46:12.323

`getBean()` **区分**大小写，但是 Spring 对`@Component`和`@Bean`类使用自定义 bean 命名策略。请参阅[*4.10.5 命名自动检测到的组件*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-scanning-name-generator)：

> 当一个组件作为扫描过程的一部分被自动检测时，它的 bean 名称由`BeanNameGenerator`策略生成 [...]。默认情况下，任何包含值的 Spring 原型注解（ `@Component`、`@Repository`、`@Service`和）都将因此将该名称提供给相应的 bean 定义。`@Controller``name`
> 
> 如果这样的注释不包含任何`name`值或任何其他检测到的组件（例如由自定义过滤器发现的组件），则**默认 bean 名称生成器将返回未大写的非限定类名称**。

对于`@Configuration`/`@Bean`参见[*4.12.4.5 自定义 bean 命名*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-java-customizing-bean-naming)：

> 默认情况下，配置类使用`@Bean`方法的名称作为生成的 bean 的名称。但是，可以使用`name`属性覆盖此功能。

回到你的问题。因为您的类没有遵循 Java 命名约定（驼峰命名），所以 Spring 为 bean 使用了不寻常的名称，这将起作用：

```
getBean("TEST") 
```

但是，如果您使用预期`@Component class Test { }`的命名 ( )，则必须使用小写标识符：

```
getBean("test") 
```

此外，如果您的名字更复杂，则适用未大写的驼峰式语法（继续引用[Spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-scanning-name-generator)）：

> [...] 例如，如果检测到以下两个组件，则名称将是`myMovieLister`and `movieFinderImpl`：

```
@Service("myMovieLister")
public class SimpleMovieLister {
  // ...
}

@Repository
public class MovieFinderImpl implements MovieFinder {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T07:06:47.263

`@Component`注释`AnnotationBeanNameGenerator`默认使用，如果没有明确给出名称，将使用`Introspector.decapitalize()`bean ClassName 上的方法来获取 bean 的名称。通常，名称如“Test”的类会给它 bean 名称“test”。但`decapitalize`有一个好奇心：

> 这通常意味着将第一个字符从大写转换为小写，但是在（不寻常的）特殊情况下，当有多个字符并且第一个和第二个字符都是大写时，我们不理会它。

所以你`class TEST`会得到 bean name `TEST`。

# php - 多次执行绕过

> ID：10967284
> 
> 赞同：0
> 
> 时间：2012-06-10T08:24:30.253
> 
> 标签：php, constructor, scope, php-5.3, hierarchy

我有以下（示例）代码：

```
class Foo {
    public function __construct() {
        $this->bar = new Bar();
        $this->baz = new Bazr();
    }
}

class Bar extends Foo {
    public function __construct() {
        parent::__construct();

        $baz = $this->baz->alert();
    }
}

class Baz extends Foo {
    public function __construct() {
        parent::__construct();
    }

    public function alert() {
        echo('Hello!');
    }
}

new Foo(); 
```

这将生成一个`Fatal error: Maximum function nesting level of '100' reached, aborting!`. 我想要的是，正是这个，当然有不同的代码并且没有错误。

我想要的是一种方法来知道我的实例何时已经创建并且不允许同一对象的更多实例，避免循环引用。

了解了 Singletom，但没有任何效果。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:33:33.977

Foo 的构造函数调用 Bar 的构造函数，后者调用 Foo 的构造函数，后者调用 Bar 的构造函数……你明白了。100 次后它会告诉你它很头晕。不要创建这样的循环引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T09:39:51.797

我不太明白你为什么需要这一切？如果只是因为要在 Foo 类中获取 Bar/Baz 的方法，那么您可以使用：

```
class Foo {
   public function __construct() {
      Bar::init();
   }
}

class Bar extends Foo {
   public function __construct() {
      parent::__construct();
   }

   public function init() {
      Baz::alert();
   }
}

class Baz extends Foo {
   public function __construct() {
      parent::__construct();
   }

   public function alert() {
      echo 'Hello!';
   }
}

new Foo(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:00:19.840

实现依赖注入是解决方案：

```
class Foo {
    public function __construct() {
        $this->bar = new Bar(new Baz());
    }
}

class Bar {
    public function __construct($baz = null) {
        $this->baz = $baz;
        $this->baz->alert();
    }
}

class Baz {
    public function __construct() {
    }

    public function alert() {
        echo('Hello!');
    }
}

new Foo(); 
```

# android - 适用于 Android 的自定义 gdb 7.4.1：无法访问内存

> ID：10967287
> 
> 赞同：0
> 
> 时间：2012-06-10T08:24:43.743
> 
> 标签：android, android-ndk

我已经[为 Android 构建了 gdb 7.4.1 （应用了](http://gnutoolchains.com/android/)**ndk-r8 的**Android 补丁并将其配置为**arm-linux-androideabi**）。它在某些设备上运行良好，但在其他一些设备上它拒绝设置断点报告“无法访问内存”。

假设协议兼容，我使用了 NDK 中的原始 gdbserver。

有没有人遇到过类似的问题？我还需要从 7.4.1 源构建 gdbserver 吗？还是我缺少一些外部补丁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:43:14.930

刚刚解决了。显然，Android NDK r8 提供的 gdbserver 与 gdb 7.4.1 不完全兼容。从源代码构建 gdbserver 并替换 NDK 可以完全解决问题。

# ssl - new_ssl 在哪里？

> ID：10967288
> 
> 赞同：0
> 
> 时间：2012-06-10T08:24:44.587
> 
> 标签：ssl, erlang, rabbitmq, macports

从 rabbitmq 文档中我知道有一个`new_ssl`应用程序。我已经通过 macport 命令安装了 erlang。使用命令后`"port content erlang|grep new_ssl"`，我找不到它。

在 www.erlang.org，new_ssl 文档中，它说`new_ssl`是模块而不是应用程序。但是阅读`ssl.app`，它也不包含`new_ssl`模块？

是鬼吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:28:53.083

新旧 ssl 是 SSL 的两种不同实现。旧 ssl 直接使用 libopenssl，因为新 ssl 是在 erlang 中构建的，只有 C 中的 libcryto 函数。从 Erlang/OTP 的 R15B 版本（2011 年 12 月）开始，old_ssl 实现完全被删除。

# jsoup - 如何使用jsoup解析嵌套表

> ID：10967289
> 
> 赞同：0
> 
> 时间：2012-06-10T08:24:45.697
> 
> 标签：jsoup

如何使用 jsoup 提取直接具有两个“td”标签的“tr”标签。

示例 html

```
<table>
  <tr> <!-- I don't want to extract this tr -->
    <td> 
      <table>
        <tr><td>extract</td><td>extract</td></tr> <!-- I want extact this tr -->
        <tr><td>extract</td><td>extract</td></tr> <!-- I want extact this tr -->
      </table>      
    </td>
  </tr>
</table> 
```

我尝试使用此查询进行提取。但我有 3 个 tr 标签。

```
doc.select("tr:has(td:eq(1))") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:37:54.557

您是否尝试过以下查询`doc.select("tr tr")`？

此查询应选择您评论的所有表行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T03:59:59.467

// 我希望这对你有帮助........你可以看到这样的输出：存储在内表的 td 标记中的 abcd /nefgh。

```
 String input = "<table><tr><td >TD1</td><td>td1</td> <td ><table><tr><td >a</td><td>b</td> <td >c</td><td>d</td></tr><tr><td>e</td><td>f</td><td >g</td><td>h</td></tr></table></td><td>td1</td></tr><tr><td>TD2</td><td>tD2</td><td >Td2</td><td>td2</td></tr></table>";

     Document doc = Jsoup.parse(input);

    Elements tables = doc.select("table tr td:has(table)");

    for (Element table : tables) {

        Elements trs = table.select("tr");

        String[][] trtd = new String[trs.size()][];

        for (int a = 0; a < trs.size(); a++) {

            Elements tds = trs.get(a).select("td");

            trtd[a] = new String[tds.size()];

            for (int b = 0; b < tds.size(); b++) {

                trtd[a][b] = tds.get(b).text(); 

              System.out.print( trtd[a][b] +"    ");

            }
          System.out.println( );
        }

        // trtd now contains the desired array for this table
    }
} 
```

}

# ajax - 效果在ajax调用中不起作用

> ID：10967290
> 
> 赞同：0
> 
> 时间：2012-06-10T08:24:46.070
> 
> 标签：ajax

我的ajax中有这段代码：

```
 $.ajax({    
url : "<?php echo site_url('user/add'); ?>",
                            type : 'POST',
                            data : form_data,
                            success : function(msg) {
                                $('#bid-form-part').html(msg).effect("pulsate", { times:3 }, 2000);
                                }
                        }); 
```

它显示了我通过 ajax 发送的 html。没关系，但效果脉动根本不起作用；）

任何建议我做错了什么？

我希望新内容闪烁一次或几次，但他的代码一定是错误的或什么的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:30:36.013

我不确定，但也许你在错误的元素上应用了脉动方法。
试试这个：

```
$('#bid-form-part').html(msg);  
$('#bid-form-part').effect("pulsate", { times:3 }, 2000); 
```

或选择另一个选择器（插入的一些 div 内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:35:12.187

根据 Jquery API，没有一个名为 effect 的函数，尝试用一些淡出和淡入替换它，看看它们是否有效？

例如

```
 $('#bid-form-part').html(msg).fadeOut(200).fadeIn(200).fadeOut(200).fadeIn(200).fadeOut(200).fadeIn(200); 
```

它有点啰嗦，但它可以让你看看它是否会工作！

我会使用评论，但显然我的代表不够高：D

# ruby - RSpec 测试模块方法/

> ID：10967293
> 
> 赞同：1
> 
> 时间：2012-06-10T08:24:51.053
> 
> 标签：ruby, rspec, bdd, stub

我有下一个模块。

```
module A
  module B      
    def self.method_b(value)
      #code
    end
  end 
end 
```

和

```
module A
  module C
    def self.method_c(value)
       A::B.method_b(value)
    end
  end
end 
```

如何测试这些模块？如何创建存根 self.method_b？

spec_helper.rb

```
RSpec.configure do |config|
 config.mock_with :mocha
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:53:02.807

您已经切换了 mocha 的内置 RSpec 模拟库。那有不同的[API](http://rdoc.info/github/freerange/mocha/frames)。尝试：

```
A::B.stubs(:method_b).returns('value') 
```

# java - 如何减少 web-app 中用于 perm gen 的内存

> ID：10967302
> 
> 赞同：1
> 
> 时间：2012-06-10T08:26:08.673
> 
> 标签：java, jsp, tomcat, servlets, permgen

我用tomcat7。我的网络应用程序包含：

*   休眠
*   日志4j
*   jdom
*   上传jar
*   mysql驱动
*   ...

lib的总数是30个jar文件。我的主持人说：“*为您的程序分配了很多内存（用于 Perm gen 和堆）。请减少消耗的内存量*”。

如何减少程序的内存需求？

如何减少 perm gen 内存？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:31:37.730

您可能应该首先附加一个内存分析器并查看正在使用的内存类型以及原因。[这个问题的答案](https://stackoverflow.com/questions/14762/please-recommend-a-java-profiler)列出了一堆你可以尝试的分析器。

堆是您分配用于在 Java 中存储对象的所有内存。每次您使用“新”时，您都会在堆上分配，并且在最后一次引用被清除后的一段时间内，内存将被垃圾收集。下面是一些典型的减少堆使用量的方法： 从内存解析 API 切换到流式 API，可能是使用 StAX 或 SAX 而不是 JDOM。通过在不再需要对象时立即在 finally 块中清理来修复内存泄漏或只是超过必要的对象保留时间。优化 SQL 查询，使其仅向应用程序返回准确的必要数据，可能通过添加最大行约束或更严格的 where 子句。限制上传的大小并将它们流式传输到磁盘上的临时文件，而不是将它们保存在内存中。

Perm gen是“永久一代”。通常，在 JVM 退出之前，永远不会释放 perm gen 中的内存。它主要用于存储加载的类。因此，您可以做的任何事情来加载更少的类都会有所帮助。以下是加载更少类的一些方法： 尽量不要使用同一个 jar 的多个版本。尝试在尽可能广泛的上下文中加载 jar，优先选择 Tomcat 的 lib 目录或共享 lib 目录而不是 WEB-INF/lib。尽量减少 webapp 的重新加载，因为每次在 Tomcat 中重新加载 webapp 时，它不会卸载所有类的旧版本，而只是加载新版本。

# php - 读取xml文件时出现问题

> ID：10967306
> 
> 赞同：0
> 
> 时间：2012-06-10T08:27:27.230
> 
> 标签：php, xml, encoding, format, fitnesse

我必须阅读驻留在 Fitnesse 页面上的 XML 文件。

让我们举个例子。

```
<?php
$url = http://localhost:9090/TestSuite.Fitnesse?Suite&Format=XML;
$xml=file_get_contents($url);
?> 
```

我的 XML 格式为：

```
<xml version="some version">
<Results>
<name>Karan</name>
</Results>
...etc... 
```

当我输出`$xml`页面时，每个标签之前都会出现一些奇怪的数字，并且输出看起来就像

```
37 9 Karan 9f .........and so on.... 
```

当我检查该网页的来源时，该页面包含以下代码：

```
37 9
<?XML  Version="some version">
32
<Results>
32
<name>
45
Karan 
0f
</name>
and so on.... 
```

（我没有使用确切的值，如果需要我可以提供）。

任何人都可以帮助我，因为我没想到输出字符串中有这些奇怪的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:42:29.330

您需要在服务器 (php.ini) 中设置 allow_fopen_url 才能使其正常工作。

如果你不这样做，那么你可以使用这个函数作为替代：

```
<?php
function curl_get_file_contents($URL)
    {
        $c = curl_init();
        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($c, CURLOPT_URL, $URL);
        $contents = curl_exec($c);
        curl_close($c);

        if ($contents) return $contents;
            else return FALSE;
    }
?> 
```

这将需要在您的 php.ini 中启用 curl 扩展

# ruby-on-rails - Ruby函数将两个字符串合并为一个

> ID：10967307
> 
> 赞同：1
> 
> 时间：2012-06-10T08:27:36.357
> 
> 标签：ruby-on-rails, ruby

给定两个字符串，如下所示，我想将它们合并以生成以下内容。结果没有什么意义，但是，两个字符串都有一个共同的“句子”，这就是两个字符串之间的连接符：

```
"This is a sentence is a great thing"

s1 = "This is a sentence" 

s2 = "a sentence is a great thing" 
```

ruby 有这个功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:09:16.860

这是一个有效的解决方案。

```
def str_with_overlap(s1, s2)
  result = nil
  (0...(s2.length)).each do |idx|
    break result = s1 + s2[(idx + 1)..-1] if s1.end_with?(s2[0..idx])
  end
  result
end

str_with_overlap("This is a sentence", "a sentence is a great thing")
# => This is a sentence is a great thing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T09:19:30.760

Ruby 中没有内置方法，但你可以试试这个

```
class String
  def merge str
    result = self + str
    for i in 1..[length,str.length].min
      result = self[0,length-i] + str if self[-i,i] == str[0,i]
    end
    result
  end
end

"This is a sentence".merge "a sentence is a great thing" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T08:35:13.987

据我所知，Ruby 中没有内置函数。

您可能必须为此编写一个自己的函数。直接的一个在输入长度上以二次时间运行。[但是，使用此算法](https://stackoverflow.com/questions/1285434/efficient-algorithm-for-string-concatenation-with-overlap)可以在输入大小的线性时间内完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T12:39:50.460

功能方法（在单词级别工作）：

```
ws1, ws2 = [s1, s2].map(&:split)
idx = 0.upto(ws1.size-1).detect { |i| ws1[i..-1] == ws2[0, ws1.size-i] } || 0
(ws1[0, ws1.size-idx] + ws2).join(" ")
=> "This is a sentence is a great thing" 
```

# java - 小程序上的 JOptionPane，accessEventQueue accessControlException

> ID：10967308
> 
> 赞同：1
> 
> 时间：2012-06-10T08:27:36.763
> 
> 标签：java, joptionpane, accesscontrolexception, icedtea

我编写了一个生成测验小程序的应用程序。我找不到一种可移植的方式来自动对生成的小程序进行签名，因此它们没有被签名。但是据我所知，这段简单的代码不需要对Applet进行签名，但它在linux上抛出了关于“accessEventQueue”的accessControlException。我在 IceTea7、OpenJDK7 上运行它，我在 Chrome 和 Opera 上都试过。

```
System.out.println("This will display...");

int r = JOptionPane.showConfirmDialog(null,"End the quiz now?",
    "Quiz",
    JOptionPane.YES_NO_OPTION,                  
    JOptionPane.INFORMATION_MESSAGE);

System.out.println("This won't..."); 
```

浏览了一下，我发现[了](http://old.nabble.com/-Bug-1010--New%3A-accessEventQueue-exception-when-displaying-a-modal-dialog-in-the-event-queue-td33900872.html)有关 IcedTea 上的错误的信息。我自己在 Windows 上尝试过这个小程序，它没有在那里抛出任何异常。

如果我发现的确实是一个错误，是否有任何解决方法或者我必须实现自己的确认对话框......？

有什么方法可以在不干扰 AWT 事件队列的情况下弹出 JOptionPane 对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:13:26.150

正如我从开发人员那里听到的，这是一个实际的错误。

这是我对确认对话框的简单实现，可以为您节省一些编码时间：

```
public class ConfirmDialog implements ActionListener {
    JFrame main;
    ConfirmCallback callback;

    public ConfirmDialog(String msg,String[] opts, ConfirmCallback lc) {
        this(msg,"Selection",opts,lc);
    }

    public ConfirmDialog(String msg,String title ,String[] opts,  ConfirmCallback lc) {
        main = new JFrame();
        main.setTitle(title);
        this.callback = lc;
        main.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
        GridBagConstraints gbc = new GridBagConstraints();
        GridBagLayout layout = new GridBagLayout();

        JPanel panel = new JPanel();
        panel.setLayout(layout);
        panel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0; gbc.gridy =0;
        gbc.gridwidth = opts.length; gbc.gridheight = 1;
        gbc.insets = new Insets(3,3,3,3);

        JLabel mainLabel = new JLabel(msg);

        layout.setConstraints(mainLabel, gbc);
        panel.add(mainLabel);

        gbc.gridy = 1;
        gbc.gridwidth= 1;

        int cnt = 0;
        for (String s: opts) {
            JButton submitButton = new JButton(s);
            submitButton.setActionCommand(Integer.toString(cnt++));
            submitButton.addActionListener(this);   
            gbc.gridx = cnt;
            layout.setConstraints(submitButton, gbc);
            panel.add(submitButton);
        }
        main.add(panel);
        main.pack();
        main.setLocationRelativeTo(null);
        main.setVisible(true);

    }

    public ConfirmDialog() {}

    @Override
    public void actionPerformed(ActionEvent e) {
        callback.run(Integer.decode(e.getActionCommand()));
        main.dispose();
    }

    public void Test() {
        ConfirmCallback cb = new ConfirmCallback(){
            @Override
            public void run(int arg) {
                JOptionPane.showMessageDialog(null, "The user just entered: "+arg);
            }
        };
        new ConfirmDialog("Please choose",new String[] {"a","b","c"},cb);
    }

    public static void main(String args[]) {
        new ConfirmDialog().Test();
    }
} 
```

这是它使用的回调：

```
public abstract class ConfirmCallback {
    public abstract void run(int arg);
} 
```

# c++ - 如何将 NS 基本数组传递给静态 C++ dll

> ID：10967309
> 
> 赞同：0
> 
> 时间：2012-06-10T08:27:47.067
> 
> 标签：c++, static-libraries, nsbasic

我需要将一个字节数组从 NS Basic 传递给一个静态 C++ dll。

在 NS Basic 中，我将这样的函数定义为静态 dll。

```
Declare "Function myFunc Lib ""dllLib.dll""(ByVal data As Byte()) As Long"
Buffer = Array(0,1,2,3)

'call the function
myFunc(Buffer) 
```

为此，我想知道静态 C++ 函数的签名应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:55:53.557

```
long myFunc(unsigned char* buffer); 
```

您可能还需要传入数组大小的第二个参数 -

```
long myFunc(unsigned char* buffer, int size); 
```

# c# - 通过 linq 对树视图进行列表排序

> ID：10967318
> 
> 赞同：0
> 
> 时间：2012-06-10T08:29:23.963
> 
> 标签：c#, linq, sorting

我有一个清单

```
key ParentKey
1   Null
2   1
3   Null
4   Null
5   1
6   4
7   6
8   3 
```

我想把它分类

```
key ParentKey
1   Null
2   1
5   1
3   Null
8   3
4   Null
6   4
7   6 
```

通过 linq 如何做到这一点？任何帮助都是最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:49:11.610

假设结果应该是：

```
key ParentKey
1   Null
2   1
5   1
3   Null
8   3
4   Null
6   4
7   6 
```

我可以说，如果没有逻辑可以将该位置的空值放入列表中，那么您将无能为力。

因此，使用 Linq，您可以使用[OrderBy()](http://msdn.microsoft.com/en-gb/library/bb534966.aspx)函数对列表进行排序：

```
list = list.OrderBy(x => x.ParentKey).ToList(); 
```

但是使用这个函数，结果如下：

```
key ParentKey
1   Null
3   Null
4   Null
2   1
5   1
8   3
6   4
7   6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:58:40.757

如果你有一份清单

```
public class MyObject{
      int Key {get;set;}
      int ? ParentKey{get;set;}
} 
```

然后对该列表进行排序，请使用：

```
 var list = new List<MyObject>(){ new MyObject{ Key = 1 , ParentKey = null } , new MyObject{Key=2 , PatentKey = 1}  /* and so on */};

  var sortedList = list.OrderBy(o=>o.ParentKey , new MyComparer());

public class MyComparer : IComparer<MyObject>
{     
    public int Compare(MyObject o1, MyObject o2)
    {
        if (ol.HasValue && o2.HasValue)
        {
            if (ol.ParentKey.Value == o2.ParentKey.Value)
                 return 0;
            return ol.ParentKey.Value  > o2.ParentKey.Value  ? 1 : -1;
        }
        else
            return 0;

    }
} 
```

这将产生准确的预期序列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T08:56:56.413

我相信你想要在这里实现的是树的[DFS](https://stackoverflow.com/questions/687731/breadth-first-vs-depth-first)有序打印。
Linq 无法帮助您（至少开箱即用）。

我建议使 DFS 实现适应您的数据结构。请参阅[Eric Lippert 的建议](https://stackoverflow.com/a/5806795/687857)。

# security - IP 哈希是存储 IP 地址的安全替代方案？

> ID：10967322
> 
> 赞同：2
> 
> 时间：2012-06-10T08:29:44.320
> 
> 标签：security, forms-authentication

我想为用户等进行一些测试，并希望以匿名方式存储结果。我对潜在的追踪用户完全不感兴趣，但另一方面，我需要一种方法来避免重复提交（在特定时间范围内）。所以我的想法是：为什么不简单地存储他们的 IP 地址的哈希值并检查后续提交的内容，而不是保存实际的 IP 地址？

这听起来很简单，以至于我担心错过了什么，所以我向专家提出的问题是：

*   是否提供了一种相对安全的方式来防止重复提交？
*   它真的为用户提供了合理的匿名性吗？
*   是否还有其他我可能遗漏的警告或问题（例如资源过于密集等）？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:40:32.163

> 是否提供了一种相对安全的方式来防止重复提交？

不，用户可以使用代理和其他方法绕过 IP 检查。更不用说可以重置调制解调器的动态 IP 用户了。

> 它真的为用户提供了合理的匿名性吗？

单向算法将提供最好的“匿名性”，因为从技术上讲，您无法以简单的方式逆转它。**编辑：**正如@ta.speot.is 所纠正的那样，如今即使是单向算法也很容易破解。

我也不明白为什么要将“匿名”提升到散列 IP 的级别，前提是您的用户通过 HTTP 访问您的页面，您的服务器**将**知道他们的 IP 并将它们记录在访问日志中，因此，除非其他人有权访问您的数据库存储的数据，散列或不散列 IP 之间没有太大区别。

> 是否还有其他我可能遗漏的警告或问题（例如资源过于密集等）？

一个简单的散列函数不应该从服务器上占用太多资源，即使您没有特别指定任何语言。=]

最后，散列 IP 可能被认为是一种[隐蔽](http://en.wikipedia.org/wiki/Security_through_obscurity)尝试的安全性，因为它没有添加存储未散列 IP 已经具有的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:41:01.463

你是对的 - 存储 IP 地址哈希对于“匿名”更好。此外，为了避免重复提交，您可能还需要考虑 X-Forwarded-For 的值（连同 IP 地址）。不是灵丹妙药，但比 IP 地址更好。

# python - Python Inline if 语句是否执行两次函数？

> ID：10967326
> 
> 赞同：8
> 
> 时间：2012-06-10T08:31:02.713
> 
> 标签：python

当我做类似的事情时（完全随机的例子不要读入变量名）：

```
variable = read_file() if read_file() else "File was empty" 
```

在这种情况下 read_file() 会被执行两次吗？如果是这样，有没有办法只执行一次但保持在一行内？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-10T08:32:19.110

在那种情况下`read_file()`会被执行两次。你可以这样做：

```
variable = read_file() or "File was empty" 
```

# ios - UIGestureRecognizer 的内存管理

> ID：10967327
> 
> 赞同：1
> 
> 时间：2012-06-10T08:31:09.157
> 
> 标签：ios, ios5, memory-management, automatic-ref-counting, uigesturerecognizer

这里给出一个例子，（使用 ARC ）

```
 UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onTap:)];

        [subView1 addGestureRecognizer:tapGesture ];
        [subView2 addGestureRecognizer:tapGesture]; 
```

这是问题所在：

subView1 不会响应 tapGesture ，但 subView2 会。

如果我们从 subview2 中删除 tapGesture，subView1 将起作用。

在内存管理方面内部发生了什么？为什么不设计使上述代码工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T08:56:39.393

我很确定 iOS 中包含的标准手势识别器一次只能附加到一个视图。我找不到任何明确说明它的内容，但是如果您查看`UIGestureRecognizer`该类，则有一个`view`带有此描述的属性：

> 手势识别器附加到的视图。（只读）

所以我的猜测是，`addGestureRecgnizer:`如果它已经附加到视图，它将取消附加 reconizer。

# java - 绑定到昂贵的 JSF 属性的正确方法是什么？

> ID：10967328
> 
> 赞同：1
> 
> 时间：2012-06-10T08:31:26.190
> 
> 标签：java, jsf-2

这是我的场景：

我正在使用 JSF。

1.  我有一个每 5 秒刷新一次的页面（但用户没有注意到它，因为一切都是 ajaxified）
2.  我想要一个模式窗口，当用户单击某些东西（例如，一个按钮）时，它会向用户显示一个事物列表。因此，每次用户单击该按钮时，模式都会显示最新列表。

现在我有以下内容：加载了 a 属性的模式。此属性从 DB 加载内容并将列表返回到 JSF 页面。

主要问题是由于页面每 5 秒刷新一次，因此该属性每 5 秒调用一次（即对 DB 的请求）。

总结：我想要一个模式，每次用户点击一个按钮时加载一个列表，在一个每 5 秒刷新（ajaxified）的页面内。

做这些事情的正确方法是什么？指向好的教程是好的答案，我不需要代码，而是了解最佳实践。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:40:14.250

每当用户单击按钮时，我都会从数据库中获取列表，并将其放入在当前请求中幸存的 bean 的属性中（范围 = 会话、视图、对话或其他），然后将该属性与 EL 绑定表达。

要在单击按钮时获取列表，请让按钮触发重新呈现面板内容的 ajax 请求，并在完成 ajax 请求后使面板可见。您还没有说您使用的是什么 ajax 或组件库；使用 Richfaces，它类似于：

```
<a4j:commandButton 
    action="#{mybean.fetchListFromDatabase}" 
    rerender="panelcontent" 
    oncomplete="Richfaces.showModalPanel('thepanel')"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:45:59.313

模式面板已经在 RichFaces 和 PrimeFaces 库中实现

*   [RichFaces 4 弹出面板](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=modalPopup&skin=blueSky)
*   [PrimeFaces 3 对话框](http://www.primefaces.org/showcase-labs/ui/dialog.jsf)

两种实现都包括 ajax 和 jQuery 来管理基本行为。您可以使用其中之一来实现您的模式面板和从数据库恢复数据的列表（使用 ViewScope 托管 bean）。

如果您不能或可能不想将这些库中的任何一个添加到您的项目中，您可以使用它们的代码并将其用作实现的启动（这两个库都是开源的）。

# security - 会话如何工作？

> ID：10967331
> 
> 赞同：0
> 
> 时间：2012-06-10T08:31:42.513
> 
> 标签：security, session-cookies

我设置了一个脚本来为用户登录时创建会话。

然后根据登录时的用户名和密码会话，从用户表中获取用户权限级别以及其他一些字段。

然后我将用户权限和用户 ID 设置为会话。

然后，我使用用户 ID 根据他们的 ID 从其他表中选择内容。

这安全吗？有人可以强制更改会话并以某种方式从另一个用户那里获取数据吗？还是可以将大量数据（除了密码）设置到会话变量中？

干杯，我希望这是有道理的..只是回顾一下：

我可以将登录用户的用户 ID 设置到会话 cookie 中吗？有没有办法让某人更改 cookie 并尝试通过猜测他们的用户 ID 来查看其他人的数据？

干杯约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:34:38.063

安全规则 1 - 不要实施您自己的身份验证和会话管理方案。尝试始终依赖您的平台/框架标准实现。

在您的场景中，会话 cookie 是不受信任的数据（即攻击者可以在返回服务器的途中对其进行修改）。如果您的会话 ID 很容易猜到（例如增量整数），那么更改此 ID 并成为您系统中的另一个用户（会话劫持）是微不足道的。

如果您必须使用自己的机制，请考虑以下事项： 1\. 跟踪与您的会话关联的 IP 地址。如果您看到来自不同 IP 地址的请求，请考虑您想要做什么。2\. 使用难以猜测的会话 ID/令牌。例如，不要使用整数 - 使用 guid。如果您必须将会话 ID 用作整数，则引入某种与此会话 ID 关联的 GUID，并将其与会话 ID 一起存储在服务器端和客户端的 cookie 中。这 2 个值应始终匹配 - 否则该请求不是真实的。

# linux - 对于极小（通常是单文件）项目，最简单的版本控制软件是什么？

> ID：10967333
> 
> 赞同：0
> 
> 时间：2012-06-10T08:31:56.117
> 
> 标签：linux, svn, version-control

很多时候，我会发现自己有非常小的项目，只需要一两天的工作。我现在的示例是一个简单的单文件 HTML 和 javascript 文件，用于将表单提交到外部网站。这不会是我在 10 分钟内完成的事情，但也不会花费我超过一两天的编码时间。

不过，我真的很想对这样的项目进行版本控制，因为我往往有很多这样的项目，而且几乎总是我后来因为在我破坏某些东西后没有要回滚的修订而自责。'

我知道 SVN，但仅存储 1 个可能包含 4 或 5 个提交的小文件感觉非常笨拙。我的意思是，我必须经历制作存储库的麻烦，以及所有这些。我真的只是想要一种超级简单的版本控制。我不需要任何高级功能，只需要一个`commit`和`rollback`类型的东西。

有谁知道任何针对这种轻量级版本控制的版本控制软件？

为了稍微提炼我的问题，我将“最佳”定义为易于使用并且让我花最少的时间来管理它。我不希望有很多功能。我永远不需要分支之类的东西，或者让其他人编辑它。只是一个更少手动和更简单的等价物

```
cp myfile myfile.backup1 
```

请注意，我在 Linux 上，并且真的想要一个超级简单的命令行界面。但是 GUI 也可以工作 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T09:13:36.247

我会选择 git。

使用 git，您可以在新的源目录中创建一个新的 git 存储库，只需：

```
git init 
```

这会在当前目录中创建一个新的存储库。然后，您可以使用以下命令签入同一目录中的文件：

```
git add *
git commit -a 
```

这就是对文件进行版本控制的全部内容。

另一种选择是过时的[RCS](http://linux.die.net/man/1/rcsintro)。它不支持远程存储库，而且功能也不是很强大，但是如果您只需要一些基本的版本控制，那么它就可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T08:36:11.253

您可以只在驱动器上的目录上使用[Tortoise SVN 。](http://tortoisesvn.net/)无需安装 SVN 服务器。这样，您就可以以目录的形式在本地获取所有内容，如果需要，您可以随时移动该目录。我假设你在 Windows 上工作。

我自己与其他 2 位在此共享目录中工作的同事一起使用它，直到我们获得一台服务器将其移动到真正的 SVN 或 TFS。我自己多年来一直在使用该解决方案（没有最近到达的同事）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T08:44:56.957

带有[Github for Windows](http://windows.github.com/) / [Mac的](http://mac.github.com/)[GitHub](https://github.com/)应该对你有好处。用户界面易于使用，不需要太多技能来学习。此外，大多数 IDE 都集成了 Git，因此甚至可能不需要 GUI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T13:33:34.717

我会使用任何分布式 VCS，例如 Mercurial、Git 或 Bazaar。他们都将存储库与您的工作副本放在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T11:44:55.250

尝试 pv2 。[http://code.google.com/p/pv2](http://code.google.com/p/pv2)。

# objective-c - 为什么我的数据源属性没有设置？

> ID：10967338
> 
> 赞同：0
> 
> 时间：2012-06-10T08:33:11.833
> 
> 标签：objective-c, cocoa-touch, properties

我有一个`UITableView`谁的控制器看起来像这样：

```
@interface FLWorkspaceViewController : UITableViewController

@property(nonatomic,retain) NSMutableArray* workspaces;

@end 
```

我尝试在另一个控制器中设置该数组：

```
for(NSDictionary* workspace in workspaces)
        {
            NSLog(@"%@",workspace);
            [workspaceViewController.workspaces addObject:workspace];
        }

        [self.navigationController pushViewController:workspaceViewController animated:YES]; 
```

我已经检查了这些值并且它们存在。当我计数`workspaces`时`viewDidLoad`，它是 0。这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:37:56.220

`@property`语句为您创建指针，但不是实际内容。因为我在你的代码中没有看到它：你`alloc init`在`NSMutableArray *workspaces`哪里吗？

编辑：初始化`workspaces`数组的最佳方法可能是在您定义`@property`. 延迟初始化是可取的。最好将您的`@synthesize`声明修改为类似 的内容`@synthesize workspaces = i_workspaces;`，然后您可以像这样编写您的吸气剂：

```
- (NSMutableArray *)workspaces {
    if (i_workspaces == nil) {
        NSMutableArray *i_workspaces = [[NSMutableArray alloc] initWithCapacity:3];
    }
    return i_workspaces;
} 
```

容量语句只是帮助编译器优化，它不必是精确的。

# javascript - 寻找一个 javascript 引擎

> ID：10967340
> 
> 赞同：0
> 
> 时间：2012-06-10T08:33:19.073
> 
> 标签：javascript, c++, scripting

我正在寻找一个 js 引擎，我可以（轻松）公开 C/C++ 函数、类等。API 应该允许从 C++ 中更改公开的值（通过在 js 中存储某种指针或对对象的引用左右...）。我考虑过使用谷歌的 v8，但我是新手，不知道它是否能满足我的要求。有人可以告诉我是否应该坚持使用 v8 或尝试其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:36:43.203

我相信 chrome 和 firefox 后端库都提供了将 c++ 方法公开给 java 脚本的方法。试一试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:58:39.457

是的，V8 适合您。Chrome 开发者工具从 C++ 后端调用 JS 方法，反之亦然。

# java - 使用 android 和 PC 的 TCP 客户端和服务器程序的性能问题

> ID：10967343
> 
> 赞同：0
> 
> 时间：2012-06-10T08:33:49.073
> 
> 标签：java, android, tcp, android-emulator, socket.io

我编写了一个 java TCP 服务器程序。我将在我的 PC 上运行该程序。我编写了一个 java TCP 客户端程序，我将在 android 模拟器上运行。我将使用 ip 地址 10.0.2.2 连接到服务器，因为我使用的是 android 模拟器。但是性能很差。近8-10分钟后，服务器正在接收客户端发送的数据。并且模拟器没有从服务器接收任何数据。请看看哪里出错了？

TCP 服务器（在 PC 中运行）：

```
import java.io.*;
import java.net.*;

class TCPServer
{
   public static void main(String argv[]) throws Exception
      {
         String clientSentence;
         String capitalizedSentence=null;
         ServerSocket welcomeSocket = new ServerSocket(9000);

         while(true)
         {
            Socket connectionSocket = welcomeSocket.accept();
            BufferedReader inFromClient =new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
            DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
            clientSentence = inFromClient.readLine();
            System.out.println("Received: " + clientSentence);
            if(clientSentence.equals("IS COMPUTER ON?"))
            {
                capitalizedSentence = "YES SYSTEM IS ON.";
            }
            outToClient.writeBytes(capitalizedSentence);
         }
      }
} 
```

TCP 客户端（在安卓模拟器中运行）：

```
package a.b.c;
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.Socket;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WifitestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        try
        {
            String sentence="IS COMPUTER ON?";
            String modifiedSentence=sentence;
            Socket clientSocket = new Socket("10.0.2.2", 9000);
            DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
            BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            outToServer.writeBytes(sentence);
            modifiedSentence = inFromServer.readLine();
            TextView a=(TextView)findViewById(R.id.textView1);
            a.setText(modifiedSentence);
            a.showContextMenu();
            clientSocket.close();
        }
        catch(Exception e)
        {
            TextView a=(TextView)findViewById(R.id.textView1);
            a.setText(e.toString());
            a.showContextMenu();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:55:25.417

一些提示

1.  要创建客户端套接字，请使用以下命令

    构造函数`Socket(String host, int port)`可以无限期地阻塞，直到与主机建立初始连接。

您可以通过首先构造一个未连接的套接字然后使用超时连接它来克服这个问题：

```
Socket s = new Socket();
s.connect(new InetSocketAddress(host, port), timeout); 
```

1.  在服务器端使用 Only `PrintWriter`，因为它将作为来自套接字的低级字节和字符数据之间的桥梁。

    例如：服务器代码

    ```
    public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    } 
    ```

    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:51:59.303

你能检查一下你的模拟器的[网络延迟选项吗？](http://developer.android.com/guide/developing/devices/emulator.html#netdelay)您还可以看到机器上没有多少进程正在运行，因为这些进程可能会窃取您希望模拟器消耗的 CPU 周期

# c# - 使用 WCF 处理回调时更新进度

> ID：10967346
> 
> 赞同：0
> 
> 时间：2012-06-10T08:34:16.407
> 
> 标签：c#, asp.net, wcf, web-services, wcf-client

我有一个程序可以访问通过 HTTP 运行的 WCF Web 服务。

程序需要登录，登录过程是这样的：

```
Get Staff List from WebService. 
Gets Drivers List from Webservice.
Gets Vehcile list from web service.
logged in. 
```

我想在每个阶段之后更新进度。所以我想我会通过 IAsycnhResult 方法链接它们..

但是，当我尝试从这些句柄回调方法更新进度时，我收到一个错误：

```
The calling thread cannot access this object because a different thread owns it. 
```

代码：

```
ASreference.Service1Client client = new ASreference.Service1Client();

private void login()
{
//User has already entered username/password
AsyncCallback CallBack = new AsyncCallback(HandleCallback);
client.BeginGetStaff(CallBack, client);

TxtboxPassword.IsEnabled = false;
TxtboxUsername.IsEnabled = false;
LblProgress.Content = "Logging In";
progress.Value = 10;
}

void HandleCallback(IAsyncResult result)
{
    bool success = false;

    try
    {
        Staff = client.EndGetStaff(result);                
        success = true;
    }
    catch
    {
        MessageBox.Show("Incorrect username or password");
        client = new ASreference.Service1Client();
        EnableTextbox();
    }

    if (success)
    {
        AsyncCallback CallBack = new AsyncCallback(DriversCallBack);                
        client.BeginGetDrivers(CallBack, client);
        LblProgress.Content = "Downloading Drivers";  //CAUSES ERROR
        progress.Value = 30;
    }

    } 
```

您如何安全地更新进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:50:48.143

```
progress.Dispatcher.Invoke(
      System.Windows.Threading.DispatcherPriority.Normal,
      new Action(
        delegate()
        {
                LblProgress.Content = "Downloading Drivers";
                progress.Value = 30;
        }
    )); 
```

# java - Jackson - 通用 TreeSet 未序列化

> ID：10967347
> 
> 赞同：0
> 
> 时间：2012-06-10T08:34:40.120
> 
> 标签：java, generics, serialization, jackson

我正在尝试序列化具有以下字段的对象：

```
private TreeSet<TimeSlot<T>> counterTimeSlotSet = 
    new TreeSet<TimeSlot<T>>(
            new Comparator<TimeSlot<T>>(){
                @Override
                public int compare(TimeSlot<T> cb1, TimeSlot<T> cb2) {
                    return cb1.getPeriod().compareTo(cb2.getPeriod());
                }
            }); 
```

序列化代码如下：

```
 BaseSlidingWindow<BasicVelocityCounter> window1 = 
        new BaseSlidingWindow<BasicVelocityCounter>(
                BasicVelocityCounter.class, slidingWindowConfig);
    ...

    // jackson serializer test
    Version version = new Version(1, 0, 0, "SNAPSHOT");
    SimpleModule module = new SimpleModule("ZORRO", version);
    module = module.addSerializer(new DateTimeSerializer());
    // and so on...
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(module);

    mapper.writeValue(new File("C:\\tmp\\window1.json"), window1); 
```

问题是`window1`类型的成员`TreeSet<TimeSlot<T>>`没有序列化。日志中没有出现异常。我只是得到不包含该`TreeSet<TimeSlot<T>>`成员的 json。

调试杰克逊代码并没有把我带到任何地方。**我想知道为了获得`TreeSet<TimeSlot<T>>`序列化需要做什么？**

**编辑**

我的`BaseSlidingWindow`类定义如下所示：

```
public class BaseSlidingWindow<T extends ICountable<T>> 
                        implements ISlidingWindow<T>{

    boolean dirty = false;

    private DateTime createdOn;
    private DateTime updatedOn;
    private DateTime windowLifeStart;
    private DateTime windowLifeEnd;

    private final SlidingWindowConfig slidingWindowConfig;

    private TreeSet<TimeSlot<T>> counterTimeSlotSet = 
    new TreeSet<TimeSlot<T>>(
            new Comparator<TimeSlot<T>>(){
                @Override
                public int compare(TimeSlot<T> cb1, TimeSlot<T> cb2) {
                    return cb1.getPeriod().compareTo(cb2.getPeriod());

                }
            });

    private final Class firstSeenDataType;

    // constructor, accessors and IFS implementations
    // ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:30:06.603

我没有看到任何公共领域或吸气剂`BaseSlidingWindow`。因此，它没有可序列化的可观察属性。如果这是问题所在，最简单的方法是添加`@JsonProperty`之前`counterTimeSlotSet`和要序列化的其他属性。

替代方法包括添加“getter”方法（如`getCounterTimeSlotSet`）或更改默认可见性设置以包括非公共字段。

# url - 不重写 (/?s=query) 的搜索更适合 SEO？

> ID：10967356
> 
> 赞同：0
> 
> 时间：2012-06-10T08:37:01.383
> 
> 标签：url, search, mod-rewrite

正在重写搜索：

```
/?s=query 
```

至

```
/search/query 
```

对 SEO 来说是个坏主意？

我目前正在重写它们以获得更清晰的 URL，但我发现我无法将它们添加到 Google Analytics 中。它也会影响SEO吗？重写它们以掩盖传递的变量是一个坏主意吗？为什么？

# windows - Windows 内核驱动程序签名和服务创建

> ID：10967357
> 
> 赞同：4
> 
> 时间：2012-06-10T08:37:07.570
> 
> 标签：windows, windows-services, driver, wdk, driver-signing

在签署我的内核模式驱动程序并为其创建服务时遇到了一些麻烦。

因此，我使用 makecert 创建了一个自签名证书：

> makecert -r -pe -n "CN=XXX" -ss "XXX" -sr LocalMachine

然后使用证书管理管理单元我将证书导出到 .pfx 文件并使用 signtool 对 .sys 驱动程序进行签名：

> signtool sign /f myCert.pfx /p xxx /t [http://timestamp.comodoca.com/authenticode](http://timestamp.comodoca.com/authenticode) driver.sys

这是成功的。使用 signtool 进行验证后，我收到：

验证：driver.sys 文件哈希（sha1）：9A...7F

```
Signing Certificate Chain:
    Issued to: XXX
    Issued by: xxx
    Expires:   Sat Dec 31 16:59:59 2039
    SHA1 hash: 12...46

The signature is timestamped: Sun Jun 10 03:35:21 2012
Timestamp Verified by:
    Issued to: UTN-USERFirst-Object
    Issued by: UTN-USERFirst-Object
    Expires:   Tue Jul 09 11:40:36 2019
    SHA1 hash: E1...46

        Issued to: COMODO Time Stamping Signer
        Issued by: UTN-USERFirst-Object
        Expires:   Sun May 10 16:59:59 2015
        SHA1 hash: 3D...C8

Successfully verified: driver.sys

Number of files successfully Verified: 1
Number of warnings: 0
Number of errors: 0 
```

但是，当我尝试为它创建服务时：

> sc create ncd binPath= C:\Windows\System32\drivers\driver.sys type= kernel

（binpath 已验证存在），服务已创建，但大约 10-20 秒后，“程序兼容性助手”出现了令人讨厌的“Windows 需要数字签名驱动程序”对话框。

![程序兼容性助手](../Images/2c16e5b98ec7a1da5b037956423ffeee.png)

是什么赋予了？它被证明是签名的。我已经尝试了该过程三遍，但没有成功。我已经尝试启动该服务，但我得到一个带有 BC 代码的 BSOD，它指的是这个问题（未签名的驱动程序在 XP/32 位 7 上工作得很好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T08:58:53.050

您可以在此处找到一些有用的文档：http: [//msdn.microsoft.com/en-us/library/windows/hardware/dn170454 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/dn170454(v=vs.85).aspx)

正如卢克所说，您需要这两个步骤，提供的链接解释了第 2 步。使用从 Microsoft 获得的交叉证书，您应该签署这些驱动程序。签名是使用 Win sdk 工具完成的。

# ruby - Ruby 字符串处理

> ID：10967358
> 
> 赞同：1
> 
> 时间：2012-06-10T08:37:11.223
> 
> 标签：ruby, string

我正在努力学习红宝石。在 Ruby中转换`'"abcd" "efg"'`为 a的优雅方法是什么？`['abcd', 'efg']`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T08:38:47.733

试试这个：

```
require 'shellwords'
'"abcd" "efg"'.shellsplit
#=> ["abcd", "efg"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:54:15.707

您也可以通过删除`"`字符然后按空格分割来做到这一点

```
'"abcd" "efg"'.tr('"','').split
'"abcd" "efg"'.delete('"').split 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:15:50.750

您可以使用`scan`which 查找字符串中所有出现的模式。

```
'"aaa" "bbb"'.scan(/"([^"]*)"/)
=> [["aaa"], ["bbb"]] 
```

解释：

*   `/`something`/`是一个正则表达式（可以匹配字符串）
*   `/"`something`"/`是一个正则表达式，匹配开头和结尾的字符串`"`
*   `[^"]`匹配任何不是`"`
*   `[^"]*`尽可能多地匹配这些字符。
*   `(`并`)`告诉它在结果中想要我想要的位。

# r - 回归结果：默认显示格式

> ID：10967359
> 
> 赞同：1
> 
> 时间：2012-06-10T08:37:39.973
> 
> 标签：r, options, lm

我正在使用 lm() 函数在 R 中运行回归，但无法以简单格式显示结果。我需要打印一个 p 值向量：

```
> summary(lm)$coef[,4]
  (Intercept)           lun          d1un 
 1.433706e-01 4.673723e-158  6.629044e-04 
```

如何覆盖科学记数法并获得合理的精度？我尝试了选项（scipen = 1000），但它显示无穷无尽的数字行，不知何故选项（数字= 7）在这里不起作用。

我知道我可以使用格式和冲刺之类的东西，但我想为所有数字输出设置默认显示规则，例如不超过 6 个小数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:16:52.297

我认为这是不可能的，因为整个 R. 的一般显示`?options`是关于数字的：

```
 ‘digits’: controls the number of digits to print when printing
      numeric values.  It is a suggestion only.  Valid values are
      1...22 with default 7\.  See the note in ‘print.default’ about
      values greater than 15. 
```

关键短语是“这只是一个建议”。

接下来，请注意打印的内容首先由`print()`应用的方法控制（这在交互使用期间是隐藏的，因为 R auto- `print()`s）。有关详细信息`?print`，请参见`?print.default`基本方法。从`?print.default`我们注意到

```
digits: a non-null value for ‘digits’ specifies the minimum number of
        significant digits to be printed in values.  The default,
        ‘NULL’, uses ‘getOption(digits)’.  (For the interpretation
        for complex numbers see ‘signif’.)  Non-integer values will
        be rounded down, and only values greater than or equal to 1
        and no greater than 22 are accepted. 
```

在**详细信息**部分，我们有：

```
 The same number of decimal places is used throughout a vector.
   This means that ‘digits’ specifies the minimum number of
   significant digits to be used, and that at least one entry will be
   encoded with that minimum number.  However, if all the encoded
   elements then have trailing zeroes, the number of decimal places
   is reduced until at least one element has a non-zero final digit.
   Decimal points are only included if at least one decimal place is
   selected. 
```

的默认值`digits`是`NULL`表示`getOption("digits")`使用的，但正如我们已经指出的，这只是一个指南。

似乎没有办法将 R 配置为做你想做的事，也没有办法在全局范围内做。您将需要重写`print.default()`或`print()`您需要使用的所有方法，并使用这些版本而不是标准版本 --- 现在使用 NAMESPACES 并不容易。

# jquery - .live 语法有问题

> ID：10967365
> 
> 赞同：0
> 
> 时间：2012-06-10T08:39:37.410
> 
> 标签：jquery, load, live, mousedown, mouseup

我需要一个 mousedown/up 事件影响通过 .load 购买到页面中的元素。

我正在使用它，但我想我可能弄错了：

```
$("#newBtn").live('mouseup', function(){
  $(this).css('box-shadow', '0px 7px 10px -5px #000');
}).mousedown(function(){
  $(this).css('box-shadow', '0px 7px 10px -5px #666');
}); 
```

这是加载事件：

```
$('#dashboard').click(function()
{
    $('#box').html(''); 
    $('#box').load('ajax/content.php #dashboard');
});
$('#calendar').click(function()
{
    $('#box').html(''); 
    $('#box').load('ajax/content.php #calendar');
}); 
```

这是两个按钮，其中一个加载一个包含#newBtn 的 div。

任何帮助，将不胜感激！

我也试过这个：

```
 $("#dashboard").on('load', function(){
    $('#newBtn').mouseup(function()
    {
        $(this).css('box-shadow', '0px 7px 10px -5px #000');
    }).mousedown(function(){
        $(this).css('box-shadow', '0px 7px 10px -5px #666');
    });
 }); 
```

我的想法是，在将新 div 加载到我的页面时，鼠标按下事件将被武装。但没有这样的运气:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:40:39.430

行，

感谢您的帮助，但 on 方法对我不起作用。我终于得到了它（使用工程师的语法和 live 方法）：

```
 $('#newBtn').live('mouseup','#newBtn',function() {
        $(this).css('box-shadow', '0px 7px 10px -5px #000');
   }).live('mousedown','#newBtn',function() {
        $(this).css('box-shadow', '0px 7px 10px -5px #666');
   }); 
```

唯一的问题是，我不知道它为什么会起作用，所以如果有人能向我解释一下：）那就太好了！

# emacs - 如何在 Emacs 中找到建议功能的默认建议？

> ID：10967367
> 
> 赞同：4
> 
> 时间：2012-06-10T08:40:02.883
> 
> 标签：emacs, elisp, advising-functions, defadvice

当我查看 的文档时`beginning-of-defun`，有一条注释：

```
This function is advised.

Around-advice `senator':
Move backward to the beginning of a defun.
If semantic tags are available, use them to navigate. 
```

但是我找不到调用 defadvice 的 .el 文件。有没有办法导航到定义建议的原始文件？

**编辑：**虽然我标记了正确的 Phils 对 .el 文件进行 rgrep 的建议，但我仍然希望有一些更优雅的方法可以追溯到 defadvice。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:58:10.643

据我所知，没有办法导航到`defadvice`表达式的位置（我很高兴被证明是错误的）。

这大概应该追踪它：

`M-x` `rgrep` `RET` `(defadvice 'beginning-of-defun` `RET` `*.el` `RET` `~/.emacs.d/` `RET`

（否则，site-lisp 目录将是下一个查看的地方）

您也可以像这样查看建议数据结构（但这不包括您要查找的信息）。

```
(ad-get-advice-info 'beginning-of-defun) 
```

# emacs - common lisp和emacs lisp的struct区别

> ID：10967372
> 
> 赞同：5
> 
> 时间：2012-06-10T08:40:35.063
> 
> 标签：emacs, lisp, elisp

下面的代码在 common lisp 中工作，但在 emacs lisp 中，它抱怨“（错误“方法参数中的未知类类型 orc”）”。为什么以及如何在 emacs lisp 中修复它？谢谢。

```
(defun randval (n)
  (1+ (random (max 1 n))))

(defstruct monster (health (randval 10)))

(defstruct (orc (:include monster)) (club-level (randval 8)))

(defmethod monster-show ((m orc))
  (princ "A wicked orc with a level ")
  (princ (orc-club-level m))
  (princ " club")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:33:05.127

问题是...... defmethod 需要它是一个类，而不是一个结构，eLisp 中的结构只是向量。也许您可以提出自己的通用调度方法，但可能只使用类而不是结构就可以解决它 - 类在 eieio.el 中实现，因此您可以查看它的内部并了解它们是如何调度的。或者你可以简单地拥有它：

```
(defun foo (monster)
  (cond
    ((eql (aref monster 0) 'cl-orc-struct) ...) ; this is an orc
    ((eql (aref mosnter 0) 'cl-elf-struct) ...) ; this is an elf
    (t (error "Not a mythological creature")))) 
```

这实际上取决于那里有多少类生物，也许你可以想出一些隐藏条件的宏，或者更确切地说根据类型标签等返回要调用的函数。

下面是制作自己的泛型的简化想法，以防万一您想坚持使用结构并且您不需要很多功能或乐于自己实现它：

```
(defvar *struct-dispatch-table* (make-hash-table))

(defun store-stuct-method (tag method definition)
  (let ((sub-hash
     (or (gethash method *struct-dispatch-table*)
         (setf (gethash method *struct-dispatch-table*)
           (make-hash-table)))))
    (setf (gethash tag sub-hash) definition)))

(defun retrieve-struct-method (tag method)
  (gethash tag (gethash method *struct-dispatch-table*)))

(defmacro define-struct-generic (tag name arguments)
  (let ((argvals (cons (caar arguments) (cdr arguments))))
    `(defun ,name ,argvals
       (funcall (retrieve-struct-method ',tag ',name) ,@argvals))))

(defmacro define-struct-method (name arguments &rest body)
  (let* ((tag (cadar arguments))
     (argvals (cons (caar arguments) (cdr arguments)))
     (generic))
    (if (fboundp name) (setq generic name)
      (setq generic 
        `(define-struct-generic 
          ,tag ,name ,arguments)))
    (store-stuct-method 
     tag name 
     `(lambda ,argvals ,@body)) generic))

(define-struct-method test-method ((a b) c d)
  (message "%s, %d" a (+ c d)))

(test-method 'b 2 3)
"b, 5" 
```

# c++ - 缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

> ID：10967375
> 
> 赞同：1
> 
> 时间：2012-06-10T08:41:11.267
> 
> 标签：c++

我有一个包含以下内容的 cpp 文件：

```
char const* types[] = { "char", "short", "int", "long", "float", "double", "void"};
std::set<std::string> ReservedWords;
ReservedWords.insert(std::begin(types),std::end(types)); 
```

这给出了一个错误`missing type specifier - int assumed. Note: C++ does not support default-int`

我读过您不能在全局范围内编写语句，这里是这种情况吗？

我不完全理解规则，想知道把这段代码放在哪里最好？（头文件，函数内部等......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:46:23.070

首先，不是C++11 `std::begin`，`std::end`所以你确定你有一个兼容的编译器并且你正在编译 C++11 支持吗？

我不相信这是*错误*。您是否包括：

```
#include <string>
#include <set>
#include <iterator> 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T08:56:53.950

```
char const* types[] = { "char", "short", "int", "long", "float", "double", "void"};
std::set<std::string> ReservedWords;
ReservedWords.insert(std::begin(types),std::end(types)); 
```

这里的前两行是声明，因为它们声明了变量（`types`和`ReservedWords`）。第三行不是声明，它只是一个表达式语句，所以它出现在函数之外是不合法的。

您可以执行以下操作：

```
char const* types[] = { "char", "short", "int", "long", "float", "double", "void"};
std::set<std::string> MakeReservedWords() {
    std::set<std::string> tmp;
    tmp.insert(std::begin(types), std::end(types));
    return tmp;
}

std::set<std::string> ReservedWords(MakeReservedWords()); 
```

鉴于您使用的是 C++11，您应该能够做到这一点：

```
std::set<std::string> ReservedWords { "char", "short", "int", "long", "float", "double", "void"}; 
```

如果您的编译器不支持 C++11 的这一部分，您将不得不接受这样的事情（正如@juanchopanza 所建议的那样）：

```
char const* types[] = { "char", "short", "int", "long", "float", "double", "void"};
std::set<std::string> ReservedWords(std::begin(types), std::end(types)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T11:16:17.027

如果您没有包含正确的文件，则会出现此错误。确保添加
`#include <string.h>`

是的，您必须从全局范围中删除此行：

```
ReservedWords.insert(std::begin(types),std::end(types)); 
```

试着把它放在主函数中。

# javascript - 拖放元素

> ID：10967376
> 
> 赞同：0
> 
> 时间：2012-06-10T08:41:19.540
> 
> 标签：javascript, jquery, jquery-ui

我正在`draggable`尝试`droppable`使用`jquery ui`. 我想触发一个

`drop event`通过`droppable plugin`拖放元素助手克隆。我怎样才能做到这一点？

您可以在此处查看示例：[查看 Codiqa（拖放）](http://www.jquerymobile.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:50:38.397

您可以使用辅助选项初始化可拖动元素，并在拖放时附加可拖动元素的克隆。

```
$(function() {
    $(".draggable").draggable({
        helper: "clone"
    });
    $("#dropzone").droppable({
        drop: function(event, ui) {
            $(this).append($(ui.draggable).clone());
        }
    });
});​ 
```

[演示](http://jsfiddle.net/bLTFa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:46:34.070

您应该考虑试一试 jQuery UI 文档（[http://jqueryui.com/demos/](http://jqueryui.com/demos/)），太棒了！

你有很多关于[draggable](http://jqueryui.com/demos/draggable/)和[droppable](http://jqueryui.com/demos/droppable/)的例子。

通过查看文档，似乎可以拖动有一个停止事件。

> 提供一个回调函数来处理作为初始化选项的停止事件。
> 
> ```
> $( ".selector" ).draggable({
>    stop: function(event, ui) { ... }
> }); 
> ```
> 
> 按类型绑定到停止事件：dragstop。
> 
> ```
> $( ".selector" ).bind( "dragstop", function(event, ui) {
>   ...
> }); 
> ```

这应该足以触发任何所需的事件。

# c++ - 函数指针 typedef 错误

> ID：10967377
> 
> 赞同：0
> 
> 时间：2012-06-10T08:41:24.983
> 
> 标签：c++, multithreading, function, function-pointers

我用 typedef 定义了我的函数指针

```
typedef void (*ThreadFunc)( void *); 
```

我的类成员方法如下所示：

```
 void start( ThreadFunc f, vector<void *> &jobs) 
```

在我的主程序中，我编写了一个函数，例如：

```
 ThreadFunc runner( void *job )
 {
  printf("->> %p\n", job);
 }; 
```

并想运行成员函数，所以我尝试了：

```
r.start( runner, jobs); 
```

编译器说：

```
main.cc:27: Fehler: ungültige Umwandlung von »void (* (*)(void*))(void*)« in »void (*)(void*)«
main.cc:27: Fehler:   Argument 1 von »void Thread::start(void (*)(void*), std::vector<void*, std::allocator<void*> >&)« wird initialisiert 
```

希望有人能帮我简短:) greetz

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:44:54.070

`runner`需要声明为返回`void`，而不是返回`ThreadFunc`匹配的签名`start`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T08:46:45.600

```
ThreadFunc runner( void *job ) 
```

实际上不是 a `ThreadFunc`，而是*返回 a 的函数`ThreadFunc`*。编译器基本上是在告诉你。

如果您将函数声明为，它应该可以工作

```
void runner( void *job ) 
```

# android - 设备方向改变时不调用 onConfigChanged()

> ID：10967378
> 
> 赞同：0
> 
> 时间：2012-06-10T08:41:27.713
> 
> 标签：android, android-orientation, android-configchanges

我在捕捉应用程序中的方向变化时遇到问题。我想防止在设备重新定向时重新启动我的应用程序表单。

我的应用程序中有 3 个活动（第三个是 FragmentActivity）。主要的用户交互是通过 FragmentActivity。

我已更改清单，以便所有活动都具有以下属性：

`android:configChanges="orientation"`

我还在`onConfigurationChanged()`所有活动中重写了该方法，并查看它是否真的被调用了，我包含了一个`Log.i()`声明，但没有报告任何内容。

我目前正在使用模拟器对此进行测试，并且当我执行 CTRL+F12 时会报告方向更改。

> I/ActivityManager（67）：配置更改：{ scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=34 uiMode=17 seq=10}

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T08:47:23.300

来自：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

`Caution: Beginning with Android 3.2 (API level 13), the "screen size" also changes when the device switches between portrait and landscape orientation. Thus, if you want to prevent runtime restarts due to orientation change when developing for API level 13 or higher (as declared by the minSdkVersion and targetSdkVersion attributes), you must include the "screenSize" value in addition to the "orientation" value. That is, you must decalare android:configChanges="orientation|screenSize". However, if your application targets API level 12 or lower, then your activity always handles this configuration change itself (this configuration change does not restart your activity, even when running on an Android 3.2 or higher device).`

# wolfram-mathematica - 在mathematica 6中处理复杂函数

> ID：10967379
> 
> 赞同：1
> 
> 时间：2012-06-10T08:41:38.687
> 
> 标签：wolfram-mathematica

如何对 arg、re 和 im 使用正确的函数，以便在 Mathematica 上获得正确的炒锅。例如输入时

```
Simplify[D[r^2 Re[e^(i t) r]^2 ,r],r>0 && t>0] 
```

一个有

```
2 r^3 Cos[t] (Cos[t]+e^(i t) Re' [e^(i t) r]) 
```

但是什么是Re'，如何避免这个不存在的功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:44:27.950

我猜你打算`e`成为`E`和`i`成为`I`。

```
expr = Simplify[r^2 Re[E^(I t) r]^2, r > 0 && t > 0]

D[expr, r] 
```

> ```
> r^4 Cos[t]^2
> 
> 4 r^3 Cos[t]^2 
> ```

# go - GO中的嵌套函数调用

> ID：10967381
> 
> 赞同：10
> 
> 时间：2012-06-10T08:42:12.303
> 
> 标签：go

假设我们要实现以下计算：

`outval / err = f3(f3(f1(inval))`

其中`f1`, `f2`,中的每一个`f3`都可能因错误而失败，此时我们停止计算并设置`err`为失败函数返回的错误。（当然嵌套可以任意长）

在像 C++/JAVA/C# 这样的语言中，它可以很容易地通过使用`f1`,`f2`并`f3`抛出异常并将计算封闭在 try-catch 块中来完成，而在像 Haskell 这样的语言中，我们可以使用 monads 来代替。

现在我正在尝试在 GO 中实现它，我能想到的唯一方法是明显的 if-else 阶梯，它相当冗长。如果我们不能嵌套调用，我没有问题，但在我看来，在代码中的每一行之后添加错误检查看起来很难看，并且会破坏流程。我想知道是否有更好的方法。

编辑：根据peterSO的评论进行编辑
下面是具体的例子和简单的实现

```
package main

import "fmt"

func f1(in int) (out int, err error) {
    return in + 1, err
}

func f2(in int) (out int, err error) {
    return in + 2, err
}

func f3(in int) (out int, err error) {
    return in + 3, err
}

func calc(in int) (out int, err error) {
    var temp1, temp2 int
    temp1, err = f1(in)
    if err != nil {
        return temp1, err
    }
    temp2, err = f2(temp1)
    if err != nil {
        return temp2, err
    }
    return f3(temp2)
}

func main() {
     inval := 0
     outval, err := calc3(inval)
     fmt.Println(inval, outval, err)
} 
```

我想说明的是，函数 calc 可能在可能失败的库函数的帮助下进行一些计算，语义是如果任何调用失败，则 calc 会将错误传播给调用者（类似于不处理异常）。在我看来， calc 的代码很难看。

对于所有库函数具有完全相同签名的这种特殊情况，我们可以使代码更好（我使用来自[http://golang.org/doc/articles/wiki/#tmp_269](http://golang.org/doc/articles/wiki/#tmp_269)的想法）

```
func saferun(f func (int) (int, error)) func (int, error) (int, error) {
    return func (in int, err error) (int, error) {
        if err != nil {
            return in, err
        }
        return f(in)
    }
} 
```

然后我们可以将 calc 重新定义为

```
func calc(in int) (out int, err error) {
    return saferun(f3)(saferun(f2)(f1(in)))
} 
```

或作为

```
func calc(in int) (out int, err error) {
    sf2 := saferun(f2)
    sf3 := saferun(f3)
    return sf3(sf2(f1(in)))
} 
```

但是如果没有泛型支持，我不确定如何将这种方法用于任何库函数集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T18:49:11.910

如果您真的希望能够做到这一点，您可以使用 compose 功能。

```
func compose(fs ...func(Value) (OutVal, error)) func(Value) (OutVal, error) {
  return func(val Value) OutVal, Error {
    sVal := val
    var err error
    for _, f := range fs {
      sval, err = f(val)
      if err != nil {
        // bail here and return the val
        return nil, err
      }
    }
    return sval, nil
  }
}

outVal, err := compose(f1, f2)(inVal) 
```

大多数时候，尽管您可能希望比这更直接，因为其他人在遇到您的代码时可能很难理解它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T02:00:57.800

首先，您习惯的 try-catch 样式的扩展版本，显然是从 jimt 的答案和 PeterSO 的答案中借用的。

```
package main

import "fmt"

// Some dummy library functions with different signatures.
// Per idiomatic Go, they return error values if they have a problem.
func f1(in string) (out int, err error) {
    return len(in), err
}

func f2(in int) (out int, err error) {
    return in + 1, err
}

func f3(in int) (out float64, err error) {
    return float64(in) + .5, err
}

func main() {
    inval := "one"

    // calc3 three is the function you want to call that does a computation
    // involving f1, f2, and f3 and returns any error that crops up.
    outval, err := calc3(inval)

    fmt.Println("inval: ", inval)
    fmt.Println("outval:", outval)
    fmt.Println("err:   ", err)
}

func calc3(in string) (out float64, err error) {
    // Ignore the following big comment and the deferred function for a moment,
    // skip to the comment on the return statement, the last line of calc3...
    defer func() {
        // After viewing what the fXp function do, this function can make
        // sense.  As a deferred function it runs whenever calc3 returns--
        // whether a panic has happened or not.
        //
        // It first calls recover.  If no panic has happened, recover returns
        // nil and calc3 is allowed to return normally.
        //
        // Otherwise it does a type assertion (the value.(type) syntax)
        // to make sure that x is of type error and to get the actual error
        // value.
        //
        // It does a tricky thing then. The deferred function, being a
        // function literal, is a closure.  Specifically, it has access to
        // calc3's return value "err" and can force calc3 to return an error.
        // A line simply saying  "err = xErr" would be enough, but we can
        // do better by annotating the error (something specific from f1,
        // f2, or f3) with the context in which it occurred (calc3).
        // It allows calc3 to return then, with this descriptive error.
        //
        // If x is somehow non-nil and yet not an error value that we are
        // expecting, we re-panic with this value, effectively passing it on
        // to allow a higer level function to catch it.
        if x := recover(); x != nil {
            if xErr, ok := x.(error); ok {
                err = fmt.Errorf("calc3 error: %v", xErr)
                return
            }
            panic(x)
        }
    }()
    // ... this is the way you want to write your code, without "breaking
    // the flow."
    return f3p(f2p(f1p(in))), nil
}

// So, notice that we wrote the computation in calc3 not with the original
// fX functions, but with fXp functions.  These are wrappers that catch
// any error and panic, removing the error from the function signature.
// Yes, you must write a wrapper for each library function you want to call.
// It's pretty easy though:
func f1p(in string) int {
    v, err := f1(in)
    if err != nil {
        panic(err)
    }
    return v
}

func f2p(in int) int {
    v, err := f2(in)
    if err != nil {
        panic(err)
    }
    return v
}

func f3p(in int) float64 {
    v, err := f3(in)
    if err != nil {
        panic(err)
    }
    return v
}
// Now that you've seen the wrappers that panic rather than returning errors,
// go back and look at the big comment in the deferred function in calc3. 
```

因此，您可能会抗议您要求更轻松，而事实并非如此。整体上没有参数，但是如果库函数都返回错误值并且你想在没有错误值的情况下链接函数调用，可用的解决方案是包装库函数，并且包装器非常薄且易于编写。唯一困难的部分是延迟函数，但它是一种您可以学习和重用的模式，而且它只有几行代码。

我不想过多地宣传这个解决方案，因为它不是经常使用的。这是一个有效的模式，并且确实有一些合适的用例。

正如 jimt 所提到的，错误处理是一个大主题。“在 Go 中进行错误处理的好方法是什么？” 对于 SO 来说，这将是一个很好的问题，除了它不符合“整本书”标准的问题。我*可以想象*一本关于 Go 错误处理主题的整本书。

相反，我将提供我的一般观察，如果你只是开始使用错误值而不是试图让它们消失，一段时间后你就会开始理解这样做的好处。当你第一次在现实世界的程序中编写它时，看起来像我们在这里使用的玩具示例中的 if 语句的详细阶梯可能仍然看起来像 if 语句的详细阶梯。但是，当您实际上需要处理这些错误时，您会回到代码并突然将其视为存根，所有这些都在等待您用真正的错误处理代码充实。您可以看到要做什么，因为导致错误的代码就在那里。您可以防止用户看到晦涩的低级错误消息，而是显示一些有意义的内容。作为程序员，你会被提示做正确的事情，而不是接受默认的事情。

要获得更全面的答案，一个很好的资源是文章[错误处理和 Go](http://golang.org/doc/articles/error_handling.html)。如果您搜索[Go-Nuts 消息](https://groups.google.com/forum/?golang-nuts#!searchin/golang-nuts/error$20handling)，那里也会对此事进行长时间的讨论。标准库中的函数相互调用相当多，（惊喜）因此标准库的源代码包含许多处理错误的示例。这些都是很好的例子，因为代码是由 Go 作者编写的，他们正在推广这种使用错误值的编程风格。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-10T09:24:13.143

错误与异常之间的讨论是一个漫长而乏味的讨论。因此，我不会深入探讨。

您的问题的最简单答案涉及 Go 的内置`defer`、`panic`和`recover`函数，如[本博客](http://blog.golang.org/2010/08/defer-panic-and-recover.html)文章中所述。它们可以提供类似于异常的行为。

```
package main

import "fmt"

func main() {
    defer func() {
        // This recovers from a panic if one occurred. 
        if x := recover(); x != nil {
            fmt.Printf("%v\n", x)
        }
    }()

    value := f(f(f(1)))
    fmt.Printf("%d\n", value)
}

func f(i int) int {
    value := i*i + 1

    // something goes wrong, panic instead of returning an error.
    panic("ohnoes")

    return value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:34:56.113

找到了关于这个主题的 go-nuts 的邮件[线程](https://groups.google.com/forum/?fromgroups#!searchin/golang-nuts/generics/golang-nuts/W3tXPy-03JA/8H-foRw-QSgJ)。添加它以供参考。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-10T13:06:28.170

没有一个具体的例子，你正在向风车倾斜。例如，根据您的定义， fn 函数返回一个值和任何错误。fn 函数是不能更改签名的包函数。使用您的示例，

```
package main

import "fmt"

func f1(in int) (out int, err error) {
    return in + 1, err
}

func f2(in int) (out int, err error) {
    return in + 2, err
}

func f3(in int) (out int, err error) {
    return in + 3, err
}

func main() {
    inval := 0
    outval, err := f3(f2(f1(inval)))
    fmt.Println(inval, outval, err)
} 
```

你将如何让你的示例编译和运行？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-21T19:53:59.337

太糟糕了，这个已经关闭了......这个：

```
value := f(f(f(1))) 
```

不是链接的例子，而是嵌套的例子。链接应该类似于：

```
c.funA().funB().funC() 
```

这是一个工作[示例](http://play.golang.org/p/zQSEGjZ_3A)。

# erlang - 如何在 Erlang 中制作可变参数的函数？

> ID：10967384
> 
> 赞同：4
> 
> 时间：2012-06-10T08:42:25.287
> 
> 标签：erlang, variadic-functions, nonlinear-optimization

我有一个算法可以在 Rn 上找到函数/n 的最小值。我有一个约束流形，它以奇异立方体图像的形式给出。将奇异立方体内部空间映射到 Rn，更重要的是反之亦然，这非常简单，可以通过将 unar 函数 from_R_to_01 应用于每个坐标来完成。

所以我想要做的是获取我的目标函数 F 的某个元数，并制作另一个具有相同元数的函数，这将是相同的 F，除了它的坐标将从 Rn 映射到约束流形 Man。因此，我可以将它提供给我的最小化算法，在 Rn 中获得一对坐标，然后将它们也映射到同一个流形以获得“真实世界”坐标。因此将非线性规划任务减少为无约束优化。

好吧，回到问题。我有这段代码适用于 2-ar 案例。

```
minn_man2(F, Man) ->
    OnRn = fun (X, Y) ->  # this is the limiting part
        OnMan = Man( from_R_to_01( X ), from_R_to_01( Y ) ),
        apply( F, OnMan )
    end,
    [X | [ Y | []]] = minn( OnRn ),
    Man( from_R_to_01( X ), from_R_to_01( Y ) ). 
```

我怎样才能使它更普遍？最困难的部分是制作一个 Fs 的匿名函数。根本不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:59:18.990

您只能通过给它们一个列表的单个参数来模拟具有可变参数的函数（匿名或非匿名）。然后你可以在它上面使用 apply/2 来评估它。

您的示例可能是（根本未经测试或优化）类似于

```
minn_man(F, Man) ->
    OnRn = fun (L) ->  
        OnMan = apply(Man, [from_R_to_01( X ) || X<-L]),
        apply( F, OnMan )
    end,
Man( [from_R_to_01( X ) || X<-minn( OnRn )). 
```

当然，Man 也应该以适当的格式返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:33:37.253

想我明白了！如果我需要为每个特定的参数明确声明 OnRn，我为什么不制作它们。

首先，我在一个“case MA of”语句中手动为 unar 和 binar Mans 编写了两个单独的声明。然后我变得懒惰并使用python为我生成了一大堆这些。然后我寻找某种 eval 来让 Erlang 在运行时生成和评估适当的声明。就在这里。奇迹般有效。

```
minn_man(F, Man) ->
    MA = proplists:get_value( arity, erlang:fun_info( Man )),
    R1 = fun (X) -> from_R_to_01(X) end,

    XiStr = string:join(["X" ++ integer_to_list(I) || I <- lists:seq(1, MA)], ", "),
    RiXiStr = string:join(["R1(X" ++ integer_to_list(I) ++ ")" || I <- lists:seq(1, MA)], ", "),
    FunStr = "fun (" ++ XiStr ++ ") -> apply( F, Man(" ++ RiXiStr ++")) end.",

    {ok, Tokens, _} = erl_scan:string(FunStr),
    {ok, [Form]} = erl_parse:parse_exprs(Tokens),
    Binding1 = erl_eval:add_binding('F', F, erl_eval:new_bindings()), 
    Binding2 = erl_eval:add_binding('Man', Man, Binding1), 
    Binding3 = erl_eval:add_binding('R1', R1, Binding2),
    {value, OnRn, _} = erl_eval:expr(Form, Binding3),

    XY = minn( OnRn ),
    apply(Man, lists:map(fun from_R_to_01/1, XY ) ). 
```

# encryption - 在 PKCS#1 OAEP 加密/解密中交换公钥/私钥

> ID：10967386
> 
> 赞同：9
> 
> 时间：2012-06-10T08:42:39.207
> 
> 标签：encryption, cryptography, rsa, public-key-encryption

我只有一些关于 RSA 的非常基本的理论知识。

在阅读有关如何在实践中使用它的不同来源时，PKCS#1 OAEP 似乎是一件好事。

对于测试实现，我使用 Python 和 PyCrypto。例如[，这](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.PKCS1_OAEP-module.html)是一个使用 PKCS#1 OAEP 的示例。

使用公钥加密然后使用私钥解密可以正常工作。例如，公众可以使用私钥向 X 人发送一些数据。

根据我对 RSA 工作原理的基本了解，我认为我可以互换公钥/私钥，即我可以使用公钥进行加密，使用私钥进行解密。例如，某人 X 可以使用自己的私钥加密某些数据，而公众可以使用公钥对其进行解密。如果解密工作正常，这可以证明数据来自 X 人。

当我尝试使用公钥解密时，PyCrypto 会抱怨。

通过阅读 PyCrypto 源代码，在`_RSAKey._decrypt`函数（[此处](https://github.com/dlitz/pycrypto/blob/master/lib/Crypto/PublicKey/_slowmath.py)）中，似乎密钥对象本身知道它是私钥还是公钥并且它们之间存在差异（令我惊讶的是，再次基于我非常基本的 RSA 理解）。

从那里，看起来我可以破解解密功能，以便它使用公钥。或者有些不同：我可以在关键对象中交换公共指数`e`和私有指数。`d`

但这一切似乎并不打算以这种方式使用/被黑客入侵。所以我想在这里问一下我的误解。

另外，出于好奇，我生成了一些键 ( `RSA.generate(2048)`) 并查看了`n`,`e`和`d`. 在所有情况下，`n`并且`d`非常巨大，而`e`在所有情况下都是*恒定*的（65537）（我没想到会这样）。

我想从这一切来看，我真的不应该只是交换`e`和`d`.

所以我想我应该使用其他方法来签名，比如 PKCS1_PSS。

* * *

如果有人感兴趣，一些用于加密/解密的代码：

```
def randomString(l):
    import random
    return ''.join(chr(random.randint(0, 0xFF)) for i in range(l))

def genkeypair():
    from Crypto.PublicKey import RSA
    key = RSA.generate(2048)
    pubkey = key.publickey().exportKey("DER")
    privkey = key.exportKey("DER")
    return (pubkey,privkey)

def encrypt(v, rsapubkey):
    from Crypto.PublicKey import RSA
    rsakey = RSA.importKey(rsapubkey)
    from Crypto.Cipher import PKCS1_OAEP
    rsa = PKCS1_OAEP.new(rsakey)
    import binstruct
    from array import array
    aeskey = randomString(32)
    iv = randomString(16)
    from Crypto.Cipher import AES
    aes = AES.new(aeskey, AES.MODE_CBC, iv)
    data = binstruct.varEncode(v)
    data += array("B", (0,) * (-len(data) % 16))
    out = binstruct.strEncode(rsa.encrypt(aeskey + iv))
    out += array("B", aes.encrypt(data))
    return out

def decrypt(stream, rsaprivkey):
    from array import array
    from StringIO import StringIO
    if isinstance(stream, array): stream = stream.tostring()
    if isinstance(stream, str): stream = StringIO(stream)
    from Crypto.PublicKey import RSA
    rsakey = RSA.importKey(rsaprivkey)
    from Crypto.Cipher import PKCS1_OAEP
    rsa = PKCS1_OAEP.new(rsakey)
    import binstruct
    aesdata = binstruct.strDecode(stream)
    aesdata = rsa.decrypt(aesdata)
    aeskey = aesdata[0:32]
    iv = aesdata[32:]
    from Crypto.Cipher import AES
    aes = AES.new(aeskey, AES.MODE_CBC, iv)
    class Stream:
        buffer = []
        def read1(self):
            if len(self.buffer) == 0:
                nextIn = stream.read(16)
                self.buffer += list(aes.decrypt(nextIn))
            return self.buffer.pop(0)
        def read(self, n):
            return "".join([self.read1() for i in range(n)])
    v = binstruct.varDecode(Stream())
    return v 
```

（[`binstruct`](https://github.com/albertz/binstruct/blob/master/binstruct.py)是一个可以编码/解码树数据结构的小模块 - 类似于 JSON/BSON。）

这就是我认为我也可以使用`encrypt`私钥和`decrypt`公钥的地方。

* * *

（希望）正确签名/身份验证的最终实现可以[在 binstruct 中](https://github.com/albertz/binstruct/blob/master/binstruct.py)找到。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T17:01:27.737

您对交换公钥和私钥角色的一般理解是正确的。最后，RSA 是基于以下事实：

```
m^(ed) congruent m (mod n) 
```

通常称为 RSA 加密的通常是操作

```
m^e mod n, 
```

将消息提升到 e 次方，其中 e 是公钥。

然后解密

```
(m^e)^d mod n, 
```

将加密消息提高到 d 次方，其中 d 是私钥。现在由于取幂规则和乘法是可交换的事实（这些仍然在模算术中成立），我们有

```
m congruent (m^e)^d congruent m^(ed) congruent m^(de) congruent (m^d)^e, 
```

因此，如果您以相反的顺序应用这些操作，您会得到相同的结果。

您假设反转导致数字签名是正确的，因为每个人都可以使用公钥 e 验证（“解密”）签名，因此只有使用相应的私钥“加密”（签名）消息才是真实的d。

事实证明，PyCrypto 只是试图防止您在这里误认为另一个，OpenSSL 或 Ruby OpenSSL 允许您同时执行[以下](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html)操作：public_encrypt/public_decrypt 和 private_encrypt/private_decrypt。

理论讲了这么多，现在为什么有充分的理由不让你互换使用它们。我刚才描述的通常被称为“教科书 RSA”，它仍然远非安全。需要注意其他事项以使结果在实践中可用。这就是为什么 PyCrypto 中有一个专用的[签名包](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Signature-module.html)的原因——这有效地完成了你所描述的事情，而且还处理了我提到的事情。虽然了解这些东西是如何工作的对我们的理解有好处，但我们应该始终在实践中使用这些包，因为它们已经犯了并修复了我们在推出自己的包时可能会引入的错误。

至于为什么 e 总是 65537。它实际上不一定是一个固定值，但通常选择它是一个非常小的数字，其二进制表示中的 1 尽可能少（65537 是 10001）。在过去，也选择了 e=3 或 e=17，但在实践中被认为不安全，因为它们可以通过简单地获取密文的第 3 或第 17 根来进行攻击。如果 e=3 且 m=3，则 3^3 为 27，并且考虑到密文为 27，无论模数 n（通常大得多）如何，都不需要天才就能算出 m 为 3。所以危险在于密文，即使在取幂之后，也不会跨越“模边界”，因此允许我们简单地取 e-th 根来得到原始消息。对于 1024 - 4096 位的典型模数，这不再是 e=65537 的问题。

二进制表示中很少有 1 也有利于快速计算 m^e。模幂运算通常使用[乘法和平方](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)算法来实现，对于带有几个 1 的小 e 的性能最好。为什么选择这种方式而不是相反，例如有一个小的 d 和几个 1？对于初学者来说，d 会更容易猜到。第二个优点是，使用数字签名，您通常对文档进行一次签名，但经常对其进行验证。这意味着 m^d 执行一次但 m^e 经常执行，因此您可以让常见任务执行得最好，而允许稀有任务执行得较差。

**编辑：**

你问我是否可以进一步解释像 RSA-PSS 这样的方案为了安全而做了什么。

在比较 OAEP 的加密功能和 PSS 的签名功能时，两者看起来非常相似。事实上，它们都在过程中引入了随机化，这使得在某些假设下可以证明[OAEP](http://cseweb.ucsd.edu/users/mihir/papers/oae.pdf)和[PSS的安全性。](http://grouper.ieee.org/groups/1363/P1363a/contributions/pss-submission.pdf)我也找到了这篇[论文](http://rsapss.hboeck.de/rsapss-1.0.1.pdf)乐于助人。与老式的 PKCS 1.5 加密和签名相比，可证明的安全性是一个很大的优势，在相同的假设下，它可以被证明是不可证明的安全性（关键点：没有确定性方案可以，随机化是必不可少的）。提议的签名和加密方案之间的一个明显区别是签名方案总是要求首先对要签名的消息进行哈希处理。这不仅在效率方面有意义，而且还可以防止一些原本可能发生的攻击。而且我想这导致了为什么我们应该始终使用签名方案进行签名和加密方案进行加密的要点：建议的方案附带安全证明，而我们的手工方案没有。

密码学家发明了这些方案，使我们这些凡人的生活变得更轻松——它们为我们提供了理想的工具，通过将选项数量减少到最低限度来避免滥用或误用。例如，即使您设法使用 RSA-OAEP 提出了一个好的签名方案，使用它的人可能不知道为什么他们应该在应用签名之前先散列他们的消息。RSA-PSS 甚至不可能发生这种滥用。

您还询问了一些好的阅读材料。虽然这是一个非常主观的话题，但我真的很喜欢这些：

实用的一面：

*   [应用密码学](https://rads.stackoverflow.com/amzn/click/com/0471117099)——仍然是经典，值得一读。一些安全人员说这很危险，因为它使人们相信他们知道的足够多，可以编写自己的加密货币。但我想我们都是成年人，不是吗？对“外面有什么”有一种感觉仍然很棒

*   [Cryptography Engineering](https://rads.stackoverflow.com/amzn/click/com/0470474246) - 有一些很好的实用建议，并且在实现加密代码时也提到了注意事项。

*   [Handbook of Applied Cryptography](http://cacr.uwaterloo.ca/hac/) - 它是免费的，并且仍然有很多好的建议，尤其是在实现方面。

理论方面：

*   [现代密码学](https://rads.stackoverflow.com/amzn/click/com/0130669431)——它是理论与实践的混合体，对实践中事情如何出错有很多洞察力。

*   [密码学 - 理论与实践](https://rads.stackoverflow.com/amzn/click/com/1584885084)- 这对我来说改变了游戏规则，我*喜欢*这本书。如果你只读过一本书，那就是这本书吧：）

*   [现代密码学简介](https://rads.stackoverflow.com/amzn/click/com/1584885513)- 在解释“现代方法”以及安全证明如何实际工作以及在哪些假设下工作方面做得很好。

*   [Foundations of Cryptography I&II](https://rads.stackoverflow.com/amzn/click/com/0521035368) - 如果在上一本书之后您仍然无法获得足够的单向函数理论和朋友，那么这就是您的书。很有技术含量。

安全不仅仅是密码学：

*   [安全工程](https://rads.stackoverflow.com/amzn/click/com/0521035368)- 有大量示例如何合理的原则在实践中会出错

*   [信息安全](https://rads.stackoverflow.com/amzn/click/com/0470626399)- 类似于安全工程，在比密码学更广泛的范围内说明安全。

除此之外，我尝试通过阅读有关新攻击、新技术等的最新论文来了解最新情况。我发现[r/netsec](http://www.reddit.com/r/netsec)非常有帮助，并且在 Twitter 上关注研究人员和从业者，他们会定期发布有趣的材料。

最后，如果您有时间，请参加 Coursera 和 Udacity 上的密码学课程！我想他们会在接下来的几周内重新开始，他们真的很棒，我相信你不会后悔的。他们有很多有趣的实践练习，很好地说明了攻击密码学实现的各种方法。

# javascript - 如何检查是否 元素被添加到页面 - jquery

> ID：10967389
> 
> 赞同：0
> 
> 时间：2012-06-10T08:43:38.610
> 
> 标签：javascript, jquery-plugins, jquery

我想使用[dotdotdot 插件](http://dotdotdot.frebsite.nl/)- 现在，我不喜欢单独创建所有链接：`$("#wrapper").dotdotdot()`. 我希望能够使用“textoverflow_dotdotdot”类来监听 div，然后自动添加链接。

像这样的东西：

```
$(document).on('DIV WAS ADDED','.textoverflow_dotdotdot', function(){
     $(this).dotdotdot();
} 
```

有任何想法吗？

信息：我正在使用 jquery 1.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:33:45.767

```
$(document).bind('ajaxSuccess', function(){
        $('.textoverflow_dotdotdot').removeClass('textoverflow_dotdotdot').addClass('dotters').change();

})

$(document).on('change','.dotters',function(){
           $(this).dotdotdot();
}); 
```

学分去 Jashwant ;-)

# iphone - 如何使滚动视图向所有方向滚动？

> ID：10967391
> 
> 赞同：-2
> 
> 时间：2012-06-10T08:43:45.250
> 
> 标签：iphone

我的问题是这样的：-

```
{       someview = [[someview1 alloc]initWithFrame:CGRectMake(0, 0, 1024, 1024)) resolution:CGSizeMake(768, 960))];

    scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0,768,960)];
            scrollView.contentSize = CGSizeMake(1024,1024);

     scrollView.bouncesZoom = YES;
        scrollView.pagingEnabled = YES;
        scrollView.backgroundColor = [UIColor blackColor];
        scrollView.showsHorizontalScrollIndicator = YES;
        scrollView.showsVerticalScrollIndicator = YES;  
        scrollView.userInteractionEnabled = YES;
        CGRect Frame=rdcview.bounds;
        scrollView.minimumZoomScale = 1.0; 
        scrollView.maximumZoomScale = 2.0;
       [scrollView setDelegate:self];

        [scrollView addSubview:someview1];
        [self.view addSubview:scrollView];
} 
```

毕竟我旋转了我的设备，但视图在所有方向上都不能滚动，请帮助我找到解决方案。

注意：--它滚动但不粘住它们，当我移开手指时它会回到以前的
位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:06:20.967

我认为你有一个错字。

改变：

```
[scrollView addSubview:someview1]; 
```

到：

```
[scrollView addSubview:someview]; 
```

# javascript - 使用 jQuery.text() 观察元素 innerHTML 的变化

> ID：10967392
> 
> 赞同：1
> 
> 时间：2012-06-10T08:43:45.550
> 
> 标签：javascript, jquery, text, bind

`a`当另一段代码调用它时，我需要从元素中删除一个类`.text('string')`。我无法编辑另一段代码：

```
function WPSetAsThumbnail(id, nonce){
    var $link = jQuery('a#wp-post-thumbnail-' + id);

    // this is where it's first called
    $link.text( setPostThumbnailL10n.saving );
    jQuery.post(ajaxurl, {
        action:"set-post-thumbnail", post_id: post_id, thumbnail_id: id, _ajax_nonce: nonce, cookie: encodeURIComponent(document.cookie)
    }, function(str){
        var win = window.dialogArguments || opener || parent || top;
        $link.text( setPostThumbnailL10n.setThumbnail );
        if ( str == '0' ) {
            alert( setPostThumbnailL10n.error );
        } else {
            jQuery('a.wp-post-thumbnail').show();
            $link.text( setPostThumbnailL10n.done );
            $link.fadeOut( 2000 );
            win.WPSetThumbnailID(id);
            win.WPSetThumbnailHTML(str);
        }
    }
    );
} 
```

非常感谢您对我的包容，即使这是一个菜鸟问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:45:10.177

两种选择：

1.  使用[突变事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)，但请注意它们已被弃用。
2.  拉动 DOM 寻找变化。

第二个选项示例：

```
var $element = $("#elementId");
var lastText = $element.text();
function checkForChanges()
{
    var currText = $element.text();
    if (currText !== lastText)
    {
        alert('xxx');
        lastText = currText;
    }
}

var id = setInterval(checkForChanges, 500); 
```

# jquery - 如何使用 jQuery 在垂直滚动站点中获取当前可见幻灯片

> ID：10967393
> 
> 赞同：3
> 
> 时间：2012-06-10T08:43:51.723
> 
> 标签：jquery, css, position, offset, vertical-scrolling

这个问题可能听起来很傻，但它让我头疼。我想做一种垂直滚动的演示，由不同的幻灯片组成；效果应该和这个网站“相似”：http: [//www.soleilnoir.net/believein/#/start](http://www.soleilnoir.net/believein/#/start)

我创建了一个包含不同幻灯片的无序列表：

```
<div id="main">
  <div id="content">
    <ul id="bg">
      <li id="slide1"> <!-- content --></li>
      <li id="slide2"> <!-- content --></li>
    <!-- and so on -->
    </ul>
  </div>
</div> 
```

我`position:fixed`在页面的中心为所有幻灯片的内容（到目前为止是图像）提供了一个，以及一个不同的 z-index 来使幻灯片和图像堆叠。就像是

```
-----  slide 1
  §§§ image 2
-----  slide 2
  §§§ image 3
----   slide 3 
```

等等

这当然只在某种意义上起作用：幻灯片在滚动时会显示下一张幻灯片，但之前的图像总是可见的，由于它们的固定位置而全部从流中删除。

所以我想给图像一个`position:absolute`（并给`position:relative`）`<li>`，但这不会让它们在页面中心“粘”在新幻灯片到达并覆盖它之前，它们当然会自然地跟随他们的父母`<li>`移动。

我对此完全不知所措，也不知如何在窗口中获取当前的可见列表。我查看了 jQuery 提供的所有内置函数：`scrollTop()`, `offset().top`, `position().top`, 我得到`$(window).height()`, `$('#container').height()`, `<li>`s 高度是固定的，等等，但我得到的只是元素的“绝对”位置（我的意思是，它不会随滚动），我不知道如何说幻灯片何时穿过屏幕，以便我可以做某事（但仍然不知道是什么）。

我确定我在这里遗漏了一些明显的东西。我研究了链接网站上的代码，虽然我几乎可以理解其中的所有内容，但我仍然无法弄清楚它是如何获得当前幻灯片的（此外，它的工作方式与我的不同，因为它会动态加载动画 gif 和只对每张幻灯片执行此操作。在我的每张幻灯片中，每张幻灯片都是一个包含不同元素、动画等的容器）。

`$('li#slide3')`例如，如果在内部视图中，我如何获得？如何解决堆叠图像问题？我是否需要将它们动态设置为“固定”，或者在每次滚动时重新计算它们的位置以便 a`position:absolute`可以做到？对于这一秒，我仍然需要将每个元素的位置与一个固定点进行比较（我相信`$(window).scrollTop()`，到目前为止，滚动时我总是为 0），但我不知道如何。

哦，我正在使用 jQuery`scroll()`方法来绑定滚动，因为我还有一个导航列表可以让您跳转到所需的幻灯片，它也说明了这一点。

我希望我清楚这一点：图像必须始终保持在中心，滚动幻灯片时需要覆盖它们，而当图像被覆盖时，以下需要出现并取代它，所以我需要了解如何获取当前`<li>`元素的位置，比如当它在窗口的一半时，并相应地设置上一个图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T09:06:47.097

这种类型的网站使用**视差效果**来移动背景图像。

考虑使用**jQuery Parallax 插件**，例如[**jparallax**](http://stephband.info/jparallax/index.html)，它可以让事情变得更容易。

但是对于**整个网页**，您可能想要转向[**jQuery Parallax Plugin**](http://www.ianlunn.co.uk/plugins/jquery-parallax/)，它有一个基于您提供的示例的演示页面。该演示页面也是一个教程！

还有[**很多网站**](http://smashinghub.com/30-awesome-parallax-scrolling-effect-in-web-design.htm)可以为您提供更多想法，通过查看网页**内部**，您可以了解他们使用的视差插件类型。

**编辑：** Firefox 浏览器中内置了一个出色的使用工具，因此您可以在**分层 3D 结构**中查看任何网页。这将有助于了解该网站如何与分层背景交互。更多关于**Firefox 3D 查看** [**这里**](https://developer.mozilla.org/en/Tools/Page_Inspector/3D_view)。

**编辑 2：**这可能有用：[如何判断 DOM 元素在当前视口中是否可见？](https://stackoverflow.com/q/123999/1195891)

此外，对于您提供的网站示例，可以在他们的[**style.css**](http://www.soleilnoir.net/believein/css/style.css)文件中看到他们用来**将图像滚动到视图后在视口中居中的方法。**当然他们有 jQuery 修改这些元素，但样式确实有意义：[](http://www.soleilnoir.net/believein/css/style.css)

 **```
#main ul.bg li img.gif { position: absolute; z-index: 1; width: 996px; height: 800px; left: 50%; right: 50%; top: 50%; bottom: 50%; margin: -400px -498px; } 
```

* * *

**编辑 3：**这是一个**jQuery Parallax 插件**，它与您的链接示例执行相同的操作，并且具有非常强大的 API。这个特定的插件具有自定义偏移的每层定位。

这是一个使用该插件的[**网站**](http://www.ws-interactive.fr/methode/)，其中的东西在屏幕中央排列。
这个其他[**网站**](http://magiccitysweeps.starz.com/)显示此插件在选择任何要与之交互的层时没有问题。

该插件名为**Stellar.js**，gitHub 页面位于[**此处**](https://github.com/markdalgleish/stellar.js)。如果您访问那里[**的主页**](http://markdalgleish.com/projects/stellar.js/)，它会水平滚动...注意**星星中的“** **EASY** ”一词，这是一种与浏览器视口边缘对齐的视差效果。当您滚动时，其他**星星**会在*一般区域*自动滚动以显示其他关键字。

 ****** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T09:14:50.350

我看 HTML 演变，div#container 有很大的高度（li 的数量 * li 高度），li 有 display:none/block、overflow:hidden 和 0 到窗口高度之间的高度。*******

# python - 除法后得到所有小数位

> ID：10967394
> 
> 赞同：1
> 
> 时间：2012-06-10T08:44:11.060
> 
> 标签：python, floating-point, division

我必须用`1/50000`. 当我做

```
float(1/50000) 
```

在 python 中它只返回我`0.0`。如何在 python 中获得 powers 的实际值？我想得到`2.5*10^(-5)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:46:08.387

```
In [2]: 1.0/50000
Out[2]: 2e-05 
```

注意`.0`. 它确保`1.0`是浮点文字而不是整数文字。

另一种写法如下：

```
In [3]: float(1)/50000
Out[3]: 2e-05 
```

您现在拥有的首先使用整数除法来计算`1/50000`. 此除法的结果是整数`0`，然后将其转换为浮点值 ( `0.0`)。

最后，请注意，您当前的代码将在 Python 3 中正常运行（并且`float()`是多余的）。这是由于[PEP 238](http://www.python.org/dev/peps/pep-0238/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T08:48:30.887

使用 python 3.x

```
>>> 1/50000
2e-05 
```

或在 python 2.x 上

```
>>> from __future__ import division 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T08:46:43.463

使用`1.0/50000`或`float(1)/50000`。你这样做的方式，当你转换为浮点数时，除法已经完成，获得额外的准确性为时已晚。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T08:46:53.633

输入参数必须是浮点数才能划分为浮点数：

```
float(1) / float(50000) 
```

或者

```
1./50000 
```

十进制将 1 转换为浮点数。如果输入值之一是浮点数，则除法运算也将变为浮点数。

您所做的是将整数除以得到 0，然后将 0 转换为浮点数作为“0.0”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-10T08:51:38.277

只需将其中一个参数转换为**float**：

```
>>> 1 / float(50000)
2e-05 
```

# xml - XML 和 XSLT 应用模板选择

> ID：10967401
> 
> 赞同：0
> 
> 时间：2012-06-10T08:45:03.633
> 
> 标签：xml, select, formatting, xslt-1.0, apply-templates

这是 XML 文件：

```
<?xml version="1.0"?> 
<?xml-stylesheet type="text/xsl" href="2.xsl" ?>

<root>
    <shop>
        <person> 
            <employee> 
                <name> Alexis </name> 
                <role> Manager </role> 
                <task> Sales </task> 
            </employee> 

            <employee>
                <name> Employee2 </name>
            </employee>
        </person>

        <employee>
            <name> Blake2 </name>
        </employee>

    </shop>

    <person> 
        <employee2>
            <role2> Supervisor </role2> 
            <name2> Blake </name2> 
            <task2> Control </task2> 
        </employee2>
    </person>
</root> 
```

这是 XSLT 文件：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="root"> 
<html><head></head> 
<body>
Start of root in XSLT <p/> <xsl:apply-templates select="person" /> <p/>

End of root in XSLT

</body> 
</html> 
</xsl:template> 

<xsl:template match="shop">
"Step 1 start"
<xsl:apply-templates select="*/*"/>
"Step 1 done" <p/>
</xsl:template> 

<xsl:template match="employee"> 
<u> <xsl:apply-templates select="name"/> </u> 
(Task: <xsl:apply-templates select="task"/>) 
<br></br> 
</xsl:template> 

</xsl:stylesheet> 
```

输出是：

> XSLT 中 root 的开始
> 
> 监督布莱克控制
> 
> XSLT 中根的结尾

我的问题是，为什么 Alexis 和 Employee2 不是输出的一部分？他们都在`<person>`元素之下......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:53:36.443

但你不想要*任何*人吗？如果你这样做但不知道怎么说，只需稍微斜线一下，比如`<xsl:apply-templates select="//person" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:02:45.930

`<xsl:template match="root">`应用于`<root>`元素。在那里，`<xsl:apply-templates select="person" />`选择作为`<person>`当前节点的直接子节点的元素（根元素`<root>`）。由于没有为`<person>`自身定义模板，因此执行 XSLT 的默认行为，这意味着只复制文本节点。

其他模板根本不执行，因为根级别没有`<shop>`or`<employee>`元素（相对于文档本身），并且模板也不是通过调用`<apply-templates>`的。

为了更明确地回答您的问题，第一个`<person>`元素不会被选中，因为它嵌套在另一个元素中，但您的`<apply-templates>`指令仅选择`<person>`在当前节点中直接可见的元素。

# c# - 在 .NET 中关闭数据库链接，ORA-02080

> ID：10967403
> 
> 赞同：1
> 
> 时间：2012-06-10T08:45:35.330
> 
> 标签：c#, .net, oracle, odp.net

我有一些代码使用完成后需要关闭的数据库链接。我打电话`DBMS_SESSION.Close_database_link`，但它给了我错误，ORA-02080，即使链接不再使用。

当我在 SQL*Plus 中尝试它时，它运行良好并在我运行`COMMIT`. 但是在 .Net 中，即使我运行 commit 它也不会关闭。

```
using (var con = new Oracle.DataAccess.Client.OracleConnection(@"Data Source=firefly8;User Id=USER;Password=PWD;Pooling=false;"))
            {
                con.Open();
                var c = con.CreateCommand();
                c.CommandText = "select a from tnoam@link_2";
                using (var r = c.ExecuteReader())
                {
                    r.Read();
                }
                c.Dispose();

                var c2 = con.CreateCommand();
                c2.CommandText = "begin commit; dbms_session.close_database_link ('link_2');end;";

                c2.ExecuteNonQuery();
            } 
```

我很坚持这个。请帮忙

根据@Ben 的评论，我尝试了以下方法，但效果不佳：

```
 using (var con = new Oracle.DataAccess.Client.OracleConnection(@"Data Source=firefly8;User Id=MILK_NEW;Password=MILK_NEW;Pooling=false;"))
{
    con.Open();
    var t = con.BeginTransaction();
    var c = con.CreateCommand();
    c.Transaction = t;
    c.CommandText = "select a from tnoam@link_2";
    using (var r = c.ExecuteReader())
    {
        r.Read();
    }
    t.Commit();
    c.Dispose();

    var c2 = con.CreateCommand();
    c2.CommandText = "begin commit; dbms_session.close_database_link ('link_2');end;";

    c2.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:25:44.890

感谢[@Luke](https://stackoverflow.com/questions/10967403/closing-a-database-link-in-net-ora-02080#comment14322545_10967403)，我上路并找到了解决方案。

似乎默认情况下，Oracle 会缓存游标并使其保持打开状态。如果游标打开，则无法关闭数据库链接。

连接字符串中控制游标缓存的标志是：

```
Statement Cache Size 
```

可以通过调用[OracleConnection类](http://docs.Oracle.com/html/B28089_01/OracleConnectionClass.htm)`PurgeStatementCache`的缓存方法手动清除缓存

# macos - 共享互联网连接上的流量整形

> ID：10967404
> 
> 赞同：1
> 
> 时间：2012-06-10T08:45:42.723
> 
> 标签：macos, networking, osx-lion, ipfw

我正在运行 OS X Lion，并且正在尝试通过与 Android 设备的共享互联网连接来模拟低带宽连接（如 3G、EDGE 等）。

在 android 设备上运行的应用程序直接使用本地 IP 相互通信。

我尝试设置一些 IPFW 规则，但它只限制了与 Internet 的连接，而不是两个设备之间的连接。

当两台设备都连接到我的 MacBook 上的共享互联网连接时，如何限制它们之间的直接连接？

谢谢。

# python - 使用 Python Selenium 保存网页

> ID：10967408
> 
> 赞同：11
> 
> 时间：2012-06-10T08:46:03.727
> 
> 标签：python, selenium

我正在为 Python 2.7 使用 selenium webdriver：

1.  启动浏览器：`browser = webdriver.Firefox()`.

2.  转到某个网址：`browser.get('http://www.google.com')`。

此时，如何向浏览器发送“另存为”命令？

注意：这不是我感兴趣的网页源。我想使用实际的“将页面另存为”Firefox 命令保存页面，这与保存网页源产生的结果不同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T15:56:17.357

不幸的是，你不能用 Selenium 做你想做的事情。您可以使用 page_source 来获取 html，但这就是您所能得到的。

不幸的是，当您保存为时，Selenium 无法与提供给您的 Dialog 交互。

您可以执行以下操作来启动对话框，但随后您将需要 AutoIT 之类的东西来完成它

```
from selenium.webdriver.common.action_chains import ActionChains

saveas = ActionChains(driver).key_down(Keys.CONTROL)\
         .send_keys('s').key_up(Keys.CONTROL)
saveas.perform() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-09T02:34:44.910

我有一个类似的问题，最近解决了：

@AutomatedTester 给出了一个不错的答案，但他的答案并没有完全解决问题，您仍然需要自己再按一次 Enter 才能完成工作。

因此，我们需要 Python 为我们再按一次 Enter。

在以下线程中关注@NoctisSkytower 的回答：

[Python模拟keydown](https://stackoverflow.com/questions/11906925/python-simulate-keydown)

复制他的类定义，然后将以下内容添加到@AutomatedTester 的答案中：

```
SendInput(Keyboard(VK_RETURN))
time.sleep(0.2)
SendInput(Keyboard(VK_RETURN, KEYEVENTF_KEYUP)) 
```

您可能还想查看以下链接：

[selenium web 驱动程序如何知道新窗口何时打开然后恢复执行](https://stackoverflow.com/questions/9188343/how-can-selenium-web-driver-get-to-know-when-the-new-window-has-opened-and-then)

你可能会遇到弹出窗口，这个线程会告诉你想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T14:49:22.223

如果您使用的是 Linux，则可以使用`xte`它。安装

```
sudo apt-get install xautomation 
```

第一的。

## 例子

```
from subprocess import Popen, PIPE

save_sequence = """keydown Control_L
key S
keyup Control_L
"""

def keypress(sequence):
    p = Popen(['xte'], stdin=PIPE)
    p.communicate(input=sequence)

keypress(save_sequence) 
```

# foursquare - 如何根据对象获取foursquare用户的个人资料图片

> ID：10967413
> 
> 赞同：1
> 
> 时间：2012-06-10T08:46:37.003
> 
> 标签：foursquare

api文档中存在一些矛盾：

在一个位置： [https ://developer.foursquare.com/docs/responses/user](https://developer.foursquare.com/docs/responses/user)

![照片应包含](../Images/fc0a17f51b1140172ce9dd65bc22bca8.png)

在另一个位置，尝试一下： [https ://developer.foursquare.com/docs/explore#req=users/self](https://developer.foursquare.com/docs/explore#req=users/self)

![照片是一个对象，有两个部分](../Images/3cd59fdad9a85058b45d64ff3ead49fd.png)

[https://irs3.4sqi.net/img/user/HBVX4T2WQOGG20FE.png](https://irs3.4sqi.net/img/user/HBVX4T2WQOGG20FE.png)返回内部错误。

如何获取用户的个人资料图片？

几天前，端点返回了一个带有个人资料图片的字符串，现在它已经改变了，但我找不到任何文档。

编辑：

还尝试在前缀和后缀之间添加我的 consumer_key，例如：

[https://irs3.4sqi.net/img/user/CONSUMER_KEY/HBVX4T2WQOGG20FE.png](https://irs3.4sqi.net/img/user/CONSUMER_KEY/HBVX4T2WQOGG20FE.png)

还给出了内部错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:21:50.013

这是 Foursquare 在 6 月 9 日对 API 所做的更改的一部分。请注意，来自foursquare 的AK 宣布他们将进行大量更改，其中一些未在未来完全记录，请在此处查看他的帖子：[https ://groups.google.com/forum/#!topic/foursquare-api/ MpNpdO5zARU](https://groups.google.com/forum/#!topic/foursquare-api/MpNpdO5zARU)

要解决此问题，请将“v”降低到 20120609 之前，使用 20120608 即可。它为您的用户返回以下 URL：[https](https://is0.4sqi.net/userpix_thumbs/HBVX4T2WQOGG20FE.png) ://is0.4sqi.net/userpix_thumbs/HBVX4T2WQOGG20FE.png :)

另一种修复方法是使用 [prefix]/original/[suffix] 然后您可以使用较新的版本 (>20120609)

# php - 读取外部 XML 文件

> ID：10967415
> 
> 赞同：3
> 
> 时间：2012-06-10T08:46:44.013
> 
> 标签：php, xml

我需要使用外部 XML 文件，我尝试了不同的方法来读取文件，但无法达到我想要的。

我用了`DOMDocument` `simplexml_load_file`

```
<?

$xml = simplexml_load_file("http://www.isecur1ty.org/InternetThreat/ThreatLevel.xml");

echo $xml->getName() . "<br />";

foreach($xml->children() as $child)
{
    echo $child->getName() . ": " . $child . "<br />";
}

?> 
```

但不能让它和我一起工作！

这是 XML 文件：

```
<iS-InternetThreat>
    <level>
        <current>2</current>
        <previous>2</previous>
        <status>same</status>
        <date>09-06-2012</date>
    </level>
    <version>2.5</version>
</iS-InternetThreat> 
```

如您所见，有多个级别。我需要获取每个属性的值（主要在“级别”下），获取版本也可以。

有人可以告诉我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T08:50:22.163

像这样访问它们：

```
<?php
    $xml = simplexml_load_file("http://www.isecur1ty.org/InternetThreat/ThreatLevel.xml");
    echo $xml->level->date;
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T08:50:26.510

好的，明白了：D

这是解决方案，希望任何人都可以发现它有用。

```
<?

    $file = 'http://www.isecur1ty.org/InternetThreat/ThreatLevel.xml';
    if(!$xml = simplexml_load_file($file))
        exit('Failed to open '.$file);
    print_r($xml);  echo "<br />";
    echo "Current Level : " . $xml->level->current . "<br />" .
        "Previous Level : " . $xml->level->previous . "<br />" . 
        "Status : " . $xml->level->status . "<br />" . 
        "Date : " . $xml->level->date . "<br />" . 
        "Version : " . $xml->version . "<br />"

?> 
```

# android - Android , HTC WIdget 动画

> ID：10967418
> 
> 赞同：0
> 
> 时间：2012-06-10T08:46:54.443
> 
> 标签：android, widget

怎么可能在 HTC 天气小部件中的小部件上制作动画？做这样的动画的方法是什么？

由于应用程序小部件的功能有限，我们如何实现这些？

请提出您的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:59:02.920

您可以使用 gif 来实现动画。这个参考[android API](http://developer.android.com/reference/android/graphics/Movie.html)你也可以参考Android的[帧动画](http://developer.android.com/guide/topics/graphics/2d-graphics.html#frame-animation)指南

# c# - 如果为 null，则用于设置为新实例的 C# 扩展方法

> ID：10967421
> 
> 赞同：4
> 
> 时间：2012-06-10T08:47:20.687
> 
> 标签：c#, extension-methods

我有以下扩展方法来帮助我检查和实例化对象是否为空。前两个工作得很好，但它们不是很有用。

```
 public static bool IsNull<T>(this T t)
    {
        return ReferenceEquals(t, null);
    }

    public static T NewIfNull<T>(this T t, Func<T> createNew)
    {
        if (t.IsNull<T>())
        {
            return createNew();
        }

        return t;
    }

    public static void Ensure<T>(this T t, Func<T> createNew)
    {
        t = t.NewIfNull<T>(createNew);
    } 
```

最终我想做类似的事情

```
IList<string> foo;
...
foo.Ensure<IList<string>>(() => new List<string>()); 
```

然而， Ensure 方法并没有达到预期的效果，即设置`foo`为`List<string>`if 它为 null 的实例，否则基本上将其设置为自身。

如果您现在知道我可以调整 Ensure 方法来实现这一点，我将不胜感激。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T08:53:37.627

您需要区分*对象*和*变量*。一个对象永远不能为空——一个变量的值可以是。您不是在尝试更改对象的某些内容（这*会*起作用）-您是在尝试更改调用者变量的值。

但是，默认情况下，参数是按值传递的，这意味着您的扩展方法会更改*参数*（方法中声明的变量），但这对*调用者的*变量没有影响。通常您可以更改参数以`ref`实现按引用传递语义，但扩展方法不能有一个`ref`或`out`第一个参数。

正如其他人所说，使用[空合并运算符 (??)](http://msdn.microsoft.com/en-us/library/ms173224.aspx)是一个更好的选择。请注意，在此表达式中：

```
foo = foo ?? new List<string>(); 
```

除非为空，否则*不会*构造新列表。`foo`的右手操作数`??`不会被评估，除非它需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T08:51:21.997

所以你试图复制[空合并](http://msdn.microsoft.com/en-us/library/ms173224.aspx)运算符？

```
foo = foo ?? new List<string>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T08:51:44.403

您的`Ensure`方法不起作用，因为您只是设置了一个局部引用变量 ( `t`) 但*没有返回它*。如果`Ensure`返回`t`，你可以这样做：

```
var list2 = list1.Ensure<List<string>>(); 
```

但是，您不需要它，因为您可以使用 ?? 操作员：

```
var list2 = list1 ?? new List<string>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T10:41:55.850

您的`Ensure`方法没有做任何事情，因为当不是（或）参数时，为参数分配新内容`t`不会改变调用者的任何内容。相反，说`t``ref``out`

```
IList<string> foo;
...
foo = foo.NewIfNull(() => new List<string>()); 
```

可能会奏效，但正如其他人所说，这不是最漂亮的方式。

# visual-studio-2010 - Visual Studio 2010 - 安装项目：如何在一个文件中压缩“setup.exe”和“application.msi”

> ID：10967424
> 
> 赞同：2
> 
> 时间：2012-06-10T08:47:24.740
> 
> 标签：visual-studio-2010, windows-installer, setup-project

我有一个 Visual Studio 2010 安装项目，我想将两个输出文件（setup.exe 和 application.msi）压缩到一个文件中，启动后它会从“Temp”文件夹中提取并运行。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:53:27.440

Setup.exe 通常用于在运行安装之前进行特殊处理，例如检查操作系统的位数或语言。如果不进行特殊处理，则分发 MSI 文件就足够了。Windows 具有用于运行 MSI 文件的 MSIEXEC.EXE 可执行文件。

但是，如果您确实希望合并文件，您可以使用 IExpress 程序 - [http://www.itscodingtime.com/post/Combine-Setup-MSI-and-EXE-into-a-single-package-with- IExpress.aspx](http://www.itscodingtime.com/post/Combine-Setup-MSI-and-EXE-into-a-single-package-with-IExpress.aspx)

# clojure - Clojure：Webbit + Ring

> ID：10967426
> 
> 赞同：5
> 
> 时间：2012-06-10T08:48:02.680
> 
> 标签：clojure, websocket, compojure, ring

## 语境

我刚刚得到[http://blog.jayfields.com/2011/02/clojure-web-socket-introduction.html](http://blog.jayfields.com/2011/02/clojure-web-socket-introduction.html)工作。

我也有 ring + compojure 工作。

## 问题：

我想使用 ring ... 以某种方式 ... 与 webbit 这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T10:59:37.600

Ring 通过适配器与 Web 服务器一起工作。最常见的情况是人们想要使用 jetty，所以 Ring 附带了[一个 jetty 适配器](https://github.com/mmcgrana/ring/blob/master/ring-jetty-adapter/src/ring/adapter/jetty.clj)。

为了在 webbit 中使用 ring，您需要为它编写一个适配器。不幸的是，似乎没有任何公共 webbit 适配器已经存在，所以你可能不得不自己动手。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:09:38.840

[Ring 只定义了请求-响应周期，在 Ring SPEC](https://github.com/ring-clojure/ring/blob/master/SPEC)中没有推送。您可以编写 webbit 环适配器，但它只允许您对浏览器中发生的事件做出反应，而无法从服务器端通知浏览器。但是，您仍然可以直接通过 webbit api 进行操作，而不是通过 ring 中间件。

[您可以在aleph](https://github.com/ztellman/aleph/)页面上阅读相同的内容：

> Aleph 符合 Ring 描述的接口，有一个小区别：请求和响应是解耦的。

# log4j - log4j 禁用基于大小的滚动创建文件

> ID：10967429
> 
> 赞同：1
> 
> 时间：2012-06-10T08:49:06.197
> 
> 标签：log4j

我试图找到一个现成的 jar/类，它让我可以选择根据文件大小启用 log4j 无休止地写入文件，我的意思是：将 log4j 配置为： 1\. 写入日志文件，直到文件大小为 10 兆 2 .当文件达到10兆时，它将被重命名为“file_”+当前日期后缀，就是这样。3.开始新的日志文件转到1

每次文件达到 10240KB 时，它将文件 engine.log 重命名为 engine_1.log
，然后当 main engine.log 再次达到 10240KB 时，将 engine_1.log
重命名为 engine_2.log， engine.log 重命名为
engine_1.log 等等on ..
这是我喜欢避免的动作！
例如它引起的问题：
所以如果我查看engine_1.log中的内容，10分钟后同一文件中的内容将被更改

我只想简单地写入日志而不每次都重命名文件。我希望我说清楚了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T09:14:27.810

使用标准 Log4j 库无法实现这一点，但它在[Log4j Extras Companion](http://logging.apache.org/log4j/companions/extras/)库中实现，这是一个单独的 JAR 文件，可以[从此处](http://logging.apache.org/log4j/companions/extras/download.html)下载。

标准`RollingFileAppender`基于日志文件大小执行日志轮换（或滚动）。如果日志文件达到指定的大小限制，则会启动一个新的日志文件，并将旧的日志文件重命名为具有`_1`后缀。现有存档日志也将使用`_2`、`_3`等后缀进行轮换。

您需要覆盖此默认日志文件命名策略，以使用存档日志文件名中的当前日期而不是计数器。这可以使用`TimeBasedRollingPolicy`过滤器进行配置（[这里是文档](http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/rolling/TimeBasedRollingPolicy.html)）。

修改您的 Log4J 配置文件 ( *log4j.xml* )：

```
<appender name="FILE" class="org.apache.log4j.rolling.RollingFileAppender"> 
    <param name="Threshold" value="DEBUG"/>   
    <param name="File" value="engine.log"/>
    <param name="Append" value="true"/>
    <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
        <param name="FileNamePattern" value="engine_%d.log" />
    </rollingPolicy>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} %t %-5p [%c{1}] %m%n "/>
    </layout>
</appender> 
```

我从[官方 Log4J wiki](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)中获取了这个示例配置（请参阅页面底部的*过滤器配置*和*更多示例部分）。*

**更新：**

extras 库中的`RollingFileAppender`类没有像旧的那样设置最大日志文件大小的适当属性`RollingFileAppender`。可以使用*触发策略*指定此属性，在这种情况下`SizeBasedTriggeringPolicy`应该使用（文档[在此处](http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/rolling/SizeBasedTriggeringPolicy.html)）。触发策略的配置与滚动策略相同（我只展示相关部分）：

```
<appender ...>
    ...
    <triggeringPolicy class="org.apache.log4j.rolling.SizeBasedTriggeringPolicy">
        <param name="MaxFileSize" value="10000000" />
    </triggeringPolicy>
    ...
</appender> 
```

# javascript - 在滑块的值上显示动画效果

> ID：10967431
> 
> 赞同：1
> 
> 时间：2012-06-10T08:49:35.207
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-ui-slider

我正在使用 jQuery UI 滑块。如果我单击任何滑块范围，有什么方法可以显示当前动画滑块值？

目前，滑块值不会在滑块“滑动”时设置动画，前提是滑块的`animate: true;`

* * *

**例如：**

*   滑块起始值：0。
*   我点击了滑块范围：20。
*   最终滑块值：20。

* * *

它只是从 0 变为 20，而不是 0->1->2->3->4->5->6 ... ->19->20。（改变值的动画效果）。这类似于此网络的滑块：[Slider Example](http://westciv.com/tools/gradients/)。任何人都可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:53:52.707

我认为您希望**滑块按钮在****滑块栏**的不同部分之间移动，并在网页上看到**数字更新。**

这个[**jsFiddle**](http://jsfiddle.net/wkQ8y/)可以做到这一点，并在单击预设值时自动为 Button 设置动画。

**编辑：根据您最近通过澄清示例的要求，这是一种更好的方法，可以***使用**已知**值*实现相同的目标......无需使用昂贵的计算`JavaScript Math.ceil()`。

[新的 jsFiddle](http://jsfiddle.net/wkQ8y/8/)

好处是已知**百分比**以**浮点值**的形式提供，这可能会影响其使用方式或滑块顶部/底部是否有**标记/热点。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:08:38.650

[在动画滑块值上](http://jsfiddle.net/wkQ8y/6/)检查我的解决方案。归功于@arttronics，因为我在他的[jsFiddle](http://jsfiddle.net/wkQ8y/)之上更新了我的解决方案。:)

尝试单击滑块以查看动画值。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T21:10:48.917

我相信您只需要将动画属性添加到滑块。例如：

```
 $( "#slider-range-max" ).slider({
        range: "max",
        min: 1,
        max: 100,
        value: 1,
        animate: true,
        slide: function( event, ui ) {              
             $('#amount').val(ui.value);                 
         }

}); 
```

这是 jquery UI 滑块示例：

[http://jqueryui.com/demos/slider/#multiple-vertical](http://jqueryui.com/demos/slider/#multiple-vertical)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T08:53:45.690

如果您指的是 jQuery UI 滑块，请尝试：

```
$('div#foo')
    .slider({
        animate: true,
        slide: function(event, ui) {
           $('div#bar').text(ui.value);         
        }
    }); 
```

## 编辑

当我需要显示增加和减少数字的动画效果时，我在网络上的某个地方找到了这段代码（不记得该归功于谁）：

```
var num_holder = $('#foo');
        $({ someValue: 0 }).animate({
            someValue: 100
        }, {
            duration: 1000,
            easing:'swing',
            step: function() {
                num_holder.text(Math.ceil(this.someValue))
            }
        }); 
```

[http://jsfiddle.net/cVndp/](http://jsfiddle.net/cVndp/)

这是完全未经测试的，但也许它会起作用：

```
$('div#foo')
    .slider({
        animate: true,
        slide: function(event, ui) {

            $({ someValue: 0 }).animate({
                someValue: ui.value
            }, {
                duration: 1000,
                easing:'swing',
                step: function() {
                    $('div#bar').text(Math.ceil(this.someValue))
                }
            });

        }
    }); 
```

您可能必须将`someValue`0 更改为之前位置的值。并且还可以根据拉动滑块的方式改变动画的方向，但这是一个起点。

# sencha-touch - 如何正确使用 Sencha NavigationView、深度链接和浏览器历史记录

> ID：10967432
> 
> 赞同：6
> 
> 时间：2012-06-10T08:49:43.677
> 
> 标签：sencha-touch, extjs, sencha-touch-2, browser-history, deep-linking

我使用 NavigationView 作为根面板。我试图完成的事情是在用户深入我的应用程序时将视图推送到我的根面板上，并在用户返回时弹出它们。

这是一个显示我的问题的简单示例：我有一种显示一些条目详细信息的视图。

```
Ext.define('MyApp.view.EntryDetails', {
    extend: 'Ext.Panel',
    xtype: 'entrydetails',

    config: {
        tpl: '<div>{id}</div>'
    }   
}); 
```

我还有一个控制器配置为监听以下路由：“entry/:id”，并在此路由匹配时将新的 entrydetails 视图推送到导航堆栈（NavigationView）。

```
Ext.define('MyApp.controller.EntryDetails', {
    extend: 'Ext.app.Controller',
    config: {
        routes: {
            'entry/:id': 'showEntry'
        },
        refs: {
            navview: 'mynavigationview'
        },
    },

    showEntry: function(id){
        this.getMain().push({
            xtype: 'entrydetails',
            data: {id:id}
        });
    }
}); 
```

好的，这工作正常。现在让我们首先假设我导航到：index.html#entry/1。正如我想要的那样，这会将一个新视图推送到堆栈上。然后我单击另一个链接 index.html#entry/2。另一个视图被压入堆栈，这也是预期的行为。现在，当我单击浏览器后退按钮时，问题出现了。这会将 url 更改为 index.html#entry/1 并将另一个视图推送到我的堆栈中。我想弹出一个视图而不是添加另一个视图。如果我按下工具栏的后退按钮，视图会按照我的意愿弹出，但浏览器的后退按钮并非如此。

我明白为什么会发生这种情况：Sencha 触摸框架不知道 url 的变化是由于我按下了与以前的浏览器历史 url 相同的 url 的另一个链接，还是我按下了浏览器上的后退按钮。我的所有代码都知道，当它看到 url 更改为“entry/:id”时，应该将另一个视图推送到堆栈上。

解决此问题的最佳方法是什么。如何检测到浏览器的后退按钮被按下并从我的导航视图中弹出一个视图。

我曾想过检查更改后的 url 是否与导航堆栈上的视图类似，但我不确定这是否是这样做的方法。

感谢您就该主题提供任何帮助/讨论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:30:22.940

我对 NestedList 组件有类似的问题。我最终做的是覆盖 onBackTap，取消它，然后重定向到适当的 URL。我猜也有一些方法可以将此技术应用于 NavigationView。我不知道这是否真的是正确的方法，但这是我可以让硬件和软件后退按钮很好地协同工作的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:14:19.013

您可以将这些行添加到导航视图定义中，

```
initialize: function () {
    this.getNavigationBar().on({
        back: this.onBackButtonTap,
        scope: this
    });
},
onBackButtonTap: function () {
    this.pop();
    this.fireEvent('back', this);
    history.back();
} 
```

# android - PagerAdapter 与 FragmentStatePagerAdapter

> ID：10967435
> 
> 赞同：0
> 
> 时间：2012-06-10T08:50:16.843
> 
> 标签：android, android-viewpager

[我从http://files.mail.ru/EZU6G4](http://files.mail.ru/EZU6G4)下载了一个示例 ViewPager 项目，并针对我的测试应用对其进行了修改。我下载的项目使用 FragmentStatePagerAdapter 作为主要活动 java 文件中 mViewPager.setAdapter(mFragmentsAdapter) 中的参数，并且工作正常。

但是，我在我的应用程序中使用了相同的 mViewPager.setAdapter 代码，但是“setAdapter”部分是红线的，并且我收到以下消息。

“ViewPager 类型中的方法 setAdapter(PagerAdapter) 不适用于参数 (MyFragmentStatePagerAdapter)”

我很惊讶相同的代码在一个项目中有效，但在另一个项目中无效。请帮我找出原因。

供您参考，下面是两个项目都使用的 ViewPager.java 文件中的 setAdapter 方法定义。

```
public void setAdapter(PagerAdapter adapter) {
    if (mAdapter != null) {
        mAdapter.setDataSetObserver(null);
        mAdapter.startUpdate(this);
        for (int i = 0; i < mItems.size(); i++) {
            final ItemInfo ii = mItems.get(i);
            mAdapter.destroyItem(this, ii.position, ii.object);
        }
        mAdapter.finishUpdate(this);
        mItems.clear();
        removeAllViews();
        mCurItem = 0;
        scrollTo(0, 0);
    }

    mAdapter = adapter;

    if (mAdapter != null) {
        if (mObserver == null) {
            mObserver = new DataSetObserver();
        }
        mAdapter.setDataSetObserver(mObserver);
        mPopulatePending = false;
        if (mRestoredCurItem >= 0) {
            mAdapter.restoreState(mRestoredAdapterState, mRestoredClassLoader);
            setCurrentItemInternal(mRestoredCurItem, false, true);
            mRestoredCurItem = -1;
            mRestoredAdapterState = null;
            mRestoredClassLoader = null;
        } else {
            populate();
        }
    } 
```

ViewPagerActivity.java

```
public class ViewPagerActivity extends FragmentActivity {

public static final String TAG = "ViewPagerActivity";
private MyFragmentStatePagerAdapter mFragmentsAdapter ;
private ViewPager mViewPager ;

@Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.main);

            mFragmentsAdapter = new MyFragmentStatePagerAdapter(getSupportFragmentManager());
            mViewPager = (ViewPager) findViewById(R.id.myfivepanelpager);

            mViewPager.setAdapter(mFragmentsAdapter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:18:58.227

这可能与 Android 支持库有关。如果您正在使用它，请确保使用`Fragment`支持库中的类而不是标准的 Android 发行版。

# ios - 如何判断用户是否按下或完成？

> ID：10967440
> 
> 赞同：1
> 
> 时间：2012-06-10T08:50:36.073
> 
> 标签：ios

我有一个“创建新事件”页面，用户可以在其中单击 UINavigationController 上的“返回”或“完成”来创建新事件。之后两者都指向同一页面。

如果我的用户按下“完成”，则保存在控制器中的当前对象将通过 saveChanges 保存。但是，如果用户决定放弃这个，即使他/她正在编辑，我需要清理这个用户在这个事件的生命周期内生成的静态文件。

我唯一的问题是我无法区分用户按“完成”或“取消”。

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    // If user has left this page by either pressing 'Done' or 'Cancel'
    if (![[self.navigationController viewControllers] containsObject:self]) {
        // If this event is NOT saved aka 'Cancel' is pressed.
        if (![event isUpdated]) {
            // It is important that we only delete videos associated when isNew.
            if (isNew) { 
                NSURL *url = [self getMovieUrl:event.uuid];
                [self deleteMovieByUrlIfExists:url];
            }
            self.event = nil;
        }
    }
}

- (IBAction)done:(id)sender {
    [self.view endEditing:YES];
    if (isNew) { 
        event.eventType = eventTypeInput.text;
        event.targetId= [NSNumber numberWithInt:[targetIdInput.text intValue]];
        event.game = game;

        BOOL success = [[DataStore singletonInstance] saveChanges];
        if(success) {
            NSLog(@"Success: Event %@ saved. hasVideo:%d", event.uuid, [event.hasVideo intValue]);
            // TODO [newEvent upload];
            // Also upload the video if possible. 
        } 
    }
    [self.navigationController popViewControllerAnimated:YES];
} 
```

上面的代码不起作用。当用户按下“完成”时，仍会调用 deleteMovieByUrlIfExists:url。有谁知道为什么？

====== isNew 就是这样设置的。

```
- (void)initWithEvent:(id)sender event:(Event *)ev { 
    isNew = !ev;
    if (isNew) { 
        event = [[DataStore singletonInstance] createEvent];        
    } else { 
        event = ev;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:24:29.737

显然，无论用户采取什么行动`[event isUpdated]`，总是具有相同的价值。`isNew`在 中设置一个标志（`BOOL`例如，一个 ivar）`done:`并检查标志的值`viewWillDisappear:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:54:18.493

您应该为您的视图控制器创建一个委托，委托用于将基于操作的数据传输到其他视图控制器，我强烈建议您阅读有关委托的更多信息，但这里有一个简单的说明

```
@protocol viewControllerDelegate <NSObject>
@required
//define the delegate methods
-(void)backButtonPressed;
-(void)doneButtonPressed:(id)sender

@end

@interface ViewContorller : xxx
{
id <viewControllerDelegate> delegate;
} 
```

现在在 action 方法中，完成数据处理后，您编写这行代码

```
 - (IBAction)done:(id)sender {
 [delegate backButtonPressed:sender]
 } 
```

现在所有实现这个委托的视图控制器都会收到通知，你应该创建两个委托方法，一个用于后退按钮，另一个用于完成按钮

```
//in the parent view controller .h file add the delegate to the definition
 @interface MyViewController: UIViewController <viewControllerDelegate>

//in the .m file implement the delegate methods
-(void)backButtonPressed:(id)sender
{
  //this method will get called when the back button is pressed
}
 -(void)doneButtonPressed:(id)sender
 {
  //this method will get called when the done button is pressed
 } 
```

# html - 如何使用 CSS 为我的 HTML 表单设置样式

> ID：10967443
> 
> 赞同：0
> 
> 时间：2012-06-10T08:50:52.650
> 
> 标签：html, css

我正在尝试为使用图像背景的基本 HTML 表单设置样式：

```
<form style="
    background:url(http://moneythink.org/wp-content/uploads/2012/06/Moneythink-Newsletter-Signup-Background.jpg) no-repeat; 
    padding:90px 0px 60px 122px;">
    <input type="email" value="Email" name="EMAIL" 
        class="required email" id="mce-EMAIL" 
        style="width: 100px;" style="padding-bottom: 5px;"> 
    <input type="image" src="http://moneythink.org/wp-content/uploads/2012/06/Submit-Button.jpg" 
        alt="Submit button" style=" padding-left: 57px; padding-bottom: -40px;" 
        name="subscribe" id="mc-embedded-subscribe">
</form> 
```

一切都按预期进行，但由于某种原因，我无法让“提交”按钮直接出现在文本字段下方；它一直出现在它旁边，在右边。

有关如何解决此问题的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T08:55:16.050

在 CSS 中，应用于`display: block`提交按钮，或者 - 如果使用浮动布局 - `clear: both`。

这会将按钮呈现为流程中的块级元素，从而产生所需的布局。

### 参考

*   [Mozilla 开发者网络上的块级元素](https://developer.mozilla.org/en/HTML/Block-level_elements)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:56:37.787

[使用样式表](http://www.htmldog.com/guides/cssbeginner/applyingcss/)。内联 CSS 会让你的眼睛流血。

完成此操作后，制作按钮块级元素*可能会*成功（取决于您所需的布局）：

```
form input[type="image"] {
  display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T13:31:07.563

```
<html>

<style>
--your style--  
</style>

<body>
<form>
 --your class-- 
</form>
</body>

</html> 
```

像这样（对于阴影文本 php）：

```
<?php

echo "<html>";
echo "<head>";

echo "<style>";

echo '.inner_text_shadow{text-shadow: 1px 1px white, -1px -1px #444;}';
echo '.default{font-size:30px;color: darkred;font-weight:bold;}';
echo '</style>';
echo '<body>   <p class="inner_text_shadow default">FreeClup Best Code</p></body>';
echo "</html>";
?> 
```

# php - MySQL - 有效地交叉引用 ID 数组

> ID：10967449
> 
> 赞同：2
> 
> 时间：2012-06-10T08:52:26.373
> 
> 标签：php, mysql, sql

有一组用户 ID 的 POST 请求被传递到 PHP 脚本中。此集合正在与“user_table”中的现有 ID 进行比较。

这是通过将一个 id 数组连接成一个字符串来实现的，并且结果以逗号分隔的 id 字符串直接在查询中使用。

我担心这不会很好地扩展，并可能成为一场灾难！任何人都可以分享一些关于解决这类问题的传统方法的智慧吗？

```
$id_json_array = postVar('u');
$user_ids = json_decode($id_json_array);
$str_ids = join(',', $user_ids);

$result = mysql_query(
   "SELECT  u.user_id AS i
          , u.user_name AS u
    FROM    user_table u
    WHERE   u.user_id IN ($str_ids)"
) or die (mysql_error ()); 
```

ids 数组可能有几千个，而“user_table”很大（数万或数十万，索引等）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:22:59.390

我认为这里没有问题，只要`user_id`被索引。

在一个类似的例子中，我曾经构建了一个临时 MEMORY 表来保存你的内容`$str_ids`，并与这个临时表进行了 JOIN。这个技巧的原因是：

*   （主要原因）列表相当大，我担心我可能会在查询长度中达到一些限制
*   （附带原因）我不得不在我的脚本过程中多次使用这个列表

构建（也许是索引）这样一个临时表的开销可能会或可能不会抵消使用它的可能好处。在我的情况下，它没有。

编辑：哦，如果您事先知道列表中元素的最大数量，那么[这个线程提出了一个优雅的替代方案。](https://stackoverflow.com/questions/327274/mysql-prepared-statements-with-a-variable-size-variable-list#327384)

# python - Django：is_valid() 函数失败后如何显示修改后的cleaned_data 文本？

> ID：10967450
> 
> 赞同：0
> 
> 时间：2012-06-10T08:52:29.523
> 
> 标签：python, django

这与此非常相关： [How to access data when form.is_valid() is false](https://stackoverflow.com/questions/735545/django-forms-how-to-access-data-when-form-is-valid-is-false)

就我而言，如果表单验证失败，我希望用户查看带有错误消息的同一页面，并让它显示新的和修改后的 clean_data 评论。现在，如果它未能通过表单验证，它将显示带有旧用户提交评论的页面。我之所以要显示修改后的评论，是因为我希望新数据与错误消息匹配。例如，如果用户提交

```
'            hey             bye                  ' 
```

为了绕过 20 个字符的最小限制，我的清理功能将去除空格并将其修剪为

```
'hey bye' 
```

然后验证失败。错误消息将显示“评论长度需要至少 20 个字符”。使用旧数据，用户会感到困惑，因为他实际上输入了20多个字符，并且旧数据会显示出来。我希望他们看到被剥离的评论，这样他们就会知道我为什么失败了。

这是我的代码...

**视图.py**

```
def question(request, qid):
    quest = shortcuts.get_object_or_404(askbox.models.Question, pk=qid)
    log.info("Question #{0}: {1}".format(qid, quest))
    user = SessionManager.getLoggedInUser(request)
    answerForm = AnswerForm()

    if request.method == "POST":
        if user == None:
            return HttpResponseRedirect(reverse('login.views.login'))
        answerForm = AnswerForm(request.POST)
        if answerForm.is_valid():
            # user posted an answer
            answerForm.question = quest
            answerForm.user = user
            answerForm.save()
            return HttpResponseRedirect(reverse('question.views.question', args=(quest.id,)))
        else:
            #answerForm.text = answerForm.saved_data['text'] #doesn't work too
            answerForm.text = "foo" # doesn't work...
    else: # GET request
        # landing page
        # probably do nothing
        pass
    print "AnswerForm: {0}".format(answerForm)
    mediaList = askbox.models.Media.objects.filter(question=qid)
    return shortcuts.render_to_response('question/question.html', {
        'title': 'Groupthink | {0}'.format(quest.question),
        'css_list': css_list,
        'js_list': js_list,
        'question': quest,
        'mediaList': mediaList,
        'user': user,
        'answerForm': answerForm,
    }, context_instance=RequestContext(request)) 
```

**表格.py**

```
# fake abstract class... 
class AbstractCommentForm(forms.ModelForm):
    text = forms.CharField(min_length=MIN_ANSWER_LEN, max_length=MAX_ANSWER_LEN, widget=forms.Textarea) # the comment text

    def clean_text(self):
        # we want to avoid user cheating the system. We'll trim extra spaces between characters and then strip spaces at both ends of the string
        field = 'text'
        self.cleaned_data[field] = (re.sub(r'  +', ' ', self.cleaned_data[field])).strip()
        self.text = self.cleaned_data[field] # doesn't work
        text_len = len(self.cleaned_data[field])
        self.saved_data = self.cleaned_data # doesn't work
        if text_len < MIN_ANSWER_LEN:
            raise forms.ValidationError("The comment length needs to be at least {0} characters long".format(MIN_ANSWER_LEN))
        if text_len > MAX_ANSWER_LEN:
            raise forms.ValidationError("The comment length exceeds the maximum {0} characters".format(MAX_ANSWER_LEN))
        return self.cleaned_data[field]

class CommentForm(AbstractCommentForm):
    class Meta:
        model = Comment

class AnswerForm(AbstractCommentForm):
    class Meta:
        model = Answer 
```

# java - 用java按钮在浏览器中打开一个链接？

> ID：10967451
> 
> 赞同：105
> 
> 时间：2012-06-10T08:52:31.790
> 
> 标签：java, swing, browser, hyperlink, desktop

如何通过单击按钮在默认浏览器中打开链接，如下所示

```
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        open("www.google.com"); // just what is the 'open' method?
    }
}); 
```

?

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-06-10T08:55:28.970

使用[Desktop#browse(URI)](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)方法。它在用户的默认浏览器中打开一个 URI。

```
public static boolean openWebpage(URI uri) {
    Desktop desktop = Desktop.isDesktopSupported() ? Desktop.getDesktop() : null;
    if (desktop != null && desktop.isSupported(Desktop.Action.BROWSE)) {
        try {
            desktop.browse(uri);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return false;
}

public static boolean openWebpage(URL url) {
    try {
        return openWebpage(url.toURI());
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-06-02T02:32:05.533

```
public static void openWebpage(String urlString) {
    try {
        Desktop.getDesktop().browse(new URL(urlString).toURI());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-08-19T17:37:51.900

```
try {
    Desktop.getDesktop().browse(new URL("http://www.google.com").toURI());
} catch (Exception e) {} 
```

注意：您必须包括必要的进口`java.net`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-21T12:07:18.533

没有桌面环境的解决方案是[BrowserLauncher2](https://github.com/rajing/browserlauncher2)。这个解决方案在 Linux 上更通用，桌面并不总是可用。

冗长的答案发布在[https://stackoverflow.com/a/21676290/873282](https://stackoverflow.com/a/21676290/873282)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-20T06:28:14.387

```
private void ButtonOpenWebActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try {
        String url = "https://www.google.com";
        java.awt.Desktop.getDesktop().browse(java.net.URI.create(url));
    } catch (java.io.IOException e) {
        System.out.println(e.getMessage());
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-09T04:31:01.140

我知道这是一个老问题，但有时会`Desktop.getDesktop()`产生像 Ubuntu 18.04 一样的意外崩溃。因此，我必须像这样重写我的代码：

```
public static void openURL(String domain)
{
    String url = "https://" + domain;
    Runtime rt = Runtime.getRuntime();
    try {
        if (MUtils.isWindows()) {
            rt.exec("rundll32 url.dll,FileProtocolHandler " + url).waitFor();
            Debug.log("Browser: " + url);
        } else if (MUtils.isMac()) {
            String[] cmd = {"open", url};
            rt.exec(cmd).waitFor();
            Debug.log("Browser: " + url);
        } else if (MUtils.isUnix()) {
            String[] cmd = {"xdg-open", url};
            rt.exec(cmd).waitFor();
            Debug.log("Browser: " + url);
        } else {
            try {
                throw new IllegalStateException();
            } catch (IllegalStateException e1) {
                MUtils.alertMessage(Lang.get("desktop.not.supported"), MainPn.getMainPn());
                e1.printStackTrace();
            }
        }
    } catch (IOException | InterruptedException e) {
        e.printStackTrace();
    }
}

public static boolean isWindows()
{
    return OS.contains("win");
}

public static boolean isMac()
{
    return OS.contains("mac");
}

public static boolean isUnix()
{
    return OS.contains("nix") || OS.contains("nux") || OS.indexOf("aix") > 0;
} 
```

然后我们可以从实例中调用这个助手：

```
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        MUtils.openURL("www.google.com"); // just what is the 'open' method?
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-21T12:42:10.853

```
public static void openWebPage(String url) {
    try {
        Desktop desktop = Desktop.isDesktopSupported() ? Desktop.getDesktop() : null;
        if (desktop != null && desktop.isSupported(Desktop.Action.BROWSE)) {
            desktop.browse(new URI(url));
        }
        throw new NullPointerException();
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, url, "", JOptionPane.PLAIN_MESSAGE);
    }
} 
```

# node.js - redis hget 在代码片段中返回 null 但在 redis-cli 中有效

> ID：10967458
> 
> 赞同：0
> 
> 时间：2012-06-10T08:53:42.913
> 
> 标签：node.js, redis, node-redis

```
for (i=0 ; i < pri.state.totalConversations; i++) {
            redisclient.lindex("conversationsIDList",i, function(err,reply) { 
            convID = reply;
            console.log("ConvID: " + "i: " + i + " "+  convID);         
});
          if(convID == pri.state.lastUpdatedConversationID)
            break;
            redisclient.hget("conversations", convID, function(err,reply) {
            console.log("ConvID hget: "+ convID + " "+ reply);
                data = JSON.parse(reply);
                console.log("data: " +data);

            }); 
```

以上是我的代码片段。redis-cli hget 命令返回正确的答案，确认我使用正确的键和字段/值正确设置了哈希。但是，上面的代码片段为 hget 返回“null”，（convID 具有正确的值，这是 hget 的字段）-我不明白为什么-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:16:28.563

`convID``redisclient.lindex`在您的回调返回之前不会设置。`for`在您的循环早已退出之前，这不会发生（因为节点的事件循环甚至在您退出循环之前都不会运行）。您正在触发一大堆异步请求，`redisclient`而不是等待它们中的任何一个返回。

我很难确切地说出你想要做什么，但你可能想研究像 Async 这样的流控制库。

可以定义一个布尔标志变量（范围为您的模块或启动循环的任何函数），该变量将由您的第一个成功回调设置，并告诉后续回调忽略它们的结果。但我只是猜测。主要问题是您试图在异步环境中使用同步控制流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:24:09.970

问题不在于 Redis，而在于您对 node.js 异步编程的理解。Redis 客户端库是异步的（与大多数 node.js 库一样）。您不能像同步一样使用它。

在 Redis 有机会发送 lindex 命令的结果之前发送 hget 命令。convID 变量未在您期望的时间设置为您期望的值。for 循环在任何结果被处理之前退出。

您应该将所有取决于 convID 的代码放在 lindex 的回调中，并且您可能需要在处理完所有结果后最后调用一个额外的回调。

[请参阅For 循环从 redis 延迟获取项目](https://stackoverflow.com/questions/10019903/for-loop-get-items-from-redis-delay/10025746#10025746)的示例

# ruby-on-rails - rspec ./spec/requests/static_pages_spec 失败。Michael Hartl 指南中的第 5 章

> ID：10967460
> 
> 赞同：1
> 
> 时间：2012-06-10T08:53:49.533
> 
> 标签：ruby-on-rails, ruby, rspec

我无法弄清楚是什么导致了失败！这是我在stackoverflow上的第一篇文章，所以如果我遗漏了一些需要的信息，我提前道歉......好吧，这是失败......

```
Failures:

1) Static pages Help page 
 Failure/Error: it { should have_selector('title', text: full_title('Help')) }
   expected css "title" with text "Ruby on Rails Tutorial Sample App | Help" to return something
 # ./spec/requests/static_pages_spec.rb:19:in `block (3 levels) in <top (required)>'

2) Static pages About page 
 Failure/Error: it { should have_selector('title', text: full_title('About Us')) }
   expected css "title" with text "Ruby on Rails Tutorial Sample App | About Us" to return something
 # ./spec/requests/static_pages_spec.rb:26:in `block (3 levels) in <top (required)>'

3) Static pages Contact page 
 Failure/Error: it { should have_selector('title', text: full_title('Contact')) }
   expected css "title" with text "Ruby on Rails Tutorial Sample App | Contact" to return something
 # ./spec/requests/static_pages_spec.rb:33:in `block (3 levels) in <top (required)>'

Finished in 0.35756 seconds
9 examples, 3 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:19 # Static pages Help page 
rspec ./spec/requests/static_pages_spec.rb:26 # Static pages About page 
rspec ./spec/requests/static_pages_spec.rb:33 # Static pages Contact page 
```

这是我的路线.rb

```
SampleApp::Application.routes.draw do
root to: 'static_pages#home'

match '/help',    to: 'static_pages#help'
match '/about',   to: 'static_pages#about'
match '/contact', to: 'static_pages#contact'

end 
```

static_pages_spec.rb

```
require 'spec_helper'

describe "Static pages" do

subject { page }

describe "Home page" do
before { visit root_path }

it { should have_selector('h1',    text: 'Sample App') }
it { should have_selector('title', text: full_title('')) }
it { should_not have_selector 'title', text: '| Home' }
end

describe "Help page" do
before { visit help_path }

it { should have_selector('h1',    text: 'Help') }
it { should have_selector('title', text: full_title('Help')) }
end

describe "About page" do
before { visit about_path }

it { should have_selector('h1',    text: 'About') }
it { should have_selector('title', text: full_title('About Us')) }
end

describe "Contact page" do
before { visit contact_path }

it { should have_selector('h1',    text: 'Contact') }
it { should have_selector('title', text: full_title('Contact')) }
end
end 
```

联系人.html.erb

```
 <h1>Contact</h1>
 <p>
 Contact Ruby on Rails Tutorial about the sample app at the
 <a href="http://railstutorial.org/contact">contact page</a>.
 </p> 
```

应用程序.html.erb

```
<!DOCTYPE html>
<html>
<head>
<title><%= full_title(yield(:title)) %></title>
<%= stylesheet_link_tag    "application", media: "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %>
<%= render 'layouts/shim' %>    
</head>
<body>
<%= render 'layouts/header' %>
<div class="container">
  <%= yield %>
  <%= render 'layouts/footer' %>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:56:34.670

您的测试失败，因为您的应用程序布局正在产生标题，但您没有在任何地方设置标题。当您`yield :something`在视图中看到时，例如标题，这意味着该视图将呈现它所知道的“:something”的任何内容。在您的情况下，标题是通过以下方式产生的：

```
<title><%= full_title(yield(:title)) %></title> 
```

为了告诉 Rails 你想要“标题”产生什么内容，你需要在你的视图中设置它：

```
content_for(:title) { 'My Title'} 
```

在每个视图中都必须重复这一点可能很乏味，所以很多人会为标题创建一个助手：

```
module ApplicationHelper
  def title(page_title = '')
    content_for(:title) { page_title }
  end
end 
```

然后在您看来，您可以这样做：

```
<%= title 'My Title' %> 
```

查看[Railscast #30](http://railscasts.com/episodes/30-pretty-page-title)了解有关此技术的更多信息

# asp.net-mvc - 在 mvc 中将 GoogleMap 视图保存和检索到 sql

> ID：10967465
> 
> 赞同：0
> 
> 时间：2012-06-10T08:54:42.370
> 
> 标签：asp.net-mvc, google-maps

我是谷歌地图的新手，我需要将谷歌地图视图保存到数据库中（long + lat +zoom）。我知道 MVC，但我不知道当它显示在视图上时如何获取谷歌地图视图信息（长 + 纬度 + 缩放）。

另外，当我从数据库中检索数据时，如何在剃刀视图中更改谷歌地图的视图？

非常感谢任何帮助，包括对阅读的一些参考。

我正在考虑这样做的一种方法是创建三个隐藏输入，当用户使用地图和更改谷歌地图视图时，它们的值会发生变化。但我不知道如何使用 JS 和谷歌地图来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:50:34.747

假设您的代码中有模型 Map，例如：

```
 public class MapModel
{
    /// <summary>
    /// Lattitude on map
    /// </summary>
    public decimal Lat { get; set; }

    /// <summary>
    /// Longtidute on map
    /// </summary>
    public decimal Lon { get; set; }

    /// <summary>
    /// Map zoom level
    /// </summary>
    public int Zoom { get; set; }
} 
```

将 Google Maps 脚本放在您的视图中：

```
<head runat="server">
<title>Index</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

  function initialize()
  {
    var mapDiv = document.getElementById('MapDiv');
    var map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(<%= Model.Lat %>, <%= Model.Lon %>),
      zoom: <%= Model.Zoom %>,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    google.maps.event.addListener(map, 'click', function(event)
    {
        // Puts coordinates to form (then pass to DB using Ajax, etc)
        document.getElementById("Lat").value = event.latLng.lat();
        document.getElementById("Lon").value = event.latLng.lng();
        document.getElementById("Zoom").value = map.getZoom();
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);

<div id="MapDiv" style="width: 500px; height: 500px"></div>
<input type="text" id="Lat" value="0" /><br />
<input type="text" id="Lon" value="0" /><br />
<input type="text" id="Zoom" value="0" /><br /> 
```

# xamarin.android - FrameEventsArgs 时间成员变量在我调试时未返回有理值

> ID：10967468
> 
> 赞同：0
> 
> 时间：2012-06-10T08:55:26.323
> 
> 标签：xamarin.android

当我在 OnRenderFrame 函数中放置断点并检查 FrameEventsArgs 参数时，我得到了非常大的 FrameEventsArgs.Time 数字。

像 1.75842543717402E+132 这样的数字非常大。我偶尔也会得到非常小的数字。

如果我使用 monodevelop 创建默认 GL 应用程序并在不更改任何内容的情况下对其进行调试，则值始终为 3.46247528645812E-317。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:15:18.397

我是个白痴。我想我可以责怪 Xamarin 人将 FrameEventsArgs 类作为参数传递给 OnRenderFrame，但我不会。

OnUpdateFrame 获取正确设置了 Time 变量的有效 FrameEventsArgs。

# javascript - Javascript 的执行要求

> ID：10967470
> 
> 赞同：0
> 
> 时间：2012-06-10T08:55:46.843
> 
> 标签：javascript, function, execution

我是 Javascript 新手，我正在分析以下代码。我的问题是：对于 setTimeout() 函数，它是如何被调用的？在我看来，它只是被分配给变量 this.timer，而且还没有被调用。但是该功能仍然执行。我错过了什么/不理解什么？非常感谢您提前提供的帮助！

```
$(document).ready(function () {
var validateUsername = $('#validateUsername');
$('#username').keyup(function () {
var t = this; 
if (this.value != this.lastValue) {
  if (this.timer) clearTimeout(this.timer);
  validateUsername.removeClass('error').html('<img src="images/ajax-loader.gif"      height="16" width="16" /> checking availability...');

  this.timer = setTimeout(function () {
    $.ajax({
      url: 'ajax-validation.php',
      data: 'action=check_username&username=' + t.value,
      dataType: 'json',
      type: 'post',
      success: function (j) {
        validateUsername.html(j.msg);
      }
    });
  }, 200);

  this.lastValue = this.value;
}
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T08:57:16.257

> 它是怎么称呼的？

函数名 ( `setTimeout`) 后跟一个`(`字符，然后是一些参数，然后是一个`)`字符。

这些参数中的第一个是一个函数表达式，它被分成多行。

> 在我看来它只是被分配给变量 this.timer

`clearTimeout`正在分配它的返回值（可以与 一起使用的标识符），而不是`setTimeout`函数本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T08:57:58.097

> 在指定延迟后执行代码片段或函数。

`setTimeout`在毫秒参数（第二个参数）之后触发给定的函数参数（第一个参数）。

返回值为：

> timeoutID是超时的数字ID，后面可以和window.clearTimeout一起使用。

[**确保真实的所有 MDN 页面**](https://developer.mozilla.org/en/DOM/window.setTimeout)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T09:00:09.300

该函数在这里调用：

```
this.timer = setTimeout(function() {...}); 
```

`setTimout()`延迟后执行匿名函数，同时返回其数字 ID。`this.timer`然后存储该 ID，稍后可以使用`clearTimeout`.

# asp.net - 什么是项目中的模块？

> ID：10967477
> 
> 赞同：4
> 
> 时间：2012-06-10T08:56:50.597
> 
> 标签：asp.net

嗨，我想知道项目中的模块是什么意思？它们是如何分类的以及我们可以在一个项目中拥有多少个模块？谁能用简单的例子解释一下？我们可以在典型的在线购物网站中拥有哪些模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:15:55.373

该模块是您在站点上插入并运行以执行某些操作的外部代码。

[![](../Images/86c8efc3e810ee3927dfbcc83850eff1.png)](https://i.stack.imgur.com/dzZFV.jpg)
[（来源：[codeguru.com](http://www.codeguru.com/images/article/19389/020417_01.jpg)）]

我们制作和使用模块是为了能够在不提供源代码的情况下与其他人共享模块的操作，反之亦然，我们使用其他我们无法访问源代码的模块。或者我们可以简单地使用模块来简化我们的代码并在不需要时轻松删除它。

我们可以拥有任何我们喜欢的模块，但是每个模块都会给我们的代码带来额外的开销——毕竟需要在那里进行更多的思考。

有关模块的更多信息：http: [//www.codeguru.com/csharp/.net/net_asp/article.php/c19389/HTTP-Handlers-and-HTTP-Modules-in-ASPNET.htm](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19389/HTTP-Handlers-and-HTTP-Modules-in-ASPNET.htm)

如何创建模块： http: [//support.microsoft.com/kb/307996](http://support.microsoft.com/kb/307996)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:16:20.787

在 .net 上下文中，我相信一个人可以得出 2 个含义，不确定您在寻找什么。

一种是模块化编程，遵循“关注点分离”、“单一职责”、“松散耦合”等设计原则。这意味着根据这些原则将您的代码划分为类，并根据这些原则再次将这些类进一步分组为模块。

在 ASP.NET 或 C# 或一般情况下，我们创建类库项目并在整个项目中使用它们。就像所有的日志记录功能都放在一些类中一样，这些类包含在一个可以称为“日志记录模块”的类库项目中。每当您需要登录任何项目时，您都可以包含此模块并使用该功能。

一些例子：

*   HTTP 请求的 Web 模块（WebApp）
*   存储库和数据访问层模块。（DAL 代码）
*   包含所有业务实体的模型模块。
*   用于与其他应用程序集成的 WebService 模块。
*   用于调试和问题识别的日志记录
*   基础设施/实用程序模块，用于功能和应用程序配置等实用程序。
*   业务逻辑模块。
*   交易网关模块。

在 .net 中定义模块的其他方法是它们是 PE 文件，我相信它们具有包含元数据但不包含程序集清单的扩展名 .netmodule。要使用模块，您必须使用必要的程序集清单创建一个 PE 文件。

创建一个模块：

```
csc /t:module ufo.cs 
```

使用模块创建程序集：

```
csc /t:library /addmodule:ufo.netmodule /out:airvehicles.dll helicopter.cs 
```

以上2个命令来自[此链接](http://msdn.microsoft.com/en-us/library/ms379563%28v=vs.80%29.aspx)

# hash - 给定哈希长度的广义生日计算

> ID：10967478
> 
> 赞同：2
> 
> 时间：2012-06-10T08:56:53.250
> 
> 标签：hash, birthday-paradox

让我们假设我们得到以下内容：

*   哈希的长度
*   获得碰撞的机会

现在，知道了以上内容，我们如何获得获得给定机会百分比所需的“样本”数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:07:32.990

When we take the `Simplified formula` for the birthday paradox we get:

```
probability = k^2/2N 
```

So:

```
sqr(probability*2*n) = k 
```

Where we know that n = 2^lenghtHash

A small test: Hash = 16 bit : N= 65536 probability = 50% = 0.5

sqr(0.5*2*65536) = `256 samples`

This is not 100% correct as we started of with the Simplified formula, but for big hashes and lager sample sets it gets very close.

for a link on the formula you can look [here](http://preshing.com/20110504/hash-collision-probabilities).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-07T17:29:48.310

这里有一个小的 javascript 函数来计算机会，基于[https://preshing.com/20110504/hash-collision-probabilities/](https://preshing.com/20110504/hash-collision-probabilities/)的“简化近似”算法（感谢链接@Frank）来计算碰撞的机会，并使用[Decimal.js bignum 库](https://github.com/MikeMcl/decimal.js/blob/master/decimal.min.js)来管理比 Javascript`Number`可以处理的更大的数字，例如：

```
samples=2**64; //
hash_size_bytes=20; // 160 bit hash
number_of_possible_hashes=Decimal("2").pow(8*hash_size_bytes);
console.log(collision_chance(samples,number_of_possible_hashes));
// ~ 0.00000001 % chance of a collision with 2**64 samples and 20-byte-long hashes.
samples=77163;
hash_size_bytes=4; // 32bit hash
number_of_possible_hashes=Decimal("2").pow(8*hash_size_bytes);
console.log(collision_chance(samples,number_of_possible_hashes));
// ~ 49.999% chance of a collision for a 4-byte hash with 77163 samples. 
```

功能：

```
// with https://github.com/MikeMcl/decimal.js/blob/master/decimal.min.js
function collision_chance(samples,number_of_possible_hashes){
    var Decimal100 = Decimal.clone({ precision: 100, rounding: 8 });
    var k=Decimal100(samples);
    var N=Decimal100(number_of_possible_hashes);
    var MinusK=Decimal100(samples);
    MinusK.s=-1;
    var ret=((MinusK.mul(k.sub(1))).div(N.mul(2))).exp();
    ret=ret.mul(100);
    ret=Decimal100(100).sub(ret);
    return ret.toFixed(100);
} 
```

# iphone - 如何在 ZUUIRevealController 中制作 tableview 响应平移手势

> ID：10967484
> 
> 赞同：2
> 
> 时间：2012-06-10T08:57:34.803
> 
> 标签：iphone, ios

导航栏可以响应 ZUUIRevealController 中的平移手势。但是我想让frontViewController的整个屏幕响应像Path2这样的平移手势，所以我写了这样的代码：

```
UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self.navigationController.parentViewController action:@selector(revealGesture:)];

[self.view addGestureRecognizer:recognizer]; 
```

除了在 UITableViewController 中它工作正常。当我将它放在 UITableViewController 的 viewDidLoad 方法中时，表格无法响应任何其他平移手势，因此无法滚动。

我怎样才能让它像 Path2 一样工作：水平平移是为了显示，垂直平移是为了像普通的表格视图一样工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T11:27:17.303

有一个简单的解决方案：

在frontViewController中：

```
- (void)viewDidLoad
{
...

    UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self.navigationController.parentViewController action:@selector(revealGesture:)];

    recognizer.delegate = self;

...
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return TRUE;
} 
```

# python - 为python 2.7安装mysql

> ID：10967485
> 
> 赞同：3
> 
> 时间：2012-06-10T08:57:35.297
> 
> 标签：python, windows, installation, python-2.7

```
D:\PythonPack\MySQL-python-1.2.3>python setup.py install
Traceback (most recent call last):
  File "setup.py", line 15, in <module>
    metadata, options = get_config()
  File "D:\PythonPack\MySQL-python-1.2.3\setup_windows.py", line 7, in get_confi
g
    serverKey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, options['registry_ke
y'])
WindowsError: [Error 2] The system cannot find the file specified 
```

我正在尝试在 windows7 中为 python 安装 mysqldb 并遇到该错误消息

你知道我怎样才能让它工作吗？我已经安装了 pythonsetuptool

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:12:59.170

实际上有很多方法，我尝试了几个小时并意识到它的时间浪费过程 bcoz MYSQLdb 因版本而异，即 2.6、2.7 和 3.2 但所有这些都是令人困惑和浪费时间的过程，最好的方法是获取预编译的可执行文件来自：[http](http://www.lfd.uci.edu/~gohlke/pythonlibs) ://www.lfd.uci.edu/~gohlke/pythonlibs 。这里选择版本明智的链接，如 python 2.7 和 32bit，这样你就不会遇到任何错误，现在运行下载的文件，最后在环境变量中设置**路径。**现在打开 python IDLE 编辑器或从命令提示符 c:>python import MySQLdb

如果你没有收到任何错误，那么它工作正常......享受你的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:15:49.037

[只需从此处](http://www.lfd.uci.edu/~gohlke/pythonlibs/)安装 exe 即可。

也许您可以在之前提出的类似问题中找到有关此的更多[信息](https://stackoverflow.com/questions/645943/mysql-for-python-in-windows)。

# algorithm - 时域中的零填充意义

> ID：10967487
> 
> 赞同：6
> 
> 时间：2012-06-10T08:57:40.330
> 
> 标签：algorithm, matlab, signal-processing, fft, discrete-mathematics

我有与氡变换相关的任务，其中包含一个通过 DFT 使用重采样的子任务。

让我们考虑具有 515 个像素长度的非周期性离散信号（图 1）（例如像素串）。在我的重采样实现中包含以下步骤：

1.  循环左移（图 2）。
2.  向中心添加零以使信号的长度变为 2^n（在我们的示例中，必须添加 1024-515 = 509 个零）（图 3）。
3.  从此信号中获取 DFT（图 4）。
4.  循环右移。（用于将低频移至中心）（图5）

图。1 ![原始图像](../Images/239ba1b77eefe28d213d979e78e2ed92.png)

图2 ![循环左移](../Images/c054ad235d73e8d6aaabf9b6f42f6c5a.png)

图3 ![零填充](../Images/a61a9383cc4792b0046e05fe2f891c6f.png)

图4 ![DFT 谱](../Images/b80b06ce63f48a134731dcf2209a28e0.png)

图5 ![DFT 后移](../Images/053b7e088941015e9f2bc47c2f1f09f0.png)

## 主要问题：

为什么我们必须对信号进行循环移位并在中心准确地添加零？（我假设这使信号周期性） Zeropadding 使插值 DFT 频谱，它正确吗？（我问过，有人说不是这样）也许有人可以用简单的方式解释零填充后信号会发生什么。

我在 Matlab 中做了一些实验，发现任何其他动作序列都不能给出所需的结果。

现在让我们考虑两种情况：

a）（这个正确的变体）我们有非周期性离散信号（例如像素串），它将循环左移并在中心填充零，然后从中获得 DFT 并将其移回。 ![在此处输入图像描述](../Images/e0340156438e5765203fdc3888d02857.png)

b) 我们有非周期性离散信号（例如像素集合），从左到右填充零，然后从中获得 DFT。

![在此处输入图像描述](../Images/83773dc85991004f410ee78372eae6d7.png)

这些 DFT 光谱有什么区别？

我读过一些书，但没有找到这个 zeropadding 案例的答案。这似乎只能通过自己的经验找到。

# 书中答案：

AC Kak 和 Malcolm Slaney，计算机断层成像原理，工业与应用数学学会，2001 年，第 25 页

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T09:03:55.540

时域中的零填充对应于频域中的插值。

时域的圆移对应于频域的“相位扭曲”；每个 bin 都应用了复杂的旋转。我不知道为什么你被要求在你的应用程序中这样做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T00:10:20.707

移动数据点并在 FFT 孔径的确切中心进行零填充具有以下特性：原始数据窗口中的所有偶数（对称）信号都以复数 FFT 结果的实部结束，而所有奇数信号都以虚部。例如，保留了奇偶性比，这允许对相位进行插值。在零填充 FFT 的情况下，能够内插相位很重要，因为零填充也会内插频谱幅度。

如果您不将零填充居中，则相位必须在频域中“不扭曲”，然后任何额外的插值才能产生合理的相位结果。

# math - 实数比较

> ID：10967492
> 
> 赞同：0
> 
> 时间：2012-06-10T08:58:41.013
> 
> 标签：math, floating-accuracy, computation-theory

> **可能重复：**
> [比较浮点值 比较浮点值](https://stackoverflow.com/questions/1530069/comparing-floating-point-values)
> [有多危险？](https://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values)

我不明白，为什么在编程中比较实数是一种不好的做法？当然，我知道实数可以用某种精确度来表示。你能给我解释一个不比较这种数字的重要理由吗？例子会很好，文章也很受欢迎。预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T09:49:05.207

从`floating-accuracy` 本网站标签下的所有问题中，任何讨论都应该从对以下问题的引用开始：[比较浮点值有多危险？](https://stackoverflow.com/q/10334688/1328439)

以及David Goldberg的“ [What Every Computer Scientist Should Know About Floating Point Arithmetic ”的参考资料。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)这是一个简短的总结。

**1\. 精确的浮点结果不可移植**

浮点运算既不是可交换的，也不是结合的。大多数编译器和平台遵循的 IEEE 754 标准不保证结果的精确*再现*性。此外，不同处理器的结果也会有所不同。

**2.浮点比较与数学不符**

考虑以下语句

```
 int i = 0; double x = 1.0;
  while (x != 0.0) { x = x/2 ; i++;} 
```

在实数中，此计算永远不会完成，但在浮点中它将终止。的值`i`取决于底层硬件。使用浮点比较会使分析代码更加困难。

**3\. 那么为什么要在硬件中实现浮点比较呢？**

有些地方需要精确的浮点相等。一是浮点数的规范化。

# windows-phone-7 - 启用/禁用锁定屏幕

> ID：10967494
> 
> 赞同：0
> 
> 时间：2012-06-10T08:58:58.027
> 
> 标签：windows-phone-7, windows-phone-7.1

是否可以启用和禁用锁定屏幕？

我的应用程序与 wcf 连接以便从 dababase 读取数据。此数据可能非常大。当我从 Visual Studio 执行它时，应用程序在模拟器和设备上运行良好。但是我在没有VS的情况下执行它，如果屏幕被锁定，当解锁它时应用程序崩溃，被关闭。Í 有一个try cath，但是catch 部分没有执行，直接关闭应用程序。

可以在接收数据时禁用锁定屏幕，并在完成后再次启用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:18:58.367

您可以通过禁用空闲检测使应用程序在锁屏下运行

```
PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Disabled; 
```

并在不再需要时再次启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:07:12.760

您可以禁用锁屏触发

```
PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Disabled; // or .Enabled 
```

或者，您可以让应用程序在锁屏下运行

```
PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Disabled; // or .Enabled 
```

不过要注意一件事：如果 UserIdleDetectionMode 在应用程序中更改两次，手机会引发异常。它仍然会更改 UserIdleDetectionMode，因此应该使用 try and catch 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:59:15.253

我有一个错误。我在 if (System.Diagnostics.Debugger.IsAttached) 下写

谢谢

# ios - 从 XML 显示图像

> ID：10967500
> 
> 赞同：1
> 
> 时间：2012-06-10T09:00:17.027
> 
> 标签：ios, uiimageview, nsxmlparser, nsdata, nsurl

我正在使用`NSXMLParser`并且我想将来自 XML 的图像显示为`<url>`使用`UITableViewCell`.

在表格视图中`cellForRowAtIndexPath`，我正在使用以下代码：

```
NSURL * imageURL = [NSURL URLWithString:[[stories objectAtIndex:indexPath.row] 
                           objectForKey:@"url"]];

NSData * imageData = [NSData dataWithContentsOfURL:imageURL];

UIImage * newsPhoto = [[UIImage alloc] initWithData:imageData];

cell.imageView.image = newsPhoto; 
```

但图像永远不会出现。我可以在日志中看到结果。

请指教。

# performance - 用 nan 替换第一个（x 个数字）非 nan 值

> ID：10967504
> 
> 赞同：1
> 
> 时间：2012-06-10T09:01:26.113
> 
> 标签：performance, matlab, matrix, replace, nan

假设我有以下矩阵：a =

```
 2   NaN   NaN
 4   NaN     3
 3     7     9
 5    12     5
 8    10     8
12     5    10 
```

我需要用 Nan 替换每列中的前 x 个非 Nan 值。

如果要替换的值的数量是 x = 3，那么新矩阵应该是：

b =

```
NaN   NaN   NaN

NaN   NaN   NaN

NaN   NaN   NaN

5     NaN   NaN

8     NaN   8

12    5     10 
```

任何想法如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:12:15.390

遍历列，然后遍历每列的成员，将前 3 个非 NaN 数字替换为 Nan：

```
for c = 1:size (a,2)
  col = a (:,c);
  replaced = 0;
  for r = 1:size (col)
    if (~isnan (col (r)))
      a (r,c) = Nan;
      replaced = replaced + 1
      if (replaced == 3)
        break;
      end
    end
  end
end 
```

我认为应该这样做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T12:06:06.583

这是一个矢量化的解决方案。`a`首先将（将被 new 替换的部分）的顶部部分`NaN`放入`aTopMatrix`. 然后得到下半部分`a`into `aLowMatrix`。然后通过使用逻辑寻址根据预先存在的值`aLowMatrix`替换s 的值。最后，创建一个大小为x的数组并将其垂直连接起来以获得所需的结果矩阵。`NaN``NaN``aTopMatrix``NaN``x``size(a,2)``aLowMatrix``b`

% 定义示例数据：

```
a = [ 2 NaN NaN; 4 NaN 3; 3 7 9; 5 12 5; 8 10 8; 12 5 10 ]
x = 3 
```

% 这是代码：

```
aTopMatrix = a(1:x, 1:end);
aLowMatrix = a(x+1:end, 1:end);
aLowMatrix(isnan(aTopMatrix)) = NaN;
b = [ ones(x, size(a,2))*NaN; aLowMatrix ]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T13:54:23.913

这是另一个矢量化代码：

```
%# given the data
a = [ 2 NaN NaN; 4 NaN 3; 3 7 9; 5 12 5; 8 10 8; 12 5 10 ]
x = 3

%# replace with NaNs
sz = size(a);
d = [ones(1,sz(2)) ; diff(~isnan(a))];
rIdx = arrayfun(@(k) find(d(:,k),1,'last'), 1:sz(2));
ind = bsxfun(@plus, sub2ind(sz, rIdx, 1:sz(2)), (0:x-1)');
a(ind(:)) = NaN; 
```

首先我们检查非 nan 元素，然后我们跨行检查`diff`结果。我们`1`在每列中找到最后一个的位置，转换为线性索引并将偏移量添加`x`到每列。最后，我们使用计算的索引替换为`NaN`s。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-10T09:32:28.587

```
class TestNan
{
    public static void main(String[] args)
    {
        double[][] mat = new double[6][3];
        //initialize the matrix here
        for(int i = 0; i<3; i++)
        {
            int x = 3; // no. of numbers to be replaced
            for(int j = 0; j<6; j++)
            {
                if(x == 0)
                    break;
                Double d = Double.valueOf(mat[i][j]);
                if(!d.isNaN())
                {
                    d = Double.NaN;
                    x--;
                }
            }
        }
        //Print your matrix here
    }   
} 
```

试试这个，如果你遇到任何问题，请告诉我！！

# ldap - 用于命名上下文的 openldap ACL

> ID：10967506
> 
> 赞同：0
> 
> 时间：2012-06-10T09:02:25.473
> 
> 标签：ldap, acl

我试图阻止访问我们的 openldap 的命名上下文。openldap 服务器为多个 DN 托管目录，我们不希望任何人能够识别服务器托管哪些 DN。

我了解namingContext 是一个操作属性，也是rootDSE 的一部分。显然，ldap 客户端需要访问 rootDSE 的某些条目才能正常运行。

另一方面，rootDSE 条目似乎也受 ACL 约束。

问题是是否要求namingContext 属性是公开可读的，以便客户端连接到服务器，或者是否可以限制namingContext 属性。如果是后者，什么是合适的 ACL？我们使用openldap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:44:36.030

以下访问控制：

```
access to attrs="namingContexts" by * none 
```

拒绝访问`namingContexts`.

# button - 如何创建动态按钮以调用具有不同参数的函数

> ID：10967508
> 
> 赞同：1
> 
> 时间：2012-06-10T09:02:40.043
> 
> 标签：button, dynamic, wsh, jscript

我正在尝试在 foobar2000 音乐播放器的 WSH 组件上构建 jscript 界面。
在某些时候，我需要创建可变数量的按钮，每个按钮都会调用相同的函数，但使用不同的参数。我可以使用*for 循环*和*array*创建按钮。但是，所有按钮都将仅传递**最后一个**按钮的参数。

这是我用来添加按钮的代码：

```
for (var i=0; i<_groupsArray.length; i++) {
    _btn = _groupsArray[i];
    ƒview.addButton(_btn, _img, function () {setView(_btn)}, function () {doPlay(_btn)});
} 
```

在这种情况下，_btn 既用作按钮标签，也用作我单击按钮时要传递给函数的参数（它将是艺术家姓名、专辑名称或类似名称）。*ƒview*是一个包含按钮的自定义对象。我创建了它，所以我不必指定按钮的位置，*ƒview*将在需要时计算它们。
这是实际创建按钮的 addButton 方法的一部分（其余部分会计算布局）。每个动作参数都作为参数传递给正在创建的按钮，而不由 addButton 方法进行任何处理。

```
this.addButton = function(label, img, action1, action2, action3, action4, action5) {
    ...
    new ButtonObject(label, __x, __y, __w, __h, action1, action2, action3, action4, action5); 
```

最后，我的 buttonObject 构造函数中有这个：

```
function ButtonObject(label, x, y, w, h, action1, action2, action3, action4, action5) {
    ...
    this.action1 = action1;
    this.action2 = action2;
    this.action3 = action3;
    this.action4 = action4;
    this.action5 = action5;
    ...
    this.act1 = function () {
        var __doIt = function () {this.action1();};
        return __doIt;
    } 
```

*在for 循环*中传递的函数最终将作为 action1, action2 ... 属性存储在对象中。
我尝试了许多不同的方法来调用*action1*方法，包括直接调用*this.action1()*；使用*this.action1.apply()*；如你所见，试图形成一个从句。要么它会调用正确的操作，但使用创建的**最后一个**按钮的参数，要么它会崩溃或无效。

我现在没有想法尝试。我分别通过函数和参数取得了一些部分成功，但这是一个丑陋的把戏。我已经阅读了许多关于从句以及它们如何使局部变量保持活动状态的教程，但在这种情况下我仍然没有设法让它们为我工作。当我单击带有“此对象不处理此属性或方法”指向该行的按钮时，我的最后一次尝试（如您在代码中看到的那样）将崩溃

```
var __doIt = function () {this.action1();}; 
```

那么我如何在每个按钮中保持参数“活着”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:55:56.803

尝试类似：

```
for (var i=0; i<_groupsArray.length; i++) {
    _btn = _groupsArray[i];
    ƒview.addButton(_btn, _img,
        function(b) {return function () {setView(b)};}(_btn),
        function(b) {return function () {doPlay(b)};}(_btn)
    );
} 
```

您需要创建一个闭包来保存 _btn 的值，而不仅仅是对其的绑定。额外的包装函数正是这样做的。

# iphone - iOS 获取当前 wlan 网络名称

> ID：10967511
> 
> 赞同：17
> 
> 时间：2012-06-10T09:03:26.537
> 
> 标签：iphone, objective-c, ios, networking, wifi

我正在寻找一种方法来获取iOS5的objective-c中当前连接的wlan网络的信息（至少是名称）。

我需要这个，因为我们目前正在开发一个不能在特定网络中运行的应用程序。在这个网络（在我们大学）中，我们需要连接到服务器的端口是关闭的。但是还有另一个网络可用，我们想告诉用户，如果他连接到上述网络，他必须切换网络。

我什至不知道从哪里开始。有没有人有想法或任何提示？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T09:38:58.203

从 iOS >= 4.1 可以获取设备当前连接的无线网络的 SSID。

为此，您将使用函数[CNCopyCurrentNetworkInfo](http://developer.apple.com/library/ios/documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html#//apple_ref/doc/uid/TP40009770-CH101-SW4)

SO上提供了有关实施的详细信息：[iPhone get SSID without private library](https://stackoverflow.com/a/5198968/653513)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-04-21T13:05:35.120

可以从 Captive Network 获取当前的 wifi 信息。过去，苹果实际上禁用了一段时间，但由于强烈要求，他们似乎重新启用了它。他们也有可能决定在未来关闭它。

我们可以得到的信息是`BSSID`, `SSID`, `SSIDDATA`. `BSSID`是 wifi 的唯一地址，`SSID`是当前 wifi 名称，`SSIDDATA`是`SSID`.

### 对于 Swift 3.1：

```
func printCurrentWifiInfo() {
  if let interface = CNCopySupportedInterfaces() {
    for i in 0..<CFArrayGetCount(interface) {
      let interfaceName: UnsafeRawPointer = CFArrayGetValueAtIndex(interface, i)
      let rec = unsafeBitCast(interfaceName, to: AnyObject.self)
      if let unsafeInterfaceData = CNCopyCurrentNetworkInfo("\(rec)" as CFString), let interfaceData = unsafeInterfaceData as? [String : AnyObject] {
        // connected wifi
        print("BSSID: \(interfaceData["BSSID"]), SSID: \(interfaceData["SSID"]), SSIDDATA: \(interfaceData["SSIDDATA"])")
      } else {
        // not connected wifi
      }
    }
  }
} 
```

### 对于 Objective-C

```
NSArray *interFaceNames = (__bridge_transfer id)CNCopySupportedInterfaces();

for (NSString *name in interFaceNames) {
  NSDictionary *info = (__bridge_transfer id)CNCopyCurrentNetworkInfo((__bridge CFStringRef)name);

  NSLog[@"wifi info: bssid: %@, ssid:%@, ssidData: %@", info[@"BSSID"], info[@"SSID"], info[@"SSIDDATA"]];
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-09-20T14:03:40.453

从 iOS 12 开始，您需要在功能中允许 Wifi 信息访问。

来自[苹果](https://developer.apple.com/documentation/systemconfiguration/1614126-cncopycurrentnetworkinfo)：

> 要在 iOS 12 及更高版本中使用此功能，请在 Xcode 中为您的应用启用访问 WiFi 信息功能。当您启用此功能时，Xcode 会自动将 Access WiFi Information 权利添加到您的权利文件和 App ID 中。

# visual-c++ - ConnectEx 在哪里定义？

> ID：10967516
> 
> 赞同：5
> 
> 时间：2012-06-10T09:05:14.120
> 
> 标签：visual-c++, windows-7, asynchronous, connect

我想用 MSVC2010 在 Windows7 上使用 ConnectEx 功能。

我收到错误 C3861：“ConnectEx”：找不到标识符

MSDN 建议该函数应该在 mswsock.h 中声明，但是，在检查它时，它并没有在那里定义。

有小费吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T09:43:30.180

如果您进一步阅读您提到[的 MSDN 文章`ConnectEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737606.aspx)，它会说：

> **注意****ConnectEx**函数的函数指针必须在运行时通过调用指定了**SIO_GET_EXTENSION_FUNCTION_POINTER操作码的**[**WSAIoctl**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741621.aspx)函数来 获取。传递给 WSAIoctl 函数的输入缓冲区必须包含**WSAID_CONNECTEX**，这是一个全局唯一标识符 (GUID)，其值标识**ConnectEx** 扩展函数。**成功时， WSAIoctl**函数返回的输出 包含一个指向**ConnectEx**函数的指针。WSAID_CONNECTEX GUID 在**Mswsock.h**头文件中*定义。*

 *******与其他 Windows API 函数不同，`ConnectEx()`必须在运行时加载，因为头文件实际上不包含函数声明`ConnectEx()`（它确实有一个`typedef`for 函数调用`LPFN_CONNECTEX`），并且文档没有特别提到您必须链接的特定库为了使它工作（通常是其他 Windows API 函数的情况）。

这是一个如何使它工作的示例（为说明省略了错误检查）：

```
#include <Winsock2.h> // Must be included before Mswsock.h
#include <Mswsock.h>

// Required if you haven't specified this library for the linker yet
#pragma comment(lib, "Ws2_32.lib")

/* ... */

SOCKET s = /* ... */;
DWORD numBytes = 0;
GUID guid = WSAID_CONNECTEX;
LPFN_CONNECTEX ConnectExPtr = NULL;
int success = ::WSAIoctl(s, SIO_GET_EXTENSION_FUNCTION_POINTER,
    (void*)&guid, sizeof(guid), (void*)&ConnectExPtr, sizeof(ConnectExPtr),
    &numBytes, NULL, NULL);
// Check WSAGetLastError()!

/* ... */

// Assuming the pointer isn't NULL, you can call it with the correct parameters.
ConnectExPtr(s, name, namelen, lpSendBuffer,
    dwSendDataLength, lpdwBytesSent, lpOverlapped); 
```*******

# java - 如何使用设计选项卡和源选项卡创建我自己的 XML 编辑器？

> ID：10967517
> 
> 赞同：-3
> 
> 时间：2012-06-10T09:05:40.700
> 
> 标签：java, xml, eclipse-plugin, editor, swt

以下是带有设计选项卡和源选项卡的 xml 编辑器：http: [//publib.boulder.ibm.com/infocenter/adiehelp/v5r1m1/topic/com.ibm.etools.xsdeditor.doc/images/ncalxml.gif](http://publib.boulder.ibm.com/infocenter/adiehelp/v5r1m1/topic/com.ibm.etools.xsdeditor.doc/images/ncalxml.gif)

我想用 SWT 创建这样一个编辑器，也就是我想开发一个**Eclipse 插件**：XML Editor。我希望 XML 编辑器包括一个设计选项卡和一个源选项卡，就像上面的屏幕截图一样。我想使用 java swt 开发 xml 编辑器。我需要一个关于开发 xml 编辑器的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:47:42.063

“从头开始，”国王很严肃地说，“一直走到尽头：然后停下来。” （刘易斯卡罗尔 - 爱丽丝梦游仙境）。

这是一项艰巨的任务。你需要把它分成更小的步骤，然后处理每一个。开始后，您可能有更具体的问题要问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:23:58.880

我会使用 JFace 而不是直接的 SWT。JFace 已经完成了编辑器创建和操作的大部分工作。看看 MultiPageEditor。

您可能还想考虑 Xtext。

# xml - XML 和 XSLT 中的通配符格式

> ID：10967522
> 
> 赞同：1
> 
> 时间：2012-06-10T09:06:44.123
> 
> 标签：xml, xslt, wildcard, typography

为什么没有这一行：

**`apply-templates select="*/*`**（在 XSLT 文件中的“shop”元素下）

将粗体格式应用于`Blake2`? 输出如下所示：

> XSLT 中 root 的开始
> 
> “第 1 步开始” **Alexis**（任务：销售） **Employee2**（任务：） Blake2 “第 1 步完成”
> 
> XSLT 中根的结尾

我的问题是，为什么不是`Blake2`粗体？它在`<employee>`元素之下。

将该行更改为**`*apply-templates select="*"`**粗体`Blake2`。是什么让这与众不同？

这是 XML 文件：

```
<?xml version="1.0"?> 
<?xml-stylesheet type="text/xsl" href="2.xsl" ?>

<root>
    <shop>
        <person> 
            <employee> 
                <name> Alexis </name> 
                <role> Manager </role> 
                <task> Sales </task> 
            </employee> 

            <employee>
                <name> Employee2 </name>
            </employee>
        </person>

        <employee>
            <name> Blake2 </name>
        </employee>

    </shop>

</root> 
```

这是 XSLT 文件：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="root"> 
<html><head></head> 
<body>
Start of root in XSLT <p/> <xsl:apply-templates /> <p/>

End of root in XSLT

</body> 
</html> 
</xsl:template> 

<xsl:template match="shop">
"Step 1 start"
<xsl:apply-templates select="*/*"/>
"Step 1 done" <p/>
</xsl:template> 

<xsl:template match="employee"> 
<b> <xsl:apply-templates select="name"/> </b> 
(Task: <xsl:apply-templates select="task"/>) 
<br></br> 
</xsl:template> 

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:04:11.150

**首先，让我们看看 xslt 处理器是如何工作的。**为了运行/实例化/激活 xslt 中的模板，它们必须“匹配”。现在，问问自己：

*   他们匹配什么？
*   例如，什么*是*满足的`match="root"`？

随着 xslt 的加载，输入文档，或者更确切地说，它的顶级节点，会受到它的注意。您的输入文档以一个`root`节点开始，所以这就是首先进入 xslt 的内容。它立即满足`match="root"`。简单的。

**现在对于`employee`**，那颗小宝石什么时候匹配？

好吧，xslt 处理器不会遍历每个可能的节点并查看它是否有匹配的模板。*它只对您告诉它的节点执行此操作*。

*   这就是你要做的`xsl:apply-templates select='...'`。
*   为了`employee`使输入中的 -nodes 成为 xslt-ed，需要在`xsl:apply-templates`某处选择它们。

**好的，那发生了什么？**在您的`shop`模板中，您选择`*/*`将模板应用到，即“当前节点的子节点的子节点”（如果您愿意，可以选择“孙子节点”）。

*   `shop`模板中的当前节点`shop`表示人员节点内的两个员工节点被选中（`*/*`扩展为`person/employee`）。
*   Blake2 是节点的兄弟`shop`节点，不会被选中。
*   更改`*`为`select`返回作为 shop 节点的子节点的`person`和`employee`节点。

**那么不*加粗的 Blake2*是从哪里来的呢？**好吧，非粗体 Blake2 并非源自您创建的任何模板，他只是默认行为的受害者，其中文本节点而非元素节点从输入复制到输出。

* * *

如果你想真正使用 xslt，你需要学习一些东西。我建议从身份转换开始（谷歌是你的朋友），然后通过为它们提供一个空模板来删除一些元素。比进行一对一的翻译，比如说，将所有元素大写。混入属性。尝试使用 xpath 条件 ( `[this stuff]`) 进行更严格的匹配。看看更复杂的结构，例如条件和循环结构。深入研究变量、参数和调用模板。使用文档（）。

玩得开心！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T09:17:41.787

您的第三个模板不会选择`<employee>`文档中的任何元素。它只选择`<employee>`作为当前元素的直接子节点的元素。在根级别，这不适用于任何元素，但由于第二个模板由`<apply-templates>`第一个元素`*/*`中的当前元素的子元素），`<employee>`元素中的`<person>`元素被选中。

第二个`<employee>`元素不是元素的子元素的子`<shop>`元素，而是元素的直接子`<shop>`元素，因此不会通过`*/*`从 at 开始选择`<shop>`。

当您更改`*/*`为 时`*`，两个`<employee>`元素都被选中：第二个元素被选中，因为它直接匹配`*`（的直接子元素`<shop>`）。`*`也选择`<person>`，并且由于没有为该元素指定模板，因此将执行默认行为，这意味着模板将应用于 的子元素`<person>`，其中包括第一个`<employee>`元素。

# jakarta-ee - 使用 struts 2.3 jars 的调度程序初始化失败

> ID：10967528
> 
> 赞同：2
> 
> 时间：2012-06-10T09:09:08.767
> 
> 标签：jakarta-ee, struts2

我正在尝试一个带有 struts2.3 jar 的简单 struts2 应用程序，但它给出了调度程序初始化错误

2.3 罐子包括：

```
commons-beanutils-1.7.0.jar
commons-chain-1.2.jar
commons-collections-3.1.jar
commons-digester-2.0.jar
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-lang-2.5.jar
commons-logging-1.1.1.jar
commons-logging-api-1.1.jar
commons-validator-1.3.1.jar
freemarker-2.3.18.jar
ognl-3.0.4.jar
struts2-core-2.3.1.2.jar
xwork-core-2.3.1.2.jar 
```

web.xml 是

```
 <filter>
  <filter-name>struts2</filter-name>
  <filter-class> org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>

  <filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

struts.xml 是：

```
<struts>

<constant name="struts.devMode" value="true" />

<package name="/abc"  extends="struts-default">

<!-- action declarations.... -->
<action name="login" class="actions.TestLogin">
<result name="success">/WEB-INF/results/success.jsp</result>
<result name="error">/WEB-INF/results/error.jsp</result>
</action>

</package>
</struts> 
```

异常堆栈是：

```
SEVERE: Dispatcher initialization failed
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:295)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
    at com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:252)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:193)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    ... 33 more
Caused by: java.lang.ExceptionInInitializerError
    at com.opensymphony.xwork2.ognl.OgnlValueStackFactory.setContainer(OgnlValueStackFactory.java:85)
    ... 38 more
Caused by: java.lang.IllegalArgumentException: Javassist library is missing in classpath! Please add missed dependency!
    at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:168)
    ... 39 more
Caused by: java.lang.ClassNotFoundException: javassist.ClassPool
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:165)
    ... 39 more
11 Jun, 2012 9:14:47 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter Struts2
java.lang.reflect.InvocationTargetException - Class: com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector
File: ContainerImpl.java
Method: inject
Line: 295 - com/opensymphony/xwork2/inject/ContainerImpl.java:295:-1
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:449)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:295)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
    at com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:252)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:193)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
    ... 20 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    ... 33 more
Caused by: java.lang.ExceptionInInitializerError
    at com.opensymphony.xwork2.ognl.OgnlValueStackFactory.setContainer(OgnlValueStackFactory.java:85)
    ... 38 more
Caused by: java.lang.IllegalArgumentException: Javassist library is missing in classpath! Please add missed dependency!
    at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:168)
    ... 39 more
Caused by: java.lang.ClassNotFoundException: javassist.ClassPool
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:165)
    ... 39 more
11 Jun, 2012 9:14:47 PM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
11 Jun, 2012 9:14:47 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/Pr_StrutsLoginMap] startup failed due to previous errors
11 Jun, 2012 9:14:47 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/Pr_StrutsLoginMap] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@2d13981b]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@61672bbb]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
11 Jun, 2012 9:14:47 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
11 Jun, 2012 9:14:47 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
11 Jun, 2012 9:14:47 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/16  config=null
11 Jun, 2012 9:14:47 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 4032 ms 
```

我尝试使用带有 web.xml 的 struts 2.0 jar 执行相同的应用程序

```
<filter>
  <filter-name>struts2</filter-name>
  <filter-class> org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
  </filter>

  <filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

它是工作文件，但是使用 struts 2.3 jars 它给出了一个异常我无法弄清楚问题是什么。请提出可能是什么问题

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:42:08.243

在您的库中维护以下版本的 jar。我想你不会遇到任何问题

```
antlr-2.7.6.jar
commons-beanutils-1.7.0.jar
commons-collections-3.2.jar
commons-digester.jar
commons-fileupload-1.2.2.jar
commons-io-2.4.jar
commons-lang-1.2.jar
commons-logging-1.1.jar
freemarker-2.3.16.jar
javassist-3.7.ga.jar
ognl-3.0.jar
struts2-core-2.2.3.jar
xwork-core-2.2.1.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T15:08:33.677

伙计，您的错误堆栈跟踪本身会告诉您问题所在，请参阅堆栈跟踪中的这一行：

```
Caused by: java.lang.IllegalArgumentException: Javassist library is missing in classpath! Please add missed dependency!
at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:168) 
```

这意味着缺少 javassist-3.11.0.GA.jar（或类似的）文件。添加该文件，尝试再次运行您的应用程序，然后查看它给出的其他错误。祝你好运:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T04:36:24.633

当某些 jar 丢失时会出现此错误。所以我使用您提供的 jar 测试了 struts 简单应用程序，与您定义的问题相同，但在包括这 4 个必要的 jar 之后

```
commons-lang3-3.1.jar
javaassist-3.11.0.GA.jar
asm-3.3.jar
asm-commons-3.3.jar 
```

问题解决了 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-21T15:53:02.767

尝试这个：

```
<filter>
  <filter-name>struts2</filter-name>
  <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# java - 黑屏前的Android启动画面

> ID：10967532
> 
> 赞同：3
> 
> 时间：2012-06-10T09:09:34.537
> 
> 标签：java, android, splash-screen

我想在 onCreate() 方法中初始化所有内容时显示启动画面，但是我需要将内容绘制到屏幕上的组件也在初始化，因此在我启动应用程序时和 onCreate() 之后出现黑屏方法已完成，然后只绘制第一个屏幕。我想要一个启动画面，而不是黑屏。

这是我在 onCreate 方法中的代码：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Acquire a wakeLock to prevent the phone from sleeping
        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "GLGame");

        // Setup all the Game Engine components 
        gameEngineLog = new WSLog("WSGameEngine");
        gameEngineLog.setLogType(this.gameEngineLogType);
        gameLog = new WSLog(this.gameLogTAG);
        gameLog.setLogType(this.gameLogType);
        io = new FileIO(this, getAssets());
        audio = new Audio(this);
        wsScreen = new WSScreen(this, this.screenResizeType, this.customTopYGap, this.customLeftXGap, this.gameScreenWidth, this.gameScreenHeight);
        graphics = new Graphics(this, wsScreen.getGameScreen(), wsScreen.getGameScreenextended());
        renderView = new RenderView(this, wsScreen.getGameScreen(), wsScreen.getGameScreenextended(), FPS, maxFrameskippes);
        input = new Input(this, renderView, logGameEngineInputLog);
        setContentView(renderView);

        if(useOfAnalytics == true) {
            getGameEngineLog().w(classTAG, "Analytics has been enabled");
            analytics = new Analytics(this);
        }

        // Check that the developer has initialized the assets
        if(this.assets == null) {
            this.gameEngineLog.w(classTAG, "The assets for the game haven't been defined!");
        }

    } 
```

我应该如何实现启动画面，以避免一开始出现黑屏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T09:20:00.710

//避免在 UI 线程中进行耗时的工作，但如果这与 UI 本身有关，则执行以下操作

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

            setContentView(R.layout.first_splash_lauoy);

            new Handler().postDelayed(new Runnable() {

                public void run() {
                  //Your time consuming work 
                  //with spiiner(if needed) & setContentView(<finalView>)
                  }, 1000);
        }

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T09:20:13.000

为这个初始屏幕创建一个 XML 布局，并在您的 super.onCreate() 之后将其设置为内容视图：

```
super.onCreate(savedInstanceState);
setContentView (R.layout.splash_screen); 
```

这应该足够了。在调用您的 setContentView(renderView) 之前，它将显示此启动画面。

# ipv6 - IPv6 中的速率限制/禁止 IP

> ID：10967534
> 
> 赞同：10
> 
> 时间：2012-06-10T09:10:01.313
> 
> 标签：ipv6

速率限制对于保护登录系统以防止尝试失败或限制每个 IP 的客户端资源使用作为反滥用措施等情况很有用。它对 IPv4 地址也非常有效，因为只有拥有数千个强大僵尸网络的人才能绕过它足够长的时间以造成损害。

您如何在 IPv6 中实现这一点？据我了解，如今专用主机为您提供 /64 块，大约是 18 个 quintillion 地址。住宅 ISP 呢？IPv6 部署中是否使用了最小和/或最大块大小？甚至可以在 IPv6 中采用有效的速率限制方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T09:49:25.600

/64 大致映射到单个住宅网络——与单个 IPv4 地址映射到单个住宅网络非常相似。许多提供商为最终用户分配 /60、/56 或 /48 子网（我的 ISP，Internode，[为每个住宅和企业用户名分配静态 /56](http://www.internode.on.net/about/our_network/ipv6/)）

因此，如果您根据 /64 进行速率限制（即忽略最后 64 位），那么您很有可能准确地对单个用户进行速率限制。

还有一点，Windows Vista 及更高版本、Mac OS X v10.7 及 Ubuntu 12.04 及更高版本等操作系统使用随机主机标识符进行传出连接。这意味着您看到的 IPv6 地址的最后 64 位总是随机的（嗯，每次重启时都是随机的），所以您不妨忽略它们。如果您只查看前 64 位，它们更有可能是静态的（或者至少是长期存在的）。

# actionscript-3 - 推荐的 Ipad 视频格式

> ID：10967535
> 
> 赞同：1
> 
> 时间：2012-06-10T09:10:07.467
> 
> 标签：actionscript-3, ipad, apache-flex, air

我有一个我编译在 Ipad 上运行的空中应用程序，其中一个功能是显示一个大约 8 分钟长的视频。我必须运行哪些选项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:14:12.283

您可以使用其中一个`flv`或`H.264`为此。

另外，请查看此文档：
[http ://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d46.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d46.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:27:51.337

检查我发布了一段时间的这个问题

[iOS 上的 Flash/AIR 舞台视频 - 有可能吗？表现如何？](https://stackoverflow.com/questions/10071706/flash-air-stage-video-on-ios-is-it-possible-how-is-the-performance)

您甚至可以使用舞台视频来获得最佳表演！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:35:14.997

如果您有静态媒体文件，只需将其放到 http 服务器即可。对于 iOS 设备，mov (h264/aac) 是苹果产品的最佳选择。

如果您计划流媒体资源，请考虑[http live streaming](https://developer.apple.com/streaming/)。

# java - 适用于模拟器，不适用于设备。不幸的是 iNemoADK 已停止

> ID：10967536
> 
> 赞同：-1
> 
> 时间：2012-06-10T09:10:07.060
> 
> 标签：java, android, adk

我尝试在设备上运行示例程序（与附件开发套件和 stm32 相关）但无法成功修复。我导入到 eclipse，检查并且我能够在虚拟设备上运行，它运行良好。但是当我尝试在设备上运行时，它会显示“不幸的是，iNemoADK 已停止”。我在stackoverflow上进行了搜索，其中一位用户遇到了这个问题，并通过添加 setContentView(R.layout.layoutname) 解决了这个问题，但我无法解决我的问题。这是我的启动器：

```
 @Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    mUsbManager = UsbManager.getInstance(this);

    setContentView(R.layout.main);
    /* Handle the Accessory stuff */
    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    filter.addAction(UsbManager.ACTION_USB_ACCESSORY_DETACHED);
    registerReceiver(mUsbBroadcastReceiver, filter);

    final ActivityDataObject obj = (ActivityDataObject)getLastNonConfigurationInstance();
    if (obj != null){
        // TODO seguita la documentazione ma non funziona (???) 
        this.mAccessory = obj.getmAccessory();
        this.mINemoInfo = obj.getmINemoInfo();
        if(this.mAccessory != null){
            openAccessory(this.mAccessory);
        }
    }

    this.setStatus(mStatus);
} 
```

这是我的整个项目：

[http://www.mediafire.com/?55uarh7v5f3vl55](http://www.mediafire.com/?55uarh7v5f3vl55)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:13:23.610

您没有指定您的代码实际遇到的问题，只是症状（“不幸...”消息是您的应用程序抛出您未处理的异常的标志）。

使用[aLogRec 之](https://play.google.com/store/apps/details?id=org.jtb.alogrec)类的东西来查看实际发生的情况 - 问题可能很明显，您可以弄清楚。

# android - android中的启动画面不起作用

> ID：10967537
> 
> 赞同：0
> 
> 时间：2012-06-10T09:10:12.807
> 
> 标签：android

我正在使用代码在堆栈溢出上发布的 android 应用程序的初始屏幕代码。我无法获得输出。这是代码。

```
package com.splash;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
public class SplashScreen extends Activity {

        private static final int SPLASH_DISPLAY_TIME = 3000;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.splash);

            new Handler().postDelayed(new Runnable() {

                public void run() {

                    Intent mainIntent = new Intent(Splashscreen.this,
                            MainActivity.class);
                    Splashscreen.this.startActivity(mainIntent);

                    Splashscreen.this.finish();
                    overridePendingTransition(R.anim.mainfadein,
                            R.anim.splashfadeout);
                }
            }, SPLASH_DISPLAY_TIME);
        }
    }
} 
```

这是 splash.xml 文件；

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<ImageView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:src="@drawable/splash" />
</LinearLayout> 
```

请告诉我如何解决它。我还有用于闪屏图像的淡入淡出 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:55:07.553

最有可能的是，您没有“MainActivity”类。检查它的名称是否正确。并确保它在正确的包中并添加到清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:41:17.007

确保将 MainActivity 添加到 AndroidManifest.xml。从 logcat 发布异常堆栈跟踪也会有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T09:12:18.110

`public class SplashScreen extends Activity {`在您的代码中两次..

让它单身。

```
package com.splash;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
public class SplashScreen extends Activity {

        private static final int SPLASH_DISPLAY_TIME = 3000;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.splash);

            new Handler().postDelayed(new Runnable() {

                public void run() {

                    Intent mainIntent = new Intent(Splashscreen.this,
                            MainActivity.class);
                    Splashscreen.this.startActivity(mainIntent);

                    Splashscreen.this.finish();
                    overridePendingTransition(R.anim.mainfadein,
                            R.anim.splashfadeout);
                }
            }, SPLASH_DISPLAY_TIME);
        }
    } 
```

# php - 在 ajax 中提交一个选择字段（不是整个表单）以获取它的值并在同一页面上的 php 中过滤另一个选择

> ID：10967539
> 
> 赞同：0
> 
> 时间：2012-06-10T09:10:34.850
> 
> 标签：php, ajax, input

这是我在 Ajax（或 Jquery）中的第一次编程经验，所以我感谢任何形式的帮助。我想要做的是我的 html 表单中有 2 个选择输入，当第一个选择被更改（onchange）时，我想要它的值来使用它来过滤 php 中的第二个选择以动态生成它的选项，那必须在没有提交整个表单的情况下发生，只有第一个选择。我尝试了以下代码，但是每当第一个选择更改时，它都会提交整个表单。ajax函数：

```
function showKadaa(str)
{
if (str=="")
{
document.getElementById("txtHint").innerHTML="";
return;
} 
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();  
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{   
document.getElementById("kop").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","annonce.php?mid="+str,true);
xmlhttp.send();
} 
```

带有 php 的 html 代码部分：

```
<?php if(isset($_GET['mid']))
$q=$_GET['mid'];
else $q=$_SESSION['mid'];?>

//code goes here

<tr><td>Kadaa:</td><td><div id="kop"><select name="kadaa" id="kad" ><option value="default">[Choisir     Kadaa]</option>

<?php
            if(login_db()){                     
                $req="SELECT `nom_kadaa`,`id` FROM `kadaa` WHERE `id_mohafaza`=".$q.""; 
                echo $req;
                $kadaa="";
                if($res=mysql_query($req)){
                    while($l=mysql_fetch_array($res)){
                        echo "<option value=".$l[1].">".$l[0]."</option>";
                    }                       
                }
            }               
        ?>
</select></div></td></tr> 
```

PS：无论我把 id="kop"
的 div 放在哪里，整个页面都会在其中提交。我在同一页面上使用两个选择的另一件事

```
form action="<?php echo $_SERVER['PHP_SELF'];?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:31:58.000

获取字段值：jquery 很乐意使用

```
$("#IdOfElement").val(); 
```

顺便说一句，jquery 有很多更方便的 ajax 方法：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

# android - Windows Media Player 无法播放在 Android 中创建的 MPEG-TS 文件。

> ID：10967542
> 
> 赞同：2
> 
> 时间：2012-06-10T09:11:56.917
> 
> 标签：android, mpeg2-ts, stagefright

我测试了 StageFright 记录示例 (frameworks/base/cmds/stagefright/record) 以创建 mpeg2 TS 文件。虽然它可以在 Android 默认媒体播放器上播放，但不能在 Windows Media Player 或 MPlayer 上播放。有什么建议么？

请注意，我修改了原始记录示例源以创建 MPEG-TS 文件而不是 MP4 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:38:27.170

您用于创建 mpeg2 TS 文件的编解码器。可能是使用的编解码器不同是问题所在。

# objective-c - 将图片从 assets-library 复制到 app 文件夹

> ID：10967549
> 
> 赞同：2
> 
> 时间：2012-06-10T09:12:56.573
> 
> 标签：objective-c, ios, uiimagepickercontroller, nsurl, alassetslibrary

我有一个 UIImagePickerController，我想将选定的图像保存到我的应用程序中。我可以通过获取当前 UIImage 并保存它（通过创建文件）来轻松做到这一点，但我更愿意直接将文件从库中复制到我的文件夹中。所以现在我有一个所选图像的 URL：UIImagePickerControllerReferenceURL，它返回一个特定的模式“assets-library”。我试图将图像从这种 URL 复制到路径但没有成功。

有没有办法在我想做的事情上取得成功？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:21:29.017

你可以通过两种方式做到这一点

**第一种方式：**使用**imagePickerController** *`didFinishPickingMediaWithInfo`*委托

```
-  (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

     UIImage *selectedImage = [info valueForKey:UIImagePickerControllerOriginalImage];

    //save selectedImage to document directory      

 } 
```

**第二种方式：**使用`ALAssetLibrary`.

为此，您必须使用保存`ALAsset URL`和检索图像`ALAssetLibrary`，请参阅[我的答案以获取详细信息](https://stackoverflow.com/questions/13508535/add-uiimageview-into-uiscrollview-inside-block-with-alasset/13508841#13508841)。只需将您的`ALAsset url`而不是`asseturl`

# vim - Vim 折叠 - 标记打开的折叠

> ID：10967550
> 
> 赞同：7
> 
> 时间：2012-06-10T09:13:02.127
> 
> 标签：vim, folding

有没有办法查看当前文件中打开的折叠在哪里？我个人在打开折叠并四处移动时遇到问题，我无法找到折叠开始的线！也许有一个选项可以在数字旁边设置一个漂亮的折叠提示。也许是这样的：

```
+ 1 void myfunc(void) {
| 2     printf("Hello World\n");
| 3     printf("Goodby World!\n");
- 4 }
  5
  6 void anotherfunc(void)
... 
```

这将是非常好的！我已经使用了谷歌，也使用了 vim-help，但没有办法做到这一点。

亲切的问候，musicmatze

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T09:16:47.137

尝试 `:set foldcolumn=1`

如果您想要更多折叠列指标增加数量，下面的示例使用`:se fdc=3` （快捷方式）

![在此处输入图像描述](../Images/9755078f9adaf5c4120a9ec7fc677654.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-03T10:36:35.777

一点可能会有所帮助。如果你想改变折叠颜色： 如果你使用 gvim：

```
:highlight Folded guibg=grey guifg=blue
:highlight FoldColumn guibg=darkgrey guifg=white 
```

但是，如果您从终端使用 vim：

```
hi Folded ctermbg=black 
```

我在 vimrc 中的设置是：

```
colorscheme desertEx
"some modifications to the colorscheme
"to view current settings use for instance ':hi Folded'
set foldcolumn=3
hi FoldColumn ctermfg=216
hi FoldColumn ctermbg=black
hi Folded ctermfg=216
hi Folded ctermbg=black 
```

# python - 如何在 Python 中动态创建属性？

> ID：10967551
> 
> 赞同：19
> 
> 时间：2012-06-10T09:13:03.240
> 
> 标签：python

假设我有这样的课程：

```
class Alphabet(object):
     __init__(self):
         self.__dict = {'a': 1, 'b': 2, ... 'z': 26}

     @property
     def a(self):
         return self.__dict['a']

     @property
     def b(self):
         return self.__dict['b']

     ...

     @property
     def z(self)
         return self.__dict['z'] 
```

这将是一项漫长而繁琐的定义任务，而且似乎非常多余。有没有办法动态创建这些属性？我知道您可以使用内置的 setattr 动态创建属性，但我想控制读/写/删除访问（因此我想使用属性）。谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-10T09:26:05.813

不要使用属性，但要实现以下方法：

*   `__getattr__(self, name)`
*   `__setattr__(self, name, value)`
*   `__delattr__(self, name)`

请参阅[http://docs.python.org/reference/datamodel.html#customizing-attribute-access](http://docs.python.org/reference/datamodel.html#customizing-attribute-access)

您的`__getattr__`方法可能如下所示：

```
def __getattr__(self, name):
    try:
        return self.__dict[name]
    except KeyError:
        msg = "'{0}' object has no attribute '{1}'"
        raise AttributeError(msg.format(type(self).__name__, name)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T10:07:42.953

不要那样做。让班级的消费者`__dict`直接上台，并相信他们不会搞砸。请记住，我们在这里都是同意的成年人！

Ned Batchelder 解释得比我还好：

* * *

## [将数据保留在变量名之外](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)

> 这个问题让我想起了我在 Stack Overflow 或 #python IRC 频道中看到的其他人：
> 
> *   如何查看变量是否存在？
> *   如何使用一个变量作为另一个变量的名称？
> *   如何使用变量作为 SQL 表名的一部分？
> 
> 所有这些的共同点是试图弥合两个域之间的差距：程序中的数据，以及程序中数据的名称。任何时候发生这种情况，这都是一个明确的信号，表明您需要在数据建模中提升一个级别。您需要一本字典，而不是 26 个列表。而不是 N 个表，您应该有一个表，其中还有一列。

# android - 访问 com.android.internal.telephony.Call

> ID：10967553
> 
> 赞同：2
> 
> 时间：2012-06-10T09:13:09.287
> 
> 标签：android, api, phone-call, internal

我需要访问 com.android.internal.telephony.Call。

这样做：

```
// Initialize the telephony framework
PhoneFactory.makeDefaultPhones (this);

// Get the default phone
Phone phone = PhoneFactory.getDefaultPhone ();

CallManager mCM = CallManager.getInstance ();
mCM.registerPhone (phone);

Call call = mCM.getFirstActiveBgCall(); 
```

但不扩展以初始化框架。

帮我初始化呼叫。

我需要读取呼叫的状态，例如：IDLE、ACTIVE、HOLDING、DIALING、ALERTING、INCOMING、WAITING、DISCONNECTED、DISCONNECTING。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:19:16.077

您需要使用[PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html) 它将为您提供让您的应用程序监听电话的不同状态的工具。您需要放入`<uses-permission android:name="android.permission.READ_PHONE_STATE"/>`清单文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T08:15:36.867

您可以，但有一个关键要求：应用程序必须在系统级别签名，这意味着**您是制造商**。

这是您编写服务的方法，该服务将为前台调用状态的每次更改广播一个意图。

```
/*
 * This implementation uses the com.android.internal.telephony package: you have
 * to extract the framework classes .jar file from the platform (or the
 * emulator) to compile this code. Also, add the jar file to the external
 * libraries in the Java Build Path/libraries of the android project. </p>
 * 
 * The jar file must match the android version you are building the application
 * for. Because this implementation is using the internal packages it cannot be
 * guaranteed to operate on later versions of android.
 */
public class CallStateNotificationService extends Service {

    private static final String LOG_TAG = CallStateNotificationService.class.getSimpleName();

    private Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);

            if (msg.what == 101) {
                CallManager callManager = CallManager.getInstance();
                Call.State state = callManager.getActiveFgCallState();

                Intent intent = new Intent(PhoneIntents.ACTION_PRECISE_CALL_STATE);
                intent.putExtra(PhoneIntents.PRECISE_CALL_STATE, state.name());

                Context context = getApplicationContext();
                context.sendBroadcast(intent);
            }
        }
    };

    @Override
    public void onCreate() {
        super.onCreate();

        try {
            CallManager callManager = CallManager.getInstance();
            if (callManager != null) {
                callManager.registerForPreciseCallStateChanged(mHandler, 101, null);
            } else {
                Log.w(LOG_TAG, "Can't resolve CallManager reference"); //$NON-NLS-1$
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        CallManager callManager = CallManager.getInstance();
        if (callManager != null) {
            callManager.unregisterForPreciseCallStateChanged(mHandler);
        } else {
            Log.w(LOG_TAG, "Can't resolve CallManager reference"); //$NON-NLS-1$
        }
    } 
```

这是自定义广播意图的定义。

```
/** Intent action and extra argument names for CallStateNotificationService */
public final class PhoneIntents {

    public static final String ACTION_PRECISE_CALL_STATE = "com.myorg.myapp.CALL_STATE";

    public static final String PRECISE_CALL_STATE = "precise_call_state";
} 
```

要编译和链接此代码，您当然需要将程序构建为 android 发行版本身的一部分，或者通过 Internet 上其他地方解释的方法导入类框架。

所有这些目前都在一个正在生产的应用程序中。

# java - 休眠数据一致性

> ID：10967556
> 
> 赞同：0
> 
> 时间：2012-06-10T09:14:12.727
> 
> 标签：java, hibernate, servlets, consistency

我有 java-servlet 应用程序 +hibernate + 流服务器

**流动：**

1.  用户登录开始视频流
2.  每 2 秒减少数据库中的 abonament 分钟数
3.  if minutes < 0 发送新分钟的请求（响应可能在很长一段时间后，如果是继续递减）

**问题：**

出现数据一致性问题，换句话说，在减少分钟数时，例如：`user.setMinutes(user.getMinutes() - 2)`可能看不到新分钟数响应所做的更改，分钟数将被破坏

我认为解决方案可以创建新的休眠事务并在每次更改分钟时提交它，但这没有用：

```
Transaction t = session.beginTransaction();
user.setMinutes()
session.flush();
t.commit(); 
```

**问题：**

当每次更改获取最新数据时，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:40:29.547

Hibernate 会话将您的实体缓存在内存中（在您的情况下为`User`实体）。为更改剩余分钟数创建新事务是不够的，您还必须重新加载其他任务所做的更改（额外分钟数请求）。您可以通过调用来实现这一点`refresh()`：

```
session.refresh(user);
user.setMinutes(user.getMinutes() - 2);
session.flush(); 
```

# ruby-on-rails - 在 Rails 中更新验证失败后嵌套属性不会被破坏

> ID：10967560
> 
> 赞同：2
> 
> 时间：2012-06-10T09:15:02.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我自己也在努力解决这个问题，所以我希望我能很好地解释它。我有一个带有嵌套模型的表格。事情的简化版本如下（使用 Rails 3.0.13）；

```
#parent.rb

class Parent < ActiveRecord::Base
  has_many :children, :dependent => destroy
  accepts_nested_attributes_for :children, :allow_destroy => true
  validates_presence_of :thing
  validate :children_unique

  def children_unique
    errors[:base] << "You have the same child listed more than once!" if self.children.map{|x| [child.name, child.age]} != self.children.map{|x| [child.name, child.age]}.uniq
  end
end

#child.rb

class Child < ActiveRecord::Base
  belongs_to :parents
end

#parents_controller.rb

class ParentsController < ApplicationController
  load_and_authorize_resource :parent   #Using cancan for authorization. This calls @parent = Parent.find(params[:id]); authorize! :update, @parent; at the start of the update method

  def update
    if @parent.update_attributes(params[:operation])
      redirect_to @parent.admission, :notice => 'Operation was updated successfully'
    else
      flash.now[:warning] = "Parent was NOT updated!"
      render :action => "edit"
    end
  end
end 
```

到目前为止，一切都很标准。我的表格也以非常标准的方式设置。`parent_form.fields_for :children`我为 fields_for 块中的孩子调用并渲染部分内容。每个子部分表单都包含一个删除链接，当单击它时，javascript 用于设置隐藏字段，因此 _destroy 的属性设置为“1”，并且部分从视图中隐藏。

这在大多数情况下都很有效，但我发现的奇怪问题如下；

如果我正在编辑一个已经有 2 个孩子的现有父母，并且我删除了其中 1 个孩子，然后将“事物”设置为空白，则表单无法按预期验证（因为“事物”不存在）并且编辑视图被重新渲染。结果看来，我删除的孩子又出现了！其隐藏的 _destroy 字段设置为“true”，如果我再次填写“事物”并提交表单，更新后的父级只有 1 个子级。

我通过向嵌套的子 div 添加一个条件样式标签来处理这个问题，`<div class='fields'<%= " style='display: none;'" if f.object._destroy %>>`因此如果在尝试更新记录之前将其删除，它将不再出现。这实现了它的目标，但是，如果我这样做并提交表单而不更正空的“事物”字段，那么模型再次验证失败，并且在出现的下一个编辑表单中，我添加一个与之前删除的相同的新子并填写“事物”字段，模型现在无法通过`children_unique`验证，即使第一个相同的孩子的 _delete 属性设置为“真”。

很明显，我在这里束手无策，我尝试了多种替代方法和修改，这是迄今为止我想出的最好的方法。它非常接近，但我仍然有这种奇怪的边缘情况，在实践中可能永远不会真正发生，但这表明我不太了解我的控制器和模型的交互方式。

有人可以让我直截了当吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:05:25.437

要了解发生了什么，我们首先需要了解 Rails 如何处理数据库交互。也就是说，Rails 将所有数据库交互包装在一个事务中，因此如果出现故障，一切都会恢复。这就是当出现验证错误时您会在日志中看到“ROLLBACK”的原因。它尝试提交更改，但出现错误，因此将其回滚。没有造成伤害。

同样，当您以相同的形式操作父记录和子记录时，它们都在事务中处理。这实际上是一件很棒的事情。如果某件事情失败了，您不希望进行一些更改而其中一项失败。

每当您设置`_destroy`为 true 时，您只是将该子记录标记为销毁。然而，这种破坏不会立即发生。相反，孩子会一直徘徊，直到父母被保存（`save`返回 true）。`save`在您的情况下，这不会发生：由于验证错误，调用失败。但是，这是一件好事：如果您的父记录无法保存，则不应删除子记录。

话虽这么说，我的建议是将这些子记录包装在 a 中`div`，添加一个数据元素，比如说`data-destroy`，它设置为属性`_destroy`。每当单击删除链接时，将其设置为 true，并且在加载页面时确保隐藏所有设置为 true 的`div`s 。`data-destroy`

希望这可以帮助您了解引擎盖下发生的事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:45:13.697

您应该使删除链接成为对控制器的 ajax 调用，该控制器立即删除子项并从页面中删除它的标记，这样，即使验证确实失败，您也已经将其删除，并且这两个问题都不会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T14:54:03.243

除了在用户端添加记录之外`hide`，`deleted`您还可以在模型自定义验证中添加`children.reject(&:marked_for_destruction?)`以跳过那些隐藏的

# android - 动态添加元素到android相对布局

> ID：10967562
> 
> 赞同：0
> 
> 时间：2012-06-10T09:15:35.047
> 
> 标签：android, android-relativelayout

我对相对布局有一点问题。我正在做一个项目，我必须从 .CSV 文件中读取一些值并在相对布局中动态显示它们。我将放一些代码片段和图像，然后解释我的问题。

第一个代码片段：

```
package ekalavya.pratnala.quiz;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.StringTokenizer;

import android.app.Activity;
import android.os.Bundle;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.ScrollView;

public class QuizActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Beginning of variable declarations
    File quizSpecs = new File("mnt/sdcard/teacher.csv"); // Read the file
    BufferedReader csvReader = null;
    String line = ""; // Storing each line in a string
    StringTokenizer currentLine = null;
    int noOfQuestions = 0; // Number of questions in the quiz
    int time = 0; // Duration of the quiz
    int[][] quizData; // Storing the quiz specifications in an integer array
    int i = 0, j = 0; // Loop variables
    int[][] questionImages = {
            { R.drawable.a, R.drawable.b, R.drawable.c, R.drawable.d,
                    R.drawable.e, R.drawable.f, R.drawable.g, R.drawable.h,
                    R.drawable.i, R.drawable.j },
            { R.drawable.a_checked, R.drawable.b_checked,
                    R.drawable.c_checked, R.drawable.d_checked,
                    R.drawable.e_checked, R.drawable.f_checked,
                    R.drawable.g_checked, R.drawable.h_checked,
                    R.drawable.i_checked, R.drawable.j_checked },
            { R.drawable.zero, R.drawable.one, R.drawable.two,
                    R.drawable.three, R.drawable.four, R.drawable.five,
                    R.drawable.six, R.drawable.seven, R.drawable.eight,
                    R.drawable.nine },
            { R.drawable.zero_checked, R.drawable.one_checked,
                    R.drawable.two_checked, R.drawable.three_checked,
                    R.drawable.four_checked, R.drawable.five_checked,
                    R.drawable.six_checked, R.drawable.seven_checked,
                    R.drawable.eight_checked, R.drawable.nine_checked } };
    // End of variable declarations

    try {
        csvReader = new BufferedReader(new FileReader(quizSpecs));
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        line = csvReader.readLine();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    currentLine = new StringTokenizer(line, ",");
    noOfQuestions = Integer.parseInt(currentLine.nextToken());
    time = Integer.parseInt(currentLine.nextToken());
    while (currentLine.hasMoreTokens())
        ;
    quizData = new int[noOfQuestions][6];
    for (i = 0; i < noOfQuestions; i++) {
        try {
            line = csvReader.readLine();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        currentLine = new StringTokenizer(line, ",");
        for (j = 0; j < 6; j++) {
            quizData[i][j] = Integer.parseInt(currentLine.nextToken());
        }
    }
    try {
        csvReader.close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ScrollView s1 = new ScrollView(this);
    RelativeLayout r1 = new RelativeLayout(this);
    for (i = 0; i < 2; i++) {
        switch (quizData[i][1]) {
        case 1:
        case 2:
            for (j = 0; j < quizData[i][2]; j++) {
                ImageView option = new ImageView(this);
                option.setImageResource(questionImages[0][j]);
                option.setId(j + (10 * (i + 1)));
                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.addRule(RelativeLayout.RIGHT_OF, j - 1
                        + (10 * (i + 1)));
                option.setLayoutParams(params);
                r1.addView(option, params);
            }
            break;
        }
    }
    s1.addView(r1, new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    this.setContentView(s1);
}
} 
```

图 1：[https ://www.dropbox.com/s/vzpilyotvgtipbb/pic2.png](https://www.dropbox.com/s/vzpilyotvgtipbb/pic2.png)

第二个代码片段：

```
package ekalavya.pratnala.quiz;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.StringTokenizer;

import android.app.Activity;
import android.os.Bundle;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.ScrollView;

public class QuizActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Beginning of variable declarations
    File quizSpecs = new File("mnt/sdcard/teacher.csv"); // Read the file
    BufferedReader csvReader = null;
    String line = ""; // Storing each line in a string
    StringTokenizer currentLine = null;
    int noOfQuestions = 0; // Number of questions in the quiz
    int time = 0; // Duration of the quiz
    int[][] quizData; // Storing the quiz specifications in an integer array
    int i = 0, j = 0; // Loop variables
    int[][] questionImages = {
            { R.drawable.a, R.drawable.b, R.drawable.c, R.drawable.d,
                    R.drawable.e, R.drawable.f, R.drawable.g, R.drawable.h,
                    R.drawable.i, R.drawable.j },
            { R.drawable.a_checked, R.drawable.b_checked,
                    R.drawable.c_checked, R.drawable.d_checked,
                    R.drawable.e_checked, R.drawable.f_checked,
                    R.drawable.g_checked, R.drawable.h_checked,
                    R.drawable.i_checked, R.drawable.j_checked },
            { R.drawable.zero, R.drawable.one, R.drawable.two,
                    R.drawable.three, R.drawable.four, R.drawable.five,
                    R.drawable.six, R.drawable.seven, R.drawable.eight,
                    R.drawable.nine },
            { R.drawable.zero_checked, R.drawable.one_checked,
                    R.drawable.two_checked, R.drawable.three_checked,
                    R.drawable.four_checked, R.drawable.five_checked,
                    R.drawable.six_checked, R.drawable.seven_checked,
                    R.drawable.eight_checked, R.drawable.nine_checked } };
    // End of variable declarations

    try {
        csvReader = new BufferedReader(new FileReader(quizSpecs));
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        line = csvReader.readLine();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    currentLine = new StringTokenizer(line, ",");
    noOfQuestions = Integer.parseInt(currentLine.nextToken());
    time = Integer.parseInt(currentLine.nextToken());
    while (currentLine.hasMoreTokens())
        ;
    quizData = new int[noOfQuestions][6];
    for (i = 0; i < noOfQuestions; i++) {
        try {
            line = csvReader.readLine();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        currentLine = new StringTokenizer(line, ",");
        for (j = 0; j < 6; j++) {
            quizData[i][j] = Integer.parseInt(currentLine.nextToken());
        }
    }
    try {
        csvReader.close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ScrollView s1 = new ScrollView(this);
    RelativeLayout r1 = new RelativeLayout(this);
    for (i = 0; i < 1; i++) {
        switch (quizData[i][3]) {
        case 1:
        case 2:
            for (j = 0; j < quizData[i][2]; j++) {
                ImageView option = new ImageView(this);
                option.setImageResource(questionImages[0][j]);
                option.setId(j + (10 * (i + 1)));
                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.addRule(RelativeLayout.RIGHT_OF, j - 1
                        + (10 * (i + 1)));
                option.setLayoutParams(params);
                r1.addView(option, params);
            }
            break;
        }
    }
    s1.addView(r1, new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    this.setContentView(s1);
}
} 
```

图 2：[https ://www.dropbox.com/s/itazcpshjzbza4t/pic1.png](https://www.dropbox.com/s/itazcpshjzbza4t/pic1.png)

当带有变量“i”的 switch case 中的循环只运行一次时，第二个输出就会出现。如果我运行它两次，第一个输出就会出现。但这不是我想要的。我希望第一个输出行显示在第二个输出行下方。我知道代码中有问题，但我不知道如何纠正它。请帮我！另外，我想知道如何将这些元素放置在屏幕上的任何位置。

PS我没有被允许上传图片，因为我的声誉不到10（我是这里的新手）。所以，我把它们放在 Dropbox 上，并把链接放在这里。带来不便敬请谅解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:27:40.827

我已经解决了这个问题：我`RIGHT_OF`之前只指定了属性，因此它不知道垂直放置它的位置，所以把它放在顶部。指定`BELOW`属性也解决了这个问题。

# userscripts - 从浏览器扩展访问弹出窗口

> ID：10967563
> 
> 赞同：0
> 
> 时间：2012-06-10T09:15:37.593
> 
> 标签：userscripts

我需要打开一个弹出窗口并解析其内容。

我可以从注入脚本执行此操作，如下所示： win = window.open(url); $(win.document).find(...);

但这被弹出窗口阻止程序阻止，用户必须允许来自站点的弹出窗口。

如果我从内容脚本本身执行相同操作，则窗口会打开而不会被阻止，但 win 是未定义的。

是否有可能在不被弹出窗口阻止程序阻止的情况下获取弹出窗口的内容？

请注意，我从与调用内容脚本的页面相同的域打开页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:56:19.017

如果您不想向用户显示 iframe，可以使用 iframe 或不可见的 iframe。

将 iframe 附加到文档而不是打开新窗口，然后获取 iframe 的内容。

```
$(function() {
    $("#add").click(function() {
        $("#temp").append('<iframe id="tempiframe" 
                           src="http://fiddle.jshell.net/_display/"></iframe>');
        $("#tempiframe").load(function() {
            alert("hey I get this from iframe\n" 
                   +$(this).contents().find("pre").html());
        });
    });
});​ 
```

[这是一个 jsFiddle 演示](http://jsfiddle.net/jXTXu/1/)

# flash - 内置空气数据库：除了执行查询之外，有没有办法编辑数据库

> ID：10967564
> 
> 赞同：0
> 
> 时间：2012-06-10T09:15:43.033
> 
> 标签：flash, air

有没有办法在内置空气数据库中更改/创建表，然后执行相应的查询（gui或其他）？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:10:39.523

如果您的意思是在 AIR 之外编辑“模板”数据库，那么任何 sqlite 编辑器都可以完成这项工作。我的偏好是[sqliteman](http://sqliteman.com/)，但我没有检查它是否可以打开加密文件 - 我最初的猜测可能不是，除非你以它可以理解的方式存储 ByteArray，或者该工具是否包含流行的加密算法。

就我个人而言，我发现在未加密的环境中进行开发并在一切都通过验证后将其保存到最后要容易得多。

# android - Logcat Message中pid、uid、gids是什么意思？

> ID：10967568
> 
> 赞同：8
> 
> 时间：2012-06-10T09:16:27.227
> 
> 标签：android, android-logcat

我在 Android Logcat 中收到以下消息 `I/ActivityManager(59): Start proc com.abc.xyz:mnp for service com.abc.xyz/.contact.SomeService: pid=31198 uid=10036 gids={3003, 1015}`。

`pid`这里的,`uid`和`gids`, 前面的数字是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-10T11:07:58.330

这些是标准的 Linux 术语：

*   `pid`= 进程 ID
*   `uid`= 拥有该进程的应用程序的用户 ID
*   `gid`= 拥有该进程的应用程序的组 ID

# objective-c - 创建具有指定长度的字符串的最短代码

> ID：10967574
> 
> 赞同：0
> 
> 时间：2012-06-10T09:17:35.250
> 
> 标签：objective-c

在 Objective-C 中创建带有空格和所需长度的字符串的最短方法是什么？

我可以使用`for`循环来做到这一点，但它是几行代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:49:35.160

返回前六个字符

```
NSString *fullName = @"Warif Akhand Rishi";
NSString *subString = [fullName substringToIndex:6]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:38:45.947

你看过[stringWithFormat](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943)吗？

```
[NSMutableString stringWithFormat:@"%20d", 42]; 
```

# ruby - 我如何使用 zlib GZIP 静态资源？

> ID：10967576
> 
> 赞同：0
> 
> 时间：2012-06-10T09:17:41.077
> 
> 标签：ruby, sinatra, gzip, zlib

编辑：我将 Ruby 与 Sinatra 一起使用。

更新：这是我正在使用的代码，它不起作用......

```
get '/' do
    session[:time] = Time.now
    z = Zlib::Deflate.new(6, 31)
    z.deflate(File.read('public/Assets/Styles/build.css'))
    z.flush
    z.finish
    z.close
    erb :home
end 
```

...我没有收到任何错误。但是当我通过 Firebug 的 Yslow 插件检查文件时，它告诉我该文件不是 GZIP 文件

我试图了解我如何使用 GZIP 网页内容和 JavaScript 和 CSS 等静态文件`zlib`？

我知道我可以将一串数据传递给，`Zlib::Deflate.deflate`但我将 Sinatra 与 ERB 文件一起使用。那么我是否传递 ERB 文件和 Js/CSS 文件的路径？或者我可以传入存储脚本/样式的目录吗？我会传入 ERB 文件的路径还是引用 ERB 文件的符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:11:58.023

除非您正在编写自己的 HTTP 服务器，否则您的服务器需要处理这个问题。客户端首先必须让服务器知道它接受 gzip 内容编码，然后服务器才能交付 gzip 内容编码。

Zlib::Deflate.deflate 不会产生 gzip 编码的数据。它只会产生 zlib 编码的数据。您需要使用 Zlib::Deflate.new 和 windowBits 参数等于 31 来启动 gzip 流。

# c# - 向用户显示打开/保存对话框时如何隐藏加载动画？

> ID：10967583
> 
> 赞同：0
> 
> 时间：2012-06-10T09:19:01.537
> 
> 标签：c#, asp.net, response, epplus

我的应用程序中有一个导出按钮。当我单击该按钮时，它会回传到服务器并生成一个 Excel 文件。

我想在此过程中显示加载 gif，但是当打开/保存对话框显示时，我想隐藏 gif。

问题是我使用 Response.End 来显示文件打开/保存对话框。

有谁知道如何在 Response.End 之后调用客户端函数，或者有人有其他解决方案如何隐藏 gif 并让用户工作？

这是我的一段代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //starts the loading gif animation.
        btnExport.Attributes.Add("onclick", "setTimeout(\"UpdateImg();\",300);");
    }

    protected void btnExport_Click(object sender, EventArgs e)
    {
        //generates the file
        Response.ContentType = "application/vnd.openxmlformats-  officedocument.spreadsheetml.sheet";
        Response.AddHeader("content-disposition", "attachment;  filename=ExcelDemo.xlsx");
        Response.BinaryWrite(pck.GetAsByteArray());
        Response.Flush();
        //Response.End();
        HttpContext.Current.ApplicationInstance.CompleteRequest(); 

        //HERE I WANT TO STOP THE ANIMATION AND GO BACK TO THE PAGE!
    } 
```

谢谢你，因巴尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:26:46.657

这种方式你不能那样做。

当您开始将数据发送到文件并打开保存对话框时，您的网页失去了控制，您无法再做任何事情，数据全部进入文件保存。

还有什么其他的，在我看来更好，你有什么选择。

您可以使用处理程序 .ashx 来创建和发送文件，并提供指向页面的链接以及制作文件所需的参数。

# java - Thread.holdsLock(lock) 的目的是什么？

> ID：10967585
> 
> 赞同：6
> 
> 时间：2012-06-10T09:19:26.583
> 
> 标签：java, multithreading

我看到有人用来 `assert !Thread.holdsLock(lock)`避免死锁。

这是什么目的？如果锁对象被另一个线程持有，断言会导致代码立即退出吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T09:25:37.670

该[方法的javadoc](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#holdsLock-java.lang.Object-)说：

> `true`当且仅当**当前**线程持有指定对象的监视器锁时返回。

（强调我的）

因此，断言检查当前线程是否持有给定锁对象的监视器锁。

请注意，断言用于检查不变量，并且可以禁用。它们不应该用于防止死锁。`if`应该使用定期测试来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T09:30:53.643

`assert`关键字用于捕获错误；它不应该被用来控制程序流程。所以要么这是一个误解，要么有人做错了什么。
更有可能的是，该人将断言语句放在那里以防止开发人员在该代码段中添加死锁风险。

像这样：

```
assert !Thread.holdsLock(lock) : 
"Don't call this method while holding the lock." + 
"This method tries to acquire lock2 and that may cause a deadlock."; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-24T19:24:19.370

当线程一次获取并持有多个锁时，死锁是一个常见问题。避免此问题的一种简单方法是确保始终以相同的顺序获取多个锁并以相同的（反向）顺序释放。所以锁定（A）然后锁定（B）。解锁（B）然后解锁（A）。看起来很简单，但这些乱序锁定/解锁问题有一种潜入代码的方式。

因此，在我们锁定 A 之前，请确保我们还没有持有 B。

断言 !Thread.holdsLock(B)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T09:31:18.683

`Thread.holdsLock(lock)`仅用于检查调用线程是否拥有，仅此`lock`而已。

它**不会**防止死锁（拥有这样的方法会很棒:)）

# java - Weblogic 12 中的 MOXy 解组

> ID：10967587
> 
> 赞同：1
> 
> 时间：2012-06-10T09:19:47.643
> 
> 标签：java, weblogic, eclipselink, moxy, weblogic12c

**我在 WebLogic 12c（使用OpenJPA 2.1.0**）中运行我的 Web 服务时遇到问题。Web 服务的响应是具有特定实体列表的 DTO。执行服务后，无法生成其响应（没有任何错误或异常）。我认为 MOXy 在响应实体的解组操作过程中存在问题（我在 WebLogic 11 中没有任何问题，因为它不使用 MOXy）。您如何看待这个问题和解决方案？

谢谢

Web 服务在 GlassFish 3.1.2 中运行良好。

这是我的代码：

***个人实体***

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "person")
@Entity
@Table(name = "PERSON")

public class Person {

@Id
@Column(name = "ID")
@XmlElement(required = false)
private Long id;

@Column(name = "BIRTHDATE")
@XmlElement(required = false)
@Temporal(TemporalType.DATE)
private Date birthDate;

@Transient
private String name; 
```

***个人 DTO***

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "personDto")
public class PersonDto implements Serializable{

@XmlElement(required = false)
List<Person> persons;

/**
 * list of person
 *
 * @return
 */
public List<Person> getPersons() {
    if (persons == null)
        persons = new LinkedList<Person>();

    return persons;
}

public void setpersons(List<Person> persons) {
    this.persons = persons;
} 
```

***道***

```
@Stateless
public class PersonDaoImpl implements PersonDao{

@PersistenceContext(unitName = "pu-test")
private EntityManager em;

public List<Person> findAll() {
    List<Person> personList = null;
    Query query =  em.createNamedQuery("person.findAll");
    List<Person> results = (List<Person>)query.getResultList();
    return results;     
} 
```

***orm.xml***

```
<named-query name="person.findAll">
    <query>select p from Person p</query>
</named-query> 
```

***网络服务***

```
@Stateless
@WebService
public class PersonServiceImpl implements IPersonService {

@EJB
private PersonDao personDao;

public PersonDto allPersons()  {
    PersonDto result = new PersonDto();
    List<Person> fList = personDao.findAll();       
    result.setPersons(fList);
    return result;
} 
```

该列表的大小为 3，但没有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:49:10.447

**更新**

问题似乎是 OpenJPA 正在`java.util.Date`使用`java.util.Date`. 我打开了以下 EclipseLink 错误，您可以使用它来跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/383639](http://bugs.eclipse.org/383639)

我在此处对相关问题的回答中发布了解决此问题的方法：

*   [使用 eclipselink 在 JPA 对象上进行 jaxb 编组期间的日期对话错误](https://stackoverflow.com/questions/11145711/date-conversation-error-during-jaxb-marshall-on-a-jpa-object-using-eclipselink/11228693#11228693)

要获得官方补丁，您应该提交 WebLogic 错误。如果您引用我在上面给出的 EclipseLink 错误，它将有助于更快地移动所有内容。

* * *

[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)确实成为 WebLogic 12.1.1 中的默认 JAXB 提供程序（请参阅 [EclipseLink MOXy 是 WebLogic Server 12c 中的 JAXB 提供程序](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)），但这似乎不是您的问题的原因。

**PersonServiceImpl**

我简化了您的服务，以尽可能多地删除与 MOXy 无关的内容。通过删除`@Stateless`注释，我可以让服务正常工作。我建议就 WebLogic 12.1.1 和 GlassFish 3.1.2 之间的行为差​​异联系 Oracle 支持。

```
package forum10967587;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.ejb.*;
import javax.jws.WebMethod;
import javax.jws.WebService;

//@Stateless
@WebService
public class PersonServiceImpl implements IPersonService {

    @WebMethod
    public PersonDto allPersons() {
        PersonDto result = new PersonDto();
        List<Person> fList = new ArrayList<Person>(3);

        Person p1 = new Person();
        p1.setBirthDate(new Date());
        p1.setId(1L);
        p1.setName("Jane");
        fList.add(p1);

        Person p2 = new Person();
        p2.setBirthDate(new Date());
        p2.setId(2L);
        p2.setName("John");
        fList.add(p2);

        result.setPersons(fList);
        return result;
    }

} 
```

**测试客户端结果**

下面是我从 WebLogic 管理控制台运行内置测试客户端时收到的输出。

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
    <ns0:allPersonsResponse xmlns:ns0="http://forum10967587/">
      <return>
        <persons>
          <id>1</id>
          <birthDate>2012-06-19T13:56:38.579</birthDate>
          <name>Jane</name>
        </persons>
        <persons>
          <id>2</id>
          <birthDate>2012-06-19T13:56:38.579</birthDate>
          <name>John</name>
        </persons>
      </return>
    </ns0:allPersonsResponse>
  </S:Body>
</S:Envelope> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T12:03:28.677

最后，通过将 JAXB 实现从 Moxy 更改为 Metro，我的问题暂时得到了解决。两个jar文件javax-xml-bind.jar，javax-xml-ws.jar应该添加到Weblogic服务器的“/weblogic_home/wlserver/endorsed”路径中，同时在setDomainEnv文件的java_properties部分添加以下属性：

```
 -Dcom.sun.xml.ws.spi.db.BindingContextFactory=com.sun.xml.ws.db.
glassfish.JAXBRIContextFactory 

-Djavax.xml.bind.JAXBContext=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

# jquery - jquery队列序列更新xml

> ID：10967590
> 
> 赞同：0
> 
> 时间：2012-06-10T09:20:02.610
> 
> 标签：jquery, xml, queue

我正在基于 xml 的 UI 中开发撤消/重做功能，使用 JQuery 我加载、读取和更新 xml 节点。

```
undo_xml=actual_xml;                     //save the actual xml state before to update it,
$(this).attr("xmlattribute",newvalue);   //update a specific node with a new value
redo_xml=actual_xml;                     //save the updated xml as the redo state 
```

问题是指令`$(this).attr("xmlattribute",newvalue);`总是在 之前运行`undo_xml=actual_xml`，所以我从不`undo_xml`按需要记录。

我试过了`$.queue()`，`jquery.stackevent()`还有很多其他的方法。

但，

`$(this).attr("xmlattribute",newvalue);`

总是在 xml var 赋值之前运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:58:02.143

我自己找到了解决方案，这不是顺序问题，而是资源问题。

我希望这可以帮助你。

```
undo_xml=$(actual_xml).clone();          //save the actual xml state before to update it,
$(this).attr("xmlattribute",newvalue);   //update a specific node with a new value
redo_xml=$(actual_xml).clone();          //save the updated xml as the redo state 
```

# r - 用 R 中的值通过 for 循环填充 3D 矩阵

> ID：10967596
> 
> 赞同：2
> 
> 时间：2012-06-10T09:20:55.830
> 
> 标签：r, 3d, for-loop, matrix

我设置了一个大小为 365x7x4 的 3 维矩阵。

```
x <- array(rep(1, 365*5*4), dim=c(365, 5, 4)) 
```

现在我将使用 for 循环为每个元素填充一个值。假设每个元素的值应该是行、列和深度的总和。我想这相对容易。

谢谢！最好的，F

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T10:20:03.423

使用一个更简单的例子，这样我们就可以看到正在做什么

```
arr <- array(seq_len(3*3*3), dim = rep(3,3,3)) 
```

以下代码给出了请求的输出：

```
dims <- dim(arr)
ind <- expand.grid(lapply(dims, seq_len))
arr[] <- rowSums(ind) 
```

以上给出

```
> arr
, , 1

     [,1] [,2] [,3]
[1,]    3    4    5
[2,]    4    5    6
[3,]    5    6    7

, , 2

     [,1] [,2] [,3]
[1,]    4    5    6
[2,]    5    6    7
[3,]    6    7    8

, , 3

     [,1] [,2] [,3]
[1,]    5    6    7
[2,]    6    7    8
[3,]    7    8    9

> arr[1,1,1]
[1] 3
> arr[1,2,3]
[1] 6
> arr[3,3,3]
[1] 9 
```

**更新：**在这里使用@TimP 的答案中的示例，我更新了答案，以展示如何以更像 R 的方式完成它。

给定

```
arr <- array(seq_len(3*3*3), dim = rep(3,3,3)) 
```

`arr`用`i + j + k`unless替换元素`k > 2`，在这种情况下`j*k-i`使用。

```
dims <- dim(arr)
ind <- expand.grid(lapply(dims, seq_len))
## which k > 2
want <- ind[,3] > 2
arr[!want] <- rowSums(ind[!want, ])
arr[want] <- ind[want, 2] * ind[want, 3] - ind[want, 1] 
```

虽然坚持使用循环等熟悉的习语很诱人，并且与流行的看法相反，循环在 R 中*并不是*低效的，但当你学习语言并开始将其应用于数据分析任务时，学习以向量化的方式思考将获得很多回报.

以下是 Fabian 示例的一些时间安排：

```
> x <- array(rep(1, 365*5*4), dim=c(365, 5, 4))
> system.time({
+ for (i in seq_len(dim(x)[1])) {
+     for (j in seq_len(dim(x)[2])) {
+         for (k in seq_len(dim(x)[3])) {
+             val = i+j+k
+             if (k > 2) {
+                 val = j*k-i
+             }
+             x[i,j,k] = val
+         }
+     }
+ }
+ })
   user  system elapsed 
  0.043   0.000   0.044 
> arr <- array(rep(1, 365*5*4), dim=c(365, 5, 4))
> system.time({
+ dims <- dim(arr)
+ ind <- expand.grid(lapply(dims, seq_len))
+ ## which k > 2
+ want <- ind[,3] > 2
+ arr[!want] <- rowSums(ind[!want, ])
+ arr[want] <- ind[want, 2] * ind[want, 3] - ind[want, 1]
+ })
   user  system elapsed 
  0.005   0.000   0.006 
```

对于更大的问题（至少对于我的 ickle 笔记本电脑！）

```
> x <- array(rep(1, 200*200*200), dim=c(200, 200, 200))
> system.time({
+ for (i in seq_len(dim(x)[1])) {
+     for (j in seq_len(dim(x)[2])) {
+         for (k in seq_len(dim(x)[3])) {
+             val = i+j+k
+             if (k > 2) {
+                 val = j*k-i
+             }
+             x[i,j,k] = val
+         }
+     }
+ }
+ })
   user  system elapsed 
 51.759   0.129  53.090
> arr <- array(rep(1, 200*200*200), dim=c(200, 200, 200))
> system.time({
+     dims <- dim(arr)
+     ind <- expand.grid(lapply(dims, seq_len))
+     ## which k > 2
+     want <- ind[,3] > 2
+     arr[!want] <- rowSums(ind[!want, ])
+     arr[want] <- ind[want, 2] * ind[want, 3] - ind[want, 1]
+ })
   user  system elapsed 
  2.282   1.036   3.397 
```

但即使按照今天的标准，这也可能是微不足道的。您可以看到，由于该方法所需的所有函数调用，循环开始变得越来越没有竞争力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T18:41:07.637

Fabian: from the phrasing of your question, I believe you're just looking for a simple way of setting values in the array to follow any set of rules you might devise. No problem.

Your array is small (and from the context I strongly suspect you only want to use the code for something of that size). So good practice is simply to use a set of three `for` loops, which will run almost instantly - no need for any unnecessary complications. My code below shows an example: here we set element `x[i,j,k]` to be `i+j+k`, unless `k>2`, in which case we set it to be `j*k-i` instead.

Obviously, you can have as many rules as you want - just add an `if` statement for each one, and define `val` to be the value you want `x[i,j,k]` to take if that condition is true. (There's a few different ways to set this up, but this one seems the simplest to understand.) At the end of the innermost loop, `x[i,j,k]` gets set to the required value (`val`), and we then go on and do the next element until they're all done. That's it!

```
x = array(rep(1, 365*5*4), dim=c(365, 5, 4))

for (i in seq_len(dim(x)[1])) {
    for (j in seq_len(dim(x)[2])) {
        for (k in seq_len(dim(x)[3])) {
            val = i+j+k
            if (k > 2) {
                val = j*k-i
            }
            x[i,j,k] = val
        }
    }
} 
```

Hope this helps :)

**Quick update (non-loopy method):** For completeness, if you're in a real hurry and want your code to run in 0.07 seconds rather than 0.19 seconds... you could also set things up in a vectory way like this:

```
comb = expand.grid(seq_len(365), seq_len(5), seq_len(4))
i = comb$Var1; j = comb$Var2; k = comb$Var3
val = i+j+k
subs = which(k>2); val[subs] = (j*k-i)[subs]
x = array(val, dim = c(365, 5, 4)) 
```

In the above, the variables `i`, `j` and `k` are vectors with length 7300 (the number of cells in the array). As before, the default choice for `val` is the sum `i+j+k` except on the subset `k>2`, where `val` is `j*k-i` instead - exactly the same as the example in the first part of my answer. Obviously the notation in this method is quite a bit harder which is why I thought it'd be better to show you the loop-based solution. Hopefully you'll see how you could add in other conditions to the above though. The final line maps the vector `val` over to the array `x` in the right way so that each `x[i,j,k]` takes on the correct value of `val`. Try it and see :)

One small point to note though: if you were ever to want to run this sort of algorithm on a massive array (much, much, much bigger than the one you have now), then the approach immediately above would definitely be the one to use to minimise runtime. For your case, my advice is to use whichever one you feel more comfortable with as the runtime isn't really an issue.

Cheers! :)

# haskell - 获取函数的地址（不与 C 接口）

> ID：10967598
> 
> 赞同：4
> 
> 时间：2012-06-10T09:21:44.020
> 
> 标签：haskell, binary, ghc, ffi

有一个相当低级的应用程序，我遇到了需要确定 Haskell 函数地址的情况。我可以用 FFI 来做到这一点，也就是 C，但我想直接在 Haskell 中做到这一点。

这是我目前使用 FFI 的解决方案：

main.hs：

```
{-# LANGUAGE ForeignFunctionInterface #-}
module Main where

import Foreign
import Foreign.C.Types
import Text.Printf

foreign import ccall "getFuncAddr"
  getFuncAddr :: CULong

main :: IO ()
main = do
  printf "0x%016x\n" (fromIntegral getFuncAddr :: Word64)

foreign export ccall func :: IO ()
func :: IO ()
func = do
  printf "hello world\n" 
```

ffi.c:

```
void func(void);

unsigned long getFuncAddr(void)
{
    return (unsigned long) func;
} 
```

生成文件：

```
all: main
    ./$<
    objdump -D $< | grep '<func>'

main: main.hs ffi.c
    ghc --make -O2 $^ -o $@ 
```

与往常一样，也可作为[gist](https://gist.github.com/2904609)使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:52:21.440

尝试这个：

```
{-# LANGUAGE ForeignFunctionInterface #-}
module Main where

import Foreign
import Foreign.C.Types
import Text.Printf

foreign import ccall "&func"
  funcaddr :: FunPtr (IO ())

main :: IO ()
main = do
  printf "0x%016x\n" (fromIntegral (ptrToIntPtr (castFunPtrToPtr funcaddr)) :: Int)

foreign export ccall func :: IO ()
func :: IO ()
func = do
  printf "hello world\n" 
```

请参阅[Haskell 2010 报告的这一部分](http://www.haskell.org/onlinereport/haskell2010/haskellch8.html#x15-1610008.5)，并查找“静态地址”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T10:47:07.753

我认为[FunPtr](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Foreign-Ptr.html#t%3aFunPtr)的文档几乎可以满足您的需求。简短的版本是你使用`foreign import "wrapper"`的，如下：

```
foreign import ccall "wrapper"
  getFuncAddr :: IO () -> IO (FunPtr (IO ())) 
```

然后如果您稍后完成它，请使用[`freeHaskellFunPtr`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Foreign-Ptr.html#v%3afreeHaskellFunPtr).

# printing - 从网页打印条形码到 Zebra 打印机

> ID：10967599
> 
> 赞同：33
> 
> 时间：2012-06-10T09:21:47.970
> 
> 标签：printing, web, barcode

我们正在尝试将条形码从网页打印到我们的 Zebra 打印机。

我想知道是否有办法使用打印机自己的字体打印它们，或者使用网络字体，或​​者我是否知道使用的字体名称？

我一直在尝试使用 php 条形码生成器，它基本上生成包含条形码的图像。事实上，我已经尝试这种方法几天了，但没有成功。

问题是当我打印它们时，扫描仪无法读取它们。我尝试更改图像分辨率以匹配打印机的分辨率（203dpi），也尝试使用图像大小和格式，但打印后的条形码仍然无法扫描。

那么有人有这方面的经验吗？

打印机：斑马 TLP 2844

每页所需的条形码：

*   01 Code39 水平（仅在以非常特定的尺寸和浏览器打印时才可扫描）
*   01 Code128 垂直（仍然无法正常工作，打印总是很模糊，不会被扫描）

===========

我已经取得了一点进展，我发现这台打印机支持 EPL2 语言，所以我正在尝试用它来打印条形码。

首先我需要启用直通模式，我在打印机选项 > 高级设置 > 杂项上做到了。

现在，我可以使用打印机的内置字体 :D 使用以下命令无可挑剔地打印条形码：

ZPL: B10,10,0,1,2,2,60,N,"TEXT-GOES-HERE" :ZPL

但是我只能从记事本打印它，我仍然无法从浏览器打印它......这可能是LF被替换为CR + LF的问题......

如何克服这个问题？？

===========

我试图打印的标签实际上在条形码之前有一些文本，一些 html 表格很好地格式化了它。所以我需要先打印这个，在中间我需要贴上一个漂亮的标签，然后再添加一些文本。

所以我不能使用纯 EPL2 来打印整个内容，我想知道我是否可以同时使用 html + EPL2 + html 来实现我的目标，还是不允许这样做？=/

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-11T22:44:08.823

您遇到了一些障碍：

1) 当您通过操作系统安装的打印机驱动程序进行打印时，打印机驱动程序正在尝试获取发送给它的数据并（重新）光栅化或缩放输出设备（Zebra 打印机）。由于打印机在 203dpi 时的分辨率相对较低，因此打印驱动程序无需进行太多缩放即可降低条码质量的完整性。这就是使用直接 ZPL 命令生成的条形码**更加**可靠的原因。

2) 由于 Web 浏览器故意通过不允许访问客户端计算机来提供安全性，因此您无法直接与客户端连接的打印机进行通信。这种沙盒有助于保护用户免受恶意软件的侵害，从而使恶意网站无法执行诸如将文件写入客户端计算机或将输出直接发送到打印机等设备的操作。因此，您无法通过浏览器直接将 ZPL 命令发送到客户端连接的打印机。

但是，有一种方法可以按照您的描述进行。如果您对访问试图打印到 Zebra 打印机的站点的客户端计算机有一定程度的控制，则必要的步骤通常才会有用。例如，这只会被您公司网络上的机器或愿意安装您需要编写的小型应用程序的客户使用。为此，您需要查看以下步骤：

A) 您需要制作自己的自定义 MIME 类型。这基本上只是您想使用的任何名称，不会与任何[已注册的 MIME 类型](http://www.iana.org/assignments/media-types/index.html)发生冲突。

B) 接下来，您将定义一个文件扩展名，该扩展名将映射到您的自定义 MIME 类型。为此，您通常需要配置您的 Web 服务器（具体步骤取决于您使用的 Web 服务器）以允许您要定义的新 MIME 类型以及这些类型的文件使用什么文件扩展名。

C) 然后在您的 Web 应用程序中，当您想要输出 ZPL 数据时，您可以使用映射到新 MIME 类型的文件扩展名将其写入文件。然后，一旦生成了文件，您可以提供指向它的 HTML 链接，或者将客户端浏览器重定向到该文件。您可以通过手动将您创建的文件直接复制到原始打印机端口来测试您的文件此时是否正常工作。

D）接下来您需要编写一个可以安装在客户端上的小应用程序。安装应用程序后，您需要将其注册为自定义 MIME 类型的有效消费应用程序。如果浏览器检测到安装了指定 MIME 类型文件的应用程序，它会简单地将文件写入客户端计算机上的临时目录，然后尝试使用临时文件启动具有相同注册 MIME 类型的应用程序应用程序的参数。因此，您的应用程序现在只读取浏览器传递给它的文件，然后尝试将其直接转储到打印机。

这是您为完成您所描述的内容而需要做的事情的概述。一些具体步骤将取决于您使用的 Web 服务器类型以及您的客户端计算机的操作系统。但这是一个高级概述，可以让你完成你正在尝试的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-26T20:27:41.653

如果您考虑加载 java 小程序，qz-print（以前的 jzebra）可以完全按照您的描述进行，并且可以很好地与评论中提到的 LP2844 配合使用。

[https://code.google.com/p/jzebra/](https://code.google.com/p/jzebra/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-12T16:37:55.163

我们为我们的网络应用做了什么：

1) 下载免费的打印文件应用程序[http://www.lerup.com/printfile/](http://www.lerup.com/printfile/)

“PrintFile 是一款免费的 MS Windows 实用程序，可让您快速轻松地打印文件。该程序可识别纯文本、PostScript、Encapsulated PostScript (EPS) 和二进制格式。使用该程序可以节省大量纸张，从而也节省宝贵的自然资源。”

首次运行 PrintFile 时，进入高级选项并启用“直接发送到打印机”。

2) 在 Windows 中将 ZEBRA 打印机设置为通用文本打印机。

2) 在 web 应用程序中生成一个 file.prt 文件，它只是一个纯文本 EPL 文件。

3) 双击下载的文件将立即打印条形码。奇迹般有效。您甚至可以设置 PrintFile，这样您甚至都看不到 gui。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-28T06:23:57.767

我正在使用[QZ Tray](https://qz.io/)将标签从网页打印到 Zebra 热敏打印机。

在 QZ Tray 的文件夹中有与`demo/js`QZ Tray 应用程序通信所需的三个 JavaScript 文件 -`dependencies/rsvp-3.1.0.min.js`和.`dependencies/sha-256.min.js``qz-tray.js`

在您的项目中包含这些 JavaScript 文件，如下所示：

```
<script type="text/javascript" src="/lib/qz-tray/rsvp-3.1.0.min.js"></script>
<script type="text/javascript" src="/lib/qz-tray/sha-256.min.js"></script>
<script type="text/javascript" src="/lib/qz-tray/qz-tray.js"></script> 
```

将标签打印到 Zebra 热敏打印机的最简单方法如下所示。

```
<script type="text/javascript">
qz.websocket.connect().then(function() {
   // Pass the printer name into the next Promise
   return qz.printers.find("zebra");
}).then(function(printer) {
   // Create a default config for the found printer
   var config = qz.configs.create(printer);

   // Raw ZPL
   var data = ['^XA^FO50,50^ADN,36,20^FDRAW ZPL EXAMPLE^FS^XZ'];

   return qz.print(config, data);
}).catch(function(e) { console.error(e); });
</script> 
```

有关详细信息，请参阅[如何将标签从网页打印到 Zebra 热敏打印机](https://www.gyrocode.com/articles/how-to-print-labels-from-web-page-to-zebra-thermal-printer/)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-17T18:17:57.600

您还可以在文本文件中发送 ZPL 命令（您可以将多个标签打包在一个文件中）并让用户通过 Windows 记事本打开和打印文件。唯一需要注意的是，他们必须删除默认的页眉和页脚（文件 --> 页面设置）。

它有点用户培训，但如果您无法控制客户端计算机，则可能是可以接受的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-14T20:04:50.520

我在这里开发类似的东西。我需要从我的 webapp 打印 LP2844。问题是我的 web 应用程序位于云中的远程服务器 (Amazon EC2) 中，而打印机将位于仓库办公桌上。

我的解决方案：webapp 为带有条形码的标签生成[EPL2 代码](http://jzebra.googlecode.com/files/epl2_programming.pdf/%20EPL2%20code) ，然后发布[PubNub 消息](http://www.pubnub.com/ "PubNub 消息")。我编写了一个在连接打印机的计算机上运行的小 C# 程序。程序接收消息，然后将代码发送到打印机。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-20T20:03:05.960

我遵循“Tres Finocchiaro”在我的申请中提出的想法，基于：

1.  ASP.NET 4.0
2.  IIS
3.  铬，IExplorer，火狐
4.  斑马 TLP 2844
5.  EPL 协议

不幸的是，由于当前浏览器的安全问题， [jzebra](https://code.google.com/p/jzebra/)需要一些改进才能正常工作。

# 安装 jzebra

下载 jzebdra 并从 dist 目录复制到您的目录（例如`mydir`）：

*   网络
    *   我的目录
        *   js
            *   ..
            *   部署Java.js
        *   库
            *   ..
        *   qz-print.jar
        *   qz-print_jnlp.jnlp

# 创建你的 print.html

```
<html>
<script type="text/javascript" src="js/deployJava.js"></script>
<script type="text/javascript">
    /**
    * Optionally used to deploy multiple versions of the applet for mixed
    * environments.  Oracle uses document.write(), which puts the applet at the
    * top of the page, bumping all HTML content down.
    */
    deployQZ();

    /** NEW FUNCTION **/
    function initPrinter() {
        findPrinters();
        useDefaultPrinter();
    }

    /** NEW FUNCTION **/    
    function myalert(txt) {
        alert(txt);
    }

    /**
    * Deploys different versions of the applet depending on Java version.
    * Useful for removing warning dialogs for Java 6\.  This function is optional
    * however, if used, should replace the <applet> method.  Needed to address 
    * MANIFEST.MF TrustedLibrary=true discrepency between JRE6 and JRE7.
    */
    function deployQZ() {
        var attributes = {id: "qz", code:'qz.PrintApplet.class', 
            archive:'qz-print.jar', width:1, height:1};
        var parameters = {jnlp_href: 'qz-print_jnlp.jnlp', 
            cache_option:'plugin', disable_logging:'false', 
            initial_focus:'false'};
        if (deployJava.versionCheck("1.7+") == true) {}
        else if (deployJava.versionCheck("1.6+") == true) {
            delete parameters['jnlp_href'];
        }
        deployJava.runApplet(attributes, parameters, '1.5');
    }

    /**
    * Automatically gets called when applet has loaded.
    */
    function qzReady() {
        // Setup our global qz object
        window["qz"] = document.getElementById('qz');
        var title = document.getElementById("title");
        if (qz) {
            try {
                title.innerHTML = title.innerHTML + " " + qz.getVersion();
                document.getElementById("content").style.background = "#F0F0F0";
            } catch(err) { // LiveConnect error, display a detailed meesage
                document.getElementById("content").style.background = "#F5A9A9";
                alert("ERROR:  \nThe applet did not load correctly.  Communication to the " + 
                    "applet has failed, likely caused by Java Security Settings.  \n\n" + 
                    "CAUSE:  \nJava 7 update 25 and higher block LiveConnect calls " + 
                    "once Oracle has marked that version as outdated, which " + 
                    "is likely the cause.  \n\nSOLUTION:  \n  1\. Update Java to the latest " + 
                    "Java version \n          (or)\n  2\. Lower the security " + 
                    "settings from the Java Control Panel.");
          }
      }
    }

    /**
    * Returns whether or not the applet is not ready to print.
    * Displays an alert if not ready.
    */
    function notReady() {
        // If applet is not loaded, display an error
        if (!isLoaded()) {
            return true;
        }
        // If a printer hasn't been selected, display a message.
        else if (!qz.getPrinter()) {
           /** CALL TO NEW FUNCTION **/
            initPrinter();
            return false;
        }
        return false;
    }

    /**
    * Returns is the applet is not loaded properly
    */
    function isLoaded() {
        if (!qz) {
            alert('Error:\n\n\tPrint plugin is NOT loaded!');
            return false;
        } else {
            try {
                if (!qz.isActive()) {
                    alert('Error:\n\n\tPrint plugin is loaded but NOT active!');
                    return false;
                }
            } catch (err) {
                alert('Error:\n\n\tPrint plugin is NOT loaded properly!');
                return false;
            }
        }
        return true;
    }

    /**
    * Automatically gets called when "qz.print()" is finished.
    */
    function qzDonePrinting() {
        // Alert error, if any
        if (qz.getException()) {
            alert('Error printing:\n\n\t' + qz.getException().getLocalizedMessage());
            qz.clearException();
            return; 
        }

        // Alert success message
        alert('Successfully sent print data to "' + qz.getPrinter() + '" queue.');
    }

    /***************************************************************************
    * Prototype function for finding the "default printer" on the system
    * Usage:
    *    qz.findPrinter();
    *    window['qzDoneFinding'] = function() { alert(qz.getPrinter()); };
    ***************************************************************************/
    function useDefaultPrinter() {
        if (isLoaded()) {
            // Searches for default printer
            qz.findPrinter();

            // Automatically gets called when "qz.findPrinter()" is finished.
            window['qzDoneFinding'] = function() {
                // Alert the printer name to user
                var printer = qz.getPrinter();
                myalert(printer !== null ? 'Default printer found: "' + printer + '"':
                    'Default printer ' + 'not found');

                // Remove reference to this function
                window['qzDoneFinding'] = null;
            };
        }
    }

    /***************************************************************************
    * Prototype function for finding the closest match to a printer name.
    * Usage:
    *    qz.findPrinter('zebra');
    *    window['qzDoneFinding'] = function() { alert(qz.getPrinter()); };
    ***************************************************************************/
    function findPrinter(name) {
        // Get printer name from input box
        var p = document.getElementById('printer');
        if (name) {
            p.value = name;
        }

        if (isLoaded()) {
            // Searches for locally installed printer with specified name
            qz.findPrinter(p.value);

            // Automatically gets called when "qz.findPrinter()" is finished.
            window['qzDoneFinding'] = function() {
                var p = document.getElementById('printer');
                var printer = qz.getPrinter();

                // Alert the printer name to user
                alert(printer !== null ? 'Printer found: "' + printer + 
                    '" after searching for "' + p.value + '"' : 'Printer "' + 
                    p.value + '" not found.');

                // Remove reference to this function
                window['qzDoneFinding'] = null;
            };
        }
    }

    /***************************************************************************
    * Prototype function for listing all printers attached to the system
    * Usage:
    *    qz.findPrinter('\\{dummy_text\\}');
    *    window['qzDoneFinding'] = function() { alert(qz.getPrinters()); };
    ***************************************************************************/
    function findPrinters() {
        if (isLoaded()) {
            // Searches for a locally installed printer with a bogus name
            qz.findPrinter('\\{bogus_printer\\}');

            // Automatically gets called when "qz.findPrinter()" is finished.
            window['qzDoneFinding'] = function() {
                // Get the CSV listing of attached printers
                var printers = qz.getPrinters().split(',');
                for (i in printers) {
                    myalert(printers[i] ? printers[i] : 'Unknown');      
                }

                // Remove reference to this function
                window['qzDoneFinding'] = null;
            };
        }
    }

    /***************************************************************************
    * Prototype function for printing raw EPL commands
    * Usage:
    *    qz.append('\nN\nA50,50,0,5,1,1,N,"Hello World!"\n');
    *    qz.print();
    ***************************************************************************/
    function print() {
        if (notReady()) { return; }

        // Send characters/raw commands to qz using "append"
        // This example is for EPL.  Please adapt to your printer language
        // Hint:  Carriage Return = \r, New Line = \n, Escape Double Quotes= \"
        qz.append('\nN\n');            
        qz.append('q609\n');
        qz.append('Q203,26\n');
        qz.append('B5,26,0,1A,3,7,152,B,"1234"\n');
        qz.append('A310,26,0,3,1,1,N,"SKU 00000 MFG 0000"\n');
        qz.append('A310,56,0,3,1,1,N,"QZ PRINT APPLET"\n');
        qz.append('A310,86,0,3,1,1,N,"TEST PRINT SUCCESSFUL"\n');
        qz.append('A310,116,0,3,1,1,N,"FROM SAMPLE.HTML"\n');
        qz.append('A310,146,0,3,1,1,N,"QZINDUSTRIES.COM"');

        // Append the rest of our commands
        qz.append('\nP1,1\n');

        // Tell the applet to print.
        qz.print();
     }

    /***************************************************************************
    * Prototype function for logging a PostScript printer's capabilites to the
    * java console to expose potentially  new applet features/enhancements. 
    * Warning, this has been known to trigger some PC firewalls
    * when it scans ports for certain printer capabilities.
    * Usage: (identical to appendImage(), but uses html2canvas for png rendering)
    *    qz.setLogPostScriptFeatures(true);
    *    qz.appendHTML("<h1>Hello world!</h1>");
    *    qz.printPS();
    ***************************************************************************/ 
    function logFeatures() {
        if (isLoaded()) {
            var logging = qz.getLogPostScriptFeatures();
            qz.setLogPostScriptFeatures(!logging);
            alert('Logging of PostScript printer capabilities to console set to "' + !logging + '"');
        }
    }

    /***************************************************************************
    ****************************************************************************
    * *                          HELPER FUNCTIONS                             **
    ****************************************************************************
    ***************************************************************************/

    function getPath() {
        var path = window.location.href;
        return path.substring(0, path.lastIndexOf("/")) + "/";
    }

    /**
    * Fixes some html formatting for printing. Only use on text, not on tags!
    * Very important!
    *   1\.  HTML ignores white spaces, this fixes that
    *   2\.  The right quotation mark breaks PostScript print formatting
    *   3\.  The hyphen/dash autoflows and breaks formatting  
    */
    function fixHTML(html) {
        return html.replace(/ /g, "&nbsp;").replace(/’/g, "'").replace(/-/g,"&#8209;"); 
    }

    /**
    * Equivelant of VisualBasic CHR() function
    */
    function chr(i) {
        return String.fromCharCode(i);
    }

    /***************************************************************************
    * Prototype function for allowing the applet to run multiple instances.
    * IE and Firefox may benefit from this setting if using heavy AJAX to
    * rewrite the page.  Use with care;
    * Usage:
    *    qz.allowMultipleInstances(true);
    ***************************************************************************/ 
    function allowMultiple() {
      if (isLoaded()) {
        var multiple = qz.getAllowMultipleInstances();
        qz.allowMultipleInstances(!multiple);
        alert('Allowing of multiple applet instances set to "' + !multiple + '"');
      }
    }
</script>

    <input type="button" onClick="print()" />
    </body>
</html> 
```

提供的代码基于“jzebra_installation/dist/sample.html”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-13T17:49:30.877

尝试创建一个 websocket 来控制客户端的打印，并使用 ajax 从页面向 localhost 发送数据。

```
/// websocket
using System;
using System.Net;
using System.Net.WebSockets;
using System.Text;
using System.Threading;

namespace Server
{
    class Program
    {
        public static WebsocketServer ws;
        static void Main(string[] args)
        {
            ws = new Server.WebsocketServer();
            ws.LogMessage += Ws_LogMessage;
            ws.Start("http://localhost:2645/service/");
            Console.WriteLine("Press any key to exit...");
            Console.ReadKey();
        }

        private static void Ws_LogMessage(object sender, WebsocketServer.LogMessageEventArgs e)
        {
            Console.WriteLine(e.Message);
        }
    }

    public class WebsocketServer
    {
        public event OnLogMessage LogMessage;
        public delegate void OnLogMessage(Object sender, LogMessageEventArgs e);
        public class LogMessageEventArgs : EventArgs
        {
            public string Message { get; set; }
            public LogMessageEventArgs(string Message)
            {
                this.Message = Message;
            }
        }

        public bool started = false;
        public async void Start(string httpListenerPrefix)
        {
            HttpListener httpListener = new HttpListener();
            httpListener.Prefixes.Add(httpListenerPrefix);
            httpListener.Start();
            LogMessage(this, new LogMessageEventArgs("Listening..."));
            started = true;

            while (started)
            {
                HttpListenerContext httpListenerContext = await httpListener.GetContextAsync();
                if (httpListenerContext.Request.IsWebSocketRequest)
                {
                    ProcessRequest(httpListenerContext);
                }
                else
                {
                    httpListenerContext.Response.StatusCode = 400;
                    httpListenerContext.Response.Close();
                    LogMessage(this, new LogMessageEventArgs("Closed..."));
                }
            }
        }

        public void Stop()
        {
            started = false;
        }
        private async void ProcessRequest(HttpListenerContext httpListenerContext)
        {
            WebSocketContext webSocketContext = null;

            try
            {
                webSocketContext = await httpListenerContext.AcceptWebSocketAsync(subProtocol: null);
                LogMessage(this, new LogMessageEventArgs("Connected"));
            }
            catch (Exception e)
            {
                httpListenerContext.Response.StatusCode = 500;
                httpListenerContext.Response.Close();
                LogMessage(this, new LogMessageEventArgs(String.Format("Exception: {0}", e)));
                return;
            }

            WebSocket webSocket = webSocketContext.WebSocket;
            try
            {

                while (webSocket.State == WebSocketState.Open)
                {

                    ArraySegment<Byte> buffer = new ArraySegment<byte>(new Byte[8192]);

                    WebSocketReceiveResult result = null;

                    using (var ms = new System.IO.MemoryStream())
                    {
                        do
                        {
                            result = await webSocket.ReceiveAsync(buffer, CancellationToken.None);
                            ms.Write(buffer.Array, buffer.Offset, result.Count);
                        }
                        while (!result.EndOfMessage);

                        ms.Seek(0, System.IO.SeekOrigin.Begin);

                        if (result.MessageType == WebSocketMessageType.Text)
                        {
                            using (var reader = new System.IO.StreamReader(ms, Encoding.UTF8))
                            {
                                var r = System.Text.Encoding.UTF8.GetString(ms.ToArray());
                                var t = Newtonsoft.Json.JsonConvert.DeserializeObject<Datos>(r);
                                bool valid = true;
                                byte[] toBytes = Encoding.UTF8.GetBytes(""); ;

                                if (t != null)
                                {
                                    if (t.printer.Trim() == string.Empty)
                                    {
                                        var printers = "";
                                        foreach (var imp in System.Drawing.Printing.PrinterSettings.InstalledPrinters)
                                        {
                                            printers += imp + "\n";
                                        }

                                        toBytes = Encoding.UTF8.GetBytes("No se Indicó la Impresora\nLas Impresoras disponibles son: " + printers);
                                        valid = false;
                                    }
                                    if (t.name.Trim() == string.Empty)
                                    {
                                        toBytes = Encoding.UTF8.GetBytes("No se Indicó el nombre del Documento");
                                        valid = false;
                                    }
                                    if (t.code == null)
                                    {
                                        toBytes = Encoding.UTF8.GetBytes("No hay datos para enviar a la Impresora");
                                        valid = false;
                                    }

                                    if (valid)
                                    {
                                        print.RawPrinter.SendStringToPrinter(t.printer, t.code, t.name);
                                        toBytes = Encoding.UTF8.GetBytes("Correcto...");
                                    }

                                    await webSocket.SendAsync(new ArraySegment<byte>(toBytes, 0, int.Parse(toBytes.Length.ToString())), WebSocketMessageType.Binary, result.EndOfMessage, CancellationToken.None);
                                }
                                else
                                {
                                    toBytes = Encoding.UTF8.GetBytes("Error...");
                                    await webSocket.SendAsync(new ArraySegment<byte>(toBytes, 0, int.Parse(toBytes.Length.ToString())), WebSocketMessageType.Binary, result.EndOfMessage, CancellationToken.None);
                                }
                            }
                        }
                    }
                }
            }
            catch (Exception e)
            {
                LogMessage(this, new LogMessageEventArgs(String.Format("Exception: {0} \nLinea:{1}", e, e.StackTrace)));
            }
            finally
            {
                if (webSocket != null)
                    webSocket.Dispose();
            }
        }
    }

    public class Datos
    {
        public string name { get; set; }
        public string code { get; set; }
        public string printer { get; set; } = "";
    }
} 
```

原始打印：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.IO;

namespace print
{
    public class RawPrinter
    {
        // Structure and API declarions:
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public class DOCINFOA
        {
            [MarshalAs(UnmanagedType.LPStr)]
            public string pDocName;
            [MarshalAs(UnmanagedType.LPStr)]
            public string pOutputFile;
            [MarshalAs(UnmanagedType.LPStr)]
            public string pDataType;
        }
        [DllImport("winspool.Drv", EntryPoint = "OpenPrinterA", SetLastError = true, CharSet = CharSet.Ansi, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool OpenPrinter([MarshalAs(UnmanagedType.LPStr)]
string szPrinter, ref IntPtr hPriknter, IntPtr pd);

        [DllImport("winspool.Drv", EntryPoint = "ClosePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool ClosePrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "StartDocPrinterA", SetLastError = true, CharSet = CharSet.Ansi, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool StartDocPrinter(IntPtr hPrinter, Int32 level, [In(), MarshalAs(UnmanagedType.LPStruct)]
DOCINFOA di);

        [DllImport("winspool.Drv", EntryPoint = "EndDocPrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool EndDocPrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "StartPagePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool StartPagePrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "EndPagePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool EndPagePrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "WritePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool WritePrinter(IntPtr hPrinter, IntPtr pBytes, Int32 dwCount, ref Int32 dwWritten);

        // SendBytesToPrinter()
        // When the function is given a printer name and an unmanaged array
        // of bytes, the function sends those bytes to the print queue.
        // Returns true on success, false on failure.
        public static bool SendBytesToPrinter(string szPrinterName, IntPtr pBytes, Int32 dwCount, string DocName = "")
        {
            Int32 dwError = 0;
            Int32 dwWritten = 0;
            IntPtr hPrinter = new IntPtr(0);
            DOCINFOA di = new DOCINFOA();
            bool bSuccess = false;
            // Assume failure unless you specifically succeed.
            di.pDocName = string.IsNullOrEmpty(DocName) ? "My C#.NET RAW Document" : DocName;
            di.pDataType = "RAW";

            // Open the printer.
            if (OpenPrinter(szPrinterName.Normalize(), ref hPrinter, IntPtr.Zero))
            {
                // Start a document.
                if (StartDocPrinter(hPrinter, 1, di))
                {
                    // Start a page.
                    if (StartPagePrinter(hPrinter))
                    {
                        // Write your bytes.
                        bSuccess = WritePrinter(hPrinter, pBytes, dwCount, ref dwWritten);
                        EndPagePrinter(hPrinter);
                    }
                    EndDocPrinter(hPrinter);
                }
                ClosePrinter(hPrinter);
            }
            // If you did not succeed, GetLastError may give more information
            // about why not.
            if (bSuccess == false)
            {
                dwError = Marshal.GetLastWin32Error();
            }
            return bSuccess;
        }

        public static bool SendFileToPrinter(string szPrinterName, string szFileName)
        {
            // Open the file.
            FileStream fs = new FileStream(szFileName, FileMode.Open);
            // Create a BinaryReader on the file.
            BinaryReader br = new BinaryReader(fs);
            // Dim an array of bytes big enough to hold the file's contents.
            Byte[] bytes = new Byte[fs.Length];
            bool bSuccess = false;
            // Your unmanaged pointer.
            IntPtr pUnmanagedBytes = new IntPtr(0);
            int nLength = 0;

            nLength = Convert.ToInt32(fs.Length);
            // Read the contents of the file into the array.
            bytes = br.ReadBytes(nLength);
            // Allocate some unmanaged memory for those bytes.
            pUnmanagedBytes = Marshal.AllocCoTaskMem(nLength);
            // Copy the managed byte array into the unmanaged array.
            Marshal.Copy(bytes, 0, pUnmanagedBytes, nLength);
            // Send the unmanaged bytes to the printer.
            bSuccess = SendBytesToPrinter(szPrinterName, pUnmanagedBytes, nLength);
            // Free the unmanaged memory that you allocated earlier.
            Marshal.FreeCoTaskMem(pUnmanagedBytes);
            return bSuccess;
        }
        public static bool SendStringToPrinter(string szPrinterName, string szString, string DocName = "")
        {
            IntPtr pBytes = default(IntPtr);
            Int32 dwCount = default(Int32);
            // How many characters are in the string?
            dwCount = szString.Length;
            // Assume that the printer is expecting ANSI text, and then convert
            // the string to ANSI text.
            pBytes = Marshal.StringToCoTaskMemAnsi(szString);
            // Send the converted ANSI string to the printer.
            SendBytesToPrinter(szPrinterName, pBytes, dwCount, DocName);
            Marshal.FreeCoTaskMem(pBytes);
            return true;
        }
    }
} 
```

html页面：

```
<!DOCTYPE html>
<html>

<head>
</head>

<body ng-app="myapp">

    <div ng-controller="try as ctl">
        <input ng-model="ctl.ticket.nombre">

        <textarea ng-model="ctl.ticket.code"></textarea>

        <button ng-click="ctl.send()">Enviar</button>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script>
        var ws = new WebSocket("ws://localhost:2645/service");
        ws.binaryType = "arraybuffer";
        ws.onopen = function () {
            console.log('connection is opened!!!');
        };

        ws.onmessage = function (evt) {
            console.log(arrayBufferToString(evt.data))

        };

        ws.onclose = function () {
            console.log("Connection is Closed...")
        };

        function arrayBufferToString(buffer) {
            var arr = new Uint8Array(buffer);
            var str = String.fromCharCode.apply(String, arr); 

           return  decodeURIComponent(escape(str));
        }
        var app = angular.module('myapp', []);
        app.controller('try', function () {
            this.ticket= {nombre:'', estado:''}

            this.send = () => {
                var toSend= JSON.stringify(this.ticket);
                ws.send(toSend);
            }
        });
    </script>
</body>

</html> 
```

然后从 html 发送一个 ZPL 代码（写在 textarea 代码上）；

```
^XA
^FO200,50^BY2^B3N,N,80,Y,N^FD0123456789^FS
^PQ1^XZ 
```

# java - 刷新 jtable 的内容

> ID：10967600
> 
> 赞同：1
> 
> 时间：2012-06-10T09:21:49.660
> 
> 标签：java, mysql, jtable, jpanel

我有一个`JTable`in a `JPanel`(称为`cur_panel`) a `JTabbedPane`，它正在从 MySQL 数据库中获取内容。现在，我希望能够在使用其他窗格中的选项进行更改时刷新表格`JTabbedPane`。我通过销毁`cur_panel`然后再次构建它来解决这个问题，以便它可以从数据库中获取刷新的数据。

有人可以建议我一个更好的方法来解决它吗？就像我只能获取新的/修改的数据并且没有破坏然后重建`JPanel`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:01:54.820

你是对的 - 你不应该需要重新构建`JPanel`. `JTable`实际上，您甚至不需要重建`TableModel`. （另外，您可能想阅读一些有关模型-视图-控制器设计模式的信息）

相反，您应该重置`TableModel`. 我认为这应该导致`JTable`重新粉刷。如果没有，您可以致电：

```
table.tableChanged(new TableModelEvent(tableModel)); 
```

或者，如果您觉得`TableModel`使用新数据构建新数据更好：

```
table.setModel(newTableModel); 
```

这是由其他东西更新的 a的[SSCCE](http://www.sscce.org/) ...我已经用来自 a 的输入替换了数据库连接，但它应该给你一个想法：`JTable``JTextField`

```
public class TableTest {    
  public static void main(String[] args) {
    JFrame frame = new JFrame("Table Test");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    final JTextField text = new JTextField("Editable Text");

    final TableModel model = new DefaultTableModel(new String[]{"Text"},1);
    model.setValueAt(text.getText(), 0, 0);
    text.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent actionEvent) {
        model.setValueAt(text.getText(), 0, 0);
      }
    });
    JTable table = new JTable(model);

    JPanel panel = new JPanel(new BorderLayout());
    panel.add(text, BorderLayout.NORTH);
    panel.add(new JScrollPane(table), BorderLayout.SOUTH);

    frame.setContentPane(panel);
    frame.pack();
    frame.setVisible(true);
  }
} 
```

# android - 在共享首选项存储中获取异常

> ID：10967601
> 
> 赞同：0
> 
> 时间：2012-06-10T09:21:56.933
> 
> 标签：android, android-layout, android-intent, android-widget

我正在尝试使用此保存共享首选项

```
SharedPreferences sharedPref = getSharedPreferences("BluefreeSharedPreferences",0); 
PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
prefEditor = sharedPref .edit();
prefEditor.putString("UserName", userName);
prefEditor.putString("Password", password);
prefEditor.commit(); 
```

在带有 2.2.1 的三星 Galaxy 1900 上，它不保存共享首选项，但在带有 2.2.1 的模拟器和带有 4.0.3 操作系统的 HTC Y 上运行良好。我在这里阅读了一些帖子[http://code.google.com/p/android/issues/detail?id=14359](http://code.google.com/p/android/issues/detail?id=14359)任何人都可以指导我这仍然是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:58:09.893

我认为您没有正确初始化编辑器，这是我前段时间编写的一个小代码，它优先使用计数器并在执行时将其递增

```
SharedPreferences counter = getSharedPreferences("prefs", Context.MODE_PRIVATE);
SharedPreferences.Editor count_editor = counter.edit();
int currentCount = counter.getInt(packageName +"", 0);
currentCount++;
count_editor.putInt("times clicked", currentCount);
count_editor.commit(); 
```

试试这个 [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c++ - gdb 通过名称获取变量的当前值并更改它

> ID：10967602
> 
> 赞同：-2
> 
> 时间：2012-06-10T09:22:24.717
> 
> 标签：c++, gdb

我有全局变量，例如`int NUM = 4;`。当我使用 gdb 附加到工作应用程序时 - 它挂起。现在，我想获得价值`NUM`并改变它。这个怎么做？

也许，其他数据类型的可能示例`char[]`和`std::string`？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T09:31:37.627

在 gdb 中你应该使用

```
 print INT 
```

显示 INT 的值和

```
 set variable INT = value 
```

设置 INT 等于值。在数组中使用

```
 set variable array_variable[element_index] = value 
```

`element_index`将数组中索引处的元素设置`array_variable`为值。

# security - 保护 PDF 注释

> ID：10967607
> 
> 赞同：0
> 
> 时间：2012-06-10T09:23:14.710
> 
> 标签：security, pdf, pdf-generation

我们正在开发一个处理 PDF 文档的应用程序。其中一项功能是在文档上添加注释，并根据查看文档的用户控制注释的可见性。

PDF规范是否支持这一点？

编辑：这是一个桌面应用程序，它将具有嵌入式 PDF 查看器，一些元数据远程存储，其他元数据隐藏在文档中，我们需要使应用程序能够根据使用该应用程序的用户显示特定信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:59:57.370

您可以创建默认禁用注释的 PDF。您可以添加提示输入密码的 Acrobat Javascript，根据该密码可以显示或隐藏注释。

**更新**：我没有意识到这个解决方案的 JS 会尝试将注释更改保存到文档中。因此，它在 Adob​​e Reader 中不起作用。在 Adob​​e Acrobat 中，以下代码有效。

```
var sResponse = app.response({cQuestion: "What's the secret password?", cTitle: "Secert Annotation", cLabel: "Password" });
this.syncAnnotScan(); 
if (sResponse == "one") { 
  var oAnnot = this.getAnnots()[0]; 
  if (oAnnot == null) { app.alert('not found'); } 
  else { oAnnot.noView =false; }
} 
```

Adobe Lifecycle Extensions 声称向 Adob​​e Reader 提供此功能。这个软件我还没用过，你可以试试。

# javascript - 数组 JavaScript 的副本

> ID：10967610
> 
> 赞同：0
> 
> 时间：2012-06-10T09:24:26.197
> 
> 标签：javascript

我有一些对象：

```
var obj1 = new Obj1(),
    obj2 = new Obj2(),
    ... 
```

和两个数组：

```
objecs.push(obj1, obj2,...);
defaultObjects.push(obj1, obj2, ...); 
```

在游戏循环期间`objects`数组发生变化，但`defaultObjects`不会。当游戏需要重新启动时，我需要使`objects`等于`defaultObjects`（就像一开始一样）。如果我这样做：

`objects = defaultObjects.slice(0)`

这是否意味着`objects[0]`并且`defaultObjects[0]`现在指向同一个对象`obj1`，但是之间没有联系`objects`，`defaultObjects`所以我得到了我需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:43:16.297

那是对的。[`slice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)将返回一个新数组。
但是，正如您所提到的，数组元素仍将引用相同的对象。即从一个数组更改任何对象将导致其在另一个数组中的更改。

# html - 可以使用 HTML 将嵌入式 Flash 组件链接到另一个页面吗？

> ID：10967612
> 
> 赞同：1
> 
> 时间：2012-06-10T09:25:15.317
> 
> 标签：html

我正在制作一个仅使用 HTML 和一些 Flash 的页面，我知道我可以使用 Flash 直接链接该对象，但我想使用 HTML 将它链接到另一个页面，以便当有人点击它时，它会打开一个不同的页面。可以仅使用 HTML 来完成吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:37:16.740

如果您有一个名为 movie.swf 的 flash 组件，则可以使用以下代码执行此操作：

```
<div onmousedown="window.location.href='http://www.yoursite.com'" height=100 width=100>
<object>
    <param name="movie" value="movie.swf">
    <param name="wmode" value="transparent" />
    <embed wmode=transparent allowfullscreen="true" allowscriptaccess="always" src="movie.swf" height=100 width=100></embed>
</object> 
```

# ruby - Ruby 中 .reverse 的奇怪行为

> ID：10967613
> 
> 赞同：0
> 
> 时间：2012-06-10T09:25:31.583
> 
> 标签：ruby, ruby-on-rails-3

当我尝试在包含撇号的 Ruby 字符串上调用 .reverse 时，它​​会将它们更改为`\231\200?`. 因此，在包含`s’tI`调用 reverse 的错误顺序的字符串上，结果为`It\231\200?s`，而不是`It's`。有任何想法吗？

我猜这与多字节安全有关？有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T09:30:27.253

这在 ruby​​ 1.9 中工作正常，它正确处理 unicode：

```
>> "s’tI".reverse
=> "It’s" 
```

在 ruby​​ 1.8 中被破坏了，因为它对 unicode 字符串没有相同的支持，并且那些撇号是非 1 字节的 ascii 字符，它们是多字节的 unicode 字符（例如，当编码为 UTF-8 时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:31:32.210

问题是您的字符串使用二进制字符而不是 Unicode 字符。您必须先将二进制字符串解码为 Unicode 字符串。

```
irb(main):001:0> "a\u9F9Cb".reverse
=> "b\u9F9Ca"
irb(main):002:0> "a\xE9\xBE\x9Cb".reverse
=> "a\x9C\xBE\xE9b"
irb(main):003:0> "a\xE9\xBE\x9Cb".force_encoding('UTF-8').reverse
=> "b\u9F9Ca" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:05:02.410

正如其他人所解释的那样，您正在处理 utf-8，因此某些字符由一个以上的字节表示。还有诸如组合字符、代理对等之类的东西。ruby 1.8 的逐字节反转忽略了所有这些，所以把事情搞砸了。

Ruby 1.9 确实了解字符串编码，但如果你被困在 ruby​​ 1.8 上，rails 有自己的系统来处理 utf8 - 你可以调用`mb_chars`字符串并取回看起来像字符串的东西，行为像字符串但实现之类的方法`reverse`，`downcase`以精通 unicode 的方式。例如你可以做

```
reversed_string = string.mb_chars.reverse 
```

# c# - 如何显示进程的剩余时间

> ID：10967616
> 
> 赞同：0
> 
> 时间：2012-06-10T09:26:05.707
> 
> 标签：c#, asp.net-mvc, time

这是我的场景.....我有一个 Windows 服务正在运行。

它执行 3 步过程，第一步是从托管应用程序中获取日期范围，并进行几次插入、更新和表创建，在第二步中，它根据表中的日期范围获取许多记录（一些lacs of records）并处理这些每个条目并修改一些并将它们写入文件，在第 3 步中，它使用 Load Data Local 将第 2 步中的写入文件加载到 mysql 数据库中。

我面临的问题是在我在步骤 1 中提到的托管应用程序中。该应用程序显示了一个 GUI，其中显示了处理日期范围，并且由于它是一个耗时的过程，我需要显示剩余时间，在此期间窗口服务将完成处理（我提到的所有 3 个步骤）。

还有一件事客户端网络速度可能会有所不同。关于如何处理这种情况的任何想法。我正在使用 C# asp.net 编写此应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:48:53.820

指示剩余时间的唯一方法是采样。

衡量一个动作并使用结果来估计未来的动作。

您无法给出确切的剩余时间跨度，因为操作总是需要不同的时间。

另一种方法是不说明剩余时间，而是说明到目前为止已经执行了多少步。这需要您轮询服务器的状态，因此您可能需要通过设置会话变量来保持服务器上的状态。

# c++ - 检查进程是否存在

> ID：10967618
> 
> 赞同：0
> 
> 时间：2012-06-10T09:26:30.177
> 
> 标签：c++, mfc, process

我编写代码并使用 MFC。我想检查进程是否存在。

例如：

```
if (myProcess.exe exists)
  do something
else
  do something else 
```

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:20:15.787

使用命名互斥锁：

在程序开始时：

```
HANDLE hMutex = CreateMutex(NULL, TRUE, "Your program name");
if (GetLastError() == ERROR_ALREADY_EXISTS)
{
    // Process already running.
    CloseHandle(hMutex);
}
else
{
    // No process running.
} 
```

在程序结束时：

```
if (hMutex)
{
    CloseHandle(hMutex);
    hMutex = NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:31:06.217

你必须枚举进程

例如

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T09:37:39.543

进程可以将其进程 ID 存储在文件中。在正常退出时，删除文件。

在下一次启动时，进程可以查看文件是否存在，如果存在，它可以读取文件，并检查该进程 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T10:54:23.950

尝试在包含 Psapi.h 之后立即添加此行：

```
#pragma comment(lib, "psapi.lib") 
```

也试试这个：

```
#pragma comment(lib, "kernel32.lib") 
```

# jquery - jQuery UI 自动完成：自定义数据获取问题

> ID：10967620
> 
> 赞同：1
> 
> 时间：2012-06-10T09:26:55.030
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete, autosuggest

我在我自己的项目中尝试了这个 jQuery UI 演示，发现需要对它进行必要的修改。请参阅下面的演示：

[http://jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)

在此示例中，当我们键入“j”并选择任何一个选项时，它会获取一些与之相关的文本和徽标。哪个工作正常。在这里，假设我们从给出的自动建议中选择“jQuery”。它将在左侧加载文本和 jQuery 徽标。但是假设这样做之后，如果我们从文本框中删除单词“jQuery”的一些字符，那么它应该重置并显示空白输出。但它仍然是之前加载的相同文本和徽标。

一般来说，我想做的是，用户必须从自动建议中选择一些东西，而不是写任何不在自动建议中的东西。

我们怎么能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:14:22.910

您可以覆盖选择和更改事件来实现这一点：

```
 $(".combobox").autocomplete({
    minLength: 0,
    source: function (request, respond) {
        //some source
    },
    change: function (event, ui) {
        //if no value inside the LI, reset the input -> uses a custom selector
        if ($(".ui-autocomplete li:textEquals('" + $(this).val() + "')").size() == 0) {
            $(this).val('');
    },
    select: function (event, ui) {
        $(this).val(ui.item.Name);
    }
 ); 
```

您只需要一个自定义选择器来比较文本输入：

```
$.expr[':'].textEquals = function (a, i, m) {
    return $(a).text().match("^" + m[3] + "$");
}; 
```

# wordpress - Wordpress MU，无法访问 /wp-admin

> ID：10967621
> 
> 赞同：0
> 
> 时间：2012-06-10T09:27:03.847
> 
> 标签：wordpress

我使用 WordPress MU Domain Mapping-plugin 设置了具有两个域的 MU 安装。

系统先配置子域d2.domain1.com（在sites下，然后映射

domain2.com 到 d2.domain1.com

检查域映射中的以下设置：远程登录、永久重定向、用户域映射页面、将管理页面重定向到站点的原始域

我的问题是我无法从 domain2.com/wp-admin 访问管理员 - 它只是给了我这个错误：

```
Now The domain mapping plugin only works if the site is installed in /. This is a limitation of how virtual servers work and is very difficult to work around. 
```

但是wordpress安装在/。

相关wp-config如下：

```
define( 'MULTISITE', true );
define( 'SUBDOMAIN_INSTALL', true );
// $base = '/';                                                                                                                                      
define( 'DOMAIN_CURRENT_SITE', 'domain1.com' );
define( 'PATH_CURRENT_SITE', '/' );
define( 'SITE_ID_CURRENT_SITE', 1 );
define( 'BLOG_ID_CURRENT_SITE', 1 );
define( 'NOBLOGREDIRECT', 'http://domain1.com' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:35:30.777

这是另一种解决方案

```
define('ADMIN_COOKIE_PATH', '/');
define('COOKIE_DOMAIN', '');
define('COOKIEPATH', '');
define('SITECOOKIEPATH', ''); 
```

到 wp-config.php 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:24:29.467

在子域和文件夹设置之间进行更改时，wp_site-table 中可能存在错误。确保`/`为主域设置路径。

# app-store-connect - 如何在 iTunes Connect 中更改公司名称

> ID：10967622
> 
> 赞同：6
> 
> 时间：2012-06-10T09:27:24.503
> 
> 标签：app-store-connect

当我登录 iTunes Connect 时，页面标题显示

> [iTunes Connect 徽标] Torben Gundtofte-Bruun, Torben Gundtofte-Bruun [退出按钮]

**为什么我的名字出现两次？**我想其中一个字段应该是我的公司名称，对吧？**我该如何改变？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T11:12:11.093

您引用的 iTunes Connect 中的字段通常会以以下格式显示用户和公司名称：

> Joe Bloggs，Example Corp

由于您是注册开发者帐户的个人而非公司，因此您的姓名会在上面的字段中显示两次。

如果您希望将其更改为公司名称，您需要联系 Apple（电话最好是立即响应并启动“iOS 开发人员计划公司分配”流程）并告诉他们。

您将收到一封带有上述标题的电子邮件，您可以在其中在线登录并提供相关信息，其中将包括公司注册证书的传真副本和（有时）带有更多信息的公司信笺抬头，Apple 可能会或可能不会要求。

在此处查找您所在国家/地区的联系电话：

[https://developer.apple.com/contact/phone.php](https://developer.apple.com/contact/phone.php)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T09:56:46.947

您必须向 Apple 开发人员支持发送一封电子邮件，要求他们更改您的公司名称，并附上公司注册证书和一封说明您有权代表公司行事的信函。

# ruby-on-rails - Rails 路由开始斜线

> ID：10967626
> 
> 赞同：3
> 
> 时间：2012-06-10T09:29:15.540
> 
> 标签：ruby-on-rails, ruby

有人可以告诉我在路线上开始斜线的意义吗？

```
get "search" => "hello#world"
vs
get "/search" => "hello#world" 
```

两者都有效，但有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T09:36:39.013

他们是一样的。Ruby on Rails 允许这两种格式是宽容的。您可以互换使用它们。

# actionscript-3 - Flex - 调用位于主视图之外的公共方法

> ID：10967627
> 
> 赞同：0
> 
> 时间：2012-06-10T09:29:16.870
> 
> 标签：actionscript-3, flash, apache-flex, mobile, adobe

Flex 的新手，我试图找出一种方法来调用在应用程序的“firstView”视图上声明的公共方法。我如何获得参考？

**主视图**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160"  firstView="views.loaderView" creationComplete="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            private function init():void{
                //how do I access this method?
                        loaderView.setLoaderMsg("My Message");
            }
        ]]>
    </fx:Script>
</s:ViewNavigatorApplication> 
```

**装载机视图**

```
 <fx:Declarations>
        <s:RadioButtonGroup id="rg"/>
    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout paddingTop="10" paddingBottom="15" paddingLeft="15" paddingRight="15" gap="15" 
                          horizontalAlign="center" verticalAlign="middle"/>
    </s:layout>
    <s:BusyIndicator/>  
    <s:Label id="loaderMsg" text="Loading..." />

</s:View> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:50:52.950

默认情况下，MXML 中定义的所有子项都位于公共命名空间中，因此您可以通过点符号轻松访问它。这是 Flex 中第一步最简单的方法。

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                            xmlns:s="library://ns.adobe.com/flex/spark" 
                            applicationDPI="160"
                            firstView="views.loaderView"
                            creationComplete="init()">
  <fx:Declarations>
  <!-- Place non-visual elements (e.g., services, value objects) here -->
  </fx:Declarations>
  <fx:Script>
    <![CDATA[
      private function init():void{
        trace(navigator.activeView);
        // const first:loaderView = navigator.activeView as loaderViewM
        // first.loaderMsg.text = "My Message";
      }
    ]]>
  </fx:Script>
</s:ViewNavigatorApplication> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:44:03.817

使用 FlexGlobals.topLevelApplication.myPublicFunction

# git - Git（Eclipse 中的 EGit）误解更改（错误标记）

> ID：10967630
> 
> 赞同：0
> 
> 时间：2012-06-10T09:29:46.013
> 
> 标签：git, egit

我刚刚遇到了一个 Git 问题。我使用 Eclipse IDE 和 EGit 插件。在对我的 C++ 文件进行一些更改后，我看到 EGit 将我没有触及的一些行标记为已添加，而其他行 - 已删除。因此，对于我所做的特定修改，“差异”（或使用的任何东西）似乎无法正常工作。有什么方法可以“帮助”EGit（git）并将某些行标记为未更改？最好来自 Egit 的 GUI，而不是命令行....

如果我按原样提交，它认为我更改了很多初始文件，而我没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T00:01:02.693

看起来像混合行尾或日食自动格式。不确定 C++，但 Java 编辑器喜欢添加尾随空格。quickdiff 栏中的菜单可用于将更改的行恢复为未更改的状态。

# python - 如何使用python通过（tor）socks代理发出HTTP请求？

> ID：10967631
> 
> 赞同：10
> 
> 时间：2012-06-10T09:30:13.353
> 
> 标签：python, http, proxy, socks, tor

我正在尝试使用 python 发出 HTTP 请求。我尝试更改我的 Windows 系统代理（使用`inetcpl.cpl`）

```
url = 'http://www.whatismyip.com'
request = urllib2.Request(url)
request.add_header('Cache-Control','max-age=0')
request.set_proxy('127.0.0.1:9050', 'socks')
response = urllib2.urlopen(request)
response.read() 
```

给了我错误

> 回溯（最后一次调用）：文件“”，第 1 行，响应 = urllib2.urlopen(request) 文件“C:\Python27\lib\urllib2.py”，第 126 行，在 urlopen 返回 _opener.open(url,数据，超时）文件“C:\Python27\lib\urllib2.py”，第 400 行，打开响应 = self._open(req, data) 文件“C:\Python27\lib\urllib2.py”，第 423 行，在 _open 'unknown_open', req) 文件“C:\Python27\lib\urllib2.py”，第 378 行，在 _call_chain 结果 = func(*args) 文件“C:\Python27\lib\urllib2.py”，第 1240 行, 在 unknown_open raise URLError('unknown url type: %s' % type) URLError:

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T11:06:35.793

我是OP。根据Tisho给出的答案，这对我有用：

```
import urllib, urllib2

##Download SocksiPy - A Python SOCKS client module. ( http://code.google.com/p/socksipy-branch/downloads/list )
##Simply copy the file "socks.py" to your Python's lib/site-packages directory, and initiate a socks socket like this.
## NOTE: you must use socks before urllib2.
import socks
import socket
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)
socket.socket = socks.socksocket

url = 'http://ifconfig.me/ip'
request = urllib2.Request(url)
request.add_header('Cache-Control','max-age=0')
response = urllib2.urlopen(request)
print response.read() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T09:43:46.267

似乎 URLLIB2 不支持 SOCKS 作为代理类型（如此处所述：[How can I use a SOCKS 4/5 proxy with urllib2?](https://stackoverflow.com/questions/2317849/how-can-i-use-a-socks-4-5-proxy-with-urllib2/8100870#8100870)）。查看[http://code.google.com/p/socksipy-branch/](http://code.google.com/p/socksipy-branch/)以获取 urllib+socks 的示例。

# c# - 如何在多行字符串变量中搜索字符串？C＃

> ID：10967632
> 
> 赞同：0
> 
> 时间：2012-06-10T09:30:17.250
> 
> 标签：c#, serial-port

我从控制台保存命令的输出。

输出可以有多于一行。

如何在所有输出中搜索特定单词？

这是我当前的代码：

```
string buff, ok; 
ok = "OK"; 
SerialPort p = ...
// p initialization...
p.Write("AT+CMGL=\"REC UNREAD\" " + "\r"); 
System.Threading.Thread.Sleep(1000); 
buff = p.ReadExisting(); 
if (buff.Contains(ok)) 
   // do smth 
```

输出示例：

```
+CMGL: 10,"REC READ","0372022244","12/02/22,08:08:58+08"
2073692066616374757261207661206669206163686974617461206C612074696D702120446574616C696920696E206D6167617A696E656C6520566F6461666F6E6520736175206C612062616E6361206476732E

好的

```

这会搜索 buff 中的所有行吗？还是只是第一行？我这样尝试过，似乎他在输出中找不到“OK”

```
 namespace SerialTest

{
    public class Program
    {

        public static void Main(string[] args)
        {
            string buff="0";
            string ok = "OK";

            SerialPort p = new SerialPort("COM28");
            p.DataReceived += new SerialDataReceivedEventHandler(p_DataReceived);
            p.Open();
            string line = "1";
            p.Write("AT" + "\r");
            buff = p.ReadExisting();
            p.Write("AT+CMGF=1"+ "\r" );
            buff = p.ReadExisting();

            do
            {
                p.Write("AT+CMGL=\"REC UNREAD\" " + "\r");
                buff = p.ReadExisting();

                if (buff.Contains(ok))
                    Console.WriteLine("Everything is OK");
                else
                    Console.WriteLine("NOK");

                line = Console.ReadLine();
            } while (line != "quit");
            p.Close();
        }

        public static void p_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {

            Console.WriteLine((sender as SerialPort).ReadExisting());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:43:32.543

`p.ReadExisting()`对 a 进行读取操作`SerialPort`。

[MSDN](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readexisting.aspx)文档说：

> 根据编码，在 SerialPort 对象的流和输入缓冲区中读取所有立即可用的字节。

这意味着您可能无法在一次调用中获得您期望的所有数据，`ReadExisting`因为该数据可能尚不可用。在进行`Contains`检查之前，您可能应该循环并从串行端口读取所有数据。

附带说明：`Thread.Sleep`特别是在处理串行操作时使用不是一个好主意。不要在等待数据时休眠，而是使用`SerialPort.DataReceived` [事件](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived)来读取可用数据。

试试这个从你的串口正确读取数据并摆脱`Sleep`

```
String data = "";
p.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
private static void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
{
   SerialPort sp = (SerialPort)sender;
   string indata = sp.ReadExisting();
   data += indata;
} 
```

然后设置一个计时器以在 1 秒后检查输出。在您检查的计时器事件处理程序中`data.Contains("OK");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:56:49.867

`buff.Contains(ok)`将在整个字符串 ( `buff`) 中搜索您指定的字符串 ( `ok`)。

换行符 ( `'\n'`) 的处理方式与字符串中的任何其他字符相同。如果您有一个带值的字符串`"a\nb\nc"`并且您要搜索`"\nc"`，它将返回 true，因为该字符串包含一个由字符`'\n'`和组成的字符串`'c'`。

所以如果这对你不起作用，我会重新检查 and 的值`buff`，`ok`因为这段代码应该没问题。

# r - R多循环分解

> ID：10967633
> 
> 赞同：1
> 
> 时间：2012-06-10T09:30:17.060
> 
> 标签：r

是否有将系列分解为趋势和多个周期的软件包？stl 非常适合一个周期，但我想找到其他周期的可能性。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:33:52.703

您可以考虑使用快速傅里叶变换或小波分解对序列进行光谱分析。[CRAN Task View on Time Series的](http://cran.r-project.org/web/views/TimeSeries.html)**Decomposition and Filtering**部分建议了很多选项。

# jquery - 在文本顶部转移效果

> ID：10967645
> 
> 赞同：2
> 
> 时间：2012-06-10T09:32:05.797
> 
> 标签：jquery, jquery-ui

我创建了一个这样的菜单

![在此处输入图像描述](../Images/7a6dbb061229c6a650742e9d9565f1da.png)

我所做的是，当您单击此菜单的一个项目时，活动项目的类被转移到新项目。

**HTML**

```
<ul class="navigation">
  <li class="home"><a href="#/home">home</a></li>
  <li class="about"><a href="#/about">about</a></li>
  <li class="work"><a href="#/work">work</a></li>           
  <li class="contact"><a href="#/contact">contact</a></li>      
</ul> 
```

**jQuery**

```
active.removeClass('active');
  active.effect("transfer", { to: newBtn, className: "active" }, 300,function(){
    newBtn.addClass('active');
    active = newBtn;
}); 
```

**CSS**

```
.active{
  background-color: @ed;
  border-top:1px solid white;
  border-bottom:1px solid @9;
  .radius(13px);
  a{ color:#333;}
} 
```

现在，它工作正常，类被转移到新的活动项目，但不是在文本后面。传输时背景位于文本顶部：

![在此处输入图像描述](../Images/d4f5ab162ae560fce31fadb6201db1b8.png)

**[JSFiddle](http://jsfiddle.net/rHNz7/)**

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:02:19.773

`z-index`好的，正如我最初怀疑的那样，能够解决这个问题。

首先，给`active`类低值：

```
z-index: 1; 
```

那么列表项应该获得很高的价值：

```
.navigation li {
    position: relative;
    z-index: 100;
} 
```

[更新了小提琴](http://jsfiddle.net/rHNz7/2/)。

# django - 有条件地需要 Django 表单字段

> ID：10967646
> 
> 赞同：22
> 
> 时间：2012-06-10T09:32:09.677
> 
> 标签：django, forms

我想要一个基于将布尔值设置为`True`or有条件地需要的字段`False`。

`required =True`如果`is_company`设置为，我应该返回什么设置`True`？

```
class SignupFormExtra(SignupForm):
    is_company = fields.BooleanField(label=(u"Is company?"), 
                                     required=False)
    NIP = forms.PLNIPField(label=(u'NIP'), required=False)

    def clean(self):
        if self.cleaned_data.get('is_company', True):
            return ...?
        else:
            pass 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-10T10:19:41.723

检查文档中有关[清理和验证相互依赖的字段](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)的章节。

文档中给出的示例可以很容易地适应您的场景：

```
def clean(self):
    cleaned_data = super(SignupFormExtra, self).clean()
    is_company = cleaned_data.get("is_company")
    nip = cleaned_data.get("NIP")
    if is_company and not nip:
        raise forms.ValidationError("NIP is a required field.")
    return cleaned_data 
```

# iphone - 无用户名投票一次

> ID：10967649
> 
> 赞同：3
> 
> 时间：2012-06-10T09:32:36.307
> 
> 标签：iphone, objective-c, ios, uuid, udid

我希望我的应用用户能够投票一次。这意味着我需要他们的 UDID。

由于我不会唠叨要注册到我的应用程序，我发现有必要为该设备使用一些标识。

我听说 Apple 已弃用设备 UDID。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T09:37:24.337

正如许多人所说，UDID 块并不是世界末日，因为苹果已经提供了仍然绑定到特定于设备的变量的方法。

我会阅读博客文章[在 UDID 替代品的爆炸中蓬勃发展，](http://techcrunch.com/2012/04/22/udid-alternatives/)并详细了解您的应用程序需要什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T09:38:48.180

我会使用 OpenUDID 它使用起来非常简单 你会执行以下操作

```
#include "OpenUDID.h"
NSString* openUDID = [OpenUDID value]; 
```

从这里获取它 [https://github.com/ylechelle/OpenUDID/](https://github.com/ylechelle/OpenUDID/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T09:40:12.650

使用这个方法

```
+ (NSString *)newUUID
{
CFUUIDRef theUUID = CFUUIDCreate(NULL);
CFStringRef string = CFUUIDCreateString(NULL, theUUID);
CFRelease(theUUID);
return (NSString *)string;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:16:32.123

If you have time until (probably) the WWDC keynote tomorrow, this could be interesting for you: [The Wall Street Journal: Apple to Release New Tracking Tool for Apps](http://professional.wsj.com/article/SB10001424052702303665904577454653752815434.html)

# javascript - refresh_ce 含义和来源

> ID：10967652
> 
> 赞同：8
> 
> 时间：2012-06-10T09:33:03.270
> 
> 标签：javascript, html, refresh

**有人知道名为“ refresh_ce** ”的http url参数的含义和来源吗？该字符通常紧跟在问号字符之后。我认为它是由元刷新（或 javascript）生成的，以便让服务器知道“它不是第一次访问”该页面。谁创造了这个名字？这是一个标准的事实吗？我在谷歌搜索这个词时找不到任何重要信息。

如果它是古老的东西，它是否仍然重要（对于旧版浏览器/系统）？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-03T16:30:21.453

至少在意大利，这个参数与当地出版/广告市场的标准相关联。这些标准规定允许页面每 5 分钟（或更长时间）刷新一次。此类刷新用于增加页面和广告印象，并向用户展示一组新广告。refresh_ce 参数用于标识刷新的页面展示次数，这些展示次数被排除在某些分析和计数之外。

另一个类似的参数是refresh_ce-awe，它标记了仅刷新部分内容（不是整个页面）时产生的印象。这通常发生在用户浏览照片库时。

# javascript - 如何将动态创建的 IFRAME 的字符集设置为 UTF-7？

> ID：10967653
> 
> 赞同：0
> 
> 时间：2012-06-10T09:33:19.600
> 
> 标签：javascript, html, iframe, character-encoding

有没有办法将动态创建的 IFRAME 的字符集设置为**UTF-7**？我尝试了以下但失败了:-(

```
document.getElementById('test').contentWindow.document.body.innerHTML = "<html><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-7\"></head><body></body></html>"; 
```

IFRAME 页面仍然是 UTF-8 :-( (使用 Firefox)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:43:55.750

UTF-7 在网络世界中一直被认为是危险的，而在其他开发世界中几乎完全没用。

有些浏览器从不支持它（例如 Chrome）。

链接：[http ://scarybeastsecurity.blogspot.fr/2010/07/firefox-fixes-css-based-cross-origin.html](http://scarybeastsecurity.blogspot.fr/2010/07/firefox-fixes-css-based-cross-origin.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:30:36.440

HTML5 规范要求符合标准的浏览器不得支持 UTF-7：

> 用户代理不得支持 CESU-8、UTF-7、BOCU-1 和 SCSU 编码。

来自[http://dev.w3.org/html5/spec/parsing.html#determining-the-character-encoding](http://dev.w3.org/html5/spec/parsing.html#determining-the-character-encoding)

# php - 如何在没有空格的字符串中结束变量名

> ID：10967656
> 
> 赞同：7
> 
> 时间：2012-06-10T09:34:25.143
> 
> 标签：php

如何在不使用空格或任何其他特殊字符的情况下结束字符串中的变量名？

示例有什么我可以放在`$num`和`st`输出之间`1st`而不是`1 st`

```
$num = 1;
echo "$num st"; 
```

不使用点运算符进行连接

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T09:37:09.153

用大括号包裹变量的名称。

```
$num = 1;
echo "${num}st"; 
```

或者使用`printf`语法而不是简单的插值：

```
$num = 1;
printf("%dst", $num); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:35:24.340

使用连接`.`字符：

```
echo $num . 'st'; 
```

# c++ - 为什么变量不变？

> ID：10967662
> 
> 赞同：2
> 
> 时间：2012-06-10T09:35:49.440
> 
> 标签：c++, mingw

我刚学完随机函数的使用方法，所以我决定做一个小赌场游戏。但是，我的代码不会更新`double Money;`变量。也就是说，我无法在该变量中设置、添加或减去值。我无法确定为什么会发生这种情况。

这是我的代码：

```
int main()
{
  double Money;//Variable Money;

  srand ( time(0) );
  int randomNumber;
  randomNumber = (1+(rand() % 10));
  cout << "\nEnter your Starting Money: ";
  int Guess;
  cin >> Money;
  cout << "Your Starting money is: " << Money;
  cout << "\nGuess the number between 1 and 10: ";
  start:
  cin >> Guess;
  if(Guess == randomNumber)
  {
    Money + 10;
    cout << "You were correct! The number was " << randomNumber << "!";
  }
  else
  {
    Money - 10;//Nothing Happens
    cout << "You were wrong! Your money is now: " << Money << "\nRetry Please: ";
    goto start;
  }
  char f;
  cin >> f;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T09:37:17.647

```
Money + 10; 
```

是一个没有副作用的声明。你要

```
Money += 10; 
```

这相当于

```
Money = Money + 10; 
```

想想看，如果你写

```
4 + 5; 
```

你会期望`4`成为`9`？...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T09:38:59.453

`money - 10;`是一个有效的 C 和 C++ 表达式，它（从概念上）计算该值然后丢弃结果，与`42;`.

使用`money = money - 10;`或`money -= 10;`代替。添加也一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T09:39:33.600

您需要将新值分配给`Money`

`Money = Money + 10`或者，如前所述，`Money += 10`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T10:16:19.350

Money + 10 不会改变值，如果你想改变值使用 Money = Money + 10 你也可以使用 Money += 10 和 btw 而不是 char f; 辛 >> f; .. cout << endl; 系统（“暂停”）；看起来更好

# events - 听众只工作一次

> ID：10967664
> 
> 赞同：-2
> 
> 时间：2012-06-10T09:36:17.373
> 
> 标签：events, controller, sencha-touch, sencha-touch-2

我的应用程序有问题，假设某个面板中的按钮上有一个侦听器，侦听器工作正常并且事件在第一时间被触发。但是，如果我重新访问此页面，听众将无法工作。

我在我的控制器中配置监听器如下：

```
config: {
  refs:{
         btn : '#mybtn'
       }
  control : { 
         btn : {
                 tap : 'doSmth'
               }
            }
        },

  doSmth : function () {
       //some code goes here
  }

  doS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:33:26.653

我觉得你的描述不够详细。但是，我已经多次遇到此问题，主要是由于：

*   停用/销毁您的组件。Sencha Touch 仅在关联控制器初始化时将侦听器粘贴到您的组件**一次。**

*   你做了一些改变你的组件的 id 的事情。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:57:38.387

`autoDestroy: false`在包含`mybtn`控件的视图中添加配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T17:38:25.520

添加更具体的选择器。就像'#mypanel #mybtn'，其中#mypanel 是按钮的父级。

# javascript - 当鼠标悬停到 tr 时，如何在表格中的输入中设置黑色背景？

> ID：10967675
> 
> 赞同：0
> 
> 时间：2012-06-10T09:38:24.193
> 
> 标签：javascript

我尝试自己制作的一半资源，但我无法更进一步，似乎我卡住了：

```
<table id="percab" onmouseover="hov();" border="1" style="width: 100%;">
    <tr><td><input type="text" value="something" name="test" /></td><td>welcome</td></tr>
    <tr><Td>check this out</td><td>&nbsp;</td></tr>
    <tr><td><input type="text" value="example" name="sample" /></td><td>sample</td></tr>
</table>​ 
```

```
function hov() {
    if(!document.getElementsByTagName || !document.createTextNode) return;
    var rows = document.getElementById('percab').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
    for(i = 0; i < rows.length; i++) {
        rows[i].onmouseover = function() {
            for(var childItem in this.childNodes) {
                if(this.childNodes[childItem].nodeType == 1) {
                    this.childNodes[childItem].style.backgroundColor = "#000";
                    this.childNodes[childItem].style.color = "#FFF";
                }
            }
        }
    }
}​ 
```

如果该行有任何输入（现在它只是一个文本输入），我想将此输入的背景设置为黑色。

拜托，**纯 JavaScript**。

# eclipse - Eclipse Zend PDT 从 zend-framework 隐藏待办事项/任务/警告

> ID：10967682
> 
> 赞同：6
> 
> 时间：2012-06-10T09:39:25.517
> 
> 标签：eclipse, zend-framework, eclipse-pdt

是否可以在 Eclipse 中隐藏特定文件夹中的待办事项/任务/警告？例如，我在我的一个项目中使用 Zend 框架，该项目具有 zend mvc 文件夹结构。所以 zf 在文件夹库中。在我的项目中拥有来自 Zend 库的数百个待​​办事项有点让人分心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:28:16.770

```
May be this will work for you.

Right click project
Select properties
Select validation
Check Enable Project specific settings
On the XML Validator row, click the '...' button
Select Exclude Group
Click Add rule
Select 'Folder or file name'
Click Next
Select files or folder which are not validated.
Click Finish
Click OK
Click OK 
```

# iphone - NSString 格式为 EXC_BAD_ACCESS 代码 = 1

> ID：10967685
> 
> 赞同：0
> 
> 时间：2012-06-10T09:39:51.557
> 
> 标签：iphone, objective-c, nsstring, youtube-api

[如本 YouTube教程](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)中所述，我将从 UIWebView 创建 YouTube 播放器。但是当我尝试使用格式初始化字符串时，我收到 EXC_BAD_ACCESS code=1 这是我的代码：

```
NSString *youTubeVideoHTML = [NSString stringWithFormat:@"<html><head> <meta name = 
\"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head> 
<body style=\"background:Black;margin-top:100px;margin-left:100px\"> <div><object 
width=\"212\" height=\"172\"><param name=\"movie\" value=\"%@\"></param> <param 
name=\"wmode\" value=\"transparent\"></param> <embed src=\"%@\" type=\"application/x-
shockwave-flash\" wmode=\"transparent\" width=\"212\" height=\"172\"></embed> </object>
</div></body></html>",myYoutubeLink]; 
```

我试图直接链接到 youtube 视频而不是 %@，效果很好。但我需要放任何 youtube 网址。我的错误在哪里？我无法创建字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:44:46.257

您有两个 %@，但只有一个参数：

```
NSString *youTubeViedoHTML = [NSString stringWithFormat:@"value=%@, src=%@", myYouTubeLink, myYouTubeLink]; 
```

# vb.net - 使图片框比其他图片框透明？

> ID：10967690
> 
> 赞同：0
> 
> 时间：2012-06-10T09:40:35.520
> 
> 标签：vb.net, transparency, transparent, vb.net-2010

我有两个 Picturebox 并且都应该是透明背景，但真正的问题是表单背景都是透明的，但彼此之间不透明。

这是我的问题的照片：http: [//www.saj-sa.com/problem.gif](http://www.saj-sa.com/problem.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:35:40.920

```
Picturebox1.visible = true  \\ will turn on a box
Picture box.visible = false \\ will turn a box off 
```

将两个盒子放在一起，然后打开您想要看到的盒子，关闭您不想看到的盒子，颠倒顺序在它们之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:13:25.067

```
Me.Picturebox2.Parent = Me.Picturebox1 : Me.Picturebox2.Visible = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T17:54:46.233

添加面板 1 并将图像设置为面板 1 添加面板 2 并将图像设置为面板 2

将面板 1 或 2 拖到面板 1 或 2 中，以使其位于后面或前面

所以它是透明的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:28:01.210

我认为op希望两个图像都可见，但第一个女孩透明部分要真正透明，而不是隐藏另一个女孩。

要实现这一点，您需要将所有图像添加到相同的图形元素中，从最深的一个（背景）到最高的一个（顶部的那个）

```
 private back as New bitmap("C:/background.bmp") 
 private girlOnTop as New bitmap("C:/topGirl.bmp") 
 private girlInMiddle as New bitmap("C:/middleGirl.bmp") 

'set the size of your graphic base on the background 

 Dim BMP As New Bitmap(back.Width, back.Height) 

'create a graphic base on that
 Dim GR As Graphics = Graphics.FromImage(BMP)

'draw onto your bmp starting from the background
 GR.DrawImage(back, 0, 0)

'set X,y to the coordinate you want your girl to appear
 GR.DrawImage(middleGirl, X, Y)
 GR.DrawImage(topGirl, X, Y)

'clear the picturebox
pbox1.Image = Nothing

'now that we have draw all our image onto the same bitmap, assign it to your picturebox element
pbox1.Image = BMP 
```

# c# - 在 asp.net C# 中的嵌套 UL 中添加数据

> ID：10967692
> 
> 赞同：1
> 
> 时间：2012-06-10T09:40:58.793
> 
> 标签：c#, asp.net, html-lists

我的 Asp.net (C#) 网站中有一个用于菜单控件的多级嵌套 UL。示例列表如下：

```
 <ul class="my-menu">
    <li><a href="#a">My User Control Menu</a>
        <ul>
            <li><a href="#aa">menu item that is quite long</a> </li>
            <li><a href="#ab">menu item</a>
                <ul>
                    <li ><a href="#">menu item</a></li>
                    <li><a href="#aba">menu item</a></li>
                    <li><a href="#abb">menu item</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">menu item 2</a> </li>
    <li><a href="#">menu item 3</a>
        <ul>
            <li><a href="#">menu item</a>
                <ul>
                    <li><a href="#">short</a></li>
                    <li><a href="#">short</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">menu item 4</a> </li>
  </ul> 
```

如何通过代码在列表中以任何嵌套顺序添加元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:22:58.567

您可以使用中继器构建菜单：http: [//support.microsoft.com/kb/306154](http://support.microsoft.com/kb/306154)

# hibernate - 在 NHibernate Criteria 查询中加入多个字段

> ID：10967695
> 
> 赞同：1
> 
> 时间：2012-06-10T09:42:16.810
> 
> 标签：hibernate, nhibernate, criteria, hibernate-criteria

我有一张`Dept`桌子和一张`Emp`桌子。

我需要以这样的方式加入这两个表，使`where`子句看起来像这样：

```
where dept.deptId = emp.DeptId and dept.deptName = emp.empTrainingName 
```

我试过这个：

```
Criteria criteria = session.createCriteria(Dept.class).createAlias("empMap","id"); 
```

使用它，执行第一个 where 条件 ie `dept.deptId = emp.DeptId`。但我不确定如何`dept.deptName`与`emp.empTrainingName`.

如何使用 NHibernate 中的 Criteria API 执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T09:48:42.090

```
Criteria criteria = session.createCriteria(Dept.class, "department")
                           .createAlias("empMap", "employee")
                           .add(Restrictions.eqProperty("department.deptName", 
                                                        "employee.empTrainingName")); 
```

您还可以使用 with 子句，这在左连接的情况下是必需的：

```
Criteria criteria = 
    session.createCriteria(Dept.class, "department")
           .createAlias("empMap", 
                        "employee", 
                        Criteria.LEFT_JOIN,
                        Restrictions.eqProperty("department.deptName", 
                                                "employee.empTrainingName")); 
```

旁注：你选择的名字很糟糕。而不是`Dept.deptId`，为什么不使用`Department.id`？取而代之`Emp.empTrainingName`，为什么不选择`Employee.trainingName`？

# java - 启动 jboss 4.2.3，分段错误

> ID：10967705
> 
> 赞同：1
> 
> 时间：2012-06-10T09:45:03.847
> 
> 标签：java, linux, jboss

我们有几台机器运行相同的代码，但由于某种原因，有些机器没有运行它的特定版本（这些机器确实可以很好地与我们以前的代码版本一起运行）。其余机器在有问题的版本上运行良好。

似乎 Jboss 只是由于某种原因崩溃了，最后的输出行是：

> WARN [config] 无法处理上下文“/lib”的部署描述符

并且在没有 jboss 启动/停止脚本的情况下运行它时，它以：

> [1]+ 分段错误

我在所有机器上都使用 openJdk 1.6.0_18。

# php - Shopify PHP API：支持变音符号

> ID：10967708
> 
> 赞同：2
> 
> 时间：2012-06-10T09:45:39.013
> 
> 标签：php, json, api, diacritics, shopify

我正在使用[Shopify PHP API](https://github.com/sandeepshetty/shopify.php)。没有变音符号的产品工作正常，并被添加。当我尝试发送带有捷克变音符号 (ěščřžýáíé) 的产品时，会显示错误：

```
Fatal error: Uncaught exception 'ShopifyApiException' with message
'Unprocessable Entity' in C:\webdev\www\shopify-api-doporucene\shopify.php on line 32

ShopifyApiException: Unprocessable Entity in C:\webdev\www\shopify-api-doporucene\shopify.php on line 32 
```

我在本地主机上使用 Wamp。我试过`json_encode`了，但它不起作用。有谁知道我该如何解决这个问题？

我的 PHP 代码（此示例中删除了 API 密钥）：

```
 require 'shopify.php'; 

    $shops_myshopify_domain = "hyatt-ryan2200.myshopify.com"; 

    $api_key = ""; 

    $shared_secret = ""; 

    $shops_token = ""; 

    // For regular apps: 
    $shopify = shopify_api_client($shops_myshopify_domain, $shops_token, $api_key, $shared_secret); 

   $newproduct = array 
   ( 
      "product"=>array 
       ( 
           "title"=>"Product title (works fine without diacritics)", 
           "body_html"=>"Super Duper Plan", 
           "vendor"=>"Vendor", 
            "product_type"=>"Test" 
        ) 
    ); 

// All requests accept an optional fourth parameter, that is populated with the response headers. 
$senditem = $shopify('POST', '/admin/products.json', $newproduct, $response_headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:15:46.890

当您使用 WAMP 时，请尝试以这种方式包含或更改 PHP.ini 文件：

```
; PHP's default character set is set to empty.
; http://php.net/default-charset
default_charset = "utf-8" 
```

如果每件事都使用相同的内容，则字符集问题曾经通过端到端检查来解决（shopify 就是 UTF-8）。重要提示：更改后重新加载 WAMP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:17:17.357

前提：我从@Sarke的评论开始，所以这个问题会有答案。

你可以试试

```
$newproduct = array 
   ( 
      "product"=>array 
       ( 
           "title"=>"Product title (with ot without diacritics)", 
           "body_html"=>"Super Duper Plan", 
           "vendor"=>"Vendor", 
            "product_type"=>"Test" 
        ) 
    ); 

foreach($newproduct["product"] as $k => $v){
    $newproduct["product"][$k] = iconv("UTF-8", "ISO-8859-2", $v);
} 
```

使用 ISO-8859-2 编码值创建一个 $newproduct 数组，与 shopify 服务器一致。

# php - Codeigniter：URL 错误中的 UTF-8

> ID：10967709
> 
> 赞同：1
> 
> 时间：2012-06-10T09:46:16.880
> 
> 标签：php, codeigniter, url, utf-8

首先，对不起我的英语不好。

我正在使用 Codeigniter。当我在 UTF 8 中创建动态地址时，我得到了奇怪的字符。

网址如下所示：domian.com/article/שלום#.T9H1U9WRGSo

而不是这个：domain.com/article/שלום

链接看起来不错：

```
<a href="http://www.domain.com/article/שלום">Text</a> 
```

但是在我点击链接后，我会重定向到这里（在除 IE 之外的所有浏览器中）：

domain.com/article/שלום#.T9H1U9WRGSo

谢谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:48:35.610

好的，所以交易是您的 URL 中不能有非 ascii 字符。

字符必须被翻译或编码。

1.  查看文本帮助文档中描述的 convert_accented_characters() 和 foreign_chars.php；或者
2.  看一下 codeigniter 的 urlencode()，它将非 ascii 字母编码为正确的 % 代码。

有趣的是，如果您查看像[http://en.wiktionary.org/wiki/%D7%A9](http://en.wiktionary.org/wiki/%D7%A9)这样的网站，该符号在 URL 中看起来是正确的，因为浏览器正在为您正确地将 % 代码转换为 ש 符号。

编辑：有些人报告说这种方法有效

```
$hebrew  = 'ס֑ס֒ס֓ס֔ס֕ס֖ס֗ס֘ס֙ס֚ס֛ס֜ס֝ס֞ס֟ס֠ס֡ס֢ס֣ס֤ס֥ס֦ס֧ס֨ס֩ס֪ס֫ס֬ס֭ס֮ס֯סְסֱסֲסֳסִסֵסֶסַסָסֹוֺסֻסּסֽ־סֿ׀סׁסׂ׃סׄסׅ׆סׇאבגדהוזחטיךכלםמןנסעףפץצקרשתװױײ׳״';  
$config['permitted_uri_chars'] = $hebrew . ' a-z 0-9~%.:_\-'; 
```

（老实说，如果字母表错误，请不要怪我：P）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:05:52.190

我无法解释为什么 Codeigniter 可能会将您*重定向*到`#`URL，但 URL 不能包含非 ASCII 字符。所有非 ASCII 字符都需要使用 % 进行转义`urlencode`：

```
<a href="http://www.domain.com/article/<?php echo urlencode('שלום'); ?>">Text</a> 
```

由于浏览器应该在幕后执行此操作作为最坏情况的后备，我不能说这会解决问题，但至少它更正确。

# php - 加入mysql查询

> ID：10967711
> 
> 赞同：0
> 
> 时间：2012-06-10T09:46:45.130
> 
> 标签：php, mysql, join

我有这个工作正常的查询：

```
$query = "SELECT adafruit_articles.id, adafruit_articles.title, adafruit_articles.timestamp  FROM adafruit_articles WHERE MONTH(timestamp)='$m' LIMIT 5"; 
```

我还有另一个名为 adafruit_images 的数据库，其中包含每篇文章的图片名称（有些文章没有图片，有些有更多）。

结构如下所示：

```
id  articleid   image 
```

我想结合上面的查询，它也抓取图像。我只是在 mysql 方面不太好，所以我希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:52:44.247

```
SELECT adafruit_articles.id, adafruit_articles.title, adafruit_articles.timestamp
FROM adafruit_articles
LEFT OUTER JOIN adafruit_images ON adafruit_images.articleid = adafruit_articles.id
WHERE MONTH(timestamp)='$m'
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T09:54:46.673

它应该看起来像这样：

```
SELECT adafruit_articles.id, adafruit_articles.title, adafruit_articles.timestamp
FROM adafruit_articles 
JOIN adafruit_images
ON adafruit_images.articleid = adafruit_articles.id
WHERE MONTH(timestamp)='$m' 
LIMIT 5 
```

# php - 从 Ajax 调用返回的 HTML 元素的 onclick 事件执行外部 Javascript 函数的最佳方法

> ID：10967714
> 
> 赞同：0
> 
> 时间：2012-06-10T09:47:25.550
> 
> 标签：php, javascript, jquery, html, ajax

索引.php：

```
<html>
    <head>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <div id="box"></div>
        <div onclick="getContent()">Open Window</div>
    </body>
</html> 
```

脚本.js：

```
function getContent() {
    //ajax call that returns the html from content.php and places it in the box div
}
function sayHello() {
    console.log('Hello');
}
function sayGoodBye() {
    console.log('Good Bye');
} 
```

内容.php：

```
<div onclick="sayHello()">Say Hello</div>
<div onclick="sayGoodBye()">Say Good Bye</div> 
```

使函数 sayHello() 和 sayGoodBye() 工作的正确方法是什么？目前他们什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:48:32.753

由于您的元素来自 ajax 并`#box`动态追加，因此您需要委托事件处理。

```
$('#box').on('click', '#newElement', function() {

}); 
```

代表的语法`.on()`是：

```
$(container).on(eventName, target, handlerFunction); 
```

要触发您需要使用

```
$('#box div').eq(0).click(); // sayHello()

$('#box div').eq(1).click(); // sayGoodBy() 
```

### 笔记

我认为它应该可以正常工作

**[看这里](http://jsfiddle.net/qWpmt/2/)**

### 它也可以触发那些点击事件

**[检查这个](http://jsfiddle.net/qWpmt/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:44:30.593

请将文件 index.php、script.js、content.php 保存在同一文件夹中。

**索引.php**

```
<html>
    <head>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <div id="box"></div>
        <div onclick="getContent()">Open Window</div>
    </body>
</html> 
```

**脚本.js**

```
function getContent() {
    //ajax call that returns the html from content.php and places it in the box div
    $.ajax({
        url: 'content.php',
        success: function(data) {
            $('#box').html(data);
        }
    });
}

function sayHello() {
    console.log('Hello');
}

function sayGoodBye() {
    console.log('Good Bye');
} 
```

**内容.php**

```
<?php

$strContent="";
$strContent.="<div onclick='sayHello()'>Say Hello</div>";
$strContent.="<div onclick='sayGoodBye()'>Say Good Bye</div>";

?> 
```

# php - 使用 Where 条件获取表行 ID ro 行号

> ID：10967715
> 
> 赞同：0
> 
> 时间：2012-06-10T09:47:31.583
> 
> 标签：php, sql

我正在尝试获取我的表的行 ID 或行号。

这是我的代码。

```
<?php

include("config.php");

$imgtable_name = "thamana_gallery";
$image_name = "37a4d8b18493d91157b5c5e097e8bd1a6.jpg";

$sql_img = "SELECT 0 INTO @rowId";
mysql_query($sql_img);
$sql_img = "SELECT @rowId := @rowId + 1 as rowid, imgname from $imgtable_name where imgname='$image_name'";
$result_img = mysql_query($sql_img);

$imp_img = mysql_fetch_array( $result_img, MYSQL_ASSOC );

echo $image_name;
echo "<br/>";
echo $imp_img['rowid'];

echo "<br/>";
echo $imp_img['imgname'];

?> 
```

我得到的结果如下：

```
++++++++++++++++++++++++++++++++++++++
37a4d8b18493d91157b5c5e097e8bd1a6.jpg
1
37a4d8b18493d91157b5c5e097e8bd1a6.jpg
++++++++++++++++++++++++++++++++++++++ 
```

图像名称位于表格的第 6 行，但结果为 1。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:30:15.920

@row 是针对从数据库中检索到的每一行计算的。如果您要检索 10 行，则将其从 1 编号到 10，如果您要检索特定行，由于您受名称限制，将只返回一行。

要将结果限制为具有特定 rowId 的行，您需要执行以下操作：

```
select * from 
  (
    select @rowId := @rowId + 1 as rowid, imgname from TABLE_NAME order by imgname
  ) a 
where 
  a.imgname=:IMG_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:17:38.757

为什么不只使用带有主索引和自动增量的 id-column？然后，您可以检索

```
SELECT id, imgname FROM ...
```

# javascript - 如何使用 nodejs 破解或破坏混淆

> ID：10967719
> 
> 赞同：-2
> 
> 时间：2012-06-10T09:48:01.790
> 
> 标签：javascript, html, firebug, obfuscation, deobfuscation

我看过一些网站，它显示其余页面的第一页源。例如，如果我们访问 xxxx.com 的第一个页面并查看其页面源，如果我们访问 xxxx.com 的第二页网页内容不同，我们会在 fire bug 等工具中看到第二页网页内容，但是当我们查看第二页网页时source 然后在第 2 页源中，我们只有第 1 页源。这称为混淆。我的问题是，是否有任何技术或机制可以仅查看第二页源代码。如果它在那里怎么可能。我们也可以对我们的网站做或采用相同的技术吗？如果是怎么回事？

我是网络域的新手。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:26:54.363

*   启动萤火虫`F12`
*   选择`Net`
*   选择`JS`
*   点击`any js file`

![在此处输入图像描述](../Images/16712d9823a887893e72f38d46676a5e.png)

然后你可以找到混淆的js，或者缩小的js。如果它被缩小使用像[jsbeautifier这样的工具](http://jsbeautifier.org/)

# iphone - 放大时 UIPanGestureRecognizer 不起作用

> ID：10967720
> 
> 赞同：1
> 
> 时间：2012-06-10T09:48:02.693
> 
> 标签：iphone, zooming, uipangesturerecognizer

放大屏幕时，uipangesturerecognizer 出现问题。

我的应用程序有一个带有 uiview 的 uiviewcontroller。

在这个视图中，我有一个几乎占整个屏幕边界一半的 calayer。

这个 calayer 有几个子层，用户可以拖动 (uipangesture)、添加 (uitapgesture) 和删除 (doubletapgesture)。为了更准确地拖动，我在 uiview 中添加了一个 uipinchgesture 方法来放大和缩小。

此时一切正常，除非我放大并尝试移动（pangesture）子图层。有时有效，但通常无效（不放大总是可以正常工作）。

我不知道我的代码是否有问题，或者可能不是这样做的方法。有什么我想念的吗？

我在sdk 4.2下。

这些是我的代码：

```
    - (id)initWithFrame:(CGRect)frame
    {
        [超级 initWithFrame:frame];
        （……）
        perfil = [[CALayer alloc] init]; //uiview的图层
        [perfil setBounds:CGRectMake(0, 0, wide, heigth/2)];
        [[自层] addSublayer:perfil];

        //当用户触摸“编辑按钮”时，我将子层添加到“危险”层，效果很好

        //UIGsture 识别器
        UITapGestureRecognizer *singleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTapFrom:)];
        UITapGestureRecognizer *doubleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTapFrom:)];
        UIPinchGestureRecognizer *pinchGestureRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinchFrom:)];
        UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanFrom:)];
        [panGestureRecognizer setMinimumNumberOfTouches:1];
        [panGestureRecognizer setMaximumNumberOfTouches:1];
        [singleTapRecognizer setNumberOfTapsRequired:1];
        [singleTapRecognizer setCancelsTouchesInView:NO];
        [doubleTapRecognizer setNumberOfTapsRequired:2];

        [self addGestureRecognizer:singleTapRecognizer];
        [self addGestureRecognizer:doubleTapRecognizer];
        [self addGestureRecognizer:pinchGestureRecognizer];
        [self addGestureRecognizer:panGestureRecognizer];

        [singleTapRecognizer 需要GestureRecognizerToFail:doubleTapRecognizer];
        singleTapRecognizer.delegate = self;
        doubleTapRecognizer.delegate = self;
        pinchGestureRecognizer.delegate = self;
        panGestureRecognizer.delegate = self;

        //这里有一些其他不同的东西
    }

```

```
    - (void) handlePanFrom: (id)sender
    {
        CGPoint 点 = [(UIPanGestureRecognizer*)sender locationInView:self];
        boxLayer = [[self perfil] hitTest:point];
        [自己成为FirstResponder]；

        if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan)
        {
            numberOfSublayer = 1000; //在 UIView.h 中声明为 int

            for (CALayer *elements in [perfil sublayers])
            {   
                if([boxLayer isEqual:elements])
                {
                    numberOfSublayer = [[perfil sublayers] indexOfObject:elements];
                    休息;
                }
            }
        }
        (…) //找到子层后的一些操作
    }

```

```
    - (void) handlePinchFrom: (id)sender
    {   
        if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded)
        {
            lastScale = 1.0;
            返回;
        }

        if ([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan ||
            [(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateChanged) {

            CGFloat currentScale = [[[sender view].layer valueForKeyPath:@"transform.scale"] floatValue];

            常量 CGFloat kMaxScale = 4.0;
            const CGFloat kMinScale = 1.0;

            CGFloat newScale = 1 - (lastScale - [(UIPinchGestureRecognizer*)sender scale]);
            newScale = MIN(newScale, kMaxScale / currentScale);   
            newScale = MAX(newScale, kMinScale / currentScale);
            CGAffineTransform transform = CGAffineTransformScale([[sender view] transform], newScale, newScale);
            [发送者视图].transform = transform;

            if ([perfil 子层])
            {
                for (CALayer *elements in [perfil sublayers]) //这里我尝试调整缩放到子层
                {
                    //这是第一种方法
                    //CGAffineTransform transformELS = CGAffineTransformScale([元素 affineTransform], 7/(newScale+6), 7/(newScale+6));
                    //[元素setAffineTransform:transformELS];

                    //这里是第二种方法
                    [元素设置边界：CGRectMake(0, 0, elements.bounds.size.width*7/(newScale+6), elements.bounds.size.height*7/(newScale+6))];
                }           
            }

            lastScale = [(UIPinchGestureRecognizer*)sender scale];
            (...) //这里有一些其他不同的东西
    }

```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:01:26.817

终于我找到了我的问题的答案。这篇文章解释了完全相同的问题，它的解决方案对我来说非常有效 [UIPanGestureRecognizer 起点是 off](https://stackoverflow.com/questions/2861400/uipangesturerecognizer-starting-point-is-off)。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:47:38.277

如果没有看到子层 hittest 代码，真的很难说，但是当您重新缩放父视图/层时，您正在重新缩放子层似乎真的很奇怪。

您应该只需要缩放父层，所有子层将依次缩放。

所有这些手动生成的捏和平移代码都充满了危险。可以做到，但我发现你最后吃的是意大利面。

将您的视图放在 UIScrollView 中，让它完成视图的捏合和平移工作`perfil`。

有十亿个 UIScrollView 平移和缩放示例。如果您还不知道，谷歌和 SO 会知道。

我希望在父视图的 touchBegan 事件中捕获子层的平移。

这就是我用来在子层中捕获命中的方法

```
- (CALayer *)hitTest:(CGPoint)thepoint
{
    //
    CGPoint cpoint = [self convertPoint:thepoint fromLayer:self.superlayer];

    if (CGRectContainsPoint([self bounds], cpoint)) {
        NSLog(@"hitme!");
        return self;
    }

    return nil;

} 
```

这在父视图的 touchesBegan/touchesMoved 中。（保持对滚动视图的弱引用）

```
// Handles the start of a touch
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    NSUInteger tcount = [touches count];
    if(tcount == 1)
    {

    UITouch* touch = [touches anyObject];
    CGPoint tpoint = [touch locationInView:self];
    location = [perfil convertPoint:tpoint fromLayer:view.layer];

    hitsublayer = [self hitTest:location];       
    if([hitsublayer isKindOfClass:[MySubBoxThing class]]){
        //ensure that scroll view doesn't capture the event  
        scrollview.canCancelContentTouches = NO;
    }
    else {
        hitsublayer = nil;
        //or something else to do wit not touching a sublayer.
    }

}

// Handles the continuation of a touch.
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{   
    NSUInteger tcount = [touches count];
    if (tcount == 1 && hitsublayer) {

    UITouch* touch = [touches anyObject];
    CGPoint tlocation = [touch locationInView:self];
    location = [perfil convertPoint:tpoint fromLayer:view.layer];        

    NSLog(@"new loc = %@",[NSValue valueWithCGPoint:location]);
    hitsublayer.position = location;            

    }       

}

// Handles the end of a touch event when the touch is a tap.
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    //NSLog(@"touches ended");
    scrollview.canCancelContentTouches = YES;
    hitsublayer = nil;
    //any other actions once finished drag of object

} 
```

该代码既不完整也不检查错误，但应该让你接近。

# mysql - WordPress：如何将帖子从类别 ID 大规模迁移到分类术语？

> ID：10967721
> 
> 赞同：0
> 
> 时间：2012-06-10T09:48:07.787
> 
> 标签：mysql, wordpress

（wordpress 纽比）

我很高兴从基于类别的主题切换到基于分类的主题。我有大量分类帖子，我想对新的分类方案进行大规模转换。

如何将属于给定类别（比如说第 123 类）的所有帖子大规模迁移到给定的分类术语（比如说“饮食”分类中的“民族餐厅”）？

可能是通过 MySQL 命令？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:32:56.560

表 wp_term_relationships (object_id,term_taxonomy_id) 将帖子与类别联系起来，找到旧类别和新类别的 term_taxonomy_id 并编写一个更新 sql 将帖子从一个移动到另一个。

# app-store-connect - 更改 iTunes Connect 中应用列表的默认语言

> ID：10967722
> 
> 赞同：40
> 
> 时间：2012-06-10T09:48:10.320
> 
> 标签：app-store-connect

我的开发人员在 iTunes Connect 中为我添加了一个新应用，但默认语言是“英国英语”。我现在还添加了通用的“英语”。

我现在想删除“英国英语”，但我不能，因为它是默认设置。我只能删除通用英语。**如何更改默认语言？**

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-09-29T14:12:36.353

根据[App Store Docs](https://help.apple.com/app-store-connect/#/deve6f78a8e2?sub=devb34f436a9)：

1.  打开**[Appstore Connect](https://appstoreconnect.apple.com/)**并登录您的帐户
2.  打开`My Apps`
3.  选择您要编辑其**主要语言的应用程序**
4.  选择您拥有的最新版本（必须是`Prepare for Submission`或`Waiting for Review`）
5.  添加第二种语言（您想成为主要语言的语言）

[![在此处输入图像描述](../Images/13c8adb03245b3b181726be92037e240.png)](https://i.stack.imgur.com/zr09n.jpg)

6.  选择新语言
7.  在屏幕截图中**取消选中** `Use English (U.S.)`每个设备屏幕截图
8.  点击`Save`

> 如果您的应用程序已经**在应用商店上架，**您需要上传您的屏幕截图并填写此语言的所有字段并提交此版本**以供审核，然后****在批准**此版本后完成下一次更新的后续步骤

9.  现在您可以设置主要语言`App information --> Primary language`

[![在此处输入图像描述](../Images/17c23392ed2359a46c4d06a2494e4e77.png)](https://i.stack.imgur.com/lBfTk.jpg)

10.  点击`Save`
11.  现在您可以从添加第二种语言的同一选项中删除不需要的语言

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-10T12:03:27.840

***编辑：自 2014 年 9 月以来，由于 iTunes Connect 界面已更改，此答案已过时***

我发现毕竟有一种方法可以更改默认语言：

1.  在 iTunes Connect 中，转到**管理您的应用程序**
2.  点击相关应用
3.  单击标题“应用程序信息”中的**编辑链接**
4.  下拉菜单**默认语言**包含已添加的所有语言。选择任何一个（我选择了问题中提到的通用“英语”），然后保存。
5.  单击第二部分中的“**查看详细信息”按钮。**
6.  通用“英语”现在是默认设置。在**选择另一种语言中：**选择“英国英语”。
7.  在标题**元数据和上传**现在有一个**删除**按钮。

而已！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-13T11:50:28.057

在 2015 年 9 月 iTunes Connect 更新之后，事情发生了一些变化，所以正确的步骤（截至今天）是：

1.  在 App Store → 应用信息 → 可本地化信息中添加所需语言
2.  点击保存
3.  现在主要语言部分已成为一个下拉菜单，您可以从中选择所需的语言

顺便说一句，文档已更新，因此您可以[在此处](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/DisplayInMoreLanguages.html#//apple_ref/doc/uid/TP40011225-CH28-SW7)找到相关信息。

希望这可以帮助。

# android - 如何在阅读 RawContacts 时排除 GooglePlus 联系人

> ID：10967723
> 
> 赞同：2
> 
> 时间：2012-06-10T09:48:27.723
> 
> 标签：android, contacts, google-account

我正在像这样从 Android 中的 Google 帐户读取 RawContacts。

```
final Cursor cursor = cr.query(
    ContactsContract.RawContacts.CONTENT_URI, null,
    RawContacts.ACCOUNT_TYPE + " = ?",
    new String[] { "com.google" }, "display_name");
Log.i(TAG, "Start RawContact table");
for (int i = 0; i < cursor.getColumnCount(); i++) {
    Log.d(TAG, i + " : " + cursor.getColumnName(i) + " : "
            + cursor.getString(i) + "\n");
}
Log.i(TAG, "End RawContact table"); 
```

然而，谷歌加联系人也被卷入其中。

```
06-10 15:05:11.139: D/Merger(20004): 13 : account_type : com.google
06-10 15:05:11.139: D/Merger(20004): 14 : account_type_and_data_set : com.google/plus 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:03:44.177

答案很简单。我只是没看到。希望这可以帮助某人。

```
 Cursor cursor = cr.query(
            ContactsContract.RawContacts.CONTENT_URI, null,
            RawContacts.ACCOUNT_TYPE + " IS ? AND "+ RawContacts.DATA_SET+" IS NULL",
            new String[] { "com.google", }, "display_name"); 
```

# android - 如何在android中拥有全局菜单？

> ID：10967732
> 
> 赞同：2
> 
> 时间：2012-06-10T09:49:42.927
> 
> 标签：android, android-layout, android-activity

我是一个android新手，如果这是一个愚蠢的问题，请原谅我。
我试图有一些位于屏幕顶部的菜单，我希望它出现在我的应用程序中的每一个活动中。
现在我的问题是如何才能实现这个目标？我应该创建一个 XML 并在每个地方都包含它，还是应该有一个基本活动并在其中托管我的其他活动？

**更新：**看下面的截图，我想要完全一样的。如果您注意到您会看到 2 组按钮，一组在顶部，另一组在底部。中间屏幕是可滚动的。 ![应用截图](../Images/27d2e72ebea871fcf3f4e7ab4b7f9d85.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T09:52:35.213

在`Android`诸如顶级菜单之类的东西中不存在。引用自[CommonsWare](https://stackoverflow.com/users/115145/commonsware)

> Android 中没有“顶部栏菜单”，假设您指的是 Windows 窗口或 OS X 屏幕顶部的栏。欢迎您创建自己的东西，但没有内置平台支持这样的概念。
> 
> 花一些时间使用现有的 Android 应用程序，您会发现很少（如果有的话）实现“顶部固定可见菜单”。如果你找到了，请发布一些实际操作的屏幕截图，也许我们可以就如何实现它提出一些建议。

所以更新后你需要了解一些关于实现actionBar的信息。所以看看这些链接

[actionbarsherlock](http://actionbarsherlock.com/) , [johannilsson / android-actionbar](https://github.com/johannilsson/android-actionbar) , [cyrilmottier / GreenDroid](https://github.com/cyrilmottier/GreenDroid)

对于添加`Buttons`到底部，您应该使用`<RelativeLayout>`, 添加边距`Buttons`

底部的按钮你可以设置类似这样

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#3B3B3B"
    >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="10dp"
        android:gravity="center_horizontal"
        android:layout_alignParentBottom="true"
        >

        <Button 
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second"
            />

        <Button 
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second"
            />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="67dp"
        android:gravity="center_horizontal"
        android:orientation="horizontal"
        android:padding="10dp" >

        <Button
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second" />

        <Button
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second" />
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:33:03.717

我通常将底部和顶部工具栏创建为单独的布局 xml 文件，并将它们包含在我需要的活动中。我还创建了一个可以处理两个工具栏的基本活动。如果可用，您可以以编程方式将顶部工具栏放到操作栏上。

# indexing - RavenDb 索引，拆分字段，未命中拆分中的第一项

> ID：10967735
> 
> 赞同：1
> 
> 时间：2012-06-10T09:50:26.513
> 
> 标签：indexing, ravendb

我正在尝试创建和索引，以便可以搜索文档中的多个字段（[这就是我想要做的](http://ayende.com/blog/152833/orders-search-in-ravendb)）。我创建了这个测试类来说明我想要做什么。我的问题是，在索引中我拆分了`Note`字段，以便搜索中的任何单词`Note`。但是我注意到，如果我用第一个单词或字母进行搜索，在测试中将是“A”我没有得到任何命中，但如果我用“B”搜索得到命中，想不出为什么会这样。

```
public class Sandbox
{
    [Fact]
    public void Run_Forrest_Run()
    {
        var store = new EmbeddableDocumentStore
        {
            RunInMemory = true, 
            Conventions = { DefaultQueryingConsistency = ConsistencyOptions.QueryYourWrites }
        };

        store.Initialize();
        IndexCreation.CreateIndexes(typeof(SearchExpenseIndex).Assembly, store);

        using (store)
        {
            using (var session = store.OpenSession())
            {
                session.Store(new Expense
                {
                    Date = DateTime.Today,
                    Category = "Transport",
                    Amount = 1000,
                    Note = "A B C"
                });

                session.SaveChanges();
            }

            Thread.Sleep(1000);

            // var terms = new[] {"A"}; <-- THIS WILL FAIL
            var terms = new[] {"B"};

            using (var session = store.OpenSession())
            {
                var result = session.Query<SearchExpenseIndex.ReduceResult, SearchExpenseIndex>()
                                .Where(x => x.Query.In(terms))
                                .As<Expense>()
                                .Select(x => new 
                                {
                                    Id = x.Id,
                                    Category = x.Category,
                                    Date = x.Date,
                                    Amount = x.Amount,
                                    Note = x.Note
                                }).ToList();

                Assert.Equal(1, result.Count);

            }
        }
    }

    public class Expense
    {
        public string Id { get; set; }
        public DateTime Date { get; set; }
        public string Category { get; set; }
        public decimal Amount { get; set; }
        public string Note { get; set; }
    }

    public class SearchExpenseIndex : AbstractIndexCreationTask<Expense, SearchExpenseIndex.ReduceResult>
    {
        public class ReduceResult
    {
        public string Query { get; set; }
        public string UserId { get; set; }
    }

        public SearchExpenseIndex()
    {
        Map = documents => from d in documents
            select new
            {
                Query = new object[]
                {
                    d.Category,
                    d.Note,
                    d.Note.Split(' '),
                    d.Date.ToString("yyyy-MM-dd")
                }
            };
        }
    }
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:14:46.587

Pelle，字符“A”是英语中的停用词。因此，您无法真正搜索它，因为几乎任何搜索词都会在那里找到它。

# javascript - 如何使用 Moment.js？

> ID：10967736
> 
> 赞同：24
> 
> 时间：2012-06-10T09:51:10.213
> 
> 标签：javascript, jquery, relative-date, momentjs

我无法遵循[Moment.js 文档](http://momentjs.com/docs/)，需要一些帮助来设置它。我已经`moment.min.js`在我的网页上正确引用了该文件，如下所示：

```
<script src="/js/moment.min.js"></script> 
```

来到我网页的 HTML 部分，我在同一页面上有两个不同的日期时间：

**发布日期**

```
<time class="pubdate" datetime="2012-06-09T12:32:10-04:00" pubdate>
    June 09, 2012
</time> 
```

**最后修改日期**

```
<time class="updated" itemprop="dateModified" datetime="2012-06-09T12:32:10-04:00">
    June 9, 2012 ~ 12:32
</time> 
```

**重要的！**相对日期解析不应超出“昨天”。至于除此之外的所有内容，`<time>`标签应该显示没有 JavaScript 时它们会显示的确切日期时间——即 Moment.js 不应触及或解析“昨天”之后的日期。

现在，为了使库完成上述工作，我需要在库引用之后调用一个函数。那么问题来了，函数应该是什么？（使用 jQuery 很好，因为我已经在我的网页上引用了该库。）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-10T11:02:38.017

请说明您的问题。我假设你想要一个相对日期解析，最大值应该是“昨天”。

我从未使用过 moment.js，但就文档而言，它非常简单。

用作`var now = moment();`您的当前日期。然后解析`time`你的 DOM 中的每个 -Tag`var time = moment($(e).attr('datetime'));`

要检查差异，请使用以下`diff()`方法：

```
if(now.diff(time, 'days') <= 1) {
    // getting the relative output
} 
```

用于`var ago = now.from(time)`获取相对输出并用`ago`变量替换 DOM 中的时间。

**根据评论更新**：

好的，未经测试，但这是基本思想：

**更新了代码。**

```
var now = moment();

$('time').each(function(i, e) {
    var time = moment($(e).attr('datetime'));

    if(now.diff(time, 'days') <= 1) {
        $(e).html('<span>' + time.from(now) + '</span>');
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T15:11:41.037

您还可以使用该[`moment().calendar()`](http://momentjs.com/docs/#/displaying/calendar-time/)功能，它将为您格式化接近今天的日期（从今天起最多一周）：

```
$('time').each(function(i, e) {
  var time = moment($(e).attr('datetime'));

  $(e).html('<span>' + time.calendar() + '</span>');
});​ 
```

您可以使用以下代码自定义格式字符串：

```
moment.calendar = {
  lastDay : '[Yesterday at] LT',
  sameDay : '[Today at] LT',
  nextDay : '[Tomorrow at] LT',
  lastWeek : '[last] dddd [at] LT',
  nextWeek : 'dddd [at] LT',
  sameElse : 'L'
}; 
```

如果您对昨天之前的日期格式不感兴趣，只需将`lastWeek`和的格式更改`nextWeek`为完整的日期时间格式（例如`'L'`）。

* * *

**更新 2013-09-06**显然它有一个新的语法，也可以让你本地化它：

```
moment.lang('en', {
  calendar: {
    lastDay : '[Yesterday at] LT',
    sameDay : '[Today at] LT',
    nextDay : '[Tomorrow at] LT',
    lastWeek : '[last] dddd [at] LT',
    nextWeek : 'dddd [at] LT',
    sameElse : 'L'
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T12:34:58.480

感谢@JohannesKlauß 提供代码。这基本上是我执行他的答案的方式以及我在我的网站上引用代码的方式。

```
<script src="/js/moment.min.js"></script>
<script src="/js/moment.executor.js"></script> 
```

其中，**moment.min.js**是 Moment.js 库，而**moment.executor.js**具有以下代码（由 Johannes 提供）：

```
jQuery(document).ready(function($){

    var now = moment();

    $('time').each(function(i, e) {
        var time = moment($(e).attr('datetime'));

        if(now.diff(time, 'days') <= 1) {
            $(e).html('<span>' + time.from(now) + '</span>');
        }
    });

}); 
```

***PS：**您实际上可以编辑**moment.min.js**并在最后添加上述代码。这样，您将节省一个额外的 HTTP 请求。:P*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-04T02:17:45.713

扩展上面@its_me 的实现，这里有一个版本

*   更新给定类的所有元素
*   让他们每分钟更新一次（所以“1分钟前”变成“2分钟前”）
*   从现在起 +-1 天时切换到不同的格式（例如，上周二晚上 11:45）

这是一个供您使用的[JSFiddle](http://jsfiddle.net/385gz/5/)。

您的 HTML：

```
<time class="cw-relative-date" datetime="2014-06-09T12:32:10-00:00"></time> 
```

JS 包括：

```
(function () {

// Define a function that updates all relative dates defined by <time class='cw-relative-date'>
var updateAllRelativeDates = function() {
        $('time').each(function (i, e) {
            if ($(e).attr("class") == 'cw-relative-date') {

                // Initialise momentjs
                var now = moment();
                moment.lang('en', {
                    calendar : {
                        lastDay : '[Yesterday at] LT',
                        sameDay : '[Today at] LT',
                        nextDay : '[Tomorrow at] LT',
                        lastWeek : '[Last] dddd [at] LT',
                        nextWeek : 'dddd [at] LT',
                        sameElse : 'D MMM YYYY [at] LT'
                    }
                });

                // Grab the datetime for the element and compare to now                    
                var time = moment($(e).attr('datetime'));
                var diff = now.diff(time, 'days');

                // If less than one day ago/away use relative, else use calendar display
                if (diff <= 1 && diff >= -1) {
                    $(e).html('<span>' + time.from(now) + '</span>');
                } else {
                    $(e).html('<span>' + time.calendar() + '</span>');
                }
            }
        });
    };

// Update all dates initially
updateAllRelativeDates();

// Register the timer to call it again every minute
setInterval(updateAllRelativeDates, 60000);

})(); 
```

# sql - SQL 逻辑读取

> ID：10967737
> 
> 赞同：0
> 
> 时间：2012-06-10T09:51:23.513
> 
> 标签：sql, sql-server-2008, logical-reads

我有一个运行很多的查询，因为它位于一个为大行集调用的函数中。

查询是`SELECT @sql = NULL WHERE @sql = ''`

即使这向我显示了 0 次物理读取。

它向我展示了大约 17000 个逻辑读取。

有什么解释吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T09:59:56.530

请看以下问答：

[https://dba.stackexchange.com/questions/9302/why-so-many-logical-reads](https://dba.stackexchange.com/questions/9302/why-so-many-logical-reads)

> 请注意，这些是页面读取。这是相关的。
> 
> 可能性：
> 
> *   索引不当或不足。是否有任何过滤字段被编入索引？索引有多宽（见下文）？
> *   页面密度差。您可能拥有的任何索引的填充因子是多少？如果它太低，你会为此拉很多页面。
> *   非常广泛的索引。如果您有索引但它们有很多字段或非常宽的字段，那么每页的行数就会减少。
> 
> 我猜您至少针对这些条件中的一个进行了表或聚集索引扫描，并且该表很宽，无论您实际需要多少数据，都会导致读取大量数据。

# jquery - 在 jQuery 1.7.2 中 on("click") 和 on("click.randomText") 有什么区别？

> ID：10967738
> 
> 赞同：3
> 
> 时间：2012-06-10T09:51:44.487
> 
> 标签：jquery, namespaces, jquery-on

我继承了一个使用 jQuery 1.7.2 的应用程序。

在整个应用程序中，我们有如下代码：

```
$('#quotation').off("click").on("click", function(){
     // do something here...
} 
```

现在，我明白了以上没有问题。然而，偶尔在我们的代码中我会遇到这样的事情：

```
$('#continue').off("click.products").on("click.products", function(){
     // do something here...
} 
```

在整个应用程序中，我发现`click.products`或`click.orders`。看起来后面的内容`.`可以是完全随机的文本。

`click`和 和有什么不一样`click.products`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T09:54:04.123

此代码使用他们自己或插件定义的自定义命名空间事件。

> 事件名称可由事件命名空间限定，以简化移除或触发事件。例如，“click.myPlugin.simple”为这个特定的点击事件定义了 myPlugin 和 simple 命名空间。通过该字符串附加的单击事件处理程序可以使用 .off("click.myPlugin") 或 .off("click.simple") 删除，而不会干扰附加到元素的其他单击处理程序。命名空间类似于 CSS 类，因为它们不是分层的；只有一个名字需要匹配。以下划线开头的命名空间保留给 jQuery 使用。

[**`on`文档**](http://api.jquery.com/on/)

[**现场演示**](http://jsfiddle.net/sWD6v/)：

```
$('#a').on('click.bar', function() {
    console.log('bar');
});

$('#a').on('click.foo', function() {
    console.log('foo');
});

$('#b').click(function() {
    $('#a').trigger('click.foo');
});​ 
```

现在，当单击`#a`两个单击处理程序（foo 和 bar）时，将引发，
但是当单击时，`#b`只有 foo 会引发。

# php - jquery ajax，发送几行相同id的信息

> ID：10967739
> 
> 赞同：0
> 
> 时间：2012-06-10T09:52:16.780
> 
> 标签：php, forms, jquery

我在表单中有一个 html 表。

该表充满了来自我的数据库的信息。这是表格的样子：

```
<table>
<tr> 
<td >Number</td>
<td >Name</td>
<td >Last Name</td>
</tr> 
<tr> 
<td> <input type="hidden" id="number" value="1">1</td>
<td> <input type="hidden" id="name" value="John">John</td>
<td> <input type="hidden" id="last" value="Snow">Snow</td>
</tr> 
<tr> 
<td> <input type="hidden" id="number" value="2">2</td>
<td> <input type="hidden" id="name" value="Jean">Jean</td>
<td> <input type="hidden" id="last" value="Dow">Dow</td>
</tr> 
.
.
</table> 
```

表的行数取决于数据库抛出的行数。

如果信息正确，用户将点击表单的提交按钮。

提交按钮会将其带到 js 文件中的函数。从那里，我需要获取表的值并将它们发送到一个 php 文件。

为此，在函数内部，在我正在执行的 js 文件中：

```
var sNumber = $("# number ").val();
 var sName = $("#name").val();
  var sLast = $("#last").val();
   params = '';
    params += '&number='+sNumber;
    params += '&name='+sName;   
    params += '&last='+sLast;   
     theUrl = 'controller.php';
   $.ajax ({
        url: theUrl,
        data: params,
        async:false,
        success: function (data, textStatus)
        {              
        }
    }); 
```

但由于表中行的 id 相同，我只得到第一行的信息。

任何人都可以帮我将表格的所有信息发送到 php 文件吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:57:35.730

an`id`在页面上必须是唯一的。使用`class`而不是`id`

当您的页面中没有更多的双 id 时，请查看[jQuery each()](http://api.jquery.com/jQuery.each/)功能以在您的 ajax 调用中获取所有必需的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:01:44.793

使用类并做为：

```
var listName = [];
$(".name").each(function(){
    listNames.push($(this).val());
    alert($(this).val());
})​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:07:02.757

`id`元素上的属性必须是唯一的。使用一个类。使用 jQuery 查看与类匹配的集合。

您可以在 GET 和 POST 中多次发送相同的变量。

```
params = '';
$(".name").each(function(){
  var sName = $(this).val();
  params += '&name='+sName;   
});
//similar for number and last

theUrl = 'controller.php';
$.ajax ({
        url: theUrl,
        data: params,
        async:false,
        success: function (data, textStatus)
        {              
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T10:08:17.767

ID 永远不应该相同。每个 ID 应该只有 1 个给定项目的项目。也就是说，如果你想拥有具有相似特性的项目，你应该使用类。也就是说，您可能还希望包含 name 属性。

如果您真的想使用 Id，则应将其标记为

```
<table id="users">
<tr> 
<td >Number</td>
<td >Name</td>
<td >Last Name</td>
</tr> 
<tr class="someclass"> 
<td> <input type="hidden" name="number" id="number-1" value="1">1</td>
<td> <input type="hidden" name="name" id="name-1" value="John">John</td>
<td> <input type="hidden" name="last" id="last-1" value="Snow">Snow</td>
</tr> 
<tr class="someclass"> 
<td> <input type="hidden" name="number" id="number-2" value="2">2</td>
<td> <input type="hidden" name="name" id="name-2" value="Jean">Jean</td>
<td> <input type="hidden" name="last" id="last-2" value="Dow">Dow</td>
</tr> 
.
.
</table> 
```

和 javascript 应该像

```
//get the table and iterate over every row
$('table').find('.someclass').each(function(){
  //get each inputs name and value
  var somevar = $(this)
  var number = somevar.find('[name=number]').val()
  var name = somevar.find('[name=name]').val()
  var last = somevar.find('[name=last]').val()
  //Do something with these
}); 
```

您可以做的其他一些事情就是简单地使用[jQuery.post()](http://api.jquery.com/jQuery.post/)。所以在提交时你会做

```
//serialze the form and submit it. 
$.post("controller.php", $('form').serialize(),
   function(data) {
     //handle the response
     alert("Data Loaded: " + data);
   }
); 
```

为此，您需要使用`number[]`、`name[]`和`last[]`作为输入名称，以便将它们存储为数组。

# java - 如何从 Derby 数据库中获取在最后 30 秒内插入的条目？

> ID：10967745
> 
> 赞同：1
> 
> 时间：2012-06-10T09:52:55.610
> 
> 标签：java, database, eclipse, derby

我是 Derby 的新手（基本上是一般的数据库），我正在尝试通过 Eclipse 使用 Java 来了解 Derby。

我想要做的是从报告生成后的最后 30 秒内生成当前在 Derby 数据库中的所有条目的报告。

我设法通过以下方式在 MySQL 中得到了我想要的东西：

> SELECT * FROM table WHERE datetime > (now() - 间隔 30 秒)

Derby 中是否有等效或类似的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:01:26.973

不幸的是，Derby 不支持标准 (ANSI) SQL 日期算术。您需要使用 JDBC 转义函数：

```
c:\db-derby-10.8.2.2\bin>ij
ij version 10.8
ij> connect 'jdbc:derby:c:/temp/sotest';
ij> create table foo (datetime timestamp);
0 rows inserted/updated/deleted
ij> insert into foo values (current_timestamp);
1 row inserted/updated/deleted
ij> commit;
ij> select *
from foo
where datetime > {fn timestampadd(SQL_TSI_DAY, -10, current_timestamp)};
> > DATETIME
-----------------------------
2012-06-10 12:32:48.859

1 row selected
ij> 
```

有关函数的完整列表，请参阅参考手册：[http ://db.apache.org/derby/docs/10.8/ref/rrefjdbc88908.html](http://db.apache.org/derby/docs/10.8/ref/rrefjdbc88908.html)

# jquery - 如何使用 jQuery 生成行跨度？

> ID：10967748
> 
> 赞同：1
> 
> 时间：2012-06-10T09:53:33.503
> 
> 标签：jquery, html-table

我想在每个表中的每个第一个 td 之后插入一个行跨度，但我不能。

我开始搜索并制作了这段代码。它不起作用，但可能会告诉更多关于我需要的东西。

```
$("table").each(function(){
    var rowcount = $("tr").length;
    var insert = ('<td rowspan="' + rowcount + '" class="table-rowspan">&nbsp;</td>')
    $("table td:first").after(insert);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:29:27.457

嗨，请尝试这个**演示** [http://jsfiddle.net/kAzfQ/](http://jsfiddle.net/kAzfQ/) **更新演示** [http://jsfiddle.net/kAzfQ/3/](http://jsfiddle.net/kAzfQ/3/)

`fooo`解决方案将在每个第一个 td 第一行之后添加列。演示包括 2 个表格。

如果我遗漏任何东西，请告诉我，

希望这可以帮助，

**注意**您可以添加行数，我已经为这个演示排除了它。向您展示`td`第一行第一个 td 之后的追加。B-)

**代码**

```
$('table').each(function() {

    var rowcount = $("tr").length;

    $(this).find('td').eq(0).after('<td rowspan=rowcount class="table-rowspan">==>fooo <== </td>');

});​ 
```

# android - 在片段中加载原生活动

> ID：10967749
> 
> 赞同：0
> 
> 时间：2012-06-10T09:53:46.153
> 
> 标签：android, android-fragments

我希望将本机活动（如联系人或短信）加载到我的活动片段中。是否有可能，如果可以，任何人都可以粘贴代码或任何链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:06:04.380

> 可能吗

不可以。您不能将其他应用程序的活动嵌入到您自己的活动中。

# mongodb - MongoDB 限制集合和单调递增索引

> ID：10967752
> 
> 赞同：3
> 
> 时间：2012-06-10T09:54:14.817
> 
> 标签：mongodb

在 MongoDB 上限集合中，我是否可以保证该`_id`字段随插入顺序单调增加？如果没有，我如何查询在给定文档之后插入的所有文档？应该不需要索引，因为我应该能够利用它们的自然顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T09:59:08.400

ObjectId 的一部分是时间戳。所以，如果 ObjectIds 总是在同一台机器上生成（或者时间是一致的），那么你可以保证单调递增的值。不过需要注意的是：时间戳以秒为单位，而不是毫秒。因此，不能保证在相同的二阶值内。

封顶集合支持一个特殊的排序选项：[`$natural`](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order). 这意味着文档将按插入顺序返回。

您可以将其与可[尾游标](http://www.mongodb.org/display/DOCS/Tailable+Cursors)结合使用，以在不使用任何索引的情况下不断获取新插入的文档（如果这是您所追求的）。

# url - 我可以发送 # 作为 URL 的一部分吗？

> ID：10967757
> 
> 赞同：0
> 
> 时间：2012-06-10T09:55:14.553
> 
> 标签：url, character-encoding

我正在通过 WEB 服务器发送命令。命令的 URL 格式中包含“&text=mycommand”。示例 *myurl* &text=AT#123 问题是我的命令中必须有 #。这是接收设备理解的协议。有没有办法实现它？# 之后的部分被剪切了，我猜是因为它被视为节标识符。谢谢。基里尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:03:25.237

尝试替换`#`为`%23`.

有关更多信息，请参阅[此列表](http://www.december.com/html/spec/esccodes.html)。

# iphone - iPhone自定义电话联系人的电话响铃方式

> ID：10967761
> 
> 赞同：0
> 
> 时间：2012-06-10T09:56:24.750
> 
> 标签：iphone, ios, ios5

我们有这样的需求。首先，这不是 AppStore 应用程序，而是通过企业许可证分发的公司特定应用程序。要求如下。

使用可以将手机置于静音模式。（通过标准方式）。这样用户在接到某人的电话时就听不到任何声音。但是我们必须能够为一些联系人定制这个（通过我们的应用程序），即使手机处于静音模式，他也可以听到来电铃声。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:16:16.057

不可能，至少没有记录，您需要搜索未记录的api源一些来源是

*   [https://github.com/nst/iOS-Runtime-Headers](https://github.com/nst/iOS-Runtime-Headers)
*   [http://code.google.com/p/networkpx/wiki/class_dump_z](http://code.google.com/p/networkpx/wiki/class_dump_z)
*   [https://github.com/kennytm/iphone-private-frameworks](https://github.com/kennytm/iphone-private-frameworks)
*   [http://www.cocoanetics.com/2009/11/forbidden-fruit-apple-apis/](http://www.cocoanetics.com/2009/11/forbidden-fruit-apple-apis/)

也许这不是您正在寻找的答案，但在这些来源中搜索可能会对您有所帮助

# anchor - Google Apps 脚本，单击时创建重定向的锚点

> ID：10967766
> 
> 赞同：0
> 
> 时间：2012-06-10T09:57:03.803
> 
> 标签：anchor, google-apps-script

我正在创建一个将用户登录到站点的脚本。一切正常，但由于某种原因，当用户单击链接以转到他们的个人资料时，链接会在新窗口中打开，并首先重定向，然后再转到正确的页面。

例如：

正确的链接是：[https](https://sites.google.com/site/examplelehan/Jan_Moolman) ://sites.google.com/site/examplelehan/Jan_Moolman但点击链接的那一刻，地址栏中实际执行的链接更改为：[http ://www.google.com/ url?q=https%3A%2F%2Fsites.google.com%2Fsite%2Fexamplelehan%2FJan_Moolman&sa=D&usd=2&usg=AFQjCNFXLLswDh2AWCBpYi54jNXxpZVGPQ](http://www.google.com/url?q=https%3A%2F%2Fsites.google.com%2Fsite%2Fexamplelehan%2FJan_Moolman&sa=D&usd=2&usg=AFQjCNFXLLswDh2AWCBpYi54jNXxpZVGPQ)

所以看起来好像 www.google.co.za 被预先添加到 url。我也看过其他帖子，但似乎都没有提供有效的解决方案。一些帖子说，当链接创建时没有 http:// 前缀时会发生这种情况，但我已经测试过，并且发生了同样的问题。

我也尝试使用 .createHTML 来创建链接，但由于某种原因链接没有显示，我使用的任何其他 HTML 似乎都可以工作，所以我想这就是谷歌创建 Anchor 函数的原因。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:43:33.267

在[此问题跟踪器评论](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1376)中， Eric [Koleda](https://stackoverflow.com/users/702875/eric-koleda)建议了使用[UrlShortener Services](https://developers.google.com/apps-script/service_urlshortener)的解决方法。我用[你的链接](http://goo.gl/HRPfU) [（http://goo.gl/HRPfU）](http://goo.gl/HRPfU)对其进行了测试，它似乎是一个可行的解决方案。

编辑：回答您的评论，这是一个工作示例：

```
function test(){
var shorturl=short('https://sites.google.com/site/examplelehan/Jan_Moolman');
Logger.log(shorturl);
}
//
function short(longurl){
  var toShorten = UrlShortener.newUrl().setLongUrl(longurl);
  var short = UrlShortener.Url.insert(toShorten).getId();
  return short
  } 
```

请注意，必须先激活此 API，然后才能使用它[（请参阅文档）](https://developers.google.com/apps-script/service_urlshortener)

# php - 使用 PHP 显示 JSON 数据

> ID：10967770
> 
> 赞同：6
> 
> 时间：2012-06-10T09:57:41.680
> 
> 标签：php, json

我有以下数组

```
"forecast":{
    "txt_forecast": {
    "date":"11:00 PM EDT",
    "forecastday": [
    {
    "period":0,
    "icon":"partlycloudy",
    "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
    "title":"Saturday",
    "fcttext":"Partly cloudy in the morning, then mostly cloudy. High of 88F. Winds from the South at 5 to 10 mph.",
    "fcttext_metric":"Partly cloudy in the morning, then mostly cloudy. High of 31C. Winds from the South at 10 to 15 km/h.",
    "pop":"0"
    }
    ,
    {
    "period":1,
    "icon":"partlycloudy",
    "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
    "title":"Saturday Night",
    "fcttext":"Overcast in the evening, then partly cloudy. Low of 64F. Winds less than 5 mph.",
    "fcttext_metric":"Overcast in the evening, then partly cloudy. Low of 18C. Winds less than 5 km/h.",
    "pop":"10"
    } 
```

我将如何在 PHP 中显示信息？它一直持续到第 7 期。

编辑：这是我编辑的代码不起作用。

```
<?php
$json_string =    file_get_contents("http://api.wunderground.com/api/7ec5f6510a4656df/geolookup/forecast/q/40121.json");
$parsed_json = json_decode($json_string);
$temp = $parsed_json->{'forecast'}->{'txt_forecast'}->{'date'};
$title = $parsed_json->{'forecast'}->{'txt_forecast'}->{'forecastday'}->{'title'};
$for = $parsed_json->{'forecast'}->{'txt_forecast'}->{'forecastday'}->{'fcttext'};
echo "Current date is ${temp},  ${title}: ${for}\n";

foreach($parsed_json['forecast']['forecastday[0]'] as $key => $value)
{
   echo $value['period'];
   echo $value['icon'];
   // etc
}
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T09:58:47.833

# 更新

```
$json_string =    file_get_contents("http://api.wunderground.com/api/7ec5f6510a4656df/geolookup/forecast/q/40121.json");
$parsed_json = json_decode($json_string, true);
$parsed_json = $parsed_json['forecast']['txt_forecast']['forecastday'];
//pr($parsed_json);

foreach($parsed_json as $key => $value)
{
   echo $value['period'] . '<br>';
   echo $value['icon'] . '<br>';
   // etc
} 
```

**结果：**

```
0
chancetstorms
1
tstorms
2
tstorms
3
tstorms
4
tstorms
5
partlycloudy
6
partlycloudy
7
partlycloudy 
```

* * *

您将不得不为此使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php)功能。

```
$myArray = json_decode($yourJSON, true); 
```

现在您可以使用`foreach`从`$myArray`数组中获取数据，例如：

```
foreach($myArray['forecast']['forecastday'] as $key => $value)
{
   echo $value['period'];
   echo $value['icon'];
   // etc
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T10:05:06.550

您还可以将 json 转换为 PHP 对象：

```
$myData = json_decode($yourJSON);

foreach($myData->forecast->forecastday as $day) {
   echo $day->period;
   echo $day->icon;
} 
```

* * *

## 编辑：

我认为您可以使用以下方法修复问题中的代码：

```
<?php
$json_string =    file_get_contents("http://api.wunderground.com/api/7ec5f6510a4656df/geolookup/forecast/q/40121.json");
$parsed_json = json_decode($json_string);
$forecast = $parsed_json->forecast->txt_forecast;
$temp = $forecast->date;
$title = $forecast->forecastday->title;
$for = $forecast->forecastday->fcttext;
echo "Current date is ${temp},  ${title}: ${for}\n";

foreach($forecast->forecastday as $value) {
   echo $value['period'];
   echo $value['icon'];
   // etc
}
?> 
```

# javascript - jquery自动高度修复

> ID：10967771
> 
> 赞同：1
> 
> 时间：2012-06-10T09:57:56.177
> 
> 标签：javascript, jquery, css

我已经在网站上实现了 jquery（单击加号） [http://pligg.marsgibson.info](http://pligg.marsgibson.info)

单击前两个故事第一个故事在展开时有间隙，而第二个故事没有如何为此jquery设置自动高度

这是我的 style.css

[http://pligg.marsgibson.info/templates/wistie/css/style.css](http://pligg.marsgibson.info/templates/wistie/css/style.css)

我正在尝试编辑 .toggle_container .block

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:08:57.373

只需删除该行`height: 80px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:11:13.567

首先，您有一些[HMTL 禁忌](http://validator.nu/?doc=http://pligg.marsgibson.info/)。内联级元素中不能有块级元素（`<p>`标签中的`<span>`标签（您应该替换`<span>`为`</div>`）。

要解决您的问题，请更换

```
.toggle_container .block {
margin: 0px 10px 0px 75px;
padding: 0px 20px 0px 0px; /*--Padding of Container--*/
height:80px;
} 
```

与（删除`height:80px`）

```
.toggle_container .block {
margin: 0px 10px 0px 75px;
padding: 0px 20px 0px 0px; /*--Padding of Container--*/
} 
```

编辑：

如果您明确设置高度，我认为它的动画效果会更好。在你之后添加这个作为函数中内部函数的第一行`.ready()`：

```
jQuery(".toggle_container").each(function() {
    jQuery(this).height(jQuery(this).find(".block").height());
}); 
```

# jquery - 最初显示所有选项卡的内容

> ID：10967773
> 
> 赞同：1
> 
> 时间：2012-06-10T09:58:08.497
> 
> 标签：jquery, tabs

我有下面的代码来显示标签。当我单击它们而不是页面加载时，这些选项卡起作用（它显示所有选项卡的内容）。我还需要能够通过单击按钮打开页面上的所有第一个/第二个或第三个选项卡（页面上的多个选项卡组）

```
$("ul.tabs").each(function() {
    $(this).find('li:first').addClass("active");
    $(this).next('.tab_container').find('.tab_content:first').show();
});

$("ul.tabs li a").click(function() {
    $(".tab_content").hide();
    var cTab = $(this).closest('li');
    cTab.siblings('li').removeClass("active");
    cTab.addClass("active");
    cTab.closest('ul.tabs').nextAll('.tab_container:first').find('.tab_content').hide(); 

    var activeTab = $(this).attr("href"); //Find the href attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active ID content
    return false;
}); 
```

[jsfiddle](http://jsfiddle.net/agBgL/) .

我也对其他选项卡解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:26:20.537

[http://jsfiddle.net/agBgL/1/](http://jsfiddle.net/agBgL/1/)

您只需要最初隐藏选项卡内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T19:03:24.557

删除：

```
.ui-tabs .ui-tabs-panel { display: block; } 
```

[参考](http://forum.primefaces.org/viewtopic.php?f=3&t=16150#p49743)

# bash - 如何将小 bash 代码翻译成 csh / tcsh（设置 GNOME 终端标题）

> ID：10967775
> 
> 赞同：1
> 
> 时间：2012-06-10T09:58:46.840
> 
> 标签：bash, translate, csh, tcsh, gnome-terminal

我需要帮助将以下`bash`代码翻译为`tcsh`：

```
case $TERM in
    (xterm*)
    PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME}\007"'
    ;;
esac 
```

它是我`.bashrc`在所有具有`bash`登录 shell 的机器上的一部分。该代码将 GNOME 终端标题设置为`user@somehost`（显然是真实的用户名和主机名）。但是有些主机有`tcsh`作为登录外壳，所以我需要将代码翻译成`tcsh`并将其添加到`.tcshrc`.

我考虑以某种方式使用文件内部的代码创建`source`另一个文件，但我无法使其工作。`bash``.tcshrc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:36:19.860

您可以将序列添加到您的`prompt`字符串或使用`precmd`.

```
set prompt = "%{\033]0;%n@%M\007%}$prompt" 
```

或者

```
alias precmd 'echo -n "\033]0;$user@`hostname`\007"' 
```

条件赋值：

```
switch ($term)
    case xterm*:
        set prompt = "%{\033]0;%n@%M\007%}$prompt"  # or the alias command
    breaksw
endsw 
```

# eclipse - Netbeans 项目与不同框架的集成

> ID：10967780
> 
> 赞同：0
> 
> 时间：2012-06-10T09:59:03.313
> 
> 标签：eclipse, persistence, integration, netbeans-6.9

我们作为第三方
`MVC traditional framework with oracle 11g (no hibernate)`使用 login.jsp 页面进入系统

主要公司拿走了
`struts2 and spring and hibernate frameworks approach also with oracle 11g`
他们有他们的 login.jsp

当我们将我们的工作整合在一起时，由于权限问题（来自主要公司）， **login.jsp**是最后一个批准的，尽管它们太相似了，但它是用 hibernate、struts、spring 编程的。

发生了一个问题，即他们的**login.jsp**页面出现错误（**如下**）

**java.lang.IllegalArgumentException：未知实体：com.uts.entities.appsecurity.Users**

细节太长，所以我把它存储在 jsfiddle 中只是为了查看...... [错误](http://jsfiddle.net/sssonline2/ptN69/)

现在我应该提到，在集成时，除了他们的实际工作之外，我还从主要公司添加了一些额外的文件 .xml 来使用他们的框架：

1) 库
2)persistence.xml
3)struts.xml
4)validators.xml
5)applicationContext.xml

现在，如果我输入我在开发中使用的 login.jsp，它可以工作，但不是主要公司 login.jsp，我们正在为此寻找解决方案！部署没有给出错误，当按下登录 apachetomcat 输出没有给出错误，它只是重定向到错误页面`http://localhost:8084/HumanResources_2/presentation/securityAction.action`

*   主要公司登录

`http://localhost:8084/HumanResources_2/presentation/Login.jsp`

*   我们的（我的）登录

`http://localhost:8084/HumanResources_2/login.jsp`

另一件事是主要公司的登录页面，文本显示为**`undefined`**所有这些。

![主要公司登录](../Images/37c509a3cd9706cf5924b3582cd2a8ee.png)

我不知道是什么原因导致它在集成之前起作用，请注意，使用**Eclipse**的主要公司已经准备好接受我能提供的任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:00:01.193

问题是 netbeans 中的一个 BUG 看照片有一条线我必须删除才能使其工作成为选定的

![persistence.xml 代码视图](../Images/5f67a0f893df0e3cfa244be8a7d60cc6.png)

检查时为真上述行自动添加不知道为什么但它解决了

![persistence.xml 设计视图](../Images/e37757844761951ae81ef9bc0805acf9.png)

# c - 有人可以为我解释一下这个递归函数吗？

> ID：10967785
> 
> 赞同：2
> 
> 时间：2012-06-10T09:59:39.210
> 
> 标签：c, arrays, pointers, printing, recursion

```
#include <stdio.h>
#include <stdlib.h>

void reprint(char *a[]) {
    if(*a) {
            printf("%d ",a);
            reprint(a+1);
            printf("%s ",*a);
    }
}

int main() {
    char *coll[] = {"C", "Objective", "like", "don't", "I", NULL};
    reprint(coll);
    printf("\n");
    return EXIT_SUCCESS;
} 
```

更有经验的人会知道，这会反向打印数组。我不太明白怎么做！

我需要帮助理解什么`reprint(char *a[])`。我在一定程度上理解指针算术，但是通过在这里和那里插入`printf`s，我已经确定该函数递增到数组末尾，然后返回到开头，只在向下的过程中打印。但是，我不明白它是如何做到的；通过查看实际代码，我设法理解的是，如果`*a`不是`NULL`，则在下一个索引处再次调用 reprint。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T10:05:13.853

理解函数输出的关键是它会在递归之前打印指针，在递归之后打印实际的字符串。这就是给你经历两次的印象。

也许这听起来很傻，但是手动跟踪程序执行（或使用调试器）。一旦它进入 reprint 函数，它会在之后调用它自己，`printf("%d ",a);`所以它会首先“爬”到 NULL。只有这样，它才会遇到`printf("%s ",*a);`系列。

像这样修改你的程序，它应该可以帮助你理解发生了什么。

```
#include <stdio.h>
#include <stdlib.h>

static int callcounter = 1;

void reprint(char *a[]) {
    printf ("Entering reprint for the %d time\n",callcounter++);
    if(*a) {
            printf("%p ",a);
            reprint(a+1);
            printf("%s ",*a);
    }
    printf ("Exiting reprint\n");
}

int main() {
    char *coll[] = {"C", "Objective", "like", "don't", "I", NULL};
    reprint(coll);
    printf("\n");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T10:12:44.447

对函数的递归调用会在堆栈上留下指向函数剩余部分的指针。Yoy 可能会将其视为递归调用完成后要做的事情的列表。

最初，这个堆栈可能被认为是空的。在一系列调用之后，您会得到一个如下所示的堆栈：

```
 1st call: reprint ("C", "objective", "like", "don't", "I", NULL);
    2nd call: reprint ("objective", "like", "don't", "I", NULL);printf("C");
    3rd call: reprint ("like", "don't", "I", NULL);printf("objective");
                                                   printf("C"); 
    ...
    6th call: reprint(NULL); printf("I");printf("don't");printf("like");
                             printf("objective");printf("C"); 
```

现在堆栈自行展开，每个字符串都以正确的顺序输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T10:08:04.967

递归使用堆栈。堆栈是具有[LIFO](http://en.wikipedia.org/wiki/LIFO_%28computing%29)行为的数据结构。`reprint`在实际打印单词之前将被调用 6 次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T10:25:31.437

理解这种递归的关键是知道堆栈是如何工作的。

首先：每次 reprint() 用 (a+1) 调用自身，然后 a+1 被压入堆栈。这意味着被调用的 reprint() 获取 char** 的副本作为参数。调用转载的'a'没有被触及。就像你说的，这一直持续到传递的 char ** 为 NULL，即数组中的最后一个元素。然后测试'if (*a)' 变为假并且重印将不会被称为更深。

注意此时，所有 5 次 reprint 调用都在“等待”它返回，因此在 reprint 递归调用之后没有一个 printf 尚未被调用。另请注意，所有 5 个调用都有自己的“a”指针。这是必不可少的。

现在，由于 reprint 的最后一次调用不再调用 reprint，它只会返回。倒数第二个重印，即具有指向字符串“I”的“a”的重印，然后可以在调用重印之后继续执行下一条语句，即“I”的 printf。完成此操作后，此函数也将返回。倒数第三个重印，带有 'a' 指向字符串“don't”的那个也可以继续并打印“don't”，等等......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T10:36:30.097

而 *a != 0 (NULL) 使用 a+1 发出对 reprint 的调用，这意味着 char 数组中的下一个位置，直到最后一个元素 (NULL) 被调用，函数才返回它的返回地址，即行： printf("%s",*a); 并且在这个帧中 *a 是“I”，然后函数完成执行并再次回到它的'返回到它的'返回地址同一行，在这个激活帧中 *a 是“不”，依此类推，直到返回地址是 printf("\n"); 执行然后完成 main 的行

# c# - 如何编码和解码残破的中文/Unicode字符？

> ID：10967786
> 
> 赞同：6
> 
> 时间：2012-06-10T09:59:52.900
> 
> 标签：c#, model-view-controller, unicode, cjk

我试过用谷歌搜索，但找不到下面这段文字所属的字符集：

```
å…·æœ‰éœé›»ç”¢ç”Ÿè£ç½®ä¹‹å½±åƒè¼¸å…¥è£ç½® 
```

但是`<meta http-equiv="Content-Type" Content="text/html; charset=utf-8">`将该字符串放入 HTML 文件并保存，我能够正确查看中文字符：

```
具有靜電產生裝置之影像輸入裝置 
```

所以我的问题是：

1.  **我可以使用哪些工具来检测此文本的字符集？**

2.  **以及如何在 C# 中正确转换/编码/解码它们？**

更新：为了完整起见，我更新了这个测试。

```
 [TestMethod]
    public void TestMethod1()
    {
        string encodedText = "å…·æœ‰éœé›»ç”¢ç”Ÿè£ç½®ä¹‹å½±åƒè¼¸å…¥è£ç½®&quot;;
        Encoding utf8 = new UTF8Encoding();
        Encoding window1252 = Encoding.GetEncoding("Windows-1252");

        byte[] postBytes = window1252.GetBytes(encodedText);

        string decodedText = utf8.GetString(postBytes);
        string actualText = "具有靜電產生裝置之影像輸入裝置&quot;;
        Assert.AreEqual(actualText, decodedText);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T17:12:10.697

当您将“坏”字符串保存在带有声明正确编码的元标记的文本文件中时，会发生什么情况是您的文本编辑器正在使用 Windows-1252 编码保存文件，但浏览器正在读取文件并将其解释为 UTF -8。由于使用 Windows-1252 编码的“坏”字符串被错误地解码为 UTF-8 字节，因此您正在通过将文件编码为 Windows-1252 并解码为 UTF-8 来反转该过程。

这是一个例子：

```
using System.Text;
using System.Windows.Forms;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            string s = "具有靜電產生裝置之影像輸入裝置"; // Unicode
            Encoding Windows1252 = Encoding.GetEncoding("Windows-1252");
            Encoding Utf8 = Encoding.UTF8;
            byte[] utf8Bytes = Utf8.GetBytes(s); // Unicode -> UTF-8
            string badDecode = Windows1252.GetString(utf8Bytes); // Mis-decode as Latin1
            MessageBox.Show(badDecode,"Mis-decoded");  // Shows your garbage string.
            string goodDecode = Utf8.GetString(utf8Bytes); // Correctly decode as UTF-8
            MessageBox.Show(goodDecode, "Correctly decoded");

            // Recovering from bad decode...
            byte[] originalBytes = Windows1252.GetBytes(badDecode);
            goodDecode = Utf8.GetString(originalBytes);
            MessageBox.Show(goodDecode, "Re-decoded");
        }
    }
} 
```

即使解码正确，您仍然需要支持所显示字符的字体。如果您的默认字体不支持中文，您可能仍然看不到正确的字符。

正确的做法是首先弄清楚为什么您拥有的字符串被解码为 Windows-1252。但是，有时，数据库中的数据一开始就存储不正确，您必须求助于这些游戏来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T11:17:43.690

```
string test = "敭畳灴獩楫n"; //incoming data. must be mesutpiskin 

byte[] bytes = Encoding.Unicode.GetBytes(test);

string s = string.Empty;

for (int i = 0; i < bytes.Length; i++)
{
    s += (char)bytes[i];
}

s = s.Trim((char)0);

MessageBox.Show(s);
//s=mesutpiskin 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:21:47.907

我不太确定你的意思，但我猜你想在字节数组形式的特定编码的字符串和字符串之间进行转换。假设字符编码称为“FooBar”：

这是您编码和解码的方式：

```
Encoding myEncoding = Encoding.GetEncoding("FooBar");
string myString = "lala";
byte[] myEncodedBytes = myEncoding.GetBytes(myString);
string myDecodedString = myEncoding.GetString(myEncodedBytes); 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/86hf4sb8%28v=vs.110%29)上了解有关 Encoding 类的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T10:29:07.033

在帖子末尾回答您的问题：

1.  如果您想确定运行时的文本编码，您应该查看：[http ://code.google.com/p/ude/](http://code.google.com/p/ude/)

2.  对于转换字符集，您可以使用[http://msdn.microsoft.com/en-us/library/system.text.encoding.convert(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.text.encoding.convert(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T15:49:14.683

它是 Windows Latin 1。我将中文文本作为 UTF-8 粘贴到 BBEDIT（Mac 的文本编辑器）中，然后以 Windows Latin 1 重新打开文件，然后砰的一声，出现了确切的变音符号。

# c++ - DirectInput8 EnumDevices 有时非常缓慢

> ID：10967795
> 
> 赞同：7
> 
> 时间：2012-06-10T10:01:10.283
> 
> 标签：c++, wait, directinput

有时（在大约 50% 的运行中），EnumDevices 需要 5-10 秒才能返回。通常它几乎是即时的。我找不到任何其他关于这种行为的报告。

当事情变得如此缓慢时，可以通过观看 stdout 来分析 :) 这个：

```
std::cout << "A";
directInput8Interface->EnumDevices(DI8DEVCLASS_GAMECTRL, MyCallback, NULL, DIEDFL_ATTACHEDONLY);
std::cout << "C";

...

BOOL CALLBACK MyCallback(LPCDIDEVICEINSTANCE, LPVOID)
{
    std::cout << "B";
    return DIENUM_CONTINUE;
} 
```

似乎通过枚举设备挂在一个随机点 - 有时它会在回调被调用之前，有时在一对夫妇之后，有时它会在最后一次调用它之后。

这显然是一段简化的代码；我实际上使用的是 OIS 输入库 ( [http://sourceforge.net/projects/wgois/](http://sourceforge.net/projects/wgois/) )，因此有关上下文，请在此处查看完整源代码：

[http://wgois.svn.sourceforge.net/viewvc/wgois/ois/trunk/src/win32/Win32InputManager.cpp?revision=39&view=markup](http://wgois.svn.sourceforge.net/viewvc/wgois/ois/trunk/src/win32/Win32InputManager.cpp?revision=39&view=markup)

虽然那里似乎没有什么特别的结果，但可能是它们的初始化中的某些东西可能是原因 - 我对 DI8 了解得不够多，无法发现它。

任何关于为什么它会这么慢的想法将不胜感激！

编辑：

我设法在 etl 跟踪文件中发现了问题，并在 Windows 性能分析器中对其进行了分析。看起来`EnumDevices`最终调用 to `DInput8.dll!fGetProductStringFromDevice`，调用`HIDUSB.SYS!HumCallUSB`，调用`KeWaitForSingleObject`并等待。10 次中有 9 次（字面意思 - 跟踪中有 10 个样本）返回非常快（每个 324us），准备好的调用堆栈包含`usbport.sys!USBPORT_Core_iCompleteDoneTransfer`后跟`HIDUSB.SYS!HumCallUsbComplete`，这看起来很正常。

但是 10 次中有 1 次，这几乎需要 5 秒才能返回。在准备好的调用堆栈上是`ntkrnlmp.exe!KiTimerExpiration`代替`HIDUSB.SYS`函数。我猜这一切都表明 HIDUSB.SYS 驱动程序正在以 5 秒的超时时间异步查询设备，有时它会失败并达到此超时时间。

我不知道此故障是否与任何特定设备相关（我确实有一些 USB HID）或者它是否是随机的 - 很难测试，因为它并不总是发生。同样，任何人可以给我的任何信息都将不胜感激，尽管鉴于 DirectInput 的奇怪情况，我不希望微软很快解决这个问题！

也许我只需要提前开始异步初始化输入，并接受有时在用户输入发生之前会有 5 秒的延迟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-06T13:07:23.140

我也遇到过这个问题，主要是作为最终用户，但多年来我一直很烦。直到我在一个开源项目中遇到它并能够调试它时，我才意识到这是这个问题。

原来它是我的 USB 耳机 DAC（Massdrop 的目标 DAC），它安装驱动程序：`wdma_usb.inf_amd64_134cb113911feba4\wdma_usb.inf`用于设备实例 ID `USB\VID_262A&PID_1048&MI_01\7&F217D4F&0&0001`，然后在设备管理器中的声音、视频和游戏控制器下显示为：`ODAC-revB USB DAC`以及在人机接口设备下显示为：`USB Input Device`和`HID-compliant consumer control device`.

我不知道 HID 条目做了什么，但是......当它们被启用并且这个 DAC 被设置为音频输出设备时，IDirectInput8_CreateDevice 和 EnumDevices 都非常缓慢。禁用“USB 输入设备”条目似乎不会造成负面影响，并且完全解决了我的问题。

将 DAC 的音频输出更改为其他任何东西也奇怪地解决了这个问题。

这太糟糕了，以至于游戏手柄配置对话框joy.cpl 无法使用、挂起并最终崩溃。

我希望这只是一个评论，但我没有足够的代表，这几乎是互联网上唯一描述这个问题的地方，所以希望有一天这对其他人有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-10T01:09:24.483

我遇到过同样的问题。我有一个 Corsair K65 LUX RGB 键盘。我更新了 CUE，它似乎已经解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-23T11:49:18.423

使用我的 Corsair K55 键盘时遇到了同样的问题。更改 USB 端口的键盘可以暂时解决此问题，但稍后会再次出现。所以这似乎是一个错误的驱动程序问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-19T15:28:25.423

正如[DaFox 所指出的](https://stackoverflow.com/a/40449680/593146)，一个可能的原因似乎是启用了某些设备驱动程序。我联系了[JDS Labs](https://jdslabs.com/)支持（他们销售的设备恰好安装了一个这样的驱动程序），他们亲切地指出根本原因实际上是 Windows 中的一个错误（而不是安装的驱动程序），他们实际上[在他们的故障排除页面上](https://jdslabs.com/support/troubleshooting/)提供了解决方案. 见`Games hang or experience loading delays`，其中明确提到`VID_262`。禁用此驱动程序可以解决问题而不会产生明显的副作用（在这是唯一触发错误的驱动程序的情况下）。至于 Windows 中究竟出了什么问题，这里有龙。

因此，我想（针对用户）的首选解决方案是为您曾经连接到系统的所有设备抓取所有故障排除和常见问题解答页面，看看是否提到了由驱动程序引起的延迟/滞后。

作为软件开发人员，您可能希望对受影响代码的执行时间进行基准测试，并善意地告诉用户他们的系统配置有问题，以及在哪里寻找如何修复它，以防它过长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-05T15:36:05.797

Corsair K70 键盘也有同样的问题。快速重新连接键盘可以解决此问题，直到下一次。通常在某些 DirectInput 设备从系统中移除或进入睡眠状态后发生。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-27T14:28:27.860

多年来，这一直困扰着我作为开发人员和我的朋友作为用户。所有使用 DInput、SDL`SDL_INIT_JOYSTICK`或任何依赖于此的游戏都需要很长时间才能初始化。

它是由 DAC 的驱动程序错误引起的，正如 DaFox 所指出的，禁用相应的 USB 输入设备解决了该问题。尽管它标有不同的制造商名称，但供应商 ID 匹配。

设备的硬件 ID 是`USB\VID_262A&PID_9023&REV_0001&MI_00`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-27T11:36:30.233

Steelseries Apex 7 键盘似乎也出现了同样的问题。在枚举 USB 设备时，再次拔出并重新插入该键盘可以消除 3 次冻结（每次 10 秒）。

# php - 使用 php 获取 json youtube 建议

> ID：10967799
> 
> 赞同：-1
> 
> 时间：2012-06-10T10:01:58.523
> 
> 标签：php, json, youtube

```
http://suggestqueries.google.com/complete/search?hl=en&ds=yt&client=youtube&hjson=t&cp=1&q=WORD&alt=json 
```

我有这个网址。它以 JSON 格式创建 youtube 自动完成建议。我必须用 php 阅读并用 html 打印。我不能那样做。

互联网上的所有 JSON 解码教程都不适用于 youtube JSON。

最后，我只想要一个简单的代码来读取数据并使用 PHP 以 HTML 格式打印。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T10:21:22.407

```
$url = sprintf("http://suggestqueries.google.com/complete/search?hl=en&ds=yt&client=youtube&hjson=t&cp=1&q=%s&alt=json", urlencode("The Simpsons & family guy"));

$json = file_get_contents($url);

$results = json_decode($json);

foreach($results[1] as $result)
{
    // echo search suggestion
    echo $result[0];
} 
```

你去吧。在你说你已经尝试了四天之后，我开始为你感到难过（我知道它是什么样的）。享受你一天的剩余时间。

**注意：**没有验证，你应该添加验证但从来没有要求过，所以我没有告诉你;-)

# grails - Grails 防止重复插入

> ID：10967807
> 
> 赞同：2
> 
> 时间：2012-06-10T10:03:17.670
> 
> 标签：grails, groovy, grails-orm

如何防止域类的重复插入？

```
Locations location = Locations.findByLocationXY(locationxy)
       if (location == null)
        {

            LocationManagement lm = new LocationManagement()
            location = lm.getSingaporeLocation(locationxy)
            location.save(flush:true)
        }

class Locations {

int id
String locationName
String locationXY

static constraints = {
    id(blank:false, unique:true)
    locationName (blank:false)
    locationXY (blank:false, unique:true)
}
def afterInsert = {

id= this.id
locationName = this.locationName
locationXY = this.locationXY
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:45:33.880

您必须让 Grails 处理这个问题——如果您以正确的方式定义约束，则无需额外的代码。

正如我所看到的，你已经有了一个

```
locationXY (blank:false, unique:true) 
```

因此，从我从代码中读取的内容来看，应该不可能插入具有相同位置 XY 的另一个位置。

运行代码后，您检查过数据库的内容吗？你真的在你的桌子上有两条线`locationXY`吗？

顺便说一句：你的线

```
location.save(flush:true) 
```

不会抛出异常，因为您没有指定`failOnError:true`. 因此，以下行可能会产生您所期望的结果：

```
location.save(flush:true, failOnError:true) 
```

PS：你的`afterInsert`代码是干什么用的？为了清楚起见，我会删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:03:37.577

您不需要为 id 添加约束。这是由 grails 自动完成的。我认为如果您删除它，程序应该按您的预期执行。唯一的唯一值是 locationXY。

# reference - PHP5 - 对象分配问题

> ID：10967811
> 
> 赞同：0
> 
> 时间：2012-06-10T10:03:28.260
> 
> 标签：reference, php-5.3, variable-assignment, instantiation

```
<?php
class SimpleClass
{
    public $var1;
}
$instance = new SimpleClass();
$assigned   =  $instance;
$reference  =& $instance;
$instance->var1 = '$assigned will have this value';

$instance = null; // $instance and $reference become null

var_dump($instance);
var_dump($reference);
var_dump($assigned);
exit;
?> 
```

任何人都可以帮忙吗？上面代码的输出是怎么来的：

```
NULL
NULL
object(SimpleClass)#1 (1) {
   ["var"]=>
     string(30) "$assigned will have this value"
} 
```

我能理解`NULL`，但是怎么没有变成。根据我在 PHP 5 中的理解，对象是通过引用传递的，所以也包含引用，在这种情况下它也应该变成.`$instance``$reference``$assigned``NULL``$assigned``NULL`

除了我的理解之外，PHP手册中写的是“将已经创建的类实例分配给新变量时，新变量将访问与分配的对象相同的实例。这种行为与将实例传递给一个函数。”

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:14:04.130

> $实例=空；// $instance 和 $reference 变为 null

此时，您已将它们与对象取消链接。就这样。该对象不会被删除，因为我们有另一个变量链接到它。

此外，使用 var_dump($GLOBALS) 您可以看到 $assigned 和 $instance & $reference 对之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:02:42.647

下面的行来自 PHP 手册[对象和参考](http://php.net/manual/en/language.oop5.references.php)

PHP 引用是一个别名，它允许两个不同的变量写入相同的值。从 PHP 5 开始，对象变量不再包含对象本身作为值。**它只包含一个对象标识符，允许对象访问者找到实际对象。**当一个对象通过参数发送、返回或分配给另一个变量时，不同的变量不是别名：它们持有标识符的副本，它指向同一个对象。

# php - PHP http_build_query 特殊符号

> ID：10967813
> 
> 赞同：1
> 
> 时间：2012-06-10T10:03:37.233
> 
> 标签：php, string, curl

我想在 http_build_query (PHP) 的帮助下从数组中创建一个 url。这是数组：

```
$a = array("skip" => 1, "limit" => 1, "startkey" => '["naturalProduct","Apple"]') 
```

打电话后

```
$s = http_build_query($a); 
```

我得到以下字符串 $s：

```
skip=1&limit=1&startkey=%5B%22naturalProduct%22%2C%22Apple%22%5D 
```

我的问题是，我需要这样的网址：

```
skip=1&limit=1&startkey=["naturalProduct","Apple"] 
```

这意味着，我不想转换以下符号：",[]

我编写了一个在 http_build_query 之后调用的转换函数：

```
str_replace(array("%5B", "%22", "%5D", "%2C"), array('[', '"', ']', ','), $uri); 
```

我现在的问题是：有没有更好的方法来达到预期的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T10:19:33.583

> 我现在的问题是：有没有更好的方法来达到预期的结果？

是的，有更好的东西。[`http_build_query`^(*默认情况下， Docs*)](http://de.php.net/http_build_query)使用 RFC 1738 中概述的 URL 编码。您只想对字符串进行反 URL 编码。为此，有一个功能可以在您的情况下执行此操作：[`urldecode`^(*Docs*)](http://de.php.net/urldecode)：

```
$s = http_build_query($a);
echo urldecode($s); 
```

我希望您知道，在您完成此操作后，您的 URL 将不再是有效的 URL。你已经解码了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:13:27.560

您不需要解码特殊字符 - 它们会在 PHP 的`$_GET`超全局生成时自动解码。当我`print_r($_GET)`处理你生成的字符串时，我得到了这个：

> 数组 ( [skip] => 1 [limit] => 1 [startkey] => [\"naturalProduct\",\"Apple\"] )

它已经解码了每个字符，但没有取消双引号。要取消转义，请使用[`stripslashes()`](http://php.net/manual/en/function.stripslashes.php)：

```
echo stripslashes($_GET['startkey']); 
```

这给

> [“自然产品”，“苹果”]

然后您可以根据需要解析或使用它。正如 ThiefMaster 在评论中提到的，一个更好的解决方案是`magic_quotes_gpc`在你的`php.ini`; 它已被弃用并计划在 PHP6 中完全删除。

# python - （Python）为什么我的方法对象在我的类定义之后调用它时不执行？

> ID：10967814
> 
> 赞同：2
> 
> 时间：2012-06-10T10:03:37.517
> 
> 标签：python, class, function, object, methods

当我尝试在 IDLE 中运行我的程序时（我目前正在使用的文本编辑器，notepad ++ 说缩进错误，我不知道为什么）它只执行 中的代码`__init__`，这表明它已被创建为一个对象. 但是在那之后的那一行我尝试使用 main 方法并且它没有做任何事情。我也将其更改为不同的方法，但这也不起作用。这是我的程序：

```
import sys

class Main:
    def __init__(self):
        WinX = False
        WinO = False
        Turn = 'X'
        LastTurn = 'X'
        a, b, c, d, e, f, g, h, i = ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '
        PosList = []
        PosList.append(a)
        PosList.append(b)
        PosList.append(c)
        PosList.append(d)
        PosList.append(e)
        PosList.append(f)
        PosList.append(g)
        PosList.append(h)
        PosList.append(i)
        self.board = '+---+---+---+\n| ' + PosList[0] +' | '+ PosList[1] +' | '+ PosList[2] +' |\n+---+---+---+\n| '+ PosList[3] +' | '+ PosList[4] +' | '+ PosList[5] +' |\n+---+---+---+\n| '+ PosList[6] +' | '+ PosList[7] +' | '+ PosList[8] +' |\n+---+---+---+'
        print self.board

    def UpdateTurn(self):
        if LastTurn == 'X':
            Turn == 'O'
        elif LastTurn == 'O':
            Turn == 'X'
        LastTurn = Turn

    def WinChecker(self):
        if a and b and c == 'X' or a and d and g == 'X' or a and e and i == 'X' or g and e and c == 'X' or g and h and i == 'X' or c and f and i == 'X':
            WinX = True
        if a and b and c == 'O' or a and d and g == 'O' or a and e and i == 'O' or g and e and c == 'O' or g and h and i == 'O' or c and f and i == 'O':
            WinO = True

    def UpdateBoard(self):
        print self.board

    def Starter(self):
        while True:
            try:
                i = int(input(''))
            except TypeError:
                print 'Not a Number, Try Again.'
                continue
        i -= 1
        PosList[i] = Turn
        self.UpdateBoard
        self.WinChecker
        if Winx == True:
            print 'X Wins!'
            sys.exit()
        elif Wino == True:
            print 'O Wins!'
            sys.exit()
        self.UpdateTurn

s = Main()
s.Starter 
```

我刚刚（4 天）完成了 python 自己的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:05:06.757

您还没有调用该方法。

```
s.Starter() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:05:51.363

您实际上并没有`Starter`在最后一行调用该方法，只是引用它。改为这样做：

```
s.Starter() 
```

那叫它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T10:06:50.943

调用 Starter 函数，如

```
s.Starter() 
```

并且可能存在逻辑错误下面的while循环将始终为真。

```
def Starter(self):
        while True:
            try:
                i = int(input(''))
            except TypeError:
                print 'Not a Number, Try Again.'
                continue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T15:06:44.640

出于兴趣，这里是一个重写的版本。我使用了一些更高级的构造 -`@classmethod`和`@property`' 魔术方法' 像`__str__`and `__repr__`。希望你觉得它有用！

```
def getInt(prompt='', lo=None, hi=None):
    """
    Get integer value from user

    If lo is given, value must be >= lo
    If hi is given, value must be <= hi
    """
    while True:
        try:
            val = int(raw_input(prompt))

            if lo is not None and val < lo:
                print("Must be at least {}".format(lo))
            elif hi is not None and val > hi:
                print("Must be no more than {}".format(hi))
            else:
                return val
        except ValueError:
            print("Must be an integer!")

class TicTacToe(object):
    players = ('X', 'O')        # player characters
    blank = ' '                 # no-player character
    wins = (                    # lines that give a win
        (0,1,2),
        (3,4,5),
        (6,7,8),
        (0,3,6),
        (1,4,7),
        (2,5,8),
        (0,4,8),
        (2,4,6)
    )
    board_string = '\n'.join([  # format string
        "",
        "+---+---+---+",
        "| {} | {} | {} |",
        "+---+---+---+",
        "| {} | {} | {} |",
        "+---+---+---+",
        "| {} | {} | {} |",
        "+---+---+---+"
    ])

    @classmethod
    def ch(cls, state):
        """
        Given the state of a board square (None or turn number)
        return the output character (blank or corresponding player char)
        """
        if state is None:
            return cls.blank
        else:
            return cls.players[state % len(cls.players)]

    def __init__(self, bd=None):
        """
        Set up a game of TicTacToe

        If board is specified, resume playing (assume board state is valid),
        otherwise set up a new game
        """
        if bd is None:
            # default constructor - new game
            self.turn  = 0
            self.board = [None for i in range(9)]
        elif hasattr(bd, "board"):     # this is 'duck typing'
            # copy constructor
            self.turn = sum(1 for sq in bd if sq is not None)
            self.board = bd.board[:]
        else:
            # given board state, resume game
            self.turn = sum(1 for sq in bd if sq is not None)
            self.board = list(bd)

    @property
    def board_chars(self):
        """
        Return the output characters corresponding to the current board state
        """
        getch = type(self).ch
        return [getch(sq) for sq in self.board]

    @property
    def winner(self):
        """
        If the game has been won, return winner char, else None
        """
        bd = self.board_chars
        cls = type(self)
        for win in cls.wins:
            c0, c1, c2 = (bd[sq] for sq in win)
            if c0 != cls.blank and c0 == c1 and c0 == c2:
                return c0
        return None

    def __str__(self):
        """
        Return a string representation of the board state
        """
        cls = type(self)
        return cls.board_string.format(*self.board_chars)

    def __repr__(self):
        """
        Return a string representation of the object
        """
        cls = type(self)
        return "{}({})".format(cls.__name__, self.board)

    def do_move(self):
        """
        Get next player's move
        """
        cls = type(self)
        next_player = cls.ch(self.turn)
        while True:
            pos = getInt("Player {} next move? ".format(next_player), 1, 9) - 1
            if self.board[pos] is None:
                self.board[pos] = self.turn
                self.turn += 1
                break
            else:
                print("That square is already taken")

    def play(self):
        print("Welcome to Tic Tac Toe. Board squares are numbered 1-9 left-to-right, top-to-bottom.")
        while True:
            print(self)       # show the board - calls self.__str__
            w = self.winner
            if w is None:
                self.do_move()
            else:
                print("{} is the winner!".format(w))
                break

def main():
    TicTacToe().play()

if __name__=="__main__":
    main() 
```

# c++ - 寻找一个用于嵌入式系统的线性代数库（没有 malloc 和免费）

> ID：10967817
> 
> 赞同：5
> 
> 时间：2012-06-10T10:03:49.593
> 
> 标签：c++, c, embedded, linear-algebra

我曾经与微控制器一起工作。我在我的应用程序中使用的 RTOS 没有 free 和 malloc（以及其他调用，如 assert），有时它们可​​能可用，但我更喜欢在我的系统中拥有所有静态。

我已经开始使用线性代数，但大多数都需要动态记忆。我的矩阵密集且“小”（不超过 10x10）。

我真的很喜欢 Eigen（一切都可以在编译时静态决定），但显然有一个 bug 需要我的 RTOS 未提供的断言（即使使用 -DNDEBUG）。该库应提供矩阵分解例程（如 QR、Cholesky、LU ...）

我更喜欢 C 而不是 C++。有什么建议么？提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T02:17:00.420

CLAPACK 有什么问题吗？甚至是直接的 Fortran LAPACK（您可以使用 gfortran 编译它，它是 gcc 的一部分）。

[C]LAPACK 的例程将其参数中的所有内存缓冲区视为已分配，并且不会对自己进行任何堆分配。对于除了其他参数之外还采用“工作”缓冲区的例程（例如，用于计算 SVD 的 dgesdd），您通常可以使用特殊的“仅大小”参数调用它们，并返回工作所需的大小作为响应缓冲区，然后您可以随意分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:39:50.240

重新定义 assert 宏似乎是一个很好的解决方案。

但您甚至可以提供自己的 malloc 和免费实现或静态链接到适当的内存管理库： [http ://blog.reverberate.org/2009/02/one-malloc-to-rule-them-all.html](http://blog.reverberate.org/2009/02/one-malloc-to-rule-them-all.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:12:05.057

如果 Q16.16 定点数学适合您的应用程序，则可以选择 libfixmatrix：

[https://github.com/PetteriAimonen/libfixmatrix](https://github.com/PetteriAimonen/libfixmatrix)

# python - python：我什么时候可以解压生成器？

> ID：10967819
> 
> 赞同：10
> 
> 时间：2012-06-10T10:04:08.010
> 
> 标签：python, args, iterable-unpacking

它是如何在引擎盖下工作的？我不明白以下错误的原因：

```
>>> def f():
...     yield 1,2
...     yield 3,4
...
>>> *f()
  File "<stdin>", line 1
    *f()
    ^
SyntaxError: invalid syntax
>>> zip(*f())
[(1, 3), (2, 4)]
>>> zip(f())
[((1, 2),), ((3, 4),)]
>>> *args = *f()
File "<stdin>", line 1
  *args = *f()
    ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T10:06:42.960

该`*iterable`语法仅在函数调用的参数列表（和函数定义）中受支持。

在 Python 3.x 中，您还可以在赋值的左侧使用它，如下所示：

```
[*args] = [1, 2, 3] 
```

**编辑**：请注意，有[计划支持其余的概括](http://bugs.python.org/issue2292)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T10:06:53.067

在 Python 3 中运行它会给出更具描述性的错误消息。

```
>>> *f()
SyntaxError: can use starred expression only as assignment target 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T10:06:31.970

这两个错误显示的是同一件事：您不能`*`在表达式的左侧使用。

我不确定在这些情况下你期望发生什么，但它是无效的。

# wpf - 有什么方法可以使 Style 适用于所有项目而无需声明属性

> ID：10967830
> 
> 赞同：0
> 
> 时间：2012-06-10T10:06:11.687
> 
> 标签：wpf, xaml, styles

我为 DataGrid 创建了一个自定义样式。我的应用程序中有几个数据网格，我希望这种风格适用于所有这些。

一种方法是添加`Style="{StaticResource DataGridDefaultStyle}"`到所有 DataGrid。

但是必须有另一种方法来做到这一点，类似于添加主题，我将在其中声明样式，并且它将自动应用于所有 DataGrid。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:18:36.370

检查此[在 WPF 中使用 CSS 选择器进行样式设置](http://www.scottlogic.co.uk/blog/colin/2009/03/using-css-selectors-for-styling-in-wpf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:49:11.743

您可以尝试使用[隐式样式](http://wpf.2000things.com/tag/implicit-style/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T15:56:37.107

您可以像其他人所说的那样使用隐式样式，但将其放在 App.Xaml 文件的 Application.Resources 部分中，这将允许将样式应用于应用程序中的所有 DataGrid。

```
<Application.Resources>
    <Style TargetType="DataGrid">
        <Setter Property="Background" Value="LightBlue" />
    </Style>
</Application.Resources> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T15:46:59.363

要创建隐式样式，您不得包含样式的键并指定 TargetType。如果这样做，样式将自动应用于指定类型的每个样式。

例如，此代码将自动应用于所有 DataGrid 元素：

```
<Style TargetType="DataGrid">
     <!-- style information goes here -->
</Style> 
```

# function - Haskell：函数应该接收“多少”类型？避免彻底的“重构”

> ID：10967832
> 
> 赞同：10
> 
> 时间：2012-06-10T10:06:33.970
> 
> 标签：function, haskell, types

我有这些数据类型：

```
data PointPlus = PointPlus
    { coords :: Point
    , velocity :: Vector
    } deriving (Eq)

data BodyGeo = BodyGeo
    { pointPlus :: PointPlus
    , size :: Point
    } deriving (Eq)

data Body = Body
    { geo :: BodyGeo
    , pict :: Color
    } deriving (Eq) 
```

它是我游戏中角色、敌人、物体等的基本数据类型（好吧，我现在只有两个矩形作为玩家和地面：p）。

当一个键时，字符向右、向左移动或通过改变它的`velocity`. 移动是通过添加 到`velocity`来完成的`coords`。目前，它的编写如下：

```
move (PointPlus (x, y) (xi, yi)) = PointPlus (x + xi, y + yi) (xi, yi) 
```

我只是参加`PointPlus`my 的一部分`Body`而不是整个`Body`，否则它将是：

```
move (Body (BodyGeo (PointPlus (x, y) (xi, yi)) wh) col) = (Body (BodyGeo (PointPlus (x + xi, y + yi) (xi, yi)) wh) col) 
```

第一个版本`move`更好吗？无论如何，如果`move`只是更改`PointPlus`，则必须有另一个函数在 new 中调用它`Body`。我解释一下：有一个函数`update`被调用来更新游戏状态；它传递当前的游戏状态，`Body`现在是一个，并返回更新的`Body`.

```
update (Body (BodyGeo (PointPlus xy (xi, yi)) wh) pict) = (Body (BodyGeo (move (PointPlus xy (xi, yi))) wh) pict) 
```

这让我很痒。里面的一切都保持不变，`Body`除了`PointPlus`. 有没有办法手动避免这种完全的“重建”？像：

```
update body = backInBody $ move $ pointPlus body 
```

当然，不必定义`backInBody`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T10:24:02.387

您正在寻找“镜头”。镜头有几种不同的包装；[这](https://stackoverflow.com/questions/5767129/lenses-fclabels-data-accessor-which-library-for-structure-access-and-mutatio)是对它们的一个很好的总结。

`a`我的理解是，某个字段的数据类型的镜头`b`提供了两种操作：一种获取 的值的方法，`b`以及一种获取`a`具有不同值的新的`b`. 因此，您只需使用镜头来处理深度嵌套的`PointPlus`.

镜头包提供了使用镜头的有用功能以及自动生成镜头的方法（使用模板 Haskell），这非常方便。

我认为它们值得为您的项目研究，特别是因为由于数据类型的结构，您可能会在其他地方遇到类似的嵌套问题。

# json - 无法使用 Twitterizer TwitterStatus.Show 方法解析 JSON 错误

> ID：10967833
> 
> 赞同：3
> 
> 时间：2012-06-10T10:06:36.887
> 
> 标签：json, twitterizer

运行此代码：

```
var statusResponse = TwitterStatus.Show(tweet.Id); 
```

给出错误消息：`Unable to parse JSON`在`statusResponse`对象中，并且`ResponseObject`返回为`null`.

不知道如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T06:16:32.423

我今天遇到了同样的问题。似乎您`Newtonsoft.Json`在项目中引用了较新版本的 （或者可能包含其他 NuGet 包）。

该问题可以通过使用`Newtonsoft.Json 4.0.5.0`Twitterizer 项目附带的库来解决。它必须是那个确切的版本。

# mysql - MySQL Join Query - 将表多次加入自身

> ID：10967835
> 
> 赞同：1
> 
> 时间：2012-06-10T10:06:43.900
> 
> 标签：mysql

我需要执行 4 个查询，以便根据用户已经表示感兴趣的项目向用户推荐项目：

选择用户已经喜欢的 5 个随机项目

```
SELECT item_id
FROM user_items
WHERE user_id = :user_person
ORDER BY RAND()
LIMIT 5 
```

选择50个喜欢相同物品的人

```
SELECT user_id 
FROM user_items
WHERE user_id != :user_person
AND item_id = :selected_item_list
LIMIT 50 
```

SELECT所有原始用户喜欢的项目

```
SELECT item_id
FROM user_items
WHERE user_id = :user_person 
```

选择用户不喜欢向用户推荐的 5 个项目

```
SELECT item_id
FROM user_items
WHERE user_id = :user_id_list
AND item_id != :item_id_list
LIMIT 5 
```

我想知道的是我将如何将其作为一个查询执行？

我想这样做有几个原因：

1.  目前，我必须执行 5 次“选择 50 人”查询并从中选择前 50 人
2.  然后我必须执行“选择 5 个项目”查询 50 *（初始用户喜欢的项目数）

执行查询后，我打算将查询结果存储在 cookie 中（如果用户同意我使用 cookie，否则他们根本不会得到“项目建议”），键是查询，这意味着它每天/每周只会触发一次（这就是为什么我返回 5 个建议并随机选择一个键来显示）

基本上，如果有人知道如何将这些查询写成一个查询，你能告诉我并解释查询中发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:08:18.630

这将选择您需要的所有项目：

```
SELECT DISTINCT ui_items.item_id
FROM user_items AS ui_own
JOIN user_items AS ui_others ON ui_own.item_id = ui_others.item_id
JOIN user_items AS ui_items ON ui_others.user_id = ui_items.user_id
WHERE ui_own.user_id = :user_person 
  AND ui_others.user_id <> :user_person
  AND ui_items.item_id <> ui_own.item_id 
```

（请检查结果是否与您的版本完全相同 - 我在一个非常小的假数据集上进行了测试）

接下来，您只需缓存此列表并随机显示 5 个项目，因为`ORDER BY RAND()`效率非常低（非确定性查询 => 无缓存）

**编辑：**添加`DISTINCT`不显示重复行。

`DISTINCT`您还可以通过在查询末尾删除并添加以下代码来按受欢迎程度降序返回最受欢迎的建议：

```
GROUP BY ui_items.item_id
ORDER BY COUNT(*) DESC
LIMIT 20 
```

到查询的末尾将返回 20 个最受欢迎的项目。

# java - 保存和加载数据库

> ID：10967841
> 
> 赞同：-1
> 
> 时间：2012-06-10T10:07:56.683
> 
> 标签：java, database, sqlite

我想在磁盘上保存和加载数据库。

我真正想要的是能够用数据库做典型的应用程序`save as`和`open`事情。意思是当我想保存数据库时，我会点击`save as`按钮，给数据库起个名字，然后保存。稍后我希望能够`load`通过使用打开按钮找到数据库的路径来备份数据库。

我正在使用 sqlite 和 java，我听说 firefox 书签管理器使用 sqlite 来存储书签数据。而且我不知道正确的术语，但大致上我希望能够像 Firefox 书签管理器一样保存和加载数据库。

希望你们能在这里有所启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:17:53.853

您可以通过两种可能的方式使用 SQLite 数据库文件：

1.  **像数据库一样：**在您的应用程序第一次运行时，您创建 SQLite 数据库文件并创建模式（使用`CREATE TABLE`SQL 命令等）。然后，每当您想更改保存的数据时，您可以访问您的数据库文件并执行 single或`UPDATE`statements来准确修改那些已更改的记录。这使得*Save*之类的操作不是很简单，但是对于只修改小部分的大量数据来说，它的速度相当快。`INSERT``DELETE`
**   **像数据文件一样：**每次保存数据时，都会创建一个新的数据库文件（如果之前有同名的文件，则先将其删除）。然后创建整个模式，然后将所有信息写入数据库文件（使用`INSERT`SQL 语句）。*这允许您使用传统的Save* /*Save as* 命令来处理事情。*

 *如需更详细的信息，请更具体地询问；特别是，如果您需要知道哪种方法最适合您，请概述您的问题。*

# sql-server - 使用 sql server 中的 try 和 catch 块记录自定义错误消息

> ID：10967845
> 
> 赞同：1
> 
> 时间：2012-06-10T10:08:05.793
> 
> 标签：sql-server

我正在尝试将重复值插入到引发主键冲突错误的主键列中。我想在 catch 块中记录此错误。

代码块：-

```
 SET XACT_ABORT OFF
   BEGIN TRY
   BEGIN TRAN
   INSERT INTO #Calender values (9,'Oct')
   INSERT INTO #Calender values (2,'Unknown')
   COMMIT TRAN
   END TRY

  BEGIN CATCH 
  Insert into #LogError values (1,'Error while inserting a duplicate value')
  if @@TRANCOUNT >0
  rollback tran
  raiserror('Error while inserting a duplicate value ',16,20)
  END CATCH 
```

当我执行上面的代码时，它会打印出自定义错误消息，该消息显示在 catch 块中，但不会将值插入到 #LogError 表中

```
Error while inserting a duplicate value 
```

但是当我使用 SET XACT_ABORT ON 时，我收到一条不同的错误消息，但它仍然没有将错误消息插入表中

```
 The current transaction cannot be committed and cannot support operations
 that write to the log file. Roll back the transaction. 
```

我的问题是

1.如何将错误记录到表中

2.为什么我在设置 xact_ABORT 时收到不同的错误消息。在每次交易之前设置 XACT_ABORT 是否是一个好习惯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:29:03.067

它确实将记录插入其中，`#LogError`但随后您回滚删除它的事务。

您需要在回滚后进行插入，或者改为插入表变量（不受回滚影响）。

当在 try 块中遇到错误时，这可能会使您的事务处于[注定失败](http://blogs.msdn.com/b/sqlserverfaq/archive/2011/05/11/errors-raised-with-severity-level-16-may-cause-transactions-into-doomed-state.aspx)的状态。在执行写入日志或尝试提交的任何操作之前，您应该在 catch 块中测试`XACT_STATE()`（[参见`TRY ... CATCH`主题中的示例 c）的值以检查这一点。](http://msdn.microsoft.com/en-us/library/ms175976.aspx)

当`XACT_ABORT`在 try 块中任何严重性 > 10 的错误上都会产生这种效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-07T09:33:47.627

由于 SqlServer 不支持`Autonomous transaction`（嵌套和独立事务），因此不可能*（实际上，在某些情况下，您可以使用带有自定义连接字符串的 CLR SP - 做自己的、非本地的连接）*使用数据库表来记录SP 执行活动/错误消息。

为了解决这个缺失的功能，我开发了一个工具箱（100% T-SQL），基于使用作为参考传递的**XML**参数（OUTPUT 参数），该参数在 SP 执行期间填充，可以保存到专用数据库表中结束。

*Disclamer：我是 Iorga 的员工（联合创始人），我开发了以下 LGPL v3 工具箱。我的目标不是 Iorga/自我提升，而是分享知识和简化 T-SQL 开发人员的生活。*

随心所欲地看、教、增强[SPLogger](https://github.com/iorga-group/splogger)

今天（2015 年 10 月 19 日）我刚刚发布了 1.3，包括基于 SPLogger的**单元测试系统。**

# python - 如何在 GAE 中设置动态 URL？

> ID：10967847
> 
> 赞同：1
> 
> 时间：2012-06-10T10:08:13.810
> 
> 标签：python, google-app-engine, url

我是GAE的新手。我现在在 GAE 上托管一个网站。我想把http://abc.com/about.html的网址改成[http://abc.com/about/](http://abc.com/about.html)怎么[办](http://abc.com/about/) ？谢谢。

这是我的 main.py：

```
import webapp2
from google.appengine.ext.webapp2 import template
from google.appengine.ext.webapp2 import util
import os

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {}
        path = os.path.join(os.path.dirname(__file__), 'index.html')
        self.response.out.write(template.render(path, template_values))

class About(webapp2.RequestHandler):
    def get(self):
        self.response.our.write(template.render('about.html',None))

def main()
    application = webapp2.WSGIApplication([(
        '.', MainHandler),
        ('about', About),
        ])
    util.run_wsgi_app(application)

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

这是我的 app.yaml：

```
application: nienyiho-test
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

- url: /about
  static_files: about.html
  upload: about.html

libraries:
- name: webapp2
  version: "2.5.1" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:29:32.477

您将需要更改路线。您没有向我们提供创建路由的代码，但如果您基本上提供静态 HTML 文件，那么正如 @AdamCrossland 评论所述，您可以使用 app.yaml 文件来实现。

您的 app.yaml 文件应类似于：

```
application: your_app
version: 1
runtime: python27
api_version: 1
default_expiration: "1d"
threadsafe: True

- url: /about.html
  static_files: static/html/about.html
  upload: static/html/about.html
  secure: never

- url: /about
  script: main.app

- url: /.*
  script: main.app 
```

您也可以使用正则表达式，正如@NickJohnson[在此处](https://stackoverflow.com/a/10924018/1352012)建议的那样，如果您愿意，您可以删除安全行，但我在我的一些应用程序中使用 https 并使用该行来强制执行哪些路由是安全的还是不安全的。

主文件

```
import webapp2
from google.appengine.ext.webapp2 import template
from google.appengine.ext.webapp2 import util
import os

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {}
        path = os.path.join(os.path.dirname(__file__), 'index.html')
        self.response.out.write(template.render(path, template_values))

class AboutHandler(webapp2.RequestHandler):
    def get(self):
        self.response.our.write(template.render('about.html',None)

#  Setup the Application & Routes
app = webapp2.WSGIApplication([
    webapp2.Route(r'/', MainHandler),
    webapp2.Route(r'/about', AboutHandler)
], debug=True) 
```

编辑：20120610 - 添加了 main.py 并更新了 app.yaml 以显示如何路由生成的内容。

# python - 何时使用属性与何时在 python 中使用属性？

> ID：10967849
> 
> 赞同：8
> 
> 时间：2012-06-10T10:08:24.863
> 
> 标签：python

只是一个简单的问题，我很难理解在哪里使用属性与在哪里使用普通的旧属性。对我来说区别有点模糊。任何关于这个主题的资源都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T10:10:10.433

属性比属性更灵活，因为您可以定义函数来描述在设置、获取或删除它们时应该发生的事情。如果您不需要这种额外的灵活性，请使用属性——它们更容易声明且速度更快。

在像 Java 这样的语言中，通常建议*始终*编写 getter 和 setter，以便将来可以选择用更复杂的版本替换这些函数。这在 Python 中不是必需的，因为访问属性和属性的客户端代码语法是相同的，因此您可以随时选择稍后使用属性，而不会破坏向后兼容性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-10T10:11:24.067

关键是语法是可以互换的。总是从属性开始。如果您发现在访问属性时需要额外的计算，请将其替换为属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:55:22.393

属性*是*属性+*后验*封装。

当您将*属性*转换为*属性*时，您只需定义一些“附加”到它的*getter*和*setter*，这将*挂钩*数据访问。然后，您不需要重写其余代码，访问数据的方式是相同的，无论您的*属性*是否为*属性*。

由于这种非常聪明且强大的封装机制，在 Python 中，您通常可以使用*属性*（无需*先验*封装，因此无需任何*getter*或*setter*），除非您在访问数据时需要做一些特殊的事情。

如果是这样，那么您只需在需要时定义*setter*和*getter*，并将它们“附加”到属性，将其变成属性，而不会影响您的其余代码（而在 Java 中，您通常首先要做的就是当创建一个*字段*时，通常是*私有*的，是创建它的关联*getter*和*setter*方法）。

关于属性、属性和描述符的好页面[在这里](http://www.itmaybeahack.com/book/python-2.6/html/p03/p03c05_properties.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T11:38:41.130

除了 Daniel Roseman 所说的之外，我经常在包装某些东西时使用属性，即，当我自己不存储信息但包装对象存储时。然后属性成为出色的访问器。

# emacs - Emacs中sexp和list的区别？

> ID：10967850
> 
> 赞同：4
> 
> 时间：2012-06-10T10:08:45.140
> 
> 标签：emacs, elisp, delimiter, parentheses, s-expression

在 Emacs 中，有一些命令可以在括号（或任何括号）中分隔的表达式之间移动光标，即 forward-sexp、backward-sexp、forward-list 和 backward-list。在 Lisp 和任何其他代码中，它们的行为相似，所以我认为 *-sexp 和 *-list 之间没有区别，除了最后一个在注释或引号中不起作用。

sexp 和 list 命令之间的功能区别是什么，我应该什么时候使用？

以防万一，我了解 up-list 和 down-list 命令，它们与主题无关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T10:19:55.373

列表是 s 表达式的一个示例，因此任何对 s 表达式进行操作的函数都应该在列表上工作（但不一定反之亦然，因为也有非列表性）。

elisp 手册说：

> 用于评估的 Lisp 对象称为“表单”或“表达式”(1)。表单是数据对象而不仅仅是文本这一事实是类 Lisp 语言与典型编程语言之间的根本区别之一。可以评估任何对象，但实际上只有数字、符号、列表和字符串会被经常评估。
> 
> ---------- 脚注 ----------
> 
> (1) 有时也称为“S 表达式”或“sexp”，但我们一般不会在本手册中使用该术语。

`C-h``i``g` `(elisp) Intro Eval` `RET`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T00:35:58.590

并非所有的 s 表达式都是列表，例如变量是 s 表达式，而它们显然不是列表。

考虑以下示例：

```
foo (bar) 
```

如果将点放在行首，`forward-sexp`则将点移动到“foo”的末尾，而`forward-list`将点移动到“（bar）”的末尾

# clojure - Clojure中如何将字符串转换为函数？

> ID：10967851
> 
> 赞同：10
> 
> 时间：2012-06-10T10:08:54.220
> 
> 标签：clojure

我一直在研究[Clojure 问题 135 Infix Calculator](http://www.4clojure.com/problem/135)，基本上是前缀算术计算器的简化中缀：

```
(= 7  (__ 2 + 5)) 
```

我按照规定解决了问题。但这让我想知道——如果参数是作为字符串提供的——我将如何让它工作？

```
(= 7  (__ "2 + 5")) 
```

显然我会从**split**开始，然后仔细研究结果：

```
(clojure.string/split "2 + 5" #"\s")
user=> ["2" "+" "5"] 
```

但是如何将“+”转换为函数调用？这是行不通的：

```
("+" 2 5)
user=> java.lang.ClassCastException: java.lang.String cannot be 
cast to clojure.lang.IFn <snip> 
```

寻求启蒙......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T10:13:15.143

看解析函数

```
((resolve (symbol "+")) 1 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:31:12.830

您可以使用`load-string`或`read-string`。这有点像`READ-FROM-STRING`普通的 lisp，它遵循“代码即数据”的原则，将字符串视为代码 - 评估并返回值。

```
user=> (class (load-string "+"))
clojure.core$_PLUS_
user=> (read-string "+")
+
user=> 
```

那么你可以简单地使用它。

# objective-c - Saving a UIImage to NSUserDefaults

> ID：10967856
> 
> 赞同：2
> 
> 时间：2012-06-10T10:10:38.247
> 
> 标签：objective-c, uiimagepickercontroller, nsuserdefaults

So I'm trying to save an image taken from UIImagePickerController to NSUserDefaults so I can open it up in an album I generate, but when I call the delegate method to save the picture, I get the error:

```
[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '<UIImage: 0x1d0bf0>' of class 'UIImage'.  Note that dictionaries and arrays in property lists must also contain only property values.` 
```

The code is as follows:

```
self.savedPic = [[UIImage alloc] init];
self.savedPic = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
[[NSUserDefaults standardUserDefaults] setValue:self.savedPic forKey:[NSString stringWithFormat:@"image_%i",imageCount]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:16:56.593

You should save to disk your image and put the name of your image in the NSUserDefaults, then when needed create it :

```
[UIImage imageNamed:@"nameOfImage.png"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:00:44.273

It is quite simple, see my codes:

```
- (UIImage *)backgroundImage {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData* myEncodedImageData = [defaults objectForKey:@"backgroundImageData"];
UIImage* image = [UIImage imageWithData:myEncodedImageData];
return image;
}

- (void)setBackgroundImage:(UIImage *)image {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData* imageData = UIImagePNGRepresentation(image);
[defaults setObject:imageData forKey:@"backgroundImageData"];
[defaults synchronize];
} 
```

# jquery - 在显示中获取元素的大小：无父元素

> ID：10967857
> 
> 赞同：3
> 
> 时间：2012-06-10T10:10:43.403
> 
> 标签：jquery, width, element

我正在尝试获取将在 jquery-ui 对话框中显示的元素的宽度。

对话框设置为 display:none on load。这不允许我获得宽度。

我是否需要显示它，获取宽度并立即再次隐藏以获取宽度？还是有其他我不知道的选择？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:37:23.863

你有两个选择：

*   如果您的 jquery-ui 对话框必须是`display:none`，则获取其子项尺寸的唯一方法是 show/get_dimensions/hide。
*   如果您可以将其设置为`visibility:hidden`，则无需执行任何操作：只需获取尺寸即可。

但是，将 jquery-ui 容器设置`visibility:hidden`为不是一件好事，因为它可能会修改系统的整个行为。`display:none`jquery-ui-dialog 脚本中的某个地方可能有一个测试，使用它修改它`visibility`会破坏这个测试。此外，如果没有，则无法确保在 jquery-ui 的未来版本中不会有任何内容。

要使用第一个解决方案快速获取尺寸，请参阅[此答案](https://stackoverflow.com/a/1472385/646960)。

* * *

### Mootools-more Element.measure 解决方案：

Mootools 在 Mootools-more 的 Element.measure 中实现了显示/测量/隐藏技术。原始[代码](https://github.com/mootools/mootools-more/blob/master/Source/Element/Element.Measure.js)不适用于 jQuery，因为 Mootools 直接扩展元素而不是提供框架包装器，但您可以轻松地根据您的目的对其进行调整。

# java - 以下会导致死锁吗？

> ID：10967866
> 
> 赞同：2
> 
> 时间：2012-06-10T10:12:22.040
> 
> 标签：java, multithreading

假设当前线程持有锁，那么同一个线程调用

```
synchronize(lock) 
```

再次，会发生死锁吗？

依稀记得同一个线程的锁是可重入的，这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T10:18:54.747

从[文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)：

> 线程**无法**获得**另一个线程**拥有的锁。**但是线程可以获取它已经拥有的锁。**允许一个线程多次获取同一个锁可以实现重入同步。这描述了一种情况，同步代码直接或间接调用一个也包含同步代码的方法，并且两组代码都使用相同的锁。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T10:16:33.180

你没记错，*可重入*意味着同一个线程可以多次获得同一个锁，例如：

```
private final Object lock = new Object();

public void foo() {
    synchronized(lock) {
        bar();
    }
}

public void bar() {
    synchronized(lock) {
        //...
    }
} 
```

按预期工作，以及（这里`this`用作隐式锁定对象）：

```
public synchronized void foo() {
    bar();
}

public synchronized void bar() {
    //...
} 
```

并且不会发生死锁。当然，其他线程既不能访问也`foo()`不能`bar()`同时访问，因为锁已经被占用了。

底线：锁是由线程获取的，而不是由方法/代码块获取的。并且获取已由同一线程获得的锁是无操作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:42:55.180

每个`object`人都有一个`lock and a key`保护自己的`crucial data state`人，`every Class has a lock and a key`保护自己的人也一样`crucial static data state.`

`synchronized keyword on the atomic statements`（方法或原子化语句）

就像锁定对象一样。当线程访问该方法或原子语句时，它必须获得`key for that object`.

```
Once it obtains the key, 
its free to access this synchronized method/statement
or any other synchronized method/statement of that object.
Thats what reentrant is all about. 
```

但是没有其他线程能够访问这个对象的同步块，直到当前持有密钥的线程放开密钥。

# c# - 在持有该方法的对象的构造函数中调用实例方法是一种好习惯吗？

> ID：10967870
> 
> 赞同：1
> 
> 时间：2012-06-10T10:13:03.803
> 
> 标签：c#, .net, asp.net-mvc

例子：

```
public class EmailBusinessLogic
{
    #region Fields and Constructors
    SmtpClient smtp;
    Parameter prm;

    public EmailBusinessLogic()
    {
        prm = CostHelper.GetParameter();
        smtp = new SmtpClient(prm.EmailHost, prm.EmailPort);
        smtp.UseDefaultCredentials = prm.EmailUseDefaultCredentials;
        smtp.DeliveryMethod = GetDeliveryMethod(prm.EmailDeliveryMethod); //CALL TO METHOD DOWN BELOW, IS THIS A GOOD PRACTICE?
        smtp.EnableSsl = prm.EmailEnableSSL;
        smtp.Credentials = new NetworkCredential(prm.AppUserName, prm.AppPass, prm.AppNetworkDomain);

    }
    #endregion

    #region Instance Methods
    public SmtpDeliveryMethod GetDeliveryMethod(string name)
    {
        switch (name)
        {
            case "Network": return SmtpDeliveryMethod.Network;
            case "IISDirectory": return SmtpDeliveryMethod.PickupDirectoryFromIis;
            case "OtherDirectory": return SmtpDeliveryMethod.SpecifiedPickupDirectory;
            default: throw new NonExistentObjectException();
        }
    } 
```

我问这个是因为它是一个小悖论，我知道在将此类实例化为新对象时总是首先调用构造函数。而且我不想让它成为一个静态方法，因为这将创建一个不会被垃圾收集的静态实例。

如果我错了，请纠正我，非常欢迎有经验的程序员同行给出明确的答案。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T10:28:38.937

在构造函数中调用非静态方法是*可以*的——但你应该避免使用虚拟方法，因为如果方法被覆盖，*实际*方法将在尚未调用类型级构造函数的类型上调用——可能会导致问题。

调用静态方法会更可靠。我认为您*不*想要静态方法的原因有点混乱，不适用。绝对没有理由避免使用静态方法。静态方法不是作为“不会被垃圾收集的静态实例”上的实例方法实现的。没有静态方法的*实例*。

# node.js - 使用 CoffeeScript 和 Stylus 的 NodeJS/Express 工作流程

> ID：10967872
> 
> 赞同：0
> 
> 时间：2012-06-10T10:13:26.770
> 
> 标签：node.js, coffeescript, express, stylus

我决定将 ExpressJS 与 CoffeeScript 和 Stylus 一起使用。通常当我使用 CoffeeScript 时，我会`coffee --watch`为 Compass/SASS 做一些类似的事情。在这里，由于 CoffeeScript 和 Stylus 作为 NPM 包提供，我在想是否可以编写 CoffeeScript 和 Stylus 并在需要时让 Node/Express 编译它们？这样我就不再需要观察者了。

此外，当我使用创建快速应用程序`express -c stylus`时，`app.js`我会得到额外的：

```
app.use(require('stylus').middleware({ src: __dirname + '/public' })); 
```

它实际上是做什么的？它似乎没有编译我的 CSS？当我把

```
body
    background: red 
```

进入默认 style.styl 文件，重新启动服务器，它似乎没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:34:38.773

好的，因此有用于此确切目的的**[连接资产](https://github.com/TrevorBurnham/connect-assets)**。现在我仍在寻找服务器端的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:18:41.737

尝试设置

```
var stylus = require('stylus');

app.use(stylus.middleware({
 src: __dirname + '/public',
 compile: function(str, path) {
  return stylus(str)
    .set('filename', path)
    .set('compress', false)
    .set('warn', true);
 }
})); 
```

此编译功能不是必需的，但没有它，`styl`文件不会被编译..

# caching - 从 HTTP 标头获取响应

> ID：10967874
> 
> 赞同：1
> 
> 时间：2012-06-10T10:13:30.407
> 
> 标签：caching, vbscript, fetch

我正在尝试使用 VBScript 从我的服务器获取并显示文件的**“最后修改”**，它成功地获取了“最后修改”的详细信息，但是它获取的日期和时间是错误的

```
Set objWinHttp = CreateObject("WinHttp.WinHttpRequest.5.1")
Set environmentVars = WScript.CreateObject("WScript.Shell").Environment("Process")
tempFolder = environmentVars("TEMP")
strURL = "http://testme.decentsms.com/gwbasic.rar"
strMethod = "GET"
objWinHttp.Open strMethod, strURL, False
objWinHttp.Send
GetDataFromURL = objWinHttp.GetResponseHeader("Last-Modified")
MsgBox GetDataFromURL 
```

它获取以下修改后的详细信息，

**最后修改时间：格林威治标准时间 2012 年 5 月 21 日星期一 20:06:51**

而实际的文件详细信息是，

**格林威治标准时间 2012 年 5 月 22 日星期二 1:06:51**

我不知道这里有什么问题，？我无法解决问题，是因为缓存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:19:56.407

你的脚本弄混了一些东西，其实很简单，看这个例子，替换服务器并用你的路径共享。

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.GetFile("\\server\share\gwbasic.rar")
Wscript.Echo "Date created:       " & objFile.DateCreated
Wscript.Echo "Date last accessed: " & objFile.DateLastAccessed
Wscript.Echo "Date last modified: " & objFile.DateLastModified
Wscript.Echo "Drive:              " & objFile.Drive
Wscript.Echo "Name:               " & objFile.Name
Wscript.Echo "Parent folder:      " & objFile.ParentFolder
Wscript.Echo "Path:               " & objFile.Path
Wscript.Echo "Short name:         " & objFile.ShortName
Wscript.Echo "Short path:         " & objFile.ShortPath
Wscript.Echo "Size:               " & objFile.Size
Wscript.Echo "Type:               " & objFile.Type 
```

# wpf - 我在 WPF 中看不到标签的全部内容

> ID：10967875
> 
> 赞同：0
> 
> 时间：2012-06-10T10:13:55.393
> 
> 标签：wpf, label

![在此处输入图像描述](../Images/5d81b6f3be1b24466ed631fc77dec3b3.png)

我应该怎么做才能看到标签中的所有内容？我已经使用了 Textblock，但我仍然看不到它的全部内容......

我是 WPF 的新手，所以我仍然不知道该怎么处理这个问题。

这是我背后的代码：

```
 lblFExtension.Content = "Type of File: " + fInfo.Extension;
        lblFName.Content = "File Name: " + fInfo.Name;
        lblFLocation.Content = "File Location: " + fInfo.Directory;
        lblFSize.Content = "File Size: " + Convert.ToString(fileSizeConversion(fInfo.Length)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:01:22.353

```
<TextBlock Height="49" Margin="304,127,53,0"  TextWrapping="Wrap" Text="" VerticalAlignment="Top"/> 
```

调整你的 texblock 高度，然后给 TextWrapping="Wrap"。它会工作。在此之前你必须检查 texblock 边距

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:02:28.997

您可以使用 TextBlock 并像这样启用 TextWrapping：

```
<TextBlock TextWrapping="Wrap"><![CDATA[
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sed neque et tellus    tincidunt interdum. Morbi diam eros, imperdiet at, volutpat et, vestibulum quis, sem. Curabitur eu tellus vel felis molestie malesuada. Pellentesque nec lacus. Aenean fringilla nonummy sapien. Morbi eu odio at turpis cursus tristique. Integer nec lectus sit amet turpis bibendum feugiat. Cras posuere condimentum sapien. Vivamus accumsan, lacus at bibendum vehicula, magna elit consectetuer diam, ac luctus elit diam non leo. Vestibulum lobortis augue nec nisl. Fusce viverra purus consequat lacus. Nullam elementum mattis tellus. In hac habitasse platea dictumst. Aliquam ac velit sit amet urna placerat fringilla. Fusce mattis arcu eget urna. Sed lacus.]]></TextBlock> 
```

您可能需要重新考虑您的设计，因为当一个值中断并且它有一个标签时，它可能看起来很奇怪。因此，您可以考虑将标签（例如文件名：）和值拆分为两个定义并相应地安排它们。

# c++ - 使用 UTF8

> ID：10967878
> 
> 赞同：4
> 
> 时间：2012-06-10T10:14:13.310
> 
> 标签：c++, string, boost, locale, utf

使用 std::string 和 UTF8 似乎是一个相当复杂的问题，我找不到对做和不做的很好的解释。

如何在 C++ 中正确使用 UTF8？这是相当混乱的。

我找到`boost::locale`并设置了全局语言环境：

`std::locale::global(boost::locale::generator()(""));`

但是，在此之后我需要考虑什么，我什么时候会遇到问题？从文件中写入/读取是否会按预期工作，字符串比较等...？

到目前为止，我知道以下几点：

*   `std::regex`/`boost::regex`将不起作用，需要转换为宽字符串并使用 wregex。
*   `boost::algorithm::to_upper`不行，需要用`boost::locale::to_upper`

除此之外我还需要注意什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T10:42:23.283

欢迎来到 Unicode 的壮丽世界。

1.  抱歉，`wchar_t`是否定义了实现，通常在 Windows 上不足以容纳亚洲脚本的完整代码点（例如）
2.  您可以使用比较进行查找，但要对数据进行排序并将它们呈现给观众，您将需要一个[完整的排序算法](http://unicode.org/reports/tr10/)。例如，知道德语词典中的顺序与德语电话簿中的顺序不同（哭……）
3.  一般来说，我建议不要自己转换字符串。Boost.Locale 算法在包装[ICU](http://site.icu-project.org/)时应该可以正常工作，但要避免临时操作。
4.  如果将字符串拆分为多个部分，请不要在单词中间拆分。将一个字符一分为二太容易了（即使使用代码点感知算法，因为变音符号），或者甚至避免在两个字符之间拆分（因为某些文化将相邻字符的某些组合视为一个）。

# javascript - 返回 false 在 Opera 中不起作用

> ID：10967879
> 
> 赞同：0
> 
> 时间：2012-06-10T10:14:14.283
> 
> 标签：javascript, jquery, opera

如果您查看[http://www.zimmi.cz/edpp](http://www.zimmi.cz/edpp)并单击标记，则会弹出一个带有链接的信息窗口。如果单击该链接，则应打开新窗口。它在 Firefox 和 IE (7) 中运行良好，但在 Opera 中，新窗口和原始窗口都会加载新内容。我如何告诉 Opera 只打开一个新窗口并让原来的窗口保持不变？信息窗口中链接的 onclick 函数返回 false，但 Opera (11.64) 似乎忽略了它。谢谢你的帮助。

代码如下所示：

```
google.maps.event.addListener(marker,"click",function(ev) {
                        //var content = bod.nazev;
                        var content = "<a href='http://www.edpp.cz/zarizeni/velke-mezirici-oslava-' onclick='return !popUpWin(this, null, 1024, 742, true);'>Aktuální stav hladiny</a>";
                        infowindow.setContent(content);

                        infowindow.setMap(null);
                        infowindow.open(map,marker);
                        getCoords(ev.latLng);
                    }); 
```

PopupWin 打开新窗口，同时返回false，防止浏览器加载链接。我不认为这个函数有问题，我想我只是没有得到返回 false 的范围：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:17:19.063

如果您不想要事件的默认行为，则应通过调用`ev.preventDefault();`事件处理程序来防止默认行为，如下所示：

```
google.maps.event.addListener(marker,"click",function(ev) {
    ev.preventDefault();
    //var content = bod.nazev;
    var content = "<a href='http://www.edpp.cz/zarizeni/velke-mezirici-oslava-' onclick='return !popUpWin(this, null, 1024, 742, true);'>Aktuální stav hladiny</a>";
    infowindow.setContent(content);

    infowindow.setMap(null);
    infowindow.open(map,marker);
    getCoords(ev.latLng);
}); 
```

有关MDN 的更多[信息`preventDefault`](https://developer.mozilla.org/en/DOM/event.preventDefault)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:40:26.807

您应该检查 window.open 和其他弹出窗口属性的兼容性

检查这个链接[阅读这篇文章](http://www.quirksmode.org/js/popup.html#t00)

如果您想与所有浏览器完全兼容，您**应该阅读更多内容，而不仅仅是编程**

# java - 如何在 Java 中使用 HttpURLConnection 和 CookieManager 为每个连接使用不同的 cookie

> ID：10967883
> 
> 赞同：9
> 
> 时间：2012-06-10T10:15:09.967
> 
> 标签：java, cookies, httpurlconnection, cookiestore

我需要使用 HttpURLConnection 同时从多个线程连接到一个网站，但每个连接使用不同的 cookie。由于 Java 仅支持设置全局 CookieManager，因此我实现了以下 hack。

`CookieHandler.setDefault(new CookieManager())`我没有调用 ，而是实现了一个自定义，它为每个线程`CookieHandler`使用不同的实例，每次请求后都会清除该实例。`CookieStore`

我创建了`SessionCookieManager`基于[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/CookieManager.java)调用的类`CookieManager`。

成员变量已`cookieJar`被删除，其用法已替换为`getCookieStore()`.

添加了以下代码：

```
public class SessionCookieManager extends CookieHandler {
    private final static SessionCookieManager ms_instance = new SessionCookieManager();

    public static SessionCookieManager getInstance() {
        return ms_instance;
    }

    private final static ThreadLocal<CookieStore> ms_cookieJars = new ThreadLocal<CookieStore>() {
        @Override
        protected synchronized CookieStore initialValue() { return new sun.net.www.protocol.http.InMemoryCookieStore(); }
    };

    public void clear() {
        getCookieStore().removeAll();
    }

    public CookieStore getCookieStore() {
        return ms_cookieJars.get();
    } 
```

在第一次请求之前，自定义`CookieManager`设置为全局默认值`CookieHandler`：

```
CookieHandler.setDefault(SessionCookieManager.getInstance()); 
```

每次请求后，当前线程`CookieStore`都被清除：

```
try {
    ...
} finally {
    SessionCookieManager.getInstance().clear();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-19T07:32:57.817

一种解决方法是直接使用 Cookie 标头而不是发送 cookie。请参阅此处的 cookie 标头：[https](https://msdn.microsoft.com/en-us/library/windows/desktop/aa384321(v=vs.85).aspx) ://msdn.microsoft.com/en-us/library/windows/desktop/aa384321(v=vs.85).aspx ，您可以更改每个呼叫。

```
Cookie: <name>=<value> [;<name>=<value>]... 
```

# android - 通过单击通知栏中显示的状态为用户开发快捷方式以返回活动

> ID：10967891
> 
> 赞同：1
> 
> 时间：2012-06-10T10:17:00.480
> 
> 标签：android, notifications, android-asynctask, shortcuts

目前，我正在尝试使用 AsyncTask 解析在线 XML 文件并将数据插入数据库。

当执行 AsyncTask 时，我将通过 ProgressDialog 以及通知栏通知用户完成百分比。

**由于用户在更新过程中可能会按下home键并访问其他应用程序，所以我想开发一个这样的快捷方式：** 当用户点击通知栏中显示的状态时，他们可以直接回到DataBaseUpdateService。

以下是我尝试实现但未能实现的代码，您能给我建议如何修改它吗？

***数据库更新服务***

```
 public class DataBaseUpdateService extends Activity {

    Updatetask Task; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        Task = new Updatetask(this.getApplicationContext());
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
    }

    @Override
    public void  onPause()
    {super.onPause();}

    @Override
    public void onResume()
    {super.onResume();
    if(Task.getStatus() == AsyncTask.Status.PENDING){Task.execute();}

    }

    public class Updatetask extends AsyncTask<Void, Integer, Void> 
    {ProgressDialog dialog;  

    private NotificationHelper mNotificationHelper;
    private Context context;

        public Updatetask_hymns(Context context){
            this.context = context;
            mNotificationHelper = new NotificationHelper(context);
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            mNotificationHelper.createNotification();
            dialog =new ProgressDialog(DataBaseUpdateService.this);
            dialog.setTitle("Updating DB...");
            dialog.setMax(100); 
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setIndeterminate(false);
            dialog.setCancelable(false);
            dialog.show();
        }

        @Override
        protected Void doInBackground(Void...unsed) {

***Code to parse xml and put in arraylist***

for(itemInsert=0;itemInsert<itemCount;itemInsert++)
{ ***insert data to database***
    if(itemCount > 0) { publishProgress((int) ((itemInsert / (float) itemCount) * 100));}
    }

            return null;}

        @Override
        protected void onPostExecute(Void unused) {
            mNotificationHelper.completed();            
            dialog.dismiss();
        }

        protected void onProgressUpdate(Integer... values) {
            mNotificationHelper.progressUpdate(values[0]);
            dialog.setProgress(values[0]);           
        }
    }

} 
```

***通知助手***

```
public class NotificationHelper {
    private Context mContext;  
    private Notification mNotification;
    private NotificationManager mNotificationManager;
    private PendingIntent mContentIntent;

    private CharSequence mContentTitle;

    private int NOTIFICATION_ID = 1;

    public NotificationHelper(Context context)
    {
        mContext = context;
    }

    /**
     * Put the notification into the status bar
     */
    public void createNotification() {
        //get the notification manager
        if(mNotificationManager==null){
        mNotificationManager = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);}

        //create the notification
        int icon = android.R.drawable.stat_sys_download;
        CharSequence tickerText = mContext.getString(R.string.database_update_main_action); //Initial text that appears in the status bar
        long when = System.currentTimeMillis();

        mNotification = new Notification(icon, tickerText, when);

        //create the content which is shown in the notification pulldown
        mContentTitle = mContext.getString(R.string.database_update_title); //Full title of the notification in the pull down
        CharSequence contentTitle = "My notification";      
        CharSequence contentText = "0% complete"; //Text of the notification in the pull down

        Intent notificationIntent = new Intent(mContext,DataBaseUpdateService.class);
        notificationIntent.addFlags(Notification.FLAG_ONGOING_EVENT);
        mContentIntent = PendingIntent.getActivity(mContext, 0, notificationIntent, 0);

        //add the additional content and intent to the notification
        mNotification.setLatestEventInfo(mContext, contentTitle, contentText, mContentIntent);

        //make this notification appear in the 'Ongoing events' section
        mNotification.flags = Notification.FLAG_ONGOING_EVENT;

        //show the notification
        mNotificationManager.notify(NOTIFICATION_ID, mNotification);
    }

    /**
     * Receives progress updates from the background task and updates the status bar notification appropriately
     * @param percentageComplete
     */
    public void progressUpdate(int percentageComplete) {
        //build up the new status message
        CharSequence contentText = percentageComplete + "% complete";
        //publish it to the status bar
        mNotification.setLatestEventInfo(mContext, mContentTitle, contentText, mContentIntent);
        mNotificationManager.notify(NOTIFICATION_ID, mNotification);
    }

    /**
     * called when the background task is complete, this removes the notification from the status bar.
     * We could also use this to add a new ‘task complete’ notification
     */
    public void completed()    {
        //remove the notification from the status bar
        mNotificationManager.cancel(NOTIFICATION_ID);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:47:38.063

维护一个标志以找出您的活动是在后台还是前台，然后如果它在后台显示通知并在单击它时启动您的活动的挂起。

```
if(inBackGround){
    Intent contentIntent = new Intent(this,DataBaseUpdateService.class);
    PendingIntent contentPendingIntent = PendingIntent.getActivity(
                    this, 0, contentIntent,
                    PendingIntent.FLAG_UPDATE_CURRENT);

    PendingIntent.getBroadcast(this, 0, contentIntent , PendingIntent.FLAG_UPDATE_CURRENT);
    String notificationTitle ="sfdf";
    String notificationText = "dsf";
    Notification notification = new Notification(
            notificationIcon, notificationTitle, System.currentTimeMillis());
    notification.setLatestEventInfo(this, notificationTitle, notificationText, contentIntent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    // Trigger the notification.
    mNotificationManager.notify(0, notification);
} 
```

# azure - 阅读 Azure (1.7) 中 vsdiagnostics blob 中的内容

> ID：10967898
> 
> 赞同：0
> 
> 时间：2012-06-10T10:19:22.390
> 
> 标签：azure, azure-blob-storage

我已在我的一个 Worker 角色中启用了诊断并将其发布到 Azure。创建了一个名为“vsdiagnostics”的新 blob 容器，其中包含两个二进制文件。我假设这些文件包含我的 Trace 语句的输出，但我无法打开这些文件，因为我不知道它们的格式。

我在 www.windowsazure.com 上没有找到任何关于它的信息，而且他们推荐的大多数工具都非常过时。我已安装 Cerebrata 的 Azure 诊断管理器，但无法加载跟踪日志。

如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:36:28.247

当您选择查看 Intellitrace 日志时，它们似乎已加载到 vsdiagnostics blob，然后再传输到 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:13:17.047

大多数情况下，Visual Studio 直接与您的 Windows Azure 应用程序一起使用，无论是部署还是故障排除，它都会在您的 Azure 存储中创建一个容器，并使用此容器在您的 Azure 实例和 Visual Studio 之间获取/放入数据实例。大多数情况下，当您看到容器名称以 VS* 开头时，即 VSdeploy 或 VSDiagnostics，您可以认为它与 Visual Studio 相关。

**直接从 Visual Studio 部署应用程序时使用**VSdeloy容器。**首先，您的 cspkg 从桌面传输到此容器，然后传输到 RDFE。**

 ****VSDiagnostics**容器用于将 Intellitrace 数据从 Azure 实例获取到 Visual Studio 实例，当博客下载到桌面时，它在 VS 中显示为 Intellitrace 日志。**

# mysql - 更新查询以更改值

> ID：10967904
> 
> 赞同：0
> 
> 时间：2012-06-10T10:20:08.720
> 
> 标签：mysql, sql

我有一个表，其列 col_name 的数据类型为 tinyint，它只能存储 0 或 1。现在我想运行更新查询以将 col_name 值从 0 更改为 1，如果它包含 0，反之亦然。建议不同的想法？我当前的查询不起作用但没有任何错误是

```
UPDATE table SET col_name=case when col_name=0 then col_name=1 else col_name=0 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:41:47.967

```
UPDATE the_table 
SET col_name = 1 - col_name
WHERE 1=1
    ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:23:20.670

尝试这个：

```
UPDATE table 
SET col_name = 
    case when col_name = 0 
         then 1  
         else  0 
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:21:28.103

```
UPDATE table SET col_name=case when col_name=0 then 1 else 0 end 
```

你也可以做

```
UPDATE table SET CASE col_name WHEN 0 THEN 1 ELSE 0 END CASE 
```

您只需要指定数字

[案例陈述参考](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:58:58.683

尝试使用

```
update updation
set digits = decode(digits, 1, 0, 0, 1, digits) 
```

其中 update 是表的名称，digits 是列的名称

# mysql - 如何在 MYSQL 中更改用户的 GRANTS？

> ID：10967905
> 
> 赞同：1
> 
> 时间：2012-06-10T10:20:16.853
> 
> 标签：mysql, database

```
> show grants for user_readonly;
+------------------------------------------------------------------------------------------------------------+
| Grants for user_readonly@%                                                                                   |
+------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'user_readonly'@'%' IDENTIFIED BY PASSWORD '*F60F5EBDA2568D53C7CBFD0297F1BAA324B06AABD' |
| GRANT ALL PRIVILEGES ON `mydb`.* TO 'user_readonly'@'%'                                                      |
+------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

目前， user_readonly 对所有内容都有授权。我怎样才能改变这个，让他只能阅读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:22:30.873

[REVOKE](http://dev.mysql.com/doc/refman/5.0/en/revoke.html)与授予相反。最简单的方法是`REVOKE ALL`选择性地重新授予用户实际需要的权限。而且一般来说，`GRANT ALL`应该谨慎使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:30:21.793

我相信应该这样做，因此用户 user_readonly 将只能读取（即仅选择）。

```
GRANT SELECT ON mydb.* TO user_readonly @'host' IDENTIFIED BY PASSWORD '*F60F5EBDA2568D53C7CBFD0297F1BAA324B06AABD'; 
```

然后

```
FLUSH PRIVILEGES; 
```

你可能需要把这个词改成 `'host'` 更适合你的词。

[MySQL 文档](http://dev.mysql.com/tech-resources/articles/mysql_intro.html#SECTION0006100000)

# iphone - UIAlertViewDelegate 的 clickedButtonAtIndex 后崩溃，消息 [MPMoviePlayerViewController isKindOfClass:]: 消息发送到已释放实例

> ID：10967912
> 
> 赞同：3
> 
> 时间：2012-06-10T10:21:13.770
> 
> 标签：iphone, ios, xcode, mpmovieplayercontroller, uialertview

我只是想解雇`UIAlertView`，但我不能用一个奇怪的错误几天......

点击取消按钮后`UIAlertView`，下面的代码工作。

```
- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
{
    [alertView dismissWithClickedButtonIndex:buttonIndex animated:YES];
} 
```

但是在通过这些行之后，它会导致崩溃并显示以下消息：

```
[MPMoviePlayerViewController isKindOfClass:]: message sent to deallocated instance 0x27f590 
```

在同样的观点上，我嵌入

```
MPMoviePlayerViewController.moviePlayer.view
[self.view addSubview:vc.moviePlayer.view]; 
```

有人知道发生了什么吗？我使用ARC，iOS5.1。如果您需要更多信息，我会添加它们。

先感谢您。

**更多信息：**

我在代码中的所有方法上都设置了断点。我确保它在`clickedButtonAtIndex`...之后崩溃

调用 UIAlertView 显示的代码是

```
-(void)applicationDidBecomeActive:(NSNotification *)notification
{
    self.alert = hoge; // set delegate = self
    [self.alert show];
} 
```

打电话给他们之后，就打电话了`viewDidAppear`。有嵌入代码，`vc.moviePlayer.view`如

```
MPMoviePlayerViewController *vc;
vc = [[MPMoviePlayerViewController alloc] initWithContentURL:hogeURL];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(finishPreload:)
                                             name:MPMediaPlaybackIsPreparedToPlayDidChangeNotification
                                           object:vc];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(finishPlayback:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:vc];

vc.view.frame = CGRectMake( 0, 0, 320, 440);

vc.moviePlayer.allowsAirPlay = YES;
vc.moviePlayer.shouldAutoplay = NO;
vc.moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
vc.moviePlayer.useApplicationAudioSession = NO;

[vc.moviePlayer.view setTag:310];

[self.view addSubview:vc.moviePlayer.view]; 
```

我的应用有 3 个标签，其中 2 个是 embed `MPMoviePlayerViewController.moviePlayer.view`。在其他选项卡的控制器中调用的方法是`viewWillDisappear`且`viewDidDisappear`唯一的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:37:38.320

在我看来，您的`MPMoviePlayerController`实例在`viewDidAppear`. 我认为您应该将其设置`vc`为 View Controller 的属性或实例变量，以便它在 View Controller 的整个生命周期中持续存在。

# java - 在 Android 中从 PHP 获取数据

> ID：10967915
> 
> 赞同：0
> 
> 时间：2012-06-10T10:21:41.743
> 
> 标签：java, android

我已经看过几个教程，但它们都比防止主线程中的网络调用的 Android 更新更老。我尝试将调用它的代码移动到 RetrieveFeedTask，但这对我没有帮助，因为我无法在我的主线程中获取数据。这是我所做的：

```
class RetrieveFeedTask extends AsyncTask <String, Void, String>
{

    private Exception exception;

    private String doInBackground()
    {
        String returnString = "sample";

         ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        //http post
        try{
             HttpClient httpclient = new DefaultHttpClient();
             HttpPost httppost = new HttpPost("http://localhost/sample_array.php");
             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             HttpResponse response = httpclient.execute(httppost);
             HttpEntity entity = response.getEntity();
             is = entity.getContent();
             }catch(Exception e){
                 Log.e("log_tag", "Error in http connection"+e.toString());
            }
        //convert response to string
        try{
              BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
               sb = new StringBuilder();
               sb.append(reader.readLine() + "\n");

               String line="0";
               while ((line = reader.readLine()) != null) {
                              sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
                }catch(Exception e){
                      Log.e("log_tag", "Error converting result "+e.toString());
                }
        //paring data
        int step_num;
        String description;
        try{
              jArray = new JSONArray(result);
              JSONObject json_data=null;
              for(int i=0;i<jArray.length();i++){
                     json_data = jArray.getJSONObject(i);
                     step_num=json_data.getInt("step_num");
                     description=json_data.getString("description");
                 }
              }
              catch(JSONException e1){
                  Toast.makeText(getBaseContext(), "No step found" ,Toast.LENGTH_LONG).show();
              } catch (ParseException e1) {
                    e1.printStackTrace();
            }

        //System.out.println(result);
        return result;
    }

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

然后在主线程中，我这样做了：

```
AsyncTask<String, Void, String> returnString = new RetrieveFeedTask().execute(); 
```

那么如何让这些信息在主线程中使用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T10:45:08.260

你几乎可以接受，但有两个错误：

1.  您正在**重载**永远无法调用的 doInBackground 方法。
2.  在“当前”空的 doInBackground 实现中实现你的东西。

如果您想将数据恢复到主线程，您可以：

1.  使用[runOnUiThread](https://stackoverflow.com/questions/901239/android-using-runonuithread-to-do-ui-changes-from-a-thread)方法
2.  在您的活动中创建一个[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)，它将扩展您的 asynctask 并覆盖[onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)方法。（在ui线程上运行）

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:33:00.573

您可以创建一个以 JSON 格式返回所需数据的 Web 服务。把它放到你的服务器上。现在使用 android 调用该网络服务。这样你就可以从 PHP 获取数据到 android

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T11:01:02.023

在空的 doInBackground 块中实现您当前的代码

```
 @Override
protected String doInBackground(String... arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

从上述方法返回的字符串，将在**onPostExecute**方法中接收，您也需要在代码中实现，目前实际上缺少。

# actionscript-3 - Flash Builder Rss 提要有效，但必须将每篇文章链接到其原始网页。如何？

> ID：10967917
> 
> 赞同：2
> 
> 时间：2012-06-10T10:21:54.310
> 
> 标签：actionscript-3, apache-flex, rss, flash-builder, flex4.5

下面是我的 Flash Builder 4.5 项目中提供 RSS 提要的代码。提要显示正确，但我在链接每篇新闻文章时遇到了一些问题。因此，当您单击文章标题时，它应该链接到相应的网页。我已经能够提取每篇文章的 url（数据网格中的第 3 列），并且我还创建了一个基本函数，当您单击数据网格时链接到谷歌。我需要的是，当您单击一行时，您会转到相应的网页。欢迎任何帮助！

```
<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx"
                creationComplete="runningrssfeedstart(event)">
<fx:Declarations>
    <s:HTTPService id="runningrssfeed"
                   url="{rss_request}"
                   result="runningrssfeed_resultHandler(event)"
                   fault="runningrssfeed_faultHandler(event)"/>

    <s:ArrayCollection id="myAc"/>
</fx:Declarations>

<fx:Script>
    <![CDATA[

        //imported classes
        import mx.collections.XMLListCollection;
        import mx.controls.Alert;
        import mx.core.mx_internal;
        import mx.events.FlexEvent;
        import mx.formatters.DateBase;
        import mx.rpc.events.FaultEvent;
        import mx.rpc.events.ResultEvent;
        import mx.utils.object_proxy;

        [Bindable]
        public var rss_request:String;

        //parameters voor rss-feed + opdracht de httpservice te starten
        public function runningrssfeedstart(event:FlexEvent):void
        {
            rss_request = 'http://www.coolrunning.com/engine/affiliate/rssLatest.rss';
            runningrssfeed.send();
        }

        //Als rss werkt, neem dan info van volgende pad
        protected function runningrssfeed_resultHandler(event:ResultEvent):void
        {
            myAc = event.result.rss.channel.item;
        }

        //Als rss functie mislukt, toon dan alert mat fault string
        protected function runningrssfeed_faultHandler(event:FaultEvent):void
        {
            Alert.show(event.fault.faultString);
        }

        //opent site van nieuwsbericht hoe google veranderen in juiste url?
        public function openRss(event:MouseEvent):void
        {
            navigateToURL(new URLRequest("http://www.google.com"), "_blank");
        }

    ]]>
</fx:Script>
<mx:DataGrid click="openRss(event)" left="105" top="45" width="450" height="380" dataProvider="{myAc}" headerStyleName="headerBold">
    <mx:columns>
        <mx:DataGridColumn id="rssTitel" width="320" headerText="Artikel" dataField="title"/>
        <mx:DataGridColumn headerText="Datum" dataField="pubDate"/>
        <mx:DataGridColumn headerText="url" dataField="link"/>
    </mx:columns>
</mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:18:33.147

如果您使用 Spark [DataGrid](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGrid.html)而不是 mx DataGrid（我想不出为什么不应该这样做），您可以像这样简单地使用它的“ [gridClick](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGrid.html#event%3agridClick) ”事件处理程序：

```
<s:DataGrid dataProvider="{dp}" gridClick="openRssAt(event.rowIndex)">      
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="title" />
            <s:GridColumn dataField="pubDate" />
            <s:GridColumn dataField="link" />
        </s:ArrayList>
    </s:columns>
</s:DataGrid>

public function openRssAt(index:int):void {
    var url:String = dp.getItemAt(index).link;
    navigateToURL(new URLRequest(url), "_blank");
} 
```

但是，如果您希望坚持使用 mx DataGrid，您可以`itemClick`以完全相同的方式使用事件处理程序：

```
<mx:DataGrid dataProvider="{dp}" itemClick="openRssAt(event.rowIndex)">
    <mx:columns>
        <mx:DataGridColumn dataField="title"/>
        <mx:DataGridColumn dataField="pubDate"/>
        <mx:DataGridColumn dataField="link"/>
    </mx:columns>
</mx:DataGrid> 
```

# php - 如何有效地替换 PDO 中的 (mysql_result(mysql_query())？

> ID：10967920
> 
> 赞同：0
> 
> 时间：2012-06-10T10:22:38.113
> 
> 标签：php, mysql, pdo

由于我使用 PDO 而不是命令重写 web 的过程几乎完成了，`mysql_*`我现在正在测试我更改的函数。而且似乎我更改的函数`mysql_result(mysql_query()`总是返回true，这是为什么呢？让我们看看原始代码和更改代码：

```
if (mysql_result(mysql_query("SELECT COUNT(*) FROM account WHERE id='".$_SESSION["user_id"]."' AND online=1"), 0)>0)
{
  return true; 
}
else
  return false; 
```

并在此处更改代码：

```
$stmt = $db_login->prepare("SELECT COUNT(*) FROM account WHERE id=:id AND online=1");
$stmt->bindValue(':id', $_SESSION["user_id"], PDO::PARAM_INT);
$stmt->execute();
$results_login = $stmt->fetch(PDO::FETCH_ASSOC);
$rows = count($results_login);
if ($rows > 0)
{
  return true; 
}
else
  return false; 
```

那么问题是为什么即使列在线= 0，它也总是返回true？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:30:55.247

`$stmt->fetch`从结果集中获取*一行。*你从中得到的是一个包含所有选定列的数组，看起来像这样：

```
array(
    'COUNT(*)' => 42
) 
```

该数组上的 A`count()`将始终导致`1`.

您需要检查提取行的内容：

```
if ($result_login['COUNT(*)'] > 0) 
```

最好将此列别名为更好的名称：

```
SELECT COUNT(*) AS `count` ... 
```

然后：

```
if ($result_login['count'] > 0) 
```

# entity-framework - 将 EF 查询与 BL 解耦 - 扩展方法 VS Class-Per-Query

> ID：10967921
> 
> 赞同：7
> 
> 时间：2012-06-10T10:22:41.547
> 
> 标签：entity-framework, unit-testing, architecture, extension-methods

我已经阅读了数十篇关于试图在业务逻辑中模拟\假 EF 的优点和缺点的帖子。我还没有决定要做什么——但我知道的一件事是——我必须将查询与业务逻辑分开。在[这篇文章](https://stackoverflow.com/questions/6950433/reusable-querying-in-entity-framework-without-repository-how)中，我看到 Ladislav 回答说有两种好方法：

> 1.  让它们在原处，并使用自定义扩展方法、查询视图、映射数据库视图或自定义定义查询来定义可重用部分。
> 2.  将每个查询公开为某个单独类的方法。该方法不得公开 IQueryable 并且不得接受 Expression 作为参数 = 整个查询逻辑必须包含在该方法中。但这将使您的课程涵盖相关方法，就像存储库一样（唯一可以模拟或伪造的方法）。此实现接近于存储过程使用的实现。

1.  您认为哪种方法更好，为什么？
2.  将查询放在自己的位置有***什么缺点吗？***（可能会从 EF 或类似的东西中丢失一些功能）
3.  我是否必须封装最简单的查询，例如：

    ```
    using (MyDbContext entities = new MyDbContext)
    {
        User user = entities.Users.Find(userId);  // ENCAPSULATE THIS ?

        // Some BL Code here
    } 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T11:16:22.620

所以我想你的主要观点是你的代码的可测试性，不是吗？在这种情况下，您应该首先计算要测试的方法的职责，而不是使用单一职责模式重构代码。

您的示例代码至少有三个职责：

*   创建对象是一种责任——上下文是一个对象。此外，它是您不想在单元测试中使用的对象，因此您必须将其创建移到其他地方。
*   执行查询是一种责任。此外，这是您希望在单元测试中避免的责任。
*   做一些业务逻辑是一种责任

为了简化测试，您应该重构代码并将这些职责划分为单独的方法。

```
public class MyBLClass()
{
    public void MyBLMethod(int userId)
    {
        using (IMyContext entities = GetContext())
        {
            User user = GetUserFromDb(entities, userId);

            // Some BL Code here
        }
    }

    protected virtual IMyContext GetContext()
    {
        return new MyDbContext();
    }

    protected virtual User GetUserFromDb(IMyDbContext entities, int userId)
    {
        return entities.Users.Find(userId);
    }
} 
```

现在单元测试业务逻辑应该是小菜一碟，因为您的单元测试可以继承您的类和伪造的上下文工厂方法和查询执行方法，并完全独立于 EF。

```
// NUnit unit test
[TestFixture]
public class MyBLClassTest : MyBLClass
{
    private class FakeContext : IMyContext
    {
        // Create just empty implementation of context interface
    }

    private User _testUser;

    [Test]
    public void MyBLMethod_DoSomething() 
    {
        // Test setup
        int id = 10;
        _testUser = new User 
            { 
                Id = id, 
                // rest is your expected test data - that  is what faking is about
                // faked method returns simply data your test method expects
            };

        // Execution of method under test
        MyBLMethod(id);

        // Test validation
        // Assert something you expect to happen on _testUser instance 
        // inside MyBLMethod
    }

    protected override IMyContext GetContext()
    {
        return new FakeContext();
    }

    protected override User GetUserFromDb(IMyContext context, int userId)
    {
        return _testUser.Id == userId ? _testUser : null;
    }
} 
```

随着您添加更多方法和应用程序的增长，您将重构那些查询执行方法和上下文工厂方法以分离类以遵循对类的单一责任 - 您将获得上下文工厂和一些查询提供程序或在某些情况下存储库（但存储库永远不会在其任何方法中返回`IQueryable`或获取`Expression`参数）。这也将允许您遵循 DRY 原则，您的上下文创建和最常用的查询将只在一个中心位置定义一次。

所以最后你可以有这样的东西：

```
public class MyBLClass()
{
    private IContextFactory _contextFactory;
    private IUserQueryProvider _userProvider;

    public MyBLClass(IContextFactory contextFactory, IUserQueryProvider userProvider)
    {
        _contextFactory = contextFactory;
        _userProvider = userProvider;
    }

    public void MyBLMethod(int userId)
    {
        using (IMyContext entities = _contextFactory.GetContext())
        {
            User user = _userProvider.GetSingle(entities, userId);

            // Some BL Code here
        }
    }
} 
```

这些接口的外观如下：

```
public interface IContextFactory 
{
    IMyContext GetContext();
}

public class MyContextFactory : IContextFactory
{
    public IMyContext GetContext()
    {
        // Here belongs any logic necessary to create context
        // If you for example want to cache context per HTTP request
        // you can implement logic here.
        return new MyDbContext();
    } 
} 
```

和

```
public interface IUserQueryProvider
{
    User GetUser(int userId);

    // Any other reusable queries for user entities
    // Non of queries returns IQueryable or accepts Expression as parameter
    // For example: IEnumerable<User> GetActiveUsers();
}

public class MyUserQueryProvider : IUserQueryProvider
{
    public User GetUser(IMyContext context, int userId)
    {
        return context.Users.Find(userId);
    }

    // Implementation of other queries

    // Only inside query implementations you can use extension methods on IQueryable
} 
```

您的测试现在将只对上下文工厂和查询提供程序使用假货。

```
// NUnit + Moq unit test
[TestFixture]
public class MyBLClassTest
{
    private class FakeContext : IMyContext
    {
        // Create just empty implementation of context interface 
    }

    [Test]
    public void MyBLMethod_DoSomething() 
    {
        // Test setup
        int id = 10;
        var user = new User 
            { 
                Id = id, 
                // rest is your expected test data - that  is what faking is about
                // faked method returns simply data your test method expects
            };

        var contextFactory = new Mock<IContextFactory>();
        contextFactory.Setup(f => f.GetContext()).Returns(new FakeContext());

        var queryProvider = new Mock<IUserQueryProvider>();
        queryProvider.Setup(f => f.GetUser(It.IsAny<IContextFactory>(), id)).Returns(user);

        // Execution of method under test
        var myBLClass = new MyBLClass(contextFactory.Object, queryProvider.Object);
        myBLClass.MyBLMethod(id);

        // Test validation
        // Assert something you expect to happen on user instance 
        // inside MyBLMethod
    }
} 
```

如果存储库在将其注入业务类之前应该引用传递给其构造函数的上下文，则情况会有所不同。您的业​​务类仍然可以定义一些从未在任何其他类中使用过的查询——这些查询很可能是其逻辑的一部分。您还可以使用扩展方法来定义查询的某些可重用部分，但您必须始终在要进行单元测试的核心业务逻辑之外使用这些扩展方法（在查询执行方法中或在查询提供程序/存储库中）。这将允许您轻松伪造查询提供程序或查询执行方法。

我看到了[你之前的问题](https://stackoverflow.com/questions/10940873/unit-testing-ef-how-to-extract-ef-code-out-from-bl)，并考虑写一篇关于该主题的博客文章，但我对使用 EF 进行测试的观点的核心在于这个答案。

**编辑：**

存储库是与您的原始问题无关的不同主题。特定存储库仍然是有效模式。我们不反对存储库，[我们反对通用存储库](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point/5626884#5626884)，因为它们不提供任何附加功能并且不解决任何问题。

问题是存储库本身并不能解决任何问题。必须一起使用三种模式来形成适当的抽象：存储库、工作单元和规范。这三个都在 EF 中可用：DbSet / ObjectSet 作为存储库，DbContext / ObjectContext 作为工作单元，Linq to Entities 作为规范。到处提到的通用存储库的自定义实现的主要问题是它们仅用自定义实现替换存储库和工作单元，但仍然依赖于原始规范 => 抽象是不完整的，并且在伪造存储库的行为方式相同的测试中泄漏伪造的集合/上下文。

我的查询提供程序的主要缺点是您需要执行的任何查询的显式方法。在存储库的情况下，您将没有这样的方法，您将只有少数方法接受规范（但这些规范应该在 DRY 原则中定义），这些方法将构建查询过滤条件、排序等。

```
public interface IUserRepository
{
    User Find(int userId);
    IEnumerable<User> FindAll(ISpecification spec);
} 
```

这个话题的讨论远远超出了这个问题的范围，它需要你做一些自学。

顺便提一句。模拟和伪造具有不同的目的 - 如果您需要从依赖项中的方法获取测试数据，则伪造调用；如果需要断言依赖项上的方法是使用预期参数调用的，则模拟调用。

# android - 当我运行 Monkey Talk 时，我没有找到任何虚拟机。如何解决这个问题？

> ID：10967922
> 
> 赞同：0
> 
> 时间：2012-06-10T10:22:53.660
> 
> 标签：android

我是一名测试工程师。我是猴子谈话的新手。我已经从该站点下载了 Monkey Talk 并解压缩了 zip 文件。

我运行了 MonkeyTalk IDE。我得到没有找到虚拟机.... Javaw.exe![在此处输入图像描述](../Images/1544e1ceca621ca582e87a77db4e2164.png)

如何解决这个问题？

谢谢钱德拉..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:47:24.570

您是否在您的应用程序上安装了 MonkeyTalk 代理？如果没有，请查看：[http ://www.gorillalogic.com/testing-tools/monkeytalk/documentation/monkeytalk-quick-start](http://www.gorillalogic.com/testing-tools/monkeytalk/documentation/monkeytalk-quick-start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:39:20.777

由于您没有源代码，请尝试使用 Robotium。这是他们页面的链接：[http ://code.google.com/p/robotium/wiki/QuestionsAndAnswers](http://code.google.com/p/robotium/wiki/QuestionsAndAnswers)

这应该让你朝着正确的方向前进。希望这可以帮助！祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T11:43:27.377

Hii 问题是由于安装 JDK 期间设置的路径所致。请确保路径设置正确。我在尝试在系统上安装 ANT 时遇到了同样的错误，修复环境变量可以解决这个问题。

# css - IE9 剪辑绝对边界半径的固定子项

> ID：10967930
> 
> 赞同：1
> 
> 时间：2012-06-10T10:25:03.983
> 
> 标签：css, internet-explorer-9

这是一个在 Internet Explorer 9 中唯一中断的 JSFiddle。我希望有人已经看到并知道如何解决它。

[http://fiddle.jshell.net/se9Kc/1/](http://fiddle.jshell.net/se9Kc/1/)

请注意，滚动区域顶部边缘装饰或“推子”在 IE9 中被剪裁在右侧。

我知道此时质疑“固定”的使用是很自然的。整页有一个带有绝对定位标题的嵌入滚动表，与搜索条件相邻。“推子”被锚定到其非滚动（但仍然流畅生成）的原点，位置：固定。

有缺陷的算法似乎是这样的：

1.  正确生成固定元素的可见性掩码和内容
2.  根据要求正确定位元素内容
3.  将元素可见性遮罩错误地定位在左边缘

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:56:29.183

在做了一些测试之后，似乎使用 javascript 来处理特定的 css 属性使其能够正常运行。

消除：

```
position: fixed; 
```

并在页面上的某处添加：

```
<script>    
    $(.fadeTopGradient).css({'position':'fixed'})
</script> 
```

如果您想单独使用 css 完成此操作，我不能 100% 确定要告诉您什么。虽然我确实看到了一个关于 position:fixed in IE9 的问题，之前在这里问过：[position:fixed break in IE9](https://stackoverflow.com/questions/7472491/positionfixed-breaks-in-ie9)

我希望这有帮助。

# ruby-on-rails - Rails - 如何验证 f.select 字段？

> ID：10967931
> 
> 赞同：0
> 
> 时间：2012-06-10T10:25:05.740
> 
> 标签：ruby-on-rails, validation, select

我有简单`select`的领域

```
f.select(:name, [["- Choose Name -", 0]] + People.all.map{ |c| [c.name, c.id] }) 
```

如果选择了某个名称，我该如何验证？我试过这个规则：

```
 validates :name, :presence => {:message => 'Name cannot be blank.'} 
```

但是，如果我在不选择名称的情况下发送表单，则会发送表单...

所以我想问你，我怎样才能验证选择字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T10:36:29.083

在您的示例中，人们*正在*选择一个名称，他们正在选择`- Choose Name -`带有 id的名称`0`。

如果您想给出一个与实际选择不对应的选项，那么您有两个选择：

```
f.select(:name, People.all.map{ |c| [c.name, c.id] }, :include_blank => "- Choose Name -")

f.select(:name, People.all.map{ |c| [c.name, c.id] }, :prompt => "- Choose Name -") 
```

这些基本相同。两者都将在选择的顶部显示一个选项，该选项不会导致设置值。但是，`prompt`如果没有选择当前值，该版本只会显示这个额外的选项，即如果在编辑表单上使用它不会让用户通过将其设置回 nil 来清除他们的选择

请注意，该`include_blank`方法与以下代码非常相似，除了更具可读性：

```
f.select(:name, [["- Choose Name -", nil]] + People.all.map{ |c| [c.name, c.id] }) 
```

# java - JSoup - 仅选择一个列表对象

> ID：10967935
> 
> 赞同：2
> 
> 时间：2012-06-10T10:25:50.390
> 
> 标签：java, parsing, selector, jsoup

我正在尝试使用 JSoup 和 Java 从网站中提取某些特定数据。到目前为止，我已经成功地实现了我想要实现的目标。

```
<ul class="beverageFacts">
<li><span>Årgång</span><strong>**2009**&nbsp;</strong></li> 
```

我想提取上面 HTML 中 ** 里面的内容。我可以通过使用 JSoup 中的代码来做到这一点：

```
doc.select("ul.beverageFacts li:lt(1) strong"); 
```

我使用 lt(1) 是因为后面还有几个我想省略的列表项。

现在我的问题；我从中提取数据的网站上有一个可选的信息选项卡，它还有一个名为“beverageFacts”的类。我的代码现在也会提取该数据，我不希望它这样做。

该代码位于网站源代码的更下方，我也尝试在此处使用索引器 :lt(1) ，但它不起作用。

```
<div id="beverageMoreFacts" style="display: block">
<ul class="beverageFacts"><li class="half">
<span> Färg</span><strong> Ljusgul färg.</strong> 
```

我的总体结果是我提取了“2009 Ljusgul färg”。而不仅仅是“2009”。我怎样才能编写我的代码，以便它只提取它成功完成的第一部分，并省略其余部分？

编辑：我使用以下方法得到相同的结果：

```
 doc.select("ul.beverageFacts li:eq(0) strong"); 
```

谢谢，Z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:36:15.170

您只有一个部分合格，而您应该同时合格。试试这个：

```
doc.select("ul.beverageFacts:eq(0) li:eq(0) strong"); 
```

你的意思是：给我每个饮料清单的第一个清单项目。你需要说的是：给我第一个饮料清单的第一项。

# node.js - 如何将字符串转换为时间戳？

> ID：10967937
> 
> 赞同：4
> 
> 时间：2012-06-10T10:26:32.310
> 
> 标签：node.js

如何将字符串转换为时间戳？例如，我有字符串：

```
2012-06-10T10:00:00+04:00 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T10:31:58.157

[使用此处](https://stackoverflow.com/questions/2587345/javascript-date-parse)描述的 Date 对象的 Parse 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T09:47:54.510

尝试所有日期解析的**时刻**包，这是很棒的包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T11:04:38.717

如果您要求将日期转换为特定于数据库的格式，您可以使用非常好的库[moment.js](http://momentjs.com/)进行各种转换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-05T22:29:43.907

我尝试在 AWS 节点 js lambda 函数（所以大多像 js）中进行跟踪并且工作正常。

```
 var arrivalTime='2012-06-10T10:00:00+04:00';
  var d = new Date(arrivalTime);
  console.log('This is -> d ' + d.toString()); 
```

对于节点 js lambda，唯一的问题是它总是返回 UTC，因此需要转换，但对于 js（即在客户端），我认为它会在本地时间返回。

# ios - GameCenter 横向在 iPad 上不起作用

> ID：10967944
> 
> 赞同：3
> 
> 时间：2012-06-10T10:28:03.293
> 
> 标签：ios, ipad, game-center

谁能解释我发生了什么事？我用这个方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:( UIInterfaceOrientation)interfaceOrientation
 {     
return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );
 } 
```

为 matchmakerViewController 提供横向方向。它可以在 iPhone 甚至 iPad 模拟器上完美运行，但不能在 iPad 设备上运行。当我在 iPad 上运行应用程序时 matchmakerViewController 神秘地出现在纵向。怎么了？我如何解决它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:44:53.250

改变你的`shouldAutorotateToInterfaceOrientation`喜欢

```
-(BOOL)shouldAutorotateToInterfaceOrientation:( UIInterfaceOrientation)interfaceOrientation
 {     
     return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
 } 
```

还要检查你的应用程序 plist 文件，会有一个像**Supported Interface Orientations这样的****键**，它的类型是数组，并且有**4 个值**。**从 plist 中删除肖像模式并保存**。它会起作用的。请检查这个。

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:50:07.467

（这很可能不是你的问题，但我使用下面的代码，它工作正常）

```
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
interfaceOrientation == UIInterfaceOrientationLandscapeRight) 
```

此外，确保父视图设置为自动旋转 true。[shouldAutorotateToInterfaceOrientation 不起作用](https://stackoverflow.com/questions/2868132/shouldautorotatetointerfaceorientation-doesnt-work)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:53:40.523

这是通过类别的优雅解决方案，扩展 GKMatchMakerViewController，相同的解决方案将适用于任何其他游戏中心视图，例如排行榜视图和成就视图：

.h 文件

```
#import <Foundation/Foundation.h>
#import "GameKit/GameKit.h"

@interface GKMatchmakerViewController(LandscapeOnly)

-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation;

@end 
```

.m 文件

```
#import "GKMatchmakerViewController-Landscape.h"

@implementation GKMatchmakerViewController(LandscapeOnly)

-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {

   return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);

}

@end 
```

让我知道它是否有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:45:28.350

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

also check parent controller maybe some controller return YES

or try 

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    if (interfaceOrientation==UIInterfaceOrientationPortrait)
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
    else 
        return NO;
} 
```******

# c# - 实体化任意 .NET 字符串

> ID：10967946
> 
> 赞同：0
> 
> 时间：2012-06-10T10:28:33.640
> 
> 标签：c#, .net, string, .net-4.0, escaping

> **可能重复：**
> [我可以将 C# 字符串值转换为转义字符串文字吗](https://stackoverflow.com/questions/323640/can-i-convert-a-c-sharp-string-value-to-an-escaped-string-literal)

如何实体化任意字符串以获得与调试器类似的精确人类可读视图？即我希望所有特殊字符实体化：

```
"Hello,\r\nworld"
"Hello,#D$#A$world"
"Hello,0x0D0x0Aworld" 
```

任何这样的输出都可以。我只对 BCL 中的标准函数感兴趣（可能是现有序列化程序或帮助程序类中的一些转义例程，无论如何）。反向功能也很酷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:09:56.430

我认为没有现成的解决方案可以满足您的需求。 `Char.Isxxx`可用于查找需要特殊处理的字符，自定义代码可以将它们替换为您想要查看的信息。

下面的代码适用于示例，但 Unicode 中有许多不同的字符，以确保它涵盖所有情况。

```
var s = @"Hello,
world";

var builder = new StringBuilder();

foreach (var c in s)
{
    if (Char.IsLetterOrDigit(c) || Char.IsPunctuation(c))
        builder.Append(c);
    else
    {
        var newStr = string.Format("#{0}$", ((int)c).ToString("X"));
        builder.Append(newStr);
    }
}
Console.WriteLine(builder.ToString()); 
```

结果显示在控制台中：

```
Hello,#D$#A$world 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:48:30.907

您可以使用一系列`String.Replace`s：

```
string Entitize(string input)
{
    return input.Replace("\n", "\\n").Replace("\r", "\\r"), ... ;

} 
```

# php - jQuery/JSON/PHP 失败

> ID：10967949
> 
> 赞同：3
> 
> 时间：2012-06-10T10:28:56.457
> 
> 标签：php, jquery, json

我正在尝试调用一个接受 JSON 数据的 php 脚本，将其写入文件并使用 jQuery/AJAX 调用返回简单的文本响应。

jQuery代码：

```
 $("input.callphp").click(function() {
    var url_file = myurl;
    $.ajax({type : "POST",
            url : url_file,
            data : {puzzle: 'Reset!'},
            success : function(data){
                alert("Success");
                alert(data);
            }, 
            error : function (jqXHR, textStatus, errorThrown) {
                alert("Error: " + textStatus + "<" + errorThrown + ">");
            },
            dataType : 'text'
    });
}); 
```

PHP代码：

```
<?php
  $thefile = "new.json"; /* Our filename as defined earlier */
  $towrite = $_POST["puzzle"]; /* What we'll write to the file */
  $openedfile = fopen($thefile, "w");
  fwrite($openedfile, $towrite);
  fclose($openedfile);
  echo "<br> <br>".$towrite;
?> 
```

但是，调用永远不会成功，并且总是会给出错误提示“错误：[对象对象]”。

### 笔记

这段代码工作正常。我试图执行跨域查询 - 我将文件上传到同一台服务器并且它有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:33:14.827

```
var url_file = myurl"; // remove `"` from end 
```

函数的参数`error`是：

```
.error( jqXHR, textStatus, errorThrown ) 
```

不是`data`，

您可以获取`data`（即来自服务器的响应数据）作为`success()`函数参数。

喜欢：

```
success: function(data) {

} 
```

有关更多信息，请查看**[.ajax()](http://api.jquery.com/jQuery.ajax/)**

### 笔记

如果您尝试从跨域（即来自不同域）获取数据，那么您需要`jsonp`请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:31:50.887

您的`data`对象无效；不应引用密钥：

```
data : { puzzle: 'Reset!' } 
```

* * *

此外，SO 的语法高亮指出您`"`在代码中遗漏了 a：

```
var url_file = myurl"; 
```

应该

```
var url_file = "myurl; 
```

# backbone.js - 使用backbone.marionette的外部模板

> ID：10967952
> 
> 赞同：4
> 
> 时间：2012-06-10T10:29:08.500
> 
> 标签：backbone.js, backbone-views, marionette

使用 Backbone.View 我曾经以这种方式获取外部模板（1）

如果我想使用 Backbone.Marionette.Layout 从外部文件中获取模板怎么办？(2)

* * *

(1)

```
define(['myTemplate.html'], function (myTemplate) {
    var MyView = Backbone.View.extend({
        render: function ()
        {
            this.$el.html(myTemplate, this.getView());
        }
    });

    return MyView;
}); 
```

* * *

(2)

```
define(['myTemplate.html'], function (myTemplate) {
    var Layout = Backbone.Marionette.Layout.extend({

        template: "#container",

        regions: {
            top: "#top",
            main: "#main"
        }
    });

    return Layout;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T17:46:50.600

看看这个：[https ://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs](https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs)

```
this.$el.html(myTemplate, this.getView()); 
```

# vb.net - VB.NET 中的线程

> ID：10967954
> 
> 赞同：0
> 
> 时间：2012-06-10T10:29:40.233
> 
> 标签：vb.net, multithreading, callback

好吧，我想我不是第一个问这个问题的人，但是在 VB.NET 中使用线程的最简单方法是什么？我的意思是，我需要从远程服务器下载一些字符串，然后在 GUI 中显示该字符串，所以我必须使用一些回调函数在主线程中调用它。我为此找到了不同的方法，但与 Python 相比，所有方法似乎都非常困难，其中（使用 GTK）我使用了类似的东西：

```
gobject.idle_add(callback_function, parameters) 
```

并且“callback_function”在主线程中执行。我如何在 VB.NET 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:15:53.067

这是一个简单的例子。它可能比其他一些语言更难一些，但它仍然不是非常复杂。以下代码假定它在表单类中（如果不是，您需要使用一些控件或表单引用来调用`Invoke`）：

```
 Private Sub beginDoWork()
     Dim thread As New Thread(AddressOf DoWork)
     thread.Start()
 End Sub

 Public Sub DoWork()
     Dim result As String = getStringFromRemoteServer()
     workCompleted(result)
 End Sub

 Private Delegate Sub workCompletedDelegate(result As String)
 Private Sub workCompleted(result As String)
      If InvokeRequired Then
          Invoke(New workCompletedDelegate(AddressOf workCompleted(result)
          Exit Sub
      End If
      Label1.Text = result
 End Sub 
```

这可以通过`DoWork`始终调用`Invoke`调用`workCompleted`而不是`workCompleted`检查是否需要调用来进一步简化，但是如果您打算在 UI 线程上而不是一个工作线程。

# java - Android的后退按钮不起作用

> ID：10967956
> 
> 赞同：0
> 
> 时间：2012-06-10T10:30:09.873
> 
> 标签：java, android

我正在制作我的第一个 android 应用程序，当我按下后退按钮时，它会关闭应用程序，而不是返回上一个活动。有谁知道我该如何解决这个问题？

谢谢

这是我的“Hoofdscherm”页面，从这里你可以转到“Acties”页面

```
package com.WNF;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;

public class Hoofdscherm extends Activity {
// aanroepen van een bundle, kan je elke naam geven die je maar wilt, 
//zolang de bundle als de onCreate maar dezelfde naam hebben
   public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        // de setContentView is niets meer dan de gegevens van de
//View ophalen uit de R.layout.naamvandeXML
        // Onthoud goed dat je dezelfde XMLs voor meerdere pagina's 
//kan gebruiken.
        setContentView(R.layout.hoofdscherm);

        Button b = (Button) findViewById(R.id.button1);
        ImageButton i = (ImageButton) findViewById(R.id.imageButton1);

        b.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                Intent in = new Intent(Hoofdscherm.this,Acties.class);
                startActivity(in);
                finish(); //deze activity wordt gestopt
            }
        });

        i.setOnClickListener(new OnClickListener(){
            public void onClick(View g){
                Intent ib = new Intent(Hoofdscherm.this,Acties.class);
                startActivity(ib);
                finish();
            }
        });

   }
} 
```

这是“行动”页面

```
package com.WNF;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;

public class Acties extends Activity{
// aanroepen van een bundle, kan je elke naam geven die je maar wilt, 
//zolang de bundle als de onCreate maar dezelfde naam hebben
@Override  
public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        // de setContentView is niets meer dan de gegevens van de
//View ophalen uit de R.layout.naamvandeXML
        // Onthoud goed dat je dezelfde XMLs voor meerdere pagina's 
//kan gebruiken.
        setContentView(R.layout.acties1);

        getIntent();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:42:57.947

从您的`Hoofdscherm`活动中，您调用您的`Acties`活动。然后在`Acties`你按下后，你的应用程序就会关闭。正确的？

理想情况下，发生的事情是，从`Acties`您按下返回时，它应该转到，但是由于您`Hoofdscherm`正在调用Activity，它不再存在。因此您的应用程序退出。`finish();``Hoofdscherm`

如果您想返回`Hoofdscherm`from ，请在您的Activity`Acties`中删除`finish()`调用。`Hoofdscherm`

编辑：

[这里有更多](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)关于`finish()`. 记住——只有`finish()`在你想关闭你的活动时才打电话，如果你想回到它，不要打电话`finish()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:42:45.933

您可以通过覆盖活动中的 onKeyDown 方法来覆盖按钮的行为，并使用简单的 if 语句来确定按下的键是否是返回键

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        // your code here
        return true;
    else return false 
    return super.onKeyDown(keyCode, event);
} 
```

并在语句中编写将调用您的代码是其他活动。

**编辑**我看到你添加了你的代码，你在调用你的第二个活动后调用了finish（），这将杀死你的第一个活动，要么删除finish（），要么通过第二个活动的意图召唤第一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:46:31.137

这是您的解决方案

删除`finish()`方法。

```
b.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {

                Intent in = new Intent(Hoofdscherm.this,Acties.class);

                startActivity(in);

            finish(); // Remove this..and it will work as you want it to
        }
    });

finish() method avoids storing of the activity on the Back Stack 
```

# actionscript-3 - 我应该如何在项目中区分服务和模型？

> ID：10967957
> 
> 赞同：1
> 
> 时间：2012-06-10T10:30:11.847
> 
> 标签：actionscript-3, model-view-controller

将某些事物归类为模型，将其他事物归类为服务是令人困惑的。他们有什么好的经验法则吗，我可以根据它来区分服务和模型。我试图查看各种 mvc 文档，但几乎所有文档都在谈论模型视图和控制器。与服务无关。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T10:38:16.750

我建议你看看 Robotlegs。

它是一个 ActionScript MVC(S) 框架，可促进组件之间更松散的耦合，并具有相应地处理模型和服务的钩子。文档中详细描述了区分是使用服务还是模型的经验法则。

简而言之，服务将用于将您的应用程序连接到外部世界，从而将外部状态带入您的应用程序。而模型将用于存储内部应用程序状态。

Robotlegs 还具有一个方便的 IOC 容器。

您将能够使用此框架实现您的应用程序，或者您可以通过查看框架代码获得很多想法。

看看这些：
[http ://www.robotlegs.org/](http://www.robotlegs.org/)
[http://www.robotlegs.org/diagram/](http://www.robotlegs.org/diagram/)

# ios - iOS 开发许可证和 iTunes 连接

> ID：10967961
> 
> 赞同：1
> 
> 时间：2012-06-10T10:31:01.207
> 
> 标签：ios, licensing, app-store-connect

iOS 开发新手和所有有许可证的东西都让我抓狂。所以我有几个问题。

我有一个开发者帐户，但还没有许可证。如果我以 99 美元的价格购买了 iOS 开发者许可证，那么该许可证会卡在我的帐户中吗？

一个开发者帐户可以拥有多个 iTunes Connect 帐户，还是只能使用一个？

在我开始阅读资料之前，我的帐户已添加到公司的 iTunes Connect 帐户中。如果我然后购买许可证，我会坚持只开发该公司还是可以改变？

我想为自己和一家特定的公司发展。我可以使用相同的许可证还是需要两个？

您可以拥有多个许可证/认证或 Xcode 中的任何名称吗？

iOS 开发者计划既用于开发又用于分发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:40:54.900

1) 是的，如果您购买了 99 美元的开发者许可证，那么该许可证会在您的订阅期间与 Apple ID 相关联。

2) 每个 Apple ID 和电子邮件地址只能使用一个 iTunes Connect 帐户，但您对 developer.apple.com 的“常规”登录可以是多个团队或开发者许可证的一部分。

3) 您可以联系 Apple 让他们撤销您与公司开发者帐户的关联，或者使用它来注册您自己的帐户 - 但是，我的经验仅适用于一个 99 美元的帐户和一个 299 美元的企业帐户，但我想象他们会使用两个普通帐户。

4）从技术上讲，您可以使用现有的许可证，这是您已经使用的公司的许可证 - 但我强烈建议您自己购买，以避免将来您和他们之间可能出现的任何冲突。

5) 是的，Xcode 中的 Organizer 可以处理多个开发人员、许可证和所有配置文件。

6) 是的，您可以使用任一类型的 iOS 开发人员帐户创建开发和分发配置文件。

希望这可以帮助！

# mysql - 多条件表连接

> ID：10967965
> 
> 赞同：0
> 
> 时间：2012-06-10T10:31:40.423
> 
> 标签：mysql

我有一张表，列出了名为 . 每个项目都用唯一的 CLOTHING.CLOTHING_ID 标识。所以蓝色衬衫是01，花衬衫是12，牛仔裤是07。

我有第二张表，用一列衬衫、裤子、鞋子等标识服装。例如，服装 1：衬衫 01，裤子 07（即蓝色衬衫配牛仔裤） 服装 2：衬衫 12，裤子 07（如此华丽的衬衫配牛仔裤）。

此表已命名，并且每件装备都是唯一的 OUTFIT_LIST.OUTFIT_ID。

我想生成一个 select 语句，它将列出每件衣服的内容，即找到 Outfit 1 中指定的衣服。

任何帮助将不胜感激，如果我错过了一个非常简单的解决方案，请提前道歉。我一直在玩各种描述的 JOINS 和 CONCATS 等等，现在很幸运——我对此很陌生。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:29:40.413

我建议您的表是 the和 the`outfit`之间的一对多关系- 例如`outfit_id``clothing_id`

```
outfit_id | clothing_id

        1 |           1
        1 |           7
        2 |           1
        2 |          12 
```

这使您可以为服装添加任意数量的物品 - 无论是西装、夹克、连衣裙等。

然后为服装选择项目非常容易：

```
SELECT clothing_id FROM outfit WHERE outfit_id = ? 
```

在我上面的示例中，`outfit_id`of`1`将返回`1,7`- 即蓝色衬衫和牛仔裤。

或获取服装项目名称：

```
SELECT c.name FROM clothing c JOIN outfits o ON c.clothing_id=o.clothing_id
WHERE o.outfit_id = ? 
```

同样，在我上面的示例中，`outfit_id`of`1`将返回`blue shirt, jeans`.

# actionscript - 如何获得类似于链接中所示的弹簧效果（补间）

> ID：10967969
> 
> 赞同：-1
> 
> 时间：2012-06-10T10:32:37.443
> 
> 标签：actionscript, actionscript-3

我看到了[这个 mouseover tween](http://www.flashmo.com/preview/flashmo_129_circle)，我就是喜欢它。只需将鼠标悬停在拇指上即可查看弹簧效果。我知道这对专业人士来说可能很容易，但我不知道这是怎么做到的。

我会非常感谢任何可以建议我如何获得类似效果的人，或者更好的是，建议我可以学习这个的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:12:50.660

使用[TweenLite](http://www.greensock.com/tweenlite/)。使用持续时间约为 0.75 的 Bounce.easeOut。
确保导入 TweenLite

```
package
{
    import com.greensock.TweenLite;
    import com.greensock.easing.Bounce;

    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Testerooni extends Sprite
    {
        public var ball:Sprite = new Sprite();
        public function Testerooni()
        {
            createBall();
            addChild(ball);
            ball.x = 100;
            ball.y = 100;
            ball.addEventListener(MouseEvent.MOUSE_OVER,bounceOver);
            ball.addEventListener(MouseEvent.MOUSE_OUT,bounceOut);
        }

        protected function bounceOver(e:MouseEvent):void
        {
            TweenLite.to(ball,0.5,{scaleX:2,scaleY:2,ease:Bounce.easeOut});
        }

        protected function bounceOut(e:MouseEvent):void
        {
            TweenLite.to(ball,0.5,{scaleX:1,scaleY:1,ease:Bounce.easeOut});
        }

        private function createBall():void
        {
            ball.graphics.lineStyle(1);
            ball.graphics.beginFill(0x0000FF,0.4);
            ball.graphics.drawCircle(0,0,15);
        }
    }
} 
```

# django - Django admin：按更改列表中的多个字段排序

> ID：10967970
> 
> 赞同：1
> 
> 时间：2012-06-10T10:32:46.483
> 
> 标签：django, admin

我有一个简单的投票应用程序，其中包含以下模型：

```
class Question(models.Model):
    text = models.CharField(max_length=250)
    position = models.PositiveIntegerField(default=0)

class Variant(models.Model):
    question = models.ForeignKey(Question, related_name=u"variants")
    text = models.CharField(max_length=250)
    position = models.PositiveIntegerField(default=0) 
```

我希望这些变体首先按问题在管理更改列表中排序，然后按位置排序，这样它们就不会与其他问题的变体混淆。但是在 ModelAdmin 中简单地指定一个排序是无效的：

```
class VariantAdmin(admin.ModelAdmin):
    list_display = ['text', 'question', 'position']
    ordering = ['question', '-position'] 
```

尽管有“问题”排序，但位置较大的变体仍列在上方。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:32:47.607

在写这个问题的过程中，我试图找到解决方案并最终找到了它。

模型“Variant”具有在 Meta 类中指定的顺序：

```
class Variant(models.Model):
    question = models.ForeignKey(Question, related_name=u"variants")
    text = models.CharField(max_length=250)
    position = models.PositiveIntegerField(default=0)

    class Meta:
        ordering = ['-position'] 
```

这覆盖了模型管理员中的排序集。删除后，这一切都开始按预期工作。

# asp.net - 网格视图列突如其来

> ID：10967972
> 
> 赞同：0
> 
> 时间：2012-06-10T10:32:52.127
> 
> 标签：asp.net, visual-studio

这是关于 GridView 控件的。我创建了一个手动指定列（通过编码）的列，但是当我运行项目时，我得到的列比代码中指定的多。

这是代码：

```
<asp:GridView ID="GridView1" runat="server" DataKeyNames="cid" 
        onrowcancelingedit="GridView1_RowCancelingEdit" 
        onrowdeleting="GridView1_RowDeleting" onrowediting="GridView1_RowEditing" 
        onrowupdating="GridView1_RowUpdating">
    <Columns>
        <asp:BoundField DataField="name" HeaderText="Category name" 
            SortExpression="name" />

        <asp:BoundField DataField="description" HeaderText="Category description" 
            SortExpression="description" />

        <asp:HyperLinkField DataNavigateUrlFields="cid" 
            DataNavigateUrlFormatString="AdminCategories.aspx?CategID={0}" 
            HeaderText="See categories" Text="See Categories" />

        <asp:CommandField ShowEditButton="True" EditText="Edit" HeaderText="Edit Categories"/>

        <asp:ButtonField CommandName="Delete" Text="Delete" HeaderText="Delete Categories"/>
    </Columns>
</asp:GridView> 
```

结果，当我运行项目时，我在 GridView 中得到以下标题：

类别名称 | 分类说明 | 查看类别 | 编辑类别 | 删除类别 | **姓名 | 描述**

共7列。但是，如果您检查代码，则代码中仅包含前 5 列。那么**为什么最后两列会出现，我该如何删除它们**呢？

谢谢！

安娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:00:22.177

您应该将 gridview 的 AutoGenerateColumns 属性设置为 false ，因为您还没有自动生成最后两列！用这种方式重写你的代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" DataKeyNames="cid"   
    onrowcancelingedit="GridView1_RowCancelingEdit"   
    onrowdeleting="GridView1_RowDeleting" onrowediting="GridView1_RowEditing"   
    onrowupdating="GridView1_RowUpdating">  
<Columns>  
    <asp:BoundField DataField="name" HeaderText="Category name"   
        SortExpression="name" />  

    <asp:BoundField DataField="description" HeaderText="Category description"   
        SortExpression="description" />  

    <asp:HyperLinkField DataNavigateUrlFields="cid"   
        DataNavigateUrlFormatString="AdminCategories.aspx?CategID={0}"   
        HeaderText="See categories" Text="See Categories" />  

    <asp:CommandField ShowEditButton="True" EditText="Edit" HeaderText="Edit Categories"/>  

    <asp:ButtonField CommandName="Delete" Text="Delete" HeaderText="Delete Categories"/>  
</Columns> 
```

# c++ - Gtkmm - 隐藏窗口而不关闭应用程序

> ID：10967978
> 
> 赞同：3
> 
> 时间：2012-06-10T10:33:49.433
> 
> 标签：c++, gtk, gtkmm

如何隐藏顶层窗口而不关闭它？

NdmWindow 是一个继承自 Gtk::Window 的类。我已将 NdmWindow 的实例添加到 Gtk::Application。

现在，我如何隐藏它而不是关闭它？

提前致谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T20:48:27.247

根据[this](https://mail.gnome.org/archives/commits-list/2011-January/msg07191.html)，行为是当一个窗口被隐藏时，它会从 中删除`Gtk::Application`，因此如果它是最后一个窗口，则应用程序退出。

如果您希望您的应用程序在没有窗口显示时继续运行，解决方案是调用`hold()`您的`Gtk::Application`对象以增加应用程序的引用计数。大概您在设置任何窗口之前执行此操作，并将相应的调用`release()`作为退出逻辑的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T13:21:25.950

`window->`[`hide`](http://developer.gnome.org/gtkmm/stable/classGtk_1_1Widget.html#a285c1775842292ae4bc6d074aa892c61)`();`

不要忘记查看`Gtk::Window`继承自的类。

**编辑**

我不知道，但我的建议是尝试`hold()`，然后`release()`在显示下一个窗口之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T13:21:28.320

这是一个有效但无效的解决方案`segfault`。保存对 的引用`Gtk::Application`，例如将其作为参数发送到您的 main`Window class`并调用`var app`它，稍后您将需要它，因为在某些情况下`get_application()`会返回它，所以需要它`null`。

在您的窗口调用的删除事件处理程序中

```
app->hold();
hide();
return true; 
```

`app->release()`当你想让你的窗口再次显示时不要调用，因为它会使你的应用程序完全退出。只需调用`set_visible()`您的窗口对象，它就会显示出来。

# google-chrome - 应用溢出时，最后一个孩子的下边距被隐藏

> ID：10967979
> 
> 赞同：2
> 
> 时间：2012-06-10T10:34:15.363
> 
> 标签：google-chrome, margin, css

我有一个容器 div，它的底部有孩子。问题是当 div 的溢出滚动条出现时，最后一个孩子的下边距被隐藏了。

请参阅[http://jsfiddle.net/TxEAP/3/](http://jsfiddle.net/TxEAP/3/)。起初，`1`div 下方有一个正确的边距。单击“附加一个”以使滚动条最终出现，使最后一个 div 不再具有底部边距。打开 DevTools 显示最后一个孩子的边距在那里，但它在容器的视口之外，即使完全滚动到底部也是如此。

如何解决？让它在谷歌浏览器中运行就足够了。

HTML：

```
<div class="main">
    <div class="container">
        <div class="item">1</div>
        <!-- several of these .item divs -->
    </div>
</div> 
```

CSS：

```
.main {
    height: 200px;
    overflow-y: scroll;
    position: relative;
    border: 1px solid black;
}

.container {
    width: 100%;
    max-height: 100%;
    position: absolute;
    bottom: 0;
}

.item {
    padding: 20px;
    margin: 15px;
    border: 1px solid black;
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:45:31.807

这是我使用 flexbox 的最终解决方案。尽管有所有`-webkit-`前缀，但它在 Chrome 上得到了足够好的支持。基本上，这个想法是有一个虚拟元素，在没有溢出的情况下，从顶部开始填充容器的空间（以便真正的子元素锚定到底部）；在溢出的情况下，它会自动隐藏，因为`height: 0`. 它不会受到保证金问题的影响，也不会崩溃保证金。

[http://jsfiddle.net/mCYLm/1/](http://jsfiddle.net/mCYLm/1/)

HTML：

```
<div class="main">
    <div class="gap-filler"></div>
    <div class="item">foo</div>
    <!-- more `div.item`s -->
</div> 
```

CSS：

```
div.main {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    height: 200px;
    overflow-y: scroll;
}

div.main div.gap-filler {
    -webkit-box-flex: 1;
    height: 0;
}

div.main div.item {
    border: 1px solid black;
    margin: 20px;
    padding: 20px;
}​ 
```

* * *

**编辑：**这是一个没有 flexbox 的解决方案，但它有选择问题。

最终奏效的解决方案如下：http: [//jsfiddle.net/TxEAP/7/](http://jsfiddle.net/TxEAP/7/)。这会附加隐藏的“内容”，这使得 Chrome 不会隐藏最后一个`.item`div 的边距。

```
.container:after {
    content: "";
    font-size: 0;
    display: block;
    height: 1px;
} 
```

* * *

**编辑：**以下仅在`display: inline-block`可能的情况下有效。

最后我找到了解决方案。如果*除了*`.items`第一个之外都有，那么边距不会被隐藏。`display: inline-block`

 *[http://jsfiddle.net/TxEAP/5/](http://jsfiddle.net/TxEAP/5/)

```
.item:not(:first-child) {
    display: inline-block;

    /* attempt at getting `width: auto` like `display: block` has */
    width: -webkit-calc(100% - 2 * 15px);
    box-sizing: border-box;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:47:01.203

如果您只是将`overflow-y: scroll;`from`.main.`移至`.container`class，则保留边距。唯一的缺点是少于 3 个项目（对于给定的容器高度），您会得到一个小的滚动条占位符，而不是一个全高的占位符。

~~删除`max-height:100%`容器似乎可以修复我在 Chrome 21 中的测试。~~

移动属性以便溢出在容器上，保留添加到末尾的元素的边距/填充，从而导致滚动条出现。

```
.main {
    height: 200px;
    border: 1px solid black;
}

.container {
    width: 100%;
    height: 100%;
    overflow-y: scroll;
} 
```*

# iphone - UITableView 未填充 sqlite 数据库列

> ID：10967983
> 
> 赞同：0
> 
> 时间：2012-06-10T10:35:28.100
> 
> 标签：iphone, objective-c, uitableview, ios5, xcode4.3

这是我用来使用 sqlite 数据库中列的内容填充 UITableView 的方法的代码。但是，这在运行时没有给出错误，但在 UITableView 中仍然没有给出任何数据。如果有人可以提供帮助，将不胜感激。

```
- (void)viewDidLoad{
    [super viewDidLoad];
    self.title = @"Strings List";
    UITableViewCell *cell;
    NSString *docsDir;
    NSArray *dirPaths;
    sqlite3_stmt *statement;
    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the database file
    databasePath = [[NSString alloc]initWithString: [docsDir stringByAppendingPathComponent:@"strings.sqlite"]];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: databasePath ] == NO) 
    {
        const char *dbpath = [databasePath UTF8String];
        if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
        {
        NSString * query =
            @"SELECT string FROM strings";
            const char * stmt = [query UTF8String];
            if (sqlite3_prepare_v2(contactDB, stmt, -1,&statement, NULL)==SQLITE_OK){
                if (sqlite3_step(statement) == SQLITE_ROW)
                {
    NSString *string = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(statement, 0)];
                    cell.textLabel.text = string;                }
            }
            else NSLog(@"Failed");
            sqlite3_finalize(statement);
       }
       sqlite3_close(contactDB);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:09:04.533

当您拥有表格视图的所有委托方法时，您正在使用的那个非常复杂的方法就像把黄油涂在面包上一样。

[从这个链接](https://stackoverflow.com/questions/9887785/sqlite-database-load-fails-issue-with-sqlite-prepare-statement-iphone-xcod/9888240#9888240)试试我的答案

让我知道它是否有效！！！！
干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:55:35.150

您是否检查过问题是否与您的 tableview 或数据库有关？您是否能够从数据库中获取数据？检查您是否缺少任何在代码中连接 sqlite 的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T11:04:17.387

我建议您通读[Table View Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/ManageSelections/ManageSelections.html)。

`viewDidLoad`您通常放入的大部分序列都放置在

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T12:10:44.297

如果您使用模拟器进行测试，请删除之前的构建并再次安装应用程序。它从文档目录中获取 SQL 文件。所以请试试这个，让我知道。谢谢

# c# - C# 报表查看器控件 - DynamicTable 示例

> ID：10967984
> 
> 赞同：1
> 
> 时间：2012-06-10T10:35:47.647
> 
> 标签：c#, winforms, report, reportviewer, rdlc

我需要使用可以动态选择列的表格创建报告，以便可以通过 Windows 表单中的用户输入来隐藏它们。

我找到了一个几乎正是我需要的示例，但我希望能够在报告中添加额外的详细信息，例如公司徽标、地址、标题等。我不知道如何在结构中执行此操作的例子。

本网站上的 c# 示例 [http://www.gotreportviewer.com/](http://www.gotreportviewer.com/)

示例： [http ://www.gotreportviewer.com/DynamicTable.zip](http://www.gotreportviewer.com/DynamicTable.zip)

亚当

# tomcat - PHP/Java 桥 java.lang.NoSuchMethodException

> ID：10967986
> 
> 赞同：1
> 
> 时间：2012-06-10T10:36:09.013
> 
> 标签：tomcat, netbeans, php-java-bridge

我已经在 netbeans tomcat 目录中设置了 PHP/Java Bridge 和工作示例。使用自定义 JAR 不起作用这是我的代码：

```
package com.micha;

public class Hello1Bean {
    public Hello1Bean()
    {}
    String hi() {return "This is my hello message";}
    String hello(String name) {return "Hello" + name;}
} 
```

和php代码

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        require_once ("java/Java.inc");
        $world = new Java("com.micha.Hello1Bean");
        echo java_values($world->hi());
        echo "Hello Working Thingy\n\n";

        ?>
    </body>
</html> 
```

当我检查时`http://localhost:8084/JavaBridge/mytest.php`：

```
 javax.servlet.ServletException: java.lang.RuntimeException: PHP Fatal error:  Uncaught [[o:Exception]:"java.lang.Exception: Invoke failed: [[o:Hello1Bean]]->hi. Cause: java.lang.NoSuchMethodException: hi(). Candidates: [] VM: 1.6.0_25@http://java.sun.com/" at:
#-6 php.java.bridge.JavaBridge.checkM(JavaBridge.java:1085)
#-5 php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1024)
#-4 php.java.bridge.Request.handleRequest(Request.java:417)
#-3 php.java.bridge.Request.handleRequests(Request.java:500)
#-2 php.java.bridge.http.ContextRunner.run(ContextRunner.java:145)
#-1 php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60)
#0 C:\Users\Micha\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\webapps\JavaBridge\java\Java.inc(232): java_ThrowExceptionProxyFactory->getProxy(2, 'com.micha.Hello...', 'T', true)
#1 C:\Users\Micha\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\webapps\JavaBridge\java\Java.inc(360): java_Arg->getResult(true)
#2 C:\Users\Micha\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\webapps\JavaBridge\java\Java.inc(366): java_Client->getWrappedResult(true)
#3 C:\Users\Micha\.netbean in C:\Users\Micha\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\webapps\JavaBridge\java\Java.inc on line 195

    php.java.servlet.fastcgi.FastCGIServlet.handle(FastCGIServlet.java:499)
    php.java.servlet.fastcgi.FastCGIServlet.doGet(FastCGIServlet.java:521)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    php.java.servlet.PhpCGIFilter.doFilter(PhpCGIFilter.java:126) 
```

在我有一个 ClassNotFoundException 之前，它知道有一个类，但由于某些奇怪的原因，我无法调用该函数。（如果我`com.micha.Hello1Bean`用一些不存在的类替换“”，那么我会得到那个异常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:06:06.793

您的方法不公开，请尝试：

```
public String hi() {
       return "This is my hello message";
} 
```

# iphone - 从我的 ip4 设备的崩溃日志中找到崩溃代码

> ID：10967989
> 
> 赞同：0
> 
> 时间：2012-06-10T10:36:25.767
> 
> 标签：iphone, ios, xcode, crash

如何从我的 ip4 设备的崩溃日志中找到崩溃代码？由于崩溃的线程 0 呈现串行框架和 main.m，我无法找到引发此崩溃的准确代码并对其进行调试。有什么建议吗？提前致谢！

```
Incident Identifier: B6BD84B7-CE0A-485D-A877-0FD0F5B75933
CrashReporter Key:   b0b97a37f2a1e4911ce2ef34e1793e028463bb67
Hardware Model:      iPhone3,1
Process:         myApp [11615]
Path:            /var/mobile/Applications/28AE71F2-36CA-4A87-83D9-07DF2DFE74F1/myApp.app/myApp
Identifier:      myApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-06-09 21:12:22.792 +0800
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000b
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x36721f78 0x3671e000 + 16248
1   MapKit                          0x34e7ace6 0x34e68000 + 77030
2   CoreFoundation                  0x3525f1f4 0x35247000 + 98804
3   Foundation                      0x311b6740 0x31112000 + 673600
4   CoreFoundation                  0x352d4acc 0x35247000 + 580300
5   CoreFoundation                  0x352d4298 0x35247000 + 578200
6   CoreFoundation                  0x352d303e 0x35247000 + 573502
7   CoreFoundation                  0x3525649e 0x35247000 + 62622
8   CoreFoundation                  0x35256366 0x35247000 + 62310
9   GraphicsServices                0x36552432 0x3654e000 + 17458
10  UIKit                           0x3234ce76 0x3231b000 + 204406
11  myApp                           0x0001bac0 main (main.m:16)
12  myApp                           0x0001ba80 start + 32 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:41:28.070

这是崩溃的代码的最新版本还是以前安装的版本？

如果您正在*归档*您的构建，您应该能够通过 XCode 管理器对它们进行重新符号化。我认为最重要的是你的开发机器上有一个方便的 .dSYM 文件，用于安装在各种设备上的任何构建。

这里有一些[关于如何分析崩溃报告的 Apple 信息](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)。

[Here is also a very related question here on StackOverflow that may help you out](https://stackoverflow.com/questions/5458573/xcode-4-failure-to-symbolicate-crash-log).

# php - ID 不能为空（自动递增）

> ID：10967990
> 
> 赞同：4
> 
> 时间：2012-06-10T10:36:26.137
> 
> 标签：php, mysql, wamp, auto-increment

我正在为我的网站使用 INSERT ON DUPLICATE KEY 语句。它用于创建新闻项目，所以我想我可以使用相同的 MySQL 命令来创建和更新新闻项目。

但是，当我使用以下内容时：

```
INSERT INTO table (id,title,content) VALUES(NULL,"Test","Test"); 
```

它不会创建新的自动增量值，而是会引发错误。但是，该命令适用于我的主开发服务器。但不是在我的笔记本电脑上。两个版本的 MySQL 是相同的，唯一的区别是 MySQL 是手动安装在我的服务器上的，而我的笔记本电脑上是用 WAMP 安装的。

是否有任何可能导致此问题的 MySQL 变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T10:41:10.617

我建议使用`INSERT INTO table (title,content) VALUES("Test","Test");`

这将在表中创建一个具有新的递增 ID 的新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:11:37.583

设法尽可能地解决它。

我检查了我的代码，发现当我插入空的 POST'd ID 时，它用引号括起来。我现在更改了它，以便它在不带引号的情况下放置 NULL。所以我的查询现在应该如下所示：

```
INSERT INTO table (id,title,content) VALUES(NULL,"test","Test")
ON DUPLICATE KEY UPDATE title=VALUES(title), content=VALUES(content); 
```

现在可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:43:51.317

我认为你应该这样查询，

```
INSERT INTO table (title,content) VALUES("Test","Test"); 
```

如果它仍然不起作用，请检查`id`列是否设置为自动增量。

# java - 许可 Android Apache Commons Math

> ID：10967997
> 
> 赞同：2
> 
> 时间：2012-06-10T10:37:33.827
> 
> 标签：java, android, licensing, apache-commons-math

我即将发布我的第一个商业软件。我没有研究与编程相关的东西，所以我在这里遇到了一个问题，那就是许可。我不是以英语为母语，所以在阅读 Apache Commons License 时遇到了一点问题。

在我的软件中，我使用 Apache Commons Math 库。如果我了解他们的常见问题解答，我可能会在添加此软件后分发我的软件（文本将出现在应用程序内的“信息”屏幕上）：

```
 [...]        
    \nCopyright 2012 xxxstefplexxxx

    \n\n This software uses Apache Commons Math Library
    \nThe license can be found here:
    \nhttp://www.apache.org/licenses/LICENSE-2.0
    \n 
```

如果我想使用上面的库，这就是我需要做的吗？

我需要在我的软件上申请任何许可证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T10:59:08.053

是的，并且在您的软件中显示版权声明的任何其他位置。另外我相信从技术上讲，您应该在程序分发媒体上包含许可证的副本，无论是 cd 还是 zip 文件等（尽管这对于 android 应用程序可能没有意义，所以我确定只是about screen 是放置信息的合适位置）。它不要求您根据任何特定许可许可您的代码。

另见[链接](https://stackoverflow.com/questions/1007338/can-i-use-a-library-under-the-apache-software-license-2-0-in-a-commercial-applic)

# iphone - 一个 UIView 中有许多小图像

> ID：10967998
> 
> 赞同：0
> 
> 时间：2012-06-10T10:37:58.430
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiimageview

我有 4 个不同的图像，每个图像应该缩放到 5px*7.5px，然后随机添加到 UIScrollView 320x480。这是一个视图中的 64x64=4096 图像。很多图像。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:15:04.277

你最好直接在你的父视图上绘制它们，在你的视图中`[UIImage drawInRect:]`使用`drawRect`. 否则，在父视图中有 4,096 个子视图可能会导致性能大幅下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:49:03.253

假设您命名 images `img0.png, img1.png, img2.png, img3.png`。

你可以使用这样的代码：

```
for (int x=0;x<64;x++) {
    for (int y=0;y<64;x++) {
        UIImageView *imgView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: [NSString stringWithFormat:@"img%d.png", arc4random()%3]]];
        CGRect frame = imgView.frame;
        frame.origin.x = x*5.0;
        frame.origin.y = y*7.5;
        imgView.frame = frame;
        [self.scrollView.view addSubView: imgView];
    }
} 
```