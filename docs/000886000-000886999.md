# StackOverflow 问答 000886000-000886999

# iphone - 在 XCode 中模拟加速度计、麦克风和摄像头

> ID：886004
> 
> 赞同：4
> 
> 时间：2009-05-20T03:24:20.270
> 
> 标签：iphone, xcode, camera, accelerometer, microphone

是否可以在 XCode 模拟器中模拟运动（即加速度计）、麦克风和摄像头？

如果是这样，你怎么做？

如果没有，是否有任何 XCode 插件或第三方应用程序可以做到这一点？（当然除了下载到实际的 iPhone 上）。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T03:35:39.220

我发现最简单的方法是使用可在 App Store 中找到的[Wavefront Accelerometer Data App 。](http://www.wavefrontlabs.com/Wavefront_Labs/Accelerometer_Data.html)您需要做的就是将单个文件添加到您的应用程序，然后您可以使用 iPhone 或 iPod touch 中的加速度计将数据发送到模拟器中的应用程序。您将需要 WiFi 连接和要使用的设备。

您可能会找到在桌面上运行的解决方案，但您不会获得准确的真实读数。

我建议您购买实际设备，否则您的应用程序的行为可能与您预期的不同。如果这是一项认真的努力，您应该能够证明设备的成本是合理的。iPod Touch 便宜得多，但您没有电话或相机功能。不过，您可以获得带有麦克风的耳机。

这些是限制，我认为开发一个应用程序而不在设备上进行测试是不明智的。我遇到过一直崩溃的应用程序，我认为这是因为它们在模拟器中摆脱了在设备的内存和 cpu 限制中无法做到的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-15T11:06:04.697

麦克风在模拟器中工作。它使用来自您的 mac 的标准麦克风输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-05T14:13:58.583

检查此链接....

[http://media.wiley.com/product_data/excerpt/72/04705009/0470500972-1.pdf](http://media.wiley.com/product_data/excerpt/72/04705009/0470500972-1.pdf)

并转到第 10 页..

但是，iPhone Simulator 作为真实设备的软件模拟器，确实有其局限性。iPhone 模拟器上不可用的功能包括： 获取位置数据——它只返回一个固定坐标，例如北纬 37.3317 和西经 122.0307

拨打电话
访问加速度计

发送和接收 SMS 消息

从 App Store
相机
麦克风安装应用程序

OpenGL ES 的几个特性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-24T03:46:02.003

在android模拟器中，无法模拟硬件..但例如对于相机，我看到了一种获取真实信息的方法...使用您的网络摄像头..这样做您可以使用应用程序获取帧并发送此数据模拟器的一个插座......也许可以用iPhone模拟器来做到这一点。

我[在这里看到了这个解决方案](http://www.tomgibara.com/android/camera-source)

# operating-system - 装配 OUTB 功能如何导致三重故障？

> ID：886005
> 
> 赞同：2
> 
> 时间：2009-05-20T03:24:28.537
> 
> 标签：operating-system, x86, interrupt, hobby-os

在我的系统编程课上，我们正在研究一个小型、简单的爱好操作系统。我个人一直在研究 ATA 硬盘驱动程序。我发现一行代码似乎会导致错误，然后立即重新启动系统。有问题的代码位于我的 IDE 中断中断服务程序的末尾。由于我使用的是 IDE 通道，因此它们是通过从 PIC（通过主 PIC 级联）发送的。最初我的代码只是将中断结束字节发送到从站，但后来我的教授告诉我，我也应该将它发送到主 PIC。

所以这是我的问题，当我取消注释将 EOI 字节发送到主 PIC 的行时，系统会出现三重故障，然后重新启动。同样，如果我留下评论，系统将继续运行。

```
_outb( PIC_MASTER_CMD_PORT, PIC_EOI );  // this causes (or at least sets off) a triple fault reboot
_outb( PIC_SLAVE_CMD_PORT, PIC_EOI ); 
```

在没有看到系统的其余部分的情况下，是否有人可以解释这里可能发生的事情？

注意：就像在黑暗中拍摄一样，我用另一个 _outb() 调用替换了 _outb() 调用，这只是确保为 IDE 控制器启用了中断，但是，生成的程序集几乎是相同的。这并没有导致故障。

*_outb() 是 x86 OUTB 指令的包装器。

我将 EOI 发送给主 PIC 的功能有什么特别之处，这是一个问题？

我意识到如果没有看到代码，这可能无法回答，但感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:34:23.847

三重错误通常指向堆栈溢出或奇数堆栈指针。当发生故障或中断时，系统会立即尝试将更多垃圾推入堆栈（在调用故障处理程序之前）。如果堆栈被冲洗，这将导致另一个故障，然后尝试将更多的东西推入堆栈，这会导致另一个故障。此时，系统放弃您并重新启动。

我知道这一点是因为我实际上拥有一项愚蠢的专利（大约 20 年前在戴尔工作时），可以在没有外部硬件的情况下导致 CPU 重置（过去是通过键盘控制器完成的）：

```
 MOV ESP,1
   PUSH EAX    ; triple fault and reset! 
```

OUTB 指令本身不会导致故障。我的猜测是您正在重新启用中断，并且当您的堆栈出现问题时会触发中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T04:11:26.110

当您重新启用 PIC 时，您是在设置 CPU 的中断标志还是清除它的情况下执行此操作（即，您是在操作码之后的某个时间`CLI`，还是在`STI`操作码之后的某个时间）？

假设 CPU 的中断标志已启用，您重新启用 PIC 的行为允许任何未决中断到达 CPU：这将中断您的代码、分派到 IDT 指定的向量等。

因此，我希望直接导致故障的不是您的操作码：相反，故障是由于您重新启用 PIC 而发生的中断而运行的代码。

# sql-server - SSRS 报告表达式中的注释

> ID：886008
> 
> 赞同：24
> 
> 时间：2009-05-20T03:27:01.870
> 
> 标签：sql-server, sql-server-2008, reporting-services, reporting, ssrs-2008

我在 Reporting Services 中使用了一些复杂的表达式来控制报告中数据的值、格式等（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms159238.aspx)）。

**是否可以在这些表达式中插入代码注释，如果可以，语法是什么？**

通过代码注释，我的意思是：

```
// single line comment
/* or multi line comment */ 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-20T03:42:24.147

它看起来像 VB 代码。
尝试使用撇号写评论。

`'This is a sample comment.`

这是一个猜测:)

编辑：VB 并没有真正的多行注释。
但是，请尝试使用以下内容来查看它是否有效

```
 'This is a sample comment _
followed by a new line _
and the comment ends 

```

如果这不起作用，你可以做

```
 'This is a sample comment
'followed by a new line
'and the comment ends 
```

EDIT2：另外，评论似乎应该放在最后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-27T07:35:14.257

如果你想评论一个 switch 语句，你可以这样做：

```
=switch(
   false, "--- First, test if above zero ---"
   , Parameters!Test.Value > 0
   , "Value is above zero. Yeah!"

   , false, "--- Then test if -1 ---"
   , Parameters!Test.Value = -1
   , "I guess the value is unknown"

   , false, "--- Finally catch everything else ---"
   , true
   , "We could not handle this value. Sorry :-\"
) 
```

带有 false 的行将永远不会被击中，这样您就可以将它们用作注释。不是很漂亮但很有用:-)

# .net - 无法进入 .net 框架源代码

> ID：886009
> 
> 赞同：3
> 
> 时间：2009-05-20T03:27:04.897
> 
> 标签：.net

我能够加载符号但无法介入。如何做到这一点？

这适用于 .Net 3.5 SP1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T04:02:04.410

确保你也清除了本地符号缓存。如果您曾经从常规符号服务器下载过符号，则将首先使用这些符号。

# c - “#define assert(exp) ((void) 0)”有什么作用？

> ID：886013
> 
> 赞同：10
> 
> 时间：2009-05-20T03:28:59.247
> 
> 标签：c, assert

[**我在阅读Windows Research Kernel (WRK)**](http://www.microsoft.com/resources/sharedsource/windowsacademic/researchkernelkit.mspx) 1.2中的源代码时遇到了这个预处理器定义：

```
#define assert(exp) ((void) 0) 
```

这段代码有什么作用？为什么要定义它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-20T03:31:13.360

它定义了表达式 assert( *anything* ) 什么都不做。

据推测，正在使用的环境不支持 ANSI C[断言](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.1.html)语句，或者程序员没有意识到可以通过定义 NDEBUG 来禁用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T11:44:43.157

为了扩展**bdonlan**所说的内容，宏不扩展为空的原因是因为如果确实如此，则类似于：

```
assert(something) // oops, missed the semi-colon
assert(another_thing); 
```

会在发布模式下编译，但不会在调试模式下编译。它的原因`((void) 0)`不仅仅是`0`为了防止“无效声明”警告（或任何 MSVC 调用它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-08T08:18:39.897

Just to add, this is the definition of *assert* in *newlib* too, when `NDEBUG` is defined as a preprocessor directive. [**Newlib**](http://en.wikipedia.org/wiki/Newlib) is the open source C library that is used on [**Cygwin**](http://en.wikipedia.org/wiki/Cygwin) and embedded systems.

From the *assert* manual in *newlib*:

> The macro is defined to permit you to turn off all uses of *assert* at compile time by defining `NDEBUG` as a preprocessor variable. If you do this, the *assert* macro expands to **`(void(0))`**

# sql - Hibernate NHibernate - 本机 SQL

> ID：886017
> 
> 赞同：0
> 
> 时间：2009-05-20T03:29:36.747
> 
> 标签：sql, nhibernate, hibernate

试图通过 NHibernate sql api 删除未映射的类/记录。但似乎无法让它工作。这看起来有什么问题吗？

```
session = NHibernateHelper.GetCurrentSession();

        tx = session.BeginTransaction();
        using (tx)
        {
            session.CreateSQLQuery("DELETE FROM tb_category WHERE parentID = :parentID").SetInt64("parentID",pID);

            tx.Commit();
        } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T03:40:39.390

我认为，您必须执行 Query 才能使其执行某些操作。

您只是在创建一个查询并设置它的参数。

在 Hibernate 中，运行本机查询的 SQLQuery 对象有一个 .executeUpdate() 方法。

# haskell - 这个 Haskell 函数的类型签名是什么？

> ID：886020
> 
> 赞同：4
> 
> 时间：2009-05-20T03:33:41.497
> 
> 标签：haskell, types, type-inference

我写了一个函数来检查一个数字是否是素数：

```
prime n = prime' n 2 (floor (sqrt n))
     where prime' n c u | n `mod` c == 0 = False
                        | c > u = True
                        | otherwise = prime' n (c+1) u 
```

我不知道这个函数的类型签名应该是什么。一开始我以为应该是这样的：

```
prime :: Integral a => a -> Bool 
```

但是随后在编译时出现错误，因为`sqrt`期望 a`Floating a`并且`floor`期望 a`RealFrac a`而不是`Integral a`. 当我删除类型签名时，它会编译，但该函数不起作用：

```
*Euler> :t prime
prime :: (Integral a, RealFrac a, Floating a) => a -> Bool
*Euler> prime 5

<interactive>:1:0:
    Ambiguous type variable `t' in the constraints:
      `Floating t' arising from a use of `prime' at <interactive>:1:0-6
      `RealFrac t' arising from a use of `prime' at <interactive>:1:0-6
      `Integral t' arising from a use of `prime' at <interactive>:1:0-6
    Probable fix: add a type signature that fixes these type variable(s) 
```

我怎样才能使这个功能工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T04:10:09.933

问题是您使用`sqrt`on `n`，它强制`n`成为浮点数；并且您还使用`mod`on `n`，它强制 n 为整数。直观地说，从你的代码来看，`n` *应该*是一个整数，所以你不能直接调用`sqrt`它。相反，您可以使用类似`fromIntegral`的方法将其从整数转换为另一种数字类型。

```
prime :: (Integral a) => a -> Bool
prime n = prime' n 2 (floor (sqrt (fromIntegral n)))
     where prime' n c u | n `mod` c == 0 = False
                        | c > u = True
                        | otherwise = prime' n (c+1) u 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T15:02:24.070

只是为了回顾一下其他答案没有涵盖的最后一点......

```
*Euler> :t prime
prime :: (Integral a, RealFrac a, Floating a) => a -> Bool 
```

类型检查器推断，只要是、 和类的实例，`prime`就可以同时接受类型参数。`a``a``Integral``RealFrac``Floating`

```
*Euler> prime 5

<interactive>:1:0:
    Ambiguous type variable `t' in the constraints:
      `Floating t' arising from a use of `prime' at <interactive>:1:0-6
      `RealFrac t' arising from a use of `prime' at <interactive>:1:0-6
      `Integral t' arising from a use of `prime' at <interactive>:1:0-6
    Probable fix: add a type signature that fixes these type variable(s) 
```

但是，当您要求它`prime 5`时，它会抱怨没有默认类型的`5`可以满足这些条件。

你很有可能自己写

```
instance (Integral a, RealFrac b, Floating b) => Integral (Either a b) where ...
instance (Integral a, RealFrac b, Floating b) => RealFrac (Either a b) where ...
instance (Integral a, RealFrac b, Floating b) => Floating (Either a b) where ... 
```

（并且您还必须添加`Num`, `Ord`, `Real`, `Fractional`, 等实例），然后`prime 5`是可以接受的，因为存在`5 :: Either Integer Float`满足类型条件的 a 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-21T11:55:08.980

或者，您可以更改上限测试：

```
prime n = prime' n 2
    where prime' n c | n `mod` c == 0 = False
                     | c * c > n = True
                     | otherwise = prime' n (c+1) 
```

顺便说一句，您不需要`n`作为参数，`prime'`因为它在所有调用中都是不变的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T04:09:56.173

您可以更改`(sqrt n)`为`(sqrt (fromInteger n))`使该功能按预期工作。这是必需的，因为类型`sqrt`是：

```
sqrt :: (Floating a) => a -> a 
```

因此，例如，这样做是错误的：

```
sqrt (2 :: Int) 
```

# java - 使用 Java 通过 USB 直接在爱普生矩阵打印机上发送通用/文本

> ID：886021
> 
> 赞同：1
> 
> 时间：2009-05-20T03:33:44.213
> 
> 标签：java, printing, usb

有没有办法将“ESC”编码字符串直接发送到使用 Java 连接在 USB 上的 Epson 矩阵打印机。我已经成功地使用 LPT1 端口尝试了这个。但是，我们的大多数客户现在都在使用 USB 电缆而不是旧的并行电缆。我遇到的主要问题是如何打开连接打印机的特定 USB 作为 Java 中的输出流。提前感谢任何提示和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T06:56:52.677

这篇[关于 JSR-80 的文章](http://today.java.net/pub/a/today/2006/07/06/java-and-usb.html)可能会对您有所帮助。看起来这根本不是微不足道的，而且依赖于操作系统......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T22:05:34.420

既然您说 LPT1，我认为这是针对 Windows 的。

我没有看到任何 100% Java 解决方案，你想处理硬件

**JNI**

您可以使用 JNI 调用一些用本机语言 (C/C++/Delphi) 编写的 Windows DLL，该 DLL 导出一个函数 SendData。您可以在临时文件（随机文件名）中准备数据，DLL 会将其发送到打印机，然后将其删除。

在 Java 中，您可以使用 load 和 loadlibrary 来加载 DLL。

**使用一些现成的解决方案将其转换为 USB/LPT**

*   打印机的驱动程序。
*   [网络使用命令](https://web.archive.org/web/1/http://techrepublic%2ecom%2ecom/5208-1035-0.html?forumID=101&threadID=278786&messageID=2640038)
*   [DOS2USB 或 DOS2PRN](http://usb-printer.qarchive.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T06:50:39.360

这就是它在 Java 中的实现方式：

```
PrintService pservice = ... // acquire print service of your printer
DocPrintJob job = pservice.createPrintJob();  
String commands = "";
commands += "\u001B\u0045\u000A"; // plain
commands += "Hello ";
commands += "\u001B\u0045\u000D"; // bold
commands += "ESCP!";
DocFlavor flavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;
Doc doc = new SimpleDoc(commands.getBytes(), flavor, null);
job.print(doc, null); 
```

借自：[https ://stackoverflow.com/a/9309845/3196753](https://stackoverflow.com/a/9309845/3196753)

请注意，在某些操作系统上，打印机需要配置为[原始/通用打印设备](https://stackoverflow.com/a/38965500/3196753)。对于 USB 打印机，这通常涉及安装 USB 驱动程序，然后添加具有相同端口的第二台打印机，但使用原始或通用驱动程序。

# ruby-on-rails - 如何离线更新rails？

> ID：886025
> 
> 赞同：2
> 
> 时间：2009-05-20T03:35:21.403
> 
> 标签：ruby-on-rails

有没有办法在没有互联网连接的情况下在电脑上更新 Rails？

它有 Windows XP，如果有的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T03:52:08.717

您可以从可以访问 Internet 的计算机上下载必要的 gem，将它们传输到您要更新的计算机上，然后用于`gem install ...`安装它们。

这里有说明：[如何在 Windows PC 上安装 Ruby on Rails](http://angrys0ul.com/blog/2007/04/25/how-to-install-ruby-on-rails-on-a-windows-pc/)

另一种选择可能是在可从一台 PC 移动到另一台 PC 的便携式外部硬盘驱动器（或闪存驱动器）上运行 Rails。有几个包，Instant Rails 和 Flash Rails，允许您在 Windows 上拥有一个可移植版本的 Rails。不幸的是，就 Rails 版本而言，它们都有些过时了，因此一旦安装它们，您仍然需要进行一些升级。请参阅[便携式 Ruby on Rails 环境](https://stackoverflow.com/questions/258801/portable-ruby-on-rails-environment)。

# java - 从 WSDL 获取所有非内置类型的列表？

> ID：886031
> 
> 赞同：0
> 
> 时间：2009-05-20T03:36:38.517
> 
> 标签：java, xsd, wsdl

给定一个 WSDL/XSD，生成所有简单和复杂类型列表的最简单方法是什么？（首选Java。）

IE

```
<xsd:element name="ThirdPartyProductInfo" type="typens:ThirdPartyProductInfo" minOccurs="0"/>
<xsd:element name="SalesRank" type="xsd:string" minOccurs="0"/>
<xsd:element name="BrowseList" type="typens:BrowseNodeArray" minOccurs="0"/> 
```

我希望输出是：

ThirdPartyProductInfo, BrowseNodeArray, + 以上提到的所有类型。

正则表达式可能会错过一些情况，也许是 JDOM？萨克斯？其他？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T08:45:54.797

您可以使用[XmlBeans](http://xmlbeans.apache.org/)解析 XSD 并检查它。您可能仍然需要大量代码来以编程方式检查 XSD。如果您对 XSD 不太了解，那么 XmlBeans API 可能有点笨拙。Javadoc 非常好，但你必须知道你在做什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T03:52:03.867

[XPath](http://www.w3.org/TR/xpath)是一种快速简便的方法来获取您想要获取的特定元素。在过去的几年里，我没有做太多的 web 服务工作，但我相信[Axis](http://ws.apache.org/axis/java/)工具包附带了一个 WSDL 到 Java 实用程序？如果是这样，那也可能对您有所帮助。

当然，我完全有可能错过您正在尝试做的事情。

干杯!

# vb.net - 如何通过将字符串传递给 VB.NET 中的后台线程来动态调用具有委托的函数？

> ID：886034
> 
> 赞同：0
> 
> 时间：2009-05-20T03:36:54.913
> 
> 标签：vb.net

如何通过将字符串传递给 VB.NET 中的后台线程来动态调用具有委托的函数？

目前我的代码是这个

```
Public Sub invertImageBK(ByVal image As Bitmap)
    Dim snxl As System.ComponentModel.BackgroundWorker = createBW()
    snxl.RunWorkerAsync(New ImageProperties(image.Clone, "invertImage", Nothing))
End Sub
Public Sub grayscaleImageBK(ByVal image As Bitmap)
    Dim snxl As System.ComponentModel.BackgroundWorker = createBW()
    snxl.RunWorkerAsync(New ImageProperties(image.Clone, "grayscaleImage", Nothing))
End Sub
Public Sub colorizeImageBK(ByVal image As Bitmap, ByVal colorize As Color)
    Dim snxl As System.ComponentModel.BackgroundWorker = createBW()
    snxl.RunWorkerAsync(New ImageProperties(image.Clone, "colorizeImage", colorize))
End Sub

Private Sub ConvertImage(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs)
    If e.Argument.extra IsNot Nothing Then
        Dim snxl As New twoarg()
    Else

    End If

End Sub

Private Delegate Function onearg(ByVal image As Bitmap) As Bitmap
Private Delegate Function twoarg(ByVal image As Bitmap, ByVal altcolor As Color) As Bitmap

Private Function createBW() As System.ComponentModel.BackgroundWorker
    Dim cbs As New System.ComponentModel.BackgroundWorker
    AddHandler cbs.DoWork, AddressOf ConvertImage
    Return cbs
End Function

Public Structure ImageProperties
    Dim img As Bitmap
    Dim filt As String

    Public Sub New(ByVal image As Bitmap, ByVal filter As String, ByVal extra As Object)
        img = image.Clone
        filt = filter
    End Sub
End Structure 
```

最终它会引发一个事件来给我我的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T12:24:29.427

这就是我所做的：

```
Private Function oneargImplementation(ByVal image As Bitmap) As Bitmap

End Function

Public Sub Test()

Private ArgOne as onearg = _
    new onearg(AddressOf oneargImplementation)
Dispatcher.Invoke(ArgOne, Windows.Threading.DispatcherPriority.Loaded, New Object() {sender, e})
End Sub 
```

# wpf - 用于点画效果的 WPF 或 Silverlight 3 像素着色器

> ID：886047
> 
> 赞同：2
> 
> 时间：2009-05-20T03:43:31.417
> 
> 标签：wpf, silverlight, hlsl

谁能推荐一种用于 HLSL 像素着色器（用于 WPF 或 Silverlight 3）的算法来产生点画效果？以下是一些示例：[http](http://www.nolinovak.com) ://www.nolinovak.com/、http : [//sprouls.com/](http://sprouls.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T13:04:18.037

以下研究论文可能会有所帮助。 [Jens Krüger 和 Rüdiger Westermann 的高效点画渲染](http://wwwcg.in.tum.de/Research/data/Publications/cgv07_stipple.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-15T22:03:47.190

答案比你想象的更接近。向 Hugues Hoppe ( [http://hhoppe.com](http://hhoppe.com) ) 发送电子邮件，因为他曾经喜欢抚摸表面纹理。他的解释和建议会比你想的更复杂，但他确实知道怎么做。

出色的点画可能需要表面在每个点（渐变？）的主要 3D“方向”，这可能超出着色器模型限制的能力（两次渲染和多个渲染目标，或大型像素顶点数据结构） . 一个简单的第一个版本会将每个像素的灰度值转换为像素为黑色或白色的概率。这将为您提供 1 像素点，这不是您想要的。

您可以尝试将灰度值用作 3D 堆叠纹理中的堆叠维度 (Z)，其中每个纹理 (X,Y) 都是手绘的、外观随机的、均匀密度的点画图案。黑暗级别之间的边界看起来很奇怪，但请尝试在堆叠维度上进行最近点和线性采样。

我不是为你写代码……至少不是免费的。

# sql - 在表变量上创建索引

> ID：886050
> 
> 赞同：221
> 
> 时间：2009-05-20T03:46:17.267
> 
> 标签：sql, sql-server, tsql, indexing, table-variable

您可以在 SQL Server 2000 中的表变量上创建索引吗？

IE

```
DECLARE @TEMPTABLE TABLE (
     [ID] [int] NOT NULL PRIMARY KEY
    ,[Name] [nvarchar] (255) COLLATE DATABASE_DEFAULT NULL 
) 
```

我可以在 上创建索引`Name`吗？

* * *

## 回答 #1

> 赞同：415
> 
> 时间：2013-06-29T21:59:24.203

这个问题被标记为 SQL Server 2000，但为了方便在最新版本上开发的人们，我将首先解决这个问题。

**SQL Server 2014**

除了下面讨论的添加基于约束的索引的方法之外，SQL Server 2014 还允许在表变量声明中使用内联语法直接指定非唯一索引。

示例语法如下。

```
/*SQL Server 2014+ compatible inline index syntax*/
DECLARE @T TABLE (
C1 INT INDEX IX1 CLUSTERED, /*Single column indexes can be declared next to the column*/
C2 INT INDEX IX2 NONCLUSTERED,
       INDEX IX3 NONCLUSTERED(C1,C2) /*Example composite index*/
); 
```

过滤索引和包含列的索引目前无法使用此语法声明，但**SQL Server 2016**进一步放宽了这一点。从 CTP 3.1 开始，现在可以为表变量声明过滤索引。通过 RTM，*可能*也允许包含列，但目前的情况是它们[“由于资源限制可能不会进入 SQL16”](https://connect.microsoft.com/SQLServer/Feedback/Details/2079552)

```
/*SQL Server 2016 allows filtered indexes*/
DECLARE @T TABLE
(
c1 INT NULL INDEX ix UNIQUE WHERE c1 IS NOT NULL /*Unique ignoring nulls*/
) 
```

* * *

**SQL Server 2000 - 2012**

> 我可以在名称上创建索引吗？

简短的回答：是的。

```
DECLARE @TEMPTABLE TABLE (
  [ID]   [INT] NOT NULL PRIMARY KEY,
  [Name] [NVARCHAR] (255) COLLATE DATABASE_DEFAULT NULL,
  UNIQUE NONCLUSTERED ([Name], [ID]) 
  ) 
```

更详细的答案如下。

SQL Server 中的传统表可以具有聚集索引，也可以构造为[堆](http://msdn.microsoft.com/en-us/library/hh213609.aspx)。

聚集索引可以声明为唯一以禁止重复的键值，也可以默认为非唯一。如果不是唯一的，那么 SQL Server 会默默地为任何重复的键添加一个[唯一符](http://msdn.microsoft.com/en-us/library/ms190639%28v=sql.105%29.aspx)，以使它们唯一。

非聚集索引也可以显式声明为唯一的。否则，对于非唯一情况，SQL Server[将行定位器](http://sqlblog.com/blogs/kalen_delaney/archive/2010/03/07/more-about-nonclustered-index-keys.aspx)（聚集索引键或堆的[RID](http://technet.microsoft.com/en-us/library/ms190696%28v=sql.105%29.aspx)）添加到所有索引键（不仅仅是重复项），这再次确保它们是唯一的。

在 SQL Server 2000 - 2012 中，表变量的索引只能通过创建`UNIQUE`or`PRIMARY KEY`约束来隐式创建。这些约束类型之间的区别在于主键必须在不可为空的列上。参与唯一约束的列可以为空。（尽管 SQL Server 在存在`NULL`s 的情况下实现的唯一约束并不符合 SQL 标准中的规定）。此外，一张表只能有一个主键，但可以有多个唯一约束。

这两个逻辑约束都是用唯一索引物理实现的。如果未明确指定，`PRIMARY KEY`则将成为聚集索引和非聚集唯一约束，但可以通过指定`CLUSTERED`或`NONCLUSTERED`明确使用约束声明来覆盖此行为（示例语法）

```
DECLARE @T TABLE
(
A INT NULL UNIQUE CLUSTERED,
B INT NOT NULL PRIMARY KEY NONCLUSTERED
) 
```

由于上述原因，可以在 SQL Server 2000 - 2012 中的表变量上隐式创建以下索引。

```
+-------------------------------------+-------------------------------------+
|             Index Type              | Can be created on a table variable? |
+-------------------------------------+-------------------------------------+
| Unique Clustered Index              | Yes                                 |
| Nonunique Clustered Index           |                                     |
| Unique NCI on a heap                | Yes                                 |
| Non Unique NCI on a heap            |                                     |
| Unique NCI on a clustered index     | Yes                                 |
| Non Unique NCI on a clustered index | Yes                                 |
+-------------------------------------+-------------------------------------+ 
```

最后一个需要一点解释。在这个答案开头的表变量定义中，**非唯一**非聚集索引`Name`由**唯一**索引模拟`Name,Id`（回想一下，SQL Server 无论如何都会默默地将聚集索引键添加到非唯一 NCI 键）。

也可以通过手动添加`IDENTITY`列作为唯一符来实现非唯一聚集索引。

```
DECLARE @T TABLE
(
A INT NULL,
B INT NULL,
C INT NULL,
Uniqueifier INT NOT NULL IDENTITY(1,1),
UNIQUE CLUSTERED (A,Uniqueifier)
) 
```

但这并不是对非唯一聚集索引通常如何在 SQL Server 中实际实现的准确模拟，因为这会将“唯一性”添加到所有行。不仅仅是那些需要它的人。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-14T15:58:11.727

应该理解，从性能的角度来看，@temp 表和支持变量的#temp 表之间没有区别。它们驻留在同一个地方 (tempdb) 并以相同的方式实现。所有差异都出现在附加功能中。请参阅这篇令人惊讶的完整文章：[https ://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server/16386#16386](https://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server/16386#16386)

尽管在某些情况下无法使用临时表，例如在表或标量函数中，但对于 v2016 之前的大多数其他情况（甚至可以将过滤索引添加到表变量中），您可以简单地使用 #temp 表。

在 tempdb 中使用命名索引（或约束）的缺点是名称可能会发生冲突。不仅在理论上与其他过程一起使用，而且在过程本身的其他实例中通常很容易，这些实例会尝试将相同的索引放在其#temp 表的副本上。

为避免名称冲突，通常可以使用以下方法：

```
declare @cmd varchar(500)='CREATE NONCLUSTERED INDEX [ix_temp'+cast(newid() as varchar(40))+'] ON #temp (NonUniqueIndexNeeded);';
exec (@cmd); 
```

这确保了名称始终是唯一的，即使在同一过程的同时执行之间也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-24T07:43:53.457

如果表变量有大数据，那么代替表变量（@table）创建临时表（#table）。表变量不允许在插入后创建索引。

```
 CREATE TABLE #Table(C1 int,       
  C2 NVarchar(100) , C3 varchar(100)
  UNIQUE CLUSTERED (c1) 
 ); 
```

1.  创建具有唯一聚集索引的表

2.  将数据插入临时“#Table”表

3.  创建非聚集索引。

    ```
     CREATE NONCLUSTERED INDEX IX1  ON #Table (C2,C3); 
    ```

# unix - 手册页中的 PROGNAME(x) 引用 -- ()s 中的数字是什么意思？

> ID：886055
> 
> 赞同：11
> 
> 时间：2009-05-20T03:50:52.320
> 
> 标签：unix, manpage

> **可能重复：**
> [为什么类 Unix 环境中的程序名称后有数字？](https://stackoverflow.com/questions/587676/why-do-programs-in-unix-like-environments-have-numbers-after-their-name)

我已经在手册页中看到了几个程序，例如`GREP(3)`和`PING(8)`。()s 中数字的意义是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T04:04:16.783

如果您运行`man man`，您将在手册页中看到以下信息：

```
1   Executable programs or shell commands
2   System calls (functions provided by the kernel)
3   Library calls (functions within program libraries)
4   Special files (usually found in /dev)
5   File formats and conventions eg /etc/passwd
6   Games
7   Miscellaneous (including macro  packages  and  conven‐
    tions), e.g. man(7), groff(7)
8   System administration commands (usually only for root)
9   Kernel routines [Non standard] 
```

一些名称与多个条目相关联，例如在我的系统上，“睡眠”在第 1 节中有一个条目，在第 3 节中有一个条目。您可以指定您想要的条目，例如

```
man 3 sleep 
```

有时我只是猜测

```
man -a sleep 
```

它依次显示与睡眠相关的每个条目。我只是遍历它们，直到找到我想要的那个。你也可以试试

```
man -k sleep 
```

获得稍大的涉及“睡眠”一词的页面列表

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T03:58:32.133

该数字表示手册页所在的部分。对于您的示例：

```
grep(3) 
```

要获取文档，请键入

```
man 3 grep 
```

更常见的是，如果没有`grep(2)`or `grep(1)`，你可以侥幸逃脱

```
man grep 
```

但是，我应该注意的`grep`是在第 1 节中。第 3 节通常是为 C 函数保留的。一个例子是`getopt`：`getopt(1)`指的是命令行实用程序`getopt`，但`getopt(3)`指的是 C 函数`getopt`。同样，`read(1)`它是一个从标准输入读取的程序，但`read(2)`它是用于程序的 POSIX 系统调用——它是您在大多数 Linux（和其他 Unix）系统上可以获得的最低级别的输入形式之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T03:56:43.193

这是为了告诉您手册页部分的帮助... 8 通常是与管理相关的实用程序（/sbin、/usr/sbin 等）的位置

因此 GREP(3) 的帮助位于手册页第 3 部分，您可以`man 3 grep`直接键入以获取 grep(3) 的帮助。

# ruby-on-rails - 如果您使用 Google Checkout，您是否还需要在 Rails 中使用 ActiveMerchant/Spree/一些支付网关？

> ID：886058
> 
> 赞同：3
> 
> 时间：2009-05-20T03:52:22.133
> 
> 标签：ruby-on-rails, paypal, google-checkout, activemerchant

如果您使用 Google Checkout，您是否仍需要使用 ActiveMerchant/Spree/某些支付网关，或者 Google 是否像 ActiveMerchant/Spree 那样充当网关？

此外，使用 ActiveMerchant 可以解决使用 Google Checkout 的任何缺点吗？

此外，除了 Google Checkout 之外还提供 PayPal 是否是个好主意？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T05:17:30.857

Google Checkout 和 PayPal 都不同于“传统”支付处理解决方案，因为它们不需要几乎相同数量的设置工作即可开始。它们结合了信用卡处理和商家帐户传统上独立的角色。好处包括更简单的实施和更便宜的价格。缺点是他们倾向于控制更多的体验——例如，Google Checkout 和 PayPal 都有自己的登录系统，您的用户可能会将其视为支付工作流程的一部分。如果您对 Google Checkout 或 PayPal 不满意（例如，两者都有关于扣留商家付款的恐怖故事），那么您通常会比在付款处理方和商家帐户托管方之间分配角色时更难。

如果您想使用完全定制的解决方案，我推荐 ActiveMerchant。它主要为包括 PayPal 在内的各种信用卡处理公司提供统一的、易于使用的 API。

最后，最重要的因素是您的客户对什么感到满意。许多非美国销售将严重偏向 PayPal 或使用手机支付；早期采用技术的人群更有可能拥有使用谷歌结账所需的谷歌账户，而大多数其他主要位于美国的在线商店最好接受信用卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-02T01:09:47.663

Spree 尚不支持 Google Checkout，但可以添加对它的支持。它实际上是一个实施起来相当复杂的标准，但 Spree 已经添加了对 Paypal 等价物（网站支付标准）的支持。一旦核心团队中的某个人需要付费客户的 Spree，就可能会向 Spree 添加支持。

应该注意的是，ActiveMerchant 会为您提供一些服务，例如 Paypal，但它不会提供一切。Spree 使用 ActiveMerchant 处理其 IPN，但这种支持归结为一些方便的包装器。大多数必要的逻辑仍然需要在 ActiveMerchant 之外实现。因此，如果您的电子商务解决方案已经为您打算使用的支付服务提供支持，这将很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-19T12:07:31.207

Spree 现在使用以下扩展名处理 Google Checkout：http: [//github.com/railsdog/spree-google-checkout](http://github.com/railsdog/spree-google-checkout)

# ruby-on-rails - 当文件更改时，如何使 lib/ 中的代码自动重新加载？

> ID：886060
> 
> 赞同：15
> 
> 时间：2009-05-20T03:53:34.083
> 
> 标签：ruby-on-rails

[这是对这个问题](https://stackoverflow.com/questions/285148/where-should-my-non-model-non-controller-code-live)的跟进。在开发过程中，每次更改 lib/ 中的代码时，我都必须重新启动 rails 应用程序才能使代码更改生效。如何让此代码自动重新加载，如控制器、模型等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:46:10.717

对于**Rails 3**，将文章中给出的说明与@science 的答案不同。在您的`environments/development.rb`文件中，添加以下行：

```
ActiveSupport::Dependencies.autoload_paths << File::join( Rails.root, 'lib')
ActiveSupport::Dependencies.explicitly_unloadable_constants << 'MyModuleInLibFolder' 
```

当然，用你的模块名称替换`MyModuleInLibFolder`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-12-21T06:53:32.087

```
module ActsAsReloadable
  def self.included(base)
    ActiveSupport::Dependencies.explicitly_unloadable_constants << base.name if Rails.env == 'development'
  end
end 
```

要使用它，只需`include ActsAsReloadable`在您的 lib/* 文件`config.autoload_paths += %W(#{config.root}/lib)`中添加`config/application.rb`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-28T22:23:13.563

为什么不直接输入

```
load Rails.root + '/lib/your_lib.rb' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T09:27:44.830

如果您已经使用了以前的方法但不起作用（例如我的情况），请尝试使用`config.reload_classes_only_on_change`in `development.rb`。

Rails 4.2 在这里✋</p>

# php - wget 完成下载文件后运行 MySQL Query

> ID：886061
> 
> 赞同：1
> 
> 时间：2009-05-20T03:54:31.633
> 
> 标签：php, mysql, bash, download, wget

我需要在后台运行的 wget 上运行特定的 mysql 查询，完成下载文件。例如...

> wget [http://domain/file.zip](http://domain/file.zip)

然后运行：

> 更新`table`集`status`= 'live' WHERE `id`= '1234'

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T04:40:04.410

我建议在子 shell 中启动 wget 命令，以便在运行 mysql 命令之前确保它完成。在 bash 中，这是用括号完成的。

也使用`&&`这样 mysql 命令仅在 wget 命令具有成功退出状态时运行。

```
#!/bin/sh
(
  wget "http://domain/file.zip" && mysql -u user -ppassword database -e "UPDATE..."
) & 
```

将密码以明文形式放在脚本中[不一定是一个好主意](http://dev.mysql.com/doc/refman/5.1/en/password-security-user.html)，因为它可以在`ps`列表中查看。

相反，您可以依赖文件中的`[client]`部分`~/.my.cnf`。您也可以使用`MYSQL_PWD`环境变量。这些解决方案中的任何一个都意味着命令列表中看不到密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T04:34:29.857

`wget http://domain/file.zip && mysql -u user -ppassword database -e "UPDATE table SET status = 'live' WHERE id = '1234'"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T04:34:54.413

在 bash 中，它可能很简单：

```
#!/bin/bash
wget -q http://domain.tld/file.zip || exit 0
/usr/bin/php somefile.php 
```

使用包含 MySQL 查询的 .php 文件。

您也可以通过 MySQL 客户端（已经发布）直接运行 MySQL 语句，但您应该小心在您的系统日志/历史记录中包含您的 MySQL 密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T03:56:27.780

好吧，你可以把它放在一个shell脚本中。

我不太了解壳牌，但无法告诉你怎么做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T04:17:22.783

为什么不使用`file_get_contents`或`curl`从 PHP 中下载文件？

```
$data = file_get_contents('http://domain/file.zip');
file_put_contents('file.zip', $data);
mysql_query("UPDATE table SET status = 'live' WHERE id = '1234'"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T04:31:00.640

因此，您可以在 Python 中编写脚本...

```
#!/usr/bin/python
import sys, MySQLdb, urllib

urllib.urlretrieve(sys.argv[1], sys.argv[2])
db = MySQLdb.connect(host="localhost", user="username", passwd="password", db="database")
cursor = db.cursor()
cursor.execute("UPDATE table SET status = 'live' WHERE id = '1234'") 
```

这将源 URL 作为第一个参数，将目标文件名作为第二个参数。请注意，这使用 Python 自己的 URL 检索库 urllib，如果出于任何原因您必须专门使用 wget，您可以导入“os”模块并使用 os.system(“您的命令行”)。

在 unix 中，您可以通过键入“python scriptname.py &”在后台运行脚本

# rss - 如何重组这个 RSS 提要？

> ID：886065
> 
> 赞同：0
> 
> 时间：2009-05-20T03:56:25.923
> 
> 标签：rss, yahoo-pipes

我正在使用如下结构的 RSS 提要：

标题

字符串
1 字符串 2

我想以某种方式即时更改提要，使其看起来像这样：

标题

标题（字符串 2）

基本上，我想将标题字符串向下移动到 RSS 项目描述中，在 RSS 项目中的第二个字符串旁边。

现在提要很标准，标题+描述，描述由两个字符串组成。我正在尝试重新格式化它，以便它在 Twitter 中显示得更好。我想将标题向下移动到描述字段中，替换第一个字符串，同时保留第二个字符串。

对不起，这太模糊了。我认为雅虎管道可能能够让我到达那里，但我没有看到任何明显的工具可以让我重新排列这些元素的组成。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-10T12:07:52.437

我使用 RegEx 模块（不是过滤器！）来做到这一点。它看起来像：

```
Rules
In |item.title|     replace |(.*)|     with |$1 (${item.string2})| 
```

# flash - 使用 MXMLC 从命令行编译 actionscript

> ID：886071
> 
> 赞同：18
> 
> 时间：2009-05-20T04:00:15.940
> 
> 标签：flash, actionscript-3, actionscript, command-line, mxmlc

我有一个由两个文件组成的小动作脚本“项目”，分别称为 foo.as 和 bar.as。由于我不会详细介绍的原因，我真的很想从命令行构建 .SWF，而不是建立任何形式的正式项目。我曾经使用过的每个编译器都允许您这样做，但对于我来说，我无法弄清楚如何强制 MXMLC 编译这两个文件并将它们链接到 SWF。

天真地，我试试

```
MXMLC foo.as bar.as
```

但我被告知只允许一个源文件。

好的，假设我分别编译了这两个文件，我将如何将它们链接在一起以获得最终的 SWF？

注意：我有两个文件而不是一个文件的唯一原因是每个文件只需要一个类。我尝试将两个类放在一个文件中并制作其中一个类`private`，或者`internal`这些想法都不起作用。我会欣喜若狂地发现我可以在一个文件中放置多个类（只有一个是公开的）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-20T21:02:39.787

这是一个两部分的问题，所以我将分别回答。

**将两个类文件编译成一个 SWF**

MXMLC 将自动编译从你给它的入口点找到的所有类（你的主类）。它从您的导入语句和完整的类路径定义中查找类。

这是使用 MXMLC 命令行编译 AS3 项目的非常好的[指南。](http://www.senocular.com/flash/tutorials/as3withmxmlc/)这篇文章有点过时了，但信息仍然很好。他详细介绍了使用命令行编译器时需要了解的内容，包括 MXMLC 选项、编写 BAT 脚本以及一些关于 AS3 的内容，如果您知道自己在做什么，您可能会跳过这些内容。

**一个文件中有多个类**

AS3 允许每个文件拥有一个类，以及任意数量的“帮助”类。它不支持像 Java 那样的受保护和私有类。助手类仅在定义它们的文件中可见。

辅助类位于包声明之外（这对我来说有点奇怪）。这是一个例子：

```
package com.mynamespace
{
     public class Foo 
     {
          private var _fooHelper:FooHelper = new FooHelper();
     }
}

// helper class imports also go outside the package.
import com.example.xml.SaxHandler;
class FooHelper
{
     private var bar:Number = Math.random();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T11:29:11.393

如果主文件/类需要/使用其他文件的类，其他文件也会被编译成 swf。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T12:46:19.927

正如 Hippo 所说，编译器会自动将通过您的代码使用的所有类编译成 SWF，默认情况下它是递归的。

您还可以阅读[MXMLC 编译器的所有选项](http://flexstuff.googlepages.com/FlexCompilerOptions.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-05T19:31:23.820

如果您对自动化该过程感兴趣，您还可以使用[Project Sprouts](http://projectsprouts.org)，它包含的内容比您要求的要多得多 - 但确实使您能够从终端启动构建和测试运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T03:06:51.767

如果你使用[grunt](http://gruntjs.com/)作为任务管理器（用于 js），你可以使用这个插件：

[https://github.com/JamesMGreene/grunt-mxmlc](https://github.com/JamesMGreene/grunt-mxmlc)

您设置配置选项，然后从命令行运行它：

```
grunt.initConfig({
  mxmlc: {
    options: {
      // Task-specific options go here.
    },
    your_target: {
      // Target-specific file lists and/or options go here.
    },
  },
}) 
```

# sql - 在 SQL Server 中修改 xml 元素名称

> ID：886073
> 
> 赞同：5
> 
> 时间：2009-05-20T04:04:06.970
> 
> 标签：sql, sql-server, xml

我想用以下语句更改元素名称：

```
SET @myDoc.modify('replace value of (/CustomerInfo)[1] with "Customer"') 
```

从
< **CustomerInfo** >
    <ID>1</ID>
</ **CustomerInfo** >
到
< **Customer** >
    <ID>1</ID>
</ **Customer** >
但失败了。那么我怎样才能在 sql 中更改它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T04:42:53.990

我尝试了以下 sql:
select @myDoc=(
select @myDoc.query('/CustomerInfo/node()')
for xml raw('Customer'),type)
我想它解决了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T16:16:02.840

我认为您需要使用 .query 或 .nodes 将值选择到结果集中，该结果集将使用[FOR XML 呈现为您想要的 XML](http://msdn.microsoft.com/en-us/library/ms178107(SQL.90).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T05:22:21.783

我有一个非优雅的方法：
将 xml 转换为 varchar，然后替换它。

# c# - 如何拦截所有关键事件，包括 ctrl+alt+del 和 ctrl+tab？

> ID：886076
> 
> 赞同：5
> 
> 时间：2009-05-20T04:04:24.707
> 
> 标签：c#, c++, windows, keyboard

我正在编写一个屏幕保护程序类型的应用程序，它需要阻止用户在不输入密码的情况下访问系统。我想捕捉/抑制用户可能尝试退出应用程序的各种方法，但我所做的所有研究似乎都指向“你不能”。

C# 或 C++ 中的任何东西都会很棒。我曾想过禁用键盘，但我会遇到其他问题。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-20T04:08:14.473

你不能。Ctrl+Alt+Del 的全部意义在于只有系统才能处理它，因为这样系统总是*可以*处理它。

幸运的是，Windows 内置了对受密码保护的屏幕保护程序的支持（可作为“显示属性”中的“恢复时，密码保护”选项或通过组策略获得）。就用那个。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-20T04:21:25.107

补充一下 Shog9 所说的，如果您的应用程序可以拦截 ctrl+alt+del，那么您的应用程序将能够伪装成 Windows 登录对话框，并通过这样做欺骗最终用户将他们的凭据输入到您的应用程序中。

如果您确实想替换 Windows 登录对话框，请参阅[Winlogon 和 GINA](http://msdn.microsoft.com/en-us/library/aa380543(VS.85).aspx)（但这里说“GINA DLL 在 Windows Vista 中被忽略”，我还没有听说 Vista 是什么）。

> 如果有人问我不会告诉他们他们不能。

更具体地说，您的“应用程序软件”不能：相反，根据设计，只有“系统软件”才能做到这一点；并不是说您不允许或不能编写系统软件，而是您的 OP 似乎很清楚地询问如何在不编写系统软件的情况下做到这一点……答案*是*您可以t：因为该系统旨在防止应用程序挂钩这些组合键。

> 你能给我写系统东西的方向吗？我实际上认为如果它是系统级别的会更好。这对于OEM来说真的很重要。另外，如果我在系统级别编写它，我可以编写一个应用程序来控制它。

例如，键盘过滤设备驱动程序或 GINA DLL 将被视为系统软件：由管理员（或 OEM）安装并作为操作系统的一部分运行。

我不知道 GINA 的名字。我已经（上面）在 MSDN 中给出了一个链接。我希望它是 Win32 用户模式代码。

设备驱动程序是一个不同的主题：例如[，驱动程序开发入门](https://stackoverflow.com/questions/876155/876197)。

> 有没有办法重新映射键盘，以便删除不在它所在的位置？

我仍然不确定您和/或您的老板是否有正确的想法。恕我直言，您不应该是阻止用户按 Ctrl-Alt-Del 的应用程序。如果您想阻止用户在不输入密码的情况下访问系统，那么您应该锁定（密码保护）系统，就像用户按下 Ctrl Alt Del 然后选择“锁定这台计算机”一样。要解锁计算机，他们需要按 Ctrl Alt Del 并将其凭据输入 WinLogon。

但是，忽略你应该做的事情，而是专注于你有能力做的事情，如果你想拦截键盘，显然是可以做到的。我自己没有研究过键盘，但[这篇文章](http://www.eggheadcafe.com/conversation.aspx?messageid=33581352&threadid=33581352)和[这篇文章](http://www.eggheadcafe.com/conversation.aspx?messageid=33581355&threadid=33581352)声称通过编写“键盘过滤驱动程序”（这是一种内核模式，而不是 Win32 设备驱动程序）取得了成功。如果你写其中一个，你可能会得到一些回击，例如[来自 DDK MVP 的](http://www.eggheadcafe.com/conversation.aspx?messageid=33581353&threadid=33581352)反应，或者[来自反窥探产品的反应](http://www.snoopfree.com/help_file/Breaches.htm#Keyboard%20Filter%20Drivers)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T04:13:31.397

我还没有测试过，但是使用 SetWindowsHookEx() 怎么样

来自 MSDN 文档：WH_KEYBOARD_LL

Windows NT/2000/XP：安装一个监控低级键盘输入事件的挂钩程序。有关详细信息，请参阅 LowLevelKeyboardProc 挂钩过程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T04:37:48.563

可以拦截crtl+alt+del，虽然微软显然很难做到，因为这样你就可以弹出一个假锁对话框，并记录人们的密码。

答案是编写设备驱动程序。我不记得您是否可以只使用普通的旧键盘过滤器，或者您是否必须编写键盘 ISR。无论哪种方式，它肯定是可能的，但如果你没有驾驶经验，会很痛苦。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-11T19:46:06.587

由于这似乎是一个很好的收集点，可以收集各种手段来“拦截”三个关键的psuedo-break control alt delete，这是我昨天遇到的可能有用的东西。

[http://cuinl.tripod.com/Tips/enablectrldel.htm](http://cuinl.tripod.com/Tips/enablectrldel.htm)

*在我看来*，当似乎唯一实用和及时的选择是切断电源（即机械移除过载的类机器人手持电脑的电池）以停止任何进程或故障导致相当稳固和完整（或长时间持久的）反应迟钝——似乎危险和令人沮丧的血统仍在继续——并且继续变得更糟。

尤其是去掉了机械扬声器音量控制等明智而直接的东西。（当然，笨重，更多的物质，但当然这只是事情，对个人或存在有什么好处是无限和完美的意识没有处理它或它的经验？）

它是设计环境的一系列方法，负责响应关键且真正有意义的技术界面的用户部分。（ 唯一的？）

我说把一些按钮——直接到硬件控制——放回东西上——至少直到这些技术的软件方面完全适应人工软接口，我在对所有启发式的详尽说明中解释了这一点规定。

即使在宇宙的机制中，我打赌也有一个方便的重置、恢复、暂停、停止类型的功能，以确保存在的安全性和基本可行性存在：智能意识和意志。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-15T11:55:15.853

如果您只想阻止对任务管理器的调用，则在隐藏窗口中启动 taskmgr.exe 就可以完成这项工作

```
 ProcessStartInfo taskmgr = new ProcessStartInfo()
    {
        FileName = "taskmgr.exe",
        WindowStyle = ProcessWindowStyle.Hidden
    };

    Process.Start(taskmgr); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-20T04:13:17.187

您可以在 XP 和以前的版本中实现这一点，但不再使用 Vista。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-20T04:44:17.277

尝试调查您是否可以编写一个应用程序，将其作为受密码保护的屏幕保护程序启动。

屏保可以做的不仅仅是显示漂亮的图片——我之前看过交互式屏保，它使用鼠标和键盘来提供一个简单的游戏，虽然我不记得我看到它运行在哪个版本的窗口上......一直是 Windows 95。（在这种情况下，所有赌注都关闭）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-20T07:06:05.573

在程序运行时拦截 ctrl 和 alt 按键并取消这些按键怎么样？

我不知道这在 Vista 中的效果如何，但值得一试。

我记得在 2001 年左右做了类似的事情，所以它可能在 98 上运行。已经太久了，因为我什至没有尝试过像锁定 ctrl-alt-del 这样的事情。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-25T06:51:14.057

好的..我不打算在这里发布代码但是gyst是这个

创建一个键盘钩子。当用户按下 ctrl || 替代 || 删除 set bools 为 true .. 如果他们按其他任何东西将它们全部设置为 false。

```
switch (p_key)
            {
                default: Clear(); break;

                case Keys.LMenu: altHit = true; break;
                case Keys.RMenu: altHit = true; break;
                case Keys.LControlKey: ctrlHit = true; break;
                case Keys.RControlKey: ctrlHit = true; break;
                case Keys.Delete: delHit = true; break; 
```

当屏幕有焦点时，它会释放到任务管理器，关闭该死的东西。屏幕闪烁得如此之快，以至于用户从未注意到它。我可以做任何我想做的事。

我承认这是一个杂牌，但它确实会产生预期的效果。（哦，我希望我不必这样做）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-09-28T21:53:03.987

Mark Russinovich (http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx) 的“Process Explorer”就是这样做的，而且在 Sysinternals 被微软收购之前就已经这样做了。

这篇 2002 年更新于 2006 年的文章解释了一种无需编写键盘驱动程序即可实现的方法。 [http://www.codeproject.com/KB/system/preventclose.aspx?msg=1666328](http://www.codeproject.com/KB/system/preventclose.aspx?msg=1666328)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-10-09T20:59:15.320

您仍然可以`Ctrl + Alt + Del`在 Windows 7 中拦截。

这是 Process explorer 的方式：

[http://mygreenpaste.blogspot.com/2005/07/image-file-execution-options-good-evil.html](http://mygreenpaste.blogspot.com/2005/07/image-file-execution-options-good-evil.html)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-07T02:27:43.907

我正在阅读这个文档页面，一些思考和搜索让我想到了这个问题。

[https://docs.microsoft.com/en-us/windows/win32/learnwin32/keyboard-input](https://docs.microsoft.com/en-us/windows/win32/learnwin32/keyboard-input)

我没有测试过，但有这个摘录：

> 顾名思义，系统击键主要是供操作系统使用的。如果您截获 WM_SYSKEYDOWN 消息，请在之后调用 DefWindowProc。否则，您将阻止操作系统处理该命令。

如果它真的像它说的那样工作，对我来说似乎是一个安全漏洞。

# c# - Silverlight 自定义控件中的属性 TargetType 的属性值无效

> ID：886078
> 
> 赞同：0
> 
> 时间：2009-05-20T04:05:40.120
> 
> 标签：c#, .net, silverlight, silverlight-3.0

知道为什么我使用以下代码收到此错误吗？我正在尝试为 Silverlight 3 中的自定义控件创建默认模板。

IInvalid 属性值自定义：属性 TargetType 的 CaptionControl。[行：5 位置：23]

```
<ResourceDictionary 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:custom="clr-namespace:Controls.Silverlight">
    <Style TargetType="custom:CaptionControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="custom:CaptionControl">
                    <Grid x:Name="RootElement">

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

.

```
using System.Windows;
    using System.Windows.Controls;

    namespace Controls.Silverlight
    {
        public class CaptionControl : ContentControl
        {
            public CaptionControl()
            {
                this.DefaultStyleKey = typeof(CaptionControl);
            }

            public double CaptionWidth
            {
                get { return (double)GetValue(CaptionWidthProperty); }
                set { SetValue(CaptionWidthProperty, value); }
            }

            // Using a DependencyProperty as the backing store for CaptionWidth.  This enables animation, styling, binding, etc...
            public static readonly DependencyProperty CaptionWidthProperty =
                DependencyProperty.Register("CaptionWidth", typeof(double), typeof(CaptionControl), null);

            public string Caption
            {
                get { return (string)GetValue(CaptionProperty); }
                set { SetValue(CaptionProperty, value); }
            }

            // Using a DependencyProperty as the backing store for Caption.  This enables animation, styling, binding, etc...
            public static readonly DependencyProperty CaptionProperty =
                DependencyProperty.Register("Caption", typeof(string), typeof(CaptionControl), null);

        }
    } 
```

IInvalid 属性值自定义：属性 TargetType 的 CaptionControl。[行：5 位置：23]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T03:17:48.703

我发现了问题。我认为 Visual Studio 以某种方式自动在我的 App.xaml 中输入了以下内容，从而解决了问题。

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/Controls.Silverlight;Component/themes/generic.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

# popen - popen和文件操作

> ID：886093
> 
> 赞同：1
> 
> 时间：2009-05-20T04:15:28.197
> 
> 标签：popen, php

与[这个问题有关](https://stackoverflow.com/questions/881499/php-long-running-script)

我的脚本基本上运行良好，但有时它在 fread 函数调用时停止响应，我似乎找不到失败的原因。

```
private function run_lengthy_job($command, $message) {
    for($handle = popen($command, 'r'); !feof($handle); sleep(2)) {
        printf("[%s]\t%s\n", time(), $message);

        // log the operation
        exec(sprintf('logger "%s"', 
            escapeshellarg(fread($handle, 1024))));
    }

    pclose($handle);
} 
```

示例命令

```
hg clone -v --debug http://some.repository.com/hgwebdir.cgi/some_repo some_repo 
```

现在它在克隆一个大型存储库时失败了。即使我将 fread 更改为 fgets，同样的问题仍然存在。

关于我的php环境的简要信息，

```
PHP 5.2.4-2ubuntu5.6 with Suhosin-Patch 0.9.6.2 (cli) (built: Apr 17 2009 14:29:38) 
Copyright (c) 1997-2007 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2007 Zend Technologies
    with Xdebug v2.0.3, Copyright (c) 2002-2007, by Derick Rethans 
```

在 ubuntu 8.04.2 上运行

编辑：尝试 proc_open 而不是 popen 并且脚本卡在同一个地方。编辑：用stream_get_contents替换fread，但仍然停留在同一个地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T07:05:10.053

我目前的解决方案

```
private function run_lengthy_job($command, $message) {
    printf("%s\t", $message);

    for($handle = popen($command, 'r'),
        stream_set_blocking($handle, FALSE),
        stream_set_timeout($handle, 3); 
        !feof($handle); sleep(1)) {

        echo '.';

        exec(sprintf('logger "%s"', 
            escapeshellarg(stream_get_contents($handle))));
    }

    $exit_status = pclose($handle);

    if(pcntl_wifexited($exit_status) 
        && pcntl_wexitstatus($exit_status) == 0) {
        echo "done!\n";
    } else {
        echo "failed!\n";
    }
} 
```

调用 fread 时发生的长时间等待可能是因为对 $handle 的访问被阻止，以便 popen 将输出写入其中。

# assemblies - 是否可以编写一个动态生成新类并用新类修补自身的程序集？

> ID：886094
> 
> 赞同：4
> 
> 时间：2009-05-20T04:15:47.607
> 
> 标签：assemblies, reflection.emit, self-modifying, dynamically-generated-co

是否可以编写一个动态生成/发出新类并修补自身以包含新类的程序集？

如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T14:03:53.353

我在这里用另一种方式问了这个问题：[使用 AssemblyBuilder，如何使所有或任何引用的程序集嵌入而不是链接到保存的程序集中？](https://stackoverflow.com/questions/885128/using-assemblybuilder-how-can-i-make-all-or-any-of-the-referenced-assemblies-emb)

用动态生成的代码修补现有的 dll 将导致与将原始 dll 嵌入动态生成的代码中相同的结果——包含两者内容的单个程序集。

似乎以一种或另一种方式消除依赖关系并将多个程序集的内容打包到一个中，ILMerge 实用程序是最优雅的解决方案。

唯一的问题是合并后的 dll 中生成的类型与两个原始 dll 中的相同类型不兼容。例如，如果原始 DLL 发出一个新程序集，将其与自身合并，然后加载新程序集......它不能使用自己的类型来引用新程序集中与任一原始组件。

换句话说：[dll_generator] 中的 A 类引用了 [dll_1]。A 类生成 [dll_2]，它基于并且当然也引用了 [dll_1]。A 类调用 ILMerge 将 [dll_2] 与其依赖项 [dll_1] 组合以生成 [dll_merged]。[dll_merged] 中的所有类型都与 [dll_1] 和 [dll_2] 中的任何原始类型都不兼容，因此如果类 A 加载 [dll_merged] 并尝试对其进行任何涉及其原始引用中的文字类型名称的事情 [ dll_1]，它失败了，因为类型不兼容。类 A 可以使用 [dll_merged] 中的类型的唯一方法是按名称加载它们并完全使用“类型”对象和反射——或者针对新的 [dll_merged] 动态编译源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T04:32:47.300

最好的方法是使用依赖注入/控制反转，甚至是简单的服务定位器。

您的新程序集将创建一个新的具体实现并注册它而不是旧实现。

我敢肯定，任何更具异国情调的东西确实会是一个可怕的黑客攻击。

# css - 如何保持居中的背景图像不破坏布局？

> ID：886096
> 
> 赞同：0
> 
> 时间：2009-05-20T04:16:35.170
> 
> 标签：css

[http://www.goodshow.tv](http://www.goodshow.tv)

我的背景图片有问题。如果浏览器足够宽，布局看起来是正确的，但是当您将其设置得太窄时，背景会一直向左移动。有没有办法让它不动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T04:35:05.833

当页面宽度小于 div 的宽度时会发生此问题`<div id="body">`，导致该 div 不再居中。我发现至少可以通过添加以下内容在 Firefox 上解决此问题：

```
html { min-width: 980px } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T04:27:41.593

去除背景图片中的白色部分，并使用 CSS 的背景规则将左侧边栏背景设为白色。仅将图像添加到右侧部分。保持左侧边栏的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T04:24:52.703

我想知道这是否与同时使用 body 和 #body css 选择器有关（一个用于被调用的标签`body`，一个用于被命名的 div`body`

导航区域是否具有白色背景而#content div具有图像背景？

你可以试试这个而不是你拥有的吗？：

```
body {
    margin: 0px;
    padding: 0px;
}
#content {
    background-color: #333;
    background-image: url(../images/bg.png);
    background-repeat: repeat-y;
    background-position: center;
    float: right;
    width: 720px;
    padding-top: 35px;
    padding-left: 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:25:07.397

你不能用白色背景的 div 封装整个左侧吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T04:25:46.960

我认为问题在于导航和内容区域都是浮动的，并且内容具有绝对宽度。

最快的解决方法是将#nav 上的背景颜色设置为白色。这仍然会导致标题出现问题（Good Show，和亚特兰大的创意工作室），但我认为你需要重新审视你是如何做那部分的（它们只是 2 张图片）

可能最好有 2 列一直到顶部，这些图像可以在每个顶部的固定高度 div 中

# c# - 如何从 ASP.net 2.0 中的字符串中删除字符

> ID：886105
> 
> 赞同：0
> 
> 时间：2009-05-20T04:18:37.463
> 
> 标签：c#

嗨，我有一个类似 ME_NAME 的字符串，我在网格视图中显示为标题，但现在我需要从字符串中删除第一个字符 ME_ 并在 gridview 标题中仅显示 NAME。但是我从这里获取标题值数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T04:28:09.877

我想我知道你在说什么，乔伊。

您有一个 GridView，您使用 AutoGenerateColumns 为 true 的数据源直接绑定它。要获得您希望显示的标题，您可以像这样修改您的 SQL 查询 -

```
SELECT
    ME_NAME AS [Name]
FROM
    TABLE 
```

编辑：正如您所说，您想从前端执行此操作，您可以连接到 GridView 的 OnRowDataBound 事件，并在其中编写以下代码 -

```
if(e.Row.RowType == DataControlRowType.Header)
{
    //Apply the logic for removing the "ME_" string from the header columns.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:26:32.373

对不起，如果这太字面了......

```
var olsstr = "ME_NAME";
var newstr = olsstr.Remove(0, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T04:27:29.143

如果您的字符串总是以相同的值开始，或者变化非常有限，那么简单的`.Replace()`应该可以完成这项工作：

```
String str = "ME_NAME";
String str2 = "ANOTHER_NAME";

str = str.Replace("ME_", String.Empty); // str == "NAME"

str2 = str2.Replace("ME_", String.Empty).Replace("ANOTHER_", String.Empty); 
```

如果变化较大，您可能需要考虑使用[正则表达式](http://www.regular-expressions.info)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:27:43.107

有多种方法可以从字符串中删除“ME_”部分。以下是您可以使用的一对：

```
 string s1 = "ME_NAME";

    string s2 = s1.Replace("ME_", "");
    // or
    s2 = s1.Split('_')[1];
    // or
    s2 = s1.Substring(s1.IndexOf('_') + 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T04:29:50.937

不过，在您的第二条评论中，听起来您采取了错误的方法。如果这些是数据库中的列名，那么您确实应该在 SQL 子句中重命名它们：

```
SELECT ME_NAME As Name, ME_BIRTHDAY As Birthday FROM tbl_ME; 
```

# vba - Outlook 中的用户窗体没有响应（无法关闭，按钮单击事件不会触发）

> ID：886106
> 
> 赞同：0
> 
> 时间：2009-05-20T04:19:01.207
> 
> 标签：vba, outlook, userform

我在 Outlook VBA 宏中创建了一个简单的用户窗体 - 我可以使用以下代码使窗体可见：

```
VBA.UserForms.Add (PasswordForm.Name)
PasswordForm.Show（模态）

```

...而且`UserForm_Initialize()`事件确实会触发。但是单击表单上的“提交”按钮没有任何作用 -`SubmitButton_Click()`事件（通过双击设计器中的按钮自动创建）永远不会触发。此外，用户窗体在窗口的右上角有一个通常的小红色 X，但单击它不会执行任何操作（窗体不会关闭或退出）。

知道我可能做错了什么吗？我对 VBA 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:25:07.720

有时 VBA 中的控件会与其事件分离。这可能是因为您重命名了控件，也可能是因为您不小心重命名了事件过程（尽管由于其他原因很少会发生这种情况）。此外，如果您在运行表单之前忘记“编译”，您可能会在导致问题的表单上遇到错误。

仔细检查的最简单方法是在设计视图中打开表单，选择有问题的按钮并按 F7。如果创建了一个新过程，请复制粘贴您的代码，然后将旧代码复制/粘贴到其中，然后删除旧代码。

完成后，转到“调试”菜单并单击“编译”。如果检测到任何错误，请更正它们并再次单击“编译”。重复，直到它无怨无悔地编译。然后尝试再次运行您的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T00:58:51.713

好的，解决了：我改变了：

```
PasswordForm.Show (Modal) 
```

至

```
PasswordForm.Show 
```

现在它可以工作了，尽管我必须稍微改变它的工作方式以适应表单不再是模态的事实（我想无论如何这是更好的解决方案，模态可能会让用户感到烦恼，它是只是我现在必须检查他们是否提交了表格等）。

谢谢大家的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T16:04:10.040

在 Office 03/07 中，如果要确保它显示模式，请将表单的`.ShowModal`行为设置为“ `True`”。我在演出期间尝试使表单模态化时遇到了问题。

# python - 我可以使用 re.sub（或 regexobject.sub）替换子组中的文本吗？

> ID：886111
> 
> 赞同：0
> 
> 时间：2009-05-20T04:20:04.233
> 
> 标签：python, regex, regex-group

我需要解析一个如下所示的配置文件（简化）：

```
<config>
<links>
<link name="Link1" id="1">
 <encapsulation>
  <mode>ipsec</mode>
 </encapsulation>
</link>
<link name="Link2" id="2">
 <encapsulation>
  <mode>udp</mode>
 </encapsulation>
</link>
</links> 
```

我的目标是能够更改特定于特定链接的参数，但我无法让替换正常工作。我有一个正则表达式可以隔离特定链接上的参数值，其中该值包含在捕获组 1 中：

```
link_id = r'id="1"'
parameter = 'mode'
link_regex = '<link [\w\W]+ %s>[\w\W]*[\w\W]*<%s>([\w\W]*)</%s>[\w\W]*</link>' \
% (link_id, parameter, parameter) 
```

因此，

```
print re.search(final_regex, f_read).group(1) 
```

打印 ipsec

[regex howto](http://docs.python.org/howto/regex.html)中的示例似乎都假设一个人想在替换中使用捕获组，但我需要做的是替换捕获组本身（例如将 Link1 模式从 ipsec 更改为 udp）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T04:58:12.423

我必须给你一个强制性的：“不要使用正则表达式来做到这一点。”

[看看使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/documentation.html#Parsing%20XML)做到这一点是多么的容易，例如：

```
>>> from BeautifulSoup import BeautifulStoneSoup
>>> html = """
... <config>
... <links>
... <link name="Link1" id="1">
...  <encapsulation>
...   <mode>ipsec</mode>
...  </encapsulation>
... </link>
... <link name="Link2" id="2">
...  <encapsulation>
...   <mode>udp</mode>
...  </encapsulation>
... </link>
... </links>
... </config>
... """
>>> soup = BeautifulStoneSoup(html)
>>> soup.find('link', id=1)
<link name="Link1" id="1">
<encapsulation>
<mode>ipsec</mode>
</encapsulation>
</link>
>>> soup.find('link', id=1).mode.contents[0].replaceWith('whatever')
>>> soup.find('link', id=1)
<link name="Link1" id="1">
<encapsulation>
<mode>whatever</mode>
</encapsulation>
</link> 
```

查看您的正则表达式，我无法确定这是否正是您想要做的，但无论您想要做什么，使用像 BeautifulSoup 这样的库都比尝试将正则表达式修补在一起要好得多。如果可能的话，我强烈建议走这条路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T05:23:36.540

这看起来像有效的 XML，在这种情况下你不需要 BeautifulSoup，绝对不需要正则表达式，只需使用任何好的 XML 库加载 XML，编辑并打印出来，这是使用 ElementTree 的方法：

```
import xml.etree.cElementTree as ET

s = """<config>
<links>
<link name="Link1" id="1">
 <encapsulation>
  <mode>ipsec</mode>
 </encapsulation>
</link>
<link name="Link2" id="2">
 <encapsulation>
  <mode>udp</mode>
 </encapsulation>
</link>
</links>
</config>
"""
configElement = ET.fromstring(s)

for modeElement in configElement.findall("*/*/*/mode"):
    modeElement.text = "udp"

print ET.tostring(configElement) 
```

它将所有模式元素更改为`udp`，这是输出：

```
<config>
<links>
<link id="1" name="Link1">
 <encapsulation>
  <mode>udp</mode>
 </encapsulation>
</link>
<link id="2" name="Link2">
 <encapsulation>
  <mode>udp</mode>
 </encapsulation>
</link>
</links>
</config> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T04:47:16.777

假设您的 link_regex 是正确的，您可以像这样添加括号：

```
(<link [\w\W]+ %s>[\w\W]*[\w\W]*<%s>)([\w\W]*)(</%s>[\w\W]*</link>) 
```

然后你可以这样做：

```
p = re.compile(link_regex)
replacement = 'foo'
print p.sub(r'\g<1>' + replacement + r'\g<3>' , f_read) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:30:00.890

不确定我会这样做，但最快的方法是转移捕获：

([\w\W] *[\w\W]* <%s>)[\w\W] *([\w\W]* )' 并替换为 group1 +mode+group2

# java - 注入后初始化（JSF 1.2 + Guice）

> ID：886114
> 
> 赞同：2
> 
> 时间：2009-05-20T04:22:31.173
> 
> 标签：java, jsf, dependency-injection, annotations, guice

我正在尝试将 Guice 集成到 JSF 1.2 (Sun RI) 应用程序中，并且我希望能够对我的托管 bean 执行以下操作：

2.  `@Inject`使用 Guice注解注入依赖项，然后
3.  `@PostConstruct`使用注解执行初始化

我的问题是在处理注释`@PostConstruct`之前总是调用该方法。`@Inject`有谁知道这个问题的解决方案？

托管bean：

```
public final class Foo {

    @Inject private BazService bazService;
    private Baz baz;

    @PostConstruct
    public void init() {
        bar = bazService.loadBaz();
    }

    public void setBazService(BazService bazService) {
        this.bazService = bazService;
    }
} 
```

托管 bean 声明：

```
<managed-bean>
  <managed-bean-name>foo</managed-bean-name>
  <managed-bean-class>bean.Foo</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
    <property-name>id</property-name>
    <value>#{param.id}</value>
  </managed-property>
</managed-bean> 
```

Guice 绑定：

```
public final class MyGuiceModule extends AbstractModule {

    @Override
    protected void configure() {
        bind(BazService.class).to(DummyBazService.class).in(Scopes.SINGLETON);
    }
} 
```

我尝试了以下方法：

*   [手动调用`Injector.injectMembers(Object)`](http://cagataycivici.wordpress.com/2007/03/)（`@PostConstruct`不在超类中处理）
*   [使用自定义`VariableResolver`](http://notdennisbyrne.blogspot.com/2007/09/integrating-guice-and-jsf.html)（之前`@PostConstruct`处理*过* `@Inject`）
*   [使用 MyFaces'`GuiceResolver`](http://myfaces.apache.org/core12/myfaces-impl/apidocs/org/apache/myfaces/el/unified/resolver/GuiceResolver.html)（只是似乎根本不起作用 - 也许与[这个问题](https://issues.apache.org/jira/browse/MYFACES-1999)有关）

如果这似乎是处理事情的错误方式，我很乐意考虑其他选择......感谢任何帮助。

* * *

## 编辑

我使用的是 Guice 1.0。我现在已经升级到 Guice 2.0，但问题仍然存在。我发现[了一些似乎与我的问题有关的讨论](http://groups.google.com/group/google-guice/browse_thread/thread/c9eb0601f340502c)......但我不明白如何使用这些信息:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T20:47:32.307

经过大量阅读后，我得出结论，`@PostConstruct`如果您使用 JSF 和 Guice，可能最好避免使用。

在您给出的示例中，您可以注入`Baz`：

```
public final class Foo {

    @Inject private Baz baz;
} 
```

如果 Baz 不能由 Guice 创建，但必须由创建`BazService`，则可以使用提供程序方法：

```
public final class MyGuiceModule extends AbstractModule {

    @Override
    protected void configure() {
        bind(BazService.class).to(DummyBazService.class).in(Scopes.SINGLETON);
    }

    @Provides
    Baz provideBaz(BazService bazService) {
        return bazService.loadBaz();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T12:47:26.207

不幸的是，我没有给你答案，但我会说这个......

> *   [手动调用 Injector.injectMembers(Object)](http://cagataycivici.wordpress.com/2007/03/)（@PostConstruct 不在超类中处理）

让对象注入自己看起来可能会起作用 - 您不一定需要使用超类：

```
public final class Foo {

  @Inject
  private BazService bazService;
  private Baz baz;

  @PostConstruct
  public void init() {
    InjectorFinder.getInjector().injectMembers(this);
    baz = bazService.loadBaz();
  }

  public void setBazService(BazService bazService) {
    this.bazService = bazService;
  }

} 
```

我也认为没有理由保留对注入器的引用，因此请考虑一个实用程序类：

```
public class InjectorFinder {
  public static Injector getInjector() {
    FacesContext facesContext = FacesContext
        .getCurrentInstance();
    ExternalContext extContext = facesContext
        .getExternalContext();
    Map<String, Object> applicationMap = extContext
        .getApplicationMap();
    return (Injector) applicationMap.get(Injector.class
        .getName());
  }
} 
```

*@PostConstruct 和序列化会发生什么吗？这是我没有考虑太多的事情，但它可能会影响会话 bean。*

* * *

> *   [使用自定义 VariableResolver](http://notdennisbyrne.blogspot.com/2007/09/integrating-guice-and-jsf.html)（@PostConstruct 在 @Inject 之前处理）

这看起来不像是一种合理的技术。如果我正确阅读了代码，则每次解析对象时都会注入依赖项。

* * *

> *   [使用 MyFaces 的 GuiceResolver](http://myfaces.apache.org/core12/myfaces-impl/apidocs/org/apache/myfaces/el/unified/resolver/GuiceResolver.html)（只是似乎根本不起作用——也许与[这个问题](https://issues.apache.org/jira/browse/MYFACES-1999)有关）

我怀疑这个补丁存在我提到的问题（不同的解析器，相同的作者，无论如何）。除了错误之外，尝试同时使用两种不同的 JSF 实现（Sun 和 Apache）是行不通的。

* * *

我已经在野外看到了几个 Guice/JSF 项目（[guicef](http://code.google.com/p/guicesf/)；[jsf-sugar](http://code.google.com/p/jsf-sugar/)；也许还有更多？）但还没有尝试过，所以我不知道它们是否会帮助你，甚至不知道它们有多稳定。

无论你做什么，关注[Web Beans （](http://jcp.org/en/jsr/detail?id=299)[这里](http://seamframework.org/WebBeans)是概述）可能是一个想法，因为这可能会影响 JSF 中未来的 bean 处理功能（如果我正确理解 Guice 在堆栈中的位置，你可以使用它来*实现*Web豆子——我不建议你这样做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-01T16:13:22.147

[这个答案](https://stackoverflow.com/questions/2912278/guice-afterpropertiesset/7505918#7505918)似乎对如何解决这个问题有一个很好的解决方案。具体来说，它建议在 init() 方法上使用 @Inject 注释，保证在调用构造函数后调用。请注意，如果您使用属性注入，它可能不起作用。

# java - 使用 JSP/Servlets 在网页上显示 Excel 工作表？

> ID：886115
> 
> 赞同：0
> 
> 时间：2009-05-20T04:22:32.377
> 
> 标签：java, excel, jakarta-ee, web

我想编写一个程序，将 Excel 工作表导入网页。此外，网页的外观应该与 Excel 工作表的外观和感觉相同。整个 Excel 表应显示在网页上。

是否有任何 Java 包可以导入 Excel 工作表并将其数据和工作表打印到网页上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T04:59:35.480

你可以试试[ZK 电子表格](http://www.zkoss.org/smalltalks/zssalpha/index.dsp)。谷歌为它。该网站不允许我发布 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T04:40:52.227

我过去使用 POI 来阅读和编写 MS Excel 文档，它工作得很好： http: [//poi.apache.org/](http://poi.apache.org/)

所以你需要编写一些代码来上传文件，用 POI 解析它，然后你可以用这个输出它：[http ://www.activewidgets.com/grid/](http://www.activewidgets.com/grid/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T05:38:56.297

只要涉及到阅读电子表格，Apache POI 就是正确的选择。我们过去曾用它来读/写 Excel 文档。当然，复杂的 Excel 文档也存在一些缺点。

关于 Excel 文档的显示，您是否希望与网页上的工作表进行任何形式的交互。如果没有，您可以将 Excel 工作表转换为 PDF/HTML 并显示相同的内容。您可以使用[OpenOffice](http://www.openoffice.org/) API 来实现此转换。

编辑：刚刚也检查了 ZKSpreadsheet ......酷

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:42:05.457

我问了一个朋友，他告诉我他用过，效果很好，放在我的收藏夹里。

关于展示：嗯，这在很大程度上取决于您想要的布局/设计，但我想您可以使用表格来展示它，这就是它们的设计目的。

* * *

### 编辑：

我删除了该链接，因为我注意到它是一个过时的 API，而且它也不是您真正想要的。尽管此处指向另一个问题的链接-> [http://poi.apache.org/](http://poi.apache.org/)对于您想要的东西来说似乎非常好

# visual-studio - Visual Studio 是否仅用于编程？

> ID：886132
> 
> 赞同：0
> 
> 时间：2009-05-20T04:31:17.380
> 
> 标签：visual-studio

Visual Studio 是仅用于编程和编码，还是有其他功能？

在工作环境中，Visual Studio 如何用于其他类型的工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T04:37:36.597

您可以在编码之外做一些事情，但在其中许多方面它并不是最好的。您可以编辑文本文件、xml 文件、使用它来访问数据库并进行查询、从代码制作图表（类图）、分析代码、测试应用程序、调试已崩溃的应用程序。起始页还有某种社区元素，但我从未真正涉足这一点。我想我在 99% 的时间里至少有 1 个 devenv 实例，但话又说回来，我写了很多代码。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T04:42:19.090

我认为更好的问题是您为什么要尝试寻找 Visual Studio 的用法而不是编码？这就像问除了网上冲浪之外，您还能用网络浏览器做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T04:33:23.040

我认为它可能具有的唯一与编码无关的功能是您可以将其用作普通的旧文本编辑器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:34:45.270

它通常仅用于编码或更改 XML 文件。它还能够连接到 SQL 数据库

# c# - 如何在运行时将代码添加到 DLL

> ID：886143
> 
> 赞同：1
> 
> 时间：2009-05-20T04:36:04.367
> 
> 标签：c#, .net, dll

假设在我的 .NET 类的构造函数中，我想编写实际上会动态地向我的类添加方法的代码。所以现在当我反思我的课程时，我会看到方法，当我第一次构建项目时，方法不存在

我怎样才能做到这一点？

我一直在查找 CodeDom 但这有点令人困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T04:55:40.307

加载程序集后，您将无法更改它。您可以使用 Reflection.Emit 或 CodeDom 动态编译一个新程序集，该程序集的类就像您的 + 额外方法一样，但它不会更改现有（至少在运行时存在）类。潜在地，您可以将您的类加载到一个单独的 AppDomain 中，创建一个新类，该类是它的“副本”以及附加功能，然后将该程序集加载到您的主 AppDomain 中（并卸载您加载原始类的那个）。您仍在创建一个新类，而不是添加到现有类，但效果会相似。

但是，您可以使用代码注入在加载类之前插入代码。有一些 .NET 的代码注入框架可以帮助解决这个问题……但这与您的具体问题不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T04:44:54.080

您必须使用 Reflection.Emit 或 Mono.Cecil 或 PostSharp。

所有这些都很容易学习...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:52:12.463

我同意@reed-copsey 使用 appdomain domcomplie 函数。你可以创建一个继承插件基类的插件类，你可以添加所有你想要的类。当它在 appdomain 中编译时，它甚至可以为您提供注入该类的编码错误。然后它不会编译那个特定的类。至少你会知道代码有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:41:52.710

我....无法想象你为什么要这样做。

你能解释一下你为什么想要吗？

相反，如果您要共享大部分代码，请尝试使用同一接口或抽象类的不同具体实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T05:21:06.930

[您可以使用CInject](http://codeinject.codeplex.com)（Codeplex 的开源软件）无需学习任何额外知识即可做到这一点。在 C# 或 VB.NET 中编写要注入的代码，然后通过 CInject 对其进行处理以添加到托管程序集中。

# flash - 在服务器端将 ppt 和 pdf 文件转换为 flash swf 的任何工具/库？

> ID：886144
> 
> 赞同：2
> 
> 时间：2009-05-20T04:36:19.577
> 
> 标签：flash, pdf, powerpoint

我正在构建一个宠物项目，需要将 pdf 和 ppt 文件转换为服务器端的 flash swf 文件。这应该类似于 Scribd、Docstoc 或 Slideshare 这些网站所做的。但经过一番谷歌搜索后，我找不到任何开源工具或库来执行此操作，除了 OpenOffice 包装器。所以我想知道这些网站是如何做到的，或者可能有一些我不知道的工具/库？

谢谢，

魏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-31T15:34:52.453

将您的 ppts 转换为 pdf。然后使用[swftools](http://swftools.org/)将 pdf 转换为 swf（使用 openoffice，您可以使用 uno bridge，在 C、C++、python、java 中可用，用于自动化整个 pdf 转换）。它是一个开源库，非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-06T21:34:32.123

也许您可以从 PPT 转换为 JPEG，然后重播幻灯片，但那将没有动画和特效……看看[http://poi.apache.org/](http://poi.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T06:45:16.423

为什么不直接使用[scribd API](http://www.scribd.com/developers/api?method_name=docs.upload)上传您的文件，并将 scribd 文件嵌入您的站点？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-19T19:14:16.863

我前一阵子写了类似的东西。不好看——我用open office把ppt文件转成pdf，然后用imagemagick把pdf文件转成图片，然后写了一个flash播放器来显示图片。

# emacs - 我无法关闭最后一个括号并在 Slime 中使用 lisp-mode 将我的函数发送到 REPL

> ID：886162
> 
> 赞同：1
> 
> 时间：2009-05-20T04:42:11.070
> 
> 标签：emacs, common-lisp, slime

这是一个非常简单的问题。我已经安装了 Emacs 22.2.1（来自 Ubuntu (9.04) repo，我从他们主页上的 repo 下载了 Slime-current。

我按照粘液提供的说明进行操作，它可以工作。我可以启动粘液并按预期使用它。

但是，当我进入 lisp-mode (Mx lisp-mode) 时，我无法再与 REPL 交互。我输入的任何内容都不起作用，当我按下回车键时，光标只会移动到下一行。

有没有人可以解决这个问题？

**编辑：**

关于我如何使用 Emacs 的问题。是的，我启动 Emacs，然后用 Mx slime 输入 slime。我读到我可以通过接下来使用 Mx lisp-mode 进入 lisp 模式来获得正确的语法突出显示。

它确实提供了语法高亮，但正如下面所指出的，它用于编辑文本文件，而不是与 REPL 交互。

我最近还读到将以下内容放在我的 .emacs 文件中将启用语法突出显示（它不起作用）。

```
; Syntax Highlighting
(global-font-lock-mode 1)

; Enable slime
(add-to-list 'load-path "/home/doug/Software/slime/")  ; your SLIME directory
(setq inferior-lisp-program "/home/doug/Software/ccl/ccl") ; your Lisp system
(require 'slime)
(slime-setup)

; Enable psvn
(require 'psvn) 
```

所以我想我的问题需要修改。由于 lisp-mode 并不是简单地为 slime 启用 lisp 功能，那么我如何在 slime 中启用语法高亮？

**编辑2：**

答案在评论中提供。

启动粘液然后打开/创建一个新文件来使用。这是打算使用 lisp-mode 的缓冲区。

该函数被编写、突出显示并发送到 REPL。输出出现在底部。

两者应该合作，而不是融合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T05:15:41.093

听起来您正在进入`lisp-mode`具有 REPL 的缓冲区，是吗？如果是这种情况，那可能就是你做错了什么。REPL 缓冲区可能有自己的模式。

查看文档，与 Slime 交互的方式（与大多数 Emacs 的劣质进程一样）是使用评估当前 sexp 或区域或缓冲区的绑定。请参阅文档的这一[页](http://common-lisp.net/project/slime/doc/html/Evaluation.html#Evaluation)。该链接中的任何绑定都不是简单的`RET`键 - 这让我相信您更改了 REPL 缓冲区的模式。

当然，更多信息会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:16:10.060

移出注释：通常，您不会直接在 REPL 缓冲区中编写大函数，而是将它们写入另一个缓冲区并通过`C-c C-c`. slime-repl-mode 有自己的高亮显示，但目的不同：它以不同的颜色显示输入、输出和系统消息（在我的黑底绿设置中，它以绿色显示输入，以红色显示系统消息，并以浅蓝色输出）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T05:16:48.783

当您执行 Mx slime 时，Slime 启动并显示 REPL（带有 REPL 的缓冲区将处于 slime-repl-mode 主模式。此 slime-repl-mode 驱动 REPL。

lisp-mode，根据它的描述，是“为除 GNU Emacs Lisp 之外的 Lisps 编辑 Lisp 代码的主要模式”。Lisp 模式用于编辑文件，而不是 REPL。这是预期的行为。

相反，为什么要将 REPL 切换到 lisp 模式？

# iphone - sqllite3在iphone编程中准备插入查询

> ID：886167
> 
> 赞同：-5
> 
> 时间：2009-05-20T04:43:30.413
> 
> 标签：iphone, objective-c, cocoa, sqlite

```
(BOOL) addticket {
    NSString *event=@"max";
    NSString *venue=@"tvm";
    sqlite3 *database;
    databaseName = @"smbhDB.sql";
    sqlite3_stmt *addStatement ;
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
    if(addStatement == nil) {   
        const char *sql ="insert into tickets (venue, event,) Values (?,?)";

        if(sqlite3_prepare_v2(database, sql, -1, &addStatement, NULL) != SQLITE_OK)
            NSAssert1(0, @"444 Error while creating add  statement. '%s'", sqlite3_errmsg(database));
    }

    sqlite3_bind_text(addStatement, 1, [venue UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStatement, 2, [event UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(addStatement))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));

    sqlite3_reset(addStatement);
... 
```

此代码不起作用。请有人可以帮我纠正它。如果有人可以发布示例代码，请上传。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T08:31:35.153

复制？[为什么我不能执行这段代码？](https://stackoverflow.com/questions/862378/sqllite3-prepare-insert-query-in-iphone-programming/862832#862832)

您必须在执行语句之前打开数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T06:01:48.617

我不是 100% 确定，因为没有提供错误详细信息，但看起来`addStatement`没有被初始化。Objective-C 是否在堆栈上分配所有指针时将它们初始化为 0？我知道这在 Linux 中是行不通的。

也许试试这个： `sqlite3_stmt *addStatement = nil;`

我不得不怀疑，你为什么还要检查`addStatement == nil`？没有理由检查它，因为您必须在每种情况下都对其进行初始化。

简而言之，像这样重写：

```
(BOOL) addticket {
    NSString *event=@"max";
    NSString *venue=@"tvm";
    sqlite3 *database;
    databaseName = @"smbhDB.sql";
    sqlite3_stmt *addStatement ;
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    const char *sql ="insert into tickets (venue, event,) Values (?,?)";

    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    /* this is no longer conditional code */
    if(sqlite3_prepare_v2(database, sql, -1, &addStatement, NULL) != SQLITE_OK)
        NSAssert1(0, @"444 Error while creating add  statement. '%s'", sqlite3_errmsg(database));

    sqlite3_bind_text(addStatement, 1, [venue UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStatement, 2, [event UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(addStatement))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));

    sqlite3_reset(addStatement);
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T08:36:06.017

考虑 FMDB 或像库这样的 Omni 核心数据。所有细节都隐藏在一个漂亮的简单抽象界面后面。

[http://gusmueller.com/blog/archives/2008/03/fmdb_for_iphone.html](http://gusmueller.com/blog/archives/2008/03/fmdb_for_iphone.html)

或者

[http://www.omnigroup.com/developer](http://www.omnigroup.com/developer) (OmniDataObjects)

祝你好运。

# database - 可能使用 dat、idx 文件的数据库类型

> ID：886177
> 
> 赞同：4
> 
> 时间：2009-05-20T04:49:06.087
> 
> 标签：database, delphi, odbc

我有一个用 delphi 编写的应用程序，它是相当新的，在 win32 上运行我想用 odbc 连接到数据库，但我不确定要使用哪个数据库驱动程序

包含数据库的目录具有每个表的 .dat .idx 文件

它是一个独立的数据库而不是客户端服务器（据我所知）任何想法这可能是什么类型的数据库，所以我可以找到一个驱动程序

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T05:41:45.857

我认为它是[DBISAM](http://www.elevatesoft.com/prodinfo?action=view&product=dbisam&no=1)，因为用 Delphi 编写的应用程序更可能是 DBISAM。

您可以从他们的网站（免费）下载 Server Administration Utility，这样您就可以打开这些 dat 文件并检查它是否为 DBISAM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:08:54.730

不幸的是，.DAT 和 .IDX 对许多不同的数据库引擎都很常见，包括 Foxpro/DBase、Advantage、Informix、DBISAM，甚至自定义解决方案。由于它是一个相当新的 Delphi 应用程序，我会首先猜测[Advantage](http://www.extendedsystems.co.uk/web/content.aspx?key=F4865DD0C39A3D7CEDCC29852332B93B)。我相信 Advantage 驱动程序读/写 Foxpro/DBase 格式，所以我会尝试一个 DBase 驱动程序（当然是只读的），看看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T04:56:53.080

可能是 Informix，尽管不能保证这一点。如果您使用十六进制编辑器查看前十几个或两个字节，您会发现什么吗？

编辑：见[https://web.archive.org/web/1/http://techrepublic%2ecom%2ecom/5208-6230-0.html?forumID=101&threadID=224583&start=0](https://web.archive.org/web/1/http://techrepublic%2ecom%2ecom/5208-6230-0.html?forumID=101&threadID=224583&start=0)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T05:10:44.407

听起来像一个[Informix](http://www.informix.com) DB。[在这里](https://stackoverflow.com/questions/113582/attaching-informix-dat-and-idx-files)查看帖子。

# c++ - 在 C++ 中合并 8 个排序列表，我应该使用哪种算法

> ID：886178
> 
> 赞同：5
> 
> 时间：2009-05-20T04:49:17.677
> 
> 标签：c++, sorting, stl, merge

我有 8 个排序列表需要合并到 1 个排序列表中。我不知道做到这一点的最佳方法。我在想以下几点：

```
void merge_lists_inplace(list<int>& l1, const list<int>& l2)
{
    list<int>::iterator end_it = l1.end();
    --end_it;
    copy(l2.begin(), l2.end(), back_inserter(l1));
    ++end_it;
    inplace_merge(l1.begin(), end_it, l1.end());
}

list<int> merge_8_lists(list<int>[8] lists)
{
    merge_lists_inplace(lists[0], lists[1]);
    merge_lists_inplace(lists[2], lists[3]);
    merge_lists_inplace(lists[4], lists[5]);
    merge_lists_inplace(lists[6], lists[7]);

    merge_lists_inplace(lists[0], lists[2]);
    merge_lists_inplace(lists[4], lists[6]);

    merge_lists_inplace(lists[0], lists[4]);

    return lists[0];
} 
```

但是最后担心排序会更好吗？

```
list<int> merge_8_lists(list<int>[8] lists)
{
    for (int i = 1; i < 8; ++i)
        copy(lists[i].begin(), lists[i].end(), back_inserter(lists[0]));        
    lists[0].sort();
    return lists[0];
} 
```

旁注：我不在乎列表是否被修改。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-20T05:00:58.117

合并排序的合并阶段的简单扩展可以在 O(n lg m) 时间内完成（其中 n = 项目总数， m = 列表数），使用[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)（例如，[堆](http://en.wikipedia.org/wiki/Heap_(data_structure))）。伪代码：

```
Let P = a priority queue of the sorted lists, sorted by the smallest element in each list
Let O = an empty output list
While P is not empty:
  Let L = remove the minimum element from P
  Remove the first element from L and add it to O
  If L is not empty, add L to P 
```

还有一个简单的（未经测试的！）C++ 中的具体实现：

```
#include <list>
#include <set>

template<typename T>
struct cmp_list {
    bool operator()(const std::list<T> *a, const std::list<T> *b) const {
        return a->front() < b->front();
    }
};

template<typename T>
void merge_sorted_lists(std::list<T> &output, std::list<std::list<T> > &input)
{
    // Use a std::set as our priority queue. This has the same complexity analysis as
    // a heap, but has a higher constant factor.
    // Implementing a min-heap is left as an exercise for the reader,
    // as is a non-mutating version
    std::set<std::list<T> *, cmp_list<T> > pq;

    for ( typename std::list<std::list<T> >::iterator it = input.begin();
            it != input.end(); it++)
    {
        if (it->empty())
            continue;
        pq.insert(&*it);
    }

    while (!pq.empty()) {
        std::list<T> *p = *pq.begin();
        pq.erase(pq.begin());

        output.push_back(p->front());
        p->pop_front();

        if (!p->empty())
            pq.insert(p);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T04:55:50.820

您可以尝试一次将合并排序应用于每个列表：

[http://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)

这有合并排序的算法。本质上，您将使用列表 1 和 2 并对它们进行合并排序。然后，您将获取新的组合列表并使用列表 3 进行排序，并继续进行，直到您拥有一个完全排序的列表。

编辑：

实际上，因为您的列表已经排序，所以只需要合并排序的最后一部分。我会迭代地将列表组合成越来越大的部分，同时对每个更大的列表进行排序，直到你拥有完整的列表，这基本上是合并排序在完成分而治之方法之后所做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T05:04:07.190

如果性能不是问题，我会最后对列表进行排序。该代码更具可读性，更短，并且不太可能被将来重新访问该代码的人搞砸。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T05:11:31.613

这是一个标准的（虽然是 8 路）归并排序。

基本上，您“打开”八个排序列表，然后开始处理它们，每次都提取最小值，例如：

```
# Open all lists.

open newlist for write
for i = 1 to 8:
    open list(i) for read
end for 
```

```
# Process forever (break inside loop).

while true:
    # Indicate that there's no lowest value.

    smallidx = -1

    # Find lowest value input list.

    for i = 1 to 8:
        # Ignore lists that are empty.

        if not list(i).empty:
            # Choose this input list if it's the first or smaller
            #  than the current smallest.

            if smallidx = 1:
                smallidx = i
                smallval = list(i).peek()
            else:
                if list(i).peek() < smallval:
                    smallidx = i
                    smallval = list(i).peek()
                end if
            end if
        end if
    end for 
```

```
 # No values left means stop processing.

    if smallidx = -1:
        exit while
    end if

    # Transfer smallest value then continue.

    smallval = list(smallidx).get()
    newlist.put(smallval)
end while 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T05:21:40.397

基本上你正在做多路合并排序的一部分，除了你的东西已经排序......

[http://lcm.csa.iisc.ernet.in/dsa/node211.html](http://lcm.csa.iisc.ernet.in/dsa/node211.html)

只需在每个数组中找到最低的（几乎用作堆栈）并将其放入输出中，直到所有堆栈都为空...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-31T17:02:08.813

你想要[一个合并排序](http://en.wikipedia.org/wiki/Merge_sort)。您的列表已经拆分，但并非一直拆分到最小级别。您可能想要这样做：

```
unsorted_list = concatenate(list[0], list[1], list[2], ... , list[7]);
sorted_list = merge_sort(unsorted_list); 
```

这不应该是一个耗时/内存消耗的操作，因为连接应该添加从列表中最后一个节点到下一个列表的第一个元素的链接。

# mobile - 在诺基亚 Pys60 中激活 MCC、MNC API

> ID：886180
> 
> 赞同：0
> 
> 时间：2009-05-20T04:50:28.067
> 
> 标签：mobile, nokia, pys60

我无法从 pyS60 获取位置信息。似乎特色 API 未激活。

如何激活此 API？有免费的许可系统吗？

或者任何可以让我至少在手机中使用受限（或一般开发人员非免费）API 来测试应用程序的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:37:09.373

您需要签署您的申请。该过程取决于您想要遵循的手机和开发模型类型。

如果您只想在手机上测试一些应用程序，请使用[Open Signed Online](http://www.symbiansigned.com/app/page/public/openSignedOnline.do)。如果您想测试许多小脚本，也许最好对 PythonShell 本身进行签名。

我做过类似的事情，你可以在[nokia-gsm-location-hacks](http://code.google.com/p/nokia-gsm-location-hacks/wiki/Howto) howto 获得更多信息。

# wpf - 将 DataTemplate 用于基础架构 XamComboEditor (WPF)

> ID：886187
> 
> 赞同：3
> 
> 时间：2009-05-20T04:54:57.157
> 
> 标签：wpf, infragistics

如何将数据模板用于基础设施组合框？基本上我们想在一个组合框中显示多列。这些列来自同一对象的不同属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-24T10:22:44.350

以下是您的问题的示例。

```
<igDP:Field Name="MultumRoute" Label="Route" >
    <igDP:Field.Settings>
        <igDP:FieldSettings EditAsType="{x:Type Domain:MultumRoute}" EditorType="{x:Type igDE:XamComboEditor}" >
            <igDP:FieldSettings.EditorStyle>
                <Style TargetType="{x:Type igDE:XamComboEditor}">
                    <Setter Property="DisplayMemberPath" Value="Name" />
                    <Setter Property="ItemsSource" Value="{Binding Source={StaticResource multumRouteDropDownDataSource}, Mode=OneWay}"  />
                </Style>
            </igDP:FieldSettings.EditorStyle>
        </igDP:FieldSettings>
    </igDP:Field.Settings>
</igDP:Field> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-06T11:34:59.117

```
 List<CodeItem> codes = new List<CodeItem>()
        {
            new CodeItem() { Code="AAA", Description="Alpha" },
            new CodeItem() { Code="BBB", Description="Bravo" },
            new CodeItem() { Code="CCC", Description="Charlie" },
            new CodeItem() { Code="DDD", Description="Delta" },
            new CodeItem() { Code="EEE", Description="Echo" },
        };

        comboBox1.ItemsSource = codes; 
```

* * *

```
 <igEditors:XamComboEditor IsEditable="False" Name="comboBox1" Height="23" Width="150">
        <igEditors:XamComboEditor.PreDropDownAreaTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Code" FontWeight="Bold" Width="50" />
                    <TextBlock Text="Description" FontWeight="Bold" Width="100" />
                </StackPanel>
            </DataTemplate>
        </igEditors:XamComboEditor.PreDropDownAreaTemplate>

        <igEditors:XamComboEditor.ComboBoxStyle>
            <Style TargetType="ComboBox">
                <Setter Property="ItemTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Code}" Width="50" />
                                <TextBlock Text="{Binding Description}" Width="100" />
                            </StackPanel>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </igEditors:XamComboEditor.ComboBoxStyle>
    </igEditors:XamComboEditor> 
```

# javascript - 有人用过Sigma Grid（基于Javascript的可编辑数据网格）吗？

> ID：886191
> 
> 赞同：3
> 
> 时间：2009-05-20T04:57:05.360
> 
> 标签：javascript, ajax, grid, data-entry, sigma-grid-control

这里有没有人将[Sigma Grid](http://www.sigmawidgets.com/products/sigma_grid2/)用于基于 JavaScript 的数据网格？这是我能找到的唯一一个允许快速数据输入和使用键盘的网格，但在我们花费大量开发时间之前，我想了解社区使用它的经验。

（注意：我们需要数十个快速、可排序和可编辑的网格，这些网格可以与箭头键一起使用，并且使用最少的鼠标......否则我们只会弹出一个 ASP.NET 控件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-05T01:52:24.830

在其他 ASP.NET 控件公司的人说他们无法提供所需的功能之后，我们决定使用 Sigma Grid。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:16:20.320

这是一个很好的数据网格，可以在桌面和网络上使用。它重量轻且非常高效，但问题是在互联网上找到的关于 sigma 数据的帮助很少。在开始实施网格之前，您必须阅读其文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-02T08:59:04.733

我在以前的工作中使用过它，它具有高度可定制性，功能齐全，并且使用起来相对较快。它真的有你的电网需要的一切

但请注意，可用的文档非常少，并且由于文档，开发自定义项需要时间。支持论坛也很慢。

如果你没有找到另一个合适的网格，那么我只会建议使用这个网格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T06:48:16.947

Sigma Ajax Grid 是一个很好的工具，您可以在您的项目中使用。我也会推荐你 - dhtmlGrid(www.dhtmlx.com/docs/products/dhtmlxGrid/)

# c# - 是否有任何理由不在 System 命名空间中使用别名？

> ID：886194
> 
> 赞同：0
> 
> 时间：2009-05-20T04:57:31.897
> 
> 标签：c#, types, aliases

我一直习惯用 String 代替 string，用 Int32 代替 int。主要是因为一切都是一个类，所以我喜欢保持一致并像对待其他所有类/对象一样对待所谓的“原语”。

我刚刚看到一篇关于编码标准的文章，其中提到“始终使用 C# 预定义类型而不是系统命名空间中的别名”。

虽然没有说明原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T05:05:17.970

这些类型是完全可互换的，并编译为相同的 IL。您的编码标准中应该有一个关键规则 - 如果您正在编辑共享文件，请使用与现有代码相同的样式。没有什么比尝试修复一个样式更改所有其他功能的文件更烦人的了。

所以 - 选择一个并保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T05:01:29.270

没有任何理由会影响您的应用程序的行为或性能。这是推荐的风格指南 - 与所有风格指南一样，如果您认为合适，您可以忽略它。几乎所有的 OSS 和企业风格政策都会规定您需要使用别名——所以请记住这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T05:02:08.287

使用这两种方法都没有技术上的理由。两者在生成的 IL 方面是相同的。

但是，最大的原因是其他人的一致性和可维护性。使用“string”、“int”、“double”等更受期待，因此更易于维护。

此外，如果您没有 using System;，则始终键入“int”比键入“System.Int32”要好得多...

# spring - 使用 Spring 和 AspectJ 可配置与组件

> ID：886197
> 
> 赞同：12
> 
> 时间：2009-05-20T04:58:31.503
> 
> 标签：spring, annotations, aop, spring-aop, configurable

使用 AspectJ 时，为什么要使用 @Component 而不是 @Configurable。

我已经为 @Transactional 支持、自调用方面以及注入 JPA 实体设置了 Spring 和 AspectJ。这很好用。

我将@Component 用于大多数需要注入的类，因此要么将它们注入到它们的依赖项中。或者，当我不能时，注入 ApplicationContext 然后使用 getBean() 作为最后的手段。我只为需要注入的 JPA 实体（Hibernate）保留 @Configurable。我还开始使用 @Configurable 进行 jUnit 测试，以简化编写测试。这也很好用。

但我很好奇。如果 AspectJ 现在使用 @Configurable 注释自动注入（beanifying）任何东西，不管它是如何构造的；getBean()、new()、@Autowired。为什么我不切换到对我所有的 bean 使用 @Configurable 呢？然后我可以完全取消应用程序上下文和 getBean()，而只需 new() 任何我无法注入的类。

我意识到我没有提到 XML bean 配置。我并不回避这一点，但这个项目恰好不需要任何东西。我只是在测试时构造函数或设置器注入依赖项。好简单。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T12:50:31.303

@Component 是一个 Spring 标记接口，它可以在自动检测 bean 时为 Spring 提供线索。

@Configurable 是 AOP 加载时间编织的东西使用的标记。

两人其实并没有太大的关系。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T14:52:06.270

`@Component`用于将由 Spring 本身实例化的`@Configurable`类，而用于将由您自己的代码或由另一个框架实例化的类 - 例如，由 Hibernate 或 Servlet 容器实例化的实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T10:13:45.257

你不应该总是使用的一个原因`@Configurable`是它增加了很多开销：应用程序启动通常需要更长的时间，并且创建新实例变得更慢。

因为`@Component`您根本不需要它，因为通常所有实例都由 Spring 管理。

# asp.net - UpdatePanel 中的登录控件触发外部验证控件 - ASP.net

> ID：886198
> 
> 赞同：0
> 
> 时间：2009-05-20T04:59:10.160
> 
> 标签：asp.net, updatepanel

我试图在同一页面上同时拥有 loginview 和 createuserwizard。我想用更新面板将这两个事件分开。然而，我遇到的问题是，当我尝试登录时，createuserwizard 的验证触发器似乎被触发，即使它位于登录控件更新面板之外。

有人可以解释一下吗？下面的代码：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true" >
</asp:ScriptManager>

        <asp:UpdatePanel ID="LoginUpdatePanel" runat="server" UpdateMode="Always">
        <ContentTemplate>
        <div id="login">
            <asp:LoginView ID="LoginView1" runat="server">
            <LoggedInTemplate>
            <asp:LoginName ID="LoginName1" runat="server" /> - <asp:LoginStatus ID="LoginStatus1" LogoutText="LOGOUT" runat="server" />
            </LoggedInTemplate>
            <AnonymousTemplate>
            <asp:Login ID="BizLogin" runat="server" VisibleWhenLoggedIn="false" OnAuthenticate="Login1_Authenticate" >
                <LayoutTemplate>
                    <asp:Label ID="Label1" AssociatedControlID="UserName" runat="server">Email</asp:Label>
                    <asp:TextBox runat="server" ID="UserName" CssClass="loginFields"></asp:TextBox>
                    <asp:requiredfieldvalidator id="UserNameRequired" runat="server" ControlToValidate="UserName" Text="*"></asp:requiredfieldvalidator>
                    <asp:Label ID="Label2" AssociatedControlID="Password" runat="server">Password</asp:Label>
                    <asp:TextBox runat="server" ID="Password" CssClass="loginFields" TextMode="Password"></asp:TextBox>
                    <asp:requiredfieldvalidator id="PasswordRequired" runat="server" ControlToValidate="Password" Text="*"></asp:requiredfieldvalidator>
                    <asp:Button id="loginButton" CommandName="Login" runat="server" Text="Login"></asp:Button></button>
                </LayoutTemplate>
            </asp:Login>
            </AnonymousTemplate>
            </asp:LoginView>
        </div>
        </ContentTemplate>
        </asp:UpdatePanel>

        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
        <asp:CreateUserWizard id="CreateUserWizard1" Runat="server" OnCreatingUser="OnCreatingUser" LoginCreatedUser="true" OnContinueButtonClick="ContinueButtonClick">
            <WizardSteps>
                <asp:CreateUserWizardStep ID="CreateUserWizard1Step" runat="server">
                    <ContentTemplate>
                        <table>
                        <tr>
                        <th>User Information</th>
                        </tr>
                        <tr>
                        <td>First Name:</td>
                        <td>
                        <asp:TextBox ID="FirstName" runat="server"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="FirstNameRequired" runat="server" ControlToValidate="FirstName"
                        ErrorMessage="First Name is required." ToolTip="First Name is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                        </tr>
                        <tr>
                        <td>Last Name:</td>
                        <td>
                        <asp:TextBox ID="LastName" runat="server"></asp:TextBox>
                        </td>
                        </tr>
                        <tr>
                        <td>Email:</td>
                        <td>
                        <asp:TextBox runat="server" ID="UserName" />
                        <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator9" ControlToValidate="UserName"
                        ErrorMessage="Username is required." />
                        </td>
                        </tr>
                        <tr>
                        <td>Password:</td>
                        <td>
                        <asp:TextBox runat="server" ID="Password" TextMode="Password" />
                        <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator10" ControlToValidate="Password"
                        ErrorMessage="Password is required." />
                        </td>
                        </tr>
                        <tr>
                        <td>Confirm Password:</td>
                        <td>
                        <asp:TextBox runat="server" ID="ConfirmPassword" TextMode="Password" />
                        <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator13" ControlToValidate="ConfirmPassword"
                        ErrorMessage="Confirm Password is required." />
                        </td>
                        </tr>
                        <tr>
                        <td></td>
                        <td>
                        <asp:TextBox runat="server" ID="Email" Visible="false"/>
                        </td>
                        </tr>
                        <tr>
                        <td colspan="2">
                        <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password"
                        ControlToValidate="ConfirmPassword" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."></asp:CompareValidator>
                        </td>
                        </tr>
                        <tr>
                        <td colspan="2">
                        <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                        </td>
                        </tr>
                        </table>
                        </ContentTemplate>
                </asp:CreateUserWizardStep>
            </WizardSteps>
        </asp:CreateUserWizard>
        </ContentTemplate>
        </asp:UpdatePanel>

</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T05:17:39.983

添加[`ValidationGroups`](http://www.dotnet-guide.com/validationgroups.html).

# php - 是什么导致我的 PHP SQL 查询出现此错误？

> ID：886201
> 
> 赞同：0
> 
> 时间：2009-05-20T04:59:49.083
> 
> 标签：php, mysql, database

我的 mysql php 代码有问题。该代码旨在使用用户输入的变量搜索数据库并显示相应的结果。例如，如果我只搜索彩色照片，则只会列出彩色照片以及艺术家的姓名、尺寸等。但我收到一条错误消息，我不明白这是什么意思。上面写着：

```
Warning: mysqli_num_rows() expects parameter 1 to be mysqli_result,
boolean given in C:\Program Files\xampp\htdocs\results.php on line 64 
```

这是导致问题的代码，有人知道为什么吗？？？

```
//Run the query and storee result
$result = mysqli_query($link, $query);

//Get number of rows in the result set
$number_of_rows = mysqli_num_rows ($result);

//close link to database
mysqli_close($link); 
```

原始查询是：

```
//Define an SQL query to retrieve desired information
$query = "
SELECT
photos.photo_id, members.member_name, photos.photo_title, photos.photo_film,
    photos.photo_height, photos.photo_width
FROM members, photos
WHERE members.member_id = photos.member_id
";

//restict SQL query with an AND clause if a photo title has been supplied
if ($form_photo_title !="") {
    $query.= "AND photos.photo_title = '$form_photo_title' ";
}

//Restrict the SQL query with an AND clause if a member has been selected
if ($form_member_name !=0) {
    $query .= "AND members.member_name = $form_member_name ";
}

//Restrict the SQL query with an AND clause if a colour mode has been selected
if ($form_type !="") {
    $query .= "AND photo.photo_film = $form_type ";
}

//Run the query and storee result
$result = mysqli_query($link, $query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T05:05:24.677

您的 mysqli_query 命令将返回 false。使用[mysqli_error](http://php.net/mysqli_error)来诊断问题。

```
if (!mysqli_query($link, $query)) {
    printf("Errormessage: %s\n", mysqli_error($link));
} 
```

您需要进行上述检查以确定，但您的查询问题可能与此部分有关，该部分未引用似乎是字符串值的内容：

```
if ($form_member_name !=0) {
    $query .= "AND members.member_name = $form_member_name ";
} 
```

$form_member_name 至少应该用单引号括起来，但是您*绝对*应该为此使用参数化语句，而不是在查询中嵌入未经处理的变量，因为您对[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)敞开大门。这是一个修订版，但请记住，我对 mysqli 有点生疏，没有你的数据库就无法测试它：

```
$query = "
    SELECT
    photos.photo_id, members.member_name, photos.photo_title, photos.photo_film,
        photos.photo_height, photos.photo_width
    FROM members, photos
    WHERE members.member_id = photos.member_id
";

$types = "";
$params = array();

if ($form_photo_title !="") {
    $query.= "AND photos.photo_title = ? ";
    $types .= "s";
    $params[] = $form_photo_title;
}

if ($form_member_name !=0) {
    $query .= "AND members.member_name = ? ";
    $types .= "s";
    $params[] = $form_member_name;
}

if ($form_type !="") {
    $query .= "AND photo.photo_film = ? ";
    $types .= "s";
    $params[] = $form_type;
}

if (!($statement = mysqli_prepare($link, $query)))
    throw new Exception(mysqli_error($link));

// this tells the statement to substitute those question marks with each of 
// the values in the $params array. this is done positionally, so the first 
// question mark corresponds to the first element of the array, and so on. 
// the $types array is just a string with an indication of the type of the 
// value stored at each position in the array. if all three of the above 
// clauses are applied, then $types will equal "sss", indicating that the 
// first, second and third elements in $params are string types. 
// worse still, because the parameters to the query are dynamic, we can't 
// call mysqli_stmt_bind_param directly as it does not allow an array to be 
// passed, so we have to call it dynamically using call_user_func_array!
// i really hate this about mysqli.
// if all three of your above query clauses are applied, this call translates to
//     mysqli_stmt_bind_param(
//         $stmt, $types, 
//         $form_photo_title, $form_member_name, $form_type
//     );
array_unshift($values, $stmt, $types);
call_user_func_array("mysqli_stmt_bind_param", $values);

mysqli_stmt_execute($stmt);

// this instructs mysqli to assign each field in your query to each of 
// these variables for each row that is returned by mysqli_stmt_fetch(). 
// this is also positional - if you change the order or number of fields 
// in your query, you will need to update this.
mysqli_stmt_bind_result($photo_id, $member_name, $photo_title, $photo_film, $photo_height, $photo_width);

while (mysqli_stmt_fetch($stmt)) {
    // $photo_id will be reassigned to the value from the row on each 
    // loop iteration
    echo $photo_id."<br />";
} 
```

我忘记了 mysqli 扩展是多么可怕的野兽——如果您可以访问[PDO 扩展](http://php.net/manual/en/book.pdo.php)，我不能再强烈建议您学习并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T05:10:28.087

`form_member_name`需要用引号括起来吗？

实际上，这两者都`form_photo_title`需要[妥善处理](http://us3.php.net/manual/en/function.mysql-escape-string.php)以防止[SQL 注入](http://xkcd.com/327)攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T05:11:42.907

我的猜测是您尝试执行的 SQL 有问题。在 mysqli_query() 命令之前将 SQL 打印到输出。然后获取该字符串并从 mysql 控制台运行它以查看是否可以执行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T05:02:20.470

您的查询有问题，它返回 FALSE 而不是结果集。什么是查询？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T09:48:06.467

```
$query .= "AND photo.photo_film = $form_type "; 
```

我认为应该是：

```
$query .= "AND photos.photo_film = $form_type "; 
```

您拼错了表名并收到“表不存在”之类的错误。

并且不要忘记 SQL 注入。此代码易受攻击。

# c++ - 模板类中模板方法的声明模板定义不正确

> ID：886206
> 
> 赞同：13
> 
> 时间：2009-05-20T05:01:41.423
> 
> 标签：c++, templates

有谁知道模板类中声明外模板方法的语法。

例如：

```
template<class TYPE>
class thing
{
public :
  void do_very_little();

  template<class INNER_TYPE>
  INNER_TYPE do_stuff();
}; 
```

第一种方法定义：

```
template<class TYPE>
void thing<TYPE>::do_very_little()
{
} 
```

我该如何做第二个“do_stuff”？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-20T05:45:17.580

```
template<class TYPE>
template<class INNER_TYPE>
INNER_TYPE thing<TYPE>::do_stuff()
{
    return INNER_TYPE();
} 
```

试试这个。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-05-20T05:45:47.457

```
template<class TYPE>
template<class INNER_TYPE>
INNER_TYPE thing<TYPE>::do_stuff()
{
    return INNER_TYPE();
} 
```

请参阅此页面：

[http://msdn.microsoft.com/en-us/library/swta9c6e(VS.80).aspx](http://msdn.microsoft.com/en-us/library/swta9c6e(VS.80).aspx)

# mysql - 如何排他锁mysql数据库？

> ID：886209
> 
> 赞同：9
> 
> 时间：2009-05-20T05:02:32.903
> 
> 标签：mysql

我有多个 mysql 数据库，我想在特定数据库上执行一些管理任务。如何确保在执行任务时没有其他人可以连接到该数据库？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T07:19:23.677

显然，您可以为此使用 FLUSH 命令：

`>`带读锁的刷新表；

接着

`>`解锁表；

再次解锁数据库。不确定是否需要在表上设置某些设置以允许读锁。您可以通过在数据库锁定后尝试手动插入来测试这一点，如果您收到有关表被锁定的错误消息，您就知道它有效。

[有关 FLUSH 命令的更多信息](http://dev.mysql.com/doc/refman/5.7/en/flush.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T06:54:19.217

如我所见，您有几个选择：

*   Shutdown `mysqld`，要与数据库建立连接的守护进程。这样做的缺点是阻止访问该计算机上的*所有*mysql 数据库。

*   移动文件或更改对它的访问权限，以便只有您的用户可以使用它。（我不知道这是否可行。）数据库文件位于类似`/var/lib/mysql`. 只是不要忘记当你完成将它们改回可以使用的东西`mysqld`时！

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T07:59:35.497

如果您有能力在维护期间停止服务器，请停止守护程序并将其重新配置为不监听网络连接。只允许通过本地 UNIX 套接字进行连接。

然后以物理方式或通过 SSH 在同一台机器上本地登录。只要没有其他人可以访问机器，这将确保您一个人。完成后，恢复原始配置文件并重新启动守护程序。

另一种方法是暂时禁用特定数据库的所有用户帐户，但“root”（或您用来进行维护的任何用户帐户）除外。然而，这有一个缺点，即实际上会弄乱帐户数据，这比仅仅阻止网络连接风险更大。

# .net - 什么是 .NET 框架？

> ID：886213
> 
> 赞同：11
> 
> 时间：2009-05-20T05:04:48.407
> 
> 标签：.net, visual-studio

我很困惑有人可以澄清.NET Framework 的含义吗？

这是 Visual Studio 的另一个名称吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-20T05:28:11.430

正如 Gary 所说，.NET Framework 是大量库（程序集）的集合，提供了大量功能，极大地简化了 Windows 和富客户端 Web 应用程序的编码过程。所有这些类（以及任何其他 .net 代码）都运行在 CLR（公共语言运行时）之上：CLR 是一个运行时引擎（一个智能引擎），它提供了一些非常简洁的功能，例如即时编译、垃圾收集， 和别的。您可以为使用该技术开发的每个应用程序使用 .net 框架。Visual Studio 实际上只不过是一个集成开发环境 (IDE)，它使您能够顺利、轻松地编辑、调试、构建和运行您的代码。执行 .NET 应用程序的过程不同于其他语言（例如 C/C++）。与 Java 一样，.NET 代码不会 t 直接转换为本机代码，而是转换为某种名为 IL（中间语言）的中间层语言，然后当您运行应用程序时，CLR（特别是 CLR 的 JIT 部分）将此 IL 编译为要执行的本机代码。这个中间层提供了很大的灵活性和可移植性。由于它的存在，您现在可以在某些 Linux 机器上运行您的 .NET 代码。

抱歉，如果我把它写得太长或者对你来说太无聊了，我真的很喜欢几年前我在你那里时有人给我一些细节。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-20T05:08:20.370

.Net 框架是一个类和函数的集合库，旨在扩展公共语言运行时 (CLR) 并使系统开发更容易。不需要 Visual Studio。您可以在文本编辑器中下载框架 SDK 和代码。

您还可以将框架视为 CLR 和库集的组合，因为它都是作为一个单元分布的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-20T05:50:25.763

从一万英尺的角度来看，.Net 本质上与 Java 相同，只是由 Microsoft 而非 Sun 制造（以及暗示的一切。）

从大约 9000 英尺开始，我们指出这两个系统完全不同，完全不兼容，但在哲学上（如果不是在技术上）以相同的方式解决大致相同的问题。也就是说，它们既是运行特定于 VM 的字节码的虚拟机运行时的组合，又是带有大量预先编写的代码、库和小部件的库，以及让 VM 处理诸如内存管理和垃圾收集之类的事情。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-20T05:10:28.820

.Net 在某种程度上是 Java 的竞争对手。但这比我想的要多得多。每个都有优点和缺点，但关键问题是：

*   .Net 提供了一个类框架，因此您不必编写自己的代码。例如。Windows 窗体、加密库、网络库、Web 库等。
*   垃圾收集（自动内存管理）

[MSDN .Net 框架页面](http://msdn.microsoft.com/en-us/netframework/default.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-29T09:20:19.000

.Net 框架是微软开发的软件开发平台。该框架旨在创建可在 Windows 平台上运行的应用程序。.Net 框架的第一个版本于 2000 年发布。该版本被称为 .Net 框架 1.0。从那时起，.Net 框架已经走过了漫长的道路，目前的版本是 4.6.1。.Net 框架可用于创建基于表单和基于 Web 的应用程序。还可以使用 .Net 框架开发 Web 服务。该框架还支持各种编程语言，例如 Visual Basic 和 C#。因此开发人员可以选择语言来开发所需的应用程序。在本章中，您将了解更多 .Net 框架的一些基础知识：- [http://dotnetframeworktut.blogspot.in/2017/08/whatis.html](http://dotnetframeworktut.blogspot.in/2017/08/whatis.html)

# wpf - WPF页面布局控件选择

> ID：886218
> 
> 赞同：0
> 
> 时间：2009-05-20T05:07:07.000
> 
> 标签：wpf, controls

我有一个足球场的图像刷作为页面背景，我希望能够通过将球员从替补席上拖下来并将他们相应地定位在球场上来创建一个阵容。我不知道要为背景使用什么控件以允许 PlayerCard 控件驻留在拖动它的位置。任何有关如何开始的帮助将不胜感激。

你可以在这里得到这个想法。

[使用什么控件？](https://cartesia.pbworks.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T05:09:16.437

我相信你想要[Canvas 容器控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)。它允许您任意放置带有 Left 和 Top 附加属性的子控件，类似于 Windows 窗体的做法。

# python - Django 可以扩展吗？

> ID：886221
> 
> 赞同：1198
> 
> 时间：2009-05-20T05:07:55.627
> 
> 标签：python, django, web-applications, scalability

我正在用 Django 构建一个 Web 应用程序。我选择 Django 的原因是：

*   我想使用免费/开源工具。
*   我喜欢 Python 并且觉得它是一**门长期的**语言，而关于 Ruby 我不确定，而且 PHP 学习起来似乎很麻烦。
*   我正在为一个想法构建一个原型，并没有过多考虑未来。开发速度是主要因素，我已经知道 Python。
*   我知道如果我将来选择迁移到 Google App Engine 会更容易。
*   我听说 Django 很“好”。

现在我越来越接近考虑出版我的作品，我开始担心规模。我发现的关于 Django 扩展能力的唯一信息是由 Django 团队提供的（我并不是说要忽视它们，但这显然不是客观信息......）。

**我的问题：**

*   今天基于 Django 构建的“最大”网站是什么？（我主要通过用户流量来衡量大小）
*   Django 能否每天处理*100,000 个用户*，每个用户访问该站点几个小时？
*   像 Stack Overflow 这样的网站可以在 Django 上运行吗？

* * *

## 回答 #1

> 赞同：977
> 
> 时间：2009-05-20T07:41:16.597

1.  **“当今基于 Django 构建的最大网站是什么？”**

    没有任何一个地方可以收集有关 Django 构建站点的流量信息，所以我必须使用来自不同位置的数据来尝试一下。首先，我们在[Django 项目主页面的](http://www.djangoproject.com/)首页上有一个 Django 站点列表，然后是[djangosites.org](http://www.djangosites.org/)上的 Django 构建站点列表。浏览列表并挑选一些我知道我们看到的流量不错的：

    *   **[Instagram](http://instagram.com)**： [Instagram 的动力：数百个实例，数十种技术](http://instagram-engineering.tumblr.com/post/13649370142/what-powers-instagram-hundreds-of-instances)。

    *   **[Pinterest](http://pinterest.com/)** : [Alexa 排名第 37 (21.4.2015)](http://www.alexa.com/siteinfo/Pinterest.com)和 2013 年的 7000 万用户

    *   **[Bitbucket](http://bitbucket.org/)**： [200TB 代码和 2.500.000 个用户](https://blog.bitbucket.org/2015/02/05/bitbucket-2014-in-review/)

    *   **[Disqus](http://disqus.com)**：[用 Python 服务 4 亿人](http://pyvideo.org/video/418/pycon-2011--disqus--serving-400-million-people-wi)。

    *   **[curse.com](http://curse.com/)**：[每天 60 万次访问](http://www.quantcast.com/curse.com)。

    *   **[tabblo.com](http://tabblo.com/)**：[每日访问量为 44k](http://www.quantcast.com/tabblo.com)，请参阅 Ned Batchelder 的博[文《现代网站的基础设施》](http://nedbatchelder.com/blog/200902/infrastructure_for_modern_web_sites.html)。

    *   **[chesspark.com：Alexa](http://chesspark.com/)**排名约为[179k](http://www.alexa.com/siteinfo/chesspark.com)。

    *   **[pownce.com](http://pownce.com/)**（不再活跃）： [alexa](http://www.alexa.com/siteinfo/pownce.com)排名大约 65k。Pownce 的 Mike Malone 在他关于**[Scaling Django Web Apps](http://www.slideshare.net/road76/scaling-django)**的 EuroDjangoCon 演讲中说“每秒有数百次点击”。这是一个关于如何扩展 Django 的非常好的演示文稿，并提出了一些优点，包括 Django 可扩展性的（当前）缺点。

    *   HP 有一个使用 Django 1.5 构建的站点：[ePrint center](http://www.eprintcenter.com)。但是，对于novemer/2015，整个网站都被迁移了，这个链接只是一个重定向。该网站是一项参与订阅 Instant Ink 和 HP 提供的相关服务的全球服务 (*)。

2.  **“Django 能否每天处理 100,000 个用户，每个用户访问该站点几个小时？”**

    是的，见上文。

3.  **“像 Stack Overflow 这样的网站可以在 Django 上运行吗？”**

    我的直觉是肯定的，但是正如其他人的回答和 Mike Malone 在他的演讲中提到的那样，数据库设计至关重要。如果我们能找到任何可靠的流量统计数据，也可以在 www.cnprog.com 找到强有力的证据。无论如何，这不仅仅是将一堆 Django 模型放在一起会发生的事情:)

当然，还有更多感兴趣的网站和博主，但我必须在某个地方停下来！

* * *

[关于使用 Django 构建高流量网站 michaelmoore.com 的](http://web.archive.org/web/20130307032621/http://concentricsky.com/blog/2009/oct/michaelmoorecom)博客文章被描述为[前 10,000 个网站](http://www.alexa.com/siteinfo/http%3A%2F%2Fmichaelmoore.com)。 [Quantcast 统计数据](http://www.quantcast.com/michaelmoore.com)和[competition.com 统计数据](http://siteanalytics.compete.com/michaelmoore.com/)。

* * *

[(*) 编辑的作者，包括此类参考资料，曾在该项目中担任外包开发人员。]

* * *

## 回答 #2

> 赞同：280
> 
> 时间：2009-05-20T11:16:35.693

我们现在正在做负载测试。我们认为我们可以支持 240 个并发请求（24x7 每秒 120 次命中的持续速率），而不会显着降低服务器性能。那将是每小时 432,000 次点击。响应时间不短（我们的事务很大），但是随着负载的增加，我们的基线性能并没有下降。

我们正在使用 Apache 前端 Django 和 MySQL。操作系统是红帽企业 Linux (RHEL)。64 位。我们在 Django 的守护进程模式下使用 mod_wsgi。除了接受默认值外，我们没有进行任何缓存或数据库优化。

我们都在一个具有（我认为）32Gb RAM 的 64 位戴尔虚拟机中。

由于 20 或 200 个并发用户的性能几乎相同，因此我们不需要花费大量时间“调整”。相反，我们只需要通过普通的 SSL 性能改进、普通的数据库设计和实现（索引等）、普通的防火墙性能改进等来保持我们的基本性能。

我们测量的是我们的负载测试笔记本电脑在运行 16 个并发请求线程的 15 个进程的疯狂工作负载下苦苦挣扎。

* * *

## 回答 #3

> 赞同：183
> 
> 时间：2010-08-01T12:03:20.697

不确定每日访问量，但这里有一些大型 Django 站点的示例：

*   [disqus.com](http://disqus.com/)（[来自 djangocon 的谈话](http://djangocon.blip.tv/file/4135225/)）
*   [bitbucket.org](http://bitbucket.org)（[写](https://web.archive.org/web/20110521024332/http://code.djangoproject.com/wiki/DjangoSuccessStoryBitbucket)）
*   [lanyrd.com](http://lanyrd.com/)（[来源](http://lanyrd.com/colophon/)）
*   [support.mozilla.com](http://support.mozilla.com/)（[源代码](https://github.com/mozilla/kitsune)）
*   [addons.mozilla.org](https://addons.mozilla.org/)（[源代码](https://github.com/mozilla/addons-server)）（[来自 djangocon 的谈话](http://python.mirocommunity.org/video/1866/djangocon-2010-switching-addon)）
*   [theonion.com](http://www.theonion.com/)（[写](http://www.reddit.com/r/django/comments/bhvhz/the_onion_uses_django_and_why_it_matters_to_us)）
*   Guardian.co.uk评论系统使用 Django [（](http://www.guardian.co.uk/)[来源](http://www.guardian.co.uk/info/developer-blog/2011/feb/08/computing-apps)）
*   [Instagram](http://instagr.am/)
*   [兴趣](https://pinterest.com)
*   [无线电](http://www.rdio.com/)

[这是Quora 上高流量 Django 站点](http://www.quora.com/Django/What-is-the-highest-traffic-website-built-on-top-of-Django)列表的链接。

* * *

## 回答 #4

> 赞同：110
> 
> 时间：2009-11-16T04:00:13.193

> 今天基于 Django 构建的“最大”网站是什么？（我主要通过用户流量来衡量大小）

在美国，它是[Mahalo](http://mahalo.com/)。我被告知他们每月处理大约 1000 万个唯一身份。现在，在 2019 年，Mahalo 由 Ruby on Rails 提供支持。

在国外，[Globo](http://globo.com/)网络（巴西的新闻、体育和娱乐网站网络）；Alexa 将它们排在全球前 100 位（目前约为第 80 位）。

其他著名的 Django 用户包括 PBS、国家地理、发现、NASA（实际上是 NASA 内的许多不同部门）和国会图书馆。

> Django 能否每天处理 10 万用户，每个用户访问网站几个小时？

是的——但前提是你的应用程序写得对，并且你有足够的硬件。姜戈不是灵丹妙药。

> 像 StackOverflow 这样的网站可以在 Django 上运行吗？

是的（但见上文）。

技术方面，很容易：请参阅[soclone](http://code.google.com/p/soclone/)进行一次尝试。在流量方面，竞争对手的 StackOverflow 每月独立用户数低于 100 万。我可以命名至少十几个流量比 SO 更多的 Django 站点。

* * *

## 回答 #5

> 赞同：86
> 
> 时间：2009-05-21T01:36:22.620

扩展 Web 应用程序与 Web 框架或语言无关，与您的架构有关。这是关于如何处理浏览器缓存、数据库缓存、如何使用非标准持久性提供程序（如[CouchDB](http://couchdb.apache.org/)）、如何调整数据库以及许多其他内容......

* * *

## 回答 #6

> 赞同：82
> 
> 时间：2009-05-20T06:33:46.817

稍微扮演魔鬼的拥护者：

您应该查看由[Cal Henderson发表的](http://en.wikipedia.org/wiki/Cal_Henderson)[DjangoCon 2008 主题演讲](http://www.youtube.com/watch?v=i6Fr65PFqfk)，标题为“为什么我讨厌 Django”，其中他几乎涵盖了 Django 缺少的所有内容，而您可能希望在高流量网站上做这些事情。归根结底，您必须以开放的心态接受这一切，因为*完全*有可能编写可扩展的 Django 应用程序，但我认为这是一个很好的演示文稿并且与您的问题相关。

 ** * *

## 回答 #7

> 赞同：53
> 
> 时间：2009-05-20T05:22:37.227

我所知道的最大的 django 站点是[华盛顿邮报](http://www.washingtonpost.com/)，这肯定表明它**可以**很好地扩展。

好的设计决策可能比其他任何事情都具有更大的性能影响。Twitter 经常被认为是一个网站，它体现了另一个基于动态解释语言的 Web 框架 Ruby on Rails 的性能问题——但 Twitter 工程师表示，该框架并不像他们早期做出的一些数据库设计选择那样严重在。

Django 与 memcached 配合得非常好，并提供了一些用于管理缓存的类，这是您可以解决大部分性能问题的地方。实际上，您在线交付的内容几乎比您的后端更重要 - 使用 yslow 之类的工具对于高性能 Web 应用程序至关重要。您总是可以在后端添加更多硬件，但不能更改用户带宽。

* * *

## 回答 #8

> 赞同：32
> 
> 时间：2009-05-20T06:27:28.853

前一周我参加了 EuroDjangoCon 会议，这是几次谈话的主题——包括最大的基于 Django 的网站 Pownce 的创始人（[这里](http://immike.net/files/scaling_django.pdf)的一次谈话的幻灯片）。主要信息是，您需要担心的不是 Django，而是适当的缓存、负载平衡、数据库优化等。

Django 实际上对大多数这些事情都有钩子——尤其是缓存，它变得非常容易。

* * *

## 回答 #9

> 赞同：26
> 
> 时间：2009-05-20T05:23:35.090

我确定您正在寻找更可靠的答案，但我能想到的最明显的客观验证是 Google 推动 Django 与其[App Engine](http://en.wikipedia.org/wiki/Google_App_Engine)框架一起使用。如果有人知道并定期处理可扩展性，那就是谷歌。从我读过的内容来看，最大的限制因素似乎是数据库后端，这就是谷歌使用自己的......

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2016-01-21T15:14:58.837

* * *

## 回答 #11

> 赞同：18
> 
> 时间：2016-04-25T15:32:16.157

今天，我们使用许多网络应用程序和网站来满足我们的需求。它们中的大多数都非常有用。我将向您展示其中一些由 python 或 django 使用的。

[华盛顿邮报](https://www.washingtonpost.com/)

《华盛顿邮报》的网站是一个非常受欢迎的在线新闻来源，可与他们的日报一起发布。Django Web 框架可以轻松处理其庞大的视图和流量。 `Washington Post - 52.2 million unique visitors (March, 2015)`

[美国国家航空航天局](https://www.nasa.gov/)

美国国家航空航天局的官方网站是查找有关他们正在进行的太空探索的新闻、图片和视频的地方。这个 Django 网站可以轻松处理大量的浏览量和流量。 `2 million visitors monthly`

[守护者](http://www.theguardian.com/international)

卫报是卫报传媒集团旗下的英国新闻和媒体网站。它几乎包含了《卫报》和《观察家报》的所有内容。这些庞大的数据由 Django 处理。 `The Guardian (commenting system) - 41,6 million unique visitors (October, 2014)`

[YouTube](https://www.youtube.com/)

我们都知道 YouTube 是上传猫视频的地方，但失败了。作为现有最受欢迎的网站之一，它为我们提供了无尽的视频娱乐时间。Python 编程语言为它和我们喜欢的功能提供动力。

[投递箱](https://www.dropbox.com/)

DropBox 开启了在线文档存储革命，已经成为日常生活的一部分。我们现在将几乎所有内容都存储在云中。Dropbox 允许我们使用 Python 的强大功能存储、同步和共享几乎所有内容。

[调查猴子](https://www.surveymonkey.com/)

Survey Monkey 是最大的在线调查公司。他们每天可以在重写的 Python 网站上处理超过一百万个响应。

[知乎](https://www.quora.com/)

Quora 是在线提​​出问题并从个人社区接收答案的第一场所。这些社区成员在他们的 Python 网站上回答、编辑和组织了相关结果。

[比特利](https://bitly.com/)

Bitly URL 缩短服务和分析的大部分代码都是用 Python 构建的。他们的服务每天可以处理数亿个事件。

[红迪网](https://www.reddit.com/)

Reddit 被称为互联网的首页。它是在线查找基于数千个不同类别的信息或娱乐的地方。帖子和链接是用户生成的，并通过投票提升到顶部。Reddit 的许多功能都依赖于 Python。

[河马](https://www.hipmunk.com/)

Hipmunk 是一个在线消费者旅游网站，它比较顶级旅游网站以找到最优惠的价格。这个 Python 网站的工具可让您找到目的地最便宜的酒店和航班。

单击此处了解更多信息： [25-of-the-most-popular-python-and-django-websites](https://www.shoop.io/en/blog/25-of-the-most-popular-python-and-django-websites/) , [What-are-some-well-known-sites-running-on-Django](https://www.quora.com/What-are-some-well-known-sites-running-on-Django)

* * *

## 回答 #12

> 赞同：16
> 
> 时间：2012-01-10T21:29:53.710

我想我们不妨将苹果的 2011 年度应用[Instagram](http://instagram-engineering.tumblr.com/post/13649370142/what-powers-instagram-hundreds-of-instances-dozens-of)加入到密集使用 django 的列表中。

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2009-05-20T05:24:22.920

是的，它可以。它可以是带有 Python 的 Django 或 Ruby on Rails。它仍然会扩展。

很少有不同的技术。首先，缓存不是缩放。除了硬件平衡器之外，您还可以使用 nginx 作为前端平衡多个应用程序服务器。要在数据库方面进行扩展，如果您采用 RDBMS 方式，您可以在 MySQL / PostgreSQL 中使用 read slave 走得很远。

Django中流量大的网站的一些很好的例子可能是：

*   [当](http://en.wikipedia.org/wiki/Pownce)他们还在那里的时候。
*   Discus（通用共享评论管理器）
*   所有与报纸相关的网站：华盛顿邮报等。

你可以感到安全。

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2009-11-16T18:51:51.263

以下是 Django 中内置的一些相对高调的东西的列表：

1.  卫报的“[调查你的国会议员的开支](http://mps-expenses.guardian.co.uk/)”应用程序

2.  Politifact.com（这是一篇谈论（积极）体验的[博客文章。该网站赢得了普利策奖。](http://www.mattwaite.com/posts/2007/aug/22/announcing-politifact/)

3.  纽约时报的[代表](http://prototype.nytimes.com/represent/)应用程序

4.  [每块](http://www.everyblock.com/)

5.  WaPo 的程序员之一 Peter Harkins在他的博客上[列出了他们用 Django 构建的所有东西](http://push.cx/2009/washington-post-update)

6.  它有点老了，但《洛杉矶时报》的某个人对他们为什么选择 Django[进行了基本概述。](http://www.poynter.org/column.asp?id=52=150818)

7.  Onion 的 AV 俱乐部最近从（我认为是 Drupal）转移到了 Django。

我想这些网站中的一些可能每天获得超过 10 万次点击。Django 当然可以每天点击 10 万次甚至更多。但是 YMMV 是否可以根据您正在构建的内容来获取您的特定站点。

在 Django 级别有缓存选项（例如，在[memcached中缓存查询集和视图可以创造奇迹）和更高级别（如](http://en.wikipedia.org/wiki/Memcached)[Squid](http://en.wikipedia.org/wiki/Squid_%28software%29)的上游缓存）。数据库服务器规范也将是一个因素（通常是挥霍的地方），就像您对其进行调整的程度一样。例如，不要假设 Django 会正确设置索引。不要假设默认的[PostgreSQL](http://en.wikipedia.org/wiki/PostgreSQL)或[MySQL](http://en.wikipedia.org/wiki/MySQL)配置是正确的。

此外，如果速度较慢，您始终可以选择让多个应用程序服务器运行 Django，并在前面使用软件或硬件负载平衡器。

最后，您是否在与 Django 相同的服务器上提供静态内容？您使用的是 Apache 还是[nginx](http://en.wikipedia.org/wiki/Nginx)或[lighttpd](http://en.wikipedia.org/wiki/Lighttpd)之类的东西？你能负担得起将[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)用于静态内容吗？这些都是需要考虑的事情，但这都是非常投机的。每天 10 万次点击并不是唯一的变量：你想花多少钱？您在管理所有这些组件方面拥有多少专业知识？你有多少时间把这一切都拉到一起？

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2010-01-26T02:00:18.977

YouTube 的开发者倡导者[在 PyCon 2012 上发表了关于扩展 Python](https://www.youtube.com/watch?v=G-lGCC4KKok)的演讲，这也与扩展 Django 相关。

YouTube 拥有超过[10 亿用户](https://www.youtube.com/yt/press/statistics.html)，而 YouTube 是基于 Python 构建的。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2009-09-29T01:27:05.290

我已经使用 Django 一年多了，它如何将模块化、可扩展性和开发速度结合起来给我留下了深刻的印象。与任何技术一样，它具有学习曲线。然而，来自 Django 社区的优秀文档让这个学习曲线变得不那么陡峭。Django 已经能够很好地处理我扔给它的所有东西。看起来它将能够很好地扩展到未来。

[BidRodeo Penny Auctions](http://www.bidrodeo.com/)是一个中等规模的 Django 网站。这是一个非常动态的网站，每天确实处理大量的页面浏览量。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2009-05-20T05:22:30.800

我对 Django 的经验很少，但我确实记得在 The Django Book 中，他们有一章采访了运行一些大型 Django 应用程序的人。 [这是一个链接。](http://www.djangobook.com/en/1.0/appendixA/) 我想它可以提供一些见解。

它说 curse.com 是最大的 Django 应用程序之一，每月的页面浏览量约为 60-90 百万。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2009-05-20T05:35:26.927

请注意，如果您预计每天有 100K 用户，一次活跃数小时（意味着最多 20K+ 并发用户），您将需要大量服务器。SO 拥有约 15,000 名注册用户，其中大多数可能每天都不活跃。虽然大部分流量来自未注册用户，但我猜他们中很少有人在网站上停留超过几分钟（即他们跟随谷歌搜索结果然后离开）。

对于该数量，预计至少有 30 台服务器......这仍然是每台服务器有 1,000 个并发用户的相当大的数量。

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2015-11-07T05:01:24.440

我不认为这个问题真的与 Django 缩放有关。

我真的建议您研究一下您的架构，这将有助于您满足扩展需求。如果您弄错了，那么 Django 的性能就没有意义了。性能！=规模。您可以拥有一个性能惊人但无法扩展的系统，反之亦然。

您的应用程序数据库是否绑定？如果是这样，那么您的规模问题也在那里。您打算如何与 Django 中的数据库进行交互？当您的数据库无法像 Django 接受请求一样快地处理请求时会发生什么？当您的数据超出一台物理机时会发生什么。您需要说明您计划如何处理这些情况。

此外，当您的流量超过一台应用服务器时会发生什么？在这种情况下你如何处理会话可能会很棘手，通常你可能需要一个无共享的架构。同样，这取决于您的应用程序。

简而言之，*语言*不是决定规模的因素，语言负责性能（同样取决于您的应用程序，不同的语言执行不同）。是您的设计和架构使扩展成为现实。

希望对您有所帮助，如果您有任何问题，很乐意提供进一步的帮助。

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2016-06-09T07:08:45.223

**今天基于 Django 构建的“最大”网站是什么？（我主要通过用户流量来衡量大小）** [Pinterest](https://pinterest.com)
[disqus.com](https://disqus.com/)
更多：[https ://www.shuup.com/en/blog/25-of-the-most-popular-python-and-django-websites/](https://www.shuup.com/en/blog/25-of-the-most-popular-python-and-django-websites/)

**Django 能否每天处理 100,000 个用户，每个用户访问该站点几个小时？**
是，但使用适当的架构、数据库设计、使用缓存、使用负载平衡和多个服务器或节点

**像 Stack Overflow 这样的网站可以在 Django 上运行吗？**
是的，只需要按照第二个问题中提到的答案

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2009-05-20T11:48:27.923

另一个例子是 rasp.yandex.ru，俄罗斯交通时刻表服务。它的出勤率满足您的要求。

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2009-08-22T08:45:45.490

如果您有一个包含一些静态内容的站点，那么在前面放置一个[Varnish服务器将大大提高您的性能。](http://en.wikipedia.org/wiki/Varnish_%28software%29)然后，即使是一个盒子也可以轻松吐出 100 Mbit/s 的流量。

请注意，对于动态内容，使用 Varnish 之类的东西会变得更加棘手。

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2014-09-08T15:25:31.697

我使用 Django 为爱尔兰的国家广播公司开发高流量网站。它对我们很有效。开发高性能站点不仅仅是选择一个框架。框架将只是系统的一个部分，它与最薄弱的环节一样强大。如果问题是数据库查询缓慢或服务器或网络配置错误，使用最新的框架“X”将无法解决您的性能问题。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2014-11-09T12:15:29.243

问题不在于 django 是否可以扩展。

正确的方法是了解并知道哪些网络设计模式和工具可以放在您的 django/symfony/rails 项目下以实现良好的扩展。

一些想法可以是：

*   多路复用。
*   反向代理。例如：Nginx，清漆
*   内存缓存会话。例如：Redis
*   对您的项目和数据库进行集群化以实现负载平衡和容错：例如：Docker
*   使用第三方存储资产。例如：亚马逊 S3

希望它有点帮助。这是我对山的小石头。

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2016-01-21T16:50:17.833

如果您想使用开源，那么您有很多选择。但是 python 是其中最好的，因为它有很多库和一个超级棒的社区。以下是一些可能会改变您想法的原因：

*   Python 非常好，但它是一种解释性语言，因此速度很慢。但是有许多加速器和缓存服务可以部分解决这个问题。

*   如果您正在考虑快速开发，那么 Ruby on Rails 是最好的选择。这个（ROR）框架的主要座右铭是为开发人员提供舒适的体验。如果您比较 Ruby 和 Python，它们的语法几乎相同。

*   Google App Engine 是非常好的服务，但它会将您限制在其范围内，您没有机会尝试新事物。取而代之的是，您可以使用[Digital Ocean](https://digitalocean.com/)云，它最简单的水滴只需**每月 5 美元。**[Heroku](http://www.heroku.com)是另一项免费服务，您可以在其中部署您的产品。

*   是的！是的！您所听到的完全正确，但这里有一些使用其他技术的示例

    *   Rails：Github、Twitter（以前）、Shopify、Airbnb、Slideshare、Heroku 等。
    *   PHP：Facebook、维基百科、Flickr、雅虎、Tumbler、Mailchimp 等。

结论是一个框架或语言不会为你做所有事情。更好的架构、设计和策略将为您提供可扩展的网站。Instagram 就是最大的例子，这个小团队正在管理如此庞大的数据。这是[一篇](http://instagram-engineering.tumblr.com/)关于其架构的博客，必须阅读。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2016-03-14T20:56:00.093

尽管这里有很多很棒的答案，但我还是想指出，没有人强调..

**这取决于应用程序**

如果您的应用程序对写入很轻，因为您从数据库中读取的数据比写入的数据多得多。然后缩放 django 应该是相当简单的，见鬼，它带有一些相当不错的输出/视图缓存，开箱即用。利用它，比如说，redis 作为缓存提供者，在它前面放置一个负载均衡器，启动 n 实例，你应该能够处理非常大量的流量。

现在，如果您必须每秒执行数千次复杂的写入操作？不一样的故事。Django 会是一个糟糕的选择吗？好吧，不一定，这取决于您如何构建您的解决方案，以及您的要求是什么。

只是我的两分钱:-)

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2009-05-27T14:00:18.327

你绝对可以在 Django 中运行一个高流量的站点。在这里查看这个 pre-Django 1.0 但仍然相关的帖子：http: [//menendez.com/blog/launching-high-performance-django-site/](http://menendez.com/blog/launching-high-performance-django-site/)

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2010-01-08T10:15:00.693

查看这个名为[EveryBlock](http://everyblock.com)的微型新闻聚合器。

它完全是用 Django 编写的。事实上，他们是开发 Django 框架本身的人。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2010-11-25T01:20:04.270

平均分配任务，简而言之，优化每个方面，包括数据库、文件、图像、CSS 等，并在您的站点/应用程序开始增长时平衡与其他几个资源的负载。或者你为它的成长腾出更多的空间。大型站点必须实施 CDN、云等最新技术。仅仅开发和调整应用程序不会让您满意，其他组件也起着重要作用。

# iphone - UITableView：动态确定节数

> ID：886225
> 
> 赞同：0
> 
> 时间：2009-05-20T05:10:16.247
> 
> 标签：iphone

我有一个正在开发的 iPhone 医疗应用程序，用户在其中为执行的一系列测试创建带时间戳的条目，这些条目存储在 sqlite 中以供检索和后续钻取。在我的模型类中，我有一个使用 NSArray 的属性，该属性填充了这些条目，随着应用程序中的新添加而更新。

我想做的一件事是显示类似于日历列表视图所做的 UI 行为 - 对于任何给定的一天，显示一个部分标题，显示日期的名称和日期，并显示为那天所做的条目.

从蛮力的角度来看，我可以看到您如何预先计算 - 在构建条目列表时，您可以将整个列表存储在字典中，按日期键入。

不过，这似乎很不优雅，所以我想知道是否还有其他更有效的方法来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T05:33:04.013

如果 Core Data 在 iPhone 上可用，您可以用这种方式存储您的信息，而不是 sqlite。

然后，当您想要特定日期的数据时，您可以使用带有排序描述符的 NSPredicate 进行搜索。

然后，Core Data 将返回根据您的描述符排序的相关数据。漂亮整洁。

也许访问 Apple 开发中心/论坛以获取有关即将推出的软件的更多信息...

# linux - 如何使用 Red Hat Linux 上的标准工具随机化文件中的行？

> ID：886237
> 
> 赞同：108
> 
> 时间：2009-05-20T05:12:01.237
> 
> 标签：linux, file, random, redhat, shuffle

如何使用 Red Hat Linux 上的标准工具随机化文件中的行？

我没有`shuf`命令，所以我正在寻找完成相同任务的类似`perl`或单线的东西。`awk`

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2009-05-20T11:42:22.757

嗯，别忘了

```
sort --random-sort 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2012-02-10T16:16:27.587

`shuf`是最好的方法。

`sort -R`非常缓慢。我只是尝试对 5GB 文件进行排序。2.5小时后我放弃了。然后`shuf`一分钟就整理好了。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2009-05-20T05:17:02.323

你得到一个 Perl 单行代码！

```
perl -MList::Util -e 'print List::Util::shuffle <>' 
```

它使用一个模块，但该模块是 Perl 代码分发的一部分。如果这还不够好，您可以考虑自己滚动。

我尝试将它与`-i`标志（“就地编辑”）一起使用来编辑文件。文档表明它应该可以工作，但事实并非如此。它仍然将混洗后的文件显示到标准输出，但这次它删除了原始文件。我建议你不要使用它。

考虑一个 shell 脚本：

```
#!/bin/sh

if [[ $# -eq 0 ]]
then
  echo "Usage: $0 [file ...]"
  exit 1
fi

for i in "$@"
do
  perl -MList::Util -e 'print List::Util::shuffle <>' $i > $i.new
  if [[ `wc -c $i` -eq `wc -c $i.new` ]]
  then
    mv $i.new $i
  else
    echo "Error for file $i!"
  fi
done 
```

未经测试，但希望有效。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2009-05-20T05:36:18.203

```
cat yourfile.txt | while IFS= read -r f; do printf "%05d %s\n" "$RANDOM" "$f"; done | sort -n | cut -c7- 
```

读取文件，在每一行前面加上一个随机数，根据这些随机前缀对文件进行排序，然后剪掉前缀。应该在任何半现代外壳中工作的单衬里。

编辑：纳入理查德汉森的言论。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-11T07:29:22.973

python的单线：

```
python -c "import random, sys; lines = open(sys.argv[1]).readlines(); random.shuffle(lines); print ''.join(lines)," myFile 
```

并且只打印一条随机线：

```
python -c "import random, sys; print random.choice(open(sys.argv[1]).readlines())," myFile 
```

但请参阅[这篇文章](https://stackoverflow.com/a/3062966/1340631)了解 python 的缺点`random.shuffle()`。它不适用于许多（超过 2080 个）元素。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-20T16:20:04.740

与吉姆的回答相关：

我的`~/.bashrc`包含以下内容：

```
unsort ()
{
    LC_ALL=C sort -R "$@"
} 
```

使用 GNU coreutils 的排序`-R`= `--random-sort`，它生成每行的随机散列并按其排序。在某些较旧（错误）版本中，随机哈希实际上不会在某些语言环境中使用，导致它返回正常的排序输出，这就是我设置`LC_ALL=C`.

* * *

与克里斯的回答相关：

```
perl -MList::Util=shuffle -e'print shuffle<>' 
```

是稍短的单线。（`-Mmodule=a,b,c`是 的简写`-e 'use module qw(a b c);'`。）

给它一个简单的原因`-i`对于就地改组不起作用是因为 Perl 期望`print`在读取文件的同一个循环中发生，并且`print shuffle <>`在所有输入文件都被读取并关闭之前不会输出。

作为一个较短的解决方法，

```
perl -MList::Util=shuffle -i -ne'BEGIN{undef$/}print shuffle split/^/m' 
```

将就地打乱文件。（`-n`意思是“将代码包装在一个`while (<>) {...}`循环中；`BEGIN{undef$/}`使 Perl 一次对文件进行操作，而不是一次对行进行操作，这`split/^/m`是必需的，因为`$_=<>`已经隐式地对整个文件而不是行进行了操作。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-11T02:02:48.007

当我用自制软件安装 coreutils

```
brew install coreutils 
```

`shuf`变为可用`n`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-16T12:38:51.773

带有 DarwinPorts 的 Mac OS X：

```
sudo port install unsort
cat $file | unsort | ... 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-16T12:52:50.160

FreeBSD 有它自己的随机工具：

```
cat $file | random | ... 
```

它在 /usr/games/random 中，所以如果你还没有安装游戏，那你就不走运了。

您可以考虑安装诸如 textproc/rand 或 textproc/msort 之类的端口。如果考虑到可移植性，这些很可能在 Linux 和/或 Mac OS X 上可用。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2011-03-28T12:35:30.627

在 OSX 上，从[http://ftp.gnu.org/gnu/coreutils/](http://ftp.gnu.org/gnu/coreutils/)获取最新信息，例如

./configure make sudo make install

...应该给你 /usr/local/bin/sort --random-sort

不搞乱 /usr/bin/sort

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2011-10-14T17:38:31.193

或者从 MacPorts 获取：

```
$ sudo port install coreutils 
```

和/或

```
$ /opt/local//libexec/gnubin/sort --random-sort 
```

# python - 在 python 中打开文件时，什么是“wua”模式？

> ID：886238
> 
> 赞同：4
> 
> 时间：2009-05-20T05:13:13.310
> 
> 标签：python, file

我最近一直在浏览我们的一些 windows python 2.4 代码并遇到了这个：

```
self.logfile = open(self.logfile_name, "wua") 
```

我知道什么`w`，`u`并且`a`自己做，但是当你把它们结合起来会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T05:24:07.833

`a`是多余的。`wua`与`wu`因为`w`先出现相同，因此将截断文件。如果您将顺序颠倒，即`auw`，那将与 相同`au`。可视化：

```
>>> f = open('test.txt', 'r')
>>> f.read()
'Initial contents\n'
>>> f.close()
>>> f = open('test.txt', 'wua')
>>> print >> f, 'writing'
>>> f.close()
>>> f = open('test.txt', 'r')
>>> f.read()
'writing\n'
>>> f.close()
>>> f = open('test.txt', 'auw')
>>> print >> f, 'appending'
>>> f.close()
>>> f = open('test.txt', 'r')
>>> f.read()
'writing\nappending\n'
>>> f.close() 
```

（提醒：两者都`a`打开`w` [文件进行写入](http://docs.python.org/3.0/library/functions.html#open)，但前者追加而其他截断。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T05:24:55.570

我没有注意到您知道修饰符的作用。结合起来，他们将执行以下操作：

A 和 W 一起是多余的，因为两者都可以写入。使用 W 时，文件将被覆盖。使用 A 时，所有新文本都附加在现有内容之后。

U 表示“打开文件 XXX 以作为具有通用换行解释的文本文件输入”。

*   W是写
*   A 是追加
*   U 将文件转换为使用定义的换行符。

更多信息：http: [//codesnippets.joyent.com/posts/show/1969](http://codesnippets.joyent.com/posts/show/1969)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T22:17:53.347

在底层 Python 2.4 将 builtin`open`的参数传递给操作系统的`fopen`函数。Python 确实在某些条件下对模式字符串进行了一些修改。

```
if (strcmp(mode, "U") == 0 || strcmp(mode, "rU") == 0)
    mode = "rb"; 
```

因此，如果您传递一个大写字母`U`，否则`rU`它将打开文件以进行二进制读取。查看 GNU libc 源代码并根据描述 Windows 实现的 MSDN 页面，忽略`fopen`了 ' ' 选项。`u`

模式字符串中有多个模式指示符（' `r`'、' `w`' 和 ' `a`'）无效。这可以通过查看模式字符串解析的 GNU libc 实现来看出：

```
switch (*mode)
{
case 'r':
  omode = O_RDONLY;
  break;
case 'w':
  omode = O_WRONLY;
  oflags = O_CREAT|O_TRUNC;
  break;
case 'a':
  omode = O_WRONLY;
  oflags = O_CREAT|O_APPEND;
  break;
default:
  __set_errno (EINVAL);
  return NULL;
} 
```

在模式字符串的第一个字符中搜索 ' `r`'、' `w`' 或 ' `a`'，如果不是这些字符中的一个，则会引发错误。

因此，当一个文件以 " `wua`" 形式打开时，它将只为写入而打开，如果它不存在则创建并被截断。' `u`' 和 ' `a`' 将被忽略。

# hibernate - 如何在不加入休眠状态的情况下从第二个表中获取值

> ID：886243
> 
> 赞同：-1
> 
> 时间：2009-05-20T05:14:58.520
> 
> 标签：hibernate

嗨，我有一张名为 CHECKPRODUCT 的表。

我还有第二个名为 CHECKSTATUS_LOOKUP 的表，列名是DESCRIPTION

当我从 CHECKPRODUCT 中获取值时，我还想要第二个表（CHECKSTATUS_LOOKUP）的说明列中的值，但我不想加入两个表。有没有办法做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T05:22:58.460

请提供更多详细信息并解释您在两个表中有哪些列以及具体要求是什么。

在大多数情况下，您可以使用子查询而不是联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T05:24:21.983

只是一个建议。当您使用 Hibernate 或 NHibernate 时，最好谈论类+属性而不是表+字段

# reporting-services - 条形图 Y 轴上的值太大

> ID：886248
> 
> 赞同：2
> 
> 时间：2009-05-20T05:16:28.643
> 
> 标签：reporting-services, reportingservices-2005

我在 SSRS 中有一个条形图，它具有以下值..

X 轴上的 5 个点的值为 100,120,130,123,8000 所以最后一个值太小了，因为比例越来越大，导致图表看起来很糟糕......其他点不可读......

那么，wiz有什么办法可以让我在条形图中显示LAST BAR，并在条形图顶部显示数据点标签……

我通过在 Y 轴上给出最大值来尝试它，但它使数据点标签消失，因此用户不知道该条的实际值.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T05:18:56.517

使用对数刻度？;)

# asp.net-mvc - 从 ASP.NET MVC 中的 ViewEngine 中查找操作的属性

> ID：886267
> 
> 赞同：1
> 
> 时间：2009-05-20T05:22:29.740
> 
> 标签：asp.net-mvc, routing, master-pages, viewengine

我有一个自定义 ViewEngine，我想根据请求的操作是否具有`Authorize`属性过滤器来修改使用的母版页。

到目前为止，我只是使用这样的反射：

```
var method = controllerContext.Controller.GetType().GetMethod(viewName, BindingFlags.Instance | BindingFlags.Public | BindingFlags.IgnoreCase);
if (method != null)
{
    if (method.GetCustomAttributes(typeof(AuthorizeAttribute), true).Length > 0)
    {
        masterName = "Admin.master";
    }
} 
```

但我不喜欢将反射用于重复性任务。我知道我可以在第一次之后使用视图缓存来加快速度，但我想知道是否有更直接的方法来访问应用于`FindView`方法内部操作的过滤器列表`ViewEngine`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-02T14:38:49.377

您几乎仅限于使用反射来获取任何属性信息，而不管包括 MVC 操作方法在内的任何内容。;)

获取此信息的唯一其他技术是通过 ControllerDescriptor 路径

在您的情况下，您可以完全跳过寻找授权属性，而只是询问用户是否被授权并为他们提供所需的母版页。

我之前在自定义视图引擎中动态设置了母版页，而性能最高的选项是查看任何可用的 HttpContextBase 信息。对于一种情况，当我需要使用它们时，我只是传递了查询参数或附加在 {masterPage} 路由参数上。

获取动作信息的唯一其他途径是 ReflectedControllerDescriptor 路由。这种方法的问题是它非常冗长，并且需要很多代码行才能完成您的工作。

这是用于进行安全链接修剪修剪的“描述符”技术的一些代码（我在 stackoverflow 上找到的！）。如果母版页位于自定义视图引擎中，此代码还可用于动态设置母版页。它不是您要寻找的，但可以帮助其他人在其他地方完成相同的动态母版页设置：

```
 public static bool HasActionPermission( this HtmlHelper htmlHelper, string actionName, string controllerName )
    {
        //if the controller name is empty the ASP.NET convention is:
        //"we are linking to a different controller
        ControllerBase controllerToLinkTo = string.IsNullOrEmpty(controllerName) 
                                                ? htmlHelper.ViewContext.Controller
                                                : GetControllerByName(htmlHelper, controllerName);

        var controllerContext = new ControllerContext(htmlHelper.ViewContext.RequestContext, controllerToLinkTo);

        var controllerDescriptor = new ReflectedControllerDescriptor(controllerToLinkTo.GetType());

        var actionDescriptor = controllerDescriptor.FindAction(controllerContext, actionName);

        return ActionIsAuthorized(controllerContext, actionDescriptor);
    }

    private static bool ActionIsAuthorized(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        if (actionDescriptor == null)
            return false; // action does not exist so say yes - should we authorise this?!

        AuthorizationContext authContext = new AuthorizationContext(controllerContext);

        // run each auth filter until on fails
        // performance could be improved by some caching
        foreach (IAuthorizationFilter authFilter in actionDescriptor.GetFilters().AuthorizationFilters)
        {
            authFilter.OnAuthorization(authContext);

            if (authContext.Result != null)
                return false;
        }

        return true;
    } 
```

# php - 在zend框架中调用其他控制器的成员函数？

> ID：886291
> 
> 赞同：24
> 
> 时间：2009-05-20T05:29:47.777
> 
> 标签：php, zend-framework

是否可以在zend框架中调用另一个控制器的成员函数，如果可以，那么如何？

```
<?php
class FirstController extends Zend_Controller_Action {
    public function indexAction() {
         // general action 
    }   

    public function memberFunction() {
         // a resuable function
    }
} 
```

这是另一个控制器

```
<?php
class SecondController extends Zend_Controller_Action {
    public indexAction() {
         // here i need to call memberFunction() of FirstController
    }
} 
```

请解释我如何从第二个控制器访问 memberFunction()。

# 解决方案

更好的想法是定义一个 AppController 并使所有常用的控制器扩展 AppController，从而进一步扩展 Zend_Controller_Action。

```
class AppController extends Zend_Controller_Action {
    public function memberFunction() {
         // a resuable function
    }
}

class FirstController extends AppController {
    public function indexAction() {
         // call function from any child class
         $this->memberFunction();
    } 
} 
```

现在`memberFunction`可以从`AppController`作为简单继承规则扩展的控制器调用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-20T06:47:07.870

控制器并非设计为以这种方式使用。如果要在当前控制器*之后*执行另一个控制器的*操作*，请使用以下方法：*`_forward()`*

 *```
// Invokes SecondController::otherActionAction() after the current action has been finished.
$this->_forward('other-action', 'second'); 
```

请注意，这仅适用于*操作方法*（“memberAction”），不适用于任意成员函数！

如果`SecondController::memberFunction()`需要跨多个控制器执行某些操作，则将该代码放入操作帮助程序或库类中，以便两个控制器可以访问共享功能而不必相互依赖。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T11:17:48.530

您应该考虑将代码分解到动作助手或模型中，以便可以从需要它的两个控制器中调用它。

问候，

抢...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T16:12:40.780

我建议您遵循 DRY 并将这些功能移动到公共库位置。例如在库文件夹中创建

```
My/Util/ 
```

并归档

```
CommonFunctions.php 
```

然后打电话给你的班级

```
My_Util_CommonFunctions 
```

并定义你的方法

现在，您可以使用必须注册的新命名空间从代码中的任何位置调用它们。

```
$loader = Zend_Loader_Autoloader::getInstance();
$loader->registerNamespace(array('My_')); 
```

在任何控制器中，您都可以使用以下方法调用您的自定义方法：

```
My_Util_CustomFunctions::yourCustomMethod($params); 
```

# sql - 如何为查询返回的每一行执行一次存储过程？

> ID：886293
> 
> 赞同：222
> 
> 时间：2009-05-20T05:30:31.850
> 
> 标签：sql, sql-server, stored-procedures

我有一个以某种方式更改用户数据的存储过程。我将它传递给 user_id，它就完成了。我想在一个表上运行一个查询，然后对于每个 user_id 我发现在该 user_id 上运行一次存储过程

我将如何为此编写查询？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2009-05-20T05:36:31.603

使用光标

附录：[MS SQL 游标示例]

```
declare @field1 int
declare @field2 int
declare cur CURSOR LOCAL for
    select field1, field2 from sometable where someotherfield is null

open cur

fetch next from cur into @field1, @field2

while @@FETCH_STATUS = 0 BEGIN

    --execute your sproc on each row
    exec uspYourSproc @field1, @field2

    fetch next from cur into @field1, @field2
END

close cur
deallocate cur 
```

在 MS SQL 中，[这是一篇示例文章](http://www.sqlteam.com/article/cursors-an-overview)

请注意，游标比基于集合的操作慢，但比手动 while 循环快；[此 SO question 中的](https://stackoverflow.com/questions/287445/why-do-people-hate-sql-cursors-so-much)更多详细信息

附录 2：如果您要处理的记录不止几条，请先将它们拉入临时表，然后在临时表上运行游标；这将防止 SQL 升级为表锁并加快操作

附录 3：当然，如果您可以内联您的存储过程对每个用户 ID 所做的任何事情，并将整个事情作为单个 SQL 更新语句运行，那将是最佳的

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2009-05-20T18:48:42.303

**如果您需要循环，请尝试更改您的方法！**

在父存储过程中，创建一个包含您需要处理的数据的#temp 表。调用子存储过程，#temp 表将是可见的，您可以处理它，希望使用整个数据集并且没有游标或循环。

这实际上取决于这个子存储过程在做什么。如果您正在更新，您可以“更新”加入#temp 表并在一个语句中完成所有工作而无需循环。对 INSERT 和 DELETE 也可以这样做。如果您需要使用 IF 进行多次更新，您可以`UPDATE FROM`使用 #temp 表将其转换为多次更新，并使用 CASE 语句或 WHERE 条件。

当在数据库中工作时，尝试失去循环的心态，这是一种真正的性能消耗，会导致锁定/阻塞并减慢处理速度。如果您到处循环，您的系统将无法很好地扩展，并且当用户开始抱怨刷新缓慢时将很难加速。

在循环中发布您想要调用的此过程的内容，我会在 10 次中打赌 9 次，您可以编写它来处理一组行。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-20T05:42:46.307

您的表和字段名称将需要类似这样的替换。

```
Declare @TableUsers Table (User_ID, MyRowCount Int Identity(1,1)
Declare @i Int, @MaxI Int, @UserID nVarchar(50)

Insert into @TableUser
Select User_ID
From Users 
Where (My Criteria)
Select @MaxI = @@RowCount, @i = 1

While @i <= @MaxI
Begin
Select @UserID = UserID from @TableUsers Where MyRowCount = @i
Exec prMyStoredProc @UserID
Select

 @i = @i + 1, @UserID = null
End 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-02-08T16:29:04.410

您可以使用动态查询来完成。

```
declare @cadena varchar(max) = ''
select @cadena = @cadena + 'exec spAPI ' + ltrim(id) + ';'
from sysobjects;
exec(@cadena); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-06-05T13:57:07.913

使用表变量或临时表。

如前所述，游标是最后的手段。主要是因为它使用大量资源、问题锁并且可能表明您只是不了解如何正确使用 SQL。

> 旁注：我曾经遇到过一个使用游标更新表中行的解决方案。经过一番审查，结果发现整个事情都可以用一个 UPDATE 命令代替。但是，在这种情况下，应该执行存储过程，单个 SQL 命令将不起作用。

像这样创建一个表变量（如果您正在处理大量数据或内存不足，请改用[临时表](https://stackoverflow.com/questions/43026755/how-to-create-temp-table-using-create-statement-in-sql-server)）：

```
DECLARE @menus AS TABLE (
    id INT IDENTITY(1,1),
    parent NVARCHAR(128),
    child NVARCHAR(128)); 
```

`id`很重要。

将`parent`和替换`child`为一些好的数据，例如相关标识符或要操作的整组数据。

在表中插入数据，例如：

```
INSERT INTO @menus (parent, child) 
  VALUES ('Some name',  'Child name');
...
INSERT INTO @menus (parent,child) 
  VALUES ('Some other name', 'Some other child name'); 
```

声明一些变量：

```
DECLARE @id INT = 1;
DECLARE @parentName NVARCHAR(128);
DECLARE @childName NVARCHAR(128); 
```

最后，在表中的数据上创建一个 while 循环：

```
WHILE @id IS NOT NULL
BEGIN
    SELECT @parentName = parent,
           @childName = child 
        FROM @menus WHERE id = @id;

    EXEC myProcedure @parent=@parentName, @child=@childName;

    SELECT @id = MIN(id) FROM @menus WHERE id > @id;
END 
```

第一个选择从临时表中获取数据。第二个选择更新@id。`MIN`如果没有选择行，则返回 null。

另一种方法是在表有行时循环，`SELECT TOP 1`并从临时表中删除选定的行：

```
WHILE EXISTS(SELECT 1 FROM @menuIDs) 
BEGIN
    SELECT TOP 1 @menuID = menuID FROM @menuIDs;

    EXEC myProcedure @menuID=@menuID;

    DELETE FROM @menuIDs WHERE menuID = @menuID;
END; 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-03-24T17:11:21.607

这不能通过用户定义的函数来复制您的存储过程正在执行的任何操作吗？

```
SELECT udfMyFunction(user_id), someOtherField, etc FROM MyTable WHERE WhateverCondition 
```

其中 udfMyFunction 是您创建的一个函数，它接收用户 ID 并执行您需要对其执行的任何操作。

有关更多背景信息，请参见[http://www.sqlteam.com/article/user-defined-functions](http://www.sqlteam.com/article/user-defined-functions)

我同意在可能的情况下确实应该避免使用游标。这通常是可能的！

（当然，我的回答假设您只对从 SP 获取输出感兴趣并且您没有更改实际数据。我发现“以某种方式更改用户数据”与原始问题有点模棱两可，所以我想我会提供这个作为一个可能的解决方案。完全取决于你在做什么！）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-29T12:30:12.037

我喜欢 Dave Rincon 的动态查询方式，因为它不使用游标，而且小巧简单。谢谢戴夫的分享。

但是为了我对 Azure SQL 的需求和查询中的“不同”，我不得不像这样修改代码：

```
Declare @SQL nvarchar(max);
-- Set SQL Variable
-- Prepare exec command for each distinctive tenantid found in Machines 
SELECT @SQL = (Select distinct 'exec dbo.sp_S2_Laser_to_cache ' + 
              convert(varchar(8),tenantid) + ';' 
              from Dim_Machine
              where iscurrent = 1
              FOR XML PATH(''))

--for debugging print the sql 
print @SQL;

--execute the generated sql script
exec sp_executesql @SQL; 
```

我希望这可以帮助别人...

# c++ - C++：什么时候可以在头文件中包含代码？

> ID：886296
> 
> 赞同：9
> 
> 时间：2009-05-20T05:31:30.707
> 
> 标签：c++, coding-style, header

我被教导将类定义和代码分开。

然而，我见过人们经常在标题中包含一些代码的情况，例如返回变量引用的简单访问方法。

你在哪里画线？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-20T05:35:51.123

一般来说，你希望编译器内联的东西，或者模板化的代码。在任何一种情况下，代码都必须可供编译器在任何使用它的地方使用，因此您别无选择。

但是，请注意，您在头文件中放入的代码越多，编译所需的时间就越长 - 您最终会更频繁地接触头文件，从而导致构建缓慢的连锁反应:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T05:37:38.593

最小化标头中的代码量的一个原因是最小化实现更改时要重新编译的代码量。如果您不关心这一点，您可以在标题中包含任意数量的代码。

有时，仅在标头中包含代码是为了公开代码 - ATL 为 eaxmple 执行此操作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-20T05:51:52.920

在开发大型 C++ 项目时，您需要注意使每个 .CPP 文件与尽可能少的头文件相结合。

所以我有一个简单的“画线”规则：

如果通过内联实现，您的头文件现在需要包含一个额外的头文件，您应该将实现移出头文件并放入 .CPP 文件中。

当然，这不是不内联的唯一原因，但这是不应该越线的明确示例。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-20T06:47:14.827

1.  内联函数
2.  一/二线法
3.  模板

但是当头文件变大时，编译会花费越来越多的时间，所以使用预编译头文件很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T05:38:29.310

我会坚持使用 .c 和 .cpp 文件中的代码以及 .h、.hpp 文件中的标头内容。原因是当我下载 .tar.gz 或 zip 的源代码时，我总是在寻找头文件的 .h 文件和源代码的 .cpp 文件。很多人已经习惯了，所以我认为你应该保持这种风格。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T05:42:50.283

当您在头文件中有简单的 getter/setter 方法的代码时，它或多或少都很好，因为您要么因为代码维护（在头文件和实现文件中键入相同的方法）而想要节省一些工作时间，要么因为您实际上想要由于在时间关键的地方的函数调用开销，该方法是内联的。

您不仅会受到较慢的构建速度的影响，而且如果您在各处或多或少地可见很多类，则链接时间可能会**很长。**

在头文件和实现文件之间混合代码的另一个缺点是可读性。如果你一致地在头文件中声明并将代码一致地保留在实现文件中，则更容易在方法之间保持相同的顺序。如果您知道我的意思，就没有遗漏的空白。

干杯！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-20T05:43:39.317

另请注意，如果您将代码放在头文件中并且不小心使用 Makefile，您可能会遇到一些奇怪的副作用。我曾经有一个错误，因为我在一个头文件中更改了代码，该代码被重新编译到一些文件中，但不是其他文件，因为 Makefile 中的依赖关系不正确。如果您自动生成 Makefile，这没什么大不了的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-20T06:09:48.353

如果您希望“内联”代码，则需要在标题中添加代码。否则，将实现粘贴在正文中会有更多优势。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T05:33:04.513

由你决定。Boost 几乎将所有代码都放在了标题中……而且它们是一个备受推崇的库。

# jquery - ie7中Livequery检测到的对象

> ID：886298
> 
> 赞同：0
> 
> 时间：2009-05-20T05:32:18.443
> 
> 标签：jquery, ajax, internet-explorer-7, livequery

谁能弄清楚为什么这会在 ie7 中给我空白警报框？

```
$("#bottles a").livequery("click", function(event) {  
    thetitle=$(this).attr("title");  
    alert(thetitle);  
    return false;  
}); 
```

对于加载的每个新的 A 标签，ie7 都会提示一条空白消息（FF 正确显示了各自的标题） 但是，当 title=$(this).html() 时，ie7 会提示正确的信息。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T07:09:22.277

jQuery 选择器和访问器为此太过分了。你试过这个吗？

```
$("#bottles a").livequery("click", function(event) {  
        // Always define a local variable, unless you explicitly 
        //  want your variable to be globally scoped.
        var thetitle = this.title;  

        alert(thetitle);

        return false;  
}); 
```

另外，您知道[jQuery 1.3.x 内置了 LiveQuery](http://docs.jquery.com/Events/live#typefn)吗？不再需要额外的插件。

# mysql - MySQL 资源限制

> ID：886308
> 
> 赞同：1
> 
> 时间：2009-05-20T05:35:06.943
> 
> 标签：mysql, resources, limits

每当我为特定用户/数据库/主机设置资源限制时，它会在整个小时内传播吗？它会延迟查询还是不允许您查询会引发某种错误或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:55:02.090

[http://dev.mysql.com/doc/refman/5.0/en/user-resources.html](http://dev.mysql.com/doc/refman/5.0/en/user-resources.html)说：

> 当服务器运行时，它会计算每个帐户使用资源的次数。如果帐户在过去一小时内达到其连接数限制，则该帐户的进一步连接将被拒绝，直到该小时结束。同样，如果帐户达到其查询或更新数量的限制，则进一步的查询或更新将被拒绝，直到该小时结束。在所有这些情况下，都会发出相应的错误消息。

# java - [Java]如何判断文件是否正在使用？

> ID：886315
> 
> 赞同：4
> 
> 时间：2009-05-20T05:36:55.787
> 
> 标签：java

如何判断一个文件是否正在使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T05:57:13.553

在 java 中，您可以锁定文件并检查[共享访问](http://java.sun.com/developer/JDCTechTips/2002/tt0924.html)。

> 您可以使用文件锁来限制多个进程对文件的访问

```
public class Locking {
   public static void main(String arsg[])
       throws IOException {
     RandomAccessFile raf =
       new RandomAccessFile("junk.dat", "rw");
     FileChannel channel = raf.getChannel();
     FileLock lock = channel.lock();
     try {
       System.out.println("Got lock!!!");
       System.out.println("Press ENTER to continue");
       System.in.read(new byte[10]);
     } finally {
       lock.release();
     }
   }
} 
```

您还可以通过调用检查锁是否存在

```
// Try acquiring the lock without blocking. This method returns
// null or throws an exception if the file is already locked.
        try {
            lock = channel.tryLock();
        } catch (OverlappingFileLockException e) {
            // File is already locked in this thread or virtual machine
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T05:52:35.433

我不认为 Java 可以告诉您另一个进程是否正在使用文件。根据您尝试执行的操作，您可能会`IOException`在尝试操纵它时得到一个。否则，如果您不是 Linux，则可能需要查看[lsof](http://en.wikipedia.org/wiki/Lsof)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T05:57:44.847

我认为您要问的是您尝试使用的文件是否已锁定。您可以使用[`FileLock`](http://java.sun.com/j2se/1.4.2/docs/api/java/nio/channels/FileLock.html)该类尝试锁定您感兴趣的文件。该类旨在映射到正在使用的文件系统上的本机文件锁定工具。如果您可以锁定文件，则可以安全地假设没有其他进程持有该文件的锁定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T07:09:09.873

这是一个适用于 Windows 用户的简单解决方案： [http ://www.dr-hoiby.com/WhoLockMe/](http://www.dr-hoiby.com/WhoLockMe/)

小工具，但很有用...

# xml - 使用 XSLT 将 XML 转换为 XML - 丑陋的 ColdFusion 导出

> ID：886316
> 
> 赞同：3
> 
> 时间：2009-05-20T05:37:03.383
> 
> 标签：xml, xslt, coldfusion

我有以下需要转换的 XML 结构：

```
<recordset rowCount="68" fieldNames="ITEM,ECL,LEAD_TIME" type="**coldfusion.sql.QueryTable**">
<field name="ITEM">
 <string>ITEM_A</string>
 <string>ITEM_B</string>
 <string>ITEM_C</string>
</field>
<field name="REV">
 <string>A</string>
 <string>B</string>
 <string>C</string>
</field>
<field name="LEAD_TIME">
 <string>10</string>
 <string>15</string>
 <string>25</string>
</field>
</recordset> 
```

进入：

```
<records>
<item_line>
 <item>ITEM_A</item>
 <rev>A</rev>
 <lead_time>10</lead_time>
</item_line>
<item_line>
 <item>ITEM_B</item>
 <rev>B</rev>
 <lead_time>15</lead_time>
</item_line>
<item_line>
 <item>ITEM_C</item>
 <rev>C</rev>
 <lead_time>25</lead_time>
</item_line>
</records> 
```

我对 XSLT 的了解非常有限......

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T06:10:58.477

```
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>

  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

  <xsl:template match="/recordset">
    <records>
      <xsl:apply-templates select="field[@name='ITEM']/string" />
    </records>
  </xsl:template>

  <xsl:template match="field[@name='ITEM']/string">
    <xsl:variable name="currpos" select="position()" />

    <item_line>
      <item>
        <xsl:value-of select="." />
      </item>
      <rev>
        <xsl:value-of select="/recordset/field[@name='REV']/string[$currpos]" />
      </rev>
      <lead_time>
        <xsl:value-of select="/recordset/field[@name='LEAD_TIME']/string[$currpos]" />
      </lead_time>
    </item_line>
  </xsl:template>

</xsl:stylesheet> 
```

一个更易读且可能稍微快一点的版本将使用`<xsl:key>`：

```
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>

  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

  <xsl:key name="k_field" match="recordset/field" use="@name" />

  <xsl:template match="/">
    <records>
      <xsl:apply-templates select="key('k_field', 'ITEM')/string" />
    </records>
  </xsl:template>

  <xsl:template match="field[@name='ITEM']/string">
    <xsl:variable name="currpos" select="position()" />

    <item_line>
      <item>
        <xsl:value-of select="." />
      </item>
      <rev>
        <xsl:value-of select="key('k_field', 'REV')/string[$currpos]" />
      </rev>
      <lead_time>
        <xsl:value-of select="key('k_field', 'LEAD_TIME')/string[$currpos]" />
      </lead_time>
    </item_line>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T07:28:13.657

一个简单的方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="//recordset">
        <records>
            <xsl:apply-templates select="field[@name = 'ITEM']/string"/>
        </records>
    </xsl:template>

    <xsl:template match="string">
        <xsl:variable name="loc" select="position()"/>
        <item_line>
            <item>
                <xsl:value-of select="."/>
            </item>
            <rev>
                <xsl:value-of select="//recordset/field[@name = 'REV']/string[position() = $loc]"/>
            </rev>
            <lead_time>
                <xsl:value-of select="//recordset/field[@name = 'LEAD_TIME']/string[position() = $loc]"/>
            </lead_time>
        </item_line>
    </xsl:template>

</xsl:stylesheet> 
```

下面是一个比上面更复杂的 xslt。它将允许您进一步扩展 revTemplate 和 leadTimeTemplate 而不会弄乱字符串模板。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="//recordset">
        <records>
            <xsl:apply-templates select="field[@name = 'ITEM']/string"/>
        </records>
    </xsl:template>

    <xsl:template match="string">       
        <item_line>
            <item>
                <xsl:value-of select="."/>
            </item>
            <xsl:call-template name="revTemplate">
                <xsl:with-param name="loc" select="position()"/>
            </xsl:call-template>
            <xsl:call-template name="leadTimeTemplate">
                <xsl:with-param name="loc" select="position()"/>
            </xsl:call-template>
        </item_line>
    </xsl:template>

    <xsl:template name="revTemplate">
        <xsl:param name="loc"/>
        <rev>
            <xsl:value-of select="//recordset/field[@name = 'REV']/string[position() = $loc]"/>
        </rev>
    </xsl:template>

    <xsl:template name="leadTimeTemplate">
        <xsl:param name="loc"/>
        <rev>
            <xsl:value-of select="//recordset/field[@name = 'LEAD_TIME']/string[position() = $loc]"/>
        </rev>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T21:33:18.960

以下解决方案适用于任何字段名称和任意数量的字段。您的数据格式表明字段名称可能是动态的。它也不假定字段 children 将始终命名为“字符串”。（“字符串”这个名字让我怀疑可能会出现其他数据类型。不管它们是否出现，这个解决方案仍然有效。）

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output indent="yes"/>

  <xsl:template match="/">
    <records>
      <!-- Just process the first field's children, 
           to get the list of line items -->
      <xsl:apply-templates select="/recordset/field[1]/*"/>
    </records>
  </xsl:template>

  <!-- Convert each field child to a line item -->
  <xsl:template match="field/*">
    <item_line>
      <!-- Then query all the fields for the value at this position -->
      <xsl:apply-templates select="/recordset/field">
        <xsl:with-param name="pos" select="position()"/>
      </xsl:apply-templates>
    </item_line>
  </xsl:template>

  <xsl:template match="field">
    <xsl:param name="pos"/>
    <!-- Convert the field name to lower case -->
    <xsl:element name="{translate(
      @name,
      'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
      'abcdefghijklmnopqrstuvwxyz'
    )}">
      <xsl:value-of select="*[$pos]"/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

如果您有任何问题，请告诉我。

* * *

编辑：上述的简化版本：

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output indent="yes"/>

  <xsl:template match="/">
    <records>
      <xsl:for-each select="/recordset/field[1]/*">
        <xsl:variable name="pos" select="position()" />
        <item_line>
          <xsl:apply-templates select="/recordset/field/*[$pos]" />
        </item_line>
      </xsl:for-each>
    </records>
  </xsl:template>

  <xsl:template match="field/*">
    <xsl:element name="{translate(
      ../@name,
      'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
      'abcdefghijklmnopqrstuvwxyz'
    )}">
      <xsl:value-of select="."/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

# google-analytics - 我可以在谷歌分析中过滤掉我的流量吗？

> ID：886317
> 
> 赞同：4
> 
> 时间：2009-05-20T05:37:25.957
> 
> 标签：google-analytics, web-traffic

我有一个运行谷歌分析的网站，我最终成为它流量的很大一部分（比如每天 2 次点击中的 1 次）。有什么办法可以设置它，以便我的浏览不会使数字倾斜太多？如果它没有为以我的 Google 帐户登录的访问记录任何内容，我会很高兴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T05:47:47.373

在您的分析设置中使用过滤器管理器

[http://www.google.com/support/analytics/bin/answer.py?answer=55481&cbid=-1j8it19c4uzvt&src=cb&lev=answer](http://www.google.com/support/analytics/bin/answer.py?answer=55481&cbid=-1j8it19c4uzvt&src=cb&lev=answer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T05:48:57.933

您可以使用过滤器排除

1.  来自 aa 域的流量
2.  IP地址
3.  子目录

或者您可以使用自定义过滤器。如果**您**登录并使用自定义过滤器排除该广告系列代码，则可以编辑您的网站以设置广告系列代码。

如果您使用同一台机器，也可以尝试使用 ip 过滤器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T05:51:10.113

一种选择是在浏览器中使用[广告拦截](https://addons.mozilla.org/en-US/firefox/addon/1865)或[javascript 禁用](http://noscript.net/)扩展程序，以防止加载谷歌分析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-07T14:53:17.417

一个巧妙的解决方案是根据您机器上设置的 cookie 简单地阻止跟踪 javascript 发送到浏览器。这可以通过简单地在页面中添加几行代码来完成。看看[这篇文章](http://www.sonix-media.com/blog/web-development/how-to-filter-out-your-own-traffic-in-google-analytics/)以获得完整的解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T05:47:00.357

如果您以站点用户身份登录，也许您基于此您只是没有将用于 Google Analytics 的 JavaScript 放在输出 HTML 中。当您是管理员并且不想根据您的活动弄乱结果时，这是一个典型的情况。

如果您能够触摸运行您网站的代码，我认为这是最简单的方法。

如果不是这种情况，请提供更多详细信息。

# asp.net - 在中等信任下从 global.asax 重定向

> ID：886319
> 
> 赞同：0
> 
> 时间：2009-05-20T05:37:38.670
> 
> 标签：asp.net, global-asax, medium-trust, response.redirect

我的 global.asax 中有这个简单的 Application_Error 方法，如果在中等信任下发生异常，它不会重定向。有人可以告诉我这里出了什么问题。

此代码在完全信任下工作正常

```
void Application_Error(object sender, EventArgs e)
    {
        Response.Redirect("~/error.aspx",false);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T03:33:53.407

显然删除错误参数解决了这个问题。重定向执行时确实会生成安全异常，但它重定向就好了

# visual-studio - 新的VS2010 Beta 1会有Virtual PC吗

> ID：886326
> 
> 赞同：1
> 
> 时间：2009-05-20T05:42:01.907
> 
> 标签：visual-studio, visual-studio-2010, beta

我喜欢使用 VS2010 的想法。我今天下载了它来玩它。但我很犹豫是否将其全部安装在我的机器上，因为从 Microsoft 测试版升级通常很困难。另外，我不是 TFS 安装专家，所以我不知道设置它的最佳方法。

但我还是想玩它...

有谁知道一个 VPC 已经全部设置好并准备好使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T05:49:10.727

我认为 VPC 仅适用于 Visual Studio 的 alpha 版本。

玩 VS 的最佳方式是安装到虚拟机（VmWare 或 VirtualPC）或安装另一台机器（家用电脑、笔记本电脑、第二台电脑等），恕我直言。

如果您没有虚拟机操作系统许可，您可以尝试 Microsoft 系统或 beta 的试用版（Win7 和 Server 2008 R2）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T06:17:08.043

微软在内部进行了许多有趣的虚拟化工作，并很快推出了几款主要的虚拟化产品。[HyperV](http://www.microsoft.com/windowsserver2008/en/us/hyperv-main.aspx)和[XP 在 Windows 7 中的虚拟化](http://community.winsupersite.com/blogs/paul/archive/2009/04/24/secret-no-more-revealing-virtual-windows-xp-for-windows-7.aspx)最为显着。如果我们在新的 VS 中没有看到这个功能，那会很震惊。

如果您对用于开发测试的桌面虚拟化感兴趣，请查看 Sun 的[Virtual Box ，它非常棒，与其他免费和](http://www.virtualbox.org/)[GPL](http://www.gnu.org/copyleft/gpl.html)的高质量虚拟化环境不同。我使用[便携式版本的 VirtualBox](http://forums.virtualbox.org/viewtopic.php?f=9&t=15639&start=0)来回拖动我的虚拟桌面，以便每天在外部 SATA 驱动器上工作。

[链接文本](http://blogs.virtualizationadmin.com/conger/2009/04/30/how-microsoft-uses-hardware-virtualization-internally/)

# tfs - TFS 和关键字扩展

> ID：886330
> 
> 赞同：4
> 
> 时间：2009-05-20T05:43:29.347
> 
> 标签：tfs, visual-sourcesafe, keyword-expansion

我们刚刚将一些项目从 Microsoft Visual SourceSafe (VSS) 移至 Microsoft Team Foundation Server (TFS)，现在注意到关键字扩展不再有效。

例如，关键字 like `$Log$`or`$Header$`不再扩展为正确的值。

谁能告诉我们这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-26T20:32:09.743

现在有一个免费工具可用： http: [//logsubstpol.codeplex.com/](http://logsubstpol.codeplex.com/)

我不知道它的效果如何。大概他们阅读了巴克的警告！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T12:41:00.937

TFS 不支持关键字扩展。有关更多信息，请参阅以下帖子：

*   [TFS 中的关键字扩展](http://blogs.msdn.com/buckh/archive/2007/07/07/keyword-expansion-in-tfs.aspx)

# iphone - 在 iPhone 中翻转视图？

> ID：886331
> 
> 赞同：1
> 
> 时间：2009-05-20T05:43:37.490
> 
> 标签：iphone, xcode

我有一个`UIView`带有按钮的按钮，在按钮的点击上，我正在显示一个`UIView`包含 a`UINavigationBar`和 a的新按钮`UITableView`。有没有办法在按钮的点击和加载视图上设置翻转效果动画，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T06:09:37.760

当然，这里有一些代码可能会有所帮助

```
- (void)flipAction:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.75];
    // checks to see if the view is attached
    [UIView setAnimationTransition:([logTextView superview] ?
                                    UIViewAnimationTransitionFlipFromLeft : UIViewAnimationTransitionFlipFromRight)
                           forView:[self view] cache:YES];
    [UIView setAnimationTransition:([logTextView superview] ?
                                    UIViewAnimationTransitionFlipFromLeft : UIViewAnimationTransitionFlipFromRight)
                           forView:[[self navigationController] view] cache:YES];
    if ([logTextView superview])
    {
        [logTextView removeFromSuperview];
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"FTP Log", nil) style:UIBarButtonItemStyleBordered target:self action:@selector(viewFtpLog)];
    }
    else
    {
        [[self view] addSubview:logTextView];
        [[[self navigationItem] rightBarButtonItem] release];
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Done", nil) style:UIBarButtonItemStyleDone target:self action:@selector(flipAction:)];
    }

    [UIView commitAnimations];
} 
```

对你来说，你可能想为你的表格视图获取 UIView。按钮是触发翻转的原因

# linux - 解压缩任何压缩格式的快速免费工具？

> ID：886333
> 
> 赞同：3
> 
> 时间：2009-05-20T05:44:15.477
> 
> 标签：linux, compression

我一直在使用（Ubuntu 的）文件滚轮来压缩一系列文件，例如 .gz、.zip、.rar、.tar.gz 等。这很好，因为它为解压缩文件提供了一个简单、统一的界面特别是文件夹。但是，它很慢，显然是因为它会弹出一个 GUI 窗口来告诉您它正在解压缩文件。

所以我想知道是否有人可以推荐一种可以解压缩多种压缩格式并具有统一界面的工具？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T05:50:01.817

[7-zip](http://www.7-zip.org/)可以解压多种格式，包括 7z、ZIP、GZIP、BZIP2、TAR、ARJ、CAB、CHM、CPIO、DEB、DMG、HFS、ISO、LZH、LZMA、MSI、NSIS、RAR、RPM、 UDF、WIM、XAR 和 Z。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T06:33:15.647

如果作为开发人员使用 7zip，请不要忘记您可以轻松地将其嵌入到您自己的应用程序中。向下滚动到该链接中的“[如何向我的应用程序添加对 7z 档案的支持？](http://www.7-zip.org/faq.html) ”。伟大的东西必须爱 7zip。如果您希望应用程序以统一的界面构建，那么 7zip 就是它。更不用说它是一个[SF 项目](http://sourceforge.net/projects/sevenzip/)，所以如果你愿意，你可以四处看看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T05:56:08.173

File-roller 只是这些文件格式的前端。它位于顶部并解析压缩程序的输出。我怀疑通过更换它你会获得任何明显的性能优势。

您可以直接进入终端，绕过 GUI 并编写，例如：

> unrar x -r mybig.archive.rar
> tar xvfz mybig.archive.tar.gz
> unzip mybig.archive.zip

**更新：运行测试（1.4G rar 存档）**

*   unrar（非免费）：1m25.207s
*   文件滚轮：1m39.311s
*   7z-rar：1m17.084s
*   无解压：失败
*   rar（共享软件）：1m29.109s

一个完整的前端多出 14 秒，我认为这是可以接受的。7zip 最快，没有前端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T08:17:55.740

Windows : Universal Extractor - 是一款旨在提取当今市场上几乎**任何类型的存档的应用程序：RAR、ZIP、7Z、EXE、TAR、NRG、ISO、DLL，应有尽有；**该程序能够以令人难以置信的速度处理所有这些。

这个程序除了提取档案的内容之外没有其他目的。因此，您不能依赖它来创建档案。此外，它可以同时处理的文件数量限制为一个，因此无法批量解压缩。

7zip 可以完成简单的工作，但不像 Universal Extractor

Ubuntu：p7zip-rar 或 p4zip 或存档管理器

# asp.net - 尝试在 ASP.NET ReportViewer 控件中显示/隐藏参数时出现问题

> ID：886338
> 
> 赞同：0
> 
> 时间：2009-05-20T05:46:21.603
> 
> 标签：asp.net, reporting-services, reportviewer, reportingservices-2005

我有一个 SSRS 报告，它在 ASP.NET ReportViewer 控件中显示给用户。报表有很多参数，我们使用的是 ReportViewer 控件提供的参数提示。根据报表的某个参数，我们只需要提示用户输入其余报表参数的一个子集。

我们本可以使用链接报告并隐藏适当的参数，但是第一个参数有很多可能的组合（它是多值的），所以我们宁愿不这样做。相反，我们有一个 ASP.NET ListBox 来控制第一个参数，当它的选择发生变化时，我们使用 ReportViewer.ServerReport.SetParameters() 函数来隐藏/显示参数（它接受一个 ReportParameter 数组和 ReportParameter 构造函数接受一个布尔值来隐藏/显示参数）。

这就是问题所在。在我们的开发环境中一切正常。当我们将报表和 ASP.NET 站点部署到生产环境时，调用这些 SetParameters() 调用时不会显示参数。我们知道代码被调用是因为我们放置了一些调试输出来确保。隐藏参数的代码工作正常。只是应该导致某些参数再次出现的代码不起作用。它不仅不显示参数提示，而且参数的 Visible 属性没有设置为 true（使用 ReportViewer.ServerReport.GetParameters() 检查）。

我们在两种环境中都安装了 SQL Server 2005 SP3，并且报告查看器控件的版本相同 (Microsoft.ReportViewer.WebForms.dll)。有什么想法可能是错的吗？任何解决方法的想法？如果您有任何问题，请发表评论。

**编辑：**经过进一步调查，我们进一步隔离了问题。我做了一个简单的报告，只有 1 个参数，没有任何数据库连接。然后我制作了一个带有 2 个按钮的 aspx 页面和一个连接到该报告的 ReportViewer 控件。1 个按钮隐藏参数，1 个按钮显示参数（使用 SetParameters() 函数，如上所述）。即使在这个简单的场景中，隐藏/显示按钮在开发环境中工作正常，但在生产环境中我们仍然遇到同样的问题（显示按钮不起作用）。我们也在生产环境的网络上的另一台服务器上尝试过这个，我们遇到了同样的问题。因此，在开发环境中一切似乎都运行良好，但在该环境之外的 2 台不同服务器上，我们似乎遇到了同样的问题。

**Edit2：**下面是测试报告页面的代码。该页面有一个 ReportViewer、2 个按钮和一个用于调试输出的标签。当隐藏参数的显示不起作用时，Label 甚至在调用 ShowParameter 后显示 Visible 属性仍然为 false。

```
Public Partial Class TestReportPage
    Inherits System.Web.UI.Page

    Public Sub HideParameter(ByVal parameterName As String)
        Dim parameters As ReportParameterInfoCollection = ReportViewer1.ServerReport.GetParameters()
        ReportViewer1.ServerReport.SetParameters(New ReportParameter() {New ReportParameter(parameterName, GetParameterDefaults(parameterName, parameters), False)})
        parameters = ReportViewer1.ServerReport.GetParameters()
        lblTest.Text &= "Hide param " & parameterName & "; Is Visible: " & parameters(parameterName).Visible & "<br>"
    End Sub
    Public Sub ShowParameter(ByVal parameterName As String)
        Dim parameters As ReportParameterInfoCollection = ReportViewer1.ServerReport.GetParameters()
        ReportViewer1.ServerReport.SetParameters(New ReportParameter() {New ReportParameter(parameterName, GetParameterDefaults(parameterName, parameters), True)})
        parameters = ReportViewer1.ServerReport.GetParameters()
        lblTest.Text &= "Show param " & parameterName & "; Is Visible: " & parameters(parameterName).Visible & "<br>"
    End Sub
    Public Shared Function GetParameterDefaults(ByVal parameterName As String, ByVal parameters As Microsoft.Reporting.WebForms.ReportParameterInfoCollection) As String()
        Dim paramDefaults() As String = {}
        Dim i As Int16 = 0
        For Each paramValue As String In parameters(parameterName).Values
            ReDim Preserve paramDefaults(i)
            paramDefaults(i) = paramValue
            i = i + 1
        Next
        Return paramDefaults
    End Function
    Protected Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        HideParameter("foo")
    End Sub
    Protected Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        ShowParameter("foo")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T05:27:49.460

仅对于遇到此问题的其他人，这就是我们遇到此问题的原因：

这个问题是由于环境的不同造成的。即使我们将 ReportViewer DLL 复制到项目的 bin 文件夹中（并因此复制到项目所在的位置），这个带有参数的问题是旧版本的 ReportViewer 控件中的错误。您需要获取 Microsoft Report Viewer Redistributable 2005 SP1 才能解决此问题。显然我们在开发环境中安装了这个修复程序。出于某种原因，ReportViewer DLL 在双方都是相同的版本。这可能是因为 DLL 实际上是从不同的位置访问的。

# patch - NSIS 补丁（一个文件中的多个补丁）

> ID：886350
> 
> 赞同：3
> 
> 时间：2009-05-20T05:49:49.523
> 
> 标签：patch, nsis

我可以使用 NSIS 的 Vpatch 生成从一个版本到另一个版本的补丁文件。假设我有 mydll.dll 版本 1，并且我有一个补丁可以将其更新到版本 2。然后我又有一个新版本，因此我生成了另一个补丁来将其更新到版本 3。

但令我困扰的是，如果用户取消更新到版本 2 等等会怎样。然后我的最新版本假设是版本 20。用户决定更新到版本 20。有没有办法生成类似于累积性质的补丁？而用户可以从任何旧版本跳转到最新版本（即版本 3 到版本 20）而无需通过其间的版本？

我在 vpatch 的文档中阅读了这一行 ---> “如果您希望能够将版本 1 和 2 升级到版本 3，您可以将 1 > 3 和 2 > 3 补丁放在一个文件中。” 但是我该怎么做呢？

如果我已经有 30 个版本怎么办。这是否意味着我必须创建一个参数是旧文件（版本 1-29）和新文件（版本 20）的补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-28T08:07:41.480

VPatch 本身就是一个开源项目，所以你可以在他们的论坛上提问。那个人写的说你可以问他问题。他的页面有一个链接到电子邮件表单：[http ://www.tibed.net/vpatch/](http://www.tibed.net/vpatch/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-30T00:03:26.560

我会说你有两个选择：

*   每次你有一个新版本时，你都会为新版本的每个以前的版本打一个补丁
*   GENPAT 只是从 New-1 到 New（附加到已经有 New-2 到 New-1 等的补丁文件）并在安装时继续调用 vpatch::vpatchfile 直到返回值为“OK，新版本已经安装”而不仅仅是“OK”（为此，您不需要所有旧版本的存档，但如果用户跳过了许多更新，则应用更新将需要更长的时间）

# ruby-on-rails - Ruby on Rails 中文本区域的最大长度

> ID：886352
> 
> 赞同：14
> 
> 时间：2009-05-20T05:50:25.607
> 
> 标签：ruby-on-rails, textarea

我尝试在表单的[文本区域](http://www.w3schools.com/TAGS/tag_textarea.asp)`:maxlenght`上应用=> 40 。但它没有成功。我们可以对文本区域进行长度限制吗？

文本区域的代码是

```
<%= f.text_area :data,
                :rows => 2,
                :cols => 60 ,
                :maxlength => 140,
                :autocomplete => :off,
                :class => "textareabytes" %> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T06:38:54.250

就像[Rahul](https://stackoverflow.com/questions/886352/max-length-on-a-textarea-in-ruby-on-rails/886363#886363)所说， HTML 中没有`maxlength`for 属性。`textarea`只有`text` `input`那个。

您需要记住的是，RoR 的`text_area`函数（以及所有 RoR 的 HTML 生成器函数）接受您给它们的任何参数。如果他们无法识别该参数，那么他们只会将其转换为 HTML。

```
<%=f.text_area :data, :hellothere => "hello to you too"%> 
```

将输出此 HTML：

```
<textarea name="data" hellothere="hello to you too"></textarea> 
```

我知道这很难记住，但是 Ruby on Rails 并不神奇，它只是为你做了很多事情。诀窍是知道它们是如何工作的，这样您就可以了解它们为什么起作用，以及当它们不起作用时如何修复它们！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T05:54:16.303

会不会是笔误？

您帖子中的“：**maxlenght** => 40”拼写错误。

**编辑：**

我没有仔细阅读你的帖子。我认为 HTML 中的 textarea 没有 maxlength 属性。您将不得不在 JavaScript 中处理它。[在“ Textarea 上的 MaxLength](http://blog.offbeatmammal.com/post/2006/10/26/MaxLength-on-a-Textarea.aspx) ”中有更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-10T04:45:11.533

当然，严格来说不是你所追求的，但是，你总是可以放一个：

```
validates_length_of :data, max: 40 
```

在你的模型上。当然不会停止文本区域的大小:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-16T15:47:26.290

您可以使用 maxlength 属性。它是 HTML5 中标签的新功能。它现在应该可以工作。

# kernel - 需要 AIX 内核编程帮助

> ID：886362
> 
> 赞同：1
> 
> 时间：2009-05-20T05:53:29.270
> 
> 标签：kernel, aix

[AIX](http://en.wikipedia.org/wiki/IBM_AIX)内核中的系统调用表变量名是什么？

我知道它`sys_call_table[]`在 Linux 内核中被调用。

我是内核编程的新手。但是我需要知道系统调用地址存储在内核中的哪些变量中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T15:02:33.037

我已经有一段时间不用关心 AIX 内核了，但它有自己的做事方式。您是否在研究中遇到过[编写 AIX 内核扩展](http://www.ibm.com/developerworks/aix/library/au-kernelext.html)？我相信你的一些问题可能会在那里得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:10:40.950

AIX 使用 svc_table_entry 作为 sys_call_table[] 的条目的对应概念：

```
struct svc_table_entry {
    int         (*svc)();       /*  Pointer to kernel function for */
                                /*  this system call.              */
}; 
```

系统加载器将计算系统调用的数量并通过 xmalloc 在内核堆上动态构建“系统调用表”。至于这张表的名字，我相信是“svc”或“svc64”之类的东西，我不太记得了。

# javascript - 如何确定 DOM 元素的 XPath？

> ID：886370
> 
> 赞同：2
> 
> 时间：2009-05-20T05:57:50.120
> 
> 标签：javascript, xpath

在 JavaScript 中，假设我有一个元素的引用，我如何检索将选择它的 XPath 表达式？

有没有类似的东西`objElement.xpath`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T08:27:10.837

由于 Annibigi 不想发布解决方案，我会这样做：请参阅[此代码段](http://snippets.dzone.com/posts/show/4349)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T07:20:48.177

这与 XPATH 无关，只是为了向您展示如何通过该死的简单 while 循环获得父/子关系。

```
var pathAt = function(node) {
    var stack = [];
    while(node.parentNode !== null) {
        stack.unshift(node.tagName);
        node = node.parentNode;
    }
    return stack.join('/');
}

// Usage : pathAt(document.getElementBy('moo'));
// Outputs : "HTML/BODY/CENTER/TABLE/TBODY/TR/TD/TABLE/TBODY/TR/TD/TABLE/TBODY/TR/TD/TABLE/TBODY/TR/TD" 
```

# php - 使用 REST 在 PHP 中生成对象

> ID：886371
> 
> 赞同：4
> 
> 时间：2009-05-20T05:59:29.727
> 
> 标签：php, xml, rest, soap

我正在尝试决定是否应该为我正在生成的一些面向 Web 的功能使用 REST 服务或 SOAP 服务。这个决定是基于我是否可以轻松地在实现中使用 REST 服务。我更喜欢使用 REST，尽管我不想花几天时间用 PHP 编写对象模型。

这些服务是在 .NET 中开发的，但主要由 PHP 使用。

基本上它归结为一点：易于集成。在 PHP 中使用 SOAP 我可以使用 NuSOAP 库，它将生成对象模型。

但是对于 REST，我似乎无法找到一种轻松生成该模型的方法，如果可能的话，我会使用 REST 服务，因为它们更易于记录和扩展，并且还具有 JSON 功能。

我可以从 XML 文件/模式生成 PHP 中的对象模型，然后我可以使用 REST 服务对其进行序列化吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T04:21:08.713

你甚至可能不必去上课。只需使用 simplexml 获取数据，然后将其作为对象进行遍历。或者如果你有 json，`json_decode($data, TRUE)`也会做同样的事情（括号中没有属性）。

```
$ch = curl_init("http://example.com/some/rest/endpoint");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$data = curl_exec($ch);

$obj = simplexml_load_string($data);
print $obj->some->data->you['need']; 
```

如果`here`您的 XML 类似于

```
<_>
 <some>
  <data>
   <you need="here" />
  </data>
 </some>
</_> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T11:24:09.470

我在让 SOAP 在不同语言（PHP <> JAVA 和 PHP <> .NET）之间工作时遇到了一些麻烦

如果您使用 SOAP，您可能需要查看[WS-I（Web 服务互操作性）](http://www.ws-i.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T12:15:57.773

根据您描述的要求，您应该坚持使用 SOAP 世界。请记住，REST 只是一种架构分布式接口的风格。它没有说明该接口的功能是如何实现的。当然不需要将模式映射到对象。

话虽如此，如果您查看 WCF REST Starter 工具包中的客户端工具，您会发现将 XML 粘贴为 CLR 类型的功能。这将在创建基于 XML 实例文档的可序列化类时做出最好的猜测。

此外，从您所描述的内容来看，ADO.NET 数据服务将为您提供一种将 RESTful 数据服务公开给您的 PHP 站点的快速方法。

……

这里有一个问题要问你吗？如果 .Net 服务将被 PHP 站点使用，那么为什么要将 .Net 服务描述为“面向 Web”。根据您的描述，这些服务听起来更像是您网站的私有实现细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T20:36:13.020

如果我是你我会：

*   调查是否可以仅在 XSD 上使用 NuSOAP 工具。在 .NET 世界中，您可以使用 svcutil（或者在 ASMX 时代，wsdl.exe）来消化 .wsdl 文件以生成代理类。但是，如果您只有 .xsd 文件，则可以使用 xsd.exe 工具，或“售后市场” [XsdObjectGen](http://msdn.microsoft.com/en-us/xml/bb190622.aspx)，它就像一个增压的 xsd.exe。NuSOAP 中是否有类似的工具可以做同样的事情？也许这很明显，你已经做到了。
*   如果这不成功，则生成一个虚拟 WSDL，并将您拥有的 XSD 填充到其中。然后，使用 NuSOAP 工具处理 .wsdl 文件。获取生成的代码，并删除肥皂信封和通信内容，但保留对象序列化内容。不确定这是否可能，NuSOAP 工具生成 PHP（或者是 C？）代码的方式。在 .NET 中，很容易分解不同的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T23:25:34.060

rest 背后的整个想法是不要将它与 SOAP 一样的骇人听闻的“对象模型”一起使用。问题是您尝试使用错误的系统:)

如果您想要对象模型，请使用 SOAP。

如果您想要 Web 友好的 API，请使用 REST。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-23T16:45:24.850

为了便于集成，我会使用 REST API。由于有如此强大的约定，对于以前使用过 REST 的任何人来说，集成应该相对简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-25T03:03:07.070

所以我认为这可能是我正在寻找的东西。但我想知道那里是否有某种自动化系统

[在http://devzone.zend.com/article/1713#Heading11](http://devzone.zend.com/article/1713#Heading11)找到它

> # 扩展类
> 
> 虽然上面的例子都可以用 PHP 4 和 domxml 扩展（只是 API 有点不同），用你自己的代码扩展 DOM 类的能力是 PHP 5 的一个新特性。这使得编写更多内容成为可能可读的代码。这是整个示例，重新编写以使用 DomDocument 类：

```
 class Articles extends DomDocument {
     function __construct() {
         //has to be called!
         parent::__construct();
     }

     function addArticle($title) {
         $item = $this->createElement("item");
         $titlespace = $this->createElement("title");
         $titletext = $this->createTextNode($title);
         $titlespace->appendChild($titletext);
         $item->appendChild($titlespace);
         $this->documentElement->appendChild($item);
     } } $dom = new Articles(); $dom->load("articles.xml");
 $dom->addArticle("XML in PHP5"); print
 $dom->save("newfile.xml"); 
```

# asp.net - ASP.Net“REMOTE_USER”和“LOGON_USER”的区别

> ID：886377
> 
> 赞同：1
> 
> 时间：2009-05-20T06:03:26.773
> 
> 标签：asp.net

一直在谷歌搜索，但找不到任何好的信息。

这两个命令之间的功能有什么区别（除了明显的区别）？

*   HttpContext.Current.Request.ServerVariables("REMOTE_USER")
*   HttpContext.Current.Request.ServerVariables("LOGON_USER")

我只需要确保获得我的 asp.net Web 应用程序的登录用户名。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T02:43:32.297

您可以在此处查看所有这些变量的含义：http: [//msdn.microsoft.com/en-us/library/ms524602.aspx](http://msdn.microsoft.com/en-us/library/ms524602.aspx)

在上面的参考资料中，据说这两个变量通常具有相同的值。

我在一个设置为使用基本 http 身份验证的站点上进行了测试，发现 REMOTE USER 设置为空字符串，而 LOGON_USER 设置为我用来登录该站点的用户名。

注意这两个变量的值和应用运行的windows用户名不同（除非你放在`<identity impersonate="true"/>`web.config中），可以通过调用获取

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name 
```

# html - HTML 输入类型 = Adob e AIR 中的文件不显示文件浏览器

> ID：886380
> 
> 赞同：0
> 
> 时间：2009-05-20T06:05:36.113
> 
> 标签：html, file, upload, input, air

因此，在基于 HTML 的 Adob​​e AIR 应用程序中呈现时，良好的旧 HTML 文件上传器标记仅显示浏览按钮（没有关联的文本输入）。单击浏览按钮后，似乎没有任何反应。我希望有一个弹出窗口，所以我可以选择一个文件。我见过有人使用 Javascript 调用 AIR 运行时来获取文件并上传文件的示例，但我想知道是否有人知道使用 AIR 执行此操作的完整 HTML/Javascript 方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T07:20:47.613

实际上，这确实有效。我以某种方式设法阻止了它的工作，可能是通过在其他地方克隆这部分 DOM 的组合。

# python - 美丽的汤和uTidy

> ID：886381
> 
> 赞同：4
> 
> 时间：2009-05-20T06:05:38.873
> 
> 标签：python, screen-scraping, beautifulsoup, tidy

我想将[utidy](http://utidylib.berlios.de/)的结果传递给 Beautiful Soup，阿拉：

```
page = urllib2.urlopen(url)
options = dict(output_xhtml=1,add_xml_decl=0,indent=1,tidy_mark=0)
cleaned_html = tidy.parseString(page.read(), **options)
soup = BeautifulSoup(cleaned_html) 
```

运行时，出现以下错误：

```
Traceback (most recent call last):
  File "soup.py", line 34, in <module>
    soup = BeautifulSoup(cleaned_html)
  File "/var/lib/python-support/python2.6/BeautifulSoup.py", line 1499, in __init__
    BeautifulStoneSoup.__init__(self, *args, **kwargs)
  File "/var/lib/python-support/python2.6/BeautifulSoup.py", line 1230, in __init__
    self._feed(isHTML=isHTML)
  File "/var/lib/python-support/python2.6/BeautifulSoup.py", line 1245, in _feed
    smartQuotesTo=self.smartQuotesTo, isHTML=isHTML)
  File "/var/lib/python-support/python2.6/BeautifulSoup.py", line 1751, in __init__
    self._detectEncoding(markup, isHTML)
  File "/var/lib/python-support/python2.6/BeautifulSoup.py", line 1899, in _detectEncoding
    xml_encoding_match = re.compile(xml_encoding_re).match(xml_data)
TypeError: expected string or buffer 
```

我收集 utidy 返回一个 XML 文档，而 BeautifulSoup 需要一个字符串。有没有办法投射clean_html？还是我做错了，应该采取不同的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T06:11:05.497

将其传递给 BeautifulSoup 时只需环绕[`str()`](http://docs.python.org/library/functions.html#str)。`cleaned_html`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T15:39:29.873

将传递给 BeautifulSoup 的值转换为字符串。在您的情况下，对最后一行进行以下编辑：

```
soup = BeautifulSoup(str(cleaned_html)) 
```

# php - 在没有 Web 界面的情况下在 Drupal 中切换主题

> ID：886382
> 
> 赞同：4
> 
> 时间：2009-05-20T06:05:48.483
> 
> 标签：php, drupal, content-management-system, themes

我正在学习 php 和创建主题。

不幸的是，当我在编辑一个我目前在 drupal 中使用的主题时，我在主题中犯了一个错误，所以即使我要点击 drupal/index.php，也没有任何显示。我想将我损坏的drupal 主题更改为一个工作主题，但我无法这样做，因为我什至无法查看管理部分。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-20T15:20:50.507

*[如何通过 Drupal.org 上的数据库页面重置主题](http://drupal.org/node/200774)*有直接从 SQL 提示符更改主题的说明。

目前尚不清楚这是否适用于最新版本的 Drupal，因此**请在尝试此操作之前备份您的数据库**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-08-18T22:09:50.537

更改前端主题的最简单方法是将其设置在您的 sites/default/settings.php 中：

```
$conf['theme_default'] = 'minelli'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T16:02:03.387

在对您当前的问题进行排序方面，这里有一个简单的方法应该可以工作......假设您当前的主题称为“custom_theme”。

*   转到您的主题目录（`sites/default/themes`可能是“”）
*   备份您的开发主题（即，将其移至其他位置，如果您使用 Linux 命令行，请执行“ `mv custom_theme custom_theme.bak`”之类的操作）
*   将花环主题复制到此处并将其命名为与您损坏的主题相同的名称（如果使用 LInux 命令行，这样的东西应该可以工作“ `cp -a ../../../themes/garland ./custom_theme`”
*   立即尝试查看您的网站。它现在应该使用花环而不是你破碎的主题。

正如其他人之前所说，强烈建议您为管理员使用与普通用户不同的主题（以防万一）。选择一个安全的管理主题（如花环），然后如果你正在玩主题，你几乎总是可以进入管理界面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-12-24T11:27:43.183

或者，如果您使用 Drupal 6，删除/移动损坏的主题文件夹将使 Drupal 将主题更改为默认主题（Garland）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T08:33:50.017

也许并行使用两个主题会有所帮助。

为“用户前端”设置一个 - 您正在开发的那个`/admin/build/themes`，另一个标准，如花环，您不会更改，作为“管理后端”：`/admin/settings/admin`。

如果您碰巧破坏了您正在开发的主题，您只需转到管理区域（`/admin`），它将切换回花环。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-12T12:12:16.353

您还可以通过包含以下代码在主题中插入新的登录表单：

```
 `<?php 
    if(!user_is_logged_in() ){
        print drupal_render(drupal_get_form('user_login'));
    }else{
        print "You are already logged in!";
   }?>` 
```

`page.tpl.php`在您损坏的主题文件中的任何位置，然后在您的网站上注册`admin credentials`；）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-15T14:11:19.910

另请参阅以下堆栈溢出问题。它与他们有关

*   [更改 Drupal 的主题并保留 Garland 作为管理主题？](https://stackoverflow.com/questions/4464781/changing-drupals-theme-and-keeping-garland-as-the-admin-theme)
*   [直接在数据库中更改 Drupal 6 中的管理主题](https://stackoverflow.com/questions/2467915/changing-the-admin-theme-in-drupal-6-directly-in-database)

现在是解决方案：删除坏主题的文件并清除缓存。清除缓存后，您将能够再次登录。

主要困难是您必须在未登录的情况下清除缓存。

尝试 [清除 Drupal 的缓存中描述的清除缓存的方法之一](http://drupal.org/node/42055)

如果不是，那么试试这个：

如果你有 drush，输入的命令是

```
drush vset theme_default garland 
```

在命令行或通过管理界面（例如 PHPMyAdmin）输入以下查询

```
UPDATE system SET status=1 WHERE name = 'garland'; 
```

然后：

```
UPDATE variable SET value='s:7:"garland"' WHERE name = 'theme_default';
TRUNCATE cache;
TRUNCATE cache_bootstrap;
TRUNCATE cache_block; 
```

请注意，'s:7' 指的是以下字符串的长度。根据需要进行修改。这是数据库手术，很棘手。或者，如果您使用的是每用户主题，而您只是以管理员身份将其搞砸了，请尝试

```
UPDATE users SET theme='garland' WHERE uid = '1'; 
```

小心，因为这些行中的任何一条错误都会把事情搞得一团糟。

干杯!

穆达萨阿里

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T06:09:51.067

据我所知，主题设置以及每个用户都存储在数据库中。摆脱主题的最快方法可能是将其从主题路径中删除。

只需将其移动到您的桌面上，Drupal 就应该能够检测到您请求的主题丢失并指向您的默认主题。

更新：在我的 Drupal 5 安装上试过这个，结果是“干净的”。我建议将工作中的 Drupal 主题复制到您的主题目录中（先复制一份）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-08-11T10:02:23.627

值得一提的是，如果您使用“ [Sections](http://drupal.org/project/sections) ”模块将不同的主题应用到站点的不同部分，Drupal 站点上给出的说明不一定有效——您可能会发现将问题主题目录移出way 是正确查看管理界面的唯一方法。

# tfs - Visual Studio 在取消搁置后失去对挂起更改的跟踪

> ID：886395
> 
> 赞同：1
> 
> 时间：2009-05-20T06:09:54.267
> 
> 标签：tfs, visual-studio-2005

昨天我进行了一组我还不想签入的更改，并在一天结束时决定搁置我的更改。更改包括一堆添加的文件。搁置工作正常，但今天当我解开搁置时，发生了以下情况：

*   VS 告诉我我的工作区中已经存在四个可写文件。这些文件是我添加的
*   我告诉 VS 一切都好，覆盖它们，我们就设置好了
*   VS 完成下架...
*   ...但将“待定更改”选项卡留空。

我想也许出了点问题，然后重新尝试了搁置。此时 VS 继续告诉我我的工作区中有待处理的更改。所以现在我无法签入，无法取消搁置，并且显然这些文件已锁定以我的名字进行编辑（是的，不幸的是，我们使用了 lock-modify-unlock 模式）。什么给了，我该如何解决？

**编辑：** ~~经过进一步检查，源代码管理资源管理器*没有*显示我的未决更改，所以显然只是我的工作区很无聊。~~更正：是的，确实如此，我只是看错了分支，啊！

**编辑 2：** tf.exe*确实*显示了更改。我试图撤消它们，删除仍在工作区中的文件（导致第一个 VS 错误的文件）并且没有错误地搁置。一会儿VS显示了未决的更改，但是当操作完成时，它们都消失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:03:52.537

好吧，我今天只是充满了愚蠢。我正在使用的搁置集不属于我打开的分支。从正确的分支打开项目奇迹般地显示了未决更改选项卡中的更改！

# java - 使用带有 spring 的 acegisecurity 框架所需的示例链接

> ID：886397
> 
> 赞同：2
> 
> 时间：2009-05-20T06:10:39.490
> 
> 标签：java, spring, spring-security

我目前正在使用 Spring、Sutruts2 和 Hibernate 开发我的项目。现在我想将 acegi 安全应用于身份验证和授权目的。

但是，我对 acegi 完全陌生，所以我想使用带有 spring 配置的 acegisecurity 框架。

如果有人有一个简单的带有 spring、struts2 和 hibernate 的 acegi 示例的链接，请提供给我。

提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T06:24:32.197

有一个[教程示例](http://www.acegisecurity.org/suggested.html)可作为 acegi 发行版的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T06:50:29.130

你用的是acegi还是spring security？[如主页](http://www.acegisecurity.org/)所述，Acegi 已被重新打包（并在配置方面进行了简化）成为 Spring Security

> Acegi Security 现在是 Spring Security，Spring Portfolio 的官方安全项目。如果您正在计划一个新项目，我们建议您考虑使用 Spring Security。Acegi Security 1.0.7 将是 1.0.x 系列的最后一个非关键版本。

另请参阅 Ben Alex 的[博客](http://blog.springsource.com/2007/12/06/whats-new-in-spring-security-2/)

[更新：此处](http://static.springsource.org/spring-security/site/petclinic-tutorial.html)提供了春季安全教程

# c# - 页面加载或某些后台进程正在进行时的进度条（动画 GIF 图像）::

> ID：886398
> 
> 赞同：1
> 
> 时间：2009-05-20T06:10:56.540
> 
> 标签：c#, asp.net

每当我的 .aspx 页面（对于我的 appln）被加载或回发或一些后台进程正在进行时，我希望有一个动画 GIF 图像出现或加载::

```
<div id="WaitDialog" style="left: 480px; top: 255px; position: absolute">

<img src="http://developers.sun.com/docs/web-app-guidelines/uispec4_0/progress_graphics/asynch-1F.gif" />
<FONT size=3 class="text3" ><font color="black">Loading, Please Wait.</font></FONT>

</div>

function ProgressBar()
{
  var dialog = document.getElementById("WaitDialog");
  dialog.style.visibility = 'hidden';
  scrollTo(0,0);
} 
```

........这个动画图像应该像浏览器进度条一样加载，如果我在数据库中执行任何验证（数据库操作说），那么图像也应该加载......

1）我没有在我的应用程序中使用 AJAX，所以我不希望 AJAX 也出现在图片中......

2）图像应该显示为页面开始加载时......

**即**背景中正在进行某些事情，应该加载 .gif 图像

我怎样才能根据 tht 编写代码，因为现在我有一个 Javascript 函数 ProgressBar()，我通过在*body*标记中使用 onSubmit="ProgressBar()" 来调用它.....

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T06:20:20.113

使用以下代码，默认情况下您的图像已经可见，当页面完全加载时它会被隐藏。它在表单提交发生时显示。

然后，当回发发生时，图像仍然是可见的，然后它会被 window.onload() 隐藏，它会在浏览器完成加载所有元素时触发。

```
<head>
<script type="text/javascript">
    window.onload = function (){  //hide onload
           var dialog = document.getElementById("WaitDialog");  
           dialog.style.display = 'none';  
           scrollTo(0,0);
    }
    function showProgressBar(){ //show on submit
        var dialog = document.getElementById("WaitDialog");  
        dialog.style.display = 'block'; 
    }
</script>
</head>
<body>
<div id="WaitDialog" style="left: 480px; top: 255px; position: absolute">
  <img src="http://developers.sun.com/docs/web-app-guidelines/uispec4_0/progress_graphics/asynch-1F.gif" />
 <font size=3 class="text3" >
  <font color="black">Loading, Please Wait.</font>
 </font>
</div>
<form onsubmit="showProgressBar()">
  .... all the ASPX controls and stuff
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T06:20:30.830

您将在加载时遇到问题。

对于卸载，将其放入主体 onunload：

```
<body onunload="javascript:ProgressBar()"> 
```

# outlook - VSTO 和 Outlook 2003 上下文菜单

> ID：886408
> 
> 赞同：1
> 
> 时间：2009-05-20T06:16:24.003
> 
> 标签：outlook, vsto, contextmenu

我想使用 VSTO 将 Outlook 2003/2007 与我的应用程序集成。使用 Outlook 2007 没问题 - 我有我需要的所有钩子，但使用 Outlook 2003 我找不到如何将上下文菜单项添加到收件箱中的邮件项。我没有找到任何用于填充上下文菜单的事件处理程序，例如 2007 版本中的事件处理程序。

你知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T06:27:23.113

网站在存档中仍然可见：http://web.archive.org/web/20160405050041/http: [//www.developerzen.com/2005/04/04/adding-a-button-to-outlooks-context-菜单/](http://web.archive.org/web/20160405050041/http://www.developerzen.com/2005/04/04/adding-a-button-to-outlooks-context-menu/)

要将按钮添加到 Outlook 资源管理器上下文菜单，您需要获取“上下文菜单”命令栏。只有当用户在资源管理器中单击鼠标右键时才会创建此命令栏实例，因此为了知道何时创建此类命令栏，您必须侦听资源管理器的 CommandBars 集合的 OnUpdate 事件。在 OnUpdate 事件处理程序中，您可以检查上下文菜单 CommandBar 是否存在：

```
CommandBar bar = ActiveExplorer.CommandBars[“Context Menu”]; 
```

获得上下文菜单 CommandBar 后，您需要更改它的 Protection 属性以允许自定义，添加您的按钮，然后将 Protection 改回来。

# gcc - log10f() 不是标准数学库的一部分吗？

> ID：886410
> 
> 赞同：2
> 
> 时间：2009-05-20T06:17:14.097
> 
> 标签：gcc

我在使用 log10f() 时遇到问题。我正在 Linux (2.6.28-11-generic) 上编译程序并使用 gcc (3.4.6)。

以下源代码在执行时编译并打印 1.000000。

```
#include <stdio.h>
#include <math.h>

int main() {
   printf("%f\n", log10f(10));
   return 0;
} 
```

而下面的没有并引发链接错误：

```
#include <stdio.h>
#include <math.h>

int main() {
   printf("%f\n", log10f(100));
   return 0;
} 
```

错误：未定义对 log10f 的引用

1.  log10f() 是否未定义为标准数学库的一部分（手册页表明它是数学库的一部分）？

2.  为什么第二个示例无法编译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T06:19:27.510

那是因为所需的**`libm.a`**库没有自动链接到可执行文件中。

您必须将**`-lm`**参数添加到 gcc。然后链接器还将链接`libm.a`到您的可执行文件。

# c# - 从 C# 应用程序打开文件时，是否值得在注册表中查找默认应用程序？

> ID：886411
> 
> 赞同：0
> 
> 时间：2009-05-20T06:17:20.960
> 
> 标签：c#, registry, file-type

我正在构建一个应用程序（一个可能不止一次获得stackoverflow社区帮助的辅助项目），它需要打开各种文件类型（即在Word中打开Word文档，而不是在我的应用程序中本机）。

我一直在使用一些代码来查找注册表中文件类型的默认应用程序并将其传递给 Process.Start()。这种方法似乎有两个问题：

1) 在某些情况下引用应用程序名称，而在其他情况下不引用。
2) Process.Start() 要求应用程序路径及其参数分别传递（即 Process.Start("notepad.exe", @"C:\myfile.txt"); 而不是 Process.Start(@"notepad .exe C:\myfile.txt");)。

这意味着当我从注册表中检索路径时，我必须拆分它（在确定是否需要拆分引号或空格之后）以确定哪些部分是应用程序路径以及哪些部分是参数，然后将它们分别传递给 Process。开始（）。

另一种方法似乎是只传递文件名，如 Process.Start(@"C:\myfile.txt")，但我认为这仅在应用程序位于 Path 环境变量中时才有效。

哪种方式更好？在注册表的情况下，如何进行参数解析是否有通用解决方案？

感谢您的任何帮助！

**更新：**
我想简短的回答是“不”。
似乎我真的走的是矫枉过正的路线，只要注册表中有关联的值，只传递文件名就可以工作。即我自己在注册表中找到的任何东西，Process.Start() 已经知道该怎么做。

我确实发现，当我使用“新”文件类型尝试此操作时，我得到一个 Win32Exception 说明“没有应用程序与此操作的指定文件相关联”。Fredrik Mörk 在评论中提到这在 Vista 中不会发生在他身上。处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T06:21:36.430

如果扩展程序注册为使用某个应用程序打开，则不需要在 PATH 中即可运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T06:24:19.750

如果您只指定文件名，则应用程序不需要位于 PATH 中。以下代码对我来说很好：

```
 System.Diagnostics.Process.Start(@"C:\Users\Dan\Desktop\minors.pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T06:29:51.783

您通常不需要在程序中查找已注册的类型，并且程序通常不需要位于 PATH 环境变量中。通常注册表中的命令包含完整路径。这是 .kml 文件 (Google Earth) 的命令的外观（在我的计算机中）：

```
C:\Program Files\Google\Google Earth\googleearth.exe "%1" 
```

鉴于此，您可以安全地`Process.Start`与文档文件名一起使用。如果文件类型未注册，您将为此调用默认的 Windows 行为（询问您要使用哪个程序，等等）。

# sed - sed 中的块替换

> ID：886420
> 
> 赞同：2
> 
> 时间：2009-05-20T06:20:49.037
> 
> 标签：sed

我正在尝试使用 sed 替换文件中的块，但没有成功。

例如我想替换这个：

```
for(int i = 0; i < MAX_LOOPS; ++i) {
    printf("Hello World!");
} 
```

有了这个：

```
int i = 0;
while(i < MAX_LOOPS) {
    printf("Hello World!");
    ++i;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T14:27:21.343

以下将做的伎俩，但以一种非常基本的方式，即它不健壮，也不担心格式化。

s/for(int i = 0; i < MAX_LOOPS; ++i)/int i = 0;\nwhile(i < MAX_LOOPS)/g /printf("Hello World!");/{ a++i; }

这只是一个快速的技巧，但它应该足以让你继续前进。Sed 可能不是完成这项工作的最佳工具，但知道如何在 Sed 中完成它并没有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-12-13T01:29:30.930

这可能对您有用：

```
sed -e '/^for.* {/,/^}/{/for/{i\int i = 0;'\
>   -e ';c\while(i < MAX_LOOPS) {'\
>   -e '}};/^}/i\++i'  file
int i = 0;
while(i < MAX_LOOPS) {
    printf("Hello World!");
++i
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-23T13:29:35.153

```
sed -r '
    /for\s*\(.*;.*;.*\)/!b
    s#.*\((.*);(.*);(.*)\).*#\1\nwhile (\2) {\a\3#
    h
    s/.*\a//
    x
    s/\a.*//
    :X
    N
    /}/!{bX}
    G
    s#(.*)\n(.*)\n(.*)#\1\n   \3\n\2#
' file

int i = 0
while ( i < MAX_LOOPS) {
    printf("Hello World!");
    ++i
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T13:51:08.970

```
sed -e '
   /for(int i = 0; i < MAX_LOOPS; ++i) {/,/}/ {
      /}/ a \
int i = 0;\
while(i < MAX_LOOPS) {\
    printf("Hello World!");\
    ++i;\
}
      d
      }
   '  YourFile 
```

*   删除*for(int i = 0; i < MAX_LOOPS; ++i) {*和*}之间的所有行*
*   到达 *}*时追加新内容（在删除输入行之前。

它使用输入和输出之间的不同行为。将发送信息附加到输出而不将此信息放入当前工作缓冲区（通过输入和修改提供），因此删除无法触及此，但输入（当前行*}*此处）很好触及

# apache-flex - Flash Media Server：无法同时录制 2 个音频/视频流？

> ID：886422
> 
> 赞同：3
> 
> 时间：2009-05-20T06:21:45.603
> 
> 标签：apache-flex, actionscript-3, flash-media-server

**简而言之**

对于一个项目，我需要两个人的音频/视频聊天，并能够记录（部分）会话。我遇到了第二个用户录制的视频混乱的问题，大量（看似）跳帧和/或音频丢失，很可能是由音频流引起的（当不录制音频时，问题不会出现发生）。

**概述**

对于一个项目，我需要一个设置，两个客户可以视频（+音频，显然 :) 互相聊天。此外，“主持人”应该能够在他按下按钮时记录会话，并以相同的方式停止记录。

虽然这种设置与火箭科学相去甚远，但我一直遇到我似乎无法弄清楚的问题。客户端连接良好，彼此的视频正常显示，甚至可以很好地听到彼此的声音。我选择在主机开始录制时重新初始化连接，这也可以正常工作。但是，录制的文件有时会遇到问题。

**可能的原因**

通常主持人的录音很棒，音频和视频都可以正常工作。客户端视频显示有问题，播放时视频会跳动（在许多应用程序中，如 VLC、KMPlayer、Adobe 自己的媒体播放器等）。我试图调试这种情况，它似乎与音频直接相关，但我不确定这是如何发生的。当我在没有录制音频的情况下进行测试时，两个视频都可以正常播放。

**问题**

我将尝试解释客户视频中发生的情况；视频播放正常，音频也正常。但是在看似随机的视频位置，播放突然会跳过视频（和音频）的几秒钟，所以一分钟的视频有时只持续几秒钟（即使播放栏和类似的显示视频实际上持续了一分钟） .

我没有发现它如何跳过的任何逻辑——有些视频每个只显示 4/5 的几秒钟的间隙，其他的则提前 20-30 秒跳跃——所以我假设这是一个随机的事情。

**场景**

我已经测试了多个场景，并且问题似乎足够一致（例如，它每次都会发生，只是在我不录制音频时不会发生）。我使用了本地（开发人员版）FMS 服务器，托管的 influxis 服务，并且我使用了两台本地计算机，一台本地计算机（使用 2 个网络摄像头）和 1 台本地计算机，1 台（真正的）远程计算机。所有设置似乎都与录制的（客户端）视频存在相同的问题。

**结束时**

我不确定您需要什么详细信息，所以请向我询问您可能需要的任何信息，以帮助我找到解决方案。我已经搜索和调试了，就像没有明天一样，并且无法弄清楚是什么原因造成的。

非常*非常*感谢提前！

-戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T09:17:56.577

我在 FMS 方面有相当丰富的经验，特别是在 influxis 方面……我还录制了音频和视频，因为我出于安全原因需要它。但是，在所有情况下，视频和音频都记录在服务器上——而不是与任一客户端在同一台机器上。

我看到的问题包括对音频和视频质量的大量调整——以找到正确的混合以获得最佳结果。这就是我要开始的地方，调整质量，看看你会得到什么。

对于测试环境，我建议使用不同的机器，这样 CPU 就不会成为您的问题——因为实际环境中的客户端会在具有更多 CPU 的不同机器上。

与我联系以提供其他信息等 - 我和几个朋友的系统正在运行，我很乐意提供帮助。

<>

查看我的笔记 - 我们能够与 influxis 谈论滞后的音频 - 他们使用了几个服务器设置，这是我们的每秒帧数和其他质量人员......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-16T21:52:55.290

我不确定我的问题是否与您的相同，但我们找到了解决方案。

闪存片需要设置静音级别 (setSilenceLevel)，这样它就不会插入没有音频信号的音频数据包。这些音频数据包会导致录制问题，从而产生随机跳过和音频丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T15:55:05.363

戴夫，你排除了延迟吗？带有两个摄像头的计算机是否连接到高速网络？我还会检查正在录制的机器上的处理器利用率。

# .net - Access“表单”可以像.NET表单一样对待吗，里面给出的例子

> ID：886427
> 
> 赞同：0
> 
> 时间：2009-05-20T06:25:39.403
> 
> 标签：.net, ms-access

在 .net 项目中，创建两个表单 {Form1, Form2} 并在每个表单上创建一个基本按钮 {Button1}

在 [Form1] 上使用此代码：
Public Class Form1

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim myform As New Form2
    myform.Show()
End Sub 
```

结束类

和 [Form2]：
公共类 Form2

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Close()
End Sub 
```

结束类

所以我想弄清楚的问题是：Microsoft Access 是否允许这种事情？这是一个内部应用程序，我试图弄清楚如何允许用户一次打开多个表单而不必求助于 {copy form_a} {paste form_a as form_b} {detect if form_a is already当他们点击 show_form 按钮时运行，如果是，则启动 form_b，否则，启动 form_a} {repeat ad-nauseum for form_c through form_infinity}

好的，所以如果我不能在 Access 中做到这一点，那很好，[开始咆哮]此时我已经在尝试克服一些非常糟糕的 UI 决策，以及一些糟糕的表格设计。最初的开发人员不知道交集表是什么，也不知道为什么它甚至可以远程派上用场。这里面有大约 8 年的实时数据，所以我已经有相当多的工作要做才能让事情正常运行。[结束咆哮]

感谢您的收听，并感谢更多关于“这是我发现的 google 搜索 url 链接，它确实给了我对你问题的最佳答案”的真正好指针，而不是“RTFM n00b”；-]

此外，这是我第一次使用 stackoverflow，即使我试图从这个美妙的 UI 中尽可能多地了解，我认为我在格式上做错了，所以那里的任何指针也将不胜感激。 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T06:45:57.623

是的，您可以打开同一表格的多个副本。

' 用于多次打开 DailyFieldTicket 表单

公共 frmDFT 作为形式

```
Set frmDFT = New Form_DailyFieldTicket
frmDFT.SetFocus 
```

注意：
- 如果 frmDFT 是在另一个表单中定义的变量并且您关闭另一个表单，则该表单的此实例会突然关闭。
- 如果表单名称中有空格，您需要将它们替换为_。如果在表单名称中使用特殊字符，可能会发生奇怪的事情。我现在不记得细节了。我现在确保这些表格的命名没有任何空格或非字母数字字符，只是为了安全起见。- 我现在不记得 OpenArgs 发生了什么。它可能会继承打开的第一个表单的 openargs，这可能会导致混淆。- 我隐约记得代码中使用的变量存在问题，但那是 3 或 5 年前的事了，所以我记错了细节。

谢谢你的提问。这让我可以在我的网站或博客帖子上创建另一个页面。啊，我看到艾伦布朗已经有一个关于这个主题的不错的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T06:33:08.970

如果您只想创建同一表单的多个实例，那么似乎已经有[很多文章](http://www.google.com/search?q=access+multiple+instances+form)讨论了这个问题。

# php - 这是做我想做的事（在PHP中）的好方法吗？

> ID：886442
> 
> 赞同：2
> 
> 时间：2009-05-20T06:32:16.523
> 
> 标签：php, arrays

我一直在为我的网站开发一个简单的论坛。我正在添加一项功能，该功能将标记自您上次访问以来的未读帖子 + 论坛。

我基本上用每个用户帐户存储了上次访问论坛的日期。当用户返回站点时，将运行查询以获取所有 post_id 和 post_parent_forum 值，然后将其添加到数组中，该数组存储在 SESSION 变量中，键为 post_id（唯一）和值作为论坛ID（这不会是唯一的，因为帖子会出现在少数论坛中）。

在论坛索引中，我对每个论坛使用in_array()，查看forum_id是否在数组中，如果在则标记为“未读”。

在线程列表中，我使用 array_key_exists() 来查看每个线程 ID 的键是否在数组中，如果是，则将其标记为“未读”。

查看帖子时，该项目将从数组中删除，其键等于线程的 ID。

这种方法是否合理，或者如果论坛变得更受欢迎，我会遇到问题吗？我担心在每个论坛列表上运行 20 个 array_key_exists() 检查。它相当快吗？

附带说明....我可以直接使用 SESSION 存储数组，还是必须将其值分配给常规变量，删除一个键，取消设置旧会话 var，然后使用更新的数组重新设置它?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T06:47:08.243

php 数组是哈希表！哈希键查找不是很昂贵，所以不，我认为您不会因此遇到性能问题。

in_array 是另一回事（搜索整个数组），但实际上 - 它仍然不应该是一个问题。提防过早的优化！

> 我可以直接使用 SESSION 存储数组吗

是的。`$_SESSION`是（通常）只是一个数组，当您`session_start()`通过反序列化会话文件内容调用时填充。当脚本结束或被`session_write_close()`调用时，$_SESSION 数组将`serialize()`返回到文件中。没有魔法，真的。

如果你*应该*这样做是另一个问题，毕竟`$_SESSION`是一个*全局变量*（ewwww）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T07:09:21.793

只是你可以去的另一条路线......

在用户表中有一个 last_activity 时间戳字段，并在每次用户加载新页面时更新它。

每个帖子/论坛都有一个 last_updated 时间戳字段。

要查看论坛/帖子是否“未读”，您只需比较时间戳即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T09:14:35.487

我的做法是：不要担心哈希表的性能，而是考虑与数据库相关的问题，因为它们是最昂贵的资源（尤其是在充满文本的类似论坛的项目中）。我从未遇到过与 PHP 性能相关的问题。MySQL 问题总是来得更快。

# internet-explorer - IE bandobject出现在桌面任务栏中

> ID：886446
> 
> 赞同：0
> 
> 时间：2009-05-20T06:33:32.917
> 
> 标签：internet-explorer, toolbar, taskbar, appearance

我创建了一个 IE bandobject（工具栏），它位于 IE 中并且运行良好，但它也出现在工具栏下的 XP 任务栏菜单中。有谁知道如何防止这种行为？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:29:01.707

您应该在*DllMain*中检查尝试加载 dll的进程，如果不是 IE ，则返回*FALSE 。*例如：

```
extern "C" BOOL WINAPI DllMain(HINSTANCE hInstance,
    DWORD dwReason, LPVOID lpReserved)
{
    if( dwReason == DLL_PROCESS_ATTACH )
    {
        TCHAR processExe[ MAX_PATH ];
        GetModuleFileName( NULL, processExe, MAX_PATH );
        _tcslwr_s( processExe, MAX_PATH - 1 );
        if ( _tcsstr( processExe, _T( "explorer.exe" ) ) ) 
            return FALSE;
    }
    /* rest of DllMain */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T20:18:36.590

NoExplorer 注册表项也可以工作吗？

# asp.net - 在命令执行时访问与 RepeaterItem 关联的数据

> ID：886447
> 
> 赞同：1
> 
> 时间：2009-05-20T06:33:45.240
> 
> 标签：asp.net, events, repeater

我想访问与 ItemCommand 在其中触发的 RepeaterItem 关联的数据。场景是，我有多个RepeaterItems，其中Button控件以声明方式设置Command，如下所示：

```
<asp:Repeater ID="Repeater3" 
              runat="server" 
              DataSource='<%# ClientManager.GetClientEmployees(Eval("ClientID")) %>' 
              OnItemCommand="RemoveEmployeeFromClient">
    <ItemTemplate>
        <asp:LinkButton ID="LinkButton1" 
                        runat="server" 
                        Text="(x)" 
                        CommandName="RemoveEmployeeFromClient">
        </asp:LinkButton>
    </ItemTemplate>

    <SeparatorTemplate>,<br /></SeparatorTemplate>
</asp:Repeater> 
```

后面的代码是：

```
Protected Sub RemoveEmployeeFromClient(ByVal source As Object, 
                                       ByVal e As RepeaterCommandEventArgs)
    ' I want to access the data associated with 
    ' the RepeaterItem which the Button was clicked.
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T06:48:10.520

您可以使用 e.Item.DataItem 来获取对象的数据，也可以将其存储在隐藏字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T06:52:11.217

在 Mitchel 所说的基础上，确保检查 RowType 是否为[DataRow](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowtype.aspx)。做不到的时候不要做废话。从 e.Item.DataItem 到您的类型的转换将在页眉或页脚行上失败。

# javascript - MS excel 中的 web ui 功能更复杂？

> ID：886451
> 
> 赞同：1
> 
> 时间：2009-05-20T06:35:35.563
> 
> 标签：javascript, apache-flex, gwt, rich-internet-application

我有摆动应用程序，其中有类似 MS excel 的功能。用户可以在列中输入数据。大多数列都是下拉列表，因此必须从列表中选择。

能否在 Adob​​e Flex 或 GWT 中轻松构建此功能？

第二个复杂性取决于在列中选择的值，另一列应仅显示与第一列的选定值相关的那些项目。

它不是乡村城市数据，但为了简单起见，我举了这个例子。

例如，第一列是国家，第二列是城市。因此，根据选择的国家/地区，第二列将仅显示该国家/地区下的城市。

它不仅仅是页面上的两个下拉列表，它是网格结构中一行的下拉列表。

这在 Adob​​e Flex 或 GWT 或除 Swing 之外的任何其他 Web UI 框架中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T07:14:05.760

例如ExtJS' `EditorGridPanel`？
[http://www.extjs.com/deploy/dev/docs/?class=Ext.grid.EditorGridPanel](http://www.extjs.com/deploy/dev/docs/?class=Ext.grid.EditorGridPanel)

我认为您不会从任何框架中获得这种开箱即用的功能。您必须在现有组件之上开发您的特定功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:08:41.197

使用 GWT、内置的 FlexTable 和 ComboBox 小部件以及下载的 EditableLabel ( [http://gwt-widget.sourceforge.net/docs/apidocs/org/gwtwidgets/client/ui/EditableLabel.html](http://gwt-widget.sourceforge.net/docs/apidocs/org/gwtwidgets/client/ui/EditableLabel.html) ) 小部件，您将能够建立你想要的基础。它的工作/性能如何取决于您如何构建它以及您想要多少行/列。如果您想要大而超光滑的东西，那么 Flex 将是一个非常安全的选择，如果您只想保持小（例如：Google Docs 风格），那么 GWT 就可以了。

所有 GWT 小部件都支持将各种侦听器附加到它们，因此像在 Swing 中那样触发更改单元格的操作不会有问题。

# ruby-on-rails - 在 Rails 应用程序日志中看到 Postgres 错误（plpgsql 已存在/函数 array_accum 已存在）

> ID：886459
> 
> 赞同：0
> 
> 时间：2009-05-20T06:39:33.780
> 
> 标签：ruby-on-rails, postgresql, plpgsql

我经常在我的 Rails 开发日志中看到以下 postgres 错误/警告。它不会导致我的应用程序失败（我希望如此）。知道是什么原因造成的吗？我能做些什么来调试这个？

安装在我的电脑上：- Ruby 1.8.7 (2008-08-11 patchlevel 72) [i486-linux]
- Rails 2.2.2
- PostgreSQL 8.3.7

```
 [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
DEPRECATION WARNING: ActionMailer::Base.register_template_extension has been deprecated.Use ActionView::Base.register_template_extension instead. (called from /home/gsmendoza/workspace/idea/georgemendoza/config/environment.rb:104)
  [4;35;1mSQL (0.2ms)[0m   [0mbegin[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1msavepoint ts[0m
  [4;35;1mSQL (0.0ms)[0m   [0mPGError: ERROR: function "array_accum" already exists with same argument types
: CREATE AGGREGATE array_accum (anyelement)
 (
 sfunc = array_append,
 stype = anyarray,
 initcond = '{}'
 );
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mrollback to savepoint ts[0m
  [4;35;1mSQL (0.1ms)[0m   [0mrelease savepoint ts[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mcommit[0m
  [4;35;1mSQL (0.1ms)[0m   [0mbegin[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1msavepoint ts[0m
  [4;35;1mSQL (0.0ms)[0m   [0mPGError: ERROR: language "plpgsql" already exists
: CREATE LANGUAGE 'plpgsql';[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mrollback to savepoint ts[0m
  [4;35;1mSQL (0.1ms)[0m   [0mrelease savepoint ts[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mcommit[0m
  [4;35;1mSQL (0.1ms)[0m   [0mbegin[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1msavepoint ts[0m
  [4;35;1mSQL (2.6ms)[0m   [0m CREATE OR REPLACE FUNCTION crc32(word text)
 RETURNS bigint AS $$
 DECLARE tmp bigint;
 DECLARE i int;
 DECLARE j int;
 DECLARE word_array bytea;
 BEGIN
 i = 0;
 tmp = 4294967295;
 word_array = decode(replace(word, E'\\', E'\\\\'), 'escape');
 LOOP
 tmp = (tmp # get_byte(word_array, i))::bigint;
 i = i + 1;
 j = 0;
 LOOP
 tmp = ((tmp >> 1) # (3988292384 * (tmp & 1)))::bigint;
 j = j + 1;
 IF j >= 8 THEN
 EXIT;
 END IF;
 END LOOP;
 IF i >= char_length(word) THEN
 EXIT;
 END IF;
 END LOOP;
 return (tmp # 4294967295);
 END
 $$ IMMUTABLE STRICT LANGUAGE plpgsql;
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mrelease savepoint ts[0m
  [4;35;1mSQL (0.8ms)[0m   [0mcommit[0m 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T06:57:42.423

你不需要做任何事情。看起来 Rails 只是试图安装一种已经安装的 plpgsql 语言，并创建一个你的 PostgreSQL 版本已经拥有的函数。

Rails 已经为此做好了准备，只是忽略了这个错误。不是一个好的编程示例，但没什么好担心的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-03T23:16:46.540

我意识到这个错误是因为我的错而出现的

1.  删除测试数据库
2.  创建新的测试数据库
3.  列表项在尝试迁移开发数据库的结构以进行测试时尝试反之亦然

> 长时间工作的副作用；）

# blogs - 在 Blogger 中将标签插入图像 alt 标记

> ID：886460
> 
> 赞同：1
> 
> 时间：2009-05-20T06:40:41.110
> 
> 标签：blogs, blogger, labels

只是想知道是否有人知道如何将博客标签放入图像中的“alt”标签中。我试过`alt="data:post.labels"`根本不可用？

没有人知道如何在博客上提供帮助吗？

PS - 我知道'rel = tag' - 但是对于特定模板，我想让标签在alt标签中显示为文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-10T12:02:31.793

看起来您可能正在使用模板 Blogger 的 XML 版本。如果是这种情况，那么如果您想让 ALT 属性与标签名称一起显示，则需要使用类似下面的内容：

```
expr:alt='data:label.name' 
```

您可以使用相同的原理在链接的 TITLE 属性中显示标签/标记，链接如下：

```
<a expr:href='data:label.url' expr:title='data:label.name'><data:label.name/></a> 
```

# c# - 使用 c# 检索图像

> ID：886465
> 
> 赞同：0
> 
> 时间：2009-05-20T06:44:28.170
> 
> 标签：c#, image, stream

```
byte[] imageData = null;
long byteSize = 0;
byteSize = _reader.GetBytes(_reader.GetOrdinal(sFieldName), 0, null, 0, 0);

imageData = new byte[byteSize];
long bytesread = 0;
int curpos = 0, chunkSize = 500;
while (bytesread < byteSize)
{
    // chunkSize is an arbitrary application defined value 
    bytesread += _reader.GetBytes(_reader.GetOrdinal(sFieldName), curpos, imageData, curpos, chunkSize);
    curpos += chunkSize;
}

byte[] imgData = imageData;

MemoryStream ms = new MemoryStream(imgData);
Image oImage = Image.FromStream((Stream)ms);
return oImage; 
```

行执行时代码会产生问题`"Image oImage = Image.FromStream((Stream)ms);"`.....此行显示`"Parameter is not valid"`消息.......为什么会发生？帮我。我想从数据库中检索图像......我在 C# 窗口 vs05 上工作......有人可以帮助我吗？byte[] 包含值。一切正常，只是在执行此行时出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:05:25.983

在创建内存流之前，一个简单的 if 语句应该可以解决您的问题

```
if (imageData.Length != 0)
{
  MemoryStream ms = new MemoryStream(imageData);
  Image oImage = Image.FromStream((Stream)ms);
  return oImage;
}

return null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T07:07:36.727

我无法真正发现此代码中的任何错误（除了未处理 MemoryStream 之外，并且`Stream`在将其传递给`Image.FromStream`方法时没有必要将其强制转换；但这些不应该导致您的错误）。我会执行以下操作以尝试查找错误：

*   将字节数据写入文件并尝试在图形程序中打开图像（以验证字节数据确实代表有效图像）。我的猜测是这会失败。
*   检查将数据写入数据库的代码（可能执行与上一点相同的技巧；将其写入文件并尝试打开文件）

# algorithm - 什么是特征值和展开式？

> ID：886469
> 
> 赞同：3
> 
> 时间：2009-05-20T06:45:54.347
> 
> 标签：algorithm, math

什么是特征值、向量和展开式，作为算法设计者，我该如何使用它们？

编辑：我想知道你是如何在你的程序中使用它的，以便我得到一个想法。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T07:39:03.027

它们的用途远不止矩阵代数。例子包括：

*   隐马尔可夫模型的渐近状态分布由与状态转移矩阵的单位特征值相关联的左特征向量给出。
*   在网络中找到社区结构的最好和最快的方法之一是构建所谓的模块化矩阵（这基本上就是两个节点之间的连接是如何“令人惊讶”的），然后是与相关的特征向量元素的符号最大特征值告诉你如何将网络划分为两个社区
*   在主成分分析中，您基本上从数据的 n>=k 维协方差矩阵中选择与 k 个最大特征值相关的特征向量，并将数据投影到 k 维子空间。使用最大特征值可确保您保留对数据最重要的维度，因为它们是方差最大的维度。
*   许多图像识别方法（例如面部识别）依赖于从已知数据（一大组人脸）构建特征基并查看使用特征基重建目标图像的难度——如果很容易，那么目标图像就是可能来自特征基描述的集合（即特征脸很容易重建人脸，但不是汽车）。
*   如果你从事科学计算，量子哈密顿的特征向量是那些稳定的状态，如果系统在时间 t1 处于特征态，那么在时间 t2>t1，如果它没有受到干扰，它仍将处于该本征状态。同样，与哈密顿最小特征值相关的特征向量是系统的基态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T07:15:18.490

特征向量和对应的特征值主要用于不同坐标系之间的切换。通过将问题领域从一个坐标系移动到另一个坐标系，这可能会极大地简化问题和计算。

这个新的坐标系以特征向量作为它的基向量，即它们“跨越”这个坐标系。由于它们可以被归一化，因此来自第一个坐标系的变换矩阵是“正交的”，即特征向量的大小为 1 并且彼此垂直。

在变换后的坐标系中，线性运算A（矩阵）是纯对角线。有关详细信息，请参阅[光谱定理](http://en.wikipedia.org/wiki/Spectral_theorem)和[特征分解](http://en.wikipedia.org/wiki/Eigendecomposition_of_a_matrix)。

一个快速的含义是，例如，您可以从一般的二次曲线：

ax^2 + 2bxy + cy^2 + 2dx + 2fy + g = 0

将其重写为

AX^2 + BY^2 + C = 0

其中 X 和 Y 沿特征向量的方向计算。

干杯！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T06:50:15.900

查看[http://mathworld.wolfram.com/Eigenvalue.html](http://mathworld.wolfram.com/Eigenvalue.html)

在算法中使用特征值需要您精通所涉及的数学。我绝对不是谈论数学的人：我吐了。

干杯，jrh。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T06:50:32.483

特征值和向量在矩阵计算中用作求逆矩阵。因此，如果您需要编写数学代码，预先计算它们可以加快一些操作。

简而言之，如果你做矩阵代数、线性代数等，你就需要它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T11:47:23.883

使用物理学家喜欢的符号，如果我们有一个算子`H`，那么`|x>`是`H`当且仅当的一个本征态

```
H|x> = h|x> 
```

其中我们称与下`h`的特征向量相关的特征值。`|x>``H`

（这里系统的状态可以用一个矩阵来表示，使这个数学与已经链接的所有其他表达式同构。）

一旦发现这些东西，我们就会发现它们的用途：

**给定算子下系统的全部特征向量构成系统的正交生成集**。如果没有退化，这个集合*可能是一个基础。*这非常有用，因为它允许系统的任意（非本征）状态的极其紧凑的表达。

# asp.net-mvc - 我可以从 MVC 中的视图访问资源文件吗？

> ID：886473
> 
> 赞同：5
> 
> 时间：2009-05-20T06:46:49.713
> 
> 标签：asp.net-mvc, file, resources

我想用存储在资源文件中的值填充下拉列表。最好的方法是什么？

我可以创建一个 SelectList 并将其推送到模型中，在这种情况下会自动填充下拉列表。但是我可以从 View 访问资源文件吗？如果是，我应该吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T14:21:34.213

所有资源字符串都被编译成一个类，您可以在视图中引用该类。例子：

```
<%= Resources.Strings.MyCustomString %> 
```

我相信以下内容会自动添加到您的 web.config 中，因此您可以删除资源..

```
<namespaces>
    <add namespace="Resources">
</namespaces> 
```

但是，这将不支持本地化。为此，您需要使用[辅助方法](http://blog.eworldui.net/post/2008/05/ASPNET-MVC---Localization.aspx)。

如果您尝试填充列表，则需要创建一个辅助类，该类可以遍历 Strings 类并提取适当的值或将您的选择编码到逗号分隔的列表中，并在将其提供给下拉列表之前对其进行解析/拆分选择列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T06:50:39.283

我还没有尝试过，但是在某处读到资源的工作方式与它们在 Web 表单中的工作方式相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T20:35:09.733

使用以下内容：

```
<%= Resources.Strings.MyCustomString %> 
```

我不明白 Todd 所说的“它不支持本地化”是什么意思，它就是这么做的。

# tfs - 为重复项在 Team Foundation 服务器错误工作项中实施链接

> ID：886478
> 
> 赞同：2
> 
> 时间：2009-05-20T06:48:09.740
> 
> 标签：tfs, tfs-workitem, tfs-process-template

我们刚刚开始使用 Team Foundation Server 2008 / Visual Studio Team System，我们很高兴发现如何根据需要导出和修改工作项。然而，最后一件让我们的设置变得完美的事情被证明有些困难：

我们导出了**Bug*工作项类型***并对其进行了修改，以使其对不同的用户组显示不同。但是，我们确实看到了非开发人员报告错误的潜在问题，这些错误最终被证明是重复的。我们希望强制以已解决的原因关闭工单的用户：重复也会创建一个指向该错误的链接，该链接被视为第一个错误报告。

我查看了 System.RelatedLinkCount，并把规则

```
 <FIELD type="Integer" name="RelatedLinkCount" refname="System.RelatedLinkCount">
    <WHEN field="Microsoft.VSTS.Common.ResolvedReason" value="duplicate">
      <PROHIBITEDVALUES>
        <LISTITEM value="0" />
      </PROHIBITEDVALUES>
    </WHEN>
  </FIELD> 
```

但是，当我尝试将任何内容放入该范围时，进口商告诉我 System.RelatedLinkCount 不接受该规则，无论我放什么，但上面的规则显示了我正在尝试做的事情（即使最可取的规则还会检查我链接到的错误是否也不是重复的，尽管这太过分了：P）

有没有其他人试图在工作项中执行这样的规则？是否有另一种方法来解决相同的问题？我很感谢您对此事的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-28T00:25:44.420

我不确定在将错误解决为重复时直接防止这种情况。即使有您正在研究的想法，也无法验证链接是否指向实际错误。

相反，您可能会尝试编写一份报告，验证任何已解决的错误重复项是否具有指向另一个错误的相关链接。让负责的团队成员每周左右审查一次此报告。有点善意的“责备和羞耻”对于保持项目清洁大有帮助。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-28T03:51:00.023

在当前版本的 TFS 中，完全按照您的意愿去做是非常困难的。（2010 年的高级链接使其更容易。）我相信您至少必须编写自己的链接类型，也许还需要自定义字段控件。这些接口在 MSDN 上并没有很好地记录，尽管在 3rd 方博客上确实存在示例。

IMO 的最佳折衷解决方案是创建一个名为“重复错误 ID”的新整数字段。当错误转换为已解决状态并且解决字段为“重复”时，此字段将变为必需。在所有其他时间，它是只读的（默认为空）。这样，您想要的所有信息都会被捕获。缺点是：

*   “链接”不是双向的；无法从最初的错误中看出后来的错误被欺骗了
*   从骗子导航到原始错误需要 CTRL+G 而不是双击

我认为这些对于满足 90% 其余要求的快速解决方案来说是次要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-08T11:45:44.980

您可以通过创建一个“好友”字符串字段来完成此操作，该字段根据相关链接计数设置其值，然后根据已解决的原因对好友字段执行规则。

# c# - 将一个字符串数组复制到另一个

> ID：886488
> 
> 赞同：22
> 
> 时间：2009-05-20T06:52:38.657
> 
> 标签：c#, arrays, copy

我怎样才能`string[]`从另一个复制一个`string[]`？

假设我有`string[] args`. 如何将其复制到另一个数组`string[] args1`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-20T06:56:41.520

*   要创建一个具有相同内容的全新数组（作为浅拷贝）：调用[`Array.Clone`](http://msdn.microsoft.com/en-us/library/system.array.clone.aspx)并转换结果。
*   要将字符串数组的一部分复制到另一个字符串数组中：调用[`Array.Copy`](http://msdn.microsoft.com/en-us/library/system.array.copy.aspx)或[`Array.CopyTo`](http://msdn.microsoft.com/en-us/library/system.array.copyto.aspx)

例如：

```
using System;

class Test
{
    static void Main(string[] args)
    {
        // Clone the whole array
        string[] args2 = (string[]) args.Clone();

        // Copy the five elements with indexes 2-6
        // from args into args3, stating from
        // index 2 of args3.
        string[] args3 = new string[5];
        Array.Copy(args, 2, args3, 0, 5);

        // Copy whole of args into args4, starting from
        // index 2 (of args4)
        string[] args4 = new string[args.Length+2];
        args.CopyTo(args4, 2);
    }
} 
```

假设我们从`args = { "a", "b", "c", "d", "e", "f", "g", "h" }`结果开始：

```
args2 = { "a", "b", "c", "d", "e", "f", "g", "h" }
args3 = { "c", "d", "e", "f", "g" }
args4 = { null, null, "a", "b", "c", "d", "e", "f", "g", "h" } 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-20T06:55:50.773

为使用 Array.CopyTo() 的目标数组分配空间：

```
targetArray = new string[sourceArray.Length];
sourceArray.CopyTo( targetArray, 0 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T12:25:49.363

上面的答案显示了一个浅克隆；所以我想我使用序列化添加一个深度克隆示例；当然，也可以通过循环遍历原始数组并将每个元素复制到一个全新的数组中来完成深度克隆。

```
 private static T[] ArrayDeepCopy<T>(T[] source)
        {
            using (var ms = new MemoryStream())
            {
                var bf = new BinaryFormatter{Context = new StreamingContext(StreamingContextStates.Clone)};
                bf.Serialize(ms, source);
                ms.Position = 0;
                return (T[]) bf.Deserialize(ms);
            }
        } 
```

测试深度克隆：

```
 private static void ArrayDeepCloneTest()
        {
            //a testing array
            CultureInfo[] secTestArray = { new CultureInfo("en-US", false), new CultureInfo("fr-FR") };

            //deep clone
            var secCloneArray = ArrayDeepCopy(secTestArray);

            //print out the cloned array
            Array.ForEach(secCloneArray, x => Console.WriteLine(x.DateTimeFormat.DateSeparator));

            //modify the original array
            secTestArray[0].DateTimeFormat.DateSeparator = "-";

            Console.WriteLine();
            //show the (deep) cloned array unchanged whereas a shallow clone would reflect the change...
            Array.ForEach(secCloneArray, x => Console.WriteLine(x.DateTimeFormat.DateSeparator));
        } 
```

# c# - 如何使用 C# 从 SQL Server 连接字符串或 IIS 应用程序名称中获取应用程序名称？

> ID：886495
> 
> 赞同：4
> 
> 时间：2009-05-20T06:55:08.263
> 
> 标签：c#, connection-string

如何从 web.config 文件中的 SQL Server 连接字符串获取应用程序名称。

我想用于将来自 Web 应用程序的升级错误消息记录到 Windows 事件日志中。

也许有更好的方法，即使用 IIS/Web 应用程序名称？

谢谢

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T07:00:30.500

连接字符串是什么样的？

[`DbConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnectionstringbuilder.aspx)适合按键解析和检查连接字符串值：

```
 DbConnectionStringBuilder db = new DbConnectionStringBuilder();
        db.ConnectionString = connectionString;
        Console.WriteLine(db["Application Name"]); 
```

否则，您可以从 http[服务器变量](http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables.aspx)中获取各种详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-09T20:11:19.503

[如果您使用 SQL Server， SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)也很有用：

```
SqlConnectionStringBuilder sc = new SqlConnectionStringBuilder(connectionString);
string applicationName = sc.ApplicationName; 
```

# git - 文件未显示在远程存储库中

> ID：886497
> 
> 赞同：3
> 
> 时间：2009-05-20T06:56:22.380
> 
> 标签：git

关于 git 工作方式的基本问题。

我克隆了一个存储库，进行了一些更改，提交并将更改推送回原始存储库。

当我执行 a`git log`时，会显示提交消息，但实际文件不在目录中。

他们应该在那里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:00:11.233

它们应该在 .git （实际的仓库）中。外部文件夹不是 repo，它是一个工作目录。

顺便提一句。手册页说：

描述

使用本地 refs 更新远程 refs，同时发送完成给定 refs 所需的对象。

每次推送到存储库时，您都可以通过在其中设置挂钩来使存储库发生有趣的事情。请参阅 git-receive-pack(1) 的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T07:09:35.083

**您应该阅读一些关于裸**存储库和带有工作副本的存储库之间的区别。裸仓库由 .git 目录（可能称为或可能不称为“.git”）组成，它只是存储库数据库，没有工作副本。当您想要发布您的更改以供其他人拉取时，通常会使用此类存储库。**我认为官方的建议是只**推送到裸存储库。

如果您推送到裸存储库，您的文件将不会出现在任何工作副本中（当然，您自己的存储库中除外）。但是，它们将出现在 repo 中，但仅作为数据库对象。因此，如果您尝试在裸仓库中查找文件，您只会找到一堆管理文件和以 sha1 校验和命名的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-11T19:04:58.990

编辑：实际上看起来改变你[的更新后挂钩](https://git.wiki.kernel.org/index.php/GitFaq#Why_won.27t_I_see_changes_in_the_remote_repo_after_.22git_push.22.3F)是正确的方法。

如果你真的需要这样做，你可以：

```
git reset --hard 
```

或者

```
git stash 
```

这可能不是推荐的方式，但会产生预期的效果。

# sql - SQL 英语查询发生了什么？

> ID：886502
> 
> 赞同：15
> 
> 时间：2009-05-20T06:58:18.133
> 
> 标签：sql, sql-server, sql-server-2000

SQL Server 2000 与English Query 一起部署。那时我还很年轻，刚接触 SQL，所以我跳过了那一章。多年以后，又有了制作一个可以理解简单用户问题的逻辑程序的想法。

有没有其他选择？英文查询现在在哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T07:06:17.947

在 SQL Server 2000 之后，English Query[停止了。](http://www.infoq.com/news/English-Query-Discontinued)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T07:07:24.683

## 自 2005 版以来，英语查询不再是 SQL Server 的一部分

遗憾的是，Microsoft SQL Server 2005 中不提供英文查询。**但是，您可以使用 SQL Server 2005 许可证**来安装 SQL Server 2000 的副本，并对 SQL Server 2005 数据库使用英文查询。与您的 Microsoft 代表讨论 English Query 的许可影响。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-10-18T09:47:37.673

耻辱。在 1990 年代后期，我将 Microsoft English Query 与语音识别结合到了石油测井数据的 SQL Server 数据库中。它使最终用户可以简单地询问诸如“墨西哥湾中一口井的平均深度是多少？”、“显示阿纳达科盆地所有带有侧钻的井”、“显示德克萨斯州所有超过 1000 英尺的井”之类的问题。 1988年登录"

它非常有用，因为许多最终用户不知道如何自己编写这些查询，并且需要大量的编程工作来制作一个足够灵活的工具来处理他们可能需要的所有可能的查询。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-21T03:38:46.350

虽然不是一回事，但全文搜索是最接近 SQL 2005+ 中存在的“英文查询”的东西。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-02-22T23:14:54.970

> 英文查询现在在哪里？

因为用不着所以被放弃了

> 有没有其他选择？

微软建议查看[“语义搜索”](http://msdn.microsoft.com/en-us/library/gg492075%28v=sql.110%29.aspx)功能，尽管这两个功能与我似乎不太相似。

资料来源：[MS 对客户询问是否可以恢复的回复](https://connect.microsoft.com/SQLServer/feedback/details/718280/english-query)。

> **Microsoft 于 2012 年 1 月 13 日下午 1:37 发布**
> 
> SQL Server 中引入的英文查询功能并不是一个流行的功能，我们没有发现很多客户使用它。所以它最终被从产品中删除。我们没有计划投资此类技术，因此我将其解决为“无法解决”。您可以查看 SQL Server 2012 中的语义搜索功能，看看它是否满足您的需求。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-21T15:08:43.403

目前市场上有几种替代方案（商业和开源项目）。

其中之一是[FriendlyData API](https://friendlydata.io/)。它接受纯英文文本或语音消息，并将其转换为 SQL 请求。它以 JSON 或 XML 等简单格式返回请求的数据，或者您可以使用生成的 SQL。

FriendlyData API 可以连接到任何具有关系数据库的应用程序。而且您不需要索引或将数据移动到外部存储。

例如，您可以询问类似

*   '<em>向我展示所有位于纽约市、洛杉矶或湾区、员工人数在 50 到 1000 人之间并在过去六个月内筹集到资金的健康技术公司。'</em>

FriendlyData 会立即将此文本转换为 SQL 查询，并以合适的格式向您显示数据库中的结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-17T07:23:40.777

正如之前的帖子所提到的，微软停止了英文查询。

您可以查看[Kueri.me](http://kueri.me)

该产品提供支持将英语转换为 SQL 的搜索框的技术，并支持 SQLServer 作为后端。

它可以识别各种过滤器、分组和其他分析元素，因此它可以回答诸如

*   显示过去 4 个月内来自法国的所有订单
*   显示上周总金额排名前 5 的订单
*   每个客户的平均订单数是多少

等等。您必须配置系统以识别您的表格、字段和行话。

注意：我在 kueri.me 工作

# c# - 设计防火墙软件

> ID：886506
> 
> 赞同：0
> 
> 时间：2009-05-20T07:00:27.083
> 
> 标签：c#, wpf, design-patterns, .net-3.5

如何设计防火墙软件？

设计应该有一个分层的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T07:38:28.303

你真的不希望这样的问题得到回答，是吗？似乎您还没有努力解决自己的问题。

分析您的要求 - 并相应地进行设计。如果您在这里提出您的想法 - 您将更有可能有人可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:02:56.257

首先分析[这个 rfc](http://www.faqs.org/rfcs/rfc3093.html)。就像最好的 4 月 1 日一样。笑话，这是完全正确的。

# java - 数组/列表问题

> ID：886509
> 
> 赞同：2
> 
> 时间：2009-05-20T07:02:05.893
> 
> 标签：java, arrays, list

我有一个返回包含所有这些属性的文档列表的方法：

```
private String activitySource, activitySystemStatus, regionCode, channel,
               creatorUserId, displayOnAccessIndicator, documentLocationCode,
               extraDetails, keywordList, lastUserId, summaryText,
               textTypeIndicator; 
```

这是方法：

```
public DocumentSummary[] getDocumentList(String crn, String dateFormat) {
    log.debug("Entering getDocuments() method");
    //
    RetrieveDocumentListRequestDTO requestDto =
            new RetrieveDocumentListRequestDTO();
    RetrieveDocumentListResultDTO resultDto =
            odrUtils.retrieveDocumentList(crn, requestDto);
    Document[] dtoDocuments = resultDto.getDocumentArray();
    //
    DocumentSummary[] domainDocuments =
            new DocumentSummary[dtoDocuments.length];
    //
    for (int count = 0; count < domainDocuments.length; count++) {
        domainDocuments[count] =
                new DocumentSummary(dtoDocuments[count], dateFormat);
    }
    return domainDocuments;
} 
```

我怎样才能只返回一个设置了 displayOnAccessIndicator 的列表，而不是返回整个列表？
任何建议或示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:11:54.657

我会交换所有这些代码：

```
 Document[] dtoDocuments = resultDto.getDocumentArray();

    DocumentSummary[] domainDocuments = new DocumentSummary[dtoDocuments.length];

    for (int count = 0; count < domainDocuments.length; count++) {
            domainDocuments[count] = new DocumentSummary(dtoDocuments[count], dateFormat);
    } 
```

为此（有些是个人口味）：

```
List<DocumentSummary> arr = new ArrayList<DocumentSummary>();

for (Document doc : resultDto.getDocumentArray())
    if (doc.displayOnAccessIndicator)
        arr.add(doc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:11:26.703

我假设属性 displayOnAccessIndicator 属于 Document 类。你可以试试这样的东西，可能有一些语法错误，所以请忽略这些。

```
List domainDocuments = new ArrayList();
for (int count = 0; count < dtoDocuments.length; count++) {
     if (dtoDocuments[count].isDisplayOnAccessIndicator()) {
          domainDocuments.add(new DocumentSummary(dtoDocuments[count], dateFormat));
     }
}

return domainDocuments.toArray(new DocumentSummary[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T07:14:02.533

首先，如果可能，您应该真正使用通用列表而不是数组。如果您无法更改方法签名，我仍然会使用通用列表来构建列表的内容，然后使用 Collections.toArray() 将通用列表转换为数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T07:17:14.787

如果我猜对了，您只想将那些元素添加到结果数组中，这些元素具有`document.displayOnAccessIndicator == true`. 由于这可以在 for 循环中轻松检查，我认为您的问题在于处理结果数组。

我强烈推荐使用 java 集合接口（例如`java.util.List`）。在此示例中，我假设至少 Java 版本 5。

```
Document[] dtoDocuments = resultDto.getDocumentArray();
List<DocumentSummary> domainDocuments = new ArrayList<DocumentSummary>();

for (Document doc : dtoDocuments) {
    if (doc.isDisplayOnAccessIndicator()) { // or doc.getDisplayOnAccessIndicator()
        domainDocuments.add(new DocumentSummary(dtoDocuments[count], dateFormat));
    }
}

// change return type accordingly
// or use return domainDocuments.toArray(new DocumentSummary[domainDocuments.size()]);
return domainDocuments; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T20:55:06.790

如果您想使用列表，请参阅我上面的建议之一（我个人最喜欢 Oli 的）。您可以通过使用 ArrayList 构造函数来提高性能，如下所示：

```
... = new ArrayList<DocumentSummary>(
            dtoDocuments.length * DISPLAY_ON_ACCESS_PREDICTION); 
```

其中 DISPLAY_ON_ACCESS_PREDICTION 是：

*   1（int），如果您的结果集不是很大并且您不关心占用一点额外的内存。
*   一个常数，基于您对系统的了解。
*   如果性能真的很重要 - 基于历史（平均值、移动平均线等）或预测（如果你可以提前做出一个）的变量。

此外，如果模型非常大并且您希望节省内存，您可以使用 ArrayList.trimToSize()。

如果您想继续使用数组，这里有两个建议：
建议 1，假设获取指标状态为“慢”（时间/资源消耗）：

```
//...
DocumentSummary[] domainDocuments = new DocumentSummary[dtoDocuments.length];
int skipped = 0;
for (int count = 0; count < domainDocuments.length; ++count) {
    if (doc.isDisplayOnAccessIndicator()) {
        DocumentSummary summary = new DocumentSummary(dtoDocuments[count], dateFormat);
        domainDocuments[count - skipped] = summary;
    } else {
        ++skipped;
    }
}
//trim the array
DocumentSummary[] result = new DocumentSummary[count - skipped];
System.arrayCopy(domainDocuments, 0, result, 0, count - skipped);
return result; 
```

建议 2，假设获取指标状态为“快速”（时间/资源不足）：

```
int actualCount = 0;
for (int count = 0; count < domainDocuments.length; ++count) {
    if (doc.isDisplayOnAccessIndicator()) {
        ++actualCount;
    } else {
        ++skipped;
    }
}
DocumentSummary[] domainDocuments = new DocumentSummary[actualCount];
int skipped = 0;
for (int count = 0; count < domainDocuments.length; ++count) {
    if (doc.isDisplayOnAccessIndicator()) {
        DocumentSummary summary = new DocumentSummary(dtoDocuments[count], dateFormat);
        domainDocuments[count - skipped] = summary;
    } else {
        ++skipped;
    }
}
return domainDocuments; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T21:17:00.273

我不会使用数组，而是使用 ArrayList（或更一般地说是 Collection），然后根据谓词进行过滤。请参阅[Java：过滤集合的最佳方法是什么](https://stackoverflow.com/questions/122105/java-what-is-the-best-way-to-filter-a-collection)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-20T07:13:15.903

这取决于。如果您的意思是从上面放置的函数中，只需替换：

```
domainDocuments[count] = new DocumentSummary(dtoDocuments[count], dateFormat); 
```

和：

```
if (!string.IsNullOrEmpty(dtoDocuments[count].displayOnAccessIndicator))
    domainDocuments[count] = new DocumentSummary(dtoDocuments[count], dateFormat); 
```

# parsing - ANTLR：在也可以使用其他数字文字时解析 2 位数字

> ID：886511
> 
> 赞同：2
> 
> 时间：2009-05-20T07:02:44.100
> 
> 标签：parsing, antlr, antlrworks

我正在为中等大小的语言编写语法，并且正在尝试实现形式的时间文字`hh:mm:ss`。

但是，每当我尝试解析时，例如，`12:34:56`我`timeLiteral`都会在数字上得到不匹配的令牌异常。有谁知道我可能做错了什么？

以下是当前定义的相关规则：

```
timeLiteral
    :   timePair COLON timePair COLON timePair -> ^(TIMELIT timePair*)
    ;

timePair
    :   DecimalDigit DecimalDigit
    ;

NumericLiteral
    : DecimalLiteral
    ;

fragment DecimalLiteral
    : DecimalDigit+ ('.' DecimalDigit+)?
    ;

fragment DecimalDigit
    : ('0'..'9')
    ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T13:37:23.147

The problem is that the lexer is gobbling the DecimalDigit and returning a NumericLiteral.

The parser will never see DecimalDigits because it is a fragment rule.

I would recommend moving timeLiteral into the lexer (capitalize its name). So you'd have something like

```
timeLiteral
    :   TimeLiteral -> ^(TIMELIT TimeLiteral*)
    ;

number
    :   DecimalLiteral
    ;

TimeLiteral
    :   DecimalDigit DecimalDigit COLON 
        DecimalDigit DecimalDigit COLON
        DecimalDigit DecimalDigit
    ;

DecimalLiteral
    :   DecimalDigit+ ('.' DecimalDigit+)?
    ;

fragment DecimalDigit
    :   ('0'..'9')
    ; 
```

Keep in mind that the lexer and parser are completely independent. The lexer determines which tokens will be passed to the parser, *then* the parser gets to group them.

# winapi - 获取完整的用户名一个新的用户名

> ID：886513
> 
> 赞同：1
> 
> 时间：2009-05-20T07:03:26.297
> 
> 标签：winapi

使用[NetUserAdd](http://msdn.microsoft.com/en-us/library/aa370649(VS.85).aspx)时，用户将在本地计算机上创建或作为域帐户创建，具体取决于您使用此功能的服务器的角色。

我想检索完整的用户名（LOCALCOMPUTER\USERNAME 或 DOMAIN\USERNAME）以远程使用它。

有这样做的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:07:44.077

警告：我还没有检查解决方案。您可以调用 NetGetJoinInformation 来了解机器是否属于域，如果代码在 DC 上运行，则可以调用 NetServerGetInfo。在这些测试之后，您可能会获得机器名称 (GetComputerName) 和域名 (NetWkstaGetInfo) 以及您需要的任何内容。

如果您在集群上执行此操作，请小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:23:45.017

我确定我遗漏了一些东西，但是您不能使用[`GetUserNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435%28v=vs.85%29.aspx)并传递所需的内容[`EXTENDEND_NAME_FORMAT`](http://msdn.microsoft.com/en-us/library/ms902883.aspx)吗？我相信`NameSamCompatible`应该是你想要的格式。

你要么回来`MachineName\UserName`要么`DomainName\UserName`

# c# - 如何处理此异常：无效操作异常

> ID：886519
> 
> 赞同：2
> 
> 时间：2009-05-20T07:06:00.693
> 
> 标签：c#

```
Application.Run(form); 
```

实际上，我试图从我的项目中调用它。我得到了这个例外。如何解决？我已经`Application.Run(frmBind);`在我的项目中调用了另一个。

> 在单个线程上启动第二个消息循环不是有效操作。请改用 Form.ShowDialog。

```
 static void Main(string[] args)
 {
    frmBind = new frmMain();

    Application.Run(frmBind);

    //args1 = string.Copy(args);
} 
```

这是我首先调用应用程序的地方

现在又在这里做了：

```
try
{
   // Application.Run( form);
   form.ShowDialog();
} 
```

这里抛出异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T07:07:18.007

它告诉你如何解决它：

```
 form.Show(); 
```

或者如果您希望新表单是模态的：

```
 form.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T07:09:52.447

您只能在一个线程中调用 Application.Run 一次。Application.Run 将（除其他外）为线程设置主消息循环，并且只能有一个这样的循环。这就是你得到异常的原因。

如果您只是想显示一个表单，只需使用`form.Show()`or`form.ShowDialog()`代替。请注意，为已经可见的表单调用 ShowDialog 也会引发 InvalidOperationException（但带有另一条消息）。

# python - 没有 shell 访问权限的 Django

> ID：886526
> 
> 赞同：0
> 
> 时间：2009-05-20T07:07:41.297
> 
> 标签：python, django, shell

是否可以在没有 shell 访问权限的情况下运行 django？我的主机支持以下 5 欧元/月：

*   python（我假设通过 mod_python）
*   mysql

没有 shell 和 cronjob 支持，每月额外花费 10 欧元，所以我试图避免它。

我知道 Google Apps 也可以在没有 shell 访问权限的情况下工作，但我认为这是可能的，因为它们的特殊配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:22:44.730

这是可能的，但不可取。拥有 shell 访问权限可以使用符号链接正确地集中事物。

获得更好的主机将是我的第一个建议。[WebFaction](http://www.webfaction.com/)是最推荐与 Django 一起使用的共享主机。

如果这超出了您的价格范围，那么有很多主机可以为您提供适当的系统帐户（而不是仅 ftp 帐户）并且拥有`mod_python`或`mod_wsgi`（现在首选）。

Google Apps 无需 shell 即可工作，因为他们的系统会查找您必须按照确切规范编写的调度程序脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:17:38.483

有可能的。

通常你会在本地开发你的应用程序（shell 访问很不错）并将你的工作发布到你的服务器。为此，您需要的只是 FTP 访问和某种从开发数据库导入数据库转储的方法（通常托管商为此提供了 phpMyAdmin 的安装）。

> python（我假设通过 mod_python）

根据我的经验，你肯定对这个假设是错误的。许多低成本的供应商声称支持 python，但实际上只提供了一个可以与 CGI 脚本一起使用的过时版本。此设置对于 Django 应用程序的性能将非常低。

# javascript - 在rails中打印表格

> ID：886527
> 
> 赞同：0
> 
> 时间：2009-05-20T07:08:08.427
> 
> 标签：javascript

有没有办法在rails视图中只打印一个表，它有两个div，一个表在另一个div中，打印图像在另一个div中，并打印表溢出内容，因为当我使用window.print（）时；它打印整个页面以及图像并留下表格溢出的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T09:46:35.157

分配给打印媒体类型的单独 CSS 规则

# svn - 尝试设置乌龟 svn - 新手问题

> ID：886535
> 
> 赞同：2
> 
> 时间：2009-05-20T07:11:38.153
> 
> 标签：svn, version-control, tortoisesvn, repository

我正在尝试在我的 Windows 计算机上设置一个 svn 来跟踪版本。我已经下载了tortoise svn，但我很困惑如何安装。我无法为我的问题找到一个好的简单答案，所有手册都相当复杂，所以请不要告诉我 RTFM。

我的问题是我在 C:\svn 设置了一个存储库（在此处使用创建存储库）。然后我右键单击包含我的文件的文件夹并说导入。我选择了存储库“file://C:\svn”，然后它给了我一个错误，说“无法打开存储库”

我该怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-20T08:46:21.987

从头开始：

*   创建目录 C:\svn - 这将是您存储存储库的位置 - 每个项目一个

*   使用资源管理器，在该目录中创建一个子目录，我们将其命名为“myproj”

*   使用资源管理器打开该目录 - 您应该看到一个空的资源管理器窗格

*   右键单击空窗格，然后从 Tortoise 菜单中选择“在此处创建存储库”。这会在“myproj”目录中创建一个新的空存储库。

*   上一层并右键单击“myproj”。从 Totrtoise 菜单中选择“repo browser”。我们将使用它来创建 SVN 喜欢在存储库中找到的子目录

*   右键单击显示的（空）树的根，然后从菜单中选择“创建文件夹”。然后输入“trunk”（不带引号）并单击“确定”。如果您愿意，可以使用相同的过程在与“主干”相同的级别创建名为“标签”和“分支”的目录。

*   选择新创建的“trunk”文件夹并
    记下显示在 repo 管理器顶部的文件 URL - 实际上，将其复制到剪贴板 - 它看起来像“file:///C:/svn /myproj/主干"

*   现在导航到你想要做你的工作的地方——不是包含你已经创建的源文件的目录，右键单击并从 Tortoise 菜单中选择“Checkout”。输入您在上一步中获得的文件 URL，然后单击确定。这将签出一个空项目。

*   现在将您一直在处理的所有现有文件和目录复制到您刚刚通过结帐创建的新“myproj”项目文件夹中（不是存储库中的那个）

*   在资源管理器中，右键单击“myproj”文件夹并从 Tortoise 菜单中选择“commit”。在出现的对话框中，选中底部的“全选”框，然后单击“确定”。所有文件和目录都将被添加到主干中，您可以开始了 - 您对“myproj”目录所做的任何更改都可以通过在资源管理器中选择目录、右键单击并从 Tortoise 菜单中选择“提交”来提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T07:22:04.700

右键单击您想要工作副本的位置，然后选择“SVN checkout...”。选择 file:///C:/svn/trunk 作为您的存储库 URL 并结帐。除非您已将文件添加到您的存储库，否则您将获得一个空的工作副本。您在工作副本中创建的任何文件，都可以使用 Tortoise 上下文菜单添加。

当您想要将完整的文件树复制到存储库中时，通常使用导入。选择文件树的根目录，然后从上下文菜单中使用“TortoiseSVN -> Import”，然后选择 file:///C:/svn/trunk 作为导入的目标。这会将文件树复制到存储库中，因此如果您随后从 file:///C:/svn/trunk 签出，您将在工作副本中获得文件树。

希望能把事情弄清楚一点。

（《[使用 Subversion 进行版本控制](http://svnbook.red-bean.com/)》一书对于新用户和参考都是极好的资源。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T08:21:43.580

从您的项目目录（您要移动到存储库的目录）中，右键单击并选择 TortoiseSVN -> Import...

我认为问题在于您的文件只使用了 2 个斜杠：URL。试试 file:///C:/svn。

此外，您不能从内存中直接导入到已经存在的目录中，因此您可能需要导入到 file:///C:/svn/trunk。

这不会使当前目录成为工作副本。您需要继续将项目签出到另一个目录中，以便可以创建项目和 SVN 之间的连接。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T07:15:37.897

您需要先结帐，然后将文件添加到新的工作副本。

另外，试试这个网址：file:///C:/svn

# netbeans - 为什么我在 Linux 上使用 Netbeans 时有时键盘会被锁定？

> ID：886539
> 
> 赞同：5
> 
> 时间：2009-05-20T07:12:10.977
> 
> 标签：netbeans

我正在使用 Netbeans 开发 Ruby on Rails 应用程序。不幸的是，我有一个问题。

有时键盘停止工作，我无法在文本编辑器中输入代码。特定于 netbeans 的键盘快捷键也停止工作（例如`ctrl`+ `s`）不过，Ubuntu 键盘快捷键仍然有效（`alt`+ `tab`...）

我找到的唯一解决方案是最大化/取消最大化文本编辑器或切换选项卡的窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T07:15:00.657

这可能不是一个正确的 SO 问题，但是您是否尝试过从 Java 的社区版本切换到 Sun 版本（或相反）？

[https://help.ubuntu.com/community/Java](https://help.ubuntu.com/community/Java)

# c# - 素数 c#

> ID：886540
> 
> 赞同：6
> 
> 时间：2009-05-20T07:12:59.540
> 
> 标签：c#, primes

我是 C# 的新手。如果用户在文本框中输入任何整数，我想编写类似的程序，在列表框中显示素数。（这意味着，如果他们写 10，它将显示 0-10 的素数，或 0-20 的 20 等）。

在进行编程之前，我应该首先考虑什么？我知道互联网上有很多例子，但首先我想知道我需要什么？

谢谢你的提示;-）

=== 谢谢大家。所以您建议最好先在控制台应用程序中执行此操作？我使用控制台应用程序做了一个非常简单的“For Loop”示例，但是当我尝试在 Windows 窗体应用程序中执行此操作时，我不确定如何实现它。恐怕如果我继续在控制台中做示例，那么我将很难在 Windows 窗体应用程序中做到这一点。你怎么看？

====== 再次您好，

我需要一些关于我的代码的反馈：

```
 Console.WriteLine("Please enter your integer: ");
        long yourInteger;
        yourInteger = Int32.Parse(Console.ReadLine());

        //displaying the first prime number and comparing it to the given integer
        for (long i = 2; i <= yourInteger; i = i + 1)
        {
            //Controls i if its prime number or not
            if ((i % 2 != 0) || (i == 2))
            {
                Console.Write("{0} ", i);
            }

        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T07:17:02.433

好吧，首先我会考虑如何找到素数，然后将其写入一个控制台应用程序中，该应用程序读取一行，进行数学运算并写入结果（纯粹是因为这是您可以做的最简单的事情，并且涵盖您稍后将需要相同的解析等逻辑）。

当你对生成素数感到满意时，再看看如何做winforms——如何在表单上放置列表框、文本框和按钮；如何处理（按钮的）单击事件，以及如何从文本框中读取并将值写入列表框。您的主要代码应该可以“按原样”使用......

如果您还没有 IDE，请注意[C# Express](http://www.microsoft.com/express/vcsharp/)是免费的，将涵盖上述所有内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T07:16:38.487

你需要知道：

*   如何从 Windows 应用程序读取用户输入
*   如何在一个范围内生成素数
*   如何以您想要的方式编写输出

我强烈建议您将这些任务分开。一旦你让它们中的每一个单独工作，你就可以把它们放在一起。（Marc 建议为质数部分编写一个控制台应用程序 - 如果您还不想进行单元测试，这是一个很好的建议。如果您使用过其他语言的单元测试，那么启动和运行起来相当容易[NUnit](http://nunit.org)。不过，控制台应用程序肯定会更快上手。）

理论上，对于可能长时间运行的任务（例如，用户输入 1000000 作为第一个数字），您通常应该使用后台线程来保持 UI 响应。但是，我会忽略这一点。请注意，当您计算质数时，您的应用程序将看起来“挂起”，但首先要让它工作。`BackgroundWorker`一旦你对简单的版本有信心，如果你喜欢冒险，你可以看看等等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T08:03:19.280

我在我的博客上讨论了使用[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)创建素数：

[http://blogs.msdn.com/mpeck/archive/2009/03/03/Solving-Problems-in-CSharp-and-FSharp-Part-1.aspx](http://blogs.msdn.com/mpeck/archive/2009/03/03/Solving-Problems-in-CSharp-and-FSharp-Part-1.aspx)

代码看起来像这样......

```
public IEnumerable<long> GetPrimes(int max)
{
    var nonprimes = new bool[max + 1];

    for (long i = 2; i <= max; i++)
    {
        if (nonprimes[i] == false)
        {
            for (var j = i * i; j <= max; j += i)
            {
                nonprimes[j] = true;
            }

            yield return i;
        }
    }
} 
```

使用此代码，您可以编写这样的语句...

```
var primes = SieveOfEratosthenes.GetPrimes(2000); 
```

...获得 IEnumerable 最多 2000 个素数。

所有代码都可以在[http://FSharpCSharp.codeplex.com](http://FSharpCSharp.codeplex.com)上的 CodePlex 上找到。

代码是“原样”，因此您应该查看它以确定它是否适合您的需求，是否需要添加错误检查等，因此请将其视为示例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T07:18:53.943

这是一个很棒的“朴素”素数算法，非常适合您的需求： [http ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T07:47:04.073

这是对编辑的回应：

> 多谢你们。所以您建议最好先在控制台应用程序中执行此操作？我使用控制台应用程序做了一个非常简单的“For Loop”示例，但是当我尝试在 Windows 窗体应用程序中执行此操作时，我不确定如何实现它。恐怕如果我继续在控制台中做示例，那么我将很难在 Windows 窗体应用程序中做到这一点。你怎么看？

如果您想将素数显示为 Windows 窗体应用程序，那么您还需要为其设计用户界面。对于这样一个小问题要解决，这有点矫枉过正。您可以做的最简单的设计是[`ListBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.aspx)在您的表格中填写一个（[示例](http://www.eggheadcafe.com/articles/20051130b.asp)）。

如果您真的热衷于学习 Windows 窗体或 WPF，那么这里有[几个资源](http://windowsclient.net/learn/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-17T18:22:36.330

我最近正在编写一个例程来实现 Eratosthenes 的 Sieve 并遇到了这个线程。仅用于档案，这是我的实现：

```
 static List<int> GetPrimeNumbers(int maxNumber)
    {
        // seed the master list with 2
        var list = new List<int>() {2};

        // start at 3 and build the complete list
        var next = 3;
        while (next <= maxNumber)
        { 
            // since even numbers > 2 are never prime, ignore evens 
            if (next % 2 != 0) 
                list.Add(next);

            next++;
        }

        // create copy of list to avoid reindexing
        var primes = new List<int>(list);

        // index starts at 1 since the 2's were never removed
        for (int i = 1; i < list.Count; i++)
        {
            var multiplier = list[i];
            // FindAll Lambda removes duplicate processing
            list.FindAll(a => primes.Contains(a) && a > multiplier)
                .ForEach(a => primes.Remove(a * multiplier));
        }

        return primes;
    } 
```

如果您的素数列表中需要 1，您总是可以用“1, 2”播种它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-22T05:18:00.230

```
using System;
class demo
{
   static void Main()
   {
      int number;
      Console.WriteLine("Enter Number you Should be Checked Number is Prime or not Prime");
      number = Int32.Parse(Console.ReadLine());
      for(int i =2;i {
         if(number % i == 0)
         {
            Console.WriteLine("Entered number is not Prime");
            break;
         }
      }
      if(number % i !=0)
      {
         Console.WriteLine("Entered Number is Prime");
      }

      Console.ReadLine();
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-24T13:43:11.127

你的方法是完全错误的。质数是绝对的，永远不会改变。您最好的选择是预先生成一长串素数。然后想出一个算法来快速查找该数字以确定它是否在列表中。然后在您的情况下（因为您想列出给定范围内的所有内容，只需这样做）。该解决方案将比运行时实现的任何素数查找算法快得多。如果输入的整数大于您的列表，那么您始终可以从该点开始实施算法。

# .net - SqlConnection - 是远程连接还是本地连接？

> ID：886543
> 
> 赞同：0
> 
> 时间：2009-05-20T07:13:28.697
> 
> 标签：.net, ado.net, sqlconnection

如果我有 SqlConnection 对象，我如何确定它是本地连接（localhost 或 127.0.0.1）还是远程连接（本地区域的其他机器）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:11:41.807

使用与语句的连接询问 SQL

```
SELECT @@SERVERNAME 
```

然后验证这是否将客户端计算机的名称与 Environment.MachineName 匹配，以 SQL 实例名称为模

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:18:55.237

您可以从 SqlConnection 对象中获取连接字符串。

```
string s = connection.ConnectionString; 
```

并检查该字符串的数据源或服务器元素。

**编辑：**提供的代码示例。

我认为这个功能应该可以工作（无论如何都没有测试过）。

```
private bool CheckConnectionStringLocalOrRemote(string connectionString) {

        //Local machine
        IPHostEntry entry = Dns.GetHostByAddress("127.0.0.1");

        IPAddress[] addresses = entry.AddressList;
        String[] aliases = entry.Aliases;
        string hostName = entry.HostName;           

        if(connectionString.Contains(hostName))
            return true;

        foreach (IPAddress address in addresses) {
            if (connectionString.Contains(address.ToString())) {
                return true;
            }
        }

        foreach (string alias in aliases) {
            if (connectionString.Contains(alias))
                return true;
        }

        return false;
    } 
```

Ps：确保在 System.Net 命名空间中添加 using 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T07:20:17.417

您可以检查`SqlConnection.ConnectionString`属性以查看它是否具有类似`(local)`或`.`在其`server`部分中的内容，但这不是很可靠，因为`%systemroot%\system32\drivers\etc\hosts' and various other SQL Aliases, whereby`foo-srv` 很可能是本地框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T07:24:38.643

我知道的最简单的方法是直接检查连接字符串以查看它是否包含单词 localhost、127.0.0.1、(localhost)、“。” 或本地机器名称。检查开始，因为它们可能是正在运行的 Sql 的本地命名实例。

您可以使用 System.Environment 库来检索当前机器名称。您还可以查看使用 .Net 中的 ConnectionBuilder 库来检索数据，而无需使用完整的字符串解析。可以在[此处找到有关此的详细信息](http://msdn.microsoft.com/en-us/library/ms254947.aspx)

# c++ - 指针赋值

> ID：886546
> 
> 赞同：0
> 
> 时间：2009-05-20T07:14:23.547
> 
> 标签：c++

是什么意思

```
*(int *)0 = 0; 
```

它确实编译成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:19:54.220

它没有任何意义。那是一个错误。它被解析为这样

```
(((int)0) = 0) 
```

因此，试图分配给一个右值。在这种情况下，右侧是 to 的`0`转换`int`（无论如何它已经是一个 int 了）。转换为非引用的结果始终是右值。你试图分配`0`给它。Rvalues 缺少的是对象身份。以下将起作用：

```
int a;
(int&)a = 0; 
```

当然，您也可以将其写成如下

```
int a = 0; 
```

**更新**：问题格式错误。实际的代码是这样的

```
*(int*)0 = 0 
```

好吧，现在它*是*一个左值。但是一个基本的不变量被破坏了。标准说

> 左值是指对象或函数

您分配给的左值既不是对象也不是函数。该标准甚至明确表示取消引用空指针（`(int*)0`创建这样的空指针）是未定义的行为。程序通常会在尝试写入此类取消引用的“对象”时崩溃。“通常”，因为取消引用的行为已经被 C++ 声明为未定义。

* * *

另外，请注意，以上内容与以下内容不同：

```
int n = 0;
*(int*)n = 0; 
```

虽然上面写的是肯定没有对象所在的东西，但这个写的是把 n 重新解释为指针的结果。到指针值的映射是实现定义的，但大多数编译器只会在这里创建一个指向地址零的指针。某些系统可能会将数据保存在该位置，因此该系统可能有更多存活的机会 - 取决于您的系统。这不一定是未定义的行为，但取决于调用它的编译器和运行时环境。

如果您了解上述空指针的取消引用（只有值 0 的常量表达式转换为指针会产生空指针！）和以下重新解释的零值整数的取消引用之间的区别，我认为您已经学到了一些重要的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T07:25:21.340

它通常会在运行时导致访问冲突。完成以下操作：将第一个 0 强制转换为 an`int *`并产生一个空指针。然后将值 0 写入该地址（空地址） - 这会导致未定义的行为，通常是访问冲突。

实际上是这段代码：

```
int* address = reinterpret_cast<int*>( 0 );
*address = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T07:17:31.137

它是一个编译错误。您不能修改非左值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T07:29:52.593

它在地址零上放置一个零。在某些系统上，您可以这样做。大多数基于 MMU 的系统在运行时不允许这样做。我曾经看到一个嵌入式操作系统在执行时间（NULL）时写入地址 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T07:19:29.433

该操作中没有有效的左值，因此不应编译。

分配的左侧必须是...错误...可分配的

# c# - 为平板电脑和 WindowMobile 开发 winforms 应用程序

> ID：886562
> 
> 赞同：2
> 
> 时间：2009-05-20T07:18:24.600
> 
> 标签：c#, .net, windows-mobile, compact-framework, tablet-pc

我正在为基于 Windows 的平板电脑开发应用程序。这个应用程序几乎是我已经使用 .NET CF 在 Windows Mobile 设备上开发的应用程序的一个端口。我想利用我在软件开发中获得的所有知识从头开始编写应用程序。

我还想以这样一种方式编写这个新的应用程序，如果我愿意，我可以修改我现有的 Windows Mobile 应用程序以使用新的库。理想情况下，我将拥有一组共享的业务逻辑和数据访问库，唯一真正的区别是 UI 层 - 平板电脑版本的 WPF，以及 Windows Mobile 应用程序的标准 CF 接口。

考虑到这一点，我需要确保我创建的所有项目都与 .NET Compact Framework 兼容。有没有简单的方法来确保这一点？我的一个想法是为我创建的每个类库使用一个智能设备项目。

除此之外，我是否可以轻松地从标准 Windows 应用程序中引用为 .NET CF 应用程序编写的这些库？

为平板电脑开发应用程序与开发任何普通的 Windows 窗体应用程序一样吗？是否有不同版本的 .NET Framework 需要考虑，还是平板电脑几乎是标准的 Windows 电脑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:36:38.150

没有用于 Tablet PC 的特殊版本的 .NET Framework。在 Windows Mobile 和 Windows 之间共享代码的问题之前已经被问[过](https://stackoverflow.com/questions/333089/common-c-source-code-for-windows-and-windows-mobile)，并且接受的答案非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:24:25.490

我见过的平板电脑运行标准的 Windows 和“完整的”.NET，但我希望你也能得到一些轻量级的设备。一个有趣的可能性可能是“客户端配置文件”（常规“完整”.NET dll 的一个子集） - 但我自己并没有看到太多使用它。

CF 和常规 .NET 有很多相同之处，但最终还是有区别的；两者都不是另一个的严格子集。我发现通常为 2 个框架编写代码的唯一方法是保持两者都处于活动状态......对于 protobuf-net（有这个问题）我为每个框架保留一个项目文件，以便我可以快速测试build 无处不在（即没有缺少的方法等）。

您可能会发现您需要使用`#if`块来在两个框架上运行稍微不同的代码，特别是如果您出于性能原因想要使用“完整”.NET 功能（CF 版本中不存在这些功能）。一种更容易破解 proj 文件以使用递归文件包含的方法：

```
<Compile Include="**\*.cs" /> 
```

现在您不必继续向两个项目添加新文件 - 它会自动获取（警告：在 IDE 中，您可能需要卸载/重新加载项目）。

# linux - linux内核初始化过程中的问题

> ID：886566
> 
> 赞同：0
> 
> 时间：2009-05-20T07:18:59.667
> 
> 标签：linux, kernel

内核初始化期间崩溃的可能罪魁祸首是什么？

我正在运行一个具有 initramfs 的内核，inittab 是非常基本的 rcS（作为 sysinit）和 getty（respawn）。启动时我没有收到任何错误消息，但是 init 给了我这个消息： S0 respawning too fast: disabled for 5 minutes，其中 S0 实际上是 respawn::getty 行（似乎 getty 不断崩溃），也没有在控制台上可以看到 rcS 生成的消息（我假设 rcS 命令也会崩溃）。

如果我强制内核转到 /bin/sh（而不是 /init），我可以手动调用 rcS 并且不会出现错误，getty 也会发生同样的情况（如果我使用 inittab 中的相同参数调用 getty，它工作正常）。

我想知道 init 产生进程的方式和 /bin/sh 的方式有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-09T21:17:45.090

也许什么都没有设置`/dev/tty1`，`/dev/tty2`等等，但是东西运行正常`/dev/console`（这与 不同`/dev/tty1`）。如果您依赖 initramfs 或根文件系统中的 /dev 目录，请检查它们。

init=/bin/sh 和让 init 产生东西之间的主要区别可能是`/dev/console`vs. `/dev/ttyx`. 我想不出任何其他相关的东西。请记住，我认为 initramfs 确实首先运行。

`/bin/sh`顺便说一句，如果 init(8) 或可以运行，您显然已经过了内核初始化阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T13:03:50.543

库存 /bin/sh 不是静态构建的，getty 也不是。您需要查看所有库都存在的 /bin/sh 和 getty 的共享库依赖项。

您可以使用 ldd 或 'readelf -a' 查看共享库依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T07:37:34.310

某些操作系统的 log init 重新生成到 wtmp，您可能想在那里检查。打开您的系统日志也可能会有所帮助。

当您通过 /bin/sh 启动 getty 时，它会继续运行吗？AFAIK，init respawn 的诀窍是监控它生成的 PID，如果它出现故障，它会启动另一个。

# jquery - 在 DIV 中创建无序列表

> ID：886570
> 
> 赞同：6
> 
> 时间：2009-05-20T07:19:28.950
> 
> 标签：jquery

我有一个 DIV。我想使用 jQuery 在 DIV 中动态生成一个项目符号列表，其中包含我随身携带的项目列表

```
for (cnt = 0; cnt < someList.length; cnt++) {
  someList[cnt].FirstName + ":" + someList[cnt].LastName + "<br/>"
  // what to write here?
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-20T07:56:19.983

让事情尽可能简单。使用您现有的 javascript，您只需要添加以下内容：

```
$('#myDiv').append("<ul id='newList'></ul>");
for (cnt = 0; cnt < someList.length; cnt++) {
  $("#newList").append("<li>"+someList[cnt].FirstName + ":" + someList[cnt].LastName+"</li>");
} 
```

由于您的 HTML 已经有 DIV：

```
<div id="myDiv"></div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T07:31:06.850

脚本：

```
$(function(){
    someList = [ {FirstName: "Joe", LastName: "Smith"} ,
                 {FirstName: "Will", LastName: "Brown"} ]

    $("#target").append("<ul id='list'></ul>");
    $.each(someList, function(n, elem) {
       $("#list").append("<li>" + elem.FirstName + " : " + elem.LastName + "</li>");
    });
}); 
```

和html：

```
<div id="target" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T07:31:48.567

哈基

```
var list = "<ul>"
for (cnt = 0; cnt < someList.length; cnt++) {
    list += "<li>" + someList[cnt].FirstName + ":" + someList[cnt].LastName + "</li>"
}
list += "</ul>"; 
```

甚至不需要正确创建 dom 对象 :)

# asp.net - 正则表达式。匹配 1 - 365 之间的任何数字

> ID：886572
> 
> 赞同：0
> 
> 时间：2009-05-20T07:19:40.790
> 
> 标签：asp.net, regex, validation

我们正在使用 RegEx Validator 来验证来自文本框的输入。

当前 RegEx 表达式检查当前数字是否介于 1 - 999 之间。

我们只是继承了这段代码，我们需要将范围从 999 更改为 365。简而言之，我们需要编写一个正则表达式来检查输入是否在 1 - 365 之间。

当然，我们可以只使用 RangeValidator 或自定义验证器。但我们不想这样做，因为我们不想引入“重大”变化。

谢谢！

编辑：

我们还应该捕捉到以下模式： 001 代表 1 019 代表 19

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T07:22:59.877

使用正则表达式当然不是验证整数范围的最佳方法，但你可以这样：

```
 ^([1-9][0-9]?|[12][0-9][0-9]|3[0-5][0-9]|36[0-5])$

[1-9][0-9]?     matches    1 -  99
[12][0-9][0-9]  matches  100 - 299
3[0-5][0-9]     matches  300 - 359
36[0-5]         matches  360 - 365 
```

编辑：带前导零（也匹配字符串，如 00000000321）：

```
 ^0*([1-9][0-9]?|[12][0-9][0-9]|3[0-5][0-9]|36[0-5])$ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T07:25:37.547

注意差距，嗯闰年。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T07:28:09.883

您真的不想为此使用正则表达式，您应该只使用 /^\d{1,3}$/ 并将数字验证为 1..365

至于正则表达式：

```
SNIP 
```

费迪南德很好:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T08:40:09.177

费迪南德的正则表达式用于捕捉前导零的一点补充：

```
^([0]{0,2}[1-9]|[0]?[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-5])$

[0]{0,2}[1-9]  - catches 001, 01, 1...
[0]?[1-9][0-9] - catches 010, 10... 
```

请注意，它不会捕获 0234 或 0019

# url - nginx proxy_pass 奇怪的 url 转义？（试试看）

> ID：886579
> 
> 赞同：0
> 
> 时间：2009-05-20T07:22:23.107
> 
> 标签：url, proxy, nginx, escaping

原网址是：

[http://www.sitmo.com/gg/latex/latex2png.2.php?z=100&eq=%5Ccos%20%7Bx%7D%2B%5Csin%20%7Bx%7D%3DCV](http://www.sitmo.com/gg/latex/latex2png.2.php?z=100&eq=%5Ccos%20%7Bx%7D%2B%5Csin%20%7Bx%7D%3DCV)

出于某些沙盒闪存安全原因，我需要在我的域上创建一个代理，

```
 location /latex_gen/ {
       proxy_pass    http://www.sitmo.com/gg/latex/latex2png.2.php?z=100&eq=;
   } 
```

现在指向 [http://www.edoboard.com/latex_gen/%5Ccos%20%7Bx%7D%2B%5Csin%20%7Bx%7D%3DCV](http://www.edoboard.com/latex_gen/%5Ccos%20%7Bx%7D%2B%5Csin%20%7Bx%7D%3DCV)

如果您查看这两个 url，它们会生成图像，但在第二种情况下，“+”会丢失。是因为某种逃避吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:29:47.493

是的，edoboard 版本正在以某种方式吃掉这个角色。有几种可能发生的方式。

但更重要的是，与其使用别人的服务器（如果你是的话），你为什么不自己托管[latex2png](http://hausheer.osola.com/latex2png)？！

# linux - 目标代码文件 ctr1.o 在 gcc 编译器中做了什么？

> ID：886585
> 
> 赞同：3
> 
> 时间：2009-05-20T07:23:08.303
> 
> 标签：linux, gcc

obj 文件 ctr1.o 在 gcc 编译器中的作用是什么？为什么每当生成可执行文件时链接器都会链接此 obj 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T07:43:29.243

我认为它包含非常基本的 stuf（crt 代表 C 运行时），例如为您的主要功能设置 argv 和 argc 等......这是一个带有一些解释的[链接](http://dev.gentoo.org/~vapier/crt.txt)

如果您不想要它，例如，因为您正在编写一个小型引导加载程序，没有任何 libc，您可以使用 --no-stdlib 选项来链接您的程序。如果你这样做，你还需要编写自己的链接描述文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:29:42.627

目标文件包含您编译的代码，但它们本身不是可执行的。链接器的工作是获取组成程序的所有目标文件，并将它们连接成一个整体。这涉及解析目标文件（`extern`符号）之间的引用，检查是否存在`main()`入口点（对于 C 程序），等等。

由于每个源文件（.c 或 .cpp）编译成一个单独的目标文件，然后由链接器读取，因此对单个 C 文件的更改仅意味着可以重新编译，生成一个新的目标文件，然后与现有的目标文件链接到一个新的可执行文件中。这使得开发速度更快。

**更新：**正如另一个答案中所述，“crt.o”目标文件包含 C **r** **un** time代码，假设大多数 C 程序都需要该代码。您可以阅读[gcc 链接器选项](http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Link-Options.html#Link-Options)并找到该选项，这将告诉 gcc 您的特定程序不应与标准 C 运行时文件链接。**`--no-stdlib`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T07:29:53.827

我不确定是否理解您的问题，但我猜您指的是 GCC 包中的“crt1.o”。

crt 是 libc 的基础包之一，它提供了访问计算机的基本功能。IIRC 它包含诸如'printf'之类的方法。

这就是为什么它通常甚至包含在最基本的 C 应用程序中。

# sql-server-2005 - SSIS 包的内联文档

> ID：886589
> 
> 赞同：1
> 
> 时间：2009-05-20T07:24:26.210
> 
> 标签：sql-server-2005, documentation, ssis

有没有办法为 SSIS 包创建内联文档（如 javadocs）？或者您使用什么其他技术来记录您为 SQL Server 2005 开发的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T12:03:26.287

它的技术含量很低，但我们将有限的 SSIS 文档放在包内的注释中（右键单击“控制流”、“数据流”或“错误处理程序”选项卡中设计窗格的任何未占用部分并选择`Add Annotation`）。

您可以在这些字段中投入多少有用的东西是有限度的，特别是在复杂的包上，因此详细的文档进入 Word。

如果有更好的方法来添加内联文档，我很想知道它。

# performance - 用于 SHA-1 的 Oracle dbms_crypto.hash 函数的性能

> ID：886593
> 
> 赞同：0
> 
> 时间：2009-05-20T07:24:55.863
> 
> 标签：performance, oracle, hash, sha1

查找至少在 4 到 30 MB 之间的输入大小的统计信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-23T19:07:36.767

据我所知，没有公布的统计数据，但正如甘道夫在对您的问题的评论中建议的那样，您可以自己进行测试。为了获得统计数据，我建议使用 DBMS_PROFILER 包，它将 PLSQL 的行时间降至纳秒。

DBMS_PROFILER 的快速入门，摘自 Steven Feuerstein 的 Oracle PL/SQL Programming（由 O'Reilly 出版）：

安装脚本（用于您的 DBA）：$ORACLE_HOME/rdbms/admin/profload.sql

安装脚本（让您的架构捕获统计信息）：$ORACLE_HOME/rdmbs/admin/proftab.sql

报告脚本（针对您的架构）： $ORACLE_HOME/plsql/demo/profrep.sql $ORACLE_HOME/plsql/demo/profsum.sql

简介：

```
Begin
   DBMS_OUTPUT.PUT_LINE(DBMS_PROFILER.START_PROFILER('tag value for your run'));
   your_procedure_to_test();
   DBMS_OUTPUT.PUT_LINE(DBMS_PROFILER.STOP_PROFILER());
END; 
```

要获取报告，请运行报告脚本中的查询之一。

# sql - Oracle Form Builder：在表单中的选项卡之间切换

> ID：886597
> 
> 赞同：5
> 
> 时间：2009-05-20T07:25:52.227
> 
> 标签：sql, oracle, tabs, builder, oracleforms

我正在 oracle forms builder 中构建一个表单

我有一个标签画布

我需要知道按下按钮时如何切换到下一个选项卡

那么我在下一个选项卡按钮中编程什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T07:43:33.860

通常最好的方法是导航到新标签页上的项目，例如

> ```
> GO_ITEM('BLOCK_NAME.ITEM_NAME'); 
> ```

或者您可以明确地将标签页设为最顶部：

> ```
> SET_CANVAS_PROPERTY('CANVAS_NAME', TOPMOST_TAB_PAGE, 'TAB_PAGE_NAME'); 
> ```

# asp.net - 会话状态服务器冗余

> ID：886598
> 
> 赞同：4
> 
> 时间：2009-05-20T07:26:45.517
> 
> 标签：asp.net, iis, session-state

我们目前有一个在单个服务器上运行的 ASP.NET Web 应用程序。该服务器即将达到 CPU 使用率的危险区域，我们想要部署第二台服务器。

处理会话状态的最佳方法是什么？

我们目前运行 InProc。但这不是 2 台以上服务器的选项，因为有时我们希望从 WLB 轮换中排除单个服务器以进行维护工作。即使我们使用粘性负载平衡，我们也必须等待所有用户退出，然后才能将服务器从 WLB 轮换中排除。

所以我在看这个 MSDN 页面： http: [//msdn.microsoft.com/en-us/library/ms178586 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms178586(VS.80).aspx)

**我想我的主要问题是**：如果我们使用状态服务器模式。我们可以通过在两台服务器上部署状态服务器来确保冗余吗？避免出现单点故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:32:28.440

如果您想要标准选项之一，我会在故障转移群集中使用 SQL Server。顺便说一句，您是否考虑过 memcacheddb？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T07:28:08.730

使用横向扩展状态服务器（更快更好）或 SQL 状态（更慢更简单）。但请注意，如果您将任何不可序列化的对象存储到 Session 状态中，因为迁移后会出现异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T07:29:51.457

Sql State server 将是一个更好的选择：此链接可能对[Sql State Server](http://support.microsoft.com/kb/317604)有所帮助 。我不相信您可以在多台机器上运行状态服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T21:31:46.507

您可能想查看项目速度 ( [http://msdn.microsoft.com/en-us/data/cc655792.aspx](http://msdn.microsoft.com/en-us/data/cc655792.aspx) )。它现在的支持有限，因为它在 CTP3 上，但今年晚些时候它将是 RTM。[我强烈建议您在这里](http://videos.visitmix.com/MIX09/T59F)观看有关它的 MIX09 会议

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-20T22:56:42.853

我建议查看 p2p 会话状态服务器 - 链接在这里： http: [//www.codeproject.com/KB/aspnet/p2pstateserver.aspx](http://www.codeproject.com/KB/aspnet/p2pstateserver.aspx)

为我工作。唯一的缺点是，如果您有一个大型数据集，则在对等点之间进行复制需要很长时间。

# bazaar - 确定在 Bazaar 中创建标签的日期

> ID：886606
> 
> 赞同：1
> 
> 时间：2009-05-20T07:28:26.263
> 
> 标签：bazaar, release-management

使用集市：

是否可以确定修订被标记的日期？这对于确定代码何时发布很有用。请注意，我对标记修订的日期不太感兴趣，而是标记修订的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:18:57.927

标签目前不是 Bazaar 分店的一等公民；它们的添加和删除不会在修订中进行跟踪。所以不，我认为您不能询问任何有关标签历史的信息。一旦它发生变化，该标签的任何先前状态（包括“不存在”）都将不可用。

# c# - 对 ASP.NET 的 Javascript 函数调用

> ID：886608
> 
> 赞同：2
> 
> 时间：2009-05-20T07:29:11.113
> 
> 标签：c#, asp.net, javascript

我的 Javascript 函数调用服务器端回调函数。当我发出警报（）时，这工作正常。如果我评论 alert() 那么浏览器会抛出一个警告..

我的功能是

```
 function callMe(){   
  var input = 'input parameter list'; 
  var val=  <%=gridCtrlUsers.ClientID%>.callbackControl.Callback(input);    
   // If I comment this alert ,it would throw a browser warning.
   alert(val)  // This prints true or false
 } 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-14T01:22:55.277

我同意 José 这看起来不标准。

如果它是一个具有客户端 API 的自定义控件，那么您是否尝试过只输入其标识符而不是使用`<% %>`标签...

您没有提到您使用的第 3 方工具包，但我知道 DevExpress 他们的组件（例如网格）具有允许您设置客户端实例名称的属性。您可以通过执行类似`gridClientName.PerformCallback()`.

如果您使用的是 ComponentArt 的网格，那么我认为您可以使用`ClientObjectId`属性设置网格客户端名称，然后`gridClientName.callback()`在您的 Javascript 中使用。

如果您只想从 Javascript 代码中调用 ASP.NET 函数，则可以使用 ASP.NET Script Manager AJAX 控件。下面我给大家举个例子……

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="True">
</asp:ScriptManager>
<script runat="server">

    [System.Web.Services.WebMethod]
    public static String Msg()
    {
        String userName = "Chalkey";

        return userName;
    }
</script>

<script type="text/javascript">
    PageMethods.Msg(OnSucceed);

    function OnSucceed(result)
    {
        alert(result);
    }
</script> 
```

希望其中一些有用！**:)**

# open-source - Magento 真的是开源的吗？

> ID：886615
> 
> 赞同：14
> 
> 时间：2009-05-20T07:30:04.357
> 
> 标签：open-source, magento

在过去的一两个月里，我一直在尝试围绕 Magento 进行研究，并取得了一定程度的成功。虽然它被宣传为下一个伟大的电子商务系统，但我开始意识到，尽管它有一些非常简洁的功能......实际上，就开发和社区而言，它对于开源项目来说是一个倒退。

看看论坛，到处都是开发人员抱怨缺乏文档，官方 wiki 的玩笑（有些人在官方 wiki 上发布广告），还有关于升级破坏核心功能的报告。Magento 工作人员忽略了大多数这些帖子和有效的错误报告。对核心模块的一些 XML 图表的请求被忽略了一年！

IRC 聊天毫无意义，因为许多新用户都会受到版主的欢迎，版主会告诉他们加入 RTFM！

运行 Magento 的公司似乎存在利益冲突：他们现在销售企业版 Magento，而他们的核心业务是为 Magento 用户提供支持。我觉得为过于复杂的架构提供文档并不符合他们的最大利益（通过八层文件夹来更新单个图像）。

Magento 是开源系统吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-20T08:02:07.897

我非常理解您的沮丧，但开源并不意味着文档或支持。

Magento 团队的态度是“这里有程序，这里有一些论坛和一些文档，从那里你就靠你自己了”。听起来很糟糕，但他们已经免费发布了必须花费数千人小时才能创建的东西。你至少要对此心存感激。

至于文档和支持，您不能真的指望他们继续免费为随机的陌生人工作。此外，那些抱怨缺乏文档的人中很少有人在他们最终了解系统后会回来编写操作指南。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-08-11T18:34:28.733

是的，毫无疑问 Magento 是开源的。是的，这是一个很棒的产品。是的，它很慢。

然而，Magento 似乎缺少经常伴随开源的丰富社区。例如 Drupal、Firefox 和 Ubuntu 拥有疯狂的热情基础。由于缺乏官方文档、wiki 和论坛，Magento 社区应该挺身而出填补空白。似乎离 Varien 越远，社区支持就越好。

我想 Varien 是故意这样做的——因为让人们从他们那里购买支持符合他们的利益。

也许我对他们太苛刻了。该项目还很年轻，社区仍在不断发展。如果有一个由社区独立运营的社区维基中心可能会有所帮助。到目前为止，snippi.net、Stack Overflow、alanstorm.com、westwideweb.com、inchoo.net 和 IRC 频道等网站在推动社区发展方面做得很好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-06-21T14:54:58.660

Magento 在技术上是开源的。然而，它并没有完全接受这个概念，也没有包括开放/透明的开发。所有的发展和方向都是在闭门造车的情况下完成的。

他们在闲暇时发布代码快照，对错误修复的反馈为零。我们一直在尝试就核心开发修复和添加进行某种对话，但到目前为止还没有发生任何事情。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-20T07:35:03.583

由于它的社区版本使用[OSI 批准的许可证](http://opensource.org/licenses/osl-3.0.php)，答案是肯定的，它是开源的。如果您不喜欢他们提供的产品或服务，请随时与志同道合的同行一起分叉！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-01-11T15:33:31.960

我不认为这是我们所期望的开源。他们已经建立了一个系统，您对项目的贡献不一定是为了所有人的利益而纳入的。通过保留功能，他们使您作为开发人员为他们工作。对于非开发人员来说，这是一个诱饵和开关。如果您开始使用它并发展到需要其中一项企业功能，那么您将无法从社区获得它，因为该功能已被有效保留。因此，只需 10 年就进入企业。拥有成本超过 89,000 美元。我实际上喜欢在开源项目上建立专业支持组织的想法。但事实并非如此。我正在向出口跑去。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-20T07:33:18.110

是的，它是，但是它非常慢。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-20T07:38:47.600

你能下载它，编辑源代码以满足你的需要，然后再分发用于商业用途吗？

所以，它是开源的。代码，至少。

文档和支持呢？这是另一种方式...

伙计，我很抱歉，但你不能认为如果有人创建了一个开源项目，那么它就会被它所束缚，并且必须每天都得到支持......也许他应该或者更好，他会很棒如果这样做。

可能你是对的；存在利益冲突，也许他们使用开源版本来增加知名度，然后出售企业版——我不知道；我过去只是快速浏览了一下 Magento。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-20T07:32:42.837

是的，社区版在 Open Software License v3.0 下是开源的。

然而，企业版不是开源的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-04-28T02:23:53.367

Twitter 上的某个人好心地将这个链接转发给了我，所以我要快速说明一下，我认为你不会来到我们的论坛并看到这种消极情绪。我没有看到它，而且我几乎每天都在那里；）

关于贡献——我想有人在询问 Magento 的贡献者，是的，你也可以成为贡献者。是的，您也可以通过多种方式为 EE 做出贡献。

[http://www.magentocommerce.com/blog/comments/be-part-of-the-solution-become-a-magento-contributor/](http://www.magentocommerce.com/blog/comments/be-part-of-the-solution-become-a-magento-contributor/)

如果您有任何问题，请随时与我联系 → rhonda at magento :>

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-07-08T10:02:09.107

是的，Magento 是一个开放资源。确实它很慢，但它比其他开放资源具有强大的功能和特性。

理解起来很复杂，但它严格遵循 MVC 架构。

# python - 如何在 django 中执行查询以选择我所属的所有项目？

> ID：886624
> 
> 赞同：0
> 
> 时间：2009-05-20T07:33:36.753
> 
> 标签：python, django, pinax

我的 django 应用程序中有团队的概念。

```
class Team(models.Model):
    name = models.CharField(max_length=200)
    #snip
    team_members = models.ManyToManyField(User) 
```

我想获取当前登录用户所属的所有团队。类似的东西

```
Team.objects.all().filter(request.user.id__in = team_members.all()) 
```

这显然是行不通的。有没有人有一些关于如何在不直接进入 sql 的情况下进行此类查询的建议？我确实查看了“in”查询[的 django 文档](http://docs.djangoproject.com/en/1.0/ref/models/querysets/)，但在那里找不到我的用例。

非常感谢！缺口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T08:48:11.187

你不需要`in`在这里，Django 在多对多查找中自动处理。

此外，您需要了解数据库字段必须始终位于查找的*左侧*，因为它们实际上是作为函数的参数处理的。

你真正想要的很简单：

```
Team.objects.filter(team_members=request.user) 
```

或者

```
request.user.team_set.all() 
```

# eclipse - 修改现有 Eclipse 插件并正确安装

> ID：886627
> 
> 赞同：0
> 
> 时间：2009-05-20T07:34:49.323
> 
> 标签：eclipse, eclipse-plugin

我下载了基于 EMF 的 UML2 插件的源代码，并更改了 org.eclipse.uml2.uml.edit 项目中的一个类，以在返回字符串表示时删除特殊字符。现在，当我导出项目并将 jar 文件放在 dropins 目录中或替换插件目录中我当前的 uml2 插件 jar 文件时，UML 文件不再被识别，简而言之，我修改后的插件没有正确安装（不会抛出错误我可以看到在 Plugins->Target Platform) 下拾取的文件。

但是，当我将插件作为 Eclipse 应用程序（从工作区）运行时，我可以看到我所做的更改反映在新的 Eclipse 实例中。

我该怎么做才能确保插件正确安装？

是否有文档说明如何在修改后构建 uml2 插件（或任何类似的插件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T09:10:57.337

选择项目并打开上下文菜单。`PDE`菜单底部附近有一个条目。在那里，您可以找到一个条目来构建用于部署的插件。这为您提供了带有固定文件的 features 和 plugins 目录。将两者复制到您的 Eclipse 安装中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T11:13:39.397

除非 UML2 插件需要某种神奇的构建脚本，否则导出您更改的插件并覆盖 Eclipse 安装中的原始插件应该是最简单的解决方案。想到的一个潜在问题是插件版本号冲突：确保在 Eclipse 安装中没有两个相同版本的修改插件。

当调试在运行时显然无法正常工作的插件时，我总是查看*Help > About Eclipse Platform > Configuration Details*。这列出了 Equinox 在启动期间找到的所有插件及其状态（请参阅 org.osgi.framework.Bundle 接口的 Javadoc 以获取解释）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T05:01:59.193

我遇到了与您在此处描述的完全相同的问题。我对您的问题没有任何答案，但我正在分享对我有用的方法。

我在我的系统上创建了插件的本地更新站点。[为您的插件创建更新站点](http://www.vogella.com/articles/EclipsePlugIn/article.html#p2deployplugin)文章非常非常好地解释了完成此操作所需的步骤。

# python - 如何在for循环python中使用计数器

> ID：886629
> 
> 赞同：1
> 
> 时间：2009-05-20T07:36:04.970
> 
> 标签：python, iterator

```
my_date_list = ['01', '02', '03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
str_date_list=[]
for item in my_date_list:
    str_date_list.append(item+'-'+'05' + '-' +'09')

counter= 0
i = iter(range(31))
for item in i:
    daily_user_status_list=[]
    print counter
    val_time1 = str_date_list[counter]
    val_time2 = str_date_list[counter + 1]
    counter =counter + 1 
```

我在做`counter = counter + 1`. 基本上，我`str_date_list`每次都需要不同的时间。但`counter = counter +1`给我代码错误。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T08:44:37.373

计数器与您正在迭代的序列步调不一致。但更重要的是，柜台是完全没有必要的。

你有几个可以自动化的手动迭代，它们导致你绊倒。特别是，您几乎不需要在迭代时手动跟踪计数器；Python 的序列类型知道如何自我迭代。

这是我对上述代码意图的重写（在交互式解释器中显示它的工作）：

```
>>> dates = ["%(day)02d-05-09" % vars() for day in range(1, 31+1)]
>>> date_ranges = zip(dates[:-1], dates[1:])
>>> for (date_begin, date_end) in date_ranges:
...     print (date_begin, date_end)
... 
('01-05-09', '02-05-09')
('02-05-09', '03-05-09')
('03-05-09', '04-05-09')
…
('28-05-09', '29-05-09')
('29-05-09', '30-05-09')
('30-05-09', '31-05-09') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T08:45:17.683

只是为了好玩，这是编写此代码的超紧凑 Pythonic 方式：

```
from itertools import izip, islice
str_date_list = ['%02d-05-09' % i for i in xrange(1, 32)]
for val_time1, val_time2 in izip(islice(str_date_list, 0, None), islice(str_date_list, 1, None)):
    daily_user_status_list = [ <whatever goes here> ]
    # more code... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T07:40:51.947

您看到的错误是因为您的索引超出了`str_date_list`列表的范围，而不是因为您正在增加变量。

`counter`将循环打印的最大值( `30`) 与列表的长度 ( `len(str_date_list)`) 进行比较。由于索引开始于`0`，最大的索引变成一个长度列表`n is n - 1`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T07:52:14.187

您不需要复制循环迭代变量和计数器：

```
my_date_list = ['01', '02', '03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
str_date_list=[]
for item in my_date_list:
    str_date_list.append(item+'-'+'05' + '-' +'09')

for i in xrange(len(my_date_list)-1):
    daily_user_status_list=[]
    print i
    val_time1 = str_date_list[i]
    val_time2 = str_date_list[i + 1] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T07:58:42.613

1.  你不需要创建一个迭代器来通过 0-31 你可以使用 enumerate 例如

    for i, sdate in enumerate(str_date_list): print i, sdate

2.  如果您使用的是 iter 是不是 item 和 counter 相同？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T07:40:27.220

计数器 += 1

但这不是问题。有什么错误？可能是缩进错误？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T08:20:00.620

写得更好：

```
str_date_list=[]
for n in xrange(1,32):
    str_date_list.append(str(n).zfill(2)+'-'+'05' + '-' +'09')

for i in xrange(len(str_date_list)):
    daily_user_status_list=[]
    print i
    val_time1 = str_date_list[i]
    val_time2 = str_date_list[i + 1] 
```

*   xrange 为我们提供了一个在给定边界的自然数上的（相当执行的）迭代器。
*   我们使用 zfill 来确保有一个前导零，而不是显式地写出它们
*   避免迭代超出数组范围很重要！

# reporting-services - 在 ssrs 中生成 Report 对象

> ID：886631
> 
> 赞同：-1
> 
> 时间：2009-05-20T07:36:58.103
> 
> 标签：reporting-services, object

我需要`rdl`在运行时生成。所以我将`http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition`xsd 转换为类，我需要为 Report 类创建对象，它有很多类。我在使用对象生成报告时苦苦挣扎

我不知道如何赋值

```
 [System.Xml.Serialization.XmlAnyElementAttribute()]
   [System.Xml.Serialization.XmlElementAttribute("Author", typeof(string))]
   [System.Xml.Serialization.XmlElementAttribute("AutoRefresh", typeof(uint))]
   [System.Xml.Serialization.XmlElementAttribute("Body", typeof(BodyType))]

 private ItemsChoiceType37[] itemsElementNameField; 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-05T12:51:34.713

有点像

```
List<object> items = new List<object>();
List<ItemsChoiceType37> itemChoices = new List<ItemsChoiceType37>();

//Author
items.Add("Author name");
itemChoices.Add(ItemsChoiceType37.Author);

items.Add(description);
itemChoices.Add(ItemsChoiceType37.Description);

//Width
items.Add("11in");
itemChoices.Add(ItemsChoiceType37.Width);

.
.
.

Report report = new Report();
report.Items = items.ToArray();
report.ItemsElementName = itemChoices.ToArray(); 
```

我希望它可以帮助你

# python - 在 Python 中获取向量的 1 范数

> ID：886633
> 
> 赞同：25
> 
> 时间：2009-05-20T07:37:49.833
> 
> 标签：python, vector, norm

如何`||a - b||_1 = sum(|a_i - b_i|)`在 Python 中计算两个向量之差的 1 范数？

```
a = [1,2,3,4]  
b = [2,3,4,5]

||a - b||_1 = 4 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-20T08:15:52.533

Python 具有强大的内置类型，但**Python 列表不是数学向量或矩阵**。您*可以*使用列表来执行此操作，但对于任何比琐碎的操作而言，它可能会很麻烦。

如果您发现自己经常需要向量或矩阵算术，那么**该领域的标准是[NumPy](http://scipy.org/NumPy/)**，它可能已经为您的操作系统打包，就像 Python 一样。

我与其他人一样对您正在尝试做什么感到困惑，但也许**numpy.linalg.norm**函数会有所帮助：

```
>>> import numpy
>>> a = numpy.array([1, 2, 3, 4])
>>> b = numpy.array([2, 3, 4, 5])
>>> numpy.linalg.norm((a - b), ord=1)
4 
```

为了展示它是如何在幕后工作的：

```
>>> a
array([1, 2, 3, 4])
>>> b
array([2, 3, 4, 5])
>>> (a - b)
array([-1, -1, -1, -1])
>>> numpy.linalg.norm((a - b))
2.0
>>> numpy.linalg.norm((a - b), ord=1)
4 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-20T08:20:33.303

在 NumPy 中，对于两个向量`a`和`b`，这只是

```
numpy.linalg.norm(a - b, ord=1) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-20T07:52:53.530

您似乎在要求两个数组的成对组件之间的差异总和：

```
>>> A=[1,2,3,4]
>>> B=[2,3,4,5]
>>> sum(abs(a - b) for a, b in zip(A, B))
4 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-20T07:54:17.473

目前尚不清楚这里到底需要什么，但这是我的猜测

```
a=[1,2,3,4]
b=[2,3,4,5]
def a_b(a,b):
    return sum(map(lambda a:abs(a[0]-a[1]), zip(a,b)))

print a_b(a,b) 
```

# bug-tracking - 什么是重大缺陷以及如何克服它们？

> ID：886649
> 
> 赞同：1
> 
> 时间：2009-05-20T07:42:19.933
> 
> 标签：bug-tracking

据说[[Software Defect ReductionTop 10 List]](http://www.cs.umd.edu/projects/SoftEng/ESEG/papers/82.78.pdf)，“大约 40% 到 50% 的用户程序包含重大缺陷”。

有哪些重大缺陷以及如何克服它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T07:47:32.107

我会将“非平凡”解释为“对用户有真正的影响”。

例如，如果菜单项中有错字，那将是一个微不足道的缺陷。如果您的电子表格应用程序在尝试保存任何编号为“999”的工作表时崩溃，那将是非常重要的。

如果这个数字真的低至 40-50%，我会感到非常惊讶。以我的经验，几乎*每个*重要的应用程序都有不小的缺陷，即使它们很少遇到。（如果我是世界上唯一在电子表格中使用数字 999 的用户，那么这个错误对*我来说*仍然非常重要，所以我认为它不能被归类为微不足道的。）

至于“克服”缺陷——正常的单元测试、持续构建、自动化集成测试、手动测试，确保你有一个非常好的用户反馈系统，以及愿意投入资源修复错误和创建的管理层新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:48:50.200

主观的，但是：

非琐碎：阻止用户完成工作或在很大程度上影响其生产力的缺陷 琐碎：只会让用户烦恼的缺陷

显然这里有一个很大的灰色区域，因为对于一种产品来说令人讨厌和微不足道的东西可能会令人讨厌，但对于另一种产品来说却不是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T07:55:03.947

首先，值得注意的是，大多数单一缺陷都是微不足道的：测试旨在发现它们。

因此，非琐碎缺陷通常是两个或多个单一缺陷的组合，每个缺陷都是无害的（测试输入没有触发它们）。

不平凡的第二步是时间是输入/输出空间的一部分：特定日期或持续时间。

然后您可以添加假设与现实之间的差异：编译器、目标平台、输入……

摇动这一切，愿原力与你同在……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T09:05:52.557

先试着了解对方：琐碎的缺陷。一个微不足道的缺陷要么是无害的，要么很容易修复（UI 中的文本中的错字、按钮颜色错误、标签未完美对齐）。

重要的缺陷是其他一切：性能问题、应用程序的处理、数据损坏等。它们有时很难找到，而且通常很难修复。

# python - 制作 python cgi 脚本以优雅地完成

> ID：886653
> 
> 赞同：2
> 
> 时间：2009-05-20T07:44:14.857
> 
> 标签：python, cgi

我有一个接受用户上传（通过 sys.stdin.read）的 python cgi 脚本。收到文件后（无论成功与否），脚本都需要做一些清理工作。当上传正确完成时，这可以正常工作，但是如果用户关闭客户端，cgi 脚本会在服务器上静默终止，因此不会执行任何清理代码。我如何强制脚本始终完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T09:08:04.127

脚本可能不会被默默杀死；你只是没有看到 python 抛出的异常。我建议将整个脚本包装起来`try-except`并将任何异常写入日志文件。

这样，您就可以看到真正发生的事情。该`logging`模块是您的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:52:44.153

**您可以使用信号**模块捕获退出信号。不过，还没有用 mod_python 尝试过。

[http://docs.python.org/library/signal.html](http://docs.python.org/library/signal.html)

文档中的注意事项：

> 当信号在 I/O 操作期间到达时，I/O 操作可能会在信号处理程序返回后引发异常。这取决于底层 Unix 系统关于中断系统调用的语义。

如果您不从处理程序中退出 sys.exit，您可能需要捕获损坏的管道和/或文件写入的 I/O 异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T09:18:45.620

您也许可以使用 atexit 模块。

[http://docs.python.org/library/atexit.html](http://docs.python.org/library/atexit.html)

从文档中：

> atexit 模块定义了一个函数来注册清理函数。这样注册的函数会在解释器正常终止时自动执行。
> 
> 注意：当程序被信号杀死，检测到 Python 致命内部错误或调用 os._exit() 时，不会调用通过此模块注册的函数。
> 
> 这是 sys.exitfunc 变量提供的功能的替代接口。

# asp.net - 在 asp.net 中创建动态控件

> ID：886664
> 
> 赞同：1
> 
> 时间：2009-05-20T07:50:33.613
> 
> 标签：asp.net

我正在`linKbutton`单击事件上创建文件上传控件。第一次是创建控件，但如果我第二次按下链接按钮，它不会创建。那有什么问题？以下是我的代码：

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    newattach();
}

private void newattach()
{
    int i;
    for (i = 0; i < 2; i++)
    {
        count++;
        FileUpload f1 = new FileUpload();
        f1.ID = "fileupload" + count.ToString();
        f1.Height = 34;
        f1.Width = 212;
        Panel1.Controls.Add(f1);
    }
} 
```

count 是一个静态变量。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T07:56:32.353

当您使用 ASP.NET 动态创建控件时，您需要在每次回发时重新创建控件，通常您在 Page_Load 上重新创建控件。这很可能是您的问题的原因。

# php - 尝试次数过多后如何延迟登录尝试（PHP）

> ID：886665
> 
> 赞同：8
> 
> 时间：2009-05-20T07:51:00.290
> 
> 标签：php, login-attempts

我正在开发一个用 PHP 构建的相当大的网站，该网站可能会有很多用户。我正在寻找一种方法来保护登录屏幕免受自动尝试。我已经在注册表单上添加了验证码检查，但还想进一步强化网站。

我知道在 StackOverflow 上有类似的问题，而且我知道我能够自己从头开始实现（将登录尝试及其时间存储在数据库中），但我不喜欢这条路：

*   从概念上讲，我认为这种逻辑属于 Web 服务器/基础架构级别，而不是应用程序级别。我不喜欢在我的应用程序中有这种逻辑和复杂性
*   我担心性能，尤其是在数据库级别。
*   我很懒，不想从头开始构建这样的通用实用程序

任何建议表示赞赏，我认为我特别在寻找某种可以做到这一点的 Apache 模块。我的平台是 PHP5（使用 CodeIgniter）、Apache2、MySQL 5。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-20T08:04:28.203

**更新：不要使用 sleep() 进行速率限制！**这根本没有意义。我手头没有更好的解决方案。

* * *

一个好的开始是`sleep(1);`在一次失败的登录尝试之后 - 易于实施，几乎没有错误。

1 秒对人类来说并不算多（特别是因为人类的登录尝试不会经常失败），但是 1 秒/尝试蛮力......慢！字典攻击可能是另一个问题，但它在同一个域中。

如果攻击者启动了也可能连接来规避这一点，你处理的是一种 DOS 攻击。问题已解决（但现在您遇到了另一个问题）。

你应该考虑的一些事情：

*   如果您在每个 IP 的基础上单独锁定帐户，则专用网络可能会出现问题。
*   如果您仅根据用户名锁定帐户，则可能会针对已知用户名进行拒绝服务攻击
*   在 IP/用户名的基础上锁定（其中用户名是被攻击的人）可以更好地工作

**我的建议：** 完全锁定是不可取的（DOS），因此更好的选择是：计算来自唯一 IP 的某个用户名的登录尝试。你可以用一个简单的表来做到这一点`failed_logins: IP/username/failed_attempts`

如果登录失败，`wait(failed_attempts);`秒。每 xx 分钟，运行一个减一的 cron 脚本`failed_logins:failed_attempts`。

抱歉，我无法提供预制的解决方案，但这应该很容易实现。

好吧好吧。这是伪代码：

```
<?php
$login_success = tryToLogIn($username, $password);

if (!$login_success) {
    // some kind of unique hash
    $ipusr = getUserIP() . $username;

    DB:update('INSERT INTO failed_logins (ip_usr, failed_attempts) VALUES (:ipusr, 1) ON DUPLICATE KEY UPDATE failed_logins SET failed_attempts = failed_attempts+1 WHERE ip_usr=:ipusr', array((':ipusr' => $ipusr));

    $failed_attempts = DB:selectCell('SELECT failed_attempts WHERE ip_usr=:ipusr', array(':ipusr' => $ipusr));

    sleep($failed_attempts);
    redirect('/login', array('errorMessage' => 'login-fail! ur doin it rong!'));
}
?> 
```

**免责声明：**这可能不适用于某些地区。我听到的最后一件事是，在亚洲有一个国家被 NAT（而且，他们都知道功夫）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:03:16.400

一个非常愚蠢的未经测试的例子，但我认为，你会在这里找到主要思想）。

```
if ($unlockTime && (time() > $unlockTime))
{
    query("UPDATE users SET login_attempts = 0, unlocktime = 0 ... ");
}
else
{
   die ('Your account is temporary locked. Reason: too much wrong login attempts.');
}
if (!$logged_in)
{
    $loginAttempts++;
    $unlocktime = 0;
    if ($loginAttempts > MAX_LOGIN_ATTEMPTS) 
    {
        $unlockTime = time() + LOCK_TIMEOUT;
    }
    query("UPDATE users SET login_attempts = $loginAttempts, unlocktime = $unlocktime ... ");
} 
```

对错误感到抱歉 - 我在几秒钟内写了它，广告没有测试......你可以通过 IP、昵称、session_id 等来做同样的事情......

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-05-20T09:48:32.703

为什么不等待“强化”和“缩放”您的应用程序，直到您真正遇到这个问题？最可能的情况是应用程序永远不会有“很多用户”。这对我来说听起来像是过早的优化，需要避免。

*   一旦你得到机器人滥用，加强注册。我实际上会删除验证码，直到您开始每天获得 > 1000 次注册。
*   一旦遇到性能问题，通过修复真正的瓶颈来提高性能。

# javascript - window.onload() 在第一次使用 IE 8 时未触发

> ID：886668
> 
> 赞同：27
> 
> 时间：2009-05-20T07:51:40.397
> 
> 标签：javascript, html, internet-explorer, xhtml, internet-explorer-8

我试图让我的页面在 IE 8 上正常工作，我从这里发现：http: [//www.masykur.web.id/post/How-to-Make-Our-Website-to-be-Ready-for -IE8.aspx](http://www.masykur.web.id/post/How-to-Make-Our-Website-to-be-Ready-for-IE8.aspx) ，我的页面必须符合 XHTML 1.0 并且至少符合 CSS 2.1，我使我的页面和 CSS 符合只有几个警告，但仍然 window.onload() 没有触发。有人遇到过这个问题吗？

这是代码片段：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=8"/>
        <title>Testing</title>
        <link rel="stylesheet" href="test.css" type="text/css"></link>
        <script type="text/javascript" src="login.js"></script>
        <script type="text/javascript" src="common.js"></script>
        <script type="text/javascript">
            window.onload = function()
            {
                          // Not coming here at all on first shot   
            }
        </script>
    </head>
    <body>
     .
     .
     . 
```

然而，刷新页面似乎使它工作。

我在这里错过了什么吗？

**更新：**

IE 插件之一在禁用其正常工作后产生了此问题。感谢您的时间和回答:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2010-07-14T08:11:58.690

对于 IE 尝试：

```
window.onload = new function() { alert('hello');}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-04-01T18:48:51.383

这是一个非常古老的线程，但我找到了一个可能对其他人有所帮助的解决方案。

我通过动态注入的脚本添加了一个函数`window.onload`（实际上是为了模仿外部脚本加载，原因在这种情况下并不重要）。如本文所述，在 IE8 中的第一次加载时，`window.onload`不会触发，但所有后续调用都会触发。

我发现如果我把它作为内部脚本放在 HTML 文件中，它每次都可以工作：

```
var windowOnload = window.onload || function() {};
window.onload = function() { windowOnload(); }; 
```

上面的代码所做的只是`window.onload`不显眼地“初始化”IE8。我怀疑`window.onload`如果从外部脚本调用 IE8 第一次无法触发，因为`onload`事件尚未附加到窗口（或在技术术语中，它的 typeof 未定义）。这似乎是 IE8 第一次做的事情：`onload`在没有正确执行的情况下附加到窗口。

上面的代码就变得很明显了：我们只是在强制 IE8 识别`onload`事件。我们不关心什么被执行，什么不被执行，所以我们只需确保通过任何`window.onload`已经定义的现有代码进行管道传输（只是作为预防措施）。

将其作为 HTML 的内部脚本很重要（至少从我的测试来看）。

因此，您的 HTML 看起来像这样（相关部分）：

```
 <script type="text/javascript">
  var windowOnload=window.onload||function(){};window.onload=function(){windowOnload();};
 </script>
 <script type="text/javascript" src="script.js">
 </script> 
```

根据我的测试，在清除缓存并重新加载页面后，我`window.onload`每次都能成功触发。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T15:40:35.457

我没有IE8可以亲自测试，但是这个测试有什么用呢？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Test IE 8</title>
<script type="text/javascript">
/* <![CDATA[ */
window.onload = function(){alert('Good morning!');}
/* ]]> */
</script>
</head>
<body>
<h1>Hello</h1>
<body>
</html> 
```

如果此测试按预期工作，请尝试使用内部 JavaScript 块周围的 CDATA 位。

然后，如果这不能按预期工作，那么它上面的外部 JavaScript 中可能有一些东西会阻止你的 onload 触发。之前的海报提到了这一点。此时，请尝试您的错误控制台或调试器来指明方向。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T14:04:47.460

您的 JavaScript 可能有错误，如果发生这种情况，之后的任何 JavaScript 都将无法正常运行。

尝试删除对 login.js 和 common.js 的引用，并尝试在有问题的函数中发出警报。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T08:08:47.523

onload 在您的所有内容加载后触发（包括外部图像等）。这些资源可能在第一次加载时需要很长时间（在它们被缓存之前）。另一种可能性是代码中的错误只会影响 IE，就像停止脚本一样（但只有第一次是奇怪的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-28T13:36:34.230

老问题，但我有同样的问题，但结果证明是另一个问题。`<script type="application/javascript">`我的问题是我没有`<IE9`理解或尝试运行。要使其适用于较旧的浏览器，您仍然必须使用它，`text/javascript`即使这在技术上不是正确的类型......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T13:27:48.550

如果您使用 Apache 与另一个 Web 服务器（IIS？）得到不同的结果，并使用 IE8 比较最终结果，那么差异必须在发送的内容类型标头中。获取适用于您平台的 wget 实用程序并查看生成的标头。如果您使用的是 Windows，那么[GUI wget 的便携式应用程序版本](http://portableapps.com/apps/internet/winwget_portable)非常好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T14:00:17.190

以下代码适用于我。当我在 Firefox 中加载页面时，我会立即看到警报。当我第一次在 IE 8 中加载页面时，它会警告我有关活动内容。如果我允许被阻止的内容，它会要求我确认，我会这样做。然后警报按预期出现。如果这对您不起作用，请在另一台计算机上尝试 IE 8 或开始消除页面中的代码以检查错误。你可以做一个二分搜索：注释掉页面的前半部分，看看是否出现了警报；如果仍然没有，则取消注释前半部分并注释掉后半部分。根据需要重复，直到将范围缩小到有问题的代码。顺便说一句，您不需要 XHTML 来符合 IE8。HTML 工作正常，实际上有一些优点。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=8"/>
    <title></title>
    <style type="text/css">
    </style>
    <script type="text/javascript">
    window.onload=function() { alert('hello');};
    </script>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-16T09:09:41.307

我知道这是一个老问题，但我也遇到了同样的事情。

```
 window.onload=function() { alert('hello');}; 
```

被区别对待

```
 window.onload= new function() { alert('hello');}; 
```

这里的关键词是`new`。

我的 JS 在到达 (onload=) 部分时就会终止，直到我在“function”之前添加了“new”这个词。即使在我的本地主机中没有“新”的情况下它也可以正常工作，但是一旦我将它放到网上，它在我添加“新”之前不起作用。

# regex - 如何从链接中仅获取 href 值

> ID：886669
> 
> 赞同：2
> 
> 时间：2009-05-20T07:51:45.717
> 
> 标签：regex, vbscript

我的页面中有很多链接。

例如`<a href="/promotions/download/schools/australia.aspx">Australia</a>`

现在我只想要带有其值的href，即（href =“/promotions/download/schools/australia.aspx”）和vbscript正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:55:56.537

我的正则表达式是这样的：

```
href="([^"]*)" 
```

可能需要在您的上下文中转义，但这（或非常类似的东西）应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T13:21:39.187

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。幸运的是，您应该可以使用最好的解析器：网络浏览器。现代浏览器创建了一个[文档对象模型](http://en.wikipedia.org/wiki/Document_Object_Model)，它是一个包含有关页面的所有信息的树结构。您可以在 DOM 上调用的方法之一是链接。我真的不知道 vbscript，但这段代码看起来应该可以工作：

```
For i = 0 To document.links.length
  document.write(document.links(i).href & "<BR>")
Next 
```

# iphone - 在 iPhone 上准备插入查询

> ID：886673
> 
> 赞同：1
> 
> 时间：2009-05-20T07:53:39.177
> 
> 标签：iphone, sqlite

这是行不通的。当我执行此操作时，我收到一条消息，`EXC_BAD_ACCESS`.

```
-(void) adddata{
    NSString *event=@"max";
    NSString *venue=@"tvm";
    NSString *edate=@"may 6";
    NSString *etime=@"10:30";
    int admts=5;
    NSString *ima=@"TTTTTTTTT";//ticobj.iimg;
    sqlite3 *database;
    databaseName = @"smbhDB.sql";
    sqlite3_stmt *addStatement=nil ;
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    const char *sql ="insert into tickets (admittance, venue, event, date, time, imagedata) Values (?,?,?,?,?,?)";
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
        if(sqlite3_prepare_v2(database, sql, -1, &addStatement, NULL) != SQLITE_OK)
            NSAssert1(0, @"444 Error while creating add  statement. '%s'", sqlite3_errmsg(database));
   sqlite3_bind_int(addStatement,1,admts);
    printf("\n\n inthe add ticket ");
    sqlite3_bind_text(addStatement, 2, [venue UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStatement, 3, [event UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStatement, 4, [edate UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStatement, 5, [etime UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStatement, 6, [ima UTF8String], -1, SQLITE_TRANSIENT);
    if(SQLITE_DONE != sqlite3_step(addStatement))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    sqlite3_reset(addStatement); 
```

# apache-flex - Flex 3.2 铸造问题

> ID：886674
> 
> 赞同：3
> 
> 时间：2009-05-20T07:53:53.823
> 
> 标签：apache-flex, actionscript-3, casting

我是新来的，最近遇到了一个障碍。

这是我正在运行的代码。

```
/**
* return background definition depending on time
*/ 
private function findBackgroundItem( relativeTime : Number ) : CSBackgroundItem
{
    if( this.backgroundItems == null ) return null;
    var result :CSBackgroundItem = null;
    var relative:Date = new Date(relativeTime);
    for( var i : Number = 0; i < this.backgroundItems.length; i++ )
    {
        // backgroundItems is an Ilist of CSBackgroundItem.
        var colourItem : CSBackgroundItem = CSBackgroundItem( this.backgroundItems.getItemAt( i ) );

        // other stuff here
    }           
    return result;
} 
```

当 IList.getItemsAt() 结果被转换为 CSBackgroundItem 变量 colourItem 时，就会出现问题。抛出以下错误

```
TypeError: Error #1034: Type Coercion failed: cannot convert com.mystuff::CSBackgroundItem@650e8dd1 to com.mystuff.CSBackgroundItem. 
```

如果我使用`'as'`关键字，我会得到强制转换结果`colourItem`为空。使用调试器显示列表不是空的，并且确实填充了`CSBackgroundItem`对象。

现在这是古怪的一点..这段代码有效，第一次加载它的模块..后续加载（卸载它之后）抛出异常。

谁能解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T08:38:14.703

我想我可能已经找到答案了。。

我的猜测是该模块正在加载到不同的 ApplicationDomain.. 这意味着您不能从当前域中的相同类型进行转换..

据我了解，这与加载同一类的不同 Java 类加载器有点相似。

确认后我会再次发帖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:50:38.530

是的..这有效..

这是我在 MXML 样式中使用的修复程序..

```
<mx:ModuleLoader id="loader" x="10" y="10" width="100%" height="100%" applicationDomain="{ApplicationDomain.currentDomain}"/> 
```

等效的动作脚本将是

```
loader.applicationDomain = ApplicationDomain.currentDomain; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T10:54:38.920

仅供参考，加载到子 ApplicationDomain 中的类型可以转换为父 ApplicationDomain 中的类型（它扩展/实现）。

例如。

```
loader.applicationDomain = ApplicationDomain.currentDomain; // parent domain
loader.applicationDomain = new ApplicationDomain(ApplicationDomain.currentDomain); // child domain
loader.applicationDomain = new ApplicationDomain(); // new domain 
```

# c# - 如何判断网线是否已拔下？

> ID：886680
> 
> 赞同：6
> 
> 时间：2009-05-20T07:55:47.613
> 
> 标签：c#, networking

我有一个 C# 应用程序，应该只在网络中断时使用，但恐怕用户只需拔下网线才能使用它。

有没有办法检测网线是否被拔掉？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T13:00:47.763

您可以使用 IsNetworkAlive()。虽然从技术上讲它不检查链接状态，但它可能更好，因为它也可以检测无线和拨号连接。这是一个例子：

```
using System.Runtime.InteropServices;
class Program
{
    [DllImport("sensapi.dll")]
    static extern bool IsNetworkAlive(out int flags);

    static void Main(string[] args)
    {
        int flags;
        bool connected = IsNetworkAlive(out flags);

    }
} 
```

flags 参数返回连接是连接到 Internet 还是仅连接到 LAN。我不是 100% 确定它是如何知道的，但我敢打赌它只是查看是否设置了默认网关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T12:37:06.140

以我的拙见，没有确定的方法可以区分网络故障和未插入的电缆。即使有办法，也有办法解决它。

让我们假设您有一个解决方案，让我们看看一些情况：

*   没有网络流量，电缆没有从计算机上拔下：它可能在另一端被拔掉。
*   没有网络流量，电缆已拔下：但情况一直如此，笔记本电脑通过 Wi-Fi 连接，目前已关闭。
*   有多个网络接口，只有一个连接到 WAN 的网络接口关闭：您的应用程序应该工作吗？
*   从你的意思来说，网络实际上已经关闭：有人设法不断重启路由器以使用你的应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T10:39:55.533

你可以用这个

```
System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T12:41:55.303

一些网络驱动程序**能够**检测到这一点。但是，您需要使用非托管代码从 C# 访问它们（这可能非常困难/不可能），并且该解决方案可能对所有网络适配器都不可靠。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T09:00:48.493

网卡将报告此状态。像这样的工具`ethtool`可以显示这个 ( `Link up`)，但这仅适用于 Linux/Unix。

如果您可以使用 Windows API 枚举已安装的网卡，我相信您会在那里的某处找到“链接”的标志。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-12T21:54:26.003

您可以向`NetworkChange`该类注册一个代表。当网络发生变化时，它实际上并没有通知您发生了什么，因此您可以列出所有网络接口（使用`NetworkInterface`），过滤与您有关的那些（通过检查那里的属性）并检查它们的运行状态。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T09:13:14.833

如果我真的想使用你的应用程序并且它是否能工作取决于这样的事情，我总能找到一种方法来欺骗你的应用程序。你确定没有更好的解决方案吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T13:10:46.010

ping 默认网关怎么样？

[这里](http://www.java2s.com/Tutorial/CSharp/0520__Windows/GetdefaultgatewayfromnetworkkeystoredinRegistry.htm)有一些代码可以从注册表中获取默认网关。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-06T08:52:21.410

要检测“网络电缆是否插入机器？”，下面的代码可以工作。

```
class Program
{
    private static void Main(string[] args)
    {
        bool isNetworkCableConnected = System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable();
    } 
} 
```

# windows - 应用程序栏和“显示桌面”

> ID：886681
> 
> 赞同：2
> 
> 时间：2009-05-20T07:55:48.393
> 
> 标签：windows, appbar

我有一个 Windows 应用程序，它使用 AppBar API 安装为屏幕顶部的应用程序栏（类似于 Windows 任务栏本身）。这很好用，桌面大小也会相应调整，所以我的应用程序总是可见的。

但是，如果用户选择“显示桌面”（Windows+D），我的应用程序将被隐藏。有谁知道捕获“显示桌面”的方法，以便我可以确保我的应用程序保持可见（我假设 Windows 枚举所有顶级窗口并使用 ShowWindow(SW_HIDE) 隐藏它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-05T12:34:09.983

使用以下代码并在表单加载时将窗口句柄传递给函数。希望这可以解决您的问题。

```
public void SetFormOnDesktop(IntPtr hwnd)
{
    IntPtr hwndf = hwnd;
    IntPtr hwndParent = FindWindow("ProgMan", null);
    SetParent(hwndf, hwndParent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T03:43:07.433

我的印象是，将窗口设置为最顶层窗口（通过[SetWindowPos](http://msdn.microsoft.com/en-us/library/ms633545(VS.85).aspx)和 HWND_TOPMOST 标志）会阻止桌面覆盖它。Windows+D 会最小化所有窗口，然后通过按 z 顺序提升桌面来覆盖那些无法最小化的窗口（好吧，[无论如何它确实在某一点上](http://blogs.msdn.com/oldnewthing/archive/2004/05/27/143042.aspx)做到了）。我相信您可以通过不将 WS_MINIMIZEBOX 传递给 CreateWindowEx 或使用 WS_EX_TOOLWINDOW 来使窗口无法最小化，尽管我不是 100% 的。

更重手的方法是使用 SetWindowsHookEx 和 KeyboardProc 挂钩全局键盘。这将对用户体验产生有害影响。

* * *

我去编写了一个非常简单的例子来说明我在说什么。以下代码创建了一个未被最小化的窗口，或者被用户点击 Windows+D 覆盖。请注意，在 Windows 7 上，桌面上的小工具仍然可以置于其上方；我真的无法解释。

```
#include <windows.h>
#include <tchar.h>

#define WIN_TITLE _T("Resists Win+D Window")
#define WIN_CLASS _T("Resists Win+D Class")

LRESULT CALLBACK CustomWndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    //Special behavior goes here

    return DefWindowProc(hwnd, uMsg, wParam, lParam);
}

HWND CreateMainWindow(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.style          = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = CustomWndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_APPLICATION));
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName   = NULL;
    wcex.lpszClassName  = WIN_CLASS;
    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_APPLICATION));

    if (!RegisterClassEx(&wcex))
    {
        exit(1);
    }

    HWND hWnd = CreateWindowEx(
        WS_EX_TOOLWINDOW,
        WIN_CLASS,
        WIN_TITLE,
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        500,
        100,
        NULL,
        NULL,
        hInstance,
        NULL
    );

    if (!hWnd)
    {
        exit(1);
    }

    return hWnd;
}

/*
  Main entry point
*/
int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR lpCmdLine,
                   int nCmdShow)
{
    HWND hwnd = CreateMainWindow(hInstance);

    ShowWindow(hwnd, nCmdShow);
    SetWindowPos(hwnd, HWND_TOPMOST, -1, -1, -1, -1, SWP_NOMOVE | SWP_NOSIZE);
    UpdateWindow(hwnd);

    MSG msg;
    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return (int) msg.wParam;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-13T05:16:20.100

在您的 ABN_FULLSCREENAPP 通知中，您需要确定占用工作区的窗口是否是桌面，如果是，则忽略 ABN_FULLSCREENAPP 消息。

PS 作为替代实现，请考虑商业[ShellAppBar](http://www.ssware.com/shlobj/shlobj.htm)组件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T14:23:13.613

除了[JKS 的答案](https://stackoverflow.com/a/2005978/1403593)，这里是 VB.NET 的工作代码，假设您已经将表单转换为 appbar。您需要 p/invoke 函数`FindWindow`和`SetFormOnDesktop`.

```
'In your form
Public Sub New()
    'Stuff
    SetFormOnDesktop(Me.Handle)
    'More stuff
End Sub

'In your form or somewhere else.
<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function FindWindow( _
 ByVal lpClassName As String, _
 ByVal lpWindowName As String) As IntPtr
End Function

<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Public Shared Function SetParent(_
 ByVal hWndChild As IntPtr, ByVal hWndNewParent As IntPtr) As IntPtr
End Function

Public Sub SetFormOnDesktop(hwnd As IntPtr)
    Dim hwndf As IntPtr = hwnd
    Dim hwndParent As IntPtr = FindWindow("ProgMan", Nothing)
    SetParent(hwndf, hwndParent)
End Sub 
```

# c++ - 在 C++ 中使用数组如何导致安全问题

> ID：886683
> 
> 赞同：2
> 
> 时间：2009-05-20T07:56:13.133
> 
> 标签：c++, security

有人告诉我，用 C++ 编程的最佳方式是使用 STL 和字符串，而不是数组和字符数组。

IE，

```
vector<int> myInt; 
```

而不是

```
int myInt[20] 
```

但是，我不明白为什么会导致安全问题的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T07:58:35.297

那么，我建议您阅读有关[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overrun)的内容。程序员在使用原始数组时更有可能创建或冒着缓冲区溢出的风险，因为它们为您提供的保护较少并且不提供 API。当然，使用 STL 也可以将自己射中自己的脚，但至少更难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T08:59:43.893

这里似乎对安全向量可以提供和不能提供的内容有些混淆。忽略迭代器的使用，访问向量中的元素主要有三种方式。

*   vector 的 operator[] 函数 - 这不提供边界检查，并且会在边界错误时导致未定义的行为，就像使用无效索引时数组一样。

*   at() 向量成员函数 - 这提供边界检查，如果使用无效索引将引发异常，但性能成本很小

*   用于向量底层数组的 C++ 运算符 [] - 这不提供边界检查，但会提供尽可能高的访问速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T08:38:20.957

数组不执行边界检查。因此，它们很容易受到难以检测的[边界检查错误的影响。](http://en.wikipedia.org/wiki/Off-by-one_error)

注意：以下代码有编程错误。

```
int Data[] = { 1, 2, 3, 4 };
int Sum = 0;

for (int i = 0; i <= 4; ++i) Sum += Data[i]; 
```

使用这样的数组，你不会得到帮助你找到错误的异常；只是一个不正确的结果。

数组不知道自己的大小，而`vector`定义`begin`和`end`方法来访问其元素。使用数组，您将始终不得不依赖指针算术（而且由于它们只不过是指针，因此您可能会意外地转换它们）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T07:59:53.657

C++ 数组在插入或读取时都不执行边界检查，并且很容易意外地从数组边界之外访问项目。

从 OO 的角度来看，vector 也对自己有更多的了解，因此可以处理自己的家务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T08:39:15.230

您的示例有一个包含固定数量项目的静态数组；根据您的算法，这可能与具有固定数量项目的向量一样安全。

但是，根据经验，当您想要动态分配项目数组时，向量会更容易，也可以让您少犯错误。任何时候你必须思考，都有可能存在漏洞，可能会被利用。

# html - 用于共享“控件”的公共开源 HtmlHelper 存储库

> ID：886688
> 
> 赞同：7
> 
> 时间：2009-05-20T07:57:23.380
> 
> 标签：html, css, asp.net-mvc, html-helper

在使用 MVC 框架一段时间后，我必须说我喜欢它，但在我看来，MVC 派对蛋糕上总有一件事情让我大吃一惊。缺乏好的、可重复使用和便携的“控件”。这是 HtmlHelpers 应该发挥作用的地方。

在阅读[了这篇](http://www.trycatchfail.com/blog/post/2009/05/13/ASPNET-MVC-HtmlHelper-for-Uploadify-Take-One.aspx)博文后，我开始思考我对一个好的 HtmlHelper 的期望究竟是什么，我想把它公开，以便其他（更聪明的）人可以加入我的努力。

### 常见语法约定

这样，任何开发人员都可以轻松地使用一些 HtmlHelper，而无需阅读整个文档。我喜欢 JQuery 通常是如何做到这一点的，所以模仿这个也许是个好主意。

### html != 字符串

使用 stringbuilders 编写 Html 只是一种痛苦。如果我们可以将 Html 写在 Html 或 asp 文件中，然后编译成 dll，那不是很好吗？

### 将 javascript/css 放在它们所属的位置

我想我不是唯一一个使用 asp:contentholder 为他的 javascript 和 css 构建母版页的人。最好是页面底部的js和页面顶部的css。如果 HtmlHelper 可以将所需的引用和脚本块放置在那里不是很好吗？也许检查双重参考..

### 公共存储库

目前我有一种感觉，每个人都只是在他们自己的私人图书馆里一遍又一遍地重新创建相同的轮子。如果我们有一些存储库可以将所有这些工作结合起来，那不是很好吗？

这条线上是否已经有我错过的现有努力？如果不是，您认为这是一个有用的想法吗？你愿意成为参与者吗？
我在操作系统方面的经验很少，但我觉得这可能是社区所渴望的。有更多 os project xp 的人是否看到任何陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:57:47.897

有[MVCContrib](http://mvccontrib.codeplex.com)，但它并没有解决您提出的所有问题。我肯定希望在 MVC 中看到比在任何地方使用 StringBuilder 更好的“控件”解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:04:03.083

这里有一个很好的资产管理（[http://weblogs.asp.net/rashid/archive/2009/05/02/script-and-css-management-in-asp-net-mvc-part-2.aspx](http://weblogs.asp.net/rashid/archive/2009/05/02/script-and-css-management-in-asp-net-mvc-part-2.aspx)） ，这确实对添加脚本和 css 有很大帮助。

在同一个博客中，还有一些简洁的 UI 助手。

我正在启动一个名为 MVCUIHelpers 的小型操作系统项目，请参阅（[http://github.com/erikzaadi/MVCUIHelpers/tree/master](http://github.com/erikzaadi/MVCUIHelpers/tree/master)）。

该项目相当新（到目前为止只有图标和按钮助手），但旨在满足您的需求..

如果你有什么可以贡献的，那就太好了；）

请原谅损坏的链接，新用户不能在这里插入链接:(

干杯，

埃里克

# browser - 其他浏览器和 Firefox 之间存在哪些 HTML 呈现差异？

> ID：886690
> 
> 赞同：0
> 
> 时间：2009-05-20T07:57:55.160
> 
> 标签：browser, compatibility

我想了解与 Mozilla Firefox 相比，主要浏览器（Internet Explorer、Chrome）的基本兼容性问题，例如：

1.  文本对齐
2.  颜色
3.  字体大小
4.  工具提示
5.  段落对齐
6.  文字粗体
7.  图像以外的形状
8.  线重叠
9.  表可见性

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:05:07.797

这是一个非常模糊的问题，但我发现[Quirks Mode](http://www.quirksmode.org/)对浏览器兼容性的各个方面都非常有帮助。另请查看[A List Apart](http://www.alistapart.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T06:28:20.570

雅虎的聪明人已经为他们优秀的 YUI 库编写了几个 CSS 规范化组件，这已经够大的痛苦了。请参阅重置 CSS (developer.yahoo.com/yui/reset)、字体 CSS、基础 CSS 和网格 CSS 组件。

# c# - C#中的数据继承

> ID：886691
> 
> 赞同：3
> 
> 时间：2009-05-20T07:58:16.373
> 
> 标签：c#, design-patterns

是否有已知的模式来继承分层对象结构中的数据？我有一个分层的“项目”结构，需要从其“父”继承其“类型”（具有与默认相同的数据）。子项的类型可以自己修改，当父项的类型发生变化时，所有类型不变的子项都应该得到新的父项类型。

请注意，我不能像这样伪造它

```
public string Type
{
    get
    {
        if (type == null)
            return Parent != null ? Parent.Type : null;

        return type;
    }
} 
```

因为我必须在数据库中填充值，并且结构太深而无法使用递归并且不担心性能。

我现在唯一能想到的方法是

```
public string Type
{
    set
    {
        type = value;
        UpdateUnchangedChildren(value);
    }
}

public int AddChild(Item item)
{
    item.Type = Type;
    return Items.Add(item);
} 
```

有没有更好的办法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-12T10:56:54.913

这是一个常见问题，通常与维护各种分层设置/配置有关。所以，我想它的解决方案可以被认为是“一种模式”。

无论如何，从内部架构的角度来看，您有 2 个主要选择：

*   标准化结构
*   非规范化结构

“Normazlied”是用递归实现的。一条特定的数据总是存储在一个地方，所有其他地方都有对它的引用（例如，对父级）。结构很容易更新，但从中读取可能是个问题。

“非规范化”意味着每个节点都将存储其级别的整套设置，并且每当您更新一个节点时，都需要一些时间来沿着层次结构向下并纠正所有子节点。但是读取操作是即时的。

And so the "denormalized" version seems to be more widely used, because the common scenario with settings is that you update them rarely, while read them often, hence you need better read performance. For example, [Windows ACL security model](http://www.windowsecurity.com/articles/Understanding-Windows-NTFS-Permissions.html) uses the "denormalized" approach to make security checks fast. You can read how they [resolve conflicts between the "inherited" and explicit permissions (ACEs) by checking them in a specific order](http://alt.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsACLInheritance.html). That might be an overkill for your particular system though, you can simply have a flag that a particular value was overriden or, on the opposite, reset to "default"...

更多细节取决于您的系统需求，您可能希望拥有一个“混合”架构，其中一些字段将被“规范化”，而另一些则不会。但你似乎是在正确的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:17:09.283

我不是 100% 确定你正在尝试做什么......但你可以使用泛型将父对象的类型传递给子对象......但是在那里有一个 setter 并没有真正的意义。 .. Parent 对象的类型将在实例化时设置，那么为什么你会有一个 setter 来更改它。

假设你有这样的东西......

```
public class Child<T>
{
   public string Type
   {
       get { return typeof(T).ToString(); }
   }
} 
```

因此，当您拥有`Parent`任何类型的对象时，您可以将其传递给您的子属性...

```
public class ParentA
{
   public Child<ParentA> ChildObj { get; set; }
}

public class ParentB
{
   public Child<ParentB> ChildObj { get; set; }
}

public class ParentC
{
   public Child<ParentC> ChildObj { get; set; }
} 
```

调用任何这些 ChildObj.Type 属性将分别返回 ParentA、ParentB 和 ParentC。

但是我有一种有趣的感觉，你还没有完全解释你想要做什么。您能否发布更多显示父类和子/项目类的代码示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-12T18:58:04.540

一个明显的优化是在读取类型时缓存从父级获得的值。这意味着您最多只能遍历每条路径一次（而天真的解决方案意味着您将一次又一次地遍历每个包含它的路径的每个子路径，这意味着最多 O(h^2) 而不是 O(h)） . 如果您的读取次数多于写入次数，那将非常有用。

考虑一下：

```
class Node
{
    string _cachedParentType = null;
    string _type;
    string Type 
    {
        get { return _type ?? _cachedParentType ?? (_cachedParentType = Parent.Type); }
        set 
        { 
            _type = value; 
            foreach (var child in Children) { child._cachedParentType = null; }
        }
    }
} 
```

This means with enough reads and few writes, reading becomes O(1) in the best case or, at worst, a "cache miss" will cost you O(h) with h being the height of the tree; while updating is O(k) with k being the branching level (because we only update one layer down!). I think this will generally be better than the UpdateUnchangedChildren solution (which I presume updates nodes recursively all the way to the leafs), unless you're doing WAY more reads than writes.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T15:30:55.930

“......结构太深，无法使用递归，不用担心性能。”

你真的测量过这个吗？您要处理多少个项目，结构有多深，以及项目没有自己的“类型”值的情况有多普遍？您对应用程序的性能目标是什么，递归解决方案与这些目标相比如何？

人们通常认为递归很慢，因此在没有尝试过的情况下将其排除在外。出于性能原因而拒绝最简单的设计而不首先测量它绝不是一个好主意。否则，当更简单的解决方案可以正常工作时，您就会去发明更复杂的解决方案。

当然，您的第二个解决方案也是使用递归，只是沿着层次结构向下而不是向上。如果子插入发生在不同的时间并且可以吸收可能的性能影响，那么这可能会更容易接受。

# asp.net - 在构建时自动停止/重新启动 ASP.NET 开发服务器

> ID：886692
> 
> 赞同：32
> 
> 时间：2009-05-20T07:58:26.670
> 
> 标签：asp.net, visual-studio, cassini

有没有办法在我在 VS2008 中进行构建/重建时自动停止 ASP.NET 开发服务器（Cassini）（然后显然在需要时重新启动）？也许某处有一些隐藏的配置设置？或者至少可以通过某种方式将其作为构建后的事件？

对于某些背景，问题是我使用 Spring.NET 进行依赖注入等，但它在应用程序启动时加载其单例，这意味着如果我更改任何与 spring 相关的代码/配置，我必须停止开发服务器，所以它会在下次调试/运行时再次启动，以确保再次触发应用程序启动事件。换句话说，即使您更改了一堆代码/配置然后再次开始调试，它实际上并没有*重新开始*，因为它已经在运行，所以您的新代码没有被使用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2010-01-19T22:52:31.910

[解决方法：在 Visual Studio 中使用 ASP.Net Web 服务器调试 Global.aspx.cs Application_Start()](https://web.archive.org/web/20071215031257/http://blogs.msdn.com/webdevtools/archive/2007/12/13/workaround-debugging-global-aspx-cs-application-start-with-asp-net-web-server-within-visual-studio.aspx)

在 Web 服务器项目上启用“编辑并继续”对我有用。停止调试时它不会关闭 cassini，但在开始调试时会重新启动 cassini。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-21T04:05:26.027

所以我最终得到了一个基于 Magnus 答案的解决方法，但是使用了以下相对简单的宏（为什么他们强迫你使用 VB 做宏？我觉得很脏）：

```
Imports System
Imports System.Diagnostics

Public Module KillCassini

    Sub RestartDebug()
        If (DTE.Debugger.DebuggedProcesses.Count > 0) Then
            DTE.Debugger.Stop(True)
        End If
        KillCassini()
        DTE.Debugger.Go(False)
    End Sub

    Sub KillCassini()
        Dim name As String = "WebDev.WebServer"
        Dim proc As Process
        For Each proc In Process.GetProcesses
            If (proc.ProcessName.StartsWith(name)) Then
                proc.Kill()
            End If
        Next
    End Sub

End Module 
```

基本上，如果调试器当前正在运行，它将停止它然后杀死任何名为“WebDev.WebServer”的进程，这些进程应该是所有 Cassini 实例，然后再次启动调试器（这将再次隐式启动 Cassini）。我正在使用`proc.Kill()`是因为两者都不起作用`proc.CloseMainWindow()`或`proc.WaitForExit(1000)`似乎不起作用......

无论如何，一旦你有了你的宏，你可以将它分配给键盘快捷键，或者创建自定义工具栏按钮来运行它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-26T06:28:11.940

我只是打开一个命令行（runas admin）

运行以下。它应该杀死所有人

```
Taskkill /IM WebDev.WebServer40.EXE /F 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-20T13:19:05.557

我知道的唯一方法是在 post.build 事件上进行自定义 Cassini 启动。这个定制的过程会杀死所有 Cassini 实例，并启动一个新实例。为了让它工作，您需要构建一个小的自定义命令行实用程序。我在这里称它为 SpawnProcess。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Diagnostics;

namespace SpawnProc
{
  class Program
  {
    public static void Main(string[] args)
    {
      if (args.Length > 0)
      {
        // Kill all current instances
        FileInfo fi = new FileInfo(args[0]);
        string name = Path.GetFileNameWithoutExtension(fi.FullName);
        foreach (Process proc in Process.GetProcessesByName(name))
        {
          proc.Kill();
        }

        ProcessStartInfo startInfo = new ProcessStartInfo(args[0]);
        if (args.Length > 1)
        {
          startInfo.Arguments += "/port:" + args[1];
        }

        if (args.Length > 2)
        {
          startInfo.Arguments += " /path:\"" + args[2].Trim(new char[]{'"'}) + "\"";
        }
        if (args.Length > 3)
        {
          startInfo.Arguments += " /vpath:\"" + args[3].Trim(new char[]{'"'}) + "\"";
        }

        try
        {
          Process.Start(startInfo);
        }
        catch (Exception ex)
        {
          Debug.WriteLine("Error: " + ex.Message);
          for (int i = 0; i < args.Length; i++)
          {
            Debug.WriteLine("args[" + i + "]: " + args[i].ToString());
          }
        }
      }
    }
  }
} 
```

然后您将指示 Visual Studio 不使用 Cassini。转到您的 Web 应用程序的属性 -> Web 并选择“使用自定义 Web 服务器”，输入如下内容：（`http://localhost:1685/`或您想使用的任何端口号）。然后，在构建后事件中输入此命令：

```
"$(ProjectDir)..\SpawnProc\bin\debug\SpawnProc" "C:\Program Files (x86)\Common Files\microsoft shared\DevServer\9.0\WebDev.WebServer.exe" 1685 "$(ProjectDir)" / 
```

确保您的路径正确，例如，由于我运行的是 64 位操作系统，我的程序文件路径与 32 位操作系统不同。另外，我的 SpawnProc.exe 在一个子项目中。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-01-21T16:09:56.743

受这篇文章和另一篇[关于代码清理的](https://stackoverflow.com/questions/1033441/visual-studio-executing-clean-up-code-when-debugging-stops)启发， 我将宏添加为 PostDebug-event。所以每次调试器返回时，都会删除所有的WebDev.WebServer-s。（我放松了 ProcessName 约束。）

注意：这可能会杀死*所有*的 WebServer，其他调试会话的 WebServer 也是如此（这对我来说很好，目前我通常没有）。因此，您可能只想寻找子进程或类似的东西（并在此处发布该代码;-)）。

所以我的代码如下所示：

```
Private Sub DebuggerEvents_OnEnterDesignMode(ByVal Reason As EnvDTE.dbgEventReason) _
            Handles DebuggerEvents.OnEnterDesignMode
    If (Reason = dbgEventReason.dbgEventReasonStopDebugging) Then
        Dim name As String = "WebDev.WebServer"
        Dim proc As System.Diagnostics.Process
        For Each proc In System.Diagnostics.Process.GetProcesses()
            If (proc.ProcessName.StartsWith(name)) Then
                proc.Kill()
            End If
        Next
    End If
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-28T17:00:50.727

另一种方法是使用 Powershell：

*   作为[预构建事件](http://kristofmattei.be/2010/10/22/restarting-casini-before-building/)： `powershell Stop-Process -name webdev.webserver`
*   作为[Powershell-command-shortcut](http://kristofmattei.be/2011/01/30/stopping-casini-before-rebuilding-website-in-visual-studio-revisited/)：`powershell.exe Stop-Process -Name @('WebDev.WebServer*', 'Microsoft.Expression.Web*')`

PS：我不知道是否还有人需要，但我只是偶然遇到了这个解决方案，同时寻找完全不同的东西。

# php - MacGDBp，但更好？

> ID：886698
> 
> 赞同：4
> 
> 时间：2009-05-20T07:59:53.517
> 
> 标签：php, macos, gdb

对于调试 php 代码，我使用 MacGDBp，但它有其怪癖：它仅显示堆栈的顶部帧变量，有时根本拒绝显示任何变量，最后一个版本使用非 ascii 字符装饰源文本。有没有原生 OS X 的替代方案？（即*不是*Eclipse，我受不了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-12-01T14:03:35.013

我也使用过 MacGDBp，对你提到的限制感到沮丧。虽然它不是一个本地应用程序，但 NetBeans 6.5 和更高版本是免费的，并且包含一个可以与 XDebug 一起使用的不错的 PHP 调试器。

[http://netbeans.org/kb/docs/php/debugging.html](http://netbeans.org/kb/docs/php/debugging.html)

它并非没有自己的一系列问题，但它似乎确实比 MacGDBp 更可靠。

如果您不反对付费，Komodo IDE（我选择的 IDE）也有一个 PHP 调试器。

[http://www.activestate.com/komodo-ide?src=AScom&type=bn&X=HP&campaign=KMD](http://www.activestate.com/komodo-ide?src=AScom&type=bn&X=HP&campaign=KMD)

此外，虽然有点偏离主题，但您可能会发现简单的 Xdebug FireFox 扩展很有用：

[https://addons.mozilla.org/en-US/firefox/addon/58688/](https://addons.mozilla.org/en-US/firefox/addon/58688/)

最后，XDebug 网站列出了其他客户端、浏览器插件以及如何使用它们的说明：

[http://www.xdebug.org/docs/remote#browser_session](http://www.xdebug.org/docs/remote#browser_session)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-30T12:53:19.063

对于 Linux 用户 - [http://protoeditor.sourceforge.net/](http://protoeditor.sourceforge.net/)有一个很好的 Xdebug 轻量级客户端，它也可以作为 Kate 的插件使用（Xdebug 站点上没有提到）

Xdebug 也可以与 XAMPP 一起愉快地运行 - 如果您知道将已编译的 .so 文件放在哪里；）

SaniSoft 博客上还有一篇文章描述了如何在 Linux 上使用 XAMPP 安装 Xdebug：http: [//www.sanisoft.com/blog/2007/06/23/how-to-install-xdebug-php-extension -for-xampp-on-linux/](http://www.sanisoft.com/blog/2007/06/23/how-to-install-xdebug-php-extension-for-xampp-on-linux/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-11-27T13:56:17.227

[http://debuggable.com/posts/setting-up-xdebug-on-mac-os-x-or-win32-linux:480f4dd6-0240-4a90-8fa1-4e41cbdd56cb](http://debuggable.com/posts/setting-up-xdebug-on-mac-os-x-or-win32-linux:480f4dd6-0240-4a90-8fa1-4e41cbdd56cb)

这对我帮助很大。也许它也对你有帮助。

编辑：顺便说一下，它是一个 PHP 扩展。它可以在包括 Netbeans、Eclipse、AS Komodo 在内的合格 IDE 中使用...哦，您也可以通过设置特殊的 GET 变量（或 COOKIE）手动使用它（有关更多信息，请参阅 xdebug 手册）。

# c# - 双屏编程问题

> ID：886700
> 
> 赞同：3
> 
> 时间：2009-05-20T07:59:59.163
> 
> 标签：c#, .net, multiple-monitors

我正在使用 VSTS 2008 + C#。有什么办法可以得到这样的信息，比如我们当前是否处于双显示器模式，每个桌面的当前分辨率是多少？

BTW：有双屏、复制屏或扩展屏两种模式。我还需要一个解决方案来区分不同的模式。

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T08:17:06.460

[System.Windows.Forms.Screen.AllScreens](http://msdn.microsoft.com/de-de/library/system.windows.forms.screen.allscreens.aspx)

> 获取系统上所有显示器的数组。

属性[初级](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.primary.aspx)

> 获取一个值，该值指示特定显示器是否为主设备。

而[Bounds](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.bounds.aspx)属性可能是其余的解决方案。

[System.Windows.Forms.SystemInformation.VirtualScreen](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.virtualscreen.aspx) 属性

可能对您有用，以确定主监视器是克隆还是扩展。

VirtualScreen 分辨率高于主要 -> 扩展...

VirtualScreen分辨率=主要的->克隆的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T08:03:05.507

```
System.Windows.Forms.Screen 
```

为您提供屏幕数据。从应用程序的角度来看，重复屏幕并不真正被视为另一个屏幕。

# jquery - Jquery中的两个Js文件

> ID：886701
> 
> 赞同：0
> 
> 时间：2009-05-20T08:00:01.770
> 
> 标签：jquery, calendar

我的 EditInPlace 代码中有以下 js 文件...

```
 <?php echo $javascript->link('jquery.js');?>
    <?php echo $javascript->link('jquery.editinplace.packed.js');?> 
```

这两个都工作得很好。但我现在需要在我的应用程序中有一个日历。所以我有另一个js文件

```
 <?php echo $javascript->link('jquery-ui-1.7.1.custom.min.js');?> 
```

它工作正常。但现在我的 EditInPlace 无法正常工作。

为什么app里不能有两个js文件？我什至尝试让其他两个 js 文件原型，scriptacuolous 并且都运行良好。但是，如果我包含任何与原型对应的脚本不起作用的 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:13:47.247

jquery-ui-1.7.1.custom.min.js 是您下载的自定义缩小版本，它包含的内容比您需要的要多 - 它甚至可以再次包含 jQuery 本身。

我建议您只下载您需要的 javascript 文件（UI 核心和 UI 日期选择器）。不要下载打包或缩小版本。下载完整版本，然后连接所有 javascript 文件并自己打包/缩小它们。[使用YUI 压缩器](http://developer.yahoo.com/yui/compressor/)这很容易。对于调试，使用完整版本要容易得多。

回到您的问题，拥有两个或多个 javascript 文件是完全合法的，只要它们之间没有冲突。设计良好的库很少出现这种情况，例如您正在使用的库。但是，要发现问题，您只需要包含必要的文件。

# linq - 将替换我的两个 foreach 的 linq 查询是什么

> ID：886702
> 
> 赞同：0
> 
> 时间：2009-05-20T08:00:34.153
> 
> 标签：linq

我正在努力弄清楚如何替换下面的两个 foreach。

```
 public void UpdateChangedRows(List<Row> changedRows)
    {
        // How to write linq to update the rows (example code using foreach)
        foreach (Row row in table.Rows)
        {
            foreach (Row changedRow in changedRows)
            {
                if (row.RowId==changedRow.RowId)
                {
                    row.Values = changedRow.Values;
                }
            }
        }
    } 
```

我认为会有一种 linq 方式来执行相同的操作。谢谢你的帮助。

拉尔西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T08:04:42.913

好吧，LINQ 更多的是关于*查询*而不是更新，所以我仍然将它分成一个 LINQ 查询，然后是一个`foreach`循环来进行更新：

```
var query = from row in table.Rows
            join changedRow in changedRows on row.RowId = changeRow.RowId
            select { row, changedRow };

foreach (var entry in query)
{
    entry.row.Values = entry.changedRow.Values;
} 
```

请注意，这在内存方面效率较低，因为它将*所有*更改的行加载到字典中（内部），以便它可以根据行 ID 快速查找更改的行 - 但这意味着循环复杂性很多更小（`O(n) + O(m)`而不是`O(n * m)`如果每一行只匹配一个更改的行，反之亦然）。

# c++ - 添加可导出结构的数据成员（最后）会导致问题吗？

> ID：886703
> 
> 赞同：0
> 
> 时间：2009-05-20T08:00:34.217
> 
> 标签：c++, api, struct, export

可导出函数具有结构作为参数之一。这个 DLL 被许多 Exes 使用

其中一个 EXE 需要发送一些额外的数据，所以我们在结构的末尾添加了一个成员并分发了 DLL。

现在我的问题是，如果我们将新的 DLL 放在其他不知道额外成员的 EXE 中，这会导致问题吗？

DLL 不应尝试访问 EXE 中不存在的结构数据成员。我该如何处理这种情况？

注意：不允许在 DLL 中添加新的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T08:09:55.010

如果其他函数接受`struct`按值，即不是通过指向它的指针，那么是的，很可能会出现问题。您的调用代码将`struct`在堆栈上放置一个大于接收函数将删除的内容，从而导致净堆栈增长和一般不良情况。

# xul - 如何在 Xulrunner 应用程序的“首次运行”期间运行代码

> ID：886705
> 
> 赞同：1
> 
> 时间：2009-05-20T08:00:43.030
> 
> 标签：xul, xulrunner

我正在编写一个基于 xulrunner 的自定义应用程序，我希望在第一次运行应用程序时在用户配置文件中部署一些文件。

我将文件放在我的应用程序的 defaults/profile 目录中，但在应用程序的第一次运行期间它们没有被复制到用户的配置文件中。

我应该编写一些额外的代码还是应该自动发生？肯定会被复制的是应用程序默认首选项。

Firefox 或许多 mozilla 应用程序是否提供“标准”方式？任何指向某些阅读的链接都会有所帮助。任何提示都是有价值的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T05:12:26.120

您还可以将首选项系统与查询扩展版本号结合使用。当版本改变时，调用你的函数。如果您愿意，这将使您可以灵活地稍后再次调用该函数 - 但仅限于版本更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-30T23:10:54.357

不幸的是，执行首次运行代码的*标准*方法是使用 pref 系统来确定您是否已经做某事。但是有一些陷阱：

*   确保此代码只运行一次。如果您的 firstrun 代码位于覆盖或主浏览器窗口中，它可以运行多次（每个窗口一次）

*   运行代码并设置首选项后，请确保刷新首选项，因为首选项是在关闭时写入的，只有在关闭时才会保存。

    Components.classes['@mozilla.org/preferences-service;1'] .getService(Components.interfaces.nsIPrefService) .savePrefFile(null);

# c++ - 如何更改地图中一对中的值

> ID：886706
> 
> 赞同：0
> 
> 时间：2009-05-20T08:01:43.810
> 
> 标签：c++, stl, maps

我可以：

```
map<char*, int> counter;
++counter["apple"]; 
```

但是当我这样做时：

```
--counter["apple"] // when counter["apple"] ==2; 
```

我在 VS 2008 中挂断了调试器。

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T08:08:18.443

你依赖它的价值吗？字符串文字在不同用途中不需要具有相同的地址（尤其是在不同的翻译单元中使用时）。因此，您实际上可以通过以下方式创建两个值：

```
counter["apple"] = 1;
counter["apple"] = 1; 
```

你也没有得到任何排序，因为发生的是它按地址排序。使用`std::string`which 没有该问题，因为它知道内容并且`operator<`比较字典顺序：

```
map<std::string, int> counter;
counter["apple"] = 1;
assert(++counter["apple"] == 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T08:09:57.037

表格的地图：

```
map <char *, int> counter; 
```

不是一个非常明智的结构，因为它不能有效地管理它包含的 char 指针。将地图更改为：

```
map <string, int> counter; 
```

看看这是否能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T19:54:22.153

我发现了问题。如果我将其更改为：

```
map<string,int> counter;
counter["apple"]++;

if(counter["apple"]==1)
   counter.erase("apple");
else 
   counter["apple"]--; //this will work 
```

在键/值对中，如果 value 是 int 且 value ==1，我不知何故无法执行 map[key]--，（因为这会使 value ==0？）

# .htaccess - 在 .htaccess 中使用 mod_rewrite 重写 URL

> ID：886710
> 
> 赞同：0
> 
> 时间：2009-05-20T08:02:10.237
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在尝试使用 mod_rewrite apache 模块重写 URL。我正在尝试如下使用它：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteRule ^wants/testing.htm wants.php?wantid=$1 [L] 
```

我在访问文件的目录中创建了一个 .htaccess 文件。

mod_rewrite 也已启用。完成所有这些后，我仍然无法使其正常工作。

有人可以帮我吗？如果我遗漏了什么，请告诉我

提前致谢， Gnanesh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:11:19.783

根据OP的评论：

> URL 显示 mydomain.com/wants.php?wantid=123。我需要让它看起来像 mydomain.com/wants/123

这应该适用于您的情况：

```
RewriteEngine on
RewriteBase /
RewriteRule ^wants/([0-9]+)$ /wants.php?wantid=$1 [L] 
```

它将允许您使用**[http://yoursite.com/wants/123](http://yoursite.com/wants/123)**并将其默默地重写为**Wants.php?wantid=123**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T08:08:12.953

我认为前导斜线（或者更确切地说是缺少斜线）可能是你的问题：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteRule ^wants/testing.htm /wants.php?wantid=$1 [L] 
```

否则 Apache 可能会在 /wants/wants.php 中寻找 PHP 文件，因为它会将其视为相对 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T09:43:44.103

嗯，所以我想了一下，我想你可以做这样的事情（如果我理解正确的话，只根据你的评论更改正则表达式）：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteRule ^wants/\d+$ /wants.php?wantid=$1 [L] 
```

但我想您也可以省略 $1 引用，并且仍然可以访问`wants.php`. 所以

```
RewriteRule ^wants/\d+$ /wants.php [L] 
```

也应该工作，然后你可以使用类似的东西

```
<?php 
    $request = split('/', $_SERVER["REQUEST_URI"])[1];
?> 
```

在您`wants.php`的数组的最后一个元素将是您的 id （或您决定重写并发送到脚本的任何其他内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T11:07:50.297

如果你想在你*想要*的目录中使用 .htaccess 文件中的规则，你必须`wants/`从模式的开头剥离上下文。所以就：

```
RewriteEngine on
RewriteRule ^([0-9]+)$ /wants.php?wantid=$1 [L] 
```

否则，如果要使用根目录中 .htaccess 文件中的规则：

```
RewriteEngine on
RewriteRule ^wants/([0-9]+)$ wants.php?wantid=$1 [L] 
```

# python - 使用每月数据控制 matplotlib 中的条形宽度

> ID：886716
> 
> 赞同：20
> 
> 时间：2009-05-20T08:03:25.817
> 
> 标签：python, matplotlib

当我用条形图绘制每月采样的数据时，它们的宽度非常薄。如果我将 X 轴次要定位器设置为 DayLocator()，我可以看到条形宽度调整为 1 天，但我希望它们填满整个月。

我试图将次要刻度定位器设置为 MonthLocator() 无效。

**[编辑]**

也许一个例子会更明确，这是`ipython -pylab`我的意思的一个例子：

```
x = [datetime.datetime(2008, 1, 1, 0, 0),
    datetime.datetime(2008, 2, 1, 0, 0),
    datetime.datetime(2008, 3, 1, 0, 0),
    datetime.datetime(2008, 4, 1, 0, 0),
    datetime.datetime(2008, 5, 1, 0, 0),
    datetime.datetime(2008, 6, 1, 0, 0),
    datetime.datetime(2008, 7, 1, 0, 0),
    datetime.datetime(2008, 8, 1, 0, 0),
    datetime.datetime(2008, 9, 1, 0, 0),
    datetime.datetime(2008, 10, 1, 0, 0),
    datetime.datetime(2008, 11, 1, 0, 0),
    datetime.datetime(2008, 12, 1, 0, 0)]

y = cos(numpy.arange(12) * 2)

bar(x, y) 
```

这给出了 12 个 2 像素宽的条形，我希望它们更宽并逐月延伸。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-05-20T14:10:31.287

只需使用`width`关键字参数：

```
bar(x, y, width=30) 
```

或者，由于不同的月份有不同的天数，为了让它看起来不错，你可以使用一个序列：

```
bar(x, y, width=[(x[j+1]-x[j]).days for j in range(len(x)-1)] + [30]) 
```

# c# - 如何在服务器上生成 Excel 电子表格？

> ID：886717
> 
> 赞同：1
> 
> 时间：2009-05-20T08:03:38.640
> 
> 标签：c#, asp.net, excel

我需要将一些报告输出为 Excel 2002 电子表格。

通常是报告服务的工作——然而——那是“不是很好的 IMO”，我讨厌它，所以在这个项目中我使用了 ExtJs——它不做任何 excel 输出——不是真的——但确实很好地完成了 UI。

如果我使用纯 XML 格式，报告将需要有大纲、分组摘要和各种不可用的格式。这是报告服务做得非常好的一件事。内脏。

那么...是否有人对报告服务的替代方案有任何建议，并且绝对不在服务器上安装 Office？Crystal 报告与 RS 一样“不是很好的 IMO”，所以也不是 :)

我看过 aspose 等人，但它们有点贵，如果可能的话，我想找到一些开源的东西——比如可能使用开放式办公室——如果我能找到在服务器上使用 OOo 的方法而无需实际安装它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T08:11:08.487

如果您的报告不是很大，也许您可​​以使用[Gembox Spreadsheed 的免费版本](http://www.gemboxsoftware.com/GBSpreadsheetFree.htm)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T15:02:10.857

Perl 模块 Spreadsheet::WriteExcel 非常适合生成 Excel 格式的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:38:13.727

[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)可以做到这一点，并且只需要服务器上的 ASP.NET 2.0（不依赖 Excel 或任何其他库）。

[您可以在此处](http://www.spreadsheetgear.com/support/samples/excel.aspx)查看实时 ASP.NET（VB 和 C#）Excel 报告示例。

如果性能很重要，我建议您在比较选项时使用您的实际数据和格式运行您自己的性能测试。

免责声明：我拥有 SpreadsheetGear LLC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T15:42:54.720

我最终选择了 OpenXml SDK 路线——在某些地方有点像 PITA，但在其他地方很好——一旦你掌握了它......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-04T01:13:07.777

这个问题的答案取决于预算、时间以及是否允许您在服务器上安装 coms -

对我们来说，以上都是负面的，

我们需要以下内容：

导出某些列的通用数据分组 某些列的汇总 基于模板的输出

当且仅当您遵守他们的规则时，sql server 报告服务才提供所有这些。

我们现在所拥有的几乎是该死的临时报告——使用 extjs 作为 ui，使用 nhib 作为域城堡 Windsor 进行绑定，使用 ooxml sdk 2.0 进行导出。

如果您需要用于 ulti 级别分组 excel 输出的代码，请给我留言 :)

w://

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-04T01:24:10.983

我正在（现在）使用 SyncFusion [XlsIO](http://www.syncfusion.com/products/back-office/xlsio)组件在服务器上进行 Excel 和 PDF 生成和合并的 Windows 服务，无人值守。

到目前为止，这是有效的。我遇到的唯一限制是能够读取一些“旧”的基于 html/xml 的 Excel 格式。

不是开源的，或者不幸的是免费的，但它是一个可行的选择。

# java - Java - 防止多版本应用程序拆分代码库

> ID：886718
> 
> 赞同：2
> 
> 时间：2009-05-20T08:03:55.473
> 
> 标签：java, preprocessor, multiple-versions

我正在编写一个应用程序，它将以几个不同的版本发布（最初将存在大约 10 种代码库变体，并且需要维护）。当然，98% 左右的代码在不同的系统中是相同的，保持代码库完整是有意义的。

我的问题是 - 这样做的首选方法是什么？例如，如果我有一个在某些版本（MyClassDifferent）中不同的类（MyClass），并且该类在几个地方被引用。我希望根据我正在编译的应用程序的版本来更改该引用，而不必拆分所有引用 MyClassDifferent 的类。预处理器宏会很好，但是它们会使代码膨胀，而且 afaik 只有概念验证实现可用吗？

我正在考虑类似工厂模式的东西，以及每个应用程序的配置文件。有没有人有任何提示或指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T08:08:01.050

您走在正确的轨道上：工厂模式、配置等。

您还可以将系统特定功能放在单独的 jar 文件中，然后只需在核心 jar 文件旁边包含适当的 jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T08:09:11.923

我会支持你的工厂方法，你应该仔细看看 maven 或 ant（取决于你使用的是什么）。您可以部署不同的配置文件，这些文件根据参数/配置文件确定使用哪些类。

像 C/C++ 这样的预处理器宏不能直接用于 java。尽管也许可以通过构建脚本来模拟这一点。但我不会走那条路。我的建议是坚持工厂方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T08:21:03.410

幸运的是你有几个选择

1）[ServiceLoader](http://java.sun.com/javase/6/docs/api/java/util/ServiceLoader.html)（内置于java6）将你的API类像MyClass放在一个jar中，针对这个API编译你的应用程序。然后用 /META-INF/services/com.foo.MyClass 将 MyClass 的单独实现放在单独的 jar 中。. 然后，您可以维护应用程序的多个版本，只需保持 jar 的“分发”即可。您的“主”类只是一堆 ServiceLoader 调用

2) 与 1) 相同的架构，但用 Spring 或 Guice 配置替换 META-INF 服务

3）OSGI

4）你的解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T03:48:38.943

查找 AbstractFactory 设计模式、“依赖注入”和“控制反转”。[Martin Fowler在这里](http://www.martinfowler.com/articles/injection.html)写了这些。

简而言之，您将 JAR 文件与所有需要的组件一起发布。对于每个可以自定义的服务点，您都可以为服务定义一个接口。然后您编写该接口的一个或多个实现。要创建服务对象，您需要向 AbstractFactory 请求它，例如：

```
AbstractFactory factory = new AbstractFactory();
...
ServiceXYZ s = factory.newServiceXYZ();
s.doThis();
s.doThat(); 
```

在 AbstractFactory 中，您使用 Java 反射方法 Class.classForName() 和 SomeClassObject.newInstance() 构造适当的 ServiceXYZ 对象。（这样做意味着您不必在 jar 文件中包含 ServiceXYZ 类，除非它有意义。您也可以正常构建对象。）

实际的类名是从每个站点唯一的属性文件中读入的。

您可以轻松推出自己的解决方案，或者使用[Spring](http://www.springsource.org/)、[Guice](http://code.google.com/p/google-guice/)或[Pico](http://www.picocontainer.org/)等框架。

# java - 如何在没有 IllegalMonitorStateException 的情况下在 Java 中使用等待和通知？

> ID：886722
> 
> 赞同：132
> 
> 时间：2009-05-20T08:04:53.927
> 
> 标签：java, multithreading, exception, java-threads

我有 2 个矩阵，我需要将它们相乘，然后打印每个单元格的结果。一旦一个单元格准备好，我就需要打印它，但是例如，即使 [2][0] 的结果首先准备好，我也需要在单元格 [2][0] 之前打印 [0][0] 单元格. 所以我需要按订单打印。所以我的想法是让打印机线程等到`multiplyThread`通知它正确的单元格已准备好打印，然后`printerThread`将打印单元格并返回等待等等..

所以我有这个做乘法的线程：

```
public void run() 
{
    int countNumOfActions = 0; // How many multiplications have we done
    int maxActions = randomize(); // Maximum number of actions allowed

    for (int i = 0; i < size; i++)
    {       
        result[rowNum][colNum] = result[rowNum][colNum] + row[i] * col[i];
        countNumOfActions++;
        // Reached the number of allowed actions
        if (countNumOfActions >= maxActions)
        {
            countNumOfActions = 0;
            maxActions = randomize();
            yield();
        }   
    }
    isFinished[rowNum][colNum] = true;
    notify();
} 
```

打印每个单元格结果的线程：

```
public void run()
{
    int j = 0; // Columns counter
    int i = 0; // Rows counter
    System.out.println("The result matrix of the multiplication is:");

    while (i < creator.getmThreads().length)
    {
        synchronized (this)
        {
            try 
            {
                this.wait();
            } 
            catch (InterruptedException e1) 
            {
            }
        }
        if (creator.getmThreads()[i][j].getIsFinished()[i][j] == true)
        {
            if (j < creator.getmThreads()[i].length)
            {
                System.out.print(creator.getResult()[i][j] + " ");
                j++;
            }
            else
            {
                System.out.println();
                j = 0;
                i++;
                System.out.print(creator.getResult()[i][j] + " ");
            }
        }
    } 
```

现在它向我抛出了这些异常：

```
Exception in thread "Thread-9" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-6" Exception in thread "Thread-4" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-5" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-8" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-7" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-11" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-10" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49)
Exception in thread "Thread-12" java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at multiplyThread.run(multiplyThread.java:49) 
```

第 49 行`multiplyThread`是“notify()”..我想我需要以不同的方式使用同步，但我不确定如何。

如果有人可以帮助此代码工作，我将非常感激。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2009-05-20T08:21:52.957

为了能够调用[notify()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#notify())，您需要在同一个对象上进行同步。

```
synchronized (someObject) {
    someObject.wait();
}

/* different thread / object */
synchronized (someObject) {
    someObject.notify();
} 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2011-06-03T00:12:54.443

在 Java 中使用`wait`and `notify`or`notifyAll`方法时，必须记住以下几点：

1.  如果您预计多个线程将等待锁定， 请使用`notifyAll`而不是。`notify`
2.  [和方法必须在同步上下文中`wait`调用`notify`](http://javarevisited.blogspot.com/2011/05/wait-notify-and-notifyall-in-java.html)。有关更详细的说明，请参阅链接。
3.  总是`wait()`在循环中调用该方法，因为如果多个线程正在等待一个锁，其中一个获得锁并重置条件，那么其他线程需要在唤醒后检查条件，看看是否需要再次等待或可以开始处理。
4.  `wait()`调用和`notify()`方法使用同一个对象；每个对象都有自己的锁，因此调用`wait()`对象 A 和`notify()`对象 B 没有任何意义。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-05-20T08:34:37.517

你需要穿这个吗？我想知道你的矩阵有多大，以及让一个线程打印而另一个线程进行乘法是否有任何好处。

在进行相对复杂的线程工作之前，也许这次值得测量一下？

如果您确实需要线程化，我会创建“n”个线程来执行单元的乘法（也许“n”是您可用的内核数），然后使用[ExecutorService](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ExecutorService.html)和[Future](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Future.html)机制同时调度多个乘法.

这样，您可以根据内核数量优化工作，并且您正在使用更高级别的 Java 线程工具（这应该让生活更轻松）。将结果写回接收矩阵，然后在所有未来任务完成后简单地打印出来。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-15T22:25:20.020

假设您有一个“黑匣子”应用程序，其中包含一些名为`BlackBoxClass`method的类`doSomething();`。

此外，您有名为的观察者或侦听器`onResponse(String resp)`，它们将`BlackBoxClass`在未知时间后被调用。

流程很简单：

```
private String mResponse = null; 
 ...
BlackBoxClass bbc = new BlackBoxClass();
   bbc.doSomething();
...
@override
public void onResponse(String resp){        
      mResponse = resp;       
} 
```

假设我们不知道发生了什么`BlackBoxClass`以及何时应该得到答案，但是您不想在得到答案或换句话说得到`onResponse`电话之前继续您的代码。这里输入“同步助手”：

```
public class SyncronizeObj {
public void doWait(long l){
    synchronized(this){
        try {
            this.wait(l);
        } catch(InterruptedException e) {
        }
    }
}

public void doNotify() {
    synchronized(this) {
        this.notify();
    }
}

public void doWait() {
    synchronized(this){
        try {
            this.wait();
        } catch(InterruptedException e) {
        }
    }
}
} 
```

现在我们可以实现我们想要的：

```
public class Demo {

private String mResponse = null; 
 ...
SyncronizeObj sync = new SyncronizeObj();

public void impl(){

BlackBoxClass bbc = new BlackBoxClass();
   bbc.doSomething();

   if(mResponse == null){
      sync.doWait();
    }

/** at this momoent you sure that you got response from  BlackBoxClass because
  onResponse method released your 'wait'. In other cases if you don't want wait too      
  long (for example wait data from socket) you can use doWait(time) 
*/ 
...

}

@override
public void onResponse(String resp){        
      mResponse = resp;
      sync.doNotify();       
   }

} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-20T08:23:12.953

您只能在您拥有其监视器的对象上调用通知。所以你需要类似的东西

```
synchronized(threadObject)
{
   threadObject.notify();
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-20T08:16:55.387

`notify()`也需要同步

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-06-19T09:47:11.850

我会用正确的简单示例向您展示在 Java中正确使用`wait`和使用的方法。`notify`所以我将创建两个名为**ThreadA**和**ThreadB**的类。ThreadA 将调用 ThreadB。

```
public class ThreadA {
    public static void main(String[] args){
        ThreadB b = new ThreadB();//<----Create Instance for seconde class
        b.start();//<--------------------Launch thread

        synchronized(b){
            try{
                System.out.println("Waiting for b to complete...");
                b.wait();//<-------------WAIT until the finish thread for class B finish
            }catch(InterruptedException e){
                e.printStackTrace();
            }

            System.out.println("Total is: " + b.total);
        }
    }
} 
```

对于 ThreadB 类：

```
class ThreadB extends Thread{
    int total;
    @Override
    public void run(){
        synchronized(this){
            for(int i=0; i<100 ; i++){
                total += i;
            }
            notify();//<----------------Notify the class wich wait until my    finish 
//and tell that I'm finish
            }
        }
    } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-10T05:36:50.017

如果你想简单使用如何交替执行线程： -

```
public class MyThread {
    public static void main(String[] args) {
        final Object lock = new Object();
        new Thread(() -> {
            try {
                synchronized (lock) {
                    for (int i = 0; i <= 5; i++) {
                        System.out.println(Thread.currentThread().getName() + ":" + "A");
                        lock.notify();
                        lock.wait();
                    }
                }
            } catch (Exception e) {}
        }, "T1").start();

        new Thread(() -> {
            try {
                synchronized (lock) {
                    for (int i = 0; i <= 5; i++) {
                        System.out.println(Thread.currentThread().getName() + ":" + "B");
                        lock.notify();
                        lock.wait();
                    }
                }
            } catch (Exception e) {}
        }, "T2").start();
    }
} 
```

> 回复 ：-

```
T1:A
T2:B
T1:A
T2:B
T1:A
T2:B
T1:A
T2:B
T1:A
T2:B
T1:A
T2:B 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-18T10:46:36.053

我们可以调用 notify 来恢复等待对象的执行

```
public synchronized void guardedJoy() {
    // This guard only loops once for each special event, which may not
    // be the event we're waiting for.
    while(!joy) {
        try {
            wait();
        } catch (InterruptedException e) {}
    }
    System.out.println("Joy and efficiency have been achieved!");
} 
```

通过在同一类的另一个对象上调用通知来恢复它

```
public synchronized notifyJoy() {
    joy = true;
    notifyAll();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-01T01:52:17.600

对于这个特殊问题，为什么不将各种结果存储在变量中，然后在处理完线程的最后一个时，您可以以所需的任何格式打印。如果您要在其他项目中使用您的工作历史，这将特别有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-06T17:33:20.863

这看起来像是生产者-消费者模式的情况。如果您使用的是 java 5 或更高版本，您可以考虑使用阻塞队列（java.util.concurrent.BlockingQueue）并将线程协调工作留给底层框架/api 实现。请参阅 java 5 中的示例：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html) 或 java 7（相同示例）： [http://docs。 oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-22T09:55:58.267

当您`wait()`使用`synchronized(this)`.

`notify()`但是当您调用方法而不使用保护块时，您没有采取同样的预防措施：`synchronized(this)`或`synchronized(someObject)`

如果您参考[Object](https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html)类的 oracle 文档页面，其中包含`wait()`, `notify()`,`notifyAll()`方法，您可以在所有这三个方法中看到以下注意事项

> 此方法只能由该对象的监视器所有者的线程调用

在过去的 7 年中，许多事情都发生了变化，让我们看看`synchronized`以下 SE 问题的其他替代方案：

[如果可以使用 synchronized(this)，为什么还要使用 ReentrantLock？](https://stackoverflow.com/questions/11821801/why-use-a-reentrantlock-if-one-can-use-synchronizedthis/36827191#36827191)

[同步与锁定](https://stackoverflow.com/questions/4201713/synchronization-vs-lock/34267717#34267717)

[在 Java 中避免同步（this）？](https://stackoverflow.com/questions/442564/avoid-synchronizedthis-in-java/36692190#36692190)

# c# - 在 C# 中生成 HTML 电子邮件正文

> ID：886728
> 
> 赞同：120
> 
> 时间：2009-05-20T08:07:27.057
> 
> 标签：c#, html, email

与使用 Stringbuilder 执行以下操作相比，是否有更好的方法在 C# 中生成 HTML 电子邮件（通过 System.Net.Mail 发送）：

```
string userName = "John Doe";
StringBuilder mailBody = new StringBuilder();
mailBody.AppendFormat("<h1>Heading Here</h1>");
mailBody.AppendFormat("Dear {0}," userName);
mailBody.AppendFormat("<br />");
mailBody.AppendFormat("<p>First part of the email body goes here</p>"); 
```

等等等等？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2009-05-20T08:13:08.467

您可以使用[MailDefinition 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.aspx)。

这是你如何使用它：

```
MailDefinition md = new MailDefinition();
md.From = "test@domain.com";
md.IsBodyHtml = true;
md.Subject = "Test of MailDefinition";

ListDictionary replacements = new ListDictionary();
replacements.Add("{name}", "Martin");
replacements.Add("{country}", "Denmark");

string body = "<div>Hello {name} You're from {country}.</div>";

MailMessage msg = md.CreateMailMessage("you@anywhere.com", replacements, body, new System.Web.UI.Control()); 
```

此外，我还写了一篇关于如何[使用 MailDefinition 类在 C# 中使用模板生成 HTML 电子邮件正文](http://martinnormark.com/generate-html-e-mail-body-in-c-using-templates)的博客文章。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-20T08:12:30.480

使用 System.Web.UI.HtmlTextWriter 类。

```
StringWriter writer = new StringWriter();
HtmlTextWriter html = new HtmlTextWriter(writer);

html.RenderBeginTag(HtmlTextWriterTag.H1);
html.WriteEncodedText("Heading Here");
html.RenderEndTag();
html.WriteEncodedText(String.Format("Dear {0}", userName));
html.WriteBreak();
html.RenderBeginTag(HtmlTextWriterTag.P);
html.WriteEncodedText("First part of the email body goes here");
html.RenderEndTag();
html.Flush();

string htmlString = writer.ToString(); 
```

对于包含创建样式属性的广泛 HTML，HtmlTextWriter 可能是最好的方法。然而，它使用起来可能有点笨拙，一些开发人员喜欢标记本身易于阅读，但 HtmlTextWriter 关于缩进的选择有点奇怪。

在此示例中，您还可以非常有效地使用 XmlTextWriter：-

```
writer = new StringWriter();
XmlTextWriter xml = new XmlTextWriter(writer);
xml.Formatting = Formatting.Indented;
xml.WriteElementString("h1", "Heading Here");
xml.WriteString(String.Format("Dear {0}", userName));
xml.WriteStartElement("br");
xml.WriteEndElement();
xml.WriteElementString("p", "First part of the email body goes here");
xml.Flush(); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-14T00:15:54.347

**更新答案**：

这个答案中使用的类的文档`SmtpClient`现在显示，'Obsolete("SmtpClient 及其类型网络设计不佳，我们强烈建议您使用[https://github.com/jstedfast/MailKit](https://github.com/jstedfast/MailKit)和[https://github .com/jstedfast/MimeKit](https://github.com/jstedfast/MimeKit)代替“）”。

来源：[https ://www.infoq.com/news/2017/04/MailKit-MimeKit-Official](https://www.infoq.com/news/2017/04/MailKit-MimeKit-Official)

**原答案**：

使用 MailDefinition 类是错误的方法。是的，它很方便，但它也是原始的并且依赖于 Web UI 控件——这对于通常是服务器端任务的东西没有意义。

下面介绍的方法基于 MSDN 文档和[Qureshi 在 CodeProject.com 上的帖子](http://www.codeproject.com/Articles/34467/Sending-Email-Using-Embedded-Images)。

注意：本示例从嵌入式资源中提取 HTML 文件、图像和附件，但使用其他替代方法来获取这些元素的流也可以，例如硬编码字符串、本地文件等。

```
Stream htmlStream = null;
Stream imageStream = null;
Stream fileStream = null;
try
{
    // Create the message.
    var from = new MailAddress(FROM_EMAIL, FROM_NAME);
    var to = new MailAddress(TO_EMAIL, TO_NAME);
    var msg = new MailMessage(from, to);
    msg.Subject = SUBJECT;
    msg.SubjectEncoding = Encoding.UTF8;

    // Get the HTML from an embedded resource.
    var assembly = Assembly.GetExecutingAssembly();
    htmlStream = assembly.GetManifestResourceStream(HTML_RESOURCE_PATH);

    // Perform replacements on the HTML file (if you're using it as a template).
    var reader = new StreamReader(htmlStream);
    var body = reader
        .ReadToEnd()
        .Replace("%TEMPLATE_TOKEN1%", TOKEN1_VALUE)
        .Replace("%TEMPLATE_TOKEN2%", TOKEN2_VALUE); // and so on...

    // Create an alternate view and add it to the email.
    var altView = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text.Html);
    msg.AlternateViews.Add(altView);

    // Get the image from an embedded resource. The <img> tag in the HTML is:
    //     <img src="pid:IMAGE.PNG">
    imageStream = assembly.GetManifestResourceStream(IMAGE_RESOURCE_PATH);
    var linkedImage = new LinkedResource(imageStream, "image/png");
    linkedImage.ContentId = "IMAGE.PNG";
    altView.LinkedResources.Add(linkedImage);

    // Get the attachment from an embedded resource.
    fileStream = assembly.GetManifestResourceStream(FILE_RESOURCE_PATH);
    var file = new Attachment(fileStream, MediaTypeNames.Application.Pdf);
    file.Name = "FILE.PDF";
    msg.Attachments.Add(file);

    // Send the email
    var client = new SmtpClient(...);
    client.Credentials = new NetworkCredential(...);
    client.Send(msg);
}
finally
{
    if (fileStream != null) fileStream.Dispose();
    if (imageStream != null) imageStream.Dispose();
    if (htmlStream != null) htmlStream.Dispose();
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-17T09:04:53.793

我使用[dotLiquid](http://dotliquidmarkup.org/)来完成这项任务。

它接受一个模板，并用匿名对象的内容填充特殊标识符。

```
//define template
String templateSource = "<h1>{{Heading}}</h1>Dear {{UserName}},<br/><p>First part of the email body goes here");
Template bodyTemplate = Template.Parse(templateSource); // Parses and compiles the template source

//Create DTO for the renderer
var bodyDto = new {
    Heading = "Heading Here",
    UserName = userName
};
String bodyText = bodyTemplate.Render(Hash.FromAnonymousObject(bodyDto)); 
```

它也适用于集合，请参阅[一些在线示例](http://dotliquidmarkup.org/try-online)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-20T08:13:59.917

我会推荐使用某种模板。有多种不同的方法可以解决这个问题，但基本上是在某个位置（在磁盘上、在数据库中等）保存电子邮件模板，并简单地将关键数据（IE：收件人姓名等）插入到模板中。

这更加灵活，因为这意味着您可以根据需要更改模板，而无需更改代码。根据我的经验，您可能会收到最终用户更改模板的请求。如果你想全力以赴，你可以包括一个模板编辑器。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-06T02:26:25.817

作为 MailDefinition 的替代方案，请查看 RazorEngine [https://github.com/Antaris/RazorEngine](https://github.com/Antaris/RazorEngine)。

这看起来是一个更好的解决方案。

归因于...

[如何使用电子邮件模板c#发送电子邮件](https://stackoverflow.com/questions/10512845/how-to-send-email-wth-email-template-c-sharp)

例如

```
using RazorEngine;
using RazorEngine.Templating;
using System;

namespace RazorEngineTest
{
    class Program
    {
        static void Main(string[] args)
        {
    string template =
    @"<h1>Heading Here</h1>
Dear @Model.UserName,
<br />
<p>First part of the email body goes here</p>";

    const string templateKey = "tpl";

    // Better to compile once
    Engine.Razor.AddTemplate(templateKey, template);
    Engine.Razor.Compile(templateKey);

    // Run is quicker than compile and run
    string output = Engine.Razor.Run(
        templateKey, 
        model: new
        {
            UserName = "Fred"
        });

    Console.WriteLine(output);
        }
    }
} 
```

哪个输出...

```
<h1>Heading Here</h1>
Dear Fred,
<br />
<p>First part of the email body goes here</p> 
```

> # 前往这里
> 
> 亲爱的弗雷德，
> 
> 电子邮件正文的第一部分在这里

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-20T08:12:10.170

只要标记不太复杂，像这样发出手工构建的 html 可能是最好的方法。stringbuilder 仅在大约三个连接后才开始在效率方面给您带来回报，因此对于非常简单的东西 string + string 就可以了。

除此之外，您可以开始使用 html 控件 (System.Web.UI.HtmlControls) 并渲染它们，这样您有时可以继承它们并为复杂的条件布局创建自己的类。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-15T16:50:36.270

如果您不想依赖完整的 .NET Framework，还有一个库可以让您的代码看起来像：

```
string userName = "John Doe";

var mailBody = new HTML {
    new H(1) {
        "Heading Here"
    },
    new P {
        string.Format("Dear {0},", userName),
        new Br()
    },
    new P {
        "First part of the email body goes here"
    }
};

string htmlString = mailBody.Render(); 
```

它是开源的，您可以从[http://sourceforge.net/projects/htmlplusplus/下载它](http://sourceforge.net/projects/htmlplusplus/)

免责声明：我是这个库的作者，它是为了解决同样的问题而编写的——从应用程序发送 HTML 电子邮件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-02-20T18:53:36.287

您可能想看看目前可用的一些模板框架。其中一些是 MVC 的衍生产品，但这不是必需的。[火花](http://sparkviewengine.com/)是一个很好的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-25T23:25:50.987

我在生产中使用并易于维护的商业版本是[LimiLabs Template Engine](https://www.limilabs.com/blog/email-template-engine)，已经使用了 3 年多，它允许我更改文本模板而无需更新代码（免责声明、链接等）-它可以很简单

```
Contact templateData = ...; 
string html = Template
     .FromFile("template.txt")
     .DataFrom(templateData )
     .Render(); 
```

像我一样值得一看；在尝试了这里提到的各种答案之后。

# c++ - 如何最好地将 VARIANT_BOOL 转换为 C++ bool？

> ID：886729
> 
> 赞同：24
> 
> 时间：2009-05-20T08:07:31.253
> 
> 标签：c++, windows, com, interop, boolean

使用 COM 时，布尔值将作为 VARIANT_BOOL 传递，在 wtypes.h 中声明为*short*。*true*和*false*也有预定义的值：

```
#define VARIANT_TRUE ((VARIANT_BOOL)-1)
#define VARIANT_FALSE ((VARIANT_BOOL)0) 
```

从 VARIANT_BOOL 转换为 C++`bool`类型的最佳方法是什么？明显的变体是：

1.  与 VARIANT_FALSE 比较

2.  简单地转换为布尔

可以很容易地发明其他方法。

最好的方法是什么——最易读、最符合标准、最不容易出现意外错误植入以及最不容易出现移植到 64 位平台的问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-20T08:16:57.523

比较`VARIANT_FALSE`。有很多错误的代码错误地将 C++ bool`true`值（强制转换为整数值 1）传递给期望`VARIANT_BOOL`. 如果你比较`VARIANT_FALSE`，你仍然会得到正确的期望值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-20T21:54:33.237

我不想担心不同布尔值之间的兼容性，所以我通常会写：

```
VARIANT_BOOL vb_bool = VARIANT_FALSE;

// ... vb_bool set to something by some other code

bool myBool = (vb_bool == VARIANT_TRUE); 
```

是否有更小（如“将编译为更简单的 x86 代码”）的有效方法？当然。不值得。这保证有效，所以我可以担心我的业务逻辑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T08:16:33.297

转换为 bool 显然是错误的。有人说（例如[BOOL vs. VARIANT_BOOL vs. BOOLEAN vs. bool](http://blogs.msdn.com/oldnewthing/archive/2004/12/22/329884.aspx)的评论）与 VARIANT_FALSE 进行比较，但我会比较两者。这样您就可以及早捕获无效值（除 VARIANT_FALSE 或 VARIANT_TRUE 之外的任何值）。

例如

```
bool VariantBoolToBool(VARIANT_BOOL varFlag)
{
  bool boolFlag;

  switch( varFlag ) 
  {
    case VARIANT_TRUE:
        boolFlag = true;
        break;
    case VARIANT_FALSE:
        boolFlag = false;
        break;
    default:
        throw Exception("Not a valid value");
  }

  return boolFlag;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T09:09:03.627

在您的全局标题之一中声明此宏。

```
#define b(X) ((X)!=VARIANT_FALSE) 
```

编辑：更安全的版本：

```
inline bool b(VARIANT_BOOL v){return v!=VARIANT_FALSE;} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T08:32:58.583

为什么要有明确的演员表？

```
if (my_bool)
{
    blargh();
}
else
{
   blarglerr();
} 
```

这样，根据 C 标准，真为真，假为假。如果您需要设置 C++ 样式`bool`，请执行以下操作：

```
VARIANT_BOOL vb_bool = VARIANT_FALSE
bool cpp_bool = !!vb_bool 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T08:23:31.817

标准 C++ 转换规则依赖于零表示 false [正如 1800 INFORMATION 指出的那样，TRUE 变体是最容易发生混淆的地方]，仅此而已。因此，一个 static_cast 将是最好的。

但在许多情况下，作为比较，代码会更具可读性。在这种情况下，VARIANT_BOOL 是要比较的东西。

# opengl - 如何将颜色转换矩阵应用于 OpenGL 中的纹理

> ID：886736
> 
> 赞同：2
> 
> 时间：2009-05-20T08:08:48.617
> 
> 标签：opengl, texturing

基本上，我有一个这样定义的颜色矩阵：

```
struct ColourXForm
{
   float4 mul;
   float4 add;

   float4 Transform(float4 colour)
   {
      return float4(
         colour.x * mul.x + add.x,
         colour.y * mul.y + add.y,
         colour.z * mul.z + add.z,
         colour.w * mul.w + add.w);
   }
}
```

我想要做的是将函数“变换”应用于纹理中的每个像素，因为它被渲染到屏幕上。我实际上无法修改纹理，因为不同的颜色变换矩阵可以在一帧中多次应用于同一图像（我不知道在渲染纹理之前会应用什么），我可以'也不使用着色器。

考虑到这些要求，有没有办法做到这一点？（到目前为止，我唯一的想法是多纹理，但不知道如何应用它）

另外，我是 OpenGL 的新手，所以发布一些代码也会很有帮助，或者指向我的教程甚至是所需的函数/参数。

谢谢

编辑：我应该提到的另一件事是纹理包含预乘的 alpha，因此混合设置为`glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T20:29:05.220

如果不是着色器（疯狂的需求，家庭作业或非 PC 平台？），那么您可能可以使用纹理阶段或其他东西来设置它。你的函数很简单（tex * a + b）所以它应该是可行的，虽然不是很有趣。:-P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:19:28.827

如果您使用的是最新版本的 OpenGL，您当然可以使用着色器编程来执行此操作。

如果您不想使用它，但使用的是 OpenGL 2.0 或更高版本，则可以使用该`[glMatrixMode()](http://www.opengl.org/sdk/docs/man/xhtml/glMatrixMode.xml)`函数将 OpenGL 的颜色矩阵设置为与您所需的变换匹配的值。

# c# - 窗体应用程序中的 for 循环

> ID：886737
> 
> 赞同：0
> 
> 时间：2009-05-20T08:08:59.660
> 
> 标签：c#, for-loop

我刚刚使用窗口窗体应用程序设计了一个简单的“For Loop”。我希望这只能点击一次，并且如果我点击按钮，它不会重复相同的信息。我怎么能那样做？谢谢这是我的代码：

```
 int count;

        for (count = 0; count < 5; count = count + 1)
        {
            listBox1.Items.Add("This is count: " + count);
        }
        const string textEnd = "Done!!!";
        {
            listBox1.Items.Add(textEnd);
        } 
```

==== 附加信息 === 我现在已经做到了。这只会单击一次，但该按钮仍处于启用状态。我认为这没问题：

```
 int count;

        for (count = 0; count < 5; count++)
        {
            string newItem = "This is count: " + count; 
            if (listBox1.Items.IndexOf(newItem) < 0) 
            { 
                listBox1.Items.Add(newItem); 
            }
         }

        const string textEnd = "Done!!!";
        if (listBox1.Items.IndexOf(textEnd) <0)
        {
            listBox1.Items.Add(textEnd);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T08:14:08.590

```
button1.Enabled = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:16:06.493

我假设您不希望将相同的项目多次添加到列表中？

代替

```
{
    listBox1.Items.Add("This is count: " + count);
} 
```

你需要类似的东西

```
{
    string newItem = "This is count: " + count;
    if(listBox1.Items.IndexOf(newItem) < 0)
    {
        listBox1.Items.Add(newItem);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T09:21:11.357

如果它不是太多的项目，你总是可以在添加东西之前清除列表框。

```
listbox1.Items.Clear();
...your adding code... 
```

但可能最好的解决方案就是禁用按钮，就像 Ian 写的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T09:34:21.877

最好的是伊恩所说的，但是您也可以通过运行以下任一命令来完全隐藏按钮

```
button.Hide(); 
```

或者

```
button.Visable = false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T08:15:42.750

在点击事件上，添加 button1.Enabled = false

也许，在循环之后，您可能想要添加 button1.Enabled = true 以重新启用按钮。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T08:16:29.893

您可以只使用一个简单的“标志”来确定循环是否已经运行。

创建一个全局变量，例如 bool HasRun = false;

然后在执行循环之前检查标志的状态，例如 if HasRun == true

首次运行循环时将 HasRun 设置为 true。

最后，您还可以在首次运行时禁用该按钮，例如 button1.Enabled = false;

# wpf - Visibility.Collapsed 和 Visibility.Hidden 之间的区别

> ID：886742
> 
> 赞同：311
> 
> 时间：2009-05-20T08:10:04.103
> 
> 标签：wpf, wpf-controls, visibility

`Visibility.Collapsed`WPF和WPF之间有什么区别`Visibility.Hidden`？

* * *

## 回答 #1

> 赞同：463
> 
> 时间：2009-05-20T08:21:15.453

不同之处在于`Visibility.Hidden`隐藏了控件，但保留了它在布局中占据的空间。所以它呈现空白而不是控件。 `Visibilty.Collapsed`不呈现控件*并且*不保留空白。控件将占用的空间是“折叠的”，因此得名。

来自 MSDN 的确切文本：

> **Collapsed**：不显示元素，也不在布局中为其预留空间。
> 
> **隐藏**：不显示元素，但在布局中为元素保留空间。
> 
> **可见**：显示元素。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.visibility.aspx](http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx)

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2016-02-11T19:44:50.133

**可见性：隐藏与折叠**

考虑以下代码，它只显示***`three Labels`***并具有第二个`Label` `visibility`as `Collapsed`：

```
 <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Center">
    <StackPanel.Resources>
        <Style TargetType="Label">
            <Setter Property="Height" Value="30" />
            <Setter Property="Margin" Value="0"/>
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="BorderThickness" Value="1" />
        </Style>
    </StackPanel.Resources>
    <Label Width="50" Content="First"/>
    <Label Width="50" Content="Second" Visibility="Collapsed"/>
    <Label Width="50" Content="Third"/>
</StackPanel> 
```

**输出折叠：**

[![折叠](https://i.stack.imgur.com/MMf7R.jpg)](https://i.stack.imgur.com/MMf7R.jpg)

现在将第二个更改`Label` `visibility`为`Hiddden`.

```
<Label Width="50" Content="Second" Visibility="Hidden"/> 
```

**输出隐藏：**

[![隐](https://i.stack.imgur.com/D6D64.jpg)](https://i.stack.imgur.com/D6D64.jpg)

***就如此容易。***

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-11T08:22:41.577

即使有点旧线程，对于那些仍在寻找差异的人：

除了在 Hidden 中采用的布局（空间）和在 Collapsed 中未采用的布局（空间）之外，还有另一个区别。

如果我们在这个 'Collapsed' 主控件中有自定义控件，下次我们将它设置为 Visible 时，它​​将“加载”所有自定义控件。窗口启动时不会预加载。

至于“隐藏”，它将在“窗口”启动时加载我们设置为隐藏的所有自定义控件+主控件。

# eclipse - 如何在 Windows 上安装多个 JDK？

> ID：886744
> 
> 赞同：23
> 
> 时间：2009-05-20T08:11:23.273
> 
> 标签：eclipse, java

我想在 XP 上安装 JDK 1.5 和 1.6，可以吗？怎么做

另外，我正在使用 Eclipse 如何为不同的项目设置使用不同的 JDK？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-20T08:15:04.843

您可以轻松安装不同的 JDK：只需指定不同的文件夹即可。

**您可以在 Eclipse Window/Preferences/Installed JREs**中设置已安装的 JDK

 ****您可以在Project/Properties/Java Compiler**中为每个项目选择 JDK 和 Java 版本

 *** * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-05-10T05:35:07.293

我通过为不同的 Java 版本创建批处理文件解决了这个问题。

1.  我已经安装了我需要的 Java 版本
2.  每当我需要使用 Java 时，我都会运行相应的批处理文件并设置环境变量以使用该 Java 版本。

**Java 8.bat**

```
@echo off
echo Setting JAVA_HOME
set JAVA_HOME=C:\Program Files\Java\jdk1.8.0_121
echo setting PATH
set PATH=%JAVA_HOME%\bin;%PATH%
echo Display java version
java -version 
```

**Java 10.bat**

```
@echo off
echo Setting JAVA_HOME
set JAVA_HOME=C:\Program Files\Java\jdk-10.0.2
echo setting PATH
set PATH=%JAVA_HOME%\bin;%PATH%
echo Display java version
java -version 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T08:15:25.310

为什么？有一个选项（不记得确切的位置 - 右键单击​​您的项目）允许您设置目标 JDK 级别。我在开发 GWT 应用程序时使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-08T15:24:17.553

尝试使用`sdkman`. 尽管在 Windows 上安装有点“棘手”，但有多种选择。

[https://sdkman.io/install](https://sdkman.io/install)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-08T12:47:42.373

自 90 年代创建 Java 时，各种不兼容的 JDK 和 JRE 出现了很大的混乱，但这个问题仍然存在。主要规则是当您在控制台中键入时：

`java -version`

和

`javac -version`

结果应该是相同的，那么您确定 JRE 和 JDK (JSDK) 都兼容，因此当您编译时，您可以毫无问题地使用它。

`JAVA_HOME`并且`PATH`对于许多控制台应用程序是必不可少的，一些 GUI 工具也可能使用这些变量，但通常可以更改 GUI 应用程序中的默认设置，而不是弄乱环境变量。有时也`CLASSPATH`仍然使用，但是使用 ANT 作为编译器比直接使用 javac 更好。

您可以安装多个 JDK 和 JRE，但每个都应该有自己独立的文件夹，默认通常应该没问题。

值得一提的是，每个 JDK 都包含 JRE，它安装在单独的文件夹中，并作为单独的 APP 安装在**Windows 控制面板 -> 应用程序**中，这样会更加混乱，因此基本上开发人员将永远不必下载和安装 JRE。请勿使用 Java 更新应用程序，这可能会在更新某些应用程序后出现问题，但手动操作即可。

# apache-flex - 检测 UIComponent 是否有滚动条处于活动状态

> ID：886748
> 
> 赞同：0
> 
> 时间：2009-05-20T08:12:17.390
> 
> 标签：apache-flex, flex3, air

我在 flex 中有一个 TileList，并且需要能够检测是否显示滚动条，所以我可以更改它正在布局的项目的大小。

ScrollPolicy 设置为自动，但我需要像 CurrentScrollPolicy 这样的变量，它会根据内容从关闭变为开启。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T16:47:42.527

谢谢eBuildy，你的权利！

我创建了一个示例，该示例还考虑了滚动条在不需要时隐藏而不是设置回 null 的事实：

```
 public class CustomTileList extends TileList
{

    public function CustomTileList()
    {
        super();
    }

    /**
     * Returns true if the vertical scroll bar is displayed
     * @return Boolean
     *
     */
    public function hasVerticalScrollBar():Boolean
    {
        if (super.verticalScrollBar == null || super.verticalScrollBar.visible == false)
            return false;
        return true;
    }

} 
```

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-04-21T09:28:57.140

或者，如果你不想覆盖列表，你可以有类似的东西

```
if(listInstance.mx_internal::scroll_verticalScrollBar != null){...} 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-08T20:46:51.377

我使用了非常简单的技巧来解决这个问题。将滚动位置设置为最大值，因为如果您检查它并且没有滚动条并且它高于零，那么它将始终为零，因为必须有滚动条，所以向元素添加高度。

```
yourControl.verticalScrollPosition = yourConrol.maxVerticalScrollPosition;

for (var i:int=0; i <= yourControl.verticalScrollPosition ;i++)
{
     yourControl.height = yourControl.height+16;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T09:47:27.807

您需要检查verticalScrollBar。如果它为空，则没有滚动条。如果它不为空，则有一个滚动条。

# php - 在 MySQL 插入之前更新数组？

> ID：886773
> 
> 赞同：0
> 
> 时间：2009-05-20T08:16:55.917
> 
> 标签：php, xml, arrays

我通过 php://input 接收 XML，在使用 simpleXML 将元素分解为变量之后，我想要做的是附加一个数组，或者每 30 秒左右创建一个变量数组。

原因是这个脚本将获得常规输入，而不是执行大量的 mySQL 更新或插入，我认为它可能会更好地提高效率。

所以，如果有人有时间，有几个问题。

1) 有没有办法检查 php://input 上的新输入。2）有没有比睡眠功能更好的方法来做这个重复检查？3）如何使用这些更新变量附加/添加到数组中？

我还没有走得太远，所以代码没有用，但如果你能原谅我的简单性： -

```
 function input() {

    $xml = new SimpleXMLElement($input);

    $session_id = $xml->session_id;
    $ip = $xml->ip;
    $browser = $xml->browser;

    store($session_id, $ip, $browser);
    }

function store() {
    $session_id = array();
    $ip = array();
    $browser = array();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T09:43:03.200

如果我理解正确，您似乎正在尝试将 PHP 用于长期运行的有状态程序。我相信您知道以下几点： PHP 程序的运行时间通常不会超过几毫秒，对于典型的 Web 应用程序最多只有几秒钟。每次从 PHP 处理程序请求资源时，都会重新开始解析，并且没有保留上次执行的程序状态。作为一个无状态的环境，由你来维护状态。出于这个原因，PHP 不是用来处理随时间变化的输入或保持状态。

话虽这么说，追加到数组的最简单方法是以下：

```
$myarray[] = "newvalue"; 
```

或者

```
$myarray['newkey'] = "newvalue"; 
```

要处理流：

```
while (!feof($handle)){ $data = fgets($handle, 4096); } 
```

# sql-server - 如何检查存储过程的完整性

> ID：886779
> 
> 赞同：3
> 
> 时间：2009-05-20T08:18:00.140
> 
> 标签：sql-server, stored-procedures, integrity

我们有一个包含大量存储过程的大型数据库。现在我们正在更新我们的数据库，但一些存储过程仍然使用旧结构。我们发现他们中的大多数都使用“sp_depends”，但有些 sp 漏掉了。

我想知道是否没有办法检查所有存储过程。如果他们要求一个不再存在的列，你会得到一个错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:31:34.747

我认为，如果您想 100% 确定，那么您可能希望使用专为此目的而设计的软件。例如，RedGate 有一个名为 SQL Dependency Tracker 的产品。

[http://www.red-gate.com/products/SQL_Dependency_tracker/index.htm](http://www.red-gate.com/products/SQL_Dependency_tracker/index.htm)

我建议下载免费试用版并测试功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-29T15:59:41.157

您可以将表、存储过程和函数输入到项目中，然后检查“项目中的对象”窗格中显示的错误。

# c - C 套接字引发错误代码 22，EINVAL - 无效参数

> ID：886782
> 
> 赞同：8
> 
> 时间：2009-05-20T08:18:45.880
> 
> 标签：c, sockets

下面的示例代码用作服务器进程。但是当我添加该行时

```
pid_t childpid; 
```

以下

```
struct sockaddr_in servaddr, clientaddr; 
```

它失败了

```
connectfd = accept(listenfd, (struct sockaddr *) &clientaddr, &clientaddrlen); 
```

错误代码 22，EINVAL - 无效参数。我是 C 中套接字的新手，我无法理解这个问题，你能帮我解决这个问题吗？

谢谢。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h> 
#include <linux/in.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

extern int errno;

int main()
{
    int clientaddrlen, listenfd, connectfd, bytes_rcvd, listen_queue_size=1;
    short int port_no = 2000;
    char buffer[1000];
    struct sockaddr_in servaddr, clientaddr;

    printf("Server running at port #%d\n", port_no);

    // Create server socket.
    if ( (listenfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    {
        fprintf(stderr, "Cannot create server socket! errno=%d \n", errno);
        exit(-1);
    }
    printf("Server socket created\n");

    // Bind (attach) this process to the server socket.
    servaddr.sin_family = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servaddr.sin_port = htons(port_no);
    bind(listenfd, (struct sockaddr *) &servaddr, sizeof(servaddr));
    printf("Server socket is bound to port #%d\n", port_no);

    // Turn 'listenfd' to a listening socket. Listen queue size is 1.
    listen(listenfd,listen_queue_size);
    printf("Server listening with a queue of size %d. \n", listen_queue_size);

    // Wait for connection(s) from client(s).
    while (1)
    {
        connectfd = accept(listenfd, (struct sockaddr *) &clientaddr, &clientaddrlen);
        printf("A client has connected\n");
        if (recv(connectfd, buffer, sizeof(buffer), 0 ) > 0)
            printf("Received message: %s\n", buffer);
        close(connectfd);
        printf("Server closed connection to client\n");
    }

    close(listenfd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-20T08:38:55.200

我没有看到你在哪里初始化`clientaddrlen`。这是一个输入/输出参数。您必须说明`accept()`该地址的缓冲区有多大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T08:32:45.243

添加未使用的变量声明在正常情况下应该不会导致接受失败。[选择不坏](http://lingpipe-blog.com/2007/06/27/select-isnt-broken-or-horses-not-zebras/)。

您发布的代码不能像您描述的那样运行；你没有检查accept()的返回值，那么你怎么知道它失败了？请记住，除非发生错误，否则Unix 系统/libc 调用通常**不会设置 errno ，因此除非 accept() 返回 -1，否则****errno 可以包含任何内容**。

那就是说；如果您已验证 accept() 失败，并且 errno 设置为 EINVAL，则根据手册页有两种可能性：

*   套接字未在侦听连接。（你检查过listen()的返回码吗？）
*   Addrlen 无效（即负数）

编辑：最重要的是：发布一个**完整**的示例来**编译**和演示您的问题。否则我们只能猜测问题出在哪里。

# sql - 如何使用 SQL 查询更改表名？

> ID：886786
> 
> 赞同：124
> 
> 时间：2009-05-20T08:19:58.687
> 
> 标签：sql, sql-server, sql-server-2005

如何使用查询语句更改表名？

我使用了以下语法，但在 SQL Server 2005 中找不到 rename 关键字。

```
Alter table Stu_Table rename to Stu_Table_10 
```

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2009-05-20T08:21:44.597

使用 sp_rename：

```
EXEC sp_rename 'Stu_Table', 'Stu_Table_10' 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/ms188351%28SQL.90%29.aspx)上找到有关此过程的文档。

如果需要包含模式名称，则只能包含在第一个参数中（即不能用于将表从一个模式移动到另一个模式）。因此，例如，这是有效的：

```
EXEC sp_rename 'myschema.Stu_Table', 'Stu_Table_10' 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2009-05-20T08:21:59.150

在`MySQL`：-

```
RENAME TABLE `Stu Table` TO `Stu Table_10` 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-08-02T06:11:31.013

在 Postgress SQL 中：

```
Alter table student rename to student_details; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2010-10-29T10:44:23.710

请在 SQL Server 2005 上使用它：

```
sp_rename old_table_name , new_table_name 
```

它会给你：

> 警告：更改对象名称的任何部分都可能破坏脚本和存储过程。

但是您的表名将被更改。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-10-05T11:10:48.997

在 MySQL 中：

将表重命名`template_function`为`business_function`；

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-10T21:51:38.950

ALTER TABLE table_name 重命名为 new_table_name；也适用于 MySQL。

[![此查询在 MySQL 服务器中运行的屏幕截图](https://i.stack.imgur.com/2ND5y.png)](https://i.stack.imgur.com/2ND5y.png)

或者：将表重命名`table_name`为`new_table_name`； [![此查询在 MySQL 服务器中运行的屏幕截图](https://i.stack.imgur.com/nBZL1.png)](https://i.stack.imgur.com/nBZL1.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-15T01:46:55.360

最新 MySQL 版本的 Syntex 已更改。

因此，请尝试在表名中**不使用 SINGLE QUOTES**的RENAME 命令。

`RENAME TABLE old_name_of_table TO new_name_of_table;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-07T09:20:27.287

```
RENAME TABLE old_table_name TO new_table_name; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-09-13T06:28:32.137

执行这个命令

```
sp_rename 'Employee','EData' 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-07-08T10:02:04.813

重命名表名：

```
RENAME TABLE old_tableName TO new_tableName; 
```

例如：

```
RENAME TABLE company_name TO company_master; 
```

# c# - 将 ModalPopupExtender 放在固定位置

> ID：886795
> 
> 赞同：1
> 
> 时间：2009-05-20T08:21:41.727
> 
> 标签：c#, asp.net, web-applications, ajaxcontroltoolkit, modalpopupextender

我有一系列用于在 ASP.NET 2.0 页面上实现弹出对话框的 ModalPopupExtenders。

当它们弹出时，使用 X 和 Y 坐标使用构造函数指定它们出现的位置相当容易，但我不确定如何处理窗口大小的变化，这些变化会改变它们在笛卡尔空间中的位置。我需要它们相对于页面上的其他一些元素出现。

我已经尝试在 IE 中连接 onresize javascript 函数，但是每当 div 改变大小时，它就会被破坏并触发（确实有问题，因为我在 UI 中有很多 CollapsiblePanelExtenders。

有人做过这个并且有任何建议我可以如何让它工作吗？

编辑：此代码无止境地捕获调整大小事件... [http://blog.stchur.com/2006/09/06/the-ie-resize-bug-revisited/](http://blog.stchur.com/2006/09/06/the-ie-resize-bug-revisited/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T08:33:23.990

我已经想出了如何做到这一点。

在通过从 DOM 中获取已知控件的 x + y 坐标来确定将它们放置在何处之后，我使用 onClickClick 来显示模式弹出窗口。调整大小后（来自[http://blog.stchur.com/2006/09/06/the-ie-resize-bug-revisited/](http://blog.stchur.com/2006/09/06/the-ie-resize-bug-revisited/)）我决定隐藏弹出窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T05:49:21.703

`ModalPopupExtender`有一个`RepositionMode`为此目的而调用的属性

# mysql - 你如何在 OS X 上使用 MySQL InnoDB 表？

> ID：886798
> 
> 赞同：-1
> 
> 时间：2009-05-20T08:21:49.230
> 
> 标签：mysql, ruby-on-rails, innodb

由于 my.cnf 设置问题，我在 OS X 上使用 InnoDB MySQL 5.0 时遇到了麻烦。列出陷阱以防它帮助任何人：

如果 InnoDB 被禁用，请检查错误日志（hostname.err，在数据目录中）。我有一个空设置，我改变了：

```
 innodb_data_file_path = ibdata1:10M:autoextend 
```

希望这可以帮助某人。我正在运行一个 Rails 应用程序并在我的会话表中出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-07-24T14:23:38.997

它实际上不应该是必需的。InnoDB 会自动在 Mac OS X 上的 /usr/local/mysql/data 中创建两个事务日志文件和 ibdata1。

# c# - Linq2SQL 检查项目是否为空

> ID：886801
> 
> 赞同：0
> 
> 时间：2009-05-20T08:22:45.123
> 
> 标签：c#, linq-to-sql

foreach (var 事件 in new DataAccess.IncidentRepository().GetItems().Where( i => (startDate == null || i.IncidentDate >= startDate) && (endDate == null || i.IncidentDate <= endDate) && (shiftId == null || i.ShiftId == shiftId) && (processAreaId == null || i.ProcessAreaId == processAreaId) && (plantId == null || i.PlantId == plantId)))

如果是，有没有办法我`i.PlantId == plantId`不能被添加？`plantId``null`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:24:24.527

```
var incident in new DataAccess.IncidentRepository().GetItems().Where(
                    i => i.IncidentDate >= startDate 
                    && i.IncidentDate <= endDate 
                    && i.ShiftId == shiftId 
                    && i.ProcessAreaId == processAreaId
                    && (plantId == null || i.PlantId == plantId))) 
```

或者，您可以：

```
var incidents = new DataAccess.IncidentRepository().GetItems().Where(
                    i => i.IncidentDate >= startDate 
                    && i.IncidentDate <= endDate 
                    && i.ShiftId == shiftId 
                    && i.ProcessAreaId == processAreaId));

if (plantId != null)
    incidents = incidents.Where(i => i.PlantId == plantId);

foreach (var incident in incidents) {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T08:35:33.867

```
var incident in new DataAccess.IncidentRepository().GetItems().Where(
                    i => i.IncidentDate >= startDate 
                    && i.IncidentDate <= endDate 
                    && i.ShiftId == shiftId 
                    && i.ProcessAreaId == processAreaId
                    && object.Equals(i.PlantId, plantId))) 
```

# wcf - 取消从 WCF 服务器到客户端的流请求

> ID：886803
> 
> 赞同：1
> 
> 时间：2009-05-20T08:23:23.873
> 
> 标签：wcf, asynchronous, streaming, chunking, chunks

我在这里发布了有关流请求的信息
[wcf-chunk-data-with-stream]：[带有流的 WCF 块数据](https://stackoverflow.com/questions/853448/wcf-chunk-data-with-stream)
我解决了该任务，但是现在当我在客户端部分服务器中关闭请求时，继续发送数据。是否可以取消从 WCF 服务器到客户端的流请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T19:36:07.027

如果你想取消，你可以中止而不是关闭代理。确保在服务器端处理异常。

我通常会做类似的事情：

```
 serviceClient.Abort(); 
```

# linux - linux进程的内核堆栈

> ID：886807
> 
> 赞同：22
> 
> 时间：2009-05-20T08:24:45.603
> 
> 标签：linux, kernel

所有进程的内核堆栈是共享的还是每个进程都有一个单独的内核堆栈？如果每个进程是分开的，这个堆栈指针存储在哪里？在 task_struct 中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-20T08:44:53.177

只有一个常见的内核内存。其中每个进程都有自己的 task_struct + 内核堆栈（默认为 8K）。

在上下文切换中，旧堆栈指针保存在某处，实际堆栈指针指向将要运行的新进程的堆栈顶部（或底部，取决于硬件架构）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-20T08:27:09.827

[这篇旧文章](http://www.linuxjournal.com/article/3814)说每个进程都有自己的内核堆栈。请参阅有关为什么这似乎是一个非常好的设计的评论。

我尝试[阅读当前源代码](http://lxr.linux.no/linux+v2.6.29/include/linux/sched.h#L1114)以确保，但由于内核堆栈是“隐式”的，它在`task_struct`. 这在文章中有所提及。

编辑此答案以吸收评论中的智慧。谢谢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-11T16:42:55.757

Robert Love 的《Linux kernel Development》一书对进程内核栈有很好的解释。

是的，每个进程都有自己的内核堆栈，如果我没记错的话，它的指针存储在 thread_info 结构中。但我不太确定，并且 struct task_struct 存储在进程内核堆栈的开头或结尾，具体取决于 CPU 架构。

干杯。卡洛斯·迈奥利诺

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-28T08:08:29.757

我认为每个进程都有自己的内核模式堆栈。驱动程序在内核模式下执行，在执行驱动程序例程时有时会阻塞进程。并且操作系统可以安排另一个进程运行。计划的进程可以再次调用驱动程序。如果内核堆栈是共享的，2 个进程正在使用内核堆栈，事情就会混淆。这个问题我困惑了很久。起初我认为内核堆栈是共享的，有些书这么说。在我阅读了 Linux 内核开发，并看到了一些驱动代码之后，我开始认为内核堆栈是不共享的。

# html - 边框约 100% 身体高度和宽度（HTML 4.01 Strict）

> ID：886809
> 
> 赞同：21
> 
> 时间：2009-05-20T08:25:31.280
> 
> 标签：html, css, internet-explorer

好吧，这让我现在快疯了。

我想在我的文档周围有一个边框。它应该很好地围绕整个窗口/视口。所以我定义：

```
body {
  border: 1px solid red;
} 
```

当我的文档处于怪癖模式时，这可以正常工作。至少在 IE 中，这是我的主要目标。红色边框出现在我页面的最边缘，显然是因为预定义的 CSS`body`并`html`设置为填充屏幕。

当通过设置 HTML 4.01 严格的 DOCTYPE 进入标准模式`body`并`html`折叠到内容的*真实*（较小）大小时，边框会直接穿过屏幕中间。所以我定义：

```
body, html {
  padding: 0px;
  margin: 0px;
  border: 0px none;
  width: 100%;
  height: 100%;
}

body {
  border: 1px solid red;
} 
```

我得到了——滚动条，正好滚动*一个像素*来显示底部/右侧边框。但是，我希望该边框立即可见。

有没有什么废话（比如“height: 99.9%;”、“overflow: hidden;”或“switch back to quirks mode”）的方法来获得 100% 的边框，而没有不必要的滚动条？仅限 IE 很好，当然，跨浏览器会更好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-06-29T12:12:29.837

正如 SpliFF 已经提到的，问题是因为默认 (W3C)[框模型](http://www.quirksmode.org/css/box.html)是“内容框”，这导致边框在`width`and之外`height`。但是您希望它们在您指定的 100% 宽度和高度内。一种解决方法是选择边框框模型，但在 IE 6 和 7 中，如果不恢复到 quirks 模式，则无法执行此操作。

另一个解决方案也适用于 IE 7。只需将`html`和设置`body`为 100% 高度并`overflow`摆脱`hidden`窗口的滚动条。然后，您需要插入一个绝对定位的包装器 div，它获取红色边框和所有内容，将所有四个[框偏移属性](http://www.w3.org/TR/CSS2/visuren.html#position-props)设置为`0`（因此边框粘在视口的边缘）和（`overflow`将`auto`滚动条放在包装器 div 内） .

只有一个缺点：IE 6 不支持同时设置`left` *and* `right`和 both `top` *and* `bottom`。唯一的解决方法是使用[CSS 表达式](http://msdn.microsoft.com/en-us/library/ms537634%28VS.85%29.aspx)（在条件注释中）将包装器的宽度和高度显式设置为视口的大小，减去边框的宽度。

为了更容易看到效果，在下面的示例中，我将边框宽度扩大到 5 个像素：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
  <title>Border around content</title>
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    #wrapper {
      position: absolute;
      overflow: auto;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      border: 5px solid red;
    }
  </style>
  <!--[if IE 6]>
  <style type="text/css">
    #wrapper {
      width: expression((m=document.documentElement.clientWidth-10)+'px');
      height: expression((m=document.documentElement.clientHeight-10)+'px');
    }
  </style>
  <![endif]-->
</head>
<body>
  <div id="wrapper">
    <!-- just a large div to get scrollbars -->
    <div style="width: 9999px; height: 9999px; background: #ddd"></div>
  </div>
</body>
</html> 
```

**PS：**我只是看到你不喜欢`overflow: hidden`，嗯...

* * *

**更新：**我设法通过使用四个粘在视口边缘的 div 来伪造边框来绕过使用`overflow: hidden`（你不能只用一个全尺寸的 div 覆盖整个视口，因为它下面的所有元素都无法访问更多）。这不是一个好的解决方案，但至少正常的滚动条保持在原来的位置。我无法让 IE 6 使用 CSS 表达式模拟固定定位（右侧和底部 div 出现问题），但无论如何它看起来很可怕，因为这些表达式[非常昂贵](http://developer.yahoo.net/blog/archives/2007/07/high_performanc_6.html)并且渲染变得非常缓慢。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
  <title>Border around content</title>
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }

    #border-t, #border-b, #border-l, #border-r {
      position: fixed;
      background: red;
      z-index: 9999;
    }

    #border-t {
      left: 0;
      right: 0;
      top: 0;
      height: 5px;
    }

    #border-b {
      left: 0;
      right: 0;
      bottom: 0;
      height: 5px;
    }

    #border-l {
      left: 0;
      top: 0;
      bottom: 0;
      width: 5px;
    }

    #border-r {
      right: 0;
      top: 0;
      bottom: 0;
      width: 5px;
    }
  </style>
</head>
<body>
  <!-- just a large div to get scrollbars -->
  <div style="width: 9999px; height: 9999px; background: #ddd"></div>
  <div id="border-t"></div><div id="border-b"></div>
  <div id="border-l"></div><div id="border-r"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-21T15:29:43.463

你会喜欢这个的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<style>
html {
    height: 100%;
    width: 100%;
    display: table;
}
body {
    display: table-row;
}
#wrapper {
    display: table-cell;
    border: 5px solid red;
}
</style>
</head>

<body>
    <div id="wrapper"></div>
</body>
</html> 
```

[http://www.test.dev.arc.net.au/100-percent-border.html](http://www.test.dev.arc.net.au/100-percent-border.html)

我认为，即使在标准模式下，表格也会保留很多“古怪”的行为，它们可能是解决方案。不过，将 HTML 元素转换为表格非常有趣。

在将其标记为在 IE6 中不工作之前，请考虑这是一个非常微不足道的问题。重点是使用表格绘制算法是解决方案，纯CSS方案也是可以的：

```
<table class="outer"><tr><td class="inner"> ...page content... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T08:35:17.580

在 CSS3 为我们提供内部边框和框模型切换之前，您需要两个 div。第一个提供 100% 高度，第二个提供边框。否则边框在 100% 高度之外（即 1px+100%+1px）

顺便提一句。在进入“仅限 IE”之前，您应该收集一些统计信息。IE 没有它曾经拥有的市场份额。10 - 30% 的用户可能使用其他浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T08:57:17.207

这是一个仅使用 html 和 body 元素的简单解决方案（不需要嵌套的 div）。它利用了 HTML 元素的特殊行为（它不能有外边框，因此必须缩小才能显示）。

```
<html>
<head>
<style>
html {padding:0; margin:0; border:5px solid red;}
body {height:100%; padding:0; margin:0; border:0;}
</style>
</head>

<body>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-29T08:19:21.060

它也有点丑，但给身体

```
position:relative;
top:-1px;
left:-1px; 
```

为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T08:43:06.237

尝试为 html 元素设置边框。body 元素只有它需要的高度，但据我所知， html 元素占据了整个空间（这也是你应该设置背景的地方）。

我不确定边框的外观，我通常只设置背景。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T08:47:35.043

边框超出 100% 大小。尝试`padding: -1px`或`margin: -1px`。

# iphone - NSURLConnection 运行多次

> ID：886810
> 
> 赞同：7
> 
> 时间：2009-05-20T08:25:57.147
> 
> 标签：iphone, nsurlconnection

我每 5 秒与服务器异步连接一次。URL 是相同的，但 POST-body 每次都会更改。现在我每次都从头开始创建 NSURL、NSURLRequest 和 NSURLConnection。

我认为设置一次连接并进一步使用它会更有效。我是新手，不确定这是否可能。没有可变的 NSURLConnection，但可能需要创建 NSURLConnection，例如：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: url];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

并更改 NSMutableURLRequest POST-data 以向服务器发送另一个请求。哪种方式是正确的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T14:04:28.913

我假设您关心的是创建 HTTP 连接的开销。NSURLConnection 足够聪明，可以使用 HTTP/1.1 和重用现有连接为您处理这个问题。我上次检查时它没有使用流水线，但为了您的目的，连接重用应该就足够了。我确实鼓励您为此安装网络嗅探器，并确保它按您希望的方式工作。

创建对象本身的成本大约是每 5 秒一次，您不应该尝试优化它（当然您应该重用 NSURL）。打开与服务器的连接很昂贵，尤其是在 iPhone 上。

如果你发现你真的需要流水线，很遗憾你将不得不自己动手。我听说 CFHTTPStream 可以做到这一点，但我没有看到很多证据。CocoaAsyncSocket 是您无需编写低级代码即可对套接字进行低级访问的最佳选择。

由于蜂窝网络上的延迟可能非常糟糕，因此您的连接可能需要超过 5 秒才能完成。请确保在开始下一个连接之前完成一个连接，否则您将开始建立越来越多的开放连接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T17:12:21.860

只是为了澄清一下，NSURLConnection 将重用现有的套接字，但仅在相对较短的时间范围内（12 秒）。如果你发送一个请求，得到一个响应，并在 12 秒内发送一个后续请求，第二个请求将在同一个套接字上发出。否则客户端将关闭套接字。已向 Apple 提交了一个错误以增加此计时器或使其可配置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-06T07:47:59.507

@Rob Napier @Eric Nelson 正如您所提到的：“NSURLConnection 足够聪明，可以使用 HTTP/1.1 和重用现有连接为您处理这个问题”。但是，我在任何 Apple 的文档中都找不到这样的描述。

为了清楚起见，我编写了一些代码来测试它：

```
- (IBAction)onClickSend:(id)sender {
    [self sendOneRequest];
}

-(void)sendOneRequest {

    NSURL *url = [NSURL URLWithString:@"http://192.168.1.100:1234"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request addValue:[Base64 encodeFromString:kValueVersion] forHTTPHeaderField:kKeyVersion];
    [request addValue:[Base64 encodeFromString:kValueDataTypeCmd] forHTTPHeaderField:kKeyDataType];
    [request addValue:[Base64 encodeFromString:@"Test"] forHTTPHeaderField:kKeyCmdName];
    [request addValue:[Base64 encodeFromString:@"Test"] forHTTPHeaderField:kKeyDeviceName];
    [request addValue:[Base64 encodeFromString:@"xxdafadfadfa"] forHTTPHeaderField:kKeyDTLCookies];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];
} 
```

然后，我使用 "(tcp.flags.syn==1 ) || (tcp.flags == 0x0010 && tcp.seq==1 && tcp 启动 Wireshark 以捕获服务器 (192.168.1.xxx) 上的包.ack==1)" 过滤 tcp 3 向握手。不幸的是，我可以看到每次调用“sendOneRequest”的 3 次握手。这意味着， NSURLConnection 似乎没有重用现有的连接。有人可以指出我的代码有什么问题以及如何通过 NSURLConnection 通过一个套接字连接发送多个请求吗？

我还尝试了同步方式发送请求：

```
-(void)sendOneRequest {
    NSURL *url = [NSURL URLWithString:@"http://192.168.1.100:1234"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request addValue:[Base64 encodeFromString:kValueVersion] forHTTPHeaderField:kKeyVersion];
    [request addValue:[Base64 encodeFromString:kValueDataTypeCmd] forHTTPHeaderField:kKeyDataType];
    [request addValue:[Base64 encodeFromString:@"Test"] forHTTPHeaderField:kKeyCmdName];
    [request addValue:[Base64 encodeFromString:@"Test"] forHTTPHeaderField:kKeyDeviceName];
    [request addValue:[Base64 encodeFromString:@"xxdafadfadfa"] forHTTPHeaderField:kKeyDTLCookies];

    [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    sleep(1);

    [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    sleep(1);

    [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

} 
```

结果是一样的。

=======更新=============================

最后，我找到了我的测试与 Rob 和 Eric 所说的不同的原因。简而言之，Rob 和 Eric 是正确的。并且 NSURLConnection 使用“keep-alive”作为使用 HTTP/1.1 的默认值，并重用现有的套接字连接，但仅适用于相对较短的时间范围。

然而，NSURLConnection 对于“分块传输编码”（即没有内容长度）存在一些问题。

在我的测试中，服务器端发送一个没有内容长度和响应数据的响应，它是分块响应，NSURLConnection 将关闭连接，因此每个 http 帖子都会发生 3 次握手。

我更改了我的服务器代码，将响应长度设置为 0，并且行为正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T11:21:21.503

制作一个返回请求的方法并执行

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:[self requestMethod] delegate:self]; 
```

?

# c# - 为什么 .net 在引发 KeyNotFound 异常时不向我们提供密钥（我怎样才能得到它？）

> ID：886814
> 
> 赞同：4
> 
> 时间：2009-05-20T08:28:56.610
> 
> 标签：c#, .net, debugging, exception, dictionary

当您尝试访问不在字典中的键时（例如），这是您获得的堆栈跟踪：

```
 at System.ThrowHelper.ThrowKeyNotFoundException()
     at System.Collections.Generic.Dictionary`2.get_Item(TKey key)   
       .... .... (my own code stack trace) 
```

像大多数人可能做的那样，我会在这些错误发生时记录它们，并尝试找出发生了什么。

我想要的两个关键信息是这发生在哪里（堆栈跟踪对此非常有帮助），以及导致异常的关键，它不会出现在任何地方。

要么我看的不正确（KeyNotFoundException 类包含一个“Data”成员，该成员始终为空，并且“Message”字段不包含键值），或者它根本没有包含在框架中.

我无法想象.net BCL 团队中没有人认为这将是一个有用的功能。我很想知道他们为什么不包括它。有什么好的理由不这样做吗？

您如何处理这些异常？我能想到的唯一选择是在 Dictionary 上使用自定义扩展方法，该方法将包装调用，捕获异常，并使用有关密钥的其他信息重新抛出它，但这对我不拥有的代码没有帮助，改变这样的“基础”功能感觉很糟糕。

你怎么看 ？

* * *

我知道[这个问题](https://stackoverflow.com/questions/157911/in-a-net-exception-how-to-get-a-stacktrace-with-argument-values)，关于人们无法访问引发异常的方法的参数这一一般事实。我的问题特别与 KeyNotFoundException 有关。

* * *

编辑：我知道 TryGetValue 模式，当我希望我的集合可能不包含密钥时，我总是这样做。但是当它应该包含它时，我不测试，因为我更喜欢我的程序因异常而失败，以便我知道*之前*发生了一些意想不到的事情（即在应该插入密钥的时候）

我可以在我所有的字典访问中包装一个 try/catch/log 错误/重新抛出，但这会导致代码难以阅读，并且会被我所有的异常处理/记录内容弄得一团糟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T08:54:25.357

为什么你依赖（慢）异常？只需用`ContainsKey`or验证密钥是否存在`TryGetValue`？

我不知道异常不包含导致错误的字段的原因（可能是因为它应该是非通用的），但如果您认为需要它，只需将其包装起来。

```
class ParameterizedKeyNotFoundException<T> : KeyNotFoundException {
    public T InvalidKey { get; private set; }

    public ParameterizedKeyNotFoundException(T InvalidKey) {
        this.InvalidKey = InvalidKey;
    }
}

static class Program {

    static TValue Get<TKey, TValue>(this IDictionary<TKey, TValue> Dict, TKey Key) {
        TValue res;

        if (Dict.TryGetValue(Key, out res))
            return res;

        throw new ParameterizedKeyNotFoundException<TKey>(Key);
    }

    static void Main(string[] args) {

        var x = new Dictionary<string, int>();

        x.Add("foo", 42);

        try {
            Console.WriteLine(x.Get("foo"));
            Console.WriteLine(x.Get("bar"));
        }
        catch (ParameterizedKeyNotFoundException<string> e) {
            Console.WriteLine("Invalid key: {0}", e.InvalidKey);
        }

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:46:54.200

您可以改用 ContainsKey 或 TryGetValue 方法来验证字典是否包含键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T08:51:43.100

正如 darin 指出的那样，您应该在代码中真正考虑到这一点，但如果由于某种原因，这是不可能的，您可以执行以下操作。

```
public object GetObjectFromDictionary(string key)
{
    try
    {
        return MyDictionary[key];
    }
    catch (KeyNotFoundException kex)
    {
        throw new WrappedException("Failed To Find Key: " + key, kex);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T08:54:58.850

我无法真正启发您为什么没有在异常中包含密钥。正如 darin 所说，您应该始终使用 TryGetValue - 它使代码更易于阅读和维护，并且您不会得到 KeyNotFoundException（并且，当您使用它时，始终使用 TryParse 而不是 Parse，对于 int、double、DateTime ，无论如何，出于同样的原因）。

但是，一旦你得到它们：

> 您如何处理这些异常？

由于您知道异常是在哪里引发的，如果代码不是非常复杂，这允许您重现错误（启用“Break on throwed exception”，或者在英文版本中调用的任何内容，在 Debugging->Exceptions 对话框中这个异常就在那一刻中断），我通常会在几分钟内找出原因。调试器会告诉您在这种情况下的密钥是什么，然后您的工作就是找出为什么这是密钥（或者为什么密钥不在字典中），即使您通过错误报告获得了密钥名称。除非您有某种绝对所有内容都在其中的上帝字典，否则应该很容易找出问题所在。

代码中*应该没有*任何未处理的异常，所以遇到这种情况应该是很少见的，然后我再进一步调查一下就可以了。换句话说，我从来没有觉得需要从错误报告中获取密钥。

当然，好吧，如果您无法重现错误，这对您没有帮助 - 然后我通常会将日志记录代码添加到失败区域并将该版本分发给遇到错误的客户（如果它是多个客户，通常可以使用客户的数据重现错误）。

但是，我正在为其他公司开发软件，而不是收缩包装软件，因此对于您可以与客户共度的时间，情况可能会有所不同。

# windows - Windows 应用程序的安装程序

> ID：886816
> 
> 赞同：2
> 
> 时间：2009-05-20T08:29:12.023
> 
> 标签：windows, nsis

我必须为 ActiveX 组件创建一个安装文件。此 ActiveX 组件将作为 *.exe 安装程序文件下载，执行此安装程序文件将在用户的 PC 上安装所需的 ActiveX 组件。

为了创建这样的安装文件，我遇到了两个安装软件 -

*   安装屏蔽
*   NSIS（Nullsoft 脚本安装系统）

那么上述哪个选项更可取或任何其他选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-12T13:59:05.163

InstallShield 唯一要做的就是它的 IDE。事实证明，当您不需要编写一行代码时，它非常适合非常基本的安装程序。但是，当您需要创建自定义任务并使用 InstallShield 的脚本语言时，这是一种非常笨拙和不愉快的体验。

在可靠性、灵活性、速度和大小方面，NSIS 远远优于 InstallShield。我知道这是一个大胆的主张。但是你可以在这里阅读我的安装系统传奇以及是什么导致我进入 NSIS ... [http://swortham.blogspot.com/2008/02/nsis-another-gem-from-nullsoft.html](http://swortham.blogspot.com/2008/02/nsis-another-gem-from-nullsoft.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:33:40.127

在 Visual Studio 中，您还可以为使用 Windows 安装程序的 Active X 创建安装程序项目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-20T08:42:06.130

InstallShield 优于 NSIS。但是，由于 NSIS 是免费的，并且足以满足您的需求，我建议使用它。

# c - “The C Programming Language”中的这段代码是如何工作的？

> ID：886818
> 
> 赞同：1
> 
> 时间：2009-05-20T08:29:31.210
> 
> 标签：c, eof, kernighan-and-ritchie

我正在阅读“The C Programming Language (2nd ed.)”，在刚开始的时候，它有这样的例子：

```
while((c = getchar()) != EOF)
    if(c == '\n'){
        ++n1; 
```

我可以看到从文件读取时这是如何工作的，并且我理解这种语法......但这只是从控制台读取 - 当从控制台输入字符时，一个文件结尾如何发出信号？我正在使用 Windows XP...MinGW 编译器...无论如何，这本书是为具有 EOF 按钮之类的早期系统编写的吗？

## 更新

好吧，我还有一个问题，这与文件结尾在 Windows 下的工作方式有关。

如果我只是`while(getchar()!=EOF);`，那么我可以继续输入字符，直到我通过 ^Z 发出 EOF 信号。但是，我必须写一个换行符，然后按 ^Z，然后是另一个换行符……为什么它必须在自己的行上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T08:31:03.657

Windows 使用 Ctrl-Z 表示 EOF，而 UNIX 使用 Ctrl-D。请参阅[http://bytes.com/groups/c/217873-eof-windows](http://bytes.com/groups/c/217873-eof-windows)和优秀的书籍选择。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T08:30:28.133

^Z 是 EOF。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T08:40:25.917

正确答案已经给出，但典型的用法是将文件重定向到标准输出：

```
program.exe < samplefile.txt 
```

`samplefile.txt`被“写入”到标准输出并`program.exe`从标准输出读取它，直到达到 EOF。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T09:10:25.433

关于你在 ^Z 上的问题，它的行为是这样的，因为它不是一个真正的字符，它是从操作系统到 C 输入系统的信号。因此，它高度依赖于操作系统和 C 输入系统缓冲之间的交互。这是一种奇特的说法，它只是事情的工作方式，适用于 Windows 和您的特定 C 实现。

# c# - C# 中的方法组是什么？

> ID：886822
> 
> 赞同：385
> 
> 时间：2009-05-20T08:31:23.810
> 
> 标签：c#, .net, method-group

在以下情况下，我经常遇到诸如“无法从'方法组'转换为'字符串'”之类的错误：

```
var list = new List<string>();
// ... snip
list.Add(someObject.ToString); 
```

当然，最后一行有一个错字，因为我忘记了后面的调用括号`ToString`。正确的形式是：

```
var list = new List<string>();
// ... snip
list.Add(someObject.ToString()); // <- notice the parentheses 
```

但是我开始想知道什么是方法组。[Google](http://www.google.com/search?hl=ro&client=opera&rls=en&hs=yqM&num=100&newwindow=1&q=what+is+a+method+group+.net&btnG=C%C4%83utare&lr=)没有太多帮助，也没有[MSDN](http://social.msdn.microsoft.com/search/en-us/?query=method+group)。

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2009-05-20T08:35:33.787

方法组是一*组方法*（可能只是一个）的名称 - 即理论上该`ToString`方法可能有多个重载（加上任何扩展方法）：`ToString()`,`ToString(string format)`等 - 因此`ToString`它本身就是一个“方法组”。

它通常可以通过使用重载解析将方法组转换为（类型化的）委托 - 但不能转换为字符串等；这没有意义。

再次添加括号后；重载决议开始了，你已经明确地确定了一个方法调用。

* * *

## 回答 #2

> 赞同：179
> 
> 时间：2010-05-26T16:34:47.507

此外，如果您使用的是 LINQ，您显然可以执行类似`myList.Select(methodGroup)`.

因此，例如，我有：

```
private string DoSomethingToMyString(string input)
{
    // blah
} 
```

而不是像这样明确说明要使用的变量：

```
public List<string> GetStringStuff()
{
    return something.getStringsFromSomewhere.Select(str => DoSomethingToMyString(str));
} 
```

我可以省略 var 的名称：

```
public List<string> GetStringStuff()
{
    return something.getStringsFromSomewhere.Select(DoSomethingToMyString);
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-02-28T00:21:49.617

您可以将*方法组*转换为委托。

委托签名从组中选择 1 个方法。

此示例选择`ToString()`采用字符串参数的重载：

```
Func<string,string> fn = 123.ToString;
Console.WriteLine(fn("00000000")); 
```

此示例选择`ToString()`不带参数的重载：

```
Func<string> fn = 123.ToString;
Console.WriteLine(fn); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2009-05-20T08:36:15.300

您的 MSDN 搜索中的第一个结果是：

> 方法组标识要调用的一个方法或一组重载方法，从中选择要调用的特定方法

我的理解是，基本上是因为当你写的时候`someInteger.ToString`，它可能指的是：

```
Int32.ToString(IFormatProvider) 
```

或者可以参考：

```
Int32.ToString() 
```

所以称为方法组。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2009-05-20T08:36:39.603

该`ToString`函数有许多重载 - 方法组将是由该函数的所有不同重载组成的组。

# windows-mobile - 从 Web 浏览器控件访问 Cookie

> ID：886827
> 
> 赞同：1
> 
> 时间：2009-05-20T08:32:17.570
> 
> 标签：windows-mobile, compact-framework, mobile, webbrowser-control, smartphone

我有一个 Windows mobile 6 应用程序，其中包含一个 Webbrowser 控件来导航一些 Intranet 站点。是否有可能以某种方式访问​​页面设置的已知 cookie，因为它们显示在浏览器控件中？

由于紧凑的框架没有 ObjectScripting 方法，我想不出任何可以做到这一点的工作。

非常感谢您的帮助

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T17:49:36.807

没有记录的方法可以做到这一点。唯一的可能性可能是底层 activeX 控件中未记录的函数。但是，这在托管代码中是不可能的。

# android - 什么是 Android 应用程序更新问题和最佳实践？

> ID：886830
> 
> 赞同：7
> 
> 时间：2009-05-20T08:33:15.057
> 
> 标签：android

我已经在 Android 市场上发布了一个 Android 应用程序，现在有一个更新要做。

我想知道你们中是否有人已经这样做了，你们有什么经验可以分享：

*   如何管理版本冲突？
*   用数据库做什么？
*   如果它是更新，您能否显示一条带有“新功能”的消息，但它不是新安装？
*   您应该在更新之前备份旧数据吗？如何备份？
*   你有没有遇到任何麻烦，你是如何解决的？
*   更新可以是部分的（比如，只是一个补丁）？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T02:23:06.520

我只会评论我所经历的：Android 市场不会让你有包版本冲突。它检查包，如果新版本小于或等于旧版本，它将拒绝上传（它对我做了）。

所有更新都以补丁的形式呈现给用户，尽管我相信他们正在下载一个全新的包，而不仅仅是更改后的字节码。

# excel - 计数行，直到行的总和值大于一个值

> ID：886834
> 
> 赞同：-1
> 
> 时间：2009-05-20T08:34:44.320
> 
> 标签：excel

我想计算总和值不大于 X 的行数。

与此[Sum 相同，直到某一点 - MySql](https://stackoverflow.com/questions/839704/sum-until-certain-point-mysql)但只有一个 excel 公式，只有行数。使用与上述相同的示例，第一个限制应该给出值 2，第二个限制应该给出 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:25:31.363

通过添加一个额外的列很容易做到。在该列中，您将通过填写这样的公式来保持运行总计

想象您的数据在第 1 行有一个标题行，并且在 A1 到 C6 中，将其放入 D2 并填写

> =总和（$C$2:C2）

然后在E2中放这个

> =COUNTIF(D2:D6,"<500")

更改数字 500 将为您提供不同的限制。

# delphi - 如何搜索相似词

> ID：886835
> 
> 赞同：2
> 
> 时间：2009-05-20T08:34:45.460
> 
> 标签：delphi, full-text-search

我有一个记录文件，我需要制作一个程序，通过在搜索字段中输入一个词来帮助在该记录中找到任何词。记录文件包含一个单词列表，因此我需要搜索该列表以找到任何可能与我的单词相似的单词。

我正在使用德尔福 2007

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-12-13T14:24:33.747

Delphi 2007 应该在 StrUtils 中有许多字符串匹配例程，这些例程使用 Soundex 算法来查找相似的“发音”单词。根据文件的格式，您可以将其加载到 TStringList 中，然后在输入字段的 OnChange 事件处理程序中调用一个例程，该例程遍历列表并与用户的输入和列表中的每个条目执行 soundex 比较.

看`ResemblesText`、和。`SoundexCompare`_ 其中之一应该让你继续前进。`SoundexProc``SoundexSimilar`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-17T22:02:55.953

[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法可用于计算单词差异。

> Levenshtein 距离是衡量两个序列之间差异量的度量（即编辑距离）。

Internet 上有一些 Pascal 实现，例如

自由帕斯卡之友 - [http://fofpc.org/wunder/Levenshtein_Comparison](http://fofpc.org/wunder/Levenshtein_Comparison)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T08:40:28.787

使用正则表达式。

www.regular-expressions.info/delphi.html

# visual-studio-2008 - 在 Visual Studio 中使用自定义 prolog 和 epilog 代码编写裸函数

> ID：886836
> 
> 赞同：5
> 
> 时间：2009-05-20T08:35:05.207
> 
> 标签：visual-studio-2008, plugins, calling-convention, stdcall

我正在一个 dll 中编写一些插件代码，该代码由我无法控制的主机调用。

主机假定插件被导出为 __stdcall 函数。主机被告知函数的名称和它期望的参数的详细信息，并通过 LoadLibrary、GetProcAddress 和手动将参数推送到堆栈上动态地整理对它的调用。

通常插件 dll 会暴露一个常量接口。我的插件公开了一个在 dll 加载时配置的接口。为了实现这一点，我的插件公开了一组在编译 dll 时定义的标准入口点，并根据需要将它们分配给正在公开的内部功能。

每个内部函数都可以采用不同的参数，但是这会与物理入口点名称一起传递给主机。我的所有物理 dll 入口点都被定义为采用单个 void * 指针，我自己通过从第一个参数的偏移量和已传达给主机的已知参数列表中处理来自堆栈的后续参数。

主机可以使用正确的参数成功调用我的插件中的函数并且一切正常......但是，我知道a）我的函数没有像定义的那样清理堆栈作为 __stdcall 函数，它采用 4 字节指针，因此即使调用者将更多参数压入堆栈，它们也总是在末尾执行“ret 4”。b) 我无法处理不带参数的函数，因为 ret 4 会在我返回时从堆栈中弹出太多 4 个字节。

从我的插件中追踪到主机的调用代码后，我可以看到实际上 a) 没什么大不了的；主机丢失了一些堆栈空间，直到它从调度调用返回，此时它清理了清理我的垃圾的堆栈帧；然而...

我可以通过切换到 __cdecl 而根本不清理来解决 b)。我假设我可以通过切换到裸函数并编写我自己的通用参数清理代码来解决 a)。

因为我知道刚刚调用的函数使用的参数空间量，所以我希望它会像这样简单：

```
extern "C" __declspec(naked) __declspec(dllexport) void  * __stdcall EntryPoint(void *pArg1)
{                                                                                                        
   size_t argumentSpaceUsed;
   {
      void *pX = RealEntryPoint(
         reinterpret_cast<ULONG_PTR>(&pArg1), 
         argumentSpaceUsed);

      __asm
      {
         mov eax, dword ptr pX
      }
   }
   __asm
   {
      ret argumentSpaceUsed
   }
} 
```

但这不起作用，因为 ret 需要一个编译时间常数......有什么建议吗？

**更新：**

感谢罗布肯尼迪的建议，我得到了这个，这似乎工作......

```
extern "C" __declspec(naked) __declspec(dllexport) void  * __stdcall EntryPoint(void *pArg1)
{      
   __asm {                                                                                                        
      push ebp          // Set up our stack frame            
      mov ebp, esp  
      mov eax, 0x0      // Space for called func to return arg space used, init to 0            
      push eax          // Set up stack for call to real Entry point
      push esp
      lea eax, pArg1                
      push eax                      
      call RealEntryPoint   // result is left in eax, we leave it there for our caller....         
      pop ecx 
      mov esp,ebp       // remove our stack frame
      pop ebp  
      pop edx           // return address off
      add esp, ecx      // remove 'x' bytes of caller args
      push edx          // return address back on                   
      ret                        
   }
} 
```

这看起来对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-30T18:51:55.540

由于`ret`需要一个常量参数，因此您需要安排您的函数具有恒定数量的参数，但这种情况仅在您准备从函数返回时才需要。因此，就在函数结束之前，执行以下操作：

1.  将返回地址从栈顶弹出，并暂存；`ECX`是个好地方。
2.  从堆栈中删除可变数量的参数，或者通过单独弹出每个参数，或者`ESP`直接调整。
3.  将返回地址推回堆栈。
4.  `ret`与常量参数一起使用。

顺便说一句，在一般情况下，您所说的（a）问题确实是一个问题。您很幸运，调用者似乎总是使用帧指针而不是堆栈指针来引用自己的局部变量。但是，函数不需要这样做，并且不能保证未来版本的主机程序将继续以这种方式工作。编译器还可能仅在调用期间将一些寄存器值保存在堆栈中，然后期望能够再次将它们弹出。你的代码会打破这一点。

# visual-studio-2008 - 使用 Orca 从命令行编辑 msi？

> ID：886842
> 
> 赞同：20
> 
> 时间：2009-05-20T08:35:43.147
> 
> 标签：visual-studio-2008, windows-installer, icons, orca

我正在使用 Visual Studio 2008 并为我的应用程序创建了一个安装项目。该应用程序有一个高分辨率图标（适用于 Vista）。Visual Studio 中有一个错误，安装程序会创建一个带有低分辨率图标的桌面快捷方式。

我在Microsoft Connect（[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=338258](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=338258)）中记录了这个bug，终于得到了答案，就是使用Orca来编辑msi文件并替换图标. 该解决方案工作正常。

现在我想自动化这个过程，所以我可以将它包含在我的构建脚本中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2010-06-17T17:03:12.910

我为此找到的最简单的解决方案可能是在 Orca 内部创建一个新的“变换”，然后将变换应用为我的后期构建步骤的一部分。

1) 使用 ORCA 打开 MSI 文件进行编辑。2) 单击“新建转换” 3) 使用 Orca 编辑器对您的 MSI 表进行所有适用的更改。4) 单击“生成转换”，然后保存文件。5) 编辑您的构建事件以在构建后步骤中执行 msitran。像这样...

msitran -a (转换文件的路径) (MSI 文件的路径)

可以在以下位置找到有关 MSITran.exe 的更多信息... [MSITran](http://msdn.microsoft.com/en-us/library/aa370495%28VS.85%29.aspx)

一旦您的安装程序构建完成，这将自动将您的编辑应用到 MSI 文件，从而无需自定义 VBScript。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-20T08:54:44.857

您可以编写 VBS、JS（使用每个 Windows 都内置的 cscript）来修改 MSI，语法非常类似于 SQL。 [这是一个显示各种示例的 MSDN 页面。](http://msdn.microsoft.com/en-us/library/aa368562.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-05-14T10:53:32.513

我也必须这样做 - 这是我的 VBScript 文件（以防它对任何人有用）......

```
Dim msiInstaller
Dim msiDatabase
Dim msiView
Dim msiRecord

Dim pathToMsiFile
Dim pathToIconFile

If WScript.Arguments.Count <> 2 Then
    WScript.Echo "Usage:" & vbCrLf & "  " & WScript.ScriptName & " <path-to-msi> <path-to-icon>"
    WScript.Quit
End If

Dim pathToMsi, pathToIcon
pathToMsi = WScript.Arguments(0)
pathToIcon = WScript.Arguments(1)

Set msiInstaller = CreateObject("WindowsInstaller.Installer")

Set msiRecord = msiInstaller.CreateRecord(1)
msiRecord.SetStream 1, pathToIcon

Set msiDatabase = msiInstaller.OpenDatabase(pathToMsi, 1)
Set msiView = msiDatabase.OpenView("UPDATE Icon SET Data = ? WHERE Name <> ''")
msiView.Execute msiRecord

msiDatabase.Commit 
```

此脚本将 MSI 数据库中的所有快捷方式图标替换为单个图标 - 如果您需要有选择性，那么您还有更多工作要做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T08:47:56.353

您可以使用 perl 脚本来修改安装程序 msi 包。您可以为此使用[Win32 OLE](http://www.perl.com/pub/a/2005/04/21/win32ole.html)。`Win32::OLE->new`使用API打开 MSI 。打开 MSI 数据库并执行 SQL 查询以进行更新。

这个 perl 脚本可以在构建中使用。

此[链接](http://cpansearch.perl.org/src/PMAREK/Win32-MSI-DB-1.06/DB.pm)可能会帮助您编写所需的链接。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-04-28T06:51:20.403

由于您习惯使用 Orca，只需使用 Orca 将修改保存为转换文件，然后在安装项目的构建后事件中使用“msitran”应用它。
我在设置项目中使用它，它工作得很好。

# windows - 双击时如何使Windows批处理文件暂停？

> ID：886848
> 
> 赞同：9
> 
> 时间：2009-05-20T08:36:51.850
> 
> 标签：windows, batch-file

我编写了一个批处理文件来自动化一些任务。我可以从命令窗口运行它，它会运行并显示结果。如果我从资源管理器中双击它，它会立即运行并终止，所以我看不到结果。

如果我通过双击图标启动批处理文件窗口，有没有办法让批处理文件窗口保持打开状态，直到我关闭它？

当我从命令行调用批处理文件时，我不想传递 /nopause 参数或其他东西。我想要一个解决方案，我可以使用批处理文件而不必做任何特别的事情？

谢谢。

**注意**我不希望它在从命令行运行时暂停！！我可以从另一个批处理文件中调用这个批处理文件来执行大量操作。在那种情况下，我不能坐在那里继续按进入。

理想情况下，如果我可以将一些代码放入批处理文件中，这样它就可以确定它是从哪里开始的，然后酌情暂停或不暂停。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T08:40:13.997

采用：

```
cmd /K myBatch.bat 
```

作为你的捷径。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-16T11:11:03.960

我的问题是类似的 - 如果从 Windows 资源管理器调用，我希望在最后暂停，但如果在命令窗口中没有暂停。我想出了这个。在每个批处理文件的顶部，放置：

```
if "%parent%"=="" set parent=%~0
if "%console_mode%"=="" (set console_mode=1& for %%x in (%cmdcmdline%) do if /i "%%~x"=="/c" set console_mode=0) 
```

然后最后

```
if "%parent%"=="%~0" ( if "%console_mode%"=="0" pause ) 
```

它处理嵌套批处理调用，您只想在原始批处理文件的末尾暂停，而不是在嵌套批处理文件中。在嵌套批处理文件中，`%parent%`已设置为原始调用者，因此它不等于嵌套的`%~0`. 如果您有`bat1`which calls `bat2`，它将在 Explorer 中打开双击 bat2 的选项 - 在该上下文`bat2`中将在结束时暂停，而如果`bat1`calls `bat2`，则`bat2`不会在结束时暂停（只会`bat1`暂停）。

`&`语句分隔符有助于避免主要功能次要的东西的视觉混乱。如果您不喜欢它的外观，只需将每个语句放在一个新行上。

`/C`这种方法在启动命令 ( `%cmdcmdline%`)中查找参数之一。它假定您的批处理文件不使用该`/C`选项。如果您使用`/C`自己，那么您需要检查是否`%COMSPEC%`出现在`%cmdcmdline%`(use `FINDSTR`) 中。当资源管理器启动一个 bat 文件时，它`%cmdcmdline%`包括`%COMSPEC%`例如`C:\Windows\System32\cmd.exe /C double_clicked_batch_file_name`. 在命令窗口中，`%cmdcmdline%`只有`cmd.exe`它（没有路径）。我使用`CALL mybat`而不是`cmd.exe /C mybat`，但您可能必须使用现有的批处理文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-20T10:38:25.870

这是一个应该工作良好的解决方案，并考虑到批处理文件可能调用另一个批处理文件（“嵌套”）的可能性。

如果批处理文件是从“命令提示符”运行的，您可以使用 Find 来查找不应出现的“/c”：

```
echo %cmdcmdline% | find /i "/c" 
```

但是，您可以通过使用 Find 来搜索更长的字符串或批处理文件名来进行更“稳健”的测试。

如果搜索字符串中包含 (") 双引号，则“查找”命令将无法正常工作。要解决此问题，您可以使用环境变量替换来“调整”字符串，使其与 Find 配合使用：

```
set newcmdcmdline=%cmdcmdline:"=-% 
```

这通常会返回：

```
if the batch-file is run from a "Command Prompt"  
    newcmdcmdline=-C:\Windows\system32\cmd.exe-

if the batch-file is run by clicking on the the batch-file  
(or the batch-file shortcut) from "Windows Explorer"  
    newcmdcmdline=cmd /c --D:\Path\test.cmd- - 
```

然后你可以使用“查找”来测试：

```
 echo %newcmdcmdline% | find /i "cmd /c --"
or
    echo %newcmdcmdline% | find /i "cmd /c --%~dpf0%-" 
```

接下来，您需要决定是否希望“嵌套”批处理文件的行为就像您以与调用批处理文件相同的方式执行它一样，或者您是否希望嵌套批处理文件始终像执行它们一样来自“命令提示符”。

考虑一下，如果您在嵌套的批处理文件中运行，那么对此进行测试：

```
echo %newcmdcmdline% | find /i "cmd /c --%~dpf0%-" 
```

将始终失败（不匹配），因为 %newcmdcmdline% 包含最外层批处理文件的名称，而不是嵌套批处理文件的名称。

因此，第一个解决方案对于调用批处理文件和所有嵌套批处理文件的行为都是相同的。如果您不调用任何批处理文件也很完美：

在您希望进行此测试的所有批处理文件（调用和嵌套）中，添加这些行，通常靠近批处理文件的顶部（如果您愿意，可以排除回显语句）：

```
if not defined withincmd call :testshell
if %withincmd% EQU 0 echo This batch-file: %~dpf0 was executed directly (from Windows Explorer, ...).
if %withincmd% EQU 1 echo This batch-file: %~dpf0 was executed from within a Command Prompt
rem if %withincmd% EQU 0 pause 
```

然后，在每个批处理文件中的某处，添加 testshell 子函数：

```
goto :EOF
:testshell
rem "Nested" batch-files won't see this because withincmd is already defined
if not defined newcmdcmdline set newcmdcmdline=%cmdcmdline:"=-%
set withincmd=1
echo %newcmdcmdline% | find /i "cmd /c --%~dpf0%-"
if %errorlevel% EQU 0 set withincmd=0
goto :EOF 
```

您只需在最外层批处理文件的顶部对“testshell”进行一次条件调用。

在某些情况下，如果从“命令提示符”执行它与通过单击批处理文件（或批处理文件快捷方式）运行它，您可能希望只有“最外层”批处理文件的行为有所不同从“Windows 资源管理器”。因此，从“最外层”批处理文件调用的批处理文件将始终表现相同，无论它们如何运行。

为此，您有几个选择。

1）在调用另一个批处理文件之前保存“withincmd”的值，在调用的批处理文件返回后恢复“withincmd”的值。对于大多数情况，这有点涉及。

2) 在每个批处理文件中为“withincmd”使用“全局唯一”变量名。

3) 每次您需要知道当前批处理文件的运行方式时，请执行“查找”命令。

4）在进入批处理文件时增加一个变量并在批处理文件退出时减少它，然后仅在 count-variable=1 时测试批处理文件是如何运行的

方法 3 是最简单的，但缺点是如果从自​​身（如递归）或另一个批处理文件调用最外层的批处理文件，则无法正确设置测试变量（withincmd）。

以下是使用方法3的方法：

在您希望进行此测试的所有批处理文件（调用和嵌套）中，添加这些行，通常靠近批处理文件的顶部（如果您愿意，可以排除回显语句）：

```
call :testshell
if %withincmd% EQU 0 echo This batch-file: %~dpf0 was executed directly (from Windows Explorer, ...).
if %withincmd% EQU 1 echo This batch-file: %~dpf0 was executed from (or Nested) within a Command Prompt
rem if %withincmd% EQU 0 pause 
```

然后，在每个批处理文件中的某处，添加 testshell 子函数：

```
goto :EOF
:testshell
if not defined newcmdcmdline set newcmdcmdline=%cmdcmdline:"=-%
set withincmd=1
echo %newcmdcmdline% | find /i "cmd /c --%~dpf0%-"
if %errorlevel% EQU 0 set withincmd=0
goto :EOF 
```

在这种情况下，您必须在每个批处理文件的顶部调用一次“testshell”，然后在您从调用另一个批处理文件返回后再次调用（或者每次您需要知道当前的批处理文件已运行）。

以下是使用方法 4 的方法：

在您希望进行此测试的所有批处理文件（调用和嵌套）中，添加这些行，通常靠近批处理文件的顶部（如果您愿意，可以排除回显语句）：

```
if not defined nestinglevel set nestinglevel=0
set /A nestinglevel=nestinglevel+1
call :testshell
if %withincmd% EQU 0 echo This batch-file: %~dpf0 was executed directly (from Windows Explorer, ...).
if %withincmd% EQU 1 echo This batch-file: %~dpf0 was executed from (or Nested) within a Command Prompt
rem if %withincmd% EQU 0 pause 
```

然后，在每个批处理文件中的某处，添加 testshell 子函数：

```
goto :EOF
:testshell
if not defined newcmdcmdline set newcmdcmdline=%cmdcmdline:"=-%
set withincmd=1
if %nestinglevel% GEQ 2 goto :EOF
echo %newcmdcmdline% | find /i "cmd /c --%~dpf0%-"
if %errorlevel% EQU 0 set withincmd=0
goto :EOF 
```

另外，请记住在退出一个批处理文件以返回调用批处理文件时减少变量：

```
set /A nestinglevel=nestinglevel-1 
```

在这种情况下，您必须在每个批处理文件的顶部调用一次“testshell”，然后在您从调用另一个批处理文件返回后再次调用（或者每次您需要知道当前的批处理文件已运行）。

在所有情况下，测试 %withincmd% 以确定当前批处理文件的运行方式，如下所示：

```
if %withincmd% EQU 0 pause
if %withincmd% EQU 1 goto :EOF 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T08:42:28.437

在文件打印的末尾

```
pause 
```

它将等待任何键输入

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-20T08:52:37.810

您可以将参数添加到批处理调用并在批处理中处理有条件的暂停语句。因此，当从命令行或 dblclick 启动时，批处理可以暂停，当使用 /nopause 参数从其他批处理调用时不会暂停。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-20T08:41:03.043

最后在批处理文件中使用“暂停”，它将等待用户输入

高温高压

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-20T08:42:27.160

暂停命令会起作用吗？

[微软文档暂停](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/pause.mspx)

# wpf - 控制焦点样式

> ID：886853
> 
> 赞同：0
> 
> 时间：2009-05-20T08:39:45.887
> 
> 标签：wpf, wpf-controls, styles

![替代文字](https://lh5.ggpht.com/_M5W2QFQgto4/ShPATpz_zXI/AAAAAAAADzc/4oPbuX2xNhY/Login.png)

在上图中，您会注意到，表示 ComboBox 的虚线矩形已聚焦但问题是它超出了 ComboBox 的文本区域...如何将其与文本区域**WPF 样式**对齐？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:37:18.143

如果没有看到您的 ControlTemplate，很难给出更改它的最佳方法。

一种稍微笨拙的方法是将 ComboBox 上的 Focusable 设置为 False，然后将 TextBlock（或 Label）上的 Focusable 设置为 True。这应该可以让 TextBlock 在 ComboBox 应该获得焦点时获得焦点。

不过，我最好的猜测是你有一些奇怪的边距，解决它的真正方法是理顺这些边距。

# java - Java 不使用 ConvertColorOp 将 BufferedImage 的 ColorSpace 转换为 CS_GRAY

> ID：886854
> 
> 赞同：2
> 
> 时间：2009-05-20T08:39:55.370
> 
> 标签：java, bufferedimage

我知道可以使用将图像转换为 CS_GRAY

```
public static BufferedImage getGrayBufferedImage(BufferedImage image) {
    BufferedImageOp op = new ColorConvertOp(ColorSpace
            .getInstance(ColorSpace.CS_GRAY), null);
    BufferedImage sourceImgGray = op.filter(image, null);

    return sourceImgGray;
} 
```

然而，这是我整个程序的瓶颈。我需要经常在 800x600 像素的图像上执行此操作，并且平均需要大约 200-300 毫秒才能完成此操作。我知道我可以通过使用一个 for 循环来循环图像数据并立即设置它来更快地做到这一点。另一方面，上面的代码构建了一个全新的 800x600 BufferedImage，它是灰度的。我宁愿只是转换我传入的图像。

有没有人知道如何使用 for 循环并假设图像是 RGB 颜色空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-05-10T17:08:21.013

`ColorConvertOp.filter`接受两个参数。第二个参数也是 a `BufferedImage`，它将是目的地。如果您将正确的方法传递`BufferedImage`给该`filter`方法，它将使您免于创建新的`BufferedImage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-09T23:05:17.153

```
private static int grayscale(int rgb) {
   int r = rgb >> 16 & 0xff;
   int g = rgb >> 8  & 0xff;
   int b = rgb       & 0xff;
   int cmax = Math.max(Math.max(r, g),b);
   return (rgb & 0xFF000000) | (cmax << 16) | (cmax << 8) | cmax;
}
public static BufferedImage grayscale(BufferedImage bi) {
    BufferedImage bout = new BufferedImage(bi.getWidth(), bi.getHeight(), BufferedImage.TYPE_INT_ARGB);
    int[] rgbArray = new int[bi.getWidth() * bi.getHeight()];
    rgbArray = bi.getRGB(0, 0, bi.getWidth(), bi.getHeight(), rgbArray, 0, bi.getWidth());
    for (int i = 0, q = rgbArray.length; i < q; i++) {
        rgbArray[i] = grayscale(rgbArray[i]);
    }
    bout.setRGB(0, 0, bout.getWidth(), bout.getHeight(), rgbArray, 0, bout.getWidth());
    return bout;
} 
```

无论你在做什么，你都可能做错了什么。您不应该一遍又一遍地重新生成缓冲图像。但是，与其想出一个方案来简单地更新缓冲图像，或者从原始像素中获取原始像素，并且只使用每个部分中 RGB 分量的最大值的灰度。

# asp.net-mvc - 重定向到 login.aspx 后如何保留 url 中的参数

> ID：886862
> 
> 赞同：2
> 
> 时间：2009-05-20T08:40:29.003
> 
> 标签：asp.net-mvc, forms-authentication

我有以下路线：

{language}/{controller}.mvc/{action}/{id}

一旦用户选择了语言，它就会以路由值语言进行维护。

[http://localhost:4000/de/Account.mvc/Register](http://localhost:4000/de/Account.mvc/Register)

如果用户点击需要授权的页面，我会遇到问题。然后他被重定向到[http://localhost:4000/Account.mvc/Login?ReturnUrl=%2fde%2fAccount.mvc%2fProfileData](http://localhost:4000/Account.mvc/Login?ReturnUrl=%2fde%2fAccount.mvc%2fProfileData)

登录页面在 web.config 中配置，并且不允许来自路由的参数。登录后的页面没问题（[http://localhost:4000/de/Account.mvc/ProfileData](http://localhost:4000/de/Account.mvc/ProfileData)），但登录页面本身没有路由值语言。

我怎样才能解决这个问题？

**编辑**

我使用了 Darin 的答案，但必须包含原始授权过滤器（AuthorizeAttribute.cs）中的所有代码。原因记录在该文件中。它处理未经授权的用户可能从缓存中获取安全页面的情况。

这是代码中的注释：

```
 // ** IMPORTANT **
            // Since we're performing authorization at the action level, the authorization code runs
            // after the output caching module. In the worst case this could allow an authorized user
            // to cause the page to be cached, then an unauthorized user would later be served the
            // cached page. We work around this by telling proxies not to cache the sensitive page,
            // then we hook our custom authorization code into the caching mechanism so that we have
            // the final say on whether a page should be served from the cache. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T09:05:08.533

表单身份验证的问题是您不能拥有动态配置的登录 url。这正是 ASP.NET 团队设计框架的方式。有时会调用 FormsAuthentication.RedirectToLoginPage 方法，该方法只会重定向到 web.config 中的硬编码 url。

我可以看到两种可能的解决方法：

1.  不要将语言存储在 url 中，而是存储在 cookie 中
2.  如果用户未通过身份验证，则编写自定义 ActionFilter 重定向到动态构造的登录页面

这是使用自定义属性的示例：

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, Inherited = true, AllowMultiple = true)]
public class RequiresAuthenticationAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        IPrincipal user = filterContext.HttpContext.User;
        if (!user.Identity.IsAuthenticated)
        {
            filterContext.Result = new RedirectResult("CALCULATE YOUR LOGIN URL HERE FROM ROUTES");
        }
    }
} 
```

# javascript - 使用 CSS 选择器查找 DOM 元素的最佳方法

> ID：886863
> 
> 赞同：22
> 
> 时间：2009-05-20T08:40:44.730
> 
> 标签：javascript, css-selectors

在不使用库的情况下，使用 css 选择器查找 Dom 元素的最简单方法是什么？

```
function select( selector ) {
 return [ /* some magic here please :) */ ]
};

select('body')[0] // body;

select('.foo' ) // [div,td,div,a]

select('a[rel=ajax]') // [a,a,a,a] 
```

这个问题纯属学术问题。我有兴趣了解这是如何实现的以及“障碍”是什么。这个函数的预期行为是什么？（返回数组，或返回第一个 Dom 元素等）。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2010-11-10T14:15:18.190

除了自定义 hack，在最近的浏览器中，您可以使用[W3C Selectors API Level 1](http://www.w3.org/TR/selectors-api/)中定义的本地方法，即[`document.querySelector()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)和[`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)：

```
var cells = document.querySelectorAll("#score > tbody > tr > td:nth-of-type(2)"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T08:45:05.687

这些天来，在没有图书馆的情况下做这种事情是疯狂的。但是，我假设您想了解这些东西是如何工作的。我建议您查看 jQuery 或其他 javascript 库之一的源代码。

考虑到这一点，选择器函数必须包含大量 if/else/else if 或 switch case 语句，以便处理所有不同的选择器。例子：

```
function select( selector ) {
 if(selector.indexOf('.') > 0) //this might be a css class
   return document.getElementsByClassName(selector);
 else if(selector.indexOf('#') > 0) // this might be an id
   return document.getElementById(selector);
 else //this might be a tag name
   return document.getElementsByTagName(selector);
 //this is not taking all the different cases into account, but you get the idea.
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T08:50:38.297

创建选择器引擎并非易事。我建议从已经存在的东西中学习：

*   [**Sizzle**](http://sizzlejs.com/)（由 Resig 创建，用于 jQuery）
*   [**Peppy**](http://jamesdonaghue.com/static/peppy/)（由 James Donaghue 创建）
*   [**Sly**](http://digitarald.de/journal/89737433/rolling-out-sly-the-javascript-selector-engine/)（由 Harald Kirschner 创建）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T08:51:48.047

这是我使用过的一个很好的片段。它真的很小很整洁。它支持所有常见的 css 选择器。

[http://www.openjs.com/scripts/dom/css_selector/](http://www.openjs.com/scripts/dom/css_selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T08:42:19.313

不，没有内置的方式。本质上，如果您决定不使用 jQuery，您将在代码中复制它的错误版本。

# flash - 对网页上的嵌入对象使用 wmode="transparent"、"opaque" 或 "window" 之间的区别

> ID：886864
> 
> 赞同：75
> 
> 时间：2009-05-20T08:40:45.743
> 
> 标签：flash, object, embed, wmode

当嵌入带​​有`<object>`and`<embed>`标签的 Flash 对象时，有一个名为`wmode`. 似乎大多数时候，`wmode="transparent"`就像`wmode="opaque"`Flash 实际上没有任何透明颜色一样，因此要显示底部的 HTML 元素。结果，`opaque`应该比`transparent`它需要更少的透明度处理更快，但大多数时候我看到 Flash 对象嵌入`transparent`而不是`opaque`.

`opaque`是必需的，以便其他 HTML 元素不会被 Flash 对象覆盖（例如弹出额外子菜单的菜单项不会被 Flash 对象覆盖）。

顺便说一句，是否有`wmode`'s `opaque`、`transparent`和的正式文档`window`？我只能找到描述它的博客，而不是正式的文档。谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-08-02T16:03:56.360

这是一些关于不同 flash 9 wmode 设置的弱[adobe 文档。](http://kb2.adobe.com/cps/127/tn_12701.html)

[adobe bug trac](http://bugs.adobe.com/jira/browse/FP-892)中有关于 wmode transparent 的注意事项。

flash 10 的新功能是两个新的 wmode：gpu 和 direct。请参阅[有关 wmode 的 Adob​​e 知识库](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Browser_support_for_Window_Mode__wmode__values/fplayer10.1_hardware_acceleration_04.html)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-20T09:08:51.507

不透明将导致较小的系统压力，因为“透明”仍将尝试应用 alpha。您看到使用透明的原因是因为大多数网络作者不注意细节（即，只是复制粘贴他们发现的一些嵌入代码）。

顺便说一句，你对它没有记录是正确的。我见过的最好的博客是一个声称与Macromedia 开发人员讨论过它*的人的博客。*不幸的是我找不到链接。

**编辑**：我认为是这个：[http ://www.communitymx.com/content/article.cfm?cid=e5141](http://www.communitymx.com/content/article.cfm?cid=e5141)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-03-15T16:28:13.433

此外，`wmode=opaque`使用 IE 和使用 IE，Flash 获取键盘事件，但 html 页面也接收它们，因此它不能用于嵌入 Flash 游戏之类的东西。很烦人

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-10-12T18:03:04.280

Adobe KB 中有一篇关于“wmode”和其他属性关于它们对演示和性能的影响的很好的文章。

[http://kb2.adobe.com/cps/127/tn_12701.html](http://kb2.adobe.com/cps/127/tn_12701.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-05-18T19:48:36.603

一件奇怪的事情是，在 Chrome + Firefox 中，MOUSE_LEAVE 事件没有被调度为`OPAQUE`and `TRANSPARENT`。

有了`WINDOW`它可以正常工作。那个花了一些时间才发现！呜呜……

（注意：jediericb 提到[了这个错误](http://bugs.adobe.com/jira/browse/FP-892)- 类似但没有提到`MOUSE_LEAVE`）

# compiler-construction - 表达编程语言语义（AST -> ASG）

> ID：886877
> 
> 赞同：2
> 
> 时间：2009-05-20T08:43:48.483
> 
> 标签：compiler-construction, computer-science

**您是否有任何与以相同方式表达计算机语言语义**相关的信息/研究的指针，句法要求是使用编码/标记符号（例如 EBNF）形式化的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:14:03.360

关于这个问题有大量的文献。Peter Mosses 写了一本名为*Action Semantics*的书。Peter Lee 和 Andrew Appel 都做了关于从语义的正式描述生成编译器的博士论文。我认为彼得是作为一本书出来的。

科罗拉多州的 Bill Waite 小组做了一个名为 Eli 的编译器构建工具包，涵盖了从词法分析到解析再到语义的所有内容。Tom Reps 在属性语法方面的工作被应用于语言语义等。也有一些使用属性语法的欧洲工作，但我不记得缩写词或人。

涉足的好地方可能包括

*   Don Knuth 关于属性文法的原始论文
*   彼得·李的论文
*   伊莱
*   也许是 Peter Mosses 的书，虽然我似乎记得我觉得它很沉重

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T01:14:18.650

Benjamin Pierce 的书[Types and Programming Languages](http://www.cis.upenn.edu/~bcpierce/tapl/)是一个很好的起点。它使用“操作小步语义”作为编程语言的正式规范。

另一个很好的资源可能是[John Boyland 的 PHD 论文](http://www.cs.uwm.edu/~boyland/papers/descriptional-composition.html)。

他开发了一个名为 APS 的系统，该系统可以使用属性语法生成整个编译器。

# php - 我可以在 jquery $ajax 中获取更多变量而不是字符串吗？

> ID：886878
> 
> 赞同：1
> 
> 时间：2009-05-20T08:44:36.670
> 
> 标签：php, jquery, variables

我有这个脚本：

```
$.ajax({    
    url: 'submit_to_db.php',
    type: 'POST',
    data: 'name=' + name + '&email=' + email + '&comments=' + comments,

success: function(result) {
    $('#response').remove();
    $('#container').append('<p id="response">' + result + '</p>');
    $('#loading').fadeOut(500, function() {
    $(this).remove();
});

}
}); 
```

然后在我的 php 文件中，插入数据库后，我回显“评论更新”，然后附加到我的容器并慢慢消失。同时，我也想将新评论插入到容器中。所以我尝试了 echo "comment updated!&com=".$comment; 但它作为字符串而不是 2 个变量返回。\

编辑：

太奇怪了，我的 php 文件中没有定义，

$comment = $_POST['comment']

我的 js 或 php 代码有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:10:23.547

响应不包含变量。它包含文本，即您提出的请求的结果。我建议使用 JSON。

```
#in submit_to_db.php
$response = array();

if($submitted) { #if the comment was inserted successfully
  $response['status'] = 'OK';
  $response['message'] = 'Your comment was added';
  $response['comment'] = $_POST['comments'];
}
else {
  $response['status'] = 'ERROR';
  $response['error'] = 'You must enter your name'; #just an example
}
echo json_encode($response);
#would yield {"status":"OK","comment":"the comment just added"}

#in yourJsFile.js
$.ajax({    
    url: 'submit_to_db.php',
    type: 'POST',
    data: 'name=' + name + '&email=' + email + '&comments=' + comments,
    dataType: 'json',
    success: function(response) {

        if(response.status == 'OK') {
           $('#response').remove();
           $('#container').append('<p id="response">' + response.message + '</p>');
           $('#loading').fadeOut(500, function() {
             $(this).remove();
           });

           $('#comments').append('<li>' + response.comment + '</li>'); //just an example
        }
        else {
           $('#container').append('<p id="response">' + response.error + '</p>');
        }
    }
}); 
```

有关JSON 的[更多](http://www.json.org/)[信息。](http://en.wikipedia.org/wiki/JSON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T08:48:43.403

只需请求一个可以在客户端操作的 JSON 对象：它可以是一个简单的字符串、一个数组、一个复杂的对象树。

查看[$.ajax](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)请求类型；你可以在网上找到很多样本。

# c# - 等待在 C# 中移动文件之前获得文件的独占访问权限

> ID：886883
> 
> 赞同：4
> 
> 时间：2009-05-20T08:45:51.990
> 
> 标签：c#, file

我需要在处理某些文件后移动它们。另一个进程访问该文件，我不确定它何时释放它们。有什么方法可以找出文件句柄何时被释放，以便那时我可以移动它们。

我正在使用 Microsoft C# 和 .Net 框架 3.5。

干杯，哈米德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T08:57:00.297

如果您同时控制文件的生产者和消费者，则使用的旧技巧是以不同的名称创建文件，并在完成后重命名。例如，假设生产者正在创建始终名为 file_.txt 的文件，而您的消费者正在扫描以 file_ 开头的所有文件，那么生产者可以这样做： 1\. 创建名为 tmpfile_.txt 的文件 2\. 写入文件时，生产者只需将文件重命名为 file_.txt

重命名操作是原子操作，因此一旦您的消费者看到它可用，就可以安全地打开它。

当然，这个答案取决于你是否同时编写这两个程序。

HTH 德莫特。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-30T14:11:44.403

如果您可以控制这两个源，请使用命名互斥锁（跨进程工作）来控制对文件的访问，而不是在文件系统级别锁定文件。这样，您不必捕获通过尝试锁定锁定文件并在其上循环而引发的异常，这是相当不雅的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T08:53:54.937

只是不断尝试打开文件进行独占写入？（例如，将 FileShare.None 传递给 FileStream 构造函数）。一旦你打开它，你就知道没有其他人在使用它。但是，这可能不是您正在做的事情的最佳方式。

如果您在进行双向通信，请查看是否可以通过管道与其他程序通信。

# iphone - 在应用程序安装过程中将加密密钥存储在 Keychain 中

> ID：886893
> 
> 赞同：2
> 
> 时间：2009-05-20T08:49:17.817
> 
> 标签：iphone, objective-c, security, certificate, keychain

我需要我的应用程序使用客户的电话号码为我的网络服务生成唯一 ID。当然，电话号码是唯一的，但它必须是安全的。所以它可以用对称加密来实现（非对称将在以后，因为资源泄漏），但我不知道在哪里存储加密密钥。

# 1.

我不知道为什么，但在代码中将键存储为静态字段似乎不好。可能是因为从这里读取它太容易了，即使不运行应用程序。

# 2.

将密钥存储在 Keychain 中并通过请求从此处获取似乎更好。但是为了避免#1，有必要在安装过程中安装钥匙串。是否可以？怎么做？

# 3.

我不知道证书是做什么的。它们对问题有帮助吗？

# 4.

从服务器传输密钥也是一个坏主意，因为很容易嗅探它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T13:46:47.107

解决嗅探问题的方法是通过 HTTPS 为 Web 服务进行通信。NSURLConnection 很容易做到这一点，我所知道的所有 Web 服务引擎都可以毫无问题地处理 HTTPS。这将立即解决您的许多问题。

100-1000x解密瓶颈在哪台机器上？您的服务器是否太忙以至于无法进行异步解密？你应该很少在电话上这样做，以至于它应该是无关紧要的。我不是说 asym 是这里的答案。只是它的性能开销不应该是保护单个字符串的问题，解密一次。

您的服务需要短信，因此所有用户都必须提供他们的电话号码？您是在尝试自动获取电话号码，还是让用户自己输入？通过私有 API（或非私有但未记录的配置数据）自动获取电话号码并将其发送到服务器可能会违反服务条款。这是 Apple 希望保护用户免受其侵害的特定用例。您肯定需要在您的 UI 中非常清楚您正在执行此操作并获得明确的用户许可。

我个人的身份验证如下：

*   服务器发送挑战字节
*   客户端发送 UUID、日期和哈希（UUID+challenge+userPassword+obfuscationKey+date）。
*   服务器计算相同，确保日期在合法范围内（30-60 秒是好的）并验证。
*   在这一点上，我通常让服务器生成一个长的、稀疏的、随机的会话 ID，客户端可以将其用于此“会话”的剩余部分（从接下来的几分钟到下一年），而不是在每条消息中重新验证.

ObfuscationKey 是您将其硬编码到程序和服务器中的密钥，以使第三方更难创建虚假客户端。安全地确保只有您的客户端可以与您的服务器通信是不可能的，期间，*不可能。*然而，混淆密钥会有所帮助，尤其是在逆向工程更加困难的 iPhone 上。使用 UUID 也有帮助，因为与电话号码相比，第三方对它的了解要少得多。

注意那里的“userPassword”。用户应该使用只有用户知道的东西进行身份验证。UUID 和电话号码都不是这样的东西。

上面的系统，加上 HTTPS，应该很容易实现（我已经用多种语言做过很多次了），具有良好的性能，并且对于广泛的“适当”来说安全到适当的级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T08:54:29.227

我不认为你将能够通过对称加密安全地做你想做的事。使用 asym，您可以发送公钥而无需过多担心（唯一的威胁是有人用他们自己的密钥替换您的密钥）并使用私钥验证服务器上加密的唯一 ID。

# asp.net - 在基类中使用 aspx 控件

> ID：886894
> 
> 赞同：2
> 
> 时间：2009-05-20T08:49:32.900
> 
> 标签：asp.net, vb.net

我有两个非常相似的 aspx 页面，并且在后面的代码中有各种相同的功能。我想创建一个基类，类背后的代码都来自该基类。基类是否可以访问 aspx 页面上的控件。例如：

```
class base
    inherits System.Web.UI.Page
    Sub prepareScreen()
       'txtName is a text box on the aspx page
       Me.txtName.text = "George"
    end sub
end class

class codeBehind
     inherits base
     Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
          prepareScreen()
     end sub
end class 
```

可以理解的是，代码无法编译：

```
'txtName' is not a member of 'clsbase' 
```

有没有可能将两者联系在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T08:54:43.077

如果你重构你的代码会更好，这样你就不需要做这样的事情了。

一个更好的想法是，如果您在基类中创建一个虚拟方法，您可以在子页面中覆盖它，并设置文本框的值，因为您可以轻松访问文本框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:28:12.357

您需要将控件声明为基类的属性。然后在 ASP 标记中，使用 CodeFileBaseClass 属性。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/ydy4x04a.aspx)不再可用。

```
class base
    inherits System.Web.UI.Page
    Protected Property txtName() As TextBox
    Sub prepareScreen()
       'txtName is a text box on the aspx page
       Me.txtName.text = "George"
    end sub
end class

class codeBehind
     inherits base
     Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
          prepareScreen()
     end sub
end class

<%@ page CodeFileBaseClass="base" inherits="codebehind" ...  %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T08:52:34.550

您可以使用 FindControl，例如。

```
TextBox txtName=FindControl("txtName"); 
```

即使它是由后代类呈现的，它也会在呈现的页面上找到控件。尽管这在某种程度上打破了面向对象和功能/数据分离的观点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T08:54:12.800

您可以使用 ((TextBox)Page.FindControl("txtName")) 来获取文本框。要小心，因为如果您使用此基类，其他控件可能不存在

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T09:13:22.823

回应您的澄清：

您可以创建一个属性：

```
protected TextBox txtName 
{
get{return (TextBox)Page.FindControl("txtName");} 
set{Page.FindControl("txtName") = vale;}
} 
```

或创建一个虚拟属性：

```
protected virtual TextBox txtName{get;set;} 
```

在这种情况下，您必须在主类中覆盖它

```
 protected override TextBox txtName{/*same as above*/} 
```

# python - Linux 中的安全 Python 环境

> ID：886895
> 
> 赞同：2
> 
> 时间：2009-05-20T08:50:11.357
> 
> 标签：python, linux, runtime, sandbox, restriction

是否可以创建一个环境以在 Linux 下安全地运行任意 Python 脚本？这些脚本应该是从不受信任的人那里收到的，并且可能太大而无法手动检查它们。

一个非常暴力的解决方案是创建一个虚拟机并在每次启动不受信任的脚本后恢复其初始状态。（太贵了。）

我想知道是否可以限制 Python 访问文件系统和与其他程序交互等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T09:05:05.617

考虑使用 chroot 监狱。这不仅非常安全、得到很好的支持和测试，而且还适用于从 python 运行的外部应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T09:48:15.233

您可以尝试 4 件事：

*   正如您已经提到的，使用虚拟机或其他形式的虚拟化（也许 solaris 区域足够轻量级？）。如果脚本破坏了那里的操作系统，那么你不在乎。
*   使用 chroot，它将 shell 会话放入虚拟根目录，与主 OS 根目录分开。
*   使用系统跟踪。将其视为系统调用的防火墙。
*   使用建立在 systrace 之上的“监狱”，为每个监狱提供自己的进程表等。

Systrace 最近遭到入侵，因此请注意这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T09:44:35.193

您可以运行 jython 并使用 JVM 中的沙盒机制。JVM 中的沙盒功能非常强大，非常好理解，并且或多或少有据可查。需要一些时间来准确定义您想要允许的内容以及您不想允许的内容，但是您应该能够从中获得非常强大的安全性......

另一方面，jython 不是 100% 兼容 cPython ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T08:54:45.980

尝试搜索“sandboxing python”，例如：

[http://wiki.python.org/moin/SandboxedPython](http://wiki.python.org/moin/SandboxedPython)

[http://wiki.python.org/moin/How%20can%20I%20run%20an%20untrusted%20Python%20script%20safely%20(即%20Sandbox)](http://wiki.python.org/moin/How%20can%20I%20run%20an%20untrusted%20Python%20script%20safely%20(i.e.%20Sandbox))

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-03-13T14:18:06.990

你能不能以除了该目录中的脚本之外无权访问任何东西的用户身份运行吗？

# asp.net - 通过 jQuery 调用 ASP.NET 服务器端方法

> ID：886903
> 
> 赞同：35
> 
> 时间：2009-05-20T08:52:54.393
> 
> 标签：asp.net, jquery, web-services, asmx

我正在尝试通过 jQuery 从客户端调用服务器端方法。我的代码如下：

服务器端：

```
 using System.Web.Services;
    [WebMethod()]
    //[ScriptMethod()]
    public static void SendMessage(string subject, string message, string messageId, string pupilId)
    {
        //Send message
    } 
```

客户端：

```
$("#btnSendMessage").live("click", function(){
  var subject = $("#tbSubject").val();
  var message = $("#tbMessage").val();
  var messageId = $("#hdnMessageId").val();
  var pupilId = $("#hdnPupilId").val();

  $.ajax({
      type: "POST",
      url: "./MessagePopup.aspx/SendMessage",
      data: ("subject=" + subject + "&message=" + message + "&messageId=" + messageId + "&pupilId=" + pupilId),
      error: function(XMLHttpRequest, textStatus, errorThrown){
          alert(textStatus);
      },
      success: function(result){
         alert("success");
      }
   });
   return false;
}); 
```

我在服务器端 SendMessage 方法上添加了一个断点，但它从来没有命中它，但是当我运行代码时，会调用 jQuery 成功方法。是什么原因造成的？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-20T10:16:43.910

要调用 ASP.NET AJAX“ScriptServices”和页面方法，您需要使用完整的 $.ajax() 语法：

```
$.ajax({
  type: "POST",
  url: "MessagePopup.aspx/SendMessage",
  data: "{subject:'" + subject + "',message:'" + message + ",messageId:'" + messageId + "',pupilId:'" + pupilId +"'}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

有关为什么需要这样做的详细信息，请参阅此帖子：http: [//encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

编辑：扩展名不会更改为 .asmx，但仍然是 .aspx。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-20T10:11:50.677

看起来您正在尝试使用页面方法。

在这里查看[ASP.NET Ajax 中的页面方法以](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)获取帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T10:09:20.760

您应该使用 Web 服务而不是常规的 aspx 网页。网页不支持调用 web 方法，我相信您的 jQuery 请求会加载 HTML 页面。我建议你两件事：

1.  使用 Fiddler2（带有 IE）或 HttpFox（带有 Firefox）在客户端调试 AJAX 请求和响应。
2.  在服务器端使用 WCF Web 服务。在这种情况下，您可以使用[SvcConfigEditor](http://msdn.microsoft.com/en-us/library/ms732009.aspx)和[SvcTraceViewer](http://msdn.microsoft.com/en-us/library/ms732023.aspx)在服务器端配置和调试 Web 方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-27T23:03:27.420

```
$.ajax({  
        type: "POST",  
        url: "MessagePopup.aspx/SendMessage",  
        data: "{subject:'" + subject + "',message:'" + message + ",messageId:'" + messageId + "',pupilId:'" + pupilId +"'}",  
        async: true,  
        cache: false,  
        contentType: "application/json; charset=utf-8",  
        dataType: "json",  
        success: function() {},  
        error:function (xhr, ajaxOptions, thrownError){ alert(thrownError); }  
     }); 
```

如果这不起作用......并给出“语法错误：语法错误”......然后添加这个

```
<httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory,
System.Web.Extensions, Version=3.5.0.0, Culture=neutral,
PublicKeyToken=31BF3856AD364E35"/>
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory,
System.Web.Extensions, Version=3.5.0.0, Culture=neutral,
PublicKeyToken=31BF3856AD364E35"/>
            <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler,
System.Web.Extensions, Version=3.5.0.0, Culture=neutral,
PublicKeyToken=31BF3856AD364E35" validate="false"/>
        </httpHandlers>
        <httpModules>
            <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions,
Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </httpModules> 
```

Web.Config 文件之间`</compilation>`和之间`</system.web>`。

希望这会对某人有所帮助，因为我花了一段时间才弄清楚除了 jquery 函数之外，我必须在 Web.Config 中添加它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-22T23:17:00.557

这是可能适用于您的情况的代码。

```
<script type="text/javascript">
    $(document).ready(function () {

        // Add the page method call as an onclick handler for the button.
        $("#btnSubmit").click(function () {

            //get the string from the textbox
            $.ajax({

                type: "POST",
                url: "testSearch.aspx/GetMyShippingDate",
                contentType: "application/json; charset=utf-8",
                data: "{'tracking_num': '" + $("#txtTrackingNumber").val() + "'}",  
                dataType: "json",
                success: function (date) {

                    // Replace the div's content with the page method's return.
                    Success(date);

                },
                error: Failed
            });
        });
    });

     function Success(result) {  
          $("#ParcelShippingDate").html(result.d);
      }  
      function Failed(result) {  
          alert(result.status + " " + result.statusText);  
      } 
```

有一个例子一直对我有用。

这是完整的文章[http://www.webdeveloperpost.com/Articles/How-to-use-jquery-ajax-in-asp-dot-net-web-page.aspx](http://www.webdeveloperpost.com/Articles/How-to-use-jquery-ajax-in-asp-dot-net-web-page.aspx)

它适用于那些想要直接使用 jquery asp.net 方法回调的人

# c# - 同时滚动 2 个面板

> ID：886905
> 
> 赞同：5
> 
> 时间：2009-05-20T08:53:29.040
> 
> 标签：c#, .net, winforms, scroll

我有 Windows 窗体 (.net 2.0) 控件，其中包含一个 splicontainer。Splitcontainer 通常包含 2 个面板（标准的东西）。自动滚动设置为真。

我一直在努力实现诸如同步这两个面板之类的事情，因此滚动其中一个面板也会滚动第二个面板。我实现了它 - 使用 Scroll 事件（不是问题）。

但是，当我们在其中一个面板（例如文本框）上切换控件时，不会调用此事件 - 不像 msdn.microsoft.com/en-us/library/system.windows.forms 上的那样。 scrollablecontrol.scroll.aspx ("当用户通过与滚动条交互滚动客户区时，或者当用户在控件之间导航并且活动控件滚动到视图中时，会发生 Scroll 事件。".

所以，事实上，面板并没有真正同步：|

我知道这样一个事实，将焦点放在可滚动控件中包含的不可见控件称为 ScrollToControl(Control) 事件，它“使”新控件（文本框）可见。为了提供更多细节，我可以说两个面板是相同的（大小和控件）。

你将如何实现我正在寻找的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-25T03:13:32.700

这正是在[SplitContainer](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.aspx)中滚动 2 个面板所需要的。即使您正在切换到不在当前视图中的控件，它也会滚动。

```
 this.splitContainer1.Panel1.Paint += new System.Windows.Forms.PaintEventHandler(PanelPaint);
this.splitContainer1.Panel2.Paint += new System.Windows.Forms.PaintEventHandler(PanelPaint);

Point mPrevPan1Pos = new Point();
Point mPrevPan2Pos = new Point();

void PanelPaint(object sender, System.Windows.Forms.PaintEventArgs e)
{
   if (splitContainer1.Panel1.AutoScrollPosition != mPrevPan1Pos)
   {
      splitContainer1.Panel2.AutoScrollPosition = new System.Drawing.Point(-splitContainer1.Panel1.AutoScrollPosition.X, -splitContainer1.Panel1.AutoScrollPosition.Y);
      mPrevPan1Pos = splitContainer1.Panel1.AutoScrollPosition;
   }
   else if (splitContainer1.Panel2.AutoScrollPosition != mPrevPan2Pos)
   {
      splitContainer1.Panel1.AutoScrollPosition = new System.Drawing.Point(-splitContainer1.Panel2.AutoScrollPosition.X, -splitContainer1.Panel2.AutoScrollPosition.Y);
      mPrevPan2Pos = splitContainer1.Panel2.AutoScrollPosition;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T09:16:29.023

为什么不将拆分容器完全放在滚动的东西中，而不是将滚动条的东西放在拆分容器中？这样一来，它们自然地共享相同的滚动条，并且拆分容器可以尽可能宽以适应整个表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-13T00:05:29.090

我从@SwDevMan81 那里得到了答案，并用我需要让它在 VS 2012，.Net 4.5 中工作的最后一部分来完善它。

第 1 部分在我的表单类中：

```
 #region Synchronize the scrolling of the two panels in the SplitContainer.

    private Point _prevPan1Pos = new Point();
    private Point _prevPan2Pos = new Point();

    void PanelPaint(object sender, System.Windows.Forms.PaintEventArgs e)
    {
        SynchronizeSplitContainerScrollbars();
    }

    private void SynchronizeSplitContainerScrollbars()
    {
        if (splitContainer1.Panel1.AutoScrollPosition != _prevPan1Pos)
        {
            splitContainer1.Panel2.AutoScrollPosition = new System.Drawing.Point(-splitContainer1.Panel1.AutoScrollPosition.X, -splitContainer1.Panel1.AutoScrollPosition.Y);
            _prevPan1Pos = splitContainer1.Panel1.AutoScrollPosition;
        }
        else if (splitContainer1.Panel2.AutoScrollPosition != _prevPan2Pos)
        {
            splitContainer1.Panel1.AutoScrollPosition = new System.Drawing.Point(-splitContainer1.Panel2.AutoScrollPosition.X, -splitContainer1.Panel2.AutoScrollPosition.Y);
            _prevPan2Pos = splitContainer1.Panel2.AutoScrollPosition;
        } 
    }

    #endregion 
```

第 2 部分在 Form 的构造函数中。我必须为 Scroll 事件本身添加事件。

```
 // Setup so we can synchronize the scrolling of the two panels in the SplitContainer.
        splitContainer1.Panel1.Paint += PanelPaint;
        splitContainer1.Panel2.Paint += PanelPaint;
        splitContainer1.Panel1.Scroll += (obj, scrollEventArgs) => SynchronizeSplitContainerScrollbars();
        splitContainer1.Panel2.Scroll += (obj, scrollEventArgs) => SynchronizeSplitContainerScrollbars(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-19T23:21:51.660

两种自动滚动实现都不适合我，但我可以确认 Martijn 的解决方案有效并且完全同步（事件触发其他事件时没有延迟）。

将拆分容器放入您想要限制容器大小的面板中。从拆分容器中禁用两个面板上的自动滚动，并在父面板上启用它。从那里它实际上仍然对我不起作用（拆分容器比面板大，但由于某种奇怪的原因没有触发滚动条，但它可能对你来说是开箱即用的），所以下一步是适当地触发滚动条。

可能有更好的方法来做到这一点，但我通过在最大滚动深度处向面板添加标签来实现它。我的拆分容器是动态填充的（因为 UI 设计师想要一些烦人的东西）所以我在代码中动态创建了标签，但是你应该通过直接在你的设计器中放置一个类似的标签来获得相同的效果（或者将它放在设计器和只需即时更改其位置，就可以了）。

```
Label invisiLabel = new Label();
invisiLabel.Name = "scrollLabel"; //sorry for the puns
invisiLabel.Text = "";
invisiLabel.Location = new Point(5, height); //you have to work out height yourself
myParentPanel.Controls.Add(invisiLabel); 
```

注意高度，不一定像 height = splitContainer.Height 那样简单。对我来说，我必须抓住我的 splitContainer 中最低元素的位置，才能为我的标签获得准确的“高度”值。添加 20 或 30 也可以很好，这样你就可以在底部得到一点填充。

tldr; 将拆分容器放入面板中，将面板自动滚动设置为 true，在滚动面板内放置一个空标签，使其滚动到您希望它滚动到的高度。并且不要忘记为您的拆分容器提供所有锚点，以便它保留在其父面板中。

# c# - 如何找到特定的xml节点？

> ID：886906
> 
> 赞同：0
> 
> 时间：2009-05-20T08:53:34.140
> 
> 标签：c#, .net, xml

我有这个问题要找到一个特定的 xml 节点我已经在 stackoverflow 上发布了这个问题，一些好人建议使用 xpath。

我是一个 xml 新手。请我需要一个 c# 代码来找到父母、父母、父母作为（伟大的祖父母）然后是第一个孩子、最后一个孩子、最后一个孩子。代码必须向上迭代树并再次向下迭代。在线查看大量 xpath 教程。

我发现路径往往特定于已经存在的特定节点。我需要的程序不会得到任何特定的命名节点，因为在每次传递时，都会将一个新节点添加到 xml 树中。总而言之，我需要根据它远离当前节点的位置找到节点

我的意思是找到当前节点的父父节点（伟大的父节点）然后找到第一个孩子然后找到最后一个孩子最后一个孩子

keepkind of currentnode.parentnode.parentnode.parentnode.firstchild.lastchild.lastchild;

使用 xpath C#

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T09:04:56.897

假设您有一个`node`开始调用的 XmlNode 实例。然后以下代码将为您提供该节点的曾祖父母的第一个孩子的最后一个孩子的最后一个孩子：

```
XmlNode wantedNode = node.ParentNode.ParentNode.ParentNode.FirstChild.LastChild.LastChild; 
```

请注意，此代码可能会出错的地方太多了。如果任何被引用的节点碰巧为空，就会出现 NullReferenceException。因此，您需要在每个级别进行空检查：

```
XmlNode wantedNode;

if (node.ParentNode != null && node.ParentNode.ParentNode != null /* and so on through the full path */)
{
    wantedNode = node.ParentNode.ParentNode.ParentNode.FirstChild.LastChild.LastChild;
} 
```

让我们用一个更具体的例子来研究一下。假设我们有以下 Xml 文档：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <greatgrandparent>
    <grandparent>
      <parent id="1">
        <child somevalue="3"></child>
      </parent>
      <parent id="2">
        <child somevalue="4"></child>
        <child somevalue="5"></child>
      </parent>
    </grandparent>
  </greatgrandparent>
</root> 
```

如果我正确理解您的问题，如果我们从`<child somevalue="3"></child>`要导航到的节点开始`<child somevalue="5"></child>`。上面的代码示例将做到这一点。但是，如前所述，如果并非所有预期节点都存在，则很容易出现异常。

即使您说您想要 c# 代码而不是 XPath，但在这种情况下，我觉得 XPath 是要走的路。有很多方法可以解决这个问题。例如，如果节点有不同的标签名称（如在我的示例文档中），您可以这样做：

```
XmlNode wantedNode = node.SelectSingleNode("ancestor::greatgrandparent/grandparent[position()=1]/parent[position()=last()]/child[position()=last()]");
if (wantedNode != null)
{
    // the path was found
} 
```

这当然是假设它`node`不为空，而是一个有效的 XmlNode 实例。

XPath 表达式的细分：

*   祖先::greatgrandparent -> 这将定位任何名为“greatgrandparent”的节点，该节点位于层次结构中的任何位置（因此任何父节点、祖父节点等）
*   /grandparent[position()=1] -> 第一个名为“grandparent”的子节点
*   /parent[position()=last()] -> 最后一个名为“parent”的子节点
*   /child[position()=last()] -> 最后一个名为“child”的子节点

如果您想了解 XPath 轴的工作原理，请参阅[w3schools.com](http://www.w3schools.com/xpath/xpath_axes.asp)上的一些信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:10:27.867

您提出的所有问题都由[XmlNode](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx)类回答。它具有称为 的属性`ParentNode`，`FirstChild`并且`LastChild`每个属性都返回另一个`XmlNode`。

要在 XPath 中做同样的事情，您可以使用`".."`缩写来获取节点父节点，`"*[position()=1]"`或`"*[position()=last()]"`获取第一个和最后一个子节点，例如：

```
XmlNode foundNode = node.SelectSingleNode("../../../*[position()=1]/*[position()=last()]/*[position()=last()]"); 
```

（注：“..”是parent::*轴的缩写，“*”是“child::*”轴的缩写）

# ruby - Ruby 块参数名称

> ID：886911
> 
> 赞同：1
> 
> 时间：2009-05-20T08:54:36.073
> 
> 标签：ruby

有谁知道是否有办法访问在 ruby​​ 块中传递的参数的名称？

例如

```
def do_something()
  # method uses the names of the parameters passed to the block
  # in addition to their values
  # e.g. the strings "i" and "j"
end

do_something { |i, j| ... } 
```

这是我正在编写的 dsl 的要求，也是一个非常不寻常的用例。这可能使用 parsetree 之类的东西是可能的，我只是想知道是否有更简单/更厚脸皮的方法。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T18:19:31.440

这实际上是可能的，但仅限于 1.9 的主干版本：

```
->(a,b,c) {}.parameters 
```

虽然它没有发布，但很可能会包含在 Ruby 1.9.2 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:55:05.330

**更新**：看起来 Ruby 1.9 可以满足您的要求。请参阅弗洛里安的回答。

是的，Ruby 有一个很好的工具来传递命名参数：Hash。

以下是它的工作原理：

```
def do_something(params)
  params.each do |key, value|
    puts "received parameter #{key} with value #{value}"
  end
end

do_something(:i => 1, :j => 2) 
```

否则，没有办法在 Ruby 中获取传递的变量的名称。Ruby 中的变量只是对 Object 的引用，因此无法从 Object 中知道方法调用中使用了哪个引用（可能有很多引用）。

# c++ - 使用 MFC 原语为 SQLite 创建 SQL 查询

> ID：886916
> 
> 赞同：0
> 
> 时间：2009-05-20T08:55:11.407
> 
> 标签：c++, sqlite, mfc

我正在使用 SQLite 来存储我的程序状态。sqlite3_exec() 接受 SQL 查询作为字符串。所以我有很多代码通过连接大量`CString`实例来构建这样的查询，并且感觉我做错了什么。

有没有更好的方法来保持 SQLite 和 MFC 中提供的原语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T08:39:55.480

[这段出色的代码](http://sqlite3pp.googlecode.com/svn/trunk/)为 SQLite3 提供了一个很好的 C++ 包装器。它有一个非常好的绑定方法，可以从您的代码中节省很多不必要的行（在本例中为 CStrings）。一探究竟; 还有很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T10:09:00.727

我认为没有办法利用 MFC 设施以更清晰的方式访问 SQLite API。

由于 SQLite 接口是**面向 C 的**，最好使用包装 C++ 类**封装访问**，并且您可以使用**普通的 chars**和**sprintf**数组来填充此类中的动态值（尽管您可以继续使用 CStrings ...如果您发现它们更清晰）。

在工作中，我们有一个封装访问的类，使我们不必显式构建任何 sql 语句。

nhaa123 引用的示例值得 +1 票！

# sql - 如何在sql中获得前十名的结果？

> ID：886919
> 
> 赞同：-1
> 
> 时间：2009-05-20T08:56:40.283
> 
> 标签：sql, sql-server, sql-server-2005

这个delow查询给了我一些错误：

```
declare @date1 nvarchar(100) , @date2 nvarchar(100)

select @date1='2009-04-20', @date2='2009-05-20'

select top 10 t.VisitingCount , t.Page
    from (
           select  Count(Page) as VisitingCount,Page
               from scr_SecuristLog   
               where Date between @date1 and @date2  
                   and [user] in (select USERNAME             
                                      from scr_CustomerAuthorities
                                 )  
               group by Page order by [VisitingCount] desc 
         ) t 
```

错误：

ORDER BY 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP 或 FOR XML。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T08:59:17.733

我想你错过了逗号

```
select top 10 t.VisitingCount , t.Page from 
```

在**t.VisitingCount之后的上述行中**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T18:36:00.097

从派生表“t”中拉出订单

尝试这个：

```
declare @date1 nvarchar(100) , @date2 nvarchar(100)

select @date1='2009-04-20', @date2='2009-05-20'

select top 10 t.VisitingCount , t.Page
    from (
           select  Count(Page) as VisitingCount,Page
               from scr_SecuristLog   
               where Date between @date1 and @date2  
                   and [user] in (select USERNAME             
                                      from scr_CustomerAuthorities
                                 )  
               group by Page
         ) t 
     order by [VisitingCount] desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T09:19:13.077

```
declare @date1 nvarchar(100) , @date2 nvarchar(100)

select @date1='2009-04-20', @date2='2009-05-20'

select t.VisitingCount, t.Page from(
select top 10 Count(Page) as VisitingCount,Page from scr_SecuristLog   
where Date between @date1 and @date2  
and [user] in(select USERNAME             
    from scr_CustomerAuthorities )  
group by Page order by [VisitingCount] desc ) t order by t.VisitingCount desc
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T12:53:25.077

只需在您的内联视图中指定一些顺序：

声明 @date1 nvarchar(100) ，@date2 nvarchar(100)

选择@date1='2009-04-20'，@date2='2009-05-20'

选择前 10 个 t.VisitingCount ，t.Page from( 选择 Count(Page) 作为 VisitingCount，Page from scr_SecuristLog
where Date between @date1 and @date2
and [user] in(select USERNAME
from scr_CustomerAuthorities ORDER BYwhat-c​​olumn(s)-你需要 )
按 [VisitingCount] desc 按页面顺序分组 ) t

# objective-c - 从 UITextField 检索整数值到 NSInteger 变量中

> ID：886925
> 
> 赞同：2
> 
> 时间：2009-05-20T08:58:45.597
> 
> 标签：objective-c, iphone, uitextfield, nsinteger

```
UITextField *textField;
NSInteger intRollNumber; 
```

我想将值`rollNumber`作为输入`textField`并将值存储到`intRollNumber`.

我该怎么做？因为我无法将字符串转换为整数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T09:10:53.560

像这样？

```
NSString *str = [textField text]
int RollNumber = [str intValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:06:38.623

请参阅[text 属性](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW2)和[integerValue](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/integerValue)。

# .net - 具有依赖关系的 LINQ to SQL 深拷贝对象

> ID：886926
> 
> 赞同：0
> 
> 时间：2009-05-20T08:58:56.813
> 
> 标签：.net, linq-to-sql, deep-copy

我正在尝试创建一个 LINQ to SQL 对象列表，我将其添加到数据上下文中并稍后插入。当我调用 SubmitChanges() 时，虽然我收到一条错误消息，指出 WeatherForecast 对象的 Postcode 外键为空。

我似乎在调用 List.Add() 时不会对依赖对象进行深层复制。有没有办法让它做一个深拷贝？

这是我正在尝试做的一个例子。

```
function List<WeatherForecast> CreateForecast(Postcode postcode) 
{ 
   var forecasts = List<WeatherForecast>();

   var wf = new WeatherForecast() 
   { 
      ForecastDate = DateTime.Today
      , CurrentTemperature = (decimal)today.Attribute(XName.Get("temperature"))
   };
   wf.Postcode = postcode;

   forecasts.Add(wf); 

   ...
   Keep adding forecast objects into the list
   ...

   return forecasts;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T00:10:08.887

List.Add 根本不制作副本。假设 WeatherForecast 是一个引用类型，您只需存储对刚刚创建的 WeatherForecast 的引用。

问题可能是您正在使用尚未添加到数据库中的 Postcode 对象。

# asp.net-mvc - ASP.NET MVC 下拉列表

> ID：886935
> 
> 赞同：0
> 
> 时间：2009-05-20T09:00:54.097
> 
> 标签：asp.net-mvc

有没有办法让请选择项目的值是 0 或 -1？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T09:31:30.757

假设*Model.Services*包含*ServiceType*对象的列表，您可以向列表中添加一个项目，如下所示：

```
<%= 
    Html.DropDownList("ServiceId", new SelectList(
        new [] 
        {
            new ServiceType 
            {
                Id = 0,
                Name = "-- Please Select --"
            }
        }.Union(Model.Services), "Id", "Name"), 0)
%> 
```

# c# - 选择日期时间打印错误的日期

> ID：886940
> 
> 赞同：1
> 
> 时间：2009-05-20T09:04:21.110
> 
> 标签：c#, sql, silverlight, datetime

当我从 mssql2005 数据库中选择一些数据行并将它们绑定到 datagrid 时，从 db 中选择的日期无效。例如，在 db 中，我有日期形式：

2009-05-10 00:00:00.000

但是当它显示在数据网格中时，它看起来像这样：

2009 年 5 月 9 日晚上 10:00:00

所以它显示 2 小时前然后保存在 db 中。

05 - 现在是月份 :-)

我究竟做错了什么？

通过在 Sql Management Studio 中插入 sql 查询添加的 db 中的记录，因为这些记录仅用于测试。

我正在使用silverlight 3.0，ria services may preview，英语vs08，波兰MS vista home premium。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T09:10:14.967

对我来说似乎是时区问题。您是直接从数据库中选择行到您的应用程序中，还是可能通过 Web 服务从另一台机器检索它们？

作为一项基本测试，请尝试将您的 Windows 时区提前 2 小时设置，然后查看问题是否仍然存在。

# c# - 初始化基于 COM 的库的“标准”方法是什么

> ID：886942
> 
> 赞同：2
> 
> 时间：2009-05-20T09:04:28.550
> 
> 标签：c#, .net, com, vb6

我一直在研究 .NET 库。当然，.NET 有一种很好的配置工作方式，因此我可以向图书馆用户记录他们应该在 app.config 中添加的内容。

但是，我还必须将库作为 COM 对象公开，以获得旧版支持。该库的一些用户将是 VB6 应用程序，它没有 app.config 概念。

我知道我可以使用 OpenExeConfiguration 以及命名来“捏造”文件，但这会给我带来其他问题。

有没有一种通用的方法来初始化基于 COM 的库？最坏的情况是，我可以公开一个初始化方法，该方法将所有初始化参数作为单独的参数，但我担心这会使添加新的初始化参数变得困难，因为它会导致破坏 API 接口。

我想我正在考虑传递诸如键值对数组之类的东西，但是在我这样做之前，是否有一种我没有考虑的“标准”方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:22:22.797

嗯，检查你的假设。

app.config与exe中是否使用VB6无关。app.exe.config 是一个 .NET 约定。当 .NET 代码加载到 exe 中时，它会在 .config 中查找配置设置。是否使用 VB6 创建 exe 无关紧要。

例如，如果您在 .NET 中构建 COM 组件，然后将其托管在 dllhost.exe 中，您的 .NET 逻辑将从名为 dllhost.exe.config 的文件中读取其配置，该文件位于与 dllhost.exe 相同的目录中（通常是 %windir%\system32)。dllhost.exe 二进制文件不知道 .config 文件这一事实无关紧要。

除此之外，您对 init 使用键/值对的计划很好。它易于使用、灵活、可扩展。您可能想要同时执行配置文件和 Init() 方法，以允许 Init 根据需要覆盖某些内容。在许多情况下，.config 文件只能由管理员访问，并且不可更改。因此，您可能需要某种方式在 .exe.config 之外提供用户可定义的设置。

另请参阅：[如何调试具有 .NET 互操作组件的 VB6 项目？](https://stackoverflow.com/questions/180828/how-can-i-debug-a-vb6-project-that-has-a-net-interop-project-which-uses-an-app-c)

*   answers to *that* question point out that when debugging, you should use vb6.exe.config for your config file, whereas when running you need app-name.exe.config .

# javascript - 在添加到 DOM 之前是否需要进行字符串清理？

> ID：886943
> 
> 赞同：0
> 
> 时间：2009-05-20T09:04:36.507
> 
> 标签：javascript, html, dom, escaping

在我们的团队中，我们提出了在添加到 DOM 之前必须对字符串进行清理的想法。我们至少预计如果在 setAttribute 和 < 和 > 中使用双引号会很麻烦，如果添加到节点内容。

第一次测试显示了一些不同的东西。我们正在使用 innerHTML 来设置节点内容。这会自行转义所有不安全的字符。但即使 setAttribute 确实逃脱了 < 和 >

总是这样，因为我在谷歌上找不到任何东西吗？我不知道是否有浏览器会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:36:30.763

innerHTML 正在编辑元素内部的 HTML 并从中生成 DOM 节点 - 您需要根据正常规则编写 HTML（例如，您不能使用 < 字符，除非它后面跟着一个非名称字符）。不过，浏览器将执行它们通常的错误恢复。

我不明白为什么您对 innerHTML 的体验与此不同。

createTextNode、setAttribute 等直接编辑 DOM。不涉及 HTML，因此您不必处理 HTML 中具有特殊含义的字符。

# javascript - 需要：记录跨浏览器差异的资源

> ID：886947
> 
> 赞同：4
> 
> 时间：2009-05-20T09:05:20.060
> 
> 标签：javascript, dom, cross-browser

我在哪里可以获得 DOM 实现中的浏览器差异列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T09:07:27.280

查看[http://quirksmode.org/](http://quirksmode.org/)

它对我帮助很大。它还拥有丰富的经典 javascript 教程。

干杯，jrh

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:09:15.250

好的，它仅适用于 Gecko，但对于 Gecko 的特定参考，请查看

[http://developer.mozilla.org/en/gecko_dom_reference](http://developer.mozilla.org/en/gecko_dom_reference)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T09:34:50.360

我第二个 quirksmode.org。我发现它通过谷歌网站搜索最有用。

例如，假设您想查看事件的不同实现

网站：quirksmodes.org 活动

或者，如果您想知道一个浏览器在不同浏览器中的对应项，只需尝试您知道的那个

网站：quirksmode.org 相关目标

# java - 如何打破 Java 中的嵌套循环？

> ID：886955
> 
> 赞同：1975
> 
> 时间：2009-05-20T09:07:43.643
> 
> 标签：java, loops, nested-loops

我有一个这样的嵌套循环结构：

```
for (Type type : types) {
    for (Type t : types2) {
         if (some condition) {
             // Do something and break...
             break; // Breaks out of the inner loop
         }
    }
} 
```

现在我怎样才能打破这两个循环？我看过类似的问题，但没有一个特别关注 Java。我无法应用这些解决方案，因为大多数使用 goto。

我不想将内部循环放在不同的方法中。

我不想返回循环。中断时，我完成了循环块的执行。

* * *

## 回答 #1

> 赞同：2618
> 
> 时间：2009-05-20T09:11:22.983

像其他回答者一样，我肯定*更喜欢*将循环放在不同的方法中，此时您可以返回以完全停止迭代。该答案仅显示如何满足问题中的要求。

您可以将`break`标签与外部循环一起使用。例如：

```
public class Test {
    public static void main(String[] args) {
        outerloop:
        for (int i=0; i < 5; i++) {
            for (int j=0; j < 5; j++) {
                if (i * j > 6) {
                    System.out.println("Breaking");
                    break outerloop;
                }
                System.out.println(i + " " + j);
            }
        }
        System.out.println("Done");
    }
} 
```

这打印：

```
0 0
0 1
0 2
0 3
0 4
1 0
1 1
1 2
1 3
1 4
2 0
2 1
2 2
2 3
Breaking
Done 
```

* * *

## 回答 #2

> 赞同：424
> 
> 时间：2011-11-14T18:26:53.423

从技术上讲，正确的答案是标记外循环。实际上，如果您想在内部循环中的任何位置退出，那么最好将代码外部化为一个方法（如果需要，可以使用静态方法）然后调用它。

这将为可读性带来回报。

代码会变成这样：

```
private static String search(...) 
{
    for (Type type : types) {
        for (Type t : types2) {
            if (some condition) {
                // Do something and break...
                return search;
            }
        }
    }
    return null; 
} 
```

匹配已接受答案的示例：

```
 public class Test {
    public static void main(String[] args) {
        loop();
        System.out.println("Done");
    }

    public static void loop() {
        for (int i = 0; i < 5; i++) {
            for (int j = 0; j < 5; j++) {
                if (i * j > 6) {
                    System.out.println("Breaking");
                    return;
                }
                System.out.println(i + " " + j);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：230
> 
> 时间：2009-05-20T09:12:12.450

您可以在循环周围使用命名块：

```
search: {
    for (Type type : types) {
        for (Type t : types2) {
            if (some condition) {
                // Do something and break...
                break search;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：150
> 
> 时间：2011-12-07T17:52:26.387

我从不使用标签。进入这似乎是一种不好的做法。这是我要做的：

```
boolean finished = false;
for (int i = 0; i < 5 && !finished; i++) {
    for (int j = 0; j < 5; j++) {
        if (i * j > 6) {
            finished = true;
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：120
> 
> 时间：2009-05-20T09:11:56.663

您可以使用标签：

```
label1: 
for (int i = 0;;) {
    for (int g = 0;;) {
      break label1;
    }
} 
```

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2009-05-20T11:43:00.307

使用一个函数：

```
public void doSomething(List<Type> types, List<Type> types2){
  for(Type t1 : types){
    for (Type t : types2) {
      if (some condition) {
         // Do something and return...
         return;
      }
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2009-05-20T09:11:59.127

您可以使用临时变量：

```
boolean outerBreak = false;
for (Type type : types) {
   if(outerBreak) break;
    for (Type t : types2) {
         if (some condition) {
             // Do something and break...
             outerBreak = true;
             break; // Breaks out of the inner loop
         }
    }
} 
```

根据您的功能，您还可以从内部循环退出/返回：

```
for (Type type : types) {
    for (Type t : types2) {
         if (some condition) {
             // Do something and break...
             return;
         }
    }
} 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2013-12-21T22:56:34.260

如果你不喜欢`break`s 和`goto`s，你可以使用“传统”的 for 循环而不是 for-in，并带有一个额外的中止条件：

```
int a, b;
bool abort = false;
for (a = 0; a < 10 && !abort; a++) {
    for (b = 0; b < 10 && !abort; b++) {
        if (condition) {
            doSomeThing();
            abort = true;
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2012-02-05T06:04:30.153

我需要做类似的事情，但我选择不使用增强的 for 循环来做。

```
int s = type.size();
for (int i = 0; i < s; i++) {
    for (int j = 0; j < t.size(); j++) {
        if (condition) {
            // do stuff after which you want 
            // to completely break out of both loops
            s = 0; // enables the _main_ loop to terminate
            break;
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2014-08-04T17:29:32.277

我更喜欢在循环测试中添加一个明确的“退出”。它使任何不经意的读者都清楚循环可能会提前终止。

```
boolean earlyExit = false;
for(int i = 0 ; i < 10 && !earlyExit; i++) {
     for(int j = 0 ; i < 10 && !earlyExit; j++) { earlyExit = true; }
} 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2020-10-17T09:02:59.137

当您需要退出多个循环时，单独使用“break”关键字不是合适的方法。无论您的语句被多少个循环包围，您都可以退出立即循环。您可以使用带有标签的“break”！在这里，我使用了标签“abc”您可以在 Java 中的任何函数中编写如下代码

这段代码展示了如何从最外层的循环中退出

```
 abc: 
    for (int i = 0; i < 10; i++) { 
        for (int j = 0; j < 10; j++) { 
           for (int k = 0; k < 10; k++) { 
              if (k == 1){
                 break abc;
              } 
        } 
    } 
} 
```

您也可以使用 break 语句退出嵌套循环中的任何循环。

```
 for (int i = 0; i < 10; i++) { 
       abc:for (int j = 0; j < 10; j++) { 
           for (int k = 0; k < 10; k++) { 
              if (k == 1){
                 break abc;
              } 
        } 
    } 
} 
```

以下代码显示了从最内层循环退出的示例。在其他作品中，执行以下代码后，您处于“k”变量循环的外部，但仍在“j”和“i”变量的循环内。

```
 for (int i = 0; i < 10; i++) { 
        for (int j = 0; j < 10; j++) { 
           for (int k = 0; k < 10; k++) { 
              if (k == 1){
                 break;
              } 
        } 
    } 
} 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2017-07-16T10:24:26.957

Java 8[`Stream`](https://docs.oracle.com/javase/8/docs/api/?java/util/stream/Stream.html)解决方案：

```
List<Type> types1 = ...
List<Type> types2 = ...

types1.stream()
      .flatMap(type1 -> types2.stream().map(type2 -> new Type[]{type1, type2}))
      .filter(types -> /**some condition**/)
      .findFirst()
      .ifPresent(types -> /**do something**/); 
```

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2016-01-28T18:53:55.333

通常在这种情况下，它会出现在更有意义的逻辑范围内，比如说对一些有问题的迭代“for”对象进行一些搜索或操作，所以我通常使用函数式方法：

```
public Object searching(Object[] types) { // Or manipulating
    List<Object> typesReferences = new ArrayList<Object>();
    List<Object> typesReferences2 = new ArrayList<Object>();

    for (Object type : typesReferences) {
        Object o = getByCriterion(typesReferences2, type);
        if(o != null) return o;
    }
    return null;
}

private Object getByCriterion(List<Object> typesReferences2, Object criterion) {
    for (Object typeReference : typesReferences2) {
        if(typeReference.equals(criterion)) {
             // here comes other complex or specific logic || typeReference.equals(new Object())
             return typeReference;
        }
    }
    return null;
} 
```

主要缺点：

*   大约多行两倍
*   更多的计算周期消耗，这意味着从算法的角度来看它更慢
*   更多打字工作

优点：

*   由于功能粒度，关注点分离的比率更高
*   搜索/操作逻辑的可重用性和控制率更高
*   这些方法不长，因此它们更紧凑，更容易理解
*   更高的可读性

因此，它只是通过不同的方法处理此案。

基本上是向这个问题的作者提出的一个问题：您如何看待这种方法？

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2019-04-04T10:15:17.207

**带标签的break**概念用于打破Java中的嵌套循环，通过使用带标签的break，您可以在任何位置打破循环的嵌套。示例 1：

```
loop1:
 for(int i= 0; i<6; i++){
    for(int j=0; j<5; j++){
          if(i==3)
            break loop1;
        }
    } 
```

假设有 3 个循环并且您想要终止 loop3： 示例 2：

```
loop3: 
for(int i= 0; i<6; i++){
loop2:
  for(int k= 0; k<6; k++){
loop1:
    for(int j=0; j<5; j++){
          if(i==3)
            break loop3;
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2014-05-21T14:33:06.670

您可以在不使用任何标签的情况下中断所有循环：和标志。

这只是棘手的解决方案。

这里 condition1 是用于从循环 K 和 J 中中断的条件。condition2 是用于从循环 K 、 J 和 I 中中断的条件。

例如：

```
public class BreakTesting {
    public static void main(String[] args) {
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 9; j++) {
                for (int k = 0; k < 9; k++) {
                    if (condition1) {
                        System.out.println("Breaking from Loop K and J");
                        k = 9;
                        j = 9;
                    }
                    if (condition2) {
                        System.out.println("Breaking from Loop K, J and I");
                        k = 9;
                        j = 9;
                        i = 9;
                    }
                }
            }
        }
        System.out.println("End of I , J , K");
    }
} 
```

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2014-06-01T12:41:33.550

使用标签。

```
INNER:for(int j = 0; j < numbers.length; j++) {
    System.out.println("Even number: " + i + ", break  from INNER label");
    break INNER;
} 
```

参考[这篇文章](http://[http://javarevisited.blogspot.com/2012/05/break-continue-and-lablel-in-loop-java.html][1])

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2015-08-23T21:04:40.140

最好最简单的方法..

```
outerloop:
for(int i=0; i<10; i++){
    // here we can break Outer loop by 
    break outerloop;

    innerloop:
    for(int i=0; i<10; i++){
        // here we can break innerloop by 
        break innerloop;
     }
} 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2019-08-26T12:11:33.187

**演示**

```
public static void main(String[] args) {
    outer:
    while (true) {
        while (true) {
            break outer;
        }
    }
} 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2013-09-11T22:14:59.033

```
boolean broken = false; // declared outside of the loop for efficiency
for (Type type : types) {
    for (Type t : types2) {
        if (some condition) {
            broken = true;
            break;
        }
    }

    if (broken) {
        break;
    }
} 
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2014-10-10T13:57:30.213

另一种解决方案，没有例子提到（它实际上在产品代码中工作）。

```
try {
    for (Type type : types) {
        for (Type t : types2) {
            if (some condition #1) {
                // Do something and break the loop.
                throw new BreakLoopException();
            }
        }
    }
}
catch (BreakLoopException e) {
    // Do something on look breaking.
} 
```

当然`BreakLoopException`应该是内部的、私有的和加速的，没有堆栈跟踪：

```
private static class BreakLoopException extends Exception {
    @Override
    public StackTraceElement[] getStackTrace() {
        return new StackTraceElement[0];
    }
} 
```

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2015-04-25T22:01:06.530

相当不寻常的方法，但就代码长度（**而不是性能**）而言，这是您可以做的最简单的事情：

```
for(int i = 0; i++; i < j) {
    if(wanna exit) {
        i = i + j; // if more nested, also add the 
                   // maximum value for the other loops
    }
} 
```

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2016-08-25T11:25:58.363

如果它在某个函数中，为什么不直接返回它：

```
for (Type type : types) {
    for (Type t : types2) {
         if (some condition) {
            return value;
         }
    }
} 
```

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2019-09-20T11:40:09.247

它相当容易使用`label`，您可以使用标签从内循环中断开外循环，考虑下面的示例，

```
public class Breaking{
    public static void main(String[] args) {
        outerscope:
        for (int i=0; i < 5; i++) {
            for (int j=0; j < 5; j++) {
                if (condition) {
                    break outerscope;
                }
            }
        }
    }
} 
```

另一种方法是使用中断变量/标志来跟踪所需的中断。考虑下面的例子。

```
public class Breaking{ 
    public static void main(String[] args) {
        boolean isBreaking = false;
        for (int i=0; i < 5; i++) {
            for (int j=0; j < 5; j++) {
                if (condition) {
                    isBreaking = true;
                    break;
                }
            }
            if(isBreaking){
                break;
            }
        }
    }
} 
```

但是，我更喜欢使用第一种方法。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2017-05-04T07:41:13.620

`break`、`continue`和的演示`label`：

Java 关键字`break`并`continue`具有默认值。这是“最近的循环”，今天，在使用 Java 几年后，我才明白！

它似乎很少使用，但很有用。

```
import org.junit.Test;

/**
 * Created by cui on 17-5-4.
 */

public class BranchLabel {
    @Test
    public void test() {
        System.out.println("testBreak");
        testBreak();

        System.out.println("testBreakLabel");
        testBreakLabel();

        System.out.println("testContinue");
        testContinue();
        System.out.println("testContinueLabel");
        testContinueLabel();
    }

    /**
     testBreak
     a=0,b=0
     a=0,b=1
     a=1,b=0
     a=1,b=1
     a=2,b=0
     a=2,b=1
     a=3,b=0
     a=3,b=1
     a=4,b=0
     a=4,b=1
     */
    public void testBreak() {
        for (int a = 0; a < 5; a++) {
            for (int b = 0; b < 5; b++) {
                if (b == 2) {
                    break;
                }
                System.out.println("a=" + a + ",b=" + b);
            }
        }
    }

    /**
     testContinue
     a=0,b=0
     a=0,b=1
     a=0,b=3
     a=0,b=4
     a=1,b=0
     a=1,b=1
     a=1,b=3
     a=1,b=4
     a=2,b=0
     a=2,b=1
     a=2,b=3
     a=2,b=4
     a=3,b=0
     a=3,b=1
     a=3,b=3
     a=3,b=4
     a=4,b=0
     a=4,b=1
     a=4,b=3
     a=4,b=4
     */
    public void testContinue() {
        for (int a = 0; a < 5; a++) {
            for (int b = 0; b < 5; b++) {
                if (b == 2) {
                    continue;
                }
                System.out.println("a=" + a + ",b=" + b);
            }
        }
    }

    /**
     testBreakLabel
     a=0,b=0,c=0
     a=0,b=0,c=1
     * */
    public void testBreakLabel() {
        anyName:
        for (int a = 0; a < 5; a++) {
            for (int b = 0; b < 5; b++) {
                for (int c = 0; c < 5; c++) {
                    if (c == 2) {
                        break anyName;
                    }
                    System.out.println("a=" + a + ",b=" + b + ",c=" + c);
                }
            }
        }
    }

    /**
     testContinueLabel
     a=0,b=0,c=0
     a=0,b=0,c=1
     a=1,b=0,c=0
     a=1,b=0,c=1
     a=2,b=0,c=0
     a=2,b=0,c=1
     a=3,b=0,c=0
     a=3,b=0,c=1
     a=4,b=0,c=0
     a=4,b=0,c=1
     */
    public void testContinueLabel() {
        anyName:
        for (int a = 0; a < 5; a++) {
            for (int b = 0; b < 5; b++) {
                for (int c = 0; c < 5; c++) {
                    if (c == 2) {
                        continue anyName;
                    }
                    System.out.println("a=" + a + ",b=" + b + ",c=" + c);
                }
            }
        }
    }
} 
```

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2016-04-08T04:29:58.523

`for (int j = 0; j < 5; j++) //inner loop`应替换为 `for (int j = 0; j < 5 && !exitloops; j++)`.

在这里，在这种情况下，如果条件为 ，则应该退出完整的嵌套循环`True`。但是如果我们 `exitloops`只使用到上层`loop`

```
 for (int i = 0; i < 5 && !exitloops; i++) //upper loop 
```

然后内部循环将继续，因为没有额外的标志通知这个内部循环退出。

> 示例： if`i = 3`和`j=2`then 条件是`false`。但是在内部循环的下一次迭代中，`j=3` 条件`(i*j)`变为`9`is`true`但内部循环将继续直到`j`变为`5`。

因此，它也必须用于`exitloops`内部循环。

```
boolean exitloops = false;
for (int i = 0; i < 5 && !exitloops; i++) { //here should exitloops as a Conditional Statement to get out from the loops if exitloops become true. 
    for (int j = 0; j < 5 && !exitloops; j++) { //here should also use exitloops as a Conditional Statement. 
        if (i * j > 6) {
            exitloops = true;
            System.out.println("Inner loop still Continues For i * j is => "+i*j);
            break;
        }
        System.out.println(i*j);
    }
} 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2014-09-13T19:00:17.890

像@1800 INFORMATION 建议一样，使用打破内循环的条件作为外循环的条件：

```
boolean hasAccess = false;
for (int i = 0; i < x && hasAccess == false; i++){
    for (int j = 0; j < y; j++){
        if (condition == true){
            hasAccess = true;
            break;
        }
    }
} 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2017-04-01T19:54:07.760

如果是新实现，可以尝试将逻辑重写为 if-else_if-else 语句。

```
while(keep_going) {

    if(keep_going && condition_one_holds) {
        // Code
    }
    if(keep_going && condition_two_holds) {
        // Code
    }
    if(keep_going && condition_three_holds) {
        // Code
    }
    if(keep_going && something_goes_really_bad) {
        keep_going=false;
    }
    if(keep_going && condition_four_holds) {
        // Code
    }
    if(keep_going && condition_five_holds) {
        // Code
    }
} 
```

否则，您可以尝试在发生该特殊情况时设置一个标志，并在每个循环条件中检查该标志。

```
something_bad_has_happened = false;
while(something is true && !something_bad_has_happened){
    // Code, things happen
    while(something else && !something_bad_has_happened){
        // Lots of code, things happens
        if(something happened){
            -> Then control should be returned ->
            something_bad_has_happened=true;
            continue;
        }
    }
    if(something_bad_has_happened) { // The things below will not be executed
        continue;
    }

    // Other things may happen here as well, but they will not be executed
    //  once control is returned from the inner cycle.
} 
```

这里！因此，虽然简单的中断不起作用，但可以使用`continue`.

如果您只是将逻辑从一种编程语言移植到 Java，并且只想让事情正常工作，您可以尝试使用[标签](https://stackoverflow.com/questions/26430630/how-to-use-goto-statement-correctly)。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2018-08-04T11:38:35.613

Java 没有 C++ 中的 goto 功能。但是，仍然`goto`是 Java 中的保留关键字。他们可能会在未来实施它。对于您的问题，答案是 Java 中有一种称为标签的东西，您可以对其应用`continue`and`break`语句。找到下面的代码：

```
public static void main(String ...args) {
    outerLoop: for(int i=0;i<10;i++) {
    for(int j=10;j>0;j--) {
        System.out.println(i+" "+j);
        if(i==j) {
            System.out.println("Condition Fulfilled");
            break outerLoop;
        }
    }
    }
    System.out.println("Got out of the outer loop");
} 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2012-10-17T11:50:49.393

您只需使用标签来打破内部循环

```
public class Test {
public static void main(String[] args) {
    outerloop:
for (int i=0; i < 5; i++) {
  for (int j=0; j < 5; j++) {
    if (i * j > 6) {
      System.out.println("Breaking");
      break outerloop;
    }
    System.out.println(i + " " + j);
  }
}
System.out.println("Done");
}
} 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2013-04-28T05:08:33.753

甚至为外部循环创建一个标志并检查每次执行内部循环后是否可以作为答案。

像这样：

```
for (Type type : types) {
    boolean flag=false;
    for (Type t : types2) {
        if (some condition) {
            // Do something and break...
            flag=true;
            break; // Breaks out of the inner loop
        }
    }
    if(flag)
        break;
} 
```

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2014-07-11T16:46:28.197

```
boolean condition = false;
for (Type type : types) {
    for (int i = 0; i < otherTypes.size && !condition; i ++) {
        condition = true; // If your condition is satisfied
    }
} 
```

用作`condition`完成处理时的标志。然后内部循环仅在未满足条件时继续。无论哪种方式，外循环都会继续运行。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2017-03-24T01:43:41.713

在某些情况下，我们可以`while`在这里有效地使用循环。

```
Random rand = new Random();
// Just an example
for (int k = 0; k < 10; ++k) {
    int count = 0;
    while (!(rand.nextInt(200) == 100)) {
       count++;
    }

    results[k] = count;
} 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2017-09-19T05:41:51.633

您可以执行以下操作：

1.  将局部变量设置为`false`

2.  `true`当您想中断时，在第一个循环中设置该变量

3.  然后您可以检查外循环，是否设置了条件，然后也从外循环中断。

    ```
    boolean isBreakNeeded = false;
    for (int i = 0; i < some.length; i++) {
        for (int j = 0; j < some.lengthasWell; j++) {
            //want to set variable if (){
            isBreakNeeded = true;
            break;
        }

        if (isBreakNeeded) {
            break; //will make you break from the outer loop as well
        }
    } 
    ```

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2019-05-08T10:20:32.597

下面是一个示例，只要满足条件，“break”语句就会将光标推出 for 循环。

```
public class Practice3_FindDuplicateNumber {

    public static void main(String[] args) {
        Integer[] inp = { 2, 3, 4, 3, 3 };
        Integer[] aux_arr = new Integer[inp.length];
        boolean isduplicate = false;
        for (int i = 0; i < aux_arr.length; i++) {

            aux_arr[i] = -1;

        }
        outer: for (int i = 0; i < inp.length; i++) {
            if (aux_arr[inp[i]] == -200) {
                System.out.println("Duplicate Found at index: " + i + " Carrying value: " + inp[i]);
                isduplicate = true;
                break outer;
            } else {
                aux_arr[inp[i]] = -200;
            }
        }

        for (Integer integer : aux_arr) {
            System.out.println(integer);
        }

        if (isduplicate == false) {
            System.out.println("No Duplicates!!!!!");
        } else {
            System.out.println("Duplicates!!!!!");
        }
    }

} 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2013-05-07T18:57:20.207

通过检查内部循环的变量，检查是否使用 if 语句退出了内部循环。您还可以创建另一个变量（例如布尔值）来检查内部循环是否退出。

在这个例子中，它使用内部循环的变量来检查它是否已经退出：

```
int i, j;
for(i = 0; i < 7; i++){

for(j = 0; j < 5; j++) {

     if (some condition) {
         // Do something and break...
         break; // Breaks out of the inner loop
     }
}
     if(j < 5){    // Checks if inner loop wasn't finished
     break;    // Breaks out of the outer loop   
     } 
} 
```

* * *

## 回答 #36

> 赞同：-10
> 
> 时间：2016-03-31T18:33:14.557

我觉得使用标签使代码看起来非常像 goto 语句。这只是一个想法。

相反，在内部循环中抛出异常，并用 try catch 块`for`封装两个循环。`for`

就像是

```
try {
  // ...
  for(Object outerForLoop : objectsOuter) {
     // ...
     for (Object innerForLoop : objectsInner) {
        // ...
        if (isConditionTrue)
             throw new WrappedException("With some useful message. Probably some logging as well.");
     }
  }
  catch (WrappedException) {
        // Do something awesome or just don't do anything to swallow the exception.
  } 
```

只是一个想法。我更喜欢这段代码，因为当它在生产中运行时，它为我提供了更好的可记录性（就像一个词）。

# apache - 奇怪的 CSS/Apache 问题

> ID：886959
> 
> 赞同：0
> 
> 时间：2009-05-20T09:08:38.137
> 
> 标签：apache, stylesheet

我一直在尝试安装 ReviewBoard 并且看起来一切顺利，我可以访问该站点和功能

但是，我很奇怪，由于某种原因似乎没有应用样式表。

我怀疑这可能是它无法访问的文件夹的权限问题，或者我犯了一些 Apache 设置错误。

是否有任何可能导致此问题的 Apache 配置？

有没有人遇到过类似的问题，而不仅仅是 ReviewBoard？

更多信息：看起来 Apache 正在接收对样式表的请求

*   [20/5/2009:10:00:35 +0100]“GET /reviewboard/media/rb/css/common.css?1242747706 HTTP/1.1”404 2512
*   [20/5/2009:10:00:35 +0100]“GET /reviewboard/media/rb/css/ie_hacks.css?1242747706 HTTP/1.1”404 2514

*   [20/5/2009:10:00:36 +0100]“GET /reviewboard/media/rb/js/csshover2.htc?1242747706 HTTP/1.1”404 2514

*   [20/5/2009:10:00:36 +0100]“GET /reviewboard/media/rb/js/pngfix.htc?1242747706 HTTP/1.1”404 2511

编辑：查看访问日志，CSS 的 GET 实际上是 404-ing，因为路径应该是 reviewboard/htdocs/media/rb/css/* （尽管我假设在 HTTP.conf 中有一个别名处理了这个.

编辑： .htaccess 文件包含

```
<IfModule mod_expires.c>
  <FilesMatch "\.(jpg|gif|png|css|js|htc)">
    ExpiresActive on
    ExpiresDefault "access plus 1 year"
  </FilesMatch>
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
</IfModule> 
```

编辑：

httpd.conf 部分如下所示

```
<VirtualHost *:8080>
    ServerName FASKALLYRB
    DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/reviewboard/htdocs"

    # Error handlers
    ErrorDocument 500 /errordocs/500.html
    ErrorDocument 404 /errordocs/500.html

    # Serve django pages
    <Location "/">
        PythonPath "['C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/reviewboard/conf'] + sys.path"
        SetEnv DJANGO_SETTINGS_MODULE reviewboard.settings
        SetEnv PYTHON_EGG_CACHE "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/reviewboard/tmp/egg_cache"
        SetHandler mod_python
        PythonHandler django.core.handlers.modpython
        PythonAutoReload Off
        PythonDebug Off
        # Used to run multiple mod_python sites in the same apache
        PythonInterpreter reviewboard_reviewboard
    </Location>

    # Serve static media without running it through mod_python
    # (overrides the above)
    <Location "reviewboard/media">
        SetHandler None
    </Location>
    <Location "reviewboard/errordocs">
        SetHandler None
    </Location>

    <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/reviewboard/htdocs">
        AllowOverride All
    </Directory>

    # Alias static media requests to filesystem
    Alias reviewboard/media "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/reviewboard/htdocs/media"
    Alias reviewboard/errordocs "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/reviewboard/htdocs/errordocs"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-17T00:14:38.030

Location 和 Alias 指令的 URL 不能是相对的，并且需要一个前导斜杠。因此你应该使用'/reviewboard/.......'。

FWIW，PythonInterpreter 指令不用于您对它的评论似乎表明您认为它确实如此。

```
# Used to run multiple mod_python sites in the same apache
PythonInterpreter reviewboard_reviewboard 
```

该应用程序始终在同一个 Apache 实例中运行。PythonInterpreter 所做的是允许您控制它运行的每个 Apache 服务器子进程中的哪个 Python 子解释器。在您的情况下，它实际上是多余的，因为默认情况下，相同的子解释器用于同一 VirtualHost 下的所有 mod_python 托管应用程序。请注意，在每个 Apache 服务器子进程中仍然会有多个应用程序实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T10:56:23.753

您可以在名为“媒体”的评论板中创建一个符号链接，该链接可能指向 htdocs/media。

或者：

1.  将 htdocs/media 移至 ..
2.  或进入审查板代码并调整 url 生成代码
3.  或者如果您安装了 mod_rewrite，您可以将请求重定向到正确的位置

# java - JPA：可自动和手动设置的 ID 列

> ID：886961
> 
> 赞同：3
> 
> 时间：2009-05-20T09:08:57.137
> 
> 标签：java, mysql, jpa

我正在使用 MySQL 并具有以下实体：

```
class MyEntity {
    @Id
    @GeneratedValue(strategy=IDENTITY)
    @Column(name="id")
    private Integer id;
} 
```

但是，我仍然希望能够手动设置 id！

问题是 INSERT 永远不会插入 id 列。例如，当这样做时：

```
MyEntity e = new MyEntity();
e.setId(15);
em.persist(e);
em.flush();
em.refresh(e); 
```

将进行以下查询：

```
INSERT INTO myEntities (col1, col2, col3) VALUES (?, ?, ?)
SELECT id, col1, col2, col3 FROM myEntities WHERE (id = 15) 
```

因此 id 仍将自动生成，并且`refresh()`将导致`EntityNotFoundException`.

如果我根本不设置`@GeneratedValue`，那么这种情况会正常工作，但是当值是自动生成的时，`LAST_INSERT_ID()`不会被调用。

是否可以像在 MySQL 中那样手动和自动设置 id 列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T10:31:39.060

JPA 不适合这种情况（JDO 也不适合）；它假设您要么自己设置 id，要么使用提供的生成器生成它。 [DataNucleus](http://www.datanucleus.org/products/accessplatform)通过添加 @Extension(key="strategy-when-notnull", value="true") 进行扩展，当您未设置“id”值时将生成该值，并在您提供时使用您的值. 也许其他实现允许类似的东西？

——安迪（DataNucleus）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T16:45:10.460

使用 EclipseLink，手动分配 id 将适用于基于 TABLE 的排序和 SEQUENCE 对象排序，但不适用于 IDENTITY。

# c# - 触发事件时单击了哪个对象？

> ID：886965
> 
> 赞同：1
> 
> 时间：2009-05-20T09:09:38.057
> 
> 标签：c#, winforms

这是我想要这样做的主要内容。

我在表单初始化程序中创建了两个按钮，如下所示

```
 public Form1()
    {
        InitializeComponent();

        Button b1 = new Button();
        b1.Parent = this;
        b1.Name = "btnA";
        b1.Text = "Button A";
        b1.Click += new EventHandler(button_Click);
        b1.Show();

        Button b2 = new Button();
        b2.Parent = this;
        b2.Name = "btnB";
        b2.Text = "Button B";
        b2.Click += new EventHandler(button_Click);
        b2.Show();
    }

    private void button_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Button A or Button B was Clicked?");
    } 
```

我需要知道单击了哪个按钮，并且显然要操纵被单击的那个按钮。

甚至像更改单击的按钮的文本之类的东西。

我很确定我们可以使用对象发送者来访问触发事件的按钮，但只是不知道如何使用发送者来操作正确的按钮。

任何方向或帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T09:12:18.550

只需投射`sender`到`Button`：

```
private void button_Click(object sender, EventArgs e)
{
    Button clicked = (Button) sender;
    MessageBox.Show("Button " + clicked.Name + " was Clicked.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T09:12:46.473

`sender`参数是引发事件的对象：

```
Button button = sender as Button;
if( button != null )
{
   MessageBox.Show("Button " + button.Name + " was clicked");
}
else
{
   MessageBox.Show("Not a button?");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T09:15:44.377

sender 对象将为您提供发送消息的对象。您可以将其转换为按钮。

```
var clickedButton = (Button) sender; 
```

# mysql - 帮我修改mySQL查询

> ID：886966
> 
> 赞同：0
> 
> 时间：2009-05-20T09:09:49.380
> 
> 标签：mysql, date

我正在尝试检查法规的日期提醒是否是今天并且法规的日期结束尚未过去，然后我不希望它显示。问题是我所做的查询在 mysql 中不起作用。谁能帮我修改我的查询？

这是我的查询：

```
$query="select * from t_regulation where dt_reminder >= '$today' and dt_ended ='$today'" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:19:37.613

这是假设您的 dt_reminder 列类型是 DATETIME，而不是某种时间戳。

```
SELECT * FROM t_regulation WHERE DATE(dt_reminder) >= CURDATE() AND DATE(dt_ended) = CURDATE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T09:21:06.003

你可以用日期函数做很多时髦的事情；

[Mysql 日期/时间函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:11:26.323

我经常遇到这样的问题，即我的日期变量是一个字符串，该字符串的格式不适合 Mysql 中的默认日期时间戳。

请记住，这个比较应该是 'yyyy-mm-dd'。

此外，由于“日期结束”尚未过去，不应该是：

$query="select * from t_regulation where dt_reminder >= '$today' and (dt_ended > '$today' or dt_ended is null)"

# iphone - 如何创建这个定制的 UI？

> ID：886972
> 
> 赞同：-1
> 
> 时间：2009-05-20T09:10:26.480
> 
> 标签：iphone, xcode

我是 iphone 开发的新手，我想创建一个这样的视图..

1.主屏幕包含一个。一个导航栏 ba uiimageview ca 工具栏（有 4 个按钮）

2.new 视图包含一个带有返回按钮的导航栏，该按钮通向主屏幕。ba UITableView。

3.另一个带有导航栏的表格视图返回（第二个视图）

注意我想用工具栏按钮加载新视图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T10:41:11.897

那太好了。感谢更新！让我们了解您的处理方式。

实际上，我们为您编写代码对您不利。为什么不尝试在 iPhone 开发中心查看 Apple 的示例代码？它会回答你的问题。

您可以返回此处并发布您尝试过但不起作用的代码。

可能不是您想要的答案，但我很确定您会从实际研究问题并自己尝试中受益更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T13:24:08.993

跟进 Jordan 的回答，您想要开始的地方是[Getting Started w/ iPhone OS](http://developer.apple.com/iphone/library/referencelibrary/GettingStarted/GS_iPhoneGeneral/index.html)。对于您正在谈论的代码类型，您应该研究[View Controller Programming Guide](http://developer.apple.com/iphone/library/featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)。当您浏览了示例并开始遇到自己的代码问题时，Stack Overflow 的 Cocoa/iPhone 人群非常有帮助。但是程序要求的陈述不是一个SO问题。

# c# - 如何增加属性的访问修饰符

> ID：886977
> 
> 赞同：10
> 
> 时间：2009-05-20T09:11:13.920
> 
> 标签：c#, oop, polymorphism

我正在尝试创建一组类，其中一个共同的祖先负责设置各种属性所涉及的所有逻辑，而后代只是根据特定后代中是否需要它们来更改属性的访问。

当我尝试如下所示执行此操作时，出现编译器错误：*“覆盖'受保护'继承成员时无法更改访问修饰符”*

有没有办法实现我想要做的事情？谢谢

```
public class Parent
{
     private int _propertyOne;
     private int _propertyTwo;

     protected virtual int PropertyOne
     {
          get { return _propertyOne; }
          set { _propertyOne = value; }
     }

     protected virtual int PropertyTwo
     {
          get { return _propertyTwo; }
          set { _propertyTwo = value; }
     }
}

public class ChildOne : Parent
{
    public override int PropertyOne  // Compiler Error CS0507
    {
        get { return base.PropertyOne; }
        set { base.PropertyOne = value; }
    }
    // PropertyTwo is not available to users of ChildOne
}

public class ChildTwo : Parent
{
    // PropertyOne is not available to users of ChildTwo
    public override int PropertyTwo  // Compiler Error CS0507
    {
        get { return base.PropertyTwo; }
        set { base.PropertyTwo = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T09:15:51.680

您可以通过使用“new”而不是“override”来隐藏父级的受保护属性，如下所示：

```
public class ChildOne : Parent
{
    public new int PropertyOne  // No Compiler Error
    {
        get { return base.PropertyOne; }
        set { base.PropertyOne = value; }
    }
    // PropertyTwo is not available to users of ChildOne
}

public class ChildTwo : Parent
{
    // PropertyOne is not available to users of ChildTwo
    public new int PropertyTwo
    {
        get { return base.PropertyTwo; }
        set { base.PropertyTwo = value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T09:19:27.990

您无法更改访问权限，但可以重新声明具有更大访问权限的成员：

```
public new int PropertyOne
{
    get { return base.PropertyOne; }
    set { base.PropertyOne = value; }
} 
```

问题是这是一个*不同* `PropertyOne`的，继承/虚拟可能无法按预期工作。在上述情况下（我们只是调用`base.*`，并且新方法不是虚拟的），这可能没问题。如果你需要真正的多态性*，*那么你不能在不引入中间类的情况下做到（AFAIK）（因为你不能`new`和`override`同一类型的同一个成员）：

```
public abstract class ChildOneAnnoying : Parent {
    protected virtual int PropertyOneImpl {
        get { return base.PropertyOne; }
        set { base.PropertyOne = value; }
    }
    protected override int PropertyOne {
        get { return PropertyOneImpl; }
        set { PropertyOneImpl = value; }
    }
}
public class ChildOne : ChildOneAnnoying {
    public new int PropertyOne {
        get { return PropertyOneImpl; }
        set { PropertyOneImpl = value; }
    }
} 
```

上面的重点是仍然有一个虚拟成员要覆盖：`PropertyOneImpl`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T09:17:17.807

不。您仍然可以使用 Your's 隐藏继承的财产

```
public class ChildTwo: Praent { 
    public new int PropertyTwo { 
       // do whatever you want
    }
} 
```

ps：这不再是虚拟/覆盖关系（即没有多态调用）

# c# - Web 服务请求身份验证

> ID：886987
> 
> 赞同：2
> 
> 时间：2009-05-20T09:12:34.353
> 
> 标签：c#, wcf, web-services, authentication

我们真的被困在这里，所以我决定寻求你的帮助。

昨天我被要求帮助使用 Web 服务，获取 WSDL 的 URL，以及要使用的用户凭据。我从来没有真正与 Web 服务有任何关系，但是对它们有一个大致的了解并看到一些例子，我认为它不会那么糟糕。显然我错了，因为我现在被卡住了。

一切似乎都很好，代理类（或客户端）已经生成，构建请求并发送它们也很好，除了身份验证部分。我们似乎无法弄清楚该怎么做。

使用：

```
client.ChannelFactory.Credentials.UserName.UserName = "myusername";
client.ChannelFactory.Credentials.UserName.Password = "mypassword"; 
```

似乎不起作用。（当我检查由 client.Endpoint.Binding.CreateBindingElements() 返回的 BindingElementCollection 时，没有 SecurityBindingElement）

我已经尝试了很多其他方法，但我认为我缺少一些基本的东西，而且缺乏文档也没有真正的帮助。

所以问题是：如何在使用 WCF 调用 Web 服务时发送用户名和密码？

**编辑：** 为了澄清起见，请求应包含类似于以下内容：

```
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="1">
     <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-25763165">
        <wsse:Username>username</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">1DiaGTkOLk/CZhDaEpbkAaKRfGw=</wsse:Password>
        <wsse:Nonce>6ApOnLn5Aq9KSH46pzzcZA==</wsse:Nonce>
        <wsu:Created>2009-05-13T18:59:23.309Z</wsu:Created>
     </wsse:UsernameToken>
  </wsse:Security> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-03-30T09:44:12.007

我有同样的问题。我使用 a在方法`MessageInspector`中添加正确的而不是自定义令牌序列化程序。然后我使用自定义行为来应用修复。`UsernameToken``BeforeSendRequest`

在我的博客文章[Supporting the WS-I Basic Profile Password Digest in a WCF client proxy 中](http://blog.benpowell.co.uk/2010/11/supporting-ws-i-basic-profile-password.html)记录了整个过程（带有[演示项目](http://www.box.net/shared/lu3q83l6kr)） 。或者，您可以只阅读[PDF](http://www.box.net/shared/ooom8db1i0)。

如果您想了解我的解决方案进度，您可以在 StackOverflow 上找到标题为“ [WCF 客户端使用 WS-Security UsernameToken PasswordDigest 身份验证方案使用 Axis 2 Web 服务时出错](https://stackoverflow.com/questions/3102693/error-in-wcf-client-consuming-axis-2-web-service-with-ws-security-usernametoken-p)”：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T09:22:56.813

我使用常规的 HttpCookie 也达到了类似的效果。

要创建 cookie：

```
[OperationContract]     
public void LoginToApi(string username, string password, string clientName)
{
// authenticate with DB, if successful ...
// construct a cookie
    HttpCookie httpCookie = new HttpCookie("SessionID","whateverneeded");
    HttpContext.Current.Response.SetCookie(httpCookie);
} 
```

这也出现在您的常规 HttpRequests 中。因此，您只需反转该过程，在执行任何操作之前检查您在收到的 cookie 中放入的任何内容的哈希/会话 ID/用户名/密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T09:26:04.670

```
var factory = new ChannelFactory<IService>('*');
factory.Credentials.UserName.UserName = 'bob';
factory.Credentials.UserName.Password = 'bob';
var proxy = factory.CreateChannel(); 
```

有关更多信息，您可以探索基于 WCF 的服务中的授权*( [http://msdn.microsoft.com/en-us/magazine/cc948343.aspx](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx) )*********