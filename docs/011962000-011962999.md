# StackOverflow 问答 11962000-11962999

# ruby-on-rails-3 - 使用字母作为分隔符的 Rails 路由

> ID：11962006
> 
> 赞同：1
> 
> 时间：2012-08-14T22:56:55.573
> 
> 标签：ruby-on-rails-3, routing

我正在寻找创建一个可以调整图像大小的路线，并且我希望它具有以下格式：

/image/1024x768/hello.jpg

我需要动态收集宽度和高度，因此，我需要路由类似于：

/image/:widthx:height/:name.jpg

显然这是行不通的，因为 :width 会混合为 :widthx

我已经尝试寻找解决方案，但我似乎找不到一个 - 当然轨道路由不是那么严格以至于它不促进这个？

另外，我不想将“x”设置为“分隔符”，因为这意味着我不能将它用作图像文件名的一部分。

关于如何设置此路由的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:05:20.117

您可以将命名参数括在括号中：

```
match 'resize/(:width)x(:height)/:image',
      :width => /\d+/, :height => /\d+/,
      :to => 'image#resize' 
```

像这样的 URL`/resize/100x400/hello.jpg`最终将作为以下参数：

```
{
 "controller"=>"image",
 "action"=>"resize",
 "width"=>"100", "height"=>"400",
 "image"=>"hello", "format"=>"jpg"
} 
```

# ios - IOS 5 从 AppDelegate 打开一个特定的 ViewController

> ID：11962010
> 
> 赞同：1
> 
> 时间：2012-08-14T22:57:07.007
> 
> 标签：ios, ios5, appdelegate

我对IOS真的很陌生，所以如果这个问题措辞不明确，我深表歉意。我试过四处寻找，但我没有找到我要找的东西。

基本上在我的 AppDelegate applicationDidBecomeActive 方法中，我正在调用我的网络服务以确保用户仍然是有效用户，并拉下一些刷新的数据，或者如果它们不再有效则将它们踢回登录页面。

我遇到问题的部分是第二部分。当发现用户无效时，如何加载和显示特定的 ViewController（在本例中为 loginViewController）？我想让正常的 viewController 流程​​在它们有效时发生，这很好，但是当我需要从 AppDelegate 启动特定的 viewController 时，我不知道如何启动它们。

有任何想法吗？

我想我明白了！我在 AppDelegate 中使用了这段代码来显示我需要的 ViewController。

```
UIViewController *loginController = [self.window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
    UINavigationController *loginNavController = [self.window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"LoginNavController"];
    UIViewController *currentVC = self.window.rootViewController;
    _window.rootViewController = loginNavController;
    [currentVC presentViewController:loginNavController animated:NO completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:13:49.530

为简单起见，假设您有一个单视图应用程序（不是导航控制器，不是标签栏控制器 - 解决方案可扩展但更易于解释）。当您收到应用程序启动的 appDelegate 消息时，将 UIImageView 设为根视图并显示您的启动图像（用户认为您仍在启动）。尝试登录，并在其他对象（不是视图控制器）中执行此操作。如果你成功了，你将你想要的视图设置为 rootView，并且用户可以看到它。如果登录失败，则将登录窗口设为 rootView。这里的关键是要有一个对象来驱动它并且可以与 appDelegate 交互。您还可以将此功能添加到 appDelegate 本身。

# linux - 适用于 Linux 的 NUMA 感知命名共享内存

> ID：11962018
> 
> 赞同：5
> 
> 时间：2012-08-14T22:57:44.093
> 
> 标签：linux, memory, shared, numa

Windows API 提供 CreateFileMappingNuma 函数 ( [http://msdn.microsoft.com/en-us/library/windows/desktop/aa366539(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366539(v=vs.85).aspx) ) 在特定 NUMA 上创建命名共享内存空间节点。

到目前为止，我还没有找到 Linux 的等效功能。

我目前的方法如下所示：

1.  分配命名共享内存（使用 shm_open(...)）
2.  确定当前的 NUMA 节点（使用 numa_move_pages(...)）
3.  将页面移动到目标节点（再次使用 numa_move_pages(...) ）

有谁知道更好的方法？

编辑：记录在案：我提出的实施确实按预期工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:01:06.017

听起来不错。请注意，在调用 shm_open()/fruncate() 时没有分配页面（不要忘记 ftruncate() 来设置大小！）。内核只是简单地创建 vma 并等待未来的代码访问将页面错误地放入物理内存。因此在这种状态下调用 numa_move_pages() 可能会产生在相关 NUMA 节点中创建和填充新页面的效果。

# iphone - 在 iOS 的 Objective-C 中，如何在类视图控制器中有一个 Slider 来改变 AppDelage 中播放的歌曲的音量？

> ID：11962019
> 
> 赞同：0
> 
> 时间：2012-08-14T22:57:57.070
> 
> 标签：iphone, objective-c, ios, avaudioplayer, uislider

在 iOS 的 Objective-C 中，如何在类视图控制器中有一个 Slider 来改变 AppDelage 中播放的歌曲的音量？这是我在 .h AppDelegate 中的代码

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface JARAppDelegate : UIResponder <UIApplicationDelegate>
{
    AVAudioPlayer *musicPlayer;
}

@property (strong, nonatomic) UIWindow *window;

- (void)playMusic;
- (void)setVolume:(float)vol;

@end 
```

在 .m 中：

```
- (void)playMusic
{

    NSString *musicPath = [[NSBundle mainBundle] pathForResource:@"The History of the World" ofType:@"mp3"];
    NSURL *musicURL =  [[NSURL alloc] initFileURLWithPath:musicPath];

    musicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:musicURL error:nil];
    [musicPlayer setNumberOfLoops:-1];   // Negative number means loop forever
    [musicPlayer setVolume:1.0];

    [musicPlayer prepareToPlay];
    [musicPlayer play];
    NSLog(@"play");
}

- (void)setVolume:(float)vol
{
    [musicPlayer setVolume:vol];
} 
```

当我调用“didFinishLaunchingWithOptions”时， `[self playMusic];` 这可以工作并播放我想要全音量的歌曲！然后在另一个名为 SettingsViewControler 的类中：.h

```
#import <UIKit/UIKit.h>
#import "JARAppDelegate.h"

@interface JARSettingsViewController : UIViewController
{

}

@property (strong, nonatomic) IBOutlet UISlider *volumeSliderOutlet;

- (IBAction)volumeSliderActoin:(id)sender;

@end 
```

他们：

```
- (IBAction)volumeSliderActoin:(id)sender
{
     NSLog(@"Volume Changed");
     [JARAppDelegate setVolume:sender];
} 
```

每次上下移动滑块时都会记录 Volume Changed，因此它应该向 setVolume 发送一个介于 0.0 和 1.0 之间的值。但我收到一条错误消息，提示“选择器'setVolume:'没有已知的类方法：'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:30:41.030

这是因为您在调用时尝试调用*类*方法：

```
[JARAppDelegate setVolume:sender]; 
```

但这不存在。您已经创建了一个*实例*方法。

尝试为 AVAudioPlayer 创建一个单例，然后您可以执行以下操作：

```
[[AVAudioPlayer sharedInstance] setVolume:vol]; 
```

# javascript - 我已经用 javascript 制作了幻灯片，但我不知道如何让我的照片变得混乱

> ID：11962020
> 
> 赞同：1
> 
> 时间：2012-08-14T22:58:14.093
> 
> 标签：javascript, html, slideshow

我用 javascript 制作的幻灯片非常快速地改变了图片。我想阻止它们闪烁到下一个，而是包含更多的 javascript 以使图片缓慢变化。

我在 stackoverflow 上查看了这个，其他人似乎使用 JQuery 或我不太了解的东西。有没有机会我可以为我的 javascript 添加某种延迟？

这是我所拥有的：

```
<html>
<head>

<script type="text/javascript">

    var pics = new Array(10);
    pics[0] = "images/pic1.jpg";
    pics[1] = "images/pic2.jpg";
    pics[2] = "images/pic3.jpg";
    pics[3] = "images/pic4.jpg";
    pics[4] = "images/pic5.jpg";
    pics[5] = "images/pic6.jpg";
    pics[6] = "images/pic7.jpg";

    var c = 0;
    var timer = 0;

    function cyclePics() {

        document.getElementById("pic1").src = pics[c];
        c++;
        if (c == 7) {
            c = 0;
        }
        timer = setTimeout("cyclePics()", 2000);
    }
</script>

</head>

<body onLoad="cyclePics()"> 

<div>

<img src="images/pic1.jpg" id="pic1"/>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:06:39.727

jQuery 让这些事情变得简单。

```
function cyclePics() {

        $("#pic"+c).animate({opacity:0}, 2000, function(){
            c++;
            if (c == 7) {
                c = 0;
            }
            document.getElementById("pic1").src = pics[c];
             $("#pic"+c).animate({opacity:1}, 2000, function(){ setTimeout(cyclePics, 2000) });
        })

    } 
```

此代码使用 jQuery 的 animate 方法。您可以使用回调函数来计时，以便在动画结束时发生。

以下是它按顺序发生的方式。

1.  将#pic1 淡化为 0 不透明度
2.  评估 C 并更改 #pic1 的 src
3.  淡入 #pic1
4.  setTimeout 再次调用cyclePics。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:06:53.370

jQuery 是一个 javascript 插件，它可以让你做各种各样的事情，从动画到轻松操作 html 元素。在你的情况下，jQuery 是要走的路。

将此添加到您的 html 页面：

```
<script src="http://code.jquery.com/jquery-latest.min.js"
    type="text/javascript"></script> 
```

然后去找一个jQuery教程，帮自己一个忙，彻底学习。专注于`animate()`功能。只需要 jQuery 就足够了，但也有一些其他的扩展可以让幻灯片更容易。例如，[slidesjs](http://slidesjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T12:34:17.350

以下是您可以在不使用 JQuery 之类的库的情况下执行的操作。它是纯 CSS/Javascript。

您可以在互联网上阅读有关过渡动画的内容。通过过渡，您可以确保 CSS 属性的变化非常缓慢。例如你可以这样做。

```
function nextImg(){                         
    diaimg.style.opacity ="0";
    window.setTimeout (
    function(){
        diaimg.style.opacity ="1";
        document.images["urOBJ"].src = urArray[imgnr].src;
        imgnr++;
        if (imgnr>9){imgnr = 1;}
        }, 500);  // u can play a bit with this delay
}
function slider(){                     //nextIMG will be called every 2000ms
    IntervalID = setInterval("nextImg()", 2000);
} 
```

这将首先使图片透明，然后定义一个新图像，然后再次将不透明度移动到 1。现在如果你想让它变得平滑，你应该包括 CSS 代码：

```
 opacity: 1; transition: opacity 1s ease-in-out; 
```

它不是超级花哨，但它确实有效。如果你想要更好的东西，你应该阅读这篇文章： [http ://css-tricks.com/almanac/properties/t/transition/](http://css-tricks.com/almanac/properties/t/transition/)

如果您真的了解它的工作原理，您可以制作滑入/滑出效果以及淡入/淡出效果

# android - 是否可以使用 Android SDK 扫描无线客户端？

> ID：11962021
> 
> 赞同：3
> 
> 时间：2012-08-14T22:58:17.637
> 
> 标签：android, android-wifi

A 了解[`WifiManager`](http://developer.android.com/reference/android/net/wifi/WifiManager.html)扫描后会返回接入点列表，但是否也可以检索无线客户端列表及其优势？

**更新：**

为了澄清我所说的“无线客户端”的含义，在典型的 WiFi 网络中，有一个 WiFi“接入点”和一个或多个与之通信的无线客户端。

一些评论说，如果不查询接入点，这在技术上是不可能的，这是有道理的。

我使用了一种工具，例如`airmon-ng`列出范围内的所有接入点和每个客户端。您可以在此屏幕截图中看到有一个客户端、信号强度 (PWR) 以及它们连接到的接入点 (STATION)：

![airmon-ng](../Images/1b2a9fe0f15f7518076375af60555e39.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:23:18.543

我没有关于如何做到这一点的确切答案，但我在 Play 商店中看到了完全符合您要求的应用程序，这意味着它可以被开发。快速搜索显示这个 - [https://play.google.com/store/apps/details?id=de.android.telnet](https://play.google.com/store/apps/details?id=de.android.telnet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T20:55:55.777

要做到这一点，需要做一些事情。首先，您的设备需要支持“[监控](http://en.wikipedia.org/wiki/Monitor_mode)”模式。这是因为所有网络接口都会忽略不适合它们的流量，除非另有说明，否则正常操作不需要这样做，因此并非所有设备都支持它。

其次，您将需要一个 root 设备，因为 shell 命令需要以 root（管理）访问权限执行。如果您的手机没有解锁和植根，这对您来说也是不可能的。

第三，您将需要一个支持对您的无线芯片组进行监视和侦听的内核，或者一个将添加此支持的内核模块。这是一个技术细节，我不会在这里介绍，但谷歌搜索它会帮助你。

最后，您需要一个用于 Android 的工具集，例如 airmon（就像您在 PC 上使用的一样），Play Store 上有一个：[AirMon](https://play.google.com/store/apps/details?id=net.maxters.droid.airmon)。

一个警告，希望你自己在那里。寻找编写此类内核模块或黑客/渗透相关工具的开发人员通常不会手把手地掌握。您将不得不谷歌并在很大程度上帮助自己，或者当然在 StackOverflow 上提出更多问题。

所以悬崖笔记，TL; DR。有可能，非常有可能。但是您可能无法在您的设备上执行此操作。

另外，我不知道您的技能组合，但是在 PC 上完成这类工作所花费的时间和技能是漫长而庞大的，更不用说手机了，所以最好使用其他人提供的工具来开发它们你自己将会有一个陡峭的学习曲线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:20:22.437

不久前我遇到了这个问题，但不幸的是，唯一的解决方案是查询路由器。现在取决于您的路由器是否可以做到这一点。我想知道像 ddwrt 这样的 3rd 方路由器 rom 是否可以吐出日志文件，然后你可以解析

# iphone - 没有接口的实例类或方法？

> ID：11962024
> 
> 赞同：1
> 
> 时间：2012-08-14T22:59:01.897
> 
> 标签：iphone, objective-c, ios, ipad

# 得到这个代码：

```
#import <Foundation/Foundation.h>
@interface CalculatorBrain : NSObject
- (void)pushOperand:(double)operand;
- (double)performOperation:(NSString *)op;
@property (nonatomic, readonly) id program;
+ (NSString *)descriptionOfProgram:(id)program;
+ (double)runProgram:(id)program;
@end 
```

# 和这个：

```
#import "CalculatorBrain.h"
@interface CalculatorBrain()
@property (nonatomic, strong) NSMutableArray *programStack;
@end
@implementation CalculatorBrain
@synthesize programStack = _programStack;
- (NSMutableArray *)programStack
{
if (_programStack == nil) _programStack = [[NSMutableArray alloc] init];
return _programStack;
}
- (id)program
{
return [self.programStack copy];
}
+ (NSString *)descriptionOfProgram:(id)program
{
return @"blablabla";
}
    - (void)pushOperand:(double)operand
{
   [self.programStack addObject:[NSNumber numberWithDouble:operand]];
}

- (double)performOperation:(NSString *)operation
{
[self.programStack addObject:operation];
return [[self class] runProgram:self.program];
}

+ (double)popOperandOffProgramStack:(NSMutableArray *)stack
{
   double result = 0;
   return result;
}
+ (double)runProgram:(id)program
{
   NSMutableArray *stack;
   if ([program isKindOfClass:[NSArray class]]) {
      stack = [program mutableCopy];
   }
   return [self popOperandOffProgramStack:stack];
}
@end 
```

代码运行良好，所以问题是，**popOperandOffProgramStack**在界面中声明的位置在哪里？为什么它编译并且没关系？它应该崩溃，但我找不到对此的解释....

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:01:02.503

`@interface`如果您将它们暴露给世界，您只需要在 .h 文件中声明方法。否则，不需要声明。

现在，它们在实现中出现的顺序也无关紧要。从历史上看，如果该方法的实现晚于`@implementation`调用它的位置，则您需要在上面声明该方法（通常在`@interface`. 现在编译器不关心 .m 文件中的实现是更早还是更晚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:01:11.513

编译器可以看到它的定义：

```
+ (double)popOperandOffProgramStack:(NSMutableArray *)stack
{
   double result = 0;
   return result;
} 
```

因此它能够确认它已被声明、参数类型和返回类型。

另外 - 在较旧的编译器中，它需要先于使用，但如果在`@implementation`范围内使用，则不再需要。

即使没有声明，objc 也足够弱，不会是编译器错误（可能是警告）。例外：如果您使用 ARC，则该方法必须可见。启用 ARC 时，编译器需要知道引用计数语义和参数类型。

# java - 在Mysql中使用executeUpdate在sql语句中创建表

> ID：11962028
> 
> 赞同：0
> 
> 时间：2012-08-14T22:59:29.120
> 
> 标签：java, mysql, sql, create-table, sp-executesql

我有以下内容`doGet()`：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        MysqlDataSource ds = new MysqlConnectionPoolDataSource();
        ds.setServerName("localhost");
        ds.setPort(3306);
        ds.setUser("root");
        ds.setPassword("");
        try {
            Connection connection = null ; 
            connection =  ds.getConnection();
            Statement statement = connection.createStatement();
            // create the DB .. 
            statement.executeUpdate("CREATE DATABASE IF NOT EXISTS "
                            +"testSQLtable" )  ;

            // use DB ..

            statement.executeUpdate("USE testSQLtable") ; 

            // create table ...
            statement.executeUpdate("DROP TABLE IF EXISTS  account "
                    +"CREATE TABLE  account ( "
                     +"accountNum INT( 11 ),"
                     +"dateCreated DATE NOT NULL,"
                     +"accountName TEXT,"
                     +"description TEXT,"
                     +"statusAccount TEXT,"
                     +"sumOfMoney INT( 11 ) NOT NULL DEFAULT  0 );" )  ;
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

创建数据库并使用他的前两个 `executeUpdate`工作正常。当运行到达该行时`statement.executeUpdate("DROP TABLE IF EXISTS accounnt ....."`，它会引发异常 -

```
 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE  account ( accountNum INT( 11 ),dateCreated DATE NOT NULL,accountNa' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2713)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1794)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1712)
    at control.CreateDBinitialServlet.doGet(CreateDBinitialServlet.java:56)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T23:15:24.790

这应该适用于您的情况：

```
statement.executeUpdate("DROP TABLE IF EXISTS  account ");
statement.executeUpdate("CREATE TABLE  account ( "
                     +"accountNum INT( 11 ),"
                     +"dateCreated DATE NOT NULL,"
                     +"accountName TEXT,"
                     +"description TEXT,"
                     +"statusAccount TEXT,"
                     +"sumOfMoney INT( 11 ) NOT NULL DEFAULT  0 )" )  ; 
```

原因：每次调用执行方法时，语句只能执行一个 SQL 语句。

如果您想同时执行两个或多个语句，您可以使用 Batch-Jobs 执行此操作。
喜欢：

```
statement.addBatch("DROP TABLE IF EXISTS  account ");
statement.addBatch("CREATE TABLE  account ( "
                     +"accountNum INT( 11 ),"
                     +"dateCreated DATE NOT NULL,"
                     +"accountName TEXT,"
                     +"description TEXT,"
                     +"statusAccount TEXT,"
                     +"sumOfMoney INT( 11 ) NOT NULL DEFAULT  0 )" )  ;
statement.executeBatch(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T23:11:31.253

您在第一条语句的末尾缺少一个分号：

```
 statement.executeUpdate("DROP TABLE IF EXISTS  account; "
                +"CREATE TABLE  account ( "
                 +"accountNum INT( 11 ),"
                 +"dateCreated DATE NOT NULL,"
                 +"accountName TEXT,"
                 +"description TEXT,"
                 +"statusAccount TEXT,"
                 +"sumOfMoney INT( 11 ) NOT NULL DEFAULT  0 );" )  ; 
```

根据[executeUpdate](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)的文档，此函数一次只能执行一条语句。然后，您需要对以下内容进行两次单独调用`executeUpdate`：

```
 statement.executeUpdate("DROP TABLE IF EXISTS  account");
        statement.executeUpdate("CREATE TABLE  account ("
                 +"accountNum INT( 11 ),"
                 +"dateCreated DATE NOT NULL,"
                 +"accountName TEXT,"
                 +"description TEXT,"
                 +"statusAccount TEXT,"
                 +"sumOfMoney INT( 11 ) NOT NULL DEFAULT  0 );" )  ; 
```

# javascript - 简单的jquery真假问题

> ID：11962052
> 
> 赞同：-2
> 
> 时间：2012-08-14T23:01:40.793
> 
> 标签：javascript, jquery

下面的代码有什么不同...

```
loop here{

   .....
   .....

   if($element.length == 0){

          return true;
  }
   ....
   ..... 
}

---------------------------------------------

loop here{

 ....
 ....
if($element.length == 0){

          return false;
  } 
 ....
 ....

} 
```

不确定在循环中返回 ture 和返回 false 有什么不同。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:12:44.700

答案可能是，有时从 javascript 函数返回特定值可能会导致取消 UI 行为或事件。

例如，如果您有一个 HTML 表单，其中包含执行 javascript 函数的提交操作，那么如果该函数返回 false，它将取消提交。如果函数返回 true，那么它将允许提交完成其整个生命周期。

继续我们的示例，如果表单提交操作在发送数据之前进行了一些数据验证，您可能希望在一个地方执行此操作。如果验证没有通过，它可能会显示一条消息然后返回 false，因此用户可以相应地更改他们的数据，然后再尝试再次提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:15:57.300

第一个说如果元素的长度为null，则返回true，如果是，则另一个返回false。现在在循环中（只是一个示例），如果您在遇到该条件时从元素中删除字母（不好的示例？ :P ）：
对于第一个：
如果长度为空，则返回的`true`可能意味着循环必须停止，这将取决于循环的作用。
对于第二个，情况正好相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:16:36.177

我假设你正在循环使用`.each()`?

then`return true;`将导致循环继续，while`return false;`将导致循环停止。

参考：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

# android - Android和achartengine：为多种用途重置图表值

> ID：11962053
> 
> 赞同：1
> 
> 时间：2012-08-14T23:01:42.183
> 
> 标签：android, achartengine

我有一个绘制动态图表的应用程序，完成后它会保存一些数据并让用户退出。（所以有多个活动）。一旦用户退出，我希望他们能够回来并让图表从 0 动态地重新绘制自己。但由于某种原因，图表总是从它离开的值继续。

这是我尝试过的：

1.  通过调用 clear() 清除 XYSeries。此外，从我的 XYMultipleSeriesDataset 中删除了该系列，并清除了我的 XYMultipleSeriesRenderer 上的文本标签。尽管如此，该图表仍会从中断处继续。

2.  调用 onDestroy() 来清除所有保存的数据。这可以清除图表，但是当用户选择退出时，应用程序崩溃了，因为出于某种奇怪的原因，我正在杀死的活动试图重新创建自己。当我尝试 onDestroy() 和 finish() 时，没有崩溃，但图表保存了上次运行的数据。

3.  调用 super.onCreate(null) 来避免 savedInstanceState。该图仍然保存了它的数据。

任何人都可以帮助我吗？如果我需要发布我的代码或其他任何内容，请告诉我！

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:43:22.790

我通过删除视图然后再次添加他的视图解决了这个问题。

每次我构建一个新的 XYSeries 和新数据集时：

```
mDataset = new XYMultipleSeriesDataset();  //mDataset in my case is global
XYSeries series = new XYSeries("My Series Title");

series.add((double)y,Weight); //call this function several times if you want several points in the same series.

mDataset.addSeries(series);
mChartView = ChartFactory.getLineChartView(this, mDataset, mRenderer);  //mChartView is also global

layout.removeAllViews();  //This remove previous graph
layout.addView(mChartView); //This loads the graph again 
```

我不知道这是否是最好的方法，但它工作得很好并且几乎没有延迟（我只需要在从其他活动返回时更新图表，或者用户输入数据）。

希望这是有用的。BR，阿德里安。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-12T22:06:17.240

每次启动新图表时，您都可以使用一种方法

```
private void removeGraph(){
    //View item = lineChartLayout;
    lineChartLayout.removeAllViews();
    //((ViewGroup) item.getParent()).removeView(item);
} 
```

既然`lineChartLayout`是 a `Layout`，那么它就是 a `ViewGroup`，因此我们可以通过调用`removeAllViews`布局上的方法来删除它上面的所有附加视图，并且所有附加在它上面的视图都将被删除。干杯

# css - Display box in Css

> ID：11962059
> 
> 赞同：-1
> 
> 时间：2012-08-14T23:02:06.653
> 
> 标签：css

I want to display boxes in css for every single users according to their success in any games. For example, a user gets 70 points in my website and there will be a box about 220px width and it displays 70(font-size:80px and different font family.) and right below of it, it will say "Not bad"(about 20 px and Times new Roman font-family). Or if he/she gets 30 points, i want to display that box as their points 30, and below it "Bad". The codes i used for it seems not working at all. Its outputs is very different and silly. Or it keeps changing everytime when the score are changing. In other words, boxes are not stable. The codes:

```
 <span style="font-family: 'Londrina Shadow', cursive; font-size:80px; color:#990;width:220px; padding:10px;border:5px solid gray; margin:0px;">
                70

                  <span style="font-size:18px; font-family:Georgia, 'Times New Roman', Times, serif; color:#CCC;">
                  <br>
                Not Bad
                </span>
                </span> 
```

The output i expected is like this(70 is much bigger than "Not bad")

```
I------------I
I    70      I
I   Not Bad  I
I            I
I------------I 
```

How can i do this? I hope i explained well about what i needed. New in css... Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:15:14.460

This is one approach:

```
div {
    display: inline-block; /* stops the div taking the full width, allowing
                              multiple 'boxes' to appear on the same line */
    border: 1px solid #000;
    width: 220px;
    font-size: 1em;
    text-align: center; /* just because your text seemed centre-aligned;
                           adjust to taste */
}

div > span {
    display: block; /* to force a new-line, and allow a width declaration */
    font-size: 80%; /* font-size 80% of the parent div */
}​ 
```

Note that I've used `div` to wrap the content in place of a `span`, and I've removed the unecessary `br` element.

[JS Fiddle demo](http://jsfiddle.net/davidThomas/9YKEe/3).

# wpf - 在代码隐藏中绑定到局部变量

> ID：11962060
> 
> 赞同：0
> 
> 时间：2012-08-14T23:02:13.727
> 
> 标签：wpf, xaml, windows-8

我必须从 ListView.ItemTemplate 中的代码绑定到局部变量。我尝试过使用数据上下文：

```
 <ListView Name="listView" ItemsSource="{Binding}" DataContext="{Binding}" VerticalAlignment="Stretch" MaxHeight="300" Background="White" Foreground="Black" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" BorderBrush="#FFCDCDCD" BorderThickness="1" ScrollViewer.VerticalScrollBarVisibility="Auto" IncrementalLoadingTrigger="None" SelectionChanged="listView_SelectionChanged" >
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" MaxHeight="25" >
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding Text}" Width="{Binding Width}" />
                            <Image Grid.Row="0" Grid.Column="1" Source="{Binding Image}" Stretch="None" Width="40" HorizontalAlignment="Left" Margin="4,0,0,0" />
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView> 
```

代替 "Width="{Binding Width}"" 我想从 datacontext 获得属性 - 其余数据与 itemsSource 连接。如何“告诉”xaml 使用数据上下文中的属性？（现在它返回错误“找不到属性”）。我不想更改我的 itemsource 并添加宽度，因为它对于每个元素都是恒定的（很明显；））。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:06:13.953

它*确实*使用了`DataContext`，这对于`ItemTemplate`是项目。你可以走上树找到另一个`DataContext`，在这种情况下你想要`ListView's`：

```
{Binding DataContext.Width,
         RelativeSource={RelativeSource AncestorType=ListView}} 
```

# sql - 基于其他选择的 Oracle SQL 选择循环

> ID：11962061
> 
> 赞同：0
> 
> 时间：2012-08-14T23:02:22.673
> 
> 标签：sql, oracle, select, loops, for-loop

我想根据初始选择语句返回的值执行一系列选择语句。本质上循环遍历原始值并将该值用作新选择的标准。

我正在尝试做的一些伪代码（我将如何在 shell 中编写它......）：

```
for location in `select places from tablename where XYZ`
do
   select new_field from tablename where location = '$location';
done 
```

这是我真正想要运行的选择。

给我一份机架清单：

```
select   regexp_substr("MYTABLE"."Serial_Number" ,'[^ ]+', 1, 3) as "Racks"
  from   "MYTABLE" "MYTABLE" 
 where   "MYTABLE"."Data_Center" ='SOMEPLACE' 
   and   "MYTABLE"."Device_Type" ='RACK'
   and   "MYTABLE"."Serial_Number" not like '%WAREHOUSE%' 
```

根据设备数量打印谁应该拥有机架：

```
select count(*) as count, LOB 
 from    "MYTABLE" "MYTABLE" 
 where   "MYTABLE"."Data_Center" ='SOMEPLACE' 
   and   GRID_LOCATION = '$RACK_from_above' and rownum <= 1 group by LOB order by count desc; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:08:50.443

只需将表连接到自身（使用 2 个不同的别名）

```
select count(1) as count, MYTABLE1.LOB, MYTABLE1.GRID_LOCATION  
from    "MYTABLE" "MYTABLE1" , "MYTABLE" "MYTABLE2"   
where   MYTABLE1.Data_Center ='SOMEPLACE'    
 and   MYTABLE1.GRID_LOCATION = regexp_substr(MYTABLE2.Serial_Number ,'[^ ]+', 1, 3)
 and   MYTABLE1.rownum <= 1
 and   MYTABLE2.Data_Center ='SOMEPLACE'
 and   MYTABLE2.Device_Type ='RACK'
 and   MYTABLE2.Serial_Number not like '%WAREHOUSE%'
group by MYTABLE1.LOB, MYTABLE1.GRID_LOCATION
order by count desc; 
```

请注意，出于（在我看来）明显的原因，我将网格位置添加到 group by 和 select 子句 - 如果不清楚，您可以作为单独的问题提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:10:02.603

您可以轻松地将这些组合成一个查询：

```
with thelist as (
    select   regexp_substr("MYTABLE"."Serial_Number" ,'[^ ]+', 1, 3) as "Racks"
      from   "MYTABLE" "MYTABLE" 
     where   "MYTABLE"."Data_Center" ='SOMEPLACE' 
       and   "MYTABLE"."Device_Type" ='RACK'
       and   "MYTABLE"."Serial_Number" not like '%WAREHOUSE%'
)
select count(*) as count, LOB 
from    "MYTABLE" "MYTABLE" 
where   "MYTABLE"."Data_Center" ='SOMEPLACE' and
      GRID_LOCATION in (select racks from thelist) and
      rownum <= 1
group by LOB
order by count desc; 
```

# visual-studio-2010 - 如何在 Visual Studio C++ 2010 IDE 中报告错误

> ID：11962063
> 
> 赞同：0
> 
> 时间：2012-08-14T23:02:54.570
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, intellisense, visual-c++-2010

我有一个程序（向下修剪），可以按我认为的方式编译和运行，但在代码窗口中，星号（运算符 *）下面有一个红色波浪线，鼠标悬停在标题上说，'错误，没有运算符 *匹配这些操作数。我猜波浪线忽略了告诉编译器。如果我将 operator* 更改为名为“dot”的函数，也会发生同样的事情。

如果没有足够的箍可以跳过，我想向 MS 报告。但首先，告诉我编译器和我是否错了，花体字是否正确。

```
#include <vector>
#include <iostream>
//#include "fp_vectors.h"
// Header file =================
#include <type_traits>
#include <algorithm>

namespace dj {

    // Dot-product of two real-valued vectors
    template <typename FirstType, typename SecondType> 
    auto operator*(const FirstType &a, const SecondType &b) -> decltype(a[0]*b[0]){
       std::remove_const<decltype(a[0]*b[0])>::type ret = 0.0;
       const int sz = std::min(a.size(),b.size());
       for(int i=0;i<sz;++i) {
           ret += a[i]*b[i];
       }
       return ret;
    }

} // namespace dj

// End header file ================

using namespace std;
typedef vector<float> fvec;
typedef vector<double> dvec;

using namespace dj;

int main()
{
    const size_t sz = 3;
    fvec fv(sz);
    dvec dv(sz);
    for(size_t i=0; i<sz; ++i) {
        fv[i] = -.89f*(i-1.0f);
        dv[i] = 1.6*(i-2.2);
    }
    double ret = dv*fv; // Earns a red squiggly
    cout << ret << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:11:00.193

Visual Studio 中的错误可能会在[Microsoft Connect](http://connect.microsoft.com/VisualStudio)上报告。

但是，我简要查看了您的代码，并且在 Visual Studio 2012 中没有任何曲线。因此，如果这里有错误，看起来它已经被修复了。

# ios - 关闭 iPad 上的自动锁定：最新信息

> ID：11962064
> 
> 赞同：1
> 
> 时间：2012-08-14T23:02:57.547
> 
> 标签：ios, auto-lock

我一直在阅读有关如何阻止 iOS 设备挂起的问题和答案，从讨论此代码问题的最一般到更具体的问题开始^：

```
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

有些人建议在打开它`NO`之前先打开它（听起来很假，但谁知道），有些人建议你需要经常打开它（什么？），以及其他类似的建议。此外，大部分建议来自 iOS 3.0。

**有人在 iOS 5 中使用它吗？使用它有什么注意事项？**如果我的应用程序在前台（该死的电池），我不希望设备随时挂起（自动锁定）。`idleTimerDisabled`会这样做吗？

* * *

^*这里有很多信息：[https ://stackoverflow.com/search?q=auto-lock+ios](https://stackoverflow.com/search?q=auto-lock+ios)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:33:07.000

设置它`applicationDidBecomeActive:`并取消它，`applicationWillResignActive:`你应该没有问题。

大多数情况下，当人们遇到“无法正常工作”的问题时，用户会切换到其他应用程序（例如相机），他们希望他们的设置能够神奇地恢复！

我在应用商店中有一个应用程序使用它，并且到目前为止没有抱怨它不起作用。根据您的应用，您可能希望为用户提供打开和关闭此功能的选项。

# android - 如何在大型 Android 代码库中快速找到与小型 UI 组件相关的代码？

> ID：11962067
> 
> 赞同：1
> 
> 时间：2012-08-14T23:03:18.037
> 
> 标签：android, codebase, locate

我刚开始作为一名 Android 开发人员工作。我的第一个任务是修复 App 调用 DailyFinance 的几个错误。

一个错误是与 UI 相关的，如果您单击某个页面上的按钮，会弹出一个对话框，但该对话框无法正确显示。我的问题是如何在我不熟悉的代码库中快速找到与对话框相关的代码（xml 布局文件以及活动）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:15:53.537

想到了几种方法：

1.  搜索显示在目标对话框上的任何文本。
2.  搜索按钮文本并找到包含启动目标对话框的按钮的 xml 布局文件
3.  找到 xml 布局文件后，确定按钮 'id' 为 xxxxx，然后您可以进一步搜索包含对 'R.id.xxxxx' 的引用的源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:43:52.837

Set breakpoints on methods in files that implement the dialog. So maybe search for dialog and then put breakpoints inside the dialog. See it it gets hit when your dialog gets pulled up. Or just see where the layouts are set in files that have the word dialog in them. look for R.layout.someLayoutName.

One other suggestion is for some difficult layouts where its tough to see whats going on you can use the HierachyViewer to see the runtime view layouts: [http://developer.android.com/tools/help/hierarchy-viewer.html](http://developer.android.com/tools/help/hierarchy-viewer.html) Its worth running on your app to see the structure of the layouts at runtime which is often hard to see these relationships in the layout files before they have been inflated.

BTW, I was a student of CS and the biggest mistake I ever made was not to learn the debugger inside and out. Its without a doubt the most powerful ally you have to learn as well as fix bugs. If you think about it, code really is only an abstraction until you see it running inside the debugger.

# php - 这是正确使用数组和 isset 吗？

> ID：11962068
> 
> 赞同：0
> 
> 时间：2012-08-14T23:03:20.483
> 
> 标签：php, forms, validation, post, submit

所以我得到了这段代码，其中一部分是一个表单，所有字段都是绝对必需的。

我只是找不到明确的文档来满足我验证所有内容的需求。

我会做这样的事情吗？

```
$foo = $_POST['foo'];
$bar = $_POST['bar'];
$lorem = $_POST['lorem'];
$ipsum = $_POST['ipsum'];

$isSet = array($foo, $bar, $lorem, $ipsum);

if(isset($isSet)) { /* Do the stuff */ } 
```

或者，还有更好的方法？我真的不想做

```
if(isset($foo) && isset($bar) && isset($lorem)........ 
```

因为我有大约 12 个必填字段

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:06:19.030

你可以做：

```
if (isset($foo, $bar, $lorem, $ipsum)) {.....} 
```

为您节省一步。

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:26:21.333

请记住，如果您有一个空字符串，isset 将返回 true。所以，技术上

```
isset($_POST['foo']) 
```

如果 foo 使用空白值传入，则返回 true：

```
foo=&bar=&...etc. 
```

还，

```
isset(array()) 
```

返回真；

如果“”不是这些变量之一的有效值，您将需要执行以下操作：

```
$requiredFields = array('foo', 'bar', 'lorem', 'ipsum');

$allValid = true;

foreach ($requireFields => $fieldName) {
    if (isset($_POST[$fieldName]) && $_POST[$fieldName] != "") {
        $allValid = $allValid && true;
    } else {
        $allValid = $allValid && false;
    }
}

if ($allValid) {
    //...success...
} else {
    //...failed...
} 
```

您基本上检查变量是否已传递，并且变量未设置为“”。

希望有帮助。

# oracle - 如何处理返回 2 个不同结果的过程

> ID：11962076
> 
> 赞同：0
> 
> 时间：2012-08-14T23:03:59.257
> 
> 标签：oracle, powerbuilder

我有一个在 Oracle 9g 中创建的存储过程，它根据参数返回具有不同列的游标，它是这样的：

```
CREATE OR REPLACE PROCEDURE ASCHEMA.SP_TWOCURSORS
(
    aParam NUMBER,
    P_RETURN OUT SYS_REFCURSOR
)
IS
BEGIN
    IF aParam = 1 THEN
        OPEN P_RETURN FOR
            SELECT
                a.column1, (number)
                a.column2  (varchar2)
            FROM
                table1 a;
    ELSE
        OPEN P_RETURN FOR
            SELECT
                b.column1, (varchar2)
                b.column2, (number)
                b.column3  (number)
            FROM
                table1 b;
    END IF;
END; 
```

我必须在 PowerBuilder 中使用此过程并将返回的数据传递给 DataWindow1 或 DataWindow2，根据返回的游标，这些数据窗口在运行时通过执行来自其他源的另一个过程来填充。我不能修改数据库对象（比如将 sp 一分为二），只能修改 PowerBuilder 代码。我的问题是如何以优雅的方式处理这种情况。我有一些想法，但不知道它是否可行：

1.  创建一个处理从 sp 返回的两个游标中涉及的每一列的 DataWindow 对象，然后将每一行复制到预期的 DataWindow。
2.  创建一个 DataStore 并使用`Create`方法传递 sp，然后复制预期 DataWindow 中的行。
3.  动态执行该过程，获取每一行并将每个结果添加到预期 DataWindow 的新行中。

第一个没试过，因为列多，做起来要花很长时间。第二个看起来不错，但我不知道如何处理没有 DataWindow 对象的 DataStore 并且不知道这是否可能[(1)]。第三个是我解决这个问题的最后一个选择。我想在开始实施此解决方案之前询问人们，因为我是 PowerBuilder 的新手，即使我不会在它上面工作太久，我也想以正确的方式去做。

谢谢您的帮助。

(1) 我找到了这篇关于使用[自定义](http://manuals.sybase.com/onlinebooks/group-pb/pbg0900e/dwprgug/@Generic__BookTextView/5124)数据存储的文章，但我不知道我是否只能使用 1 个数据存储或者我应该使用 2 个。此外，对于 Oracle 连接，我不使用 SQLCA，而是使用另一个事务对象，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:27:33.527

把事情简单化。

您知道存储过程的详细信息。如果你从 PB 调用这个 sp，你`aParam`在调用之前就已经知道它了。为什么不定义 2 个数据窗口，每个版本的结果一个？

每个 DW 都会有一个检索参数（传递给存储过程的那个），并将从 sp 中获取其结果。

在运行时，根据检索参数，在检索值之前，将对应`dataobject`的数据分配给 on 的数据窗口对象：适合该部分`aParam = 1`的 DW 或适合该`else`部分的 DW。

# svg - SVG 模式中使用的圆顶线

> ID：11962077
> 
> 赞同：2
> 
> 时间：2012-08-14T23:04:07.437
> 
> 标签：svg

`<pattern>`当前使用带有一堆元素的 SVG`<line>`元素会导致它具有一种逐渐变细的边缘。我尝试了一堆不同的 CSS 样式来解决这个问题，但没有任何效果。这是一个带有蒙版针迹的圆圈的代码：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="500" width="500">
  <defs>
    <pattern id="stripe" patternUnits="userSpaceOnUse" width="20" height="20">
      <line x1="0" y1="0" x2="20" y2="20" />
    </pattern>
    <mask id="mask">
      <rect height="500" width="500" style="fill: url(#stripe)" />
    </mask>
    <style>
      #stripe line {
        fill: white;
        stroke: white;
        stroke-linecap: square;
        stroke-linejoin: miter;
        stroke-width: 10px;
      }
      g {
        mask: url(#mask);
        stroke-linecap: square;
        stroke-linejoin: miter;
      }
      circle {
        fill: green;
      }
    </style>
  </defs>
  <g>
    <circle cx="250" cy="250" r="200" style="fill: rgba(0, 255, 0, 0.2);" />
  </g>
</svg> 
```

这是[一个看起来像什么的小提琴](http://jsfiddle.net/SpKZB/)。没有任何组合`stoke-linecap`对`stroke-linejoin`我有用。我是否需要`<path>`在整个面具上画一个完整的？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-14T10:01:32.350

好吧，我知道这个答案已经晚了 2 年，但我在研究另一个问题时偶然发现了这个问题，并认为我会为任何可能遇到它的人投入 2 美分。

Duopixel 强调了这里的问题：图案只是没有正确平铺。

您的解决方案肯定会通过覆盖两个非平铺图案来隐藏非平铺角来掩盖问题，但是如果您使图案更宽并添加彼此偏移的额外线条，并偏移以确保它们永远不会重叠tile 你可以创建一个有效的模式。您可以一直向上增加笔画宽度，而角落不会出现任何问题。

```
<pattern id="stripe" patternUnits="userSpaceOnUse" width="40" height="20">
  <line x1="-10" y1="0" x2="10" y2="20" />
  <line x1="10" y1="0" x2="30" y2="20" />
  <line x1="30" y1="0" x2="50" y2="20" />
</pattern> 
```

看到[这个小提琴](http://jsfiddle.net/sqrz3/)

不过，我实际上喜欢原始问题的模式！我可能不得不在某个地方找到它的用途:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T16:14:49.353

哇！什么骑。

看到 Duopixel 的答案后，我开始了一条线索。在我理解了适用于模式的边界框之前，我不知道有可能实现这种效果。

谷歌搜索把我带到了[这个邮件列表答案](http://tech.groups.yahoo.com/group/svg-developers/message/63599)，起初没有多大意义，直到原作者返回并获得洞察力（对不起，链接太多）。我回顾了答案，看到了解决这个问题的潜力。

**解决方案：**
您必须在正确的坐标中叠加两个图案！

**代码：（**演示 - [http://jsfiddle.net/66UDU/](http://jsfiddle.net/66UDU/)）

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="500" width="500">
  <defs>
    <pattern id="stripe1" class="stripe" patternUnits="userSpaceOnUse" width="20" height="20">
      <line x1="0" y1="0" x2="20" y2="20" />
    </pattern>
    <pattern id="stripe2" class="stripe" patternUnits="userSpaceOnUse" x="6" y="6" width="20" height="20">
      <line x1="0" y1="0" x2="20" y2="20" />
    </pattern>
    <mask id="mask">
      <rect height="500" width="500" style="fill: url(#stripe1)" />
      <rect height="500" width="500" style="fill: url(#stripe2)" />
    </mask>
    <style>
      .stripe line {
        fill: white;
        stroke: white;
        stroke-width: 4px;
      }
      g {
        mask: url(#mask);
      }
      circle {
        fill: rgba(0, 255, 0, 0.25);
      }
    </style>
  </defs>
  <g>
    <circle cx="250" cy="250" r="200" />
  </g>
</svg> 
```

=)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T01:20:05.663

这是一个有趣的问题。它看起来像线帽问题，但实际问题是图案的线角位于坐标之外。这是一个图表，可以了解正在发生的事情：

![在此处输入图像描述](../Images/1d02281a56b3352629fb4842cd761079.png)

您可以使用 `<pattern id="stripe" patternUnits="userSpaceOnUse" width="30" height="30">`或移动线条的坐标使图案变大。在粗略的搜索中，我找不到任何可以让您的模式重叠或显示溢出的指令，但其他人可能知道解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-02T14:32:49.713

该帖子很旧，但是当我寻找解决方案时，也许有人也需要像我这样的另一种解决方案。如上所述，对角线图案有问题，这就是为什么我创建了一个水平直线图案并用`patternTransform="rotate(45)"`. 然后只`<line />`需要 1 个而不是 2 个重叠的。

例子：

```
<pattern id="stripe45" className="stripe-pattern" patternUnits="userSpaceOnUse" patternTransform="rotate(45)" width=".2" height=".2">
      <line x1="0" y1=".1" x2=".2" y2=".1" />
    </pattern> 
```

# c# - Mongo DB连接的正确方法C#异常处理

> ID：11962078
> 
> 赞同：3
> 
> 时间：2012-08-14T23:04:12.190
> 
> 标签：c#, mongodb, exception-handling

我的 mongoDB 托管在 Mongo Lab 上，我使用 C# 作为代码来检索数据。

10 次 mongo 查询中有 1 次抛出异常：

```
System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 
```

我要求 MongoLab 调查这段时间的日志报告，他们说他们这边没有任何登录，并建议我使用正确的 mongo 异常处理。

我的问题：我应该如何在 C# 中处理 Mongo 异常？

我应该这样做吗？在 catch 内再次查询一次或两次：

```
 /*Connection part

    ----
    ----
    */
    List X<XYZ> = new List<XYZ>;
    try{
    var Query = from o in collection.AsQueryable<XYZ>()
                             where ...
                             select o;

    List= Query.ToList();
    }
    catch(MongoException e){
var Query = from o in collection.AsQueryable<XYZ>()
                             where ...
                             select o;
    List= Query.ToList();
    } 
```

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T23:21:06.083

您永远不应该将程序逻辑的任何重要部分放在`catch`子句中。如果第二次抛出异常会发生什么？换句话说，`catch`子句中的所有内容都应该足够简单，以保证不会失败。

您可以做的是将整个块放入一个循环中，并设置一个重试计数器以在它失败预定（或可配置）次数时退出：

```
List<XYZ> list = null;
const int maxRetries = 3; // could also be a configuration parameter

int retries = maxRetries;
while ((retries > 0) && (list == null)) {
  try{
    var Query = from o in collection.AsQueryable<XYZ>()
                         where ...
                         select o;

    list = Query.ToList();
  }
  catch {
    retries--;

    if (retries < 1) {
      throw;
    }
  }
} 
```

这将尝试您的查询最多 3 次。如果查询成功并成功转换为List，则循环退出。如果抛出异常，则重试计数器递减。如果达到最大重试次数，它将重新抛出异常。

# html - 如何排除活动 LI（菜单）的悬停？

> ID：11962081
> 
> 赞同：1
> 
> 时间：2012-08-14T23:04:29.640
> 
> 标签：html, css

我在 CSS 中创建了一个导航菜单。如果一个项目（`LI`）是`active`如何防止它可以悬停的？

下面的CSS：

```
.page-header .menu li {
    float:left;
    display: inline;
    margin-right: 2px;
    line-height: 34px;
} 

.page-header .menu li a.active {
    background-color: white;
    font-weight: bold;
    color:black;
}

.page-header .menu li a:hover {
    background-color: red;
} 
```

HTML：

```
 <ul class="menu">
        <li><a class="active" href="">Item 1</a></li>
        <li><a href="">Item 2</a></li>
        <li><a href="">Item 3</a></li>
    </ul> 
```

-

`class="active"`应该禁止悬停。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:07:31.850

出来选择它：

```
.page-header .menu li a.active,
.page-header .menu li a.active:hover {
    background-color: white;
    font-weight: bold;
    color:black;
} 
```

[http://jsfiddle.net/userdude/RSwnP/](http://jsfiddle.net/userdude/RSwnP/)

请注意，我添加了`a.active:hover`，但也请注意[选择器特异性](http://www.w3.org/TR/CSS2/cascade.html#specificity)在这里覆盖了它。请参阅[this fiddle](http://jsfiddle.net/userdude/RSwnP/2/)以获取示例（您可能想使用也可能不想使用），其中我使一个比另一个“不太具体”；我已经`li`从`:hover`选择器中删除了。

# asp.net - 当我创建一个模态及其覆盖时，覆盖不会扩展到整个文档

> ID：11962086
> 
> 赞同：0
> 
> 时间：2012-08-14T23:05:18.390
> 
> 标签：asp.net, html, css, modal-dialog

因此，话虽如此，基本上，总是会出现这种情况。

- 模态和覆盖出现，

-用户向下滚动

-用户可以点击覆盖下的东西

我该如何解决？现在，主要问题是覆盖。

它的CSS如下：

```
 .overlay
    {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        display: none;
        z-index: 7000;
    } 
```

由于我在asp页面中使用它，因此html的深度如下：

```
<html>
  <body>
    <form>
      <div class = "overlay"></div>
      <div class = "modal">...</div>
    </form>
  </body>
</html> 
```

我不确定这是否意味着什么。

**我们可以安排它以便它可以拉伸叠加层的高度/宽度，或者我们可以使它在滚动时使叠加层和模态移动。我只是不知道该怎么做**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:18:34.197

将此用作您的叠加层：

```
.overlay {
        background: transparent url(overlay.png) repeat top left;
        position: fixed;
        top: 0px;
        bottom: 0px;
        left: 0px;
        right: 0px;
        z-index: 100;
    } 
```

这是overlay.png：（右键单击并另存为） ![这可以是上面背景中引用的图像。](../Images/03314ece44239f4b4878b56fd9a8187a.png)

这是叠加层的标记：

```
<div class="overlay" id="overlay1" style="display:none;"></div> 
```

# android - 覆盖的文件未在 Android 上更新

> ID：11962089
> 
> 赞同：1
> 
> 时间：2012-08-14T23:05:43.900
> 
> 标签：android

我正在将几个文件写入 SD 卡上的目录，创建一些文件并覆盖其他文件。我的平板电脑连接到我的 Windows 笔记本电脑，我正在查看这个目录并打开这些文件。在我的 Android 应用程序中，关闭每个文件后，我确保调用`MediaScannerConnection.scanFile()`. 这确保了所有新文件立即显示出来，但不知何故，被覆盖的文件似乎仍然保留了它们的原始内容——也就是说，直到我拔下 USB 电缆并将其重新插入。

这是在运行 ICS 的 Acer Iconia A500 上。

为什么它不起作用，我该如何解决？

# javascript - HTML5 中是否可以有多个 data-{name} 属性？

> ID：11962091
> 
> 赞同：15
> 
> 时间：2012-08-14T23:05:55.660
> 
> 标签：javascript, html

有没有办法从这个元素中获取所有 3 个数据值？

```
 <div id="viewport" 
    data-requires='js/base/paths'
    data-requires='js/base/dialog'
    data-requires='js/base/notifier'> 
```

这对于我正在启动的项目非常有用。有了这个，我可以加载所需的 js 模块并将它们链接到 dom。我知道这听起来可能很奇怪，但我在这里尝试一些新的东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T23:16:02.577

您的问题的答案是 HTML 不支持同一属性的多个实例。您可能检索该属性的所有典型方式将仅检索这三种方式之一。

解决此问题的通常方法是使用属性的单个实例并将多个路径作为值。对于路径，它们通常用分号分隔。

```
<div id="viewport" data-requires='js/base/paths;js/base/dialog;js/base/notifier'> 
```

并且，然后使用代码将多值属性分解为一个数组。

```
var requiredPaths = document.getElementById("viewport").getAttribute("data-requires").split(";"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-14T23:20:00.263

`data-`您可以在属性中使用更复杂的结构。

而不是这个：

```
<div id="viewport" 
data-requires='js/base/paths'
data-requires='js/base/dialog'
data-requires='js/base/notifier'> 
```

你可以这样做：

```
<div id="viewport"
data-requires='["js/base/paths", "js/base/dialog", "js/base/notifier"]'>
</div> 
```

使用证明`jQuery.data()`（只是以这种方式检索数组：）`jQuery('#viewport').data('requires')`在这里：http: [//jsfiddle.net/3StZs/](http://jsfiddle.net/3StZs/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T23:14:56.507

如果用某种东西将它们分开，然后将它们分开并放入一个数组中，则可以将它们全部放在一个中。

```
var arrayData = document.getElementById('viewport').getAttribute('data-requries');
var arr = arrayData.split(',');

for (i = 0; i < arr.length; i++) {
    console.log(arr[i]);
} 
```

[http://jsfiddle.net/S7D2D/1/](http://jsfiddle.net/S7D2D/1/)

# php - 表格中的最新事件，行的颜色发生变化

> ID：11962093
> 
> 赞同：0
> 
> 时间：2012-08-14T23:06:13.937
> 
> 标签：php, mysql, colors, html-table, row

我正在使用此代码获取最新事件：

```
 <?php
$all_events = array();
$ten_events = array();
for($i = 0; $events = mysql_fetch_object($events_resource); $i++){
if($i < 5){
  $ten_events[] = $events;
}
$all_events[] = $events;
}  
?>

<?php foreach($ten_events as $events){ ?>

<tr>
<td class="row_<?PHP echo $i % 2; ?>"><?php echo $events->date; ?></td>
<td class="row_<?PHP echo $i % 2; ?>"><?php echo $events->category; ?></td>
<td class="row_<?PHP echo $i % 2; ?>"><?php echo $events->who; ?></td>
<td class="row_<?PHP echo $i % 2; ?>"><?php echo $events->location; ?></td>
</tr>

<?php } ?> 
```

现在我有这段代码让它最终工作，但我不知道如何将它与上面的代码结合起来：

```
<?PHP
$i = 0;
while($row = @mysql_fetch_row($result)){
?>

<?PHP
$i++;
}
?> 
```

CSS 类“row_0”和“row_1”已准备就绪。

```
.row_0 {
background-color:        #424140;
padding: 2px;
color: #f3f2ea;
}
.row_1 {
background-color:        #555352;
padding: 2px;
color: #f3f2ea;
} 
```

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:12:07.713

```
<?php
$all_events = array();
$ten_events = array();

for($i = 0; $events = mysql_fetch_object($events_resource); $i++){

    if($i < 5){

        $ten_events[] = $events;

    }

    $all_events[] = $events;

}  

$i = 0;

foreach($ten_events as $event){ 

    $row = $i % 2;

    echo "<tr>
            <td class='row_{$row}'>{$event->date}</td>
            <td class='row_{$row}'>{$event->category}</td>
            <td class='row_{$row}'>{$event->who}</td>
            <td class='row_{$row}'>{$event->location}</td>
          </tr>";

    $i++;

} 
?> 
```

我会这样。

# facebook - 让 Facebook 的新付款人促销活动发挥作用

> ID：11962096
> 
> 赞同：0
> 
> 时间：2012-08-14T23:06:21.977
> 
> 标签：facebook, facebook-graph-api, payment, facebook-credits

有没有人能够让[Facebook 最近的开发者博客文章](https://developers.facebook.com/blog/post/2012/08/13/drive-payer-conversion-with-new-api/)中描述的新付款人促销活动起作用？根据[文档](https://developers.facebook.com/docs/credits/payer_promotion/)，您应该能够`is_eligible_promo`通过 Graph API 查询新字段。

像这样格式化调用只会导致为我返回“id”字段。

```
 https://graph.facebook.com/USER_ID?fields=is_eligible_promo?access_token=USER_ACCESS_TOKEN 
```

我错过了什么吗？我是否必须在某处注册或启用此功能？或者它只是不能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:18:37.800

在使用朋友的帐户进行测试后，文档似乎不正确。

如果用户**符合条件**，它将执行它所描述的操作并返回`is_eligible_promo`带有“1”作为值的字段。

如果用户**不符合条件**`is_eligible_promo`，则根本不会返回该字段。

文档说“此查询在其响应中返回以下数据：值 1 表示用户符合条件或 0 表示用户不符合条件。” 显然这是不正确的。

我的帐户不符合条件，因此它没有返回此字段的值。

# php - 使用 jquery / ajax 更新会话数组

> ID：11962104
> 
> 赞同：0
> 
> 时间：2012-08-14T23:06:57.847
> 
> 标签：php, jquery, ajax

这次我有一个理论上的问题：

情况（在 PHP 网站上）：

1.  网站上的成员可以将 cd 添加到他们的“收藏夹列表”中
2.  点赞按钮的 onClick，jQuery/ajax 将 cd 广告添加到收藏夹列表
3.  另一个文件更新会话数组 [favCDS]
4.  目标：用户总是实时更新他的最新点击，因为实时数据是从存储的数组中生成的）

问题：

是否可以通过在后台运行的文件通过 jQuery/ajax 调用和更新的函数来更新个人成员值的 SESSION 数组？

我想它会在一个文件中更新所有内容，但我想知道你们对此是否有任何想法/想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:10:23.283

PHP 会话即使在脚本运行完成后仍然存在，因此您不需要在服务器的后台运行 PHP 文件。

示例 PHP 文件（由 ajax 函数调用，假设 ajax 函数提交带有 CD id 的 POST 请求）：

**更新-favorite.php**

```
$_SESSION['favCDS'][] = $_POST['cd-id']; 
```

这样，当用户导航到新页面时，该页面可以通过访问此会话数组并相应地生成 HTML 来保存最喜欢的 CD。

# php - 从 HTML 表中获取用户输入的数据

> ID：11962109
> 
> 赞同：0
> 
> 时间：2012-08-14T23:07:42.940
> 
> 标签：php, html-table

这是一个内部订单接收网页。[它看起来像这样。](http://www.invoice-templates.com/invoice1b.gif)我假设我想要一个产品的 HTML 表格（来自下拉框）和数量。我的问题是如何在按下保存后从表中获取数据。他们可能已经输入了一种产品或 40 种产品，因此它需要有点动态，而不仅仅是 40 个输入框并从 $_POST 接收它们（或者这可能是我需要做的）。我想我在问如何解决这个问题。这是我可以用 PHP 做的事情还是我需要使用 js？

谢谢。如果我不清楚（明显的可能性），请告诉我，我会再尝试解释我所追求的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:43:23.507

use arrays as input field names.. like quantity[0], quantity[1]...quantity[10] etc... then use foreach to process incoming $_POST array...

here is how you'll implement lots of rows and cols.

```
<form method="post">
<table>
<?
$rows=10;
$cols=3;
$colsArr = array();
$colsArr[0] = "qty";
$colsArr[1] = "desc";
$colsArr[2] = "unitprice";
for($i=0;$i<$rows;$i++)
{
    echo "<tr>";
    for($j=0;$j<$cols;$j++)
    {
        $name = $colsArr[$j];
        echo "<td><input type=text name=".$name."[" . $i ."]></td>";
    }
    echo "</tr>";
}

?>
</table>
<input type="submit">
</form> 
```

take a look at this code's output's source. when you post such a form you'll get: (i'm posting 3 items with quantity, 1,3,5 with description desc1,desc2,desc3 and prices 1.00$,2.00$,5.00$)

```
Array ( [qty] => Array ( [0] => 1 [1] => 3 [2] => 5 [3] => [4] => [5] => [6] => [7] => [8] => [9] => ) [desc] => Array ( [0] => desc1 [1] => desc2 [2] => desc3 [3] => [4] => [5] => [6] => [7] => [8] => [9] => ) [unitprice] => Array ( [0] => 1.00$ [1] => 2.00$ [2] => 5.00$ [3] => [4] => [5] => [6] => [7] => [8] => [9] => ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:12:52.027

您可以创建一个以数组形式收集数据的表单，例如：

```
<tr>
    <td><input type="text" name="item[]" /></td>
    <td>
    <select name="qty[]">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
    </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:10:26.607

你可以用php来做，有一个添加行按钮，提交表单，不要保存它，只需重新显示发布数据并添加另一行更多输入。但是 JS 版本可能会给用户更好的体验

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T23:11:12.603

是的，您可以使用`$_POST`.

是的，使用 PHP 是可能的。您可能还需要某种类型的数据库来处理这个问题

# jquery - 具有动态高度的 CSS 三角形

> ID：11962111
> 
> 赞同：2
> 
> 时间：2012-08-14T23:08:10.507
> 
> 标签：jquery, css

想知道是否有人可以帮助解决我遇到的 css 问题.. 看到这个 jsbin：http: [//jsbin.com/uviyat/2/edit](http://jsbin.com/uviyat/2/edit)

注意“更长的措辞示例”——如何让三角形箭头指示器垂直缩放以动态填充选定的蓝色区域高度？（三角形是在最后一个 css 规则中生成的..）

我难住了！有人有什么想法吗？

提前致谢..

**编辑**- 自从 Zoltans 的回答以来，我在这里使用了 Jquery：http://jsbin.com/uviyat/12/edit [不确定](http://jsbin.com/uviyat/12/edit) 它是否是最好的方法？值“16”从何而来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:18:31.400

您不能自动拉伸三角形。完成您想要的最简单的方法可能是为更高的菜单项定义一个小子类 - [http://jsbin.com/uviyat/3/edit](http://jsbin.com/uviyat/3/edit)

```
<li class="selected tall"><a href="#">Longer  Wording Example</a></li>

<style>
.filters .selected.tall:after {
  margin-top: -36px;
  border-width: 20px 0 20px 7px;
}
</style> 
```

...

**更新**

`background-size: cover`或者，您可以在`:after`伪元素上使用 CSS3 。但在这种情况下，您必须创建三角形的图像并将其设置为背景。这是一个 [**演示**](http://jsfiddle.net/5Q8zX/2/)

```
li {
    width: 100px;
    border: 1px solid #eee;
    margin: 3px;
    position: relative;
}

li:after {
    content: ' ';
    display: block;
    position: absolute;
    right: -20px;
    width: 20px;
    top: 0;
    bottom: 0;
    background: url(http://lorempixel.com/20/20) no-repeat;
    background-size: cover;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T20:21:26.333

[http://jsbin.com/hefavo/1/edit](http://jsbin.com/hefavo/1/edit)

嘿，我偶然发现了这个问题，试图做类似的事情。查看我的解决方案。它并不完美，因为您无法更改箭头的角度（边框宽度不能是百分比），这意味着箭头始终会伸出一定距离。

例如，如果你尝试一个三行高的东西，它会看起来很奇怪。但是，要对此进行调整，您可以简单地将前后伪元素的“margin-left”设置为 15px。

工作原理：每个 li 元素都有一个 before 伪元素，它是箭头的下半部分，是一个延伸到 500 x 1000 的 CSS 三角形。after 伪元素是上半部分。然后将三角形定位到菜单项的右侧（不完全是……见下文），左边距设置控制它突出的程度。

```
.filters .selected:before {
  position:absolute;
  height: 0;
  top: 50%;
  // transform:scaleY(-1);
  max-width: 300%;
  border-right: 500px solid #3aa5de;
  border-bottom: 1000px solid transparent;
  content: "";
  left: 50%;
  border-radius:0;
  margin-left: 10px;
  transform: scaleX(-1) translateX(100%);
}

.filters .selected:after {
  position:absolute;
  height: 0;
  top: 50%;
  transform:scaleY(-1) scaleX(-1) translateY(100%)     translateX(100%);
  max-width: 300%;
  border-radius:0;
  border-right: 500px solid #3aa5de;
  border-bottom: 1000px solid transparent;
  content: "";
  left: 50%;
  margin-left: 10px;
} 
```

li 元素本身用于屏蔽我们不需要的三角形部分。由于三角形超出了前面的“100%”，我将 li 元素宽度设置为 200%，将伪元素位置设置为 50%，并将 a 元素（菜单项）设置为 50% 宽度。

```
.filters li{
  overflow:hidden;
  width: 200%;
  position:relative;
}
.filters li a{
  width:50%;
  position:relative;
  z-index: 1;
} 
```

编辑：在css的相关位中添加

# sql - oracle sql中的求值函数

> ID：11962114
> 
> 赞同：0
> 
> 时间：2012-08-14T23:08:21.573
> 
> 标签：sql, oracle

我尝试执行以下操作：

```
SQL> select 1>2 from dual;
select 1>2 from dual
        *
ERROR at line 1:
ORA-00923: FROM keyword not found where expected 
```

但是这些都可以

```
SQL> select 1 from dual;

     1
----------
     1

SQL> select 2*3 from dual;

       2*3
----------
     6 
```

如何让 Oracle 以`1>2`简单的方式进行评估（无需编写单独的 PL/SQL 函数）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:11:23.133

嗯，这是一个布尔值。尝试这个：

```
select (case when 1>2 then 1 else 0 end)
from dual 
```

Oracle 不会将布尔值视为数字

# arduino - 带 SPI 的 Arduino WiFly 屏蔽

> ID：11962116
> 
> 赞同：0
> 
> 时间：2012-08-14T23:08:33.487
> 
> 标签：arduino

我有一个带有[WiFly](https://www.sparkfun.com/products/9954) [shield](http://www.arduino.cc/en/Main/ArduinoShields)的 Arduino Uno 。我想在 Arduino 上使用 5 个[PWM](http://en.wikipedia.org/wiki/Pulse-width_modulation)端口来控制电机，但是 WiFly 使用了一些 PWM 端口。调查一下，我想我需要使用[SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)总线，但是这可以通过 WiFly 屏蔽实现吗？或者我该怎么做？

我应该如何连接电机以便它们可以与 WiFly 一起工作？

你能指出一个教程（我找不到一个与我的案例足够相似的教程）或者你能给我一些指导吗？那很好啊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:04:51.777

让 WiFly 模块工作所需的只是与它的串行链接。一种选择是使用软串行库。通过这种方式，您可以选择要使用的 arduino 引脚（只需要 2 个，其他所有引脚都可用于控制您的电机）。有关完整示例，请参阅[本教程](http://cairohackerspace.blogspot.no/2011/05/beginners-guide-to-connecting-and.html)。

# sql-server - 我可以在 IntelliJ IDEA 中编辑 MS SQL 存储过程吗？

> ID：11962118
> 
> 赞同：2
> 
> 时间：2012-08-14T23:08:51.283
> 
> 标签：sql-server, intellij-idea

我google了一下，但没有找到答案。

有没有办法在 IntelliJ IDEA 中编辑（或至少查看）MS SQL 存储过程？我知道我可以直接从系统表中获取它们，但也许有一个我不知道的插件？

我使用 IDEA 11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:39:32.143

根据@CrazyCoder 的建议，我刚刚下载了 EAP build .29，该功能在那里工作！

# ruby-on-rails - 在 Heroku 上使用 CarrierWave 将上传的存档提取到 S3

> ID：11962120
> 
> 赞同：4
> 
> 时间：2012-08-14T23:09:06.363
> 
> 标签：ruby-on-rails, heroku, amazon-s3, carrierwave

我想做一些我认为很简单的事情：

*   有一个带有这些控件的表单：
    *   一个文件的文件上传
    *   复选框是否应提取此文件
    *   我将在其中指定应链接到哪个文件的文本输入（仅在选中复选框时才需要）-`index_file`
*   提交表格后：
    *   如果**未**选中该复选框，则通过 CarrierWave 将文件上传到 S3 到指定的`store_dir`
    *   如果选中该复选框**，**则从存档中提取所有文件（我希望只有 ZIP 存档；我需要保留目录结构），将提取的文件上传到指定的`store_dir`并设置`index_file`in 数据库（我不需要保存到数据库中的任何内容关于其他提取的文件）

正如我所发现的，由于 Heroku 的限制，这不是一件容易的事。这些文件会很大（数百个 MiB 或几个 GiB），所以如果可能的话，我不想从 S3 重新下载这个文件。

我认为使用 Delayed Job 或 Resque 可能会奏效，但我不确定该怎么做，什么是我问题的最佳解决方案。

有谁知道如何使用尽可能少的资源来解决它？如果在 Heroku 上不可行，我也可以将 CarrierWave 更改为另一个上传器（Paperclip 等）和我的托管服务提供商。

我也在考虑使用 CloudFlare，这仍然可以正常工作吗？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:02:22.403

根据[这个 heroku 支持电子邮件](https://groups.google.com/forum/?fromgroups#!topic/heroku/Ry6RbEnaIXk%5B1-25%5D)，/tmp 目录的大小似乎很多。你只需要自己清理一下，这样 Heroku 作为一个平台就不是问题了。

几篇文章可以帮助您解决问题：

1.  [https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-Carrierwave-work-on-Heroku](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-Carrierwave-work-on-Heroku) - 它解释了如何配置您的应用程序以使用 /tmp 目录作为 CarrierWave 的缓存目录。请注意以下行：

    use Rack::Static, :urls => ['/carrierwave'], :root => 'tmp' # 添加这一行

    这指示 rack 从 /tmp 目录提供 /carrierwave/xzy （用于临时存储图像）

2.  然后，使用[uploader.cache！方法](http://rubydoc.info/gems/carrierwave/CarrierWave/Uploader/Cache#cache!-instance_method)，可以故意缓存入站上传的文件。存储后，您可以进行检查以确定是否调用[uploader.store！将内容提升到 S3 的方法](http://rubydoc.info/gems/carrierwave/CarrierWave/Uploader/Store#store!-instance_method)（假设您将 S3 配置为 CarrierWave 的存储。

# objective-c - NSRunAlertPanel 暂停 NSTimer？

> ID：11962122
> 
> 赞同：0
> 
> 时间：2012-08-14T23:09:23.603
> 
> 标签：objective-c, cocoa

我注意到在我的程序中，当我调用 NSRunAlertPanel() 时，它等待返回（用户尚未单击按钮）NSTimer() 不会触发。它会定期触发，直到 NSRunAlertPanel() 行，但在用户单击对话框上的按钮之前不会再次调用。

有没有办法让计时器保持运行，即使对话框在屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:26:41.630

警报面板正在启动自己的事件循环（通过[`-[NSApplication runModalForWindow:]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/runModalForWindow%3a)，与最初安排计时器的（可能是主）事件循环分开。这是为了防止用户在处理警报之前与应用程序的任何其他元素进行交互。

在我的脑海中，有两种方法可以让定时器在面板出现时仍然触发：运行主运行循环，并将定时器添加到面板的运行循环中。老实说，我不确定其中任何一个会如何解决。

首先，您可以很容易地获得应用程序的主运行循环：`[NSRunLoop mainRunLoop]`，然后[`runUntilDate:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/doc/uid/20000321-BABCHDGI)在将来的短时间内（不到一秒）告诉它。这将需要您设置一个 ( `while`) 循环，让主运行循环和模态运行循环交替运行一小段时间。这里的问题是让主运行循环处于活动状态将允许处理输入，从而破坏面板的模式。

对于第二个，您只需参考计时器，然后执行`[[NSRunLoop currentRunLoop] addTimer:forMode:]`. 我在这里不确定的是计时器的触发日期将如何与重新添加到另一个循环进行交互，但您可以尝试一下。

希望我是个白痴并且遗漏了一些非常明显的东西，并且很快就会出现另一个答案以及正确的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:30:04.513

感谢 W'rkncacnter 的建议！下面是我的解决方案的净化版本。

将计时器放在屏幕上时，我使用：

```
timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES]; 
```

这会每秒调用以下代码：

```
- (void) updateTimer {
    secondsRemaining--;
    if (secondsRemaining <= 0) {
        [timer invalidate];
        [[NSApplication sharedApplication] abortModal];
        [self finishStuff];
    }

    [self updateTimerText];
}

- (void) updateTimerText {
    NSInteger seconds = (int) secondsRemaining;
    NSInteger hours = seconds / (60 * 60);
    seconds -= hours * (60 * 60);
    NSInteger minutes = seconds / 60;
    seconds -= minutes * 60;

    [timerText setStringValue:[NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds]];
} 
```

注意“abortModal”代码。如果 NSRunAlertPanel() 在计时器用完时打开，它将被关闭。当我想显示对话框时，我运行以下代码：

```
[[NSRunLoop currentRunLoop] addTimer:timer
                             forMode:NSModalPanelRunLoopMode];
NSInteger buttonClicked = NSRunAlertPanel(@"Finish?", @"Are you sure you are done?", @"No", @"Yes", nil);

//"YES" clicked
if (buttonClicked == NSAlertAlternateReturn) {
    [timer invalidate];
    [self finishStuff];
} 
```

请注意，我再次添加计时器，这次添加到不同的运行循环——用于模式窗口。计时器仍在原始运行循环中，如果对话框关闭则继续。

# couchdb - couchdb查询中元组的唯一性

> ID：11962123
> 
> 赞同：0
> 
> 时间：2012-08-14T23:09:30.190
> 
> 标签：couchdb, couchdb-python

我正在尝试进行一个我还无法进行的查询。我的永久视图功能如下：

```
function(doc) { 
    if('llweb_result' in doc){
         for(i in doc.llweb_result){ 
             emit(doc.llweb_result[i].llweb_result, doc);
         }
    }
} 
```

根据密钥，我过滤结果。所以，我需要这把钥匙。其次，如您所见，有一个 for 循环。这会导致结果中出现相同的元组。但是，我还需要执行此 for 循环来检查所有内容。在这里，我只想知道如何消除相同的元组？

我正在使用 couchdb-python。我的相关代码是：

```
result = {}
result['0'] = self.dns_db.view('llweb/llweb_filter', None, key=0, limit = amount, startkey_docid = '000000052130')
result['1'] = self.dns_db.view('llweb/llweb_filter', None, key=1, limit=amount)
result['2'] = self.dns_db.view('llweb/llweb_filter', None, key=2, limit=amount) 
```

从键值可以理解，键有三种不同的类型。我认为我可以使用 [doc._id, llweb_result] 扩展“密钥”。我需要一个像 [*, 2] 这样的键，但我不知道这是可能的。然后，使用 reduce 函数对它们进行分组。这肯定会起作用，但此时的问题是如何仅使用值 [0,1,2] 进行选择查询。

编辑于 16.08.12

couchdb 记录的“llweb_result”属性示例：

```
"llweb_result": {
   "1": {
       "ip": "66.233.123.15",
       "domain": "domain.com",
       "llweb_result": 1
   },
   "0": {
       "ip": "66.235.132.118",
       "domain": "domain.com',
       "llweb_result": 1
   }
} 
```

一条记录只有一个域名，但可以有多个ip。您可以将记录视为 dns 数据包。

我想根据 llweb_result (0,1,2) 对记录进行分组。我将为它们进行选择查询（例如，我获取包含“1”的记录）。但是对于上面的示例，结果中将有两个相同的元组。

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:26:29.313

如果您在查询结果中得到重复的对，则意味着您`doc.llweb_result[i].llweb_result`在每个文档中都有重复的值。

您可以更改视图函数以仅发出这些值之一（作为键）。一种方法是：

```
function(doc) {
    if ('llweb_result' in doc) {
         distinct_values = {};
         for (var i in doc.llweb_result) {
             distinct_values[doc.llweb_result[i].llweb_result] = true;
         }
         for(var dv in distinct_values) {
             emit(dv, doc);
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:16:57.403

我对此一无所知，但 CouchDB 支持数组中`couchdb-python`的单个`key`或多个。`keys`因此，请查看您的`couchdb-python`文档以了解如何`keys=[0,1,2]`作为参数提供。

关于仅获取唯一值，请查看[*CouchDB The Definitive Guide*](http://guide.couchdb.org/draft/cookbook.html#unique)[的这一部分，](http://guide.couchdb.org/draft/cookbook.html#unique)*它解释了如何基本添加 NOOP 减少，因此您可以使用`group=true`*

# regex - 如何删除多个文件中的文本块

> ID：11962127
> 
> 赞同：2
> 
> 时间：2012-08-14T23:10:14.890
> 
> 标签：regex, linux, unix, sed, find

我需要从多个文件中删除两个文本块。这两个块是：

```
<sales_end_date>None</sales_end_date>
 ... some text
<unavailable_for_vod_date>None</unavailable_for_vod_date> 
```

我将如何正确地做相当于：

```
find ./ -type f -name 'xml' -exec sed -i 
    '**remove <sales_end_date>None</sales_end_date>' {} \; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:26:48.080

我认为您正在寻找：

```
find . -type f -name '*.xml' -exec sed -i \
    -e '\@^<sales_end_date>None</sales_end_date>@d' \
    -e '\@^<unavailable_for_vod_date>None</unavailable_for_vod_date>@d' {} \; 
```

但我不会称之为正确地这样做。sed的`-i`选项可以说根本不适合使用，并且使用 sed 解析 xml 被正确地认为是可憎的。但是，这应该可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:05:47.733

### 使用[XMLStarlet](http://xmlstar.sourceforge.net/)：

`xml ed -d "*/sales_end_date[text()='None']" -d "*/unavailable_for_vod_date[text()='None']" your-input.xml`

示例：假设您的 xml 如下所示：

```
<here>
  <top_level>
    <something>1</something>
    <sales_end_date>None</sales_end_date>
    <unavailable_for_vod_date>None</unavailable_for_vod_date>
  </top_level>
</here> 
```

将输出：

```
<here>
  <top_level>
    <something>1</something>
  </top_level>
</here> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:19:00.900

我现在无法对此进行测试，因为我没有 bash 命令外壳，但`sed 's/before/after/g'`它是您正在寻找的基础。我经常用一些管道来做到这一点

```
#!/bin/bash
before_string1='<sales_end_date>None</sales_end_date>'
after_string1=''
before_string2='<unavailable_for_vod_date>None</unavailable_for_vod_date>'
for file in `find ./ -type f -name 'xml'`; do
    cat ${file} | sed "s/$before_string1/${after_string1}/g" > ${file}.tmp1
    cat ${file}.tmp1 | sed "s/$before_string2/${after_string2}/g" > ${file}.tmp2
    mv ${file.tmp2} ${file}
    rm -f ${file.tmp1}
done 
```

您必须确保没有使用之前或之后的字符串`/`，否则您将需要转义它们，但我相信您拥有 bash 脚本和 sed 技能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T01:16:26.153

如果**None**仅在您要删除的那些标签内，则可以使用：

```
find . -name *.xml | xargs sed -ri 's/<.*?>None<.*?>//g' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T01:40:50.480

如果你运气好，试试这个：

```
find -type f -name '*.xml' -exec sh -c \
    'grep -v "<sales_end_date>None</sales_end_date>" "{}" >/tmp/a; mv /tmp/a "{}"' \; 
```

注意：此命令仅用于删除整行，而不是一行中的某些字符。

你可以制作一个小助手脚本`process.sh`来让你的生活更轻松：

```
#!/bin/bash
file="$1"
shift
tmp=`tempfile`
"$@" "$file" > $tmp
mv $tmp > "$file" 
```

进而，

```
find -type f -name "*.xml" -exec process.sh {} grep -v "<sales_end_date>None</sales_end_date>" \; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-16T15:16:02.157

**从 C# 中的多个文件中删除一个代码块**

我需要从多个文件中删除一段代码。我在核心项目中遇到瑞典字符问题，因此我需要安装 System.Text.CodePagesEncodingProvider nuget 包并使用 System.Text.Encoding.GetEncoding(1252) 而不是 System.Text.Encoding.UTF8。

```
 public static void Main(string[] args)
    {
        try
        {
            var dir = @"C:\Test";
            //Get all html and htm files
            var files = DirSearch(dir);
            foreach (var file in files)
            {
                RmCode(file);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            throw;
        }

    }

    private static void RmCode(string file)
    {
        string tempFile = Path.GetTempFileName();

        using (var sr = new StreamReader(file, Encoding.UTF8))
        using (var sw = new StreamWriter(new FileStream(tempFile, FileMode.Open, FileAccess.ReadWrite), Encoding.UTF8))
        {
            string line;

            var startOfBadCode = "<div>";
            var endOfBadCode = "</div>";
            var deleteLine = false;

            while ((line = sr.ReadLine()) != null)
            {
                if (line.Contains(startOfBadCode))
                {
                    deleteLine = true;
                }
                if (!deleteLine)
                {
                    sw.WriteLine(line);
                }

                if (line.Contains(endOfBadCode))
                {
                    deleteLine = false;
                }
            }
        }

        File.Delete(file);
        File.Move(tempFile, file);
    }

    private static List<String> DirSearch(string sDir)
    {
        List<String> files = new List<String>();
        try
        {
            foreach (string f in Directory.GetFiles(sDir))
            {
                files.Add(f);
            }
            foreach (string d in Directory.GetDirectories(sDir))
            {
                files.AddRange(DirSearch(d));
            }
        }
        catch (System.Exception excpt)
        {
            Console.WriteLine(excpt.Message);
        }

        return files.Where(s => s.EndsWith(".htm") || s.EndsWith(".html")).ToList();
    } 
```

# android - libgdx 还是 playn？

> ID：11962138
> 
> 赞同：23
> 
> 时间：2012-08-14T23:11:29.587
> 
> 标签：android, iphone, ios, libgdx, playn

在选择跨平台手机游戏开发框架时，我需要一些帮助。我已将其范围缩小到[libgdx](http://code.google.com/p/libgdx/)和[playn](http://code.google.com/p/playn/)

我计划制作主要针对 Android 的游戏，但我也可以在 ios 和 html 上发布它们。我知道 libgdx 目前不支持 ios，但我也知道它正在开发中，我对开发人员有信心。

如果有人有 libgdx 和/或 playn 的经验（最好两者兼有），如果您能分享您的经验以及您选择哪个以及为什么选择，我将非常感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-15T13:26:43.497

我认为在这一点上，两者都是一个不错的选择。这就是为什么...

我没有使用过 Libdx，但我仔细阅读了他们的网站。我认为这两个项目看起来都不错。如果我选择游戏引擎，我的决定将归结为功能、稳定性和支持。

从支持开始，这两个项目似乎都有非常敬业的贡献者。PlayN 的 Michael Bayne 是编码器的机器。BadLogicGames (libgdx) 的马里奥似乎非常敬业。这两个项目似乎都有一群健康的贡献者和倡导者。

关于功能，它们似乎相当均衡。两者都将使创建 2D 游戏成为一种很棒的体验。Libgdx 似乎在 3d 方面具有优势，但如果您希望能够轻松创建 KILLER 3d 游戏体验，那么这两个框架都不会为您完成繁重的工作。Libgdx 似乎不像 JMonkey 那样长的 3D 工具包，它也无法与商业工具包竞争。

老实说，如果你想制作一款商业 3D 游戏来与其他商业产品竞争，你将不得不获得商业 3D 引擎的许可（并且拥有一支非常称职的团队）。与 Unity 的引擎相比，这两个项目都不会提供快速启动和运行漂亮图像所需的工具。

[http://www.youtube.com/watch?v=Fc9m0Z1GDg8](http://www.youtube.com/watch?v=Fc9m0Z1GDg8)

PlayN 的人似乎对尝试提供良好的 3D API 而不影响 2D API 和使用它们的体验更加谨慎。在这里，您可以阅读他们关于公开 OpenGL ES 2.0 层的最佳方式的谨慎讨论。

[http://goo.gl/5f3ls](http://goo.gl/5f3ls)

相比之下，Libgdx 的方法似乎更具侵略性。两者都有优点和缺点。我在我的游戏中使用位于 PlayN 之上的 Vecmath 进行了一些 3D 计算。它是代码，您可以在可行的情况下混合和匹配。

鉴于它们在目的和执行方面非常相似，因此可能会有相当多的异花授粉。您可以在此处看到，大部分 Maven 对 Libgdx 的支持是从 PlayN 的配置中复制而来的。

[http://www.badlogicgames.com/wordpress/?p=2707](http://www.badlogicgames.com/wordpress/?p=2707)

此外，由于 Michael (PlayN) 创建 IVKM 所做的工作，libgdx 仅支持 iOS。然后，Mario 还必须为他的 C++ 特性添加 JNI 支持。

[http://www.badlogicgames.com/wordpress/?p=2791](http://www.badlogicgames.com/wordpress/?p=2791)

两个项目都了解对方，并从各自前进的道路上相互学习。

就稳定性而言，最好通过各自拥有的成功项目来衡量。PlayN 上的 Tupsu 和 AngrybirdsChrome，Libgdx 上的 Ingress 和其他。

PlayN 是纯 Java，因为它位于 Android/html api 等之上。Libgdx 在某些平台上似乎有一些 C++。这在很大程度上取决于您在做什么，即对于网络而言，GWT 实际上不能编译任何 C++ 模块。此外，Java 的速度与 C++ 相当（通常稍慢，有时更快），前提是您可以控制 GC，并且对您如何使用该语言不拘泥于教条。

话虽如此，C++ 在某些用例中可能仍然有用。

其他人回答说 Libgdx 可以在单核手机上支持巨大的精灵吞吐量，这意味着这是因为 C++。这不是 libgdx 使用 C++ 的领域。查看功能。

[http://libgdx.badlogicgames.com/features.html](http://libgdx.badlogicgames.com/features.html)

就 sprite 吞吐量而言，这两个框架的表现可能相似。您可以在此处享受 PlayN 的网络性能测试的乐趣。单击统计计数器以增加数量。

[http://samskivert.com/playn/perf-test/](http://samskivert.com/playn/perf-test/)

两者都有诸如菜单 UI 之类的东西，它们位于框架之上。

最终我还是坚持使用 PlayN，因为我认为还没有真正的理由来切换，这就是我开始的。你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-23T11:37:48.237

我投票支持 libgdx。libgdx 似乎比 playn 更广泛，有一个非常活跃的社区，支持几乎所有 playn 支持的平台（一些支持即将推出），并且有很好的文档记录。此外，如果您特别针对 Android（正如您的问题所暗示的那样），我宁愿说 libgdx 是事实上的框架。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-23T18:54:58.973

我的团队已经在使用 libgdx 进行开发，而且效果很好。您可以为物理添加 box2d，并且不需要糟糕的 android 模拟器来调试。一切都是用java完成的，您只需将项目导入您的android项目，并可以在您选择的任何设备上试用。您还拥有 windows/web 项目，iOS 即将推出。所以不用担心，libgdx 是一个不错的选择。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-14T23:33:01.017

我没有用 libgdx 做过任何发布游戏，但它会得到我的投票。如果您选择了错误的框架，您必须考虑在任何平台上都无法开发成功游戏的风险。刚看了 playn ，似乎没有文档，没有用户组活动，而且还不够远。您还应该考虑应该支持两个平台的 Cocos2d-x。我有一种感觉，libgdx 作为至少在 Android 端编写游戏的平台是不可阻挡的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-31T17:57:57.950

我不知道另一个，但对我来说 libgdx 是一个很棒的引擎，我刚从高中毕业并且已经编码了一年。通过 libgdx，我在学习 libgdx 语法的短短 1 周内为 iOS 和 android 创建了各种应用程序。如果您想了解基础知识，我建议您访问此链接[http://www.kilobolt.com/zombie-bird-tutorial-flappy-bird-remake.html](http://www.kilobolt.com/zombie-bird-tutorial-flappy-bird-remake.html)，这就是我学到的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-01T00:01:43.597

我无法真正比​​较这两者，因为到目前为止我只使用过 Libgdx。对于 Libgdx，在开始开发之前，您可以查看大量资源和示例。许多支持者编写了易于理解的教程，因此很容易学习。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T21:18:55.770

Libgdx 非常快，因为有些是用 C++ 编写的。使用此框架，您可以在单核手机上流畅地移动数百个精灵。它易于安装和使用，社区可以快速回答我的所有问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-21T10:36:25.343

我用 libgdx 创建了一个大型战略在线游戏。太好了。它很快。支持是好的。文档更多。ios 支持 robovm 并且很快 Multi-OS Engine 也将在 libgdx 中实现。如果你精通Java。libgdx 是最好的选择。

# javascript - 预加载页面，关于它的各种问题

> ID：11962141
> 
> 赞同：3
> 
> 时间：2012-08-14T23:11:36.743
> 
> 标签：javascript, html, caching, memory

为了提高响应能力，我认为预加载分页数据是个好主意。

推理是这样的：当用户阅读分页数据时，他们最有可能按顺序浏览页面。因此，花时间让用户阅读当前页面，将以下页面加载到内存中（AJAX 调用，保存生成的 HTML，然后让“下一页”链接替换内容`innerHTML`而不是加载新页面）。同样，我可以将以前加载的页面保存在内存中，这样，如果用户返回，页面可以立即重新出现，而无需再次往返服务器。

我主要担心的是这可能对浏览器的 RAM 使用产生影响。我的意思是，突然之间，我让它拥有几页而不是一页。也就是说，我所浏览的网页比我的布局的单页大一百倍，而且它们工作得很好，所以我是不是想多了？

我的另一个担忧是数据可能会改变（我目前正在考虑论坛，用户可以在其中编辑帖子或（在最后一页的情况下）可能会发布新帖子。我想我可以避免存储内存中的最后一页，但是有什么方法可以在不破坏整个缓存系统的目的的情况下检查修改过的帖子？我能想到的最好的方法类似于静态资源缓存，可以发出请求，但是如果是这种情况，服务器可以响应未修改。但是，再次查看页面的次数可能比编辑页面要多得多，因此几乎所有请求都未修改。我只是不知道该怎么做做这一切，或者只是不值得担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:20:35.567

许多站点使用“无限”滚动，允许一次加载许多图像。我相信大多数浏览器根据实际显示的内容来管理内存。在某些情况下，“无限”滚动比分页更便于用户使用。

您可以在线程上添加“最后修改”标签 - 然后当您从站点检查正常更新时，您可以将最后修改日期与 html 中存储的日期进行比较。如果更改是最近的，则获取并更新帖子的最新版本。老实说，这可能不值得担心——人们习惯于重新加载浏览器以检查更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:23:07.143

缓存可以提高性能，所以这样做。如果 RAM 成为问题，请释放（删除）未使用的旧页面。

最重要的是，您应该保持访问分析，以了解*您的用户*如何与*您的网站*进行交互。可能对别人有好处的事情可能对你没有好处。一切都与**用户体验**有关——您必须进行测试并确定对*您的*用户来说什么是最佳体验。

# objective-c - UILocalNotification 从选择器触发

> ID：11962143
> 
> 赞同：0
> 
> 时间：2012-08-14T23:11:48.733
> 
> 标签：objective-c, ios, xcode

我正在尝试实现一个警报类型应用程序，该应用程序从 UIDatePicker 设置 UILocalNotification （只有时间，没有日期）。我有点让它工作，除了假设用户尝试设置警报时它是**下午 5:00 。**如果他们尝试将警报设置为**下午 4:45** （让我们假设他们在第二天这样做）它不会设置 UILocalNotification。我确信这是因为我的代码，特别是“setHour”或“setMinute”，或者我的 nsdates 与日历的方式。如果有人能告诉我我需要做什么才能让它工作，我将不胜感激。

UIDatePicker 的名称是

```
 datePick 
```

谢谢！

```
UILocalNotification *futureAlert;
futureAlert = [[UILocalNotification alloc] init];
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
//[dateComps setDay:item.day];
//[dateComps setMonth:item.month];
//[dateComps setYear:item.year];
[dateComps setHour:11];
[dateComps setMinute:46];
NSDate *itemDate = [calendar dateFromComponents:dateComps];
futureAlert.fireDate = [datePick date];    
futureAlert.timeZone = [NSTimeZone defaultTimeZone];
futureAlert.alertBody= @"time to wake up";
[[UIApplication sharedApplication] scheduleLocalNotification:futureAlert];
[futureAlert release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:21:23.197

尝试使用以下代码行：

```
double interval = [datePick.date timeIntervalSinceNow]; // time interval
if (interval < 0) // if time is earling at this time
  interval += 86400; // for set this time at next day
futureAlert.fireDate = [[NSDate date] dateByAddingTimeInterval: interval];
futureAlert.timeZone = [NSTimeZone systemTimeZone]; 
```

在您的情况下，**间隔**将等于 85500 秒。在 24 小时内 86400 秒，15 分钟 - 900 秒，然后是 23 小时 45 分钟 - 85500 秒 (86400 - 900)。

因此，您可以计算间隔秒数并使用它

# google-analytics - Google Analytics Management API - 如何将用户添加到个人资料

> ID：11962144
> 
> 赞同：1
> 
> 时间：2012-08-14T23:11:49.890
> 
> 标签：google-analytics, google-analytics-api

有没有办法让我的客户通过谷歌分析管理 API 将自己添加到指定的谷歌分析配置文件中？

我基本上是想避免必须登录谷歌分析来将每个客户添加到他们的个人资料中。我想为他们创建一种方式，让他们通过管理区域将自己作为用户添加到他们的个人资料中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T13:44:54.487

您可以使用 API 执行此操作。查看 api 资源管理器。

[https://developers.google.com/apis-explorer/#p/analytics/v3/](https://developers.google.com/apis-explorer/#p/analytics/v3/)

![在此处输入图像描述](../Images/1285736bf0b6c403cc14df40f1686516.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:38:39.317

不，没办法。这样做是为了保护您的信息。

# html - 有人可以帮我把它做成一个响应更快的菜单吗？

> ID：11962145
> 
> 赞同：0
> 
> 时间：2012-08-14T23:12:00.847
> 
> 标签：html, css

```
 <nav class="top">
            <div class="wrap">
                <ul>
                    <li><img alt="" src="img/n1.png" /> Dashboard </li>
                    <li><img alt="" src="img/n2.png" /> Statistics</li>
                    <li><img alt="" src="img/n3.png" /> Tools</li>
                    <li><img alt="" src="img/n4.png" /> Settings</li>
                    <li><img alt="" src="img/n5.png" /> Subaccounts</li>
                    <li><img alt="" src="img/n6.png" /> Support</li>
                </ul>
            </div>
        </nav>
nav.top{
    background: #005293;
    min-height: 44px;
    width: 100%;
    clear: both;
    color: white;
    left: 0%;
    position: absolute;
    font-family:Verdana;
}
nav.top .wrap{
    width:1075px;
    margin:0 auto;
}
nav.top img{
    vertical-align: text-top;
    padding-right: 8px;
}
nav.top li{
    line-height: 43px;
    padding: 0px 32px;
    border-left: 1px solid white;
    font-size:11pt;
} 
```

当一行没有足够的空间时，如何使它转到下一行？目前我编写媒体查询，它适用于标准尺寸。我希望它在我重新调整浏览器大小时工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:13:04.490

你可以这样做：

[http://jsfiddle.net/wTvE7/3/](http://jsfiddle.net/wTvE7/3/)

变化是：

```
nav.top{
    /* removed width */
    background: #005293;
    min-height: 44px;
    clear: both;
    color: white;
    left: 0%;
    position: absolute;
    font-family:Verdana;
}
nav.top .wrap{
    width:100%; /*changed width to 100%*/
    margin:0 auto;
    position:relative;
}
nav.top img{
    vertical-align: text-top;
    padding-right: 8px;
}
nav.top li{
    line-height: 43px;
    padding: 0px 32px;
    border-left: 1px solid white;
    font-size:11pt;
    float:left;
} 
```

# objective-c - UIView 移动时阻止线程冻结

> ID：11962148
> 
> 赞同：0
> 
> 时间：2012-08-14T23:12:11.180
> 
> 标签：objective-c, multithreading, objective-c-blocks, nsoperation, nsoperationqueue

一切都是标题:)我有这个方法：

```
[[NetworkManager sharedInstance] getContentFromUrl:url withId:@"json" onResultBlock:^(NSData *data, NSString *identifier) {
            NSLog(@"done")
    } onFailureBlock:^(NSError *error, NSString *identifier) {
        NSLog(@"error");
    }]; 
```

在我的应用程序中，我有一个包含 50 个单元格的表格视图。当我运行我的应用程序并用手指移动表格视图时，不会出现“完成”消息。所以，下一次下载没有开始:(但是当我在桌面视图上松开手指时，出现“完成”消息......

信息：getContentFromUrl 方法实例化了一个由 NSOperation 子类化的对象。在这个对象中，我使用 NSURLConnection initWithRequest:delegate: 获取内容，然后，将对象添加到 NSOperationQueue 中。

谢谢你的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:14:34.060

您的类在默认运行循环模式下在主线程上`NetworkManager`调度异步对象。`NSURLConnection`当您的手指向下时，运行循环将进入`NSEventTrackingRunLoopMode`模式。这将暂停连接。

`NetworkManager`应修改为使用`NSRunLoopCommonModes`. 这包括默认模式和事件跟踪模式。

# internet-explorer - 空格后跟标点符号时 IE 不换行

> ID：11962151
> 
> 赞同：2
> 
> 时间：2012-08-14T23:12:24.217
> 
> 标签：internet-explorer, word-wrap

当我有一个固定宽度的表格或带有文本的 div 时，这些单词将在空格处换行。

在 IE 7 8 和 9 中，如果空格后跟 a`: ; . ,`或`/`忽略空格并扩展表格或溢出 div。在 IE 6 或 quirks 模式下，它同时扩展了表格和 div。

[这是一个例子](http://jsfiddle.net/jHXkF/)。这在 Chrome、Firefox 和 Opera 中正确显示。

IE 是否可以提供与其他浏览器相同的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:00:28.243

我通常会建议`<wbr>`，但显然这在某些版本的 IE 中不起作用。但是我通过添加这个 CSS 让它在 IE8 中工作：

```
wbr {
    display: inline-block;
} 
```

# linux - 有没有一种简单的方法来清理进入 bash 脚本的用户数据？

> ID：11962154
> 
> 赞同：0
> 
> 时间：2012-08-14T23:12:29.217
> 
> 标签：linux, bash, centos, sanitization

我有一个简单的脚本，它从 STDIN（管道电子邮件）获取主题行和返回路径，并使用主题运行自定义 curl 查询：

```
#!/usr/bin/env bash

# Check for the sender email address and subject.
# Assign them to variables for use later.
while read -r key value; do
    case $key in
        Subject:) subject=$value;;
        Return-Path:) return_path=$value;;
    esac
done

# Run a curl query utilizing a modified version of the subject (replacing spaces with plus symbols)

curl "https://foo.com/&q="${subject// /+}"" >> foo.txt 
```

但我担心的是，这会为恶意（或意外）使用有问题的主题标头留下一个漏洞，例如：**主题：测试 123；rm -fr /;**

有没有一种简单的方法可以防止这种情况发生？

如果这是一个模糊的问题，我深表歉意。我对脚本非常陌生，所以我对脚本强化/清理的了解非常少。如果有初学者对此的参考，请告诉我。

* * *

更新。这是修改后的脚本：

```
#!/usr/bin/env bash

# Check for the sender email address and subject.
# Assign them to variables for use later.
while read -r key value; do
    case $key in
        Subject:) subject="$value";;
        Return-Path:) return_path="$value";;
    esac
done

# Run a curl query utilizing a modified version of the subject (replacing spaces with plus symbols)

curl "https://foo.com/&q=\"${subject// /+}\"" >> foo.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:25:54.563

是的。始终使用引号。**总是**。

```
foo="$bar" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:04:16.360

很抱歉，目前接受的答案是错误的。正如 geirha 指出的那样，不需要在作业周围引用引号。

但改变

```
curl "https://foo.com/&q=\"${subject// /+}\"" >> foo.txt 
```

至

```
curl "https://foo.com/&q=${subject// /+}" >> foo.txt 
```

除非您通过两个 shell 运行数据，否则没有“应用两个级别的引用”之类的东西。

阅读[sh 规范](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html)的 2.2.1 到 2.2.3 部分，以更好地了解引用的工作原理。另请阅读 2.6.5 “字段拆分”以了解如何拆分不在双引号中的变量。

在任何情况下~~，将外部输入视为命令~~都不能输入“注入”命令，除非您当然信任它并通过另一个 shell 运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:24:00.900

curl 可以为您进行 urlencode。

```
while read -r key value; do
    case $key in
        Subject:) subject=$value;;
        Return-Path:) return_path=$value;;
    esac
done

curl --get --data-urlencode "q=$subject" "https://foo.com/" >> foo.txt 
```

无论主题包含什么内容，都不会被视为代码。

# php - 如何在 PHP/SQL 生成的 .csv 电子表格中设置列名

> ID：11962155
> 
> 赞同：-1
> 
> 时间：2012-08-14T23:12:31.030
> 
> 标签：php, mysql, csv, export, spreadsheet

我在网上找到了以下脚本并根据需要对其进行了编辑，但我无法弄清楚的一件事是如何更改列名。按原样，列名在电子表格中显示为数据库中相应列的名称。有没有办法改变这个？

感谢您的任何建议！这是我的代码：

```
<?php
$host = 'asdf';
$user = 'asdf';
$pass = 'asdf';
$db = 'asdf';
$table = 'stats';
$file = 'export';

    $fields = "date, name, time, inbset, asapset, faxset, obset, totset, inbclo, asapclo, faxclo, obclo, totclo, inbtot, asaptot, faxtot, obtot, total, comments";

$filename = $file."_".date("Y-m-d");

$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());
mysql_select_db($db) or die("Can not connect.");

$result = mysql_query("SHOW COLUMNS FROM ".$table."");
$i = 0;
if (mysql_num_rows($result) > 0) {
while ($row = mysql_fetch_assoc($result)) {
$csv_output .= $row['Field'].", ";
$i++;
}
}
$csv_output .= "\n";

$values = mysql_query("SELECT $fields FROM ".$table."");
while ($rowr = mysql_fetch_row($values)) {
for ($j=0;$j<$i;$j++) {
$csv_output .= $rowr[$j].", ";
}
$csv_output .= "\n";
}

$filename = $file."_".date("Y-m-d_H-i",time());
header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header( "Content-disposition: filename=".$filename.".csv");
print $csv_output;
exit;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:17:34.880

你那里的代码——可能是复制和粘贴而不是你自己编写和理解的——是精神分裂的。

一方面，它确实在顶部定义了列名：

```
 $fields = "date, name, time, inbset, asapset, faxset, obset, totset, inbclo, asapclo, faxclo, obclo, totclo, inbtot, asaptot, faxtot, obtot, total, comments"; 
```

另一方面，它从数据库中读取它们：

```
$result = mysql_query("SHOW COLUMNS FROM ".$table.""); 
```

我建议您创建第二个变量，其中仅包含 CSV 文件的列名，并将其作为第一行放入文件中。任务完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:15:46.720

列名来自 CSV 输出中的第一行。

第 20 行附近： `$csv_output .= $row['Field'].", "`;

只需删除该代码块，并根据需要输出一行列名：“Column Name 1, Column Name 2, Column Name 3, ...”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:17:58.020

产生标题行的行是：

```
$result = mysql_query("SHOW COLUMNS FROM ".$table."");
$i = 0;
if (mysql_num_rows($result) > 0) {
while ($row = mysql_fetch_assoc($result)) {
$csv_output .= $row['Field'].", ";
$i++;
}
}
$csv_output .= "\n"; 
```

因此，要按照您的意愿排在标题行的前面，您需要修改此代码。如果您不需要它，它也会为您节省数据库查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T23:17:44.103

您应该在选择时使用“AS”。

例如我有一张桌子人：

```
id,username,name,birth
1,alpera,aykutalper,1985 
```

如果我使用

```
select username from people where id=1;
this returns
|username|
|alpera  | 
```

如果我使用

```
select username as user from people where id=1;
this returns
|user    |
|alpera  | 
```

我希望这就是你想要的。

# sql-server - NULL 值的条件以显示空值

> ID：11962165
> 
> 赞同：-1
> 
> 时间：2012-08-14T23:14:16.610
> 
> 标签：sql-server, window

我有将给出空值的参数。我想要 where 条件，当参数为空时，我将在所有列中获取 NULL 值。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:57:11.707

根据您的描述，我认为这会起作用：

```
WHERE (@parameter1 IS NULL 
                AND COLUMN1 IS NULL)
         OR (@parameter1 IS NOT NULL
                AND COLUMN1 = @parameter1) 
```

# php - 两域一应用

> ID：11962167
> 
> 赞同：0
> 
> 时间：2012-08-14T23:14:24.847
> 
> 标签：php, facebook-graph-api

这是我的情况：我有一个需要进行主要数据处理的 facebook 应用程序，我需要在另一台服务器（基本上是一个子域）上完成它。但是，我不知道如何从另一台服务器访问用户的“数据”，除非用户使用两个应用程序进行身份验证。

有没有办法提示用户允许他们的数据在另一台服务器上处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:34:28.423

如果第二台服务器是您注册的命名空间的子域，您应该也可以在该机器上使用您的应用程序凭据。Facebook 不在乎，只要您不与第三方共享用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:52:22.507

如果您在 facebook 应用程序设置中授予对该子域的访问权限，则访问凭据没有问题。您可以毫无问题地使用。

# php - 将 xml “拉”到 API 中的正确方法？

> ID：11962170
> 
> 赞同：0
> 
> 时间：2012-08-14T23:14:46.587
> 
> 标签：php, xml, api

将 xml 拉入 API 的正确方法是什么？

api代码中的直接xml示例；（这是我们不想要的，我们需要它从文件中提取 xml）

```
BigCommerce_Api::useXml();

$xml = "<?xml version="1.0" encoding="UTF-8"?>
    <brand>
        <name>Apple</name>
        <search_keywords>computers laptops</search_keywords>
    </brand>";

$result = BigCommerce_Api::createBrand($xml); 
```

我通过 fopen 引入 xml 的狡猾尝试；

```
<?
require_once 'BigCommerce/Api.php';

BigCommerce_Api::configure(array(
'store_url' => 'https://apiurl',
'username'  => 'admin',
'api_key'   => 'apitoken'
));

$filename = "xmlfile.xml";
$handle = fopen($filename, "r");
$XPost = fread($handle, filesize($filename));
fclose($handle);

BigCommerce_Api::useXml();

$xml = $XPost;

$result = BigCommerce_Api::createProduct($xml); 

?> 
```

如果有人可以让我们知道如何适当地将 xml 带入 useXML var，请随时分享:)

（应用引号后，代码的某些格式会付清）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:21:30.540

我不知道你为什么让你的生活如此复杂：

```
BigCommerce_Api::useXml();

$xml = file_get_contents('xmlfile.xml');

$result = BigCommerce_Api::createBrand($xml); 
```

见[`file_get_contents`](http://de.php.net/file_get_contents)。

# cocoa - 想改变 NSPopover 的不透明度 - 有可能吗？

> ID：11962171
> 
> 赞同：6
> 
> 时间：2012-08-14T23:14:54.417
> 
> 标签：cocoa, opacity, nspopover

我`NSPopover`在 Cocoa 应用程序中有一个，并且由于 Lion - 它呈现为半透明，因此它覆盖的任何文本字段、表格等 - 这些现在都显示在它下面，看起来真的很奇怪。我检查了 Apple 的类参考文档，但似乎没有办法将其更改为不透明。似乎可用于指定外观的仅有的两个属性值是`NSPopoverAppearanceMinimal`, 和`NSPopoverAppearanceHUD`- 但这些似乎都与 alpha 或不透明度有关。`NSPopover`是通过覆盖 drawRect来制作不透明的唯一方法吗？或者有人知道更好的方法吗？它似乎适用`UIPopover`于 iOS，但不适`NSPopover`用于 Cocoa ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-06T09:47:55.033

要使背景完全不透明，请查看此帖子：

[如何更改 NSPopover 背景颜色包括三角形部分？](https://stackoverflow.com/questions/19978620/how-to-change-nspopover-background-color-include-triangle-part/30660945#30660945)

# windows - 在 Windows 批处理中回显 UTF-8 字符

> ID：11962172
> 
> 赞同：31
> 
> 时间：2012-08-14T23:14:54.583
> 
> 标签：windows, batch-file

我可以使用 echo 生成 UTF-8 文本文件吗？例如，如果我想生成一个包含字符的文件`ę`：

```
echo "abcd ę" > out.txt 
```

（批处理文件使用 UTF-8 编码）

结果是一个 ANSI 编码的文件，`ę`字符被转换为`ê`. 如何说服`echo`生成 UTF-8 文件？

如果不可能，那么我可以在创建文本文件后更改它的编码吗？gnuwin32 包中是否有任何工具可以帮助我更改编码？

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-08-02T09:18:38.007

使用`chcp`命令将活动代码页更改为 utf-8 的 65001。

```
chcp 65001 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-14T23:28:55.567

尝试使用 /U 开关启动 CMD.exe：它会导致所有管道输出为 Unicode 而不是 ANSI。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-22T15:29:10.567

> chcp 65001

正如@cuixiping 提到的那样是一个很好的答案，但它需要将 cmd 默认字体更改为*Lucida Console*，例如，您可以在此处阅读： [https ://superuser.com/questions/237081/whats-the-code-page-of -utf-8#272184](https://superuser.com/questions/237081/whats-the-code-page-of-utf-8#272184)

当然，正如@BearCode 所提到的，文本应该是 utf-8 ......在我的例子中，在 GNU/Linux 下使用 Vim 可以远程访问，但记事本 ++ 也是正确的方式！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T05:07:39.313

问题是该文件包含以下行：

```
<META content="text/html; charset=iso-8859-2" http-equiv=Content-Type> 
```

然后 Notepad2 和 Firefox 正在更改字符集，显示 Ä 而不是 ę。在普通的记事本中，文件看起来没问题。解决方案是在文件开头添加 UTF-8 签名（字节顺序标记）：

```
echo1 -ne \xEF\xBB\xBF > out.htm 
```

（echo1 来自 gnuwin32）

感谢您的回答

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-26T23:09:02.783

出现以及更改代码页时，您需要在第一次回显到文件中写入至少一个 unicode 字符，以便将文件另存为 unicode。因此，您的批处理文件本身需要以 UTF-8 等 unicode 格式存储。

# google-maps - 如何更改谷歌地图上特定道路的颜色？

> ID：11962178
> 
> 赞同：2
> 
> 时间：2012-08-14T23:15:34.567
> 
> 标签：google-maps, paint

有没有一种简单的方法可以用颜色绘制一些道路（不为每条道路创建多边形）？

我需要用不同的颜色显示一些道路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:57:09.217

改变道路的唯一内置功能是基于它们是高速公路、主干道还是地方道路。要基于此更改颜色，您可以使用带有以下 JSON的[地图样式：](https://developers.google.com/maps/documentation/javascript/styling)

```
[
  {
    featureType: "road.highway",
    elementType: "geometry.fill",
    stylers: [
      { color: "#3c5980" }
    ]
  },{
    featureType: "road.arterial",
    elementType: "geometry.fill",
    stylers: [
      { color: "#4cb348" }
    ]
  },{
    featureType: "road.local",
    elementType: "geometry.fill",
    stylers: [
      { color: "#ca19bc" }
    ]
  }
] 
```

如果您谈论的是个别道路，则没有简单或内置的方法可以做到这一点。

# c - 连接 int 和 FILE* (C/C++)

> ID：11962184
> 
> 赞同：0
> 
> 时间：2012-08-14T23:16:01.077
> 
> 标签：c, file-descriptor

我想根据 for 循环的索引来命名我的文件描述符 fp。例如，

```
char* fbad[4]= "fbad";
char* mod[3]="mod";

for (int i=0; i<10; i++) {
  sprintf(fbad_file, "%s%s%d", fbad,mod,i);
  FILE *fp = fopen(fbad_file, "w");  ////????????????
  /*then do stuff here*/
  fclose(fp);
} 
```

一个如何连接 *fp 和 i 这样的描述符对于每个打开的文件都是唯一的？比如我要实现的是：for i=6, FILE *fp6.

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:20:02.277

`For example, what I want to achieve is: for i=6, FILE *fp6.`

使用数组：

```
FILE *fp[10];
for(int i=0; i<10; i++) {
    fp[i] = fopen(...);
} 
```

虽然，如果您在 for 循环内关闭文件指针，那么重用有什么问题`fp`？

# ruby - 将哈希转换为结构

> ID：11962192
> 
> 赞同：51
> 
> 时间：2012-08-14T23:16:44.167
> 
> 标签：ruby

如何将哈希转换为 ruby​​ 中的结构？

鉴于这种：

```
h = { :a => 1, :b => 2 } 
```

我想要一个这样的结构：

```
s.a == 1
s.b == 2 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-09-30T23:22:54.130

如果您已经定义了一个结构，并且您想用哈希实例化一个实例：

```
Person = Struct.new(:first_name, :last_name, :age)

person_hash = { first_name: "Foo", last_name: "Bar", age: 29 }

person = Person.new(*person_hash.values_at(*Person.members))

=> #<struct Person first_name="Foo", last_name="Bar", age=29> 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-08-14T23:38:39.440

如果它不必*特别*是 a`Struct`而是可以是 a `OpenStruct`：

```
pry(main)> require 'ostruct'
pry(main)> s = OpenStruct.new(h)
=> #<OpenStruct a=1, b=2>
pry(main)> puts s.a, s.b
1
2 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-08-14T23:59:57.743

由于 Ruby 1.9+ 中保证了哈希键顺序：

```
Struct.new(*h.keys).new(*h.values) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-08-28T13:47:08.210

这是基于@elado 上面的回答，但使用`keyword_init`值（[结构文档](https://ruby-doc.org/core-2.5.0/Struct.html)）

你可以简单地这样做：

```
Person = Struct.new(:first_name, :last_name, :age, keyword_init: true)

person_hash = { first_name: "Foo", last_name: "Bar", age: 29 }

person = Person.new(person_hash)

=> #<struct Person first_name="Foo", last_name="Bar", age=29> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-14T23:16:44.167

以下以可靠的方式从哈希创建结构（因为在 ruby​​ 中不保证哈希顺序）：

```
s = Struct.new(*(k = h.keys)).new(*h.values_at(*k)) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-05-22T20:55:33.910

拥有`Hash#to_struct`非常实用：

```
class Hash
  def to_struct
    Struct.new(*keys).new(*values)
  end
end 
```

还有一些例子：

```
>> { a: 1, b: 2 }.to_struct
=> #<struct a=1, b=2>
>> { a: 1, b: 2 }.to_struct.a
=> 1
>> { a: 1, b: 2 }.to_struct.b
=> 2
>> { a: 1, b: 2 }.to_struct.c
NoMethodError: undefined method `c` for #<struct a=1, b=2> 
```

`to_struct`与数组一起使用的深度：

```
class Array
  def to_struct
    map { |value| value.respond_to?(:to_struct) ? value.to_struct : value }
  end
end

class Hash
  def to_struct
    Struct.new(*keys).new(*values.to_struct)
  end
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-23T17:37:19.513

这是一个将值映射到 Struct 正确顺序的示例：

```
require 'securerandom'

Message = Struct.new(:to, :from, :message, :invitee)

message_params = {from: "my@email.address", to: "your@email.address",
        invitee: SecureRandom.uuid, message: "hello"}

if Message.members.sort == message_params.keys.sort
  # Do something with the return struct object here
  Message.new *Message.members.map {|k| message_params[k] } 
else
  raise "Invalid keys for Message"
end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-27T08:17:42.257

这提供了一个干净的纯只读对象，类似于 ruby​​ 结构，但具有深度转换和额外的`to_h`方法，可以在任何时候将结构作为哈希。

例子

```
foo = {a:{b:{c:123}}}.to_struct
foo.a.b.c # 123
foo.a.to_h # {b:{c:123}} 
```

红宝石代码

```
class Hash
  def to_struct
    Class.new.tap do |c|
      c.define_singleton_method(:to_h) do
        m_list = methods(false) - [:to_h]
        m_list.inject({}) do |h, m|
          h[m] = send(m)
          h[m] = h[m].to_h if h[m].class == Class
          h
        end
      end

      each do |k, v|
        v = v.to_struct if v.class == Hash
        c.define_singleton_method(k) { v }
      end
    end
  end
end 
```

不完全是问题的答案（不是 ruby​​ Struct 对象），但我在寻找答案时只需要这个，所以我将在这里发布答案。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-04T12:34:33.997

如果您需要递归版本，这里有一个简洁的 hack/解决方案

```
a_hash = {a: {b: {c: 'x'}}}
structs_inside_structs = JSON.parse(
  a_hash.to_json, object_class: OpenStruct
)
# => #<OpenStruct a=#<OpenStruct b=#<OpenStruct c="x">>>
structs_inside_structs.a.b.c
# => "x" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-02T22:06:51.727

您可以使用以下代码从 Hash 转换为 Struct：

```
Struct.new(*my_hash.keys.map(&:to_sym)).new(*my_hash.values) 
```

确保将所有键转换为符号，因为它会在字符串键上出错，`NameError: identifier my_key needs to be constant`

我个人建议在 Hash 类中添加一个猴子补丁，因为这是一个非常强大的操作

```
# config/initializers/core_extensions.rb

Hash.class_eval do
  def to_struct
    Struct.new(*keys.map(&:to_sym)).new(*values)
  end
end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-08T07:19:59.467

TL;博士;

使用**OpenStruct.new(hash)**

**新的更好的方式**

```
hash = {"Name" => "Taimoor", "id" => "222", "SomeKey" => "Some value", "attributes" => {"type" => 'User', 'role' => 'manager'}}
OpenStruct.new(hash) 
```

这只会将第一级哈希转换为结构。要将嵌套属性哈希转换为结构，我这样做了

```
hash.attributes = OpenStruct.new(hash.attributes) 
```

**老路**

我有一个带有字符串键的哈希

```
{"Name" => "Taimoor", "id" => "222", "SomeKey" => "Some value"} 
```

所以我需要首先将键转换为符号`hash.keys.map(&:to_sym)`并访问原始散列中的那些键，我使用了`hash.with_indifferent_access`散列上的方法。

```
def hash_to_struct(hash)
    Struct.new(*(k = hash.keys.map(&:to_sym)))
        .new(*hash.with_indifferent_access.values_at(*k))
end 
```

现在它将适用于哈希的符号和字符串类型键。

**注意：**这只会将哈希转换为一级结构。对于嵌套哈希，您需要在每个嵌套级别上调用此方法。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-04-15T14:40:01.627

```
require 'ds_hash'

data = {a: {b: 123 }}.to_struct

data.a.b == 123       # true
data.a   == {b: 123 } # true 
```

# java - 图像按钮不可见

> ID：11962195
> 
> 赞同：0
> 
> 时间：2012-08-14T23:17:07.750
> 
> 标签：java, android

有人可以告诉我为什么我`ImageButton`在使用此布局时没有显示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/main"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/continuebutton"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1.02"
        android:background="@android:color/transparent"
        android:src="@drawable/continuebutton"
        android:visibility="visible" />

</RelativeLayout> 
```

当我使用 a`LinearLayout`时，它显示得很好。谁能澄清我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:26:55.550

您正在尝试将 layout_weight 添加到 RelativeLayout - 这没有任何意义。相对布局将项目彼此相对放置。它们没有像 LinearLayout 那样整体计算宽度和高度，因为流对线性布局很重要，而不是在相对布局中。

将按钮设置为 wrap_content 或 match_parent。如果您想要权重，请在 RelativeLayout 内嵌套一个 LinearLayout。

关于此处的额外信息：[RelativeLayout 中的百分比宽度](https://stackoverflow.com/questions/4961355/percentage-width-in-a-relativelayout)

**编辑** LinearLayout 在计算如何布局其子视图时查看其方向的权重和 0dip 值。假设您在水平线性布局中并排有 2 个项目...如果它们都是 0dip 宽度，宽度将根据它们的重量计算。RelativeLayout 不这样做。它不担心物品的流动。它相对于彼此的放置放置物品。

高温高压

# apache - URL 重写映射 apache

> ID：11962196
> 
> 赞同：0
> 
> 时间：2012-08-14T23:17:10.610
> 
> 标签：apache, rewritemap

我对编程很陌生，遇到了以下问题。请给我建议。

我有一个网站，其 URL 类似于从后端数据库生成`www.mysite.com/products.php?cid=3` 的参数值`cid`（此处为 3），并且可以是从 1 到 3 的数字。

我希望 Apache 重写 URL，以便：

`www.mysite.com/nike`将重定向到`www.mysite.com/products.php?cid=1`

`www.mysite.com/reebok`将重定向到`www.mysite.com/products.php?cid=2`

`www.mysite.com/kswiss`将重定向到`www.mysite.com/products.php?cid=3`

ETC...

我在根目录下有一个名为**category.txt的文本文件，内容如下：**

```
nike 1 
reebok 2 
kwiss 3 
```

和 .htaccess

```
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase / 
rewritemap categorymap txt:/image/categorymap.txt 
RewriteRule ^(.*) /products.php?cid=${categorymap:$1|NOTFOUND} [PT] 
</IfModule> 
```

但是，这不起作用，请告诉我，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:22:47.063

该[`RewriteMap`指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)只能在服务器或虚拟主机配置中使用。你需要在那里定义它。如果您无权访问服务器或虚拟主机配置，那么您只需将所有这些枚举到单独的重写指令中，例如：

```
RewriteRule ^nike$ /products.php?cid=1 [L,QSA]
RewriteRule ^reebok$ /products.php?cid=2 [L,QSA]
RewriteRule ^kswiss$ /products.php?cid=3 [L,QSA] 
```

# javascript - 检索到最后一条记录后从 postgresql 中提取记录

> ID：11962197
> 
> 赞同：1
> 
> 时间：2012-08-14T23:17:22.450
> 
> 标签：javascript, sql, postgresql, jquery

我正在做一个从 sql 表中提取大量数据的查询。我想实现一个无限滚动功能，这样一次只能提取 25 条左右的记录。

不过我遇到了一些麻烦。

当用户向下滚动时调用此查询。jquery 将放置在页面上的最后一条记录的最后一个 id 发布到 php；

```
//ie, this js pulls the id 
var last_order_number = $('.order_number_divs:last').attr('id');

//from this div
<div id="2476" class="order_number_divs">   1121310  </div> 
```

我想，如果我在页面上再选择两个id大于前一个id的结果，我肯定会得到以下两个结果。但是，我每次都得到相同的两个结果。

```
SELECT 
    id,
    order_number
    FROM sales_orders
    WHERE id > '$last_id'
    ORDER BY id ASC
    LIMIT 2 
```

这是通过模板运行数据以填充 div 的 jquery。由于[vkTemplate](http://www.eslinstructor.net/vktemplate/)不支持追加，所以一旦用内容填充了div，我把刚刚填充的div的id去掉，把id给它下面的div，这样下次有滚动的时候，内容将进入那个 div。

```
$(window).scroll(function () {

    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {

        var last_order_number = $('.order_number_divs:last').attr('id');

        console.log(last_order_number);
        $.ajax({
            type: "POST",
            async: false,
            url: "queries/privileged_search_more_content.php",
            data: "user=" + "<?=$_COOKIE['username']?>" + "&last_order_number=" + last_order_number,
            dataType: "json",
            success: function (data) {
                console.log(data);

                $('#INT-order_information_container').vkTemplate("templates/get_orders_initial_template.tmpl?" + <?=time()?> , data, function () {

                $('#INT-order_information_container').removeAttr('id');
                $('#template_div_next').removeAttr('id')
                                       .attr('id', 'INT-order_information_container');

                });
                console.log($.active);
            }
        });

    }
    }); 
```

你知道为什么同样的两条记录被一遍又一遍地拉下来吗？

非常感谢！

我发现的这个滚动功能似乎也可以*上下*调用。但这是一个不同的问题。只是说让你知道我至少知道这么多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:12:18.060

vkTemplate 确实支持追加。看看 vkTemplate 主页

[http://www.eslinstructor.net/vktemplate/](http://www.eslinstructor.net/vktemplate/)

有菜单项“**附加技术**”。

使用 vkTemplate 实现附加的另一种方法是自定义此插件。很简单：打开代码并找到 #94,102,117 行 [https://github.com/vkiryukhin/vkTemplate/blob/master/vktemplate.js](https://github.com/vkiryukhin/vkTemplate/blob/master/vktemplate.js)

```
$(elm).empty().append(. . .) 
```

并从此表达式中删除 empty()。

希望这可以帮助，

-瓦迪姆

# c# - 将 .dll 预编译（可部署）的 Web 应用程序与网站一起使用

> ID：11962199
> 
> 赞同：1
> 
> 时间：2012-08-14T23:17:24.147
> 
> 标签：c#, asp.net, webforms

我想创建一个门户网站，提供用户基本功能、用户授权、统计等。但在较低级别上提供各种功能的应用程序。

通过研究和大量谷歌，我认为最好的方法是为门户网站制作一个网页项目，并且为了便于源代码控制、低耦合和可维护性，要求所有底层应用程序都是门户网站的可部署依赖项. 因此！他们都在发布网站时自动编译和上传！这看起来很棒！但是我一生都无法弄清楚如何从.dll（可部署程序集）下调用底层网页。

这甚至可能吗？这似乎是我可以收集到的，因为您可以将整个网站（aspx 和所有）编译为 .dll。那么如何调用 .dll 中的网页/应用程序呢？

例如，我希望做这样的事情： www.webpage.com/Default.aspx （根和门户网站） www.webpage.com/bin/application.dll/Default.aspx （预编译的网络应用程序没有路由）

谢谢！

编辑：我想澄清一下，这个想法是一个开发组可以维护 Web 门户，而其他开发组可以构建单独的独立应用程序，这些应用程序将在门户下运行。必须在编译时包含单独的项目。也许这个功能是不可能的？旧式网站项目的目的是因为该项目已在一段时间前启动，并且是该项目的资源。如果项目类型引入了限制，那么当且仅当它实现了我如上所述的希望时，将其更改为更新的项目类型（ASP Web 应用程序）是可行的。

我认为这有点骇人听闻，但我可以向 .dll 添加一个控制器，该控制器仅提供实用程序以根据需要返回整个 aspx 或 ascx web ui 组件以发送到客户端。一定有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:40:08.783

我建议以下...

1 个解决方案和 2 个项目。- 一个网站（不是 Web 应用程序） - 一个类库

类库（最终编译成 DLL）将成为您网站中的项目参考，它将处理大部分代码。该网站将具有 UI 和一些基本逻辑，当然会决定网站的结构，但将依赖类库来完成繁重的工作。

这种设置的美妙之处在于集中式代码和易于扩展。我的一个解决方案有 3 个网站和一个 Web 服务，它们共享相同的代码库。

# java - 摆脱 ImageIcon 的框边框

> ID：11962202
> 
> 赞同：2
> 
> 时间：2012-08-14T23:17:46.867
> 
> 标签：java, user-interface, button

好的，我有一个小问题。只要您在我的应用程序中按下一个按钮，我就会将一个本地 loading.gif 图标加载到其中，但正如您从下面的第一张图片中看到的那样，我遇到的问题是它周围奇怪的蓝色框。关于如何摆脱它的任何想法？
![在此处输入图像描述](../Images/7efe35d31c4be0fcda6d36c767bb47b8.png)
到目前为止我已经尝试过：

`login.setSelected(false)` 什么也没
`login.setEnabled` 做 在图像周围制作一个奇怪的灰色框，如下所示：
![在此处输入图像描述](../Images/a2f61816792a8de9a4e24f1edff17ecf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:22:00.527

是的，我想通了......我猜应该在发布之前等待。如果有人关心解决方案，我只需设置`login.setFocusable(false);`它就可以了！

# c++ - 使用 OpenCV 和 OpenNI 测量 2 点之间的距离

> ID：11962203
> 
> 赞同：1
> 
> 时间：2012-08-14T23:17:54.087
> 
> 标签：c++, opencv, kinect, openni

我正在使用 OpenCV 2.4.0 中的内置 OpenNI 访问，我正在尝试测量深度图中两点之间的距离。到目前为止，我已经尝试过：

```
#include "opencv2/core/core.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

#include <iostream>

using namespace cv;
using namespace std;

Point startPt(0,0);
Point endPt(0,0);

void onMouse( int event, int x, int y, int flags, void* )
{
    if( event == CV_EVENT_LBUTTONUP) startPt = Point(x,y);
    if( event == CV_EVENT_RBUTTONUP) endPt   = Point(x,y);
}

int main( int argc, char* argv[] ){
    VideoCapture capture;
    capture.open(CV_CAP_OPENNI);
    //capture.set( CV_CAP_PROP_OPENNI_REGISTRATION , 0);
    unsigned t0=clock();
    if( !capture.isOpened() ){
        cout << "Can not open a capture object." << endl;
        return -1;
    }
    unsigned elapsed=clock()-t0;
    cout << "initialized in "<< elapsed <<" s. ready!" << endl;
    namedWindow( "depth", 1 );
    setMouseCallback( "depth", onMouse, 0 );
    for(;;){
        Mat depthMap;
        if( !capture.grab() ){
            cout << "Can not grab images." << endl;
            return -1;
        }else{
            Mat show,real,valid;
            if( capture.retrieve( depthMap, CV_CAP_OPENNI_DEPTH_MAP ) ){
                depthMap.convertTo( show, CV_8UC1, 0.05f);
            }
            capture.retrieve(valid,CV_CAP_OPENNI_VALID_DEPTH_MASK);
            if( capture.retrieve(real, CV_CAP_OPENNI_POINT_CLOUD_MAP)){
                unsigned int sp = valid.at<unsigned char>(startPt.x, startPt.y);
                unsigned int ep = valid.at<unsigned char>(endPt.x, endPt.y);
                if(sp == 255 && ep == 255){
                    Vec3f s = real.at<Vec3f>(startPt.x, startPt.y);
                    Vec3f e = real.at<Vec3f>(endPt.x, endPt.y);
                    float dx = e[0]-s[0];
                    float dy = e[1]-s[1];
                    float dz = e[2]-s[2];
                    float dist = sqrt(dx*dx + dy*dy + dz*dz);
                    putText(show,format("distance: %f m\n",dist),Point(10,10),FONT_HERSHEY_PLAIN,1,Scalar(255));
                }
            }
            circle(show,startPt,3,Scalar(255),3);
            circle(show,endPt,3,Scalar(192),3);
            line(show,startPt,endPt,Scalar(128));
            imshow("depth",show);
        }
        if( waitKey( 30 ) >= 0 )    break;
    }

} 
```

但我有几个问题：

1.  除非我首先检查有效深度掩码中的值，否则程序有时会崩溃（我想是由于数据错误）
2.  据我了解，点云图以米为单位返回 XYZ 数据（CV_32FC3），但我在屏幕上看到的数字看起来不对。

我是否使用正确的方法来检索 xyz 值和计算距离？

我可能遗漏的任何细节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:02:00.140

1.  我运行了代码，但即使我注释掉了，我也无法让它崩溃`if(sp == 255 && ep == 255)`。它经常发生吗？我没有使用过 OpenNI 驱动程序，但例如在 Microsoft 驱动程序中也有一个无效值（例如当表面是镜面反射时）。“太近”或“太远”也有不同的值。会不会是 OpenNI 在这种情况下返回垃圾？

2.  尝试切换 x 和 y：

    ```
    Vec3f s = real.at<Vec3f>(startPt.y, startPt.x);        
    Vec3f e = real.at<Vec3f>(endPt.y, endPt.x); 
    ```

（因此：）

```
unsigned int sp = valid.at<unsigned char>(startPt.y, startPt.x);
unsigned int ep = valid.at<unsigned char>(endPt.y, endPt.x); 
```

语法是 `cv::Mat::at<_Tp>(int y, int x)`或者如果它更好地帮助你， `cv::Mat::at<_Tp>(int row, int column)` 我测量了一些距离，它对我来说很好。

此外，您实际上计算了获得的每一帧的 3D 点和距离，这是故意的吗？因为即使您一次在图像中选择了两个 2D 点，用于计算距离的相应 3D 点也可能由于噪声而在每一帧中发生变化。

# java - MTOM/SSL：通过 Java 使用 MTOM 和 SSL 访问 Web 服务时发生挂起

> ID：11962205
> 
> 赞同：1
> 
> 时间：2012-08-14T23:17:57.733
> 
> 标签：java, web-services, ssl, jaxb, mtom

我用 Java 创建了一个 Web 服务客户端，它使用 JAXB 和客户端代理成功调用了一个 Web 服务，并使用 MTOM 发送二进制数据。

该服务现在需要 SSL。在更新我的客户端代码以提供 SSL 连接后，我可以成功进行不需要二进制附件的调用，但需要二进制附件的调用会挂起。永远不会收到来自服务的响应。最终我的客户超时了。

我怎样才能让它工作？使用 SSL 时是否需要做一些特别的事情来启用 MTOM？我已经搜索了这个站点和网络，没有看到其他关于此的报告。

我从在服务器端观看网络数据包的人那里得到了一些信息。我解释一下，因为我不完全理解：他说 TLS 已启动并传输数据，但随后它再次进入 TLS 加密握手并停止。他想知道是否为 MTOM 生成了一个单独的 TLS 会话，而我的应用程序认为已经建立了一个 TLS 会话，并且没有像应有的那样进行证书的初始交换。我不知道如何检查它，因为它都在低级库代码中，而且我没有它的源代码。

我对 Web 服务和 SSL 非常非常陌生。

创建 Web 服务的代码如下：

```
private MyService getService() throws Exception {

    SSLHelper.initializeConduitForSSL(new File("d:/keystore.jks"), "jks", "changeit");

    final JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();

    factory.setServiceClass(MyService.class);
    factory.setAddress("https://" + endPoint);  // endpoint not shown in this code
    service = (MyService)factory.create();

    final Client client = ClientProxy.getClient(service);
    final HTTPConduit http = (HTTPConduit)client.getConduit();

    http.setTlsClientParameters(SSLHelper.getTlsParams());
    final Map<String, Object> ctxt = ((BindingProvider)publishingService).getRequestContext();

    // Enable HTTP chunking mode, otherwise HttpURLConnection buffers
    ctxt.put(JAXWSProperties.HTTP_CLIENT_STREAMING_CHUNK_SIZE, 8192);

    return service;
} 
```

为了发出请求，我在返回的服务对象上调用方法。

SSLHelper 是我自己处理证书设置的类。我相信那部分不是问题，所以我不会在此处包含该设置代码。（因为我可以使用相同的 SSL 配置发出其他请求，所以我假设这不是问题。）

对于 MTOM 调用，该方法接受一个参数，该参数是一个请求类的实例，该类具有如下指定的字段（带有适当的 setter）：

```
@XmlElement(required = true)
@XmlMimeType("application/octet-stream")
private DataHandler dataHandler; 
```

要初始化此类，我执行以下操作：

```
File file = new File("c:\\somefile.jpg"); // 
final DataSource dataSource = new FileDataSource(file);
request.setDataHandler(new DataHandler(dataSource)); 
```

DataHandler 和 FileDataSource 在 javax.activation 包中。

最后一件事。服务的所有者能够使用 MTOM 成功调用此请求，但他们正在使用以下内容来启用 SSL：

```
System.setProperty("javax.net.ssl.keyStore", keyStorePath);
System.setProperty("javax.net.ssl.keyStoreType", "jks");
System.setProperty("javax.net.ssl.keyStorePassword", keyStorePassword); 
```

我不能这样做，因为在同一个 JVM 中，我们使用多个密钥存储来连接不同的 Web 服务。

# c# - 在 C#.net 中启动与父安全上下文相同的线程

> ID：11962208
> 
> 赞同：3
> 
> 时间：2012-08-14T23:18:33.200
> 
> 标签：c#, .net, com

我有一个方法可以生成一个新线程，如下所示：

```
Thread thread = new Thread(() => ClassObject.SetXY(var1, var2));
thread.SetApartmentState(ApartmentState.STA);               
thread.Start();
thread.Join(); 
```

`(Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))`我目前从我正在尝试的 COM 互操作中获得拒绝访问异常。当我在同一个父线程中运行该函数时，我没有得到那个异常。但是，我需要它在单独的线程中运行以将公寓状态设置为 STA。我目前正在将我的代码作为 Windows 服务运行，即使我在 main 方法上使用 [STAThread]，我也无法让它工作。

简要地说我需要什么：

*   1-启动一个像上面一样的线程（STA），它与父线程具有相同的安全上下文。

*   2-不要启动一个新线程（这将解决访问被拒绝的问题，但由于线程的单元状态不是STA而引发异常），而是使Windows服务的线程在STA单元状态下运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:40:10.040

您可以复制父线程的执行上下文，然后在生成的线程上在该上下文中运行您的代码：

```
var executionContext = ExecutionContext.Capture();
Thread thread = new Thread(state => {
    ExecutionContext parentContext = (ExecutionContext)state;
    ExecutionContext.Run(parentContext, _ => {
        ClassObject.SetXY(var1, var2);
    }, null);
});

thread.Start(executionContext); 
```

# php - 如何获取用户 Facebook 好友最近几天发布的所有链接？

> ID：11962210
> 
> 赞同：0
> 
> 时间：2012-08-14T23:18:32.587
> 
> 标签：php, facebook-graph-api, facebook-fql, facebook-php-sdk

我正在尝试获取用户及其 Facebook 朋友发布的所有链接。

我正在使用 Facebook PHP SDK 并且到目前为止具有以下 FQL：

```
$fql = "SELECT link_id, owner, owner_comment, created_time, title, summary, url, image_urls 
          FROM link WHERE owner IN 
            (SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 100) 
          AND created_time >= $_7ago"; 
```

出于某种原因，上述 FQL 仅适用于某些朋友，但会为其他朋友提供错误。这与这些朋友的隐私问题有关吗？

此外，即使查询有效，该过程也需要 10 秒以上。有没有其他方法可以得到我正在寻找的东西？

***谢谢。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:58:50.760

不显示某些朋友的数据是 Facebook 的一项隐私功能。如果您的一位朋友限制了他们的隐私设置，以使每个人都无法看到某个帖子（或所有帖子），则 API 不会返回他们的帖子。

某些对象具有`visible`可以过滤结果的属性。林克似乎不是其中之一。

对于这种大小的查询，10 秒可能在这需要的范围内。我看到的大多数涉及该`friend`表的查询至少需要 5 秒。

# php - Opencart 在产品选项中禁用数量

> ID：11962211
> 
> 赞同：2
> 
> 时间：2012-08-14T23:18:36.693
> 
> 标签：php, opencart

朋友们，我在 Opencart 版本 1.5.3.1 中遇到了一个大问题，非常需要你的帮助。

我为我的产品添加了“颜色”选项以及 Opencart 需要告知其数量的每种颜色。我的客户有数千种产品，没有库存/数量问题。

对于他们来说，继续在每种产品中为每种颜色插入一些数值是非常令人恼火的……不要忘记大多数产品都有 5 到 15 种颜色。

已经 3 天了，我正在搜索代码并尝试，但到目前为止我无法找到如何禁用它。问题是如果未插入数量，则不会显示该颜色。

我在 controller/product/product.php 中找到了这段代码，但它什么也没解决

```
foreach ($option['option_value'] as $option_value) {
if (!$option_value['subtract'] || ($option_value['quantity'] > 0)) { ... 
```

我将其更改为：

```
foreach ($option['option_value'] as $option_value) {
if (!$option_value['subtract']) {... 
```

请帮我解决这个问题，这将是一个很大的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:26:25.287

打开`system/library/cart.php`

在第 67-69 行附近找到此代码

```
if ($option_value_query->row['subtract'] && (!$option_value_query->row['quantity'] || ($option_value_query->row['quantity'] < $quantity))) {
    $stock = false;
} 
```

并删除它们，将它们注释掉或将 false 更改为 true

# android - 防止方向改变

> ID：11962213
> 
> 赞同：0
> 
> 时间：2012-08-14T23:18:39.857
> 
> 标签：android, orientation, landscape, sensors, portrait

我得到这个程序在我按下按钮后开始执行一些任务，并且在此任务运行时不允许更改其方向。我想出了如何做到这一点，但我的问题是我的代码只能以一种方式工作。它在任务运行时保持纵向的成功方向，并且仅在任务完成后才将方向更改为横向（如果用户在任务期间旋转设备）。但是在横向模式下同样的事情失败了。即使任务正在运行，它也会旋转为纵向。

这是我用来保持方向不变的代码。此代码在按钮 onClick 方法中：

```
final int ori = getResources().getConfiguration().orientation;
        setRequestedOrientation(ori); 
```

然后我有我的处理程序类，它每秒检查任务是否已完成，如果它们已完成，它会给我的设备更改方向的权限。为此，我使用以下代码：

```
setRequestedOrientation(-1); // as far as I know -1 in this case means unspecified 
```

我也尝试`setRequestedOrientation(4);`过`setRequestedOrientation(10);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:24:47.483

这个答案有很多赞成票：

[后台任务、进度对话框、方向更改 - 是否有任何 100% 可行的解决方案？](https://stackoverflow.com/questions/3821423/background-task-progress-dialog-orientation-change-is-there-any-100-working/3821998#3821998)

我想这就是你要找的。有点复杂。

# silverlight - Silverlight 5 隐式 Datatemplate 和 ContentPresenter 绑定 MVVM

> ID：11962214
> 
> 赞同：1
> 
> 时间：2012-08-14T23:18:55.610
> 
> 标签：silverlight, data-binding

所以我有一个可能是多种类型的对象的集合。例如具有 B 的基类和后代 C、D、E。

所有这些都将在 ItemsControl 中，但是具有自定义（某种程度上是随机的）逻辑。因此，我在 XAML 中创建了一个 ItemsControl，指定将它们绑定到类型的 DataTemplates，并让 Silverlight 隐式数据模板引擎处理其余部分。

ItemsControl 呈现器中元素的位置在某种程度上是随机的，并且仅在运行时作为元素本身（基类的一部分）中的依赖属性可用。

我的问题是，默认情况下 ItemsControl 将项目包装在 ContentPresenter 对象中，因此在数据模板中设置 Canvas.Left 和 Canvas.Top 无效。因为这应该设置在 ContentPresenter 级别。但是，如果我定义 ContentPresenter 样式，则它的数据源是 ItemsControl 本身，而不是项目。因此，我不能以这种方式绑定项目的位置。

任何想法，如何将项目位置属性绑定到 ContentPresenters Canvas.Left 属性？

在代码方面：

```
<ItemsControl HorizontalAlignment="Stretch" Grid.Row="0" Grid.ColumnSpan="3"
                  x:Name="CardItems" ItemsSource="{Binding CardList}" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                  ScrollViewer.VerticalScrollBarVisibility="Disabled">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SizeChanged">
                <ei:CallMethodAction MethodName="WndSizeChanged" TargetObject="{Binding}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
<UserControl.Resources>
    <DataTemplate DataType="Card:AdCardViewModel">
        <Canvas d:DesignHeight="300" d:DesignWidth="150" Width="{Binding CardSize.Width}" Height="{Binding CardSize.Height}" Background="Red">
            <Canvas.Projection>
                <PlaneProjection RotationY="{Binding Path=Rotation}"/>
            </Canvas.Projection>
            <Viewbox>
                <StackPanel>
                    <StackPanel.Background>
                        <SolidColorBrush Color="{StaticResource OriginalRecommendationColor}"/>
                    </StackPanel.Background>
                    <TextBlock Text="{Binding AdCard}" Foreground="CadetBlue"/>
                </StackPanel>
            </Viewbox>
        </Canvas>
    </DataTemplate>
</UserControl.Resources> 
```

PS。我正在使用 MVVM Light，所以我宁愿避免使用文件后面的代码。

乐：

这似乎可行，但出于某种原因，Visual Studio Intellisense 对此一无所知。运行时似乎没问题，但在设计时没有。任何想法，如何使所有这些都在 Blend 中工作？

```
 <ItemsControl.Resources>
            <Style TargetType="ContentPresenter">
                <Setter Property="Canvas.Left"  Value="{Binding  Path=Position.Height}"/>
                <Setter Property="Canvas.Top"  Value="{Binding  Path=Position.Width}"/>
                <Setter Property="Width" Value="Auto"/>
                <Setter Property="Height" Value="Auto"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="VerticalAlignment" Value="Stretch"/>
            </Style>
        </ItemsControl.Resources> 
```

视图模型定位器：

```
 static ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

        // Step #1 - Register the data providing services, design and runtime versions
        if (ViewModelBase.IsInDesignModeStatic)
        {
            SimpleIoc.Default.Register<ICardService, DesignCardService>();
        }
        else
        {

            SimpleIoc.Default.Register<ICardService, CardService>();

        }

        // Step#2 Register the ViewModels
        SimpleIoc.Default.Register<CardSlideShowViewModel>();
    }

    /// <summary>
    ///     Gets the Video property.
    /// </summary>
    [SuppressMessage("Microsoft.Performance",
        "CA1822:MarkMembersAsStatic",
        Justification = "This non-static member is needed for data binding purposes.")]
    public CardSlideShowViewModel CardSlideShowSlideShow
    {
        get { return ServiceLocator.Current.GetInstance<CardSlideShowViewModel>(); }
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:33:50.990

设计时视图模型应该可以解决问题。您只需要创建运行时 vm 的简单表示 - 在其构造函数中初始化 CardViewModel 集合。

然后在设计时绑定 ViewModel，如下所示：

```
<UserControl x:Class="MyView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         d:DataContext="{d:DesignInstance local:MyViewModel,
                                          IsDesignTimeCreatable=True}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:12:47.023

好吧，这不是一个真正的答案，但我最接近这个。在我看来，VS 2010 还不支持这一点。但是它在 VS 2012 中有效。因此，如果您可以进行升级。

# c++ - 未解析的外部符号 boost::chrono::system_clock::now(void)

> ID：11962219
> 
> 赞同：5
> 
> 时间：2012-08-14T23:19:31.573
> 
> 标签：c++, visual-studio-2008, boost

google 太不厚道了……

我最近拉下了 boost 1.50，并试图使用它来构建我的项目。这是一个大型项目，使用了几个增强功能（线程、信号、指针类、精神等）。一些细节：
- MSVC 9.0 (2008)
- 静态链接提升

我在链接每个生成的 exe 时遇到错误，但我没有直接链接 chrono。错误是：

```
libboost_thread-vc90-mt-sgd-1_50.lib(thread.obj) : error LNK2019: unresolved external symbol "public: static class boost::chrono::time_point<class boost::chrono::system_clock,class boost::chrono::duration<__int64,class boost::ratio<1,10000000> > > __cdecl boost::chrono::system_clock::now(void)" (?now@system_clock@chrono@boost@@SA?AV?$time_point@Vsystem_clock@chrono@boost@@V?$duration@_JV?$ratio@$00$0JIJGIA@@boost@@@23@@23@XZ) referenced in function "public: bool __thiscall boost::thread::try_join_until(class boost::chrono::time_point<class boost::chrono::system_clock,class boost::chrono::duration<__int64,class boost::ratio<1,1000000000> > > const &)" (?try_join_until@thread@boost@@QAE_NABV?$time_point@Vsystem_clock@chrono@boost@@V?$duration@_JV?$ratio@$00$0DLJKMKAA@@boost@@@23@@chrono@2@@Z) 
```

我看到了[这个问题](https://stackoverflow.com/questions/11575660/undefined-reference-to-boostchronosystem-clocknow-boost-and-cpp-net)，但我没有直接控制链接的顺序（而是使用自动链接功能）。如果我缺少特定的库，我可以手动链接它；次优，但可能。但是，我不知道缺少什么。看来（在我的半受过教育的观点）该符号被外部化在chrono lib中，而不是在system lib中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T00:12:32.927

看看[文档](http://www.boost.org/doc/libs/release/doc/html/thread/build.html)。它指定您必须链接到 chrono 和 system 才能使用线程，除非您提供一些特定的宏来禁用它们的使用（并失去它们的功能）。

# c++-cli - 检查字典是否为空

> ID：11962222
> 
> 赞同：1
> 
> 时间：2012-08-14T23:19:54.580
> 
> 标签：c++-cli

我有一个带有输入参数的 c++-cli 函数一个字符串字典

```
Locate(Dictionary<String^, String^>^ Dic) 
```

有时正在传递的 Dic 是空的。第一个字符串或第二个字符串中根本没有条目。如何检查字典 Dic 是否完全为空？我知道 TryGetValue 仅在第一个 String 存在时才有效。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:24:22.597

您可以检查[Count](http://msdn.microsoft.com/en-us/library/zhcy256f.aspx)属性：

```
bool isEmpty = Dic->Count == 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:27:08.463

我从未使用过 CLI，但快速 MSDN 搜索 Dictionary 容器显示它具有指示*“字典中包含的键/值对的数量”的*[`Count`属性](http://msdn.microsoft.com/en-us/library/zhcy256f.aspx)。大概你可以测试这个值为零。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:27:20.900

.net 对象[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)有一个名为 Count 的属性。

我猜 c++/cli 可以调用该属性的值：类似于 dict->Count 或 dict->Count()。

然后你测试返回的值。*

# mysql - 为什么我不能在此列上创建外键？

> ID：11962226
> 
> 赞同：2
> 
> 时间：2012-08-14T23:20:03.183
> 
> 标签：mysql, foreign-keys

我正在尝试创建两个具有一对多关系的表。以下是它们的模式：

```
CREATE TABLE property_key (
    id INTEGER AUTO_INCREMENT PRIMARY KEY,
    property VARCHAR(4000)
);

CREATE TABLE property_value (
    id INTEGER AUTO_INCREMENT PRIMARY KEY,
    prop_key VARCHAR(4000),
    prop_value VARCHAR(4000),
    lang VARCHAR(2),
    INDEX ix_land(lang)
); 
```

`property_value`当我尝试在和`property_key`on之间添加外键关系时`prop_key`，出现一个奇怪的错误：

> ```
> [ALTER - 0 row(s), 0.000 secs]  [Error Code: 1005, SQL State: HY000] 
> Can't create table 'test.#sql-a8_6' (errno: 150) 
> ```

我使用的 ALTER 语法是：

```
ALTER TABLE property_value ADD CONSTRAINT fk_prop_key FOREIGN KEY (prop_key) REFERENCES property_key(property); 
```

我已经就此事查阅了[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)，但我已经满足了那里的所有要求。我该如何缓解这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:20:03.183

一个问题是字段太大。 [InnoDB 每个键的字段限制为 768 字节](https://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)，正在创建的外键约为 8KB。此外，不可能确保外键是唯一的。

缓解这种情况的两个选项 - 您可以将 VARCHAR 字段的大小减少到小于 768 字节，或者`id`改为索引这两个字段。

```
ALTER TABLE property_value
    ADD CONSTRAINT fk_property_key_id FOREIGN KEY (property_key_id)
    REFERENCES property_key(id); 
```

# windows-store-apps - 以编程方式重新启动 Windows 应用商店应用

> ID：11962230
> 
> 赞同：2
> 
> 时间：2012-08-14T23:20:36.473
> 
> 标签：windows-store-apps, winjs

我知道可以`MSApp.terminateApp`用来杀死应用程序。重新启动应用程序怎么样？有重启命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:34:23.363

重新启动不符合 Windows 8 应用程序概念（以前称为 Metro）。如果您进入不可恢复的状态，那么适当的做法是让它崩溃并让 Windows 从那里处理它。

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#app_crash)：

> 应用程序崩溃
> 
> 应用程序需要遵循系统崩溃体验，即简单地返回开始屏幕。系统崩溃体验旨在让用户尽快回到他们正在执行的操作，因此您不应提供警告对话框或其他通知，因为这会导致用户延迟。应用程序的消失应该让用户清楚地知道出了什么问题。
> 
> 如果您的应用程序崩溃、停止响应或生成异常，Windows 会请求用户同意向 Microsoft 发送问题报告。Microsoft 在问题报告中向您提供了错误数据的子集，以便您可以使用它来改进您的应用程序。您将能够在适用于 Metro 风格应用程序的 Windows 开发中心的仪表板中的应用程序质量页面中看到此数据。（请注意，在 Windows 应用商店为一般提交打开之前，您无法提交应用或查看应用的数据。）
> 
> 当用户在应用程序崩溃后激活应用程序时，其激活事件处理程序会接收到 NotRunning 的 ApplicationExecutionState 值，并且应该简单地显示其初始 UI 和数据。

# jquery - jquery - 测试是否在字段集中检查了范围内的特定复选框

> ID：11962242
> 
> 赞同：2
> 
> 时间：2012-08-14T23:21:55.160
> 
> 标签：jquery

我需要查看是否选中了字段集中某个范围内的任何复选框

```
<fieldset id="issues">
    <input name="A" id="issue_0" type="checkbox" value="A" /> <--- this one
    <input name="B" id="issue_1" type="checkbox" value="B" />
    <input name="C" id="issue_2" type="checkbox" value="C" />
    <input name="D" id="issue_3" type="checkbox" value="D" />
    <input name="E" id="issue_4" type="checkbox" value="E" />
</fieldset> 
```

字段集是#issues，这可以很好地查看是否检查了其中任何一个

```
if( $('#issues input[type="checkbox"]').is(':checked') ){
  console.log("One of them is checked");
} 
```

但我想查看是否选中了按索引的特定复选框，即是否选中了第一个复选框。我试过这个...

```
if( $('#issues input[type="checkbox"][0]').is(':checked') ){
  console.log("Item one is checked");
} 
```

但它不起作用

如何通过字段集中的索引定位特定复选框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T23:23:54.257

```
if( $('#issues input[type="checkbox"]').first().is(':checked') ){
    console.log("Item one is checked");
} 
```

用于`.first()`抓住包装中的第一个。

另外我建议使用`.prop()`它，因为它在涉及跨浏览器问题时更容易处理！

```
if( $('#issues input[type="checkbox"]').first().prop('checked') === true ){
    console.log("Item one is checked");
}​ 
```

如果您需要获取特定索引，您可以执行以下操作：

```
var index = 2;
if( $('#issues input[type="checkbox"]').eq(index).prop('checked') === true ){
    console.log("Item one is checked");
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T23:25:54.597

您可以使用以下`eq()`方法：

> 在匹配集中选择索引 n 处的元素。

```
 if( $('#issues input[type="checkbox"]').eq(0).is(':checked') ){
    console.log("Item one is checked");
 } 
```

或使用`:eq()`选择器：

```
$('#issues input[type="checkbox"]:eq(0)') // selects the first input
$('#issues input[type="checkbox"]:eq(1)') // selects the second input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:27:45.537

这将允许您选择第 n 个孩子：

[http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

```
if( $('#issues input[type="checkbox"]:nth-child(1)').is(':checked') ){
    console.log("child one is checked");
 } 
```

# c# - LDAP 身份验证失败。这可能是由于域的变化吗？

> ID：11962254
> 
> 赞同：0
> 
> 时间：2012-08-14T23:23:22.260
> 
> 标签：c#, asp.net, authentication, httpcontext

当我在域“X”下但最近迁移到“y”时，我可以登录到 Web 应用程序。但是我的 VS.Net 2003 代码没有做任何事情来验证域。只要我在数据库中注册，它就会带我进入。我真的很惊讶它为什么突然停止工作。由于网络级别的活动目录设置，可能有什么问题吗？

仅供参考：我使用我的 Windows 登录 ID（在数据库中注册的相同）和域密码登录。

这是代码。

当 login.aspx 加载时，我调用 Authenticate() 方法

```
 private void Authenticate()
            {
                try
                {
                    oBELogin = new EntityLogin(); //Property

                    oBELogin.UserId = Context.User.Identity.Name.Split('\\')[1].ToString(); //Here i used to get "domain name\login id".
                    dsLogin = (DataSet)oWFLogin.DBAuthentication(oBELogin,"Y"); //This is a web service call for authentication.  From there Database layer -> Stored procedure call.  Everything happens fine

                    if(dsLogin.Tables[0].Rows.Count>0)
                    {
                       //Code for session that works.                       
                        Response.Redirect("Page2.htm",false);
                    }
                }
                catch(System.Threading.ThreadAbortException excep) {}
                catch(System.IndexOutOfRangeException exOutOfRange)
                {
                  //Write IndexOutOfRangeException
                }

                catch(Exception ex)
                {
                  //LDAP error
                }
            } 
```

我在 Web 表单上提供了正确的登录凭据。我在 web.config 中设置了特定于域的值，但这些值并未在此范围内的任何地方使用。我希望我应该提供有关该问题的更多详细信息。但无论如何我认为，这是我能达到的最大值。

更多信息：我可以将此错误消息记录到日志文件中。

```
8/14/2012 11:45:06 PM : System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.Runtime.InteropServices.COMException (0x8007052E): Logon failure: unknown user name or bad password
   at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
   at System.DirectoryServices.DirectoryEntry.Bind()
   at System.DirectoryServices.DirectoryEntry.get_NativeObject()
   at WorkFlow.WorkFlowLogin.Login()
   at WorkFlow.WorkFlowLogin.LDAPAuthentication(EntityLogin oBELogin, String strURL, String strDomain)
   --- End of inner exception stack trace ---   at Web.Login.LDAPUserAuth()
   at Web.Login.btnLogin_ServerClick(Object sender, EventArgs e) Source = Web Url = http://localhost:8090/Web/WorkFlow/WorkFlowLogin.asmx 
```

# c# - 获取时间戳的期间结束时间？（将 DateTime 向上舍入）

> ID：11962257
> 
> 赞同：1
> 
> 时间：2012-08-14T23:23:52.273
> 
> 标签：c#, datetime, rounding

我正在尝试创建一个函数，该函数针对给定的分辨率返回时间戳的期间结束日期时间。例如，如果分辨率为 10 分钟（存储为 TimeSpan），我的时间戳为 2012-08-14 12:34，则期间结束时间为 2012-08-14 12:40。下面的其他示例

```
Timestamp: 2012-08-14 1:15; Resolution: 01:00:00; Result: 2012-08-14 2:00
Timestamp: 2012-08-14 11:59; Resolution: 00:10:00; Result: 2012-08-14 12:00
Timestamp: 2012-08-14 12:00; Resolution: 00:10:00; Result: 2012-08-14 12:00
Timestamp: 2012-08-14 12:01; Resolution: 00:10:00; Result: 2012-08-14 12:10 
```

我试图关注[这篇文章](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/87d2b1d5-ee1e-4906-a499-3e38775614d3)（为 t-sql 编写），但在支持 15 分钟、60 分钟和 1 天的分辨率时遇到了麻烦

知道如何制作可以支持这些多个（和运行时间确定的）分辨率的动态解决方案吗？

**编辑** 这是我到目前为止所拥有的，只要您的分辨率小于 60 分钟，它就可以工作，但是一旦您的分辨率为 1 小时，您将分钟除以零并获得异常。

```
 public static DateTime ConvertToPeriodEndingTimestamp(TimeSpan resolution, DateTime timestamp)
    {
        var modifiedDate = new DateTime();
        var baseDate = new DateTime(2008, 01, 01, 00, 00, 00);
        var cursor = baseDate;

        var nowToBaseDateDifference = timestamp.Subtract(baseDate).TotalMinutes;

        //SET @Result = DATEADD(MINUTE, (resolution.TotalMinutes * (nowtoBaseDateDifference / resolution.TotalMinutes)) + resolution.TotalMinutes, '20000101')
        modifiedDate =
            baseDate.AddMinutes(((resolution.TotalMinutes*(int)(nowToBaseDateDifference/resolution.TotalMinutes)) +
                                 resolution.TotalMinutes));

        if(timestamp.Minute % resolution.Minutes == 0)
            modifiedDate = modifiedDate.Add(-resolution);

        return modifiedDate;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:34:01.860

如果您的时间跨度是一天的因子（864000000000 滴答声），则此答案有效。

获取时间戳和时间跨度中的刻度数。取两者的模数，这将为您提供该周期内到目前为止的刻度数。如果这是零，那么你可以认为这是上一期的结束，你就完成了。否则，减去它以给出周期的开始，然后加上时间跨度中的刻度数以给出周期的结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:34:42.800

像这样的东西？它使用一个`int`，而不是一个`TimeSpan`虽然...

```
public static DateTime TimeRoundUp(DateTime dt, int Interval)
{
    int nextMin = (int)(dt.Minute / Interval);
    int lowerEdge = nextMin * Interval;
    int upperEdge = lowerEdge + Interval;
    if (dt.Minute - lowerEdge < upperEdge - dt.Minute)
    {
        nextMin = lowerEdge - dt.Minute;
    }
    else
    {
        nextMin = upperEdge - dt.Minute;
    }
    if (nextMin > 59)
    {
        nextMin = 60 - dt.Minute;
    }
    dt = dt.AddMinutes(nextMin);
    dt = dt.AddSeconds(-dt.Second); // zero seconds
    return dt;
} 
```

虽然我没有彻底测试过它，但它可以让你开始。

# api - 使用服务模块远程登录 Drupal 7 站点

> ID：11962259
> 
> 赞同：8
> 
> 时间：2012-08-14T23:24:00.637
> 
> 标签：api, drupal, service

**目标：**

我希望我的 Web 应用程序能够将我的 Drupal 站点上的用户的用户名和密码发送到 Drupal 站点，并让 Drupal 站点响应确认用户身份验证信息是否正确。

另一个需要是让 Drupal 服务器为创建的会话返回一个会话 ID，以及用户的信息，如电子邮件、用户角色等。

**到目前为止我所拥有的：**

我启用了 Services Rest Server，并在 www.mysite.com/rest/ 创建了一个端点。我已将响应格式设置为仅 json，并将解析器请求为 application/x-www-form-urlencoded。我已经打开了会话身份验证，调试模式。我还确保为此端点启用整个用户资源。导航到 www.mysite.com/rest/user 确实给了我所有用户的列表。

关于我的身份验证尝试，我尝试发送请求：

```
POST www.mysite.com/rest/user/login
    Content-Type: application/x-www-form-urlencoded
    POST Body:
        name:admin,
        pass:myadminpassword 
```

但它只是不断返回 401 Unauthorized 响应。我已经仔细检查过，身份验证信息是正确的。我已经尝试过参数名称的其他变体，例如：（用户名，密码），（用户，密码），（名称，密码）等。

我似乎无法让登录工作，我查看了我在 Stackoverflow 上找到的其他示例，但它们没有工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:54:04.397

drupal.org 中有很好的服务模块文档。特别是这里有几个使用服务的例子：http: [//drupal.org/node/783722](http://drupal.org/node/783722)

此页面上的示例使用命令行工具 curl：[http ://drupal.org/node/1795770](http://drupal.org/node/1795770)

并包含一个登录示例：

```
curl -X POST -i -H "Content-type: application/json" -c cookies.txt -X POST http://localhost:8888/service/user/login -d '
{
    "username":"user",
    "password":"password"
}
' 
```

所以：

*   你的端点没问题
*   内容类型应为 application/json
*   并且正文应该类似于 { "username":"admin", "password":"pass" }

# opengl - LibGDX FrameBuffer 混合

> ID：11962262
> 
> 赞同：3
> 
> 时间：2012-08-14T23:24:17.860
> 
> 标签：opengl, libgdx, blend, framebuffer, fbo

这里有一些简单的背景知识，我刚开始使用 LibGDX 框架进行 Android 游戏开发的第一次尝试。我正在尝试通过放置精灵来使用他们的 FrameBuffer 类构建纹理，并且我想将此纹理用作一种逐级动态/随机背景。

不幸的是，当精灵被添加到 FrameBuffer 时，它们似乎会完全覆盖它们下面的任何东西。一般来说这很好，但是我将使用的许多精灵都有半透明像素，并且因为这些透明像素会覆盖它们下面的任何实心像素，它会显示为基本背景颜色并产生非常不愉快的效果.

换句话说，从多个精灵中创建一个实体纹理并将它们层叠在一起而不完全移除较低像素（至少如果顶部像素是半透明的）的最佳方法是什么？

在这方面进行了几个小时的试验和搜索，我不知所措。谢谢你的时间！

**- - - 编辑 - - -**

这是用于将精灵添加到 FBO 的代码。它非常缺乏，因为目前我只是在随机位置添加一个精灵以进行测试。我很乐意根据要求发布任何代码，但是现在整个设置都非常简约，可以解决这个问题。

```
 m_fbo.begin();
    batch.begin();
    batch.setBlendFunction(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);
    sprite.draw(batch);
    batch.end();
    m_fbo.end(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:53:53.903

老问题，但是你能粘贴FBO初始化代码吗？您需要在 FBO 中有一个 Alpha 通道。另一件事是 FBO 是 GLES 2.0 的特性，因此您可能想要使用自己的着色器，因为必须在 GLES 2.0 上手动完成 alpha 测试。

最后，您是否启用了批次混合？

批处理.enableBlending();

应该做的伎俩。

# android - ViewPager setCurrentItem(pageId, true) 不平滑滚动

> ID：11962268
> 
> 赞同：49
> 
> 时间：2012-08-14T23:25:02.253
> 
> 标签：android, android-layout

我正在 SDK 4.03、Samsung Infuse Android 2.2、Android 4 支持库上编译，并在我的应用程序中使用 ViewPager，实际滑动工作正常，但是当我这样做时

```
viewPager.setCurrentItem(id); // , or
viewPager.setCurrentItem(id, true); 
```

它不会平滑滚动，但会立即切换视图。尽管文档明确指出，这是将第二个参数设置为 true 的目的。这是怎么回事？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-21T14:07:40.980

我通过创建一个使用反射覆盖 ViewPager.mScroller 的 MyViewPager 解决了这个问题。

```
public class MyViewPager extends ViewPager {

    public MyViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        setMyScroller();
    }

    private void setMyScroller() {
        try {
            Class<?> viewpager = ViewPager.class;
            Field scroller = viewpager.getDeclaredField("mScroller");
            scroller.setAccessible(true);
            scroller.set(this, new MyScroller(getContext()));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public class MyScroller extends Scroller {
        public MyScroller(Context context) {
            super(context, new DecelerateInterpolator());
        }

        @Override
        public void startScroll(int startX, int startY, int dx, int dy, int duration) {
            super.startScroll(startX, startY, dx, dy, 1000 /*1 secs*/);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-08T15:45:42.470

这就是我所做的。我通过将我自己的自定义子类放在同一个包`smoothScrollTo`中来覆盖包私有方法。`ViewPager`它被传递一个零值，这会导致捕捉行为而不是平滑滚动。

```
package android.support.v4.view;

import android.content.Context;
import android.util.AttributeSet;

public class MyViewPager extends ViewPager {

    public MyViewPager(Context context) {
        super(context);
    }

    public MyViewPager(Context context, AttributeSet attr) {
        super(context, attr);
    }

    void smoothScrollTo(int x, int y, int velocity) {
        super.smoothScrollTo(x, y, 1);
    }
} 
```

效果很好，如果您愿意，您可以计算并提供仅为 1 的实际速度 ISO。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-11-02T09:06:28.183

我`setCurrentItem`在处理程序中调用了函数，它对我来说很好。

```
new Handler().post(new Runnable() {
        @Override
        public void run() {
            myViewPager.setCurrentItem(1, true);
        }
    }); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-19T15:39:10.020

我知道这个帖子很老了，但这是谷歌搜索结果中的佼佼者之一。我一直在反复讨论如何解决这个问题。上述解决方案都没有帮助我。但是，我确实找到了适合我的解决方案。

我的设置目前看起来是 viewpager 中的列表视图。当您单击其中一个视图时，它会创建一个新页面并滚动到该页面。这以前很活泼，但似乎这是因为我在打电话

```
mViewPager.setCurrentItem(intIndex, true); 
```

从我的 OnClickEvent 内部。由于某种原因，viewpager 不喜欢这个，所以我做了这个函数。它创建一个在 UI 线程上运行 runnable 的新线程。这个可运行文件告诉 ViewPager 滚动到某个项目。

```
public static void scrollToIndex(int index) {

    final int intIndex = index;

    //We're going to make another thread to separate ourselves from whatever
    //thread we are in 
    Thread sepThread = new Thread(new Runnable(){

        public void run()
        {
            //Then, inside that thread, run a runnable on the ui thread.
            //MyActivity.getContext() is a static function that returns the 
            //context of the activity. It's useful in a pinch.
            ((Activity)MyActivity.getContext()).runOnUiThread(new Runnable(){

                @Override
                public void run() {

                    if (mSlidingTabLayout != null)
                    {
                        //I'm using a tabstrip with this as well, make sure
                        //the tabstrip is updated, or else it won't scroll
                        //correctly
                        if(mSlidingTabLayout.getTabStripChildCount() <= intIndex)
                        mSlidingTabLayout.updateTabStrip();

                        //Inside this thread is where you call setCurrentItem
                        mViewPager.setCurrentItem(intIndex, true);

                    }

                }

            });

         }
    });

    sepThread.start();

} 
```

我希望我至少帮助了解决这个问题的人。祝你好运！

编辑：查看我的答案，我很确定你可以在 ui 线程上运行，它应该可以工作。不过，我还没有测试过。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-05T15:47:08.003

我创建了这个类，因为我对上述解决方案并不完全满意

该类覆盖`setCurrentItem(int item, boolean smoothScroll)`并使用反射来尽可能保持此方法的原始性。关键是速度不是 0。你只需`ViewPager`要用这个`MyViewPager`类替换你的 current 并像往常一样使用它：

```
import android.content.Context;
import android.util.AttributeSet;

import java.lang.reflect.Field;
import java.lang.reflect.Method;

import androidx.viewpager.widget.ViewPager;

public class MyViewPager extends ViewPager {

    public MyViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * Set the currently selected page. If the ViewPager has already been through its first
     * layout with its current adapter there will be a smooth animated transition between
     * the current item and the specified item.
     *
     * @param item         Item index to select
     * @param smoothScroll True to smoothly scroll to the new item, false to transition immediately
     */
    @Override
    public void setCurrentItem(int item, boolean smoothScroll) {
        final Class<?> viewpager = ViewPager.class;
        int velocity = 1;

        try {
            Field mPopulatePending = viewpager.getDeclaredField("mPopulatePending");
            mPopulatePending.setAccessible(true);
            mPopulatePending.set(this, false);

            Method setCurrentItemInternal = viewpager.getDeclaredMethod("setCurrentItemInternal", int.class, boolean.class, boolean.class, int.class);
            setCurrentItemInternal.setAccessible(true);
            setCurrentItemInternal.invoke(this, item, smoothScroll, false, velocity);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-25T00:57:35.160

对于那些使用 Xamarin 的人（尽管这种方法也适用于 Java），我可以建议根据上面的答案使用下一种方法（Android Support Library v7 AppCompat 19.1.0 中的 ViewPager）：

```
public void ScrollSmooth(int i)
{
    var jClass = JNIEnv.GetObjectClass(_pager.Handle);
    var jMethod = JNIEnv.GetMethodID(jClass, "setCurrentItemInternal", "(IZZI)V");
    JNIEnv.CallVoidMethod (_pager.Handle, jMethod, new JValue (i), new JValue (true), new JValue (false), new JValue (1));
} 
```

它依赖于来自[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/view/ViewPager.java的 ViewPager 实现](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/view/ViewPager.java)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T00:39:07.553

ViewPager 从修订版 5 到修订版 9 发生*了很大*变化。其中一些更改可能与您的问题有关：

*   ViewPager 中用户界面行为的错误修复（修订版 5 和 6）
*   修复了 ViewPager 的许多错误（修订版 9）

鉴于您的代码应该可以正常工作，我最好的猜测是您的支持库不是最新的。如果不是，请尝试更新库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-16T09:06:53.177

我有同样的问题，但今天我找到了一个简单的解决方案。也许它会帮助你。首先，假设我们有一个填满整个屏幕的 ViewPager。为了在页面之间切换，我创建了自己的带有标签的自定义视图并将其放在 ViewPager 上。单击选项卡应该使用 setCurrentItem(item, true) 平滑地滚动到 ViewPager 中的相应页面 - 但它会立即滚动，没有平滑！然后我尝试在 ViewPager + 回调上添加一个简单的按钮（不是自定义的）：

```
@Override
public void onClick(View v) {
   viewPager.setCurrentItem(item, true);
} 
```

在那之后，平滑的卷轴开始工作。因此，解决方案非常简单：在 Button 类内部，内部 boolean onTouch(...) 侦听器返回 true，因此它总是消耗触摸事件！然后，当我在内部布尔 onTouch(...) 侦听器中将“return false”替换为“return true”时，平滑滚动开始为我的自定义选项卡视图工作。

我希望我的成功故事可以帮助到你。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-23T11:46:37.160

下面的代码将暂停页面片刻（500 毫秒）然后滑动到下一个。

```
import androidx.viewpager.widget.ViewPager;

new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            viewPager.setCurrentItem(index, true);
        }
    }, 500); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-05T03:48:28.080

注意这个变量`mFirstLayout`- viewpager 回调时会被设置为 true `onAttachedToWindow`（比如在 recyclerview 上），所以不会是smoothScroll。您应该覆盖 onAttachedToWindow 来控制`mFirstLayout`变量。是这样的：</p>

```
 @Override
        protected void onAttachedToWindow() {
            super.onAttachedToWindow();
            try {
                Field mFirstLayout = ViewPager.class.getDeclaredField("mFirstLayout");
                mFirstLayout.setAccessible(true);
                mFirstLayout.set(this, false);
                getAdapter().notifyDataSetChanged();
                setCurrentItem(getCurrentItem());
            } catch (Exception e) {
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-21T06:02:35.237

在浪费了我一整天之后，我找到了一个解决方案，将 offscreenPageLimit 设置为 total no。的页面。

请遵循此[https://stackoverflow.com/a/54800154/9097612](https://stackoverflow.com/a/54800154/9097612)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-22T23:30:01.577

正如其他人后来发现的那样，这是一个错误，我们必须延迟发布，但它可以很简单：

```
pager.post {
    pager.setCurrentItem(1, true)
} 
```

可悲的是，您必须尝试第一批错误的答案才能解决此问题...

* * *

## 回答 #13

> 赞同：-6
> 
> 时间：2016-09-15T21:40:50.593

试试这个代码：

```
viewPager.postDelayed(new Runnable()
{
    @Override
    public void run()
    {
        viewPager.setCurrentItem(id, true);
    }
}, 100); 
```

# objective-c - 如何获得 CPU 最密集的应用程序的名称？

> ID：11962273
> 
> 赞同：0
> 
> 时间：2012-08-14T23:26:04.953
> 
> 标签：objective-c, macos

我特别要求 OS X 上的 Objective-C/C 解决方案。应用程序的 CPU 强度可以定义为它使用的 CPU 的百分比。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:01:41.630

这个问题有很多答案。

如果您的意思是“什么现在使用最多的 CPU？”，答案几乎总是您的应用程序，因为它被安排在一个核心上来回答这个问题。

这意味着您确实在寻找一段时间内的平均值。但这也不是完全容易回答的。如果您在一段时间内取平均值并且应用程序非常突发，那么它的使用率可能看起来很低。如果您缩短差距，您可能会看到一些应用程序人为地设置了非常高的 %s。

转到终端窗口并键入`top -u`。然后在做事时观察波动。

事实上，在一个完全多任务的系统上测量应用程序的 CPU 使用率充满了各种微妙的细节。我建议查看命令的源代码，该`top`命令可能在“bsd utils”或“bsd commands”或[Apple 开源](http://opensource.apple.com)网站上的类似包中。

# paypal - 如何在贝宝定期付款和订阅之间切换？

> ID：11962277
> 
> 赞同：1
> 
> 时间：2012-08-14T23:26:42.080
> 
> 标签：paypal

我正在将贝宝订阅从旧的贝宝帐户迁移到新创建的帐户。我们在类似于[此处](https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_subscr_techview_outside)描述的网站上有一个标准订阅表格。

问题是一旦我将订阅切换到新帐户（​​通过更改

```
<input type="hidden" name="business" value="me@mybusiness.com"> 
```

到表单上的新电子邮件）订阅开始表现不同。

订阅后，我会收到一封完全不同的电子邮件，上面写着：

> 您为 Company Inc. 设置了自动付款配置文件。

代替：

> 产品订阅收据

我的贝宝付款历史记录也显示`Recurring Payment To`而不是`Subscription Creation To`，并且订阅 ID 现在采用`I-XXXXXXXX`格式而不是`S-XXXXXXXXX`.

我需要在新的贝宝帐户上设置什么才能使其再次产生定期订阅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:22:00.263

那已经不可能了。截至 2010 年 10 月（我*认为*）PayPal 将不再创建 S 型订阅，并且新帐户默认创建“定期付款”（以 I- 开头），无论它们是否通过`CreateRecurringPaymentsProfile`API 调用创建，或通过 HTML 表单。

# google-analytics-api - Google Analytics API 多个查询

> ID：11962286
> 
> 赞同：2
> 
> 时间：2012-08-14T23:27:21.497
> 
> 标签：google-analytics-api

是否可以将多个查询打包到 Google Analytics API？我正在使用 AnalyticsService（[在此处](https://developers.google.com/apis-explorer/#s/analytics/v3/analytics.data.ga.get)记录）使用以下语法运行后续查询：

```
 var query = this.AnalyticsService.Data.Ga.Get(
                this.GoogleAnalyticsProfileId, // profile id
                start.ToString("yyyy-MM-dd"), // start date
                DateTime.Now.ToString("yyyy-MM-dd"), // end date
                QueryMetricMap[metric]); // metrics

        var result = query.Fetch();

        var query2 = this.AnalyticsService.Data.Ga.Get(
                this.GoogleAnalyticsProfileId, // profile id
                start.ToString("yyyy-MM-dd"), // start date
                DateTime.Now.ToString("yyyy-MM-dd"), // end date
                QueryMetricMap[metric]); // metrics

        var result2 = query2.Fetch(); 
```

我知道可能有一些方法可以查询多个指标，但为简洁起见，上述示例被删减了——我对不同的查询使用了不同的过滤器和维度，这使得简单的布尔逻辑变得不可能。我想简单地将多个查询打包成一个请求。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T20:18:03.967

为上述问题添加正确答案，谷歌数据协议中允许批处理，这里是官方文档[链接](https://developers.google.com/gdata/docs/batch)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:36:12.513

不。

如果它们真的很相似，您可以将它们放在一个循环中，并拥有一个配置数组来更改每个查询的特定设置。

更好的是，与其在异常可能杀死所有这些的循环上运行它们，不如将每个查询作为一个作业推送到队列中，并有一个子系统从队列中拉出作业并查询谷歌分析。现在，您可以快速将所需的任务数量排队并让子系统单独处理它们，同时您的应用程序安全快速地返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T15:00:03.427

我认为它尚未针对 Google Analytics 实施。似乎是悬而未决。 [https://code.google.com/p/analytics-issues/issues/detail?id=276&can=1&q=batch&colspec=ID%20Component%20Type%20Status%20Priority%20Stars%20Summary](https://code.google.com/p/analytics-issues/issues/detail?id=276&can=1&q=batch&colspec=ID%20Component%20Type%20Status%20Priority%20Stars%20Summary)

Also, per @Cody 's link, I'm not returning a batch link relation when I query the feed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-28T14:25:26.740

The **R language** and the RGoogleAnalytics package might help with that. Here is an example of querying multiple GA Views using a for loop in R.

[http://www.analyticsforfun.com/2015/05/query-multiple-google-analytics-view.html](http://www.analyticsforfun.com/2015/05/query-multiple-google-analytics-view.html)

# css - IE7 - setAutoGrow 不起作用

> ID：11962287
> 
> 赞同：11
> 
> 时间：2012-08-14T23:27:31.193
> 
> 标签：css, facebook, internet-explorer-7

我创建了一个在标签的 iFrame 中使用的 facebook 应用程序。

我正在使用 Javascript SDK 的 setAutoGrow 函数使 iFrame 展开直到内容结束。

根据我的观察，setAutoGrow 函数在 IE7 中不起作用，我不知道为什么。所有其他浏览器（包括 IE8 和 9）都可以正常工作。

出于测试目的，我创建了一个 1500 像素高的渐变。

![用于测试 1500 像素高度的示例渐变](../Images/08109c2d2d99bffe2148bc186f7d7094.png)

例如，我将发布它在 Chrome 中的样子。如您所见，渐变可以滚动到最后（红色）：

![iFrame 选项卡内的渐变在普通浏览器中按预期工作](../Images/f7b9c7993bd233000cf394d3395497d5.png)

现在是 IE7 中发生的事情。iFrame 的默认高度为 800 像素（在应用程序设置中定义）。您可以看到它在“turquoise”处停止，并且 setAutoGrow 函数没有将其扩展到所需的高度（1500px）。

![iFrame 选项卡内的渐变不会在 IE7 中展开](../Images/75ffb9abe24100dd4df5786225e81b4f.png)

我的 CSS 的重要部分如下所示：

```
body, html { 
    overflow: hidden;        
    margin: 0; padding: 0;
}

    #wrapper {
        margin: 0 auto;
        width: 810px;    
    }

        #content {
          background: url(../img/bg.jpg) top left no-repeat;
          height: 1500px;
        } 
```

这是我在结束 body-tag 之前和 fb-root 标记之后放置的 javascript 片段：

```
window.fbAsyncInit = function() {

    FB.init({

        appId      : '...',
        channelUrl : '...',
        status     : true,
        cookie     : true,
        xfbml      : true

    });

    FB.Canvas.setAutoGrow();

}; 
```

我发现了一个可以追溯到 8 月 1 日的错误报告，该报告已被 FB 关闭： [https ://developers.facebook.com/bugs/209607222498543?browse=search_5009002cb69058a73627413](https://developers.facebook.com/bugs/209607222498543?browse=search_5009002cb69058a73627413)

我已阅读并应用了以下主题的提示： [Facebook iframe FB.Canvas.setAutoGrow does not auto grow after initial load?](https://stackoverflow.com/questions/9197411/facebook-iframe-fb-canvas-setautogrow-does-not-auto-grow-after-initial-load)

...但似乎没有什么可以解决问题。

有没有人有明显的提示，我监督过的事情，或者这个问题的简单解决方案/解决方法？

当我使用 IE7 DebugBar 时，我注意到它在加载名为“dimension_context.php”的 URL 时出现问题。我会附上截图。

![IE7 DebugBar 加载问题](../Images/8ed9ec079577f5a3aac3c472bdf0d330.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:52:54.073

你可以[在这里](https://www.facebook.com/purinaportugal/app_412523318790304)看到我的标签在 IE7 上工作：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" 
type="text/javascript"></script>
</head>
<body style="overflow:hidden">
<div id="fb-root"></div>
<!-- YOUR HTML -->
<script type="text/javascript">
window.fbAsyncInit = function () {
        FB.init({
            appId: 0000000000000, // App ID

            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            oauth: true, // enable OAuth 2.0
            xfbml: true  // parse XFBML
        });

        FB.Canvas.setAutoGrow();
        FB.Canvas.setSize({ width: 810, height: 1417 });

    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        d.getElementsByTagName('head')[0].appendChild(js);
    } (document));
</script>
</body>
</html> 
```

我的应用设置：

页面标签宽度：810px
画布宽度：固定
画布高度：固定为 1147px

如果您希望标签适应不同的高度，请在每个页面中尝试以下操作：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" 
type="text/javascript"></script>
</head>
<body style="overflow:hidden">
<div id="fb-root"></div>
<!-- YOUR HTML -->
<script type="text/javascript">
$(document).ready(function(){
    window.fbAsyncInit = function () {
        FB.init({
            appId: 0000000000000, // App ID

            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            oauth: true, // enable OAuth 2.0
            xfbml: true  // parse XFBML
        });

        FB.Canvas.setAutoGrow();
        FB.Canvas.setSize({ width: 810, height: $(document).height()});

    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        d.getElementsByTagName('head')[0].appendChild(js);
    } (document));

});
</script>
</body>
</html> 
```

看一个例子：

[https://www.facebook.com/pages/Vpascoal/215529398504982?sk=app_105369212942645](https://www.facebook.com/pages/Vpascoal/215529398504982?sk=app_105369212942645) （点击图片）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:04:51.767

您是否尝试通过向其添加随机 GET 参数来破坏 all.js 的缓存？此外，我会将 http:// 部分重写为 // 以便在 facebook 处于 https 模式的情况下正确加载 javascript 文件。

```
<script type="text/javascript" language="javascript" src="//connect.facebook.net/en_US/all.js?v1"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:24:10.140

我正在使用这个可能对你有帮助

```
<html>
<body>
    <div id="fb-root">
    </div>
    <script type="text/javascript" language="javascript" src="http://connect.facebook.net/en_US/all.js"></script>
    <script type="text/javascript" language="javascript">
        FB.init({
            appId: 'APPID',
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true// parse XFBML
        });
        window.fbAsyncInit = function () {
            FB.Canvas.setSize();
        }
        //  FB.Canvas.setAutoResize();
        FB.Canvas.setAutoGrow(7);
    </script>
<form></form>

</body>
</html> 
```

# objective-c - 如何检索以下处理器统计信息？

> ID：11962289
> 
> 赞同：9
> 
> 时间：2012-08-14T23:28:09.897
> 
> 标签：objective-c, macos

我该如何检索：

i) 总进程数 ii) 总线程数

注意“总数”是指正*在使用的总数，* **而不是**系统支持的总数。

我特别要求在 OSX 上提供 Objective-C/C 解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T20:01:59.107

您可以使用`top`和抓取您要查找的内容，但我很好奇，所以我深入挖掘并找到`/usr/include/libproc.h`了，并编写了一些代码：

```
#import <libproc.h>
#import <stdlib.h>
#import <stdio.h>

int main( int argc, const char * argv[])
{
    pid_t * pids = calloc(0x1000, 1);
    int count = proc_listallpids(pids, 0x1000);

    printf("count=%u\n", count) ;

    for( int index=0; index < count; ++index)
    {
        pid_t pid = pids[ index ] ;

        struct proc_taskinfo taskInfo ;
        /*int result*/ proc_pidinfo( pid, PROC_PIDTASKINFO, 0,  & taskInfo, sizeof( taskInfo ) ) ;

        // fields of taskInfo:
//          uint64_t        pti_virtual_size;   /* virtual memory size (bytes) */
//          uint64_t        pti_resident_size;  /* resident memory size (bytes) */
//          uint64_t        pti_total_user;     /* total time */
//          uint64_t        pti_total_system;
//          uint64_t        pti_threads_user;   /* existing threads only */
//          uint64_t        pti_threads_system;
//          int32_t         pti_policy;     /* default policy for new threads */
//          int32_t         pti_faults;     /* number of page faults */
//          int32_t         pti_pageins;        /* number of actual pageins */
//          int32_t         pti_cow_faults;     /* number of copy-on-write faults */
//          int32_t         pti_messages_sent;  /* number of messages sent */
//          int32_t         pti_messages_received;  /* number of messages received */
//          int32_t         pti_syscalls_mach;  /* number of mach system calls */
//          int32_t         pti_syscalls_unix;  /* number of unix system calls */
//          int32_t         pti_csw;            /* number of context switches */
//          int32_t         pti_threadnum;      /* number of threads in the task */
//          int32_t         pti_numrunning;     /* number of running threads */
//          int32_t         pti_priority;       /* task priority*/

        printf("PID %u:\n", pid);
        printf("\t%20s\t%u\n", "number of threads", taskInfo.pti_threadnum) ;
        printf("\t%20s\t%u\n", "number running threads", taskInfo.pti_numrunning) ;

        printf("\n") ;
    }

    return EXIT_SUCCESS ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T08:06:04.160

大致遵循[top(1)的](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/top.1.html)[源代码](http://opensource.apple.com/source/top/top-73/libtop.c)，这在以 root 身份运行时有效：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/sysctl.h>
#include <mach/mach.h>
#include <mach/mach_error.h>
#include <mach/mach_vm.h>
#include <mach/task.h>

kern_return_t get_process_thread_count(long *process_count, long *thread_count) {
    kern_return_t   kr;
    processor_set_name_array_t psets;
    processor_set_t pset;
    task_array_t tasks;
    mach_msg_type_number_t  i, j, k, iCount, jCount, kCount;
    long process_accumulator = 0, thread_accumulator = 0;
    mach_port_t host_self = mach_host_self();
    mach_port_t task_self = mach_task_self();
    thread_act_array_t threads;
    int pid;

    if ((kr = host_processor_sets(host_self, &psets, &iCount))) return kr;
    for (i = 0; i < iCount; ++i) {
        if ((kr = host_processor_set_priv(host_self, psets[i], &pset))) return kr;
        if ((kr = processor_set_tasks(pset, &tasks, &jCount))) return kr;
        for (j = 0; j < jCount; ++j) {
            if ((kr = pid_for_task(tasks[j], &pid))) return kr;
            if (pid != 0) {
                /* then the Mach task maps to a BSD process, so */ 
                ++process_accumulator;
                if ((kr = task_threads(tasks[j], &threads, &kCount))) return kr;
                thread_accumulator += kCount;
                for (k = 0; k < kCount; ++k) {
                    if ((kr = mach_port_deallocate(task_self, threads[k]))) return kr;
                }
                if ((kr = mach_vm_deallocate(task_self,
                                             (mach_vm_address_t)(uintptr_t)threads,
                                             kCount * sizeof(*threads)))) return kr;
            }
            if ((kr = mach_port_deallocate(task_self, tasks[j]))) return kr;
        }
        if ((kr = mach_vm_deallocate(task_self,
                                     (mach_vm_address_t)(uintptr_t)tasks,
                                     kCount * sizeof(*tasks)))) return kr;
        if ((kr = mach_port_deallocate(task_self, psets[j]))) return kr;
    }
    if ((kr = mach_vm_deallocate(task_self,
                                 (vm_address_t)psets,
                                 iCount * sizeof(*psets)))) return kr;
    *process_count = process_accumulator;
    *thread_count = thread_accumulator;
    return KERN_SUCCESS;
}

int main(int argc, char* argv[]) {
    long process_count, thread_count;
    kern_return_t r;
    if ((r = get_process_thread_count(&process_count, &thread_count))) {
        mach_error("get_process_thread_count error: ", r);
        return 1;
    };
    printf("%ld processes, %ld threads\n", process_count, thread_count);
    return 0;
}
```

获取有关系统上所有进程的信息需要提升权限，因此如果您需要以非特权用户的身份执行此操作，通过 NSTask 调用 top 或 ps 可能是更好的选择，因为它们已经是 setuid root。

最后说明：正如（懒惰地）编写的那样，此代码在失败时会泄漏内存和马赫端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:36:21.620

对于 Objective C，您可以使用[NSTask](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)进行系统调用`sysctl -aw`以获取类似

```
kern.maxproc = xxxx
kern.num_threads: xxxxx 
```

# iphone - 不可见的 UIButton 会影响渲染性能吗？

> ID：11962291
> 
> 赞同：0
> 
> 时间：2012-08-14T23:28:34.677
> 
> 标签：iphone, objective-c, ios

我有 UITableViewCells，我已经将所有可能的东西都绘制到了 contentview 中以提高性能，但是我还有一些按钮，我仍然需要与之交互。

我已经将按钮的图像绘制到内容视图中，并在它们上面放置了一些不可见的 uibuttons。即使您看不到按钮本身，它仍然会影响性能吗？我可以自己测试它，但这似乎是一个很方便的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:47:01.190

您可以通过选择 Debug - Color Blended Layers 在模拟器中进行检查。颜色越深，对绘图性能的影响越大。

# objective-c - 如何检索读/写磁盘信息？

> ID：11962296
> 
> 赞同：1
> 
> 时间：2012-08-14T23:29:45.683
> 
> 标签：objective-c, macos

如何检索磁盘的特定读/写速率？（可以在活动监视器中看到每秒写入的数据和每秒读取的数据）

注意我特别要求在 OS X 上使用 Objective-C/C 解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T00:35:45.377

您可以查看[XRG](https://github.com/mikepj/XRG)，它是 OSX 的活动监视器。整个磁盘统计信息采集器在`XRGDiskView.m`,`getDISKcounters`函数中。

总而言之，您可以使用以下代码获得硬盘列表：

```
#import <IOKit/IOKitLib.h>
#import <IOKit/storage/IOBlockStorageDriver.h>

io_iterator_t drivelist  = IO_OBJECT_NULL;
mach_port_t masterPort = IO_OBJECT_NULL;

/* get ports and services for drive stats */
/* Obtain the I/O Kit communication handle */
IOMasterPort(bootstrap_port, &masterPort);

/* Obtain the list of all drive objects */
IOServiceGetMatchingServices(masterPort, 
                             IOServiceMatching("IOBlockStorageDriver"), 
                             &drivelist); 
```

然后，您调用以下函数以从系统启动获取磁盘上的总读/写字节数：

```
void getDISKcounters(io_iterator_t drivelist, io_stats *i_dsk, io_stats *o_dsk)
{
    io_registry_entry_t drive       = 0;  /* needs release */
    UInt64          totalReadBytes  = 0;
    UInt64          totalWriteBytes = 0;

    while ((drive = IOIteratorNext(drivelist))) {
        CFNumberRef     number      = 0;  /* don't release */
        CFDictionaryRef properties  = 0;  /* needs release */
        CFDictionaryRef statistics  = 0;  /* don't release */
        UInt64      value       = 0;

        /* Obtain the properties for this drive object */

        IORegistryEntryCreateCFProperties(drive, (CFMutableDictionaryRef *) &properties, kCFAllocatorDefault, kNilOptions);

        /* Obtain the statistics from the drive properties */
        statistics = (CFDictionaryRef) CFDictionaryGetValue(properties, CFSTR(kIOBlockStorageDriverStatisticsKey));

        if (statistics) {
            /* Obtain the number of bytes read from the drive statistics */
            number = (CFNumberRef) CFDictionaryGetValue(statistics, CFSTR(kIOBlockStorageDriverStatisticsBytesReadKey));
            if (number) {
                CFNumberGetValue(number, kCFNumberSInt64Type, &value);
                totalReadBytes += value;
            }

            /* Obtain the number of bytes written from the drive statistics */
            number = (CFNumberRef) CFDictionaryGetValue (statistics, CFSTR(kIOBlockStorageDriverStatisticsBytesWrittenKey));
            if (number) {
                CFNumberGetValue(number, kCFNumberSInt64Type, &value);
                totalWriteBytes += value;
            }
        }
        /* Release resources */

        CFRelease(properties); properties = 0;
        IOObjectRelease(drive); drive = 0;

    }
    IOIteratorReset(drivelist);

    i_dsk->bytes = totalReadBytes;
    o_dsk->bytes = totalWriteBytes;
} 
```

然后，定期调用它：

```
io_stats i_dsk_t0;
io_stats o_dsk_t0;
getDISKcounters(drivelist, &i_dsk_t0, &o_dsk_t0);

// Wait 1s
io_stats i_dsk_t1;
io_stats o_dsk_t1;
getDISKcounters(drivelist, &i_dsk_t1, &o_dsk_t1); 
```

一旦你有了这个总读/写字节，你只需要在刷新的数据之间做一些增量。例如：

```
// t=0s
i_dsk_t0->bytes == 0 bytes

// t=1s
i_dsk_t1->bytes == 1000 bytes

delta = i_dsk_t1->bytes - i_dsk_t0->bytes
rate = delta/duration = delta/1s = 1000bytes/second 
```

这只是一个简短的未经测试的分析，但它应该可以按预期工作。

* * *

### 编辑

更清楚地说，我所说的“delta”只是两个值之间的差异。您需要一个费率，这意味着：

```
rate = bytes read/written by seconds

       bytes read/written for a period of N seconds
     = --------------------------------------------
                        N seconds 
```

现在，只需给您**自系统启动以来**`getDISKcounter`读/写字节的总量（或另一个绝对时间间隔，但您真的不在乎）。因此，要在有限的时间内获得读/写字节的数量，您需要计算两个绝对结果之间的差异：

 **```
B = total read/written bytes for N seconds = total read/written bytes since the system startup at time (X + N) -  total read/written bytes since the system startup at time X

rate = B / N 
```

那只是简单的数学，这里没有什么复杂的。**

# javascript - 当 td id 已知时，在 jquery 中设置 td 背景颜色

> ID：11962297
> 
> 赞同：1
> 
> 时间：2012-08-14T23:29:48.717
> 
> 标签：javascript, jquery, html, css

我有一个 jquery 函数，它获取选中复选框的 td 的 id 值。我需要给那些 td 上色。我写了这个函数，它没有给我任何错误，但也不给 td 着色..

这是功能：

```
$('#custom-interval-tbl td').each(function() {
 $(this).find('input:checkbox:checked').each(function() {      
    var tdId= $(this).attr("id");
    var tdElement = $("#custom-interval-tbl td").eq(tdId); 
    console.log("TD Element"+tdElement);        
    tdElement.css({background:"#333333"});
    });
}); 
```

有人可以告诉我我在做什么错吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:32:18.277

[jsFiddle 演示](http://jsfiddle.net/9LAwB/1/)

问题是您正在使用`.eq()`（它是基于索引的），但您给它的`id`是复选框。

附带说明，不要使用 :text / :checkbox / 等，这些在 jQuery 中已被弃用，最好使用 native`[type="checkbox"]`等。

```
$('#custom-interval-tbl td').each(function() {
    $(this).find('input[type="checkbox"]:checked').each(function() {
        // You don't need to find out ID or anything.
        // Just go up to the closest <td> and give it the background

        var tdElement = $(this).closest('td');     
        tdElement.css({ background : "#333333" });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:42:00.433

我认为这里的问题是`this`第二个函数内部是指`checkbox`，而不是`td`。试试这个：

```
$('#custom-interval-tbl td').each(function() {
 $(this).find('input:checkbox:checked').each(function() {      
    var tdElement = $(this).parent("td");
    console.log("TD Element"+tdElement);        
    tdElement.css({background:"#333333"});
    });
}); 
```

# jquery - $("#element") 和 $(document.getElementById("element")) 之间的区别？

> ID：11962300
> 
> 赞同：1
> 
> 时间：2012-08-14T23:30:27.383
> 
> 标签：jquery, live

我在 jQuery (v1.7) 中遇到了一些奇怪的行为：

我正在尝试将事件侦听器设置为实际上在某个时候通过 ajax 被替换的元素。

```
$(document.getElementById('element')).live('click', function() {
    // do something on click
}); 
```

虽然这适用于其他方法，但 live 方法拒绝运行。当用本机 jQuery 选择器替换它时，它可以工作。为什么？

```
$("#element").live('click', function() {
    // do something on click
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:33:45.900

`live`不能这样工作。事件冒泡到文档，然后`target`检查事件的 以查看它是否与选择器匹配。

当您绑定事件处理程序时，您正在侦听事件的元素可能不存在，因此`getElementById`不返回任何内容。

当您考虑它的语义时，`live`将 DOM 元素传递给它是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:34:33.340

document.getElementById 正在获取当前存在的元素。当你通过 live 传递一个字符串“#id”时，jQuery 会在 document.body 上寻找未来的事件，这些事件源自一个 ID 与该字符串匹配的元素。

作为旁注，请查看 .on() ，因为 .live() 不仅计算成本高，而且已弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:33:47.480

我相当肯定，在第一种情况下，您将一个简单的节点传递给 jQuery 构造函数，这意味着一旦该节点消失，该对象将不再引用任何内容，因此`live`无法工作。

另一方面，通过将 jQuery 选择器传递给它，`live`可以不断地查找具有该 ID 的元素，即使它被删除、重新添加或以其他方式踢出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T23:34:45.690

`.live()`过滤所有点击事件以查看哪些与您创建 jQuery 对象的**选择器匹配。**
它与 jQuery 对象中当前的元素无关。

写作`$(element).live()`不会做任何事情，因为没有选择器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T23:35:22.827

因为`live`会将实际事件附加到文档中，这称为委托。

然后，当点击发生时，jQuery 检查选​​择器中的元素是否是事件的来源，如果是，则调用您的函数。

虽然 $("#element") 可以查看是否有匹配选择器的元素，`$(document.getElementById("element));`但不能，因为没有选择器，只是一个对象，删除后丢失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T23:34:24.913

本机 JavaScript getElementById 为您提供实际的 DOM 对象，而 jquery 选择器为您提供围绕对象的 jquery 包装器。

我认为 .live 需要一个 jquery 包装器才能工作。

您也应该使用 .on 或 .delegate ，因为 .live 从 1.7 开始已被弃用

# css - 具有生成内容/伪元素的转换元素不遵守 z-index

> ID：11962301
> 
> 赞同：4
> 
> 时间：2012-08-14T23:30:27.977
> 
> 标签：css, z-index, pseudo-element, css-transforms

基本上，如果您查看[此](http://jsfiddle.net/edelman/c83gy/)内容，您会发现我有一个元素，该元素应用了一个已生成内容的转换。该`:after`元素应该出现在后面，`div`但事实并非如此。再多的`!important`-ing 也没有任何效果。

**我怎样才能让伪元素出现在后面`div`？**

我不在乎 IE 8 或更低版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T00:48:45.710

虽然这是奇怪的，而且通常是不受欢迎的行为，但它也是意料之中的。本质上，转换一个元素会创建一个新的堆叠上下文，在伪元素的情况下，这意味着它们不能再位于它们所基于的元素后面。

有关更多信息，请参阅本文：[https ://daneden.me/2012/04/22/css-transforms-and-z-index/](https://daneden.me/2012/04/22/css-transforms-and-z-index/)

目前，解决此问题的唯一方法是在父元素上创建新的堆叠上下文（即创建一个包装器元素并对其进行转换）。这是一个例子：http: [//jsfiddle.net/joshnh/GzWnb/](http://jsfiddle.net/joshnh/GzWnb/)

**HTML：**

```
<div class="wrapper">
    <div id="box"></div>
</div> 
```

**CSS：**

```
.wrapper {
    -moz-transform: rotate(10deg);
    -webkit-transform: rotate(10deg);
    transform: rotate(10deg);
}
#box{
    width: 200px; 
    height: 200px;
    left: 100px;
    top: 100px;

    background:blue; 
    position: absolute;
    &:after{
        content: "";
        width: 100px;
        background: orange;
        height: 100px;
        position: absolute;
        left: 120px;
        top: 120px;
        z-index: -2!important;
    }
} 
```

# c# - 全局低级键盘挂钩不会阻止 OEM 键

> ID：11962302
> 
> 赞同：0
> 
> 时间：2012-08-14T23:30:34.850
> 
> 标签：c#, .net, winapi, keyboard-hook

我编写了以下方法来防止所有键被按下：

```
private IntPtr HookHandler(int nCode, IntPtr wParam, ref KBDLLHOOKSTRUCT lParam)
{
    if (nCode >= 0)
    {
        ...

        //Return a nonzero value to prevent the system from passing the message to the
        //rest of the hook chain or the target window procedure.
        return (IntPtr)1;
    }

    return NativeMethods.CallNextHookEx(_hookID, nCode, wParam, ref lParam);
} 
```

但是，当上面的代码运行时，它允许使用我键盘的 calc 键或 email 键等键。

我调试，并且代码确实到达了该`return (IntPtr)1;`行（并且它确实正确显示了正在按下的键），但是到那时，计算窗口（或其他）已经打开。即使我返回 1，也为时已晚。

我可以在这里做些不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:00:15.370

嗯，这应该行得通。正常路由是从 WM_KEYDOWN 消息到默认窗口过程生成的 WM_APPCOMMAND 消息。WM_XBUTTONUP 是另一条路线，但不太可能。使用 Spy++ 查看是否有任何异常情况发生。

您也是另一个进程挂钩键的潜在受害者，该进程在您之前并且未正确调用 CallNextHookEx()。使用 TaskMgr.exe 的“进程”选项卡来解决这个问题并开始杀死进程。从任何闻起来像供应商提供的铲子的东西开始，特别是如果键盘的键不适合[WM_APPCOMMAND 命令集](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646275%28v=vs.85%29.aspx)，因此需要这样的程序来添加小玩意儿。

# php - 如何使用超出您的 PHP 版本的函数？

> ID：11962303
> 
> 赞同：-1
> 
> 时间：2012-08-14T23:30:35.247
> 
> 标签：php, linux, apache, mod-rewrite

我使用 Hostgator 的共享主机。我的 php 版本是 5.2.17，不包括**mod_rewrite**。有什么方法可以链接或使用 mod_rewrite 吗？这是更多信息：

**为什么需要 mod_rewrite？**
我想尝试一个名为“ [Open Source Classifieds](http://open-classifieds.com/) ”的开源分类系统，而 mod_rewrite 是安装依赖项之一。（*顺便说一下，我缺少的唯一依赖项*）。顺便说一句，如果您知道我可以使用任何替代的 opensoure 分类广告系统，请告诉我。

**你为什么不升级php？**
好吧，因为我做不到。我已经共享主机和技术支持确认这是不可能的。一种选择是升级到专用主机，这比我现在愿意支付的费用要高得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:32:58.960

PHP 从不包含`mod_rewrite`，因为它是 Apache 的一部分（更正确的是[Apache Webserver ）。](http://httpd.apache.org/)

因此，与其验证 PHP，不如联系您的托管服务商的支持人员，并询问您是否已经获得`.htaccess`并`mod_rewrite`可以使用您的托管计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:34:43.900

只有 Web 服务器管理员可以安装和启用 mod_rewrite。

要么你设法说服技术支持为你做这件事，要么你找到另一个不需要使用 mode_rewrite 的软件。

# c# - 静态/单例/类似的东西？

> ID：11962309
> 
> 赞同：0
> 
> 时间：2012-08-14T23:31:30.503
> 
> 标签：c#, sharepoint-2010

我在 OOP / 设计模式方面没有太多经验，下面是我的问题。

我想在解决方案中的所有 Visual Studio 项目中使用字符串变量的值。即，我在我的一个 C# 项目中创建了一个名为 strVar 的变量。并且所有其他项目都参考了它。

实际上我想要的是 - 必须计算字符串变量的值 - 一旦加载了 Dll（或第一次访问 Class.Variable），而不是每次访问该变量时。

[当第一次访问该类时-我希望计算并保留该值-贯穿 Dll / App 域的生命周期。]

即，字符串值在应用程序的每次安装中都会有所不同 - 并且不能使用 .config 文件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:39:32.667

```
public SomePubliclyVisibleClass
{
  private static _strVal = ComputedStrVal();//we could have a public field, but 
                                            //since there are some things that
                                            //we can do with a property that we
                                            //can't with a field and it's a breaking
                                            //change to change from one to the other
                                            //we'll have a private field and
                                            //expose it through a public property
  public static StrVal
  {
    get { return _strVal; }
  }
  private static string ComputedStrVal()
  {
    //code to calculate and return the value
    //goes here
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:38:04.630

考虑使用[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=VS.80%29.aspx)。

例如...

```
public class ImportantData
{
    public static string A_BIG_STRING;

    // This is your "static constructor"
    static ImportantData()
    {
        A_BIG_STRING = CalculateBigString();
    }

    private static string CalculateBigString()
    {
        return ...;
    }
} 
```

正如文档所说，除其他外，静态构造函数包含此属性：

> 在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:00:15.467

静态构造函数就是答案。一次初始化（当您第一次访问类时），正是您所需要的。在静态构造函数中进行初始化。

# python - 父进程停止后子进程仍然存在

> ID：11962310
> 
> 赞同：0
> 
> 时间：2012-08-14T23:31:34.577
> 
> 标签：python

我写了一个python守护进程。在我停止它之后，我在内存中看到它的子进程仍然存在并且有 pid=1 的父进程。在停止守护进程时我应该怎么做才能杀死这些子进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:08:10.853

如果您使用的是多处理库，则应在启动子进程之前将[daemon标志设置为 True。](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process.daemon)这将使它在父级退出时退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:36:32.933

我不知道等效的 python 调用，但在 C 中，接受的策略是在子 pid 上使用 WNOHANG 选项执行 waitpid/wait(3)。

父 id 设置为 1 => init 进程，因为父进程已经死亡并使子进程成为孤儿。

为此的c代码如下

```
#include <sys/wait.h>
/*
pid_t wait(int *stat_loc);
*/

void makeOrphanPidExit(pid_t pid)
{
   int stat_loc = 0;
   waitpid(pid, &stat_loc, WNOHANG);
} 
```

调用`makeOrphanPidExit(orphanPid)`将使子进程摆脱其孤立的恐惧！:)

等待文档（3） - [http://linux.die.net/man/3/wait](http://linux.die.net/man/3/wait)

更新：

根据[http://docs.python.org/release/3.1.5/library/os.html#os.waitpid ，等效的python调用是`os.waitpid(pid, os.WNOHANG)](http://docs.python.org/release/3.1.5/library/os.html#os.waitpid)

# c++ - 如何实例化没有默认构造函数的类型的 boost::fusion::vector 成员变量？

> ID：11962315
> 
> 赞同：1
> 
> 时间：2012-08-14T23:32:21.677
> 
> 标签：c++, templates, boost, boost-mpl, boost-fusion

我正在学习 boost::mpl 并且我有以下课程-

```
#include <string>

#include <boost/mpl/vector.hpp>
#include <boost/mpl/size.hpp>
#include <boost/mpl/at.hpp>

#include <boost/fusion/include/mpl.hpp>
#include <boost/fusion/container.hpp>

using namespace boost;
using namespace std;

template< typename T > 
class Demo
{
public:
    typedef boost::mpl::size<T> NumDimensions;

    template< size_t D >
    struct Dim
    {
        typedef typename boost::mpl::at_c< T, D >::type Type;
    };

    template< size_t D >
    typename Dim<D>::Type& GetElement()
    {
        return fusion::at_c<D>(elements_);
    }

private:
    typename fusion::result_of::as_vector< T >::type elements_;
}; 
```

这很好用，只要我使用带有默认构造函数（或默认类型）的类型

```
int main(int argc, char *argv[])
{
    typedef Demo< boost::mpl::vector< int, std::string > > D1;
    D1 d;
    D1::Dim<0>::Type &i = d.GetElement<0>();

    i = "Hello World!";

    cout << " " << i << endl;
} 
```

但是，如果我使用没有默认构造函数的类型，则会引发编译器错误，因为向量初始化失败。有没有一种标准方法来正确初始化成员（在构造函数中）而不诉诸指针/引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:28:21.847

您可以使用`fusion::vector`的构造函数：

```
#include <string>

#include <boost/mpl/vector.hpp>
#include <boost/mpl/size.hpp>
#include <boost/mpl/at.hpp>

#include <boost/fusion/include/mpl.hpp>
#include <boost/fusion/container/vector.hpp>
#include <utility>

struct foo {
    explicit foo(int){}
};

template< typename T > 
class Demo
{
public:
    //You don't need to use variadic templates and perfect forwarding
    //but you may need to emulate them to get this effect (depending on
    //where exactly you need to construct Demo).
    //Another alternative would be to pass in a fusion::vector, and
    //copy construct `elements` with that vector.
    template<typename ...Args>
    Demo(Args&& ...args) : elements_(std::forward<Args>(args)...) {}

    typedef boost::mpl::size<T> NumDimensions;

    template< size_t D >
    struct Dim
    {
        typedef typename boost::mpl::at_c< T, D >::type Type;
    };

    template< size_t D >
    typename Dim<D>::Type& GetElement()
    {
        return boost::fusion::at_c<D>(elements_);
    }

private:
    typename boost::fusion::result_of::as_vector< T >::type elements_;
};

int main() {
    Demo<boost::mpl::vector< foo, std::string > > a(foo(10),"hi");
} 
```

# asp.net - ASP.NET 剑道 UI 上传

> ID：11962316
> 
> 赞同：7
> 
> 时间：2012-08-14T23:32:48.007
> 
> 标签：asp.net, upload, kendo-ui

我想使用 Kendo UI 开发一个网站。我可以使用`kendo-ui`. 但是，我不能通过 ASP.NET 使用文件上传。是否有任何示例代码或文档来克服这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-18T12:42:50.173

这就是它对我有用的原因：

js：

```
$(document).ready(function () {
    $(".attachmentUpload").kendoUpload({
        async: {
            saveUrl: "SaveAttachment.aspx",
            autoUpload: true
        }
    });
}); 
```

页：

```
<input name="attachmentUpload" id="attachmentUpload" type="file" class="attachmentUpload" /> 
```

保存附件.aspx.cs

```
public partial class SaveAttachment : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Response.Expires = -1;
        try
        {
            HttpPostedFile postedFile = Request.Files["attachmentUpload"];
            //do something with your postedfile
            Response.ContentType = "application/json";
            Response.Write("{}");
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());

        }
    }
} 
```

保存附件.aspx：

```
<%@ Page Language="C#" CodeBehind="SaveAttachment.aspx.cs" Inherits="Nstar.WebUI.Pages.SaveAttachment" EnableTheming="false" StyleSheetTheme="" Theme="" %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T00:13:46.220

它通过使用类似于您的方法的方法起作用。我创建了一个 upload.aspx 网络表单并通过以下方式调用它：

```
 $("#userImage").kendoUpload({
                async: {
                    saveUrl: "upload.aspx"
                }
            }); 
```

我在upload.aspx 的aspx.cs 文件中有这段代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

public partial class upload : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ProcessRequest();
    }
    public void ProcessRequest()
    {
        Response.Expires = -1;
        try
        {
            var db = new mypicksDBDataContext();
            HttpPostedFile postedFile = Request.Files["photos"];
            string savepath = Server.MapPath("userFolders/images/");
            string filename = postedFile.FileName;
            if (!Directory.Exists(savepath))
                Directory.CreateDirectory(savepath);
            postedFile.SaveAs(savepath + filename);
            Response.Write("upload");
        }
        catch (Exception ex)
        {
            Response.Write (ex.ToString());

        }
    }
} 
```

它炒得很好。它上传文件，但有一个新问题。如何将结果返回给 kendoui。它会上传，但总是显示错误并重试按钮。在 Kendo-ui 的文档中，它说重新调整空字符串以成功上传。我试过 Response.Write(""); 但它没有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T15:57:04.627

@sanalism 的回答很好，但是上传控件会显示一个错误和一个重试按钮。为避免这种情况，您需要发送 json 回复：

```
Response.ContentType = "application/json";
Response.Write("{}"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-04T12:45:32.593

`Response.Write("{}");`将在upload.aspx 中发送整个标签。发送到 Kendo UI 上传的结果无法解析为 json 格式。

因此，您必须删除`<% Page...%>`upload.aspx中的所有标签

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-03T07:52:05.703

这是带有 HTTP 处理程序的示例：

```
<form id="form1" runat="server">
    <input type="file" name="files" id="photos" />
    <script type="text/javascript">
        $("#photos").kendoUpload({
            async: {
               saveUrl: "UploadHandler.ashx"
            }
        });
    </script>
</form> 
```

使用系统；使用 System.Web；

公共类 UploadHandler ： IHttpHandler {

```
public void ProcessRequest(HttpContext context)
{
    try
    {
        HttpFileCollection files = context.Request.Files;
        HttpPostedFile file = files[0];
        int filelength = file.ContentLength;
        byte[] input = new byte[filelength ];
        file.InputStream.Read(input, 0, filelength );

        file.SaveAs(string.Format("C:\\Uploads\\{0}", file.FileName));
    }
    catch (Exception e)
    {
        context.Response.Write("{'error':'" + e.Message + "'}");
    }

    context.Response.Write("");
}

public bool IsReusable
{
    get
    {
        return false;
    }
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T23:20:03.097

配置 async.saveUrl 属性以设置接受 POST 请求的处理程序。然后使用多部分表单数据解析器（例如[来自 codeplex 的这个](http://multipartparser.codeplex.com/)）来解析剑道上传发送的数据。此外，配置您的服务以接受表单数据：[检查此帖子](https://stackoverflow.com/questions/1354749/wcf-service-to-accept-a-post-encoded-multipart-form-data)

让我知道事情的后续！

# actionscript-3 - 动作脚本 3 错误 1130

> ID：11962323
> 
> 赞同：1
> 
> 时间：2012-08-14T23:33:24.947
> 
> 标签：actionscript-3, flash-cs6

文件：“point_direction.as”

```
    包裹 {   
        公共类 point_direction {

            var radianAngle：数字；
            var degreeAngle：数字；

            公共函数 point_direction(x1:Number, y1:Number, x2:Number, y2:Number) : Number {
                radianAngle = Math.atan2(y1 - y2, x1 - x2);
                度角 = 弧度角 * 180 / Math.PI();

                返回度角；
            }
        }
    }

```

以上是我无法修复的文件。我希望文件在完成后返回最终计算的角度（以度为单位），但它会引发此错误。

> 第 7 行，第 1130 行：构造函数不能指定返回类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:48:15.170

你应该在这里小心。类构造函数方法不应返回值，因为它实际上是在返回自身。这解释了为什么您收到该错误消息。

所以选择一个不同的函数名看下面的例子

```
Public function calculate_point_dirction(x1:Number, ...):Number
{
 // do staff
 Return degreeAngle;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:48:29.577

您的错误符合预期。构造函数是类的创建方法，因此它返回该类的实例——添加除 void 之外的任何类型的返回类型都会引发该错误。

看起来你可能想让它成为一个静态函数？如果是这样，这就是你的包的样子（假设它所做的只是这个函数）：

```
package {   
    public class point_direction {

        public static function pointDirection(x1:Number, y1:Number, x2:Number, y2:Number):Number {
            var radianAngle = Math.atan2(y1 - y2, x1 - x2);
            var degreeAngle = radianAngle * 180 / Math.PI();

            return degreeAngle;
        }
    }
} 
```

你可以通过调用来访问它`point_direction.pointDirection(x1,y1,x2,y2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:08:32.990

如果你想要一个类的实例`point_direction`来表示`degreeAngle`，你可以这样做：

```
package
{
    public class point_direction
    {

        private var _radianAngle:Number;
        private var _degreeAngle:Number;

        public function point_direction(x1:Number, y1:Number, x2:Number, y2:Number)
        {
            _radianAngle = Math.atan2(y1 - y2, x1 - x2);
            _degreeAngle = radianAngle * 180 / Math.PI();
        }

        public function get degreeAngle():Number
        {
            return _degreeAngle;
        }
    }
} 
```

请注意，构造函数不返回任何内容（因为构造函数不能这样做）。

您将改为这样做：

```
var dir:point_direction = new point_direction(0, 1, 2, 3);
trace(dir.degreeAngle); 
```

# wordpress - 404错误，但页面加载正常？

> ID：11962325
> 
> 赞同：0
> 
> 时间：2012-08-14T23:33:31.453
> 
> 标签：wordpress

我正在尝试在[http://gtmetrix.com/](http://gtmetrix.com/)上测试我的移动网站（wordpress），但它告诉我有 404 错误。该页面在我尝试过的所有内容上对我来说都很好，而其他网站在 GTMetrix 中对我来说也很好。我不确定该怎么做才能尝试解决错误。

[http://textandmobilemarketing.mobi/home-2/](http://textandmobilemarketing.mobi/home-2/)

htaccess 的副本：

```
# -FrontPage-
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*
<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName textandmobilemarketing.mobi
AuthUserFile /home/textand2/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/textand2/public_html/_vti_pvt/service.grp

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

任何帮助表示赞赏，

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:20:00.933

安装 **了 WP-DBManager**插件，'Repaired DB' 一切恢复正常:)

# c# - 当实例 ID 未知时，在非静态成员函数上正确使用委托

> ID：11962328
> 
> 赞同：0
> 
> 时间：2012-08-14T23:33:55.243
> 
> 标签：c#, delegates

我正在尝试以我在我的各种书籍中从未见过的方式使用委托。

我的问题是：

**是否可以以这种方式使用代表？** 和

**如果是这样，我应该如何更改代码以使用委托？**

具体来说，我希望一个函数从两个可能的函数中调用另一个函数。

```
class Profile
{
   private List<verticalCurve> allVCs;
   // create allVCs in the constructor

   private double nonTrivialFunctionToFindTheRightVCin_allVCs
                      (double lengthAlong, getSwitchForProfile aDel)
   { // about thirty lines of code which I want to reuse }

   public double getElevation(double distanceAlongPfl)
   {
         // compiler error on the following line:
      getSwitchForProfile myDelEL = 
            new verticalCurve.getSwitchForProfile(verticalCurve.getElevation);

      return nonTrivialFunctionToFindTheRightVCin_allVCs
                 (distanceAlongPfl, myDelEL);
   }

   public double getSlope(double distanceAlongPfl)
   {
         // compiler error on the following line:
      getSwitchForProfile myDelSL = 
            new verticalCurve.getSwitchForProfile(verticalCurve.getSlope);

      return nonTrivialFunctionToFindTheRightVCin_allVCs
                 (distanceAlongPfl, myDelSL);
   }

}  // end class Profile

class verticalCurve
{
   private double elevation;
   private double slope;

   static internal delegate double getSwitchForProfiles(double distanceAlongPfl);

   public double getElevation(double distanceAlong)
   { computeElevation then return elevation; }

   public slope getSlope(double distanceAlong)
   { compute slope then return slope;}
}  // end class verticalCurve 
```

编译器错误状态

非静态字段、方法或属性“Profile.verticalCurve.getElevation(distanceAlong)”需要对象引用

看来我的问题是，在我为委托分配一个方法时，我还不知道它将在哪个垂直曲线实例上被调用。但我不能将verticalCurve.getElevation设为静态，因为它必须知道它在哪个verticalCurve上。

很抱歉对问题进行了长时间的设置。我确实尝试过简化它，但超出这一点似乎无法简化。

在此先感谢您的帮助。

*   保罗·施鲁姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:37:15.690

听起来您想创建一个委托，该委托将对象作为参数调用它：

```
delegate double DistanceFunction(VerticalCurve curve, double distance);

void SomeFunction(DistanceFunction func) {
    double result = func(someCurve, 42);
}

SomeFunction((c, dist) => c.GetSlope(dist)); 
```

# javascript - 使用 JavaScript 将矩形打包成多边形

> ID：11962332
> 
> 赞同：6
> 
> 时间：2012-08-14T23:34:10.687
> 
> 标签：javascript, polygon, packing, rectangles

我需要将 n 个不同大小的矩形（n<10）打包成一个简单的多边形。我知道两种可能的解决方案：

*   将矩形打包成一个矩形。那么问题就变成了在多边形中找到一个相当大的矩形。它不需要是最大的矩形，但它应该足够大，可以很好地近似多边形，以包装那些小矩形。有什么算法可以做到这一点吗？

*   使用约束求解器。我知道的唯一 JavaScript 约束求解器是[Cassowary](https://github.com/slightlyoff/cassowary-js-refactor)。然而，它是一个线性的，在我看来，将一个点约束在一个简单的多边形内并不是一个线性约束。

有任何想法吗？

# python - 使用python类方法

> ID：11962342
> 
> 赞同：0
> 
> 时间：2012-08-14T23:34:59.473
> 
> 标签：python, oop, class, methods

我有一个最初作为一个长函数留下的脚本。

```
#! /usr/bin/env python
import mechanize
from BeautifulSoup import BeautifulSoup
import sys
import sqlite3

def dictionary(word):
    br = mechanize.Browser()
    response = br.open('http://www.dictionary.reference.com')
    br.select_form(nr=0)
    br.form['q'] = word 
    br.submit()
    definition = BeautifulSoup(br.response().read())
    trans = definition.findAll('td',{'class':'td3n2'})
    fin = [i.text for i in trans]
    query = {}
    word_count = 1
    def_count = 1
    for i in fin: 
        query[fin.index(i)] = i
    con = sqlite3.connect('/home/oberon/vocab_database/vocab.db')
    with con:
        spot = con.cursor()
        spot.execute("SELECT * FROM Words")
        rows = spot.fetchall()
        for row in rows:
            word_count += 1
        spot.execute("INSERT INTO Words VALUES(?,?)", (word_count,word))
        spot.execute("SELECT * FROM Definitions")
        rows = spot.fetchall()
        for row in rows:
            def_count += 1
        for q in query:
            spot.execute("INSERT INTO Definitions VALUES(?,?,?)", (def_count,query[q],word_count))
            def_count += 1
    return query

print dictionary(sys.argv[1]) 
```

现在，我想通过创建一个类来练习 OOP 形式。我认为最好也将其分成至少几个函数。

我想出了：

```
#! /usr/bin/env python
import mechanize
from BeautifulSoup import BeautifulSoup
import sys
import sqlite3

class Vocab:
    def __init__(self):
        self.word_count = 1
        self.word = sys.argv[1] 
        self.def_count = 1
        self.query = {}

    def dictionary(self,word):
        self.br = mechanize.Browser()
        self.response = self.br.open('http://www.dictionary.reference.com')
        self.br.select_form(nr=0)
        self.br.form['q'] = word 
        self.br.submit()
        self.definition = BeautifulSoup(self.br.response().read())
        self.trans = self.definition.findAll('td',{'class':'td3n2'})
        self.fin = [i.text for i in self.trans]
        for i in self.fin: 
            self.query[self.fin.index(i)] = i
        return self.query

    def word_database(self):
        self.con = sqlite3.connect('/home/oberon/vocab_database/vocab.db')
        with self.con:
            self.spot = self.con.cursor()
            self.spot.execute("SELECT * FROM Words")
            self.rows = self.spot.fetchall()
            for row in self.rows:
                self.word_count += 1
            self.spot.execute("INSERT INTO Words VALUES(?,?)", (self.word_count,self.word))
            self.spot.execute("SELECT * FROM Definitions")
            self.rows = self.spot.fetchall()
            for row in self.rows:
                self.def_count += 1
            for q in self.query:
                self.spot.execute("INSERT INTO Definitions VALUES(?,?,?)", (self.def_count,self.query[q],self.word_count))
                self.def_count += 1

Vocab().dictionary(sys.argv[1]) 
```

我知道在我调用**Vocab().dictionary(sys.argv[1])**的最后一行时，这只会运行**字典**方法。我试图弄清楚每次我仍然运行脚本时如何调用**word_database**方法。

这是错误的方法吗？我应该把这些方法作为一种大方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:39:06.133

在我看来，它作为一个脚本很好。唯一真正的问题是你为什么这样做

```
for row in rows:
        word_count += 1 
```

代替

```
word_count += len(rows) 
```

至于你的问题，你打电话给 word_database 做

```
self.word_database() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:41:19.797

我不确定它作为一个类有什么好处，但是如果你想调用一个实例的多个方法，你需要为实例分配一个名称。

```
vocab = Vocab()
vocab.dictionary(...)
vocab.word_database(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:42:04.253

您只需要在原始脚本中的同一点调用 word_database 即可。

```
def dictionary(self,word):
    self.br = mechanize.Browser()
    self.response = self.br.open('http://www.dictionary.reference.com')
    self.br.select_form(nr=0)
    self.br.form['q'] = word 
    self.br.submit()
    self.definition = BeautifulSoup(self.br.response().read())
    self.trans = self.definition.findAll('td',{'class':'td3n2'})
    self.fin = [i.text for i in self.trans]
    for i in self.fin: 
        self.query[self.fin.index(i)] = i

    # Continue the script...
    self.word_database()

    return self.query 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T23:44:16.157

有几件事：

首先，您不需要将所有变量都设为 self.var_name ，因为您将它们包装在一个类中。如果函数调用完成后不需要该变量，只需使用局部变量即可。

其次，每次 Vocab 使用字典时都会调用 word_database，将 self.word_database() 添加到您的 init 函数`__init__(self, word)`中。这将确保这些功能始终可用。

第三，如果您只是要将对象视为脚本并执行 Vocab().dictionary(word)，则最好不要使用类结构。如果您打算使用 Vocab() 计算一些工作，然后增量地做其他工作（重复调用字典），那么保持类结构。但是你目前使用它的方式就像一个函数调用。（如果您保留函数调用语义，您至少应该将原始函数分解为更小的部分）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T23:46:44.910

我建议首先重构而不是面向对象。上课不会有任何收获。只需定义您的两种方法，最后：

```
dictionary(sys.argv[1)
word_database() 
```

# javascript - 向下滚动事件

> ID：11962343
> 
> 赞同：2
> 
> 时间：2012-08-14T23:35:02.730
> 
> 标签：javascript, jquery

我想使用一些无限滚动来摆脱我网站上的分页。但是，我发现的这个滚动功能似乎有些怪癖。向上滚动时它似乎会触发，例如。有没有办法只在向下滚动时触发滚动事件？此外，如果没有滚动条，它似乎根本不会触发，就像它正在跟踪页面的移动一样，而不是按下鼠标滚轮、箭头或空格键。有什么好的滚动检测功能吗？

```
$(window).scroll(function () {

    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {

        //infinite scrolling is the idea

    }

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:44:38.950

你要找的公式是这个

```
document.body.scrollTop >= (document.body.scrollHeight - window.innerHeight - 50) 
```

这假设您的`body`元素实际上没有设置`height`，并且它`overflow`没有设置为`hidden`or `scroll`。

只要您在 50 像素阈值内，这也适用于向上滚动。但是，您可以保存先前的滚动偏移量，并且仅在它增加时才执行某些操作。

```
var lastScrollTop = 0;
$(window).scroll(function(e) {
    var body = $("body")[0],
        scrollTop = body.scrollTop;

    if (scrollTop > lastScrollTop) {
        if (scrollTop >= (body.scrollHeight - window.innerHeight - 50)) {
            // do something
        }
    }
     lastScrollTop = scrollTop;
}); 
```

# objective-c - 我已经设置了两个 UIGestureRecognizers，但只有右侧滑动有效——而不是左侧

> ID：11962346
> 
> 赞同：0
> 
> 时间：2012-08-14T23:35:28.490
> 
> 标签：objective-c, xcode, ios5, swipe

Noob 正在开发一个应用程序，该应用程序显示从数组中随机选择的短文本——用户每次滑动时都会显示一个新文本。我使用的是“上一个”和“下一个”按钮，效果很好。然后我添加了滑动，向右滑动（从左侧）产生“上一个”，向左滑动（从右）产生“下一个”，但在这两种情况下，动画都是从右到左的滑动。然后我完全摆脱了按钮，左右滑动都产生了“下一个”——没有办法得到“上一个”——再次只有从右到左的滑动动画。

以下是来自的相关代码`viewDidLoad`：

```
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(nextHaiku)];
swipeRight.numberOfTouchesRequired = 1;
swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
[self.view addGestureRecognizer:swipeRight];
UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(nextHaiku)];
swipeLeft.numberOfTouchesRequired = 1;
swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeLeft]; 
```

这是“下一个”方法中的相关代码。

```
-(void)nextHaiku
{
<...a bunch of code setting up the UItextView 'haiku_text'...>

CATransition *transitionR = [CATransition animation];
transitionR.duration = 0.25;
transitionR.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transitionR.type = kCATransitionPush;
transitionR.subtype =kCATransitionFromRight;
transitionR.delegate = self;
[self.view.layer addAnimation:transitionR forKey:nil];
[self.view addSubview:self.haiku_text];
} 
```

同样，这里是“以前的”方法。

```
-(void)previousHaiku
{
<...a bunch of code setting up the UITextView haiku_text...>
        CATransition *transition = [CATransition animation];
        transition.duration = 0.25;
        transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        transition.type = kCATransitionPush;
        transition.subtype =kCATransitionFromRight;
        transition.delegate = self;
        [self.view.layer addAnimation:transition forKey:nil];
        [self.view addSubview:self.haiku_text]; 
```

在这里，只是为了彻底，是我的连接图片：

![我的人脉](../Images/20c7739a0d12bc2cde159da33f8458a3.png)

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:51:27.033

在初始化时，`viewDidLoad`您对两个识别器使用相同的选择器。`nextHaiky`这会覆盖您在 IB 中所做的绑定

更改适当的`UISwipeGestureRecognizer`init 以解决问题

# sql - 带有 CASE、GROUP BY 和 HAVING 的 SQL UPDATE

> ID：11962347
> 
> 赞同：3
> 
> 时间：2012-08-14T23:35:57.913
> 
> 标签：sql, sql-server

下面的 SELECT 语句返回正确的数据。

```
SELECT stu.sc, stu.sn, COUNT(*) AS Total,
    CASE
      WHEN COUNT(*) = 3 Then 'Letter 1'
      WHEN COUNT(*) = 4 Then 'Letter 2'
      WHEN COUNT(*) = 5 Then 'Letter 3'
      ELSE 'SARB'
    END AS Letter  
FROM STU  join att ON (stu.SC = att.SC and stu.SN = att.SN)
WHERE att.al in ('c','t','u')
GROUP by stu.sc, stu.sn
HAVING COUNT(*) >= 3 
```

我需要根据该查询执行更新，但我似乎无法弄清楚。我在网上查看了多个与我需要的示例相似的示例，但我无法使其正常工作。我需要能够做这样的事情......

```
UPDATE stu
SET stu.tru = 
   CASE
     When COUNT(*) = 3 Then 'Letter 1'
     When COUNT(*) = 4 Then 'Letter 2'
     When COUNT(*) = 5 Then 'Letter 3'
     ELSE 'SARB'
   END  
FROM stu  JOIN att
   on (stu.sc = att.sc and stu.sn = att.sn)
WHERE ATT.AL in ('c','t','u')
GROUP BY stu.sc, stu.sn
HAVING COUNT(*) >= 3 
```

我知道我不能直接在 Update 语句中使用 Group By 和 Have，但是我已经看到了他们在 Set 和 Join 之前使用 Select with Group By 的示例。我就是不能让它工作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:39:33.917

```
UPDATE stu
SET tru = sub.letter
FROM
    stu JOIN (
    SELECT stu.sc, stu.sn,
        CASE
          WHEN COUNT(*) = 3 THEN 'Letter 1'
          WHEN COUNT(*) = 4 THEN 'Letter 2'
          WHEN COUNT(*) = 5 THEN 'Letter 3'
          ELSE 'SARB'
        END AS Letter  
    FROM STU 
    JOIN att ON (stu.SC = att.SC AND stu.SN = att.SN)
    WHERE att.al in ('c','t','u')
    GROUP by stu.sc, stu.sn
    HAVING COUNT(*) >= 3
) sub ON stu.sc = sub.sc AND stu.sn = sub.sn 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T23:40:54.117

```
WITH CTE AS (
  SELECT stu.sc, stu.sn, COUNT(*) AS Total,
      CASE
        WHEN COUNT(*) = 3 Then 'Letter 1'
        WHEN COUNT(*) = 4 Then 'Letter 2'
        WHEN COUNT(*) = 5 Then 'Letter 3'
        ELSE 'SARB'
      END AS Letter  
  FROM STU  join att ON (stu.SC = att.SC and stu.SN = att.SN)
  WHERE att.al in ('c','t','u')
  GROUP by stu.sc, stu.sn
  HAVING COUNT(*) >= 3
)
UPDATE stu
SET stu.tru = cte.Letter
FROM stu  JOIN cte
   on (stu.sc = cte.sc and stu.sn = cte.sn) 
```

# linux - Perl，如何使用管道将多个文件分类到同一个文件处理程序中？

> ID：11962353
> 
> 赞同：1
> 
> 时间：2012-08-14T23:36:17.787
> 
> 标签：linux, perl, filehandler

我一直在尝试将多个文件分配给一个文件句柄。然后从那里处理整个文件句柄以查找特定模式，然后将其写入 FIN_RESULTS。

Linux
exp 文件
my/dir1/RESULTS
my/dir2/RESULTS
等。

这是我一次尴尬的尝试

```
 open (FIN_RESULTS, ">", "FIN_RESULTS.txt") or die $!;

   open(RESULTS, "-|"," find my/ -name RESULTS -print0 | xargs -0 cat");
   while(<RESULTS>){
        if(/match_something/){
           do some commands;
           print FIN_RESULTS $_;
         }
close FIN_RESULTS;
close RESULTS; 
```

但我最终只是用当前目录的 ls 覆盖了 perl 脚本本身。

谢谢您的帮助！！！！！我能够实现我最初的想法。

我有第二个问题，是否可以通过仅查看某些目录的方式实现查找？比如我有
my/abc_dir1/RESULTS
my/dsa_dir2/RESULTS
my/afx_dir3/RESULTS

但我只想搜索 dir2 和 dir3。

```
@array1 = qw( dir2 dir3);

foreach $array1(@array1)
{ open(RESULTS, "-|"," find my/*$array1 -name RESULTS -print0 | xargs -0 cat");
} 
```

但我收到此错误，xargs: cat: 由信号 13 终止。因此不允许多次重新打开文件句柄。关于我能做什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T00:03:37.933

假设你真的想做外部查找：

```
open RESULTS, "-|", "find my -name RESULTS -print0 | xargs -0 cat" 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T18:08:04.497

`open`Perl中的函数有两种格式：

两个参数调用：

```
open (RESULTS, "|find my/ -name 'RESULTS'") 
```

两个参数调用很简单，但如果您碰巧有一个以垂直管道开头的文件名，您就会遇到问题。

另一种是首选的三参数语法：

```
open (RESULTS, "-|", "find my/ -name 'RESULTS'") 
```

此语法使用第二个参数来说明您正在执行的打开类型：

```
">" -  Write
">>" - Append
"<"  - Read
"-|" - Read from command
"|-" - Write to command 
```

看来你把这两个弄混了。

* * *

只是一个说明：

您可以使用[File::Find](http://perldoc.perl.org/File/Find.html)模块来代替 Perl 进行*查找。*

它更有效，因为您没有启动单独的进程并且更独立于操作系统，因为它在 Windows 或 Linux 上以相同的方式工作。

# c# - 如何从 SharePoint 计时器作业报告状态

> ID：11962359
> 
> 赞同：5
> 
> 时间：2012-08-14T23:37:04.317
> 
> 标签：c#, sharepoint, exception, timer-jobs

我有一个 SharePoint 计时器作业，它需要配置列表存在于网站集中的特定位置。如果该列表不存在，我想向用户表明这一点，以便他们可以创建（当然填充）所述列表并[重新运行作业](https://stackoverflow.com/questions/1503064/how-to-show-failed-status-in-sharepoint-timer-job?rq=1)。

我可以使用下面的代码写入事件日志，并且我知道我可以抛出异常以指示失败的作业状态，但我想要做的是抛出异常并显示一条消息，该消息以一种不需要查看 ULS 或访问事件日志。到目前为止我发现的帖子都[像这个](https://stackoverflow.com/questions/4666101/returning-timer-job-status-from-custom-timer-job)，而[这个](http://www.simple-talk.com/blogs/2012/03/05/showing-failed-for-a-sharepoint-2010-timer-job-status/)没有太多细节。

所以有两个问题：1）有没有办法为计时器作业异常提供失败消息？2) 有没有比 Exception() 更好的抛出选择？

缺少网站集时使用的事件日志记录

```
SPDiagnosticsService.Local.WriteEvent(0,  
    new SPDiagnosticsCategory("MyCategory",   
        TraceSeverity.Unexpected, 
        EventSeverity.ErrorCritical), 
    EventSeverity.ErrorCritical, 
    "Assert failed: if (!spweb.Exists)" + sp.Url, 
    sp.ToString()); 
```

我想对丢失的配置列表做什么

```
bool configListExists = ListExists(spweb, ConfigListName);  
if (! configListExists)  
{   
    ReportMissingConfigList();  
    throw new Exception("Configuration list not found");  
}  

public static bool ListExists(SPWeb web, string listName)
{
    return web.Lists.Cast<SPList>().Any(list => string.Equals(list.Title, listName));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:36:41.667

我建议在配置列表旁边有一个单独的日志列表。在此列表中，您可以在需要时写下作业的状态，然后用户可以在此列表上设置通知，以便他们采取适当的措施。

# php - 在php中设置cookie

> ID：11962366
> 
> 赞同：0
> 
> 时间：2012-08-14T23:38:12.977
> 
> 标签：php, cookies

我正在尝试设置 cookie，但它没有被设置。

```
$hp = explode('=', $hp);
$shp = $hp[0];

echo $hp_id=$hp[1];

if(empty($_cookie['betahomepage1'])) {
    setcookie('betahomepage1',$hp_id,$expire,"/");
    echo "cookie not set";   
} else {
    echo "cookie is set";   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:44:46.253

If you run into a problem with a PHP function, double check all parameters and re-read the PHP manual about them.

The function in question is:

*   [`setcookie`](http://de.php.net/setcookie)

You wrote:

```
setcookie('betahomepage1', $hp_id, $expire , "/"   , "https://www.mtsbeta.com");
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
          $name          , $value, $expire , $path , $domain 
```

The domain parameter *is not* a HTTP URI. It is just the Domain:

> **domain**
> The domain that the cookie is available to. Setting the domain to `'www.example.com'` will make the cookie available in the www subdomain and higher subdomains. Cookies available to a lower domain, such as 'example.com' will be available to higher subdomains, such as `'www.example.com'`. Older browsers still implementing the deprecated [» RFC 2109](http://www.faqs.org/rfcs/rfc2109) may require a leading . to match all subdomains.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:20:17.083

PHP 中包含所有 cookie 的预定义变量被调用`$_COOKIE`（注意大写），[请参阅手册中的页面](http://www.php.net/manual/en/reserved.variables.cookies.php)。

[由于 PHP 中的变量区分大小写](http://nl.php.net/manual/en/language.variables.basics.php)，因此`$_cookie`您要比较的变量将是`NULL`，除非在其他地方明确设置。

因此，您的 cookie 正在设置中，但您没有正确检索它。

此外，调试 cookie 的一个好方法是使用[FireBug](https://getfirebug.com/)（或 Chrome 开发者工具）；他们可以在浏览器中向您显示所有活动的 cookie。

如果您想确保在调试期间在 PHP 中设置了 cookie，您可以选择 a `var_dump($_COOKIE)`，它将明确告诉您为当前请求设置了哪些 cookie。

# c++ - 在 C++.NET 中使用 OpenGL 并在视口上绘画

> ID：11962368
> 
> 赞同：1
> 
> 时间：2012-08-14T23:38:22.220
> 
> 标签：c++, .net, winforms, opengl

我正在尝试创建一个使用 OpenGL 的 .NET 应用程序。我需要有 4 个视口，但不是创建 4 个控件并同步它们，而是将 1 个控件拆分为 4 个视口。我想在 OpenGL 控件上绘制线条以直观地分割视口。我正在使用自定义控件，为了实现这一点，我在基本 UserControl 顶部有两个面板。中间的 Panel 是 OpenGL 面板，这里渲染了 OpenGL 的输出。顶部的面板是我要绘制视口分隔线的地方，它具有透明度，因此我可以看到它下方的面板。

问题是，当 OpenGL 视口加载时（它在一个单独的线程中，所以它只是黑了几秒钟），它覆盖了整个 UserControl，不管它的 z 层。如果我缩小 OpenGL 面板，我可以看到它仍然只在面板上绘制，但它并不关心它上面的内容——它只是将其覆盖。

为什么会这样？如果您想了解我是如何创建 OpenGL 上下文等的，[您可以查看我遵循的教程](http://www.codeproject.com/Articles/16051/Creating-an-OpenGL-view-on-a-Windows-Form)。我正在传递面板的句柄，而不是用户控件的句柄。cusstrom 控件中的所有控件是否共享相同的设备上下文或其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:06:38.557

使用 和 的组合`glViewport`启用`glScissor`GL_SCISSOR_TEST 将您的窗口拆分为视口。使用 OpenGL 本身来绘制视口拆分器。您可以随时更改使用的投影。因此，对于拆分器，使视口覆盖整个窗口，绘制拆分器，然后将视口限制在窗格中并使用剪刀来防止东西“泄漏”到它之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:48:29.100

OpenGL 不使用 .net windows 形式的东西在屏幕上绘制，它直接与图形硬件交互。实现您想要的一种方法可能是将opengl输出渲染到屏幕外纹理/帧缓冲区（fbo），然后以某种方式访问​​普通.net UI中的帧缓冲区。相反，我建议您使用 OpenGL 调用简单地绘制视口分隔线，并完全绕过使用 .net UI 元素。

# webserver - 如何修复内部服务器错误 500

> ID：11962370
> 
> 赞同：0
> 
> 时间：2012-08-14T23:38:57.877
> 
> 标签：webserver

如何修复内部服务器错误 500

我不仅在我的php上有这个。也在我的 html 文件和文件夹上。

.htaccess 文件为空

问题是我的服务器重新启动后发生的。

但是，驻留在同一台服务器上的其他帐户仍在工作，只是那个特定的帐户。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:42:08.500

Usually this happens when one of your scripts has an error that is detected by the server. You should examine your server error log to see what caused the issue.

# c# - 如何比较datagridview中的数据和VB中excel文件中的数据

> ID：11962371
> 
> 赞同：0
> 
> 时间：2012-08-14T23:39:01.447
> 
> 标签：c#, vb.net, sharpdevelop

我正在尝试将excel文件中的一列导入datagridview中的一列..现在可以通过将所有数据选择到datagridview来完成导入的想法，但是我如何才能从excel文件中仅选择一列到datatgridview中的一列之后比较它们中的所有数据并确保它们相等？我的意思是是否有任何语句可以从 excel 文件中选择此列到 datagridview 中的其他特定列中，其中它们中的所有数据都相等？

谢谢大家

注意：我不知道这个想法是否清楚，但您可以在需要更多说明时问我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:45:32.647

这里有一些你也可以尝试让初学者搞砸的东西

如果您需要一个使用 Ranges 的示例..请告诉我，我也可以发布一个示例，但这应该足以让您入门。更改代码 Sorce= 以匹配 Excel 文件的文件路径

```
using System.Data;
using System.Data.OleDb;
...
OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Book1.xls;Extended Properties=Excel 8.0");
OleDbDataAdapter da = new OleDbDataAdapter("select * from MyObject", con);
DataTable dt = new DataTable();
da.Fill(dt); 
```

如果您想了解如何阅读 excel 文件的完整示例，这里是另一个示例

以下是读取 Excel 文件所需的全部代码。

```
void Read_My_Excel_File()
{

// Test.xls is in the C:\

string connectionString = "Provider=Microsoft.Jet.OleDb.4.0;Data Source=" + C:\Test.xls + ";";

connectionString += "Extended Properties=Excel 8.0;";

// always read from the sheet1.
OleDbCommand myCommand = new OleDbCommand("Select * from [Sheet1$];");
OleDbConnection myConnection = new OleDbConnection(connectionString);
myConnection.Open();
myCommand.Connection = myConnection;
OleDbDataReader myReader = myCommand.ExecuteReader();

while (myReader.Read())
{

// it can read upto 5 columns means A to E. In your case if the requirement is different then change the loop limits a/c to it.

for (int i = 0; i < 5; i++)
{
  Response.Write(myReaderIdea.ToString() + " ");
}
Response.Write("<br>");
}
myConnection.Close();
} 
```

# asp.net - 比较验证器在密码模式下不起作用

> ID：11962375
> 
> 赞同：0
> 
> 时间：2012-08-14T23:39:16.927
> 
> 标签：asp.net, validation

我有两个文本框（`NewPassword`和`ConfirmedPassword`），`TextMode=Password`并且比较验证器无法检测它们是否不相等。`Page.IsValid`总是正确的。如果我从文本框中删除密码模式，一切正常，验证器显示消息，它们不相等。我怎样才能使它在密码模式下工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:45:38.577

您应该向我们展示您的代码，因为它按预期工作：

```
 <asp:TextBox id="NewPassword" runat="server"
      TextMode="Password" />

  <asp:TextBox id="ConfirmedPassword" runat="server"
      TextMode="Password" />

  <asp:CompareValidator id="comparePasswords" 
      runat="server"
      ControlToCompare="NewPassword"
      ControlToValidate="ConfirmedPassword"
      ErrorMessage="Your passwords do not match up!"
      Display="Dynamic" /> 
```

也许您混淆了`ControlToCompare`和/或`ControlToValidate`.

# php - 找不到类，但它包含正确

> ID：11962380
> 
> 赞同：-3
> 
> 时间：2012-08-14T23:39:36.923
> 
> 标签：php, oop, class, fatal-error

我遇到了问题，我将项目从 dev 下载到我的本地，虽然它在 dev 上运行良好，但在本地，它告诉我以下错误 **Fatal error: Class 'DB' not found in F:\xampp\htdocs\第 9 行的 timesheet\index.php** 我的 index.php 是

```
<?php
    session_start();
    error_reporting(1);
    include_once('classes/db.php'); 
    include_once('classes/functions.php');  

//==========================================
    $dbFun=new DB();
    $dbFun->ConnectToDb();
    $incFun= new Functions();
//==========================================
    if(isset($_GET['file'])){
         $file = $_GET['file'];
    }
    else if(isset($_POST['file'])){
         $file = $_POST['file'];
    }
    else{
           $file = "login.php";
    }  
?>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>::Administration::</title>
<? if(($file != "login.php") && ($_SESSION['sid'] != "")){?>
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="js/CalendarPopup.js" type="text/javascript" language="JavaScript"></script>
<script type="text/javascript" src="js/sortable.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
</head>
<body>

<table width="100%" height="90%" border="0"  align="center" cellpadding="0" cellspacing="0" bordercolor="#1F5F69">
<tr>
  <td height="36" colspan="3" valign="top">
  <table width="100%" height="150" border="0" cellpadding="0" cellspacing="0" style=" background:url(images/topbg.jpg); background-repeat: repeat-x;">

      <tr>

        <td width="30%" rowspan="2" align="left" valign="top"><img src="images/logo_quality_web_programmer.jpg" alt="Miami Truck Guide" width="351" height="151" /></td>

        <td width="70%" height="76" align="right" valign="top"><table width="500" border="0">
          <tr>
            <td align="right" style="color:#FFFFFF;">Welcome <? echo $_SESSION['sid'];?>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="?file=logout.php" style="color:#FFFFFF;">Logout</a>&nbsp;&nbsp;|&nbsp;&nbsp;Search</td>
            <td width="23">&nbsp;</td>
          </tr>

          <tr>
            <td align="right" valign="top"><span id="top-search"><form id="form1" name="form1" method="post" action=""><input name="search" type="text" id="search" />              
            <input type="image" src="images/search.png" name="Submit" value="Submit" /></form></span></td>
            <td>&nbsp;</td>
          </tr>
        </table></td>
      </tr>
    </table></td>
</tr>

<tr>

    <td width="213" rowspan="2" valign="top" style=" background:url(images/leftbg.jpg); background-repeat: repeat-x;">
    <? if($_SESSION['type'] == "Administrator"){
    include("admin_nav.php");
    } else{
    include("emp_nav.php");
    }?></td>
    <td width="11" rowspan="2" valign="top">&nbsp;</td>
    <td width="990" height="10" valign="top"></td>
</tr>
<tr>
  <td valign="top"><? include($file);?></td>
</tr>
</table>
<? } else { include("login.php");}?>

<script type="text/javascript">

$(document).ready(function(){

    //$('#pid').click(function(){
    $("select").change(function(){
    //alert("asma");
    var puid = $("#pid").val();
    document.getElementById(puid).style.display = 'block';
    });

    $("#button").click(function(){
    var frm = document.getElementById("leftform");
        frm.submit();
    });
});

</script>
</body></html>` 
```

我的 db.php 是

```
<?
    //include("lang.inc.php");
//========================================
class Variables{ // database variables defined in the class

    var $dbServer;
    var $dbUser ;
    var $dbPass ;
    var $dbName ;

function Variables(){

    $this->dbServer = "localhost";
    $this->dbUser = "root";
    $this->dbPass = "";
    $this->dbName = "timesheet";
    }
}

//+----------------------------------------+
class DB  { // database class contains the function

    var $dbase;
    var $connection;

    function ConnectToDb()
    {
        // Connect to the database and return
        // true/false depending on whether or
        // not a connection could be made.

        $vari=new Variables();

        $this->connection = mysql_connect($vari->dbServer, $vari->dbUser, $vari->dbPass)
        or die("Could not connect : " . @mysql_error());                

        $this->dbase = mysql_select_db($vari->dbName, $this->connection);

        if(!$this->connection || !$this->dbase){            

            return false;
}
        else{                   

            return true;
            }
    }
//==============================    
    function selectMultiRecords($query)
     {   
        if((@$result = mysql_query ($query))==FALSE)
        {
            if (DEBUG=="True")
            {
                echo mysqlMessage($query);      
            }   
        }   
        else
        {   
            $count = 0;
            $data = array();
            while ( $row = mysql_fetch_array($result)) 
            {
                 $data[$count] = $row;
                 $count++;
                //echo "<br>";
            }
                return $data;
        }
    }       
//===============================
    function selectFrom($query)
    {
        if((@$result = mysql_query ($query))==FALSE) 
        {
            if (DEBUG=="True")
            {
                echo mysqlMessage($query);      
            }   
        }   
        else
        {   
            if ($check=mysql_fetch_array($result))
            {
                return $check;
            }
                return false;   
        }
    }
//==========================
function countRecords($query)
    {   
        $res = mysql_query($query);
        $results = mysql_num_rows($res);
        return $results;
    }       

//==============================    
function isExist($query) {  

       if((@$result = mysql_query ($query))==FALSE){
            if (DEBUG == "True"){
                echo mysqlMessage($query);      
            }   
        } else { 
            if ($check=mysql_fetch_array($result)){//mysql_fetch_array return flase if there are no records
                return $check;
            }
        return false;   
        }//else 
    }
        function insertInto($query)
    {   //echo $Querry_Sql;
       if((@$result = mysql_query ($query))==FALSE)
        {
            if (DEBUG=="True")
            {
                echo mysqlMessage($query);      
            }   
        }   
        else
        {   
            return true;    
        }
    }

    function deleteFrom($query)
    {
        if((@$result = mysql_query ($query))==FALSE)
        {
            if (DEBUG=="True")
            {
                echo mysqlMessage($query);      
            }   
        }   
        else
        {   
            return true;    
        }
    }

//================================
function update($query)
    {
        if((@$result = mysql_query ($query))==FALSE)
        {
            if (DEBUG=="True")
            {
              echo mysqlMessage($query);        
            }   
        }   
        else
        {   
            return true;
        }
    }   
    function mysqlMessage($query)
    {
        echo "<div align='left'><strong><font color='red'>Site Name &nbsp;&nbsp;e   r r o r:</font></strong><br>";
        echo "Error in your Query: $query<BR>";
        echo "<strong><font color='red'>m y s q l &nbsp;g e n e r a t e d &nbsp;e r r o r:</font></strong><BR>";
        echo mysql_errno() . " " . mysql_error() . "</div>";
    }   
    //Mail function
function mxmail($to,$subject,$msg, $fromname, $fromemail, $ishtml="true")
{
    $headers  = "MIME-Version: 1.0\r\n";
    if($ishtml=="true")
        $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
    else
        $headers .= "Content-type: text/plain; charset=iso-8859-1\r\n";

    $headers .= "From: ".$fromname." <".$fromemail.">\r\n";

    @mail($to, $subject, $msg, $headers);
}       

}//========end of class 

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T00:35:38.957

在本地服务器上启用短标签。或者改变

```
<? 
```

到

```
<?php 
```

参考：[http ://www.php.net/manual/en/ini.core.php#ini.short-open-tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:03:51.507

这看起来像一个路径问题。看起来 db.php 应该位于：

```
F:\xampp\htdocs\timesheet\classes\db.php 
```

理想情况下，您应该指定要包含的文件的绝对路径，以便您的代码可以处理环境更改。[有关详细信息，请参阅此问题](https://stackoverflow.com/questions/1180459/making-php-includes-work-in-a-sub-directory)的答案。

如果文件位于那里，请确保脚本对该文件具有读取权限。

# javascript - Disable vs readonly 不适用于非交互式但值保持器输入

> ID：11962382
> 
> 赞同：0
> 
> 时间：2012-08-14T23:39:57.597
> 
> 标签：javascript, jquery, html, css, web-development-server

我正在开发一些网络接口，我想将一些 INPUT 元素转换为不可编辑/不可更改但仍显示输入值。这怎么办？

至少在 Chrome 中，禁用属性使输入的值消失（未标记的复选框、未填充的单选按钮），但只读标签允许用户不断更改值。为什么？这是 Chrome 的东西吗？到目前为止，简单地不允许交互但保持和显示预选值的最佳方法是什么？

**编辑**：我正在使用 jQuery 的

```
$('#deForm :input').attr('readonly',true); 
```

和

```
$('#deForm :input').attr('disabled',true); 
```

对于这个测试。两者似乎都处理得很好，因为 GUI 会隐藏输入元素。但它们都没有显示我预期的功能

**EDIT2**：我还尝试将 'readonly' 和 'disabled' 作为 jQuery 中的第二个参数而不是 'true' 但它具有相同的效果

**EDIT3**：我也尝试添加到只读。

```
 $('#deForm :input').attr('readonly',true);
 $('#deForm :input').keypress(function(event){
      event.preventDefault();
 }); 
```

但行为与普通只读相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:43:57.310

这是`readonly`和`disabled`属性的默认行为。您可以使用`preventDefault`事件对象的方法。

```
<input type='text' value='something'/> 
```

```
$('input[type=text]').keypress(function(event){
    if (something is true) {
       event.preventDefault()
       // or return false
    } else {
       //
    }
}) 
```

[http://jsfiddle.net/2fKjX/](http://jsfiddle.net/2fKjX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:53:49.807

我知道你说 readonly 没有用，但我猜你在语法上犯了一个错误。你想要的是这样的：

```
<input type="text" readonly="readonly" value = "Hi ima txtbox" id="whatever" class="whatever" /> 
```

# .net - 制作便携式 XNA 游戏

> ID：11962384
> 
> 赞同：0
> 
> 时间：2012-08-14T23:40:06.423
> 
> 标签：.net, visual-studio-2008, deployment, xna, publish

我在 Visual C# 2008 Express 中使用 XNA 3.1。我有一个简单的 2D 游戏，我正试图将它制作成一个便携包 - 我希望用户能够下载一些文件（最佳方案是单个 .EXE）并能够运行它们并玩游戏.

我知道 XNA 需要 .NET 框架，所以我需要某种安装程序，但我想让这个过程尽可能简单。

不幸的是，“发布”系统真的让我很困惑。我能做到这一点的最好方法是什么？

# java - propertyChangeListeners 连锁反应，导致溢出

> ID：11962386
> 
> 赞同：0
> 
> 时间：2012-08-14T23:40:13.547
> 
> 标签：java, swing, joptionpane, propertychangelistener

只是一段代码。为班级做一个项目，我必须根据对它们各自的更改来转换摄氏度、华氏度和开尔文`JFormattedTextFields`。问题是，当对`listener`摄氏温度的变化做出反应时，我的程序会改变华氏温度，然后它对我的华氏温度监听器做出反应，它再次对我的摄氏温度监听器做出反应，依此类推。由于这个问题，我还没有在我的 Kelvin 上工作过。我怀疑是否需要我的代码，因为这更像是一个概念问题，但无论如何：

```
private class ValueChangeHandler implements PropertyChangeListener
{
    public void propertyChange(PropertyChangeEvent event) 
    {

        Object celsiusChange = event.getSource();
        Object fahrenheitChange = event.getSource();
        Object kelvinChange = event.getSource();
        if(celsiusChange == celsiusField)
        {

            tempCelsius = (Double)celsiusField.getValue();
            tempFahrenheit = celToFah(tempCelsius);
            tempKelvin = celToKel(tempCelsius);
            fahrenheitField.setValue(tempFahrenheit);
            kelvinField.setValue(tempKelvin);

        }

        else if(fahrenheitChange == fahrenheitField)
        {

            tempFahrenheit = (Double)fahrenheitField.getValue();
            tempCelsius = fahToCel(tempFahrenheit);
            tempKelvin = fahToKel(tempFahrenheit);
            celsiusField.setValue(tempCelsius);
            kelvinField.setValue(tempKelvin);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:53:52.030

`PropertyChangeEvent`仅当新值`not equals`与前一个值相同时才会触发A。`celToKel`所以我想你的and有问题`fahToKel`。

例如，将摄氏温度 C1 转换为华氏温度并再次转换为摄氏温度会导致 C2 不等于 C1。

另一种解决方案可能是在设置值之前删除侦听器并在之后再次添加它。

```
public class ValueChangeHandler implements PropertyChangeListener
{
    @Override
    public void propertyChange(final PropertyChangeEvent event)
    {
        ...
        fahrenheitField.removePropertyChangeListener("value", this);
        fahrenheitField.setValue(tempFahrenheit);
        fahrenheitField.addPropertyChangeListener("value", this);
        ...
    }
} 
```

还检查您的侦听器是否仅绑定到 value 属性

```
fahrenheitField.addPropertyChangeListener("value", this); 
```

而不是所有的属性

```
fahrenheitField.addPropertyChangeListener(this); 
```

# java - OneJar 和动态类加载

> ID：11962387
> 
> 赞同：8
> 
> 时间：2012-08-14T23:40:42.320
> 
> 标签：java, urlclassloader, dynamic-class-loaders, onejar

我们目前正在调查我们的应用程序中 OneJar 的使用（出于多种原因），但我们的应用程序使用了一些 custom`URLClassloader`来加载应用程序扩展。

当捆绑为“OneJar”Jar 时，我们会遇到`ClassNotFound`异常。有问题的类驻留在捆绑的 Jar 中，我们只是依靠类加载器机制来解决父/子关系。

那是。我们有一个通用`interface`的存储在捆绑的 Jar 中（应该在父类加载器上下文中）。扩展实现了这一点`interface`（允许我们调用扩展）并依赖子类加载器使用父类加载器的资源查找功能的能力。

有没有人对此有任何经验或阐明我们如何解决它。

我会对其他类似的机制感兴趣（用于将我们的库 Jar 捆绑到单个 Jar 资源中，不需要使用将所有内容和 Jar 解压缩到单个文件中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T04:58:36.287

我发现我对我们的类加载器是如何创建的做了一些假设。

我假设类加载器将使用它的类加载器作为它的父级（即 getClass().getClassLoader()），但事实并非如此

相反，它使用的是`SystemClassLoader`. 这意味着当子类加载器去寻找共享接口时，它找不到它（因为它正在查看`SystemClassLoader`而不是 OneJar 类加载器）。

我通过添加`CustomClassLoader.class.getClassLoader()`到我们的自定义类加载器的构造函数来纠正这个问题

# android - 转移到另一项活动的正确方法？Android 清单问题

> ID：11962388
> 
> 赞同：1
> 
> 时间：2012-08-14T23:40:47.300
> 
> 标签：android, android-intent, android-manifest, android-activity

我正在查看一些 lint 错误，并注意到有两种方法可以转换活动。

根据我从各种互联网资源中了解到的信息，我一直在为清单中的每个活动分配一个带有动作名称的意图过滤器，然后调用它以进行该活动。

然而，这给了我：“导出的活动不需要权限”lint 错误。有人说这可能是一个奇怪的问题，最好通过引用活动类来（使用 startActivity() 方法）。通过调用活动的类而不是意图过滤器。

谁能证明哪种方式更好？然而，似乎不提示 lint 错误的方式会是更好的方式......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:55:29.937

推荐的方法是清单中`Activity`不应包含已注册的`<intent-filter>`部分，除非它旨在供外部应用程序使用。这方面的一个例子是使用类似`Intent`action的东西查看特定的文档 mime 类型`ACTION_VIEW`。这基本上是一个隐含的`Intent`动作。

如果您的`Activity`类仅供您自己的应用程序组件在内部使用，那么它们应该只能使用 expiclit 启动`Intents`...

```
Intent myIntent = new Intent(this, MyActivity.class); 
```

在这种情况下，应用程序组件启动`Activity`“知道”它想要做什么并启动一个特定`Activity`的去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:24:02.350

另一种方法是使用 BroadcastReceiver 来处理意图。它将反过来开始您的活动。从广播接收器执行 startActivity()。因此，您在广播接收器上使用过滤器获取意图，但随后广播接收器将使用 startActivity 启动相应的活动。因此，在这种情况下，它确实是一种组合，但需要您广播意图而不是通过类名来定位它。如果您的应用程序很简单，您可以从另一个活动中开始活动（意图）。但不要在 Activity 上注册过滤器。我知道这个答案不是大众最喜欢的，但它被称为松散耦合，或关注点分离或其他东西。

# node.js - 谷歌网络字体在 Express 中不起作用

> ID：11962389
> 
> 赞同：4
> 
> 时间：2012-08-14T23:40:48.300
> 
> 标签：node.js, express, google-webfonts

我无法让 Google webfonts 在 express 3.0 中工作。

以标准方式加载字体似乎不起作用：

```
link(href='http://fonts.googleapis.com/css?family=Crete+Round') 
```

但是以其中一种方式加载字体可以正常工作：

```
 script(type="text/javascript")
        WebFontConfig = {google: { families: [ 'Crete+Round::latin' ] }};
        (function() {
            var wf = document.createElement('script');
            wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
            wf.type = 'text/javascript';
            wf.async = 'true';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wf, s);
        })(); 
```

或者

```
 style
        @import url(http://fonts.googleapis.com/css?family=Crete+Round); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:17:50.170

我在不包括 CSS 的 Express 3.0.0rc2 上遇到过类似的问题。我不确定这是 Jade 还是 Express 问题，但是当我添加一个工作时`style.css`，它可以正常工作，如下所示：

```
link(rel='stylesheet', href='/stylesheets/style.css') 
```

然而，如果我删除该行并插入 Twitter Bootstrap css 文件，我会得到奇怪的 HTML 输出。

```
link(rel='stylesheet', href='/bootstrap/css/bootstrap.min.css') 
```

只有当我有这样的东西时它才有效：

```
link(rel='stylesheet', href='/bootstrap/css/bootstrap.min.css')
link(rel='stylesheet', href='/bootstrap/css/bootstrap-responsive.min.css')
link(rel='stylesheet', href='/stylesheets/style.css') 
```

为什么？我不知道。:-) 我认为这与解析和 HTML 输出有关。

# c++ - 我正在尝试遍历 20x20 网格并计算产品，但我一直得到不正确的结果。你能帮助发现我的错误吗？

> ID：11962390
> 
> 赞同：3
> 
> 时间：2012-08-14T23:40:52.777
> 
> 标签：c++

这是 Project Euler 的第 11 题。它给出了一个 20x20 的数字网格并询问：

在 20x20 网格中，任何方向（上、下、左、右或对角线）上四个相邻数字的最大乘积是多少？

我已经多次查看我的代码，但我似乎无法找到我的结果不正确的原因。

```
#include <iostream>
using namespace std;

void find_greatest_product()
{   
    int grid[20][20] =
    {{8, 02, 22, 97, 38, 15, 00, 40, 00, 75, 04, 05, 07, 78, 52, 12, 50, 77, 91, 8},
    {49, 49, 99, 40, 17, 81, 18, 57, 60, 87, 17, 40, 98, 43, 69, 48, 04, 56, 62, 00},
    {81, 49, 31, 73, 55, 79, 14, 29, 93, 71, 40, 67, 53, 88, 30, 03, 49, 13, 36, 65},
    {52, 70, 95, 23, 04, 60, 11, 42, 69, 24, 68, 56, 01, 32, 56, 71, 37, 02, 36, 91},
    {22, 31, 16, 71, 51, 67, 63, 89, 41, 92, 36, 54, 22, 40, 40, 28, 66, 33, 13, 80},
    {24, 47, 32, 60, 99, 03, 45, 02, 44, 75, 33, 53, 78, 36, 84, 20, 35, 17, 12, 50},
    {32, 98, 81, 28, 64, 23, 67, 10, 26, 38, 40, 67, 59, 54, 70, 66, 18, 38, 64, 70},
    {67, 26, 20, 68, 02, 62, 12, 20, 95, 63, 94, 39, 63, 8, 40, 91, 66, 49, 94, 21},
    {24, 55, 58, 05, 66, 73, 99, 26, 97, 17, 78, 78, 96, 83, 14, 88, 34, 89, 63, 72},
    {21, 36, 23, 9, 75, 00, 76, 44, 20, 45, 35, 14, 00, 61, 33, 97, 34, 31, 33, 95},
    {78, 17, 53, 28, 22, 75, 31, 67, 15, 94, 03, 80, 04, 62, 16, 14, 9, 53, 56, 92},
    {16, 39, 05, 42, 96, 35, 31, 47, 55, 58, 88, 24, 00, 17, 54, 24, 36, 29, 85, 57},
    {86, 56, 00, 48, 35, 71, 89, 07, 05, 44, 44, 37, 44, 60, 21, 58, 51, 54, 17, 58},
    {19, 80, 81, 68, 05, 94, 47, 69, 28, 73, 92, 13, 86, 52, 17, 77, 04, 89, 55, 40},
    {04, 52, 8, 83, 97, 35, 99, 16, 07, 97, 57, 32, 16, 26, 26, 79, 33, 27, 98, 66},
    {88, 36, 68, 87, 57, 62, 20, 72, 03, 46, 33, 67, 46, 55, 12, 32, 63, 93, 53, 69},
    {04, 42, 16, 73, 38, 25, 39, 11, 24, 94, 72, 18, 8, 46, 29, 32, 40, 62, 76, 36},
    {20, 69, 36, 41, 72, 30, 23, 88, 34, 62, 99, 69, 82, 67, 59, 85, 74, 04, 36, 16},
    {20, 73, 35, 29, 78, 31, 90, 01, 74, 31, 49, 71, 48, 86, 81, 16, 23, 57, 05, 54},
    {01, 70, 54, 71, 83, 51, 54, 69, 16, 92, 33, 48, 61, 43, 52, 01, 89, 19, 67, 48}};

    int downRight_diag = 1;
    int upRight_diag = 1;
    int left = 1;
    int right = 1;
    int up = 1;
    int down = 1;
    int firstMax = 0;
    int absoluteMax = 0;

    for(int i = 0; i < 20; i++)
    {
        for(int j = 0; j < 20; j++)
        {
            for(int k = i; k < 17; k++)
            {
                downRight_diag = grid[i][j]*grid[i+1][j+1]*grid[i+2][j+2]*grid[i+3][j+3];
                down = grid[i][j]*grid[i+1][j]*grid[i+2][j]*grid[i+3][j];

                if(downRight_diag > down && downRight_diag > firstMax)
                    firstMax = downRight_diag;
                else if(down > downRight_diag && down > firstMax)
                    firstMax = down;

            }
            for(int l = i; l >= 3 && l < 20; l++)
            {
                upRight_diag = grid[i][j]*grid[i-1][j+1]*grid[i-2][j+2]*grid[i-3][j+3];
                up = grid[i][j]*grid[i-1][j]*grid[i-2][j]*grid[i-3][j];

                if(upRight_diag > firstMax)
                    firstMax = upRight_diag;
                else if(up > firstMax)
                    firstMax = up;
            }
            if(j < 17)
            {
                left = grid[i][j]*grid[i][j+1]*grid[i][j+2]*grid[i][j+3];

                if(left > firstMax)
                    firstMax = left;
            }
            if(j >= 3)
            {
                right = grid[i][j]*grid[i][j-1]*grid[i][j-2]*grid[i][j-3];

                if(right > firstMax)
                    firstMax = right;
            }

            if(firstMax > absoluteMax)
            {
                absoluteMax = firstMax;    
            }

            downRight_diag = 1;
            upRight_diag = 1;
            left = 1;
            right = 1;
            up = 1;
            down = 1;
            firstMax = 0;
        }
    }
    cout << absoluteMax << endl;
}
int main()
{

    find_greatest_product();
    system("pause");
} 
```

澄清一下：`left`是从左到右和`right`从右到左计算产品。

我知道这可能不是最有效的方法，但我仍然希望得到一些反馈。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:13:19.220

正如 MRAB 已经回答的那样，这很可能是由于数组溢出。

我注意到的另一件事（但由于冗余计算可能不是问题）是：

```
 if(upRight_diag > firstMax)
                firstMax = upRight_diag;
            else if(up > firstMax)
                firstMax = up; 
```

如果两者都大于`firstMax`并且`up`恰好是全局最大值，那么您将错过它。但这很奇怪，因为`up`它是多余的（由`down`前面处理过）。

我会发表一些一般性评论。首先，为什么要循环多次进行向上/向下测试？你甚至没有使用循环变量。您只想测试边界（实际上您并没有这样做）。此外，`left`当您已经在计算`right`. `up`和`down`我已经提到的一样。

这是计算水平、垂直和两条对角线的简化：

```
for(int i = 0; i < 20; i++)
{
    for(int j = 0; j < 20; j++)
    {
        int horz=0, vert=0, diagDR=0, diagUR=0;

        if( j >= 3 )
            horz = grid[i][j-3]*grid[i][j-2]*grid[i][j-1]*grid[i][j];

        if( i >= 3 )
            vert = grid[i-3][j]*grid[i-2][j]*grid[i-1][j]*grid[i][j];

        if( i >= 3 && j >= 3 ) {
            diagDR = grid[i-3][j-3]*grid[i-2][j-2]*grid[i-1][j-1]*grid[i][j];
            diagUR = grid[i-3][j]*grid[i-2][j-1]*grid[i-1][j-2]*grid[i][j-3];
        }

        if( horz > absoluteMax ) absoluteMax = horz;
        if( vert > absoluteMax ) absoluteMax = vert;
        if( diagDR > absoluteMax ) absoluteMax = diagDR;
        if( diagUR > absoluteMax ) absoluteMax = diagUR;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T01:58:57.550

更一般地说（不要假设它总是连续 4 个，或者总是 20 个）。 [http://codepad.org/YkrT72kR](http://codepad.org/YkrT72kR) 我得到了

> 70600674 在 (3,15) 的对角线左下方向

```
#include <iostream>
#include <inttypes.h>

const uint8_t HEIGHT = 20;
const uint8_t WIDTH = 20;
const uint8_t CONSECUTIVE = 4;
const int GRID[HEIGHT][WIDTH] =
    {{8, 02, 22, 97, 38, 15, 00, 40, 00, 75, 04, 05, 07, 78, 52, 12, 50, 77, 91, 8},
    {49, 49, 99, 40, 17, 81, 18, 57, 60, 87, 17, 40, 98, 43, 69, 48, 04, 56, 62, 00},
    {81, 49, 31, 73, 55, 79, 14, 29, 93, 71, 40, 67, 53, 88, 30, 03, 49, 13, 36, 65},
    {52, 70, 95, 23, 04, 60, 11, 42, 69, 24, 68, 56, 01, 32, 56, 71, 37, 02, 36, 91},
    {22, 31, 16, 71, 51, 67, 63, 89, 41, 92, 36, 54, 22, 40, 40, 28, 66, 33, 13, 80},
    {24, 47, 32, 60, 99, 03, 45, 02, 44, 75, 33, 53, 78, 36, 84, 20, 35, 17, 12, 50},
    {32, 98, 81, 28, 64, 23, 67, 10, 26, 38, 40, 67, 59, 54, 70, 66, 18, 38, 64, 70},
    {67, 26, 20, 68, 02, 62, 12, 20, 95, 63, 94, 39, 63, 8, 40, 91, 66, 49, 94, 21},
    {24, 55, 58, 05, 66, 73, 99, 26, 97, 17, 78, 78, 96, 83, 14, 88, 34, 89, 63, 72},
    {21, 36, 23, 9, 75, 00, 76, 44, 20, 45, 35, 14, 00, 61, 33, 97, 34, 31, 33, 95},
    {78, 17, 53, 28, 22, 75, 31, 67, 15, 94, 03, 80, 04, 62, 16, 14, 9, 53, 56, 92},
    {16, 39, 05, 42, 96, 35, 31, 47, 55, 58, 88, 24, 00, 17, 54, 24, 36, 29, 85, 57},
    {86, 56, 00, 48, 35, 71, 89, 07, 05, 44, 44, 37, 44, 60, 21, 58, 51, 54, 17, 58},
    {19, 80, 81, 68, 05, 94, 47, 69, 28, 73, 92, 13, 86, 52, 17, 77, 04, 89, 55, 40},
    {04, 52, 8, 83, 97, 35, 99, 16, 07, 97, 57, 32, 16, 26, 26, 79, 33, 27, 98, 66},
    {88, 36, 68, 87, 57, 62, 20, 72, 03, 46, 33, 67, 46, 55, 12, 32, 63, 93, 53, 69},
    {04, 42, 16, 73, 38, 25, 39, 11, 24, 94, 72, 18, 8, 46, 29, 32, 40, 62, 76, 36},
    {20, 69, 36, 41, 72, 30, 23, 88, 34, 62, 99, 69, 82, 67, 59, 85, 74, 04, 36, 16},
    {20, 73, 35, 29, 78, 31, 90, 01, 74, 31, 49, 71, 48, 86, 81, 16, 23, 57, 05, 54},
    {01, 70, 54, 71, 83, 51, 54, 69, 16, 92, 33, 48, 61, 43, 52, 01, 89, 19, 67, 48}};

int main()
{
    uint64_t max = 0, temp_max = 0;
    uint16_t max_x=0, max_y=0;
    std::string direction = "";
    for (uint8_t i=0; i<HEIGHT; i++)
    {
        for (uint8_t j=0; j<WIDTH; j++)
        {
            // Can we check right?
            if (j < (WIDTH - CONSECUTIVE))
            {
                temp_max=1;
                for (int k=0; k<CONSECUTIVE; k++)
                {
                    temp_max *= GRID[i][j+k];
                }
                if (temp_max > max)
                {
                    max = temp_max;
                    max_x = j;
                    max_y = i;
                    direction = "right";
                }
            }

            // Can we check down?
            if (i < (WIDTH - CONSECUTIVE))
            {
                temp_max=1;
                for (int k=0; k<CONSECUTIVE; k++)
                {
                    temp_max *= GRID[i+k][j];
                }
                if (temp_max > max)
                {
                    max = temp_max;
                    max_x = j;
                    max_y = i;
                    direction = "down";
                }
            }

            // Can we check down-right?
            if ((i < (HEIGHT - CONSECUTIVE)) && (j < (WIDTH - CONSECUTIVE)))
            {
                temp_max=1;
                for (int k=0; k<CONSECUTIVE; k++)
                {
                    temp_max *= GRID[i+k][j+k];
                }
                if (temp_max > max)
                {
                    direction = "diagonal down right";
                    max = temp_max;
                    max_x = j;
                    max_y = i;
                }
            }

            // Can we check up-right?
            if ((i > (CONSECUTIVE)) && (j < (WIDTH - CONSECUTIVE)))
            {
                temp_max=1;
                for (int k=0; k<CONSECUTIVE; k++)
                {
                    temp_max *= GRID[i-k][j+k];
                }
                if (temp_max > max)
                {
                    direction = "diagonal up right";
                    max = temp_max;
                    max_x = j;
                    max_y = i;
                }
            }

        }
    }
    std::cout << "Max product was " << max << " at (" << max_x << "," << max_y << ") in direction " << direction << std::endl;
    return 0;
} 
```

不错的小挑战。请记住，检查左上角、左上角、右上角是不必要的。如前所述，*请始终检查您的数组边界*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T00:05:57.477

我认为这是因为您没有检查数组边界。

例如，当`i`19 和`j`0 时，你会有`downRight_diag = grid[19][0]*grid[20][1]*grid[21][2]*grid[22][3];`，但`grid`被定义为`int grid[20][20]`。

# php - 提交表单，然后使用隐藏变量重定向到贝宝？

> ID：11962393
> 
> 赞同：0
> 
> 时间：2012-08-14T23:40:59.190
> 
> 标签：php, javascript, forms, paypal

当用户单击提交按钮时，我需要在我们的网站上提交分类广告表格。广告的价格取决于广告的字数和投放的周数，因此我的 PayPal 按钮会读取我设置的隐藏“金额”字段。如何让我的表单提交，然后重定向到 PayPal，隐藏的金额变量仍然保持其值？任何其他方法也将受到欢迎。

编辑：好的，我已经制作了自己的 php 脚本，可以将原始表单中的信息通过电子邮件发送给我，我一直在使用我的虚拟主机托管的 cgi 脚本。

现在我给自己发电子邮件就好了，我试图找出当我重定向到它时如何将我的隐藏变量从那里发送到贝宝。这是我现在正在尝试的。

```
<?php 
 $to = "info.whatzup@gmail.com" ; 
 $from = $_REQUEST['email'] ; 
 $name = $_REQUEST['Name'] ; 
 $headers = "From: $from"; 
 $subject = "Classified Tests"; 

 $fields = array(); 
 $fields{"Name"} = "Name";  
 $fields{"email"} = "Email"; 
 $fields{"Phone"} = "Phone"; 
 $fields{"Address"} = "Street Address";
 $fields{"City"} = "City";  
 $fields{"State"} = "State"; 
 $fields{"Zip"} = "Zip Code"; 
 $fields{"Classification"} = "Classification"; 
 $fields{"Ad-Headline"} = "Headline"; 
 $fields{"Ad-Content"} = "Ad Content"; 
 $fields{"Words"} = "Word Count"; 
 $fields{"Weeks"} = "Weeks to Run"; 
 $fields{"WordCount"} = "Total Words"; 
 $fields{"Rate"} = "Word Rate"; 
 $fields{"GrossAmountDue"} = "Gross Amount"; 
 $fields{"NonProfit"} = "Non Profit Ad?"; 

$item_name   = $_POST['item_name'];
$amount   = $_POST['amount'];
$currency_code  = $_POST['currency_code'];
$no_shipping = $_POST['item_number'];
$shipping = $_POST['item_number'];
$cmd   = $_POST['cmd'];
$bn  = $_POST['bn'];
$no_note = $_POST['item_number'];
$lc   = $_POST['lc'];
$business   = $_POST['business'];

 $body = "This Ad has been submitted:\n\n"; foreach($fields as $a => $b){   $body .= sprintf("%20s: %s\n",$b,$_REQUEST[$a]); } 

 if($from == '') {print "You have not entered an email, please go back and try again";} 
 else { 
 if($name == '') {print "You have not entered a name, please go back and try again";} 
 else { 
 $send = mail($to, $subject, $body, $headers); 
 if($send) 
 {header( "Location: https://www.paypal.com/cgi-bin/webscr" );} 
 else 
 {print "We encountered an error sending your mail, please contact us at info.whatzup@gmail.com"; } 
 }
}

 ?> 
```

# tsql - SQL Fulltext search on multiple tables with same schema

> ID：11962401
> 
> 赞同：0
> 
> 时间：2012-08-14T23:41:31.650
> 
> 标签：tsql, full-text-search

I am working on an Intranet helpdesk website that provides a search on some tables. Each table has the exact same schema, but is presented slightly differently depending on the purpose. For example, the Blog will display author names to the user while the FAQ and Guides sections will not. The tables have the following columns:

```
id int IDENTITY,
title VARCHAR(255),
body NVARCHAR(MAX),
author VARCHAR(80),
date DATETIME,
lasteditor varchar(80),
lastedited DATETIME,
CONSTRAINT [PK_blog_id] PRIMARY KEY CLUSTERED
([id] ASC) 
```

I would like for the results of each table to return a rank with respect to *all* of the tables.

I am using Transact SQL (SQL Server 2008), so full text indexes require a primary key to operate on. So far I've come up with two possibilities to solve the problem of getting a unique key for the fulltext index:

1.  Create a View every time a search is performed that unions all of the tables, and generates a unique ID column on the View using something like this:

    ```
     SELECT id,
        variety,
        1 + (SELECT COUNT(*) FROM tbl WHERE t.id < id) as num
        FROM tbl 
    ```

2.  Merge all of the tables into one big table, and append an extra column denoting the type (i.e "blog", "faq", "guides", etc). Use bigtable's primary key as the key for the fulltext index, and get the "table" I want using an extra WHERE clause.

Which one is considered better practice, or performs better? It would seem like creating a view and generating an "auto-increment" for the view everytime someone performs a global site search is a bit slow. Maybe there's an easier way of generating a unique id column for the view?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:05:20.813

我认为您回答了自己的问题 1) 似乎是个坏主意，除非您有令人信服的理由让 4 个表基本相同。

选择 2，稍后当您添加新的文本对象时，您会很高兴

“例如，博客将向用户显示作者姓名，而常见问题解答和指南部分则不会。表格具有以下列”

这都是业务逻辑。不要在数据库层做出这个决定。根据类型字段做出决定。

# c# - Why does my .NET start-up time increase with pre-generated serialization assemblies?

> ID：11962403
> 
> 赞同：10
> 
> 时间：2012-08-14T23:41:36.587
> 
> 标签：c#, winforms, performance, serialization, .net-4.0

I have a pretty large and complex winforms application. In an effort to reduce the startup time, I pre-generated serialization assemblies using the following batch file.

```
; delete any existing serialization assemblies
del *XmlSerializers.dll

; gen new serialization assemblies
for %%a in (*.dll) do sgen /assembly:%%a

; delete .deleted files (generated for assemblies which do not allow serialization)
del *.dll.deleted* 
```

However, to my surprise, the startup time actually went up from 4.6 seconds to 6.1 seconds - a jump of 1.5 seconds. This held true whether it was a cold start or warm.

So, questions:

1.  Why does my app start slower with serialization assemblies in place?
2.  Is there a way to see via Perfmon or some other tool when the app is generating serialization assemblies?
3.  Am I generating serialization assemblies correctly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:59:39.710

您应该分析您的应用程序以了解启动时间增加的原因。Perfview 将是一个很好的工具。

如果在 JITtting 上花费了太多时间，请考虑将 NGEN 作为您的应用程序。如果加载的页面过多，如果您在 .Net 4.5 下运行，请考虑使用 mpgo 优化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:47:36.123

因为 .NET 必须检查签名是否有效

# string - excel中的字符串匹配和替换

> ID：11962405
> 
> 赞同：0
> 
> 时间：2012-08-14T23:41:43.413
> 
> 标签：string, excel

我的excel文件中有两张纸。第一个看起来像这样：

```
**Name** **Code**
Bob      ??
Thomas   ??
Rob      ?? 
```

第二个看起来像这样：

```
**Name**  **Code**
Thomas    tom
James     jam
Bob       bob 
```

我想要做的是每个名称都是表 1，在表 2 中搜索正确的代码并将代码添加到表 1 的第二列中。我将如何继续？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:52:13.733

假设在两张纸上都从 A1 开始，把这个公式`B2`放在第一张纸上：

```
=VLOOKUP(A2, Sheet2!$A$2:$B$4,2,FALSE) 
```

这从 中获取值`A2`，转到`A2:B4`另一张表上引用的范围（美元符号确保在拖动/复制公式时范围不会改变），找到相应的值，然后从列中提取值 next给它。

确保它`Sheet2`实际上与您的工作表名称匹配。确保发生这种情况的一种方法是开始输入公式，然后从表中手动选择范围。一旦你选择了它，按下`F4`它可以快速将它更改为一个绝对范围（这就是美元符号的含义）。

# ios - How do some companies distribute beta iOS apps to a limited set of users?

> ID：11962406
> 
> 赞同：0
> 
> 时间：2012-08-14T23:41:57.617
> 
> 标签：ios, app-store

Testflight is one way, but it's not really very convenient for the people checking out the app. There's also the 100 user limit that you run into.

But there's [http://grid.binarythumb.com/](http://grid.binarythumb.com/), who is distributing their app by texting a link to users. No app store involved. How are they doing this? They never collected my UDID or anything...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:55:24.803

苹果允许通过苹果企业开发者账号无限制分发[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

但我想这不应该分发给公司客户。

# jquery - Use jQuery to create slowly filling text

> ID：11962410
> 
> 赞同：1
> 
> 时间：2012-08-14T23:42:13.537
> 
> 标签：jquery

> **Possible Duplicate:**
> [Show text letter by letter](https://stackoverflow.com/questions/7264974/show-text-letter-by-letter)

Bit hard to explain but what I'm trying to achieve is add text to a div BUT I don't want it to simply appear or fadeIn etc. I want to be able to display the text a character at a time like if you were playing a text based game on the DS for example.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:47:15.013

这是演示 [http://www.thepixelart.com/demo/jticker/](http://www.thepixelart.com/demo/jticker/)

这是可下载的文件 [http://www.thepixelart.com/demo/jticker/files/jticker.zip](http://www.thepixelart.com/demo/jticker/files/jticker.zip)

您可以修改计时器，以便在特定时间只出现一个角色

（或者）

html

```
<div id="text"><span>The intergalactic space agency</span></div> 
```

css

> div#text { 宽度：0px; 高度：2em；空白：nowrap；溢出：隐藏；}

jQuery

> var spanWidth = $('#test span').width(); $('#text').animate( { width: spanWidth }, 1000 );

这是演示

[http://jsfiddle.net/mrtsherman/6qQrN/1/](http://jsfiddle.net/mrtsherman/6qQrN/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:00:27.120

这是一种实现“打字机”效果的方法，就像您在视频游戏中看到的那样（使用纯 javascript，不需要 jQuery）：

```
<div id="text"></div>​

<script type="text/javascript">
    var textToAdd = "your text here";
    var placeHolder = 0;

    var textAdder = setInterval(function(){
        document.getElementById("text").innerHTML += textToAdd.charAt(placeHolder);
        if (++placeHolder == textToAdd.length){
            clearInterval(textAdder);
        }
    }, 100);
​&lt;/script> 
```

[**演示**](http://jsfiddle.net/Snowsickle/PRa8D/)

# java - Accessing JMX from Ruby without JRuby and Java

> ID：11962416
> 
> 赞同：1
> 
> 时间：2012-08-14T23:43:27.390
> 
> 标签：java, ruby, jvm, jruby, jmx

I am wondering if it is possible to access JMX (RMI) data without using JRuby and Java, purely from Ruby.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:42:00.547

没有 Java，RMI/JMX 数据不可用。

# ruby-on-rails-3 - FactoryGirl 出现“除非保存父级，否则无法调用创建”错误

> ID：11962419
> 
> 赞同：2
> 
> 时间：2012-08-14T23:43:49.667
> 
> 标签：ruby-on-rails-3, activerecord, factory-bot

这让我发疯了。FactoryGirl 已停止工作，但我不明白为什么或如何——也许是我进行了 gem 更新？首先是问题，然后是细节：

```
>>> c = FactoryGirl.create(:client)
=> #<Client id: 3, name: "name3", email: "client3@example.com", password_digest: "$2a$10$iSqct/0DIQbL.OcRrYOiPuiKijbAXggLxcMevS3TmVIV...", created_at: "2012-08-14 23:25:22", updated_at: "2012-08-14 23:25:22">
>>> a = FactoryGirl.create(:admin)
ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
        from /.../usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/associations/collection_association.rb:425:in `create_record' 
```

调试打印语句告诉我 :admin 是一个 new_record?，所以我自然无法与它形成关联。这是客户端工厂。这个想法是管理员只是一个被分配了管理员权限的客户端：

```
FactoryGirl.define do
  factory :client do
    sequence(:name) {|n| "name#{n}"}
    sequence(:email) {|n| "client#{n}@example.com" }
    password "password"

    factory :admin do
      after_create {|admin| 
        admin.assign_admin
      }
    end

  end

end 
```

当我在控制台中复制 FactoryGirl 正在做什么（或应该做什么）时，一切正常：

```
>>> a = FactoryGirl.create(:client)
=> #<Client id: 4, name: "name5", email: "client5@example.com", password_digest: "$2a$10$vFsW6VfmNMKWBifPY3vcHe6Q2.vCCLEq3RqPYRxdMo0m...", created_at: "2012-08-14 23:37:11", updated_at: "2012-08-14 23:37:11">
>>> a.assign_admin
=> #<ClientRole id: 2, client_id: 4, role: 1, created_at: "2012-08-14 23:37:28", updated_at: "2012-08-14 23:37:28">
>>> a.admin?
=> true 
```

这是客户端模型：

```
class Client < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  validates_presence_of :name, :email, :password, :on => :create
  validates :name, :email, :uniqueness => true
  has_many :sites, :dependent => :destroy
  has_many :client_roles, :dependent => :destroy
  # roles

  def has_role?(role)
    client_roles.where(:role => role).exists?
  end

  def assign_role(role)
    client_roles.create(:role => role) unless has_role?(role)
  end

  def revoke_role(role)
    client_roles.where(:role => role).destroy_all
  end

  def assign_admin
    assign_role(ClientRole::ADMIN)
  end

  def admin?
    has_role?(ClientRole::ADMIN)
  end

end 
```

为了完整起见，ClientRole 模型：

```
class ClientRole < ActiveRecord::Base
  belongs_to :client

  # values for #role
  ADMIN = 1

end 
```

最后，来自 Gemfile.lock 的版本和依赖信息：

```
factory_girl (4.0.0)
  activesupport (>= 3.0.0)
factory_girl_rails (4.0.0)
  factory_girl (~> 4.0.0)
  railties (>= 3.0.0) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T01:49:27.157

解决了。最新版本的 FG 发生了一些变化。以下工厂方法用于工作：

```
factory :admin do
  after_create {|admin| 
    admin.assign_admin
  }
end 
```

但最新的文档说现在的语法是：

```
factory :admin do
  after(:create) {|admin| 
    admin.assign_admin
  }
end 
```

改变它使一切正常。 *哇*。

# objective-c - NSUserDefaults 在 Iphone 和 Simulator 上的工作方式不同

> ID：11962423
> 
> 赞同：-6
> 
> 时间：2012-08-14T23:44:09.253
> 
> 标签：objective-c, ios, cocoa-touch, nsuserdefaults

我正在使用 NSUserDefaults 在另一个视图控制器上保存一个整数，以便在推送这个时我知道要使用哪个图像。出于某种原因，模拟器只使用 image1 而我的手机只使用 image2。我能做些什么？

```
if ([[NSUserDefaults standardUserDefaults] integerForKey:@"key"] == 1){

    leftStill = [UIImage imageNamed:@"image1.png"];

}

if ([[NSUserDefaults standardUserDefaults] integerForKey:@"key"] == 2) {

    leftStill = [UIImage imageNamed:@"image2.png"];

}

[imageView setImage:leftStill]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:54:00.723

你`- (BOOL)synchronize;`在设置 NSUserDefaults 的值后调用了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:32:29.460

您是否在此代码块之前从零/未分配的 leftImage 和 imageView 开始？

由于您正在测试一个整数值，我想知道下面的代码是否可能对您不起作用，可能不仅避免了您的代码当前正在执行的值的两次读取，这可能是问题的原因，而且使用中介持有人 leftImage 本身：

```
switch([[NSUserDefaults standardUserDefaults] integerForKey:@"key"]) {
  case 1:
    [imageView setImage:[UIImage imageNamed:@"image1.png"];
    break;
  case 2:
    [imageView setImage:[UIImage imageNamed:@"image2.png"];
    break;
  default:
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:42:35.747

当您将值存储在 NSUserDefaults 中时，您将执行以下操作：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setInteger:1 forKey:@"key"];
[defaults synchronize]; 
```

同步确实会定期发生，但您无法保证何时会发生。因此，我通常在为 NSUserDefaults 中的键设置值时进行同步。

您可能还想考虑一些更适合您尝试完成的任务的方法，例如使用 prepareForSegue。

# iphone - 使用未声明的标识符语义问题

> ID：11962429
> 
> 赞同：0
> 
> 时间：2012-08-14T23:44:44.353
> 
> 标签：iphone, ios5, xcode4, xcode4.3

我在这个错误中使用未声明的标识符不同的常见错误，有时很容易修复但我无论如何都是堆栈，可能我以错误的方式观看。

我正在尝试做一本日志，人们可以在其中写下他们想要的内容并保存在 plist 中。

从一个 tableView 中，我将显示所有保存的文件，我将推送到一个 xib 视图，人们可以在其中填写字段。我已经导入了新的 .h 和定义密钥的 .h 。

这里出现错误。

```
- (void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    name.text = [bookLog objectForKey:NAME_KEY];
    placeTextView.text = [bookLog objectForKey:PLACE_KEY];
    file1TextView.text = [bookLog objectForKey:FILE1_KEY];
    file2TextView.text = [bookLog objectForKey:FILE2_KEY];
 } 
```

bookLog 有 4 个错误，每行有 1 个错误，name.text、placeTextView.text、file1TextView.text、fileTextView.text 有 1 个错误。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:44:26.683

我认为这是因为您没有合成您正在谈论的属性。m 它只是说它`@synthesize data1;`何时应该合成您有错误的所有属性。（`@synthesize placeTextView; @synthesize...`此外，当您应该在 .m 中声明时，您在 .h 文件中进行了声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:57:59.127

您在diveLogTable.m 中引用的属性不是diveLogTable 类的成员，因此当您在此处提及它们时，编译器会将它们视为未定义。它们在diveLogDetails 类上公开定义，因此可以在那里访问它们（或通过为它们询问该类的实例）。

未编译的代码可以移到diveLogDetails 类中。*当视图控制器的视图出现时，*这是您想要做的（设置 UIControls）。它将在那里编译，并且在那里似乎很有意义。

在我看来，您在diveLog 字典中保存了一些diveLog 信息，并且您希望将该数据呈现给用户并允许通过diveLogDetails 类进行编辑（通常以大写字母开头的类名和名称视图控制器使用该后缀，例如：DiveLogDetailsViewController)。

diveLogDetails 类中的diveLog 字典是唯一应该公开的属性。当您创建diveLogDetails VC 时，按照您的方式设置字典。

让diveLogDetails 从字典中读取值，设置它的UIControls，当用户更改控件的值时更改字典值（并点击保存，或其他）。返回diveLogTable 后，最新值将在字典中。

# sql - Postgres HStore 错误 - 未知运算符

> ID：11962436
> 
> 赞同：1
> 
> 时间：2012-08-14T23:45:23.287
> 
> 标签：sql, ruby-on-rails, ruby, postgresql, hstore

我的红宝石代码：

```
Portfolio.where("data @> (:key => :value)",     :key => 'CSJ', :value => '0.1') 
```

生成以下 SQL：

```
"SELECT \"portfolios\".* FROM \"portfolios\"  WHERE (data @> ('CSJ' => '0.1'))" 
```

出现此错误：

```
Error: PG::Error: ERROR:  operator does not exist: unknown => unknown
LINE 1: ...olios".* FROM "portfolios"  WHERE (data @> ('CSJ' => '0.1'))
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT "portfolios".* FROM "portfolios"  WHERE (data @> ('CSJ' => '0.1')) 
```

Postgresql 9.1.4，Rails 3.2.7/8，在我的模型代码中使用带有以下内容的 activerecord-postgres-hstore gem：

```
serialize :data, ActiveRecord::Coders::Hstore 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T00:39:52.597

您没有在 Rails 使用的数据库中安装 hstore 扩展。

例如，如果我在我`select 'a' => 'b'`的一个没有 hstore 的数据库中说，我会得到：

```
=> select 'a' => 'b';
ERROR:  operator does not exist: unknown => unknown
LINE 1: select 'a' => 'b';
                   ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

但是在另一个确实安装了 hstore 的数据库中，我得到了这个：

```
=> select 'a' => 'b';
 ?column? 
----------
 "a"=>"b"
(1 row) 
```

你需要[`create extension hstore`](http://www.postgresql.org/docs/current/static/sql-createextension.html)在你的 Rails 数据库中做一个。

# php - Multi-level controllers for MVC architecture

> ID：11962437
> 
> 赞同：1
> 
> 时间：2012-08-14T23:45:31.077
> 
> 标签：php, model-view-controller, controller, front-controller

I just encountered one of the limitations of the MVC architecture I'm currently using for my applications. Currently, my URLs look like this:

```
www.example.com/controller/action 
```

Each request arrives at the front controller, which loads the requested controller class from the URL, and executes the action (method) of it. This works fine, until you need to start using nested controllers.

Example: There's a 'users' controller which holds methods like createUser(), editUser(), deleteUser() etc. All perfectly possible with the current URL structure... But what if we also need to manage user types? We would need a separate controller 'usertypes' which also holds methods like createUserType(), editUserType()... However, since user types are a part of users, the 'usertypes' controller should be nested inside the users controller, as this:

```
www.example.com/users/usertypes/addusertype 
```

With the current URL structure however, this is not possible... How can I make use of nested (or multi-level if you will) controllers?

UPDATE: here's a basic representation of the application I'm working on: It's a basic business application for the administration department where they can add, view, edit and delete data from 3 categories (Promotions, Mailings and Cardholders). Each category represents a table in the database and has its own distinct fields. Accounts need to be created by the admin, users cannot create an account themselves and they can't consult their user profile.

For each of those categories I've made a controller, which holds actions like add(), edit(), getAll(), getSingle(), delete()... Each of those actions calls the appropriate methods from the Model and renders the corresponding View(s).

This was all possible with the current URL structure, which had URL's like:

```
example.com/promotions/add
example.com/promotions/getsingle?id=123 
```

Recently they asked me to make it possible to also manage types of promotions, mailings and cardholders. Right now they already have a School Discount, a 20% Discount etc... But they want to add more as they wish.

This means i need a PromotionTypes controller, which also holds actions like add(), getAll(), getSingle(), delete()... It would be nice if the PromotionTypes controller could be nested in the original promotions controller, which enables URL's as so:

```
example.com/promotions/promotiontypes/add 
```

instead of

```
example.com/promotiontypes/add 
```

With my current front loader, this is not possible, since the first part of the URL automatically gets treated as the controller, and the second part as the action to execute from it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:26:17.477

似乎您没有将控制器绑定到视图，而是绑定到每个[域对象](http://c2.com/cgi/wiki?DomainObject)。

另外，奇怪的路由是怎么回事？为什么不 ：

```
POST "www.example.com/profile/42/type" 
```

因为您正在向特定用户的配置文件添加类型。这转化为`postType()`在`Profile`控制器上执行方法。

如果您正在构建自己的路由机制，也许[这个答案](https://stackoverflow.com/a/11770908/727208)可能会有所帮助。

底线是：你不需要这么奇怪的控制器控制器。您需要开始查看您拥有什么样的视图，然后为每个视图创建控制器，而不是从查看模型层开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:52:40.703

您没有提及您是否使用框架，但通常的方法是让“路由器”对异常应用特殊处理，例如[Zend Framework 路由器](http://framework.zend.com/manual/1.11/en/zend.controller.router.html)

# java - Kyro 序列化错误

> ID：11962441
> 
> 赞同：1
> 
> 时间：2012-08-14T23:45:44.517
> 
> 标签：java, serialization, kryo

我在学校用 eclipse 用我的拇指驱动器工作，然后把拇指驱动器带回家了。

下次运行程序时突然出现这个错误：

```
 Exception in thread "main" java.lang.IllegalArgumentException: Unable to create serializer "com.esotericsoftware.kryo.serializers.FieldSerializer" for class: com.esotericsoftware.kryonet.FrameworkMessage$RegisterTCP
    at com.esotericsoftware.kryo.Kryo.newSerializer(Kryo.java:338)
    at com.esotericsoftware.kryo.Kryo.newDefaultSerializer(Kryo.java:317)
    at com.esotericsoftware.kryo.Kryo.getDefaultSerializer(Kryo.java:310)
    at com.esotericsoftware.kryo.Kryo.register(Kryo.java:354)
    at com.esotericsoftware.kryonet.KryoSerialization.<init>(KryoSerialization.java:33)
    at com.esotericsoftware.kryonet.KryoSerialization.<init>(KryoSerialization.java:25)
    at com.esotericsoftware.kryonet.Client.<init>(Client.java:73)
    at com.esotericsoftware.kryonet.Client.<init>(Client.java:55)
    at test.TestClient.<init>(TestClient.java:32)
    at test.TestClient.main(TestClient.java:39)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.esotericsoftware.kryo.Kryo.newSerializer(Kryo.java:325)
    ... 9 more
Caused by: java.lang.IncompatibleClassChangeError: Found interface org.objectweb.asm.MethodVisitor, but class was expected
    at com.esotericsoftware.reflectasm.FieldAccess.insertConstructor(FieldAccess.java:144)
    at com.esotericsoftware.reflectasm.FieldAccess.get(FieldAccess.java:109)
    at com.esotericsoftware.kryo.serializers.FieldSerializer.rebuildCachedFields(FieldSerializer.java:104)
    at com.esotericsoftware.kryo.serializers.FieldSerializer.<init>(FieldSerializer.java:50)
    ... 14 more 
```

我从未见过这种错误，我不知道如何解决它。每次我使用 kryonet 库时都会发生这种情况。有什么可用的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:08:47.877

工作中的一个伙伴也犯了同样的错误。它是由使用旧的“asm”库引起的。当最新的 Kryo（撰写本文时为 2.18）需要 asm 4.x 时，他正在使用 3.X。更新 asm 库解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T15:24:27.267

正如 Nushio 的回答，但似乎你有库冲突，你有多个依赖项引用不同版本的 asm，你需要通过执行找出导致冲突的女巫`mvn dependency:tree`。之后，您必须在引用错误 asm 版本（< 4.x）的依赖项中进行 maven 排除。

# javascript - 在 javascript 中验证或读取远程图像类型

> ID：11962445
> 
> 赞同：3
> 
> 时间：2012-08-14T23:46:04.507
> 
> 标签：javascript, image, file

这是我所说的幻数的链接： [file magic](http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html)

如何使用 JavaScript 远程读取文件的前几个字节（幻数）以确定它是否是图像文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T23:53:59.923

JavaScript 主要是一种客户端语言，因此您不能简单地以编程方式从您自己的页面读取托管在其他站点上的文件。`XMLHttpRequest`将让您检索远程数据，但这将检索整个文件，而不是前几个字节。做任何更花哨的事情都需要服务器端助手，例如 PHP 脚本或类似的。

您还应该知道，某些 HTTP 服务器无论如何都不允许您从输出中检索一定范围的字节——它们总是会返回整个文件。因此，即使使用 curl 或 wget 的 PHP 脚本，您也可能无法使其适用于所有远程站点：

[是否可以使用 Linux 命令从 HTTP 服务器仅读取前 N 个字节？](https://stackoverflow.com/questions/5787213/is-it-possible-to-read-only-first-n-bytes-from-the-http-server-using-linux-comma)

（上面涵盖了命令行 curl，但结论是广泛适用的。）

**编辑**：Sergiu 指出将`Range`标头添加到 an`XMLHttpRequest`将起作用，至少对于某些服务器（范围标头对于 HTTP 1.1 是可选的）。但是，跨域图像检索仍需要进一步的支持，例如 CORS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:58:16.033

SO还有其他类似的问题。喜欢[这个](https://stackoverflow.com/questions/9093152/retrieving-binary-data-in-javascript-ajax)。
它可能会帮助您将图像读取为二进制数据。

您将需要读取整个图像，而不仅仅是前几个字节。这是 JavaScript 的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T00:23:23.943

您可以为此使用 XMLHttpRequest：

*   使用[Range](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)请求标头指定您只需要几个字节
*   如果浏览器支持[跨域](http://www.w3.org/TR/cors/)请求，那么您甚至可以请求在其他站点上找到的图像，否则您只能使用您的服务器
*   如果浏览器足够新，您甚至可以将响应作为[ArrayBuffer](http://www.khronos.org/registry/typedarray/specs/latest/)访问，以将单个字节作为字节访问，而不是作为字符访问

这对我有用：

```
var request = new XMLHttpRequest();
request.open('GET', '/download/logo.png');
request.setRequestHeader('Range', 'bytes=0-5');
request.responseType = 'arraybuffer'
request.addEventListener('load', function() {
  console.log(new Uint8Array(request.response));
});
request.send(); 
```

# jenkins - Jenkins Post 构建部署

> ID：11962449
> 
> 赞同：5
> 
> 时间：2012-08-14T23:46:33.053
> 
> 标签：jenkins, jenkins-plugins

我在我的项目中使用 Jenkins CI，我能够成功构建项目，并且在每次成功构建后在容器中部署它都没有问题。现在我有一个条件，即只有在发布属性文件发生更改时，才必须对容器进行部署。如果发布属性文件没有更改，则必须构建项目，但不应进行部署。

由于我是 Jenkins 的新手，我正在尝试所有选项，我相信一定有人遇到过类似的情况，请分享您的想法或想法。万一我发现了什么我会发布它。

非常感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T07:43:30.723

如果这仍然没有回答！

这可以使用 Script Trigger 插件轻松完成。这允许您运行 shell/批处理脚本，并根据该脚本的退出代码执行构建。

您可以跟踪属性文件的最后修改日期，如果它发生更改，那么您可以继续构建，否则在更改发生之前不会有任何构建。

希望这会有所帮助（如果现在需要的话；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T13:01:09.873

您应该在 Jenkins 中安装“**构建后脚本插件**”。上一个答案是提到一个不再可用的插件。

然后您可以添加子构建步骤，例如执行 shell 脚本

[![看截图](../Images/62eaa0cd39c29f2ef58850e049b80713.png)](https://i.stack.imgur.com/5C9Xa.png)脚本

您还可以发布 Docker 容器等。

# c - （为什么）使用未初始化的变量未定义的行为？

> ID：11962457
> 
> 赞同：94
> 
> 时间：2012-08-14T23:47:42.797
> 
> 标签：c, undefined-behavior, initialization

如果我有：

```
unsigned int x;
x -= x; 
```

很明显，在这个表达式之后`x` *应该*为零，但是无论我看哪里，他们都说这段代码的*行为*是未定义的，而不仅仅是`x`（直到减法之前）的值。

两个问题：

*   这段代码的*行为*是否确实未定义？
    （例如，代码可能会在兼容的系统上崩溃[或更糟]？）

*   如果是这样，***为什么***C 说*行为*未定义，而这里很清楚`x`应该为零？

    即在这里不定义行为有 什么*好处？*

显然，编译器可以简单地在变量中使用它认为“方便”的*任何*垃圾值，它会按预期工作......这种方法有什么问题？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-08-15T07:13:13.717

是的，这种行为是未定义的，但原因与大多数人所知道的不同。

首先，使用未初始化的值本身并不是未定义的行为，但该值只是不确定的。如果该值恰好是该类型的陷阱表示，那么访问它就是 UB。无符号类型很少有陷阱表示，所以在这方面你会相对安全。

使行为未定义的原因是变量的附加属性，即它“可以用`register`”声明，即它的地址永远不会被占用。此类变量被特殊处理，因为有些架构具有真正的 CPU 寄存器，这些寄存器具有一种“未初始化”的额外状态，并且与类型域中的值不对应。

*编辑：*标准的相关短语是 6.3.2.1p2：

> 如果左值指定了一个可以使用寄存器存储类声明的具有自动存储持续时间的对象（从未使用过它的地址），并且该对象未初始化（未使用初始化程序声明并且在使用之前没有对其进行分配)，行为未定义。

为了更清楚起见，以下代码在任何情况下*都是*合法的：

```
unsigned char a, b;
memcpy(&a, &b, 1);
a -= a; 
```

*   这里取`a`和的地址`b`，所以它们的值只是不确定的。
*   由于`unsigned char`从不存在不确定值只是未指定的陷阱表示，因此任何值都`unsigned char`可能发生。
*   最后`a` *必须*保持值`0`。

*Edit2：* `a`并`b`具有未指定的值：

> 3.19.3 **unspecified value**
> 相关类型的有效值，本国际标准对在任何情况下选择哪个值没有要求

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-15T00:51:07.330

C 标准为编译器提供了很大的自由度来执行优化。如果您假设一个天真的程序模型，其中未初始化的内存被设置为某种随机位模式并且所有操作都按照它们写入的顺序执行，那么这些优化的后果可能会令人惊讶。

*注意：以下示例仅有效，因为`x`它的地址从未被占用，因此它是“类寄存器”。`x`如果类型有陷阱表示，它们也是有效的；对于无符号类型很少出现这种情况（它需要“浪费”至少一位存储空间，并且必须记录在案），对于`unsigned char`. 如果`x`具有带符号的类型，则实现可以将不是介于 -(2 ^(n-1) -1) 和 2 ^(n-1) -1 之间的数字的位模式定义为陷阱表示。请参阅[Jens Gustedt 的回答](https://stackoverflow.com/a/11965368)。*

编译器尝试将寄存器分配给变量，因为寄存器比内存快。由于程序使用的变量可能比处理器拥有的寄存器多，编译器执行寄存器分配，这导致不同的变量在不同的时间使用同一个寄存器。考虑程序片段

```
unsigned x, y, z;   /* 0 */
y = 0;              /* 1 */
z = 4;              /* 2 */
x = - x;            /* 3 */
y = y + z;          /* 4 */
x = y + 1;          /* 5 */ 
```

评估第 3 行时，`x`还没有初始化，因此（编译器的原因）第 3 行必须是某种侥幸，由于编译器不够聪明而无法弄清楚的其他条件，所以不会发生这种侥幸。由于`z`在第 4 行之后不使用，`x`也不在第 5 行之前使用，因此两个变量可以使用同一个寄存器。所以这个小程序被编译成对寄存器进行如下操作：

```
r1 = 0;
r0 = 4;
r0 = - r0;
r1 += r0;
r0 = r1; 
```

的最终值`x`是 的最终值`r0`， 的最终值`y`是 的最终值`r1`。这些值是 x = -3 和 y = -4，而不是 5 和 4，如果`x`正确初始化会发生这种情况。

对于更详细的示例，请考虑以下代码片段：

```
unsigned i, x;
for (i = 0; i < 10; i++) {
    x = (condition() ? some_value() : -x);
} 
```

假设编译器检测到`condition`没有副作用。由于`condition`不修改`x`，编译器知道循环的第一次运行不可能被访问`x`，因为它还没有初始化。因此循环体的第一次执行相当于`x = some_value()`，不需要测试条件。编译器可能会编译此代码，就像您编写的一样

```
unsigned i, x;
i = 0; /* if some_value() uses i */
x = some_value();
for (i = 1; i < 10; i++) {
    x = (condition() ? some_value() : -x);
} 
```

这可以在编译器内部建模的方式是考虑任何依赖的值只要未初始化就`x`具有*方便的值。*`x`因为未定义变量时的行为，而不是仅具有未指定值的变量，所以编译器不需要跟踪任何方便值之间的任何特殊数学关系。因此编译器可以这样分析上面的代码：

*   在第一次循环迭代期间，被评估`x`的时间未初始化。`-x`
*   `-x`具有未定义的行为，因此它的值是方便的。
*   优化规则适用，因此此代码可以简化为.`*condition* ? *value* : *value*``*condition*; *value*`

当遇到您问题中的代码时，同一个编译器会分析，在`x = - x`评估时， 的值`-x`是方便的。因此可以优化分配。

我还没有寻找表现如上所述的编译器的示例，但它是优秀编译器尝试做的那种优化。遇到一个我不会感到惊讶。这是您的程序崩溃的编译器的一个不太合理的示例。（如果你在某种高级调试模式下编译你的程序，这可能不是那么令人难以置信。）

这个假设的编译器将每个变量映射到不同的内存页面并设置页面属性，以便从未初始化的变量中读取会导致调用调试器的处理器陷阱。对变量的任何赋值首先确保其内存页被正常映射。此编译器不会尝试执行任何高级优化——它处于调试模式，旨在轻松定位诸如未初始化变量之类的错误。评估时`x = - x`，右侧会导致陷阱并且调试器会启动。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-14T23:50:05.610

是的，程序可能会崩溃。例如，可能存在可能导致 CPU 中断的陷阱表示（无法处理的特定位模式），未处理的中断可能会使程序崩溃。

> （C11 后期草案中的 6.2.6.1 说）某些对象表示不需要表示对象类型的值。如果对象的存储值具有这样的表示形式并且由不具有字符类型的左值表达式读取，则行为未定义。如果这种表示是由不具有字符类型的左值表达式修改对象的全部或任何部分的副作用产生的，则行为是未定义的。50) 这种表示称为陷阱表示。

（此解释仅适用于`unsigned int`可以具有陷阱表示的平台，这在现实世界的系统中很少见；请参阅评论以获取详细信息以及对导致标准当前措辞的替代和可能更常见原因的参考。）

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-15T00:54:54.910

（此答案针对 C 1999。对于 C 2011，请参阅 Jens Gustedt 的答案。）

C 标准并没有说使用未初始化的自动存储持续时间的对象的值是未定义的行为。C 1999 标准在 6.7.8 10 中说，“如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。” （本段继续定义静态对象是如何初始化的，所以我们关心的唯一未初始化的对象是自动对象。）

3.17.2 将“不确定值”定义为“未指定的值或陷阱表示”。3.17.3 将“未指定值”定义为“相关类型的有效值，其中本国际标准对在任何情况下选择哪个值没有要求”。

因此，如果未初始化`unsigned int x`的具有未指定的值，则`x -= x`必须产生零。这就留下了它是否可能是一个陷阱表示的问题。根据 6.2.6.1 5，访问陷阱值确实会导致未定义的行为。

某些类型的对象可能具有陷阱表示，例如浮点数的信号 NaN。但是无符号整数是特殊的。根据 6.2.6.2，unsigned int 的 N 个值位中的每一个表示 2 的幂，并且值位的每个组合表示从 0 到 2 ^N -1 的值之一。因此，无符号整数只能由于其填充位（例如奇偶校验位）中的某些值而具有陷阱表示。

如果在您的目标平台上，unsigned int 没有填充位，则未初始化的 unsigned int 不能有陷阱表示，并且使用它的值不会导致未定义的行为。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-08-14T23:50:30.957

是的，它是未定义的。代码可能会崩溃。C 说行为是未定义的，因为没有特定的理由对一般规则做出例外。其优点与所有其他未定义行为的情况相同——编译器不必输出特殊代码即可使其工作。

> 显然，编译器可以简单地在变量中使用它认为“方便”的任何垃圾值，它会按预期工作......这种方法有什么问题？

为什么你认为这不会发生？这正是所采取的方法。编译器不需要让它工作，但它不需要让它失败。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-11-18T10:35:28.130

对于任何类型的任何变量，未初始化或由于其他原因保持不确定值，以下适用于读取该值的代码：

*   如果变量具有自动存储持续时间***并且***没有获取其地址，则代码始终会调用未定义的行为 [1]。
*   否则，如果系统支持给定变量类型的陷阱表示，代码总是调用未定义的行为 [2]。
*   否则，如果没有陷阱表示，则变量采用未指定的值。不能保证每次读取变量时这个未指定的值都是一致的。但是，它保证不是陷阱表示，因此保证不会调用未定义的行为 [3]。

    然后可以安全地使用该值而不会导致程序崩溃，尽管这样的代码不能移植到具有陷阱表示的系统。

* * *

[1]：C11 6.3.2.1：

> 如果左值指定了一个可以使用寄存器存储类声明的具有自动存储持续时间的对象（从未使用过它的地址），并且该对象未初始化（未使用初始化程序声明并且在使用之前没有对其进行分配)，行为未定义。

[2]：C11 6.2.6.1：

> 某些对象表示不需要表示对象类型的值。如果对象的存储值具有这样的表示形式并且由不具有字符类型的左值表达式读取，则行为未定义。如果这种表示是由不具有字符类型的左值表达式修改对象的全部或任何部分的副作用产生的，则行为是未定义的。50) 这种表示称为陷阱表示。

[3] C11：

> 3.19.2
> indeterminate value
> 未指定的值或陷阱表示
> 
> 3.19.3
> unspecified value
> 相关类型的有效值，其中本国际标准对在任何情况下选择哪个值没有要求
> 注：未指定的值不能是陷阱表示。
> 
> 3.19.4
> 陷阱表示
> 不需要表示对象类型值的对象表示

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-08T16:51:56.553

虽然许多答案都集中在捕获未初始化寄存器访问的处理器上，但即使在没有此类陷阱的平台上也可能出现古怪的行为，使用没有特别努力利用 UB 的编译器。考虑代码：

```
volatile uint32_t a,b;
uin16_t moo(uint32_t x, uint16_t y, uint32_t z)
{
  uint16_t temp;
  if (a)
    temp = y;
  else if (b)
    temp = z;
  return temp;  
} 
```

对于像 ARM 这样的平台的编译器，除了加载和存储之外的所有指令都在 32 位寄存器上运行，可能会以等同于以下方式合理地处理代码：

```
volatile uint32_t a,b;
// Note: y is known to be 0..65535
// x, y, and z are received in 32-bit registers r0, r1, r2
uin32_t moo(uint32_t x, uint32_t y, uint32_t z)
{
  // Since x is never used past this point, and since the return value
  // will need to be in r0, a compiler could map temp to r0
  uint32_t temp;
  if (a)
    temp = y;
  else if (b)
    temp = z & 0xFFFF;
  return temp;  
} 
```

如果任一 volatile 读取产生非零值，则 r0 将加载 0...65535 范围内的值。否则它将产生调用函数时所持有的任何值（即传递给 x 的值），这可能不是 0..65535 范围内的值。该标准缺少任何术语来描述类型为 uint16_t 但其值超出 0..65535 范围的值的行为，除非说任何可能产生此类行为的操作都会调用 UB。

# javascript - 对 URL 发表评论

> ID：11962458
> 
> 赞同：1
> 
> 时间：2012-08-14T23:47:46.953
> 
> 标签：javascript, facebook-graph-api, facebook-comments

> **可能重复：**
> [如何使用 Graph API 将新评论发布到社交评论框中？](https://stackoverflow.com/questions/7827480/how-can-i-post-new-comment-with-graph-api-into-social-comments-box)

我正在尝试向页面 URL 发布评论，以便使用图形 API 重现评论小部件功能。虽然我可以获得现有评论的 post_fbid 并对其进行回复，但我无法发布到页面本身。我试过使用`comments_fbid`（`link_stat`表）和对象`id`（`object_url`表），都返回`An unknown error has occurred.`错误消息。

这个问题已经在[这里](https://stackoverflow.com/questions/7827480/how-can-i-post-new-comment-with-graph-api-into-social-comments-box/7896452#7896452)和[这里](http://facebook.stackoverflow.com/questions/7634674/post-a-comment-against-a-url)问过，但如果不可能，我想明确知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:23:34.537

目前这似乎是不可能的。这是跟踪问题的 FB 错误：

[https://developers.facebook.com/bugs/164794086987157](https://developers.facebook.com/bugs/164794086987157)

# xcode - 如何在 Xcode 中打断一个句子

> ID：11962464
> 
> 赞同：1
> 
> 时间：2012-08-14T23:48:33.370
> 
> 标签：xcode, line, break

我是新手，也是编码新手。我正在开发一个测验应用程序，这是其中的一行代码：

```
[questions addObject:@"When was the Declaration of Independence signed?"];
[answer addObject:@"1776"]; 
```

但是当我测试它时，问题太长了，所以它使文本变得特别小，我怎样才能让它一半下降到下一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:14:59.953

有几个选择。

最基本的是“硬编码”换行符，这不是最好的选择，但我会拼写出来，以便您了解区别：这涉及通过添加“换行符”将问题分成两行" 代码 (\n) 在问题中您希望换行符开始的位置。例如：

```
[questions addObject:@"When was the Declaration\nof Independence signed?"]; 
```

这既不灵活也不自适应，无论您是使用 Interface Builder 来配置显示文本的对象（UILabel 或 UITextView 或其他类），文本的第二行都可能会消失，因为它低于可见区域集-创建 UILabel 或 UITextView 时启动。这种方法也违背了最佳实践，因为它混淆了数据的显示。您的数据没有任何问题。

更好的选择是仅使用显示文本的对象 - 无论如何您都需要这样做。我将在这里使用 UILabel 作为示例，但是 UILabel 和 UITextView 对象都具有您可以通过编程方式或在 Interface Builder 中设置的属性，这将有效地使它们不仅可以拉伸其显示区域而不是缩小您的文本，还可以包装您的文本根据显示区域的新大小，在最合乎逻辑的点。

以编程方式，首先确保您的 UILabel 对象的行数设置为 0：

```
textLabel.numberOfLines = 0; 
```

如果您在界面构建器中创建了 UILabel，您也可以在其中执行此操作。

如果这不起作用，则可能是其他设置不正确 - 检查 UILabel 的指标以确保您没有以任何方式“锁定”它的大小（它的自动增长或自动收缩的能力基于其内容的大小）。

# java - 为什么 log4j 消息没有显示在控制台中？

> ID：11962469
> 
> 赞同：2
> 
> 时间：2012-08-14T23:50:10.973
> 
> 标签：java, spring, debugging, model-view-controller, log4j

我在 spring mvc 应用程序中使用 logj4。我正在我的 tomcat 6 服务器上的日志中工作，我收到以下消息：

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly. 
```

在 tom cat 服务器上的标准输出文件中。我希望在访问方法和对象时能够看到消息。这就是我使用 log4j 的方式：

```
class ...

private final Logger logger = Logger.getLogger(getClass()); 

logger.info("My message here"); 
```

出于某种原因，我在日志中没有看到任何消息，并且我看到了上述警告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:02:39.603

听起来您还没有为您的应用程序正确设置日志记录。

尝试查看[Google 搜索错误](https://www.google.com/search?q=log4j:WARN+No+appenders+could+be+found+for+logger+(org.springframework.web.context.ContextLoader).+log4j:WARN+Please+initialize+the+log4j+system+properly.)的前几个结果，特别是[有关设置 web.xml](https://stackoverflow.com/questions/1266139/log4jwarn-no-appenders-could-be-found-for-logger-in-web-xml)的问题。

# ios - 在影片剪辑中嵌入 StageText？

> ID：11962472
> 
> 赞同：3
> 
> 时间：2012-08-14T23:50:47.890
> 
> 标签：ios, actionscript-3, flash, air

是否可以在 MovieClip 中嵌入 StageText？

我在一个页面中添加了大约 20 个 StageText 实例（每个页面都是一个 MovieClip），我希望所有这些文本字段与 MovieClip 一起移动、淡入淡出等。现在，当我淡出 MovieClip 时，StageText 仍然存在，我必须通过脚本单独删除它们。

这是我用来添加 StageText 的代码示例

```
var textField1:StageText = new StageText();
textField1.softKeyboardType = SoftKeyboardType.PUNCTUATION;
textField1.returnKeyLabel = ReturnKeyLabel.GO;
textField1.stage = this.stage;
textField1.viewPort = new Rectangle(800, 200, 100, 30);
textField1.text = String(0); 
```

我认为这与 stage = this.stage; 有关系。line 或者 viewPort，但是 Google 上没有太多关于 StageText 的信息，所以我找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:03:32.173

不。我认为它们只是覆盖在您的 Flash 内容之上：http: [//help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/text/StageText.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/text/StageText.html)

“使用本机输入时，StageText 对象不是显示对象，您无法将它们添加到 Flash 显示列表中。”

# python - 在 python 中：将 xpath 与列表中的元素一起使用

> ID：11962474
> 
> 赞同：1
> 
> 时间：2012-08-14T23:51:11.183
> 
> 标签：python, xml, xpath, phylogeny

在 Stackoverflow 的几个人的帮助下，我想出了以下代码：

```
import lxml.etree

f = open("PaVE.tre.xml", "r")
out = open("PaVE.2.xml", "a")
data = f.read()
line=["HPV16","Alpha"]

tree = lxml.etree.XML(data)
nsmap = {'phylo': 'http://www.phyloxml.org'}
matches = tree.xpath('//phylo:name[text()="HPV16"]', namespaces=nsmap)

for e in matches:
    #do something fun 
```

但是，我将 HPV16 硬编码到 xpath 表达式中。我想从线 [0] 中取出 HPV16。我在想类似的事情：

```
matches = tree.xpath('//phylo:name[text()='+line[0]+']', namespaces=nsmap) 
```

但是，这似乎不起作用！一如既往，任何帮助将不胜感激

编辑：我按照要求从 xml 文件中添加了几行：

```
<phyloxml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phyloxml.org" xsi:schemaLocation="http://www.phyloxml.org http://www.phyloxml.org/1.10/phyloxml.xsd">
<phylogeny rooted="true">
  <clade>
    <clade>
      <branch_length>0.5</branch_length>
      <clade>
        <name>HPV16</name>
        <branch_length>1.0</branch_length>
      </clade>
      <clade> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:56:42.533

您忘记了 XPath 表达式中的引号：

```
>>> '//phylo:name[text()='+line[0]+']'
'//phylo:name[text()=something]' 
```

我会这样做：

```
>>> '//phylo:name[text()="%s"]' % line[0]
'//phylo:name[text()="something"]' 
```

# objective-c - 如何拦截在 Objective-C 代码中读取 plist 值？

> ID：11962479
> 
> 赞同：1
> 
> 时间：2012-08-14T23:51:37.240
> 
> 标签：objective-c, ios, cordova, phonegap-plugins, urbanairship.com

我们正在为 PhoneGap 使用新的[Urban Airship iOS 插件](https://github.com/urbanairship/phonegap-ua-push)。

在插件的 plist 文件中，我们应该输入启用推送通知所需的特定于应用程序的键。

问题是我们有两个版本，免费和付费，同一个应用程序，但 plist 文件只容纳一个版本。

本质上，我们需要修改 Objective-C 代码来读取不同的 plist 值，这取决于它是免费版还是高级版。

我们目前使用相同的代码库和 Xcode 项目管理这两个版本。除非我们更改插件代码，否则我们似乎需要创建一个新的 Xcode 项目，而我们不想这样做。

我们如何调整 Urban Airship 的 Objective-C 文件以从 plsit 文件中读取不同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:25:07.750

抱歉让你久等了，我想给你一个非常详细的答案，而不是昨晚匆忙:) 所以我们开始吧。

首先在您的项目中，我们需要添加一个新目标。转到您的项目设置并右键单击您的目标。单击复制。

![复制你的目标。](../Images/d1e8afdba34655a5812a69d077d1eac8.png)

您将获得一个可能名为 Target-copy 的新目标。您还将为该目标获得一个新的 info.plist 文件。

![Xcode 会自动创建一个新的 info.plist。](../Images/880b8c6a12266262e690436ab87fa8ac.png)

接下来我们将编辑我们的专业版的内置设置。滚动或搜索并找到*Apple LLVM compiler 4.0 Preprocessing*。添加到您的调试和发布配置。我通常只使用简单的`PRO=1`. 您还需要添加`PRO=0`到您的 lite 版本，否则当您尝试构建该版本时它将未定义。

![创建自定义 PRO 预处理器。](../Images/fdad6e8826f4c401deb62bf64ee9506e.png)

现在让我们看看如何添加一个自定义 plist，我相信你会需要。首先创建两个文件夹。重要的是这些是文件夹而不是组。在每个文件夹中，我们可以创建一个具有完全相同文件名的 plist。

![向 Lite 目标添加一个。](../Images/f0d84c1170e25577c517b8f7f34505cc.png) ![向 Pro 目标添加一个](../Images/2d1fbc91c606d152eca06493d95d527f.png)

从现在开始，您可以为它们中的每一个添加一些东西。我刚刚添加了一个键`property`和一个值`pro string`/ `lite string`。最后到代码。在我制作的示例项目中，我简单地覆盖了`viewDidLoad`但显然这将在任何地方工作。由于 plist 具有相同的名称，您可以使用一行代码加载它们。它们永远不会混淆，因为它们只会被复制到各自的目标。如果你需要做基于代码级的逻辑，你可以使用`PRO`我们制作的预处理器。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // This will load the proper plist automatically.
    NSLog(@"Plist Value: %@",[[NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Property List" ofType:@"plist"]] objectForKey:@"property"]);

    // Also remember we set up a preprocessor PRO. you can use it as well.
    if (PRO) {
        NSLog(@"Only Show for Pro");
    } else {
        NSLog(@"Only Show for Lite");
    }

    NSLog(@"This will show for both");
} 
```

这是我用于所有 lite/pro 版本应用程序的方法，因此我可以共享一个公共代码库，而无需在项目或其他复杂系统之间复制它。到目前为止，它对我来说效果很好:) 快乐编码！

**来源**

想到有人可能可以使用该项目来查看，所以这里是在[GitHub 上](https://github.com/EmperiorEric/LitePro)。

# c# - 实例化和接口

> ID：11962482
> 
> 赞同：1
> 
> 时间：2012-08-14T23:52:17.500
> 
> 标签：c#, oop

我习惯于如下实例化对象：

```
type obj-name = new type(); 
```

现在我正在使用

```
IList<string> str_element = new List<string>(); 
```

我期待看到一些东西

```
IList<string> actors = new IList<string>(); 
```

有人可以给我一些想法，为什么接口实例化在这里不同？

谢谢，
阿米特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:54:08.373

接口就是这样——一个接口，或者是应该存在哪些方法的规范。
接口不包含任何实际代码。

接口只能用作包含具体类的类型。
创建一个接口的实例是没有意义的，因为没有什么可以实例化的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T23:54:37.350

你不能做的原因`= new IList<string>()`是因为`IList<T>`是一个接口，你不能初始化接口，因为没有代码体可以调用。我建议做

```
List<string> actors = new List<string>() 
```

反而。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T00:42:50.003

接口定义了实现类必须（至少）提供的契约或功能集。通过定义一个 type 变量`IList<T>`，你实际上是在说，“我不在乎实际的实现是什么，它只需要提供那个功能。” 这意味着您将调用代码中的“接口”和“实现”分开，这是一件好事。

接口的真正力量在于您拥有可插入的代码。如果您正在定义一个库，而不是返回一个`List<T>`实例，您可以返回一个`IList<T>`实例（AFAIK，这是 LINQ 功能所做的）。这允许您更改返回对象的内部实现（它可能是链表、B-Tree 或其他），并且调用代码不需要更改。

那里的许多模拟库（例如 NMock、Moq 等）利用接口并可以生成用于测试目的的实现类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T23:57:04.443

您可以使用 LINQ：例如

这将为您提供更具体的类型。

```
using System.Linq;

IList<Foo> list = new List<Foo>();
IEnumerable<Foo> sortedEnum = list.OrderBy(f=>f.Bar);
IList<Foo> sortedList = sortedEnum.ToList() 
```

# php - 处理具有大量字段的表单的最佳方法是什么？

> ID：11962483
> 
> 赞同：0
> 
> 时间：2012-08-14T23:52:30.283
> 
> 标签：php, data-structures

我正在为一个项目制作一些表格，我很怀疑我是否使用了最好的数据结构，问题是我必须放置一些表格，每个表格都有 150-230 个字段，每个字段都不一样，并具有用户选择，写入或上传文件的选项，一旦检查了所有需要的字段都已填写，我必须保存在我的数据库中，仍然花费我太多时间检查提交文件中的所有字段（我正在使用 PHP ) 然后将其保存在我的数据库中。

有没有什么好方法可以使用一种数组或更好或更健壮的东西来实现这种形式？

谢谢

# oracle11g - 使用另一个表中的值更新 Oracle 表

> ID：11962486
> 
> 赞同：0
> 
> 时间：2012-08-14T23:53:43.013
> 
> 标签：oracle11g

我有两个表 ORDERS 和 ORDER_TEMP，它们的结构相同。ORDER_ID 是两个表中的主键。

现在，我必须从 ORDER_TEMP 表中的值更新 ORDER 表中的 KEY_ID 列。

这两个表中都有超过百万条记录。

```
UPDATE ORDER  
SET KEY_ID = ( SELECT KEY_ID FROM ORDER_TEMP WHERE  ORDER_TEMP.ORDER_ID = ORDER.ORDER_ID and ORDER_TEMP.PNP_GROUP=99) 
```

如果我在 ORDER 表上放置一个 where 子句并为一个订单运行它，它确实可以工作，但是当我为整个表执行此操作时，它会永远运行并且它不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:31:32.277

假设您的意图是仅更新`ORDER`表中匹配`ORDER_TEMP`且不同的表中的那些行`KEY_ID`，并忽略无效表名这一事实`ORDER`，我将首先确保您只更新少于 20表中您希望修改的行的百分比

```
UPDATE ORDER  
   SET KEY_ID = ( SELECT KEY_ID 
                    FROM ORDER_TEMP 
                   WHERE ORDER_TEMP.ORDER_ID = ORDER.ORDER_ID 
                     and ORDER_TEMP.PNP_GROUP=99) 
 WHERE EXISTS( SELECT 1
                 FROM order_temp
                WHERE ORDER_TEMP.ORDER_ID = ORDER.ORDER_ID 
                  and ORDER_TEMP.PNP_GROUP=99
                  and order_temp.key_id != order.key_id) 
```

如果`KEY_ID`可以`NULL`在任一表中，则需要调整`EXISTS`子句中的不等式比较。

如果这不能解决问题，我们将需要从当前查询计划和可用索引开始的更多信息。

# jsf - 如何使用 Omnifaces Converter 将 selectOneMenu 中的对象保存到数据库中？

> ID：11962488
> 
> 赞同：2
> 
> 时间：2012-08-14T23:53:57.107
> 
> 标签：jsf, primefaces, converter, omnifaces

我在使用带有 primefaces selectOneMenu 的 OmniFaces 转换器时遇到问题。我在具有单元内编辑功能的 primefaces 数据表中显示部门列表，一列显示部门名称，而另一列显示教员名称。编辑时，selectOneMenu 正确显示了一个可供选择的学院列表，但在提交时不会保存，当我删除数据表中的学院列时，部门名称保存没有问题，有人帮我找出为什么我不能保存教师姓名。

这是我的数据表代码

```
<p:dataTable id="deptTable" var="department"
        value="#{departmentMB.departmentList}" editable="true"
        rowIndexVar="rowIndex">

        <p:ajax event="rowEdit" listener="#{departmentView.onEdit}"
            update=":deptForm:messages" />

        <p:column headerText="Name">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{department.departmentName}" />
                </f:facet>
                <f:facet name="input">
                    <h:inputText value="#{department.departmentName}" />
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Faculty">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{department.faculty.facultyName}" />
                </f:facet>
                <f:facet name="input">
                    <p:selectOneMenu id="iterator"
                        value="#{departmentMB.selectedFaculty}"
                        converter="facultyConverter" label="Faculty">
                        <f:selectItem itemLabel="Select one" noSelectionOption="true" />
                        <f:selectItems value="#{facultyMB.facultyList}" var="faculty"
                            itemLabel="#{faculty.facultyName}" itemValue="#{faculty}" />
                    </p:selectOneMenu>
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column>
            <p:rowEditor />
        </p:column>

    </p:dataTable> 
```

这是部门主管

```
@ManagedBean(name = "departmentMB")
@RequestScoped
public class DepartmentController implements Serializable {

@ManagedProperty(value = "#{DepartmentService}")
IDepartmentService departmentService;

private static final long serialVersionUID = 1L;

private int department_id;
private String departmentName;
private Faculty selectedFaculty;
.
.
.//getters and setters 
```

这是 onEdit 方法 public void onEdit(RowEditEvent event) {

```
 try {
        Department department = (Department) event.getObject(); 
        DepartmentController departmentController = (DepartmentController) FacesContext
                .getCurrentInstance().getExternalContext().getRequestMap()
                .get("departmentMB");

        departmentController.updateDepartment(department);

    } catch (Exception e) {
        e.printStackTrace();

    }
} 
```

这是更新方法 - 使用休眠 save() 方法

```
public void updateDepartment(Department department) {
    try {
        getDepartmentService().updateDepartment(department);

    } catch (DataAccessException e) {
        e.printStackTrace();
    }

} 
```

最后是我的 OmniFaces 转换器

```
@FacesConverter("facultyConverter")
public class FacultyConverter extends SelectItemsConverter {
@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    Integer id = (value instanceof Faculty) ? ((Faculty) value).getFacultyId() : null;
    return (id != null) ? String.valueOf(id) : null;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:00:22.817

在 中`<p:selectOneMenu>`，您需要在当前迭代的行上设置选定的教师，而不是在父支持 bean 上。

换句话说，替换

```
<p:dataTable ... value="#{departmentMB.departmentList}" var="department">
    ...
    <p:selectOneMenu ... value="#{departmentMB.selectedFaculty}"> 
```

经过

```
<p:dataTable ... value="#{departmentMB.departmentList}" var="department">
    ...
    <p:selectOneMenu ... value="#{department.faculty}"> 
```

这个具体问题与转换器进一步无关。它的工作做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:58:36.767

错误的问题。JSF 是一个表示框架，它不处理存储/业务逻辑。

在您的支持 bean 中，适当的方法应该负责存储，但它会忽略您的 bean 来自哪里。您可以手动 (JDBC) 或使用 ORM 框架 (Hibernate, JPA)

顺便说一句，如果你的问题是“为什么选择的对象没有存储在`departmentMB.selectedFaculty`？”，你的转换器没有实现`getAsObject()`

# r - NLME 回归的限制？

> ID：11962492
> 
> 赞同：3
> 
> 时间：2012-08-14T23:54:10.743
> 
> 标签：r, mathematical-optimization

我目前正在使用`nlme`执行混合效果回归。

我想通过为调用中的参数提供上限和下限来执行约束优化`nlme`。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-15T19:24:58.773

如果您将上限定义为与传递给 的参数`upper_bounds`的向量长度相同的向量，则可以通过以下方式设置上限：`start``nlme``nlmeControl()`

```
nlme(..., control = nlmeControl(opt = "nlminb", upper = upper_bounds)) 
```

提出问题时这可能是不可能的，但它在`nlme`版本 3.1.137 中有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:04:57.603

您可以在 R 中的混合效应回归中设置估计值的上限和下限。R 在混合模型分析方面拥有丰富的资源。[此](http://cran.r-project.org/doc/contrib/Fox-Companion/appendix-mixed-models.pdf)链接解释了混合模型的概念，并使用`nlme`.

您也可以参考[这篇](http://r.789695.n4.nabble.com/nlsList-nlme-control-of-min-and-max-parameter-bounds-td1746242.html)文章来使用`nlme`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T03:01:40.877

这里有两种简单的方法，不会弄乱 nlme 参数：1) 在边界上拟合一组模型并选择最适合的模型，以及 2) 使用参数的转换版本，将实数映射到所需的区间。

# httpclient - 使用 libev 的异步 HttpClient

> ID：11962501
> 
> 赞同：0
> 
> 时间：2012-08-14T23:55:44.453
> 
> 标签：httpclient, libevent, libev

我正在使用 libebb (http://tinyclouds.org/libebb/) 和 libev 编写一个 Web 服务器。我正在寻找一个使用 libev 事件循环的异步 httpclient。

我希望它支持 Http 1.1（流水线、keep-alives 等）。

我希望这不是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:47:58.997

这是我使用 libev 和 C++ 制作的 HTTP 客户端：

[https://github.com/jspotter/evhttpclient](https://github.com/jspotter/evhttpclient)

随意拉/贡献。

# c++ - C ++在类中设置引用变量，然后更改

> ID：11962506
> 
> 赞同：0
> 
> 时间：2012-08-14T23:57:03.630
> 
> 标签：c++

假设我有一个类 Foo ，它的引用变量类型为 Bar 和一个构造函数，如下所示：

富.h：

```
class Foo {
  public:
    Bar& m_b;

    Foo(Bar& b);
} 
```

Foo.cpp

```
Foo::Foo(Bar& b) : m_b(b) {
} 
```

在一个单独的课程中，我有：

```
// global 
Bar b; 
Foo f(b);

int main() {   
  b.setData();       // actually set some values...
  f.m_b.showData();  // will it show the change?
  return 0; 
} 
```

调用 setData() 后 f 中的引用变量是否也会发生数据变化？我正在尝试这种解决方法，因为我有一个具有引用变量的类（必须在初始化期间设置），但我需要它可以全局访问（在实际设置 Bar 中的数据之前声明）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:59:04.427

是的。`f.mb`并且`b`都指的是同一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:59:12.627

是的，它会的。引用只是一个别名。`f::m_b`并且`b`是*完全相同的对象*。

# qt4 - QML Loader 内存泄漏？

> ID：11962513
> 
> 赞同：4
> 
> 时间：2012-08-14T23:58:05.310
> 
> 标签：qt4, qml, qt-mobility

我的应用程序开始消耗大量内存。第一个镜头是 MNG 动画缓存，但看起来它们只是不共享。因此，我在构造函数/析构函数中创建了一个带有调试打印的 TestItem，当通过视频停止信号更改其源时，我看到 Loader 不工作属性：

```
import QtQuick 1.1
import QtMultimediaKit 1.1

Rectangle {
    id:root
    width: 800
    height: 480

    Video {
        id: video1
        anchors.fill: parent
        source: "test.mp4" 
        onStopped: {
            loader1.source= "Test2.qml";
        }
    }
    Loader {
        id:loader1
        onSourceChanged: {
            console.debug("source changed to "+source)
        }
    }
    MouseArea {
        anchors.fill: parent
        onPressed: {
            loader1.source= "Test1.qml";
            video1.play();
        }
    }
} 
```

因此，当我单击 4 次时，我会得到如下控制台输出：

```
TestItem(0x1b4fc00) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test1.qml
TestItem(0x2047ba0) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test2.qml
TestItem(0x2046720) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test1.qml
~ TestItem(0x2047ba0) 
TestItem(0x2050560) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test2.qml
TestItem(0x204fad0) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test1.qml
~ TestItem(0x2050560) 
TestItem(0x2051e40) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test2.qml
TestItem(0x2051330) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test1.qml
~ TestItem(0x2051e40) 
TestItem(0x2052e90) 
source changed to file:///opt/Test/qml/TestLoaderBug/Test2.qml 
```

当我关闭我的应用程序时，所有剩余的对象都被删除：

```
~ TestItem(0x1b4fc00) 
~ TestItem(0x2046720) 
~ TestItem(0x204fad0) 
~ TestItem(0x2051330) 
~ TestItem(0x2052e90) 
```

为什么 onStopped 信号会产生这样的行为？有什么解决办法吗？

在 Ubuntu 12.04 上使用 libqt4-declarative（版本：4:4.8.1-0ubuntu4.2）和 libdeclarative-multimedia（版本：1.2.0-1ubuntu2）进行测试。

# php - PHP 验证和隐藏的下拉框

> ID：11962515
> 
> 赞同：0
> 
> 时间：2012-08-14T23:58:29.607
> 
> 标签：php, codeigniter

我有一个占位符值输入框，`display:none;`由于它受 jQuery 控制，因此设置为页面加载，并显示占位符下拉框何时选择为是。

我的问题是我已经对表单使用了 Codeigniter 验证，如果表单上有错误，页面会重新加载占位符下拉框状态是，但占位符值输入框消失。

我最好的选择是创建一个 callback_ 函数，该函数基本上说明是否选择了显示输入框？

**jQuery：**

```
 $("#add_fields_placeholder").change(function()
    {
        if($(this).val() == "yes")
    {
        $('label[for="add_fields_placeholderValue"]').show();
        $("#add_fields_placeholderValue").show();
    }
    else
    {

        $('label[for="add_fields_placeholderValue"]').hide();
        $("#add_fields_placeholderValue").hide();
    }
        }); 
```

**看法：**

```
<label for="add_fields_placeholder">Placeholder: </label>
<select name="add_fields_placeholder" id="add_fields_placeholder">
    <option value="">Please Select</option>
    <option value="yes" <?php echo set_select('add_fields_placeholder','yes', ( !empty($placeholderType) && $placeholderType == "yes" ? TRUE : FALSE ));?>>Yes</option>
    <option value="no" <?php echo set_select('add_fields_placeholder','no', ( !empty($placeholderType) && $placeholderType == "no" ? TRUE : FALSE ));?>>No</option>
</select>

<label for="add_fields_placeholderValue">Placeholder Text: </label>
<input type="text" name="add_fields_placeholderValue" id="add_fields_placeholderValue" value="<?php echo set_value('add_fields_placeholderValue'); ?>"> 
```

**控制器验证：**

```
$this->form_validation->set_rules('add_fields_placeholder', 'Placeholder', 'trim|required|xss_clean|callback_dropdown_check');

$this->form_validation->set_rules('add_fields_placeholderValue', 'Placeholder Text','trim|xss_clean'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:04:56.920

当页面加载时，您需要触发`add_fields_placeholder`. 只需确保选择了 yes 选项。代码将类似于：

```
function initChangeEvent() {
  $("#add_fields_placeholder").change(function() {
    if($(this).val() == "yes") {
        $('label[for="add_fields_placeholderValue"]').show();
        $("#add_fields_placeholderValue").show();
    } else {
        $('label[for="add_fields_placeholderValue"]').hide();
        $("#add_fields_placeholderValue").hide();
    }
  });
}

$(function(){
  initChangeEvent();
  $("#add_fields_placeholder").trigger('change');  
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:27:52.333

您也可以将此代码放在 document.ready 函数中。它会工作

```
if( $("#add_fields_placeholder").val() == "yes")
{
    $('label[for="add_fields_placeholderValue"]').show();
    $("#add_fields_placeholderValue").show();
}
else
{

    $('label[for="add_fields_placeholderValue"]').hide();
    $("#add_fields_placeholderValue").hide();
}
    }); 
```

# android - Android - 检测 Wifi 是否需要浏览器登录

> ID：11962518
> 
> 赞同：16
> 
> 时间：2012-08-14T23:58:42.673
> 
> 标签：android, wifi, android-wifi

我的大学有一个开放的 wifi 接入点，但是它要求您输入您的电子邮件，然后才能使用网络。我的问题是 Wifi 很愚蠢，因为它似乎断开了我的连接并迫使我每 10 分钟再次输入我的电子邮件。

我想创建自己的应用程序，我可以使用它来自动为我执行此步骤，但我似乎找不到任何文档来检测 Wifi 接入点是否具有浏览器登录页面。Android 中有没有办法获取这些信息，或者只是看看我与某物的连接是否总是重定向到 1.1.1.1？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T00:06:44.080

[请参阅`HttpUrlConnection`文档](http://developer.android.com/reference/java/net/HttpURLConnection.html)的“处理网络登录”部分：

> 某些 Wi-Fi 网络会阻止 Internet 访问，直到用户单击登录页面。此类登录页面通常使用 HTTP 重定向来呈现。您可以使用 getURL() 来测试您的连接是否被意外重定向。此检查在收到响应标头后才有效，您可以通过调用 getHeaderFields() 或 getInputStream() 来触发。

他们在那里有一段示例代码。这是否会覆盖您的特定 WiFi AP，我不能说，但值得一试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-16T17:36:57.010

Ping 外部 IP 地址（如 google.com）以查看它是否响应。

```
 try {
        Runtime runtime = Runtime.getRuntime();
        Process proc = runtime.exec("ping -c 1 " + "google.com");
        proc.waitFor();     
        int exitCode = proc.exitValue();
        if(exitCode == 0) {
            Log.d("Ping", "Ping successful!";
        } else {
            Log.d("Ping", "Ping unsuccessful.");
        }
    } 
    catch (IOException e) {}
    catch (InterruptedException e) {} 
```

唯一的缺点是，当 WiFi 接入点上根本没有互联网连接时，这也表明需要 Web 登录。

@CommonsWare 我相信这是一个比打开 UrlConnection 并检查主机更好的答案，因为即使显示重定向页面，主机也不总是改变。例如，我在 Belkin 路由器上进行了测试，它保留了您在浏览器中键入的内容，但仍显示自己的页面。urlConnection.getUrl().getHost() 因此返回它应该返回的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-01T22:05:00.177

我认为@FlyWheel 是在正确的道路上，但我会使用[http://clients1.google.com/generate_204](http://clients1.google.com/generate_204)如果你没有得到 204，你知道你在一个俘虏门户后面。您可以循环运行此程序，直到获得 204，在这种情况下，您知道您不再位于强制门户后面。

@FlyWheel 写道：唯一的缺点是这也表明当 WiFi 接入点上根本没有互联网连接时需要进行网络登录。

您可以通过将接收器注册到 android.net.conn.CONNECTIVITY_CHANGE 来解决此问题。您可以通过查看连接的请求者状态来检查 Wifi 是否已打开并已连接。

这是一个片段，但我没有运行它：

```
WifiManager wm = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
WifiInfo wifiInfo = wm.getConnectionInfo();
SupplicantState suppState = wifiInfo.getSupplicantState();

if (wm.isWifiEnabled()) {
   if (suppState == SupplicantState.COMPLETED){
      // TODO - while loop checking generate_204 (FlyWheels code)Using intent service.
   }
} 
```

我不记得 SupplicantState 是 COMPLETED 还是 ASSOCIATED，你必须检查一下。您应该使用 IntentService 来检查 generate_204，因为广播接收器的生命周期很短。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-25T11:21:32.667

我使用谷歌的`204`端点使用了以下代码。

```
 private boolean networkAvailable() {

        ConnectivityManager mManager = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        if(mManager != null) {
            NetworkInfo activeNetwork = mManager.getActiveNetworkInfo();
            if(activeNetwork== null || !activeNetwork.isConnectedOrConnecting()){
                return false;
            }
        }

        OkHttpClient client = new OkHttpClient();

        Request request = new Request.Builder()
                .url("http://clients1.google.com/generate_204")
                .build();
        try {
            Response response = client.newCall(request).execute();
            if(response.code() != 204)
                return  false; // meaning it either responded with a captive html page or did a redirection to captive portal.
            return true;
        } catch (IOException e) {
            return true;
        }
    } 
```

包括 Google Chrome 在内的许多应用程序都使用[http://clients1.google.com/generate_204](http://clients1.google.com/generate_204)来验证连接未在强制门户下锁定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T10:57:04.017

问题可能是 - 至少在今天 - 较新的 Android 版本（5.1+？）保持 3G/4G 连接正常运行，直到 wifi 登录实际上导致功能齐全的 wifi 连接。

我没有尝试过，但也许使用s`CAPTIVE_PORTAL_CHECK`的枚举值可以尝试正确检测这种模式？`NetworkInfo`[`DetailedState`](https://developer.android.com/reference/android/net/NetworkInfo.DetailedState.html)

# ios - 如何检测用户何时点击 MKMapView 上当前选定的图钉？

> ID：11962520
> 
> 赞同：1
> 
> 时间：2012-08-14T23:58:57.000
> 
> 标签：ios, mkmapview

MKMapView 提供了 didSelectAnnotationView: 方法来报告用户第一次点击 pin 的时间。这样做的结果是显示地图标注。我需要让用户通过再次点击图钉来关闭地图标注。

不幸的是，didSelectAnnotationView: 方法不会在用户点击已选中的图钉时触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:43:37.320

这是一种非标准行为，会让您的用户感到困惑。通常，在引脚区域外轻敲会取消选择引脚。

如果你真的想这样做，你可以利用两个非常靠近的引脚（或在完全相同的位置）通过两次轻敲连续选择的事实。你可以在真品后面放一个假别针，它不会显示标注。我不确定这到底是如何工作的。您需要让两个引脚相互了解，以便顶部的引脚始终显示标注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T19:50:32.470

我遇到了类似的问题，因为它`MKMapView`的选择模型与我的应用程序要求不太匹配。为了解决这个问题，我们需要一种方法来识别注释视图上的点击，即使它们已经被选中。我们可以通过`UITapGestureRecognizer`在委托方法中为每个注解视图添加一个来实现这一点`mapView:viewForAnnotation:`

根据您的交互模型，您可能需要使用 来完全驱动您的 UI `UITapGestureRecognizer`，而不是使用`mapView:didSelectAnnotationView:`和`mapView:didDeselectAnnotationView:`例如，我使用地图视图作为用户选择器。因此，选择用户应该转到下一个视图控制器，即使该用户已经被选中。选择仅向用户提供视觉反馈。

```
- (MKAnnotationView*)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKPinAnnotationView *annotationView = [self.mapView dequeueReusableAnnotationViewWithIdentifier:@"pinAnnotationIdentifier"];

    if (annotationView == nil)
    {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation
                                                             reuseIdentifier:kSPUserAnnotationViewMapViewReuseIdentifier];

        // need to be able to select annotations that are already selected;
        UITapGestureRecognizer* tapRecognizer = [[UITapGestureRecognizer alloc]
                                          initWithTarget:self action:@selector(annotationViewTapped:)];
        [annotationView addGestureRecognizer:tapRecognizer];
    } 

    return annotationView;
}

- (void)annotationViewTapped:(id)sender
{
    UITapGestureRecognizer *tapRecognizer = (UITapGestureRecognizer*) sender;

        MKPinAnnotationView *userView = (MKPinAnnotationView*) tapRecognizer.view;
        [self userSelected:(MyUserModel*) userView.annotation];
    }
} 
```

# javascript - 如何纹理球体的不规则平面？

> ID：11962522
> 
> 赞同：8
> 
> 时间：2012-08-14T23:59:04.007
> 
> 标签：javascript, textures, three.js

我想为 THREE.js 球体的每个面赋予它自己的纹理。所以我让 SphereGeometry 计算顶点并使用面的顶点将每个面转换为 PlaneGeometry。

```
THREE.SpherePlaneGeometry = function ( v1, v2, v3, v4 ) {

  THREE.Geometry.call( this );

  var normal = new THREE.Vector3( 0, 1, 0 );

  this.vertices.push( v1.clone() );
  this.vertices.push( v2.clone() );
  this.vertices.push( v3.clone() );
  this.vertices.push( v4.clone() );

  var face = new THREE.Face4( 0, 1, 2, 3 );

  face.normal.copy( normal );
  face.vertexNormals.push( normal.clone(), normal.clone(), normal.clone(), normal.clone() );

  this.faces.push( face );

  var uvs = [
    new THREE.UV( 1.0, 0.0 ),
    new THREE.UV( 0.0, 0.0 ),
    new THREE.UV( 0.0, 1.0 ),
    new THREE.UV( 1.0, 1.0 ),
  ];
  this.faceVertexUvs[ 0 ].push( uvs );

}; 
```

确保所有这些都在稍后使用返回的几何图形运行：

```
geometry.computeCentroids();
geometry.computeFaceNormals();
geometry.verticesNeedUpdate = true;
geometry.uvsNeedUpdate = true;
geometry.normalsNeedUpdate = true;
geometry.tangentsNeedUpdate = true;
geometry.elementsNeedUpdate = true;
geometry.dynamic = true; 
```

通过应用此纹理：

![质地](../Images/d61dc19951e58ef6fdd79826321407f0.png)

我得到了这个结果：

![领域](../Images/2b4604285d0db8c97652fca8c345e045.png)

可以做些什么来消除红点和绿点之间的失真？对于极点，一个顶点使用两次，但它可能会更好，知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:34:13.870

这是一个棘手的问题。我们的纹理映射仍然是仿射的。

![废话](../Images/b0b486042c9142e7a0e0e98639e7bccd.png)

在某些时候，我们需要尝试使用透视正确的纹理映射。我在某处读过一些关于插值的东西`w`……但我不确定这是否能解决你的问题。

为了简化问题...查看纹理映射图像中的仿射映射四边形。想象一下，您将左上角的顶点移动到右上角。通过这样做，您基本上将左三角形变成了一条从左下角到右上角的简单线。这基本上意味着你不会看到它。因为直角三角形的顶点尚未移动，所以三角形仍然存在，可见，UV 已分配给每个顶点。

所以我能想到的唯一解决方案是：

1.  为这些多边形添加一层细分。
2.  对于这些可能的情况，具有特殊的预校正纹理（使用画布或 Photoshop）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T20:45:03.823

这里有几个问题。

首先，您不需要将几何体的每个面都转换为平面几何体——除非出于某种原因您想要这样做。您可以在下面的 Fiddles 中看到如何处理这个问题。

其次，您的问题是您的紫外线设置。

这是一个 Fiddle ( [http://jsfiddle.net/PBjEE/](http://jsfiddle.net/PBjEE/) )，显示了与您类似的问题。我使用了更简单的几何形状，但和你的一样，四边形面是梯形。在小提琴中，我按照你的方法将每个面的 UV 设置为纹理的角，(0,1)、(0,0)、(1,0) 和 (1,1)。结果是一个扭曲的圆圈。

这是另一个 Fiddle ( [http://jsfiddle.net/PBjEE/1/](http://jsfiddle.net/PBjEE/1/) )，通过更改 UV 坐标来消除失真。

UV 坐标必须定义一个与面部具有相同比例的梯形。

# c - 如何将版权符号写入 GB2312 编码的文件？

> ID：11962526
> 
> 赞同：2
> 
> 时间：2012-08-15T00:00:14.720
> 
> 标签：c, gb2312

我想将版权符号写入 pdf 文件的页脚。八进制代码 \251 仅在文件的编码为拉丁文时才有效。（英文）当输出pdf为中文、日文、韩文时。符号印刷完全不同。我已经知道输出文件具有 GB2312 编码，版权符号的代码是两个字节字符 \0xAAC2 。

我一直在试图找出我应该如何打印它？我必须在 sprintf 之前将其转换为 utf16 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:46:37.053

如果您使用的是 sprintf 我认为您可以这样做：

```
unsigned char one = 0xAA;
unsigned char two = 0xC2;
char output_line[20];
sprintf(output_line,"%c%c",one,two); 
```

或者，如下所示：

```
sprintf(output_line,"\xaa\xc2"); 
```

# vb.net - VBScript - 等待进程完成，然后再转到另一行

> ID：11962528
> 
> 赞同：0
> 
> 时间：2012-08-15T00:00:21.570
> 
> 标签：vb.net, vbscript

我使用 Visual Basic 脚本来更改 Windows 7 中的 IP 地址。无论如何在visual basic.net中设置它必须等待vbscript完成才能继续嵌套线？

谢谢

# c# - EntityFramework Code First 对属性 getter/setter 做了什么？

> ID：11962532
> 
> 赞同：11
> 
> 时间：2012-08-15T00:00:57.900
> 
> 标签：c#, .net, entity-framework, ef-code-first

在使用 Code First 时，EntityFramework 究竟做了什么来映射具有自定义 getter 和 setter 的属性？

它是否只是在序列化时调用属性的getter，而在反序列化时调用setter？所以我可以做一些愚蠢的事情，比如......

```
public class Foo {

    public DateTime TimeAccessed {
        get {
            return DateTime.Now;
        }
        set {
            TimeDeserialized = DateTime.Now;
        }
    }

    [NotMapped]
    public DateTime TimeDeserialized { get; private set; }
} 
```

**请注意**，我对使用上述代码或类似代码没有实际兴趣……仅用于说明目的。

此外，当使用 Code First 映射属性时，是否所有的 getter 和 setter 都需要是`public`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T00:04:47.683

是的; EF 确实调用了 getter 和 setter。
EF 实际上不可能以任何其他方式工作。

不; 他们甚至可以是私人的。（尽管财产本身必须是公共的）

# ruby-on-rails - 不知道为什么 MongoMapper 不能处理 Has And Belongs to Many 关系

> ID：11962537
> 
> 赞同：3
> 
> 时间：2012-08-15T00:01:48.917
> 
> 标签：ruby-on-rails, mongodb, yaml, mongomapper, has-and-belongs-to-many

这充满了问题，与我所见过的 SQL 不同。我只是想创建一个 HABTM 关系并使对象相互匹配。

**我的两个模型**

```
class Word
  include MongoMapper::Document         

  many :topics

  key :word, String

end

class Topic
  include MongoMapper::Document         

  many :words

  key :name, String

end 
```

该模型单独工作允许我创建对象并将它们关联。我喜欢 Mongo 的部分原因。

然后我尝试像这样获取一些示例 yaml：

```
Music I Dig:
  reggae:
    bob marley
    isaac hayes
    groundation
  classical:
    philip glass
    bach 
```

并尝试用这个 Rakefile 解析它：

```
File.open(Rails.root + 'lib/words/disgusting_glass_full_of.yml', 'r') do |file|
  YAML::load(file).each do |topic, word_types|
    puts "Adding #{topic}.."
    @temp_topic = Topic.create name: topic

    @temp_words = word_types.map { |type, words|
      words.split(' ').map{ |word| 
        @word = Word.create type: type, word: word
        @word.topics << @temp_topic
      }
    }
    @temp_topic.words << @temp_words.flatten
  end
end 
```

我不骗你，这是我见过的最随机、最混乱的输出。2 创建的实际主题数量为空且没有数据。有些主题有关联，有些已经完成。词也一样。有些单词会随机产生关联，而有些则不会。关于它是如何得出这个结果的，我根本找不到任何联系。

我相信问题在于我如何设置模型（也许？）。如果没有，我将抛出 mongo_mapper 并尝试 Mongoid。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:57:23.220

首先，您需要指定 word_ids 和 topic_ids 是模型中的数组属性：

```
 class Topic
    include MongoMapper::Document         

    many :words, :in => :word_ids
    key :word_ids, Array
    key :name, String
  end

class Word
  include MongoMapper::Document         

  many :topics, :in => :topic_ids
  key :topic_ids, Array
  key :word, String

end 
```

您还必须确保在您的 rake 任务中保存您的主题和单词：

```
task :import => :environment do
  File.open(Rails.root + 'lib/test.yml', 'r') do |file|
    YAML::load(file).each do |topic, word_types|
      puts "Adding #{topic}.."
      temp_topic = Topic.create name: topic
      temp_words = []
      word_types.map do |type, words|
        words.split(' ').map do |word|
          word = Word.create type: type, word: word
          word.topics << temp_topic
          word.save
          temp_words << word
        end
      end
      temp_topic.words << temp_words.flatten
      temp_topic.save
    end
  end  
end 
```

这给了我以下输出：

```
{
    "_id" : ObjectId("502bc54a3005c83a3a000006"),
    "topic_ids" : [
        ObjectId("502bc54a3005c83a3a000001")
    ],
    "word" : "groundation",
    "type" : "reggae"
}
{
    "_id" : ObjectId("502bc54a3005c83a3a000007"),
    "topic_ids" : [
        ObjectId("502bc54a3005c83a3a000001")
    ],
    "word" : "philip",
    "type" : "classical"
}  ....etc 
```

和

```
{
    "_id" : ObjectId("502bc54a3005c83a3a000001"),
    "word_ids" : [
        ObjectId("502bc54a3005c83a3a000002"),
        ObjectId("502bc54a3005c83a3a000003"),
        ObjectId("502bc54a3005c83a3a000004"),
        ObjectId("502bc54a3005c83a3a000005"),
        ObjectId("502bc54a3005c83a3a000006"),
        ObjectId("502bc54a3005c83a3a000007"),
        ObjectId("502bc54a3005c83a3a000008"),
        ObjectId("502bc54a3005c83a3a000009")
    ],
    "name" : "Music I Dig"
} 
```

# c# - 在 C# 中是否有直接读取属性（而不是必须循环通过 PropertyNames）

> ID：11962538
> 
> 赞同：1
> 
> 时间：2012-08-15T00:01:52.007
> 
> 标签：c#, directoryservices

我有以下代码：

```
// Create a DirectorySearcher object.
DirectorySearcher mySearcher = new DirectorySearcher(entry);
mySearcher.SearchScope = SearchScope.Base;

// Use the FindOne method to find the user object.
SearchResult resEnt = mySearcher.FindOne();

foreach(string propKey in resEnt.Properties.PropertyNames)
{
   foreach (var property in resEnt.Properties[propKey])
   {
       Console.WriteLine("{0}:{1}", propKey, property.ToString());
   }
} 
```

这很好用，但我只需要获得一个名为“mail”的属性。无论如何我可以只读取一个属性而不必循环。我正在寻找这样的东西：

```
var emailAddress =  resEnt.Properties["mail"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:05:55.353

你可能想要：

```
string emailAddress = (string)resEnt.Properties["mail"][0]; 
```

请注意，您可能需要在此处进行一些检查以确保存在有效的“邮件”属性：

```
var mailProps = resEnt.Properties["mail"];
string emailAddress = mailProps.Count > 0 ? (string)mailProps[0] : string.Empty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:05:38.137

**更新工作**

您的示例将返回单个属性。问题是返回的是一个集合。我建议做

```
// Or String if you know it's always a string
var mailCollection = resEnt.Properties["mail"].Cast<Object>(); 
var emailAddress = mailCollection.FirstOrDefault(); 
```

如果使用`FirstOrDefault`它将返回第一个值或 null。如果您使用`Single`，或者`[0]`您必须事先执行验证步骤，或者捕获在没有返回结果时抛出的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:11:16.463

将强制转换操作与 LINQ 结合使用以获取第一个对象。

```
var email = resEnt.Properties["mail"].Cast<object>.FirstOrDefault(); 
```

# actionscript-3 - 如何从实现相同控件的多个不同 swc 创建多个对象？

> ID：11962539
> 
> 赞同：0
> 
> 时间：2012-08-15T00:02:03.957
> 
> 标签：actionscript-3, flash, user-interface

我正在尝试创建 3 个不同的对象，每个对象都是从不同的 swc 加载的。每个 swc 使用相同的 fl.controls.ComboBox，在运行时我收到一个错误，提示无法从 MovieClip 转换为 ComboBox。

我尝试在链接类型中将库的发布设置更改为“外部”，但这迫使我将整个库包含到项目中，这大大增加了其可执行文件的大小。

在不同的 swc 上使用 fl.controls.ComboBox（或任何其他类型的控件）而不会出现代码冲突的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:36:33.330

我不明白你的问题。因为常识最好的情况是只有组件在单个 SWC 中附加库，并且以编程方式使组合框是正常的。

我你看完整的源代码和.fla 清楚地解决了，但我想你的问题如下。

你把SWC中的每个组合框都换行了吗？区分每个个体的SWC，从组合框中是参考以下过程。例如，存在三种SWC。
如果假设数字 1 是城市选择组合框，数字 2 是有趣的选择组合框，数字 3 是生日组合框。您应该转换为 CityComboBox、SelectionComboBox、BirthdayComboBox 电影剪辑，一旦在崩溃中使用，则不会发生。你必须遵循代码。

```
private var comboBox0:CityComboBox;
private var comboBox1:SelectionComboBox;
private var comboBox2:BirthdayComboBox;
private var cityComboBox:ComboBox;
private var selectionComboBox:ComboBox;
private var birthdayComboBox:ComboBox;

public function Constructor()
{
   comboBox0 = new CityComboBox();
   .
   .
   .
   cityComboBox = comboBox0.getChildAt(0) as ComboBox;
} 
```

![在此处输入图像描述](../Images/671a04d65a4ac48c1ca291e2531fec46.png)

![在此处输入图像描述](../Images/666f97e3228ba5f82ff3fb13e6eb6291.png)

* * *

ps

> 以我的经验，除非你创建一个每个 SWC 映射每个 Class，否则 SWC 不需要被分成每个。（当然，根据情况不同的方式是。）如果你是一个单一的 SWC，在一个电影剪辑或在你脑海中创建的组件库整洁且不存在崩溃。如果问题很简单，您知道哪一部分。因为它们都在一个地方 DisplayObject, Naming, Linkage 这样的崩溃是可以避免的。

# php - 查询从 Oracle 导入到 MySQL 返回空对象

> ID：11962544
> 
> 赞同：0
> 
> 时间：2012-08-15T00:03:03.927
> 
> 标签：php, mysql, oracle

我使用 php 将数据从 oracle 数据库插入到 mysql 数据库，而不是插入和更新，但我有一个奇怪的行为。表 oracle 有 20851 条记录。

问题是，在记录 x 中，对 mysql 的查询返回了一个空的结果对象，但在 MySQL 上执行的相同查询返回了带有数据的对象。

使用以下代码，我可以将数据从 oracle 插入和更新到 mysql。

```
$stid = oci_parse($conn, 'SELECT * FROM B_PROGRAMA_EVALUACION_BIPS'); //oracle db
oci_execute($stid); //oracle db

while ($row = oci_fetch_array($stid, OCI_ASSOC+OCI_RETURN_NULLS)) {

$sql = "select ID_ITEM, ID_PROGRAMA from B_PROGRAMA_EVALUACION_BIPS WHERE ID_ITEM=".$row['ID_ITEM']." AND ID_PROGRAMA=".$row['ID_PROGRAMA'];

$result = $db->query($sql);
$rows = mysqli_fetch_array($result);

if ($rows['ID_ITEM'] == $row['ID_ITEM'] && $rows['ID_PROGRAMA'] == $row['ID_PROGRAMA'])      {
    $sql = "UPDATE B_PROGRAMA_EVALUACION_BIPS SET ID_PROGRAMA='".$row['ID_PROGRAMA'] . "', ANO='" . $row['ANO'] . "', COPIA='" . $row['COPIA'] . "', TIPO_PROGRAMA_ER='"
            . $row['TIPO_PROGRAMA_ER'] . "', EVALUACION='".mysqli_real_escape_string($db, $row['EVALUACION'])."', ID_CARACTERICACION='".$row['ID_CARACTERICACION']."', NOTA='".$row['NOTA']."' WHERE ID_ITEM=".$row['ID_ITEM'];

} else {
    $sql = "INSERT INTO B_PROGRAMA_EVALUACION_BIPS VALUES('".$row['ID_PROGRAMA'] . "','" . $row['ANO'] . "','" . $row['COPIA'] . "','"
            . $row['ID_ITEM'] . "','".$row['ID_CARACTERICACION']."','".mysqli_real_escape_string($db, $row['EVALUACION'])."','".$row['TIPO_PROGRAMA_ER']."','".$row['NOTA']."')";
}

$result = $db->query($sql); 

if ($result != 1) {
    $resultado['B_PROGRAMA_EVALUACION_BIPS'] = $resultado['B_PROGRAMA_EVALUACION_BIPS'] + 1;
} 
```

}

如果我在第二个执行查询中删除此行，则第一个查询将完美运行。

```
$result = $db->query($sql); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:17:29.077

您应该在值周围添加单引号：

```
$sql = "select ID_ITEM, ID_PROGRAMA from B_PROGRAMA_EVALUACION_BIPS WHERE ID_ITEM='".$row['ID_ITEM']."' AND ID_PROGRAMA='".$row['ID_PROGRAMA']"'"; 
```

# javascript - 从返回的数据 ajax 帖子创建变量

> ID：11962547
> 
> 赞同：0
> 
> 时间：2012-08-15T00:03:36.013
> 
> 标签：javascript, ajax

我希望将从 ajax 帖子返回的数据放入 javascript 变量中，然后我可以在其中运行 if 语句检查该变量是否等于 true。但是，Firebug 告诉我变量 verify 没有定义。如何在 ajax 帖子中编写函数以设置数据以正确验证？代码如下。

```
$.post('ajax_file.php', 
{
user_id: user_id,    
band_term: band_term
}, function (data) {
var verify = data;              

if (verify == 'true') 

   {

   $('#request_form').hide();                  

   $('#where_to_go').hide();                            

   $('#change_form').show();                                    

}}); 
```

ajax 文件在成功时返回 true，在失败时返回 false。

```
if (mysql_query($sql) == true)

{ echo 'true';} else {echo 'false';} 
```

Firebug 向我显示 ajax 文件返回字符串 true，所以我知道 ajax 文件正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:05:32.257

这是因为 verify 是在回调函数中创建的。此外，该变量在该函数之外不可见。

要对 AJAX 调用返回的数据进行操作，请在回调函数中进行。

```
$.post('ajax.php', {
    user_id: user_id,
    term: term
}, function (data) {
    var verify = data;      //assuming data is just true or false
    if (verify === 'true') {
        unnecessary code
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T02:29:56.027

问题出在几个地方。首先，如何在 .php 文件中输出数据。您应该在 ajax 请求上返回 JSON 并接受 JSON。看这个例子：

```
<?php
    $variable = array("stat" => true, "data" => array(10, 10));
    print_r(JSON_Encode($variable));
?> 
```

这将输出：

```
{"stat":true,"data":[10,10]} 
```

然后在你的 JS 上你会做：

```
$.post('ajax_file.php', {
   user_id: user_id,    
   band_term: band_term
}, function (data) {
   //Data is the whole object that was on the response. Since it's a JSON string, you need to parse it back to an object.

   data = JSON.parse(data);

   if (data.stat === true){
      $('#request_form').hide();                  
      $('#where_to_go').hide();                            
      $('#change_form').show();                                    
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:31:49.653

回调函数里面定义的变量与文档的范围不匹配。

要使其真正起作用，只需在脚本开头的任何位置定义它，如下所示：

```
var verify;

$.post('ajax.php', 
{
user_id: user_id,
term: term
}, 
function (data) 
{
    verify = data;    // then also remove the word var from your code here.  

       if (verify == 'true') 
       {unnecessary code}         
}
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T00:17:38.943

-i 不会对 ajax 使用 j 查询（我发现 getdata 更好，但回调变量需要传递给下一个函数，即。如果您要将 alert(data) 作为回调，请在此处执行 if 语句。

我也遇到了类似的问题。在我的 php 响应中使用诸如 1 或 0 之类的数字有很大帮助，我只是使用 js 来确定实际的字符串或警报输出是什么

# c++ - 创建 Pthreads C++

> ID：11962550
> 
> 赞同：0
> 
> 时间：2012-08-15T00:03:48.840
> 
> 标签：c++, pthreads

我正在设计重制俄罗斯方块，需要一个与输入函数同时运行的计时器函数。我正在使用 pthreads 来实现这一点，但是当我调用

`pthread_create(&timer, NULL, Timer(), NULL);`

`pthread_create()`我收到一个错误，声称尽管包含`<pthread.h>`在我的标题中，但没有匹配的调用函数。

我注意到另一个人[在这里](https://stackoverflow.com/questions/10389384/no-matching-function-call-to-pthread-create)问了几乎相同的问题。但是，我设法在另一台计算机上成功地创建了 pthread，而没有做任何建议给那个人的事情。

以下是我遇到问题的源代码。我不是要求你重写它，而是告诉我出了什么问题。我将进行研究以修复我的代码。

```
#include <pthread.h>
#include <iostream>
#include <time.h>

void *Timer(void) { //I have tried moving the asterisk to pretty much every
                    //possible position and with multiple asterisks. Nothing works

    time_t time1, time2;

    time1 = time(NULL);

    while (time2 - time1 <= 1) {
        time2 = time(NULL);
    }

    pthread_exit(NULL);
}

int main() {

    pthread_t inputTimer;

    pthread_create(&inputTimer, NULL, Timer(), NULL); //Error here

    return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:05:36.327

您需要传递`Timer`函数的地址，而不是返回值。因此

```
pthread_create(&inputTimer, NULL, &Timer, NULL); // These two are equivalent
pthread_create(&inputTimer, NULL, Timer, NULL); 
```

`pthread_create`期望它的第三个参数具有以下类型`void *(*)(void*)`：即采用单个参数`void*`并返回的函数`void*`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:05:43.910

您需要传递`pthread_create`您希望它调用的函数的地址，而不是您希望它调用的函数的返回值：

```
pthread_create(&inputTimer, NULL, Timer, NULL); 
```

此外，您的函数必须具有以下签名`void* (void*)`，因此必须将其更改为：

```
void *Timer(void*) {
    time_t time1, time2;
    time1 = time(NULL);
    while (time2 - time1 <= 1) {
        time2 = time(NULL);
    }
    pthread_exit(NULL);
} 
```

# c++ - 如何获取当前目录中的所有文件名？

> ID：11962554
> 
> 赞同：1
> 
> 时间：2012-08-15T00:04:51.740
> 
> 标签：c++, file, rename

我的目标是构建一个程序，重命名当前工作目录中的所有文件，使它们没有任何空格、任何特殊字符或任何重音字符（例如 É 将变为 E）。我打算用`int rename(const char *oldname, const char *newname);`. 我的问题是如何获取当前工作目录中的文件？我想将我正在创建的可执行文件放在一个包含错误名称的文件的文件夹中，然后运行它，所有文件都被重命名。

平台独立的解决方案会更好，否则我使用的是 Windows 7 Enterprise 32bit。

这个问题不是重复的，因为我不知道`opendir ("c:\\src\\");`它的路径是从哪个目录执行程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:09:27.163

这是一个示例代码：

[http://bytes.com/topic/c/answers/869208-list-files-directory](http://bytes.com/topic/c/answers/869208-list-files-directory)

本质上，您使用这些 API：`FindFirstFile`和`FindNextFile`

有关跨平台解决方案，请参阅`findfirst()`和`findnext()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T20:03:54.323

一个选项是使用 opendir(".") ，这将打开当前目录。

# dependency-injection - MVC3 EF 工作单元 + 通用存储库 + Ninject

> ID：11962559
> 
> 赞同：4
> 
> 时间：2012-08-15T00:05:19.137
> 
> 标签：dependency-injection, entity-framework-4.1, ninject, repository-pattern, unit-of-work

我是 MVC3 的新手，一直在关注 asp.net 网站上的精彩教程。但是，我不能完全理解如何将工作单元和通用存储库模式与 Ninject 一起使用。我以本教程为起点：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns -in-an-asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

不使用接口，我知道我可以像这样实现它：

通用存储库：

```
public class GenericRepository<TEntity> : IGenericRepository<TEntity>
                                          where TEntity : class
{
    internal MyContext context;
    internal DbSet<TEntity> dbSet;

    public GenericRepository(MyContext context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }
} 
```

工作单位：

```
private MyContext context = new MyContext();
private GenericRepository<Student> studentRepository;
private GenericRepository<Course> courseRepository;

public GenericRepository<Student> StudentRepository
{
    if (this.studentRepository == null)
    {
        this.studentRepository = new GenericRepository<Student>(context);
    }
    return studentRepository;
}

public GenericRepository<Course> CourseRepository
{
    if (this.courseRepository == null)
    {
        this.courseRepository = new GenericRepository<Course>(context);
    }
    return courseRepository;
} 
```

此设置允许我将相同的上下文传递给所有存储库，然后调用单个 Save() 函数来提交更改。

我知道我可以使用接口`IGenericRepository<TEntity>`和具体实现`GenericRepository<TEntity>`，然后使用 Ninject 绑定它们：

```
kernel.Bind(typeof(IGenericRepository<>)).To(typeof(GenericRepository<>)); 
```

但是我将如何设置我的`IUnitOfWork`并`UnitOfWork`确保我的所有存储库共享一个数据库上下文？我一开始就做对了吗？我四处搜索，但似乎只找到了只使用通用存储库而没有工作单元的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T14:32:49.357

您的基础回购：

```
public class BaseRepository<TObject> : IRepository<TObject>
     where TObject : class
{

    public BaseRepository(IUnitOfWork unitOfWork)
    {
        if (unitOfWork == null) throw new ArgumentException("unitOfWork");
        UnitOfWork = unitOfWork;
    }

    protected DbSet<TObject> DbSet
    {
        get
        {
            return Context.Set<TObject>();
        }
    }

    public void Dispose()
    {
        if (sharedContext && (Context != null))
            Context.Dispose();
    }

    public virtual IQueryable<TObject> All()
    {
        return DbSet.AsQueryable();
    }

    public virtual IQueryable<TObject>
            Filter(Expression<Func<TObject, bool>> predicate)
    {
        return DbSet.Where(predicate).AsQueryable<TObject>();
    }

    public virtual IQueryable<TObject> Filter<Key>(Expression<Func<TObject, Key>> sortingSelector, Expression<Func<TObject, bool>> filter, out int total,
        SortingOrders sortby = SortingOrders.Asc, int index = 0, int size = 50)
    {
        int skipCount = index * size;
        var _resultSet = filter != null ? DbSet.Where(filter).AsQueryable() : DbSet.AsQueryable();
        total = _resultSet.Count();

        _resultSet = sortby == SortingOrders.Asc ? _resultSet.OrderBy(sortingSelector).AsQueryable() : _resultSet.OrderByDescending(sortingSelector).AsQueryable();
        _resultSet = skipCount == 0 ? _resultSet.Take(size) : _resultSet.Skip(skipCount).Take(size);
        return _resultSet;
    }

    public bool Contains(Expression<Func<TObject, bool>> predicate)
    {
        return DbSet.Count(predicate) > 0;
    }

    public virtual TObject Find(params object[] keys)
    {
        return DbSet.Find(keys);
    }

    public virtual TObject Find(Expression<Func<TObject, bool>> predicate)
    {
        return DbSet.FirstOrDefault(predicate);
    }

    public virtual TObject Create(TObject TObject, bool SaveChanges = true)
    {
        var newEntry = DbSet.Add(TObject);
        if (!sharedContext && SaveChanges)
            Context.SaveChanges();
        return newEntry;
    }

    public virtual int Count
    {
        get
        {
            return DbSet.Count();
        }
    }

    public virtual int Delete(TObject TObject)
    {
        DbSet.Remove(TObject);
        if (!sharedContext)
            return Context.SaveChanges();
        return 0;
    }

    public virtual int Update(TObject TObject, bool SaveChanges = true)
    {
        var entry = Context.Entry(TObject);
        DbSet.Attach(TObject);
        entry.State = EntityState.Modified;
        if (!sharedContext && SaveChanges)
            return Context.SaveChanges();
        return 0;
    }

    public virtual int Delete(Expression<Func<TObject, bool>> predicate)
    {
        var objects = Filter(predicate);
        foreach (var obj in objects)
            DbSet.Remove(obj);
        if (!sharedContext)
            return Context.SaveChanges();
        return 0;
    }

    /// <summary>
    /// Sets the state of an entity.
    /// </summary>
    /// <param name="entity">object to set state.</param>
    /// <param name="entityState"><see cref="EntityState"/></param>
    protected virtual void SetEntityState(object entity, EntityState entityState)
    {
        Context.Entry(entity).State = entityState;
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="entity"></param>
    protected virtual void Attach(object entity)
    {
        if (Context.Entry(entity).State == EntityState.Detached)
            Context.Entry(entity).State = EntityState.Modified;
    }

    protected virtual void Detach(object entity)
    {
        Context.Entry(entity).State = EntityState.Detached;
    }

    public void SubmitChanges()
    {
        UnitOfWork.SaveChanges();
    }

    #region Properties

    private bool sharedContext { get; set; }

    /// <summary>
    /// Unit of work controlling this repository.       
    /// </summary>
    protected IUnitOfWork UnitOfWork { get; set; }

    /// <summary>
    /// Provides access to the ef context we are working with
    /// </summary>
    internal IMyContext Context
    {
        get
        {
            return (IMyContext)UnitOfWork;
        }
    }

    #endregion
} 
```

注意 Context 是一个实现 UnitOfWork 的接口。

您的上下文界面：

```
public interface IMyContext : IDbContext
{
    DbSet<Sometype> SomeProperty { get; set; }
    ...

} 
```

您的 IDbContext 接口：

```
 public interface IDbContext
{
    DbChangeTracker ChangeTracker { get; }
    DbContextConfiguration Configuration { get; }
    Database Database { get; }

    void Dispose();
    void Dispose(bool disposing);
    DbEntityEntry Entry(object entity);
    DbEntityEntry<TEntity> Entry<TEntity>(TEntity entity) where TEntity : class;
    bool Equals(object obj);
    int GetHashCode();
    Type GetType();
    IEnumerable<DbEntityValidationResult> GetValidationErrors();
    void OnModelCreating(DbModelBuilder modelBuilder);
    int SaveChanges();
    DbSet<TEntity> Set<TEntity>() where TEntity : class;
    DbSet Set(Type entityType);
    bool ShouldValidateEntity(DbEntityEntry entityEntry);
    string ToString();
    DbEntityValidationResult ValidateEntity(DbEntityEntry entityEntry, IDictionary<object, object> items);
} 
```

然后是实际的上下文实现：

```
 public class MyContext : DbContext, IUnitOfWork, IMyContext
{
    //public MyContext()
    //{
    //    Database.SetInitializer<ReconContext>(null);
    //}

    public ReconContext()
        : base("Name=ReconContext")
    {
        ((IObjectContextAdapter)this).ObjectContext.ContextOptions.ProxyCreationEnabled = false;
    }

    public DbSet<SomeType> SomeProperty { get; set; }
    ....

    public new void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new SomePropertyMap());
        .....
        base.OnModelCreating(modelBuilder);
    }

    int IUnitOfWork.SaveChanges()
    {
        return base.SaveChanges();
    }

    void IDisposable.Dispose()
    {
        base.Dispose();
    }

    public new void Dispose(bool disposing)
    {
        base.Dispose(disposing);
    }

    public new bool ShouldValidateEntity(DbEntityEntry entityEntry)
    {
        return base.ShouldValidateEntity(entityEntry);
    }

    public new DbEntityValidationResult ValidateEntity(DbEntityEntry entityEntry, IDictionary<object, object> items)
    {
        return base.ValidateEntity(entityEntry, items);
    }

} 
```

然后在您的 ninject 配置中，您只需执行以下操作：

```
kernel.Bind<IUnitOfWork<MyContext>>().To<MyContext>().InRequestScope(); 
```

# javascript - 使用 jQuery 进行 UI/DOM 排序

> ID：11962562
> 
> 赞同：0
> 
> 时间：2012-08-15T00:05:29.663
> 
> 标签：javascript, jquery, ajax, sorting

所以，我在网上搜索了这方面的帮助......

我有一个条形图，其中条形图/值从左到右排序，最大值位于左侧。根据用户交互，条形图/值可能会发生变化，例如，中间条可能需要向左移动 1 个或多个点。这必须在不删除 DOM 元素的情况下即时完成，因为我需要为从左到右的移动设置动画……这是为了吸引用户，这对项目非常重要。

所以，我想我的问题是，既然你不能使用 DOM 元素并同时为它们设置动画，你如何跟踪运动。我玩弄了在页面加载时创建图表的初始索引并在更改时更新索引的想法。从逻辑上讲，我很难做到这一点。另外，如果要这样做，使用 data 属性进行索引的最佳方法是什么？这不是只有 HTML5 并且可能在旧浏览器中不受支持，还是 jQuery 保留了与 HTML5 无关的缓存？

我对 javascript/jQuery 相当陌生。我会说我已经使用了 2 年，但我真的只做过小型 jQuery 动画和验证。真的很喜欢社区的一些输入！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:31:28.363

你是对的，你不能通过排序来动画元素。

诀窍是使用 CSS 属性在图形空间内定位条形图，例如。`left`或`margin-left`。

然后你就有了一些东西，当以正确的方式改变时，会产生动画效果。

您需要做的就是依次循环遍历每个条，计算其新的 CSS left/margin-left 属性并使用 jQuery`.animate()`使其滑入新位置。

假设要定位的条形`margin-left`和条形的高度也需要更改，那么 jQuery 的一般形式将是：

```
$(".bars").each(function(i, bar) {
    var $bar = $(bar);
    var marginLeft = ........;//expression that calculates or fetches the new margin-left property for bar i
    var height = ........;//expression that calculates or fetches the new height property for bar i
    $bar.animate({
        'margin-left': marginLeft,
        'height': height
    );
}) 
```

无需对任何内容进行排序或使用 data 属性。

# php - PHP：严格标准：[...] 的声明应与 [...] 中的 [...] 的声明兼容

> ID：11962564
> 
> 赞同：3
> 
> 时间：2012-08-15T00:05:34.310
> 
> 标签：php, oop, reflection

我用`E_STRICT`on开发。扩展类时，有时会遇到以下致命错误...

> 严格标准：[...] 的声明应与 [...] 中的 [...] 声明兼容

...由于子方法签名与其各自的父方法签名不完全匹配。

有时，只是类的文档不准确或不是最新的（我在 PHP 的 PDO 库中遇到过这种情况）。或者，可能很少或没有文档。在任何一种情况下，下载和阅读库的 C 源代码都可能像猜测一样令人沮丧。

可以做些什么来快速解决这些错误而不抑制`E_STRICT`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T01:44:26.310

您可以使用命令行反射功能来找出预期的签名：

```
$ php --rc PDO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:05:34.310

我发现了一篇非常有用的文章，它建议使用 PHP`ReflectionClass`来内省父类的期望，这里是：[PHP – 反射类 – 确定父方法签名](http://melikedev.com/2012/07/03/php-reflection-class-determine-parent-method-signature/)。

*我在 Stack Overflow 上找不到提供此提示的答案，因此我决定使用文章的示例代码（我自己的扩展版本）提交这个自我回答的问题。*

使用此代码段了解有关您尝试扩展的类的更多信息：

```
<?php

    $className = 'PDO'; // the class you're trying to extend

    echo "<pre>\n";
    echo "CLASS : $className\n\n========\n\n";
    $refClass = new ReflectionClass($className);
    foreach ($refClass->getMethods() as $refMethod) {
        echo "METHOD : " . $refMethod->getName(). "\n\n";
        echo "getNumberOfParameters()         : " . $refMethod->getNumberOfParameters() . "\n";
        echo "getNumberOfRequiredParameters() : " . $refMethod->getNumberOfRequiredParameters() . "\n";
        echo "\n";
        foreach ($refMethod->getParameters() as $refParameter) {
            echo $refParameter . "\n";
        }
        echo "\n--------\n\n";
    }
    echo "</pre>\n";

?> 
```

`PDO`这输出，例如PHP 的类：

```
CLASS : PDO

========

METHOD : __construct

getNumberOfParameters()         : 4
getNumberOfRequiredParameters() : 3

Parameter #0 [  $dsn ]
Parameter #1 [  $username ]
Parameter #2 [  $passwd ]
Parameter #3 [  $options ]

--------

METHOD : prepare

getNumberOfParameters()         : 2
getNumberOfRequiredParameters() : 1

Parameter #0 [  $statment ]
Parameter #1 [  $options ]

--------

METHOD : beginTransaction

getNumberOfParameters()         : 0
getNumberOfRequiredParameters() : 0

[...] 
```

* * *

请注意，在链接的文章中，人们如何看到以下条目：

```
string(37) "Parameter #1 [ <optional> $cache_cb ]" 
```

我在输出中没有看到类似`<optional>`的标记（逐字使用作者的代码），无论是因为我使用的是不同版本的 PHP（PHP 5.3.13）还是与底层 PDO 库有关。怀疑我的问题可能与可选参数有关，我寻找另一种方法来使用这些方法来了解它们`getNumberOf*Parameters`（事实上我的怀疑被证明是正确的）。

* * *

当然，如果想要输出更多信息，还有[很多其他有用的反射方法。](http://php.net/manual/en/book.reflection.php)例如，通过`ReflectionMethod::isPrivate`,`ReflectionMethod::isProtected`等的方法可访问性。最后，请注意该类`ReflectionMethod`扩展`ReflectionFunctionAbstract`，因此请务必检查父类的方法。

# python - 使用从 lxml xpath 命令获得的数据填充 Python 列表

> ID：11962576
> 
> 赞同：1
> 
> 时间：2012-08-15T00:06:00.367
> 
> 标签：python, xpath, lxml

我正在从以 xml 格式提供信息的专业服务器读取仪器数据。我写的代码是： from lxml import etree as ET

```
xmlDoc = ET.parse('http://192.168.1.198/Bench_read.xml')
print ET.tostring(xmlDoc, pretty_print=True)

dmtCount = xmlDoc.xpath('//dmt')
print(len(dmtCount))

dmtVal = []

for i in range(1, len(dmtCount)):
    dmtVal[i:0] = xmlDoc.xpath('./address/text()')
    dmtVal[i:1] = xmlDoc.xpath('./status/text()')
    dmtVal[i:2] = xmlDoc.xpath('./flow/text()')
    dmtVal[i:3] = xmlDoc.xpath('./dp/text()')
    dmtVal[i:4] = xmlDoc.xpath('./inPressure/text()')
    dmtVal[i:5] = xmlDoc.xpath('./actVal/text()')
    dmtVal[i:6] = xmlDoc.xpath('./temp/text()')
    dmtVal[i:7] = xmlDoc.xpath('./valveOnPercent/text()')

print dmtVal 
```

我得到的结果是：

```
$python XMLparse2.py
<response>

<heartbeat>0x24</heartbeat>

<dmt node="1">

    <address>0x21</address>
    <status>0x01</status>
    <flow>0.000000</flow>
    <dp>0.000000</dp>
    <inPressure>0.000000</inPressure>
    <actVal>0.000000</actVal>
    <temp>0x00</temp>
    <valveOnPercent>0x00</valveOnPercent>

</dmt>

<dmt node="2">

    <address>0x32</address>
    <status>0x01</status>
    <flow>0.000000</flow>
    <dp>0.000000</dp>
    <inPressure>0.000000</inPressure>
    <actVal>0.000000</actVal>
    <temp>0x00</temp>
    <valveOnPercent>0x00</valveOnPercent>

</dmt>

</response>

...Starting to parse XML nodes
2
[]
...Done 
```

苏，什么都出不来。我尝试在 xpath 调用中使用`/value`代替`/text()`，但结果没有改变。是我的问题：

1) for 循环中的 xpath 命令不正确？或者

2) 我构造列表变量的方式有问题`dmtVal`吗？或者

3）我完全错过的其他东西？

我欢迎任何建议！提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:24:37.853

`dmtVal[i:0]`是切片的语法。
您可能想要索引：`dmtVal[i][0]`. 但这也行不通。

您通常不会遍历 python 中列表的索引，而是遍历它的元素。
所以，你会使用

```
for element in some_list: 
```

而不是

```
for i in xrange(len(some_list)):
    element = some_list[i] 
```

您处理 xpath 的方式也是错误的。

像这样的东西应该可以工作（未经测试）：

```
from lxml import etree as ET

xml_doc = ET.parse('http://192.168.1.198/Bench_read.xml')
dmts = xml_doc.xpath('//dmt')

dmt_val = []
for dmt in dmts:
    values = []
    values.append(dmt.xpath('./address/text()'))
    # do this for all values
    # making this a loop would be a good idea
    dmt_val.append(values)

print dmt_val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:25:12.180

你能解释一下吗：

```
dmtVal[i:0] 
```

如果迭代以计数开始`0`并随时间递增，那么您实际上并没有在列表中存储任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:43:10.550

计算`<dmt/>`标签然后按索引对其进行迭代既低效又不符合 Python 风格。除此之外，您使用错误的语法（切片而不是索引）来索引数组。事实上，你根本不需要索引`val`，Pythonic 方式使用列表推导。

这是 stranac 建议的稍微修改的版本：

```
from lxml import etree as ET

xmlDoc = ET.parse('http://192.168.1.198/Bench_read.xml')
print ET.tostring(xmlDoc, pretty_print=True)

response = xmlDoc.getroot()

tags = (
    'address',
    'status',
    'flow',
    'dp',
    'inPressure',
    'actVal',
    'temp',
    'valveOnPercent',
)

dmtVal = []

for dmt in response.iter('dmt'):
    val = [dmt.xpath('./%s/text()' % tag) for tag in tags]
    dmtVal.append(val) 
```

# paypal - 如何为在 Shopify 中销售订阅产品设置定期付款

> ID：11962578
> 
> 赞同：2
> 
> 时间：2012-08-15T00:06:36.120
> 
> 标签：paypal, e-commerce, payment-gateway, shopify, stripe-payments

我正在尝试建立一个销售订阅产品的 Shopify 商店，因此我需要定期付款。我知道有几个选项，例如 PayPal 或 Chargify，但还有更好的选择吗？我不确定 PayPal 的实施会有多容易（我很想对此提供反馈）而且 Chargify 真的很贵。我还尝试了 Shopify 的 Stripe 集成，但 Shopify 没有向 Stripe 发送完整的付款信息，因此我无法在 Stripe 内设置定期付款。如果有人有建议，我也对 Shopify 以外的其他产品持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:47:27.403

我不为 Chargify 或 Shopify 工作，但是...

我想你需要定义真的很贵吗？Chargify 订阅的便宜计划是每月约 120 美元……这相当于乔的平均咖啡预算。

我为客户设置了 Stripe，这样当他们使用 Stripe 付款表格在“页面”上付款时，会启动定期付款，并且客户帐户信息也会转移到 Stripe。在 Shopify 引入定期付款之前，这是一个不错的权宜之计。

# ajax - Kohana 验证客户端 ajax

> ID：11962583
> 
> 赞同：0
> 
> 时间：2012-08-15T00:08:05.963
> 
> 标签：ajax, validation, kohana

我一直在为客户端开发一个验证脚本，它使用内置的 Kohana 验证，试图以一种同时适用于客户端和服务器端的方式来完成它。到目前为止，我已经完成了服务器端的工作，但我需要一些帮助来改进我的 javascript（我的 javascript 知识不是那么好）并完成它的实现。（目前它适用于输入和文本区域）。

随机控制器：

```
 // ...
    $errors = array();

    if ($this->request->method() == 'POST')
    {
        // Post to validate/look and get the decoded array
        $validate = Request::factory('validate/look')->post($this->request->post())->execute()->body();
        $errors = json_decode($validate, TRUE);

        // Empty array, Validation OK
        if ($errors === array())
        {
            // anything u want here
        }
    } 
```

现在，验证控制器（将从任何控制器或通过 ajax 调用）：

```
class Controller_Validate extends Controller {

public function action_look()
{
    //$user = $this->user->loader() ? $this->user : NULL;

    //Validation
    $valid = Validation::factory($this->request->post())
        ->rules('name', array(
            array('not_empty'),
            array('min_length', array(':value', 10)),
            array('max_length', array(':value', 80)),
            array('regex', array(':value', '/^[\pL\pN ]++$/uD')),
            array(array($this, 'check_name')),
        ))
        ->rules('description', array(
            array('not_empty'),
        ))
        ->rule('look_tags', array($this, 'check_tags'))
    ;

    $valid->check();

    // Only get messages for the posted fields
    $resp = array_intersect_key($valid->errors('uploadlook'), $this->request->post());

    $this->response->body(json_encode($resp));
}
} 
```

这是javascript：

```
$(function(){
$('.validate').find('input,textarea').blur(function(){
    var element = $(this);
    var name = $(this).attr('name');
    var value = $(this).val();
    $.ajax({
        type: 'POST',
        url: '/comunidad/validate/look',
        data: name + '=' + value,
        success: function(e){
            e = JSON.parse(e);
            if(e.length !== 0) {
                var msg = e[name];
                var error = '<p>' + msg + '</p>';
                if (element.next().length === 0)    element.after(error);
                else                                element.next().replaceWith(error);
            } else {
                if (element.next().length) element.next().remove();
            }
        }
    });
}); 
```

});

我需要一些反馈和完成 javascript 的一点帮助 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:35:16.663

关于代码的一些反馈：验证代码应该放在一个帮助器中，并且应该只返回一个数组。然后你应该有一个使用帮助程序并输出 JSON 的 AJAX 控制器。服务器端检查应该只使用助手。那会更干净，并且当您可以返回一个数组时，服务器端的 json 编码/解码非常难看。

javascript有什么问题？

# java - 如何使用 JUnit 或 Mockito 测试匿名方法？

> ID：11962584
> 
> 赞同：9
> 
> 时间：2012-08-15T00:08:09.880
> 
> 标签：java, junit, mockito

我有简单的课程，但有匿名代码块。我需要用测试来覆盖这门课。

```
public class CleanerTask {

    private final Logger log = LoggerFactory.getLogger(getClass());
    DataWarehouseMessageDao dwMessageDao;
    int cleanerDelay = 0;
    TransactionTemplate template;

    public CleanerTask(DataWarehouseMessageDao dwMessageDao, int cleanerDelay, TransactionTemplate template) {
        this.dwMessageDao = dwMessageDao;
        this.cleanerDelay = cleanerDelay;
        this.template = template;
    }

    public void clean() {
        log.info("Cleaner started");
        final Date olderThan = new Date();
        olderThan.setDate(olderThan.getDate() + cleanerDelay);
        template.execute(new TransactionCallback<Date>() {
            @Override
            public Date doInTransaction(TransactionStatus transactionStatus) {
                dwMessageDao.deleteAllByStatusAndDate(DataWarehouseMessageStatus.SAVED.getValue(), olderThan);
                return olderThan;
            }
        });
    }
} 
```

并测试：

```
@RunWith(MockitoJUnitRunner.class)
public class CleanerTaskTest {

    final static int CLEANER_DELAY = 5;

    @Mock
    DataWarehouseMessageDao dao;

    @Mock
    TransactionTemplate template;

    CleanerTask cleanerTask;

    @Before
    public void setUp() throws Exception {
        cleanerTask = new CleanerTask(dao, CLEANER_DELAY, template);
    }

    @Test
    public void successfulScenario() {
        try {
            cleanerTask.clean();
            verify(template, times(1)).execute(isA(TransactionCallback.class));
            //that verify was not triggered    
            //verify(dao, times(1)).deleteAllByStatusAndDate(anyInt(), isA(Date.class));
        } catch (Exception e) {
            e.printStackTrace();
            fail("No exceptions must occur");
        }
    }
} 
```

> 注释行不起作用。日志：需要但未调用：dao.deleteAllByStatusAndDate( , isA(java.util.Date) ); -> 在 com.nxsystems.dw.publisher.handler.CleanerTaskTest.successfulScenario(CleanerTaskTest.java:52) 实际上，与此模拟的交互为零。
> 
> 在 com.nxsystems.dw.publisher.handler.CleanerTaskTest.successfulScenario(CleanerTaskTest.java:52) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun .reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) 在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable. java:15) 在 org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) 在 org.junit.internal 的 org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) .runners.statements.RunBefores.evaluate(RunBefores.java:28) 在 org.junit.runners.BlockJUnit4ClassRunner。runChild(BlockJUnit4ClassRunner.java:76) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners。 ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit .runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)在 org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62) 在 org.junit.runner.JUnitCore.run(JUnitCore.java:157) 在 com.intellij.rt.execution.junit.JUnitStarter。主要（JUnitStarter.java:62）

此外，当这个 tets 启动时，调试器不会进入匿名块。那么如何让 Mockito 进入匿名区块呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T00:48:59.617

## 为什么它不起作用

那么你的问题是`TransactionTemplate`你的测试是一个模拟。因此，它具有相同的界面，`TransactionTemplate`但它不知道如何表现。你负责它的实现——这就是模拟的全部意义所在。您在代码中显式调用`template.execute()`，这就是您第一次验证通过的原因。但这`execute()`不是 Spring 中的那个（或者更准确地说`template`，在您的测试中不是 Spring 的一个实例`TransactionTemplate`，它**只是**它的一个模拟） - 它是，好吧，可以说它是“空的”，因为它是在模拟上调用的，你没有告诉模拟应该如何调用`execute()`它。

## 我将如何解决它

在这种情况下，我**真的**不鼓励您进行此类单元测试，因为您正在这里测试*实现*。至少在我看来，您应该测试的是在特定条件下的**功能**含义，*当*发生**某些**事情时**，**应该会出现一些结果。这需要将其更改为集成测试（例如使用 DBUnit 或其他任何东西）并断言您是否真的删除了应该删除的内容。我的意思是你真正关心的是什么——知道某些方法被调用或者你希望的事情确实发生了？

 ******## 你怎么能，但恕我直言不应该，修复它。

但是，如果您**真的**想测试那段匿名代码，那么我只需将它（整个匿名类）提取到一个单独的类中，并为该新类编写一个单元测试，更准确地说是为它的`doInTransaction()`方法编写一个单元测试。在这种情况下，您将使用创建它`new`，在其中设置一个模拟`DataWarehouseMessageDao`并简单地执行您的`verify()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T16:23:41.103

你不应该改变你的代码，这是正确的。在您的单元测试中，而不是 isA 检查，您应该使用**ArgumentCaptor**来捕获传递的参数，验证该实例是 TransactionCallback 的类型并在其上调用 doInTransaction 方法。因此，您将能够验证是否使用预期参数调用了 dao（建议您可以使用**eq**匹配器来验证确切值）。

确实，在这个测试中，你一次要测试两件事，但这只是因为你的实现，我并不是说它是错误的。使用某些业务逻辑创建新实例总是会增加代码中的耦合，但这并不意味着我们不应该使用语言能力来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T18:12:28.273

这是处理事务模板（Java 8+）的另一种方法：

```
 TransactionTemplate transactionTemplate = mock(TransactionTemplate.class);
    when(transactionTemplate.execute(any(TransactionCallback.class)))
       .then(invocation -> ((TransactionCallback<YourReturnClass>) invocation.getArgument(0))
       .doInTransaction(any(TransactionStatus.class))); 
```

此解决方案将在此虚假交易中执行代码，您可以在之后验证答案。******

# html - 底部位置页脚正在禁止主要内容的正常滚动行为

> ID：11962586
> 
> 赞同：1
> 
> 时间：2012-08-15T00:08:20.397
> 
> 标签：html, css, sticky-footer

在这个网站设计[http://sproffer.joyatechsolutions.com/page/Pricing](http://sproffer.joyatechsolutions.com/page/Pricing)上，我使用本教程中的一些有用信息将页脚定位在底部。(http://matthewjamestaylor.com/blog/keeping-footers -在页面的底部）

但是，正如您在链接中看到的那样 - 当有更多内容时，页脚不会下推内容，而是留在同一个位置，内容就在它的下方，然后在页面底部创建空白区域。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:16:47.893

您的底部 div 位置是绝对的（在 style.css #bottom 中定义），只需将其删除并尝试它是否有效。

# sql - 必须声明标量变量@RECEIVABLESDATA

> ID：11962590
> 
> 赞同：1
> 
> 时间：2012-08-15T00:09:49.753
> 
> 标签：sql, sql-server, tsql

我有这个 SQL 代码，我用它来一次动态地插入 3 个表。当我尝试运行它时，我收到此消息

> 消息 137，级别 16，状态 1，过程 InsertData，第 28 行 必须声明标量变量“@RECEIVABLESDATA”。

有任何想法吗？

```
USE [PantaRei]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[InsertData] 
@RECEIVABLESDATA RECEIVABLESTABLE READONLY,
@DILUTIONSDATA DILUTIONSTABLE READONLY,
@ACCOUNTABLESDATA ACCOUNTABLESTABLE READONLY,
@TABLE1 VARCHAR(MAX),
@TABLE2 VARCHAR(MAX),
@TABLE3 VARCHAR(MAX)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    DECLARE @CMD nvarchar(345)

    SET NOCOUNT ON;

    SET @TABLE1 = RTRIM(@TABLE1)
    SET @TABLE2 = RTRIM(@TABLE2)
    SET @TABLE3 = RTRIM(@TABLE3)

    SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE1) +
        'SELECT * FROM [DBO].' + QUOTENAME(@RECEIVABLESDATA)

    EXECUTE sp_executesql @CMD

    SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE2) +
        'SELECT * FROM [DBO].' + QUOTENAME(@DILUTIONSDATA)

    EXECUTE sp_executesql @CMD

    SET @CMD =

        'INSERT INTO '+ QUOTENAME(@TABLE3) + 
        'SELECT * FROM [DBO].' + QUOTENAME(@ACCOUNTABLESDATA)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:33:37.787

尝试使用临时表：

```
 SELECT * INTO #t1 FROM @RECEIVABLESDATA;

  SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE1) +
        'SELECT * FROM #t1';

    EXECUTE sp_executesql @CMD 
```

[这里也是另一种](http://www.adathedev.co.uk/2010/08/passing-table-variable-into-dynamic-sql.html)方式。检查它是否适用于您的 MS SQL 版本：

```
SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE1) +
        'SELECT * FROM @RECEIVABLESDATA';

    EXECUTE sp_executesql @CMD, N'@RECEIVABLESDATA RECEIVABLESDATA READONLY', @RECEIVABLESDATA; 
```

# css - 悬停在多个并发 DIV 上

> ID：11962594
> 
> 赞同：1
> 
> 时间：2012-08-15T00:10:11.720
> 
> 标签：css, html, hover

我正在搞乱一个网站的导航，我想要三个图像漂浮在屏幕的右侧（我有）。然后，我希望能够将鼠标悬停在其中一个图像上，并在该图像旁边弹出一个菜单。我可以用一个来做到这一点，但是一旦我在垂直序列中引入下一个图像，第一个就停止工作。为什么？

我的 HTML：

```
<DIV id="parent"><a href="#issue49"><img src = "images/parent.png"></a></DIV>
<DIV id="student"><a href="#issue49"><img src = "images/student.png"></a></DIV>
<DIV id="teacher"><a href="#issue49"><img src = "images/staff.jpg"></a></DIV> 
```

`<DIV id="pnavi"> <a href="#issue49"><img src = "images/parent.png"></a></DIV>`

我的 CSS：

```
#parent {
  width: 50px;
  position: fixed;
  top: 20px;
  right: 0;
  z-index: 1;
}

#student {
  width: 50px;
  position: fixed;
  top: 70px;
  right: 0;
  z-index: 1;
}

#teacher {
  width: 50px;
  position: fixed;
  top: 120px;
  right: 0;
  z-index: 1;
}

#parent:hover + #pnavi {
  visibility: visible;
}

#pnavi {
  position: fixed;
  float: right;
  width: 100px;
  height: 50px;
  top: 20px;
  right: 0px;
  z-index: 1;
  visibility: hidden;
} 
```

如果我注释掉学生和教师 DIV，则将鼠标悬停在父显示#pnavi 上。删除评论（甚至在 DIV 之后添加一个中断），这一切都停止了。

小提琴在[这里](http://jsfiddle.net/Jas08/cqqYd/)

我目前已将后两个 DIV 注释掉，以便悬停工作（第一次使用 Fiddle，所以我希望我做得对..）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:17:05.253

使用`+`（[直接相邻组合器](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#adjacent-d-combinators)）时，每边的元素必须是相邻的兄弟。因此，就您而言，`#pnavi`必须紧跟`#parent`在标记之后（因此，在 DOM 上）。

还有一个[间接相邻的组合](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#adjacent-i-combinators)子, `~`，它只要求元素是兄弟元素，而不是直接相邻。所以你可能会使用`#parent:hover ~ #pnavi`. 不过，我不确定浏览器是否支持。它适用于我 Mac 上的 Chrome。见[演示](http://jsfiddle.net/cqqYd/1/)。

# javascript - 遍历从 JQuery XML 对象返回的子项的子项

> ID：11962595
> 
> 赞同：2
> 
> 时间：2012-08-15T00:10:13.403
> 
> 标签：javascript, jquery, xml, dom, tree

我正在尝试使用 JQuery 和 AJAX 遍历返回的 XML 文件。而且我最难弄清楚如何获取孩子的孩子并返回数据。我尝试的一切似乎都不起作用。到目前为止，我可以在数据集中获得正确数量的孩子，但是当我得到第一个孩子的孩子时，它会返回 7 个孩子，而应该有 3 个。谁能解决这个问题？

这是数据

```
<DATASET>
    <ITEM>
        <COLUMN1>A</COLUMN1>
        <COLUMN2>B</COLUMN2>
        <COLUMN3>C</COLUMN3>
    </ITEM>
    <ITEM>
        <COLUMN1>D</COLUMN1>
        <COLUMN2>E</COLUMN2>
        <COLUMN3>F</COLUMN3>
    </ITEM>
</DATASET> 
```

这是电话

```
function callAJAX(){
    var request = $.ajax({
        url: "testAjaxData.xml",
        type: "POST",
        data: {id : "paramValue"},
        dataType: "xml"
    });

    request.done(function(xml) {
        var myDoc = "";
        var tree = xml.documentElement.childNodes;

        var $kids = $(xml).find("DATASET").children()
        alert($kids.size());

        $kids.each(function(){
            var tagName=this.tagName;
            alert(tagName + " size: " + childNodes.length);
            for (var i = 0; i < this.childNodes.length; i++) {
                //alert(this.childNodes[i].value)
            }
        });

    });

    request.fail(function(jqXHR, textStatus) {
        alert( "Request failed: " + textStatus );
    });
} 
```

最终我想让它打印出来：

```
Row1: column1=[A] column2=[B] column3=[C] 
Row2: column1=[D] column2=[E] column3=[F] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:13:31.967

文本节点包含在`childNodes`包含空格的属性中，因此子节点之间的空格也算在内。

由于您使用的是 jQuery，因此您可以执行以下操作：

```
...
$kids.each(function(){
     var tagName=this.tagName;
     var cols = $(this).children();
     alert(tagName + " size: " + cols.length);
     cols.each(function() {
          //alert(this.value)
     });
});
... 
```

# c++ - 对于大于 32,767 的值，如何转换为“signed int”并返回“signed short”？

> ID：11962596
> 
> 赞同：2
> 
> 时间：2012-08-15T00:10:17.537
> 
> 标签：c++, c, variables, types, casting

**代码：**

```
typedef signed   short  SIGNED_SHORT;   //16 bit
typedef signed   int    SIGNED_INT;     //32 bit

SIGNED_SHORT x;

x = (SIGNED_SHORT)(SIGNED_INT) 45512; //or any value over 32,767 
```

**这是我所知道的：**

> 有符号 16 位：
> 有符号：从 -32,768 到 32,767
> 无符号：从 0 到 65,535

不要期望 45512`x`像`x`声明的 16 位有符号整数那样适合。

**上面的双重铸造如何以及做什么？**

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:26:08.360

```
typedef signed   short  SIGNED_SHORT;   //16 bit
typedef signed   int    SIGNED_INT;     //32 bit 
```

这些`typedef`s 并不是特别有用。typedef 只是为现有类型提供一个新名称。类型`signed short`已经有一个很好的名字：“ `signed short`”；调用它`SIGNED_SHORT`也不会给你带来任何东西。（如果它抽象出一些关于类型的信息，或者如果类型可能会改变，这将是有意义的——但是将名称`SIGNED_SHORT`用于其他类型`signed short`会*非常*混乱。）

还要注意`short`和`int`都保证*至少为*16 位宽，并且`int`至少与 一样宽`short`，但不同的大小是可能的。例如，编译器可以同时生成16 位`short`和`int`16 位 - 或 64 位。但我会假设您的编译器的大小与您所说的一样。

此外，`signed short`和`short`是相同类型的名称，与`signed int`和一样`int`。

```
SIGNED_SHORT x;

x = (SIGNED_SHORT)(SIGNED_INT) 45512; //or any value over 32,767 
```

强制转换指定到指定类型的转换。两个强制转换指定了两个这样的转换。该值`45512`转换为`signed int`，然后转换为`signed short`。

常量`45512`已经是类型`int`（的另一个名称`signed int`），所以最里面的转换是相当没有意义的。（请注意，如果`int`只有 16 位，则`45512`类型为`long`。）

当您将一种数值类型的值赋给另一种数值类型的对象时，该值会隐式转换为对象的类型，因此最外层的强制转换也是多余的。

所以上面的代码片段完全等价于：

```
short x = 45512; 
```

`int`给定系统上和的范围`short`，数学值`45512`不能用 type 表示`short`。语言规则规定这种转换的结果是实现定义的，这意味着由每个实现来确定结果是什么，并且必须记录该选择，但不同的实现可以以不同的方式进行。（实际上这还不*是*全部；1999 年的 ISO C 标准增加了对这种转换的许可，以引发实现定义的信号。我不知道有任何编译器会这样做。）

这种转换最常见的语义是结果获取源值的低位。这*可能会*导致值`-20024`被分配给`x`. 但是，如果您希望您的程序具有最大的可移植性，则不应依赖于此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T00:19:16.350

当您施放两次时，将按顺序应用施放。

```
int a = 45512;
int b = (int) a;
short x = (short) b; 
```

由于 45512 不适`short`用于大多数（但不是全部！）平台，因此这些平台上的演员表溢出。这将产生一个实现定义的信号或产生一个实现定义的值。

在实践中，许多平台将结果定义为截断值，`-20024`在这种情况下就是如此。但是，有些平台会发出信号，如果未被捕获，可能会终止您的程序。

**引文：** n1525 §6.3.1.3

> 否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T00:19:05.160

双重转换相当于：

```
short x = static_cast<short>(static_cast<int>(45512)); 
```

这相当于：

```
short x = 45512; 
```

这可能会环绕 so `x`equals `-20024`，但从技术上讲，如果你的平台上的 short 的最大值小于 45512，它是实现定义的行为。文字`45512`的类型是`int`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T00:12:58.200

您可以假设它进行了两次类型转换（尽管`signed int`并且`int`在 C 标准 IIRC 中仅分开一次）。

如果 SIGNED_SHORT 太小而无法处理 45512，则结果要么是实现定义的，要么会引发实现定义的信号。（在 C++ 中，只有前者适用。）

# html - HTML表单提交数据

> ID：11962599
> 
> 赞同：1
> 
> 时间：2012-08-15T00:10:39.167
> 
> 标签：html

我在尝试向其提交数据的远程服务器上有一个表单，示例如下

```
<html>
<head>
</head>
<form  action="http://www.example.com/post.php"  method="post">
<input type="text" name="input1" value="test1"  />
<input type="text" name="input2" value="test2"  />
<input type="submit" name="send" value="Submit" />
</form>
</body>
</html> 
```

我正在尝试像这样自动提交数据

```
<html>
<head>
</head>
<form  action="http://www.example.com/post.php"  method="post">
<input type="text" name="input1" value="test1"  />
<input type="text" name="input2" value="test2"  />
<script type="text/javascript"> 
 document.forms[0].submit(); 
</script> 
</form>
</body>
</html> 
```

如果第一个示例没有 (name="send") 名称，但它确实有名称，则它可以正常工作。我的问题是我将如何使用具有名称的输入按钮发送数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:18:33.930

注意：答案原来是`type="hidden"`代替`type="submit"`，其中第二个不允许 DOM 提交，同时还在`input`GET/POST 数据中提交该值。`type="hidden"`确实如此，并且它在这里有效，因为不需要物理单击该按钮。

* * *

选一个：

```
<form name="formname" id="formid" action="http://www.example.com/post.php" method="post">
<input type="text" name="input1" value="test1"  />
<input type="text" name="input2" value="test2"  />
<input type="submit" name="send" value="Submit" />
</form>
<script type="text/javascript">
if (confirm('Ok for "formname", Cancel for "getElementById"')) {
    console.log('document.formname.submit()');
    document.formname.submit();
} else {
    console.log('document.getElementById("formid").submit()');
    document.getElementById('formid').submit();
}
</script> 
```

[http://jsfiddle.net/userdude/EAmwj/3](http://jsfiddle.net/userdude/EAmwj/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:42:20.937

您的 JavaScript 代码将在页面加载后立即执行。这就是为什么它会立即提交。

您需要将 JS 代码包装在一个函数中，并让事件从页面调用它。

您可以使用常规按钮并为按钮的 onclick 事件设置功能。

```
 <html>
<head>

<body>
<form  action="http://www.example.com/post.php"  method="post">
<input type="text" name="input1" value="test1"  />
<input type="text" name="input2" value="test2"  />
<input type="button" name="send" value="test2" onclick="doSubmit()"  />

<script type="text/javascript"> 
function doSubmit() {
 document.forms[0].submit(); 
}
</script> 
</form>
</body>
</html>

```

# string - 使用 Ascii 进行压缩，试图找出有效存储以下内容的位数

> ID：11962601
> 
> 赞同：0
> 
> 时间：2012-08-15T00:11:04.143
> 
> 标签：string, binary, compression, ascii, bits

我正在尝试仅使用 ASCII 来学习压缩的基础知识。

如果我要发送一封包含小写字母字符串的电子邮件。如果文件中的`n` 每个字符都存储为 8 位扩展 ASCII 码，那么我们需要 8n 位。但是根据**压缩的指导原则：**我们丢弃不重要的信息。所以使用它我们不需要所有的 ASCII 代码来编码小写字母的字符串：它们只使用 26 个字符。我们可以只用 5 位代码字 (25 = 32 > 26) 编写自己的代码，使用这种编码方案对文件进行编码，然后在收到电子邮件后解码。

```
The size has decreased by 8n - 5n = 3n, i.e. a 37.5% reduction. 
```

但是，如果电子邮件由小写字母 (26)、大写字母和额外`m`字符组成，并且必须有效地存储，该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:35:41.730

如果您有 n 个概率相等的符号，则可以使用 log2(n) 位对每个符号进行编码。即使 log2(n) 是小数，使用算术或范围编码也是如此。如果将其限制为 Huffman（每个符号的固定位数）编码，您可以接近 log2(n)，平均每个符号的位数仍然是小数。

例如，您可以使用算术编码以非常接近每个符号 3.322 位的方式对十个符号（例如十进制数字）进行编码。使用霍夫曼编码，您可以用 3 位编码 6 个符号，用 4 位编码 4 个符号，平均每个符号 3.4 位。

使用 shift-up 和 shift-down 操作可能是有益的，因为在英文文本中，您希望有小写字符的字符串，偶尔会有大写字符。现在你正在进入高阶模型和不等频率分布。

# jquery - 如何根据类名创建元素 ID

> ID：11962603
> 
> 赞同：0
> 
> 时间：2012-08-15T00:11:28.283
> 
> 标签：jquery

我正在尝试使用元素类名称的 ID 创建一个元素...

我的代码

```
//$elementClass has no id attrbute

          elementID=$elementClass.attr('class');

               $elementClass.first().attr('id',elementID);
               $element=$(elementID);               
               console.log($element);   

//the console.log doesn't output anything.... 
```

任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T00:14:54.087

除非您的班级中有`#`角色，否则您得到的只是班级名称值。`#`如果要选择具有该 id 的元素，则需要将字符添加到选择器中。

```
$element=$('#' + elementID); 
```

但是，看到您`first()`已经在执行以获取感兴趣的元素，您不妨在该点缓存该对象并从那里开始使用它。

```
// Get the id value from the class name
elementID = $elementClass.attr('class');

// Create a jQuery object of the element I want to update
var $element = $elementClass.first();

// Update the element
$element.attr('id',elementID);

// Show the results in the console
console.log($element); 
```

这也应该有效，它可以让您不必连接选择器值。

# facebook - 使用 facebook SDK for php 进行 FQL 查询？

> ID：11962606
> 
> 赞同：0
> 
> 时间：2012-08-15T00:11:50.347
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-php-sdk

我想知道如何使用以下 fql 查询使用 facebook sdk for php 从我的 facebook 收件箱中获取一条消息（或者如果可能的话，使用其他方式）

**https://graph.facebook.com//fql?q=SELECT+body+FROM+message+WHERE++mssage_id="XXXXXXXXXXXXXXXXXX_XXX"&access_token=...**

（返回 JSON 结果）

或者

**https://api.facebook.com/method/fql.query?query=SELECT+body+FROM+message+WHERE+message_id="XXXXXXXXXXXXXXXXXX_XXX"&access_token=...**

（返回 XML 结果）

这两种方法都需要一个访问令牌来获得**read_mailbox**权限。我需要的只是使用 php 获得结果。有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:29:11.453

最灵活的方式是使用`api`PHP SDK 的方法。Facebook 文档站点有这[方面的示例](https://developers.facebook.com/docs/reference/php/facebook-api/)。

如果您已经拥有访问令牌，则此代码会将您的数据放入 php 数组中：

```
<?php
$query = 'SELECT body FROM message WHERE message_id = "?????????????_??"';
$token = '????';
$result = json_decode( file_get_contents('https://graph.facebook.com/fql?q=' . 
    urlencode($query) . '&access_token=' . $token) );
printf('<pre>%s</pre>', print_r($result, true) ); 
```

是的，您需要一个访问令牌。如果您尝试读取随机用户的邮箱，则需要一个应用程序，并且您必须遵循其中一个[身份验证工作流程](https://developers.facebook.com/docs/authentication/)才能让他们登录您的应用程序并授予您`read_mailbox`权限。

# c++ - 析构函数中的删除[]

> ID：11962608
> 
> 赞同：0
> 
> 时间：2012-08-15T00:12:01.320
> 
> 标签：c++, templates, destructor, delete-operator

好吧，我正在研究模板，但我对下一个代码有疑问：

```
 #include <iostream>

        using namespace std;

        template<class T, int n>
        class Table
        {
        public:
            Table();
            //~Table();
            int& operator[](int i);
            bool Resize(int n);
            int Count();
            void Free();

        private:
            T* inst;
            int count;
        };

        template<class T, int n>
        Table<T, n>::Table()
        {
            inst = new T[n];
            count = n;
        }

        template<class T, int n>
        void Table<T, n>::Free()
        {
            delete[] this->inst;
        }

        template<class T, int n>
        int& Table<T, n>::operator[](int i)
        {
            return inst[i];
        } 

        template<class T, int n>
        bool Table<T, n>::Resize(int n)
        {
            this->inst = (T*)realloc(this->inst, sizeof(T)*count + sizeof(T)*n);
            if(!inst)
                return false;

            return true;
        }

        template<class T, int n>
        int Table<T, n>::Count()
        {
            return this->count;
        }

        template<typename T, int n> void ShowTable(Table<T, n> t)
        {
            for(int i=0; i<t.Count(); i++)
                cout<<t[i]<<endl;
        }

        int main()
        {
            Table<int, 2> table;
            table[0] = 23;
            table[1] = 150;
            ShowTable(table);

            system("pause");
            table.Free();

            return 0;
        } 
```

它可以工作，但是当我将它放入`delete[] this->inst;`析构函数时，它会抛出一个断言失败，我不知道为什么......我的意思是，删除析构函数中的资源是不是很糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:21:32.823

`n`您在以下方法定义中有重复的标识符：

```
 template<class T, int n>
    bool Table<T, n>::Resize(int n) 
```

我用上述声明编译时出错，我很惊讶你没有。您需要将其中一个重命名为`int n`其他名称（例如`Resize(int newsize)`）。

`inst`在析构函数中删除您的成员没有问题。这就是你应该做的，以避免内存泄漏。

# propel - 如何在 Symfony2 表单中为集合添加自动完成字段并使用 Propel？

> ID：11962613
> 
> 赞同：9
> 
> 时间：2012-08-15T00:13:08.490
> 
> 标签：propel, symfony-forms, symfony-2.1

我正在使用带有 PropelBundle 的 Symfony 2.1 表单，并且我正在尝试重构具有对象下拉列表（可供选择）的表单，以使用 jquery 自动完成字段（使用 AJAX）。对于下拉列表，我在表单类型中使用了以下代码（非常适合下拉列表）：

```
$builder->add('books', 'collection', array(
    'type'          => 'model',
    'options'       => array(
        'class'     => 'MyVendor\MyBundle\Model\Book',
        'property'  => 'title',
    ),
    'allow_add'     => true,
    'allow_delete'  => true,
    'by_reference'  => false,
    'required'      => false,
)); 
```

为了提供一点上下文，假设我们正在创建一个新的“读者”对象，并且我们想从可用的“书籍”对象列表中选择读者最喜欢的书籍。使用集合类型，以便可以在新的“读者”表单中选择许多“最喜欢的书籍”。现在，我想更改以上内容以使用自动完成功能。为此，我尝试实现一个[数据转换器，以便能够从一个简单的文本字段](http://symfony.com/doc/master/cookbook/form/data_transformers.html)中获取一个 Book 对象，该文本字段可用于 Autocomplete 函数以传递 Book ID，如[本问题的答案所示](https://stackoverflow.com/questions/10894754/how-to-add-an-autocomplete-field-in-forms-symfony2). 但是，我无法弄清楚如何使 Data Transformer 与集合类型和 Propel 类一起工作。我按照 Symfony Cookbook 中的说明创建了一个 BookToIdTransformer 类，并在“ReaderType”文件中尝试了以下操作：

```
$transformer = new BookToIdTransformer();
$builder->add(
        $builder->create('books', 'collection', array(
            'type'          => 'text',
            'allow_add'     => true,
            'allow_delete'  => true,
            'by_reference'  => false,
            'required'      => false,
        ))->addModelTransformer($transformer)
); 
```

有了上面，我得到一个“调用未定义的方法：getId”异常（显然，Transformer 需要书籍的 PropelCollection，而不是单个 Book 对象..）。有谁知道该怎么做？或者让我知道是否有其他方法可以使用 Propel 在 Symfony 中实现自动完成功能并允许选择多个对象（例如书籍集合）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T14:46:41.040

我最终寻求的解决方案与我之前的答案略有不同。我最终在“ReaderType”表单中使用“文本”字段类型而不是“集合”字段类型，因为我最终使用了[Loopj Tokeninput jQuery 插件](http://loopj.com/jquery-tokeninput/)，该插件允许选择多个对象（例如“收藏夹”）进行关联到表单中的主要对象（例如“Reader”对象）。考虑到这一点，我创建了一个“数据转换器”，用于将传递的对象 id（在文本字段中的逗号分隔列表中）转换为 Propel 对象集合。代码共享如下，包括一个示例 ajax 对象控制器。

“ReaderType”表单的关键部分如下所示：

```
$transformer = new BooksToIdsTransformer();
$builder->add(
    $builder->create('books', 'text', array(
        'required' => false,
    ))->addModelTransformer($transformer)
); 
```

“数据转换器”文件如下所示：

```
// src/MyVendor/MyBundle/Form/DataTransformer/BooksToIdsTransformer.php
namespace MyVendor\MyBundle\Form\DataTransformer;

use \PropelObjectCollection;
use Symfony\Component\Form\DataTransformerInterface;
use Symfony\Component\Form\Exception\UnexpectedTypeException;
use MyVendor\MyBundle\Model\BookQuery;

class BooksToIdsTransformer implements DataTransformerInterface
{
    public function transform($books)
    {
        if (null === $books) {
            return "";
        }

        if (!$books instanceof PropelObjectCollection) {
            throw new UnexpectedTypeException($books, '\PropelObjectCollection');
        }
        $idsArray = array();
        foreach ($books as $book) {
            $idsArray[] = $book->getId();
        }
        $ids = implode(",", $idsArray);
        return $ids;
    }

    public function reverseTransform($ids)
    {
        $books = new PropelObjectCollection();

        if ('' === $ids || null === $ids) {
            return $books;
        }

        if (!is_string($ids)) {
            throw new UnexpectedTypeException($ids, 'string');
        }
        $idsArray = explode(",", $ids);
        $idsArray = array_filter ($idsArray, 'is_numeric');
        foreach ($idsArray as $id) {
            $books->append(BookQuery::create()->findOneById($id));
        }
        return $books;
    }
} 
```

将“书籍”的 json 集合返回给 Tokeninput 自动完成函数的 ajax 控制器如下：

```
namespace MyVendor\MyBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use MyVendor\MyBundle\Model\BookQuery;

class ClassAjaxController extends Controller
{
    public function bookAction(Request $request)
    {
        $value = $request->get('q');

        $books = BookQuery::create()->findByName('%'.$value.'%');

        $json = array();
        foreach ($books as $book) {
            $json[] = array(
                'id' => $book->getId(),
                'name' => $book->getName()
            );
        }

        $response = new Response();
        $response->setContent(json_encode($json));

        return $response;
    }
} 
```

最后，“routing.yml”文件中的路由器：

```
ajax_book:
    pattern:  /ajax_book
    defaults: { _controller: MySiteBundle:ClassAjax:book } 
```

# nltk - NLTK 子句和短语分解

> ID：11962615
> 
> 赞同：0
> 
> 时间：2012-08-15T00:13:30.390
> 
> 标签：nltk

有没有办法让 NLTK 返回完全标记有所有 Treebank 子句和 Treebank 短语分界的文本（或等效项；它不必是 Treebank）？我需要能够（分别）返回子句和短语。我发现的唯一一件事是在第 7 章的 NLTK Bird/Klein/Loper 书中，它说您不能同时处理名词短语和动词短语，但我想做的远不止这些！我认为斯坦福 POS 解析器会这样做，但客户只想使用 NLTK。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:05:14.473

你看过第八章了吗？听起来你想要这样的东西：

```
>>> from nltk.corpus import treebank
>>> t = treebank.parsed_sents('wsj_0001.mrg')[0]
>>> print t
(S
  (NP-SBJ
    (NP (NNP Pierre) (NNP Vinken))
    (, ,)
    (ADJP (NP (CD 61) (NNS years)) (JJ old))
    (, ,))
  (VP
    (MD will)
    (VP
      (VB join)
      (NP (DT the) (NN board))
      (PP-CLR
        (IN as)
        (NP (DT a) (JJ nonexecutive) (NN director)))
      (NP-TMP (NNP Nov.) (CD 29))))
  (. .)) 
```

除了您已经找到的分块资源。但是，如果您的意思是要解析您提供的文本，还有以下选项：

```
>>> sr_parse = nltk.ShiftReduceParser(grammar1)
>>> sent = 'Mary saw a dog'.split()
>>> print sr_parse.parse(sent)
(S (NP Mary) (VP (V saw) (NP (Det a) (N dog)))) 
```

但这依赖于预先手动填充的语法1。分块比解析更容易。

# javascript - JS动态内容链接

> ID：11962617
> 
> 赞同：0
> 
> 时间：2012-08-15T00:14:39.220
> 
> 标签：javascript, jquery, dynamic-content

我设法让我的主导航工作，以便 JQ 从另一个文件加载内容 HTML 并将它们作为我的主要内容 div 的 innerHTML。但是，每次我刷新页面时，它都会返回到文件的默认状态，即没有通过 JQ 动态更改的内容。此外，由于 URL 保持不变，我无法找到一种方法来链接到具有更改内容的索引页面。关于如何做这些事情的任何想法？

这是用于动态更改内容的函数：

```
$(document).ready(function() {                                                                                                                            
  $('#menu_items').on('click', '#menu_items a', function(event) {                                                                                   
    event.preventDefault();                                                                                                                   
    var href = $(this).attr('href');                                                                                                          
    $('#main_content').load(href);                                                                                                            
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:39:10.350

如果我理解正确，您的问题是您没有将在客户端上所做的更改推送到服务器，或以任何方式存储它们。你有几个选择：

*   在服务器上创建一个允许对 HTML 文件进行更改的 servlet（我不建议这样做，因为在客户端上所做的任何更改都会转移到所有其他客户端）。
*   使用 cookie：您可以在对文件进行更改时放置一个 cookie，以便在页面刷新时加载更改
*   使用 HTML 5 本地存储：与 cookie 的概念相同，但更新且可能更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:46:16.307

[我完全从另一个网站http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)窃取了这些功能， 但这正是您需要做的事情。

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

`$(document).ready(function() { $('#main_content').load($("#"+readCookie("content")).attr('href')); $('#menu_items').on('click', '#menu_items a', function(event) { event.preventDefault(); var href = $(this).attr('href'); $('#main_content').load(href); createCookie("content",$(this).attr('id'), 1); }); });`

只需确保您的所有菜单链接都有一个 ID，否则您将不得不稍微更改此代码。

# asp.net-mvc - 使用 MVC 在 contentEditable DIV 中发布 HTML

> ID：11962618
> 
> 赞同：3
> 
> 时间：2012-08-15T00:14:42.743
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我可以直接发布 contentEditable DIV 的内容吗？我唯一能想到的就是将 innerHtml 复制到一个隐藏的输入元素中，但我确信一定有更直接的方法。

**看法：**

```
<div name="typer" id="typer" onclick="eraseFirst();this.contentEditable='true';">
    Text here that the user typed, with html elements.  How is this posted?
</div> 
```

**控制器：**

```
[HttpPost]
public ActionResult BlogPage(BlogsPosts blogsposts)
{
    // Is this a good start?
    return View(blogsposts);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:43:43.823

在提交表单或通过 ajax 发送请求之前，您将需要使用 javascript 来解析文本并填充作为视图模型一部分的隐藏字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:23:04.033

是的，像这样从你的 div 中获取属性并发送到控制器：

```
var cod = $("#typer").attr("name") 
```

# php - 超过 64kb 的内容未显示在 wordpress 中

> ID：11962619
> 
> 赞同：0
> 
> 时间：2012-08-15T00:14:50.623
> 
> 标签：php, mysql, wordpress

我的 wordpress 网站上的特定页面有点问题。由于设计的原因，页面很大，因为它有多个内部选项卡等。问题是我突然停止添加内容。从字面上看，一旦您保存了页面，它就会切断内容。

问题与内容无关，因为我仅使用纯文本进行了尝试，并且发生了同样的事情。我已经疯狂地搜索类似的问题，但无济于事。

到目前为止，我已经重新安装了 wordpress，检查了所有插件，检查了它不是基于主题的问题。有趣的是，在 wordpress.com 托管的博客下，我可以添加超过 64kb 的限制，所以我立即访问了我的托管服务提供商。它们绝对没用，只是说服务器端没有出现错误。

通过研究，我听到人们谈论 BLOBS 和 MEDIUMBLOBS，但我不太确定如何操作 MySQL 设置。

任何能指出我正确方向的人都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:09:34.623

感谢所有帮助的人。

我设法将其追溯到 suhosin php 脚本。有人建议我检查 suhosin.post.max_value_length。多变的。当我将值提高到设置为 64k 的 3 倍时，它没有任何区别。也就是说，我要求我的主持人关闭脚本，然后我又开始营业了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:20:51.327

在表 wp_posts 中（在 MySQL 中 - 使用 PhpyMyAdmin 检查是最简单的）检查“post_content”和“post_content_filtered”的字段类型。它们都应该是允许 4GB 帖子的“长文本”。

如果它们不是“longtext”，那么只需将类型更改为“longtext”，你应该是对的。（还要检查您是否拥有最新版本的 WordPress - 它是很久以前增加的，您可能拥有非常过时的版本！）

如果它们是“longtext”，那么您必须有一个插件，它可能将它自己的数据版本存储在另一个表中，或者一个插件可以在此过程中截断强项。只需一个一个地禁用插件，直到问题消失 - 然后与插件的开发人员联系。

# c# - Unicode 在 Linq-To-Sql 上显示不正确

> ID：11962622
> 
> 赞同：0
> 
> 时间：2012-08-15T00:15:12.493
> 
> 标签：c#, sql-server-2008, unicode, linq-to-sql

我的`ASP.NET`网站有一个`Linq-To-Sql`通过连接字符串连接到 SQL 2008 DB 的数据库。
在本地，使用`MDF`文件时，一切正常。我有一个“加载器”方法，循环文件（只有一次，通过管理面板），解析它们并添加到数据库中。它们包含 Unicode 希伯来文文本。我在本地做过这个。然后，我的本地网站会将正确的 Unicode 希伯来语字符打印到 HTML 文档中。*我的整个网站都是希伯来语的。*

使用我的共享主机提供商提供的连接字符串，将 SQL DB（没有数据！）转储到一个`sql`，在服务器上执行并从文件中加载它，我开始看到问号（???）而不是希伯来字符（网站本身，在希伯来语中显示正确）。SQL 数据库具有`text`类型字段。

更有趣的是，它在出现问号（！）之前已经正常工作了一段时间。

如何使希伯来语字符正确显示？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:19:36.520

SQL server 中的[`text`](http://msdn.microsoft.com/en-us/library/ms187993.aspx)数据类型表示：

> 服务器代码页中的可变长度**非 Unicode**数据，最大字符串长度为 2^31-1 (2,147,483,647)。*（强调我的）*

因此，由于 GoDaddy 在服务器上的代码页与您的不同，因此 unicode 字符被破坏了。`text`从来没有打算包含 unicode。
你需要[`nvarchar(max)`](http://msdn.microsoft.com/en-us/library/ms186939.aspx)改用。

正如 DJ Kraze 正确指出的那样，可能还需要在字符串前面加上[**N**](http://support.microsoft.com/kb/239530/en-us)*前缀（我认为添加解释可能会有所帮助）。*但是，由于您使用的是 LINQ to SQL，所以这不是您的问题（很好抓住@Jon Hanna，我错过了那个标签）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T00:21:14.657

这是一个很好的例子/解释可能会有所帮助

您可以在字符串开头使用 N 来解决问题，如下所示，这是如何使用“N”的示例

```
 string Status_Update = "UPDATE global_status SET  title = '" +
 Title + "', info =N'" + Info + "'  WHERE id = '" +
 Request.Form["Some_Key"] + "'"; 
```

还要确保尝试 nvarchar 或 unicode

# linux - 在 Linux 中操作 LED Wiz

> ID：11962626
> 
> 赞同：1
> 
> 时间：2012-08-15T00:15:45.037
> 
> 标签：linux, usb

我有一个硬件系统，它使用 GroovyGameGear.com 的 LED Wiz 来控制运行 Windows Embedded 的系统前面的 LED。GroovyGameGear 提供了一个 dll (SimpleLEDWiz.dll)，我从 python (cdll from ctypes) 运行它来控制 LED 控制器，效果很好。

这是问题所在：我们正在将 Windows Embedded 换成 Ubuntu 12.04，我（显然）将不再能够使用提供的 dll 来控制 LED 控制器（是的，我已经尝试过 wine）。开发人员已向我发送了一些看似简单的数据传输规范，但我对如何使其工作感到迷茫。在 /dev/bus/usb 中连接时我可以看到该设备，但除此之外我不确定该怎么做。如果可能的话，我很想把它保存在 Python 中。这是 LED Wiz 团队发给我的信息：

"""这是您在 LED-Wiz 端需要了解的内容；

开发人员 ID：FAFA 设备编号：F0 到 FF

报告的格式非常简单：在任何给定时间总是发送 8 个字节，并且硬件期望进行两种类型的传输。

第一个是我们所说的“状态转储”。这将设置输出的状态，如下所示：

字节 0 = 64 这是一个标志，用来告诉单元这个数据包是一个状态转储。永远是 64

字节 1 - 字节 5 = 参考 KWZ-SBA 命令。

字节 6 和字节 7 = 0 这些总是 0 并且是“填充”

“状态转储”还将允许从“配置文件转储”遇到的任何问题中恢复，因为它会重置 LED-Wiz 中的所有数据计数器。偶尔使用状态转储以确保所有内容都同步是个好主意。由于 USB 通信经过了良好的错误检查，因此没有必要这样做，但这是一种很好的做法。

另一个是“配置文件转储”。这需要四个 8 字节块中的 32 字节数据。将每个块视为 KWZ-PBA 命令中数据的四分之一。"""

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T23:13:22.387

我也一直在努力。该设备是 HID 设备，因此使用报告进行通信。这些通过控制通道传输。一旦我发现这很简单：如果你得到 pyusb 并按照他们的教程（https://github.com/walac/pyusb/blob/master/docs/tutorial.rst），让它工作的方法是找到设备后发出控制转移：

```
import usb.core
import usb.util
import sys
#input is a 5 byte list
def  LWZ_SBA (input):
   #find device
   dev = usb.core.find(idVendor=0xfafa, idProduct=0x00f0)
   if dev is None:
      raise ValueError('LedWiz device not found')

   #claim device
   if dev.is_kernel_driver_active(0) is True:
      dev.detach_kernel_driver(0)
   usb.util.claim_interface(dev,0)

   #activate device
   if not dev.get_active_configuration():
      dev.set_configuration(1)

   msg = [64]+input+[0,0]

   #send message to device
   dev.ctrl_transfer(0x21, 0x09, 0x0200, 0, msg)

   #bmRequesttype - 0x21 - HID
   #bmrequest - 0x09 - SET_REPORT
   #wValue - Report Type and Rport ID - 0x02 0x00
   #wIndex - Interface - 0
   #msg - list of values

   #release device
   usb.util.release_interface(dev,0)

#use like this to turn all lights on
LWZ_SBA([255,255,255,255,4]) 
```

我还没有完成 PBA，但我假设您只是连续四次发出相同的命令（这次是所有 8 个字节，并且由于没有一个允许的值是 64，它知道您正在设置 PBA 而不是 SBA！

# sql - 在列上执行数学的更优雅的方式

> ID：11962628
> 
> 赞同：3
> 
> 时间：2012-08-15T00:15:49.563
> 
> 标签：sql, sql-server, tsql, sql-server-2012

有没有更优雅的方法来做到这一点：

```
SELECT TOP (@NumOfGames) 
        (SUM(IIF(Fixture.HomeTeamID = @Team
            ,IIF(Fixture.Goals.FullTimeHomeGoals > Fixture.Goals.FullTimeAwayGoals
                    ,1 
                    ,IIF(Fixture.Goals.FullTimeHomeGoals < Fixture.Goals.FullTimeAwayGoals, 0, 0.5) 
                ) --IsHomeTeam
            ,IIF(Fixture.Goals.FullTimeAwayGoals > Fixture.Goals.FullTimeHomeGoals
                    ,1 
                    ,IIF(Fixture.Goals.FullTimeAwayGoals < Fixture.Goals.FullTimeHomeGoals, 0, 0.5) 
                ) --IsAwayTeam
        )) / @NumOfGames) * 100 AS Result
    FROM 
        Fixture.Fixture 
    INNER JOIN 
        Fixture.Goals ON Fixture.Goals.FixtureID  = Fixture.Fixture.FixtureID
    WHERE 
        HomeTeamID = @Team 
        OR 
        AwayTeamID = @Team 
```

我非常讨厌 SUM 部分，必须有更好的方法来做到这一点。

用户将@NumOfGames 和@Team 作为参数输入到存储过程。然后它会检查目标表以查看球队是否赢、平或输。赢是 1 分，平局是 0.5，输是 0。我想输出这些数字的总和，除以 NumOfGames 并乘以 100 得到成功率。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T01:21:56.473

呸。Microsoft 似乎已将 IIF 添加到 SQL Server 2012 中。无论如何，您可能会发现标准 SQL 方式更具吸引力。这将使用 CASE 语句：

```
SELECT TOP (@NumOfGames) 
       (SUM(case when Fixture.HomeTeamID = @Team and
                      Fixture.Goals.FullTimeHomeGoals > Fixture.Goals.FullTimeAwayGoals
                 then 1.0
                 when Fixture.HomeTeamID = @Team and
                      Fixture.Goals.FullTimeHomeGoals = Fixture.Goals.FullTimeAwayGoals
                 then 0.5
                 when Fixture.HomeTeamID = @Team
                 then 0.0
                 when Fixture.HomeTeamID <> @Team and
                      Fixture.Goals.FullTimeAwayGoals > Fixture.Goals.FullTimeHomeGoals
                 then 1.0
                 when Fixture.HomeTeamID <> @Team and
                      Fixture.Goals.FullTimeAwayGoals = Fixture.Goals.FullTimeHomeGoals
                 then 0.5
                 else 0.0
        end) / @NumOfGames) * 100 AS Result
FROM 
    Fixture.Fixture 
INNER JOIN 
    Fixture.Goals ON Fixture.Goals.FixtureID  = Fixture.Fixture.FixtureID
WHERE 
    HomeTeamID = @Team 
    OR 
    AwayTeamID = @Team 
```

作为记录，比较“Fixture.HomeTeamID <> @Team”在 case 语句中是不必要的，只是为了使其更具可读性（并且效率降低一点）。case 语句的工作原理是按顺序评估 WHEN 子句，然后选择第一个匹配的子句。

我们可以请求微软删除 IIF() 吗？;-)

# javascript - JavaScript Window 对象总是可访问的？

> ID：11962641
> 
> 赞同：10
> 
> 时间：2012-08-15T00:19:51.387
> 
> 标签：javascript, scope, window

我们看到这种方法一直在使用：

```
(function (window) {
    var document = window.document,
        location = window.location,
        navigator = window.navigator;
})(window) 
```

在研究上面的代码片段时，我想知道为什么像这样的全局可访问对象`window`作为参数传递给函数。难道是这样：

1.  开发人员不能 100% 确定地知道可以从本地函数范围内访问窗口吗？
2.  这是一种很好的做法，因为您向阅读您的代码的其他开发人员清楚地表明了您的意图。
3.  您已经看到 John Resig 这样做了，所以它一定是舔手指的好！

你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T00:24:49.220

它使代码更具可移植性。

您可以将代码复制并粘贴到没有定义全局窗口对象的环境（例如节点），但与您在代码中关心的所有内容的 API 兼容。然后你只需要修改传递给函数的参数。

稍作修改，使代码更清晰：

```
(function(root){
    var document = root.document,
        location = root.location,
        navigator = root.navigator;
})(window) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:24:59.367

我知道您询问的代码有几个可能的原因：

1.  `document`为,`location`和在局部变量中创建快捷方式`navigator`可能会稍微提高性能并减少输入。

2.  传递`window`给自执行函数可能会导致引用`window`执行比从全局空间使用它稍好。

3.  有一些 JavaScript 执行环境（不在浏览器中），其中不调用全局对象，`window`因此代码可以更容易地适应它。但是，这个原因似乎有点牵强，因为为浏览器编写的代码很可能无论如何都使用其他浏览器功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:45:43.530

```
(function ($) { }(jQuery)); // $ stands for jQuery within this function
(function (window) { }(window)); // window still equals window
(function (bananas) { }(document)); // all references to bananas => document. (silly) 
```

1.  通常，顶部名称是您希望它命名的名称，而底部则确保它应该代表什么。因此，在顶部有 $ 意味着您的所有 jQuery 代码（在本例中）都保留在 jQuery 中。将它用于窗口/窗口只是确保没有其他窗口定义将其原始意图更改为“窗口”。
2.  这绝对是一种最佳实践，并且可以控制在匿名函数/命名空间中允许您想要的内容。
3.  原因之一！雷西格就是那个人。

# css - 在css中为一个元素设置两个位置

> ID：11962645
> 
> 赞同：0
> 
> 时间：2012-08-15T00:20:04.833
> 
> 标签：css, web, position

我有一个`div`元素绝对浮动在鼠标位置上。所以我将其设置`position`为`absolute`：

```
div#floating{  
    position:absolute;  
} 
```

我想要一个`[close]`链接（在我的 div 中有绝对位置）来隐藏我的浮动 div。所以我必须要：

```
a#close{  
  position: absolute;  
} 
```

和

```
div#floating{
   position:relative;  
} 
```

如何为浮动 div 设置两个位置（绝对位置和相对位置）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:26:52.983

将两者都设置为absolute。因为在另一个绝对或相对定位元素内的绝对定位元素是相对于其父元素计算的。

```
 div#floating{ 
    position:absolute;  
 }  

 a#close{  
   position: absolute;  
 } 
```

检查这个：http: [//jsfiddle.net/6ddDw/](http://jsfiddle.net/6ddDw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:32:23.247

我认为你不能那样做。

尝试在浮动 div 中放置一个 div 并使其位置相对。

# apache - apache mod_rewritemap 虚拟主机文件

> ID：11962653
> 
> 赞同：0
> 
> 时间：2012-08-15T00:21:21.070
> 
> 标签：apache, virtual, host, rewritemap

嗨，我对所有这些都很陌生。我的网站需要重写 url。我加入了godaddy linux基础。

我想使用重写地图功能。并尝试为此目的编写语法

但是我刚刚发现代码必须放在 apache 配置中的虚拟主机文件中，并且 rewriteMap 仅在您可以访问 httpd.conf 和虚拟主机时才有效。

我不知道这些。我在哪里可以找到“虚拟主机文件”和 httpd.conf？

有人可以给我明确的程序吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:38:59.943

如果您使用的是 Godaddy，则不太可能访问这些内容。您可以联系 Godaddy 的客户支持，也可以按照我[在您询问的关于 RewriteMap 的最后一个问题中](https://stackoverflow.com/questions/11962196/url-rewritemap-apache/11962247#11962247)的解决方法进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:19:49.080

使用 Go Daddy 共享主机，您将无法访问虚拟主机配置。

# gwt - Struts2 升级（2.0.11 到 2.3.4），GWT 问题

> ID：11962657
> 
> 赞同：0
> 
> 时间：2012-08-15T00:22:44.520
> 
> 标签：gwt, struts2, guice

由于存在漏洞，我的任务是将应用程序从 Struts2 v2.0.11 升级到 v2.3.4。除了我认为的 GWT 之外，我已经成功地处理了所有依赖项的冲突和升级。GWT 的版本目前为 2.0.3。

我的主要问题是一个名为“/apps/dispatch”的404，它被引用：

```
serve("/apps/dispatch").with(StandardDispatchServiceServlet.class); 
```

没有编译问题，没有运行时问题（404 除外）。

无需升级 Struts2 版本，应用程序将按预期运行。关于为什么 Struts2 升级会破坏 GWT 功能的任何想法？

# powershell - 从数组中获取计数器路径的开始工作

> ID：11962661
> 
> 赞同：1
> 
> 时间：2012-08-15T00:23:59.370
> 
> 标签：powershell, performancecounter

[作为我最后一个问题](https://stackoverflow.com/questions/11910996/measure-object-sum-all-countersamples-from-continuous-get-counter)的后续行动，我想编译一个 perfmon 计数器列表，这些计数器`-Continuous`以 1 秒间隔（默认）生成并连续采样（）`Start-Job`，睡眠 60 秒，然后运行`Receive-job`以获取过去 60 秒的统计信息( `-Average, -Sum, -Minimum, -Maximum`)。

我现在遇到的问题是当我使用绝对计数器路径时，工作开始并保持在“运行”状态。如果我尝试遍历一组性能计数器字符串，则作业状态将变为“已完成”。

下面是两个代码示例，它们显示了非工作和工作结果。

不工作。即使设置了 -Continuous，作业状态也会完成。不会引发错误。

```
$jobs=@{}
$counters=@("\Processor(*)\% Processor Time",
        "\Network Interface(*)\Bytes Received/sec",
        "\Network Interface(*)\Bytes Sent/sec")
foreach ($counterPath in $counters) {
    $job=Start-Job {get-counter -Counter "$counterPath" -Continuous | foreach {$_.CounterSamples} }
    $jobs[$job.id]=$counterPath
} 
```

按预期工作，但不允许多个计数器通过循环开始工作。

```
$jobs=@{}
$job=Start-Job {get-counter -Counter "\Processor(*)\% Processor Time" -Continuous | foreach {$_.CounterSamples} }
$jobs[$job.id]=$counter 
```

结果输出

```
PS C:\Users\msnow> $jobs=@{}
[string]$counter="\Processor(*)\% Processor Time"
$job=Start-Job {get-counter -Counter "$counter" -Continuous | foreach {$_.CounterSamples} }
$jobs[$job.id]=$counter

__________________________________________________________________________________________________________________________
PS C:\Users\msnow> $jobs=@{}
$job=Start-Job {get-counter -Counter "\Processor(*)\% Processor Time" -Continuous | foreach {$_.CounterSamples} }
$jobs[$job.id]=$counter

__________________________________________________________________________________________________________________________
PS C:\Users\msnow> Get-Job

Id              Name            State      HasMoreData     Location             Command                  
--              ----            -----      -----------     --------             -------                  
1               Job1            Completed  True            localhost            get-counter -Counter "...
3               Job3            Running    True            localhost            get-counter -Counter "...
__________________________________________________________________________________________________________________________
PS C:\Users\msnow> receive-job -id 3 | measure CookedValue -sum -Average

Count    : 11466
Average  : 5.20268509822716
Sum      : 59653.9873362726
Maximum  : 
Minimum  : 
Property : CookedValue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:50:41.387

我相信问题出在变量 $counter 的范围内。Start-job 在其他运行空间中运行脚本块并且它不可见的变量。您需要将其作为 -argumentlist .try 传递：

```
Start-Job {get-counter -Counter "$($args[0])" -Continuous | foreach {$_.CounterSamples} } -ArgumentList $counter 
```

或者

```
Start-Job {param($counter) ; get-counter -Counter "$($counter)" -Continuous | % {$_.CounterSamples} } -ArgumentList $counter 
```

# c++ - 'glCreateShader' 未在此范围内声明？

> ID：11962665
> 
> 赞同：8
> 
> 时间：2012-08-15T00:24:32.333
> 
> 标签：c++, opengl, compiler-errors

为什么我会收到这些错误？

> 错误：未在此范围内声明
> “GL_VERTEX_SHADER”错误：未在此范围内声明“glCreateShader”

代码：

```
GLuint vs = glCreateShader(GL_VERTEX_SHADER); 
```

是的，我确实有多余的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T00:34:22.857

返回什么`glGetString(GL_VERSION)`？

`CreateShader`不在 GLUT 中，而是在 OpenGL 2.0 中。如果您的“包含过剩”由于某种原因不包含`gl.h`或您的 GL 版本低于 2.0，则标题不会声明它。

我还会检查你`gl.h`的是否`CreateShader`真的在那里声明。

编辑：这个 OpenGL 标头版本的东西似乎是 Windows 中的一个普遍问题。大多数人建议使用[GLEW](http://glew.sourceforge.net/)或其他扩展加载程序库来解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T01:10:48.843

您需要使用[OpenGL 加载库](http://www.opengl.org/wiki/OpenGL_Loading_Library)来加载 OpenGL 函数，或者[自己手动加载函数](http://www.opengl.org/wiki/Load_OpenGL_Functions)。你不能只使用`gl.h`并期望得到一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T15:27:46.380

[libepoxy](https://github.com/anholt/libepoxy)就像一个扩展的`gl.h`;

`#include <GL/gl.h`可以替换为`#include <epoxy/gl.h>`,`-lGL`和`-lepoxy`。如果您使用的是 Windows/Mac，则必须构建源代码，因此如果您已经拥有自己喜欢的加载器，这可能不值得，但我发现它可以很好地替代`GL/gl.h`GL3.3 +，消除了错误。

# c++ - boost::shared_ptr inside QList leads to segmentation fault

> ID：11962669
> 
> 赞同：1
> 
> 时间：2012-08-15T00:24:42.200
> 
> 标签：c++, qt, boost, smart-pointers

i have a strange problem with QList and the boost:shared_ptr. I'm afraid i am not able to strip the problem apart, that's why i will post the wholoe function later on.

What i want to do: I have a list (_fileList) which stores boost::shared ptrs to QFile Objects. The files are XML files. Than i want to parse this file and resolve all includes which means adding the files specified by the include tag also to the _fileList and scanning them for further include tags. The code works fine when resolving 3 includes (in my small test there is only one include per file). The third time the line boost::shared_ptr file(*iter); leads to a segmentation fault. I would be glad if anyone of you can help me or give me hints how i can find this bug.

```
void XmlParser::expandIncludes()
{
//search all files already in the file list for include tags, if any new are found append this file to the file list
    QList<boost::shared_ptr<QFile> >::iterator iter = this->_fileList.begin();
    while(iter!= this->_fileList.end())
    {
        boost::shared_ptr<QFile> file(*iter);
        QDomDocument doc("activeFile");
        if (!file->open(QIODevice::ReadOnly)){
            return;
        }
        if (!doc.setContent(&(*file))) {
            file->close();
            return;
        }
        file->close();
        QDomElement docElem = doc.documentElement();

        QDomNode n = docElem.firstChildElement("include");
        while(!n.isNull()) {
            QDomElement e = n.toElement(); // try to convert the node to an element.
            if(!e.isNull()) {
               QString nextFile = e.text();
               QString nextFileAbsolutePath = this->_workingDir.absolutePath() +"/"+nextFile;
               boost::shared_ptr<QFile> newFileObject(new QFile(nextFileAbsolutePath));
               this->_fileList.append(newFileObject);

            }
            n = n.nextSiblingElement("include");
        }
        doc.clear();
        iter++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:48:26.320

Iterators pointing to elements in a QList becomes invalid after you insert new elements into the list. You could use a QLinkList instead.

From the Qt [Container](http://qt-project.org/doc/qt-4.8/containers.html) docs:

Iterators pointing to an item in a QLinkedList remain valid as long as the item exists, whereas iterators to a QList can become invalid after any insertion or removal.

# c# - 程序集创建实例和水晶报告的问题

> ID：11962676
> 
> 赞同：0
> 
> 时间：2012-08-15T00:26:18.073
> 
> 标签：c#, .net, crystal-reports, crystal-reports-2008, crystal-reports-xi

我加载一个程序集

```
private System.Reflection.Assembly;
object myData;

myAssembly = System.Reflection.Assembly.LoadFile("C:\\CrystalDecisions.CrystalReports.Engine.dll"); 
```

然后我创建一个实例。

```
myData=myAssembly.CreateInstance("CrystalDecisions.CrystalReports.Engine.ReportDocument", true); 
```

这个 myData 总是返回 null，任何想法为什么它返回 null，因为 myAssembly 有程序集信息及其公钥令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:41:10.990

尝试以下类似的操作..

```
// dynamically load assembly from file Test.dll
Assembly myData = Assembly.LoadFile(@"C:\CrystalDecisions.CrystalReports.Engine.dll");

// get type of class Calculator from just loaded assembly
Type myData = myData.GetType("CrystalDecisions.CrystalReports")

// create instance of class Calculator
object myDataInstance = Activator.CreateInstance(myData); 
```

[反射示例 C#](http://www.csharp-examples.net/reflection-examples/)

# winforms - Clickonce 应用程序：更新到不同的项目？

> ID：11962682
> 
> 赞同：1
> 
> 时间：2012-08-15T00:27:36.837
> 
> 标签：winforms, visual-studio-2010, visual-studio, deployment, clickonce

我有一个 clickonce 应用程序，它有一个控制台应用程序 foo.exe，它只是启动一个 Windows 窗体应用程序 bar.exe。我使用 Visual Studio 将其部署到网络共享。生活发生了，我不再拥有用于发布原始 clickonce 应用程序的项目。我需要替换 bar.exe windows froms 应用程序。有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:03:08.947

使用[MageUI](http://msdn.microsoft.com/en-us/library/xhctdw55%28v=vs.100%29.aspx)。确保在执行任何操作之前备份您的完整部署。然后替换掉bar.exe文件

打开应用程序清单（*没有*.application 扩展名的清单），保存并重新签名。然后打开部署清单（*扩展*名为 .application 的清单），保存并重新签名。

您也可以使用 Mage 的命令行版本，但对于一次性场景，UI 版本会更容易。

# computer-vision - 不涉及距离传感器的计算机视觉类型的名称是什么？

> ID：11962684
> 
> 赞同：0
> 
> 时间：2012-08-15T00:27:42.177
> 
> 标签：computer-vision, range, sensors

我只是想知道计算机视觉子集是否有一个特定的名称，它不使用距离传感器，而是只使用 2D 图像来收集数据。这将包括立体视觉，使用单个移动相机等。是否有整个计算机视觉类别的名称不使用直接范围数据，而是仅通过图像解释获取范围数据？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:28:14.233

好吧，我们可以将它们称为 Motion 中的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:19:38.787

这是[与主动深度感应相反的被动立体](http://scholar.google.com/scholar?hl=en&q=active+passive+stereo)。

# c++ - 使用临时对象调用构造函数

> ID：11962686
> 
> 赞同：4
> 
> 时间：2012-08-15T00:27:58.563
> 
> 标签：c++, most-vexing-parse

我不明白下面的问题。

```
class InnerBox
{
public:
    InnerBox() : mContents(123) { };
private:
    int mContents;
};

class Box
{
public:

    Box(const InnerBox& innerBox) : mInnerBox(innerBox) { };

private:
    InnerBox mInnerBox;
};

void SomeFunction(const Box& box)
{
    return;
}

int main()
{
    Box box(InnerBox());  // !!PROBLEM!! Doesn't work: compiler thinks this is a function declaration
    SomeFunction(box);    // Error, cannot convert 'function pointer type' to const Box&

    return 0;
} 
```

完整的错误消息是（Visual Studio 2010）

```
 error C2664: 'SomeFunction' : cannot convert parameter 1 from 'Box (__cdecl *)(InnerBox (__cdecl *)(void))' to 'const Box &' 
```

修复很简单：

```
int main()
{
    InnerBox innerBox;
    Box box(innerBox);  
    SomeFunction(box);

    return 0;
 } 
```

这是一个 MSVC 特有的问题吗？如果不是，有人可以解释该语言的哪些怪癖阻止我打电话`Box box(InnerBox());`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:29:59.990

你需要把它写成：

```
Box box((InnerBox())); 
```

或者

```
Box box{InnerBox()}; 
```

这不是 MSVC 特定的问题。C++ 中的规则是将任何可能是声明的构造视为声明。

如果没有额外的括号，代码将声明一个被调用的函数，该函数`box`返回 a `Box`，其单个参数是指向不带参数并返回 a 的函数的指针`InnerBox`。（是的——`InnerBox()`当在函数参数中使用时，实际上声明了一个指向函数（未命名）的指针（这类似于在用作函数参数时`Box[]`实际声明指向的指针`Box`））。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T00:33:32.560

原来的 like 被解析为一个名为 'box' 的函数的函数*声明*（而不是*定义*），该函数返回一个 Box 并将返回 InnerBox 且不带参数的函数指针作为参数`InnerBox (*)()`。有关最令人烦恼的解析问题的详细描述，请参阅[this](http://www.devx.com/cplus/10MinuteSolution/43032/1954)。

您可以使用附加括号明确区分您的对象构造`Box box((InnerBox()));`。或者作为一种更简洁的替代方案，您可以使用新的 C++11 对象构造语法：

`Box box{InnerBox()};`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T00:36:57.273

> 这是一个 MSVC 特定的问题吗？如果不是，有人可以解释一下语言的什么怪癖阻止我调用 Box box(InnerBox()); ?

要完成其他答案：

这被称为[**最令人烦恼的解析**](http://en.wikipedia.org/wiki/Most_vexing_parse)。这不是编译器的问题。它基本上是一个解析规范，它说任何可以被视为声明的东西都被视为声明。

在您的情况下，您可以使用

```
Box box((InnerBox())); 
```

# jquery - 带有特定列表项的简单 jQuery 垂直手风琴菜单在页面加载时展开

> ID：11962687
> 
> 赞同：0
> 
> 时间：2012-08-15T00:28:03.057
> 
> 标签：jquery, css, accordion

我试图弄清楚如何在页面加载时扩展一个简单的 jQuery 垂直手风琴菜单中的特定列表项。我尝试将此添加到 jquery 以在加载时打开第一个列表项，但它似乎不起作用：

```
$('#nav li:first ul').show(); 
```

jQuery 的其余部分是：

```
<script type="text/javascript">
$(document).ready(function () {
  $('#nav > li > a').click(function(){
    if ($(this).attr('class') != 'active'){
  $('#nav li ul').slideUp();
  $(this).next().slideToggle();
  $('#nav li a').removeClass('active');
  $(this).addClass('active');
$('#nav li:first ul').show();
    }
  });
});
</script> 
```

开发页面[可以在这里查看。](http://www.davidkneale.com/wcusa/morocco.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:56:36.187

这一行：`$('#nav li:first ul').show();`需要与 jquery 脚本的其余部分分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:36:54.143

您是否正在寻找类似的东西：

打开“加纳”作为它的第一个链接？

```
$(function(){$($('a','#nav')[0]).click();}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:40:02.020

看起来它不是 jQuery Accordion，而是[Adob​​e 的手风琴插件](http://labs.adobe.com/technologies/spry/articles/data_api/apis/accordion.html)。上一句中的链接显示了 API，看起来你想使用类似的东西：

```
Accordion1.openPanel(index); 
```

我使用 Chrome 开发工具进行了尝试，但没有成功，因此您可能需要确保您的标记正确。我没有太多时间来研究这个，但希望这会让你指向正确的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T00:44:24.170

您将所有内容都包含在`.click()`函数中。您说您希望它在页面加载时打开，但在实际单击导航项之前不会执行任何代码。

也许你所要做的就是添加一个`$('#nav > li > a.active').next().show();`（我假设打开的导航项`active`在页面加载时有类（即它是通过 PHP 或其他东西放在那里的）。

另外，根据我的评论，不要使用`$(this).attr('class') != 'active'`use instead `$(this).hasClass('active')`。这将防止班级中的空格或其他班级等出现任何问题。

# database - 基于云的 MS Access 后端选项

> ID：11962689
> 
> 赞同：2
> 
> 时间：2012-08-15T00:28:07.710
> 
> 标签：database, ms-access, cloud, backend

我们公司已使用 Access 来满足其数据库需求。它想坚持使用当前的数据库前端，但将表迁移到一些基于云的解决方案。我们不想托管 SharePoint 或为 Office 365 支付月费。我使用 MySql 作为后端，但我们必须安装驱动程序。我们还将定期从 Google 表单中收集数据。谁能建议这种组合的可能选择？来自 Google 表单、Access 前端和基于云的后端的数据。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T00:13:41.590

当您说您不想要任何月费时，您是否期望找到一些免费且免费的允许外部连接的数据库服务器系统？我根本不认为你会免费找到这样的服务。

由于 Office 365 的起价为每月 6 美元，那么我不知道您为什么认为这里的成本太高了？因此，您当然可以考虑将您的 Access 后端表扩大到 Office 365 并继续使用您的 Access 前端。更令人惊奇的是 Access 2010 这意味着您可以获得“离线”和断开连接模式。这意味着即使没有互联网连接，您的应用程序也将继续运行。当您找到 wifi 时，数据同步过程再次开始。而且这种同步不是基于文件的，而是基于记录的，并且实际上是产品中内置的复制，并且此设置需要您零额外的代码。

而且由于您的后端不是访问文件，因此您现在可以扩展到数百万用户 - 唯一真正的限制是 365 服务器群（一个超大型计算机群）的大小。

请记住，除了简单地将您的 Access 应用程序链接到这些 office 365 表之外，您还可以将 Access Web 表单发布到 office 365。所以在下面的视频中途，我切换到在浏览器中 100% 运行 Access 应用程序：

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

请注意，上面生成的浏览器应用程序不需要任何 ActiveX 或 Silverlight。如前所述，这又是基于那个庞大的服务器场。

另一种云方法是考虑 SQL Azure。Access 2010 还使产品能够使用在 Azure 操作系统上运行的基于云的 SQL 服务器版本。

因此，您可以考虑使用 SQL Azure，但每月大约需要 10 美元。

我认为每月 6 美元的 Office 365 交易是最好的选择（并且您可以获得 lync 通信，它为您的客户提供远程桌面支持，或者可能支持此应用程序！）。实际上，我认为 Lync 仅凭这 6 美元就值了。折腾大多数 SharePoint 功能和文档共享（包括免费的基于 Web 的 Word 和 Excel），这很难被击败。

因此，这里不清楚为什么您要避免使用 Office 365，但必须在此处采用某种服务器设置，而且我不知道有任何系统允许从您的桌面客户端软件（例如 Access）进行免费外部连接。

我认为最好的解决方案是 365 与 Access 一起使用。

我过去使用的另一个低成本解决方案是考虑一些非常低成本的网络托管站点，这些站点也允许外部连接到他们的数据库。事实上，我这样做了很多年（我什至没有使用网站托管！）。我只是购买了每月的网站，并使用了“连接”外部数据库服务器的能力，该数据库服务器是网络托管包的一部分。我这样做了很多年，而且成本非常低。因此，我将 Access 前端部署到多个地方并使用这个便宜的网络托管帐户。

然而，我现在放弃了这种低成本的网络设置，因为 Office 365 的到来比我使用的那个便宜的 9 美元网络包的成本还要低。

所以，归根结底，我不认为有任何允许外部数据库连接的免费托管，但目前成本最低的方法是 office 365。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:03:04.673

基于云并不意味着您必须以不同的方式考虑您的数据库后端，您可以希望坚持使用 MS 访问，但是由于 Access 本身不支持远程连接，因此您需要为您的云服务器设置一个 VPN 以便连接到 .mdb、.aacdb 文件。

专用数据库服务器始终是一个不错的选择（MySql、Sql Server Express、Postgre SQL 以及免费的），但您始终需要确保安装了必要的驱动程序（不应该是世界末日）

至于谷歌表单，我真的没有太多经验，但我想谷歌会尽一切努力确保它们可以相对容易地用现有的数据库产品实现。

# mysql - 在 mysql 中使用内部连接语法更新表

> ID：11962694
> 
> 赞同：0
> 
> 时间：2012-08-15T00:29:00.137
> 
> 标签：mysql, sql, join, sql-update, inner-join

我很好奇如何使用内部连接更新表。如果我运行以下语句：

```
update tbl1 a
inner join tbl2 b using (id)
set a.val = b.val; 
```

`tbl1`没有匹配的记录会发生什么`tbl2`？它们会不会被更新并保持原样`tbl1`？他们会被删除吗？

我意识到我可以运行它并得到答案，但我也对它在幕后工作的机制感兴趣，并希望有人可以为我阐明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:30:24.150

**问：**`tbl1`中没有匹配的记录会`tbl2`怎样？

**A：**它们不会被更新，因为它们没有来自 的匹配项`tbl2`。根据定义，`INNER JOIN`当两个表中至少有一个匹配项时，关键字返回行。唯一可以从表中删除记录的关键字是`DELETE`DML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:32:47.493

更新语句在 tbl1 上运行。

该连接提供了一个过滤器，用于指定要在 tbl1 中更新哪些行。

作为额外的奖励，连接还为列提供了一个值。

update 语句不会也不能从表中删除行。

# php - Objective-C 从 PHP/MySQL Blob 下载图像到 NSData 对象？

> ID：11962700
> 
> 赞同：0
> 
> 时间：2012-08-15T00:30:35.260
> 
> 标签：php, objective-c, base64, blob, nsdata

我有一个 MySQL 数据库，其中有一堆存储为 blob 的图像。我可以有一个 PHP 脚本允许下载图像：

```
$result=mysql_query($query);
$image=mysql_result($result,0,"image");
echo base64_encode($logo); 
```

然后，我可以在 Objective-c 中使用 NSURLConnection 从该 PHP 脚本中下载图像。它为我提供了一个 NSData 对象，但它存储的是图像的 base64 字符串表示形式，而不是图像。

因此，我可以将 NSData 转换为字符串：

```
NSString* string = [[NSString alloc] initWithData:incomingData encoding: NSUTF8StringEncoding]; 
```

然后，我不确定如何将 base64 字符串转换为原始图像文件的 NSData。我怀疑，我什至可以将它直接从接收到的 NSData 对象转换为我需要的图像的 NSData。

获取存储在 NSData 对象中的图像的最简单路径是什么，就像我直接从文件中加载它一样：

```
NSData* image = [NSData dataWithContentsOfFile:@"image.png"]; 
```

谢谢！

# python - 当用户不提交要上传的图像时，blob 仍然存储在 blobstore 中吗？

> ID：11962709
> 
> 赞同：0
> 
> 时间：2012-08-15T00:32:49.000
> 
> 标签：python, google-app-engine, blobstore

我允许一次上传 10 张图片（直接上传到 blob 商店）。image_i 与表单中的 text_i 一起使用。

并非所有内容都需要图像，因此当用户提交表单时，image_i 通常没有选定的图像文件。

我预计只会为图像上传 blob（因为这就是在开发服务器上发生的情况）。

但是，当我上线时，我在 blob 存储中看到了与内容长度为 0 的图像相对应的大量空 blob：

> 斑点列表>（应用/八位字节流）0字节，2012-08-14十七点11分54秒AMIfv94Y7ie8cE84WZfEWGZw-NKJPE4iUaYn25zN1J-uftmoCESQoQFBimdiZr19suNBg_kUFW0P2frxIadmpd6LzPuFuA6o9UVq5UEqSvioXaBsDQeMwdJiH5gvh-8TtlZz8Rr1fRHHZd47zsiZpDiF1XsKa6A4aKTDvCnGEdMpW8lV6nlcFfU斑点与此内容类型不能被显示。

我该如何预防这些？这是我的代码：

```
class AdminHandler(webapp2.RequestHandler):
    #displays a form that includes content1, img1, content2, image2..
    def get(self):
        upload_url = blobstore.create_upload_url(self.uri_for('image-upload-handler'))
        template_values = {'page_name': 'admin', 'upload_url': upload_url}
        template = jinja_environment.get_template('admin.html')
        self.response.out.write(template.render(template_values))

class BlogPost(ndb.Model):
    date = ndb.DateProperty(required=True)
    title = ndb.StringProperty(required=True)
    blob_keys = ndb.BlobKeyProperty(repeated=True)
    content = ndb.TextProperty(repeated=True)
    content_order = ndb.StringProperty(repeated=True)

    @classmethod
    def get_blog_posts(cls):
        return cls.query().order(-cls.date)

class ImageUploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        password = self.request.get('password', None)
        if str(password).lower() == 'cyclist':
            day = self.request.get('day', None)
            month = self.request.get('month', None)
            year = self.request.get('year', None)

            day, month, year = map(int, (day, month, year))

            try:
                date = datetime(year, month, day)
                #date = datetime.today()
            except ValueError:
                date = datetime.today()

            title = self.request.get('title', None)

            blob_keys = [i.key() for i in self.get_uploads()]
            #assert(blob_keys)
            content = []
            content_order = []
            for i in range(1, 11):
                content_i = self.request.get("content{0}".format(i), None)
                if content_i:
                    content_i = cgi.escape(content_i)
                    content_i = "<br />".join(content_i.replace("\r\r", "\r").splitlines())

                    content.append(content_i)
                    content_order.append("content_next")

                img_i = self.request.get("img{0}".format(i), None)
                if img_i and not "Content-Length: 0" in str(img_i):
                    content_order.append("image_next")

            #assert(content)

            blog_post = BlogPost()
            blog_post.title = title
            blog_post.blob_keys = blob_keys
            blog_post.content = content
            blog_post.date = date
            blog_post.content_order = content_order
            blog_post.put()
            ok = True
            success = "success"
        else:
            ok = False
            success = "wrong password"

<form action="{{upload_url}}" enctype="multipart/form-data"  method="post">
    Date day e.g. 31: <input id='day' type="text" name="day" /><br />
    Date month e.g. 12: <input id='month' type="text" name="month" /><br />
    Date year e.g. 2012: <input id='year' type="text" name="year" /><br />

    Title: <input id="title" type="text" name="title" /><br />
    Content1: <br />
    <textarea id="styled2" name="content1"></textarea>
    <br />
    Image1:<input type="file" name="img1"/><br />
    ...<br />
    {% for i in range(2, 11) %}
    Content{{i}}: <br />
        <textarea id="styled" name="content{{i}}"></textarea>
    <br />
    Image{{i}}:<input type="file" name="img{{i}}"/><br />
    ...<br />
    {% endfor %}
    password: <input id="password" type="text" name="password" /><br />
    <input type="submit" value="Submit" /><br />
    <div id="error-box"></div>
</form> 
```

请注意，我必须在上线时添加 `and not "Content-Length: 0" in str(img_i):`，因为在开发服务器上它是一个空字符串，但在应用程序引擎上它不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:00:59.663

这是一个[已知问题](http://code.google.com/p/googleappengine/issues/detail?id=4548)，我建议你给它加星。

在修复之前，几乎可以选择在客户端捕获空上传并且不提交它们，或者在您的上传处理程序中从 blobstore 中删除长度为零的 blob。

# objective-c - 让自动旋转工作的最少步骤

> ID：11962713
> 
> 赞同：0
> 
> 时间：2012-08-15T00:33:51.117
> 
> 标签：objective-c, ios, autorotate

我正在尝试实现自动旋转，但我的应用不听我的！

该应用程序有一个标签栏控制器，它监督 3 个视图控制器。标签栏是在应用程序委托中以编程方式创建的。 **每个**视图控制器都有这个标准的简单方法：

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

应用程序委托如下所示：

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:gameVC, settingsVC, helpVC, nil];
self.window.rootViewController = self.tabBarController; 
```

此外，在目标摘要区域中，我激活了 iPad 和 iPhone 的所有 4 个方向。

在模拟器中，任何一个设备都不会发生旋转。我似乎错过了什么。也许还需要一个设置？有什么不正常的吗？项目中没有其他与旋转视图相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:20:10.503

您在回复中似乎没有说的唯一我能想到的就是更改 info.plist 下的设备方向。我从个人经验中知道，如果您单击目标摘要区域中支持的设备方向，它实际上可能不会在 Info 属性列表中更改它。通过执行以下操作，检查并确保在属性列表中选择了所有四个：

*   转到您的 Info.plist
*   查看支持的界面方向和支持的界面方向 (iPad)
*   确保它在两个下都有 4 个字符串：Portrait（底部主页按钮），Portrait（顶部主页按钮），Landscape（左主页按钮），Landscape（右主页按钮）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:02:09.507

为超级目的使用一个 ViewController，然后在每个视图控制器中继承它。在超级视图控制器中添加这个

*   (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{ return YES; }

所以，你只需要做一次就可以让它们自动旋转

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:37:28.267

来自 [http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref/doc/uid/TP40011313-CH3-SW26](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref/doc/uid/TP40011313-CH3-SW26)

> 标签栏控制器默认支持纵向，除非所有包含的视图控制器都支持这样的方向，否则不会旋转到横向。当设备方向发生变化时，标签栏控制器会查询其视图控制器数组。如果其中任何一个不支持方向，则标签栏控制器不会更改其方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:45:53.253

@Zack @AlexanderZats 这很微妙。我正在阅读这个 SO[答案](https://stackoverflow.com/questions/6748545/rotate-view-iphone-tabbar-app)，它把我带到了[这里](https://developer.apple.com/library/ios/#qa/qa1688/_index.html) 。第二个链接很好地讨论了应用程序可能无法旋转的不同可能原因。最后一点引起了我的注意。果然，我压倒一切`initWithNibName`，没有调用`super`它。我认为这最终意味着 VC 不在响应者链中。非常感谢所有给我想法和建议的人！

# python - 安装 python dateutil

> ID：11962714
> 
> 赞同：51
> 
> 时间：2012-08-15T00:34:04.117
> 
> 标签：python, django, python-dateutil

我试图为我的 django sweetpie 安装 python dateutil 但没有成功，

[http://labix.org/python-dateutil#head-2f49784d6b27bae60cde1cff6a535663cf87497b](http://labix.org/python-dateutil#head-2f49784d6b27bae60cde1cff6a535663cf87497b)

我在 c:/python27 中下载了 tar 文件并解压缩，

我收到以下错误消息，

```
**C:\Python27\Scripts>**easy_install dateutil-1.5
Searching for dateutil-1.5
Reading http://pypi.python.org/simple/dateutil-1.5/
Couldn't find index page for 'dateutil-1.5' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
No local packages or download links found for dateutil-1.5
Best match: None
Traceback (most recent call last):
  File "C:\Python27\Scripts\easy_install-script.py", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts', 'easy_install')()
  File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 171
2, in main
  File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 170
0, in with_ei_usage
  File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 171
6, in <lambda>
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 211
, in run
  File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 434
, in easy_install
  File "build/bdist.linux-i686/egg/setuptools/package_index.py", line 475, in fe
tch_distribution
AttributeError: 'NoneType' object has no attribute 'clone' 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-08-15T00:39:19.757

这将安装`tastypie`及其依赖项：

```
$ easy_install pip
$ pip install django-tastypie 
```

仅获取 dateutil：

```
$ pip install python-dateutil 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-15T00:54:22.783

我不确定这在 Windows 上是否有所不同，但您似乎没有引用实际链接（请参阅**阅读**行）。相反，试试这个：

```
easy_install python-dateutil 
```

这将（希望）得到你需要的包。另外，请参阅[这篇](https://stackoverflow.com/questions/879156/how-to-install-python-dateutil-on-windows)文章以了解类似的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-11T11:59:04.223

在 Windows 上：

只需使用以下代码，

```
$ pip install python-dateutil 
```

如果您想使用 easy_install 尝试以下命令，（以管理员身份运行命令提示符 CMD）

```
$ easy_install python-dateutil 
```

在 Ubuntu 上：

对于 Ubuntu 操作系统，使用以下代码，

```
sudo apt-get install python-dateutil 
```

# php - PHP 和 AJAX onclick 重定向

> ID：11962715
> 
> 赞同：-1
> 
> 时间：2012-08-15T00:34:20.143
> 
> 标签：php, html, ajax

我正在使用 Ajax 从数据库中填充下拉菜单，我的问题是如何将它与从数据库返回的 CARD_ID 一起重定向到页面？

现在，当我单击它时，它会在搜索栏中显示卡名称，这是我想要的一部分，但现在我需要重定向的另一半。我怎样才能做到这一点？

```
<?php
    $mysqli = mysqli_connect('localhost', 'root', '', 'draftdb');

if(mysqli_connect_errno()) 
{
    echo "Connection Failed: " . mysqli_connect_errno();
    exit();
}

    $str = $_GET['content'];
    if(strlen($str))
    {
        $sel = mysqli_query($mysqli, "select CARD_NAME, CARD_ID,CARD_TYPE from cards where CARD_NAME like '".trim($str)."%'");
        if(mysqli_num_rows($sel))
        {
            echo "<table border =\"0\" width=\"100%\">\n";
            if(mysqli_num_rows($sel))
            {
                echo "<script language=\"javascript\">box('1');</script>";
                while($row = mysqli_fetch_array($sel))
                {
                    $card_info = str_ireplace($str,"<b>".$str."</b>",($row['CARD_NAME']));
                    $card_type = str_ireplace($str,"<b>".$str."</b>",($row['CARD_TYPE']));

                    echo "<tr id=\"word".$row['CARD_ID']."\" onmouseover=\"highlight(1,'".$row['CARD_ID']."');\" onmouseout=\"highlight(0,'".$row['CARD_ID']."');\" onClick=\"display('".$row['CARD_NAME']."');\" >\n<td>".$card_info." ".$card_type."</td>\n</tr>\n";

                }
            }
            echo "</table>";
        }
    }
    else
    {
        echo "<script language=\"javascript\">box('0');</script>";
    }
?> 
```

* * *

的JavaScript。

```
subject_id = '';
function handleHttpResponse() {
    if (http.readyState == 4) {
        if (subject_id != '') {
            document.getElementById(subject_id).innerHTML = http.responseText;
        }
    }
}
function getHTTPObject() {
    var xmlhttp;
    /*@cc_on
    @if (@_jscript_version >= 5)
        try {
            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (E) {
                xmlhttp = false;
            }
        }
    @else
    xmlhttp = false;
    @end @*/
    if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
        try {
            xmlhttp = new XMLHttpRequest();
        } catch (e) {
            xmlhttp = false;
        }
    }
    return xmlhttp;
}
var http = getHTTPObject(); // We create the HTTP Object

function getScriptPage(div_id,content_id)
{
    subject_id = div_id;
    content = document.getElementById(content_id).value;
    http.open("GET", "script_page.php?content=" + escape(content), true);
    http.onreadystatechange = handleHttpResponse;
    http.send(null);
    if(content.length>0)
        box('1');
    else
        box('0');

}   

function highlight(action,id)
{
  if(action)    
    document.getElementById('word'+id).bgColor = "#C2B8F5";
  else
    document.getElementById('word'+id).bgColor = "#F8F8F8";
}
function display(word)
{
    document.getElementById('text_content').value = word;
    document.getElementById('box').style.display = 'none';
    document.getElementById('text_content').focus();
}
function box(act)
{
  if(act=='0')  
  {
    document.getElementById('box').style.display = 'none';

  }
  else
    document.getElementById('box').style.display = 'block';
} 
```

html

```
<div class="ajax-div">

    <div class="searchbar">

     <input type="text" onKeyUp="getScriptPage('box','text_content')" id="text_content">

    </div>

    <div id="box"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:06:38.533

我不确定您要做什么，但似乎您想要这样的东西：

1-更改显示行的方式，以便将 ID 也发送到您的函数：

```
echo "<tr id=\"word".$row['CARD_ID']."\" onmouseover=\"highlight(1,'".$row['CARD_ID']."');\" onmouseout=\"highlight(0,'".$row['CARD_ID']."');\" 
   onClick=\"display('".$row['CARD_NAME']."', " . $row['CARD_ID'] . ");\" >\n<td>".$card_info." ".$card_type."</td>\n</tr>\n";
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

2-更改您的`display`功能以重定向

```
function display(word, id)
{
    // document.getElementById('text_content').value = word;
    // document.getElementById('box').style.display = 'none';
    // document.getElementById('text_content').focus();
    window.location.href = "some_page.php?card_id=" + id;
} 
```

我已经注释掉了原来的行，因为无论如何在你要离开的页面上做一些事情似乎没有多大意义。`word`如果这是您正在寻找的解决方案，您也可以完全删除该参数。

# iphone - 如何仅使用通讯录中的电子邮件地址访问联系人？

> ID：11962727
> 
> 赞同：0
> 
> 时间：2012-08-15T00:37:04.167
> 
> 标签：iphone, ios, email, contacts, addressbook

我正在访问所有用户联系人并通过应用程序向他们发送电子邮件。如果他们有电子邮件地址，我可以访问所有联系人。如果他们没有电子邮件地址，那么它会给我一个错误，我试图在尝试将地址添加到地址列表之前检查他们是否有电子邮件地址。我正在使用此代码。它在这里的 if 语句行给了我一个错误： if ((ABMultiValueCopyValueAtIndex(email, 0) != NULL))

如何仅访问具有电子邮件地址的联系人？

```
NSMutableArray* contactsArray = [NSMutableArray new];
ABAddressBookRef m_addressbook = ABAddressBookCreate();

CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);
for (int i=0;i < nPeople;i++)
{
    NSMutableDictionary* tempContactDic = [NSMutableDictionary new];
    ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);
    CFStringRef firstName, lastName;
    firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
    NSString *name = [NSString stringWithFormat:@"%@ %@", firstName, lastName];
    [tempContactDic setValue:name forKey:@"name"];

    //fetch email id
    NSString *strEmail;
    ABMultiValueRef email = ABRecordCopyValue(ref, kABPersonEmailProperty);

    if ((ABMultiValueCopyValueAtIndex(email, 0) != NULL))
    {

    CFStringRef tempEmailref = ABMultiValueCopyValueAtIndex(email, 0);
    strEmail = (__bridge  NSString *)tempEmailref;

    [contactsArray addObject:strEmail];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:02:46.947

该错误是因为您试图通过复制数组中的第一项来检查是否有可用的电子邮件地址并检查值是否为`NULL`. 但如果数组为空，则无法从中复制任何项目。

您应该做的是检查数组是否包含任何项目：

```
if (ABMultiValueGetCount(email) > 0) {
    // There is at least one item in the email array/

} 
```

另请注意，您的代码仅复制联系人的第一个电子邮件地址，如果为该联系人设置了超过 1 个电子邮件，您可能希望循环通过电子邮件数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:25:24.293

您可以使用此代码从您的联系人中获取所有用户的所有电子邮件。

```
- (void) getEmailsOfAllContacts
{
    ABAddressBookRef _addressBookRef = ABAddressBookCreate();
    NSArray * allPeople = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(_addressBookRef);

    for (id record in allPeople)
    {        
        CFTypeRef emailProperty = ABRecordCopyValue((__bridge ABRecordRef)record, kABPersonEmailProperty);

        NSArray * allEmailArray = ((__bridge NSArray *)ABMultiValueCopyArrayOfAllValues(emailProperty));

        NSString * email;

        for (int i = 0; i < [allEmailArray count]; i++)
        {
            email = [allEmailArray objectAtIndex: i];
            if (isEmpty(email) == NO)
            {
                [_allContactsEmailArray addObject: email];
            }
        }
    }

    CFRelease(_addressBookRef);
    allPeople = nil;
} 
```

# ajax - 典型的表单验证方法

> ID：11962728
> 
> 赞同：1
> 
> 时间：2012-08-15T00:37:51.867
> 
> 标签：ajax, validation, post

我希望更好地理解使用 AJAX 进行表单验证的典型方法。

我找到了一些关于这种方法的信息，但有时很难破译什么是标准做法，什么是黑客。

在我的场景中，这是一个常见的场景，我有一个用户提交的动态表单，我想确保表单输入是有效的。如果表单输入未通过验证，我想重新显示提交的输入表单并显示错误消息。

根据我的阅读，最佳实践方法似乎是在提交时执行 AJAX POST，本质上是发布整个表单。服务器处理验证发布项目的 AJAX 发布，如果所有项目都有效，则对它们进行操作（更新、插入等到数据库）。最后，AJAX 响应返回验证结果。如果验证结果表明成功，则会发生简单的重定向（不会重新发布表单，因为表单输入已被处理并在 AJAX 请求中提交到数据库）。如果验证结果指示错误，则会显示错误并且不会发生重定向。

这是正确的方法吗？应该在 AJAX POST 期间处理表单输入，只在回调中留下重定向，还是最好在回调后通过重新发布表单来处理表单输入？

重新发布表格对我来说没有意义。在这种情况下，出于安全原因，我认为您必须两次验证数据......无论是在 AJAX 帖子还是重新发布。

我也有可能错过了一个更好、更标准的方法。谢谢。

# html - 在引导程序 2 中将 div 列与流体布局对齐

> ID：11962729
> 
> 赞同：0
> 
> 时间：2012-08-15T00:37:55.870
> 
> 标签：html, css, twitter-bootstrap

我使用`Bootstrap 2`. 一列包含两个`div`，另一列包含三个`div`。两列都是`span6`。小提琴就[在这里](http://jsfiddle.net/6xr6X/1/)。

我尝试`div`使用 CSS 调整左列中两个 s 的高度，使顶部占浏览器窗口高度的 62.5%，而底部占其余 37.5%。`div`右栏中的三个s 也是如此。但是有几个问题/问题：

1.  blocks/ `div`s 的高度不会垂直填满窗口，每个 block/ 的高度`div`不会改变。
2.  如何让`div`左边两个s的总高度等于`div`右边三个s的总高度，同时尊重每列内的相对高度比（`left: 62.5%, 37.5%; right: 35%, 30%, 35%`）
3.  如何调整块/`div`秒之间的填充？

我希望所有这些都可以在没有任何 Javascript 的情况下实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:19:36.680

我尝试了一些东西，希望对你有所帮助。所以，答案是：

1.  每个 BlocX div 的高度没有改变，因为您没有设置`body`. 在旅游案例中，主体具有自动高度，由`body`.

2.  往下看。

3.  这些“填充”实际上是 class 中的边距`.well`。因此，请避免使用该类或覆盖设置。

最后，我们有这样的代码：

HTML：

删除了 class `.well`，其他一切都一样。

CSS：

```
html{height:100%;}

.body-background {
    padding-top: 10px;
    background-color: #D1D1D1;
    height:100%;
}
.container-fluid, .row-fluid, .span6
{
    height:100%;
}

#A-b {
    min-height: 62.5%;
    height: 62.5%;
    background-color: #FFE0C2;
}

#B-b {
    min-height: 37.5%;
    height: 37.5%;
    background-color: #4D4D4D;
}

#C-b {
    min-height: 35%;
    height: 35%;
    background-color: #969696;
}

#D-b {
    min-height: 30%;
    height: 30%;
    background-color: #57BCFF;
}

#E-b {
    min-height: 35%;
    height: 35%;
    background-color: #183547;
} 
```

我们给`html`和`body`元素，然后对,和`height:100%;`做同样的事情。现在我们在[**DEMO**](http://jsfiddle.net/6xr6X/3/)中得到了这样的结果。`.container-fluid``.row-fluid``.span6`[](http://jsfiddle.net/6xr6X/3/)

 **注意：在小于 768px 的分辨率下，使用媒体查询来设置 BlockX 和所有其他元素的高度。另外，不要直接在等上设置高度`span6`。`row-fluid`这只是示例。在实时站点中，使用一些类来覆盖引导程序中的类。**

# python - Django - 从字符串中获取 ManyRelatedManager

> ID：11962730
> 
> 赞同：0
> 
> 时间：2012-08-15T00:37:55.483
> 
> 标签：python, django

我有一个这样的模型：

```
class Book(models.Model):
     authors = models.ManyToManyField(User) # User is a separate model
     readers = models.ManyToManyField(User)
     # ... rest of code 
```

我正在尝试在我的视图之外创建一个函数，该函数需要三个输入：一本书、一个字符串和一个用户。User 被添加到 Book 的 ManyRelatedManager 中，其对应的字段名称与字符串匹配。

例如，如果函数被调用`foo`：

```
def foo(book, field_name, user):
    f = #... this is where I need help, should be a ManyRelatedManager that belongs to 'book'
    f.add(user)
    book.save() 
```

调用`foo(Book.objects.get(id=1), 'authors', User.objects.get(id=1))`将导致 ID 为 1 的用户被添加到 ID 为 1 的书中的字段“作者”中。类似地，调用`foo(Book.objects.get(id=1), 'readers', User.objects.get(id=1))`将导致 ID 为 1 的用户被添加到 ID 为 1 的书中的字段“读者”中。

我尝试使用`Book._meta.get_field()`，但这返回了 ManyToManyField 本身，而不是 ManyRelatedManager。是否有某种内置方法可以获取字段名称与字符串匹配的 ManyRelatedManager？

抱歉，如果该描述令人困惑，我的问题很难用语言表达。如果有人能理解我的问题，我们将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:41:27.367

[`getattr()`](http://docs.python.org/library/functions.html#getattr)可以从传递给它的字符串中获取对象的属性。

# jquery - 使用 jQueryMobile 滑动时可滚动的 div

> ID：11962731
> 
> 赞同：0
> 
> 时间：2012-08-15T00:38:04.673
> 
> 标签：jquery, css, jquery-mobile

我正在尝试创建一个适当的可滚动 DIV，当向左或向右滑动时，它将沿左右移动。我已经完成了使用 CSS 创建一个可水平滚动的 DIV 的基本页面的所有操作，但我没有找到太多关于 jQueryMobile 的文献（或者我正在寻找所有错误的地方）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:47:56.230

您可以使用以下内容进行设置：

```
// jQuery Mobile's version of Doc Ready
$(document).bind('pageinit', function(){
    $('.div').bind('swipe', function(){
        // Your code here
    });
}); 
```

您可以在此处找到文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

# mysql - AWS RDS 将生产数据库移入暂存。最有效的方法？

> ID：11962732
> 
> 赞同：2
> 
> 时间：2012-08-15T00:38:44.073
> 
> 标签：mysql, amazon-web-services, amazon-rds

我需要知道将生产数据库移动到暂存环境的最有效方法吗？

使用 AWS RDS。我尝试过搜索，但没有找到使用现有 RDS 快照替换我们的暂存数据库的方法。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:18:50.330

您可以从 RDS 机器上获取一个 mysql Dump 并将其推送到 Staging 机器

```
mysqldump -P port_no -h RDS_IP -u mysql_user -ppassword database_name 
```

# c++ - VS2010 访问冲突，同时使用 F10 或 F11 步进代码

> ID：11962743
> 
> 赞同：1
> 
> 时间：2012-08-15T00:40:35.047
> 
> 标签：c++, visual-studio-2010

我有一个在调试和发布模式下运行良好的 C++ 本机代码。但是有一个小问题，如果我调试我的程序并在我的代码中设置断点 Visual Studio 停止断点然后如果我按 F5 继续运行代码正常运行但是如果我按 F10 或 F11 Visual Studio 捕获 AccessViolation 并且程序将由于异常不在我的代码中的任何地方并且我不处理它而被停止。

此错误不会发生在控制台应用程序中，而是在 MFC 应用程序中或当我使用 .NET EXE 调试我的本机 DLL 时。

我有一个 64 位 Win7 和 VS2010 SP1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T00:48:20.010

对不起！！我找到了解决办法，你必须关闭Tools/Options/Debugging/Native/Enable RPC调试。一切都会好起来的。但是我不知道是否要调试对外部服务器的RPC调用，该怎么办，所以如果有人帮助我并找到失败的原因，那就太好了

# push-notification - 通过 Web UI 安排推送通知

> ID：11962744
> 
> 赞同：0
> 
> 时间：2012-08-15T00:40:51.847
> 
> 标签：push-notification, scheduled-tasks, crontab, celery

我正在研究创建一个简单的 Web 界面，用于安排 iOS 推送通知在特定时间或将来定期发生。

例如，有人可以使用此通知数据：

```
"This is a periodic push notification!" - Every Monday - Expires Oct 31
"This will only happen once!" - Sept 20 
```

第一个在每个星期一执行，直到 10 月 31 日，第二个在 9 月 20 日执行。

我已经对可以安装的一些服务器软件进行了一些研究来做这种事情，但是对于实现这种事情的推荐软件我有点茫然。是否有现成的软件可以推荐用于安排推送通知？

如果没有，我也很好奇可以让我通过网络表单的输入来安排我自己的任务的软件。我可以通过 PHP 添加/删除 cron 任务吗？或者更适合使用像[芹菜](http://celeryproject.org/)这样的东西来做这种事情？我想因为我没有太多的 Web 开发经验，所以我不确定在此之前最合适的方法和工具是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:01:09.167

您不必为特定事件制定 cron 任务，您必须通过 cron 以定义（但高）频率调用程序。为您描述的目的而拥有更新 CRON 的程序的 TMHO 是一个坏主意。

然后这个特定的程序必须根据你想要的业务逻辑发送通知。我通常在 PHP 中实现这样的程序，然后我可以通过 cli 或 wget 调用它们（这种情况需要更多的工作来避免安全问题，因为攻击者也可以调用它）。

# jquery - jQuery UI Datepicker - setDate 不起作用

> ID：11962747
> 
> 赞同：12
> 
> 时间：2012-08-15T00:41:37.210
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我知道这个问题以前在 SO 上被问过，但我不知道我错过了什么。这是一个简单的[Fiddle](http://jsfiddle.net/nosfan1019/tbYPf/1/)。

jQuery：

```
var myDate = new Date(1978,2,11) 
$('#datepicker').datepicker('setDate', myDate); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-15T00:46:37.527

您必须先初始化日期选择器：

```
 $('#datepicker').datepicker(); 
```

当您传递 setDate 时，您正在调用一个假设 datepicker 已在该对象上初始化的方法。

[http://jsfiddle.net/tbYPf/4/](http://jsfiddle.net/tbYPf/4/)

# html - 从 XML 天气提要中删除一些标签

> ID：11962748
> 
> 赞同：0
> 
> 时间：2012-08-15T00:41:54.123
> 
> 标签：html, xslt, rss, tags

我正在尝试通过 RSS XML 在我的网站上格式化天气提要，这很容易实现。问题是它会在页面上呈现级联，我想让它在页面上运行。

据我所知，看起来我需要摆脱`<br /><br />`标签，以便它们彼此对齐。

XML 源代码如下所示：

```
<description>
    <![CDATA[ <b>Wednesday</b>
    <br />
    <img src="/images/icons/fcast_30/mostly_cloudy.gif">
    <br /> Mostly cloudy<br /> -1&#176;C - 14&#176;C
    <br /><br />
    <b>Thursday</b>
    <br />
    <img src="/icons/fcast_30/frost_then_sunny.gif">
    <br /> Frost then sunny<br /> 1&#176;C - 13&#176;C
    <br /><br />
    <b>Friday</b>
    <br />
    <img src="/images/icons/fcast_30/rain.gif">
    <br /> Rain<br /> 2&#176;C - 11&#176;C
    <br /><br />
    <b>Saturday</b>
    <br />
    <img src="/images/icons/fcast_30/clearing_shower.gif">
    <br /> Clearing shower<br /> 0&#176;C - 12&#176;C
    <br /><br /> ]]>
</description> 
```

我的输出 XSL 代码看起来有点像这样：

```
<xsl:for-each select="rss/channel">
    <xsl:value-of select="(item/title)[2]"/>
    <xsl:value-of select="substring((item/description)[1],30,15)" disable-output-escaping="yes"/>
    <xsl:value-of select="(item/description)[2]" disable-output-escaping="yes"/>
</xsl:for-each> 
```

输出呈现如下：

**星期三**
IMG.gif
多云
-1°C - 14°C

**星期四**
IMG.gif 有
霜然后晴
1°C - 13°C

**星期五**
IMG.gif
雨
2°C - 11°C

**星期六**
IMG.gif 晴雨
0
°C - 12°C

我将如何`<br /><br />`在每天之后删除标签，使它们彼此对齐，但留下其他单数`<br>`标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:23:58.543

**正如其他人已经指出的那样，想要的转换是不可能的，除非删除 CDATA 部分（使标记只是常规的、普通的、一维文本）**。

* * *

**这个完整的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "br[preceding-sibling::node()
       [self::* or self::text()[normalize-space()]
        ][1]
        [self::br]
    or
     following-sibling::node()
       [self::* or self::text()[normalize-space()]
        ][1]
        [self::br]
    ]"/>
</xsl:stylesheet> 
```

**当应用于删除 CDATA 部分并更正许多格式错误后获得的 XML 文档时**：

```
<description>
        <b>Wednesday</b>
        <br />
        <img src="/images/icons/fcast_30/mostly_cloudy.gif"/>
        <br /> Mostly cloudy<br /> -1&#176;C - 14&#176;C
        <br /><br />
        <b>Thursday</b>
        <br />
        <img src="/icons/fcast_30/frost_then_sunny.gif"/>
        <br /> Frost then sunny<br /> 1&#176;C - 13&#176;C
        <br /><br />
        <b>Friday</b>
        <br />
        <img src="/images/icons/fcast_30/rain.gif"/>
        <br /> Rain<br /> 2&#176;C - 11&#176;C
        <br /><br />
        <b>Saturday</b>
        <br />
        <img src="/images/icons/fcast_30/clearing_shower.gif"/>
        <br /> Clearing shower<br /> 0&#176;C - 12&#176;C
        <br /><br />
</description> 
```

**产生想要的正确结果**：

```
<description>
   <b>Wednesday</b>
   <br/>
   <img src="/images/icons/fcast_30/mostly_cloudy.gif"/>
   <br/> Mostly cloudy<br/> -1°C - 14°C
            <b>Thursday</b>
   <br/>
   <img src="/icons/fcast_30/frost_then_sunny.gif"/>
   <br/> Frost then sunny<br/> 1°C - 13°C
            <b>Friday</b>
   <br/>
   <img src="/images/icons/fcast_30/rain.gif"/>
   <br/> Rain<br/> 2°C - 11°C
            <b>Saturday</b>
   <br/>
   <img src="/images/icons/fcast_30/clearing_shower.gif"/>
   <br/> Clearing shower<br/> 0°C - 12°C
            </description> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制每个匹配的节点，并为其选择执行。

2.  有一个覆盖标识模板的模板。它匹配任何不是纯空格文本节点`br`的*第一个*兄弟（前兄弟或后兄弟）也是`br`.

3.  这个覆盖模板的主体是空的，它有效地`br`从输出中“删除”任何匹配的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:00:47.627

首先，**不要**将 XML 放在 CDATA 部分中，除非您被迫这样做。

假设您已将 XML 内容移到 CDATA 部分之外，请应用具有标识转换和此模板的 XSLT 样式表...。

```
<xsl:template match="br[
  preceding-sibling::node()[self::br] |
  following-sibling::node()[self::br] ]" /> 
```

此模板将删除相邻的 <br> 元素。如果两个 <br> 之间有任何文本，即使只是空格，<br> 也不会被删除。

* * *

### 笔记

这个解决方案是错误的。请参阅 Dimitre 的回答。

# python - 如何在网站的所有页面上实现 Haystack？

> ID：11962749
> 
> 赞同：0
> 
> 时间：2012-08-15T00:41:55.650
> 
> 标签：python, django, django-templates

我正在创建一个像 craigslist 这样的网站，需要实现一个搜索功能，客户可以在其中搜索关键术语并查看结果。例如，搜索“灯”将创建一个包含所有与灯相关的帖子的结果页面。

我正在使用 Haystack / Solr 搜索内容。但是，目前，用户必须转到特定的搜索页面，然后才能缩小搜索范围。

我该如何实现它，以使搜索栏可以出现在每个页面的标题中？我正在使用 Django。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:14:18.070

让所有页面都扩展一个基本模板是个好主意。因此，您可以拥有一个`base.html`包含站点基本结构（页眉、页脚、样板）的模板（例如 ）。然后，您可以为站点的每个页面扩展此模板。（即`{% extends 'base.html' %}`）。

按照这种结构，您应该能够将搜索表单放在基本模板中，并使其出现在所有页面上。

# php - 禁用带时间戳的加载脚本

> ID：11962750
> 
> 赞同：2
> 
> 时间：2012-08-15T00:42:00.583
> 
> 标签：php, javascript, ajax, codeigniter

我想在加载脚本时禁用时间戳，因为它总是在文件 URL 之后的查询字符串中包含时间戳。请看一下你会知道的图像。

![在此处输入图像描述](../Images/497ad4c8ec1e6afed4586b3cab173a80.png)

我还使用选项设置了 Ajax `cache: true`。看这里的代码：``js $.ajax({ url: url data: {}, type: 'post', cache: true, dataType: 'json', success: function (data, status) { //something here } });

```
and also I have set meta tag to the header of the HTML.
```html
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Pragma" content="Public">
<meta http-equiv="Cache-control" content="public">
<meta name="keywords" content="something">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript"> 
```

我正在使用 jQuery v1.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:05:19.553

我不确定为什么 jQuery 试图加载自己，但这似乎与`$.getScript()`调用有关。

您可以考虑尽可能高地添加以下代码段：

```
$.ajaxSetup({
    cache: true
}); 
```

将其`cache: true`放入您的`$.ajax()`不会`$.getScript()`以任何方式影响，这就是您在该屏幕截图中看到的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:47:22.983

我对codeIgniter的直接了解不多，但是应该和CakePHP中的一样。您应该有一个类似于 config 的文件名或包含调试级别的类似文件名。当它设置为调试模式时，它可能会自动为脚本添加时间戳并以不同的方式处理堆栈中的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T03:02:17.677

```
$.ajaxPrefilter('script', function(options) {
    options.cache = true;
});

// or 

+ function($) {
    $.cachedScript = function(url, options) {
        // Allow user to set any option except for dataType, cache, and url
        options = $.extend(options || {}, {
            dataType: "script",
            cache: true,
            url: url
        });

        // Use $.ajax() since it is more flexible than $.getScript
        // Return the jqXHR object so we can chain callbacks
        return $.ajax(options);
    };
}(jQuery);

// now, you can use $.cachedScript() 
```

可以去查看文档[$.getScript()](https://api.jquery.com/jquery.getscript/)

# wordpress - 用于 wordpress 的 Shopp 插件 - 具有多个文件的数字产品

> ID：11962752
> 
> 赞同：0
> 
> 时间：2012-08-15T00:42:14.670
> 
> 标签：wordpress, shopp

试图弄清楚是否有一个扩展允许在**Shopp plugin** for **wordpress**中为数字插件选择多个文件。

我们有一份想要按季节销售的 mp3（播客剧集）目录，我们还希望以“大包装”的形式出售这些季节，如果您全部购买，它们会更便宜。我们将上传一个包含所有季节的单个 zip 文件，但这将是大约 30gb。

目前，Shopp 中的附加组件功能非常接近我们想要的，但它需要用户选择选项，而不是默认启用它们。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T10:11:27.840

您可以在主题的 functions.php 中添加一个函数，以便在将产品添加到购物车时自动选择附加组件。然后将该函数添加到 add-to-cart 挂钩。

```
add_action('shopp_cart_add_item', 'my_function');
function my_function ( $Item ) {
// do stuff
} 
```

# delphi - 将 Chrome 检测为与 Windows 中的 html 文件关联的浏览器

> ID：11962753
> 
> 赞同：6
> 
> 时间：2012-08-15T00:42:20.257
> 
> 标签：delphi, google-chrome, file-association

我们通过我们的应用程序提供安装在本地 (Windows) 硬盘上的 Flash 教程视频。我们的应用程序使用 ShellExecute 打开嵌入它们的 html 文件（在与 html 文件关联的任何浏览器中）。

显然，Chrome 最新的 Flash 播放器存在一个错误，无法播放*本地文件*（但网络上的文件很好。）

（坦率地说，我很惊讶谷歌没有修复这个错误。对我来说似乎是一个大问题......但也许没有多少人从网络以外的地方玩 Flash？）

Chrome 中的 about:plugins 屏幕上有一个解决方法，但我们不能要求我们的用户这样做。以下是解决方法的讨论：http: [//techsmith.custhelp.com/app/answers/detail/a_id/3518](http://techsmith.custhelp.com/app/answers/detail/a_id/3518)

我想为我的用户提供一个选项来打开我们的 html 文件 IE。 *如果 Chrome 是他们的默认浏览器*，那么我会显示一个复选框，上面写着令人尴尬的内容，例如“如果我们的教程视频无法播放，请选中此框以在 IE 中尝试它们。”

这个 XE2 代码（从两年前的 SO: [link](https://stackoverflow.com/questions/2577213/how-can-i-get-the-name-of-the-program-associated-with-a-file-extension-using-del)开始）仍然合理吗？

```
if pos('CHROME', UpperCase(GetAssociation('C:\Path\File.html')) > 0 then
  // Chrome is the default browser

function GetAssociation(const DocFileName: string): string;
var
  FileClass: string;
  Reg: TRegistry;
begin
  Result := '';
  Reg := TRegistry.Create(KEY_EXECUTE);
  Reg.RootKey := HKEY_CLASSES_ROOT;
  FileClass := '';
  if Reg.OpenKeyReadOnly(ExtractFileExt(DocFileName)) then
  begin
    FileClass := Reg.ReadString('');
    Reg.CloseKey;
  end;
  if FileClass <> '' then begin
    if Reg.OpenKeyReadOnly(FileClass + '\Shell\Open\Command') then
    begin
      Result := Reg.ReadString('');
      Reg.CloseKey;
    end;
  end;
  Reg.Free;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T00:59:55.327

如果您有磁盘上现有文件的实际完整路径，则可以改用[FindExecutable](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776419%28v=vs.85%29.aspx)。它更容易，并且不需要访问注册表，但它确实需要存在实际文件。

这是一个演示使用的 XE2 控制台应用程序：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils, ShellAPI, Windows;

var
  Buffer: array[0..MAX_PATH] of Char;
  Res: Integer;

begin
  FillChar(Buffer, SizeOf(Buffer), #0);
  Res := FindExecutable(PChar('C:\Path\File.html'), nil, Buffer);
  if Res > 32 then
    Writeln('Executable is ' + Buffer)
  else
    WriteLn(SysErrorMessage(Res));
  Readln;
end. 
```

您展示的方法将起作用，但`FindExecutable`更容易（代码更少）并且适用于 XP 及更高版本。

# css - 使用 CSS 在 div 中的图像下方对齐 2 跨度

> ID：11962759
> 
> 赞同：0
> 
> 时间：2012-08-15T00:42:42.783
> 
> 标签：css, html

我在一个 div 中有 3 个元素：2 个跨度和一个图像。我需要对齐图像下方的两个跨度，一个在左侧，一个在右侧。div 的宽度是 180 像素（如果重要的话）。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:51:15.863

HTML 代码：

```
<div>
    <img src="" width="" height="" alt="" />
    <span class="left"></span>
    <span class="right"></span>
</div> 
```

CSS 样式

```
div { overflow: hidden; width: 180px; }
span { display: block; }
.left { float: left; }
.right { float: right; } 
```

这应该可以，如果图像没有填充 div 元素，请将“ *clear: both* ”添加到*.left*

# c# - 数据合同问题

> ID：11962766
> 
> 赞同：2
> 
> 时间：2012-08-15T00:44:49.050
> 
> 标签：c#, wcf

我需要开发一个 web 服务，它将通过 SOAP 向 java 客户端公开。我们有一个定义明确的模式，用于在两个系统之间进行通信。现在我需要在我的 WCF 合同上公开一个操作，该合同接受 Schema 对象并将其存储在我们的数据库中。

我已按照以下内容开发 Web 服务。

*   在 wcf 中通过 basichttp 托管它
*   使用 xsd.exe 创建架构的对象模型
*   将模式作为操作的参数，例如 DoThis(SchemaObject schema)

由于这将在 WCF 中公开，因此我已经修改了 xsd 工具生成的对象模型。我们的模式具有多级嵌套，并且是由 4 个不同模式链接在一起的组合。xsd工具生成的对象图有抽象类、继承等。

为此，我已经在每个类上定义了 DataContract 属性并向其添加了命名空间，该命名空间已经存在于 XmlTypeAttribute 中。我还为每个属性添加了 DataMemebers。

架构中的一些属性是由工具使用 xmlarrayitem 属性定义的数组。

现在，当我使用 SOAP UI 发送请求时，对象没有按预期反序列化。几乎所有字段都以 null 的形式出现，它具有某种继承层次结构。我已将 KnownType 属性添加到适当的数据合同中，但仍然无法正常工作。

我的问题是：

*   这是开发网络服务的正确方法吗？

*   有没有办法避免放置数据合同和数据成员，而只使用 xsd 工具添加的序列化属性？

*   是否有必要使用 datacontract 属性，它不会与 xmlserialization 属性一起使用，因为它在 xml 反序列化的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:53:07.280

WCF 支持两种类型的序列化 -`DataContractSerializer`和`XmlSerializer`.

XSD.exe 生成具有所有必要`XmlSerializer`属性的强类型实体。您无需添加任何`DataContract`属性`DataMemeber`即可使用 WCF 中生成的类。

有关详细信息，请参阅 MSDN - [http://msdn.microsoft.com/en-us/library/ms733901.aspx](http://msdn.microsoft.com/en-us/library/ms733901.aspx)

还要非常小心 xsd.exe 生成的实体。正如您可能已经看到的那样，WCF 服务器会吃掉您可以在这些文件中执行的许多序列化更改，但这将对客户端造成重大更改，因为它们在 XSD 上中继。

如果可能的话，我会保留这些自动生成的实体而不做任何更改，以保证接口不会被破坏。您可以引入单独的 DTO 类以在业务层中使用。您可以在那里实现继承层次结构。

如果您觉得需要更改自动生成的类，一堆单元测试可以提供帮助。这些测试用例应该生成不同的数据集，将它们序列化为 XML，并通过 XSD 检查 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:11:14.263

从技术上讲，我没有看到您实施服务的方式有任何特别的缺陷。

但从架构的角度来看，这对我来说太复杂了。*发送“扁平*”数据结构并将复杂性隐藏在其他地方总是更容易。我会建议以下步骤

1.  制定一些特殊的“运输”方案，最大限度地使其扁平化。当您的模型更改时，它可以更轻松地更改服务。而且生成和处理 xsd 也不会那么痛苦。
2.  在通道的两侧编写特殊的转换器，将正常模型转换为“平面”，反之亦然。

# ios - 应用程序中的 iOS 在应用程序下次运行时询问密码

> ID：11962767
> 
> 赞同：0
> 
> 时间：2012-08-15T00:45:37.027
> 
> 标签：ios, in-app-purchase

我已经在我的 iOS 游戏中实现了应用内。应用程序内有效，但每次我测试它（使用测试帐户），下次我运行我的应用程序时，它会在我加载应用程序商店产品时立即询问我的登录名/密码（一旦应用程序发生发射）。如果我取消，它将在下次运行应用程序时再次询问用户凭据，依此类推，直到用户输入登录名/密码。

这是沙箱的问题还是我的实现有问题？我该如何解决？

这是我用于加载产品/购买的代码的相关部分：

```
class InAppIos::Private {
public:

    // ...

    void loadProducts(const std::vector<std::string> & identifiers) {
        NSMutableSet *nsids = [NSMutableSet setWithCapacity:identifiers.size()];

        for (unsigned int i = 0; i < identifiers.size(); ++i) {
            [nsids addObject:[NSString stringWithUTF8String:identifiers[i].c_str()]];
        }

        SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:nsids];
        request.delegate = productRequestDelegate;

        [request start];
    }

    void onProductsResponse(SKProductsResponse *response) {
        unsigned int count = response.products.count;

        InAppProductList products;

        for (unsigned int i = 0; i < count; ++i) {
            Pointer<InAppProduct> product(new InAppProductIos((SKProduct *)[response.products objectAtIndex:i]));
            products.push_back(product);

            productMap[product->getIdentifier()] = product;
        }

        listener->onProductsResponse(products);
    }

    // ...
};

void InAppProductIos::buy(unsigned int quantity) {
    if (!InApp::get()->isInAppEnabled()) {
        MessageBox::showMessageBox("Error", "Cannot process payment.", "OK");
        return;
    }

    SKMutablePayment *payment = [SKMutablePayment paymentWithProduct: product];
    payment.quantity = quantity;

    [[SKPaymentQueue defaultQueue] addPayment:payment];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:29:40.707

我认为发生这种情况是因为您尝试恢复交易a，或者您尚未将其从支付队列中删除。

# ruby-on-rails - Ruby on Rails Eventmachine 段错误

> ID：11962770
> 
> 赞同：0
> 
> 时间：2012-08-15T00:45:57.103
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, rvm

我的 rails 安装有一些非常奇怪的问题，非常感谢任何帮助。

这一切都始于我`bundle clean --force`希望通过一个项目解决一些 gem 问题。然后我运行了捆绑安装，但事情从来都不一样。首先，我`[BUG] cross-thread violation on rb_gc()`在运行时遇到了一个奇怪的错误`rails s`。运行后，`gem clean`我设法转移到一个新错误：

```
bundle exec rails s
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-0.12.10/lib/rubyeventmachine.bundle: [BUG] 分段错误
ruby 1.9.3p125（2012-02-16 修订版 34643）[x86_64-darwin11.3.0]

-- 控制帧信息 --------------------------------------------------------- --
c:0034 p:-17535289580530 s:0105 b:0105 l:000104 d:000104 顶部   
c:0033 p:---- s:0103 b:0103 l:000102 d:000102 CFUNC :要求
c:0032 p:0010 s:0099 b:0099 l:000091 d:000098 BLOCK /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies .rb:251
c:0031 p:0071 s:0097 b:0097 l:000096 d:000096 方法 /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies .rb:236
c:0030 p:0019 s:0092 b:0092 l:000091 d:000091 方法/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies .rb:251
c:0029 p:0150 s:0087 b:0087 l:000086 d:000086 TOP /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-0.12.10/lib/eventmachine.rb :66
c:0028 p:---- s:0085 b:0085 l:000084 d:000084 完成
c:0027 p:---- s:0083 b:0083 l:000082 d:000082 CFUNC：要求
c:0026 p:0010 s:0079 b:0079 l:000071 d:000078 BLOCK /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies .rb:251
c:0025 p:0071 s:0077 b:0077 l:000076 d:000076 方法 /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies .rb:236
c:0024 p:0019 s:0072 b:0072 l:000071 d:000071 方法/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies .rb:251
c:0023 p:0083 s:0067 b:0067 l:000066 d:000066 TOP /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin.rb :7
c:0022 p:---- s:0065 b:0065 l:000064 d:000064 完成
c:0021 p:---- s:0063 b:0063 l:000062 d:000062 CFUNC：要求
c:0020 p:0026 s:0059 b:0059 l:000039 d:000058 BLOCK /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime .rb:68
c:0019 p:---- s:0056 b:0056 l:000055 d:000055 完成
c:0018 p:---- s:0054 b:0054 l:000053 d:000053 CFUNC :each
c:0017 p:0091 s:0051 b:0051 l:000039 d:000050 BLOCK /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime .rb:66
c:0016 p:---- s:0045 b:0045 l:000044 d:000044 完成
c:0015 p:---- s:0043 b:0043 l:000042 d:000042 CFUNC :each
c:0014 p:0046 s:0040 b:0040 l:000039 d:000039 方法/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime .rb:55
c:0013 p:0021 s:0036 b:0036 l:000035 d:000035 方法/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler.rb :119
c:0012 p:0089 s:0032 b:0032 l:000031 d:000031 TOP /Users/yuletide/code/txtyourcity_rails/config/application.rb:7
c:0011 p:---- s:0030 b:0030 l:000029 d:000029 完成
c:0010 p:---- s:0028 b:0028 l:000027 d:000027 CFUNC：要求
c:0009 p:0016 s:0024 b:0024 l:000015 d:000023 BLOCK /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands .rb:53
c:0008 p:---- s:0021 b:0021 l:000020 d:000020 完成
c:0007 p:---- s:0019 b:0019 l:000018 d:000018 CFUNC :点击
c:0006 p:0702 s:0016 b:0016 l:000015 d:000015 TOP /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands .rb:50
c:0005 p:---- s:0012 b:0012 l:000011 d:000011 完成
c:0004 p:---- s:0010 b:0010 l:000009 d:000009 CFUNC :require
c:0003 p:0061 s:0006 b:0006 l:000df8 d:0008c8 EVAL 脚本/rails:6
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 完成
c:0001 p:0000 s:0002 b:0002 l:000df8 d:000df8 顶部   

-- Ruby 级别的回溯信息 ----------------------------------------
脚本/rails:6:in `'
脚本/rails:6:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:50:in `'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:53:in `block in '
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
/Users/yuletide/code/txtyourcity_rails/config/application.rb:7:in `'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin.rb:7:in `'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-0.12.10/lib/eventmachine.rb:66:in `'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'

-- C级回溯信息--------------------------------------------------------

   请参阅 ~/Library/Logs/CrashReporter 下的崩溃报告日志文件或
   /Library/Logs/CrashReporter，了解更多详细信息。

-- 其他运行时信息 --------------------------------------------------------- --

* 加载脚本：script/rails

*加载的功能：

    0 枚举器.so
    1 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/enc/encdb.bundle
    2 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/enc/trans/transdb.bundle
    3 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    4 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/rbconfig.rb
    5 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    6 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    7 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
    8 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb
    9 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/pathname.bundle
   10 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/pathname.rb
   11 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   12 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/etc.bundle
   13 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb
   14 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   15 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
   16 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   17 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   18 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   19 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/psych.bundle
   20 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/stringio.bundle
   21 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/node.rb
   22 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/stream.rb
   23 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/document.rb
   24 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/sequence.rb
   25 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/scalar.rb
   26 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/mapping.rb
   27 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/alias.rb
   28 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes.rb
   29 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/streaming.rb
   30 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/visitor.rb
   31 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin11.3.0/strscan.bundle
...剪断...
2.0.2/lib/simple_form/wrappers/builder.rb
  第629章
  630 /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/simple_form-2.0.2/lib/simple_form/wrappers/single.rb
  631 /用户/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/simple_form-2.0.2/lib/simple_form/wrappers/root.rb
  第632章 /Users/yuletide/.rvm/gems/ruby-1.9.3-p125/gems/simple_form-2.0.2/lib/simple_form.rb
  第633章 /Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/timeout.rb

[笔记]
您可能在 Ruby 解释器或扩展库中遇到了错误。
欢迎提交错误报告。
详情：http://www.ruby-lang.org/bugreport.html

[1] 1577 中止捆绑 exec rails s

```

宝石环境

```
RubyGems 环境：
  - 红宝石版本：1.8.21
  - 红宝石版本：1.9.3（2012-02-16 补丁级别 125）[x86_64-darwin11.3.0]
  - 安装目录：/Users/ayule/.rvm/gems/ruby-1.9.3-p125
  - RUBY 可执行文件：/Users/ayule/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
  - 可执行目录：/Users/ayule/.rvm/gems/ruby-1.9.3-p125/bin
  - 红宝石平台：
    - 红宝石
    - x86_64-darwin-11
  - 宝石路径：
     - /Users/ayule/.rvm/gems/ruby-1.9.3-p125
     - /Users/ayule/.rvm/gems/ruby-1.9.3-p125@global
  - 宝石配置：
     - :update_sources => 真
     - ：详细 => 真
     - ：基准 => 假
     - ：回溯 => 假
     - :bulk_threshold => 1000
  - 远程资源：
     - http://rubygems.org/

```

rvm 似乎工作正常：

```
代码/txtyourcity_rails(master) ☸ 哪个红宝石
/Users/yuletide/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
代码/txtyourcity_rails(master) ☸ 哪个导轨
/Users/yuletide/.rvm/gems/ruby-1.9.3-p125/bin/rails

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:11:34.060

只是猜测 - 你是否使用 clang/LLVM 构建了你的 ruby​​，ruby 还没有准备好，这个 bug 最有可能报告给 bundler / ruby​​。

要按照我的其他答案[https://stackoverflow.com/a/10540282/497756](https://stackoverflow.com/a/10540282/497756)中的说明修复类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:10:31.023

不确定最初是什么原因造成的，但通过使用 rvm 升级到 1.9.3-p194、创建 .rvmrc 然后运行，设法消除了错误`bundle install`

# c - 如何将 Compare_fn 类型的内容传递给 C 程序的 sprintf()？

> ID：11962771
> 
> 赞同：0
> 
> 时间：2012-08-15T00:46:11.207
> 
> 标签：c, function, testing

我的 C 程序中有以下代码行。

```
sprintf(cmd, "test mergesort %n %x %x %?", A, n, x, my_cmp); 
```

`my_cmp`是类型`Compare_fn`，我需要知道如何将它传递给这个函数。此行用于帮助执行测试所需的命令。

如果有人知道如何将类型变量传递给`Compare_fn`此函数，那将非常有帮助。

我根本不想用 my_cmp 打印任何东西。我有一个以 Compare_fn 变量作为参数的函数，并且只是在 shell 中执行该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:36:16.017

ISO C 没有定义从函数指针类型`void *`到. 如果您不想依赖于此，您可以使用 C 中的所有类型都必须具有*表示*为 的覆盖数组的事实：`void *``%p`*`unsigned char`*

 *```
Compare_fn fp;
unsigned char rep[sizeof fp];
memcpy(rep, &fp, sizeof rep);
for (i=0; i<sizeof rep; i++) printf("%.2x", rep[i]); 
```

显然，如果您愿意，可以使用`snprintf`或您自己的字节到十六进制代码将十六进制输出存储到字符串而不是标准输出。*

# linker - 如何使用 GLEW 和 Code::Blocks

> ID：11962773
> 
> 赞同：1
> 
> 时间：2012-08-15T00:46:16.790
> 
> 标签：linker, mingw, codeblocks, glew

这似乎是一个相当普遍的问题，我似乎也找不到一个*好的*解决方案。我读过的大多数论坛或问题都会告诉你出了什么问题，但没有解释如何很好地解决它。我一直在尝试使用 Code::Blocks 设置 GLEW，但我已经无法让它工作大约两个星期了，所以我没有尝试过太多。我不断遇到链接器错误，例如：

```
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|57|undefined reference to `_imp____glewGenBuffers'|
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|59|undefined reference to `_imp____glewBindBuffer'|
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|61|undefined reference to `_imp____glewBufferData'|
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|63|undefined reference to `_imp____glewEnableVertexAttribArray'|
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|64|undefined reference to `_imp____glewBindBuffer'|
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|72|undefined reference to `_imp____glewVertexAttribPointer'|
obj\Debug\src\Graphics.o:D:\cold-fusion-engine\ColdFusion\src\Graphics.cpp|77|undefined reference to `_imp____glewDisableVertexAttribArray'|
||=== Build finished: 7 errors, 0 warnings ===| 
```

我的链接器是如何设置的： ![在此处输入图像描述](../Images/80acfbd9423845c92756f347f2436026.png)

我读过的一件事可能是错误的，即 GLEW 需要编译为 glew32.a 而不是 glew32.lib 但我无法让 Makefile 与 Cygwin 一起使用。我也注意到这似乎是人们遇到的一些常见问题。我知道有很多问题要问，但是有人可以为 Mingw 编译 GLEW 并上传它，或者一步一步**详细说明如何做吗？**我在这方面遇到的麻烦比我应该做的要多，这让我不得不放弃学习 OpenGL 4 并坚持使用 OpenGL 1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:10:01.690

曾经想测试一下是不是一个大问题——做glew-1.9.0。

我假设您在同一驱动器上安装了 msys 和 mingw。例如**C:\msys\1.0\ 和 C:\mingw***

*   下载 glew-1.9.0。
*   设置env路径，把先插入到路径变量x:\msys\1.0\bin;x:\mingw\bin;....
*   将文件夹 glew-1.9.0 复制到 x:\msys\1.0\src\glew-1.9.0
*   启动 msys.bat
*   cd 到顶层 /
*   cd 到 usr/src/glew-1.9.0
*   制作

所有这些步骤大约需要 10 分钟。在 usr/src/glew-1.9.0/lib 文件夹中我可以看到

libglew32.a .. 15.08.2012 libglew32.dll.a .. 15.08.2012 libglew32mx.a .. 15.08.2012 libglew32mx.dll.a .. 15.08.2012 glew32.dll .. 15.08.2012 glew32mx.dll .. 15\. .2012

那么问题出在哪里？？

# reporting-services - 孩子有时为空时的SSRS父子列表

> ID：11962776
> 
> 赞同：1
> 
> 时间：2012-08-15T00:46:55.663
> 
> 标签：reporting-services, parent-child

我正在尝试构建一个 SSRS 报告，其中数据集通过应用程序（Microsoft Dynamics NAV2009）“呈现”给 SSRS。报告的概念很简单 - 它是设备的列表 - 计算机、手机等。该表有一个“与设备相关”字段。所以设备ID“CELL01”可能有一个“与设备ID相关”=“计算机123”。并且设备 ID“CAR456”也可能有一个“与设备 ID 相关”=“计算机 123”。

我想创建一个报告，列出每件设备，并在其下方列出任何“相关设备”。许多片段没有相关片段，因此列表需要如下所示：

```
COMPUTER001    Dell Latitude  4mb RAM  
COMPUTER002    Dell Latitude  16mb RAM  
COMPUTER123    Dell Latitude  8mb RAM  
    Related Equipment  
    CELL01   Nokia Cellphone  
    CAR456   2011 Ford Taurus  
COMPUTER135    Sony Laptop    12gb RAM  
CELL01         Nokia Cellphone  
CAR456         2011 Ford Taurus 
```

请注意，“相关项目”只是单向的——相关项目只需要在“相关”设备下报告，反之则不需要。

我做了一些尽职调查并调查了递归层次结构。似乎这种方法取决于每个“孩子”都有一个“父母”。就我而言，大多数“孩子”都是“NULL”，即大多数设备没有“与设备相关的”ID。因此，如果我尝试从下往上创建列表并使用递归层次结构，在下面的示例中，只会列出 COMPUTER123 及其子级。其他“父”记录（例如 COMPUTER001）都没有任何子记录。

有没有人做过类似的SSRS报告？在“纯”SQL 中，这类似于使用左外连接进行查询，并在主记录中列出字段，即使 JOIN 的结果为 NULL，例如所有销售人员的列表，他们的订单已为星期：

选择 s.Name, i.Invoice_No, i.Invoice_Amt
from Salesperson s
LEFT OUTER JOIN Invoice i on
s.SalespersonID = i.SalespersonID

如果销售人员“Joe”本周没有进行任何销售，但销售人员“Sam”进行了 3 次销售，而销售人员“Bruno”进行了 2 次销售，您可能会期望这样的结果：

```
Name    Invoice_No  Invoice_Amt  
Bruno   1287        200.00  
Bruno   1289        400.00  
Joe     NULL        NULL  
Sam     1281        65.00  
Sam     1283        450.00  
Sam     1286        175.00 
```

那么你将如何构建一个输出为的报告：

```
Bruno  
  Invoices:  
           1287    200.00  
           1289    400.00  

Joe  

Sam  
  Invoices:  
           1281     65.00  
           1283    450.00  
           1286    175.00 
```

任何建议，将不胜感激。

罗恩

# asp.net-mvc - Asp.Net Mvc 从 gravatar 获取图像？

> ID：11962777
> 
> 赞同：0
> 
> 时间：2012-08-15T00:47:00.733
> 
> 标签：asp.net-mvc

我想像这个网站一样显示来自 gravatar.com 的用户个人资料图片。在此站点中，用户从 gravatar.com 更改图像。有没有关于这个主题的文章或教程。（使用 asp.net mvc）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:54:30.463

快速谷歌搜索：[http](http://hackingon.net/post/ASPNET-MVC-Gravatar-Helpers.aspx) ://hackingon.net/post/ASPNET-MVC-Gravatar-Helpers.aspx或[http://www.fatlemon.co.uk/2012/01/gravatar-htmlhelper-for-asp-net- MVC/](http://www.fatlemon.co.uk/2012/01/gravatar-htmlhelper-for-asp-net-mvc/)

# java - 使用 Redhat CentOS 的 Swing 字体倾斜

> ID：11962783
> 
> 赞同：1
> 
> 时间：2012-08-15T00:47:35.043
> 
> 标签：java, swing, layout, fonts

我在我的 Windows 7-64 位机器上创建了一个 Swing 应用程序，现在正试图让它在运行 Redhat CentOS 的 Linux 机器上正常工作。代码如下：

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class SwingExample implements Runnable {
    public void run() {
        // Create the window
        JFrame f = new JFrame ("Hello, World!");
        // Sets the behavior for when the window is closed
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // add a label and a button
        f.getContentPane().add(new JLabel("Hello, world!"));
        f.getContentPane().add(new JButton("Press me!"));
        // arrange the components inside the window
        f.pack();
        //By default, the window is not visible. Make it visible.
        f.setVisible(true);
    }

    public static void main(String[] args) {
        SwingExample se = new SwingExample();
        // Schedules the application to be run at the correct time in the event queue.
        SwingUtilities.invokeLater(se);
    }
} 
```

在我的 windows 盒子上，通过 Eclipse 运行，这看起来不错。但是，当我在 Linux 机器上运行相同的代码时，如下所示：

![在此处输入图像描述](../Images/49425635552a51d9451f0fdd974bc568.png)

如您所见，标题内的文本很好，但按钮的字体是倾斜的。任何人都知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:25:43.713

您将这两个组件添加到`CENTER`框架的 default`BorderLayout`中。尝试添加一个到`NORTH`. 例如，

```
f.add(new JLabel("Hello, world!", JLabel.CENTER), BorderLayout.NORTH);
f.add(new JButton("Press me!"), BorderLayout.SOUTH); 
```

# java - 在 Java 中导致 NullPointerException 的 ANTLR 错误恢复

> ID：11962787
> 
> 赞同：0
> 
> 时间：2012-08-15T00:48:00.887
> 
> 标签：java, parsing, error-handling, antlr, grammar

我有一个 ANTLR 语法，格式如下：

```
A - B: more,things 
```

但是有时，A 或 B 可能会丢失，例如：

```
 - B: more, things           //Skip
A -  : some, other, things    //Skip
C - D: yet, more, things      //Read this one and following
E - F: things 
```

我希望 ANTLR 跳过这些行（缺少 - 的任一侧）并继续处理其余部分。

基本上，类似的东西

```
 - B: more, things {if (!hasBothParts()) { continueAtNextLine();} }; 
```

从书中，我在适当的 Parser 块之后提供了一个@rulecatch 和这个捕获：

```
catch[RecognitionException re]{
  reportError(re);
  consumeUntil(input, NEWLINE);
  input.consume();
} 
```

* * *

**编辑 2** - 我尝试这样做：

```
while (input.LA(1) != 6){
  input.consume();
} 
```

这按预期工作。6 对我来说是“NEWLINE”的令牌标识符。我不知道如何进行像 input.LA(1) != "\n" 或类似的比较。我知道这样做是不正确的，我只是在尝试。如果你知道正确的方法，请告诉我！:)

但这有效，与第一个循环不同。我怀疑consumeUntil 可能看不到隐藏频道上的NEWLINE。

NullPointer 似乎是由输入快进到 EOF 引起的，因此，树语法在执行 input.LT(1) 时遇到了 Null。

* * *

但是，这样做时，我的树语法中会出现 NullPointerException：

```
Exception in thread "main" java.lang.NullPointerException
at org.antlr.runtime.tree.BaseTreeAdaptor.isNil(BaseTreeAdaptor.java:70)
at org.antlr.runtime.tree.CommonTreeNodeStream.nextElement(CommonTreeNodeStream.java:93)
at org.antlr.runtime.misc.LookaheadStream.fill(LookaheadStream.java:94)
at org.antlr.runtime.misc.LookaheadStream.sync(LookaheadStream.java:88)
at org.antlr.runtime.misc.LookaheadStream.LT(LookaheadStream.java:119)
.... 
```

我想要的行为是让解析器跳过缺少组件的行并继续处理剩余的行。我认为树解析器应该不是问题？

ANTLR 书没有提到任何关于这个问题的内容。

另外，我认为[ANTLR 错误恢复](http://www.antlr.org/blog/antlr3/error.handling.tml)提到了这些方面的内容，但提供的解决方案相当复杂/丑陋，可以追溯到 2004 年。那么，有没有更好的方法在 ANTLR 中做这个相对简单的事情？

谢谢你。

**编辑**如果这有帮助，则错误是由生成的树语法中的这一行引起的：

```
retval.start = input.LT(1); 
```

我认为，这是一无所有地被调用的。即 LT(1) 返回 Null，因为它跳过了。

# iphone - 外部 UITableView 委托如何隐藏 UISearchBar 键盘？

> ID：11962788
> 
> 赞同：1
> 
> 时间：2012-08-15T00:48:04.117
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我在另一个文件中有一个带有数据源/委托的表格视图。此外，表格视图上方还有一个搜索栏，属于第一个文件。在滚动时隐藏键盘，我需要调用：

```
[self.searchBar resignFirstResponder] 
```

但是

```
(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView 
```

方法在委托中。那么在这种情况下滚动时如何隐藏键盘？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:59:14.023

您可以在 scrollviewwillbegindragging 中发送通知。表视图委托：

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
     [[NSNotificationCenter defaultCenter] postNotificationName:@"resign" object:nil];
} 
```

搜索栏代表：

```
-(void)viewDidLoad{
     [super viewDidLoad];
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(goTo:) name:@"resign" object:nil];
}

-(void)goTo:(NSNotification*)notification {
[self.searchBar resignFirstResponder];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T10:13:20.463

有很多方法可以做，下面是其中的几个。

选项 1：在初始化表格对象后添加以下行

```
[yourTableView setKeyboardDismissMode:UIScrollViewKeyboardDismissModeOnDrag]; 
```

或者

选项 2：获取您的 tableview 的超级视图（我期望它作为 aViewcontrollerObj.view）并强制结束其编辑。

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    UIView *tableviewSuperView = yourTableView.superview;
    [tableviewSuperView endEditing:true];
} 
```

希望对快乐编码有所帮助:)

# delphi - IExplorer.exe 的 ShellExecute 路径

> ID：11962792
> 
> 赞同：3
> 
> 时间：2012-08-15T00:48:31.297
> 
> 标签：delphi, internet-explorer, shellexecute

我想使用 ShellExecute iexplore.exe（以 html 文件名作为命令行参数），即使 iexplore 与 html 文件没有关联。

假设用户没有卸载它，那么在不提供程序路径的情况下这样做有多安全。这适用于我的机器，即默认的 Windows 搜索路径包含 iexplore.exe 的路径。在所有最近的 Windows (XP+) 机器上期望这是否合理？

ShellExecute iexplore.exe 有更安全的方法吗？

(德尔福 XE2)

（虽然这个问题是独立的，但我会在我同时提出的这个 SO 问题的上下文中为用户提供运行 IE 的选项：[Detect Chrome as browser associated with html files in Windows](https://stackoverflow.com/questions/11962753/detect-chrome-as-browser-is-associated-with-html-files-in-windows)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:26:27.710

“iexplore.exe”不在默认搜索路径中。它的路径在`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\IEXPLORE.EXE`密钥中注册。如果出于任何原因此键丢失或指向错误的位置，您的方法将不起作用。我认为这种情况发生的可能性会很低。

作为一种替代方法，您可以使用 Internet Explorer 对象。如果注册表损坏或类似情况，这也可能会失败，但对我来说这听起来像是一种更正式的方式。

```
ie := CreateOleObject('InternetExplorer.Application');
ie.Visible := True;
ie.Navigate('http://example.com'); 
```

IE 对象参考[这里](http://msdn.microsoft.com/en-us/library/aa752084%28v=vs.85%29)。

# asp.net - 在 ASP.NET 页面中处理 ProcessRequest 中的异常

> ID：11962802
> 
> 赞同：1
> 
> 时间：2012-08-15T00:50:22.067
> 
> 标签：asp.net, web-applications

我在 web.config 中放置了以下行，以禁止上传大于 2 MB 的文件：

```
<httpRuntime maxRequestLength="2048" /> 
```

当我点击页面（具有 FileUpload 控件）并上传大于 2 MB 的文件时，页面将在 ProcessRequest 期间抛出异常（下面的 Callstack）。我尝试重载 ProcessRequest，并且可以在 catch 块中处理异常。问题是，当然，在 ProcessRequest 期间，我的页面中的控件还没有被实例化。

我的问题是：有没有办法以某种方式处理异常，我可以将消息返回到页面以供用户查看，或者以某种方式允许请求通过（以某种方式删除文件）以便它到达 Page_Load 和正常处理吗？

调用栈：

```
 at System.Web.UI.Page.HandleError(Exception e)
 at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
 at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
 at System.Web.UI.Page.ProcessRequest()
 at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)
 at System.Web.UI.Page.ProcessRequest(HttpContext context)
 at MyWebsite2.DocDashboard.ProcessRequest(HttpContext req) in MyFile.aspx.cs:line 28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:10:03.783

我终于能够解决这个问题。我在网上找不到任何关于它的信息，所以我分享我的解决方案。就个人而言，我不太喜欢该解决方案，但这是我发现的唯一可行的方法。为避免崩溃，请覆盖虚函数 ProcessRequest，如果文件超过大小限制，则从流中使用文件。然后调用基础，它会很好地处理页面，文件被删除。这是代码：

```
 public virtual void ProcessRequest(HttpContext context)
    {
        int BUFFER_SIZE = 3 * 1024 * 1024;
        int FILE_SIZE_LIMIT = 2 * 1024 * 1024;
        if (context.Request.Files.Count > 0 &&
                    context.Request.Files[0].ContentLength > FILE_SIZE_LIMIT)
        {
            HttpPostedFile postedFile = context.Request.Files[0];
            Stream workStream = postedFile.InputStream;
            int fileLength = postedFile.ContentLength;
            Byte[] fileBuffer = new Byte[BUFFER_SIZE];
            while (fileLength > 0)
            {
                int bytesToRead = Math.Min(BUFFER_SIZE, fileLength);
                workStream.Read(fileBuffer, 0, bytesToRead);
                fileLength -= bytesToRead;
            }

            workStream.Close();
        }

        base.ProcessRequest(context);
    } 
```

# java - 为什么没有调用 componentShown()？

> ID：11962804
> 
> 赞同：6
> 
> 时间：2012-08-15T00:50:46.177
> 
> 标签：java, swing, events, listener

我有一个`CardDetailsPanel`包含几个`JLabel`s 和`JTextField`s 的类。这个类包含在一个`AddCardsPanel`和中，初始化如下：

```
 cardDetailsPanel = new CardDetailsPanel(true);
    add(cardDetailsPanel, java.awt.BorderLayout.CENTER); 
```

我也有一个`JLabel`包含说明的。我想在`CardDetailsPanel`第一个出现并且焦点更改为每个`JTextField`. 我找到了`addFocusListener()`适用于以后的方法。但是，我的`compenentShown()`方法不适用于前者：

```
 addComponentListener(new java.awt.event.ComponentAdapter() {
        public void componentShown(java.awt.event.ComponentEvent evt) {
            formComponentShown(evt);
        }
    }); 
```

（好吧，我知道这很难看。它是由 NetBeans 生成的。）

```
private void formComponentShown(java.awt.event.ComponentEvent evt) {
    this.frame = (BaseballFrame) this.getParent().getParent().getParent().getParent().getParent().getParent();
} 
```

（嗯，这个更丑，后面的链式调用我会处理，`getParent()`我这里也想做其他的事情。）

那么为什么我的听众没有被叫到呢？我如何编写一个监听器，只要我`CardDetailsPanel`出现在屏幕上就会执行一些操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T18:33:05.157

使用[对话框焦点](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)[`AncestorListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/AncestorListener.html)中描述的。

> 当 a `JDialog`（或`JFrame`就此而言）可见时，默认情况下焦点放在第一个可聚焦组件上。有时您可能想更改此行为。`requestFocusInWindow()`显而易见的解决方案是在您希望获得焦点的组件上调用该方法。问题是这并不总是有效。
> 
> ...
> 
> 问题是..一个组件不能请求焦点，除非它被添加到一个“实现的”对话框中。实现的对话框基本上意味着 Swing`JDialog`已添加到代表底层操作系统上的对话框的对等组件中。当您在 上调用`pack()`或`setVisible(true)`方法时会发生这种情况`JDialog`。

这就是祖先监听器派上用场的地方。对于模态对话框中的组件，一旦组件变得可见，它就会被触发，并且***实现***和聚焦。

**编辑：** 以上评论适用于任何 Swing 容器中的组件，包括 JFrame 和`JPanel`.

# haskell - Haskell 中的缓存和显式并行性

> ID：11962807
> 
> 赞同：6
> 
> 时间：2012-08-15T00:51:30.000
> 
> 标签：haskell, caching, optimization, functional-programming

我目前正在尝试优化我对Projet Euler[问题 14的解决方案。](http://projecteuler.net/problem=14)我真的很喜欢 Haskell，我认为它非常适合解决这类问题，这是我尝试过的三种不同的解决方案：

```
import Data.List (unfoldr, maximumBy)
import Data.Maybe (fromJust, isNothing)
import Data.Ord (comparing)
import Control.Parallel

next :: Integer -> Maybe (Integer)
next 1 = Nothing
next n
  | even n = Just (div n 2)
  | odd n  = Just (3 * n + 1)

get_sequence :: Integer -> [Integer]
get_sequence n = n : unfoldr (pack . next) n
  where pack n = if isNothing n then Nothing else Just (fromJust n, fromJust n)

get_sequence_length :: Integer -> Integer
get_sequence_length n
    | isNothing (next n) = 1
    | otherwise = 1 + (get_sequence_length $ fromJust (next n))

-- 8 seconds
main1 = print $ maximumBy (comparing length) $ map get_sequence [1..1000000]

-- 5 seconds
main2 = print $ maximum $ map (\n -> (get_sequence_length n, n)) [1..1000000]

-- Never finishes
main3 = print solution
  where
    s1 = maximumBy (comparing length) $ map get_sequence [1..500000]
    s2 = maximumBy (comparing length) $ map get_sequence [500001..10000000]
    solution = (s1 `par` s2) `pseq` max s1 s2 
```

现在，如果您查看实际问题，则存在很大的缓存潜力，因为大多数新序列将包含之前已经计算过的子序列。

为了比较，我也用 C 写了一个版本：
带缓存的运行时间：**0.03 秒**
不带缓存的运行时间：**0.3 秒**

这简直太疯狂了！当然，缓存将时间减少了 10 倍，但即使没有缓存，它仍然比我的 Haskell 代码快至少 17 倍。

我的代码有什么问题？为什么 Haskell 不为我缓存函数调用？由于功能是纯缓存，缓存不应该是微不足道的，只是可用内存的问题？

我的第三个并行版本有什么问题？为什么没有完成？

将 Haskell 作为一种语言，编译器是否会自动并行化某些代码（折叠、映射等），还是必须始终使用 Control.Parallel 显式完成？

**编辑：**我偶然发现了[这个](https://stackoverflow.com/questions/7134669/why-is-this-haskell-expression-so-slow)类似的问题。他们提到他的函数不是尾递归的。我的 get_sequence_length 是尾递归的吗？如果不是，我怎么能做到这一点？

**Edit2：**
致丹尼尔：
非常感谢您的回复，真的很棒。我一直在玩弄你的改进，我发现了一些非常糟糕的问题。

我在 Windws 7（64 位）、3.3 GHZ 四核和 8GB RAM 上运行测试。
正如你所说，我做的第一件事是用 Int 替换所有 Integer，但是每当我运行任何主电源时，我都会耗尽内存，即使 +RTS kSize -RTS 设置得非常高。

最终我发现[了这个](https://stackoverflow.com/questions/7140732/haskell-space-overflow)（stackoverflow 很棒......），这意味着由于 Windows 上的所有 Haskell 程序都以 32 位运行，因此 Ints 溢出导致无限递归，哇......

我改为在 Linux 虚拟机（使用 64 位 ghc）中运行测试并得到类似的结果。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T02:43:09.227

好吧，让我们从顶部开始。首先重要的是给出你用来编译和运行的确切命令行；对于我的回答，我将使用这一行来计算所有程序的时间：

```
ghc -O2 -threaded -rtsopts test && time ./test +RTS -N 
```

接下来：由于机器之间的时间差异很大，我们将为我的机器和您的程序提供一些基准时间。这是`uname -a`我的计算机的输出：

```
Linux sorghum 3.4.4-2-ARCH #1 SMP PREEMPT Sun Jun 24 18:59:47 CEST 2012 x86_64 Intel(R) Core(TM)2 Quad CPU Q6600 @ 2.40GHz GenuineIntel GNU/Linux 
```

亮点是：四核、2.4GHz、64 位。

使用`main1`：`30.42s user 2.61s system 149% cpu 22.025 total`
使用`main2`：`21.42s user 1.18s system 129% cpu 17.416 total`
使用`main3`：`22.71s user 2.02s system 220% cpu 11.237 total`

实际上，我`main3`通过两种方式进行了修改：首先，从 中的范围末尾删除一个零`s2`，其次，更改`max s1 s2`为`maximumBy (comparing length) [s1, s2]`，因为前者只是意外地计算出正确答案。=)

我现在将关注串行速度。（要回答您的一个直接问题：不，GHC 不会自动并行化或记忆您的程序。这两件事的开销都很难估计，因此很难决定什么时候做它们会是有益的。我有不知道为什么这个答案中的串行解决方案的 CPU 利用率也超过 100%；也许一些垃圾收集正在另一个线程或类似的事情中发生。）我们将从 开始`main2`，因为它是两个串行实现中更快的。获得一点提升的最便宜的方法是将所有类型签名从更改`Integer`为`Int`：

使用`Int`：（`11.17s user 0.50s system 129% cpu 8.986 total`大约快两倍）

下一个提升来自减少内部循环中的分配（消除中间`Maybe`值）。

```
import Data.List
import Data.Ord

get_sequence_length :: Int -> Int
get_sequence_length 1 = 1
get_sequence_length n
    | even n = 1 + get_sequence_length (n `div` 2)
    | odd  n = 1 + get_sequence_length (3 * n + 1)

lengths :: [(Int,Int)]
lengths = map (\n -> (get_sequence_length n, n)) [1..1000000]

main = print (maximumBy (comparing fst) lengths) 
```

使用这个：`4.84s user 0.03s system 101% cpu 4.777 total`

下一个提升来自使用比`even`and更快的操作`div`：

```
import Data.Bits
import Data.List
import Data.Ord

even' n = n .&. 1 == 0

get_sequence_length :: Int -> Int
get_sequence_length 1 = 1
get_sequence_length n = 1 + get_sequence_length next where
    next = if even' n then n `quot` 2 else 3 * n + 1

lengths :: [(Int,Int)]
lengths = map (\n -> (get_sequence_length n, n)) [1..1000000]

main = print (maximumBy (comparing fst) lengths) 
```

使用这个：`1.27s user 0.03s system 105% cpu 1.232 total`

对于那些在家里跟随的人来说，这比`main2`我们开始的速度快了大约 17 倍——切换到 C 后的竞争性改进。

对于记忆，有几个选择。最简单的方法是使用预先存在的包（如[data-memocombinators](http://hackage.haskell.org/packages/archive/data-memocombinators/0.4.3/doc/html/Data-MemoCombinators.html)）创建一个不可变数组并从中读取。时间对于为这个数组选择一个合适的大小是相当敏感的。对于这个问题，我发现这`50000`是一个很好的上限。

```
import Data.Bits
import Data.MemoCombinators
import Data.List
import Data.Ord

even' n = n .&. 1 == 0

pre_length :: (Int -> Int) -> (Int -> Int)
pre_length f 1 = 1
pre_length f n = 1 + f next where
    next = if even' n then n `quot` 2 else 3 * n + 1

get_sequence_length :: Int -> Int
get_sequence_length = arrayRange (1,50000) (pre_length get_sequence_length)

lengths :: [(Int,Int)]
lengths = map (\n -> (get_sequence_length n, n)) [1..1000000]

main = print (maximumBy (comparing fst) lengths) 
```

有了这个：`0.53s user 0.10s system 149% cpu 0.421 total`

最快的是使用一个可变的、未装箱的数组作为记忆位。它的惯用语要少得多，但它是裸机速度。速度对这个数组的大小不那么敏感，只要数组与您想要答案的最大事物一样大。

```
import Control.Monad
import Control.Monad.ST
import Data.Array.Base
import Data.Array.ST
import Data.Bits
import Data.List
import Data.Ord

even' n = n .&. 1 == 0
next  n = if even' n then n `quot` 2 else 3 * n + 1

get_sequence_length :: STUArray s Int Int -> Int -> ST s Int
get_sequence_length arr n = do
    bounds@(lo,hi) <- getBounds arr
    if not (inRange bounds n) then (+1) `fmap` get_sequence_length arr (next n) else do
        let ix = n-lo
        v <- unsafeRead arr ix
        if v > 0 then return v else do
            v' <- get_sequence_length arr (next n)
            unsafeWrite arr ix (v'+1)
            return (v'+1)

maxLength :: (Int,Int)
maxLength = runST $ do
    arr <- newArray (1,1000000) 0
    writeArray arr 1 1
    loop arr 1 1 1000000
    where
    loop arr n len 1  = return (n,len)
    loop arr n len n' = do
        len' <- get_sequence_length arr n'
        if len' > len then loop arr n' len' (n'-1) else loop arr n len (n'-1)

main = print maxLength 
```

有了这个：（`0.16s user 0.02s system 138% cpu 0.130 total`与记忆的C版本竞争）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:08:57.513

GHC 不会自动为您并行化任何内容。正如你猜测的那样，`get_sequence_length`它不是尾递归的。见[这里](http://www.haskell.org/haskellwiki/Tail_recursion)。并考虑编译器（除非它为您做了一些很好的优化）如何在您完成之前无法评估所有这些递归加法；您正在“建立 thunk”，这通常不是一件好事。

尝试调用递归辅助函数并传递一个累加器，或者尝试根据`foldr`.

# ruby-on-rails - Rails/rspec：如何在请求规范中设置 cookie？

> ID：11962808
> 
> 赞同：10
> 
> 时间：2012-08-15T00:51:33.207
> 
> 标签：ruby-on-rails, rspec

如何在我的请求规范中设置 cookie？

以下页面上的解决方案不起作用：

[Rspec：在辅助测试中设置 cookie](https://stackoverflow.com/questions/5475989/rspec-setting-cookies-in-a-helper-test)

即，`request.cookies[:whatever] = 'something'`说那`request`是一个`nil`对象。我也试过`helper.cookies[:whatever] = 'something'`了，那也没有用（`helper`在那种情况下`nil`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-12T04:38:46.113

请尝试以下操作：

```
cookies[:whatever] = 'something' 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-13T19:22:06.787

Make sure you are using the rspec-rails gem and are requiring 'rspec/rails' in your spec_helper, not just 'rspec'.

# java - 我可以将 Guava 的 AbstractExecutionThreadService 用于需要中断的服务吗？

> ID：11962809
> 
> 赞同：6
> 
> 时间：2012-08-15T00:51:36.580
> 
> 标签：java, service, guava, interrupt

我有一项服务，我想实现为 Google Guava `Service`。

该服务基本上运行一个`while (true)`循环，当事件到达`BlockingQueue`. 此处提供了简化的示例代码：

[https://gist.github.com/3354249](https://gist.github.com/3354249)

问题是代码阻塞了`BlockingQueue#take()`，所以停止服务的唯一方法是中断它的线程。这可以使用番石榴`AbstractExecutionThreadService`吗？

当然，在这种情况下，我可以`queue.take()`使用轮询循环替换`queue.poll(1, TimeUnit.SECONDS)`，从而消除线程中断的需要。然而：

*   出于性能和代码可读性的原因，我想避免这样做

*   在其他情况下，无法避免线程中断，例如，如果服务在从`InputStream`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T13:15:17.860

您可以覆盖`executor()`方法以提供您自己的执行程序，然后它将对线程的引用存储到您的字段中。然后，如果需要，您可以轻松地中断线程。

```
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import java.util.concurrent.atomic.AtomicReference;

import com.google.common.util.concurrent.AbstractExecutionThreadService;

public abstract class InterruptibleExecutionThreadService extends AbstractExecutionThreadService {
    private final AtomicReference<Thread> runningThread = new AtomicReference<Thread>(null);

    @Override
    protected Executor executor() {
        return new Executor() {
            @Override
            public void execute(Runnable command) {
                Thread thread = Executors.defaultThreadFactory().newThread(command);
                runningThread.compareAndSet(null, thread);

                try {
                    thread.setName(serviceName());
                } catch (SecurityException e) {
                    // OK if we can't set the name in this environment.
                }
                thread.start();
            }
        };
    }

    protected void interruptRunningThread() {
        Thread thread = runningThread.get();
        if (thread != null) {
            thread.interrupt();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T04:25:36.193

如果您想使用 an ，我不认为中断线程真的是一种选择，`AbstractExecutionThreadService`因为实际上没有任何方法可以获取对线程的引用以调用`interrupt()`.

如果您使用的是 BlockingQueue，您要么必须在 while 循环内进行轮询，以检查服务是否仍在运行，要么您可以使用哨兵值来提醒工作方法它需要停止。

例子：

轮询：

```
while(isRunning()) {
    Value v = queue.poll(1, TimeUnit.SECONDS);
    // do something with v
} 
```

信号值：

```
while(isRunning()) {
    Value v = queue.take();
    if(v == POISON) {
        break;
    }
    // do something with v
} 
```

我个人会尝试轮询解决方案，看看性能如何。您可能会惊讶于对性能的真正影响如此之小。

至于从 InputStream 读取，如果 InputStream 是长期存在的并且有可能无限期阻塞，我认为使用 an`AbstractExecutionThreadService`是不可能的。您应该改为使用`AbstractService`创建并保存对其自己的执行线程的引用，以便您可以在`doStop()`方法中中断它。

# gfortran - 在 Fortran 中使用 selected_real_kind 来实现所需的最小精度

> ID：11962810
> 
> 赞同：2
> 
> 时间：2012-08-15T00:51:37.830
> 
> 标签：gfortran

我在 Mac OS X 10.8 上使用 gfortran 4.7.1 来编译一个使用特定精度的简单程序：

```
program simple
  implicit none
  integer, parameter :: l = selected_real_kind(18,100)
  real(kind=l) :: myNum
  myNum = 0.123456789123456789
  print '(f18.12)', myNum
end program simple 
```

当我编译和运行时，我得到`0.123456791043`这显然表明我没有得到我要求的精度。

但是，如果我编译`-fdefault-real-8`我会得到正确的答案。显然，我可以继续使用该选项，但我不禁想知道这是一个错误还是我缺少一些理由。当似乎`selected_real_kind`意图允许代码指定精度时，我真的必须在代码本身之外指定我的实际大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:21:46.743

对不起。您必须添加`_l`到号码分配中。

# hadoop - HADOOP - 在映射器中获取节点名

> ID：11962811
> 
> 赞同：1
> 
> 时间：2012-08-15T00:51:46.737
> 
> 标签：hadoop, mapper, nodename

我正在编写一个映射器，并想知道是否可以获取映射器运行的节点名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:18:50.630

Hadoop 会自动将您的 MapReduce 程序移动到您的数据所在的位置，因此我认为您可以执行 getHostName() （如果您使用的是 Java），它应该返回运行程序的节点的名称。

```
java.net.InetAddress.getLocalHost().getHostName(); 
```

如果您使用其他语言，例如 Python、Ruby 等（即使用 HadoopStreaming），同样的想法也适用，因此您应该能够使用这些语言中可用的适当函数/方法来获取主机名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:19:35.330

配置值`fs.default.name`很可能会为您提供到 namenode 的 URL，如果您获得 FileSystem ( `Filesystem.get(conf)`) 的实例，您应该能够调用该`getUri()`方法来获得相同的信息。

# ruby-on-rails - Rails：我安装了 ActiveAdmin，但我的设计链接停止工作

> ID：11962814
> 
> 赞同：6
> 
> 时间：2012-08-15T00:53:35.420
> 
> 标签：ruby-on-rails, ruby, devise, activeadmin

我已经安装了设计。
我有一个链接：`<%= link_to "Sign up", new_user_registration_path %>`

当我安装 ActiveAdmin（对于现有模型`User`）时，此链接停止工作：

```
undefined local variable or method `new_user_registration_path' 
```

我使用了 git diff `routes.rb`，这里是（添加的行是黑色的）：

**`ActiveAdmin.routes(self)`**
`devise_for :users`**`, ActiveAdmin::Devise.config`**

现在也`<%= link_to "Sign out", destroy_user_session_path, :method => :delete %>`导致`/admin/logout`

我怎么解决这个问题？

耙路线：

```
 admin_dashboard            /admin(.:format)                       {:action=>"index", :controller=>"admin/dashboard"}
         admin_codes GET        /admin/codes(.:format)                 {:action=>"index", :controller=>"admin/codes"}
                     POST       /admin/codes(.:format)                 {:action=>"create", :controller=>"admin/codes"}
      new_admin_code GET        /admin/codes/new(.:format)             {:action=>"new", :controller=>"admin/codes"}
     edit_admin_code GET        /admin/codes/:id/edit(.:format)        {:action=>"edit", :controller=>"admin/codes"}
          admin_code GET        /admin/codes/:id(.:format)             {:action=>"show", :controller=>"admin/codes"}
                     PUT        /admin/codes/:id(.:format)             {:action=>"update", :controller=>"admin/codes"}
                     DELETE     /admin/codes/:id(.:format)             {:action=>"destroy", :controller=>"admin/codes"}
         admin_users GET        /admin/users(.:format)                 {:action=>"index", :controller=>"admin/users"}
                     POST       /admin/users(.:format)                 {:action=>"create", :controller=>"admin/users"}
      new_admin_user GET        /admin/users/new(.:format)             {:action=>"new", :controller=>"admin/users"}
     edit_admin_user GET        /admin/users/:id/edit(.:format)        {:action=>"edit", :controller=>"admin/users"}
          admin_user GET        /admin/users/:id(.:format)             {:action=>"show", :controller=>"admin/users"}
                     PUT        /admin/users/:id(.:format)             {:action=>"update", :controller=>"admin/users"}
                     DELETE     /admin/users/:id(.:format)             {:action=>"destroy", :controller=>"admin/users"}
      admin_comments GET        /admin/comments(.:format)              {:action=>"index", :controller=>"admin/comments"}
                     POST       /admin/comments(.:format)              {:action=>"create", :controller=>"admin/comments"}
   new_admin_comment GET        /admin/comments/new(.:format)          {:action=>"new", :controller=>"admin/comments"}
  edit_admin_comment GET        /admin/comments/:id/edit(.:format)     {:action=>"edit", :controller=>"admin/comments"}
       admin_comment GET        /admin/comments/:id(.:format)          {:action=>"show", :controller=>"admin/comments"}
                     PUT        /admin/comments/:id(.:format)          {:action=>"update", :controller=>"admin/comments"}
                     DELETE     /admin/comments/:id(.:format)          {:action=>"destroy", :controller=>"admin/comments"}
    new_user_session GET        /admin/login(.:format)                 {:action=>"new", :controller=>"active_admin/devise/sessions"}
        user_session POST       /admin/login(.:format)                 {:action=>"create", :controller=>"active_admin/devise/sessions"}
destroy_user_session DELETE|GET /admin/logout(.:format)                {:action=>"destroy", :controller=>"active_admin/devise/sessions"}
       user_password POST       /admin/password(.:format)              {:action=>"create", :controller=>"active_admin/devise/passwords"}
   new_user_password GET        /admin/password/new(.:format)          {:action=>"new", :controller=>"active_admin/devise/passwords"}
  edit_user_password GET        /admin/password/edit(.:format)         {:action=>"edit", :controller=>"active_admin/devise/passwords"}
                     PUT        /admin/password(.:format)              {:action=>"update", :controller=>"active_admin/devise/passwords"}
                root            /                                      {:controller=>"codes", :action=>"list"}
                                /:controller(/:action(/:id(.:format))) 
```

我检查了旧版本，路线是：

```
 new_user_session GET    /users/sign_in(.:format)               {:action=>"new", :controller=>"devise/sessions"}
            user_session POST   /users/sign_in(.:format)               {:action=>"create", :controller=>"devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)              {:action=>"destroy", :controller=>"devise/sessions"}
           user_password POST   /users/password(.:format)              {:action=>"create", :controller=>"devise/passwords"}
       new_user_password GET    /users/password/new(.:format)          {:action=>"new", :controller=>"devise/passwords"}
      edit_user_password GET    /users/password/edit(.:format)         {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)              {:action=>"update", :controller=>"devise/passwords"}
cancel_user_registration GET    /users/cancel(.:format)                {:action=>"cancel", :controller=>"devise/registrations"}
       user_registration POST   /users(.:format)                       {:action=>"create", :controller=>"devise/registrations"}
   new_user_registration GET    /users/sign_up(.:format)               {:action=>"new", :controller=>"devise/registrations"}
  edit_user_registration GET    /users/edit(.:format)                  {:action=>"edit", :controller=>"devise/registrations"}
                         PUT    /users(.:format)                       {:action=>"update", :controller=>"devise/registrations"}
                         DELETE /users(.:format)                       {:action=>"destroy", :controller=>"devise/registrations"} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-12T00:54:04.167

您可能缺少的一件事是将您的用户模型声明为“可注册”以获取由设计生成的注册路线。

你应该有这样的东西：

```
class User < ActiveRecord::Base
  # Include devise modules
  devise :database_authenticatable, :registerable, ... 
```

我曾经遇到过这个问题，这就是解决它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:01:46.257

您似乎对普通用户和管理员用户使用相同的模型。ActiveAdmin 需要一个单独的管理员模型。尝试恢复生成器所做的更改，然后运行：

```
rails generate active_admin:resource AdminUser
rake db:migrate 
```

这将创建一个`AdminUser`与您网站的用户完全没有链接的模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T10:27:44.967

在 routes.rb 中，指定 devise_for :users 这将恢复设计用户路由

# jquery - 使用 JQuery 和 CSS 进行简单的内容切换

> ID：11962817
> 
> 赞同：0
> 
> 时间：2012-08-15T00:54:01.667
> 
> 标签：jquery, html

我有几个类包装的 div。每个都有几个类内容的 div。如何自动切换使用 jquery 和 css 显示的内容？

```
 <div class="wrap">
    <div class="content is-showing"></div>
    <div class="content is-not-showing"></div>
    ...
    </div>

<div class="wrap">
<div class="content is-not-showing"></div>
<div class="content is-showing"></div>
...
</div>    

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:06:27.000

我在想你想要这样的东西吗？：

[http://jsfiddle.net/Btcue/](http://jsfiddle.net/Btcue/)

CSS：

```
.is-not-showing {

  display: none;

} 
```

JS：

```
$( ".wrap > .content" ).toggleClass( "is-not-showing" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:06:36.330

简单地说：

```
$('.is-not-showing').hide()
function switch() {
    $('.is-not-showing, .is-showing').toggle();
} 
```

# macos - 在崇高文本2中更改侧边栏的键盘快捷键

> ID：11962818
> 
> 赞同：11
> 
> 时间：2012-08-15T00:54:06.173
> 
> 标签：macos, keyboard-shortcuts, sublimetext, sublimetext2

目前隐藏或显示侧边栏的快捷键是 cmd K, cmd B。

我希望它只是 cmd K。

有没有办法做到这一点？谢谢！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T01:03:31.503

当然，您可以像从 Sublime Text 2 > Preferences > Key Bindings - User 中的任何其他键盘快捷键一样编辑它：

```
[
    { "keys": ["super+k"], "command": "toggle_side_bar" }
] 
```

请注意，这将禁用所有其他带有 ⌘K 前缀的快捷方式，例如用于转换大小写和折叠的快捷方式，即使它们仍会显示在菜单中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T01:04:22.083

前往`Preferences > Key Bindings - Default`、查找`toggle_side_bar`、删除`cmd+b`并保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-05T13:46:57.337

在 Windows 中：

```
[
    { "keys": ["ctrl+k"], "command": "toggle_side_bar" }
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-03T18:35:18.790

Sublime 文本不允许您编辑热键的任何文本。

# jquery - Google Apps 脚本 (GAS) - 创建 ContentService API 以提供来自 Google Drive 的 JSON 数据

> ID：11962825
> 
> 赞同：1
> 
> 时间：2012-08-15T00:55:10.077
> 
> 标签：jquery, google-apps-script, google-drive-api

仍在尝试找出在 Google IO 2012 上推出的所有新内容。关于 GAS 和 ContentService，您应该能够创建一个 API 来提供您的内容（来自 Google Drive）。一个简单的例子是这样的：

```
var jsonData = {
    "firstName": "John",
    "lastName": "Smith",
    "age": 25,
    "address": {
        "streetAddress": "21 2nd Street",
        "city": "New York",
        "state": "NY",
        "postalCode": "10021"
    },
    "phoneNumber": [
        {
            "type": "home",
            "number": "212 555-1234"
        },
        {
            "type": "fax",
            "number": "646 555-4567"
        }
    ]
}

function doGet(e) {

  var output = ContentService.createTextOutput();
  output.setMimeType(ContentService.MimeType.JSON);
  output.setContent(jsonData);

  return output;

} 
```

然后从一个普通的网页，希望使用 jQuery Ajax，你应该能够得到 Json 数据？

在普通（非 GAS）客户端上，简单的 javascript 代码会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:49:11.013

看看[JSONP](http://en.wikipedia.org/wiki/JSONP)看看它应该是什么样子

另外，应该是`output.setContent(JSON.stringify(jsonData));`

# grep - grep -f：打印图案行号

> ID：11962830
> 
> 赞同：1
> 
> 时间：2012-08-15T00:56:00.540
> 
> 标签：grep

我正在使用`grep -f patternfile inputfile`并且我想从模式文件中输出行号。例如，如果`patternfile`是

```
abc
def 
```

并且`inputfile`是

```
abcx
abcy
defx 
```

我想要类似的东西

```
1 abcx
1 abcy
2 defx 
```

其中 1 对应于 abcx 和 abcy 从 的第 1 行匹配`patternfile`的事实，2 对应于 defx 从 的第 2 行匹配的事实`patternfile`。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:02:17.007

一种使用方式`awk`。内容`script.awk`：

```
FNR == NR {
        pattern[ FNR ] = $1;
        next;
}

FNR < NR {
        if ( FNR == 1 ) {
                l = length( pattern );
        }
        for ( i = 1; i <= l; i++ ) {
                if ( $0 ~ pattern[i] ) {
                        printf "%d %s\n", i, $0;
                        break;
                }
        }
} 
```

像这样运行它：

```
awk -f script.awk patternfile inputfile 
```

具有以下输出：

```
1 abcx
1 abcy
2 defx 
```

# ruby-on-rails - 如何在 Rails 3.1 中使用 group() 将 COUNT 列添加到工作查询中

> ID：11962833
> 
> 赞同：5
> 
> 时间：2012-08-15T00:57:12.837
> 
> 标签：ruby-on-rails, activerecord, count

我有一个 UserProfile 列表，它可能（或可能不）有一个或多个小部件：

```
class UserProfile < ActiveRecord::Base
  has_many :widgets
end

@all_profiles = UserProfile.joins(:widgets).group('user_profiles.id').order("name ASC") 
```

在索引视图中，不是在视图的每一行中执行新查询来获取小部件的计数`@all_profile.each`，有没有办法在原始视图中添加一个计数列，以显示每个分组行中有多少小部件？（例如，如果有 N 个 @all_profiles ，避免重新查询数据库 N 次？

（这不仅对于避免 N 额外查询很重要，而且允许我们在计数列上添加一个 SORT 选项，以便我们可以按拥有最多小部件的客户进行排序）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T02:14:11.630

您可以通过添加一`COUNT`列[`ActiveRecord::QueryMethods#select`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-select)

```
@all_profiles = UserProfile.joins(:widgets).select('user_profiles.*, COUNT(*) AS widget_count').group('user_profiles.id').order('name ASC') 
```

现在，每个返回的对象都将包含一个`widget_count`属性，您可以像访问任何其他模型属性一样访问该属性：

```
@all_profiles.each do |profile|
  puts profile.widget_count
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:40:39.653

您可以使用带有 :group 参数的 count 方法：[count](http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M000292)

这应该看起来像：

```
UserProfile.joins(:widgets).order(:name).count(:id, :group => 'user_profiles.id') 
```

# c# - 为什么 AutoMapper 不映射这些嵌套集合？

> ID：11962834
> 
> 赞同：0
> 
> 时间：2012-08-15T00:58:03.550
> 
> 标签：c#, vb.net, automapper

我在 VB 中有以下源类。

```
Public Class Product
...

    Public Property itemizedSize As Size()
        Get
            Return _arrItemizedSizes
        End Get
        Set(ByVal value As Size())
            _arrItemizedSizes = value
        End Set
    End Property
...
End Class

Public Class Size
    Private _strName As String
    Private _intQuantity As Integer
    Private _intScale As Integer

    Public Property name() As String
        Get
            Return _strName
        End Get
        Set(ByVal value As String)
            _strName = value
        End Set
    End Property

    Public Property quantity() As Integer
        Get
            Return _intQuantity
        End Get
        Set(ByVal value As Integer)
            _intQuantity = value
        End Set
    End Property

    Public Property Scale() As Integer
        Get
            Return _intScale
        End Get
        Set(ByVal value As Integer)
            _intScale = value
        End Set
    End Property

    Public Sub New()
        _strName = ""
        _intQuantity = 0
        _intScale = 0
    End Sub

    Public Sub New(ByVal name As String, ByVal quantity As Integer, Optional ByVal Scale As Integer = 0)
        _strName = name
        _intQuantity = quantity
        _intScale = Scale
    End Sub
End Class 
```

我正在尝试将其映射到这些 C# 类

```
public class ProductsViewModel : List<ProductViewModel>
{
    ...
}

public class ProductViewModel
{
    ...
    public SizeViewModel[] ItemizedSize { get; set; }
    ...
}

public class SizeViewModel
{
    public string Name { get; set; }
    public int Quantity { get; set; }
} 
```

我正在使用以下代码进行映射...但是，我收到一个异常，指出未定义从 Size 到 SizeViewModel 的映射

```
AutoMapper.Mapper.CreateMap<Size, SizeViewModel>();
AutoMapper.Mapper.CreateMap<Product, ProductViewModel>();

ProductsViewModel model = AutoMapper.Mapper.Map<List<Product>, ProductsViewModel>(productDetails);
AutoMapper.Mapper.AssertConfigurationIsValid(); 
```

有什么我想念的吗？任何帮助将不胜感激..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:02:09.187

我刚刚运行了你的代码，一切对我来说都很完美。您使用的是什么版本的 AutoMapper？我正在使用版本 2.0.0.0。

这是我的VB代码：

```
Public Class Product

    Public Property itemizedSize As Size()
        Get
            Return _arrItemizedSizes
        End Get
        Set(ByVal value As Size())
            _arrItemizedSizes = value
        End Set
    End Property

    Private Property _arrItemizedSizes As Size()

End Class

Public Class Size
    Private _strName As String
    Private _intQuantity As Integer
    Private _intScale As Integer

    Public Property name() As String
        Get
            Return _strName
        End Get
        Set(ByVal value As String)
            _strName = value
        End Set
    End Property

    Public Property quantity() As Integer
        Get
            Return _intQuantity
        End Get
        Set(ByVal value As Integer)
            _intQuantity = value
        End Set
    End Property

    Public Property Scale() As Integer
        Get
            Return _intScale
        End Get
        Set(ByVal value As Integer)
            _intScale = value
        End Set
    End Property

    Public Sub New()
        _strName = ""
        _intQuantity = 0
        _intScale = 0
    End Sub

    Public Sub New(ByVal name As String, ByVal quantity As Integer, Optional ByVal Scale As Integer = 0)
        _strName = name
        _intQuantity = quantity
        _intScale = Scale
    End Sub
End Class 
```

这是C#：

```
using System;
using System.Collections.Generic;
using SimpleLib;  //That is the VB assembly

namespace ConsoleApplication1
{
    public class ProductsViewModel : List<ProductViewModel>
    {

    }

    public class ProductViewModel
    {
        public SizeViewModel[] ItemizedSize { get; set; }
    }

    public class SizeViewModel
    {
        public string Name { get; set; }
        public int Quantity { get; set; }

        public override string ToString()
        {
            return this.Name + " " + this.Quantity.ToString();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            AutoMapper.Mapper.CreateMap<Size, SizeViewModel>();
            AutoMapper.Mapper.CreateMap<Product, ProductViewModel>();

            List<Product> productDetails = new List<Product>()
                                               {
                                                   new Product() {itemizedSize = new Size[1] {new Size("hello", 2, 5)}},
                                                   new Product() {itemizedSize = new Size[1] {new Size("hello2", 4, 10)}}
                                               };

            ProductsViewModel model = AutoMapper.Mapper.Map<List<Product>, ProductsViewModel>(productDetails);
            AutoMapper.Mapper.AssertConfigurationIsValid();

            Console.WriteLine("Count: {0}", model.Count);
            Console.WriteLine("First Product: {0}", model[0].ItemizedSize[0].ToString());
            Console.WriteLine("Second Product: {0}", model[1].ItemizedSize[0].ToString());

            Console.ReadLine();
        }
    }
} 
```

如您所见，我正在使用控制台应用程序对其进行测试。我正确地通过了所有映射，并且没有来自 AutoMapper 的配置错误。

这是我得到的输出：

```
Count: 2
First Product: hello 2
Second Product: hello2 4 
```

# namespaces - JAXB Impl 在编组的 xml 中生成不正确的命名空间

> ID：11962835
> 
> 赞同：3
> 
> 时间：2012-08-15T00:58:04.397
> 
> 标签：namespaces, jaxb, marshalling, maven-jaxb2-plugin, unmarshalling

我正在使用 JAXB 根​​据定义的模式编组/解组 xml 文档。我注意到的是 JAXB 在编组的 xml 中产生了不正确的名称空间。

以下是详细信息-

肥皂.xsd -->

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope" 
    xmlns:svc="http://abc.com/ServiceSetupV001"
    targetNamespace="http://schemas.xmlsoap.org/soap/envelope"
    elementFormDefault="qualified" attributeFormDefault="unqualified">

    <xsd:import namespace="http://abc.com/ServiceSetupV001" schemaLocation="schema1.xsd" />

    <xsd:complexType name="Envelope">
        <xsd:sequence minOccurs="0" maxOccurs="1">
            <xsd:element name="Body" type="soapenv:Body" minOccurs="0" maxOccurs="1" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="Body">
        <xsd:sequence minOccurs="0" maxOccurs="1">
            <xsd:element name="detailsRequest" type="svc:DetailsRequest" minOccurs="0" maxOccurs="1"/>
            <xsd:element name="detailsResponse" type="svc:DetailsResponse" minOccurs="0" maxOccurs="1" />
        </xsd:sequence>
    </xsd:complexType>

</xsd:schema> 
```

schema1.xsd -->

```
<xsd:schema 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://abc.com/ServiceSetupV001" 
    xmlns:svc="http://abc.com/ServiceSetupV001" 
    xmlns:osa="http://abc.com/xmlschema/osa" 
    elementFormDefault="qualified" attributeFormDefault="unqualified">

    <xsd:import namespace="http://abc.com/xmlschema/osa" schemaLocation="schema2.xsd"/>

    <xsd:complexType name="DetailsRequest">
        <xsd:sequence minOccurs="0" maxOccurs="1">
            <xsd:element name="requestHeader" type="osa:RequestHeader" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:element name="detailsRequest" type="svc:DetailsRequest" />

    <xsd:complexType name="DetailsResponse">
        <xsd:sequence minOccurs="0" maxOccurs="1">
            <xsd:element name="responseHeader" type="osa:ResponseHeader" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:element name="detailsResponse" type="svc:DetailsResponse" />

</xsd:schema> 
```

schema2.xsd -->

```
 <xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        xmlns:osa="http://abc.com/xmlschema/osa" 
        targetNamespace="http://abc.com/xmlschema/osa" 
        elementFormDefault="qualified" attributeFormDefault="unqualified">

        <xsd:complexType name="RequestHeader">
            <xsd:sequence>
                <xsd:element name="component" type="string" />
                <xsd:element name="channel" type="string" />
                <xsd:element name="serverInstance" type="string" minOccurs="0" />
                <xsd:element name="traceId" type="string" />
                <xsd:element name="applicationId" type="string" />
                <xsd:element name="userId" type="string" minOccurs="0" />
                <xsd:element name="userIdType" type="string" minOccurs="0" />
                <xsd:element name="role" type="string" minOccurs="0" />
                <xsd:element name="timestamp" type="dateTime" minOccurs="0" />
                <xsd:element name="isReplyExpected" type="boolean" minOccurs="0" />
            </xsd:sequence>
        </xsd:complexType>

        <xsd:complexType name="ResponseHeader">
            <xsd:sequence>
                <xsd:element name="component" type="string" />
                <xsd:element ref="osa:service" />
                <xsd:element name="traceId" type="string" />
                <xsd:element name="serverInstance" type="string" />
                <xsd:element name="timestamp" type="dateTime" />
            </xsd:sequence>
        </xsd:complexType>

        <xsd:element name="service" type="osa:Service" />
        <xsd:complexType name="Service">
            <xsd:sequence>
                <xsd:element name="name" type="string" />
                <xsd:element name="operation" type="string" />
                <xsd:element name="version" type="string" />
            </xsd:sequence>
        </xsd:complexType>  

    </xsd:schema> 
```

我为 jaxbMarshaller（在我的 spring 配置中）定义了一个 namespacePrefixMapperImpl，它将 URI 映射到我定义的前缀名称。

编组的响应 xml 如下所示。请注意，JAXB 已经搞砸了名称空间前缀。JAXB 使用 soapenv 命名空间作为 detailsResponse 复杂类型，而不是 svc 前缀。然后它使用 svc 前缀作为 responseHeader 复杂类型而不是 osa 前缀。一些元素是字符串类型，因此不应该有前缀（即默认命名空间）。等等...

我哪里做错了？或者这是 jaxb-impl 的问题。

生成的 XML -->

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope"
xmlns:osa="http://abc.com/xmlschema/osa"
xmlns:svc="http://abc.com/ServiceSetupV001">
    <soapenv:Body>
        <soapenv:detailsResponse>
            <svc:responseHeader>
                <osa:component/>
                <osa:service/>
                <osa:traceId>sadasdas</osa:traceId>
                <osa:serverInstance>40d501</osa:serverInstance>
                <osa:timestamp>2012-07-01T02:18:00.693Z</osa:timestamp>
            </svc:responseHeader>
        </soapenv:detailsResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

我用来从模式生成 JAXB 类的插件在我的 pom.xml 中定义如下：

```
<!-- Plugin to generate jaxb classes from xsd -->
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.8.2</version>
    <executions>
        <execution>
            <id>process-xsd</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <phase>generate-sources</phase>
            <configuration>
                <schemaIncludes>
                    <include>**/*.xsd</include>
                </schemaIncludes>
                <bindingIncludes>
                    <include>**/*.xjb</include>
                </bindingIncludes>
                <generateDirectory>${src.dir}</generateDirectory>
                    <verbose>true</verbose>
                <extension>true</extension>
                <args>
                    <arg>-Xannotate</arg>
                </args>
                <plugins>
                    <plugin>
                        <groupId>org.jvnet.jaxb2_commons</groupId>
                        <artifactId>jaxb2-basics-annotate</artifactId>
                        <version>0.6.4</version>
                    </plugin>
                </plugins>
            </configuration>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.6</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.2.6</version>
        </dependency>       
        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>stax</groupId>
            <artifactId>stax-api</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>activesoap</groupId>
            <artifactId>jaxb-xercesImpl</artifactId>
            <version>1.5</version>
        </dependency>                   
    </dependencies>             
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:46:10.753

好吧，看起来 Jaxb 为导入的子元素保留了包含 xsd 的目标名称空间，即使这些导入的子元素有自己的名称空间。解决此问题的一种方法是将架构中导入元素的定义从“type”更改为“ref”。

但是，在这种情况下，我不想修改来自客户端的模式，因此我们不想修改它们以使其工作。

因此，我在 bindings.xjb 文件中添加了以下注释。我现在可以看到生成的模式类中的元素具有正确的命名空间声明。但是，现在的问题是生成的 xml 不会生成子元素，即使名称空间现在是正确的。

所以，我又有点卡住了。我没想到这会这么难。

对我的 bindings.xjb 的更改：

```
<jaxb:bindings node="//xsd:complexType[@name='Body']//xsd:element[@name='detailsRequest']">
    <annox:annotate target="field">
    <annox:annotate annox:class="javax.xml.bind.annotation.XmlElement" 
        name="detailsRequest" 
        namespace="http://abc.com/ServiceSetupV001"/>
    </annox:annotate>            
<jaxb:bindings node="//xsd:complexType[@name='Body']//xsd:element[@name='detailsResponse']">
    <annox:annotate target="field">
    <annox:annotate annox:class="javax.xml.bind.annotation.XmlElement" 
        name="detailsResponse" 
        namespace="http://abc.com/ServiceSetupV001"/>
    </annox:annotate>            
</jaxb:bindings>        

<jaxb:bindings node="//xsd:complexType[@name='DetailsRequest']//xsd:element[@name='requestHeader']">
    <annox:annotate target="field">
    <annox:annotate annox:class="javax.xml.bind.annotation.XmlElement" 
        name="requestHeader" 
        namespace="http://abc.com/xmlschema/osa"/>
    </annox:annotate>            
<jaxb:bindings node="//xsd:complexType[@name='DetailsResponse']//xsd:element[@name='responseHeader']">
    <annox:annotate target="field">
    <annox:annotate annox:class="javax.xml.bind.annotation.XmlElement" 
        name="responseHeader" 
        namespace="http://abc.com/xmlschema/osa"/>
    </annox:annotate>            
</jaxb:bindings> 
```

生成的类有适当的命名空间注解

```
@XmlElement(name = "detailsRequest", namespace = "http://abc.com/ServiceSetupV001")
protected DetailsRequest detailsRequest;

@XmlElement(name = "detailsResponse", namespace = "http://abc.com/ServiceSetupV001")
protected DetailsResponse detailsResponse; 
```

但是现在，编组的 XML 没有值

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope"
xmlns:osa="http://abc.com/xmlschema/osa"
xmlns:svc="http://abc.com/ServiceSetupV001">
    <soapenv:Body>
        <svc:detailsResponse/>
    </soapenv:Body>
</soapenv:Envelope> 
```

# java - JFreeChart同一个dataSeries的不同区域不同颜色

> ID：11962836
> 
> 赞同：4
> 
> 时间：2012-08-15T00:58:12.213
> 
> 标签：java, jfreechart, renderer

在`JFreeChart`我试图根据`y`值对 XY 折线图/曲线的不同区域进行着色。我正在覆盖`XYLineAndShapeRenderer`'s `getItemPaint(int row, int col)`，但是我不确定它如何处理`x`s 之间的线的着色，因为它只是`itemPaint`在`x`（整数值）上。

```
final XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer() {
    @Override

    @Override
    public Paint getItemPaint(int row, int col) {
        System.out.println(col+","+dataset.getY(row, col));
        double y=dataset.getYValue(row, col);
        if(y<=3)return ColorUtil.hex2Rgb("#7DD2F7");
        if(y<=4)return ColorUtil.hex2Rgb("#9BCB3B");
        if(y<=5)return ColorUtil.hex2Rgb("#FFF100");
        if(y<=6)return ColorUtil.hex2Rgb("#FAA419");
        if(y<=10)return ColorUtil.hex2Rgb("#ED1B24");

        //getPlot().getDataset(col).
        return super.getItemPaint(row,col);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T08:14:24.830

看起来线条之间的着色处理是在`drawFirstPassShape`

线条颜色似乎基于前面的点

![在此处输入图像描述](../Images/3262a4449396dd9fa9d4d93d7667e7d5.png)

对您的此修改`XYLineAndShapeRenderer`使用渐变填充来混合线条颜色。

```
XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer(){
        @Override
        public Paint getItemPaint(int row, int col) {
            Paint cpaint = getItemColor(row, col);
            if (cpaint == null) {
                cpaint = super.getItemPaint(row, col);
            }
            return cpaint;
        }

    public Color getItemColor(int row, int col) {
        System.out.println(col + "," + dataset.getY(row, col));
        double y = dataset.getYValue(row, col);
        if(y<=3) return Color.black;
        if(y<=4) return Color.green;;
        if(y<=5) return Color.red;;
        if(y<=6) return Color.yellow;;
        if(y<=10) return Color.orange;;
        return null;
    }

    @Override
    protected void drawFirstPassShape(Graphics2D g2, int pass, int series,
        int item, Shape shape) {
        g2.setStroke(getItemStroke(series, item));
        Color c1 = getItemColor(series, item);
        Color c2 = getItemColor(series, item - 1);
        GradientPaint linePaint = new GradientPaint(0, 0, c1, 0, 300, c2);
        g2.setPaint(linePaint);
        g2.draw(shape);
    }
}; 
```

![在此处输入图像描述](../Images/74544c69c374f563bb26136ead4a8591.png)

我已删除`ColorUtil.hex2Rgb`，因为我无权访问该类/方法。您可能需要修改`GradientPaint`以考虑点之间的距离/梯度。

# javascript - 如何根据浏览器宽度动态调整 CSS 样式表？

> ID：11962837
> 
> 赞同：8
> 
> 时间：2012-08-15T00:58:40.537
> 
> 标签：javascript, html, css, browser, google-apps-script

我们正在开发一个开源网络应用程序，供世界各地的艺术教师一起工作。我们需要一个漂亮的网站，它可以简单地根据浏览器的活动宽度进行自我调整，就像 google.org 或 barackobama.com 就做得很好。

我们可以检测浏览器、操作系统等，但不想使用任何这些信息。我们只需要在调整浏览器宽度时触发四五个不同的样式表。

因此，例如，当您使用台式计算机在浏览器上访问应用程序时，您会在浏览器全屏时看到完整的应用程序。然后，随着浏览器减小其宽度，站点会立即动态更改其格式以实现通用兼容性。

我们不希望我们的 CSS 基于浏览器类型或原始宽度而改变，而是希望它根据视口的当前宽度以毫秒为单位进行调整——无论它是“移动”设备还是“平板电脑”机器或“桌面”浏览器。

奇怪的是，我正在使用 Google Apps 脚本来托管我们的网络应用程序，所以看起来所有元视口标签都被删除了。

我们如何根据当前查看浏览器窗口的宽度引入四五个不同的样式表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T01:00:34.863

您可以使用 CSS 媒体查询，如下所示：

```
<link rel="stylesheet" media="screen and (min-device-width: 700px)" href="css/narrow.css" />
<link rel='stylesheet' media='screen and (min-width: 701px) and (max-width: 900px)' href='css/medium.css' />
<link rel="stylesheet" media="screen and (max-device-width: 901px)" href="css/wide.css" /> 
```

或者 jQuery，像这样：

```
function adjustStyle(width) {
    width = parseInt(width);
    if (width < 701) {
        $("#size-stylesheet").attr("href", "css/narrow.css");
    } else if ((width >= 701) && (width < 900)) {
        $("#size-stylesheet").attr("href", "css/medium.css");
    } else {
       $("#size-stylesheet").attr("href", "css/wide.css"); 
    }
}

$(function() {
    adjustStyle($(this).width());
    $(window).resize(function() {
        adjustStyle($(this).width());
    });
}); 
```

两者均来自：[http ://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-15T01:01:09.823

CSS媒体查询是要走的路

```
<link rel='stylesheet' media='screen and (max-width: 700px)' href='css/narrow.css' />
<link rel='stylesheet' media='screen and (min-width: 701px) and (max-width: 900px)' href='css/medium.css' />
<link rel='stylesheet' media='screen and (min-width: 901px)' href='css/wide.css' /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-15T01:00:10.987

使用[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)来做到这一点

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-26T16:17:58.910

您可以使用 CSS。

```
<link rel='stylesheet' media='screen and (max-width: 480px)' href='css/mobile.css' />
<link rel='stylesheet' media='screen and (min-width: 481px)' href='css/pc.css' /> 
```

有关更多代码和详细信息

## [点击这里](http://sahultd.com/how/css/change-css-style-with-different-device-width)

# python - 可能的 GHMM 扩展

> ID：11962839
> 
> 赞同：2
> 
> 时间：2012-08-15T00:59:07.763
> 
> 标签：python, machine-learning, hidden-markov-models

我真的很喜欢玩[GHMM](http://ghmm.org/)库。我想知道是否有任何方法可以使用矩阵参数定义自定义排放分布。具体来说，我希望执行以下操作：

我想使用`ghmm.MultivariateGaussianDistribution`设置的修改版本。但是，我希望将分布约束为具有零的多元正态分布，而不是允许具有完整协方差矩阵的多元正态分布，其中每个分布状态具有 n^2 + n 个参数（n 是排放变量的维度）非对角参数（即每个排放变量独立于其他变量，但根据状态 i 将它们绘制在一起）。因此，每个状态的参数减少到 2n。这应该真正改善对角方差项的估计，这是最重要的，在没有太多数据点可以使用的情况下。

任何关于在哪里修改代码的指导将不胜感激。

# haskell - 在 Frege 中表达渴望但在 Haskell 中很懒惰？

> ID：11962844
> 
> 赞同：6
> 
> 时间：2012-08-15T01:00:02.670
> 
> 标签：haskell, frege

在 Haskell 中，以下代码打印“[1,2,3,4,5”：

```
foo = take 10 $ show $ numbersFrom 1 where 
  numbersFrom start = start : numbersFrom (start + 1) -- could use [1..] 
```

但是在 Frege 中，它会抛出`OutOfMemoryError`以下代码：

```
foo = take 10 $ unpacked $ show $ numbersFrom 1 where
  numbersFrom start = start : numbersFrom (start + 1) 
```

这里唯一的区别是`unpacked`转换 from`String`和`[Char]`FWIW 所需的函数，该`unpacked`函数是急切的。为什么整个表达式不能像 Haskell 中那样懒惰？是否有可能在 Frege 中实现类似于 Haskell 的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T01:49:36.700

我不知道弗雷格，但根据语言定义`String`，你不能构建无限长的字符串（内存不足问题可能与渴望`java.lang.String`无关）。`unpack`

因为您知道 的每个元素`numbersFrom 1`将显示为至少 1 个字符，所以您可以过度估计列表的大小以显示然后解包，然后获取所需字符的数量：

```
foo = take 10 $ unpacked $ show $ take 10 $ numbersFrom 1 where
  numbersFrom start = start : numbersFrom (start + 1) 
```

或更一般地说：

```
n = 10 -- number of characters to show
m = 1  -- minimum (map (length . show) xs) for some type of xs
foo :: a -> [Char]
foo = take n . unpack . show . take ((n+m-1) `div` m) . someEnumeration
  where
  someEnumeration :: a -> [a]
  someEnumeration = undefined 
```

如果您的枚举很昂贵，那么您可以开始考虑逗号、空格等的数量，并将参数减少到 second `take`，但您明白了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T01:23:32.090

我没有使用过弗雷格，但在我看来，如果`unpacked`是严格的，那么它的参数不应该是一个无限列表。尝试`unpacked $ take 10`代替`take 10 $ unpacked`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T08:16:46.637

这将不起作用，因为（不是）由 . 生成的无限字符串`show`。您需要一些帮助函数将列表转换为`Char`.

对此有一个标准功能可能会很好。

* * *

编辑 2013 年 2 月 22 日

类`Show`现在有一个新方法：

```
{--
    'showChars' addresses the problem of 'show'ing infinite values.
    Because 'show' has type 'String' and 'String' is atomic, this would
    try to create a string with infinite length, and hence is doomed to fail.

    The default definition is

    > showChars = String.toList . show

    This is ok for all finite values. But instances for recursive types
    should implement it in a way that produces a lazy list of characters.

    Here is an example for the list instance:

    > showChars [] = ['[', ']']
    > showChars xs = '[' : ( tail [ c | x <- xs, c <- ',' : showChars x ] ++ [']'] )

-}
showChars :: show -> [Char]
showChars = String.toList . show 
```

导致的 Haskell 代码`OutOfMemoryError`现在可以写成：

```
(println . packed . take 10 . showChars ) [1..] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-16T00:11:16.973

添加到其他答案，

由于`show`返回 a `java.lang.String`，因此无法显示无限列表。所以我想我可以写一个不同版本的 show 来返回 a `[Char]`。这就是我想出的，它正在发挥作用。

```
frege> :paste
class AltShow a where
  altshow :: a -> [Char]

instance AltShow AltShow a => [a] where
  altshow [] = []
  altshow xs = concat $ (['['] : intersperse [','] ys) ++ [[']']] where
    ys = map altshow xs

instance AltShow Int where
  altshow = unpacked <~ show

intersperse :: a -> [a] -> [a]
intersperse _ [] = []
intersperse _ (x:[]) = [x]
intersperse sep (x : y : []) = 
  x : sep : y : []
intersperse sep (x : y : rest) = 
  x : sep : y : sep : intersperse sep rest
:q
Interpreting...

frege> altshow [1, 10, 2, 234]
res3 = ['[', '1', ',', '1', '0', ',', '2', ',', '2', '3', '4', ']']
frege> :t res3
res5 :: [Char]
frege> packed res3
res6 = [1,10,2,234]
frege> :t res6
res7 :: String 
```

现在问题中的代码变得类似于 Haskell，并且不会因 OutOfMemoryError 而爆炸：

```
frege> :paste
foo = take 10 $ altshow $ numbersFrom 1 where
  numbersFrom start = start : numbersFrom (start + 1)
:q
Interpreting...

frege> foo
res9 = ['[', '1', ',', '2', ',', '3', ',', '4', ',', '5']
frege> packed foo
res11 = [1,2,3,4,5 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T09:33:09.577

简短的回答：字符串在 Frege 中是严格的，但在 Haskell 中是惰性的。

*列表*在两种语言中都是惰性的。但是在弗雷格中，字符串不是列表。

# android - 如何以编程方式在 android 中加入 2 个联系人？

> ID：11962848
> 
> 赞同：9
> 
> 时间：2012-08-15T01:00:40.123
> 
> 标签：android, api, join, merge, contacts

我需要知道是否可以加入两个或多个联系人（以编程方式，使用 Contacts android API 或其他方式）。

例如，我有一个联系人“Axel Rose”，有一个电子邮件帐户和一个电话号码，我注意到一些应用程序（如 whatsapp、Facebook 和 Skype）正在为 Axel Rose 创建新的联系人条目，而不是合并现有的条目。

我可以使用手机中的“加入功能”加入联系人，但有没有程序化方式？

提前致谢。
克里斯蒂安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-18T08:26:12.440

您可以使用[AggregationExceptions](http://developer.android.com/reference/android/provider/ContactsContract.AggregationExceptions.html)。请参阅[如何手动聚合联系人](https://groups.google.com/forum/#!topic/android-developers/16d_y1y4KNI)？

了解联系人和聚合如何工作的好地方是[Contacts Provider Documentation](http://developer.android.com/guide/topics/providers/contacts-provider.html "联系人提供者")

简短的摘要：

您在电话簿上看到的联系人是 ContactsContract.Contacts 表中的联系人。电话簿上显示的照片、电话等来自不同的 RawContacts 条目。一个联系人可以有一个或多个 RawContact。

当 RawContact 共享一些公共数据（姓名、电话号码、电子邮件等）时，一个联系人恰好有多个 RawContact。这个 RawContacts 并入单个 Contact 是通过自动聚合规则进行的（请参阅[Contact Basics](http://developer.android.com/guide/topics/providers/contacts-provider.html#ContactBasics "联系基础")文档）。

您不能在 ContactsContract.Contacts 表中插入联系人。从文档中：

> 注意：如果您尝试使用 insert() 将联系人添加到 Contacts Provider，您将收到 UnsupportedOperationException 异常。如果您尝试更新列为“只读”的列，则会忽略更新。

# ios - 是否有 GCD 队列的队列字典

> ID：11962850
> 
> 赞同：4
> 
> 时间：2012-08-15T01:00:51.083
> 
> 标签：ios, multithreading, grand-central-dispatch

我非常喜欢以下`threadDictionary`属性`NSThread`：非常方便地存储具有每个线程所有权的东西。

GCD队列是否有等效的字典？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T01:27:04.240

如果您可以针对 iOS 5 及更高版本，您可以使用`dispatch_queue_get[set]_specific()`它允许您将字典样式（即键控）值添加到队列中。我在它们上面找不到文档页面，奇怪的是，但它们在`queue.h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T01:15:21.250

你可能想调查一下`dispatch_set_context/dispatch_get_context`。[此处](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)和[此处](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)的文档。您必须管理上下文，但它可能是您正在寻找的。

# ruby - 为什么 rspec 用分数报告时间？

> ID：11962855
> 
> 赞同：3
> 
> 时间：2012-08-15T01:01:43.127
> 
> 标签：ruby, rspec

一个有点轻松的问题：我的 rspec 测试以：

```
Finished in 7/5 minutes 0.78322 seconds 
```

这到底是什么意思呢？确实感觉大约是 1-2 分钟，但为什么小数加上小数秒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:34:57.847

FWIW，看起来 RSpec（或某人）正在计算分钟数作为 a[`Rational`](http://www.ruby-doc.org/core-1.9.3/Rational.html)而不是 normal `Numeric`。这是我能想象你会看到小数值的唯一原因。

# java - Java EE 应用程序具有不同模式的两个表之间的数据迁移

> ID：11962857
> 
> 赞同：0
> 
> 时间：2012-08-15T01:01:58.717
> 
> 标签：java, sql, database, hibernate

我想将数据从一个表迁移到另一个表，除了具有不同表名的两个表之外，它们还具有不同的架构。

例如，现有表是：

```
@Entity
public class Address {
     private String uuid;
     private String street;
     private String postcode;
}

@Entity
public class User {
     private String uuid;
     private String name;
     @One2One
     private Address address;
} 
```

需求改变后，我们将这两个类重构为如下所示：

```
@Entity
public class UserChanged {
     private String uuid;
     private String name;
     @Embedded
     @AttributeOverrides(.....)
     private Address address;
}
@Embeddable 
public class AddressChanged {
     private String street;
     private String postcode;
} 
```

这意味着，在新表中，我们只有一个“UserChanged”表，所有列都包含用户信息，如 uuid、姓名、街道和邮政编码。但是对于现有的，我们有两个表，分别是“用户”和“地址”，在“用户”表中，有一个外键“地址”，它使用主键引用表“地址”。

```
Address
------------------
uuid          varchar (primary key)
street        varchar
postcode      varchar

User
------------------
uuid          varchar (primary key)
name          varchar
address_id    varchar (foreign key)

UserChanged
------------------
uuid          varchar (primary key)
name          varchar
street        varchar
postcode      varchar 
```

所以我要做的就是将“User”和“Address”表中的所有数据信息迁移到一个“UserChanged”表中，即User+Address -> UserChanged。

任何人都可以告诉我应该为这个迁移要求编写的 sql 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:17:52.037

```
insert into UserChanged (uuid, name, street, postcode) select a.uuid, u.name, a.street, a.postcode from address a, user u where a.uuid = u.address_id 
```

# c - gcc 模块大小限制

> ID：11962859
> 
> 赞同：1
> 
> 时间：2012-08-15T01:03:21.147
> 
> 标签：c, gcc

我用 C 语言创建了一个程序，它编写了一个程序作为其输出。

目标是测试单体程序的性能方面。

第一个测试配置了 10 000 次迭代，结果程序编译并运行。具有 100 000 次迭代的第二个测试是在具有 16 GB RAM (16 GB SWAP) 的 i7 3770 中在 Ubuntu 12.04 x86_64 中编译（到现在 3030 分钟）。

我知道解析复杂度从 O(n**2) 到 O(n**3)，但这需要的时间太长。在最坏的情况下，编译时间增加 1000 倍。

正在消耗 35.2% 的内存并且仍在增加。

我的问题是：

*   GCC 对每个模块的变量数量或模块大小有限制吗？

*   这是一个错误吗？

原始程序生成器是：

```
#include <stdio.h>
#define MAX_INTERACTION 100000

int main(int argc, char **argv)
{
FILE * fp;
fp = fopen("source.c","w");

fprintf(fp,"#include <stdio.h> \n \n \n");
fprintf(fp,"int main(int argc, char **argv) \n");
fprintf(fp,"{ \n");

// local variables and exchange variables
for (int i=0; i< MAX_INTERACTION ; ++i)
{
    // passed variable, return label , local variable
    fprintf(fp," int pv%d , rl%d, loc%d ; \n",i,i,i); 
}

fprintf(fp," int pvd =0 ;\n \n \n");

//code blocks
for (int i=0; i< MAX_INTERACTION ; ++i)
{
    fprintf(fp," block%d : \n",i);
    fprintf(fp," loc%d = pv%d +1 ; \n",i,i);
    fprintf(fp," goto  rl%d; \n",i);
}

//call blocks
for (int i=1; i< MAX_INTERACTION +1; ++i)
{
    fprintf(fp," pvd = pv%d ;\n",(i-1));
    fprintf(fp," goto block%d; \n",(i-1));
    fprintf(fp," rl%d: \n",(i-1));
}

fprintf (fp,"printf( \"Concluido \\n \"); \n");
fprintf(fp,"}\n");

fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:04:58.937

I did some timing on a MacBook Pro with 8 GB main memory (2.3 GHz Intel Core i7).

Modified the generator to take a parameter indicating the program size, and then ran it repeatedly:

```
$ for size in 10 100 1000 2000 3000 4000 5000 10000 20000 30000
> do
>     ./generator $size
>     echo $size
>     time make -s source 2>/dev/null
>     sleep 1
> done
10

real    0m0.526s
user    0m0.030s
sys     0m0.029s
100

real    0m0.084s
user    0m0.031s
sys     0m0.018s
1000

real    0m0.333s
user    0m0.235s
sys     0m0.044s
2000

real    0m0.392s
user    0m0.318s
sys     0m0.046s
3000

real    0m0.786s
user    0m0.661s
sys     0m0.070s
4000

real    0m0.657s
user    0m0.599s
sys     0m0.053s
5000

real    0m0.978s
user    0m0.893s
sys     0m0.069s
10000

real    0m3.063s
user    0m2.770s
sys     0m0.149s
20000

real    0m8.109s
user    0m7.315s
sys     0m0.274s
30000

real    0m21.410s
user    0m19.553s
sys     0m0.483s

$ 
```

Clearly, at the small sizes, there is overhead in simply getting the compiler run (especially the first run!), reading and writing files, etc. Redoing in multiples of 10,000 up to 90,000, I got the results in the table below. The slowdown is appreciable, especially at between 20,000 and 30,000\. I also got fairly significant variability in the times for any given size. And making the code configurable and then running incrementally when you run into a problem is only sensible.

```
 Compared to 10K
Size       Time     Size Ratio   Time Ratio  Log Time Ratio
 10K        3.7      1.00          1.00       0.000
 20K        8.1      2.00          2.19       0.784
 30K       25.1      3.00          6.78       1.915
 40K       45.2      4.00         12.22       2.503
 50K       76.7      5.00         20.73       3.032
 60K      110.5      6.00         29.96       3.397
 70K      176.0      7.00         47.57       3.862
 80K      212.0      8.00         57.30       4.048
 90K      292.3      9.00         79.00       4.369
100K      363.3     10.00         98.19       4.587 
```

Your mileage will vary, of course.

For reference, the GCC I'm using is:

```
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00) 
```

The compilation command line is:

```
/usr/bin/gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
       -Wold-style-definition source.c -o source 
```

A home-built GCC 4.7.1 took 34.6 s for 10K, and 150.9 s for 20K.

# objective-c - 将字符串拆分为多维 NSMutableDictionary

> ID：11962863
> 
> 赞同：0
> 
> 时间：2012-08-15T01:05:12.550
> 
> 标签：objective-c, ios, cocoa-touch, nsdictionary, nsmutabledictionary

假设以下示例数组：

```
{"/documents", "/documents/files", "/pictures"} 
```

我希望创建一个看起来像的多维 NSMutableDictionary（如果我要手动创建它）：

```
NSArray *keys = [NSArray arrayWithObjects: @"documents", @"pictures", nil];
NSArray *objects = [NSArray arrayWithObjects: [NSDictionary dictionaryWithObject:[NSDictionary dictionary] forKey:@"files"], [NSDictionary dictionary], nil];

NSMutableDictionary *demoDict = [NSMutableDictionary dictionaryWithObjects:objects forKeys:keys];

NSLog(@"%@", demoDict); 
```

这将记录为：

```
documents = {
    files = {
    };
};
pictures = {
}; 
```

**我如何从具有无限长度的路径长度的类似数组中自动生成它（所以无限维度的字典？）**

到目前为止我所拥有的（希望它作为一个起点有用）是；我把逻辑的注释放在代码上面，让大家看得更清楚：（_folderPaths是数组）

```
/**
 *set the root dictionary
 *iterate through the array
 *Split the path down by the separator
 *iterate over the path parts
 *make sure there is a part to the part, eliminates initial slash or
    double slashes
 *Check if key exists
 *if not then set a new mutdict for future children with key being the pathpart
**/

NSMutableDictionary *foldersDictionary = [NSMutableDictionary dictionary];

for(NSString *path in _folderPaths){

    NSArray *pathParts = [path componentsSeparatedByString:@"/"];

    for(NSString *pathPart in pathParts){

        if([pathPart length]>0)
        {
            if(![foldersDictionary objectForKey:pathPart])
                [foldersDictionary setObject:[NSMutableDictionary dictionary] forKey:pathPart];
            //Some way to set the new root to reference the Dictionary just created here so it can be easily added to on the next iteration?
        }

    } //end for pathPart in pathParts
} //end for path in _folderPaths

NSLog(@"%@", foldersDictionary); 
```

这将记录为：

```
documents = {
};
files = {
};
pictures = {
}; 
```

因此，我需要一种能够在拆分路径的每次迭代中更深入地了解字典的方法。我以前在 C# 中的节点视图上做过这个，我可以用光标引用一个孩子，但我没有找到一种方法来使用指针使用 Objective-C 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:44:31.010

你很接近。您需要做的就是动态更改添加新词典的父级。你可以这样做：

```
NSMutableDictionary *folders = [NSMutableDictionary dictionary];

for (NSString *path in folderPaths) {
    NSMutableArray *folderStack = [NSMutableArray arrayWithObject:folders];

    for (NSString *component in [path pathComponents]) {
        if ([component isEqualToString:@"/"]) continue;

        NSMutableDictionary *folder = [[folderStack lastObject] objectForKey:component];
        if (folder == nil) {
            folder = [NSMutableDictionary dictionary];
            [[folderStack lastObject] setObject:folder forKey:component];
        }
        [folderStack addObject:folder];
    }
} 
```

请注意，在这种方法下，这些数组都会产生相同的结果：

```
{"/documents", "/documents/pictures", "/documents/pictures/favorites"}
{"/documents/pictures/favorites", "/documents", "/documents/pictures"}
{"/documents/pictures/favorites"} 
```

# html - 为了 HTML5 而 HTML5 不好吗？

> ID：11962866
> 
> 赞同：5
> 
> 时间：2012-08-15T01:05:36.517
> 
> 标签：html

所以我一直在玩弄我正在重新设计的网站的 HTML。多亏了[HTML5 shiv](http://code.google.com/p/html5shiv/)，我一直在非常自由地使用闪亮的新 HTML5 标签。因此，我开始觉得我有很多标签混乱。例如：

```
<header>
    <nav>
        <h1 id="logo"><a href="/">Logo Image CSS'd in here</a></h1>
        <ul>
            <li><a href="/page-1">Page 1</a></li>
            <li><a href="/page-1">Page 2</a></li>
            <li><a href="/page-1">Page 3</a></li>
            <!-- etc. -->
        </ul>
    </nav>
</header> 
```

我已经包含了我的徽标，`<nav>`因为我有空间限制并且我删除了明确的主页链接（我的主页只是子页面内容的摘要，其中包含指向它们的内联链接）。所以从语义上讲，我假设 HTML5 文档应该同时具有`<header>`和`<nav>`. 毕竟，一个`<nav>`单独的并不意味着它是主页导航（我`<nav>`用来包装我的面包屑和页脚链接），我觉得我的`<ul>`浮动`<header>`缺少一个`<nav>`标签。

那么我是一个 HTML5 潮人并在这里过度使用它吗？或者这种过度标记（特别是因为`<header>`标记具有所有样式，而`<nav>`没有）是不必要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:10:29.743

这似乎是一个非常合理的结构。无论如何，我假设您至少使用了一个`header`或`nav`来设置页面上的元素样式。两者都用于提供有关页面结构的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:11:37.840

好吧，语义并不关心元素最终是否会被样式化。它关心以易于理解的方式概述页面。通过将所有这些链接放在`<header>`带有徽标的元素内，它们不一定意味着任何东西。但是通过将它们放在一个`<nav>`元素中，您表明它是导航，这意味着很多，即使`<nav>`通过样式对用户来说元素的存在是不明确的。

我个人不会在 nav 元素中使用额外的无序列表。除了样式的额外元素之外，我从来没有真正理解使用列表进行导航的论点，这对我来说似乎相当没有语义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T01:16:34.470

你所拥有的看起来不错。如果您想挑剔，那么您的标题徽标可能在您的导航之外（您可以使用 css 浮动导航以适应空间限制）。但是，由于您的徽标可以说是导航的一部分（因为它是您的主页链接），我认为您可以包含它。

样板文件可能有点令人生畏，所以我想向人们展示这个作为参考：[https ://github.com/impressivewebs/Easy-HTML5-Template/blob/master/index.html](https://github.com/impressivewebs/Easy-HTML5-Template/blob/master/index.html)

# javascript - Sencha Touch 2 - 从商店自定义模型填充

> ID：11962876
> 
> 赞同：0
> 
> 时间：2012-08-15T01:06:38.607
> 
> 标签：javascript, mobile, sencha-touch-2, store

我正在构建一个 sencha (sencha touch 2) 应用程序，它从代理获取一些 json 数据。我正在填充一个商店，所以我有一个模型（带有一些字段）和一个显示获取数据的视图。

我需要使用 json 阅读器修改代理接收的一些数据，在保存到模型之前，我需要修改一些模型字段。

假设我有字段（id、title、text），我正在接收未解析的文本，我需要将 url 转换为像 http://whatever 这样的富文本格式

好的，那么，是否有任何方法要定义到商店类中，每次模型被填满时都会执行该方法？

例如：

```
...
customText: function(data) {
    return parseUrlsFromString(data);
}
... 
```

我有一个视图、一个控制器、一个商店和一个定义预期行为的模型。

任何评论将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:49:56.660

在做了一些研究之后，一些人在煎茶论坛上回复了。我与您分享我的问题的解决方案：

我们需要对您的模型定义做一些小改动。如果您在标题数据字段（模型定义）上设置转换函数，您可以在原始数据添加到记录之前对其执行任何操作。

查看文档的类型和转换部分（靠近顶部）：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.Field](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Field)

还要确保阅读转换属性文档：[http ://docs.sencha.com/touch/2-0/#!/...ld-cfg-convert](http://docs.sencha.com/touch/2-0/#!/...ld-cfg-convert)

# c# - 可以将 DTO 的 List<> 打印到控制台吗？

> ID：11962877
> 
> 赞同：0
> 
> 时间：2012-08-15T01:08:09.173
> 
> 标签：c#, list, dto

我正在尝试将 DTO 对象列表打印到 Console 语句中。我正在从 SQL 服务器按类别名称 (PK) 获取对象列表，并将它们转换为 DTO 以传递给客户端。我应该详细说明...每个对象（在对象表中）都有一个类别以及其他一些字符串，类别表的 PK 是“CategoryName”

这是我的代码示例：

```
foreach(Object ii in context.Objects.Where(i => i.Commodity.CategoryName == categoryName)) 
{
                ObjectDTO objectDTO = EncodeDTO.BuildObjectDTO(ii);
                lotDTOList.Add(ii);
} 
```

我尝试使用：

```
//for testing
objectDTOList.ForEach(Console.WriteLine);
return objectDTOList; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T01:10:33.320

你可以这样做：

```
list.ForEach(p => Console.WriteLine(p)); 
```

请记住覆盖 ToString() 以获得有意义的输出，或者执行以下操作：

```
list.ForEach(p => Console.WriteLine(p.SomeMeaningfulProperty)); 
```

# javascript - jQuery添加新表格行不在表格末尾

> ID：11962880
> 
> 赞同：0
> 
> 时间：2012-08-15T01:09:29.187
> 
> 标签：javascript, jquery, html-table

我有一个 HTML 表，并希望允许用户单击一个按钮来添加一个新行，但新行不会添加到表的末尾，而是添加到最后一行输入字段之后。

我在以下位置设置了一个示例 JSFiddle：

[http://jsfiddle.net/n7Gup/2/](http://jsfiddle.net/n7Gup/2/)

我有一个新行按钮，但它没有克隆输入的最后一行（即新行按钮所在的行）。我需要修改它，以便在这些输入行的最后一个之后插入一个新行。

这是我从在线教程中找到的脚本：

```
$(document).ready(function($)
{
  // trigger event when button is clicked
  $("#button2").click(function()
  {
    // add new row to table using addTableRow function
    addTableRow($("#nextYear"));

    // prevent button redirecting to new page
    return false;
  });

  // function to add a new row to a table by cloning the last row and
  // incrementing the name and id values by 1 to make them unique
  function addTableRow(table)
  {
    // clone the last row in the table
    var $tr = $(table).find("tbody tr:last").clone();

    // get the name attribute for the input and select fields
    $tr.find("input,select").attr("name", function()
    {
      // break the field name and it's number into two parts
      var parts = this.id.match(/(\D+)(\d+)$/);

      // create a unique name for the new field by incrementing
      // the number for the previous field by 1
      return parts[1] + ++parts[2];
    // repeat for id attributes
    }).attr("id", function()
    {
      var parts = this.id.match(/(\D+)(\d+)$/);
      return parts[1] + ++parts[2];
    });

    // append the new row to the table
    $(table).find("tbody tr:last").after($tr);
  };
}); 
```

创建的新行可以使所有输入字段为空，因为用户将重新开始。还有一种方法可以让“新行”按钮只出现一次，并且总是在活动输入的最后一行。例如，最初只有一行，但如果您单击 New Row 按钮，则会在初始行下方创建第二行，并且 New Row 按钮现在只会出现在这个新创建的行上。

感谢任何帮助 - 我是 Javascript 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:20:20.973

这是一个解决方案

[http://jsfiddle.net/7vuZf/3/](http://jsfiddle.net/7vuZf/3/)

基本上，您只需将引用传递给单击的按钮并从那里计算出您在表中的位置 - 保存对当前最后一行的引用（使用最接近（），克隆它（使用事件），删除新行按钮原始（您可能需要用删除按钮替换它），并在原始之后插入克隆。

此外，现在您可能不需要对传递给单击处理程序的表对象的引用（尽管我将其留在了代码中）。

# android - 在拖动过程中，在小部件区域之外绘制

> ID：11962882
> 
> 赞同：0
> 
> 时间：2012-08-15T01:09:58.720
> 
> 标签：android, drag-and-drop, parent, draw

给定一个包含多个小部件的活动，我想在拖动操作期间提供一些额外的视觉反馈。我有拖动部分工作，默认阴影。此外，由于每个小部件都处理 onDrag，我想在小部件区域之外绘制一个位图指示器。我想出了如何在小部件的区域内绘图，但是（如预期的那样）它会剪辑超出其边界的任何东西。

我的第一个想法是使用 SurfaceView。看来，我必须根据父级创建一个。作为一个新手，这对我来说有很多工作要做，所以我希望有人可以先验证这种方法。

另一个想法是直接在父母的画布上绘制（如果我能弄清楚如何获取画布）。我认为这样做的缺点是在标记需要移动时必须“擦除”我绘制的内容。这会导致过度重绘吗？

还有其他方法吗？SurfaceView 是否会出现与父画布相同的“擦除”问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:21:01.087

我认为可以递归地使用 getParent 直到找到代表要绘制空间的父级。我没有尝试这样做，因为它非常依赖于您使用的布局。如果您更改布局，您可能需要更改代码。

相反，在布局的顶层，我选择了 FrameLayout 并将我想要的布局作为它的子布局。作为第二个孩子，我放了一个“空”的视图，背景透明。FrameLayout 将所有子级显示在彼此之上。所以我的“空”视图显示在我想要的布局之上。例子：

```
<FrameLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:MyApp="http://schemas.android.com/apk/res/com.example.mockup"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  <TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    ... stuff for my desired layout ...
  </TableLayout>

  <com.example.mockup.ActivityView
    android:id="@+id/activity_view"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:background="@null" />

</FrameLayout> 
```

除了位置计算之外，代码非常简单。为了独立于布局，我发现最好将所有内容都转换为屏幕坐标；否则 getTop()、getLeft() 返回相对于直接父级的值，这可能与您计划绘制的空间不同。这是我在启动绘图的小部件中所做的。首先，您在活动中需要这个：

```
private ActivityView mActivityView ;

@Override
public void onCreate (Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);

  // get "activity" view - this covers the whole activity space
  mActivityView = (ActivityView)findViewById (R.id.activity_view);

  // find the widget and give it the activity view
  MyWidget widget = (MyWidget)findViewById (R.id.my_widget);
  widget.setActivityView (mActivityView);
} 
```

您将在小部件中需要它 - 启动绘图的那个：

```
public void setActivityView (ActivityView v)
{
  mActivityView = v;
}

public void drawThing (float touchX, float touchY)
// touchX, touchY - location where user is touching, relative to "this" widget.
{
  int[] locScreen = new int[2]; // x,y
  getLocationOnScreen (locScreen);
  int xScreen = locScreen[0] + touchX;
  int yScreen = locScreen[1] + touchY;
  mActivityView.drawThing (xScreen, yScreen);
} 
```

最后，您需要在 ActivityView 中进行绘图

```
private int mXThing;
private int mYThing;

@Override
protected void onDraw (Canvas canvas) 
{
  super.onDraw (canvas);
  ... draw the "thing" using mXThing, mYThing ...
}

void drawThing (int xScreen, int yScreen)
{
  // convert to view coords.
  int[] loc = new int[2]; // x,y
  getLocationOnScreen (loc);
  mXThing = xScreen - loc[0];
  mYThing = yScreen - loc[1];
  invalidate();
} 
```

我想还有其他方法可以做到这一点，也许更好。如果有人有建议，请随时发表评论。

# ruby-on-rails - 为什么 Array#grep 会抛出带有斜杠的语法错误？

> ID：11962886
> 
> 赞同：1
> 
> 时间：2012-08-15T01:10:39.403
> 
> 标签：ruby-on-rails, ruby, regex

以下命令适用于 Ruby 1.9.3p194

```
> %w(a b c).grep(/a/) { |v| v.upcase }
 => ["A"] 
```

但是如果数组中的任何元素中有斜线，就会抛出 SyntaxError：

```
> %w(a/ b c).grep(/a/) { |v| v.upcase }
SyntaxError: (irb):41: syntax error, unexpected tMATCH
%Q/a// =~ /a/ 
```

我假设我使用 grep 不正确，但我得到的错误确实令人困惑。为什么会引发此错误，以及基于正则表达式在数组中查找元素的正确方法是什么？

**更新：**

Select 给了我我想要的东西，但我仍然很好奇 grep 是为了什么......

```
> %w(a/ b c).select {|v| v =~ /a/ }
=> ["a/"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:35:42.317

原来它既不是 Ruby 也不是 Rails，而是一个名为[awesome_print](https://github.com/michaeldv/awesome_print/blob/master/lib/awesome_print/core_ext/array.rb#L33-70)的 gem ，它是猴子修补 Ruby 的 grep 方法。我使用的是旧版本，它一定有一些错误。升级到最新版本 1.0.2 可解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T01:29:58.703

我无法重现您的错误。

起初我认为这是 IRb 的问题。众所周知，IRb 的解析器（基本上是不可维护的大杂烩`Regexp`）错误地解析了一些结构。此外，由于 IRb 的工作方式，Ruby 和 IRb 之间存在语义差异，尤其是局部变量和全局方法。

这就是为什么在将错误发布到此处之前，您应该*始终*在纯 Ruby 中重现错误。或者至少在 Pry 中尝试它，它使用 YARV、Rubinius 或 JRuby 的解析器，而不是自己滚动。

但这不是这里的情况：您的第一个代码片段在普通 Ruby 和 IRb 中都可以正常工作。

*但是，即使*在纯 Ruby 中运行，您的*第二个*代码片段*也会*产生您遇到的错误：

 *```
ruby -e '%Q/a// =~ /a/'
# -e:1: syntax error, unexpected tMATCH
# %Q/a// =~ /a/
#         ^ 
```*

# jquery - 几个问题（弹跳，对齐）

> ID：11962889
> 
> 赞同：0
> 
> 时间：2012-08-15T01:11:24.323
> 
> 标签：jquery, css, center, vertical-alignment, bounce

我试图对齐中间圆圈中的文本，并在圆圈悬停时让它们反弹（即文本）

这里是：

[http://jsfiddle.net/cJ3se/](http://jsfiddle.net/cJ3se/)

希望有人可以帮助

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:46:58.363

在元素中将单行文本垂直居中的最简单方法是将“行高”与元素的“高度”匹配。所以在这种情况下，这将是：

```
.circ {
    line-height: 200px;
} 
```

然后，要让文本反弹，只需通过动画更改“行高”：

```
.circ:hover {
    animation: bounce .5s ease-in-out infinite;
}
@keyframes bounce {
    50% { line-height: 175px; }
} 
```

这是一个工作演示：http: [//jsfiddle.net/joshnh/Cvjsu/](http://jsfiddle.net/joshnh/Cvjsu/)

# c# - 获取继承变量

> ID：11962891
> 
> 赞同：0
> 
> 时间：2012-08-15T01:11:33.587
> 
> 标签：c#, .net, inheritance, polymorphism

我对 C#.NET 还是比较陌生，所以我确信我缺少一些明显的东西，但这里是：我无法从特定类中获取一些变量。

有问题的类如下所示：

```
class AridPlanet : Arid
    {
        public const int area = 95;

    } 
```

如您所见，该类继承自以下类：

```
abstract class Arid : Astro
    {
        public const int metal = 2;
        public const int gas = 2;
        public const int crystals = 0;
        public const int fertility = 5;

    } 
```

它又继承自以下类：

```
abstract class Astro
    {
        public int metal;
        public int gas;
        public int crystals;
        public int fertility;
        public int area;

    } 
```

我尝试获取以下变量：

```
class Base
    {
        private int metal;
        private int gas;
        private int crystals;
        private int fertility;
        private int area;
        private List<Structure> structures = new List<Structure>();
        private int position;
        private Astro selectedAstro;

        public Base(Astro astro, int position)
        {
            this.selectedAstro = astro;
            this.metal = selectedAstro.metal;
            this.gas = selectedAstro.gas;
            this.crystals = selectedAstro.crystals;
            this.fertility = selectedAstro.fertility;
            this.area = selectedAstro.area;
            this.position = position;

        //Code ommited
    }
    } 
```

参数作为特定的astro 类型`astro`传递给`Base`构造函数，例如`AridMoon`.

当我运行代码查看`Base`变量被分配给什么时，我看到它们都被分配给 0。对我来说，这表明代码正在尝试从最顶层的超类中分配`AridPlanet`变量`Astro`。

但是，据我了解继承，编译器应该先查看指定的类，然后再转到超类。

对出了什么问题有任何想法吗？我确定这是我误解的简单事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:16:41.873

如果您引用*Astro astro*，您实际上将获得*Astro*中定义的常量。您必须将其转换为特定的子类才能获取该子类中定义的常量。

您可能正在寻找的是虚拟属性。

你可以定义

```
abstract class Base 
{
    abstract public int Metal { get; }
} 
```

然后您可以在子类中实现该抽象方法

```
public class AridPlanet : Base
{
    const int ARID_PLANET_METAL = 2;
    public override int Metal { get { return ARID_PLANET_METAL; } }
} 
```

我跳过了您的层次结构的中间级别，但希望它说明了这一点。中间类可以覆盖抽象定义。它们的子类可以选择提供额外的覆盖或接受来自中间类的覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:37:23.943

让我在这里用一个例子来说明你做了什么：

*   创建一个“汽车”类并定义汽车必须具有的一些属性
*   创建一个类“Sportscar”，扩展“Car”类并为属性赋值
*   使用“汽车”类的一个实例，奇怪为什么它不知道跑车。

看起来好像您正在寻找使用多态性。使用接口或抽象类（如 Eric 所示）作为确定每个派生类必须具有的信息和能力的基类。当您创建子类型的新实例时，您可以将其存储为接口的类型，并且对实例的所有调用都将委托给子类。重要的部分是，你调用哪个构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T02:47:06.000

我认为这是你应该做的：

```
class AridPlanet : Arid
{
    public AridPlanet()
    {
        area = 95;
    }
}

abstract class Arid : Astro
{
    public Arid()
    {
        metal = 2;
        gas = 2;
        crystals = 0;
        fertility = 5;
    }

} 
```

然后将**Astro**类字段访问修饰符更改为**受保护**并创建具有**公共访问权限的相应****只读属性**。

 ****编辑：**

```
abstract class Astro
{
    protected int metal;
    protected int gas;
    protected int crystals;
    protected int fertility;
    protected int area;

    public int Metal { get { return metal; } }
    public int Gas { get { return gas; } }
    public int Crystals { get { return crystals; } }
    public int Fertility { get { return fertility; } }
    public int Area { get { return area; } }
}

class BaseCalc
{
    private int metal;
    private int gas;
    private int crystals;
    private int fertility;
    private int area;
    //private List<Structure> structures = new List<Structure>();
    private int position;
    private Astro selectedAstro;

    public BaseCalc(Astro astro, int position)
    {
        this.selectedAstro = astro;
        this.metal = selectedAstro.Metal;
        this.gas = selectedAstro.Gas;
        this.crystals = selectedAstro.Crystals;
        this.fertility = selectedAstro.Fertility;
        this.area = selectedAstro.Area;
        this.position = position;

        //Code ommited
    }
} 
```**

# parallel-processing - 我将如何在 matlab parfor 循环中切片这个矩阵？

> ID：11962894
> 
> 赞同：1
> 
> 时间：2012-08-15T01:11:54.173
> 
> 标签：parallel-processing, matlab

我有一个以下 matlab 代码，我不知道如何对称为“数据”的矩阵进行切片。

简而言之，代码的作用是：

在每次迭代中，创建一个名为“newOrder”的重新排序，并使用重新排序的向量“y”和重新排序的矩阵“data”调用函数“train”。在这里，“重新排序”使用所有元素而不是它们的子集。循环运行速度快很重要，所以我担心这个警告。

```
w = []; data = sparse(double(X(:,selTrain)));

parfor ci = 1:length(classes)
    y = 2*(imageClass(selTrain)==ci)'-1;   
    newOrder = [find(y==1); find(y==-1)];
    this_svm = train(y(newOrder), data(:, newOrder), ' -s 3 -B 1 -c 10 -q', 'col');    
    w(:,ci) = this_svm.w';
end 
```

我没有收到错误，而是收到警告：在 parfor 循环中，变量数据已被索引但未切片。这可能会导致不必要的通信开销。

我需要为组合许多重新排序执行此操作。所以我花了很多时间绝望地尝试一堆东西。任何帮助或建议都会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:18:42.867

我假设您已经解决了这个问题；但是，为了完整起见，问题在于`neworder`用于索引数据的 与 parfor 循环索引`ci`以允许对数据进行切片的方式无关。此失败的直接原因`neworder`是矢量而不是标量。立即阻止 matlab 对数据进行切片。即使不是这种情况，当 matlab 无法将循环索引 ( `ci`) 与变量索引 ( `neworder`) 关联时，它也无法对数据进行切片。

# jquery - JQuery Mobile - 将事件处理程序分配给动态创建的按钮

> ID：11962895
> 
> 赞同：0
> 
> 时间：2012-08-15T01:12:18.483
> 
> 标签：jquery, mobile, button, jquery-mobile, event-handling

我从服务器返回一个 json 数组，然后循环遍历它并将按钮 (data-role="button") 添加到页面。我在每次迭代中调用 $("a[data-role='button']").button() 。

我的问题是每个按钮都需要调用相同的事件处理程序但具有不同的 id。如果我在 Java/GWT 中执行此操作，我会将 id 传递给每个按钮的事件处理程序的自定义实现的构造函数。

我将如何在 JQuery Mobile 中实现相同的目标？

下面的代码创建了两个按钮，但是当我单击它们时没有任何反应。

这是我的代码：

 `````
success: function(data) {
                $('#personPage div[data-role="content"]').empty();
                for (var i = 0;i < data.length;i++){
                    $('#personPage div[data-role="content"]').append('<a href="#" id="person_' + data[i].id + '" data-role="button"  data-id="person_' + data[i].id + '">' + data[i].name + '</a>');
                    $("a[data-role='button']").button();
                    $("#person_" + data[i].id).bind('click', function(event) {
                          alert('It WOrks');
                        });
                    });
                }
            } 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:02:30.820

添加按钮时（构建要附加的 html），还要添加一个 data-id 属性，其值为 JSON 数组中的 id。所以 html 标签最终看起来像这样：

```
<a data-role="button" data-id="1234">1234 Button</a> 
```

在 onclick 事件处理程序中获取这样的 id：

```
var id = $(this).data('id'); 
```

而已。

请参阅[http://api.jquery.com/data/](http://api.jquery.com/data/)以阅读有关数据属性的更多信息。``

# azure - Azure - 用户成本

> ID：11962896
> 
> 赞同：0
> 
> 时间：2012-08-15T01:12:24.013
> 
> 标签：azure

我正在尝试计算在 Azure 上托管时每位用户的成本。假设一个用户每月在网站上总共花费一小时。我正在尝试随着业务的扩展计算托管成本。如果有 10,000 个用户我想向其提供优质的服务速度，那么 Azure 的服务费用粗略估计是多少。

注意：我知道有很多变量，但我的预测只需要一个粗略的估计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:58:01.667

我怀疑这与这里的问题相同：http: [//social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/cd2c9d78-f01b-402a-8c3a-782e00dafeb9](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/cd2c9d78-f01b-402a-8c3a-782e00dafeb9)。我在那边回答...逐字复制：

> 您在问“字符串有多长？” 没有人可以用你提供的信息来回答。
> 
> 例如，如果您向每个用户提供静态缓存内容，那么一台服务器足以为 1000 个用户提供服务。但是，如果当每个用户访问该页面时，您将两个非常大的素数的乘积分解，那么数据中心就不够了。
> 
> 试图回答这个不可能的问题：1000 个用户每个月在一个网站上花费一个小时，除了一个免费的网站（或云服务中的两个额外的小型 Web 角色实例）之外，不太可能需要任何东西，所以我会如果您的计算成本超过 100 美元，您会感到惊讶。
> 
> 带宽是另一个潜在的重大成本……同样，如果每个用户看一些文本而不是每个用户看一个小时的高清视频，这个成本可能会有很多数量级的变化。没有人能为你猜到。

# amqp - Azure AppFabric 真的支持 AMQP 1.0 吗？

> ID：11962897
> 
> 赞同：0
> 
> 时间：2012-08-15T01:12:33.623
> 
> 标签：amqp, azure-appfabric, azureservicebus

我观看了Microsoft 负责 AMQP[的 David Ingham 的 AMQP 1.0 演示，内容是关于 Azure AppFabric 对云中 AMQP 消息传递的支持。](http://www.infoq.com/presentations/AMQP-and-Windows-Azure-Service-Bus)David 说 AppFabric 将支持 AMQP 用于消息传递模式*Queue*和*Pub/Sub*。

[然而，在http://www.windowsazure.com/en-us/develop/java/how-to-guides/service-bus-queues/](http://www.windowsazure.com/en-us/develop/java/how-to-guides/service-bus-queues/)等官方网站上查看文档时（尤其是查看**非 .net**的内容时，根据大卫的谈话**应该通过 AMQP 连接，而**不是 MS 的专有和**基于 SOAP 的 SBMP**）没有任何地方提到 AMQP。

此外，在检查 David 用于他的演示的 C# 源代码时（参见[他的幻灯片](http://daveingham.typepad.com/publications/2011.10.12-AMQPandWindowsAzureServiceBus.pdf)上的第 22 页），他使用了一个`AmqpMessagingFactory`无处可搜索的 —— 除了上述幻灯片。

顺便说一句，该演示文稿于 2012 年 3 月 15 日在 infoq.com 上发布，而不是最近，但该演讲是[在 2011 年 10 月录制的](http://daveingham.typepad.com/blog/2012/04/amqp-and-windows-azure-service-bus-presentation-on-infoq.html)，大约在 AMQP 1.0 规范完成时。

那么**，AMQP 1.0 支持是否在此过程中被抛弃**（`SBMP`也许是支持）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:28:08.613

截至本周，Azure 服务总线支持 AMQP 1.0。如需更多信息，请访问：[https](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp-overview/) ://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp-overview/ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:55:30.597

它说“服务总线队列提供简单的先进先出保证消息传递，并支持一系列标准协议（REST、**AMQP**、WS*）和 API，以将消息放入/取出队列。”

在这里： http: [//www.windowsazure.com/en-us/home/features/messaging/](http://www.windowsazure.com/en-us/home/features/messaging/)

# java - 让 Java 转到 URL 的问题

> ID：11962898
> 
> 赞同：-2
> 
> 时间：2012-08-15T01:12:35.847
> 
> 标签：java, android, arduino

我在获取应用程序中的这个按钮时遇到问题，我只是访问链接，以便我的 Arduino 可以看到有人访问了链接并打开了[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)。我该如何解决这个问题？

```
if (v.getId() == R.id.power) {
    //new HttpPost("192.168.0.107/digitalWrite/8/1");
    new DefaultHttpClient();
    new HttpPost("http://192.168.0.107/digitalWrite/8/1");
    Toast.makeText(this, "Power", Toast.LENGTH_LONG)
    .show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:21:56.937

您可以使用 Android 附带的 Apache HTTP 客户端。

```
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = httpclient.execute(new HttpGet(URL)); 
```

还要确保在清单文件中添加了以下权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# django - 我可以在不访问 Django 中的数据库的情况下获取相关对象的 ID

> ID：11962899
> 
> 赞同：2
> 
> 时间：2012-08-15T01:12:43.783
> 
> 标签：django

如果我有一个对象的实例，我可以在不需要访问数据库的情况下获取相关对象的 ID 吗？该值必须存储在某处。

例如

```
book = Book.objects.get(id=1)
book.author.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T01:15:13.727

Django 通过使用字段名称并以 _id 为后缀自动为对象的 id 创建一个字段，例如：

```
book.author_id == book.author.id 
```

在 django 的文档中没有很好的记录，但有两篇关于此事的博客文章供参考：

[http://www.yilmazhuseyin.com/blog/dev/django-orm-performance-tips-part-2/](http://www.yilmazhuseyin.com/blog/dev/django-orm-performance-tips-part-2/) [http://thebuild.com/blog/2010/12/22/getting-the-id-of- django 中的相关对象/](http://thebuild.com/blog/2010/12/22/getting-the-id-of-related-objects-in-django/)

# javascript - 表格折叠js

> ID：11962900
> 
> 赞同：0
> 
> 时间：2012-08-15T01:12:51.653
> 
> 标签：javascript, tabs, twitter-bootstrap

我希望我的表默认折叠在另一个表中。

在下面的示例中，表格是折叠的，但默认情况下，页面同时显示表格，我希望显示一页和隐藏的一页，单击向下的图标可以看到。

希望解释清楚

谢谢

情况就是这样：http: [//jsfiddle.net/gianlucaguarini/hAv7P/](http://jsfiddle.net/gianlucaguarini/hAv7P/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:20:40.753

```
$('.accordion').on('show hide', function(e){
    $(this).find('.accordion-toggle i').toggleClass('icon-arrow-down icon-arrow-up', 200);
});

$('.accordion-body').collapse();​  // note the class 
```

[http://jsfiddle.net/hAv7P/5/](http://jsfiddle.net/hAv7P/5/)

# php - PHP 到 Ruby：解析日期

> ID：11962901
> 
> 赞同：0
> 
> 时间：2012-08-15T01:13:28.210
> 
> 标签：php, ruby, date

因此，在 PHP 中，我有一些代码可以将日、月和年提取为整数，如下所示：

```
// Grab the Date
    $date = date("mdy");
    $day = (int) substr($date, 2, 2);
    $month = (int) substr($date, 0, 2);
    $yr = (int) substr($date, 4); 
```

我想在 Ruby 中做同样的事情。我想我已经找到了答案

```
# Grab the Date
    now = Date.new(Time.now).to_date
    date = Date.parse(now)
    day = date.mday
    month = date.mon
    yr = date.year 
```

我已经尝试过这个主题的变化，每次它都失败了

> 2012 年 8 月 14 日星期二 01:16:00 -0600:Time (NoMethodError) 调用了私有方法“to_date”

我确信答案在网络上的某个地方，但我没有向 Google 提出正确的问题，因为我还没有找到它。我只是断断续续地用 Ruby 编写代码几个月，我想这很简单。那么我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:37:30.137

您可以使用日期操作做很多事情，请在[**文档**](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)中查找更多信息！但请不要使用带重音的 ruby​​ :)

```
require 'date'

Date.new(2001,2,3).year
#=> 2001

Date.new(2001,2,3).yday
#=> 34 Returns the day of the year (1-366)

Date.today.day
#=> 14

date = Date.new(2008, 12, 22)
date.day
#=> 22
date.month
#=> 12
date.year
#=> 2008

Date.new(2001,2,3).strftime '%Y'
#=> "2001" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:30:06.737

```
require 'date'    
def date_to_array date = Date.today
  [date.year, date.mon, date.mday]
end 
```

或者，如果您在应用程序中到处使用它，请扩展 Date：

```
require 'date'
class Date   
  def to_a
    [self.year, self.mon, self.mday]
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T01:19:01.907

我想你只是想要：

```
now = Time.now

day = now.mday

month = now.mon

yr = now.year 
```

顺便说一句，您可以`substr()`在 PHP 中更干净地执行此操作，而无需操作：

```
$date = new DateTime;

$day = (int) $date->format( 'j' );

$month = (int) $date->format( 'n' );

$year = (int) $date->format( 'Y' ); 
```

# python - 如何复制 email.message.Message 对象？

> ID：11962902
> 
> 赞同：1
> 
> 时间：2012-08-15T01:13:29.847
> 
> 标签：python, email

我有一封通过 Python`email.parser`模块获得的电子邮件：

```
parser = email.parser.Parser()
msg1 = parser.parse(sys.stdin) 
```

我想创建这个对象的副本，但我不确定如何最好地去做。我可以使用`copy`模块...

```
msg2 = copy.deepcopy(msg1) 
```

...但鉴于 MIME 消息可能包含一些任意的部分树，我不确定这是否是正确的解决方案。我可以序列化并重新解析消息...

```
msg2 = parser.parse(msg1.as_string()) 
```

...但是文档表明该`as_string`方法可能并不总是正确的。我可以创建一个`StringIO`对象并使用`generator`...

```
buf = String()
g = email.generator.Generator(buf)
g.flatten(msg1)
msg2 = parser.parse(buf.getvalue()) 
```

...但是复制已经解析过一次的东西似乎需要做很多工作。

使用`copy`模块似乎是最简单的解决方案，但我对`copy`模块不熟悉。我在做正确的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:34:23.417

由于它是一条 MIME 消息，您可以假设无论属性如何嵌套，都会有一个结束。如果是这样，deepcopy 应该对消息的每个属性进行递归复制，因此您最终会得到正确的结果来执行 copy.deepcopy。

# asp.net - Internet Explorer 中的 KendoUI 网格错误

> ID：11962905
> 
> 赞同：0
> 
> 时间：2012-08-15T01:13:45.780
> 
> 标签：asp.net, asp.net-mvc, html, telerik, kendo-ui

我收到一个奇怪的错误，它只发生在我的 Internet Explorer (v9.0.8) 中的 Web 应用程序中。当我尝试在 div 上多次实例化网格时会发生这种情况。

（我知道这是一个奇怪的情况，但我这样做是有原因的，并且通过多次设置网格时发生错误来简化问题更容易）

我在 jfiddle [here](http://jsfiddle.net/gwHkv/25/)中重现了这个问题。您将看到网格开始加载良好。但是，当您单击“单击我”按钮时，网格会再次设置，如果您检查控制台窗口，则会显示错误消息“SCRIPT65535：无效调用对象 kendo.all.min.js，第 8 行字符 73742”。

它与数据源有关，因为如果您尝试这个我从网格中删除数据源的[版本](http://jsfiddle.net/gwHkv/26/)，它不再出错。

任何人都可以就为什么会发生此错误提供任何指导吗？

谢谢

更多信息.. 我执行此任务的原因是因为它是一个单页应用程序。因此，当我移动到另一个页面时，我正在动态地对屏幕上的内容进行分页。当我返回列表页面时，我必须调用设置列表来刷新网格。我添加了另一个 jfiddle 在[这里](http://jsfiddle.net/gwHkv/30/)展示这个例子。当您单击“单击此处刷新 HTML”时，它会重置 div 中的 html，然后设置网格。如果您查看 IE 的控制台，您会看到 SCRIPT5022: DOM Exception: NOT_FOUND_ERR (8) 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:24:23.830

所以我只能猜测为什么你会收到这个错误而不看源代码，但是你可以通过在重新插入之前删除网格来轻松绕过这个问题。我在您的方法内的#grid 选择器上使用了jQuery remove 方法`TestRefreshHtml()`，一切正常。

```
function TestRefreshHtml()
{
    alert('in refresh');

    //Remove the grid before initializing a new one
    $('#grid').remove();

 $('#content').html('<div id="grid"/><button id="buttonClickTest">Click Me</Button><button id="buttonClickTest2">Click Me To Refresh HTML</Button>');

SetupGrid();
} 
```

我认为这个问题可能与多次使用 id 有关，但我并不肯定。我在您的第二把小提琴中测试了此修复程序，并且网格在 IE 中加载良好，没有错误。

# java - MapReduce 和从外部源下载文件

> ID：11962906
> 
> 赞同：1
> 
> 时间：2012-08-15T01:13:57.250
> 
> 标签：java, http, ftp, hadoop, mapreduce

我有一个项目，要求以分布式方式从外部源下载文件。我们已经在 Hadoop 上进行了大量投资，并希望利用 MapReduce——但更多的是作为分布式任务而不是 ETL。

1）以前有人做过吗？

2）应该只有一个没有Reducer的Mapper吗？

3) 将 FTP/HTTP 连接的抽象实现传递给 Mapper 的最佳方法是什么？-- 需要明确的是，我想要一种很好的方法来单元测试而不进行集成测试，因此需要一种模拟 FTP/HTTP 的方法。

4) MapReduce 是这类事情的最佳方法吗？——我们在滥用 MapReduce 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:45:11.077

我认为你应该看看Storm。这是一个可扩展的框架，对于从许多不同来源收集数据非常有用。这真的是你想要做的。处理仍然可以使用 map reduce 来完成，但对于实际的集合，您应该使用 Storm 之类的框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:25:28.163

这“听起来”与 Nutch 所做的类似（尽管除了该声明之外，我对 Nutch 不太熟悉）。

一些观察点：

*   如果您有多个由同一服务器托管的 URL，您实际上可能会受益于按主机名进行分区，然后在 Reducer 中进行拉取（取决于您从中拉取的 URL 数量）
*   如果内容是“可缓存的”，并且您将一遍又一遍地从相同的 URL 中提取，那么您“可能”会受益于在您的 hadoop 集群和互联网之间放置一个缓存/代理服务器（您的公司和 ISP 可能/应该已经这样做）。尽管如果您访问的是唯一的 URL 或内容是动态的，这实际上会阻碍您，因为您在缓存/代理服务器中有一个瓶颈

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T03:10:53.923

我认为在这种情况下，您的互联网连接很容易成为瓶颈，但我相信可以做到。

1.  我还没有做这件事，但不得不从我的 Mapper 进行 Web 服务调用，以从 3rd 方 API 获取一些元数据以进行进一步处理。第 3 方 Web 服务很快成为瓶颈，拖慢了一切。
2.  是的，因为在这种情况下没有什么可以减少的（我假设您只想将下载的文件保存在某处）。
3.  我会将 FTP/HTTP URL 保存在 HDFS 中，并让您的 Mapper 从您的 HDFS 中读取 URL。
4.  我高度怀疑 MapReduce 是处理这类事情的最佳方法。就像我已经说过的那样，我认为您的互联网连接很容易成为瓶颈，并且您将无法大大扩展您的 MR 程序。一旦下载（并保存在 HDFS 中），如果您想使用 MapReduce 处理数据，那将是另一回事。是的，在这种情况下，我会说你在滥用 MR。

# c# - 在 asp.net 中异步 ajax 更新后加载 Jquery

> ID：11962908
> 
> 赞同：0
> 
> 时间：2012-08-15T01:14:53.527
> 
> 标签：c#, javascript, jquery, asp.net

我有一个 jquery 重的 ASP.net 页面。

在此页面上，我在更新面板中有一个网格视图，因此我可以进行异步更新。

```
<asp:GridView ID="gvMail" runat="server" GridLines="None" 
AutoGenerateColumns="false" Width="100%" OnRowDataBound="mail_RowDataBound"
CssClass="gridview" DataKeyNames="id">

<HeaderStyle HorizontalAlign="Left" />
<RowStyle ForeColor="#0072BC" HorizontalAlign="Left" CssClass="draggable" />

</asp:GridView>

</ContentTemplate>
</asp:UpdatePanel>

<!-- Hidden Link button for Async call back -->
<asp:UpdatePanel ID="updatePanel2" runat="server">
<ContentTemplate>
<asp:LinkButton ID="btnLoadData" onclick="btnLoadData_Click" runat="server" 
 Text="Fill GridView" CssClass="none"></asp:LinkButton> <!-- hidden-->

<a href="javascript: AsyncUpdateGridView()">A sync update</a>
<!-- testing purposes only-->

</ContentTemplate>
</asp:UpdatePanel> 
```

因此，通过这个小技巧，我单击 hte 链接按钮来更新工作正常的 gridview。最终，仅调用隐藏链接按钮的 _dopostback 方法的 AsyncUpdateGridView() 将在 Javascript 中。

我遇到的问题是我的 GridView 的列是 Jquery DatePickers 和 Jquery 花式下拉框。他们加载了这个 javascript 调用：

```
 function OnLoadPage() {
            $(".jqueryselector").selectbox({
                effect: "fade"
            });

            $(".jquerydatepicker").datepicker({ dateFormat: 'dd-mm-yy' });
        }

        $(document).ready(function () {
            OnLoadPage();
        } 
```

我制作 OnLoadPage() 函数的原因是因为我在更新后执行了 _DoPostBack 调用后尝试调用它。

但是，这不起作用。所以现在当页面开始加载时，所有的 jquery datepicker、下拉框和其他我在 GridView 中工作的花哨的东西。但是在异步回调之后，它会重新加载所有默认的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:39:24.507

`$(document).ready`ajax 面板调用完成并更新 html 块后不执行。为此，您需要注册 asp.net ajax 提供的事件。您可以使用`begin_request`and`end_request`用于在 ajax 调用之前和之后执行一些 javascript，如果您想在 ajax 调用完成后调用 javascript 函数，您需要使用 end_request 并且在 ajax 调用之前您需要 begin_request，更多关于它们的信息请[**点击此处**](http://msdn.microsoft.com/en-us/library/bb397432.aspx)

```
 function OnLoadPage() {
        $(".jqueryselector").selectbox({
            effect: "fade"
        });

        $(".jquerydatepicker").datepicker({ dateFormat: 'dd-mm-yy' });
    }

Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);

Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

function BeginRequestHandler(sender, args)
{

}

function EndRequestHandler(sender, args)
{
     OnLoadPage();
} 
```

# objective-c - 使用 allocWithZone 创建单例：

> ID：11962913
> 
> 赞同：6
> 
> 时间：2012-08-15T01:16:10.520
> 
> 标签：objective-c, singleton, alloc

`BNRItemStore`是一个单身人士，我对为什么`super allocWithZone:`必须调用而不是普通的 old感到困惑`super alloc`。然后覆盖`alloc`而不是`allocWithZone`.

```
#import "BNRItemStore.h"

@implementation BNRItemStore

+(BNRItemStore *)sharedStore {
    static BNRItemStore *sharedStore = nil;

    if (!sharedStore)
        sharedStore = [[super allocWithZone: nil] init];

    return sharedStore;
}

+(id)allocWithZone:(NSZone *)zone {
    return [self sharedStore];
}

@end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T01:20:13.437

`[super alloc]`将调用 to `allocWithZone:`，您已将其覆盖以执行其他操作。为了真正获得超类的实现`allocWithZone:`（这是您想要的）而不是覆盖的版本，您必须`allocWithZone:`显式发送。

`super`关键字表示与 ; 相同的对象`self`。它只是告诉方法分派机制开始在超类而不是当前类中寻找相应的方法。

因此，`[super alloc]`将上升到超类，并在那里得到实现，它看起来像：

```
+ (id) alloc
{
    return [self allocWithZone:NULL];
} 
```

在这里，`self`仍然代表您的自定义类，因此，您的覆盖`allocWithZone:`运行，这将使您的程序进入无限循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-11T07:39:34.433

来自苹果的[文档](https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/allocWithZone%3a)：

> 这种方法的存在是出于历史原因；Objective-C 不再使用内存区域。

# c++ - 局部静态变量被实例化多次，为什么？

> ID：11962918
> 
> 赞同：7
> 
> 时间：2012-08-15T01:16:33.113
> 
> 标签：c++, c++11

我对从这段代码中得到的结果感到困惑。在一个 dll 中，当初始化静态变量时，计数器会递增。然后当 main 执行时，我读取了这个计数器，但我得到的是 0 而不是 1。有人可以向我解释一下吗？

在我的动态库项目中：

```
// Header file
class Foo {
   int i_ = 0;

   Foo(const Foo&) = delete;
   Foo& operator= (Foo) = delete;

   Foo()
   {
   }

public:
   void inc()
   {
      ++i_;
   }

   int geti()
   {
      return i_;
   }

   static Foo& get()
   {
      static Foo instance_;
      return instance_;
   }

   Foo( Foo&&) = default;
   Foo& operator= (Foo&&) = default;
};

int initialize()
{
   Foo::get().inc();
   return 10;
}

class Bar
{
   static int b_;

};

// cpp file
#include "ClassLocalStatic.h"

int Bar::b_ = initialize(); 
```

在我的应用项目中

```
// main.cpp
#include <iostream>

#include "ClassLocalstatic.h"

int main(int argc, const char * argv[])
{
   std::cout << Foo::get().geti();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T10:30:58.260

C++ 的规则规定内联函数定义将与静态局部变量一起正常工作。也就是说，如果你内联函数定义，任何局部静态变量都将引用同一个变量。

***但是****，C++没有*定义一件事：DLL。

C++ 规范完全不知道 DLL；它不知道如何处理它们。C++ 是根据*静态*链接定义的，而不是动态链接。

因此，这意味着该规范在处理 DLL 边界时*不再适用。*这就是你的问题所在。

虽然 C++ 要求具有局部静态变量的内联函数仍然可以工作，但 C++ 不了解 DLL 意味着一切都取决于*编译器*决定做什么。

对于跨 DLL 边界拆分的内联函数不让局部静态变量按预期工作，这是完全合法的编译器行为。这是一个异常情况，我严重怀疑任何编译器开发人员都花时间为这种可能性进行编码。

对于编译器来说，最合理的做法就是在 DLL 头文件中声明一个 extern 全局变量时所做的事情：每个 DLL 和可执行文件都有一个*单独*的。这就是为什么你需要特殊的语法来说明一个定义应该由这个可执行文件/DLL ( `__declspec(dllexport)`) 定义，什么将来自其他可执行文件/DLL ( `__declspec(dllimport)`)。

您必须*始终*小心跨越 DLL 边界的内容。通常，不要像这样跨 DLL 边界内联内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T01:39:49.077

可执行文件和 DLL 都将获得自己的副本`Foo::get()`，每个副本都有自己的静态变量副本。因为它们在单独的链接器输出中，所以链接器无法像往常一样合并它们。

要进一步扩展：

C++ 规范允许在多个翻译单元中定义内联函数，只要它们都具有相同的主体；将函数放在头文件中是完全可以的，因为它确保每个副本都是相同的。请参阅[https://stackoverflow.com/a/4193698/5987](https://stackoverflow.com/a/4193698/5987)。如果内联函数中有静态变量，编译器和链接器需要一起工作以确保它们之间只使用一个副本。我不确定确切的机制，但没关系，标准需要它。不幸的是，链接器在生成输出可执行文件或 DLL 后停止访问，并且无法判断该函数在两个地方都存在。

解决方法是将正文`Foo::get()`移出标头并将其放入仅在 DLL 中的源文件中。

# html - 如何去除表格边框的阴影？

> ID：11962922
> 
> 赞同：3
> 
> 时间：2012-08-15T01:16:41.413
> 
> 标签：html, html-table

问题图片：

![问题图片](../Images/c9b0089a170009fb58b392f5dadfbb63.png)

*   阴影线破坏了地图。

位置：[http ://etrian.wikia.com/wiki/Etrian_Odyssey_Wiki:Sandbox/test3/A1](http://etrian.wikia.com/wiki/Etrian_Odyssey_Wiki:Sandbox/test3/A1)

我希望为 wiki 制作可编辑的游戏关卡地图。由于游戏有一个游戏内的地图绘制工具，我们决定使用与该工具相同的样式（如图所示）。瓷砖的内部尺寸为 16x16 大。在图块上，您可以放置​​图标（如图所示，3 个三叶草盒是宝物）。

然而，有一件事困扰着我——我无法从我的桌子上消除这些该死的黑线！有什么办法可以消除这些阴影？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:33:03.507

我一直在拔头发，直到wiki的管理员突然捂脸，发现wiki的CSS设置覆盖了表格的边框样式！

解决方案：

```
border-style:solid 
```

# java - Memcached 性能下降，待缓存值大小较小

> ID：11962925
> 
> 赞同：1
> 
> 时间：2012-08-15T01:17:02.433
> 
> 标签：java, memcached, spymemcached

我刚开始使用memcached。我们通过睡衣代理服务器使用 spymemcached java 客户端（全部使用默认设置并分配 1024 mb 内存）。将程序设置为访问 memcached 非常简单明了，但我有一个观察结果：

当缓存值大小下降到某个点（在我的情况下：大约 1450 字节）时，性能会急剧下降（每次检索从 4 毫秒到 200 毫秒）。

这是否意味着我要缓存的值必须高于某些大小？我怎么能确定这样的尺寸？提前致谢！

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:20:34.443

Nagle 的算法（TCP 将小数据包的发送延迟一段时间）会是问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:53:22.813

虽然我不太了解 memcached 内部结构，但在我看来，它与内存分配管理有关。Memcached 维护不同块大小的内存池。[http://www.mikeperham.com/2009/06/22/slabs-pages-chunks-and-memcached/](http://www.mikeperham.com/2009/06/22/slabs-pages-chunks-and-memcached/)。因此，大多数情况下您都面临着内部碎片，而 memcached 必须查看两个块来查找您的数据。

# linux - 同步同步目录中的文件而不是文件夹

> ID：11962928
> 
> 赞同：1
> 
> 时间：2012-08-15T01:17:43.987
> 
> 标签：linux, unison

在给定同步路径 /home/user/mydata 的情况下，我如何告诉 unison 仅同步

```
/home/user/mydata/file.txt
/home/user/mydata/data.txt
but not
/home/user/mydata/subfolder 
```

我已经简化了这个例子的问题，但是有没有办法告诉它只同步特定路径的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:39:32.880

在该目录的个人资料中，您可以执行类似的操作

```
ignore = Path subfolder 
```

有关更多示例，请查看[此处的示例](http://www.ict.griffith.edu.au/anthony/info/apps/unison.hints)

# javascript - Facebook JavaScript API 登录：我在自己的应用程序的用户记录中存储什么？

> ID：11962929
> 
> 赞同：1
> 
> 时间：2012-08-15T01:18:13.107
> 
> 标签：javascript, security, login, oauth, facebook-javascript-sdk

我的任务是在我正在使用他们的 JavaScript API 开发的网站上集成 Facebook 登录。

我可以很好地从 Facebook 获取身份验证响应。我只是不知道该怎么办。

我需要做的是在注册期间：

1.  允许用户使用 Facebook 登录名进行注册。
2.  在我自己的数据库中存储他们帐户中的*某些*内容，以便以后通过 Facebook 登录时查看。

然后当返回站点时：

1.  确定用户已登录 Facebook 并获取 FB 访问令牌。
2.  安全地通知我的 API 用户已登录 Facebook，查找他们的帐户，并为我自己的 API 获取令牌。

我只是存储 Facebook ID 并查找它，但我意识到这很容易被欺骗。

这样做最安全的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:09:02.377

> 这样做最安全的方法是什么？

恕我直言：在服务器端做。

如果您将`signed_request`通过 JS SDK 进行客户端登录时获得的值传递到您的服务器，您可以在那里对其进行解码*和验证*以检查它的真实性——因为它是使用您的应用程序密钥签名的，没有其他人可以你和 Facebook（应该）知道。

在客户端，您无法获得那种级别的安全性，因为没有您的应用程序机密就无法验证请求，但这与客户端脚本无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:14:45.977

首先，您应该阅读有关[Facebook 身份验证的 Facebook 文档](https://developers.facebook.com/docs/guides/web/#login)。还有[JavaScript SDK 文档](https://developers.facebook.com/docs/reference/javascript/)通常流程是：

1) 通过调用 FB.getLoginStatus() 检查他们是否已经注册。如果他们已经跳转到第 4 步 2) 用户在您的网站上看到使用 Facebook Javascript 登录按钮 3) 用户点击该按钮。他们被发送到 Facebook 以授权您的应用访问他们的帐户 4) 使用 Open Graph 将控制权返回给您 5) 您的应用可以轻松地进行任何需要做的事情

确保您阅读了[Facebook 权限](https://developers.facebook.com/docs/authentication/permissions/)，这样您就知道要请求什么权限。如果您需要请求额外的权限，那么您需要再次将整个授权过程发送给用户。

# validation - Yii“必需”验证失败：$model->attributes 返回正确的数据，但 $model->requiredAttribute 为空？

> ID：11962930
> 
> 赞同：2
> 
> 时间：2012-08-15T01:18:54.617
> 
> 标签：validation, activerecord, yii

我有一个扩展 CActiveRecord 的模型，它具有以下`rules()`方法：

```
/**
 * @return array validation rules for model attributes.
 */
public function rules()
{
    return array(
        array('name, locationId', 'required'),
        array('locationId', 'numerical', 'integerOnly'=>true),
        array('name', 'length', 'max'=>1024),
        array('name', 'safe'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, name, description, locationId', 'safe', 'on'=>'search'),
    );
} 
```

这是`actionCreate()`相应控制器中的方法：

```
public function actionCreate()
{
    $model = new Destination;

    if ( isset($_POST['Destination']) )
    {
      $model->attributes = $_POST['Destination'];

      // logging statement!
      Yii::log("Name: {$model->name}\nLocationID: {$model->locationId}\nAll attribs:\n".CVarDumper::dumpAsString($model->attributes), 'warning', 'application.controllers.DestinationController.actionCreate');

      if ( $model->save() )
        $this->redirect(array('view', 'id'=>$model->id));
    }

    $this->render( 'create', array (
        'model' => $model,
    ));
} 
```

不幸的是，每当我尝试使用此操作创建新记录时，我都会收到不能为空的错误，即使它们已在表单中设置`name`。`locationId`上面的日志记录语句的输出`actionCreate()`如下所示：

```
2012/08/14 18:04:51 [warning]     [application.controllers.DestinationController.actionCreate] Name:
LocationID:
All attribs:
array
(
    'name' => 'Test Name'
    'description' => 'Test Description'
    'locationId' => '93'
    'contactId' => ''
    'accessId' => ''
    'fullDistance' => ''
) 
```

如您所见，转储`$model->attributes`显示正确的数据，但尝试获取单个属性（例如调用`$model->name`或`$model->locationId`）不会返回任何内容。我通过 , 等调用跟踪了这一点`save()`，`validate()`看起来这导致`required`规则`name`和`locationId`失败。

有任何想法吗？

**编辑：附加日志信息**

```
 2012/08/15 16:58:03 [info] [application] Model:
Destination#1
(
    [CActiveRecord:_md] => CActiveRecordMetaData#2
    (
        [tableSchema] => CMysqlTableSchema#3
        (
            [schemaName] => null
            [name] => 'destination'
            [rawName] => '`destination`'
            [primaryKey] => 'id'
            [sequenceName] => ''
            [foreignKeys] => array
            (
                'accessId' => array
                (
                    '0' => 'access'
                    '1' => 'id'
                )
                'contactId' => array
                (
                    '0' => 'contact'
                    '1' => 'id'
                )
                'locationId' => array
                (
                    '0' => 'location'
                    '1' => 'id'
                )
            )
            [columns] => array
            (
                'id' => CMysqlColumnSchema#4
                (
                    [name] => 'id'
                    [rawName] => '`id`'
                    [allowNull] => false
                    [dbType] => 'int(11)'
                    [type] => 'integer'
                    [defaultValue] => null
                    [size] => 11
                    [precision] => 11
                    [scale] => null
                    [isPrimaryKey] => true
                    [isForeignKey] => false
                    [autoIncrement] => true
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
                'name' => CMysqlColumnSchema#5
                (
                    [name] => 'name'
                    [rawName] => '`name`'
                    [allowNull] => false
                    [dbType] => 'varchar(1024)'
                    [type] => 'string'
                    [defaultValue] => null
                    [size] => 1024
                    [precision] => 1024
                    [scale] => null
                    [isPrimaryKey] => false
                    [isForeignKey] => false
                    [autoIncrement] => false
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
                'description' => CMysqlColumnSchema#6
                (
                    [name] => 'description'
                    [rawName] => '`description`'
                    [allowNull] => true
                    [dbType] => 'text'
                    [type] => 'string'
                    [defaultValue] => null
                    [size] => null
                    [precision] => null
                    [scale] => null
                    [isPrimaryKey] => false
                    [isForeignKey] => false
                    [autoIncrement] => false
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
                'locationId' => CMysqlColumnSchema#7
                (
                    [name] => 'locationId'
                    [rawName] => '`locationId`'
                    [allowNull] => false
                    [dbType] => 'int(11)'
                    [type] => 'integer'
                    [defaultValue] => null
                    [size] => 11
                    [precision] => 11
                    [scale] => null
                    [isPrimaryKey] => false
                    [isForeignKey] => true
                    [autoIncrement] => false
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
                'contactId' => CMysqlColumnSchema#8
                (
                    [name] => 'contactId'
                    [rawName] => '`contactId`'
                    [allowNull] => true
                    [dbType] => 'int(11)'
                    [type] => 'integer'
                    [defaultValue] => null
                    [size] => 11
                    [precision] => 11
                    [scale] => null
                    [isPrimaryKey] => false
                    [isForeignKey] => true
                    [autoIncrement] => false
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
                'accessId' => CMysqlColumnSchema#9
                (
                    [name] => 'accessId'
                    [rawName] => '`accessId`'
                    [allowNull] => true
                    [dbType] => 'int(11)'
                    [type] => 'integer'
                    [defaultValue] => null
                    [size] => 11
                    [precision] => 11
                    [scale] => null
                    [isPrimaryKey] => false
                    [isForeignKey] => true
                    [autoIncrement] => false
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
                'fullDistance' => CMysqlColumnSchema#10
                (
                    [name] => 'fullDistance'
                    [rawName] => '`fullDistance`'
                    [allowNull] => true
                    [dbType] => 'int(11)'
                    [type] => 'integer'
                    [defaultValue] => null
                    [size] => 11
                    [precision] => 11
                    [scale] => null
                    [isPrimaryKey] => false
                    [isForeignKey] => false
                    [autoIncrement] => false
                    [CComponent:_e] => null
                    [CComponent:_m] => null
                )
            )
            [CComponent:_e] => null
            [CComponent:_m] => null
        )
        [columns] => array
        (
            'id' => CMysqlColumnSchema#4(...)
            'name' => CMysqlColumnSchema#5(...)
            'description' => CMysqlColumnSchema#6(...)
            'locationId' => CMysqlColumnSchema#7(...)
            'contactId' => CMysqlColumnSchema#8(...)
            'accessId' => CMysqlColumnSchema#9(...)
            'fullDistance' => CMysqlColumnSchema#10(...)
        )
        [relations] => array
        (
            'location' => CBelongsToRelation#11
            (
                [joinType] => 'LEFT OUTER JOIN'
                [on] => ''
                [alias] => null
                [with] => array()
                [together] => null
                [scopes] => null
                [name] => 'location'
                [className] => 'Location'
                [foreignKey] => 'locationId'
                [select] => '*'
                [condition] => ''
                [params] => array()
                [group] => ''
                [join] => ''
                [having] => ''
                [order] => ''
                [CComponent:_e] => null
                [CComponent:_m] => null
            )
            'activities' => CManyManyRelation#12
            (
                [limit] => -1
                [offset] => -1
                [index] => null
                [through] => null
                [joinType] => 'LEFT OUTER JOIN'
                [on] => ''
                [alias] => null
                [with] => array()
                [together] => null
                [scopes] => null
                [name] => 'activities'
                [className] => 'Activity'
                [foreignKey] => 'destinationHasActivity(destinationId, activityId)'
                [select] => '*'
                [condition] => ''
                [params] => array()
                [group] => ''
                [join] => ''
                [having] => ''
                [order] => ''
                [CComponent:_e] => null
                [CComponent:_m] => null
            )
            'attributes' => CManyManyRelation#13
            (
                [limit] => -1
                [offset] => -1
                [index] => null
                [through] => null
                [joinType] => 'LEFT OUTER JOIN'
                [on] => ''
                [alias] => null
                [with] => array()
                [together] => null
                [scopes] => null
                [name] => 'attributes'
                [className] => 'Attribute'
                [foreignKey] => 'destinationHasAttribute(destinationId, attributeId)'
                [select] => '*'
                [condition] => ''
                [params] => array()
                [group] => ''
                [join] => ''
                [having] => ''
                [order] => ''
                [CComponent:_e] => null
                [CComponent:_m] => null
            )
            'surfaces' => CManyManyRelation#14
            (
                [limit] => -1
                [offset] => -1
                [index] => null
                [through] => null
                [joinType] => 'LEFT OUTER JOIN'
                [on] => ''
                [alias] => null
                [with] => array()
                [together] => null
                [scopes] => null
                [name] => 'surfaces'
                [className] => 'Surface'
                [foreignKey] => 'destinationHasSurface(destinationId, surfaceId)'
                [select] => '*'
                [condition] => ''
                [params] => array()
                [group] => ''
                [join] => ''
                [having] => ''
                [order] => ''
                [CComponent:_e] => null
                [CComponent:_m] => null
            )
            'images' => CManyManyRelation#15
            (
                [limit] => -1
                [offset] => -1
                [index] => null
                [through] => null
                [joinType] => 'LEFT OUTER JOIN'
                [on] => ''
                [alias] => null
                [with] => array()
                [together] => null
                [scopes] => null
                [name] => 'images'
                [className] => 'Image'
                [foreignKey] => 'destinationHasImage(destinationId, imageId)'
                [select] => '*'
                [condition] => ''
                [params] => array()
                [group] => ''
                [join] => ''
                [having] => ''
                [order] => ''
                [CComponent:_e] => null
                [CComponent:_m] => null
            )
        )
        [attributeDefaults] => array()
        [CActiveRecordMetaData:_model] => Destination#16
        (
            [CActiveRecord:_md] => CActiveRecordMetaData#2(...)
            [CActiveRecord:_new] => false
            [CActiveRecord:_attributes] => array()
            [CActiveRecord:_related] => array()
            [CActiveRecord:_c] => null
            [CActiveRecord:_pk] => null
            [CActiveRecord:_alias] => 't'
            [CModel:_errors] => array()
            [CModel:_validators] => null
            [CModel:_scenario] => ''
            [CComponent:_e] => null
            [CComponent:_m] => null
        )
    )
    [CActiveRecord:_new] => true
    [CActiveRecord:_attributes] => array()
    [CActiveRecord:_related] => array
    (
        'attributes' => array
        (
            'name' => 'Test name'
            'description' => ''
            'contactId' => ''
            'fullDistance' => ''
        )
    )
    [CActiveRecord:_c] => null
    [CActiveRecord:_pk] => null
    [CActiveRecord:_alias] => 't'
    [CModel:_errors] => array()
    [CModel:_validators] => null
    [CModel:_scenario] => 'insert'
    [CComponent:_e] => null
    [CComponent:_m] => null
) 
```

安全属性：

```
2012/08/15 16:58:03 [info] [application] Safe attributes:
array
(
    '0' => 'name'
    '1' => 'locationId'
    '2' => 'fullDistance'
    '3' => 'description'
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:03:27.977

这是一个命名冲突。此数据库中有一个“属性”表，以及一个引用该表的关系 $model->attributes。Yii 生成的代码在这一行进行了大量的分配：

```
$model->attributes = $_POST['Destination']; 
```

并且由于`$model->attributes`已被重新定义为关系，因此无法正确执行大规模分配。

# jquery - JQuery 在 $.click 内结束 $.each() 循环

> ID：11962948
> 
> 赞同：4
> 
> 时间：2012-08-15T01:20:54.357
> 
> 标签：jquery

```
$('#button').click(function() {
   $('.field').each(function() {
      if (condition) {
         return false;
      }
   });
   alert("This alerts even when loop returns false");
}); 
```

如果我的`if`条件达到`return false;`脚本将继续移动通过 $.click 事件。是否可以完全停止所有 javascript 函数/事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:23:40.420

这`return`结束了内部功能块；要结束外部块，请使用另一个`return`：

```
$('#button').click(function() {
    var exit = false;
    $('.field').each(function() {
        if (condition) {
            exit = true;
            return false;
        }
    });

    if( exit ) {
        return false;
    }

    alert("This alerts even when loop returns false");
}); 
```

（或者，您可以根据您设置的布尔变量有条件地执行剩余的代码，类似于我的设置方式`exit`）

# c# - 如何将 HubTile 用于应用程序磁贴

> ID：11962949
> 
> 赞同：0
> 
> 时间：2012-08-15T01:20:59.537
> 
> 标签：c#, windows-phone-7

我想在我的主应用程序磁贴固定到开始屏幕时为其添加一些动画，并且想知道这怎么可能。我曾考虑在我的 CreateApplicationTile() 方法中创建一个 HubTile，但我不知道这是否可行或如何实现？有什么建议么？

MainPage.xaml.cs

```
public void CreateApplicationTile()
    {
        BitmapImage bitmap = new BitmapImage();
        bitmap.UriSource = new Uri("/Background.png", UriKind.Relative);

        HubTile tile = new HubTile
        {
            Title = "ShareSky",
            Source = bitmap

        };

        var appTile = ShellTile.ActiveTiles.First();

        if (appTile != null)
        {
            var standardTile = new StandardTileData
            {
                //Title = "ShareSky",
                ////BackgroundImage = new Uri("Images/SecondaryTileFrontIcon.jpg", UriKind.Relative),
                ////Count = 13, // any number can go here, leaving this null shows NO number
                //BackTitle = "ShareSky",
                ////BackBackgroundImage = new Uri("Images/ApplicationTileIcon.jpg", UriKind.Relative),
                //BackContent = "Click Me!"                    
            };

            appTile.Update(standardTile);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:20:33.127

这对于 Windows Phone 7.5 是不可能的。这是 Windows Phone 8 的计划

# python - 我应该在源文件中的哪里导入 Python 库？

> ID：11962951
> 
> 赞同：0
> 
> 时间：2012-08-15T01:21:20.223
> 
> 标签：python, import, libraries

我刚刚下载了 Pygame，但我不确定如何将它导入到我的程序中。

我应该把包含 Pygame 的文件夹放在哪里？在 python2.7 文件夹内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:29:14.807

这一切都取决于你想把它放在哪里。只要您具有读取权限，就可以告诉 Python 从您想要的任何位置搜索和加载模块。[请参阅有关Modules](http://docs.python.org/tutorial/modules.html#the-module-search-path)的 python 文档，特别是有关模块搜索路径的部分。

为了便于使用，Pygame 模块可以放置在您执行 python 脚本的同一目录中，或者您的脚本可以按照上面链接中的指示附加库路径，然后尝试导入模块（s ） 作为适当的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:34:37.313

## 如何安装 PyGame

阅读[文档](http://www.pygame.org/install.html)：

> **Windows 二进制安装程序**
> 
> 这可能是最流行的安装方法。如果您在 Windows 上运行，强烈建议您使用这种安装形式。安装程序几乎包含您需要的一切，并且有一个简单的点击安装程序。
> 
> ...

所以基本上下载 Windows 版本，它应该很容易安装（包括一个向导）。

## 如何导入模块

在导入方面，这就像导入任何其他模块一样简单：

```
import some_module 
```

具体来说，PyGame 可以这样导入（参见[教程](http://www.pygame.org/docs/tut/ImportInit.html)）：

```
import pygame
from pygame.locals import * 
```

## 如何检查模块是否被找到

这应该可以工作，因为安装程序应确保模块位于 Python 正在搜索模块的路径上。要查看 Python 搜索模块的确切位置，请在控制台中执行以下操作：

```
import sys
print sys.path 
```

如果 PyGame 安装在这些路径之一上，那么一切都应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:30:35.063

启动python，导入sys，打印出sys.path。这是 Python 用来查找导入的搜索路径。您通常会将其放在 dst_packages 中。

```
import sys
print sys.path 
```

从那里你可以看到 python 在哪里寻找。

我相信您也可以随时使用“pip”安装。

您是否收到错误消息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T01:30:53.900

你可以把lib放在你喜欢的任何地方。

您可能需要查看本教程： [http ://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T01:35:33.140

我查看了 Pygame[下载说明](http://www.pygame.org/install.html)，似乎可下载的内容`.exe`可能会为您解决细节问题。`setup.py`运行后是否在目录中看到文件`.exe`？如果是这样，您应该能够`python setup.py install`从该目录运行以“正确”安装它（注意：我从未使用过安装程序，因此它很可能完全绕过该步骤）。

至于您需要放置任何给定模块的位置，基本上就像@Adrian 所说的那样 - 这就是您想要放置它的所有位置。@tijko 的帖子将向您展示使用该`import`语句时 Python 的确切位置。

# asp.net - 通过 HTTPS 的安全令牌服务 (STS)

> ID：11962954
> 
> 赞同：2
> 
> 时间：2012-08-15T01:21:51.377
> 
> 标签：asp.net, wcf, token

我在 Visual Studio 中创建了一个新的 WCF 安全令牌服务，它在 http 上运行良好。我现在正在尝试将其配置为通过 https 运行。我已将 IIS 中的目录安全性更改为需要 SSL。

正如预期的那样，当我通过 http 浏览服务时，我现在收到消息“必须通过安全通道查看该页面”。但是，当我通过 https 浏览服务时，我收到一条错误消息，提示“找不到与绑定 WS2007HttpBinding 的端点的方案 http 匹配的基地址。注册的基地址方案是 [https]。”

我假设 web.config 文件中必须有一个我忽略的配置，但我不太确定它是什么。在这件事上的任何帮助都会很棒。

我的 web.config 文件如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <appSettings>
    <add key="IssuerName" value="ActiveSTS"/>
    <add key="SigningCertificateName" value="CN=STSTestCert"/>
    <add key="EncryptingCertificateName" value="CN=DefaultApplicationCertificate"/>
  </appSettings>

  <connectionStrings />

  <location path="FederationMetadata">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <authentication mode="None"/>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </controls>
    </pages>
  </system.web>

  <system.web.extensions>
    <scripting>
      <webServices>
          <authenticationService enabled="true" requireSSL = "true"/>
      </webServices>
    </scripting>
  </system.web.extensions>

  <system.serviceModel>
    <services>
      <service name="Microsoft.IdentityModel.Protocols.WSTrust.WSTrustServiceContract" behaviorConfiguration="ServiceBehavior">
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
        <endpoint address="IWSTrust13" binding="ws2007HttpBinding" contract="Microsoft.IdentityModel.Protocols.WSTrust.IWSTrust13SyncContract"  bindingConfiguration="ws2007HttpBindingConfiguration"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/DemoSTS/Service.svc" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <bindings>
      <ws2007HttpBinding>
        <binding name="ws2007HttpBindingConfiguration">
          <security mode="Message">
            <message establishSecurityContext="false" />
          </security>
        </binding>
      </ws2007HttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:56:28.450

添加额外的 https 基地址。

如果您是 IIS 上的主机，则必须配置 SSL 并为 https 通道分配适当的证书。

# machine-learning - 从自然语言文本中提取数据

> ID：11962955
> 
> 赞同：1
> 
> 时间：2012-08-15T01:21:53.353
> 
> 标签：machine-learning, nlp

我有一组文字报纸广告，我想提取所售商品及其价格等信息。这些广告不遵循任何结构化格式。我可以访问成千上万个这样的广告。

我应该从哪里开始这个项目？有没有图书馆可以帮忙？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:51:32.603

最简单的方法似乎是使用**规则**和**字典**。例如，您可以使用简单的正则表达式解析价格并使用大型项目​​字典进行检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:04:03.673

如果您不熟悉这个概念，您可以尝试观看[IBM Big Insight Text Analytics的以下](http://publib.boulder.ibm.com/infocenter/bigins/v1r1/index.jsp?topic=/com.ibm.swg.im.infosphere.biginsights.doc/doc/r0057884.html)[视频](http://www.youtube.com/watch?v=Bc3MI_aeHsw)。他们的项目正在提取有关 IBM 股票的价格信息，与您的项目类似。他们从这个项目开始，并通过一系列视频几乎完成了它。一路上，他们教了更多关于正则表达式的知识。

请注意，此视频可能会帮助您了解此类项目的工作流程。如果您精通任何具有良好正则表达式支持的编程语言，perl、ruby、python、groovy……您可以轻松地重复他们的实验。

我也从未使用过这个产品，但观看了所有这些视频，希望能更多地了解文本挖掘。我再说一遍，您可以在没有此产品的情况下完成所有这些操作，但当然不太容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:40:34.607

根据您的编码经验以及文本文件的格式，一种方法是将它们导入 Excel 并使用“文本到列”功能以某种方式将广告的字段拆分为单独的单元格。

例如，如果您有**Name: Black car**和**Price: $1000.00**那么 Excel 可以使用设置为在冒号上拆分的 Text to Columns 函数轻松拆分它们。

也许更详细地解释文本文件的格式。

# android - Android：activity中的静态值需要被其他activity访问

> ID：11962957
> 
> 赞同：0
> 
> 时间：2012-08-15T01:22:05.213
> 
> 标签：android, android-activity, static, organization

我在需要通过多个活动访问的 mainActivity.java 中有一个静态值。做这个的最好方式是什么？我只能想到一种方法来实现这一点。我从不“完成（）”mainActivity.java。但是，从 mainActivity 派生的访问静态值的其他活动已完成。我是 android 编程的新手，因此感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:07:41.080

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)以获得更可靠的性能。

或者，您可以有一个 Utility 类来保存您想随时在整个应用程序中使用的所有静态成员。

如果您决定这回答了您的问题，请将其标记为“已接受”。这将提高您和我的声誉分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:49:01.970

静态属性不属于任何实例，而是属于类本身。

即使在活动完成后，静态值也会持续存在。

因此，您可以通过以下方式访问活动的静态值

```
int value = MainActivity.value; 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:41:48.787

您可以将值传递给其他活动或将静态值放入`Application`

# json - 压缩小块数据

> ID：11962959
> 
> 赞同：2
> 
> 时间：2012-08-15T01:22:49.693
> 
> 标签：json, compression, zlib, libz, text-compression

我有一个 4KB 的缓冲区，其中包含类似 JSON 格式的数据。我需要向它添加更多信息（最多可以说是 3 倍），但我必须适应这一小块内存。我正在考虑使用 libZ 来压缩文本，但我担心它不会表现良好，因为数据主要由一些独特的子字符串组成。在这种情况下你会推荐什么？谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T01:27:45.387

考虑一个包含多达 32K 字符串的固定字典，这些字符串您希望出现在数据中。您将使用[zlib](http://zlib.net/)的`deflateSetDictionary()`and`inflateSetDictionary()`在每一端（分别是数据的发送者和接收者）在两端使用相同的字典。这可能会为您提供所需的压缩。如果没有字典，您不太可能使用如此少量的数据获得这种压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:28:30.357

如果您真的想坚持使用压缩，那么使用利用数据特定结构的自定义字典的压缩算法将表现最佳。我用 SharpZipLib 实现了类似的东西。

如果您想在缓冲区中存储更多数据并且不坚持使用类似文本的数据压缩，请考虑使用二进制协议，例如 Google 的 Protocol Buffers。

**更新**

@Mark 的回答概述了如何将自定义字典与 zlib 一起使用。

# jquery - 用 css 或 jquery 覆盖 !important

> ID：11962962
> 
> 赞同：56
> 
> 时间：2012-08-15T01:23:24.670
> 
> 标签：jquery, css, content-script

（这是在 chrome 扩展中使用内容脚本）

我需要覆盖网页标记为的一些 css 属性`!important`。这可能吗？

例如，如果我想去掉标记为重要的边框：

```
$(".someclass").css('border','none'); //does not work 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-08-15T01:31:17.873

干得好：

```
$( '.someclass' ).each(function () {
    this.style.setProperty( 'border', 'none', 'important' );
}); 
```

**现场演示：http:** [//jsfiddle.net/Gtr54/](http://jsfiddle.net/Gtr54/)

`.setProperty`元素对象的方法`style`使您能够传递代表优先级的第三个参数。因此，您正在用自己的 !important 值覆盖 !important 值。据我所知，无法使用 jQuery 设置 !important 优先级，因此您唯一的选择是内置`.setProperty`方法。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-09-12T23:34:37.970

你也可以这样做：

```
$(".someclass").css("cssText", "border: none !important;"); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-15T09:02:17.077

This should help.

```
$(".someclass").attr("style","border:none!important"); 
```

Updated, so as not to overwrite all styles:

```
var existingStyles = $(".someclass").attr("style");
$(".someclass").attr("style", existingStyles+"border:none!important"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T12:16:47.813

还有另一种方式

```
$("#m_divList tbody").find("tr[data-uid=" + row.uid + "]").find('td').css("cssText", "color: red !important;"); 
```

**css("cssText", "color: red !important;");**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-24T07:20:55.173

we can just add class using jquery

```
$("someclass").addClass("test");

<style>
.test{
border:none !important;
}
</style> 
```

# php - htaccess 重复的 file_put_contents

> ID：11962964
> 
> 赞同：2
> 
> 时间：2012-08-15T01:23:34.900
> 
> 标签：php, .htaccess, routes

我创建了一个日志类。一切正常，“添加”方法将数据附加到 X.log。问题是，当我打开 htaccess 时，file_put_contents 写了 2 行（不是一行）。

基本上，我尝试不上课，只在 index + htaccess 中写入 file_put_contents，并复制日志。

这个问题看起来像一个 htaccess 路由两次。

这是最小的代码：

索引.php：

```
DEFINE('BASE_PATH',dirname(__FILE__));
DEFINE('DS',DIRECTORY_SEPARATOR);
DEFINE( 'LOG_PATH' , BASE_PATH . DS . "var" . DS . "log" . DS );
file_put_contents(LOG_PATH."1.log", "hola".PHP_EOL, FILE_APPEND | LOCK_EX);
die(); 
```

.ht 访问代码：

```
Options +FollowSymLinks
IndexIgnore */*
DirectoryIndex index.php
<IfModule mod_rewrite.c>
RewriteEngine on
    RewriteCond %{REQUEST_URI} !^/(var|skin|js)/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L]
</IfModule> 
```

感谢帮助！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T01:28:33.820

您的浏览器请求 favicon.ico。并且可能您没有 - 因此请求被重写，`index.php`因此您添加了超过 1 条记录。

只需查看您的 access.log 并查看请求的实际 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:46:04.237

谢谢zerkms，那是正确的，问题是favicon。如果有人需要，我将此条件添加到 .htaccess：

.htaccess

```
RewriteCond %{REQUEST_URI} !/favicon\.ico$
RewriteRule .* index.php [L] 
```

再次感谢 zerkms。

# javascript - 如何让 Mocha 的 grep 选项在浏览器中工作

> ID：11962966
> 
> 赞同：3
> 
> 时间：2012-08-15T01:23:49.360
> 
> 标签：javascript, testing, mocha.js

我正在使用 Mocha 在浏览器中编写 BDD 测试。我希望能够使用 Mocha 的 grep 选项运行选择性测试。从 node.js 环境的命令行启动时，Mocha 支持 grep。但是我无法让它为浏览器工作。

我正在设置 Mocha，如这些[示例](https://github.com/visionmedia/mocha/tree/master/test/browser)html 文件中所示，并尝试将 grep 作为选项传递，但这不起作用

```
mocha.setup({ui:"bdd",ignoreLeaks:true,grep:"pattern"})
mocha.run() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:20:13.743

好的，我想通了。

您可以像这样在 URL 中提及 grep 选项

```
/?grep=pattern 
```

如果您想以编程方式启动测试，您需要确保`window.location.search`读取`?grep=pattern`.

直接将 window.location.search 设置为某个字符串可能是不可取的，因为这会刷新页面。`window.history.pushState({},'Test','/?grep=pattern')`相反，您可以在调用之前使用 HTML5 历史 API`mocha.run()`

# ssas - 我应该对股票市场历史分析项目采用关系型还是多维/OLAP 方法？

> ID：11962970
> 
> 赞同：0
> 
> 时间：2012-08-15T01:25:53.670
> 
> 标签：ssas, data-mining, olap, ssas-2008

这本身不是一个语法/编码特定的问题，但我无法在网上找到任何直接与之相关的真正文章。当我开始使用 Sql Server Analysis Services (2008R2) 深入研究数据挖掘时，我想知道是否应该采用关系数据方法（因为我的数据当前存在）还是从 OLAP 模型开始。我正在研究 5,000 个品种的每日股市数据。这意味着大约有 12 个表，每个表只有数百万行。根据我目前的基本理解，OLAP 似乎增加了一层额外的复杂性，我认为这是不合理的。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:52:47.293

一些想法...

建立一个 OLAP 模型为使用 MDX 进行复杂的数据分析提供了巨大的潜力。MDX 是一种非常强大的语言，具有比 SQL 更高级别的概念（例如，不同类型的聚合（例如，打开/关闭）、分层维度、函数式语言、向下钻取、计算度量等......）。也许在未来，随着数据量的增加，原始 SQL 可能会出现一些性能问题；OLAP 多维数据集应该更快。

# vim - 如何使vim在最后一个字符时转到下一行并按右箭头键

> ID：11962975
> 
> 赞同：0
> 
> 时间：2012-08-15T01:26:46.053
> 
> 标签：vim

> **可能重复：**
> [自动转到vim中的下一行](https://stackoverflow.com/questions/2574027/automatically-go-to-next-line-in-vim)

这是我当前的[.vimrc 配置文件](https://github.com/sntshkmr60/vimrc/blob/master/.vimrc)。

假设我在`10`任何文件的行上，并且也在最后一个字符上。现在在这里，如果**Vim**是**gedit**（或者我认为是任何 GUI 编辑器），那么按右箭头键会让我进入 line `11`。当我在行的第一个字符时也是`11`如此，然后按左箭头键应该让我转到行的最后一个字符`10`。

### 我的问题：

我可以将 Vim 配置为像其他 GUI 编辑器一样运行，并`11`在我按右箭头键时让我到达线路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:47:17.583

添加 '<' 和 '>' 到`whichwrap`：

```
set whichwrap+=<,>,[,] 
```

见`help 'whichwrap'`。

# mysql - 查询两个没有任何关系的表

> ID：11962976
> 
> 赞同：4
> 
> 时间：2012-08-15T01:26:51.027
> 
> 标签：mysql, sql

假设我们有两张桌子`users`和`products`

表`users`有一个 accountBalance 列

表`users`架构：

```
userId  accountBalance .........
1           500        .........
2           45000      .........
3           4238827    .........
.               .      .........
.               .      .........
.               .      ......... 
```

表`products`有一个价格列

表`products`架构：

```
productId   price      .........
1           40000      .........
2           55000      .........
3           90000      .........
.               .      .........
.               .      .........
.               .      ......... 
```

这些表没有任何关系，所以我不能通过一个公共键加入它们。我想知道的是找出每个用户可以购买哪些产品并将其格式化为预期结果如下：

是`expected result`：

```
userId  productIdsUserAffordToBuy
1       NUll
2       1*2
3       1*2*3
.       .
.       .
.       . 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T01:33:44.767

使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)在单个列中创建列表并根据条件加入，`accountBalance >= price`您实际上可以执行一个（必须为买不起任何东西的用户`LEFT JOIN`返回，而不是省略该行）：`NULL`

```
SELECT
  userId,
  GROUP_CONCAT(productId) AS productIdUserAffordToBuy
FROM
  users
  LEFT JOIN products ON users.accountBalance >= products.price
GROUP BY userId 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T01:34:09.707

```
select userid,accountbalance,group_concat(productid) as productaffordtobuy
from users cross join products 
where price<=accountbalance
group by userid 
```

[SQL 小提琴在这里>](http://sqlfiddle.com/#!2/57f51/7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T03:50:38.820

`Cross Join`没有任何关系或`id`有点棘手

```
select userid,accountbalance,productid as productaffordtobuy
from users 
cross join products 
where price<=accountbalance
group by userid 
```

# ajax - Capybara/Rspec 监听 ajax 响应明确不等待 x 秒

> ID：11962979
> 
> 赞同：2
> 
> 时间：2012-08-15T01:27:12.040
> 
> 标签：ajax, rspec, capybara, bdd

我正在尝试为 ajax 请求返回某个 JSON 响应后 UI 中发生的事情编写端到端测试。

基本上，我想通过创建一个活动记录对象、请求它（通过 ajax get）然后测试前端是否在某处显示该内容来测试整个堆栈。我正在使用带有 Backbone.js 前端的 Capybara/Rspec 运行 Rails 3。

目前，我正在通过显式设置等待响应`sleep`。目前这工作正常，但显然不是最好的主意。

如何等待 Capybara 中的 ajax 响应？我是否需要通过隐藏的表单字段或其他方式公开 JSON 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:29:06.127

如果您正在检查页面内容，Capybara 会自动等待响应。如果等待时间不够长，请尝试增加 spec_helper.rb 文件中 Capybara.default_wait_time 的值。就我而言，我发现默认只有 2 秒；将其增加到 5 有助于我的规范通过。

# django - Django 通过两条不同的路径获取 tinymce

> ID：11962980
> 
> 赞同：1
> 
> 时间：2012-08-15T01:27:14.770
> 
> 标签：django, tinymce

当我转到主站点页面时，对 tinymce 的请求是：

```
"GET /media/js/tiny_mce/textareas.js HTTP/1.1" 200 2007
"GET /media/js/tiny_mce/tiny_mce.js HTTP/1.1" 200 207773 
```

因为我将 MEDIA_URL 用于 tinymce 的东西。但是当我去 /admin 页面请求是：

```
"GET /static/js/tiny_mce/tiny_mce.js HTTP/1.1" 304 0
"GET /static/js/tiny_mce/textareas.js HTTP/1.1" 200 2007 
```

为什么？在哪里纠正这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:24:05.650

\venv\Lib\site-packages\tinymce\settings.py 的片段：

```
if 'staticfiles' in settings.INSTALLED_APPS or 'django.contrib.staticfiles' in settings.INSTALLED_APPS:
    JS_URL = getattr(settings, 'TINYMCE_JS_URL',os.path.join(settings.STATIC_URL, 'tiny_mce/tiny_mce.js'))
    JS_ROOT = getattr(settings, 'TINYMCE_JS_ROOT',os.path.join(settings.STATIC_ROOT, 'tiny_mce'))
else:
    JS_URL = getattr(settings, 'TINYMCE_JS_URL','%sjs/tiny_mce/tiny_mce.js' % settings.MEDIA_URL)
    JS_ROOT = getattr(settings, 'TINYMCE_JS_ROOT', os.path.join(settings.MEDIA_ROOT, 'js/tiny_mce')) 
```

AFAIR 'django.contrib.staticfiles' 默认包含在 INSTALLED_APPS 中。因此 tinymce 应该位于静态目录中。关于将tinymce放入媒体目录的说明误导了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:18:01.477

django 的较新版本（1.4）[使用静态文件应用程序来处理管理媒体](https://docs.djangoproject.com/en/dev/releases/1.4/#django-contrib-admin)（即`/static/...`）：

> 从 Django 1.4 开始，管理员的静态文件也遵循此约定 [使用静态文件]，以使文件更易于部署。在以前的 Django 版本中，定义 ADMIN_MEDIA_PREFIX 设置以指向管理员的静态文件在 Web 服务器上的 URL 也是很常见的。此设置现已弃用并由更通用的设置 STATIC_URL 取代。

所以，如果你是 < 1.4，你可以使用[`ADMIN_MEDIA_PREFIX`](https://docs.djangoproject.com/en/dev/ref/settings/#admin-media-prefix)来更改管理员使用的路径（检查[这个](https://stackoverflow.com/questions/1081596/django-serving-admin-media-files)问题以确保你看到它是如何工作的）。否则，调整您的应用程序以[使用静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)

# c++ - 如何在 Linux 发行版上将 SFML C++ 源代码从 Linux 编译到 Windows？

> ID：11962983
> 
> 赞同：1
> 
> 时间：2012-08-15T01:27:34.163
> 
> 标签：c++, windows, linux, cross-platform, sfml

我在网上搜索了 5 个小时的解决方案，但仍然无法使用[SFML](http://www.sfml-dev.org/) API 在我的 Linux Distro (openSuSE) 上编译到 Windows。

通过调用以下命令，我可以在 openSuSE 上使用 MinGW 编译器毫无问题地编译非 SFML 应用程序：

`i686-w64-mingw32-g++ Main.cpp`

但是，每当我编译这样一个 SFML 程序时：[http ://www.sfml-dev.org/tutorials/1.6/start-cb.php](http://www.sfml-dev.org/tutorials/1.6/start-cb.php)

我收到此错误：`fatal error: SFML\System.hpp: No such file or directory`

我试过了： `i686-w64-mingw32-g++ Main.cpp -L /home/user/Downloads/SFML1.6/lib -lsfml-system`

但我仍然得到同样的错误。

我的 IDE 是 Eclipse Juno，我在可选功能中安装了用于 CDT 跨平台开发的工具链支持。同样，尝试使用 Eclipse，我的程序编译没有任何问题，而不使用 SFML API。但是，一旦我使用 SFML 编译程序，就会出现错误。是的，它使用 GNU G++ 和 SFML。我尝试的是从下载页面下载适用于 Windows 的 SFML 并编译（这是我之前展示的），但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:06:04.890

错误是抱怨`SFML\System.hpp`. 请注意其中的反斜杠。即使您的目标是 Windows 平台，头文件仍应使用正斜杠。

# ruby-on-rails - 催化剂与 Ruby on Rails 2012

> ID：11962987
> 
> 赞同：0
> 
> 时间：2012-08-15T01:27:59.703
> 
> 标签：ruby-on-rails, catalyst

在 Catalyst 和 Cpan 中，有很多库。反应 0.002005 怎么样？版本太差了，这个版本是2011年3月8日。Catalyst有这么“安静”吗？催化剂的未来如何？从stackoverflow来看，ruby on rails这么流行而Catalyst这么不流行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:27:17.393

我不确定一个堆栈相对于另一个堆栈的问题量是一个特别有用的指标。有一个充满活力的 Catalyst 社区，它可能是最流行的基于 perl 的 Web 框架。查看内核的更新频率；我确信 Reaction 很可爱，而且一切都很好，但我不会用它的更新周期来衡量任何东西：它在设计上是抽象的，而且是一个非常高级的主题。

根据您的项目规模（Mojo、Dancer 等），还有其他 perl Web 框架值得您探索。但催化剂是最成熟的。

你剩下的问题有点“我应该买捷豹还是约翰迪尔？” 这取决于你的环境，你打算做什么，等等。无法回答。

# javascript - 通过 Javascript 创建 Div - 语法问题

> ID：11962989
> 
> 赞同：0
> 
> 时间：2012-08-15T01:28:02.480
> 
> 标签：javascript, html, appendchild

编辑：下面是新代码。下面是原始问题。我正在就这段代码的问题寻求帮助，因为在我一周大的眼中，它似乎很好。

```
function creatediv(){

    for (i=1;i<13;i++){
        var newcovdiv = document.createElement('div');
        newcovdiv.setAttribute('id',"cover_"+i);
        newcovdiv.style.width="900px";
        newcovdiv.style.height="25px";
        newcovdiv.style.position="relative";
        newcovdiv.style.left="0px";
        newcovdiv.style.top=(i-1)*25+"px";
        newcovdiv.style.background="#FFFFFF";
        newcovdiv.style.display="none";
        document.getElementById('staff').appendChild(newcovdiv);
    }

    var newstaffdiv = document.createElement('div');
    newstaffdiv.setAttribute('id',"staff_sub");
    newstaffdiv.style.width="900px";
    newstaffdiv.style.height="300px";
    newstaffdiv.style.position="relative";
    newstaffdiv.style.left="0px";
    newstaffdiv.style.top="0px";
    newstaffdiv.style.backgroundImage="url(../images/staff_sub.png)";
    newstaffdiv.style.display="none";
    document.getElementbyId('staff').appendChild(newstaffdiv);

    for (i=13;i<101;i++){
        var newcovrdiv = document.createElement('div');
        newcovrdiv.setAttribute('id',"cover_"+i);
        newcovrdiv.style.width="900px";
        newcovrdiv.style.height="25px";
        newcovrdiv.style.position="relative";
        newcovrdiv.style.left="0px";
        newcovrdiv.style.top=(i-1)*25+"px";
        newcovrdiv.style.background="#FFFFFF";
        newcovrdiv.style.display="none";
        document.getElementById('paper').appendChild(newcovrdiv);
    }

} 
```

到目前为止，这个地方非常有帮助。

我刚开始学习 Javascript，语法一直让我着迷。我找到了一个动态创建 div 元素的 javascript 函数的示例，并且我尝试在我的代码中实现它，但发现了错误 - 但不是我。我不知道代码哪里不好。有人可以指出什么语法（或更糟）是错误的吗？

我用

```
<body onload="creatediv()"> 
```

这是javascript函数：

```
function creatediv(){

    for (i=1;i<13;i++){
        var newcovdiv = document.createElement('div');
        newcovdiv.setAttribute('id',"cover_"+i);
        newcovdiv.style.width=900;
        newcovdiv.style.height=25;
        newcovdiv.style.position="relative";
        newcovdiv.style.left=0;
        newcovdiv.style.top=(i-1)*25;
        newcovdiv.style.background="#FFFFFF";
        newcovdiv.style.display="none";
        document.getElementById('staff').appendChild(newcovdiv);
    }

    var newstaffdiv = document.createElement('div');
    newstaffdiv.setAttribute('id',"staff_sub");
    newstaffdiv.style.width=900;
    newstaffdiv.style.height=300;
    newstaffdiv.style.position="relative";
    newstaffdiv.style.left=0;
    newstaffdiv.style.top=0;
    newstaffdiv.style.background-image="url(../images/staff_sub.png);
    newstaffdiv.style.display="none";
    document.getElementbyId('staff').appendChild(newstaffdiv);

    for (i=13;i<101;i++){
        var newcovrdiv = document.createElement('div');
        newcovrdiv.setAttribute('id',"cover_"+i);
        newcovrdiv.style.width=900;
        newcovrdiv.style.height=25;
        newcovrdiv.style.position="relative";
        newcovrdiv.style.left=0;
        newcovrdiv.style.top=(i-1)*25;
        newcovrdiv.style.background="#FFFFFF";
        newcovrdiv.style.display="none";
        document.getElementById('paper').appendChild(newcovrdiv);
    }

} 
```

已经有 ID 为“paper”和“staff”的 div。这是我第一次使用 appendChild 的东西，所以我认为问题可能就在那里。

这很麻烦。我会感谢任何试图帮助我的人。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:31:52.107

您的代码有一些明显的问题：

1）你不能使用背景图片，因为属性名称在使用点形式时不能连字符，而且它缺少一个“。

```
style.backgroundImage 
```

2）所有的数值类型属性（top、left、width、height）都应该是css字符串，所以都需要转换成

```
style.width = '900px' 
```

3）您的onload函数调用creatediv（），但是您发布的函数称为letsgetiton，不确定这是否只是因为您发布它的方式或它在您的实际代码中的方式。

4) document.getElement* *B* *yId 案例很重要

您可能想查看 Chrome 开发人员工具或 firefox 中的 firebug。该错误会立即弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:32:43.850

我注意到两个问题：

* * *

以下代码行试图访问无效属性并且没有右引号。

```
newstaffdiv.style.background-image="url(../images/staff_sub.png); 
```

它应该是这样的：

```
newstaffdiv.style.backgroundImage="url(../images/staff_sub.png)"; 
```

* * *

您正在调用 function `createDiv()`，但提供的函数名为`letsgetiton()`。

# html - 字母印刷效果

> ID：11962991
> 
> 赞同：1
> 
> 时间：2012-08-15T01:28:19.843
> 
> 标签：html, colors, css

我似乎无法获得正确的颜色值/名称，因此我可以在文本上获得 Letter Press 效果。

> 要创建已标记文本的外观，请选择比背景更暗的文本颜色，然后创建一个 1px 模糊的 1px 文本阴影并将其向下偏移 1px。使文本阴影比背景略亮

```
background-color: rgba(255, 255, 255, 0.8);
color: #222;
text-shadow: 1px 1px 1px #FFFFFF; 
```

到目前为止，我只得到这个

![在此处输入图像描述](../Images/20eff8c68f4948f8ceb20f4bb405ac43.png)

我该怎么办

1.  查找比背景深的文本颜色。背景颜色为 rgba (255, 255, 255, 0.8)，文本颜色为#222。
2.  查找比背景更亮的文本阴影颜色。背景颜色为 rgba (255, 255, 255, 0.8)，文字阴影颜色为#FFFFFF；

我需要将文本颜色（当前 #222）更改为较暗的文本颜色（当前为 #FFFFFF），将背景颜色（当前为 rgba 255、255、255、0.8）更改为较浅的颜色。我无法将背景颜色更改为任何其他颜色。

没有设计技能，也许有人会如何改变文本的颜色值以及文本阴影以产生更明显的凸版效果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:10:03.613

玩弄一些文字阴影的这种使用---

[http://jsfiddle.net/sheriffderek/bTZs9/1/](http://jsfiddle.net/sheriffderek/bTZs9/1/)

模糊实际上取决于字体大小......并且使用 rgba 颜色有助于消除猜测工作来寻找不同的色调以匹配纸张颜色......

![在此处输入图像描述](../Images/26d50974aa84f63c40245900c01bf53e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:02:41.283

你为什么不在文本阴影上做更少的模糊？

您正在使用：

```
color: #222;
text-shadow: 1px 1px 1px #FFF; 
```

使用较少的模糊，您的文本阴影变得更加普遍：

```
color: #222;
text-shadow: 1px 1px 0px #FFF; 
```

在这种情况下，Blur 是第三个参数，您应该使用 的值，`0px`而不是`1px`获得更类似于凸版印刷的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:34:36.103

这有点花哨，但你可以使用伪元素：

# JSFiddle

```
http://jsfiddle.net/Asustaba/MLEwp/

```

# CSS

```
    #戳{
    显示：块；
    白颜色;
    字体：3em Arial，无衬线；
    位置：相对；
    }

    #stamped：之前，#text：之后{
    内容：attr（标题）；
    颜色：#222；
    位置：绝对；
    }

    #stamped：之前{顶部：1px；左：1px；}
    #stamped:after { top: 2px; 左：2px；}

```

# HTML

```
    <h1 id="stamped" title="牛场">牛场</h1>

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T01:32:07.363

颜色 #222 太暗了。您必须使用 #333 或 #444 来盖印墨水。而且墨水不是固体的东西。你必须用这样的东西给文本一些噪音：http: [//www.mightymeta.co.uk/demos/css-noise/](http://www.mightymeta.co.uk/demos/css-noise/)

# node.js - Heroku 上的 Socket.io 聊天应用程序与 node.js

> ID：11962995
> 
> 赞同：3
> 
> 时间：2012-08-15T01:29:02.123
> 
> 标签：node.js, heroku, socket.io

与 Node.js 混在一起，有点不知所措，我无法得到这么简单的工作。此代码在我的本地服务器上运行良好，但聊天在 Heroku 上不起作用。如果我输入一些东西，什么都不会发生。我检查了 Heroku 日志，它们看起来不错。

**包.json**

```
{
     "name": "mukhin_chat",
     "description": "example chat application with socket.io",
     "version": "0.0.1",
     "dependencies": {
        "express": "2.4.6",
        "socket.io": "0.8.4"
     },
    "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

**应用程序.js**

```
// Variable port setting for heroku

var port = process.env.PORT || 3000;

var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(port);

// Heroku setting for long polling - assuming io is the Socket.IO server object
io.configure(function () { 
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 10); 
});

// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

// usernames which are currently connected to the chat
var usernames = {};

io.sockets.on('connection', function (socket) {

    // when the client emits 'sendchat', this listens and executes
    socket.on('sendchat', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
        io.sockets.emit('updatechat', socket.username, data);
    });

    // when the client emits 'adduser', this listens and executes
    socket.on('adduser', function(username){
        // we store the username in the socket session for this client
        socket.username = username;
        // add the client's username to the global list
        usernames[username] = username;
        // echo to client they've connected
        socket.emit('updatechat', 'SERVER', 'you have connected');
        // echo globally (all clients) that a person has connected
        socket.broadcast.emit('updatechat', 'SERVER', username + ' has connected');
        // update the list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
    });

    // when the user disconnects.. perform this
    socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];
        // update list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        // echo globally that this client has left
        socket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');
    });
}); 
```

**索引.html**

```
<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    var socket = io.connect('http://localhost:8080');

    // on connection to server, ask for user's name with an anonymous callback
    socket.on('connect', function(){
        // call the server-side function 'adduser' and send one parameter (value of prompt)
        socket.emit('adduser', prompt("What's your name?"));
    });

    // listener, whenever the server emits 'updatechat', this updates the chat body
    socket.on('updatechat', function (username, data) {
        $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
    });

    // listener, whenever the server emits 'updateusers', this updates the username list
    socket.on('updateusers', function(data) {
        $('#users').empty();
        $.each(data, function(key, value) {
            $('#users').append('<div>' + key + '</div>');
        });
    });

    // on load of page
    $(function(){
        // when the client clicks SEND
        $('#datasend').click( function() {
            var message = $('#data').val();
            $('#data').val('');
            // tell server to execute 'sendchat' and send along one parameter
            socket.emit('sendchat', message);
        });

        // when the client hits ENTER on their keyboard
        $('#data').keypress(function(e) {
            if(e.which == 13) {
                $(this).blur();
                $('#datasend').focus().click();
            }
        });
    });

</script>
<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>USERS</b>
    <div id="users"></div>
</div>
<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="conversation"></div>
    <input id="data" style="width:200px;" />
    <input type="button" id="datasend" value="send" />
</div> 
```

**档案**

```
web: node app.js 
```

**日志**

```
2012-08-15T01:24:03+00:00 heroku[web.1]: State changed from up to starting
2012-08-15T01:24:03+00:00 heroku[slugc]: Slug compilation finished
2012-08-15T01:24:05+00:00 heroku[web.1]: Starting process with command `node app.js`
2012-08-15T01:24:05+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-08-15T01:24:07+00:00 heroku[web.1]: Process exited with status 1
2012-08-15T01:24:08+00:00 app[web.1]:    info  - socket.io started
2012-08-15T01:24:09+00:00 heroku[web.1]: State changed from starting to up
2012-08-15T01:24:21+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=23ms status=200 bytes=1774
2012-08-15T01:24:21+00:00 app[web.1]:    debug - served static /socket.io.js
2012-08-15T01:24:21+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/socket.io/socket.io.js dyno=web.1 queue=0 wait=0ms service=15ms status=200 bytes=95997
2012-08-15T01:24:23+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=3ms status=404 bytes=34
2012-08-15T01:24:45+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=7ms status=200 bytes=1774
2012-08-15T01:24:45+00:00 app[web.1]:    debug - served static /socket.io.js
2012-08-15T01:24:45+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/socket.io/socket.io.js dyno=web.1 queue=0 wait=0ms service=18ms status=200 bytes=95997
2012-08-15T01:24:50+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0
2012-08-15T01:24:51+00:00 app[web.1]:    debug - served static /socket.io.js
2012-08-15T01:24:51+00:00 heroku[router]: GET still-bastion-7144.herokuapp.com/socket.io/socket.io.js dyno=web.1 queue=0 wait=0ms service=14ms status=200 bytes=95997 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:25:48.707

在您的客户端代码中，您尝试连接到端口 8080，这与您的服务器正在侦听的端口不一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T17:49:58.287

我的聊天在本地完美运行，但是当我将它上传到服务器上时，它在不同设备之间不起作用。我以同样的方式解决了它：在我的 index.html 中，我`var socket = io.connect();`在本地设置它`io.connect('http://localhost:8081');` 现在它像魅力一样工作））））））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T06:06:45.997

要让 websocket 在 heroku 上工作，您必须首先启用它们。

`heroku labs:enable websockets -a yourappname`从终端使用它。

希望这能解决问题。

# ffmpeg - mpeg-2 ts 视频音频跳过 - HTTP Live Streaming

> ID：11962998
> 
> 赞同：1
> 
> 时间：2012-08-15T01:29:21.137
> 
> 标签：ffmpeg, http-live-streaming, mpeg-2

我有多个 mp4 流，我使用 ffmpeg 将它们转换为 mpeg-2 ts 格式

```
ffmpeg -i 0.mp4 -vcodec libx264 -sameq -acodec libfaac -fflags +genpts -coder 0 -f mpegts 0.ts 
```

mp4 的范围从 1 到 n。在转换所有这些之后，我创建了一个类似于以下内容的清单文件：

```
#EXTM3U
#EXT-X-TARGETDURATION:4
#EXT-X-VERSION:4
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:EVENT
#EXTINF:4.000,
http://localhost/Nick2/0.ts
#EXT-X-DISCONTINUITY
#EXTINF:3.97,
http://localhost/Nick2/1.ts
#EXT-X-DISCONTINUITY
#EXTINF:3.97,
http://localhost/Nick2/2.ts
#EXT-X-DISCONTINUITY
#EXTINF:3.97,
http://localhost/Nick2/3.ts
#EXT-X-DISCONTINUITY
#EXTINF:3.97,
http://localhost/Nick2/4.ts
#EXT-X-ENDLIST 
```

我已经添加了#EXT-X-DISCONTINUITY，因为我正在尝试背靠背播放转换后的 mp4。问题是，如果我尝试使用 HTTP 实时流式传输，文件之间的音频会出现明显的*弹出*声。但如果在 QT 中播放这些片段，这并不明显。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:53:30.153

片段之间的间隙或弹出是由解码器被重置引起的。这基本上就是#EXT-X-DISCONTINUITY 标签的用途。

您可以删除在同一时间线上制作流的不连续性。这将要求您连接源文件，然后对输出进行编码和分段。以下是有关串联的一些文档：[http ://www.ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f](http://www.ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:39:20.067

所以，由于我想做 Http 直播，我将文件连接起来，然后再次拆分它们，这使得音频弹出消失了。尽管苹果媒体流验证器仍然失败，但事情似乎运作良好......